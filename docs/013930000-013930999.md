# StackOverflow 问答 13930000-13930999

# objective-c - 如何查看 XCode 4 中所有文件的编译错误？

> ID：13930004
> 
> 赞同：17
> 
> 时间：2012-12-18T09:36:54.357
> 
> 标签：objective-c, ios, xcode

当我在 XCode 4 中编译项目时，只要在任何代码文件中遇到错误，编译就会停止。有时我想编译项目中的所有代码文件并一次查看所有错误。那可能吗？我错过了这个设置吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-18T09:41:47.117

在 Xcode 的 Preference 中，在 General 选项卡中，选中“Continue build after errors”选项，如下图所示

![Xcode 常规首选项](../Images/d039b639999d0e65c37b1c2bfc6ff945.png)

# javascript - ROR 网站中的 Javascript Facebook 连接

> ID：13930007
> 
> 赞同：0
> 
> 时间：2012-12-18T09:36:55.363
> 
> 标签：javascript, facebook, ruby-on-rails-3

我有一个 ruby​​-on-rails Web 应用程序，我想在其中集成“Facebook 连接”功能，以便在 Facebook 中共享不同的活动。我怎样才能使用 Javascript 做到这一点？请给我一些演示链接。

此外，如果用户通过单击“Facebook Connect”按钮将他/她的帐户与 Facebook 连接，然后退出我的网站，然后该用户再次登录到我的网站，他/她的帐户仍应连接。那么，如何在会话中记住这些用户设置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:15:55.093

您可以尝试使用本教程进行 facebook 连接

[http://udooz.net/blog/2011/02/facebook-app-using-rails-koala/](http://udooz.net/blog/2011/02/facebook-app-using-rails-koala/)

# android - 如何从另一个应用程序获取图像

> ID：13930009
> 
> 赞同：0
> 
> 时间：2012-12-18T09:36:58.030
> 
> 标签：android, image-processing

我有一个应用程序来处理图片。它可以制作图片并将其写入`sdcard`或从图库中获取图片。

在`AndroidManifest.xml`我有这个：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

所以我的应用程序将被发现作为图片的目的地。到目前为止，一切都很好。但是现在接下来呢？图片在哪里，其他应用与我的应用共享什么？

* * *

谢谢你的帮助。这可能是问题所在（AndroidManifest.xml）。我必须把意图放在哪里？我有 2 个活动。第一个是登录没有图像操作，第二个是想要查看图像（仪表板）的人。但是我必须先登录，然后才能使用我的仪表板活动，所以我不能直接调用仪表板。我也将此代码放入登录onCreate Methode，但它总是返回null - 如果我通过gllery将图像“共享”到我的应用程序或其他东西（在正常启动时很明显，它将为null）。

登录活动.java

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    db = new DatabaseHandler(getApplicationContext());

    if(getIntent().getData() != null){
        Uri uri = getIntent().getData();
        File image = new File(uri.toString());
        Log.d("jnLoginURI",image.getAbsolutePath());
    } else {
        Log.d("jnLoginURI","uri=null");
    }
    // ............... 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.owndms.owndmsandroid2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
     <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-feature android:name="android.hardware.camera" />

    <application
        android:icon="@drawable/owndms"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".DashboardActivity" >
        </activity>

        <activity
            android:label="ownDMS"
            android:name=".LoginActivity">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

           <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="image/*" />
            </intent-filter>
         </activity>
    </application>
</manifest> 
```

顺便说一句：在我的仪表板活动中从图库中选择图像或使用相机制作图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:52:37.780

在`Activity`您添加 的地方`Intent-Filter`，`AndroidManifest.xml`您应该从 中获取共享的数据（图像）`Intent`。

**AndroidManifest.xml**

```
<application
    android:label="@string/app_name"
    android:icon="@drawable/ic_launcher">
    <activity
        android:name="MyActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
        </intent-filter>
    </activity>
</application> 
```

**我的活动：**

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView imageView = (ImageView) findViewById(R.id.imageView);

        if(getIntent().getData() != null){
            try {
                Uri uri = getIntent().getData();
                InputStream is = getContentResolver().openInputStream(uri);
                imageView.setImageBitmap(BitmapFactory.decodeStream(is));
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

**资源/布局/main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" >
    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/imageView"
        android:src="@drawable/ic_launcher"/>

</LinearLayout> 
```

希望能帮助到你。

# performance - R中的高性能大数据操作

> ID：13930010
> 
> 赞同：5
> 
> 时间：2012-12-18T09:37:00.000
> 
> 标签：performance, r, dataframe, bigdata, reshape2

我正在处理一组列表，其中包含深度嵌套的列表，除了以下事实之外没有固定结构：

1.  级别 1 的列表有一个元素，称为`variations`
2.  层次结构中的所有叶数据都是数字的。

例如：

```
list(
  list(variations = list(
    '12'   = list(x = c(a = 1))
    )),
  list(variations = list(
    '3'    = list(x = c(a = 6, b = 4)),
    'abcd' = list(x = c(b = 1), m = list(n = list(o = c(p = 1023))))
    ))
  ) 
```

我需要将列表数据结构转换为`reshape`表格的熔化（每个）数据框

```
data.frame(
  variation = c( '12',   '3',   '3', 'abcd',    'abcd'),
  variable  = c('x.a', 'x.a', 'x.b',  'x.b', 'm.n.o.p'),
  value     = c(    1,     6,     4,      1,      1023)
  ) 
```

或其他我可以执行快速分组和过滤的数据结构。

数据结构中有数百万个节点。该集合可以有数千个条目，每个条目都有数万个变体，其中包含 2-10+ 个名称未知的叶节点。

我正在寻找有关如何以快速方式从集合中构建数据框的建议。

一种方法是`unlist`在源数据上使用以展平列表，但我不确定以下内容：

*   我应该`unlist`在整个数据结构上运行，它将叶数字节点转换为字符串（然后我需要将其解析回数字）还是应该`unlist`在每个变体上使用（这将使数字叶节点保持完整）？

*   什么是解析`unlist`将创建以提取`variation`和`variable`值的长名称而不生成太多中间值的好方法？

不管是否`unlist`是正确的方法，我想知道：

*   构建单独`variation`的 ,`variable`和`value`向量或矩阵然后将它们组合成一个数据框而不是逐行构建数据框更好吗？

*   我不应该使用数据帧，而是使用另一种更快的数据结构来处理此类数据吗？无论我最终使用什么，都需要可转换为数据帧以用于`plyr`,`reshape`和`ggplot`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:42:50.630

有一个似乎很少被使用的函数，`rapply`它递归地对列表进行操作。我不知道它有多快（基于`lapply`，所以可能并不可怕但并不令人惊奇），而且使用起来很棘手。但值得考虑，如果只是为了优雅。

这是其使用的一个基本示例：

```
> rapply( test, classes="numeric", how="unlist", f=function(var) data.frame(names(var),var) )
      variations.12.x.names.var.              variations.12.x.var       variations.3.x.names.var.1       variations.3.x.names.var.2              variations.3.x.var1 
                             "a"                              "1"                              "a"                              "b"                              "6" 
             variations.3.x.var2     variations.abcd.x.names.var.            variations.abcd.x.var variations.abcd.m.n.o.names.var.        variations.abcd.m.n.o.var 
                             "4"                              "b"                              "1"                              "p"                           "1023" 
```

# z3 - 使用 Z3 进行等价检查

> ID：13930013
> 
> 赞同：5
> 
> 时间：2012-12-18T09:37:02.390
> 
> 标签：z3

我还是 Z3 的新手，有一个问题：是否可以使用 Z3 进行等效检查？

如果可能的话，你能给我一个检查两个公式是否等价的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T15:11:31.047

是的，有可能。有很多使用 Z3 来实现这一点。最简单的一个使用[Z3 Python API](https://github.com/Z3Prover/z3/tree/master/examples/python)`prove`中的过程。例如，假设我们要证明公式和是等价的。我们可以使用以下 Python 程序来做到这一点（您可以在[rise4fun](http://rise4fun.com/Z3Py/CbSAF)在线尝试）。`x >= 1 and x == 2*y``x - 2*y == 0, x >= 2`

```
x, y = Ints('x y')
F = And(x >= 1, x == 2*y)
G = And(2*y - x == 0, x >= 2)
prove(F == G) 
```

我们还可以证明两个公式对某个边条件取模是等价的。例如，对于位向量（即机器整数），`x / 2`等价于`x >> 1`if `x >= 0` （也可[在线](http://rise4fun.com/Z3Py/m5d)获得）。

```
x = BitVec('x', 32)
prove(Implies(x >= 0, x / 2 == x >> 1)) 
```

请注意，`x / 2`不等价于`x >> 1`。如果我们试图证明它，Z3 将产生一个反例。

```
x = BitVec('x', 32)
prove(x / 2 == x >> 1)
>> counterexample
>> [x = 4294967295] 
```

[Z3 Python 教程](https://github.com/ericpony/z3py-tutorial)包含一个更复杂的示例：它表明`x != 0 and x & (x - 1) == 0`当且仅当`x`是 2 的幂时这是正确的。

一般来说，任何可满足性检查器都可以用来证明两个公式是等价的。为了证明两个公式`F`和`G`使用 Z3 是等价的，我们证明这`F != G`是不可满足的（即，没有任何赋值/解释会`F`与 不同`G`）。这就是该`prove`命令在 Z3 Python API 中的实现方式。下面是基于 Solver API 的脚本：

```
s = Solver()
s.add(Not(F == G))
r = s.check()
if r == unsat:
    print("proved")
else:
    print("counterexample")
    print(s.model()) 
```

# java - Java ThreadPoolExecutor - 关闭特定线程？

> ID：13930018
> 
> 赞同：0
> 
> 时间：2012-12-18T09:37:11.770
> 
> 标签：java, multithreading

我正在编写我的系统编程课程作业（使用线程）。

我的活动类实现了可运行的，我有另一个带有执行器的类，它使用以下命令执行可运行的：`ThreadPoolExecutor e = (ThreadPoolExecutor) Executors.newFixedThreadPool(number);`

我在那个线程池中有几个线程同时运行。我的问题如下：我可以选择知道一个线程什么时候完成了它需要做什么的工作，我怎样才能关闭这个线程，并且 - 只 - 这个线程，而不是整个执行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:39:48.980

`ThreadPoolExecutor`负责管理其线程，您无法访问它们，除非通过一些可能会破坏执行程序的丑陋黑客。您应该使用 API 提供的配置选项，例如`setKeepAliveTime`接受`keepAliveTime`. 将此设置为零，您将自动获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:46:24.273

如果我理解正确，你想要的是[`newCachedThreadPool`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29)而不是`newFixedThreadPool`

来自 Java 文档

> 创建一个线程池，根据需要创建新线程，但在可用时将重用以前构造的线程。这些池通常会提高执行许多短期异步任务的程序的性能。如果可用，对执行的调用将重用以前构造的线程。如果没有可用的现有线程，将创建一个新线程并将其添加到池中。**六十秒内未使用的线程将被终止并从缓存中删除。因此，保持空闲足够长时间的池不会消耗任何资源。**请注意，可以使用 ThreadPoolExecutor 构造函数创建具有相似属性但细节不同（例如超时参数）的池。

# sql - 在 SQL 中计算下一个工作日期

> ID：13930022
> 
> 赞同：0
> 
> 时间：2012-12-18T09:37:20.207
> 
> 标签：sql

我正在为 OTRS 票证编写 SSRS 报告，我的挑战如下。我必须确定票证的 SLA 是否与票证打开的日期相同。我的工作周是周一到周五，节假日除外。一天的工作时间为 09:00 至 17:00（共 8 小时）。一些优先票有 2 小时的解决时间，一些非必要票有 5 天的解决时间。如果优先票在周五16:55开出，下周一为节假日，则解决日期应为周二10:55（即该票SLA应落在下一个工作日的工作时间内）

我的 SLA 时间以分钟为单位存储在 ticket_SLA 表中，即（2 小时 = 120 分钟或 5 天 = 2400 分钟）。5天的计算如下：

2400分钟除以60分钟得到小时，除以8得到天数（一个工作日有8小时）

2400/60/8 = 5 天。

确定这一点后，我必须进一步确定票证是否在 SLA 范围内。如果不是，我会在报告上以不同的颜色显示票证。

我应该处理的可用字段如下：

**票务表：**

```
Create_time datetime, ticket_sla_id int, tn long, 
```

**服务等级表：**

```
sla_Id int, solution_time int (number of minutes) 
```

**假期表：**

```
holiday_name varchar, holiday_date, holiday_iD 
```

任何关于我如何解决这个问题的建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:13:40.140

对于 TSQL，请查看我在[SQLFiddle](http://www.sqlfiddle.com/#!3/696a3/2/0)上的解决方案。如果您使用另一个 DBMS，您应该能够将 sql 转换为您的语法。

提供的解决方案将返回每张票的截止日期。在第一个 CTE 中，您必须定义最小开始日期和最大结束日期。希望有帮助！

请注意 datefirst 的设置（请参阅[此](http://msdn.microsoft.com/de-de/library/ms174420.aspx)）

**@updated** : 修改后的小提琴演示

# java - 将 JDBC 与 SQL Server 连接

> ID：13930023
> 
> 赞同：2
> 
> 时间：2012-12-18T09:37:20.493
> 
> 标签：java, sql, sql-server, jdbc

我正在尝试将我的 JAVA 代码连接到我在本地拥有的 SQL Server。这就是我想要做的：

```
 public static void main(String[] args) throws ClassNotFoundException, SQLException, InvalidFormatException, IOException  {

         Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");    
         con = DriverManager.getConnection("jdbc:sqlserver://localhost" + "databaseName=talisman" + "user=karim" + "password=123"); 

//rest of the code
}} 
```

我得到了这个例外：

```
 Dec 18, 2012 11:29:40 AM com.microsoft.sqlserver.jdbc.SQLServerConnection <init>
SEVERE: Java Runtime Environment (JRE) version 1.6 is not supported by this driver. Use the sqljdbc4.jar class library, which provides support for JDBC 4.0.
Exception in thread "main" java.lang.UnsupportedOperationException: Java Runtime Environment (JRE) version 1.6 is not supported by this driver. Use the sqljdbc4.jar class library, which provides support for JDBC 4.0.
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.<init>(SQLServerConnection.java:304)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1011)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at cct.karim.karim.main(karim.java:62) 
```

并且我很困......我会很感激你的帮助，但请在你的答案中具体

**更新：**

我正在使用 eclipse，我下载了 jbdc4 。你能告诉我如何将它包含在eclipse中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:26:35.933

您也可以尝试以下面提到的方式将 JAVA 代码本地连接到 SQL Server..

你需要有 Microsoft SQL Server JDBC Driver SQL JDBC Authentication 文件

验证后你 下载验证文件后，将此文件复制到窗口的 system32 文件夹。现在为 SQL Server JDBC 驱动程序（jar 文件）设置类路径。现在假设你有一个数据库 mssmit ，用户名和密码是 sumit。您也可以使用寡妇身份验证连接到 SQL Server，如果您想使用 Windows 身份验证连接，可以使用以下代码。

```
Connection con=DriverManager.getConnection("jdbc:sqlserver://localhost;databaseName=mssumit;integratedSecurity=true");
Connection conn =DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=mssumit;user=sumit;password=sumit;"); 
```

在这种情况下，有时您可能无法使用用户名连接，请检查您能够使用 SQL Server 身份验证连接的数据库连接属性。使用以下代码实例化 SQL Server 驱动程序类

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
Connection conn=DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=mssumit;user=sumit;password=sumit;"); 
```

有关详细说明、过程和源代码，您可以查看此链接[http://compilr.org/java/jdbc-connection-with-ms-sql-server-in-java/](http://compilr.org/java/jdbc-connection-with-ms-sql-server-in-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:43:25.230

试试[jtds](http://jtds.sourceforge.net/)驱动程序，这是 MS SQL 的替代驱动程序。有关如何正确使用驱动程序的更多信息，请阅读[入门指南](http://jtds.sourceforge.net/faq.html#driverImplementation)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:42:21.453

您的运行时环境使用 jre 1.6，并且您使用的 sql jar 与 java 6 不兼容。改为包含 sqljdbc4.jar。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:41:57.903

阅读异常消息，您会发现您正在使用不支持 Java 1.6 的旧 JDBC 驱动程序。

[您应该从这里](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)获得使用 JDBC 4.0 ( `sqljdbc4.jar`)的新版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T15:20:03.577

希望这个帖子对您有所帮助 -[如何使用 JDBC 连接到 SQL Server 2008 数据库？](https://stackoverflow.com/questions/2451892/how-do-i-connect-to-a-sql-server-2008-database-in-java-with-jdbc).

本质上，有两种使用 JDBC 的方法——使用 Windows 身份验证和 SQL 身份验证。SQL 身份验证可能是最简单的。你可以做的是这样的：

```
String userName = "username";
String password = "password";

String url = "jdbc:sqlserver://MYPC\\SQLEXPRESS;databaseName=MYDB";

Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
Connection conn = DriverManager.getConnection(url, userName, password); 
```

将 sqljdbc4.jar 添加到构建路径后。

对于 Window 身份验证，您可以执行以下操作：

```
String url = "jdbc:sqlserver://MYPC\\SQLEXPRESS;databaseName=MYDB;integratedSecurity=true";
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
Connection conn = DriverManager.getConnection(url); 
```

然后将 sqljdbc_auth.dll 的路径添加为 VM 参数（在构建路径中仍然需要 sqljdbc4.jar）。

如果您需要更多详细信息，请在[此处](http://thusithamabotuwana.wordpress.com/2012/07/19/connecting-to-sql-server-from-java/)查看简短的分步指南，展示如何使用 jTDS 从 Java 连接到 SQL Server 和使用 eclipse 使用 JDBC。希望能帮助到你！

# odata - 剑道网格过滤器 + odata + Int64 字段

> ID：13930024
> 
> 赞同：2
> 
> 时间：2012-12-18T09:37:21.250
> 
> 标签：odata, kendo-ui

我正在尝试根据 Kendo Grid 中的 Int64 字段过滤数据，它使用 Odata 作为服务。根据 Odata 规范，Int64 字段要求过滤器值在末尾有一个额外的“L”，例如`666423361622L`. 所以，我将我的剑道网格过滤器设置为：

```
{{ field: \"MyField\", operator: \"eq\", value: 666423361622L }} 
```

，但这会引发错误：`SyntaxError: identifier starts immediately after numeric literal` ，显示在它不喜欢的 666423361622L 处。有没有办法可以格式化它，所以它会起作用？如果我使用没有 L (666423361622) 的值，它会在我的 Odata 服务中的 PraseInt 函数上引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-22T11:31:04.673

为了解决这个问题，我截获了 ajax 请求并修改了发送到 ODATA 服务的数据。只需手动附加“L”。像这样：

```
$(document).ajaxSend(function (e, jqxhr, settings) {
    var re = /(FIELDNAMEFORINT64\+(eq|ge|le)\+(\d)*)/g;
    var found = settings.url.match(re);

    if (found) {                
       for (var i = 0; i < found.length; i++) {
           settings.url = settings.url.replace(found[i], found[i] + "L");
       }
    }            
}); 
```

# javascript - iframe 强制关闭 android phonegap 中的应用程序

> ID：13930027
> 
> 赞同：0
> 
> 时间：2012-12-18T09:37:26.640
> 
> 标签：javascript, android, cordova

我已经使用 iframe 在我的 android phonegap 应用程序中打开网页。当 iframe 打开时，如果网络连接突然失败，则会显示错误为“无法建立安全连接（http://www.google.com） ）。和应用程序强制关闭。

这是我的代码：

```
var iframe = document.createElement("IFRAME");
iframe.setAttribute("src", "http://www.google.com");
$("#IframeDiv").append(iframe); 
```

请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:45:00.493

我无法解决应用程序突然退出的问题，但如果您`online variable (shown below)`在打开 iframe 之前参考 ，您可以使机会非常低。

```
 var online = false;

  var fnRegisterHandler = function(evtName, fn) {
    document.addEventListener(evtName, fn, false);
  };

  fnRegisterHandler("online", function(){ online = true; });
  fnRegisterHandler("offline", function() { online = false; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:46:34.480

通常，您需要配置应用程序的 PhoneGap.plist 文件，并将您要在 iframe 中使用的域添加到白名单：

```
OpenAllWhitelistURLsInWebView: YES
ExternalHosts
     *.yourdomain.com 
```

# java - 正则表达式：将语句与空字符串组合

> ID：13930029
> 
> 赞同：1
> 
> 时间：2012-12-18T09:37:28.390
> 
> 标签：java, regex, whitespace, string

我正在尝试做的事情：这个正则表达式应该强制第一个字符是一个字母，在那个字符之后，可以插入字母、空格或“-”。

第一部分工作得很好：`(^[A-Za-z][A-Za-z -]*$)`

然后我也想允许一个空字符串：`(^$)`

然而，当我将两者结合起来时，用户可以用空格开始字符串。我在这里做错了什么？谢谢！

`(^[A-Za-z][A-Za-z -]*$)||(^$)`

（我不知道是否需要此信息，但我在 Java 中使用此信息，作为从 InputVerifier 扩展的类的一部分，以在 JTextFields 上设置验证器）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:40:36.590

这应该适合您的需求：

```
^([A-Za-z][A-Za-z -]*|)$ 
```

in正`OR`则表达式只需要一个`|`，而经典的 JAVA one（在其他语言中）需要两个`||`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:42:30.647

以下应该做到这一点：

```
^([A-Za-z][A-Za-z -]*)?$ 
```

使`?`括号内的表达式可选。

您的原始正则表达式不太正确的原因是`||`. 正则表达式“或”运算符是单个`|`. 现在考虑`x||y`。这匹配`x` *或*一个空字符串*或* `y`。由于空字符串没有以任何方式锚定，因此将在*任何*输入[`Pattern.find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)中找到它的至少一个实例。

# windows-phone-7 - 适用于 Windows Phone 7/8 的 NLog

> ID：13930033
> 
> 赞同：1
> 
> 时间：2012-12-18T09:37:37.903
> 
> 标签：windows-phone-7, logging, windows-phone-8, nlog

我正在寻找一种轻松登录 Windows Phone 应用程序的方法，Nlog 是我试图让它工作但不知道如何工作的方法。我找不到 Windows Phone 的指南。如果有人知道如何设置 NLog 或任何其他工具，帮助处理日志的库，请建议

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:19:38.420

[按照教程](http://nlog-project.org/2011/01/09/nlog-for-windows-phone-7.html)操作并确保在最后两个步骤中使用手动方法：

*   如果您愿意，您可以手动添加对“C:\Program Files (x86)\NLog\Silverlight for Windows Phone 7\NLog.dll”的引用并手动创建 NLog.config
*   最后一件事是将 NLog.config 的 Build Action 更改为“Content”（这可以确保该文件将包含在 XAP 包中）。

# php - 为什么这个正则表达式匹配不正确的模式？

> ID：13930037
> 
> 赞同：2
> 
> 时间：2012-12-18T09:37:57.057
> 
> 标签：php, regex, preg-match

我在 PHP 中有一堆正则表达式，第一个子句是：

```
if (preg_match('#^/index#i', $_SERVER['REQUEST_URI']) || preg_match('#^/(ACT)|(NSW)|(NT)|(QLD)|(SA)|(TAS)|(VIC)|(WA)/$#i', $_SERVER['REQUEST_URI'])){ 
```

现在，say`$_SERVER['REQUEST_URI']`等于`/VIC/events/`; 出于某种原因，这与第一个子句相匹配。为什么？如果它等于`/VIC/`我添加的行尾字符，那不应该只匹配它`$`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:40:54.530

你需要在你的交替周围加上括号：

```
'#^/(ACT|NSW|NT|QLD|SA|TAS|VIC|WA)/$#i' 
```

没有括号`^a|b|c$`意味着`(^a)|b|(c$)`这不是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:44:14.043

问题是`/$`正在与最后一个选项分组。目前，如果在字符串中找到与以下任何正则表达式的匹配项，则您的第二个条件将是真实的：

1.  `^/(ACT)`
2.  `NSW`
3.  `NT`
4.  `QLD`
5.  `SA`
6.  `TAS`
7.  `VIC`（这个匹配）
8.  `(WA)/$`

您提供的示例字符串*实际上*包含与 #6 - 的匹配项`VIC`，因此整个条件的计算结果为真。正如 Mark 所指出的，您需要使用括号对中心值进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:04:35.377

您应该使用括号来标记您的组，如下所示：

```
'#^/((ACT)|(NSW)|(NT)|(QLD)|(SA)|(TAS)|(VIC)|(WA))/$#i',$_SERVER['REQUEST_URI'])) 
```

这匹配以 ACT、NSW、NT、QLD、SA、TAS、VIC 和 WA 开头和结尾的任何内容。

正如你的匹配：

```
'#^/(ACT)|(NSW)|(NT)|(QLD)|(SA)|(TAS)|(VIC)|(WA))/$#i',$_SERVER['REQUEST_URI']) 
```

以 ACT 或 NSW、NT、QLD、SA、TAS、VIC 开头或以 WA 结尾。

# c# - WPF 打印/xps 问题

> ID：13930045
> 
> 赞同：3
> 
> 时间：2012-12-18T09:38:45.543
> 
> 标签：c#, wpf, printing, xps

我编写了以下代码块，可以在发送到物理打印机时完美打印我的 ListBox，但是当尝试将其发送到 XPS 打印机驱动程序或使用 XpsDocumentWriter 类时（我假设它们在后台使用相同的代码）我收到以下异常：

System.ArgumentException 未被用户代码处理 Message=Width 并且 Height 必须为非负数。Source=ReachFramework StackTrace：在 System.Windows.Xps.Serialization.VisualSerializer.WriteTileBrush（字符串元素，TileBrush 画笔，矩形边界）

异常显然指向一个没有正确宽度/高度的项目，但是我在将代码发送到不同的打印机（物理和 XPS 驱动程序）时调试了代码，但我无法找到任何差异。

下面是我如何创建要发送到打印机的视觉效果：

```
private ScrollViewer GeneratePrintableView()
    {
        ScrollViewer scrollView = new ScrollViewer();

        Grid grid = new Grid { Background = Brushes.White, Width = this.myListBox.ActualWidth, Height = this.myListBox.ActualHeight };

        grid.RowDefinitions.Add(new RowDefinition());
        grid.RowDefinitions[0].Height = new GridLength(0, GridUnitType.Auto);
        grid.RowDefinitions.Add(new RowDefinition());
        grid.RowDefinitions[1].Height = new GridLength(0, GridUnitType.Auto);

        // Add the title and icon to the top
        VisualBrush titleClone = new VisualBrush(this.TitleBar);
        var titleRectangle = new Rectangle { Fill = titleClone, Width = this.TitleBar.ActualWidth, Height = this.TitleBar.ActualHeight };
        grid.Children.Add(titleRectangle);
        Grid.SetRow(titleRectangle, 0);

        this.myListBox.Width = this.myListBox.ActualWidth;
        this.myListBox.Height = this.myListBox.ActualHeight;

        VisualBrush clone = new VisualBrush(this.myListBox) { Stretch = Stretch.None, AutoLayoutContent = true };
        var rectangle = new Rectangle { Fill = clone, Width = this.myListBox.ActualWidth, Height = this.myListBox.ActualHeight };
        Border border = new Border { Background = Brushes.White, Width = this.myListBox.ActualWidth, Height = this.myListBox.ActualHeight };
        border.Child = rectangle;
        grid.Children.Add(border);
        Grid.SetRow(border, 1);

        scrollView.Width = this.myListBox.ActualWidth;
        scrollView.Height = this.myListBox.ActualHeight;
        scrollView.Content = grid;
        scrollView.VerticalScrollBarVisibility = ScrollBarVisibility.Hidden;

        return scrollView;
    } 
```

这是我的 DocumentPaginator 实现中的 GetPage 覆盖：

```
public override DocumentPage GetPage(int pageNumber)
    {
        Page page = new Page();
        double z = 0.0;

        this.grid = new Grid();
        this.grid.RowDefinitions.Add(new RowDefinition());
        this.grid.RowDefinitions[0].Height = new GridLength(0, GridUnitType.Auto);

        this.grid.Children.Add(this.printViewer);
        Grid.SetRow(this.printViewer, 0);

        //Adjusting the vertical scroll offset depending on the page number
        if (pageNumber + 1 == 1) //if First Page
        {
            this.printViewer.ScrollToVerticalOffset(0);
            this.printViewer.UpdateLayout();
        }
        else if (pageNumber + 1 == _verticalPageCount) //if Last Page
        {
            if (this.printViewer.ScrollableHeight == 0) //If printing only single page and the contents fits only on one page
            {
                this.printViewer.ScrollToVerticalOffset(0);
                this.printViewer.UpdateLayout();

            }
            else if (this.printViewer.ScrollableHeight <= this.printViewer.Height) //If scrollconentheight is less or equal than scrollheight
            {
                this.printViewer.Height = this.printViewer.ScrollableHeight;
                this.printViewer.ScrollToEnd();
                this.printViewer.UpdateLayout();
            }
            else //if the scrollcontentheight is greater than scrollheight then set the scrollviewer height to be the remainder between scrollcontentheight and scrollheight
            {
                this.printViewer.Height = (this.printViewer.ScrollableHeight % this.printViewer.Height) + 5;
                this.printViewer.ScrollToEnd();
                this.printViewer.UpdateLayout();
            }
        }
        else //Other Pages
        {
            z = z + this.printViewer.Height;
            this.printViewer.ScrollToVerticalOffset(z);
            this.printViewer.UpdateLayout();
        }

        page.Content = this.grid; //put the grid into the page
        page.Arrange(new Rect(this.originalMargin.Left, this.originalMargin.Top, this.ContentSize.Width, this.ContentSize.Height));
        page.UpdateLayout();

        return new DocumentPage(page);
    } 
```

有趣的是，如果我将矩形的填充更改为画笔而不是克隆，那么我不会收到异常并且输出的文件是正确的大小。

我花了一天多的时间试图调试为什么这不起作用，我希望那里有人看到类似的问题或者能够指出我犯的任何错误。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-25T10:39:42.850

我不得不放弃用 VisualBrush 寻找解决方案。如果画笔的 Visual 中有一个 GroupBox，我永远无法让它生成 XPS 文件。它总是失败

`System.ArgumentException was unhandled by user code Message=Width and Height must be non-negative. Source=ReachFramework StackTrace: at System.Windows.Xps.Serialization.VisualSerializer.WriteTileBrush(String element, TileBrush brush, Rect bounds)`

解决方法是克隆应该进入 VisualBrush 的内容（[是否有一种简单/内置的方法来获取 XAML 元素的精确副本（克隆）？](https://stackoverflow.com/questions/1968625/is-there-an-easy-built-in-way-to-get-an-exact-copy-clone-of-a-xaml-element)）并直接在 Grid 而不是 VisualBrush 中使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:17:30.410

创建 VisualBrush 时是否检查了 myListBox 的 ActualWidth 和 ActualHeight 的值？我不知道 myListBox 是从哪里来的，但是如果在您生成 xps 文档时它没有呈现，您可能会遇到问题。您可以尝试[手动强制控件呈现](https://stackoverflow.com/questions/12764554/visual-brush-using-control-which-isnt-rendered)并查看它是否有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-27T14:19:53.223

我无法解决这个问题，但是使用这个链接[Paginated printing of WPF visuals](http://undude.blogspot.co.uk/2011/02/paginated-printing-of-wpf-visuals.html)我能够找到一个合适的解决方案来允许在我的 WPF 应用程序中打印复杂的视觉效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-21T09:24:12.703

现在是 2016 年了，还没有修复。问题是使用`TileBrush`或任何后代类型（`VisualBrush`在您的情况下）。如果您使用绝对映射，它会起作用，它是导致问题的相对映射。自己计算最终尺寸并设置`Viewport`为这个尺寸，`ViewportUnits`到`Absolute`. 还要确保你不使用`Stretch`.

# xml - 使用兄弟排序将 XML 转换为 JSON (Schematron for JSON)

> ID：13930048
> 
> 赞同：1
> 
> 时间：2012-12-18T09:38:56.407
> 
> 标签：xml, json, xsd, schematron

我有一个信息系统，我们可以像这样在 XML 中提出查询：

```
<Query>
<Condition>
...
</Condition>
<LogicalOperator>AND</LogicalOperator>
<Condition>
...
</Condition>
<LogicalOperator>AND</LogicalOperator>
<Condition>
...
</Condition>
</Query> 
```

这个兄弟顺序很重要，并且由 schematron（条件之间的逻辑运算符）强制执行。

如何在 JSON 中表示这些数据，同时保留其语义？JSON变成了类似的东西

```
"Query": {
    "Condition": [{...},{...},{...}]  ,
    "LogicalOperator": ["AND","AND"]
} 
```

并且丢失了很多语义信息。如何在 JSON 中编码所有这些信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:23.063

```
"Query": [{...},"AND",{...},"AND",{...}] 
```

使用[混合类型收集配方](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types)使用 gson 反 序列化并使用 jaxb 序列化

# php - 使用 PHP 从 url 添加文件创建 zip

> ID：13930049
> 
> 赞同：18
> 
> 时间：2012-12-18T09:38:56.667
> 
> 标签：php, download, zip

我想知道是否可以执行以下操作，并希望有人可以帮助我。

我想创建一个“下载 zip”功能，但是当个人点击下载时，该按钮会从我的外部域中获取图像，然后将它们捆绑到一个 zip 中，然后为他们下载。

我已经检查了如何执行此操作，但找不到任何好的方法来获取图像并强制将它们放入 zip 中进行下载。

我希望有人可以提供帮助

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-18T09:53:19.180

```
# define file array
$files = array(
    'https://www.google.com/images/logo.png',
    'https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Wikipedia-logo-en-big.png/220px-Wikipedia-logo-en-big.png',
);

# create new zip object
$zip = new ZipArchive();

# create a temp file & open it
$tmp_file = tempnam('.', '');
$zip->open($tmp_file, ZipArchive::CREATE);

# loop through each file
foreach ($files as $file) {
    # download file
    $download_file = file_get_contents($file);

    #add it to the zip
    $zip->addFromString(basename($file), $download_file);
}

# close zip
$zip->close();

# send the file to the browser as a download
header('Content-disposition: attachment; filename="my file.zip"');
header('Content-type: application/zip');
readfile($tmp_file);
unlink($tmp_file); 
```

注意：此解决方案假定您已`allow_url_fopen`启用。否则，请考虑使用 cURL 下载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:46:18.937

希望我没有理解错。

[http://php.net/manual/en/book.zip.php](http://php.net/manual/en/book.zip.php)

我还没有尝试过，但这似乎是您正在寻找的。

```
<?php
$zip = new ZipArchive;

if ($zip->open('my_archive.zip') === TRUE) {
    $zip->addFile($url, basename($url));
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
}
?> 
```

# html - 水印 CSS 在打印中不起作用

> ID：13930062
> 
> 赞同：2
> 
> 时间：2012-12-18T09:39:55.187
> 
> 标签：html, css

我有以下CSS，

```
#duplicateCopy {
    -webkit-transform:rotate(-20deg);
    -moz-transform:rotate(-20deg);
    -o-transform:rotate(-20deg);
    transform:rotate(-20deg);
    color:#CCC;
    font-weight:bold;
    letter-spacing:5px;
    position:absolute; 
    z-index:1000; 
    top:35%;
    left:15%;   
    opacity:0.2; 
    filter:alpha(opacity=50);
} 
```

以及我的html页面中的以下div

```
<div id="duplicateCopy">
<p style="font-size:70px">Duplicate Copy</p>
</div> 
```

上面的css位用于在html页面中显示水印。水印在浏览器窗口中工作正常。但是在打印出来的时候，水印文本是不可见的。如何使水印文本可见以供打印？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:46:19.500

尝试使用`media="print"`这个指定的 CSS 或者只是`media='all'`将这个 CSS 写在一个单独的文件中，这样它也会对打印模式生效。还要确保您的浏览器支持 CSS3。例如：

```
<link rel="stylesheet" type="text/css" media="all" src="css/style.css" /> 
```

或者，如果您更喜欢单独的打印样式，只需使用：

```
<link rel="stylesheet" type="text/css" media="print" src="css/print.css" /> 
```

并将这些 CSS 样式写入 print.css 文件。

# bash - 无法`source` shc 编译的脚本

> ID：13930065
> 
> 赞同：3
> 
> 时间：2012-12-18T09:39:59.490
> 
> 标签：bash, binary, include

有没有办法`source`（包括）编译的脚本？

我使用[shc](http://www.datsi.fi.upm.es/~frosal/)编译所有脚本，当我从命令行运行它们时，它们可以正常启动。但是当脚本必须包含其他两个脚本（`variables.sh.x`和`functions.sh.x`）时，它会崩溃并返回错误，不能包含二进制文件。

有没有办法做到这一点？

包括一段代码：

```
source $(dirname $0)/variables.sh.x
source $(dirname $0)/functions.sh.x 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:53:54.437

[shc](http://www.datsi.fi.upm.es/~frosal/)实际上并不编译脚本。它只是通过在 C 程序中加密和嵌入它们来混淆它们，因此它不能提高性能。实际的 shell 仍然解释和执行代码，并且是脚本运行所必需的。

如果您绝对必须使用此工具来混淆您的代码，则必须将所有内容合并到一个文件中。

# javascript - 尝试仅在源为 jpg 时加载函数

> ID：13930068
> 
> 赞同：0
> 
> 时间：2012-12-18T09:40:05.570
> 
> 标签：javascript

作为一个练习，我试图在 Javascript 中制作一个 hoverzoom 脚本，而不使用 jQuery。该脚本将`<a>`页面上的所有链接放在一个数组中，然后搜索`href`扩展名`jpg`并对其应用 hoverzoom 函数

我非常接近让它工作。该函数适用于`<a>`文件名以 jpg 结尾的情况，但当它以不同的结尾时，代码会中断。这是有问题的代码：

```
for (var i = 0; i < aLinks.length; i++) {
    aExtensions[i] = aLinks[i].href.split('.').pop();
    if (aExtensions[i].toLowerCase() == 'jpg') {
        aImages.push(aLinks[i]);
    }
    aImages[i].onmouseover = function() {
        hoverZoom(this);
    }
    aImages[i].onmouseout = function() {
        refresh(this);
    }
} 
```

完整的脚本和现场版本在这里：http: [//james.is.agoodman.com.au/git/js_hoverZoom/](http://james.is.agoodman.com.au/git/js_hoverZoom/)

正如您在现场演示中看到的那样，它适用于两个图像链接，在第三个非图像链接上中断，然后随后的图像链接也不起作用。

编辑：抱歉，忘记指定一个问题。如何将脚本更改为仅在源扩展名匹配 .jpg 时才起作用，而在扩展名不匹配时不执行任何操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:47:07.007

您需要将事件绑定移动到`if`语句中：

```
for (var i = 0; i < aLinks.length; i++) {
    aExtensions[i] = aLinks[i].href.split('.').pop();
    if (aExtensions[i].toLowerCase() == 'jpg') {
        aLinks[i].onmouseover = function() {
            hoverZoom(this);
        };
        aLinks[i].onmouseout = function() {
            refresh(this);
        };
        aImages.push(aLinks[i]);
    }
} 
```

You aren't *always* pushing an item to the `aImages` array, so `aImages[i]` won't *always* be something. Moving the event bindings into the `if` statement and rearranging guarantees that the extension is "jpg", and therefore binds an event to an existing item, then pushes it into `aImages`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:47:02.603

您的问题是您索引循环的方式：您应该使用单独的循环来创建 aImages 数组，然后循环遍历它：这样的事情应该可以工作：

```
for (var i = 0; i < aLinks.length; i++) {
    aExtensions[i] = aLinks[i].href.split('.').pop();
    if (aExtensions[i].toLowerCase() == 'jpg') {
        aImages.push(aLinks[i]);
    }
}

for (var i = 0; i < aImages.length; i++) {
    aImages[i].onmouseover = function() {
        hoverZoom(this);
    }
    aImages[i].onmouseout = function() {
        refresh(this);
    }
} 
```

否则，非图像链接会使您的索引不同步

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:46:24.430

当函数遇到非 jpg 文件时，它将跳过 if 块，但会尝试在 aImages 数组中找到该链接。这将破坏代码。

您应该编写一个不同的 for 循环，或者更好的方法是将事件绑定到 if 块中。

# nginx - 带有tomcat的nginx不工作

> ID：13930069
> 
> 赞同：1
> 
> 时间：2012-12-18T09:40:08.883
> 
> 标签：nginx, tomcat7

nginx 没有调用我的 tomcat 应用程序。

Tomcat App 在以下位置运行良好：`http://localhost:8080/web/`

Nginx 网址：`http://localhost/web`

nginx配置：

```
location /web {
     proxy_pass         http://localhost:8080/web;
     proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;            
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:39:41.160

我认为它会是这样的：

```
location /web {
     proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;            
     proxy_pass         http://localhost:8080;
} 
```

# asp.net - 有时怀疑代码运行两次或根本不运行，间歇性问题

> ID：13930071
> 
> 赞同：0
> 
> 时间：2012-12-18T09:40:21.097
> 
> 标签：asp.net, vb.net

下面的代码让我有些头疼。它可能是两年前写的，从那以后一直在慢慢消失，但我们注意到有时插入查询会运行两次，有时根本不运行。该代码基本上从网页（aspx）标签中获取整数和十进制值，并将它们插入到主表中。

最近的问题似乎受到系统上用户数量的影响。当只有一个人使用它时，似乎没有问题，但有多个用户时，问题开始出现。我使用的是会话变量而不是标签，但作为消除过程，我停止使用这些变量。

如果有人可以帮助或给我一些建议，那就太好了，非常感谢。

```
Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSubmit.Click

    'local
    Dim subidString As String = "SELECT [Submission_ID], [Week Ending] FROM tbl_Weekly_Expenses WHERE [Submission_ID] = @SubID AND [Week Ending] = @WeekEnding AND [SentToPayroll] IS NULL"

    'local
    Dim mtdString As String = "SELECT SUM([Mileage Covered]) AS SumOfMileageCovered FROM tbl_Weekly_Expenses WHERE [Gabem Employee Reference] = @NovaRef"

    'remote
    Dim vehicleString As String = "SELECT [Vehicle] FROM tblExpensesMileage WHERE [SubID] = @SubID"

    'local
    Dim insertString As String = "INSERT INTO tbl_Weekly_Expenses ([Week Ending], [Date Expenses Processed], [Expenses_From], [Expenses_To], [Date Expenses received], [Gabem Employee Reference], [Identifying Number], [Submission_ID], [Car], [Motorcycle], [Pushbike], [Mileage Covered], [Mileage Amount Claimed], [Accommodation], [Meal Allowance], [Daily Allowance], [Tools/Clothing], [Details_Of_Tools], [Travel Amount], [Telephone], [Professional Fees], FuelVAT, MAVAT, TAVAT, AVAT, DAVAT, TCVAT, TelVAT, PfVAT, processedby) " & _
                                 "VALUES (@WeekEnding, @DateProcessed, @ExpensesFrom, @ExpensesTo, @DateReceived, @NovaRef, @IdentifyingNumber, @SubID, @Car, @Motorcycle, @Pushbike, @MileageCovered, @MileageAmountClaimed, @Accommodation, @Meals, @DailyAllowance, @ToolsClothing, @ToolsDetails, @Travel, @TelephoneCalls, @ProfessionalFees, @FuelVAT, @MAVAT, @TAVAT, @AVAT, @DAVAT, @TCVAT, @TelVAT, @PfVAT, @processedby)"

    'remote
    Dim updateMileage As String = "UPDATE tblExpensesMileage SET [Status] = 'Processed' WHERE [MileageID] = @id"
    Dim updateAccommodation As String = "UPDATE tblExpensesAccommodation SET [Status] = 'Processed' WHERE [AccommodationID] = @id"
    Dim updateMeals As String = "UPDATE tblExpensesMeals SET [Status] = 'Processed' WHERE [MealsID] = @id"
    Dim updateLaundry As String = "UPDATE tblExpensesLaundry SET [Status] = 'Processed' WHERE [LaundryID] = @id"
    Dim updateDailyAllowance As String = "UPDATE tblExpensesDailyAllowance SET [Status] = 'Processed' WHERE [DailyAllowanceID] = @id"
    Dim updateTravel As String = "UPDATE tblExpensesTravel SET [Status] = 'Processed' WHERE [TravelID] = @id"
    Dim updateTools As String = "UPDATE tblExpensesTools SET [Status] = 'Processed' WHERE [ToolsID] = @id"
    Dim updateTelephoneCalls As String = "UPDATE tblExpensesTelephoneCalls SET [Status] = 'Processed' WHERE [TelephoneCallsID] = @id"
    Dim updateProfessionalFees As String = "UPDATE tblExpensesProfessionalFees SET [Status] = 'Processed' WHERE [ProfessionalFeesID] = @id"

    Dim dbconnLocal As String = ConfigurationManager.ConnectionStrings("connection_nbsas2").ConnectionString
    Dim dbconnRemote As String = ConfigurationManager.ConnectionStrings("connection_nbsa_web").ConnectionString

    If txtWEDate.Text = String.Empty Then
        Exit Sub
    End If

    Using myConnectionLocal As New SqlConnection(dbconnLocal)
        myConnectionLocal.Open()

        'VEHICLE TYPE AND PPM STARTS
        Dim Car As Integer = 0
        Dim Motorcycle As Integer = 0
        Dim Pushbike As Integer = 0
        Dim ppm As Decimal
        Using myConnectionRemote As New SqlConnection(dbconnRemote)
            myConnectionRemote.Open()

            'Vehicle type
            Dim cmdSelectVehicle As New SqlCommand(vehicleString, myConnectionRemote)
            cmdSelectVehicle.Parameters.AddWithValue("@SubID", Session("subid"))
            Dim readerVehicle As SqlDataReader = cmdSelectVehicle.ExecuteReader()
            readerVehicle.Read()
            If readerVehicle.HasRows = True Then
                'MTD value for pence per mile (ppm)
                Dim cmdSelectMTD As New SqlCommand(mtdString, myConnectionLocal)
                cmdSelectMTD.Parameters.AddWithValue("@NovaRef", Session("novaref"))
                Dim readerMTD As SqlDataReader = cmdSelectMTD.ExecuteReader()
                readerMTD.Read()
                If IsDBNull(readerMTD.Item(0)) = True Then
                    If readerVehicle.Item(0) = "Car" Then
                        ppm = 0.45
                        Car = "1"
                    ElseIf readerVehicle.Item(0) = "Motorcycle" Then
                        ppm = 0.24
                        Motorcycle = "1"
                    Else
                        ppm = 0.2
                        Pushbike = "1"
                    End If
                Else
                    If readerVehicle.Item(0) = "Motorcycle" Then
                        ppm = 0.24
                        Motorcycle = "1"
                    ElseIf readerVehicle.Item(0) = "Car" And readerMTD.Item(0) < 10000 Then
                        ppm = 0.45
                        Car = "1"
                    ElseIf readerVehicle.Item(0) = "Car" And readerMTD.Item(0) > 10000 Then
                        ppm = 0.25
                        Car = "1"
                    Else
                        ppm = 0.2
                        Pushbike = "1"
                    End If
                End If
                readerMTD.Close()
            End If
            readerVehicle.Close()
            myConnectionRemote.Close()
        End Using
        'VEHICLE TYPE AND PPM ENDS

        'insert parameters etc
        Dim cmdInsertWE As New SqlCommand(insertString, myConnectionLocal)
        cmdInsertWE.Parameters.AddWithValue("@WeekEnding", CType(txtWEDate.Text, DateTime))
        cmdInsertWE.Parameters.AddWithValue("@DateProcessed", Now())
        cmdInsertWE.Parameters.AddWithValue("@ExpensesFrom", CType(lblMinDate.Text, DateTime))
        cmdInsertWE.Parameters.AddWithValue("@ExpensesTo", CType(lblMaxDate.Text, DateTime))
        cmdInsertWE.Parameters.AddWithValue("@DateReceived", CType(Session("daterec"), DateTime))
        cmdInsertWE.Parameters.AddWithValue("@NovaRef", Session("novaref"))
        cmdInsertWE.Parameters.AddWithValue("@IdentifyingNumber", "1")
        cmdInsertWE.Parameters.AddWithValue("@SubID", Session("subid"))
        cmdInsertWE.Parameters.AddWithValue("@Car", Car)
        cmdInsertWE.Parameters.AddWithValue("@Motorcycle", Motorcycle)
        cmdInsertWE.Parameters.AddWithValue("@Pushbike", Pushbike)
        cmdInsertWE.Parameters.AddWithValue("@MileageCovered", CType(lblMileageNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@MileageAmountClaimed", CType(lblMileageNumber.Text, Decimal) * ppm)
        cmdInsertWE.Parameters.AddWithValue("@Accommodation", CType(lblAccommodationNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@Meals", CType(lblMealsNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@DailyAllowance", CType(lblDailyAllowanceNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@ToolsClothing", CType(lblToolsNumber.Text, Decimal) + CType(lblLaundryNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@ToolsDetails", txtToolsDetails.Text)
        cmdInsertWE.Parameters.AddWithValue("@Travel", CType(lblTravelNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@TelephoneCalls", CType(lblTelephoneCallsNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@ProfessionalFees", CType(lblProfessionalFeesNumber.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@FuelVAT", CType(txtRec_Mileage.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@MAVAT", CType(txtRec_Meals.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@TAVAT", CType(txtRec_Travel.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@AVAT", CType(txtRec_Accommodation.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@DAVAT", CType(txtRec_Daily.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@TCVAT", CType(txtRec_ToolsLaundry.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@TelVAT", CType(txtRec_Telephone.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@PfVAT", CType(txtRec_ProFees.Text, Decimal))
        cmdInsertWE.Parameters.AddWithValue("@processedby", Page.User.Identity.Name)

        cmdInsertWE.ExecuteNonQuery()
        cmdInsertWE.Dispose()

        myConnectionLocal.Close()

        'also clear totals labels
        lblMileageNumber.Text = 0
        lblAccommodationNumber.Text = 0
        lblMealsNumber.Text = 0
        lblLaundryNumber.Text = 0
        lblDailyAllowanceNumber.Text = 0
        lblTravelNumber.Text = 0
        lblToolsNumber.Text = 0
        txtToolsDetails.Text = String.Empty
        lblTelephoneCallsNumber.Text = 0
        lblProfessionalFeesNumber.Text = 0

    End Using 'myConnectionLocal ENDS

    'OPEN REMOTE CONNECTION AND UPDATE STATUS OF LIVE TABLES
    Using myConnectionRemote As New SqlConnection(dbconnRemote)
        myConnectionRemote.Open()

        'Mileage()
        updateCheckBoxes(MileageGridView, "MileageHeaderCheckBox", "MileageCheckBox", updateMileage, myConnectionRemote, lblMileageNumber)
        'Accommodation()
        updateCheckBoxes(AccommodationGridView, "AccommodationHeaderCheckBox", "AccommodationCheckBox", updateAccommodation, myConnectionRemote, lblAccommodationNumber)
        'Meals()
        updateCheckBoxes(MealsGridView, "MealsHeaderCheckBox", "MealsCheckBox", updateMeals, myConnectionRemote, lblMealsNumber)
        'Laundry()
        updateCheckBoxes(LaundryGridView, "LaundryHeaderCheckBox", "LaundryCheckBox", updateLaundry, myConnectionRemote, lblLaundryNumber)
        'Daily(Allowance)
        updateCheckBoxes(DailyAllowanceGridView, "DailyAllowanceHeaderCheckBox", "DailyAllowanceCheckBox", updateDailyAllowance, myConnectionRemote, lblDailyAllowanceNumber)
        'Travel()
        updateCheckBoxes(TravelGridView, "TravelHeaderCheckBox", "TravelCheckBox", updateTravel, myConnectionRemote, lblTravelNumber)
        'Tools()
        updateCheckBoxes(ToolsGridView, "ToolsHeaderCheckBox", "ToolsCheckBox", updateTools, myConnectionRemote, lblToolsNumber)
        'Telephone(Calls)
        updateCheckBoxes(TelephoneCallsGridView, "TelephoneCallsHeaderCheckBox", "TelephoneCallsCheckBox", updateTelephoneCalls, myConnectionRemote, lblTelephoneCallsNumber)
        'Professional(Fees)
        updateCheckBoxes(ProfessionalFeesGridView, "ProfessionalFeesHeaderCheckBox", "ProfessionalFeesCheckBox", updateProfessionalFees, myConnectionRemote, lblProfessionalFeesNumber)

        myConnectionRemote.Close()
    End Using 'myConnectionRemote ENDS

    txtWEDate.Text = String.Empty

End Sub 
```

# java - 执行作业时如何将 OracleDriver 添加到 hadoop 类路径？

> ID：13930072
> 
> 赞同：0
> 
> 时间：2012-12-18T09:40:25.200
> 
> 标签：java, hadoop, mapreduce, hdfs

我正在使用 hadoop 处理来自数据库的大量数据。我正在使用 oracle 的 jdbc 驱动程序连接到 Oracle DB 并进行处理。但是当我尝试`bin/hadoop`使用打包的 JAR 文件执行 hadoop 作业时，它显示找不到 OracleDriver 类。我该如何解决？

`$ bin/hadoop jar ~/hadoop1.jar name.hadoop.Hadoop1 ~/output`

```
 Exception in thread "main" java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.JobConf.getInputFormat(JobConf.java:575)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:1051)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:1043)
    at org.apache.hadoop.mapred.JobClient.access$700(JobClient.java:179)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:959)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:912)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:912)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:886)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1323)
    at name.shahalpk.poc.hadoop.Hadoop1.main(Hadoop1.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 20 more
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
    at org.apache.hadoop.mapred.lib.db.DBInputFormat.configure(DBInputFormat.java:271)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at org.apache.hadoop.mapred.lib.db.DBConfiguration.getConnection(DBConfiguration.java:123)
    at org.apache.hadoop.mapred.lib.db.DBInputFormat.configure(DBInputFormat.java:266)
    ... 25 more 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:57:16.470

将 ojdbc5.jar 添加到类路径中：

```
${JRE_HOME}\jre\lib\ext 
```

笔记：

```
${JRE_HOME} means JRE(Java Runtime Environment) Installed Directory; Like below
${JRE_HOME}=C:\Program Files\Java\jre6\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:57:30.407

您可以使用`-libjars`通用选项更轻松地实现此目的，它还可以将 jar 分配到集群节点：

```
$ bin/hadoop jar ~/hadoop1.jar name.hadoop.Hadoop1 -libjars ojdbc5.jar ~/output 
```

这确实假设您的主类 ( `name.hadoop.Hadoop1`) 正在使用 ToolRunner.run() 方法来启动您的作业：

```
public class Hadoop1 extends Configured implements Tool {
  public static void main(String args[]) throws Exception {
    ToolRunner.run(new Hadoop1(), args);
  }

  public int run(String args[]) {
    JobConf job = new JobConf(getConf());

    // rest of your job init code...

    RunningJob rj = JobClient.runJob(job);
    rj.waitForCompletion();
    return rj.isSuccessful() ? 0 : 1;
  }
} 
```

（手写代码，如有错别字或编译错误，请见谅）

# regex - Sed 错误：“替代模式内未转义的换行符”和“替代命令中的错误标志”

> ID：13930074
> 
> 赞同：1
> 
> 时间：2012-12-18T09:40:32.613
> 
> 标签：regex, bash, shell, sed, plist

### 问题：

我是 sed 的新手，所以当我在 shell 中执行以下代码时：

```
sed -e "/^\s<key>CHANNEL_NAME<\/key>$/{N;s/\(^\s<string>\).+\(<\/string>$\)/\1test\2}" Info.plist > test.plist 
```

Sed 给我一个错误：“sed: 1: "/^\sCHANNEL_NAME<\ ...": 未转义的换行符在替代模式中”

我的问题：“替代模式内的未转义换行符”到底是什么意思？

Info.plist 文件是这样的：

```
...
<key>CHANNEL_NAME</key>
<string>App Store</string>
... 
```

很感谢大家能回答我的问题，谢谢！

* * *

### 回答者：

谢谢@potong @dogbane @Beta！:)

因为它是一个 Cocoa plist，所以这是我的最终解决方案：

```
sed '/<key>CHANNEL_NAME<\/key>/{N;s/\(<string>\).*\(<\/string>\)/\1test\2/;}' Info.plist > test.plist 
```

### 尖端：

1.  我在解决问题的过程中遇到了两个错误。把它们放在这里：
    *   sed: 1: "/^\sCHANNEL_NAME<\ ...": 替代模式内未转义的换行符
    *   sed：1：“/CHANNEL_NAME</ke ...”：替代命令中的错误标志：'}'
2.  我在第一个代码中犯了很多错误。
    *   没有逃脱'+'
    *   应该以 2/} 结尾”
    *   实际上应该以 2/;}" 结尾（我错过了一个 ';'，所以我在提示 1 中遇到了第二个错误）
3.  用户 'n' 或 'N' 都适用于我。
4.  可能是因为在 Mac 上，'.+'（即使我逃脱了）不起作用，所以必须按照@potong 所说的那样更改它，'..*'

欢迎任何好的建议来批准代码，再次感谢以下所有人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:48:37.053

这可能对您有用（GNU sed）：

```
sed -e '/^\s*<key>CHANNEL_NAME<\/key>$/{n;s/^\(\s*<string>\).\+\(<\/string>\)$/\1test\2/}' Info.plist > test.plist 
```

注意 您应该在行首允许空格 ( `^\s*`) 并在比较替换命令的下一行开始之前打印匹配的行，即使用`n`而不是`N`.

或者：

```
sed -e '/^ *<key>CHANNEL_NAME<\/key>$/!b' -e 'n' -e 's/^\( *<string>\)..*\(<\/string>\)$/\1test\2/' Info.plist > test.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:41:09.383

既然您说您只是在学习 sed：sed 是一个出色的工具，可以在单行上进行简单替换，但对于其他任何事情，只需使用 awk。

这是一个 GNU awk 解决方案（如果你愿意，你可以把它塞进一行）：

```
$ cat file
...
foo
<key>CHANNEL_NAME</key>
<string>App Store</string>
...
$
$ awk '
   found { $0=gensub(/(<string>).*(<\/string>)/,"\\1test\\2",""); found=0 }
   /<key>CHANNEL_NAME<\/key>/ { found=1 }
   { print $0 }
' file
...
foo
<key>CHANNEL_NAME</key>
<string>test</string>
... 
```

它看起来与 sed 解决方案没有太大不同，但只需尝试修改 sed 解决方案以执行*任何*其他操作，例如在输出中添加行号：

```
$ awk '
   found { $0=gensub(/(<string>).*(<\/string>)/,"\\1test\\2",""); found=0 }
   /<key>CHANNEL_NAME<\/key>/ { found=1 }
   { print NR, $0 }
' file
1 ...
2 foo
3 <key>CHANNEL_NAME</key>
4 <string>test</string>
5 ... 
```

或将“字符串”之间的文本替换为 CHANNEL_NAME 之前的行的内容，而不是硬编码的“测试”：

```
awk '
   found { $0=gensub(/(<string>).*(<\/string>)/,"\\1" rep "\\2",""); found=0 }
   /<key>CHANNEL_NAME<\/key>/ { found=1; rep=prev }
   { print $0; prev=$0 }
' file
...
foo
<key>CHANNEL_NAME</key>
<string>foo</string>
... 
```

你会发现你需要一个完全不同的解决方案，可能涉及单个字母和标点符号的噩梦般的混合物，而使用 awk 它是一个简单的调整来增强你的起始解决方案。

# sql - SQLite 数据类型字段大小

> ID：13930077
> 
> 赞同：6
> 
> 时间：2012-12-18T09:40:41.603
> 
> 标签：sql, sqlite

SQLite 是否要求您提及字段大小或每个 DataType 是否有固定大小

```
ID INTEGER (10)

ID INTEGER 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:47:17.610

每个数据类型都有固定的大小。有关更多详细信息，请查看[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:46:38.313

SQLite 将接受来自大多数其他数据库的 SQL 转储，包括 INTEGER(10)。

[但是，在导入时，任何类型为 INT 的列都将被视为 INTEGER，并将根据实际值](http://www.sqlite.org/datatype3.html)占用 1、2、3、4、6 或 8 个字节。

# android - Eclipse 更新后无法启动

> ID：13930079
> 
> 赞同：1
> 
> 时间：2012-12-18T09:40:44.017
> 
> 标签：android, eclipse

我使用 eclipse Juno 与 android 一起工作。在我更新了一个 android 插件后，我无法再启动 eclipse。它在日志文件中给了我这个错误：

```
java.lang.RuntimeException: Application "org.eclipse.ui.ide.workbench" could not be found in the registry. The applications available are: org.eclipse.ant.core.antRunner, org.eclipse.datatools.connectivity.console.profile.StorageFileEditor, org.eclipse.equinox.app.error, org.eclipse.equinox.p2.director, org.eclipse.equinox.p2.garbagecollector.application, org.eclipse.equinox.p2.publisher.InstallPublisher, org.eclipse.equinox.p2.publisher.EclipseGenerator, org.eclipse.equinox.p2.publisher.ProductPublisher, org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher, org.eclipse.equinox.p2.reconciler.application, org.eclipse.equinox.p2.repository.repo2runnable, org.eclipse.equinox.p2.repository.metadataverifier, org.eclipse.equinox.p2.artifact.repository.mirrorApplication, org.eclipse.equinox.p2.metadata.repository.mirrorApplication, org.eclipse.equinox.p2.updatesite.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.CategoryPublisher, org.eclipse.jdt.apt.core.aptBuild, org.eclipse.pde.junit.runtime.uitestapplication, org.eclipse.pde.junit.runtime.legacytestapplication, org.eclipse.pde.junit.runtime.coretestapplication, org.eclipse.pde.junit.runtime.coretestapplicationnonmain, org.eclipse.pde.junit.runtime.nonuithreadtestapplication, org.eclipse.wst.server.preview.preview, org.eclipse.cdt.codan.core.application, org.eclipse.cdt.core.GeneratePDOM, org.eclipse.e4.ui.workbench.swt.E4Application, org.eclipse.e4.ui.workbench.swt.GenTopic, org.eclipse.emf.codegen.CodeGen, org.eclipse.emf.codegen.JMerger, org.eclipse.emf.codegen.ecore.Generator, org.eclipse.emf.importer.ecore.Ecore2GenModel, org.eclipse.emf.importer.java.Java2GenModel, org.eclipse.emf.importer.rose.Rose2GenModel, org.eclipse.help.base.infocenterApplication, org.eclipse.help.base.helpApplication, org.eclipse.help.base.indexTool, org.eclipse.jdt.core.JavaCodeFormatter, org.eclipse.jdt.core.JavaIndexer, org.eclipse.pde.build.Build, org.eclipse.wst.jsdt.core.JavaCodeFormatter.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

我怎样才能让我的日食回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:51:39.233

您的第一个 Eclipse 将 C/C++ 作为其 zip 的一部分，因为它是面向 C/C++ 开发人员的 Eclipse。这就是产品 org.eclipse.epp.package.cpp.product 所说的。您没有单独安装 C/C++ 运行时，尽管您可能已经单独安装了源插件。但是，但是您告诉它删除配置会清除该产品，现在该安装已损坏。最好的办法是删除它并再次解压缩 ZIP。

转到此[链接](https://stackoverflow.com/questions/8300648/runtimeexception-application-could-not-be-found-in-the-registry)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:17:35.757

只需转到帮助选项卡 - 检查更新并更新 android sdk 包。这也发生在我身上，我所要做的就是更新 sdk 包。如果您尝试通过 SDK 管理器安装新设备，则可能会发生这种情况。您还必须更新现有 API 的 SDK。

# java - 休眠与可连接的关系

> ID：13930084
> 
> 赞同：0
> 
> 时间：2012-12-18T09:41:07.487
> 
> 标签：java, hibernate, table-relationships

我有一个休眠问题。我有三张桌子`jobs`，`actions`和`mails`。因为`jobs`和`actions`存在多对多的关系。所以我创建了一个`Action_Jobs`包含两个表的 id 的连接表。

现在，我怎样才能建立从连接表`Action_Jobs`到我的第三个表的关系`mails`？因为从工作和操作的组合中识别出我的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:24:23.323

您不能将**Action_Jobs**表与其他表连接，因为它不是**Entity**。根据您的问题，**jobs**，**actions**和**mails**是实体。**Action_Jobs**表用于连接操作和作业表，而不是实体。因此，您应该直接将邮件表与作业和操作表连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:47:00.390

创建一个`Action_Jobs`映射`Jobs`到的新表`Action`。使用表的主键`Action_Jobs`并与表进行映射`Mails`。主键可以是自增列。

希望这可以帮助...

# windows-phone-8 - 无法在 Visual Studio 2012 的默认 Windows Phone 8 项目中调试 directx interop com

> ID：13930090
> 
> 赞同：1
> 
> 时间：2012-12-18T09:41:29.193
> 
> 标签：windows-phone-8, interop, directx

我创建了默认的 vc++ windows phone 8 directx/xaml 解决方案。它创建了两个项目文件。一个 xaml 项目和另一个本机 directx com 互操作 dll。我检查了我的项目是否处于调试模式，但我仍然无法调试/单步执行 com interop dll 代码，但可以单步执行 cs 代码。

知道如何调试directx dll吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T08:21:33.093

打开您的 XAML C# 项目属性，转到调试选项卡并在“调试器类型”部分的“UI 任务”组合框中选择“仅本机”。

出现问题的原因是 Windows Phone 没有混合模式（.NET 和 Native）调试器，因此您必须在运行应用程序之前选择要调试的代码。

# lua - 视口是愤怒的小鸟？

> ID：13930100
> 
> 赞同：0
> 
> 时间：2012-12-18T09:41:59.477
> 
> 标签：lua, coronasdk

不确定这是否是正确的名称，但我正在寻找一种在我的游戏中实现缩放的方法。

本质上，游戏应该在移动和射击阶段放大我的角色（就像蠕虫一样），但在角色射击时缩小（最好像愤怒的小鸟那样跟随射击）。

Corona/Lua 可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:33:30.643

一切都应该在一个显示组中，您可以运行转换来缩放组。就像是：

```
transition.to(gameGroup,{time=500, xScale = 2.0, yScale=2.0}) 
```

放大。您还应该研究相机以帮助您的播放器保持在屏幕中央。

# typo3 - 打字稿：无法获取字段图像说明

> ID：13930101
> 
> 赞同：1
> 
> 时间：2012-12-18T09:41:58.960
> 
> 标签：typo3, typoscript

我不知道为什么我无法获得字段图像说明，其他所有字段都有效。我想在我的灯箱中显示图片说明。该字段不是空的，所以这不是问题。

在数据库中，内容如下所示：

```
Praxis
Tulpen
Pinguine
Leuchtturm 
```

有任何想法吗？

我的代码：

```
 1 {
          10 = IMAGE
          10.file.import.current = 1
          10.file.import = uploads/pics/
          10.file.maxW = 270

          10.imageLinkWrap = 1
          10.imageLinkWrap {

            enable = 1
            typolink.parameter = TEXT
            typolink.parameter.field = image

            typolink.parameter.split {

              token = ,
              cObjNum = 1
              max = 1

              1.current = 1
              1.wrap = /uploads/pics/|

            }

            typolink.ATagParams = TEXT
            typolink.ATagParams.field = uid
            typolink.ATagParams.wrap = rel="lightbox[lb|]"

            typolink.title.field = imagecaption

          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:05:38.037

根据 TSRef，typolink.title 的类型是 string/stdwrap。它不是 TEXT 对象。

所以应该是这样的：

```
typolink.title.cObject = TEXT
typolink.title.cObject.field = imagecaption 
```

# ios - 从 UIWebView 获取点击的图像

> ID：13930104
> 
> 赞同：0
> 
> 时间：2012-12-18T09:42:04.110
> 
> 标签：ios, web

我有一个 web 视图，显示来自任何 URL 的许多图像。当我单击或长按特定图像时，我需要下载该图像数据。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:32.540

一个简单的解决方案是继续监听`UIWebview`代理，`shouldStartLoadWithRequest`只要 URL 以 .jpg 或 .png 结尾，您就可以停止重定向并手动下载图像。

```
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [UIImage imageWithData:data]; 
```

更复杂的方法是使用javascript并检测触摸点（x，y），`UIWebview`然后找到相应的元素标签。如果元素是图像，则使用上述方法进行图像下载。但这很复杂，我不完全确定这是否可以实现。如果第一种方法对您没有帮助，那么如果您问我，这值得一试。

## 编辑-

您应该放置一个手势识别器`UILongPressGestureRecognizer`并添加一个侦听器。因此，您可以从那里调用您的 java 脚本函数，而不是从 touches 委托方法中调用。

# android - 如何在相同 Ativity 的 Fragment 之间进行回调

> ID：13930105
> 
> 赞同：1
> 
> 时间：2012-12-18T09:42:11.127
> 
> 标签：android, callback, fragment

我在一个活动中有 4 个选项卡。

他们每个人都是一个片段。每个 Fragment 都有一个 ListView。

因此，如果我更改 Fragment 中的 ListView，它必须更改所有其他 Fragment 中的 ListView，即 ..，选项卡。

我面临的问题是在创建接口实例时。

它需要它自己的 onClick() 方法。

如果我想要回调父活动，我可以通过覆盖**onAttach**来做到这一点。但是如何对 Fragment 进行回调呢？

**来自开发者网站：**

*通常，您会希望一个 Fragment 与另一个 Fragment 进行通信，例如根据用户事件更改内容。所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。两个 Fragment 永远不应该直接通信。*

那么，对 Activity 进行回调，然后再对其他 Fragment 进行回调？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:53:50.080

这很简单，您只需要以下步骤：

1）从`onClick`您的第一个片段中的方法进行活动的函数调用：

```
((IYourActivityInterface) getActivty()).activityMethod(); 
```

2）在您的活动中按标签或ID查找片段并运行它的方法：

```
public void activityMethod(){
    Fragment tabFragment = getFragmentManager().findFragmentByTag("second_fragment");
    // or Fragment tabFragment = getFragmentManager().findFragmentById(R.id.frag);
    if (tabFragment!=null){
       ((IFragmentInterface) tabFragment).fragmentMethod();
    }
} 
```

希望这是您正在寻找的。）

# forms - Symfony 2中来自父级的自定义嵌套表单

> ID：13930106
> 
> 赞同：0
> 
> 时间：2012-12-18T09:42:15.537
> 
> 标签：forms, symfony, symfony-2.1

我有一些这样的嵌套formTypes：

`Form1`其中包括`Form2`其中包括`Form3`

根据某些信息（例如，如果当前用户是管理员），我想更改`Form3`.

问题是我不知道该怎么做，因为对象中没有`setOption`方法`$builder`，我可以从`Form1`.

另外，我不知道我应该如何组织我的表格，实际上`Form3`也包括在一些其他表格中，并且每次的字段几乎相同，只有少数需要更改，这就是为什么我做了一个`Form3`表格以避免冗余.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:49:26.417

我认为您应该根据某些数据使用事件订阅者来动态删除/添加字段。

此类事件订阅者允许您在创建表单后修改表单数据，并且它适用于表单实例而不是类型。[您应该在这里](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)找到更多信息

顺便说一句，关于所需的依赖项，例如安全上下文或您可以[创建给定表单类型作为服务](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html#creating-your-field-type-as-a-service)并注入所需对象的东西

# django - 如何从我的登录页面重定向到 Django 中的 :8000/username

> ID：13930107
> 
> 赞同：1
> 
> 时间：2012-12-18T09:42:14.593
> 
> 标签：django, login

我在主页本身有我的登录表单，即“/”。现在从那里我想将用户重定向到 0.0.0.0:8000/username ，其中“用户名”不是静态的，不同的用户不同。我是 Django 的初学者。请详细解释。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:58:58.003

你可以做的是像这样在你的 urls.py 中定义一个主页 url 和一个配置文件 url。

```
#urls.py
url(r'^$', 'app.views.home'),
url(r'^(?P<username>\w+)/$', 'app.views.profile'), 
```

现在在 views.py 下定义 2 个视图，一个用于呈现主页，第二个用于呈现个人资料页面

```
# views.py

import models
from django.shortcuts import render_to_response
from django.templates import RequestContext
from django.contrib.auth import authenticate, login

def home(request):
    """
    this is the landing page for your application.
    """
    if request.method == 'POST':
        username, password = request.POST['username'], request.POST['password']
        user = authenticate(username=username, password=password)
        if not user is None:
            login(request, user)
            # send a successful login message here
        else:
            # Send an Invalid Username or password message here
    if request.user.is_authenticated():
        # Redirect to profile page
        redirect('/%s/' % request.user.username)
    else:
        # Show the homepage with login form
        return render_to_response('home.html', context_instance=RequestContext(request))

def profile(request, username):
    """
    This view renders a user's profile
    """

    user = user.objects.get(username=username)
    render_to_response('profile.html', { 'user' : user}) 
```

现在，当请求第一个 url 时，`/`它会将请求转发到`app.views.home`这意味着主视图 ===within===>views.py ===within===>`app`应用程序。

主视图检查用户是否经过身份验证。如果用户通过身份验证，它会调用 url，`/username`否则它只会呈现`home.html`在您的模板目录中调用的模板。

配置文件视图接受 2 个参数，1\. 请求和 2\. 用户名。现在，当使用上述参数调用配置文件视图时，它会获取提供的用户名的用户实例并将其存储在`user`变量中，然后将其传递给`profile.html`模板。

也请阅读[Django Project 上非常简单的投票应用教程，](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)以熟悉 django 的强大功能。

:)

# spring - 基本 Spring Security 配置的困难

> ID：13930109
> 
> 赞同：1
> 
> 时间：2012-12-18T09:42:22.593
> 
> 标签：spring, authentication, login, spring-security, spring-roo

我正在尝试为 spring 项目构建一个非常基本、直接的身份验证。

我遇到的问题是应用程序不断将我发送到“登录失败”页面，尽管我已经声明了 2 个基本帐户（管理员和用户）。

我的应用程序-Security.xml：

```
<http auto-config="true" use-expressions="true">
        <form-login login-processing-url="/resources/j_spring_security_check" login-page="/login" authentication-failure-url="/login/denied" />
        <logout logout-url="/resources/j_spring_security_logout" />
        <!-- Configure these elements to secure URIs in your application -->
        <intercept-url pattern="/choices/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/member/**" access="isAuthenticated()" />
        <intercept-url pattern="/resources/**" access="permitAll" />
        <intercept-url pattern="/login" access="permitAll" />
        <intercept-url pattern="/home/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/*Details/*" access="hasRole('ROLE_USER')" />

    </http>
    <!-- Configure Authentication mechanism -->
    <authentication-manager alias="authenticationManager">
        <!-- SHA-256 values can be produced using 'echo -n your_desired_password | sha256sum' (using normal *nix environments) -->
        <authentication-provider>
            <password-encoder hash="sha-256" />
            <user-service>
                <user name="admin" password="admin" authorities="ROLE_ADMIN" />
                <user name="user" password="user" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager> 
```

我非常基本的登录表单：

```
<form action="/${app_name}/resources/j_spring_security_check" method="POST">
        <label for="j_username">Username</label>
        <input id="j_username" name="j_username" type="text" /><br/>

        <label for="j_password">Password</label>
        <input id="j_password" name="j_password" type="password" /><br/>

        <input type="submit" value="Login" />
    </form> 
```

目前，控制器仅用于解析登录、登录/拒绝等 URL。

我刚从 Spring 和 Roo 开始，所以这可能只是我忽略的一些显而易见的事情。

感谢任何花时间回答的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:58:30.157

你的问题是你定义了一个**密码编码器**

```
<password-encoder hash="sha-256" /> 
```

而您的密码是纯文本

```
<user name="admin" password="admin" authorities="ROLE_ADMIN" /> 
```

删除编码器或（更好）指定密码，使用您选择的算法编码（sha-256）

# c# - GetFilesAsync 停止工作

> ID：13930113
> 
> 赞同：4
> 
> 时间：2012-12-18T09:42:35.160
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, winrt-async

我有这段代码

```
public static class Storage
{
    public async static Task<bool> Exists(string filename)
    {
        var folder = await Package.Current.InstalledLocation.GetFolderAsync("Assets");
        var _files= await folder.GetFilesAsync(CommonFileQuery.OrderByName).AsTask().ConfigureAwait(false);

        var file = _files.FirstOrDefault(x => x.Name == filename);
        return file != null;
    }
} 
```

并从我的 Windows 8 Store 应用程序中调用它；

```
this.IconExists = this.Game != null && Storage.Exists(this.IconName).Result; 
```

因此，如果我在上面的行上放置一个断点并逐步运行它，它可以工作，但是没有中断并且只是运行应用程序会导致应用程序挂起。

几天前的提交也有类似的代码；

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Windows.ApplicationModel;
using Windows.Storage;
using Windows.Storage.Search;

namespace eggrr.Core.FileStorage
{
    public class Storage
    {
        private IReadOnlyList<StorageFile> _files;

        public Storage()
        {
            _files = GetFilesAsync("Assets").Result;
        }

        private async Task<IReadOnlyList<StorageFile>> GetFilesAsync(string relativeFolderPath)
        {
            var path = string.Format("{0}\\{1}", Package.Current.InstalledLocation.Path, relativeFolderPath);
            var folder = await StorageFolder.GetFolderFromPathAsync(path);
            return await folder.GetFilesAsync(CommonFileQuery.OrderByName).AsTask().ConfigureAwait(false);
        }

        public bool Exists(string filename)
        {
            var file = _files.FirstOrDefault(x => x.Name == filename);
            return file != null;
        }

        private static readonly Storage _instance = new Storage();
        public static Storage Instance { get { return _instance; } }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:53:21.357

似乎这解决了它的问题；

```
 public static class Storage
{
    private static IReadOnlyList<StorageFile> _files;

    static Storage()
    {
        _files = GetFilesAsync("Assets").Result;
    }

    private async static Task<IReadOnlyList<StorageFile>> GetFilesAsync(string relativeFolderPath)
    {
        var folder = await Package.Current.InstalledLocation.GetFolderAsync("Assets").AsTask().ConfigureAwait(false);
        return await folder.GetFilesAsync(CommonFileQuery.OrderByName).AsTask().ConfigureAwait(false);
    }

    public static bool Exists(string filename)
    {
        var file = _files.FirstOrDefault(x => x.Name == filename);
        return file != null;
    }
} 
```

更多信息；

*   [WinRT：使用 GetFileFromApplicationUriAsync() 加载静态数据](https://stackoverflow.com/questions/12235085/winrt-loading-static-data-with-getfilefromapplicationuriasync)
*   [http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)
*   [http://lunarfrog.com/blog/2012/01/23/simplicity-of-async-and-await/](http://lunarfrog.com/blog/2012/01/23/simplicity-of-async-and-await/)

# mysql - 使用连接子句更新 2 表

> ID：13930114
> 
> 赞同：0
> 
> 时间：2012-12-18T09:42:35.827
> 
> 标签：mysql

我尝试使用 join 子句从 2 个表中更新某些字段。但是每次测试都不好，mysql返回错误。

我的查询是：

```
 UPDATE `Table1` t1 , `Table2` t2
LEFT OUTER JOIN `Table2` t3 ON t1.acIndex = t3.ecActe
SET t2.ecDate=DATE_SUB(t2.ecDate, INTERVAL 183 DAY), t1.acDateF=DATE_SUB(t1.acDateF, INTERVAL 183 DAY), t1.acDateDebut=DATE_SUB(t1.acDateDebut, INTERVAL 183 DAY) 
WHERE (t1.acTraitement='5861' AND t1.acDateDebut>'2012-12-07' ) 
```

那么你能帮我找出为什么查询不好吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:46:17.953

如[`JOIN`语法](http://dev.mysql.com/doc/en/join.html)中所述：

> ### 在 MySQL 5.0.12 中加入处理更改
> 
> `[ deletia ]`
> 
> *   以前，逗号运算符 ( `,`) 和`JOIN`两者具有相同的优先级，因此连接表达式`t1, t2 JOIN t3`被解释为`((t1, t2) JOIN t3)`。Now`JOIN`具有更高的优先级，因此表达式被解释为`(t1, (t2 JOIN t3))`. 此更改会影响使用`ON`子句的语句，因为该子句只能引用连接操作数中的列，并且优先级的更改会更改对这些操作数的解释。
>     
>     
>     
>     例子：
>     
>     
>     
>     ```
>     创建表 t1 (i1 INT, j1 INT);
>     创建表 t2 (i2 INT, j2 INT);
>     创建表 t3 (i3 INT, j3 INT);
>     插入 t1 值（1,1）；
>     插入 t2 值（1,1）；
>     插入 t3 值（1,1）；
>     SELECT * FROM t1, t2 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     以前，[`SELECT`](http://dev.mysql.com/doc/en/select.html)由于 as 的隐式分组， 是合法`t1,t2`的`(t1,t2)`。现在`JOIN`优先，所以`ON`子句的操作数是`t2`and `t3`。因为`t1.i1`不是任何一个操作数中的列，所以结果是`Unknown column 't1.i1' in 'on clause'`错误的。要允许处理连接，请将前两个表用括号显式分组，以便`ON`子句的操作数是`(t1,t2)`and `t3`：
>     
>     
>     
>     ```
>     SELECT * FROM (t1, t2) 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     或者，避免使用逗号运算符，`JOIN`而是使用：
>     
>     
>     
>     ```
>     SELECT * FROM t1 加入 t2 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     此更改也适用于将逗号运算符与`INNER JOIN`, `CROSS JOIN`,`LEFT JOIN`和混合的语句`RIGHT JOIN`，所有这些语句现在都比逗号运算符具有更高的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:47:56.940

语法不正确。试试这个查询 -

```
UPDATE
  `Table1` t1
LEFT OUTER JOIN `Table2` t2
  ON t1.acIndex = t2.ecActe
SET
  t2.ecDate = DATE_SUB(t2.ecDate, INTERVAL 183 DAY),
  t1.acDateF = DATE_SUB(t1.acDateF, INTERVAL 183 DAY),
  t1.acDateDebut = DATE_SUB(t1.acDateDebut, INTERVAL 183 DAY)
WHERE
  (t1.acTraitement = '5861' AND t1.acDateDebut > '2012-12-07') 
```

# django - {% url %} 在 Django 1.4 中不起作用

> ID：13930115
> 
> 赞同：0
> 
> 时间：2012-12-18T09:42:37.540
> 
> 标签：django, django-urls, django-templates

当我在我的任何模板中`'str' object has no attribute 'regex'`使用或任何其他参数时，我都会收到此错误。`{% url home %}`

似乎传递给`url` *的任何参数都作为字符串传递*，我不确定 url 是否采用它的参数的方式。

这里有什么遗漏吗，我应该向**TEMPLATE_CONTEXT_PROCESSORS**或**MIDDLEWARE_CLASSES**或任何其他值添加任何新值。

我的**MIDDLEWARE_CLASSES**是

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'pagination.middleware.PaginationMiddleware',
) 
```

和**TEMPLATE_CONTEXT_PROCESSORS**是

```
TEMPLATE_CONTEXT_PROCESSORS = ('django.contrib.auth.context_processors.auth',
          'django.core.context_processors.request',
          'django.core.context_processors.csrf',
          'django.core.context_processors.static',
          "django.core.context_processors.media",
          'django.core.context_processors.debug',
          'django.core.context_processors.i18n',) 
```

我的**myproject/urls.py**是

```
urlpatterns = patterns('',
    #Action urls go here
     url(r'^home/$', 'website.home.views.home', name='home'),

    #Contentdeveloper urls go here
     (r'^contentdeveloper/', include('website.contentdeveloper.urls')),

    #Static urls go here
     (r'^static/(?P<path>.*)$', 'django.views.static.serve',
      {'document_root': settings.STATIC_ROOT, 'show_indexes': True}),
) 
```

我的**Views.py**是

```
def home(request):
   return render_to_response('home/home.html', {}, context_instance=RequestContext(request)) 
```

**我在home/home.html**中的模板代码是

```
{% extends "base.html" %}
{% block content %}
    {% url home %}
{% endblock %} 
```

然后是整个**Traceback**

```
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\MirrarOrnamentsWebPortal\website\home\views.py" in home
  19\.         return render_to_response('home/home.html', {}, context_instance=RequestContext(request))
File "C:\Python27\lib\site-packages\django\shortcuts\__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "C:\Python27\lib\site-packages\django\template\loader.py" in render_to_string
  176\.         return t.render(context_instance)
File "C:\Python27\lib\site-packages\django\template\base.py" in render
  140\.             return self._render(context)
File "C:\Python27\lib\site-packages\django\template\base.py" in _render
  134\.         return self.nodelist.render(context)
File "C:\Python27\lib\site-packages\django\template\base.py" in render
  823\.                 bit = self.render_node(node, context)
File "C:\Python27\lib\site-packages\django\template\debug.py" in render_node
  74\.             return node.render(context)
File "C:\Python27\lib\site-packages\django\template\loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "C:\Python27\lib\site-packages\django\template\base.py" in _render
  134\.         return self.nodelist.render(context)
File "C:\Python27\lib\site-packages\django\template\base.py" in render
  823\.                 bit = self.render_node(node, context)
File "C:\Python27\lib\site-packages\django\template\debug.py" in render_node
  74\.             return node.render(context)
File "C:\Python27\lib\site-packages\django\template\loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "C:\Python27\lib\site-packages\django\template\base.py" in render
  823\.                 bit = self.render_node(node, context)
File "C:\Python27\lib\site-packages\django\template\debug.py" in render_node
  74\.             return node.render(context)
File "C:\Python27\lib\site-packages\django\template\defaulttags.py" in render
  411\.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=context.current_app)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in _reverse_with_prefix
  363\.         possibilities = self.reverse_dict.getlist(lookup_view)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in _populate
  253\.                     for name in pattern.reverse_dict:
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in _populate
  243\.             p_pattern = pattern.regex.pattern 
```

## 更新：

调试时发生了有线的事情，我在发生异常`django\core\urlresolvers.py`的`_populate`函数中尝试了一个除块之外的块，一切都神奇地开始工作。

我在这里很困惑，这是一个 django 错误还是我可能做过的事情导致了这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T07:06:41.940

我希望你已经使用过：`{% load url from future %}`然后使用`{% url 'home' %}`. 你可以参考[这里](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)。

# ajax - 在 GWT Web 应用程序中加载和保存 JSON 文件

> ID：13930125
> 
> 赞同：0
> 
> 时间：2012-12-18T09:43:27.523
> 
> 标签：ajax, json, gwt

我们正在开发一个带有 Python webapp2 网络服务器的 GWT 网络应用程序。此时，我们要在 Web 应用程序中加载和保存文件。我们不能使用 Flash 来完成这项任务。

保存

当前的方法是使用目标“_blank”的表单上传并设置正确的 MIME 以使浏览器下载文件。此解决方案有效，但由于 webapp2 网络服务器不支持流式传输（因此浏览器无法在短时间内验证 mime 类型），因此每次都会打开一个新的浏览器窗口。有没有更好的解决方案，例如使用 iFrames？

正在加载

再次使用表单上传和解析响应 (JSON)。我们使用内容类型“text/html; charset=UTF-8”。此解决方案在 IE9 中完美运行，但在 Chrome 和 FireFox 中不起作用。似乎 JSON 响应以某种方式被破坏，或者在从表单上传响应解析 JSON 响应时有什么问题？我们使用 piriti 进行 JSON（反）序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:45:50.723

对于加载，您可以使用[RestyGWT](http://restygwt.fusesource.org/index.html)库，它具有将 Java 对象编码或解码为 JSON 的能力：

```
import javax.ws.rs.POST;
...
public interface PizzaOrderCodec extends JsonEncoderDecoder<PizzaOrder> {
}

// GWT will implement the interface for you
PizzaOrderCodec codec = GWT.create(PizzaOrderCodec.class);

// Encoding an object to json
PizzaOrder order = ... 
JSONValue json = codec.encode(order);

// decoding an object to from json
PizzaOrder other = codec.decode(json); 
```

为了保存，如果您必须使用文件上传发送 JSON 文件，您可以查看以下链接： [http ://www.jroller.com/hasant/entry/fileupload_with_gwt](http://www.jroller.com/hasant/entry/fileupload_with_gwt)

[http://www.celinio.net/techblog/?p=1207](http://www.celinio.net/techblog/?p=1207)

玩得开心。

# iphone - 在xcode的appdelegate中添加一个UITabbarController？

> ID：13930126
> 
> 赞同：0
> 
> 时间：2012-12-18T09:43:30.247
> 
> 标签：iphone, xcode, facebook-login

当 Facebook 登录成功时，我需要添加一个带有 ViewControllers 的 tabbarcontroller。但不明白怎么做？

我在 appDelegate.m 中有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

SearchView *first=[[SearchView alloc]
                                initWithNibName:@"SearchView" bundle:nil];

    Login *second=[[Login alloc]initWithNibName:@"Login" bundle:nil];
    second.title=@"Login";
    NSArray *viewArray=[[NSArray alloc] initWithObjects: first,second,nil];
    tabBarController=[[UITabBarController alloc] init];
    [tabBarController setViewControllers:viewArray animated:NO];
    [self.window addSubview:tabBarController.view];
    [self.window makeKeyAndVisible];
    [viewArray release];
    [first release];
    [second release];    
    return YES;

}

}
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                FBLogin *fblogin=[[FBLogin alloc]initWithNibName:@"FBLogin" bundle:nil];
               [self.window addSubview:fblogin.view];
 }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [[FBSession activeSession] closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];

    }
}

In FBLogin.m :
-(void)viewDidAppear:(BOOL)animated
{

            SearchView *searchViewController=[[SearchView alloc]initWithNibName:@"SearchView" bundle:nil];
            UserProfile *userprofile=[[UserProfile alloc]initWithNibName:@"UserProfile" bundle:nil];
            userprofile.title=@"My Profile";
            LogOut *logout=[[LogOut alloc]initWithNibName:@"LogOut" bundle:nil];
            logout.title=@"Sign Out";
            tab=[[UITabBarController alloc]init];
            tab.viewControllers=[NSArray arrayWithObjects:searchViewController,userprofile,logout, nil];
            [self presentModalViewController:tab animated:NO];

} 
```

但是我看不到 fBLogin 中添加的 tabbarcontroller。我可以看到一个空白的视图。

是这样吗？我怎样才能实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:41:01.167

只需设置并初始化`UITabBarController`in `AppDelegate`，当您成功登录时，只需使用我们的自定义方法 For Ex调用`UITabBarController`rootViewController ......`window`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
           UIViewController *viewController1 = [[[yourViewController1 alloc] initWithNibName:@"yourViewController1" bundle:nil] autorelease];
            UINavigationController *navviewController1=[[UINavigationController alloc]initWithRootViewController:viewController1];

            UIViewController *viewController2 = [[[yourViewController2 alloc] initWithNibName:@"yourViewController2" bundle:nil] autorelease];
            UINavigationController *navviewController2=[[UINavigationController alloc]initWithRootViewController:viewController2];

            UIViewController *viewController3 = [[[yourViewController3 alloc] initWithNibName:@"yourViewController3" bundle:nil] autorelease];
            UINavigationController *navviewController3=[[UINavigationController alloc]initWithRootViewController:viewController3];

            UIViewController *viewController4 = [[[yourViewController4 alloc] initWithNibName:@"yourViewController4" bundle:nil] autorelease];
            UINavigationController *navviewController4=[[UINavigationController alloc]initWithRootViewController:viewController4];

            UIViewController *viewController5 = [[[yourViewController5 alloc] initWithNibName:@"yourViewController5" bundle:nil] autorelease];
            UINavigationController *navviewController5=[[UINavigationController alloc]initWithRootViewController:viewController5];

            self.tabBarController = [[[UITabBarController alloc] init] autorelease];
            self.tabBarController.viewControllers = [NSArray arrayWithObjects:navviewController1, navviewController2,navviewController3,navviewController4,navviewController5, nil];

        SearchView *first=[[SearchView alloc]
                            initWithNibName:@"SearchView" bundle:nil];

        Login *second=[[Login alloc]initWithNibName:@"Login" bundle:nil];
        second.title=@"Login";
        NSArray *viewArray=[[NSArray alloc] initWithObjects: first,second,nil];
        yourTabBarController=[[UITabBarController alloc] init];
        [yourTabBarController setViewControllers:viewArray animated:NO];
        [self.window addSubview:yourTabBarController.view];

        [self.window makeKeyAndVisible];
        return YES;
    } 
```

当您成功登录时，只需调用下面我们的自定义方法..

```
-(void)loadTabBarFromDelegate 
{
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"];
} 
```

当你想调用这个方法时，只需创建对象并像下面这样调用这个方法......

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate loadTabBarFromDelegate]; 
```

我希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:50:52.607

尝试将您的代码`viewDidLoad`从`viewDidAppear`.

# javascript - 基于单选按钮选择启用组合框

> ID：13930129
> 
> 赞同：0
> 
> 时间：2012-12-18T09:43:36.127
> 
> 标签：javascript, jquery, html, radio

我有这个单选按钮：

```
<input type="radio" name="type" id="pie" value="pie" />
<input type="radio" name="type" id="bar" value="bar" /><
<input type="radio" name="type" id="line" value="line" /> 
```

我想要一个基于选定单选按钮的组合框。

```
<select id="Xcombo1" class="Xcombo">
<option value = "" >This options should be based on seletec radio</option>
</select> 
```

我已经拥有的一些代码：

```
$('input:radio[name=type]:checked').val(); // to get selected radio. 
```

我的问题是，如何根据选定的单选按钮获得这些选项？

注意：任何时候我选择了一个不同的单选按钮，这些选项应该会动态地改变
Cheers。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:59:43.340

```
$("input").click(function(){
 if($(this).attr("checked"))
{
    if(this.id == "pie")
    {
        $("#Xcombo1").html("<option value='1' >1</option><option value='2' >2</option>");
    }
    else if( this.id == "bar")
    {

        $("#Xcombo1").html("<option value='3' >3</option><option value='4' >4</option>");
    }
    else
    {

        $("#Xcombo1").html("<option value='5' >5</option><option value='6' >6</option>");
    }
}
}); 
```

检查下面的小提琴

[http://jsfiddle.net/quG2S/12/](http://jsfiddle.net/quG2S/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:53:07.143

**HTML**

```
<input type="radio" name="type" id="pie" value="pie" />
<input type="radio" name="type" id="bar" value="bar" />
<input type="radio" name="type" id="line" value="line" />

<select id="Xcombo1" class="Xcombo">
   <option value = "pie">Pie</option>
   <option value = "bar">Bar</option>
   <option value = "line">Line</option>
</select> 
```

**Javascript**

```
$("input[type='radio']").click(function(){
    $("#Xcombo1 option[value='" + $(this).val() +"']").prop("selected", true);
}); 
```

此函数将一个函数绑定到每个单选按钮的单击事件，该事件使用单击的单选按钮的值来选择适当的选项并设置其选定属性。

普通演示：http: [//jsfiddle.net/g82dB/](http://jsfiddle.net/g82dB/)

如果要**动态**附加元素，可以使用以下脚本。它检查以确保该选项不存在，然后追加或选择。

```
$("input[type='radio']").click(function(){
    if($("#Xcombo1 option[value='" + $(this).val() +"']").length ==0){
        var option = $("<option />",{
            "value": $(this).val(),
            "text": $(this).val(),
            "selected": "selected"
        });
        $("#Xcombo1").append(option);
    }else{
        $("#Xcombo1 option[value='" + $(this).val() +"']").prop("selected", true);
    }
}); 
```

这适用于以下 HTML：

动态元素示例：http: [//jsfiddle.net/g82dB/2/](http://jsfiddle.net/g82dB/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:01:41.753

这是一个供您测试的示例，希望我能理解您想要的

**HTML：**

```
<label for="pie">PIE</label><input type="radio" name="type" id="pie" value="pie" />
<br />
<label for="bar">BAR</label><input type="radio" name="type" id="bar" value="bar" />
<br />
<label for="line">LINE</label><input type="radio" name="type" id="line" value="line" />
<br />
<br />

<select id="combopie" class="Xcombo" style="display:none;">
    <option value="pie">Pie Options Here</option>
</select>

<select id="combobar" class="Xcombo" style="display:none;">
    <option value="bar">Bar Options Here</option>
</select>

<select id="comboline" class="Xcombo" style="display:none;">
    <option value="line">Line Options Here</option>
</select> 
```

**​jQuery：**

```
$(function () {
    $('input[type=\'radio\']').click(function () {
        $('select.Xcombo').hide();
        $('#combo' + $(this).attr('id')).show();                
    });
});​ 
```

工作[示例](http://jsfiddle.net/f2rdG/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:49:47.317

这是一个例子：

```
$(function() {
    $('input:radio[name=type]').change(function() {
        var radio = $(this);
        // The "change" event can be triggered for an "unselecting" radio button, so we must check it.
        if (radio.is(':checked')) {
            // You may want to do something else
            $('#Xcombo1 option').attr('value', radio.val());
        }            
    });        
}); 
```

还有一个 jsfiddle：http: [//jsfiddle.net/wNZHr/](http://jsfiddle.net/wNZHr/)

如果你想根据选中的单选按钮显示不同的选项，你可以在javascript中创建选项，或者你可以直接在你的html中创建所有选项并使用show/hide来只显示你想要的选项。

# jquery - jQuery如何从“selectgroup”插件绑定事件

> ID：13930132
> 
> 赞同：0
> 
> 时间：2012-12-18T09:43:46.180
> 
> 标签：jquery, jquery-plugins

我无法绑定事件“onchange” [http://georgepaterson.github.com/jquery-ui/selectgroup/](http://georgepaterson.github.com/jquery-ui/selectgroup/)

这个插件隐藏了选择器

```
<select class="select-list">
    <option value="option1" selected="selected">Option 1</option>
    <option value="option2">Option 2</option>
</select>

$(document).ready(function(){
    $('.select-list').selectgroup({
        style: 'popup'
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:52:20.687

该插件将选择框的html结构更改为ul，因此您需要像这样为li单击编写一个函数

```
jQuery(document).ready(function(){
    jQuery('.ui-selectgroup-list li a').click({
      alert(jQuery(this).html());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:48:35.837

$ 是 jQuery 关键字的快捷方式，所以试试这样：

```
jQuery(document).ready(function(){
    jQuery('.select-list').selectgroup({
      style: 'popup'
    });
}); 
```

# wordpress - 如何在管理区域设置 wordpress 编辑页面

> ID：13930137
> 
> 赞同：0
> 
> 时间：2012-12-18T09:44:04.817
> 
> 标签：wordpress, plugins, admin

开发 wordpress 插件我在设置自定义编辑页面来处理管理区域中的项目时遇到问题。我一直在查看帖子的工作流程，并且我看到所有编辑操作都从 edit.php 重定向到`post.php?post=33&action=edit`. 我一直在设置一个选项页面，并从这里处理所有项目编辑，但在这种情况下，在侧边栏中显示菜单对用户来说不是最佳的，因为如果没有项目 ID 传递给它可能会导致很多问题。我不得不提一下，开发 Wordpress 插件对我来说是新事物，也许我所做的研究并不合适。我一直在看wordpress API，我发现了以下函数

```
add_management_page(). 
```

但这需要在管理菜单下订购

添加以下功能并链接我的项目编辑喜欢

```
admin.php?page=parser-target-edit&record=73

add_submenu_page( 'parser-top-level-handle', 'Edit', 'Sub-menu title', 'manage_options', 'parser-target-edit', array($this , 'edit_item') ); 
```

正在工作，但正如我所说，它作为菜单项显示在侧边栏中。所以它必须是另一种解决方法，它可以在编辑操作的情况下使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:51:19.393

您可以尝试[add_menu_page()](http://codex.wordpress.org/Function_Reference/add_menu_page)可以与[add_submenu_page()](http://codex.wordpress.org/Function_Reference/add_submenu_page)耦合以创建管理页面

您可以执行从[add_menu_page()](http://codex.wordpress.org/Function_Reference/add_menu_page)执行的回调函数。

# javascript - 在 VS2012 中对对象变量的 Intellisense 注释

> ID：13930151
> 
> 赞同：1
> 
> 时间：2012-12-18T09:44:54.090
> 
> 标签：javascript, knockout.js, visual-studio-2012, comments

我正在尝试在我的 javascript 代码中创建智能感知（VS2012）注释。我正在使用类结构并想向类变量添加注释（本示例中的 self.name）

```
bht.ProcessStep = function (data, instrument) {
   var self = this;
   self.name = "test";
}; 
```

我试图将此评论为`<field>`，但这不起作用。我发现使其工作的唯一解决方案是将以下注释作为单独的行添加到类中（因此不要直接在“名称”声明上方）。

```
/// <field name='name' static='false' type='String'>Name of the process step.</field> 
```

有没有办法直接在我的声明上方添加此评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:04:49.227

此页面表明您可以将您的智能感知定义为方法定义的第一行，或者您可以使用完全独立的文件

*创建一个包含 OpenAjax MessageBundle 格式的文档注释的 XML 文件。*

[http://msdn.microsoft.com/en-us/library/bb514138.aspx](http://msdn.microsoft.com/en-us/library/bb514138.aspx)

# scope - Xtext：范围方法不执行？

> ID：13930153
> 
> 赞同：0
> 
> 时间：2012-12-18T09:45:06.193
> 
> 标签：scope, xtext, rule, scoping

我有这个 IScope 方法：

```
IScope scope_Assignment(AssignmentOrFBCall a, EReference ref){
    System.out.println(a.toString());
    return IScope.NULLSCOPE;
} 
```

但它不会产生任何结果。println 和内容助手的输出没有任何变化。所以我以为它没有被执行，但是如果我尝试添加一个断点，它就会被越过。

那么，问题出在哪里？

语法规则是这样的：

```
AssignmentOrFBCall:
    (((variable=[VariableDefinition]) |
    ((variableArray=[ArrayDefinition]'['index=ExpressionIndex']')('.'internalVariable=InternalRecursive)?) | 
    (variableStructOrFB=[VariableDefinition]'.')(internalVariable=InternalRecursive))
    ((':='expression=Expression)|('('(parameter=FBParameter | ')'))))
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:24:39.543

使用此范围提供程序解决：

```
@Override
    protected IScope createLocalVarScope(IScope parentScope,
            LocalVariableScopeContext scopeContext) {
        if (scopeContext != null && scopeContext.getContext() != null) {
            EObject context = scopeContext.getContext();
            if (context instanceof Program) {
                Program program = (Program) context;
                return Scopes.scopeFor(program.getDeclarations());
            }
        }

        return super.createLocalVarScope(parentScope, scopeContext);
    } 
```

# vb.net - 如何在运行时使用 vb.net 2012 将控制台应用程序的输出重定向到 Windows 窗体上的文本框控件

> ID：13930157
> 
> 赞同：0
> 
> 时间：2012-12-18T09:45:17.813
> 
> 标签：vb.net

团队，

我有一个第三方应用程序，它实际上是一个电话消息服务器，并在所有连接的客户端和其他服务器之间交换消息。该消息传递服务器会持续运行数天，甚至会持续运行数天。这完全是一个控制台应用程序，没有任何 GUI。甚至为了管理该服务器的内部操作，还有另一个工具是基于控制台的应用程序。我想准备一个 GUI 来在 VB.Net 2012 中启动、停止和重新启动此服务器。我已经设法，

1.  创建此服务器的流程实例
2.  使用适当的参数启动服务器并保持运行。以下是我的应用程序中用于启动服务器的一些示例代码，

    Private Sub Server_Start_Click(sender As Object, e As EventArgs) 处理 Server_Start.Click Dim 参数，server_admin_path As String server_admin_path = "D:\Voice_App\DataMessage\MessageServer.exe" 参数 = "-properties " & """" & " D :\Voice_App\Config\message.prop"

    ```
    Dim proc = New Process()
    proc.StartInfo.FileName = server_admin_path
    proc.StartInfo.Arguments = parameter
    ' set up output redirection
    proc.StartInfo.RedirectStandardOutput = True
    proc.StartInfo.RedirectStandardError = True
    proc.EnableRaisingEvents = True
    Application.DoEvents()
    proc.StartInfo.CreateNoWindow = False
    proc.StartInfo.UseShellExecute = False
    ' see below for output handler
    AddHandler proc.ErrorDataReceived, AddressOf proc_OutputDataReceived
    AddHandler proc.OutputDataReceived, AddressOf proc_OutputDataReceived
    proc.Start()
    proc.BeginErrorReadLine()
    proc.BeginOutputReadLine()
    'proc.WaitForExit()
    Server_Logs.Focus() 
    ```

    结束子

这段代码很好地启动了消息服务器。消息服务器现在已启动，并在特定时间间隔（例如 30 秒）后在控制台上生成日志跟踪，这将一直持续到消息服务器未被管理工具停止。所以现在我想要的是捕获我的服务器在其控制台上生成的每一行，并将该行粘贴到我在 Windows 窗体上的文本框中。

我得到了下面的代码，它给了我每一行在生产时，

```
 Public Sub proc_OutputDataReceived(ByVal sender As Object, ByVal e As                     DataReceivedEventArgs)
    On Error Resume Next
    ' output will be in string e.Data
    ' modify TextBox.Text here
    'Server_Logs.Text = e.Data  ` Does not display anything in textbox
    MsgBox(e.Data) 'It works but I want output in text box field
End Sub 
```

PS = 我的应用程序将处理多个这样的服务器，我不希望用户将每个消息服务器实例都作为控制台窗口在其任务栏上打开，并且他们正在滚动长日志跟踪。我在这里搜索了很多线程，但在上述情况下对我没有任何帮助。任何帮助都将不胜感激，因为我很长一段时间以来一直坚持这一点，现在这已经是一个很好的表现了！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:33:50.290

看起来您正在尝试从与表单所在的线程不同的线程进行调用。从 Process 类引发的事件不会来自同一个线程。

```
Delegate Sub UpdateTextBoxDelg(text As String)
Public myDelegate As UpdateTextBoxDelg = New UpdateTextBoxDelg(AddressOf UpdateTextBox)

Public Sub UpdateTextBox(text As String)
    Textbox.Text = text
End Sub

Public Sub proc_OutputDataReceived(ByVal sender As Object, ByVal e As DataReceivedEventArgs)

    If Me.InvokeRequired = True Then
        Me.Invoke(myDelegate, e.Data)
    Else
        UpdateTextBox(e.Data)
    End If

End Sub 
```

# youtube-api - youtube api - 循环处理大量数据

> ID：13930158
> 
> 赞同：0
> 
> 时间：2012-12-18T09:45:21.523
> 
> 标签：youtube-api

我需要检索每个视频频道的“观看次数”，并且我正在使用这个[库](https://github.com/jimdoescode/CodeIgniter-YouTube-API-Library) 。这是我的代码

好的，代码可以正常工作并打印我每个视频的观看次数，除了我在其他一些视频中收到这些警告而没有打印观看次数

**遇到 PHP 错误 严重性：**警告消息：

*   simplexml_load_string() [function.simplexml-load-string]：实体：第 547 行：解析器错误：属性构造错误
*   消息：simplexml_load_string() [function.simplexml-load-string]: outube_gdata'/>
*   消息：simplexml_load_string() [function.simplexml-load-string]: ^
*   消息：simplexml_load_string() [function.simplexml-load-string]：实体：第 547 行：解析器错误：找不到开始标记链接第 547 行的结尾
*   消息：simplexml_load_string() [function.simplexml-load-string]: outube_gdata'/>

我怎样才能处理这么多视频和频道而不会导致此警告消息并及时丢失，因为如果我在一个视频较少的频道上尝试相同的代码我没有错误

```
$channels=array('google','apple','mac','xyz','abc','test');
for ($j=0; $j<count($channels) $j++)
{

$JSON = file_get_contents("https://gdata.youtube.com/feeds/api/users/".$channels[$j]."/uploads?v=2&alt=jsonc&max-results=0");
$JSON_Data = json_decode($JSON);
    $total_videos = $JSON_Data->{'data'}->{'totalItems'};

    for($i=1; $i<=$total_videos; )
    {
        $this->get_userfeed($channels[$j],$maxresult=20,$start=$i);
        $i+=20;
    }

}

public function get_userfeed($ch_id,$maxresult=10,$start=0,$do=null)
{

    $output = $this->youtube->getUserUploads($ch_id, array('max-results'=>$maxresult,'start-index'=>$start));
    $xml = simplexml_load_string($output);

    // single entry for testing
    foreach($xml->entry as $entry)
    {
    foreach($entry->id as $key=>$val)
    {
    $id = explode('videos/', (string)$val);

    $JSON = file_get_contents("https://gdata.youtube.com/feeds/api/videos/".$id[1]."?v=2&alt=json");
    $JSON_Data = json_decode($JSON);
    $v_count = $JSON_Data->{'entry'}->{'yt$statistics'}->{'viewCount'};
    if($v_count == NULL) $v_count =0;

    echo $v_count;
    // store the v_count into database

    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:00:51.490

你做错了几件事。

首先，如果您想尽量减少对 API 的调用次数，您应该设置`max-results=50`，这是 API 支持的最大值。

其次，我不明白您为什么要单独调用以`http://.../videos/VIDEO_ID`检索每个视频的统计信息，因为该信息已作为您从`http://.../users/USER_ID/uploads`提要中获取的视频条目的一部分返回。您可以只存储该提要返回的值，而不必进行所有这些额外的调用来检索每个视频。

最后，基本问题几乎可以肯定是您遇到了配额错误，您可以在[http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html阅读有关它们的更多信息](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)

采取我提到的任何步骤都应该减少您提出的总请求并可能解决任何配额问题，但无论如何您都应该熟悉配额系统。

# javascript - jQuery：.focus() 上的递归过多

> ID：13930166
> 
> 赞同：1
> 
> 时间：2012-12-18T09:45:57.880
> 
> 标签：javascript, jquery, asp.net

我正在使用 jQuery`.focus()`方法通过 asp.net 中的远程脚本关注一个元素。我收到关于递归过多的错误。

我究竟做错了什么？

asp.net 代码：

```
Response.Write("<script>$('#ledger_name').focus();</script>"); 
```

html

```
<input type="text" id="account_name" name="account_name" /> 
```

js自动补全

```
$("#account_name").autocomplete({
    source: account_master,
    minLength: 1,
    minChars: 0,
    width: 350,
    mustMatch: 0,
    selectFirst: true,
    matchContains: false,
    autoFocus: true,
    autoFill: false,
    change: function (event, ui) {
        if (!ui.item) {
            $(this).val('');
        }
    },
    select: function (event, ui) {
        $("#account_name").val(ui.item.label);
        $("#account_name_code").val(ui.item.id);
        $("#account_name_parent").val(ui.item.parent);

        //$('#ledger_name').focus();
        return true;
    }

}); 
```

jQuery 用户界面

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script> 
```

`$('#ledger_name').focus();`在调用自动​​完成时，它在 jquery-ui.min.js 文件中出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:50:57.923

要让 id 为“ledger_name”的文本框专注于页面加载，只需在您的 .aspx 页面中添加此 JavaScript：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#ledger_name").focus();
});
</script> 
```

无需从后面的代码中执行此操作。

可能聚焦它也会触发自动完成，所以你不能从自动完成本身中聚焦它。

# iphone - 如何更改 xCode 应用程序图标

> ID：13930170
> 
> 赞同：4
> 
> 时间：2012-12-18T09:46:11.060
> 
> 标签：iphone, xcode, xcode4

我想更改我的应用程序图标，因此，我在项目导航器中删除（移动到垃圾箱） Icon.png 和 Icon@2x.png，在摘要视图中我添加了新图标并将它们添加到我的项目中，我在摘要中查看它们

![在此处输入图像描述](../Images/17cf095e621814e3b1ce4d09bd30b4ad.png)

但是，当我安装应用程序时，图标是前一个。如何清理以前的图标以安装新图标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:48:00.000

有时当直接构建到设备时，它第一次不起作用。

我发现我必须清理项目并从设备/模拟器中删除应用程序才能获得新图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:51:42.607

只需从 Simulator**清理**并**构建**和**删除应用程序。**它会起作用的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T10:00:28.553

只需这样做...这将解决您的问题..

![在此处输入图像描述](../Images/27bff113cf303b4f3ce81bed6f2aea83.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T09:48:47.540

您必须重置模拟器。

# python - 不要考虑使用正则表达式的空格和引号

> ID：13930184
> 
> 赞同：0
> 
> 时间：2012-12-18T09:46:53.773
> 
> 标签：python, regex, python-2.6

我有以下字符串：

```
Values: Fail.123/urs/temp/lib.000 
```

我需要创建一个不考虑空格和“”的正则表达式。而且它也不应该区分大小写。如果我会通过上面的字符串`(Values: Fail.123/urs/temp/lib.000)`。它还将显示以下字符串：

```
value:Fail.123/urs/temp/lib.000 
Value:fail.123  /urs/temp/Lib.000
value:"fail.123 /urs/temp/Lib.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:06:46.357

以下正则表达式将忽略空格和`"`（引号）：

```
[^\s"]* 
```

PS：我使用 .NET 正则表达式对此进行了测试，但它应该适用于 python

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:08:38.843

以下应该给你的想法：

```
In [76]: cmpkey = lambda s:re.sub(r'[\s"]', '', s).lower()

In [77]: cmpkey('Values: Fail.123/urs/temp/lib.000') == key('values:"fail.123 /urs/temp/Lib.000')
Out[77]: True 
```

PS我刚刚注意到，在您的示例中，“值”与“值”可互换使用。这是为什么？

# c# - 我们可以在 .aspx.cs 页面中编写单元测试方法吗？

> ID：13930195
> 
> 赞同：7
> 
> 时间：2012-12-18T09:47:18.940
> 
> 标签：c#, asp.net, unit-testing

我们可以在 .aspx.cs 页面中编写测试方法吗？如果是，那怎么办？我需要为 Page_Load 方法中的代码编写测试方法。请建议是否有任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:52:00.683

或许可以，但如果将`Page_Load`方法的逻辑提取到模型类中，然后单独测试，会更简洁。

### 为什么？

*   在其他页面重用该方法的逻辑
*   更好地分离模型和表示
*   更容易测试的更简洁的代码

样本：

```
// Home.aspx.cs
Page_Load()
{
    //Lots of code here
}

// or else Home.aspx.cs
Page_Load()
{
    Foo f = new Foo();
    var result = f.DoThings();
}

//Unit test
Page_Load_FooDoesThings()
{
    //Arrange
    Foo f = new Foo();
    var expected = ...;

    //Act
    var actual = f.DoThings();

    //Assert
    Assert.AreEqual(expected, actual)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:53:27.597

您可以在任何地方编写测试方法，您只需要使用 3A 规则（Arrange、Act、Assert）并根据您使用的测试框架装饰您的方法。您可以使用测试框架、属性、方法等来测试几乎任何东西。

但是，最佳实践是为测试创建一个单独的项目。

与`Page_Load`其他页面生命周期方法一样，它也不是测试的好选择，因为让它可测试会很麻烦。我同意“oleksii”的观点，即我们可以在外部`Page_Load`方法中测试功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:58:11.297

其实你可以。如果您在 中添加一些测试方法`Page_Load`，则以编程方式可以。但**你不应该**。因为如果您可以在 中定义您的测试方法`Page_Load`，那么您的测试将在每次加载页面时运行不必要的。这不是单元测试中的以下方法。这就是为什么要`Visual Studio`创建一个单独的测试项目的原因。

# php - 向元素添加数据以便 jQuery 可以使用它

> ID：13930197
> 
> 赞同：1
> 
> 时间：2012-12-18T09:47:26.207
> 
> 标签：php, jquery

我正在寻找一种优雅的方式将数据添加到服务器端的元素，以便 jQuery/JavaScript 可以使用它。我也不想对服务器进行太多调用，因此数据必须预先存在。

场景示例。服务器端（PHP），我创建了一个用户图像列表。为此，我想添加姓名、姓氏、年龄等。
单击图像时，jQuery 必须对这些数据进行处理。

我考虑过的可能性：
将数据作为href，然后单击，获取href并返回false。
将数据作为类。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:48:58.667

`data-`HTML 规范为此目的保留了以 开头的属性。例如：

```
<p data-name="John Doe" data-age="256">Hello World</p> 
```

只要您遵循`data-*`格式，您可以随意命名它们。

如果您需要结构化语义数据，请考虑使用带有适当模式的[RDFa Lite 。](http://www.w3.org/TR/rdfa-lite/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:55:26.410

对于 HTML5，您有[自定义数据属性](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)。

如果您想要旧规范的有效 HTML，最好的选择可能是将数据嵌入到`<span>`元素中，这些元素的样式`display:none`和定位方式将它们与图像相关联并且易于使用 jQuery 访问（例如，作为具有一个特定的类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:51:08.687

您可以创建`data`属性：

```
<a href="link.html" data-content="demo">Text</a> 
```

然后阅读它们：

```
$('a').data('content'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:56:14.960

如果您有很多数据元素，您可以通过将数据存储在 Javascript 变量中来将它们排除在标记之外，并且只需使用`data-userid`or`id`属性来存储对用户数据的 ID 引用。

例如，如果您有一个 PHP 用户数组，您可以将其 json_encode 为 Javascript 变量：

```
var users = <?php echo json_encode($users); ?>; 
```

在您的标记中，只需存储 ID：

```
<img src="..." alt="..." data-userid="x" /> 
```

然后，您可以在 Javascript 数组中查找数据。这种方法的好处是，如果您需要存储大量数据，它不会对标记造成干扰。

# android - 内部应用程序无法导入 com.android.internal.policy.impl？

> ID：13930201
> 
> 赞同：3
> 
> 时间：2012-12-18T09:47:41.703
> 
> 标签：android, build

我在android构建系统的packages/apps中添加了一个应用程序，我的应用程序使用了一些内部api。但是当我使用mm或mmm制作应用程序时，android构建系统显示错误：package com.android.internal.policy.impl没有存在等。但我看到电话应用程序也使用像 com.android.internal.xx 这样的内部 api 并且它没有错误地构建。我想知道我是否遗漏了什么以及如何在内部应用程序中使用内部 api。顺便说一句，我的应用可以导入 com.android.internal.telephony，但不能导入 com.android.internal.policy.impl。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T02:44:34.000

最后我添加`LOCAL_JAVA_LIBRARIES := android.policy framework`了 Android.mk，它可以工作了。

# spring - 如何配置 Spring Jta 事务？

> ID：13930208
> 
> 赞同：1
> 
> 时间：2012-12-18T09:48:08.467
> 
> 标签：spring, transactions, distributed-transactions, spring-transactions, transactional

有人可以帮我解决这个错误吗？或者如何使用 JTA Transactionmanager 的具体示例代码？

我正在使用多个数据库，主数据库是在 Xml 中使用 Transactionmanager 定义的，其余数据库是在 java 文件中使用 GenericApplicationContext 创建的。

xml中的JtaTransactionManager设置是这样的

```
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager" autowire="constructor">
   </bean>
<tx:annotation-driven/> 
```

和错误代码..

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/spring/db.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: No JTA UserTransaction available - specify either 'userTransaction' or 'userTransactionName' or 'transactionManager' or 'transactionManagerName'
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-30T14:40:00.807

如果你使用JTA事务管理器，你需要：
1.一个支持JTA的web服务器，比如JBoss，Weblogic。
2\. 或 JTA lib 的实现，如 atomikos。

因此，在您的情况下（使用 tomcat），您应该使用 JTA 实现库。如果你使用 spring-boot，你只需将它添加到 pom 中，比如：

```
 <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-jta-atomikos</artifactId>
    </dependency> 
```

而且，如果您使用 Spring Boot，则无需在配置中执行任何操作。

但是，您需要用`XADataSourceWrapper`. 您可以自动装配此属性并使用`xaDataSourceWrapper.wrapDataSource()`它使您的数据源成为 XA 数据源。

# javascript - 通过jQuery替换div的内容

> ID：13930209
> 
> 赞同：1
> 
> 时间：2012-12-18T09:48:11.903
> 
> 标签：javascript, jquery, html

我有一个文件`login.ejs`，它以`<div id="loginPage">`然后包含一个登录表单开头。然后我有一个文件`index.ejs` `with a <div id="container">`ID。我希望能够单击容器 div 外部的链接，该链接将容器 div 的内容替换为 loginPage div 的内容。在我的`index.ejs`我有：

```
<a href="#" id='admin' title="admin"><p><b>Admin</b></p></a> 
```

我有一个脚本`index.js`：

```
function events() {
    // register events
        $('#admin').click(function()
        {
            $('#container').html('#loginPage');
            return false;
        });
} 
```

但我无法让它工作，请任何人可以提供一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:00.857

你需要像下面那样做，首先得到 html like`$('#loginPage').html()`然后把这个 html 分配给容器。

```
$('#admin').click(function()
        {
            $('#container').html($('#loginPage').html());
            return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:07:30.443

准确地说，使用以下`load`功能：

```
$('#admin').click(function(e){
   e.preventDefault();
   $('#container').load('login.ejs #loginPage');
});//--------------------^^^^^^^^--^^^^^^^^^^-----loads the <div id="loginPage">
   //---------------------------------------------from the login.ejs 
```

# java-me - 错误：j2me 冲突的应用程序，显示项目？

> ID：13930211
> 
> 赞同：2
> 
> 时间：2012-12-18T09:48:16.350
> 
> 标签：java-me, nokia, midp, wma

我设计了一个具有推送注册表功能的 j2me 应用程序。我几乎没有错误“冲突的应用程序，显示项目？” 在启动应用程序时。

我所做的只是在 Project->Properties->Pushregistry 中添加了一个条目`[MIDlet-Push-1: sms://:5051,pushregistry.SendApprooval,*]`

我的 JAD 和清单文件正常并显示这些条目，但是每当我进行此更改时，应用程序都不会启动并显示我上面提到的错误，但是当我删除此步骤（条目）时它工作正常，我的意思是应用程序运行。

**我的应用程序代码**

```
public void startApp() {
    String[] connections;
    if (smsconn == null) {
        connections = PushRegistry.listConnections(true);
        if (connections == null && connections.length == 0) {
            destroyApp(false);
            notifyDestroyed();
        }
    } else {
        try {
            smsconn = (MessageConnection) Connector.open("sms://:" + "5051");
            msg = smsconn.receive();
            // If it's a text message, add it to the alert
            if (msg != null && smsconn instanceof TextMessage) {
                alert.setTitle("From: " + msg.getAddress());
                alert.setString(((TextMessage) msg).getPayloadText());
                display.setCurrent(alert);
            }
        } catch (Exception e) {
            System.out.println("IO Exception!");
        }
    }
} 
```

其余代码只是字符串和警报。

**我的 JAD 文件**

```
MIDlet-1: Midlet,,pushregistry.SendApprooval
MIDlet-Jar-Size: 2250
MIDlet-Jar-URL: pushRegistry.jar
MIDlet-Name: pushRegistry
MIDlet-Permissions: javax.wireless.messaging.sms.send, javax.wireless.messaging.sms.receive, javax.microedition.io.PushRegistry
MIDlet-Push-1: sms://:5051,pushregistry.SendApprooval,*
MIDlet-Vendor: TelVas
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

**清单文件**

```
MIDlet-1: Midlet,,pushregistry.SendApprooval
MIDlet-Permissions: javax.wireless.messaging.sms.send,   javax.wireless.messaging.sms.receive, javax.microedition.io.PushRegistry
MIDlet-Push-1: sms://:5051,pushregistry.SendApprooval,*
MIDlet-Vendor: TelVas
MIDlet-Name: pushRegistry
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

原因是什么？我的意思是，如果只是名称问题，那么即使我删除了 pushregistry 条目，它也不应该运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:57:51.120

签署申请后问题已解决... :) 谢谢

# iphone - 未使用适用于 iOS 的新 GoogleMaps SDK 找到文件

> ID：13930212
> 
> 赞同：3
> 
> 时间：2012-12-18T09:48:23.433
> 
> 标签：iphone, ios, xcode, google-maps, xcode4.5

一段时间以来，我一直在为新的 iOS google maps sdk 苦苦挣扎。我按照以下教程工作：[https ://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)

但是，每当我尝试编译我的简单项目时，我都会在线出错：

```
#import <GoogleMaps/GoogleMaps.h> 
```

文件未找到...

顺便说一句，我正在使用 Xcode 4.5.1

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:06:27.380

您必须确保将 .framework 包和 .bundle 包都拖到 XCode 中。

.framework 包只是位于 SDK zip 最顶层的 GoogleMaps.framework 文件夹。

.bundle 包位于 GoogleMaps.framework/Resources 下，标题为“GoogleMaps.bundle”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:48:02.527

不用担心 iPhone 开发者还不支持谷歌地图。

因为尚未生成 API 密钥，您需要等待来自 Google 的电子邮件。所以不要费心应用本教程。因为最终它不会起作用。点击以下链接：

[谷歌地图无法在 iPhone 模拟器上运行](https://stackoverflow.com/questions/14007075/google-maps-not-working-on-iphone-simulator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:37:46.537

确保 .bundle 文件在出现提示时**未复制**到项目文件夹中。

# mongodb - 限制大小不能通过 $orderby 与使用 mongodb erlang 驱动程序的索引字段一起工作

> ID：13930215
> 
> 赞同：0
> 
> 时间：2012-12-18T09:48:28.677
> 
> 标签：mongodb, erlang

请参阅以下示例，它可以查询有限大小的文档，

```
run () ->
application:start (mongodb),
{ok, Conn} = mongo:connect (localhost),
{ok, Docs} = mongo:do (safe, master, Conn, test, fun() ->
    mongo:delete (foo, {}),
    mongo:insert_all (foo, [{x,1}, {x,2}, {x,3}, {x,0}, {x,-1}]),
    Cur = mongo:find (foo, {'$query', {}, '$orderby', {x,1}}, {'_id',0}, 0, 3),
    mongo:rest (Cur) end),
mongo:disconnect (Conn),
[{x,-1}, {x,0}, {x,1}] = Docs. 
```

但是如果我确保一个带有 x 的索引：

```
db.foo.ensureIndex({x:1}) 
```

限制大小不会按预期工作，查询将返回**所有**匹配的文档。

我想通过限制大小的索引字段来$order，你能帮我解释一下我想念什么吗？提前致谢！

BTW：目前官方erlang驱动正在重构，我使用的erlang驱动版本是0.2.1

原帖在这里

[使用 mongdb erlang 驱动程序查询返回错误结果？](https://stackoverflow.com/questions/7137178/query-return-wrong-result-using-mongdb-erlang-driver)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:28:53.930

查看 的[语法`mongo:find/5`](http://api.mongodb.org/erlang/mongodb/mongo.html#find-5)，第 5 个参数似乎是[“batchSize”](http://docs.mongodb.org/manual/core/read-operations/#cursor-behaviors)而不是 Limit。

影响每次向服务器请求获取多少文档，`batchSize`但不限制将返回的文档总数。

我认为你真正想要调用的是`Limit()`光标上类似于：

```
Cur = mongo:find (foo, {'$query', {}, '$orderby', {x,1}}, {'_id',0}).Limit(3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T03:05:54.067

我也没有在api中找到限制参数。我遇到了和你提到的一样的问题。但是我通过简单地返回结果来解决它，如果`Counter`达到`Limit`或返回结果，如果没有更多的结果。

# java - Java：如果结果为空，如何分配给变量？

> ID：13930220
> 
> 赞同：3
> 
> 时间：2012-12-18T09:48:45.350
> 
> 标签：java, null

这有效：

```
String address1 = HtmlUtil.escape(rs.getString("address1")); 
```

...但我不想显示“null”。所以我尝试了这个，它不起作用：

```
String address1 = HtmlUtil.escape(rs.getString("address1") || ""); 
```

使用这个是最好的选择：？

```
String address1 = HtmlUtil.escape(rs.getString("address1"));
if (address1 == null) address1 = ""; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:51:24.230

使用*三元运算符*，您可以使用单行代码分配一个值：

```
String address1 = (rs.getString("address1") != null) ?
                  HtmlUtil.escape(rs.getString("address1")) : ""; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:52:23.697

```
String address1 = HtmlUtil.escape(rs.getString("address1"));
if (address1 == null || address1.equals("null")) {
    address1 = "";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:51:43.167

```
String address1 = HtmlUtil.escape(rs.getString("address1")) == null ? "" : HtmlUtil.escape(rs.getString("address1")); 
```

如果你想要丑陋的单线:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:55:23.090

使用临时变量只调用`HtmlUtil.escape`一次。然后检查`null`并分配给`address1`：

```
String tempAddress =  HtmlUtil.escape(rs.getString("address1"));
String address1 = tempAddress != null ? tempAddress : ""; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T09:58:39.000

解决方案：

```
 String address1 = HtmlUtil.escape(rs.getString("address1"));
 if (address1 == null) address1 = ""; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T09:55:17.610

尝试这样的事情

```
<c:when test="${empty rs.getString("address1")}">
  ...
</c:when>
<c:otherwise>
   .....
</c:otherwise> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T12:48:45.417

你可以试试这个：

```
String address1 = "";
if(HtmlUtil.escape(rs.getString("address1") != null && !(HtmlUtil.escape(rs.getString("address1").equalsIgnoreCase("null"))){
address1 = HtmlUtil.escape(rs.getString("address1"));
} 
```

# objective-c - 在 Xcode 的特定选项卡中打开文件

> ID：13930227
> 
> 赞同：0
> 
> 时间：2012-12-18T09:49:18.707
> 
> 标签：objective-c, ios, xcode

我对一件事感到好奇，尽管我几乎可以肯定它是不可能的 :) 当您在 Xcode 中打开特定类型的文件时，它应该在特定选项卡中打开。

例子。我有一个名为界面的选项卡。当我打开（单击）一个`xib`文件以在该选项卡（界面）内显示时。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:58:27.733

只需双击该文件，它将在新选项卡中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:03:20.163

在 xcode 上：行为 -> 编辑行为 -> 常规选项卡单击激活导航：使用主编辑器可选导航：使用单独选项卡双击导航：使用单独选项卡

当您按下选项+单击时，您可以在新选项卡上打开文件。

# c# - 在 MVC 4 c# 网站中接收按键并忽略“选项卡”

> ID：13930231
> 
> 赞同：0
> 
> 时间：2012-12-18T09:49:29.163
> 
> 标签：c#, asp.net-mvc-4, cardreader

我希望我的网站显示在“kiosked”计算机上（即该网站是屏幕上唯一可见的内容）。而且我有一个读卡器，当向它显示卡片时，它会向任何处于活动状态的文本字段发送一个字符串。在字符串之后，读卡器发送一个制表键。

现在我怎么能在每次显示卡片时收到字符串，同时保持网站始终处于活动状态。当标签键被发送时，它不应该标签到地址栏或其他任何地方，如果它会，那么我将不会收到下一个字符串，因为该站点将不再处于活动状态。

此外，接收到的字符串不应该在屏幕上可见，我只想在后面的代码中接收它。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:00:49.540

您可以处理`change`文本框的事件并通过 AJAX 将数据发布到您的控制器，然后重新聚焦该字段。

> 此外，接收到的字符串不应该在屏幕上可见

很少有这样做的方法，使字段融入页面（例如更改背景/前景色）或通过在其上放置一个 div 等来隐藏它。

# c# - inkscape 编辑器上单个元素的多个 X 和 Y 值混淆

> ID：13930234
> 
> 赞同：1
> 
> 时间：2012-12-18T09:49:40.437
> 
> 标签：c#, svg, inkscape

我正在使用inkscape 编辑器。我对路径元素 x、y 定位有疑问。路径元素位置是根据 d 属性 m 值计算的。我有一张图片要显示：

![在此处输入图像描述](../Images/475839e5546be7a7353b2b4bbb846ac2.png)

在这张图片中，我选择了一个路径元素（*在右侧*），并且它的 xml 属性是使用 inkscape 上的 xml 编辑器打开的（*在左侧*）。如果你看到我用 突出显示了两个**X**值`red ink`。一个值在 inkscape 顶部菜单栏上，另一个值`(m x, y ..)`在 xml 编辑器的 d 属性内。

我对这些价值观感到困惑。因为当我移动路径元素时，两个值都在变化。谁能告诉我这些值之间的关系以及我通过哪个公式从另一个 X 值中得到一个 X 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:09:34.347

Inkscapes 生成干净的 SVG 代码的能力相当欠佳。您可能在那里看到绝对值和相对值，其中 XML 代码中的相对值可能`transform="translate(x,y)"`与节点本身或父节点中的 a 相关。

在旁注中，我认为 IE 无法读取转换属性。尝试在IE中打开它，如果它都坏了，那就是它;-)

# php - 禁用产品编辑Magento的“管理产品”领域？

> ID：13930238
> 
> 赞同：2
> 
> 时间：2012-12-18T09:49:47.177
> 
> 标签：php, magento

在 Magento Admin -> Catalog -> Manage Products 中，我想禁用几个产品字段，以便管理员无法编辑它们。

本质上是这样的： ![在此处输入图像描述](../Images/cc75c6b8c83f971b2be3d98a1a5efc14.png)

进入这个：![在此处输入图像描述](../Images/2e49e2d12a2a5251ca660a6264820a89.png)

`adminhtml/default/default/template/catalog/form/renderer/fieldset/element.phtml`Magento 通过模板 at ，通过函数将字段 HTML 拉入，`getElementHtml()`但我找不到`<input>`构建实际 HTML 的位置。

此外，可能还有一种更模块化的方式来执行此操作，而不仅仅是编辑模板的 HTML。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:59:33.403

我在这里发现了一个类似的问题，这使我找到了解决方案：

1.  打开`app\design\adminhtml\default\default\template\catalog\form\renderer\fieldset\element.phtml`

2.  找到读取的行`<?php $this->checkFieldDisable() ?>`

3.  在此下方，插入此块（将“sku”编辑为您需要的任何内容）：

`<?php`

`// Disable editing of SKU field`

`if ($_element->name == "sku") {`

`$_element->setDisabled(true);`

`}`

`?>`

可能有一种更优雅的方法可以做到这一点，例如在数据库中的某处设置“禁用”选项，但由于这些是系统属性，我对此表示怀疑。这行得通！

# javascript - 在jQuery / javascript中从头开始编写图像裁剪器和调整大小（同时）？

> ID：13930239
> 
> 赞同：15
> 
> 时间：2012-12-18T09:49:47.240
> 
> 标签：javascript, jquery, image, jquery-plugins, web

我们正在编写一个相当简单的 Javascript (jQuery) 图像裁剪器和调整器。基本上，就目前而言，真正需要的功能确实是**crop**和**resize**。

我一直在检查一些 jQuery 插件，如 JCrop 等，似乎没有插件同时做***这两***件事。许多裁剪器**或**调整器，但不是同一“自然”图像视图上的两个功能同时。自然，我的意思是像这样的例子（右下）在视觉上对用户来说不是很好：

[http://jsfiddle.net/opherv/74Jep/33/](http://jsfiddle.net/opherv/74Jep/33/)

虽然我想这可能是同时拥有这两个功能的一种方法。尽管您可以看到此示例当前仅放大了，但作者本人将其视为使用*“丑陋*的黑客”来做到这一点：

```
function changeZoom(percent){
    var minWidth=viewport.width();
    var newWidth= (orgWidth-minWidth)*percent/100+minWidth;
    var newHeight= newWidth/orgRatio;
    var oldSize=[img.width(),img.height()];

    img.css({ width: newWidth+"px", height: newHeight+"px" });

    adjustDimensions();

    //ugly hack :(
    if (img.offset().left+img.width()>dragcontainer.offset().left+dragcontainer.width()){
        img.css({ left: dragcontainer.width()-img.width() +"px" });  
    }
    if (img.offset().top+img.height()>dragcontainer.offset().top+dragcontainer.height()){
        img.css({ top: dragcontainer.height()-img.height() +"px" });  
    } 
} 
```

我们宁愿寻找在图像上使用裁剪器框架/区域（我们在网络上最常看到的）+ 缩放/去缩放选项（例如图像边框上的句柄）的可能性

由于我们只需要这两个功能，我们认为我们可以从头开始编写代码，或者几乎因为我们不想添加其他 javascript 文件/插件，因为这些文件/插件与我们不需要的其他功能一起打包（至少现在） .

**问题是：**在尝试对通过简单的句柄重新调整大小的图像的显示进行编码并通过框架/区域选择进行裁剪时是否存在特定的困难（它也可以自行调整大小并且可以拖动，以便用户可以微调他想要的图像的哪一部分）？

我们肯定更好地将这两个特征分开吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:44:23.307

试过这个插件？？

[http://code.google.com/p/resize-crop/](http://code.google.com/p/resize-crop/)

它既可以裁剪也可以调整大小

# google-chrome-extension - 如何使用 Tincr Google Chrome 扩展程序实时重新加载本地文件

> ID：13930245
> 
> 赞同：6
> 
> 时间：2012-12-18T09:50:06.973
> 
> 标签：google-chrome-extension, google-chrome-devtools

我现在尝试在 Windows 和 Linux (Ubuntu) 上使用 Tincr Chrome 扩展程序，当我在外部编辑器中编辑文件时，它似乎仍然没有执行它声称[在其网站上的 Live Reloading。](http://tin.cr/)Tin.cr 网站声称：

> 您在任何编辑器中所做的任何 CSS 或 JavaScript 更改都会在 Chrome 中重新加载，而无需刷新整个页面

为了进一步解释，我尝试将此扩展安装为 Chrome 中的解压缩扩展，并按照[Tincr 文档](http://tin.cr/docs.html)`chrome://chrome/extensions/`中的建议检查了开发人员模式。我也试过直接通过 Chrome Web Store 安装这个扩展。效果是一样的。

在设置 Tincr 方面，我尝试在没有使用 Web 服务器的情况下在本地打开文件`file://C:/htdocs/file.html`，Tincr 在其文档中声称它可以自动读取而无需任何设置，并且我尝试通过 Apache Web 服务器打开我的文件localhost 例如`localhost/file.html`并按照文档中的建议在 Tincr 中设置项目类型`Http Web Server`，但两种方法都无济于事。

在编辑本地文件方面，我使用了许多不同的外部编辑器，例如 Ubuntu 上的 Geany 和 Windows 上的 Titanium Studio。

在编辑器中编辑文件后，我在 Chrome 浏览器中打开了正在编辑的页面，并启用了 Tincr 插件。但是，在编辑器中保存我的文件并查看它是否在 Chrome 中实时重新加载后，没有任何反应。该文件只是保持不变。再次重申，这在 Windows 和 Linux (Ubuntu) 中都发生了。

所以我的问题是：有没有人成功地尝试使用外部编辑器使用这个扩展，如果是这样，你能否详细说明让实时重新加载工作的步骤，因为我开始认为这可能是扩展中的一个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T20:07:41.190

我想我可能有一个解释。查看 Tincr 的谷歌组，看来**Tincr 不支持 html 文件刷新**，并且它**只能检测 css 或 javascript 中的更改**。

来源：[https ://groups.google.com/forum/#!topic/tincr-for-chrome-devtools/VyC0mavLs_A](https://groups.google.com/forum/#!topic/tincr-for-chrome-devtools/VyC0mavLs_A)

# python - django删除自我而不是自我引用实体

> ID：13930246
> 
> 赞同：0
> 
> 时间：2012-12-18T09:50:08.697
> 
> 标签：python, django, django-models

我有以下示例模型：

```
class Note(models.Model):
    text = models.TextField()
    author = models.OneToOneField(User)
    date_created = models.DateField(auto_now_add=True)
    similar_note =  models.ForeignKey("self", related_name='similar_note', null=True, blank=True) 
```

假设有两个音符Winner 和Loser。

Loser 有一个字段similar_note 指向Winner Note。

当我删除两者中的任何一个时，两者都会被删除，我该如何防止这种情况发生？我也尝试从 django 管理界面做同样的事情，它也从那里发生。

PS：我用的是django1.2，请不要建议升级，限制太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:10:26.277

[如此处](https://docs.djangoproject.com/en/dev/topics/db/queries/#deleting-objects)所述：

> 当 Django 删除一个对象时，默认情况下它会模拟 SQL 约束 ON DELETE CASCADE 的行为——换句话说，任何具有指向要删除对象的外键的对象都将与它一起被删除。
> 
> 此级联行为可通过 ForeignKey 的 on_delete 参数进行自定义

请检查模型字段的[on_delete参数：](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)

```
user = models.ForeignKey(User, blank=True, null=True, on_delete=models.SET_NULL) 
```

# android - 有没有办法找出启动活动的 startActivity 意图标志？

> ID：13930252
> 
> 赞同：3
> 
> 时间：2012-12-18T09:50:21.500
> 
> 标签：android, android-activity

我想知道标志运行（例如前台）活动是从什么开始的？除了检查 logcat 之外，有没有办法做到这一点？有没有真正做到这一点的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:02:48.677

如果您对活动有参考，那么您可以执行以下操作：

```
Intent i=Activity.getIntent(); 
```

然后，

```
i.getFlags() 
```

将为您提供与活动相关的标志。

看：

*   [http://developer.android.com/reference/android/app/Activity.html#getIntent](http://developer.android.com/reference/android/app/Activity.html#getIntent) ()
*   [http://developer.android.com/reference/android/content/Intent.html#getFlags](http://developer.android.com/reference/android/content/Intent.html#getFlags) ()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-03T04:03:29.083

目前，为了调试，我使用这个函数来查看打开活动的标志

```
@RequiresApi(Build.VERSION_CODES.R)
fun getIntentFlag(flag: Int) : String{
    val flags = listOf<Pair<String, Int>>(
        Pair("Intent.FLAG_GRANT_READ_URI_PERMISSION",Intent.FLAG_GRANT_READ_URI_PERMISSION),
        Pair("Intent.FLAG_GRANT_WRITE_URI_PERMISSION",Intent.FLAG_GRANT_WRITE_URI_PERMISSION),
        Pair("Intent.FLAG_FROM_BACKGROUND",Intent.FLAG_FROM_BACKGROUND),
        Pair("Intent.FLAG_DEBUG_LOG_RESOLUTION",Intent.FLAG_DEBUG_LOG_RESOLUTION),
        Pair("Intent.FLAG_EXCLUDE_STOPPED_PACKAGES",Intent.FLAG_EXCLUDE_STOPPED_PACKAGES),
        Pair("Intent.FLAG_INCLUDE_STOPPED_PACKAGES",Intent.FLAG_INCLUDE_STOPPED_PACKAGES),
        Pair("Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION",Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION),
        Pair("Intent.FLAG_GRANT_PREFIX_URI_PERMISSION",Intent.FLAG_GRANT_PREFIX_URI_PERMISSION),
        Pair("android.content.Intent.FLAG_DEBUG_TRIAGED_MISSING (system)",256), // android.content.Intent.FLAG_DEBUG_TRIAGED_MISSING
        Pair("Intent.FLAG_IGNORE_EPHEMERAL (system)",512), // Intent.FLAG_IGNORE_EPHEMERAL
        Pair("Intent.FLAG_ACTIVITY_MATCH_EXTERNAL",Intent.FLAG_ACTIVITY_MATCH_EXTERNAL),
        Pair("Intent.FLAG_ACTIVITY_NO_HISTORY",Intent.FLAG_ACTIVITY_NO_HISTORY),
        Pair("Intent.FLAG_ACTIVITY_SINGLE_TOP",Intent.FLAG_ACTIVITY_SINGLE_TOP),
        Pair("Intent.FLAG_ACTIVITY_NEW_TASK",Intent.FLAG_ACTIVITY_NEW_TASK),
        Pair("Intent.FLAG_ACTIVITY_MULTIPLE_TASK",Intent.FLAG_ACTIVITY_MULTIPLE_TASK),
        Pair("Intent.FLAG_ACTIVITY_CLEAR_TOP",Intent.FLAG_ACTIVITY_CLEAR_TOP),
        Pair("Intent.FLAG_ACTIVITY_FORWARD_RESULT",Intent.FLAG_ACTIVITY_FORWARD_RESULT),
        Pair("Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP",Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP),
        Pair("Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS",Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS),
        Pair("Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT",Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT),
        Pair("Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED",Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED),
        Pair("Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY",Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY),
        Pair("Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET (deprecated)",Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET),
        Pair("Intent.FLAG_ACTIVITY_NEW_DOCUMENT",Intent.FLAG_ACTIVITY_NEW_DOCUMENT),
        Pair("Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET (deprecated)",Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET),
        Pair("Intent.FLAG_ACTIVITY_NO_USER_ACTION",Intent.FLAG_ACTIVITY_NO_USER_ACTION),
        Pair("Intent.FLAG_ACTIVITY_REORDER_TO_FRONT",Intent.FLAG_ACTIVITY_REORDER_TO_FRONT),
        Pair("Intent.FLAG_ACTIVITY_NO_ANIMATION",Intent.FLAG_ACTIVITY_NO_ANIMATION),
        Pair("Intent.FLAG_ACTIVITY_CLEAR_TASK",Intent.FLAG_ACTIVITY_CLEAR_TASK),
        Pair("Intent.FLAG_ACTIVITY_TASK_ON_HOME",Intent.FLAG_ACTIVITY_TASK_ON_HOME),
        Pair("Intent.FLAG_ACTIVITY_RETAIN_IN_RECENTS",Intent.FLAG_ACTIVITY_RETAIN_IN_RECENTS),
        Pair("Intent.FLAG_ACTIVITY_LAUNCH_ADJACENT",Intent.FLAG_ACTIVITY_LAUNCH_ADJACENT),
        Pair("Intent.FLAG_ACTIVITY_REQUIRE_NON_BROWSER",Intent.FLAG_ACTIVITY_REQUIRE_NON_BROWSER),
        Pair("Intent.FLAG_ACTIVITY_REQUIRE_DEFAULT",Intent.FLAG_ACTIVITY_REQUIRE_DEFAULT),
        Pair("Intent.FLAG_RECEIVER_REGISTERED_ONLY",Intent.FLAG_RECEIVER_REGISTERED_ONLY),
        Pair("Intent.FLAG_RECEIVER_REPLACE_PENDING",Intent.FLAG_RECEIVER_REPLACE_PENDING),
        Pair("Intent.FLAG_RECEIVER_FOREGROUND",Intent.FLAG_RECEIVER_FOREGROUND),
        Pair("Intent.FLAG_RECEIVER_NO_ABORT",Intent.FLAG_RECEIVER_NO_ABORT),
        Pair("Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT (system)",67108864),
        Pair("Intent.FLAG_RECEIVER_BOOT_UPGRADE (system)",33554432), // Intent.FLAG_RECEIVER_BOOT_UPGRADE
        Pair("Intent.FLAG_RECEIVER_INCLUDE_BACKGROUND (system)",16777216), // Intent.FLAG_RECEIVER_INCLUDE_BACKGROUND
        Pair("Intent.FLAG_RECEIVER_EXCLUDE_BACKGROUND (system)",8388608), // Intent.FLAG_RECEIVER_EXCLUDE_BACKGROUND
        Pair("Intent.FLAG_RECEIVER_FROM_SHELL (system)",4194304), // Intent.FLAG_RECEIVER_FROM_SHELL
        Pair("Intent.FLAG_RECEIVER_VISIBLE_TO_INSTANT_APPS",Intent.FLAG_RECEIVER_VISIBLE_TO_INSTANT_APPS),
        Pair("Intent.FLAG_RECEIVER_OFFLOAD (system)", 2147483648.toInt()), // Intent.FLAG_RECEIVER_OFFLOAD
    )

    val matchFlags = mutableListOf<Pair<String, Int>>()
    flags.forEach {
        if ((flag and it.second) != 0) {
            matchFlags.add(it)
        }
    }

    var testFlag = 0
    var matchFlagsString = ""
    matchFlags.forEach {
        matchFlagsString += " " + it.first + "(" + it.second + ")"

        testFlag = it.second or testFlag
    }
    Log.i("TAG", "test flag: $testFlag")

    return matchFlagsString
} 
```

使用

```
Log.i("TAG", "flag" + getIntent().flags)
Log.i("TAG", "extract flag" + getIntentFlag(getIntent().flags)) 
```

# php - mysql随机字段

> ID：13930253
> 
> 赞同：-5
> 
> 时间：2012-12-18T09:50:24.457
> 
> 标签：php, mysql

我现在有一个大约 800 列的 mysql 数据库，并且经常添加到它。

**如何添加一个包含 4 个字母和数字的随机字符串的新字段，例如：4h3k**

我也不希望重复发生。

谢谢各位！

编辑

哦，我的意思是行不是列。

800 行！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:03:53.593

正如评论已经表明的那样。为什么你会想要 800 列？似乎是您的数据库结构中的一个主要缺陷。也许您可以解释您要存储的内容，以便我们可以帮助您设置适当的结构。800（随机！）列永远不可能是你想要的。

如果您确实打算保留此结构，则可以使用`SHOW COLUMNS FROM mydb.mytable WHERE FIELD='newcolname'`它来查看它是否已经存在。

但我强烈建议重新考虑您的数据库模型。自从它的随机列以来，您甚至如何从中选择东西？您总是使用 select * 然后循环遍历所有列？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:26:48.430

这也许可以帮助你。

```
// first  u generate string with numbers and letters with length 4 
function genRandomString() {
$length = 4;
$characters = '0123456789abcdefghijklmnopqrstuvwxyz';
$string = '';    

for ($p = 0; $p < $length; $p++) {
    $string .= $characters[mt_rand(0, strlen($characters))];
}

 return $string;
 }
  echo genRandomString();        // will echo one radom string like  4h8l
 // second check if the random string exist in table then use new generated string
 $new_random_string = genRandomString() ;
 $strings = mysql_query("SELECT `string` FROM `table`");
 while ($string = mysql_fetch_row($strings)) {

 if ($new_random_string == $string[0]) 

   echo genRandomString() ;

 }

 mysql_query("INSERT INTO `table` (`string`) VALUES ('".$new_random_string."')"); 
```

# jmeter - 使用 Jmeter 测试 get 和 post http 请求

> ID：13930257
> 
> 赞同：1
> 
> 时间：2012-12-18T09:50:32.763
> 
> 标签：jmeter

我有一个负载测试应用程序。我为此目的使用 JMeter。我已将 CSV 数据集配置添加到 While 控制器，其中前者从 csv 文件中读取 URL。此外，我还在控制器中添加了一个 HTTP 请求采样器。

现在，我有 get 和 post requests 。除此之外，我还必须使用很少的 http post 请求发送文件数据。有没有办法让 jmeter 可以自动决定 http 请求类型并相应地创建请求？

我应该为 GET 和 POST 请求创建单独的 While 控制器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:29:25.133

您可以添加方法字段（post、get）并使用 IfController 来调用 post 或根据方法值获取。

看：

*   [http://jmeter.apache.org/usermanual/component_reference.html#If_Controller](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)

# objective-c - 如何在 MBProgress 对话框中单击关闭

> ID：13930261
> 
> 赞同：0
> 
> 时间：2012-12-18T09:50:40.267
> 
> 标签：objective-c, xcode4.5

我的代码：

打开对话框

![在此处输入图像描述](../Images/c95e1369f7b74843adee488229334d88.png)

```
- (void)viewDidLoad
{
    //Start
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"loading...";
} 
```

我正在使用`MBProgress` `HUD` 但我想对话框单击关闭
如何关闭对话框以单击关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:58:42.593

成功了！(Void) touchesEnded 事件必须使用

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
[MBProgressHUD hideHUDForView:self.view animated:YES];
} 
```

# ruby-on-rails-3 - 如何在rails3中将参数保存到xml文件

> ID：13930263
> 
> 赞同：0
> 
> 时间：2012-12-18T09:50:43.743
> 
> 标签：ruby-on-rails-3

我有一些控制器

并拥有@xyz 对象

```
@xyz = XYZ.new(params[:xyz]) 
```

我必须将所有字段从表单保存到 xml 文件。

那么步骤是什么。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:02:46.823

我认为以下应该有效

```
@xyz = XYZ.new(params[:xyz])
xml_string = @xyz.to_xml
File.open("some_file_name.xml", 'w') { |f| f.write(xml_string) } 
```

# java - List 的 Linkedlist 与 ArrayList 实现

> ID：13930264
> 
> 赞同：-3
> 
> 时间：2012-12-18T09:50:46.413
> 
> 标签：java, list

> **可能重复：**
> [何时在 ArrayList<> 上使用 LinkedList<>？](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)

这两个列表有什么区别？他们都实现了接口`List`，在什么情况下你会在 ArrayList 之上使用 LinkedList？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:52:11.357

一道经典的面试题。

阅读本文：[何时在 ArrayList 上使用 LinkedList？](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)或者只是谷歌它，那里有大量的信息。

在日常编程中，很少使用 LinkedList。但是，您应该明确了解这些差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:55:41.743

如果添加和删除元素的频率较大，则使用链表。在arraylist中，如果要从中间删除一个元素，则必须移动该元素之后的整个数组以填充空白位置。但是在链接的情况下列表中，每个元素都将链接到下一个元素。因此，删除一个元素需要将其前一个元素的指针更改为已删除元素的下一个指针。

但是，如果您正在寻找更多随机访问，那么请使用 arraylist ...

# c# - C#不会在子目录中显示大小

> ID：13930270
> 
> 赞同：1
> 
> 时间：2012-12-18T09:51:00.547
> 
> 标签：c#, winforms, directory

我调用以下函数来检查特定路径并从位于给定路径中的所有文件夹中获取列表，对于每个文件夹，它将检查文件夹大小。

如果我在这样的文件夹中有一个文件，这将有效。

> Givenfolderpath\Underlying_folder\file.txt

但是当有一个包含文件的子目录时，它不会给我文件夹的大小。

> Givenfolderpath\Underlying_folder\subdirectory\file.txt

这是我的代码。

```
public void ListFolders()
    {
        dataGridView1.Rows.Clear();
        DirectoryInfo di = new DirectoryInfo(Properties.Settings.Default.RevitPath);
        DirectoryInfo[] diArr = di.GetDirectories();

        foreach (DirectoryInfo dri in diArr)
        {
            string strCreateTime = dri.LastWriteTime.ToString();
            string strCreateDate = dri.LastWriteTime.ToString();
            string strCreateSize2 = null;
            string strCreateSizeMb = null;
            int strCreateSize3;

            long strCreateSize1 = GetDirectorySize(Properties.Settings.Default.RevitPath + @"\" + dri);
            string strCreateSize = GetSizeReadable(strCreateSize1);

            strCreateTime = strCreateTime.Remove(strCreateTime.LastIndexOf(" "));
            strCreateDate = strCreateDate.Remove(0,strCreateDate.LastIndexOf(" "));
            strCreateSize2 = strCreateSize.Remove(strCreateSize.LastIndexOf(" "));
            strCreateSizeMb = strCreateSize.Remove(0, strCreateSize.LastIndexOf(" "));
            strCreateSize3 = Convert.ToInt32(strCreateSize2);

            if (strCreateSizeMb == " Mb")
            {
                if (strCreateSize3 >= Properties.Settings.Default.FolderSize)
                {
                    notifyIcon1.ShowBalloonTip(20000, "Attention Required!", dri + " exceed the permissible size " + Properties.Settings.Default.FolderSize + " Mb", System.Windows.Forms.ToolTipIcon.Warning);
                }
            }

            int idx = dataGridView1.Rows.Add();
            DataGridViewRow row = dataGridView1.Rows[idx];
            row.Cells["User"].Value = dri;
            row.Cells["Date"].Value = strCreateTime;
            row.Cells["Time"].Value = strCreateDate;
            row.Cells["Size"].Value = strCreateSize2;
            row.Cells["SizeMB"].Value = strCreateSizeMb;
        } 
```

它哪里出错了？

它将像这样放置数据。

![数据网格中的数据](../Images/ccfb0b5ceb5fdc88a1130ed7d2ebbad7.png)

```
static long GetDirectorySize(string p)
        {
            // 1
            // Get array of all file names.
            string[] a = Directory.GetFiles(p, "*.*");
            // 2
            // Calculate total bytes of all files in a loop.
            long b = 0;
            foreach (string name in a)
            {
                // 3
                // Use FileInfo to get length of each file.
                FileInfo info = new FileInfo(name);
                b += info.Length;
            }
            // 4
            // Return total size
            return b;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:11:43.033

换线试试

```
DirectoryInfo[] diArr = di.GetDirectories(); 
```

和

```
DirectoryInfo[] diArr = di.GetDirectories("*", SearchOption.AllDirectories); 
```

这应该遍历给定目录中包含的所有目录。请参阅[MSDN：DirectoryInfo.GetDirectories Method (String, SearchOption)](http://msdn.microsoft.com/en-us/library/ms143325.aspx)和[MSDN：SearchOption](http://msdn.microsoft.com/en-us/library/ms143448.aspx)以供参考。

# iphone - [UIView setText:]: 无法识别的选择器发送到实例 0x89625d0

> ID：13930271
> 
> 赞同：1
> 
> 时间：2012-12-18T09:51:00.370
> 
> 标签：iphone, ios, uiview

[我试图在我的视图中添加一个自定义复选框......我在我的故事板上绘制了一个视图，并在名为UICheckbox](https://github.com/Brayden/UICheckbox)的第三方代码的帮助下我正在访问它。

UICheckbox.h

```
#import <UIKit/UIKit.h>

@interface UICheckbox : UIControl

-(void)setChecked:(BOOL)boolValue;
-(void)setDisabled:(BOOL)boolValue;
-(void)setText:(NSString *)stringValue;

@property(nonatomic, assign)BOOL checked;
@property(nonatomic, assign)BOOL disabled;
@property(nonatomic, strong)NSString *text;

@end 
```

UICheckbox.m

```
#import "UICheckbox.h"

@interface UICheckbox (){
    BOOL loaded;
} 

@property(nonatomic, strong)UILabel *textLabel;

@end

@implementation UICheckbox
@synthesize checked = _checked;
@synthesize disabled = _disabled;
@synthesize text = _text;
@synthesize textLabel = _textLabel;

- (void)awakeFromNib {
    self.backgroundColor = [UIColor clearColor];
}

-(void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:[NSString    stringWithFormat:@"uicheckbox_%@checked.png", (self.checked) ? @"" : @"un"]];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];

    if(self.disabled) {
        self.userInteractionEnabled = FALSE;
        self.alpha = 0.7f;
    } else {
        self.userInteractionEnabled = TRUE;
        self.alpha = 1.0f;
    }

    if(self.text) {
        if(!loaded) {
            _textLabel = [[UILabel alloc] initWithFrame:CGRectMake(self.frame.size.width +  5, 0, 1024, 30)];
            _textLabel.backgroundColor = [UIColor clearColor];
            [self addSubview:_textLabel];

            loaded = TRUE;
        }

        _textLabel.text = self.text;
     }
}

-(BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    [self setChecked:!self.checked];
    return TRUE;
}

-(void)setChecked:(BOOL)boolValue {
    _checked = boolValue;
    [self setNeedsDisplay];
}

-(void)setDisabled:(BOOL)boolValue {
    _disabled = boolValue;
    [self setNeedsDisplay];
}

-(void)setText:(NSString *)stringValue {
    _text = stringValue;
    [self setNeedsDisplay];
}

@end 
```

在我的`viewDidLoad`...

```
self.checkbox.text = @"Want to get the updates directly"; 
```

我像这样实施了这个动作

```
-(IBAction)testCheckbox:(id)sender {
    NSLog(@"checkbox.checked = %@", (self.checkbox.checked) ? @"YES" : @"NO");
} 
```

从情节提要的角度来看..我排列了插座并触及了各自的消息并得到了这个错误..

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-11T15:29:06.130

这很简单，但是当我在代码中更改插座类型时，我得到了完全相同的错误——看起来它仍然连接在情节提要中，但事实并非如此。我只需要将情节提要中的插座（例如标签）重新连接到代码插座。您不会想到这一点，因为插座仍标记为已连接，但如果您进行了更改，则不会。

# java - 从远程任务流返回

> ID：13930273
> 
> 赞同：2
> 
> 时间：2012-12-18T09:51:08.913
> 
> 标签：java, oracle, oracle-adf, bounded-types, adf-task-flow

![在此处输入图像描述](../Images/c16bc2a186a7cc20714c6d1d5a4eb3f4.png)如果调用任务流中定义了通配符入口点，是否可以从远程任务流返回而无需指定从远程任务流到消费者任务流（调用任务流）的返回控制流规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T22:19:06.693

我认为您仍然必须返回，尽管在返回到调用 TF 时，如果 TF 返回传递回一个可以评估的结果，它的通配符可能会导致导航到另一个页面/TF。

# c# - 如何调整表单或 FlowLayoutPanel 的大小以打印大于屏幕尺寸？

> ID：13930278
> 
> 赞同：1
> 
> 时间：2012-12-18T09:51:25.240
> 
> 标签：c#, .net, winforms, printing, flowlayoutpanel

我有一个表单，它的主面板是一个 FlowLayoutPanel，这正是我想要打印的（它被设计成看起来像一个格式很好的文档......没有按钮等......你右键单击命令）。

因此，我利用 DrawToBitmap 实现几乎免费的打印...针对该尺寸正确流动其内容。然后，我只使用 DrawToBitmap 将该 FlowLayoutPanel 及其所有内容呈现到打印页面。我什至可以通过将窗口增大到大于页面大小（相同的纵横比）来缩放以适应，然后缩小从 DrawToBitmap 获得的位图。效果很好...

但它仅在您的屏幕大于页面大小时才有效！因为任何将窗体或控件的大小调整为大于屏幕大小 + 任一方向 12 像素的尝试都会被阻止。

啊！！如果您要通过拒绝调整大于屏幕的大小来扼杀它的适用性，为什么要用 DrawToBitmap 的简单性和实用性来取笑我呢？（修辞）

我的问题：

有没有办法绕过这个限制并让 Form 或 FlowLayoutPanel 调整大小大于屏幕？

如果没有，有没有办法到达 FlowLayoutPanel 的滚动表面（不仅仅是滚动到视图中的部分），以便我可以调整它的大小以匹配打印页面，并且可以在其上调用 DrawToBitmap？

如果没有，是否有其他方法可以利用我现有的布局功能进行打印？或者我是否坚持重写所有 WinForms 代码只是为了生成相同的位图，如果我的屏幕比我的打印页面大，它已经生成了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:46:26.917

我不确定，但是否有可能虚拟地做到这一点。IE：

```
Dim FLP as FlowLayoutPanel = Form1.FlowLayoutPanel1
For Each flp_subobject as Object in FlowLayoutPanel.Children
    FLP.Children.Add(flp_subobject)
Next
FLP.Height = MASSIVEHEIGHT
FLP.Width = MASSIVEWIDTH
DrawToBitmapFunction(FLP) 
```

我就是这样做的，并不是说我在超出屏幕限制等方面有很多经验。让我知道这是怎么回事，因为它几乎是当场从我的脑海中浮现出来的：D

# visual-c++ - 0xC0000005：访问冲突。处理很多点时

> ID：13930282
> 
> 赞同：0
> 
> 时间：2012-12-18T09:51:31.480
> 
> 标签：visual-c++, access-violation

我必须使用一个旧的和蹩脚的VC6.0软件。

这部分代码处理点，针对一种3D打印机。当我得到很多分数（> 2 000 000）时，它会失败并显示“0xC0000005：访问冲突”

我真的卡住了，我不知道如何解决这个问题。代码不是我的。会不会是 malloc 太多，内存泄漏？

```
P_NOEUDP cstr_noeudp()
{
  P_NOEUDP N;

  N=(P_NOEUDP) malloc(sizeof(NOEUDP)); 
  N->classe=NULL; //Here it is 0xC0000005: Access Violation.
  N->face=NULL;
  N->arete_isolee=NULL;
  N->critere=NULL;
  N->data_list=NULL;
  return(N);
} 
```

这被称为：

```
P_SLICE_POINT tpp_Slice_Point_Cstr()
{
    P_SLICE_POINT pSPt;
    pSPt = (P_SLICE_POINT) malloc(sizeof(SLICE_POINT));
    pSPt->Node=cstr_noeudp();
    pSPt->Edge=NULL;
    return pSPt;
} 
```

这是标题：

```
struct S_NOEUDP
  {
    int          numero;
    double       courbureGaus;
    double       X[3];
    CLASSEMENT   *classe;
    LISTE        *face;
    LISTE        *arete_isolee;
    LISTE        *critere;
    P_DATA_LISTE data_list;
  };

typedef struct S_NOEUDP NOEUDP;
typedef NOEUDP *P_NOEUDP;

struct S_CLASSEMENT
  {
    int    type;
    int    etat;
    int    situation;
  };

typedef struct S_CLASSEMENT CLASSEMENT;
typedef CLASSEMENT *P_CLASSEMENT;

struct S_LISTE
  {
    int    type_liste;
    int    type_occurence;
    void   *occurence;
    int    type_reference;
    void   *reference;
    struct S_LISTE *svt;
    struct S_LISTE *prec;
  };

typedef struct S_LISTE LISTE;
typedef LISTE *P_LISTE;

struct S_DATA_LISTE
  {
   P_LISTE      data_liste;
     };

typedef struct S_DATA_LISTE DATA_LISTE ;
typedef DATA_LISTE  *P_DATA_LISTE ;

typedef struct S_SLICE_POINT SLICE_POINT;
typedef SLICE_POINT *P_SLICE_POINT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:18:48.380

所以，蹩脚的代码，充满了内存泄漏和没有错误控制......

接下来会发生什么：

*   由于内存泄漏导致内存填满（malloc 没有释放）
*   内存使用量达到 32 位限制，无法再分配
*   代码挂了，不知道为什么，因为没有malloc返回检查

# php - 基于类别显示所有帖子的 PHP 代码

> ID：13930292
> 
> 赞同：0
> 
> 时间：2012-12-18T09:51:58.583
> 
> 标签：php, wordpress, wordpress-theming

我希望在我的 wordpress 主页 index.php 中插入一行代码，它将显示除属于“日记”类别的帖子之外的所有帖子。

原代码行如下

```
<?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>
    <div <?php post_class(); ?>>
    <span class="postlabel"><a href="<?php the_permalink() ?>"><span><?php the_time('d'); ?></span><?php the_time('M'); ?></a></span>
        <h2 class="post-title"><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2> 
            <p class="info">
                <span class="catinfo"><?php _e('Filed in ', 'Mflat');?><?php the_category(' | ') ?></span>
                <span class="cmtinfo"><?php comments_popup_link( __( 'Leave a comment', 'Mflat' ), __( '1 Comment', 'Mflat' ), __( '% Comments', 'Mflat' ) ); ?><?php edit_post_link(' Edit', ' &#124; ', ''); ?></span>
            </p>
        <div class="entry">
            <?php $Mflat_options = get_option('Mflat_theme_options'); ?>
            <?php if ( $Mflat_options['home_excerpt_check']== 1 ) { the_excerpt(__('&raquo; Read more','Mflat')); } else {the_content(__('Continue Reading','Mflat'));} ?>
         </div>
        <?php wp_link_pages(array('before' => '<p><strong>Pages:</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>
            <p class="infobottom">
                <?php if(function_exists('the_views')): ?><span class="count"><?php the_views(); ?></span><?php endif; ?>
                <?php if (has_tag()): ?><span class="tags"><?php the_tags(' '); ?></span><?php endif; ?>
                </p>
    </div>
        <?php endwhile; ?>
    <div class="flip">
        <div class="prevpost"><?php next_posts_link(__('Older Entries', 'Mflat')) ?></div>
        <div class="nextpost"><?php previous_posts_link(__('Newer Entries', 'Mflat')) ?></div>
    </div>
<?php else : ?>
<div id="main">
 <h2><?php _e('Not Found', 'Mflat'); ?></h2>
</div>
    <?php endif; ?> 
```

我尝试了以下代码但无济于事

```
<?php if(have_posts()) : ?><?php while(have_posts()){
    <if(!in_category('Diary')){
        : the_post(); 
        }
    }?> 
```

有没有更好的方法可以完成这项工作？我是 PHP 新手，虽然我知道必须做什么的逻辑，但我不能完全生成代码来完成这项工作。我认为布尔值的工作量太大了，并且在明显溢出时发现了一个类似的（http://stackoverflow.com/questions/13587958/display-recent-posts-based-on-their-category-in-wordpress）线程但是它不太适合我的需要。

每一项贡献都受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:53:03.090

只需在循环之前运行[`query_posts()`](http://codex.wordpress.org/Function_Reference/query_posts)函数 - 它会改变循环

```
<?php
query_posts(array(
    'category_name' => 'my-category-slug', // get posts by category name
    'posts_per_page' => -1 // all posts
));
?>

<?php while(have_posts()): the_post(); ?>
    <h1><?php the_title(); ?></h1>

    <?php the_content(); ?>
<?php endwhile; ?> 
```

* * *

我的错，我刚刚注意到你想**排除**一个类别。相同的功能，不同的参数：

```
$category = get_term_by('name', $cat_name, 'category'); // get category
$id = $category->term_id; // get the category ID

query_posts('cat=-' . $id); // exclude the found ID 
```

* * *

```
<?php
$category = get_term_by('name', 'Diary', 'category'); // get category data
$id = $category->term_id; // get the category ID

// USE THIS IF YOU WANT TO _EXCLUDE_ ALL POSTS FROM "DIARY"
query_posts($query_string . '&cat=-' . $id);

// USE THIS IF YOU WANT TO GET ALL POSTS FROM "DIARY" ONLY
// query_posts($query_string . '&cat=' . $id);
?>

<?php if(have_posts()) : ?>
    <?php while(have_posts()) : the_post(); ?>
        <div <?php post_class(); ?>>
            <span class="postlabel"><a href="<?php the_permalink() ?>"><span><?php the_time('d'); ?></span><?php the_time('M'); ?></a></span>

            <h2 class="post-title"><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2> 

            <p class="info">
                <span class="catinfo"><?php _e('Filed in ', 'Mflat');?><?php the_category(' | ') ?></span>
                <span class="cmtinfo">
                    <?php comments_popup_link( __( 'Leave a comment', 'Mflat' ), __( '1 Comment', 'Mflat' ), __( '% Comments', 'Mflat' ) ); ?>
                    <?php edit_post_link(' Edit', ' &#124; ', ''); ?>
                </span>
            </p>

            <div class="entry">
                <?php $Mflat_options = get_option('Mflat_theme_options'); ?>
                <?php if ( $Mflat_options['home_excerpt_check']== 1 ) { the_excerpt(__('&raquo; Read more','Mflat')); } else {the_content(__('Continue Reading','Mflat'));} ?>
             </div>

            <?php wp_link_pages(array('before' => '<p><strong>Pages:</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

            <p class="infobottom">
                <?php if(function_exists('the_views')): ?><span class="count"><?php the_views(); ?></span><?php endif; ?>
                <?php if (has_tag()): ?><span class="tags"><?php the_tags(' '); ?></span><?php endif; ?>
            </p>
        </div>
    <?php endwhile; ?>

    <div class="flip">
        <div class="prevpost"><?php next_posts_link(__('Older Entries', 'Mflat')) ?></div>
        <div class="nextpost"><?php previous_posts_link(__('Newer Entries', 'Mflat')) ?></div>
    </div>
<?php else : ?>
    <div id="main">
        <h2><?php _e('Not Found', 'Mflat'); ?></h2>
    </div>
<?php endif; ?> 
```

# ios - 如何使 MKAnnotationView 在 MapKit 中更敏感？

> ID：13930298
> 
> 赞同：0
> 
> 时间：2012-12-18T09:52:11.107
> 
> 标签：ios, mapkit, mkannotation, callouts

我有一个大小为 16*16的自定义`MKAnnotationView`显示，当用户点击它时，我使用协议`UIImageView`

```
 - (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    [mapView setCenterCoordinate:view.annotation.coordinate];
}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [calloutView setHidden:!selected];
} 
```

弹出一个自定义的`calloutView`. 它可以正常工作。但有时可能需要两到三倍甚至更多时间才能使注释敏感并调用方法来显示`calloutView`. 有没有人遇到过这个问题，并且有一些解决方案可以解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:26:29.850

我已经解决了。我们必须给自定义`MKAnnotationView`的图像，并且用户交互绑定是图像的`CGSize`. 所以我制作了一个透明图像并将其分配给`MKAnnotationView`'s image 属性。

```
self.image=[UIImage imageNamed:@"transparent36.png"]; 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:13:58.507

您应该点击 的中心`MKAnnotationView`，并尝试添加

```
imageView.center = annotationView.center; 
```

尝试

# android - android复制文件不起作用？

> ID：13930299
> 
> 赞同：-1
> 
> 时间：2012-12-18T09:52:19.927
> 
> 标签：android

我尝试将文件从其他包“/data/data/targetPackage”复制到“/data/data/myPackate”，但它不起作用。我有请求`su`权限

```
p = Runtime.getRuntime().exec("su");   
// Attempt to write a file to a root-only  
DataOutputStream os = new DataOutputStream(p.getOutputStream());  
os.writeBytes("chmod 777 /data/data/targetPackage/databases"+"\n");  
// Close the terminal  
os.writeBytes("exit\n");  
os.flush();  
try 
{  
    p.waitFor();  
    if (p.exitValue() != 255) 
    {  
      // TODO Code to run on success  
      toastMessage("root");  
      //accsessDB();
    }  
    else 
    {  
       // TODO Code to run on unsuccessful  
       toastMessage("not root");  
    }  
} 
catch (InterruptedException e) 
{  
   // TODO Code to run in interrupted exception  
   toastMessage("not root");  
} 
```

和这个代码副本

```
File f=new File("/data/data/targetPackage/databases/targetFile");
InputStream input = new FileInputStream(f);
new File("/data/data/myPackate/databases").mkdir();
File f2=new File("/data/data/myPackate/databases/targetFile");
OutputStream output = new FileOutputStream(f2,true);    
byte[] buf= new byte[1024];
toastMessage(Integer.toString(input.read(buf)));
int len;
while((len=input.read(buf))>0) 
{
    output.write(buf, 0,len);
}
output.close();
input.close(); 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:03:49.120

**试试这个它会工作..**

```
private void copyFile()
 {
     try{
     if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
        } else {
            File file = new File(Environment.getExternalStorageDirectory()
                 +File.separator
                 +"App"
                 +File.separator                         
                 +"app"
                 +File.separator
                 +"images"
                 +File.separator
                 ); //file name
            file.mkdirs();
            File source= new File(filePath);
            File destination= new File(file,nameimage);
            newloc=Environment.getExternalStorageDirectory()+"/"+"App"+"/"+"app"+"/"+"images"+"/";
           newimgloc=Environment.getExternalStorageDirectory()+"/"+"App"+"/"+"app"+"/"+"images"+"/"+nameimage;
            if (source.exists()) {
                FileChannel src = new FileInputStream(source).getChannel();
                FileChannel dst = new FileOutputStream(destination).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();

                File dir = Environment.getExternalStorageDirectory();
                if(dir.exists()){

                    toname=generatePin();
                    File from = new File(newloc,nameimage);
                    File to = new File(newloc,toname+".jpg");                       
                     if(from.exists())
                        from.renameTo(to);
                     filePath=newloc+toname+".jpg";
                     nameimage=toname+".jpg";
                     filedel();
                }

            }
        }
    }catch (Exception e) {

         System.out.println(e);
         Toast.makeText(getApplicationContext(), "Catch",Toast.LENGTH_SHORT).show();
    } 
```

}

# google-chrome - Chrome 在最新测试版中对 MathML 的支持

> ID：13930305
> 
> 赞同：0
> 
> 时间：2012-12-18T09:52:37.227
> 
> 标签：google-chrome, mathml

根据[这个](http://blog.chromium.org/2012/11/a-web-developers-guide-to-latest-chrome.html)公告并感谢 Dave Barton，chrome 应该在最新的 beta 版本中支持 MathML。我正在运行版本 24.0.1312.40 测试版，但 MathML 似乎已关闭，因为我无法呈现[此](http://www.mathjax.org/demos/mathml-samples/)页面上的示例。如何打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:39:34.623

根据 Dave Barton 的说法，谷歌再次暂时停用了 Chrome 24 中的 MathML 支持。它应该很快再次打开并进入最终版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T01:21:59.003

Chrome 24 稳定版于上周发布，开启了*MathML*。

[http://googlechromereleases.blogspot.co.uk/2013/01/stable-channel-update.html](http://googlechromereleases.blogspot.co.uk/2013/01/stable-channel-update.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:36:27.287

尝试使用 MathJax 上下文菜单将数学渲染器设置为 MathML（在数学设置子菜单中）。您可能会收到不支持 MathML 的警告，但可以继续设置它。

虽然 MathML 的 WebKit 实现对 Dave Barton 的努力有了很大的改进，但您可能仍然发现它不足以满足您需要查看的方程式，因此请注意，并非所有内容都可以在 Chrome 的原生 MathML 模式下正确显示。

# regex - awk 脚本中的语法错误

> ID：13930310
> 
> 赞同：1
> 
> 时间：2012-12-18T09:53:05.130
> 
> 标签：regex, bash, awk

运行 awk 脚本时出现语法错误，该脚本是：

```
awk -F\" 'for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}' 
```

实际数据的示例如下（封闭和管道分隔）：

```
"data"|"data"|"data"|"data"|"data" 
```

正如您从代码中看到的那样，我想要做的是：读取所有字段，如果字段是数字（始终是十进制），则用逗号替换该点。我还尝试在 gsub 函数中转义逗号：

```
awk -F\" 'for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,\,,$1) }}' 
```

但它并没有解决问题，你知道问题出在哪里吗？与正则表达式的比较看起来很好，循环和 if 语句也是，错误消息是

```
 awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1: ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:            ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                     ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                           ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                                                 ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                                                          ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                                                           ^ syntax error
awk: cmd. line:1: for( i = 1 ; i <= NF; i++){if ($i == "^[0-9]+$"){ gsub(.,,,$1) }}
awk: cmd. line:1:                                                              ^ 1 is invalid as number of arguments for gsub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:00:21.610

这条线可能对你有用：

```
awk  'BEGIN{FS=OFS="\""}{for(i=1;i<=NF;i++)if($i~/[0-9\.]*/)gsub("\\.",",",$i)}1' file 
```

测试 ：

```
kent$  echo '"1000.18"|"4.8"|"data"|"data"|"3.5"'|awk  'BEGIN{FS=OFS="\""}{for(i=1;i<=NF;i++)if($i~/[0-9\.]*/)gsub("\\.",",",$i)}1'
"1000,18"|"4,8"|"data"|"data"|"3,5" 
```

您的代码中的问题是：

*   你的 for 循环应该用`{}`
*   你应该使用`~`, 而不是`==`正则表达式匹配
*   即使您使用了〜，您的正则表达式也不正确。`^[0-9]+$`仅匹配数字，不匹配 20.8。因为有一个点
*   在 gsub 中，第一个参数是要替换的正则表达式。如果你只是在里面放一个点。它意味着任何字符。你必须逃避它，让 gsub 知道你只想替换“点”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:00:59.377

您之前缺少一个花括号。你可以这样尝试

```
awk -F\" '{for(i=1;i<=NF;i++){if($i=="^[0-9]+$"){gsub(".",",",$1); }}}' 
```

# facebook - Facebook相册查询和图形api返回空集

> ID：13930317
> 
> 赞同：-1
> 
> 时间：2012-12-18T09:53:26.680
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql

我已经编写了一个代码来获取所有专辑名称来列出它。当我使用 javascript 编写代码时，它返回给我一个空集。

```
FB.api('/me/albums', function(response) {

}); 
```

我也试过查询。它还给我一个空集

```
SELECT aid,owner,name FROM album WHERE owner = me(). 
```

我的帐户中有专辑，但它仍然返回空集。请帮我弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:43:06.013

在参数列表中包含 access_token

```
 FB.api('/me/albums?access_token=' + accessToken, function(response) { }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:44:53.120

确保用户已授权应用程序并在查询中提供访问令牌；

```
FB.api('/me/albums?access_token=ACCESS_TOKEN', function(response) 
{
    console.log(response);

}); 
```

# rule - 如何从 booggie2 的脚本中执行规则？

> ID：13930322
> 
> 赞同：1
> 
> 时间：2012-12-18T09:53:44.400
> 
> 标签：rule, booggie

有没有办法在脚本中调用一个规则（或多个规则）并执行它？

请注意：booggie 项目不再存在，但导致开发了涵盖相同功能的[Soley Studio 。](https://www.soley.io/en/pr-soley-studio/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:53:44.400

是的！

有两种情况：

*   您知道要应用哪个规则：

```
 thisRule = transformation.GetRuleByName("myRule")
        thisRule.Apply(param1, param2, ...) 
```

确保规则参数 param1, param2, ... 的类型正确！

*   您不知道要应用哪个规则：

```
 rules = transformation.GetRulesWithParams(0)
        rules[0].Apply() 
```

在这种情况下，可能只使用没有参数的规则，因为您必须提供正确类型的规则参数。在这里，所有不带参数的规则都存储在列表中`rule`，并应用第一个规则。您还可以使用`rules[0].Name`.

# php - Symfony2：以编程方式启动会话

> ID：13930323
> 
> 赞同：2
> 
> 时间：2012-12-18T09:53:46.503
> 
> 标签：php, session, symfony

我希望我的应用程序中有一个全局监听器在会话超时后重定向用户。

我正在收听以下`kernel.exception`事件`SessionUnavailableException`：

```
public function onKernelException(GetResponseForExceptionEvent $event)
{
    $exception =  $event->getException();
    if ($exception instanceof SessionUnavailableException) {
        //start new session and set flash here...
        $response = new RedirectResponse($this->router->generate('homepage'));
        $event->setResponse($response);
    }
} 
```

此代码在会话超时后执行。问题是如果我像这样离开代码，异常将在无限循环中触发。我需要在此处开始并保存会话，但找不到如何执行此操作...

有什么帮助吗？

顺便问一下，这是实现我目标的聪明方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T02:32:15.403

我认为您可以添加以下代码来启动会话：

```
use Symfony\Component\HttpFoundation\Session\Session; 
```

和...

```
$session = new Session();
$session->start(); 
```

..然后您可以设置闪存消息：

```
$session->getFlashBag()->add(
                    'warning',
                    'El tiempo de su sesión se ha agotado. Por favor, vuelva a ingresar al sistema.'
); 
```

# c# - Gridview 在 PageIndexChanging 上不起作用

> ID：13930326
> 
> 赞同：1
> 
> 时间：2012-12-18T09:53:53.090
> 
> 标签：c#, gridview, data-binding, datasource, page-index-changed

我正在使用没有数据源的gridview。页面上`PageIndexChanging`是空白的。

我的后端代码是：

```
protected void gridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    Gen_Lic_Grid.PageIndex = e.NewPageIndex;
    Gen_Lic_Grid.DataBind();
} 
```

我的前端代码是：

```
 <asp:GridView ID="Gen_Lic_Grid" runat="server" AllowPaging="True" AutoGenerateColumns="False" CellPadding="4" DataKeyNames="Lic_No" ForeColor="#333333" GridLines="None" OnPageIndexChanging="gridView_PageIndexChanging" PageSize="15" Width="110%">
   <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <Columns>
 <asp:BoundField DataField="Lic_No" HeaderText="License No" ReadOnly="True" SortExpression="Lic_No" />
 <asp:BoundField DataField="UserID" HeaderText="User ID" SortExpression="UserID" />
 <asp:BoundField DataField="Org" HeaderText="Organization" 
                                    SortExpression="Org" />
 <asp:BoundField DataField="UserName" HeaderText="User Name" SortExpression="UserName" />
 <asp:BoundField DataField="SolType" HeaderText="Solution Type" SortExpression="SolType" />
<asp:BoundField DataField="Version" HeaderText="Version" SortExpression="Version" />
<asp:BoundField DataField="Lic_Type" HeaderText="License Type" SortExpression="Lic_Type" />
<asp:BoundField DataField="Meap_Supp" HeaderText="Meap Support" SortExpression="Meap_Supp" />
<asp:BoundField DataField="Lic_From" HeaderText="License From" SortExpression="Lic_From" />
<asp:BoundField DataField="Lic_To" HeaderText="License To" SortExpression="Lic_To" />
<asp:BoundField DataField="Supp_From" HeaderText="Support From" SortExpression="Supp_From" />
<asp:BoundField DataField="Supp_To" HeaderText="Support To" SortExpression="Supp_To" />
<asp:BoundField DataField="Max_User" HeaderText="Max Users" SortExpression="Max_User" />
<asp:BoundField DataField="Max_Mach" HeaderText="Max Machines" SortExpression="Max_Mach" />
<asp:BoundField DataField="Mach_IP" HeaderText="Machine IP" SortExpression="Mach_IP" />
<asp:BoundField DataField="Mach_MAC" HeaderText="Machine MAC" SortExpression="Mach_MAC" />
</Columns>
<FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
<PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
<SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
<HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
<EditRowStyle BackColor="#999999" />
<AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:54:42.427

您需要在调用之前设置数据源`Gen_Lic_Grid.DataBind();`。

```
protected void gridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    Gen_Lic_Grid.PageIndex = e.NewPageIndex;
    Gen_Lic_Grid.DataSource = MyVariable;
    Gen_Lic_Grid.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:58:25.570

我认为你应该使用`PageIndexChanged`event 而不是`PageIndexChanging`. 我想你还没有使用过`NeedDataSource`事件。

# java - 与 XmlBeanFactory 相关的转换错误

> ID：13930327
> 
> 赞同：0
> 
> 时间：2012-12-18T09:53:54.943
> 
> 标签：java, spring

尝试运行 Junit 测试时出现此错误。这一行：

```
 AppConfig.getGatewayConfigurations().getURL(); 
```

在某些地方工作正常。我也没有与 XML 文件的路径有关的问题。并且类 GatewayConfigurations 构建得很好，并且它的属性在 bean 配置文件中分配得很好！

这是痕迹

```
java.lang.ClassCastException: org.springframework.beans.factory.xml.XmlBeanFactory cannot be cast to com.me.vpc.configurations.GatewayConfigurations
at com.me.vpc.configurations.AppConfig.getGatewayConfigurations(AppConfig.java:26)
at com.me.vpc.test.PaymentQueryStringBuilderThirdPartyTest.buildQueryStringTest(PaymentQueryStringBuilderThirdPartyTest.java:34)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)
at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)
at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)
at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)
at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)
at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)
at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)
at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

PaymentQueryStringBuilderThirdPartyTest 类

```
package com.me.vpc.test;

import static org.junit.Assert.*;

import java.io.UnsupportedEncodingException;
import java.util.HashMap;
import java.util.Map;

import org.junit.Before;
import org.junit.Test;
import com.me.vpc.common.PaymentQueryStringBuilderThirdParty;
import com.me.vpc.configurations.AppConfig;

 public class PaymentQueryStringBuilderThirdPartyTest {

@SuppressWarnings("rawtypes")
private Map parameters;

@SuppressWarnings({ "unchecked", "rawtypes" })
@Before
public void setUp() throws Exception {

    parameters = new HashMap();

    parameters.put("vpc_Merchant", "MER123");
    parameters.put("vpc_OrderInfo", "A48cvE28");
    parameters.put("vpc_Amount", "2995");
}

@Test
public void buildQueryStringTest() throws UnsupportedEncodingException {

    String URL = AppConfig.getGatewayConfigurations().getURL();

    String expectedQueryString = URL + "?vpc_Merchant=MER123&vpc_OrderInfo=A48cvE28&vpc_Amount=2995";

    assertEquals(expectedQueryString, PaymentQueryStringBuilderThirdParty.buildQueryString(parameters));
}

} 
```

AppConfig 类

```
public class AppConfig {

/**
 * Default xml configurations file
 */
private final static String APP_CONFIG_FILE = "vpc-configurations.xml";

/**
 * Load gateway configurations
 * @return GatwayConfigurations object
 */
public static GatewayConfigurations getGatewayConfigurations(){

    return (GatewayConfigurations)getBeans();
}

/**
 * Get the desired configuration bean
 * @param beanName
 * @return BeanFactory object
 */
private static BeanFactory getBeans()
{
    return new XmlBeanFactory(new FileSystemResource(APP_CONFIG_FILE));
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:41:50.290

查看[XmlBeanFactory](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/xml/XmlBeanFactory.html)的 API ，我看不出它是如何转换的`com.me.vpc.configurations.GatewayConfigurations`（这并不奇怪，因为您已经创建了该类/接口）。

`getBeans()`返回 a `XmlBeanFactory`，并将其`getGatewayConfigurations()`强制转换为`GatewayConfigurations`. 这永远不会奏效。

# c# - webapp 的“InSingletonScope”到底有多长？

> ID：13930331
> 
> 赞同：4
> 
> 时间：2012-12-18T09:54:14.187
> 
> 标签：c#, asp.net-mvc-4, ninject

我刚刚被 Ninject.Mvc3 NuGet 包弄湿了，我想知道创建的对象能持续多久。

`InRequestScope`很容易理解：只要网络服务器正在处理特定的网络请求，在这个范围内创建的每个对象都会存在。（为了迂腐，对象和对象一样长`HttpContext.Current`）

但是这些`InSingletonScope`物体能持续多久？文档说，只要 Ninject Kernel 本身执行 - 它就包含在`NinjectWebCommon`静态类中。到目前为止，我做出的最好的猜测是，只要服务器运行 webapp，内核就会存在——只要服务器启动，直到应用程序在 IIS 中手动重新启动或更新，对象就在范围内。

我很好奇，因为我很想拥有一些包含只读数据字典的数据访问器作为 Singleton Scope，我想知道这是一个好主意，还是计划中的内存泄漏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:58:29.730

只要您的 ASP.NET 应用程序池持续存在，它就会持续存在。

您的应用程序池何时会回收？有许多设置可以控制这一点：阅读[为应用程序池配置回收设置 (IIS 7)](http://technet.microsoft.com/en-us/library/cc753179%28v=ws.10%29.aspx)。

不过，基本上，它不会永远存在：如果您想在其中存储只读数据，只需确保将其全部加载，`Application_Start()`以便在请求进入时准备好，您应该一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:02:29.710

你是对的。只要应用程序池正在运行，您的单例就会存在。为什么您可能想要关闭应用程序池回收。

对于我的大多数网站，我将设置缓存在静态类中（或使用 Ninject 或 StructureMap 作为单例），并将数据缓存在线程安全字典中。这当然会消耗内存，但它不是内存泄漏。按设计工作。

# tibco-rv - 如何在 TibRV 中找到哪个客户端 CMName 正在等待确认？

> ID：13930334
> 
> 赞同：2
> 
> 时间：2012-12-18T09:54:24.540
> 
> 标签：tibco-rv

我已经为 TibcoRV 和账本文件启用了认证消息传递，该文件不断增长导致我的应用程序最终死机。

通过完全控制该框（访问 TibRV Web 界面、分类帐文件本身），是否可以确定哪个 CMName 使用连接到我们的应用程序的客户端未确认消息（即我们正在等待来自的 ACK）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:20:33.183

至少有两种方法可以检查分类帐文件

*   **使用名为reviewLedger**的 Hawk 方法（例如通过 Hawk Display）。如果您的应用程序是使用 TIBCO BusinessWorks（或 TIBCO 适配器）构建的，则此功能可用
*   使用**ledgerpeek**命令行工具（来自 TIBCO 的人员软件）检查文件

# iphone - XCode 在 Windows 7 上安装了软件？

> ID：13930337
> 
> 赞同：-6
> 
> 时间：2012-12-18T09:54:51.443
> 
> 标签：iphone, xcode, windows-7

> **可能重复：**
> [为什么没有适用于 Windows 的 Xcode？](https://stackoverflow.com/questions/2065343/why-isnt-there-xcode-for-windows)

我想使用 XCode 软件进行 iPhone 开发。

我没有mac电脑，有没有办法在windows7上做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:59:40.860

您可以使用双启动选项在 Windows OS 系统上启动 Mac OSX，请参考此[链接](http://www.windows7hacker.com/index.php/2010/04/how-to-dual-boot-mac-os-x-and-windows-7-complete-work-through/)。

# mysql - mysql客户端端口

> ID：13930341
> 
> 赞同：4
> 
> 时间：2012-12-18T09:55:10.063
> 
> 标签：mysql, connection, port

我正在使用 C API 调用连接到远程 MySQL 服务器（在默认端口 3306 上）[`mysql_real_connect()`](http://dev.mysql.com/doc/en/mysql-real-connect.html)。

1.  如何发现客户端主机上使用了哪个 TCP 端口？

2.  是否可以指定我希望使用的端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:19:01.027

## 1

您可以使用`lsof`. 在您的外壳中键入以下内容：

```
$ lsof | grep TCP 
```

然后查找您的 mysql 服务器正在侦听的端口。

您也可以使用`netstat`. 详情可通过`man netstat`.

## 2

据我所知，你不能。

# jquery - 同位素可点击元素：同时只打开一个div

> ID：13930342
> 
> 赞同：0
> 
> 时间：2012-12-18T09:55:10.977
> 
> 标签：jquery, jquery-isotope

对于公司的团队页面，我将使用 Isotope 按位置过滤。单击图像后，该人的电话号码、邮件等信息应该会显示出来。

这工作得很好，但现在我有一个问题，我被困在一个点上。我怎样才能一次只打开一个人的信息框？

例如：我点击图片一，信息显示 - 然后当我点击图片二时，第一个人应该关闭，这样只有第二个人的信息是打开的。同时只有一个信息框。

这是我到目前为止所拥有的，完整的代码。 [http://jsfiddle.net/qeMam/1/](http://jsfiddle.net/qeMam/1/)

这是我的代码

```
// change size of clicked element
$container.find('.teamcontent').live('click', function() {
if ($(this).is('.large')) {
jQuery('.teaminfo', this).fadeToggle("fast", "linear");
$(this).toggleClass('large');
$container.isotope('reLayout');

} else {
jQuery('.large > .teaminfo'); 
$container.find('.large').removeClass('large');
jQuery('.teaminfo', this).fadeToggle("fast", "linear");
$(this).toggleClass('large');
$container.isotope('reLayout');
}
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:04:09.010

每次点击一个，需要先隐藏`teaminfo`再显示点击的那个：

```
// change size of clicked element
    $container.find('.teamcontent').live('click', function() {
        if ($(this).is('.large')) {

            jQuery('.teaminfo', this).fadeToggle("fast", "linear");
            $(this).toggleClass('large');
            $container.isotope('reLayout');

        } else {
            //*********** added this line *************
            jQuery('.teaminfo').hide();
            jQuery('.large > .teaminfo');
            $container.find('.large').removeClass('large');
            jQuery('.teaminfo', this).fadeToggle("fast", "linear");
            $(this).toggleClass('large');
            $container.isotope('reLayout');
        }
    }); 
```

见小提琴：http: [//jsfiddle.net/qeMam/2/](http://jsfiddle.net/qeMam/2/)

# php - javascript php和html上的动态滑块

> ID：13930345
> 
> 赞同：1
> 
> 时间：2012-12-18T09:55:22.717
> 
> 标签：php, javascript, jquery, html, slider

我有此代码用于创建动态数量的滑块，每个滑块具有动态数量的答案，但我无法理解我的代码的两件事：

1.  为什么只显示一个滑块？（我的 sql 表上的第一个 id 滑块编号）

2.  为什么金额框中只出现正确的ini值？移动滑块时出现`A r r a y`（每次移动滑块一个字符）？

    ```
    <script>            
        var arrayslidersvalueanswers="<?= $tableslidersanswervalues ?>";                
        <?php foreach ($tableslidersqid as $qid) { ?>
          <?php foreach ($qid as $index) { ?>               
            <?php echo $index;?>                    
            <?php foreach ($tableslidersanswersid as $qanswerid) { ?>
              <?php foreach ($qanswerid as $indexanswer) { ?>

        var answers="<?= $qanswerid ?>";                    
        var qid= "<?= $index ?>";

        jQuery(document).ready(function(){          

            /////////////////////SLIDER !!!!!!!!!!!!!!!!!!!!!!!!!!!
            var valor="<?= $tableslidersanswervalues[1][0] ?>"; // Ini slider

            $(document.getElementById("amount"+qid+"[]")).val(valor);

            $(document.getElementById("slider"+qid+"[]")).slider({ 
                                   min: 1,
                                   max:arrayslidersvalueanswers.length,

                                   slide: function( event, ui) {
                                       var ans=answers[0][1] ;
                                       $(document.getElementById("amount"+qid+"[]")).val(answers[ui.value-1][0]);

                                       } //end slider ini method builder

                 });//END OF FUNCTION
               });
            });// end JavaScript document function

                <?php } ?>
              <?php } ?>
             <?php } ?>
          <?php } ?>

    </script>

    <html>
        <p>
        <label for="amount< ?= $row_Answer['QuestionIDFK'];?>">< ?php echo $row_questionset['QuestionValue']; ?>< /label>
        <input type="text" id="amount< ?= $row_Answer['QuestionIDFK'];?>[]" name="amount< ?= $row_Answer['QuestionIDFK'];?>[]"  />
        </p>                   
        <div id="slider< ?= $row_Answer['QuestionIDFK'];?>[]" name="slider< ?php echo $row_Answer['AnswerValue']; ?>[]" >< /div>
    </html> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:30:43.760

您的 HTML 中只有一个滑块。

我认为您的 foreach 循环应该遍历您的 HTML 以生成更多标记和滑块。然后您可以在 jquery 中使用通用选择器来使所有滑块工作。

```
$("div[id^='slider']").slider(... 
```

将选择 ID 以“slider”开头的所有 div。

您的代码的结构方式应该是：

```
<script>
  $(("div[id^='slider']").slider(//slider configuration here);
</script>

<html>
  <?php foreach($allTableValues as $table): ?>
    <label>...
    <input>....
    <slider id="slider_<?php echo $table->id ?>">...
  <?php endforeach; ?>
</html> 
```

# c# - 从类型对象转换为类型

> ID：13930350
> 
> 赞同：0
> 
> 时间：2012-12-18T09:55:30.813
> 
> 标签：c#, casting, runtime

考虑我的代码：

```
public class MyClass
{
//...
}

object ob = new MyClass();
Type t = ob.GetType(); 
```

有了这些信息，我需要在运行时进行`ob`转换。`MyClass`我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:06:46.687

**[`Convert.ChangeType`](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)**就是你要找的。

```
// With ob and t from your example.
var myClassInstance = Convert.ChangeType(ob, t); 
```

但正如一些人所建议的那样，最好首先知道为什么需要这个。您解决问题的方法很可能有异味，并且可以更容易地完成，无需任何类型的功夫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:59:37.367

假设`MyClass`在编译时已知：

```
object ob = new MyClass();

if (ob.GetType() != typeof(MyClass))
        MyClass convertedObject = (MyClass)ob; 
```

# magento - Magento 不保存任何数据

> ID：13930352
> 
> 赞同：1
> 
> 时间：2012-12-18T09:55:35.853
> 
> 标签：magento, magento-1.7

我刚刚注意到我的 Magento 商店已停止保存任何类型的输入数据 - 无论是静态块、产品还是 CMS 页面。

一旦我单击“保存”或“保存继续”，它只是在加载，并没有真正发生任何事情。我已经在所有主要浏览器中对此进行了测试，并且到处都会出现错误。有没有办法进一步调试并确定问题？一些专家的帮助将不胜感激。

我正在使用 Magento 1.7.0.2 - 最近没有安装/更新新的扩展，而且几天前它运行良好。

# android - 黑色空间和向下移动视图

> ID：13930357
> 
> 赞同：0
> 
> 时间：2012-12-18T09:55:50.930
> 
> 标签：android, android-layout, android-tablelayout

我有个问题。当我将一个项目聚焦在顶部时锁定和解锁手机后，视图会向下移动。当我将一个项目聚焦在底部时，视图移动到起始位置。当我开始一项新的活动并回到家中时，一切都很好。

![在此处输入图像描述](../Images/d71ddcc23cc2b339d267a154ef3e3e86.png)

布局代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/settings_bg" >

<TableLayout
    android:id="@+id/base_tiles_table"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:focusable="true"
    android:focusableInTouchMode="true">
</TableLayout>

<include layout="@layout/bottom_navigation" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:10:56.250

为什么只有 1 个子元素时要设置权重？尝试这个 ：

```
<TableLayout
    android:id="@+id/base_tiles_table"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="true"
    android:focusableInTouchMode="true">
</TableLayout> 
```

如果此表格布局与底部的导航重叠，请执行以下操作：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/settings_bg" >

    <TableLayout
        android:id="@+id/base_tiles_table"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:focusable="true"
        android:focusableInTouchMode="true">
    </TableLayout>

<include layout="@layout/bottom_navigation" /> 
```

当您使用框架布局时，您可以使视图/布局重叠。

# php - 在 safari mac 上的 ckeditor 中，form 标签被 p 标签替换

> ID：13930358
> 
> 赞同：0
> 
> 时间：2012-12-18T09:55:56.130
> 
> 标签：php, javascript, ckeditor, wysiwyg

我正在运行 CKeditor 3 并注意到当我将表单字段粘贴到源并点击保存时。如果我然后重新加载页面并打开编辑器，表单标签已被 ap 标签替换。

如何在不升级到 ckeditor4 的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:26:29.083

Its an issue of browser, and not a CKEditor: [http://dev.ckeditor.com/ticket/8590](http://dev.ckeditor.com/ticket/8590) . As a short conclusion, here is the quote:

> If browser strips down the nested form then this means that CKEditor receives this reduced code. There is no way CKEditor can get to that code before the browser so it simply does not know about the missing form tag.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T19:41:04.247

如果您使用的是 DIV EDIT CONTAINER 插件，这可能是您的问题。

下载标准 CKeditor 包。安装。编辑页面。转到源视图。输入表单标签、输入字段和关闭表单标签。退出源视图，然后返回源视图。没问题。

返回 CKeditor 下载器并添加 DIV EDIT CONTAINER 插件。重复上述步骤。注意 form 标签是如何被变形为 ap 标签的。

这太糟糕了，因为我喜欢能够使用站点范围的样式表来编辑页面。

# linux - 将 cscope 样式数据库实时更新为 vi(m)。为什么还没有呢？

> ID：13930360
> 
> 赞同：0
> 
> 时间：2012-12-18T09:56:08.310
> 
> 标签：linux, vim, cscope

我很想知道为什么 vi(m) 从来没有前进并将 cscope 样式数据库集成到其中。在使用 Linux 内核代码导航时，我发现

> vim + ctags + cscope

是必须的。尽管 ctags 和 vim 确实可以作为一个 cscope 工作，但仍然不能。最近，我在 www.Linux.com 上阅读[了](http://www.linux.com/news/special-feature/linux-developers/681876-30-linux-kernel-developers-in-30-weeks-chris-mason)一篇关于 Brtfs 维护者 Chris Mason 的采访文章。他提到如果将 cscope 集成到 vim 中并且知道它的好处会更好，我支持该声明。

我的问题是为什么还没有完成？如果有人曾经尝试过这样做，会面临哪些困难导致放弃这项任务？

就个人而言，如果时间允许，我想自己深入研究一下。但是任何背景信息肯定会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:29:59.727

好吧，cscope 已集成到 Vim 中，请参阅`:help :cscope`. 与 ctags 类似，Vim 将调用外部工具并解析其输出。与 ctags 一样，这为您提供了一组命令来查询其数据库。这对您来说可能已经足够了，或者您将使用插件来使处理更易于使用。（比如我用[easytags.vim](http://www.vim.org/scripts/script.php?script_id=3114)自动更新ctags数据库；cscope可能有类似的插件。）

如果您正在谈论将完整的 cscope 功能直接包含在 Vim 中，那将违反 Vim 作为通用工具的设计准则；毕竟，cscope 是一种编程语言范围非常有限（没有双关语）的工具。在我看来，在 Vim 中包含一个特殊的命令和解析器已经很重要了。但是你可以在[vim_dev 邮件列表](http://www.vim.org/community.php)中搜索有关 cscope 的讨论，或者直接在那里询问当前 cscope 集成级别的原因，或者最终提出一个补丁来更改它。

# sharepoint - Infopath 2010：如果时间超过任何日期的 18:00，则日期和时间选择器操作

> ID：13930361
> 
> 赞同：0
> 
> 时间：2012-12-18T09:56:08.433
> 
> 标签：sharepoint, infopath2010

正如标题所说，我有一个信息路径表单，如果时间大于 18:00，我想在提交时运行额外的操作，但它可以是任何日期。

我尝试使用 2 个单独的字段，但这让 SharePoint 感到不安（数据进入 SharePoint 日历，因此不使用 2 个单独的字段）

谢谢你的帮助

刘易斯

# java - 基于底层实现的输出对象

> ID：13930363
> 
> 赞同：1
> 
> 时间：2012-12-18T09:56:21.557
> 
> 标签：java, design-patterns

我有以下基本接口：

```
public interface Value{

double getValue();
} 
```

我想有几个不同的`Outputter`接口，它们可以根据值的具体类型来接受一个集合并输出它们，所以我可以有一个值类，它有 10 个其他重要字段，也应该输出。我知道这很好地属于访问者模式，但我担心的是：每个输出器总是会得到一个特定类型的值的列表，所以理论上我可以提供 MeanValue、StdDevValue 等类型的列表。我不是确定如何很好地设计这个，因为值是由另一个接口生成的，所以事实上，我只是持有对 Collection 的引用，我不想将它向下转换，然后在 Outputter 上调用特定的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:54:15.030

访问者模式不涉及任何转换。这就是重点。

以下是 Visitorised 价值观家族的核心：

```
interface Value {
    double getValue();
    void accept(ValueVisitor visitor);
}

interface ValueVisitor {
    public void visit(MeanValue value);
    public void visit(StdDevValue value);
}

class MeanValue implements Value {
    @Override
    public double getValue() {
        // whatever
    }

    @Override
    public void accept(ValueVisitor visitor) {
        visitor.visit(this);
    }
}

class StdDevValue implements Value {
    @Override
    public double getValue() {
        // whatever
    }

    public int getDegreesOfFreedom() {
        // here's a subclass-specific method
    }

    @Override
    public void accept(ValueVisitor visitor) {
        visitor.visit(this);
    }
} 
```

这是输出位：

```
abstract class Outputter implements ValueVisitor {
    public void output(Collection<? extends Value> values) {
        for (Value value : values) {
            value.accept(this);
        }
    }
}

class PrintingOutputter extends Outputter {
    @Override
    public void visit(MeanValue value) {
        System.out.println("Mean: " + value.getValue());
    }

    @Override
    public void visit(StdDevValue value) {
        System.out.println("Std Dev: " + value.getValue() + " (" + value.getDegreesOfFreedom() + ")");
    }
} 
```

您可以将 an`Outputter`与混合值的集合或特定类型的集合一起使用：

```
 List<Value> mixedValues = /* whatever */;
    outputter.accept(mixedValues);

    List<MeanValue> meanValues = /* whatever */ ;
    outputter.accept(meanValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:00:11.020

这不只是简单的多态性吗？即您希望每个具体类都能`Outputter`适当地实现。

```
public interface Outputter {
   String output(); // implement this...
} 
```

访问者模式是为调用类和被调用类之间的中介而设计的。所以调用类调用一个方法并传递自己，被调用（访问）类回调。eg

```
public interface Outputter {
   String output(Caller c); // implement this...
} 
```

并且实现可能如下所示：

```
public String output(Caller c) {
   c.doWhatever(getValue());
   c.doAnotherThing(getAnotherValue());
} 
```

请注意每个实现（类型）的实现有何不同`Outputter`

# android - AsyncTask 没有按照逻辑正确执行

> ID：13930364
> 
> 赞同：0
> 
> 时间：2012-12-18T09:56:27.787
> 
> 标签：android, android-asynctask, openstreetmap

我在尝试根据给定的一组位置及其纬度和经度值下载不同缩放级别的 OSM 特定图块时遇到问题。

我要做的是确定左上/下角和右上角/右下角的 MapTile 编号，然后循环这些数字以下载图块。现在，我正在尝试在构造函数中下载高于给定缩放级别 1 和低于 1 的缩放级别。

```
public class MapDownload extends AsyncTask<String, Void, String>{

int zoom;
private ArrayList<GeoPoint> places;
private Coordinates topRight = new Coordinates(); // a java class I did for myself
private Coordinates bottomRight = new Coordinates();
private Coordinates topLeft = new Coordinates();
private Coordinates bottomLeft = new Coordinates();

public MapDownload(ArrayList<GeoPoint> placeList, int zoom){ 
    this.places = placeList;
    this.zoom = zoom;
}

@Override
protected String doInBackground(String... params) {
    // TODO Auto-generated method stub

        for (int w = zoom -1 ; w <= zoom +1; w++){

            double maxLat = 0.0;
            double maxLon = 0.0;
            double minLat = 0.0;
            double minLon = 0.0;

            for(GeoPoint point: places) {
                double lon = (double) ( point.getLongitudeE6() / 1E6 * 1.0);
                double lat = (double) (point.getLatitudeE6() / 1E6 * 1.0);
                    if(lat > maxLat) {
                        maxLat = lat;
                    }
                    if(lat < minLat || minLat == 0.0) {
                        minLat = lat;
                    }
                    if(lon> maxLon) {
                        maxLon = lon;
                    }
                    if(lon < minLon || lon == 0.0) {
                        minLon = lon;
                    }
            }
            topRight = topRight.gpsToMaptile(maxLon, maxLat, w); //top right
            bottomRight = bottomRight.gpsToMaptile(maxLon, minLat, w); //bottom right
            topLeft = topLeft.gpsToMaptile(minLon, maxLat, w); //top left
            bottomLeft = bottomLeft.gpsToMaptile(minLon, minLat, w); //bottom left

            for (int x = topLeft.getYTile(); x < bottomLeft.getYTile(); x++){
                for(int y = topLeft.getXTile(); y < bottomRight.getXTile(); y++){
                    try {
                        String urlStr = "http://a.tile.openstreetmap.org/"+ w +"/"+y+"/"+x+".png";
                        URL url = new URL(urlStr);
                        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
                        InputStream in = new BufferedInputStream(urlConnection.getInputStream());
                        File newFileDir = new File(Environment.getExternalStorageDirectory().toString() 
                            + "/downloadMap/test/"+w+"/"+y);
                        newFileDir.mkdirs();
                        File newFile = new File(newFileDir, x+".png");
                        OutputStream output = new FileOutputStream(newFile);
                        int read;
                        while ((read = in.read()) != -1) {
                            output.write(read);
                            output.flush();
                        }
                        urlConnection.disconnect();
                } catch (Exception e) {
                    Log.e("URL::: ERROR", e.getMessage());
                    e.printStackTrace();
                }
            }

        }
    }
    return null;
} 
```

在我的 MainActivity 类中，这就是我调用此 AsyncTask 的方法：

```
public class MainActivity extends Activity implements LocationListener, MapViewConstants {

    public void onCreate(Bundle savedInstanceState) {
        MapDownload mapDownload = new MapDownload(placeList, 12);
        mapDownload.execute("");  
    }
} 
```

当我为 int x 和 int y （对于单个缩放层）进行循环时，一切都很好。然而，一旦我用 int w 放置第三个循环（循环不同的缩放级别），事情开始变得混乱，它开始将每个图块下载到手机中。

我已经单独测试了代码逻辑（通过打印 urlStr），它确实可以确定下载所需的特定 MapTiles。然而，相同的代码放在这个 AsyncTask 类中时不起作用，这让我相信这样的代码可能对 AsyncTask 的实现有问题。

希望有人能指出我的错误。谢谢！

# python - 使用三次样条在 Pandas 中插值时间序列

> ID：13930367
> 
> 赞同：5
> 
> 时间：2012-12-18T09:56:32.523
> 
> 标签：python, pandas

我想使用三次样条填充我的 DataFrame 中的列中的空白。如果我要导出到列表，那么我可以使用 numpy 的`interp1d`函数并将其应用于缺失值。

有没有办法在熊猫中使用这个功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T11:23:12.857

大多数 numpy/scipy 函数只要求参数是“array_like”，[`iterp1d`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html)也不例外。幸运的是，Series 和 DataFrame 都是“array_like”，所以我们不需要离开 pandas：

```
import pandas as pd
import numpy as np
from scipy.interpolate import interp1d

df = pd.DataFrame([np.arange(1, 6), [1, 8, 27, np.nan, 125]]).T

In [5]: df
Out[5]: 
   0    1
0  1    1
1  2    8
2  3   27
3  4  NaN
4  5  125

df2 = df.dropna() # interpolate on the non nan
f = interp1d(df2[0], df2[1], kind='cubic')
#f(4) == array(63.9999999999992)

df[1] = df[0].apply(f)

In [10]: df
Out[10]: 
   0    1
0  1    1
1  2    8
2  3   27
3  4   64
4  5  125 
```

*注意：我想不出一个例子来将 DataFrame 传递给第二个参数（`y`）......但这也应该有效。*

# ios - 从 Social.framework(iOS6) 获取 Facebook 访问令牌

> ID：13930371
> 
> 赞同：22
> 
> 时间：2012-12-18T09:56:39.093
> 
> 标签：ios, facebook, facebook-graph-api, ios6

我需要检索我在设置应用程序中设置的系统帐户的 Facebook 访问令牌。

我知道 Social.framework(iOS6) 知道我所有的 FB 帐户信息，并且我可以使用 SLRequest 类对 Graph API 执行 API 调用，就像在这篇文章中一样[http://blogs.captechconsulting.com/blog/eric-stroh/ios- 6-tutorial-integrating-facebook-your-applications](http://blogs.captechconsulting.com/blog/eric-stroh/ios-6-tutorial-integrating-facebook-your-applications)

但是，我的问题是 - 如何检索我的 Facebook 系统帐户的访问令牌？

我找到了 Twitter [https://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)的解决方案，但你能帮我处理 Facebook

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-26T18:48:52.353

如果您已经知道如何设置帐户存储，下面的代码显示了如何获取访问令牌：

```
@property (strong, nonatomic) ACAccountStore *accountStore;
@property (strong, nonatomic) ACAccount *fbAccount;

...

@synthesize accountStore = _accountStore;
@synthesize fbAccount = _fbAccount;

...

// Initialize the account store
self.accountStore = [[ACAccountStore alloc] init];

// Get the Facebook account type for the access request
ACAccountType *fbAccountType = [self.accountStore
    accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

// Request access to the Facebook account with the access info
[self.accountStore requestAccessToAccountsWithType:fbAccountType
                                           options:fbInfo
                                        completion:^(BOOL granted, NSError *error) {
    if (granted) {
        // If access granted, then get the Facebook account info
        NSArray *accounts = [self.accountStore
                             accountsWithAccountType:fbAccountType];
        self.fbAccount = [accounts lastObject];

        // Get the access token, could be used in other scenarios
        ACAccountCredential *fbCredential = [self.fbAccount credential];            
        NSString *accessToken = [fbCredential oauthToken];
        NSLog(@"Facebook Access Token: %@", accessToken);

        // Add code here to make an API request using the SLRequest class

    } else {
        NSLog(@"Access not granted");
    }
}]; 
```

# java - 如何设置 Windows 通知图标在 Java 中出现的时间长度

> ID：13930372
> 
> 赞同：4
> 
> 时间：2012-12-18T09:56:40.110
> 
> 标签：java, notifications, timeout, system, tray

我制作了一个连接到服务器的 java 应用程序和一个 Windows 系统托盘通知弹出窗口，它在应用程序断开连接并重新连接时提醒用户。这是代码：

```
Image iconDisconnected = new
ImageIcon(this.getClass().getResource(iconDisconnectedLocation)).getImage();
trayIcon = new TrayIcon(iconDisconnected);
trayIcon.displayMessage("caption", "message", TrayIcon.MessageType.INFO); 
```

但是，此图标仅出现几秒钟。有没有办法让它出现更长时间？我已尝试阅读手册并进行搜索，但找不到任何有关此的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:04:13.420

不，消息显示取决于您的操作系统。但是您可以自己使用 JDialog、JOptionPane 或 JWindow 创建一个通知，并使其出现在适当的位置。

该图标会一直保留在系统托盘中，直到您的 Java 程序关闭或您自己将其删除。

# routing - 点在 Kohana 3.2 路线

> ID：13930373
> 
> 赞同：0
> 
> 时间：2012-12-18T09:56:49.357
> 
> 标签：routing, kohana-3.2

我正在为我的 Kohana 3.2 网站创建动态站点地图，但遇到了下一个错误。如果我使用点“。”，路线将不起作用。在里面。像这样（http://localhost/sitemap.xml）：

```
Route::set('sitemap', 'sitemap.xml')
->defaults(array(
'controller' => 'static',
'action' => 'sitemap')); 
```

在这种情况下，一切正常（http://localhost/sitemap）：

```
Route::set('sitemap', 'sitemap')
->defaults(array(
'controller' => 'static',
'action' => 'sitemap')); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:41:10.047

这会做你问的

```
Route::set('sitemap', 'sitemap.<format>', array( 'format' => 'xml'))
  ->defaults(array(
     'controller' => 'static',
     'action' => 'sitemap',
  )); 
```

这条路线将允许您使用其他“文件名”作为操作，只需使用管道分隔支持的格式。例如`'xml|rss|json'`等

```
Route::set('static', '<action>.<format>', array( 'format' => 'xml'))
  ->defaults(array(
     'controller' => 'static',
     'action' => 'sitemap',
  )); 
```

# sql-server-2008 - 如何使用 ADO 更新 SQL 表中的行

> ID：13930380
> 
> 赞同：2
> 
> 时间：2012-12-18T09:57:23.243
> 
> 标签：sql-server-2008, asp-classic

我有一个页面显示包含用户信息的用户表。我希望能够通过单击每行末尾的按钮来更新表中的一行。我对编码完全陌生，所以如果有人可以帮助我并将他们的答案“简化”一点，我将非常感激。

谢谢！

这是我尝试过的代码，但似乎无法让它工作。

```
<html>
<body>

<%
Dim conn, oRs, ID, sql
Set Conn=Server.CreateObject("ADODB.Connection")
ID = Request.Form("ID")

If Request.Form("ID")="" then
  Set oRs=Server.CreateObject("ADODB.Recordset")
  oRs.open "SELECT * FROM tICTStaff WHERE ID ='" & ID & "'",Conn
  %>
  <form method="post" action="employeeUpdate.asp">
  <table>
  <%for each x in oRs.Fields%>
  <tr>
  <td><%=x.name%></td>
  <td><input name="<%=x.name%>" value="<%=x.value%>"></td>
  <%next%>
  </tr>
  </table>
  <br /><br />
  </form>
<%
Else
  sql="UPDATE table_name SET "
  sql=sql & "Forename ='" & Request.Form("Forename") & "',"
  sql=sql & "Surname ='" & Request.Form("Surname") & "',"
  sql=sql & "Active ='" & Request.Form("Active") & "',"
  sql=sql & "Address ='" & Request.Form("Address") & "',"
  sql=sql & "DOB ='" & Request.Form("DOB") & "',"
  sql=sql & " WHERE ID ='" & ID & "'"
  on error resume next
  Conn.Execute sql
  If err<>0 then
        Response.Write("Error updating Record!")
  Else
        Response.Write("Record " & ID & " was updated!")
  End If
End if
Conn.close
%>
<meta HTTP-EQUIV="REFRESH" content="0; url=Page.index.asp?msg=The record has been updated!">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:24:09.177

You have several problems in your script.

1.  **SQL injection!** Inform yourself about SQL injection and rewrite your entire script to avoid that! Do it first before you do anything else.
2.  You are testing if `Request.Form("ID")` is `""`. But in your select you are using it although it is an empty string.
3.  When using `on error resume next` in classic asp, you have to "switch off" error handling by using `on error goto 0`. Otherwise the `on error resume next` will be used for the rest of your script.
4.  What are you trying to achieve by that `refresh` meta tag?

My suggestion to you is the following:

1.  **Read about about SQL injection**.
2.  Try to make a page which just lists the records from `tICTStaff`.
3.  Then make a second page for editing those records. When you click on the edit button on the first page, navigate to your edit page and load that specific record from `tICTStaff`.
4.  On your edit page, make a comfortable form and implement the update routine for that specific record.

On your overview site make links like so:

```
<%
Set oRs = Server.CreateObject("ADODB.Recordset")
oRs.open "SELECT * FROM tICTStaff", Conn
do while not oRS.eof %>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td><a href="update.asp?id=<%=oRS.fields("ID").value%>">link to detail/update page</a></td>
  </tr>
  <% oRS.movenext
loop %> 
```

on your update.asp page load the record with the id from the querystring and display the form like so:

```
<%
dim myID : myID = request.querystring("ID")
if myID = "" then myID = request.form("ID")

' update record
if request.form("submit01") = "update" then
  sql = "update tICTStaff set fieldName1 = ? WHERE ID = ?"
  set cmd = server.createobject("adodb.command")
  cmd.activeconnection = Conn
  cmd.CommandType = adCmdText
  cmd.commandtext = sql

  cmd.parameters.append cmd.createparameter("fieldName1", adVarchar, , 512, request.form("fieldName1") )
  cmd.parameters.append cmd.createparameter("id", adInteger, , , myID )
  set oRS = cmd.execute
end if

' load record
sql = "select * from tICTStaff where id = ?"

set cmd = server.createobject("adodb.command")
cmd.activeconnection = Conn
cmd.CommandType = adCmdText
cmd.commandtext = sql
cmd.parameters.append cmd.createparameter("id", adInteger, , , myID )
set oRS = cmd.execute

' now you have a recordset with the record from tICTStaff with the ID
%>
<!-- display the form -->
<form name="" method="post">
<input type="hidden" name="id" value="<%=myID%>">

<!-- more fields to be edited -->
<input type="text" name="fieldName1" value="<%=oRS.fields("fieldName1").value%>">

<input type="submit" name="submit01" value="update">
</form> 
```

**completely different solution (ajax based):**

As you want some kind of "mass update" function for the whole table, try jQuery with an AJAX call. So, on click of the button at the end of each row, you send an AJAX request to your ASP site with the values of the input fields *and* the ID of the record (the primary key of the `tICTStaff` table).

On the ASP page, you process the AJAX request and generate an UPDATE statement to update the `tICTStaff` table like so:

```
UPDATE tICTStaff
SET fldname1 = fldVal1, fldname2 = fldVal2
WHERE ID = postedID 
```

To read about jQuery AJAX, have a look [here](http://api.jquery.com/jQuery.post/).

# c# - 请求被中止：无法创建 SSL/TLS 安全通道 - SecurityProtocol 行为

> ID：13930384
> 
> 赞同：6
> 
> 时间：2012-12-18T09:57:47.367
> 
> 标签：c#, .net, ssl-certificate, ssl

将证书安装到.NET 的`Local Computer`存储中后仍然抛出：`Trusted Root Certification Authorities``WebRequest`

```
The request was aborted: Could not create SSL/TLS secure channel 
```

`ServicePointManager.SecurityProtocol`现在包含`SecurityProtocolType.Ssl3`| `SecurityProtocolType.Tls`.

阅读 Simon Dugré 的回答[https://stackoverflow.com/a/2904963/121968](https://stackoverflow.com/a/2904963/121968)后，我设置了：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

它工作正常。重新设置后：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls; 
```

它仍然**可以正常工作**。我有两个问题：

1.  为什么它仍然有效？有缓存吗？

2.  为什么它以前只使用 flag`Ssl3`而不是使用`Ssl3`and `Tls`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:53:17.453

有 SSL/TLS 会话恢复，可能就是你的情况。也许您没有共享 TLS1 密码套件。最好的检查方法是运行 Wireshark，然后查看你的连接的 SSL 数据包，它们在 Wireshark 中有很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T23:28:37.983

我的解决方案是添加以下行：

```
 ServicePointManager.Expect100Continue = True
 ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 Or SecurityProtocolType.Tls 
```

# android - android软键盘按键事件

> ID：13930386
> 
> 赞同：0
> 
> 时间：2012-12-18T09:58:06.253
> 
> 标签：android

我创建了自定义键盘，在其中设置了以下属性。我想在按下时更改关键图像，就像我们以同样的方式使用按钮一样。按下时如何更改键图标？

```
 <Row>
        <Key
            android:id="@+id/key1"
            android:codes="8"
            android:keyEdgeFlags="left"
            android:keyIcon="@drawable/k1" />
        <Key
            android:codes="9"
            android:iconPreview="@drawable/k2hover"
             android:keyIcon="@drawable/k2" />
        <Key
            android:codes="10"
            android:iconPreview="@drawable/k3hover"
            android:keyEdgeFlags="right"
             android:keyIcon="@drawable/k3" />
    </Row> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:05:25.260

尝试：

```
row.setOnKeyPressed(new OnKeyPressed() {
    //Add the unimplemented methods
}); 
```

# python - 芹菜部署策略

> ID：13930388
> 
> 赞同：0
> 
> 时间：2012-12-18T09:58:12.730
> 
> 标签：python, django, celery

我有一个构建任务服务器的任务，我决定使用 Celery。我的想法是：

1.  在机器 1 上构建一个 celery worker 服务器
2.  一个 Web 集群由一些运行 Django 的 Web 服务器组成。

网站有一些任务`Django`必须告诉机器 1 上的 celery 服务器工作。例如 ：

当新用户注册时，`Django`代码会以某种方式调用 celery worker 发送电子邮件。我阅读了有关 celery 的文档，但我找不到任何文档来告诉我如何向机器 1 调用“发送电子邮件”任务并要求机器 1 发送电子邮件。

任何的想法 ？非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:10:15.287

当你一起使用 django 和 celery 时，看看 django-celery，

[http://docs.celeryproject.org:8000/en/latest/django/](http://docs.celeryproject.org:8000/en/latest/django/)

# mysql - 在mysql中创建一个复杂的变量

> ID：13930393
> 
> 赞同：4
> 
> 时间：2012-12-18T09:58:30.750
> 
> 标签：mysql, variables, select

我对 MySQL 语法有疑问。我生成了一张包含真实飞机航班和想象飞机航班的表格：

```
Flight_ID 虚构
12345678 0
12345678 1
12345678 1
12345678 1
23456789 0
23456789 1
23456789 1
ETC......

```

虚构的航班与`Flight_ID`生成它们的真实航班相同。该`Imaginary`列指示它是真实的`0`还是虚构的`1`飞行。

我需要创建一个名为的新变量`Type`，该变量将指示它是真正的航班，还是选项1、选项2、选项3……

我找不到创建这些选项 1、选项 2、选项 3 模态的正确语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:46:32.317

试试这个：

```
SELECT Flight_ID, Imaginary, IF(Imaginary=0, @img:=0, TRUE) ignoreThisCol, 
       IF(Imaginary=0, 'real flight', CONCAT('option',  @img:=@img+1)) flightType , 
       IF(Imaginary=0, @curFlight:=Flight_ID, TRUE) ignoreThisCol
FROM flights, (SELECT @curFlight:=0, @img:=0) a
ORDER BY Flight_ID, Imaginary 
```

# fractals - Julia集和mandelbrot集有什么关系？

> ID：13930409
> 
> 赞同：2
> 
> 时间：2012-12-18T09:59:46.990
> 
> 标签：fractals, mandelbrot

我写了一个曼德布罗集，我读过关于朱莉娅集的文章，它非常相似，但究竟是什么关系？我可以使用 mandelbrot 公式画出 Julia 集吗？什么是起始参数？阅读我的曼德布罗集代码：

```
 function complex_iterate($re,$im)
     {
           $re=strval($re);
           $im=strval($im);
           $zisqr = $zrsqr = $iter = $zIm = $zRe = "0";
           bcscale(50);

           while (floatval(bcadd($zrsqr,$zisqr)) < 4
               && $iter < $this->iterations
           )
           {
                 $zIm = bcmul($zIm,$zRe);
                 $zIm = bcadd($zIm,$zIm);
                 $zIm = bcadd($zIm,$im);
                 $zRe = bcadd(bcsub($zrsqr,$zisqr),$re);
                 $zrsqr = bcmul($zRe,$zRe);
                 $zisqr = bcmul($zIm,$zIm);
                 ++$iter;
            }
            return $iter; 
```

我不确定这意味着 mandelbrot 集对 z 进行迭代，而 julia 集对 c 进行迭代？我是否需要更改代码？

更新：我更改了我的代码，但它不起作用。我的想法是从 $re 和 $im 而不是 0 开始：

```
 $zisqr = $zrsqr = $iter = 0;
    $zIm=$im;
    $zRe=$re;
    $re="-0.7";
    $im="0.27015"; 
```

更新2：我忘了这个：

```
 $zrsqr = $zRe*$zRe;
    $zisqr = $zIm*$zIm; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:36:00.220

正如我所见，您是 Mandelbrot 和 Julia 的新手，这里有一些定义可以了解这种关系。

*   Mandelbrot 地图：您计算并以图形方式可视化的地图
*   Mandelbrot 集：地图上那些趋于无穷的点（您通常将其涂成黑色。通常显示的 Mandelbrot 图片上那些闪亮的彩色部分**不是**Mandelbrot 集的一部分）
*   连续地图：集合上的点彼此相邻（您可以从任意点开始遍历整个地图）
*   岛屿地图：场景中的点是孤立的（你不能从起点走遍整个地图）

只有一个 Mandelbrot 集，而 Julia 集是无限的，并且一些定义说 Mandelbrot 集是所有 Julia 集的索引集。

换句话说：您可以从某个限制内的任何点计算 Julia 集（但是，如果您取较大的值，则结果可能为空）。如果您选择的点不是 Mandelbrot 集的一部分（可视化时它不是黑色像素），则生成的 Julia 集将包含岛屿。但是，如果您选择的点是 Mandelbrot 集的一部分（可视化时为黑色像素），则生成的 Julia 集将是连续的。

# xslt-2.0 - 在 XSLT 中获取兄弟节点的值

> ID：13930412
> 
> 赞同：0
> 
> 时间：2012-12-18T10:00:06.617
> 
> 标签：xslt-2.0

我有以下 XML

```
<CN>12<CN>
<CT>XYXY</CT> 
```

我需要结果 AS

```
<DIV>12  XYXY</DIV> 
```

我正在使用流动的 XSLT，但它不起作用

```
<xsl:variable name="x"><xsl:value-of  select="CN"/></xsl:variable>

<xsl:template match="CT">
 <div class="chap-title"><span><xsl:value-of select="$x"/></span></div>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:08:24.767

输入：

```
<input>
    <CN>12</CN>
    <CT>XYXY</CT>
</input> 
```

XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="2.0">

    <xsl:output indent="yes"
                method="xml"
                encoding="UTF-8" />

    <xsl:template match="/input">
        <DIV>
            <xsl:value-of select="CN"/>
            <xsl:text>  </xsl:text>
            <xsl:value-of select="CT"/>
        </DIV>
    </xsl:template>

</xsl:stylesheet> 
```

# c - 如何将产品行迭代到C中的列

> ID：13930416
> 
> 赞同：1
> 
> 时间：2012-12-18T10:00:17.660
> 
> 标签：c, matrix, do-while

我有以下问题：我有一个矩阵 nxn（一个多数组 A[n][n]）和一个向量 b[i]，我用它在这两个数组之间做一行到列的乘积并生成一个新数组c[i]。

代码的第一部分工作正常：

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
int main (void){

    double A[4][4]={{0,0,1,0.5},{0.33,0,0,0},{0.33,0.5,0,0.5},{0.33,0.5,0,0}};
    double b[4]={0.25,0.25,0.25,0.25};
    double c[4]={0.,0.,0.,0.};
    int n,i,j;

    for(i=0;i<4;i++){
        for(j=0;j<4;j++){

            c[i] += A[i][j]*b[j];
        }
    }

    for(i=0;i<4;i++){
        printf("c[%d]=%lf\n",i,c[i]);  

    }
    printf("\n");
} 
```

通过这种方式，我将获得一个 4 维向量，如：

```
c[0]=0.375
c[1]=0.082
c[2]=0.332
c[3]=0.207 
```

现在的问题是我想迭代程序直到向量 b[i] 的分量和向量 c[i] 的分量之间的差异最大为 0.001。做迭代我想做一个做/当，但我不知道如何进行迭代。我将展示我的想法：

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
int main (void){

    double A[4][4]={{0,0,1,0.5},{0.33,0,0,0},{0.33,0.5,0,0.5},{0.33,0.5,0,0}};
    double b[4]={0.25,0.25,0.25,0.25};
    double c[4]={0.,0.,0.,0.};
    int n,i,j;

    do{
        b[i]==c[i]; /* new add, but i don t know if it is the right place to put it..*/
        for(i=0;i<4;i++){
            for(j=0;j<4;j++){

                c[i] += A[i][j]*b[j];
            }    
        }   
    }while(abs(b[i]-c[i])<0.001); /*the condition into the while should be correct*/

    for(i=0;i<4;i++){
        printf("c[%d]=%lf\n",i,c[i]);  

    }
    printf("\n");
} 
```

结果应该是：

```
c[0]=0.38
c[1]=0.12
c[2]=0.29
c[3]=0.19 
```

但它没有......我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:07:04.523

```
b[i]==c[i]; /* new add, but i don t know if it is the right place to put it..*/ 
```

好像有错别字。如果您的意思是分配，则应`b[i]=c[i]`改为使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:19:53.073

只要其中有两个组件`b`并且`c`相差小于 0.001，您的程序就会结束，但是您希望对*所有*组件执行此操作，而不仅仅是一对。

你可能想做这样的事情：

```
int k=0;
do {
     for(i=0;i<4;i++) {
       b[i] = c[i];
       for(j=0;j<4;j++) {
         c[i] += A[i][j]*b[j];
       }
       if(abs(b[i]-c[i])<0.001)
        k++;    
     }

} while(k<4); 
```

但要小心不要进入无限循环！您可能想要执行其他检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:37:31.443

在您的第二个程序中，您设置`b[i] = c[i]`, 但`c`最初为零。据推测，您想要乘以`b`直到`A`迭代收敛。此外，您使用该`abs`函数，它接受一个整数参数。您应该`fabs`改为使用双打。

你在这里实现什么算法？

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

int main ()
{
  double A[4][4]={{0,0,1,0.5},{(1.0/3.0),0,0,0},{(1.0/3.0),0.5,0,0.5},{(1.0/3.0),0.5,0,0}};
  double b[4]={0.25,0.25,0.25,0.25};
  double c[4]={0.0,0.0,0.0,0.0};
  int i, j, k;

  for(i=0; i<4; i++)
    for(j=0; j<4; j++)
      c[i] += A[i][j]*b[j];

  do
  {      
    k = 0;

    for(i=0; i<4; i++)
      b[i] = c[i], c[i] = 0;

    for(i=0; i<4; i++)
    {
      for(j=0; j<4; j++)
        c[i] += A[i][j]*b[j];

      if(fabs(b[i] - c[i]) < 0.001)
        k++;
    }
  }while(k < 4);

  for(i=0; i<4; i++)
      printf("c[%d] = %lf\n",i,c[i]);  

    return 0;
} 
```

# windows-7 - 任务计划程序 - 完成一项任务后触发另一项任务 - Windows7

> ID：13930420
> 
> 赞同：1
> 
> 时间：2012-12-18T10:00:32.520
> 
> 标签：windows-7, scheduled-tasks

我希望在任务调度程序中创建的任务在前一个任务完成后触发任务调度程序中的另一个任务。

我尝试定义多个动作，但在完成第一个动作后，它永远不会完成第二个动作。它显示为任务正在运行但没有输出。

基本上，我在我的桌面上运行一个 Python 脚本（我使用参数 Start in：C:\Python27）然后它创建的文本文件与基于宏的 excel 文件一起使用。（第二个永远不会完成的任务）

# javascript - 添加产品后更新 Woocommerce 购物车 (jQuery)

> ID：13930421
> 
> 赞同：13
> 
> 时间：2012-12-18T10:00:37.987
> 
> 标签：javascript, jquery, woocommerce

Ajax 似乎工作得很好，但购物车内容不会按预期刷新。我希望单击“添加到购物车”按钮后刷新购物车的内容。就像现在一样，我必须手动刷新页面才能看到添加的产品。

我正在使用此功能将产品添加到我的 woocommerce 购物车：

```
 function addToCart(p_id) {
            jQuery.ajax({
              type: 'POST',
              url: '/wp/?post_type=product&add-to-cart='+p_id,
              data: { 'product_id':  p_id,
              'quantity': amount},
              success: function(response, textStatus, jqXHR){
                    console.log("Product added");
                }/*,
              dataType: 'JSON'*/
            }); 
      }

    jQuery('#addToCart').click(function(e) {
      e.preventDefault();
      addToCart(prod_id["product_id"]);
      return false;
    }); 
```

**添加产品后是否可以只刷新购物车？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T10:48:49.167

这是可能的 - 您需要使用此代码的修改版本：

[http://docs.woothemes.com/document/show-cart-contents-total/](http://docs.woothemes.com/document/show-cart-contents-total/)

编辑 - 在未来的 404 的情况下

```
<a class="cart-customlocation" href="<?php echo wc_get_cart_url(); ?>" title="<?php _e( 'View your shopping cart' ); ?>"><?php echo sprintf ( _n( '%d item', '%d items', WC()->cart->get_cart_contents_count() ), WC()->cart->get_cart_contents_count() ); ?> - <?php echo WC()->cart->get_cart_total(); ?></a>

// Ensure cart contents update when products are added to the cart via AJAX (place the following in functions.php).
// Used in conjunction with https://gist.github.com/DanielSantoro/1d0dc206e242239624eb71b2636ab148
add_filter('add_to_cart_fragments', 'woocommerce_header_add_to_cart_fragment');

function woocommerce_header_add_to_cart_fragment( $fragments ) {
    global $woocommerce;

    ob_start();

    ?>
    <a class="cart-customlocation" href="<?php echo $woocommerce->cart->get_cart_url(); ?>" title="<?php _e('View your shopping cart', 'woothemes'); ?>"><?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> - <?php echo $woocommerce->cart->get_cart_total(); ?></a>
    <?php

    $fragments['a.cart-customlocation'] = ob_get_clean();

    return $fragments;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T13:36:50.237

你介意ajax请求“自动”刷新页面吗？那么你可以尝试这样的事情......（未经测试）。

```
 function addToCart(p_id) {
            jQuery.ajax({
              type: 'POST',
              url: '/wp/?post_type=product&add-to-cart='+p_id,
              data: { 'product_id':  p_id,
              'quantity': amount},
              success: function(response, textStatus, jqXHR){
                    location.reload(true);
                }/*,
              dataType: 'JSON'*/
            }); 
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T23:06:00.280

首先观察购物车中的 html 是什么，以及完成它所需的所有信息。例如，您的购物车可能看起来像这样：

```
<div id="cart">
  <form action="checkout" method="POST" id="cart_checkout_form">
    <table id="cart_table">
      <tr>
         <td> Product </td>
         <td> Qty </td>
         <td> Price </td>
      </tr> 
      <tr>
         <td> <input type="hidden" name="product_id" value="221321"/> Product 1</td>
         <td> 2</td>
         <td> 200 $</td>
      </tr>

    </table>

  </form>
</div> 
```

现在您的代码应包含以下更改以反映产品：

```
 function addToCart(p_id) {
        jQuery.ajax({
          type: 'POST',
          url: '/wp/?post_type=product&add-to-cart='+p_id,
          data: { 'product_id':  p_id,
          'quantity': amount},
          success: function(response, textStatus, jqXHR){
                /* response should contain details required for adding to cart

                   like price quantity name etc in the json response */

                var new_product_html = "<tr><td><input type='hidden' value='"+ response.product_id +"' name="product_id"/>"+ response.product_name +" </td><td>"+response.product_qty+"</td><td>"+ response.product_price +"</td></tr>";

                $("#cart_table").append(new_product_html);

                console.log("Product added");

            }/*,
          dataType: 'JSON'*/
        }); 
  }

jQuery('#addToCart').click(function(e) {
  e.preventDefault();
  addToCart(prod_id["product_id"]);
  return false;
}); 
```

这将反映在将产品添加到购物车中。如果您感到困惑，请阅读以下链接。[教程](http://www.phpeveryday.com/articles/jQuery-AJAX-and-JSON-P969.html)还有 jquery append 和 ajax 函数在 jquery.com 上更详细

# ruby-on-rails - 不想在 Ruby on rails 的 Collection_tag 中重新加载时更改选定值

> ID：13930423
> 
> 赞同：0
> 
> 时间：2012-12-18T10:00:42.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在使用此代码显示一个下拉列表。但是当我选择值并重新加载它时，我想显示选定的值。

```
<%= collection_select("server", "id",@ndt,"ndname", "ndname",:prompt => "Select Server") %> 
```

就像在文本框中

```
<%= text_field_tag :name, params[:name]%> 
```

重新加载时，它会在我们输入的文本框中显示名称。collection_tag 有同样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:57:51.570

使用该`:selected`选项。

```
<%= collection_select("server", "id", @ndt,"ndname", "ndname", 
  {:prompt => "Select Server", :selected => "id_of_your_object"}) %> 
```

# jquery - jQuery coucurent 编码问题（同步 jQuery）

> ID：13930426
> 
> 赞同：1
> 
> 时间：2012-12-18T10:00:54.457
> 
> 标签：jquery, parallel-processing, iteration

自从我开始使用它以来，我没有通过所有的 jQuery 函数，我遇到了 jQuery 的问题。

它的问题在于它以并行方式执行某些功能。

如果我有`<ol>`100 个`<li>`孩子。

当我试图遍历所有 li 项目并增加一个计数器而不是显示计数器的正确值时，它会失败。

```
​$(document).ready(function(){
    var counter = 0;        
    $("ul li").each(function(){
      counter++;              
    });
    $("div").text(counter);
});​ 
```

div 文本上的计数器始终为 0

有没有办法控制函数并行或非并行（同步或异步）执行的方式。

这是 jsFiddle [http://jsfiddle.net/burimshala/pf6pn/上的代码](http://jsfiddle.net/burimshala/pf6pn/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:02:07.823

你正在循环`UL LI`not `OL LI`。

工作小提琴：http: [//jsfiddle.net/pf6pn/2/](http://jsfiddle.net/pf6pn/2/)

考虑到这一点，改变：

```
$("ul li").each(function(){ 
```

到

```
$("ol li").each(function(){ 
```

# c# - 已经在 Visual Studio 中学习 C# 的问题

> ID：13930427
> 
> 赞同：1
> 
> 时间：2012-12-18T10:00:57.903
> 
> 标签：c#, visual-studio

我刚刚开始阅读 Microsoft .NET 开发。它包括使用 VB 和/或 C# 的课程/实验。现在我通过了第一个使用 VB 的实验室，现在准备用 C# 来做。我已经完全复制了所有内容（我很确定）但我明白了

> 预期的类、委托、枚举、接口或结构

我想我应该得到一个 CMD 说法

> 托尼·艾伦，32 岁

有人可以在这里指出我的问题吗？我是后端 Web 开发人员 (PHP)，所以我了解编码，我只是对这种语言不熟悉（：

如果您要编辑下面的代码，请告诉我您做了哪些更改以及为什么要进行更改？越解释越好！

谢谢！

**C＃**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    struct Person{
        public string firstName;
        public string lastName;
        public int age;
    }
    public Person(string _firstName, string _lastName, int _age){
        firstName = _firstName;
        lastName = _lastName;
        age = _age;
    }
    public override string toString(){
        return firstName + " " + lastName + ", age " + age;
    }
    class Program{
        static void Main(string[] args){
            Person p = new Person("Tony", "Allen", 32);
            Console.WriteLine(p);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:04:07.993

将结构初始化器移动到结构定义中。和其他成员一样。

```
 struct Person{
        public string firstName;
        public string lastName;
        public int age;

        public Person(string _firstName, string _lastName, int _age)
        {
            firstName = _firstName;
            lastName = _lastName;
            age = _age;
        }

        public override string ToString(){
            return firstName + " " + lastName + ", age " + age;
        }
    } 
```

在 C# 中，我们在类/结构定义中声明成员，这与在 C++ 中所做的不同。请阅读[这个关于 C# 中的类和结构的 msdn 指南](http://msdn.microsoft.com/en-us/library/ms173109.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:06:58.860

另外， ToString 大写错误，应该是

```
public override string ToString() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:07:47.777

1.  构造函数和方法应该在类/结构中声明：

    ```
    struct Person
    {
        public string firstName;
        public string lastName;
        public int age;

        public Person(string _firstName, string _lastName, int _age)
        {
            firstName = _firstName;
            lastName = _lastName;
            age = _age;
        }

        public override string toString()
        {
            return firstName + " " + lastName + ", age " + age;
        }
    } 
    ```

2.  没有方法`toString`可以覆盖，但是`ToString`

    ```
    struct Person
    {
        //...

        public override string ToString()
        {
            return firstName + " " + lastName + ", age " + age;
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:07:38.353

```
using System;

namespace Programs
{
    struct Person{
        public string firstName;
        public string lastName;
        public int age;

        public Person(string _firstName, string _lastName, int _age){
        firstName = _firstName;
        lastName = _lastName;
        age = _age;
    }

        public  string toString()
        {
            return firstName + " " + lastName + ", age " + age;
        }
    }

    class Program{
        static void Main(string[] args){
            Person p = new Person("Tony", "Allen", 32);
            Console.WriteLine(p.toString());
        }
    }
} 
```

*   `toString()`在你的结构中使用方法。您不必覆盖它。
*   `Console.WriteLine(p.toString());`不使用`Console.WriteLine(p);`
*   获得一本可以基本学习`class`和`struct`键入的好 C# 书籍。

# foreach - Liferay foreach 向后循环

> ID：13930432
> 
> 赞同：2
> 
> 时间：2012-12-18T10:01:14.953
> 
> 标签：foreach, liferay, velocity

是否有可能以**相反的顺序**获取元素。

所以现在典型的速度 foreach 是这样的：

```
<ol style="list-style: decimal!important;">
    #foreach ($i in $item.siblings)
        <li>$i.data</li>
    #end
</ol> 
```

> 输出：
> 
> 1.  一
> 2.  二
> 3.  三
> 4.  四

但我想得到相反的输出，比如：

> 1.  四
> 2.  三
> 3.  二
> 4.  一

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:56:40.373

如果 $item.siblings 是 List 的实现，你可以试试

```
<ol style="list-style: decimal!important;">
    #set($c = $item.siblings.size())
    #foreach ($i in $item.siblings)
        #set($c = $c - 1)
        #set($sibling = $item.siblings.get($c))
        <li>$sibling.data</li>
    #end
</ol> 
```

# ios - 带有文本视图和标签的动态单元格高度

> ID：13930433
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:01:18.043
> 
> 标签：ios, uitableview, uilabel, uitextview

我有一些数据显示在每行不同高度的单元格（在文本视图中）和一个标签，我分别为其设置框架。所以，请谁能告诉我如何结合两者的高度以在单元格中显示它们，并且文本视图的高度是动态的。

我试过了，但它们是重叠的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:58:59.907

从链接中查看[UITableViewCell 动态高度：](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/) [http ://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

[你可以在这里](http://www.cimgf.com/wp-content/uploads/2009/08/DynamicHeights.zip)下载演示项目。

# c# - 如何在 Mono 上使用 facebook SDK？

> ID：13930435
> 
> 赞同：0
> 
> 时间：2012-12-18T10:01:21.540
> 
> 标签：c#, facebook, mono, xamarin.android

我是 microsoft .Net/C# 的老开发人员，现在我正在尝试适用于 android 的 mono 评估版。我非常喜欢它，但大约有一个星期我想在 facebook 上做点什么。假设我的应用程序刚刚在 facebook 上注册，我真的不明白如何登录 facebook 并做一些基本的事情，比如获取朋友列表。我找到了[https://github.com/xamarin/monodroid-samples/tree/master/Facebook](https://github.com/xamarin/monodroid-samples/tree/master/Facebook)，构建了 Mono.Facebook 并从一个基本的单声道 android 应用程序中引用了它。但是我在 Visual Studio 中看不到 facebook 对象（可能我做错了什么，但我不知道 java....）包含的示例具有相同的行为。

有没有人可以给我提示在 Facebook 上执行登录或如何开始？

谢谢！！！！

# vbscript - 如何仅删除文本文件所有行的第 23 到 33 个字符？

> ID：13930436
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:01:24.143
> 
> 标签：vbscript

文本行是这样的：

`12341234567 2635473234 123456789 sfhwruewtbdsvmhsgfiergn`（这是其中一条线）

`12341234567 2635473234 xxxxxxxxx sfhwruewtbdsvmhsgfiergn`（我只希望将 X 替换为空格），并且它们各自位置的其他文本完好无损。

该文件是一个日志文件，有时多达 500 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:23:23.250

编辑：在 WriteLine 上删除 ()

我帮你一个忙

将输入输出文件路径改为全路径

参考：[使用 VBScript 读写文件](https://stackoverflow.com/questions/1142678/read-and-write-into-a-file-using-vbscript)

```
Dim objFSO
dim objFile
dim thisLine
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.GetFile("C:\Users\wangCL\Desktop\data.txt")
If objFile.Size > 0 Then 'make sure the input file is not empty
    Set inputFile = objFSO.OpenTextFile("C:\Users\wangCL\Desktop\data.txt", 1)  'Replace the filename here
    set outputFile = objFSO.CreateTextFile("C:\Users\wangCL\Desktop\output.txt", TRUE) 'replace it with output filename

    do while not inputFile.AtEndOfStream                           
        thisLine = inputFile.ReadLine  ' Read an entire line into a string.
        newLine = mid(thisLine,1,23) & "         " & mid(thisLine,33)
        outputFile.WriteLine newLine
    loop
    inputFile.Close
    outputFile.Close
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:43:21.490

正如您要求删除（不替换为空格），我建议：

```
 Const csInF  = "..\data\13930436.txt"
  Const csOutF = "..\data\13930436-c.txt"
  Dim oFS  : Set oFS = CreateObject("Scripting.FileSystemObject")
  Dim sAll : sAll    = oFS.OpenTextFile(csInF).ReadAll()
  WScript.Echo sAll
  Dim reR  : Set reR = New RegExp
  reR.Global = True
  reR.Multiline = True
  reR.Pattern = "^(.{23})(.{10})"
  WScript.Echo reR.Pattern
  oFS.CreateTextFile(csOutF, True).Write reR.Replace(sAll, "$1")
  WScript.Echo oFS.OpenTextFile(csOutF).ReadAll() 
```

输出：

```
============================================================
12341234567 2635473234 123456789 sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 XxxxxxxxX sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 ......... sfhwruewtbdsvmhsgfiergn

^(.{23})(.{10})
12341234567 2635473234 sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 sfhwruewtbdsvmhsgfiergn

============================================================ 
```

要在生产中使用“ReadAll, Replace using RegExp, Write back”策略，您应该学习 VBScript 文档 wrt FileSystemObject 和 RegExp。

**更新（规格更改后）：**

利用

```
 oFS.CreateTextFile(csOutF, True).Write reR.Replace(sAll, "$1" & Space(10)) 
```

要得到：

```
...
12341234567 2635473234 ......... sfhwruewtbdsvmhsgfiergn

^(.{23})(.{10})
12341234567 2635473234           sfhwruewtbdsvmhsgfiergn
... 
```

**更新 II（规格更改后：仅限 zap 编号）：**

将 RegExp 模式从

```
 reR.Pattern = "^(.{23})(.{10})"   ' look for 10 arbitrary characters (.) 
```

至

```
 reR.Pattern = "^(.{23})(\d{9} )" ' look for 9 digits (\d) plus 1 space 
```

输出：

```
12341234567 2635473234 123456789 sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 XxxxxxxxX sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 987654321 sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 abcdefghi sfhwruewtbdsvmhsgfiergn

^(.{23})(\d{9} )
12341234567 2635473234           sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 XxxxxxxxX sfhwruewtbdsvmhsgfiergn
12341234567 2635473234           sfhwruewtbdsvmhsgfiergn
12341234567 2635473234 abcdefghi sfhwruewtbdsvmhsgfiergn 
```

请参阅[RegExp 语法](http://technet.microsoft.com/en-us/subscriptions/1400241x%28v=vs.80%29.aspx)以了解模式中的有趣字母。

# ruby-on-rails - Rails 应用程序中的编译时间错误

> ID：13930437
> 
> 赞同：0
> 
> 时间：2012-12-18T10:01:25.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在阅读 railstutorial.org 的书，并在代码中出现编译时错误

```
<div class="center hero-unit">
<h1>Welcome to the Sample App</h1>
<h2>
This is the home page for the
<a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
sample application.
</h2>
<%= link_to "Sign up now!", '#', class: "btn btn-large btn-primary" %>
</div>
<%= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org/' %> 
```

我的错误是

```
compile error
/home/ritesh/projects/sample/app/views/static_pages/home.html.erb:8: syntax error, unexpected ':'
...to "Sign up now!", '#', class: "btn btn-large btn-primary" )...
                              ^
/home/ritesh/projects/sample/app/views/static_pages/home.html.erb:10: syntax error, unexpected ':', expecting ')'
...to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails...
                              ^
/home/ritesh/projects/sample/app/views/static_pages/home.html.erb:10: syntax error, unexpected ')', expecting kEND
...), 'http://rubyonrails.org/' );@output_buffer.safe_concat('
                              ^ 
```

我想：下课后应该在那里。有人可以建议如何纠正这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:07:07.173

尝试使用`:class =>`语法而不是`class:`.

例如，而不是：

```
<%= link_to "Sign up now!", '#', class: "btn btn-large btn-primary" %> 
```

写

```
<%= link_to "Sign up now!", '#', :class => "btn btn-large btn-primary" %> 
```

我高度怀疑您使用的 Ruby 版本不支持 `s 语法。在这种情况下，请尝试将 Ruby 更新到 1.9.x。

**编辑：**

由于您的 Ruby 版本是 1.8.7，这会给您编译错误，因为语法是在 Ruby 1.9 中首次引入的。当你安装 Ruby 1.9 时，任何一种写法都是正确的。

# ruby-on-rails - 用于管理员的 Rails 基本控制器

> ID：13930438
> 
> 赞同：5
> 
> 时间：2012-12-18T10:01:30.897
> 
> 标签：ruby-on-rails, controller, admin, base

我从 .net 迁移到 rails 并且我是初学者。我玩过但不知道如何为管理员命名空间创建一个基本控制器来共享一些功能。我的意思是，将 Base 类放在哪里，因为每次尝试都会出错。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T10:14:44.823

假设您使用的是 Rails 3。您可以这样做。

**路线.rb**

```
namespace :admin do
  resources :users
end 
```

这是控制器文件夹的结构：

```
controllers/
  application_controller.rb
  admin/
    base_admin_controller.rb
    users_controller.rb 
```

**管理员/base_admin_controller.rb：**

```
class Admin::BaseAdminController < ApplicationController
  protected

    def some_shared_method
      # Do something
    end
end 
```

您可以添加所有管理控制器将共享的任何方法。然后只需简单地继承 BaseAdminController 类。

**管理员/users_controller.rb：**

```
class Admin::UsersController < Admin::BaseAdminController
  def index
    some_shared_method
  end
end 
```

# jboss - jBPM 部署为 Web 应用程序

> ID：13930443
> 
> 赞同：0
> 
> 时间：2012-12-18T10:01:45.857
> 
> 标签：jboss, jbpm, business-process-management

我是 jBPM 的新手。

我设法使用 Eclispse 插件创建了一个工作流。

我正在将工作流程作为“JAVA 应用程序”执行

它工作正常。

现在，我希望我的工作流程可以从多个不同的客户端执行。

所以我正在寻找像 Web 应用程序一样执行的指南。

是否可以 ？

如何像 Web 应用程序一样执行 jBPM 流程？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:13:14.733

在您的情况下，您已经在使用 jBPM 作为您的 java 项目的库。如果你想在 webapp 中使用它，你不必做任何特别的事情。创建一个新的 webapp 项目，添加 jBPM5 依赖项/库并开始创建您的 kbase、ksession 等。

最好的祝福，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:35:25.973

很长一段时间后，我能够创建一个 jBPM Web 应用程序。

按照链接，[https://community.jboss.org/people/roxy1987/blog/2013/01/22/jbpm5-web-application-example](https://community.jboss.org/people/roxy1987/blog/2013/01/22/jbpm5-web-application-example)

# opencv - OpenCV GetCaptureProperty：找不到标识符？

> ID：13930449
> 
> 赞同：1
> 
> 时间：2012-12-18T10:02:25.763
> 
> 标签：opencv

这是我的代码。它打开网络摄像头，抓取帧，将它们缩小到较小的窗口，并尝试使用 GetCaptureProperty 获取帧速率。

它找不到 GetCaptureProperty 函数，我也找不到（我单击了 Opencv 模块文件夹中的每个文件夹）。有任何想法吗？

```
#include "stdafx.h"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <Windows.h>
#include <time.h>

using  namespace std;
using namespace cv;

Mat output;

int _tmain(int argc, _TCHAR* argv[])
{
     VideoCapture cap(0); // open the default camera
    if(!cap.isOpened()) { // check if we succeeded
        cout << "NO camera found \n";
        return -1;
    }

    Mat src,smallsrc;

    cap >> src;  //grab 1 frame
    output.create(src.rows,src.cols,CV_8UC3);  //create empty 3 channel frame
    namedWindow( "source", CV_WINDOW_AUTOSIZE );
    moveWindow("source",2000,100);  //create a small original capture off to the side of screen

    for(;;)
    {
      if( GetAsyncKeyState(27)) cin.get() ;  //if esc is pressed, pause execution till ENTER is pressed
      /// Load an image
      cap >> src;

      if( !src.data )
      { return -1; }

      resize(src,smallsrc,Size(),.5,.5);  //smaller scale window of original
      imshow("source",smallsrc);

    int msc = cvGetCaptureProperty(smallsrc,CV_CAP_PROP_POS_MSEC);
    int frmrate = GetCaptureProperty(smallsrc,CV_CAP_PROP_FPS);
    int frmcount = getCaptureProperty(smallsrc,CV_CAP_PROP_POS_FRAMES);

      waitKey(30);
    }
    return 0;
} 
```

这是错误：

```
1>------ Build started: Project: getcaptureproperty, Configuration: Debug x64 ------
1>  getcaptureproperty.cpp
1>getcaptureproperty.cpp(34): warning C4244: 'argument' : conversion from 'time_t' to 'unsigned int', possible loss of data
1>getcaptureproperty.cpp(46): error C2664: 'cvGetCaptureProperty' : cannot convert parameter 1 from 'cv::Mat' to 'CvCapture *'
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>getcaptureproperty.cpp(47): error C3861: 'GetCaptureProperty': identifier not found
1>getcaptureproperty.cpp(48): error C3861: 'getCaptureProperty': identifier not found
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:53:03.003

您正在使用 OpenCV 的 C++ 接口并调用 C 函数来获取视频捕获的属性。您可以通过以下方式获取`cv::VideoCapture`对象的属性：

```
int msc = cap.get(CV_CAP_PROP_POS_MSEC);
int frmrate = cap.get(CV_CAP_PROP_FPS);
int frmcount = cap.get(CV_CAP_PROP_POS_FRAMES); 
```

# python - 如何获取模式的复制次数并使用它

> ID：13930458
> 
> 赞同：0
> 
> 时间：2012-12-18T10:03:18.040
> 
> 标签：python, regex

例如，有一个类似 的字符串`aaaaaab`，其中`a`重复 n 次（在本例中，n=6）。我怎么能得到数字 n ？

然后，如果我想使用 n 将其替换为 make `a`to n/2 times like `aaab`，或 n-2 times `aaaab`。怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T10:07:00.623

```
s = 'aaaaabbcdddddddd'
[(m.group(1), len(m.group(2))+1) for m in re.finditer(r'(\w)(\1*)', s)] 
```

返回

```
[('a', 5), ('b', 2), ('c', 1), ('d', 8)] 
```

要使用它来替换字符组：

```
re.sub(r'(\w)(\1*)', lambda m: m.group(1)*f(len(m.group(2))+1), s) 
```

和：

```
f = lambda x: x - 2 # returns 'aaadddddd'
f = lambda x: x / 2 # returns 'aabdddd'
f = lambda x: x + 1 # returns 'aaaaaabbbccddddddddd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:05:18.957

您不能仅使用正则表达式来做到这一点。但是您可以使用正则表达式来提取`a`'s 的字符串，然后检查其长度。

然后您可以创建一个适当长度的替换字符串并进行替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:18:15.427

> 例如，有一个像 aaaaaab 这样的字符串，其中 a 重复 n 次（在本例中，n=6）。我怎么能得到数字 n ？

如果您知道要检查哪个字符，并且只需要重复次数：

```
>>> from collections import Counter
>>> Counter(i for i in 'aaaaaabbbbbbc')['a']
6 
```

如果您想知道哪些字符被重复以及重复了多少次：

```
>>> [{k:v} for k,v in Counter(i for i in 'aaaaaabbbbbbc').iteritems() if v > 1]
[{'a': 6}, {'b': 6}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:08:12.630

要将出现次数的**文字**`n`模式替换为重复`n/2`次数相同的模式，您可以执行以下操作：

```
>>> import re
>>> text = 'aaaaaab'
>>> re.sub('aa', 'a', text)
'aaab' 
```

如果模式不是文字匹配，则此方法不起作用，并且无法仅使用正则表达式使其起作用。您可以做的事情是使用`re.finditer`, 并根据匹配中的信息将它们替换为您想要的。

例如，要替换为`n/2`您可以执行的操作：

```
>>> text = 'aaaaaab something else aaaab'
>>> matches = list(re.finditer('a+', text))
>>> displ = 0
>>> for match in matches:
...     num_repeat = match.end() - match.start()  #depending on the pattern
...     text = text[:match.start() - displ] + 'a' * (num_repeat // 2) + text[match.end() - displ:]
...     displ += num_repeat // 2
... 
>>> print text
aaab something else aab 
```

或替换为`n-2`出现次数：

```
>>> text = 'aaaaaab something else aaaab'
>>> matches = list(re.finditer('a+', text))
>>> displ = 0
>>> for match in matches:
...     num_repeat = match.end() - match.start()
...     text = text[:match.start() - displ] + 'a' * (num_repeat - 2) + text[match.end() - displ:]
...     displ +=  2
... 
>>> print text
aaaab something else aab 
```

# c# - C# ListView 标签编辑 - 控制选定的文本

> ID：13930460
> 
> 赞同：5
> 
> 时间：2012-12-18T10:03:26.437
> 
> 标签：c#, listview, text, edit

我正在查看 .Net Framework ListView（我一直在尝试 BetterListView，即 express 版本，并且不断遇到我无法做的事情，所以我认为我不妨遇到我无法做的事情记录更好的 MS ListView！），有些事情让我很困惑。

我希望这些项目是可编辑的，但我希望在编辑开始时，所选文本只是项目文本的一部分，而不是全部。

这方面的一个例子是在 Windows 资源管理器中，当您看到文件扩展名并开始重命名文件时 - 选择了文件名（蓝色背景）但没有选择文件扩展名，这样如果用户立即开始键入然后名称将被替换，但扩展名保持不变。

我可以想到解决方法，但想知道是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:04:02.430

通过适当的消息进行长拖网，答案是......

```
private void listView1_BeforeLabelEdit(object sender, LabelEditEventArgs e)
{
    IntPtr editWnd = IntPtr.Zero;
    editWnd = SendMessage(listView1.Handle, LVM_GETEDITCONTROL, 0, IntPtr.Zero);
    int textLen = Path.GetFileNameWithoutExtension(listView1.Items[e.Item].Text).Length;
    SendMessage(editWnd, EM_SETSEL, 0, (IntPtr) textLen);
}

public const int EM_SETSEL = 0xB1;
public const int LVM_FIRST = 0x1000;
public const int LVM_GETEDITCONTROL = (LVM_FIRST + 24);

[DllImport("user32.dll", CharSet = CharSet.Ansi)]
public static extern IntPtr SendMessage(IntPtr hWnd, int msg, int len, IntPtr order); 
```

这正是我所追求的。感谢其他响应者花时间回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:13:14.917

您可以为此使用gridview。GridView 有 ItemEdit。您也可以尝试一些组件，例如 Telerik 或 devexpress ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:31:42.387

在此处查看 ObjectListView：http: [//objectlistview.sourceforge.net/cs/index.html](http://objectlistview.sourceforge.net/cs/index.html) 它易于使用、非常灵活且大部分免费。

# php - XPath 查询返回空值

> ID：13930461
> 
> 赞同：1
> 
> 时间：2012-12-18T10:03:28.823
> 
> 标签：php, html, xpath, domxpath

我有这个 HTML 片段：

```
<td class="alt1 icon smallfont" align="center">
    <div class="cal_imp_high" title="High Impact Expected"/>
</td> 
```

我正在尝试使用此 XPath 查询获取内部 div 的类值**cal_imp_high ：**

```
$xpath->query('//td[@class="alt1 icon smallfont"]/div[@class]/@class'); 
```

但它什么也没显示，我无法弄清楚出了什么问题..请有人帮助我。

最好的祝福。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:07:42.980

您的 XPath 查询对我来说很好。

```
<?php
echo phpversion(), "\n";
$doc = new DOMDocument;
$doc->loadxml( <<< eox
<td class="alt1 icon smallfont" align="center">
    <div class="cal_imp_high" title="High Impact Expected"/>
</td>
eox
);
$xpath = new DOMXPath($doc);

foreach( $xpath->query('//td[@class="alt1 icon smallfont"]/div[@class]/@class') as $n ) {
    echo 'class: ', $n->nodeValue, "\n";
} 
```

输出：

```
5.4.7
class: cal_imp_high 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:39:21.617

也许您的 td 元素实际上在命名空间中？某处是否有 xmlns="...." 声明？

# mysql - MySQL 比较两个表并使用转置选择结果更新第二个表

> ID：13930465
> 
> 赞同：3
> 
> 时间：2012-12-18T10:03:38.213
> 
> 标签：mysql, select, insert, compare, transpose

我已经构建了以下两个表：

```
+---------------+---------------+
| name_i | 价值 |
+---------------+---------------+
| 名称_1 | 阿斯达夫 |
| 名称_1 | fdsd |
| 名称_1 | fsfd |
| 名称_2 | ffff |
| 名称_3 | 埃尔费 |
| 名称_3 | ewrw |
| name_4 | 雷|
| 名称_5 | wr4e |
+---------------+---------------+

+---------------+---------------+---------------+- --------------+
| name_id | 第 1 列 | 第 2 列 |第 3 列 |
+---------------+---------------+---------------+- --------------+
| 名称_1 | 空 | 空 |空 |
| 名称_2 | 空 | 空 |空 |
| 名称_3 | 空 | 空 |空 |
| name_4 | 空 | 空 |空 |
| 名称_5 | 空 | 空 |空 |
+---------------+---------------+---------------+- --------------+

```

我想转置第一个表中的值并根据比较它们的`name_id`列的结果更新第二个表。对于那些`name_id`小于 3 个值的 s，其余的可以保留`NULL`在第二个表上。所以最后我的表应该是这样的：

```
+---------------+---------------+---------------+- --------------+
| name_id | 第 1 列 | 第 2 列 |第 3 列 |
+---------------+---------------+---------------+- --------------+
| 名称_1 | 阿斯达夫 | fdsd |fsfd |
| 名称_2 | ffff | 空 |空 |
| 名称_3 | 埃尔费 | ewrw |null |
| name_4 | 雷| 空 |空 |
| 名称_5 | wr4e | 空 |空 |
+---------------+---------------+---------------+- --------------+

```

知道如何在 mysql 中执行此操作吗？我对此真的很陌生，但我猜需要一个合适的 for 循环。为方便起见，我自己构建了第二张表，但如果有办法直接用适当的值构建它，那对我来说没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:43:38.243

在一个查询中，它将是

```
UPDATE table2 SET 
    column1 = (SELECT `value` FROM table1 WHERE name_i = name_id LIMIT 1), 
    column2 = (SELECT `value` FROM table1 WHERE name_i = name_id LIMIT 1,1),
    column3 = (SELECT `value` FROM table1 WHERE name_i = name_id LIMIT 2,1) 
```

请注意它仅适用于 3 列结构。如果需要，可以添加更多。它相对较慢，但就您使用 30000 条记录而言 - 不会太多

**UPD**这个会更快

```
UPDATE table2 
    LEFT JOIN table1 a ON a.name_i = name_id 
    LEFT JOIN table1 b ON a.name_i=b.name_i AND a.value != b.value 
    LEFT JOIN table1 c ON a.name_i=c.name_i AND a.value != c.value AND b.value != c.value 
SET 
    column1 = a.value,
    column2 = b.value,
    column3 = c.value 
```

# asp.net - 使用 .net 2003 在 Windows 7 和 IIS7 上调试错误

> ID：13930468
> 
> 赞同：0
> 
> 时间：2012-12-18T10:03:49.647
> 
> 标签：asp.net, iis-7

我有一台 Windows 7 机器并运行 .net VS2003。当我尝试运行启用调试的 Web 应用程序项目时，我收到错误消息“尝试运行项目时出错：无法在 Web 服务器上启动调试器。”

我从互联网上的建议中尝试了很多东西，但没有成功。有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T19:46:43.297

1.  将 DefaultAppPool 设置为 Framework 1.1
2.  将 DefaultAppPool 分配给您的应用程序

# java - Java 进程永不停止

> ID：13930470
> 
> 赞同：1
> 
> 时间：2012-12-18T10:04:00.227
> 
> 标签：java, process

我正在尝试从我的 Java 应用程序执行一个进程，当我从控制台执行这个进程时它工作正常，但是当我执行 getRuntime().exec() 时它开始但永远不会结束，没有异常，没有退出值。我尝试执行的过程是 pdftops.exe，这是一个将 PDF 文件转换为 PostScript 的应用程序。当我尝试转换小文件（从 Java 执行）时，它工作正常，问题是转换可能需要更长时间（从 20 到 60 秒）的较大 PDF。我认为问题可能是执行时间太长。下面是调用程序的一段代码（命令行简化，input.pdf和output.ps放在我家目录下的一个文件夹里，pdftops.exe放在Desktop里）：

```
String comando = "pdftops.exe input.pdf output.ps";
System.out.println("Executing "+comando);
try {
    Process pr = Runtime.getRuntime().exec(comando);            
    pr.waitFor();      
    System.out.println("Finished");
}
catch (IOException ex){
    ex.printStackTrace();
}
catch(InterruptedException ex){
    ex.printStackTrace();
} 
```

编辑：阅读过程的 ErrorStream 解决了这个问题：

```
try {
    System.out.println(comando);
    Process process = Runtime.getRuntime().exec(comando);            

    String line;

    InputStream stderr = process.getErrorStream ();

    BufferedReader reader = new BufferedReader (new InputStreamReader(stderr));

    line = reader.readLine();
    while (line != null && ! line.trim().equals("--EOF--")) {
        System.out.println ("Stdout: " + line);
        line = reader.readLine();
    }
}
catch (IOException ex){
    ex.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:09:50.917

不是立即回答您的问题，但可能有助于捕获过程的错误/输出流，以便您知道那里发生了什么（假设它产生了一些东西）。

使用 java 7，您可以使用非常方便的[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28boolean%29)并将错误流合并到输出中...

例如，它可以等待一些输入吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:23:31.453

我会使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)（类似于 Jan 之前所说的），如果您使用 Java 5，至少类似下面的内容可能会告诉您错误是什么……

```
public void execute () throws IOException, InterruptedException
{
    ProcessBuilder pb = new ProcessBuilder("pdftops.exe", "input.pdf", "output.ps");

    Process process = pb.start();

    System.out.println("Error stream:");
    InputStream errorStream = process.getErrorStream();
    printStream(errorStream);

    process.waitFor();

    System.out.println("Output stream:");
    InputStream inputStream = process.getInputStream();
    printStream(inputStream);
}

private void printStream (InputStream stream) throws IOException
{
    BufferedReader in = new BufferedReader(new InputStreamReader(stream));
    String inputLine;
    while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);
    in.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:12:46.730

如果您浏览 java 文档，您会发现：

```
waitFor : Causes the current thread to wait, if necessary, until the process represented by this Process object has terminated. This method returns immediately if the subprocess has already terminated. If the subprocess has not yet terminated, the calling thread will be blocked until the subprocess exits.
Returns: the exit value of the subprocess represented by this Process object. By convention, the value 0 indicates normal termination.
Throws: InterruptedException - if the current thread is interrupted by another thread while it is waiting, then the wait is ended and an InterruptedException is thrown. 
```

我的猜测是，对于大文件，它会遇到一个时间难题，这会混淆执行。可能您可以在这里检查执行过程的完成状态，如下所示：

```
 if(Process.exitValue()==0)
  break; 
```

这将确保一旦您的执行结束，无限或过度激进的循环将不会成为执行的最终结果。

# javascript - 让 div 不断随机移动

> ID：13930475
> 
> 赞同：1
> 
> 时间：2012-12-18T10:04:18.227
> 
> 标签：javascript, jquery

我为孩子们创建了一个射击游戏，当它出现时，他们必须射击正确的数字（取决于问题）。我的问题是目前数字一次出现一个，但我想让画布不断填充数字，这些数字像本例中的形状一样不断移动...... [http://sheppardsoftware.com/数学游戏/earlymath/shapes_shoot.htm](http://sheppardsoftware.com/mathgames/earlymath/shapes_shoot.htm)

```
function moveRandom(id) {

var cPos = $('#container').offset();
var cHeight = $('#container').height();
var cWidth = $('#container').width();

// get box padding (assume all padding have same value)
var pad = parseInt($('#container').css('padding-top').replace('px', ''));

// get movable box size
var bHeight = $('#' + id).height();
var bWidth = $('#' + id).width();

// set maximum position
maxY = cPos.top + cHeight - bHeight - pad;
maxX = cPos.left + cWidth - bWidth - pad;

// set minimum position
minY = cPos.top + pad;
minX = cPos.left + pad;

// set new position
newY = randomFromTo(minY, maxY);
newX = randomFromTo(minX, maxX);

$('#' + id).css({
    top: newY,
    left: newX
}).fadeIn(2000, function() {
    setTimeout(function() {
        $('#' + id).fadeOut('fast');
        window.cont++;
    }, 1500);
}); 
```

这是我创建的版本[http://jsfiddle.net/pUwKb/5/](http://jsfiddle.net/pUwKb/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:09:59.680

如果将`css()`方法替换为 ，它会起作用`animate()`吗？

```
$('#' + id).animate({
    top: newY,
    left: newX
}).fadeIn(2000, function() {
    setTimeout(function() {
        $('#' + id).fadeOut('fast');
        window.cont++;
    }, 1500);
}); 
```

# java - 在 Android 中自动更改 APK 文件版本

> ID：13930477
> 
> 赞同：0
> 
> 时间：2012-12-18T10:04:23.003
> 
> 标签：java, android, apk

我有一个`.APK`文件。使用一些发布版本 X。现在我想自动更改`.APK`文件版本名称和版本代码，而不更改清单文件中的属性值。

我知道通过这段代码我们可以获得当前的版本代码和版本名称，我们可以在我们的应用程序代码中更改它。但是我们如何才能在我们的清单文件中永久设置更改的值

```
PackageManager package_manager=this.getPackageManager();
String package_name = package_manager.getPackageInfo(this.getPackageName(), 0).versionName;
int version_code=package_manager.getPackageInfo(this.getPackageName(), 0).versionCode; 
```

现在我们可以用这样的代码改变这个东西

```
package_manager.getPackageInfo(this.getPackageName(), 0).versionName="1.5.2"; 
```

和

```
package_manager.getPackageInfo(this.getPackageName(), 0).versionCode="2" 
```

但是当我完成我的活动并打开`Manifest`文件时，这对我不起作用。我会发现与应用程序开始时存在的版本名称和版本代码相同。上面的代码实现没有抛出任何异常，但是为什么不改变`Manifest`属性值呢？

# sharepoint - Sharepoint 2010 上“调查列”的最大长度是多少？

> ID：13930480
> 
> 赞同：0
> 
> 时间：2012-12-18T10:04:36.263
> 
> 标签：sharepoint, sharepoint-2010

Sharepoint 2010 上的调查问题（列）的最大长度是多少？我们可以认为它就像一个自定义列表的列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:35:31.993

调查列最终是一个文本字段，因此适用于普通文本字段的规则也适用于该列。

它有 255 个字符的限制

# sql - SQL Server php 日期时间格式

> ID：13930481
> 
> 赞同：0
> 
> 时间：2012-12-18T10:04:39.930
> 
> 标签：sql, sql-server

我需要创建一个数据库来保存一些`datetime`值。

所以我将列定义为`datetime`类型，并且我有这个日历。

那么，为了使日期时间起作用，日历输入的格式应该是什么？

因为我需要进行一些搜索，即

```
Select FROM table_name between date1 to date2 
```

目前是：

```
mm/dd/yyyy 
```

我正在使用这个：

```
$today = date("dd/mm/yyyy");                  
$strSQL = "SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE data_e_shitjes=$today"; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:21:20.010

SQL Server 支持多种格式 - 请参阅[有关 CAST 和 CONVERT 的 MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。这些格式中的大多数**取决于**您拥有的设置 - 因此，这些设置有时可能有效 - 有时无效。

解决此问题的方法是使用 SQL Server 支持的（稍作调整的）**ISO-8601 日期格式**- 这种格式**始终**有效- 无论您的 SQL Server 语言和日期格式设置如何。

SQL Server 支持的[ISO-8601 格式](http://msdn.microsoft.com/en-us/library/ms180878.aspx)有两种形式：

*   `YYYYMMDD`仅适用于日期（无时间部分）；注意这里：**没有破折号！**，这很重要！`YYYY-MM-DD`不独立于 SQL Server 中的日期格式设置，并且**不会****在**所有情况下工作！

 **或者：

*   `YYYY-MM-DDTHH:MM:SS`对于日期和时间 - 请注意：这种格式*有*破折号（但*可以*省略），并且`T`在`DATETIME`.

这对 SQL Server 2000 和更新版本有效。

如果您使用 SQL Server 2008 或更新版本以及`DATE`数据类型（仅`DATE`-**不是** `DATETIME`！），那么您确实也可以使用该`YYYY-MM-DD`格式，并且该格式也适用于您的 SQL Server 中的任何设置。

不要问我为什么整个话题如此棘手和令人困惑——事情就是这样。但是使用该`YYYYMMDD`格式，您应该适用于任何版本的 SQL Server 以及 SQL Server 中的任何语言和日期格式设置。**

# mysql - mysql查询添加多行的条目

> ID：13930482
> 
> 赞同：1
> 
> 时间：2012-12-18T10:04:40.320
> 
> 标签：mysql

我在 mysql 中有一个查询，它给了我这个

```
product    count(*)
-------    ---------
A           5
B           2
C           3
D           4
E           1 
```

查询很简单

```
select product,count(*) from dashboard group by product; 
```

现在的问题是我想将一些产品的数量合并到其他产品中，例如预期的输出是

```
product    count(*)
-------    ---------
A           7
C           3
D           5 
```

所以计数（A）=计数（A）+计数（B）

计数(c) = 计数(C)

计数(D)= 计数(D) + 计数(E)

我在想这样的事情

```
select case
when product = 'A' OR product = 'B' then ----
when product = 'C' then ----
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:14:44.293

第二次对现有结果进行分组（这具有显着的优势，即如果可能，它将使用索引来执行第一次聚合，然后对较小的结果集进行更简单的求和以执行第二次聚合）：

```
SELECT   CASE
           WHEN p IN ('A','B') THEN 'A'
           WHEN p IN ('C')     THEN 'C'
           WHEN p IN ('D','E') THEN 'D'
         END AS product, SUM(c)
FROM     (
           SELECT   product AS p, COUNT(*) AS c
           FROM     dashboard
           GROUP BY p
         ) t
GROUP BY product 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/57884/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:18:12.990

您可以将对产品的更改放在子查询中：

```
select product, count(*) Total
from
(
  select 
    case
        when product in ('A','B') then 'A'
        when product in ('C')     then 'C'
        when product in ('D','E') then 'D'
     end AS product
  from dashboard
) src
group by product; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7af3e/3)

# windows - Windows Server 2012 登录太慢无法显示

> ID：13930483
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:04:41.927
> 
> 标签：windows

在 Windows Server 2012 上，我锁定桌面后可能需要很长时间才能解锁，即只是为了再次出现登录。这是常态吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:09:31.307

与 windows 8 pro 相比，我发现启动过程非常慢。

再说一次，Windows 服务器包含更多服务和安全措施，这些服务和安全措施在开始新会话时启动，因此延迟是有意义的。

我相信如果您以安全模式或 F8 菜单中可用的其他众多选项之一启动。（开机时连续快速按F8）部分延迟将被消除。

# mysql - 为不工作的用户授予选择权限？

> ID：13930484
> 
> 赞同：0
> 
> 时间：2012-12-18T10:04:48.700
> 
> 标签：mysql, mysql-error-1064, mysql-workbench

我`mysql 5.0.86`在 windows 机器上使用。我正在创建一个仅具有选择权限的用户。

**询问**

```
Grant select on *.* to 'readonly'@'%' identified by 'readonly';
Flush privileges; 
```

**MYSQL 表输出**

```
 ************************** 1\. row ***************************
                Host: %
                User: readonly
            Password: *922A4B420903CAD4E7FC56A23122AB927E051FE3
         Select_priv: Y
         Insert_priv: Y
         Update_priv: Y
         Delete_priv: Y
         Create_priv: Y
           Drop_priv: Y
         Reload_priv: Y
       Shutdown_priv: Y
        Process_priv: Y
           File_priv: Y
          Grant_priv: Y
     References_priv: Y
          Index_priv: Y
          Alter_priv: Y
        Show_db_priv: Y
          Super_priv: Y
reate_tmp_table_priv: Y
    Lock_tables_priv: Y
        Execute_priv: Y
     Repl_slave_priv: Y
    Repl_client_priv: Y
    Create_view_priv: Y
      Show_view_priv: Y
 Create_routine_priv: Y
  Alter_routine_priv: Y
    Create_user_priv: Y
            ssl_type:
          ssl_cipher:
         x509_issuer:
        x509_subject:
       max_questions: 0
         max_updates: 0
     max_connections: 0
max_user_connections: 0 
```

在此之后，我尝试使用创建的用户名登录。

```
>mysql -ureadonly -preadonly
ERROR 1045 (28000): Access denied for user 'readonly'@'localhost' (using password: YES) 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:10:19.233

请无密码登录

> mysql -ureadonly

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:17:37.737

您创建了用户 'readonly'@'%'，但连接为 'readonly'@'localhost'，因为 'localhost' 是默认主机。

您需要在命令行中指定**--host (-h)**选项。

```
mysql -u readonly -preadonly -h <host_name> 
```

# php - 提取 xml 提要并检测更改/删除 php

> ID：13930485
> 
> 赞同：1
> 
> 时间：2012-12-18T10:04:52.420
> 
> 标签：php, xml, feed

我想设置一个 xml 提要轮询系统，它将每小时从给定的 URL 下载一个 xml 提要并检测提要是否已更改。如果有，它需要做一些事情。

我怎样才能有效地做到这一点？我要提取的提要里面有数千个项目，每个项目可能都有相当多的数据。

我希望能够检测到任何新数据/项目并将其保存到数据库中。
我希望能够检测到任何修改过的数据/项目并相应地更新数据库。
我希望能够检测到任何已删除的数据/项目并相应地更新数据库。

项目的顺序对我来说并不重要，所以如果顺序发生变化但没有其他变化，那么我们可以说提要是相同的。

我见过一些人提到对项目和整个提要进行散列处理以与之前下载的提要进行比较。如果有很多项目，这可能需要很长时间。

是否有一种简单的方法可以对上次下载的提要和新提要进行比较，然后以某种方式删除所有相同的项目？也许然后检查剩下的项目并进行比较？

我不确定正确的方法是什么。任何建议将不胜感激。

我将要提取的类似提要的示例是：

```
<properties>
<property>
<location>
<unit-number>301</unit-number>
<street-address>123 Main St</street-address>
<city-name>San Francisco</city-name>
<zipcode>94123</zipcode>
<county>San Francisco</county>
<state-code>California</state-code>
<street-intersection>Broadway</street-intersection>
<parcel-id>359-02-4158</parcel-id>
<building-name>The Avalon</building-name>
<subdivision></subdivision>
<neighborhood-name>Marina</neighborhood-name>
<neighborhood-description>The Marina is a neighborhood on the Northern part of San
Francisco</neighborhood-description>
<elevation>10</elevation>
<longitude>-70.1200</longitude>
<latitude>30.0000</latitude>
<geocode-type>exact</geocode-type>
<display-address>yes</display-address>
<directions>Take 101 North to Lombard St. Make a left on Lombard and 3rd right
onto Main. 123 is at the end of the block on the right. </directions>
</location>
<details>
<listing-title>A great deal in the Marina</listing-title>
<price>725000</price>
<year-built>1928</year-built>
<num-bedrooms>3</num-bedrooms>
<num-full-bathrooms>2</num-full-bathrooms>
<num-half-bathrooms>1</num-half-bathrooms>
<num-bathrooms></num-bathrooms>
<lot-size>0.25</lot-size>
<living-area-square-feet>1720</living-area-square-feet>
<date-listed>2010-06-20</date-listed>
<date-available></date-available>
<date-sold></date-sold>
<sale-price></sale-price>
<property-type>condo</property-type>
<description>Newly remodeled condo in great location.</description>
<mlsId>582649</mlsId>
<mlsName>SFAR</mlsName>
<provider-listingid>258136842</provider-listingid>
</details>
<landing-page>
<lp-url>http://www.BrokerRealty.com/listing?id=123456&amp;source=Trulia</lp-url>
</landing-page>
<listing-type>resale</listing-type>
<status>for sale</status>
<foreclosure-status></foreclosure-status>
<site>
<site-url>http://www.BrokerRealty.com</site-url>
<site-name>Broker Realty</site-name>
</site> 
```

ETC..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:11:39.180

> 是否有一种简单的方法可以对上次下载的提要和新提要进行比较，然后以某种方式删除所有相同的项目？

当然，事实上它应该很容易。看起来这些是房地产清单，对吧？如果是这样，则 MLS 提供者的名称和他们为列表发布的标识符形成一个唯一键：

```
<details>
    <!-- ... -->
    <mlsId>582649</mlsId>
    <mlsName>SFAR</mlsName>
    <provider-listingid>258136842</provider-listingid>
</details> 
```

既然您可以唯一标识每个列表，那么决定如何检测更改应该很简单。我会亲自将 XML 分解成一个多维关联数组，按键名对每个级别进行排序，然后对其进行序列化并通过哈希例程（例如 md5）运行它，因为那个非常吸引人的草率但它可以工作影响。事实上，你已经有了这样的想法，有点：

> 我见过一些人提到对项目和整个提要进行散列处理以与之前下载的提要进行比较。如果有很多项目，这可能需要很长时间。

通过散列文档中的每个唯一条目，您可以避免在单个条目更改时重新导入*整个内容。*将每个条目的哈希与数据库中的其余数据以及构成唯一键的信息一起粘贴。当哈希值发生变化时，XML 也发生了变化，值得重新导入。

再说一次，一旦您拥有了唯一的密钥，就可以非常容易地检测到新列表。数据库中没有匹配的键？进口。

同样，检测已删除的列表非常容易。密钥在数据库中但不在 XML 中？也许它应该被核弹。

# android - 如何从图库中删除图像？

> ID：13930493
> 
> 赞同：0
> 
> 时间：2012-12-18T10:05:23.410
> 
> 标签：android

这是我下面的源代码，当我将捕获图像保存在文件夹 mySDcard 文件夹“myfolder23”和移动默认图库中时，我如何只能保存在 Sdcard 文件夹“myfolder”而不是移动默认文件夹中？或者我如何从移动图库中删除仅在 SD 卡“myfolder23”中保存一份图像的任何想法？

```
import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.ImageView;
import android.widget.Toast;

   public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

 private EditText Donedate;
 private EditText Notes;
 private EditText Person;
 private  ImageView imageView1;
public  static Bitmap yourSelectedImage = null;
public static byte[] blob = null;

   private final int CAMERA_PICTURE = 1;
   private final int GALLERY_PICTURE = 2;
   private Intent pictureActionIntent = null;
   public final String SDCARD_ROOT_PATH =    
 Environment.getExternalStorageDirectory().getAbsolutePath();
public final String SAVE_PATH_IN_SDCARD = "/myFolder23/"; 
public final String IMAGE_CAPTURE_NAME    
 ="imgtemp"+System.currentTimeMillis()+".jpeg"; 

//public static        byte[] blob = new byte[2048];

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      imageView1 = (ImageView) findViewById(R.id.imageView1);
      Button Browse = (Button) findViewById(R.id.Browse);

      Browse.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
        //      Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        //      intent.setType("image/*");
         //     startActivityForResult(intent, 0);

                startDialog();
            }
        });        

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 

      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new 
     AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {

       ByteArrayOutputStream outStr = new ByteArrayOutputStream();
       yourSelectedImage.compress(CompressFormat.JPEG, 100, outStr);
        blob = outStr.toByteArray();

      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString()
                  ,blob

                  );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString()
          , blob

         );
      }
   }

   @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent  
 imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       if (requestCode == GALLERY_PICTURE) {
            Uri uri = imageReturnedIntent.getData();
            if (uri != null) {
                // User had pick an image.
                Cursor cursor = getContentResolver().query(uri, new String[] 
  {  android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
                cursor.moveToFirst();
                final String imageFilePath = cursor.getString(0);
                File photos = new File(imageFilePath);
                yourSelectedImage = decodeFile(photos);
                yourSelectedImage = 
   Bitmap.createScaledBitmap(yourSelectedImage, 150, 150, true);
                imageView1.setImageBitmap(yourSelectedImage);
                cursor.close();
            }
            else {
                Toast toast = Toast.makeText(this, "No Image is selected.", Toast.LENGTH_LONG);
                toast.show();
            }
        }
        else if (requestCode == CAMERA_PICTURE) {
            if (imageReturnedIntent.getExtras() != null) {
                // here is the image from camera
                yourSelectedImage = (Bitmap) 
   imageReturnedIntent.getExtras().get("data");
                imageView1.setImageBitmap(yourSelectedImage);
            }
        }

    }

   private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < 
 REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, 
  o2);
        }
        catch (FileNotFoundException e) {
        }
        return null;
    }

    private void startDialog() {
        AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
        myAlertDialog.setTitle("Upload Pictures Option");
        myAlertDialog.setMessage("How do you want to set your picture?");

        myAlertDialog.setPositiveButton("Gallery", new 
 DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT, 
  null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
            }
        });

        myAlertDialog.setNegativeButton("Camera", new 
    DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new    
 Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                File dir = new File(Environment.getExternalStorageDirectory() 
   + "/myFolder23");
                if(dir.exists() && dir.isDirectory()) {
                  // do something here
                 }
                else{
                    //create dir here
                    dir.mkdir(); 
                   }
                 Intent pictureActionIntent = new 
  Intent(MediaStore.ACTION_IMAGE_CAPTURE);  

                 pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, 
  Uri.fromFile(new
                         File(SDCARD_ROOT_PATH + 
  SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

                  startActivityForResult(pictureActionIntent,CAMERA_PICTURE);  

            }
        });
        myAlertDialog.show();
    }

} 
```

# linux - 如何在linux中搜索名称包含特定字符串的文件中的字符串？

> ID：13930501
> 
> 赞同：0
> 
> 时间：2012-12-18T10:05:59.853
> 
> 标签：linux, string, file, search

我想在名称中包含“20121218”的文件中递归搜索“MY:STRING”字符串，输出应该给我文件名和位置。搜索也应该在子目录下的文件中查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:08:44.360

使用`find`和`grep`：

```
find . -type f -name '*20121218*' -exec fgrep -l "MY:STRING" {} \; 
```

* * *

解释：

`find`命令查找。

`.`开始在当前目录中查找。

`-type f`只对文件感兴趣。

`-name`文件名匹配`'*20121218*'`

`-exec`对找到的文件执行以下命令。

`fgrep`固定字符串 grep。

`-l`仅打印包含匹配项的文件名。

`{}`来自`find`命令的匹配文件列表。

`\;`分隔符。

编辑：

```
$ find . -type f -mtime -18 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:17:32.867

使用递归`grep`，如下所示。没有必要`find`。

```
grep -Flr --include="*20121218*" "MY:STRING" /path/to/dir 
```

由于您正在搜索固定字符串而不是正则表达式，因此请使用该`-F`选项来加快速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-16T06:56:39.323

我更喜欢使用：

> 寻找 。-type f (-name ' *20121218* ') -print0 | xargs -0 grep --color -n MYSTRING

...它将向您显示 MYSTRING 位于包含 20121218 的文件中的所有文件路径、名称和行号（带颜色）。

前任。来自我的 Android 内核来源：

> 寻找 。-type f (-name ' *config* ') -print0 | xargs -0 grep --color -n MSM8974

返回很多，但这里有一些：

> ./arch/arm/mach-msm/Kconfig:254:config ARCH_MSM8974
> 
> ./arch/arm/mach-msm/Kconfig:255: 布尔“MSM8974”
> 
> ./arch/arm/configs/g2-kddi-perf_defconfig:41:CONFIG_ARCH_MSM8974=y
> 
> ./arch/arm/configs/g2-kddi-perf_defconfig:44:CONFIG_MACH_MSM8974_G2_KDDI=y
> 
> ./arch/arm/configs/lgl22_defconfig:314:CONFIG_ARCH_MSM8974=y
> 
> ./arch/arm/configs/g2-open_com-perf_defconfig:503:CONFIG_MACH_MSM8974_A1=y
> 
> ./arch/arm/configs/g2-open_com-perf_defconfig:516:CONFIG_SND_SOC_MSM8974=y

# android - Android 和 google cluod 消息传递

> ID：13930503
> 
> 赞同：0
> 
> 时间：2012-12-18T10:06:13.533
> 
> 标签：android

您好，我的应用中有谷歌云消息这是我的主要代码：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import pdf2app.actionBars.ActionBarMain;
import pdf2app.config.GlobalConfig;
import pdf2app.database.ObjectsDBAdapter;
import pdf2app.debug.MY_DEBUG;
import pdf2app.gallery.ListViewGallery;
import pdf2app.helpers.ThumbnailsGalleryGenerator;
import pl.spot.p2a.R;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.content.res.AssetManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Window;
import com.google.android.gcm.GCMRegistrar;
import com.radaee.pdf.Global; 

public class MainActivity extends Activity{
    public static final int DELETE = 0;
    public static final String SENDER_ID = "410016639123";
    private static final int APP_ID = 1;
    public static int VIEW_ID = 2; 
    private String registrationStatus = "Not yet registered";
    private boolean listviewSelected;
    private String TAG = "push";
     private String regId = "";
    Bundle extras;
    IntentFilter gcmFilter;
    private String broadcastMessage = "No broadcast message";
    /** Called when the activity is first created. */
     private BroadcastReceiver gcmReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                broadcastMessage = intent.getExtras().getString("gcm");

                if (broadcastMessage != null) {
                    // display our received message
                    Log.v("Broadcast", broadcastMessage);
                }

            }
        };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

//      checkNotNull(SENDER_ID, "SENDER_ID");
//      GCMRegistrar.checkDevice(this);
//      GCMRegistrar.checkManifest(this);

        requestWindowFeature(Window.FEATURE_ACTION_BAR);
        setContentView(R.layout.activity_main);
        extras = getIntent().getExtras();

        if (savedInstanceState == null) {

            if(extras == null) {
                GlobalConfig.setAPPLICATION_ID(APP_ID);

            } else {

                GlobalConfig.setAPPLICATION_ID(extras.getInt("application_id", 0));
            }
        } else {
           MY_DEBUG.print("SavedInstanceState is not null");
        }
        GlobalConfig.setBookmark(0);

        gcmFilter = new IntentFilter();
        gcmFilter.addAction("GCM_RECEIVED_ACTION");

        registerClient();

//      //notifications
//      final String regId = GCMRegistrar.getRegistrationId(this);
//      
//       
//      if (regId.equals("")) {
//          GCMRegistrar.register(this, SENDER_ID);
//      } else {
//          Log.v(TAG, "Already registered");
//          }
//
//      Log.v(TAG, "registration id  "+regId);

        SharedPreferences preferences = getSharedPreferences(GlobalConfig.getApp(), MODE_WORLD_READABLE);
        listviewSelected = preferences.getBoolean(ActionBarMain.LISTVIEW_SELECTED, false);
        GlobalConfig.setLastUpdate(preferences.getLong(ObjectsDBAdapter.TIMESTAMP, 0));
        GlobalConfig.getUser(this);

        Intent intent1 = new Intent(this, DownloaderService.class);
        intent1.putExtra(DownloaderService.TYPE, DownloaderService.GET_CONFIG);
        startService(intent1);

        AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>(){

            @Override
            protected Void doInBackground(Void... params) {
                CopyAssets();
                return null;
            }
            protected void onPostExecute(Void result) {
            };
        }.execute();
        finish();
    }

    public void registerClient() {

        try {
            // Check that the device supports GCM (should be in a try / catch)
            GCMRegistrar.checkDevice(this);

            // Check the manifest to be sure this app has all the required
            // permissions.
            GCMRegistrar.checkManifest(this);

            // Get the existing registration id, if it exists.
            regId = GCMRegistrar.getRegistrationId(this);

            if (regId.equals("")) {

                registrationStatus = "Registering...";

                // register this device for this project
                GCMRegistrar.register(this, SENDER_ID);
                regId = GCMRegistrar.getRegistrationId(this);

                registrationStatus = "Registration Acquired";

                // This is actually a dummy function.  At this point, one
                // would send the registration id, and other identifying
                // information to your server, which should save the id
                // for use when broadcasting messages.
                sendRegistrationToServer();

            } else {

                registrationStatus = "Already registered";

            }

        } catch (Exception e) {

            e.printStackTrace();
            registrationStatus = e.getMessage();

        }

        Log.d(TAG, registrationStatus);

        // This is part of our CHEAT.  For this demo, you'll need to
        // capture this registration id so it can be used in our demo web
        // service.
        Log.d(TAG, regId);

    }

     private void sendRegistrationToServer() {
            // This is an empty placeholder for an asynchronous task to post the
            // registration
            // id and any other identifying information to your server.
        }

        @Override
        public void onSaveInstanceState(Bundle savedInstanceState) {

            super.onSaveInstanceState(savedInstanceState);

            savedInstanceState.putString("BroadcastMessage", broadcastMessage);

        }

        @Override
        public void onRestoreInstanceState(Bundle savedInstanceState) {

            super.onRestoreInstanceState(savedInstanceState);

            broadcastMessage = savedInstanceState.getString("BroadcastMessage");
            Log.v("BroadCastMes", broadcastMessage);

        }   
    private void checkNotNull(Object reference, String name) {
        if (reference == null) {
            throw new NullPointerException(
                    getString(R.string.error_config, name));
        }
    }

    @Override
    protected void onPause() {
        GCMRegistrar.unregister(this);
        super.onPause();

    }
    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(gcmReceiver, gcmFilter);

    }

    @Override
    public void onDestroy() {

        GCMRegistrar.onDestroy(this);

        super.onDestroy();
    }
    /**
     * checks whether the sdcard is mounted
     * @param requireWriteAccess
     * @return whether the sdcard is mounted 
     */
    static public boolean hasStorage(boolean requireWriteAccess) {
        //TODO: After fix the bug,  add "if (VERBOSE)" before logging errors.
        String state = Environment.getExternalStorageState();
        Log.v("tag", "storage state is " + state);

        if (Environment.MEDIA_MOUNTED.equals(state)) {
            if (requireWriteAccess) {
                boolean writable = checkFsWritable();
                Log.v("tag", "storage writable is " + writable);
                return writable;
            } else {
                return true;
            }
        } else if (!requireWriteAccess && Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            return true;
        }
        return false;
    }

    private static boolean checkFsWritable() {
        // Create a temporary file to see whether a volume is really writeable.
        // It's important not to put it in the root directory which may have a
        // limit on the number of files.
        String directoryName = Environment.getExternalStorageDirectory().toString() + "/DCIM";
        File directory = new File(directoryName);
        if (!directory.isDirectory()) {
            if (!directory.mkdirs()) {
                return false;
            }
        }
        return directory.canWrite();
    }

    /**
     * copies all assets (icons, terms document) to the sdcard if they are missing. 
     */
    private void CopyAssets() {
        Global.Init(this);

        File f = new File(GlobalConfig.getBaseDirectory());
        if (!f.exists())
            f.mkdirs();

            File file = new File(GlobalConfig.getTermsFile());
            if(file.exists()){
                MY_DEBUG.LOG(getClass(), "getApplicationID" + GlobalConfig.getApplicationID());
                MY_DEBUG.LOG(getClass(), "getAPPLICATION_ID" + GlobalConfig.getAPPLICATION_ID());
                ThumbnailsGalleryGenerator.generateTermsThumbs(GlobalConfig.getTermsFile(), this);
                // TODO generate terms database pages
            } else {
                if(GlobalConfig.getAPPLICATION_ID() == APP_ID) {
                    AssetManager assetManager = getAssets();
                    String[] files = null;
                    try {
                        files = assetManager.list("Files");
                    } catch (IOException e) {
                        MY_DEBUG.print(e);
                    }

                    InputStream in = null;
                    OutputStream out = null;

                    try {
                        in = assetManager.open("Files/terms.pdf");

                        out = new FileOutputStream(GlobalConfig.getTermsFile());

                        copyFile(in, out);
                        in.close();
                        in = null;
                        out.flush();
                        out.close();
                        out = null;
                    } catch (IOException e) {
//                      e.printStackTrace();
//                      Log.e("tag", e.getMessage());
                    } 
                    ThumbnailsGalleryGenerator.generateTermsThumbs(GlobalConfig.getTermsFile(), this);
                }
            }

//        String[] icons = null;
//        try {
//          File iconsDir = new File(f.getPath() + "/icons");
//          if (!iconsDir.exists())
//              iconsDir.mkdirs();
//          
//          icons = assetManager.list("Files/icons");
//            for(String icon : icons) {
//              in = null;
//                out = null;
//                if(!(new File(GlobalConfig.getBaseDirectory() +"/icons" + icon).exists())){
//                  in = assetManager.open("Files/icons/"+icon);   // if files resides inside the "Files" directory itself
//                  out = new FileOutputStream(GlobalConfig.getBaseDirectory() + "/icons/" + icon);
//              
//                  copyFile(in, out);
//                  in.close();
//                  in = null;
//                  out.flush();
//                  out.close();
//                  out = null;
//                }
//            }
//        } catch (Exception e) {
//            Log.e("tag", e.getMessage());
//        }
    }

    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
          out.write(buffer, 0, read);
        }
    }

    @Override
    public void finish() {
        Intent intent = new Intent();
        if (listviewSelected) {
            intent = new Intent(MainActivity.this, ListViewGallery.class);
            intent.putExtra("ClassName", "action_bar_listView_icon");
            startActivity(intent);
        } else {
            intent = new Intent(MainActivity.this, CoverFlowActivity.class);
            intent.putExtra("ClassName", "action_bar_coverView_icon");
            startActivity(intent);
        }

        super.finish();
    }

} 
```

这是 GMCIntentService：

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String PROJECT_ID = "410016639123";

    private static final String TAG = "GCMIntentService";

    public GCMIntentService()
    {
        super(PROJECT_ID);
        Log.d(TAG, "GCMIntentService init");
    }

    @Override
    protected void onError(Context ctx, String sError) {
        // TODO Auto-generated method stub
        Log.d(TAG, "Error: " + sError);

    }

    @Override
    protected void onMessage(Context ctx, Intent intent) {

        Log.d(TAG, "Message Received");

        String message = intent.getStringExtra("message");

        sendGCMIntent(ctx, message);

    }

    private void sendGCMIntent(Context ctx, String message) {

        Intent broadcastIntent = new Intent();
        broadcastIntent.setAction("GCM_RECEIVED_ACTION");

        broadcastIntent.putExtra("gcm", message);

        ctx.sendBroadcast(broadcastIntent);

    }

    @Override
    protected void onRegistered(Context ctx, String regId) {
        // TODO Auto-generated method stub
        // send regId to your server
        Log.d(TAG, regId);

    }

    @Override
    protected void onUnregistered(Context ctx, String regId) {
        // TODO Auto-generated method stub
        // send notification to your server to remove that regId

    }

} 
```

并表现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="2"
    android:versionName="1"
    android:installLocation="auto">

    <uses-sdk
        android:minSdkVersion="12" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <permission android:name="pl.spot.p2a.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="pl.spot.p2a.permission.C2D_MESSAGE" /> 
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />

    <uses-permission android:name="android.permission.READ_OWNER_DATA" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo"
        android:largeHeap="true" >
        <activity
            android:name="pdf.activities.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.example.test" />  
            </intent-filter>   
        </receiver>
        <service
            android:name="com.example.test">
        </service>
    </application>
    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

</manifest> 
```

在日志中我没有得到 api 密钥。

```
This is log:
12-18 10:54:58.132: D/dalvikvm(4582): WAIT_FOR_CONCURRENT_GC blocked 0ms
12-18 10:54:58.192: D/dalvikvm(4582): GC_FOR_ALLOC freed 102K, 8% free 12264K/13319K, paused 14ms, total 14ms
12-18 10:54:58.192: I/dalvikvm-heap(4582): Grow heap (frag case) to 13.447MB for 614416-byte allocation
12-18 10:54:58.212: D/dalvikvm(4582): GC_CONCURRENT freed 1K, 8% free 12863K/13959K, paused 12ms+1ms, total 21ms
12-18 10:54:58.227: D/dalvikvm(4582): GC_FOR_ALLOC freed 0K, 8% free 12863K/13959K, paused 11ms, total 11ms
12-18 10:54:58.227: I/dalvikvm-heap(4582): Grow heap (frag case) to 15.789MB for 2457616-byte allocation
12-18 10:54:58.252: D/dalvikvm(4582): GC_CONCURRENT freed 0K, 7% free 15263K/16391K, paused 11ms+2ms, total 23ms
12-18 10:54:58.252: D/dalvikvm(4582): WAIT_FOR_CONCURRENT_GC blocked 6ms
12-18 10:54:58.277: D/GCMRegistrar(4582): resetting backoff for com.example.test
12-18 10:54:58.277: V/GCMRegistrar(4582): Registering app com.example.test of senders 410016639123
12-18 10:54:58.287: D/push(4582): Registration Acquired
12-18 10:54:58.302: D/dalvikvm(4582): Trying to load lib /data/data/pl.spot.p2a/lib/librdpdf.so 0x42818728
12-18 10:54:58.312: D/dalvikvm(4582): Added shared lib /data/data/pl.spot.p2a/lib/librdpdf.so 0x42818728
12-18 10:54:58.377: V/MainActivity(4582): getApplicationID1
12-18 10:54:58.377: V/MainActivity(4582): getAPPLICATION_ID1
12-18 10:54:58.377: V/generateTermsThumbs(4582): doc.open: /storage/sdcard0/pdf2app/1/terms.pdf
12-18 10:55:01.662: D/dalvikvm(4582): GC_CONCURRENT freed 997K, 12% free 15264K/17223K, paused 34ms+4ms, total 72ms
12-18 10:55:11.222: V/GCMBroadcastReceiver(4582): onReceive: com.google.android.c2dm.intent.REGISTRATION
12-18 10:55:11.222: V/GCMBroadcastReceiver(4582): GCM IntentService class: pl.spot.p2a.GCMIntentService
12-18 10:55:11.227: V/GCMBaseIntentService(4582): Acquiring wakelock 
```

当我更改清单行时：`android:name="com.example.test"`on

```
android:name=".GCMIntentService" I get error:
12-18 11:04:10.412: E/AndroidRuntime(6424): FATAL EXCEPTION: main
12-18 11:04:10.412: E/AndroidRuntime(6424): java.lang.RuntimeException: Unable to instantiate service com.example.test.GCMIntentService: java.lang.ClassNotFoundException: pl.spot.p2a.GCMIntentService
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2388)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.app.ActivityThread.access$1600(ActivityThread.java:140)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1309)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.os.Looper.loop(Looper.java:137)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at dalvik.system.NativeStart.main(Native Method)
12-18 11:04:10.412: E/AndroidRuntime(6424): Caused by: java.lang.ClassNotFoundException: com.example.test.GCMIntentService
12-18 11:04:10.412: E/AndroidRuntime(6424):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-18 11:04:10.412: E/AndroidRuntime(6424):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2385)
12-18 11:04:10.412: E/AndroidRuntime(6424):     ... 10 more 
```

你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:13:40.020

您必须提供

```
<service android:name="package_name.GCMIntentService" /> 
```

而不是您在清单文件中提供的包名称。

这`GCMIntentService`是我的服务课。

# jquery - 如何从另一个页面链接标签内容

> ID：13930504
> 
> 赞同：1
> 
> 时间：2012-12-18T10:06:18.493
> 
> 标签：jquery, html

在索引页面中，我可以看到当我单击选项卡二时，受尊重的内容将显示与单击类别页面标题选项卡二时相同，它必须打开索引页面并显示给受尊重的选项卡内容。

如果有人能说出我的解决方案，非常感谢。

[索引页面](http://www.creativecorp.in/tab/index.html)
[类别页面](http://www.creativecorp.in/tab/category.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:48:35.007

你必须做一个简单的哈希码逻辑你可以在这里看到一个我之前创建的现场演示[http://wbs.walkover.in/branding.php#custom](http://wbs.walkover.in/branding.php#custom) 或者你可以试试这个代码

```
$(document).ready(function() {
   if(window.location.hash){changeProduct();}
   $(window).bind('hashchange',function(){changeProduct();});
});

function changeProduct(){
    var val = window.location.hash.substring(1)

    switch(val)
        {
        case 'custom':
            $('.accclk').removeClass('active');
            $("#cst").addClass('active')
            $('.dnon').hide();
            $("#custom").show();
        break;
        case 'online':
            $('.accclk').removeClass('active');
            $("#oln").addClass('active')
            $('.dnon').hide();
            $("#online").show();
        break;
        case 'product':
            $('.accclk').removeClass('active');
            $("#prd").addClass('active')
            $('.dnon').hide();
            $("#product").show();
        break;
        case 'solution':
            $('.accclk').removeClass('active');
            $("#sol").addClass('active')
            $('.dnon').hide();
            $("#solution").show();
        break;
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:39:38.127

你有两个解决方案：

*   使其中一个页面成为另一个页面的子级，因为它可以从父级访问到子级，您可以通过`window.open` 示例来做到这一点：

如果你想`$('#cat_id').html('text');`在分类页面上访问，你可以从索引页面调用它`window.opener.$('#cat_id').html('text2');`。

*   制作共享 XML 文件并 `setInterval`让 JS 函数检查 XML 文件的任何更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:20:11.347

你必须建立一个像[这里这样的哈希逻辑](https://stackoverflow.com/questions/13924718/jquery-tabs-go-direct-to-specific-tab-from-url/13929851#13929851)

然后你可以像 /category.html#tab3 这样链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:33:47.907

假设您想创建一个网站，点击导航中的按钮将动态加载一些内容。有点像有机标签的东西，只有内容是动态加载的。假设 HTML 是这样的：

```
<nav>
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="about.php">About</a></li>
        <li><a href="contact.php">Contact</a></li>
    </ul>
</nav> 
```

**jQuery JavaScript**

JavaScript 是这里有趣的部分！这是简单的英语计划：

*   单击导航按钮时...
*   更改 URL 的哈希标记
*   当 URL 中的哈希标记更改时...
*   淡出旧内容
*   加载和淡入新内容
*   更新当前导航突出显示

那么，为什么要为“哈希标签”改变东西而烦恼呢？几个原因：

通过使用 Ben Alman 的[hashchange 事件插件](http://benalman.com/projects/jquery-hashchange-plugin/)，我们可以启用浏览器的后退/前进按钮。超现代浏览器自己支持 hashchange 事件，这个插件可以支持旧浏览器。我们可以在页面加载时查找哈希并加载适当的页面（即“深度链接”）

**先决条件**

我们将使用 jQuery 库、onhashchange 插件，然后最后加载我们自己的脚本。

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js'></script>
<script type='text/javascript' src='js/jquery.ba-hashchange.min.js'></script>
<script type='text/javascript' src='js/dynamicpage.js'></script> 
```

**代码转储**

```
$(function() {

    var newHash = "",
        $mainContent = $("#main-content"),
        $pageWrap = $("#page-wrap"),
        baseHeight = 0,
        $el;

    $pageWrap.height($pageWrap.height());
    baseHeight = $pageWrap.height() - $mainContent.height();

    $("nav").delegate("a", "click", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });

    $(window).bind('hashchange', function() {

        newHash = window.location.hash.substring(1);

        if (newHash) {
            $mainContent.find("#guts").fadeOut(200, function() {
                $mainContent.hide().load(newHash + " #guts", function() {
                    $mainContent.fadeIn(200, function() {
                        $pageWrap.animate({
                            height: baseHeight + $mainContent.height() + "px"
                        });
                    });
                    $("nav a").removeClass("current");
                    $("nav a[href='" + newHash + "']").addClass("current");
                });
            });
        };

    });

    $(window).trigger('hashchange');

});​ 
```

# android - DreamService 中的 RunOnUiThread？

> ID：13930505
> 
> 赞同：1
> 
> 时间：2012-12-18T10:06:23.350
> 
> 标签：android, dreamservice

我有一个 DreamService，我想在后台线程完成后开始更新一些 UI 内容（我正在引发一个事件来触发它）。在我的应用程序的主版本中，我只使用 RunOnUiThread 从事件启动 UI 更新，但 dreamService 不是 Activity 的后代，因此没有这种方法。奇怪的是，我没有收到错误，我只是得到一个空白屏幕。在我的目录中，我看到来自我的 UI 代码的警告，但它们是“空的”（没有消息，我只看到 3 次“W at com.my.app”，不同的代码行）

我认为最可能的原因是从线程中引发的事件触发 UI 更改，那么如何在 Dreamservice 中进行 UI 线程更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:35:45.130

感谢 njzk2 为我指明了正确的方向。[我在这里](https://stackoverflow.com/questions/6369287/accessing-ui-thread-handler-from-a-service)找到了答案，特别是：

```
Handler handler = new Handler(Looper.getMainLooper());
handler.post(something_to_run_on_main_thread); 
```

# php - 使 HTML 表单重定向到插入或更新页面

> ID：13930508
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:06:31.060
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:09:30.943

您需要首先检查它是否已设置：

```
<form action="<?php echo (isset($_GET['id'])) ? 'update.php?id='.$_GET['id']; : 'insert.php'; ?>" method="post"> 
```

我已经用`if else`三元运算符替换了你，以使内联代码也更整洁。

# android - 禁用 Android 键盘隐藏动画

> ID：13930511
> 
> 赞同：0
> 
> 时间：2012-12-18T10:06:50.873
> 
> 标签：android, animation, keyboard, hide

我的视图上有一个 EditText 框，只要 EditText 框被聚焦，它就会弹出键盘。键盘推动整个布局，以便 EditText 框可见......正如预期的那样。当我通过按下键盘隐藏按钮隐藏键盘时，我的布局返回到其原始状态。即向下移动。这个动作默认是动画的，但是我想禁用动画。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:19:54.897

如果您的活动清单中有此内容，只需将其删除

```
 android:windowSoftInputMode="stateVisible|adjustPan" 
```

# objective-c - NSLog 重定向到文件也会写入 /var/log/system.log

> ID：13930524
> 
> 赞同：0
> 
> 时间：2012-12-18T10:07:34.113
> 
> 标签：objective-c, macos, cocoa, nslog, freopen

我有一个应用程序，我必须为该应用程序维护一个日志文件。我正在使用 NSLog 进行日志记录。但这也会写入系统日志。如何摆脱这个。

方法 ：

```
NSString *appending_filename=[log_dir_path stringByAppendingString:@"/MyApp.log"];

const char *log_p = [appending_filename cStringUsingEncoding:NSUTF8StringEncoding];

newStderr= freopen(log_p, "a", stderr);

NSLog(@" This should only goes to MyApp.log"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:20:24.650

搜索并用谷歌做同样`SO`的`Quietlog`事情。复制`Quietlog()`到您的程序中，根据需要进行修改，然后

```
#define NSLog() Quietlog() 
```

在你的程序中。因此，您可以将输出重定向（和格式化）到您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:16:35.930

NSLog 将始终记录到系统日志，请参阅[文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/NSLogv)。

您可能想查看这篇文章以了解其他一些可以执行您想要的操作的日志库：

[是否有一个流行的开源 NSLog 替代品，只在 DEBUG 和不同的日志级别处理启用？](https://stackoverflow.com/questions/5320283/is-there-a-popular-open-source-nslog-replacement-that-handles-enabling-only-in-d)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:47:10.230

即使在尝试了一天不同的事情之后，我也没有得到任何解决方案。所以继续使用用户定义的函数本身。

# iphone - UINavigationController 和 UITabBarController 的情节提要问题

> ID：13930527
> 
> 赞同：1
> 
> 时间：2012-12-18T10:07:43.490
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller, storyboard

我总是使用`Storyboard`. 但目前他给我带来了一些困难。
您可以在下面看到我的故事板的屏幕截图。

问题出在右上角。我的视图控制器中有一个`UItableview`。当我按下一个单元格时。我对下一个视图进行了推送。但是当我这样做时，底部的标签栏消失了。

同样在我的视图中，我`UItableview`在`navigationbar`. 当我继续这两个按钮时，这两个按钮也消失了，我得到了一个后退按钮（我希望这两个按钮从前一个 viewController 中返回并摆脱后退按钮。）

我该如何解决这个问题？

我试过这个：

```
 self.tabBarController.navigationItem.hidesBackButton = YES;
    self.tabBarController.tabBar.hidden = NO; 
```

提前致谢！

亲切的问候

![在此处输入图像描述](../Images/f3b3ca4f8f63509b7cde3a3569869b0b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:18:32.587

我一直`NavigationController`对 a 的每个分支使用单独的`TabBarController`. 这可能会导致您的问题。尝试在`ViewController`连接到`TabBarController`.

另外，请务必致电：

```
self.tabBarController.navigationItem.hidesBackButton = YES; 
```

在你想要这种行为之后`viewDidLoad`。`ViewController`然后在你调用它之后，你需要实例化你想要使用的两个按钮。

编辑 - 查看[此答案](https://stackoverflow.com/questions/9276836/ios-5-segue-not-working-after-the-first-execution/9277472#9277472)以获取使用`Protocol`和委托登录用户的示例。

# java - Hibernate 4 中的程序化 SchemaUpdate

> ID：13930529
> 
> 赞同：2
> 
> 时间：2012-12-18T10:07:50.120
> 
> 标签：java, hibernate, java-ee-6

我正在尝试在我的 Java EE 6 应用程序中运行 SchemaUpdate。在以前的 Hibernate 版本中，我设法创建`Ejb3Configuration`并运行 SchemaUpdate。差不多是这样的：

```
Ejb3Configuration cfg = new Ejb3Configuration();
cfg.configure(PERSISTENCE_UNIT_NAME, null);
cfg.setProperty("hibernate.hbm2ddl.auto", "update");
cfg.setProperty("hibernate.dialect", dialect.getClass().getName());
Collection<String> entityClassNames = getEntityClassNames(PERSISTENCE_UNIT_NAME);
for (String className : entityClassNames)
{
    cfg.addAnnotatedClass(Class.forName(className));
}

EntityManagerFactory factory =  Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);

new SchemaUpdate(cfg.getHibernateConfiguration()).execute(true, true); 
```

显然，该类`Ejb3Config`已被弃用且不受支持。那么使用 hibernate 4 进行 SchemaUpdate 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:32:30.750

You say you're using EE 6\. Are you therefore using a persistence.xml and all the standard JPA stuff? If not, then that's a mistake, and the first step is to go back and fix that. Using a persistence.xml, you can specify schema update on startup with a property:

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="...">
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>

</persistence> 
```

Would that be suitable? Or do you have a partcular reason for doing this manually?

# php - php echo 至少需要 700-900 毫秒才能输出生成的内容

> ID：13930536
> 
> 赞同：0
> 
> 时间：2012-12-18T10:08:17.580
> 
> 标签：php, performance, echo

我有一个大约 6350268 个字符的字符串，当我将它们输出到浏览器时，它至少需要 700 毫秒，但通常需要 900 毫秒到 1000 毫秒的额外执行时间来输出它。

一代只占用了大约300ms，但加起来几乎是一整秒。

有没有办法加快回声输出？还是受输出到的浏览器的限制？

```
 // What this code does is take about 20.000 urls in the database and
    // and transform it into a collapsable folder tree
    // this process generates about 6300000 characters in about 300ms.

    $this->benchmark->mark('code_start');
    $query = $this->db->query("SELECT `url` from `site_pages` WHERE `url` not like '' order by `url` ASC");
    $arr = array();
    foreach($query->result() as $result)
        {
        $arr[$result->url] = $result->url;
        }
    $tree = $this->explodeTree($arr,'/',true);
    $str = $this->plotTree($tree);
    echo $str;
    $this->benchmark->mark('code_end');
    echo $this->benchmark->elapsed_time('code_start', 'code_end');
    echo "<P>done"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:17:09.717

您要向浏览器输出**6MB**？无论你怎么看，这个过程的一切都注定是缓慢的。我的猜测是 PHP 缓冲区和 Web 服务器缓冲/发送内容的组合需要这么多时间。担心这个特殊的瓶颈似乎是错误的关注点。您不应在浏览器上转储 6MB 的数据，而应使用更温和的 AJAX 加载。

# blender - 打开 Blender 时禁用开始屏幕

> ID：13930537
> 
> 赞同：10
> 
> 时间：2012-12-18T10:08:19.373
> 
> 标签：blender

当我打开 blender 2.64 时，它会自动显示开始/启动屏幕（我的意思是页面中间的小框，您可以在其中打开最近的 .blend 文件）。我想禁用它，但不知道如何。有人知道吗？

您可能想知道：您为什么要这样做？好吧，我有一个外部程序可以打开搅拌机并显示一个场景。这是一个演示文稿。我真的不喜欢在您真正看到场景之前必须手动关闭开始屏幕的方式。

注意：我不需要实际渲染某些东西，我希望 Blender 在显示场景后保持编辑模式。在后台打开搅拌器并渲染场景然后获取该图像而不是显示该渲染图像不是我需要的。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-25T02:16:18.653

在 File -> User Preferences 下，有一个名为“Interface”的选项卡（它位于最左侧）。在该选项卡下的右下角，应该有一个名为“Show Splash”的选项。只需取消勾选即可！

**编辑：**忘记提及您需要先另存为首选项才能正常工作。

# ruby-on-rails - Rails 关联缓存问题

> ID：13930540
> 
> 赞同：0
> 
> 时间：2012-12-18T10:08:30.350
> 
> 标签：ruby-on-rails, associations

我有以下模型/关联设置：

```
class Contact < ActiveRecord::Base
  has_and_belongs_to_many :assigned_users, class_name: 'User'

  def auto_assign_team_member(project)
    team = project.teams(true).order('last_assigned_contact_at ASC').first
    if team && (user = team.user)
      self.assigned_users << user
      team.update_attribute(:last_assigned_contact_at, Time.now)
    end
  end
end

class Team < ActiveRecord::Base
  belongs_to :user
  belongs_to :project
end

class User < ActiveRecord::Base
  has_many :teams
  has_many :projects, through: :teams
  has_and_belongs_to_many :assigned_contacts, class_name: 'Contact'
end

class Project < ActiveRecord::Base
  has_many :teams
  has_many :users, through: :teams
end 
```

我还有一组`Contact`实例，我遍历并执行该`auto_assign_team_member`方法。我的问题是lvar*几乎*每次执行都会`team`返回同一个团队。我在表中有两条记录，我的目的是将团队成员平均分配到关联中。*`teams``Contact#assigned_users`*

 *在控制台中，它可以工作：

```
project.teams(true).order('last_assigned_contact_at ASC').first #=> Team(user_id: 1)
project.teams(true).order('last_assigned_contact_at ASC').first.update_attribute(:last_assigned_contact_at, Time.now)
project.teams(true).order('last_assigned_contact_at ASC').first #=> Team(user_id: 2) 
```

知道我在哪里出错了吗？

**编辑**如果有人感兴趣，我已经创建了一个小应用程序来重现这个[https://github.com/injekt/teamr](https://github.com/injekt/teamr)

您可以简单`rake db:seed`地运行运行测试数据，输出应该均匀分布在每个用户上，而不是每次都显示同一个用户。

**编辑**事实证明，这样做`update_attribute(:last_assigned_contact_at, 'now()')`效果很好。所以也许 Rails 正在做一些时髦的事情？我意识到这需要高精度，但我认为 Rails 可以处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:43:10.417

似乎问题在于 Rails 从任何 Time 对象中舍入 usec，可能是因为只有 PostgreSQL 真正支持这种精度，它们是“没有时区的时间戳”数据类型。

时间戳属性与其他属性的处理方式不同，此模块为它们定义了一个自定义设置器：[https ://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb)

在比较和分配值之前，时间对象会被四舍五入[https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb#L46](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb#L46)

奇怪的问题是，对于内置的 Rails 时间戳列，精度是存在的。这是因为内置的时间戳通过调用绕过了自定义设置器`write_attribute(:column, value)`，它完全插入了整个时间值以及任何 usec。

所以解决方法是这样做而不是`team.update_attribute`调用

```
team.send(:write_attribute, :last_assigned_contact_at, Time.current)
team.save 
```

这有效地绕过了整个自定义设置器逻辑并像处理内置时间戳更新一样处理值。*

# c# - 在类中通过 this 访问

> ID：13930543
> 
> 赞同：3
> 
> 时间：2012-12-18T10:08:43.440
> 
> 标签：c#, .net

在我的 .NET 类中，我通过 .NET 访问我的属性和成员`this`。如果我在不使用`this`.

```
public class Test
{
    private string _test;

    public Test()
    {
        this.Test = "test";
        // vs. 
        Test = "test";

        // and
        this._test = "test";
        // vs. 
        _test = "test";
    }

    public string Test { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:11:01.590

编译器根本没有区别。使用更具可读性的内容。我更喜欢用`this`它来表明这是一个字段/属性而不是局部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:12:38.540

`This`只是指类的变量。当您尝试时，它可以避免您被绊倒：

```
private string Test;

public Test(String Test)
{
    this.Test = Test;
    // vs. 
    Test = Test;

} 
```

第一个将正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:12:31.737

在你有同名的参数之前，这并没有什么区别

```
public class Test
{
 private string _test;

 public Test(string Test,string _test)
 {
    this.Test = "test";//this refers invoking object Test i.e class varaible
    // vs. 
    Test = "test";//this refer method passed Test param

    // and
    this._test = "test";//this refers invoking object Test i.e class varaible
    // vs. 
    _test = "test";//this refer method passed Test param
}

  public string Test { get; set; }
} 
```

所以在上面的案例方法参数测试隐藏类测试参数，为了避免这种情况，你需要使用它来引用类的当前对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:10:48.870

您的代码没有区别，但有时`this`可以帮助您指定范围。

```
public Test(string _test)
{
    this._test = "test"; // sets class field
    // vs. 
    _test = "test"; // sets ctor parameter
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T10:11:06.120

就最终结果而言，没有区别。

一件事是，键入此内容将为您提供智能感知，仅列出该类中可用的成员。

此外，如果该方法是类的扩展方法，那么您将需要使用它来调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T10:11:14.873

用不用没区别`this`。这只是关于可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T10:13:10.930

查看 msdn 页面： http: [//msdn.microsoft.com/en-us/library/dk1507sz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/dk1507sz(v=vs.80).aspx)

在 C#`this`中，主要用于在变量和参数具有相同名称时增加可读性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T10:14:25.157

编译器没有区别。使用对您来说更具可读性。

```
public class Test 
{ 

private string _test;

public Test(string Test)
{
    this.Test = "test";
    // vs. 
    Test = "test";

    // and
    this._test = "test";
    // vs. 
    _test = "test";
}

  public string Test { get; set; }
} 
```

# php - 在 Magento 1.7 中显示带有自定义列表扩展的库存产品列表

> ID：13930545
> 
> 赞同：1
> 
> 时间：2012-12-18T10:08:46.627
> 
> 标签：php, magento

我正在使用“自定义列表”扩展 (github.com/openstream/CustomListing/)，它允许创建 CMS 页面，例如所有特价产品列表、畅销产品列表等等。

但它不能做我需要做的事情。我需要列出所有库存产品。这是我的 php 请求：

```
if (is_null($this->_productCollection)) {
        $this->_productCollection = Mage::getResourceModel('reports/product_collection');
        $this->_productCollection->joinField('inventory_in_stock', 'cataloginventory_stock_item', 'is_in_stock', 'product_id=entity_id','is_in_stock>=1', 'left')
            ->addAttributeToSelect('*')
            ->addStoreFilter();
    }
    return $this->_productCollection; 
```

此请求有效，但结果错误。它显示所有产品，所有库存和所有缺货产品。有人知道我的请求有什么问题吗？谢谢你的帮助 ！我的 magento 版本是：Community Edition 1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T10:23:03.183

以下代码片段将返回具有状态“启用”、可见性“目录、搜索”和库存可用性“有货”的类别的产品。

```
$productDetails = Mage::getModel('catalog/category')->load($cat_id)
                  ->getProductCollection()
                  ->addAttributeToSelect('*');

$productDetails->addAttributeToFilter('visibility', array('in' => array(4) )); 
$productDetails->addAttributeToFilter('status', array('in' => array(1) )); 
$productDetails->joinField('is_in_stock',
                            'cataloginventory/stock_item',
                            'is_in_stock',
                            'product_id=entity_id',
                            'is_in_stock=1',
                            '{{table}}.stock_id=1',
                            'left'); 
```

# c# - 鼠标悬停在文本块上时显示图像，wpf

> ID：13930548
> 
> 赞同：0
> 
> 时间：2012-12-18T10:09:02.383
> 
> 标签：c#, wpf

嗨，我有一个`Grid`这样的：

```
<Grid Margin="0,1,0,0" Height="35" VerticalAlignment="Top" HorizontalAlignment="Left" Width="158">
    <Grid x:Name="MainGrid" Height="35" Background="#00FFFFFF" Margin="0,1.5,0,-1.5" d:LayoutOverrides="VerticalMargin">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="35" />
            <ColumnDefinition Width="1" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Rectangle Fill="#FFFFFFFF" StrokeThickness="0" />
        <Image Height="35" Width="35" VerticalAlignment="Stretch" Style="{StaticResource GithHubImage}" HorizontalAlignment="Stretch" Margin="0" Source="/Images/computer.png" />

        <Rectangle Fill="#FFFFFFFF" Grid.Column="1" StrokeThickness="0" />

        <Grid x:Name="Wrapper" Visibility="Visible" Grid.Column="3">
            <Rectangle x:Name="Fill" Visibility="Collapsed" Width="12" Fill="#FFDDDDDD" HorizontalAlignment="Left" Margin="40,0,0,0" d:LayoutOverrides="Width" />
                <Grid x:Name="Arrow" Visibility="Collapsed" Margin="0,0,27,0">
                    <Image Width="10" Height="20" HorizontalAlignment="Right" RenderTransformOrigin="0.5,0.5">
                        <Image.RenderTransform>
                            <TransformGroup>
                                <RotateTransform Angle="180" />
                            </TransformGroup>
                        </Image.RenderTransform>

                        <Image.Source>
                            <DrawingImage>
                                <DrawingImage.Drawing>
                                    <GeometryDrawing Brush="{DynamicResource GitHubAccentBrush}" Geometry="M897.41,613.924L887.08,624.255 887.08,603.594 897.41,613.924z" />
                                </DrawingImage.Drawing>
                            </DrawingImage>
                        </Image.Source>
                    </Image>
              </Grid>
         </Grid>

         <TextBlock x:Name="Login" Grid.Column="3" Margin="7,0,0,0" VerticalAlignment="Center"  Text="swethapilli"  Height="25.976" />
    </Grid>
    <Rectangle Height="1" VerticalAlignment="Bottom" Fill="#FFFFFFFF" StrokeThickness="0" />
</Grid> 
```

现在看起来像![在此处输入图像描述](../Images/a50d4a0328c9f7df490cbc0ead008cf1.png)

当`MouseOver`on`Image`或`TextBlock`时它应该如下所示：

![在此处输入图像描述](../Images/026f6f64e5cdfea5c3e082249d27f610.png)

我的项目中有很多这样的单独网格，其中包含我需要实现相同样式的所有网格`Image`。`TextBlock`

但是当鼠标悬停在图像（猫图像）或`TextBlock`. 我想做它的风格。我已经有这样的故事板了。

```
<Storyboard x:Key="ShowFillStoryBoard">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Fill">
        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
    </ObjectAnimationUsingKeyFrames>

    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Arrow">
        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
    </ObjectAnimationUsingKeyFrames>
</Storyboard>

<Storyboard x:Key="HideFillStoryBoard">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Fill">
        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />

        <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Collapsed}" />
    </ObjectAnimationUsingKeyFrames>

    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Arrow">
        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />

        <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Collapsed}" />
    </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

但我不知道在哪里实现这个故事板。任何人都可以帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:51:16.877

我个人之前没有在样式中实现故事板，但是从阅读其他帖子中我很确定，您需要使用您的样式`<Triggers>`并将 for 设置`Trigger`为`IsMouseOver`您的故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:21:02.160

您可以通过使用 DataTriggers 来实现这一点，但您必须`Storyboard.TargetName=something`在`ShowFillStoryBoard`.

使用 DataTriggers 启动 Storyboard：

```
 <Style x:Key="MouseOverImageStyle" TargetType="Image">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsMouseOver, ElementName=textBlockName}" Value="True">
                <DataTrigger.EnterActions>
                    <BeginStoryboard x:Name="StartStoryboardBegin" Storyboard="{StaticResource ResourceKey=ShowFillStoryBoard}"></BeginStoryboard>
                </DataTrigger.EnterActions>
                <DataTrigger.ExitActions>
                    <RemoveStoryboard BeginStoryboardName="StartStoryboardBegin"></RemoveStoryboard>
                </DataTrigger.ExitActions>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

应用此样式，应在其上设置动画效果：`Style="{DynamicResource ResourceKey=MouseOverImageStyle}"`

# java - CAN 硬件接收缓冲器的掩码生成

> ID：13930555
> 
> 赞同：1
> 
> 时间：2012-12-18T10:09:43.083
> 
> 标签：java, embedded, bit-manipulation, microcontroller, can-bus

我正在使用 CAN（控制器局域网），我正在尝试提出一种算法来生成硬件缓冲区插槽的掩码和 ID。

例如：

我有两个整数数组，其中包含我希望微控制器接收的 ID，以及希望微控制器忽略的 ID。

我现在从最小掩码 0 到最大值，具体取决于表示 ID 的位数（11 位）。

所以我从 0 到 7FF 并尝试从我想要接受的 ID 列表中找到一个可以包含一条或多条消息的掩码，并且没有我不想接受的 ID。

最多7FF就可以了，这个算法可以用。尽管它不是最好的，但它已经达到了它的目的。但我试图找到更有效的东西，我也想把它应用到 29 位。从 0 到 7FFFFFFF 需要很长时间。

任何想法将不胜感激。

PS：算法应该是用Java编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:06:37.247

如果您不需要所有可能的解决方案，而只需要一个掩码列表，该列表将匹配“接受列表”中的至少一个项目并且不匹配“忽略列表”中的任何项目，那么您很可能通过以下方式改进您当前的算法编写一个简单的`O(n*m)`算法（其中`n`和`m`是列表长度）。

^(如果您的列表相对较短，这将比从 0 迭代到 2 29)快得多。此外，如果这些列表永远不会改变并且您只需要这样做一次，那么这可能是您的最佳选择。

伪算法将类似于：

```
for each candidate in the "accept list"
   do a bitwise AND with all items in the "ignore list"
   if there is a match then (break as soon as you find a match)
       this candidate cannot be matched
   else
       this candidate is one of the solutions 
```

当然，这将返回只能匹配单个项目的掩码。如果您想要最小的掩码集，您可以对候选列表进行后处理并丢弃已包含在其他掩码中的掩码（即附加的`O(n*n)`）。

如果您的“忽略列表”中有大量项目，并且需要经常查找列表，则将忽略的项目放入[trie](http://en.wikipedia.org/wiki/Trie)（或[radix trie](http://en.wikipedia.org/wiki/Radix_tree)或[DAWG](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)，这些更多或更少相同的东西）。

对于每个候选者，您将一点一点地遍历特里树并快速丢弃在掩码`1`中有位代替位的项目。`0`这会产生类似`O(n+m)`复杂性`O(m)`的东西（构建 trie，`O(1*n)`为接受列表中的每个项目查找 trie）：

```
(presuming you have built a trie from "ignore list" items)
for each candidate in the "accept list"
    get a binary representation of the candidate
    perform a dfs of the trie 
        if node at level k is 1 and candidate bit at position k is 0
        then 
            discard that subtree
        else
            continue searching until the last leaf 
```

这一切都取决于您的列表的实际长度，以及您需要执行此搜索的频率。如果您有两个列表，每个列表包含 10000 个项目，并且您只需要执行一次，我会选择第一个算法，它可能需要不超过几秒钟的时间来完成（确切的运行时间将取决于忽略列表中的早期匹配项）。

# ios - 为什么 CPTPlotSpaceAnnotation 出现远离绘图符号

> ID：13930557
> 
> 赞同：0
> 
> 时间：2012-12-18T10:09:51.913
> 
> 标签：ios, annotations, core-plot, symbols

我在使用 单击绘图符号时显示了注释`plotSymbolWasSelectedAtRecordIndex`，但是对于某些绘图符号，它们看起来很远，而对于符号附近的一些符号，就像它应该的那样。例如，当单击图表中的最小点时， 会`CTPPlotSpaceAnnotiation`出现在屏幕左侧，而不是该点附近。

编辑：我想出了问题所在。NSNumber x 没有值，因为变量 dates 是一个 NSString，我认为它必须先转换为 NSDate，然后再转换为 NSNumber。我应该从变量日期中获取月数吗？，以便在变量锚点中使用它，以便注释将显示在绘图符号附近。

另一个编辑：就像我上面说的，我将 NSString 日期转换为 NSDate，然后转换为 NSNumber，当我现在调试时，它显示了我认为的天数。但是现在当我单击绘图符号时，注释不再出现。例如，如果日期是 07.2010，则 x 获取值 299624400.0，并且注释不再起作用。

这是代码：

```
-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
    if ( symbolTextAnnotation ) {
        [graph.plotAreaFrame.plotArea removeAnnotation:symbolTextAnnotation];
        symbolTextAnnotation = nil;
    }

    // Setup a style for the annotation
    CPTMutableTextStyle *hitAnnotationTextStyle = [CPTMutableTextStyle textStyle];
    hitAnnotationTextStyle.color    = [CPTColor whiteColor];
    hitAnnotationTextStyle.fontSize = 16.0f;
    hitAnnotationTextStyle.fontName = @"Helvetica-Bold";

    // Determine point of symbol in plot coordinates
    NSNumber *x          = [[CPDStockPriceStore sharedInstance].dates objectAtIndex:index];
    NSNumber *y          = [[CPDStockPriceStore sharedInstance].prices objectAtIndex:index];
    NSArray *anchorPoint = [NSArray arrayWithObjects:x, y, nil];

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setMaximumFractionDigits:2];
    NSString *currentValue = [formatter stringFromNumber:[[CPDStockPriceStore sharedInstance].prices objectAtIndex:index]];
    currentValue = [currentValue stringByAppendingString:@"-"];

    NSString *currentValue1 = [[CPDStockPriceStore sharedInstance].dates objectAtIndex:index];

    // Now add the annotation to the plot area
    CPTTextLayer *textLayer = [[CPTTextLayer alloc] initWithText:[currentValue stringByAppendingString:currentValue1] style:hitAnnotationTextStyle];
    symbolTextAnnotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
    symbolTextAnnotation.contentLayer = textLayer;
    symbolTextAnnotation.displacement = CGPointMake(0.0f, 10.0f);
    [graph.plotAreaFrame.plotArea addAnnotation:symbolTextAnnotation];

} 
```

这是绘图、x 轴和 y 轴的代码：-(void)configurePlots {

```
// 1 - Get graph and plot space
graph = self.hostView.hostedGraph;
plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
// 2 - Create the three plots

aaplPlot = [[CPTScatterPlot alloc] init];
aaplPlot.dataSource = self;

aaplPlot.delegate = self;
aaplPlot.plotSymbolMarginForHitDetection = 20.0f;

aaplPlot.identifier = CPDTickerSymbolAAPL;
CPTColor *aaplColor = [CPTColor redColor];
[graph addPlot:aaplPlot toPlotSpace:plotSpace];

msftPlot = [[CPTScatterPlot alloc] init];
msftPlot.dataSource = self;
msftPlot.identifier = CPDTickerSymbolMSFT;
CPTColor *msftColor = [CPTColor clearColor];
[graph addPlot:msftPlot toPlotSpace:plotSpace];
// 3 - Set up plot space

NSArray *array = [[NSArray alloc] initWithObjects:aaplPlot, msftPlot, nil];
[plotSpace scaleToFitPlots:array];

CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];
plotSpace.xRange = xRange;
CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];
plotSpace.yRange = yRange;

// 4 - Create styles and symbols
CPTMutableLineStyle *aaplLineStyle = [aaplPlot.dataLineStyle mutableCopy];
aaplLineStyle.lineWidth = 2.5;
aaplLineStyle.lineColor = aaplColor;
aaplPlot.dataLineStyle = aaplLineStyle;
CPTMutableLineStyle *aaplSymbolLineStyle = [CPTMutableLineStyle lineStyle];
aaplSymbolLineStyle.lineColor = aaplColor;
CPTPlotSymbol *aaplSymbol = [CPTPlotSymbol ellipsePlotSymbol];
aaplSymbol.fill = [CPTFill fillWithColor:aaplColor];
aaplSymbol.lineStyle = aaplSymbolLineStyle;
aaplSymbol.size = CGSizeMake(6.0f, 6.0f);
aaplPlot.plotSymbol = aaplSymbol;

}

-(void)configureAxes {

// 1 - Create styles
CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
axisTitleStyle.color = [CPTColor whiteColor];
axisTitleStyle.fontName = @"Helvetica-Bold";
axisTitleStyle.fontSize = 12.0f;
CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
axisLineStyle.lineWidth = 2.0f;
axisLineStyle.lineColor = [CPTColor whiteColor];
CPTMutableTextStyle *axisTextStyle = [[CPTMutableTextStyle alloc] init];
axisTextStyle.color = [CPTColor whiteColor];
axisTextStyle.fontName = @"Helvetica-Bold";
axisTextStyle.fontSize = 11.0f;
CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor whiteColor];
tickLineStyle.lineWidth = 2.0f;
CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor blackColor];
tickLineStyle.lineWidth = 1.0f;
// 2 - Get axis set
CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;
// 3 - Configure x-axis
CPTAxis *x = axisSet.xAxis;
x.title = @"Ziua Lunii";
x.titleTextStyle = axisTitleStyle;
x.titleOffset = 15.0f;
x.axisLineStyle = axisLineStyle;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
x.labelTextStyle = axisTextStyle;
x.majorTickLineStyle = axisLineStyle;
x.majorTickLength = 4.0f;
x.tickDirection = CPTSignNegative;
CGFloat dateCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];
NSMutableSet *xLabels = [NSMutableSet setWithCapacity:dateCount];
NSMutableSet *xLocations = [NSMutableSet setWithCapacity:dateCount];
NSInteger i = 0;

for (NSString *date in [[CPDStockPriceStore sharedInstance] datesInMonth]) {
    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:date textStyle:x.labelTextStyle];
    label.rotation = M_PI/4;
    CGFloat location = i++;
    label.tickLocation = CPTDecimalFromCGFloat(location);
    label.offset = x.majorTickLength;
    if (label) {
        [xLabels addObject:label];
        [xLocations addObject:[NSNumber numberWithFloat:location]];
    }
}
x.axisLabels = xLabels;
x.majorTickLocations = xLocations;
// 4 - Configure y-axis
CPTAxis *y = axisSet.yAxis;
y.title = @"Pret";
y.titleTextStyle = axisTitleStyle;
y.titleOffset = -50.0f;
y.axisLineStyle = axisLineStyle;
y.majorGridLineStyle = gridLineStyle;
y.labelingPolicy = CPTAxisLabelingPolicyNone;
y.labelTextStyle = axisTextStyle;
y.labelOffset = 23.0f;
y.majorTickLineStyle = axisLineStyle;
y.majorTickLength = 4.0f;
y.minorTickLength = 2.0f;
y.tickDirection = CPTSignPositive;
NSInteger majorIncrement = 100;
NSInteger minorIncrement = 50;
CGFloat yMax = 1300.0f;  // should determine dynamically based on max price
NSMutableSet *yLabels = [NSMutableSet set];
NSMutableSet *yMajorLocations = [NSMutableSet set];
NSMutableSet *yMinorLocations = [NSMutableSet set];
for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {
    NSUInteger mod = j % majorIncrement;
    if (mod == 0) {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", j] textStyle:y.labelTextStyle];
        NSDecimal location = CPTDecimalFromInteger(j);
        label.tickLocation = location;
        label.offset = - y.majorTickLength - y.labelOffset;
        if (label) {
            [yLabels addObject:label];
        }
        [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];
    } else {
        [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];
    }
}
y.axisLabels = yLabels;
y.majorTickLocations = yMajorLocations;
y.minorTickLocations = yMinorLocations;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:27:44.473

看起来您正在使用 x 值的数据索引。这很简单; 根本不需要转换日期：

```
NSNumber *x = [NSNumber numberWithUnsignedInteger:index]; 
```

# asp.net - 设置asp:listitem生成的标签的tabIndex

> ID：13930559
> 
> 赞同：0
> 
> 时间：2012-12-18T10:10:00.827
> 
> 标签：asp.net

如果我创建一个这样的单选按钮组：

```
<asp:radiobuttonlist ID="rbListHeader" runat="server" RepeatDirection="Horizontal" Font-Size="12px" TabIndex="-1">
    <asp:listitem value="London" />
    <asp:listitem value="Newcastle" />
</asp:radiobuttonlist> 
```

呈现的 html 包括每个单选按钮的 html 标签。此标签显示在单选按钮旁边，并在屏幕上显示“伦敦”或“纽卡斯尔”。我将单选按钮列表的 TabIndex 设置为 -1，但在表单中切换焦点移动到“伦敦”标签。由于这个标签似乎是自动生成的，有没有办法将生成的标签的 TabIndex 设置为-1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:21:21.257

您可以通过以下代码实现此目的：

```
foreach (ListItem li in RadioButtonList1.Items)
    {       
        li.Attributes.Add("tabindex", "-1");
        counter -=1;
    } 
```

# javascript - Javascript翻转动画错误

> ID：13930560
> 
> 赞同：1
> 
> 时间：2012-12-18T10:10:01.273
> 
> 标签：javascript, jquery, animation, jquery-animate

我有一个绝对定位的 div 网格，每个包含 3 个图像。这些图像通过类（.z1、.z2 和 .z3）设置的 z-index 堆叠在一起。

我将我的 div 选择到一个数组中并将 div 随机化。

我使用 .animate 来“翻转”第一个图像并显示第二个图像。（.z3 被隐藏）然后我遍历这些 div 并切换类，z1 变为 z3（在底部），z3 移动到 z2（现在在中间），z2 变为 z1。

这在大多数情况下都有效，但偶尔会出现一个看似随机的问题，即 div 中没有显示任何图像。

除了 jQuery slideToggles 之外，我对其他任何东西都毫无用处，所以希望能得到一些帮助。

HTML

```
<div class="grid"> 
     <div class="r1 c1">
         <img src="<?=$grid->image_1_1->getPath()?>" width="149" height="104" class="z1" alt="">
         <img src="<?=$grid->image_1_2->getPath()?>" width="149" height="104" class="z2" alt="">
         <img src="<?=$grid->image_1_3->getPath()?>" width="149" height="104" class="z3" alt="">
     </div>
     <div class="r1 c2">
         <img src="<?=$grid->image_2_1->getPath()?>" width="137" height="104" class="z1" alt="">
         <img src="<?=$grid->image_2_2->getPath()?>" width="137" height="104" class="z2" alt="">
         <img src="<?=$grid->image_2_3->getPath()?>" width="137" height="104" class="z3" alt="">
     </div> 
```

网格中有更多的 div，但它们在布局上都是相同的。r1/c1 类只是 top: 和 left: 的位置：

jQuery

```
//Find all sub divs in the grid and trigger the flip on them (in order currently)
function begin() {
    var index = 0;

    window.setInterval(function() {
        var divs = $('div.grid div');

        divs.sort(function() { return 0.5 - Math.random();});

        flip(divs[index]);

        if(++index == divs.length)
            index = 0;

    }, 1000);
}
//homepage grid animation
function flip(targetDiv) {

    //Function begins gather variables      
    // All images inside target div are same size

    var currWidth= $(targetDiv).children('img:eq(0)').width();
    var currHeight= $(targetDiv).children('img:eq(0)').height();
    var currMargin = currWidth/2;

    //Remove .z3 - the "bottom" image so that it is not seen during flip
    $('img.z3').width('auto').hide();
    $('img.z2, img.z1').css('margin-left', 0).show();

    // The Animation
    $(targetDiv).children('img.z2').stop().css({width:0,height:''+currHeight+'px',marginLeft:''+currMargin+'px',opacity:'1'});

    $(targetDiv).children('img.z1').stop().animate({width:0,height:''+currHeight+'px',marginLeft:''+currMargin+'px',opacity:'1'},
        {duration:1000});
    $(targetDiv).children('img.z2').stop().animate({width:+currWidth,height:''+currHeight+'px',marginLeft:0,opacity:'1'},
        {duration:1000});

    //Swap classes
    $(targetDiv).children('img').each(function () {
        var $self = $(this);

        if ($self.hasClass('z1')) {
            $self.removeClass('z1').addClass('z3');
            $self.width(currWidth);
        } else if ($self.hasClass('z2')) {
            $self.removeClass('z2').addClass('z1');
        } else if ($self.hasClass('z3')) {
            $self.removeClass('z3').addClass('z2');
        }
    });

    //Trying to combat items with 0px width on second run through
    //$(targetDiv).children('img').width(currWidth);
}

//Trigger Rotation
begin() 
```

不幸的是，我无法发布指向我的页面的链接，因为它是一个客户端，并且在一个私人服务器上，但我希望你能有任何见解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:17:03.260

通常我一点击提交就解决了，

问题出在我的开始功能中。

每次间隔运行而不是一次并循环遍历时，我都会得到 div 数组。

将 div 选择移出 window.interval 解决了这个问题。

# c# - 开放模态和非模态

> ID：13930561
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:10:04.890
> 
> 标签：c#, winforms, dialog

首先：我是一个 Winform 新手……但我正在尝试 :)

我的客户想要这样的东西：

简单场景：
1）从我的主窗体打开一个非模式对话框（用于阅读和记笔记）。
2）从我的主窗体打开一个模式对话框。
3) 新的模态对话框不能阻止非模态对话框获得焦点。

我的问题：
这可能吗？如果是这样：如何？

问候
Smoller - WinForm 新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:13:24.310

不，这是不可能的。模态对话框将在主 UI 线程上调用，并将阻塞线程直到它关闭。

为此，您最好使用两个非模态对话框，然后将第二个对话框放在 Z 顺序的更高位置，使其显示在第一个对话框的前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:40:17.430

您描述它的方式并不完全可能，但您可以使用表单的 Owner 属性来接近您想要的行为。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx)

从您的主表单中，您希望通过设置 Ower 属性来生成新表单，如下所示：

```
var form = new MyForm();
form.Owner = this; // assuming this is your main form
form.Show(); 
```

或者您可以简单地将所有者作为参数传递给 Show 方法：

```
var form = new MyForm();
form.Show(this); 
```

这可能会有所帮助的原因是因为设置 Owner 提供了以下行为（来自文档）。

> 拥有的表单也永远不会显示在其拥有者表单的后面。You can use owned forms for windows such as find and replace windows, which should not disappear when the owner form is selected.

但是与模态对话框不同，您的主窗口可以有多个子窗体。

# jquery - Mosaic Jquery 插件 Wordpress 深灰色文本

> ID：13930566
> 
> 赞同：1
> 
> 时间：2012-12-18T10:10:22.507
> 
> 标签：jquery, wordpress, plugins, mosaic

我正在尝试使马赛克 jQuery 插件在 wordpress 中工作，直到现在我不得不使用 iframe 来完成它，这有点痛苦。

在 wordpress 中使用时的问题是文本是非常深的灰色而不是白色。

似乎看到 css 和 js 文件似乎已加载，并且我在 chrome 检查元素控制台中没有看到任何错误。

[http://rise-sandbox1.co.uk/social-test-for-tudor/](http://rise-sandbox1.co.uk/social-test-for-tudor/)

使用的 CSS

```
 <style type="text/css">
.clearfix: after; {
 content: " "; /* Older browser do not support empty content */
 visibility: hidden;
 display: block;
 height: 0;
 clear: both;
}
.details{ margin:15px 20px; }   
h6{ font:300 16px 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height:160%;         letter-spacing:0.15em; color:#fff; text-shadow:1px 1px 0 rgb(0,0,0); }
p{ font:300 12px 'Lucida Grande', Tahoma, Verdana, sans-serif; color:#aaa; text-    shadow:1px 1px 0 rgb(0,0,0);}
a{ text-decoration:underline; }

.mosaic-block {
float:left;
position:relative;
overflow:hidden;
width:400px;
height:250px;
margin:10px;
background:#111 url(http://rise-sandbox1.co.uk/img/progress.gif) no-repeat center center;
border:1px solid #fff;
-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.5);
}

.mosaic-backdrop {
    display:none;
    position:absolute;
    top:0;
    height:100%;
    width:100%;
    background:#111;
}

.mosaic-overlay {
    display:none;
    z-index:5;
    position:absolute;
    width:100%;
    height:100%;
    background:#111;
}
    .bar .mosaic-overlay {
        bottom:-100px;
        height:100px;
        background:url(http://rise-sandbox1.co.uk/img/bg-black.png);
    }
</style> 
```

和 javascript

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script></script>
    <script type="text/javascript" src="http://rise-sandbox1.co.uk/js/mosaic.1.0.1.js"></script>    
<script type="text/javascript">  
        jQuery(function($){
            $('.bar').mosaic({
                animation   :   'slide'
            });
        });

    </script> 
```

我正在为帖子和页面使用一个名为特定 css/javascript 的插件来实现通常运行良好的代码 html

```
<div class="mosaic-block bar">
<a href="http://www.nonsensesociety.com/2011/01/sloppy-art/" target="_blank" class="mosaic-overlay">
<div class="details">
<h6>Sloppy Art - A Mess of Inspiration</h4>
<p>via the Nonsense Society (image credit: Florian</p>
</div>
</a>
<div class="mosaic-backdrop"> <img src="http://rise-sandbox1.co.uk/images/.jpg"/></div>
</div>      
<div class="clearfix"></div>
</div> 
```

希望有人可以帮助这让我发疯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:41:54.557

好的全部固定

最终有效的代码是

```
<div class="mosaic-block bar">
<div class="mosaic-overlay">
<div class="details">
<a href="http://rise-sandbox1.co.uk/collection/">
<h6>header text</h4>
<p>View our latest Cashmere range of Baby Blankets</p></a>
</div>
</div>
<div class="mosaic-backdrop">
<img src="http://rise-sandbox1.co.uk/images/picture.jpg">
</div>      
</div> 
```

和带有 javascript 的 css

```
<style type="text/css">
.mosaic-overlay .details{ margin:15px 20px; }   
h6{ font:300 16px 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height:160%;     letter-spacing:0.15em; color:#fff; text-shadow:1px 1px 0 rgb(0,0,0); }
p{ font:300 12px 'Lucida Grande', Tahoma, Verdana, sans-serif; color:#fff; text-   shadow:1px 1px 0 rgb(0,0,0);}
a{ 
color: #fff;
text-decoration:none; }

.mosaic-block {
float:left;
position:relative;
overflow:hidden;
width:460px;
height:300px;
margin:10px;
background:#111 url(http://rise-sandbox1.co.uk/img/progress.gif) no-repeat center    center;
border:1px solid #fff;
-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.5);
}

.mosaic-backdrop {
    display:none;
    position:absolute;
    top:0;
    height:100%;
    width:100%;
    background:#111;
}

.mosaic-overlay {
    display:none;
    z-index:5;
    position:absolute!important;
    width:100%;
    height:100%;
    background:#111;
}
    .bar .mosaic-overlay {
        bottom:-100px;
        height:100px;
        background:url(http://rise-sandbox1.co.uk/img/bg-black.png);
    }
</style>
    <script type="text/javascript" src="http://rise-sandbox1.co.uk/wp-includes/js/jquery/jquery.js"></script></script>
    <script type="text/javascript" src="http://rise-sandbox1.co.uk/js/mosaic.1.0.1.js"></script>    
<script type="text/javascript">  
 jQuery(function($){
$('.bar').mosaic({
animation   :   'slide'
});
     });

</script> 
```

# php - 如何使用 Jquery mobile 将表格样式设置为响应式？

> ID：13930567
> 
> 赞同：2
> 
> 时间：2012-12-18T10:10:23.083
> 
> 标签：php, jquery, html, css, jquery-mobile

如何使用 Jquery mobile 将表格样式设置为响应式？

目前我正在为 magento 定制一个 jquery 移动主题。但是表格没有响应。当手机屏幕太小时，水平滚动就来了。

[我从这里](http://jquerymobile.com/branches/tables/docs/tables/table-reflow.html)添加了一个 css以及 jquery.mobile-1.0b3.min.css。

```
.ui-table {
   border: 0;
   border-collapse: collapse;
   padding: 0;
   width: 100%;
}
.ui-table th,
.ui-table td {
  line-height: 1.5em;
  text-align: left;
  padding: .4em .5em;
  vertical-align:top;
}
.ui-table th {
  font-weight: bold;
}
.ui-table caption {
  text-align:left;
  margin-bottom:1.4em;
  opacity:50%;
}

/* Add strokes between each row */
.table-stroke thead th {
  border-bottom: 1px solid #d6d6d6; /* non-RGBA fallback */
  border-bottom: 1px solid rgba(0, 0, 0, .1);
}
.table-stroke tbody th,
.table-stroke tbody td {
  border-bottom: 1px solid #e6e6e6; /* non-RGBA fallback  */
  border-bottom: 1px solid rgba(0, 0, 0, .05);
}

/* Add alternating row stripes */
.table-stripe tbody tr:nth-child(odd) td,
.table-stripe tbody tr:nth-child(odd) th {
  background-color: #eeeeee; /* non-RGBA fallback  */
  background-color: rgba(0,0,0,0.04);
}
/* Add stroke to the header and last item */
.table-stripe thead th,
.table-stripe tbody tr:last-child {
  border-bottom: 1px solid #d6d6d6; /* non-RGBA fallback  */
  border-bottom: 1px solid rgba(0, 0, 0, .1);
} 
```

但它仍然不起作用。我的 CSS 和 JS 是，

1.  jquery.mobile-1.0b3.min.css
2.  jquery-1.6.2.min.js
3.  jquery.mobile-1.0b3.min.js

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:50:53.990

您可能对 JQM 1.3 版本的[响应式表](http://jquerymobile.com/test/docs/tables/index.html)和[响应式网格感兴趣。](http://jquerymobile.com/test/docs/demos/grids/rwd-basics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:02:21.547

已经有一个用于响应式表格视图的活动 jQM 插件，你可以在这里找到它：[https ://github.com/frequent/tableview](https://github.com/frequent/tableview)

演示可以在这里找到：[http ://www.franckreich.de/jqm/tableview/demo.html](http://www.franckreich.de/jqm/tableview/demo.html)

如果您需要更多信息，您可以随时询问开发人员，他是该社区的活跃成员：[https ://stackoverflow.com/users/536768/frequent](https://stackoverflow.com/users/536768/frequent)

**警告：**

这个实现需要两个额外的 js 文件 + 一个 CSS。

# javascript - Meteorjs 有效显示管理面板

> ID：13930569
> 
> 赞同：1
> 
> 时间：2012-12-18T10:10:26.853
> 
> 标签：javascript, web, meteor

我已经安装了陨石和路由器包

现在我有一个主页 app.html

```
<body>
  <div class="container">
    <div class="page-header">
      <a href="/">
        <h1>Mi page</h1>
      </a>
    </div>
    <div class="content">
      {{renderPage}}
    </div>
  </div>
</body> 
```

好的，现在所有页面都在 {{renderPage}} 中呈现。

现在用户转到 /panel 并渲染用户面板，这是棘手的部分

此部分有一个 cpanel_nav_div 和一个 cpanel_body，我认为当用户留在面板部分时，cpanel_nav_div 不会在用户每次单击面板选项链接之一时呈现，因此只有 cpanel_body 更改更有效。

最好的方法是如何做到这一点？

它有办法做其他路由器和过滤路由，所以当一个路由匹配 /panel/... 所有内容都进入 cpanel_body 而不是进入 {{renderPage}} ????

根据会话设置 Session.get 和 Session.set 并在 cpanel_body 内渲染内容（这样我们会错过路由）

每次都使用路线并渲染 cpanel_nav 和 cpanel_body 吗？

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:36:39.100

[您可以告诉 Meteor 不要使用preserve](http://docs.meteor.com/#template_preserve)重新渲染模板的一部分：

> 您可以在重新渲染期间“保留”一个 DOM 元素，将现有元素留在文档中，同时替换周围的 HTML。这意味着重新渲染模板不需要干扰其包含的文本字段、iframe 和其他敏感元素。要保留的元素必须同时作为旧 DOM 中的节点和新 HTML 中的标签出现。Meteor 将修补保留元素周围的 DOM。
> 
> 例如，要保留模板 'foo' 中具有 id 的所有元素，请使用：
> 
> ```
>  Template.foo.preserve({
>    'input[id]': function (node) { return node.id; }
>  }); 
> ```

所以你可能想使用 preserve 方法告诉 Meteor 不要重新渲染你的 cpanel_nav_div 元素。

# iphone - .a 之间的函数调用链接是运行时吗？

> ID：13930572
> 
> 赞同：0
> 
> 时间：2012-12-18T10:10:44.317
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我对 .a 之间的函数调用有疑问。考虑我有一个工作区，其中有两个项目，每个项目都会创建 .a 并且我已经在主项目中添加了这些 .a，现在如果一个项目对另一个项目有函数调用，是否需要第二个项目的 .a应该与第一个项目一起构建以使链接正确，或者所有链接都将在运行时发生，所以我们只能在主项目中添加所有.a？

希望我的问题很清楚，如果没有，请告诉我，我会提供更多细节。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:58:26.790

静态库 (.a) 只是目标文件的存档，即已编译源文件的集合。链接发生在构建主可执行文件时。因此，您可以分别创建两个静态库，即使一个库对另一个库进行了函数调用。

# google-app-engine - ndb 建模一对多：重复 KeyProperty 与外键的优点

> ID：13930573
> 
> 赞同：15
> 
> 时间：2012-12-18T10:10:44.280
> 
> 标签：google-app-engine, app-engine-ndb

我的问题是关于在 ndb 中建模一对多关系。我知道这可以通过（至少）两种不同的方式完成：使用重复属性或使用“外键”。我在下面创建了一个小例子。基本上我们有一篇文章，它可以有任意数量的标签。假设标签可以删除，但添加后无法更改。我们还假设我们不担心交易安全。

**我的问题是：建模这些关系的首选方式是什么？**

我的考虑：

*   方法 (A) 需要对添加到文章的每个标签进行两次写入（一个用于文章，一个用于标签），而方法（B）只需要一次写入（仅标签）。
*   方法 (A) 在获取文章的所有标签时利用 ndb 的缓存机制，而在方法 (B) 的情况下需要查询（另外还有一些自定义缓存）

我在这里遗漏了一些东西，还有其他需要考虑的因素吗？

非常感谢您的帮助。

**示例（A）：**

```
class Article(ndb.Model):
    title = ndb.StringProperty()
    # some more properties
    tags = ndb.KeyProperty(kind="Tag", repeated=True)

    def create_tag(self):
        # requires two writes
        tag = Tag(name="my_tag")
        tag.put()
        self.tags.append(tag)
        self.put()

    def get_tags(self):
        return ndb.get_multi(self.tags)

class Tag(ndb.Model):
    name = ndb.StringProperty()
    user = ndb.KeyProperty(Kind="User") #  User that created the tag
    # some more properties 
```

**示例（B）：**

```
class Article(ndb.Model):
    title = ndb.StringProperty()
    # some more properties

    def create_tag(self):
        # requires one write
        tag = Tag(name="my_tag", article=self.key)
        tag.put()

    def get_tags(self):
        # obviously we could cache this query in memcache
        return Tag.gql("WHERE article :1", self.key)

class Tag(ndb.Model):
    name = ndb.StringProperty()
    article = ndb.KeyProperty(kind="Article")
    user = ndb.KeyProperty(Kind="User") #  User that created the tag
    # some more properties 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:48:30.030

您是否看过以下有关使用`Structured Properties` [https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)的内容。`Contact`那里的简短讨论`Addresse`可能会简化您的问题。另请查看[https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties](https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties)。讨论非常简短。

此外，展望不允许加入的事实，选项`A`看起来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T21:20:25.310

如前所述，Datastore 中没有连接，因此所有“外键”概念都不适用。可以做的是使用 Query 类来查询您的数据存储以获取正确的标签。

例如，如果您使用 Endpoints，则：

```
class Tag(ndb.model):
    user = ndb.UserProperty() 
```

并且在请求期间执行：

```
query.filter(Tag.user == endpoints.get_current_user()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T23:00:45.137

在大多数情况下应该首选方法 (A)。虽然添加标签需要两次写入，但这可能比读取标签的频率要低得多。只要您没有大量标签，它们都应该适合重复的 Key 属性。

正如您所提到的，通过键获取标签比执行查询要快得多。此外，如果您只需要标签的名称和用户，您可以使用`User`作为父键和`Name`标签的 id 创建标签：

```
User -> Name -> Tag 
```

要创建此标签，您将使用：

```
tag = Tag(id=name, parent=user, ...)
article.tags.push(tag)
ndb.put_multi([tag, article]) 
```

然后当你检索标签时，

```
for tag in article.tags:
    user = tag.parent()
    name = tag.id() 
```

然后，您存储的每个密钥都`Article.tags`将包含用户密钥和`Tag`名称！这将使您免于阅读`Tag`以获取这些值。

# angularjs - 以中间件模式构建服务，如 rack 和 wsgi

> ID：13930575
> 
> 赞同：5
> 
> 时间：2012-12-18T10:10:48.907
> 
> 标签：angularjs

我有各种角度服务，它们在服务器上调用 rest api。

如果用户未通过身份验证，则服务器始终返回地图 - {authenticated: false}，否则返回预期数据。

我想创建一个总是拦截返回值的中间件函数。然后它根据结果设置 $route。如果用户未通过身份验证，则将他重定向到某个路由。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:04:06.063

Angular 的 $http 服务有 responseInterceptors，这可能就是你要找的。

在这里查看官方文档：

[http://docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.$http)

在**响应拦截器**部分下。

另一个解释响应拦截器的教程也可以在这里找到。

[http://bl.ocks.org/3410406](http://bl.ocks.org/3410406)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T19:13:20.830

[angular-http-auth](https://github.com/witoldsz/angular-http-auth)已经被构建来做你想要在 AngularJS 中完成的事情

# javascript - jQuery .hide() 在某些浏览器中不起作用

> ID：13930585
> 
> 赞同：11
> 
> 时间：2012-12-18T10:11:00.473
> 
> 标签：javascript, jquery, hide, show

我们正在使用 jQuery .hide() 隐藏选择输入中的选项 - 当一个月少于 31 天时。它适用于 Google Chrome 和 FireFox，但不适用于 Internet Explorer、Opera 和 Safari。这是我们正在使用的 JavaScript 代码：

```
$(function() {
    // Show and hide days according to the selected year and month.
    function show_and_hide_days(fp_form) {
        var select_year= $(fp_form).find("select.value_year");
        var select_month= $(fp_form).find("select.value_month");
        var select_day= $(fp_form).find("select.value_day");
        var selected_year= parseInt($(select_year).val());
        var selected_month= parseInt($(select_month).val());
        var selected_day= parseInt($(select_day).val());
        var days_in_month= new Date(selected_year, selected_month, 0).getDate();
        if ((days_in_month >= 28))
        {
            // If selected day is bigger than the number of days in the selected month, reduce it to the maximal day in this month.
            if (selected_day > days_in_month)
            {
                $(select_day).val(days_in_month);
            }
            // Show all the days in this month and hide days which are not in this month.
            $(select_day).find("option").each(function() {
                var day= parseInt($(this).val());
                if (day <= days_in_month)
                {
                    $(this).show();
                }
                else
                {
                    $(this).hide();
                }
            });
        }
    }

    // Show and hide all days in this page.
    function show_and_hide_all_days() {
        $("select.value_day").each(function() {
            var form= $(this).closest("form");
            // Show and hide days according to the selected year and month.
            show_and_hide_days(form);
        });
    }

    // Show and hide all days in this page.
    show_and_hide_all_days();

    $("select.value_year, select.value_month").live("change", function() {
        var form= $(this).closest("form");
        // Show and hide days according to the selected year and month.
        show_and_hide_days(form);
        return false;
    });
}); 
```

这是HTML代码：

```
<select class="value_year">
    <option value="2000">2000</option>
    <option value="2001">2001</option>
    <option value="2002">2002</option>
    <option value="2003">2003</option>
    <option value="2004">2004</option>
    <option value="2005">2005</option>
    <option value="2006">2006</option>
    <option value="2007">2007</option>
    <option value="2008">2008</option>
    <option value="2009">2009</option>
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012" selected="selected">2012</option>
    <option value="2013">2013</option>
</select>
/
<select class="value_month">
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12" selected="selected">12</option>
</select>
/
<select class="value_day">
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18" selected="selected">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select> 
```

我们正在使用 jQuery v1.8.3（我升级到这个版本来测试它是否解决了问题，但它没有）。

谢谢，乌里。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T11:03:41.360

这是一个浏览器问题，您无法在某些浏览器中隐藏选项，因为`$('.selector').hide();`类似于`$('.selector').css('display', 'none');`某些浏览器无法隐藏它

你需要使用`$('.selector').remove();`和`$('.selector').append();`

更改代码

```
 if ((days_in_month >= 28))
        {
            // If selected day is bigger than the number of days in the selected month, reduce it to the maximal day in this month.
            if (selected_day > days_in_month)
            {
                $(select_day).val(days_in_month);
            }
            // Show all the days in this month and hide days which are not in this month.
            $(select_day).find("option").each(function() {
                var day= parseInt($(this).val());
                if (day <= days_in_month)
                {
                    $(this).show();
                }
                else
                {
                    $(this).hide();
                }
            });
        } 
```

到

```
// Remove days 29 - 31
$(select_day).find("option[value='29'], option[value='30'], option[value='31']").remove();
var daysOptions = "";

if (days_in_month >= 29) {
    daysOptions += '<option value="29">29</option>';
}
if (days_in_month >= 30) {
    daysOptions += '<option value="30">30</option>';
}
if (days_in_month == 31) {
    daysOptions += '<option value="31">31</option>';
}

$(select_day).append(daysOptions); 
```

[http://jsfiddle.net/sL4jY/10/](http://jsfiddle.net/sL4jY/10/) 在 IE chrome 和 Firefox 中测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:17:07.403

感谢您的回答，我使用了您的代码，但我对其进行了一些更改以处理 28 天和 29 天（2 月）的月份。这里又是函数：

```
// Show and hide days according to the selected year and month.
function show_and_hide_days(fp_form) {
    var select_year= $(fp_form).find("select.value_year");
    var select_month= $(fp_form).find("select.value_month");
    var select_day= $(fp_form).find("select.value_day");
    var selected_year= $.parse_int($(select_year).val());
    var selected_month= $.parse_int($(select_month).val());
    var selected_day= $.parse_int($(select_day).val());
    var days_in_month= new Date(selected_year, selected_month, 0).getDate();
    // If the number of days in the selected month is less than 28, change it to 31.
    if (!(days_in_month >= 28))
    {
        days_in_month= 31;
    }
    // If the selected day is bigger than the number of days in the selected month, reduce it to the last day in this month.
    if (selected_day > days_in_month)
    {
        selected_day= days_in_month;
    }
    // Remove days 29 to 31, then append days 29 to days_in_month.
    for (var day= 31; day >= 29; day--)
    {
        $(select_day).find("option[value='" + day + "']").remove();
    }
    for (var day= 29; day <= days_in_month; day++)
    {
        $(select_day).append("<option value=\"" + day + "\">" + day + "</option>");
    }
    // Restore the selected day.
    $(select_day).val(selected_day);
} 
```

它现在适用于我测试的所有五种浏览器（我没有用以前版本的 Internet Explorer 进行测试）。

我在 jQuery 中添加了一个名为 $.parse_int 的插件——如果未指定，它将返回基数为 10 的 parseInt。这是插件的代码：

```
// Add functions to the jQuery object.
(function( $ ) {
    // Return parseInt with radix 10 if not specified.
    $.parse_int= function(fp_string, fp_radix) {
        var radix= ((typeof(fp_radix) !== "undefined") ? fp_radix : 10);
        return parseInt(fp_string, radix);
    };
})( jQuery ); 
```

乌里。

# jsf - 无法在表单上禁用 p:commandButton 以进行文件上传 - PrimeFaces

> ID：13930586
> 
> 赞同：0
> 
> 时间：2012-12-18T10:11:01.523
> 
> 标签：jsf, primefaces

我正在尝试制作一个“一键式按钮”，以使无法在文件上传表单中发送两次操作方法的请求。这是代码：

```
<h:form id="importForm" enctype="multipart/form-data">
   <p:messages id="messages" showDetail="true" autoUpdate="true"/>

   <h:panelGrid>            
     <p:fileUpload value="#{importController.uploadFile}" mode="simple" />

     <p:commandButton id="importButton" styleClass="commandButton" value="Send" action="#{importController.getFile}" ajax="false"/>   
   </h:panelGrid>
</h:form> 
```

如果我设置 的值`onclick="importButton.disable()"`，按钮将被禁用，但操作方法永远不会被调用。`onclick="alert('hello!')"`如果我将发送请求之类的东西作为回调。PrimeFaces 是否会生成某种 JS 代码来控制提交按钮是否被禁用？

有什么帮助吗？谢谢！

PrimeFaces 3.3.1

Liferay 6.0.1 与 Java6 中的嵌入式 Tomcat 7.0.23

PrimeFaces Liferay Bridge 3.1.1-ga2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:24:53.123

如果我说得对，请尝试使用`onclick="setTimeout('importButton.disable()";', 50);"`，

您不能期望禁用的按钮起作用（调用操作方法），但您可以在单击后禁用它...

# c++ - 从串口准确读取 N 个字节

> ID：13930589
> 
> 赞同：4
> 
> 时间：2012-12-18T10:11:06.653
> 
> 标签：c++, multithreading, asynchronous, serial-port

如何`N`从串口准确读取字节？我需要我的线程阻塞，直到端口上至少有`N`字节可用或预设的超时已过期。超时值和`N`运行时都应该是可变的。

注意：在使用 C/C++ 的 Linux 上，带或不带 boost。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:26:11.447

termios 中有用于此目的的`VMIN`属性。`read()`当没有足够的可用字节时，它可用于防止返回。

例子：

```
tcgetattr( fd, &termiosv );

termiosv.c_cc[VMIN]  = N;
termiosv.c_cc[VTIME] = 20;

tcsetattr( fd, TCSANOW, &termiosv ); 
```

[更多关于 VMIN](http://unixwiz.net/techtips/termios-vmin-vtime.html)。

注意：`select()`当只有 1 个字节可用且 VMIN > 1 时，Select 表示 fd 可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:24:21.940

不幸的是，正如 Hans 所暗示的，仅通信字节流的通信通道通常不会有任何魔术调用来将字节阻塞到协议单元中 - 您必须自己做。这并不难。

同样超时。COM 端口驱动程序通常有一个超时，当在某个时间间隔内没有收到任何字节时触发，但它不能超时任何比那个字节更复杂的协议单元。如果我需要做类似的事情，我通常使用一个线程来接收字节并组装协议单元对象，直到它们完成并经过完整性检查，然后将它们推送到 PC 队列。另一个线程在队列中等待超时。

# scala - 拦截与尝试/捕获

> ID：13930590
> 
> 赞同：4
> 
> 时间：2012-12-18T10:11:10.053
> 
> 标签：scala, scalatest

我正在将 scala 'try/catch' 测试代码转换为使用 'intercept'

有没有我不应该使用“拦截”的场景？使用“拦截”而不是“尝试/捕获”的唯一好处是简洁？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T10:27:27.837

我认为主要区别在于它`intercept`的语义是你得到的异常是预期的，而不是由程序错误引起的。

因此，我通常只`intercept`在用户输入不正确或类似情况时测试异常将正确抛出的测试用例使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T10:33:53.193

一个实际的优点是它`intercept`也返回一个`Exception`，所以你可以像这样检查它：

```
intercept[IndexOutOfBoundsException](s charAt -1).getMessage should be === "..." 
```

# ruby-on-rails - Haml 语法：将一行拆分为几行

> ID：13930603
> 
> 赞同：30
> 
> 时间：2012-12-18T10:11:41.710
> 
> 标签：ruby-on-rails, syntax, haml

我在我的 rails 项目中为我的 html 模板使用 HAML。我想弄清楚是否可以将一条很长的线分成几行：

```
%a.open-service{href: '#', data: {
  service_name: service.description,
  balance_type: "coinsurance",
  total: service.a_total_billed - service.a_rejected - service.a_not_covered, 
  discount: service} } 
```

正如你所看到的，我只想拥有一个带有 href 和一些数据属性的锚点，并且使它成为单行代码并不是一个漂亮的代码。但是当我像上面那样做时，我得到一个错误：“不平衡的括号”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-18T10:19:41.737

[根据Haml 文档](http://haml.info/docs/yardoc/file.REFERENCE.html#attributes)，新行可以放在逗号之后。所以，也许像下面这样的东西会起作用：

```
%a.open-service{href: '#', 
                data: { service_name: service.description,
                        balance_type: "coinsurance",
                        total: service.a_total_billed - service.a_rejected - service.a_not_covered, 
                        discount: service} } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T10:16:05.033

我相信您可以在`|`. [您可以在此处](http://haml.info/docs/yardoc/file.REFERENCE.html#multiline)的 haml 文档中阅读有关它的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-22T16:26:25.467

您可以随时在逗号后换行。所以如果你有这个：

```
%div.panel
  .panel-body
    = column_chart @consumptions.filter_by_meter(params[:meter]).filter_by_appliance(params[:appliance]).where('start > ?', Time.now - 1.month).group_by_day(:start, format: '%d').sum(:power), colors: ["#7FC564"], title: 'Últimos 30 dias', library: { chartArea: { left: 60, top: 20, width: '95%', height: '85%' }, hAxis: { textPosition: 'bottom', textStyle: { fontSize: 12 }, minTextSpacing: 2 }, vAxis: { textPosition: 'left', format: '# kWh' } } 
```

首先，您可以在每个逗号上换行以进入：

```
%div.panel
  .panel-body
    = column_chart @consumptions.filter_by_meter(params[:meter]).filter_by_appliance(params[:appliance]).where('start > ?', Time.now - 1.month).group_by_day(:start, format: '%d').sum(:power),
      colors: ["#7FC564"],
      title: 'Últimos 30 dias',
      library: { chartArea: { left: 60, top: 20, width: '95%', height: '85%' },
      hAxis: { textPosition: 'bottom', textStyle: { fontSize: 12 }, minTextSpacing: 2 },
      vAxis: { textPosition: 'left', format: '# kWh' } | 
```

不过，第一行太大了！没问题。管道字符可以指定多行字符串。

它被放置在一行的末尾（在一些空格之后），这意味着所有以 | 结尾的行 将被评估为好像它们在同一行。所以你最终会得到：

```
%div.panel
  .panel-body
    = column_chart @consumptions.filter_by_meter(params[:meter]) |
      .filter_by_appliance(params[:appliance]) |
      .where('start > ?', Time.now - 1.month) |
      .group_by_day(:start, format: '%d') |
      .sum(:power), |
      colors: ["#7FC456"],
      title: 'Últimos 30 dias',
      library: { chartArea: { left: 60, top: 20, width: '95%', height: '85%' },
      hAxis: { textPosition: 'bottom', textStyle: { fontSize: 12 }, minTextSpacing: 2 },
      vAxis: { textPosition: 'left', format: '# kWh' } | 
```

请注意，即使是多行块中的最后一行也应该以 | 结尾。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-08T09:09:33.820

我刚刚遇到这个问题，我遇到了同样的问题，但选择的答案对我没有帮助。所以我只是建立在米哈伊尔的回答之上。如果你有很长的属性没有用逗号分隔（比如你正在使用 angularjs 之类的东西），你可以通过`+ |`在每行的末尾添加来将它分成几行**（包括这个多行块中的最后一行，即棘手的部分）**。

像这样 ：

```
%select{ ng: { model: "my_model_name",
             options: "myitem as myitem.formattedName for myitem in container.item_list() | " + |
                      "without: another_list.item_list()" }}                                    | 
```

[您可以在 HAML 文档中](http://haml.info/docs/yardoc/file.REFERENCE.html#multiline)了解这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-24T21:18:32.080

有时 HAML 中的 Multiline 与添加 rails 代码几乎没有关系，因为某些元素需要有很多属性，例如[Bootstrap Progress Bar](http://getbootstrap.com/components/#progress)，并且在一行上看起来很丑陋。

这让我很头疼：

```
.progress
  .progress-bar.progress-bar-striped.progress-bar-success{ |
                  role: "progressbar",                     |
                  aria: {                                  |
                    valuenow: "#{@percent}",               |
                    valuemin: "0",                         |
                    valuemax: "100",                       |
                  },                                       |
                  style: "width: #{@percent}%;" }          |
    = "#{@percent}%" 
```

这是我的斗争的解决方案：

```
.progress
  .progress-bar { class: "progress-bar-striped progress-bar-success",
                  role: "progressbar",
                  aria: { valuenow: "#{@percent}",
                          valuemin: "0",
                          valuemax: "100", 
                  },
                  style: "width: #{@percent}%;" }
    = "#{@percent}%" 
```

请注意，即使没有竖线，只要前一行以逗号结尾，并且没有任何行以左括号结尾，

# c++ - 删除标准映射中的重复值

> ID：13930610
> 
> 赞同：4
> 
> 时间：2012-12-18T10:12:00.420
> 
> 标签：c++, stl, map

我有一个

```
map<char,my_class*> mymap; 
```

其中的内容如下。

```
mymap[0]=('a', 0x1);
mymap[1]=('b',0x2);
mymap[3]=('c',0x3);
mymap[4]=('d',0x1); 
```

如您所见，我们对键“a”和“d”具有相同的值。我有一个 for 循环来删除地图中的指针。

```
for ( it=mymap.begin() ; it != mymap.end(); it++ ){
  delete it->second;
} 
```

它崩溃是因为它试图删除 0x1 两次。我试着这样做

```
for ( it=mymap.begin() ; it != mymap.end(); it++ ){
  if(!it->second){
      delete it->second;
      it->second = NULL;
  }
} 
```

即使这会尝试将指针设置为 NULL 两次，这会导致异常。删除地图中上述重复值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:18:20.750

NPE 的回答`shared_ptr`很好。但是如果你被迫使用真正的指针，我可能会这样做：

```
set<my_class*> values;
for (it=mymap.begin(); it != mymap.end(); it++)
{
  // insert.second will be false if the value is already in the set
  if (values.insert(it->second).second)
    delete it->second;
}

// Make sure you do something with mymap to ensure you don't double-delete later! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T10:14:58.250

我的建议是保留[`shared_ptr<my_class>`](http://en.cppreference.com/w/cpp/memory/shared_ptr)在您的地图中，并完全回避这个问题。

如果您不能这样做，您将需要保留一个辅助容器（例如 a `set`），其中包含您已经释放的指针。然后，您将在遍历地图时查阅并更新该容器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T11:09:48.890

如果您不想重复第二个条目，那么最好的解决方案可能是不插入它们开始。我能想到的最干净的解决方案是使用 Boost bimap。然而，我宁愿认为这种行为会让插入第二个条目的用户感到惊讶。

或者（假设您不能使用`shared_ptr`），解构地图时最简单的解决方案是创建一个`std::set<MyClass*>`包含所有元素的临时对象，然后从中删除。（`std::set`确保没有重复）。

虽然我在这里：您的第二个解决方案失败的原因不是因为您将指针设置为 null 两次；这没有什么问题。这是因为你有两个指向同一个对象的不同指针；将第一个设置为 null 不会修改第二个，因此您最终仍会尝试两次删除同一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:26:21.280

如果您存储实例或使用智能指针会更简单。Std::Map 有自己的指向您的对象的内部指针，您可以通过依赖其他人对您的对象的句柄来避免头痛。该`Boost`库包含几个智能指针。如果您使用侵入式引用计数智能指针，那么当您的对象从地图中移除时，它可能会被自动销毁。

然后，您将能够使用擦除函数从映射中删除值，然后在调用析构函数链后删除您的对象（如果它是最后一个引用）。

# knockout.js - KnockoutJS 嵌套列表

> ID：13930611
> 
> 赞同：0
> 
> 时间：2012-12-18T10:12:01.030
> 
> 标签：knockout.js, knockout-2.0

我是 KnockoutJS 新手。

我在下面写了一个视图，在运行时看不到每个类别的 categoryVariables。你能看看这里有什么问题吗？

谢谢你的帮助。

我的代码视图：

```
<table class="table">
    <thead>
    </thead>
    <tbody data-bind="foreach: categories">
        <tr>
            <td data-bind="text: Name">
                <table>
                    <tbody data-bind="foreach: categoryVariables">
                        <tr>
                            <td data-bind="text: Name"></td>
                        </tr>
                    </tbody>
                </table>
            </td>
            <td><button data-bind='click: $root.addCategoryVariable'>Add a category variable</button></td>
        </tr>
    </tbody>
</table>

<button data-bind='click: addCategory'>Add a category</button>

<script type="text/javascript">

    var resumeDataViewModel;

    function Category(data) {
        var self = this;

        self.ID = data.ID;
        self.Name = data.Name;

        self.categoryVariables = ko.observableArray([
            new CategoryVariable({ID: '1', Name: 'asd'})
        ]);
    }

    function CategoryVariable(data) {
        var self = this;

        self.ID = data.ID;
        self.Name = data.Name;
    }

    function ResumeDataViewModel() {
        var self = this;

        self.categories = ko.observableArray([
            new Category({ID: '1', Name : 'Contact', Category: {ID: '1', Name: 'gfdg'}}),
            new Category({ID: '2', Name : 'Education', Category: {ID: '2', Name: 'asdasd'}})
        ]);

        self.addCategory = function(){
            self.categories.push(new Category({
                Name: "sa d"
            }));
        }

        self.addCategoryVariable = function (category) {
            category.categoryVariables.push(new CategoryVariable({
                Name: 'asd'
            }));
        }
    }

    ko.applyBindings(resumeDataViewModel = new ResumeDataViewModel());
</script> 
```

正在寻找您的回复。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:17:30.733

您的问题在于 text: Name 的绑定，然后将表格添加到同一个 td. 我已将 categoryVariables 的表移至单独的 TD，它工作正常。

由于您已经绑定了 TD 的文本，Ko 的数据绑定将覆盖您在其中的任何其他内容，并且只需从 observable 中设置文本。如果您正在查看不同的 UI 布局，请相应地更改您的 HTML，但请记住以上内容。

还要在 KO 文档中查看有关使用无容器绑定和 with 绑定的信息。这些可以帮助您创建更好的 HTML 布局。

检查这个小提琴：http: [//jsfiddle.net/7BNQy/](http://jsfiddle.net/7BNQy/)

修改后的 HTML：

```
<table class="table">
<thead>
</thead>
<tbody data-bind="foreach: categories">
    <tr>
        <td data-bind="text: Name">

        </td>
        <td>
            <table>
                <tbody data-bind="foreach: categoryVariables">
                    <tr>
                        <td data-bind="text: Name"></td>
                    </tr>
                </tbody>
        </table></td>
        <td><button data-bind='click: $root.addCategoryVariable'>Add a category variable</button></td>
    </tr>
</tbody>
</table>

<button data-bind='click: addCategory'>Add a category</button> 
```

# sql-server - 删除 SQL Server 中列的排序规则

> ID：13930615
> 
> 赞同：2
> 
> 时间：2012-12-18T10:12:33.097
> 
> 标签：sql-server, collation, alter-column

设置后如何删除列的排序规则？

SQL Server 中列的标准排序规则是“NULL”。这意味着，使用了数据库的排序规则。

TSQL-Statement`ALTER table ALTER column COLLATE database_default`会将列的排序规则显式设置为数据库之一，但它不会恢复无排序规则的原始状态（NULL 排序规则）。

我们真的可以放弃排序规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:34:47.610

不，您不能删除列甚至数据库的排序规则。

1：如果不指定任何排序规则，列将使用数据库的**默认排序规则**。

2：如果数据库没有指定排序规则，则使用**服务器排序规则**。

# java - 使用片段和返回堆栈时按返回按钮后更改选项菜单？

> ID：13930619
> 
> 赞同：3
> 
> 时间：2012-12-18T10:12:46.310
> 
> 标签：java, android, fragment

我正在使用一个活动，当用户从选项菜单中选择一个菜单项时，我将一个片段替换为另一个片段。

我已经使用`addToBackStack()`and实现了后台堆栈`onBackPressed()`。

一切正常，除了当用户按下后退按钮时，片段被替换，但选项菜单显示前一个项目。

当用户按下后退按钮时，如何使选项菜单变回上一个项目？

# ios - www/res/screen/ios 中的 Cordova/Phonegap 飞溅是什么？

> ID：13930622
> 
> 赞同：11
> 
> 时间：2012-12-18T10:13:10.563
> 
> 标签：ios, cordova, splash-screen

Cordova 保留了两组启动画面，一组在 ProjectName/Resources/splash 中，另一组在 www/res/screen/ios 中。为什么会这样，为什么不对所有东西使用相同的集合？www/res/screen/ios 中的那个是干什么用的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T17:41:06.977

`www/res/`iOS 项目中没有使用What is the one 中的文件。

如果您愿意，可以删除它们。

看起来它们将来可能会用于使用某种脚本更新位于 ProjectName/Resources/ 中的那些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T12:53:22.497

这是一些阅读： [http ://en.wikipedia.org/wiki/Splash_screen](http://en.wikipedia.org/wiki/Splash_screen)

您在 www/res/screen/ios 中找到的图像是您的应用程序将具有的启动加载图像。

但是，请记住，很多人体验到初始屏幕只会存在一定的时间，然后它会变黑，直到您的应用程序完成加载。

这可能是因为：1) 繁重的 HTML、JS 和 CSS 代码 2) 外部文件，例如 CSS 和 JS 3) 智能手机速度慢 4) .. 可能是:)

我希望我能帮忙:)

# javascript - 如果 json 请求将下一个链接返回为“false”，则隐藏“下一个”链接

> ID：13930625
> 
> 赞同：1
> 
> 时间：2012-12-18T10:13:17.997
> 
> 标签：javascript, jquery, json, if-statement

```
$("#wrap .project").append($("<a id='previous-project' href='"+ path + "#project/" + data.prev + "'>previous</a><a id='next-project' href='"+ path + "#project/" + data.next + "'>next</a>")); 
```

乱七八糟的，我知道。当然，这`path`是主要路径，`data.prev`并且`data.next`是指向下一个项目的链接。项目自然会结束，然后当我悬停或单击链接时，它会给我路径/错误。

我试过这个：

```
 if(data.next == false){$('#wrap .project #prev-project').hide()};
        if(data.prev == false){$('#wrap .project #next-project').hide()}; 
```

但它并没有隐藏任何东西。我正在提醒`data.next`and`data.prev`它给了我错误的信息。我也尝试了“假”，如果没有，链接仍然显示。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:01:37.343

怎么样 ：

```
var prev = data.prev ? '<a id="previous-project" href="'+ path + '#project/" ' + data.prev + '">previous</a> ' : '<span class="nolink">previous</span> ';
var next = data.next ? '<a id="next-project" href="'+ path + '#project/" ' + data.next + '">next</a>' : '<span class="nolink">next</span>';
$("#wrap .project").append(prev + next); 
```

在您的样式表中创建一个`.nolink {...}`样式以设置 null 上一个/下一个文本的样式，例如。`.nolink { color:#e0e0e0; }`.

除非它们在其他地方使用，否则您不需要这些 id。

# android - 在完成另一项活动的同时更新一项活动

> ID：13930626
> 
> 赞同：0
> 
> 时间：2012-12-18T10:13:19.143
> 
> 标签：android, android-intent, android-activity

我的应用程序有问题。我有一个名为 PetActivity 的活动。在这个活动中有一些值......还有一个按钮（更新）。此按钮将用户切换到另一个名为 UpdateActivity 的活动，他可以在其中编辑来自 PetActivity 的值。有一个保存按钮应该完成此活动并重新打开 PetActivity。我在这个动作中有错误......（空指针异常）

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.project/com.example.project.PetActivity}: java.lang.NullPointerException 
```

PetActivity onclick 代码：

```
if (v.getId() == R.id.button1updateAP) {
        Intent i = new Intent(PetActivity.this, UpdateActivity.class);
        Bundle ext = getIntent().getExtras();
        String idOfPet = ext.getString(IDR);        
        i.putExtra(UpdateActivity.ID, idOfPet);         
        startActivity(i);
        finish();           
    } 
```

UpdateActivity onclick 代码：

```
if (v.getId() == R.id.button1saveAU) {
        MyDatabaseHelper db = new MyDatabaseHelper(this);

        Pet petU = new Pet();
        petU.setID(id);
        petU.setName(TVname.getText().toString());          
        petU.setAge((ETage.getText().toString()));
        petU.setWeight(ETweight.getText().toString());          
        db.updatePet(petU);
        db.close();

        DatabaseWeight dbw = new DatabaseWeight(this);          
        dbw.addPetWeight(new Pet(petU.getID(), petU.getWeight()));          

        Intent i2 = new Intent(this, PetActivity.class);
        startActivity(i2);
        finish();
    } 
```

当我尝试这个时，没关系：

```
Intent i2 = new Intent(this, ListActiv.class);
startActivity(i2);
finish(); 
```

这段代码让我切换到列表，我可以去刷新 PetActivity，但我必须直接进入 PetActivity。

我会非常感谢任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:24:00.670

从 PetActivity 启动 UpdateActivity 后，您无需调用 finish()，而在 UpdateActivity 内部，当您的工作完成后，只需在 finish() 之前调用 setResult()...

您的代码应该用于 MainActivity 的 onClick

```
if (v.getId() == R.id.button1updateAP) {
        Intent i = new Intent(PetActivity.this, UpdateActivity.class);
        Bundle ext = getIntent().getExtras();
        String idOfPet = ext.getString(IDR);        
        i.putExtra(UpdateActivity.ID, idOfPet);         
        startActivityForResult(i,some request code ););
        finish();           
    } 
```

对于 ChildActivity 的 onClick

```
if (v.getId() == R.id.button1saveAU) {
        MyDatabaseHelper db = new MyDatabaseHelper(this);

        Pet petU = new Pet();
        petU.setID(id);
        petU.setName(TVname.getText().toString());          
        petU.setAge((ETage.getText().toString()));
        petU.setWeight(ETweight.getText().toString());          
        db.updatePet(petU);
        db.close();

        DatabaseWeight dbw = new DatabaseWeight(this);          
        dbw.addPetWeight(new Pet(petU.getID(), petU.getWeight()));          
        if(/*task completed successfully*/){
           setResult(RESULT_OK);
        }else{
           setResult(RESULT_CANCELED); 
        }
        finish();
    } 
```

现在在您的父活动中，您可以在里面检查这些值`onActivityResult()`

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.i(LOG_TAG, "Inside onActiviy Result : "+resultCode);
        if ( resultCode == RESULT_OK ) {
            Toast.makeText(this, "Update executed successfully..", Toast.LENGTH_SHORT).show();
        }else if ( resultCode == RESULT_CANCELED ) {
            Toast.makeText(this, "There was an error", Toast.LENGTH_SHORT).show();
        }
    } 
```

另请参阅文档中的各种[意图](http://developer.android.com/reference/android/content/Intent.html)标志。

# mysql - 使用mysql php将非日期格式转换为日期

> ID：13930627
> 
> 赞同：0
> 
> 时间：2012-12-18T10:13:23.110
> 
> 标签：mysql

我有一些数据库，以前的 err...person 已将日期格式设置为 20121218，是否可以将其用作 mysql 中的日期，所以

```
SELECT substr(week_begin_date,0,4)+'-'+substr(week_begin_date,4,2)+'-'+substr(week_begin_date,6,8) 
AS startdate 
FROM table 
WHERE startdate < now() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:31:00.213

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL 可以识别[`DATE`](http://dev.mysql.com/doc/en/datetime.html)以下格式的值：
> 
> *   作为一个`'YYYY-MM-DD'`或`'YY-MM-DD'`格式的字符串。允许使用“宽松”语法：任何标点符号都可以用作日期部分之间的分隔符。例如，`'2012-12-31'`、`'2012/12/31'`、`'2012^12^31'`和`'2012@12@31'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDD'`字符串`'YYMMDD'`，前提是该字符串作为日期有意义。例如，`'20070523'`and`'070523'`被解释为`'2007-05-23'`, 但是`'071332'`是非法的（它有无意义的月份和日期部分）并且变成`'0000-00-00'`.
>     
>     
> *   作为任一`YYYYMMDD`格式`YYMMDD`的数字，前提是该数字作为日期有意义。例如`19830905`和`830905`被解释为`'1983-09-05'`。

因此`20121218`实际上是一个有效的日期文字。所以：

```
SELECT DATE(`week_begin_date`) AS `startdate`
FROM   `table`
WHERE  DATE(`week_begin_date`) < NOW() 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/13b99/1/0)上查看。

但是，从长远来看，您最好修复您的架构（显然，任何希望以现有格式读取值的应用程序代码）：

```
ALTER TABLE `table` MODIFY week_begin_date DATE 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/526d1/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:33:17.033

你可以试试这个——

```
SELECT * from Table where STR_TO_DATE(substr(week_begin_date,0,4),substr(week_begin_date,4,2),substr(week_begin_date,6,8)','%d,%m,%Y') > now() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:34:59.187

```
select STR_TO_DATE(SUBSTR(week_begin_date,4,2)+"/"+SUBSTR(week_begin_date,6,8)+"/"+SUBSTR(week_begin_date,0,4),'%m/%d/%Y') AS startdate 
FROM table where STR_TO_DATE(SUBSTR(week_begin_date,4,2)+"/"+SUBSTR(week_begin_date,6,8)+"/"+SUBSTR(week_begin_date,0,4),'%m/%d/%Y') < now() ; 
```

试试这个希望这能解决你的问题

# java - ui:include 使用 FaceletsContext

> ID：13930629
> 
> 赞同：1
> 
> 时间：2012-12-18T10:13:24.043
> 
> 标签：java, jsf, binding, primefaces, facelets

我正在使用 PrimeFaces，我有下一个 jsf 页面：

```
<h:form id="form1111">

            <p:commandLink value="Include Page" actionListener="#{dynaInclBean.includePage}" update="dynInclTabView"/>
            <p:tabView id="dynInclTabView" dynamic="true">
                <p:tab title="Somename" binding="#{dynaInclBean.tab}"/>
            </p:tabView>
    </h:form> 
```

我的支持豆：

```
private Tab tab;

public Tab getTab() {
    return tab;
}

public void setTab(Tab tab) {
    this.tab = tab;
}

public void includePage() throws IOException
{
    FaceletContext faceletContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
    faceletContext.includeFacelet(tab, "playerPhoto.xhtml");
} 
```

我想将页面包含到选项卡中。当我调用 inlcudePage() 我得到一个异常： org.apache.myfaces.view.facelets.el.ContextAwareELException: javax.el.E​​LException: java.lang.NullPointerException

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:21:09.470

MyFaces 确实不支持此构造。其中，`FaceletContext`仅在视图构建期间（恢复视图阶段）可用，并在此阶段结束时立即发布。它会在所有其他阶段抛出类似的 NPE，因为内部 Facelet 上下文已被释放并取消。

不过，这种构造在 Mojarra 中有效。

您最好的尝试是使用`<ui:include src="#{bean.include}">`或多个有条件呈现的包含。这个问题仍然没有“圣杯”解决方案。问题很清楚，但鉴于 JSF/Facelets 生命周期，解决方案很难。

### 也可以看看：

*   [如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu)
*   [使用 <ui:include> 的动态 ajax 导航](https://stackoverflow.com/questions/13680192/dynamic-ajax-navigation-with-uiinclude)

# titanium - 在单击按钮时创建新窗口时 UI 冻结

> ID：13930630
> 
> 赞同：1
> 
> 时间：2012-12-18T10:13:26.110
> 
> 标签：titanium, appcelerator

我是 Titanium 的新手，我遇到了一个问题。在我的 app.js 中，我包含一个左侧菜单和窗口控件（app.js 和 leftmenu.js）

当用户单击菜单项时，我想加载一个窗口。基本上，我想在用户选择主页按钮时加载 app.js 主窗口。为此，我在 leftmenu.js 文件中加入了以下代码：

```
var newWin = Titanium.UI.createWindow({
    url: "app.js",
    zIndex: 0
});
win.close(); // closing main window
leftMenu.close(); // closing left menu
newWin.open(); //should reload the main window and the leftmenu 
```

它重新加载窗口，但所有控件都被禁用。我们不能点击任何控件。就像所有控件都在一个不可见的层下一样。任何想法 ？

我复制/粘贴代码部分，也许会更清楚:)

```
btnaccueil.addEventListener('click',function(e) {
   var newWin = Titanium.UI.createWindow({        
       url: &quot;app.js&quot;,
       zIndex: 0
   });

   // Closing current instance for freeing memory
   win.close();
   leftMenu.close();
   newWin.open({animated:true});
   Ti.API.info(var_dump(newWin));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:45:13.190

你好，一个月后我知道了，但是你在使用require和exports/module.exports吗？这是一个关于如何以正确方式打开带有按钮事件的新窗口的示例，我认为不推荐使用 url 属性，所以我希望这个示例可以帮助您理解

**员工.js**

```
//Current window (employee window)
var employeeWin = Ti.UI.currentWindow;

//define button
var moveToDetailBtn = Ti.UI.createButton({
   width      : 200,      //define the width of button
   height      : 50,      //define height of the button
   title         : 'Show Detail'   //Define the text on button
});

//Click event to open the Employee Details window
moveToDetailBtn.addEventListener('click', function(){

   //Call a export function
   var win = require('employeeDetails').getEmployeeDetailSWin;

   //Create new instance
   var employeeDetailsWin = new win();

   //Open the Employee Details window
   employeeDetailsWin.open();
});

//Add the button to the window
employeeWin.add(moveToDetailBtn); 
```

**在employeeDetails.js 中**

```
exports.getEmployeeDetailSWin = function(){

   //Creates a new window
   var empDetailsWin = Ti.UI.createWindow({
      backgroundColor   : '#ffffff'      //Define the backgroundcolor of the window
   });

   //Addin a label to the window
   empDetailsWin.add(Ti.UI.createLabel({
      width      : 100,      //Define width of the label
      height      : 50,      //Define height of the label
      title         : 'Employee Details'
   }));

   return empDetailsWin;
}; 
```

*此外我不确定你是否可以导出你的 app.js 尝试使用新的 .js*

# php - Sprintf 浮动 18,16 浮点数，右填充零

> ID：13930632
> 
> 赞同：0
> 
> 时间：2012-12-18T10:13:32.110
> 
> 标签：php, printf

我试图让浮点数（18,16）向右填充零，但这不起作用，因为它总是以 1 而不是零结尾。我的猜测是因为我指定错误但我不确定如何正确执行。

示例： `12.12234`必须成为`12.122340000000000`并且`1.01`必须成为`1.01000000000000`。

为了实现这一点，我正在使用`sprintf('%18.016f', $fMyFloat);`，但这总是以 1 而不是 0 结尾。显然我正在监督一些事情，我只是不知道是什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:33:29.450

此测试代码：

```
$data = array(
    12.12234,
    1.01
);
foreach($data as $fMyFloat){
    echo sprintf('%18.016f', $fMyFloat) . PHP_EOL;
} 
```

...在我的 64 位计算机上打印：

```
12.1223399999999994
1.0100000000000000 
```

您面临着众所周知的浮点精度问题。将整数从基数 10 转换为基数 2 非常简单（且精确），但基数为 10 的浮点数并不总是以 2 为基数精确表示。此问题并非特定于 PHP，但PHP 手册中有一个[警告：](http://php.net/manual/en/language.types.float.php)

> 浮点数的精度有限。尽管取决于系统，但 PHP 通常使用 IEEE 754 双精度格式，由于在 1.11e-16 的数量级四舍五入，这将给出最大的相对误差。非初等算术运算可能会产生更大的误差，当然，当多个运算复合时，必须考虑误差传播。
> 
> 此外，可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数，无论尾数大小如何，它都在内部使用。因此，它们不能被转换成它们的内部二进制对应物，而不会损失很小的精度

实现这种精度的唯一机会是将数字作为**字符串**来操作。PHP 捆绑了两个任意精度库，可以在您需要匹配字符串时为您提供帮助：[GNU Multiple Precision](http://es1.php.net/gmp)和[BC Math](http://es1.php.net/manual/en/book.bc.php)。这是 bcmath 的一个小技巧：

```
$data = array(
    '12.12234',
    '1.01'
);
bcscale(16);
foreach($data as $fMyFloat){
    echo bcdiv($fMyFloat, 1) . PHP_EOL;
} 
```

但是，在这种情况下，您可能可以使用简单的字符串函数：

```
$data = array(
    '12.12234',
    '1.01'
);
foreach($data as $fMyFloat){
    list($a, $b) = explode('.', $fMyFloat);
    echo $a . '.' . str_pad($b, 16, 0) . PHP_EOL;
} 
```

# wpf - 在 WPF 中，我可以有一个具有常规最小化、最大化和关闭按钮的无边框窗口吗？

> ID：13930633
> 
> 赞同：9
> 
> 时间：2012-12-18T10:13:33.453
> 
> 标签：wpf, xaml

如果您在最大化时查看 Chrome 浏览器，它的选项卡标题就位于窗口顶部。我可以做类似的事情吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T10:20:01.373

当然可以，但是您将不得不自己重新制作这些按钮（这并不难，不用担心）。

在您的 MainWindow.xaml 中：

```
<Window ...
        Title="" Height="Auto" Width="Auto" Icon="../Resources/MyIcon.ico" 
        ResizeMode="NoResize" WindowStartupLocation="CenterScreen" 
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ...>
    <Canvas>
       <Button /> <!-- Close -->
       <Button /> <!-- Minimize -->
       <Button /> <!-- Maximize -->
       <TabControl>
           ...
       </TabControl>
    </Canvas>
</Window> 
```

然后，您只需在 Canvas 上按需要放置 Button 和 TabControl，并自定义外观。

编辑：.NET 4.5 中用于关闭/最大化/最小化的内置命令是`SystemCommands.CloseWindowCommand`// `SystemCommands.MaximizeWindowCommand``SystemCommands.MinimizeWindowCommand`

因此，如果您使用的是 .NET 4.5，您可以执行以下操作：

```
<Window ...
        Title="" Height="Auto" Width="Auto" Icon="../Resources/MyIcon.ico" 
        ResizeMode="NoResize" WindowStartupLocation="CenterScreen" 
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ...>
    <Window.CommandBindings>
        <CommandBinding Command="{x:Static SystemCommands.CloseWindowCommand}" CanExecute="CommandBinding_CanExecute_1" Executed="CommandBinding_Executed_1" />
        <CommandBinding Command="{x:Static SystemCommands.MaximizeWindowCommand}" CanExecute="CommandBinding_CanExecute_1" Executed="CommandBinding_Executed_2" />
        <CommandBinding Command="{x:Static SystemCommands.MinimizeWindowCommand}" CanExecute="CommandBinding_CanExecute_1" Executed="CommandBinding_Executed_3" />
    </Window.CommandBindings>
    <Canvas>
       <Button Command="{x:Static SystemCommands.CloseWindowCommand}" Content="Close" />
       <Button Command="{x:Static SystemCommands.MaximizeWindowCommand}" Content="Maximize" />
       <Button Command="{x:Static SystemCommands.MinimizeWindowCommand}" Content="Minimize" />
       <TabControl>
           ...
       </TabControl>
    </Canvas>
</Window> 
```

在您的 C# 代码隐藏中：

```
 private void CommandBinding_CanExecute_1(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = true;
    }

    private void CommandBinding_Executed_1(object sender, ExecutedRoutedEventArgs e)
    {
        SystemCommands.CloseWindow(this);
    }

    private void CommandBinding_Executed_2(object sender, ExecutedRoutedEventArgs e)
    {
        SystemCommands.MaximizeWindow(this);
    }

    private void CommandBinding_Executed_3(object sender, ExecutedRoutedEventArgs e)
    {
        SystemCommands.MinimizeWindow(this);
    } 
```

这将使关闭/最大化/最小化的工作方式与常规窗口完全相同。
当然，您可能希望使用`System.Windows.Interactivity`将 C# 移动到 ViewModel 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-27T06:25:42.587

您必须自己实现的按钮。如果设置`WindowChrome.WindowChrome`附加属性，您仍然可以调整窗口大小和移动窗口，设置`GlassFrameThickness="0"`也会删除阴影：

```
<Window ...>
   <WindowChrome.WindowChrome>
       <WindowChrome GlassFrameThickness="0"/>
   </WindowChrome.WindowChrome>
</Window> 
```

# php - 如何从特定时刻开始 foreach 命令？

> ID：13930634
> 
> 赞同：0
> 
> 时间：2012-12-18T10:13:37.307
> 
> 标签：php, xml, foreach

我为我的网站使用 XML 导入。主要问题是执行时间和我的服务器强制执行的限制。因此，我想将 XML 导入拆分为段。到目前为止，我的脚本看起来是这样的：

```
$xml = simplexml_load_file('test.xml');

foreach ($xml->products as $products) {

...

} 
```

问题是如何从特定时刻开始**foreach**命令，例如 foreach 可以从 100 开始。我知道可以在下面以这种方式完成，但有没有更简单的方法？

```
$n=0;
foreach ($xml->products as $products) {
$n++;
if ($n>99) { //do something }
else { //skip }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:19:09.237

只需使用 for 循环，即可指定要循环的范围

```
for($i = 100; $i < 200; $i++)
{
//do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:29:51.863

您可以使用其他人建议的或类似`for`的方法进行操作，或者如果它必须是，则可以使用：`while``continue``foreach`

```
$n=0; //you have to do this outside or it won't work at all.
$min_value=100;
foreach ($xml->products as $products) {
    $n++;
    if ($n<=$min_value) { continue; } //this will exit the current iteration, check the bool in the foreach and start the next iteration if the bool is true. You don't need a else here.

    //do the rest of the code
} 
```

# textures - GLKTextureLoader 意外加载透明纹理

> ID：13930636
> 
> 赞同：0
> 
> 时间：2012-12-18T10:13:50.603
> 
> 标签：textures, glkit, glktextureloader

`UIKit`我使用（简化）将文本生成为图像：

```
UIGraphicsBeginImageContextWithOptions(textureSize, NO, 0);
    [variant.text drawInRect:CGRectIntegral(necessaryRect) withFont:textFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter];
    UIImage *img = UIImagePNGRepresentation(UIGraphicsGetImageFromCurrentImageContext());
UIGraphicsEndImageContext(); 
```

`GLKTextureLoader`然后我将它保存到缓存目录并使用（`-textureWithContentsOfFile:options:error:`; `options = nil`）从文件中加载。

加载后，我看到“白色伪影” - 文本周围的白色像素，尤其是在光线不直时可见（对纹理表面应用一些旋转）。

我检查了生成的图像 - 在图像编辑器中打开它们并添加了黑色背景 - 除了黑色之外，我看不到任何东西。然后我检查了纹理 - 在文本后面添加了一个纹理 - 只是用黑色填充。在我的 3D 对象上，我看到文本字母周围的“白色阴影”，比如一些边框。

```
effect.textrue2d0.envMode = GLKTextureEnvModeDecal;    // just text
...
effect.texture2d0.envMode = GLKTextureEnvModeModulate; // black bg gexture + text
effect.textrue2d1.envMode = GLKTextureEnvModeDecal;
...
glEnable(GL_BLEND);  // always
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA); 
```

如果我在启用的情况下加载纹理`GLKTextureLoaderApplyPremultiplication`，问题就解决了，但文本看起来不太清晰（比如没有使用 100% 黑色）。

`envMode`将底部纹理 (2d0)更改为`GLKTextureEnvModeReplace`也将修复白色像素，但会移除光线。

我究竟做错了什么？

*更新：*

我最近编写了自己的着色器。纹理没有问题，加载时没有 alpha 预乘。所以，我预计 GLKit 着色器本身会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:24:24.483

The problem was in different `EAGLContexts`.

`GLKTextureLoader` loads fonts to current context (`[EAGLContext currentContext]`) and correctly displays it from there. And in my app (it uses 2 different contexts) it was buggy: sometimes I loaded in one context and displayed in another (simply forgot to change them during loading).

# themes - 如何在“Allure Real Estate Theme for Placester”wordpress 主题中创建子菜单？

> ID：13930643
> 
> 赞同：1
> 
> 时间：2012-12-18T10:14:31.180
> 
> 标签：themes, wordpress-theming, submenu

以下是“Allure Real Estate Theme for Placester”wordpress 主题默认主题中使用的菜单代码

```
 `<li><a href="/">Home</a></li>
 <li><a href="<?php echo @get_permalink(get_page_by_title('About')->ID); ?  

  >">About</a>     

 </li>
 <li><a href="<?php echo @get_permalink(get_page_by_title('Search')->ID); ?

 >">Search</a></li>
 <li><a href="<?php echo @get_permalink(get_page_by_title('Blog')->ID); ?   

 >">Blog</a></li>
 <li><a href="<?php echo @get_permalink(get_page_by_title('Contact')->ID); ?

 >">Contact</a></li>
 <li><a href="<?php echo @get_permalink(get_page_by_title('Testimonials')->ID);   
 ?">Testimonials</a>` 
```

**如何在上述代码的任一主菜单中创建子菜单？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:01:08.790

我不确定如何解决此子菜单问题，但您可以删除上面的代码并用二十十个导航条码替换。这将做你需要的一切。

# c# - 变量类型是否需要

> ID：13930646
> 
> 赞同：0
> 
> 时间：2012-12-18T10:14:39.223
> 
> 标签：c#, linq, types, anonymous

我一直在阅读有关 c# 的 LINQ 功能并遇到以下代码：

```
List<string> myFruitList = new List<string>() {
    "apple", "plum", "cherry", "grape", "banana", "pear", "mango" ,
    "persimmon", "lemon", "lime", "coconut", "pineapple", "orange"};

    var results = from e in myFruitList
                  where e[0] == 'p' || e[0] == 'l'
                  group e by new {
                      FirstChar = e[0],
                      LengthGt5 = e.Length > 5  //no type mentioned for FirstChar and LengthGt5
                  }; 
```

我无法理解的是`FirstChar`（char）和`LengthGt5`（bool）字段没有提到类型。我很困惑。请解开疑惑。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:16:48.263

没什么，只是[类型推断](http://msdn.microsoft.com/en-us/vstudio/bb417257.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:18:41.407

类型是从 Linq 语句中推断出来的。因为`myFruitList`is a `List<string>`,`e`根据定义是一个字符串。该`FirstChar`类型是根据您从字符串中获取索引 0 处的字符这一事实推断出来的，因此它必然是一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:29:31.133

在您的代码段中，您正在使用对象初始化技术。

在这种情况下，编译器能够识别您用于实现 group by 子句 ( `string`) 的对象的类型。从那里，它能够推断此对象类型包含的属性或字段。

有了这些信息，它可以为您提供一种使用匿名类型为对象类型公共成员（属性或字段）进行对象初始化的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:17:35.790

这些是匿名类型的公共只读属性，因此正如您所指出的，它们采用分配给它们的类型。

# c# - FileSystemWatcher - 我会得到缓冲区溢出或类似情况吗？

> ID：13930652
> 
> 赞同：0
> 
> 时间：2012-12-18T10:14:50.283
> 
> 标签：c#, filesystemwatcher

我需要监视一个文件夹（在网络共享上），并在文件名更改并且文件被移动到子目录（所有一个事件）时收到通知。此事件可能每天发生两次。对于同一件事，我将有多个`FileSystemWatchers`观看多个文件夹。

然而，`FileSystemWatcher`对于错过事件是出了名的糟糕，我不能让这种情况发生。我尝试过复制环境，它似乎可以工作，但是我不知道这是否是因为我正在做一些特别的事情。

如果我只关注`OnRenamed`事件，我是否仍然可能有问题，或者我可以确定我不会错过事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:46:23.733

在正常工作的网络中，您不应该有任何与丢失事件相关的错误，但您应该知道，网络上的一个简单故障将使您的 FileSystemWatcher 监视无用。

与网络共享的连接暂时中断将触发 FileSystemWatcher 中的错误，即使重新建立连接，FileSystemWatcher 也不会再收到任何通知。

这是在 MSDN 上找到的一个经过微调的示例

```
static void Main()
{
    // Create a new FileSystemWatcher and set its properties.
    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = @"\\yourserver\yourshare";
    watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
           | NotifyFilters.FileName | NotifyFilters.DirectoryName;
    // Only watch text files.
    watcher.Filter = "*.txt";

    // Add handler for errors.
    watcher.Error += new ErrorEventHandler(OnError);

    // Begin watching.
    watcher.EnableRaisingEvents = true;

    // Wait for the user to quit the program.
    Console.WriteLine("Press \'q\' to quit the sample.");
    while(Console.Read()!='q');
}
private static void OnError(object source, ErrorEventArgs e)
{
    //  Show that an error has been detected.
    Console.WriteLine("The FileSystemWatcher has detected an error");

    //  Give more information if the error is due to an internal buffer overflow.
    Type t = e.GetException().GetType();
    Console.WriteLine(("The file system watcher experienced an error of type: " + 
                       t.ToString() + " with message=" + e.GetException().Message));
} 
```

如果您尝试启动此控制台应用程序然后禁用网络连接，您将看到 Win32Exception，但如果您再次执行此操作，正在运行的 FileSystemWatcher 将不会再看到错误事件

# android - PropertyValuesHolder：找不到值类型为 float 的属性 alpha 的 setter/getter

> ID：13930653
> 
> 赞同：3
> 
> 时间：2012-12-18T10:14:55.613
> 
> 标签：android, animation

我认为 Nineoldandroids 是一个 API 框架，低于 HONEYCOMB ......

所以我错了什么？我的 HTC Android 2.2.1 抛出此错误（找不到值类型为 float 的属性 alpha 的 setter/getter）：在所有这些行上：

```
ObjectAnimator.ofFloat(mHintViewRing, "alpha", 0);
ObjectAnimator.ofFloat(mHintViewRing, "alpha", 0f, 1f); 
```

编辑：我发布了错误的行抱歉：

```
PropertyValuesHolder.ofFloat("alpha", 1f, 0.1f); 
```

是坏的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:57:17.597

经过一些尝试，我用 ObjectAnimator 替换了所有 PropertyValuesHolder（带有浮点变量）

# rule - 如何从 booggie 2 的脚本中将节点类型添加到图表中？

> ID：13930657
> 
> 赞同：1
> 
> 时间：2012-12-18T10:15:09.847
> 
> 标签：rule, booggie

有没有办法访问元模型，实例化特定类型的节点或边并将其添加到脚本中的图形中？

请注意：booggie 项目不再存在，但导致开发了涵盖相同功能的[Soley Studio 。](https://www.soley.io/en/pr-soley-studio/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:15:09.847

是的，您可以使用从元模型中获取节点/边类型

```
graph.Model.NodeModel.GetType("MyNodeType") 
```

*   或者 -

```
graph.Model.EdgeModel.GetType("MyEdgeType") 
```

使用该方法`graph.AddNode`，您可以将其添加到图形中，并返回添加的节点，可以对其进行属性分配。

总之，它看起来像这样：

```
 newNode = graph.AddNode(graph.Model.NodeModel.GetType("MyNodeType"))
    newNode.myAttribute = 42 
```

# liferay - 使用插件安装从 Liferay 6.1.1 上的远程机器部署 portlet

> ID：13930660
> 
> 赞同：3
> 
> 时间：2012-12-18T10:15:21.987
> 
> 标签：liferay, liferay-6, marketplace

如何使用插件安装从 Liferay 6.1.1 上的远程计算机部署 portlet。直到 6.0.1 才有可能，但现在它会将我重定向到市场并取消部署市场 portlet，同时呈现插件安装和插件配置状态，无法部署任何新的 portlet

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T21:01:41.717

这是引入市场的一种过于急切的方式。市场上有一个称为[私有插件安装程序](https://www.liferay.com/marketplace/-/mp/application/15474932)的修复程序。安装它，您可以再次从 UI 安装新插件。

# objective-c - IOS：将 NSMutableArray 与来自 web 服务的 NSMutableArray 合并和更新

> ID：13930661
> 
> 赞同：0
> 
> 时间：2012-12-18T10:15:24.323
> 
> 标签：objective-c, ios, web-services, nsmutablearray, merging-data

我目前正在使用两个 JSON Web 服务来异步填充两个单独的 NSMutableArrays。

**本地库存和供应商库存**

第一个网络服务检索本地库存，另一个检索供应商库存。所以在两个数组被填满之后，我运行一个`-(void)compareArrays`函数`dispatch_group_wait(group, DISPATCH_TIME_FOREVER);`

**自定义对象**

我使用自定义对象来存储来自 web 服务的数据。每个对象代表一个产品。

**每个 Web 服务的不同键（相同（类型）值）**

由于两个 web 服务返回不同命名的键值对（因为一个返回其键是荷兰语，另一个是英语）我有两个对象的解析函数。解析不同的Web服务时基本上`[dictionary objectForKey:@"property"]`是不同的，但它设置的属性是相同的。

**使用供应商库存信息更新本地库存信息**

供应商网络服务还返回由本地库存网络服务返回的产品。本地产品的某些属性必须由供应商网络服务更新，我正在努力使其工作。

现在这适用于很多产品，但有些产品不知何故不会触发 if 循环。我检查了 JSON 结果，并将产品的本地版本和供应商版本都放在了 NSLog 中：它们的哈希值和 externalItemId 是相同的。

这个对象不知何故没有通过 if 循环，即使在创建之后，externalItemId 也被设置为“artikelsysteemnummer”的值，这是供应商 Web 服务的 externalItemId 的键。它们的哈希值也相同。

有人知道哪里可能出错吗？因为我看到 MergeArrays 函数跳过了这个产品，并且总价格保持为 0 而不是 13100。

提前致谢！

**更新**

我再次检查了我的代码，在 WebService 代码中，有一个小调试代码卡在那里，说如果供应商库存为 0，则不要将产品添加到数组中。虽然我忘了删除它（因为某些供应商的库存可能会返回 0，但我们会在本地库存中拥有它，因此产品没有更新）。

谢谢大家，节日快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:38:04.863

对不起大家！我刚刚检查了我的代码，我忘记在 webservice-code 中删除这个愚蠢的调试 if-loop，它阻止了几个产品被添加到数组中。不过感谢您的帮助！

（我已经更新了主要帖子以反映这一点）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T10:50:50.523

请更改 isEqual 方法的实现方法并尝试。可能问题就在这里。从 **if (![externalItemId isEqual:[otherProduct externalItemId]]) 返回 NO；**

如果 (![externalItemId isEqualToString : **[otherProduct externalItemId]]) 返回 NO；**

# c# - 您如何清理列表以仅匹配字符串？

> ID：13930662
> 
> 赞同：2
> 
> 时间：2012-12-18T10:15:25.980
> 
> 标签：c#, listbox, data-scrubbing

我正在尝试创建一个例程，该例程从文本框中获取一个列表，然后使用另一个列表对其进行清理。仅保留具有匹配文本的字符串。我不认为我可以使用 RegEx，因为我不知道清理列表将包含什么。比赛不一定是绝对的。例如：

```
'ant' from my scrub list would match 'antiques', 'manta', 'ants', etc. 
```

我以为我在下面的代码中走在了正确的轨道上，但是在最后两行代码下我都得到了红色的波浪线。任何帮助表示赞赏：

```
List<string> masterList = new List<string>(textBox_masterList.Text.Split(','));    
List<string> scrubList = new List<string>(textBox_scrubList.Text.Split(','));
for (int i = 0; i < masterList.Count; i++)
    masterList = masterList.Where(x => x.Contains(scrubList)); 
```

或者

```
 masterList = masterList.RemoveAll(x => x.!Contains(scrubList)); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:19:30.530

一种有效而简短的方法是使用`Enumerable.Except`：

```
masterList = masterList.Except(scrubList).ToList(); 
```

如果你想使用`RemoveAll`which 不需要创建临时列表：

```
masterList.RemoveAll(str => scrubList.Contains(str)); 
```

由于您要删除`scrubList`.

**编辑**：使其不区分大小写：

```
masterList.RemoveAll(str => scrubList.Any(s => s.Equals(str, StringComparison.OrdinalIgnoreCase))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:21:08.417

```
List<string> masterList = new List<string>(textBox_masterList.Text.Split(','));
List<string> scrubList = new List<string>(textBox_scrubList.Text.Split(','));
masterList = masterList.Where(x => scrubList.Any(s => x.Contains(s)))
                       .ToList(); 
```

使搜索不区分大小写：

```
masterList = masterList.Where(x => scrubList.Any(s => 
                          Regex.IsMatch(x, s, RegexOptions.IgnoreCase)))
                       .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T10:22:11.303

for 语句没用，你不用变量 i。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:18:08.627

我手头没有代码，但您可以将每个代码转换`list`为`datatable`然后使用连接。这应该会导致最初的列表被清理掉。

# java - 理解字节码java

> ID：13930663
> 
> 赞同：2
> 
> 时间：2012-12-18T10:15:33.607
> 
> 标签：java, exception, jvm, bytecode

是否可以从 java 字节码中读取或识别 INVOKESPECIAL 指令引用的类？如果是，如何？另外，我怎么知道跳转后执行的下一行是什么？

请记住，我想制作一个执行此操作的程序。我正在尝试做的是找到一种仅通过字节码自动本地化异常处理的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:18:55.503

[你可以查看这个关于http://asm.ow2.org/](http://asm.ow2.org/)的框架。“ASM 框架是用于进行字节码操作的最快、最灵活和众所周知的框架”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:54:42.853

有很多框架[用于](http://java-source.net/open-source/bytecode-libraries)字节码操作。但我个人更喜欢[ASM](http://asm.ow2.org/index.html)。它的类似 XML 解析的机制更容易学习。

例如，您可以使用此代码列出`INVOKESPECIAL`jar 文件中的所有调用：它将打印如下行：

`INVOKESPECIAL[ opcode=183, owner=java/lang/StringBuilder, name=<init>, desc=()V]`.

可以说是被引用的`<init>`函数。`java/lang/StringBuilder``INVOKESPECIAL`

```
JarFile jarFile = new JarFile("xxx.jar");
Enumeration<JarEntry> entries = jarFile.entries();

while (entries.hasMoreElements()) {
    JarEntry jarEntry = entries.nextElement();
    if (jarEntry != null && jarEntry.getName().endsWith(".class")) {
        InputStream eis = jarFile.getInputStream(jarEntry);
        ClassReader classReader = new ClassReader(eis);
        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);
        MyClassVisitor mcw = new MyClassVisitor(Opcodes.ASM4, cw);
        classReader.accept(mcw, 0);
        eis.close();
    }
}

class MyClassVisitor extends ClassVisitor {
private int api;
public MyClassVisitor(int api, ClassWriter cw) {
    super(api, cw);
    this.api = api;
}
@Override
public MethodVisitor visitMethod(int access, String name, String desc, String signature, String[] exceptions) {
    MethodVisitor mv = super.visitMethod(access, name, desc, signature, exceptions);
    return new MyMethodVisitor(api, mv);
}
class MyMethodVisitor extends MethodVisitor {

    public MyMethodVisitor(int api, MethodVisitor mv) {
        super(api, mv);
    }
    @Override
    public void visitMethodInsn(int opcode, String owner, String name, String desc) {
        if (opcode == Opcodes.INVOKESPECIAL) {
            System.out.println("INVOKESPECIAL[ opcode=" + opcode + ", owner=" + owner + ", name=" + name
                    + ", desc=" + desc+"]");
        }
        super.visitMethodInsn(opcode, owner, name, desc);
    }
}
} 
```

# joomla - 致命错误：在 k2 中不在对象上下文中时使用 $this

> ID：13930664
> 
> 赞同：0
> 
> 时间：2012-12-18T10:15:36.400
> 
> 标签：joomla, module, call, fatal-error, joomla-k2

此代码在 joomla 中调用 k2 组件的字段并显示。此代码在 k2 中工作。但是当我将此代码复制到另一个模块上以调用该字段时，会出现此错误：我在互联网上搜索了 2 天，但什么也没有：

```
<?php if($this->item->params->get('itemExtraFields') && count($this->item->extra_fields)): ?>
  <!-- Item extra fields -->
  <div class="itemExtraFields">
    <ul>
        <?php foreach ($this->item->extra_fields as $key=>$extraField): ?>
        <?php if($extraField->value != ''): ?>
        <li class="<?php echo ($key%2) ? "odd" : "even"; ?> type<?php echo ucfirst($extraField->type); ?> group<?php echo $extraField->group; ?>">
            <?php if($extraField->type == 'header'): ?>
            <h4 class="itemExtraFieldsHeader"><?php echo $extraField->name; ?></h4>
            <?php else: ?>
            <span class="itemExtraFieldsValue"><?php echo $extraField->value; ?></span>
            <?php endif; ?>
        </li>
        <?php endif; ?>
        <?php endforeach; ?>
        </ul>
  </div>
  <?php endif; ?> 
```

下面的代码是一个模块，但是当添加到我的代码中时不起作用：

```
<?php if($params->get('itemExtraFields') && count($item->extra_fields)): ?>
        <div class="moduleItemExtraFields">
            <b><?php echo JText::_('K2_ADDITIONAL_INFO'); ?></b>
            <ul>
              <?php foreach ($item->extra_fields as $extraField): ?>
                      <?php if($extraField->value): ?>
                      <li class="type<?php echo ucfirst($extraField->type); ?> group<?php echo $extraField->group; ?>">
                          <span class="moduleItemExtraFieldsLabel"><?php echo $extraField->name; ?></span>
                          <span class="moduleItemExtraFieldsValue"><?php echo $extraField->value; ?></span>
                          <div class="clr"></div>
                      </li>
                      <?php endif; ?>
              <?php endforeach; ?>
            </ul>
        </div>
        <?php endif; ?>

        <div class="clr"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T11:39:48.543

为什么要将 K2 组件 HTML 复制到模块中。使用 K2_content 模块，它解决了所有通用目的。它还具有外场显示。

**如果您仍然需要它：** 您是否将 K2 组件类用于您的新模块？如果你没有在 helper.php 中为你的模块准备你的类，那么它现在可以工作了。为了解决这个问题，您需要将 helper.php 中的类从 K2 组件复制到模块的 helper.php 中，但是，获取正确的代码是一项艰巨的任务。

对于逐行html，您可以从类中导入函数。Joomla 具有将准备好的函数直接导入模板文件（default.php）的类。为此，您必须：

1- 从 helper.php 中找到 extrafield 函数 2- 直接将其导入模板文件。

您可以在下面直接使用它作为 CLASS::FUNCTION。在下面的示例中，它来自 K2_content 模块。

```
 <?php foreach (modK2ContentHelper::getItems($item->extra_fields) as $extraField): ?> 
```

如果未在新模块的 xml 文件中定义，请勿在模块中使用以下内容：

```
<?php if($params->get('itemExtraFields') && count($item->extra_fields)): ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:37:27.777

如果您将此代码复制到另一个模块。该模块不是 K2 的一部分（单独的模块与 K2 没有关系）。然后调用此代码将得到错误 Bcoz 此处的 this 表示任何 K2 模型、控制器或视图，但在您的模块中可能是模块助手。

```
so the solution i suggest is make sure the required k2 files are included in the module.
and then call the $this-> with class name or create object. 
```

这可能会解决您的问题。

# android - 我有在英文版上运行的 android 应用程序现在客户希望它转换成阿拉伯语

> ID：13930665
> 
> 赞同：4
> 
> 时间：2012-12-18T10:15:42.523
> 
> 标签：android, localization, internationalization, arabic

嗨，我一直在开发具有英文版本的应用程序，现在我想转换成阿拉伯语并且还想根据阿拉伯语从右到左更改视图。

应用程序中的大部分数据来自英文服务器端。现在我真正的问题是，有什么方法可以让我以阿拉伯语转换数据@我的客户端，以便客户端。到目前为止我搜索的是

1.  谷歌翻译 api----> 但这是付费的，翻译也达不到标准。

2.  如果我在 strings.xml 中有静态字符串，那么我可以轻松转换为阿拉伯语。但整个数据来自 web 服务和设置到 textview。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:43:14.223

听起来你想做三件事：

1.  允许您的应用在用户界面和文本内容中支持阿拉伯语和英语。
2.  让您的应用在显示阿拉伯语 UI 和内容时使用从右到左的布局。
3.  让您的应用在运行时将从 Web 服务收到的英语文本翻译成阿拉伯语。

允许您的应用程序支持阿拉伯语 UI 和内容需要您将应用程序国际化和本地化。这是一个庞大而复杂的话题。[Google Development Guide, *Localization*](http://developer.android.com/guide/topics/resources/localization.html)是一个很好的起点。

Android 从 4.2 Jelly Bean 版本开始支持从右到左的布局。有关详细信息，请参阅[Android 4.2 API 文档*RTL 布局*](http://developer.android.com/guide/topics/resources/localization.html)。

对于训练有素的人工翻译人员来说，将英语文本翻译成阿拉伯语非常困难。软件更难做到正确。做得好的软件很少是免费的。您没有说您的英语源文本是不受限制的（非常非常困难），还是仅限于专业词汇（不太困难）。我建议您鼓励您的网络服务提供商提供阿拉伯语等效服务，然后让您的应用程序使用它。

# java - 为excel Apache poi java中的合并单元格添加边框。？

> ID：13930668
> 
> 赞同：20
> 
> 时间：2012-12-18T10:15:57.937
> 
> 标签：java, apache-poi

我正在使用 Apache POI，我需要在一系列单元格或合并区域中放置一个边框。我正在合并三行五列的单元格。但我无法为其添加边框。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-23T15:33:45.623

我的解决方案是按位置合并单元格，然后创建一个单元格（引用合并单元格的第一个块）来分配一个值，然后通过[HSSFRegionUtil设置边框](http://poi.apache.org/apidocs/org/apache/poi/ss/util/class-use/CellRangeAddress.html)

```
// Merges the cells
CellRangeAddress cellRangeAddress = new CellRangeAddress(start, start, j, j + 1);
sheet.addMergedRegion(cellRangeAddress);

// Creates the cell
Cell cell = CellUtil.createCell(row, j, entry.getKey());

// Sets the borders to the merged cell
HSSFRegionUtil.setBorderTop(CellStyle.BORDER_MEDIUM, cellRangeAddress, sheet, workbook);
HSSFRegionUtil.setBorderLeft(CellStyle.BORDER_MEDIUM, cellRangeAddress, sheet, workbook);
HSSFRegionUtil.setBorderRight(CellStyle.BORDER_MEDIUM, cellRangeAddress, sheet, workbook);
HSSFRegionUtil.setBorderBottom(CellStyle.BORDER_THIN, cellRangeAddress, sheet, workbook); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-05T12:44:53.437

您会发现 RegionUtil 类对于设置一系列单元格的边框很有用。看这里：

[http://poi.apache.org/apidocs/index.html](http://poi.apache.org/apidocs/index.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-11T18:45:41.493

首先，很高兴知道您要创建哪种工作表格式。因为当您在 HSSF 中合并空单元格时，这是完全正常的，而 XSSF 会创建格式错误的文件，在 Microsoft EXCEL 中打开它时会导致错误。在这两种情况下，样式往往表现相同。您需要为要合并的每个单元格分配相同的样式（在包含边框的案例样式中）。我的建议是创建一个函数来检查和更正，为合并区域中的所有单元格设置样式。这是我自己的例子：

```
private static final XSSFColor COLOR_ORANGE         = new XSSFColor(new java.awt.Color(254, 253, 189));
private static final XSSFColor COLOR_GREY           = new XSSFColor(new java.awt.Color(191, 190, 154)); 
```

. . .

```
 XSSFCellStyle styleSubHeader = (XSSFCellStyle) wb.createCellStyle();
        styleSubHeader.setFont(fontBold);
        styleSubHeader.setVerticalAlignment(CellStyle.VERTICAL_CENTER);
        styleSubHeader.setAlignment(CellStyle.ALIGN_CENTER);
        styleSubHeader.setFillForegroundColor(COLOR_ORANGE);
        styleSubHeader.setFillPattern(CellStyle.SOLID_FOREGROUND);
        styleSubHeader.setBorderBottom(CellStyle.BORDER_THIN);
        styleSubHeader.setBottomBorderColor(COLOR_GREY);
        styleSubHeader.setBorderLeft(CellStyle.BORDER_THIN);
        styleSubHeader.setLeftBorderColor(COLOR_GREY);
        styleSubHeader.setBorderRight(CellStyle.BORDER_THIN);
        styleSubHeader.setRightBorderColor(COLOR_GREY);
        styleSubHeader.setBorderTop(CellStyle.BORDER_THIN);
        styleSubHeader.setTopBorderColor(COLOR_GREY); 
```

. . .

```
 /**
 * Checking if every row and cell in merging region exists, and create those which are not    
 * @param sheet in which check is performed
 * @param region to check
 * @param cellStyle cell style to apply for whole region
 */
private void cleanBeforeMergeOnValidCells(XSSFSheet sheet,CellRangeAddress region, XSSFCellStyle cellStyle )
{
    for(int rowNum =region.getFirstRow();rowNum<=region.getLastRow();rowNum++){
        XSSFRow row= sheet.getRow(rowNum);
        if(row==null){
            sheet.createRow(rowNum);
            logger.trace("while check row "+rowNum+" was created");
        }
        for(int colNum=region.getFirstColumn();colNum<=region.getLastColumn();colNum++){
            XSSFCell currentCell = row.getCell(colNum); 
           if(currentCell==null){
               currentCell = row.createCell(colNum);
               logger.trace("while check cell "+rowNum+":"+colNum+" was created");
           }    

           currentCell.setCellStyle(cellStyle);

        }
    }

} 
```

最后你在实际合并调用之前调用它，如下所示：

```
CellRangeAddress region = new CellRangeAddress(rowIndex, rowIndex, mergeStart, cellIndex+cellOffset);
cleanBeforeMergeOnValidCells(row.getSheet(),region,styleSubHeader );
row.getSheet().addMergedRegion(region);// merging cells that has a title name 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-10T18:39:38.677

我建议您使用 getMergedRegions，该方法将返回工作表中合并区域的列表。然后您可以迭代每个区域以应用边框。例如：

```
private void setBordersToMergedCells(Workbook workBook, Sheet sheet) {
  List<CellRangeAddress> mergedRegions = sheet.getMergedRegions();
  for (CellRangeAddress rangeAddress : mergedRegions) {
    RegionUtil.setBorderTop(CellStyle.BORDER_THIN, rangeAddress, sheet, workBook);
    RegionUtil.setBorderLeft(CellStyle.BORDER_THIN, rangeAddress, sheet, workBook);
    RegionUtil.setBorderRight(CellStyle.BORDER_THIN, rangeAddress, sheet, workBook);
    RegionUtil.setBorderBottom(CellStyle.BORDER_THIN, rangeAddress, sheet, workBook);
  }
} 
```

然后，您可以在完成 mySheet 中所需的所有合并后调用此方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-12T12:55:12.257

利用：

```
int rownumm=0;
rownumm++;

Row row = sheet.createRow(rownumm);
Cell cell = row.createCell(0);
cell.setCellValue(web.getUrl());
cell.setCellStyle(styles.get("font"));//font for text

CellRangeAddress region = CellRangeAddress.valueOf("$A$"+ (rownumm) + ":$E$+" + (rownumm));
frame(region, sheet, wb); 
```

及使用方法：

```
private static void frame(CellRangeAddress region,Sheet sheet, Workbook wb){
    sheet.addMergedRegion(region);

    final short borderMediumDashed = CellStyle.BORDER_MEDIUM;
    RegionUtil.setBorderBottom(borderMediumDashed, region, sheet, wb);
    RegionUtil.setBorderTop(borderMediumDashed, region, sheet, wb);
    RegionUtil.setBorderLeft(borderMediumDashed, region, sheet, wb);
    RegionUtil.setBorderRight(borderMediumDashed, region, sheet, wb);
} 
```

另请参阅链接上的“使用便利功能”：

[https://poi.apache.org/spreadsheet/quick-guide.html#FooterPageNumbers](https://poi.apache.org/spreadsheet/quick-guide.html#FooterPageNumbers)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T10:53:17.327

```
 cellStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
    cellStyle.setBorderBottom(HSSFCellStyle.BORDER_THIN);
    cellStyle.setBorderTop(HSSFCellStyle.BORDER_THIN);
    cellStyle.setBorderLeft(HSSFCellStyle.BORDER_THIN);
    cellStyle.setBorderRight(HSSFCellStyle.BORDER_THIN);
    cellStyle.setBottomBorderColor(IndexedColors.BLACK.getIndex());
    cellStyle.setTopBorderColor(IndexedColors.BLACK.getIndex());
    cellStyle.setLeftBorderColor(IndexedColors.BLACK.getIndex());
    cellStyle.setRightBorderColor(IndexedColors.BLACK.getIndex()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-16T09:43:18.750

一般来说，我知道使用 RegionUtil 会让你的生活更轻松，因为它是一个易于使用的类，但它非常占用 CPU。只要有可能，请始终尝试使用 cellstyle 来执行此类程序。最好使用自己的方法来设置表格边框，而不是使用 RegionUtils。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-27T05:39:03.053

根据 Apache POI v3，以下代码对我有用：

```
// Defining and merging the cells
CellRangeAddress cellRangeAddress = new CellRangeAddress(start, start, j, j + 1);
sheet.addMergedRegion(cellRangeAddress);

// Adding a border to the cell
RegionUtil.setBorderTop(BorderStyle.THIN, cellRangeAddress, sheet);
RegionUtil.setBorderBottom(BorderStyle.THIN, cellRangeAddress, sheet);
RegionUtil.setBorderLeft(BorderStyle.THIN, cellRangeAddress, sheet);
RegionUtil.setBorderRight(BorderStyle.THIN, cellRangeAddress, sheet); 
```

# c++ - 在 8 位和 32 位值之间加载/存储

> ID：13930672
> 
> 赞同：0
> 
> 时间：2012-12-18T10:16:06.777
> 
> 标签：c++, c

> **可能重复：**
> [将 int 存储在 char 数组中？](https://stackoverflow.com/questions/1522994/store-an-int-in-a-char-array)

我想将 4 个 8 位无符号字符加载到 32 位整数。并将 32 位整数存储到无符号字符指针。这怎么可能？下面的示例用法；

```
int 32bitint1= 0xff000000 | (uchar1<<16) | (uchar2<<8) | uchar3;
int 32bitint2= 0xff000000 | (uchar4<<16) | (uchar5<<8) | uchar6;
//then this 32-bit integer to uchar pointer;
ucharpointer[0] = 32bitint1;
ucharpointer[4] = 32bitint2;//is this possible?or how 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:41:32.893

**存储**：（将 4 个字符存储到无符号整数中）

```
int store(uint32_t * reg, unsigned char c[4])
{
    *reg = 0;
        for(int i=0;i<4;i++)
        {
            *reg = (*reg<<8) | c[i];
        }
        return 0;
} 
```

**加载**：（从无符号整数加载 4 个字符）

```
int load(uint32_t * reg, unsigned char c[4])
{
        for(int i=0;i<4;i++)
        {
            c[i] = *reg;
            *reg = *reg>>8;
        }
        return 0;
} 
```

**用法示例**：

```
int main ()
{
    unsigned char c[4] = {'a','b','c','d'};
    uint32_t reg;

    printf("%c",c[0]);  //it prints 'a'
    store(&reg,c);   

    c[0] = 'e';
    printf("%c",c[0]);  //it prints 'e'

    load(&reg,c);     //load
    printf("%c",c[0]);  //it prints 'a' again

    return 0;
} 
```

**如果您不想将它们重新加载到 char 数组中，而是通过 char 指针访问它们，那么这里有一个示例**：

```
int main (int argc, char const *argv[])
{
    unsigned char c[4] = {'a','b','c','d'};
    uint32_t reg;
    store(&reg,c);

    unsigned char *cpointer = (unsigned char *) &reg;

    for(int i=0;i<4;i++)
    {
        printf("%c",cpointer[i]);  //access the 4 chars by a char pointer
    }
    return 0;
} 
```

请注意，您将以这种方式获得输出“dcba”，因为内存地址是以相反的顺序生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:28:16.590

假设字节是大端读取的，存储每个 4 字节形成 32 字节为

```
uint32_t bit_32 = ((uint32_t)uchar[0] << 24) |  ((uint32_t)uchar[1] << 16) | ((uint32_t)uchar[2] << 8) | ((uint32_t)uchar[3]) 
```

将 32 位整数存储为无符号字符指针，

```
unsigned char *ptr = &bit_32; 
```

# php - Paypal 沙盒 IPN 未更新我的数据库表

> ID：13930674
> 
> 赞同：1
> 
> 时间：2012-12-18T10:16:08.510
> 
> 标签：php, paypal

我做了贝宝 IPN，但是我的数据库中没有任何内容。这是我的按钮（我让它重新出现）和我的代码，有人看到我哪里出错了吗？任何人都可以帮我解决这个问题

```
<?php
$conn = mysql_connect('localhost', 'USERNAME', 'PASSWORD');
if(!$conn) { die("Could not connect: ".mysql_error()); }

$database = mysql_select_db('fbkidsonlinedb', $conn);
if(!$database) { die("Can't use database: ".mysql_error()); }

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

// If testing on Sandbox use: 
$header .= "Host: <!-- w --><a class="postlink" href="http://www.sandbox.paypal.com:443">www.sandbox.paypal.com:443</a><!-- w -->\r\n";
//$header .= "Host: <!-- w --><a class="postlink" href="http://www.paypal.com:443">www.paypal.com:443</a><!-- w -->\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

// If testing on Sandbox use:
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
//$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST["item_name"];
$item_number = $_POST["item_number"];
$payment_status = $_POST["payment_status"];
$payment_amount = $_POST["mc_gross"];
$payment_currency = $_POST["mc_currency"];
$txn_id = $_POST["txn_id"];
$receiver_email = $_POST["receiver_email"];
$payer_email = $_POST["payer_email"];
$user_id = mysql_real_escape_string($_POST["custom"]);

if (!$fp) {
    // HTTP ERROR
} else {
    fputs ($fp, $header . $req);
    while (!feof($fp)) {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0) {
            if ($payment_status=='Completed') {
                $txn_id_check = mysql_query("SELECT txn_id FROM log WHERE txn_id =".$txn_id."");
                if (mysql_num_rows($txn_id_check) !=1) {
                    if ($payment_amount=='29.95' && $payment_currency=='USD') {
                        $log_query = mysql_query("INSERT INTO log VALUES ('', '".$txn_id."', '".$payer_email."')");
                        $update_premium = mysql_query("UPDATE users SET authLevel='1' where fbID='".$user_id."'");
                    }
                }
            }
        }
        else if (strcmp ($res, "INVALID") == 0) {
            // log for manual investigation
        }
    }
    fclose ($fp);
} 
```

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="hiddenForStackQuestion">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="hiddenForStackQuestion">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="no_shipping" value="2">
<input type="hidden" name="rm" value="1">
<input type="hidden" name="return" value="hiddenForStackQuestion">
<input type="hidden" name="cancel_return" value="hiddenForStackQuestion">
<input type="hidden" name="src" value="1">
<input type="hidden" name="a3" value="29.95">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="Y">
<input type="hidden" name="notify_url" value="hiddenForStackQuestion" />
<input type="hidden" name="custom" value="<?php echo $userId ?>" />
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="bn" value="PP-SubscriptionsBF:btn_subscribeCC_LG.gif:NonHosted">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" style="border:none;">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:26:55.667

为什么要为主机分配链接：

```
$header .= "Host: <!-- w --><a class="postlink" href="http://www.sandbox.paypal.com:443">www.sandbox.paypal.com:443</a><!-- w -->\r\n"; 
```

我认为应该是：

```
$header .= "Host:http://www.sandbox.paypal.com:443\r\n"; 
```

无论如何，对 PayPal 不太熟悉，如果是我的错误，请见谅

# ssl-certificate - 如何配置 JBoss 7 为特定主机名提供不同的默认战争（使用 SSL）

> ID：13930677
> 
> 赞同：2
> 
> 时间：2012-12-18T10:16:18.367
> 
> 标签：ssl-certificate, jboss7.x, hostname

这是我的用例。

我想根据 HTTP 请求中使用的主机名使用 JBoss 7 来服务 2 个不同的 webapps (war)：

*   当我访问[https://app1.mydomain.com/](https://app1.mydomain.com/)时，JBoss 必须`app1.war`使用 SSL 证书“app1.mydomain.com”
*   当我访问[https://app2.mydomain.com/](https://app2.mydomain.com/)时，JBoss 必须`app2.war`使用 SSL 证书“app2.mydomain.com”

我希望将其`appX.war`用作每个主机名的根上下文（访问[https://appX.mydomain.com/index.html](https://appX.mydomain.com/index.html)将使用该`appX.war/index.html`文件），但我可以接受访问[https://appX.mydomain.com /appX/](https://appX.mydomain.com/appX/)访问我的`appX`（`X`是`1`或`2`）。

此外，我想为该配置使用单个 IP 和端口，但如果不使用[Appache HTTPD](http://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI)作为代理，这似乎是不可能的（根据[那个 SO 答案](https://stackoverflow.com/a/6343059/535203)和[那个](https://stackoverflow.com/a/10173447/535203)以及[JBoss 论坛上的那个线程）。](https://community.jboss.org/thread/200761)这将是另一种选择，但我宁愿不使用它。

我尝试使用`standalone`模式（并使用不同的 IP）来配置它。这是我的摘录`standalone.xml`：

```
...
    <subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="app1.mydomain.com" native="true">
        <connector name="https-app1" protocol="HTTP/1.1" scheme="https" socket-binding="app1-https" secure="true">
            <ssl password="pass1" certificate-key-file="${jboss.server.config.dir}/cert/app1.mydomain.com.key" protocol="TLSv1" verify-client="false" certificate-file="${jboss.server.config.dir}/cert/app1.mydomain.com.crt"/>
        </connector>
        <connector name="https-app2" protocol="HTTP/1.1" scheme="https" socket-binding="app2-https" secure="true">
            <ssl password="pass2" certificate-key-file="${jboss.server.config.dir}/cert/app2.mydomain.com.key" protocol="TLSv1" verify-client="false" certificate-file="${jboss.server.config.dir}/cert/app2.mydomain.com.crt"/>
        </connector>
        <virtual-server name="app1.mydomain.com" enable-welcome-root="false" default-web-module="app1">
            <alias name="app1.mydomain.com"/>
        </virtual-server>
        <virtual-server name="app2.mydomain.com" enable-welcome-root="false" default-web-module="app2">
            <alias name="app2.mydomain.com"/>
        </virtual-server>
...
<interfaces>
    <interface name="app1.mydomain.com">
        <inet-address value="10.0.0.1"/>
    </interface>
    <interface name="app2.mydomain.com">
        <inet-address value="10.0.0.2"/>
    </interface>
...
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="app1-https" interface="app1.mydomain.com" port="443" fixed-port="true"/>
    <socket-binding name="app2-https" interface="app2.mydomain.com" port="443" fixed-port="true"/>
... 
```

但这似乎没有按预期工作......

*   当我访问[https://app1.mydomain.com/](https://app1.mydomain.com/)时，我看到了我的欢迎文件`app1.war`（我认为这是由于`default-virtual-server`属性）
*   当我访问[https://app1.mydomain.com/app1/](https://app1.mydomain.com/app1/)时，我看到了 404 报告（带有 HTML 正文内容）
*   当我访问[https://app1.mydomain.com/app2/](https://app1.mydomain.com/app2/)时，我看到了我的欢迎文件`app2.war`
*   当我访问[https://app2.mydomain.com/](https://app2.mydomain.com/)、[https://app2.mydomain.com/app1/](https://app2.mydomain.com/app1/)或[https://app2.mydomain.com/app2/](https://app2.mydomain.com/app2/)时，JBoss 只回答 HTTP “404 Not Found” " 没有任何正文 HTML 内容，所以我的页面是空白的。

有人有想法吗？

（我也在[JBoss 用户论坛上发布了这个问题](https://community.jboss.org/message/783847)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:31:46.407

*我相信你有两个选择。*

**选项 1：使用 JBoss 虚拟主机**

为此，您必须将虚拟主机条目添加到 Web 子服务。你在做什么。

我认为您错过的部分是在您的网络应用程序中为您的文件添加`<virtual-host>`标签。`jboss-web.xml`

[请参考以下链接以获取有关使用 JBoss AS7](https://community.jboss.org/wiki/VirtualHostsWithJBossAS7)设置虚拟主机的快速说明 。

**选项 2：使用 Apache**

这将是我更喜欢的方法，尤其是对于生产用例。您将 Apache 作为您的 Web 服务器，并让它代理传入的请求到 JBoss。Apache 还将处理 SSL。

例如，您可以通过 mod_jk 执行此操作，它是一个负载均衡器。mod_jk 通过 AJP 连接器将流量定向到您的应用程序，该连接器应该可以使用 JBoss 中的 HA 配置文件获得。

由于您使用的是 mod_jk 和 HA 配置文件，因此您可以继续对您的应用程序进行集群化，并根据需要对这些集群进行负载平衡。

*如果您有任何其他问题，请告诉我。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:44:59.007

最后，似乎直接使用 JBoss 7 是不可能的，我使用了 Apache HTTPD，我的应用程序的非 root 上下文和多个 IP（我想要的最糟糕的）：

```
...
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
...
Listen 80
Listen 443
...

<VirtualHost IP1:80>
    DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"
    ServerName app1.mydomain.com:80
    ServerAlias www.app1.mydomain.com
    ServerAdmin admin@mydomain.com
    ErrorLog "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/app1.mydomain.com-error.log"
    TransferLog "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/app1.mydomain.com-access.log"

    RewriteEngine On
    RewriteRule ^/(.*)$ https://app1.mydomain.com/$1 [R]
</VirtualHost>

<VirtualHost IP1:443>

    #   General setup for the virtual host
    DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"
    ServerName app1.mydomain.com:443
    ServerAlias www.app1.mydomain.com
    ServerAdmin admin@mydomain.com
    ErrorLog "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/app1.mydomain.com-error.log"
    TransferLog "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/app1.mydomain.com-access.log"

    ProxyPass /app1 ajp://localhost:8009/app1
    ProxyPassReverse /app1 https://app1.mydomain.com/app1

    RewriteEngine On    
    RewriteRule ^/$ /app1/ [R]

    #   SSL Engine Switch:
    #   Enable/Disable SSL for this virtual host.
    SSLEngine on
    SSLProtocol all -SSLv2
    SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5  

    #   Server Certificate:
    SSLCertificateFile "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/conf/SSL/app1.mydomain.com.crt" 
    #   Server Private Key:
    SSLCertificateKeyFile "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/conf/SSL/app1.mydomain.com.key"
    #   Server Certificate Chain:
    SSLCertificateChainFile "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/conf/SSL/ca-root.crt"

    #   SSL Protocol Adjustments:
    BrowserMatch "MSIE [2-5]" \
             nokeepalive ssl-unclean-shutdown \
             downgrade-1.0 force-response-1.0

    #   Per-Server Logging:
    #   The home of a custom SSL log file. Use this when you want a
    #   compact non-error SSL logfile on a virtual host basis.
    CustomLog "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/app1.mydomain.com-ssl.log" "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost> 
```

那是为了`app1`。

对于`app2`，只需复制此配置并替换`app1`为`app2`和。`IP1``IP2`

# django - 夹层富文本字段

> ID：13930678
> 
> 赞同：2
> 
> 时间：2012-12-18T10:16:22.257
> 
> 标签：django, sqlite, mezzanine

如何在夹层 CMS 中使用 django 模板语言将富文本字段作为变量访问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:40:47.123

如果您使用 Mezzanine 中内置的 RichTextPage 模型，则标记为：

```
{{ page.richtextpage.content }} 
```

如果您有一个名为 CustomModel 的自定义模型源自 Page，该模型有一个名为 content 的字段，该字段使用 Mezzanine 的 RichTextField，则标记为：

```
{{ page.custommodel.content }} 
```

# android - 为什么我要部署应用程序时没有显示我的设备？

> ID：13930688
> 
> 赞同：0
> 
> 时间：2012-12-18T10:16:55.593
> 
> 标签：android, device

我想在三星上部署我的 android 应用程序，即使安装了三星 kies，我的设备也没有显示在 Android 设备选择器中。我尝试了所有的可能性，但它不起作用 4 我。任何人都可以帮助我您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:19:13.483

检查您是否在您的设备中启用了 USB 调试和允许模拟位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:22:31.133

确保在设置->开发人员选项->启用USB调试并在终端中，转到安装android的平台工具，然后给出命令1\. adb kill-server 然后 2\. adb start-server 然后 3\. adb devices: 它应该显示您的设备。

# vb.net - VB.Net 中的 SQL 查询

> ID：13930702
> 
> 赞同：0
> 
> 时间：2012-12-18T10:17:43.273
> 
> 标签：vb.net, visual-studio, tsql, sql-server-ce

我有一个从 db 中选择 value=combobox.selectedtext 的查询。

但是，我想做的是让 where 值检查组合框的所有值。

有人可以就如何做到这一点提供建议吗？

我的 sql 查询现在是这样的：

```
Dim sqlOpServ As String = ("SELECT DISTINCT col1, col2 from table1, table2 where test=test1 AND value= '" & combobox1.SelectedItem & "' ORDER BY col1 ASC") 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:36:15.660

我不知道 VS，所以我会在不尝试我的代码的情况下尝试帮助你：

 ~~```
 Dim sWhere as string=""
 For i = 0 To ComboBox1.Items.Count - 1
        sSelect = sSelect & " AND value='" & ComboBox1.Items(i) & "' "
 Next

 Dim sqlOpServ As String = ("SELECT DISTINCT col1, col2 from table1, table2 where test=test1 " & sWhere & " ORDER BY col1 ASC") 
```~~ 

~~评论后：~~

 ~~```
 Dim sWhere As String = ""

    For i = 0 To ComboBox1.Items.Count - 1
        If i = 0 Then
            sWhere = " AND value='" & ComboBox1.Items(i).ToString & "' "
        Else
            sWhere = sWhere & " OR value='" & ComboBox1.Items(i).ToString & "' "
        End If

    Next

    Dim sqlOpServ As String = _
        ("SELECT DISTINCT col1, col2 from table1, table2 where test=test1 " & sWhere & " ORDER BY col1 ASC") 
```

如果您使用数据表填充组合框

```
 Dim table As DataTable = DirectCast(Me.ComboBox1.DataSource, DataTable)
    Dim sWhere As String = ""

    For i = 0 To ComboBox1.Items.Count - 1
        Dim displayItem As String = table.Rows(i)(ComboBox1.DisplayMember).ToString()
        ' Dim valueItem As String = table.Rows(i)(ComboBox1.ValueMember).ToString() 'if you need at some point the value you can use this

        If i = 0 Then
            sWhere = " AND value='" & displayItem & "' "
        Else
            sWhere = sWhere & " OR value='" & displayItem & "' "
        End If

    Next

    Dim sqlOpServ As String = _
        ("SELECT DISTINCT col1, col2 from table1, table2 where test=test1 " & sWhere & " ORDER BY col1 ASC") 
```

我希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:32:59.200

2 种方法

1）您可以制作所有组合框项目值并用特殊字符分隔，您可以拆分存储过程中的所有值并获得结果

2) 您可以创建一个以“或”分隔的字符串，即 value=22 或 value=25，然后您可以执行这些值。~~

# jquery - 如何在 JQgrid 中提供指向列数据的超链接并根据单击的数据导航到相应的 Url？

> ID：13930711
> 
> 赞同：4
> 
> 时间：2012-12-18T10:18:00.980
> 
> 标签：jquery, jqgrid, jqgrid-formatter

我有一个 JQgrid，它只包含 2 列..我正在粘贴我在下面尝试过的代码..

```
var UserArr = new Array();
function Grid()
{
$("#users_grid").jqGrid({

            colNames: ['Site_Name', 'Details'],
            colModel: [{ name: 'Site_Name', index: 'Site_Name', width: 130,editable: false, sortable: false,formatter: 'showlink', formatoptions: { baseLinkUrl: 'url of respective site i have clicked'}},
            { name: 'Details', index: 'Details', width: 400, editable: false, sortable: false }],

            width: 400,
            height: 'auto',
            multiselect: true

        });

        var postJSONData = JSON.stringify({ 'parentitem': parent,'childitem':child });

         $.ajax({
            type: 'POST',
            data: postJSONData,
            url: 'ManageAssetService.asmx/DisplayGridData',
            dataType: 'json',
            async: false,
            contentType: 'application/json; charset=utf-8',
            success: function success(response) {

                UserArr = response.d;

            },
            error: function failure(response) {
            alert(response.message);
                alert('failed to fetch user details');
            }
        });

         var mydata;

         for (var i = 0; i <5; i++) {

             mydata = {};

            mydata.Url= UserArr[i].Url;
            mydata.Details= UserArr[i].Details;

            $("#users_grid").jqGrid('addRowData', 'GridData_Row_' + (i + 1), mydata);

        }
} 
```

我将在 JQgrid 中显示站点名称和一些有关该名称的详细信息。现在，当我单击它应该重定向到相应的 url 时，Site_Name 将是一个超链接。我如何实现这一点。此外，我正在添加网格数据动态地..所以我应该在哪里为 Site_Name 列数据提供相应的 url，以及我如何将它与那个链接..

请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:43:21.380

我有这样的解决方案..

JQgrid 列的定义如下：

```
colNames: ['Site_Name', 'Details'],
            colModel: [{ name: 'Site_Name', index: 'Site_Name', width: 130,editable: false, sortable: false,formatter: 'showlink', formatoptions: { baseLinkUrl: 'javascript:', showAction: "Link('", addParam: "');"} },
            { name: 'Details', index: 'Details', width: 400, editable: false, sortable: false }], 
```

Javascript函数：

```
function Link(id) {

    var row = id.split("=");
    var row_ID = row[1];
    var sitename= $("#users_grid").getCell(row_ID, 'Site_Name');
    var url = "http://"+sitename; // sitename will be like google.com or yahoo.com

    window.open(url);

} 
```

就是这样..

# r - ess-rdired：我收到此错误“现在没有 ESS 进程与此缓冲区关联”

> ID：13930713
> 
> 赞同：8
> 
> 时间：2012-12-18T10:18:07.850
> 
> 标签：r, emacs, ess

为了用于`ess-rdired`浏览对象，我遵循 ESS 手册并将以下内容添加到我的`.emacs`：

```
(autoload 'ess-rdired "ess-rdired"
  "View *R* objects in a dired-like buffer." t) 
```

当我这样做时`M-x` `ess-rdired`，会出现一个列出当前环境中对象的缓冲区。

但是，当我按下快捷方式时`p`，`v`我收到此错误：

> “现在没有 ESS 进程与此缓冲区相关联。”

此外，`ess-rdired`对象的信息可以在更改时更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-29T21:48:44.603

I had the same problem and sure enough C-c C-s solves it. I added the following function to my dot emacs file to automate this. I mapped the function to C-c o which will load rdired or refresh it. Any improvements would be very welcome!

```
(defun ess-R-show-objects ()
  "Calls rdired and associates with R process"
  (interactive)
  (if (get-buffer "*R*") ;;Only run if R is running
      (progn
        (ess-rdired)
        (ess-rdired-switch-process))
    (message "No R process")
    )
  )
(global-set-key (kbd "\C-co") 'ess-R-show-objects) 
```

# javascript - 在自定义全局上下文中执行任意 javascript

> ID：13930724
> 
> 赞同：0
> 
> 时间：2012-12-18T10:18:34.620
> 
> 标签：javascript

我对执行这个任意 js 代码的唯一要求`setInterval`是不公开某些全局变量/函数（例如）。

我目前的策略包括解析 js 代码并`var`为每个全局引用进行声明（在封闭闭包的开头）。

我想知道是否还有其他明显的方法可以解决这个问题。

也只是为了澄清一下，这个任意代码并没有与`eval`. 相反，它被包装在一个闭包中并附加到基本代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:31:47.790

一种选择是通过提供您自己的函数或变量来覆盖全局变量。例子：

> window.alert = function() {
> // 你的代码放在这里
> // 如果需要，可以选择调用 window.alert
> }

如果您想要隐藏的东西的有限列表很小，这应该是可以管理的。这将使它们在全球范围内不可用。

# javascript - 使用 JavaScript 的 Django 中的进度条？

> ID：13930727
> 
> 赞同：0
> 
> 时间：2012-12-18T10:18:45.177
> 
> 标签：javascript, django, progress-bar

我会尽量说清楚。我正在尝试使用 Javascript 在 Django 中开发进度条。我在 python 中有一个列表，其中的进度将像这样存储在测试变量中：

```
proc = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]
        test = sort(proc) 
```

这是一个排序函数：

```
def sort(rprogress):
    '''This function extracts the percentage from the rsync progress and return strings of percentanges'''
    progress1 = re.findall(r'\d+%', rprogress)
    remove_duplicate = set(progress1)     #Remove Duplicate percentage from list
    remove_percent = [a.replace('%', '') for a in remove_duplicate]     #Removes percentage
    sorted_list = sorted(remove_percent, key=int)     #Sort in ascending order
    return sorted_list 
```

现在我想使用列表`test`并在模板中显示进度条。我将列表测试作为 json 返回：

```
return HttpResponse(result=simplejson.dumps(test), mimetype="application/json") 
```

到目前为止，我做的一切正确吗？现在，我想要一个 javascript 来监听变量并更新 javascript 变量并显示进度条。什么是开始的好地方？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:28:21.363

[Jquery UI 的 ProgressBar](http://jqueryui.com/progressbar/)可能是一个值得一看的选项。您可能还想使用[AJAX](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEsQFjAC&url=http://api.jquery.com/jQuery.ajax/&ei=1kTQUO2NBcr_rAeNg4DYCA&usg=AFQjCNF1ITsE5bJBc65MY4nqhZq7OkHZpg&bvm=bv.1355534169,d.bmk)将更新后的值发送到 ProgressBar 元素。

另外，请查看这些问题，它们可能会有所帮助。

[Jquery:: Ajax 驱动的进度条？](https://stackoverflow.com/questions/4503658/jquery-ajax-powered-progress-bar)

[AJAX页面下载进度](https://stackoverflow.com/questions/399641/ajax-page-download-progress)

# windows-services - 作为 Web 服务运行精简 Ruby 1.9.3、Windows Server 2003

> ID：13930728
> 
> 赞同：0
> 
> 时间：2012-12-18T10:18:45.650
> 
> 标签：windows-services, windows-server-2003, redmine, thin

我正在尝试在 Windows Server 2003 上将 ruby​​ 应用程序（redmine）作为瘦 web 服务运行。我已经阅读并完成了[此处](https://stackoverflow.com/questions/4370049/run-thin-webserver-as-a-windows-service)和[此处](https://stackoverflow.com/questions/877943/how-to-configure-a-rails-app-redmine-to-run-as-a-service-on-windows)所说的所有内容，但它仍然无法正常工作。目前我已经设置：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\[my_service_name]\Parameters]
Application=c:\ruby\bin\ruby.exe
AppDirectory="c:\Program Files\redmine-1.4-test"
AppParameters=c:\ruby\bin\thin start -p 3001 -e development 
```

通过以下方式从命令行运行瘦身：

```
C:\Program Files\redmine-1.4-test>thin start -p 3001 -e development 
```

工作正常。

我已经测试了将 Redmine 移动到没有空格的路径，这不会改变任何东西。

知道有什么问题吗？任何提示我如何追踪问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:40:31.880

确保您在安装了 Ruby 的帐户中运行新服务 - 您可以从命令行正常运行精简。从控制面板 (services.msc) 编辑服务并相应[地设置登录选项卡](http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService)。

# iphone - UIToolbar 作为 Subview 进入另一个 UIViewController 是不可点击的

> ID：13930731
> 
> 赞同：0
> 
> 时间：2012-12-18T10:18:59.590
> 
> 标签：iphone, xcode, uiviewcontroller

我正在创建一个具有多个的应用程序`UIViewController`，它们在标题中有通用菜单和工具栏。我已经创建了一个带有 nib 的 uiviewcontroller 和`UIToolBar`一些顶部`UIToolBarButtons`。我打电话给另一个`UIViewController`，我的问题是这个`UIToolBar`正在显示，但`UIToolbar`现在任何按钮都不可点击，它们不起作用。所以它只显示根本不起作用的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:20:47.027

试试这个..您在 viewWillAppear 中删除您的工具栏并再次添加它

```
(void)viewWillAppear:(BOOL)animated 
 {
     [yourtoolbar_reference removeFromSuperview];
     [self.view addSubview:yourtoolbar_reference];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:24:16.167

请参阅 UIView UserInterfaceEnabled 与否。如果不是，那么只需在您的 viewdidload 中编写以下代码

```
 self.view.userInteractionEnabled = YES; 
```

或者也试试这个

```
 [self.view bringSubviewToFront:youtoolbar]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:24:20.473

只需尝试此代码即可跳过您的代码

```
[yourBarButton setTarget:self];
[yourBarButton setAction:@selector(yourBtnClicked:)];

[yourToolBar setUserInteractionEnabled:YES];
[self.view setUserInteractionEnabled:YES];
[self.view bringSubviewToFront:yourToolBar]; 
```

**更新：**

要将其`UIToolBar`用于每个`UIViewController`，只需将其添加到窗口中并在 AppDelegate 类中设置方法也...

希望这可以帮助你...

# jquery - 选择下拉菜单中是否只有一个选项可用并禁用

> ID：13930734
> 
> 赞同：1
> 
> 时间：2012-12-18T10:19:05.490
> 
> 标签：jquery

我正在处理一个 jquery 下拉菜单。通常我的下拉菜单中有多个选项可供选择，但对于某些产品，只有一个选项我希望脚本能够在只有一个选项的情况下选择值并禁用下拉菜单。现有代码是：

```
RonisCatalog.selectSwatches = function(element, options){
if (jQuery('body .swatches-container').size()==0)
    return ;

else    
var selectOptions = jQuery(element).find('option'),
    selectOptionsValues = {};
var selectLabel = '';
jQuery.each(selectOptions,function(idx,selectOption){
    if (jQuery(selectOption).val()=='')
        selectLabel = jQuery(selectOption).html();
    selectOptionsValues[jQuery(selectOption).val()] = jQuery(selectOption).val();
});
jQuery('body .swatches-container .swatch-type-id-'+element.attributeId).parents('.swatch-list-continer').children('.swatch-list-label').html('<label id="attribute'+element.attributeId+'_label" >Select '+selectLabel+'</label>');
jQuery('body .swatches-container .swatch-type-id-'+element.attributeId+' .swatch-option').addClass('swatch-disabled').removeClass('swatch-active');

jQuery.each(options,function(idx,option){
    if (typeof selectOptionsValues[option.id] != 'undefined')
        jQuery('body .swatches-container .swatch-type-id-'+element.attributeId+' .swatch-option-id-'+option.id).removeClass('swatch-disabled');
});
}; 
```

我想在两者之间使用这个选项：

```
else if (jQuery('body .swatches-container').size()==1) {

} 
```

和如上所述的功能。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:39:51.900

你可以试试这个：

```
else if ($jQuery('body .swatches-container').size() == 1) {
    $jQuery('body .swatches-container').val('0').attr("disabled", "disabled");
} 
```

# sql - 带标识的存储过程

> ID：13930740
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:19:23.367
> 
> 标签：sql, sql-server-2008

我的存储过程不起作用，我收到一个错误：

> 消息 102，级别 15，状态 1，过程 SP_HUGO_INSRTGAME，第 4 行
> “@firstName”附近的语法不正确。
> 消息 137，级别 15，状态 1，过程 SP_HUGO_INSRTGAME，第 12 行
> 必须声明标量变量“@StudentFirstName”。
> 消息 102，级别 15，状态 1，过程 SP_HUGO_INSRTGAME，第 13 行
> “值”附近的语法不正确。

这是我的存储过程：

```
Create Procedure SP_HUGO_INSRTGAME 
(
@lastName as nvarchar(200)
@firstName as nvarchar(200)
@email as nvarchar(200)
@StudentFirstName INT

)
As
Begin

    SET @StudentFirstName =  'insert into tbl_hugo_user (user_email, first_name, last_name, confidence, inspire, creativity, bonus_q )  values (@email, @firstName, @lastName, 0, 0, 0, 0); SELECT SCOPE_IDENTITY() ';
    insert into tbl_hugo_game (user_hugo_Id) value (@StudentFirstName )
End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:35:15.660

您在过程中有很多错误：
**首先：**在定义​​参数时，每个参数后必须有一个逗号
**其次：**您只是设置`@StudentFirstName`字符串值，但它是一个 int。从字符串中我知道您首先插入行，然后将最近插入的行的 ID 获取到`@StudentFirstName`. 为此，您必须执行以下操作：

`insert into tbl_hugo_user (user_email, first_name, last_name, confidence, inspire, creativity, bonus_q ) values (@email, @firstName, @lastName, 0, 0, 0, 0)`

`SELECT @StudentFirstName = SCOPE_IDENTITY()`

使用它你会得到 id 然后你可以做

`insert into tbl_hugo_game (user_hugo_Id) values (@StudentFirstName )`
完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T10:24:09.347

[必须是 VALUES 而不是 VALUE](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

```
insert into tbl_hugo_game (user_hugo_Id) values (@StudentFirstName ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T10:29:20.960

```
Create Procedure SP_HUGO_INSRTGAME 
    @lastName as nvarchar(200),
    @firstName as nvarchar(200),
    @email as nvarchar(200)
As
Declare @StudentFirstName Int
Begin
    insert into tbl_hugo_user (user_email, first_name, last_name, confidence, inspire, creativity, bonus_q )  values (@email, @firstName, @lastName, 0, 0, 0, 0)

    SELECT @StudentFirstName=SCOPE_IDENTITY()
    insert into tbl_hugo_game (user_hugo_Id) values (@StudentFirstName )
End 
```

# sql - 按错误sql server分组

> ID：13930741
> 
> 赞同：0
> 
> 时间：2012-12-18T10:19:25.990
> 
> 标签：sql, sql-server

```
select 
    case location_id 
      when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
      when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
      when 7 then 'MUMBAI' when 8 then 'CHENNAI' 
   end as CITY,
   count(*) as Total
from #tmptab1
group by CITY 
```

我收到错误

> *消息 207，级别 16，状态 1，第 12 行
> 无效的列名称“城市”*

如何纠正这个？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:22:33.823

您不能在`GROUP BY`子句中使用列别名。请参阅[Select 语句的评估的概念顺序](http://tinman.cs.gsu.edu/~raj/sql/node22.html)，您将在其中看到（逻辑上）按以下顺序评估子句：`FROM, WHERE, GROUP BY, HAVING, SELECT, DISTINCT, UNION, ORDER BY`。

这并不是引擎执行操作的确切方式，但它是一种有用的启发式方法，可以有效地理解为什么不能使用子句中`SELECT`语句中的某些`GROUP BY`内容——它在逻辑上不适用于`GROUP BY`子句后来评价。

有几种方法可以解决这个问题：

1.  `GROUP BY`重复子句中的整个表达式：

    ```
    SELECT
       City =
          CASE location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
          when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
          when 7 then 'MUMBAI' when 8 then 'CHENNAI'
          END,
       Total = Count(*)
    FROM #tmptab1
    GROUP BY
       CASE location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
       when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
       when 7 then 'MUMBAI' when 8 then 'CHENNAI'
       END 
    ```

2.  使用派生表：

    ```
    SELECT
       City,
       Total = Count(*) 
    FROM
       (
          SELECT
             City =
                CASE location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
                when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
                when 7 then 'MUMBAI' when 8 then 'CHENNAI'
                END
          FROM #tmptab1
       ) Cities
    GROUP BY City; 
    ```

3.  使用公用表表达式 (CTE)、SQL Server 2005 及更高版本：

    ```
    WITH Cities AS (
        SELECT
           City =
              CASE location_id 
                 when 1 then 'DELHI' 
                 when 2 then 'AHMEDABAD' 
                 when 4 then 'HYDERABAD' 
                 when 5 then 'KOLKATA' 
                 when 6 then 'BANGALORE'
                 when 7 then 'MUMBAI' 
                 when 8 then 'CHENNAI'
              END
        FROM #tmptab1
    )
    SELECT
       City,
       Total = Count(*) 
    FROM Cities
    GROUP BY City; 
    ```

4.  使用 CROSS APPLY、SQL Server 2005 及更高版本：

    ```
    SELECT
       City,
       Total = Count(*)
    FROM
       #tmptab1
       CROSS APPLY (
          SELECT
             City =
                CASE location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
                when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
                when 7 then 'MUMBAI' when 8 then 'CHENNAI'
                END
       ) C
    GROUP BY City; 
    ```

由于您的表达式是确定性的，因此您可以简单地做`GROUP BY location_id`，但这不是正常情况，您不应该期望能够通过选择单个列来规避正常的聚合分组逻辑，因为大多数时间这样的 CASE 表达式增加了不确定的值。

事实上，因为信息不仅是确定性的，而且是关于现实世界的（而不是业务规则），我建议您不要在查询中编码这些信息！创建一个`Location`表并加入它。将可更改的用户数据直接放入查询中并不是最佳实践——查询应该记录过程，而不是内容，如果添加新的 location_id 会怎样？所有使用它的查询都必须改变。`location_id`此外，如果多个`location_id`可以引用同一个城市，分组依据将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:22:06.717

您不能在 group by 语句中使用别名，您将需要 group by 中选择的整个部分

```
select case location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
when 7 then 'MUMBAI' when 8 then 'CHENNAI' end as CITY,count(1) as Total
from #tmptab1
group by case location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
when 7 then 'MUMBAI' when 8 then 'CHENNAI' end 
```

对 location_id 本身进行分组也可能有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:32:08.463

以下（*仅通过更改您的查询* `group by location_id`）适用`Sql-server 2008 or above`（以下不确定）

```
select 
    case location_id 
      when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
      when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
      when 7 then 'MUMBAI' when 8 then 'CHENNAI' 
   end as CITY,
   count(*) as Total
from #tmptab1
group by location_id --NOTE 
```

`Or`您可以使用

```
select case location_id when 1 then 'DELHI' when 2 then 'AHMEDABAD' 
            when 4 then 'HYDERABAD' when 5 then 'KOLKATA' when 6 then 'BANGALORE'
            when 7 then 'MUMBAI' when 8 then 'CHENNAI' 
            end as CITY, total
from (
    select location_id, count(*) total
    from #tmptab1 
    group by location_id ) A 
```

# jquery - jQuery：我需要在每次新点击时在表单中显示连续字段

> ID：13930742
> 
> 赞同：1
> 
> 时间：2012-12-18T10:19:26.447
> 
> 标签：jquery

我有 5 个上传字段，但除了第一个之外，我需要隐藏它们。然后在每次单击时一一显示。

我创建了以下脚本，但似乎 item.show() 没有显示隐藏的 fields.10x

```
first = $('.webform-client-form').find('div[id$="-ajax-wrapper"]').first();
    first.after('<a id="addmore" href=#>[+] Add more</a>');
    $('.webform-client-form').find('div[id$="-ajax-wrapper"]').each(function(){
            $(this).hide();
            first.show();
    });

    var c = 1;//counter
    $('#addmore').bind('click', function(e) {
        item = $('edit-submitted-file'+c+'-ajax-wrapper');
        item.show();
        ++c;
    if (c == 5) {
      $('#addmore').hide();
      return false;
    }
  }); 
```

![在此处输入图像描述](../Images/af461bd74ab5d2cf824faa743a3f7a65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:22:34.290

这不应该：

```
var item = $('edit-submitted-file'+c+'-ajax-wrapper'); 
```

是

```
var item = $('#edit-submitted-file'+c+'-ajax-wrapper'); //if using id
or
var item = $('.edit-submitted-file'+c+'-ajax-wrapper'); //if using class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:25:01.517

您需要添加`'#'`到选择器的前面，`-ajax-wrapper`因为您是通过 ID 选择它。

计数器需要从 2 开始，并在 6 上隐藏 addmore。`return false`(实际上`e.preventDefault()`应该在该条件之外。

`addmore`应该添加在文件输入行的最后一行之后，而不是第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:26:58.987

只需使用`next()`函数和`:visible`选择器

例子：

**HTML**

```
<label><span>File</span> <input type="file" /></label>
<label><span>File</span> <input type="file" /></label>
<label><span>File</span> <input type="file" /></label>
... 
```

**jQuery**

```
$('label:gt(0)').hide(); // hide all except the first one
$('label:visible').click($(this).next('label').show()); // show the following 
```

`:visible`没有必要，因为您无法单击隐藏元素，但这只是一种优化。

# java - 将 POJO 与带有 JAXB 和 Solr 注释的嵌套类一起使用

> ID：13930748
> 
> 赞同：1
> 
> 时间：2012-12-18T10:19:41.220
> 
> 标签：java, solr, jaxb, annotations

我希望有尽可能少的类，所以我想构建**一个 JAXB 和 Solr 注释 POJO**，正如您可能猜到的那样，使用 XML，将其编组为 Company 对象并对其进行索引。

我对编组没有问题 - Company 对象构建得很好。我遇到的问题是如何注释 Company POJO 以创建**多值字符串 solr 字段**。

XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<company>
    <registryNumber>5226805000</registryNumber>
    <names>
        <name>name1</name>
        <name>name2</name>
    </names>
</company> 
```

我目前对公司 POJO 的可悲尝试看起来像：

```
@XmlRootElement(name = "company")
public class Company {

    public Company() {}

    @XmlElement
    @Field("id")
    public String registryNumber; 

    public static class Names {
        public Names() {}

        @XmlElement(name = "name")
        @Field("title")
        public List<Name> name;

        public static class Name {
            public Name() {}

            @XmlValue
            public String value;
        }
    }

    @XmlElement(name = "names")
    public Names names;

} 
```

我制作的两个单元测试：

```
public class CompanySearchTest extends AbstractSolrTestCase {

    private SolrServer server;

    private Company company;

    @Before
    @Override
    public void setUp() throws Exception {
        super.setUp();
        server = new EmbeddedSolrServer(h.getCoreContainer(), h.getCore().getName());

        company = new Company();
        company.registryNumber = "5226805000";
        Company.Names.Name name1 = new Company.Names.Name();
        name1.value = "name1";
        Company.Names.Name name2 = new Company.Names.Name();
        name1.value = "name2";
        Company.Names names = new Company.Names();
        names.name = Arrays.asList(name1, name2);

        server.addBean(company);
        server.commit();
    }

    @After
    public void destroy() {
        h.getCoreContainer().shutdown();
    }

    @Test
    public void searchByIdTest() throws IOException, SolrServerException {
        SolrQuery query = new SolrQuery();
        query.setQuery("id:5226805000");

        QueryResponse response = server.query(query);

        List<Company> companiesFound = response.getBeans(Company.class);

        assertEquals(1L, companiesFound.size());
        assertEquals("5226805000", companiesFound.get(0).registryNumber);    
    }

    @Test
    public void searchByMultivalueNameTest() throws IOException, SolrServerException {
        SolrQuery query = new SolrQuery();
        query.setQuery("title:name1");

        QueryResponse response = server.query(query);

        List<Company> companiesFound = response.getBeans(Company.class);

        assertEquals(1L, companiesFound.size());
        assertEquals("name1", companiesFound.get(0).names.name.get(0).value);
    }

    @Override
    public String getSchemaFile() {
        return "solr/collection1/conf/schema.xml";
    }

    @Override
    public String getSolrConfigFile() {
        return "solr/collection1/conf/solrconfig.xml";
    }
} 
```

测试 searchByIdTest() 通过，而 searchByMultivalueNameTest() 惨遭失败，因为通过搜索找不到公司：

```
query.setQuery("title:name1"); 
```

我使用的 solr 模式是随 solr 4.0.0 提供的（集合 1 示例）。

有人可以给我一些提示，如果可能的话，我应该**如何****注释 Company POJO**或我应该进行哪些修改。

目标是拥有`<name>name1</name>`并`<name>name2</name>`索引为示例 solr 模式中定义的多值 solr 字符串字段，其中：

```
<field name="title" type="text_general" indexed="true" stored="true" multiValued="true"/> 
```

因此可以通过搜索“title:name1”或“title:name2”找到该公司。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:17:26.587

问题是 SolrJ 不支持多值字段的复杂类型。请参阅上一个问题 - [solrj: how to store and retrieve List via multivalued field in index](https://stackoverflow.com/questions/6633684/solrj-how-to-store-and-retrieve-listpojo-via-multivalued-field-in-index)

您需要将字段定义更改为以下内容：

```
 @XmlElement(name = "name")
    @Field("title")
    public List<String> name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:06:42.877

正如佩奇指出的那样：

> SolrJ 不支持多值字段的复杂类型

我已经修改了 Company POJO（我喜欢删除我自己的代码行！）：

```
@XmlRootElement(name = "company")
public class Company {
    public Company() {}

    @XmlElement
    @Field("id")
    public String registryNumber;

    @XmlElementWrapper(name = "names")
    @XmlElement(name = "name")
    @Field("title")
    public List<String> names;
} 
```

XML 当然保持不变。

单元测试的 setUp() 方法也被简化了：

```
@Before
@Override
public void setUp() throws Exception {
    super.setUp();
    server = new EmbeddedSolrServer(h.getCoreContainer(), h.getCore().getName());

    company = new Company();
    company.registryNumber = "5226805000";
    company.names= Arrays.asList("name1", "name2");

    server.addBean(company);
    server.commit();
} 
```

断言也被简化了，但我又添加了两个查询来确认正在发生正确的搜索：

```
@Test
    public void searchByMultivalueNameTest() throws IOException, SolrServerException {
        SolrQuery query = new SolrQuery();
        query.setQuery("title:name1");

        QueryResponse response = server.query(query);

        List<Company> companiesFound = response.getBeans(Company.class);

        assertEquals(1L, companiesFound.size());
        assertEquals("name1", companiesFound.get(0).names.get(0));

        // 2nd query
        query.clear();
        query.setQuery("title:name2");

        response = server.query(query);

        companiesFound = response.getBeans(Company.class);

        assertEquals(1L, companiesFound.size());
        assertEquals("name2", companiesFound.get(0).names.get(1));

        // 3rd query
        query.clear();
        query.setQuery("title:name1 AND title:name2");

        response = server.query(query);

        companiesFound = response.getBeans(Company.class);

        assertEquals(1L, companiesFound.size());
        assertEquals("name1", companiesFound.get(0).names.get(0));
        assertEquals("name2", companiesFound.get(0).names.get(1));      

    } 
```

就是这样。我希望其他人觉得这很有用。

# android - 将 CheckedTextView 中的 CheckBox 向右对齐

> ID：13930750
> 
> 赞同：2
> 
> 时间：2012-12-18T10:19:45.957
> 
> 标签：android, android-layout, android-view, android-custom-view

有没有办法在 CheckedTextView 中将 CheckBox 与右侧对齐？现在它紧跟在文本之后，但我希望复选框始终位于右侧的相同位置。我知道我可以为它创建一个单独的视图（带有 TextView 和 CheckBox ）然后自定义，但我想坚持使用 CheckedTextView

# jquery - jqgrid 和固定标题

> ID：13930751
> 
> 赞同：3
> 
> 时间：2012-12-18T10:19:51.813
> 
> 标签：jquery, css, jqgrid

我有一个固定的标题栏，但 jqgrid 元素无法正确滚动...当我滚动文本时，文本位于标题栏后面（正确），jqgrid 不正确（错误）

我该如何解决这个问题？

提前排队！罗比

编辑：截图：[https ://docs.google.com/open?id=0BxGEE1yw1kGwLVdOVzdKRWlDcTA](https://docs.google.com/open?id=0BxGEE1yw1kGwLVdOVzdKRWlDcTA)

代码非常简单：

```
<div id='divListVol' class='divList stat' > 
        <!-- Lista dei volontari -->
        <table id="listVol" class='stat'></table>
        <div id="pagerListVol" class='stat'></div>
 </div>

jQuery("#listVol").jqGrid({
            url: 'php/getVolontari.php?for=list',
            datatype: "json",
            contentType: "text/plain; charset=ISO-8859-1",
            loadonce:true,
            colNames:['Cod','Cognome', 'Nome','Modifica!'],
            colModel:[ {
                name:'id',
                index:'id',
                sortable: false,
                width: 10
            },{
                name:'cognome',
                index:'cognome',
                sortable: true,
                width: 35

            },{
                name:'nome',
                index:'nome',
                width: 35
            },{
                name:'modifica',
                index:'modifica',
                sortable: false,
                width: 20

            }],
            onSelectRow: function(rowid) { 
           $.ajax({
              url: "php/myRequest.php?for=info&id="+rowid,
              type:"GET",
              dataType: "json",
              success: function(response) {.....},
              error: function(response) { ... }

            });

            },
            onCellSelect: function (rowid, iCol) {
                ...
            },
            rowNum:30,
            rowList:[10,20,30], 
            height: 'auto',
            width: 455,
            ignoreCase: true,
            autowidth: true,
            pager: '#pagerListVol',
            sortname: 'cognome',
            viewrecords: true, 
            sortorder: "asc", 
            caption:"Lista Volontari",
            multiselect: false,
        });
        jQuery("#listVol").jqGrid('navGrid','#pagerListVol',{refresh:true, search:true, add:false,edit:false,del:false}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:54:45.217

从技术上讲，jqGrid 只是一个 DOM 元素，您应该能够通过调整 CSS 属性来解决您的问题，例如`position: relative | fixed | absolute;`

您似乎没有提供那么多信息，所以我可以完全回答您的问题。您能否通过提供托管 jqGrid 的容器的 CSS 来更具体一些？

谢谢。

# android - 运行时错误“膨胀类片段”

> ID：13930756
> 
> 赞同：2
> 
> 时间：2012-12-18T10:19:59.607
> 
> 标签：android, android-fragments, android-mapview, android-maps, android-fragmentactivity

我有一个活动，我想要做的是开始一个新的活动，它按照这个例子（https://developers.google.com/maps/documentation/android/start）保存一个 Google Maps Fragment API v2。我收到运行时错误

```
"Binary XML file line #4: Error inflating class fragment" 
```

这是活动的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >    
   <fragment xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/map"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
         class="com.google.android.gms.maps.MapFragment"/>   
</LinearLayout> 
```

这是活动的课程：

导入android.app.Activity；导入android.os.Bundle；

```
public class MapsActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_act);

    // TODO Auto-generated method stub
}

} 
```

这是logcat：

```
12-18 11:59:37.584: W/dalvikvm(9480): threadid=1: thread exiting with uncaught    exception (group=0x2b6a3300)
12-18 11:59:37.594: E/AndroidRuntime(9480): FATAL EXCEPTION: main
12-18 11:59:37.594: E/AndroidRuntime(9480): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dimacroitori.supermarket/com.dimacroitori.supermarket.MapsActivity}: android.view.InflateException: Binary XML file line #4: Error inflating class fragment
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2190)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread.access$600(ActivityThread.java:144)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.os.Looper.loop(Looper.java:137)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread.main(ActivityThread.java:4939)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at dalvik.system.NativeStart.main(Native Method)
12-18 11:59:37.594: E/AndroidRuntime(9480): Caused by: android.view.InflateException: Binary XML file line #4: Error inflating class fragment
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:257)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Activity.setContentView(Activity.java:1867)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at com.exmaple.MapsActivity.onCreate(MapsActivity.java:12)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Activity.performCreate(Activity.java:5008)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-18 11:59:37.594: E/AndroidRuntime(9480):     ... 11 more
12-18 11:59:37.594: E/AndroidRuntime(9480): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Fragment.instantiate(Fragment.java:584)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Fragment.instantiate(Fragment.java:552)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Activity.onCreateView(Activity.java:4656)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-18 11:59:37.594: E/AndroidRuntime(9480):     ... 20 more
12-18 11:59:37.594: E/AndroidRuntime(9480): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
12-18 11:59:37.594: E/AndroidRuntime(9480):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-18 11:59:37.594: E/AndroidRuntime(9480):     at android.app.Fragment.instantiate(Fragment.java:574)
12-18 11:59:37.594: E/AndroidRuntime(9480):     ... 23 more 
```

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:22:21.703

确保您已将[Google Play Services Android 库项目添加](http://developer.android.com/google/play-services/setup.html)到定义该类的应用程序中。还要确保您在 API 级别 11 或更高级别的环境中运行您的应用程序，因为您正在尝试使用本机片段（而不是 Android 支持包的向后移植）。

# ios - UISegmentedControl 中的多行文本

> ID：13930758
> 
> 赞同：1
> 
> 时间：2012-12-18T10:20:04.053
> 
> 标签：ios

有没有一种简单的方法，例如我的 UISegmentedControl 中的每个项目都有多行文本？

谢谢。

附言。我还检查了没有简单的方法可以更改 UISegmentedControl 的高度吗？在代码中说？将样式更改为“Bar”不适合我，`setFrame`在我的情况下似乎也不起作用...... :((

pps。这是我尝试过的 Siba 推荐的方法，但仍然存在一些问题。

```
for (id segment in [segmentedControl subviews])
    {
        for (id label in [segment subviews])
        {
            if ([label isKindOfClass:[UILabel class]])
            {
                UILabel *label2 = label;
                //hear u add any of delegate function to increase the height and other label functionality in this
                [label2 setTextAlignment:UITextAlignmentCenter];
                [label2 setFont:[UIFont boldSystemFontOfSize:12]];
                //to adjust the label size manually with respect to text use below code
                CGSize labelSize = CGSizeMake(100, 80);
                CGSize theStringSize = [label2.text sizeWithFont:label2.font constrainedToSize:labelSize];
                CGRect frame = label2.frame;
                frame.size = theStringSize;
                label2.lineBreakMode = UILineBreakModeWordWrap;
                label2.numberOfLines = 0;

                [label2 setText:@"text \n 10%"];

            }
        }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:42:24.653

1.您可以尝试以下方法。

*   创建多行 UILabel
*   用 N 行文本填充标签
*   将标签转换为 UIImage
*   将图像设置为分段内容

就像在[这个答案](https://stackoverflow.com/questions/5614284/uisegmentedcontrol-text-with-multiple-lines)中完成的一样： [UISegmentedControl 多行文本？](https://stackoverflow.com/questions/5614284/uisegmentedcontrol-text-with-multiple-lines)

2.您可以`ImageView`在Segmented Control的后面使用相同的帧并根据SelectedSegmentedIndex更改图像，如下所示。

但不要忘记设置为`Alpha`At ViewDidLoad。`SegmentedControl``0.05.`

```
segment_Control.alpha=0.05; 
```

![在此处输入图像描述](../Images/c22107a186446c5160d7dbaaea548a44.png)

![在此处输入图像描述](../Images/cb604975a7ea41c83c88f4341e3dd89c.png)

![在此处输入图像描述](../Images/c0a16adbed03bfa30b45452d9ff80088.png)

编码将是这样的。

```
- (IBAction)segmented_Changed:(id)sender {

    if (segmented_control.selectedSegmentIndex==0) {

        segment_image.image=[UIImage imageNamed:@"tab_Act1.png"];

    }else
        if (segmented_control.selectedSegmentIndex==2) {
            segment_image.image=[UIImage imageNamed:@"tab_Act3.png"];

        }
        else if (segmented_control.selectedSegmentIndex==1) {

            segment_image.image=[UIImage imageNamed:@"tab_Act2.png"];

        }
} 
```

3.你也可以试试这个：

```
for (id segment in [segmentedControl subviews]) 
{
    for (id label in [segment subviews]) 
    {
        if ([label isKindOfClass:[UILabel class]])
        {
            //hear u add any of delegate function to increase the height and other label functionality in this 
            [label setTextAlignment:UITextAlignmentCenter];
            [label setFont:[UIFont boldSystemFontOfSize:12]];
//to adjust the label size manually with respect to text use below code
  CGSize labelSize = CGSizeMake(100, 80);
  CGSize theStringSize = [label.text sizeWithFont:label.font constrainedToSize:labelSize];
  CGRect frame = label.frame;
  frame.size = theStringSize; 

        }
    }           
} 
```

[来源：](https://stackoverflow.com/questions/8784401/multiline-text-on-uisegment-control) [UIsegment 控件上的多行文本](https://stackoverflow.com/questions/8784401/multiline-text-on-uisegment-control)

# mysql - 选择 MySQL 与查找 MongoDB

> ID：13930760
> 
> 赞同：1
> 
> 时间：2012-12-18T10:20:05.370
> 
> 标签：mysql, mongodb

我有 2 个数据库：一个在 mySql 中，一个在 MongoDB 中，里面有相同的数据......我在 mySQL 中执行以下操作：

```
Select tweet.testo From tweet Where tweet.testo like ‘%pizza%’ 
```

这是结果：

```
1627 rows in set (2.79 sec) 
```

但如果我在 mongo 中执行：

```
Db.tweets.find({text: /pizza/ }).explain() 
```

这是结果：

```
nscannedObjects" : 1606334,
"n" : 1169, 
```

或者如果我执行：

```
Db.tweets.find({text: /pizza/i }).explain() 
```

这是结果：

```
"nscannedObjects" : 1606334,
"n" : 1641, 
```

为什么 mysql/mongo find 中的行数/文档数不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:42:56.930

> 为什么mysql/mongo find 中的行数/文档数不一样？？

可能有 1000000000000000 个原因，包括那一天的太阳温度。

MongoDB 和 MySQL 是两种完全独立的技术，因此如果您希望两者保持同步，您将需要在两者之间使用某种复制器。你没有让我们知道是否是这种情况。

此外，我们不知道您的编码、服务器设置、网络设置和其他一切，所以我们甚至无法开始回答这个问题。

一个好的答案是说你看到这个的原因是因为两者之间的数据不同......

至于两者的区别：

```
Db.tweets.find({text: /pizza/ }).explain() 
```

和

```
Db.tweets.find({text: /pizza/i }).explain() 
```

这是因为 MySQL 默认情况下，我相信小写查询，而 MongoDB（我知道）不区分大小写（这`i`使得它不区分大小写）。

然而，关于复制器，这是一个很好的：[https ://docs.continuent.com/wiki/display/TEDOC/Replicating+from+MySQL+to+MongoDB](https://docs.continuent.com/wiki/display/TEDOC/Replicating+from+MySQL+to+MongoDB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:29:10.360

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:06:11.460

首先，您的 SQL 查询`like '%pizza%'`可能不会拾取以字符串 'pizza' 开头的条目，因为前面有通配符。尝试以下 SQL 查询以排除与 SQL 中的匹配逻辑和 MongoDB 使用的 Regex 的任何语法差异

```
Select tweet.testo From tweet Where lower(tweet.testo) like ‘%pizza%’ or lower(tweet.testo) like ‘pizza%’ 
```

*免责声明：我现在没有 mySQL，所以无法验证上述领先的通配符行为，但是这与其他 RDBMS 一致，因此值得检查*

# iphone - iPhone：使用自定义音量指示器录制音频

> ID：13930764
> 
> 赞同：0
> 
> 时间：2012-12-18T10:20:12.447
> 
> 标签：iphone, volume, indicator

我正在开发一个需要录制音频的应用程序。

现在，在录制音频时，我需要显示自定义音量指示器，例如速度计，它将显示重新编码音频的音量。

因此，如果有人知道如何做到这一点，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:19:46.933

你可以检查这个音频表..不是模拟的..但是.. [http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)

如果你想要模拟..你必须将 Apple 示例与这个模拟[速度表](http://www.mobisoftinfotech.com/blog/iphone/ios-tutorial-custom-speedometer-control/)结合起来。

〜相同的答案在这里[客观c音频表](https://stackoverflow.com/questions/3170002/objective-c-audio-meter)..或... [iPad上的AVAudioRecorder仪表延迟](https://stackoverflow.com/questions/6646272/avaudiorecorder-meter-delay-on-ipad?rq=1)

# java - Java JNI 调用的开销

> ID：13930766
> 
> 赞同：13
> 
> 时间：2012-12-18T10:20:16.033
> 
> 标签：java, arrays, jvm

> **可能重复：**
> [是什么让 JNI 调用变慢？](https://stackoverflow.com/questions/7699020/what-makes-jni-calls-slow)

首先让我说，这个问题更多是出于好奇而不是真正的必要性。

我很想知道从 Java 调用 JNI 的开销是什么，比如`System.arraycopy`分配数组并使用 for 循环复制元素。

如果开销很大，那么可能有一个粗略的“幻数”元素，它可以通过简单地使用 for 循环而不是使用系统调用来补偿。而且，导致这种开销的系统调用到底涉及什么？我猜堆栈必须被推送到调用的上下文中，这可能需要一段时间，但我无法为整个过程找到一个好的解释。

让我澄清一下我的问题：

我知道使用 arraycopy 是在 Java 中复制数组的最快方法。

话虽如此，假设我正在使用它来复制一个只有一个元素的数组。由于我正在调用底层操作系统来执行此操作，因此此调用必须*有*开销。我很想知道这个开销是什么以及在调用过程中会发生什么。

**很抱歉，如果使用 arraycopy 误导了您我的问题的目的。我很想知道 JNI 调用的开销，以及实际调用中涉及的内容。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T10:29:28.823

> 因为我正在调用底层操作系统来这样做......

你是对的，[系统调用](http://en.wikipedia.org/wiki/System_call)相当昂贵。但是，`System`in`System.arraycopy()`有点用词不当。不涉及系统调用。

> ...这个电话必须有开销。我很想知道这个开销是什么以及在调用过程中会发生什么。

当您查看 的定义时`System.arraycopy()`，它被声明为`native`。这意味着该方法是用 C++ 实现的。如果您愿意，可以查看 JDK 源代码，并找到 C++ 函数。在 OpenJDK 7 中，它被称为`JVM_ArrayCopy()`并存在于`hotspot/src/share/vm/prims/jvm.cpp`. 实现出奇地复杂，但本质上它本质上是一个[`memcpy()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/memcpy.html).

如果`arraycopy()`将其用作普通的本机函数，则调用它会产生开销。参数检查等会导致进一步的开销。

[但是， JIT 编译器](http://en.wikipedia.org/wiki/Just-in-time_compilation)很可能知道`System.arraycopy()`. 这意味着，编译器不调用 C++ 函数，而是知道如何生成特制的机器代码来执行数组复制。我不知道其他 JVM，但 HotSpot 确实对`System.arraycopy()`.

> 假设我用它来复制一个只有一个元素的数组

如果您的阵列很小，您可以`System.arraycopy()`使用手工制作的循环来击败。如果在编译时知道大小，您可能会做得更好，因为那时您也可以展开循环。然而，除了在最狭窄的情况下，所有这些都不是真正相关的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:26:09.237

看看 java.util.Arrays.copyOf 实现，例如

```
public static byte[] copyOf(byte[] original, int newLength) {
    byte[] copy = new byte[newLength];
    System.arraycopy(original, 0, copy, 0,
                     Math.min(original.length, newLength));
    return copy;
} 
```

他们使用 System.arraycopy 因为这是最快的方法。

如果您的意思是在 Java 中调用本机方法是否昂贵，请查看[http://www.javamex.com/tutorials/jni/overhead.shtml](http://www.javamex.com/tutorials/jni/overhead.shtml)

**UPDATE**问题真的很有趣，所以我做了一些测试

```
 long t0 = System.currentTimeMillis();
        byte[] a = new byte[100];
        byte[] b = new byte[100];
        for(int i = 0; i < 10000000; i++) {
//            for(int j = 0; j < a.length; j++) {
//                a[j] = b[j];
//            }
            System.arraycopy(b, 0, a, 0, a.length);
        }
        System.out.println(System.currentTimeMillis() - t0); 
```

它表明在非常短的数组（< 10）上 System.arraycopy 可能会更慢，很可能是因为它是本机的，但在更大的数组上它不再重要，System.arraycopy 更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:51:33.070

> 我很想知道 JNI 调用的开销，以及实际调用中涉及的内容。

该`System.arraycopy()`方法相当复杂^*并且 JIT 编译器不太可能内联它（正如其他答案之一所暗示的那样）。

另一方面，JIT 编译器很可能使用优化的调用序列，因为这是一个内在的本地方法。换句话说，这很可能不是一个正常的 JNI 调用。

* * *

^(* -`System.arraycopy`不是简单的内存副本。它必须测试它的参数以避免读取或写入超出数组边界，等等。如果您从一个对象数组复制到另一个对象数组，则*可能*需要检查复制的每个对象的实际类型。所有这些加起来的代码比内联的代码要多得多。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:23:30.407

你搞错了。System.arraycopy() 是 JVM 提供的超快速原生实现

没有“开销”——只有“优势”

# javascript - 获取 iframe 属性和内容

> ID：13930769
> 
> 赞同：0
> 
> 时间：2012-12-18T10:20:20.057
> 
> 标签：javascript, html, iframe, rich-text-editor

有没有办法获取 iframe 属性和内容并能够显示它？

示例：在 iframe 上将其键入为 **富文本编辑器**，它将显示为`<b>Rich Text Editor</b>`页面的某些部分。

**富文本编辑器**==`<b>Rich Text Editor</b>`

先感谢您。

```
<html>
<head>
   <title>Rich Text Editor</title>
</head>

<script type="text/javascript">
function def()
{
    document.getElementById("textEditor").contentWindow.document.designMode="on";
    textEditor.document.open();
    textEditor.document.write('<head><style type="text/css">body{ font-family:arial; font-size:13px;}</style></head>');
    textEditor.document.close();
    document.getElementById("fonts").selectedIndex=0;
    document.getElementById("size").selectedIndex=1;
    document.getElementById("color").selectedIndex=0;
}
function fontEdit(x,y)
{
    document.getElementById("textEditor").contentWindow.document.execCommand(x,"",y);
    textEditor.focus();
}
</script>

<body onLoad="def()">
    <center>
        <div style="width:500px; text-align:left; margin-bottom:10px ">
            <input type="button" id="bold" style="height:21px; width:21px; font-weight:bold;" value="B" onClick="fontEdit('bold')" />
            <input type="button" id="italic" style="height:21px; width:21px; font-style:italic;" value="I" onClick="fontEdit('italic')" />
            <input type="button" id="underline" style="height:21px; width:21px; text-decoration:underline;" value="U" onClick="fontEdit('underline')" /> | 
            <input type="button" style="height:21px; width:21px;"value="L" onClick="fontEdit('justifyleft')" title="align left" />
            <input type="button" style="height:21px; width:21px;"value="C" onClick="fontEdit('justifycenter')" title="center" />
            <input type="button" style="height:21px; width:21px;"value="R" onClick="fontEdit('justifyright')" title="align right" /> | 
            <select id="fonts" onChange="fontEdit('fontname',this[this.selectedIndex].value)">
                <option value="Arial">Arial</option>
                <option value="Comic Sans MS">Comic Sans MS</option>
                <option value="Courier New">Courier New</option>
                <option value="Monotype Corsiva">Monotype</option>
                <option value="Tahoma">Tahoma</option>
                <option value="Times">Times</option>
            </select>
            <select id="size" onChange="fontEdit('fontsize',this[this.selectedIndex].value)">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <select id="color" onChange="fontEdit('ForeColor',this[this.selectedIndex].value)">
                <option value="black">-</option>
                <option style="color:red;" value="red">-</option>
                <option style="color:blue;" value="blue">-</option>
                <option style="color:green;" value="green">-</option>
                <option style="color:pink;" value="pink">-</option>
            </select> | 
            <input type="button" style="height:21px; width:21px;"value="1" onClick="fontEdit('insertorderedlist')" title="Numbered List" />
            <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('insertunorderedlist')" title="Bullets List" />
            <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('outdent')" title="Outdent" />
            <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('indent')" title="Indent" />
        </div>
        <iframe id="textEditor" style="width:500px; height:170px;">
        </iframe>
    </center>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:36:08.113

在头部添加这个 javascript 代码

```
function showHTML () {
document.getElementById('textpad').textContent = textEditor.document.body.innerHTML;
return;
} 
```

在 onload java 脚本函数中包含这些

```
 textEditor.document.addEventListener('keyup', showHTML, false);
 textEditor.document.addEventListener('paste', showHTML, false); 
```

最后在 html 代码中添加这个

```
<textarea id="textpad" style="width:500px;height:200px;display:block;"></textarea> 
```

有关完整示例，请参阅[jsFiddle](http://jsfiddle.net/SrRSw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:45:57.930

```
window.frames 
```

将返回一个包含所有框架的数组，包括父窗口中的 iframe。在您的示例中，您可以执行类似的操作。

使用上述命令访问您的 iframe，并在 iframe 内的某个 id 中获取您想要的数据并获取它。那是，

```
<iframe id="textEditor" style="width:500px; height:170px;">
  <div id = "testText"><b>Rich Text Editor</b></div>
</iframe>

data = window.frames[1].$('testText').innerHTML 
```

# javascript - 通过 ajax 调用 fancybox - 在哪里放置选项？

> ID：13930771
> 
> 赞同：0
> 
> 时间：2012-12-18T10:20:35.257
> 
> 标签：javascript, ajax, jquery, fancybox

我通过 ajax 调用了一个 fancybox-site-preview 并且不知道在哪里放置更多的 fancybox 选项。

```
$.ajax({
    type    : "POST",
    cache   : false,
    url     : "../mysite/",
    data    : $('#myform').serializeArray(),
    success : function(data) {
        $.fancybox(data);
        }
    }); 
```

我想补充`width: '100%', height: '100%',` 一下，我在之前和之后的不同位置上尝试过，`$.fancybox(data);`但我没有让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:27:01.300

```
$.ajax: {
    type     : "POST",
    cache    : false,
     url : "../mysite/",
     data : $('#myform').serializeArray(),
    success: function(data) {
        $.fancybox({
            'width': 100,
            'height': 100,
            'enableEscapeButton' : false,
            'overlayShow' : true,
            'overlayOpacity' : 0,
            'hideOnOverlayClick' : false,
            'content' : data
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:27:17.727

```
function (data) {
   $.extend(data, {'width': '100%', 'height': '100%'});
   $.fancybox(data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:00:31.280

尝试 ：

```
$.ajax({
    type: "POST",
    cache: false,
    url: "../mysite/",
    data: $('#myform').serializeArray(),
    success: function(data) {
        $.fancybox(data, {
            "width": "100%",
            "height": "100%"
        });
    }
});​ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-20T10:01:47.697

我可以回答并解决我自己的问题：所有解决方案似乎都有效，但您必须定义`minWidth`和`minHeight`。它不适用于`width`and `height`。

# windows-8 - 对 Windows 应用商店应用中的每个应用激活做出反应

> ID：13930773
> 
> 赞同：0
> 
> 时间：2012-12-18T10:20:41.650
> 
> 标签：windows-8, microsoft-metro

我有一个使用后台任务进行动态磁贴更新的 Windows 应用商店应用程序。当我以任何方式激活应用程序时（单击活动磁贴，切换回应用程序等），我想清除活动磁贴（我有一个数字，我想将其更改为零）。

更具体一点，我运行应用程序，切换到另一个应用程序或桌面，然后切换到星形屏幕，我在动态磁贴上看到一个数字。我单击动态磁贴，我被带到应用程序，我希望动态磁贴清除。与电子邮件应用程序相同的功能。

我在 App.xaml.cs 中尝试了 OnActivated 方法，但它似乎没有在任何时候被调用（我在那里放置了一个 throw new NotImplementeExeption 并且应用程序永远不会崩溃）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:24:06.320

我想这种行动的更好的地方是`OnLaunched`方法。每次应用程序启动时都会调用它。

**更新：**嗯，似乎你应该对这两种`OnActivated`方法做出反应`OnLaunched`：

> **OnLaunched** - 在应用程序启动时调用。重写此方法以执行应用程序初始化并在关联的 Window 中显示初始内容。

在应用程序启动时`OnLaunched`将被调用。但是当您切换到另一个应用程序然后返回时`OnActivated`应该调用：

> **OnActivated** - 当应用程序通过正常启动以外的方式激活时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:59:34.240

你应该把它放在 OnLaunched 方法中，你只需要确定在哪里。

```
 protected async override void OnLaunched(LaunchActivatedEventArgs args)
    {
        var rootFrame = new Frame();
        // Do not repeat app initialization when already running, just ensure that
        // the window is active
        if (args.PreviousExecutionState == ApplicationExecutionState.Running)
        {
           //....
        }

        if (args.PreviousExecutionState == ApplicationExecutionState.ClosedByUser)
        {
            /....
        }
        if (!String.IsNullOrEmpty(args.Arguments))
        {
                //....

        }
        if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
        {
            //....
        }
        if (args.PreviousExecutionState == ApplicationExecutionState.NotRunning)
        {
            //.....
        }
        TileUpdateManager.CreateTileUpdaterForApplication().Clear();
        BadgeUpdateManager.CreateBadgeUpdaterForApplication().Clear();

        SettingsPane.GetForCurrentView().CommandsRequested += OnCommandsRequested;
        // Create a Frame to act navigation context and navigate to the first page

        if (!rootFrame.Navigate(typeof(MainPage)))
        {
            throw new Exception("Failed to create initial page");
        }

        // Place the frame in the current Window and ensure that it is active
        Window.Current.Content = rootFrame;
        Window.Current.Activate();
    } 
```

如果您查看代码，您的应用程序关闭/暂停的原因有多种。因此，确定在哪些情况下要运行解码代码以更新动态磁贴中的数字，将其放在 if 中，它应该可以工作。

# php - CodeIgniter 删除我的 cookie

> ID：13930774
> 
> 赞同：0
> 
> 时间：2012-12-18T10:20:45.083
> 
> 标签：php, codeigniter, cookies

我在 CodeIgniter 之外创建了一个 cookie，`ci_session`但每次 CodeIgniter 会话到期时，它也会删除我的 cookie。无论如何不要破坏我的cookie吗？

我是 CodeIgniter 的初学者，会话类参考没有回答我的问题。

`setcookie( $name , $value , $expire );`

我将其设置为不同的到期值，但仍与 CodeIgniter 的到期值相同`ci_session`。

当我使用`$_SESSION`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:19:34.223

Codeigniter 不使用本机会话，虽然您可以选择使用本机会话，但 codeigniter 实现通用会话使用的方式要好得多。请查看此帖子以获取更多信息[CodeIgniter 会话与 PHP 会话](https://stackoverflow.com/questions/2005552/codeigniter-sessions-vs-php-sessions)

其次，确保您已正确配置会话。当我在使用 codeigniter 开发的工作门户网站上工作时，我一直面临同样的问题。我建议您在此处再次浏览文档[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)并重新检查应用程序的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:38:40.340

我没有在 CodeIgniter 中使用 cookie 和会话，而是使用 PHP 的文件系统函数。这样，我创建的“cookie 和会话”不会与 CodeIgniter 一样过期（或被删除）。

# jquery - 从jquery自动完成中删除项目

> ID：13930775
> 
> 赞同：1
> 
> 时间：2012-12-18T10:20:44.023
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我正在使用 jQuery 自动完成（我必须承认我以前没有使用过很多次），以便允许用户从列表中选择多个元素。

当用户选择一个值时，我会更新（推送）数组（AR1）中的选定值。

当从 UI 小部件（组件）的元素列表中删除一个值时，我需要能够更新数组 (AR1)。

当用户删除一个值时会发生什么？不要以为我可以更新我的数组（AR1）。

我曾想过在输入失去焦点时迭代选定元素的列表，然后更新数组。但是我如何遍历选定项目的列表？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:02:15.730

使用 jquery，您可以通过以下方式循环遍历数组：

```
$(arraVar).each(function(index, value){ 
  //do whatever here
} 
```

# jquery - Jquery Bings Maps Json 重新加载

> ID：13930779
> 
> 赞同：10
> 
> 时间：2012-12-18T10:20:51.227
> 
> 标签：jquery, jquery-plugins, bing-maps

我想用 Bing Maps 实现以下目标。在`#content`中，标记将从 JSON 显示。

15 秒后，应删除所有标记并重新加载。

加载地图和标记工作正常。同时删除标记工作。

只有在没有新的标记更多下载！在控制台中，我没有收到任何错误消息。

有人有想法吗？我怀疑当“下载”发生错误？

编码：

```
function bings_maps(){
  $('#content').gmap({ 
             center: new Microsoft.Maps.Location(47.631296,15.830868),
             mapTypeId: Microsoft.Maps.MapTypeId.aerial,
             zoom: 17,
             credentials: 'test', 
             bounds: null,
             showMapTypeSelector: false,
             enableSearchLogo: false, 
             showBreadcrumb: false, 
             enableClickableLogo: false, 
             showScalebar: false, 
                           enableSearchLogo: false,
                           showDashboard: false,
                           showMapTypeSelector:false,
                           showScalebar: false,
                           useInertia: false,
                           disablePanning: false,
                           disableZooming: false,
             callback: function() {
  var self = this;
  $.getJSON('inhalt.php', function(data) {
      $.each( data.markers, function(i, marker) {
        var location = new Microsoft.Maps.Location(marker.latitude,
                                                   marker.longitude);
        self.addMarker({ 'location': location, 'bounds': false ,
                  'icon': marker.icon  } );
      });
    });
  }});
}

function bings_maps_refresh() {
  $('#content').gmap('clear', 'markers');
  $('#content').gmap({'callback':function() {
        this.addMarker({'location': '47.631296,15.830868', 'bounds': true});
}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:01:50.360

我怀疑您的响应数据中没有任何标记，请尝试使用[提琴手](http://www.fiddler2.com/fiddler2/)检查数据。或者查看chromes开发工具的网络专区（F12）。

# amazon-web-services - DynamoDB 地理分布？（如 CloudFront）

> ID：13930786
> 
> 赞同：0
> 
> 时间：2012-12-18T10:21:20.370
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront, amazon-dynamodb

Amazon DynamoDB 是一个 NoSQL 数据库，我用它来存储与 S3 匹配的密钥。对于 S3，我使用 CloudFront 让世界各地的每个人都能快速下载和上传，因为 CloudFront 会在多个地理位置（有服务器的地方）复制数据。

DynamoDB 是否也具有这种分发功能，可以让全世界的每个人都更快地下载和上传项目（尽管它已经非常快了！）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:21:08.577

不，DynamoDB 不是跨区域的。（至少目前不是）。

一种选择是在多个区域中设置 DynamoDB，然后使用[Route53 的基于延迟的路由](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)自动将每个用户引导到最近的区域。但是，您将拥有多个数据库，并且您的应用程序必须在设计时考虑到手动分片技术。

# iphone - ios 6 中的应用程序崩溃

> ID：13930790
> 
> 赞同：1
> 
> 时间：2012-12-18T10:21:33.973
> 
> 标签：iphone, objective-c, ios6, ios-simulator, xcode4.5

我的应用程序在 iOS 5.1 模拟器上运行良好，但在 ios 6 模拟器上崩溃了。两个版本的代码都没有更改。调试时出现此错误：

```
[unknown]Not safe to look up objc runtime data. 
```

谷歌搜索后，我找到了这个链接。

[查找 objc 运行时数据不安全](https://stackoverflow.com/questions/3293523/not-safe-to-lookup-objc-runtime-data)

但对我没有任何帮助。

任何帮助将不胜感激

# playframework-2.0 - 在 Play Framework 2 中使用 FindBugs

> ID：13930791
> 
> 赞同：5
> 
> 时间：2012-12-18T10:21:33.710
> 
> 标签：playframework-2.0, sbt, findbugs

我想将 FindBugs 集成到 Play Framework 2 Java 项目的构建过程中。

这可能吗？如果是这样，使其工作所需的配置步骤是什么？

我假设可以使用[findbugs4sbt](https://bitbucket.org/jmhofer/findbugs4sbt/wiki/Home)，但我不确定如何设置它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:15:44.590

我昨天才这样做，并将其记录在[Integrating Findbugs Into a Play Framework 2 Project (Java)](http://inoio.de/blog/2013/01/08/integrating-findbugs-into-a-playframework-2-project-java/)中。

这是相关步骤：

1.  ~~从 bitbucket下载我为 sbt 0.11 自定义构建的[findbugs4sbt jar](https://bitbucket.org/magro/findbugs4sbt/downloads/findbugs4sbt_2.9.1_0.11.3-1.1.7.jar)并将其放入`project/lib`~~

    **更新：**`project/plugins.sbt`通过添加插件

    ```
    addSbtPlugin("de.johoop" % "findbugs4sbt" % "1.1.7") 
    ```

2.  配置 findbugs4sbt `project/Build.scala`：

    ```
    import de.johoop.findbugs4sbt.FindBugs._

    object ApplicationBuild extends Build {

      ...

      val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA,
        settings = Defaults.defaultSettings ++ findbugsSettings)

    } 
    ```

然后你就可以运行`sbt findbugs`which generate了`target/scala-2.9.1/findbugs/findbugs.xml`。

由于 findbugs 还分析了 play 从路由和视图中编译的一些类（并报告了一些有关命名约定的问题），您可能希望忽略它们（因为无论如何您都无法改进它们）。为此，请使用以下 findbugs4sbt 设置（在 中`project/Build.scala`）将它们从 findbugs 中排除：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA,
settings = Defaults.defaultSettings ++ findbugsSettings).settings(
  findbugsExcludeFilters := Some(
    <FindBugsFilter>
      <!-- See docs/examples at http://findbugs.sourceforge.net/manual/filter.html -->
      <Match>
        <Class name="~views\.html\..*"/>
      </Match>
      <Match>
        <Class name="~Routes.*"/>
      </Match>
      <Match>
        <Class name="~controllers\.routes.*"/>
      </Match>
    </FindBugsFilter>
  )
) 
```

# javascript - 执行长循环

> ID：13930792
> 
> 赞同：1
> 
> 时间：2012-12-18T10:21:38.173
> 
> 标签：javascript, html

我想执行一个在`div`不重载的情况下将字符串写入 a 的循环。我有一个`array`名为的全局名称列表`names`。`array`里面有大约 2500 个名字。现在我想在`div`using中写下名称`ajax`。但是当我想循环名称时，脚本有点过载，并在客户端发出警报时停止。这是我的循环：

```
for(var i = 0; i < names.length; i++){
   document.getElementById('div').innerHTML += names[i] + "<br/>";
} 
```

我还尝试以较小的步长（例如 100）来交错循环（因为我认为循环不会过载）。我还`window.setTimeout("function(i)",0);`使用参数 i 进行了尝试，每次调用函数时都会执行 100 步，直到我位于`length`数组的第 1 位`names`。

我知道有一个简单的方法。但我找不到那种方式.....会很高兴得到帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T10:26:20.520

你可以这样编码：

`document.getElementById('div').innerHTML = names.join('<br/>');`

这将在单个指令中设置内部 html，解决加载问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:32:20.120

试试这种方式：

```
 var content = '';

    for(var i = 0, n_length = names.length; i < n_length; i++) {
        content += names[i] + "<br/>";
    }

    document.getElementById('div').innerHTML += content;   // if the previous content should remain there 
```

请注意，它更快地存储循环的中止值。否则，它将为循环的每次迭代（2500 x）读取`length`您的 -property 。`array`

另请注意，DOM 操作非常缓慢，因此将其降低到可能的最低级别是明智的。最好单独构建您的内容并将其一次性写入 DOM。

# javascript - iframe 在内容更改时调整大小

> ID：13930793
> 
> 赞同：1
> 
> 时间：2012-12-18T10:21:42.880
> 
> 标签：javascript, iframe

我有这个代码：

```
<iframe id='iFrame' src='iframe.php' onload='javascript:iFrameResize(this);'></iframe> 
```

```
function iFrameResize(obj) 
{
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
} 
```

当我第一次加载页面时它工作正常。但是，当我在 iframe 中选择某些内容并且内容高度大于 iframe 高度时，iframe 不会调整大小。

有没有办法在内容更改时始终调整 iframe 的大小（iframe 位置不变，内容是使用 javascript 添加/修改的）？

提前致谢。

# ruby-on-rails - 有什么方法可以暂时禁用 I18n 后备/Globalize3 翻译？

> ID：13930794
> 
> 赞同：3
> 
> 时间：2012-12-18T10:21:50.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, globalize3

我正在尝试使用 Globalize3 和 I18n 后备实现已翻译属性的后备。为了让备用方案启动并运行，我在 environment.rb 文件中添加了：

```
 #support for locale fallbacks
 require "i18n/backend/fallbacks"
 I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks) 
```

然后在我的配置文件中：

```
 config.i18n.fallbacks = {'en-US' => 'zh-CN', 'zh-CN' => 'en-US'} 
```

现在我有一个应用程序正在运行，如果一个字段没有在“en-US”语言环境中翻译，它将退回到“zh-CN”语言环境，反之亦然。

但是，这意味着回退也会发生在网站上的表单上。这是不受欢迎的行为，原因有两个：

1.  用户可能会认为这意味着该语言环境对于所看到的输入具有此值（而它是从备用语言环境继承的）。
2.  保存具有这些继承值的表单实际上会将翻译保存为当前语言环境的值 - 所以突然之间你就获得了两个语言环境的数据，但用户可能不知道这一点（或知道为什么）。

我想在编辑页面/显示具有已翻译属性的对象的表单中禁用回退。有没有办法做到这一点？

我正在使用来自 svenfuchs [https://github.com/svenfuchs/globalize3的 Globalize3 和 I18n 版本](https://github.com/svenfuchs/globalize3)

# backbone.js - 如何将 jasmine-require 与 Backbone 一起使用？

> ID：13930795
> 
> 赞同：0
> 
> 时间：2012-12-18T10:21:52.817
> 
> 标签：backbone.js, requirejs, jasmine

我想在 Jasmine 测试套件中将我的 require.js 用于 Backbone；我正在设置。

我在这个测试设置中看到了[https://github.com/scottburch/jasmine-require的使用：](https://github.com/scottburch/jasmine-require) [https ://github.com/Patternslib/Patterns/blob/master/tests/index.html](https://github.com/Patternslib/Patterns/blob/master/tests/index.html)

现在，我想将 Backbone 注入到游戏中：

```
describe("Basic view test", function() {

  var view;

  requireDependencies(["underscore", "backbone"], function(_, Backbone) {
    view = Backbone.View.extend({el: "li" });
  });

  it("has el property", function() {
    expect(view.el).toBe("li");
  });

}); 
```

但是我的 Backbone 设置没有正确加载，请看截图：

![骨干没有加载](../Images/7054f5f4eca6585fbe43d76adc4f45a3.png)

少了什么东西？

我当前的设置在这里：[https ://github.com/mulderp/backbone-require-test/tree/master/spec](https://github.com/mulderp/backbone-require-test/tree/master/spec)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:19:03.810

这里的问题是问题中没有看到的全局范围内依赖项的加载顺序。确保在主干之前加载下划线。

# html - 在IE中定位hr

> ID：13930797
> 
> 赞同：1
> 
> 时间：2012-12-18T10:22:01.997
> 
> 标签：html, css, internet-explorer

我有一个`<hr>`需要为其父级宽度的 80% 和“左对齐”，而不是默认居中。

```
<div>
    <p>Some stupid text</p>
    <hr>
    <p>Ask a stupid text, what?</p>
</div> 
```

我通过使用以下方法在现代浏览器中解决了这个问题：

```
hr
{
    width: 80%;
    color: #90b124;
    background: #90b124;
    height: 4px;
    border: 0;
    margin: 20px 0;
    position: relative;
    left: 0;
} 
```

但在 IE（所有版本）中，它仍然居中。设计要求这个左侧定位的小时。当然，我可以只使用 a`<span>`并称其为一天，但这不那么语义化。

有没有办法在 IE 中将其定位为 deisred ？

[http://jsfiddle.net/jWcEp/](http://jsfiddle.net/jWcEp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:37:58.683

我知道@Nicsoft 的答案对你有用，但还有另一种方法。

`<hr>`曾经有一个`align`属性，在 HTML5 中不支持。这已被`text-align`IE 和 Opera 以及`margin-left/right`Firefox 和 WebKit 的 CSS 属性所取代。所以要左对齐，你可以这样做：

```
hr {
    margin-left:0
    text-align:left;
    width:80%;
} 
```

如此处所见并[在](http://www.w3schools.com/tags/att_hr_align.asp)[此处](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_hr_align_css)描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:30:11.570

将 float:left 添加到 hr{}

```
hr
{
    float:left; //Makes the element float to he left
    width: 80%;
    color: #90b124;
    background: #90b124;
    height: 4px;
    border: 0;
    margin: 20px 0;
    position: relative;
    left: 0;
} 
```

不要忘记适当地清除。

# xslt - 如何在xsl中动态设置变量名

> ID：13930804
> 
> 赞同：0
> 
> 时间：2012-12-18T10:22:14.603
> 
> 标签：xslt

以下是我的代码，我想在其中提供隐藏变量并为其分配值以供以后访问。

```
 <xsl:for-each select="//Root/Record">
     <xsl:if test="(@CIMtrek_accountlist_customer_number != '') ">
     <option style="padding:5px;">
    <xsl:attribute name="class">>
    <xsl:choose>
            <xsl:when test="(position() mod 2) = 0">
            AlternateRowOne
</xsl:when>
<xsl:otherwise>
AlternateRowTwo
</xsl:otherwise>
    </xsl:choose>
            </xsl:attribute>
// here i want to set hidden varialble and assign the value for it
        <xsl:attribute name="value">
                    <xsl:value-of
            select="@CIMtrek_accountlist_customer_number" /></xsl:attribute>
        <xsl:value-select="@CIMtrek_accountlist_customer_number" />
                </option>
                </xsl:if>
                </xsl:for-each> 
```

变量名称将类似于这样

```
<input type="hidden"
name="hdnDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_Destination_"+i
id="hdnDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_Destination_"+i
 />

where i =0
and i++;

name_1
name_2
name_n 
```

是否可以使用：`<FieldRef Name="<FieldInternalName>" Explicit="TRUE"/>` 如何在 xsl 中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:01:12.737

我通常通过以下方式实现递归。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:template match="/">
        <xsl:call-template name="recur">
            <xsl:with-param name="max_recursions" select="5"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="recur">
        <xsl:param name="n">0</xsl:param>
        <xsl:param name="max_recursions"/>
        REPEATING UNIT HERE
        <xsl:if test="$max_recursions != $n">
            <xsl:call-template name="recur">
                <xsl:with-param name="n" select="$n + 1"/>
                <xsl:with-param name="max_recursions" select="$max_recursions"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

虽然通常不建议这样做，但您通常可以通过构造良好的 XPath 获得更快、更简洁和更易读的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:37:11.270

您正在尝试在 XSLT 中编写过程代码，但这是行不通的。如果您解释您想要执行的转换（输入是什么，输出是什么，以及它们之间的关系如何？），那么我们可以向您展示如何以“XSLT 方式”（即以声明方式）进行。

# android - 重复在两个页面之间导航时出现 OutofMemory 错误

> ID：13930805
> 
> 赞同：0
> 
> 时间：2012-12-18T10:22:17.530
> 
> 标签：android, out-of-memory

嗨，伙计们，我在两个页面之间导航时遇到内存不足错误，该页面有 2 个图库控件（图片库），每个页面都有一些额外的详细信息来填写个人资料信息。在第一页中，我们可以查看配置文件详细信息，然后我们移至另一个页面以编辑详细信息，然后我们可以从那里单击取消按钮返回到第一页。因此，当连续单击编辑和取消按钮时，配置文件编辑页面会打开和关闭。在重复相同的过程一段时间后，应用程序开始通过内存不足运行，并且在某一阶段应用程序由于内部内存不足而无法加载页面。我正在检查解决此问题的可能解决方案。任何建议或意见将不胜感激。希望得到更好的回应。提前致谢。

以下是我的代码：

```
edit_button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //startActivity(new Intent(ProfileView.this, ProfileEdit.class));
            startActivity(new Intent(ProfileView.this, ProfileEditLatest.class));
        }
    }); 
```

下面是画廊适配器的 getView 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

    /*if (position>data.length || position<0) {
        return null;
    }*/
    View vi=convertView;
    ImageView image;
    if(convertView==null){
        vi = inflater.inflate(R.layout.gridview_single, null);

    //TextView text=(TextView)vi.findViewById(R.id.text);;
    image=(ImageView)vi.findViewById(R.id.image);

    final float scale = activity.getResources().getDisplayMetrics().density;
    //int pixels = (int) (100 * scale + 0.5f);
    int pixels = (int) (100 * scale + 0.5f);

    //i.setLayoutParams(new Gallery.LayoutParams(100, 100));
    //image.setLayoutParams(new Gallery.LayoutParams(pixels, pixels));
    image.setLayoutParams(new RelativeLayout.LayoutParams(pixels,pixels));

    //image.setLayoutParams(new LayoutParams(100,100));

    //text.setText("item "+position);
    }
    else{
        image=(ImageView)convertView;
    }
    try{
    vi.setTag(data[position]);
    imageLoader.DisplayImage(data[position], activity, image);
    }
    catch (ArrayIndexOutOfBoundsException e) {
        // TODO: handle exception
    }
    return vi;
} 
```

在上面的一个中，我使用了实现的延迟加载，可在[URL](https://github.com/thest1/LazyList)

在我的个人资料编辑页面中，我有一个声明为静态的位图对象，在将一些新图像上传到画廊时使用它。

希望以上细节对找到问题的解决方案有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:07:06.187

您的 getView() 方法有问题。这不是你应该使用它的方式。相反，您必须使用 staic View Holder 类...

```
 @Override
public View getView(int position, View v, ViewGroup parent) {
    // Keeps reference to avoid future findViewById()
    ViewHolder viewHolder;

    if (v == null) {
        LayoutInflater li = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = li.inflate(R.layout.gridview_single, null);

        viewHolder = new ViewHolder();
        viewHolder.mIV = (ImageView) v.findViewById(R.id.image);

        v.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) v.getTag();
    }

  // call ur image loader here
    imageLoader.DisplayImage(data[position], activity, image);
    return v;
}

static class ViewHolder {
    ImageView mIV;

} 
```

# c++ - qt/c++动态命名变量

> ID：13930806
> 
> 赞同：2
> 
> 时间：2012-12-18T10:22:24.037
> 
> 标签：c++, qt, variables

我正在为我的一项大学作业在 Qt 中开发一个 html 编辑器，但我在命名某些变量时遇到了问题。

问题是这样的：

当用户决定加载他们的“项目”时，程序会遍历文件夹并找到其中有多少个 .html 文件，然后为它们创建选项卡以在其中显示。

我有一个自定义的 QTextEdit，它有一个客户完成器和语法突出显示等。我目前遇到的问题是如何根据需要的数量创建它们。

我创建一个文件名的 QStringList：

```
QStringList m_files;
            m_files = aDialog.m_loadDirectory->entryList(QStringList("*.html"),QDir::Files|QDir::NoSymLinks); 
```

然后我遍历列表中的每一个：

```
for(int i=0; i<m_files.count();i++)
{

} 
```

对于每一个我需要创建一个新的自定义 QtextEdit

```
TextEdit *name = new TextEdit; 
```

然后添加到选项卡

```
tabs->addTab(name,"someTitle"); 
```

但是由于每个选项卡的每个 TextEdit 都需要不同（我认为这是正确的），因此我需要为每个选项卡设置不同的变量名称。

我考虑过创建一个 TextEdit 对象的列表/数组，但由于我不知道我需要使用多少，我很容易以太多（浪费的内存）或不足而告终。

关于我如何解决这个问题的任何想法？

一个想法..

是否可以在循环之前创建一个 TextEdit 对象

然后在循环中复制该对象并将复制的对象添加到选项卡？（还是变量命名问题……）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:34:07.207

> 但是因为每个标签的每个 TextEdit 都需要不同（我认为这是正确的）

是的，您需要`TextEdit`在每个选项卡中使用不同的选项卡。

> 我需要为每个变量设置一个不同的变量名。

不，您不需要为每个变量指定不同的变量名。您需要不同的对象，但变量名与此没有太大关系。

一个简单的：

```
for (...) {
   TextEdit *te = new TextEdit(...);
   // set up that text edit in whatever way you need
   tabs->addWidget(te, "foo");
} 
```

做你想要的。变量名`te`完全不相关（它甚至不会出现在调试符号之外的可执行文件中）。每次通过循环，您都将处理一个单独的`TextEdit`实例。

如果您需要在运行时按名称引用该 TextEdit，您可以将所有小部件保存在一个集合中，[`QMap`](http://doc.qt.digia.com/qt/qmap.html)例如。

```
 QMap<QString, QWidget*> all_editors;
 ...

 for (...) {
    TextEdit *te = ...;
    all_editors[filename] = te;
    ...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:27:57.660

您很快就放弃了唯一可行的解​​决方案：将您的文本编辑放在一个集合中。textedit***必须*****使用new**创建，因此集合本身不会浪费空间。

您可以将 a`QPair<QTabWidget*, QTextEdit*>`用于最简单的情况。对于更复杂的情况，创建一个自定义小部件，然后列出这些小部件。

复制 a`QObject`是一个非常糟糕的主意。我认为复制构造函数是私有的，所以你甚至不能这样做

# xcode - 视图控制器的自定义类

> ID：13930807
> 
> 赞同：0
> 
> 时间：2012-12-18T10:22:24.790
> 
> 标签：xcode, class, viewcontroller

我正在尝试为这个在线 tut 创建一个自定义类：http: [//mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-aqgridview/](http://mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-aqgridview/) 大约四分之一它说的页面：

“选择 MainStoryboard_iPhone 文件并将 SecondViewController nib 的 Class 更改为 GridViewController。”

但是，对于我来说，GridViewController 不会出现在自定义类选项中！

我按照说明操作：“Cocoa Touch->Objective -C Class->NSObject 模板。称之为 GridViewController。”并放入我的 .h 文件中：

```
#import <UIKit/UIKit.h>
#import "AQGridView.h"
@interface GridViewController : UIViewController <AQGridViewDelegate, AQGridViewDataSource>
@property (nonatomic, retain) IBOutlet AQGridView * gridView;
@property (nonatomic, retain) NSArray * services;
@end 
```

它不应该显示为一个类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:56:36.913

您是否确定在 nib 中设置了视图控制器对象的自定义类？

您可以尝试再次清理和构建项目以确保所有内容都已正确索引，或者您可以尝试在自定义类字段中手动输入类名，然后编译以查看是否抛出了任何有用的错误。

# ssis - SSIS 将 int 格式的日期转换为日期 (yyyy/mm/dd hh:mi:ss)

> ID：13930808
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:22:26.280
> 
> 标签：ssis

在 SSIS 中，我有 int 格式的日期 2012123023 需要将其转换为 2012/12/30 23:00:00 请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:36:55.620

我在 SQL Server 中使用过这个函数，不过，我不是 SSIS 专家，所以我不确定你是如何在 SSIS 包中实现它的。

我假设您可以在数据库中创建该函数，然后从 SSIS 调用它。

经过编辑以适用于您的测试用例，它确实假设数字始终采用相同的格式。

```
--SELECT [dbo].[ConvertIntToDate](2012123023)

-- =============================================
-- Author:      Richard Andrews
-- Create date: 12/10/2012
-- Description: Safely attempts to convert an int into a date
-- =============================================
ALTER FUNCTION [dbo].[ConvertIntToDate] 
(
    @InputNumber INT 
)
RETURNS DATETIME
AS
BEGIN
    IF @InputNumber IS NULL
        BEGIN
            RETURN NULL
        END

    DECLARE @Result DATETIME    
    DECLARE @StringDate NVARCHAR(50)
    SET @StringDate = CAST(@InputNumber AS NVARCHAR(50))

    IF LEN(@StringDate) <> 10
        BEGIN
            RETURN NULL
        END

    DECLARE @FormattedStringDate NVARCHAR(50)    
    SET @FormattedStringDate = SUBSTRING(@StringDate, 1, 4)
        + '-' + SUBSTRING(@StringDate, 5, 2)
        + '-' + SUBSTRING(@StringDate, 8, 2)
        + ' ' + SUBSTRING(@StringDate, 9, 2) + ':00'

    IF ISDATE(@FormattedStringDate) = 0
        BEGIN
            RETURN NULL
        END

    SET @Result = CONVERT(DATETIME, @FormattedStringDate)

    RETURN @Result 
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:19:21.703

它看起来不像是一种有效的 SQL Server 日期格式（至少是 SQL Server 能够理解的一种）。

如果您 100% 确定字符串将始终采用这种格式，您可以执行类似的操作

```
DECLARE @mydate VARCHAR(20)
SET @mydate=2012123023 
SELECT 
CAST(
SUBSTRING(@mydate,1,4)+'-'+SUBSTRING(@mydate,5,2)+'-'+SUBSTRING(@mydate,7,2)+' '+SUBSTRING(@mydate,9,2)+':00'
AS DATETIME) 
```

# php - php函数仅在访问者评分时保存数据，当用户登录时不保存数据 - wordpress

> ID：13930812
> 
> 赞同：0
> 
> 时间：2012-12-18T10:22:32.987
> 
> 标签：php, wordpress

我正在为 wordpress 使用 gd 星级插件，它使用此功能来保存拇指数据：

```
 function add_vote_comment_thumb($id, $user, $ip, $ua, $vote) {
        global $wpdb, $table_prefix;
        $trend_date = date("Y-m-d");
        $sql_trend = sprintf("SELECT count(*) FROM %sgdsr_votes_trend WHERE vote_date = '%s' and vote_type = 'cmmthumb' and id = %s", $table_prefix, $trend_date, $id);
        $trend_data = $wpdb->get_var($sql_trend);

        $trend_added = false;
        if ($trend_data == 0) {
            $trend_added = true;
            if ($user > 0) {
                $sql = sprintf("INSERT INTO %sgdsr_votes_trend (id, vote_type, user_voters, user_votes, vote_date) VALUES (%s, 'cmmthumb', 1, %s, '%s')",
                    $table_prefix, $id, $vote, $trend_date);
                $wpdb->query($sql);
            } else {
                $sql = sprintf("INSERT INTO %sgdsr_votes_trend (id, vote_type, visitor_voters, visitor_votes, vote_date) VALUES (%s, 'cmmthumb', 1, %s, '%s')",
                    $table_prefix, $id, $vote, $trend_date);
                $wpdb->query($sql);
            }
        }

        if ($user > 0) {
            $part = $vote == 1 ? "user_recc_plus = user_recc_plus + 1" : "user_recc_minus = user_recc_minus + 1";

            if (!$trend_added) {
                $sql = sprintf("UPDATE %sgdsr_votes_trend SET user_voters = user_voters + 1, user_votes = user_votes + %s WHERE id = %s and vote_type = 'cmmthumb' and vote_date = '%s'",
                    $table_prefix, $vote, $id, $trend_date);
                $wpdb->query($sql);
            }
        } else {
            $part = $vote == 1 ? "visitor_recc_plus = visitor_recc_plus + 1" : "visitor_recc_minus = visitor_recc_minus + 1";

            if (!$trend_added) {
                $sql = sprintf("UPDATE %sgdsr_votes_trend SET visitor_voters = visitor_voters + 1, visitor_votes = visitor_votes + %s WHERE id = %s and vote_type = 'cmmthumb' and vote_date = '%s'",
                    $table_prefix, $vote, $id, $trend_date);
                $wpdb->query($sql);
            }
        }

        $sql = sprintf("UPDATE %sgdsr_data_comment SET %s, last_voted_recc = CURRENT_TIMESTAMP WHERE comment_id = %s",
            $table_prefix, $part, $id);
        $wpdb->query($sql);

wp_gdsr_dump("SAVE_THUMB_VOTE", $sql);

        $logsql = sprintf("INSERT INTO %sgdsr_votes_log (id, vote_type, user_id, vote, object, voted, ip, user_agent) VALUES (%s, 'cmmthumb', %s, %s, '', '%s', '%s', '%s')",
            $table_prefix, $id, $user, $vote, str_replace("'", "''", current_time('mysql')), $ip, $ua);
        $wpdb->query($logsql);

wp_gdsr_dump("SAVE_THUMB_LOG", $logsql);

    } 
```

我希望这些数据也保存在 wordpress db 中的评论业力字段中。所以在函数的最后我添加：

```
//Integrate with comment karma system
    $up_qry = sprintf("SELECT visitor_recc_plus FROM %sgdsr_data_comment WHERE comment_id = %s", $table_prefix, $id);
    $votes_up = $wpdb->get_var($up_qry);
    $down_qry = sprintf("SELECT visitor_recc_minus FROM %sgdsr_data_comment WHERE comment_id = %s", $table_prefix, $id);
    $votes_down = $wpdb->get_var($down_qry);
    $votes = $votes_up - $votes_down;
    $votes_qry = sprintf("UPDATE %scomments SET comment_karma = $votes WHERE comment_ID = %s", $table_prefix, $id);
    $wpdb->query($votes_qry); 
```

但这只会在访问者评分时将数据保存到comment_karma，当我以用户身份登录时，它不会将数据保存到相应的列！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:50:55.217

在我看来，您添加的代码只是忽略了非访客的投票。在更大的代码片段的上下文中查看它。第一个片段进行了以下更改：

*   **登录用户投票：**增量`user_recc_plus`
*   **登录用户投票否决：**增量`user_recc_minus`
*   **访客投票：**增加`visitor_recc_plus`
*   **访客投票否决：**增加`visitor_recc_minus`

您的第二个片段似乎忽略了投票的来源。它仅根据设置业力值`visitor_recc_plus - visitor_recc_minus`。

我没有足够的上下文给你一个明确的修复，但你不能简单地用相对变化（$vote 而不是 $votes）更新业力吗？如果是这样，您只需要这样：

```
 $votes_qry = sprintf("UPDATE %scomments SET comment_karma = comment_karma + $vote WHERE comment_ID = %s", $table_prefix, $id);
    $wpdb->query($votes_qry); 
```

# c# - 在代码隐藏中调整 ListItem 的字体大小

> ID：13930815
> 
> 赞同：0
> 
> 时间：2012-12-18T10:22:34.570
> 
> 标签：c#, asp.net, vb.net

我想要实现的是遍历列表并将项目添加到 ASP.NET 应用程序中具有不同类型样式的列表框。到目前为止，我的 aspx 文件中有以下代码：

在标题中：

```
<style type="text/css">
        .list .Title
        {
            font-size: x-large;
        }
        .list .Title1
        {
            color:Red;
        } 
        .list .Title2
        {
            color:Black;
        }
        .list .Title3
        {
            color:Green;
        }
         .list .Line
        {
            background-color:Black;
        }

    </style> 
```

身体某处：

```
 <asp:ListBox ID="CurrentListBox" runat="server" Width="100%" Height="400" CssClass="list">   
                                </asp:ListBox> 
```

在后面的代码中，我这样做的同时根据几个因素循环列表项，它会通过其中之一：

（我在 VB.NET 中工作，但 CSharp 中的答案也可以，我会翻译它）

```
item.Attributes.Add("class", "Title") 
```

或者

```
item.Attributes.Add("class", "Title1") 
```

等等等等等等等等

**问题：** 它会处理颜色并且可以很好地改变它。但字体大小永远不会改变，只有颜色通过。

也许一些额外的信息：它在页面加载时循环通过此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:23:57.393

尝试

```
 CurrentListBox.Items[0].Attributes.Add("style", "font-size:x-large;"); 
```

谢谢

# c# - 在 SandRibbon 中选择单个单选按钮

> ID：13930817
> 
> 赞同：1
> 
> 时间：2012-12-18T10:22:41.997
> 
> 标签：c#, xaml

我们目前正在使用[SandRibbon](http://www.divelements.co.uk/net/controls/sandribbon/) 来模拟 Microsoft Office 2007 功能区界面。我们在我们的应用程序中使用 MVVM。

一个例子：

XAML：

```
<SandRibbon:RibbonTab Text="TestTab">

    <SandRibbon:RibbonGroup Header="TestHeader"> 

        <SandRibbon:Button AutoCheck="Radio"
                           Command="{Binding GoToPageOne}"
                           IsChecked="{Binding ButtonOneIsChecked, Mode=TwoWay}"
                           Text="Button One">

        <SandRibbon:Button AutoCheck="Radio"
                           Command="{Binding GoToPageTwo}"
                           IsChecked="{Binding ButtonTwoIsChecked, Mode=TwoWay}"
                           Text="Button Two">

        <SandRibbon:Button AutoCheck="Radio"
                           Command="{Binding GoToPageThree}"
                           IsChecked="{Binding ButtonThreeIsChecked, Mode=TwoWay}"
                           Text="Button Three">

    </SandRibbon:RibbonGroup>

</SandRibbon:RibbonTab> 
```

我遇到的问题是，尽管导航离开，您选择的上一个按钮仍然突出显示，您必须将鼠标悬停在按钮上才能删除突出显示。

我想知道您是否有办法将这些按钮分组，以便只有一个按钮的 IsChecked 属性设置为 true？

# silverlight - 在 Silverlight 中使用 Canves Overlay 进行多尺度图像打印

> ID：13930820
> 
> 赞同：1
> 
> 时间：2012-12-18T10:22:45.143
> 
> 标签：silverlight, multiscaleimage

我们有一个系统，其中我们在多尺度深度缩放图像中加载大型平面图像，如图像库。图像通常具有非常高的分辨率。

用户可以在选定的 deepzoom 图像上绘制形状等。我们在 deepzoom 图像上使用 Canves 并将所有叠加形状 drwan 及其逻辑位置保存在 db 中。因此，绘制的形状会在用户平移或平移时自动设置其位置.

我们需要一个自动化的解决方案，以便我们可以打印所有计划图像以及在每个深度缩放图像上完成的所有叠加工作。

目前我们正在一一做这件事，即我们使用网格、多级、画布。我们在多尺度图像中加载图像，然后绘制 Canves，然后我们使用以下代码在 Grid(ContentGrid) 的 jpeg 中相同

```
SaveFileDialog saveDlg = new SaveFileDialog();
                saveDlg.Filter = "JPG Files (*.jpg|*.jpg|*.jpeg|*.jpeg)";
                saveDlg.DefaultExt = ".jpg";
                if ((bool)saveDlg.ShowDialog())
                {
                    using (Stream fs = saveDlg.OpenFile())
                    {
                        SaveToFile(new WriteableBitmap(ContentGrid, null), fs);
                    }
                } 
```

但是这个解决方案不能正常工作。当 deepzoom 图像很大时，这会引发内存问题。

我们想要这样的东西。对于画廊中的所有计划图像，我们需要循环并以编程方式将其与 Canves 等一起转换为 jpeg，然后通过程序保存到 Amazon s3。自动化将选择所有 jpeg 并为所有这些生成一个 pdf。

或自动化解决方案。

请建议。

# c# - 会话返回 null

> ID：13930823
> 
> 赞同：1
> 
> 时间：2012-12-18T10:22:55.110
> 
> 标签：c#, asp.net-mvc-3, session-variables

我使用会话变量将用户 ID 从索引传递到 HomeController 中的创建。ATM 用户可以使用下拉菜单从用户列表中选择他们的姓名，然后单击*查看*以列出他们之前预订的假期。从那里，用户可以单击*创建*，这将把用户带到一个页面，使他们能够创建一个新的假期。从这里他们必须从下拉列表中再次选择他们的名字。

我想存储上一个下拉列表中的用户 ID，以便在他们尝试创建另一个假期时自动更新（替换第二个下拉列表）

我使用会话变量来执行此操作，iv put

```
Session["userameID"] = currentID; 
```

在我看来。Iv break 刚刚指出它，如果我将鼠标悬停在`currentID`它上面，它会显示正确的用户 ID。

所以 iv 尝试将其传递给 create 方法使用

```
string xx = (string)Session["usernameID"]; 
```

但是，字符串 'xx' 返回 NULL（用断点测试）

然后我将整个会话放在视图中

```
Session["userameID"] = HolidayDate;

string xx = (string)Session["usernameID"]; 
```

并且字符串`xx`仍在返回`null`。

不是要返回用户ID吗？？？

感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:32:20.743

您的问题的两个可能原因：

1.  分配和检索会话变量时，您没有使用相同的名称（userameID -> usernameID）

2.  您分配的类型不是字符串，当您检索无法转换的值时（假设您解决了问题 1）

# python - 如何从 .plist 文件中读取文本？

> ID：13930828
> 
> 赞同：1
> 
> 时间：2012-12-18T10:23:09.637
> 
> 标签：python

我的 iPhone 应用在 Info.plist 中有应用版本号。我需要一个 python 脚本来从中读取应用程序版本并打印两者？

我已经打印了 plist 文件。下面是代码

```
for file in os.walk(FOLDERPATH):
    inFile = open('Info.plist', 'rt')
    for line in inFile:
print(inFile.read()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T10:27:20.030

我找到了这个。我相信它是您正在寻找的。希望能帮助到你！ [http://docs.python.org/dev/library/plistlib.html](http://docs.python.org/dev/library/plistlib.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T10:29:44.083

稍微改编[的 plistlib](http://docs.python.org/2.7/library/plistlib.html)示例：

```
import plistlib
pl = plistlib.readPlist("Info.plist")
item = pl["aKey"] 
```

# android - 如何向 Fragment 添加标签或 ID

> ID：13930831
> 
> 赞同：0
> 
> 时间：2012-12-18T10:23:21.263
> 
> 标签：android, android-viewpager, fragment

这是我的寻呼机适配器。

```
public static class PagerAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public PagerAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public int getCount() {
        return mTabs.size();
    }

    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment) Fragment.instantiate(mContext,
                info.clss.getName(), info.args);
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
        Log.d("Tab position selected = ", "" + tab.getPosition());
        // Log.v(TAG, "clicked");
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

如何向每个选项卡中的片段添加标签或 ID。这样我以后可以访问它们。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:30:03.677

您可以对此方法使用覆盖并应用您的自定义片段，

```
 @Override
public Fragment getItem(int position) {
    if (position == 0)
        fragment = new Fragment1();
    else (position == 1)
        fragment = new Fragment2();
    return fragment;
} 
```

依此类推，如果您需要为此方法实现和覆盖，

```
 @SuppressLint("DefaultLocale")
    public CharSequence getPageTitle(int position) {

        switch (position) {
        case 0: 
            return ;
        case 1: 
            return ;
        }
        return null;
    } 
```

试试看。

# php - php curl 没有从 youtube API 获取数据

> ID：13930837
> 
> 赞同：0
> 
> 时间：2012-12-18T10:23:42.603
> 
> 标签：php, curl, youtube

> **可能重复：**
> [Php - 调试 Curl](https://stackoverflow.com/questions/3757071/php-debugging-curl)

我正在使用 curl 从 youtube API 获取用户数据代码是

```
 $url_userInfo =  'https://gdata.youtube.com/feeds/api/users/default?access_token=ya29.AHES6ZS7GMdZf91LbMtoOdhFSFOpTuHHT-t7pSggAp-tS0A;

print_r($url_userInfo);
$ch = curl_init($url_userInfo);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, '3');
$content = curl_exec($ch);
curl_close($ch);
print_r( $content); 
```

如果我手动访问此 url，它会以 xml 形式显示数据。但没有什么可打印的`$content`。

代码有问题吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:29:20.607

这实际上是一个**HTTPS**链接，即它使用 SSL，您需要获取 cacert.pem，并为 SSL 设置 cURL 以使其工作。

您可以在**[这里获得证书！](http://curl.haxx.se/ca/cacert.pem)**

你会像这样设置它：

```
$curl = curl_init();
$browser = $_SERVER['HTTP_USER_AGENT'];
$header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
$header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$header[] = "Cache-Control: max-age=0";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en-us,en;q=0.5";
$header[] = "Pragma: ";
curl_setopt($curl, CURLOPT_FAILONERROR,true);
curl_setopt($curl, CURLOPT_USERAGENT, $browser);
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_REFERER, 'http://www.google.com');
curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
curl_setopt($curl, CURLOPT_AUTOREFERER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl, CURLOPT_TIMEOUT, 20);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY); //needed for SSL
curl_setopt($curl, CURLOPT_CAINFO, "/scripts/cacert.pem"); //path to file
curl_setopt($curl, CURLOPT_URL, $url_userInfo);
$content = curl_exec($curl);
echo curl_error($curl);  //display errors under development
curl_close($ch);
print_r( $content ); 
```

使用适当的用户代理，并使用 SSL 和证书进行身份验证，就像浏览器一样。

# jasper-reports - 使用 java bean 数据源时，jasper 报告未显示表格

> ID：13930838
> 
> 赞同：2
> 
> 时间：2012-12-18T10:23:45.163
> 
> 标签：jasper-reports, javabeans

我在我的项目中使用 JasperReports，在摘要带中使用表格组件并提供数据，**`JRBeanCollectionDataSource`**但在提取报告后，仅获取报告的标题并且未显示表格。

这是我的 .jrxml

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="CampaignSummary" language="groovy" pageWidth="1400" pageHeight="1000" orientation="Landscape" columnWidth="1360" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ef078799-c539-490f-b244-d493f4522ef2">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="163"/>
<property name="ireport.y" value="0"/>
<style name="table">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table_TH" mode="Opaque" backcolor="#00FFFF"/>
<style name="table_CH" mode="Opaque" backcolor="#BFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFFFFF"/>
    </conditionalStyle>
</style>
<subDataset name="TableDataset" uuid="c99fd89d-9d8f-488f-95db-360a7f5aba96">
    <field name="CampaignID" class="java.lang.String">
        <fieldDescription><![CDATA[me.CampaignID]]></fieldDescription>
    </field>
    <field name="CampaignName" class="java.lang.String">
        <fieldDescription><![CDATA[Campaign Name]]></fieldDescription>
    </field>
    .
            .
            .
    ......some more fields....
            .
            .
    <field name="NetImpact" class="java.lang.String">
        <fieldDescription><![CDATA[Net Impact]]></fieldDescription>
    </field>
</subDataset>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="54" splitType="Stretch">
        <staticText>
            <reportElement uuid="8b41287b-3930-416a-ba00-7f4a9c907e26" x="0" y="0" width="1360" height="54"/>
            <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Arial Rounded MT Bold" size="24"/>
            </textElement>
            <text><![CDATA[Campaign Summary Report]]></text>
        </staticText>
    </band>
</title>
<summary>
    <band height="239" splitType="Stretch">
        <frame>
            <reportElement uuid="61313d06-6df1-4212-ab8f-8e311dc5ad33" x="0" y="0" width="1360" height="87"/>
        </frame>
        <frame>
            <reportElement uuid="c04b08f6-89d3-4104-87ba-adecd3c4f7dd" x="0" y="87" width="1360" height="152"/>
            <componentElement>
                <reportElement uuid="8afc21c1-7b57-4dab-8178-8810c1183dd9" key="table" style="table" x="0" y="0" width="1360" height="152"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="TableDataset">
                        <dataSourceExpression>
                            <![CDATA[($P{REPORT_DATA_SOURCE})]]>
                        </dataSourceExpression>
                    </datasetRun>
                    <jr:column width="90" uuid="eece2ecf-027d-4ef1-bd05-8d7d6bbbc0b0">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="c0d108a0-9f4b-4ec3-b9d0-664ea0724584" x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[Campaign Name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="6a8f7bf6-5e9b-4f77-a524-9a8d7f0ee2ca" x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[String.valueOf($F{CampaignName})]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    .
                                            .
                                            .some more columns...
                                            .
                    <jr:column width="80" uuid="312f9143-cee8-46fb-a296-27172c4fca98">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="22ec2935-d4a9-4b64-856d-e64d72f0d856" x="0" y="0" width="80" height="30"/>
                                <textElement/>
                                <text><![CDATA[Net Impact]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="071cddad-63f1-47bc-8da5-a2d6752e3abe" x="0" y="0" width="80" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[String.valueOf($F{NetImpact})]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </frame>
    </band>
</summary> 
```

和java代码是

```
CampaignSummaryBeanFactory campaignSummaryBeanFactory =new CampaignSummaryBeanFactory();
JasperFillManager.fillReportToFile("build/reports/CampaignSummary.jasper", null, new JRBeanCollectionDataSource(campaignSummaryBeanFactory.getCampaignSummaryBeans())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-30T12:10:21.650

如果表格为空，则不会显示表格。

你有什么元素`campaignSummaryBeanFactory.getCampaignSummaryBeans()`吗？

1.  对于没有数据的情况，如果您想在没有行的情况下查看空表，请在“无数据”区域中添加一些静态文本，例如“没有要显示的数据”，甚至是表的标题.

2.  就您的代码而言，如果数据源中有 1 个元素，该表也将为空。否则它将保留列表中的第一条记录。查看[Jasper 报告缺少第一行](https://stackoverflow.com/questions/27700361/jasper-report-missing-first-row/27702761#27702761)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T07:04:28.980

您会发现有些人告诉您将表格放在摘要带中。但这就是您的表格未显示的原因。把它放在一个细节带中。

# ruby-on-rails - ruby 中的@object = ::tablename.where ( )

> ID：13930840
> 
> 赞同：0
> 
> 时间：2012-12-18T10:23:49.577
> 
> 标签：ruby-on-rails

谁能解释一下下面的简单语句

```
@object ||= ::Tablename.where (:fieldname => value ).first 
```

它是什么意思，为什么在表名之前`||`使用`=`和使用？`::`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:30:09.153

该片段检查是否`@object`是`false`或`nil`；如果是，则将调用`Tablename`顶级命名空间中命名的方法所产生的值分配给它。

这是因为`||=`意思是“如果值当前是假的，则赋值”；并且`::`是范围解析运算符。它通常在左侧出现一个类名，就像`Net::HTTP`访问模块中的`HTTP`常量一样。`Net`左边没有名字，意思是“在顶级范围内”。

# c# - 如何在 ASP .NET 中关闭对话框后刷新 GridView

> ID：13930846
> 
> 赞同：0
> 
> 时间：2012-12-18T10:24:06.743
> 
> 标签：c#, asp.net, .net

我有一个带有 Gridview 的主页，它显示来自数据库的数据。在 gridview 中有一个按钮，当单击此按钮时，将出现一个对话框，允许您编辑选定的行。该对话框被创建为一个 aspx 类。当我编辑数据并关闭对话框时，我想在主页上刷新我的 GridView，以便表示编辑后的数据。我怎样才能做到这一点？

我用于编辑数据和关闭对话框的代码是这样的：

```
 protected void editButton_Click(object sender, EventArgs e)
        {
            string alias = Request.QueryString["alias"];
            string custid = Request.QueryString["custid"];
            controller.EditDeliveries(custid, alias, tdaysField.Text, thoursField.Text, ttypeField.Text, pdaysField.Text, phoursField.Text, ptypeField.Text);
            ClientScript.RegisterClientScriptBlock(GetType(), "onUpload", "<script type='text/javascript'> window.close();</script>");
        } 
```

任何人都可以帮忙吗？如果您需要查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:26:12.903

只需再次设置您的数据源并在回发中重新绑定它

```
 gvMyGrid.DataSource = myData; //Fresh from the database
   gvMyGrid.DataBind();          //Bam, fresh data 
```

编辑：哦，如果它是回发源的另一个控件，您可以使用气泡事件来触发刷新。

第二次编辑：让对话框页面告诉主页更新该网格：

```
 RaiseBubbleEvent(this, new CommandEventArgs("DataUpdated", "This could be null, or I could be a message to let the user know things are updated")); 
```

然后在您的主页上

```
 protected override bool OnBubbleEvent(object sender, EventArgs e)
    {

        if (e is CommandEventArgs)
        {
            var args = (CommandEventArgs)e;
            //Could use args.CommandArgument here
            switch(args.CommandName)
            {
                  case "DataUpdated":

                     gvMyGrid.DataSource = myData; 
                     gvMyGrid.DataBind();          
                     return true;                  //Handled the event LIKE A BOSS
            }
        }
        return false;                              //I didn't handle this event
    } 
```

# asp-classic - 使用asp classic将excel数据读入asp文件

> ID：13930850
> 
> 赞同：0
> 
> 时间：2012-12-18T10:24:17.273
> 
> 标签：asp-classic

本地机器上存在的 Excel 文件需要读入 asp 页面，其中数据将显示在表格中，请您帮帮我。当文件存在于服务器上时，我可以找到一些代码片段来解释从文件中读取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:37:36.810

您必须先将 Excel 文件上传到服务器。

这是关于 ASP 文件上传的其他问题：[如何使用 asp-classic 上传文件](https://stackoverflow.com/questions/12190305/how-to-upload-files-with-asp-classic)

# java - 选项卡式窗格的宽度

> ID：13930853
> 
> 赞同：1
> 
> 时间：2012-12-18T10:24:21.610
> 
> 标签：java, swing, tabs, width, jtabbedpane

如何为选项卡式窗格设置全宽？我尝试使用以下代码：

```
UIDefaults def = UIManager.getLookAndFeelDefaults();
    def.put( "TabbedPane.tabInsets", new Insets(0, 0, 0, 250) ); 
```

但是，无论我使用什么，它似乎都没有完全增加尺寸。它要么创建两行，要么不是全长。

图片看懂问题： [http ://s8.postimage.org/lr47nm9tx/tabbedpanefull.png](http://s8.postimage.org/lr47nm9tx/tabbedpanefull.png)

# css - 如何？在 search_field 中缩进用户输入

> ID：13930855
> 
> 赞同：2
> 
> 时间：2012-12-18T10:24:26.443
> 
> 标签：css

当用户在 search_field 中输入文本时，我希望它从右侧开始 4 个空格，以便文本不会显示在框中的搜索图标上方/下方。我基本上希望我的 search_field_tag 像 iTunes 搜索栏一样工作（当您键入图标右侧显示的文本时）。感谢任何帮助。

必须修改搜索字段中的文本，因此此代码使其工作。

需要的CSS：

```
.search-query {
text-indent: 15px;
} 
```

当前代码：

```
<%= form_tag users_path, :method => 'get', :class => "navbar-search" do %>
<%= search_field_tag :search, params[:search], placeholder: "    Find Members", :class => "search-query", :style => "width: 100px" %>
<div class="icon-search"></div>
<% end %> 
```

CSS

```
.navbar-search .icon-search {
position: absolute;
top: 4px;
left: 7px; 
```

![搜索栏](../Images/5b54cd3b429f1798994881af8a6e2fb8.png) ![搜索有问题](../Images/689964d840ea079a346e9b1156541a9c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:30:13.410

根据需要使用 css 在 textarea 中添加填充！

```
.navbar-search .icon-search {
position: absolute;
top: 4px;
left: 7px;
padding-left:20px; // this applies to only left and will start the text 20px away from the left side of textarea or input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:55:30.380

```
.search-query {
  text-indent: 15px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:37:51.580

将图标作为背景图像放在 .navbar-search 中并添加 padding-left 以定位类型。见下文。

```
 .navbar-search {
    padding-left: 25px; // set to any px* of choice
    background: <set background color> url('<path to an image(preferably .png)>') no-repeat 0 0;
   } 
```

* 为搜索栏提供多少 padding-left 将影响其宽度。

# python - paramiko 为失败的连接抛出什么错误/异常？

> ID：13930858
> 
> 赞同：4
> 
> 时间：2012-12-18T10:24:50.437
> 
> 标签：python, paramiko

如果失败：

```
ssh = paramiko.SSHClient()
ssh.connect( host, username = USER , pkey = MY_KEY, timeout = 2) 
```

我得到如下回溯：

```
 File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in bs_process
  File "/usr/lib/python2.7/site-packages/paramiko/client.py", line 282, in connect
    for (family, socktype, proto, canonname, sockaddr) in socket.getaddrinfo(hostname, port, socket.AF_UNSPEC, socket.SOCK_STREAM):
socket.gaierror: [Errno -2] Name or service not known 
```

我不知道 Paramiko 会因错误的连接尝试而引发什么样的错误。哪些是异常类，如何导入它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:37:20.830

对于所有以 Exception 结尾的类，您可以先查看 API 文档：

[http://docs.paramiko.org/en/1.15/api/client.html#paramiko.client.SSHClient.connect](http://docs.paramiko.org/en/1.15/api/client.html#paramiko.client.SSHClient.connect)

然后，你也应该抓住`socket.error`. 我认为这会让你得到几乎所有的东西。`socket.gaierror`是 的子类`socket.error`，例如。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-26T20:08:10.133

接受的答案有一个断开的链接。Paramiko 的文档现在位于：

[http://docs.paramiko.org/en/1.15/api/client.html#paramiko.client.SSHClient.connect](http://docs.paramiko.org/en/1.15/api/client.html#paramiko.client.SSHClient.connect)

它的“连接”方法将引发以下问题：

```
BadHostKeyException – if the server’s host key could not be verified
AuthenticationException – if authentication failed
SSHException – if there was any other error connecting or establishing an SSH session
socket.error – if a socket error occurred while connecting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T15:53:16.063

问题在于调用`ssh.connect()`.
在这种情况下，必须指定连接端口。
例子：

```
ssh.connect(server, port=22, username=user, pkey=key) 
```

那对我有用。

# matlab - 在matlab中计算周数

> ID：13930863
> 
> 赞同：4
> 
> 时间：2012-12-18T10:25:03.153
> 
> 标签：matlab, week-number

我有一个年度时间序列，其中每隔一小时记录一次测量值：

```
StartDate = '2011-01-01 00:00';
EndDate = '2011-12-031 23:00';
DateTime=datevec(datenum(StartDate,'yyyy-mm-dd HH:MM'):60/(60*24):...
    datenum(EndDate,'yyyy-mm-dd HH:MM'));
dat = 2+(20-2).*rand(size(DateTime,1),1); 
```

我想计算一年中每个星期的平均 24 小时周期，即第 1 周，第 1 天到第 7 天我想计算平均 00:00, 01:00,... 所以最终我将以 52、24 小时系列结束，即一年中的每周一个。Matlab 确实有一个名为“weeknum”的函数，它从给定的序列日期号返回周数，但是，这个函数在金融工具箱中。谁能建议另一种查找周数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:40:42.313

也许这会有所帮助（我以当前日期和时间为例）：

```
c = datevec(datestr(now));
week_num = ceil(diff(datenum([c(1), 1, 1, 0, 0, 0; c])) / 7) 
```

我不确定这个解决方案如何正确处理边缘情况，但我认为这是一个很好的起点。

您也可以通过显示当前周数的[网站进行验证。](http://www.epochconverter.com/epoch/weeknumbers.php)

例如，可以将其应用于您的示例，如下所示：

```
weeknum = @(v)ceil(diff(datenum([v(1), 1, 1, 0, 0, 0; v(:)'])) / 7);
arrayfun(@(n)weeknum(DateTime(n, :)), 1:size(DateTime, 1))' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:56:41.453

根据 Wikipedia，ISO 周数是这样计算[的](http://en.wikipedia.org/wiki/ISO_week_date#Calculating_the_week_number_of_a_given_date)。

我今天做了一个例子。

```
offsetNotLeap = [0  31  59  90  120 151 181 212 243 273 304 334];
offsetLeap = [0 31  60  91  121 152 182 213 244 274 305 335];

todayVector = datevec(today);
todayNum = today;
ordinalDay = offsetLeap(todayVector(2)) + todayVector(3);
dayOfTheWeek = weekday(todayNum);
weekNumber = fix((ordinalDay - dayOfTheWeek + 10)/ 7)

weekNumber =

    51 
```

我没有检查 0 和 53 案例。另请注意，MATLAB 的 weekday 函数将星期日的索引设为 1，因此如果您想让星期一的索引为 1，则需要进行一些调整。ISO 说星期一应该是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-06T13:52:02.640

尽管自从您发布问题以来已经过去了一段时间，但如果人们会遇到与我相同的问题，我想给出一个额外的答案。正如 HebeleHododo 已经指出的那样，在 Wikipedia 上发布了一条[如何计算 ISO 周数](https://en.wikipedia.org/wiki/ISO_week_date#Calculating_the_week_number_of_a_given_date)的规则。但无论如何，我找不到它的通用代码片段。

因此，我开发了以下通用方法，该方法能够**采用任意参考年份的任意日期时间**的向量、矩阵或单个值。感谢阅读任何建设性的反馈。我在 MATLAB R2017a 上成功运行了它，并针对一些边缘情况对其进行了进一步测试。

```
function week_num = get_week_num(dtimes)
    dnums   = datenum(dtimes);
    firsts  = datenum(year(dtimes), 1, 1);
    ordinal = floor(dnums - firsts);
    wday    = weekday(dtimes) - 1;

    wday(wday == 0) = 7;
    week_num = floor((ordinal + wday + 10) / 7);
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T12:44:44.213

只是一个简单的工作日函数，星期一作为一周的第一天：

```
function [ daynumber,dayname ] = weekd( date )
%WEEKD Returns the day number and day name based on the input date
%   First day of week
%   -----------------
%   The first day of the week is Monday.
%
%   Parameter
%   ---------
%   date = Input date -> format: dd.mm.yyyy / Example: 21.11.2015

[dn,dayname] = weekday(datenum(date,'dd.mm.yyyy'));

if dn == 1;
   daynumber = 7;
elseif dn >= 2 && dn <= 7
   daynumber = dn - 1;
else      
   error('Invalid weekday number.'),
end

end 
```

# regex - 使用 Henry Spencer 正则表达式库时 (.+_)* 是什么意思？

> ID：13930867
> 
> 赞同：2
> 
> 时间：2012-12-18T10:25:34.887
> 
> 标签：regex

`(.+_)*`参考 Henry spencer 正则表达式库，我想知道和之间的区别`(.)*`。

`(.+_)*`也尝试从后面匹配字符串。据我了解`.`，匹配任何单个字符，`.+`将意味着该字符的非零出现。`_`将表示空格或 { 或 } 或 等。

括号意味着任何一个都可以被认为是匹配的，最后`*`表示 0 次或多次出现。

我觉得`(.)*`也会达到同样的效果。`+`后面`.`可能是多余的。

有人可以解释一下两者之间的细微差别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:32:05.300

例如，`aa aa`将被匹配`(.+_)*`但不被匹配，`(._)*`因为后者只需要空格前的一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:32:56.877

我不记得下划线有什么特殊含义。Henry Spencer 正则表达式库的特别之处在于它结合了正则表达式引擎技术——确定性和非确定性。

这有利有弊。

优点是您的正则表达式将是最快的，并且构建简单，而在其他引擎中，您可能会使用外观和高级正则表达式技术（例如，如果没有匹配项，则使其提前失败）以达到相同的速度。

缺点是整个正则表达式要么是贪婪的，要么是非贪婪的。也就是说，如果您使用 * 或 + 后没有 ?，那么整个正则表达式将是贪婪的，即使您使用 ? 在那之后。如果您第一次使用 * 或 + 后跟一个 ?，那么整个正则表达式将是非贪婪的。

这使得制作正则表达式**有点棘手，但确实有点棘手。**

**Henry Speced 库是tcl**命令背后的引擎，`regexp`这使得这种语言对于正则表达式非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:13:15.363

据我所知，`_`它没有特殊含义，它只是一个“_”。请参阅[正则表达式.info](http://www.regular-expressions.info/tcl.html)

你的两个正则表达式不一样。

1.  `(._)*`将匹配一个字符后跟一个下划线（如果下划线在您的实现中具有特殊含义，则将“下划线”替换为该含义），该序列将匹配 0 次或更多次，例如“ `a_%_._?_`”

2.  `(.+_)*`将匹配**至少一个**字符后跟一个下划线，此序列将匹配 0 次或多次，例如“ `abc45_%_.;,:_?#'+*~_`”

`(.+_)*`将匹配可以匹配的所有内容，`(._)*`但反之则不然。

# android - Android edittext 验证类似对话框

> ID：13930870
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:25:49.873
> 
> 标签：android, android-edittext, android-alertdialog

按下按钮时的 Android 输入验证并在对话框中显示验证消息，如下所示。

```
Codename is required
Password is required
USername is required.
Enter the valid Email id.

Dismiss 
```

这是我的代码：

```
 btninsert = (Button)findViewById(R.id.new_customer);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            EditText Firstname = (EditText) findViewById(R.id.tf_userName);
            EditText Lastname = (EditText) findViewById(R.id.tf_password);
            EditText Baddress = (EditText) findViewById(R.id.tf_address);
             if(Firstname.getText().toString().length() == 0 )
                Firstname.setError( "Firstname is required!" );
            else if(Lastname.getText().toString().length() == 0 )
                Lastname.setError( "Lastname is required!" );
             else if(Baddress.getText().toString().length() == 0 )
                Baddress.setError( "Address is required!" );
                else
                         insertValues();
                        }
                       }); 
```

我该如何验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:44:35.933

将当前代码更改为 EditText 上的输入验证，在对话框中显示验证消息：

首先创建一个显示 Alert 的方法：

```
public void showAlertbox(String erroMessage){
AlertDialog alertDialog = new AlertDialog.Builder(
                YOur_Current_Activity.this).create();

      // Setting Dialog Title
   alertDialog.setTitle("Error Message");

    // Setting Dialog Message
     alertDialog.setMessage(erroMessage);

     // Setting OK Button
     alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int which) {
                // Write your code here to execute after dialog closed

       }
        });

  // Showing Alert Message
 alertDialog.show();

} 
```

创建一个方法来检查 String 的验证：

```
public static boolean notEmpty(String s) {
 return (s != null && s.length() > 0);
} 
```

在按钮单击时调用此方法：

```
btninsert.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

     if(notEmpty(Firstname.getText().toString())){
          if(notEmpty(Lastname.getText().toString())){
               if(notEmpty(Baddress.getText().toString())){

                    // instert here
                    insertValues();
                }else{
                    showAlertbox("Baddress Name Empty!!"); 

            }else{
              showAlertbox("Lastname Name Empty!!");
            }
       }
     else{
         showAlertbox("First Name Empty!!");
       }

   }
//...your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T16:54:31.027

我们可以在如下所示的对话框中进行 edittext 验证。根据您的要求确定范围。

```
private  EditText name;
private  boolean  valid = false;

public void showDialog() {

    final Dialog dialog= new Dialog(Activity.this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.custom_dialog);
    name= (EditText) dialog.findViewById(R.id.et_name);
    Button btnSubmit = (Button) dialog.findViewById(R.id.btn_submit);
    Button btnCancel = (Button) dialog.findViewById(R.id.btn_cancel);

    btnSubmit.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            //validate the edit text
            if(validateName()) {
                     // add your code here
                dialog.cancel();
            }
        }
    });
}

private boolean validateName() {
    valid = true;

    if(name.getText().toString().isEmpty()){
        valid =false;
        name.setError("is empty");
     }  
    return valid;
} 
```

# spring - spring bean 中的 hibernate.search.default.directory_provider 而不是 persistence.xml

> ID：13930871
> 
> 赞同：0
> 
> 时间：2012-12-18T10:25:54.790
> 
> 标签：spring, hibernate, lucene, hibernate-search, compass-lucene

我的处境相当糟糕。我们使用 compass 与 Lucene 进行 Hibernate 搜索集成，并实现了数据库目录搜索（使用**JdbcDirectory**）而不是 FSDirectoryProvider、RAMDirectoryProvider 等。

问题是目录提供程序是作为 META-INF/persistence.xml 中的属性传递的，如下所示：

```
<property name="hibernate.search.default.directory_provider" value="uk.company.package.JdbcDirectoryProvider" /> 
```

我们需要将数据库详细信息传递给 JdbcDirectoryProvider，因为**JdbcDirectory**需要传递数据源。

我们使用带有数据库和索引详细信息的属性文件（在类路径中）以非常规的方式构建数据源（用于目录提供程序）。

如果我们将**uk.company.JdbcDirectoryProvider**配置为 spring bean，我们可以注入数据源。这适用于 Tomcat，但不适用于 OAS 或 Weblogic，因为我们在 persistence.xml 中传递 directory_provider。可能是因为数据源是由 spring 初始化的（因为类加载器在这些应用程序服务器中的工作方式）。

我的问题是我们如何直接在 aSpring bean 中配置**hibernate.search.default.directory_provider而不是 persistence.xml？**

最近的地方是：

```
<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"> 
```

但它只需要三个属性：

```
<property name="showSql" value="true" />
<property name="generateDdl" value="false" />
<property name="databasePlatform" value="org.hibernate.dialect.Oracle10gDialect" /> 
```

**解决方案**

您可以将 spring bean 中的休眠属性作为**jpaProperties 传递**

```
<property name="jpaProperties">
    <props>
       <prop key="hibernate.search.default.directory_provider">
       uk.company.package.JdbcDirectoryProvider
     </prop>
    </props>
</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:58:12.127

我找到了解决方案。

您可以将 spring bean 中的休眠属性作为 jpaProperties 传递

```
<property name="jpaProperties">
    <props>
       <prop key="hibernate.search.default.directory_provider">
       uk.company.package.JdbcDirectoryProvider
     </prop>
    </props>
</property> 
```

# android - 广播接收器和音乐

> ID：13930873
> 
> 赞同：2
> 
> 时间：2012-12-18T10:26:00.427
> 
> 标签：android, sms, media-player

我创建了一个简单`BroadcastReceiver`的对`SMS`收到的反应。

一条消息应该能够启动警报，而另一条消息应该能够停止它。警报由 a 触发`mediaPlayer`并且运行良好。但我无法阻止它。我知道`mediaplayer`每次`SMS`收到权利时都会创建一个新实例，但即使是单例，我也无法使其工作......

这是一个代码片段：

```
Bundle myBundle = intent.getExtras();
SmsMessage [] messages = null;
String strMessage = "";

if (myBundle != null)
{
    Object [] pdus = (Object[]) myBundle.get("pdus");
    messages = new SmsMessage[pdus.length];

    for (int i = 0; i < messages.length; i++)
    {
        messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
        strMessage += messages[i].getMessageBody();
    }

    if (strMessage.equals("ATELIO&SON")){
        if(onoff == 1){
        Toast.makeText(context, "Démarrage localisation sonore", Toast.LENGTH_LONG).show();
        playSound();
        }
    }
    else if(strMessage.equals("ATELIO&SON&FIN")){
        Toast.makeText(context, "Fin localisation sonore", Toast.LENGTH_LONG).show();
        stopSound();
    }
} 
```

`playsound()`并且`stopsound()`是两个非常简单的方法，第一个启动声音，第二个检查是否`mediaplayer`是`null`并相应地采取行动。

# c# - 如何正确排序列表 用数字？

> ID：13930874
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:26:00.270
> 
> 标签：c#, .net, linq, sorting

我遇到了对包含数字的列表项字符串进行排序的困难。我希望我可以自动从最小到最大排序。这是我的代码：

```
// Initialize an array to store the numbers
List<string> tab_num = new List<string>();
tab_num.Add("A.3.2.1");
tab_num.Add("A.3.3.1");
tab_num.Add("A.1.0.1");
tab_num.OrderByDescending(num => num).ToList(); 
```

为什么我的结果是假的？...

```
[1] A.3.2.1

[2] A.3.3.1

[3] A.1.0.1 
```

预期结果：

```
[1] A.1.0.1

[2] A.3.2.1

[3] A.3.3.1 
```

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T10:32:29.793

OrderByDescending 表示从大到小。此外，您没有在排序后分配结果。

尝试这个：

```
 List<string> tab_num = new List<string>();
        tab_num.Add("A.3.2.1");
        tab_num.Add("A.3.3.1");
        tab_num.Add("A.1.0.1");
        tab_num = tab_num.OrderBy(num => num).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T10:34:37.470

因为您按字母顺序排序。`OrderBy`如果您想订购“从小到大”，则无论如何都应该使用。您需要将其解析为某种数字或版本：

```
Version v = null;
var ordered = tab_num.Select(tab => new { tab, Versionpart = tab.Substring(2) })
                     .Where(x => Version.TryParse(x.Versionpart, out v))
                     .OrderBy(x => v)
                     .Select(x => x.tab)
                     .ToList(); 
```

（假设版本总是在`tab.Substring(2)`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T10:41:44.407

其实这里不需要linq，使用`Sort`方法：

```
tab_num.Sort(); 
```

但是如果你想让你的代码工作，只需*将*结果列表分配给源列表：

```
tab_num = tab_num.OrderBy(x => x).ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T10:36:59.170

您应该将 linq 查询的结果设置为任何变量（并使用 OrderBy）：

```
List<string> tab_num = new List<string>();
tab_num.Add("A.3.2.1");
tab_num.Add("A.3.3.1");
tab_num.Add("A.1.0.1");
tab_num = tab_num.OrderBy(num => num).ToList(); 
```

`tab_num.OrderBy(num => num).ToList()`不是对源列表执行排序，而是返回排序列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T10:28:08.883

这里的主要问题是您没有按照下面的建议将结果分配给列表。

顺便说一句：此列表不包含数字，它包含字符串，因此比较器使用字母比较器。你应该使用`OrderBy`not `OrderByDescending`。我建议您实现自己的比较器，因为您的字符串非常简单，并且当数字增长超过 9 时，默认比较器会给您错误的响应

# ios - UIWebview 不播放 mp4 视频

> ID：13930875
> 
> 赞同：10
> 
> 时间：2012-12-18T10:26:03.200
> 
> 标签：ios, video, uiwebview, screen, frame

我尝试使用 UIWebView 播放来自网站（带有 HTML5 视频标签）的 .mp4 视频。iPhone / iPad 设备和模拟器仅显示带有被删除的播放按钮的黑框。如果我只是在 Safari Mac 版上调用这个网站，就可以播放它。怎么了？

它不是本地文件。html 看起来像这样：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" type="text/css" href="../css/shared-culture.css" />
    </head>
    <body>
        <section class="base">
            <hgroup>
                <h1>creative commons</h1>
                <h2>a shared culture</h2>
            </hgroup>

                <p>To celebrate our 2008 fundraising campaign, Creative Commons has
                    released “A Shared Culture,” a short video by renowned filmmaker <a
                        href="http://en.wikipedia.org/wiki/Jesse_Dylan">Jesse Dylan</a>. Known for
                    helming a variety of films, music videos, and the Emmy Award-winning <a
                        href="http://my.barackobama.com/page/invite/yeswecanvideo">“Yes We Can”&lt;/a>
                    Barack Obama campaign video collaboration with rapper will.i.am, Dylan created
                    “A Shared Culture” to help spread the word about the Creative Commons mission. </p>
                <!-- height="240" width="360" -->
                <video id="video1" controls="controls">
                    <source src="../video/shared-culture.mp4" type="video/mp4"/>
                    <source src="../video/shared-culture.webm" type="video/webm"/>
                    <div class="errmsg">
                        <p>Your Reading System does not support (this) video.</p>
                        <pre><code>
&lt;video id="video1" controls="controls"&gt;                    
  &lt;source src="../video/shared-culture.mp4" type="video/mp4"/&gt;
  &lt;source src="../video/shared-culture.webm" type="video/webm"/&gt;    
&lt;/video&gt;
                        </code></pre>
                    </div>
                </video>
                <p>In the video, some of the leading thinkers behind Creative Commons
                    describe how the organization is helping “save the world from failed sharing”
                    through free tools that enable creators to easily make their work available to
                    the public for legal sharing and remix. Dylan puts the Creative Commons system
                    into action by punctuating the interview footage with dozens of photos that have
                    been offered to the public for use under CC licenses. Similarly, he used two
                    CC-licensed instrumental pieces by Nine Inch Nails as the video’s soundtrack
                    music. These tracks, “17 Ghosts II” and “21 Ghosts III,” come from the Nine Inch
                    Nails album Ghosts I-IV, which was released earlier this year under a Creative
                    Commons BY-NC-SA license. (See <a
                        href="http://creativecommons.org/videos/a-shared-culture">attribution</a>.)
                </p>

        </section>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T17:23:13.117

它可能不是 iPhone 友好的格式。

将 mp4 文件拖到 iMovie 中，然后单击“**共享**” -> **“导出电影”**并选择一种与 iPhone 兼容的格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T17:13:46.533

视频无法在 UIWebView 中播放的一种方式是托管视频文件的 Web 服务器不支持字节范围。UIWebView 不会一次下载整个 .mp4 文件；相反，它通过请求文件的一部分来流式传输视频。如今，大多数服务器都支持字节范围，但如果您的服务器不支持，或者您出于某种原因将其关闭，您将无法向 iOS 设备提供视频。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T16:15:31.693

听起来像一个编解码器问题。如果您在计算机上的 VLC 中打开文件，您可以查看该文件使用的编解码器，转到 Window->Media Information->Codec Details。[此处](https://stackoverflow.com/questions/3456424/what-video-audio-codec-settings-for-playback-on-android-and-ios)的答案链接到 Apple 的文档，您可以在其中找到支持的视频和音频编解码器：

[https://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

[https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T19:46:45.033

`../`您使用的相对路径可能有问题。尝试使用完整的绝对路径 - 从`http://`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-28T15:55:09.177

我在 C#.NET Core Ios Webview 应用程序中搜索相同的内容。对我来说，在 WebView 控件上设置这些开关（在 webview 中设置 html 之后）：

```
WebView.AllowsLinkPreview = true;
WebView.AllowsInlineMediaPlayback = true;
WebView.AllowsPictureInPictureMediaPlayback = true; 
```

为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T08:27:48.850

我也有这个问题，我有2个，`.mp4`但一个可以使用，一个不能，我尝试将类型文件格式化`.mp4`为`.mp4`iPad并且它的工作，我认为你应该尝试。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-23T18:50:36.537

在 iPhone 上播放 mp4 视频编程并不难。只是我们需要做一个额外的拖放。

请采取一个新的单一视图项目。然后在 ViewController.m 文件中复制并粘贴此代码

```
 #import "ViewController.h"

   @interface ViewController ()

   @end

   @implementation ViewController
   @synthesize webView;
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

CGRect screenRect = [[UIScreen mainScreen] bounds];

CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height;

webView=[[UIWebView alloc]initWithFrame:CGRectMake(0,  0,screenWidth,screenHeight)];

NSURL *url = [[NSBundle mainBundle] URLForResource:@"testingHTML" withExtension:@"html"];
NSLog(@"%@",url);
[self.webView loadRequest:[NSURLRequest requestWithURL:url]];

// NSURL *nsurl=[NSURL URLWithString:url];
//NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
// [webView loadRequest:nsrequest];
[self.view addSubview:webView];

}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

然后创建名为 testingHTML.html 的 HTML 文件

并将以下代码复制并粘贴到 HTML 文件中

```
<!DOCTYPE html>
<html>
<head></head>

<body>
  <center> <video width="250" height="304" controls preload>
        <source src="video1.mp4" type="video/mp4">
            </video> </center>

   <p>Thanks to Md Kamrul Hasan .....mdkamrul.hasan@marquette.edu</p>

   </body>
</html> 
```

将 MP4 类型的视频拖放到两个位置：

首先：将视频从 HDD 拖到项目选项卡 [Xcode 的左侧选项卡] 第二：从 Xcode 左侧选项卡，再次将相同的视频文件拖到项目--->构建阶段--->复制捆绑资源

通常，Copy bundle Resources 包含项目文件，但有时它们不包含视频文件。

现在运行项目并欣赏视频......！

祝你好运

# php - 使用 php 通过 azure-website 连接到 azure-blob

> ID：13930880
> 
> 赞同：2
> 
> 时间：2012-12-18T10:26:12.140
> 
> 标签：php, azure, azure-storage

我已经建立了一个 windows azure 网站 (php)，我想连接到 azure storage (blob) 环境。我浏览了[PHP 教程中的如何使用 Blob 服务](http://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/)，但这仅提及网站存储在本地的情况。

我尝试设置一些案例，但我不断收到 http 500 错误。

```
<?php
require_once 'WindowsAzure/WindowsAzure.php';

use WindowsAzure\Common\ServicesBuilder;
use WindowsAzure\Common\ServiceException;   

//$connectionString = "\WindowsAzure\Blob\Internal\IBlob";

// Create blob REST proxy.
$blobRestProxy = ServicesBuilder::getInstance()->createBlobService($connectionString); // the code gets stuck at this line, result is a HTTP 500 error

$content = fopen("C:\Users\Public\Pictures\Sample%20Pictures\Woestijn.jpg", "r");
$blob_name = "newBlob";

try {
    //Upload blob
    $blobRestProxy->createBlockBlob("default", $blob_name, $content);
}
catch(ServiceException $e){
    // Handle exception based on error codes and messages.
    // Error codes and messages are here: 
    // http://msdn.microsoft.com/en-us/library/windowsazure/dd179439.aspx
    $code = $e->getCode();
    $error_message = $e->getMessage();
    echo $code.": ".$error_message."<br />";
}?> 
```

有没有人遇到过类似的问题并设法解决了？

编辑：

我现在缩小了错误搜索的范围。我进入 ServicesBuilder.php 文件，并逐行注释掉，直到页面停止工作。出错所在的行是**$httpClient**，如下所示：

```
public function createBlobService($connectionString)
{
    $settings = StorageServiceSettings::createFromConnectionString(
        $connectionString
    );

    $httpClient    = $this->httpClient();
    $serializer    = $this->serializer();
    $uri           = Utilities::tryAddUrlScheme(
        $settings->getBlobEndpointUri()
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:02:31.940

从我所看到的情况来看，您正在`$connectionString`用这个值填充变量：（`"\WindowsAzure\Blob\Internal\IBlob"`即使它已被评论 - 所以您可能是从其他地方传递它）。如果是这种情况，您将需要更改它。

连接字符串应该是对包含协议、帐户名称和密钥的存储帐户的引用（您可以在门户中找到名称和密钥）：

```
$connectionString = "DefaultEndpointsProtocol=https;AccountName=jeroensaccount;AccountKey=fjmezfjmIOFJEZIOPAFJAZOPIFJAIMO" 
```

# iphone - 如何使用协议objective-c

> ID：13930883
> 
> 赞同：0
> 
> 时间：2012-12-18T10:26:22.700
> 
> 标签：iphone, ios, ios5, inheritance, protocols

我需要将 Picker 选择的值继承到另一个地方。我正在尝试下面的代码，但 null 值即将到来..请检查我哪里出错了。我必须继承传入的字符串值`PickerView`..请检查代码

**选择器1.h**

```
#import <UIKit/UIKit.h>

@protocol pickerDelegate <NSObject>
-(void)didFinishPicking:(NSString *)pickedStr;

@end
@interface
@property(nonatomic,retain)id<pickerDelegate>delegate; 
```

**选择器.m**

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

 string=[NSString stringWithFormat:@"%@",[list objectAtIndex:row]];

 label.text=string;

 [self.delegate didFinishPicking:string];

}

- (void)viewDidLoad
 {
[super viewDidLoad];

list =[[NSMutableArray alloc]init];
[list addObject:@"a"];
[list addObject:@"b"];    

} 
```

**活动_1.h**

```
 #import <UIKit/UIKit.h>
#import "Picker1.h"
@interface Activity_1 : UIViewController<UIApplicationDelegate, pickerDelegate>{

@property(nonatomic,retain)Picker1 *delegate1;
@property (nonatomic,retain)NSString *str;

@end 
```

**活动_1.m**

```
- (void)viewDidLoad
{
[super viewDidLoad];
 **this is how i print the value but value is null**
 NSLog(@"delegate1%@",self.delegate1.string);

delegate1 = [[Picker1 alloc] init];

[delegate1 setDelegate : self];

}

-(void)didFinishPicking:(NSString *)pickedStr
{
[self setStr:pickedStr];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:42:12.030

您在设置委托之前打印出委托的值......所以它将打印空值。您应该在调用 didFinishPicking 方法时打印出您的字符串，因为这是您设置字符串的地方。

```
-(void)didFinishPicking:(NSString *)pickedStr
{
    [self setStr:pickedStr];

    // print the string you have just picked here if you want
    NSLog(@"Picked string: %@",pickedStr);
} 
```

**请注意一方面：**避免任何带有数字的命名约定，例如 Activity_1、Picker1，这是非常糟糕的代码实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:40:51.367

在创建 self.delegate1 之前，您是 NSLogging 委托 请使用以下代码行。

```
delegate1 = [[Picker1 alloc] init];
[delegate1 setDelegate : self]; 
```

并将 NSLog 放入“didFinishPicking”

```
-(void)didFinishPicking:(NSString *)pickedStr
{
 NSLog(@"pickedStr%@", pickedStr);
 [self setStr:pickedStr];
} 
```

# drupal - 访问页面后保存按钮隐藏

> ID：13930884
> 
> 赞同：0
> 
> 时间：2012-12-18T10:26:26.647
> 
> 标签：drupal

我的页面有内容类型我需要将其保存到数据库中，我使用 hook_form_alter 添加了保存按钮，如下所示

```
function customization_form_alter(&$form, &$form_state, $form_id){
  if($form_id == 'media_operator_node_form'){
    $form['buttons']['submit']['#value'] = t('Save');  
  }  
} 
```

问题是：一旦访问页面的保存按钮被隐藏，但是当向下滚动按钮时出现

问题是什么，我该如何解决，所以一旦访问该页面，我就会看到保存按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:42:14.107

Drupal 内容类型默认保存到数据库中。您发布的代码没有添加保存按钮，在我看来它只是将按钮上的文本设置为保存（无论如何，它在内容类型上是默认值）。

听起来您可能对节点页面和节点编辑页面感到困惑，但我不确定。您将不得不更清楚地解释您的问题。

# extjs - ExtJS 功能测试 - 获取 ExtJS 控件的内部元素

> ID：13930886
> 
> 赞同：2
> 
> 时间：2012-12-18T10:26:39.707
> 
> 标签：extjs, widget, functional-testing, uniqueidentifier

我们决定将 Sencha ExtJS 用于我们新产品的客户端，并计划在客户端进行自动化功能测试。我们研究了几种工具，如 Ranorex、Selenium、Telerik Test Studio 等，到目前为止，我们比其他工具更喜欢 Test Studio。无论如何，无论使用哪种工具，我要问的问题都是相关的。

我很想知道获取 extjs 控件的内部元素的推荐方法是什么。为了清楚起见，我将举一个例子。

我有一个数字字段控件，我想测试一下，如果我单击“向上”按钮，字段中的值将增加一个单位。请注意，我确实为数字字段 (id="testDurationHourNumberField") 设置了唯一 ID。number 字段具有以下（简化的）DOM 结构：

```
<table id="testDurationHourNumberField">
<tbody>
    <tr id="testDurationHourNumberField-inputRow">
        <td id="testDurationHourNumberField-labelCell">
            <label id="testDurationHourNumberField-labelEl">Label:</label>
        </td>
        <td id="testDurationHourNumberField-bodyEl">
            <table id="testDurationHourNumberField-triggerWrap">
                <tbody>
                    <tr>
                        <td id="testDurationHourNumberField-inputCell">
                            <input id="testDurationHourNumberField-inputEl">
                        </td>
                        <td>
                            <div role="button" id="ext-gen1211"></div>
                            <div role="button" id="ext-gen1212"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>
</tbody>
</table> 
```

为此，我必须访问输入元素 (id="testDurationHourNumberField-inputEl") 和按钮 (id="ext-gen1211")。访问这两个元素的推荐方式是什么？

到目前为止，我有以下选择：

*   使用 ExtJS 内部 ID - 看起来不太好，因为：
    *   这些是内部 ID，它们不受我的控制，如果我稍后在页面上添加另一个控件，它们可能会改变
    *   似乎对于同一页面，我在不同的浏览器中获得了不同的 ID。例如，在 IE 10 中，我从 Google Chrome 中获得的 ID 中获得了不同的按钮 ID。
*   通过唯一 ID 获取控件并通过了解其内部 DOM 结构或属性来获取内部元素 - 似乎不好，因为：
    *   我宁愿不使用这种方式，因为我不知道当升级到 ExtJS 的下一个版本时，内部 DOM 结构不会改变或某些属性名称会改变，我将不得不更新我创建的测试
    *   例如伪代码：getById('testDurationHourNumberField').getElementByAttributeAndIndex('role=button', 0)

你能告诉我推荐的方法是什么吗？

谢谢，
保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:59:50.890

这就是我在我的项目中的做法：

```
it("should increment the control value", function () {
    var ctrl = Ext.ComponentQuery.query('#age')[0],
        upBtn = Ext.ComponentQuery.query('#upButton')[0],
        curValue = ctrl.getValue();

    upBtn.fireEvent('click');

    expect(ctrl.getValue()).toEqual(curValue + 1);
}); 
```

我用茉莉花。

**更新：**

对于功能测试，您应该阅读以下内容：

1.  [在浏览器中测试 extjs 代码有什么建议，最好是使用 selenium？](https://stackoverflow.com/questions/107314/any-suggestions-for-testing-extjs-code-in-a-browser-preferably-with-selenium) 还有这个：
2.  [http://www.sencha.com/blog/testing-ext-js-ext-gwt-applications-with-selenium](http://www.sencha.com/blog/testing-ext-js-ext-gwt-applications-with-selenium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T15:55:00.010

我知道已经有一段时间了，但我会在这里写下我们决定如何解决这个问题。对于功能测试，我们使用 Telerik TestStudio，为了获取内部元素，我们使用 GetById 方法，其中每个组件的每个 ID 都必须是唯一的。这种方法的主要问题是自动生成的 ID：

*   内部组件的 ID 会根据浏览器获得不同的值
*   内部组件的 ID 可能会在 ExtJs 升级时发生变化
*   在页面上添加其他组件时，内部组件的 ID 可能会发生变化（这种情况经常发生）

为了解决这个问题，我们实现了 ExtJS 类的补丁，以确保内部元素的 ID 是唯一的。

对于我的问题中的数字字段示例，我们已经实现了以下补丁，以确保数字字段的按钮具有在不同浏览器上不会更改的唯一 ID。

```
Ext.define('Waf.patch.extJS411.form.field.Spinner', {
    override: 'Ext.form.field.Spinner',

    getTriggerMarkup: function() {
        var me = this,
            hideTrigger = (me.readOnly || me.hideTrigger);

        me.triggerTpl = '<td style="{triggerStyle}">' +
            '<div class="' + Ext.baseCSSPrefix + 'trigger-index-0 ' + Ext.baseCSSPrefix + 'form-trigger ' + Ext.baseCSSPrefix + 'form-spinner-up"' + 'id="' + me.id + '-buttonUp"' + ' role="button"></div>' +
            '<div class="' + Ext.baseCSSPrefix + 'trigger-index-1 ' + Ext.baseCSSPrefix + 'form-trigger ' + Ext.baseCSSPrefix + 'form-spinner-down"' + 'id="' + me.id + '-buttonDown"' + ' role="button"></div>' +
            '</td>' +
            '</tr>';

        return me.getTpl('triggerTpl').apply({
            triggerStyle: 'width:' + me.triggerWidth + (hideTrigger ? 'px;display:none' : 'px')
        });
    }
}); 
```

我们还为遇到此问题的其他类实施了补丁，因此我们涵盖了大部分用例。补丁不多：

*   Ext.form.field.Spinner
*   Ext.form.field.Trigger
*   扩展面板
*   Ext.view.BoundList
*   Ext.window.MessageBox

问候，保罗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:39:11.380

您可能想查看自动化功能 GUI 测试工具[RIATest](http://www.cogitek.com/riatest/features/technologies/extjs.html)。

ExtJS UI 小部件是 RIATest 中的一等公民。这意味着，与其他 HTML 测试工具不同，当您实际需要使用 ExtJS 组件时，您不需要编写操作 HTML DOM 元素的测试。

RIATest 知道如何忽略 ExtJS 动态生成的 id，但是如果您手动为组件分配 id，该工具*将*使用它们进行识别（参见下面示例中的 #tree2）。

RIATest 中的测试根据 ExtJS UI 小部件运行。

**使用 ExtJS 小部件的 RIATest 脚本示例：**

以下点击带有标签“下一页”的 ExtJS 按钮：

```
ExtButton("Next Page")=>click(); 
```

以下内容将一行从一个 ExtJS 树拖放到另一棵树：

```
ExtRow("Controller.js")=>dragAndDropTo(
    ExtTreePanel("#tree2")->ExtRow("Custom Ext JS")); 
```

这会折叠 ExtJS 框的标题：

```
ExtBox("Feeds")->ExtHeader("FeedsВ")->ExtCollapser()=>click(); 
```

*（以上所有示例代码均来自在 ExtJS 示例应用程序上运行的真实测试脚本）。*

RIATest 还知道何时自动等待 ExtJS AJAX 完成，因此如果您的 UI 进行动态内容下载，测试将自动神奇地等待，直到从服务器接收到数据。

（免责声明：我是 RIATest 团队成员）。

# python - 在 Django admin 中通过 tinymice 使用富文本编辑器

> ID：13930888
> 
> 赞同：3
> 
> 时间：2012-12-18T10:26:41.607
> 
> 标签：python, django

我是 django 新手，正在尝试使用**tinymice_3.5.8**将 django admin 的文本区域替换为富文本编辑器。我在网站的 **urls.py**文件中添加了 tinymice 的 url 模式作为

```
url(r'^tiny_mce/(?P<path>.*)$','django.views.static.serve',
{ 'document_root': 'C:/tinymce_3.5.8/tinymce/jscripts/'}) 
```

并且我已将 django/contrib/admin/templates/admin/ 目录的 change_form.html 文件复制到我的模板目录中，并在文件中添加了以下代码。

```
<script type="text/javascript"
src="C:/tinymce_3.5.8/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
  mode: "textareas",
  theme: "simple"
});
</script> 
```

行后

```
{{media}} 
```

这应该已经用富文本编辑器替换了**Django 站点管理员的旧文本区域 Add flat page**，但没​​有显示任何更改。文本区域保持不变。我也在这个网站上研究过类似的问题，但什么也得不到。希望能得到一些帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:42:56.220

试试这个：[https](https://github.com/aljosa/django-tinymce) ://github.com/aljosa/django-tinymce - 这是一个专门用于 django 的 tinymce 模块。你像这样使用它：

在models.py中：

```
from tinymce.models import HTMLField

class MyModel(models.Model):
    text = HTMLField() 
```

它也适用于 django 管理员。

# ios - CloudFront 和 S3 的端点问题

> ID：13930889
> 
> 赞同：1
> 
> 时间：2012-12-18T10:26:46.273
> 
> 标签：ios, amazon-web-services, amazon-s3, amazon-cloudfront

在我透露创建一个完整的承诺应用程序之前，我正在使用 S3 创建一个当前没有分发 (CloudFront) 的 iOS 应用程序作为测试。在 S3 管理控制台中，我在我居住的新加坡制作了存储桶，因此此演示实际上并不需要 CloudFront。我必须像这样设置一个端点：

```
[s3Client setEndpoint: [AmazonEndpoints s3Endpoint: AP_SOUTHEAST_1]]; 
```

哪个指向新加坡，端点是存储桶需要将数据发送到右侧的地方？（用户在哪里）

所以现在我有两个问题

*   如果我使用 CloudFront，是否需要设置端点？我什至如何在 iOS 中使用 CloudFront，我生成一个签名 URL，然后呢？

*   如果用户在随机国家/地区使用该应用程序，可以说，如果我需要设置（使用 CloudFront），我会将其设置为哪个端点？我会通过语言环境找到他们当前的国家/地区并找到它最接近的端点吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:13:51.123

CloudFront 中的一组文件称为“分发”。当您设置分发时，您指定一个或多个“来源”，这是您为用户提供的文件的规范来源。

在您的情况下，创建一个新分配并将 S3 存储桶指定为源。然后在您的应用程序中，您将其引用为：`http://xxxxxxx.cloudfront.net/hello.png`而不是`http://mybucket.s3.amazonaws.com/hello.png`. Cloudfront 将`hello.png`在有人第一次请求时自动从 S3 存储桶中获取并缓存它。

CloudFront 通过根据网络延迟路由它们来自动（并且几乎是即时地）检测哪个边缘站点离用户最近。您不必自己进行任何这些计算。

我建议您先[阅读我在此处列出的注意事项，](https://stackoverflow.com/questions/13855853/statics-deployment-with-aws-elastic-beanstalk-and-aws-cloudfront/13871011#13871011)然后再在您的应用程序中使用 CloudFront。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-28T21:23:19.653

我同意@jamieb。您应该创建一个新的 Cloudfront 分配并将 S3 存储桶设置为源。然后，您将不再使用 s3 存储桶链接，您现在将使用云端链接查看图像。Cloudfront 将从 S3 中提取图像并将其存储为缓存，无论您确定多久。例如，如果图像将被同一区域的不同人不断查看，您将希望它缓存在该区域的边缘位置，因此当该区域的新用户查找它时，他们会得到图像更快。

# c++ - 如何禁用 Boost 概念检查

> ID：13930894
> 
> 赞同：4
> 
> 时间：2012-12-18T10:26:57.073
> 
> 标签：c++, visual-studio-2008, boost, cpp-netlib

为了在 Windows 下使用 Visual Studio 2008 编译 C++ Net Lib 项目，我需要禁用概念检查（请参阅此线程：[https ://groups.google.com/forum/#!msg/cpp-netlib/G-hM25EnCWA/ gdsHBaVfmggJ](https://groups.google.com/forum/#!msg/cpp-netlib/G-hM25EnCWA/gdsHBaVfmggJ) )

编译在 Release 中有效，但在 Debug 中无效（.cpp 编译失败）

我通过在包含客户端标头之前定义 NDEBUG 来管理标头的编译成功。但是，当链接器想要链接到 Boost.system 库的发布版本时，这会失败：而我正在使用调试。我收到此错误：

6>链接：致命错误LNK1104：无法打开文件'libboost_system-vc90-mt-1_50.lib'

我想用 BOOST_SYSTEM_NO_LIB 防止这种情况，但它仍然想链接到发布版本（我的项目链接到 'libboost_system-vc90-mt-gd-1_50.lib' （调试库））

在包含标题之前是否有一个简单的宏要定义，它将禁用 Boost.ConceptCheck 的东西，就像它在 Release 构建中所做的那样？我没有在 Boost 文档中找到任何信息，也没有在头文件本身中找到任何信息。

非常感谢

盖坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:37:20.043

这是我要做的：

```
#include <boost/concept/assert.hpp>
// redefine concept assert, suppress the warning etc.
#undef BOOST_CONCEPT_ASSERT
#define BOOST_CONCEPT_ASSERT(Model)
#include <boost/concept_check.hpp>

struct not_an_iterator
{};

int main()
{
  BOOST_CONCEPT_ASSERT((InputIterator<not_an_iterator>));
  return 0;
} 
```

这将使concept_assert 什么也不做，但我担心它不会阻止您的链接器错误，这看起来很模糊。

# liferay - Liferay 样品站点定制

> ID：13930905
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:27:49.343
> 
> 标签：liferay, liferay-6

我是liferay的新手。我正在使用 Liferay 6.1.1 CE。

我有一个示例站点，我几乎没有疑问：

1.  liferay中的公共页面和私人页面有什么区别？
2.  如何使用它？我的网站有很多用户。那么每个人都有共同的公共和私人页面吗？我该如何定制它？

我已经浏览了 Liferay 网站上的文档。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:51:46.043

您可以通过[Liferay 6.1 用户指南的](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide "Liferay 6.1 用户指南")[Web 内容管理](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/using-liferay-web-content-management "使用 Liferay Web 内容管理")部分来了解站点。

然后您还可以通过[个性化和自定义](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/drools "个性化和定制")部分，了解用户公共和私人页面。此外，它们与普通站点的公共和私人页面有何不同。

阅读用户指南对于每个 Liferay 开发人员来说都是必须的，信息在一个地方很好地整理，而且各个部分的分类也很好。

现在简要回答您的问题：

> liferay中的公共页面和私人页面有什么区别？

有两种类型：网站页面（公共和私人）和用户页面（公共和私人）

*   **站点页面：**站点（或以前称为社区）的公共页面是任何用户都可以访问的页面，无论用户是否是站点的成员。而私人页面是那些只能由站点成员或全能管理员（超级管理员）的用户访问的页面。
    *   站点公共页面可以理解为办公室的接待区，任何人都可以进入询问或为接待员流口水（*咳咳咳*）:-)。
    *   Site Private页面可以理解为人们实际工作的区域，当然也就是只允许员工进入的区域。
*   **用户页面（或用户个人站点）：**现在任何人都可以访问用户公共页面，但用户私人页面只能由用户访问。
    *   公共页面可以理解为你家的阳台，任何人都可以来见你。
    *   私人页面可以理解为您家中只有家庭成员才能进入的房间（这取决于您想要在里面的人，因为您是 Omni-Admin :-)）

> 如何使用它？

根据您的要求，有多种使用方法。另外我建议玩一下`Control Panel`--> `Sites`-->`Manage Pages`

> 那么每个人都有共同的公共和私人页面吗？我该如何定制它？

如果您希望每个用户都应该在他们的页面中看到不同的内容，那么您就是在谈论用户公共页面。此外，您应该阅读用户指南的[管理](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/administering-liferay-portal)部分以了解用户管理以及用户组以及用户组在用户个人站点中扮演的角色。

定制还取决于 Portlet，如何根据访问它的用户或添加它们的站点来显示不同的内容。

页面或整个站点的外观定制也可以使用[Themes](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7 "开发指南：如何创建主题")来完成。

希望这有助于更好地理解liferay。

# javascript - 当凭据不匹配时阻止登录表单提交（AJAX）（返回 false 不起作用）

> ID：13930914
> 
> 赞同：0
> 
> 时间：2012-12-18T10:28:20.803
> 
> 标签：javascript, ajax, forms, form-submit

这是我的表格：

```
 <form name="loginform" method="POST" action="login" onsubmit="return validateLogin()">            
<div>  User Name  :<input class="input" name="username" type="text" /> </div> 
<div> Password  :<input class="input" name="password" type="password" /> </div>        
<div> id="yaha" style="color:red;font:bold 16px garamond"</div>                         
<input style="font-weight:bold;" type="submit" value="Login" /> 
```

javascript代码如图所示：

```
function validateLogin()
{
var x1=document.forms["loginform"];
if(//validations)
      {
       return false;
      }
 else
{    goajax(x1.username.value,x1.password.value);}        
 }//validate login ends...

var requ = null;

function goajax( u,  p)
{
requ=new XMLHttpRequest();
//code for posting ajax data
requ.onreadystatechange=display;

} 
function display()
{
if(requ.readyState == 4)
{
    if(requ.status == 200)
    {
    var message = requ.responseText;
    alert("message==="+message);
    var x;
    if(message.trim() == "ok")
        {
        var x1=document.forms["loginform"];
        return true;
        }
        else if(message.trim() == "no")
        {
        document.getElementById('yaha').innerHTML="Invalid Username or Password!!!";
        x1.password.value="";
        return false;
        }
        else if(message.trim() == "nv")
        {
        document.getElementById('yaha').innerHTML="Account not Activated";
        return false;
        }
    }     
} 
```

}

**我的问题是**：我正在根据需要从服务器获取响应，但如果出现不希望的响应，即使在“返回 false”之后，表单也会被提交；（见函数 display()）

**请向下滚动到函数 display() 我不希望在消息为“no”或“nv”时提交表单。基本上“return false”不起作用**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:32:27.903

另一种方法是[取消默认事件](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)（在本例中为提交）

像这样：

```
function validateLogin(e)
{
var x1=document.forms["loginform"];
if(//validations)
      {
       e.preventDefault();
       return false;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:42:15.010

我在当前的项目中使用 jQuery 做了很多这样的事情：

$('#form').submit(function () {

call_function_to_validate_and_submit(); 返回假；

});

每当我遇到 javascript 错误（语法或其他）时，即使验证失败，表单也会被提交（就像在没有 ajax 的普通 html 表单中一样）。我的观点是，您可能在那里的某个地方有语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:32:58.623

参见：[jQuery preventDefault();](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://api.jquery.com/event.preventDefault/&ei=BEbQUI_9J4WV0QWw94DwCw&usg=AFQjCNHWzAujRZvCkrcZnoFZi9g6cX38ZA&sig2=MMMKw5FLbmipMqcAkHbLLA&bvm=bv.1355534169,d.d2k "jQuery preventDefault();")

尝试使用 jQuery 发布（如果您在网站中使用它）

# android - facebook-android-sdk 兼容性问题

> ID：13930921
> 
> 赞同：0
> 
> 时间：2012-12-18T10:28:50.770
> 
> 标签：android, facebook, android-layout, android-emulator

我正在使用这个示例应用程序：[https](https://github.com/prajwol/Birthday-Reminder) ://github.com/prajwol/Birthday-Reminder ，他们在其中使用了**旧的 facebook-android-sdk**，但现在他们指向的是最新的 Facebook android SDK 3.0，因为这个示例应用程序有2年前制作，现在我想使用这个应用程序，但我不知道哪个是旧的facebook SDK，我在哪里可以得到那个，或者我是否希望使用**更新的facebook sdk（3.0）**使这个程序可以运行，所以我需要做才能使这个应用程序对我有用。

我收到几个与**The import com.facebook 相关的错误无法解决**

如果我使用有组织的导入，那么它将删除与 facebook 相关的导入，但这不是我想要的，因为我知道导入是正确的，但它们指向新的 facebook - android - sdk 3.0，而应用程序已经在旧的2 年前它支持旧的 sdk，所以**毫无疑问 facebook-android-sdk 兼容性问题在这里造成了问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:32:38.513

你似乎已经解决了你自己的问题。获取新的 SDK 并解决问题。如果项目与新的 SDK 不兼容，那么您必须找到不兼容的部分并修改它们以使其兼容。

如果这太难/不值得，那么放弃示例应用程序并查找适用于较新 SDK 的示例。

# mysql - MySQL条件数据库结构变化

> ID：13930923
> 
> 赞同：1
> 
> 时间：2012-12-18T10:28:54.093
> 
> 标签：mysql, versioning

问题是：我想创建一个条件`CREATE/ALTER`脚本（条件是数据库版本的整数值）。怎么做？似乎 MySQL IF 无济于事。`ALTER`在某些特定条件下，`CREATE/DROP`table 似乎都不起作用。

背景：我想为我的数据库提供版本，所以我创建了一个简单的版本表，其中包含一个数字。随着项目的进行，结构将不断发展，每个更改表/创建表/等。将创建新版本（以及 MySQL 修改脚本）。我的环境很少有数据库的精确副本，我想让它成为数据库自动升级，而不需要任何外部脚本（PHP/Python/等）。

# javascript - Extjs 4.1 选项卡面板不显示数据

> ID：13930927
> 
> 赞同：1
> 
> 时间：2012-12-18T10:29:13.600
> 
> 标签：javascript, extjs, extjs4.1

我是 Extjs 的新手。目前正在为某些应用程序使用 Extjs 4.1.1a。我在我的应用程序中定义了以下选项卡面板。

```
 Ext.require('Ext.tab.*');

    Ext.onReady(function(){

    var tabs2 = Ext.widget('tabpanel', {

    activeTab: 0,
    width: 600,
    height: 250,
    plain: true,

    defaults :{
        autoScroll: true,
        bodyPadding: 10
    },
    items: [{

            title: 'Ajax Tab 1',
            loader: {
                url: 'dynamic.html',
                contentType: 'html',
                autoload: true,
                loadMask: true,
                scripts: true
            },
            listeners: {
                activate: function(tab) {
                    tab.loader.load();
                }
            }
        },{

            title: 'Ajax Tab 2',
            loader: {
                url: 'group_associator.html',
                contentType: 'html',
                autoload: true,
                loadMask: true,
                scripts: true
            },
            listeners: {
                activate: function(tab) {
                    tab.loader.load();
                }
            }

        },
        {

            title: 'Ajax Tab 3',
            loader: {
                url: 'group_disassociator.html',
                contentType: 'html',
                autoload: true,
                loadMask: true,
                scripts: true
            },
            listeners: {
                activate: function(tab) {
                    tab.loader.load();
                }
            }

        }
    ],
    renderTo : Ext.getBody()
 });
 }); 
```

在这里，我在加载程序配置中使用了三个 html 文件。我的问题是在执行时，第一个选项卡工作正常。但是在其他两个选项卡的情况下，即 Ajax Tab 2,Ajax Tab 3，只有一个选项卡可以完美地显示数据。我已经设置了 activeTab=0，所以默认情况下第一个选项卡将处于活动状态。但是如果我选择第二个选项卡，它将正常工作，然后如果我选择第三个选项卡，它将不会显示任何数据。但是，如果我选择第三个选项卡刷新页面后，它将正确显示数据，现在如果我选择第二个选项卡，它将不会显示任何数据。在所有情况下，默认活动选项卡，即 Ajax 选项卡 1 将正确显示数据。因此，每次刷新只有一个选项卡可以完美运行，即 Ajax 选项卡 2 或 Ajax 选项卡 3。

以下是 tabpanel 将呈现到的 html 文件。

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Tabs Example</title>
    <!-- Ext includes -->
    <link rel="stylesheet" type="text/css" href="ext-4.1.1a/resources/css/ext-all.css"    />
    <script type="text/javascript" src="ext-4.1.1a/ext-all.js"></script>

    <!-- Shared example includes -->
    <link rel="stylesheet" type="text/css" href="ext- 4.1.1a/examples/shared/example.css" />

    <!-- Example includes -->
    <link rel="stylesheet" type="text/css" href="tabs.css" />

    <!-- GC -->

    <script type="text/javascript" src="tabs1.js"></script>
    </head>
    <body>

    <div id="tabs1">
    </div>   
    </body>
    </html> 
```

我希望所有三个选项卡都能在选择时完美显示数据。谁能帮我解决这个问题。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:16:40.903

我的错误是在所有用于呈现 JavaScript 文件内容的 HTML 文件中使用相同的 div id。为了解决我的问题，我使我的 div id 独一无二。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:19:11.477

尝试使用 tabchange 事件。那应该行得通。

前任：

```
'tabchange': {
    fn: function(tab) {
        tab.loader.load();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T10:11:15.970

以防万一上述选项不起作用（对我不起作用）..我尝试将'layoutOnTabChange：true'添加到我的Tabpanel，我可以看到内容。

# c++ - 如何根据数组参数项类型重载 IDL 中的函数？

> ID：13930928
> 
> 赞同：0
> 
> 时间：2012-12-18T10:29:18.370
> 
> 标签：c++, com, atl, idl, safearray

假设我在 IDL 中定义了这个函数，如下所示：

```
[propget, id(6), helpstring("property MyArray")]
HRESULT MyArray([out, retval] SAFEARRAY(myEnum)* pVal); 
```

我想为 IDL 中定义的函数创建一个重载，如下所示：

```
[propget, id(7), helpstring("property MyArray")]
HRESULT MyArray([out, retval] SAFEARRAY(BSTR)* pVal); 
```

但是在实现该函数的类的头文件中，原来的声明如下：

```
STDMETHOD(get_InstalledScanningDetectors)(SAFEARRAY** pVal); 
```

因此数组中项目的类型不再是签名的一部分。因为我试图根据函数签名的这种差异创建一个重载函数..我该如何继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:19:28.263

`SAFEARRAY`是 distinct 类型（实际上是嵌入数组相关成员的结构体），其有效元素类型不能是签名的一部分。你可以有一个方法来返回这个或那个数组，或者你可以有两个不同名称的方法，它们都返回数组。

# java - Java - 可比较的强制转换异常

> ID：13930931
> 
> 赞同：-2
> 
> 时间：2012-12-18T10:29:20.773
> 
> 标签：java, classcastexception, comparable

我有这个方法：

```
private SortedMap<String, SpaceObjectImpl> catalog = new TreeMap<String, SpaceObjectImpl>();

public Collection<SpaceObject> getSpaceObjects(){
    SortedSet<SpaceObject> temp = new TreeSet<SpaceObject>(catalog.values());
    return temp;
} 
```

而 compareTo 在这里定义：

```
public int compareTo(SpaceObjectImpl s){
    ....
}

class SpaceObjectImpl implements SpaceObject 
```

当我运行程序时，`ClassCastException`被抛出。知道为什么吗？

错误：

```
SpaceObjectImpl cannot be cast to java.lang.Comparable(in TreeMap) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:43:26.713

`SpaceObjectImpl`必须实施`Comparable<SpaceObjectImpl>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:37:05.580

compareTo 方法在 Comparable 中定义，您的自定义类应该覆盖它以便在 TreeMap 中使用它。请在您的自定义类中实现可比较的接口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:37:40.527

您已经编写了自己的`compareTo()`方法。您需要编写自己的`compareTo()`，但是需要重写，即您的类应该实现[`Comparable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html#compareTo%28T%29)

> **实现此接口**的对象列表（和数组）可以由 Collections.sort（和 Arrays.sort）自动排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T10:39:24.740

所有排序的数据结构/集合，排序是根据它的 compareTo 方法完成的。在您的情况下，对象是用户定义的，因此默认情况下该类中没有 compareTo 方法。您必须实施

```
 Comparable 
```

并根据您的排序标准逻辑覆盖它的 compareTo 方法。

更多信息可以在[http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/找到](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T10:32:21.727

你`SpaceObjectImpl` 必须实现`Comparable`接口。

以下是[mkyong 的一个例子](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)，说明了这个概念：

```
public class Fruit implements Comparable<Fruit>{

    private String fruitName;
    private String fruitDesc;
    private int quantity;

    public Fruit(String fruitName, String fruitDesc, int quantity) {
        super();
        this.fruitName = fruitName;
        this.fruitDesc = fruitDesc;
        this.quantity = quantity;
    }

    public String getFruitName() {
        return fruitName;
    }
    public void setFruitName(String fruitName) {
        this.fruitName = fruitName;
    }
    public String getFruitDesc() {
        return fruitDesc;
    }
    public void setFruitDesc(String fruitDesc) {
        this.fruitDesc = fruitDesc;
    }
    public int getQuantity() {
        return quantity;
    }
    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    public int compareTo(Fruit compareFruit) {

        int compareQuantity = ((Fruit) compareFruit).getQuantity(); 

        //ascending order
        return this.quantity - compareQuantity;

        //descending order
        //return compareQuantity - this.quantity;

    }   
} 
```

在这里，`Fruit`该类实现`Comparable`了类型为 as 的接口，`Fruit`也有`overriden` `compareTo`方法。

# python - wxPython wxBitmapButton with Icon + Label

> ID：13930932
> 
> 赞同：1
> 
> 时间：2012-12-18T10:29:24.273
> 
> 标签：python, button

如何让它工作？我试图创建带有图标和标签的按钮。像这些按钮：

[像这个例子（图片）](http://zetcode.com/img/gui/wxpython/gauge.png)

```
image1 = wx.Image("button_icon.png", wx.BITMAP_TYPE_ANY).ConvertToBitmap()
self.button1 = wx.BitmapButton(self.panel1, id=-1, bitmap=image1,
        pos=(10, 20), size = (200, image1.GetHeight()+5)) 
```

它很好地创建了一些带有图标的按钮。但是，如何在上面添加标签？

我在文档中读到，BitmapButton 继承自具有 SetLabel() 方法的 Button。我试过了

```
self.button1.SetLabel("Continue") 
```

但什么都没有。仅带有图标的按钮。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:39:29.357

在`wx.lib.buttons`您获得`ThemedGenBitmapTextButton`包含图像和文本的按钮的类。该库中有更多按钮类。

# c - 从 Kernighan 和 Ritchie 中删除评论程序

> ID：13930937
> 
> 赞同：1
> 
> 时间：2012-12-18T10:29:36.067
> 
> 标签：c, kernighan-and-ritchie

这是关于 Kernighan 和 Ritchie 中的评论删除程序（编号 1-23 p 34 ANSI eidtion）。以下是我的解决方案。

[http://pastebin.com/Fu9C94fV](http://pastebin.com/Fu9C94fV)

该程序适用于大多数 C 程序，删除注释。但是，在某些注释以多个星号 ( ****** /) 结尾的程序中，它会带来问题（不通读）。一个这样的例子是这个：

[http://pastebin.com/J8EQrwve](http://pastebin.com/J8EQrwve)

然而，它适用于这个程序，尽管它在开头有类似的评论：

[http://pastebin.com/thWKvDS7](http://pastebin.com/thWKvDS7)

那么你认为是什么导致评论删除程序出现这种行为呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:35:33.800

当您点击`*`处于注释状态时，您会读取下一个字符以查看它是否为`/`. 这*会消耗*该字符，因此不会在下一次迭代中检查它。

所以：

```
/*  **/
    12 
```

看到`*`at 1，读取`*`at 2，保持评论模式，然后`continue`s 与`/`. 然而：

```
/* ***/
   123 
```

看到`*`at 2，读取`*`at 2，继续，然后读取`*`at 3 并找到`/`关注并退出评论模式。

# qt - 我应该如何/在哪里定义 C++/Qt 中的自定义模型逻辑？

> ID：13930940
> 
> 赞同：1
> 
> 时间：2012-12-18T10:29:49.933
> 
> 标签：qt, model

我主要是 Python/Django 开发人员，所以我的术语可能有点偏离，所以我找不到这个问题的答案：

**我应该如何/在哪里定义 C++/Qt 中的自定义模型逻辑？**

假设我有一个`Users`带有列的表`date_birth`，我想添加方法`getAge()`，它只是计算用户的年龄。

我会把这个放在哪里？在我看来，创建 QSqlRecord 的子类很合适，但我还没有找到对这种方法的任何引用。

第二：**继承QSql(Relational)?TableModel有什么约定吗？**

我在许多示例中发现了类似的片段：

```
QSqlTableModel *model = new QSqlTableModel(parentObject, database);
model->setTable("employee");
model->setEditStrategy(QSqlTableModel::OnManualSubmit);
model->select();
model->setHeaderData(0, Qt::Horizontal, tr("Name"));
model->setHeaderData(1, Qt::Horizontal, tr("Salary")); 
```

但是在我需要的任何地方定义它似乎是多余的。创建诸如 UserTableModel 之类的子类并在其构造函数中调用所有这些方法是否很常见？同样，我还没有找到任何对它的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:38:27.863

您要实现的是对象/关系映射。

所以这样做，最好不要让对象继承自任何 SQL 类（在任何对象语言中）

您可以创建 2 个类：一个用于您的“员工”，一个工厂对象将通过处理 SQL 来创建该对象：

```
ObjectsFactory *factory = new ObjectsFactory();
Employee e = factory->getEmployee(2423);
int age = e->getAge(); 
```

使用这种解决方案，您的 Employee 类将不依赖于 SQL 类。您甚至可以选择根据任何存储模型创建处理程序。

```
ObjectFactory *factory = new ObjectsFactory(new SQLHandler); 
```

或（更方便测试）

```
ObjectFactory *factory = new ObjectsFactory(new FileHandler);

ObjectFactory *factory = new ObjectsFactory(new MemoryHandler); 
```

我建议你看看[数据访问对象模式](http://en.wikipedia.org/wiki/Data_access_object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:17:48.570

要在 Qt 中创建自己的模型，您应该
1\. 创建一个继承 QSqlTableModel 的类
2\. 如果需要，实现：

```
QVariant data( const QModelIndex& index, int role = Qt::DisplayRole ) const;
int rowCount( const QModelIndex& parent = QModelIndex() ) const; 
```

3.添加您想要的任何方法。
您可以在[这里找到更多信息](http://doc.qt.digia.com/qt/model-view-programming.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T13:41:59.003

我可以为您提供另一种方法，而不是继承，您将使用代理模型将逻辑与数据源分开。

该方法对于数据定义方式的布局变化看起来更加灵活和健壮。有一些文章可以为如何以非常灵活的方式使用模型提供更多好的提示：

[http://lynxline.com/category/models/](http://lynxline.com/category/models/)

# c# - 具有单独的公共登录页面的安全令牌服务

> ID：13930951
> 
> 赞同：0
> 
> 时间：2012-12-18T10:30:15.410
> 
> 标签：c#, wif, sts-securitytokenservice

我从事 STS 和 RP 工作已经有一段时间了。现在我有一个问题，我想要一个单独的 Web 应用程序，它将包含一个登录页面，如果我的应用程序没有联合 cookie，它们将被重定向。请让我知道是否可以使用 . 到目前为止，我已将依赖方重定向到具有单个登录页面和此 FederatedPassiveSignIn 控件的应用程序。现在，当我单击此控件时，它会重定向到我不想要的 STS 登录页面。我想从这里访问并返回请求身份验证的应用程序。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:24:25.837

所以你想写一个STS？

WIF SDK 中有一些简单的模板 - 或者您使用 IdentityServer 作为起点： [http ://thinktecture.github.com/Thinktecture.IdentityServer.v2/](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)

# php - 如何启用登录 dompdf？

> ID：13930953
> 
> 赞同：0
> 
> 时间：2012-12-18T10:30:30.917
> 
> 标签：php, error-logging, dompdf

我在我的 PHP 应用程序中使用 dompdf 生成 PDF 文件。
这是代码：

```
<?php
require_once("dompdf/dompdf_config.inc.php");   
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("XXX.pdf");
return $dompdf;
?> 
```

当我点击下载按钮时；PDF 尝试下载，但最后抛出错误

> C:\Users\xxx\Downloads\xxx.pdf.part 无法保存，因为无法读取源文件。请稍后再试，或联系服务器管理员。

现在我想在 dompdf 库文件中归档错误日志。任何人都可以帮助我如何在 log.htm 文件中创建日志吗？提前致谢。

问候，桑卡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T08:25:35.900

我有同样的问题，try catch 似乎没有捕捉到错误。

我会在文本编辑器中打开损坏的 PDF - 在我的情况下，我看到的是错误报告

`Warning: mb_convert_encoding():`

这应该会给你一个关于如何进行的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:03:00.013

您看到的错误消息在dompdf的[当前源代码](https://github.com/dompdf/dompdf)中不存在。

查看其他错误似乎表明它们*几乎总是* [异常](http://php.net/language.exceptions)。

因此，如果你想捕获错误并记录它，你应该能够将它包装在一个 try 块中，类似于这样：

```
require_once("dompdf/dompdf_config.inc.php");   
try {
    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();
    $dompdf->stream("XXX.pdf");
    return $dompdf;
} catch(Exception $e) {
// Do something here with $e and notify the user of the error in whatever way you see fit
} 
```

如果这没有解决您遇到的错误，请确保您使用的是最新版本。如果这仍然没有帮助，那么该错误完全来自其他地方，您需要在其他地方搜索它。

# c# - 从未知类型的数组创建对象的新实例

> ID：13930955
> 
> 赞同：2
> 
> 时间：2012-12-18T10:30:36.700
> 
> 标签：c#, reflection

我正在尝试对自定义数据结构执行深层复制。我的问题是`object[]`包含我要复制的数据的数组 ( ) 有许多不同的类型 ( `string`, `System.DateTime`, 自定义结构等)。执行以下循环将复制对象的引用，因此对一个对象所做的任何更改都会反映在另一个对象中。

```
for (int i = 0; i < oldItems.Length; ++i)
{
  newItems[i] = oldItems[i];
} 
```

有没有一种通用的方法来创建这些对象的新实例，然后将任何值复制到它们中？

Ps 必须避免使用 3rd 方库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:42:53.443

您可以使用[automapper](http://automapper.org/)（可从 Nuget 获得）来做到这一点：

```
object oldItem = oldItems[i];
Type type = oldItem.GetType();
Mapper.CreateMap(type, type);
// creates new object of same type and copies all values
newItems[i] = Mapper.Map(oldItem, type, type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:51:17.287

假设 Automapper 是不可能的（正如@lazyberezovsky 在他的回答中指出的那样），您可以将其序列化为副本：

```
public object[] Copy(object obj) {
    using (var memoryStream = new MemoryStream()) {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.Serialize(memoryStream, obj);
        memoryStream.Position = 0;

        return (object[])formatter.Deserialize(memoryStream);
    }
}

[Serializable]
class testobj {
    public string Name { get; set; }
}

class Program {
    static object[] list = new object[] { new testobj() { Name = "TEST" } };

    static void Main(string[] args) {

        object[] clonedList = Copy(list);

        (clonedList[0] as testobj).Name = "BLAH";

        Console.WriteLine((list[0] as testobj).Name); // prints "TEST"
        Console.WriteLine((clonedList[0] as testobj).Name); // prints "BLAH"
    }
} 
```

但请注意：这一切都非常低效......当然有更好的方法来做你想做的事情。

# screen-scraping - 如何在一个属性中显示所有抓取的数据？

> ID：13930959
> 
> 赞同：1
> 
> 时间：2012-12-18T10:30:52.550
> 
> 标签：screen-scraping, jruby, web-scraping, htmlunit, jrubyonrails

我正在尝试从此页面解析总价格[http://www.momondo.com/multicity/?Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false#Search =true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false](http://www.momondo.com/multicity/?Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false#Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false)使用 Jruby 和 HtmlUnit。当我使用时，结果很好地显示在控制台中`puts price`

`€96 Total €96 Total €96 Total €109 Total €109 Total €128 Total €128 Total €172 Total €197 Total €197 Total €228 Total €270 Total €270 Total €270 Total €270 Total`

现在我正在尝试更新我进入名为 price 的数据库表属性并显示在视图中的所有值。但是视图只显示`€270 Total`我视图中所有值的最后一个值。问题是什么？

我的代码：

```
desc "Fetch details"
task :fetch_details => :environment do

require 'java';

require 'commons-codec-1.7.jar';
require 'commons-collections-3.2.1.jar';
require 'commons-io-2.4.jar';
require 'commons-lang3-3.1.jar';
require 'commons-logging-1.1.1.jar';
require 'cssparser-0.9.8.jar'
require 'htmlunit-2.11.jar'
require 'htmlunit-core-js-2.11.jar'
require 'httpclient-4.2.2.jar'
require 'httpcore-4.2.2.jar'
require 'httpmime-4.2.2.jar'
require 'jetty-http-8.1.7.v20120910.jar'
require 'jetty-io-8.1.7.v20120910.jar'
require 'jetty-util-8.1.7.v20120910.jar'
require 'jetty-websocket-8.1.7.v20120910.jar'
require 'nekohtml-1.9.17.jar'
require 'sac-1.3.jar'
require 'serializer-2.7.1.jar'
require 'xalan-2.7.1.jar'
require 'xercesImpl-2.10.0.jar'
require 'xml-apis-1.4.01.jar'
require 'open-uri'
require "erb"

include ERB::Util

java_import 'com.gargoylesoftware.htmlunit.WebClient';

wc = WebClient.new;
Product.find_all_by_price(nil).each do |update|
  page = wc.getPage("http://www.momondo.com/multicity/?Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false#Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=20-01-2013&AD=5&DO=false&NA=false");
  sleep(30)
  page.getByXPath('//*[contains(concat( " ", @class, " " ), concat( " ", "total", " " ))]').each do |a|
    price = a.asText
    puts price
    update.update_attribute(:price, price)
  end
end
end 
```

如果我需要澄清任何事情，请告诉我。非常感谢！

# java - 如何在特定点获取 TableView 中的行号？

> ID：13930961
> 
> 赞同：1
> 
> 时间：2012-12-18T10:31:05.847
> 
> 标签：java, tableview, javafx-2, javafx

我`TableView`在 JavaFX 中创建。我想用`Context Menu`鼠标右键显示。所以我正在做如下给出的。

```
 EventHandler event = new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent me) {
            if (me.getButton() == MouseButton.SECONDARY) {
                tableView.getContextMenu().show(tableView, me.getSceneX(), me.getSceneY());
            }
        }
    };
    tableView.addEventHandler(MouseEvent.MOUSE_CLICKED, event); 
```

但我想这样做`Context Menu`应该只有在我点击任何行时才可见`TableView`。即我将如何在特定点获得 TableView 中的行号，这样我`Context Menu`应该只可见，如果我点击任何行`TableView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:12:24.383

I could suggest a bit different solution, if a row number is not obligatively needed.

Each node has a method Node.getChildrenUnmodifiable(), which returns the list of direct subnodes.

Having done a recursive search, using recursive calls of that method for nodes -> subnodes -> subsubnodes etc you can find an object of a class com.sun.javafx.scene.control.skin.VirtualFlow.

That is a Node, and Parent, which is responsible for cells rendering (that is something, which contains scrollBars and shows you cells - content of tableView).

You can call setOnMouseClick(...) and set a handler for it.

# apache - 访问。index.php 的所有内容都在一级。除了我想重定向到的内容外，其他内容都有效

> ID：13930962
> 
> 赞同：0
> 
> 时间：2012-12-18T10:31:07.173
> 
> 标签：apache, .htaccess, redirect

### 情况

我正在尝试将所有流量重定向到根目录上一级的 index.php 文件，例如：

```
lala.com/this/who/
lala.com/this/knew/it
lala.com/this/hello/
lala.com/this/would/be/so/annoying 
```

这和它使用下面定义的规则工作

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /this/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php? [L]
</IfModule> 
```

### 问题

以上工作没有问题，但是......如果我尝试去

```
lala.com/this 
```

我被送回lala.com。有人可以在这里为我提供快速的智慧珍珠。感谢您阅读我的问题

### 试图

我试过以下

```
RewriteCond %{REQUEST_URI} !^/this
RewriteRule ^this - [L,NC]
RewriteCond $1 !^(this) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:03:28.997

这可能是由于 RewriteBase whitch 被定义到 /this/。试试这个修改：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ this/index.php? [L]
</IfModule> 
```

# javascript - 在 javascript/jQuery 中取消带有外部事件的函数

> ID：13930963
> 
> 赞同：3
> 
> 时间：2012-12-18T10:31:10.913
> 
> 标签：javascript, jquery

我有一种情况，当用户下载时，我们会逐步向他们展示越来越高质量的图像。

逻辑如下所示：

3 图像格式：低质量 (5-8kb)、大 (60-80kb)、高分辨率 (150-250kb)。

1.  检查是否缓存了大或高分辨率照片，如果最初显示缓存版本并完成。
2.  如果不加载低质量图像并立即显示给用户。
3.  预缓存大图像并在加载后更改 img.src。
4.  检查用户窗口大小是否超过某个阈值，预缓存高分辨率图像并在加载时更改 img.src。

一切都很漂亮。

然而，在高分辨率下载过程中，如果用户点击转到下一张图片，一切当然会搞砸，因为我们已经设置了在加载前一张高分辨率图片时发生 onload 事件。

本质上，onload 事件发生在用户已经点击进入下一个图像之后，这意味着新图像将被旧图像替换。

我需要做的是能够在用户更改到下一张照片时取消该功能。

该函数看起来像这样：

```
(function(index){
        $(highresimage).imagesLoaded(function(){
                    setTimeout(function(){
                        self.cache.image = $(highresimage).appendTo(self.cache.imagewrap);
                        self.cache.photos[index]['highresloaded'] = true;
                        setTimeout(function(){
                        self.cache.imagewrap.children('img').first().remove();
                        self.cache.image.css({
                            'left':'',
                            'position':'relative'
                        });
                        },10);
                    },200);
        });
})(index); 
```

所以我需要能够以编程方式取消`$(highresimage).imagesLoaded(function(){});`

实现这一目标的最佳方法是什么？

提前致谢。

**编辑：**请注意，在我的示例中，我们实际上是在克隆图像，更改 src，将其添加到 dom，留下几毫秒然后删除旧图像。这归结为 Firefox 中的一个错误，它在更改高分辨率图像的 src 时会导致闪烁。可怕的是，删除丑陋的超时会使 ​​Firefox 用户的体验变得更糟。他们在那里是有原因的。:P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:33:44.787

如果将 保存`setTimeout`在变量中，则可以使用`clearTimeout`取消它。理论上，应该中止图像的加载。

```
var timeout = setTimeout(do_something, 1000); // create

clearTimeout(timeout); // cancel 
```

查看[源代码后`imagesLoaded()`](https://gist.github.com/268257)，我找不到任何可以让您取消该功能的东西，这有点令人遗憾:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:41:00.673

对于给定的图像，您需要跟踪您正在等待的最新图像。然后，当您曾经等待的其他图像完成加载时，您可以查看完成加载的图像是否仍然是您正在等待的图像。如果没有，您只需忽略它已完成加载的事实。如果是这样，您将当前图像替换为您正在等待的图像。

您当前的代码非常混乱（多个计时器）并且使用了一些我们不熟悉的插件，所以我实际上不明白您是如何计时或移动到下一个图像的。但是，您需要在某个地方保持您想要下一张图像的状态，并检查完成加载的图像是否实际上是该图像。这将使您永远不会放置错误的图像。

PS我不明白为什么你的代码中有两个短暂的超时。不需要超时。您应该能够开始加载图像，然后在加载完成时采取行动，而不会超时。

# android - LibGDX - 使用 OpenGL ES 2.0 的透视相机

> ID：13930964
> 
> 赞同：2
> 
> 时间：2012-12-18T10:31:16.393
> 
> 标签：android, 3d, opengl-es-2.0, libgdx, perspectivecamera

我还没有找到任何在 LibGDX（OpenGL ES 2.0）中使用透视相机的例子。如何启动它并在渲染方法中使用它？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:02:04.743

在某种程度上，您可以使用透视相机作为正射相机（设置位置、查看、向上矢量）。一个很大的区别是视口大小（您在屏幕上看到的）由到对象的距离和视场角决定。网上有很多理论，但要开始使用 libgdx，您可以按照这个[示例](http://code.google.com/p/libgdx/wiki/ProjectionViewportCamera)

**编辑：** 提供的示例使用 GL 1.x 我以为您只是不知道如何使用透视相机。你混淆了两个不同的问题。

1.  如何操作相机（因相机类型而异，与 GL 版本无关），
2.  如何应用相机（随 GL 版本而异，与相机类型无关）。

为了完成我的回答，一旦你更新了你的相机 (cam.update) 调用`camera.apply(Gdx.gl10);`你将矩阵提供给你的着色器 - 这将取决于你的着色器，但最简单的情况是这样的：

```
shader.setUniformMatrix("u_modelviewporj_mat", cam.combined); 
```

# android - 验证警报对话框

> ID：13930968
> 
> 赞同：0
> 
> 时间：2012-12-18T10:31:34.430
> 
> 标签：android, sqlite, android-alertdialog

大家好，我正在玩游戏，当玩家完成关卡时，我要求玩家在警报对话框的 EditText 上输入他的名字：

```
AlertDialog.Builder builder = new Builder(this);
        LayoutInflater inflater = getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout

        builder.setView(inflater.inflate(R.layout.dialog_name, null))
        // Add action buttons
               .setPositiveButton(R.string.alertName, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                       playerText = (EditText) ((AlertDialog)dialog).findViewById(R.id.username);
                       if(playerText.getText() != null && playerText.getText().length() != 0)
                           Helper.currentPlayer.setName(playerText.getText().toString());
                       //calculate the score

                       // save in data base
                       PlayerDataSource playerDS = new PlayerDataSource(getApplicationContext());
                       playerDS.open();
                       Helper.currentPlayer = playerDS.createPlayer(Helper.currentPlayer.getName(), Helper.currentPlayer.getScore(),
                               Helper.currentPlayer.levels, Helper.currentPlayer.times, LanguageHelper.div);
                       playerDS.close();
                       saveStmc();
                       mainScene.setChildScene(choicesMenu, false, true, true);

                   }
               })
               .setTitle("Please Enter Your name")
               .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               });
        alert = builder.create(); 
```

当玩家输入他的名字并按**OK（确定按钮）**时，我将检查数据库是否存在该名称，如果存在该名称：**显示 Toast 并且不关闭警报以写入另一个名称。怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:55:11.840

看到这个：

```
AlertDialog.Builder builder = new Builder(this);
        LayoutInflater inflater = getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout

        builder.setView(inflater.inflate(R.layout.dialog_name, null))
        // Add action buttons
               .setPositiveButton(R.string.alertName, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                       playerText = (EditText) ((AlertDialog)dialog).findViewById(R.id.username);
                       if(playerText.getText() != null && playerText.getText().length() != 0)
                           Helper.currentPlayer.setName(playerText.getText().toString());
                       //calculate the score

                       // save in data base
                       PlayerDataSource playerDS = new PlayerDataSource(getApplicationContext());
                       playerDS.open();

                      /////Here check for name in database
                      if (name does not exist)
                      {

                       Helper.currentPlayer = playerDS.createPlayer(Helper.currentPlayer.getName(), Helper.currentPlayer.getScore(),
                               Helper.currentPlayer.levels, Helper.currentPlayer.times, LanguageHelper.div);
                       playerDS.close();
                       saveStmc();
                       mainScene.setChildScene(choicesMenu, false, true, true);
                       builder.dismiss()
                       }
                       else
                       {
                             Toast.makeText(getApplicationContext(), "Enter other name..",
                Toast.LENGTH_SHORT).show();
                       }
                   }
               })
               .setTitle("Please Enter Your name")
               .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               });
        builder.setCanceledOnTouchOutside(false);            
        alert = builder.create();
        builder.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:00:14.267

我找到了解决方案，它基于覆盖`OnClick()`for positive 按钮，`AlertDialog`这是解决方案：

```
 AlertDialog.Builder builder = new Builder(this);
        LayoutInflater inflater = getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout

        builder.setView(inflater.inflate(R.layout.dialog_name, null))

               .setPositiveButton(R.string.alertName, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                   }
               })
               .setTitle("Please Enter Your name");
        builder = builder.setCancelable(false);
        alert = builder.create();

        alert.setOnShowListener(new OnShowListener() {

                @Override
                public void onShow(DialogInterface dialog) {
                    alert = (AlertDialog)dialog;
                     Button b = alert.getButton(AlertDialog.BUTTON_POSITIVE);
                     b.setOnClickListener(new View.OnClickListener() {

                         @Override
                         public void onClick(View view) {
                               playerText = (EditText) ((AlertDialog)alert).findViewById(R.id.username);
                               if(playerText.getText() == null || playerText.getText().length() == 0)
                               {

                                   showToastMsg("Please enter valid name");
                               }
                               else
                               {

                                   if(nameIsExist())
                                   {
                                       showToastMsg("Name already exist!!");
                                   }
                                   else
                                   {
                                       //Do stuff because every this is OK
                                       alert.dismiss();
                                   }

                               }

                         }
                     });
                }
            }); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T10:44:30.280

```
Set the dilaog as cancelable true and overide the onBackPressed() Method if need and 

    AlertDialog.Builder builder = new Builder(this);
    builder.setCancelable(true); 
```

// onBackPressed 当你在对话框中满足你的要求时将它设置为true

```
@Override
public void onBackPressed(){
    if(IsNameInserted)
    super.onBackPressed();
} 
```

# c# - 数据层重构

> ID：13930974
> 
> 赞同：5
> 
> 时间：2012-12-18T10:31:45.487
> 
> 标签：c#, entity-framework

我已经控制了一些实体框架代码，并希望对其进行重构。在此之前，我想检查一下我的想法是否正确，并且我并没有错过实体框架的做事方式。

**示例 1 - 子查询与联接**

在这里，我们在 As 和 Bs 之间存在一对多。除了下面的代码难以阅读之外，它是否也效率低下？

```
from a in dataContext.As
where ((from b in dataContext.Bs
        where b.Text.StartsWith(searchText)
        select b.AId).Distinct()).Contains(a.Id)
select a 
```

例如，使用连接并做这样的事情会更好吗？

```
from a in dataContext.As
where a.Bs.Any(b => b.Text.StartsWith(searchText))
select a 
```

**示例 2 - 显式连接与导航**

在这里，我们在 As 和 Bs 之间存在一对多，在 Bs 和 Cs 之间存在一对多。

```
from a in dataContext.As
join b in dataContext.Bs on b.AId equals a.Id
join c in dataContext.Cs on c.BId equals b.Id
where c.SomeValue equals searchValue
select a 
```

是否有充分的理由使用显式连接而不是浏览数据模型？例如：

```
from a in dataContext.As
where a.Bs.Any(b => b.Cs.Any(c => c.SomeValue == searchValue)
select a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:02:12.227

有时需要使用连接样式和子查询来控制 LINQ 2 SQL 查询的某些方面。这不是这里的情况。“导航”风格是绝对可取的。有时，它甚至会带来性能优势，因为 LINQ to SQL 使用了更智能的 SQL 模式。

我不只是想用“你是对的”来回答，所以让我说我对 LINQ to SQL 有很多经验。我在两个较大的项目中使用它，其中性能至关重要，几乎每个生成的 SQL 语句都经过我的性能测试。因此，这个答案具有一定的权威性，而不仅仅是随机的互联网观点。

# php - 如何在不同的mysql服务器上更新另一个表时自动更新一个表？

> ID：13930975
> 
> 赞同：1
> 
> 时间：2012-12-18T10:31:56.060
> 
> 标签：php, mysql, triggers, cron, sql-update

假设我分别在不同的 mysql 服务器“A”和“B”上有两个数据库“db1”和“db2”。

我想每 6 小时检查一次 'db2' 中的 'table1' 是否有任何更新，然后 'db1' 中的 'table1' 将自动更新。

如何使用触发器或 cron 作业来做到这一点？什么时候会被解雇？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:36:49.917

您可以使用 cron 作业，只需每分钟运行一个 php 文件。

该文件可以检查 db2 中 table1 中的新行（将当前行数保存在文本文件中以进行比较，如果新计数 > 旧计数，则可以更新 db1 中的 table1。

简单的

但是@Charles 在评论中说的mysql复制会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:33:45.270

我接受了 kutF 的回答，并在您运行该程序后，在 mysql 的表创建中使用关键字 CASCADE。因此，如果您更新父表，则子表也会更新

```
CREATE TABLE parent
(
par_id INT NOT NULL,
PRIMARY KEY (par_id)
) TYPE = INNODB;

CREATE TABLE child
(
par_id INT NOT NULL,
child_id INT NOT NULL,
PRIMARY KEY (child_id),
FOREIGN KEY (par_id) REFERENCES parent (par_id) ON DELETE CASCADE
) TYPE = INNODB; 
```

# matlab - Java 3D：场景图从某些查看位置消失

> ID：13930979
> 
> 赞同：3
> 
> 时间：2012-12-18T10:32:10.570
> 
> 标签：matlab, 3d, flicker, java-3d

我为 MATLAB 编写了一个 JAVA-3D 扩展，以便能够以良好的性能进行 3D 绘图。我现在可以画线、点等。

但是如果你运行我的程序——即使在 main 中加载了几个对象——从某些查看位置一切都会消失。

如果任何熟悉 Java 3D 的人可以帮助我，我会非常高兴。从它工作的那一刻起，我计划在 Mathworkscentral 上发布它，包括感谢所有帮助解决问题的人。这是代码：

```
import com.sun.j3d.utils.behaviors.vp.*;
import java.awt.BorderLayout;
import java.awt.event.*;
import java.awt.GraphicsConfiguration;
import com.sun.j3d.utils.universe.*;
import javax.media.j3d.*;
import javax.swing.JFrame;
import javax.vecmath.*;

public class scatterJ3D extends JFrame {
    /**
     * 
     */
    private static final long serialVersionUID = 8657880087849824536L;

    public SimpleUniverse MyUniverse;
    BoundingSphere bounds;

    public scatterJ3D(int WindowWidth, int WindowHeight, String Title) {

        // Make sure MATLAB is not closed when GUI is closed:
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        addWindowListener(new WindowAdapter() {
            public void windowClosed(WindowEvent e) {
                dispose();
            }
        });

        // Launch and init GUI
        setTitle(Title);
        setSize(WindowWidth, WindowHeight);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout());
        GraphicsConfiguration config = SimpleUniverse
                .getPreferredConfiguration();
        Canvas3D c = new Canvas3D(config);
        c.setSize(WindowWidth, WindowHeight);
        c.setDoubleBufferEnable(true);
        add("Center", c);

        // Create MyUniverse
        MyUniverse = new SimpleUniverse(c);

        // Init Bounds
        bounds = new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 100.0);

        // Enable Mouse rotation - new Way
        OrbitBehavior orbit = new OrbitBehavior(c, OrbitBehavior.REVERSE_ALL);
        // Option vertikales Drehen verhindern:
        // orbit.setRotYFactor(0.0f); 
        orbit.setSchedulingBounds(bounds);

        // Create Viewing Platform
        ViewingPlatform vp = MyUniverse.getViewingPlatform();
        vp.setViewPlatformBehavior(orbit);

        MyUniverse.getViewingPlatform().setNominalViewingTransform();

        // Set near Plane clipping
        View myview = c.getView();
        myview.setFrontClipDistance(0.0f);
        myview.setBackClipDistance(100.0f);
        myview.setVisibilityPolicy(View.VISIBILITY_DRAW_ALL);

    }

    public void setView(String Mode) {

        ViewingPlatform vp = MyUniverse.getViewingPlatform();
        // Set the user's initial viewpoint using lookAt()
        TransformGroup vpTG = vp.getViewPlatformTransform();
        Transform3D t3d = new Transform3D();
        vpTG.getTransform(t3d);
        // lookAt Arguments are: viewer position, where looking, up direction
        if (Mode.compareToIgnoreCase("Lab") == 0) {
            System.out.println("View set to Lab Mode!");
            t3d.lookAt(new Point3d(0.0f, 0.0f, -2.0f), new Point3d(0.0f, 0.0f,
                    0.0f), new Vector3d(1.0, 0.0, 0.0));
        } else if (Mode.compareToIgnoreCase("RGB") == 0) {
            System.out.println("View set to Lab Mode!");
            t3d.lookAt(new Point3d(3.0f, -1.0f, -2.0f), new Point3d(0.0f, 0.0f,
                    0.0f), new Vector3d(1.0, 1.0, 1.0));
        } else {
            System.out
                    .println("ERROR --> View can only be set to RGB or Lab Mode!");
        }
        t3d.invert();
        vpTG.setTransform(t3d);
    }

    public void setView(float viewerPosition[],float lookAt[], float upVector[]) {
        // Convert MATLAB float to Java Data Types
        Point3d JviewerPosition = new Point3d(viewerPosition[0], viewerPosition[1], viewerPosition[2]);
        Point3d JlookAt = new Point3d(lookAt[0], lookAt[1], lookAt[2]);
        Vector3d JupVector = new Vector3d(upVector[0], upVector[1], upVector[2]);

        ViewingPlatform vp = MyUniverse.getViewingPlatform();
        // Set the user's initial viewpoint using lookAt()
        TransformGroup vpTG = vp.getViewPlatformTransform();
        Transform3D t3d = new Transform3D();
        vpTG.getTransform(t3d);

        // Set LookAt to input Values
        t3d.lookAt(JviewerPosition, JlookAt, JupVector);
        t3d.invert();
        vpTG.setTransform(t3d);
    }

    public Background setBackgroundColor(float r, float g, float b) {
        // Create BranchGroup MyRoot
        BranchGroup MyRoot = new BranchGroup();

        // Set the background color
        Background back = new Background(r, g, b);
        back.setApplicationBounds(bounds);
        back.setCapability(Background.ALLOW_COLOR_WRITE);

        // System.out.println("Hier komma noch hin");
        MyRoot.addChild(back);
        MyRoot.compile();
        MyUniverse.addBranchGraph(MyRoot);
        return back;
    }

    // public Shape3D createPoints(float Coords[][], float Colors[][],int pointsize, float pivot[])
    public PointArray createPoints(float Coords[][], float Colors[][],
            int pointsize, float pivot[])
    {

        // Convert MATLAB float to Java Data Types
        Vector3f Jpivot = new Vector3f(pivot[0], pivot[1], pivot[2]);
        Point3f Jcoords[] = new Point3f[Coords.length];
        Color4f Jcolors[] = new Color4f[Colors.length];

        for (int i = 0; i < Coords.length; i++) {
            Jcoords[i] = new Point3f(Coords[i][0], Coords[i][1], Coords[i][2]);
            // x-Achse zeigt nach oben, y-Achse nach rechts:
            Jcolors[i] = new Color4f(Colors[i][0], Colors[i][1], Colors[i][2],
                    Colors[i][3]);
        }

        // set up the appearance to make large, transparent, antialiased points
        Appearance app = new Appearance();
        // increase the size of each point and turn on AA
        // PointAttributes pa = new PointAttributes(3.0f, true);
        // app.setPointAttributes(pa);
        // set up transparency
        TransparencyAttributes ta = new TransparencyAttributes();
        ta.setTransparencyMode(TransparencyAttributes.NICEST);
        ta.setTransparency(0.5f); // used if color is not COLOR_4
        app.setTransparencyAttributes(ta);

        PointArray pointCloud = new PointArray(Jcoords.length,
                PointArray.COORDINATES | PointArray.COLOR_4);
        pointCloud.setCoordinates(0, Jcoords);
        pointCloud.setColors(0, Jcolors);
        pointCloud.setCapability(PointArray.ALLOW_COORDINATE_WRITE);
        // Point size 10
        PointAttributes pa = new PointAttributes(pointsize, true);
        app.setPointAttributes(pa);
        // Make Shape
        Shape3D pointCloudShape = new Shape3D(pointCloud, app);

        // Create BranchGroup MyRoot
        BranchGroup MyRoot = new BranchGroup();
        Transform3D zTrans = new Transform3D();
        // zTrans.set(new Vector3f(0.0f, 0.0f, -1.0f));
        Jpivot.negate();
        zTrans.set(Jpivot);
        TransformGroup objTrans = new TransformGroup(zTrans);
        objTrans.addChild(pointCloudShape);
        MyRoot.addChild(objTrans);

        // Content-Branch optimieren und zurueckgeben
        MyRoot.compile();
        MyUniverse.addBranchGraph(MyRoot);

        //return pointCloudShape;
        return pointCloud;
    }

    //public Shape3D movePoints(Shape3D pointCloudShape, float Coords[][]) {
    public PointArray movePoints(PointArray pointCloud, float Coords[][]) {

        // Convert MATLAB float to Java Data Types
        Point3f Jcoords[] = new Point3f[Coords.length];

        for (int i = 0; i < Coords.length; i++) {
            Jcoords[i] = new Point3f(Coords[i][0], Coords[i][1], Coords[i][2]);
        }

        // return pointCloudShape;
        return pointCloud;
    }

    public Shape3D createLines(float fromCoords[][], float toCoords[][],
            float Colors[][], float linesize, float pivot[]) {

        // Convert MATLAB float to Java Data Types
        Vector3f Jpivot = new Vector3f(pivot[0], pivot[1], pivot[2]);
        Point3f JCoords[] = new Point3f[toCoords.length * 2];
        Color4f JColors[] = new Color4f[Colors.length * 2];

        for (int i = 0; i < fromCoords.length; i++) {
            JCoords[i * 2] = new Point3f(fromCoords[i][0], fromCoords[i][1],
                    fromCoords[i][2]);
            JCoords[i * 2 + 1] = new Point3f(toCoords[i][0], toCoords[i][1],
                    toCoords[i][2]);
            // x-Achse zeigt nach oben, y-Achse nach rechts:
            JColors[i * 2] = new Color4f(Colors[i][0], Colors[i][1],
                    Colors[i][2], Colors[i][3]);
            JColors[i * 2 + 1] = new Color4f(Colors[i][0], Colors[i][1],
                    Colors[i][2], Colors[i][3]);
        }

        // Set Appearance
        Appearance app = new Appearance();
        // // Transparency
        TransparencyAttributes ta = new TransparencyAttributes();
        ta.setTransparencyMode(TransparencyAttributes.NICEST);
        ta.setTransparency(1.0f); // used if color is not COLOR_4
        app.setTransparencyAttributes(ta);
        // // SetLinesize and Pattern (SOLID, DASH, DOT)
        LineAttributes la = new LineAttributes(linesize,
                LineAttributes.PATTERN_SOLID, true);
        app.setLineAttributes(la);

        // Create Line Array
        LineArray dot = new LineArray(JCoords.length, LineArray.COORDINATES
                | LineArray.COLOR_4);
        // System.out.println(JCoords[0]);
        dot.setCoordinates(0, JCoords, 0, JCoords.length);
        dot.setColors(0, JColors, 0, JColors.length);

        // Make Shape
        Shape3D dotShape = new Shape3D(dot, app);

        // Create BranchGroup MyRoot
        BranchGroup MyRoot = new BranchGroup();
        Transform3D zTrans = new Transform3D();

        Jpivot.negate(); // move Object Pivot to Universe(0,0,0)
        zTrans.set(Jpivot);
        TransformGroup objTrans = new TransformGroup(zTrans);
        objTrans.addChild(dotShape);
        MyRoot.addChild(objTrans);

        // Content-Branch optimieren und zurueckgeben
        MyRoot.compile();
        MyUniverse.addBranchGraph(MyRoot);
        return dotShape;
    }

    public static void main(String[] args) {

        // Init some Values
        float colors[][] = new float[8][4];
        float coords[][] = new float[8][3];

        colors[0][0] = 0.0f; colors[0][1] = 0.0f; colors[0][2] = 0.0f; colors[0][3] = 1.0f;
        colors[1][0] = 1.0f; colors[1][1] = 0.0f; colors[1][2] = 0.0f; colors[1][3] = 1.0f;
        colors[2][0] = 0.0f; colors[2][1] = 1.0f; colors[2][2] = 0.0f; colors[2][3] = 1.0f;
        colors[3][0] = 0.0f; colors[3][1] = 0.0f; colors[3][2] = 1.0f; colors[3][3] = 1.0f;
        colors[4][0] = 1.0f; colors[4][1] = 1.0f; colors[4][2] = 0.0f; colors[4][3] = 1.0f;
        colors[5][0] = 0.0f; colors[5][1] = 1.0f; colors[5][2] = 1.0f; colors[5][3] = 1.0f;
        colors[6][0] = 1.0f; colors[6][1] = 0.0f; colors[6][2] = 1.0f; colors[6][3] = 1.0f;
        colors[7][0] = 1.0f; colors[7][1] = 1.0f; colors[7][2] = 1.0f; colors[7][3] = 1.0f;

        coords[0][0] = 0.0f; coords[0][1] = 0.0f; coords[0][2] = 0.0f;
        coords[1][0] = 1.0f; coords[1][1] = 0.0f; coords[1][2] = 0.0f;
        coords[2][0] = 0.0f; coords[2][1] = 1.0f; coords[2][2] = 0.0f;
        coords[3][0] = 0.0f; coords[3][1] = 0.0f; coords[3][2] = 1.0f;
        coords[4][0] = 1.0f; coords[4][1] = 1.0f; coords[4][2] = 0.0f;
        coords[5][0] = 0.0f; coords[5][1] = 1.0f; coords[5][2] = 1.0f;
        coords[6][0] = 1.0f; coords[6][1] = 0.0f; coords[6][2] = 1.0f;
        coords[7][0] = 1.0f; coords[7][1] = 1.0f; coords[7][2] = 1.0f;

        float pivot[] = new float[3];
        pivot[0] = 0.5f; pivot[1] = 0.5f; pivot[2] = 0.5f;
        // Create Window
        scatterJ3D MyGFX = new scatterJ3D(800, 600, "Trallala");
        MyGFX.setVisible(true);

        // Load Points
        PointArray MyPoints1 = MyGFX.createPoints(coords, colors, 15, pivot);

        // Init Values for Lines
        float lscoords[][] = new float[4][3];
        lscoords[0][0] = 0.0f;lscoords[0][1] = 0.0f;lscoords[0][2] = 0.0f;
        lscoords[1][0] = 0.0f;lscoords[1][1] = 0.0f;lscoords[1][2] = 0.0f;
        lscoords[2][0] = 0.0f;lscoords[2][1] = 0.0f;lscoords[2][2] = 0.0f;
        lscoords[3][0] = 0.0f;lscoords[3][1] = 0.0f;lscoords[3][2] = 0.0f;

        float ldcoords[][] = new float[4][3];
        ldcoords[0][0] = 1.5f;ldcoords[0][1] = 0.0f;ldcoords[0][2] = 0.0f;
        ldcoords[1][0] = 0.0f;ldcoords[1][1] = 1.5f;ldcoords[1][2] = 0.0f;
        ldcoords[2][0] = 0.0f;ldcoords[2][1] = 0.0f;ldcoords[2][2] = 1.5f;
        ldcoords[3][0] = 1.0f;ldcoords[3][1] = 1.0f;ldcoords[3][2] = 1.0f;

        float lcolors[][] = new float[4][4];
        lcolors[0][0] = 1.0f;lcolors[0][1] = 0.0f;lcolors[0][2] = 0.0f;lcolors[0][3] = 1.0f;
        lcolors[1][0] = 0.0f;lcolors[1][1] = 1.0f;lcolors[1][2] = 0.0f;lcolors[1][3] = 1.0f;
        lcolors[2][0] = 0.2f;lcolors[2][1] = 0.2f;lcolors[2][2] = 1.0f;lcolors[2][3] = 1.0f;
        lcolors[3][0] = 1.0f;lcolors[3][1] = 1.0f;lcolors[3][2] = 1.0f;lcolors[3][3] = 1.0f;

        // Load Lines
        MyGFX.createLines(lscoords, ldcoords, lcolors, 2, pivot);

        // Set Background color
        MyGFX.setBackgroundColor(0.5f, 0.5f, 0.5f);
        MyGFX.setView("rgb");

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:19:57.660

根据 View 的 javadoc， “**前剪辑距离**必须大于 0.0”。在渲染到屏幕窗口的情况下，我更喜欢“VIRTUAL_EYE”**剪辑策略**。

将**可见性策略**从默认状态“VISIBILITY_DRAW_VISIBLE”更改为“VISIBILITY_DRAW_ALL”可能对您的程序没有影响。当使用 RenderingAttributes 并且根据“setVisible(boolean visible)”禁用可见性时，这是相关的。

通过以下更改，您的程序运行良好：

```
// Set near Plane clipping
View myview = c.getView();
myview.setFrontClipDistance(0.1f); // was 0.0f
myview.setBackClipDistance(100.0f);
//myview.setVisibilityPolicy(View.VISIBILITY_DRAW_ALL);
myview.setBackClipPolicy(View.VIRTUAL_EYE);
myview.setFrontClipPolicy(View.VIRTUAL_EYE); 
```

八月

# javascript - JavaScript 评估替代

> ID：13930980
> 
> 赞同：0
> 
> 时间：2012-12-18T10:32:11.570
> 
> 标签：javascript, scope, this

我有一个调用对象：

```
var callingObj = { fun: myroot.core.function1,
                   opts: { one: "abc",
                           two: "car",
                           three: "this.myattr1" } }; 
```

稍后，应该调用“fun”属性的函数。此函数调用的参数应来自属性“opts”。非常重要的是，变量“three”在调用函数时应该具有 this.myattr1 的值！

我知道我可以做这样的事情：

```
// inside a for loop which is processing the opts attributes
if (attrValue.indexOf("this.") == 0) { 
  value = eval(attrValue);​​​​​​​​​​   
  paramsObj[attr] = value;
  // instead of eval I could use
  helpval = attrValue.substring(5);
  value = this[helpval];
  paramsObj[attr] = value;
}
else {
  paramsObj[attr] = attrValue;
} 
```

但是有没有可能的实现，我不必在“attrValue”中检查和搜索“this”并对此做出反应？

感谢您提前提供任何帮助。

更新： attrValue 在这种情况下是“abc”、“car”或“this.myattr1”。paramsObj 是函数调用的参数对象。

我已将 this.myattr1 放在一个字符串中，因为我不知道有任何其他可能说“这个，但稍后再说”。

这和 myroot.core.function1 不一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:00:28.583

像这样的东西可能会起作用：

```
var callingObj = { 
    fun: myroot.core.function1,
    opts: [
        {value: "abc"},         // `value` for literals
        {value: "car"},
        {link: "myattr1"}       // `link` for local vars on `this`
    ]
}; 
```

正在使用：

```
// resolve args:
var opts = callingObj.opts,
    args = [],
    i = 0,
    max = opts.length;

for (; i < max; i++) {
    args.push(opts[i].link ? this[opts[i].link] : opts[i].value);
}

// apply with local scope
var result = callingObj.fun.apply(this, args); 
```

这适用于需要 3 个参数而不是单个`Object`参数的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:10:35.597

您可以使用 jQuery 的[代理](http://api.jquery.com/jQuery.proxy/)功能之类的东西来做您需要的事情。你的解释很好 -`this`但在以后的时间和另一个范围内。

```
var callingObj = { 
    fun: myroot.core.function1,
    opts: { one: "abc",
            two: "car",},
    getVarCallback: $.proxy(this, 'getAttr1'),
}; 
```

因此，我们不是像现在一样传递参数，而是创建一个`proxy`知道函数范围`this`的函数，以便稍后调用该函数。

函数 getAttr1 只会从定义它的任何对象返回 myAttr1 的当前值。

然后调用该函数，只需执行以下操作：

```
var currentValue = callingObject.getVarCallback();

callingObj.fun(
    callingObj.opts.one,
    callingObj.opts.two,
    currentValue
); 
```

这是一种非常干净的方式来做你所追求的。您也可以通过将其设置为自己来执行等效操作：

var callingObj = { fun: myroot.core.function1, opts: { one: "abc", two: "car",}, caller: this, attrFunctionName: 'getAttr1'), };

然后调用它：

```
var attrFunction = callingObject.attrFunctionName;

var currentValue = callingObject.caller.attrFunction(); 
```

然而 jQuery 代理是一种非常干净的方式，因为处理回调的函数不必知道它使用的数据是来自对象还是来自普通函数，这使得代码成为更易于维护。

# java - 瓷砖的基本布局

> ID：13930982
> 
> 赞同：0
> 
> 时间：2012-12-18T10:32:18.560
> 
> 标签：java, tiles

如果我没有放置布局属性并尝试使用它们会怎样。就像在下面的示例中一样，我没有在其中定义 body `<put-attribute name="body" value="" />`，`baseLayout`但我在其中使用它`<definition name="login"`如果在任何其他定义中使用它，是否有必要在 baaselayout 中定义“body”？

```
<definition name="baseLayout" template="/WEB-INF/jsp/layout.jsp">
    <put-attribute name="title" value="" />
    <put-attribute name="header" value="/WEB-INF/jsp/header.jsp" />
    <put-attribute name="navigation" value="/WEB-INF/jsp/navigation.jsp" />
    <put-attribute name="footer" value="/WEB-INF/jsp/footer.jsp" />
</definition>

<definition name="login" extends="baseLayout">
    <put-attribute name="title" value="Login" />
    <put-attribute name="header" value="/WEB-INF/jsp/loginHeader.jsp" />
    <put-attribute name="body" value="/WEB-INF/jsp/login.jsp" />
    <put-attribute name="footer" value="/WEB-INF/jsp/footer.jsp" />
</definition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:19:21.983

在这种情况下，它不是。使用“模板”属性，您总是在创建一个新布局。查看级联布局定义的“扩展”属性。

# php - NFS 共享上的“stat failed”问题

> ID：13930988
> 
> 赞同：1
> 
> 时间：2012-12-18T10:32:24.270
> 
> 标签：php, linux, nfs, stat

在生产服务器上，我们有一个带有 NFS 的挂载点：

```
192.168.160.5:/var/www on /var/www type nfs (rw,sync,noatime,intr,soft,timeo=30,rsize=32768,wsize=32768,intr,soft,timeo=30,rsize=32768,wsize=32768,addr=192.168.160.5) 
```

我们有 2 台机器以这种方式安装，但最近我们遇到了奇怪的问题。例如，以下脚本：

```
clearstatcache();
if ( !file_exists($file_path) ) {
    return false;
}
//calc time
$mtime = filemtime($file_path); 
```

给出错误：

> filemtime() [function.filemtime]： 第 66 行 /var/www/XXX.module 中 /var/www/XXX/954340789.2319_.html 的**统计失败。**

我无法随时重现此错误，这意味着它是随机发生的。

有什么建议可以尝试解决这个问题吗？

更多信息：

*   所有服务器都是 Debian 6.0.5 (Squeeze)
*   内核 2.6.32-5-amd64
*   PHP 5.3.3-7+squeeze9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:58:31.467

当然……Linux内核日志可以给你很多信息……:O

```
cat /var/log/messages
Jan 29 08:50:16 XXX kernel: : [21599205.989424] nfs: server 192.168.160.53 not responding, timed out
Jan 29 08:50:16 XXX kernel: : [21599206.093387] nfs: server 192.168.160.53 not responding, timed out
Jan 29 08:50:17 XXX kernel: : [21599206.461316] nfs: server 192.168.160.53 not responding, timed out 
```

我不会删除这个问题，它可能会帮助其他人......

# c# - 如何在 Windows RT 中维护 Wifi 连接状态？

> ID：13930993
> 
> 赞同：1
> 
> 时间：2012-12-18T10:32:30.617
> 
> 标签：c#, networking, windows-8, alljoyn

我正在开发一个`Windows RT app`. ***自从***我实施`Qualcomm's Alljoyn library`.
如果连接状态发生变化，则 p2p 连接将被终止。

我怎样才能保持某种状态，例如**`Android's WIFI_MODE_FULL`**. 我浏览了 MSDN，但找不到任何启示。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:27:59.757

目前没有直接的方法可以做到这一点，但你可以做一个解决方法。与 WP7 相同：从服务器流式传输一个空的 mp3 文件。这样，媒体播放器将负责保持 Wi-Fi 开启，但会消耗更多电量。

# php - 当列不存在时，查询中的“列” IS NOT NULL 不会引发错误

> ID：13930995
> 
> 赞同：2
> 
> 时间：2012-12-18T10:32:34.177
> 
> 标签：php, sqlite, laravel, notnull

在我的 PHP 单元测试中，我使用的是 SQLite 内存数据库，其中包含下表：

```
CREATE TABLE "battlegroup_request" (
  "id" INTEGER NULL PRIMARY KEY AUTOINCREMENT,
  "battlegroupID" INTEGER NULL,
  "inviterID" INTEGER NULL,
  "inviteeID" INTEGER NULL
) 
```

当我使用两个整数绑定执行以下查询时；

```
SELECT *
FROM "battlegroup_request"
WHERE "inviteeid" = ? AND
  "inviter" IS NOT NULL AND
  "battlegroupid" = ?
LIMIT 1 
```

该查询返回一个结果，但我希望它会引发错误，因为该列`inviter`不存在。这是 SQLite 的预期行为吗？难道我做错了什么？

我正在使用 PDO，连接创建如下：

```
new PDO(
    'sqlite::memory:',
    null,
    null,
    array(
        PDO::ATTR_CASE => PDO::CASE_LOWER,
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_ORACLE_NULLS => PDO::NULL_NATURAL,
        PDO::ATTR_STRINGIFY_FETCHES => false,
        PDO::ATTR_EMULATE_PREPARES => false,
    )
); 
```

（这些选项是[Laravel](http://www.laravel.com/)的默认选项，也就是我们正在使用的框架。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:53:05.050

如果你使用类似的东西：

```
SELECT "inviter" IS NOT NULL FROM battlegroup_request 
```

`inviter`如果列不存在，它将返回 TRUE ，因为 SQLite 将`"inviter"`简单地视为字符串值（当然它不在`NULL`这里）。

但是，如果您删除双引号：

```
SELECT inviter IS NOT NULL FROM battlegroup_request 
```

`inviter`如果列不存在，它将引发异常。

**编辑**：使用反引号还强制 SQLite 将其视为名称（不是字符串）：

```
SELECT `inviter` IS NOT NULL FROM battlegroup_request 
```

`inviter`如果列不存在，将引发异常。

# android - 来自 Amazon s3 的 Android 照片库

> ID：13930997
> 
> 赞同：1
> 
> 时间：2012-12-18T10:32:34.597
> 
> 标签：android

我的目标是创建一个 Android 应用程序，允许我从我的 Amazon 实例中收集图像，然后像照片库一样水平滚动它们。

我目前有一个滚动浏览片段的应用程序，但我不确定如何将图像视图放置在这些片段中

我对 Android 比较陌生，所以想知道是否有任何可用的库可以帮助完成这项任务？或者有没有办法从实例下载图像，将它们放在图像视图中，然后将它们附加到片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T02:31:26.543

[1) 在此处](http://aws.amazon.com/sdkforandroid/)下载 Amazon AWS 开发工具包。将 aws-android-sdk jar lib 文件添加到您的项目中。

2）去下载[这个库](http://commons.apache.org/proper/commons-io//download_io.cgi)。也将其添加到您的项目中。IOUtils 将帮助轻松检索字节数组。

3) 从 AWS 获取您的安全凭证并将它们作为常量放入您的代码中。

4) 像 SDK 示例那样初始化 AmazonS3Client：

```
private AmazonS3Client s3Client = new AmazonS3Client(
            new BasicAWSCredentials(AWS_KEY,
                    AWS_SECRET)); 
```

5) 创建一个 AsyncTask 子类以在一个单独的线程中管理下载。如果您不熟悉该课程，请在[此处了解更多信息。](http://developer.android.com/reference/android/os/AsyncTask.html)

在 doInBackground 方法中，如果需要获取要检索的图像列表，可以获取存储桶中的文件列表，并检查键：

```
ObjectListing objectListing = s3Client.listObjects(new ListObjectsRequest().withBucketName(<your bucket name>));
List<S3ObjectSummary> objectSummaries = objectListing.getObjectSummaries();
for (S3ObjectSummary summary : objectSummaries) {
    String key = summary.getKey();
    // do something with the key
} 
```

6) 然后，添加这段代码以下载字节并将它们放入 Bitmap 对象中：

```
S3ObjectInputStream content = s3Client.getObject(<your bucket name>, <the key of the targeted file>).getObjectContent();
byte[] bytes = IOUtils.toByteArray(content);
Bitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length); 
```

7）可能在 onPostExecute 或从中调用的东西中，使用 imageView.setImageBitmap(bitmap) 将生成的位图添加到您的 ImageView；

# javascript - 在 Smarty 中调用 JS 函数时出现“未终止的字符串文字”错误

> ID：13930998
> 
> 赞同：1
> 
> 时间：2012-12-18T10:32:35.613
> 
> 标签：javascript, smarty

当我尝试从 Smarty 页面调用 Javascript 函数时出现此错误。我知道这个错误通常是什么 - 但我不明白为什么会在这种情况下发生。

以下列方式调用引发错误的函数：

```
<a href='#' onClick="showActualSize({$id_product},'{$realsize|escape:'htmlall'}');">Actual Size</a> 
```

在这种情况下，变量具有以下值；

$id_product = 544; $realsize = "英制：LR14 公制：MN1400";

我曾经`escape:'htmlall'`转义可能出现的任何特殊字符，`$realsize`但如您所见，此示例中没有任何特殊字符。

但是，当我查看页面源代码时，`$realsize`变量中似乎有新行，因为源代码如下所示：

```
<li><a href='#' onClick="showActualSize(544,'Imperial: LR14
Metric: MN1400
');">Actual Size</a></li> 
```

我是否正在查看一些导致错误的隐藏字符？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:46:54.613

使用`{$realsize|escape:'htmlall'|escape:javascript}`已通过删除导致该问题的换行符来解决该问题。