# StackOverflow 问答 13347000-13347999

# handlebars.js - 遍历数组少于特定次数

> ID：13347000
> 
> 赞同：0
> 
> 时间：2012-11-12T15:59:09.047
> 
> 标签：handlebars.js, client-templates

我使用 Handlebars.js 作为 js 模板。而且我需要遍历数组，但直到数组完成，但少于特定次数。

所以假设我有以下 JSON：

```
{
    "obj":
        [
            {"user": "Fred", "age": "23", "type": "personal"},
            {"user": "Ralph", "age": "32", "type": "business"},
            {"user": "John", "age": "44", "type": "other"},
            {"user": "Alex", "age": "44", "type": "other"},
            {"user": "Stan", "age": "6", "type": "other"},
            {"user": "Cartman", "age": "5", "type": "other"},
            {"user": "Kennie", "age": "6", "type": "other"}
        ]
} 
```

但我只需要输出前 4 个用户，所以 Stan、Cartman 和 Kennie 不会出现。如果我需要迭代所有内容，我会使用这样的东西：

```
<ul>
    {{#each obj}}
    <li>
        <div>{{this.user}}</div>
        <div>{{this.age}}</div>
        <div>{{this.type}}</div>
    </li>
    {{/each}}
</ul> 
```

我该如何修改它？

问题 2：目前我使用 obj 只是因为我无法弄清楚如何迭代仅由数组组成的 JSON：

```
 [
            {"user": "Fred", "age": "23", "type": "personal"},
            {"user": "Ralph", "age": "32", "type": "business"}
        ] 
```

如何在没有那个讨厌的 obj 的情况下更改我的模板以进行迭代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:36:05.030

好的，我想出了解决问题2的方法：

使用`this`解决问题

```
<ul>
    {{#each this}}
    <li>
        <div>{{this.user}}</div>
        <div>{{this.age}}</div>
        <div>{{this.type}}</div>
    </li>
    {{/each}}
</ul> 
```

至于第一个问题，显然没有办法用 handlebar.js 原生地做到这一点，所以我正在考虑如何为此编写自己的 Helper。

PS。感谢**mu 太短**，无法显示第一部分的答案： [limit results of each in handlebars.js](https://stackoverflow.com/questions/10377700/limit-results-of-each-in-handlebars-js)

# php - Php $ Html 导航问题

> ID：13347002
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:59:16.857
> 
> 标签：php, html

好吧，Following 是选择当前页面名称的功能。例如：index.php、owner.php、contactus.php 等。我创建了这个函数是因为我需要激活一个 css id(#active) 选择器来突出显示当前页面。

**功能**

```
function curPageName() {
return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}
$pagename = curPageName(); 
```

**这是我的导航代码：**

```
<ul>
<li><a href="index.php" <?php if($pagename == "index.php") echo "id='active'"; 
?>>HOME</a></li>
<li><a href="owner.php" <?php if($pagename == "owner.php") echo "id='active'"; ?>>LIST 
YOUR PROPERTY</a></li>                        
<?php
$menu = mysql_query("SELECT * FROM page where status = 1");

while($re = mysql_fetch_array($menu))
{
$pageid = $re['pageid'];
$pagelink = $re['pagelink'];
$pagename = strtoupper($re['pagename']);
$pagedes =  $re['pagedes'];                     

echo "<li><a href='page.php?pageid=$pageid'>$pagename</a></li>";
}
?>                      

<li><a href="contactus.php" <?php if($pagename == "contactus.php") echo "id='active'"; 
?>>CONTACT US</a></li>
</ul> 
```

所以，我的问题是它对 Index.php 和 owner.php 的 css id 选择器处于活动状态。**但是**它没有激活css选择器到contactus.php页面。

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:07:43.683

你已经覆盖`$pagename`到`while loop`

```
while($re = mysql_fetch_array($menu))
{
$pageid = $re['pageid'];
$pagelink = $re['pagelink'];
$pagename = strtoupper($re['pagename']);

^^^^^ overwritten variable value change this variable name

$pagedes =  $re['pagedes'];                     

echo "<li><a href='page.php?pageid=$pageid'>$pagename</a></li>";
}

-------------------------------------vvvvvvvvv- this will be last value of while loop
<li><a href="contactus.php" <?php if($pagename == "contactus.php") echo "id='active'"; 
?>>CONTACT US</a></li> 
```

# ruby - 在 Windows (7) 中开发 Ruby 时如何防止 PATH 错误？难道我做错了什么？

> ID：13347003
> 
> 赞同：1
> 
> 时间：2012-11-12T15:59:19.827
> 
> 标签：ruby, windows, path

似乎每周我都必须清理环境变量，卸载所有 gem（我什至现在已经记住了一个 liner 命令）并重新安装 Ruby、DevKit、Gems、Rails、Heroku 等。大部分时间它都可以工作并且几天没问题，但不久之后“`x`不被识别为内部或外部命令”或“本机 gem 需要安装的构建工具”错误开始蔓延，直到开发变得不可能。

当然这不可能是正常的，但据我所知，我没有做任何明显错误的事情。我做事的方式和我以前在 Mac 上做的一样，而且效果很好。但是我在这个操作系统的尽头。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:05:46.590

实际上，您需要的只是将您正在使用的 Ruby 的 bin 文件夹放在PATH 的开头（为了安全起见）*。*并确保你没有其他人在那里。

对于“需要安装的构建工具”，我通常只是将这些添加到系统路径中，相当于：

C:\installs\devkit451\devkit451\bin;C:\installs\devkit451\devkit451\mingw\bin;

HTH。

# mongodb - Cakephp 2.0 Mongodb 插件未加载

> ID：13347005
> 
> 赞同：0
> 
> 时间：2012-11-12T15:59:27.180
> 
> 标签：mongodb, cakephp-2.0

我正在尝试将我的数据库更改为 Mongodb。我已经加载了 Mongo 并在 shell 中工作。现在我正在尝试让 cakephp 2.0 连接到数据库。我已将ichiaway的驱动器作为Mongodb下载并安装到app/plugin目录中。我已经包括了这条线

```
CakePlugin::load('Mongodb'); 
```

在我的 bootstrap.php 文件中。我已将我的 database.php 文件更改为

```
class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'mongodb.mongodbSource',
    'host' => 'localhost',
    'database' => 'service4u',
    'port' => 27017
); 
```

数据库现在作为服务工作，我可以启动 mongo shell 并正常使用数据库，但是当我尝试从我的应用程序加载页面时，出现以下错误。

```
Missing Plugin
Error: The application is trying to load a file from the mongodb plugin
Error: Make sure your plugin mongodb is in the app\Plugin directory and was loaded
<?php
CakePlugin::load('mongodb');

Loading all plugins: If you wish to load all plugins at once, use the following line in your app\Config\bootstrap.php file

CakePlugin::loadAll(); 
```

我现在不知道该怎么办。我曾尝试将文件放在插件文件夹中 Mongodb 文件夹内的不同文件夹中，但我没有做任何帮助。任何见解都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:31:39.463

能够找到答案。我唯一错的是在我的 database.php 文件中，数据源应该是 camelCase。我有小写的 m，将它们更改为 M 并且它起作用了。

在这里找到答案 [CakePHP 2 can not find plugin](https://stackoverflow.com/questions/6405665/cakephp-2-can-not-find-plugin?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T09:25:32.993

确保下载文件超过 2.5。如果不是，请 [下载 mongoDB 蛋糕 php 插件。](https://github.com/ichikaway/cakephp-mongodb)

只需下载并将他的所有文件放在 app/plugin/Mongodb 上。在 database.php 中设置数据库

```
public $default = array(
    'datasource' => 'Mongodb.MongodbSource',
    'host' => 'localhost',
    'database' => 'blog',
    'port' => 27017,
    'prefix' => '',
    'persistent' => 'true',

);
public $test = array(
    'datasource' => 'Mongodb.MongodbSource',
    'database' => 'test_mongo',
    'host' => 'localhost',
    'port' => 27017,
); 
```

并在 bootstrap.php 上添加打击代码

```
CakePlugin::load('Mongodb'); 
```

# magento - 如何在magento中为属性添加注释？

> ID：13347006
> 
> 赞同：4
> 
> 时间：2012-11-12T15:59:27.710
> 
> 标签：magento, attributes

我使用管理面板在 Magento 中创建了一个新的产品属性。但是我找不到在哪里为该属性添加注释（即应该在输入字段下方显示的文本作为有关它的额外信息。）

我是否遗漏了什么，或者这不可能在管理面板中实现？

这是一个关于属性的注释的示例：
![在此处输入图像描述](../Images/25bfbcdcecb73d38a928ea69be52327e.png)

我正在使用 Magento 1.7 CE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:16:30.240

这是不可能通过管理面板。

顺便说一句，你真的应该以编程方式添加你的属性。（如果你的数据库崩溃，你就完了）。

您需要修改 eav_attribute 表的“note”列。

您可以`updateAttribute()`使用升级脚本中的命令对其进行修改。例子 ：

```
$installer->updateAttribute(Mage_Catalog_Model_Product::ENTITY, 'color', 'note','my comment'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T11:52:40.053

嗯，这可能有点晚了，但无论如何，我今天遇到了类似的问题，并通过以下直观的方式解决了它：

首先我的问题：如何在扩展搜索页面中以自定义顺序获取属性？

为此，我在这里找到了一些东西：http: [//www.magentocommerce.com/boards/viewthread/11782/](http://www.magentocommerce.com/boards/viewthread/11782/) - 他们告诉：你可能会使用 mysql 表中的自定义未使用字段“note”：“eav_attribute”您可以在 app\code\core\Mage\CatalogSearch\Model\Advanced.php 中更改 order-by 即

从： `->setOrder('main_table.attribute_id', 'asc')`

## 到： `->setOrder('main_table.note', 'asc')`

但是，你仍然有问题，如何正确编辑这些东西，而不是直接在 mysql-client 中编辑任何东西；从现在开始，我遇到了你的问题，我的解决方案：

**模型**：获取/设置

*   在 app/code/core/Mage/Eav/Model/Entity/Attribute/Abstract.php
*   grep：类 Mage_Eav_Model_Entity_Attribute_Abstract ex
*   添加：搜索后最好：“n getName”

`/** * Get attribute note * * @return string */ public function getNote() { return $this->_getData('note'); } /** * Set attribute note * * @param string $name * @return Mage_Eav_Model_Entity_Attribute_Abstract */ public function setNote($note) { return $this->setData('note', $note); }`

**控制器**：设置

*   在 app/code/core/Mage/Adminhtml/controllers/Catalog/Product/AttributeController.php
*   （好的，这是一条捷径，我认为您可以在某处向“note_text”添加一些属性，但我没有来自 magento 的计划）
*   搜索：“默认值”并扩展：
*   从：

`$defaultValueField = $model->getDefaultValueByInput($data['frontend_input']); if ($defaultValueField) { $data['default_value'] = $this->getRequest()->getParam($defaultValueField); }`

*   到：

`$defaultValueField = $model->getDefaultValueByInput($data['frontend_input']); if ($defaultValueField) { $data['default_value'] = $this->getRequest()->getParam($defaultValueField); $data['note'] = $this->getRequest()->getParam('note_text'); }`

**查看**：

*   在 ./app/code/core/Mage/Eav/Block/Adminhtml/Attribute/Edit/Main/Abstract.php
*   后：

    `$fieldset->addField('default_value_text', 'text', array(`

*   添加：

    `$fieldset->addField('note_text', 'text', array( 'name' => 'note_text', 'label' => Mage::helper('eav')->__('Note Value'), 'title' => Mage::helper('eav')->__('Note Value'), 'value' => $attributeObject->getDefaultValue(), ));`

最后，我通过以下方式初始化了 mysql 表中的注释字段：

```
update eav_attribute set note=lpad(attribute_id,10,'0000000000') where attribute_id not in(84,100); 
```

其中 id 为 84 和 100 的属性已经有了一些注释。

# javascript - 使用 window.location.hash 多个参数导航

> ID：13347011
> 
> 赞同：0
> 
> 时间：2012-11-12T15:59:40.300
> 
> 标签：javascript

我正在开发一些单页功能，并`window.location.hash`在刷新后用于重建页面。

基本上我有一个像这样的简单菜单：

```
<a href = "#user">User</a>
<a href = "#comment">Comment List</a> 
```

当按下*评论列表*链接时，浏览器 URL 将变为：

```
myapp.com/#comment 
```

在此页面上有*删除*链接，它们调用一些 AJAX 函数来删除评论：

```
<a href = "#remove" class = "rmv-comment" data-id = "${commentId}">Remove Comment</a> 
```

当按下*Remove Comment*链接时，浏览器 URL 将变为：

```
myapp.com/#remove 
```

这不是很有帮助，因为现在我无法在刷新时重建旧页面。（`#comment`哈希不存在，因此将显示一些默认页面）

我正在寻找一种构建 URL 的方法，例如：

```
myapp.com/#comment/#remove 
```

我尝试将不同的字符（如`\`or `?`）附加到`#comment`但没有运气。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:04:57.797

在现代浏览器中，您只能使用**一个**井号

而不是`myapp.com/#comment/#remove`你可以使用这样的东西：

```
myapp.com/comment/remove 
```

`window.history`要在不重新加载页面使用对象的情况下更改 url ：

```
window.history.pushState("", "Title", "/remove");
window.history.pushState("", "Title", "/comment/remove"); 
```

# java - Java NIO connect to socket

> ID：13347014
> 
> 赞同：1
> 
> 时间：2012-11-12T16:00:06.023
> 
> 标签：java, nio

I'm trying to connect to a remote server and send a login message in my Thread:

```
@Override
public void run() {
    try {
        address = new InetSocketAddress(host, port);
        incomingMessageSelector = Selector.open();
        socketChannel = SocketChannel.open();           
        socketChannel.configureBlocking(false);
        socketChannel.connect(address);
        socketChannel.register(incomingMessageSelector, SelectionKey.OP_READ);
        serverManager.loginToServer();
    }
} 
```

the loginServer() is a method which send a message to ther server but i keep getting an:

```
java.nio.channels.NotYetConnectedException 
```

how can i check and wait for connection before sending this loginServer() method?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T07:27:02.313

如果您在非阻塞模式下连接，您应该：

*   注册频道`OP_CONNECT`
*   当它触发呼叫时`finishConnect()`
*   如果返回 true，请取消注册`OP_CONNECT`并注册`OP_READ`，或者`OP_WRITE`取决于您接下来要执行的操作
*   如果它返回false，什么都不做，继续选择
*   如果其中一个`connect()`或`finishConnect()`抛出异常，请关闭通道并重试或忘记它或告诉用户或任何适当的东西。

如果您在通道连接之前不想做任何事情，请在阻塞模式下进行连接，并在连接成功时进入非阻塞模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:30:26.487

我找到了答案..我应该使用：

```
 socketChannel = SocketChannel.open(address);            
    socketChannel.configureBlocking(false);

    while (!socketChannel.finishConnect());

   //my code after connection 
```

因为 NIO 处于非阻塞模式，我们必须等到它完成连接

# php - 在 Magento 中，我想编写一些代码来显示每个类别的库存水平

> ID：13347026
> 
> 赞同：-1
> 
> 时间：2012-11-12T16:01:01.860
> 
> 标签：php, magento, categories

我已经在互联网上搜索了 3 次，但仍然一无所获。我只是想编写一些逻辑来显示每个类别以及每个类别有多少库存。如果有哪位聪明的人可以对这个棘手的问题有所了解，请随意回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:59:31.937

伪代码（假设您试图显示每件商品的库存量）

```
 $category_id = 1;
 $category = Mage::getModel('catalog/category')->load($category_id);
 $totalStockLevel = 0;
 // get all product within that category 
 $productCollection = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($category);
 foreach($productCollection as $product){
     // load stock
     $stockLevel = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty()
      // do you logics here
      $totalStockLevel += $stockLevel;
  }

  echo $totalStockLevel; 
```

要获取所有类别，请参阅[http://www.magentocommerce.com/boards/viewthread/24947/](http://www.magentocommerce.com/boards/viewthread/24947/)

请参阅[http://www.magentocommerce.com/boards/viewthread/196846/#t247851](http://www.magentocommerce.com/boards/viewthread/196846/#t247851)

# sql - Output in Table format

> ID：13347027
> 
> 赞同：-8
> 
> 时间：2012-11-12T16:01:06.137
> 
> 标签：sql, oracle, pivot

I have a sql table in oracle as below and its name is scope.

```
SPECIALIST          CONTENTS    UPDATE_COUNT
Ram                 Updates           23
Har                 Legis             6
Ram                 Updates           65 
```

and i want the output to be formatted in the below format please help me.

```
 Har  Ram Total
Updates 0   88  88
Legis   6   -   6
Total   6   88  94 
```

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:11:42.430

您没有指定您使用的 Oracle 版本。如果您在 Oracle 11g 中，则可以使用该`PIVOT`功能。如果没有，那么您可以使用带有`CASE`语句的聚合函数。以下是如何产生结果的多个版本：

```
select contents,
  sum(case when specialist = 'Har' then update_count else 0 end) Har,
  sum(case when specialist = 'Ram' then update_count else 0 end) Ram,
  sum(case when specialist in('Har', 'Ram') then update_count else 0 end) Total
from yourtable
group by contents
union all
select 'total',
  sum(case when specialist = 'Har' then update_count else 0 end) Har,
  sum(case when specialist = 'Ram' then update_count else 0 end) Ram,
  sum(case when specialist in('Har', 'Ram') then update_count else 0 end) Total
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/71fb7/4)

或者您可以使用`GROUP BY ROLLUP`：

```
select 
  case when contents is null then 'Total' else contents end contents,
  sum(case when specialist = 'Har' then update_count else 0 end) Har,
  sum(case when specialist = 'Ram' then update_count else 0 end) Ram,
  sum(case when specialist in('Har', 'Ram') then update_count else 0 end) Total
from yourtable
GROUP BY rollup(contents); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/71fb7/27)

或者您可以`PIVOT`使用`ROLLUP`：

```
select 
  case when contents is null then 'Total' else contents end contents, 
  sum(coalesce(Har, 0)) Har,
  sum(coalesce(Ram, 0)) Ram,
  sum(coalesce(Har, 0) + coalesce(Ram, 0)) Total
from 
(
  select specialist, contents, update_count
  from yourtable
) src
pivot
(
  sum(update_count)
  for specialist in ('Har' as Har, 'Ram' as Ram)
) piv
group by rollup(contents) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/71fb7/24)

# r - reading big data file using cbc.read.table

> ID：13347029
> 
> 赞同：0
> 
> 时间：2012-11-12T16:01:15.023
> 
> 标签：r

I'm trying to read a giant DF `cbc.read.table`:

```
my.df <- cbc.read.table("df.csv",sep = ";", header =F) 
```

This is what I get:

```
Error in cbc.read.table("2012Q2.csv", sep = "|", header = F) : 
No rows to read 
```

The wd is set correctly. Inprinciple it works using read.table, just that it doesn't read in all lines (about two million)

Has anybody an idea what I can do about this?

SOLUTION: Hi again, the following thread helped me out: [R: Why does read.table stop reading a file?](https://stackoverflow.com/questions/3016333/r-why-does-read-table-stop-reading-a-file)

The problem was caused by quotation marks, probably because some of them were not closing. I simply used an editor and deleted all double and single quotation marks as well as all hash marks. It's working now.

@Anthony: Thanks for your question. I noticed that the problem did not occur in the first three lines which is why I got idea that it's an issue with the file. Thanks!

Paul

# python - 使用 select_related 时，“用户”对象没有属性“拆分”

> ID：13347034
> 
> 赞同：0
> 
> 时间：2012-11-12T16:01:23.243
> 
> 标签：python, django

使用 select_related 时出现非常奇怪的错误。我创建了一个扩展 auth_user 表的模型。供您参考，我在下面粘贴模型

```
class BasicDetails(models.Model):
   username = models.OneToOneField(User)
   name = models.CharField(max_length = 100, verbose_name = "Name")
   sex = models.CharField(max_length = 10, verbose_name = "Sex", choices = GENDER_CHOICES)
   dob = models.DateField(verbose_name = "Date of Birth")
   mothertongue = models.CharField(max_length = 20, verbose_name = "Mother Tongue", choices = LANGUAGES_CHOICES) 
```

上表只有一条记录，当我在 django shell 中运行以下查询时，它工作正常，我能够检索这些值。

```
basicdetails = BasicDetails.objects.select_related('auth_user__username',request.user) 
```

但是，当我在视图和模板中输入相同的查询时，我遇到了错误。

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
111.response = callback(request, *callback_args, **callback_kwargs)
File "/home/vikramt/python/OpenMatrimony/wedding/views.py" in myprofile
160.basicdetails = BasicDetails.objects.select_related('auth_user__username',request.user)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py" in select_related
173.return self.get_query_set().select_related(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in select_related
686.obj.query.add_select_related(fields)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/query.py" in     add_select_related
1759.for part in field.split(LOOKUP_SEP):
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in inner
185.return func(self._wrapped, *args) 
```

异常类型：/myprofile/ 处的 AttributeError 异常值：“用户”对象没有属性“拆分”

有人可以在这种情况下帮助我吗？我无法理解问题所在。有什么线索吗？

-维克拉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:11:06.170

`select_related`期望它的参数是字符串。您的`request.user`对象不是字符串，也没有`split()`方法。这就是引发 AttributeError 的原因。

但棘手的部分是，正如你所说，当你在 shell 会话中做同样的事情时，它起作用了。我敢说，在那个 shell 上下文中，`request.user`它以某种方式是一个字符串，或者表现得像一个字符串。

无论如何，你为什么将一个用户实例传递给 select_related？我的意思是，你想通过这样做来实现什么？

**编辑**

好的，如果您想检索当前登录用户的 BasicDetails 记录，您应该使用该`filter`方法。它用于过滤查询集：

```
basicdetails = BasicDetails.objects.filter(username=request.user) 
```

该`select_related`方法用于告诉 ORM 执行类似 SQL 连接的操作以填充结果的指定相关列。

我建议您将`username`列重命名为更清晰的名称。这是与用户表的关系，所以你应该把它叫做`user`.

# symfony - 资产配置错误？引导选项卡在 Symfony2 开发中工作，在生产中损坏

> ID：13347038
> 
> 赞同：1
> 
> 时间：2012-11-12T16:01:28.617
> 
> 标签：symfony, twitter-bootstrap, assetic

我在 Symfony2 项目中使用[Twitter Bootstrap 选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)，它们运行良好 - 但仅在开发环境中，在生产中它们似乎损坏（而不是切换选项卡，链接像普通链接一样工作，#de/#en 添加到网址）。

我在我的模板中使用以下标记：

```
 <ul class="nav nav-tabs" data-tabs="tabs" id="myTab">
        <li class="active">
            <a data-toggle="tab" href="#de" data-translation-locale="de">Deutsch</a
        </li>
        <li>
            <a data-toggle="tab" href="#en" data-translation-locale="en">English</a
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="de">
             Deutsch
        </div>
        <div class="tab-pane" id="en">
             English
        </div>
    </div> 
```

在使用[Assetic](http://symfony.com/doc/master/cookbook/assetic/asset_management.html)加载 jquery 后，会包含 Bootstrap .js 文件：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
    {% javascripts output="js/frontend.js"
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-affix.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-alert.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-button.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-carousel.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-collapse.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-dropdown.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-modal.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-popover.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-scrollspy.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-tab.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-tooltip.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-transition.js'
        '%kernel.root_dir%/../vendor/twitter/bootstrap/js/bootstrap-typeahead.js'
       %}
    <script src="{{ asset(asset_url) }}"></script>
    {% endjavascripts %} 
```

我的资产配置（在 config.yml 中）如下所示：

```
assetic:
 debug: %kernel.debug%
 use_controller: false
 filters:
    cssrewrite: ~
    lessphp:
        file: %kernel.root_dir%/../vendor/leafo/lessphp/lessc.inc.php
        apply_to: "\.less$" 
```

对于开发环境（config_dev.yml），use_controller 选项设置为 true：

```
assetic:
    use_controller: true 
```

我使用assetic:dump web（有和没有--env=prod --no-debug 选项），生成并加载了js/frontend.js，bootstrap-tab.js在其中（打开文件并检查），但是这些选项卡仅适用于开发人员。我什至在 config.yml 中设置了 use_controller=true 只是为了看看是否有任何变化。

可行的方法是将 bootstrap-tab.js 从其供应商目录复制到 /web/js 并手动包含它。

目前我正在使用网站上的 bootstrap.min.js 并且效果很好，但我真的很想知道我在使用 Assetic 时做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:51:52.037

这就是诀窍：

```
 {% javascripts output="js/frontend.js"
       ...
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %} 
```

我不确定我是从哪里得到的，但是asset(asset_url) 似乎是错误的——只使用asset_url 就可以了。所以我简单地改变了

```
 <script src="{{ asset(asset_url) }}"></script> 
```

到

```
 <script src="{{ asset_url }}"></script> 
```

我看不出最终的 html 有什么不同，但这确实起到了作用。我将不得不仔细查看 Assetic 文档以了解详细信息。

# c# - 动态更改文本块中的文本

> ID：13347042
> 
> 赞同：0
> 
> 时间：2012-11-12T16:01:38.093
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone

我正在尝试制作一个 windows phone 应用程序....在这个应用程序中，我必须显示一个带有文本块和下一个和上一个按钮的页面，并且文本块中的文本会相应更改......文本对于单页每页大约 3 到 4 行，大约 1000 页，所以我认为我可以使用序列号将文本保存在数据库中，即使使用序列号也可以检索它....但是我看不到数据库支持对于windows phone ...也许是错的....我也不想使用任何不是微软自己提供的第三方api，所以请有人指导我，非常感谢任何帮助，希望我清楚....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:05:06.403

取决于您正在开发的版本。在 windows phone 7.0 上，不支持~~7.1~~数据库，您可以按照 Zdarvko 的建议使用 IsolatedStorage 以文件夹/文件格式存储。

对于 Windows 7.5-mango，（7.1 也是 - Paras 提供的链接 - [http://debugmode.net/2011/09/25/local-database-application-for-windows-phone/](http://debugmode.net/2011/09/25/local-database-application-for-windows-phone/)），Paras 已经提供了链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:05:01.677

windows phone 上的本地数据库有多种选择，但没有一个来自 Microsoft。对于 1000 行，我将使用存储在隔离存储中的 xml 文件，甚至是纯文本文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:53:20.060

Windows Phone 不支持本地数据库。

在此处查找示例代码和示例：

[http://www.windowsphonegeek.com/articles/Windows-Phone-Mango-Local-Database-mapping-and-database-operations](http://www.windowsphonegeek.com/articles/Windows-Phone-Mango-Local-Database-mapping-and-database-operations) http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database-SQL -CE--Linq-to-SQL [http://debugmode.net/2011/09/25/local-database-application-for-windows-phone/](http://debugmode.net/2011/09/25/local-database-application-for-windows-phone/)

您还可以将独立存储用于您的目的：

[http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

# c# - HtmlAgilityPack：删除标签，替换为空格

> ID：13347047
> 
> 赞同：0
> 
> 时间：2012-11-12T16:01:57.800
> 
> 标签：c#, html-agility-pack

```
string url = "http://www.myurl.xxx";
HtmlWeb webGet = new HtmlWeb();
HtmlDocument doc =  webGet.Load(url);

foreach(var script in doc.DocumentNode.Descendants("script").ToArray())
   script.Remove();

foreach(var style in doc.DocumentNode.Descendants("style").ToArray())
   style.Remove();

 string mtext =  doc.DocumentNode.InnerText; 
```

字符串 mtext 在已删除标签的文本之间没有间距，我如何“删除”并用换行符或“”替换所有标签实例的已删除标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:57:27.053

你只是删除节点。取而代之的是，您应该用新节点替换这些节点。这将用空格符号替换您的`<script>`和`<style>`节点：

```
foreach (var node in doc.DocumentNode.SelectNodes("//script|//style").ToArray())
{
    var replacement = doc.CreateTextNode(" ");
    node.ParentNode.ReplaceChild(replacement, node);
} 
```

# shell - shell脚本语法错误

> ID：13347051
> 
> 赞同：1
> 
> 时间：2012-11-12T16:02:17.740
> 
> 标签：shell

```
#!/bin/sh
 for f in `ls *.png`
  do
convert $f -fill gray(50%) -opaque black ./background_change/$f
  done
  for f in `ls *.PNG`
   do
  convert $f -fill gray(50%) -opaque black ./background_change/$f
  done 
```

对于上面提到的 shell 脚本，我收到一条错误消息：

```
[gsamanth@cngfile Acsady]$ sh background_change.sh 
'ackground_change.sh: line 3: syntax error near unexpected token `do
'ackground_change.sh: line 3: `do
[gsamanth@cngfile Acsady]$ 
```

为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:15:42.143

提示：

*   [不要解析 LS](http://mywiki.wooledge.org/ParsingLs)。你会比你预期的更频繁地遇到问题。使用`for`循环或使用`find`命令处理文件。
*   总是引用你的变量。你的脚本有：`convert $f -file ...`. 如果文件名包含一个空格后跟一个连字符会怎样？

```
 #!/bin/sh

 for f in *.png *.PNG; do
     convert "$f" -fill "gray(50%)" -opaque black background_change/"$f"
 done 
```

请注意，您需要在填充参数周围加上引号，否则外壳程序将解释括号而不是将它们作为选项传递。您也可以通过使用反斜杠（即`gray\(50%\)`）转义括号来实现此目的。但是引号更安全一些，因为它们还可以将您从其他您可能不知道要逃避的字符中拯救出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:03:43.980

`do`子句前需要一个分号：

```
for f in `ls *.png`; do
                   ^
                   +- here 
```

您也可以在 shell 脚本本身中使用通配符，无需调用`ls`. 总而言之，您的脚本应该是

```
#!/bin/sh
for f in *.png *.PNG; do
    convert $f -fill gray(50%) -opaque black ./background_change/$f
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:04:26.373

尝试

```
for f in `ls *.PNG`; do 
```

或（更好）

```
for f in *.PNG; do 
```

避免过度`ls`调用（除非您以后想使用`ls`诸如排序之类的工具-我怀疑不是）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T23:00:30.117

ls 命令可以根据您的环境和设置提供不同的结果。我不会讨论这里的内容。

出于这个原因，最好将**ls**的输出作为流提供给单独的“ **while** ”（*或取决于复杂性，**awk***）循环，然后

1.  阅读每一行，
2.  评估每一行的“准备”或“调节”预处理之前
3.  运行所需的命令。

由于不希望出现的情况（文件名中的空格或特殊字符）是不可避免的（除非您有一个首先阻止创建此类文件名的进程），因此始终将双引号括在任何变量周围是一个很好的预防性第一措施涉及未知格式的文件名，例如

`"/thisdir/anotherdir/${filename}"`.

这个例子将这些原则付诸实践：

```
START=`pwd`
rm -f ${START}/rename.EXCEPTIONS.txt

EVALdir="${HOME}/Downloads"
cd ${EVALdir}

ls | while read line
do
     if [ -z "${line}" ] ; then break ; fi
     newname=`echo "${line}" | sed 's+\ +_+g' `
     echo "\n\t Rename '${line}' to '${newname}' ? [y|N] => \c"
     read ans ; if [ -z "${ans}" ] ; then ans="N" ; fi
     case ${ans} in
         y* | Y* )  mv -v "${line}" "${newname}" ;
         * ) echo "IGNORED|${line}|" >&2 ;;
     esac 2>${START}/rename.EXCEPTIONS.txt
done 
```

由于将网页或文件保存到磁盘的操作是此类文件名条件的常见原因，因此最好定期扫描整个系统（仅在用户可以将文件保存到的那些部分）以检测违规条件或字符，并在报告中标记此类实例以采取纠正措施，以尽量减少

*   缺乏对此类条件的编码可能导致不良结果的实例数量，以及
*   合并必要的特殊编码以正确处理此类实例所需的多个实例。

# linux - 查找命令语法

> ID：13347059
> 
> 赞同：0
> 
> 时间：2012-11-12T16:02:32.793
> 
> 标签：linux, unix, find

我正在尝试在某些 unix 系统上查找所有 .rhosts 文件。我只尝试了 -name ".rhosts" 但我们有很多非常大的 NFS 和 MVFS 系统，我不想爬网，而且我很难排除它们。

```
find / -name ".rhost" -type d \( -fstype mvfs -o -fstype nfs -o -name ".snapshot" \) -prune -type f -print 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:47:03.793

查看手册页`find`（应该通过 位于您的系统上`man find`，或者您可以通过快速搜索轻松地在线找到它）。`-mount`or选项是您想要的`-xdev`，尽管这意味着您需要为每个本地文件系统运行一次命令，而不是整体运行一次，除非您想制作一个令人难以置信的长行来表示`-prune`每个非本地文件系统......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:59:19.250

这是我想出的。

```
find / -type d \( -fstype mvfs -o -fstype nfs -o -name ".snapshot" \) -prune -o -type f -name ".rhosts" -print 
```

# ios - 如何使用 Storyboard 在 UIPopover 中使用导航栏？

> ID：13347060
> 
> 赞同：0
> 
> 时间：2012-11-12T16:02:35.053
> 
> 标签：ios, uipopovercontroller, uistoryboard

我想使用情节提要在我的弹出窗口中有一个导航栏。

当我尝试通过将按钮弹出到我的故事板中的导航控制器（指的是我的弹出屏幕）来完成它时：

![在此处输入图像描述](../Images/da84788ae00dbb72dcc72c0bf89f3a4e.png)

然后，我尝试将委托分配给我的弹出控制器：

```
 CheckBoxListingViewController *rdvc = [segue destinationViewController];
  rdvc.delegate = self; 
```

但是当我尝试 NSLog 它时，它总是在弹出控制器中返回 null 。

我认为原因是因为我引用导航控制器而不是直接引用弹出控制器，因为当我直接引用它时，委托不再为空。

我能做些什么来完成这些屏幕？有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:05:10.707

`destinationController`指的是你的`UINavigationController`试试这个：

```
CheckBoxListingViewController *foo = (CheckBoxListingViewController *)((UINavigationController *)segue.destinationViewController).topViewController; 
```

# chef-infra - 扩展 application_php 厨师食谱返回 RecipeNotFound 错误

> ID：13347061
> 
> 赞同：0
> 
> 时间：2012-11-12T16:02:38.393
> 
> 标签：chef-infra, chef-recipe

我最近一直在和 chef 一起部署应用程序。我正在尝试在 opscode 提供的应用程序和 application_php 食谱之上构建。但我对厨师有点陌生，我真的不明白我应该怎么做。

我为我的应用创建了一本食谱。食谱目前看起来像这样：

```
app = node.run_state[:current_app]

secrets = Chef::EncryptedDataBagItem.load("secrets", "my_app")

application "my_app" do
  path "/var/www/sites/my_app/current"
  owner node['my_app']['owner']
  group node['my_app']['group']
  repository "some repository here"
  if secrets["deploy_key"]
    ruby_block "write_key" do
      block do
        f = ::File.open("#{app['deploy_to']}/id_deploy", "w")
        f.print(secrets["deploy_key"])
        f.close
      end
      not_if do ::File.exists?("#{app['deploy_to']}/id_deploy"); end
    end

    file "#{app['deploy_to']}/id_deploy" do
      owner node['my_app']['owner']
      group node['my_app']['group']
      mode '0600'
    end

    template "#{app['deploy_to']}/deploy-ssh-wrapper" do
      source "deploy-ssh-wrapper.erb"
      owner node['my_app']['owner']
      group node['my_app']['group']
      mode "0755"
      variables app.to_hash
    end
  end
end 
```

角色：my_app.json

```
{
    "name": "my_app",
    "chef_type": "role",
    "json_class": "Chef::Role",
    "default_attributes": {
    },
    "description": "Install my_app Web Server",
    "run_list": [
        "recipe[apache2]",
        "recipe[php]",
        "recipe[application]",
        "recipe[my_app]"
    ],
    "override_attributes": {
    }
} 
```

但是当我运行knife bootstrap example.com -r role[my_app] ...我收到以下错误：

```
================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe my_app for cookbook application

[2012-11-12T15:22:10+00:00] ERROR: Running exception handlers
[2012-11-12T15:22:10+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[2012-11-12T15:22:10+00:00] ERROR: Exception handlers complete
[2012-11-12T15:22:10+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2012-11-12T15:22:10+00:00] FATAL: Chef::Exceptions::RecipeNotFound: could not find recipe my_app for cookbook application 
```

好像做对了什么。有谁知道我应该如何扩展 application 和 application_php 食谱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:04:23.533

我意识到我做错了嘿嘿。似乎我在网上找到的大多数教程都使用了已弃用的做事方法。

应用程序堆栈为您处理一切。无需制作部署代码。

要使其工作，您需要删除运行列表的应用程序。要使用 application 和 application_php，您需要在 metadata.rb 中定义依赖关系。

然后你可以像这样创建食谱：

```
secrets = Chef::EncryptedDataBagItem.load("secrets", "my_app")

application "my_app" do
  path "/var/www/my_app"
  repository "repository url"
  revision "master"
  deploy_key secrets["deploy_key"]
end 
```

# expressionengine - 带有嵌套模板的嵌套条目

> ID：13347062
> 
> 赞同：0
> 
> 时间：2012-11-12T16:02:42.463
> 
> 标签：expressionengine

我确信这个问题不值得成为它自己的话题，但我未能在论坛和 Stack Overflow 上找到令人满意的答案。

我有三个模板。我会尽量清楚和简单地说明我正在尝试做的事情。

**页**

```
{exp:channel:entries channel="page" dynamic="yes"}
    {!-- 'pages_module' is a matrix field --}
    {page_modules}
        {!-- The field 'module' is returning the entry_id from SP Table Select --}
        {embed="module/index" id="{module:value}"}
    {/page_modules}
{/exp:channel:entries} 
```

**模块 - 索引**

```
{exp:channel:entries channel="module" dynamic="no" entry_id="{embed:id}" site="main_site"}
    {if module_type == "building"}
        {embed="module/building" id="{building_id}"}
    {/if}
    {!-- Other module type checking here... --}
    {!-- Note this following line --}
{entry_id} - {embed:id}
{/exp:channel:entries} 
```

**模块 - 建筑**

```
{exp:channel:entries channel="building" dynamic="no" entry_id="{embed:id}" site="main_site"}
    <h1>{title}</h1>
    <p>{building_description}</p>
{/exp:channel:entries} 
```

因此，基本上，在此设置中，您可以将“模块”附加到页面条目。在这种特殊情况下，我试图查看页面上是否设置了任何 {module_id}。如果是这样，将 {module_id} 传递给主模块模板，它将获取模块条目，比较 {module_type} 并将 {building_id} 发送到第三个模板。然后获取并显示建筑物信息。

在我写注释的模块模板中，**{entry_id} 和 {embed:id} 不匹配**。{entry_id} 等于动态获取的第一个页面条目的 ID。我认为这是因为它是嵌入式模板而不是片段，因此会产生三个嵌套的 {exp:channel:entries} 标签。但是话又说回来，我不能将 ID 传递给片段，可以吗？

另外值得注意的是，我正在使用 MSM，因为我有 8 个站点在上面运行，所以我希望“模块”是模块化的，并且都位于“主站点”下以便于维护。

如果我错了，我希望有人能澄清这一点和/或纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:38:48.347

> 但是话又说回来，我不能将 ID 传递给片段，可以吗？

一个片段的行为就好像它是一个内联代码块，所以它会同样知道它的周围环境。例如，如果 Module - Index 是一个片段，您可以这样做：

**页**

```
{exp:channel:entries channel="page" dynamic="yes"}
    {if module_id}{snippet_module_index}{/if}
{/exp:channel:entries} 
```

**片段 (snippet_module_index)**

```
{exp:channel:entries channel="module" dynamic="no" entry_id="{module_id}" site="main_site"}
    ...
{/exp:channel:entries} 
```

但这并非一帆风顺，因为您有嵌套的频道条目标签，这通常是最好避免的。您不使用[关系字段](http://expressionengine.com/user_guide/modules/channel/relationships.html)是否有任何特殊原因？显然`{module_id}`对应于模块通道中的一个条目，那么为什么不在这里利用 EE 的内置功能呢？如果你突然开始使用关系，你可以这样做：

```
{exp:channel:entries channel="page" dynamic="yes"}
    {related_entries id="related_module"}
        {if module_type == 'building'}  
            Embed/snippet containing building 'module'
        {/if}
    {/related_entries}
{/exp:channel:entries} 
```

很难确切知道哪种方法最适合您的需求，但我希望您最好避免多次通道条目调用和嵌套嵌入以支持关系和片段。您也应该能够避免相当多的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:31:52.107

如文档中所述：

> **嵌入来自其他站点的模板**
> 
> 要从另一个站点嵌入模板，只需在指定的模板组和模板前面加上您希望从中提取模板的站点的短名称，如下所示：
> 
> `{embed="site_short_name:template_group/template"}`

**但！**

> **指定多个站点（准备出发）**
> 
> 注意：指定多个站点不适用于`{embed=”“}`标记。

然后我想我可以用 PHP 解决这个限制，但它似乎甚至是基本的......

```
$output = $this->EE->TMPL->parse_variables('{exp:channel:entries channel="module" dynamic="no" site="main_site"}{entry_id}{/exp:channel:entries}', array()); 
```

...wouldn't return the expected values. It seems there is no way to embed a template that itself fetches data from a different site. This is disappointing since getting data from other since while not repeating channels/templates is, to me, the exact reason why you want to use the multi-site manager...

# ios - 如何在 IB 中创建用于模态演示的小视图

> ID：13347063
> 
> 赞同：0
> 
> 时间：2012-11-12T16:02:45.840
> 
> 标签：ios, uiviewcontroller, interface-builder

我正在尝试在 IB 中创建一个小的弹出视图以在 iPhone 上进行模态演示，并且视图高度和宽度显示为灰色并在 IB 中设置为 320x480。有没有办法做到这一点？我尝试了各种设置，但到目前为止我没有运气。

我的计划是显示使用：

```
[self presentModalViewController:systemViewController animated:YES]; 
```

实际上现在正在工作，但视图是“全屏”，我希望模态视图在顶部，另一个视图在下面显示为背景视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:11:30.397

```
[self presentModalViewController:systemViewController animated:YES]; 
```

这将始终在 iPhone 上生成全屏模式，这就是操作系统为该平台处理模式的方式。只有在 iPad 上，您才能将演示文稿样式更改为页面、表单或全屏。

您将需要实现一些自定义来实现您所追求的。这篇文章非常深入地为 iPhone 创建自定义警报视图，我相信您能够适应您的需求：http: [//iphonedevelopment.blogspot.co.uk/2010/05/custom-alert-views .html](http://iphonedevelopment.blogspot.co.uk/2010/05/custom-alert-views.html)

**PS**：您提供的模态调用方法现已废弃，以后如果需要制作普通的模态视图控制器，请使用：

```
[self presentViewController:systemViewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:48:02.053

您可以使视图的背景透明，并在顶部添加一个较小的视图，其中包含您要显示的实际内容。这将允许您将其显示为模态视图，同时仍显示下方的前一个视图，但不允许与前一个视图交互。

它对我有用，但不能保证这是一个好主意。

# php - 带有php配置的oracle

> ID：13347067
> 
> 赞同：0
> 
> 时间：2012-11-12T16:03:00.747
> 
> 标签：php, oracle, configuration

我正在尝试使用 php 连接到 oracle 数据库。我已经安装了 oci8 并编辑了我的 php.ini 文件以添加：

```
extension_dir = "/opt/deploy/oracle/oci8-1.4.9/modules/"
extension=oci8.so 
```

OCI8 没有显示在 phpinfo() 中的任何位置以及我何时显示

```
if(!function_exists('oci_connect')) die('Oracle Not Installed'); 
```

它说没有安装Oracle。

我错过了什么吗？遵循这些指示：http: [//php.net/manual/en/oci8.installation.php](http://php.net/manual/en/oci8.installation.php)

# javascript - 谷歌地图纹理地图

> ID：13347068
> 
> 赞同：0
> 
> 时间：2012-11-12T16:03:07.920
> 
> 标签：javascript, google-maps-api-3, textures, openstreetmap, bing-maps

我在我的网站中实现了一张地图，并正在查看不同的选项（Google Maps API、Bing Maps、OpenStreet Maps、MapBox 等）。由于其地理编码和定价，我更倾向于谷歌地图，但绝对愿意更改为不同的系统。下载并使用 iOS 6 地图后，地图绝对引起了我的注意。我真的很喜欢 Apple 在地图上使用纹理的方式（公园的草地纹理，土地的纸张纹理）。我想知道是否有任何方法可以将类似的纹理叠加到上述任何地图系统上？不只是一部分，而是遍及整个世界。我知道你可以改变颜色，只是不确定是否支持纹理。任何帮助将不胜感激，谢谢！

我想我知道如何在 API 之外做到这一点，但是内置在 API 中的系统肯定是有益的。

## 地图比较

* * *

iOS 6 制图：

![iOS 6 地图制图](../Images/0c335322b15cd448b583432a02add83d.png)

谷歌地图制图：

![谷歌地图制图](../Images/060f8ca42fc34702ef126a52fe982a5b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:55:46.437

当您从给定的地图 API 获取地图片段时，通常会下载预渲染的地图切片（图像）。这些图片只在地图数据更新时渲染，并不是所有的查询，所以你不能影响这些图片的渲染。

如果你想要自定义纹理，你有两种方法：

*   构建您自己的 Web 服务并从原始地图数据（例如：openstreetmap 数据）呈现自己的地图切片
*   从原始数据直接在手机上渲染动态地图。

这两种方式都需要获取原始数据来呈现，因为谷歌不提供它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T21:01:25.843

根据[API 文档](https://developers.google.com/maps/documentation/javascript/styling#stylers)，您只能编辑：

*   色调
*   亮度
*   饱和
*   伽玛
*   inverse_lightness
*   能见度
*   颜色
*   重量

# ruby - 如何在 Sublime Text 2 中添加语法高亮命令？

> ID：13347074
> 
> 赞同：2
> 
> 时间：2012-11-12T16:03:27.390
> 
> 标签：ruby, syntax-highlighting, sublimetext2

Sublime Text 2 不会突出显示`require_relative`，但会突出显示`require`。

如何添加`require_relative`到 Ruby 语法高亮的单词列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:22:02.703

在 Ruby.tmLanguage 中，更改这一行：

```
<string>\b(require|gem)\b</string> 
```

到

```
<string>\b(require|gem|require_relative)\b</string> 
```

Ruby.tmLanguage 文件可以在 Sublime Text 2 中找到`Sublime Text > Preferences > Browse Packages`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:18:31.227

您将需要编辑 Ruby tmLanguage 文件。这应该位于您的“sublime 安装目录”/Data/Packages/Ruby 中。格式可能有点奇怪但崇高的文本文档为您提供有关如何在此处编辑 tmLanguages 文件的说明[http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html)

# backbone.js - 自定义主干同步

> ID：13347076
> 
> 赞同：2
> 
> 时间：2012-11-12T16:03:38.840
> 
> 标签：backbone.js, sync

我正在尝试使用`sync`以下内容构建 Backbone 的自定义替换：

```
function getStuff(){
    return {"id":"1","name":"Joe"};
} 
```

然后因为`Backbone.sync`我有：

```
Backbone.sync = function(method, model, options) {

    switch(method){

        case 'read':
            getStuff();
            break;

        ...More cases... 
```

我浏览了几篇关于替换同步的帖子，我知道我需要使用它`options`来处理退货，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:19:54.513

获取通常是异步的，因此您应该将响应返回给 options.success 函数：

```
sync : function(method, model, options) {
    if (method == 'read') {
        var yourResponse = getStuff();
        options.success && options.success(yourResponse);
    }
} 
```

Backbone 使用 options.success 函数将响应应用到模型上。您还可以提供自己的 options.success 函数：

```
yourModel.fetch({
    success : function(response) {
        // use response
    }
}); 
```

请注意，Backbone 现在将运行您的自定义成功函数，然后运行它自己的函数。

# c# - 将参数传递给 Silverlight 应用程序

> ID：13347080
> 
> 赞同：0
> 
> 时间：2012-11-12T16:03:55.323
> 
> 标签：c#, jquery, silverlight

在我的 javascript 中，我创建了我的`<OBJECT>`标签

```
 var htmlEmbedSilverlight = "<div id='silverlightControlHost'> "
                        + "<object data='data:application/x-silverlight-2,' type='application/x-silverlight-2' width='550px' height='250px'> "
                        + "<param name='source' value='../../ClientBin/FotoEmprestimoChave.xap'/> "
                        + "<param name='onError' value='onSilverlightError' /> "
                        + "<param name='background' value='white' /> "
                        + "<param name='minRuntimeVersion' value='4.0.60310.0' /> "
                        + "<param name='autoUpgrade' value='true' /> "
                        + "<param name='initparams' values='chave_id=" + data + "' /> "
                        + "<a href='http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.60310.0' style='text-decoration:none'> "
                        + "<img src='http://go.microsoft.com/fwlink/?LinkId=161376' alt='Get Microsoft Silverlight' style='border-style:none'/> "
                        + "</a> "
                        + "</object><iframe id='_sl_historyFrame' style='visibility:hidden;height:0px;width:0px;border:0px'></iframe></div>";
                $("#tiraFotoSilverlight").html(htmlEmbedSilverlight); 
```

这是对我在 Web 应用程序中调用的 Silverlight 应用程序的引用。问题是我的`<param name='initparams' values='chave_id=" + data + "' /> "`，因为在我`App.xaml`的 Silverlight 中，我有以下代码

```
 private void Application_Startup(object sender, StartupEventArgs e)
        {
            if (e.InitParams != null)
            {
                foreach (var item in e.InitParams)
                {
                    this.Resources.Add(item.Key, item.Value);
                }
            }

            this.RootVisual = new MainPage();            
        } 
```

哪里`InitParams`总是有 Count = 0，我不知道为什么。有人能帮我吗 ？我只是想将一个值传递给我的 Silverlight 应用程序，没有`PostBack`.

**渲染**

```
 <object width="550px" height="250px" type="application/x-silverlight-2" data="data:application/x-silverlight-2,">
    <param value="../../ClientBin/FotoEmprestimoChave.xap" name="source">
    <param value="onSilverlightError" name="onError">
    <param value="white" name="background">
    <param value="4.0.60310.0" name="minRuntimeVersion">
    <param value="true" name="autoUpgrade">
    <param values="chave_id=1" name="initparams">
<a style="text-decoration:none" href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.60310.0">
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:58:29.130

您为 . 的`param`标签使用了错误的键/值对`initparams`。你`<param values=`应该在什么时候使用`<param value=`（注意单数“值”与复数“值”）

将您的 JavaScript 行更改为：

`+ "<param name='initparams' value='chave_id=" + data + "' /> "`

# javascript - 如何计算 Javascript 中以字符串形式给出的 64 位整数的除法余数

> ID：13347088
> 
> 赞同：1
> 
> 时间：2012-11-12T16:04:16.700
> 
> 标签：javascript, integer, modulo

是否有快速简单的方法来对以“字符串”形式给出的 64 位整数（例如“1bed658e4cbba3a7”）进行“%”操作？

我知道谷歌闭包库有这样的功能，但我不想使用任何外部库，而且在内部它作为三个操作（除法、乘法和减法）工作，似乎不是最优的。

**补充**：问题是 JavaScript 不能在不丢失精度的情况下处理 64 位整数。有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:52:15.520

如果右侧操作数有上限，则可以将 64 位 int 拆分为两部分，并从中计算模数。（这是 3% 的操作，我不知道这对于您的目的是否足够快）。

例如，如果要计算 x % c，且 c < 2^32，则可以将 x 拆分为 a 和 b 两部分，并计算：

```
(a * 2^32 + b) % c = (((a % c)* (2^32 % c)) + b) % c 
```

不过，这取决于 c 是否很小。如果它也接近 64 位，那么您将需要寻找其他方法。

# javascript - 在 jquery-ui 中如何生成事件

> ID：13347090
> 
> 赞同：4
> 
> 时间：2012-11-12T16:04:27.917
> 
> 标签：javascript, jquery, jquery-ui

我想知道事件是如何在 jquery-ui Sortable Widget 中生成的？

例如。让我们参加这个活动`beforeStop`。我的问题是：

1.  为什么它使用`this._trigger("stop", event, this._uiHash());`而不是`this.trigger("stop", event, this._uiHash());`？

2.  有什么`_trigger`作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:42:43.973

`_trigger()`是所有 jQuery UI 小部件继承的方法。它在后台调用 jQuery 自己的[trigger()](http://api.jquery.com/trigger/)，但添加了以下功能：

*   该事件将始终在小部件增强的元素上触发（`target`事件对象的属性会相应更新）。

*   触发的事件在其名称前附加了小部件前缀（例如，调用`_trigger("stop")`可排序小部件实际上会触发该`sortstop`事件）。

*   `false`如果已注册的处理程序之一在事件上返回`false`或调用[preventDefault()](http://api.jquery.com/event.preventDefault) ，则该函数返回。

[您可以在此处](https://github.com/jquery/jquery-ui/blob/master/ui/widget.js#L476-503)`_trigger()`的源代码中找到第 476 行到第 503 行的完整实现。

# eclipse - 设置 STS：查看文件所在的位置

> ID：13347091
> 
> 赞同：0
> 
> 时间：2012-11-12T16:04:31.990
> 
> 标签：eclipse

我想以这种方式设置我的 STS（或 Eclipse）：

当我打开某个文件，或者我正在编辑它时，我想展开包资源管理器并标记打开的文件，我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:26:28.883

您可以通过选择编辑器上下文菜单`Package explorer`中的选项来实现此目的。`Show In`

默认情况下，`Show In`的快捷方式是`Shift + Alt + W`，但您也可以为`Show In (Project Explorer)`at `Preferences`-> `General`->分配快捷方式`Keys`。

# c - 用C制作外壳

> ID：13347092
> 
> 赞同：0
> 
> 时间：2012-11-12T16:04:32.807
> 
> 标签：c, shell

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <string.h>
#include <sys/stat.h>
#include <fcntl.h>

void exec(char **args){
    pid_t  pid;
    int status;
    if ((pid = fork()) < 0) {    
        printf("*** ERROR: forking child process failed\n");
        exit(1);
    }
    else if (pid == 0) {      
        if(execvp(args[0],args)<0)//{
            //printf("argv[0]=%s argv[1]=%s",args[0],args[1]);
            printf("**error in exec\n");
    }
    else {                                  
        while (wait(&status) != pid);
    }
}

void exec2(char **args, char *file){
    printf("file =%s\n",file);
    int fd;
    pid_t pid;
    int status;
    if ((pid = fork()) < 0) {    
        printf("*** ERROR: forking child process failed\n");
        exit(1);
    }

    else if (pid == 0) {   
        fd = open(file, O_RDWR | O_CREAT, (mode_t)0600);
        close(1);
        dup2(fd, 1);
        if(execvp(args[0],args)<0){
            printf("**error in exec");
        }

        else {  
            printf("\nhere\n");
            close(fd);                                
            while (wait(&status) != pid){
                fflush(stdout) ;
            }
    }
}
    close (fd);
}

void main(){
    char *command;
    char inp[512];
    char *filepath;
    size_t size=0;
    char *substr;
    char *args[512];
    command = (char *) malloc(sizeof(char *) * 512);
    int flag=0;
    int redirect=0;
    int i=0;
    while (1){
        printf("$ ");
        command = fgets(inp, 512/*sizeof(char *)*/, stdin);

        command[strlen(command)-1]='\0';

        if (strchr(command,'>')){
            redirect=1;
            strtok_r(command,">",&filepath);
        }

        size_t siz=4;
        //printf("command=%s\n",command);
        int i=0;
        while(1){
            //printf("i=%d\n",i);
            char *tok = strtok_r(command," ",&substr);
            if (tok==NULL){
                break;
            }
            args[i++] = tok;
/*              printf("tok=%s\n",tok);
            printf("len tok = %d\n",(int)strlen(tok));
            printf("command=%s\n",command);
            printf("substr=%s\n",substr);     
*/           command = substr;
    }

    //printf("args[0]=%s",args[0]);
    if (!strncasecmp(args[0],"exit",siz) || !strncasecmp(args[0],"quit",siz))
    {
        printf("\nBye\n");
        exit(0);
    }

    else if(strcmp(args[0],"cd")==0){
        chdir(args[1]);
        //printf("chdir")   ;
        //system("pwd");
} 

else if (redirect==1){
    exec2(args,filepath);
}

else exec(args);
}
} 
```

好的，这是我的 shell 代码。当我运行它时，我`ls`输入它并给出正确的输出。然后我又放`ls -l`了，然后又放了ls，它给出了：

`ls: cannot access : No such file or directory`

另外，当我使用 时`cd`，`ls`不给出输出并`pwd`说：

`"ignoring unused arguments"`

也`cat`不起作用。虽然`mkdir`，`ps`并且`ls -l`有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:53:32.580

我在您的代码中看到了一些问题，首先您分配的方式超过 512，`command`因为您使用`sizeof(char*)`的最有可能是 4：

```
command = (char *) malloc(sizeof(char*) * 512); 
```

相反，使用`sizeof(char)`并且[你不应该转换 malloc 的结果，](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)它背后有一些逻辑，但这可能是一个偏好问题，我个人不这样做：

```
command = malloc(sizeof(char) * 512); 
```

其次，您没有`strtok_r`正确使用，第一次调用它时您传递了字符串，随后，您传递`NULL`了它应该是：

```
char *tok = strtok_r(command, " ", &substr);
while(tok){
    args[i++] = tok;
    tok = strtok_r(NULL, " ", &substr);
} 
```

最后，这是主要问题，最后一个参数需要是`NULL`：

```
args[i] = 0; 
```

# java - 使用标准的算术运算

> ID：13347095
> 
> 赞同：2
> 
> 时间：2012-11-12T16:04:43.350
> 
> 标签：java, hibernate

我想在休眠中使用 Criteria API 执行算术运算。SQL 是：

```
SELECT salary + 500 FROM EMPLOYEE; 
```

如何使用标准来实现这一点？

我只能使用 SALARY 列检索，`Projection`但之后不确定如何对其执行算术运算： session.createCriteria(Employee.class).setProjection(Projections.projectionList().add(Projections.property("salary" ))

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:14:53.027

你有几个可能性：

*   创建您自己的 Projection 类，该类会生成“salary + 500”选择子句。您可以使用属性投影作为模板
*   使用 HQL 而不是标准
*   不是在查询中这样做，而是在 Java 中这样做：选择薪水，遍历返回的列表，然后将 500 添加到列表中的每个薪水。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:10:05.960

请参阅下面的示例，该示例使用 SQL Projections 在价格和数量之间查找产品。

```
session.createCriteria(Order.class) 
        .createAlias("order", "od") 
        .setProjection( Projections.projectionList() 
            .add( Projections.groupProperty("od.orderId") ) 
            .add( Projections.groupProperty("od.rate") ) 
            .add( Projections.groupProperty("od.quantity") ) 
            .add( Projections.sqlProjection( 
                    "price * quantity as total", 
                    new String[] { "totalAmount" }, 
                    new Type[] { Hibernate.DOUBLE } 
                  ) 
            ) 
        ); 
```

希望能帮助到你。

# django - 具有共享代码库但使用 Django 的不同数据的多个域

> ID：13347097
> 
> 赞同：2
> 
> 时间：2012-11-12T16:04:56.523
> 
> 标签：django, url

[最好通过查看wordpress.com](http://www.wordpress.com)的工作方式来解释我想要做的事情：

*   每个博客都被分配到一个新的子域，但用户也可以使用自己的域。可以使用简单的 Web 界面分配自定义域
*   每个博客都有自己的内容、主题等
*   所有博客共享相同的代码库

是否可以在 Django 中做同样的事情？

我对实现子域不感兴趣，但我想要其他功能。

对我来说，找到一种不必在配置文件中硬编码就可以工作的方法很重要。域分配的动态特性使得管理大量域成为可能。如果可以针对数据库表进行域匹配，那将是理想的。

我使用 nginx 和 uwsgi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:00:22.020

是的，但与开箱即用的 Wordpress 安装相比，它需要在 Django 中进行更多工作，但会为您提供更大的灵活性。

您可能想看看 django[网站](https://docs.djangoproject.com/en/dev/ref/contrib/sites/?from=olddocs)。但是，我认为它无法完成您想做的所有事情。

一个更模块化的系统是让您编写一个脚本，该脚本在被调用时将引导一个新的数据库模式，新的美德列夫，将所有必要的东西安装到其中，将新站点的站点配置添加到 nginx/apache，然后重新启动 nginx/阿帕奇。代码可以来自相同的目录，除了因为每个站点都将在它自己的 virtualenv 上运行，它会更加安全、可靠和容错。但是，正如您所看到的，这需要一些工作，但我根据您的要求，这是最灵活的方式。

# java - 线程崩溃后的状态是什么？

> ID：13347100
> 
> 赞同：0
> 
> 时间：2012-11-12T16:04:58.793
> 
> 标签：java, multithreading, crash, runnable

我持有一个线程列表，每个线程都与一个 Runnable 相关联。运行一段时间后，其中一些更改为 TERMINATED 状态，尽管它们不应该因为在 run() 中实现了 while(true)。所以我猜那些已经崩溃了，对吗？

编辑：每个线程都独立于其他线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:06:05.840

他们可能自己抛出了异常，或者被[另一个线程打断了](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。我假设您没有实施流控制来跳出 while 循环（通过异常），然后干净地完成处理。

# c# - 使用 StreamWriter 不起作用 \n (C#)

> ID：13347104
> 
> 赞同：19
> 
> 时间：2012-11-12T16:05:04.200
> 
> 标签：c#, newline, streamwriter

我对 C# Stream Writer 有疑问。我使用以下代码：

```
//Constructor
public EditorTXTFile
{
   FileStream f = File.Create(System.IO.Directory.GetCurrentDirectory() + "\\Output.txt");
   f.Close();
}

//Function AddText
public void AddLogFileText(string text)
{         
   string text = "l1\n\rl2\n\rl3\n\nl5";

   StreamWriter writer = new StreamWriter(System.IO.Directory.GetCurrentDirectory() + "\\Output.txt", true);
   writer.Write(text);         

   writer.Close();
} 
```

当我打开 Output.txt 时，它显示为 \n 或 \ra █（这意味着不可显示的符号）并且整个字符串在一行中......稍后文本应该交出函数，所以我不能写文本使用 .WriteLine 因为我不知道实际字符串是在同一行还是在新行。

是什么让我错了？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-12T16:09:06.653

`Environment.NewLine`用作行分隔符，或者`"\r\n"`如果您想手动操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:09:20.837

行分隔符（newLine）`\r\n`不是`\n\r`，

将您的文本更改为：

```
 string text = "l1\r\nl2\r\nl3\r\nl5"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:09:05.177

试试`string text = @"l1\n\rl2\n\rl3\n\nl5";`。防止字符填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T15:38:54.550

这是二进制格式：

```
writer.Write(text); 
```

这是行顺序格式：

```
writer.WriteLine(text); 
```

你必须使用`WriteLine`格式...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T10:44:11.857

你可以`Environment.NewLine`这样使用：

```
streamWriter.Write(String.Concat(Enumerable.Repeat(Environment.NewLine, n).ToArray())); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-06T09:24:08.630

我试图写一个类并分隔“\n”，但我找到了富文本框！

是的！有用：

```
 RichTextBox rch = new RichTextBox();
        rch.Text = cmn;
        foreach (string l in rch.Lines)
            strw.WriteLine(l); 
```

# formatting - 在 Eclipse CDT 格式化程序中强制换行

> ID：13347106
> 
> 赞同：2
> 
> 时间：2012-11-12T16:05:10.430
> 
> 标签：formatting, eclipse-cdt, line-breaks

我试图让 Eclipse 停止将我的枚举压缩到一行。在线搜索时，我不断看到人们（例如[这个问题](https://stackoverflow.com/questions/6676305/how-to-stop-eclipse-formatter-from-placing-all-enums-on-one-line?rq=1)）提到“强制拆分”复选框，但在我的 Formatter 选项（在 CDT Juno 中）中没有看到一个。这是特定于 java 的选项吗？

有一个复选框'从不加入已经换行的行'，这是他们的意思吗？不幸的是，我已经格式化了我的文件，假设“新行上的每个元素”实际上意味着“新行上的每个元素”，所以这无济于事

在“换行”选项卡上，我选择了“将所有元素换行，每个元素都换行”，但这似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:10:32.480

我不认为它是 Java 特定的。我下载了 Juno 的 CDT 版本，并且有“强制拆分”复选框。

![CDT 格式化程序](../Images/20a430c4e1b958a21b5f0cb4988bc86d.png)

我的[CDT Juno](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR1/eclipse-cpp-juno-SR1-macosx-cocoa-x86_64.tar.gz)版本是：Juno Service Release 1 Build id：20120920-0800

# java - 脚本java嵌入

> ID：13347108
> 
> 赞同：0
> 
> 时间：2012-11-12T16:05:12.443
> 
> 标签：java, scripting

有人在 JAVA 应用程序中嵌入了简单的脚本语言。

我的目的是将应用程序分为 3 部分

第 1 部分）在 java 中硬编码应用程序从 2 个源（Db、文件、scocket、...、mind）读取并存储 2 个对象。

Part2）应用程序结合嵌入式脚本语言做出决定编辑对象并在最后调用公开的函数，例如：如果 2 个对象具有相同的名称，则调用该函数做的事情，如果第二个对象的名称下一步是调用更新函数。

第 3 部分）java 应用程序执行已调用的工作。

现在我正在使用一个使用具有很多接口的 JAR 文件的应用程序来执行此操作。因此，如果我不想只公开第 2 步，我可以给出接口的规范。这个想法是复制JDBC。无论如何，technichan 很难在 pere JAVA 中编写和编译并创建一个 JAR。所以我正在寻找一个好的替代品。但它必须像 jar 替换一样简单但功能强大。我不是想在一个 JAR 中编译所有东西，我需要将它们很好地分开。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:34:41.307

有用于此目的的[Java Scripting API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)。

[例如， Groovy](http://groovy.codehaus.org/)提供了从 Java 应用程序中加载、编译、接口和执行 Groovy 脚本的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:47:15.323

您也可以尝试 MVEL [http://mvel.codehaus.org/](http://mvel.codehaus.org/) MVEL 是一种用于基于 Java 的应用程序的强大表达语言。它快速且易于使用。表达式语言 = java 作为脚本语言

# jquery - jQuery MultFile 上传禁用上传按钮

> ID：13347109
> 
> 赞同：1
> 
> 时间：2012-11-12T16:05:19.237
> 
> 标签：jquery, asp.net

我正在尝试使用[jQuery Multiple File Upload](http://www.fyneworks.com/jquery/multiple-file-upload/)，但在验证时遇到问题。验证运行后，文件上传控件被禁用，我不知道为什么。我在这里重新创建了最低限度来演示这个问题。

```
<%@ Page Language="C#" AutoEventWireup="true"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<script language="c#" runat="server">
    protected void validate(object source, ServerValidateEventArgs args)
    {
        args.IsValid = false;
    }
</script>
<head runat="server">
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script src="Scripts/jquery.MultiFile.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        function validate(sender, args)
        {
            args.IsValid = false;
            //addedd as suggested on the following, but it doesn't work
            //fyneworks.com/jquery/multiple-file-upload/#tab-Uploading
            $.fn.MultiFile.reEnableEmpty();  
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:FileUpload ID="attachments" runat="server" class="multi"  />
        <asp:CustomValidator runat="server" ID="customValidator" 
                             ErrorMessage="This field is required" 
                             OnServerValidate="validate"
                             ClientValidationFunction="validate" />
        <br />
        <asp:Button ID="Button1" runat="server" Text="Submit" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:24:31.887

我想出解决这个问题的唯一方法是手动重新启用按钮。我添加了超时只是为了确保在我的代码运行之前一切都已完成。

```
setTimeout(function () { $(questionNode).find('> .answer > div > .MultiFile-wrap > .multi').removeAttr('disabled');}, 200); 
```

# indentation - Sublime Text 2 Lines too Far Right

> ID：13347112
> 
> 赞同：0
> 
> 时间：2012-11-12T16:05:24.103
> 
> 标签：indentation, sublimetext2

今天我打开我的笔记本电脑在 Sublime Text 2 中编码，每个文件都有它在屏幕中间的起始缩进行。我不知道该怎么称呼它，但是，例如，我的问题的这个文本框会启动我的光标，以便在框的最左边缘输入。

今天早上，那行在 Sublime 文本编辑器的中间。而不是从最左边开始的每一行，它们的起始行位于文本编辑器窗口的中间。这听起来很小，但它让我很烦恼。

这是什么设定？我怎样才能恢复正常的压痕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:13:19.337

截屏？

无论如何，你`Preferences.sublime-settings`说的这个设置是什么？

```
// Draws text centered in the window rather than left aligned
"draw_centered": false, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:17:16.940

找到你的崇高设置（在 OSX 中它是崇高文本 2-首选项 - 设置（默认））并找到“边距”值（默认应该是 4）。可能它已经改变了一些方式。

# c++ - 为什么否定静态成员变量会产生链接器错误？

> ID：13347116
> 
> 赞同：2
> 
> 时间：2012-11-12T16:05:42.747
> 
> 标签：c++

请考虑以下迷你示例

```
// CFoo.hpp
class CFoo{
private:
    static const double VPI = 0.5;    
public:
    double getVpi();
};

// CFoo.cpp
#include "CFoo.hpp"    
double CFoo::getVpi(){
    double x = -VPI;
    return x;
}

// main.cpp
#include "CFoo.hpp"    
int main(){
    CFoo aFoo();
    return 0;
} 
```

使用 gcc 4.5.1 版本的程序会产生错误`CFoo.cpp: undefined reference to CFoo::VPI`。错误**不会**发生，如果

*   VPI 未被否定
*   否定写为`double x = -1 * VPI;`
*   CFoo 类的声明和定义发生在同一个文件中

你知道这个错误的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:33:43.803

您的代码存在多个问题。首先，这不是有效的 C++03：

```
class CFoo{
private:
    static const double VPI = 0.5;    
// ...
}; 
```

`const`当且仅当该初始化程序是整数或`const`枚举类型 时，静态数据成员的声明才能指定常量初始化程序。`0.5`两者都不是，因此您的代码不是有效的 C++。 **9.4.2 静态数据成员**包括：

> 2/ 静态数据成员在其类定义中的声明不是定义 [...]静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内。[...]
> 
> 4/ 如果一个静态数据成员是 const 整数或 const 枚举类型，它在类定义中的声明可以指定一个常量初始化器，它应该是一个整数常量表达式（5.19）。

为了初始化`VPI`，您必须在 CPP 文件中这样做：

## 标题：

```
class CFoo{
private:
    static const double VPI;    
}; 
```

## cp:

```
const double CFoo::VPI = 0.5; 
```

另一个不相关的问题在这里：

```
int main(){
    CFoo aFoo(); // NOT OK
    return 0; 
```

表达式`CFoo aFoo();`没有做你认为它做的事情。您认为它声明了一个`aFoo`类型的对象并使用的默认构造`CFoo`函数对其进行初始化。`CFoo`但它实际上做的是声明一个名为`aFoo`不带参数的函数，`CFoo`按值返回。这被称为[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。为了做你想做的事，简单地省略括号：

```
CFoo aFoo; 
```

# php - 每行更新一个字段，100万+行

> ID：13347117
> 
> 赞同：0
> 
> 时间：2012-11-12T16:05:44.423
> 
> 标签：php, mysql

我有一个需要“清理”的大型地址数据库。

例如，地址包含县，但并不总是在同一个字段中，有时它在 address3 有时在 address4 或根本没有。

我将所有内容都放在了一个表中，创建了一个名为 County 的新字段，然后 php 将数据（一次 1000 行用于测试）加载到一个数组中。

它搜索“CO”。在地址 3 或 4 中，如果找到，则将该单元格的内容复制到“县”。到目前为止，一切都很好。

问题是它运行速度非常慢，我使用以下作为更新：

$update = "更新机会 SET County='" 。$地址4 。“'”。“在哪里 id=”。$id;

有没有比为每个条目运行上述行更快的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:09:54.893

直接在 SQL 中执行它会更快，但就其性质而言，这种字符串搜索会非常慢：

```
UPDATE opportunities
SET    County = CASE
         WHEN address3 LIKE '%CO.%' THEN address3
         WHEN address4 LIKE '%CO.%' THEN address4
       END 
```

# java - 为什么程序会打印“true”“true”？

> ID：13347118
> 
> 赞同：-2
> 
> 时间：2012-11-12T16:05:44.580
> 
> 标签：java

> **可能重复：**
> [为什么这些 == 而不是 `equals()`？](https://stackoverflow.com/questions/1259693/why-are-these-but-not-equals)

为什么这段代码会打印

真的

真的

```
public class Test {
        public static void main(String[] args){
            String st1 = "abc";
            String st2 = "abc";

            Integer k1 = 100;
            Integer k2 = 100;

            System.out.println(st1 == st2);
            System.out.println(k1 == k2);
        }
    } 
```

为了比较对象，我们使用方法 equals()。但是为什么这样就可以了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:08:16.020

`==`比较对象引用。由于您是硬编码的字符串，因此它们被实习并且都使用相同的引用，因此第一个是正确的。Integer 还缓存常用数字，因此您的两个 Integer 也引用同一个对象，这使得第二个引用比较为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:07:19.613

```
 System.out.println(st1 == st2); 
```

**st1**存储在字符串常量池中（首次创建时）；当编译器看到`st2="abc"`它时，它只会将**st2**指向字符串常量池中先前创建的对象。即，**st1**和**st2**指向`"abc"`String 常量池中的同一个对象()，`==`运算符检查两个引用变量是否指向同一个对象。

```
 System.out.println(k1 == k2); 
```

在这种情况下，您的包装器实例被缓存到小范围内，因此`==`返回 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:07:25.003

1）两个字符串都将被视为字符串文字，它们将被实习并存储到相同的内存位置。

`==`检查引用是否相等，因此两个引用都指向同一个对象并返回 true。

2)`Integer`实例被缓存为小范围，这就是为什么`k1 == k2`返回 true 的原因`100`。

# ajax - htaccess 将 AJAX url 重写为漂亮的链接

> ID：13347120
> 
> 赞同：0
> 
> 时间：2012-11-12T16:05:52.590
> 
> 标签：ajax, .htaccess, seo, friendly-url

我正在使用基于 AJAX 的 Wordpress 主题。一种加载内容的好方法，但对于 SEO 目的而言并非如此。

URL 的全部和宽度为“相同”字符串，例如：#menu-item-44（唯一的区别是末尾的数字）。

因为它是 AJAX 驱动的，我不能使用 Wordpress 的永久链接结构，所以我的问题是，我可以通过在我的 htaccess 文件中重写来解决这个问题吗？

例如：www.somesite.com/#menu-item-44 变为 www.somesite.com/contact

您的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:09:19.330

您不能重写 url 的 # 部分，因为它不会发送到服务器。

查看 javascript pushstate() 和使用 hash bangs 的 googles ajax 解决方案 (#!)

# java - 从控制台运行 java 的 NoClassDefFoundError

> ID：13347122
> 
> 赞同：-2
> 
> 时间：2012-11-12T16:06:09.000
> 
> 标签：java, linux, terminal

当我尝试在终端上的 Linux 上运行 Java 时，会发生以下情况：

```
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorldApp/class
Caused by: java.lang.ClassNotFoundException: HelloWorldApp.class
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source) 
```

谁能帮我这个？

编辑：我在字节码文件的文件夹中并在终端上运行它：

```
bash-4.1$ java class HelloWorldApp 
```

源文件：

```
/**
 * The HelloWorldApp class implements an application that
 * simply prints "Hello World!" to standard output.
 */
class HelloWorldApp {
    public static void main(String[] args) {
    System.out.println("Hello World!"); // Display the string.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:13:53.320

你正在执行

`java HelloWorldApp.class`

但它必须是

`java HelloWorldApp`

您可能不会将类附加到您的呼叫中，而是将类名命名为普通名称。

此外，正如其他人所说，最好使用包作为默认包中的类不能正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T03:49:17.980

你还应该注意，如果你在代码中有包声明，即使你尝试了所有花哨的修复，比如设置 CLASSPATH，它也会搞砸。例如，如果您有：

```
package blah;

public class HelloWorld
{
    public static void main(String[] args)
    {
         System.out.println("Hello world");
    }
} 
```

该行：包等等；编译后会导致java HelloWorld失败。所以删除此行，您应该能够通过 cmd 行运行 src。

# drupal - 在 Drupal 7 中显示自定义菜单中的子链接

> ID：13347124
> 
> 赞同：2
> 
> 时间：2012-11-12T16:06:18.783
> 
> 标签：drupal, drupal-7

我是 Drupal 的新手，所以请耐心等待。我正在使用 Omega 主题 (http://drupal.org/project/omega) 并创建了一个自定义菜单用作主菜单。在模板中，我使用它来获取和显示菜单：

```
<?php print theme('links', array('links' => menu_navigation_links('menu-omega-main-menu'), 'attributes' => array('id' => 'main-menu', 'class' => array('links', 'inline', 'clearfix', 'main-menu'))));?> 
```

当我去查看该站点时，菜单会显示，但是子菜单链接不会被呈现。我也尝试过这个：

```
<?php print theme('links', array('links' => menu_navigation_links('menu-omega-main-menu',1), 'attributes' => array('id' => 'main-menu', 'class' => array('links', 'inline', 'clearfix', 'main-menu'))));?> 
```

尝试设置菜单渲染但根本不显示的级别深度。

对于大多数人会尝试提出的第一个问题，是的，我选中了“显示为扩展”。

# excel - 如果单元格B重复，Excel将单元格A复制到单元格C

> ID：13347125
> 
> 赞同：-4
> 
> 时间：2012-11-12T16:06:22.597
> 
> 标签：excel, duplicates

我在excel中有两列，A列是数字，B列是各种文本的副本。

如果 B 列重复，我需要一种将 A 列复制到 C 列的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:15:33.933

如果您只是想指出重复，这是否适用于您的情况（公式进入`C2`）？

```
=IF(COUNTIF(B:B,B2)>1,A2,"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T21:02:51.260

处理副本，假设数据标题位于第 1 行。按 B 列对数据进行排序。

在 C2 中，键入`=IF(B2=B1,A1,"")` 并向下复制工作表。

然后，如果有重复，它将出现在 C 列

# powershell - 使用 Powershell 激活 Windows 2008 R2 服务器

> ID：13347126
> 
> 赞同：1
> 
> 时间：2012-11-12T16:06:23.977
> 
> 标签：powershell, windows-server-2008-r2

如何使用 powershell 输入密钥然后激活 Windows 2008 R2 安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-08T08:13:22.953

我在 2008 R2 上遇到了同样的问题。这就是我所做的。

```
$all_services = Get-WmiObject -Query "SELECT * FROM SoftwareLicensingService"
$all_services.InstallLicense($key)
$service = Get-WmiObject SoftwareLicensingProduct | Where-Object {$_.PartialProductKey}
$service.Activate()
$all_services.RefreshLicenseStatus() 
```

现在，我不确定为什么 $service 没有安装方法。可能有一种更有效的方法可以做到这一点，但关键是您需要在刷新之前调用 activate 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:28:13.810

试试这个：[如何通过 PowerShell 激活 Windows 7](http://smallbusiness.chron.com/activate-windows-7-through-powershell-28450.html)

*   步骤 3：`$service= get-wmiObject -query "select * from SoftwareLicensingService" -computername`计算机 将“计算机”替换为计算机名称。

*   第 4 步：安装许可证密钥。以下代码将 Windows 激活许可证添加到计算机：`$service.InstallProductKey($key)`和`$service.RefreshLicenseStatus()`. 替换`$key`为您的 Windows 许可证密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:20:43.363

我使用`slmgr`了实用程序 - 如此处所述：

*   [Slmgr.vbs 选项](http://technet.microsoft.com/en-us/library/ff793433.aspx)
*   使用 cscript.exe /B 抑制提示的示例：

`cscript.exe /B "c:\windows\system32\slmgr.vbs" -ipk XXXXX-XXXXX-XXXXX-XXXXX-XXXXX -ato`

和这里：

*   [来自 TechNet 的 Windows 8 Enterprise 的激活问题](http://blogs.technet.com/b/blainbar/archive/2012/08/21/activation-issue-seen-with-windows-8-enterprise-from-technet.aspx)

# django - 为什么在记录信息（django）时get_FOO_display（）返回整数值？

> ID：13347128
> 
> 赞同：10
> 
> 时间：2012-11-12T16:06:32.480
> 
> 标签：django

为什么在记录信息（django）时get_FOO_display（）返回整数值？

我有一个模型字段，它使用一个选项来限制它的值。这工作正常，我让它在应用程序中的任何地方都可以工作，除了记录信息时，get_FOO_display() 方法返回底层整数值而不是人类可读的版本。

这是模型定义（删节）：

```
THING_ROLE_MONSTER = 0
THING_ROLE_MUMMY = 1

ROLE_CHOICES = (
    (THING_ROLE_MONSTER, u'Monster'),
    (THING_ROLE_MUMMY, u'Mummy'),
)

# definition of property within model
class Thing(models.Model):
    ...
    role = models.IntegerField(
        'Role',
        default=0,
        choices=ROLE_CHOICES
    ) 
```

如果我在 (django) 交互式 shell 中运行它，它的行为完全符合您的预期：

```
>>> from frankenstein.core.models import Thing
>>> thing = Thing()
>>> thing.role = 0
>>> thing.get_role_display()
u'Monster' 
```

**但是**，当我在字符串格式化/日志记录方案中使用完全相同的构造时，我遇到了问题：

```
logger.info('New thing: <b>%s</b>', thing.get_role_display()) 
```

返回：

```
New thing: <b>0</b> 
```

帮助！

[更新 1]

当我在交互式 shell 中运行日志记录时，我得到了正确的输出：

```
>>> from frankenstein.core.models import Thing
>>> import logging
>>> thing = Thing()
>>> thing.role = 0
>>> logging.info('hello %s', b.get_role_display())
INFO hello Monster 
```

[更新 2] Django 内部结构

跟进下面@joao-oliveira 的回答，我深入研究了内部结构并发现了以下内容。

底层的 _get_FIELD_display 方法`django.db.models`如下所示：

```
def _get_FIELD_display(self, field):
    value = getattr(self, field.attname)
    return force_unicode(dict(field.flatchoices).get(value, value), strings_only=True) 
```

如果我在代码中放置一个断点，然后运行 ​​ipdb 我可以看到我遇到了问题：

```
ipdb> thing.get_role_display()
u'1'
ipdb> thing._get_FIELD_display(thing._meta.get_field('role'))
u'1' 
```

所以，修复并没有改变任何东西。如果我然后尝试手动运行`_get_FIELD_display`方法代码，我会得到：

```
ipdb> fld = thing._meta.get_field('role')
ipdb> fld.flatchoices
[(0, 'Monster'), (1, 'Mummy')]
ipdb> getattr(thing, fld.attname)
u'1'
ipdb> value = getattr(thing, fld.attname)
ipdb> dict(fld.flatchoices).get(value, value)
u'1' 
```

这相当于说：

```
ipdb> {0: 'Monster', 1: 'Mummy'}.get(u'1', u'1')
u'1' 
```

所以。我们遇到的问题是该方法使用字符串值`u'1'`在选择字典中查找相应的描述，但字典键是整数，而不是字符串。因此，我们永远不会得到匹配，而是默认值，它设置为现有值（字符串）。

如果我手动强制强制转换为 int，则代码按预期工作：

```
ipdb> dict(fld.flatchoices).get(int(value), value)
'Mummy'
ipdb> print 'w00t' 
```

这一切都很好，但没有回答我最初的问题，即为什么 get_foo_display 方法在大多数情况下**都**返回正确的值。在某些时候，必须将字符串 (u'1') 转换为正确的数据类型 (1)。

**[更新 3] 答案**

虽然荣誉奖必须归功于 Joao 的洞察力，但赏金要归功于 Josh，因为他指出了一个直截了当的事实，即我一开始就传递了错误的值。我把这归结为来自“强类型世界”的移民，这些事情不可能发生！

我在这里没有包含的代码是该对象是从 django 表单中初始化的，使用`cleaned_data`来自[ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield)。问题在于 ChoiceField 的输出是字符串，而不是整数。我错过的一点是，在松散类型的语言中，可以使用字符串设置整数属性，并且不会发生任何坏事。

现在研究了这一点，我发现我应该使用[TypedChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#typedchoicefield)，以确保输出`cleaned_data`始终是整数。

谢谢你们。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-13T12:00:36.023

如果这听起来屈尊俯就，我真的很抱歉，但是您是否 100% 确定您将值设置为整数 1 而不是字符串“1”？

我已经深入研究了内部结构并运行了一些测试，并且您遇到的问题有意义的唯一方法是将值设置为字符串。在这里查看我的简单测试：

```
>>> from flogger.models import TestUser
>>> t = TestUser()
>>> t.status = 1
>>> t.get_status_display()
u'Admin'
>>> t.status = '1'
>>> t.get_status_display()
u'1' 
```

检查您的视图代码，或任何实际设置值的代码，并直接检查该字段的输出。

正如您从内部模型代码中粘贴的那样：

```
def _get_FIELD_display(self, field):
    value = getattr(self, field.attname)
    return force_unicode(dict(field.flatchoices).get(value, value), strings_only=True) 
```

它只是获取字段的当前值，并索引到字典中，如果未找到查找，则返回属性的值。

我猜以前没有错误，因为该值在插入数据库之前被强制转换为整数。

编辑：

关于您提到python类型系统的更新。首先，您应该使用[TypedChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#typedchoicefield)来确保表单验证您期望的类型。其次，python**是**一种强类型语言，但是在准备数据库时`IntegerField`它会自己进行强制转换。`int()`

变量没有类型，但其中的值是类型。实际上，我很惊讶 the`IntegerField`也将字符串强制为 int 。在这里学习很好 - 首先检查基础知识！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:49:18.203

没有尝试过您的代码，@like-it 也没有回答抱歉，但是models.Model中的[_get_FIELD_display](https://github.com/django/django/blob/stable/1.4.x/django/db/models/base.py#L580)在字段中设置了[get_Field_display](http://en.wikipedia.org/wiki/Curry_%28programming_language%29)函数，所以这可能就是您获得该输出[的原因](https://github.com/django/django/blob/stable/1.4.x/django/db/models/fields/__init__.py#L242)

尝试调用 _get_FIELD_display：

```
logging.info('hello %s', b._get_FIELD_display(b._meta.get('role'))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:42:47.097

尝试这个：

```
class Thing(models.Model):

    THING_ROLE_MONSTER = 0
    THING_ROLE_MUMMY = 1

    ROLE_CHOICES = (
        (THING_ROLE_MONSTER, u'Monster'),
        (THING_ROLE_MUMMY, u'Mummy'),
    )

    role = models.IntegerField('Role', default=0,choices=ROLE_CHOICES) 
```

# objective-c - 设置包中切换开关的状态

> ID：13347129
> 
> 赞同：0
> 
> 时间：2012-11-12T16:06:33.857
> 
> 标签：objective-c, xcode, ios6, settings.bundle

我有 UIImageView 在 View 中具有背景图像的作用。我想在此 UIImageView 中加载两个不同的图像，具体取决于在 Settings Bundle 中的切换开关中选择的状态。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:44:33.390

尝试这样的事情：

```
NSUserDefaults* settings = [NSUserDefaults standardUserDefaults];
NSString* imgName = [settings boolForKey:@"toggle_switch"] ? @"switch_on.png" : @"switch_off.png";
UIImage* img = [UIImage imageNamed:imgName];
[imageView setImage:img]; 
```

# db2 - 子选择时的db2情况

> ID：13347131
> 
> 赞同：1
> 
> 时间：2012-11-12T16:06:39.647
> 
> 标签：db2, case

我在 IBM DB2 上有以下 SQL 查询。

```
 SUM(CASE
              WHEN  verzijaplaca.vpl_vrsteplacila = 9150 THEN
                (select sum(verplaca.vpl_bruto) 
                        from pet320.verzijaplaca as verplaca
                       )    
              ELSE 0
            END) AS "brutoplacazaure" 
```

内部选择有效，但是当我将它包含在 CASE 中时，它会报告错误。

错误：列函数的操作数无效。

DB2 SQL 错误：SQLCODE=-112，SQLSTATE=42607，SQLERRMC=null，DRIVER=3.57.91 错误代码：-112

如果我只跑

```
 SUM(CASE
              WHEN  verzijaplaca.vpl_vrsteplacila = 9150 THEN
                (1.0)   
              ELSE 0
            END) AS "brutoplacazaure" 
```

有用

有什么建议么？？似乎 DB 2 不支持内部 sql 以防 case 或 smth 这样

谢谢

整个sql查询如下

```
 SELECT
      zaposleni.za_koda AS "za_koda",
            MAX(enotezpiz.ezp_rsza) AS "ezp_rsza",
            MAX(zaposleni.za_polnoime) AS "za_polnoime",
            MAX(verzije.ve_datnamena) AS "ve_datnamena",
            MAX(verzije.ve_datizp) AS "ve_datizp",
            MAX(opp_telefonodgos) AS "opp_telefonodgos",
            MAX(pod_krajzaizpise ||', ') AS "pod_krajzaizpise",
            MAX(racuni.ra_stracuna) AS "ra_stracuna",
            MAX(racuni.ra_modul) AS "ra_modul",
            MAX(racuni.ra_sklstev) AS "ra_sklstev",
            MAX(verzije.ve_datizp) AS "ve_datizp",
            MAX(verzije.ve_naziv) AS "ve_naziv",
            SUM(CASE

                           WHEN vrsteplacila.vp_skupinevrpl in (1,2,3,4,16) and vrsteplacila.vp_udodatkov = 0 THEN verzijaplaca.vpl_eure
                           ELSE 0
            END) AS "mfure",

            MAX(dmzaposlenih.dmz_enotezpiz) AS "dmz_enotezpiz",

            (select  
                        SUM(olajsave.ozz_znesekolajsave) / 12
                           from 
                            pet320.olajsavedczaposlenih as olajsave
                           INNER JOIN 
                            pet320.verzije as verzija1
                           ON 
                            olajsave.ooz_datumod <= verzija1.ve_datkm AND (olajsave.ooz_datumdo IS NULL OR olajsave.ooz_datumdo >= verzija1.ve_datzm)
                           INNER JOIN 
                            pet320.zaposleni as zapp
                           ON 
                            olajsave.ozz_zaposleni = zapp.za_id_za
                           INNER JOIN
                            pet320.VERZIJAPLACA as vpl
                           ON
                           vpl.vpl_verzije = verzija1.ve_id_ve
                           AND zapp.za_id_za = vpl.vpl_zaposleni

                           where 
                            1=1

                           AND (vpl.vpl_vrsteplacila = 9150 OR vpl.vpl_skupinevrpl = 6)) AS "vz_znesvzddc",

            SUM(CASE
                           WHEN vrsteplacila.vp_skupinevrpl  = 3 AND vrsteplacila.vp_udodatkov = 0 THEN verzijaplaca.vpl_eure
                           WHEN vrsteplacila.vp_skupinevrpl  = 4 AND vrsteplacila.vp_udodatkov = 1 THEN verzijaplaca.vpl_eure
                           ELSE
                           0
            END) AS "bolovalure",

            SUM(CASE
                           WHEN vrsteplacila.vp_skupinevrpl = 4 AND vrsteplacila.vp_udodatkov = 0 THEN verzijaplaca.vpl_eure
                           ELSE
                           0
            END) AS "izostanekzdelaure",

            SUM(CASE
                           WHEN vrsteplacila.vp_skupinevrpl = 3 THEN verzijaplaca.vpl_bruto
                           ELSE
                           0
            END) AS "brutoznesekboleznine",

            SUM(CASE WHEN vrsteplacila.vp_skupinevrpl = 16 THEN verzijaplaca.vpl_bruto
                           ELSE
                           0
            END) AS "brutodopolnega",

            SUM(CASE WHEN vrsteplacila.vp_skupinevrpl = 16 and vrsteplacila.vp_udodatkov = 0 THEN verzijaplaca.vpl_eure
                           ELSE
                           0
            END) AS "uredopolenga",

            SUM(CASE
                           WHEN vrsteplacila.vp_skupinevrpl IN (16) THEN (verzijaplaca.vpl_bruto - verzijaplaca.vpl_neto)
                           ELSE
                           0
            END) AS "prispevkizasocvarnost",

            SUM(CASE
                           WHEN vrsteplacila.vp_skupinevrpl IN (16) THEN verzijaplaca.vpl_akdohod
                           ELSE
                           0
            END) AS "akdohodnine",
            SUM(CASE 
```

## 当 verzijaplaca.vpl_skupinevrpl IN (16) 那么 verzijaplaca.vpl_neto - verzijaplaca.vpl_akdohod

```
 ELSE
                           0
            END) AS "netonadomestilo",
            SUM(CASE WHEN  verzijaplaca.vpl_vrsteplacila = 9150 THEN
                (select sum(verplaca.vpl_bruto) 
                        from pet320.verzijaplaca as verplaca
                       INNER JOIN
                        pet320.verzije as ver
                        ON
                        ver.ve_id_ve = verplaca.vpl_verzije
                        INNER JOIN
                        pet320.zaposleni as zapo
                        ON
                        zapo.za_id_za = verplaca.vpl_zaposleni
                        AND ver.ve_id_ve = verplaca.vpl_verzije

                         where verplaca.vpl_vrsteplacila in (select vp_id_vp from pet320.vrsteplacila where vp_skupinevrpl in (1,2))
                          and verplaca.vpl_zaposleni = zapo.za_id_za
                          and verplaca.vpl_verzije = ver.ve_id_ve)  
              ELSE 0
            END) AS "brutoplacazaure"

  FROM
            pet320.verzijaplaca AS verzijaplaca

        INNER JOIN
                        pet320.vrsteplacila AS   vrsteplacila
        ON
                        verzijaplaca.vpl_vrsteplacila = vrsteplacila.vp_id_vp

        INNER JOIN
                        pet320.verzije AS verzije
        ON
                        verzijaplaca.vpl_verzije = verzije.ve_id_ve

        INNER JOIN
                        pet320.zaposleni AS zaposleni
        ON
                        verzijaplaca.vpl_zaposleni = zaposleni.za_id_za

        INNER JOIN
                        (SELECT
                                       a.*
                        FROM
                                       pet320.dmzaposlenih AS a
                        INNER JOIN
                                       (SELECT
                                                       dmz_zaposleni,
                                                       MAX(dmz_datumod) AS max_dmz_datumod
                                       FROM
                                                       pet320.dmzaposlenih
                                       GROUP BY
                                                       dmz_zaposleni) AS b
                        ON
                                       a.dmz_zaposleni = b.dmz_zaposleni
                                       AND a.dmz_datumod = b.max_dmz_datumod) as dmzaposlenih
        ON
                        dmzaposlenih.dmz_zaposleni = verzijaplaca.vpl_zaposleni

        INNER JOIN
                        pet320.enotezpiz AS enotezpiz
        ON
                        dmzaposlenih.dmz_enotezpiz = enotezpiz.ezp_id_ezp

        LEFT JOIN
                        pet320.osnovnipodplace AS osnovnipodplace
        ON
                        1=1

        INNER JOIN
                        pet320.racuni AS racuni
        ON
                        osnovnipodplace.opp_racuni = racuni.ra_id_ra

        INNER JOIN
                        pet320.podjetja AS podjetja
        ON
                        osnovnipodplace.opp_podjetja = podjetja.pod_id_pod

        LEFT JOIN
                        pet320.verzijazaposleni AS verzijazaposleni
        ON
                        verzijazaposleni.vz_zaposleni = zaposleni.za_id_za 
                        AND verzijazaposleni.vz_verzije = verzije.ve_id_ve

        INNER JOIN
                        pet320.verzijastrmesta as verzijastrmesta
        ON
                        verzijastrmesta.vs_verzije = verzije.ve_id_ve
                        AND verzijastrmesta.vs_strmesta = dmzaposlenih.dmz_strmesta
        INNER JOIN
                        pet320.verzijaorgenote AS verzijaorgenote
        ON
                        verzijaorgenote.vo_verzije = verzije.ve_id_ve
                        AND verzijaorgenote.vo_orgenote = dmzaposlenih.dmz_orgenote
        INNER JOIN
                        pet320.zaposinvalidi AS zaposinvalidi
        ON
                        zaposinvalidi.zi_zaposleni = verzijaplaca.vpl_zaposleni and zi_datdo is null

        INNER JOIN
                        pet320.verzijasumstavki AS verzijasumstavki
        ON
                  verzijasumstavki.vss_verzije = verzijaplaca.vpl_verzije AND
                  verzijasumstavki.vss_zaposleni = verzijaplaca.vpl_zaposleni AND
                  verzijasumstavki.vss_vrsteplacila = 9301

        WHERE
                        1=1
                        AND vrsteplacila.vp_skupinevrpl  in (1,2,3,4,16)
                        AND (verzijaplaca.vpl_verzije = 215)
                        AND (verzijaplaca.vpl_zaposleni  IS NULL OR 1=1)
                        AND (verzijaplaca.vpl_strm_strmesta  IS NULL OR 1=1)
                        AND (dmzaposlenih.dmz_orgenote  IS NULL OR 1=1)
                        AND (dmzaposlenih.dmz_izplacilnamesta  IS NULL OR 1=1)
                        AND (verzijaplaca.vpl_placilnirazredi  IS NULL OR 1=1)
                        AND (dmzaposlenih.dmz_vrstapog  IN (1,0))

            AND verzijaplaca.vpl_zaposleni in (select distinct vpl_zaposleni from pet320.verzijaplaca  where vpl_skupinevrpl = 16 AND vpl_verzije = 215)

        group by dmzaposlenih.dmz_enotezpiz,
                 zaposleni.za_koda

        ORDER BY
                        dmzaposlenih.dmz_enotezpiz,
                 zaposleni.za_koda

           INNER JOIN
            (SELECT
                           a.*
            FROM
                           pet320.dmzaposlenih AS a
            INNER JOIN
                           (SELECT
                                           dmz_zaposleni,
                                           MAX(dmz_datumod) AS max_dmz_datumod
                           FROM
                                           pet320.dmzaposlenih
                           GROUP BY
                                           dmz_zaposleni) AS b
            ON
                           a.dmz_zaposleni = b.dmz_zaposleni
                           AND a.dmz_datumod = b.max_dmz_datumod) as dmzaposlenih 
```

ON dmzaposlenih.dmz_zaposleni = verzijaplaca.vpl_zaposleni

内连接 pet320.enotezpiz AS enotezpiz ON dmzaposlenih.dmz_enotezpiz = enotezpiz.ezp_id_ezp

左加入 pet320.osnovnipodplace 作为 osnovnipodplace ON 1=1

INNER JOIN pet320.racuni AS racuni ON osnovnipodplace.opp_racuni = racuni.ra_id_ra

INNER JOIN pet320.podjetja AS podjetja ON osnovnipodplace.opp_podjetja = podjetja.pod_id_pod

左连接 pet320.verzijazaposleni AS verzijazaposleni ON verzijazaposleni.vz_zaposleni = zaposleni.za_id_za AND verzijazaposleni.vz_verzije = verzije.ve_id_ve

INNER JOIN pet320.verzijastrmesta as verzijastrmesta ON verzijastrmesta.vs_verzije = verzije.ve_id_ve AND verzijastrmesta.vs_strmesta = dmzaposlenih.dmz_strmesta INNER JOIN pet320.verzijaorgenote AS verzijaorgenote ON verzijaorgenote.vo_verzije = verzije.ve_id_ve AND verzijaorgenote.vo_orgenote = dmzaposlenih.dmz_orgenote INNER JOIN pet320\. zaposinvalidi AS zaposinvalidi ON zaposinvalidi.zi_zaposleni = verzijaplaca.vpl_zaposleni 和 zi_datdo 为空

INNER JOIN pet320.verzijasumstavki AS verzijasumstavki ON verzijasumstavki.vss_verzije = verzijaplaca.vpl_verzije AND verzijasumstavki.vss_zaposleni = verzijaplaca.vpl_zaposleni AND verzijasumstavki.vss_vrsteplacila = 9301

WHERE 1=1 AND vrsteplacila.vp_skupinevrpl in (1,2,3,4,16) AND (verzijaplaca.vpl_verzije = 215) AND (verzijaplaca.vpl_zaposleni IS NULL OR 1=1) AND (verzijaplaca.vpl_strm_strmesta IS NULL OR 1= 1) AND (dmzaposlenih.dmz_orgenote 为 NULL 或 1=1) AND (dmzaposlenih.dmz_izplacilnamesta 为 NULL 或 1=1) AND (verzijaplaca.vpl_placilnirazredi 为 NULL 或 1=1) AND (dmzaposlenih.dmz_vrstapog IN (1,0))

```
AND verzijaplaca.vpl_zaposleni in (select distinct vpl_zaposleni from pet320.verzijaplaca  where vpl_skupinevrpl = 16 AND vpl_verzije = 215) 
```

由 dmzaposlenih.dmz_enotezpiz、zaposleni.za_koda 组

由 dmzaposlenih.dmz_enotezpiz、zaposleni.za_koda 订购

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:03:58.900

您尝试编写的查询将运行

```
select sum(verplaca.vpl_bruto) 
    from pet320.verzijaplaca as verplaca 
```

并在每次`case`陈述为真时产生完全相同的结果。即使您可以这样做，也不应该这样做，因为一遍又一遍地运行该查询会浪费大量时间。相反，运行该语句一次并存储该值。然后在需要时参考存储的值。这里有几个选项：

```
with vpl_bruto_sum as (
     select sum(verplaca.vpl_bruto) as total
        from pet320.verzijaplaca as verplaca
)
select sum(case when verzijaplaca.vpl_vrsteplacila = 9150 
               then vpl_bruto_sum.total else 0 
           end
       )
    from pet320.verzijaplaca
    inner join vpl_bruto_sum on 1=1; 
```

或者，您可以通过使用连接条件而不是内部 case 语句来简化思考：

```
with vpl_bruto_sum as (
     select sum(verplaca.vpl_bruto) as total
        from pet320.verzijaplaca as verplaca
)
select sum(vpl_bruto_sum.total)
    from pet320.verzijaplaca
    left outer join vpl_bruto_sum on verzijaplaca.vpl_vrsteplacila = 9150; 
```

如果你想计算一个值，然后在多个不同的查询中使用它，你可以使用一个变量：

```
create or replace variable my_sum integer;
set my_sum = (select sum(vpl_bruto) from pet320.verzijaplaca);

select sum(case when verzijaplaca.vpl_vrsteplacila = 9150 
               then my_sum else 0 
           end
       )
    from pet320.verzijaplaca; 
```

希望这将帮助您入门。

看起来您的查询可能还有其他问题。例如，`where 1=1 and...`不是一个有用的构造。关于如何设计更好的查询可能值得寻求帮助——我认为它可能会简单得多，尽管在不知道你在做什么的情况下很难说。

# python - Python pytz：如果一个国家取消 DST 会怎样？

> ID：13347133
> 
> 赞同：6
> 
> 时间：2012-11-12T16:06:47.100
> 
> 标签：python, timezone, pytz

好的，这更像是一个好奇的问题，但是 pytz 是如何知道所有夏令时 (DST) 的呢？例如，“欧洲/哥本哈根”时间在 3 月和 10 月切换。

或者更确切地说，如果一个国家决定取消 DST，会发生什么？每个人都必须获得 Pytz 的更新版本吗？有没有人“在 pytz”跟踪这个？某处有正式的清单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:12:36.343

PyTZ 使用[奥尔森时区数据库](http://en.wikipedia.org/wiki/Tz_database)，并定期更新。PyTZ 不是唯一的用户；大多数 POSIX 系统也使用它，包括 Linux 和 OS X。

是的，只要数据库更新，就会打包 PyTZ 的新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:11:50.753

从[pytz 文档的](http://pytz.sourceforge.net/)[“最新版本”](http://pytz.sourceforge.net/#latest-versions)部分：

> 此软件包将在 Olson 时区数据库发布后更新。

因此，您的问题的答案似乎是肯定的，如果更新 tz 数据库，将发布更新，您将需要更新您的 pytz 安装。

# android - Android：使用 TextWatcher 和 .setError() 进行 EditText 验证

> ID：13347134
> 
> 赞同：1
> 
> 时间：2012-11-12T16:06:56.803
> 
> 标签：android, validation, android-edittext, textwatcher

`TextEdit`我已经使用以下代码实现了一个简单的验证：

```
 title = (EditText) findViewById(R.id.title);
    title.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
             if (title.getText().length() < 1) {
                    title.setError( "Title is required" );
               } else {
                    title.setError(null); 
               }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }
    }); 
```

该函数检查是否在 a 上插入了任何文本`textchange`并且一切正常，直到我将光标放在已经为空的标题字段中，然后再按一次删除。错误消息被重置并且`textwatcher`没有被调用，因为没有文本更改。在这种情况下，我什至如何显示错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:31:25.123

如果键盘发送键命令但文本保持不变，则内部似乎`TextView`有一个标志并调用。`setError(null)`因此，如果文本为“”，我将子类化`EditText`并实现`onKeyPreIme()`吞下删除键。只需`EditTextErrorFixed`在您的 XML 文件中使用：

```
package android.widget;

import android.content.Context;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.view.KeyEvent;

public class EditTextErrorFixed extends EditText {
    public EditTextErrorFixed(Context context) {
        super(context);
    }

    public EditTextErrorFixed(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public EditTextErrorFixed(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    /**
     * Don't send delete key so edit text doesn't capture it and close error
     */
    @Override
    public boolean onKeyPreIme(int keyCode, KeyEvent event) {
        if (TextUtils.isEmpty(getText().toString()) && keyCode == KeyEvent.KEYCODE_DEL)
            return true;
        else
            return super.onKeyPreIme(keyCode, event);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:20:43.303

您还应该能够覆盖该`onKeyUp`方法（[http://developer.android.com/reference/android/view/KeyEvent.Callback.html](http://developer.android.com/reference/android/view/KeyEvent.Callback.html)）。在那里，检查按下的键是否为`KeyEvent.KEYCODE_DEL`，然后检查 EditText 中的文本是否为空。如果是，请抛出您的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-04T13:34:35.320

检查最新的 textInputLayout 和 textInputEditText 以获得更好的结果 - [https://material.io/components/text-fields/android](https://material.io/components/text-fields/android)

# php - 我创建了一个应该在 php 中水平翻转文本的函数，但有些东西不起作用

> ID：13347135
> 
> 赞同：1
> 
> 时间：2012-11-12T16:07:08.057
> 
> 标签：php, text, flip

我正在尝试将字符串中的每个字符替换为相反的字符，但以下代码仅将字符替换为字符，但它无法识别 ASCII 代码。

你能帮我么？你能告诉我为什么吗？我曾尝试使用 chr 函数，但它不起作用。它什么也没告诉我。

这是我的代码：

```
<?php
function flip($v)
{
    $flipped="";
    $size=strlen($v);

    $array=str_split($v,1); 

    for($i=0;$i<$size;$i++)
    {
        switch($array[$i])
            {
                case 'a': $flipped .= '\u0250';
                            break;
                case 'b' : $flipped .='q';
                            break;
                case 'c' : $flipped .='\u0254';
                            break;
                case 'd': $flipped .='p';
                            break;
                case 'e': $flipped .='\u01DD';
                            break;
                case 'f': $flipped .='\u025F';
                            break;
                case 'g' : $flipped .='\u0183';
                            break;
                case 'h': $flipped .='\u0265';
                            break;
                case 'i' : $flipped .='\u0131';
                            break;
                case 'j' : $flipped .='\u027E';
                            break;
                case 'k' : $flipped .='\u029E';
                            break;
                case 'l' : $flipped .='\u0283';
                            break;
                case 'm' : $flipped .='\u026F';
                            break;
                case 'n' : $flipped .='u';
                            break;
                case 'r' : $flipped .='\u0279';
                            break;
                case 't' : $flipped .='\u0287';
                            break;
                case 'v' : $flipped .='\u028C';
                            break;
                case 'w' : $flipped .='\u028D';
                            break;
                case 'y' : $flipped .='\u028E';
                            break;
                case '.' : $flipped .='\u02D9';
                            break;
                case '[' : $flipped .=']';
                            break;
                case '(' : $flipped .=')';
                            break;
                case '{' : $flipped .='}';
                            break;
                case '?' : $flipped .='\u00BF';
                            break;
                case '!' : $flipped .='\u00A1';
                            break;
                case "\'" : $flipped .=',';
                            break;
                case '<' : $flipped .='>';
                            break;
                case '_' : $flipped .='\u203E';
                            break;
                case ';' : $flipped .='\u061B';
                            break;
                case '\u203F' : $flipped .='\u2040';
                            break;
                case '\u2045' : $flipped .='\u2046';
                            break;
                case '\u2234' : $flipped .='\u2235';
                            break;
                case '\r' : $flipped .='\n';
                            break;
                case ' ' : $flipped .=''; 
                            break;  
            }
    }

return $flipped;
}

echo flip("abcdefghijklmnopqrst");
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:25:02.997

将它们更改为 htmlentity 之类的，

```
case 'a': $flipped .= '&#592;';
break;
case 'b' : $flipped .='q';
break;
case 'c' : $flipped .='&#596;';
break; etc.... 
```

# python - 将列表中的所有其他元素相加/将所有其他元素复杂化

> ID：13347142
> 
> 赞同：1
> 
> 时间：2012-11-12T16:07:32.280
> 
> 标签：python

给定一个一般的数字列表，例如 [1, 2, 3, 4, 5, 6]，我需要将此列表拆分为 [(1 + 2j), (3 + 4j), (5 + 6j) 的形式]。

我可以将列表拆分为两个列表 - [1, 3, 5] 和 [2, 4, 6] - 但是在尝试将它们组合成所需形式时遇到两个问题：i）我无法将第二个列表乘以 1j ，返回错误“不能将序列乘以'complex'类型的非整数”，并且ii）由于串联，列表无论如何都是[1,3,5,2,4,6]的形式。

鉴于我正在使用具有 2048 个元素的列表，任何人都可以建议任何快速解决此问题的方法，因为显然大小使得以所需格式单独输入数据是不切实际的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:10:05.470

使用`zip()`和切片：

```
In [72]: lis=[1, 2, 3, 4, 5, 6]

In [73]: [complex(a,b) for a,b in zip(lis[::2],lis[1::2])]
Out[73]: [(1+2j), (3+4j), (5+6j)] 
```

或者：

```
In [74]: [complex(lis[i],lis[i+1]) for i in range(0,len(lis),2)]
Out[74]: [(1+2j), (3+4j), (5+6j)] 
```

或使用迭代器，一种内存高效的解决方案：

```
In [76]: it=iter(lis)

In [77]: [complex(next(it),next(it)) for _ in range(len(lis)/2)]
Out[77]: [(1+2j), (3+4j), (5+6j)] 
```

# android - Android 条码扫描器与网页集成

> ID：13347145
> 
> 赞同：21
> 
> 时间：2012-11-12T16:07:55.137
> 
> 标签：android, webpage, barcode

我整个上午都在研究如何将安卓条形码扫描仪应用程序集成到网页中，但还没有找到我需要知道的确切内容。我想要一个网页，用户可以使用 android 条形码扫描仪填写文本字段。因此，用户将在网页上单击文本字段内部或单击文本字段旁边的按钮，以启动 android 条形码扫描仪。然后他们将扫描条形码并填写文本字段。

我找到了有关如何执行此操作然后转到不同页面的解决方案，但重要的是用户保持在同一页面上。我看过 zxing 项目并认为它可能可以使用，但我不确定它是否允许页面保持不变。

我很确定这是可能的，并且想知道是否有人可以给我一个关于他们如何做到这一点的高级概述。我在想它可能可以通过单击按钮提交的 ajax 请求来完成。ajax 请求将被发送到我的服务器，服务器将向 android 设备发送一些内容，该设备将启动扫描仪并返回数据，这些数据又在 ajax 响应中被发送回。有什么办法可以切断服务器，让安卓浏览器启动条码扫描器？感谢您抽出宝贵时间，感谢您对此进行的任何讨论。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-25T21:18:47.037

[ZXing](https://github.com/zxing/zxing)（斑马线）提供了通过网页通过按钮单击事件、锚标记或其他可以调用移动设备上的 URL 的操作来启动条码扫描器的功能。

当条形码扫描仪应用程序安装在 android 设备上时，URL 调用：

```
zxing://scan/?ret=http://foo.com/products/{CODE}/description&SCAN_FORMATS=UPC_A,EAN_13 
```

会调出设备条码阅读器，用户扫码，通过zxing URL中提供的回调URL参数返回代码。

您可以在此处查看示例（适用于 android）：http: [//zxing.appspot.com/scan](http://zxing.appspot.com/scan)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-15T11:55:23.540

你可以在安卓上试试这个：

> 您可以使用 Zxing 库对网页进行条码扫描

```
 <!DOCTYPE html>
    <script type="text/javascript">
    //This entire block of script should be in a separate file, and included in each doc in which you want scanner capabilities
        function zxinglistener(e){
            localStorage["zxingbarcode"] = "";
            if(e.url.split("\#")[0] == window.location.href){
                window.focus();
                processBarcode(decodeURIComponent(e.newValue));
            }
            window.removeEventListener("storage", zxinglistener, false);
        }
        if(window.location.hash != ""){
            localStorage["zxingbarcode"] = window.location.hash.substr(1);
            self.close();
            window.location.href="about:blank";//In case self.close is disabled
        }else{
            window.addEventListener("hashchange", function(e){
                window.removeEventListener("storage", zxinglistener, false);
                var hash = window.location.hash.substr(1);
                if (hash != "") {
                    window.location.hash = "";
                    processBarcode(decodeURIComponent(hash));
                }
            }, false);
        }
        function getScan(){
            var href = window.location.href.split("\#")[0];
            window.addEventListener("storage", zxinglistener, false);
            zxingWindow = window.open("zxing://scan/?ret=" + encodeURIComponent(href + "#{CODE}"),'_self');
        }

    </script>

    <html>
        <head>
            <script type="text/javascript">
                function processBarcode(b){
                    var d = document.createElement("div");
                    d.innerHTML = b;
                    document.body.appendChild(d);
                }
            </script>
        </head>
        <body>
            <button onclick="getScan()">get Scan</button>
        </body>
    </html> 
```

供参考：[阅读链接](https://github.com/zxing/zxing/wiki/Scanning-From-Web-Pages)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:22:50.970

使用 javascript 界面和 loadurl(javascript...)，您可以从 Android 与您的网页进行通信

```
public void loadScript(String script){      
    webview.loadUrl("javascript:(function() { " + script + "})()");             
}

private class JavaScriptInterface {     
    public void startQRScan() {
        ...
    }
} 
```

google 上有很多例子。

# android - Android - 内部类的 NoClassDefFoundError

> ID：13347146
> 
> 赞同：0
> 
> 时间：2012-11-12T16:07:59.057
> 
> 标签：android, inner-classes

我在外部 jar 上发现了很多关于 NoClassDefFoundError 的信息，但是我在主要活动的内部类上遇到了这个错误：java.lang.NoClassDefFoundError: net.mysite.ezbudget.EZbudget$ConfirmResetFragment。以下是相关代码：

```
 @SuppressLint("NewApi")
void showDialog() {
     DialogFragment newFragment = ConfirmResetFragment.newInstance(0);
     newFragment.show(getFragmentManager(), "dialog");
}

@TargetApi(11)
    public static class ConfirmResetFragment extends DialogFragment {

        public static  ConfirmResetFragment newInstance(int title) {
            ConfirmResetFragment frag = new ConfirmResetFragment();
            Bundle args = new Bundle();
            args.putInt("test", title);
            frag.setArguments(args);
            return frag;
            }
.......
} 
```

谁能给我一个暗示可能会发生什么？我预计这是一个版本控制问题，但错误消息有点令人困惑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:33:55.000

使用[兼容性包](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)支持低于 api 级别 11 的片段。

# asp.net-mvc-4 - 由于程序集 MVC4 应用程序引用 mscorlib 两次而引发警告

> ID：13347149
> 
> 赞同：3
> 
> 时间：2012-11-12T16:08:20.450
> 
> 标签：asp.net-mvc-4, visual-studio-2012, assemblies, projects-and-solutions, mscorlib

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5):     
warning MSB3247: Found conflicts between different versions of the 
same dependent assembly 
Foo.Tests -> C:\Foo.Tests\bin\Debug\Foo.Tests.dll 
```

我使用了这个小工具[ASMSPY](http://mikehadlow.blogspot.co.uk/2011/02/asmspy-little-tool-to-help-fix-assembly.html)，发现我的 3 或 4 个程序集都引用`mscorlib`了两次版本`2.0.0.0`和版本`4.0.0.0.`

我对整个解决方案中的所有文件进行了全面搜索，但没有发现对 mscorlib 的引用。我也无法在 Visual Studio 的参考文件夹中找到它

这可能是因为我已经将解决​​方案从 VS2010 更新到 VS2012，或者将 ASP.NET 的版本更新到了最新的 RTM 版本。我同时做了这两件事，从那以后警告就开始出现了。

我已经阅读了一些关于 SO 的类似问题，但还没有找到对我有用的问题。

谁能解释这里发生了什么以及如何解决它？

# iis - web.config 导致 iis 出现问题

> ID：13347150
> 
> 赞同：0
> 
> 时间：2012-11-12T16:08:21.140
> 
> 标签：iis, web-config, phalanger

到目前为止，我只在 Visual Studio 中使用过这个 web.config。但是，我现在正尝试将我的网站发布到 IIS，并且存在与我的 web.config 相关的错误。它似乎在模块的配置数据上崩溃。

```
<?xml version="1.0"?>

<configuration>
    <system.web>
      <compilation targetFramework="4.5" />
      <httpRuntime targetFramework="4.5" />
    </system.web>
  <phpNet>
    <classLibrary>
      <add assembly="php_mcrypt.mng, Version=3.0.0.0, Culture=neutral, PublicKeyToken=4ef6ed87c53048a3" section="mcrypt" />
      <add assembly="php_curl.mng, Version=3.0.0.0, Culture=neutral, PublicKeyToken=4ef6ed87c53048a3" section="curl" />
    </classLibrary>
    <scriptLibrary/>
  </phpNet>

</configuration> 
```

错误：

![在此处输入图像描述](../Images/234b5bd55cca9a5360cfba6aa6b781ec.png)

此屏幕截图是在尝试双击 IIS 的“功能视图”中的任何“功能”时出现的。但是，如果我只是通过浏览器访问该网站，则错误是相同的：

> 无法读取配置部分“phpNet”，因为它缺少部分声明

phpNet 用于[Phalanger](http://phalanger.codeplex.com/)，应该安装扩展，但我不知道如何检查。就像我说的那样，这个 web.config 和 phalanger 在 Visual Studio 中运行良好，所以我不知道出了什么问题。特别是因为安装程序确实在 iis 中安装了示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:55:05.343

您缺少配置节定义

```
<configSections>
<section name="phpNet" type="PHP.Core.ConfigurationSectionHandler, PhpNetCore, Version=3.0.0.0, Culture=neutral, PublicKeyToken=0a8e8c4c76728c71" /> 
```

没有这个，.NET 不知道 'phpNet' 配置部分。

这也意味着，您没有使用 setup.exe 安装 Phalanger。这里有一些关于在没有正确安装的情况下使用 Phalanger 的信息（重要的是关于配置的部分）[http://www.php-compiler.net/blog/2011/installation-free-phalanger-web](http://www.php-compiler.net/blog/2011/installation-free-phalanger-web)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:36:40.887

我发现这个帖子[http://crdevelopment.net/2012/06/12/fixing-iis-error-the-configuration-section-system-web-extensions-cannot-be-read-because-it-is-missing- a-section-declaration/](http://crdevelopment.net/2012/06/12/fixing-iis-error-the-configuration-section-system-web-extensions-cannot-be-read-because-it-is-missing-a-section-declaration/)

这导致我检查应用程序池。 ![在此处输入图像描述](../Images/6d0874e7c7521587d8512bbc3341680b.png)

在这一点上，我注意到那里有倍数。我选择了 phalangerAppPool 并摆脱了我的错误，但带来了一个新的错误。

> 处理程序“PageHandlerFactory-Integrated”在其模块列表中有一个错误模块“ManagedPipelineHandler”

然而，这个错误更容易解决（[修复](https://stackoverflow.com/a/10541165/530933)）

# ios - AFNetworking setImageWithURLRequest 未设置远程图像

> ID：13347154
> 
> 赞同：17
> 
> 时间：2012-11-12T16:08:27.467
> 
> 标签：ios, uiimageview, afnetworking

我正在使用 AFNetworking`UIImageView+AFNetworking.h`将在线图像异步加载到`UIImageView`.

远程图像在我使用时加载得很好`setImageWithURLRequest:`，但是当我尝试使用`setImageWithURLRequest:placeholderImage:success:failure`远程图像时下载了但 UIImageView 没有将它设置为它的 UIImage。

这是我的代码：

```
@property (strong) IBOutlet UIImageView *imageView;

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    [_imageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://i.imgur.com/fVhhR.png"]]
                       placeholderImage:nil
                                success:^(NSURLRequest *request , NSHTTPURLResponse *response , UIImage *image ){
                                    NSLog(@"Loaded successfully: %d", [response statusCode]);
                                }
                                failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){
                                    NSLog(@"failed loading: %@", error);
                                }
     ];
} 
```

图片总是加载成功，状态码总是`200`。但是我必须添加`[_imageView setImage:image];`到`success`块中`UIImageView`才能设置图像。

我正在使用 iOS 6.0

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-12T16:42:22.420

如果您提供了成功块，那么您负责设置 UIImageView 的图像属性。如果您提供 nil 成功块，那么 AFNetworking 会为您完成。

这是`UIImageView+AFNetworking.m`（第 117 行）的相关部分：

```
if (success) {
    success(operation.request, operation.response, responseObject);
} else {
    self.image = responseObject;
} 
```

或者，只使用`-setImageWithURL:placeholderImage:`没有完成块的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T18:28:16.773

我遇到了同样的问题，在对图书馆的文档感到沮丧之后，我发现了 Robin 上面提到的内容。所以现在我正在使用：

```
[imageView setImageWithURLRequest:imageRequest placeholderImage:nil success:nil failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    NSLog(@"Unable to retrieve image");
}]; 
```

奇迹般有效。我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-08T06:52:32.887

文档很清楚：

> 如果指定了成功块，则该块负责在返回之前设置图像视图的图像。如果未指定成功块， `self.image = image`则应用设置图像的默认行为。

因此，您可以传递一个 nil 块以获得成功（如上所述），或者如果您指定一个块，您可以自己调用 setImage:image

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T16:23:29.320

在您的成功块中，您需要`UIImaage *image`将`UIImageView`. 我假设你得到`NSLog(@"Loaded successfully: %d", [response statusCode]);`

此外，您的占位符图像似乎是`nil`. 你不想要一个像加载图像这样的占位符吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-30T10:44:59.053

对于那些在网上浏览和搜索时偶然发现这个问题并来到这里的人来说，还有另一个原因 - 图像可能有错误的文件扩展名。例如，图像可能保存为 jpg，但有人决定将其文件扩展名更改为 png。

检查方法如下：首先，您需要使用网络监控工具（例如 Charlie）并检查图像请求“Content-Type”HTTP 标头。假设它的值是“image/png”。这意味着后端的图像具有 png 文件扩展名。现在，在模拟器上运行您的应用程序，然后转到应用程序的模拟器文件夹：

/Users/you/Library/Application Support/iPhone 模拟器/select-folder-with-your-iOS-version/Applications/YourApp/Library/Caches/yourAppBundleId/fsCachedData/

找到您的图像文件并在此文件中添加 png 或 jpg 扩展名（AFNetworking 缓存没有文件扩展名的图像文件，因此需要添加它才能使用预览打开它）。使用预览打开它，然后按工具/显示检查器。在打开的面板中检查“文档类型”。如果它与“PNG 图像”（例如 JPEG 图像）不同，那么这就是原因，您需要在后端修复图像本身 - 使用适当的图像编辑程序打开它并将其另存为 PNG。

# c# - DllNotFoundException: libzmq

> ID：13347156
> 
> 赞同：6
> 
> 时间：2012-11-12T16:08:31.060
> 
> 标签：c#, unity3d, zeromq, dllnotfoundexception

我正在尝试使用 ZeroMQ C#-binding ( [http://www.zeromq.org/bindings:clr](http://www.zeromq.org/bindings:clr) ) 与我在 Unity 中创建的游戏的服务器通信（我使用的是 Mac OS X 10.8）。因此，我创建了一个连接到服务器、发送消息然后接收消息的简单函数：

```
using UnityEngine;
using System.Runtime.InteropServices;
using System.Collections;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ZeroMQ;

public class NetworkZero : MonoBehaviour {

    // Use this for initialization
    public static NetworkZero instance; 

    void Start () {
        instance = this;
        Debug.Log("START NETWORK COMMUNICATION");
    }

    // Update is called once per frame
    void Update () {
        using (ZMQ.Context context = new ZMQ.Context(1))
            using (ZMQ.Socket client = context.Socket(ZMQ.SocketType.REQ))
            {
                 string sendMSG = "CLIENT";
                 client.Connect("tcp://localhost:31415");
                 client.Bind("tcp://localhost:31415");
                 client.Send(sendMSG, Encoding.Unicode);
                 string message = client.Recv(Encoding.Unicode);
                 Debug.Log("Received request: " + message);
            }
    }
} 
```

我按照说明在我的项目中包含了必要的库，并在 monoDevelop 中添加了对这些库的引用。但是在程序构建时，当我尝试运行程序时仍然出现以下错误：

```
DllNotFoundException: libzmq
ZMQ.Context..ctor (Int32 io_threads)
NetworkZero.Update () (at Assets/SLIP/NetworkZero.cs:26) 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:10:09.120

确保您已将引用程序集的“复制本地”设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:18:43.767

当我添加 dll 时，我总是将它们添加到 Unity 中（将它们拖放到某处），然后 Unity 做了一些魔术并重新生成了引用都正确的 IDE 项目文件。

黑暗中的另一个刺 - 如果这些库做互操作的东西，你可能需要它们在文件夹“插件”中（可能需要直接在资产下，“资产/插件”，未经测试）。插件是 Unity 的专业功能，但它们不适用于 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-22T10:53:11.903

我过去在尝试在 32 位应用程序中使用 64 位 dll 时收到过此消息。您提到它在编辑器（64 位）中工作，但在构建中没有，我建议您仔细检查您的架构是否与 ZeroMQ 库的架构匹配？为此，请转到 [Unity] > File > Build Settings，然后在 Architecture 下选择 x86_64。

[![在此处输入图像描述](../Images/6dbce7796c3b373b3486ae3c5050446b.png)](https://i.stack.imgur.com/LQH2r.png)

# javascript - 如何使用 jQuery 将 JSON 树呈现为使用 div 的嵌套 HTML？

> ID：13347158
> 
> 赞同：6
> 
> 时间：2012-11-12T16:08:32.090
> 
> 标签：javascript, jquery, html, json, tree

我正在寻找一种使用`<div>`标题中提到的嵌套来呈现 JSON 树的方法。这是一个数据样本（树中最多有 8 个级别）：

```
{
    "children": {
        "Bacteria": {
            "children":{
                "Verrucomicrobia":{
                    "children":{
                        "Methylacidiphilae":{
                            "children":{
                                "Methylacidiphilales":{
                                    "children":{},
                                    "count":2,
                                    "level":"order",
                                    "name":"Methylacidiphilales",
                                    "score":1.46
                                }
                            },
                            "count":2,
                            "level":"class",
                            "name":"Methylacidiphilae",
                            "score":1.46
                        }
                    },
                    "count":2,
                    "level":"phylum",
                    "name":"Verrucomicrobia",
                    "score":1.46
                }
            },
            "count":2,
            "level":"kingdom",
            "name":"Bacteria",
            "score":1.46
        }
    },
    "count":0,
    "level":"root",
    "name":"Root",
    "score":0.0
} 
```

我可以获取/解析 JSON 树并将其保存到变量中。现在我需要递归遍历树，并且：

1.  将每个节点变成可以呈现为 HTML 的东西。
2.  创建一个新`div`节点并添加到新树中。

但是怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T16:14:30.287

您可以在原始 JS 中轻松做到这一点：

```
function json2html(json) {
    var i, ret = "";
    ret += "<ul>";
    for( i in json) {
        ret += "<li>"+i+": ";
        if( typeof json[i] === "object") ret += json2html(json[i]);
        else ret += json[i];
        ret += "</li>";
    }
    ret += "</ul>";
    return ret;
} 
```

只需使用您的对象调用该函数，它就会将 HTML 作为一组嵌套列表返回 -`<div>`如果您愿意，您当然可以将其更改为仅使用 s。

编辑：这是一个使用 DOM 元素并返回可以插入`appendChild`或类似的节点的版本：

```
function json2html(json) {
    var i, ret = document.createElement('ul'), li;
    for( i in json) {
        li = ret.appendChild(document.createElement('li'));
        li.appendChild(document.createTextNode(i+": "));
        if( typeof json[i] === "object") li.appendChild(json2html(json[i]));
        else li.firstChild.nodeValue += json[i];
    }
    return ret;
} 
```

# php - 为什么 phpsh 不显示有关变量的结构化信息？

> ID：13347171
> 
> 赞同：0
> 
> 时间：2012-11-12T16:09:06.100
> 
> 标签：php, shell, introspection, phpsh

我刚刚安装了 phpsh shell，如下所述：http: [//vocecommunications.com/blog/2010/12/how-to-setup-an-interactive-wordpress-shell/](http://vocecommunications.com/blog/2010/12/how-to-setup-an-interactive-wordpress-shell/)

通常，shell 应该显示返回变量的自省，如下所示：

```
php> = get_posts(array('posts_per_page'=>1))
array(
   0 => <object #288 of type stdClass> {
    ID => 1,
... 
```

但在我的外壳中，它本身并没有显示任何东西。我需要将返回的变量包装在 var_dump 中，如下所示：

```
php> get_posts( array('posts_per_page'=>1 ))

php> var_dump(get_posts( array('posts_per_page'=>1 )))
array(1) {
  [0]=> 
```

关于默认情况下如何使 shell 内省返回变量的任何想法？

# javascript - 向服务器发送表单信息

> ID：13347173
> 
> 赞同：0
> 
> 时间：2012-11-12T16:09:17.907
> 
> 标签：javascript, html, forms, websocket, tornado

我在 html 表单中使用 select，一旦用户从选择选项中进行选择，我希望通过 javascript 将其发送到服务器。我可以将表单中的文本发送到服务器，但如果我使用 select，则不会向服务器发送任何内容。这是我的代码：

```
{% extends "base.html" %}
{% import "forms.html" as forms %}

{% block header %}
 <script>
        $(document).ready(function() {
        var ws;

        $("#open").click(function(evt){
        evt.preventDefault();
        $.post("/", $("#eventForm.").serialize());

        ws = new WebSocket("ws://" + "localhost" + ":" + "8888" + "/ws");

        ws.onmessage = function(evt){

            $("#display").append(evt.data + "<br />");
    };

        ws.onclose = function(evt) {alert("Server connection terminated");};
    });
   }); 
    </script>

  <div class="page-header">
    <h1>Welcome</h1>
  </div>
{% end %}

{% block body %}
 <h2>Enter the Event you would like to follow</h2>
      <form id ="eventForm" action="/" method="post">
         <select name="aaaa" multiple="multiple"> 
    <option value="" selected="selected"></option>
    <option VALUE="abc"> ABC</option>
    <option VALUE="def"> def</option>
    <option VALUE="hij"> hij</option>   
</select>
  <!--       <input type="text" name="event" /> -->
 <input type="submit" id="open" value="Submit Query" />
    </form>
 <h1>Coordinates</h1>

<div style="height:500px; width:700px; border:2px solid #ccc; overflow:auto; margin:0   auto;" id="display"></div>
{% end %} 
```

我以为 $.post("/", $("#eventForm.").serialize()); 将发送选定的选项，因为 select 在表单标签内。

我不太熟悉 html 和 javascript。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:31:48.907

这可能只是一个简单的错字。

改变：

```
$.post("/", $("#eventForm.").serialize()); 
```

到：

```
$.post("/", $("#eventForm").serialize()); 
```

# c++ - 在 C++ 中使用 CRTP 的模板化单例策略

> ID：13347179
> 
> 赞同：0
> 
> 时间：2012-11-12T16:09:49.260
> 
> 标签：c++, templates, design-patterns, singleton

有很多人声称他们的单例实现是健壮和通用的，因为它使用元编程结构。

我的目标是对派生类强制执行单例策略，这样我就不必显式（手动）将派生类的构造函数声明为私有。我认为有一种方法可以天真地添加实例静态变量和 getter 作为策略，方法是使模板化单例成为您派生的类的朋友。但这一点都不优雅。

我从这段代码开始，除其他外，它被认为是单例的正确（即完整）设计，而它显然允许多个实例：

```
template <class CWrappedClass>
class CSingleton
{
protected:
    static CWrappedClass* ms_instance;
private:
    CSingleton(){}
    CSingleton(const CSingleton& ) {}
    CSingleton& operator = (const CSingleton&) {}

public:
    static CWrappedClass& GetInstance()
    {
        if (ms_instance == NULL)
            ms_instance = new CWrappedClass;
        return *ms_instance;
    }
};

template <class CWrappedClass>
CWrappedClass* CSingleton<CWrappedClass>::ms_instance = NULL; 
```

而这个“策略”的单例客户端，使用 CRTP：

```
class CThing : public CSingleton<CThing>
{
     // friend class CSingleton<CThing>; // only if ctor is private!
public:
    void DoNothing()
    {
        std::cout<<" Nothing \n";
    }
    CThing()
    {
        std::cout<<" single ";
    }
}; 
```

**注意**这不是 CRTP 单例策略的正确实现，它只是问题的一部分！

代码*不会*按原样编译。基本单例策略类的构造函数声明为私有，因此它不能支持派生实例，除非子对象是此类的朋友。人们通常使构造函数受到保护，这意味着没有什么可以阻止用户使派生类成为非单例的。

**问题/问题**：是否有任何机制可以强制执行单例策略，而不必手动将派生类的构造函数设为私有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:25:38.137

如果您确实希望使用此模式：

1.  模板的构造函数应该是受保护的，而不是私有的，以便派生类可以访问它。否则它自己的构造函数不能构造基类。

2.  派生类可以使模板（它是它的基类）成为朋友并拥有一个私有构造函数。

或者，有一个您实现的宏，它实际上在其编译单元中从派生类构造实例。当我确实使用了类似的模型（通过强制修复使用单例的代码并且我无法更改它，只有实际单例的实现方式）时，我选择了这个选项，它实际上通过了`boost::once`.cpp 中的构造文件。

# html - Webkit 浏览器在左侧裁剪斜体字体

> ID：13347185
> 
> 赞同：0
> 
> 时间：2012-11-12T16:10:17.257
> 
> 标签：html, css, fonts, google-webfonts

我在使用手写 Google 网络字体 Meddon 的个人启动页面上遇到了问题。正在发生的事情是，Webkit 浏览器（Chrome、Safari、iOS Safari）看似随机地剪裁了字体的左侧。

[你可以在我的个人页面](http://www.joshuahiggins.com)上看到这个问题。刷新或调整页面大小时，JH 的左侧会随机出现/消失。

有谁知道这个的解决方案？更好的是，有谁知道是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:14:50.370

是因为你的`jh`容器宽度不够，看这里

[**演示**](http://jsfiddle.net/7BKz4/)

像这样更新`.jh`课程 -[**工作演示**](http://jsfiddle.net/7BKz4/1/)

```
.circle .jh {
    margin-top: 50px; /* You can adjust this */
    font-family: "Meddon";
    font-size: 75px;
    width: 200px;
    height: 120px;
    text-align: center;
    color: #f2f2f2;
    text-shadow: 1px 1px #ff8e00;
    border: 1px solid #ff0000;
} 
```

# c++ - 获取 qint64 的最高有效字节

> ID：13347186
> 
> 赞同：3
> 
> 时间：2012-11-12T16:10:24.190
> 
> 标签：c++, qt

在 QT 中，我有一个 qint64。有没有一种简单的方法可以将其分成大小为 int8_t 的部分？

为了清楚起见，如果我有一个

```
qint64 a = [11001000 00001111 11110000 ... 11001100] 
```

我想得到

```
int8_t a1=[11001000] 
int8_t a2=[00001111]
int8_t a3=[11110000] 
... 
int8_t a8=[11001100] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:54:38.290

这比 Qt 更像是一个 C/C++ 问题。但不管怎么说：

```
qint64 a = 56747234992934;
union {
    qint64 i64;
    int8_t i8[8];
} u = {a};
#if Q_BYTE_ORDER == Q_BIG_ENDIAN
qDebug() << u.i8[0]; // MSB is the first byte on big endian machines
#else
qDebug() << u.i8[7]; // MSB is the last byte on little endian machines
#endif 
```

编辑：为了避免混乱的字节序特定位置代码：

```
qint64 a = 56747234992934;
union {
    qint64 i64;
    int8_t i8[8];
} u = {qToBigEndian(a)};
qDebug() << u.i8[0]; // MSB is the first byte on big endian machines 
```

请注意，您需要包含`qendian.h`此功能才能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:32:02.427

```
int8_t a1 = a & 0xff00000000000000ll >> 56;
int8_t a2 = a & 0x00ff000000000000ll >> 48;
int8_t a3 = a & 0x0000ff0000000000ll >> 40;
int8_t a4 = a & 0x000000ff00000000ll >> 32;
int8_t a5 = a & 0x00000000ff000000ll >> 24;
int8_t a6 = a & 0x0000000000ff0000ll >> 16;
int8_t a7 = a & 0x000000000000ff00ll >> 8;
int8_t a8 = a & 0x00000000000000ffll; 
```

确保附加`ll`到您的常量，以便以 64 位整数处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:05:11.273

这是一个破坏性的解决方案。它破坏了`a`粗心的代码审查者的内容，也许还有一些脑组织。它在美学上也令人愉悦。

```
int8_t a8 = a;
int8_t a7 = a >>= 8;
int8_t a6 = a >>= 8;
int8_t a5 = a >>= 8;
int8_t a4 = a >>= 8;
int8_t a3 = a >>= 8;
int8_t a2 = a >>= 8;
int8_t a1 = a >>= 8; 
```

一个更好的解决方案，可能在性能和可读性方面并保留以下内容：

```
int8_t a8 = a;
int8_t a7 = a >> 8;
int8_t a6 = a >> 16;
int8_t a5 = a >> 24;
int8_t a4 = a >> 32;
int8_t a3 = a >> 40;
int8_t a2 = a >> 48;
int8_t a1 = a >> 56; 
```

# python - 箱线图字典而不是列表？

> ID：13347190
> 
> 赞同：2
> 
> 时间：2012-11-12T16:10:40.180
> 
> 标签：python, matplotlib

假设我想创建一个列表的箱线图，其中包含数字 1-5 大约一百万次。

这样的列表的大小约为 5 000 000，但表示为 dict 它根本不占用空间：

```
s = {1: 1000000, 2: 1000000, 3: 1000000, 4: 1000000, 5:1000000} 
```

问题是，如果我尝试创建该字典的箱线图，我会收到错误

```
Traceback (most recent call last):
  File "<pyshell#17>", line 1, in <module>
    ax.boxplot(s)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/axes.py", line 5462, in boxplot
    if not hasattr(x[0], '__len__'):
KeyError: 0 
```

有没有一种巧妙的方法来绘制字典`s`，而不必将所有元素放在一个列表中？

* * *

一条评论建议我试试

```
boxplot(n for n, count in s.iteritems() for _ in xrange(count)) 
```

但这导致

```
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    boxplot(n for n, count in s.iteritems() for _ in xrange(count))
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/pyplot.py", line 2134, in boxplot
    ret = ax.boxplot(x, notch, sym, vert, whis, positions, widths, patch_artist, bootstrap)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/axes.py", line 5462, in boxplot
    if not hasattr(x[0], '__len__'):
TypeError: 'generator' object has no attribute '__getitem__' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:48:56.453

使用图片来描述数据的全部意义在于从整体上了解数据，而不是非常精确。因此，通过为每 1000 个实际数据点生成一个代表性数据点来压缩数据不会有太大危害：

```
x = [val for val, num in s.items() for i in range(num//1000)] 
```

这对于肉眼来说应该已经足够了：

```
import matplotlib.pyplot as plt
import numpy as np
s = {1: 1000000, 2: 1000000, 3: 1000000, 4: 1000000, 5:1000000}
x = [val for val, num in s.items() for i in range(num//1000)]
dct = plt.boxplot(x)
plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:30:06.580

据我所知，matplotlib 没有此类数据的方法。基本上，您必须计算相关统计数据并实施您自己的绘制箱线图的方法。这可能会让你开始：

```
import matplotlib.pyplot as plt
import numpy as np

s = [{1: 1000000, 2: 1000000, 3: 1000000, 4: 1000000, 5:1000000},
     {1: 1000000, 0: 1000000, 8: 1000000, 3: 1000000, 7:1000000}]

def boxplot(data, x=0):

    sorted_data = np.array(data.items())
    sorted_data = np.sort(sorted_data, 0)
    values = sorted_data[:,0]
    freqs = sorted_data[:,1]
    freqs = np.cumsum(freqs)
    freqs = freqs*1./np.max(freqs)

    #get 25%, 50%, 75% percentiles
    idx = np.searchsorted(freqs, [0.25, 0.5, 0.75])
    p25, p50, p75 = values[idx]
    vmin, vmax = values.min(), values.max()

    ax = plt.gca()
    l,r = -0.2+x, 0.2+x
    #plot boxes
    plt.plot([l,r], [p50, p50], 'k')
    plt.plot([l, r, r, l, l], [p25, p25, p75, p75, p25], 'k')
    plt.plot([x,x], [p75, vmax], 'k')
    plt.plot([x,x], [p25, vmin], 'k')

for i in range(len(s)):
    boxplot(s[i],i)
plt.xlim(-0.5,1.5)
plt.show() 
```

# c# - 在 INotifyPropertyChanged 之后更新控件

> ID：13347191
> 
> 赞同：1
> 
> 时间：2012-11-12T16:10:40.920
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

我已经检查了 Stack 上的现有答案，但仍然无法正确：

在我看来：

```
<TextBlock Margin="8,0,0,0"

                        FontSize="48"
                        Text="{Binding YearsToSave}"
                        d:LayoutOverrides="Width">
...
  <SurfaceControls:SurfaceSlider x:Name="slider" Grid.Row="8"
                                Grid.Column="2"
                                VerticalAlignment="Bottom"
                                Maximum="{Binding YearsToSaveMaxValue}"
                                Minimum="{Binding YearsToSaveMinValue}"
                                Value="{Binding YearsToSave}"
                                d:LayoutOverrides="Width" /> 
```

在我的视图模型中：

```
class YearsToSaveViewModel : INotifyPropertyChanged
{
    private int yearsToSave;
    public event PropertyChangedEventHandler PropertyChanged;

    public YearsToSaveViewModel()
    {
        Questions = new SavingsCalculatorQuestions();
        YearsToSave = 5; //Binds correctly
        YearsToSaveMinValue = 0;
        YearsToSaveMaxValue = 30;
    }

    public SavingsCalculatorQuestions Questions { get; set; }

    public int YearsToSaveMinValue { get; private set; }

    public int YearsToSaveMaxValue { get; private set; }

    public int YearsToSave
    {
        get { return yearsToSave; } 
        set
        {
            yearsToSave = value;
            OnPropertyChanged("YearsToSave");
        }
    }

    public void Reset()
    {
        YearsToSave = 0;
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            switch (name)
            {
                case "YearsToSave":
                    Questions.NumberOfYears = YearsToSave;
                    break;
            }
        }
    }
} 
```

属性更改事件正确触发并获取值，正确更新 Questions.NumberOfYears 但更改永远不会传播回视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:14:21.983

另一种选择是使用**NotifyPropertyWeaver**项目！

我喜欢它，因为它会自动为您调用事件！（有点黑魔法但很方​​便）

请参阅 [http://crosscuttingconcerns.com/NotifyPropertyWeaver](http://crosscuttingconcerns.com/NotifyPropertyWeaver)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:21:40.923

你的`OnPropertyChanged`方法没有引发`PropertyChanged`事件......

像这样更新您的方法：

```
protected void OnPropertyChanged(string name)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null)
    {
        switch (name)
        {
            case "YearsToSave":
                Questions.NumberOfYears = YearsToSave;
                handler(this, new PropertyChangedEventArgs(name));
                break;
        }
    }
} 
```

# c++ - STL 向量 push_back() 内存双释放

> ID：13347193
> 
> 赞同：4
> 
> 时间：2012-11-12T16:10:43.567
> 
> 标签：c++, stl, vector, push-back

> **可能的重复：**
> [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

我在以下程序中遇到了双重释放内存的问题。

调试器显示问题出在`push_back()`函数中。

**A类：**

```
class A {
    public:
        A(int x);
        int x;
};

A::A(int x) {
    this->x = x;
} 
```

**B类：**

```
class B {
    public:
        B(int x);
        ~B();
        A* a;
};

B::B(int x) {
    this->a = new A(x);
}

B::~B() {
    delete a;
} 
```

**主功能：**

```
int main() {
    vector<B> vec;

    for(int i = 0; i < 10; i++) {
        vec.push_back(B(i)); <------------ Issue is here
    }

    cout << "adding complete" << endl;

    for(int i = 0; i < 10; i++) {
        cout << "x = " << (vec[i].a)->x << endl;
    }

    return 0;
} 
```

这段代码有什么问题？

**编辑：**错误`double free or memory corruption`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:12:45.217

您忘记定义一个复制构造函数和复制赋值运算符，因此您的包装对象正在`delete`被一些`B`.... 然后当一些副本`B`超出范围时再次。

在这种情况下，它是`B(i)`您确定的行上的临时文件，以及向量中实现定义的副本数。

遵守[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T16:12:54.200

您的代码中的问题是由于“普通” C/C++ 指针没有*所有权*概念。当指针被复制时，两个副本^* “认为”他们拥有数据，导致双重删除。

认识到这一事实，C++ 标准库的设计者引入了一个`unique_ptr<T>`类来帮助您解决此类问题。

* * *

^*指针的一份副本在`B`传递给的实例中`push_back`；指针的另一个副本是在实例中输入的`vector`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T19:30:54.577

# 注意[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

其他人都已经对此进行了反复强调，所以我不会进一步深入。

要解决您显然试图完成的用法（并在消除过程中遵守三规则），请尝试以下操作。虽然每个人都对正确管理动态成员的所有权是绝对正确的，但您可以轻松地制作您的特定样本以*完全*避免使用它们。

**A级**

```
class A {
    public:
        A(int x);
        int x;
};

A::A(int x) 
   : x(x)
{
} 
```

**B类**

```
class B {
    public:
        B(int x);
        A a;
};

B::B(int x) 
    : a(x) 
{
} 
```

**主程序**

```
int main() {
    vector<B> vec;

    for(int i = 0; i < 10; i++) {
        vec.push_back(B(i));
    }

    cout << "adding complete" << endl;

    for(int i = 0; i < 10; i++) {
        cout << "x = " << vec[i].a.x << endl;
    }

    return 0;
} 
```

**底线** 不要使用动态分配，除非您有充分的理由，**并且**它由包含变量（如智能指针或大力实践三规则的类）终身保护。

# vb.net - 使用字符串变量的值在 vb.net winform 中调用实例

> ID：13347195
> 
> 赞同：2
> 
> 时间：2012-11-12T16:10:46.207
> 
> 标签：vb.net, winforms, user-controls, instance

我有 UserControl 命名例如'aaa'

然后我有变量：

> Dim a as String = "aaa"

现在，我声明

> Dim uc as UserControl = new aaa

我的问题是，我可以使用下面的变量值在上面写声明吗

> Dim uc as UserControl = new a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:31:35.373

您可以使用反射（在`System.Reflection`）命名空间中执行此操作。例如：

```
Dim t As Type = Assembly.GetExecutingAssembly().GetType("namespace.aaa")
Dim o As Object = Activator.CreateInstance(t) 
```

请注意，您将需要完整的类型名称，包括命名空间，因此您可能需要将其连接到您的字符串，例如：

```
Dim namespace As String = "MyNamespace"
Dim t As Type = Assembly.GetExecutingAssembly().GetType(namespace & "." & a)
Dim o As Object = Activator.CreateInstance(t) 
```

# php - 查询到 XML，注意：数组到字符串的转换

> ID：13347196
> 
> 赞同：0
> 
> 时间：2012-11-12T16:10:48.007
> 
> 标签：php, xml

我想将我的 mysql 查询转换为**XML**，为此我使用了本教程的代码：http: [//www.codediesel.com/php/converting-mysql-queries-to-xml/](http://www.codediesel.com/php/converting-mysql-queries-to-xml/)我必须将其自定义为使用**PDO**代替**mysql**函数。这是代码：

```
function sqlToXml($queryResult, $rootElementName, $childElementName)
{ 
    $xmlData = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n"; 
    $xmlData .= "<" . $rootElementName . ">";

    while($record = $queryResult->fetch(PDO::FETCH_OBJ))
    { 
        /* Create the first child element  */
        $xmlData .= "<" . $childElementName . ">";

        for ($i = 0; $i < $queryResult->columnCount(); $i++)
        { 
            $fieldName = $queryResult->getColumnMeta($i);

            /* The child will take the name of the table column  */
            $xmlData .= "<" . $fieldName . ">";

            /* We set empty columns with NULL, or you could set 
                it to '0' or a blank. */
            if(!empty($record->$fieldName))
                $xmlData .= $record->$fieldName; 
            else
                $xmlData .= "null"; 

            $xmlData .= "</" . $fieldName . ">"; 
        } 
        $xmlData .= "</" . $childElementName . ">"; 
    } 
    $xmlData .= "</" . $rootElementName . ">"; 

    return $xmlData; 
} 
```

但是当我尝试执行代码时出现此错误：注意：第**42**行**/opt/lampp/htdocs/promos/t.php中的数组到字符串转换**

 ****注意：第42**行**/opt/lampp/htdocs/promos/t.php**中的数组到字符串转换

 ****注意：第42**行**/opt/lampp/htdocs/promos/t.php**中的数组到字符串转换

 **注意： /opt/lampp/htdocs/promos/t.php中第**42**行的数组到字符串的转换**nullnullnullnull**

 **第**42**行是：

```
if(!empty($record->$fieldName)) 
```

你对此有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:20:38.543

[您需要字段名，因此您必须从getColumnMeta()](http://php.net/manual/en/pdostatement.getcolumnmeta.php)返回的关联数组中检索它，您错误地认为它返回了一个字符串，因此只需替换以下行：

```
$fieldName = $queryResult->getColumnMeta($i); 
```

对于这个：

```
$fieldName = $queryResult->getColumnMeta($i);
$fieldName = $fieldName['name']; 
```

这应该`$fieldName`包含字段名称，因此您的其余代码将起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T16:20:33.560

函数 getColumnMeta 返回一个数组。不是字符串。除此之外，它被标记为实验性的。在它变得更加稳定之前，我不会在生产代码上使用它。

但我认为这应该有效

```
function sqlToXml($queryResult, $rootElementName, $childElementName)
{ 
    $xmlData = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n"; 
    $xmlData .= "<" . $rootElementName . ">";

    while($record = $queryResult->fetch(PDO::FETCH_OBJ))
    { 
        /* Create the first child element  */
        $xmlData .= "<" . $childElementName . ">";

        for ($i = 0; $i < $queryResult->columnCount(); $i++)
        { 
            $colum = $queryResult->getColumnMeta($i);
            $fieldName = $column['name'];

            /* The child will take the name of the table column  */
            $xmlData .= "<" . $fieldName . ">";

            /* We set empty columns with NULL, or you could set 
                it to '0' or a blank. */
            if(!empty($record->$fieldName))
                $xmlData .= $record->$fieldName; 
            else
                $xmlData .= "null"; 

            $xmlData .= "</" . $fieldName . ">"; 
        } 
        $xmlData .= "</" . $childElementName . ">"; 
    } 
    $xmlData .= "</" . $rootElementName . ">"; 

    return $xmlData; 
} 
```********

# ruby-on-rails - Factory-Girl :create 忽略接受嵌套属性上的 reject_if

> ID：13347198
> 
> 赞同：2
> 
> 时间：2012-11-12T16:10:52.617
> 
> 标签：ruby-on-rails, rspec, factory-bot, nested-attributes

我已经为此苦苦挣扎了几天。我有这个模型：

```
class BusinessEntity < ActiveRecord::Base

  has_many :business_locations
  accepts_nested_attributes_for :business_locations, :allow_destroy => true,
        :reject_if => proc { |attributes| attributes.all? { |key, value| key == '_destroy' || value.blank? } }

 after_initialize :build_child

  ....

  def build_child
    self.business_locations.build if self.business_locations.empty?    
  end 
```

business_entites.rb（工厂）

```
FactoryGirl.define do
  factory :business_entity do
    name "DaveHahnDev"
    association :company, :factory => :company
    association :default_currency, :factory => :currency

    factory :business_entity_with_locations do
      after(:build) do |business_entity|
        business_entity.class.skip_callback(:create, :after, :set_primary_business_info)
        business_entity.business_locations << FactoryGirl.build(:business_location)
      end
    end
  end

  factory :business_location do
    name "Main Office"
    business_entity
    address1 "139 fittons road west"
    address2 "a different address"
    city { Faker::Address.city }
    province "Ontario"
    country "Canada"
    postal_code "L3V3V3"

  end
end 
```

现在，当我调用`FactoryGirl.create(:business_entity)`规范时，我得到关于 business_locations 的验证错误有空白属性。这是由 after_initialize 回调初始化的孩子。我认为 reject_if 会处理这个问题，就像你从浏览器使用应用程序一样。如果我添加：

```
 before_validation :remove_blank_children

  def remove_blank_children
    self.business_locations.each do |bl|
        bl.mark_for_destruction if bl.attributes.all? {|k,v| v.blank?}
    end
  end 
```

一切都会好起来的，但我觉得我不应该这样做。

是否有可能我正在测试这个错误，或者在模型中建立孩子是不好的做法。

任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:39:13.947

*在模型中建立孩子是不好的做法*

不一定，但我会避免`after_initialize`——它在模型的每个实例化时执行，甚至是直接的`find`.

我认为您最好隔离需要添加 business_location 并明确执行的情况。而且您的工厂似乎`business_entity_with_locations`正在这样做，我不确定您为什么需要回调。

至于为什么`accepts_nested_attributes_for`不起作用，我相信那是因为你没有使用它。它需要一个属性哈希，如：

{ :business_locations => { 0 => { :name => "样本名称 } } }

被传递到类似的方法`new`中。这不是你在做的——你`build`在没有任何参数的情况下调用关联。所以`accepts_nested_attributes_for`永远不会调用由提供的属性设置器逻辑。

# javascript - HTML5 websockets 对可访问性标准的兼容性如何？

> ID：13347199
> 
> 赞同：1
> 
> 时间：2012-11-12T16:10:54.250
> 
> 标签：javascript, ajax, html, websocket, accessibility

WCAG 等可访问性标准的主要要求之一是网站或应用程序在不使用 javascript 的情况下显示或提供某种非 JS 替代方案。我做了一些初步研究，但找不到太多关于 websockets 的信息。我应该假设 websocket 的处理方式与 AJAX 类似吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:53:46.950

由于 Websockets 需要 JavaScript 来做任何有用的事情，如果您有一个要求您提供非 JavaScript 替代方案的标准，那么您将需要提供一个不使用 Websockets 的非 JavaScript 替代方案。是的，Websockets 就像 AJAX；它们实际上只是一种创建持久的双向连接的方法，而不是 AJAX 提供的一次性请求响应。您应该像对待 AJAX 一样对待它们。

虽然 WCAG 1.0 要求您提供 JavaScript 的替代方案，但 WCAG 2.0 更加技术中立；它不需要替代 JavaScript，而是提供[了一组技术](http://www.w3.org/TR/WCAG20-TECHS/client-side-script.html)，使涉及客户端脚本的网页更易于访问。您应该记住，并非所有用户都启用了 JavaScript。仍然有一些用户更喜欢完全禁用或默认禁用它来浏览。但是今天的可访问性技术能够处理 JavaScript 的某些用途，因此即使没有非 JavaScript 后备，您也可以编写可访问的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:13:43.477

布赖恩的回答很好，但我想我会添加一些额外的见解。

这里实际上有两个问题：技术和合规性。

就合规性而言，如果出于某种原因您需要 WCAG 1.0，那么您需要一个非 JS 版本。因为 WCAG 1.0 是这么说的。过去，一些屏幕阅读器用户会禁用 JS，因为它会给屏幕阅读器带来问题，但这是几代前的技术。最近[对网络屏幕阅读器用户的一项调查](http://webaim.org/projects/screenreadersurvey4/#javascript)显示，98.6% 的用户启用了 Javascript。

就技术而言，Javascript 和可访问性的问题实际上与 Javascript 本身无关：可访问性问题与某些东西（通常是 Javascript）*通过 DOM 操纵 UI*的事实有关。可访问性存在问题的是对 UI 的操作；必须注意确保生成的 DOM 是可访问的，并且屏幕阅读器会适当地处理更改 - 例如，使用 ARIA 活动区域来确保屏幕阅读器将在适当的情况下读出新内容，或者键盘焦点不会消失，并且最终到达意想不到的地方。

任何根据定义几乎不会改变 UI 的 javascript 本身都不会存在可访问性问题：因此 Web 套接字、Web 工作者、本地存储等本身不会存在可访问性问题；重要的是您以后是否以及何时更新 DOM。

# r - np 包结果的部分回归图

> ID：13347202
> 
> 赞同：4
> 
> 时间：2012-11-12T16:11:10.870
> 
> 标签：r, plot, data-visualization

我使用 np 包 (npreg) 运行非参数回归，并尝试为感兴趣的变量 x1 绘制我的结果，并将所有其他变量保持在它们的均值/模式下。

```
library("np")

y  <- rnorm(100)
x1 <- rnorm(100,10,30)
x2 <- rbinom(100,1,0.5)
x3 <- rbinom(100,1,0.5)

model.np <- npreg(y ~ x1 + x2 + x3)
plot(model.np) 
```

这些图正是我想要的，但我无法弄清楚如何“手动”单独生成它们。特别是，我只想要第一个（三个）输出图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:22:21.273

显然，可以在 npplot-routine 的帮助文件中找到详细的答案，其中 plot.behavior 是关键参数。

对于我的示例，仅绘制 x1-graph 可以通过以下方式完成：

```
nlmodel.plot <- plot(model.np, plot.behavior="data")

y.eval <- fitted(nlmodel.plot$r1) #fit partial regression model for r1=airnoise
y.se <- se(nlmodel.plot$r1) #grab SE from botstrap 
y.lower.ci <- y.eval + logp.se[,1] #lower CI
y.upper.ci <- y.eval + logp.se[,2] #upper CI

x1.eval <- nlmodel.plot$r1$eval[,1]  #grab x1 values saved in plot$r1

plot(x1,y)
 lines(x1.eval,y.eval)
 lines(x1.eval,y.lower.ci,lty=3)
 lines(x1.eval,y.upper.ci,lty=3) 
```

# ipad - 从 ipad tableview 中删除不可见的标题

> ID：13347203
> 
> 赞同：1
> 
> 时间：2012-11-12T16:11:11.503
> 
> 标签：ipad, header, tableview

我的 UITableView 在 iPad 而不是 iPhone 上有某种不可见的标题/插图。

![iphone tableView](../Images/748071fc233db179cd3661639629f68d.png) ![ipad tableView](../Images/488d1ce2dd79a428cd5ddaab2b743d17.png)

我尝试了以下所有方法来删除这个不需要的标题/插图，但没有成功：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableview.sectionHeaderHeight = 0.f;
    self.tableview.sectionFooterHeight = 0.f;
    self.tableview.tableHeaderView = nil;
    self.tableview.tableFooterView = nil;
    self.tableview.contentInset = UIEdgeInsetsZero;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 0.f;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 0.f;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"";
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    return [[[UIView alloc] initWithFrame:CGRectNull] autorelease];
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    return [[[UIView alloc] initWithFrame:CGRectNull] autorelease];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:58:51.213

好吧，我终于找到方法了……

```
self.tableview.tableHeaderView = [[[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 0.f, FLT_MIN)] autorelease]; 
```

你不能使用: `nil`, `CGRectNull`, `CGRectZero`, 或任何高度为`0.f`. 所以我曾经`FLT_MIN`尽可能地接近`0.f`。

# java - Java：关于字符集转换的建议

> ID：13347205
> 
> 赞同：1
> 
> 时间：2012-11-12T16:11:19.837
> 
> 标签：java, character-encoding, data-conversion

我一直在研究执行以下操作的场景：

1.  获取Unicode格式的输入数据；[UTF-8]
2.  转换为 ISO-8559；
3.  检测并替换不支持的字符进行编码；【基于用户自定义键值对】

我的问题是，我一直在尝试深入查找有关 ISO-8559 的信息，但还没有运气。有没有人碰巧知道更多这件事？这与 ISO-8859 有何不同？任何细节都会很有帮助。

其次，将 ISO-8559 要求放在一边，我继续编写程序，将传入的数据转换为 Java 中的 ISO-8859。虽然我能够使用基于字符的替换来实现所需的功能，但当数据量很大时，它显然似乎很耗时。[以 MB 为单位]

我相信一定有更好的方法来做到这一点。有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:46:45.780

我假设您想将 UTF-8 转换为 ISO-8859 ***-1***，即 Western Latin-1。网上有很多字符集表。

1.  一般来说，对于 Web 浏览器和 Windows，最好转换为**Windows-1252**，这是一个重新定义范围 0x80 - 0xBF 的扩展，还带有 MS Word 中的特殊引号。即使在 Mac 上，浏览器也能够以 ISO-559-1 格式解释这些代码。

2.  Java 标准转换之类`new OutputStreamWriter(new FileOutputStream("..."), "Windows-1252")`的已经很多了。您可以编写一种过滤器，也可以查找引入的`?`未翻译特殊字符。您可以将 Windows-1252 中没有重音的拉丁字母翻译为 ASCII 字母：

    ```
     String s = ...
        s = Normalizer.normalize(s, Normalizer.Form.NFD);
        return s = s.replaceAll("\\p{InCombiningDiacriticalMarks}", ""); 
    ```

3.  对于印地语或西里尔语等其他脚本，要搜索的关键字是**音译**。

# database - 如何配置 CodeIgniter 以从特定数据库中获取信息？

> ID：13347206
> 
> 赞同：0
> 
> 时间：2012-11-12T16:11:20.430
> 
> 标签：database, codeigniter-2

我对 CodeIgniter 框架比较陌生（我正在使用 v2）。

我需要编写一个应用程序，以便用户登录到中央数据库。成功登录后，用户将被重定向到他们的后端，该后端应该连接到他们的特定数据库，该数据库存储在每个用户的登录表中。

如何设置 CodeIgniter 的配置以便能够从正确的数据库中获取信息？

我想实现这样的目标：

```
$config['default']['database'] = "Logins"
$config['specific']['database'] = get_user_database(); 
```

这在 CodeIgniter 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:59:13.773

第一印象，你有两个选择：

1.  将配置值设置为

    ```
    $this->config->set_item('specific', array('database' => get_user_database())); 
    ```

2.  使用[Hooks](http://codeigniter.com/user_guide/general/hooks.html)，可能在`pre_controller`挂钩点

# javascript - Javascript 日期过滤准确性问题

> ID：13347210
> 
> 赞同：0
> 
> 时间：2012-11-12T16:11:41.913
> 
> 标签：javascript, jquery, date, filter, datatable

我目前正在将 SQL 查询中的数据输出到表中，并尝试根据存储在数据表中的两个单独列中的日期对其进行过滤。当我在过滤器中输入日期时，它正在过滤它，但不准确。我以欧盟格式存储日期，表上的数据确实有时间，但过滤器没有。我不确定这是否是欧盟格式的问题或是否包含时间问题。

我正在使用以下代码取得轻微的成功。

```
var minBeginDateFilter;
var maxBeginDateFilter;
var minEndDateFilter;
var maxEndDateFilter;

$.fn.dataTableExt.afnFiltering.push(
  function( oSettings, aData, iDataIndex ) {

    var startTime = new Date(aData[3]).getTime();
    var endTime = new Date(aData[4]).getTime();

    if ( minBeginDateFilter && !isNaN(minBeginDateFilter) ) {
      if ( startTime < minBeginDateFilter ) {
        return false;
      }
    }

    if ( maxBeginDateFilter && !isNaN(maxBeginDateFilter) ) {
      if ( startTime > maxBeginDateFilter ) {
        return false;
      }
    }

    if ( minEndDateFilter && !isNaN(minEndDateFilter) ) {
      if ( endTime < minEndDateFilter ) {
        return false;
      }
    }

    if ( maxEndDateFilter && !isNaN(maxEndDateFilter) ) {
      if ( endTime > maxEndDateFilter ) {
        return false;
      }
    }

    return true;
  }
);
$(document).ready(function(){
    //initTable("#itemTable");
    $("tr:odd").css("background-color", "#DBD4CE");
    $("tr:even").css("background-color", "#F9F1EA");
    $("#dialog").dialog({ autoOpen: false });  
    $("#dialog_link").click(function() {  
        $("#dialog").dialog("open");  
    });

    var oTable = $('#itemTable').dataTable( {
      "bJQueryUI": true
    } );

    $.datepicker.dateFormat = 'dd/mm/yy';

    $( "#beginFrom" ).datepicker( {
      "onSelect": function(date) {
        minBeginDateFilter = new Date(date).getTime();
        oTable.fnDraw();
      },
      dateFormat: 'dd/mm/yy'
    } ).keyup( function () {
        minBeginDateFilter = new Date(this.value).getTime();
        oTable.fnDraw();
    } );

    $( "#beginTo" ).datepicker( {
      "onSelect": function(date) {
        maxBeginDateFilter = new Date(date).getTime();
        oTable.fnDraw();
      },
      dateFormat: 'dd/mm/yy'
    } ).keyup( function () {
        maxBeginDateFilter = new Date(this.value).getTime();
        oTable.fnDraw();
    } );

    $( "#endFrom" ).datepicker( {
          "onSelect": function(date) {
            minEndDateFilter = new Date(date).getTime();
            oTable.fnDraw();
          },
          dateFormat: 'dd/mm/yy'
    } ).keyup( function () {
        minEndDateFilter = new Date(this.value).getTime();
        oTable.fnDraw();
    } );

    $( "#endTo" ).datepicker( {
      "onSelect": function(date) {
        maxEndDateFilter = new Date(date).getTime();
        oTable.fnDraw();
      },
      dateFormat: 'dd/mm/yy'
    } ).keyup( function () {
        maxEndDateFilter = new Date(this.value).getTime();
        oTable.fnDraw();
    } );
}); 
```

表代码：

```
<table id="itemTable" border="0" cellpadding="0" cellspacing="0" width="100%">
<thead>
    <tr>
        <th>Start Date & Time ${timeZone}</th>
        <th>End Date & Time ${timeZone}</th>
    </tr>
</thead>

<tbody>
    <c:forEach items="${marketAlerts}" var="marketAlert">       
        <tr id="item_${marketAlert.messageId}">             
            <td><fmt:formatDate pattern="${datePattern}" value="${marketAlert.eventStart}" /></td>
            <td><fmt:formatDate pattern="${datePattern}" value="${marketAlert.eventStop}" /></td>
        </tr>
    </c:forEach>
</tbody>
</table> 
```

看着代码。我注意到没有表中的日期是欧盟格式的概念，所以我倾向于这是问题，但我不知道如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:20:59.960

您从数据库获取的数据和您应用的过滤器是否有可能属于不同的时区？应该注意的是，JavaScript 中的通用 Date 构造函数假定数据位于 Web 客户端（您的计算机）的时区中。

# c# - 更改 VS2010 文本格式

> ID：13347215
> 
> 赞同：3
> 
> 时间：2012-11-12T16:11:56.777
> 
> 标签：c#, visual-studio-2010, formatting

我正在寻找可以执行的 ac# 格式（如在 Eclipse 中）：

```
f(){
} 
```

代替

```
f()
{
} 
```

我检查了工具-> 选项格式，但找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:15:01.277

```
Tools -> Options 
    -> Text Editor 
        -> C# 
            -> Formatting 
                -> New Lines 
                    -> New line options for braces 
                        -> Place open brace on new line for .... 
```

那里有几个选项，我猜你可能想要禁用其中的大部分。但特别是在这种情况下，我认为是针对`Place open brace on new line for control blocks`.

此外，请查看那里和周围的 C# 的其他选项。它非常广泛，很可能您将能够实现您想要的任何风格组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:15:23.600

只需按照以下步骤操作：选项 -> 文本编辑器 -> C# -> 格式化 -> 新行

取消选中所有“大括号的新行选项”

![在此处输入图像描述](../Images/c9dc0c5f03c6aff325732dd3140fb6c0.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T16:15:04.767

工具 > 选项 > 文本编辑器 > C# > 格式 > 新行 > 将左大括号放在控制块的新行上。

# c# - Ninject 在具有多个程序集的 WebApi 项目中引发激活异常

> ID：13347220
> 
> 赞同：5
> 
> 时间：2012-11-12T16:12:12.287
> 
> 标签：c#, asp.net-web-api, ninject, ninject-extensions, ninject.web

我的 asp.net WebApi 项目由服务、核心和数据访问的多个程序集组成。为了在项目中使用 Ninject 作为我的 DI 容器，我从 NuGet 添加了 Ninject.Web.Common 包。然后，我将 IDependencyResolver 实现为：

```
public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
{
    readonly IKernel kernel;

    public NinjectDependencyResolver(IKernel kernel) : base(kernel)
    {
        this.kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return new NinjectDependencyScope(this.kernel.BeginBlock());
    }
}

public class NinjectDependencyScope : IDependencyScope
{
    IResolutionRoot resolver;

    public NinjectDependencyScope(IResolutionRoot resolver)
    {
        this.resolver = resolver;
    }

    public object GetService(System.Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        var resolved = this.resolver.Get(serviceType);
        return resolved;
    }

    public System.Collections.Generic.IEnumerable<object> GetServices(System.Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        return this.resolver.GetAll(serviceType);
    }

    public void Dispose()
    {
        IDisposable disposable = resolver as IDisposable;
        if (disposable != null)
            disposable.Dispose();

        resolver = null;
    }
} 
```

这是我的 Ninject.Web.Common.cs。

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
        RegisterServices(kernel);

        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind(x =>
            x.FromAssembliesInPath(AppDomain.CurrentDomain.RelativeSearchPath)
            .SelectAllIncludingAbstractClasses()
            .BindDefaultInterface()
            .Configure(config => config.InSingletonScope()));

        //kernel.Bind(x => 
        //    {
        //        x.FromAssembliesMatching("*")
        //        .SelectAllClasses()
        //        .BindDefaultInterface()
        //        .Configure(b => b.InTransientScope());
        //    });
        //kernel.Load()
        //kernel.Bind<ISecurityService>().To<SecurityServiceImplementation>();

        //kernel.Bind(x => x
        //    .FromAssembliesMatching("*")
        //    .SelectAllClasses()
        //    .BindDefaultInterface());
        //.Configure(b => b.InTransientScope()));
        //kernel.Load("*.dll");
    }        
} 
```

例外是

```
[ActivationException: Error activating IHostBufferPolicySelector
No matching bindings are available, and the type is not self-bindable.
Activation path:
1) Request for IHostBufferPolicySelector 
```

我使用了各种注册（注释掉），但没有一个工作。NinjectWebCommon.cs -> CreateKernel() 方法中的断点被命中，GetService(System.Type serviceType) 方法中的断点也是如此。AppDomain.CurrentDomain.RelativeSearchPath 解析到应用程序的 bin 目录，它包含所有 dll，包括 System.Web.Http.dll，其中包含 IHostBufferPolicySelector 类型。

如何正确使用 Ninject.Extensions.Conventions 设置内核以进行类型解析？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:17:58.403

从 Remo 的答案中的提示和 Filip 的评论以及大量的调试时间，我发现在 GetService() 实现中使用`this.resolver.Get(serviceType)`而不是`this.resolver.TryGet(serviceType)`在我的情况下是罪魁祸首。

我计划写一篇关于此的详细博客文章，但简短的是，一旦我们使用以下行将 NinjectDependencyResolver 插入 MVC： `GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);` 并且我们没有定义框架级别的依赖绑定（例如 IHostBufferPolicySelector 等），就会引发异常**一些**`Get()`框架级别依赖项的方法，当它们没有通过 Ninject 解决时。Using不会引发异常，并且框架会退回到未解决的（又名 null）依赖项的默认依赖项，例如 IHostBufferPolicySelector。所以，选项是**`TryGet()`**

 **1.  使用 TryGet() 方法来解决依赖关系。
2.  在 Try/Catch 中包装 Get 并丢弃异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T14:15:38.437

试试这个帖子。不要捕获 Ninject 异常，而是捕获所有 WebApi 调用的异常。[http://blog.greatrexpectations.com/2013/05/15/exception-handling-for-web-api-controller-constructors/](http://blog.greatrexpectations.com/2013/05/15/exception-handling-for-web-api-controller-constructors/) 在堆栈跟踪中，发生异常的构造函数是可见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:30:25.590

没有类`HostBufferPolicySelector`，所以没有类`IHostBufferPolicySelector`是默认接口。你可以试试`BindAllInterfaces`或`BindDefaultInterfaces`。**

# java - maven 循环依赖

> ID：13347222
> 
> 赞同：3
> 
> 时间：2012-11-12T16:12:14.863
> 
> 标签：java, jakarta-ee, maven, jboss

我有一个模块化的 maven 项目，其中两个模块“BIZ”和“EJB”包含如下内容：

```
//PART OF "BIZ" Module:

public interface MyInterface{

 public void foo();

}
............................................
public class ImplFactory{

public static MyInterface getInterfaceImplementation(){
MyInterface ret=null;
Class<? extends MyInterface> cl = null;
                try {
                    cl= (Class<? extends MyInterface>) Class.forName("InterfaceImpl");
                    ret= cl.newInstance();
                    }
                ....
                ret ret;
}
.......................................
public class MyClassX{

    public static void doSomethingX(){

    }
}

//PART OF "EJB" Module:

public class InterfaceImpl implements MyInterface
@EJB
private MyEJB1 ejb1;

public void  foo(){
    ejb1.doSomething();
}
........................................
@Stateless
public class MyEJB1{

    public void doSomething(){
    ...
    MyClassX.doSomethingX();
    ....
    }

} 
```

如您所见，**“EJB”依赖于“BIZ”**，因为它使用*MyClassX*（实际上，它使用了几个 BIZ 类）。这就是*ImplFactory*使用反射来实例化*InterfaceImpl*的原因。问题是*cl.newInstance()*将抛出**ClassCastException**因为 2 个模块分别属于 WAR 和 JAR（模块“EJB”被编译指定 type="ejb" 并使用 maven ejb 插件）并使用不同的 ClassLoader（它在 JBoss 7 上运行）。另一方面，*InterfaceImpl*不能移动到 BIZ，因为它需要*MyEJB1*来完成它的工作，这会引入循环依赖。

所以我的问题是：您将如何解决这个棘手的情况（以编程方式或通过更改配置）？我希望你能帮帮我！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:53:02.697

您应该多拆分这些依赖项。

像这样的东西会更好：

```
.
├── pom.xml
├── my-api ("API")
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── 我的
| └── 包装
| └── MyInterface.java
├── my-ejb ("EJB")
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── 我的
| └── 包装
| └── InterfaceImpl.java
└── 我的网络（“BIZ”）
    ├── pom.xml
    └── 源
        └── 主要
            ├── java
            | └── 我的
            | └── 包装
            | └── ImplFactory.java
            └── 网页应用
                └── WEB-INF
                    └── web.xml

```

`BIZ`将取决于`EJB`取决于`API`。

现在这将解决您眼前的问题，但我不建议您创建这些工厂，您应该改用[CDI](http://docs.oracle.com/javaee/6/tutorial/doc/giwhb.html)，但那是另一回事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:21:51.750

我不确定这是否有帮助，只是分享一些我用过的东西。

1.  对于循环依赖，当我的 war 文件中有一个 src 模块时我做的一件事。引用模块可以通过添加 maven dep 来从战争中取出 jar：（现在不确定确切的语法） `<dependancy> <groupid ../> <artifactid .war module name./> <jarModuleName> </dependancy>`

2.  在一种情况下，由于自冗余，我无法调用 war 模块的 src。然后我必须制作一个单独的 src 模块并将其作为依赖项添加到所有需要它的 war 模块中。

我不确定这是否可以帮助您。只是想分享我所知道的。让我知道您是否可以改进我的评论。

# java - 使用 Ebean 生成“删除级联”

> ID：13347233
> 
> 赞同：7
> 
> 时间：2012-11-12T16:12:44.307
> 
> 标签：java, hibernate, orm, persistence, ebean

我正在使用 Ebean，我最终需要将“删除级联”作为 DDL（数据定义语言） - 哪个注释可以做到这一点？我试过了

```
@OneToMany(cascade=CascadeType.REMOVE) 
```

但这给出了“删除限制”/不会更改默认的“删除限制”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:07:05.303

尝试这个

```
@OneToMany(mappedBy = "parent", cascade = javax.persistence.CascadeType.REMOVE)
@Cascade(org.hibernate.annotations.CascadeType.DELETE_ORPHAN) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:13:41.463

您需要在父类上使用[@OnDelete](http://docs.jboss.org/hibernate/stable/annotations/api/org/hibernate/annotations/OnDelete.html)注解，以便 Hibernate 在 DDL ( `@OnDelete(action = OnDeleteAction.CASCADE)`)中生成它

例如：

```
@Entity
class Parent {
   /* id and some attributes */

  @OneToMany(mappedBy = "parent", cascade = {CascadeType.REMOVE})
  @ForeignKey(name = "FK_CHILD_PARENT")
  @OnDelete(action = OnDeleteAction.CASCADE)
  List<Child> children;
}

@Entity
class Child {
   /* id and some attributes */

   Parent parent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T22:45:04.280

尽管您已要求将“删除级联”作为 DDL，但我的回答涵盖了软件级别。EBean 似乎不生成数据库级级联。相反，它处理软件中的级联操作。我认为这是一个很好的选择。

**从**（*avaje-ebeanorm-4.6.2.jar:com/avaje/ebeaninternal/server/persist/DefaultPersister*）看到这个

```
 /**
 * Delete the bean.
 * <p>
 * Note that preDelete fires before the deletion of children.
 * </p>
 */
private void delete(PersistRequestBean<?> request) {

    DeleteUnloadedForeignKeys unloadedForeignKeys = null;

    if (request.isPersistCascade()) {
        // delete children first ... register the
        // bean to handle bi-directional cascading
        request.registerDeleteBean();
        deleteAssocMany(request);
        request.unregisterDeleteBean();
    ... 
```

您可以看到，如果请求是级联的，则首先删除其子级（可能这是某种递归）。

在我的 postgre DB 中，自动生成的外键约束不包含任何级联，但删除操作仍然是级联的。

# python - 如何异或等于十六进制字符串？

> ID：13347237
> 
> 赞同：2
> 
> 时间：2012-11-12T16:13:01.357
> 
> 标签：python, hex

有人可以帮助了解它在 python（2.7.3 版本）中的工作原理吗？

例如，有两个十六进制字符串

```
a='5f70a65ac'
b='58e7e5c36' 
```

我怎样才能正确地异或？

我尝试使用类似的东西`hex (0x5f0x70 ^ 0x580xe70)`，但它不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:18:39.510

在尝试对其进行数学运算之前将字符串转换为整数，然后再转换回字符串。

```
print "%x" % (int(a, 16) ^ int(b, 16)) 
```

我在`%`这里使用转换回字符串，而不是`hex()`因为`hex()`添加`0x`到开头（`L`如果值是长整数，则添加到结尾）。你可以把它们去掉，但更容易一开始就不生成它们。

您也可以首先将它们写为十六进制文字：

```
a=0x5f70a65ac
b=0x58e7e5c36
print "%x" % (a ^ b) 
```

但是，如果您是从文件中读取它们或从用户那里获取它们或其他方式，那么第一种方法就是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:23:37.883

```
a = '5f70a65ac'
b = '58e7e5c36'
h = lambda s: ('0' + s)[(len(s) + 1) % 2:]
ah = h(a).decode('hex')
bh = h(b).decode('hex')
result = "".join(chr(ord(i) ^ ord(j)) for i, j in zip(ah, bh)).encode("hex") 
```

Currently, this only works with equally-lengthed strings, but can easily extended to work with arbitrary-lengthed ones.

# ajax - jQuery 拖放与 Pyramid + Ajax

> ID：13347238
> 
> 赞同：0
> 
> 时间：2012-11-12T16:13:08.853
> 
> 标签：ajax, json, jquery, pyramid

我使用[redips.net 表拖放表行](http://www.redips.net/javascript/drag-and-drop-table-row/)创建了一些工作 jQuery 代码。

我有这个在我的模板中需要的工作，但现在在“保存”时，我需要为我移动的数据生成一个 JSON 字符串，然后将它写入我的数据库（很容易），但我需要帮助是如何从我的网页中提取数据，然后将其保存到我的数据库中。

我目前的模板是：

```
<script type="text/javascript" src="/static/js/redips-drag-min.js"></script>
<div id="drag">
{% for vehicle in vehicles %} <!-- List the vehicles available -->
<table class="listing" id="{{ vehicle.id }}">
<colgroup><col width="100"/><col width="120"/><col width="480"/><col width="100"/><col width="100"/></colgroup>
<tr>
<th class="mark">{{ vehicle.reg }}</th>
</tr>
<tr>
<div id="drag">
{% for vehicle in vehicles %} <!-- List the vehicles available -->
<table class="listing" id="{{ vehicle.id }}">
<colgroup><col width="100"/><col width="120"/><col width="480"/><col width="100"/><col width="100"/></colgroup>
<tr>
<th class="mark">{{ vehicle.reg }}</th>
</tr>
<tr>
<th class="mark">  </th>    
<th class="mark">Account #</th>
<th class="mark">Customer</th>
<th class="mark">Order #</th>
<th class="mark">Order Weight</th>
</tr>
<tr> 
<td class="rowhandler"><div class="drag row"></div> </td> 
<td></td> 
<td></td> 
<td></td>  
<td></td>
</tr>
<!-- want items to be dropped as rows in here -->
</table>
{% endfor %}

<table class="listing">
<colgroup><col width="100"/><col width="120"/><col width="480"/><col width="100"/><col width="100"/></colgroup>
<tr>
<th class="mark">Collections</th>
</tr>
<tr>
<th class="mark">  </th>    
<th class="mark">Account #</th>
<th class="mark">Customer</th>
<th class="mark">Order #</th>
<th class="mark">Order Weight</th>
</tr>   
{% for order in orders %}
<tr> 
<!-- rows should be able to get dropped into any vehicle table -->
<td class="rowhandler"><div class="drag row"></div> </td> 
<td>{{ order.oh_custaccref }}</td> <!-- and then into any other table (if required) -->
<td>{{ order.name }}</td> 
<td>{{ order.oh_orderno }}</td>  
<td>{{ order.oh_orderwgt }}</td>
</tr>

{% endfor %}    
</table>

</div> <!-- end drag -->

<form id="myform">
    <ol id="drop_list">
    </ol>
    <input id="save_button" type="button" value="Save" class="button" onclick="redips.save()" title="Save form"/>
</form> 
```

所以我需要帮助的是如何将这些表中的数据转换为 JSON 字符串，以便我可以使用 Pyramid 对其进行操作。我找不到任何可以直接帮助我的东西，我有非常基本的 JavaScript/jQuery 知识（以及 AJAX），所以如果我尝试了错误的方法或产生了混乱的代码，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:08:05.610

好吧，最简单的方法是将表格移动到表单标签内，并为每一行添加一个具有唯一 ID 的隐藏输入：

```
<td>{{ order.oh_custaccref }} <input type="hidden" name="row_id" value="{{ order.oh_custaccref }}"</td> 
```

然后，当您提交表单时（不需要 JavaScript 技巧），row_ids 将按照它们在您的表中出现的顺序发送。在您的表单提交处理程序中，您将能够使用

```
row_ids = request.GET.getall('row_id') 
```

（有关解释，请参见[MultiDict](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/webob.html#multidict)）。

这种方法不会将 JSON 发送到服务器，只是普通的表单提交，但它允许您最大限度地减少对您不太熟悉的 JavaScript/jQuery/AJAX 的使用。

# php - 我所有页面的一个内部 php 脚本

> ID：13347242
> 
> 赞同：0
> 
> 时间：2012-11-12T16:13:29.460
> 
> 标签：php, javascript, html

我需要一些帮助。

我在我网站的每个页面上都有一些我想要的 php 代码。但是，如果我想编辑其中的某些内容，则必须在每个页面上编辑该 php 代码中的每一段代码。有没有办法让我只能在文件上进行编辑，它会反映在其他页面上的所有其他页面上。

这是php代码：

```
<?php

if (!$_SESSION["valid_user"])
        {
        // User not logged in, redirect to login page
        echo '<gen id= mess>You need to login to use this!!!</gen>';    
        echo "<p><a href=\"login.php\">login</a></p>";
        }else{

// Member only content
// ...
// ...
// ...

// Display Member information
echo "<p>User ID: " . $_SESSION["valid_id"];
echo "<p>Username: " . $_SESSION["valid_user"];

// Display logout link
echo "<p><a href=\"logout.php\">Click here to logout!</a></p>";
}
?> 
```

PS：我在想这可能有效（但它没有）：

```
include 'filename';

or

require 'filename'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:14:42.993

您可以根据您的要求使用[require_once](http://www.php.net/manual/en/function.require-once.php)或[include_once函数：](http://www.php.net/manual/en/function.include-once.php)

```
require_once("filename.php")
include_once("filename.php") 
```

这些可能最适合您想要做的事情，因为您只需要一次标题。

但是，如果您想多次包含某些内容，则可以使用：

```
require("filename.php")
include("filename.php") 
```

这不仅限于简单地包含您希望包含的页面部分 - 您还可以使用这些函数来包含包含您希望在代码的其他部分中使用的函数的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:16:28.393

您只需将脚本放在 ex. 脚本.php。以及您希望它包含的任何位置：

```
require_once 'script.php'; 
```

这样你只编辑一个文件。快乐编码:)

# php - 如何使用 MySQL SELECT 结果作为变量，然后在另一个 SELECT/UNION 语句中使用变量？

> ID：13347245
> 
> 赞同：1
> 
> 时间：2012-11-12T16:13:43.183
> 
> 标签：php, mysql, select

我的标题并没有完全正确地总结我需要什么，但希望当我解释我正在尝试做的事情时它会更清楚。我正在尝试创建一个基于 PHP 的网页，该网页采用输入的关键字并使用它将选择的数据输出到 Excel 电子表格。

我的第一个语句使用关键字来查找它所指的“itemid”在它自己的表中列出（键和 ID 的单独表并不理想，但我无法更改）：

```
SELECT items.itemid
FROM items
LEFT JOIN hosts ON hosts.hostid = items.hostid
WHERE hosts.host LIKE 'keyword'; 
```

这将返回一组可以返回 0 个结果或 10+ 个结果的数字。现在我需要根据这些结果返回一组结果。

例如：

```
SELECT items.name, data.clock, data.value
FROM data
LEFT JOIN items ON data.itemid = items.itemid
WHERE item.itemid = '<First result from previous statement>'
GROUP BY data.value
ORDER BY items.name, data.clock ASC
LIMIT 15
UNION ALL
SELECT items.name, data.clock, data.value
FROM data
LEFT JOIN items ON data.itemid = items.itemid
WHERE item.itemid = '<Second result from previous statement>'
GROUP BY data.value
ORDER BY items.name, data.clock ASC
LIMIT 15
...
So on for however many results there were
...
    SELECT items.name, data.clock, data.value
FROM data
LEFT JOIN items ON data.itemid = items.itemid
INTO OUTFILE '/file/location.csv' FIELDS ..ect
WHERE item.itemid = '<x result from previous statement>'
GROUP BY data.value
ORDER BY items.name, data.clock ASC
LIMIT 15 
```

我会使用 WHERE IN 而不是 UNION ALL，但我需要将其限制为每个值 15 个结果，因为有些结果最多可以有 100,000+ 行。

我在想可以将第一个语句的结果输​​入到一个数组中，然后将该数组用作第二个语句中的变量，但是每次我不确定如何编写时变量的数量都可能不同代码以这样的方式重复代码必要的次数并将 INTO OUTFILE 放在正确的位置。

我在用语言表达我需要的东西时遇到了一些麻烦，所以如果有任何不清楚的地方，请告诉我，我会尽快提供任何需要的信息。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:01:18.353

如果您想使用多个查询来完成此操作，您可以使用 do while。我认为我们可以通过使用如下的单个查询来做到这一点。

```
SELECT items.name, data.clock, data.value
FROM data
LEFT JOIN items ON data.itemid = items.itemid
LEFT JOIN hosts ON hosts.hosstid = items.hostid
WHERE hosts.host LIKE 'keyword';
GROUP BY data.value
ORDER BY items.name, data.clock ASC
LIMIT 15; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:24:32.113

最好的方法是从第一个查询中恢复信息，然后做一段时间：

```
$x=0;
while($row=$result->mysqli_fetch_array()){ //$result is the variable where you have the result of the 1st query execution
    //execute second query with $row[0], $row[1]... as variables, get the results in the variable $result2.
    //If you need groups of 15 elements do something like: 
    $y=$x*15;
    $query2="SELECT .... LIMIT $y, 15";
    $result2=$mysqli->query($query2);
    while($row2=$result2->mysqli_fetch_array()){
        //do something with the results of the 2nd query, stored in $row2[0], $row2[1], etc
    }
    $x++;
} 
```

# xcode - Objective C浮点乘法不准确

> ID：13347247
> 
> 赞同：1
> 
> 时间：2012-11-12T16:13:59.833
> 
> 标签：xcode, xcode4.5, floating-accuracy

我想做的很简单，但结果却出现了错误：

```
 float x = 423.36;
    NSLog(@"%f", x);
    NSLog(@"%.2f", x*17719); 
```

结果：

```
2012-11-12 11:19:02.096 test[2917:907] 423.359985
2012-11-12 11:19:02.098 test[2917:907] 7501515.50 
```

*   第一个问题：在第一个 NSLog 上，小数部分正在更改，我怎样才能保持原样？
*   第二个问题：由于小数变化，乘法过程导致乘积不准确。

用计算器计算时，我得到：7501515.84，这就是我想在我的应用程序中得到的。

有任何想法吗 ？提前致谢！罗伊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:26:58.477

1.  小数点会发生变化，因为`float`类型*不能准确地表示任意数字。*在浮点数中，您可以使用有限的精度，并且您需要小心您发现的确切原因：这些数字可能会在没有警告的情况下在您身上发生变化。

2.  这不是一个真正的问题，但我会尽力而为：我认为您想要做的是找到一种表示任意（或至少更高）精度的十进制数的方法来进行数学运算。幸运的是，iOS SDK 有一个答案：[NSDecimalNumber 类](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)，它可以让您处理任何可以表示为的数字`mantissa * 10 ^ exp`，其中`mantissa`最长为 38 位。查看该类参考，看看您是否可以移植现有的数学来使用它。

当您阅读时，这将是阅读[The Floating Point Guide](http://floating-point-gui.de/)的绝佳时机，该指南处理您发现的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:27:07.937

不要使用浮点数，因为它们对每个人都不精确。使用双打

# javascript - 在页面加载时调用 javascript 函数不起作用

> ID：13347248
> 
> 赞同：0
> 
> 时间：2012-11-12T16:14:00.950
> 
> 标签：javascript, jquery

这是我在我的 javascript 底部使用的代码（只是为了测试），以便让我的函数在页面加载时工作：

```
// Call to load     
$(document).ready(function()
{
    test();
}​ 
```

在我的 javascript 文件的顶部，我有这个：

```
function test() {
alert("hello")
}; 
```

为什么我的测试没有被调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:16:38.413

仔细查看您的 jQuery 调用：

```
// Call to load     
$(document).ready(function()
{
    test();
}​ 
```

你错过了 end ) 和一个分号。

```
// Call to load     
$(document).ready(function()
{
    test();
}​); 
```

如果您在浏览器中检查了控制台，您就可以知道这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T16:15:24.727

有一个错字（你错过了一个括号）：

```
$(document).ready(function()
{
    test();
}​); 
```

# ios - 为什么 fread 不释放 ios 上的内存

> ID：13347249
> 
> 赞同：0
> 
> 时间：2012-11-12T16:14:15.707
> 
> 标签：ios, c, memory-leaks, fread

我和我的同事正在努力解决这个问题。我们要解析一个文件（定制的 3d 对象文件）。问题在于使用 stdio 函数调用，如 fread、fseek 等。

在下面的代码中，当我在调用之前和调用之后检查虚拟内存时，每次运行函数时都会丢失 1MB，我不知道为什么会发生这种情况。

```
FILE *fp= fopen([path UTF8String], "rb");
char *buffer = (char *) malloc(MAX_STRING_LENGTH);
while(!feof(fp))
{
    fgets(buffer, MAX_STRING_LENGTH, fp);
}

if(0 == fclose(fp))
    NSLog(@"File is closed");

free(buffer) 
```

路径是从 ios 库生成的，MAX_STRING_LENGTH 是一个任意大的数字（例如 2000000）

在示例中还使用了[http://www.cplusplus.com/reference/clibrary/cstdio/fread/](http://www.cplusplus.com/reference/clibrary/cstdio/fread/)中的函数，但内存错误仍然存​​在。

我知道缓冲区不是问题，因为如果我只使用创建缓冲区并释放它，则不会占用内存，但如果我使用 while 循环，则在文件关闭并检查可用内存后，我的内存比以前少了. 在过去的一周里，它一直让我和我的同事疯狂地试图解决这个问题。

编辑：：

```
- (float)print_usage_memory
{    
vm_statistics_data_t vmStats;
mach_msg_type_number_t infoCount = HOST_VM_INFO_COUNT;
host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&vmStats, &infoCount);

const int availablePages = vmStats.free_count;
float availableMemory = [self pagesToMB:availablePages];

/*
 */     
const int totalPages = vmStats.wire_count + vmStats.active_count + vmStats.inactive_count + vmStats.free_count;
const int activePages = vmStats.active_count;
const int wiredPages = vmStats.wire_count;
const int purgeablePages = vmStats.purgeable_count;   

NSMutableString* txt = [[NSMutableString alloc] initWithCapacity:512];
[txt appendFormat:@"\nTotal: %d (%.2fMB)\n", totalPages, [self pagesToMB:totalPages]];
[txt appendFormat:@"                              nAvailable: %d (%.2fMB)\n", availablePages, availableMemory];
[txt appendFormat:@"                                 nActive: %d (%.2fMB)\n", activePages, [self pagesToMB:activePages]];
[txt appendFormat:@"nWired: %d (%.2fMB)\n", wiredPages, [self pagesToMB:wiredPages]];
[txt appendFormat:@"nPurgeable: %d (%.2fMB)\n", purgeablePages, [self pagesToMB:purgeablePages]];

NSLog(@"%@", txt);
[txt release];
txt = nil;

return availableMemory;
}

- (float)pagesToMB:(const int)pages
{
    return pages*4/1024;
} 
```

感谢您提供的任何帮助，或对此的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:00:15.433

几个想法：

1.  如果您在循环中运行测试，请确保排空循环内的自动释放池。否则，直到您的测试之后它才会被耗尽，并且会弄乱您的测量。例如：

    ```
    for(int i = 0; i < TEST_COUNT; i++)
    {
        // If you're using ARC, you can instead replace this with an
        // @autoreleasepool block
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        run_my_fopen_fgets_fclose_test();
        [pool release];
    } 
    ```

2.  尝试通过在打开对象后立即调用对象来使用无缓冲 I/ [`setbuf(fp, NULL)`](http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man3/setvbuf.3.html)O `FILE*`。通常，stdio 通过分配一个缓冲区来缓冲数据，`malloc`以便它可以读取大块的文件数据，并且`free`当您调用`fclose`. 您正在关闭文件，所以这不应该泄漏，但以防万一它与您的内存测量有关，可能值得尝试使用无缓冲 I/O 以获得更清晰的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:29:05.690

我想我们已经想通了。问题在于 ios 使用的 Autorelease 池，它实际上会在需要时释放内存，应用程序已关闭，或者当某些东西实际上需要为释放设置的内存时才能实际释放。在将大量内存恢复到几乎开始的状态（例如，它从 230mb 开始，而我现在有 225）之后，注意到它。这是一个奇怪的错误，因为我们希望所有这些都在未标记为发布时立即发布，并在需要时准确发布。

# c++ - 在另一个 CWnd 上绘制 CWnd

> ID：13347252
> 
> 赞同：0
> 
> 时间：2012-11-12T16:14:31.200
> 
> 标签：c++, mfc

我有一个 CWnd（父级），它拥有一个允许在其上绘制一些项目的网格控件。问题是我想在上面绘制一些复杂的 CWnd，但网格控制只允许绘制派生自与 CWnd 无关的“ItemBase”类的项目。

这个 ItemBase 类允许覆盖一个虚函数 void drawItem(CDC *, CRect)，它允许在提供的 CDC 和裁剪区域 CRect 中绘制自己的图形。

我的想法是将复杂的 CWnds 创建为父窗口的不可见子项，然后在 ItemBase 的 drawItem 中使用提供的 CDC 上的 CWnd::Paint。

所以我要做的是：

1.  我有一个网格控件。
2.  我创建了一组复杂的窗口
3.  我（为每个复杂的窗口）创建一个从 ItemBase 派生的类对象
4.  我将一组基本类型 ItemBase 的对象添加到网格控件
5.  在 drawItem(CDC *dc, CRect area) 我调用：

    m_sophisticatedWindow->MoveWindow(区域); //移动窗口到合适的位置 m_sophisticatedWindow->Print(dc, PRF_CLIENT); //渲染它

所以我期待在适当的研磨控制位置上绘制适当的复杂窗户，但是什么也没有发生。我尝试使用 PrintClient/PrintWindow 而不是 Print。我也在用 MoveWindow 做实验——比如改变位置到一些固定的位置，但它没有帮助。

如果我在 drawItem 中直接在 CDC 上绘制任何东西（如线条、点等） - 一切都很好，只是 Print 函数似乎没有按照我的预期做。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:29:38.440

我遇到的问题是我得到了设置为 CDC 的剪辑区域。所以只要我在“错误”的地方画画，什么都不会出现。

# android - 在服务类中显示 ProgressDialog

> ID：13347253
> 
> 赞同：4
> 
> 时间：2012-11-12T16:14:33.943
> 
> 标签：android, android-asynctask, android-service, progressdialog

我正在使用服务通过 AsyncTask 连接到网络。我想显示一个 ProgressDialog，直到应用程序连接到网络。但是我该怎么做呢？

我的服务如下所示：

```
package de.bertrandt.bertrandtknx;

import tuwien.auto.calimero.link.KNXNetworkLinkIP;
import tuwien.auto.calimero.process.ProcessCommunicator;
import de.bertrandt.bertrandtknx.Controls.OnOff;
import android.app.ProgressDialog;
import android.app.Service;
import android.content.Intent;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.AsyncTask;
import android.os.IBinder;
import android.widget.Toast;

public class ConnectionService  extends Service {

    public static KNXNetworkLinkIP m_netLinkIp = null;
    private static ProcessCommunicator m_pc = null;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
       //code to execute when the service is first created
        new Connect().execute();
    }

    @Override
    public void onDestroy() {
       //code to execute when the service is shutting down
        new Disconnect().execute();
    }

    public void onStartCommand(Intent intent, int startid) {
       //code to execute when the service is starting up
    }

    /**
     * GetIPAddress Async
     * */
    public String getIpAddr() {
           WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
           WifiInfo wifiInfo = wifiManager.getConnectionInfo();
           int ip = wifiInfo.getIpAddress();

           String ipString = String.format(
           "%d.%d.%d.%d",
           (ip & 0xff),
           (ip >> 8 & 0xff),
           (ip >> 16 & 0xff),
           (ip >> 24 & 0xff));

           return ipString.toString();
    }

    /**
     * Connect Async
     * */
    private class Connect extends AsyncTask<String, Void, String> {
          ProgressDialog dialog;
          boolean ok;
          @Override
          protected String doInBackground(String... params) {
              try {
                  //get local IP address
                  String ipAddress = getIpAddr();
                  System.out.println("WiFi address is " + ipAddress);

                  m_netLinkIp = Calimero.Util.connect(ipAddress, "192.168.0.2");

                  if (m_netLinkIp == null){

                      System.out.println("Can not connect to Demobard");
                      ok = false;
                  }
                  else{
                      System.out.println("Connected to Demoboard");
                      ok = true;

                      }
               } catch (Exception e) {         
                   e.printStackTrace(); 
               }
               return null;
          }      

          @Override
          protected void onPostExecute(String result) { 
            //dialog.dismiss();
            Toast.makeText(getApplicationContext(),
                    "Verbindung mit Demoboard " +
                            ((ok == true) ? "hergestellt" : "fehlgeschlagen"), Toast.LENGTH_LONG).show();
            if(ok == false){
                //show reconnect dialog
                //reconnect_dialog();
            }
          }

          @Override
          protected void onPreExecute() {
           // Setup Progress Dialog
           dialog = new ProgressDialog(OnOff.this);
           dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
           dialog.setMessage("Bitte warten, verbinde mit KNX-Board");
           dialog.setIndeterminate(true);
           dialog.show();*/
          }
    }

    /**
     * Disconnect Async
     * */
    private class Disconnect extends AsyncTask<String, Void, String> {
          @Override
          protected String doInBackground(String... params) {
                    try {
                        Calimero.Util.disconnect(m_netLinkIp);
                    } catch (Exception e) {
                        e.printStackTrace(); 
                    }
                return null;
          }      

    }

} 
```

当然，这段代码会产生问题，我如何获得启动服务的活动的上下文？

对话框应显示在启动服务的活动中，直到应用程序连接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:23:12.840

因此，服务不是您必须使用观察者模式的 UI。您的活动必须在服务中注册一个侦听器，以便服务可以通知活动的特殊事件（如开始加载或完成加载）。

您必须将以下 intercae 添加到您的服务类中：

```
 public interface serviceObserver {
        public void startLoading();
        public void stopLoading();
    } 
```

您的活动必须实现 serviceObserver。您的服务必须存储在活动中创建的 serviceObserver 的实例。如果您的服务在没有您的活动的情况下运行，我建议使用广播接收器进行通信。

# javascript - 文本溢出校正

> ID：13347255
> 
> 赞同：0
> 
> 时间：2012-11-12T16:14:41.667
> 
> 标签：javascript, css

我有一个高度和宽度有限的 div。它应该显示数字。但由于它的宽度有限，我想剪掉它的文字。但是使用“省略号”会出错。您可以自己尝试。

```
<div id="numdiv">1000</div>

#numdiv
{
cursor:pointer;
position:relative;
top:-80px;
left:103px;
text-align:left;
font-size:15px;
height:20px;
overflow:hidden; 
white-space:nowrap; 
text-overflow:ellipsis;
 width:18px;
border:1px solid #494949;
 background:#FF9900;
-moz-border-radius:3px;
 -webkit-border-radius:3px;
 border-radius:3px;
} 
```

要么我应该正确显示它，要么溢出的“+”号会很好。请帮助我。我还可以使用 JS 来动态检查长度。我猜 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:25:51.350

而不是`text-overflow: ellipsis`使用：

```
text-overflow:clip; 
```

见这里：http: [//jsbin.com/urubed/3/](http://jsbin.com/urubed/3/)

**编辑**

如果您希望它在没有 JS 的情况下动态更改`position: relative`为：

```
position: absolute; 
```

希望这可以帮助 ：）

# javascript - HTML 表单中的 onClick JavaScript 函数

> ID：13347257
> 
> 赞同：5
> 
> 时间：2012-11-12T16:14:44.357
> 
> 标签：javascript, html, forms, function

当它位于 html 表单中时，我无法获得一个简单的按钮来工作，而当它不在 html 表单中时它可以正常工作。

此代码不起作用：

```
<head>
    <script langauge="JavaScript">
    function reset(){
        alert('test')
    }
    </script>
</head>

<body>
<form name="nyform">
    <input type="button" value="Reset" onClick="reset()">
</form>
</body> 
```

虽然这个：

```
<head>
    <script langauge="JavaScript">
    function reset(){
        alert('test')
    }
    </script>
</head>

<body>
    <input type="button" value="Reset" onClick="reset()">
</body> 
```

这是什么原因，我该如何纠正？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:18:12.130

发生这种情况是因为该函数`reset()`在表单中具有不同的含义，并且您的自定义函数不会覆盖它。我将函数名称更改为`reset2`，一切都按预期工作。

# linux - 如何确定逗号分隔字符串中字符串的序号位置？

> ID：13347261
> 
> 赞同：1
> 
> 时间：2012-11-12T16:14:53.323
> 
> 标签：linux, bash, csv

我目前正在编写一个重新排列 csv 文件内容的脚本。如果我有与此类似的行：

```
stack,over,flow,dot,com 
```

我该如何确定命令分隔字符串中字符串/单词的位置。因此，例如，如果我要搜索堆栈，它将返回数字 1，如果我要搜索流，则将返回数字 3，依此类推。我已经想到了几种方法可以做到这一点，但它们大多是冗长的脚本，所以我觉得可能有一种更短/更简单的方法来做到这一点。如果有人可以提供建议/帮助，我将不胜感激，谢谢。这也是在 bash 环境中执行的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:38:19.783

awk oneliner:

```
awk -F, -vs=$search '{for (i=1;i<=NF;i++)if($i~"^"s"$"){print i;exit;}}{print "not found"}' yourString 
```

(see the example test below)

```
kent$  l="stack,over,flow,dot,com"
kent$  echo $l
stack,over,flow,dot,com
kent$  search=over
kent$  echo $search
over    
kent$  awk -F, -vs=$search '{for (i=1;i<=NF;i++)if($i~"^"s"$"){print i;exit;}}{print "not found"}' <<<$l
2
kent$  search=foobar    
kent$  awk -F, -vs=$search '{for (i=1;i<=NF;i++)if($i~"^"s"$"){print i;exit;}}{print "not found"}' <<<$l 
not found 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:38:51.147

```
echo $line | awk -F, '{
  for(i=1;i<=NF;i++){
    if($i=="your_string") print i;
  }
}' 
```

Note: NF stands for Number of Fields.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:33:34.627

一个bash函数：

```
position() {
    local search=$1
    local IFS=,
    local i=1
    set -- $2
    for word; do
        if [[ $word = $search ]]; then
            echo $i
            return
        fi
        ((i++))
    done
    echo -1
} 
```

然后：

```
$ position stack stack,over,flow,dot,com
1
$ position tack stack,over,flow,dot,com
-1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T03:54:05.487

仅仅因为您要求 100% 的 bash 解决方案（这不使用 sed、awk、seq 等）：

```
L='stack,over,flow,dot,com'
IFS=,
set -- $L
declare -A A
for ((i=1; i<=$#; i++))
do
    A[${!i}]=$i
done

# where's flow?
echo "flow=${A[flow]}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T16:40:50.990

`sed` and `grep` represented so far. Here's an `awk` solution:

```
echo "stack,over,flow,dot,com" | awk -F, '{ for (i=1; i < NF; ++i) if ($i == "flow") print i; }' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T16:32:58.680

### 分割线，然后找到行号

您可以使用 sed 拆分行，然后找到匹配的行号。例如：

```
search_term='flow'
echo 'stack,over,flow,dot,com' |
    sed -e  's/,/\n/g' |
    sed -ne "/^${search_term}\$/ {=; q}" 
```

因为 sed 是面向行的，所以在搜索匹配的行号之前需要先转换*整个文件。*这就是为什么我们要传递到另一个 sed 实例，而不是简单地在当前进程中使用第二个表达式。

当然还有其他方法可以做到这一点，但这更容易。YMMV。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T01:52:38.563

假设您要查找*所有*单词：

```
$ LINE=stack,over,flow,dot,com
$ read ${LINE//,/\ } rest < <(echo $(seq 100))
$ echo $stack $over $flow $dot $com
1 2 3 4 5 
```

当然，这很容易给您带来名称冲突，因此您可能需要在名称前添加一些前缀：

```
$ LINE=stack,over,flow,dot,com
$ read field_${v//,/\ field_} rest < <(echo $(seq 100))
$ echo $field_stack $field_over $field_flow $field_dot $field_com
1 2 3 4 5 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T16:25:41.863

您可以将逗号计数到匹配的字符串：

```
for word in stack over flow dot com ; do
    echo $word
    grep -o ".*$word" <<< stack,over,flow,dot,com \
    | grep -o , \
    | wc -l
done 
```

但是，如果您想使用 CSV 进行更多操作，那么切换到 Perl 并使用[Text::CSV](http://p3rl.org/Text%3a%3aCSV)将是可行的方法。

# c - 并行 (CUDA) 二维泊松求解器

> ID：13347265
> 
> 赞同：2
> 
> 时间：2012-11-12T16:15:02.010
> 
> 标签：c, cuda, parallel-processing, differential-equations, poisson

我必须使用预测校正方案来求解二维泊松方程。该方程必须在`n*m`非均匀网格上求解。预测-校正方案是指通过将一步的解和一个值相加得到`x`一步的解。该值是通过求解线性方程组获得的，类似于：`k+1``k``delta``delta`

A(x^k) * 增量 = b(x^k)

通过应用有限差分法，矩阵`A`具有`5`非零对角线：主对角线，紧邻上方和下方的对角线以及上方和下方的两个（由`n-1`零对角线与其他对角线分开）。不均匀，`A`显然是不对称的。此外， 的主对角线`A`和 向量`b`将根据旧解决方案进行更改。现在，我想使用并行算法来解决这个问题，因为寻找`delta`大网格可能非常昂贵。有任何想法吗？至于现在，我正在尝试 Jacobi 方法。

我相信我有两种可能的途径：我可以坚持直接和顺序方法或使用迭代方法。如果我选择后者，那么如果我想利用并行性，就必须使用 Jacobi 的方法。你知道其他并行方法吗？如果我选择前者，你知道是否有一种算法可以利用我`5`的对角线完全非零这一事实吗？Thomas 的块矩阵算法怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-17T17:54:38.147

我建议考虑使用[CUDA](http://www.nvidia.com/object/cuda_home_new.html)来解决此类问题。

下面我报告一个在笛卡尔网格中使用 Jacobi 方法求解泊松方程的示例代码。尽管计算网格与您感兴趣的不同，但这样的示例可以让您（以及其他用户）了解如何使用 CUDA 解决此类问题。

```
#include <stdio.h>
#include <string.h>

#include "Utilities.cuh"

#define BLOCK_SIZE 32

/********************************/
/* HOST INITIALIZATION FUNCTION */
/********************************/
void init(double * __restrict U, double * __restrict U_old, double * __restrict F, const double x_min, const double x_max, const double y_min, const double y_max, double delta, int Nb)
{
    // --- Initilize grid coordinates
    double x = -1.0;
    double y = -1.0;

    for (int i = 0; i < Nb; i++) {
        for (int j = 0; j < Nb; j++) {

            F    [i * (Nb) + j] = 0.0;
            U    [i * (Nb) + j] = 0.0;
            U_old[i * (Nb) + j] = 0.0;

            // --- Set radiator temperature in the source box
            if (x <= x_max && x >= x_min && y <= y_max && y >= y_min) F[i * Nb + j] = 200.0;

            // --- Boundary condition on the left, right and upper walls. The boundary condition on the lower wall is vanishing temperature
            if (i == (Nb - 1) || i == 0 || j == (Nb - 1))
            {
                U    [i * (Nb) + j] = 20.0;
                U_old[i * (Nb) + j] = 20.0;
            }
            // --- Update y-grid coordinate
            y += delta;
        }
        // --- Update x-grid coordinate
        x += delta;
        y = -1.0;
    }
}

/*********************************/
/* JACOBI ITERATOR HOST FUNCTION */
/*********************************/
void jacobi_iterator_CPU(const double * __restrict__ U, double * __restrict__ U_old, const double * __restrict__ F, const double delta2, const int Nb)
{
    for (int i=1; i<Nb-1; i++)
        for (int j=1; j<Nb-1; j++)
            U_old[j * Nb + i] = (U[j * Nb + (i - 1)] + U[j * Nb + (i + 1)] + U[(j - 1) * Nb + i] + U[(j + 1) * Nb + i] + (delta2 * F[j * Nb + i])) * 0.25;

}

/***********************************/
/* JACOBI ITERATOR KERNEL FUNCTION */
/***********************************/
__global__ void jacobi_iterator_GPU(const double * __restrict__ U, double * __restrict__ U_old, const double * __restrict__ F, const double delta2, const int Nb)
{
    int i = blockDim.x * blockIdx.x + threadIdx.x;
    int j = blockDim.y * blockIdx.y + threadIdx.y;

    if (i < Nb - 1 && j < Nb - 1 && i > 0 && j > 0)
    {
        U_old[j * Nb + i] = (U[j * Nb + (i - 1)] + U[j * Nb + (i + 1)] + U[(j - 1) * Nb + i] + U[(j + 1) * Nb + i] + (delta2 * F[j * Nb + i])) * 0.25;

    }
}

/***************************/
/* DISPLAY MATRIX FUNCTION */
/***************************/
void print_matrix(int N, double *M)
{
    int Nb = N + 2;
    int i, j;
    for (i = Nb - 1; i >= 0; i--)
    {
        for (j = 0; j < Nb; j++)
        {
            printf("%.2f\t", M[j * Nb + i]);
        }
        printf("\n");
    }
}

/********/
/* MAIN */
/********/
int main()
{
    // --- The computation domain is [-1, 1] x [-1, 1]

    const int N         = 16;                           // --- Grid size is N x N
    const int Nb        = N + 2;                        // --- Grid side including the boundaries is Nb x Nb
    const int MAX_ITER  = 1000;                         // --- Maximum number of iterations

    // --- Defining the source box
    double x_min = 0.0;
    double x_max = 1.0 / 3.0;
    double y_min = -2.0 / 3.0;
    double y_max = -1.0 / 3.0;

    double delta        = 2.0 / ((double)N - 1.0);      // --- Discretization step

    // --- Allocating host memory variables
    double *h_U             = (double *)malloc(Nb * Nb * sizeof(double));
    double *h_U_old         = (double *)malloc(Nb * Nb * sizeof(double));
    double *h_F             = (double *)malloc(Nb * Nb * sizeof(double));

    // --- Allocating device memory variables
    double *d_U;            gpuErrchk(cudaMalloc(&d_U,      Nb * Nb * sizeof(double)));
    double *d_U_old;        gpuErrchk(cudaMalloc(&d_U_old,  Nb * Nb * sizeof(double)));
    double *d_F;            gpuErrchk(cudaMalloc(&d_F,      Nb * Nb * sizeof(double)));

    // --- Dummy pointer for pointer swapping
    double *temp;

    // --- Host array initialization
    init(h_U, h_U_old, h_F, x_min, x_max, y_min, y_max, delta, Nb);

    // --- Copying arrays from host to device
    gpuErrchk(cudaMemcpy(d_U,       h_U,        Nb * Nb * sizeof(double), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_U_old,   h_U_old,    Nb * Nb * sizeof(double), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_F,       h_F,        Nb * Nb * sizeof(double), cudaMemcpyHostToDevice));

    // --- Host iterations
    for (int h = 0; h < MAX_ITER; h++)
    {
        jacobi_iterator_CPU(h_U, h_U_old, h_F, delta * delta, Nb);

        // --- Pointers swap
        temp = h_U;
        h_U = h_U_old;
        h_U_old = temp;
    }

    printf("Host results\n");
    print_matrix(N, h_U);

    // --- Device iterations
    dim3 DimBlock(BLOCK_SIZE, BLOCK_SIZE);
    dim3 DimGrid(iDivUp(N, BLOCK_SIZE), iDivUp(N, BLOCK_SIZE));

    for (int h = 0; h < MAX_ITER; h++)
    {
        jacobi_iterator_GPU<<<DimGrid, DimBlock>>>(d_U, d_U_old, d_F, delta * delta, Nb);

        // --- Pointers swap
        temp = d_U;
        d_U = d_U_old;
        d_U_old = temp;
    }

    // --- Move device result to the host
    gpuErrchk(cudaMemcpy(h_U, d_U, Nb * Nb * sizeof(double), cudaMemcpyDeviceToHost));

    printf("Device results\n");
    print_matrix(N, h_U);

    // --- Freeing host memory
    free(h_U);
    free(h_U_old);
    free(h_F);

    // --- Freeing device memory
    gpuErrchk(cudaFree(d_U));
    gpuErrchk(cudaFree(d_U_old));
    gpuErrchk(cudaFree(d_F));

    return 0;
} 
```

运行此类示例所需的`Utilities.cu`和文件保存在[此](https://github.com/OrangeOwlSolutions/CUDA_Utilities)github 页面中，此处省略。`Utilities.cuh`

# shader - 自定义着色器程序使用 Three.js 在画布上渲染“N”个立方体？

> ID：13347268
> 
> 赞同：0
> 
> 时间：2012-11-12T16:15:21.810
> 
> 标签：shader, webgl, three.js

```
<html lang="en">
    <head>
        <title>Three.js </title>
        <meta charset="utf-8">
        <script src="resources/three.min.js"></script>
        <script src="resources/stats.min.js"></script>
        <script src="resources/Detector.js"></script>
        <script id="vshader" type="x-shader/x-vertex" >
            #ifdef GL_ES                                
                precision highp float;                      
            #endif

            uniform mat4 worldviewproj;

            attribute vec4 vPosition;
            attribute vec4 vNormal;
            attribute vec2 vTexCoord1;

            varying vec2 v_texCoord;

            void main() {
                gl_Position = worldviewproj * vPosition;
                v_texCoord = vTexCoord1.st;
            }
        </script>
        <script id="fshader" type="x-shader/x-fragment">
            #ifdef GL_ES
                precision highp float;
            #endif

            uniform sampler2D uSampler;

            varying vec2 v_texCoord;

            varying vec3 vLightWeighting;

            void main() {
                vec4 textureColor = texture2D(uSampler, vec2(v_texCoord.s, v_texCoord.t));
                gl_FragColor = textureColor;
            }   
        </script>
    <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
            var container, stats;
            var camera, scene, renderer;
            var scale = 100, N=1000;
            var arr= [];
            var width = 720, height = 405;
            var uniforms, material;
            start =function()
            {
            init();
            animate();
            };      

            function init() 
            {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                camera = new THREE.PerspectiveCamera( 45, width / height, 0.1, 10000 );
                camera.position.x = 0;
                camera.position.y = 0;
                camera.position.z = 80;
                //camera.lookAt( new THREE.Vector3( scale/2, scale/2, scale/2 ) );

                scene = new THREE.Scene();

                renderer = new THREE.CanvasRenderer();
                renderer.setClearColor(new THREE.Color(0x000000));
                renderer.setSize( width, height );

                container.appendChild( renderer.domElement );

                uniforms = {
                        uSampler: { type: "t", value: THREE.ImageUtils.loadTexture( "resources/crate.jpg" ) }
                };

                var geometry = new THREE.CubeGeometry( 1, 1, 1 );

                //material = new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture("resources/crate.jpg")} );

                material = new THREE.ShaderMaterial( {

                    uniforms: uniforms,
                    vertexShader: document.getElementById( 'vshader' ).innerHTML,
                    fragmentShader: document.getElementById( 'fshader' ).innerHTML

                } );

                for ( var i = 0; i <= N; i++)
                {
                    arr.push(new THREE.Mesh( geometry, material ));
                    arr[i].position.set( (Math.random()-0.5) * scale, (Math.random()-0.5) * scale, (Math.random()-0.5) * scale ); 
                    scene.add( arr[i] );

                }

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.bottom = '1px';
                container.appendChild( stats.domElement );              

                document.getElementById('3dobjects').innerHTML = "The number of Cube Objects: " +N;

            }

            function animate() 
            {
                requestAnimationFrame( animate );
                render();
                stats.update();

            }

            function render() 
            {               
                renderer.render( scene, camera );

            }

        </script>
    </head>    
<body onload="start()">
    <label id="3dobjects">test</label>
</body>
</html> 
```

在自定义着色器程序之前，我使用默认的 THREE.MeshBasicMaterial ({Texture Source})，我有我的输出。但是在我使用这个自定义着色器程序之后，我无法得到我的结果。我不知道我的问题在上面的代码中到底在哪里。我一直在尝试各种方法，我可以。但没有想要的结果。任何想法或帮助请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:52:48.407

```
 varying vec2 v_texCoord;

    void main() {
        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * mvPosition;
        v_texCoord = uv;
    } 
```

这应该是您的顶点着色器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:14:59.260

您正在使用`THREE.CanvasRenderer`，它不支持自定义着色器等。试试`THREE.WebGLRenderer`。

此外，您没有设置`worldviewproj`制服，也没有设置那些不使用标准 Three.js 名称的属性。

# grails-orm - Grails 2显示作为id列别名的瞬态属性

> ID：13347271
> 
> 赞同：1
> 
> 时间：2012-11-12T16:15:25.063
> 
> 标签：grails-orm, grails-2.0, grails-domain-class

我刚开始使用 Grails，我有一个旧的 MSSQL DB，它需要一个新的花哨的 Grails UI。到目前为止我有这个代码

```
class Foo {
    version false
    columns {
        id column: 'legacy_id'
        bar column: 'legacy_column_1'
        baz column: 'legacy_column_2'
    }

    static transients = ['oldId']

    public int getOldId() { id }

    int id
    int bar
    String baz
} 
```

还有一些额外的脚手架等等。一切正常，除了一件事，那就是我无法让 Grails 在视图中向我显示名为“Old Id”的列，或者就此而言显示列 id。无论我调整什么，我总是只在列表视图中得到栏栏和 baz。

互联网在这个话题上相当安静，所以要么我在这里遗漏了一些明显的东西，这真的很简单，要么我必须磨练我的谷歌技能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:10:20.793

你需要把一些东西放到一个`mapping`块中

```
class Foo {

  static mapping = {
    version false
    table 'old_foo'  // whatever you legacy table name is
    id column: 'legacy_id'
    bar column: 'legacy_column_1'
    baz column: 'legacy_column_2'
  }

  static transients = ['oldId']

  public int getOldId() { id }

  int id //not really needed
  int bar
  String baz
} 
```

当您使用`generate views`or创建脚手架时，`generate all`它不会自动将`id`or添加`oldId`到视图中 - 但您可以自己添加它以确保它在那里使用

```
${fooInstance.id}
${fooInstance.oldId} 
```

您也不需要`int id`专门设置 - GORM 会自动创建它。

最后一件事 - 确保在 DataSource.groovy 文件中不要使用该`dbCreate`行更改数据库 - 我通常在使用旧数据库时将其完全注释掉。

# c# - 如何使用 C# 将不同的应用程序发送到托盘？

> ID：13347272
> 
> 赞同：2
> 
> 时间：2012-11-12T16:15:31.367
> 
> 标签：c#, taskbar, systray

我尝试搜索示例，但我发现的只是如何将您自己的应用程序发送到系统托盘。我想在我的表单上点击一个按钮，然后让记事本消失。甚至不需要去托盘..从视线和任务栏中消失就可以了，因为我可以使用我自己的应用程序界面来恢复它。

有什么例子吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:18:50.987

你所要求的是不可能的。

每个应用程序都必须调用 Windows 本身才能将其放入托盘中。然后它还需要一个通知图标和一个上下文菜单。因此，第三方应用程序无法将其提供给另一个应用程序。

# iphone - CAGradientLayer 紫色而不是红色

> ID：13347277
> 
> 赞同：1
> 
> 时间：2012-11-12T16:16:12.807
> 
> 标签：iphone, ios

我的问题很简单。

我想使用 CAGradientLayer 为我的 UIView 制作漂亮的渐变背景。

但问题是它显示出丑陋的紫罗兰色，而不是我想要的美妙的红色。

这是我正在使用的代码：

```
- (void)viewWillAppear:(BOOL)animated {
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.view.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor blackColor] CGColor], (id)[[UIColor colorWithRed:107 green:0 blue:27 alpha:1] CGColor], nil];
    [self.view.layer insertSublayer:gradient atIndex:0];
} 
```

结果，我可以看到：

![在此处输入图像描述](../Images/58f5bfc2ddffc3a236a72df71eaa91a6.png)

这不是我想要的......如果有人可以帮助我。

谢谢 ！干杯:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:18:28.133

您必须使用分数，而不是整数：

```
[UIColor colorWithRed:107/255.f green:0.f blue:27/255.f alpha:1.f]; 
```

当然，要小心整数除法。那个混蛋总是让我陷入这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:25:34.487

在这里你应该使用来自 RGB 的颜色作为

```
-(void)viewWillAppear:(BOOL)animated {
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = self.view.bounds;
//here just set the colour form RGB.
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:exactFractionVal green:exactFractionVal blue:exactFractionval alpha:1.f]; CGColor];
[self.view.layer insertSublayer:gradient atIndex:0];
}

//here exactFractionVal is the float value you should pass there for exact RGB. 
```

如果您在制作 RGB 时遇到任何问题，您可以在许多网站上找到它。在这里您可以看到用于制作所需颜色的 RGB 图表。

[这里是...！！！](http://www.tayloredmktg.com/rgb/)

[这是另一个很好的链接，您可以在其中获得非常好的红色 RGB](http://www.rapidtables.com/web/color/RGB_Color.htm)

我希望这可以帮助你在你所需要的..!!!

# c++ - C++编写自己的输入操纵器

> ID：13347286
> 
> 赞同：3
> 
> 时间：2012-11-12T16:16:39.740
> 
> 标签：c++

我有一个包含这个的数据文本文件

```
Map2D, [3, 2]
Dot3D, [25, -69, -33], [-2, -41, 58]
Map3D, [6, 9, -50]
Map2D, [3, 2]
Dot3D, [7, -12, 3], [9, 13, 68]
Map3D, [6, 9, 5]
Map2D, [3, 2]
Dot3D, [70, -120, -3], [-29, 1, 268]
Dot3D, [7, 12, 3], [-9, 13, 68]
Map3D, [1, 3, 8]
Dot2D, [5, 7], [3, 8] 
```

基本上，文本文件的第一个数据是我得到 4 类的类名

```
Map2D
Map3D
Dot2D
Dot3D 
```

我试图编写自己的文件操纵器，以便我的程序可以提取上面的数据并为 4 个类中的每一个重载提取运算符 >>，然后将其存储到相关对象中。

我正在考虑使用矢量、地图、集合或列表来存储 . 但是为此我如何实现我想做的事情，例如存储到类的相关对象中。

我尝试在谷歌上搜索如何创建自己的文件操纵器，但如果有人可以向我展示一些示例代码并且我可以在测试文件中编译并执行它然后自己观察输出，那就太好了。我想使用 iomanip 对 >> 运算符进行重载

对于造成的所有麻烦，我深表歉意。我也可以不使用数组来实现以下数据的存储。

我必须使用操纵器，因为我需要创建类似的东西

我需要做类似的事情

```
cout << "Input File Name";
cin >> readFile; 
```

并执行所有数据读取和对象创建

然后它将逐行读取记录，然后创建类以及其中的数据。

**感谢你的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:10.840

这是抽象工厂模式的一个非常典型的例子。

您不会使用 iomanip 来执行此操作。读取第一个单词，然后找到适当的处理程序并调用它来读取（解析）该行的其余部分并创建适当的对象。

对象本身不需要是协变的，用于创建它们的工厂应该是协变的。

当然，如果您想将它们全部存储在一个集合中，您将必须弄清楚您想要如何管理它。

如果你读到一个你不知道的“标题”，你当然会失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T16:26:50.020

最明显的迭代器形式是指针：指针可以指向数组中的元素，并且可以使用增量运算符 (++) 遍历它们。但是存在其他形式的迭代器。例如，每个容器类型（例如向量）都有一个特定的迭代器类型，旨在以有效的方式迭代其元素。

# python - Django 按子类名称过滤基类

> ID：13347287
> 
> 赞同：7
> 
> 时间：2012-11-12T16:16:41.000
> 
> 标签：python, django, django-models

我在 Django 中有以下模型继承结构：

```
class Parent(models.Model):
    # stuff

class A(Parent):
    # stuff

class B(Parent):
    # stuff

class C(Parent):
    # stuff

and the list goes on. 
```

我正在使用 django-model-utils 的 InheritanceManager 来过滤对象，例如：

```
Parent.objects.filter(foo=bar).select_subclasses() 
```

当我想过滤所有子类时，这很有效。我想要做的是过滤 A 和 B 对象，而不是 C 对象。我想用一个查询来做到这一点

```
Parent.objects.filter(foo=bar, __class__.__name__=A, __class__.__name__=B).select_subclasses() 
```

是否可以进行这样的过滤操作，如果可能的话，如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-11T12:06:16.333

当然可以在单个查询中执行此操作！

这一切都来自 Django 构建字段以引用父模型和子模型之间的关系的方式。每个孩子都有`parent-ref`某种类型的 a，它有一个`related_name`. 你可以查询这些。

您可能会发现最简单的方法是启动一个`./manage.py shell`，然后导入您的父模型类，然后执行一个无意义的查询：

```
Parent.objects.filter(foo='bar') 
```

这应该向您显示可用于查询的字段：然后您可以确定如何构建查询：

```
Parent.objects.filter(is_active=True).filter(
    models.Q(a__isnull=False) |
    models.Q(b__isnull=False)
).select_subclasses() 
```

这将执行一个查询，该查询将获取 A 的所有对象，B 的所有对象，`is_active`设置为`True`，并向下转换它们。

值得指出的是，`.select_subclasses()`它无法检测到哪些模型将被包含在内，因此它加入了*所有*子类。

但是......您可以将值传递给它，`select_subclasses`因此它只连接（和向下转换）到这些子类：

```
Parent.objects.filter(is_active=True).filter(
    models.Q(a__isnull=False) |
    models.Q(b__isnull=False)
).select_subclasses('a', 'b') 
```

现在，我们不再加入到表“c”到“z”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:49:26.807

它通常不被认为是最好的设置可继承的，因为这样每个 SQL 查询都必须进行连接。这会使你的表现更慢。为了提高性能，您可以使用`abstract`Meta 值：

```
class Parent(models.Model):
    # stuff
    class Meta:
        abstract = True 
```

这样每个表都是独立的，因此性能会更快。

如果这不适用于您，我认为不可能在单个查询中执行类似的操作，因为表/模型中的字段不包含它们所在的表中的任何信息。在这种情况下，您很可能不得不以某种方式将其子类化，`InheritanceManager`但是我不确定在那里做什么。如果你这样做了，那么使用 content_types 可能会有所帮助。

如果这工作量太大，那么您总是可以做一个简单的 hack（更多的是猴子修补......）。我知道它不漂亮，但它会起作用：

```
class Parent(models.Model):
    # stuff
    table = models.CharField(max_length=8, default='parent')

class A(Parent):
    # stuff
    table = models.CharField(max_length=8, default='a')

class B(Parent):
    # stuff
    table = models.CharField(max_length=8, default='b')

# and then something like
# please note that I've never used django-model-utils
# so don't know the correct syntax
Parent.objects.filter(foo=bar, table__in=['parent', 'a']).select_subclasses() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T04:09:51.093

另一个对我有用的 hacky 解决方案，无需向数据库添加更多信息：

```
letters = Parent.objects.filter(foo=bar)
for letter in letters:
    if type(letter) == C:
        letters.exclude(id=c.id) 
```

或者，如果您在不添加字段的情况下向模型添加信息：

```
class Parent(models.Model):
    # stuff

class A(Parent):
    code = 'A'
    # stuff

class B(Parent):
    code = 'B'
    # stuff

class C(Parent):
    code = 'C'
    # stuff 
```

进而...

```
letters = Parent.objects.filter(foo=bar)
for letter in letters:
    if letter.child().code == 'C':
        letters.exclude(id=c.id) 
```

为我的目的工作，虽然仍然是一个黑客......

# python - 如何为不规则采样的时间序列获得漂亮的刻度标签？

> ID：13347288
> 
> 赞同：2
> 
> 时间：2012-11-12T16:16:43.343
> 
> 标签：python, matplotlib, pandas

我有一个不规则时间采样的 Pandas 系列（大约 5 秒，但由于延迟总是延迟几毫秒）。

我可以绘制这些数据以获得**漂亮的 x 轴刻度标签**吗？到目前为止，我只得到这个：

```
>>> print(bare_data.index)
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-11-08 12:00:05.130309, ..., 2012-11-09 11:38:18.997584]
Length: 16332, Freq: None, Timezone: None
>>> bare_data.plot() 
```

![在此处输入图像描述](../Images/7df91b39f69a5d65c1ad163c7be6e644.png)

在查阅了 Pandas 文档后，我发现通过重新采样和插值数据可以使这更漂亮：

```
>>> bare_data.resample('5s').interpolate().plot() 
```

![重采样数据](../Images/f831cd69706dce4f62cc29022166ec19.png)

但是，这会引入潜在的错误，这取决于我的原始采样时间，所以我想知道是否有一种无损的方法来获得漂亮的刻度标签，因为*即使在第一种情况下索引也是由 Timestamps 组成的*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:12:34.387

对于常规频率，pandas 在绘图之前将基础索引转换为 PeriodIndex，并为 PeriodIndex 使用一组不同的刻度格式化程序和定位器。

作为目前的解决方法，您可以使用`rot`旋转刻度，使它们不重叠。它不会像第二个情节那么漂亮，但它至少是可读的。

我在 github 上提出了一个问题（https://github.com/pydata/pandas/issues/2235）。

# c# - 如何循环和处理匹配与不匹配？

> ID：13347296
> 
> 赞同：0
> 
> 时间：2012-11-12T16:17:22.790
> 
> 标签：c#, winforms, listview, loops

我有一个包含 2 列的 ListView。例如，我们会说它看起来像这样：

```
ColA    | ColB  
-----------------
001     |  
002     |  
003     |  
004     |  
005     | 
```

我有一个包含以下行的文本文件：

```
001  
002  
004  
005  
008 
```

我正在尝试逐行读取文件，如果数字与 ColumnA 中的数字匹配，我想将其添加到 ColumnB。这很好用（请参阅下面的示例）。但是，我还想将任何不匹配项添加为新的 ListViewItem。我无法弄清楚那部分。这是我到目前为止所拥有的：

```
foreach (string textfileitem in TheTextFile)
{
    foreach (ListViewItem item in ListView1.Items)
    {
        var existingitem = item.SubItems[0];

        if (existingitem.Text == textfileitem)
        {
            item.SubItems[1].Text = textfileitem;
        }
    }
} 
```

我不确定如何处理任何不匹配并将它们添加到 ListView。最终结果将如下所示：

```
ColumnA | ColumnB
----------------- 
001     | 001
002     | 002
003     | 
004     | 004
005     | 005
-       | 008 
```

一如既往，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:22:50.873

运行你的`columnA`，创建一个字典`<String,YourDataSourceItem>`。使用 . 运行您的文件测试匹配`TryGetValue`。如果找到，设置`columnB`. 如果没有，请创建一个新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:32:05.417

这是另一种方法：

```
List<string> missingItems = new List<string>();
foreach (string textfileitem in TheTextFile)
{
    foreach (ListViewItem item in ListView1.Items)
    {
        var existingitem = item.SubItems[0];

        if (existingitem.Text == textfileitem)
        {
            item.SubItems[1].Text = textfileitem;
        }
        else
        {
            missingItems.Add(textfileitem);
        }
    }
}
foreach (string missingItem in missingItems)
{
    // Add missing item to your ListView.
    ListView1.Items.Add("missing").SubItems.Add(missingItem);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:10:06.727

我会做这样的事情：

```
List<string> listItems = ListView1.Items.Select(item => item[0].ToString())  // Get list of current items
foreach (string textItem in TheTextFile.Except(listItems)) { // Get all text items that are not in the current list
// Add missing list view item
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T21:03:01.160

根据@Neolisk 的建议，我重新考虑了我的流程并最终使用了 a 的`DataGridView`绑定`DataTable`。ColumnA 由`DataTable`. 然后，我将 ColumnA 中的每个项目放入一个`Dictionary`.

我的代码现在看起来像这样：

```
int count;
Dictionary<string, int> d = new Dictionary<string, int>();

foreach (DataRow dr in dataSet1.Tables["Table1"].Rows)
{
    d.Add((string)dr[0], count);
    count++;
}

foreach (string textfileitem in TheTextFile)
{
    string item = //specific data from textfileitem
    int value;

    if (d.TryGetValue(item, out value)
    {
        DataRow[] dr = dataSet1.Tables["Table1"].Select("ColumnA = " + item");
        dr[0]["ColumnB"] = item;
    }
    else
    {
        dataTable1.Rows.Add(null, item);
    }
} 
```

至少我希望这是准确的。我试图使我的代码通用并摆脱不必要的东西。

# database - 从 url 隐藏表 id 的最佳做法是什么？

> ID：13347299
> 
> 赞同：0
> 
> 时间：2012-11-12T16:17:27.150
> 
> 标签：database, jakarta-ee

我有一个如下所示的 URL。

[http://www.mycompany.com/id?=2](http://www.mycompany.com/id?=2)

id 部分是增量的，因此人们可以猜测接下来会发生什么。有没有一种奇特的方法可以从 URL 中隐藏表 id？我知道我可以加密它，但是没有一个通用的 api 什么的吗？尤其是在 Java 中。

多谢你们！

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:30:17.097

在数据库中使用某种散列算法作为主键而不是 ID（即 sha1(time + salt + random id)，在猜测时应该是相当安全的。还为那些尝试非有可能阻止它们的现有盐；）

# asp.net - 参数为空

> ID：13347300
> 
> 赞同：2
> 
> 时间：2012-11-12T16:17:31.283
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我见过很多类似的问题，我已经尝试了所有可能的答案，但我的问题仍然是一样的。基本上，我有以下 ajax 调用。

```
var obj = {
    Duration: 12000,
    Errors: 2
};
var post = $.ajax({
    url: APIUrl,
    data: JSON.stringify(obj),
    type: "POST",
    cache: false,
    dataType: 'json',
    contentType: 'application/json, charset=utf-8'
}); 
```

这是我的视图模型。

```
public class TargetBasedViewModel
{
    public int Duration{ get; set; }
    public int Errors{ get; set; }
} 
```

这是我的控制器。

```
 [HttpPost]
    public HttpResponseMessage Post(TargetBasedViewModel test)
    {
        return new HttpResponseMessage(HttpStatusCode.OK);
    } 
```

问题是参数一直为空。我使用 Fiddler 检查了请求，它看起来很好，所有属性都在那里，我什至可以检查 JSON 对象并确保我的值实际上被发送到服务器。我已经阅读了很多文章，甚至尝试将 [ModelBinder] 和 [FromBody] 添加到参数中，但仍然没有运气。我也尝试将此添加到我的 Application_Start()

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = new JsonSerializerSettings(); 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:58.223

你可以看看[这篇文章](https://stackoverflow.com/questions/6859371/ajax-post-to-asp-net-web-site-is-missing-parameters?rq=1)和接受的答案。它表明：

1.  为了发布，您需要以 FORM 的形式进行设置；
2.  您需要取消 dataType 和 contentType 参数。

我想我明白了！您的 contentType 参数：

它需要是“application/json;charset=utf-8”

“json”后面有一个逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:29:39.810

检查控制器上的 ModelState 属性。反序列化错误记录在那里。您可能会发现反序列化失败的原因。

# symfony - Symfony 2 - 添加字段到

> ID：13347301
> 
> 赞同：0
> 
> 时间：2012-11-12T16:17:32.570
> 
> 标签：symfony

在我的控制器中，我有：

```
$form = $this->createForm(new ResetPassword()); 
```

ResetPassword 是一个 AbstractType 类，它有自己的 buildForm() 方法，我用它来 -> 按原样添加一些字段。

在我的控制器中，我希望能够在显示之前向表单添加另一个字段。

这是我正在尝试的：

```
$form = $this->createForm(new ResetPassword())->add('test'); 
```

这会产生一个错误：

```
Catchable Fatal Error: Argument 1 passed to Symfony\Component\Form\Form::add() must implement interface Symfony\Component\Form\FormInterface, string given 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:35:30.307

有一种更好的方法可以让您继续在干净的 MVC 结构中工作。所以，更好的是使用“表单事件”来[动态生成您的表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)。

例如，通过将事件订阅者添加到您的表单，您将字段的创建委托给该订阅者。然后，您可以根据您的“EventType”在订阅者中添加所需的字段。

[将事件订阅者添加到表单类](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html#adding-an-event-subscriber-to-a-form-class)

[如何使用表单事件动态生成表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

# xml - 如何让 Visual Studio 2010 记住自定义 xml 架构

> ID：13347304
> 
> 赞同：1
> 
> 时间：2012-11-12T16:17:49.747
> 
> 标签：xml, visual-studio-2010, xsd

我正在开发一个带有几个自定义 xsd 模式的项目。它们只是偶尔使用一次，每次我来写一些东西时，我都必须在 xml 菜单中重新添加模式以获得智能感知。

在使用之间，它们不会更改位置/内容，并且不会修改已安装的版本（架构附带一个内部库，该库已多年未更改）。模式安装在本地程序文件中。我作为使用版本控制 (hg) 的团队的一员工作，并且模式没有与代码一起进行版本控制 - 如前所述，它们是单独库的一部分。

有什么方法可以让 Visual Studio 2010 在会话之间记住它们/有人知道为什么我每次都可能会丢失它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:35:49.127

您可以尝试将架构文件放在以下目录中：%ProgramFiles%\Microsoft Visual Studio 10.0\Xml\Schemas

# javascript - FB.ui 抛出错误

> ID：13347305
> 
> 赞同：-1
> 
> 时间：2012-11-12T16:17:54.710
> 
> 标签：javascript, facebook, facebook-javascript-sdk

```
FB.ui({
        method: 'apprequests',
        title: 'Swag with the Swedes',
    message: 'Win 2 tickets to Swedish House Mafia'
}, requestCallback); 
```

我有上面的代码抛出 Uncaught TypeError: Cannot call method 'postMessage' of null

我到处寻找这个但没有解决方案。有人知道出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:58:52.280

我发现了这个问题。

以下 div 必须在正文中：

```
<div id="fb-root"></div> 
```

# android - mono for android 4.2.6 离线安装程序

> ID：13347308
> 
> 赞同：2
> 
> 时间：2012-11-12T16:18:10.463
> 
> 标签：android

我正在互联网上寻找适用于 android 离线安装程序的单声道。有没有人有提到的软件的链接（android 4.2.6 的单声道。离线）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T08:40:53.300

如果您的意思是单平台运行时。下载并安装适用于 android 的 mono，然后转到“C:\Program Files (x86)\MSBuild\Novell\platforms”（适用于 x64）或“C:\Program Files\MSBuild\Novell\platforms”（适用于 x86）并选择平台和目录。有 Mono.Android.Platform.apk 文件

，但最好将程序集与您的 apk 链接起来。

下载 2.4.6 的直接链接：http: [//download.xamarin.com/MonoforAndroid/Windows/mono-android-4.2.6.103999197.msi](http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.2.6.103999197.msi)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-11T18:46:32.767

Mono For Android 4.6.08007 的直接下载链接

[http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.08007.msi](http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.08007.msi)

如果您想要最新版本，请下载 Xamarin 安装程序，运行它，开始下载，转到

```
[SYSTEM DRIVE]:\Users\[USERNAME]\AppData\Local\Temp\Xamarin\downloads 
```

并打开“InstallationManifest.xml”...然后获取所有网址并取消下载。

问候

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T09:22:57.820

Mono For Android 4.6.00049 (154 MB) 的直接下载链接

关联。：

[https://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.00049.msi](https://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.6.00049.msi)

享受..

# xml - 播放框架内容类型 application/xml

> ID：13347314
> 
> 赞同：2
> 
> 时间：2012-11-12T16:18:31.677
> 
> 标签：xml, playframework, mime-types, content-type

我正在使用 Play 实现 REST Web 服务！2.0.4 版。

经过几次测试 - 使用 curl 请求资源 - 我注意到 Play！仅接受具有以下 Content-Type 的 XML：text/xml。根据 W3，text/xml 和 application/xml 都是有效的 MIME 类型。

来自：[http ://www.w3.org/TR/xhtml-media-types/](http://www.w3.org/TR/xhtml-media-types/)

> 也可以使用媒体类型“application/xml”和“text/xml”，但在适当的时候，应该使用“application/xhtml+xml”或“text/html”而不是那些通用的 XML 媒体类型。

问题。在我的代码中，我有类似的东西：

```
106: if (request().getHeader("Content-Type").contains("text/xml")
107:            || request().getHeader("Content-Type").contains("application/xml")) {
108:        
109:        Document xml = request().body().asXml();
110:        Node root = XPath.selectNode("cost", xml);
        ...
} 
```

如果 Content-Type 等于 text/xml 一切正常，但对于其他站点，如果 Content-Type 等于 application/xml 则播放！框架`null`在作业中返回`Document xml = request().body().asXml();`

以下是我用来测试 Web 服务的列表命令（使用 curl）：

```
$ curl -i -X POST -d @input.xml -H "Content-Type: text/xml" \
http://localhost:9000/costs

HTTP/1.1 200 OK
Content-Type: text/xml
Content-Length: 146

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><cost>3089219.0</cost>

$ curl -i -X POST -d @input.xml -H "Content-Type: application/xml" \
http://localhost:9000/costs

HTTP/1.1 500 Internal Server Error
Content-Type: text/html; charset=utf-8
Content-Length: 5231

...
[RuntimeException: java.lang.RuntimeException: java.lang.NullPointerException]
In (...)/app/controllers/Application.java at line 110.
... 
```

这是一个错误还是正常行为？

谢谢！

*里卡多·F·特谢拉*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:18:00.687

现在我不一定能够回答这是否是有意的，但我也遇到了同样的问题并为这种情况管理了一个解决方法。

您应该能够收到您的`request().body().asRaw().asBytes()`，这将返回一个`byte[]`.

从那里，它可以用来构造 a `ByteArrayInputStream`，`Document`它将接受作为它自己构造的参数。

```
DocumentBuilder docBuilder = DocumentBuilderFactory().newInstance().newDocumentBuilder();
Document xml = docBuilder.parse(new ByteArrayInputStream(request().body().asRaw().asBytes())); 
```

# matlab - 从编辑框 Matlab 中获取最后一个数字

> ID：13347323
> 
> 赞同：0
> 
> 时间：2012-11-12T16:19:06.787
> 
> 标签：matlab, numbers, brackets, trigonometry

我正在用 matlab 制作计算器，当按下 sin 按钮时，我想从编辑框中获取最后一个输入数字并将其放入 sind() 括号中。怎么做？我搜索了几个小时，没有找到任何东西。

现在我的 sin 按钮代码如下所示：

```
 % --- Executes on button press in pushbutton40.
function pushbutton40_Callback(hObject, eventdata, handles)
inpfieldtxt = get(handles.edit1,'string');
if(strcmp(inpfieldtxt,'0.')==1)
    set(handles.edit1,'String','sind(');
else
    inpfieldtxt=strcat(inpfieldtxt,'sind(');
    set(handles.edit1,'String',inpfieldtxt)
end 
```

它只是将'sind(' 插入到编辑框，然后我需要手动输入数字和右括号')'。

我希望这个按钮作为 Windows 7 计算器的 sin 按钮做出反应。它还获取最后一个数字并将其放入 sin(here)。

我得到了它！这是解决方案：

```
% --- Executes on button press in pushbutton40.
function pushbutton40_Callback(hObject, eventdata, handles)
inpfieldtxt = get(handles.edit1,'string');
if(strcmp(inpfieldtxt,'0.')==1)
    set(handles.edit1,'String','sind(');
else
    isNumber = (inpfieldtxt >= '0') & (inpfieldtxt <= '9');
    i=length(inpfieldtxt);
    while (i > 0) && (isNumber(i))
        if isNumber(i)
            i = i-1;
        end
    end
    lastnmb = inpfieldtxt(i+1:end);
    inpfieldtxt = inpfieldtxt(1:i);
    set(handles.edit1,'String',[inpfieldtxt,'sind(',lastnmb,')']);
end 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:30:35.890

`ivedlauktxt(end)`给出最后一个字符

再三考虑，您可能想调查一下`str2num()`

编辑：

鉴于您正在寻找的具体事物，这可能是一种方法：

```
isNumber = (ivedlauktxt >= '0')  & (ivedlauktxt <= '9')
i=length(ivedlauktxt); %Initialize loop
while i>0   && (isNumber(i))
   if isNumber(i)
      i=i-1;
   end
end

str2num( ivedlauktxt(i+1:end) ) 
```

没有测试它，但它应该能让你到达那里！

# c# - C# 应用程序关闭自身的第一个实例

> ID：13347325
> 
> 赞同：2
> 
> 时间：2012-11-12T16:19:17.280
> 
> 标签：c#, .net

我知道如何确保一次只运行一个应用程序实例： [如何检查应用程序的另一个实例是否正在运行](https://stackoverflow.com/questions/6392031/c-sharp-how-to-check-if-another-instance-of-the-application-is-running)

但是......我怎样才能确保当第二个实例启动时，第一个实例将被关闭（而不是仅仅退出通常完成的第二个实例）。最好等待它完全关闭。

如果同时启动了 2 个以上的实例，那么应该只允许最后一个实例“存活”。

我明白了（谢谢你所有的答案）。我的解决方案如下：

```
 #region Kill other running processes of this application
        List<Process> processes = Process.GetProcessesByName(Process.GetCurrentProcess().ProcessName).ToList();
        if (processes.Count > 1)
        {
            processes.Sort((x, y) => DateTime.Compare(x.StartTime, y.StartTime));
            for (int i = 0; i < processes.Count - 1; i++)
            {
                processes[i].CloseMainWindow();
                processes[i].WaitForExit();
            }
        }
        #endregion

        Console.WriteLine(string.Format("{0}:{1}", DateTime.Now.Minute, DateTime.Now.Second));
        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:29:39.913

您可以使用Microsoft.VisualBasic.dll 的[WindowsFormsApplicationBase](http://msdn.microsoft.com/en-us/library/ms127621.aspx)类。

当创建另一个实例时，在第一个应用程序中引发[StartupNextInstance事件。](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.windowsformsapplicationbase.startupnextinstance.aspx)在这种情况下，您可以终止当前进程。

```
 Process.GetCurrentProcess().Kill(); 
```

这将确保新实例处于活动状态，并且先前的实例已关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:24:49.963

可能有更好的方法来做到这一点，涉及进程和事件之间的其他相互通信，但这是一种不需要研究的基本方法（至少在我看来）

当一个进程启动时，创建一个文件（可能带有时间戳）来表示它是否已启动。

让原始进程定期检查文件，并在看到更新的时间戳时停止它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:36:42.143

我认为您自己对逻辑有点困惑。顺便说一下，这里有一些你应该用来做这样的事情的项目：

1- [System.Diagnostics.Process.WaitForExit](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)

`"Kill"`通过为特定的流程实例调用此方法，您可以在调用or`"Shutdown"`方法后等到流程完全退出。如果它是 Windows 应用程序，它将关闭进程中的主窗口。对于有一些退出确认框的应用程序，它将等到用户确认或取消对话框（例如当您的窗口关闭而您的应用程序已经打开时）。

2- [System.Diagnostics.Process.ExitCode](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx)

如果要访问发送给进程的存在消息的结果，则应在调用函数**后**`"WaitForExit"`调用此属性的值。我想您可以使用此属性来确定第一个进程是否退出以及第二个进程的退出原因。

3-公共静态**int** Main

因为您需要从进程外部访问退出代码，您应该将`"Main"`方法的返回值更改为**int**。这样，您可以在第一个进程中返回一个值，并在第二个进程中通过`"ExitCode"`属性访问它。如果`"Main"`在您的情况下很难在函数中返回值，您可以通过调用第 4 项来传递退出代码。

4- System.Windows.Application.Shutdown（在 .NET < 4 中退出）

调用此方法与返回函数中的值完全相同`"Main"`。

5- [System.Diagnostics.Process.GetProcessesByName](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)

毕竟通过调用这个静态方法，您可以通过指定名称获取所有进程。

希望能帮助到你。我只是试图尽可能简单地解释一切。这些都是您可以用来实现逻辑的工具。如果您知道 .NET 为您提供的这些功能，剩下的事情就会变得如此简单。

毕竟，正如我已经忘记说的那样，如果你有兴趣做正确的事情，在我看来，正如我的经验所说，有一种技术专为这种逻辑而设计。

6- .NET 进程间通信或 IPC（[代码示例](http://www.codeproject.com/Articles/17606/NET-Interprocess-Communication)）（[codeguru 简介](http://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7259/InterProcess-Communication-in-NET-Using-Named-Pipes-Part-1.htm)）

IPC 基于 .NET 远程处理（我个人认为 .NET 中最有趣的讨论）但无论名称如何，它不仅用于远程通信。远程处理有很多部分，其中包括进程间通信 (IPC)。这很难，但如果你问我，这是最好的方法。

干杯

# c - c：从字符串中删除两个字符

> ID：13347329
> 
> 赞同：0
> 
> 时间：2012-11-12T16:19:39.417
> 
> 标签：c

我正在处理字符串：`{()}`我的代码搜索第一个`)`并用空格替换它和它之前`(`的字符，结果是`{ }`

我想要做的不是将匹配替换为空格，而是从字符串中删除括号并使用我现有的代码再次递归检查字符串。我正在尝试找到一种方法来使用`memmove`或类似的东西来折叠剩余的字符

```
char openKey[] = "({<[";
char closeKey[] = ")}>]";
pch = strpbrk(parenthesesStack, closeKey);
while (pch != NULL)
{

    if (opposits(*(pch-1),*pch)){
        printf("%c %c\n" , *(pch-1), *pch);
        memmove(pch-1,"  ",2);
    }
    pch = strpbrk (parenthesesStack,closeKey);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:24:33.987

所以你想将字符串的其余部分向左移动 2 个位置？

试试这个：

```
 memmove(pch-1, pch+1, strlen(pch+1) + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:43:11.753

而不是使用`memmove()`and `strlen()`，只需使用`strcpy()`.

```
strcpy( pch - 1, pch + 1); 
```

# installation - InstallShield 添加自定义操作以检查防病毒

> ID：13347332
> 
> 赞同：0
> 
> 时间：2012-11-12T16:19:51.473
> 
> 标签：installation, installshield

我是 InstallShield 的初学者（从某种意义上说，这是我第一次使用它！）。

我有一些代码打包在 .net DLL 中，以检查是否存在防病毒软件。我尝试创建的安装程序必须检查防病毒（通过使用我的 DLL 调用自定义操作？），如果没有找到则取消安装。

我看到它工作的方式是，用户会看到一个信息性对话框（“即将检查防病毒”），用户会按“下一步”它会调用自定义操作，然后显示一个成功屏幕，其中包含“下一步”按钮，或带有“完成”按钮的故障屏幕。

InstallShield 可以做到这一点吗？有没有什么好的教程可以做这种事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:36:18.730

您真的需要自定义操作吗？对于您要寻找的产品和版本，您是否有更详细的要求？

InstallShield / Windows Installer 有一个内置的搜索模式，可以查找注册表项、文件等。

如果您确实需要自定义操作，您预计执行需要多长时间？如果只有几秒钟，只需安排它在 AppSearch 之后运行。你不需要用户界面来说“现在做废话”就去做。

由于您想在 .NET 中执行此操作，因此您需要查看 Windows Installer XML (WiX) 部署工具基础 (DTF)。您可以使用它来创作/编译 InstallShield 然后可以使用的自定义操作 DLL。通常，自定义操作应该进行搜索，然后根据其结果设置属性。然后使用该属性来评估您尝试实施的任何业务规则。

# c++ - 字符数组分配

> ID：13347333
> 
> 赞同：1
> 
> 时间：2012-11-12T16:19:53.740
> 
> 标签：c++, character-arrays

在 C++ 中，如果我这样做：

```
char myArray[] = {'1','2','3','4','5','6','7','8','9'}; 
```

那会分配10个空间吗？最后一个元素是'/0'？

关于什么：

```
char myArray[9] = {'1','2','3','4','5','6','7','8','9'}; 
```

在这种情况下我只分配了 9 个空间吗？这很糟糕吗？

最后，当我这样做时会发生什么：

```
char myArray[10] = {'1','2','3','4','5','6','7','8','9','/0'}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T16:21:39.283

> ```
> char myArray[] = {'1','2','3','4','5','6','7','8','9'}; 
> ```
> 
> 那会分配10个空间吗？最后一个元素是'/0'？

9号。

* * *

> ```
> char myArray[9] = {'1','2','3','4','5','6','7','8','9'}; 
> ```
> 
> 在这种情况下我只分配了 9 个空间吗？

是的。

> 这很糟糕吗？

不。

* * *

> 最后当我这样做时会发生什么
> 
> ```
> char myArray[10] = {'1','2','3','4','5','6','7','8','9','/0'}; 
> ```

假设你的意思是`'\0'`，它的样子。

在任何这些情况下都没有魔法——你得到的正是你想要的。

*自动空终止是与字符串文字*一起发挥作用的东西：

```
char myArray1[10] = "123456789";
char myArray2[9]  = "123456789";  // won't compile - wrong size
char myArray3[]   = "123456789";  // still 10 elements - includes null terminator 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:22:00.440

不，您只会`NUL`在使用字符串文字时得到尾随，即：

```
// Array of 10 bytes
char myArray[] = "123456789";

// same as:
char myArray[] = {'1','2','3','4','5','6','7','8','9','\0'}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:23:45.780

```
char myArray[] = {'1','2','3','4','5','6','7','8','9'}; 
```

这仅分配 9 个元素。

```
char myArray[9] = {'1','2','3','4','5','6','7','8','9'}; 
```

是的，这一行也分配了 9 个元素。

```
char myArray[10] = {'1','2','3','4','5','6','7','8','9','/0'}; 
```

最后一个应该`'\0'`代替`'/0'`.

你想的应该是

```
char myArray[] = "123456789"; 
```

它分配 10 个字符（1 个用于`'\0'`字符串文字末尾的尾随）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T16:24:06.423

`char`使用列表初始化时，数组的行为与任何其他数组没有什么不同。你会期待吗

```
int x[] = {1,2}; 
```

神奇地将 a 添加`0`为最后一个元素并使其`x`具有 3 个元素？

如果您提供的元素较少，那么最后一个元素会进行值初始化，因此

```
char myArray[10] = {'1','2','3','4','5','6','7','8','9'}; 
```

将以空值终止，但

```
char myArray[9] = {'1','2','3','4','5','6','7','8','9'}; 
```

不是。

# c# - 通过 EF 从表中检索一个数字

> ID：13347338
> 
> 赞同：0
> 
> 时间：2012-11-12T16:20:05.863
> 
> 标签：c#, sql-server-2008, entity-framework, c#-4.0

实体框架 5.0 问题。

我是实体框架的新手，基本上我有一个表“MyPIN”。

```
[Table("MyPIN")]
public class BatchPINDetail
{
    public BatchPINDetail();
    public int Number { get; set; } 
```

我想运行一个查询

```
int x = the biggest Number FROM MyPIN 
```

对应的代码是：

```
public class InContext : DbContext
{
    public InContext();
    public InContext(string connectionString);

    public DbSet<BatchDetail> BatchDetailsRecords { get; set; }

} 
```

问题1：我不知道如何找回它。

问题2：得到值后，我想重新赋值，比如Number += 1；我需要将其写入数据库。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:24:05.907

```
InContext inContext = new InContext(cnStr);
// get first biggest item
BatchPINDetail entity = inContext.BatchDetailsRecords
                                 .OrderByDescending(x => x.Number)
                                 .First();
// get all biggest items
BatchPINDetail entities = inContext.BatchDetailsRecords
                                 .Where(x => x.Number == x.Max(x => x.Number))
                                 .ToArray();

// and if you just want to get biggest number. 
// but note that if you just change `num` nothing will happen.
int num = inContext.BatchDetailsRecords.Max(x => x.Number);

entity.Number += 1;
inContext.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:02:55.293

您可以使用类似以下代码的直接方法，避免来回调用数据库。

```
 InContext inContext = new InContext(cnStr);
    string Sql="SELECT *  FROM MyPIN where Number in (Select MAX(Number) from MyPIN)";
    BatchPINDetail[] entities = inContext.BatchDetailsRecords.SqlQuery(Sql).ToArray(); 
```

现在您可以进行更改并在此之后调用 SaveChanges()。

# android - 移动或 Web 应用程序：前进的方向

> ID：13347340
> 
> 赞同：-5
> 
> 时间：2012-11-12T16:20:21.197
> 
> 标签：android, ios, database-design, web-applications, blackberry

我需要在 Web 应用程序中开展一个项目，但确实需要将其作为移动应用程序，因为目标环境更多地使用手机而不是笔记本电脑，但也计划稍后使用 Web 应用程序。该应用程序类似于社交网站，但不用于社交联系。它基本上有两种不同类型的用户（普通用户和专业用户）。每个用户都必须能够创建自己的个人资料，普通用户必须能够关注专业用户（就像推特一样）。

我的问题是：

1.  我是否可以将其作为 Web 应用程序，然后寻找一种将其转换为移动应用程序的方法，因为我只有 Web 经验但没有移动应用程序？

    以 facebook 为例，它有单独的移动应用程序还是只是将 Web 应用程序转换为移动应用程序？

2.  什么样的数据库（关系型或非关系型）适合这种任务。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:37:03.030

> 以 facebook 为例，它有单独的移动应用程序还是只是将 Web 应用程序转换为移动应用程序？

在他们的 iOS 应用程序的早期版本中，他们基本上在移动应用程序包装器中呈现了一个 Web 应用程序。这导致了糟糕的用户体验，他们对版本 5 进行了彻底的重写，并使其成为一个完全原生的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:42:48.690

这取决于最终产品以及您希望拥有的设备集成级别（以及您希望何时拥有它）。

首先，听起来最好通过设计一个支持移动设备的标准 Web 应用程序来为您服务……如果您勤奋并设计一切以支持移动浏览器，那么您的初始部署没有任何理由不会在第一天就支持桌面和移动平台！

如果特定于平台的移动应用程序是一个长期目标，那么要考虑的另一件事是应用程序的架构。如果您现在计划将数据和逻辑与 UI（MVC 模式）分离，您会发现自己处于一个更好的位置，可以快速开发消耗服务的移动应用程序，而无需触及现有的应用程序或服务器软件！您甚至可以使您的 Web 应用程序面向服务，这可以将移动应用程序开发简化为简单的 UI 实现。

DB 的选择实际上取决于您需要做什么，尽管我个人对任何“正常”Web 应用程序的选择都是关系型的。以下是关于非关系数据库主题的另一个问题的链接：[我为什么要使用非关系数据库？](https://stackoverflow.com/questions/7935281/why-would-i-want-to-use-a-non-relational-database)

# php - HTML Listbox 用 PHP 更新另一个 Listbox

> ID：13347342
> 
> 赞同：2
> 
> 时间：2012-11-12T16:20:23.717
> 
> 标签：php, javascript, html

我有一个 HTML 列表框，我希望能够选择该列表框中的任何值，并根据该选择使用 PHP 数据库查询更新第二个列表框。

我尝试过的选项：

-我尝试过使用 JSON。我使用 Javascript 更新第二个列表框并调用外部 PHP 脚本，但返回的 PHP 值将是一个数组，并且不会与 Javascript 很好地转换。

- 我无法使用 cookie，所以我使用 HTML 会话。当您在第一个列表框中选择一个值时，它会更新会话值并刷新页面。重新加载后，页面使用 Session 值执行 PHP 脚本来更新第二个列表框，但我无法使用 Javascript 通过调用 onChange="function(); 使用第一个列表框更新 HTML Session 和第一个列表框的选定值.

有没有其他可用的选项来实现这一点？或者我该如何修复这些选项之一以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:53:53.580

所以这就是我将如何使用ajax。我会让 onChange 事件将列表的值传递给隐藏的输入。然后我会以以下方式发布输入。

```
var params = $('#hiddenInputId').serialize();
$.post('post.php', params, function(data){
                if(data.match(/^[\r\n\s]*OK=/)) {
                    $('#listOut').html(data.slice(data.indexOf('OK=') + 3));
                } 
                else if(data.match(/^[\r\n\s]*ERRORS=/)) {
                    alert(data.slice(data.indexOf('ERRORS=') + 7));
                }
}); 
```

#listOut 将指向一个跨度或您想用您的返回选择列表填充的东西。您将在 post.php 页面上设置一个 if 语句，用于侦听隐藏输入的提交并返回正确的值。

```
if(isset($_POST['hiddenInputName'])){
    $query = "SELECT * FROM table WHERE something LIKE'" . $_POST['hiddenInputName']."';";
    $result = mysql_query($query) or die(mysql_error());
    echo 'OK=created Select: <select>';
    while($row = mysql_fetch_array($result)){
        echo"<option value='" . $row['field_name'] . "'>" . $row['field_name'] ."</option>";
        }    
    }
    echo "</select>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:24:15.707

您说您尝试过使用 JSON，但您显然没有完全理解这意味着什么。JSON 只是一种格式化字符串的方式，任何具有解析器的机器都可以普遍理解。PHP 值是一个“数组”因此不可转换的想法是没有意义的；重要的是它以[JSON 格式](http://www.json.org)发送到客户端。

如果您在 PHP 中有一个数组，您可以使用以下`json_encode`函数将其转换为 JSON 格式：

```
<?php
my_arr = array('a' => 'b', 'c' => 'd');
// do stuff to fill array
echo json_encode($my_arr);
?> 
```

当您在 JavaScript 代码中以 JSON 格式收到它时，您可以将其解析为 JavaScript 对象 - 有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)。

# php - 正则表达式提示请求

> ID：13347343
> 
> 赞同：0
> 
> 时间：2012-11-12T16:20:26.410
> 
> 标签：php, regex

我有一个字符串

```
"first,second[,b],third[a,b[1,2,3]],fourth[a[1,2]],sixth" 
```

我想把它爆炸成数组

```
Array (
    0 => "first",
    1 => "second[,b]",
    2 => "third[a,b[1,2,3]]",
    3 => "fourth[a[1,2]]",
    4 => "sixth"
} 
```

我试图删除括号：

```
preg_replace("/[ ( (?>[^[]]+) | (?R) )* ]/xis", 
             "",
             "first,second[,b],third[a,b[1,2,3]],fourth[a[1,2]],sixth"
); 
```

但是在下一步被卡住了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:48:54.700

PHP 的正则表达式支持递归模式，所以这样的东西可以工作：

```
$text = "first,second[,b],third[a,b[1,2,3]],fourth[a[1,2]],sixth";

preg_match_all('/[^,\[\]]+(\[([^\[\]]|(?1))*])?/', $text, $matches);

print_r($matches[0]); 
```

这将打印：

```
大批
(
    [0] => 第一个
    [1] => 秒[,b]
    [2] => 第三[a,b[1,2,3]]
    [3] => 第四[a[1,2]]
    [4] => 第六
)
```

这里的关键不是`split`，而是`match`。

您是否想在代码库中添加这样一个神秘的正则表达式，取决于您:)

## 编辑

我刚刚意识到我上面的建议与以 . 开头的条目不匹配`[`。为此，请这样做：

```
$text = "first,second[,b],third[a,b[1,2,3]],fourth[a[1,2]],sixth,[s,[,e,[,v,],e,],n]";

preg_match_all("/
    (             # start match group 1
      [^,\[\]]    #   any char other than a comma or square bracket
      |           #   OR
      \[          #   an opening square bracket
      (           #   start match group 2
        [^\[\]]   #     any char other than a square bracket
        |         #     OR
        (?R)      #     recursively match the entire pattern
      )*          #   end match group 2, and repeat it zero or more times
      ]           #   an closing square bracket
    )+            # end match group 1, and repeat it once or more times
    /x", 
    $text, 
    $matches
);

print_r($matches[0]); 
```

打印：

```
大批
(
    [0] => 第一个
    [1] => 秒[,b]
    [2] => 第三[a,b[1,2,3]]
    [3] => 第四[a[1,2]]
    [4] => 第六
    [5] => [s,[,e,[,v,],e,],n]
)
```

# php - 比较用 apache2 MD5、htpasswd 加密的密码

> ID：13347344
> 
> 赞同：1
> 
> 时间：2012-11-12T16:20:29.897
> 
> 标签：php, apache, encryption, apache2, md5

我试图将两个密码与 Crypt 算法进行比较：

*   第一个是由我的程序用 PHP (md5()) 生成的*   第二个密码是使用 Apache 2 创建的（带有选项 - m）。

    但是我有一个问题：当我比较两个密码时，我的代码每次都获得相同的密码（加密）。我注意到，如果我重复这个过程，Apache 2 会生成另一个加密密码。

    例子 ：

    用户=“用户”密码=“密码”，

    apache2 生成这一行：

    “用户：$apr1$.1.Yc13v$uKn/tf7xbfDlo5qVpMoO/.” 使用 MD5 算法。

    在我的程序中，我的密码被加密为“5f4dcc3b5aa765d61d8327deb882cf99”。如果我尝试使用 Apache 2 生成相同的用户和密码，我有以下行：

    “用户：$apr1$yppuymMI$wucIxLfRKyWyZitz690Td1”

    MD5的比较应该怎么做？

    谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:06.160

无论您使用哪种散列算法，我怀疑您最初的问题是使用不同的盐值 -

```
yppuymMI

.1.Yc13v 
```

（来源： [这里](http://httpd.apache.org/docs/2.2/misc/password_encryptions.html)）

# r - 计算 R 中变量的增量

> ID：13347345
> 
> 赞同：1
> 
> 时间：2012-11-12T16:20:32.767
> 
> 标签：r, function, loops, plyr

我必须计算`m`一个时间间隔（t2-t1）的变量增量。这是我的数据框的虚拟版本：

```
df <- expand.grid(m = do.breaks(c(1, 10), 5),
                  sample = c("A", "B", "C", "D"))
df$t <- rep(1:6, 4, ordered = TRUE)
df$d_m <- NA 
```

我要做的是填充`df$d_m[i]`和 之间的差异`df$m[i+1]`，`df$m[i]`这也必须在每个样本级别内完成。所以这是我的尝试，但根本不成功。

```
delta_m <- function(m, t){
               for(i in 1:length(t)){
               df$d_m[i] <- m[i+1] - m[i]
               }}

df <- ddply(df, .(sample, t), transform, d_m = delta_m(m, t)) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:23:32.780

按以下方式拆分数据`sample`：

```
sdf <- split(df, df$sample) 
```

然后应用一个函数`diff()`（在一个转换内修改`d_m`每个数据框组件的内部`sdf`。请注意，没有`t == 0`这样的观察`d_m`是`NA`：

```
sdf <- lapply(sdf, function(x) transform(x, d_m = c(NA, diff(m)))) 
```

最后，将各个组件重新组合在一起

```
df <- do.call(rbind, sdf) 
```

这导致

```
> df
          m sample t d_m
A.A.1   1.0      A 1  NA
A.A.2   2.8      A 2 1.8
A.A.3   4.6      A 3 1.8
A.A.4   6.4      A 4 1.8
A.A.5   8.2      A 5 1.8
A.A.6  10.0      A 6 1.8
B.B.7   1.0      B 1  NA
B.B.8   2.8      B 2 1.8
B.B.9   4.6      B 3 1.8
B.B.10  6.4      B 4 1.8
B.B.11  8.2      B 5 1.8
B.B.12 10.0      B 6 1.8
C.C.13  1.0      C 1  NA
C.C.14  2.8      C 2 1.8
C.C.15  4.6      C 3 1.8
C.C.16  6.4      C 4 1.8
C.C.17  8.2      C 5 1.8
C.C.18 10.0      C 6 1.8
D.D.19  1.0      D 1  NA
D.D.20  2.8      D 2 1.8
D.D.21  4.6      D 3 1.8
D.D.22  6.4      D 4 1.8
D.D.23  8.2      D 5 1.8
D.D.24 10.0      D 6 1.8 
```

# html - 如何使用 CSS 规范化按钮和锚点？

> ID：13347352
> 
> 赞同：9
> 
> 时间：2012-11-12T16:20:46.910
> 
> 标签：html, css, button, anchor

查看此按钮和锚点的代码示例：http: [//jsbin.com/ecitex/2/edit](http://jsbin.com/ecitex/2/edit)

我试图使它们在所有浏览器中都相同。但是仍然存在差异，并且每个浏览器（尝试过 Chrome、Safari、Firefox、IE8）都有不同的差异。

我缺少哪些 CSS 规范化？

* * *

**更新：** 根据建议：

*   我添加了（尽管我的用户代理（Chrome的`line-height: 50px`）默认元素是，但它仍然垂直居中文本 - 怎么样？！）`line-height``button``normal`
*   我添加`cursor: pointer`了标准化鼠标光标。

[http://jsbin.com/ecitex/11/edit](http://jsbin.com/ecitex/11/edit)

那么，现在在 Firefox 中查看结果：注意到按钮上的填充了吗？然后在 IE8 中查看结果：哇，注意两者是如何完全不同的？！

* * *

**更新 2：**

似乎 IE 的问题是已知且无法解决的：[http ://www.quirksmode.org/css/tests/mozie_button2.html](http://www.quirksmode.org/css/tests/mozie_button2.html)

不过，我还没有在 Firefox 的填充上找到任何东西。（quirksmode 文章提到了 Mozilla 的一个问题，但这是一个不同的问题。）

* * *

**更新 3：**

太棒了，我们修复了 Firefox 问题：http: [//jsbin.com/ecitex/15/edit](http://jsbin.com/ecitex/15/edit)

好的，到目前为止，每个答案都提供了解决方案的一部分，因此实际上并没有一个最佳答案。我将向以下人员提供最佳答案：

*   解释了为什么我们必须指定 a`line-height: 50px`以在 an中垂直居中文本`a`，而 a`button`仅具有垂直居中的文本`line-height: normal`。
*   为 IE 问题提供解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T16:55:59.543

您可以使用以下方法删除 Firefox 中的额外填充：

```
button::-moz-focus-inner {
    border: 0;
    padding: 0;
} 
```

这是 Eric Meyer 关于行高的一个很好的解释，希望能解释为什么你需要明确地将其设置为 50px： http: [//meyerweb.com/eric/thoughts/2008/05/06/line-height-abnormal/](http://meyerweb.com/eric/thoughts/2008/05/06/line-height-abnormal/)。

这里有一些新的 CSS 修复了 IE 中的字体大小问题：

```
button, a {
  display: inline-block;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin: 10px 0;
  padding: 0px;
  height: 50px;
  border-width: 0;
  background-color: Red;
  color: White;
  font-family: sans-serif;
  font-weight: normal;
  font-size: inherit;
  text-decoration: none;
  line-height: 50px;
  cursor: pointer;
  font-size: 100%;
}
button {
  #width:0px;
  overflow: visible;
}
button::-moz-focus-inner {
  border: 0;
  padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T16:22:59.423

您需要使用`line-height`属性使您的锚标记文本垂直居中

[**演示**](http://jsfiddle.net/uzWLG/)

CSS

```
button, a {
  display: inline-block;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin: 10px 0;
  padding: 0;
  height: 50px;
  border-width: 0;
  background-color: Red;
  color: White;
  font-family: sans-serif;
  font-weight: normal;
  font-size: inherit;
  text-decoration: none;
  line-height: 50px; <-------- Here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T16:31:18.410

添加属性`cursor:pointer;`以便在鼠标悬停时添加指针（输入并不总是有它）

最后 `line-height:46px;`用于垂直对齐

完整代码在这里-> [http://jsbin.com/ecitex/10/edit](http://jsbin.com/ecitex/10/edit)

# php - regex_match 仅用于长度

> ID：13347354
> 
> 赞同：0
> 
> 时间：2012-11-12T16:20:54.327
> 
> 标签：php, regex, codeigniter

我在这里有这个 regex_match

```
regex_match[/^{0,100}+$/] 
```

我试图验证我的字符串的长度，但我收到了这个错误

```
A PHP Error was encountered
Severity: Warning

Message: preg_match(): Compilation failed: nothing to repeat at offset 7

Filename: libraries/Form_validation.php

Line Number: 911 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:24:08.967

虽然我承认不清楚你到底想要完成什么，为什么不直接使用 strlen 呢？

strlen($string) >= 100 应该给出相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:23:58.513

尝试这个：

```
regex_match[/^.{0,100}$/] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:24:30.037

{0,100} 位需要重复某些内容，例如，`[a-z]{0,100}`但您的示例没有任何内容。您可能希望将 a`.`用于“任何字符”

# asp.net - 如何使用 pac 文件到 HttpWebRequest

> ID：13347358
> 
> 赞同：0
> 
> 时间：2012-11-12T16:21:14.957
> 
> 标签：asp.net

我想使用代理，`HttpWebRequest`但我的代理地址是 http://cdproxy.anadolu.edu.tr/proxy.pac，我不想将代理地址更改为 http://cdproxy.anadolu.edu.tr。

如何将此地址用于我的代理？

```
Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
HttpWebRequest Request = (HttpWebRequest)HttpWebRequest.Create(Url);
CookieContainer cookieJar = new CookieContainer();
Request.AllowAutoRedirect = true;
WebProxy myProxy = new WebProxy();
myProxy.Address = new Uri("http://cdproxy.anadolu.edu.tr/proxy.pac");
myProxy.Credentials = new NetworkCredential("user", "password");
Request.Proxy = myProxy;
HttpWebResponse Response = (HttpWebResponse)Request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:33:20.217

查看 CodeProject 上的这篇文章 - [http://www.codeproject.com/Articles/12168/Using-PAC-files-proxy](http://www.codeproject.com/Articles/12168/Using-PAC-files-proxy)

基本上使用与 WinHTTP 的互操作，使用给定 URL 的 PAC 解析代理，然后将信息返回给您。

# linux - 我怎么做：在一堆文件中找到一个字符串，如果找到，然后将文件复制过来

> ID：13347359
> 
> 赞同：0
> 
> 时间：2012-11-12T16:21:17.837
> 
> 标签：linux, file, find

我必须恢复邮件存档；数以千计的 .eml 文件。

我想运行一个“查找”命令，它将：

1.  查找特定字符串
2.  如果找到，请将文件复制到单独的文件夹中。

任何快速帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:27:28.187

我建议使用递归`grep`以及[`xargs`](http://linux.die.net/man/1/xargs)：

```
grep "the string I want to find" -r --include=\*.eml -l -Z ROOTDIR | xargs -0 cp -t TARGETDIR 
```

这将在目录`.eml`下的所有文件中搜索`ROOTDIR`所需的字符串并将它们移动到目录`TARGETDIR`中。`-Z`in`grep`和`-0`in`xargs`确保即使是带有古怪字符的文件名也能正常工作。

**编辑：**更改`mv`为`cp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:38:18.190

我喜欢亚当的回答，但如果你想使用`find`，你可以做类似的事情

```
find DIR -name '*.eml' -exec sh process.sh {} \; 
```

哪里`process.sh`看起来像

```
SEARCH='Doe'
DEST='..'
s=$(grep "$SEARCH" "$1")
if [ "$s" != '' ] ; then
    cp "$1" "$DEST"
fi 
```

# android - 为什么我必须使用 HoloEverywhere 扩展 S***Activity？

> ID：13347360
> 
> 赞同：2
> 
> 时间：2012-11-12T16:21:19.550
> 
> 标签：android, android-holo-everywhere

HoloEverywhere 似乎可以在不扩展 Sherlock 类的情况下工作。为什么我必须更改导入？我刚刚添加：`android:theme="@style/Holo.Theme.Sherlock"` 在清单标签中，主题似乎可以在模拟器（Android 2.2）上运行。

说明说：

> 从 com.WazaBe.HoloEverywhere.sherlock.S***Activity 扩展活动

**我的问题**

1.  单独应用 Holo 主题是必须的还是替代方法？

2.  从 com.WazaBe.HoloEverywhere.sherlock.S***Activity 扩展活动是否也会将 ActionbarSherlock 添加到活动中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:59.820

如果你想要一个完整的 Holo 主题端口来预蜂窝设备，你必须扩展这些类。如果不是这样，一些简单的控件类似`EditText`或类似的控件将显示为全息主题，但其他更复杂的控件如`Dialog`s 将不会全息样式。

# ruby-on-rails - 如何使用 rspec 更改属性值

> ID：13347361
> 
> 赞同：1
> 
> 时间：2012-11-12T16:21:24.247
> 
> 标签：ruby-on-rails, ruby, rspec

我是 rspec 的新手，我遇到了一些问题。有人可以帮助我吗？

我有一个负责停用用户的控制器操作。我试图用 rspec 测试来覆盖它，但结果不是我正在等待的。

控制器：

```
def deactivate
  @user = User.find(params[:id])
  if !@user.nil?
    @user.update_attribute(:active, false)
    redirect_to users_url
  end
end 
```

控制器规格

```
describe "PUT #deactivate" do
  describe "with valid parameters" do
    before (:each) do
      @user = mock_model(User, :id => 100, :login => "login", :password => "password123",
                               :email => "email@gmail.com", :active => true)
      User.should_receive(:find).with("100").and_return(@user)
    end

    it "should deactivate an user" do
      @user.stub!(:update_attribute).with(:active, false).and_return(true)
      put :deactivate, :id => "100"
      @user.active.should eq false
    end
  end
end 
```

测试结果：

```
1) UsersController PUT #deactivate with valid parameters should deactivate an user
   Failure/Error: @user.active.should eq false

   expected: false
        got: true

   (compared using ==) 
```

所以，我不明白为什么 active 属性在应该为假时仍然为真。有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:09:35.183

您似乎不必要地存根 update_attribute 方法。尝试删除该行，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T16:16:52.297

您的期望是“错误的”。

让我们看看`it "should deactivate an user"`执行您的规范时会发生什么：

1.  `@user.stub!(:update_attribute).with(:active, false).and_return(true)`修改现有的模拟模型，所以它有一个`update_attribute`which，当用参数调用时`:active`，`false`
    1.  将返回`true`
    2.  将跟踪此调用已发生（这就是模拟所做的）
    3.  （并且，与真实`User`物体不同，**不会做任何其他事情**）
2.  `put :deactivate, :id => "100"``deactivate`在你的控制器中调用真实的
3.  您的控制器调用`User.find`. 但是您已经模拟了该类方法，它将返回模拟对象`@user`，而不是使用 that 搜索实际用户`id`。
4.  您的控制器调用`@user.update_attribute`. 但是由于上面的第 3 步，`@user`这里也是模拟对象。它的`update_attributes`方法是第 1 步中的方法。正如我们在上面看到的，它将返回 true，跟踪此调用是否发生，并且**什么也不做**。这意味着它**不会**改变`@user`' 的`active`属性，所以保持`true`。

更改`active`何时`update_attribute`调用是实际`User`类的对象的功能，但在运行规范时没有这样的对象发挥作用。由于此功能继承自`ActiveRecord`，因此您不必对其进行测试。相反，只需测试`update_attribute`模拟对象是否已接收到：

```
 it "should deactivate an user" do
      @user.stub!(:update_attribute).with(:active, false).and_return(true)
      put :deactivate, :id => "100"
      @user.should have_received(:update_attribute).with(:active, false)
    end 
```

（我在这里猜测旧`should`语法，基于[它是如何使用新`expect`语法](http://www.relishapp.com/rspec/rspec-mocks/v/3-1/docs/verifying-doubles/using-an-object-double#doubling-a-constant-object)完成的。）

## 嘲笑还是不嘲笑？

如果您*确实*想测试控制器*与实际`User`实现*的组合功能，请不要模拟`User`或其对象。而是使用[request spec](http://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)从浏览器的角度进行测试。（即使您希望仅针对控制器（模拟模型）和仅针对模型（可能不需要双打，可能对于其他模型除外）进行隔离测试，*另外*这样做可能是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T16:47:03.600

这个找了好久， [`update_column`](http://www.davidverhasselt.com/set-attributes-in-activerecord/) 不管你用`let`还是用都可以`build`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T18:40:26.720

你可以试试这个：

```
describe "should deactivate an user" do
  before do
    @user.stub!(:update_attribute).with(:active, false).and_return(true)
    put :deactivate, :id => "100"
  end
  it { @user.active.should eq false }
end 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-12T17:09:49.817

当您嘲笑对 的调用时`update_attribute`，模型将如何改变？

如果您是初学者：不要使用存根和模拟！

首先获得测试方面的一般知识，然后将您的知识扩展到模拟和存根。

# php - 无法使用 jQuery 更新 href

> ID：13347363
> 
> 赞同：-1
> 
> 时间：2012-11-12T16:21:33.263
> 
> 标签：php, jquery

我已经成功更新了 href 值，但是当点击原始链接时，它是活动的。但是查看源代码，在更新 href 后，值会更新，但单击时不会更新。

我使用的临时数据是测试的，所以我可以看看它是否有效地改变了。

这是我使用的代码：

```
<a id="productIMGLarge6128" href="http://www.mysite.com/originalLarge.jpg" title="MyLargeImage" class="floatbox">
<span class="zoomIcon""><img src="styling/zoom.png" alt="zoom" /></span>
<img id="productIMGSmall6128" src="http://www.mysite.com/originalSmall.jpg" alt="MySmallImage" />
</a> 
```

剧本

```
<script>
    $(document).ready(function() {
        $("#button").click(function(){
            $("#button").spin("small", "#FFF");

            $.ajax({
                type: "POST",
                url: "_/process/roofbox.php",
                data: { color: "B", product: "6128"  },
                dataType: "json",
                success: function(data){
                    $("#productIMGSmall6128").attr("src",data.productIMGSmall);
                    $("#productIMGLarge6128").attr("href","test");
                    $("#price6128").html(data.price);
                    console.log(data);
                    $("#button").spin(false);
                }
            });
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:03:09.597

显然 Floatbox 库存了所有启用的锚点，因此您需要激活 fb.ajax() 函数来更新任何新内容。

所以这是我的问题，感谢 floatbox 管理员解决了我的问题。

[http://floatboxjs.com/instructions#dynamic](http://floatboxjs.com/instructions#dynamic)

# sql-server-2008 - 表分区期间磁盘空间不足

> ID：13347367
> 
> 赞同：1
> 
> 时间：2012-11-12T16:21:52.090
> 
> 标签：sql-server-2008, partitioning

我正在尝试对一个大表（**160Gb**）进行分区。它包含**过去 70 天内**`IIS logs`生成的数据。分区方案和函数将表拆分为相关日期。

 **每个文件组中有一个文件，每个文件中有 1 天的数据。

表上当前没有聚集索引，在创建日志和从数据中提取的 ASP 会话 ID 前后有 2 个非聚集索引。

我遇到的问题是，当我尝试将此表分配为分区时，我的磁盘空间不足。

有没有办法批处理这个过程？

```
USE [Diagnostic_MB]
GO
BEGIN TRANSACTION
CREATE CLUSTERED INDEX [ClusteredIndex_on_Scheme70Day_634883295513235207] ON [dbo].[IISLog] 
(
    [SentUTCDateTime]
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [Scheme70Day]([SentUTCDateTime])

DROP INDEX [ClusteredIndex_on_Scheme70Day_634883295513235207] ON [dbo].[IISLog] WITH ( ONLINE = OFF )

CREATE NONCLUSTERED INDEX [ASPSession] ON [dbo].[IISLog] 
(
    [ASPSessionID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = ON, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [Scheme70Day]([SentUTCDateTime])
CREATE NONCLUSTERED INDEX [IX_Time] ON [dbo].[IISLog] 
(
    [SentUTCDateTime] ASC
)
INCLUDE ( [csHost],
[scStatus],
[timeTaken]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = ON, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [Scheme70Day]([SentUTCDateTime])

COMMIT TRANSACTION 
```

这是最终占用我所有磁盘空间的代码。理想情况下，我希望能够将数据移出主文件组，而不是创建副本。这不是一个需要一直运行的数据库，所以`offline solutions are also welcome...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T22:38:39.983

斯托莱格已经有了一个好主意。这是另一个：在重建前删除非聚集索引（因为 CI 重建也可能重建它们，这取决于您的情况）并对所有操作使用单独的事务（正在运行的事务可防止释放的分配单元被释放并释放空间）。

还有一个更高级的技巧：在分区键和 CI 键上构建 NCI。这样，SQL Server 可能会使用该 NCI 来构建分区 CI。然后它不需要再次对数据集进行排序，因为 NCI 提供了排序顺序。我实际上已经在野外看到过这种计划形状。如果 SQL Server 可以将 NCI 与键查找结合使用，则它并不总是对整个表进行排序。有时，根据其启发式查找计划更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T14:33:31.237

简而言之：分区时 SQL Server 会重建聚集索引。要重建聚集索引，它会对所有记录进行排序。排序发生在 tempdb 中。服务器需要表格大小的可用空间，或者可能是 x2 大小的表格，具体取决于模式（抱歉，现在不记得了）。

快速修复：将一些数据（=1 目标分区）复制到临时表中，在 PF 上的该表上创建索引，将该位切换到目标表。一次移动 2-3 GB 应该不是问题。**

# orbeon - ORBEON 表单 - 如何使用 Profiler

> ID：13347368
> 
> 赞同：2
> 
> 时间：2012-11-12T16:21:52.297
> 
> 标签：orbeon

任何人都可以分享一些详细的步骤`how to configure the profiler`，以及如何查看结果。似乎使用`/profiler/xpl/`或`/tools-profiler/xpl/`给出了相同的错误：

```
Cannot load "/apps/profiler/page-flow.xml" with webapp loader 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:35:13.620

自 Orbeon Forms 3.9 以来，XPL 分析器已被删除。如果您有兴趣恢复它，您仍然可以在“阁楼”中找到它的[源代码](https://github.com/orbeon/orbeon-forms/tree/master/src/resources/apps/xforms-attic/tools-profiler)，但它目前不是 Orbeon Forms 的一部分，并且没有计划将其从阁楼中取出。

# ios - 我是否将背景颜色设置在正确的位置？

> ID：13347369
> 
> 赞同：0
> 
> 时间：2012-11-12T16:21:54.377
> 
> 标签：ios, uiview, viewdidload

希望有人能对这个问题有所了解...

我正在开发一个具有多个 UIViewControllers 的应用程序，每个 UIViewControllers 中都有 UITableViews 和 UIViews。我希望以编程方式更改其中一个 UIView 的背景颜色。很容易做到。我使用全局常量文件中的颜色的 RGB 值，以便每个屏幕都使用相同的颜色，并且可以轻松地为每个屏幕更改颜色。问题是我目前有代码可以在 viewDidLoad 方法中更改视图的背景颜色，并且我实际看到视图更改了颜色。所以它会加载界面生成器中设置的任何内容，然后切换到我设置的内容。

显然我只是希望它看起来已经设置为我尝试设置的颜色。

有什么想法吗？

**更多信息**

UIViewController 作为子视图加载到另一个 UIViewController 中。这个父 UIViewController 管理一些其他的 UIViewController 并允许用户在它们之间切换。这是子 UIViewController 的加载方式：

```
SomeViewController *vc = [[SomeViewController alloc] initWithNibName:@"SomeViewController" bundle:nil];
self.someViewControllerOutlet = vc;
osvc = nil, [osvc release];
[self.view insertSubview:self.someViewControllerOutlet.view atIndex:0]; 
```

希望这可以澄清事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:28:05.980

尝试使用

```
 -(void)awakeFromXib
       {
          // do your code here
       } 
```

# android - Android GC 内部结构

> ID：13347372
> 
> 赞同：2
> 
> 时间：2012-11-12T16:22:05.340
> 
> 标签：android, garbage-collection

只是想让它100％清楚。

Android OS 使用 2 种 GC 算法 - Mark&Sweep 和 Concurrent Mark&Sweep。

在 2.3 之前没有并发算法——只有串行算法。

Serial Mark&Sweep - 是一种压缩算法，只适用于年轻一代。

CMS 适用于两代（Yong 和 Old），它不压缩，只使用空闲列表。此外，Android 中没有 PermGen 空间。一般来说，CMS 与 Old generation 一起工作，因为 Young 已经被串行算法清除。

我对吗 ？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-05T06:18:17.103

在**Android 5.0**之前，没有**compacting GC**，Dalvik VM只实现了**Mark&Sweep** GC（并且可以**并发**，所以你的说法不准确，CMS也是Mark&Sweep GC）和**Copying** GC，根据不同情况分别使用（抱歉，我不太了解何时使用哪种算法）。

Android 5.0 ART 引入了 3种**compacting GC**：Semi-Space（SS）GC、Generational Semi-Space（GSS）GC 和 Mark&Compact GC(MC)。由于 compacting GC 的效率不如 Mark&Sweep，但可以处理后者的内存碎片不能，compacting GC 用作**后台 GC**，而 Mark&Sweep 用作**前台 GC**。

# mysql - 将两个查询拼接在一起的最佳方法

> ID：13347373
> 
> 赞同：0
> 
> 时间：2012-11-12T16:22:08.277
> 
> 标签：mysql

将此查询结合在一起的最佳方法是什么：

```
SELECT apvr.LIMIT, apvr.APPROVER_ID, usr.IS_ACTIVE, usr.USER_FULL_NAME         
FROM APPROVERS apvr, USER usr
WHERE apvr.APPROVER_ID = usr.ID 
```

和这个：

```
SELECT usr.USER_FULL_NAME, COUNT(*) as numOfApprovals, MAX(APPROVAL_DATE) as lastApprovalDate    
FROM IM_APPROVAL_DETAIL appd, USER usr
WHERE usr.ID = appd.APPROVER_ID
GROUP By usr.USER_FULL_NAME 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:49:07.523

如果没有真实数据，可能会有点困难，但我的建议如下：

```
SELECT apvr.LIMIT, apvr.APPROVER_ID, usr.IS_ACTIVE, usr.USER_FULL_NAME, count(*) as numOfApprovals, max(appd.approval_date) as lastApprovalDate
FROM APPROVERS apvr 
JOIN USER usr ON apvr.APPROVER_ID = usr.ID
JOIN IM_APPROVAL_DETAIL appd ON usr.ID = appd.APPROVER_ID
GROUP By apvr.Approver_ID; 
```

因为我不知道这些表中的重复出现，所以 group by 子句可能存在一些问题。所以替代方法是使用子选择：

```
SELECT apvr.LIMIT, apvr.APPROVER_ID, usr.IS_ACTIVE, usr.USER_FULL_NAME, appd.numOfApprovals, appd.lastApprovalDate 
FROM APPROVERS apvr 
JOIN USER usr ON apvr.APPROVER_ID = usr.ID
JOIN IM_APPROVAL_DETAIL appd
JOIN (
  SELECT approver_id id, count(*) numOfApprovals, max(approval_date) lastApprovalDate 
  FROM im_approval_detail 
  GROUP by id) appd 
ON appd.id = usr.ID 
```

# javascript - 从 JSON 获取的数据未更新

> ID：13347377
> 
> 赞同：0
> 
> 时间：2012-11-12T16:22:28.383
> 
> 标签：javascript, jquery, json

下面是脚本：

```
$(document).ready(function () {
    $.getJSON('table.json', function (data) {
        $('#mytable').empty();
        var html = '';
        html += '<tr class="tableheader"><th>Name</th><th>Code</th><th>Value</th><th>Bid</th><th>Offer</th></tr>';
        for (var i = 0, size = data.length; i < size; i++) {
            html += '<tr class="tablecontent"><td>' + data[i].name + '</td><td>' + data[i].code + '</td><td>' + data[i].value + '</td><td>' + data[i].bid + '</td><td>' + data[i].offer + '</td></tr>';
        }
        $('#mytable').append(html);
        tablerows('mytable');
        setTimeout(poll, 5000);
    });
});
var poll = function () {
    alert("poll");
    $.getJSON('dummy.json', function (data) {
        setTimeout(poll, 5000);
    });
} 
```

我想更新我的数据。该`poll`函数每 5 秒调用一次，我通过`alert`. 但是数据没有得到更新。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:46.777

getJSON 是一个 GET 请求，因此它会被缓存。在服务器上设置正确的无缓存标头。

还要看看你的代码，你从不处理数据

```
var poll = function () {
    alert("poll");
    $.getJSON('dummy.json', function (data) {
        setTimeout(poll, 5000);  //<--where is the processing you do nothing with the response???
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:31:28.917

```
$(document).ready(function() {
       // make the initial JSON request
    $.getJSON('table.json', init)
});

function poll() {
       // make the subsequent JSON requests
    $.getJSON('dummy.json', update);
}

function init(data) {
    $('#mytable').empty();
    var html = '';
    html += '<tr class="tableheader"><th>Name</th><th>Code</th><th>Value</th><th>Bid</th><th>Offer</th></tr>';
    for (var i = 0, size = data.length; i < size; i++) {
        html += '<tr class="tablecontent"><td>' + data[i].name + '</td><td>' + data[i].code + '</td><td>' + data[i].value + '</td><td>' + data[i].bid + '</td><td>' + data[i].offer + '</td></tr>';
    }
    $('#mytable').append(html);
    tablerows('mytable');
    setTimeout(poll, 5000);
}

function update(data) {
    var rows = $("#mytable tr.tablecontent").toArray();
    for (var i = 0, size = data.length; i < size; i++) {
        if (rows[i])
            rows[i].cells[3].firstChild.data = data[i].bid;
    }
    setTimeout(poll, 5000);
} 
```

* * *

这是`update`带有更多 jQuery 的函数：

```
function update(data) {
    $("#mytable tr.tablecontent > td:nth-child(4)")
         .slice(0, data.length)
         .text(function(i) {
             return data[i].bid;
          });
    setTimeout(poll, 5000);
} 
```

# wpf - Ironpython：如何查看 WPF 应用程序何时失败？

> ID：13347378
> 
> 赞同：0
> 
> 时间：2012-11-12T16:22:43.463
> 
> 标签：wpf, xaml, ironpython, sharpdevelop

我正在使用`WPF`/`XAML`和`Ironpython`and做一个带有 GUI 的应用程序`SharpDevelop`，直到现在它工作正常，当我在开发环境中时，我可以在控制台中看到错误并知道出了什么问题。

但是当我在其他系统上为我们构建和部署应用程序或在开发环境之外运行它时，当出现一些错误或崩溃时不再有控制台，它会默默地失败，我不知道出了什么问题。

如何发出警报或记录以查看失败的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:27:00.750

您可以输入一些代码来捕获错误并将其记录到文件中。

可能更简单的方法是将您的应用程序编译为控制台应用程序。这可以通过项目选项 - 应用程序 - 输出类型来完成。然后，当您运行 WPF 应用程序时，您将获得一个控制台窗口，并且在启动时发生的任何异常都将记录到该窗口中。

# c - 使用 feof() 时处理尾随 \n

> ID：13347384
> 
> 赞同：0
> 
> 时间：2012-11-12T16:22:54.913
> 
> 标签：c, loops, file-io

我写了一个小程序，它接受一个文件的输入，例如：

```
13,22,13,14,31,22, 3, 1,12,10
11, 4,23, 7, 5, 1, 9,33,11,10
40,19,17,23, 2,43,35,21, 4,34
30,25,16,12,11, 9,87,45, 3, 1
1,2,3,4,5,6,7,8,9,10 
```

并输出每行小于 50 的最大数字总和。

但是，如果输入的文件有一个尾随换行符，则循环运行一次太多次，因此将另一行添加到带有随机数据的数组中。所以我正在寻找一种更好的方法来进行这种比较以避免这个问题。我还假设目前所有行都有 10 个整数，因为我想不出更好的方法来进行行尾循环比较。

```
#include <stdio.h>
#include <stdlib.h>

void readLineData(int lineNo, int val[][10], FILE *fp);
int findSum(int lineNo, int val[][10], FILE *fp);

int main(int argc, char *argv[]) {
  FILE *fp;
  int val[5][10];

  // Open file.
  if ((fp = fopen(argv[1], "r")) == NULL)
    {
    perror("Cannot open file ");
    exit(EXIT_FAILURE);
    }

  for (int i = 0; !feof(fp); i++) // runs too many times if file ends with '\n'
    {
      readLineData(i, val, fp);
      printf("%d\n", findSum(i, val, fp));
    }

 fclose(fp);
 return EXIT_SUCCESS;
}

void readLineData(int lineNo, int val[][10], FILE *fp) {
  char c;  
  for (int i = 0; i < 10; i++) // assuming line contains 10 integers
    {
      fscanf(fp, "%d,", &val[lineNo][i]);
    }
}

int findSum(int lineNo, int val[][10], FILE *fp) {
  int highVal = 0;
  int value1 = 0;
  int value2 = 0;

  for(int i = 0; i < 10; i++) //each letter
    {
      for(int j = 0; j < 10; j++)// every other letter
    {
      if((val[lineNo][i] + val[lineNo][j]) > highVal && i != j && (val[lineNo][i] + val[lineNo][j]) <= 50)
        {
          highVal = val[lineNo][i] + val[lineNo][j];
          value1 = val[lineNo][i];
          value2 = val[lineNo][j];
        }
    }
    }
  printf("Line %d: largest pair is %d and %d, with a total of: ", lineNo+1, value1, value2);
  return highVal;
} 
```

非常欢迎有关这些循环比较和一般符号提示的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:28:59.683

发布的代码不区分具有五个整数的两行和（预期的）具有 10 个整数的一行。建议一次读取一行，在读取的行上使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)再使用[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf)，确保所有读取的整数都属于同一行。

检查输入操作的返回值。例如，`sscanf()`(and `fscanf()`) 返回所做的分配数。仅处理具有预期 10 个整数的行，这将检测包括尾随空行在内的无效行。

例如：

```
/* Returns 1 on success and 0 on failure. */
int readLineData(int lineNo, int val[][10], FILE *fp)
{
    char line[1024]; /* Arbitrarily large. */
    if (fgets(line, sizeof(line), fp))
    {
        /* %n records position where processing ended. */
        int pos;
        const int result = sscanf(line,
                                  "%d,%d,%d,%d,%d,%d,%d,%d,%d,%d%n",
                                  &val[lineNo][0],
                                  &val[lineNo][1],
                                  &val[lineNo][2],
                                  &val[lineNo][3],
                                  &val[lineNo][4],
                                  &val[lineNo][5],
                                  &val[lineNo][6],
                                  &val[lineNo][7],
                                  &val[lineNo][8],
                                  &val[lineNo][9],
                                  &pos);

        /* 10 integers and full line processed,
           except if new-line character present. */
        return 10 == result &&
               (pos == strlen(line) ||
                (pos + 1 == strlen(line) && '\n' == line[pos]));
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:28:59.840

您可以简单地自己使用换行符：

```
for (int i = 0; !feof(fp); i++) // runs too many times if file ends with '\n'
{
  readLineData(i, val, fp);
  printf("%d\n", findSum(i, val, fp));
  fscanf(fp, "%*c"); // read a character without storing it in a variable
} 
```

请注意，无疑有更好的方法，即一次读取整行并简单地检查其内容。但这是适合您已有的最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:29:57.533

您可以检查`fscanf`您的功能是否失败`readLineData`：

```
int readLineData(int lineNo, int val[][10], FILE *fp) {
  for (int i = 0; i < 10; i++) {// assuming line contains 10 integers
     if (fscanf(fp, "%d,", &val[lineNo][i]) != 1) {
         return 1;
     }
  }
  return 0;
} 
```

# excel - 在二维数组中查找值并在相邻单元格中返回值

> ID：13347387
> 
> 赞同：0
> 
> 时间：2012-11-12T16:23:05.133
> 
> 标签：excel, excel-formula, excel-2010

```
**Sheet 1**

ColumnA    B    C      D        E      F       G      H
------------------------------------------------------------
EURUSD  1.2765  1  ACCOUNT624   2  account125  1  account834 
EURCAD  1.01    2  Account49    3  account45   2  account67  
EURGBP  0.78    2  Account777   1  account45   2  account678 

**Sheet 2**
ColumnA    B         C             D 
---------------------------------------
EURUSD 1.2765     Account 624      ?
EURUSD 1.2765     Account 125
EURUSD 1.2765     Account 834
EURCAD 1.01       Account49
EURCAD 1.01       Account45 
```

在表 1 上方，每行显示货币交易以及每个账户的数量。在表 2 中，每行仅显示 1 个账户。我想用表 1 中的数量填充表 2 中的 D 列。

把它分成几个步骤，我想：

1.  在 sheet1 中查找 Sheet2!B1 中的价格
2.  在 sheet1 的同一行中，找到与 Sheet2!C1 包含相同帐户的单元格
3.  返回具有匹配帐户的单元格左侧的单元格中的值

我以前使用过索引/匹配，但我无法让它适用于二维数组。任何人都可以帮助一个公式？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:42:45.597

这并不漂亮，但是使用您的要求 - 根据 B 列中的价格找到匹配项（我会说您更安全的选择是使用货币转换“EURUSD”，例如，因为如果 2 种货币具有相同的 ocnversion率？？），将此公式粘贴到第二张纸上的单元格 D1 中：

```
=OFFSET(Sheet1!$B$1,MATCH(B1,Sheet1!$B$1:$B$3,0)-1,MATCH(C1,OFFSET(Sheet1!$B$1,MATCH(B1,Sheet1!$B$1:$B$3,0)-1,0,1,10),0)) 
```

然后，您可以根据需要将其向下拖动/更改范围。

（PS - 我还假设您在 sheet2 上犯了一个错误，并且在两张表中输入的帐号将完全相同）

# symfony - 执行一个函数来启动应用程序

> ID：13347388
> 
> 赞同：0
> 
> 时间：2012-11-12T16:23:08.010
> 
> 标签：symfony

我有一个想法表，其中有一个日期字段，我想检查想法是否已过期。

如果想法的日期小于今天，则状态正常，否则想法状态为过期。

我必须在哪里编写这个函数，如果我必须在启动应用程序时检查所有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:27:28.627

对我来说听起来像是一项 cron 工作。创建一个简单的脚本，根据日期设置您的想法状态，并在每晚运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:27:25.510

您可以为您的班级提供一个`isExpired()`方法：

```
public function isExpired()
{

  $today = new \DateTime;

  return $this -> date < $today;

} 
```

# c# - 用于处理关系/联结表插入的 Web 服务器控件

> ID：13347390
> 
> 赞同：2
> 
> 时间：2012-11-12T16:23:16.007
> 
> 标签：c#, asp.net, many-to-many, insert-update

我在使用 asp.net c# 插入/编辑表单时遇到问题。

假设您有一张员工表。现在每个员工都可以分配一个或多个类别。每个类别都有子类别，并且可以将用户分配到每个类别的一个或多个子类别。

表结构：

```
EmployeeTable
id
Fname
Lname
City

CategoryTable
id
CategoryName

SubCategoryTable
id
SubCategoryName

JuntionTable
EmployeeTable_id
CategoryTable_id
SubCategoryTable_id 
```

插入/编辑网络表单是我苦苦挣扎的地方。EmployeeTable 日期将是文本框，并且由于一个 Employee 可以在多个 Category 中，并且在该 Category 中每个可以有多个 SubCategories，您如何设置您的服务器控件来处理这个问题？树视图控件可以用父/子/节点处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:08:41.633

如果您试图坚持使用内置控件来执行插入操作，那么您将需要在 SQL 语句中执行大部分逻辑以进行插入。

您可以在任何 TreeView、FormView 或大多数其他类似容器中执行此操作。您需要将每个控件连接到它应该发送到的参数，并且可能编写一些逻辑来根据其他选定的值填充嵌套控件。根据您构建数据库的方式，您可能还需要使用嵌套视图，每个视图都有自己的插入逻辑。

如果每个表都已经创建了自己的 SQL 存储过程，那么我可能会使用嵌套视图控件。

# php - 未能创建 Couchbase 的 IO 实例

> ID：13347403
> 
> 赞同：1
> 
> 时间：2012-11-12T16:23:49.123
> 
> 标签：php, couchbase

我只是将 Couchbase 2.0beta 更改为使用 Views。所以，我按照[官方手册](http://www.couchbase.com/develop/php/next)构建 couchbase php extsion。首先，安装纯 RHEL 6.2。然后，安装 couchbase-server-2.0.0-1723 和 libcouchbase 中的所有依赖[包](http://www.couchbase.com/develop/php/next)：

```
libcouchbase2-dummy-2.0.0beta2-1.x86_64
couchbase-server-2.0.0-1723.x86_64
libcouchbase2-2.0.0beta2-1.x86_64
libcouchbase-devel-2.0.0beta2-1.x86_64
libev-4.03-3.el6.x86_64
libevent-1.4.13-1.el6.x86_64 
```

解压php-ext-couchbase-1.1.0-dp5-centos62-x86_64.tar.gz，复制couchbase.so到/usr/lib64/php/modules/，编辑/etc/php.d/json.ini：

```
extension=json.so
extension=couchbase.so 
```

最后，重新启动 HTTP Server。然后，通过以下方式检查 couchbase 模块是否正确：

```
php -m|grep couchbase 
```

phpinfo() 可以输出 couchbase 版本为 1.1.0-dp5。一切看起来都很好，但我尝试运行 php 代码：

```
<?php
$cb = new Couchbase("127.0.0.1:8091",'Administrator','redflag','default');
$cb->set('a',1); 
```

这是错的：

```
$ php getview.php
PHP Warning:  Couchbase::__construct(): failed to create IO instance in /var/www/html/getview.php on line 2
PHP Warning:  Couchbase::set(): unintilized couchbase in /var/www/html/getview.php on line 3 
```

为了检查 couchbase 设置是否正确，我以管理员身份打开 Couchbase GUI 作为用户名，redflag 作为密码。然后，创建新文档，使用 REST API 获取项目或视图。这些都可以，没问题，除了 php 代码。

没有其他出路，我从[https://github.com/couchbase/php-ext-couchbase](https://github.com/couchbase/php-ext-couchbase)获取。构建新的 php-couchbase extsion，然后尝试 agin。但问题是一样的。

我发现有人在[这里](http://www.couchbase.com/forums/thread/php-ext-couchbase-1-1-0-dp5-failed-create-io-instance-centos-5-4)和[这个](http://www.couchbase.com/issues/browse/PCBC-138)有同样的错误。不幸的是没有解决方案。如何使用 php-ext-couchbase 1.1dp5 模块？THX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:42:41.143

使用 yum 安装**libcouchbase2-libevent**包可以解决这个问题。顺便说一句。当你运行 yum install **libcouchbase-devel**时，它不包括 libcouchbase2-libevent。如果你错过了，你也可以毫无错误地制作和安装 php-ext-couchbase 模块。但是你不能在 php 中连接 Couchbase ，如上所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:24:05.167

乍一看，它似乎正确加载了 couchbase 扩展。这里可能出错的是如何访问您的存储桶。

如果您没有进行任何更改，则“默认”存储桶没有与之关联的密码，通常存储桶的用户就是存储桶名称本身。因此，在“默认”存储桶的情况下，它看起来像这样：

```
$client = new Couchbase("127.0.0.1:8091", "default", "", ""); 
```

如果您定义了密码：

```
$client = new Couchbase("127.0.0.1:8091", "bucketname", "", "password"); 
```

希望这会有所帮助，迈克尔

# angularjs - AngularJS 构造函数还是初始化？

> ID：13347404
> 
> 赞同：1
> 
> 时间：2012-11-12T16:23:56.087
> 
> 标签：angularjs

全部，

我们正在使用 AngularJS 开发我们的应用程序，并且一次又一次地遇到 Angular 运行或加载控制器两次的问题。当测试我们的控制器时，这变得有点侵入性，更具体地说，当使用 jasmine 的 SpyOn 使用 Testacular 时（因为它们在我们的代码运行之前被触发）。所以，我们的问题是，Angular 在实例化控制器时是否可以保证调用构造函数或 init 方法之类的东西，而不必在测试代码中破解变通办法？TIA。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T11:43:31.273

如果您在路由器中指定控制器，那么您的模板不需要通过 ng-controller 标签指定控制器。这样做会双重加载您的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:43:02.743

你的控制器不应该被加载两次，除非你做错了什么。你不应该破解任何变通办法。

您可能想提供一个具体示例来说明如何加载控制器（和/或与控制器关联的部分）。听起来您可能有一个路由问题，导致您的视图为每个请求加载两次。

假设这是一个与路由相关的问题，除非/直到您可以提供更多信息来帮助人们帮助您，否则您可能需要阅读本文档。特别提到提到“重定向”和“HTML 5”模式的部分：

[http://docs.angularjs.org/guide/dev_guide.services.$location](http://docs.angularjs.org/guide/dev_guide.services.%24location)

由于信息太少，我无法回答您的问题，但也许该链接可以帮助您自助。:)

# mysql - MySQL 避免在 select 中使用相同的 IF 语句？

> ID：13347417
> 
> 赞同：0
> 
> 时间：2012-11-12T16:24:31.027
> 
> 标签：mysql

这是我的代码

```
SELECT
IF(or_opp.has_something = 1, metric.a, NULL) as a,
IF(or_opp.has_something = 1, metric.b, NULL) as b,
IF(or_opp.has_something = 1, metric.c, NULL) as c,
IF(or_opp.has_something = 1, metric.d, NULL) as d, 
```

有没有办法写这个所以我只需要检查`or_opp.has_something`一次吗？

编辑：（出于性能原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:28:17.350

也许只是做

```
SELECT
or_opp.has_something as test,
metric.a as a,
metric.b as b,
metric.c as c,
metric.d as d, 
```

然后在您的脚本语言（我想是 PHP）中，在获取行时：

```
if ($row['test'] != 1)
{
  // consider that a, b, c, d are NULL
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:05:18.707

我是否错过了理解问题，或者您不能将其放在 WHERE 子句中并在您的 SELECT 中打印 a、b、c、d 吗？

也许发布整个查询。

# xaml - 在 Xaml 中绑定分组集合

> ID：13347422
> 
> 赞同：1
> 
> 时间：2012-11-12T16:25:01.787
> 
> 标签：xaml, collections, windows-runtime, eventtocommand

我搜索了一下，但我找到的信息不是我需要的。所以我决定问你们所有人——我确定这是一个新手问题，但我真的不明白。让我们开始吧：我有一个 DataSource，它是一个分组的可观察集合。目前我有 2 组不同数量的项目。这两个组和项目属于同一个公共基础：

```
public DataCommon(String uniqueId, String title, String subtitle, String imagePath, String description)
    {
        this._uniqueId = uniqueId;
        this._title = title;
        this._subtitle = subtitle;
        this._description = description;
        this._imagePath = imagePath;
    } 
```

这是模型的构造函数。在 ViewModel 我填充它。现在我想将带有命令的 ItemClick 绑定到我的 ViewModel。我确实喜欢这个（只是一小部分）：

```
<GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="116,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        >
        <WinRtBehaviors:Interaction.Behaviors>
            <Win8nl_Behavior:EventToCommandBehavior Event="ItemClick" Command="ItemClickCommand" CommandParameter="{Binding UniqueId}"/>
        </WinRtBehaviors:Interaction.Behaviors> 
```

但现在问题来了。在“Binding UniqueId”中，它说 DataContext 是我的 ViewModel，所以我无法将它连接到模型的属性。看着 Page.DataContext 我告诉 XAML 你使用我的 ViewModel 作为 DataContext。我想这是正确的。但是我怎样才能访问模型属性？我试过这样做（将我的模型定义为 DataModel）：

```
<WinRtBehaviors:Interaction.Behaviors>
            <Win8nl_Behavior:EventToCommandBehavior Event="ItemClick" Command="ItemClickCommand" CommandParameter="{Binding DataModel:SampleDataCommon.UniqueId}"/>
        </WinRtBehaviors:Interaction.Behaviors> 
```

但正如我事先猜测的那样，它没有用 - 作为参数我得到空值。

我会感谢任何帮助，因为正如我在帖子开头所说的那样：我真的不明白......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:05:55.817

您不能`EventToCommandBehavior`以这种方式使用 - 它的作者也在[评论](http://dotnetbyexample.blogspot.com/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html#c184556868448857969)中说明了这一点。

在这种情况下，我使用以下附加属性：

```
public static class ItemClickBehavior
{
    public static DependencyProperty ItemClickCommandProperty = DependencyProperty.RegisterAttached("ItemClickCommand",
                typeof(ICommand),
                typeof(ItemClickBehavior),
                new PropertyMetadata(null, OnItemClickCommandChanged));

    public static void SetItemClickCommand(DependencyObject target, ICommand value)
    {
        target.SetValue(ItemClickCommandProperty, value);
    }

    public static ICommand GetItemClickCommand(DependencyObject target) 
    {
        return (ICommand)target.GetValue(ItemClickCommandProperty);
    }

    private static void OnItemClickCommandChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        var element = target as ListViewBase;
        if (element != null)
        {
            // If we're putting in a new command and there wasn't one already
            // hook the event
            if ((e.NewValue != null) && (e.OldValue == null))
            {
                element.ItemClick += OnItemClick;
            }

            // If we're clearing the command and it wasn't already null
            // unhook the event
            else if ((e.NewValue == null) && (e.OldValue != null))
            {
                element.ItemClick -= OnItemClick;
            }
        }
    }

    static void OnItemClick(object sender, ItemClickEventArgs e)
    {
        GetItemClickCommand(sender as ListViewBase).Execute(e.ClickedItem);
    }
} 
```

这是您将命令绑定到它的方式：

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemGridView"
    AutomationProperties.Name="Grouped Items"
    Grid.RowSpan="2"
    Padding="116,137,40,46"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
    SelectionMode="None"
    IsSwipeEnabled="false"
    IsItemClickEnabled="True"
    itbmb:ItemClickBehavior.ItemClickCommand="{Binding ItemClickCommand}"
    > 
```

我想如果你真的想要的话，从附加的属性中创建一个行为并不难。

# sql - 在条件下将数据从一个表导入到另一个表

> ID：13347425
> 
> 赞同：0
> 
> 时间：2012-11-12T16:25:12.583
> 
> 标签：sql, sql-server

我需要一些帮助来解决这个问题：

我有以下**SQL Server**表：

**`Transitions`**

* * *

`ID` *int* ,
`VariableID` *int* ,
`To_VariableID` *int* ,
`To_ValueID` *int* ,
`To_CommentInput` *bit* ,
`To_SP` *varchar* (255)

* * *

**`Processes`**

* * *

`ID` *int* ,
`VariableID` *int* ,
`ValueID` *int* ,
`Manual_Value` *varchar* (255)

* * *

> 适用对象**`Transitions`**：只有一个领域
> 
> `To_VariableID`, `To_ValueID`, `To_CommentInput`,`To_SP`
> 
> 可以在每一行中一次设置。 在某些情况下，我
> 希望某些数据来自.**`Transitions`****`Processes`**

现在，如果`To_ValueID`已在 中设置了一行**`Transitions`**，则其值应转到表`ValueID`中的字段**`Processes`**。如果不是，那么填写的字段（不知道是哪一个，可能是`To_VariableID`, `To_CommentInput`, `To_SP`）应该放在该`Manual_Value`字段中。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:42:45.363

像这样的东西，虽然你的确切映射可能不同。

```
Insert Into Processes (Id, VariableID, ValueID, Manual_Value)
Select
  Id,
  VariableID,
  To_ValueID,
  Coalesce(To_VariableID, To_CommentInput, To_SP)
From
  Transistions 
```

# rounding - SSIS 数据转换数字强制舍入

> ID：13347428
> 
> 赞同：2
> 
> 时间：2012-11-12T16:25:20.287
> 
> 标签：rounding, ssis, data-conversion

**情况：**`SSIS`包含数字的列作为字符串导入。我们正在根据使用数据转换任务的预期数据类型将字符串转换为整数或十进制数。配置错误输出用于将错误和截断重定向到脚本任务。

**问题：** SSIS 数据转换转换对数值进行四舍五入以适应新的数据类型，并且不会引发转换或截断错误。数字不会发生行重定向。例如，当`DT_DECIMAL (10,2)`需要，但`12.123`转换了 的值时，该值将四舍五入到`12.12`没有错误或截断重定向。我使用数据查看器来验证数据转换任务是否导致舍入。来自非数字字符的错误确实会导致行重定向。

**期望的输出：**如果数据与所需的数据类型不匹配，我们希望抛出错误信号，例如`DT_DECIMAL (10,2)`.

有没有办法让数据转换任务没有数字，或者需要另一个任务来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:49:34.707

如果您打开数据转换转换编辑器，则会有一个按钮来配置错误输出。从那里，您可以将截断的行为设置为您想要的任何方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:00:10.227

您可能需要另一项任务，用于数据转换的脚本组件提供了最大的灵活性。您将能够在代码中自定义数据转换和错误输出。

# c++ - SDL_LoadBMP 只返回 NULL

> ID：13347429
> 
> 赞同：3
> 
> 时间：2012-11-12T16:25:25.803
> 
> 标签：c++, sdl, codeblocks

我一直在学习[本教程](http://lazyfoo.net/SDL_tutorials/lesson01/index2.php)，并且已经到了指导我们如何加载和使用位图的地步。这是当前代码：

```
#include "SDL/SDL.h"
#include <stdlib.h>

int main (int arg, char *argc[]) {
    SDL_Surface* screen = NULL;
    SDL_Surface* hello = NULL;

    SDL_Init(SDL_INIT_EVERYTHING);

    screen = SDL_SetVideoMode (256, 256, 32, SDL_SWSURFACE);
    hello = SDL_LoadBMP("hello world.png"); // Here
    if (hello == NULL) exit(0);

    SDL_BlitSurface(hello, NULL, screen, NULL);
    SDL_Flip(screen);

    SDL_Delay(2000);

    SDL_FreeSurface(hello);

    SDL_Quit();

    return 0;
} 
```

你好，但是，永远不会得到除 NULL 之外的任何值。我正在使用 Code::Blocks，即使我将 hello world.png 分散在项目的所有可能目录中（无论是在 bin、obj、Debug 中的任何一个、带有 .cbp 的目录中）还是指定整个路径到代码中的图像（如 SDL_LoadBMP("C:\Dir\hello world.png")) hello**将**获得 NULL。

我究竟做错了什么？

操作系统是 Windows

* * *

编辑：好吧，显然 SDL_LoadBMP 只能加载 .bmp 文件！我真傻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:03.690

编辑：我将 SDL_LoadBMP 与 IMG_Load 混合在一起，这是我的新答案：

您可以使用[SDL Image](http://www.libsdl.org/projects/SDL_image/)（包括 SDL_Image.h，链接 SDL_image.lib 并确保您的文件类型正确的 DLL 与您的二进制文件一起，如果您需要）来调用[IMG_Load](http://www.libsdl.org/projects/SDL_image/docs/SDL_image.html#SEC11)。IMG_Load 将负责解析您的文件类型并使用适当的加载来创建新的 SDL Surface。完成后记得释放你的表面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:48:08.447

是的，它只加载位图。您可以使用[SDL_Image](http://www.libsdl.org/projects/SDL_image/)加载其他类型，例如 png。

# haskell - 在 Haskell 中，在这个列表理解中使用 takeWhile 或使用“常规”不等式有什么区别？

> ID：13347430
> 
> 赞同：14
> 
> 时间：2012-11-12T16:25:29.900
> 
> 标签：haskell, functional-programming, lazy-evaluation

我正在尝试学习 Haskell（非常好），我正在做的许多不同的事情之一是尝试解决一些 Project Euler 问题，因为我将继续测试我的勇气。

在做一些基于斐波那契的问题时，我偶然发现并开始使用斐波那契序列的递归无限列表版本：

`fibs = 1 : 2 : zipWith (+) fibs (tail fibs)`

对于其中一个 PE 问题，我需要提取小于 4,000,000 的偶数斐波那契数的子序列。我决定用列表理解来做这件事，在我玩代码的过程中，我偶然发现了一些我不太理解的东西；我假设这是我对 Haskell 的惰性评估方案的薄弱掌握使事情变得复杂。

以下理解工作得很好：

`[x | x <- takeWhile (<= 4000000) fibs, even x]`

下一个理解永远旋转；所以我通过并将输出返回到标准输出，虽然它停在正确的位置，但它似乎只是继续评估递归定义的列表，而在达到上限值后没有完成；表示列表中的最后一项以逗号打印，但不存在其他列表项或右方括号：

`[x | x <- fibs, x <= 4000000, even x]`

那么，与无限列表配合得很好的各种函数究竟使用了什么秘诀呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T16:33:02.830

该函数`takeWhile`不断获取输入列表的元素，直到它到达不满足谓词的第一个元素，*然后*停止。只要至少有一个元素不满足谓词，`takeWhile`就会将无限列表转换为有限列表。

你的第一个表情说

> 继续获取这个无限列表中的元素，直到找到大于 4,000,000 的元素，然后停止。如果它是偶数，则在输出中包含每个元素。

第二个表达式说

> 继续获取这个无限列表中的元素。如果每个元素小于或等于 4,000,000 并且它是偶数，则在输出中包含每个元素。

当您观察到永远挂起的输出时，该函数正忙于生成更多斐波那契数并检查它们是否小于或等于 4,000,000。它们都不是，这就是为什么什么都不会打印到屏幕上的原因，但是该函数无法知道它不会在列表的下方遇到一个小数字，因此它必须继续检查。

# vb.net - .NET 框架，Windows XP

> ID：13347434
> 
> 赞同：7
> 
> 时间：2012-11-12T16:25:39.343
> 
> 标签：vb.net

我们使用 Visual Studio 2012 构建了一个应用程序，它可以在任何 Windows 7 或 Vista 机器（32 位或 64 位）上完美运行。但是，当我尝试在 Win XP 机器上运行该应用程序时，我得到了这个：

**

> 系统组件 Microsoft .NET Framework 4.5（x86 和 x64）的先决条件检查失败，并显示以下错误消息：
> 
> “此操作系统不支持安装 Microsoft .NET Framework 4.5。请联系您的应用程序供应商。”

**

当然，当我尝试在 Win XP 机器上安装 .NET 4.5 时，我发现它不受支持。

在这一点上，我只是想知道如何才能让这个应用程序在 Win XP 上运行。这是一个用 Visual Basic 编写的计算器应用程序。

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:29:26.130

Windows XP 不支持 .Net 框架 4.5。如果您没有使用任何 .Net 4.5 功能，您可以使用 .Net Framework 4（在项目属性中）重建您的应用程序。

![在此处输入图像描述](../Images/cbd0803c88e6f68af4b31ab3457997c7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:29:17.377

我一直讨厌这类答案，但快速的 google 搜索表明您无法在 Windows XP 上运行 .net 4.5。

如果你真的需要你的应用程序运行，你总是可以使用早期版本的框架

你可以这样做

右键单击您的项目并转到

*   特性
*   应用
*   目标框架

并将其更改为 elxe

# mysql - 在具有限制的表列中获取特定行值之后的记录

> ID：13347437
> 
> 赞同：0
> 
> 时间：2012-11-12T16:25:43.950
> 
> 标签：mysql, sql

我如何编写一个 sql 来告诉 mysql 从下面的表中从 5 限制 5 开始获取接下来的 5 条记录。

```
srt_id (this is not the auto increment column even though the value is incremented)
------
  1
  2
  3
  4
  5
  6
  7
  8 
  9
 10 
```

所以在这里，我想从 6 点开始，然后在 10 点结束。我什至可能想从 6 点或 7 点或 8 点开始。我不能使用偏移量 5 或类似的东西。我必须从那一行开始，然后取其余的。你能帮忙吗？

所以，我尝试了：

```
select * from table where srt_id = 5 limit 5; //Begin at 5 and the next 5 records 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:29:23.150

```
select * from table where srt_id >= 5 order by srt_id limit 5; 
```

# sql - 使用单个查询选择每列的最后一个值

> ID：13347439
> 
> 赞同：1
> 
> 时间：2012-11-12T16:25:58.930
> 
> 标签：sql, null

具有以下数据（空白表示 NULL）：

```
ID    ColA    ColB    ColC
1     15              20
2     11      4       
3             3 
```

如何在单个查询中获取每列的最后一个非 NULL 值？因此，给定数据的结果将是：

```
ColA    ColB    ColC
11      3       20 
```

我没有找到太多，似乎与我描述的功能相似的功能是`COALESCE`，但在我的情况下它没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:37:47.847

看起来您必须使用普通 SQL 为每列运行一个单独的查询。对于一个只有 3 列的小表，[@Guffa 的查询](https://stackoverflow.com/a/13347626/939860)应该没问题。

### 3个窗口函数

您可以使用三个窗口函数在一个查询中执行相同操作：不确定这是否比三个单独的子查询快：

```
SELECT first_value(cola) OVER (ORDER BY cola IS NULL, id DESC) AS cola
      ,first_value(colb) OVER (ORDER BY colb IS NULL, id DESC) AS colb
      ,first_value(colc) OVER (ORDER BY colc IS NULL, id DESC) AS colc
FROM   tbl
LIMIT  1; 
```

### `count()`作为窗口函数

`count()`您还可以利用不计算`NULL`值的事实。

```
WITH x AS (
   SELECT CASE WHEN count(cola) OVER w = 1 THEN cola ELSE NULL END AS cola
         ,CASE WHEN count(colb) OVER w = 1 THEN colb ELSE NULL END AS colb
         ,CASE WHEN count(colc) OVER w = 1 THEN colc ELSE NULL END AS colc
   FROM   tbl
   -- WHERE id > x -- safe to ignore a certain portion from a large table?
   WINDOW w AS (ORDER  BY id DESC)
   )
SELECT max(cola) AS cola, max(colb) AS colb, max(colc) AS colc
FROM   x 
```

对于更大的表和更多的列，[递归 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)或过程函数会**更快**：

### 递归 CTE

```
WITH RECURSIVE x AS (
   SELECT cola, colb, colc
         ,row_number() OVER (ORDER  BY id DESC) AS rn
   FROM   tbl
   )

   , y AS (
   SELECT rn, cola, colb, colc
   FROM   x
   WHERE  rn = 1

   UNION ALL
   SELECT x.rn
        , COALESCE(y.cola,x.cola)
        , COALESCE(y.colb,x.colb)
        , COALESCE(y.colc,x.colc)
   FROM   y
   JOIN   x ON  x.rn = y.rn + 1
   WHERE  y.cola IS NULL OR y.colb IS NULL OR y.colc IS NULL
   )
SELECT cola, colb, colc
FROM   y
ORDER  BY rn DESC
LIMIT  1; 
```

### PL/pgSQL 函数

我的钱花在这个上以获得最佳性能：

```
CREATE OR REPLACE FUNCTION f_last_nonull(OUT cola int
                                       , OUT colb int
                                       , OUT colc int) AS
$func$
DECLARE
   r record;
BEGIN

FOR r IN
   SELECT t.cola, t.colb, t.colc 
   FROM   tbl t
   ORDER  BY t.id DESC
LOOP
   IF cola IS NULL AND r.cola IS NOT NULL THEN cola := r.cola; END IF;
   IF colb IS NULL AND r.colb IS NOT NULL THEN colb := r.colb; END IF;
   IF colc IS NULL AND r.colc IS NOT NULL THEN colc := r.colc; END IF;

   EXIT WHEN NOT (cola IS NULL OR colb IS NULL OR colc IS NULL);
END LOOP;

END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_last_nonull(); 
```

```
cola | colb | colc
-----+------+------
 11  | 3    | 20 
```

用 测试`EXPLAIN ANALYZE`。如果您能回来比较解决方案，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:36:16.683

您可以使用子查询：

```
select
  (select ColA from TheTable where ColA is not null order by ID desc limit 1) as ColA,
  (select ColB from TheTable where ColB is not null order by ID desc limit 1) as ColB,
  (select ColC from TheTable where ColC is not null order by ID desc limit 1) as Col 
```

# jquery - jquery在特定页面上添加一个css类

> ID：13347441
> 
> 赞同：0
> 
> 时间：2012-11-12T16:26:06.447
> 
> 标签：jquery, html, css

我的主要目标是为无序的 li 添加一个活动类。这是基于用户所基于的特定页面。基本上是一种条件格式。我希望创建一个响应式设计，但我目前正在 MAMP 上学习 jQuery。

目前慢速...

HTML

```
<nav id="main-site-nav" class="main-menu">
 <ul>
  <li><a href="index.php" class="crnt-page">Home</a></li>
  <li><a href="/services.php">Services</a></li>
  <li><a href="/certification.php" >Certification</a></li>
  <li><a href="/customers.php">Customers</a></li>
  <li><a href="/contact-me.php">Contact Me</a></li>
 </ul>
</nav> 
```

CSS

```
#main-site-nav .crnt-page {
 color: #E8A317;
 text-decoration:none;
} 
```

我必须为每个 li 添加课程。我希望在页面底部的 main.js 中执行此操作。任何帮助将不胜感激。

* * *

更新！

这是最终的 PHP 解决方案。尽管我很想将其移植到 Wordpress。

```
<nav id="main-site-nav" class="main-menu">
  <ul>
    <li><a <?php if (strpos($_SERVER['PHP_SELF'], 'index.php')) echo 'class="crnt-page"';?>href="index.php">Home</a></li>
    <li><a <?php if (strpos($_SERVER['PHP_SELF'], 'services.php')) echo 'class="crnt-page"';?>href="/services.php">Services</a></li>
    <li><a <?php if (strpos($_SERVER['PHP_SELF'], 'certification.php')) echo 'class="crnt-page"';?>href="/certification.php">Certification</a></li>
    <li><a <?php if (strpos($_SERVER['PHP_SELF'], 'customers.php')) echo 'class="crnt-page"';?>href="/customers.php">Customers</a></li>
    <li><a <?php if (strpos($_SERVER['PHP_SELF'], 'contact-me.php')) echo 'class="crnt-page"';?>href="/contact-me.php">Contact Me</a></li>
  </ul>
</nav> 
```

感谢您的快速回复！现在我只需要习惯堆栈溢出中的这个预先格式化的代码选项:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:33:06.863

最快的方法是在每个页面的正文中添加一个类，如下所示：

```
<body class="services"> 
```

然后在列表中将类添加到 li 或 a 中，如下所示：

```
<li class="services"><a href="..."></a></li>
<li class="certification"><a href="..."></a></li> 
```

在您的脚本中，只需执行以下操作：

```
$(document).ready(function() {
    var bodyClass = $("body").attr("class");
    $("li."+bodyClass).find("a").addClass("crnt-page");
}); 
```

这可以通过多种方式完成，不一定是这种方式（特别是如果您的身体上已经有课程），但总体思路是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:57:39.653

这对我有用：

```
<style>.green {background-color: green;}</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
</head>
<body>
  <ul>
    <li><a href="bla.html">bla</a></li>
    <li><a href="test2.html">test</a></li>
    <li><a href="pfff.html">pff</a></li>
    <li><a href="bar.html">foo</a></li>
  </ul>

<script type="text/javascript">
  var url = /\/([^\/]+)$/.exec(document.location.href)[1];
  $('a[href="' + url + '"]').addClass('green');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:35:30.990

您可以使用 PHP 执行此操作。

这是PHP的想法，

```
<nav id="main-site-nav" class="main-menu">
 <ul>
  <li <?php if($_SERVER["SCRIPT_NAME"] == 'index.php') echo 'class="crnt-page"'; ?>><a href="index.php" class="crnt-page">Home</a></li>
  <li <?php if($_SERVER["SCRIPT_NAME"] == 'services.php') echo 'class="crnt-page"'; ?>><a href="/services.php">Services</a></li>
  <li <?php if($_SERVER["SCRIPT_NAME"] == 'certification.php') echo 'class="crnt-page"'; ?>><a href="/certification.php" >Certification</a></li>
  <li <?php if($_SERVER["SCRIPT_NAME"] == 'customers.php') echo 'class="crnt-page"'; ?>><a href="/customers.php">Customers</a></li>
  <li <?php if($_SERVER["SCRIPT_NAME"] == 'contact-me.php') echo 'class="crnt-page"'; ?>><a href="/contact-me.php">Contact Me</a></li>
 </ul>
</nav> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:31:45.977

我建议如下（尽管未经测试）：

```
var currentPage = document.location.href.split('/').pop().toLowerCase();

$('#main-site-nav a').filter(
    function(){
        return currentPage == this.href.split('/').pop().toLowerCase();
    }).addClass('crnt-page'); 
```

尽管这在服务器端（在服务器生成页面时）会容易得多。

参考：

*   [`addClass()（jQuery 方法）](http://api.jquery.com/addClass/)。
*   [`filter()`（jQuery 方法）](http://api.jquery.com/filter/)。
*   [`pop()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop).
*   [`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).
*   [`toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase).

# r - 如何在 R 中使用 LibSVM 执行 10 倍交叉验证？

> ID：13347443
> 
> 赞同：6
> 
> 时间：2012-11-12T16:26:15.610
> 
> 标签：r, machine-learning, svm, libsvm, cross-validation

我知道在 MatLab 中这很容易（'-v 10'）。

但我需要在 R 中执行此操作。我确实找到了一条关于添加`cross = 10`as 参数的评论。但这在帮助文件中没有得到证实，所以我对此持怀疑态度。

```
svm(Outcome ~. , data= source, cost = 100, gamma =1, cross=10) 
```

任何成功的 R 支持向量机脚本示例也将不胜感激，因为我仍然遇到一些死胡同？

编辑：我忘了在标签之外提到我为此使用 libsvm 包。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:43:14.370

我也在尝试进行 10 折交叉验证。我认为使用 tune 不是执行它的正确方法，因为此功能用于优化参数，而不是用于训练和测试模型。

我有以下代码来执行 Leave-One-Out 交叉验证。假设该*数据集*是一个 data.frame，其中存储了您的数据。在每个 LOO 步骤中，添加观察到的与预测的矩阵，因此最后，*结果*包含全局观察到的与预测的矩阵。

```
#LOOValidation
for (i in 1:length(dataset)){
    fit = svm(classes ~ ., data=dataset[-i,], type='C-classification', kernel='linear')
    pred = predict(fit, dataset[i,])
    result <- result + table(true=dataset[i,]$classes, pred=pred);
}
classAgreement(result) 
```

所以为了进行 10 折交叉验证，我想我们应该手动划分数据集，并使用折来训练和测试模型。

```
for (i in 1:10)
    train <- getFoldTrainSet(dataset, i)
    test <- getFoldTestSet(dataset,i)
    fit = svm(classes ~ ., train, type='C-classification', kernel='linear')
    pred = predict(fit, test)
    results <- c(results,table(true=test$classes, pred=pred));

}
# compute mean accuracies and kappas ussing results, which store the result of each fold 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T20:18:35.353

这是一个不使用包创建 10 个测试和训练折叠的简单方法：

```
#Randomly shuffle the data
yourData<-yourData[sample(nrow(yourData)),]

#Create 10 equally size folds
folds <- cut(seq(1,nrow(yourData)),breaks=10,labels=FALSE)

#Perform 10 fold cross validation
for(i in 1:10){
    #Segement your data by fold using the which() function 
    testIndexes <- which(folds==i,arr.ind=TRUE)
    testData <- yourData[testIndexes, ]
    trainData <- yourData[-testIndexes, ]
    #Use test and train data howeever you desire...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:06:04.607

这是我在 cvsegments 的帮助下运行 k 折叠交叉验证以生成索引折叠的通用代码。

```
# k fold-cross validation
set.seed(1)
k <- 80;
result <- 0;
library('pls');
folds <- cvsegments(nrow(imDF), k);
for (fold in 1:k){
    currentFold <- folds[fold][[1]];
    fit = svm(classes ~ ., data=imDF[-currentFold,], type='C-classification', kernel='linear')
    pred = predict(fit, imDF[currentFold,])
    result <- result + table(true=imDF[currentFold,]$classes, pred=pred);   
}
classAgreement(result) 
```

# sqlite - 使用 OR 和 AND 进行 Sqlite 查询优化

> ID：13347445
> 
> 赞同：0
> 
> 时间：2012-11-12T16:26:37.650
> 
> 标签：sqlite, nhibernate

以下查询需要 5 秒才能执行：

```
SELECT DISTINCT(Product.Name) FROM Product WHERE (0=1 OR Product.Number="prod11"); 
```

虽然以下只需要 15 毫秒：

```
SELECT DISTINCT(Product.Name) FROM Product WHERE (Product.Number="prod11"); 
```

有趣的是，以下也只需要 15 毫秒：

```
SELECT DISTINCT(Product.Name) FROM Product WHERE (1=1 AND Product.Number="prod11"); 
```

查询计划显示第一个查询使用全表扫描（出于某种未知原因），而第二个和第三个查询使用索引（如预期的那样）。

由于某种原因，Sqlite 似乎优化了“1=1 AND ...”，但没有优化“0=1 OR ...”。

我该怎么做才能使 Sqlite 也将索引用于第一个查询？

查询是由 NHibernate 构建的，所以很难改变它们......

Sqlite 版本是 Windows 的最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:41:44.400

SQLite's query optimizer is rather simple and [does not support `OR` expressions very well](http://www.sqlite.org/queryplanner.html#or_in_where).

For some reason, it *can* optimize this query if it can use a *covering* index, so try this:

```
CREATE INDEX TakeThatNHibernate ON Product(Number, Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:04:37.377

`1=1`并且`1=0`是在框架的某些部分中使用的 SQL 表达式，用于`NHibernate`表示不会改变 sql 查询逻辑的空语句。没有子标准的A`Conjunction`生成一个`1=1`表达式，`Disjunction`没有子标准的 A 生成一个`1=0`表达式。`1=0`如果没有提供值，则In() 会生成一个表达式。

为避免此类优化，您可以更改创建这些空表达式的代码，并仅使用具有至少一个子条件的条件。

# mysql - 改进 Mysql 匹配搜索

> ID：13347446
> 
> 赞同：2
> 
> 时间：2012-11-12T16:26:37.473
> 
> 标签：mysql

我一直在关注 Mysql 的 Match Against 搜索。结果很奇怪。例如，如果我有一个带有条目“education”的表属性并为“edu”进行搜索（使用匹配），那么它会找到它。但是，如果我搜索“educ”，则不会返回任何结果。一直到“教育”不返回结果。所以它只匹配整个单词，或者一个单词中匹配 3 个或更少的字母。

有没有办法改进它，以便在搜索词是属性中单词的子集时返回结果？例如，使用上面的示例，搜索“educat”将返回包含“Education”的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:32:52.683

您可以使用标记 %a（a=您的单词或字母）来搜索以相同单词或字母开头的任何单词 您可以使用 %a% 来搜索开头和/或中间的单词的一部分单词和最后一个可以使用以单词或字母结尾的%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:32:08.243

`IN BOOLEAN MODE`通过匹配和使用运算符，您可以完全按照您的意愿行事`*`。

例如：

```
 ... MATCH(thing) AGAINST ('+educat*' IN BOOLEAN MODE)... 
```

`+`告诉匹配只包括那些包含匹配项的值，`thing`在这种情况下，它是所有以“”开头的索引值`educat`（有关布尔模式如何工作的详细信息，请参见[此处](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)）。

顺便说一句，默认情况下，MySQL 中的全文搜索不会索引 3 个或更少字符的单词，所以我怀疑您与“edu”的匹配没有按照您的想法工作。查看`ft_min_word_len`变量的值，看看是否是这种情况。

# android - 如何使用删除按钮android从listview中删除项目

> ID：13347448
> 
> 赞同：0
> 
> 时间：2012-11-12T16:26:47.730
> 
> 标签：android, listview

我想将项目添加到编辑文本下方的列表视图中。这完美地工作。

现在我希望能够删除一些条目。这是我无法弄清楚它是如何完成的。我正在实现`onclicklistener`删除按钮，但程序不断崩溃。我认为这是因为删除按钮尚不存在。我试着在网上找东西，但从来没有得到我可以使用的答案。我可以帮助我，这将是一个巨大的帮助。

PS：并非所有这些代码都来自我，在以下位置找到了一些示例代码：[http ://wptrafficanalyzer.in/blog/dynamically-add-items-to-listview-in-android/](http://wptrafficanalyzer.in/blog/dynamically-add-items-to-listview-in-android/)

这是我的主要活动：

```
 /** Note that here we are inheriting ListActivity class instead of Activity class **/
    public class MainActivity extends ListActivity {
    Button del;
    ListView lv;

    /** Items entered by the user is stored in this ArrayList variable */
    ArrayList<String> list = new ArrayList<String>();

    /** Declaring an ArrayAdapter to set items to ListView */
    ArrayAdapter<String> adapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Setting a custom layout for the list activity */
        setContentView(R.layout.main);

        del = (Button) findViewById(R.id.removeButton);

        /** Reference to the button of the layout main.xml */
        Button btn = (Button) findViewById(R.id.btnAdd);

        /** Defining the ArrayAdapter to set items to ListView */
        adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.nameText, list);

        /** Defining a click event listener for the button "Add" */
        OnClickListener listener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                EditText edit = (EditText) findViewById(R.id.txtItem);
                list.add(edit.getText().toString());
                edit.setText("");
                adapter.notifyDataSetChanged();

            }
        };

        del.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                int pos = v.getId();
                System.out.println(pos);
                Object toRemove = adapter.getItem(pos);
                adapter.remove(toRemove);
            }
        });

        /** Setting the event listener for the add button */
        btn.setOnClickListener(listener);

        /** Setting the adapter to the ListView */
        setListAdapter(adapter);
    }
} 
```

这是我的 xml 文件： Main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/txtItem"
        android:layout_width="240dp"
        android:layout_height="wrap_content"
        android:inputType="text"
        android:hint="@string/hintTxtItem"
    />

    <Button
        android:id="@+id/btnAdd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/lblBtnAdd"
        android:layout_toRightOf="@id/txtItem"
        android:onClick="removeAtomPayOnClickHandler"

    />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtItem"
    />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtItem"
        android:text="@string/txtEmpty"
        android:gravity="center_horizontal"
    />

</RelativeLayout> 
```

项目.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

   <TextView 
    android:id="@+id/nameText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="15dp"
    android:textSize="20sp" >

   </TextView>

   <Button
    android:id="@+id/removeButton"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="@string/remove"
  android:layout_alignParentRight="true"

   />

  </RelativeLayout> 
```

日志猫：

```
11-12 17:37:57.637: D/AndroidRuntime(302): Shutting down VM
11-12 17:37:57.637: W/dalvikvm(302): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-12 17:37:57.667: E/AndroidRuntime(302): FATAL EXCEPTION: main
11-12 17:37:57.667: E/AndroidRuntime(302): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.additemsdynami/com.example.additemsdynami.MainActivity}: java.lang.NullPointerException
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-12 17:37:57.667: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
11-12 17:37:57.667: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
11-12 17:37:57.667: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-12 17:37:57.667: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-12 17:37:57.667: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
11-12 17:37:57.667: E/AndroidRuntime(302): Caused by: java.lang.NullPointerException
11-12 17:37:57.667: E/AndroidRuntime(302):  at com.example.additemsdynami.MainActivity.onCreate(MainActivity.java:69)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-12 17:37:57.667: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-12 17:37:57.667: E/AndroidRuntime(302):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:38:18.440

NullPointerException 来自您在`del`为活动设置内容视图之前设置值的事实。`del = findViewById(id)`之后移动`setContentView(view)`。

至于删除东西，您需要从 ADAPTER 中删除，而不是从列表中删除。您不需要保留自己的项目副本（除非您将它们用于其他用途），因为数组中有一个项目列表。你需要打电话`adapter.remove(item)`而不是`list.remove(item)`

# java - JavaWebStart 阻止 WIN7 + Java6 中的 JAXWS 服务调用

> ID：13347449
> 
> 赞同：1
> 
> 时间：2012-11-12T16:26:49.040
> 
> 标签：java, jax-ws, java-web-start, connection-timeout

我开发了一个 JAXWS Web 服务客户端应用程序，用于通过 Java WebStart 进行桌面交付。它在 WinXP 下工作得很好，无论是在 Java6 和 7 下，无论是在“java”还是“javaws”下运行。我搬到了Win7。在该平台上，无论是在浏览器还是命令行下，在 Java6 下运行 JWS 时，我始终无法连接到服务。它只是超时，好像它只是无法建立 http 连接。服务器端的 Web 日志中没有显示任何内容。如果我在常规的“java”下运行它就可以了。

在 Java7 下，“java”和 JWS 都可以正常工作。

在所有情况下使用完全相同的 jar，并仔细检查是否始终配置相同的肥皂地址。

我已经尝试了所有我能想到的东西，目前，它看起来就像 Win7 上的 Java6 错误。
有没有其他人看过这个？

该程序是在 NetBeans 中开发的。克林特

更新问题已解决。然而，非常奇怪的行为。有一个微妙的 java 版本不兼容（wsimport 输出是无意中用 J7 编译的，但其余部分是用 J6 编译的，如我所愿）。像往常一样，对 Web 服务的调用被阻止，但从未返回。但是，在幕后，引发了异常，导致连接尝试终止。由于某种原因，该异常从未渗透到堆栈中。似乎下面的某些层行为不端。无论如何，我已经修复了，尽管我仍然会说某处存在错误，可能在 JAXWS 代码中。

# java - Gui Builder API

> ID：13347456
> 
> 赞同：-2
> 
> 时间：2012-11-12T16:27:12.953
> 
> 标签：java, swing, user-interface, gui-builder

我正在寻找一个允许创建 Swing Guis 的 API（例如“WindowBuilder pro”或 NetBeans Gui Builder）。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:41:53.413

您可以考虑在 NetBeans 平台（基于 Swing 的 RCP）之上构建您的应用程序，并重用部分 NetBeans GUI Builder 或 Visual Library：

[http://platform.netbeans.org/graph/](http://platform.netbeans.org/graph/)

或者你可以看看我几年前为这样的任务编写的定制器框架：用鼠标移动和调整组件的大小，并允许进一步的定制。包括“对齐网格”功能！也许你觉得它很有用。（它是开源的！）

我开始写教程（还在建设中！）：

[http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/customizer/index.html](http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/customizer/index.html)

要添加组件，请参见：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/CustomizerBar.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/CustomizerBar.html)

要自定义属性，请使用：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JCustomizerPropertyTable.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JCustomizerPropertyTable.html)

将其注册到 JCustomizerPane 的 SelectionManager 并设置 JCustomizer 对象的 CustomizableProperties 属性。

还可以查看 JCustomizer 的子类。

例如有

图像和形状的定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JXIconCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JXIconCustomizer.html)

带有内联编辑的标签定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLabelCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLabelCustomizer.html)

线路定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLine2DCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLine2DCustomizer.html)

并且有许多类提供对菜单和工具栏操作的支持。（包括对一些“Java Look and Feel Graphics Repository”操作的支持。）

查看 *.swing 和 *.swing.action 包。

只要问我你是否找不到他们。

主页：

[http://www.softsmithy.org](http://www.softsmithy.org)

下载：

[http://sourceforge.net/projects/softsmithy/files/softsmithy/](http://sourceforge.net/projects/softsmithy/files/softsmithy/)

马文：

```
<dependency>  
    <groupid>org.softsmithy.lib</groupid>  
    <artifactid>softsmithy-lib-core</artifactid>  
    <version>0.2</version>  
</dependency> 
```

接口：

[http://softsmithy.sourceforge.net/lib/docs/api/index.html](http://softsmithy.sourceforge.net/lib/docs/api/index.html)

# xml - 为缓存 Web 服务 SOAP 标头发送正确的 XML

> ID：13347457
> 
> 赞同：1
> 
> 时间：2012-11-12T16:27:15.480
> 
> 标签：xml, web-services, soap, intersystems-cache, intersystems

我创建了一个简单的头类：

```
Class Sample.Headers Extends %SOAP.Header
{
    Parameter NAMESPACE = "http://tempuri.org";
    Property UserName As %String;
} 
```

在 Web 服务中，我确保在`SOAPHEADERS`参数中设置了正确的命名空间：

```
Parameter SOAPHEADERS = "UserName:Sample.Headers"; 
```

我使用 SoapUI 发送以下 XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org">
   <soapenv:Header>
       <tem:UserName>This is the header</tem:UserName>
   </soapenv:Header>
   <soapenv:Body>
      <tem:Test>
         <!--Optional:-->
         <tem:argAge>10</tem:argAge>
      </tem:Test>
   </soapenv:Body>
</soapenv:Envelope> 
```

我收到以下错误：

> 错误 #6254：需要标记，XML 输入，这是标题，作为 UserName 的子级格式不正确（在第 3 行字符 18 处结束）。

XML 的正确格式是什么，以便正确设置 UserName？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:15:12.693

只需要改变：

```
Property UserName As %String; 
```

到

```
Property UserName As %String(XMLPROJECTION = "CONTENT", MAXLEN = 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:41:41.927

看看这里的例子：http: [//www.w3schools.com/soap/soap_header.asp](http://www.w3schools.com/soap/soap_header.asp)

> **注意**： Header 元素的所有直接子元素都必须是命名空间限定的。

在此示例中，XML 的格式似乎有点不同，将命名空间嵌套为 Header 属性“Trans”的属性（在他们的示例中）。这可能是一个延伸，但我确实看到您的请求没有像这样明确设置命名空间。

# ios - 将数据传递给 ViewController 问题

> ID：13347462
> 
> 赞同：1
> 
> 时间：2012-11-12T16:27:43.963
> 
> 标签：ios, objective-c, iphone, xcode

我的任务是通过单击 FirstViewController 上的按钮在 SecondViewController 的 UIImageView 中设置背景图像。

FirstViewController.h：

```
 #import <UIKit/UIKit.h>
 #import "SecondViewController.h"

 @class SecondViewController;

 @interface ViewController : UIViewController
 {
    SecondViewController *secondViewData;
 }

 // pointer to second view 
 @property (nonatomic, strong) SecondViewController *secondViewData;

 // buttons
 - (IBAction)changeBack:(id)sender;

 @end 
```

FirstViewController.m 中的按钮方法：

```
- (IBAction)changeBack:(id)sender {
    SecondViewController *svc = [[SecondViewController alloc] init];

    self.secondViewData = svc;

    svc.back = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]];
    svc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    [self presentViewController:svc animated:YES completion:nil];
} 
```

SecondViewController.h：

```
 #import <UIKit/UIKit.h>
 #import "FirstViewController.h"

 @interface SecondViewController : UIViewController

 @property (strong, nonatomic) IBOutlet UIImageView *back;

 @end 
```

返回 - 它是 SecondViewController 中的 IBOutlet UIImageView。我还在 SecondViewController.m 中导入了 FirstViewController.h。我试图将字符串传递给 SecondViewController - 它在 SecondViewController 的 -ViewDidLoad 中记录良好，但无法设置 UIImageView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:20:14.563

首先，阅读[View Controllers 中的资源管理](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

我想，问题是首先你通过属性设置 UIImageView，然后在模式控制器中加载视图时从 xib 设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:19:10.183

你可以做这样的事情。你可以在你的 secondviewcontroller.h 中有一个 UIImageView 的出口

```
 IBOutlet UIImageView *imgView; 
```

也属性和合成这个

```
 @property(nonatomic, retain)  IBOutlet UIImageView *imgView; 
```

连接FirstViewController.xib中secondViewController的outlet iof

在你的 firstviewcontrollem.m 中实现这个你想在 secondViewController UIImageView 中设置图像的地方

```
 self.secondViewData.imgView.image = [UIImage imageNamed:@"1.png"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:29:21.547

这条线是问题所在：

```
svc.back = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]]; 
```

您正在设置回一个新分配的图像视图，而不是它在 IB 中连接的那个。只需将该行更改为：

```
svc.back.image = [UIImage imageNamed:@"1.png"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T14:29:42.190

你需要在第二个视图控制器上获取另一个图像视图。我命名为 imgView。让原始图像视图作为 bgView。

```
enter code here 
```

//在secondviewcontroller.h

@property(nonatomic,strong)IBOutlet UIImageView *bgView;

@property(nonatomic,strong)IBOutlet UIImageView *imgView;

//在secondviewcontroller.m

//在viewDidLoad

self.bgView.image=self.imgView.image;

//首先viewcontroller.m

//按钮动作应该是这样的

-(IBAction)buttonPressed:(id)sender {

```
SecondViewController *secondVC=[[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

secondVC.imgView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"hue.png"]];

[self presentModalViewController:secondVC  animated:YES]; 
```

}

试试这个。

# ruby-on-rails - 脏话过滤器导入

> ID：13347464
> 
> 赞同：0
> 
> 时间：2012-11-12T16:27:51.533
> 
> 标签：ruby-on-rails, ruby, filter, profanity

我希望在基于 Rails 的应用程序中编写一个基本的亵渎过滤器。每当用户提交适当的属性时，这将使用简单的搜索和替换机制。我的问题是，对于那些以前写过这些的人，是否有一个 CSV 文件或一些数据库可以将脏话列表导入我的数据库？我们正在提交我们将自己替换脏话的词语。我们或多或少需要一个包含亵渎、种族诽谤和任何不完全被评为 PG-13 的内容的数据库才能被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:03:07.520

正如铁皮人所说，这个问题很难，但也不是不可能。我已经构建了一个 [名为 CleanSpeak 的商业亵渎过滤器](https://cleanspeak.com)，它可以处理上述所有内容（leet speak、语音、语言规则、白名单等）。CleanSpeak 能够在低端服务器上每秒过滤 20,000 条消息，因此可以构建运行良好且性能良好的东西。我要提到的是，CleanSpeak 是大约 3 年持续发展的结果。

我告诉每个想要尝试解决语言过滤器的人一些事情。

1.  不要使用正则表达式，除非你有一个小列表并且不介意很多事情通过。正则表达式总体上相对较慢且难以管理。
2.  确定是否要处理变位、变形和其他语言规则。这些通常会为项目增加大量时间。
3.  确定您需要什么类型的性能以及是否可以对字符串进行多次传递。你做的越多，你的过滤器就越慢。
4.  了解[suncthrope 和 clbuttic](http://en.wikipedia.org/wiki/Scunthorpe_problem)问题，并确定您将如何处理这些问题。这通常需要某种形式的语言智能和白名单。
5.  意识到空格现在有不同的含义。您不能再将其用作单词分隔符（因此）
6.  小心处理标点符号，因为它可以用来绕过过滤器（如 th---is）
7.  了解人们如何使用 ascii 艺术和 unicode 来替换字符（/ = v - 那些是斜线）。有很多 unicode 字符看起来像英文字符，您需要适当地处理这些字符。
8.  了解人们总是通过将单词拼凑在一起（像这样）来编造新的亵渎，并弄清楚您是否想处理它。

您可以在 StackOverflow 上搜索我对其他线程的评论，因为我可能有更多关于我在这里忘记的线程的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:04:31.977

这是您可以使用的：[来自 CMU 网站的攻击性/亵渎性词汇表](http://www.cs.cmu.edu/~biglou/resources/bad-words.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:10:28.083

根据个人经验，你明白这是徒劳的吗？

如果有人想注入亵渎的话，那么在一个上下文中会有大量的词是无辜的，而在另一个上下文中是亵渎的，所以你必须编写一个上下文解析器来避免将干净的词列入黑名单。快速浏览[CMU 的列表](http://www.cs.cmu.edu/~biglou/resources/bad-words.txt)会发现我绝不会认为粗鲁/粗鲁/社会不可接受的词。你会看到有很多词可能是专有名称或名词、国家、亲昵的术语等。而且，使用 L33T 语音等有无数种方法可以让你的算法失效。搜索维基百科和互联网，您可以构建字母变体表。

看看[CMU 的列表](http://www.cs.cmu.edu/~biglou/resources/bad-words.txt)，想象一下如果除了正确的字母之外，每个字母`a`还可以是`4`，`o`可能是，`0`或者`p`，`e`可能是`3`，`s`可能是，那么这个列表会有多长`5`。而且，这是一个非常非常简短的例子。

我被要求做一个类似的任务并编写代码来生成单词的 L33T 变体，并根据互联网上的几个亵渎/攻击性列表生成一个单词命中列表。运行生成器后，文件经过 1/4 多一点后，我的数据库中有超过 100 万个条目。那时我拔掉了这个项目的插头，因为搜索所花费的时间，即使使用 Perl 的 Regex::Assemble，也会很荒谬，尤其是因为它仍然很容易被愚弄。

我建议您与提出要求的人进行长时间的交谈，并询问他们是否了解所涉及的编程问题，以及准确性和成功的可能性很低，尤其是从长期来看，或者当他们意识到您正在审查时可能引起的客户强烈反对他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T21:03:26.020

我已经添加了一个（有点混淆），但这里是：[https ://github.com/rdp/sensible-cinema/blob/master/lib/subtitle_profanity_finder.rb](https://github.com/rdp/sensible-cinema/blob/master/lib/subtitle_profanity_finder.rb)

# php - 管理模块自定义 cms/页面网格没有任何排序功能

> ID：13347465
> 
> 赞同：0
> 
> 时间：2012-11-12T16:27:53.490
> 
> 标签：php, magento-1.7, magento

我创建了一个复制 CMS-> 页面网格布局的管理模块。我已将核心代码从`adminhtml\default\default\template\widget\grid.phtml`我的管理页面模板文件复制到我的模板扩展块`Mage_Adminhtml_Block_Widget_Grid`。

CMS 页面显示正常，我还设法将我自己的列添加到网格中，但是默认列（或我自己的列）都不是可排序或可过滤的。

有谁知道这里可能会发生什么？我是否在某处出错，或者我需要手动使这些默认字段可排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:10:20.383

一个很好的起点是这个类，用于产品网格：

```
Mage_Adminhtml_Block_Catalog_Product_Grid 
```

特别是功能

```
_prepareCollection() 
```

和

```
_prepareColumns() 
```

我已经将该块用作我自己的自定义网格的基础。如果您需要任何进一步的指示，请随时告诉我，我会尽力看看

# c++ - 从 txt 文件 C++ 中删除或忽略重复的行

> ID：13347466
> 
> 赞同：2
> 
> 时间：2012-11-12T16:27:55.417
> 
> 标签：c++

目前我正在尝试读取文本文件并忽略其中的重复行。这是我到目前为止所做的代码示例

```
string filename;
            cout<<"Please enter filename: "<<endl;
            cin>>filename;
            ifstream inFile(filename.data());

            typedef std::map<std::string, int> line_record;
            line_record lines;
            int line_number = 1;

            if(inFile.is_open())
            {
                while(std::getline(inFile, line))
                {   
                    line_record::iterator existing = lines.find(line);
                    if(existing != lines.end())
                    {
                        existing->second = (-1);
                    }
                    else
                    {
                        lines.insert(std::make_pair(line,line_number));
                        ++line_number;
                        getline(inFile,line);
                        cout<<line<<endl;
                        noOfLine++;    
                    }

                }    
            }else
            {
                cout<<"Error opening file! Please try again!"<<endl;
            }
            cout<<"\n"<<noOfLine<<" record(s) read in successfully!\n"<<endl; 
```

文本文件（下）：

```
Point2D, [3, 2]
Line3D, [7, 12, 3], [-9, 13, 68]
Point3D, [1, 3, 8]
Line2D, [5, 7], [3, 8]
Point2D, [3, 2]
Line3D, [7, -12, 3], [9, 13, 68]
Point3D, [6, 9, 5]
Point2D, [3, 2]
Line3D, [70, -120, -3], [-29, 1, 268]
Line3D, [25, -69, -33], [-2, -41, 58]
Point3D, [6, 9, -50] 
```

但我得到的结果是：

```
Line3D, [7, 12, 3], [-9, 13, 68]
Line2D, [5, 7], [3, 8]
Point3D, [6, 9, 5]
Line3D, [25, -69, -33], [-2, -41, 58]
Point3D, [6, 9, -50] 
```

有什么帮助吗？？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:37:30.163

您的代码读取并丢弃循环内的下一行：

```
lines.insert(std::make_pair(line,line_number));
++line_number;
// HERE
getline(inFile,line);
cout<<line<<endl;
noOfLine++; 
```

本质上，程序的输出由程序*丢弃*的行组成。

您应该通过“阅读”循环而不产生任何输出，然后通过`map`, 并打印出行的内容以及找到它们的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T22:34:01.167

我只是编辑一些东西，它的工作`if（myfile.is_open（））

```
{

            while(getline(myfile, line)){

                line_record::iterator existing = lines.find(line);

                if(existing != lines.end())
                {
                    existing->second = (-1);

                }
                else
                {

                    lines.insert(make_pair(line,line_number));
                    ++line_number;
                    cout<<line<<endl;

                    count++;
                }

            }

            cout << "its -- > "<<count <<" record"<< endl;

    myfile.close();

} 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-31T02:07:14.867

这是此问题的完整解决方案：

```
#include <string>
#include <iostream>
#include <fstream>
#include <map>
#include <vector>
#include <algorithm>
#include <iterator>
using namespace std;

// we gonna read each line to map<string, int>
// which will be ordered by its strings by default nature, not line numbers
// then read this map to the vector and sort it by line numbers as it should be for output.txt

typedef pair<string, int> vecpair;

int main(int argc, char* argv[])
{
    if(argc < 2)
    {
        cout << "Missing input filename" << endl;
        exit(1);
    }
    else
    {
        ifstream infile(argv[1], ios::in);
        ofstream outfile("output.txt", ios::out);

        if(!infile)
        {
            cout << "File " << argv[1] << "could not be opened" << endl;
            exit(1);
        }

        // map of input file string lines
        map<string, int> records;
        int line_number{0};

        for(string line{}; getline(infile, line); line_number++)
        {
            auto entry = make_pair(line, line_number);
            auto pair = records.insert(entry);
        }

        infile.close();

        /*
        // map to the outfile sample as part of debugging
        if(records.empty())
        {
            outfile << "Empty records" << endl;
        }
        else
        {
            for(auto iter = records.begin(); iter != records.end(); iter++)
            {
                outfile << iter->first << "\t" << iter->second << endl;
            }
        }
        */

        // create an empty vector of pairs
        vector<vecpair> vec;

        // copy key-value pairs from the map to the vector
        copy(records.begin(), records.end(), back_inserter<vector<vecpair>>(vec));

        // sort the vector by increasing order of its pair's second value
        // if second value are equal, order by the pair's first value
        sort(vec.begin(), vec.end(), [](const vecpair& l, const vecpair& r)
        {
            if(l.second != r.second)
                return l.second < r.second;
            return l.first < r.first;
        });

        // output vector to outfile.txt
        if(vec.empty())
        {
            outfile << "Empty records" << endl;
        }
        else
        {
            for(auto const &vecpair : vec)
            {
                //outfile << vecpair.first << "\t" << vecpair.second << endl;
                outfile << vecpair.first << endl;
            }
        }

        outfile.close();
        return 0;
    }
} 
```

# python - 如何编写脚本来更改我的 Path 环境？

> ID：13347467
> 
> 赞同：0
> 
> 时间：2012-11-12T16:27:55.690
> 
> 标签：python, powershell, path

> **可能重复：**
> [Powershell Python：使用的更改版本](https://stackoverflow.com/questions/13328258/powershell-python-change-version-used)

我的机器（Windows）上同时安装了 python 2.7 和 3.3。假设我想在它们之间来回切换；如何编写一个脚本来设置更改路径变量，以便我可以轻松地来回切换而无需手动执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:29:50.997

与其更改路径变量，不如将它们从路径中删除并符号链接您想要在路径中的某个公共文件夹中使用的那个（如`/usr/local/bin`）。然后编写一个脚本在它们之间来回切换将非常简单。只需删除符号链接并`ln -s`再次执行。

编辑：无视；请参阅链接的重复答案以获得更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:30:03.100

```
import sys
sys.path.remove('<path to 2.7>')
sys.path.append('<path to 3.3>') 
```

反之亦然

# javascript - 输入类型文本（不是文本区域）中的插入符号位置（以像素为单位）

> ID：13347471
> 
> 赞同：26
> 
> 时间：2012-11-12T16:28:09.953
> 
> 标签：javascript, html, textinput, caret

**更新：**[获取输入元素的光标或文本位置（以像素为单位）的](https://stackoverflow.com/questions/6930578/get-cursor-or-text-position-in-pixels-for-input-element)副本。

**TL; DR** - 使用令人难以置信的轻量级和健壮[的 textarea-caret-position](https://github.com/component/textarea-caret-position/releases/tag/2.0.0) *组件*库，现在也支持`<input ype="text">`。演示在[http://jsfiddle.net/dandv/aFPA7/](http://jsfiddle.net/dandv/aFPA7/)

* * *

有没有办法知道插入符号在 HTML 文本字段中的位置？

```
<input type='text' /> 
```

我想根据插入符号的位置以像素为单位（并重新定位）div。

> ***注意****：我不想知道字符或`<textarea>`. 我想知道`<input>`元素中像素的位置。*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T16:33:33.753

## 使用不可见的人造元素

您可以通过使用绝对定位的不可见（使用`visibility`not `display`）虚假元素来实现这一点，该元素具有与输入文本框（字体、左边框和左填充）相同的所有 CSS 属性。

这个[非常简短且易于理解的 JSFiddle](http://jsfiddle.net/yfSUk/3)是该脚本应该如何工作的起点。
**它可以在 Chrome 和 Firefox 中按原样运行。**[它似乎](http://msdn.microsoft.com/en-us/library/ie/ff974768(v=vs.85).aspx)也应该在 IE9+ 中工作。

Internet Explorer 8（及以下）[需要一些额外的代码](https://stackoverflow.com/a/2897510/75642)才能从输入文本框中的文本开头获取插入符号的位置。我什至在顶部添加了一个仪表，以每 10 个像素显示一条线，以便您查看它是否正确测量。请注意，线条位于 1、11、21、... 像素位置。

这个例子实际上是把文本框中的所有文本放到插入符号的位置，然后把它放在人造元素内，然后测量它的宽度（以像素为单位）。**这使您从文本框的左侧偏移。**

当它将文本复制到人造元素时，它还会用不间断的空格替换普通空格，因此它们实际上会被渲染，否则如果您将插入符号放置在空格之后，您会得到错误的位置：

```
var faux = $("#faux");
$("#test").on("keyup click focus", function(evt) {
    // get caret offset from start
    var off = this.selectionStart;

    // replace spaces with non-breaking space
    faux.text(this.value.substring(0, off).replace(/\s/g, "\u00a0"));
});​ 
```

注意人造的正确尺寸

*   填充
*   边界
*   利润

已被删除以获得正确的值，否则元素会太宽。元素的框必须在它包含的文本之后结束。

Caret 从输入框开始的像素位置可以很容易地从以下位置获得：

```
faux.outerWidth(); 
```

## 问题

不过有一个问题。我不确定如何处理文本框中的文本滚动（太长时）并且插入符号不在文本的最后但介于两者之间的情况...如果它在末尾，则插入符号位置始终在可能的最大位置（输入宽度减去右侧尺寸 - 填充、边框、边距）。

我不确定是否可以在文本框中获取文本滚动位置？如果可以，那么即使这个问题也可以解决。但我不知道有任何解决方案...

### 希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T08:39:48.287

详细说明我上面的评论，我想以下应该可行。

为了说明我省略了格式的原理，因此可能需要将元素 (id="spacer") 颜色设置为`#FFFFFE`，可能需要添加一些前导空格的像素等......但是现在 carret 将按比例移动 - 前提是 id 的测试和间隔使用相同的字体。

当然，**我们不知道*[px]***中的距离，但我们能够**完全按照比例字体的宽度****定位内容**（在这种情况下为 carret），所以如果这是最终目标（如前所述在*OP 第 3 行*），然后....瞧！

 ***```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <script type="text/javascript">
            function adjust()
            {
                document.getElementById('spacer').innerHTML=document.getElementById('test').value;
            }
        </script>
        <p>
            <input name="test" id="test" type="text" onkeyup="adjust()" /> Test <br />
            <span id="spacer"></span>^here
        </p>
    </body>
</html> 
```

**更新：**

```
<span id="spacer" style="color: #FFFFFF"></span> 
```

这将使分隔符在白色背景上不可见，但不会阻止用户通过选择 span 元素突出显示分隔符文本。留下使垫片无法选择的任务 - 这里有一个很好的解决[方案](https://stackoverflow.com/questions/2326004/prevent-selection-in-html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:58:45.140

你可以使用`<span contenteditable="true"></span><input type="hidden" />`. 这样您就可以使用`window.getSelection()`with`getRangeAt`和`getClientRects`来获得该职位。这应该适用于大多数现代浏览器，包括 IE9+：

```
function getCaret() {
    var caret = caret = {top: 0, height: 0},
        sel = window.getSelection();
    caret.top = 0;
    caret.height = 0;
    if(sel.rangeCount) {
        var range = sel.getRangeAt(0);          
        var rects = range.getClientRects();
        if (rects.length > 0) {
            caret.top = rects[0].top;
            caret.height = rects[0].height;
        } else {
            caret.top = range.startContainer.offsetTop - document.body.scrollTop;
            caret.height = range.startContainer.clientHeight;
        }
    }
    return caret;
} 
```

（请记住，我从中提取的项目是针对 Mobile Safari，并使用一个大的 contenteditable 视图。您可能需要对其进行调整以满足您的需求。更多的是用于演示如何获取 X 和 Y 坐标。）

对于 IE8 及以下版本，IE 具有用于获取相同信息的专有 API。

棘手的部分是确保您的元素只允许纯文本。特别是粘贴事件。当跨度失去焦点（onblur）时，您希望将内容复制到隐藏字段中以便发布。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T14:01:08.967

涵盖您的问题的类似问题：

*   [在 textarea 中查找插入符号的位置（以像素为单位）](https://stackoverflow.com/questions/9012835/find-caret-position-in-textarea-in-pixels)
*   [获取输入元素的光标或文本位置（以像素为单位）](https://stackoverflow.com/questions/6930578/get-cursor-or-text-position-in-pixels-for-input-element)
*   [如何使用 contentEditable 获取 iframe 中当前插入符号位置的像素偏移量](https://stackoverflow.com/questions/8456652/how-to-get-the-pixel-offset-from-the-current-caret-position-in-an-iframe-with-co)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T18:35:38.023

2D画布呢？它有用于绘制测量文本的 API。你可以用那个。设置相同的字体，字体大小，您应该能够从文本框中测量字符串的宽度。

```
 $('body').append('<canvas id="textCanvas" width="100px" height="100px">I\'m sorry your browser does not support the HTML5 canvas element.</canvas>');
      var canvas = document.getElementById('textCanvas');
      var ctx = canvas.getContext('2d');
      ctx.measureText(text);
      var width = mes.width; 
```

我使用这种解决方案来获取一些文本的宽度以在 WebGL 中绘制它。我工作得很好，但我从来没有测试过当文本对于画布上下文来说太大时会发生什么，我认为这会很好，因为它是用于测量文本的 API。但何知道你应该彻底检查一下！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T23:54:56.100

这是一个工作示例[http://jsfiddle.net/gPL3f/2/](http://jsfiddle.net/gPL3f/2/)

为了找到插入符号的位置，我计算了输入中的字母并将该值乘以 1 个字母的大小。

然后将 div 移动到该位置。

```
<html>
<head>
<style type="text/css">
body { font-size: 12px; line-height: 12px; font-family: arial;}
#box { width: 100px; height: 15px; position: absolute; top: 35px; left: 0px; background: pink;}
</style>
<script type="text/javascript" src="jquery-1.7.1.js"></script>
<script type="text/javascript">
$(document).ready(function(){
var letter_size = 6;
$("input[type='text']").keyup(function(e) {
    move_size = $(this).val().length * letter_size;
    $('#box').css({'left': move_size+'px'}); 
});
});
</script>

</head>
<body>
<input type="text" />
<div id="box">
/ move 
</div>
</body>
<html> 
```

更新

```
$(document).ready(function(){
    var letter_size = 6;
    $("input[type='text']").keyup(function(e) {
        $('.hidden_for_width').text($(this).val());
        move_size = $('.hidden_for_width').width();
        $('#box').css({'left': move_size});
    });
}); 
```

添加了一个隐藏容器，我在其中插入来自 input 的值。之后我得到该容器的宽度并相应地移动我的 DIV

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-12T16:32:40.287

```
function getCursorPosition (elem) {
  var pos = 0;  
  if (document.selection) {
    elem.focus ();
    var sele = document.selection.createRange();
    sele.moveStart('character', -elem.value.length);
    pos = sele.text.length;
  }
  else if (elem.selectionStart || elem.selectionStart == '0')
    pos = elem.selectionStart;
  return pos;
}​

getCursorPosition(document.getElementById('textbox1')) 
```***

# loops - 输出多个数据集的函数

> ID：13347473
> 
> 赞同：1
> 
> 时间：2012-11-12T16:28:11.867
> 
> 标签：loops, dataset

我在 MATLAB 工作。我有一个函数可以遍历目录中的所有文件，运行它们并将它们的数据集输出连接到一个数据集中。

有没有一种方法可以改变我的函数，以便它输出所有单独的数据集以及统一的数据集？

下面，名为“FileInfo”的数组有 3 列。第一列是文件名，第二列和第三列是输入

```
 function [AllFunOutputs] = RunAllFuns(FileInfo)     
 fileDir  = dir('C:\MATLAB\Funs');   % get all file names in directory 'Funs'
 files = {fileDir.name};                             
 funNames = strrep(files, '.m', '');  % strip the '.m' suffix from all files 
 funNames(:,1:2) = [];    
 funNames = transpose(funNames);

k = 1;               % below, match the function name with its argument
  for i=1:length(FileInfo)
    if strcmp(FileInfo(i,1),funNames(k,1))
      funNames(k,3) = FileInfo(i,2);
      k = k+1; 
     end
 end

                % create function handles

 fh_array = cellfun(@str2func,{funNames{:,1}},'UniformOutput', false);  

    X = [];     % below, concatenate all output datasets into a single dataset 

   for i=1:size((funNames),1) 
    X=[fh_array{i}(funNames(i,2),(funNames(i,3)))];
    X = X+1;
   end 
```

所以.....为什么这不能给我所有函数的输出数据集？

```
nFcns = numel(fh_array);    % number of functions to evaluate 

    for i=1:size(nFcns)  
    [allresults] = feval(@(i)funNames(i,2),funNames(i,3));   
    end 
```

非常感谢您的帮助和时间！

# forms - Access 2010 表单按钮问题

> ID：13347476
> 
> 赞同：1
> 
> 时间：2012-11-12T16:28:16.110
> 
> 标签：forms, ms-access, button

我目前在我目前的项目中不知所措。我正在创建一个可以提取客户数据的表单。客户可能拥有的不仅仅是记录，而且我有三个不同的不同字段来帮助缩小到那个确切的客户。我们有一个 ID 字段，它是主键，他们的 SSN 只与他们相关，他们的帐户 # 也只与他们相关。我很好奇是否有一种方法可以在我启动它时不填充表单，或者能够输入这三个文本框中的一个并将它们链接到一个查询，该查询将搜索该记录并填写用数据形成表格，或者让它拉出一个参数框（可以，但不能让数据填充到表格视图中）我没有任何使用命令按钮的运气，或者它们不能按我想要的方式工作他们到，

我可以手动过滤 ID 号来查找记录，但我宁愿让这个用户对未来的用户友好。

此外，该表单目前包含 95 个数据字段，但它们非常适合该表单。

访问 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:00:23.363

您当然可以不填充表单。创建三个文本框和一个“开始”按钮。

go 按钮的代码类似于：

```
If Not IsNull(Me.txtID) Then
    sWhere = sWhere & " Or ID=" & Me.txtID
End If

If Not IsNull(Me.txtSSN) Then
    ''If SSN is text, you need quotes
    sWhere = sWhere & " Or SSN='" & Me.txtSSN & "'"
End If

If Not IsNull(Me.txtAccountNo) Then
    sWhere = sWhere & " Or AccountNo=" & Me.txtAccountNo
End If

sWhere = "WHERE 1=1 " & sWhere

sSQL = "SELECT Each, Field, Name FROM TableName " & sWhere

Me.RecordSource = sSQL 
```

以上是打字，未经测试，只是一种方法。您还可以使用使用向导构建的组合框在表单上选择客户，您可以使用以前的表单填写客户并从中打开表单，您可以根据填写的内容过滤表单等等上。

据我所知，存储 SSN 有一些规定，所以你需要小心。

# c++ - 将 dmalloc 与最近的 g++ 一起使用

> ID：13347479
> 
> 赞同：1
> 
> 时间：2012-11-12T16:28:19.597
> 
> 标签：c++, gcc, dmalloc

我正在尝试将 dmalloc 与 g++ 4.7 一起使用。

我收到的错误消息是：

```
/usr/include/dmalloc.h:457:32: error: declaration of 'char* strdup(const char*)' has a different exception specifier
/usr/include/string.h:130:14: error: from previous declaration 'char* strdup(const char*) throw ()' 
```

1.  为什么 C 函数会抛出异常？
2.  我可以以某种方式告诉编译器在编译时忽略 throw() 说明符吗？

...还是我必须以某种方式修补 dmalloc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:04:27.337

C 函数不会引发异常，但异常可以跨 C 函数帧传播。throw() 规范告诉编译器该函数不会产生异常，无论是由该函数生成还是由链下的某个其他函数生成。

在这种情况下，您正在编译一个 C++ 源代码，它恰好包含一个带有 C 链接的函数的外部声明。仅此一点就不允许编译器得出关于包含函数的库或用于实现该函数的语言的结论，因此编译器不能假设任何关于异常的事情，并且必须保守地编译代码，有 throw( ) 规范没有放在那里。

您必须更新和/或修补 dmalloc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:15:19.630

删除`strdup`from的声明`dmalloc.h`。它似乎在玩不再起作用的 C 库的把戏。

# iphone - 未调用 glkView drawInRect

> ID：13347480
> 
> 赞同：9
> 
> 时间：2012-11-12T16:28:22.290
> 
> 标签：iphone, objective-c, ios, opengl-es, opengl-es-2.0

我正在学习 OpenGLES，我正在尝试将 GLKViewer 放在 UIViewController 中。

我知道我可以通过使用 GLViewController 来解决主要问题，但我正在尝试学习如何做到这一点。

我发现了这个问题，[Nesting GLKView into UIViewController](https://stackoverflow.com/questions/9755288/nesting-glkview-into-uiviewcontroller) and [Nested GLKView and GLKViewController](https://stackoverflow.com/questions/8244525/nested-glkview-and-glkviewcontroller)但即使我认为我正在执行所有正确的步骤，我也必须遗漏一些东西，因为当我运行我的项目时，我没有到达 drawInRect 打印线。

在情节提要中，我将 ViewController 指向 glkview 组件的代表。

我试图使代码尽可能简单，任何帮助都将不胜感激：

***我的控制器.h***

```
#import <Foundation/Foundation.h>
#import <GLKit/GLKit.h>

@interface MyGLController : UIViewController <GLKViewDelegate>
{
    GLuint vertexBufferID;

}

@property (weak, nonatomic) IBOutlet GLKView *glview;

@property (strong, nonatomic) GLKBaseEffect *baseEffect;

@end 
```

***MyGLController.m***

```
#import "MyGLController.h"

@implementation MyGLController

//@synthesize baseEffect;

-(void) viewDidLoad{
    [super viewDidLoad];

    self.glview.context = [[EAGLContext alloc] initWithAPI:
     kEAGLRenderingAPIOpenGLES2];

     [EAGLContext setCurrentContext:self.glview.context];
    printf("View Loaded");
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    printf("DrawInRect");
}

@end 
```

*** 更新 ***

据我所知，glkview 已按照建议正确连接，并添加了 josh-knapp 并调用了 setNeedsDisplay。

万一我遗漏了什么，我已经在此处上传了该项目的副本：[https ://github.com/jcrogel/OpenGLDebug.git](https://github.com/jcrogel/OpenGLDebug.git)

我在这方面完全是菜鸟，所以我为任何愚蠢的疏忽道歉:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T16:56:48.140

你没有说你在情节提要中连接了 MyGLController 的 glview 属性，所以验证一下。

接下来，您将在加载后设置 glview 上下文。如果没有 GLKViewController，则无法告诉 glview 需要绘制它。`[self.glview setNeedsDisplay]`确保在设置上下文后 调用某处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-09T09:32:43.917

我有一个类似的问题。

默认情况下，xcode 将`enable setNeedsDisplay`复选框设置为`NO`在`GLKView`属性列表中。
一旦我改变它，它就起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:10:51.243

我看到这个问题已经回答了。但我遇到了同样的问题，但有不同的解决方案。我想我会在这里发布信息，以防其他人可能从中受益。

**问题描述**

在使用 GLKView 和 GLKViewController 时，渲染循环函数 (drawInRect) 会被调用一次，但不会再次调用。

**可能的原因**

CViewController 的一些方法被错误地实现，没有调用它们的超级。下面的代码说明了三个这样的函数。下面的示例正确实现了三个函数，调用了它们的超级函数。

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:NO];
}

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:NO];
}
-(void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:NO];
} 
```

# .net - .NET 4.0 完整/客户端配置文件；有人在乎吗？

> ID：13347482
> 
> 赞同：4
> 
> 时间：2012-11-12T16:28:28.160
> 
> 标签：.net, wpf, winforms, msdn

我最近阅读了一篇旧的 MSDN 帖子，其中说 winform 和 wpf 应用程序应该针对客户端配置文件而不是完整配置文件。那么，有人在乎吗？有人因此有部署问题吗？

就个人而言，我似乎从来不需要在任何人的计算机上安装 .NET 版本。

如果企业应用程序和消费者应用程序之间存在任何差异，我也很感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:50:06.863

不，.NET 4.0 的客户端配置文件是一个错误。完整版仅大 15%。这个错误没有重复，.NET 4.5 没有客户端配置文件。

从技术上讲，您应该创建一个安装程序，以确保在用户的机器上安装了正确的 .NET 版本。很多机器都有4.0，但不能保证。您可能从未听说过关于它的抱怨，因为 .NET 4.0 中有一个不错的功能，当您的程序在具有先前版本的机器上启动时，它会自动安装 .NET。用户得到一个对话框，它看起来像这样：

![在此处输入图像描述](../Images/b05a4c7f48077e5f6d7aec56563431b4.png)

这有点笨拙，但您通常可以依靠大多数用户单击“是”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:33:12.840

客户端配置文件可作为大多数 Windows 操作系统的 Windows 更新使用。这使得组织可以很容易地使用 SUS 等将其推广到整个企业，消费者也可以轻松安装它。

要获得完整的配置文件，您需要下载并运行独立的 Web 安装程序或完整的 NetFX 安装包。

有关哪些操作系统已经具有 .NET 以及哪些版本已预安装，请参阅[此答案。](https://stackoverflow.com/questions/71390/which-operating-systems-come-with-net)任何不附带 .NET 4 的操作系统都需要在运行 .NET 4 应用程序之前预先安装它，而客户端配置文件使该过程变得更加容易。

在我的 $DAYJOB 中，我们尽可能尝试针对客户配置文件，主要是因为客户端应用程序很少需要完整配置文件附带的额外内容；但是，例如，如果我们需要这些`System.Web`东西，那么我们就不会因为它而失去任何睡眠，只需瞄准完整的配置文件并继续前进。它增加了一些部署复杂性，但这是您必须为额外功能支付的成本权衡。

仅供参考：我们*总是*必须在新的客户端 PC 上安装 .NET 4 Framework；我认为我们还没有遇到已经安装它的企业客户。据推测，随着 .NET 4 应用程序（和/或预装了它的 Windows 8）获得更广泛的使用，这种情况会发生变化，但到那时 .NET 5 应用程序将开始发布，并且循环将重复。无论是您还是其他人，总会*有人*率先将 .NET 部署到 PC 上，因此您必须为此做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:38:27.050

两者之间的区别已经在[这里](https://stackoverflow.com/questions/2759228/difference-between-net-4-client-profile-and-full-framework-download)解释过了。但是，要回答您的问题：

> 有人在乎吗？

好吧，是的，*你*至少应该关心。如果你真的没有必要安装完整版的 .NET Framework 是没有意义的，尤其是如果它会影响安装大小、安装时间等。

> 就个人而言，我似乎从来不需要在任何人的计算机上安装 .NET 版本。

我会说这可能只是一个幸运的巧合。我想如果您尝试在较旧的操作系统（如果您支持它）上安装您的应用程序，例如 Windows XP，并且您的应用程序需要最新版本的 .NET Framework，它不会喜欢它。

好的经验法则是将其添加为安装中的先决条件:)

# grails - Grails 一对多 addTo() 不起作用？

> ID：13347485
> 
> 赞同：0
> 
> 时间：2012-11-12T16:28:47.270
> 
> 标签：grails, grails-orm, one-to-many

我有这些域：

```
 class ChildPlacementFile{
    .....
    static hasMany = [children : Client]
    static belongsTo  = [father : Client, mother: Client]
    Client child
    ...other fields etc.
    }

class Client{
String firstName
String lastName
....etc etc.
} 
```

我的客户要求我允许在表单中进行多次保存。所以我创建了一个看起来像这样的服务。

```
def saveChildren(ChildPlacementFile childPlacementFileInstance, params){
    def childrenList = []
    def errorList = []

    params.rowId = [params.rowId].flatten()
    params.child = [params.child].flatten()

    params.rowId.eachWithIndex {child, i ->
        Client childInstance = Client.get(params.child[i])

        if(childInstance){
            childrenList.add(childInstance)
            childPlacementFileInstance?.addToChildren(childInstance).save()
                    }else{
            errorList.add(childInstance)
        }
    }

    [errors: errorList, children:childrenList]

} 
```

当我尝试在控制器上检查时，孩子似乎保存在 save() 方法 [childPlacementFileInstance.?children] 上，但是当它重定向到 show() 方法时，[childPlacementFileInstance.?children] 没有不再出现，它是空的。为什么？？O_O

没有错误，没有例外。所以我预计它会起作用，但它没有。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:43:46.207

我的猜测是 save 方法在某些约束下失败。调用 save check 后检查`childPlacementFileInstance.hasErrors()`。如果您不想显式抛出异常，请使用参数调用方法`childPlacementFileInstance.save(failOnError: true)`。

# android - 未在列表视图上设置数据

> ID：13347491
> 
> 赞同：0
> 
> 时间：2012-11-12T16:29:07.563
> 
> 标签：android, arrays, string, listview

我已经编写了一些代码来`listview`从网页设置数据。我已成功阅读网页并将必要的数据存储在`String`数组中。现在我想将其分配给`ListView`using`ArrayAdapter`但数据未设置在`listview`. 请帮我解决错误：

logcat 的输出，以验证数据是否存储在`String array`

```
11-07 23:03:47.640: I/NEW VAUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterflies
11-07 23:03:47.640: I/NEW VAUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfly
11-07 23:03:47.640: I/NEW VAUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfies
11-07 23:03:47.640: I/NEW VAUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfly
11-07 23:03:47.640: I/NEW VAUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterflies
11-07 23:03:47.640: I/VALUES(3192): Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterflies<br/>Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfly<br/>Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfies<br/>Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterfly<br/>Happiness is Like a Butterfly, You run after it, It keeps flying away. But if you stand still, It comes and Sits On You Wish you lots of Butterflies 
```

**代码**

```
private Spinner spinner1;
private ProgressDialog pd;
private StringBuilder response;
private ListView listView;
private String[] values = new String[0];
private ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    listView = (ListView) findViewById(R.id.mylist);
    spinner1 = (Spinner) findViewById(R.id.spinnerCategory);
    spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> av, View view, int id,
                long ids) {
            new sendMessageAsync().execute();
        }

        public void onNothingSelected(AdapterView<?> av) {
        }
    });

    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class sendMessageAsync extends AsyncTask<Void, Void, String> {

    @Override
    protected void onPreExecute() {
        pd = ProgressDialog.show(main.this, null, "Loading...",
                true, true);
    }

    @Override
    protected void onCancelled() {
        Toast.makeText(getApplicationContext(),
                "Message Sending Cancelled", Toast.LENGTH_LONG).show();
    }

    @Override
    protected String doInBackground(Void... arg0) {
        try {
            doInBg();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        pd.dismiss();
        adapter.notifyDataSetChanged();
        listView.setAdapter(adapter);
    }
}

public void doInBg() {
    try {
        final String msgURL = "http://example.com/messages.php?category=" + String.valueOf(spinner1.getSelectedItem().toString().replace(" ", "%20"));
        URLConnection connection = new URL(msgURL).openConnection();
        connection.setRequestProperty("Accept-Charset", "UTF-8");
        InputStream responseStream = connection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(responseStream));
        response = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            response.append(line);
        }
        values = String.valueOf(response).split("<br/>");
        for (int i = 0; i < values.length;i++) {
            Log.i("NEW VAUES", values[i]);
        }
        Log.i("VALUES", String.valueOf(response));
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:32:49.347

您不会更改适配器存储的数组。当你这样做时：

```
values = String.valueOf(response).split("<br/>"); 
```

您在类成员中存储了一个新数组，但您的适配器仍保存旧数组。您可以创建并设置一个新的适配器，但这种解决方案对性能不利。相反，您必须将每个项目从这个新数组添加到适配器。试试这个：

```
private class sendMessageAsync extends AsyncTask<Void, Void, String> {

    @Override
    protected void onPreExecute() {
        pd = ProgressDialog.show(main.this, null, "Loading...",
                true, true);
    }

    @Override
    protected void onCancelled() {
        Toast.makeText(getApplicationContext(),
                "Message Sending Cancelled", Toast.LENGTH_LONG).show();
    }

    @Override
    protected String doInBackground(Void... arg0) {
        try {
            return doInBg();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        pd.dismiss();
        if (result == null) {
            // request failed!
            // return;
        }
        values = String.valueOf(result).split("<br/>");
        adapter.clear();
        for (String str : values)
            adapter.add(str);
    }
}

public String doInBg() {
    try {
        final String msgURL = "http://example.com/messages.php?category=" + String.valueOf(spinner1.getSelectedItem().toString().replace(" ", "%20"));
        URLConnection connection = new URL(msgURL).openConnection();
        connection.setRequestProperty("Accept-Charset", "UTF-8");
        InputStream responseStream = connection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(responseStream));
        response = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            response.append(line);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return response;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:36:18.390

试试这个 ：

```
@Override
protected void onPostExecute(String result) {
    pd.dismiss();
    adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listView.setAdapter(adapter);
} 
```

适配器值不会在您的代码中更新。

# javascript - unescape 在亵渎过滤器中不起作用

> ID：13347494
> 
> 赞同：1
> 
> 时间：2012-11-12T16:29:17.573
> 
> 标签：javascript, filter, escaping, profanity

我正在尝试使用 javascript 制作亵渎过滤器。我成功了，但是当我对坏词进行编码时，我无法理解

去工作。我已经连续两天为此工作了。

我试图对变量中的代码进行转义，然后在匹配时使用该变量。我试过在

也匹配代码。我尝试混合 document.write 和我能想到的所有其他内容。

我原来的功能代码：

```
var badwords = /fck|psssy|ssshole/i;

Baddata1 = FirstName.value;
Baddata2 = LastName.value;

if (Baddata1.match(badwords))
            {
                checker();
                FirstName.focus();
                return false;
            }
            if (Baddata2.match(badwords))
            {
                checker();
                LastName.focus();
                return false;
            }
function checker() 
        {
            window.alert("Please Remove Bad Words");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:35:07.300

您可以通过从 0xffff 中减去字符代码来反转字符串以进行编码，然后将其再次反转以获得明文。使用“new RegExp”构造：

```
var encstr = "ﾝﾞﾛﾃﾑﾞﾌﾋﾆﾃﾈﾐﾍﾛ";   // "bad|nasty|word" put through reverse() function
var badwords = new RegExp(reverse(encstr), "i");
var Baddata1 = "bad";
var Baddata2 = "LastName";

function reverse(str) {
    var sout = "", ix;
    if (!str) {
        return "";
    }
    for (ix = 0;  ix < str.length;  ++ix) {
        sout += String.fromCharCode(0xffff - str.charCodeAt(ix));
    }
    return sout;
}

if (Baddata1.match(badwords))
{
    checker();
    FirstName.focus();
    return false;
}
if (Baddata2.match(badwords))
{
    checker();
    LastName.focus();
    return false;
}
function checker()
{
    window.alert("Please Remove Bad Words");
} 
```

在这里工作[jsfiddle](http://jsfiddle.net/8HYv9/)。

如果您不喜欢使用高字符代码，我可以轻松替换各种不喜欢的编码函数，尽管这个是最紧凑的。

**编辑：**要获取反向字符串，请使用 JS 调试器调用反向，或者添加如下临时代码：

```
console.log(reverse("bad|nasty|word")); 
```

这是因为 reverse(reverse(string1)) === string1\. reverse 会自行撤消。

您还可以在单​​独的脚本中保留单词列表，并使用传递给 reverse 的 JS 字符串连接来制作列表，例如：

```
var wordlist = ["bad", "nasty", "word"];
var joined = wordlist.join("|");
console.log('var encstr = "' + reverse(joined) + '"'); 
```

从调试控制台复制字符串并粘贴后，单独的脚本可以轻松检查它是否正确：

```
var encstr = "ﾝﾞﾛﾃﾑﾞﾌﾋﾆﾃﾈﾐﾍﾛ";
alert("encstr " + (reverse(encstr) === joined ? "matches" : "does NOT match") + " original"); 
```

**编辑 2：**如果您不想使用属于国际范围的高字符代码，只需使用 base64 之类的编码，或者这个简单的集合：

```
function encodeStr(str) {
    var sout = "", ix;
    if (!str) {
        return "";
    }
    for (ix = 0;  ix < str.length;  ++ix) {
        if (sout.length)
            sout += ",";
        sout += str.charCodeAt(ix).toString(16);
    }
    return sout;
}

function decodeStr(str) {
    var sout = "", narr, ix;
    if (!str) {
        return "";
    }
    narr = str.split(",");
    for (ix = 0;  ix < narr.length;  ++ix) {
        sout += String.fromCharCode(parseInt(narr[ix], 16));
    }
    return sout;
}

// Using encodeStr on "bad|nasty|word" makes this:
var encstr = "62,61,64,7c,6e,61,73,74,79,7c,77,6f,72,64";
var badwords = new RegExp(decodeStr(encstr), "i"); 
```

# email - 验证 gmail 发件人

> ID：13347497
> 
> 赞同：1
> 
> 时间：2012-11-12T16:29:24.443
> 
> 标签：email, dkim

我希望能够对用户发送到我的应用程序的电子邮件进行身份验证。为了简单起见，我只能为 gmail 用户这样做，因为 gmail 使用 DKIM 对所有外发电子邮件进行签名。

如何找出 gmail 的 DKIM 公钥？我尝试使用[http://www.protodave.com/tools/dkim-key-checker/](http://www.protodave.com/tools/dkim-key-checker/)，但找不到 gmail 的选择器名称。

然后我如何验证消息的真实性？HMAC？是否有一些 API/服务可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:45:14.950

我从 Gmail 向另一个帐户发送了一封测试邮件，然后查看了 DKIM 信息的标题。我有：

```
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
    d=gmail.com; s=20120113;
    h=mime-version:x-received:date:message-id:subject:from:to
     :content-type; bh=fd9JXP6Ngw+hgcG1EbBo7GpsrIIZzdJb9Q/14o9e5C8=;
    b=sYlJC2oYWzBUOPIo0jtR4iFsIVqUlwo2QRcG1186hg5ai0oO1nisiOJUD+QXjt (snip) 
```

这里的选择器是“20120113”。在 shell 提示符下，向 Google 的 DNS 查询与该选择器关联的公钥：

```
dig 20120113._domainkey.google.com TXT 
```

这导致：

```
20120113._domainkey.google.com. 86400 IN TXT    "k=rsa\; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAp5kQ31/aZDreQqR9/ikNe00ywRvZBFHod6dja+Xdui4C1y8SVrkUMQQLOO49UA+ROm4evxAru5nGPbSl7WJzyGLl0z8Lt+qjGSa3+qxf4ZhDQ2chLS+2g0Nnzi6coUpF8r" "juvuWHWXnzpvLxE5TQdfgp8yziNWUqCXG/LBbgeGqCIpaQjlaA6GtPbJbh0jl1NcQLqrOmc2Kj2urNJAW+UPehVGzHal3bCtnNz55sajugRps1rO8lYdPamQjLEJhwaEg6/E50m58BVVdK3KHvQzrQBwfvm99mHLALJqkFHnhyKARLQf8tQMy8wVtIwY2vOUwwJxt3e0KcIX6NtnjSSwIDAQAB" 
```

公钥是 p= 之后的所有内容。

但是...该选择器看起来像是基于日期的，这意味着 Google 可能会定期轮换它。你不能相信选择器总是有效的。

因此，如果您想可靠地验证收到的邮件，请省去编写自己的验证工具的麻烦并使用 OpenDKIM ( [http://opendkim.org/](http://opendkim.org/) )。它不仅会验证收到的邮件，还会对您发出的邮件进行签名。

# php - 改进使用 PDO 的 SELECT 并添加 UPDATE 语句

> ID：13347500
> 
> 赞同：0
> 
> 时间：2012-11-12T16:29:27.470
> 
> 标签：php, mysql, sql, pdo, sql-update

我正在使用以下代码从 MySQL 表中选择数据。有人可以告诉我如何改进它，因为它看起来有点乱吗？

此外，每次从数据库中查询客户时，我都需要运行 UPDATE 语句来增加“视图”列中的值。数据库中的每个客户行都有一个名为“views”的列。例如，假设 ABC Corp 有 100 次观看。如果我搜索 ABC Corp 并且数据库返回记录，则该记录的“views”列应更新为 101。最好的方法是什么？

```
if ($search && ($group && $group !== "*")) {
  $sql = "SELECT * FROM customers WHERE description LIKE :description AND groupId LIKE :groupId";
  $result = $conn->prepare($sql);
  $result->bindValue(":description", "%" . $search . "%", PDO::PARAM_STR);
  $result->bindValue(":groupId", $groupId, PDO::PARAM_INT);
} else if ($search) {
  $sql = "SELECT * FROM customers WHERE description LIKE :description";
  $result = $conn->prepare($sql);
  $result->bindValue(":description", "%" . $search . "%", PDO::PARAM_STR);
} else if ($group !== "*") {
  $sql = "SELECT * FROM customers WHERE groupId LIKE :groupId";
  $result = $conn->prepare($sql);
  $result->bindValue(":groupId", $groupId, PDO::PARAM_INT);
} else {
  $sql = "SELECT * FROM customers";
  $result = $conn->prepare($sql);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:42:30.533

这样的事情怎么样

```
 $sql = "SELECT * FROM customers ";
 $and = $grp = FALSE;

 if($search || ($group && $group !== "*") {
 $sql .= " WHERE ";
 if ($search) {
  $sql .= " description LIKE :description ";
  $and = TRUE;
 } 

 if ($group && $group !== "*") {
   if( $and === TRUE )
     $sql .= " AND ";        
   $sql .= " groupId LIKE :groupId ";  
   $grp = TRUE;     
 }     
 } 

 $result = $conn->prepare($sql);
 if( $and === TRUE)
  $result->bindValue(":description", "%" . $search . "%", PDO::PARAM_STR);

 if( $grp === TRUE)
   $result->bindValue(":groupId", $groupId, PDO::PARAM_INT); 
```

对于`UPDATE`声明，

```
 //say $cust_name is the requested customer to be searched
   $sql = "SELECT views from customers where customer_name = '" $cust_name."'";
   $res = $conn->query($sql);
   $views = $res->fetchColumn() + 1;
   //sets 'views' to num_of_customers/rows returned.
   $sql = "UPDATE customers SET VIEWS = " .$views." WHERE customer_name = '" $cust_name."'";
   $res = $conn->query($sql); 
```

# java - 如何在 Java 中对多边形对象应用变换

> ID：13347503
> 
> 赞同：0
> 
> 时间：2012-11-12T16:29:32.693
> 
> 标签：java, casting, transform, polygon, shape

我做了一个变换并用它渲染了一个多边形对象（网格是多边形类型）：

```
 at.setToTranslation(gameObject.position.x, gameObject.position.y);
    at.rotate(Math.toRadians(rotation));
    at.scale(scale, scale);
    g2d.setTransform(at);
    g2d.fillPolygon(mesh); 
```

现在我想返回我渲染的确切网格，以便我可以对其进行碰撞检查。唯一的问题是，如果我返回网格，它会返回未转换的网格。所以我尝试将变换设置为多边形对象（网格），如下所示：

```
 mesh = (Polygon)at.createTransformedShape(mesh); 
```

但不幸的是 at.createTransformedShape() 返回的 Shape 只能转换为 Path2D.Double。因此，如果有人知道如何将 Path2D.Double 转换为 Polygon 或知道将转换设置为网格的另一种方法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:09:17.233

如果`AffineTransform#createTransformedShape`没有为`Polygon`s 提供所需的结果（似乎是这种情况），您可以将 s 拆分`Polygon`为`Point`s，将每个转换`Point`并合并为一个新的 s `Polygon`。尝试：

```
//Polygon mesh
//AffineTransform at

int[] x = mesh.xpoints;
int[] y = mesh.ypoints;
int[] rx = new int[x.length];
int[] ry = new int[y.length];

for(int i=0; i<mesh.npoints; i++){
  Point2d p = new Point2d.Double(x[i], y[i]);
  at.transform(p,p);
  rx[i]=p.x;
  ry[i]=p.y;
}

mesh = new Polygon(rx, ry, mesh.npoints) 
```

# css - 在右上角浮动一个 div 而不重叠同级标题

> ID：13347507
> 
> 赞同：27
> 
> 时间：2012-11-12T16:29:52.727
> 
> 标签：css, html

在一个部分中有一个`div`和一个`h1`，我如何在不重叠标题文本的情况下将 div 浮动在右上角？

HTML 代码如下：

```
<section>
  <h1>some long long long long header, a whole line, 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6</h1>
  <div><button>button</button></div>
</section> 
```

*   我尝试了相对于父级的绝对位置，但文本重叠，[http://jsfiddle.net/FnpS8/2/](http://jsfiddle.net/FnpS8/2/)

    ![div 重叠文本](../Images/f0e28ad3cfd026c6872fb7e32433292b.png)

使用这个 CSS 代码：

```
section { position: relative; }
h1  { display: inline; }
div {
    position: absolute;
    top: 0;
    right: 0;
} 
```

*   我尝试将 div 浮动到右侧，但它不会保留在右上角，[http://jsfiddle.net/P6xCw/2/](http://jsfiddle.net/P6xCw/2/)

    ![div 向右浮动](../Images/369e766d20e90d6055c3e7a4a6cd9c90.png)

使用这个 CSS 代码：

```
h1  { display: inline; }
div { float: right;    } 
```

​</p>

我知道有很多类似的问题，但我找不到解决此案的问题。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-12T16:31:35.790

如果您可以更改元素的顺序，浮动将起作用。

```
section {
  position: relative;
  width: 50%;
  border: 1px solid;
}
h1 {
  display: inline;
}
div {
  float: right;
}
```

```
<section>
  <div>
    <button>button</button>
  </div>

  <h1>some long long long long header, a whole line, 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6</h1>
</section>
```

​通过将 放在`div` **之前**并将`h1`其浮动到`right`，您可以获得所需的效果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-12T16:31:28.247

橡皮鸭解决的另一个[问题](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)：

css 是正确的，但您仍然必须记住 HTML[元素的顺序很重要](https://stackoverflow.com/a/92278/343834)：div 必须位于标题之前。[http://jsfiddle.net/Fq2Na/1/](http://jsfiddle.net/Fq2Na/1/) ![在此处输入图像描述](../Images/e2ce99909c96571643dcb986f69cd55c.png)

将您的 HTML 代码更改为在标题之前添加 div：

```
<section>
<div><button>button</button></div>
<h1>some long long long long header, a whole line, 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6</h1>
</section> 
```

并保持你的 CSS 简单`div { float: right; }`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:40:04.187

Get rid from your `<Button>` wrap div using `display:block` and `float:left` in both `<Button>` and `<h1>` and specifying their `width` with a `position:relative` to your `Section`. This approach has the advantage of not needing another `div` only to position your `<Button>`

**html**

```
<section>  
    <h1>some long long long long header, a whole line, 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6</h1>     
    <button>button</button>
</section> 
```

​ **css**

```
section {
    position: relative;
    width: 50%;
    border: 1px solid;
    float:left;
}
h1 {
    display: block;
    width:70%;
    float:left;
}
button
{
    position:relative;
    top:0;
    left:0;
    float:left;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:34:42.920

```
section {
    position: relative;
    width: 50%;
    border: 1px solid;
}
h1 {
    display: inline;
}
div {
    position: relative;
    float:right;
    top: 0;
    right: 0;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T16:35:01.250

这对我有用：

```
h1 {
    display: inline;
    overflow: hidden;
}
div {
    position: relative;
    float: right;
} 
```

它类似于 Stubbornella 的媒体对象方法。

编辑：正如他们在下面评论的那样，您需要将要浮动的元素放在要包装的元素之前（第一个小提琴中的那个）

# python - 递归累积和

> ID：13347515
> 
> 赞同：1
> 
> 时间：2012-11-12T16:30:13.087
> 
> 标签：python

我需要编写一个程序，从带有 def 的数字列表中计算累积和，但只能使用递归。我做到了，但现在我需要在不使用方法的情况下编写相同的程序`sum`，但到目前为止还没有成功。任何的想法？

我的代码：

```
def rec_cumsum(numbers):
        ''' Input: numbers - a list of numbers,
                Output: a list of cumulative sums of the numbers'''
        if len(numbers)==0: return numbers

        return rec_cumsum(numbers[:-1])+ [sum(numbers)] 
```

输入：

1 `[1,2,3]`

2 `[2, 2, 2, 3]`

输出：

1 `[1,3,6]`

2 `[2, 4, 6, 9]`

* * *

我的代码没有`sum`：

```
def rec_cumsum(numbers):
        ''' Input: numbers - a list of numbers,
                Output: a list of cumulative sums of the numbers'''
        if len(numbers) == 0: return numbers
        my_list=[]
        rec_cumsum(my_list + numbers)
        my_list[0]=numbers[0]
        rec_cumsum(my_list)
        temp_sum=my_list[0]+numbers[-1]
        my_list[0]=temp_sum
        return my_list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:58:21.263

我会建议这样的事情而不添加额外的参数：

[更新]

```
def rec(n):
    if len(n) < 2: return n
    n[1] = n[0] + n[1]
    return [n[0]] + rec(n[1:])

print rec([1,2,3,4])
[1, 3, 6, 10] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:34:31.967

你可以做的是： -

*   创建一个临时列表（一个空的）。
*   在您的方法中传递您的原始列表和空列表。
*   现在，当您第一次传递您的列表时，只需将原始列表中的第一个元素添加到它。并使用列表的其余部分调用相同的方法。从第一个元素开始。
*   当您的方法在病房后被调用时，您需要获取您的元素和现在修改的原始列表的`last`元素之`temp list`和。`first element`并将总和作为新元素添加到您的临时列表中。
*   最后，当原始列表的长度变为 0 时。返回您的临时值。

**这是上述步骤的代码。你可以将它与你已经实现的进行比较，看看你哪里出错了：-

```
def rec_cumsum(numbers):
    if len(numbers) == 0 : return temp

    # You need to check, if `temp` is empty, that means method is called first time.
    if not temp:   
        temp.extend([numbers[0]])   // Just add the first element to it.

    else:
        # Else, get the last element from `temp`, 
        # add it to `first elemt` in `numbers` and add it to `temp`.
        temp.extend([temp[-1] + numbers[0]])

    return rec_cumsum(numbers[1:])

my_list = [2, 2, 2, 3]
temp = []
print rec_cumsum(my_list) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T20:55:00.400

另一个解决方案是：

```
def rec(n):
    if len(n) < 2: return n
    rest = rec(n[:-1])
    return rest + [rest[-1] + n[-1]] 
```

这个对我来说感觉更直观..

# linux - 动态更改（修补）原始文件

> ID：13347519
> 
> 赞同：0
> 
> 时间：2012-11-12T16:30:17.440
> 
> 标签：linux, filesystems, patch

是否可以对文件进行某种链接，哪些内容将动态更改？

例如，文件 aX.config 包含与文件 a.config 相同的文本行，并且在第 19 行中多了一行。当我更改 a.config 时，aX.cofig 也发生了变化，但该额外的行保留在那里。

它可能是文件系统特殊文件...

PS：手动调用更新脚本不是我想要的。

# html - 图像重叠边框，不确定我是否正确执行

> ID：13347520
> 
> 赞同：0
> 
> 时间：2012-11-12T16:30:20.260
> 
> 标签：html, css, image, border

我刚开始做 HTML/CSS，所以如果我在代码中犯了任何重大错误，请纠正我。

问题是在这张图片上看到的（对不起一些黑框，那只是为了隐藏一些内容，只有顶部的图像才是问题）

[http://i.imgur.com/XlaCi.png](http://i.imgur.com/XlaCi.png)

您可以看到图片与边框重叠。所以我想知道是否有任何方法可以用 CSS 解决这个问题，或者我是否必须编辑图片以使其适合我的边框角？

[这是代码](https://gist.github.com/4060292)

我在整个互联网上做了一些研究，我可能知道这与我的绝对位置或/可能是相对位置有关？但我完全不确定，所以我希望你们能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:40:13.427

Try giving "header" the same border radius at the top as your wrapper element has and adding overflow:hidden. I think that may work.

```
#header {
 -webkit-border-top-left-radius: 50px;
 -webkit-border-top-right-radius: 50px;
 -moz-border-radius-topleft: 50px;
 -moz-border-radius-topright: 50px;
 border-top-left-radius: 50px;
 border-top-right-radius: 50px;
overflow:hidden;
} 
```

As an aside your use of absolute positioning for your site is not needed.

To center your site just give your #wrapper element "margin:0 auto;"

All of your orther elements are using absolurte positiong as well. Just let them flow one after another and use floats - don't use absolute positioning to achieve layout like this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:16:55.203

如果您使用的是“border-radius”——这是一个 css3 属性，那么您也可以使用“ **background-clip** ”来有效地设置背景剪辑。

此属性有三个可用值：

边框框、内容框或填充框

我想你会找到你想要使用**的内容框**（如下所示）。

```
#header {background-clipping:content-box} 
```

有一篇很棒的关于[css 技巧](http://css-tricks.com/transparent-borders-with-background-clip/)的文章看看。也值得一个书签，它是一个很好的信息来源，可以帮助你增加 css / html 知识。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T16:53:02.160

这看起来有点功课，所以我不会写代码。

但是，您确实有一些选项可以使图像的角落变圆。我将按照方便的顺序列出它们：

*   将图像设置为`background-image`标题。
*   将图像的样式设置为圆角。
*   （不要这样做）创建一个已经圆角的透明图像。

# javascript - 使用 jQuery 清除动态加载元素的 innerHTML

> ID：13347522
> 
> 赞同：0
> 
> 时间：2012-11-12T16:30:23.513
> 
> 标签：javascript, jquery, html, ajax

我读过的所有内容都导致更多使用 .live()、.on()、.bind()、.delegate() 等添加事件处理程序。

我之前问了一个问题，可能没有正确回答，所以我投票删除了那个问题并重新问了一个更简单的问题，我相信我可以从中完成剩下的事情。

有没有办法用预定义的类清除 HTML 元素的 innerhtml，包括通过 AJAX 动态加载的那些等。

所以每次ajax调用

```
<div class="triggerElement">something here...</div> 
```

或页面上的类似内容，我需要将其清空。我想我已经正确解释了。如果没有，请告诉我。

编辑

似乎有很多困惑。.empty 和其他类似的将不起作用。如果你打电话

```
$(".omButton").empty(); 
```

从索引中，然后某个其他模块稍后通过 AJAX 使用相同的类加载一些东西，它不会清空它。如果我首先在页面上有元素，然后调用它，是的，它会起作用....

我需要一些类似于 .live 或 .delegate 的东西，它适用于事后加载的任何内容，因为我已经尝试过 .empty 和 .html，但它们都不适用于使用 AJAX 加载的内容。

不知道如何解释这一点。认为这很简单。对不起！

编辑 2...

索引包含空函数

```
$(function(){
    $('.omButton').empty();
    $ajax... to load "loadedContent"
});

<div class="omButton"></div>
<div id="loadedContent"></div> 
```

ajax 返回

```
json_encode(array('test' => '<div class="omButton">Button Text</div>')); 
```

所以现在索引上的 HTML 是

```
<div id="loadedContent"><div class="omButton">Button Text</div></div> 
```

但是，由于页面加载时内部 div 不存在，因此 .empty 不会影响它。我需要一些可以放在页面加载上的东西，以“监视”它的任何发生（静态或动态）并将其清空。

希望这有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:40:49.850

Try using [$.ajaxComplete()](http://api.jquery.com/ajaxComplete/) - as this is triggered after every ajax request completes

```
$('body').ajaxComplete(function() {
  $('.triggerElement').empty();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:33:00.063

尝试这个。[。空的](http://api.jquery.com/empty/)

```
$.ajax({
    ...
    complete: function(){
        $(elementSelectorForWhatYouWantEmptied).empty();
    }
}) 
```

或者如果加载的元素是动态放置在 DOM 中的，那么您可以使用`.live()`.

```
$(elementThatIsInDOM).on(event, elementSelectorThatIsDynamicallyAdded, function(){
    $(elementSelectorForWhatYouWantEmptied).empty();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:43:59.747

如果您使用 ajax 加载内容，并且该内容是带有内容的完整标签

```
<div class="triggerElement">something here...</div> 
```

并且您想要`empty`在加载该元素后对其进行操作，您需要在加载数据时执行的回调中执行此操作。

```
$.ajax(
    ....
    success: function(data){
      $(".omButton").empty();
    }); 
```

# php - 使用 TripleDes、PKCS7 和 ECB 进行 PHP 加密/解密

> ID：13347528
> 
> 赞同：7
> 
> 时间：2012-11-12T16:30:36.197
> 
> 标签：php, encryption, pkcs#7, tripledes, ecb

我的加密功能正常工作，但是我无法弄清楚如何让解密功能提供正确的输出。

这是我的加密功能：

```
function Encrypt($data, $secret)
{    
  //Generate a key from a hash
  $key = md5(utf8_encode($secret), true);

  //Take first 8 bytes of $key and append them to the end of $key.
  $key .= substr($key, 0, 8);

  //Pad for PKCS7
  $blockSize = mcrypt_get_block_size('tripledes', 'ecb');
  $len = strlen($data);
  $pad = $blockSize - ($len % $blockSize);
  $data .= str_repeat(chr($pad), $pad);

  //Encrypt data
  $encData = mcrypt_encrypt('tripledes', $key, $data, 'ecb');

  return base64_encode($encData);

} 
```

这是我的解密功能：

```
function Decrypt($data, $secret)
{
    $text = base64_decode($data);

    $data = mcrypt_decrypt('tripledes', $secret, $text, 'ecb');

    $block = mcrypt_get_block_size('tripledes', 'ecb');
    $pad   = ord($data[($len = strlen($data)) - 1]);

    return substr($data, 0, strlen($data) - $pad);
} 
```

现在我正在使用的密钥，`test`我正在尝试加密`1234567`。我从我正在寻找的加密中获得 base64 输出，但是当我去解密时它什么也不返回（一个空白区域）。

我对加密/解密不是很精通，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T23:22:08.067

感谢任何查看我的问题的人。我想我已经解决了，这是我的完整解决方案。希望它可以帮助遇到类似问题的其他人：

```
function Encrypt($data, $secret)
{    
  //Generate a key from a hash
  $key = md5(utf8_encode($secret), true);

  //Take first 8 bytes of $key and append them to the end of $key.
  $key .= substr($key, 0, 8);

  //Pad for PKCS7
  $blockSize = mcrypt_get_block_size('tripledes', 'ecb');
  $len = strlen($data);
  $pad = $blockSize - ($len % $blockSize);
  $data .= str_repeat(chr($pad), $pad);

  //Encrypt data
  $encData = mcrypt_encrypt('tripledes', $key, $data, 'ecb');

  return base64_encode($encData);

} 
```

这是新的解密功能。

```
function Decrypt($data, $secret)
{

    //Generate a key from a hash
    $key = md5(utf8_encode($secret), true);

    //Take first 8 bytes of $key and append them to the end of $key.
    $key .= substr($key, 0, 8);

    $data = base64_decode($data);

    $data = mcrypt_decrypt('tripledes', $key, $data, 'ecb');

    $block = mcrypt_get_block_size('tripledes', 'ecb');
    $len = strlen($data);
    $pad = ord($data[$len-1]);

    return substr($data, 0, strlen($data) - $pad);
} 
```

在运行 mycrypt_decrypt 函数之前，我必须添加相同的代码以生成正确格式的密钥。

# c++ - 错误：无法绑定 'std::basic_ostream ' 左值到 'std::basic_ostream &&'

> ID：13347530
> 
> 赞同：15
> 
> 时间：2012-11-12T16:30:40.790
> 
> 标签：c++, templates

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:53:58.430

If you want to print object by base pointer - make the ostream operator in base class:

```
class DbValueBase {
  protected:
    virtual ~DbValueBase() {}
    virtual void print(std::ostream&) const = 0;
    friend std::ostream& operator << (std::ostream& os, const DbValueBase & obj)
    {
       obj.print(os); return os;
    }
};

template <typename T>
class DbValue : public DbValueBase {
  public:
    void print(std::ostream& os) const 
    {
        out << dataref();
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:04:03.813

Although the debugger correctly identifies `*(i->second)` as being of the type `DbValue<std::string>`, that determination is made using information that is only available at runtime.

The compiler only knows that it is working with a `DbValueBase&` and has to generate its code on that basis. Therefore, it can't use the `operator<<(std::ostream&, const DbValue<T>&)` as that does not accept a `DbValueBase` or subclass.

* * *

For obtaining the contents of a `DbValue<>` object through a `DbValueBase&`, you might want to loop into the Visitor design pattern.

Some example code:

```
class Visitor {
public:
    template <typename T>
    void useValue(const T& value);
};

class DbValueBase {
public:
    virtual void visit(Visitor&) = 0;
};

template <class T>
class DbValue : public DbValueBase {
pblic:
    void visit(Visitor& v) {
        v.useValue(m_val);
    }
private:
    T m_val;
}; 
```

# android - 参数化 SQLite 查询的奇怪行为

> ID：13347531
> 
> 赞同：4
> 
> 时间：2012-11-12T16:30:41.193
> 
> 标签：android, sql, sqlite, parameterized-query

*（如果您能想到更好的方法，请随时改进问题标题。）*

**问题**：考虑以下 SQLite 查询：

```
SELECT COUNT(*)
  FROM (SELECT 1 AS value UNION SELECT 2 AS value)
 WHERE value <= ? 
```

当我`1`用作参数时，我*希望*查询 yield `1`，但它 yield `2`。为什么会这样？

* * *

**附加信息**：

这是重现问题的最小工作示例（Android）：

```
Cursor c = db.rawQuery(
        "SELECT COUNT(*) " +
        "  FROM (SELECT 1 AS value UNION SELECT 2 AS value) " +
        " WHERE value <= ? ",
        new String[] {String.valueOf(1)});

c.moveToFirst();
Log.i("", "Result: " + String.valueOf(c.getInt(0))); 
```

这*可能*与参数作为字符串传递的事实有关，但是，唉，没有其他方法可以将参数传递给 SQLite API，所以我想我在这里没有做任何“错误”，它是 SQLite 的工作以适当地转换值。在使用查询的非参数化版本时，我还观察到以下情况（这可能与问题相关，也可能不相关）：

```
SELECT COUNT(*)
  FROM (SELECT 1 AS value UNION SELECT 2 AS value)
 WHERE value <= 1              -- yields 1

SELECT COUNT(*)
  FROM (SELECT 1 AS value UNION SELECT 2 AS value)
 WHERE value <= '1'            -- yields 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:40:24.180

文档中说`rawQuery`：

> [...] 您可以在查询的 where 子句中包含 ?s，它将被 selectionArgs 中的值替换。**这些值将绑定为字符串。**

并且，引用[SQLite 文档](http://www.sqlite.org/datatype3.html#comparisons)：

> 根据以下规则，比较的结果取决于操作数的存储类别 [...]
> 
> *   INTEGER 或 REAL 值小于任何 TEXT 或 BLOB 值。

由于 1 和 2*都是*整数，因此它们都小于“1”（TEXT 值）。这就是为什么这个声明：

```
SELECT 2 <= '1' 
```

... 在 SQLite 中返回 1。

您可能应该使用...

```
WHERE value <= CAST('1' AS INTEGER) 
```

... 反而。或者您可以使用所有数学运算符将两个操作数都转换为带有 NUMERIC 存储类的事实`WHERE value <= + ?`，但这不太干净，imo。

请注意，在此查询中：

```
SELECT * FROM myTable WHERE _id < ? 
```

...[的值`?`将使其亲和力调整为`_id` *列*](http://www.sqlite.org/datatype3.html#expraff)的亲和力- 因此它们将作为数字进行比较，如果`_id`是 NUMERIC。

# python - 如何从 Python 脚本执行 Cassandra CLI 命令？

> ID：13347534
> 
> 赞同：2
> 
> 时间：2012-11-12T16:30:44.367
> 
> 标签：python, cassandra, subprocess, command-line-interface

我有一个 python 脚本，我想用它在服务器上进行远程调用，连接到 Cassandra CLI，并执行命令来创建键空间。我所做的尝试之一就是达到这个效果：

```
connect="cassandra-cli -host localhost -port 1960;"
create_keyspace="CREATE KEYSPACE someguy;"
exit="exit;"

final = Popen("{}; {}; {}".format(connect, create_keyspace, exit), shell=True, stdin=PIPE, stdout=PIPE, stderr=STDOUT, close_fds=True)
stdout, nothing = final.communicate() 
```

浏览各种解决方案，我没有找到我需要的东西。例如，上面的代码抛出了“/bin/sh: 1: CREATE: not found”，我*认为*这意味着它没有在 CLI 命令行上执行 CREATE 语句。

任何/所有帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:52:26.793

试试这个。我的机器上没有安装 cassandra-cli，所以我无法自己测试它。

```
from subprocess import check_output
from tempfile import NamedTemporaryFile
CASSANDRA_CMD = 'cassandra-cli -host localhost -port 1960 -f '

def cassandra(commands):
    with NamedTemporaryFile() as f:
        f.write(';\n'.join(commands))
        f.flush()
        return check_output(CASSANDRA_CMD + f.name, shell=True)

cassandra(['CREATE KEYSPACE someguy', 'exit']) 
```

正如您在 pycassa 下面的评论中提到的那样，不能使用[Cassandra 的 Python 客户端，因为它似乎不支持 create 语句。](http://pycassa.github.com/pycassa/)

# android - 更改 ProgressDialog 的背景

> ID：13347539
> 
> 赞同：28
> 
> 时间：2012-11-12T16:31:04.093
> 
> 标签：android, android-layout, android-dialog

我正在尝试更改`ProgressDialog`. 我在网上搜索并找到了各种建议（例如[如何从对话框中删除边框？](https://stackoverflow.com/questions/8051581/how-to-remove-border-from-dialog)），但我无法替换`ProgressDialog`. 相反，我在对话框后面得到了另一个背景（黄色）：

![样式化对话框](../Images/5949278347909348853f72ed7126ab16.png)

我的风格：

```
<style name="StyledDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@drawable/panel_background</item>
</style> 
```

启动的代码`ProgressDialog`：

```
ProgressDialog dialog = new ProgressDialog(this, R.style.StyledDialog);
dialog.setTitle("The title");
dialog.setMessage("The message.");
dialog.show(); 
```

drawable 与 SDK 中包含的 9 补丁相同，我只是更改了颜色。我将非常感谢一些提示我做错了什么。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-16T10:50:47.170

Aleks G（问题下方）的评论指出了正确的方向。对话框的外观由单独的样式 ( `android:alertDialogStyle`) 定义。但是不能将样式直接应用于`ProgressDialog`. 现在，我如何获得黄色背景？

**第 1 步**：定义一个继承自的主题`Theme.Dialog`：

```
<style name="MyTheme" parent="@android:style/Theme.Dialog">
    <item name="android:alertDialogStyle">@style/CustomAlertDialogStyle</item>
    <item name="android:textColorPrimary">#000000</item>
</style> 
```

在那里，您可以定义*整个*窗口的背景颜色（问题中的黄色）、字体颜色等。真正重要的是`android:alertDialogStyle`. 此样式控制问题中黑色区域的外观。

**第 2 步**：定义`CustomAlertDialogStyle`：

```
<style name="CustomAlertDialogStyle">
    <item name="android:bottomBright">@color/yellow</item>
    <item name="android:bottomDark">@color/yellow</item>
    <item name="android:bottomMedium">@color/yellow</item>
    <item name="android:centerBright">@color/yellow</item>
    <item name="android:centerDark">@color/yellow</item>
    <item name="android:centerMedium">@color/yellow</item>
    <item name="android:fullBright">@color/yellow</item>
    <item name="android:fullDark">@color/yellow</item>
    <item name="android:topBright">@color/yellow</item>
    <item name="android:topDark">@color/yellow</item>
</style> 
```

这会将问题中的黑色区域设置为黄色。

**第 3 步**：申请`MyTheme`,**不是**`ProgressDialog`: **`CustomAlertDialogStyle`**

 **```
ProgressDialog dialog = new ProgressDialog(this, R.style.MyTheme); 
```

结果如下：

![样式化进度对话框](../Images/c3a07e386c76f9c5ae351f1b02185d4d.png)

相同的过程适用于`AlertDialog`（它是 的父类`ProgressDialog`）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-01-22T08:45:28.190

你可以试试我的[要点](https://gist.github.com/emreaktrk/9524973)。它基本上在drawable上设置了一个滤色器。

```
import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.widget.ProgressBar;

public class ColoredProgressBar extends ProgressBar {
   public ColoredProgressBar(Context context) {
      super(context);
      if (!isInEditMode())
         init();
   }

   public ColoredProgressBar(Context context, AttributeSet attrs) {
      super(context, attrs);
      if (!isInEditMode())
         init();
   }

   public ColoredProgressBar(Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
      if (!isInEditMode())
         init();
   }

   /**
    * Changes color.
    */
   private void init() {
      getIndeterminateDrawable().setColorFilter(Color.BLUE, android.graphics.PorterDuff.Mode.MULTIPLY);
   }
} 
```**

# javascript - Javascript函数替换而不是写入

> ID：13347540
> 
> 赞同：0
> 
> 时间：2012-11-12T16:31:06.980
> 
> 标签：javascript, html

```
function sethtml(a,b)
{
    var x = document.getElementById("canvas_html").contentDocument; x.write(b);
} 
```

这可行，但我想替换内容而不是写入内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:32:38.737

```
x.innerHTML = b; 
```

这将完全替换`x`普通 DOM 元素的内容。对于 iframe，有关如何清除 iframe 的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/1785040/how-to-clear-the-content-of-an-iframe)然后，您可以简单地使用该`write`方法添加新内容。

# vb.net - Linq - 左外连接 - 数据表

> ID：13347543
> 
> 赞同：3
> 
> 时间：2012-11-12T16:31:26.133
> 
> 标签：vb.net, linq, left-join

我想知道是否有人可以帮助我。我是 LINQ 的新手，但仍在尝试了解它是如何组合在一起的。

我在内存中有以下数据表：

```
currentDataTable    
previousDataTable 
```

我希望 LinQ 查询返回 currentDataTable 中存在但在 previousDataTable 中不存在的任何事务。

下面的 SQL 示例：

```
SELECT Table1.*
FROM Table1 LEFT JOIN Table2 ON Table1.DealReference = Table2.DealReference
WHERE (((Table2.DealReference) Is Null)); 
```

有人可以指导我，如何在 LinQ 中实现相同的目标。

谢谢

BM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:34:52.530

```
Dim result = From c In currentDataTable    
             Group Join p In previousDataTable
             On c.Field(Of String)("DealReference") Equals p.Field(Of String)("DealReference")
             Into DataGroup = Group
             From row In DataGroup.DefaultIfEmpty
             Where row Is Nothing AndAlso c.Field(of String)("Counterparty") <> "*"
             Select c 
```

# c# - 需要帮助从 FileUpload 控件将图像显示到另一个页面

> ID：13347547
> 
> 赞同：-1
> 
> 时间：2012-11-12T16:31:27.930
> 
> 标签：c#, asp.net

我是 ASP.NET C# 的新手。

在这里，我遇到了显示图像的问题。我会解释我在这里做什么以及我遇到问题的地方。

我正在使用 FileUpload 控件创建一个页面。就像其他论坛一样，我有一个按钮预览。当用户点击时，它会显示用户写了什么以及他或她上传了什么图像。

所以我想创建一个名为 Preview.aspx 的页面，它是空白的。其次，我有一个名为 Administration 的页面。在那个页面我有 FileUpload 控件。即使有很少的文本框，标签......其他控件，但这里没有那么有用。我将 FileUpload 控件命名为 fuImage。

我向您展示我在活动 btnPreview_Click 上写的内容。

```
string img;   
if (fuImage.HasFile){
    fuImage.SaveAs(@"C:\Temp\" + fuImage.FileName);
    img = "<img alt=\"sd\" src=\"" + @"C:\Temp\" + fuImage.FileName.ToString() + "\"></img>";
    }else
    img = "";

    Functions.displayOnCommon = "<h3>" + tbSubject.Text + "</h3><hr/>"+img+"<p>" + tbPost.Text + "</p>";
    ClientScript.RegisterStartupScript(this.Page.GetType(), "", "window.open('Preview.aspx','Graph','height=400,width=800');", 
```

我将用户图像保存在服务器上并使用该图像显示为预览。Functions.displayOnCommon 只是在另一个位置声明的简单字符串，它不是那么必要。

这是 Preview.aspx 的后台 C# 代码。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        printPreview(Functions.displayOnCommon);
    }
void printPreview(string texts) {
        Response.Write("<div class=\"preview\">" + texts + "</div>");
    } 
```

它向我显示了整个文本，但不是图像。抱歉我的英文解释不好。我只是在学习英语和 ASP.NET C#。:D

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:49:10.293

您的代码令人困惑，但基本上您无法从浏览器引用本地服务器文件路径。

```
img = "<img alt=\"sd\" src=\"" + @"C:\Temp\" + fuImage.FileName.ToString() + "\"></img>"; 
```

相反，您将需要引用一个服务器端点，该端点依次加载图像并将其流式传输回客户端，并且有多种方法可以实现这一点。

# python - 创建空矩阵 Python

> ID：13347559
> 
> 赞同：14
> 
> 时间：2012-11-12T16:32:07.633
> 
> 标签：python, arrays, vector, matrix, initialization

我只是想用 Python 创建一个空的 10*3*2 数组。

我首先想到了这些，但这不起作用：

```
parameters = [ [ [] * 2 ]*3 ] * 10 
```

这给了我一个由十个向量组成的向量，其中包含三个 [] 元素：

```
[[[], [], []], [[], [], []], [[], [], []], [[], [], []], [[], [], []], 
[[], [], []], [[], [], []], [[], [], []], [[], [], []], [[], [], []]] 
```

也就是说，如果我想访问 parameters[0][0][1] 我超出了界限，而我想要一个维度 2 用于沿第三维的最里面的向量。

然后我想到了这个

```
[ [ [[] * 2] ]*3 ] * 10 
```

我在想`[[] * 2]`现在会给我带来我想要的东西，一个最里面的两个元素向量。我得到

```
[[[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], 
[[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], 
[[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]]] 
```

那么，该怎么做，或者如何逃避这个初始化呢？

Kd rgds。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-12T16:35:33.190

我建议你使用 Numpy 来处理这类事情。它使访问列或行变得更加容易。对于您的用例，您会这样做

```
import numpy as np

matrix = np.zeros((2,3,10))
second_col = matrix[:,1,:] 
```

Numpy 还将更好地处理您的数据，并且它在 Fortran 或 C 中实现了许多矩阵代数，因此当您进行矩阵乘法等时，它在（可能的）未来会更快。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-12T16:41:17.410

首先，你应该在最里面的列表中插入一些东西（比如无）。其次，当您在最外层列表中使用乘法时，它会复制对内部列表的**引用**，因此当您更改一个元素时，您也会在所有其他列表中更改此元素：

```
>> parameters = [ [ [None] * 2 ]*3 ] * 10
>> print parameters
[[[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]],
 [[None, None], [None, None], [None, None]]]
>> parameters[0][0][1]=1
>> print parameters 
[[[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]], [[None, 1], [None, 1], [None, 1]]] 
```

因此，您应该使用列表推导：

```
>> parameters=[[[None for i in range(2)] for j in range(3)] for k in range(10)] 
```

但是，我建议`numpy`按照其他答案之一中的建议使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-12T16:45:32.550

这是您正在做的事情的问题之一。

假设您正在创建一个数组，如下所示：

```
>>> l = [ [ [[] * 2] ]*3 ] * 10
>>> l
[[[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]], [[[]], [[]], [[]]]] 
```

到目前为止似乎还可以。让我们在数组中设置一些东西。

```
>>> l[0][0][0] = 2
>>> l
[[[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]], [[2], [2], [2]]] 
```

哇！我们在其中设置了 1 个项目，但它改变了一切！那是怎么发生的？

好吧，看来我们有 60 个列表对象。然而，我们实际上对一个列表对象有 60 次引用。换一个，全部换。

**TL;DR：**不要在列表列表中使用乘法运算符。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-12T16:35:39.077

我会做这样的事情，使用这个创建的列表是不同的对象（即不同的`id()`）：

```
In [96]: [ [ [ []*2] for _ in range(3)] for _ in range(10) ]
Out[96]: 
[[[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]],
 [[[]], [[]], [[]]]]

In [98]: [id(x) for x in lis]   #all objects are unique
Out[98]: 
[151267948,
 151268076,
 151268492,
 151269164,
 151267276,
 151265356,
 151268140,
 151269036,
 151265644,
 151265964]

In [101]: lis1=[ [ [[] * 2] ]*3 ] * 10

In [102]: [id(x) for x in lis1]    # all objects are same, changing one will change 
                                   # others as well
Out[102]: 
[151278188,
 151278188,
 151278188,
 151278188,
 151278188,
 151278188,
 151278188,
 151278188,
 151278188,
 151278188] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-17T07:35:29.010

```
# Creates an n x n matrix in p
n=int(input())
p=[[[] for x in range(1,10)]for x in range(1,10)]
print(p) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-29T14:32:18.740

做你想做的事情的正确方法是：

```
parameters = [ [ [[]] * 2 ]*3 ] * 10
parameters_mat = eval(str(parameters)) 
```

或者，或者：

```
parameters = [ [ ['0'] * 2 ]*3 ] * 10
parameters_mat = eval(str(parameters)) 
```

这样，你也解决了@btel提出的问题

# arrays - 按顺序下载文件数组 Adob e flex

> ID：13347562
> 
> 赞同：0
> 
> 时间：2012-11-12T16:32:32.003
> 
> 标签：arrays, apache-flex, download, filestream

这段代码是这里有人写的。我正在尝试将它用于一个项目，但它似乎是一次下载所有文件。是否可以按顺序下载数组中的文件？即完成下载 fr array[0] 然后继续下一个文件。这可能吗？请帮忙。

```
 <s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="200"
                   title=" Updater"
                   showStatusBar="false">
 <fx:Style source="Main.css"/>
 <fx:Script>
    <![CDATA[

    private function download_clickHandler(event:MouseEvent):void
     {
        var filearray:Array = new Array();
        filearray[0]="pregame.jpg";
        filearray[1]="01.jpg";
        filearray[2]="02.jpg";
        filearray[3]="03.jpg";
        filearray[4]="04.jpg";
        filearray[5]="05.jpg";
        filearray[6]="06.jpg";
        filearray[7]="07.jpg";
        filearray[8]="08.jpg";
        filearray[9]="09.jpg";
        filearray[10]="10.jpg";
        for (var i:uint; i < filearray.length; i++) {
            var remoteURL = "http://www.domain.com/" + filearray[i];
            var localURL = "C:/dir/" + filearray[i];
            downloadFile(remoteURL, localURL);
        }

        function downloadFile(url, fileName) {
            // Create the stream for the data request
            var urlStream = new URLStream();

            // Used to initiate request for remote file
            var request = new URLRequest(url);

            // Create file stream
            var fileStream = new FileStream();

            // Create a reference to a location on disk
            var file = File.desktopDirectory.resolvePath(fileName);

            // Called as download progresses
            var writeFile = function()
            {
                // Write to file
                if (urlStream.bytesAvailable > 51200)
                {
                    var dataBuffer = new ByteArray();
                    urlStream.readBytes(dataBuffer, 0, urlStream.bytesAvailable);
                    fileStream.writeBytes(dataBuffer, 0, dataBuffer.length);
                }
                return true;
            }

            // Called when download completes
            var finishWriteFile = function()
            {
                // Write to file
                if(urlStream.bytesAvailable > 0)
                {
                    var dataBuffer = new ByteArray();
                    urlStream.readBytes(dataBuffer, 0, urlStream.bytesAvailable);
                    fileStream.writeBytes(dataBuffer, 0, dataBuffer.length);
                }

                // Close streams
                fileStream.close();
                urlStream.close();

                return true;
            }

            // Initiate download
            fileStream.openAsync(file, FileMode.WRITE);
            urlStream.load(request);

            // Add event listeners
            urlStream.addEventListener(Event.COMPLETE, finishWriteFile);
            urlStream.addEventListener(ProgressEvent.PROGRESS, writeFile);
        }
    }
]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:28:23.890

```
private var arrayOfFiles:Array = ["file1.xml", "file2.xml"];
private var currentFile:int = 0;

private function downloadNextFile():void{
    finishWriteFile();
    if(currentFile < arrayOfFiles.lenght){
        var remoteURL = "http://www.domain.com/" + arrayOfFiles[currentFile];
        var localURL = "C:/dir/" + arrayOfFiles[currentFile];
        currentFile++;
        downloadFile(remoteURL, localURL);

        ... your other code
    } else {
        // all files are downloaded
    }
} 
```

然后像这样更改完整的侦听器：

```
 urlStream.addEventListener(Event.COMPLETE, downloadNextFile); 
```

这将等到文件 0 完成后调用 downloadNextFile ，这将是 1... 等等。

编辑：

添加在对 finishWriteFile() 的调用中，因为它也需要调用 onComplete

# javascript - 使用 Spring 将数据输出到数组中时 Javascript 出错

> ID：13347574
> 
> 赞同：0
> 
> 时间：2012-11-12T16:33:03.493
> 
> 标签：javascript, spring, jsp

如果其中一个字符串包含新行，我在使用 Spring 的机制填充字符串数组时遇到问题。

jsp 代码如下所示：

```
function foo() {
    var strs = new Array();
    <c:forEach items"${strItems}" var="s">
        strs.push("${s}");
    </c:forEach>
} 
```

为客户端呈现后，javascript变为：

```
function foo() {
    var strs = new Array();
        strs.push("item1");
        strs.push("item2
with
newlines
in it.");
        strs.push("item3");
} 
```

现在是无效的javascript。我需要将结束线保留在字符串中，因此我无法清理它们的数据。我不确定该怎么做，任何建议都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:49:40.103

有一些库可以进行类型转换：

*   [json-简单](https://code.google.com/p/json-simple/)
*   [格森](https://code.google.com/p/google-gson/)

您所要做的就是让他们序列化您的数组，并将结果作为字符串输出。

# sql - 在 SQL where 子句中使用带有 IsDate 的 case 语句

> ID：13347582
> 
> 赞同：4
> 
> 时间：2012-11-12T16:33:20.333
> 
> 标签：sql, tsql, sql-server-2008-r2

我正在尝试清理以下代码中的 where 子句语句：

```
SELECT
    CONVERT(datetime, [UTC_Time_Stamp], 127) AS TimeStamp
FROM 
    Table 
WHERE 
    CASE 
       WHEN ISDATE([UTC_Time_Stamp]) = 1 
       THEN CONVERT(datetime, [UTC_Time_Stamp], 127) 
       ELSE CAST('1/1/1900' AS datetime) 
    END > CAST('11/09/2012' AS datetime) 
    AND 
       CASE 
          WHEN ISDATE([UTC_Time_Stamp]) = 1 
          THEN CONVERT(datetime, [UTC_Time_Stamp], 127) 
          ELSE CAST('1/1/3000' AS datetime) 
       END < CAST('11/10/2012' as datetime) 
ORDER BY 
    TimeStamp; 
```

`UTC_Time_Stamp`存储为字符串，有时为空。我之前在 where 子句中遇到了转换错误。我按照这个问题的建议修复了错误[here](https://stackoverflow.com/questions/6944116/sql-server-where-clause-where-value-is-convertible)，但我觉得必须有一种更简单的方法才能达到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:54:47.960

您*需要*在`case`语句中进行转换。SQL 是一种描述性语言，不保证处理的顺序。因此，`where`子句不一定发生在其他处理之前，即使它在子查询或 CTE 中也是如此。但是，SQL 确实保证了`case`语句中的处理顺序（不包含具有聚合函数的表达式）。

您可以使用子查询来简化语句：

```
select TimeStamp
FROM (select t.*,
             Case When ISDATE([UTC_Time_Stamp]) = 1 Then CONVERT(datetime, UTC_Time_Stamp, 127) end) as TimeStamp
      from Table t
     ) t
WHERE coalesce(TimeStamp, cast('1/1/1900' as datetime)) > cast('11/09/2012' as datetime) and
      coalesce(TimeStamp, cast('1/1/3000' as datetime)) < cast('11/10/2012' as datetime) 
ORDER BY TimeStamp; 
```

这将转换为时间戳，以获得有效值。然后，您可以在外部查询中使用该变量。

我还鼓励您习惯日期的 ANSI 标准格式（YYYYMMDD 或 YYYY-MM-DD），而不是像“2012 年 11 月 10 日”这样的模棱两可的格式。您可能很清楚，这意味着 2012-11-10 。. . 或者是 2012-10-11 。. . 但格式不明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:51:56.293

我喜欢 CTE，或者你也可以做临时表、表变量或像 @Derek 这样的内联派生表。

基本上，我们将首先获取正确的数据类型，然后更轻松地创建我们的查询：

```
;with CTE as (
    -- Bring back the column as datetime
    select case when isdate(UTC_Time_Stamp) = 1 then cast(UTC_Time_Stamp as datetime) end as UTC_Time_Stamp
    from [Table]
)
-- Simple select with the proper datatype
select convert(varchar(50), UTC_Time_Stamp, 127) as [TimeStamp]
from CTE
-- May still need gt and lt functionality
where UTC_Time_Stamp between cast('11/09/2012' as datetime) and cast('11/10/2012' as datetime) 
```

当您有非日期时，似乎您正在为 TimeStamp 使用一些任意大小的值，考虑到您的比较，这可能是不必要的，所以我删除了它们。

请注意，我在 CTE 中使用 datetime 数据类型并进行比较，仅将其转换为字符串以进行演示。

另请注意，这`between`是包容性的，因此您可能需要返回单独`>`的`<`where 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:40:13.793

做这样的事情更容易（在你认为合适的谓词中使用任何 convert/between 子句）：

```
SELECT CONVERT(datetime, [UTC_Time_Stamp], 127) as TimeStamp
FROM (
  select [UTC_Time_Stamp] 
  from Table 
  WHERE ISDATE([UTC_Time_Stamp]) = 1 
) a
WHERE
  convert(datetime, [UTC_Time_Stamp], 127) between '11/9/2012' and '11/10/2012'
ORDER BY TimeStamp; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-19T12:21:11.207

在这段时间里，这解决了使用临时表别名或子查询的问题，这些查询会减慢数百万条记录的选择速度。

```
select your_column 
from your_table 
where case when ISDATE(your_column) = 1 
           then Cast(your_column as date) 
      end Between '01/01/2016' and '01/01/2017' 
order by your_column 
```

问候

# google-search - 如何使谷歌显示页面预览

> ID：13347588
> 
> 赞同：0
> 
> 时间：2012-11-12T16:33:49.450
> 
> 标签：google-search

该网站显示在谷歌搜索中，但不显示页面预览。相反，它会在预览位置显示公司徽标（主页顶部的图像）。

什么会导致谷歌显示徽标，而不是全页预览？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:14:37.073

几天后，问题自行解决。我猜谷歌重新抓取了网站并更正了预览。或者它可能是通过 ip 活动提供链接的系统的问题，因为我经常访问该站点，并且没有在不同的机器上测试预览......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:36:38.680

你试过研究这个问题吗？也许这会有所帮助。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1062498](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1062498)

# jquery - jQuery Roundabout 限制项

> ID：13347590
> 
> 赞同：1
> 
> 时间：2012-11-12T16:34:20.983
> 
> 标签：jquery, carousel

我试图找到一种方法来限制 Fred LeBlanc 的 Roundabout 插件中显示的项目。当您动态创建大量项目时，轮播可能会开始显得非常拥挤。

理想情况下，我只希望一次显示三个项目，一个在焦点上，一个在左侧和右侧。

只显示三个项目是我可以看到完全控制轮播项目大小的唯一方法。

我尝试过使用几种不同的形状（Freds 的其他插件之一与回旋处一起使用），虽然方形给了我一些成功（只看到三个项目），旋转木马中的项目越来越多，项目向左和向右计算得越来越小。

我还尝试隐藏/显示看不见/进入视野的项目，但无济于事。这是一种草率的做事方式。

# ember.js - EmberJS：找不到属性“操作”

> ID：13347591
> 
> 赞同：3
> 
> 时间：2012-11-12T16:34:21.517
> 
> 标签：ember.js, handlebars.js, pre-compilation

我正在使用来自 Emebr JS 的入门工具包，并在应用程序模板中添加了一个带有 {{action hello}} 的简单锚标记。

我正在使用把手预编译器预编译模板。当我尝试运行它时，它会引发错误。

**未捕获的错误：找不到属性“操作”**

以前我用**ember-1.0.pre.js**做同样的事情，效果很好。但是当我包含新的 ember 库（**ember-1.0.0-pre.2.js**）时，它会抛出这个错误。

在这两种情况下，我都使用**handlebars-1.0.rc.1.min.js**。

谁能帮我解决这个问题。下面列出了我正在使用的车把和库的详细信息。

使用车把预编译器编译的模板。应用程序.handlebars

```
<h1>Hello from Ember.js</h1> 
<a {{action hello}}>Say Hello!</a> 
```

我的 HTML 页面：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
  <script src="js/libs/ember-1.0.0-pre.2.min.js"></script>

  <script src="handlebars/compiled/views.handlebars.js"></script>

  <script src="js/app.js"></script> 
```

views.handlebars.js 包含已编译的车把。

应用程序.js：

```
var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/'
    }),
    hello: function() {
        console.log("Hello and Welcome");
    }
  })
})

App.initialize(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T17:25:20.497

在为 ember 预编译把手视图时，您需要使用 Ember.Handlebars，而不是 Handlebars。我怀疑这可能是问题所在。

更多讨论：[Emberjs Handlebars 预编译](https://stackoverflow.com/questions/9860512/emberjs-handlebars-precompiling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:02:41.203

感谢您的链接，但我开始使用 ember-precompile 而不是车把预编译。[您可以在https://github.com/gabrielgrant/node-ember-precompile](https://github.com/gabrielgrant/node-ember-precompile)找到 ember-precompile

该模块使用较旧的车把和 ember 库，在运行此模块之前必须将库升级到最新版本，然后运行它。可以在“index.js”中修改库的路径。添加最新的库和修改“index.js”对我有用。

# sql - 寻求报告服务身份验证建议

> ID：13347593
> 
> 赞同：2
> 
> 时间：2012-11-12T16:34:26.027
> 
> 标签：sql, sql-server, authentication, reporting-services

我已被分配负责修改当前的报告服务身份验证流程。目的是保持必要的安全级别，并简化授予访问单个报告的维护/配置。

我无权访问域控制器来修改或创建新的 AD 组。我必须与当前存在的组/用户合作。

在身份验证方面，我似乎可以选择使用以下任何一种：

*   Windows 身份验证
*   SQL Server 身份验证。

报表服务器和报表数据库都将驻留在同一台服务器上。考虑到这一点，我知道 Windows 身份验证可能是更好的解决方案，因为不需要维护单独的 SQL Server 用户表（及其密码）。在报表服务器上部署报表后授予对报表的访问权限，只需将用户/组添加到报表中（在浏览器中加载报表并访问 Properties\Security 选项）。

使用 SQL Server 身份验证的第二个选项似乎不像使用 Windows 身份验证那样合适，因为报表服务器和报表数据库位于同一个框上。

我正在使用 SQL Server 2000 数据库。我安装的报告服务版本是 Microsoft SQL Server 2008。

请有人让我知道我的想法是否正确（即我应该进行 Windows 身份验证）。干杯。

吉米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:48:21.043

Sql Server 身份验证不是连接到 SSRS 的用户的选项。这**是**SSRS 连接到将获取其数据的数据库的一个选项。

所以底线，是的，您需要使用 Windows 身份验证来连接到 SSRS 的用户。您可以在 SSRS 中使用特殊用户名，例如“Authenticated Users”或“Everyone”，以允许广泛访问。

我了解您无权访问 AD，但管理用户帐户在 AD 组中的成员身份比在 SSRS 中跟踪和管理个人访问权限要容易得多。

但如果没有 AD 访问权限，您仍然可以将 Windows/AD 帐户添加到报告权限并使用这些权限。您只需创建一个更复杂的系统，因为您需要分别管理每个人的权限。您可以将报告分组到文件夹中并保护文件夹：报告可以继承该安全性。

# jakarta-ee - 创建持久的 jcr 会话

> ID：13347595
> 
> 赞同：0
> 
> 时间：2012-11-12T16:34:33.270
> 
> 标签：jakarta-ee, jackrabbit, jcr, content-repository

有没有办法创建一个在整个应用程序生命周期内保持活动状态的持久 jcr 会话？背景是我想将此会话用于 JCR EventListener，它会更新我对任何传入事件的视图。因此，我认为该侦听器必须始终与会话连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:19:44.350

是的，您确实可以创建一个常规会话，使用它来注册您的事件侦听器，并在必要时使其保持活动状态。

实际上，事件侦听器只会在用于注册侦听器的会话仍然存在时才收到事件通知。当然，长期存在的会话可能会阻止存储库关闭，所以当您的应用程序或服务关闭时，请务必注销您的会话。

一种常见的最佳实践是让听众做尽可能少的工作。侦听器被异步调用（意味着存储库不会等到侦听器完成后才完成更改），这意味着这很可能在单独的线程上完成，如果需要很长时间才能完成，侦听器可能会导致资源问题。因此，如果工作不是微不足道的，请通过（例如）将工作提交到队列并单独处理队列来尽快离开线程。

另一个最佳实践是让听众*不要*使用用于注册它们的同一会话来读取或写入内容。JCR 会话不需要是线程安全的，并且大多数实现[不实现并发](http://jackrabbit.apache.org/concurrency-control.html)。这意味着它们不能被多个线程安全地使用，即使这只需要读取内容。（某些实现确实保证 Sessions[是线程安全](https://docs.jboss.org/author/display/MODE/Sessions+and+Listeners)的，但最好避免依赖该特征，除非您想要或需要锁定该实现。）

总之，如果监听器需要做任何工作，请离开调用线程并使用单独的 Session 来读取或更新内容。

# ruby-on-rails - Rails：使用局部变量作为图像路径

> ID：13347602
> 
> 赞同：3
> 
> 时间：2012-11-12T16:34:55.100
> 
> 标签：ruby-on-rails, ruby, views, helpers

我有一个简单的 cms，基本上我有一个带有图像的酱汁的详细视图。在数据库表中，我存储了图片的 URL。当我想显示图像并将变量放在 image_tag url 应该去的地方时，程序会抛出错误。我该怎么做呢？

> ```
> <tr>
>   <th>Picture</th>
>   <td><%= image_tag("sauces/sauces_piri.png") %></td>
> </tr> 
> ```

那是手动输入的有效的URL。完全相同的字符串存储在数据库中名为 pic_url 的字段中。我已经有一个存储酱对象的变量。如何放置酱汁字段，而不是直接 URL。

我努力了

> ```
> <tr>
>   <th>Picture</th>
>   <td><%= image_tag("#{sauce.pic_url}") %></td>
> </tr> 
> ```

这不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:57:35.920

我基本上解决了这个问题。问题是酱汁是一个实例变量而不是标准变量。因为我没有`@`在酱汁之前使用符号，所以它无法识别变量。

所以正确的代码如下：

> ```
>  <td><%= image_tag("#{@sauce.pic_url}") %></td> 
> ```

希望这可以帮助

# javascript - 为音频元素配置 src 选项时，错误 0x80004002 接口不存在。(JS)

> ID：13347603
> 
> 赞同：1
> 
> 时间：2012-11-12T16:34:57.520
> 
> 标签：javascript, html

我在 Visual Studio 2012 中工作。当我尝试为音频元素设置 src 时，会发生此错误。

```
function loadFile(event) {
    ...
    parent.message2.innerHTML = Windows.Storage.KnownFolders.videosLibrary.getFileAsync(a);
    parent.player.src = URL.createObjectURL(Windows.Storage.KnownFolders.videosLibrary.getFileAsync(a));
    //parent.player.play(); 
} 
```

HTML 元素：

```
<audio id="player" controls></audio> 
```

所以，名称在 var "a" 中的文件确实存在，我可以通过 "displayName" 和 "displayType" 获取它的名称和类型。但是当我尝试将此文件设置为 src 选项时，我看到错误：“接口不存在”。

是的，脚本从 iframe 开始，但音频元素位于主页上。但这不是问题，我可以轻松地将任何信息从 iframe 发送到主页（例如，发送到 id="message2" 的元素）。

我尝试加载 m4a 文件。本播放器支持此格式。

# c# - 保存 windows phone 应用程序的用户信息

> ID：13347606
> 
> 赞同：0
> 
> 时间：2012-11-12T16:35:04.823
> 
> 标签：c#, silverlight, windows-phone-7, isolatedstorage

我遇到了一些麻烦，不知何故我得到一个“不允许的异常”，我似乎无法弄清楚有什么问题我知道答案很简单，但我真的无法发现我的代码有什么问题......它当我尝试向新创建的文件写入内容时发生，我可以想象它在尝试读取文件时也会发生......任何信息都会被确认......提前谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text; // ny
using System.Net;
using System.Collections.Specialized;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;
using Microsoft.Phone.Shell;
using System.IO; // ny
using System.IO.IsolatedStorage; // ny

namespace SmartSence
{
    public partial class MainPage : PhoneApplicationPage
    {
        private static UTF8Encoding enc = new UTF8Encoding();
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            if (CreateStore().FileExists("Userdata\\Userdata.txt"))
            {
                mail.Text = ReadFile(CreateStore());
            }
        }

        private void minknap_Click(object sender, RoutedEventArgs e)
        {

            string newusername;
            newusername = Username.Text;
            mytext1.Text = newusername;

            string igen;
            igen = "&password=";

            string newpassword;
            newpassword = mypassword.Password;
            mypasswordblock.Text = newpassword;

            WebBrowserTask webBrowserTask = new WebBrowserTask();

            webBrowserTask.Uri = new Uri("http://www.smartsence.dk/winindexcheck.php?id=" + mytext1.Text + igen + mypasswordblock.Text, UriKind.Absolute);

            webBrowserTask.Show();

        }
        private void signin_Click(object sender, RoutedEventArgs e)
        {

            string signin;
            signin = mail.Text;
            signintext.Text = signin;

            string igen;
            igen = "&password=";

            string newpassword;
            newpassword = mail.Text;
            signintext.Text = newpassword;

            if (!CreateStore().DirectoryExists("Userdata"))
            {

                CreateStore().CreateDirectory("Userdata");
                if (!CreateStore().FileExists("Userdata\\data.txt"))
                {
                    CreateStore().CreateFile("Userdata\\data.txt");
                }
                IsolatedStorageFileStream stream = new IsolatedStorageFileStream("Userdata\\Userdata.txt", FileMode.Create, CreateStore());
                WriteToFile(CreateStore(), signin);

            }

            WebBrowserTask webBrowserTask = new WebBrowserTask();

            webBrowserTask.Uri = new Uri("http://www.smartsence.dk/winindexcheck.php?id=" + signintext.Text + igen + signintext.Text, UriKind.Absolute);

            webBrowserTask.Show();

        }
        private void minknap2_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/Info.xaml", UriKind.Relative));
        }

        private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
        {

        }

        private void info_Click(object sender, EventArgs e)
        {
            MessageBox.Show("SmartSence App 4.0 - Is free to use, it´s has never been easier to navigate around the web. Buy the app and get free VIP status forever - Please support us :) ");
        }
        private void VIP_Click(object sender, EventArgs e)
        {
            WebBrowserTask webBrowserTask = new WebBrowserTask();

            webBrowserTask.Uri = new Uri("http://www.smartsence.dk/winindexappvipcheck2.php", UriKind.Absolute);

            webBrowserTask.Show();
        }

        private void image1_ImageFailed(object sender, ExceptionRoutedEventArgs e)
        {

        }
        #region NewMethods
        private IsolatedStorageFile CreateStore()
        {
            IsolatedStorageFile lager = IsolatedStorageFile.GetUserStoreForApplication();
            return lager;
        }

        private void WriteToFile(IsolatedStorageFile storeFile, string content)
        {
            IsolatedStorageFileStream fileStream = storeFile.OpenFile("Userdata\\Userdata.txt", FileMode.Open, FileAccess.Write); // Exception: not allowed on IsolatedStorageFile
            using (StreamWriter writer = new StreamWriter(fileStream))
            {
                writer.WriteLine(content);
            }
        }

        private string ReadFile(IsolatedStorageFile storeFile)
        {
            IsolatedStorageFileStream fileStream = storeFile.OpenFile("Userdata\\Userdata.txt", FileMode.Open, FileAccess.Read);
            using (StreamReader reader = new StreamReader(fileStream))
            {
                return reader.ReadLine().Trim();
            }
        }
        private void mail_Tap(object sender, GestureEventArgs e)
        {
            mail.Text = string.Empty;
        }
        #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:05:08.130

我认为问题是你没有关闭你的`IsolatedStorageFileStream`，所以文件仍然是打开的，因此不能被写入，因此抛出这个异常。您应该确保将您的读取和写入包装在使用或调用`Dispose`自己中。

```
 public MainPage()
        {
            InitializeComponent();
            if (CreateStore().FileExists("Userdata\\Userdata.txt"))
            {
                mail.Text = ReadFile(CreateStore()); //opens file and never closes it.
            }
        } 
```

要解决此问题，您应该使用`using`语句。

```
private void WriteToFile(IsolatedStorageFile storeFile, string content)
        {
            using (IsolatedStorageFileStream fileStream = storeFile.OpenFile("Userdata\\Userdata.txt", FileMode.Open, FileAccess.Write){ // Exception: not allowed on IsolatedStorageFile
            using (StreamWriter writer = new StreamWriter(fileStream))
            {
                writer.WriteLine(content);
            }
        }
}

        private string ReadFile(IsolatedStorageFile storeFile)
        {
            using(IsolatedStorageFileStream fileStream = storeFile.OpenFile("Userdata\\Userdata.txt", FileMode.Open, FileAccess.Read){
            using (StreamReader reader = new StreamReader(fileStream))
            {
                return reader.ReadLine().Trim();
            }
        }
} 
```

# java - Spring Metro 集成 cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素 'wss:binding' 的声明

> ID：13347609
> 
> 赞同：3
> 
> 时间：2012-11-12T16:35:20.840
> 
> 标签：java, web-services, spring, spring-integration, java-metro-framework

我尝试将 Metro Web 服务与 Spring 集成。但我的错误`applicationContext.xml`

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:ws="http://jax-ws.dev.java.net/spring/core"
        xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://jax-ws.dev.java.net/spring/core 
                            http://jax-ws.dev.java.net/spring/core.xsd
                            http://jax-ws.dev.java.net/spring/servlet 
                            https://jax-ws.dev.java.net/spring/servlet.xsd">
//Some beans

//!!!!!!!!ERROR
    <wss:binding url="/ws">
        <wss:service>
            <ws:service bean="#newsWebService" />
        </wss:service>
    </wss:binding>

    <bean id="newsWebService" class="com.news.webservice.NewsWebService">
        <property name="newsBo" ref="newsBo"/>
    </bean>

</beans> 
```

错误信息：

```
Multiple annotations found at this line:
    - cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'wss:binding'.
    - schema_reference.4: Failed to read schema document 'https://jax-ws.dev.java.net/spring/servlet.xsd', because 1) could 
     not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

我添加 lib x-bean-spring-3.7.jar 和 jaxws-spring-1.8.jar

我还检查了 jaxws-spring-1.8.jar 中的 spring.schemas 并得到

```
# See XBEAN-60\. To work around the overwriting issue, this file is maintained manually.
# this file is used by Spring to resolve resources locally.
# the key is the system ID and the value is the actual file location in this jar.
http\://jax-ws.dev.java.net/spring/core.xsd=spring-jax-ws-core.xsd
http\://jax-ws.dev.java.net/spring/servlet.xsd=spring-jax-ws-servlet.xsd
http\://jax-ws.dev.java.net/spring/local-transport.xsd=spring-jax-ws-local-transport.xsd 
```

我根据这个包括了shemas。

**#UPDATED** 我发现了一些奇怪的东西。我在`spring-beans-3.2.0.M1.jar`spring.shemas打开

```
http\://www.springframework.org/schema/beans/spring-beans-2.0.xsd=org/springframework/beans/factory/xml/spring-beans-2.0.xsd
http\://www.springframework.org/schema/beans/spring-beans-2.5.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd
http\://www.springframework.org/schema/beans/spring-beans-3.0.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd
http\://www.springframework.org/schema/beans/spring-beans-3.1.xsd=org/springframework/beans/factory/xml/spring-beans-3.1.xsd
http\://www.springframework.org/schema/beans/spring-beans-3.2.xsd=org/springframework/beans/factory/xml/spring-beans-3.2.xsd
http\://www.springframework.org/schema/beans/spring-beans.xsd=org/springframework/beans/factory/xml/spring-beans-3.2.xsd 
```

我得到 applicationContext.xml 没有错误只是`http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd`下一对

请帮我找出原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T10:35:56.423

**编辑：先前的答案已被 eclipse 接受，但在运行时触发了异常。这是我的最终工作配置**

使用它，xsd 模式已被移动：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:ws="http://jax-ws.dev.java.net/spring/core"
       xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"

    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
            http://jax-ws.dev.java.net/spring/core http://jax-ws.java.net/spring/core.xsd
            http://jax-ws.dev.java.net/spring/servlet http://jax-ws.java.net/spring/servlet.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd"
       default-lazy-init="true"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-28T04:50:15.107

java.net 托管网站管理员管理员通过更改托管路径引起了问题。

将所有 jax-ws.dev.java.net 更改为 jax-ws.java.net，错误在 2014 年 8 月 28 日消失。

看来，成千上万的开发人员的时间因此而被浪费了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T04:09:38.187

尝试更换线路： [http://www.springframework.org/schema/beans/spring-beans.xsd](http://www.springframework.org/schema/beans/spring-beans.xsd)因为它冲突。有类似配置的相同问题借用互联网上的一个示例，这解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T08:45:29.200

applicationContext.xml 的内容的头部应该是：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:ws="http://jax-ws.dev.java.net/spring/core" xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
xsi:schemaLocation=
    "http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
    http://jax-ws.dev.java.net/spring/core
    http://jax-ws.java.net/spring/core.xsd
    http://jax-ws.dev.java.net/spring/servlet
    http://jax-ws.java.net/spring/servlet.xsd"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T07:20:06.167

问题是因为不存在 URL [http://jax-ws.dev.java.net/](http://jax-ws.dev.java.net/)。

该项目已搬迁并可能停止。然后，我建议另一种解决方案。

1.  从这个 URL [https://repo1.maven.org/maven2/org/jvnet/jax中的源 jar 下载到本地文件（spring-jax-ws-core.xsd，spring-jax-ws-servlet.xsd） -ws-commons/spring/jaxws-spring/1.9/jaxws-spring-1.9-sources.jar](https://repo1.maven.org/maven2/org/jvnet/jax-ws-commons/spring/jaxws-spring/1.9/jaxws-spring-1.9-sources.jar)
2.  我已经放置在路径“W:/dev/Spring4WebApp/”中，你可以选择另一个。我建议您将它们上传并发布到您公司的任何自己的服务器上。
3.  使用以下行修改 appContext：

> ```
>  <beans xmlns="http://www.springframework.org/schema/beans"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xmlns:c="http://www.springframework.org/schema/c" 
> xmlns:p="http://www.springframework.org/schema/p"
> xmlns:context="http://www.springframework.org/schema/context"
> xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
> xmlns:ws="http://jax-ws.dev.java.net/spring/core"
> xsi:schemaLocation="http://www.springframework.org/schema/beans
> http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
> http://www.springframework.org/schema/context
> http://www.springframework.org/schema/context/spring-context-4.1.xsd
> http://jax-ws.dev.java.net/spring/core
> file:///W:/dev/Spring4WebApp/spring-jax-ws-core.xsd
> http://jax-ws.dev.java.net/spring/servlet
> file:///W:/dev/Spring4WebApp/spring-jax-ws-servlet.xsd"> 
> ```

注意以“file:///”开头的行。这些行引用您的本地文件。瞧！它运行！

# php - 比较具有反斜杠的 php 变量和 mysql 表元素

> ID：13347615
> 
> 赞同：2
> 
> 时间：2012-11-12T16:35:32.920
> 
> 标签：php, mysql

我正在尝试为我本地计算机上的音乐创建一个在线数据库。我的库中已经有一个包含每首歌曲的表，并且想创建一个不同的表，其中仅包含作为我的播放列表之一的歌曲 ID（当我将歌曲添加到我的主表时自动递增）。

据我所知，匹配歌曲的唯一 100% 可认证方法是通过我磁盘上的位置（ C:\Users\username\Music\iTunes\iTunes Media\Music\Jonathan Coulton 和 GLaDOS\Portal\128 128 Still Alive Duet.mp3 ) 为例。在我的 PHP 代码中，我将歌曲位置放入一个变量中，如果我相对于我的 MYSql 表中的等效歌曲位置打印它，它们完全匹配，但是当我尝试使用它运行 select 语句时，它给了我一个错误。据我所知，这是由位置信息中的反斜杠引起的。

这是我正在使用的选择语句，

```
SELECT id FROM itunes WHERE Location=$locationval 
```

其中 $locationval 是当前歌曲的位置，id 是我的主表中自动递增的 id，iTunes 是我的主表。

有没有办法解决？由于我是初学者，反斜杠真的是问题吗？

这里的参考是导入播放列表的完整代码，它使用 PEAR 的 DB 插件（一个 PHP 扩展）。

```
<?php

// define table name
define('TABLE_NAME', 'playlist');

// create database connection
require_once('DB.php');
$dsn = 'mysql://username:password@localhost/itunes';
$DB =& DB::connect($dsn);
if (DB::isError($DB)) {
  die($DB->getMessage());
}
$DB->setFetchMode(DB_FETCHMODE_ASSOC);

// load text file
$file = file_get_contents('Portal.txt');

// explode on new line
$file = explode("\r", $file);
set_time_limit(0);

// loop through each line in the file
foreach ($file as $key => $value) {

  // explode on tab to get column list
  $exploded = explode("\t", $value);

  // check for first row, which contains column headers
  if ($key == 0) {

 }
   else{

    if(count($exploded)>3)
    {
    $locationval=$exploded[26];
  echo $exploded[26];
  echo "<br />";
  $result = mysql_query("SELECT id FROM itunes WHERE Location=$locationval");
  //$result = mysql_query("SELECT * FROM itunes WHERE id=8292");
set_time_limit(0);
$row = mysql_fetch_row($result);
  //test statements to see if the query worked
  echo "Test: ";
  echo $row['id'];
  echo $row['Location'];    
  echo "<br />";

  }
  }

}
?> 
```

这是从这里的代码修改的：http: [//ericlondon.com/posts/208-exporting-itunes-data-into-mysql-and-creating-sql-to-show-top-rated-albums](http://ericlondon.com/posts/208-exporting-itunes-data-into-mysql-and-creating-sql-to-show-top-rated-albums)

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:54:31.697

在 mysql 中将反斜杠用作字符串文字时，您需要转义反斜杠，因此只需替换以下行：

```
$result = mysql_query("SELECT id FROM itunes WHERE Location=$locationval"); 
```

对于这个：

```
$result = mysql_query("SELECT id FROM itunes WHERE Location='". str_replace('\\','\\\\',$locationval) . "'"); 
```

那应该做你想做的事。

# qtwebkit - fancybox2 将 QTWebKit 确定为触摸设备

> ID：13347617
> 
> 赞同：1
> 
> 时间：2012-11-12T16:35:42.813
> 
> 标签：qtwebkit, fancybox-2

Fancybox 2 使用此代码

```
isTouch   = document.createTouch !== undefined 
```

确定浏览器是否为触摸设备。这似乎是 QTWebKit 的一个问题，因为这个函数存在。另一种方法也失败了，因为这个属性是 null 而不是 undefined：

```
document.documentElement.ontouchstart 
```

所以我检查了两者

```
isTouch   = document.createTouch !== undefined && document.documentElement.ontouchstart != null 
```

还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T04:50:54.170

我一直在使用

```
window.isTouch = !!('ontouchstart' in window && window.ontouchstart != null); 
```

这适用于 QtWebkit 和 Chrome 的 Webkit。我还没有做进一步的浏览器测试。

# regex - XSD 模式中的正则表达式：两个组合元素的混合和最大大小

> ID：13347618
> 
> 赞同：5
> 
> 时间：2012-11-12T16:35:46.090
> 
> 标签：regex, xsd

我想为 XSD 类型创建一个限制，只允许一个大小为 0 到 64 的元素、一个点和另一个大小为 0 到 64 的元素。我试过这个，但没有成功。

```
<xs:simpleType name="myString_Type">
        <xs:restriction base="xs:string">
            <xs:pattern value="^([a-zA-Z\-]){0-64}.$([a-zA-Z\-]){0-64}"/>
        </xs:restriction>
</xs:simpleType> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:01:47.050

`^`并且`$`不用于 XSD 中的正则表达式 - 它始终从头到尾匹配，就好像它们在那里一样。因此，只需省略它们：

```
[a-zA-Z\-]{0,64}\.[a-zA-Z\-]{0,64} 
```

并转义`.`（或使用 NullUserException 所说的字符类）。

来自[XML Schema 第 2 部分：数据类型](http://www.w3.org/TR/xmlschema-2/#regexs)规范：

> 与一些流行的正则表达式语言（包括那些由 Perl 和标准 Unix 实用程序定义的语言）不同，这里定义的正则表达式语言隐式地将所有正则表达式锚定在头部和尾部，因为·pattern· 中正则表达式最常见的用途是匹配整个文字。

他们的例子是使用`A.*Z`不`^A.*Z$`

因为`^`and`$`不是特殊字符，它只会尝试在您的 xml 文档中匹配它们。

*据说unix是不兼容的正则表达式语法的集合，所以他们不遵循unix标准，就是遵循unix传统。*

* * *

您可以在以下位置测试此示例：[http](http://www.utilities-online.info/xsdvalidation/) : //www.utilities-online.info/xsdvalidation/（来自 NullUserException 的测试实例）

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="eg" type="myString_Type"/>

  <xs:simpleType name="myString_Type">
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z\-]{0,64}\.[a-zA-Z\-]{0,64}"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>

<eg>something.something-else</eg> 
```

# ms-office - 将时间线从 Microsoft Project 2013 导出到 Word

> ID：13347623
> 
> 赞同：1
> 
> 时间：2012-11-12T16:36:05.127
> 
> 标签：ms-office, ms-project

是否可以在**Microsoft Word**等其他应用程序中从 Microsoft **Project 2013****导出时间线**？我已经能够对**Project 2010做同样的事情，但我在****Project 2013**上找不到任何方法。

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T17:03:54.887

您可以使用鼠标选择时间线或其中的一部分。然后按 ctrl-c 复制，按 ctrl-v 粘贴到 word 中。******

# visual-studio - 如何更改 Visual Studio 中的默认控件值？

> ID：13347624
> 
> 赞同：0
> 
> 时间：2012-11-12T16:36:05.373
> 
> 标签：visual-studio

无论如何要更改控件的默认值，以便下次我拖放它们时，它们具有新值。

例如，如果我更改文本框的默认大小和字体，并且下次拖放时，它具有这些新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:41:23.000

无法设置默认值（据我所知），但您可以复制现有控件。按住 Control 键或通常的复制/粘贴时拖放。新控件将是现有控件的精确副本，名称标识符与现有名称中添加的数字不同。

您还可以同时克隆多个控件，方法是在复制之前将它们全部选中。

# powershell - 在 Windows Powershell 中使用用于 .Net / UniObjects 的 U2 工具包？

> ID：13347631
> 
> 赞同：1
> 
> 时间：2012-11-12T16:36:35.323
> 
> 标签：powershell, u2, unidata, uniobjects, u2netdk

我是芝加哥一所大学的开发人员，在 Unidata 7.2 上支持 Ellucian/Datatal 同事。我们最近从 Unix 上的 Unidata 转换为 Windows Server，并且有许多必须转换为新操作系统的提取 cron 作业。在那次转换期间，我被介绍到 MS Windows Powershell 脚本环境，并一直在使用它来自动化许多程序上碎片化的任务，这些任务被拆分并在不同的机器上异步执行。

我们正在实施基于 MS Sharepoint 的 Ellucian 门户，对于该任务，我们需要运行一个夜间作业，从我们的 HR 数据中刷新 MS Active Directory 属性。为了做到这一点，我整理了一个 Powershell 脚本来获取一个平面文件并更新 AD。然而，Powershell 脚本的美妙之处在于您可以在本地使用 .Net 框架对象。多年来，我使用 VB UniObjects 开发了许多应用程序和实用程序，这似乎是利用 Powershell 界面并将提取步骤直接构建到 AD 更新脚本中的绝佳机会，因此整个过程可以作为单个集成执行应用。

我已经从 Rocket 软件下载并安装了用于 .Net 的 U2 工具包，但我遇到了一个障碍，因为 Powershell 引用和实例化语法与任何 Visual Studio 语言都不同。尽管我已经取得了一些进展，并且能够与 U2.Data.Client 命名空间建立 U2 ADO 连接，但我仍然无法正确实例化 Native UniObjects U2.Data.Client.UO 对象。

我确信这只是正确引用库的一个简单问题，但我以前从未真正使用过 .Net 框架，而且我似乎找不到任何在 Powershell 中使用 U2 .Net 库的权威示例. 这个论坛似乎是一个很好的资源，我取得的进展归功于我在这里找到的帖子。如果有人对 U2 和 Powershell 有任何想法或专业知识，我很想听听您是否对如何使魔术发生有意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:35:35.410

谢谢你问这个问题。您可以从 Windows PowerShell 非常轻松地调用 U2 Toolkit for .NET (U2NETDK)。请参阅随附的屏幕截图。我做了以下事情：

1.  为 .NET 安装 U2 工具包
2.  请参阅已安装的 .NET U2NETDK 程序集
3.  创建连接对象
4.  创建命令对象
5.  打开连接
6.  执行 ADO.NET 命令 (SELECT FIRST_NAME, SURNAME FROM MEMBERS)
7.  获取数据。在 PowerShell 上写入数据
8.  关闭连接。

如果您想使用 UO.NET 功能并且您想使用读取文件、UniCommand、SelectList，请参考 U2.Data.Client.UO.UniFile、U2.Data.Client.UO.UniCommand 等。

我希望这个例子也能帮助其他 U2 .NET 用户。

![在此处输入图像描述](../Images/255e5115f02c4158746cc6e4c63ae48e.png)

请参阅此示例：http: [//blogs.technet.com/b/threekings/archive/2008/07/18/ado-net-in-powershell-update-sql-data-example-sample.aspx](http://blogs.technet.com/b/threekings/archive/2008/07/18/ado-net-in-powershell-update-sql-data-example-sample.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:02:08.643

感谢您试用 U2NETDK 的 ADO.NET 和 windows PowerShell。对于 Native Access (Uniobjects API)，您不需要 UODOTNET.DLL。我们在 U2NETDK 中嵌入了 Uniobjects API。因此，您将引用 U2.Data.Client 和 U2.Data.Client.UO 命名空间。请参阅下面的脚本和屏幕截图。

```
Add-Type -Path "C:\Program Files (x86)\Rocket Software\U2 Toolkit for .NET\U2 Database Provider\bin\.NETFramework\v2.0\U2.Data.Client.dll"

$Connection = New-Object U2.Data.Client.U2Connection

$Connection.ConnectionString = "Database=XDEMO;User ID=administrator;Password=pass;Server=9.72.199.235;Persist Security Info=True;ServerType=universe;AccessMode=Native"

$Connection.Open()

$Session = $Connection.UniSession

$UniSelectList  =$Session.CreateUniSelectList(2);

$UniFile  = $Session.CreateUniFile("PRODUCTS");
$UniSelectList.Select($UniFile);

while (!$UniSelectList.LastRecordRead)
{
$sRecID = $UniSelectList.Next();
write-host $sRecID
}
$Connection.Close() 
```

![在此处输入图像描述](../Images/f348d166fc9fd00a1c107f9b39c4fccc.png)

# c# - 确定高处理器使用率的来源

> ID：13347638
> 
> 赞同：4
> 
> 时间：2012-11-12T16:37:02.493
> 
> 标签：c#, winforms, .net-3.5, cpu-usage, icq

我已将 ICQ# 库（它是开源的）添加到我的应用程序中。但是如果我通过它连接到 ICQ 服务器，它会增加 CPU 的使用率（高达 30%）。所以 ICQ# 库中的某些东西正在大量使用 CPU。但我不知道如何确定它是什么并减少CPU的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:48:31.450

如果它是开源的并且您已将代码添加到您的项目中；使用附加的探查器运行它。

*   [http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)
*   [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:58:37.387

最简单的方法是这样的：

1.  在调试器中运行您的程序。
2.  并在某个时候闯入调试器。
3.  无论您身在何处，都可以查看调用堆栈
4.  重复步骤 2-3

只做两到三遍就可以很好地了解大部分执行时间都花在了哪里。如果大部分执行时间都花在一个函数上，那么几乎每次您闯入调试器时，该函数都会在调用堆栈上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T12:15:38.107

我在 'icq_sharp\IcqSharp.Util\Timer.cs' 文件中找到它。见功能：`private void DoWorker()`。有一个没有延迟的循环。只需添加`Thread.Sleep(10);`

# msbuild - 是否可以在命令行上指定引用另一个属性的 MSBuild 属性？

> ID：13347644
> 
> 赞同：2
> 
> 时间：2012-11-12T16:37:33.100
> 
> 标签：msbuild, msbuild-4.0

例如，给定一个项目，在不明确指定项目名称的情况`quickie.vcxproj`下构建它：`c:\output\c`

`msbuild /t:Rebuild /p:Configuration=Debug /p:PlatformToolset=v100 quickie\quickie.vcxproj /p:OutDir=c:\output\c\$(MSBuildProjectName)\`

结果是一个目录`c:\output\c\$(MSBuildProjectName)`

要求的结果是：`c:\output\c\quickie`

尝试与`c:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:20:01.857

编号超过三十个字符

# php - 为什么我应该在单独的文件中使用 MySQL 密码？

> ID：13347645
> 
> 赞同：2
> 
> 时间：2012-11-12T16:37:33.327
> 
> 标签：php, mysql

也许是幼稚的问题，但我读过我应该将我的 MySQL 数据库密码和数据库名称保存在受限制文件夹中的单独文件中，但为什么呢？当我使用开发人员工具检查网页时，我看不到 PHP 代码，我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:39:40.363

Well, firstly, it gives you a single place to set the password so you're not having to edit multiple files if/when the details change

Secondly, you need to consider other users on your system - is it possible that you might want to allow another developer to make changes to your site code without revealing your mysql login details? If so, you can deny them access to that folder but still allow them to edit the rest of the code base.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:44:41.070

1.  在某些情况下，服务器错误/错误配置导致 PHP 代码显示在用户的浏览器中（参见：几年前的 Facebook）。因此，许多开发人员将他们的 MySQL 连接详细信息放在一个文件中，该文件位于 Web 根目录之外。
2.  [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则：不要重复自己。即没有重复代码。这使得代码更易于管理。想象一下，仅仅因为您的 MySQL 密码更改而不得不编辑 500 个 PHP 文件是多么困难？如果您必须连接到不同的 MySQL 服务器怎么办？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:49:05.197

实际上，我们建议将每个凭据放在单独的文件中，而不仅仅是 mysql 用户名和密码。

1.  这是因为您的生产服务器可能有不同的密码和用户名。因此，要在任何地方反映变化，`require`最好在您的文件中使用单个文件和它。
2.  使用源代码控制，我们可以轻松地忽略它，以便团队成员之间不共享密码。
3.  `700`我们主要需要对该文件给予特殊许可。
4.  遵循 DRY 是很好的做法（不要重复自己的原则）

# iis-7 - 一个非常简单的 IIS7 重定向到不同的路径

> ID：13347648
> 
> 赞同：0
> 
> 时间：2012-11-12T16:37:38.997
> 
> 标签：iis-7, url-rewriting

多年来，我一直在 www.mysite.com/myfolder/ 拥有一个站点。我开发了一个新版本，只想删除 /myfolder，以便该站点为 www.mysite.com 的所有页面提供服务。

示例：www.mysite.com/myfolder/mypage.htm 将永久重定向到 www.mysite.com/mypage.htm

如何使用 IIS7 中的 URL 重写模块进行配置？我从一条空白规则开始，但后来迷路了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:29:08.210

您可以使用 IIS 管理 UI 或直接编辑 web.config。使用 web.config 中看起来像这样的部分，您将重定向*所有内容*（也包括图像），这可能是您想要的。

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="test" stopProcessing="true">
                <match url="^myfolder/(.*)" />
                <action type="Redirect" url="{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

如果您使用管理工具，则添加一个空规则，为其命名，添加 ^myfolder/(.*) 作为模式，选择*重定向*作为操作类型，添加 {R:1} 作为目标 URL 并选择 301 作为*重定向类型*。

这应该是永久性的，这就是为什么您应该使用 301 重定向（出于 SEO 等目的）。

# ip - 如何检查子域的 IP 地址

> ID：13347650
> 
> 赞同：14
> 
> 时间：2012-11-12T16:37:44.860
> 
> 标签：ip, subdomain

我正在将 XML 从客户端站点发送到外部服务器。此外部服务器管理员需要验证发件人的 IP。从主站点（domain.com）发送时，我们的脚本工作正常，但我不确定我们何时从主站点的子域（sub.domain.com，当前出现错误）发送。有没有办法检查子域的 IP，以便我可以为管理员提供正确的 IP 地址？

谢谢。

更新：我使用了 firefox 扩展“IP 地址和域信息”，并比较了来自 domain.com 和 sub.domain.com 的信息，两者看起来几乎相同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-09T17:24:01.627

您应该能够从终端使用[nslookup](https://en.wikipedia.org/wiki/Nslookup)

```
nslookup google.com
nslookup mail.google.com 
```

从这里开始，为此编写一个脚本是微不足道的。这是一个简单的红宝石示例：

nslookup.rb

```
#!/usr/bin/env ruby
domain = ARGV[0]
lookup = `nslookup #{domain}`.split("\n")
lines = lookup.select{ |line| line[/Address/] }[1..-1]
ips = lines.map{ |l| l.split('Address: ').last }
verb = ips.count > 1 ? 'are' : 'is'

puts "the IP addresses for #{domain} #{verb}:\n#{ips.join("\n")}" 
```

从命令行运行

```
ruby nslookup.rb api.stackoverflow.com 
# or just 
./nslookup.rb api.stackoverflow.com 
```

应该输出类似

```
the IP addresses for stackoverflow.com are:
151.101.193.69
151.101.65.69
151.101.1.69
151.101.129.69 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-06T19:35:18.193

我也在搜索这个主题，然后我找到了一个网站，可以帮助我找到我的子域 IP 地址[http://www.hcidata.info/host2ip.htm](http://www.hcidata.info/host2ip.htm)

# xcode - 链接到 Python.framework 的“当前”版本

> ID：13347654
> 
> 赞同：1
> 
> 时间：2012-11-12T16:38:04.573
> 
> 标签：xcode, macos, frameworks, linker

我有一个链接到`Python.framework`.

通过`otool -L <binary>`，它似乎链接到完整的符号链接解析路径，即`/System/Library/Frameworks/Python.framework/Versions/2.7/Python`而不是`/System/Library/Frameworks/Python.framework/Versions/Current/Python`。从只有 Python 2.6 框架的用户那里，我还得到了它抛出此错误的报告：

```
Dyld Error Message:
  Library not loaded: /System/Library/Frameworks/Python.framework/Versions/2.7/Python
  Referenced from: /Applications/MusicPlayer.app/Contents/MacOS/MusicPlayer
  Reason: image not found 
```

我如何告诉 Xcode 它应该链接到`/System/Library/Frameworks/Python.framework/Versions/Current/Python`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:31:27.537

使用库设置目标的*链接二进制文件*允许您使用许多不同的版本。使用*未版本* `libpython.dyld`化的（顶部）：

![在此处输入图像描述](../Images/5fd41fa52d639a8afed7d1246771437b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:12:56.270

您无法链接到“当前”版本，因为它可能会更新为指向从根本上破坏您链接的库接口的较新版本。

# android - Using Android AsyncTask to download html file

> ID：13347662
> 
> 赞同：4
> 
> 时间：2012-11-12T16:38:19.163
> 
> 标签：android, android-asynctask

i just started with android and i'm working on a simple app that should download contents of a html file. I'm using AsyncTask as suggested, but i'm encountering one problem. In the following code (i followed a tutorial code), i get `tv cannot be resolved` for the `onPostExecute` method. How to access the downloaded file? Thank You:

```
public class FlashResults extends Activity {
  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView tv = new TextView(this);
        setContentView(tv);
        readWebpage(tv);                
  }

  protected class DownloadPage extends AsyncTask<String, Void, String> {
          protected String doInBackground(String... urls) {

          String responseStr = null;

          try {
              for (String url : urls) {   
              DefaultHttpClient httpClient = new DefaultHttpClient();
              HttpGet get = new HttpGet(url);
              HttpResponse httpResponse = httpClient.execute(get);
              HttpEntity httpEntity = httpResponse.getEntity();
              responseStr = EntityUtils.toString(httpEntity);
              } 
          } catch (UnsupportedEncodingException e) {

          } catch (ClientProtocolException e) {

          } catch (IOException e) {

          }
          return responseStr;
      }

      protected void onPostExecute(String result) {           
          tv.setText(result);
      }
  }

  public void readWebpage(View v) {
        DownloadPage task = new DownloadPage();
        task.execute(new String[] { "http://seznam.cz" });
      } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:58:34.307

到目前为止建议的所有其他答案都将起作用。但是，我要添加其他一些注释：

1.  如果您仅访问此 onCreate 和 DownloadPage 活动中的 TextView ，则可以通过将其直接提供给 DownloadPage 的构造函数`tv`来限制访问`tv`
2.  对于像 DownloadPage AsyncTask 这样有用的东西，我通常将它从任何活动的内部类中删除，而是将它放在一个名为“Utils”的公共类中，该类可以根据需要由许多其他活动使用。（代码模块化）
3.  如果您要使用内部类（完全合法），那么制作它`private`以及`static`您正在做的事情总是一个好习惯。

像这样的东西：

```
public class FlashResults extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView tv = new TextView(this);
        setContentView(tv);
        readWebpage(tv);
    }

    public void readWebpage(View v) {
        DownloadPage task = new DownloadPage(tv);
        task.execute(new String[] { "http://seznam.cz" });
    }

    private static class DownloadPage extends AsyncTask<String, Void, String> {

        private TextView textView;
        public DownloadPage(TextView tv){
            textView = tv;
        }

        protected String doInBackground(String... urls) {

         String responseStr = null;

          try {
              for (String url : urls) {   
              DefaultHttpClient httpClient = new DefaultHttpClient();
              HttpGet get = new HttpGet(url);
              HttpResponse httpResponse = httpClient.execute(get);
              HttpEntity httpEntity = httpResponse.getEntity();
              responseStr = EntityUtils.toString(httpEntity);
              } 
          } catch (UnsupportedEncodingException e) {

          } catch (ClientProtocolException e) {

          } catch (IOException e) {

          }
            return responseStr;
        }

        protected void onPostExecute(String result) {           
            if (textView != null) {
                textView.setText(result);
            }
        }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:58:10.093

一种方法是按照其他答案的建议进行操作并进行`tv`实例级别。或者，您可以`TextView`在您的内部创建一个字段`AsyncTask`并将引用传递给构造函数：

```
...
public void readWebpage(TextView v) {
    DownloadPage task = new DownloadPage(v);
    task.execute(new String[] { "http://seznam.cz" });
}
...
protected class DownloadPage extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... urls) {
        ...
    }
    TextView tv = null;

    public DownloadPage(TextView tv){
        this.tv = tv;
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:41:48.697

如果您希望在方法之外可以访问变量，则需要在方法之外声明它。这是一个基本的编程概念，称为作用域。

将您的代码更改为如下所示：

```
public class FlashResults extends Activity {
private TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    tv = new TextView(this);
    setContentView(tv);
    readWebpage(tv);                
} 
```

它将可用于内部的任何东西`FlashResults`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T16:42:07.703

尝试使文本视图类级变量。

```
private TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    tv = new TextView(this);
    setContentView(tv);
    readWebpage(tv);                
} 
```

另一种选择是声明 AsyncTask 匿名，在与任务声明相同的方法主体中将 TextView 声明为 final。干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T16:41:56.363

您必须使 tv 成为一个字段才能从子类中访问它。

```
 public class FlashResults extends Activity {

      TextView tv;

      @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            tv = new TextView(this);
            setContentView(tv);
            readWebpage(tv);                
      }

      protected class DownloadPage extends AsyncTask<String, Void, String> {
              protected String doInBackground(String... urls) {

              String responseStr = null;

              try {
                  for (String url : urls) {   
                  DefaultHttpClient httpClient = new DefaultHttpClient();
                  HttpGet get = new HttpGet(url);
                  HttpResponse httpResponse = httpClient.execute(get);
                  HttpEntity httpEntity = httpResponse.getEntity();
                  responseStr = EntityUtils.toString(httpEntity);
                  } 
              } catch (UnsupportedEncodingException e) {

              } catch (ClientProtocolException e) {

              } catch (IOException e) {

              }
              return responseStr;
          }

          protected void onPostExecute(String result) {           
              tv.setText(result);
          }
      }

      public void readWebpage(View v) {
            DownloadPage task = new DownloadPage();
            task.execute(new String[] { "http://seznam.cz" });
          }
} 
```

# javascript - 位置：绝对导致元素消失

> ID：13347664
> 
> 赞同：0
> 
> 时间：2012-11-12T16:38:34.653
> 
> 标签：javascript, html, css

我想知道是否有任何方法可以解决我遇到的这个问题。

我有三个 div，相互嵌套

```
<div class="section">
<div class="parent">
<div class="child">
Some text.. blah blah. 
</div>
</div>
</div> 
```

我用这个javascript让父母的身高由孩子的身高决定：

```
 $(document).ready(function() {
            var $holdme = $(".holdme");
           $holdme.parent().height($holdme.outerHeight());
        }); 
```

但是，这仅在子元素未绝对定位时才有效。当我将 .child 设置为 position:absolute 时，它​​会导致父元素和子元素消失。有没有办法将孩子设置为绝对并让父容器的高度改变以适应孩子的高度？

这是一个小提琴......现在它工作正常，但没有为子元素设置绝对定位。从 position:absolute 周围删除评论标记会破坏一切。

[http://jsfiddle.net/jjalbert/dHt7L/3/](http://jsfiddle.net/jjalbert/dHt7L/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:43:36.380

您的 HTML 不使用`holdme`该类，并且您的小提琴没有导入 jQuery。[纠正这两个使它工作正常](http://jsfiddle.net/XktGN/)：

```
 $(document).ready(function() {
         var $holdme = $(".child");
        $holdme.parent().height($holdme.outerHeight());
     }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:43:41.790

任何地方都没有`.holdme`应用类...

应该是这样`.chlid`吗？

```
var $holdme = $(".child"); 
```

如果您进行此更改，它会按您的意愿工作。

演示在[http://jsfiddle.net/gaby/dHt7L/8/](http://jsfiddle.net/gaby/dHt7L/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:45:40.783

这是一个工作版本的小提琴：

[http://jsfiddle.net/dHt7L/10/](http://jsfiddle.net/dHt7L/10/)

```
 $(document).ready(function() {
         var $holdme = $(".child");
        $holdme.parent().height($holdme.outerHeight());
     }); 
```

​</p>

我删除了你的溢出：规则..不确定它是否重要，但它是我工作流程的一部分

# ruby-on-rails - 当我为该控制器定义显示操作时，为什么我会看到“没有路由匹配：action=>“show””？

> ID：13347668
> 
> 赞同：0
> 
> 时间：2012-11-12T16:38:51.440
> 
> 标签：ruby-on-rails, rails-routing

我有一个“类别”资源，并且正在尝试使用`link_to`方法和`_path`路由在其 index.html.erb 文件中链接到 Categories#show。当我在浏览器中查看索引时，我看到以下错误：

`Routing Error No route matches {:action=>"show", :controller=>"categories"}`

但是我确实在我的 Categories 控制器中定义了一个显示操作，并且删除 URI 部分`link_to`会导致索引正常显示而不会引发异常！我不知道URI哪里出错了。

这是/categories/index.html.erb：

```
<h1>My Links</h1>

<% @categories.each do |c| %>
    <h2><%= link_to "#{c.category}", category_path %></h2>
    <p><%= c.description %></p>
<% end %>

<%= link_to "Add new category", new_category_path %> 
```

这是/categories/show.html.erb：

```
<h1><%= @category.category %></h1>

<p><%= @category.description %></p>

<p><%= link_to "Back to index", root_path %></p> 
```

这是/config/routes.rb：

```
LinkManager::Application.routes.draw do

  resources :categories do
    resources :links
  end

  root :to => 'categories#index' 
```

这是 /controllers/categories_controller.rb 的一部分：

```
class CategoriesController < ApplicationController

    def index
        respond_with(@categories = Category.all)
    end

    def show
        @category = Category.find(params[:id])
    end 
```

这是运行的结果`rake routes`（把它放在 pastebin 上，因为我不知道如何在这里很好地格式化它）：[rake routes](http://pastebin.com/RCELqTKc)

任何人都可以发现有什么问题吗？我在这里查看了许多其他类似的路由问题，但无法从他们那里得到解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:55:48.287

尝试替换：

```
<h2><%= link_to "#{c.category}", category_path %></h2> 
```

和：

```
<h2><%= link_to "#{c.category}", category_path(c) %></h2> 
```

看？您必须为`category_path`.

或者只是使用魔法：

```
<h2><%= link_to "#{c.category}", c %></h2> 
```

顺便说一句，这里插值的目的是什么：`"#{c.category}"`？还`c.category`不够吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:53:57.267

好吧，我认为如果您添加其他路线以显示它有效，请执行以下操作：

在浏览器中执行此操作：

```
localhost:3000/categories/show 
```

在你的`routes.rb`：

```
match "/categories/show/:id" => categories#show 
```

我们的 ruby​​ 版本和 rails 版本是什么？

# maven - running acceleo using Maven

> ID：13347669
> 
> 赞同：1
> 
> 时间：2012-11-12T16:39:00.357
> 
> 标签：maven, acceleo

I am trying to execute my acceleo project using maven. I have included all the dependencies in the pom file. It compile succesfully (with command package). Here is my pom file:

```
 <plugin>
                    <groupId>org.eclipse.acceleo</groupId>
                    <artifactId>maven</artifactId>
                    <version>3.2.1</version>
                    <executions>
                        <execution>
                            <phase>compile</phase>
                        </execution>
                    </executions>
                    <configuration>
                        <useBinaryResources>false</useBinaryResources>
                        <usePlatformResourcePath>true</usePlatformResourcePath>
                        <acceleoProject>
                            <root>${project.basedir}</root>
                            <entries>
                                <entry>
                                    <input>src/main/java</input>
                                    <output>target/classes</output>
                                </entry>
                            </entries>
                        </acceleoProject>
                        <packagesToRegister>
                            <packageToRegister>org.eclipse.uml2.uml.UMLPackage</packageToRegister>
                        </packagesToRegister>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>exec-maven-plugin</artifactId>
                    <version>1.2.1</version>
                    <configuration>
                        <mainClass>src.AcceleoProject.files.Generate</mainClass>
                        <arguments>
                            <argument>/${project.basedir}/src/main/java/src/AcceleoProject/files/model.uml</argument>
                            <argument>/${project.basedir}/src/main/java/src/AcceleoProject/files</argument> 
                        </arguments>
                    </configuration>
                </plugin>

            </plugins>
        </build>
        <dependencies>
        <dependency>
        <groupId>org.eclipse.acceleo</groupId>
                    <artifactId>maven</artifactId>
                    <version>3.2.1</version>
                </dependency> 
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-simple</artifactId>
                    <version>1.6.4</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.acceleo</groupId>
                    <artifactId>model</artifactId>
                    <version>3.1.3.v20120214-0359</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.acceleo</groupId>
                    <artifactId>engine</artifactId>
                    <version>3.1.3.v20120214-0359</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.acceleo</groupId>
                    <artifactId>common</artifactId>
                    <version>3.2.0.v20111027-0537</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.emf</groupId>
                    <artifactId>ecore</artifactId>
                    <version>2.7.0.v20120127-1122</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.emf</groupId>
                    <artifactId>common</artifactId>
                    <version>2.7.0.v20120127-1122</version>
                </dependency>

                <dependency>
                    <groupId>org.eclipse.core</groupId>
                    <artifactId>resources</artifactId>
                    <version>3.7.101.v20120125-1505</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.uml2</groupId>
                    <artifactId>uml</artifactId>
                    <version>3.2.100.v201108110105</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.uml2</groupId>
                    <artifactId>common</artifactId>
                    <version>1.6.0.v201105021727</version>
                </dependency> 
                <dependency>
                    <groupId>org.eclipse</groupId>
                    <artifactId>osgi</artifactId>
                    <version>3.7.2.v20120110-1415</version>
                </dependency> 
                 <dependency>
                    <groupId>org.eclipse.core</groupId>
                    <artifactId>contenttype</artifactId>
                    <version>3.4.100.v20110423-0524</version>
                </dependency>
                 <dependency>
                    <groupId>org.eclipse.core</groupId>
                    <artifactId>runtime</artifactId>
                    <version>3.0.1</version>
                </dependency>

                 <dependency>
                    <groupId>org.eclipse.emf.ecore</groupId>
                    <artifactId>xmi</artifactId>
                    <version>2.7.0.v20120127-1122</version>
                </dependency> 
                 <dependency>
                    <groupId>org.eclipse.ocl</groupId>
                    <artifactId>ecore</artifactId>
                    <version>3.1.2.v20111015-2027</version>
                </dependency>   
                 <dependency>
                    <groupId>org.eclipse</groupId>
                    <artifactId>ocl</artifactId>
                    <version>3.1.0.v20120206-0606</version>
                </dependency>   
                 <dependency>
                    <groupId>lpg.runtime</groupId>
                    <artifactId>java</artifactId>
                    <version>v201004271640</version>
                </dependency>           
                <dependency>
                    <groupId>org.eclipse.equinox</groupId>
                    <artifactId>common</artifactId>
                    <version>3.3.0-v20070522</version>
                </dependency>           

                    </dependencies>
    </project> 
```

After i give the command: exec:java i get this error:

```
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project AcceleoProject: An exception occured while executing the Java class. null: InvocationTargetException: NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project AcceleoProject: An exception occured while executing the Java class. null
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. null
    at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:352)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
    at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.NullPointerException
    at org.eclipse.core.internal.runtime.InternalPlatform.getBundle(InternalPlatform.java:861)
    at org.eclipse.core.runtime.Platform.getBundle(Platform.java:1185)
    at org.eclipse.acceleo.common.internal.utils.workspace.BundleURLConverter.resolveBundle(BundleURLConverter.java:186)
    at org.eclipse.acceleo.common.internal.utils.workspace.BundleURLConverter.resolveAsPlatformPlugin(BundleURLConverter.java:137)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.loadDynamicModules(AcceleoEvaluationEnvironment.java:763)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.mapDynamicOverrides(AcceleoEvaluationEnvironment.java:899)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.<init>(AcceleoEvaluationEnvironment.java:139)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEnvironmentFactory.createEvaluationEnvironment(AcceleoEnvironmentFactory.java:124)
    at org.eclipse.ocl.internal.evaluation.QueryImpl.getEvaluationEnvironment(QueryImpl.java:286)
    at org.eclipse.ocl.ecore.QueryImpl.getEvaluationEnvironment(QueryImpl.java:74)
    at org.eclipse.acceleo.engine.generation.AcceleoEngine.doEvaluate(AcceleoEngine.java:268)
    at org.eclipse.acceleo.engine.generation.AcceleoEngine.evaluate(AcceleoEngine.java:145)
    at org.eclipse.acceleo.engine.service.AcceleoService.doGenerateTemplate(AcceleoService.java:869)
    at org.eclipse.acceleo.engine.service.AcceleoService.doGenerate(AcceleoService.java:575)
    at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.generate(AbstractAcceleoGenerator.java:188)
    at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.doGenerate(AbstractAcceleoGenerator.java:158)
    at src.AcceleoProject.files.Generate.doGenerate(Generate.java:197)
    at src.AcceleoProject.files.Generate.main(Generate.java:159)
    ... 6 more 
```

Any idea, what can be wrong with it ?

Thank you in advance ME

# c# - MVVMLight：RelayCommand 似乎在 Windows 8 应用程序中不起作用

> ID：13347670
> 
> 赞同：0
> 
> 时间：2012-11-12T16:39:13.980
> 
> 标签：c#, xaml, windows-8, mvvm-light

我有以下视图模型：

```
public class TransportationUnit : ViewModelBase {
    private string _TypeOfFuel;
    private string _Model;
    private string _Manufacturer;
    private string _LicencePlate;
    private Guid _Key = Guid.Empty;

    public ICommand CmdAddTransportationUnit { get; set; }

    public TransportationUnit() {
        CmdAddTransportationUnit = new GalaSoft.MvvmLight.Command.RelayCommand( () => AddTransportationUnitDo(), () => AddTransportationUnitCan() );
    }

    /// <summary>manufacturer</summary>
    public string Manufacturer {
          get { return _Manufacturer; }
          set {
            if (_Manufacturer == value )
                return;
            RaisePropertyChanging( "Manufacturer" );
            _Manufacturer = value;
            RaisePropertyChanged( "Manufacturer" );
        }
    }

    /* ommitted some equal properties */

    public bool AddTransportationUnitCan() {
        return !string.IsNullOrWhiteSpace( Model ) && !string.IsNullOrWhiteSpace( Manufacturer ) & !string.IsNullOrWhiteSpace( LicencePlate );
    }

    public async void AddTransportationUnitDo() {
        await LogbookRepository.Instance.Add<TransportationUnit>( this );
    }
} 
```

我的文本框是这样绑定的：

```
<TextBox x:Name="CarManufacturerNameText" Width="400" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" Text="{Binding Manufacturer,Mode=TwoWay}" /> 
```

我在 AppBar（底部）中的按钮是这样绑定的：

```
<Button Style="{StaticResource SaveAppBarButtonStyle}" AutomationProperties.Name="" x:Name="save" x:Uid="StandardSave" Command="{Binding CmdAddTransportationUnit}" /> 
```

我本来希望当方法`AddTransportationUnitCan`评估为 false 时按钮被禁用，反之亦然。当所有文本框都填满时，它会一直被禁用，甚至在方法中设置的断点也只会在创建 RelayCommand 时触发一次。我已经测试了很长时间，但没有找到解决方案。还有其他人有这个问题吗？

**编辑：**当我在按钮中返回 true 时`AddTransportationUnitCan`启用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:15:12.973

尝试将 RaiseCanExecuteChanged 添加到您的属性设置器。这将告诉您的 RelayCommand 重新评估 CanExecute。

```
public string Manufacturer {
          get { return _Manufacturer; }
          set {
            _Manufacturer = value;
            RaisePropertyChanged( "Manufacturer" );
            CmdAddTransportationUnit.RaiseCanExecuteChanged(); 
        }
    } 
```

# javascript - 代码仅在从控制台运行时有效

> ID：13347674
> 
> 赞同：0
> 
> 时间：2012-11-12T16:39:18.483
> 
> 标签：javascript, jquery, responsive-design

我正在使用响应式滑块，并希望在图像上创建可点击的链接。

我发现这个插件可以制作响应式图像地图 [https://github.com/stowball/jQuery-rwdImageMaps/blob/master/jquery.rwdImageMaps.js](https://github.com/stowball/jQuery-rwdImageMaps/blob/master/jquery.rwdImageMaps.js)

幻灯片看起来像这样，我在图像地图上有链接

```
 <li>
<img src="slide_2.png" usemap="#Image-Maps_5201211121032528"   />
<map id="_Image-Maps_5201211121032528" name="Image-Maps_5201211121032528">
<area shape="rect" coords="282,120,369,153" href="http://canvas.landsend.com/canvas/arrivals/blogger/index3.html"/>
</map> 
    </li> 
```

我在页脚中启动插件

```
 $(document).ready(function(e) {

$('img[usemap]').rwdImageMaps();

}); 
```

我遇到了一些奇怪的行为，图像映射/链接仅在我调整浏览器大小或从控制台运行上述 javascript 时才会显示。我尝试以设置超时运行代码并将“调整大小”功能设置为在文档准备好时触发。除了从控制台运行它或调整浏览器的大小之外，似乎没有任何方法可以显示图像映射。

[演示](http://www.widget.devserver2012.com/jenamobile)图像地图位于第二张幻灯片上的红色按钮上方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:45:32.750

这些文件路径是错误的，您的 imageMap JS 甚至不会加载到演示页面上：

[http://www.widget.devserver2012.com/jenamobile/css/shCore.css](http://www.widget.devserver2012.com/jenamobile/css/shCore.css) [http://www.widget.devserver2012.com/jenamobile/css/shThemeDefault.css](http://www.widget.devserver2012.com/jenamobile/css/shThemeDefault.css) [http://www.widget.devserver2012.com/ jenamobile/js/imageMap.js](http://www.widget.devserver2012.com/jenamobile/js/imageMap.js)

尝试先解决这些问题。

干杯，罗伯

# javascript - "Unknown runtime error" in IE

> ID：13347678
> 
> 赞同：1
> 
> 时间：2012-11-12T16:39:48.373
> 
> 标签：javascript, facebook, internet-explorer, sdk, internet-explorer-8

I'm using Facebook JS SDK and it's working perfectly in all browsers except Internet explorer 7/8 (of course). Console outputs the following error:

> Unknown runtime error: all.js, line 128 character 3067

Line 128, character 3067 points to this in all.js:

```
this._element.innerHTML=''; 
```

Any ideas? Thanks.

Edit: HTML surrounding login button: [http://pastebin.com/ZSeMgRiJ](http://pastebin.com/ZSeMgRiJ)

# javascript - When did Internet Explorer add support for the for..in loop in JavaScript?

> ID：13347682
> 
> 赞同：4
> 
> 时间：2012-11-12T16:39:53.767
> 
> 标签：javascript, internet-explorer

If I remember correctly, older versions of Internet Explorer didn't support [the `for..in` statement](http://msdn.microsoft.com/en-us/library/ie/55wb2d34%28v=vs.94%29.aspx).

I've no idea which versions though, and it's not the easiest thing to Google.

According to Microsoft, it's supported in Quirks Mode, and in standards mode from IE 6 onwards:

*   [http://msdn.microsoft.com/en-us/library/ie/55wb2d34(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/55wb2d34(v=vs.94).aspx) ("Requirements" section near the bottom)

Which version of Internet Explorer added support for this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:41:37.433

据我所知，*每个*支持 JS 的浏览器都必须支持`for ... in`，因为直到最近它还是枚举对象键的*唯一方法。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:41:55.253

它至少在 IE6+ 中受支持。for-in 循环在 Ecmascript 3 中，浏览器已经支持了很长时间。使用 for-in 应该和使用任何其他 JS 构造一样舒服。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-29T02:38:08.323

[根据 Microsoft 文档](https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/scripting-articles/s4esdbwz(v=vs.84))，for...in 语句是在 JScript 5.0 版中添加的，它在 Internet Explorer 5.0 中使用。

JScript 是 Microsoft 的 ECMAScript3 实现。前面的链接显示了他们使用的产品，包括旧版本的 Internet Explorer、Windows 和 VisualStudio。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-12T13:09:31.690

根据[微软官方网站](https://docs.microsoft.com/en-us/scripting/javascript/reference/for-dot-dot-dot-of-statement-javascript)，他们是这样说的：

`for...of Statement (JavaScript)` 以下文档模式不支持：Quirks、Internet Explorer 6 标准、Internet Explorer 7 标准、Internet Explorer 8 标准、Internet Explorer 9 标准、Internet Explorer 10 标准、Internet Explorer 11 标准。在 Windows 8.1 中不受支持。

# c++ - Serialize several serial port inputs into one in C++

> ID：13347690
> 
> 赞同：2
> 
> 时间：2012-11-12T16:40:32.750
> 
> 标签：c++, serial-port

In my scenario I have 4 devices sending serial data to my PC via RS232 connections. I am also using hardware to gather all the 4 data streams into one USB connection.

Now, this setup creates 4 COM ports in Windows and that's my issue because I have a ready-made software that **reads** from just **one** serial port.

I'm trying to create a tiny C++ software to grab the packets from my 4 RS232 serial ports and forward the stream into one serial port. Alternating the packets will work for sure. As I figured it out so far I'll need to create a virtual serial port to write the serialized stream and make sure that the ready-made software reads from that. Now I haven't tested this but I assume I'll not be able to do this without a bridge or something since I can't keep the port open to write the serialized data and open it with the ready-made software to read the data.

What I'd do then is

*   Setup a virtual port
*   Setup a bridge to that virtual port
*   Set the ready-made software to read from the copy of the virtual port
*   In my C++ software, open the 4 ports and the virtual one
*   Write my stuff into the virtual port (see underneath COMport_TARGET)

**My questions**

Considering the code example underneath,

*   Would you do the same way?
*   How else would you do it?
*   What software would you use to setup a virtual port and a bridge?

Here's a *naive* code that should do this:

```
unsigned char receiveBuffer[PACKET_LENGTH];

OpenCOMPort(COMport_A);
OpenCOMPort(COMport_B);
OpenCOMPort(COMport_C);
OpenCOMPort(COMport_D);

OpenCOMPort(COMport_TARGET); // This is the virtual COM Port to write to

while(true) {
    packetReadFromDevice(COMport_A);
    packetWriteToDevice(*(receiveBuffer), COMport_TARGET); // Write COM A data
    packetReadFromDevice(COMport_B);
    packetWriteToDevice(*(receiveBuffer), COMport_TARGET); // Write COM B data
    packetReadFromDevice(COMport_C);
    packetWriteToDevice(*(receiveBuffer), COMport_TARGET); // Write COM C data
    packetReadFromDevice(COMport_D);
    packetWriteToDevice(*(receiveBuffer), COMport_TARGET); // Write COM D data
    if(somethingHappens)
        break;
}

closeCOMPort(COMport_A);
closeCOMPort(COMport_B);
closeCOMPort(COMport_C);
closeCOMPort(COMport_D);

closeCOMPort(COMport_TARGET); 
```

# ipython - Change ipython notebook font type

> ID：13347691
> 
> 赞同：4
> 
> 时间：2012-11-12T16:40:34.703
> 
> 标签：ipython

I want to change the font type in my ipython notebook to consolas font type. I first generated a profile using

`ipython profile create`

But, I am not clear on the syntax to specify the font type in this config file.

Any help is appreciated.

Thanks,
-Uma

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:07:43.147

ipython 笔记本（ipython 的 Web 界面）使用标准 html/css 来定义外观。如果您对这些文件进行更改，它将改变您的 ipython 笔记本的外观。

找到你的 ipython egg 发行版。我使用easy_install安装了我的，所以我的路径如下所示：

```
/usr/lib/python2.6/site-packages/ipython-0.12.1-py2.6.egg/IPython/frontend/html/notebook/static/css 
```

基本上你只想找到 ipython 的安装位置，然后转到上面显示的路径。更新您的 css，重新启动您的 ipython 服务器，您应该一切顺利。

# java - JSF 1.2 Exception Handling

> ID：13347692
> 
> 赞同：0
> 
> 时间：2012-11-12T16:40:35.883
> 
> 标签：java, jsp, jsf, exception-handling

I am working on exception handling in our Application. I used try catch blocks to catch the exceptions occured in my code and i also could handle the time out exceptions by writing a listener and registering the listener in "faces-config.xml".

But i am facing problems in catching unexpected errors like "NullPointerException" in constructor or error Codes 500, 400 etc.

i used the tags in the "web.xml"

```
<error-page>
      <exception-type>java.lang.Exception</exception-type>
      <location>/sc00/ErrorPage.jsp</location>
</error-page> 
```

I tried many ways to handle the exceptions, can any one help me in finding out a solution. The error i am getting when i try to handle these exceptions is as follows.

I am using JSF 1.2 and the server is websphere 8

The Console shows the Following Exception.

```
com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0014E: Uncaught service() exception root cause Faces Servlet: javax.servlet.ServletException

E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: An exception was thrown by one of the service methods of the servlet [/sc00/ErrorPage.jsp] in application [MembershipEligibilityScreensEAR]. Exception created : [java.lang.RuntimeException: FacesContext not found 
```

My Error Page is in /WebContent/sc00/ErrorPage.jsp, ErrorPage.jsp has no backing bean associated with it.

Many solutions asked me to look at the URL path of Faces Servlet, In My web.xml the servlet-mapping is a follows

```
 <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

all the paths in my faces-config.xml refer to /FolderName/JspName and they work fine and they work fine even in Navigation.xml.

How can i navigate it to ErrorPage.jsp, Is there any way so that i can write a listener to this kind of problem

Sorry for posting too many redundant questions, i am new to JSF and i don't know the rules of StackOverflow, I apologize for the problem i have caused.

any solution would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:54:01.557

```
 java.lang.RuntimeException: FacesContext not found 
```

`FacesServlet`当您通过一个与（谁是负责创建 的）的 URL 模式不匹配的 URL 请求包含 JSF 组件的 JSP 页面时，就会发生这种情况`FacesContext`。

您需要更改错误页面位置以匹配中`FacesServlet`定义的 URL 模式`web.xml`。根据您对该主题的[重复问题](https://stackoverflow.com/users/939747/ylnsagar?tab=questions)，这是除其他`*.faces`外，因此应该按照以下方式设置错误页面位置，正如我在对您关于该主题的[第一个问题的评论中所建议的那样。](https://stackoverflow.com/questions/13297507/jsf-session-timeout-exception-handling#comment18136428_13297507)

```
<location>/sc00/ErrorPage.faces</location> 
```

# ios - 聚焦字段时平移视口

> ID：13347697
> 
> 赞同：1
> 
> 时间：2012-11-12T16:40:54.163
> 
> 标签：ios, sencha-touch-2, transform

我正在开发一个 Sencha Touch 2 应用程序，我有一个非常像这样的视图：

![在此处输入图像描述](../Images/9637395f3e9e2d637b417e427db3fd88.png)

当该字段被点击时，键盘和视口都会上升，以便在剩余的可用空间中将字段居中。

现在我想做的是在点击该字段时向下平移视口，以便用户仍然可以完整地看到图片。

我所做的是创建一个包含以下内容的 CSS 类：

```
@include transform(translate(0, 55px)); 
```

然后当字段聚焦时，我将这个类添加到视口。

即使该类已正确添加到视口，它也不会向下转换视图。此外，如果我在显示键盘后直接在控制台中执行此操作，则它可以正常工作。

**`focus`有谁知道为什么它在事件触发后立即添加的类不起作用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T07:55:56.673

在第一种情况下，操作系统优先于您尝试执行的任何操作...您的翻译可能适用，之后操作系统（WebView）将屏幕居中放置在文本框...

因为在第二种情况下，您在操作系统完成操作后翻译屏幕被翻译......希望这个答案有帮助......

# wordpress - 使用 WordPress 论文为移动设备粘贴页脚修复？

> ID：13347699
> 
> 赞同：1
> 
> 时间：2012-11-12T16:41:05.533
> 
> 标签：wordpress, footer, sticky, wordpress-thesis-theme

我正在使用论文主题开发 WordPress 网站。我的粘性页脚在 Chrome、IE 和 Safari 中工作，但当我试图让它在移动设备上工作时，一切都变得最糟糕！

所以我的问题是，是否有适用于包括移动设备在内的所有浏览器的 WordPress 粘性页脚解决方案？

这篇 stackoverflow 帖子提出了这个问题，他们的网站可以在移动设备上运行，但没有给出他们如何让它工作的答案！[粘滞页脚在 Safari 上不起作用](https://stackoverflow.com/questions/13163080/sticky-footer-not-working-on-safari)

任何帮助，将不胜感激！我正在开发的网站是：[http](http://www.oldpueblogymnastics.com/wordpress/) ://www.oldpueblogymnastics.com/wordpress/ 。你较短的页面是[http://www.oldpueblogymnastics.com/wordpress/parents-night-out/](http://www.oldpueblogymnastics.com/wordpress/parents-night-out/)

```
custom_functions.php code

// sticky footer
function div_push() {
?>
<div class="push"></div>
<?php
}

function div_wrapper_start() {
?>
<div class="wrapper">
<?php
}

function div_wrapper_close() {
?>
</div><!--end wrapper-->
<?php
}

add_action('thesis_hook_after_content_area', 'div_push');
add_action('thesis_hook_before_html', 'div_wrapper_start');
add_action('thesis_hook_after_content_area', 'div_wrapper_close'); 
```

CSS可以在源代码中看到。

谢谢！

姜

# android - Android SDK - 动画阻止 View 上的进一步事件，如 OnClick()

> ID：13347702
> 
> 赞同：0
> 
> 时间：2012-11-12T16:41:14.607
> 
> 标签：android, android-animation, android-imageview, android-event

我有一个`ImageView`动画，`startAnimation()`可以将其滑入屏幕。它在 中可见并已启用`XML`。当我`Handler`为延迟或`onClick`事件添加 a 时，什么也没有发生。当我删除`startAnimation()`一切正常。当然动画除外。

*这是我的代码：*

```
balloon.setOnClickListener(new OnClickListener() {
   @Override
    public void onClick(View view) {
       view.setVisibility(View.GONE);
    }
});

Animation dropDown = 
   AnimationUtils.loadAnimation(context, R.anim.balloon_slide_down);
dropDown.setStartOffset(1500);

balloon.startAnimation(dropDown); 
```

任何想法为什么会这样？我现在很沮丧...

谢谢，

罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:43:31.777

动画只给你一个动画，图像视图将被滑动，但实际上图像视图的位置没有改变

如果你想改变它，你可以使用 layoutparams 移动它并在 UIthread 中循环它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:58:27.290

您的 ImageView 可能不在您认为的位置。尝试在动画之前在 ImageView 上设置偏移量。

```
balloon.offsetTopAndBottom(offset);
//Start Animation from -offset 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:50:20.093

好吧...我觉得奇怪的是`ÌmageView`不应该在它显示的位置。所以我发现只是在`setVisibility()`某种程度上不起作用。

我将代码更改为以下内容，并且可以正常工作：

```
balloon.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View view) {
           ((ViewGroup) balloon.getParent()).removeView(balloon);
      }
}); 
```

# security - 告诉用户用户名不存在不是不好的做法，例如 http://en.wikipedia.org

> ID：13347709
> 
> 赞同：2
> 
> 时间：2012-11-12T16:41:46.367
> 
> 标签：security, login, standards

我一直认为，每当您提供登录界面并且用户未提供有效凭据时，您永远不会确认哪个用户名和密码不正确，因为这可能有助于黑客攻击？

[wikipedia.org](http://en.wikipedia.org)似乎违反了这种做法标准；

![在此处输入图像描述](../Images/9571852df76662046805e848aa95e04c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:55:31.437

答案是针对具体情况的。

一方面，您拥有公共用户名，例如托管论坛（例如 StackOverflow）的网站，以及在您的示例中为 Wikipedia 的网站。从这个意义上说，术语“公共”用于表示它被用作所有人都可以看到的公共标识符。在这些情况下，掩盖登录表单中存在或不存在用户名的事实是没有任何意义的 - 此信息是可公开访问的。无论是查看特定用户信息的页面，还是扫描网站上的每个页面，您都可以毫不费力地列举出完整的用户列表（至少是那些做出贡献的用户）。

另一方面，您有私人用户名，例如银行应用程序中使用的用户名。由于银行网站不会（或至少不应该）向任何地方的任何人显示其网站上的实际用户名 - 用户名纯粹用作网站标识符和身份验证工具。在这种情况下，发出警告，例如“*您使用的用户名/密码组合无效。* ”与“*您输入的用户名不存在。* ”相对，是很有意义的。

# amazon-s3 - 迪拜/阿联酋是否有最佳的亚马逊 s3 区域可供使用？

> ID：13347724
> 
> 赞同：2
> 
> 时间：2012-11-12T16:42:50.357
> 
> 标签：amazon-s3

我的应用程序对 amazon s3 服务进行大文件存储和检索。迪拜的用户报告了可怕的延迟。我注意到没有“靠近”迪拜的 s3 区域，我认为阿联酋有一个防火墙，可以严格限制与外界的流量。

有人有这方面的经验吗？是否有最适合在迪拜使用的最佳 s3 区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:51:03.080

我女朋友现在正在阿联酋度假。我在她的安卓平板上有 ssh 来配置 OpenVPN。当我将 OpenVPN 设置为[http://www.hetzner.de/en/](http://www.hetzner.de/en/)（德国）的服务器时，她拥有最好的体验。我为 OpenVPN 设置了 UDP 连接。

# delphi - FPU。如何做一个循环？

> ID：13347725
> 
> 赞同：4
> 
> 时间：2012-11-12T16:42:52.007
> 
> 标签：delphi, assembly, fpu

为什么当它进入 ECX 的循环时，会有一些大的随机值设置为 0？还有其他方法可以在这里制作循环吗？

```
program Project2;

{$APPTYPE CONSOLE}

uses
  SysUtils;

function FPUTest(a:Double):Double;
asm
  FINIT
  FLD a
  MOV ecx,0
  @cycle:
    FADD st(0), st(0)
  loop @cycle
end;

var a:Integer;
begin
  readln(a);
  Writeln(FPUTest(a));
end 
```

.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:45:35.823

`ECX`是相对于`loop`指令的倒计时寄存器。从零开始意味着它将循环遍历其完整的 32 位范围，以`0xffff ffff`. 有时这很有用。

在这种情况下，如果要循环 5 次，请从`ecx`设置为 5 开始。

# session - 在创建会话之前加载来自 getHomePage 的 Wicket 返回类

> ID：13347726
> 
> 赞同：1
> 
> 时间：2012-11-12T16:42:52.683
> 
> 标签：session, jetty, wicket

我在码头服务器上使用 wicket 1.5.8，在我的 getHomePage() 返回类（我们称之为 A 类）中，我使用的是在 newSession 函数中创建的会话，问题是当我调用 Session 时在 A 类中.get().getId() 我得到空值，当我检查问题时，我看到会话是在我的 A 类加载后创建的。现在有没有人如何在 getHomePage() 的返回类之前使会话加载

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:43:23.743

您的会话仍然是临时的，请调用 Session#bind()。

# algorithm - 发送批次面试算法

> ID：13347727
> 
> 赞同：1
> 
> 时间：2012-11-12T16:42:58.250
> 
> 标签：algorithm

我在另一个网站上遇到了以下面试问题：

> 您在收件箱中收到一堆电子邮件。您想将所有发件人地址发送到某个服务器。您可以分批发送它们（每批包含一堆发件人电子邮件地址）。限制是任何批次都不能包含重复的电子邮件地址。您将如何编写一个程序来分批发送所有电子邮件地址，从而使批次数量最少。
> 
> 分析复杂性

我喜欢的答案是将电子邮件放入二叉搜索树（从而删除重复项），然后将其序列化并发送。这将只发送一批，并且是 O(n*log n) 时间。有人愿意提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:52:20.033

你可以使用hash，首先你检查特殊名称是否在hash中，如果没有，你将把它放在hash中并添加到batch中。这平均为 O(n)，但您当前的方法是 O(n logn)。

您当前的方法是 O(n log n)，因为创建二叉树需要 O(n logn)，因为您的任何比较基础算法都无法位`n log n`阻。

同样关于散列函数，它平均需要 O(n)。总而言之，它比排序方法在速度上要好，但它可能占用太多空间，你应该考虑你的数据格式。

# r - 计算 R 中包含给定值或术语的文件数

> ID：13347728
> 
> 赞同：1
> 
> 时间：2012-11-12T16:42:58.987
> 
> 标签：r

我有一个文件夹，其中包含一组不同的数据文件。我想计算包含给定术语（如“25”或“颜色编码”）的文件数量，如果可能，列出这些文件的名称。他们有什么方法可以在 R 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:47:39.857

这能满足你的需要吗

```
findTermsInFileNames <- function(terms, theFolder="path/to/Folder/", extension="R", ignoreCase=TRUE)  {
  # Iterates through all files of type `extension` in `theFolder` and returns a 
  #  count for each time one of `terms` appears in a file name
  # Note:  extension should NOT include a dot.  good: "*"  bad: ".*"

  # str_detect is from stringr
  require(stringr)

  # Get list of files
  pat <- paste0("*.", extension)
  filesList <- list.files(path.expand(theFolder), pattern=pat, ignore.case=ignoreCase)

  # Add attribute to terms, whether cAseS should be ignored
  attr(terms, "ignore.case") <- ignoreCase

  # Tabulate all occurrences of temrs in the list of file names
  results <- rowSums(sapply(filesList,  str_detect, terms, USE.NAMES=TRUE)) 

  # Clean up the table names
  names(results) <- terms

  return(results)
} 
```

例子：

```
fold <- "~/git/src"
terms <- c("an", "example", "25")

findTermsInFileNames(terms, fold) 
```

# linux - 如何在不更改代码的情况下为 Symfony2 设置 php CLI 版本？

> ID：13347730
> 
> 赞同：4
> 
> 时间：2012-11-12T16:43:19.013
> 
> 标签：linux, symfony, php

我的设置

*   共享主机
*   没有root权限
*   外壳访问
*   symfony 2.1
*   capifony 部署（嗯，至少，这是计划）

`build_bootstrap.php`用途

```
#!/usr/bin/env php 
```

这链接到 php4 cli

```
/usr/local/bin/php 
```

PHP4 当然不工作。php 5.3 cli 在

```
/usr/local/bin/php53 
```

是否有一个中心位置可以告诉 Symfony 2.1 更改环境？与putenv有关吗？bash 配置文件中的导出路径？

**更新：**

正如@thecatontheflat 建议的那样，我现在在我的 bashrc 中使用 php 的别名。

不幸的是，Symfony 有自己的逻辑去哪里寻找 php 二进制文件。一种选择是通过 putenv 设置 PHP_PATH。我将它添加到 app/console 和 app/autoload.php 因为这两个文件都涉及 Capifony 任务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:03:39.060

解决方案：

将两个设置添加到 .bashrc/.bash_profile

```
alias php="/usr/local/bin/php53"
export PHP_PATH = "/usr/local/bin/php53" 
```

并在 Capifony 的 deploy.rb 中设置 php_bin

```
set  :php_bin, " /usr/local/bin/php53" 
```

# html - 将一系列包装图像居中对齐的正确方法是什么？

> ID：13347733
> 
> 赞同：0
> 
> 时间：2012-11-12T16:43:31.760
> 
> 标签：html, css, image

抱歉标题不好，但我不知道如何更清楚地表达它。我在 div 中有一系列图像：

```
 <div class='container'>
    <img src="1.jpg">
    <img src="2.jpg">
    <img src="3.jpg">
 </div> 
```

我试图让图像彼此并排浮动，如果不合适就包裹起来。通常我会用浮动来实现这一点，但是......我希望它们对齐“中心”。因此，如果容器比 3 个图像更宽，它们将出现在同一行的 div 中居中，但如果容器更窄，最后一个元素将扭曲并居中低于其他两个，等等。在经历了很多挫折之后列表、浮动和边距，我发现上面的结构与这个 css 有效。

```
 .container{
    text-align: center;
 } 
```

这是处理这个问题的正确方法吗？我的 CSS 大脑的每一个部分都在告诉我，这就像使用表格来布置侧边栏一样糟糕。但是是吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:51:21.370

> 这是处理这个问题的正确方法吗？

根据提供的标记，是的，这是将一组内联元素居中的正确方法。

该[`text-align`属性](http://www.w3.org/TR/css3-text/#text-align0) *描述了块的内联内容如何对齐*。它不应该只影响文本，并且在编写 CSS 1 时命名不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:51:49.490

实际上，我会寻求您的解决方案，我看不出有什么问题。

# ruby-on-rails - 如何在heroku中获取共享数据库url

> ID：13347737
> 
> 赞同：5
> 
> 时间：2012-11-12T16:43:50.097
> 
> 标签：ruby-on-rails, database, heroku

如何在 heroku 中获取 SHARED_DATABASE_URL .. 在尝试迁移时它要求 SHARED_DATABASE_URL 我怎样才能得到它.. ??

```
heroku pg:reset --db SHARED_DATABASE_URL 
```

我应该在 SHARED_DATABASE_URL 的位置添加什么？我正在使用 ruby​​ on rails

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T16:46:33.903

您可以使用 command:`heroku pg:info`或仅`heroku pg`获取有关数据库的信息。你会得到这样的东西：

```
HEROKU_POSTGRESQL_GRAY_URL (DATABASE_URL) 
```

然后运行：`heroku pg:reset HEROKU_POSTGRESQL_GRAY_URL`

在heroku上重置数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T08:55:09.133

下面的说明对我有用：

```
$ heroku pg:credentials YOUR_DATABASE_NAME 
```

它返回信息（url、port、dbname、user、password）：

```
Connection info string: 
```

“dbname=xxxxxxx 主机=dc2-103-73-245-224.shhdtdr-1.amazonaws.com 端口=6212 用户=user31231 密码=dyzjur sslmode=require”

# c# - 我从 Enumerable.Select 得到了哪种显式类型

> ID：13347738
> 
> 赞同：1
> 
> 时间：2012-11-12T16:43:58.477
> 
> 标签：c#, linq

我有以下来自 Microsoft (http://msdn.microsoft.com/en-us/library/bb534869.aspx) 的代码示例：

```
String[] fruits = {"apple", "banana", "mango", "orange", "passionfruit", "grape" };
var query = fruits.Select((fruit, index) 
  => new {Substring = fruit.Substring(0, index)});

foreach (var obj in query)
  Console.WriteLine("{0}", obj); 
```

这很好用，但我不明白的是什么类型的查询？

我试图从调试器中获取信息，但我无法声明它并明确写下来。我尝试了几种变体，例如

```
IEnumerable<int,string> query = fruits.Select((fruit, index) 
  => new {Substring = fruit.Substring(0, index)}); 
```

但这确实建立了。如何在不使用 var 的情况下显式定义查询类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:46:33.957

您不能指定类型，因为它是`anonymous`. 在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/bb397696.aspx](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:50:29.277

当您在没有特定类型的情况下使用 new 运算符时，编译器会创建一个您无法显式引用的匿名类型。如果您希望能够引用它，那么您应该创建自己的类以显式返回，或者返回一个预先存在的类。尝试：

```
IEnumerable<string> query = fruits.Select((fruit, index) => fruit.Substring(0, index)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:52:31.170

只是为了完整起见，如果您真的*必须*指定类型（并且确实没有必要 - 匿名类型同样是类型安全的），那么您必须首先声明一个类/结构

```
public class FruitySubstringyThingy
{
    public string Substring{get;set;}
} 
```

并在投影中使用它

```
IEnumerable<FruitySubstringyThingy> items
  = fruits.Select((fruit,index) => new FruitySubstringyThingy{Substring = fruit.Substring(0, index)}); 
```

# mvvm - 如何在模块化应用程序中连接数据上下文？

> ID：13347744
> 
> 赞同：1
> 
> 时间：2012-11-12T16:44:22.893
> 
> 标签：mvvm, datacontext

我正在使用 PRISM 编写应用程序 WPF。如果这个问题的形式不佳，我是新来的，很抱歉：

我有一个模块，到目前为止，它有一个用于显示检查列表的用户控件。我的模块有实体编写和一个 DbContext 类来访问数据库。我的问题是这应该在哪里得到首字母并传递到我的 ViewModel?????

外壳 XAML

```
<Window x:Class="ChargeMgm.Desktop.Shell"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://www.codeplex.com/prism"
        Title="EMS" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition MinHeight="100"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TextBlock HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontFamily="Calibri"
                   FontSize="16"
                   Foreground="SteelBlue"
                   Margin="5">Street Works Modules</TextBlock>
        <Border BorderThickness="1" BorderBrush="SteelBlue" CornerRadius="3" Grid.Row="1" Margin="5">
        <ItemsControl prism:RegionManager.RegionName="MainRegion"
                      VerticalContentAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"/>
        </Border>
    </Grid>

</Window> 
```

引导程序类

```
 class Bootstrapper : UnityBootstrapper
    {
        protected override System.Windows.DependencyObject CreateShell()
        {
            return new Shell();
        }

        protected override void InitializeShell()
        {
            base.InitializeShell();

            App.Current.MainWindow = (Window)this.Shell;
            App.Current.MainWindow.Show();
        }

        protected override void ConfigureModuleCatalog()
        {
            base.ConfigureModuleCatalog();
            ModuleCatalog moduleCatalog = (ModuleCatalog)this.ModuleCatalog;
            moduleCatalog.AddModule(typeof(DefectModule.DefectModule));
        }
    } 
```

模块

```
public class DefectModule : IModule
{
    private readonly IRegionManager regionManager;
    private IUnityContainer container;

    public DefectModule(IUnityContainer container, IRegionManager regionManager)
    {
        this.regionManager = regionManager;
        this.container = container;
    }

    public void Initialize()
    {
        container.RegisterType<IDefectsView, DefectsView>();
        container.RegisterType<IDefectsViewModel, DefectsViewModel>();
        container.RegisterType<IDefectContext, DefectContext>();
        var view = container.Resolve<IDefectsView>();
        if(regionManager.Regions.ContainsRegionWithName("MainRegion"))
        {
            regionManager.Regions["MainRegion"].Add(view);
            //regionManager.RegisterViewWithRegion("MainRegion", typeof(IDefectsView));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:34:09.633

如果您使用的是 Unity，那么您很幸运。如果您需要它初始化您的数据库上下文，那么您可以执行以下操作：

IModule 实现代码（用于您的模块）

```
 // Create Module http://msdn.microsoft.com/en-us/library/ff648781.aspx
    public class Module:IModule
    {
    private IUnityContainer _container;
    public Module(IUnityContainer container,IRegionManager regionManager)
    {
    _regionManager=regionManager;
    _container=container;
    }
    public Initialize()
    {
        _container.RegisterType<IView,View>();
        _container.RegisterType<IViewModel,ViewModel>();
        _container.RegisterType<IDBContext,DbContext>();
        var view=_container.Resolve<IView>();
        //Create Region http://msdn.microsoft.com/en-us/library/ff648829.aspx
        _regionManager.Regions["MainRegion"].Add(view);
    }
    } 
```

以上将注册您的所有视图、视图模型和 dbcontext，解析它们并将它们添加到一个区域中。为了上述工作，我期待以下内容：

```
public class View:IView
{
    public View(IViewModel viewModel)
    {
    }
}

public class ViewModel:IViewModel
{
    public ViewModel(IDbContext context)
    {
    }
} 
```

基本上，我希望您的 viewmodel 被注入到您的 View 中，并且您的 DB Context 被注入到您的 ViewModel 中使用[Constructor Injection](http://beyondrelational.com/modules/2/blogs/79/posts/11527/dependency-injection-with-microsoft-unity-application-block.aspx)。

顺便说一句 - 代码中的链接转到 MS 站点，这些站点将提供有关模块创建和区域的更多背景信息。我有最后一个链接：这是一个“Hello World”Prism 应用程序。它适用于 Silverlight，但就代码结构而言，这与 WPF 应用程序基本相同，因此应该很有用：[Prism Hello World](http://www.codeproject.com/Articles/229931/Understand-MVVM-Using-PRISM-by-Hello-World-Silverl)

# php - 使用 JSON 将 Javascript 数组传递给 PHP

> ID：13347745
> 
> 赞同：0
> 
> 时间：2012-11-12T16:44:32.847
> 
> 标签：php, javascript, json

我的 HTML 上有 2 个选项，选项是通过我的数据库加载的，用户可以在框之间切换选项，如下所示：

```
<select id="column1" multiple size="10" name="FromLB" style="width:150px">
        <?php foreach ($result->result() as $row) { ?>
        <option value="<?php echo $row->id ?>"><?php echo $row->title ?></option>
        <?php } ?>
</select> 
```

![例子](../Images/a3e34670ad108fafc10c738d951d849e.png)

到目前为止一切顺利，最终计划是让用户单击提交并访问 PHP 中这两个选择的数据（通过数组）。

在挖掘了一下之后，似乎 JSON 是要走的路。

我将 json.js 导入我的项目并开始工作：

```
 function sort_cols(){
            var i=0;
            var p=0;
            var column1 = new Array();
            var column2 = new Array();

            $("#column1 option").each(function()
            {
                column1[i]=$(this).val();
                i=i+1;
            });

            $("#column2 option").each(function()
            {
                column2[p]=$(this).val();
                p=p+1;
            });      

            JSON = JSON.stringify(column1);

            $.ajax({
                url: '<?php echo base_url() . 'js_tests/update_news'; ?>',
                type: 'POST',
                data: JSON,
                success: function(){
                    alert("Success!")
                }

 });
    } 
```

到目前为止，我只传递了一个数组（对于第一个选择列），但我收到了一个错误： **Uncaught TypeError: Object ["15","14","1"] has no method 'stringify'**

我一直在关注这个答案： [您究竟如何使用 json_decode 将 javascript 数组传递给 php？](https://stackoverflow.com/questions/4543660/how-exactly-do-you-use-json-decode-to-pass-a-javascript-array-to-php)

我想知道我在这里做错了什么，以及如何传递我的第二个数组（column2）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:47:45.090

在这一行

```
JSON = JSON.stringify(column1); 
```

您重新定义了本机 JSON 对象。为您的变量使用另一个名称，您应该没问题。

至于提交两个数组，只需使用一个封装对象：

```
data2send = JSON.stringify( { 'column1': column1, 'column2': column2 } ); 
```

^(除了使用递增索引将数据插入数组之外，只需使用本机[`push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)方法即可。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:50:31.490

这里发生了一些奇怪的行为，很可能是由于您的`JSON`变量覆盖了浏览器的本机`JSON`对象（或`json.js`旧浏览器提供的对象）。

您实际上可以将对象直接传递给`$.ajax`，因此以下内容将起作用：

```
$.ajax({
    url: '<?php echo base_url() . 'js_tests/update_news'; ?>',
    type: 'POST',
    data: column1,
    success: function(){
        alert("Success!")
    }
}); 
```

如果要将两列作为单独的参数传递，请将其更改为：

```
$.ajax({
    url: '<?php echo base_url() . 'js_tests/update_news'; ?>',
    type: 'POST',
    data: {
        first_column: column1,
        second_column: column2
    },
    success: function(){
        alert("Success!")
    }
}); 
```

它们现在将在您的 PHP 脚本中以`$_POST['first_column']`和`$_POST['second_column']`.

这样一来，您就无需将对象转换为 JSON 到 jQuery 的繁重工作，因此您根本不需要包含该`json.js`库。

您的完整代码，重写：

```
function sort_cols(){
    var column1 = [],
        column2 = [];

    $("#column1 option").each(function() {
        column1.push($(this).val());
    });

    $("#column2 option").each(function() {
        column2.push($(this).val());
    });      

    $.ajax({
        url: '<?php echo base_url() . 'js_tests/update_news'; ?>',
        type: 'POST',
        data: {
            first_column: column1,
            second_column: column2
        },
        success: function(){
            alert("Success!")
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:01:45.550

让 jQuery 完成繁重的工作：

```
function sort_cols(){
    var col1 = [], col2 = [];

    $("#column1 option").each(function() {
        col1.push($(this).val());
    });

    $("#column2 option").each(function() {
        col2.push($(this).val());
    });  

    $.ajax({
        url: '<?php echo base_url() . 'js_tests/update_news'; ?>',
        type: 'POST',
        contentType: "application/json",
        data: JSON.stringify({
            column1: col1,
            column2: col2
        }),
        success: function(){
            alert("Success!")
        }
    });
} 
```

# debugging - 托管代码中未命中断点

> ID：13347746
> 
> 赞同：4
> 
> 时间：2012-11-12T16:44:39.900
> 
> 标签：debugging, c++-cli, unmanaged, managed

我继承了一个由许多 C#、C++/CLI 和本机 C++ 项目组成的应用程序。

该应用程序作为 MFC 应用程序启动，但在启动期间加载 CLR（通过我不确定我是否完全理解的过程^†）。

我发现我可以在本机 C++ 代码中放置断点，并且可以按预期工作。但是，托管代码中的断点不起作用。

在 C# 中，我得到：

> “当前不会命中断点。没有为此文档加载任何符号”。

在 C++/CLI 中，我得到：

> “断点当前不会被命中。没有可执行代码与此行关联。可能的原因包括：预处理器指令或编译器/链接器优化”。

我什至可以在同一个 C++ 文件中设置两个断点并且只有一项工作，例如

```
#pragma unmanaged

int CMyClass::UnmanagedFunc()
{
    // Breakpoint here works
    return 1
}

#pragma managed

int CMyClass::ManagedFunc()
{
    // Breakpoint here DOES NOT WORK!!
    return 2
} 
```

“启用非托管代码调试”的项目设置（在托管库项目中）对这些断点没有影响。是否有一些设置或配置或我做的一些事情来允许我中断并单步执行代码库的托管部分*？*

^†：该过程加载`mscoree.dll`，并涉及一个复杂的例程，包括`CLRCreateInstance`、`ICLRMetaHost`、`ICLRRuntimeHost`、和。`GetRuntime(..)``Start()``ExecuteInDefaultAppDomain(..)`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T18:12:27.443

由于您的主 EXE 是本机程序，调试器很可能以非托管模式启动，因此不支持在托管代码上设置断点。项目+属性，调试，调试器类型设置。将其从默认的 Auto 更改为 Mixed 或 Managed Only。混合调试仅适用于 32 位模式。

更新：从 VS2012 开始，您还必须强制调试器使用旧的托管代码调试引擎，该引擎仍然支持 C++/CLI。工具 > 选项 > 调试 > 常规 > “使用托管兼容模式”设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-04T20:45:07.250

对我来说，关键是将调试器类型从 Auto 更改为 Mixed，但对于启动应用程序，而不是包含 C++/CLI 代码的库（这是我试图做的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T11:19:39.700

对于同样的错误，当我将调试器类型指定为：

“仅限本机”或“仅限托管”**不要**混合或自动！！！

# matlab - 合并两个二进制向量

> ID：13347749
> 
> 赞同：0
> 
> 时间：2012-11-12T16:44:55.123
> 
> 标签：matlab, binary

我需要将 6 和 7 的二进制表示组合在一起：

```
bin1 =  fliplr(de2bi(6));
bin2 =  fliplr(de2bi(7));

bin1 =

     1     1     0

bin2 =

     1     1     1 
```

组合后的数字应该是

```
bin3 = 110111 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:05:57.380

如建议的那样，您可以将它们连接起来

```
bin3 = [bin1, bin2] 
```

但是，如果您真的希望它们不带空格地打包在一起，您可以这样做：

```
bin3 = num2str([bin1, bin2]);
bin3 = bin3(bin3 ~= ' ') 
```

如果你现在想把它们变成一个数字，你可以使用`str2num()`

# c# - 使用 Web 请求将文件插入谷歌驱动器

> ID：13347752
> 
> 赞同：1
> 
> 时间：2012-11-12T16:45:02.937
> 
> 标签：c#, .net, httpwebrequest, google-drive-api

我正在尝试使用 webRequest 在谷歌驱动器中插入一个文件（因为我正在实现可恢复的异步上传），但我不知道如何将数据放入请求“正文”中。

从现在开始，我有：

```
 public static HttpWebRequest CreateUploadRequest(Google.Apis.Drive.v2.DriveService driveService, string uri, Stream contentStream, string title, string mimeType, string description = null)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);

        request.Method = "PUT";

        Dictionary<string, object> requestBody = new Dictionary<string, object>();
        requestBody["title"] = title;
        requestBody["mimeType"] = mimeType;

        if (!string.IsNullOrWhiteSpace(description))
        {
            requestBody["description"] = description;
        }

        driveService.Authenticator.ApplyAuthenticationToRequest(request);

        Stream requestStream = request.GetRequestStream();

        //How to do that???

        requestStream.Close();

        return request;
    } 
```

我为HttpWebRequest设置了headers，body的数据应该如何处理？要插入的文件的 byte[] 数据的属性名称是什么？

任何例子都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:02:39.800

[此](https://developers.google.com/drive/manage-uploads#simple)页面上的 SDK 文档说：

> 请求的正文被格式化为多部分/相关内容类型 RFC2387，并且正好包含两个部分。这些部分由一个边界字符串标识，最后一个边界字符串后跟两个连字符。

如果您从未使用过它，[那么 RFC2387](https://www.rfc-editor.org/rfc/rfc2387)就是 MIME 定义。MIME 中的二进制数据通常是 BASE64 编码的，就像 RFC 中的这个例子一样：

```
 Content-Type: Application/octet-stream
 Content-Description: The fixed length records
 Content-Transfer-Encoding: base64
 Content-ID: <950120.aaCB@XIson.com>

 T2xkIE1hY0RvbmFsZCBoYWQgYSBmYXJtCkUgSS
 BFIEkgTwpBbmQgb24gaGlzIGZhcm0gaGUgaGFk
 IHNvbWUgZHVja3MKRSBJIEUgSSBPCldpdGggYS
 BxdWFjayBxdWFjayBoZXJlLAphIHF1YWNrIHF1
 YWNrIHRoZXJlLApldmVyeSB3aGVyZSBhIHF1YW
 NrIHF1YWNrCkUgSSBFIEkgTwo= 
```

查看这个问题以获取将二进制数据上传到 Web 请求的示例：[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

# ruby - 验证不能在 Ruby 中使用 Selenium::WebDriver

> ID：13347753
> 
> 赞同：0
> 
> 时间：2012-11-12T16:45:10.150
> 
> 标签：ruby, unit-testing, assert, selenium-webdriver, verify

我刚刚开始考虑如何使用`"test/unit"`. 我复制了 Selenium IDE 生成的代码并将其粘贴到我的 Ruby 测试方法中。

但是当使用 Ruby.exe 运行它时，由于某种原因它会抛出一个错误：

```
Finished tests in 31.835891s, 0.0314 tests/s, 0.0942 assertions/s.

  1) Error:
test_method(MyTestClass):
NameError: uninitialized constant Test::Unit::AssertionFailedError
    teste-noticia.rb:30:in `rescue in verify'
    teste-noticia.rb:29:in `verify'
    teste-noticia.rb:42:in `test_method'

1 tests, 3 assertions, 0 failures, 1 errors, 0 skips 
```

任何人都可以帮助我如何正确断言所需的字符串？**欢迎任何好的做法**;-)。

这是代码：

```
# encoding: utf-8
require "selenium-webdriver"
require "test/unit"

class MyTestClass  < Test::Unit::TestCase

  def setup
      @driver = Selenium::WebDriver.for :firefox
      @base_url = "http://www.yoursite.com"
      @driver.manage.timeouts.implicit_wait = 30
      @verification_errors = []
      @wait = Selenium::WebDriver::Wait.new :timeout => 10
    end

    def teardown
      @driver.quit
      assert_equal [], @verification_errors
    end

  def element_present?(how, what)
      @driver.find_element(how, what)
      true
      rescue Selenium::WebDriver::Error::NoSuchElementError
      false
    end

    def verify(&blk)
      yield
      rescue Test::Unit::AssertionFailedError => ex
      @verification_errors << ex
    end

    #your test methods go here
    def test_method
        @driver.get(@base_url + "/my-desired-path")

        verify { assert_equal "Obama wins and will move U.S. forward", @driver.find_element(:css, "h1").text }    

    end
end 
```

**编辑**

我的本地宝石：

```
C:\Users\wmj>gem list

*** LOCAL GEMS ***

addressable (2.3.2)
bigdecimal (1.1.0)
childprocess (0.3.6)
ffi (1.1.5 x86-mingw32)
io-console (0.3)
json (1.5.4)
libwebsocket (0.1.5)
minitest (2.5.1)
multi_json (1.3.7)
rake (0.9.2.2)
rdoc (3.9.4)
rubyzip (0.9.9)
selenium-webdriver (2.26.0)
test-unit (2.5.2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:22:22.057

我认为问题在于您需要“minitest”gem，但正在尝试使用“test-unit”gem 中的类。'Minitest' 在 Ruby 1.9 中默认安装，而不是 'Test-Unit'（在 1.8 中默认安装）。Minitest 仅部分向后兼容 Test-Unit。

可能的解决方案：

**切换到 Minitest：**

`Test::Unit::AssertionFailedError`导致异常的是 verify 方法中的。您可以将其更改为 minitest 等效项，这似乎是`MiniTest::Assertion`. 因此，您的验证方法将变为：

```
def verify(&blk)
  yield
  rescue MiniTest::Assertion => ex
  @verification_errors << ex
end 
```

**使用测试单元而不是 Minitest：**

假设您已经安装了 test-unit gem ( `gem install test-unit`)，手动指定您要在执行以下操作时使用该 gem `require 'test/unit'`：

```
gem "test-unit"
require "test/unit" 
```

# c# - C# 强制子类中的静态数据成员

> ID：13347766
> 
> 赞同：0
> 
> 时间：2012-11-12T16:46:22.130
> 
> 标签：c#, oop, opengl, inheritance, static

是否可以在继承的子类中强制使用静态数据成员？

这是我的问题/思考过程：

我想创建一个“GameObject”基类，所有其他对象都继承自该基类以借给多态性。

我希望每个继承的类都有一个静态数据成员顶点列表来渲染多边形。确切的过程是：

*   基于顶点的静态列表创建对象
*   应用纹理
*   根据实例化对象的旋转变量旋转对象
*   根据实例对象的世界坐标变换对象

对于从游戏对象继承的所有对象，我想保证它具有静态顶点列表

我应该关心它是否有列表，还是只关心它有一个绘制方法（由 iRender 接口保证）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:51:52.440

由于继承，`protected static List<Vertex>`基类中的 a 自动成为任何派生类的一部分。只要您不需要每个派生类都有自己的列表与任何父类中的列表分开，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:14:34.607

在基类中为所有后代和基类本身声明了一个静态类成员的单个实例。因此，基类中的单个顶点列表是行不通的。可以做什么： - 在基类中声明

```
private static Dictionary<string, List<vertex>> PointsPerClass = 
    new Dictionary<string, List<vertex>>(); 
```

你没有说后代如何指定他们的顶点，但是假设有一个被所有后代覆盖的虚拟基类方法：

```
protected virtual FillStaticVertices(List<vertex> aVertices)
{
} 
```

然后基类有公共方法：

```
public GameObject CreateObject()
{
    string key = GetType().FullName;
    List<vertex> points = null;
    if (PointsPerClass.ContainsKey(key))
      points = PointsPerClass[key];
    else {
      points = new List<vertex>();
      PointsPerClass.Add(key, points);
      FillStaticVertices(points);
    }

    // CreateObjectFromPoints is an abstract method implemented by descendants
    GameObject gameObj = CreateObjectFromPoints(points);
    // apply textures, rotations, etc

    return gameObj;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T16:51:12.447

如果 GameObject 是一个接口，那么您可以强制存在一个`static Property`.

```
interface GameObject
{
     static List<vertex> vertices {get; set;}
     //other common code
}; 
```

或者，您可以将顶点列表`GameObject`本身作为受保护的数据成员，并让派生类访问它。

# ruby - 流浪者和定制厨师资源

> ID：13347767
> 
> 赞同：1
> 
> 时间：2012-11-12T16:46:26.897
> 
> 标签：ruby, chef-infra, vagrant

我一直在尝试使用 Vagrant 测试我的一些食谱。我已经能够毫无问题地设置我的 Vagrant 盒子，但是每次我尝试配置（或`vagrant up`使用 Vagrantfile 中指定的食谱目录）时它都会失败。

出于某种原因，它似乎正在尝试编译目录中的每本食谱（无论它是否在运行列表中使用）并且它对我的自定义资源不满意。他们每个人都因相同的错误而失败：

```
SyntaxError
-----------
compile error
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/expect/resources/script.rb:5: syntax error, unexpected ':', expecting $end
attribute :script, kind_of: String, required: true
                           ^ 
```

它在此示例中抱怨的自定义资源是：

```
actions :create

default_action :create

attribute :script, kind_of: String, required: true 
```

我的 Vagrantfile 的相关部分是：

```
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = "/Users/0x783czar/Development/Work/Chef-Repos/chef2/cookbooks"
  chef.roles_path = "/Users/0x783czar/Development/Work/Chef-Repos/chef2/roles"
  chef.data_bags_path = "/Users/0x783czar/Development/Work/Chef-Repos/chef2/data_bags"
  chef.add_recipe "build-essential"
  chef.add_recipe "mongodb"

  # You may also specify custom JSON attributes:
  # chef.json = { :mysql_password => "foo" }
end 
```

我在 Chef-Solo 中使用了同样的食谱和资源，没有遇到任何问题，所以我很困惑。既是为什么它试图编译我什至没有使用的食谱，也是为什么它无法编译自定义资源。

我在“Mac OS X 10.8”上使用“Vagrant 1.0.5”和“VirtualBox 4.2.4”，而这个 Vagrant 构建使用的是“Chef-Solo 10.14.2”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:06:55.600

如果你从 vagrantbox.es 下载了你的 Vagrant box，我很确定你已经安装了 ruby​​ 1.8.x，因为它们必须同时支持 chef 和 puppet。不幸的是，puppet 不适用于 ruby​​ 1.9.x。

同时 ruby​​ 在 1.9 中引入了新的哈希语法，即：

```
{ key1: value, key2: value ... } compared to old:
{ :key1 => value, :key2 => value ... } 
```

但是 ruby​​ 1.8.x 不支持这一点。使用旧的哈希语法

```
attribute :script, :kind_of => String, :required => true 
```

或者创建您自己的安装了 ruby​​ 1.9 的 vagrant box :)

# sql - COUNT 个数据的 Microsoft Access SQL STDEV

> ID：13347770
> 
> 赞同：1
> 
> 时间：2012-11-12T16:46:41.610
> 
> 标签：sql, subquery, ms-access-2010

我在 MS Access 2010 中有一张表，我正在尝试分析属于完成各种工作的不同群体的人。我想做的是计算每个人每组完成的工作数量的标准偏差。意思是，我想要的输出是对于每个组，我会有一个数字，该数字构成每个人做了多少工作的标准偏差。

数据结构如下：

```
OldGroup, OldPerson, JobID 
```

我知道我需要`COUNT`按组和个人做一个工作 ID。我尝试创建一个子查询来使用，但这不起作用：

```
SELECT data.OldGroup, STDEV(
     SELECT COUNT(data.JobID)
     FROM data
     WHERE data.Classification = 1
     GROUP BY data.OldGroup, data.OldPerson
  )
FROM data
GROUP BY data.OldGroup; 
```

这返回了一个错误“此子查询最多可以返回一条记录”，我知道这是错误的，因为当我尝试将子查询作为独立查询运行时，它成功返回了多条记录。

**问题：** 我怎样才能得到`STDEV`a `COUNT`？

**子问题：**如果可以通过更正我的示例中不正确的语法来回答这个问题，请这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:25:52.743

策略上的一个微小变化，并不适用于所有情况，但最终确实适用于这种情况，似乎解决了这个问题。我没有将子查询粘贴在`SELECT`语句中，而是将其放入`FROM`，模仿创建单独的表。

因此，我的代码如下所示：

```
SELECT OldGroup, STDEV(NumberJobs) AS JobsStDev
FROM (
    SELECT OldGroup, OldPerson, COUNT(JobID) AS NumberJobs
    FROM data
    WHERE data.Classification = 1
    GROUP BY OldGroup, OldPerson
) AS TempTable
GROUP BY OldGroup; 
```

这似乎完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:20:54.920

尝试对“SELECT COUNT(data.JobID)....”进行最大表查询，然后对于第二个查询，使用新的基表。
有时在 2 个或更多查询中做某事会更容易。

# c++ - 增强 std unique_ptrs 的 stl 集合的序列化

> ID：13347776
> 
> 赞同：4
> 
> 时间：2012-11-12T16:47:09.830
> 
> 标签：c++, boost, c++11, boost-serialization

我希望能够序列化 std::unique_ptrs 的 stl 容器。可以做到吗？顺便说一句，使用单个 std::unique_ptr 一切正常。下面是我正在处理的代码，gcc 给出了以下错误：

```
 use of deleted function ‘std::unique_ptr<_Tp, _Dp>::unique_ptr(const
 std::unique_ptr<_Tp, _Dp>&) [with _Tp = MyDegrees; _Dp =
 std::default_delete<MyDegrees>; std::unique_ptr<_Tp, _Dp> =
 std::unique_ptr<MyDegrees>]’ 
```

我怎样才能使代码工作？

```
#include <iostream>
#include <memory>
#include <fstream>
#include <map>
#include <vector>
#include <boost/serialization/map.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/xml_oarchive.hpp>
#include <boost/archive/xml_iarchive.hpp>
namespace boost {
namespace serialization {

template<class Archive, class T>
inline void save(
    Archive & ar,
    const std::unique_ptr< T > &t,
    const unsigned int file_version
) {
    // only the raw pointer has to be saved
    const T * const tx = t.get();
    //ar << tx;
    ar << boost::serialization::make_nvp("px", tx);
}
template<class Archive, class T>
inline void load(
    Archive & ar,
    std::unique_ptr< T > &t,
    const unsigned int file_version
) {
    T *pTarget;
    //ar >> pTarget;
    ar >> boost::serialization::make_nvp("px", pTarget);

#if BOOST_WORKAROUND(BOOST_DINKUMWARE_STDLIB, == 1)
    t.release();
    t = std::unique_ptr< T >(pTarget);
#else
    t.reset(pTarget);
#endif
}
template<class Archive, class T>
inline void serialize(
    Archive & ar,
    std::unique_ptr< T > &t,
    const unsigned int file_version
) {
    boost::serialization::split_free(ar, t, file_version);
}
} // namespace serialization
} // namespace boost

class MyDegrees
{
public:
    void setDeg(int d) {
        deg = d;
    }
    int getDeg()const {
        return deg;
    }
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    //{ ar & deg; }
    {
        ar & boost::serialization::make_nvp("DEGS", deg);
    }
    int deg;
};
class gps_position
{
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    //{ ar & degrees;  }
    {
        ar & boost::serialization::make_nvp("DEGS2", degrees);
        ar & boost::serialization::make_nvp("DEGMAP", deg_map);
    }
    std::unique_ptr<MyDegrees> degrees;
    std::vector<std::unique_ptr<MyDegrees> > deg_map;
public:
    gps_position(): degrees(std::unique_ptr<MyDegrees>(new MyDegrees)) {};
    void setDeg(int d) {
        degrees->setDeg(d);
    }
    int getDeg() const {
        return degrees->getDeg();
    }
};

int TestBasicSerialize(int, char *[])
{
    int numErr = 0;
    double a;
    std::ofstream ofs("filename");
    gps_position g;
    g.setDeg(45);
    std::cout<<g.getDeg()<<std::endl;
    {
        boost::archive::text_oarchive oa(ofs);
        oa << g;
    }
    //{ boost ::archive::xml_oarchive oa(ofs); oa << g;}
    gps_position newg;
    {
        std::ifstream ifs("filename");
        boost::archive::text_iarchive ia(ifs);
        ia >> newg;
        std::cout<<newg.getDeg()<<std::endl;
    }
    return numErr;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T23:29:10.523

问题是容器反序列化器试图复制构造一个 unique_ptr。为了演示，请考虑以下产生相同错误的代码：

```
std::vector< std::unique_ptr<int> > vec;
std::unique_ptr<int> p;
vec.push_back(p); // does not compile! 
```

但是，这可以使用以下方法解决`std::move`：

```
vec.push_back(std::move(p)); // ok 
```

* * *

最省力的解决方案是使用可复制构造的智能指针，例如`boost::shared_ptr`，它在`boost/serialization/shared_ptr.hpp`.

* * *

下一个解决方案是在您的类中手动序列化向量：

```
//NOTE: this replaces void serialize(...) in gps_position
template<class Archive>
void save(Archive & ar, const unsigned int version) const
{
    ar & BOOST_SERIALIZATION_NVP(degrees);
    size_t size = deg_map.size();
    ar & BOOST_SERIALIZATION_NVP(size);
    for( auto it=deg_map.begin(), end=deg_map.end(); it!=end; ++it )
       ar & boost::serialization::make_nvp("item",*it);
}
template<class Archive>
void load(Archive & ar, const unsigned int version)
{
    ar & BOOST_SERIALIZATION_NVP(degrees);
    size_t size = 0;
    ar & BOOST_SERIALIZATION_NVP(size);
    deg_map.clear();
    deg_map.reserve(size);
    while( size-- >= 0 ) {
        std::unique_ptr<MyDegrees> p;
        ar & boost::serialization::make_nvp("item",p);
        deg_map.push_back(std::move(p));
    }
}
BOOST_SERIALIZATION_SPLIT_MEMBER() 
```

* * *

最后一个解决方案涉及编写您自己的容器序列化程序，就像您为 unique_ptr 所做的那样，用于`std::move`添加项目：

```
namespace boost { namespace serialization {
//NOTE: do not include boost/serialization/vector.hpp
template<class Archive, class T, class Allocator>
inline void save(
    Archive & ar,
    const std::vector<T, Allocator> &t,
    const unsigned int
){
    collection_size_type count (t.size());
    ar << BOOST_SERIALIZATION_NVP(count);
    for(auto it=t.begin(), end=t.end(); it!=end; ++it)
        ar << boost::serialization::make_nvp("item", (*it));
}

template<class Archive, class T, class Allocator>
inline void load(
    Archive & ar,
    std::vector<T, Allocator> &t,
    const unsigned int
){
    collection_size_type count;
    ar >> BOOST_SERIALIZATION_NVP(count);
    t.clear();
    t.reserve(count);
    while( count-- > 0 ) {
        T i;
        ar >> boost::serialization::make_nvp("item", i);
        t.push_back(std::move(i)); // use std::move
    }
}

template<class Archive, class T, class Allocator>
inline void serialize(
    Archive & ar,
    std::vector<T, Allocator> & t,
    const unsigned int file_version
){
    boost::serialization::split_free(ar, t, file_version);
}
} } // namespace boost::serialization 
```

最后但并非最不重要的一点是，您应该使用：

```
oa << BOOST_SERIALIZATION_NVP(g);
// and
ia >> BOOST_SERIALIZATION_NVP(newg); 
```

使用 xml 存档时在您的 TestBasicSerialize() 中。

# drupal - 如何为 Drupal 创建 RSS 提要？

> ID：13347784
> 
> 赞同：2
> 
> 时间：2012-11-12T16:48:12.183
> 
> 标签：drupal, rss, drupal-7, blogs

我在 Drupal 7 中有一个博客，我想创建一个 RSS 提要。

我如何创建它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:57:32.017

Drupal 7 附带的博客模块已经在[http://example.com/blog/feed](http://example.com/blog/feed)上实现了一个 RSS 提要，并且`http://example.com/blog/<user id>/feed`.

如果您没有使用博客模块，但视图模块完成了一个显示节点列表的视图，则可以添加一个提要添加一个新的显示。

![截屏](../Images/e6edda7d38323e6aaf5cc58c8b9acae4.png)

# .net - 如何在 GrGen.NET 的规则中定义原始类型变量？

> ID：13347786
> 
> 赞同：0
> 
> 时间：2012-11-12T16:48:15.803
> 
> 标签：.net, graph, rule

有没有办法在规则中定义原始类型（整数，字符串，...）变量，例如促进/启用属性计算？

PS：GrGen.NET 是一个非常流行的基于 .NET 框架的图形转换库（在[http://grgen.net上查看）。](http://grgen.net)如果有人可以为 GrGen.NET 定义一个标签会很酷，我没有足够的声誉:-)。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:48:15.803

如果您在规则中定义原始类型变量，则关键字**var**至关重要。

像这样做：

```
def var my_int_variable:int; 
```

如果要创建非原始变量，例如数组，则需要使用关键字**ref**而不是**var***通过引用*创建变量。

 ****```
def ref my_int_variable:array<int>; 
```****

# excel - 在excel中添加新数据并且无法排序或过滤

> ID：13347789
> 
> 赞同：2
> 
> 时间：2012-11-12T16:48:23.430
> 
> 标签：excel, sorting, filter

我有一列有 595 行。然后我继续添加20。

（请注意，在我开始处理之前，这个包含 595 个条目的 Excel 表已经到位。排序功能正常工作，过滤功能也是如此）。

所以现在，我仍然可以使用 sort 和 filter 方法，但它没有考虑这 20 个新行。有任何想法吗？

此外，我无法删除这 20 个新行的边框。它们很厚，说我只是做了“无边界”，它没有修改任何东西。

似乎在 595 或其他地方有一个“截止”。很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T15:20:09.093

另一个可能不那么明显的解决方案是取消单击数据选项卡下的过滤器按钮，然后重新单击过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T16:59:44.073

我有同样的问题。经过 45 分钟的试验和“谷歌搜索”解决方案，结果发现我输入的新名称前面没有空格，就像该列中的所有其他名称一样。所以检查列中的数据是否与单元格壁的距离相同。如果它们不同，请尝试添加或删除空格并重新排序。祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T21:24:50.540

我在使用从 Microsoft 下载的 Excel 工作表的缺勤跟踪器时遇到了同样的问题，我在其中添加了 30 行。我通过单击/激活表格并查看设计选项卡来解决问题。单击`Resize Table`并编辑表格范围。这种颜色对行进行了编码，并允许过滤器包含添加的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T14:27:01.950

我遇到了同样的问题，正如 John Bustos（2012 年 11 月 12 日 17:29）所建议的那样扩展“填充句柄”就是我所需要的。我也不必在之后关闭和打开过滤器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-16T23:51:30.213

确保新数据之前没有空格。这将分两批排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-04T03:39:19.560

正如@JohnBus​​tos 所建议的那样，“斑马”类型的行颜色是在数据透视表中选择特定条件的结果。

当您将新行添加到从数据透视表中提取的表中时，为了包含新添加行的过滤条件/排序，您需要 -

1.  转到第 595 行的最右下角，
2.  你应该有某种填充手柄，
3.  将它向下拖动到现在也包括您的新行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-21T12:36:47.790

当您设置过滤器时，它会考虑您最初拥有的数据范围。添加行时，它们超出了该范围。因此，如果您有一个额外的列，其中包含某些内容，例如单词“空白”或只是“X”或其他内容，并使其下降到第 1000 行或第 2000 行或其他内容，那么当您在新行中添加信息时，它应该保留完整的过滤范围，并且排序也将包括整个范围，一直到第 1000 行或第 2000 行或您所做的任何事情。

# python - 自定义 Markdown 解析

> ID：13347791
> 
> 赞同：2
> 
> 时间：2012-11-12T16:48:29.217
> 
> 标签：python, html, ruby, markdown, html-email

我为我的大学写了一封每周摘要邮件，邮件格式如下：

```
############################
#          HEADER          #
# ======================== #
#   IMAGE | Title          #
#         | Description    #
# ------------------------ #
#           ...            #
# ------------------------ #
#   IMAGE | Title          #
#         | Description    #
# ======================== #
#          FOOTER          #
############################ 
```

目前，这些都是每周通过 Copy-Paste-Tweak 从一个可怕的 HTML 模板构建的。

我使用 Markdown 写博客并经常使用 Markdown，我想知道是否有某种方法可以轻松使用它来解析包含摘要的主要详细信息的文件以产生上述输出？

“摘要电子邮件”（包括其他字段）的基本结构是

```
- header
  - main title
  - subtitle
  - date

- entry
  - image
  - title
  - body
   ...
- entry
  - image
  - title
  - body

- footer text 
```

我想以上面的格式呈现出来。

我有一些初步的想法，希望能提供以下方面的意见：

*   Ruby/Python 中的 YAML + 自定义处理器 - 但是降价格式的条目主体如何工作？
*   [Redcarpet](https://github.com/vmg/redcarpet)似乎允许自定义渲染，但我可以将其转换为上述格式吗？
*   Python Markdown - 我看到一些关于使用 python-markdown 扩展 markdown 的帖子，但我不确定它在这里的适用性如何？

毫无疑问，我忽略了一些非常简单的实现。

****更新****

对于这个问题的含糊之处，我深表歉意。我无法真正优雅地描述我正在尝试做的事情:(

最后，我使用了一个带有多行字符串的 YAML 文件，后来使用 Maruku 将其解析为 Markdown。

对于那些对它的工作原理和最终结果感兴趣的人，该项目在 github[上](https://github.com/PeterHamilton/digest-email)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:06:27.000

这是用于 html 输出的 python 版本。 [输出](http://jsfiddle.net/mmyjona/84WMb/3/embedded/result/)

```
import markdown
import pprint
import yaml
from mako.template import Template

pp = pprint.PrettyPrinter(indent=4)

MAX_WIDTH=50
raw = """
header:
    main_title: title text
    subtitle: subtitle text
    date: 2012-11-13

entries:
    - image: https://upload.wikimedia.org/wikipedia/en/c/cb/Placeholder_logo.png
      title: title1
      body: >
        Lorem ipsum dolor sit amet,
         consectetuer adipiscing elit,
         sed diam **nonummy** nibh euismod
         tincidunt ut laoreet dolore
         magna aliquam erat volutpat.

    - image: https://upload.wikimedia.org/wikipedia/en/c/cb/Placeholder_logo.png
      title: title2
      body: >
        * Lorem ipsum dolor sit amet,

        * consectetuer adipiscing elit,

        * sed diam **nonummy** nibh euismod

        * tincidunt ut laoreet dolore

        * magna aliquam erat volutpat.

footer:
    text: i'm footer
"""
stream = yaml.load(raw)

for i in range(len(stream['entries'])):
    stream['entries'][i]['html'] = markdown.markdown(stream['entries'][i]['body'])

md_template = """
<table>
    <tr><td colspan=2><h2>${stream['header']['main_title']}</h2></td></tr>
    <tr><td colspan=2><h3>${stream['header']['subtitle']}</h3></td></tr>
    <tr><td colspan=2><h3>${str(stream['header']['date'])}</h3></td></tr>

    % for x in stream['entries']:
        <tr>
            <td>
            <img src=${x['image']}>
            </td>
            <td>
            <h3>${x['title']}</h3>
            </br>
            ${x['html']}
            </td>
        </tr>
    % endfor
</table>
"""

print Template(md_template).render(stream = stream) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:13:16.643

这听起来像是 Jekyll 的一个很好的用例：[https ://github.com/mojombo/jekyll](https://github.com/mojombo/jekyll)

或者，您可以使用任何模板系统（ERb、Haml 等）+ 任何 Markdown 系统（我喜欢 RedCarpet），然后使用一个简单的 Ruby 对象从 Markdown 文件中提取 YAML frontmatter：

```
 class Page
    def initialize(source_file)
      self.filename = File.basename(source_file)

      read_page(source_file)
    end

    attr_reader :filename, :metadata, :contents

    private

    attr_writer :filename, :metadata, :contents

    def read_page(filename)
      self.contents = File.read(filename)

      begin
        if (md = contents.match(/^(?<headers>---\s*\n.*?\n?)^(---\s*$\n?)/m))
          self.contents = md.post_match
          self.metadata = YAML.load(md[:headers])
        end
      rescue => e
        puts "YAML Exception reading #{filename}: #{e.message}"
      end
    end
  end 
```

使用这个对象，假设你有一个文件被调用`first_post.md`，内容如下：

```
---
title: First Post
category: essays
---

# My First Post!

It's *really* awesome 
```

您可以通过`Page`以下方式使用对象处理它：

```
page = Page.new("first_post.md")
p page.metadata[:title]    #=> "First Post"
p page.metadata[:category] #=> "essays"
p page.contents            #=> "# My First Post!\n\nIt's *really* awesome"

markdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML)
formatted_content = markdown.render(page.contents)
   #=> "<h1>My First Post!</h1>\n\n<p>It&#39;s <em>really</em> awesome</p>\n" 
```

从这里开始，您需要做的就是连接模板引擎。如果您已经在使用 HTML 模板，[ERb 可能是最简单](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)的。

您将有一个名为 的模板`layout.erb`，这将是一个混合了一些 Ruby 的 HTML 文件：

```
<html>
  <body>
     <h1><%= page.metadata[:title] %></h1>
     <%= formatted_content %>
  </body>
<html> 
```

然后，您将执行以下操作：

```
puts ERB.new(File.read("layout.erb")).result(binding) 
```

从那里开始，我认为您将拥有所需的东西，但显然您首先需要以更有条理的方式将所有这些缝合在一起:-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T18:28:29.960

我认为您需要一个名为 texttable 的库来格式化多行文本。然后你可以使用正则表达式来替换你需要的装饰。

```
__author__ = 'mmyjona'
#coding=utf-8

import pprint
from texttable import Texttable
import yaml

pp = pprint.PrettyPrinter(indent=4)

#set the width here
MAX_WIDTH=50
raw = """
header:
    main_title: title text
    subtitle: subtitle text
    date: 2012-11-13

entries:
    - image: 1.jpg
      title: title1
      body: Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.

    - image: 2.jpg
      title: title2
      body: Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.

footer:
    text: i'm footer
"""
stream = yaml.load(raw)

pp.pprint(stream)

tar = """
############################
#          HEADER          #
# ======================== #
#   IMAGE | Title          #
#         | Description    #
# ------------------------ #
#           ...            #
# ------------------------ #
#   IMAGE | Title          #
#         | Description    #
# ======================== #
#          FOOTER          #
############################
"""
table1 = Texttable()
table1.__init__(max_width=MAX_WIDTH)
table1.set_chars(['=', '|', '+', '-'])
table1.set_cols_align(["r", "l"])
table1.set_cols_valign(["t", "t"])
table1.add_rows([["foo","bar"]
    ,["Main Title",stream['header']['main_title']+"\n"]
    ,["Subtitle",stream['header']['subtitle']+"\n"]
    ,["Date",str(stream['header']['date'])+"\n"]
])

for x in stream['entries']:
    table1.add_row([x['image'],x['title'] + "\n" + x['body']])

table1.add_row(['Footer', stream['footer']['text']])
print table1.draw() + "\n" 
```

输出：

```
{   'entries': [   {   'body': 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.',
                       'image': '1.jpg',
                       'title': 'title1'},
                   {   'body': 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.',
                       'image': '2.jpg',
                       'title': 'title2'}],
    'footer': {   'text': "i'm footer"},
    'header': {   'date': datetime.date(2012, 11, 13),
                  'main_title': 'title text',
                  'subtitle': 'subtitle text'}}
+=======================+=======================+
|          foo          |          bar          |
+-----------------------+-----------------------+
|            Main Title | title text            |
+=======================+=======================+
|              Subtitle | subtitle text         |
+=======================+=======================+
|                  Date | 2012-11-13            |
+=======================+=======================+
|                 1.jpg | title1                |
|                       | Lorem ipsum dolor sit |
|                       | amet, consectetuer    |
|                       | adipiscing elit, sed  |
|                       | diam nonummy nibh     |
|                       | euismod tincidunt ut  |
|                       | laoreet dolore magna  |
|                       | aliquam erat          |
|                       | volutpat. Ut wisi     |
|                       | enim ad minim veniam, |
|                       | quis nostrud exerci   |
|                       | tation ullamcorper    |
|                       | suscipit lobortis     |
|                       | nisl ut aliquip ex ea |
|                       | commodo consequat.    |
+=======================+=======================+
|                 2.jpg | title2                |
|                       | Lorem ipsum dolor sit |
|                       | amet, consectetuer    |
|                       | adipiscing elit, sed  |
|                       | diam nonummy nibh     |
|                       | euismod tincidunt ut  |
|                       | laoreet dolore magna  |
|                       | aliquam erat          |
|                       | volutpat. Ut wisi     |
|                       | enim ad minim veniam, |
|                       | quis nostrud exerci   |
|                       | tation ullamcorper    |
|                       | suscipit lobortis     |
|                       | nisl ut aliquip ex ea |
|                       | commodo consequat.    |
+=======================+=======================+
|                Footer | i'm footer            |
+=======================+=======================+ 
```

# php - 使用 Silex 框架进行路由

> ID：13347795
> 
> 赞同：0
> 
> 时间：2012-11-12T16:48:36.643
> 
> 标签：php, silex

大家好，我想使用 MicroFramework Silex 来创建我网站的路由部分。我遇到的问题是我无法使其工作，因为我并不真正了解文档。

我已经在我的文件树中实现了所需的文件，并在 index.php 中添加了一些代码

这段代码如下：

```
$app = new Silex\Application(); 

$app->post('/web/{slug}', __DIR__.'/Controller/PostsController::showPost()');

$app->run(); 
```

我还创建了一个名为 Controller 的目录，其中包含 PostsController 类。但现在我不知道如何继续 有人可以给我一个简单的例子来说明如何创建与我的导航类一起使用的动态路由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:57:46.267

您正在混合文件路径和类名/回调函数。传递给`post/get/match`方法的第二个参数必须是可以解析为可调用的东西，因此它可以是 lambda 函数、对象/类和方法名称的数组或带有函数/类::方法的字符串，即：

```
//Lambda
$app->get('/web/{slug}', function(){
        return \MyNamespace\Controler\PostControler::showPost();
    }
);    

//Static call
$app->get('/web/{slug}', array('\\MyNamespace\\Controler\\PostControler','showPost'));

//Object call
$myCtrl = new \MyNamespace\Controler\PostControler();
$app->get('/web/{slug}', array($myCtrl,'showPost'));

//Function
function showPost(){
    return \MyNamespace\Controler\PostControler\showPost();
}
$app->get('/web/{slug}', 'showPost');

//Both static and not methods
$app->get('/web/{slug}', '\\MyNamespace\\Controler\\PostControler::showPost'); 
```

创建自己的命名空间时，[记得将它们添加到自动加载器](https://stackoverflow.com/questions/13200941/route-php-cant-fide-controller-class-i-created)

# maven - 操纵项目版本属性以删除 SNAPSHOT？

> ID：13347796
> 
> 赞同：24
> 
> 时间：2012-11-12T16:48:50.753
> 
> 标签：maven, maven-assembly-plugin, teamcity-7.0

我有一个版本为 0.0.1-SNAPSHOT 的项目，当我们通过 TeamCity 构建它时，我们还获得了一个 build.vcs.number 属性，它是触发构建的 Subversion 版本。

在我们的程序集中，我们创建了一个名为 foo-distribution-0.0.1-SNAPSHOT.zip 之类的 zip 文件，但我想知道是否有一种方法可以将 build.vcs.number 属性插入到工件名称中以提供 foo-分发-0.0.1.12345-SNAPSHOT.zip？

是否有一个内置属性只是版本号的数字部分，或者是其他一些拆分 -SNAPSHOT 部分的方式？

编辑：我已经尝试将 pom.xml 版本设置为 ${my.version}-SNAPSHOT，然后在属性中定义 my.version - 这适用于任何情况，除了 Maven 发布插件，它抱怨它无法解析版本（可以理解，它也不能自动猜测下一个开发版本）。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-08-14T14:40:00.937

我意识到这个问题有点过时了，但我遇到了类似的情况，这就是我解决它的方法：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.8</version>
    <executions>
      <execution>
        <id>parse-version</id>
        <goals>
          <goal>parse-version</goal>
        </goals>
      </execution>
    </executions>
</plugin> 
```

这个 build-helper 插件的“parse-version”mojo 将为您提供以下属性，您可以根据需要使用它们：

```
parsedVersion.majorVersion
parsedVersion.minorVersion
parsedVersion.incrementalVersion
parsedVersion.qualifier
parsedVersion.buildNumber 
```

这应该涵盖您想要的所有版本“部分”。我目前正在使用它来构建 chrome 扩展，其中清单版本不能包含“-SNAPSHOT”，并且最多只能由点分隔 4 个数字。在我的用例中，我使用这种组合来产生所需的结果：

```
"version":"${parsedVersion.majorVersion}.${parsedVersion.minorVersion}.${parsedVersion.incrementalVersion}" 
```

所以，我基本上是在剥离“-SNAPSHOT”，所以我的扩展的本地开发副本将正确安装以进行测试。你可以用这些碎片建造任何你想要的东西。=)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-19T13:58:26.723

对于其他想要做更多事情或想从内部版本号中删除 SNAPSHOT 的人，这个插件非常有用 [http://www.mojohaus.org/build-helper-maven-plugin/usage.html](http://www.mojohaus.org/build-helper-maven-plugin/usage.html)

我特别发现这很有用

**通过对值应用正则表达式替换来设置属性**

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.9.1</version>
        <executions>
          <execution>
            <id>regex-property</id>
            <goals>
              <goal>regex-property</goal>
            </goals>
            <configuration>
              <name>human.version</name>
              <value>$\{project.version}</value>
              <regex>-SNAPSHOT</regex>
              <replacement> pre-release development version</replacement>
              <failIfNoMatch>false</failIfNoMatch>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-13T15:13:45.993

对于那些想要在他们的版本中使用 4 个数字 (xyza) 的人，这里是您可以配置[Build Helper Maven 插件](https://www.mojohaus.org/build-helper-maven-plugin/index.html)的方法。这个想法是替换`x.y.z.a-SNAPSHOT`将`x.y.z-a`允许 build-helper 插件解析`buildNumber`.

该`antrun`插件仅用于调试目的。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>3.0.0</version>
            <executions>
                <execution>
                    <id>regex-property</id>
                    <goals>
                        <goal>regex-property</goal>
                    </goals>
                    <configuration>
                        <name>modified.version</name>
                        <value>${project.version}</value>
                        <regex>\.([0-9]+)-SNAPSHOT</regex>
                        <replacement>-$1</replacement>
                        <failIfNoMatch>false</failIfNoMatch>
                    </configuration>
                </execution>

                <execution>
                    <id>parse-version</id>
                    <goals>
                        <goal>parse-version</goal>
                    </goals>
                    <configuration>
                    <versionString>${modified.version}</versionString>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <echo>Major: ${parsedVersion.majorVersion}</echo>
                            <echo>Minor: ${parsedVersion.minorVersion}</echo>
                            <echo>Incremental: ${parsedVersion.incrementalVersion}</echo>
                            <echo>Qualifier: ${parsedVersion.qualifier}</echo>
                            <echo>BuildNumber: ${parsedVersion.buildNumber}</echo>
                            <echo>----------------</echo>
                            <echo>Next Major: ${parsedVersion.nextMajorVersion}</echo>
                            <echo>Next Minor: ${parsedVersion.nextMinorVersion}</echo>
                            <echo>Next Incremental: ${parsedVersion.nextIncrementalVersion}</echo>
                            <echo>Next BuildNumber: ${parsedVersion.nextBuildNumber}</echo>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

`mvn validate`在版本为 7.0.0.29-SNAPSHOT 的项目上运行：

```
[INFO] --- build-helper-maven-plugin:3.0.0:regex-property (regex-property) @
[INFO] --- build-helper-maven-plugin:3.0.0:parse-version (parse-version) @ 
[INFO] --- maven-antrun-plugin:1.1:run (default) @ 
[INFO] Executing tasks
 [echo] Major: 7
 [echo] Minor: 0
 [echo] Incremental: 0
 [echo] Qualifier:
 [echo] BuildNumber: 29
 [echo] ----------------
 [echo] Next Major: 8
 [echo] Next Minor: 1
 [echo] Next Incremental: 1
 [echo] Next BuildNumber: 30 
```

# agile - 软件开发方法 - 竞争开发

> ID：13347806
> 
> 赞同：-3
> 
> 时间：2012-11-12T16:49:11.057
> 
> 标签：agile, methodology

软件开发方法的名称是什么，其中：

*   多个团队孤立地处理相同的功能

在冲刺结束时，每个团队都会提出解决方案并：

*   最佳解决方案获胜并被接受
*   失败的解决方案被丢弃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:55:23.913

这个前提是汤姆·德马科 1997 年小说的主题，题为[《最后期限：关于项目管理的小说》](https://rads.stackoverflow.com/amzn/click/com/0932633390)。

# ios - UIPageControl 与 UIScrollView 结合时不可见

> ID：13347813
> 
> 赞同：4
> 
> 时间：2012-11-12T16:49:38.593
> 
> 标签：ios, uiscrollview, viewcontroller, uipagecontrol, uiscrollviewdelegate

我想利用页面控件在几个视图控制器之间切换。我有以下 viewController，其关联的 nib 包含 UIScrollView 和 UIPageControl。我使用 Xcode 的 IB 将滚动视图放置在页面控件上方，使两个控件都可见，这是 .h 文件：

```
@interface NewForm : UIViewController <UIScrollViewDelegate>
{
   BOOL pageControlUsed;
}
@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIPageControl *pageControl;
@property (nonatomic, retain) NSMutableArray *viewControllers;

- (IBAction)changePage:(id)sender;

@end 
```

*视图*和*scrollView*出口链接到 File的所有者，以及滚动视图的委托。*pageControl* outlet 和*changePage*链接到 UIPageControl。

这是 .m 文件（实际上只有相关的方法）：

```
@implementation STNewAccountTest
@synthesize scrollView, viewControllers, pageControl;

- (void)viewDidLoad
{
  [super viewDidLoad];

  NSMutableArray *controllers = [[NSMutableArray alloc] init];
 [controllers addObject:[[Page1 alloc] initWithNibName:@"Page1" bundle:nil]];
 [controllers addObject:[[Page2 alloc] initWithNibName:@"Page2" bundle:nil]];
 self.viewControllers = controllers;

 scrollView.pagingEnabled = YES;
 scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * numberOfPages, scrollView.frame.size.height);
 scrollView.showsHorizontalScrollIndicator = NO;
 scrollView.showsVerticalScrollIndicator = NO;
 scrollView.scrollsToTop = NO;
 scrollView.delegate = self;

 self.pageControl.currentPage = 0;
 self.pageControl.numberOfPages = numberOfPages;

 [self loadScrollViewWithPage:0];
}

- (void)loadScrollViewWithPage:(int)page
{
  if ((page < 0) || (page >= numberOfPages))
    return;

  Page1 *controller1 = nil;
  Page2 *controller2 = nil;

  if (page == 0) {
    controller = [self.viewControllers objectAtIndex:page];

    if (controller == nil) {
        controller = [[Page1 alloc] initWithNibName:@"Page1" bundle:nil];
        [self.viewControllers replaceObjectAtIndex:page withObject:controller];
    }
}
if (page == 1) {
    controller = [self.viewControllers objectAtIndex:page];

    if (controller == nil) {
        controller = [[Page2 alloc] initWithNibName:@"Page2" bundle:nil];
        [self.viewControllers replaceObjectAtIndex:page withObject:controller];
    }
}

if (controller.view.superview == nil)
{
    CGRect frame = self.scrollView.frame;
     frame.origin.x = frame.size.width * page;
     frame.origin.y = 0;
     controller.view.frame = frame;
    [self.scrollView addSubview:controller.view];
}
}

- (void)scrollViewDidScroll:(UIScrollView *)sender
{
  if (pageControlUsed)
  {
    return;
  }

  // Switch the indicator when more than 50% of the previous/next page is visible
  CGFloat pageWidth = scrollView.frame.size.width;
  int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
  pageControl.currentPage = page;

  // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
  [self loadScrollViewWithPage:page - 1];
  [self loadScrollViewWithPage:page];
  [self loadScrollViewWithPage:page + 1];
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
  pageControlUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
  pageControlUsed = NO;
}

- (IBAction)changePage:(id)sender
{
  int page = pageControl.currentPage;

  // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
  [self loadScrollViewWithPage:page - 1];
  [self loadScrollViewWithPage:page];
  [self loadScrollViewWithPage:page + 1];

// update the scroll view to the appropriate page
  CGRect frame = scrollView.frame;
  frame.origin.x = frame.size.width * page;
  frame.origin.y = 0;
  [scrollView scrollRectToVisible:frame animated:YES];

// Set the boolean used when scrolls originate from the UIPageControl
  pageControlUsed = YES;
} 
```

当我运行该应用程序时，我看到的是页面视图占据了整个屏幕，并且我能够通过滚动视图的分页功能在页面中导航，但是页面控件及其点不显示。我能错过什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:39:24.987

Answered here: [https://stackoverflow.com/a/4245642/1455770](https://stackoverflow.com/a/4245642/1455770)

"If the page control's and container's background color is the same (by default white) page control won't be visible."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T07:06:31.680

将您的页面控制器放在 xid 中的 ScrollView 之外，并为页面控制器提供合适的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:31:04.487

它是 IB 中对象的颜色或顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T19:55:49.280

我花了几天时间试图解决这个问题，但在网上找不到任何可以为我解决问题的解决方案。这就是打动我并且实际上对我有用的东西-您的 UIScroll 视图可能会占用整个视图控制器，因此覆盖了页面控件。尝试简单地缩短滚动视图，您的页面控件现在显然是可见的。将页面控件的背景与视图控制器的背景相匹配，以实现无缝完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-20T07:30:23.007

```
 private func setupPageControl() {

     pageControl = UIPageControl(frame:.zero)
     pageControl.translatesAutoresizingMaskIntoConstraints = false
     pageControl.currentPageIndicatorTintColor = UIColor.orange
     pageControl.pageIndicatorTintColor = UIColor.lightGray.withAlphaComponent(0.8)
     pageControl.numberOfPages = 3;
     pageControl.currentPage = 0;
     self.bringSubviewToFront(pageControl)
     addSubview(pageControl)

    let widthConstraint = NSLayoutConstraint(item: pageControl, attribute: NSLayoutConstraint.Attribute.width, relatedBy: NSLayoutConstraint.Relation.equal, toItem: nil, attribute: NSLayoutConstraint.Attribute.notAnAttribute, multiplier: 1, constant: 50)
    let heightConstraint = NSLayoutConstraint(item: pageControl, attribute: NSLayoutConstraint.Attribute.height, relatedBy: NSLayoutConstraint.Relation.equal, toItem: nil, attribute: NSLayoutConstraint.Attribute.notAnAttribute, multiplier: 1, constant: 50)
    let horizontalConstraint = NSLayoutConstraint(item: pageControl, attribute: NSLayoutConstraint.Attribute.centerX, relatedBy: NSLayoutConstraint.Relation.equal, toItem: self, attribute: NSLayoutConstraint.Attribute.centerX, multiplier: 1, constant: 0)
    let verticalConstraint = NSLayoutConstraint(item: pageControl, attribute: NSLayoutConstraint.Attribute.bottom, relatedBy: NSLayoutConstraint.Relation.equal, toItem: self, attribute: NSLayoutConstraint.Attribute.bottom, multiplier: 1, constant: 0)
    self.addConstraints([widthConstraint, heightConstraint, horizontalConstraint,verticalConstraint])
} 
```

> 请尝试上面的代码将此添加为 View 的子视图，其中保留滚动视图，即 PageControl 和 Scrollview 应该是相同 UIView 的子视图

# javascript - 白名单 PDF 嵌入

> ID：13347815
> 
> 赞同：0
> 
> 时间：2012-11-12T16:49:40.040
> 
> 标签：javascript, node.js, pdf

有没有一种方法或服务允许只读（不保存或下载）PDF 仅嵌入一个域？我知道有像 Scribd 和 Slideshare 这样的服务，但问题是虽然它们确实有私人选项，但据我所知，没有任何服务允许将嵌入列入白名单（例如，只允许在某些域上嵌入。）Vimeo 可以做到这一点视频，我也不介意为此服务付费。有任何想法吗？

我还研究了 PDFJS，似乎他们有一个 NodeJS 实现，所以我想 PDFJS 可能可以从服务器端的服务器获取 PDF 并将其流式传输到客户端而不暴露原始 PDF url。但是我找不到 PDFJS 的好文档。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:21:12.177

这可以通过任何 HTTP 服务器来实现，但是由于您在问题中提到了 Node，我们将使用该技术解决问题。我也假设 Express 框架。

首先，您只需将 PDF 作为静态文件托管在您的服务器上。然后，您将注册一些检测 PDF 请求的中间件。如果请求的主机名与“已批准”域列表不匹配，则您将错误返回给客户端。如果域获得批准，您将提供 PDF。这与 Apache 中限制域/IP 访问的 .htaccess 文件或 Nginx 配置中的“允许”块没有什么不同。这是中间件功能的快速浏览...

```
var approved = []; // Add your approved domains here.

// Make sure this middleware comes before app.use(express.static)
app.use(function(req, res, next){
    if(req.url == '/path/to/PDF') {
        if(approved.indexOf(req.headers.host) {
            next();
        } else {
            next(new Error('Nu uh uh!')); 
        }
    } else {
        next();
    }
}); 
```

这样，即使他们复制嵌入代码，他们也会从服务器收到错误（可能应该是 403，但这些是您可以自行决定的语义）

# iphone - 内存泄漏 CGBitmapContextCreateImage

> ID：13347816
> 
> 赞同：1
> 
> 时间：2012-11-12T16:49:47.500
> 
> 标签：iphone, memory-leaks, uiimage

在 Instruments 中，它告诉我在我的 resizedImage 方法中存在由 CGBitmapContextCreateImage 引起的泄漏。然而，经过大量的研究和反复试验，我得出的结论是它是在调用链的其他地方引起的。

调用链如下：
takeFoto -> saveFoto -> setImage_bg -> bolly -> resizedImage

这是所有相关代码

```
-(void)takeFoto

{
[stillImageOutput captureStillImageAsynchronouslyFromConnection:self.videoConnection completionHandler:
 ^(CMSampleBufferRef imageSampleBuffer, NSError *error) 
{
    NSData* idata = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];//[od copy];

    UIImage *image = [UIImage imageWithData:idata];

    CGImageRef cgi = [image CGImage];

    CGImageRef cgi2 = CGImageCreateWithImageInRect(cgi, CGRectMake(0, 0, CGImageGetWidth(cgi), CGImageGetHeight(cgi));

    UIImageOrientation iori;
    if(self.devOri==UIInterfaceOrientationLandscapeRight)
    {
        if([self isFrontCamera]) iori = UIImageOrientationDownMirrored;
        else iori = UIImageOrientationUp;
    }
    else if(self.devOri==UIInterfaceOrientationLandscapeLeft)
    {
        if([self isFrontCamera]) iori = UIImageOrientationUpMirrored;
        else iori = UIImageOrientationDown;
    }
    else if(self.devOri==UIInterfaceOrientationPortraitUpsideDown)
    {
        if([self isFrontCamera]) iori = UIImageOrientationRightMirrored;
        else iori = UIImageOrientationLeft;
    }
    else
    {
        if([self isFrontCamera]) iori = UIImageOrientationLeftMirrored;
        else iori = UIImageOrientationRight;
    }
    UIImage *scaledImage = [[UIImage alloc] initWithCGImage:cgi2 scale:1 orientation:iori];

    CGImageRelease(cgi2);

    self.foto = scaledImage;
    [scaledImage release];

    [parent saveFoto];
 }];
}

-(void)saveFoto
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

[self setImage_bg:captureManager.foto];

[pool release];
}

-(void)setImage_bg:(UIImage*)oimg
{
CGSize sz = savePreview.frame.size;
UIImage* img = [oimg copy];

[savePreview setImage:[filters resizeImage:img size:sz]];

sz = CGSizeMake(64, 64);
UIImage* img2 = [filters resizeImage:img size:sz]; 

bolPrv.image = [filters bolly:img2];

[img release];
}

//filters bolly
-(UIImage*)bolly:(UIImage*)img
{
CIImage *beginImage = [CIImage imageWithCGImage:img.CGImage];
CIContext *context = [CIContext contextWithOptions:nil];

UIImage* bb = [UIImage fromFile:@"bollywoodBlend3.png"];
UIImage* bb2 = [bb resizedImage:img.size interpolationQuality:kCGInterpolationMedium];
CIFilter *filter = [CIFilter filterWithName:@"CIOverlayBlendMode"
                              keysAndValues: kCIInputImageKey, beginImage,
                    @"inputBackgroundImage", [CIImage imageWithCGImage:bb2.CGImage], nil];
CIImage *outputImage = filter.outputImage;

filter = [CIFilter filterWithName:@"CIColorControls"
                    keysAndValues: kCIInputImageKey, outputImage,
          @"inputSaturation", [NSNumber numberWithFloat:1.8],
          @"inputBrightness", [NSNumber numberWithFloat:0.1],
          @"inputContrast", [NSNumber numberWithFloat:1.5],
           nil];
outputImage = filter.outputImage;

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
UIImage *newImg =  [UIImage imageWithCGImage:cgimg];

CGImageRelease(cgimg);

return [newImg autorelease];
}

// filters resizeImage (same code used for resizedImage)
- (UIImage *)resizeImage:(UIImage*)img size:(CGSize)newSize
{
CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
CGImageRef imageRef = img.CGImage;

// Build a context that's the same dimensions as the new size
CGColorSpaceRef csr = CGImageGetColorSpace(imageRef);
CGContextRef bitmap = CGBitmapContextCreate(NULL,
                                            newRect.size.width,
                                            newRect.size.height,
                                            CGImageGetBitsPerComponent(imageRef),
                                            4*newRect.size.width,
                                            csr,
                                            CGImageGetBitmapInfo(imageRef));

// Draw into the context; this scales the image
CGContextDrawImage(bitmap, newRect, imageRef);

//    CGImageSourceCreateThumbnailAtIndex

// Get the resized image from the context and a UIImage
CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);
UIImage *newImage = [UIImage imageWithCGImage:newImageRef scale:img.scale orientation:img.imageOrientation];

// Clean up
CGImageRelease(newImageRef);
CGContextRelease(bitmap);

return newImage;
}

- (UIImage *)resizedImage:(CGSize)newSize
            transform:(CGAffineTransform)transform
       drawTransposed:(BOOL)transpose
 interpolationQuality:(CGInterpolationQuality)quality 
{
CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
CGRect transposedRect = CGRectMake(0, 0, newRect.size.height, newRect.size.width);
CGImageRef imageRef = self.CGImage;

// Build a context that's the same dimensions as the new size
CGColorSpaceRef csr = CGImageGetColorSpace(imageRef);
CGContextRef bitmap = CGBitmapContextCreate(NULL,
                                            newRect.size.width,
                                            newRect.size.height,
                                            CGImageGetBitsPerComponent(imageRef),
                                            4*newRect.size.width,
                                            csr,
                                            CGImageGetBitmapInfo(imageRef));

// Rotate and/or flip the image if required by its orientation
CGContextConcatCTM(bitmap, transform);

// Set the quality level to use when rescaling
CGContextSetInterpolationQuality(bitmap, quality);

// Draw into the context; this scales the image
CGContextDrawImage(bitmap, transpose ? transposedRect : newRect, imageRef);

//    CGImageSourceCreateThumbnailAtIndex

// Get the resized image from the context and a UIImage
CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);
UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

// Clean up
CGImageRelease(newImageRef);
CGContextRelease(bitmap);

return newImage;
 }

// UIImage from file
+(UIImage*)fromFile:(NSString*)fname
{
NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
return [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", bundlePath,fname]];
} 
```

# c# - 如何从用 Visual Studio 2012 编写的 C# 代码生成 UML 图到 Visio 2010 中？

> ID：13347817
> 
> 赞同：13
> 
> 时间：2012-11-12T16:49:48.870
> 
> 标签：c#, visual-studio-2012, uml, reverse-engineering, visio

我试图找到一种方法来从我用 Visual Studio 2012 编写的 C# 代码生成 UML 图（序列图、类图等）。

[我在http://office.microsoft.com/en-us/visio-help/about-reverse-engineering-code-to-the-uml-HP001208803.aspx](http://office.microsoft.com/en-us/visio-help/about-reverse-engineering-code-to-the-uml-HP001208803.aspx)上看到了一个链接，我可以将我的 Visual Studio 项目引入 Visio .

但它的第一部分说“在 Visual Studio 环境中，逆向工程是通过项目菜单上的命令激活的。” 对我不起作用，因为我在“项目”菜单下找不到逆向工程选项。

如何从用 Visual Studio 2012 编写的 C# 代码生成 UML 图到 Visio 2010 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T23:18:53.090

Microsoft 不再将 Visio 视为软件工程工具。有一个名为“Visio for Enterprise Architects”的版本，它与 Visual Studio 进行了集成。它在最高端的 Visual Studio 版本中可用。

我相信它最后一次支持 Visual Studio 2005，尽管那可能是 2003 年。

Visual Studio Ultimate 现在有自己的内置 UML 功能，不依赖于 Visio。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T23:11:01.243

过去的爆炸。自从我将任何东西逆向工程到 UML 中已经有一段时间了，所以我的知识可能已经过时了。无论如何，据我所知，使用 Visio 的代码逆向工程是 Visio 功能而不是 Visual Studio 功能，我认为某些版本的 Visual Studio 有自己的建模功能。

为了使用 Visio 逆向工程，您需要确保安装了 Visio UML 插件（它应该在专业及以上版本的 Visio 中可用，但默认情况下可能未安装。）

[对于旧版本的 Visio 和 Visual Studio，这](http://msdn.microsoft.com/en-us/library/office/aa140255%28v=office.10%29.aspx)是一个相当古老的逐步过程。我认为这个过程没有太大变化（尽管显然支持的语言已经改变。）

无论如何，我从不喜欢用于 UML 的 Visio（说实话，我从不喜欢 Visio。）我更喜欢[Sparx System 的 Enterprise Architect](http://www.sparxsystems.com/products/ea/index.html)用于建模，当我在 .Net 2.0 上使用它时，它们的逆向工程非常好。我不知道他们当前的版本如何应对新功能。我也更喜欢他们的“从头开始”建模环境。

最后请记住，UML 应该是一种建模而不是编程语言。即，它旨在传达高级设计，以便更容易理解解决方案的整体架构；或者再次对关键动态交互进行建模，因此可以更容易地理解对建模问题实施或提出的解决方案。

逆向工程 UML 图通常包含太多信息而无法使用，并且无论如何都难以将特定语言的精确语义转换为 UML。从头开始创建图表可能会更好。除了部署和包图，应该理解 UML 图代表高级概述或特定高级动态交互表示，而不是开发的表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:02:22.623

这取决于您使用的产品版本。我有 Visual Studio Professional 2012，但没有看到此选项。[如果您查看产品功能](http://www.microsoft.com/visualstudio/eng/products/visual-studio-professional-2012#product-edition-professional-details)，这是有道理的。但是，如果您查看[Visual Studio 2012 Ultimate 的产品功能](http://www.microsoft.com/visualstudio/eng/products/visual-studio-ultimate-2012#product-edition-ultimate-details)，您将看到 UML 建模和各种其他可视化工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:24:33.523

Visual Studio 2010 非终极版本允许通过使用尚未为 Visual Studio 2012 开发的[Feature Pack生成此 UML。](http://blogs.msdn.com/b/zainnab/archive/2012/06/12/visual-studio-feature-packs.aspx)正如 Dominic 提到的（他打败了我），[Visual Studio 2012 Ultimate](http://www.microsoft.com/visualstudio/eng/products/visual-studio-ultimate-2012#product-edition-ultimate-details)应该允许这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T12:54:38.803

只需选择一个成员（方法名称），Visual Studio Ultimate 2012 就可以为 C# 代码生成非常漂亮的序列图；如果我在 VB 代码中做同样的事情，它会在我的地方不断失败。

这与来自 Sparx 的 Enterprise Architect 形成鲜明对比，后者是用于 UML 和其他建模 AFAIK 的最先进的 CASE 工具。

# ruby-on-rails - 映射一条到 admin/news/show 的路由和另一个到 news/show 的路由，我需要 2 个控制器吗？

> ID：13347819
> 
> 赞同：0
> 
> 时间：2012-11-12T16:50:03.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3

其实我不明白如何正确处理这个。我有一种情况，可以使用 admin/edit admin/show admin/news... 和类似路径管理新闻，但是我想给用户一个名为 news/show/1 的页面，因为实际上我的新闻资源是在“ admin”命名空间，我应该如何处理我需要在“admin”命名空间之外绑定新闻路由的事实？

其实我只有这个：

```
namespace :admin do
  resources :news
end 
```

**我的点子：**

```
namespace :admin do
  resources :news
end
resources :news 
```

然后我会有：

*   应用程序/控制器/管理员/news_controller.rb
*   应用程序/控制器/news_controller.rb

它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:14:28.073

看到你的回答，我可以建议更简单的路线。

```
#routes.rb
namespace :admin do
  resources :news
end

resources :news, :only => [:show] 
```

如果您也想`index`采取行动，请将最后一行重写为：

```
resources :news, :only => [:index, :show] 
```

您将不需要`news_path`and的助手`news_url`。你会得到他们已经为你建造的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:38:32.013

好吧，在路线上做了一些工作之后，我明白了如何构建我想要的东西：

```
namespace :admin do
  resources :news
end

get 'news/:id(.:format)' => 'news#show' 
```

这是因为我的新闻不需要所有路线，而只需要显示（我也可以添加索引，但目前不需要）。通过这种方式，我可以在 2 个不同的控制器上处理所有事情，这更好，因为我在新闻控制器上使用了重定向之类的东西，而我在 Admin::NewsController 上没有使用。

我注意到另一个重要的事情，如果你以这种方式构建路由，**news_path 和 news_url 将不会被创建**。因此，我不得不在 news_helpers 中以这种方式手动创建它们：

```
module NewsHelper
  def news_url(record)
    url_for controller: 'news', action: 'show', only_path: false, id: record.slug
  end

  def news_path(record)
    url_for controller: 'news', action: 'show', only_path: true, id: record.slug
  end
end 
```

（slug 用于 seo 友好的 url）然后我以这种方式简单地将助手包含在我的控制器中：

```
class NewsController < ApplicationController
  include NewsHelper 
```

一切都按我的意愿工作，看起来也很棒。

# mysql - 如何关联两个 MySQL 表中的数据？

> ID：13347830
> 
> 赞同：0
> 
> 时间：2012-11-12T16:50:42.807
> 
> 标签：mysql, sql, database, database-design

我正在设计一个基本上必须存储两种元素的网络应用程序：帖子和容器（它们是帖子数组）

我已经完成了数据库，以便在容器的每一行中存储它所拥有的帖子数组的字符串化版本。

问题是，当我每次调用容器时删除帖子时，我都有帖子的 ID，我必须检查帖子是否还活着。

有一个更好的方法吗 ？例如构造容器表以保存指向实际帖子的“指针”？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:05:11.680

如果我理解正确，你有一个一对多的关系：每个容器可以有很多帖子，但每个帖子都与一个容器相关。所以你的数据库设计应该反映这一点。

例子：

```
create table tbl_containers (
    containerId int unsigned not null auto_increment primary key,
    containerDescription varchar(100)
);
create table tbl_posts (
    postId int unsigned not null auto_increment primary key,
    containerId int unsigned not null,
    postText varchar(100),
    index idxContInd(containerId)
); 
```

当您填写数据时，每个帖子都必须与一个容器相关联；换句话说，在可以输入帖子之前，必须有一个容器来容纳它，如果没有“合适”的容器，则应该在创建帖子*之前*创建它。

在您的数据在表中后，可以轻松查找帖子并删除它们，而与每个帖子所属的容器无关。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:06:52.153

在两个表之间使用外键关系将是理想的。

首先，如果我正确理解您的数据之间的关系，您的`Container`表格将是包含与唯一 ID 相关的信息的表格。`Posts 表然后有自己的唯一 id、containerId 和帖子内容本身。

抽出来，看起来有点像这样。

```
Container
---
id 
```

* * *

```
Posts
---
id | containerId | post 
```

`Container`和之间的关系`Posts`假定为*一对多*；也就是说，一个容器可能有多个帖子，但一个帖子不能属于多个容器。如果您想要这种关系，您可能必须为此添加另一列到`Posts`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:36:03.847

这是支持我的评论的答案，该评论收到了一些积极的反馈:) 尽管您已经在那里有了答案。

您的 Container 将负责这些职位。所以就像一个篮子里装着很多东西。因此，对于每个帖子，都有一个容器 ID。对于容器表 - 容器 id 是主键。帖子表 - 帖子 ID 是主键。要拥有外键关系，您需要在您的帖子表中将您的容器 ID 设置为外键。如果这令人困惑 - 只需查看下面的表模式。如果要*在删除容器时删除与容器相关的任何帖子*，可以使用`ON CASCADE DELETE`父键（外键）删除任何孤儿（没有父母的孩子）。如果您希望拥有自动递增的 ID，则可以使用`AUTO_INCREMENT`否则只需将其删除。

请查看[sql 语法](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)以进一步了解。

```
CREATE TABLE tblParent (
    `CID` int NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `field2` varchar(100),
    `field3` varchar(100)
);

CREATE TABLE tblchild (
    `PID` int NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `PCID` int NOT NULL,
    `field2` varchar(100),
    `field3` varchar(100),
    FOREIGN KEY REFERENCE tblParent ('CID')
    ON DELETE CASCADE
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:59:50.520

我不确定我是否理解正确，但我会反过来这样做：你有你的 POST 表，其中有一个名为 container_ID 的字段。如果帖子被删除，那么 POST 表中的一行将被删除（包括指向其在 container_ID 中的父实体的指针）。在这种情况下，您可以在表之间创建外键关系，以保持数据库内的数据一致和关系完整。如果我误解了什么，请澄清..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T17:01:33.657

您可以创建具有两个字段的第三个表，例如“container_id”和“post_id”。然后，当您删除帖子时，您会删除所有包含 post_id 的条目，容器也是如此。确保表 primary_key 由 two_fields 组成，以避免条目重复。

# php - 在不加载页面的情况下触发我的 sql 查询 onchange 下拉事件

> ID：13347832
> 
> 赞同：-1
> 
> 时间：2012-11-12T16:50:50.700
> 
> 标签：php, javascript, highcharts

我一直在尝试从数据库中提取一些信息并使用它们生成高图，然后在我的页面 onchange 下拉事件的某些 div 中显示生成的高图。我不能使用 ajax 调用，因为它不支持从另一个页面提取 highchart（我已经尝试过）。我想做类似的事情，我以某种方式获取`$_POST['dropdown']`值，然后使用该值从 sql 查询中获取输出，然后将这些值传递给 highcharts javascripting 函数以在不加载页面的情况下生成 highcharts。

`$_POST['dropdown']`如果页面被加载，这很容易做到，因为我可以代表价值按照上述顺序生成结果。请帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:56:05.910

> 我不能使用 ajax 调用，因为它不支持从另一个页面提取 highchart（我已经尝试过了）

您唯一的其他选择是使用 JS 加载 iframe 的 src。为什么你不能使用 Ajax？

# node.js - node.js openCV 基础教程

> ID：13347833
> 
> 赞同：8
> 
> 时间：2012-11-12T16:51:00.723
> 
> 标签：node.js, opencv, image-recognition

我正在寻找将 OpenCV 与 node.js 结合使用的基本教程。我找不到任何描述该功能的东西，所以也许任何人都可以给我一个提示，我可以在哪里找到这些信息。希望有人有想法丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T18:59:31.413

有[node-opencv](https://github.com/peterbraden/node-opencv)模块可以在 node.js 中使用 OpenCV 绑定。那里有一些例子，但我还没有遇到任何教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T14:59:40.743

**替代解决方案**

我选择使用[本机模块](http://nodejs.org/api/addons.html)并更新我的 bindings.gyp 以包含并链接 ffmpeg/libav* 和 opencv

```
 'include_dirs+': [
    'src/',
    '<!@(pkg-config --cflags libavutil libavformat libavcodec libswscale )',
    '<!@(pkg-config --cflags opencv )'
  ],
  'link_settings': {
    'libraries': [
      '<!@(pkg-config --libs libavcodec libavformat libswscale libavutil)',
      '<!@(pkg-config --libs opencv)'
    ], 
```

# safari - 视差滚动仅在 Safari 中不稳定

> ID：13347834
> 
> 赞同：5
> 
> 时间：2012-11-12T16:51:00.340
> 
> 标签：safari, parallax

我目前正在与一家为我的大部分网站编写代码的网络公司合作。他们即将把网站交给我，但是 Safari 中的视差滚动存在问题；在所有其他浏览器中运行良好。此外，我在页面左侧也有一个受影响的小部件。垂直滚动时非常不稳定。非常感谢任何建议和帮助。这是该网站的链接：

[http://zerochroma.nclud.me/product/vario-protect-iphone-4-4s](http://zerochroma.nclud.me/product/vario-protect-iphone-4-4s)

这个问题似乎只存在于野生动物园中。

# html - HTML嵌入视频

> ID：13347837
> 
> 赞同：1
> 
> 时间：2012-11-12T16:51:07.917
> 
> 标签：html, css

我喜欢在我的页面上嵌入一个视频，并在它下面有一些填充。我有以下但不确定是否有更有效的方法：

```
 <div style="text-align: center;">

      <iframe width="560" height="315" src="http://www.youtube.com/embed/ti_E2ZKZpC4" frameborder="0" allowfullscreen></iframe>      

      <br />
      <br />
    </div> 
```

另外，我如何在它周围加上一条细线边框，并附上描述视频内容的文字：这意味着我喜欢在视频下方显示化学，然后在视频和文本化学周围有一个边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:03:45.727

在我看来，最有效的方法是使用 CSS 给包含的 div 一个边框，并给 iframe 一个底部边距。然后，文本可以在包含 div 内的 iframe 下方。

HTML 可能如下所示：

```
<div id="container">
    <iframe id="vid" width="560" height="315" src="http://www.youtube.com/embed/ti_E2ZKZpC4" frameborder="0" allowfullscreen></iframe>
    <p>Text/description go here</p>
</div> 
```

和CSS：

```
#container {
    border: 1px solid red;
    width: 560px;
    text-align: center;
}

#vid {
    margin-bottom: 25px;   
} 
```

这是一个 jsfiddle 示例：http: [//jsfiddle.net/kSfCR/3/](http://jsfiddle.net/kSfCR/3/)

编辑：格式化...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:54:30.027

怎么简化呢？

```
.myvideo {
    margin:0 0 30px;
}

<iframe class="myvideo" width="560" height="315" src="http://www.youtube.com/embed/ti_E2ZKZpC4" frameborder="0" allowfullscreen></iframe> 
```

# c++ - 如何自动链接到共享库的依赖项

> ID：13347841
> 
> 赞同：5
> 
> 时间：2012-11-12T16:51:12.970
> 
> 标签：c++, qt, linker, g++, ld

我正在尝试在 Linux 上构建一个小型 Qt (C++) GUI 应用程序，但由于大量链接器错误而无法构建，并抱怨我正在链接的 Qt 库缺少依赖项。我在 Qt 库上使用了 ldd 来验证这些库是否确实存在——它们确实存在。

我的问题似乎与此线程中的讨论有关： [Linking dependencies of a shared library](https://stackoverflow.com/questions/7508131/linking-dependencies-of-a-shared-library) 虽然该线程帮助我确定了我的确切问题，但似乎该线程的结论是我的应用程序应该链接！

应用程序使用以下命令编译：

```
g++ -m64 -Wl,-O1 -o Executable some-object.o some-other-object.o -lQtCore -lQtGui -lQtXml -L/usr/lib64 -L/usr/X11R6/lib64 -lpthread 
```

运行此程序会生成以下形式的警告，并且链接最终会因未定义的引用错误而失败（指向“缺失”库中定义的符号）：

```
.../ld: warning: libglib-2.0.so.0, needed by /usr/lib64/libQtGui.so, not found (try using -rpath or -rpath-link)
.../ld: warning: libpng14.so.14, needed by /usr/lib64/libQtGui.so, not found (try using -rpath or -rpath-link)
.../ld: warning: libz.so.1, needed by /usr/lib64/libQtGui.so, not found (try using -rpath or -rpath-link)
.../ld: warning: libfreetype.so.6, needed by /usr/lib64/libQtGui.so, not found (try using -rpath or -rpath-link) 
```

依此类推（总共有 18 个依赖项找不到。）

如果我去显式添加 -lglib、-lpng14、-lz -lfreetype 等，我可以编译它，但正如我提到的，有 18 个依赖项 - 我宁愿不这样做。看来我也不应该这样做。

我在我的笔记本电脑上编译了相同的项目，它使用完全相同的 Linux Distro (openSuse 12.2)，没有任何麻烦。包括 Qt 在内的所有库都是从发行版存储库安装的。

我认为这可能是我的 openSuse 安装中的某种设置问题，但我不知道从哪里开始寻找解决这个问题。

干杯，克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:53:31.443

似乎它们中`/usr/lib64/libQtGui.so`有硬编码的 rpaths 来定位依赖的共享库。在您的一台主机上，所需的库位于预期位置，而在另一台主机上则不在。

您可以使用诸如 elfdump 之类的东西`RPATH`从 QT 共享库中取出来找出它的位置。然后，您可以在链接命令行上使用（我相信）`-R`将其指向该主机上*实际*安装库的位置。

编辑：我认为你可以做类似的事情`objdump -x <binary/library> | grep -i rpath`

# resize - 是否有任何方法可以自动调整具有固定高度的 PdfCell 内容的字体大小，以便单元格中的所有内容都可见？

> ID：13347844
> 
> 赞同：1
> 
> 时间：2012-11-12T16:51:24.200
> 
> 标签：resize, sizing, itextpdf

我正在使用itext编写pdf。在将 Chunk 对象添加到具有固定高度的 PdfCell 之后，我无法在 itext API 中找到任何方法来自动调整其字体大小，因此它适合并且所有文本都完全可见。

是否有任何方法可以自动调整具有固定高度的 PdfCell 内容的字体大小，以便单元格中的所有内容都可见？

# javascript - Dojo 与 extjs 框架

> ID：13347847
> 
> 赞同：0
> 
> 时间：2012-11-12T16:51:27.407
> 
> 标签：javascript, web-services, extjs, dojo

我正在考虑创建一个具有“丰富”UI 界面的 web 应用程序。我正在研究 dojo 和 extjs，并试图评估什么可能是满足我要求的更好选择。只是为了简要说明我的要求，这是场景：

我有几个组件存储在数据存储中。我希望使用以下 UI 在浏览器中显示它们。

提供我的组件的树/表视图。

在地图（谷歌）上显示我的组件以便能够查看它们的地理位置。

能够在地图中选择多个组件并设置它们之间的连接（线），以便它们看起来是链接的

PS：我尝试查找一些 extJs 和 dojo 的比较，但它们似乎是几年前的，可能不再那么相关了。

我是 Web UI 框架的新手，因此易于使用一个框架对我来说也是一个因素

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:13:17.350

如果你是 web UI 框架的新手，我推荐你使用 ExtJS，它有更好的文档和易于使用，尤其是它的 UI 设计比 dojotoolkit 更好/现代，并且在行业层面上更加精致。

dojotoolkit 更适合高级用户（程序员、极客），它有很多很酷的概念/模式，它是第一个实现 AMD 并支持 NodeJs 的框架。在技​​术层面上，它是最好的。但直到现在，它仍然需要很多学习曲线。

老实说，我更喜欢dojo（在技术层面），但是对于一个新手，我建议你使用Extjs，你可能使用ExtJs 可以完成90% 的工作。

# ios - 如果单击了子视图，如何检查识别器？

> ID：13347848
> 
> 赞同：0
> 
> 时间：2012-11-12T16:51:32.910
> 
> 标签：ios, uigesturerecognizer

当我单击图像时，我想显示另一个弹出窗口，但它不起作用！

我的句柄 Tap 方法如下所示：

```
-(void)handleTapView:(UITapGestureRecognizer*)recognizer
{
   CGPoint startPoint = [recognizer locationInView:recognizer.view];
   NSLog(@"handle Tap VIEW!!!!!!!!");

   if ([recognizer.view isKindOfClass:[UIImageView class]] ) {
      NSLog(@"Tap Image!!!!!!!!");        
   }
   else if ([self.popover isPopoverVisible]) {
      [self.popover dismissPopoverAnimated:YES];        
   }
   else {
      ShapesListViewController *shapes = (ShapesListViewController*) [self.storyboard instantiateViewControllerWithIdentifier:@"ShapesListViewController"];

      UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:shapes];
      UIPopoverController *pop = [[UIPopoverController alloc] initWithContentViewController:nav];

      shapes.delegate = self;

      self.popover = pop;   

      CGRect popoverRect;
      popoverRect.origin = startPoint;
      popoverRect.size.width = 1;
      popoverRect.size.height =1;

      [pop presentPopoverFromRect:popoverRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
   }   
} 
```

在 viewdidload 中：

```
ImageView *imgv = [[ImageView alloc] initWithImage:[UIImage imagNamed:@"delete.png"]];
imgv.center = CGPointMake(250,250);     
[self.view addSubview:imgv];

ImageView *imgv2 = [[ImageView alloc] initWithImage:[UIImage imageNamed:@"gear.png"]];

imgv2.center = CGPointMake(400,400);
[self.view addSubview:imgv2];

//Tap Recognizer
self.singelTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapView:)];
[self.singelTapGestureRecognizer setNumberOfTapsRequired:1];
[self.view addGestureRecognizer:self.singelTapGestureRecognizer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T06:42:10.470

您需要将单独的gestureRecogniser 附加到要捕获其手势的每个视图 - 在您的情况下，您的两个imageViews。

```
UITapGestureRecognizer *tapGR1, *tapGR2;
SEL selector = @selector(handleTapView:);
tapGR1 = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                 action:selector];
tapGR2 = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                 action:selector];
       [imgv1 addGestureRecognizer:tapGR1];
       [imgv2 addGestureRecognizer:tapGR2]; 
```

不要将 tapGR 附加到他们的超级视图。

然后您还需要`userInteractionEnabled`在每个 imageViews 上进行设置，否则它们将忽略触摸（UIImageView 默认为`userInteractionEnabled = NO`）：

```
 imgv1.userInteractionEnabled = YES;
        imgv2.userInteractionEnabled = YES; 
```

在你`handleTapView`身上，你需要稍微重组。`else if`将您的条件序列更改为`if`否则第三个子句将永远不会被触发。

每个`recognizer.view`recongnizers 将正确识别被点击的 imageView。这将是弹出框应该在 imageView 的超级视图的坐标中出现的矩形 - 它是`frame`属性。

所以：

```
 [pop presentPopoverFromRect:recognizer.view.frame 
                      inView:self.view    
    permittedArrowDirections:UIPopoverArrowDirectionAny 
                    animated:YES]; 
```

# javascript - 简单 - 仅选择此链接的元素

> ID：13347866
> 
> 赞同：0
> 
> 时间：2012-11-12T16:52:42.077
> 
> 标签：javascript, jquery

如何仅更改单击的链接内的元素？

我认为这样的孩子会工作，但没有运气。

```
$('.sort').click(function () {
    $(this).children('i').toggleClass('icon-arrow-up-12');
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:53:44.663

使用`find`（[api.jquery.com/find](http://api.jquery.com/find/)），如下所示：

```
$(this).find('i').toggleClass('icon-arrow-up-12'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:11:40.497

子节点是当前节点之下的直接节点。你需要后代。您还需要设置上下文：

```
$('.sort').click(function () {
    $('i', this).toggleClass('icon-arrow-up-12');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:53:53.387

如果我理解你的话：

```
$('.sort').click(function () {
    $(this).toggleClass('icon-arrow-up-12');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:54:43.430

`.children()`实际上应该工作..

不知道 HTML 就很难说...如果您试图访问嵌套元素

您可以使用`.find()`

```
$(this).find('.i')  OR  find('#i') 
```

我在这里是什么 .. 是类元素还是 ID ..

# c++ - 如何修改我的 c++ 程序以使用堆栈向后显示用户输入的单词？

> ID：13347873
> 
> 赞同：0
> 
> 时间：2012-11-12T16:53:03.780
> 
> 标签：c++, arrays, pointers, stack, character-arrays

我想为用户输入的每个字符分配一个指针。然后在这样做时，我可能可以使用一个循环来存储字符，然后第二个循环使用指针重新排列堆栈顺序。但是我不知道如何以程序形式编写它，我不确定它是否可以工作。这是我到目前为止所拥有的：

```
#include<iostream>

using namespace std;

class Stack{
public:
  enum {MaxStack = 50};
  void init() {top = -1;}
  void push( char n ){
    if ( isFull() ) {
      cerr << "Full Stack. DON'T PUSH\n";
      return;
    }
    else {
      arr[ ++top ] = n;
      cout << "Just pushed " << n << endl;
      return;}
  }
  int pop() {
    if (isEmpty() ) {
      cerr << "\tEmpty Stack. Don't Pop\n\n";
      return 1;
    }
    else 
      return arr[top--];
  }
  bool isEmpty() {return top < 0 ? 1 : 0;}
  bool isFull() {return top >= MaxStack -1 ? top : 0;}
  void dump_stack() {
    cout << "The Stack contents, from top to bottom, from a stack dump are: " << endl;
    for (int i = top; i >= 0; i--)
      cout << "\t\t" << arr[i] << endl;
  }
private:  
  int top;
  int arr[MaxStack];
};

int main()
{   

    Stack a_stack;
    int x = 0;
    char inputchar;

    cout<<"Please enter a word"<<endl;
  a_stack.init();

while (inputchar != '.') //terminating char
 {
 cin >> inputchar;
 array[x] = inputchar;
 x++;
 }

int j = x;

for (int i = 0; i < j; i++)
 {
 cout << array[x];
 x--;
 }
  a_stack.push();

  a_stack.dump_stack();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:03:38.837

堆栈，就其 LIFO 特性（后进先出）而言，将颠倒您放入其中的任何内容的顺序。字符串“Hello”的示例：

（栈顶在左边）

```
H        push "H"
eH       push "e"
leH      push "l"
lleH     push "l"
olleH    push "o" 
```

现在，当您从堆栈中弹出时，您将首先获得“o”，然后是“l”，等等。这是您放入的任何内容，但顺序相反。你不需要做任何特别的事情来实现它。只需按正常顺序推送到堆栈，当你弹出时，你会得到它的反转：

```
// while loop
{
    cin >> inputchar;
    a_stack.push(inputchar);
}

// Display in reverse
while (not a_stack.isEmpty()) {
    cout << (char)a_stack.pop();
} 
```

这是一个使用的小示例程序`std::stack`：（
此处不进行输入错误检查。）

```
#include <iostream>
#include <stack>

int main()
{
    std::stack<char> st;
    char c = '\0';
    while (c != '.') {
        c = std::cin.get();
        st.push(c);
    }

    while (not st.empty()) {
        std::cout << st.top();
        st.pop();
    }
    std::cout << '\n';
} 
```

示例输入和输出：

```
你好世界。
.dlrow olleH

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:13:20.133

除非必须使用堆栈（即它是一项家庭作业），否则最好使用`getline()`它的参数`delim`（cf [getline](http://cplusplus.com/reference/iostream/istream/getline/)），然后在数组上进行反向循环。它会更快、更干净、更不容易出错，而且基本上是两条线。

# sql - 我可以相信“%”是 SQL 通配符吗

> ID：13347874
> 
> 赞同：1
> 
> 时间：2012-11-12T16:53:08.177
> 
> 标签：sql, jpa

您好，我正在使用 JPA 查询数据库，我应该进行`column like 'whatever%'`查询。

我的数据库目前是 Mysql，所以我可以毫无问题地做到这一点，但我想知道是否有某种方法可以检索数据库的通配符。

我改变数据库的可能性很小，但是……我正在尝试尽可能通用。

那么“%”是唯一使用的通配符（不是在谈论`_`）吗，并且将永远是？

感谢您的信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:09:04.573

`%`是 ANSI SQL。此值在任何主要数据库中均不可配置，因此这些数据库无需提供返回通配符的方法。

仅当您认为可能迁移到非 ANSI SQL 数据库（例如 MS Access，它使用 a`*`作为通配符）时，才应该考虑这一点。

如果有可能，我建议在您的应用程序中配置通配符，并提供一个包含通配符而不是硬编码字符的变量。

# c - C中未初始化的指针到底有什么危险

> ID：13347880
> 
> 赞同：4
> 
> 时间：2012-11-12T16:53:45.403
> 
> 标签：c, pointers, initialization

当我通过 Jim Trevor为 PL 课程编写的“ [Cyclone: A safe dialect of C ”时，我正在尝试掌握 C。](http://www.cs.umd.edu/projects/cyclone/papers/cyclone-safety.pdf)Trevor 和他的合著者正在尝试制作一个安全的 C 版本，因此他们在他们的语言中消除了未初始化的指针。[谷歌搜索了一下](http://computer.howstuffworks.com/c25.htm)在未初始化的指针上，似乎未初始化的指针指向内存中的随机位置。似乎仅这一点就使他们不安全。如果你引用一个未初始化的指针，你会跳转到内存的不安全部分。时期。但特雷弗谈论它们的方式似乎暗示它更复杂。他引用了下面的代码，并解释说当函数 FrmGetObjectIndex 取消引用 f 时，它不是在访问一个有效的指针，而是一个不可预测的地址——当 f 的空间被分配时，堆栈上的任何内容。

Trevor 所说的“分配 f 的空间时堆栈上的任何内容”是什么意思？默认情况下，“未初始化”指针是否初始化为内存中的随机位置？或者它们的“随机”行为是否与分配给这些指针的内存有关，由于堆栈上的意外行为，这些指针被填充了奇怪的值（然后被引用）。

```
Form *f;
   switch (event->eType) {
   case frmOpenEvent:
   f = FrmGetActiveForm(); ...
   case ctlSelectEvent:
   i = FrmGetObjectIndex(f, field); ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:58:53.480

> Trevor 所说的“分配 f 的空间时堆栈上的任何内容”是什么意思？

他的意思是，在大多数汇编语言中，单独的指令用于在堆栈上保留空间并在新保留的空间内写入初始值。如果 C 程序使用未初始化的变量，程序**通常会**在运行时执行保留堆栈空间的指令，但不执行设置它的指令。当使用指针时，它实际上将包含在保留空间之前位于堆栈上的位模式。在好的情况下，这将是一个无效地址。在不好的情况下，这恰好是一个有效的地址，其影响将是不可预测的。

这只是一个典型的行为。从理论的角度来看，使用不确定的值是*未定义的行为*。可能会发生比简单地访问无效地址或有效地址更奇怪的事情（[意外](http://markshroyer.com/2012/06/c-both-true-and-false/)或[故意](http://kqueue.org/blog/2012/06/25/more-randomness-or-less/)使用未初始化数据（非地址）的示例）。

* * *

以下是 C 的受限子集（例如 Cyclone）旨在防止的危险：

```
int a, *p;

int main(int c, char **v){
  int l, *lp, i;
  if (c & 1) 
    a = l + 1;      // danger
  if (c & 2)
    *lp = 3;        // danger
  if (c & 4)
    {
      p = &a;  
      for (i=0; i<=1; i++)
        {
          int block_local;
          *p = 4;   // danger
          p = &block_local;
        }
    }
} 
```

在最后一个危险的行中，实际上，最有可能将 4 写入 variable `block_local`，但实际上，在第二次迭代时，`p`它是不确定的，程序不应该访问`*p`，并且当它访问时它是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:51:30.537

在现代操作系统上，危险是核心转储。在没有内存管理和可能内存映射 i/o 到外部硬件的早期系统上，危险程度完全不同。

# c# - 如何从 ASP.net MVC3 c# 中的输入获取数据？

> ID：13347881
> 
> 赞同：0
> 
> 时间：2012-11-12T16:53:49.880
> 
> 标签：c#, asp.net, asp.net-mvc-3

我的 NewMember.cshtml 视图文件中有以下代码：

```
@{
    ViewBag.Title = "New Member";
}

<div id="newForm">
    <table>
        <tr>
            <td class="first"><label title="Date" runat="server">Date</label></td>
            <td class="second"><input id="DateBox" value="test"" /></td>
        </tr>
        <tr>
            <td class="first"><label title="FirstName" runat="server">First Name</label></td>
            <td class="second"><input id="FirstNameBox" runat="server" /></td>
        </tr>
        <tr>
            <td class="first"><label title="LastName" runat="server">Last Name</label></td>
            <td class="second"><input id="LastNameBox" runat="server" /></td>
        </tr>
        <tr>
            <td class="first"><label title="DOB" runat="server">Date of Birth</label></td>
            <td class="second"><input id="DOBBox" runat="server" /></td>
        </tr>
    </table>
    <input type="submit" value="Submit"/>
</div> 
```

我的控制器文件包含以下方法：

```
public ActionResult NewMember()
{
    return View();
} 
```

我正在使用 Microsoft 的 SQL Server 2008 来保存这些信息。我知道如何使用 c# 对数据库进行查询，但我不明白如何将输入的数据从视图文件获取到控制器。

任何帮助将不胜感激。

谢谢

编辑：更多信息 - 我一直在互联网上寻找这个问题，我看到一些使用 Javascript。不幸的是，我不知道任何 javascript，所以有没有办法在不使用 javascript 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:14:49.883

除非您想要 ajax 调用，否则您不必使用 javascript

在表单中为输入元素命名并丢失*runat="server"*

看法：

```
<form id="newForm" method="POST" action="@Url.Action("NewMember", "CONTROLLER NAME")">
<table>
    <tr>
        <td class="first"><label title="Date">Date</label></td>
        <td class="second"><input id="DateBox" value="test"" name="date" /></td>
    </tr>
    <tr>
        <td class="first"><label title="FirstName">First Name</label></td>
        <td class="second"><input id="FirstNameBox" name="fname" /></td>
    </tr>
    <tr>
        <td class="first"><label title="LastName">Last Name</label></td>
        <td class="second"><input id="LastNameBox" name="lname" /></td>
    </tr>
    <tr>
        <td class="first"><label title="DOB" >Date of Birth</label></td>
        <td class="second"><input id="DOBBox" name="birth" /></td>
    </tr>
</table>
<input type="submit" value="Submit"/>
</form> 
```

然后在您的控制器中创建一个操作来处​​理帖子：

控制器：

```
[HttpPost]
public ActionResult NewMember(string date, string fname, string lname, string birth)
{
   return View();
} 
```

希望这可以帮助！

# sql - 没有返回行时，TSQL COUNT 显示 0

> ID：13347890
> 
> 赞同：2
> 
> 时间：2012-11-12T16:54:12.190
> 
> 标签：sql, sql-server, tsql, join, count

我有一张表**Documents**，其中列出了所有文档和有关它们的各种信息。我要做的是，对于一组选定的作者，计算他们在过去一年中创作的所有文档。对于每个文档，我们都有一个列来存储作者姓名和 ID。

我目前通过下面的查询得到了我想要的，但我的问题是我还需要列出所有没有创作任何文档的作者。（因此，对于**Number of Docs Signed**列，它们的值为零）这是我现在所拥有的：

```
SELECT 
[AuthorID] As "Author ID",
RTRIM([AuthorFirstName]) + ' ' + RTRIM([AuthorLastName]) AS "Author", 
COUNT(Document.ID) AS "Number of Docs Authored"

FROM Document

WHERE   [CompletedStatus] = 'Yes' 
AND     [AuthorID] IN (<list of author ID's>) 
AND     [CompletedOn] >= DATEADD(d, -365, getdate())

GROUP BY [AuthorID], [AuthorFirstName], [AuthorLastName]

ORDER BY [Number of Docs Signed] DESC 
```

通过阅读 SO，我知道我认为我需要某种可以加入的子查询，以便在 COUNT 没有返回行时显示“0”。但是对于我的生活，我不知道该怎么做。我很确定它需要是[这样](http://lichao.net/eblog/how-to-display-0-in-conditional-group-by-report-in-count-sql-query-200808164.html)的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:57:01.053

从 Authors 表开始，对文档表进行左外连接。这意味着您需要将条件移动到外部连接中......

```
SELECT 
[AuthorID] As "Author ID",
RTRIM([AuthorFirstName]) + ' ' + RTRIM([AuthorLastName]) AS "Author", 
COUNT(Document.ID) AS "Number of Docs Authored"

FROM 
    Author a
    LEFT OUTER JOIN Document d on d.AuthorID = a.ID
        AND [CompletedStatus] = 'Yes' 
        AND [CompletedOn] >= DATEADD(d, -365, getdate())
WHERE
    a.ID IN (<list of author ID's>) 

GROUP BY a.[ID], [AuthorFirstName], [AuthorLastName]

ORDER BY [Number of Docs Signed] DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:00:30.560

大概如果他们没有创作任何文档，他们就不会在文档表中记录。我猜你有一个 Authors 表或类似的表？

就像是

```
SELECT 
a.[AuthorID] As "Author ID",
RTRIM(a.[AuthorFirstName]) + ' ' + RTRIM(a.[AuthorLastName]) AS "Author", 
COUNT(Document.ID) AS "Number of Docs Authored"
FROM Author a
LEFT OUTER JOIN
Document
ON A.AuthorId = Document.AuthorId
AND  [CompletedStatus] = 'Yes' 
AND     [CompletedOn] >= DATEADD(d, -365, getdate())
WHERE     A.[AuthorID] IN (<list of author ID's>) 
GROUP BY a.[AuthorID], a.[AuthorFirstName], a.[AuthorLastName] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T17:00:33.223

如果你有一个作者表，你会这样做：

```
SELECT  a.AuthorID As "Author ID",
        RTRIM([a.AuthorFirstName]) + ' ' + RTRIM([a.AuthorLastName]) AS "Author", 
        COUNT(Document.ID) AS "Number of Docs Authored"
FROM Authors a left outer join
     Document d
     on a.[AuthorID] = d.[AuthorID] and
        d.CompletedStatus = 'Yes' and
       [CompletedOn] >= DATEADD(d, -365, getdate())
WHERE a.[AuthorID] IN (<list of author ID's>) and
GROUP BY a.AuthorID, a.AuthorFirstName], a.authorLastName
ORDER BY [Number of Docs Signed] DESC 
```

注意文件上的所有条件都在`on`子句中。否则，对于没有文档的作者，这些值将为 NULL。

如果您没有作者表，则可以即时创建一个：

```
with authors as (
    select <id> as id, <firstname> as authorFirstName, <lastname> as authorLastName union all
    select . . .
) 
```

然后使用上面的查询。您需要填写每个作者的姓名信息。

# json - jerse 客户端使用 JacksonJsonProvider 日期反序列化

> ID：13347891
> 
> 赞同：0
> 
> 时间：2012-11-12T16:54:16.523
> 
> 标签：json, jersey, jackson, deserialization

我在客户端的日期反序列化有问题。我必须构建一个使用 JSON 的简单桌面 Java 应用程序。我的代码：

```
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(JacksonJsonProvider.class); 
Client client = Client.create(config); 
```

我试过使用这个解决方案，但它对我不起作用： [如何使用杰克逊反序列化 JS 日期？](https://stackoverflow.com/questions/5591967/jackson-date-deserialization)

我需要这种格式的日期：“dd.MM.yyyy。”，但无论如何我总是会收到此错误：

```
Can not construct instance of java.util.Date from String value '12.10.1971.': not a valid representation (error: Can not parse date "12.10.1971.": not compatible with any of standard forms ("yyyy-MM-dd'T'HH:mm:ss.SSSZ", "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", "EEE, dd MMM yyyy HH:mm:ss zzz", "yyyy-MM-dd")) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:10:41.807

我仍然认为您的链接答案应该有效，但这是另一种可以帮助您的方法。

为您正在检索的模型创建一个 Java 对象。

假设它是一个有 2 个字段的项目：

```
public class Item {
    private String name;
    private String lastModified;

    public Item() {}

    public String getName() {
        return name;
    }

    public Item setName(String name) {
        this.name = name;
        return this;
    }

    public String getLastModified() {
        return lastModified;
    }

    public Modifiable setLastModified(String lastModified) {
        this.lastModified = lastModified;
        return this;
    }
} 
```

Jackson 不会尝试解析它，因为它会查看您的代码并知道它是字符串而不是日期对象。你可以自己解析它。

如果这很难看，您可以在内部将 lastModified 保存为日期，因为如果找不到日期，杰克逊正在寻找将字符串作为参数的“工厂”方法。

# java - url重定向中的Java HttpUrlConnection国际字符

> ID：13347900
> 
> 赞同：1
> 
> 时间：2012-11-12T16:54:39.550
> 
> 标签：java, httpurlconnection, urlconnection

我在获取某些网站的内容时遇到问题。当我尝试导航到重定向到另一个包含国际字符的 url 的 url 时，java 通常会收到错误 404。当我在浏览器中关注此 url 时，我会得到有效数据。

例如，我想导航到 hXXp://shar.es/cISmv（不能发布超过 2 个有效链接）

浏览器将我正确重定向到 hXXp://www.dandy-magazine.com/la-griffe-de-la-tour-d%E2%80%99argent 。从 wget 我可以看到，最初站点返回重定向 301，并带有现有的“位置：[http](http://www.dandy-magazine.com/la-griffe-de-la-tour-d%E2%80%99argent) ://www.dandy-magazine.com/la-griffe-de-la-tour-d%E2%80%99argent ”

在java中（重定向关闭）它返回带有“ `Location: http://www.dandy-magazine.com/la-griffe-de-la-tour-dâargent`”的重定向301。使用 url 编码 ot 看起来像这样：“ `http://www.dandy-magazine.com/la-griffe-de-la-tour-d%C3%A2%C2%80%C2%99argent`”。如您所见，这是完全不同的网站。

示例代码（基本上版本 1 和版本 2 做同样的事情）：

```
// version 1 - let java handle redirects
URL url = new URL("http://shar.es/cISmv");
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.setInstanceFollowRedirects(true);
con.getResponseCode();
return con.getURL(); // returned url is not what it should be

// version 2 - I want to handle redirects
URL url = new URL("http://shar.es/cISmv");
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.setInstanceFollowRedirects(false);
con.getResponseCode();
String loc = con.getHeaderField("Location");
// here is the problem, loc is not initialized with a correct url
// returned String corresponds to url returned in version 1 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:21:09.170

据我所知，当它的值是 UTF-8 编码时，Java 不会处理 Location 标头。

URL 应该看起来像 .../la-griffe-de-la-tour-d'argent。请注意，在上一句中，我使用的是 ASCII 单引号字符。然而，网站没有使用单引号字符，而是选择使用 unicode 字符

```
00002019 RIGHT SINGLE QUOTATION MARK
Glyph: ’
UTF-8: E2 80 99 
```

Wireshark 跟踪显示返回的 Location 标头具有此字符 UTF-8 编码。

```
00e0  65 70 2d 61 6c 69 76 65  0d 0a 4c 6f 63 61 74 69   ep-alive ..Locati
00f0  6f 6e 3a 20 68 74 74 70  3a 2f 2f 77 77 77 2e 64   on: http ://www.d
0100  61 6e 64 79 2d 6d 61 67  61 7a 69 6e 65 2e 63 6f   andy-mag azine.co
0110  6d 2f 6c 61 2d 67 72 69  66 66 65 2d 64 65 2d 6c   m/la-gri ffe-de-l
0120  61 2d 74 6f 75 72 2d 64  e2 80 99 61 72 67 65 6e   a-tour-d ...argen
0130  74 0d 0a 0d 0a 30 0d 0a  0d 0a                     t....0.. .. 
```

我不知道这是否是合法的 HTTP。网上肯定有很多关于这个的问题。不管合法与否，HttpURLConnection 类都处理不好。呼吁

```
String loc = con.getHeaderField("Location"); 
```

应该返回在和`http://www.dandy-magazine.com/la-griffe-de-la-tour-d’argent`之间有一个字符（2019）的字符串。相反，它通过将这 3 个 UTF-8 字节中的每一个字节转换为字符 (E2 80 99) 来返回无效字符串。此时“loc”字符串是无用的。它不是有效的 Unicode 字符串。`d``argent`

这是一个可能有帮助的解决方法：

```
 String loc = con.getHeaderField("Location");
  byte [] locbytes = new byte[loc.length()];
  for (int index = 0; index < locbytes.length; index++)
  {
     locbytes[index] = (byte) loc.charAt(index);
  }

  // use this loc instead
  String loc2 = new String(locbytes, "UTF-8"); 
```

将伪造的字符串（其中每个 char 具有 Web 服务器发送的字节的值）转换回字节数组。然后使用正确的字符集将字节数组转换回字符串。现在使用 loc2 作为您的 URL 打开一个新连接。

可能有更好的方法来做到这一点，但我没有检查源实现以确定有一种方法可以告诉 HttpURLConnection 类将标头值视为 UTF-8 编码。

# c# - 运行时数据库的 SQL 与实体框架

> ID：13347902
> 
> 赞同：2
> 
> 时间：2012-11-12T16:54:45.900
> 
> 标签：c#, .net, wpf, entity-framework, ado.net

我目前正在用 C# 构建一个查询构建器，它首先提示用户指定他们想在本地机器上查询哪个数据库。

因此，该程序允许将数据库“插入”到其中，而不是拥有许多带有始终使用的表的数据库。

因此，对于我的查询生成器来生成 SQL 语句，以字符串的形式输出和执行 SQL 语句是否更有意义，或者我可以使用实体框架？我没有使用实体框架的经验，但是据我所知，如果您有一个静态数据库，您知道其表和架构，那么使用 EF 会更有意义 - 而可能是用户在运行时指定的任何数据库-时间。

我目前一直在使用 SQL 语句——即用户与查询构建器的交互，实际上是执行应用程序生成的基于字符串的 SQL 语句。是否有可能或值得切换到实体框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:10:40.057

根据我使用 EF 的经验，如果要动态生成查询，最好坚持使用 SQL 字符串。

使用 EF 查询未知模式的唯一方法是通过反射生成实体，这将是大量工作。而且我不确定它会起作用。而且，您将失去使用 EF 的所有好处。

所以，如果是这样的话，不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:34:41.067

实体框架在这种情况下不提供任何优势。事实上，它严格限制。

可以编写一个通用的 SortHelper、PagerHelper、FilterHelper 等，它将表达式树作为 IQuerable 并应用您想要的排序。这种泛型编程很棒，因为它避免了 SQL 注入。

但是，如果您使用实体框架作为查询生成器，则必须使用反射来生成实体数据模型。此外，您必须决定如何执行开放式选择语句。此外，您将依赖于 Entity Framework 如何表示和评估查询，这仍然不如 5.0 版的 ORM 应有的强大！例如，没有很好的方法来表示右连接，如果你想生成体面的 SQL，就必须始终将它们表示为左连接。另一个限制是，如果要编写投影，则需要生成一个匿名类。.NET 没有从内存中卸载类型的好方法，并且您在 AppDomain 中生成的每个类型都保存在内存中，直到 AppDomain 被卸载。这就是 F# 3.0 对其 F# 类型提供程序 API 使用类型擦除的原因，

此外，Entity Framework 不会进行任何类型的严肃分析来确定表达式是否可以转换，例如 SAT 求解。

我的答案基于现实生活经验，构建了您所描述的确切应用程序，然后是一些。该应用程序允许业务分析师以可视方式编写查询并将查询组合在一起。

也就是说，我确实建议学习 Entity Framework 的设计词汇。我已经转而使用非常相似的词汇，即使我不使用实体框架。例如，导航属性。我不称它们为属性，因为对于那些使用对象查询语言并且在可视查询语言中没有意义的人来说，这是一种面向对象的抽象。我称它们为路径。但我喜欢 Any() 运算符来暗示左连接，以及 Include()。那些小小的建模想法对我来说很有价值。

# ios - iOS 6：旋转后忽略父模式的 modalPresentationStyle

> ID：13347906
> 
> 赞同：33
> 
> 时间：2012-11-12T16:55:12.647
> 
> 标签：ios, ipad, rotation, modal-dialog

对于带有 iOS6 的 iPad，我们有一个错误，即模态视图控制器将扩展到全屏，即使它被告知使用“表单”演示样式。但是，只有当有两个模态时才会发生这种情况，一个是父模态，一个是它的子模态。

所以这就是第一个模态的创建和呈现方式：

```
UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:controller] autorelease];
navigationController.modalPresentationStyle = UIModalPresentationFormSheet;
[parentController presentModalViewController:navigationController animated:YES];
// parentController is my application's root controller 
```

这是子模态的创建和呈现方式：

```
UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:controller] autorelease];
navigationController.modalPresentationStyle = UIModalPresentationFormSheet;
[parentController presentModalViewController:navigationController animated:YES];
// parentController is the navigationController from above 
```

因此，当从横向旋转到纵向时，父模式将扩展到全屏并保持这种状态，即使我们旋转回横向也是如此。

当我们完全拥有父模态（没有子模态）时，它会按预期工作，即它保持表单样式。

请注意，这只发生在 iOS6（设备和模拟器）上，不会发生在 iOS 5（模拟器和测试人员报告的工作）上。

到目前为止，我已经尝试了以下但没有成功：

*   设置`wantsFullScreenLayout`为`NO`
*   通过覆盖它来强制`wantsFullScreenLayout`总是返回`NO`
*   使导航控制器中的某些控制器也指定`UIModalPresentationFormSheet`
*   实施`preferredInterfaceOrientationForPresentation`
*   升级到 iOS 6.0.1

谢谢！

* * *

**更新：因此，我调整了 Apple 开发者论坛 (** [https://devforums.apple.com/message/748486#748486](https://devforums.apple.com/message/748486#748486) )的回复，使其适用于多个嵌套模式。

```
- (BOOL) needNestedModalHack {
    return [UIDevice currentDevice].systemVersion.floatValue >= 6;
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                          duration:(NSTimeInterval)duration {

    // We are the top modal, make to sure that parent modals use our size
    if (self.needNestedModalHack && self.presentedViewController == nil && self.presentingViewController) {
        for (UIViewController* parent = self.presentingViewController;
             parent.presentingViewController;
             parent = parent.presentingViewController) {
            parent.view.superview.frame = parent.presentedViewController.view.superview.frame;
        }
    }

    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                 duration:(NSTimeInterval)duration {
    // We are the top modal, make to sure that parent modals are hidden during transition
    if (self.needNestedModalHack && self.presentedViewController == nil && self.presentingViewController) {
        for (UIViewController* parent = self.presentingViewController;
             parent.presentingViewController;
             parent = parent.presentingViewController) {
            parent.view.superview.hidden = YES;
        }
    }

    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    // We are the top modal, make to sure that parent modals are shown after animation
    if (self.needNestedModalHack && self.presentedViewController == nil && self.presentingViewController) {
        for (UIViewController* parent = self.presentingViewController;
             parent.presentingViewController;
             parent = parent.presentingViewController) {
            parent.view.superview.hidden = NO;
        }
    }

    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T07:18:14.817

不确定这是否应该被视为一个错误，我很好奇 iOS 7 会带来什么，但当前解决此问题的方法是将 modalPresentationStyle 设置为子视图控制器的 UIModalPresentationCurrentContext。

```
Set modalPresentationStyle = UIModalPresentationCurrentContext 
```

这使得孩子仍然以 FormSheet 的形式呈现，但防止父母在旋转时将大小调整为全屏。

短剑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:58:52.280

我可以在这里看到 2 个问题。

1）在 iOS 6 中，该方法`presentModalViewController:animated:`已被弃用，请尝试使用`presentViewController:animated:completion:` （尽管这可能无济于事，您仍然可能想要这样做）

2) 在 iOS 6 中，不知何故出现了容器控制器（例如`UINavigationController`）不会将自动旋转消息重新发送给他们的孩子。尝试子类化`UINavigationController`并重新定义相应的自动旋转方法以发送给所有孩子。这可能会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-05T09:03:57.187

您需要在主视图之后实例化您的导航控制器。这样您就可以在每个视图中管理旋转。

如果您的 AppDelegate RootViewController 是导航控制器，您将无法使用本机功能管理旋转。

# html - 单选按钮的getelementbyid问题

> ID：13347913
> 
> 赞同：0
> 
> 时间：2012-11-12T16:55:31.037
> 
> 标签：html, radio-button, alert

我正在尝试使用所选单选按钮的值发出警报，但我总是得到第一个，无论我选择哪个......（Acompanhado）;

html:

```
 <form/>

          <input type="radio" class="simple_form" name="grupo_1" value="Acompanhado" id="saida"/>
          <span class="texto">Acompanhado</span>
          <input type="radio" class="simple_form" name="grupo_1" value="Individual" id="saida"/>
          <span class="texto">Individual</span>
          </form> 
```

js：

```
 function save() {
       var saida_js = document.getElementById('saida').value;
       alert("Tipo de saida: " + saida_js);
           } 
```

任何的想法 ？

* * *

@Quentin：我有很多警报，因为我试图从表单中获取所有数据。我使用了您的代码，但根本没有收到任何警报。

```
function save() {
    var morada_js = document.getElementById('morada').value;
    var data_js = document.getElementById('data').value;
    var hora_js = document.getElementById('hora').value;

    var radio_saida = document.getElementsByName('name_saida');

    var notas_js = document.getElementById('notas').value;
        var condicoes_atm_js = document.getElementById('condicoes_atm').value;

    alert("Morada: " + morada_js);
    alert("Data: " + data_js);
    alert("Hora: " + hora_js);

        function get_checked_radio(radio_saida) {
        for (var i = 0; i < radio_saida.length; i++) {
            var current = radio_saida[i];
            if (current.checked) {
                return current;
                }
            }
        }

    alert(get_checked_radio(radio_saida).value);
    alert("Notas: " + notas_js);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:58:23.043

一个`id`在文档中必须是唯一的。

要查找组中选定单选按钮的值，请按组名获取组...</p>

```
var radios = document.getElementsByName('radio_name'); // or
var radios = document.forms.formId.elements.radio_name; 
```

然后遍历它们，直到找到具有 true`checked`属性的那个。

```
function get_checked_radio(radios) {
    for (var i = 0; i < radios.length; i++) {
        var current = radios[i];
        if (current.checked) {
            return current;
        }
    }
}

alert(get_checked_radio(radios).value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:56:48.967

有道理，因为您有两个`input`具有相同 id 的标签`saida`

# java - 通过 ObjectInputStream 反序列化时出现 StreamCorruptedException

> ID：13347917
> 
> 赞同：1
> 
> 时间：2012-11-12T16:55:38.037
> 
> 标签：java

我正在尝试测试一个程序，为此我需要访问 ReadExternal 函数，但我在 ObjectInputStream 上遇到 StreamCorrupted 异常。我知道我需要使用由 WriteObject 编写的对象，但不知道该怎么做......

```
ObjectOutputStream out=new ObjectOutputStream(new ByteArrayOutputStream());
    out.writeObject(ss3); 
    ss3.writeExternal(out);
    try{
         ByteInputStream bi=new ByteInputStream();
         bi.setBuf(bb);
         out.write(bb);
         ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(bb));
         String s1=(String) in.readObject();
        }
        catch(Exception e){
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T17:17:12.653

显然，您正在尝试将同一对象两次写入输出流：

```
out.writeObject(ss3); 
ss3.writeExternal(out); // <-- Remove this! 
```

第二次写入错误地使用了该`writeExternal()`方法，该方法不应该被显式调用，而是由`ObjectOutputStream`.

并且：`out.write(bb);`尝试将 的内容`bb`写入`ObjectOutputStream`. 这可能不是你想要的。

试试这样：

```
// Create a buffer for the data generated:
ByteArrayOutputStream bos = new ByteArrayOutputStream();

ObjectOutputStream out=new ObjectOutputStream( bos );

out.writeObject(ss3);

// This makes sure the stream is written completely ('flushed'):
out.close();

// Retrieve the raw data written through the ObjectOutputStream:
byte[] data = bos.toByteArray();

// Wrap the raw data in an ObjectInputStream to read from:
ByteArrayInputStream bis = new ByteArrayInputStream( data );
ObjectInputStream in = new ObjectInputStream( bis );

// Read object(s) re-created from the raw data:
SomeClass obj = (SomeClass) in.readObject();

assert obj.equals( ss3 ); // optional ;-) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T10:12:07.500

> ss3.writeExternal(out);

您不应该直接调用该方法。你应该打电话

```
out.writeObject(ss3); 
```

# typescript - 我可以从哪里获得最新的 typescript JQuery 定义文件？

> ID：13347918
> 
> 赞同：14
> 
> 时间：2012-11-12T16:55:39.960
> 
> 标签：typescript

我知道我已经下载的定义文件存在一些问题。例如这里使用以下 $.ajax 调用：

```
$.ajax("/Admin/xx",
{
    cache: false
}) 
```

请注意，我需要先指定 URL。我记得读过这被理解为一个错误。

从哪里可以得到最新的 JQuery 定义文件。有人知道微软何时会发布他们现在拥有的 Typescript Alpha 版本的更新吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T07:39:56.817

您可以在此处从 TypeScript 的存储库中找到 jQuery 定义的分支：

[绝对打字](https://github.com/borisyankov/DefinitelyTyped)

它包含对原始版本的数十个修复，包括 ajax() 重载。一旦 TypeScript 团队开始接受拉取请求，我将在那里推送修复。

关于 TypeScript 本身的更新：它不是 alpha，而是预览版。0.8.1 版本正在回购中，他们表示希望有 2013 年的最终版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T17:24:36.330

更新！现在，[Definite Typed 项目](https://stackoverflow.com/a/13357045/75525)是获取您的定义的正确位置 - 微软现在正在积极参与 Definitive Typed 项目。

最新[的 jQuery 官方类型](https://typescript.codeplex.com/SourceControl/latest#typings/jquery.d.ts)可以在 TypeScript Codeplex 网站上找到。（项目已移动）。

我相信目前的定义是：

```
ajax(url: string, settings: JQueryAjaxSettings); 
```

这是正确的，但它不是`ajax`函数的唯一变体，它真的应该用以下定义重载：

```
ajax(settings: JQueryAjaxSettings); 
```

您可以在自己的代码中添加对此的支持，方法是在 TypeScript jquery.d.ts 定义之上添加您自己的扩展，并在 jquery.d.ts 文件更新时删除它 - 当它更新时，您将获得一个构建关于重复定义的警告以提醒您执行此操作。

```
declare interface JQueryStatic {
    ajax(settings: JQueryAjaxSettings);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T18:30:40.160

**从definitelyTyped， jQuery 1.10.x / 2.0.x**的声明文件在这里：

[https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts)（死链接）

..或以原始形式：

[https://raw.githubusercontent.com/borisyankov/DefinitelyTyped/master/jquery/jquery.d.ts](https://raw.githubusercontent.com/borisyankov/DefinitelyTyped/master/jquery/jquery.d.ts)

[Google Hosted Libraries](https://developers.google.com/speed/libraries/devguide)分发（截至今天）**jQuery 2.1.3**，这是我更喜欢使用的一个。我不知道 API 在 2.0 和 2.1 之间变化到什么程度。但是如果你在你的 TypeScript 应用程序中发现了一个错误，那可能是因为最新版本的 jQuery 中的一个小的 API 更改没有传播到上面提供的声明文件中。

# objective-c - Google Analytics iOS SDK - 多个帐户

> ID：13347920
> 
> 赞同：1
> 
> 时间：2012-11-12T16:55:52.573
> 
> 标签：objective-c, ios, google-analytics

我试图让我的视图控制器被我的 iPhone 应用程序上的两个不同帐户跟踪。我目前使用的 SDK 版本是 1.5.1，它不支持此功能。在第 2 版的文档中，它说它支持多个跟踪器，但我想不出一种方法让两个跟踪器都跟踪相同的视图。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:24:24.667

这是相同的详细说明

从 开始`version 2 of the SDK`，您可以在单个实现中使用多个跟踪器，每个唯一跟踪 ID 一个。所有跟踪器共享您的 GAI 单例所持有的相同全局状态，包括定期调度间隔、应用级退出和调试模式等设置。

请记住，自动屏幕跟踪和未捕获异常跟踪只会使用一个跟踪器进行跟踪调用。如果您正在使用这些功能并希望将类似数据发送到其他跟踪器，则需要手动执行此操作。

作为参考，自动屏幕跟踪使用给定的 tracker 属性中指定的跟踪器`GAITrackedViewController`。未捕获的异常跟踪使用您的`GAI`实例中指定的默认跟踪器。

[这里有相同的详细代码和文档，你应该查看这个](https://developers.google.com/analytics/devguides/collection/ios/v2/advanced)

我相信这会对你有所帮助......!!!

# android - 如何通过 GPRS 或 3G 连接两台 Android 设备？

> ID：13347921
> 
> 赞同：3
> 
> 时间：2012-11-12T16:55:58.217
> 
> 标签：android

我想通过 3G 或 GPRS 连接两部手机以连续发送数据流。一部手机将充当发送数据的客户端，另一部手机充当服务器以接收和显示相同的数据。是否可以在不使用服务器的情况下传输数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:00:46.623

不，您肯定必须使用某种服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:01:07.467

不是真的，我一直在使用 TCP/UDP 数据包做一个类似的项目，但最大的问题是找到另一部手机。

最好的方法是使用类似于 O-Auth 的系统连接互联网上的外部服务器并通过它发送/接收数据，但我没有太多经验。

我的项目使用 UDP 在 wifi 网络上查找服务器并获取其 ip，然后通过 tcp 连接到它，但您可以轻松地使用网络上的服务器通过任何移动数据连接来完成它。

如果您愿意，我很乐意将我的一些 tcp 代码发送给您作为起点。迅速

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:21:39.367

您无法通过蜂窝数据直接连接两个设备。您需要一个中间服务器。

另一方面，如果您要通过 wifi 连接它们，那么您可以使用套接字将它们连接在一起。

如果两个设备之间的距离较小，那么您也可以尝试通过蓝牙传输。

# javascript - 在 AJAX 刷新时，所有 JavaScript 事件都会中断

> ID：13347922
> 
> 赞同：2
> 
> 时间：2012-11-12T16:55:59.790
> 
> 标签：javascript, jquery

当用户单击过滤器链接时，我正在执行 AJAX 调用以替换页眉下方的所有内容以及页面页脚上方的所有内容。

问题是在 AJAX 事件之后，绑定到各种 DOM 元素的所有 JavaScript 事件都中断了。这是有道理的，因为它们绑定在一个低得多的模块级别示例上

```
$(".innerDiv").on("click",function(){doSomething();} 
```

并且通过替换父容器的内容，这些事件不再被绑定。

处理这个问题的正确方法是什么？我可以将事件侦听器添加到更高的级别，例如

```
$(document).on("click",".innerDiv",function(){doSomething();} 
```

但这将具有与 jQuery 中的 live() 函数被弃用相同的低效率和问题。

我发现建议的另一个解决方案是在 AJAX 调用之后重新绑定事件。问题是我正在处理一个相当复杂的页面，它包含许多 JavaScript 模块，每个模块都有自己的绑定。我将如何跟踪每个绑定的事件？有没有办法从 jQuery 中访问这些信息？我应该维护我自己的所有元素的数据结构，这些元素绑定了事件吗？

在发出 AJAX 请求之前，我还需要使用“off()”函数取消绑定事件吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:02:58.803

在 JQuery 中可以使用 beforeSend [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)来取消绑定事件

# objective-c - 如何在 sqlite3 中插入 数据库？显示错误

> ID：13347923
> 
> 赞同：0
> 
> 时间：2012-11-12T16:56:00.580
> 
> 标签：objective-c, ios, database, ios5

我正在尝试将我的数据插入到成功创建的 db.db 中，但数据没有插入到数据库中。但是在显示错误之后数据成功进入 insertsql。请检查我的代码

```
-(void)insertDB
{
NSString *dname=[[NSString alloc]init];
dname=[delegate.Name objectAtIndex:0];

sqlite3_stmt *statement;
const char *dbpath=[delegate.databasepath UTF8String];

if (sqlite3_open(dbpath, &contactDB)==SQLITE_OK)
{

    NSString *insertSQL=[NSString stringWithFormat:@"INSERT INTO STABLE (NAME) VALUES (\"%@\")",dname];

    //insert sql is ok,after that they shows error

    const char *insert_stmt=[insertSQL UTF8String];

    NSLog(@"const char%@",insert_stmt);

    sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement,NULL);

    if (sqlite3_step(statement)==SQLITE_DONE)
    {

        NSLog(@"saved");
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"data" message:@"saved" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];

        [self counting];
    }
    else
    {
        NSLog(@"Failed to add new favourites");
        NSLog(@"Failed to update row %s", sqlite3_errmsg(contactDB));
    }
    sqlite3_finalize(statement);
    sqlite3_close(contactDB);
}
[self loadmusic]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:24:04.497

你说返回的错误信息是：

> 更新行没有这样的表失败：STABLE

而且，好吧，问题正是：没有名为`STABLE`. 您显然已成功连接到数据库，但那里没有您期望的名称的表。

真正的问题是您是*如何*以及*何时*创建表格的？您连接的数据库可能不是您认为正在使用的数据库。

# apache-flex - 使用 StageWebView 进行基本身份验证

> ID：13347927
> 
> 赞同：0
> 
> 时间：2012-11-12T16:56:11.853
> 
> 标签：apache-flex

有没有办法在 Flex 的移动设备上使用 StageWebView 执行基本身份验证？问题是移动（iOS、Android）实现不提供身份验证对话框，并且关于此的文档非常不清楚。

在此链接上： [http](http://helpx.adobe.com/air/kb/stagewebview-differences-platforms-air-sdk.html) ://helpx.adobe.com/air/kb/stagewebview-differences-platforms-air-sdk.html 建议使用 URLRequest 作为解决方法，但我已经有 URLLoader 可以成功验证并从中加载数据相同的服务，它不会影响 StageWebView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:00:17.963

我有同样的问题。问题出在身份验证后（通过 facebook 安装应用程序页面后），它变为空白。我至少发现 url 是“m.facebook.com/dialog/permissions.request”，然后继续使用大量的 get 变量。

根据我的研究，我相信这是一个运行自动关闭功能但似乎在 Adob​​e AIR 中不起作用的弹出窗口。我已经尝试在“LocationChangeEvent”中运行 TimerEvent 以进行导航（必须背靠背运行 2，因为 webViewObject.historyBack() 方法不支持参数），这有效，但只有在应用程序安装在他们的facebook 帐户成功，这反过来又影响了将其安装到他们的 Facebook 的能力。

我还测试了读取 url 以触发回调，但一个主要问题是“安装”页面和“登录成功”页面具有完全相同的 url，至少从开始到结束。由于我的挫败感，尚未测试标题哈哈……正在努力。

如果有人有任何建议，这将非常有帮助并非常感谢！

# c - 如何查看结构指针中的结构指针是否已初始化

> ID：13347929
> 
> 赞同：1
> 
> 时间：2012-11-12T16:56:11.997
> 
> 标签：c, pointers, struct

我有一个如下结构：

```
typedef struct {
    player *lastmover;
    player *previous;
} lastmove;

typedef struct {
     int moves;
     char *name;
} player; 
```

我尝试像这样进行内存分配：

```
lastmove lmv;
lmv.lastmover=malloc(sizeof(player *));
lmv.previous=malloc(sizeof(player *));
.....
callfunction(&lmv);
..... 
```

然后在另一个地方我使用指针 lmvp (lastmover *) 并像这样进行分配：

```
void
callfuntion(lastmove *)
{
      .....
      lmvp->previous=lmvp->lastmover;
      lmvp->lastmover=p;     //where p is of type (player *)
      .....
} 
```

这一切都很好，但我不知道如何控制天气先前的移动器被初始化。在程序中的第一个游戏移动中，lastmover 变量 (player *) 被初始化，但前一个变量被分配为 NULL(或垃圾？) `lmvp->previous=lmvp->lastmover;`。但我想以某种方式检查前一个移动者是否已初始化。我正在尝试这个：

```
void
callfunction(lastmove *)
{
     ......
     ......
     if(lmvp->previous!=NULL)
     ......
} 
```

但我很确定它不会做.. 控制这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:59:35.123

你只分配指针的大小，这个

```
lmv.lastmover=malloc(sizeof(player *)); 
```

应该

```
lmv.lastmover=malloc(sizeof(player)); 
```

> 这一切都很好

它不应该:)

编辑：如果你只分配一个指针，`lastmover`那么你根本不需要分配内存，否则它是内存泄漏，现在如果你想检查它是否已初始化，然后将其初始化为`NULL`

```
lastmove lmv = {0};
//or
lmv.lastmover= NULL;
lmv.previous= NULL;
...
//later
if(lmv->previous!=NULL) 
```

在 C99 中，第三种方法是使用指定的初始值设定项：

```
lastmove lmv = {
   .lastmover= NULL;
   .previous= NULL;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:02:32.250

用这个：

```
lmv.lastmover=malloc(sizeof(player)); 
```

# php - PHP - Web 服务的加密和签名创建

> ID：13347930
> 
> 赞同：2
> 
> 时间：2012-11-12T16:56:14.877
> 
> 标签：php, encryption, cryptography, md5, cryptographic-hash-function

我需要使用 PHP 创建一个“密钥”才能使用 Web 服务，但这对我来说毫无意义。

Web 服务已被证明可以与 C# 应用程序一起使用，但我需要通过 PHP 访问它。

为了使用该服务，我需要一个“密钥”，然后是基于该密钥的身份验证签名。

我尝试过的所有操作都会从 Web 服务中引发错误。

对于“秘钥”，简要说明为：

1.  ASCII 编码纯文本密码
2.  使用 MD5 对编码密码进行哈希处理
3.  获取 MD5 哈希字节并执行按位操作 '& 127'</li>
4.  转换为base64字符串

我不清楚第 3 点——其余的都很直截了当；我在这里想念什么？

然后生成身份验证签名的简要说明是：

1.  密钥的 UTF-8 编码（秘密访问密钥是第 4 步的结果）
2.  日期的 UTF-8 编码
3.  HMAC-SHA1 (UTF-8-Encoding-Of (Secret access key, RequestDate))
4.  Base 64 字符串

同样，我在上面看不到任何问题 - 这只是第 3 点让我失望。

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-02T13:36:18.917

> 我不清楚第 3 点——其余的都很直截了当；我在这里想念什么？

您描述的签名算法*远非安全*。最好使用 Ed25519（通过`sodium_crypto_sign_detached()`和`sodium_crypto_sign_verify_detached()`）而不是这种 MD5 和 SHA1 废话。

话虽如此，他们可能期待这样的事情：

```
function insecureMd5Kdf($message, $raw = false)
{
    $bytes = md5($message, true);
    $output = '';
    for ($i = 0; $i < 16; ++$i) {
        $int = ord($bytes[$i]) & 127;
        $output .= pack('C', $int);
    }
    if (!$raw) {
        return bin2hex($output);
    }
    return $output;
} 
```

演示[在这里](https://3v4l.org/q4SLt)。

### 为什么会有人这样做？

具体来说：

> 获取 MD5 哈希字节并执行按位操作 '& 127'</p>

在 Java 中，字节的范围可以从`-128`到`127`. 使用`& 127`运算符清除较高位，将可能值的范围缩小到 [0, 127]。

我怀疑答案是“惰性编程”。也就是说，有人想要快速解决 Java 和 PHP 之间的差异并清除 MD5 哈希的每个字节的高位，从而使他们不必将 [128, 255] 范围内的数字转换为 [-128, -1]。

如果此 Web 服务仍然存在，您应该向他们询问最新的安全审计结果。

# iphone - NSUserDefaults 返回的共享默认对象的数据类型

> ID：13347935
> 
> 赞同：0
> 
> 时间：2012-11-12T16:56:51.200
> 
> 标签：iphone, ios, nsuserdefaults, shared-objects

在浏览 的类参考文件时`NSUserDefaults`，我注意到返回`[NSUserDefaults standardUserDefaults]`值为

> **共享默认对象**

这个对象是什么，它的类型是什么？我们可以在这个对象上调用哪些方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:00:03.727

它是 的一个实例`NSUserDefaults`。您可以调用为该类定义的任何实例方法。（例如 `stringForKey:`，`dictionaryForKey:`....）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:06:11.447

```
+ (NSUserDefaults *)standardUserDefaults 
```

它只是返回 NSUserDefaults 类型的单例对象的类方法。因此，您可以调用此类的所有方法。

来自[NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#standartUserDefaults)

> 为当前用户初始化默认值。即使再次调用此方法，对标准搜索列表的后续修改仍然有效——仅在第一次调用此方法时，才保证搜索列表是标准的。提供共享实例是为了方便——您可以使用 alloc 和 initWithUser: 或 init 创建自定义实例。

# facebook - 在“fb:app_id”元标记中指定的应用 ID 无效

> ID：13347937
> 
> 赞同：16
> 
> 时间：2012-11-12T16:56:54.287
> 
> 标签：facebook, facebook-opengraph, facebook-insights

我尝试为我的网站启用 Facebook Insights。我添加了我的页面，以使我页面的`APP_ID`每个`fb:admins`管理员都可以在以页面身份登录 Facebook 时访问 Insights。但是当我尝试保存时出现对话框消息：

```
The app ID "123,123,123,123,123" specified within the "fb:app_id" meta tag was invalid. 
```

我仔细检查了我的应用程序 ID，它是正确的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-08T11:28:53.213

要将 Domain Insights 链接到应用程序而不是用户，您需要使用`fb:app_id`标签：

`<meta property="fb:app_id" content="your_app_id" />`

来源：[https ://developers.facebook.com/docs/insights/](https://developers.facebook.com/docs/insights/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-12T16:56:54.287

**`fb:admins`元标记中**只允许使用个人 ID 。**应用程序 ID 不起作用，即使它们实际上是有效的（与错误消息所说的相反）。**

 **或者，它也可以与 page_id 一起使用：

```
<meta property="fb:page_id" content="395450240451647" /> 
```

建议`app_id`根本不起作用:(

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-11T22:53:37.123

您必须公开您的应用程序才能开始工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-24T20:05:13.017

error invalid fb:app_id 有时会产生误导。您用于测试的帐户需要添加到 facebook 应用程序的测试用户列表中。或者尝试使用管理员帐户进行测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-08-22T09:13:55.457

有时您的 facebook 信息已经被 facebook 抓取，它会被**缓存**

您需要清除那里的缓存才能再次测试

您可以访问此链接：**[https ://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)**

粘贴您要测试的叮当声

再次点击**抓取****

# android - 更新 TextView 时的 Horizo ntalScroll

> ID：13347938
> 
> 赞同：0
> 
> 时间：2012-11-12T16:56:55.360
> 
> 标签：android, scroll, textview

我正在写一个计算器，它有一个文本视图和许多按钮。如果我按下某个按钮，textview 将在字符串末尾添加一个新字符。并自动以正确的方向滚动到这个字符。它有效，但较旧的字符（左侧）正在切割，如果我向右滚动，我会看到一个空白空间。

```
<HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="right"
            android:gravity="center_vertical|left"
            android:maxLines="1"
            android:padding="10dp"
            android:singleLine="true"
            android:text=""
            android:textSize="50sp" />
    </HorizontalScrollView> 
```

看这个。我输入 123456789123456789。从 1 到 7 的数字不可见。正确位置的空白正好是 7 个数字。

![滚动条时左侧可用位置](../Images/3e5c53f22cdbafd0bba2e91db80218da.png)

![滚动条时正确的可用位置](../Images/a8ea632584b9b6efce701d99f1d5742a.png)

我阅读了很多答案，但所有这些都对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:38:46.513

我不知道为什么会发生这种情况，但我可以向您推荐一种避免它的方法。`layout_gravity`从 中删除`TextView`并添加`android:scrollbars="none"`到`HorizontalScrollView`：

```
<HorizontalScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fillViewport="true" 
    android:scrollbars="none">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"            
        android:gravity="center_vertical|left"
        android:maxLines="1"
        android:padding="10dp"
        android:singleLine="true"
        android:text=""
        android:textSize="50sp" />
</HorizontalScrollView> 
```

然后在代码中，当您修改文本时`TextView`添加下面的代码以“移动”`HorizontalScrollView`到正确的位置：

```
mHorizontalScroll.post(new Runnable() {

        @Override
    public void run() {             
        mHorizontalScroll.scrollTo(mScroll.getWidth(), 0);
    }

}); 
```

# php - php mysqli 帮助，没有返回数据库中的第一行？

> ID：13347943
> 
> 赞同：0
> 
> 时间：2012-11-12T16:57:28.030
> 
> 标签：php, mysql, mysqli

这是我的代码

```
 <?php require_once 'connect.php';

                    $sql = "SELECT * FROM `db-pages`";
                    $result = $mysqli->query($sql) or die($mysqli->error.__LINE__);
                        while ($row = $result->fetch_assoc()) {
   echo($row['pagetitle'].' - To edit this page <a href="editpage.php?id='.$row['id'].'">click here</a><br>');
 }  
                    }
      ?> 
```

除了数据库中的 id=1 之外，我在数据库中添加了几行，并且将它们全部返回。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:05:53.477

试试这样：

```
 while ($row = $result->fetch_assoc()) {
   echo($row['pagetitle'].' - To edit this page <a href="editpage.php?id='.$row['id'].'">click here</a><br>');
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:56:39.087

仔细检查标题并确保它没有任何会影响 php 输出它的内容。

还可以使用 htmlentities 转义所有 DB 输出，如果有人有创意，它会提供良好的实践。

# cocoa - Cocoa - 在表格视图上过滤数组 NSDictionary

> ID：13347944
> 
> 赞同：0
> 
> 时间：2012-11-12T16:57:28.607
> 
> 标签：cocoa, search, nsdictionary, nstableview

我有一个包含字典数据源数组的表格视图。现在我想在这个表中做一个过滤器，但我希望能够过滤 5 个不同的字段，比如姓名、号码、电子邮件等。

我该怎么做？我找到了一种在数组中执行此操作的方法，但我不知道如何在字典上进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:36:14.563

如果你想过滤一个字典数组，只需使用 filteredArrayUsingPredicate: 如下所示：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF.name = %@",@"Fabio"];
NSArray *filtered = [myArray filteredArrayUsingPredicate:pred]; 
```

这将为您提供一个数组，其中所有字典都将具有 Fabio 的名称值。

编辑后：如果您想进行更广泛的搜索，您可以在谓词中添加一个“OR”，如下所示：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF.name = %@ OR SELF.email BEGINSWITH[c] %@",@"Fabio",@"fabio"]; 
```

这将为您提供名称为 Fabio 的任何字典，或者电子邮件以 fabio 开头（或 Fabio，[c] 参数意味着它将匹配大写或不匹配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:35:56.633

`NSPredicateFilter`根据您单击的列使用。

# css - 视网膜显示屏上的 CSS 过滤器：模糊图像

> ID：13347947
> 
> 赞同：14
> 
> 时间：2012-11-12T16:57:35.217
> 
> 标签：css, filter, css-transitions, retina-display

当您将 -webkit-filter 和 -webkit-transition 应用于图像并在悬停时更改过滤器时，图像过渡效果很好，但随后图像变得非常模糊。

**注意：**这只发生在*Retina 显示屏*上——“普通”ppi 显示屏完全没有问题，但在配备 Retina 显示屏的新 MacBook Pro 上却很模糊。

我的 CSS（没有供应商前缀）：

```
img {filter:grayscale(1);filter:saturate(0%);transition:2s ease;width:200px;height:200px}
img:hover {filter:grayscale(0)}​ 
```

注意：要查看效果/错误，我已将转换持续时间设置为 2 秒

查看我的演示：http: [//jsfiddle.net/dya2t/7/](http://jsfiddle.net/dya2t/7/)

我怎样才能解决这个问题？

**编辑：**如果我将 :hover-state 设置为 filter:none 它的尖锐！:-) 但是过渡当然不再起作用了 :-/ 只要图像上有过滤器（即使值为 0 或 0%），图像在视网膜显示器上就会变得模糊（有或没有过渡......它只是模糊，一直）。我想这是一个过滤器错误。

* * *

这是 WebKit 中的一个已知错误[https://bugs.webkit.org/show_bug.cgi?id=93471](https://bugs.webkit.org/show_bug.cgi?id=93471)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T13:27:11.740

我设法通过应用 img 标签来解决这个问题：

```
-webkit-transform: translateZ(0); 
```

[http://jsfiddle.net/78qbn/3/](http://jsfiddle.net/78qbn/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-13T15:04:13.393

带有 -webkit-backface-visibility 的子元素：隐藏；将解决这个问题。

[http://codepen.io/amboy00/pen/Bxbrd](http://codepen.io/amboy00/pen/Bxbrd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T18:54:12.607

加入 stackoverflow 让其他人知道，因为我必须自己发现这一点：当尝试在 chrome 中打印图像时，这个错误也会出现（但不同）。他们变得**超级像素化**！

如果`-webkit-filter`无论打印机或打印设置如何，您都将 a 扔到 chrome 中的 PNG 上，它会以正确的尺寸打印图像，但会下采样到 70 dpi 以下。它在打印预览中也可见。

`-webkit-transform: translateZ(0);`解决它。

Meatspace repro：[打印有和没有修复的相同 PNG 堆栈](http://i.stack.imgur.com/2aGn3.jpg)

# performance - LLVM JIT 性能不佳

> ID：13347952
> 
> 赞同：1
> 
> 时间：2012-11-12T16:57:50.763
> 
> 标签：performance, llvm, jit

我有一个遗留的 C++ 应用程序，它构造了一个 C++ 对象树。我想使用 LLVM 调用类构造函数来创建所述树。生成的 LLVM 代码相当简单，看起来像以下重复序列：

```
; ...
%11 = getelementptr [11 x i8*]* %Value_array1, i64 0, i64 1
%12 = call i8* @T_string_M_new_A_2Pv(i8* %heap, i8* getelementptr inbounds ([10 x i8]* @0, i64 0, i64 0))
%13 = call i8* @T_QueryLoc_M_new_A_2Pv4i(i8* %heap, i8* %12, i32 1, i32 1, i32 4, i32 5)
%14 = call i8* @T_GlobalEnvironment_M_getItemFactory_A_Pv(i8* %heap)
%15 = call i8* @T_xs_integer_M_new_A_Pvl(i8* %heap, i64 2)
%16 = call i8* @T_ItemFactory_M_createInteger_A_3Pv(i8* %heap, i8* %14, i8* %15)
%17 = call i8* @T_SingletonIterator_M_new_A_4Pv(i8* %heap, i8* %2, i8* %13, i8* %16)
store i8* %17, i8** %11, align 8
; ... 
```

其中每个`T_`函数都是调用某些 C++ 构造函数的 C“thunk”，例如：

```
void* T_string_M_new_A_2Pv( void *v_value ) {
  string *const value = static_cast<string*>( v_value );
  return new string( value );
} 
```

当然，thunk 是必要的，因为 LLVM 对 C++ 一无所知。这些`T_`功能通过添加到`ExecutionEngine`使用中`ExecutionEngine::addGlobalMapping()`。

当这段代码是 JIT'd 时，JIT'ing 本身的性能很差。我已经[使用](https://dl.dropbox.com/u/46791180/callgraph.pdf). `kcachegrind`我不明白所有的数字（而且这个 PDF 似乎没有在它应该包含逗号的地方包含逗号），但是如果你看一下左叉，底部的两个椭圆，`Schedule...`被称为 16K 次，`setHeightToAtLeas...`被称为 37K 次。在右分叉上，`RAGreed...`被调用了 35K 次。

对于大多数简单的LLVM 指令序列*来说*，这些调用太多了。`call`似乎有些不对劲。

关于如何提高 JIT'ing 性能的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:08:53.380

如果不改变 JIT 的工作方式或查看您尝试 JIT 的特定调用，则不太可能发生另一个数量级。您可以在 llc -O0 上启用 -fast-isel-verbose（例如 llc -O0 -fast-isel-verbose mymodule.[ll,bc]）并让它告诉您它是否回退到用于指令生成的选择 dag。您可能想再次分析并查看当前热点是什么。

# ios - Apple iTunes 服务器在企业分发中扮演什么角色？

> ID：13347965
> 
> 赞同：0
> 
> 时间：2012-11-12T16:58:32.750
> 
> 标签：ios, provisioning

我正在研究分发企业应用程序所涉及的内容，并在 Apple 的企业应用程序分发文档中关于无线安装应用程序的部分中找到了这一行：

```
A network configuration that allows the devices to access an iTunes server at Apple 
```

这是什么意思，为什么有必要？我认为要安装的应用程序将托管在公司网站上，但这是否意味着其他情况？

TIA

# .net - 在 Workflow 服务中使用外部 SOAP 服务

> ID：13347967
> 
> 赞同：1
> 
> 时间：2012-11-12T16:58:39.880
> 
> 标签：.net, wcf, soap, workflow-foundation-4

我正在使用 .NET 4 框架并制作了 WCF 工作流服务应用程序。

我想使用在另一个 VS 实例中运行的 SOAP Web 服务 (.NET 3.5)。唯一公开的方法如下：

```
[WebMethod]
public string Reverse(string input)
{
    char[] chars = input.ToCharArray();
    Array.Reverse(chars);
    return new string(chars);
} 
```

我已使用以下步骤在我的工作流程中添加服务：

1.  添加服务参考
2.  提供 WSDL（操作按预期显示在操作框中）
3.  单击确定
4.  构建解决方案以确保服务显示在我的工具箱中
5.  将服务从工具箱拖到工作流中

但是，当我查看工作流中服务的属性时，无法指定输入参数或存储服务调用结果的位置。

我只能选择指定一些晦涩的参数，例如`Body:InArgument<ReverseRequestBody`和`outBody:OutArgument<ReverseResponseBody`（都不是字符串）。

这是描述工作流中服务属性的屏幕截图：

![在此处输入图像描述](../Images/0f7eb5de9620aef1312f2c0510bb533a.png)

因此，我的问题是：

是否可以通过将字符串指定为输入参数（就像要使用它一样）来使用 SOAP 服务，并将结果分配给工作流变量？

也就是说，如何让上图中的和对应web服务的参数和返回值呢`body`？`outBody`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:33:19.637

我猜您在这里使用的是 ASMX 样式的 Web 服务，而不是 WCF 服务。

如果是这样，添加服务参考可以工作，但不能做到最佳。您应该能够通过将 a 设置`Body`为 a`new ReverseRequestBody()`并将输入字符串指定为正文的一部分来使事情正常进行。与输出的方式相同，`ReverseResponseBody`因为它将包含结果字符串作为响应正文的一部分。

# android - 使用cordova（phonegap）时自动附加“加载” div

> ID：13347970
> 
> 赞同：3
> 
> 时间：2012-11-12T16:58:52.663
> 
> 标签：android, cordova, jquery-mobile, mobile

我正在使用 cordova 在 android 平台上进行移动应用程序开发。我在 www/index.html 文件中有这个 html 代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en" />
    <script src="cordova-2.2.0.js" type="text/javascript"></script>
    <script src="jquery/jquery.js" type="text/javascript"></script>
    <script src="jquery.mobile/jquery.mobile-1.1.0.js" type="text/javascript"></script>
    <script src="JS/main.js" type="text/javascript"></script>
    <link rel="stylesheet" href="CSS/main.css"/>

</head>
    <body id="body" class="body">
        <div id="box" class="bodyBlack">
        </div>
    </body>
</html> 
```

我不知道为什么，但是当我运行这个应用程序时（也只是在 PC 浏览器上打开时），我在页面底部附加了这个 div：

```
<div ui-loader ui-corner-all ui-body-a ui-loader-default>
    <span ui-loader ui-corner-all ui-body-a ui-loader-default></span>
        <h1>loading</h1> 
```

这是 main.js 的内容：

```
$(document).ready(function(){
    $('#box').click(function(){
        if($(this).attr('class') == 'bodyBlack'){
            $(this).removeClass('bodyBlack');
            $(this).addClass('bodyWhite');
        }
        else{
            $(this).removeClass('bodyWhite');
            $(this).addClass('bodyBlack');
        }
    });
}); 
```

为什么以及从哪里获得剂量？我如何阻止它这样做？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:14:40.460

这似乎是由 jQuery Mobile 生成的“加载消息”，请参阅[此答案](https://stackoverflow.com/questions/8245360/jquerymobile-loading-message-theme)。所以 jQuery Mobile 正在加载一些东西（也许找不到它）。`main.js`如果您仍然遇到问题，请发布您的文件内容！

# jquery - Jquery在不透明度0后不显示

> ID：13347974
> 
> 赞同：0
> 
> 时间：2012-11-12T16:59:01.413
> 
> 标签：jquery

我有一个关于 Jquery 的问题，我试图抛出一个状态框，显示成功保存给最终用户。

我的问题是，显示后我无法单击任何输入字段，因为 div 不透明度设置为 0 而不是不显示，这是我的代码：

```
function messageBox(x){

n = x.indexOf('SUCCESS');

    if(n!==-1){
        $("#messageBoxSuccess").text(x.replace('SUCCESS', ''))
        $("#messageBoxSuccess").fadeTo(1000, 1);
        $("#messageBoxSuccess").delay(500);
        $("#messageBoxSuccess").fadeTo(1000, 0);

    }else{
        $("#messageBoxError").text(x.replace('ERROR', ''))
        $("#messageBoxError").fadeTo(1000, 1);
        $("#messageBoxError").delay(500);
        $("#messageBoxError").fadeTo(1000, 0);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:02:05.323

采用

```
$("#messageBoxSuccess").fadeIn(500, function() { });
$("#messageBoxSuccess").fadeOut(500, function() { }); 
```

反而。这会淡入 0 或 1 并在淡入 0 完成后隐藏（显示：无）元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:02:34.310

jQuery的fadeTo有一个回调事件

```
.fadeTo( duration, opacity [, callback] ) 
```

所以你可以做

```
$("#messageBoxError").fadeTo(1000, 0, function(){ $(this).hide() }); 
```

在 fadeTo 结束时设置 display: none。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:02:07.800

`.fadeTo`不改变显示风格。如果您想将显示更改为无，请使用`.fadeOut()`和`.fadeIn()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T17:11:34.080

正如其他人所说，您可以使用`.fadeIn()`和`.fadeOut()`自动隐藏/显示内容。你也可以像这样清理你的代码：

```
function messageBox(x){
    var replaceText, msgBoxId;

    if (x.indexOf('SUCCESS') !== -1) {
        replaceText = "SUCCESS";
        msgBoxId = "#messageBoxSuccess";
    } else {
        replaceText = "ERROR";
        msgBoxId = "#messageBoxError";
    }

    $(msgBoxId).text(x.replace(replaceText, ''))
        .fadeIn(1000).delay(500).fadeOut(1000);
} 
```

变化：

1.  消除对`n`作为隐式全局变量的未声明变量的需要
2.  在条件中设置“SUCCESS”或“ERROR”和消息框ID
3.  将所有其他通用代码移到条件之外，而不是重复两次
4.  使用 jQuery 链接，以便`$("#messageBoxSuccess")``$("#messageBoxError") 只计算一次。
5.  切换到`.fadeOut()`等`.fadeIn()`内容在动画之前/之后自动隐藏/显示。

# java - 推送和评估堆栈

> ID：13347975
> 
> 赞同：1
> 
> 时间：2012-11-12T16:59:05.087
> 
> 标签：java, stack, double, evaluation, postfix-notation

第一次发帖，请告诉我如何改进。

我正在开发一个将中缀表示法转换为后缀然后进行评估的程序。我对后缀的转换进展顺利，但我的评估遇到了一些问题。在下面的代码中，当我尝试将操作数转换为双变量“数字”时，它们不会保持它们的值（参见下面的运行时输出）。这是有问题的方法的一部分（打印语句仅用于调试）。

```
public boolean evaluatePostfix(StringBuffer postfix)
    {
        Stack <Double> operand = new Stack <Double>();//stack to hold operand values
        double answer = 0; //variable to hold result of expression
        boolean error = false; //tests for input error
        int pos = 0; //temp veraible stores position in postfix expression
        double number = 0; //temp variable to convert char to double. also stores that value for reference
        double val1 = 0; //first value for operations
        double val2 = 0; //second value for operations
        double val3 = 0; //answer for val1 and val2

        while (!error && pos < postfix.length())
                {
                    System.out.println(postfix.charAt(pos));
                    if (postfix.charAt(pos) == ' ')
                        ; //do nothing
                    else if (Character.isDigit(postfix.charAt(pos)))
                    {
                        number = Double.parseDouble(postfix.substring(pos));
                        System.out.printf ("number = %f", number);
                        operand.push(number);
                    }
                    else
                    {
                        val1 = operand.pop();
                        val2 = operand.pop();
                        System.out.printf ("val1: %f\tval2: %f\n", val1, val2); 
```

> ---在运行时--- 1
> 
> 数字 = 49.000000
> 
> 8
> 
> 数字 = 56.000000
> 
> +
> 
> val1：56.000000
> 
> val2：49.000000
> 
> val3 = 105.000000
> 
> 105.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:02:33.587

您正在获取每个字符的 ASCII 值，例如 '1' =>`49`并将其推入堆栈。

您最可能想要的是使用[扫描仪](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html "Java 扫描器类")读取从您输入的文本转换而来的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:30:19.523

代替：

```
number = postfix.charAt(pos); 
```

和：

```
number = Double.parseDouble(Character.toString(postfix.charAt(pos))); 
```

Double.parseDouble方法将字符串转换为双**[精度：](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)**

> 返回一个新的 double，初始化为由指定 String 表示的值，由 Double 类的 valueOf 方法执行。

*（来自 Javadoc）*

* * *

如果您使用 postfix.toString.split(" ") 拆分字符串，然后在 string[] 上迭代，您将能够解析双精度值（如“8.4567”）：

```
 String[] sa = postfix.toString().split(" ");        
    for (String string : sa) {
    .... omissis ... 
```

否则，您的代码仅解析单个数字整数值才是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:20:07.050

解析表达式可能不是一项简单的任务。在更复杂的情况下，使用解析器生成器是唯一合理的方法。

在你的情况下，你可能没有一个：

*   你的“代币”是什么？
*   你如何检测每个令牌的开始和结束？
*   从输入中提取令牌后，您将如何处理每个令牌？

您的标记似乎是（十进制）数字和算术运算符。- 你如何确定每个的开始和结束？它们之间的空格“”可以构成足够的分隔符。

然后您可以一次干净地解析一个令牌：`Double.parseDouble(...)`用于解析数字令牌并相应地处理运算符。

您可能想查看 Java 的[Tokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)以支持从输入中提取标记。

# r - 匹配后的子集

> ID：13347978
> 
> 赞同：0
> 
> 时间：2012-11-12T16:59:07.973
> 
> 标签：r

我有一个这样的数据框（特别是 data.frame 包含 50 列）：

> ```
>  "G1"            "G2"  
>   SEP11          ABCC1   
>   0.1365         0.1858   
>   214223_at      ADAM19     
>   0.1305         0.131   
>   COPS4          BIK 
>   0.1271         0.1143
>   ACE            ALG3
>   0.1333         0.119
>   EMP3           GGH
>   0.1246         0.1214 
> ```

和另一个这样的data.frame（特别是data.frame包含50列）：

> ```
>  "G1"           "G2"  
>   0.1365         0.1858   
>   0.1271         0.1143    
>   0.1246         0.1214 
> ```

我想要以下输出：

> ```
>  "G1"           "G2"  
>  SEP11          ABCC1  
>  0.1365         0.1858  
>  COPS4          BIK     
>  0.1271         0.1143   
>  EMP3           GGH
>  0.1246         0.1214 
> ```

任何人都可以帮助我吗？

基本上，在 R 找到 data.frame 1 中的“0.1365”和 data.frame2 中的“0.1365”之间的匹配后，它将从 data.frame1 中提取对应的名称，该名称与存在匹配的数字和数字相关联因为我想回答这个问题：data.frame1 中的哪个元素与该数字相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:02:14.207

```
df1 <- read.table(text=" G1            G2  
  SEP11          ABCC1   
  0.1365         0.1858   
  214223_at      ADAM19     
  0.1305         0.131   
  COPS4          BIK 
  0.1271         0.1143
  ACE            ALG3
  0.1333         0.119
  EMP3           GGH
  0.1246         0.1214",header=TRUE,stringsAsFactors=FALSE)

df2 <- read.table(text="G1           G2  
      0.1365         0.1858   
      0.1271         0.1143    
      0.1246         0.1214 
 ",header=TRUE,stringsAsFactors=FALSE)

#separate names and numbers
df1a <- df1[seq(from=1,to=nrow(df1)-1,by=2),]
df1b <- df1[seq(from=2,to=nrow(df1),by=2),]

#look up and merge again
df <- rbind(df1b[apply(df1b,1,paste,collapse=",") %in% apply(df2,1,paste,collapse=","),],
            df1a[apply(df1b,1,paste,collapse=",") %in% apply(df2,1,paste,collapse=","),])
df <- df[order(as.numeric(rownames(df))),]
#       G1     G2
#1   SEP11  ABCC1
#2  0.1365 0.1858
#5   COPS4    BIK
#6  0.1271 0.1143
#9    EMP3    GGH
#10 0.1246 0.1214 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:02:31.890

假设您的数据是成对的行，这应该有效：

1.  您的数据：

    ```
    df1 <- read.table(header = TRUE, text = '  "G1"            "G2"
                      SEP11          ABCC1
                      0.1365         0.1858
                      214223_at      ADAM19
                      0.1305         0.131
                      COPS4          BIK
                      0.1271         0.1143
                      ACE            ALG3
                      0.1333         0.119
                      EMP3           GGH
                      0.1246         0.1214')
    df2 <- read.table(header = TRUE, text = ' "G1"           "G2"
                      0.1365         0.1858
                      0.1271         0.1143
                      0.1246         0.1214 ') 
    ```

2.  匹配指定数据和上一行的数据

    ```
    myMatch <- which(df1$G1 %in% df2$G1)
    myMatch <- sort(c(myMatch, myMatch-1)) 
    ```

3.  子集。

    ```
    df1[myMatch, ]
    #        G1     G2
    # 1   SEP11  ABCC1
    # 2  0.1365 0.1858
    # 5   COPS4    BIK
    # 6  0.1271 0.1143
    # 9    EMP3    GGH
    # 10 0.1246 0.1214 
    ```

### 更新

借用一点 Roland 的方法，如果您尝试跨多个列进行匹配，那么确实`merge`可能是一种更合适的方法。不幸的是，您的数据目前不是一种易于合并的形式，但这也很容易修复：

1.  `data.frame`通过分离名称和值并`cbind`ing 输出来“修复”您的“df1” 。

    ```
    df1.new <- cbind(df1[seq(from = 1, to = nrow(df1), by = 2), ], 
                     df1[seq(from = 2, to = nrow(df1), by = 2), ]) 
    ```

2.  重命名数据前半部分的列以指示它们是名称。后半部分数据的列将保留以进行合并。

    ```
    names(df1.new)[1:(ncol(df1.new)/2)] <- 
      paste(names(df1.new[1:(ncol(df1.new)/2)]), "Name", sep = ".")
    df1.new
    #     G1.Name G2.Name     G1     G2
    # 1     SEP11   ABCC1 0.1365 0.1858
    # 3 214223_at  ADAM19 0.1305  0.131
    # 5     COPS4     BIK 0.1271 0.1143
    # 7       ACE    ALG3 0.1333  0.119
    # 9      EMP3     GGH 0.1246 0.1214 
    ```

3.  用于`merge()`获取数据的“子集”。

    ```
    merge(df1.new, df2)
    #       G1     G2 G1.Name G2.Name
    # 1 0.1246 0.1214    EMP3     GGH
    # 2 0.1271 0.1143   COPS4     BIK
    # 3 0.1365 0.1858   SEP11   ABCC1 
    ```

一般来说，这个“更宽”`data.frame`可能更方便您使用。

# javascript - 浮动时间绘图

> ID：13347979
> 
> 赞同：1
> 
> 时间：2012-11-12T16:59:11.443
> 
> 标签：javascript, jquery, time-series, flot, bar-chart

我正在尝试使用 flot 创建一个堆叠的条形图。我有我的数据

```
var data = [{
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 2]],
        "label": "1 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 1]],
        "label": "2 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 1]],
        "label": "3 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 0]],
        "label": "4 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 0]],
        "label": "5 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 0]],
        "label": "6 months"},
    {
        "data": [[1336979060, 0], [1339605620, 0], [1342232180, 0], [1344858740, 0], [1347485300, 0], [1350111860, 1]],
        "label": "7 months"}]; 
```

我创建了一个小提琴来帮助您更好地理解它：http: [//jsfiddle.net/julijan/g2aJV/4/](http://jsfiddle.net/julijan/g2aJV/4/)

您可以看到它正确呈现标签，甚至正确呈现月份，这意味着它理解数据，但条形图未显示。

有任何想法吗？

谢谢，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:42:38.983

要解决此问题，请确保您的 x 值在您定义的 min-max 范围内。如果您使用的是 unix 时间戳，请确保将其乘以 1000 以将秒转换为毫秒。

# c++ - 使用 Boost 的 Visual Studio C++/OpenCL 项目未在 Linux 上使用 g++ 进行编译

> ID：13347982
> 
> 赞同：0
> 
> 时间：2012-11-12T16:59:31.260
> 
> 标签：c++, linux, boost, g++, opencl

首先是一些背景知识 - 我有三个 VS2010 C++/OpenCL 项目，它们在 Windows 7 64 位上编译和运行良好。我一直在尝试在 Linux 64 位（Ubuntu/Debian）上编译和运行它们。前两个是在 linux 上编译和运行，并没有真正使用任何外部库。第三个仅使用 Boost 1.50.0，并且没有使用与前两个相同的方法进行编译。因此，首先让我回顾一下我为使前两个工作正常所做的工作。

1.  我只从无数文件夹中提取了源代码。
2.  我将 windows 特定代码移植到 linux 特定代码。
3.  我编写了一个 bash 脚本来生成带有所有源的 g++ 命令来编译它们。
4.  我运行编译脚本来生成输出目标文件。

bash 脚本如下。

```
#!/bin/bash          

SOURCE=""

for i in `ls *.h *.cpp *.hpp`; do
   SOURCE+="${i} "
done

COMMAND="g++ -I/home/junkie/downloads/boost_1_51_0 -o out ${SOURCE} -L/opt/AMDAPP/lib/x86_64/ -I/opt/AMDAPP/include -lOpenCL -fpermissive"

echo -e "\n"
echo -e "${COMMAND}"
echo -e "\n"

$COMMAND
exit $? 
```

它会生成并运行类似于以下的命令。

```
g++ -I/home/junkie/downloads/boost_1_51_0 -o out blah.cpp blah.h foo.hpp baz.cpp etc.cpp  -L/opt/AMDAPP/lib/x86_64/ -I/opt/AMDAPP/include -lOpenCL -fpermissive 
```

我使用以下命令进行编译。

```
./compile.sh &> log; echo $?; grep -ci error log; wc -l log 
```

现在您可能想知道为什么我采用这种非常规和冗余的方法来让 C++ 项目在 linux 上编译和运行。好吧，因为我是 linux c 和 c++ 工具链的新手，这是我能想到的最快和最简单的方法来完成工作，它确实让前两个项目启动并运行。但是，第三个使用 boost 并且这种方法不起作用，我需要您的帮助来弄清楚所有这些奇怪的错误是什么。

我得到的错误实际上不是来自项目代码，而是来自 Boost 和 AMD 的 opencl 库代码，这很奇怪，因为其他项目也在使用 opencl 并且工作正常。

下面是一些 boost 错误的示例。

```
foo.hpp:2331:1: error: unterminated argument list invoking macro "BOOST_PP_CAT_I"
In file included from main.cpp:4:                                   
foo2.hpp:1610:1: error: unterminated argument list invoking macro "BOOST_PP_CAT_I"
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: variable or field ‘BOOST_PP_CAT_I’ declared void                                  /home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp: At global scope:
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: variable or field ‘BOOST_PP_CAT_I’ declared void
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected ‘;’ at end of input
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected ‘;’ at end of input
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected ‘}’ at end of input
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected unqualified-id at end of input
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected ‘}’ at end of input
/home/junkie/downloads/boost_1_51_0/boost/preprocessor/cat.hpp:22: error: expected ‘}’ at end of input
foo.hpp:2331:1: error: unterminated argument list invoking macro "BOOST_PP_CAT_I" 
```

下面是一些 opencl 错误示例。

```
In file included from /opt/AMDAPP/include/CL/cl_platform.h:35,      
                 from /opt/AMDAPP/include/CL/cl.h:30,               
                 from bar.h:7,                                      
                 from fooGPU.hpp:6,                                 
                 from main.cpp:4:                                   
/usr/include/stdint.h:49: error: expected ‘;’ before ‘typedef’      
In file included from /opt/AMDAPP/include/CL/cl.h:30,               
                 from bar.h:7,                                      
                 from fooGPU.hpp:6,                                 
                 from main.cpp:4:                                   
/opt/AMDAPP/include/CL/cl_platform.h:41: error: expected unqualified-id before string constant
main.cpp:136: error: expected ‘}’ at end of input                   
main.cpp:136: error: expected unqualified-id at end of input        
main.cpp:136: error: expected ‘}’ at end of input                   
main.cpp:136: error: expected ‘}’ at end of input 
```

提升包括我正在使用如下。

```
#include <boost/preprocessor/punctuation/paren.hpp>
#include <boost/preprocessor/punctuation/comma.hpp>
#include <boost/static_assert.hpp>
#include <boost/type_traits/is_same.hpp>
#include <boost/type_traits/is_base_of.hpp>
#include <boost/mpl/not.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/logical.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/array.hpp> 
```

所以，最后，我的问题如下。

1）根据我正在使用的构建方法，这些错误的根本原因是什么？我该如何解决这个问题？文件或库包含的顺序是否重要？我使用 boost 的本地源下载作为我的 g++ 命令的一部分，按照 boost 文档的指示，而不是预构建的二进制文件，因为我没有使用任何需要预构建二进制文件的东西。

2）我意识到我的构建方式非常原始。我正在学习 make 并且我已经看到了一些使用 cmake 和 kdevelop 的建议，我需要研究这些建议。使用 make 的主要问题是这些项目在编写时没有考虑到 make 所以我不知道源文件之间的依赖关系图来创建 makefile （如果我的想法正确的话；我对它）。如果您对如何做得更好有任何建议，请赐教。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:46:52.960

我终于设法克服了这个问题，在这里我简要介绍一下。需要明确的是，我不知道原始问题的根本原因是什么。换句话说 - 我不知道为什么会出现问题。我要说的是，我的解决方法使我能够解决问题并解决其他问题（编译时错误）。

本质上，重申一下，问题在于无论出于何种原因，使用 boost 的项目都没有在 Linux 上编译，因为所有使用 BOOST_PP_CAT() 函数的实例都产生了以下错误。

```
error: unterminated argument list invoking macro "BOOST_PP_CAT_I" 
```

无论出于何种原因，编译器都无法正确处理此函数的使用，但能够处理其他 boost 函数的使用，例如 BOOST_PP_LPAREN()、BOOST_PP_RPAREN() 和 BOOST_PP_COMMA。这个问题看起来几乎肯定与预处理阶段有关，在该阶段结合使用上述提升函数会导致未终止的参数列表。

为了详细说明相关代码的性质（幸好不是我写的），之前的开发人员基本上使用了 boost 预处理器函数来创建一个 DSL，然后他们可以多次重复使用以生成函数列表。对我来说，简单地直接编写函数似乎要容易得多，但无论如何这是另一个问题。

我的解决方法是更改​​代码的相关部分，使其不使用任何 BOOST_PP_CAT() 函数，但最终定义了与以前完全相同的函数。我通过将 BOOST_PP_CAT() 的使用替换为它生成的代码来做到这一点。这克服了上面引用的所有错误实例，但在我将这个项目从 windows 迁移到 linux 的过程中，还留下了数百个其他编译时错误。

Although this was a very specific and unusual question with an equally specific and unusual answer I wanted to feed this back to dispel the mystery behind this problem. As to why this particular function was failing to preprocess/compile on linux but passing on Windows I don't know but would very much like to know. I can only assume it is a fundamental difference in the way VC++ performs preprocessing as opposed to g++ and clang or more specifically perhaps a difference in the order of resolution of nested functions in preprocessor directives. Who knows. Anyway, thanks for your help guys.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:11:22.150

该`unterminated argument list invoking macro`错误表明缺少右括号。使用编辑器的括号匹配器来检查它。确保您的源文件是 Unix 格式，而不是 DOS 格式（例如，在每个行尾使用`\n`à la Unix，而不是`\r\n`à la MSDOS）。`dos2unix`需要时使用。

否则，不要忘记您可以运行`g++ -Wall -C -E -H -I/home/junkie/downloads/boost_1_51_0 yoursourcecode.cc`以获取 的预处理形式`yoursourcecode.cc`，并且通过重定向该命令，您可以使用您选择的编辑器（如`emacs`）检查该预处理形式。

正如我所评论的，学习使用 Gnu [make](http://www.gnu.org/software/make/)（如果在调试你的 . 时遇到问题`Makefile`，你应该用一个好的编辑器编辑它`emacs`，使用[remake](http://bashdb.sourceforge.net/remake/) `-x`来调试它）。

而且`-I/home/junkie/downloads/boost_1_51_0`看起来非常可疑：即使 Boost 通常是一个仅包含头文件的库，据我所知，它在 Unix 上具有安装过程（而 Linux 发行版通常会打包 Boost 库）。您应该按照文档说明安装您的 Boost 库（并在配置它们之后），对于 OpenCL 也是如此。

# jquery - 从回调中修改 jQuery ajax 设置

> ID：13347984
> 
> 赞同：0
> 
> 时间：2012-11-12T16:59:43.250
> 
> 标签：jquery, ajax

我有一个对 url 的 jQuery ajax 调用。成功后，我需要修改此 url 以进行后续调用。我如何访问设置来执行此操作？

```
$.ajax({
    url: 'http://google.com',
    success: function (data, textStatus, jqXHR) {
        //set url here to http://yahoo.com
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:00:59.883

```
var count = 0;

function getUrl()
{
  count++;
  if ( count == 1 )
    return 'http://google.com';
  else
    return 'http://yahoo.com';
}

$.ajax({
    url: getUrl(),
    success: function (data, textStatus, jqXHR) {

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:18:59.870

好的 - 想通了。我的问题是我的电话在提交时被包装在一个表单中，并且在此电话中更新 url 不起作用。但是，将 url 移到调用之外允许我从回调中更新它。

这不起作用：

```
$("#form").bind("submit", function(evt) {   
  var url = "http://myurl";
  $.ajax({
    url:  url,
    type: "PUT",
    contentType: "application/json",
    dataType: "json",
    data: data,
    success: function (data, textStatus, jqXHR) {
      url = "http://newurl" 
    },
    error: function (jqXHR, textStatus, errorThrown) { }
  });
  return false;
}); 
```

但这确实：

```
var url = "http://myurl";
$("#form").bind("submit", function(evt) {
  $.ajax({
    url:  url,
    type: "PUT",
    contentType: "application/json",
    dataType: "json",
    data: data,
    success: function (data, textStatus, jqXHR) {
      url = "http://newurl" 
    },
    error: function (jqXHR, textStatus, errorThrown) { }
  });
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:01:38.687

```
var customUrl = 'http://google.com'

$.ajax({
    url: customUrl ,
    success: function (data, textStatus, jqXHR) {
        //set url here to http://yahoo.com

        customUrl = 'http://yahoo.com'

        use your customUrl variable later
    }
}); 
```

Ajax 是异步的。所以如果你想在以后使用url，最好在成功回调函数中使用它......

如果您在 ajax 请求之后立即使用它，则可能 ajax 请求仍未完成，并且当您尝试访问它时变量未更新

# php - 在 PHP 中自动删除日志文件

> ID：13347988
> 
> 赞同：1
> 
> 时间：2012-11-12T17:00:01.067
> 
> 标签：php

> **可能重复：**
> [自动从网络服务器中删除文件](https://stackoverflow.com/questions/3460698/automatically-delete-files-from-webserver)

我正在将一些 XML 内容记录到一个文本文件中`file_put_contents()`，以防我需要它进行调试。

如何在一定时间后删除此文件？

我`.htaccess`在日志文件夹中有一个限制，但我宁愿不要将信息（会有客户的地址等）长时间留在网上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T17:11:06.830

好吧，虽然同意其他人的观点，你使用了错误的工具来完成这项工作，但你的问题非常简单。所以你去：

*   编写将从命令行运行的 PHP 脚本
*   使用类似`cron`或 windows 计划任务的工具
*   调用`cron`每分钟/五分钟/等

您的脚本将非常简单：

```
<?php
   $dh = opendir(PATH_TO_DIRECTORY);
   while( ($file = readdir($dh)) !== false ) {
      if( !preg_match('/^[.]/', $file) ) {  // do some sort of filtering on files
         $path = PATH_TO_DIRECTORY . DIRECTORY_SEPARATOR . $file;
         if( filemtime($path) < strtotime('-1 hour') ) {  // check how long it's been around
            unlink($path);  // remove it
         }
      }
   } 
```

如果您在 Linux 中工作，您也可以使用`find`，但我看到 @Rawkode 在我写这篇文章时发布了这个，所以我会为您提供他对该解决方案的优雅答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T17:03:39.740

您应该使用将尊重 php.ini 设置的 PHP [error_log()函数。](http://us3.php.net/manual/en/function.error-log.php)

```
error_log('Send to PHP error log');
error_log('Sent to my custom log', 3, "/var/tmp/my-errors.log"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T17:08:39.070

您可以使用内置功能 – [`filectime`](http://php.net/filectime)– 来跟踪日志文件的创建日期，然后删除那些旧到可以删除的文件。

此代码搜索*日志*目录并删除 2 周前的日志。

```
$logs = opendir('logs');

while (($log = readdir($logs)) !== false)
{
    if ($log == '.' || $log == '..')
        continue;

    if (filectime('logs/'.$log) <= time() - 14 * 24 * 60 * 60)
    {
        unlink('logs/'.$log);
    }
}

closedir($logs); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T17:10:16.577

有两种方法可以解决：

1.  如果您仅将日志写入一个文件，则可以使用以下方式清空该文件：

    ```
    <?php file_put_contents($logpath, ""); 
    ```

2.  如果你生成很多文件，你可以像这样编写清理函数：

    ```
    <?php
    $logpath = "/tmp/path/to/log/";
    $dirh = opendir($logpath);
    while (($file = readdir($dh)) !== false) {
        if(in_array($file, array('.', '..'))) continue;
        unlink($logpath . $file);
    }
    closedir($dirh); 
    ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T17:05:05.843

您应该更好地处理您的日志记录，但要回答您的问题，我会使用 *nix`find`命令。

`find /path/to/files* -mtime +5 -delete`

这将删除所有五天内未修改的文件。根据自己的需要进行调整。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T17:06:30.373

您可以设置服务器计划任务（在 *nix 系统下最常见的 Cron 作业）定期运行并删除左侧的日志文件。任务是执行一个 PHP 代码来完成这项工作。

请参阅[Cron 作业概述w](http://www.thesitewizard.com/general/set-cron-job.shtml)

# sql - Sybase Adaptive Server Anywhere 6 触发器 - 尝试检测 im INSERTING 还是 UPDATING

> ID：13347990
> 
> 赞同：0
> 
> 时间：2012-11-12T17:00:06.983
> 
> 标签：sql, triggers, sybase-asa

在触发器内的 Sybase Adaptive Server Anywhere v10 中，我可以使用以下命令检查执行了触发的事件：

```
IF UPDATING THEN
-- Do Stuff
END IF;

IF INSERTING THEN
-- Do Stuff
END IF; 
```

但是在 v6 中，这不被识别。知道如何做同样的事情，或者我只需要创建两个单独的触发器。一个用于更新，一个用于插入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:38:19.820

不，版本 6 不支持此功能。您必须为每个操作编写单独的触发器。请注意，第 6 版已经快十五年了；您应该考虑升级到较新的版本。

# javascript - 来自图像映射的 GreyBox 叠加

> ID：13347991
> 
> 赞同：1
> 
> 时间：2012-11-12T17:00:07.113
> 
> 标签：javascript, html

我过去曾使用[GreyBox](http://orangoo.com/labs/GreyBox)来显示来自图像地图区域标签的图像叠加层。

```
<area shape ="circle" coords ="245,350,10" href="images/photo.jpg" onClick="return GB_showImage('Title', this.href)" /> 
```

但现在我发现第一次点击时照片没有显示。如果我关闭灰色框，然后再次单击图像地图，则照片将正确显示。

谁能解释一下这里发生了什么？

# antlr - ANTLR：去除杂波

> ID：13347997
> 
> 赞同：1
> 
> 时间：2012-11-12T17:00:41.270
> 
> 标签：antlr, antlr3

我现在正在学习ANTLR。比方说，我有一个 VHDL 代码，想对 PROCESS 块进行一些处理。其余的应该完全忽略。我不想描述整个 VHDL 语言，因为我只对进程块感兴趣。所以我可以写一个匹配进程块的规则。但是我如何告诉 ANTLR 只匹配进程块规则而忽略其他任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:15:10.523

我知道几乎没有 VHDL，所以假设您想用多行注释替换（Java）源文件中的所有单行注释：

```
//foo 
```

应该变成：

```
/* foo */ 
```

当然，您需要让词法分析器匹配单行注释。但是您还应该确保它能够识别多行注释，因为您不希望`//bar`在以下内容中被识别为单行注释：

```
/*
//bar
*/ 
```

字符串文字也是如此：

```
String s = "no // comment"; 
```

最后，您应该在词法分析器中创建某种可以匹配任何字符的包罗万象的规则。

快速演示：

```
grammar T;

parse
 : (t=. {System.out.print($t.text);})* EOF
 ;

Str
 : '"' ('\\' . | ~('\\' | '"'))* '"'
 ;

MLComment
 : '/*' .* '*/'
 ;

SLComment
 : '//' ~('\r' | '\n')*
   {
     setText("/* " + getText().substring(2) + " */");
   }
 ;

Any
 : . // fall through rule, matches any character
 ; 
```

如果您现在像这样解析输入：

```
//comment 1
class Foo {

  //comment 2

  /* 
   * not // a comment
   */
  String s = "not // a // comment"; //comment 3
} 
```

以下将打印到您的控制台：

```
/* comment 1 */
class Foo {

  /* comment 2 */

  /* 
   * not // a comment
   */
  String s = "not // a // comment"; /* comment 3 */
} 
```

请注意，这只是一个快速演示：Java 中的字符串文字可能包含 Unicode 转义，我的演示不支持，而且我的演示也不处理字符文字（字符文字`char c = '"';`会破坏它）。当然，所有这些事情都很容易解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T21:01:10.520

在即将发布的 ANTLR v4 中，您可以进行模糊解析。看一眼

[http://www.antlr.org/wiki/display/ANTLR4/Wildcard+Operator+and+Nongreedy+Subrules](http://www.antlr.org/wiki/display/ANTLR4/Wildcard+Operator+and+Nongreedy+Subrules)

您可以在此处获取测试版软件：

[http://antlr.org/download/antlr-4.0b3-complete.jar](http://antlr.org/download/antlr-4.0b3-complete.jar)

特伦斯

# variables - 从多个模式 grep 创建 2 个变量

> ID：13347998
> 
> 赞同：0
> 
> 时间：2012-11-12T17:00:42.070
> 
> 标签：variables, grep, ngrep

我正在尝试创建一个概念验证 bash 脚本来使用 ngrep 扫描网络，找到适当的 cookie，然后将它们放入变量中。

```
cook=`ngrep -s 1000 -l -q -d eth1 "Cookie:" tcp and port 80 |
  grep -m 1 -Po '(?<=user=)[^;]+'` 

cook2=`ngrep -s 1000 -l -q -d eth1 "Cookie:" tcp and port 80 |
  grep -m 1 -Po '(?<=ab=)[^;]+'` 
```

如何从 ONE 数据包中存储 cookie 和 cookie2 而不必 ngrep 两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:46:39.920

假设字符串是这种形式

```
Cookie: foo=111; bar=222; baz=333 
```

您可以获取字符串，因为它是有效的 Bash 代码。例子

```
ngrep -s 1000 -l -q -d eth1 'Cookie:' tcp and port 80 | cut -d: -f2- > v.sh
. v.sh
rm v.sh
cook="$user"
cook2="$ab" 
```