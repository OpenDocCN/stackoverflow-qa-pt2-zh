# StackOverflow 问答 14261000-14261999

# sql-server - 复杂的 SQL 字符串解析

> ID：14261001
> 
> 赞同：0
> 
> 时间：2013-01-10T15:11:08.817
> 
> 标签：sql-server, string, tsql

我在 SQL Server 表中有以下文本字段：

```
1!1,3!0,23!0,288!0,340!0,521!0,24!0,38!0,26!0,27!0,281!0,19!0,470!0,568!0,601!0,2!1,251!0,7!2,140!0,285!0,11!2,33!0 
```

1.  只想检索感叹号 (!) 之前的部分。所以`1!1`我只想要`1`，`3!0`我只想要`3`，`23!0`我只想要`23`。

2.  还想只检索感叹号 (!) 之后的部分。所以`1!1`我只想要`1`，`3!0`我只想要`0`，`23!0`我只想要`0`。

第 1 点和第 2 点都应该插入到 SQL Server 表的不同列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:41:01.573

我喜欢 SQL Server 的 XML 功能。这是解析数据的好方法。试试这个：

```
--Load the original string
DECLARE @string nvarchar(max) = '1!2,3!4,5!6,7!8,9!10';

--Turn it into XML
SET @string = REPLACE(@string,',','</SecondNumber></Pair><Pair><FirstNumber>') + '</SecondNumber></Pair>';
SET @string = '<Pair><FirstNumber>' + REPLACE(@string,'!','</FirstNumber><SecondNumber>');

--Show the new version of the string
SELECT @string AS XmlIfiedString;

--Load it into an XML variable
DECLARE @xml XML = @string;

--Now, First and Second Number from each pair...
SELECT
  Pairs.Pair.value('FirstNumber[1]','nvarchar(1024)') AS FirstNumber,
  Pairs.Pair.value('SecondNumber[1]','nvarchar(1024)') AS SecondNumber
FROM @xml.nodes('//*:Pair') Pairs(Pair); 
```

上面的查询将字符串转换为 XML，如下所示：

```
<Pair><FirstNumber>1</FirstNumber><SecondNumber>2</SecondNumber></Pair> ... 
```

然后对其进行解析以返回如下结果：

```
FirstNumber | SecondNumber
----------- | ------------
          1 |            2
          3 |            4
          5 |            6
          7 |            8
          9 |           10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:27:32.067

我完全同意那些抱怨这类数据的人。然而，事实是我们通常无法控制来源的格式。

这是我的方法...

首先，您需要一个标记器。这个效率很高（可能是最快的非 CLR）。见[http://www.sqlservercentral.com/articles/Tally+Table/72993/](http://www.sqlservercentral.com/articles/Tally+Table/72993/)

```
CREATE FUNCTION [dbo].[DelimitedSplit8K]
--===== Define I/O parameters
        (@pString VARCHAR(8000), @pDelimiter CHAR(1))
--WARNING!!! DO NOT USE MAX DATA-TYPES HERE!  IT WILL KILL PERFORMANCE!
RETURNS TABLE WITH SCHEMABINDING AS
 RETURN
--===== "Inline" CTE Driven "Tally Table" produces values from 1 up to 10,000...
     -- enough to cover VARCHAR(8000)
  WITH E1(N) AS (
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
                ),                          --10E+1 or 10 rows
       E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E+2 or 100 rows
       E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E+4 or 10,000 rows max
 cteTally(N) AS (--==== This provides the "base" CTE and limits the number of rows right up front
                     -- for both a performance gain and prevention of accidental "overruns"
                 SELECT TOP (ISNULL(DATALENGTH(@pString),0)) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E4
                ),
cteStart(N1) AS (--==== This returns N+1 (starting position of each "element" just once for each delimiter)
                 SELECT 1 UNION ALL
                 SELECT t.N+1 FROM cteTally t WHERE SUBSTRING(@pString,t.N,1) = @pDelimiter
                ),
cteLen(N1,L1) AS(--==== Return start and length (for use in substring)
                 SELECT s.N1,
                        ISNULL(NULLIF(CHARINDEX(@pDelimiter,@pString,s.N1),0)-s.N1,8000)
                   FROM cteStart s
                )
--===== Do the actual split. The ISNULL/NULLIF combo handles the length for the final element when no delimiter is found.
 SELECT ItemNumber = ROW_NUMBER() OVER(ORDER BY l.N1),
        Item       = SUBSTRING(@pString, l.N1, l.L1)
   FROM cteLen l
;
GO 
```

然后你像这样消费它......

```
DECLARE @Wtf VARCHAR(1000) = '1!1,3!0,23!0,288!0,340!0,521!0,24!0,38!0,26!0,27!0,281!0,19!0,470!0,568!0,601!0,2!1,251!0,7!2,140!0,285!0,11!2,33!0'

SELECT   LEFT(Item, CHARINDEX('!', Item)-1)
        ,RIGHT(Item, CHARINDEX('!', REVERSE(Item))-1)
FROM [dbo].[DelimitedSplit8K](@Wtf, ',') 
```

发布的函数和解析逻辑当然可以集成到一个函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:42:34.997

我同意规范化数据是最好的方法。但是，这里是解析数据的 XML 解决方案

```
DECLARE @str VARCHAR(1000) = '1!1,3!0,23!0,288!0,340!0,521!0,24!0,38!0,26!0,27!0,281!0,19!0,470!0,568!0,601!0,2!1,251!0,7!2,140!0,285!0,11!2,33!0'
    ,@xml XML

SET @xml  = CAST('<row><col>' + REPLACE(REPLACE(@str,'!','</col><col>'),',','</col></row><row><col>') + '</col></row>' AS XML)

SELECT  
     line.col.value('col[1]', 'varchar(1000)') AS col1
    ,line.col.value('col[2]', 'varchar(1000)') AS col2
FROM    @xml.nodes('/row') AS line(col) 
```

# gnuplot - 如何使用 gnuplot 脚本将以某种格式保存的不同数据文件绘制成单个图

> ID：14261005
> 
> 赞同：1
> 
> 时间：2013-01-10T15:11:11.423
> 
> 标签：gnuplot

我有一个名为 1000_0.dat, 2000_0.dat,... 的文件，类似地 1000_1.dat, 2000_1.dat,... 如何使用 gnuplot 脚本将所有文件绘制成一个图？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:17:56.343

语法是

```
plot 'data1.dat', 'data2.dat' ... 
```

只需用逗号分隔数据文件。如果您希望它更易于阅读，您还可以将每个文件名放在不同的行上，

```
plot 'data1.dat', \
     'data2.dat' 
```

如果您想完全自动化它，您可以使用`for`较新（4.6+）版本的 gnuplot 中的语法：

```
plot for [i=0:1] for [j=1e3:2e3:1e3] ''.j.'_'.i.'.dat' title ''.j.'_'.i.'.dat' 
```

这是一个双重嵌套循环，它将绘制所有文件并适当地标记它们。 `.`是 gnuplot 中的字符串连接运算符。我手动设置了标题，否则它会显示`''.j.'_'.i.'.dat'`所有图。文件名和标题之前的前导`''`是因为 gnuplot 不会识别它应该打印索引`i`或`j`作为字符串，除非它出现在另一个字符串之后，在这种情况下是一个空字符串。

# c# - 按名称删除运行时创建的 TabItem

> ID：14261010
> 
> 赞同：0
> 
> 时间：2013-01-10T15:11:29.900
> 
> 标签：c#, winforms, runtime, tabitem

我的应用程序中有一个`TabControl`。基于选中的复选框，我`TabItem`在运行时创建了一个。如果未选中复选框，则`TabItem`必须将其删除。现在，我的问题是，我只需要删除那个`TabItem`.

我正在实施这个，并`TabItem`再次创建。但正如我所说，当检查或取消选中复选框时，我会丢失所有选项卡的所有信息：

```
tc_Descuento.TabPages.Clear(); 
```

我正在阅读一些帖子并尝试了这个：

```
TabPage tb = new TabPage();
tb = tc_Descuento.Controls.Find("Cuota-" + Convert.ToString(cuota.num_cuota));
tc_Descuento.TabPages.Remove(tb); 
```

TabItem 的名称是：`"Cuota-" + Convert.ToString(cuota.num_cuota)`

我尝试的是创建一个`TabItem`，然后在`TabControl`其名称中找到它。然后将其`TabPages`从`TabControl`.

我收到编译错误。当然，这是因为我无法将 Control 项转换为 TabPage。但是，我怎样才能将该 TabItem 控件作为 TabItem 而不是控件？

谢谢..

编辑：

```
tb = Convert.ChangeType(tc_Descuento.Controls.Find("Cuota-" + Convert.ToString(cuota.num_cuota), false).First(), TabItem); 
```

我现在试过了，我需要一种将控件转换为 TabItem 的方法。但这也不是编译：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:26:22.263

已经找到我的答案了！

这是这样做的方法：

```
tb = (TabPage)(tc_Descuento.Controls.Find("Cuota-" + Convert.ToString(cuota.num_cuota), false).First()); 
```

您必须在开始时转换类型。

希望这可以帮助别人！

# c++ - bind 不是 std 的成员

> ID：14261013
> 
> 赞同：14
> 
> 时间：2013-01-10T15:11:34.143
> 
> 标签：c++

我正在使用带有 minwg 编译器的 netbeans 7.2.1。尝试构建应用程序时收到以下错误消息：

> 错误：命名空间“std”中的“函数”未命名类型
> 
> 错误：“绑定”不是“标准”的成员

尽管我在文件的开头包含了functional.h，并且我以以下形式使用'function'和'bind'：std::function 和std::bind

问题出在哪里？是在编译器中还是缺少某些东西？我记得我在 Visual Studio 2010 上成功编译并运行了相同的应用程序。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T15:13:55.157

不是`functional.h`，只是`functional`。

```
#include <functional> //without .h 
```

请注意，`std::function`并且`std::bind`仅附带 C++11。所以你可能需要升级你的编译器，以防你还没有升级。

`-std=c++11`此外，使用以下选项编译您的代码：

```
$ g++ -std=c++11 file.cpp 
```

如果您升级了编译器，那应该可以工作。如果你的编译器有点老，你也可以试试`-std=c++0x`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T15:13:15.540

您需要包含标题`functional`。它在[C++11](http://oopscenities.net/2012/02/24/c11-stdfunction-and-stdbind/)中可用。如果您仍然遇到问题，那么您的编译器可能还不支持 C++11。尝试升级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T08:51:20.750

你也可以使用 boost::bind:

```
#include <boost/bind.hpp> 
```

# java - 提取带有一些特殊字符的模式

> ID：14261020
> 
> 赞同：0
> 
> 时间：2013-01-10T15:11:56.430
> 
> 标签：java, regex

我想提取一个位于几个方括号内的模式。它们通常看起来像这样：
`this is what I want[Pat1 France�s Wal-mart ] and this is [Pat2 boy-o-boy ]`

我的正则表达式看起来像这样：

```
Pattern search = Pattern.compile("\\[[\\w.\\.\\-\\s]+]"); 
```

如何合并特殊字符或我应该在模式中更改什么以提取可能出现在这些大括号中的任何字符？

我想以某种方式提取 [Pat1 France's Wal-mart] 和 [Pat2 boy-o-boy ]。我可以提取 pat2 部分。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:15:45.943

你可以使用这个正则表达式

```
\\[.*?\\] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:16:07.080

只需使用`.`与任何字符匹配的。

```
 String s= "[Pat1 France�s Wal-mart ]";
        Pattern p = Pattern.compile("\\[.*?\\]");
        Matcher m = p.matcher(s);
        System.out.println(m.find() + " " + m.group()); 
```

# android - 在不打开选择器的情况下从 Android 应用程序发送 SMS 消息？

> ID：14261025
> 
> 赞同：1
> 
> 时间：2013-01-10T15:12:02.670
> 
> 标签：android, sms, android-implicit-intent

在我的 android 应用程序中，我使用以下代码实现了发送 SMS。

```
 Intent smsIntent = new Intent(Intent.ACTION_VIEW);

    smsIntent.putExtra("sms_body", "Hello World!"); 
    smsIntent.putExtra("address", "0123456789");
    smsIntent.setType("vnd.android-dir/mms-sms");

    startActivity(smsIntent); 
```

我的问题是，如果我的设备上有多个 SMS 应用程序，它会打开选​​择器来选择发件人应用程序。我不想打开选择器；我想在不打开选择器的情况下从 Android 的原生 SMS 应用程序发送。因此，我们将不胜感激任何有助于实现这一目标的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:20:15.427

> 在我的 android 应用程序中，我使用以下代码实现了发送 SMS。

这不是发送 SMS 消息的正确方式。请使用`ACTION_SEND`or `ACTION_SENDTO`（后者带有`smsto:` `Uri`）。您可能会遇到可以发送 SMS 消息但不响应`Intent`您正在使用的特定结构的设备，因为这不是发送 SMS 消息的方式。

> 我不想打开那个选择器

如果您的用户选择安装另一个 SMS 客户端，他们有权使用它，因为这是他们的设备、他们的 SMS 消息费等。如果用户选择，用户可以选择将您的应用程序作为您的`Intent`结构的默认设置这样做，这样用户就不会一直看到选择器。

> 我想在不打开选择器的情况下从 android Native SMS 应用程序发送

不同的设备可以有不同的“原生短信应用”，由设备制造商给出，所以你无法确定什么是“原生短信应用”。而且，正如我之前提到的，“本机 SMS 应用程序”甚至可能不会响应`Intent`您正在使用的那种奇怪的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:19:24.513

使用短信管理器？

[http://developer.android.com/reference/android/telephony/SmsManager.html](http://developer.android.com/reference/android/telephony/SmsManager.html)

```
void    sendTextMessage(String destinationAddress, String scAddress, String text, PendingIntent sentIntent, PendingIntent deliveryIntent) 
```

发送基于文本的 SMS。

# web-applications - 周围最丑陋的 Web 应用程序

> ID：14261034
> 
> 赞同：-6
> 
> 时间：2013-01-10T15:12:25.850
> 
> 标签：web-applications

周围有哪些丑陋的 Web 应用程序（很明显，除了 StackOverflow :)）？

丑陋是指应用程序的图形外观（或深层用户体验缺陷）。只是寻找一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:20:13.800

你要找的是[zombo.com的反面](http://www.zombo.com)

zombo.com 很棒，您可以在 zombo.com 上做任何事情。什么都没有。

# postgresql - PostgreSQL 中的用户定义变量

> ID：14261035
> 
> 赞同：10
> 
> 时间：2013-01-10T15:12:28.953
> 
> 标签：postgresql, variables, dynamic-sql

我有以下要在 PostgreSQL 中实现的 MySQL 脚本。

```
 SET @statement = search_address_query;
      PREPARE dynquery FROM @statement;
      EXECUTE dynquery;
      DEALLOCATE PREPARE dynquery; 
```

如何使用 PostgreSQL 定义用户定义的变量“@statement”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T15:57:01.427

Postgres 通常不在普通 SQL 中使用变量。但你*也可以*这样做：

```
SET foo.test = 'SELECT bar FROM baz';

SELECT current_setting('foo.test'); 
```

阅读[手册中的自定义选项](https://www.postgresql.org/docs/current/runtime-config-custom.html)。

在[PostgreSQL 9.1 或更早版本中，您需要先声明`custom_variable_classes`](https://www.postgresql.org/docs/9.1/runtime-config-custom.html)才能使用它。

但是，如果没有 PL（过程语言） ，您**将无法使用** [`EXECUTE`动态 SQL 。](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)您将使用[`DO`](https://www.postgresql.org/docs/current/sql-do.html)命令来执行临时语句（但不能从中返回数据）。或者[`CREATE FUNCTION`](https://www.postgresql.org/docs/current/sql-createfunction.html)用来创建一个执行动态 SQL 的函数（并且可以以任何可以想象的方式返回数据）。

使用动态 SQL 时一定要防范 SQL 注入。

有关的：

*   [有没有办法在 PostgreSQL 查询中定义一个命名常量？](https://stackoverflow.com/questions/13316773/is-there-a-way-to-define-a-named-constant-in-a-postgresql-query)

# html - 仅重定向移动网站一次

> ID：14261038
> 
> 赞同：0
> 
> 时间：2013-01-10T15:12:36.580
> 
> 标签：html, redirect, mobile

嗨，我只想知道粘贴到我网站的“index.html”的代码，这样我就可以询问手机用户是否想重定向到移动版或桌面版，但我还没有找到方法原因我发现的代码总是重定向，没有机会在移动设备上转到桌面版本

我无法发布我找到的代码，但问题说明了一切

如果这不可能，我只想知道一个仅将移动用户重定向“ONCE”的代码，谢谢

我没有这方面的专业经验......只是一个初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:15:40.293

您可以使用 Cookie。例如，当用户选择“桌面版”时设置一个Cookie，当用户返回时检查它是否存在。

如何在 PHP 中设置[Cookie](http://www.w3schools.com/php/php_cookies.asp) ( [http://www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:31:36.473

按照[http://www.ezmobilewebsitetools.com/howto-redirect.html](http://www.ezmobilewebsitetools.com/howto-redirect.html)上的说明：

将以下代码粘贴到`<head>`index.html 部分

```
<script>
if ((document.location.hostname.match(/\.mobi$/) || screen.width < 699)
    && (document.cookie.indexOf("skipmobile") == -1 || getCookie("skipmobile") == -1)
{
    document.location = "mobile/"; //change this to location of your mobile site
} else if (document.location.search.indexOf("skipmobile") >= 0) {
    document.cookie = "skipmobile=1";
}

//getCookie function from http://www.w3schools.com/js/js_cookies.asp
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
}
</script> 
```

这将检测用户是否使用屏幕宽度小于 699 像素的设备，或者他们是否访问了您网站的 .mobi 域（如果您有的话）。要允许用户返回桌面站点，请在移动页面的某处创建一个链接

```
<a href="http://www.MyWebsite.com/?skipmobile=1"> 
```

这将创建一个 cookie，通知该站点继续留在该用户的桌面站点上。基于相同的逻辑，我相信将以下链接放在桌面站点上会更改此 cookie 以允许用户返回移动站点。

```
<a href="http://www.MyWebsite.com/?skipmobile=-1"> 
```

请注意，我对 cookie 了解不多，也没有对此进行测试。如果有更多知识的人可以验证或纠正第二个链接，我将不胜感激，我相信 gs2rom 也会如此。

# php - =?utf-8 在邮件主题 phpmailer

> ID：14261044
> 
> 赞同：1
> 
> 时间：2013-01-10T15:12:51.897
> 
> 标签：php, email, phpmailer

如何编辑我的功能以摆脱

> "=?utf-8?B?0JfQsNC60LDQtyDQstGL0L/QuNGB0LrQuCBkb2xzbm93ICIgM9C00LDQtNCw ?= "。"

在邮件主题中？

此函数（EncodeHeader）是邮件消息的编码标头，需要以某种方式更正。代码如下：

```
public function EncodeHeader($str, $position = 'text') {
$x = 0;

switch (strtolower($position)) {
  case 'phrase':
    if (!preg_match('/[\200-\377]/', $str)) {
      // Can't use addslashes as we don't know what value has magic_quotes_sybase
      $encoded = addcslashes($str, "\0..\37\177\\\"");
      if (($str == $encoded) && !preg_match('/[^A-Za-z0-9!#$%&\'*+\/=?^_`{|}~ -]/', $str)) {
        return ($encoded);
      } else {
        return ("\"$encoded\"");
      }
    }
    $x = preg_match_all('/[^\040\041\043-\133\135-\176]/', $str, $matches);
    break;
  case 'comment':
    $x = preg_match_all('/[()"]/', $str, $matches);
    // Fall-through
  case 'text':
  default:
    $x += preg_match_all('/[\000-\010\013\014\016-\037\177-\377]/', $str, $matches);
    break;
}

if ($x == 0) {
  return ($str);
}

$maxlen = 75 - 7 - strlen($this->CharSet);
// Try to select the encoding which should produce the shortest output
if (strlen($str)/3 < $x) {
  $encoding = 'B';
  if (function_exists('mb_strlen') && $this->HasMultiBytes($str)) {
    // Use a custom function which correctly encodes and wraps long
    // multibyte strings without breaking lines within a character
    $encoded = $this->Base64EncodeWrapMB($str);
  } else {
    $encoded = base64_encode($str);
    $maxlen -= $maxlen % 4;
    $encoded = trim(chunk_split($encoded, $maxlen, "\n"));
  }
} else {
  $encoding = 'Q';
  $encoded = $this->EncodeQ($str, $position);
  $encoded = $this->WrapText($encoded, $maxlen, true);
  $encoded = str_replace('='.$this->LE, "\n", trim($encoded));
}

$encoded = preg_replace('/^(.*)$/m', " =?".$this->CharSet."?$encoding?\\1?=", $encoded);
$encoded = trim(str_replace("\n", $this->LE, $encoded));

return $encoded;
} 
```

我听说必须编码的字符不能用引号引起来。

这个东西在“这是新的工作主题”这样的消息上效果很好，但是在这不是“рабочий инструмент”上崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:50:36.193

[http://swiftmailer.org/](http://swiftmailer.org/)试试这个会帮助你。它处理所有编码。

# asp.net - 来自 DB 值的 SetupCheckbox ID

> ID：14261050
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:00.173
> 
> 标签：asp.net, sql-server, vb.net, checkbox

```
<asp:Repeater ID="Category" runat="server" DataSourceID="SQLDataSourceBenefitCategory" >

         <ItemTemplate>                    
               <li>                           
                   <asp:CheckBox  ID = "filterid"+'<%#  DataBinder.Eval(Container.DataItem,"ClientBenefitSectionheadingID","filterID{0}" ) %>' runat="server" value='<%#  DataBinder.Eval(Container.DataItem,"ClientBenefitSectionheadingID","bencat{0}" ) %>' class = "dynamicFilterInput" AutoPostBack="True"  Checked="True"  /> 

                          </li>                             
                    </ItemTemplate> 
```

你好，

我有上面的代码，我希望我的复选框具有来自 db 的 ID = "filter"+value。当我尝试根据上面的代码从 db 中获取值时，我得到了错误。谁能告诉我最好的方法来做到这一点？

谢谢

# objective-c - UIScrollView 不适用于多视图 xCode 4.5.2

> ID：14261051
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:05.673
> 
> 标签：objective-c, xcode, uiscrollview, xcode4.5

我正在使用xCode 4.5.2，我添加了一个并在IB和to中`UIScrollView`检查了**水平反弹**，它工作正常，但显然当我加载另一个视图并返回它时已经调整了大小，尽管有：`setAlwaysBounceHorizontal``viewDidAppear``YES``UIScrollView``viewDidAppear``setContentSize`

```
-(void) viewDidAppear:(BOOL)animated{

[scroller setContentSize:CGSizeMake(2000, 90)];
[scroller setAlwaysBounceHorizontal:YES];
[scroller setAutoresizesSubviews:NO];
scroller.showsHorizontalScrollIndicator = NO;
scroller.showsVerticalScrollIndicator = NO;
[scroller setUserInteractionEnabled:YES];
[scroller setScrollEnabled:YES];
[scroller setPagingEnabled:YES];

} 
```

希望能找到解决办法。。

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:28:48.973

**解决了：**

如果您`scrollView`从 nib 创建了一个，则必须从那里取消选中 Use **Autolayout**：

*   去你的笔尖。
*   选择您的视图。
*   转到笔尖的实用程序窗口。
*   选择实用程序窗口左侧的第一个选项卡表单。
*   取消选中自动布局。

# c# - 奇怪的行为绑定 WPF 组合框

> ID：14261052
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:06.480
> 
> 标签：c#, wpf, binding

我无法绑定到组合框的文本属性。在我在组合框中选择某些内容之前，它似乎不会绑定。然后它工作正常。

这是直接来自测试应用程序的代码：

看法

```
<ComboBox ItemsSource="{Binding ListItems}"
          Text="{Binding Test}" /> 
```

视图模型

```
class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public ObservableCollection<string> ListItems { get; set; }
    public ViewModel()
    {
        ListItems = new ObservableCollection<string>();
        ListItems.Add("Southwest");
        ListItems.Add("South");
    }

    public string Test
    {
        get { return "South"; }
        set { PropertyChanged(this, new PropertyChangedEventArgs("Test")); }
    }
} 
```

但是，当我颠倒可观察集合项的顺序时，一切正常。

```
ListItems.Add("South");
ListItems.Add("Southwest"); 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:58:57.573

text 属性不能这样工作。阅读本文档：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.combobox.text.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.text.aspx)

就像 hameleon86 所建议的那样，使用 selecteditem 代替。

I think it Works if you reverse the order of your collection maybe because the Text property take the first item of the collection by default

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:19:29.883

我想你可能想做：

PropertyChanged(this, new PropertyChangedEventArgs("ListItems"));

插入元素后。

# python - 将 Mongo 文档的条目保存为 CSV + 格式化 ISODate

> ID：14261053
> 
> 赞同：1
> 
> 时间：2013-01-10T15:13:06.923
> 
> 标签：python, mongodb, csv, isodate, mongoexport

我在一个名为“hello”的 mongo 集合中有数据。文件看起来像：

```
{ 
name: ..., 
size: ..., 
timestamp: ISODate("2013-01-09T21:04:12Z"), 
data: { text:..., place:...},
other: ...
} 
```

我想将每个文档中的时间戳和文本导出到 CSV 文件中，第一列是时间戳，第二列是文本。

我尝试创建一个新集合（hello2），其中文档只有时间戳和文本。

```
data = db.hello
for i in data:
    try:
        connection.me.hello2.insert(i["data"]["text"], i["timestamp"])
    except:
        print "Unable", sys.exc_info() 
```

然后我想使用 mongoexport：

```
mongoexport --db me --collection hello2 --csv --out /Dropbox/me/hello2.csv 
```

但这不起作用，我不知道如何进行。

PS：我还想仅将 ISODate 的时间存储在 CSV 文件中，即仅 21:04:12 而不是 ISODate("2013-01-09T21:04:12Z")

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:28:51.530

您可以直接从数据集合中导出，无需临时集合：

```
for r in db.hello.find(fields=['text', 'timestamp']):
     print '"%s","%s"' % (r['text'], r['timestamp'].strftime('%H:%M:%S')) 
```

或写入文件：

```
with open(output, 'w') as fp:
   for r in db.hello.find(fields=['text', 'timestamp']):
       print >>fp, '"%s","%s"' % (r['text'], r['timestamp'].strftime('%H:%M:%S')) 
```

To filter out duplicates and print only most recent ones, the process should be split in two steps. First, accumulate data in a dictionary:

```
recs = {}
for r in d.foo.find(fields=['data', 'timestamp']):
    text, time = r['data']['text'], r['timestamp']
    if text not in recs or recs[text] < time:
        recs[text] = time 
```

and then output the dictionary content:

```
for text, time in recs.items():
    print '"%s","%s"' % (text, time.strftime('%H:%M:%S')) 
```

# java - 修改firefox配置文件模板

> ID：14261058
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:15.047
> 
> 标签：java, selenium, firefox, testing, webdriver

我想修改一个 Firefox 模板，webdriver 将通过该模板创建临时配置文件

```
new FirefoxDriver(); 
```

我是linux用户（ubuntu）。有人知道这个模板在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:45:10.000

我们不会修改解决方案中的实际文件。当然，这是 C#，但应该非常相似：

```
FirefoxProfile profile = new FirefoxProfile() {AcceptUntrustedCertificates = true};
profile.SetPreference("webdriver_assume_untrusted_issuer", false);
Driver = new FirefoxDriver(profile);
Driver.Manage().Window.Maximize(); 
```

# c - 不使用十进制或二进制的十六进制到八进制转换程序

> ID：14261060
> 
> 赞同：4
> 
> 时间：2013-01-10T15:13:21.987
> 
> 标签：c, hex, octal

今天我只是在玩从一个基地到另一个基地的基本转换。我查看了一些用于从十六进制转换为八进制的代码，我注意到它主要使用中间转换为十进制或二进制然后再返回八进制。是否可以编写我自己的函数来将十六进制字符串转换为八进制字符串而不使用任何中间转换.另外我不想使用像or的内置`printf`选项。感谢您的投入。`%x``%o`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:14:51.073

当然这是可能的。一个数字是一个数字，不管它在什么数字系统中。唯一的问题是人们习惯于十进制，这就是为什么他们更好地理解它的原因。您可以从任何基础转换为任何其他基础。

编辑：有关如何执行转换的更多信息。

首先请注意，3 个十六进制数字正好映射到 4 个八进制数字。因此，拥有十六进制数字的数量，您可以轻松找到八进制数字的数量：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
int get_val(char hex_digit) {
  if (hex_digit >= '0' && hex_digit <= '9') {
    return hex_digit - '0';
  } else {
    return hex_digit - 'A' + 10;
  }
}
void convert_to_oct(const char* hex, char** res) {
  int hex_len = strlen(hex);
  int oct_len = (hex_len/3) * 4;
  int i;

  // One hex digit left that is 4 bits or 2 oct digits.
  if (hex_len%3 == 1) {
    oct_len += 2;
  } else if (hex_len%3 == 2) { // 2 hex digits map to 3 oct digits
    oct_len += 3;
  }

  (*res) = malloc((oct_len+1) * sizeof(char));
  (*res)[oct_len] = 0; // don't forget the terminating char.

  int oct_index = oct_len - 1; // position we are changing in the oct representation.
  for (i = hex_len - 1; i - 3 >= 0; i -= 3) {
    (*res)[oct_index] = get_val(hex[i]) % 8 + '0';
    (*res)[oct_index - 1] = (get_val(hex[i])/8+ (get_val(hex[i-1])%4) * 2) + '0';
    (*res)[oct_index - 2] = get_val(hex[i-1])/4 + (get_val(hex[i-2])%2)*4 + '0';
    (*res)[oct_index - 3] = get_val(hex[i-2])/2 + '0'; 
    oct_index -= 4;
  }

  // if hex_len is not divisible by 4 we have to take care of the extra digits:
  if (hex_len%3 == 1) {
     (*res)[oct_index] = get_val(hex[0])%8 + '0';
     (*res)[oct_index - 1] = get_val(hex[0])/8 + '0';
  } else if (hex_len%3 == 2) {
     (*res)[oct_index] = get_val(hex[1])%8 + '0';
     (*res)[oct_index - 1] = get_val(hex[1])/8 + (get_val(hex[0])%4)*4 + '0';
     (*res)[oct_index - 2] = get_val(hex[0])/4 + '0';
  }
} 
```

这里还有关于 ideone 的示例，以便您可以使用它：[example](http://ideone.com/67lN2c)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:31:15.003

这有点棘手，因为您将 4 位组转换为 3 位组 - 您可能希望一次使用 12 位，即 3 个十六进制数字到 4 个八进制数字，然后您必须处理任何剩余的位分开。

例如将 5274 八进制转换为十六进制：

```
5    2    7    4
101  010  111  100

|||/   \\//   \|||

1010   1011   1100
A      B      C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:18:41.257

是的，您可以相对容易地做到这一点：四个八进制数字始终转换为三个十六进制数字，因此您可以将字符串分成三个十六进制数字的组，并从后面处理每个组。如果您没有足够的十六进制数字来完成一组三个，请添加前导零。

每个十六进制数字给你四位；取最后三个，并将它们转换为八进制。将接下来的四位相加，然后再取三位到八进制。添加最后一组四位 - 现在您总共有六位，因此将它们转换为两位八进制数字。

这避免了将整个数字转换为二进制，尽管在转换数字的过程中会使用一个“滑动”二进制窗口。

考虑一个例子：转换`62ABC`为八进制。分成三位数组：`062`和`ABC`（注意前面加的零`62`组成三位数组）。

从后面开始：

*   `C`, or `1100`, 被切成`1`and `100`, 制作八进制`4`, 并`1`为下一步准备额外的位
*   `B`, 或`1011`, 被切入`10`下一步和`11`这一步。上`1`一步中的 附加在 的右侧`11`，形成八进制`7`
*   `A`, or `1010`, 被砍成`101`and `0`。上`10`一步中的 附加在右侧，making`010`或 octal `2`。`101`是八进制的`5`，`5274`所以到目前为止。
*   `2`成为下一步`2`；`0`
*   `6`成为下一步`4`；`01`
*   `0`变成`0`and `1`（因为`01`从上一步添加了）。

最后的结果是`01425274`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T15:26:02.497

计算机内存中的所有数字都是以 2 为底的。因此，每当您想对这些值（数学运算）进行实际操作时，您都需要将它们作为整数、浮点数等。所以它很方便，或者将来可能会派上用场通过可计算类型进行转换。

我会避免直接进行字符串到字符串的转换，除非值可能太大而无法放入数字变量中。从头开始编写可靠的转换器非常困难。

（在二进制计算机中使用以 10 为底的意义不大。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T19:13:13.437

对我来说似乎是一个非常简单的任务......你想要一个十六进制字符串，你想将它转换为八进制字符串。让我们使用 ASCII 十六进制并将其转换为 int 类型以使用：

```
char hex_value[] = "0x123";

int value = strtol(hex_value,NULL,16); 
```

在这一点上它仍然是十六进制，那么如果我们想从一个基础转换为另一个基础，可以完成简单的数学运算：

```
123 / 8 = 24 R 3
 24 / 8 =  4 R 4
  4 / 8 =  0 R 4 
```

这告诉我们 123 [16] == 443 [8]所以我们所要做的就是将数学写入基本函数并将最终值放回字符串中：

```
char * convert_to_oct(int hex)
{
    int ret = 0, quotient = 0, reminder = 0, dividend = hex, counter = 0, i;
    char * ret_str;   // returned string

    while(dividend > 0){             // while we have something to divide
        quotient = dividend / 0x8;   // get the quotient
        reminder = dividend - quotient * 0x8; // get the reminder

        ret += reminder * pow(10, counter);   // add the reminder (shifted) 
                                              // into our return value
        counter++;            // increment our shift
        dividend = quotient;  // get ready for the next divide operation
    }

    ret_str = malloc(counter);   // allocate the right number of characters
    sprintf(ret_str, "%d", ret); // store the result

    return ret_str;
} 
```

所以这个函数会将一个十六进制（int）值转换成一个八进制字符串。你可以这样称呼它：

```
int main()
{
   char hex_value[] = "0x123";
   char * oct_value;
   int value = strtol(hex_value,NULL,16);

   // sanity check, see what the value should be before the convert
   printf("value is %x, auto convert via printf gives %o\n", value, value);

   oct_value = convert_to_oct(value);
   printf("value is %s\n", oct_value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T13:26:07.517

这是一个将字符转换为 javascript 的简单函数。对 ALERT 或您的页面有效，最高可达 65536 32BITS。您遇到的问题通常是超过 127 的代码文本。最安全的值是 OCTAL。ParseXX 避免。

谢谢你的喜欢(^_^)。免费享受。

```
 function enjoyOCTALJS (valuestr){
        var arrstr = valuestr.split('');
        arrstr = arrstr.map(f => (!isNaN(f.charCodeAt(0)))? (f.charCodeAt(0)>127)? '\\'+f.charCodeAt(0).toString(8):f:f);
        return arrstr.join('');
                                } 
```

如果您只想获取字符的八进制值，请执行以下操作：Max = 65536 或 0XFFFF。

```
var mchar = "à";
var result = mchar.charCodeAt(0).toString(8); 
```

或完全：

```
var mchar = 'à';
var result = mchar.codePointAt(0).toString(8); 
```

如果值 > 65536，则返回 UNDEFINED。您可以使用函数参数来增加该值。charCodeAt(x) 或 codePointAt(x)。

您的计算机将所有内容视为 0 到 255。

我们不需要做很大的函数来转换字符，这很容易。

CHAR TO UNICIDE

```
var mchar = 'à';
var result = mchar.codePointAt(0);  or  mchar.charCodeAt(); 
```

UNICODE转八进制：

```
var mcode = 220;
var result = mcode.toString(8); 
```

ETC... ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-13T13:41:44.170

所有八进制数字都包含 3 位信息。所有十六进制数字都包含 12 位信息。3和4的最小公倍数是12。

这意味着您可以构建一个简单的查找表

```
0000 = 0x000
0001 = 0x001
0002 = 0x002
...
0007 = 0x007
0010 = 0x008
0011 = 0x009
0012 = 0x00A
...
0017 = 0x00F
0020 = 0x010
...
5274 = 0xABC
... 
```

现在有了这个想法，您有几种选择：

1.  构建地图（查找表）

这里的例程将在八进制（字符串）数字中添加前导零，直到它长 4 位，然后从表中查找十六进制值。两种变体是静态输入表格或动态填充表格。

2.  使用数学替换查找表

您可以计算它们，而不是输入每个解决方案

```
hexdigit1 = 01 & octaldigit8 + octaltdigit1;
hexdigit16 = 03 & octaldigit64 << 02 + 06 & octaldigit8 >> 01;
hexdigit256 = octaldigit512 << 01 + 01 & octaldigit64; 
```

其中 octaldigit1 / hexdigit16 / octaldigit8 分别表示“八进制 1 的位置”、“十六进制 16 的位置”、“八进制 8 的位置”。

请注意，在这两种情况下，您都不会“使用二进制”或“使用十进制”，但由于这些数字可以在这两个系统中的任何一个中表示，因此无法避免有人落后并分析 (或任何）十进制或二进制的解决方案。

# json - 当返回单个数据时，Knockoutjs 的 foreach 不起作用

> ID：14261061
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:28.873
> 
> 标签：json, knockout.js

我有一张如下所示的表格。当多个数据来时，它可以正确显示，但如果单个数据来，则数据不显示在表格中。我怀疑单个数据中没有括号..

多个数据样本：

```
[{"Id":1,"Name":"Tomato soup","Category":"Groceries","Price":1.39},{"Id":2,"Name":"Yo-yo","Category":"Toys","Price":3.75},{"Id":3,"Name":"Hammer","Category":"Hardware","Price":16.99}] 
```

单个数据样本

```
{"Id":1,"Name":"Tomato soup","Category":"Groceries","Price":1.39} 
```

表和脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        function ProductViewModel() {
            var self = this;
            self.productData = ko.observable();
            self.productId = ko.observable();

            self.getAllProducts = function () {
                $.get('/api/products', {}, self.productData);
            };

            self.getProductById = function () {
                $.get('/api/products/' + self.productId(), {}, self.productData);
            };
        }

        ko.applyBindings(new ProductViewModel());
    });
</script>
<input id="txtId" type="text" data-bind="value: productId" />
<button id="btnGetSpeProduct" data-bind="click: getProductById">Get Product By Id</button>
<button id="btnGetProducts" data-bind="click: getAllProducts">Get All Products</button><br />
<table data-bind="with: productData">
            <thead>
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Category
                    </th>
                    <th>
                        Price
                    </th>
                </tr>
            </thead>
            <tbody data-bind="foreach: $data">
                <tr>
                    <td data-bind="text: Name">
                    </td>
                    <td data-bind="text: Category">
                    </td>
                    <td data-bind="text: Price">
                    </td>
                </tr>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:29:27.503

是的 - 它与“单个数据中没有括号”有关。

*   **带括号**的表示它是`array`; 一个可以迭代的列表 ( `foreach`)。
*   **不带括号**的意思是`object`; 可以存储在数组中但不能使用`foreach`.

因此，您希望它像一个数组一样工作，以便您可以迭代结果。第一步，您需要使用 an`observableArray`而不是 observable：

```
self.productData = ko.observableArray(); 
```

接下来，您需要将数据推`$.get`送到该数组，而不是直接绑定它们。

```
$.get('/api/products', function(data) {
    // Iterate over the data variable, and use
    // self.productData.push(ITEM)
    // to add it to the array
}); 
```

应该这样做 - 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:12:38.817

绑定可以接受指定各种选项的`foreach`数组或对象。在这种情况下，Knockout 认为你给​​它的对象是后者。`data`如果您使用对象语法并使用选项指定数据，它将起作用。

```
<tbody data-bind="foreach: {data: $data}"> 
```

示例：http: [//jsfiddle.net/mbest/Dta48/](http://jsfiddle.net/mbest/Dta48/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:16:30.650

使用 observableArray 代替 observable

```
self.productData = ko.observableArray(); 
```

# javascript - 按下键盘键时的JS功能？

> ID：14261062
> 
> 赞同：8
> 
> 时间：2013-01-10T15:13:39.473
> 
> 标签：javascript, html

有没有办法在按下和释放键时运行 JavaScript 函数？

例如，按下键`example()`时如何运行函数？`T`我以前见过这样的例子，但它们又长又乱，我无法让它们工作。像这样的东西会放在里面`<script>`吗`<head>`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-10T16:09:43.897

## 第 1 部分：将脚本块放在哪里？

要捕获整个页面，例如作为页面帮助功能（也许您想捕获 F1？），那么您可以将脚本块放在`<head>`标记中，在脚本内。但是如果你想捕获一个DOM元素，那么你必须在DOM元素发生后执行代码（因为脚本被解释为找到了，如果DOM元素还不存在，则选择器引擎找不到它.如果这没有意义，说点什么，应该找到一篇文章）。

但这里有一些事情需要您考虑：**今天优秀的 javascript 程序员导师建议将所有 javascript 加载到页面末尾**。您*可能*希望在文档开头加载的唯一内容是 jQuery 之类的库，因为它们被广泛缓存，特别是如果您使用的是 jQuery 的 CDN 版本，因为这通常不会影响加载时间。

所以这就回答了“我应该把代码块放在哪里`<head>`？”的问题：不，最后。

现在，关于如何实际捕捉击键，让我们分三个部分来做：

## 第 2 部分：捕获窗口上的所有键盘事件：

```
<html>
<head>
  <title>blah blah</title>
  <meta "woot, yay StackOverflow!">
</head>
<body>
  <h1>all the headers</h1>
  <div>all the divs</div>
  <footer>All the ... ... footers?</footer>
  <script>

  /* the last example replaces this one */

  function keyListener(event){ 
    //whatever we want to do goes in this block
    event = event || window.event; //capture the event, and ensure we have an event
    var key = event.key || event.which || event.keyCode; //find the key that was pressed
    //MDN is better at this: https://developer.mozilla.org/en-US/docs/DOM/event.which
    if(key===84){ //this is for 'T'
        doThing();
    }
  }

  /* the last example replace this one */

  var el = window; //we identify the element we want to target a listener on
  //remember IE can't capture on the window before IE9 on keypress.

  var eventName = 'keypress'; //know which one you want, this page helps you figure that out: http://www.quirksmode.org/dom/events/keys.html
  //and here's another good reference page: http://unixpapa.com/js/key.html
  //because you are looking to capture for things that produce a character
  //you want the keypress event.

  //we are looking to bind for IE or non-IE, 
  //so we have to test if .addEventListener is supported, 
  //and if not, assume we are on IE. 
  //If neither exists, you're screwed, but we didn't cover that in the else case.
  if (el.addEventListener) {
    el.addEventListener('click', keyListener, false); 
  } else if (el.attachEvent)  {
    el.attachEvent('on'+eventName, keyListener);
  }

  //and at this point you're done with registering the function, happy monitoring

  </script>
</body>
</html> 
```

## 第 3 部分：捕获特定元素上的所有键盘事件

这一行：`var el = window; //we identify the element we want to target a listener on`也可能是`var el = document.getElementByTagName('input');`或其他一些文档选择器。该示例仍然以这种方式工作。

## 第 4 部分：“优雅”的解决方案

```
var KeypressFunctions = [];
KeypressFunctions['T'.charCodeAt(0)] = function _keypressT() {
  //do something specific for T
}
KeypressFunctions['t'.charCodeAt(0)] = function _keypresst() {
  //do something specific for t
}
//you get the idea here

function keyListener(event){ 
  //whatever we want to do goes in this block
  event = event || window.event; //capture the event, and ensure we have an event
  var key = event.key || event.which || event.keyCode; //find the key that was pressed
  //MDN is better at this: https://developer.mozilla.org/en-US/docs/DOM/event.which
  KeypressFunctions[key].call(); //if there's a defined function, run it, otherwise don't
  //I also used .call() so you could supply some parameters if you wanted, or bind it to a specific element, but that's up to you.
} 
```

***这一切有什么作用？***

这`KeypressFunctions`是一个数组，我们可以填充各种值，但让它们在某种程度上是人类可读的。数组中的每个索引都是这样完成的，它给出了我们为其添加函数的数组中索引位置`'T'.charCodeAt(0)`的字符代码（看起来很熟悉？）。`event.which || event.keyCode`所以在这种情况下，我们的数组只有两个定义的索引值，`84`(T) 和`116`(t)。我们本可以这样写，`KeypressFunctions[84] = function ...`但人类可读性较差，代价是人类可读性更长。始终首先为自己编写代码，这台机器通常比你想象的要聪明。不要试图用逻辑打败它，但是当你可以稍微优雅时不要编写过多的 if-else 块。

[啊！我忘了解释别的！]and
的原因是，当它作为匿名函数或作为调用堆栈的一部分（有一天会）被调用时，您可以识别该函数。这是一个非常方便的习惯，可以确保所有潜在的匿名函数仍然被“命名”，即使它们在其他地方有一个专有名称。再一次，优秀的 javascript 导师会提出对人们有帮助的建议；-)。^(啊！)^(我忘了解释别的！)`_keypressT``_keypresst`

请注意，您可以轻松地执行以下操作：

```
function doThing() //some pre-defined function before our code

var KeypressFunctions = [];
KeypressFunctions['T'.charCodeAt(0)] = doThing
KeypressFunctions['t'.charCodeAt(0)] = doThing 
```

然后对于 T 或 t，运行 doThing 函数。请注意，我们只是传递了函数的名称，并没有尝试*运行*函数`doThing()`（这是一个巨大的差异，如果你要做这种事情，这是一个很大的提示）

* * *

[我不敢相信我忘记了这个！]

## 第 5 部分：jQuery：

因为今天的重点是 jQuery，所以在 jQuery 库加载后，您可以在应用程序的任何位置放置一个块（head、body、footer 等）：

```
<script>
  function doTheThingsOnKeypress(event){
    //do things here! We've covered this before, but this time it's simplified
    KeypressFunctions[event.which].call();
  }

  $(document).on('keypress','selector',doTheThingsOnKeypress);
  // you could even pass arbitrary data to the keypress handler, if you wanted:
  $(document).on('keypress','selector',{/* arbitrary object here! */},doTheThingsOnKeypress);
  //this object is accessible through the event as data: event.data
</script> 
```

如果您要`KeypressFunctions`像以前一样使用，请确保在此之前实际定义它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T15:17:54.750

使用`onkeydown`事件和`keyCode`属性（其中`T`代码为 84）：

```
document.onkeydown = function(e){
    e = e || window.event;
    var key = e.which || e.keyCode;
    if(key===84){
        example();
    }
} 
```

我只是建议你使用`addEventListener`/`attachEvent`方法而不是`onkeydown`属性

**编辑：** 根据 TJ Crowder 的要求，这是`addEventListener`/`attachEvent`用法，并进行了兼容性检查：

```
var addEvent = document.addEventListener ? function(target,type,action){
    if(target){
        target.addEventListener(type,action,false);
    }
} : function(target,type,action){
    if(target){
        target.attachEvent('on' + type,action,false);
    }
}

addEvent(document,'keydown',function(e){
    e = e || window.event;
    var key = e.which || e.keyCode;
    if(key===84){
        example();
    }
}); 
```

有关关键代码的列表，请查看[此页面](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T15:15:19.870

1.  *将keyup/down/press* [事件处理程序](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)绑定到`document`对象。
2.  检查按下了哪个键（通过查看`key`或`keyCode`在[事件对象上](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)
3.  如果它与您想要的键匹配，则调用该函数

脚本在哪里运行并不重要，`document`对象（有效地）始终可用。

# groovy - GroovyRowresult 对象在调用 size() 时返回不同类型的值，具体取决于对象的实例化方式

> ID：14261064
> 
> 赞同：0
> 
> 时间：2013-01-10T15:13:39.453
> 
> 标签：groovy

使用 Groovy：不确定这是否是预期行为，但是当将 size() 应用于 GroovyRowresult 对象时，如果对象是通过调用 {Sql object}.rows( sql_select_text）。但是，如果 GroovyRowresult 对象是通过调用 {Sql object}.firstRow(sql_select_text) 创建的，它将返回返回记录中的*字段数。*问题似乎是对 {GroovyRowresult object}.size() 的调用的返回值取决于 GroovyRowresult 对象的形成方式，而不是任何其他明显或明确的区别。这是预期的行为吗？即使对于最新的版本，我也无法在 Groovy 文档中找到它。Groovy 的。代码示例：

```
/*
 Using HyperSQL for database implementation for test, so you need the
 HSQLDB package from http://hsqldb.org/ to run this test in the Groovy
 runtime classpath or explode the hsqldb.jar file into the same directory as this
 .groovy script.
*/

import groovy.sql.Sql

memCon = Sql.newInstance("jdbc:hsqldb:mem", "SA", "","org.hsqldb.jdbcDriver")

memCon.execute("DROP TABLE IF EXISTS TBL")
memCon.execute("""create table TBL ( 
 AAA    VARCHAR(50),
 BBB    VARCHAR(50)
)""")

sql = "INSERT INTO TBL VALUES ('123', 'ABC')"
memCon.execute(sql)
sql = "INSERT INTO TBL VALUES ('456', 'ABC')"
memCon.execute(sql)
sql = "INSERT INTO TBL VALUES ('789', 'ABC')"
memCon.execute(sql)

sql = "select * from TBL"

rows = memCon.rows(sql)
println '(.rows) rows.size() = ' + rows.size()  // returns 3

rows = memCon.firstRow(sql)
println '(.firstRow) rows.size() = ' + rows.size() // returns 2 
```

测试：将上面的代码列表保存到名为“test.groovy”的文件中。将它放在与 hsqldb.jar 文件相同的目录中（如果您更改了 Groovy 运行时类路径以包含对它的引用）或其分解的文件结构，并使用“groovy test.groovy”运行它。

我把这个 issue 提交给 Groovy 大神审阅；我想我得看看他们怎么说。问题在[这里](http://jira.codehaus.org/browse/GROOVY-5896)找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:32:02.687

`memCon.rows` [返回](http://groovy.codehaus.org/api/groovy/sql/Sql.html#rows%28java.lang.String%29)一个`List<GroovyRowResult>`

`memCon.firstRow` [返回](http://groovy.codehaus.org/api/groovy/sql/Sql.html#firstRow%28groovy.lang.GString%29)一个`GroovyRowResult`

所以第一次`size`调用获取列表的大小（行数）

第二次`size`调用获取`GroovyRowResult`（字段数）的大小

# qt - QThread::start: 线程终止错误

> ID：14261067
> 
> 赞同：1
> 
> 时间：2013-01-10T15:13:48.480
> 
> 标签：qt, openssl, qthread

我在多线程应用程序中使用 OpenSSL 库。
由于各种原因，我正在使用阻止 SSL 连接。还有一种情况是客户端挂了

```
SSL_connect 
```

功能。
我将连接过程移到另一个线程并创建了计时器。超时连接线程使用以下命令终止：

```
QThread::terminate() 
```

该线程是可终止的，但在下一次尝试启动线程时，我得到：

```
QThread::start: Thread termination error: 
```

我检查了“最大线程问题”，但事实并非如此。
我正在使用 QT 4.5、OpenSSL 1.0 开发 CentOS 6.0
问题是如何完全终止线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:43:49.537

[关于 terminate()](http://doc.qt.digia.com/4.5/qthread.html#terminate)的Qt 文档告诉：

> 线程可能会或可能不会立即终止，具体取决于操作系统的调度策略。在 terminate() 之后使用 QThread::wait() 进行同步终止。

但是也：

> **警告**：此功能很危险，不鼓励使用。线程可以在其代码路径中的任何位置终止。修改数据时可以终止线程。线程没有机会自行清理、解锁任何持有的互斥锁等。简而言之，只有在绝对必要时才使用此功能。

假设您没有重新实现`QThread::run()`（通常没有必要） - 或者如果您实际上重新实现了 run 并调用`exec()`了自己，通常停止线程的方法是：

```
_thread->quit();
_thread->wait(); 
```

第一行告诉线程异步停止执行，这通常意味着线程将完成它当前正在做的任何事情，然后从它的事件循环中返回。但是，`quit()`总是立即返回，这就是您需要调用的原因，`wait()`因此主线程被阻塞直到`_thread`实际结束。之后，您可以`start()`再次安全地线程。

如果您真的想尽快摆脱线程，您也可以在再次调用`wait()`之后`terminate()`或至少在`start()`再次调用之前调用

# android - 在只有 2 列的 TableRow 中设置 3 个文本视图 - Android

> ID：14261075
> 
> 赞同：2
> 
> 时间：2013-01-10T15:14:09.183
> 
> 标签：android, xml, textview, tablelayout, tablerow

我正在尝试`TableRow`这样`TableLayout`：

```
 _____________________________________
               |  ___________________   ____________ |
               | |TEXTVIEW 1         | |TEXTVIEW 2 | |
               | |                   | |___________| |
               | |                   |  ___________  |
               | |                   | |TEXTVIEW 3 | |
               | |___________________| |___________| |
               |_____________________________________| 
```

希望这是有道理的。我正在尝试将 3`TextViews`合二为一`TableRow`。第一列将包含多行和宽`TextView`，而第二列将包含 2 个单线短`TextViews`，它们将相互堆叠。

这可能吗？如果没有，我将如何实现这一目标？下面是我开始的xml代码。

```
<TableLayout
    xmlns:tools="http://schemas.android.com/tools" 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent" > 

    <TableRow
        android:id="@+id/row1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView 
            android:id="@+id/question"
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content"  
            android:textStyle="bold"
            android:textSize="8sp" />

        <TextView
            android:id="@+id/timer"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:textStyle="bold"
            android:textSize="8sp" />

        <TextView
            android:id="@+id/points"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:textStyle="bold"
            android:textSize="8sp" /> 
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:24:16.983

```
<TableLayout>
 <TableRow>
  Multiline Text
  <TableLayout>
   <TableRow>
    Text
   </TableRow>
   <TableRow>
    Text
  </TableRow>
  </TableLayout>
 </TableRow>
</TableLayout> 
```

# c - 如何通过 libwebsocket 发送异步数据？

> ID：14261076
> 
> 赞同：13
> 
> 时间：2013-01-10T15:14:10.993
> 
> 标签：c, websocket

我将warmcat 的libwebsocket C 库用于小型websocket 服务器。我已经启动并运行了示例，并且可以发送数据以响应从 websocket 接收数据（例如回显发送的反向字节）。但是，我无法弄清楚如何在没有进入 libwebsocket 回调函数的情况下从服务器异步发送数据。我需要将 wsi 指针传递给 libwebsocket_write() 但除了在回调中之外，我看不到如何获取指针。

我读过 libwebsocket 不是线程安全的，我自己的经验似乎证实了这一点。

在 libwebsockets.c:line2483 中，我读到“协议回调函数 [...] 定期调用以允许异步传输。” 这正是我想要的，但我没有在我自己的代码中观察到这种情况发生，也没有找到任何方法来“打开它”。

关于如何异步写入我正在服务的 websocket 的建议？

libwebsocket 代码：http: [//git.warmcat.com/cgi-bin/cgit/libwebsockets/](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/)

使用示例：[http ://martinsikora.com/libwebsockets-simple-websocket-server](http://martinsikora.com/libwebsockets-simple-websocket-server)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T21:46:02.667

我还没有找到一种超级干净的方法来做到这一点。我的建议是在服务器可以写入客户端的事件上注册一个回调，然后检查是否有异步工作要发送到那里。事件`LWS_CALLBACK_SERVER_WRITEABLE`就是这样，如果您`libwebsocket_callback_on_writable(context, wsi);`从回调中调用，它将被定期调用。

所以，像这样：

```
static int callback_myprotocol(struct libwebsocket_context *context,
                               struct libwebsocket *wsi,
                               enum libwebsocket_callback_reasons reason,
                               void *user, void *in, size_t len)
{
    SendState *ss = (SendState*)user;

    switch (reason) {
    case LWS_CALLBACK_ESTABLISHED: 
        printf("connection established\n");
        // get the ball rolling
        libwebsocket_callback_on_writable(context, wsi);
        break;

    case LWS_CALLBACK_SERVER_WRITEABLE: {
        if (!work_to_be_done) {
            // schedule ourselves to run next tick anyway
            libwebsocket_callback_on_writable(context, wsi);
            return 0;
        }
        // send our asynchronous message
        libwebsocket_write(wsi, buf, size, flag);
        // and schedule ourselves again
        libwebsocket_callback_on_writable(context, wsi);
        break;
    }
    default:
        break;
    }

    return 0;
} 
```

我从这个`test-fraggle.c`例子中改编了这个；以上大致是该示例以较小的块发送消息的方式。

# javascript - 如何检测浏览器是否可以同时播放多个声音

> ID：14261080
> 
> 赞同：2
> 
> 时间：2013-01-10T15:14:30.497
> 
> 标签：javascript, html, mobile-safari, html5-audio

iOS 上的 Mobile Safari 不会同时播放多个 HTML5 音频文件。我一直在使用以下方法检查是否可以播放多种声音：

```
var isIos = /iPhone|iPad|iPod/i.test( navigator.userAgent ); 
```

我宁愿直接检查功能支持，而不是测试单个平台。以后总是有（小）机会将该功能添加到 Safari，并且可能有其他浏览器具有相同的限制并且不会被此代码检测到。

是否有更可靠的方法来检查或测试是否支持多个并发声音？

# wpf - 如何让 ComboBox 中的 DropDownList 中的选定项目在悬停在它上时显示焦点，而不仅仅是文本

> ID：14261083
> 
> 赞同：0
> 
> 时间：2013-01-10T15:14:33.773
> 
> 标签：wpf, drop-down-menu, combobox, focus

我有一个 WPF 应用程序，它使用 ComboBox 和从服务器填充的项目。该控件在其当前设置中运行良好，但有一个我想解决的小问题。当我单击下拉按钮打开项目列表时，如果鼠标悬停在该项目的文本上，我只能选择项目。如果我将鼠标悬停在行上而不是直接悬停在文本上，则控件似乎无法识别应该选择该行。无论如何，是否可以将焦点设置在当前行上而不仅仅是项目上？

**编辑**

组合框存储在派生自处理客户端和服务器之间的网络传输的类的 UserControl 中。XAML 只是创建控件并为其分配名称，而后面的代码执行所有逻辑。在这种情况下，服务器发送用于组合框的信息，并在下面提供的片段中获取带有文本项的 XML 并将它们分配给控件本身。这一切都很好，但问题是当客户尝试选择项目时。除非鼠标直接位于文本上方，否则 ComboBox 不会注册。我想要它，只要鼠标位于与文本相同的行上，ComboBox 就会选择该项目。

XAML

```
<local:Control x:Class="ControlLibrary.ComboBox"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:local="clr-namespace:ControlLibrary" >
    <ComboBox Name="comboBox" FontWeight="Bold" />
</local:Control> 
```

C＃

```
XmlNodeList nodelist = xmlNode.SelectNodes("Items");
comboBox.Items.Clear();
foreach (XmlNode node in nodelist)
{
    ComboBoxItem tempItem = new ComboBoxItem()
    {
        Content = node.Attributes["text"].Value
    };

    comboBox.Items.Add(tempItem);
} 
```

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:26:17.963

尝试将此文本框放在停靠面板或网格内

# php - 返回 1 并返回 0 VS 返回 true 并返回 false

> ID：14261100
> 
> 赞同：8
> 
> 时间：2013-01-10T15:15:29.373
> 
> 标签：php

我和我的同事争论如何在 PHP 函数中返回布尔值。

您使用哪一种，为什么？

```
return 0;
return 1; 
```

或者

```
return false;
return true; 
```

很明显，第一个变体在严格类型的编程语言中不能正常工作，但在大多数情况下它在 PHP 中绝对可以正常工作。

我使用第一个更合乎逻辑的变体，但我想不出好的论据，但“如果你想返回布尔值则返回布尔值”和“更具可读性”，但它们很弱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:24:00.810

*   option with true / false more popular
*   harder to get confused in the code
*   return Boolean true / false is clear to all, rather than 1/0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:27:05.507

对于需要返回布尔值的函数，请使用 true/false。不能错。我通常对可以返回各种不同事物的函数使用数字返回（即三条件函数的 -1、0 或 1）

# parallel-processing - 互联网并行编程服务

> ID：14261102
> 
> 赞同：0
> 
> 时间：2013-01-10T15:15:30.327
> 
> 标签：parallel-processing

这是我的问题：是否有任何服务或技术可以在不知道它们的情况下在更多计算机上运行并行算法？

例如：我写了一个并行算法。我的朋友安装了一个简单的客户端应用程序，如果他们有互联网连接，他们可以利用他们的免费处理器容量帮助我计算。我希望将它们视为我 CPU 中的一个额外核心。

如果没有这样的技术，开发一个有什么无法解决的问题吗？（我知道在代码传输、操作系统和兼容性方面肯定有很多问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:23:05.800

I believe that you can use [BOINC](http://boinc.berkeley.edu/) to set up your own *volunteer computing* project. But I have no experience of this to report.

# python - 如何将 .get() 函数与单选按钮一起使用

> ID：14261103
> 
> 赞同：1
> 
> 时间：2013-01-10T15:15:32.617
> 
> 标签：python, radio-button, tkinter

我正在尝试使用 RadioButton 制作一个基本的绘图程序来确定画笔的形状。

```
self.choseo = Radiobutton(text='Circle', variable=shape,indicatoron=0, value=1)
self.choser = Radiobutton(text='Rectangle', variable=shape,indicatoron=0, value=2)
self.chosea = Radiobutton(text='Arc', variable=shape,indicatoron=0, value=3) 
```

对应于：

```
 if shape.get()==3:
      self.display.create_arc( self.x1, self.y1, self.x2,
          self.y2, fill = mycolor, outline= mycolor, tags = "line")
   elif shape.get()==2:
      self.display.create_rectangle( self.x1, self.y1, self.x2,
          self.y2, fill = mycolor, outline= mycolor, tags = "line")
   elif shape.get()==1:
      self.display.create_oval( self.x1, self.y1, self.x2,
          self.y2, fill = mycolor, outline= mycolor, tags = "line") 
```

当我运行这个我得到这个错误：

```
"TypeError: get() takes exactly 1 argument (0 given)" 
```

我如何使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:30:44.053

你没有告诉它是什么`shape`，但你应该确保你使用`IntVar`.

试试下面的代码：

```
from Tkinter import *
master = Tk()
shape = IntVar() # ensure you use an instance of IntVar
Radiobutton(text='Circle', variable=shape, indicatoron=0, value=1, master=master).pack()
Radiobutton(text='Rectangle', variable=shape, indicatoron=0, value=2, master=master).pack()
Radiobutton(text='Arc', variable=shape, indicatoron=0, value=3, master=master).pack() 
```

并将`shape.get()`按照您想要的方式工作。

# python - 在登录 django 之前应该存储状态吗？

> ID：14261104
> 
> 赞同：1
> 
> 时间：2013-01-10T15:15:34.380
> 
> 标签：python, django, login, callback

login_required 可以用作 django 中的装饰器，但带有用户/密码的 login.html 受应用程序限制。

```
@login_required
def myview(request):
... 
```

现在我想在 login.html 中显示一个按钮，以将用户重定向到其他站点的 oauth 流。该网站修复了我的回调 url 静态。现在不需要用户/密码。

那么如何在从 oauth 服务器回调后将用户重定向到最后一个请求（可能会发布数据）？

session/cookies 应该用来存储请求对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:16:33.970

您可以将会话信息附加到 Django 中的匿名用户会话；每个人都会获得一个会话 cookie，无论是否匿名。该数据在用户登录后保留。

但是，如果您的会话数据存储在数据库中，那么随着时间的推移，它将占用越来越多的空间，您将需要定期执行清除旧会话的任务。

但是您是否应该保存 POST 数据以供以后重播？

在某些情况下，这可能没问题——当您确定 POST 请求是幂等的、已经运行过一次并且数据只是用于生成正确的页面供用户查看时。

不过，您可能不应该将此作为通用解决方案来实现。如果可以构造一个通过 OAuth 重定向的 GET 请求，然后作为经过身份验证的用户自动 POST，那么您手上可能有一个主要的 CSRF 漏洞。

# matlab - 如何获得 3D 凹形的体积？

> ID：14261108
> 
> 赞同：3
> 
> 时间：2013-01-10T15:15:43.070
> 
> 标签：matlab, volume, concave

我想知道是否有人知道如何获得 3D 凹形的体积？Matlab 内置函数只能计算凸形的体积。例如，

```
[K, V] = convhulln(shape.vertices); 
```

V 是体积。在这里，形状由具有顶点和面的网格定义。

非常感谢。

最好的，一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:19:15.887

如果您的形状不太复杂，您可以计算其凸包的体积并减去其凹面的所有凸包的体积。

否则，将您的凹形分解为一组不相交的凸形并将它们的体积相加。

# multithreading - 循环中的cuda线程

> ID：14261111
> 
> 赞同：0
> 
> 时间：2013-01-10T15:15:58.763
> 
> 标签：multithreading, loops, cuda

这是一个非常笼统的问题，如果有人对此有任何经验，那就太好了。

每次（在内核中）我都想在 while 循环中使用线程，例如：

```
tidx = threadIdx.x + blockIdx.x * blockDim.x;
tidy = threadIdx.y + blockIdx.y * blockDim.y;

while(i<70) {
    if (tidx<640 && tidy<480){
        //calculations to get a desired array
    }
} 
```

我的程序冻结。

我尝试了几件事，例如更改 while to for 但似乎没有任何效果。

我开始认为不可能使用这样的线程。这是真的吗？如果不是，先决条件是什么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:20:52.363

所有版本的 CUDA 和所有 CUDA 设备都应该能够执行循环。确保您没有编写无限循环，否则计算时间只需要很长时间。

# controller - ZF2 在控制器中使用翻译器

> ID：14261115
> 
> 赞同：9
> 
> 时间：2013-01-10T15:16:13.117
> 
> 标签：controller, translation, zend-framework2

对于 url 重定向，我需要在控制器中翻译一些东西。

我怎样才能访问 $this->translate(); 在控制器中？

谢谢！缺口

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T18:07:24.080

翻译是通过`Translator`. 翻译器是一个对象，例如注入到视图助手中，因此如果您调用该视图助手，它会使用翻译器来翻译您的字符串。对于这个答案，我假设您已将翻译器配置[为与骨架应用程序相同](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L55-L69)。

最好的方法是使用工厂将其作为依赖项注入到您的控制器中。控制器配置：

```
'controllers' => array(
  'factories' => array(
    'my-controller' => function($sm) {
      $translator = $sm->getServiceLocator()->get('translator');
      $controller = new MyModule\Controller\FooController($translator);
    }
  )
) 
```

和控制器本身：

```
namespace MyModule;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\I18n\Translator\Translator;

class FooController extends AbstractActionController
{
  protected $translator;

  public function __construct(Translator $translator)
  {
    $this->translator = $translator;
  }
} 
```

另一种方法是在您的操作中从服务管理器中拉出翻译器，但这不太灵活、可测试性较差且难以维护：

```
public function fooAction()
{
  $translator = $this->getServiceManager()->get('translator');
} 
```

在这两种情况下，您都可以使用`$translator->translate('foo bar baz')`来翻译您的字符串。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-29T19:00:33.200

如果你想在视图中使用控制器中的翻译器，就像这样：

```
$this->translate('Hello') 
```

而不是**丑陋**：

```
$this->getServiceLocator()->get('translator')->translate('Hello') 
```

你也可以为控制器编写翻译插件，就像 view helper 一样`Zend\I18n\View\Helper\Translate`。

当然，您可以调用具有相同签名的插件：

```
__invoke($message, $textDomain = null, $locale = null) 
```

只需注册：

```
'controller_plugins' => array(
    'factories' => array(
        'translate' => 'Application\Controller\Plugin\Translate',
    ),
), 
```

并编写插件：

```
<?php

namespace Application\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;

use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\FactoryInterface;

use Zend\I18n\Translator\Translator;

class Translate implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $serviceLocator = $serviceLocator->getController()->getServiceLocator();
        $serviceFactory = new TranslatorServiceFactory();
        $translator = $serviceFactory->createService($serviceLocator);

        return new TranslatorProxy($translator);
    }
}

final class TranslatorProxy extends AbstractPlugin
{
    private $translator;

    public function __construct(Translator $translator)
    {
        $this->translator = $translator;
    }

    public function __invoke($message, $textDomain = 'default', $locale = null)
    {
        return $this->translator->translate($message, $textDomain, $locale);
    }

    public function __call($method, $args)
    {
        return call_user_func_array([$this->translator, $method], $args);
    }

    public static function __callstatic($method, $args)
    {
        return call_user_func_array([$this->translator, $method], $args);
    }
} 
```

**这个怎么运作？** 你看，`ServiceLocator`传入的

```
createService(ServiceLocatorInterface $serviceLocator) 
```

配置空间中的工厂`controller_plugins`，确实无法访问控制器中的`Config`服务`ServiceLocator`。因此，您无法通过 获取配置和创建`Translate`对象`TranslatorServiceFactory`。

取而代之的是，您可以通过键入来访问`ServiceLocator`分配给我们的助手已为其调用的控制器`$serviceLocator->getController()`。

当然，`$serviceLocator`传入的`createService`方法是`Zend\Mvc\Controller\PluginManager`.

**为什么要代理？** 通过插件工厂返回的对象必须实现

```
Zend\Mvc\Controller\Plugin\PluginInterface 
```

这是抽象实现的

```
Zend\Mvc\Controller\Plugin\AbstractPlugin 
```

所以我们创建了代理对象来将我们插件的所有调用转发到该`Translate`对象。

希望它有所帮助！

我在自己的博客上发表了一篇文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:17:17.040

我想有一个最好的方法来做到这一点：

```
$translator = $this->getServiceLocator()->get('translator');
$translator->translate('__your_key'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T17:22:58.053

```
$translator = $this->getServiceManager()->get('MVCTranslator'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-19T12:42:22.003

在我的情况下，这个解决方案非常有效：

```
namespace MyNS;
class MyCtrlr
{
    protected $translator;

    public function getTranslator()
    {
        if (!$this->translator)
        {
            $sm = $this->getServiceLocator();
            $this->translator = $sm->get('translator');
        }
        return $this->translator;
    }

    public function myAction()
    {
        $sTrHello = $this->getTranslator()->translate('Hello');
        /*
         * More code here
         */
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T09:07:01.007

可*调用*是可以在没有任何参数的情况下构造的类。由于我们的*MyModule\Controller\FooController*现在有一个必需的参数，我们需要更改它。*工厂*是创建另一个类的实例的类。我们现在将为我们的*FooController*创建一个。让我们像这样修改我们的 module.config.php 文件：

```
return array(
     'view_manager' => array( /** ViewManager Config */ ),
     'controllers'  => array(
         'invokables' => array(
             //'MyModule\Controller\Foo' => 'MyModule\Controller\FooController'
         ),
         'factories' => array(
            'MyModule\Controller\Foo' => 'MyModule\Factory\FooControllerFactory',
        )
     ),
     'router' => array( /** Router Config */ )
 ); 
```

让我们实现我们的工厂类，为此在*\module\MyModule\src\MyModule\Factory*中创建一个新文件夹和名为*FooControllerFactory.php*的新文件：

```
<?php
namespace MyModule\Factory;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use MyModule\Controller\FooController;

class FooControllerFactory implements FactoryInterface
{

    public function __construct()
    {}

    /**
     * Create service
     *
     * @param ServiceLocatorInterface $serviceLocator
     *
     * @return mixed
     */    
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $realServiceLocator = $serviceLocator->getServiceLocator();
        $translator         = $realServiceLocator->get('translator');

        return new FooController($translator);
    }
} 
```

现在让我们在*FooController*中使用*$translator*。为此，我们需要覆盖默认的*__contruct()*：

 **```
<?php
namespace MyModule\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\Mvc\I18n\Translator;

class FooController extends AbstractActionController
{
    protected $translator;

    public function __construct(Translator $translator)
    {
        $this->translator = $translator;
    }

    public function FooAction()
    {
      ...
      $msg = $this->translator->translate('Blah blah blah');
      ...
    }
} 
```

在我的情况下工作正常！！！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-15T14:04:13.240

你可以这样做：

```
$translate = $this->getServiceLocator()->get('viewhelpermanager')->get('translate'); 
```**

# counter - 持续递增计数器

> ID：14261118
> 
> 赞同：0
> 
> 时间：2013-01-10T15:16:20.387
> 
> 标签：counter, clock, persistent

我有一个特殊但简单的时钟的概念，它可以显示自某个时间点以来的秒数（永远不会改变）。存储、递增和显示此持久值的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:18:22.473

如果起点永远不会改变，你只需要保存它。从概念上讲，这与[Unix time](http://en.wikipedia.org/wiki/Unix_time)相同。

只需获取当前系统时间并计算与您的时代开始的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:18:28.607

这是通过 Unix 完成的`epoch`。您只需要创建自己的`epoch`也许`BobeEpoch`. 您可以将此值存储在您的应用程序可以检索它的地方，然后您将调用当前系统时间。获得当前系统时间后，您将从中减去该值`BobeEpoch`并将其显示给用户。

# c# - 为什么DataGrid调用集合的IndexOf传递类型ItemcControl.ItemInfo的对象？

> ID：14261121
> 
> 赞同：1
> 
> 时间：2013-01-10T15:16:25.753
> 
> 标签：c#, wpf, mvvm, wpfdatagrid, inotifycollectionchanged

我创建`SelectionHelper`了`DataGrid`它允许在两个方向上绑定所选项目。
在此辅助手册中，我`ScrollIntoView`在从ViewModel的选择更改时呼叫第一个选定的项目。通话成功返回。但是稍后在 UI 的消息队列中的某个地方发生了一些事情，并且调用了我的集合的 IndexOf。
由于 UI 虚拟化，我怀疑它是异步的。`DataGrid`绝对是想知道项目的索引。但是我无法理解为什么它会放置`ItemsControl.ItemInfo`而不是 item。
这是错误还是未记录的功能？

我的集合实现了这些接口：`IList<T>`, `IList`,`INotifyCollectionChanged`

这是代码`IndexOf`：

```
public int IndexOf(object value)
        {
            if ((value != null && !(value is T))
                || (value == null && typeof(T).IsValueType))
                throw new ArgumentException(WrongTypeMessage, "value");

            return IndexOf((T)value);
        } 
```

它按预期抛出异常=）

**更新**

是的，我的猜测是正确的。这是 DataGrid 的代码`ScrollIntoView`

```
public void ScrollIntoView(object item)
    {
      if (item == null)
        throw new ArgumentNullException("item");
      this.ScrollIntoView(this.NewItemInfo(item, (DependencyObject) null, -1));
    }

    internal void ScrollIntoView(ItemsControl.ItemInfo info)
    {
      if (this.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
        this.OnBringItemIntoView(info);
      else
        this.Dispatcher.BeginInvoke(DispatcherPriority.Loaded, (Delegate) new DispatcherOperationCallback(((ItemsControl) this).OnBringItemIntoView), (object) info);
    } 
```

**更新** 问题已在此[更新中修复](http://support.microsoft.com/kb/2750149/en-us)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:56:51.880

是的，可能我找到了原因：

这是 DataGrid.ScrollIntoView 的代码（由 Resharper 反编译）

```
internal void ScrollIntoView(ItemsControl.ItemInfo info)
    {
     if (this.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
        this.OnBringItemIntoView(info);
     else
        this.Dispatcher.BeginInvoke(DispatcherPriority.Loaded, (Delegate) new DispatcherOperationCallback(((ItemsControl) this).OnBringItemIntoView), (object) info);
    } 
```

在这里，它们`info`转换为对象类型。嗯，问题确实是`DispatcherOperationCallback`预期的`object`。
但是`ItemsControl`有两个重载`OnBringItemIntoView`：一个用于类型`ItemsControl.ItemInfo`，第二个用于`object`类型。

```
internal object OnBringItemIntoView(ItemsControl.ItemInfo info)
    {
      FrameworkElement frameworkElement = info.Container as FrameworkElement;
      if (frameworkElement != null)
        frameworkElement.BringIntoView();
      else if ((info = this.LeaseItemInfo(info, true)).Index >= 0)
      {
        VirtualizingPanel virtualizingPanel = this.ItemsHost as VirtualizingPanel;
        if (virtualizingPanel != null)
          virtualizingPanel.BringIndexIntoView(info.Index);
      }
      return (object) null;
    }

internal object OnBringItemIntoView(object arg)
    {
     return this.OnBringItemIntoView(this.NewItemInfo(arg, (DependencyObject) null, -1));
    } 
```

猜猜，哪一个被选中了？;-)
所以他们被`ItemInfo`包裹在`ItemInfo`. 这就是`this.LeaseItemInfo(info, true)`为什么

```
internal object OnBringItemIntoView(ItemsControl.ItemInfo info)
    {
      FrameworkElement frameworkElement = info.Container as FrameworkElement;
      if (frameworkElement != null)
        frameworkElement.BringIntoView();
      else if ((info = this.LeaseItemInfo(info, true)).Index >= 0)
      {
        VirtualizingPanel virtualizingPanel = this.ItemsHost as VirtualizingPanel;
        if (virtualizingPanel != null)
          virtualizingPanel.BringIndexIntoView(info.Index);
      }
      return (object) null;
    } 
```

收到不正确的项目并`IndexOf`以错误的值调用：

```
 internal ItemsControl.ItemInfo LeaseItemInfo(ItemsControl.ItemInfo info, bool ensureIndex = false)
    {
      if (info.Index < 0)
      {
        info = this.NewItemInfo(info.Item, (DependencyObject) null, -1);
        if (ensureIndex && info.Index < 0)
          info.Index = this.Items.IndexOf(info.Item);
      }
      return info;
    } 
```

但这`ScrollIntoView`对于未生成容器的所有情况都应该中断。`ScrollIntoView`简单的解决方法是通过调用`Dispatcher.BeginInvoke`

我会等待MS的[答复](https://connect.microsoft.com/VisualStudio/feedback/details/776253/itemscontrol-calls-indexof-method-of-bound-collection-passing-internal-class-itemscontrol-iteminfo)。

# c - 如何在我的 gstreamer 中启用 httpsrc 插件？

> ID：14261122
> 
> 赞同：3
> 
> 时间：2013-01-10T15:16:27.717
> 
> 标签：c, http, plugins, gstreamer

我尝试使用以下命令播放通过 http 检索到的 mp3 文件或流

```
gst-launch httpsrc location=http://domain.com/music.mp3 ! mad ! osssink 
```

但得到以下错误

```
ERREUR : le pipeline n'a pas pu être construit : pas d'élément « httpsrc ». 
```

`httpsrc`其中表示由于缺少元素而无法构建管道。

谷歌搜索后，我没有找到如何启用/安装`httpsrc`插件

我试过了

```
sudo apt-get install gstreamer-httpsrc
sudo apt-get install gstreamer0.10-httpsrc 
```

没有成功。

我正在使用我的发行版附带的默认 gstreamer 安装`Ubuntu 12.0.4`。

我是否遗漏了什么或者是否有任何其他方法可以做同样的工作，即使没有`httpsrc`

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:56:39.457

您要使用的元素称为souphttpsrc。您可以运行 gst-inspect | grep http 查看所有与 http 匹配的已安装元素。

# php - 重定向做一个页面并弹出警报

> ID：14261127
> 
> 赞同：0
> 
> 时间：2013-01-10T15:16:45.927
> 
> 标签：php, html, forms, redirect

我创建了一个用于注册的 html 表单，当用户成功注册时，我希望他们自动重定向回我的`index.html`页面，并弹出警报告诉他们他们已成功注册。目前我的警报有效，但它只是在空白页中打开。我尝试过输入， `header ("location:../index.html")`但没有奏效，它只是将我直接引导到页面而没有给我想要的警报。有人能帮忙吗？

```
<?php
$con = mysql_connect("localhost","root","") or die(mysql_error());
$select_db = mysql_select_db("mayan",$con);
if(isset($_POST['register']))
{
     $firstname=$_POST['first_name'];
     $lastname=$_POST['last_name'];
     $address=$_POST['address'];
     $postcode=$_POST['postcode'];
     $emailaddress=$_POST['emailaddress'];
     $password=$_POST['password'];
     $query = "select emailaddress FROM mayan_users where emailaddress='$emailaddress'";
     $link = mysql_query($query)or die(mysql_error());
     $num = mysql_num_rows($link);
 if ($num>0){
  echo 'Email already exists'; //email already taken
 }

 else {
 $insert_query = "insert into `mayan_users`(`firstname`,`lastname`,`address`,`postcode`,`emailaddress`,`password`) values('$firstname','$lastname','$address','$postcode','$emailaddress','$password')";
 $result = mysql_query($insert_query)or die(mysql_error());

  if(success)
{
   echo "<script type=\"text/javascript\">".
        "alert('success');".
        "</script>";
}
     }

   }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:24:08.387

在网站上填写表格后，我使用此代码将某人重定向回主页。

```
if(empty($errors))
{
    //send the email

    echo '
        <script type="text/javascript">
            alert("YOUR MESSAGE"); 
            window.location.href = "http://www.yoursite.com";</script>';    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:19:56.540

重定向时使用此功能：

```
function redirect($url) {
    if(!headers_sent()) {
        //If headers not sent yet... then do php redirect
        header('Location: '.$url);
        exit;
    } else {
        //If headers are sent... do javascript redirect... if javascript disabled, do html redirect.
        echo '<script type="text/javascript">';
        echo 'window.location.href="'.$url.'";';
        echo '</script>';
        echo '<noscript>';
        echo '<meta http-equiv="refresh" content="0;url='.$url.'" />';
        echo '</noscript>';
        exit;
    }
} 
```

所以你想重定向到同一个页面，但使用 ?=XXX 获取值

您的代码将如下所示：

```
<?php

if ($_GET['success'] == 1){
        echo "<script type=\"text/javascript\">".
        "alert('success');".
        "</script>";
}
$con = mysql_connect("localhost","root","") or die(mysql_error());
$select_db = mysql_select_db("mayan",$con);
if(isset($_POST['register']))
{
     $firstname=$_POST['first_name'];
     $lastname=$_POST['last_name'];
     $address=$_POST['address'];
     $postcode=$_POST['postcode'];
     $emailaddress=$_POST['emailaddress'];
     $password=$_POST['password'];
     $query = "select emailaddress FROM mayan_users where emailaddress='$emailaddress'";
     $link = mysql_query($query)or die(mysql_error());
     $num = mysql_num_rows($link);
 if ($num>0){
  echo 'Email already exists'; //email already taken
 }

 else {
 $insert_query = "insert into `mayan_users`(`firstname`,`lastname`,`address`,`postcode`,`emailaddress`,`password`) values('$firstname','$lastname','$address','$postcode','$emailaddress','$password')";
 $result = mysql_query($insert_query)or die(mysql_error());

  if(success)
{
   redirect('index.php?sucess=1');
}
     }

   }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:18:48.313

要通过 JavaScript 重定向，请使用：

```
window.location = "http://www.google.com/"; 
```

但我建议添加一个链接供用户单击，因为某些用户可能禁用了 JavaScript。而且我会在重定向上设置超时，因此用户有几秒钟的时间来阅读页面。例如：

```
if (success) {
   echo "<script type=\"text/javascript\">" . 
         "setTimeOut(function() {" . 
         "   window.location = 'http://www.google.com';" . 
          "}, 2500);" .
         "</script>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:23:20.343

您可以在索引页面中执行变量，例如“index.php?success”。然后只需通过 if(isset($_GET['success']) 检查此请求。并在该 IF 中添加一些登录信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-10T15:26:37.463

1）首先将您的**index.html**更改为 php 文件：**index.php**

2）在**index.php**文件的顶部写

```
<?php
    session_start();
?> 
```

3) 在**index.php**文件的正文中，您可以：

要么打印一条消息

```
<?php
   if(isset($_SESSION['message'])) {
     echo $_SESSION['message'];
     unset($_SESSION['message']);
   }
?> 
```

或使用 javascript 发出警报

```
<?php
   if(isset($_SESSION['message'])) {
     echo '<script> alert(\'Success\'); </script>';
     unset($_SESSION['message']);
   }
?> 
```

4) 在你给我们的这个行动文件上

```
<?php

  // START THE SESSION
  session_start();

$con = mysql_connect("localhost","root","") or die(mysql_error());
$select_db = mysql_select_db("mayan",$con);
if(isset($_POST['register']))
{
     $firstname=$_POST['first_name'];
     $lastname=$_POST['last_name'];
     $address=$_POST['address'];
     $postcode=$_POST['postcode'];
     $emailaddress=$_POST['emailaddress'];
     $password=$_POST['password'];
     $query = "select emailaddress FROM mayan_users where emailaddress='$emailaddress'";
     $link = mysql_query($query)or die(mysql_error());
     $num = mysql_num_rows($link);
 if ($num>0){
  $_SESSION['message'] = 'Email already exists'; //email already taken
 }

 else {
 $insert_query = "insert into `mayan_users`(`firstname`,`lastname`,`address`,`postcode`,`emailaddress`,`password`) values('$firstname','$lastname','$address','$postcode','$emailaddress','$password')";
 $result = mysql_query($insert_query)or die(mysql_error());

  if($result)
  {
     $_SESSION['message'] = 'Success';
  }
 }

}
// redirect to main page
header("Location: /");
?> 
```

# sql - 获取每组的最大值

> ID：14261129
> 
> 赞同：1
> 
> 时间：2013-01-10T15:16:59.230
> 
> 标签：sql, sql-server, sql-server-2008, tsql

作为`create view "data" as select [...]`语句结果的原始数据：

```
projectId   resourceId  num

1052785922  318153743   10
1052785922  318153743   20
1052785922  318153743   30

1052785936  -2097765361 20
1052785936  318153743   10
1052785936  528513104   30

1052786014  -2097765361 20
1052786014  318153743   10
1052786014  528513104   30

1052786021  -2097765361 20
1052786021  318153743   10
1052786021  528513104   30

1052786099  -2097765361 20
1052786099  318153743   10 
```

我尝试过滤上述数据以仅获取每个 projectId 具有 max(num) 的那些行。

估计结果：

```
projectId   resourceId  num

1052785922  318153743   30
1052785936  528513104   30
1052786014  528513104   30
1052786021  528513104   30
1052786099  -2097765361 20 
```

我知道 self left join on `num = max(num)`、window-function like`max(num) over ( partition by projectId )`或 CTE 的可能性，但我想知道是否还有其他可能性来选择那些具有最高 num 值的那些。

背景：以上数据只是大图的一个点，比较复杂。由于它是一种观点，因此我不会以这种方式考虑 CTE 或任何东西。视图中提供的数据是为计划应用程序提供数据，运行时非常重要。我不想挣扎，以性能昂贵的视图选择结束。

**上面的“原始数据”是一个视图结合了几十个表的数据的结果。我正在寻找一种方法来一次过滤此视图的创建语句中的分组最大值，而无需在其间放置额外的层或视图！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:18:27.823

像这样：

```
WITH CTE
AS
(
  SELECT *,
    ROW_NUMBER() OVER(PARTITION BY projectId ORDER BY num DESC) rownum
  FROM Table1
)
SELECT projectId,   resourceId,  num
FROM CTE
WHERE rownum = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/f64555/2)

这会给你：

```
|  PROJECTID |  RESOURCEID | NUM |
----------------------------------
| 1052785922 |   318153743 |  30 |
| 1052785936 |   528513104 |  30 |
| 1052786014 |   528513104 |  30 |
| 1052786021 |   528513104 |  30 |
| 1052786099 | -2097765361 |  20 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:19:02.023

这个巨型脚本不使用排序；）尝试

```
SELECT *
FROM dbo.test3 t 
WHERE EXISTS (
              SELECT 1
              FROM dbo.test3                              
              WHERE projectId = t.projectId
              GROUP BY projectId
              HAVING MAX(num) = t.num
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/8f58b/1/0)上的演示[](http://sqlfiddle.com/#!3/8f58b/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:02:01.370

我已经将视图创建为从 a 中选择`UDF`以按照 Mahmoud 应该做的方式预处理数据。`UDF`允许我使用临时表，而不是`CTE`最终可以多次执行。

感谢大家的提示！**

# android - 意图忽略 setData

> ID：14261130
> 
> 赞同：0
> 
> 时间：2013-01-10T15:16:59.810
> 
> 标签：android, android-intent, android-sdcard

现在我有：

```
Intent gallery = new Intent( ACTION_PICK,
   android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI );
gallery.setDataAndType(Uri.parse("file:///sdcard/DCIM/"), "image/*");
startActivity(gallery); 
```

我想要完成的是只显示 DCIM 目录中的图像，但我看到的是设备上的每个图像。当我运行它时，我没有看到我的进程弹出任何错误或警告。我尝试拆分为 setData 和 setType ，它们可以预见地具有相同的效果。

提前感谢您对我所缺少的内容的任何洞察。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:56:09.703

看看[PiyushMishra的这个答案](https://stackoverflow.com/users/510617/piyushmishra)

[特定文件夹中的内置画廊](https://stackoverflow.com/questions/6074270/built-in-gallery-in-specific-folder/8255674#8255674)

# c++ - Doxygen - 将参数声明为可选

> ID：14261136
> 
> 赞同：11
> 
> 时间：2013-01-10T15:17:22.243
> 
> 标签：c++, parameters, doxygen, optional-parameters

我正在使用 Doxygen 记录一个代码库，并且想知道是否有一个关键字可以将函数的参数声明为可选的。就像是：

```
/*!
\fn int add(int a, int b=0)
\brief adds two values
\param a the first operand
\param \optional b the second operand.  Default is 0
\return the result
*/ 
```

似乎这是应该存在的东西，但我无法在任何地方找到它。有没有实际的选择，还是我只需要在描述中记下？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T16:07:04.757

回答你的问题：不，没有这样的事情。

但我不同意你的观点，即应该有这样的事情。毕竟，函数声明会连同它的文档一起显示，所以每个人都可以看到它`b`是可选的，它的默认参数是什么。并且`\fn`请参阅 doxygen 的文档[，不鼓励使用 \fn](http://www.doxygen.nl/manual/commands.html#cmdfn)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:07:05.073

Doxygen 不提供您想要的东西 - 您必须在描述中手动记下它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T03:04:47.967

我作弊并使用 \param foo [in,out,opt,banana] 描述 foo 的用途。

您可以添加*任何*选项！

# powershell - PowerShell：我需要了解为什么参数被解释为 NULL

> ID：14261137
> 
> 赞同：1
> 
> 时间：2013-01-10T15:17:23.940
> 
> 标签：powershell, nullreferenceexception, file-rename

我收到一个错误，我无法在空值表达式上调用方法。但是，我不确定为什么参数会导致空值。我需要第二双眼睛来看待这个并给我一些指导。

```
$docpath = "c:\users\x\desktop\do"
$htmPath = "c:\users\x\desktop\ht"
$txtPath = "c:\users\x\desktop\tx"
$srcPath = "c:\users\x\desktop\ht"
#
$srcfilesTXT = Get-ChildItem $txtPath -filter "*.htm*"
$srcfilesDOC = Get-ChildItem $docPath -filter "*.htm*"
$srcfilesHTM = Get-ChildItem $htmPath -filter "*.htm*"
#
function rename-documents ($docs) {  
    Move-Item -txtPath $_.FullName $_.Name.Replace("\.htm", ".txt") 
    Move-Item -docpath $_.FullName $_.Name.Replace("\.htm", ".doc") 
}
ForEach ($doc in $srcpath) {
    Write-Host "Renaming :" $doc.FullName         
    rename-documents -docs  $doc.FullName   
    $doc = $null   
} 
```

和错误....

```
You cannot call a method on a null-valued expression.
At C:\users\x\desktop\foo002.ps1:62 char:51
+     Move-Item -txtPath $_.FullName $_.FullName.Replace <<<< ("\.htm", ".txt")
    + CategoryInfo          : InvalidOperation: (Replace:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

You cannot call a method on a null-valued expression.
At C:\users\x46332\desktop\foo002.ps1:63 char:51
+     Move-Item -docpath $_.FullName $_.FullName.Replace <<<< ("\.htm", ".doc")
    + CategoryInfo          : InvalidOperation: (Replace:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

首先：似乎 my`("\.htm", ".txt")`是显示为 null 的内容。我也试过没有`\`- `(".htm", ".txt")`- 并收到相同的结果。

第二：在语法上，我将我的行解释为`move-item <path> <source-file-passed-to-function> <replacement=name-for-file> (parameters-for-replacement)`. 这是对这段代码在做什么的适当理解吗？

第三：我需要`-literalpath`在某个地方有一个参数吗？MS TechNet 和 get-help 关于参数使用的信息很少`-literalpath`；我无法找到与我的特定情况相关的东西。

帮助我了解我所缺少的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:47:03.580

在简单函数的上下文中`$_`没有定义。 `$_`仅在管道中有效。也就是说，`$_`表示正在沿管道传递的当前对象。

使用您当前的函数定义尝试这种方式：

```
function Rename-HtmlDocument([System.IO.FileInfo]$docs, $newExt) {  
    $docs | Move-Item -Dest {$_.FullName -replace '\.htm$', $newExt} 
} 
```

您可以直接传递此函数`$srcfilesDOC`和`$srcFilesTXT`变量，例如：

```
Rename-HtmlDocument $srcFilesDOC .doc
Rename-HtmlDocument $srcFilesTXT .txt 
```

当然，您可以使其更通用并从 FileInfo 对象获取源扩展名，例如：

```
function Rename-DocumentExtension([System.IO.FileInfo]$docs, $newExt) {  
    $docs | Move-Item -Dest {$_.FullName.Replace($_.Extension, $newExt)} 
} 
```

BTW PowerShell 的 Move-Item 命令没有您使用的参数`-txtPath`和`-docPath`. 这是您创建的功能吗？

# asp.net - 为什么 Image.GetThumbnailImage 在 IIS6 和 IIS7.5 上的工作方式不同？

> ID：14261140
> 
> 赞同：4
> 
> 时间：2013-01-10T15:17:33.080
> 
> 标签：asp.net, .net, vb.net, iis-6, iis-7.5

有点奇怪的问题，我不知道以前是否有人会遇到过这个问题。

我们有一个 ASP.net 页面，它在文件系统上生成物理缩略图 jpeg 文件，并将全尺寸图像复制到不同的位置。所以我们输入一张图像，我们在一个位置得到一个完整的副本，在另一个位置得到一个 102*68 的小图像。

我们目前正在寻求最终从 Server 2003 上的 IIS6 迁移到 Server 2008R2 上的 IIS7.5，除非存在问题。

在旧系统（因此 IIS6/Server 2003）上，黑色边框被移除，图像保持正确的比例。在新系统 (IIS7.5/Server 2008) 上，缩略图的呈现方式与 JPEG 中的缩略图完全相同，带有黑色边框，但这会使缩略图略微被压扁，并且显然包含难看的黑色边框。

有谁知道为什么会发生这种情况？我做了一个谷歌，似乎无法找出哪种行为是“正确的”。我的直觉告诉我，新系统正确地呈现缩略图，但我不知道。

有人对如何解决问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:30:49.830

我认为正如建议的那样，这是.net的差异。不是 IIS。

只需重新编写您的代码，您就可以节省很多时间，非常简单的事情。

这是我不久前编写的一个图像处理程序，它可以将任何图像重新绘制到您的设置中。

```
public class image_handler : IHttpHandler
{
public void ProcessRequest(HttpContext context)
{
    // set file
    string ImageToDraw = context.Request.QueryString["FilePath"];
    ImageToDraw = context.Server.MapPath(ImageToDraw);

    // Grab images to work on's true width and height
    Image ImageFromFile = Image.FromFile(ImageToDraw);
    double ImageFromFileWidth = ImageFromFile.Width;
    double ImageFromFileHeight = ImageFromFile.Height;
    ImageFromFile.Dispose();

    // Get required width and work out new dimensions
    double NewHeightRequired = 230;

    if (context.Request.QueryString["imageHeight"] != null)
        NewHeightRequired = Convert.ToDouble(context.Request.QueryString["imageHeight"]);

    double DivTotal = (ImageFromFileHeight / NewHeightRequired);
    double NewWidthValue = (ImageFromFileWidth / DivTotal);
    double NewHeightVale = (ImageFromFileHeight / DivTotal);

    NewWidthValue = ImageFromFileWidth / (ImageFromFileWidth / NewWidthValue);
    NewHeightVale = ImageFromFileHeight / (ImageFromFileHeight / NewHeightVale);

    // Set new width, height
    int x = Convert.ToInt16(NewWidthValue);
    int y = Convert.ToInt16(NewHeightVale);

    Bitmap image = new Bitmap(x, y);
    Graphics g = Graphics.FromImage(image);
    Image thumbnail = Image.FromFile(ImageToDraw);

    // Quality Control
    g.InterpolationMode = InterpolationMode.HighQualityBicubic;
    g.SmoothingMode = SmoothingMode.HighQuality;
    g.PixelOffsetMode = PixelOffsetMode.HighQuality;
    g.CompositingQuality = CompositingQuality.HighQuality;
    g.DrawImage(thumbnail, 0, 0, x, y);
    g.Dispose();

    image.Save(context.Response.OutputStream, ImageFormat.Jpeg);
    image.Dispose();
}

public bool IsReusable
{
    get
    {
        return true;
    }
} 
```

# actionscript-3 - 在 Flash as3 中加载 Flex4 应用程序

> ID：14261143
> 
> 赞同：1
> 
> 时间：2013-01-10T15:17:47.747
> 
> 标签：actionscript-3, apache-flex, flex4

我创建了一个支持插件的闪存，它读取配置文件并加载其他几个闪存文件。所有文件均由 Adob​​e Flash CS5 创建。最近我不得不创建一个我想加载到主闪存舞台上的 flex 应用程序。

```
this.addChild(this.movieLoader);
this.movieLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, LoadedM);
this.movieLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, loadError);
this.movieLoader.load(new URLRequest(fmovie)); 
```

每次都会触发 LoadedM(..) 并将加载的 flash 放入舞台并定位在 LoadedM(..) 中。

当我加载 FlashCS5 创建的 swf 时，loader.content 的类型为 [object MainTimeline]，而当我加载 Flex4 应用程序时，loader.content 的类型为 [object _Main_mx_managers_SystemManager]

我的问题是 flex 应用程序在舞台上不可见，即使调试显示文件已满载，也不会触发 flex 应用程序的初始化/创建事件。

我已经尝试过[这个](https://stackoverflow.com/questions/2354612/how-to-load-flex-swf-from-flash)解决方案，但没有任何好处。我已经检查了加载的 Event.INIT 事件而不是 Event.INIT 并且它被触发了。但是被调试的节肢动物没有报告 flex 应用程序的初始化发生。

我错过了什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:41:47.427

[您可以在http://old.troygilbert.com/2009/05/loading-flex-based-swfs-in-as3-only-swfs/](http://old.troygilbert.com/2009/05/loading-flex-based-swfs-in-as3-only-swfs/)阅读有关该问题的更多信息

如果上述方法不起作用，请确保您为 flashplayer 10.2+ 发布您的 swf

# php - 从计费系统生成收据/发票

> ID：14261149
> 
> 赞同：-2
> 
> 时间：2013-01-10T15:17:57.077
> 
> 标签：php, mysql

我正在研究医院计费系统。它有一个程序清单。我想生成一张收据，以便可以打印，并且数据应该只来自一次交易。我已经有了收据格式的 html 文件。问题是，从交易中获取所需的信息。如检查的程序、价格、患者编号等。

截图：http: [//i.stack.imgur.com/bXf0v.png](https://i.stack.imgur.com/bXf0v.png)

![在此处输入图像描述](../Images/0bed61530e58d555923ef01da6957b14.png)

如果您查看屏幕截图，则在打印收据之前有步骤和不同的页面。所以我很难将值从第一页传递到最后一页。在第二张图片上，我圈出了程序编号。它只是为了测试选定的程序是否通过。

在第三张图片中，我无法通过 2 个程序。我需要生成收据。代码是：

```
foreach ($procedure as $pro) {
echo $pro."<br>";
} 
```

我不能把它添加到最后一页，因为它未定义。

另外，我需要得到支付的金额和收据的总额。我无法想象我将如何执行代码，因为它太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:25:09.013

我建议从每个页面获取 POST 数据并将它们放入 SESSION 变量中，然后在最终（打印）页面上使用会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:28:56.980

使用 SESSION 的另一种方法是创建一个带有隐藏“页面值”的多页表单，传递来自每个后续`POST`使用`hidden`表单字段的值。

代码看起来像......

```
if ($_POST['pg'] == 0) {

    // output first page/form

    echo '<input type="text" name="someValue"/>';
    echo '<input type="hidden" name="pg" value="1"/>';

}

if ($_POST['pg'] == 1) {

    // output second page/form

    echo '<input type="hidden" name="someValue" value="$_POST['someValue']"/>';
    echo '<input type="hidden" name="pg" value="2"/>';

}

// etc. 
```

# function - 带棚车的八度音阶 fir1

> ID：14261150
> 
> 赞同：-1
> 
> 时间：2013-01-10T15:18:01.680
> 
> 标签：function, matlab, filter, octave

我必须制作过滤器，这是我的代码：

```
octave:1> x=randn(500);
octave:2> b=fir1(50,0.2,'stop',boxcar(51));
error: `boxcar' undefined near line 2 column 22
error: evaluating argument list element number 4 
```

这里有什么问题？

低通滤波器在 Octave 中是“低”还是“停止”？

@edit 新错误：

```
octave:2> b=fir1(50,0.2,'stop');
error: `fir1' undefined near line 2 column 3 
```

有没有可能我什么都没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:25:24.267

您可能需要加载包（请参阅[Octave 常见问题解答](http://wiki.octave.org/FAQ#I_have_installed_a_package_but_still_get_a_.22foo_undefined.22_error)）。运行`pkg list`以确认包是否已安装以及是否已加载。它将显示所有已安装软件包的表格，在已加载的软件包前面带有星号。您将无法使用未加载的包。请参阅以下 Octave 会话。

```
octave> partcnt (7)   # does not work because function is not in search path
error: `partcnt' undefined near line 9 column 1
octave> pkg list      # show list of packages
Package Name   | Version | Installation directory
---------------+---------+-----------------------
      control  |   2.4.1 | /home/carandraug/octave/control-2.4.1
      general  |   1.3.2 | /home/carandraug/octave/general-1.3.2
generate_html  |   0.1.5 | /home/carandraug/octave/generate_html-0.1.5
        image  |   2.1.0 | /home/carandraug/octave/image-2.1.0
miscellaneous  |   1.2.0 | /home/carandraug/octave/miscellaneous-1.2.0
        optim  |   1.2.2 | /home/carandraug/octave/optim-1.2.2
       signal  |   1.2.0 | /home/carandraug/octave/signal-1.2.0
      specfun  |   1.1.0 | /home/carandraug/octave/specfun-1.1.0
       struct  |  1.0.10 | /home/carandraug/octave/struct-1.0.10

octave> pkg load miscellaneous  # load package
octave> partcnt (7)             # it works now
ans =  15
octave> pkg list                # confirm that package is loaded (* in front of the name)
Package Name   | Version | Installation directory
---------------+---------+-----------------------
      control  |   2.4.1 | /home/carandraug/octave/control-2.4.1
      general *|   1.3.2 | /home/carandraug/octave/general-1.3.2
generate_html  |   0.1.5 | /home/carandraug/octave/generate_html-0.1.5
        image  |   2.1.0 | /home/carandraug/octave/image-2.1.0
miscellaneous *|   1.2.0 | /home/carandraug/octave/miscellaneous-1.2.0
        optim  |   1.2.2 | /home/carandraug/octave/optim-1.2.2
       signal  |   1.2.0 | /home/carandraug/octave/signal-1.2.0
      specfun  |   1.1.0 | /home/carandraug/octave/specfun-1.1.0
       struct  |  1.0.10 | /home/carandraug/octave/struct-1.0.10

octave> pkg unload all    # unload the package
octave> partcnt (7)       # no longer works because it was removed from path
error: `partcnt' undefined near line 15 column 1
octave> pkg list
Package Name   | Version | Installation directory
---------------+---------+-----------------------
      control  |   2.4.1 | /home/carandraug/octave/control-2.4.1
      general  |   1.3.2 | /home/carandraug/octave/general-1.3.2
generate_html  |   0.1.5 | /home/carandraug/octave/generate_html-0.1.5
        image  |   2.1.0 | /home/carandraug/octave/image-2.1.0
miscellaneous  |   1.2.0 | /home/carandraug/octave/miscellaneous-1.2.0
        optim  |   1.2.2 | /home/carandraug/octave/optim-1.2.2
       signal  |   1.2.0 | /home/carandraug/octave/signal-1.2.0
      specfun  |   1.1.0 | /home/carandraug/octave/specfun-1.1.0
       struct  |  1.0.10 | /home/carandraug/octave/struct-1.0.10 
```

一般包之所以会在你加载的时候自动加载`miscellaneous`，是因为`general`是`miscellaneous`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:24:22.613

从[手册页](http://octave.sourceforge.net/signal/function/fir1.html)：

```
usage: b = fir1(n, w [, type] [, window] [, noscale]) 
```

你可能想要例如：

```
b=fir1(50, [0.1 0.2], 'stop'); 
```

# ios - 导出开始后无法更改 AVAssetExportSession 上的输出文件类型属性

> ID：14261151
> 
> 赞同：0
> 
> 时间：2013-01-10T15:18:11.660
> 
> 标签：ios, objective-c, avfoundation

我`AVAssetExportSession`用来导出文件

我做了一个例程，如果导出失败，那么它应该重新启动导出方法以确保文件成功导出。

重新启动导出方法时，我在线上收到此错误

```
exportSession.outputFileType = @"com.apple.quicktime-movie"; 
```

错误是：

```
Cannot alter output file type attribute on an AVAssetExportSession after an export has started 
```

`AVAssetExportSession`如果我使用 ARC 策略，如何发布以避免此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-07T04:46:43.430

请将这两行添加到您的代码中两次：

```
-(IBAction)...
{
     //cancel the export
     [exportSession cancelExport];
     exportSession = nil;

     ...

     [exportSession exportAsynchronouslyWithCompletionHandler:^(void)

     ...

         //cancel the export
         [exportSession cancelExport];
         exportSession = nil;
     }];
} 
```

# sql - 如何在 ETL 中测试增量数据

> ID：14261152
> 
> 赞同：3
> 
> 时间：2013-01-10T15:18:12.550
> 
> 标签：sql

我在很多面试中一次又一次地被问到同样的问题。问题是你将如何测试每天加载到他们数据库中的增量数据。我的职位是数据仓库 QA 和 BA。测试的主要目的是检查是否我们拥有来自源的所有数据，然后测试从源复制的所有数据是否按照开发人员的设计放置在相应的表中。

所以每次有人问这个问题时，我都会这样回答：为了测试增量数据，我们从暂存表中获取数据，这些数据将包含每日增量文件的数据。所以现在我可以将暂存表与目标数据库进行比较。就像那里的所有数据库一样可能是我们根据设计进行的一些计算或连接，以获取从登台到生产的数据，因此我将使用该设计进行查询，以针对源测试生产中的数据。

所以我的问题是我在唯一的项目中以这种方式测试了增量负载，所以任何人都可以给我详细的答案，因为我认为我可能没有正确回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:50:57.117

在任何数据仓库环境中，增量负载都是不可避免的。以下是呈现增量数据并对其进行测试的方法。

1) 源和目标表的设计方式应该是存储数据（行）的日期和时间戳。根据日期和时间戳列，您可以轻松获取增量数据。

2) 如果您使用复杂的 ETL 工具，如 informatica 或 Abinitio，那么按时间顺序查看负载状态很简单。这些工具存储每个负载的信息。但是，存储最后 10 个负载有一些限制。您需要将其配置为存储超过 10 个负载。

3) 如果您没有使用复杂的 ETL 工具，那么您应该构建 ETL 策略来存储加载统计信息并在加载期间捕获信息（如插入、删除、更新等）。您可以随时检索这些信息。但它需要大量的技术知识才能采用。

如果您想在数据仓库面试中取得成功，我建议您使用由美国公司创建的最佳 iOS 应用程序 ( [data-iq](https://itunes.apple.com/us/app/data-iq/id588271917?mt=8) ) 及其适合像您这样的候选人。检查出来，你可能会喜欢它。祝你面试顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T08:56:30.490

我将通过讲述测试增量数据与历史数据的不同来回答这个问题。

1.  我只需要测试增量数据。因此，我通过使用源/暂存表中的日期条件以及用于目标表中的增量负载的相同日期条件或审核 ID 来限制它。

2.  在测试增量数据时我们需要检查的另一件事是 - 通常在类型 2 表中，我们有一个类似的条件

> 如果目标表中已经存在一条记录，并且与目标表中的最后一条记录相比没有变化，则不要插入该记录。

因此，为了处理这种情况，我需要进行历史检查，将目标表的最后一条记录与增量数据的第一条记录进行比较，如果它们完全相同，那么我需要删除该记录。（此处 ACTIVITY_DT 是自定义元数据列，因此我们将仅在 EMPID、NAME、CITY 中查找更改）

例如 - 以下是我的目标表中的记录作为历史加载的一部分 - ![在此处输入图像描述](../Images/d5402b6ee3aba3c359cb188cdaec58a3.png)

这些是我在增量数据中得到的记录

![在此处输入图像描述](../Images/4b192d96e347c1222c858dc702220150.png)

所以在上述场景中，我将历史数据的最后一条记录（按 ACTIVITY_DT DESC 排序）与增量数据的第一个记录（按 ACTIVITY_DT ASC 排序）进行比较。数据列没有变化，所以我需要删除以下记录，因为它不应该插入到目标表中

> 1 Aashish HYD 2014 年 6 月 25 日

因此，作为这种增量加载的一部分，只插入了两条记录，如下所示 -

> 1 阿什什果阿 2014 年 6 月 26 日
> 
> 1 Aashish BLR 2014 年 6 月 27 日

# jquery - jquery动态嵌套列表

> ID：14261157
> 
> 赞同：0
> 
> 时间：2013-01-10T15:18:22.563
> 
> 标签：jquery

我敢肯定这很容易，但我正在用头撞墙。

我基本上是使用 jQuery、JSON 和 PHP（基于这种方法：[http](http://www.electrictoolbox.com/json-data-jquery-php-mysql/) ://www.electrictoolbox.com/json-data-jquery-php-mysql/ ）创建一个动态生成的浏览树。我已将下拉框更改为 ul li 菜单。在“a”点击事件中，我查询数据库并返回下一组数据的值。这一切都在工作。我只是无法将新返回的列表放到单击的 li 下的“嵌套”中。例如：

```
<ul id='levelone'>
 <li><a id='cats' href='#'>Cats</a></li>
 <li><a id='dogs' href='#'>Dogs</a></li>
 <li><a id='fish' href='#'>Fish</a></li>
</ul> 
```

如果用户点击“dogs”，我的 PHP/JSON 事件会查询数据库并返回列表：

```
<ul id='leveltwo'>
 <li><a id='hounds' href='#'>Hounds</a></li>
 <li><a id='shepherds' href='#'>Shepherds</a></li>
 <li><a id='poodles' href='#'>Poodles</a></li>
</ul> 
```

这可行，但我希望列表显示为页面上“狗”下的嵌套列表。像这样：

```
<ul id='levelone'>
 <li><a id='cats' href='#'>Cats</a></li>
 <li><a id='dogs' href='#'>Dogs</a></li>
     <ul id='leveltwo'>
      <li><a id='hounds' href='#'>Hounds</a></li>
      <li><a id='shepherds' href='#'>Shepherds</a></li>
      <li><a id='poodles' href='#'>Poodles</a></li>
    </ul>
 <li><a id='fish' href='#'>Fish</a></li>
</ul> 
```

我尝试了多种方法，但都没有奏效。我确定我缺少一个简单的按钮...任何帮助将不胜感激。

生成 leveltwo 列表的 jQuery 如下：

```
 function populateAmimalSubcategory() {
    $.getJSON('./includes/browsedata/animalsubcat.php', { animalcategory:       
       $('#ucHidden').val() }, function (data) {
        $("#animalsubcat").append("<ul id='subcatlist'></ul>");
        $.each(data, function (val, text) {
        $("#subcatlist").append("<li><a href='#' id='" + this.use_subcategory + "'>" + this.use_subcategory + "</a></li>");
        });
    }); 
```

当单击一级 div 中的项目时，这将调用该函数：

```
 $('#animallist a').live('click', function(){
        document.getElementById('ucHidden').value = this.id;
        $('#animalsubcat').empty();
        populateAnimalSubcategory();
    }); 
```

国民党

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:29:31.747

```
$('body').on('click', "#animallist > li > a", function(){
    var myli = $(this).parent();
    $('.animalsubcat', myli).remove();
    populateAnimalSubcategory(myli);
});

function populateAmimalSubcategory(myli) {
    $.getJSON('./includes/browsedata/animalsubcat.php', {
        animalcategory: $('#ucHidden').val()
    }, function (data) {
        $(myli).append("<ul class='animalsubcat'></ul>");
        $.each(data, function (val, text) {
            $(".animalsubcat", myli).append("<li><a href='#' id='" + this.use_subcategory + "'>" + this.use_subcategory + "</a></li>");
        });
    });
} 
```

# file-upload - 文件上传后使用催化剂提交，控制进入新页面。如何防止这种情况

> ID：14261161
> 
> 赞同：0
> 
> 时间：2013-01-10T15:18:30.833
> 
> 标签：file-upload, catalyst

我已经写了“fileUpload.tt”和“Site.pm”来上传文件（粘贴在下面）。它将文件上传到“/tmp”目录，但问题是，在上传文件后，它会进入带有 URL (XXX/MySite/uploadFile) 的空白屏幕。我希望它在同一个屏幕上，并且应该允许我上传另一个文件。我尝试在中给出“onsubmit="return false;"，然后它甚至没有上传文件。请让我知道如何做到这一点..

文件上传.tt：

```
<form action="/MySite/uploadFile" method="post" enctype="multipart/form-data">
    <input type="hidden" name="form_submit" value="yes">
    <input type="file" name="my_file">
    <input type="submit" value="Send">
</form> 
```

网站.pm:

```
sub uploadFile :Local :Args(0){
    my ( $self, $c ) = @_;

    if ( $c->request->parameters->{form_submit} eq 'yes' ) {
        if ( my $upload = $c->request->upload('my_file') ) {
            my $basename = $upload->basename;
            my $target   = "/tmp/$basename";
            $upload->copy_to($target) )
        }
    } 
```

$c->stash->{'template'} = 'fileUpload.tt'; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:10:55.393

您在 Site.pm 中的 uploadFile 方法应以如下行结束：

```
$c->res->redirect($c->uri_for('/your-upload-page-location')); 
```

...以便在调用上传处理操作后，将浏览器定向回原始页面以在需要时重复该过程。目前 uploadFile 操作没有关于下一步做什么的说明。

'your-upload-page-location' 显然是首先呈现表单的操作。

希望有帮助。

# actionscript-3 - 全屏模式问题

> ID：14261165
> 
> 赞同：0
> 
> 时间：2013-01-10T15:18:49.117
> 
> 标签：actionscript-3, flash

您好，我有一个显示视频的简单应用程序，然后用户将用鼠标将其擦除，并显示如下消息：在正常模式下一切正常，但在全屏模式下这是我的代码有帮助吗？

```
package  {

    import flash.display.MovieClip;
    import flash.display.Graphics;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.events.Event;
    import flash.events.MouseEvent; 
    import flash.display.StageScaleMode;
    import flash.display.StageAlign;
    import flash.display.StageDisplayState;
    import flash.events.FullScreenEvent;

    public class MaskTestMain extends MovieClip {

        private var enableMasking:Boolean = true; //set this to false to turn off masking and just draw lines
        private var tempGraphics:Graphics;

        public function MaskTestMain() {

            if(stage) init(null);
            else this.addEventListener(Event.ADDED_TO_STAGE, init);

            video.visible = false;
            objectToMask_mc.visible = false;
        }
        private function init(event:Event)
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;
            stage.addEventListener(Event.RESIZE, onResizeHandler);
            onResizeHandler(null);
            startButton.addEventListener(MouseEvent.CLICK, goFullScreenAndStartDraw)
        }
        private function goFullScreenAndStartDraw(event:MouseEvent):void
        {
            stage.displayState = StageDisplayState.FULL_SCREEN;
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            startButton.visible = false;
            video.visible = true;
            objectToMask_mc.visible = true;
            video.v.play();
            updateMask();
            tempGraphics = drawingBoard_mc.graphics;
            tempGraphics.clear();
            tempGraphics.lineStyle(200, 0xff0000, 1); 
            stage.addEventListener(MouseEvent.MOUSE_DOWN, onStartDrawing);
            stage.addEventListener(FullScreenEvent.FULL_SCREEN, onFullScreenChange);
            stage.addEventListener(MouseEvent.MOUSE_UP, onStopDrawing);
        }
        private function onFullScreenChange(event:FullScreenEvent):void
        {
                onResizeHandler(null);

        }
        private function onResizeHandler(event:Event):void
        {
            drawingBoard_mc.x = 0;
            maskHolder_mc.y = 0;
            trace("onResizeHandler");
            drawingBoard_mc.x = drawingBoard_mc.y = 0;

            startButton.x = stage.stageWidth/2;
            startButton.y = stage.stageHeight/2;

            maskHolder_mc.x = maskHolder_mc.y = 0;
            video.height = stage.stageHeight;
            video.scaleX = video.scaleY;
            video.x = stage.stageWidth/2 -  video.width/2;
            video.y = 0;

            objectToMask_mc.x = video.x;
            objectToMask_mc.y = video.y;
            objectToMask_mc.width = video.width + 150;
            objectToMask_mc.height = video.height +180;

        }
        //- start drawing lines:
         function onStartDrawing(e:MouseEvent):void {
            tempGraphics.moveTo(mouseX, mouseY);
            addEventListener(Event.ENTER_FRAME, onDrawFrame);
        }

        //- stop drawing lines:
         private function onStopDrawing(e:MouseEvent):void {
            removeEventListener(Event.ENTER_FRAME, onDrawFrame);
        }                   

        //- called on every frame while drawing - draws the next line and calls masking function:
        private function onDrawFrame(e:Event):void {
            tempGraphics.lineTo(mouseX, mouseY);    
            updateMask(); 
        }       

        //- when masking is enabled, this uses the dynamic lines to create a mask:
        private function updateMask():void {
            if (enableMasking) {
                //remove all old masks from the maskHolder:
                while (maskHolder_mc.numChildren > 0) {
                    maskHolder_mc.removeChildAt(0);
                }

                objectToMask_mc.mask = null; //clear the previous mask form the object

                //parameters of bitmapData MUST be set to: ([width], [height], true, 0) to get the transparency correct:
                var myBitmapData:BitmapData = new BitmapData(stage.stageWidth, stage.stageHeight, true, 0);

                drawingBoard_mc.visible = true; //make this visible for creating the bitmap 
                myBitmapData.draw(drawingBoard_mc); //create a bitmap copy of the drawing board
                drawingBoard_mc.visible = false; //hide the drawing board again
                var printBitmap:Bitmap = new Bitmap(myBitmapData); //create a bitmap from the bitmap data
                printBitmap.smoothing = true; //optional
                var maskClip:MovieClip = new MovieClip; //create a movieclip to act as the new mask
                maskClip.addChild(printBitmap); //add the bitmap copy of the drawing board to the new mask movieclip
                maskClip.cacheAsBitmap = true; //IMPORTANT: mask movieclip cacheAsBitmap = true or this doesn't work
                maskHolder_mc.addChild(maskClip); //add the new mask to the maskHolder
                objectToMask_mc.cacheAsBitmap = true; //IMPORTANT: masked movieclip cacheAsBitmap = true or this doesn't work
                objectToMask_mc.mask = maskClip; //set our new mask on the object 
            }
        }                   

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:19:37.390

只需制作一个全屏按钮，将它们发送到 swf 页面，这是一个不同的 swf，可以将它们发送到上一页，swf 文件会自动全屏显示。

不过，这只是一种方式。看看视频下的组件部分，如果您无法通过代码完成此操作，请尝试

# c - 并行化 BLAKE

> ID：14261171
> 
> 赞同：1
> 
> 时间：2013-01-10T15:19:06.837
> 
> 标签：c, openmp

我在使用 OMP并行化[BLAKE时遇到了很大的问题。](http://en.wikipedia.org/wiki/BLAKE_(hash_function))他们在规范中建议可以并行化“列步骤”和“对角步骤”。我尝试这样做，但结果与我预期的相反（比单线程慢 10 倍）。我需要更有经验的 OMP 用户的帮助，因为现在我不知道如何并行化这个循环:(

更新：

我知道 BLAKE 的作者发布了 BLAKE2，它是 BLAKE 的改进（更快）版本，但它的实现（树哈希）与 BLAKE 不同，这对我来说很难理解。我的任务是比较使用 OMP 的单线程和多线程实现。所以我尝试在我理解的实现上做到这一点。我不是 OMP 专家，我想以最简单的方式使 BLAKE 多线程。即使性能可能不会更好，我也必须使用 OMP 进行适当的实施。（对不起我的英语，我希望你能理解我）这是我的代码的一部分：

```
 #pragma omp parallel shared(n)
  {
 for(round=0; round<n; ++round) 
 {
/* column step, I want to run this 4 G32 functions in parallel, but don't know,
   that is proper approach to this problem */
        #pragma omp critical 
     G32( 0, 4, 8,12, 0);
        #pragma omp critical 
     G32( 1, 5, 9,13, 1);
        #pragma omp critical 
     G32( 2, 6,10,14, 2);
        #pragma omp critical 
     G32( 3, 7,11,15, 3);    

/* diagonal step, and same here */
        #pragma omp critical 
     G32( 0, 5,10,15, 4);
        #pragma omp critical 
     G32( 1, 6,11,12, 5);
        #pragma omp critical 
     G32( 2, 7, 8,13, 6);
        #pragma omp critical 
     G32( 3, 4, 9,14, 7);
}
} 
```

这是 G32 功能：

```
#define G32(a,b,c,d,i)\
 do { \
v[a] = ADD32(v[a],v[b])+XOR32(m[sigma[round][2*i]], c32[sigma[round][2*i+1]]);\
v[d] = ROT32(XOR32(v[d],v[a]),16);\
v[c] = ADD32(v[c],v[d]);\
v[b] = ROT32(XOR32(v[b],v[c]),12);\
v[a] = ADD32(v[a],v[b])+XOR32(m[sigma[round][2*i+1]], c32[sigma[round][2*i]]);\
v[d] = ROT32(XOR32(v[d],v[a]), 8);\
v[c] = ADD32(v[c],v[d]);\
v[b] = ROT32(XOR32(v[b],v[c]), 7);\
} while (0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:53:41.777

我认为他们想到的那种并行化是在现代 CPU 下利用 SIMD 指令。在这种情况下，OMP 式并行化的问题有两个：

*   G32 任务太“小”或“短”，因此在不同线程中启动任务和加入任务的开销相比之下太大了。
*   错误共享：任务中读取和修改的内存位置靠得太近。他们可能共享一个缓存行。这很糟糕，因为这需要特殊的同步并使来自不同线程的读/写非常慢。

# css - 将 :active 伪类与 css 转换一起使用？

> ID：14261178
> 
> 赞同：0
> 
> 时间：2013-01-10T15:19:19.303
> 
> 标签：css, css-transitions, pseudo-class

我正在制作一个链接，当点击链接时，它会向下移动几个像素。我希望这是一个动画，所以我添加了 CSS 过渡。现在我遇到的问题是当我按下按钮时，它没有完成动画。只要我按住鼠标按钮，它就会动画。

所以我想要的是链接完成它的动画，然后回到正常位置。（这意味着我不能使用 :visited 因为它不会恢复正常）。

这是我为澄清我的问题而制作的小提琴：

[http://jsfiddle.net/SywZV/](http://jsfiddle.net/SywZV/)

这是我正在使用的代码：

css

```
.button
{
    font-size: 132px;
    font-family: helvetica, sans;
    font-weight: bold;
    text-shadow: 0px 7px 0px #3b6e62;
    color: #f2b191;
    text-align:center;
    padding-top: 46px;
    padding-top:0px;
    -webkit-transition: all 0.4s ease-in-out; -moz-transition: all 0.4s ease-in-out; -ms-transition: all 0.4s ease-in-out; -o-transition: all 0.4s ease-in-out; transition: all 0.4s ease-in-out;
}
.button:hover {padding-top:3px; text-shadow: 0px 4px 0px #3b6e62;}
.button:active {padding-top:7px; text-shadow: 0px 0px 0px #3b6e62;} 
```

html

```
<div class="button">This is a button</div> 
```

我愿意用 jquery 解决问题，但我不是专家。

我只是想出了一个使用jQuery的方法。但是，我不确定这是正确的方法。动画不像 css 伪类那样流畅。

有人对此有什么要补充的吗？

```
$('.button').hover(function(){
      $(this).css({'top': '3px', 'text-shadow': '0px 4px 0px #3b6e62'});
    }); 
    $('.button').click(function(){
      $(this).css({'top': '7px', 'text-shadow': '0px 0px 0px #3b6e62'});
    });  
    $('.button').mouseout(function(){
      $(this).css({'top': '0px', 'text-shadow': '0px 7px 0px #3b6e62'});
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:41:49.693

据我所知，目前仍然不可能将点击事件绑定到 css。使用 Javascript/jQuery 可以轻松完成这项工作。

您需要做的就是在单击元素时应用给定的类。我刚刚在你的 CSS 上更改了一个类的名称，就像这样

```
.button-active {padding-top:7px; text-shadow: 0px 0px 0px #3b6e62 !important;} 
```

并在单击元素后将其应用于 div 像这样

```
$('.button').click(function(){
     $(this).addClass('button-active');
}); 
```

看看[这个](http://jsbin.com/uneden/2)箱子。

在我的示例中，我使用的是 jQuery。需要注意的是，如果你打算只在这个动画中使用它，你最好使用纯Js，而不是包含一个完整的库来实现这样一个简单的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T22:32:45.183

您可以在单击时向元素添加一个类，然后在延迟后删除该类。这与您的 CSS 过渡相结合将实现动画效果，而无需用户按住鼠标按钮。

您的 CSS 的唯一更改来自：

```
.button:active { padding-top: 7px; text-shadow: 0 0 0 #3b6e62; } 
```

到（注意类“按下”而不是活动伪类）：

```
.button.pressed { padding-top: 7px; text-shadow: 0 0 0 #3b6e62; } 
```

**仅限 JavaScript**

[http://jsfiddle.net/SywZV/8/](http://jsfiddle.net/SywZV/8/)

```
document.addEventListener('DOMContentLoaded', function () {
    var buttons = document.querySelectorAll('DIV.button');

    for (var i = 0, max = buttons.length; i < max; i++) {
        buttons[i].addEventListener('click', addPressedClass);
    }

    function addPressedClass(e) {
        var btn = e.target;
        btn.classList.add('pressed');
        setTimeout(function () {
            btn.classList.remove('pressed');
        }, 400);
    }
}, false); 
```

**jQuery**

[http://jsfiddle.net/SywZV/9/](http://jsfiddle.net/SywZV/9/)

```
$(function () {
    $('DIV.button').click(function () {
        var $btn = $(this);
        $btn.addClass('pressed');
        setTimeout(function () {
            $btn.removeClass('pressed');
        }, 400);
    });
}); 
```

在尝试模拟时我需要做同样的事情

## 使用 HTML5 和 CSS3 的 Google 材质按钮效果：

[http://jsfiddle.net/FBDhR/4/](http://jsfiddle.net/FBDhR/4/)

[http://www.google.com/design/spec/components/buttons.html#buttons-main-buttons](http://www.google.com/design/spec/components/buttons.html#buttons-main-buttons)

# ios - 需要更好、更简单地理解 CATransform3D

> ID：14261180
> 
> 赞同：20
> 
> 时间：2013-01-10T15:19:25.340
> 
> 标签：ios, calayer, caanimation, catransform3d

请浏览图片。

![初始位置](../Images/511d091db48a2f6afd732793504c75fd.png) ![旋转后](../Images/0484a191c353f56c1dcf296afdeccbea.png)

所以这是我从一些在线资源获得的代码，它确实改变了我的对象。除此之外，我什么都不懂。我是 CATransform3D 的新手，想知道它是如何工作的。

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -500;
transform = CATransform3DRotate(transform, 45.0f * M_PI / 180.0f, 0, 1, 0.0f);
_bgView.layer.transform = transform; 
```

我想知道这段代码是如何运行的？为什么我们要在 m34 中设置一些值？我发现它是某种矩阵，甚至让我更加困惑。**另外， CATransform3DRotate**中的参数是什么 意思？？？

我试图理解但没有进一步了解。

我想深入了解 CATransform3D。请帮助任何文章，文档或解释自己。

非常感谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-10T15:49:35.327

我不确定什么`m34`是不看。

2D 旋转很容易，因为它所需要的只是一个旋转角度。然后围绕 Z 轴（即直接指向屏幕外的轴）进行旋转。

3D 旋转是不同的。它需要一个角度，但也需要知道您围绕哪个轴（或多个轴）旋转。

在`CATransform3DRotate`你给它五个参数......

1.  要对其应用旋转的变换。
2.  角度（以弧度为单位） π 弧度 = 180 度 3、4 和 5 是应用于每个轴的角度旋转量。

3.  X 轴 - 这是从屏幕左侧到屏幕右侧的轴。

4.  Y 轴 - 这是从屏幕顶部到屏幕底部的轴。
5.  Z 轴 - 这是直接从屏幕指向您的轴。

您在示例中应用的旋转如下...

角度 = 45 度（转换为弧度）。X = 0 Y = 1 Z = 0

这意味着所有 45 度都将围绕 Y 轴旋转。即它会像旋转门一样绕着中间的线旋转。

如果你有参数......最后是“1,0,0”，那么它会像桨船桨一样旋转。“离你而去。”

最后，如果你有“0, 0, 1”，它会像屏幕上的凯瑟琳轮一样旋转。

您还可以组合这些值，即具有“0、1、1”以应用围绕两个轴的旋转。

矩阵的 w 行是透视投影。你有没有在学校做过透视图，你放置一个点并从点画线，然后画出适合这些线的东西来给它透视？那么 m34 值决定了该点的位置，因此提供了透视。将其设置为 -50 之类的值，您会看到更大的差异。

设置 m34 与该点的 Z 轴值有关。所以该点位于 (0, 0, -1/500)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T15:55:49.383

该`m34`值是第三行第四列，是实际给出旋转透视图的变换后面的矩阵中的值。

您可以在 Wikipedia 上阅读更多关于矩阵乘法背后的数学知识。

*   [变换矩阵](http://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection)
*   [3D 透视](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)

关于 的值`CATransform3DRotate(...)`。

*   第一个参数是您正在旋转的变换
*   第二个是角度（以弧度为单位），
*   其他三个参数是您正在旋转的轴（（x，y，z）向量）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-13T07:48:37.220

这是我在 Swift [https://github.com/paulz/PerspectiveTransform](https://github.com/paulz/PerspectiveTransform)中的项目，它有助于计算 CATransform3D 并包括示例应用程序和游乐场。

[![动画变换](../Images/18b3cb9aac0700ac15819d8c90d0f7f2.png)](https://i.stack.imgur.com/kcZUm.gif)

它可用于动画 CALayer 变换属性。

[![拟合多边形](../Images/df9f18a3cb5d7928984c3cc99862be41.png)](https://i.stack.imgur.com/mPsMU.jpg)

有关构造矩阵和其他可能解决方案的详细信息，请参见 wiki：[https ://github.com/paulz/PerspectiveTransform/wiki。](https://github.com/paulz/PerspectiveTransform/wiki)

[![矩阵计算](../Images/9bea722c89f7aacc8f9fd595e594d46d.png)](https://i.stack.imgur.com/mgjnW.png)

谢谢你的这个问题，它帮助我开始我的项目，不仅知道我有这个问题！

# c++ - 如何对可变参数模板函数的异构参数包进行通用计算？

> ID：14261183
> 
> 赞同：77
> 
> 时间：2013-01-10T15:19:29.680
> 
> 标签：c++, c++11, iteration, variadic-templates, template-meta-programming

**前提：**

在玩了一些可变参数模板之后，我意识到实现任何稍微超出琐碎的元编程任务的事情很快就会变得非常麻烦。特别是，我发现自己希望有一种方法可以**对参数包执行通用操作，**例如以类似方式的iterate *、* split *、* loop*等等*`std::for_each`。

在观看了来自 C++ 和 Beyond 2012[的 Andrei Alexandrescu的关于对 C++ 的可取性（从](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer%20I%20have)[D 编程语言](http://dlang.org/index.html)`static if`中借用的结构）的讲座之后，我感觉某种东西也会派上用场 - 我觉得更多这些结构可以带来好处。`static for``static`

所以我开始想知道是否有一种方法可以为可变参数模板函数（*伪代码）的参数包实现***类似**的功能：

 *```
template<typename... Ts>
void my_function(Ts&&... args)
{
    static for (int i = 0; i < sizeof...(args); i++) // PSEUDO-CODE!
    {
        foo(nth_value_of<i>(args));
    }
} 
```

这会*在编译时*被翻译成这样的：

```
template<typename... Ts>
void my_function(Ts&&... args)
{
    foo(nth_value_of<0>(args));
    foo(nth_value_of<1>(args));
    // ...
    foo(nth_value_of<sizeof...(args) - 1>(args));
} 
```

原则上，`static_for`将允许更精细的处理：

```
template<typename... Ts>
void foo(Ts&&... args)
{
    constexpr s = sizeof...(args);

    static for (int i = 0; i < s / 2; i++)
    {
        // Do something
        foo(nth_value_of<i>(args));
    }

    static for (int i = s / 2; i < s; i++)
    {
        // Do something different
        bar(nth_value_of<i>(args));
    }
} 
```

或者像这样一个更具表现力的成语：

```
template<typename... Ts>
void foo(Ts&&... args)
{
    static for_each (auto&& x : args)
    {
        foo(x);
    }
} 
```

**相关工作：**

我在网上做了一些搜索，发现确实存在*一些东西：*

*   [此链接](http://blog.shandyba.com/2009/12/17/converting-variadic-template-arguments-pack-to-boost-mpl-sequence/)描述了如何将参数包转换为 Boost.MPL 向量，但这只是实现目标的一半（如果不是更少）；
*   [这个关于 SO](https://stackoverflow.com/questions/5484930/split-variadic-template-arguments)的问题似乎需要一个类似且稍微相关的元编程功能（将参数包分成两半） - 实际上，有几个关于 SO 的问题似乎与这个问题有关，但我没有一个答案已阅读，恕我直言，令人满意地解决了它；
*   [Boost.Fusion](http://www.boost.org/libs/fusion/)定义了将参数包转换为*tuple*的算法，但我更喜欢：
    1.  不要创建**不必要的临时**变量来保存可以（并且应该）完美地转发给某些通用算法的参数；
    2.  有一个**小型的、独立的**库来做到这一点，而 Boost.Fusion 可能包含比解决这个问题所需的更多的东西。

**问题：**

有没有一种相对简单的方法，可能通过一些模板元编程来实现我正在寻找的东西，而不会受到现有方法的限制？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-10T15:19:29.680

由于我对自己的发现不满意，因此我尝试自己制定解决方案，并最终编写了一个**小型库**，该库允许在参数包上制定通用操作。我的解决方案具有以下特点：

*   允许迭代参数包的所有或*部分*元素，可能通过*计算*它们在包上的索引来指定；
*   允许将参数包的计算部分转发到可变函子；
*   只需要包含一个相对较短的头文件；
*   广泛使用完美转发以允许大量内联并避免不必要的复制/移动以最小化性能损失；
*   迭代算法的内部实现依赖于空基类优化来最小化内存消耗；
*   扩展和适应很容易（相对而言，考虑到它是模板元编程）。

我将首先展示该库**可以做什么**，*然后*发布它的**实现**。

**用例**

这是一个如何使用`for_each_in_arg_pack()`函数迭代包的所有参数并将输入中的每个参数传递给某些客户端提供的仿函数的示例（当然，如果参数包包含值，仿函数必须具有通用调用运算符异构类型）：

```
// Simple functor with a generic call operator that prints its input. This is used by the
// following functors and by some demonstrative test cases in the main() routine.
struct print
{
    template<typename T>
    void operator () (T&& t)
    {
        cout << t << endl;
    }
};

// This shows how a for_each_*** helper can be used inside a variadic template function
template<typename... Ts>
void print_all(Ts&&... args)
{
    for_each_in_arg_pack(print(), forward<Ts>(args)...);
} 
```

上面的`print`仿函数也可以用于更复杂的计算。特别是，以下是如何迭代包中参数的**子集**（在本例中为*sub-range*）：

```
// Shows how to select portions of an argument pack and 
// invoke a functor for each of the selected elements
template<typename... Ts>
void split_and_print(Ts&&... args)
{
    constexpr size_t packSize = sizeof...(args);
    constexpr size_t halfSize = packSize / 2;

    cout << "Printing first half:" << endl;
    for_each_in_arg_pack_subset(
        print(), // The functor to invoke for each element
        index_range<0, halfSize>(), // The indices to select
        forward<Ts>(args)... // The argument pack
        );

    cout << "Printing second half:" << endl;
    for_each_in_arg_pack_subset(
        print(), // The functor to invoke for each element
        index_range<halfSize, packSize>(), // The indices to select
        forward<Ts>(args)... // The argument pack
        );
} 
```

有时，人们可能只想将参数包**的一部分转发**给其他可变参数函子，而不是遍历其元素并将每个元素*单独*传递给非可变参数函子。这是`forward_subpack()`算法允许做的事情：

```
// Functor with variadic call operator that shows the usage of for_each_*** 
// to print all the arguments of a heterogeneous pack
struct my_func
{
    template<typename... Ts>
    void operator ()(Ts&&... args)
    {
        print_all(forward<Ts>(args)...);
    }
};

// Shows how to forward only a portion of an argument pack 
// to another variadic functor
template<typename... Ts>
void split_and_print(Ts&&... args)
{
    constexpr size_t packSize = sizeof...(args);
    constexpr size_t halfSize = packSize / 2;

    cout << "Printing first half:" << endl;
    forward_subpack(my_func(), index_range<0, halfSize>(), forward<Ts>(args)...);

    cout << "Printing second half:" << endl;
    forward_subpack(my_func(), index_range<halfSize, packSize>(), forward<Ts>(args)...);
} 
```

对于更具体的任务，当然可以通过**索引**包中的特定参数来检索它们。这是`nth_value_of()`函数允许做的事情，连同它的助手`first_value_of()`和`last_value_of()`：

```
// Shows that arguments in a pack can be indexed
template<unsigned I, typename... Ts>
void print_first_last_and_indexed(Ts&&... args)
{
    cout << "First argument: " << first_value_of(forward<Ts>(args)...) << endl;
    cout << "Last argument: " << last_value_of(forward<Ts>(args)...) << endl;
    cout << "Argument #" << I << ": " << nth_value_of<I>(forward<Ts>(args)...) << endl;
} 
```

另一方面，如果参数包是**同质的（即所有参数都具有相同的类型），则下面的公式可能更可取。**元函数允许确定参数包中的`is_homogeneous_pack<>`所有类型是否都是同质的，主要用于`static_assert()`语句中：

```
// Shows the use of range-based for loops to iterate over a
// homogeneous argument pack
template<typename... Ts>
void print_all(Ts&&... args)
{
    static_assert(
        is_homogeneous_pack<Ts...>::value, 
        "Template parameter pack not homogeneous!"
        );

    for (auto&& x : { args... })
    {
        // Do something with x...
    }

    cout << endl;
} 
```

最后，由于**lambda**只是函子的*语法糖*，它们也可以与上述算法结合使用；但是，在C++ 支持**泛型 lambda**之前，这仅适用于*同构*参数包。以下示例还显示了`homogeneous-type<>`元函数的用法，它返回同质包中所有参数的类型：

```
 // ...
 static_assert(
     is_homogeneous_pack<Ts...>::value, 
     "Template parameter pack not homogeneous!"
     );
 using type = homogeneous_type<Ts...>::type;
 for_each_in_arg_pack([] (type const& x) { cout << x << endl; }, forward<Ts>(args)...); 
```

这基本上是图书馆允许做的事情，但我相信**它甚至可以扩展**到执行更复杂的任务。

**执行**

现在是实现，这本身有点棘手，所以我将依靠注释来解释代码并避免使这篇文章太长（也许它已经是）：

```
#include <type_traits>
#include <utility>

//===============================================================================
// META-FUNCTIONS FOR EXTRACTING THE n-th TYPE OF A PARAMETER PACK

// Declare primary template
template<int I, typename... Ts>
struct nth_type_of
{
};

// Base step
template<typename T, typename... Ts>
struct nth_type_of<0, T, Ts...>
{
    using type = T;
};

// Induction step
template<int I, typename T, typename... Ts>
struct nth_type_of<I, T, Ts...>
{
    using type = typename nth_type_of<I - 1, Ts...>::type;
};

// Helper meta-function for retrieving the first type in a parameter pack
template<typename... Ts>
struct first_type_of
{
    using type = typename nth_type_of<0, Ts...>::type;
};

// Helper meta-function for retrieving the last type in a parameter pack
template<typename... Ts>
struct last_type_of
{
    using type = typename nth_type_of<sizeof...(Ts) - 1, Ts...>::type;
};

//===============================================================================
// FUNCTIONS FOR EXTRACTING THE n-th VALUE OF AN ARGUMENT PACK

// Base step
template<int I, typename T, typename... Ts>
auto nth_value_of(T&& t, Ts&&... args) ->
    typename std::enable_if<(I == 0), decltype(std::forward<T>(t))>::type
{
    return std::forward<T>(t);
}

// Induction step
template<int I, typename T, typename... Ts>
auto nth_value_of(T&& t, Ts&&... args) ->
    typename std::enable_if<(I > 0), decltype(
        std::forward<typename nth_type_of<I, T, Ts...>::type>(
            std::declval<typename nth_type_of<I, T, Ts...>::type>()
            )
        )>::type
{
    using return_type = typename nth_type_of<I, T, Ts...>::type;
    return std::forward<return_type>(nth_value_of<I - 1>((std::forward<Ts>(args))...));
}

// Helper function for retrieving the first value of an argument pack
template<typename... Ts>
auto first_value_of(Ts&&... args) ->
    decltype(
        std::forward<typename first_type_of<Ts...>::type>(
            std::declval<typename first_type_of<Ts...>::type>()
            )
        )
{
    using return_type = typename first_type_of<Ts...>::type;
    return std::forward<return_type>(nth_value_of<0>((std::forward<Ts>(args))...));
}

// Helper function for retrieving the last value of an argument pack
template<typename... Ts>
auto last_value_of(Ts&&... args) ->
    decltype(
        std::forward<typename last_type_of<Ts...>::type>(
            std::declval<typename last_type_of<Ts...>::type>()
            )
        )
{
    using return_type = typename last_type_of<Ts...>::type;
    return std::forward<return_type>(nth_value_of<sizeof...(Ts) - 1>((std::forward<Ts>(args))...));
}

//===============================================================================
// METAFUNCTION FOR COMPUTING THE UNDERLYING TYPE OF HOMOGENEOUS PARAMETER PACKS

// Used as the underlying type of non-homogeneous parameter packs
struct null_type
{
};

// Declare primary template
template<typename... Ts>
struct homogeneous_type;

// Base step
template<typename T>
struct homogeneous_type<T>
{
    using type = T;
    static const bool isHomogeneous = true;
};

// Induction step
template<typename T, typename... Ts>
struct homogeneous_type<T, Ts...>
{
    // The underlying type of the tail of the parameter pack
    using type_of_remaining_parameters = typename homogeneous_type<Ts...>::type;

    // True if each parameter in the pack has the same type
    static const bool isHomogeneous = std::is_same<T, type_of_remaining_parameters>::value;

    // If isHomogeneous is "false", the underlying type is the fictitious null_type
    using type = typename std::conditional<isHomogeneous, T, null_type>::type;
};

// Meta-function to determine if a parameter pack is homogeneous
template<typename... Ts>
struct is_homogeneous_pack
{
    static const bool value = homogeneous_type<Ts...>::isHomogeneous;
};

//===============================================================================
// META-FUNCTIONS FOR CREATING INDEX LISTS

// The structure that encapsulates index lists
template <unsigned... Is>
struct index_list
{
};

// Collects internal details for generating index ranges [MIN, MAX)
namespace detail
{
    // Declare primary template for index range builder
    template <unsigned MIN, unsigned N, unsigned... Is>
    struct range_builder;

    // Base step
    template <unsigned MIN, unsigned... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    // Induction step
    template <unsigned MIN, unsigned N, unsigned... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    {
    };
}

// Meta-function that returns a [MIN, MAX) index range
template<unsigned MIN, unsigned MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type;

//===============================================================================
// CLASSES AND FUNCTIONS FOR REALIZING LOOPS ON ARGUMENT PACKS

// Implementation inspired by @jogojapan's answer to this question:
// http://stackoverflow.com/questions/14089637/return-several-arguments-for-another-function-by-a-single-function

// Collects internal details for implementing functor invocation
namespace detail
{
    // Functor invocation is realized through variadic inheritance.
    // The constructor of each base class invokes an input functor.
    // An functor invoker for an argument pack has one base class
    // for each argument in the pack

    // Realizes the invocation of the functor for one parameter
    template<unsigned I, typename T>
    struct invoker_base
    {
        template<typename F, typename U>
        invoker_base(F&& f, U&& u) { f(u); }
    };

    // Necessary because a class cannot inherit the same class twice
    template<unsigned I, typename T>
    struct indexed_type
    {
        static const unsigned int index = I;
        using type = T;
    };

    // The functor invoker: inherits from a list of base classes.
    // The constructor of each of these classes invokes the input
    // functor with one of the arguments in the pack.
    template<typename... Ts>
    struct invoker : public invoker_base<Ts::index, typename Ts::type>...
    {
        template<typename F, typename... Us>
        invoker(F&& f, Us&&... args)
            :
            invoker_base<Ts::index, typename Ts::type>(std::forward<F>(f), std::forward<Us>(args))...
        {
        }
    };
}

// The functor provided in the first argument is invoked for each
// argument in the pack whose index is contained in the index list
// specified in the second argument
template<typename F, unsigned... Is, typename... Ts>
void for_each_in_arg_pack_subset(F&& f, index_list<Is...> const& i, Ts&&... args)
{
    // Constructors of invoker's sub-objects will invoke the functor.
    // Note that argument types must be paired with numbers because the
    // implementation is based on inheritance, and one class cannot
    // inherit the same base class twice.
    detail::invoker<detail::indexed_type<Is, typename nth_type_of<Is, Ts...>::type>...> invoker(
        f,
        (nth_value_of<Is>(std::forward<Ts>(args)...))...
        );
}

// The functor provided in the first argument is invoked for each
// argument in the pack
template<typename F, typename... Ts>
void for_each_in_arg_pack(F&& f, Ts&&... args)
{
    for_each_in_arg_pack_subset(f, index_range<0, sizeof...(Ts)>(), std::forward<Ts>(args)...);
}

// The functor provided in the first argument is given in input the
// arguments in whose index is contained in the index list specified
// as the second argument.
template<typename F, unsigned... Is, typename... Ts>
void forward_subpack(F&& f, index_list<Is...> const& i, Ts&&... args)
{
    f((nth_value_of<Is>(std::forward<Ts>(args)...))...);
}

// The functor provided in the first argument is given in input all the
// arguments in the pack.
template<typename F, typename... Ts>
void forward_pack(F&& f, Ts&&... args)
{
    f(std::forward<Ts>(args)...);
} 
```

**结论**

当然，即使我对这个问题提供了自己的答案（实际上是*因为*这个事实），我很想知道是否存在我错过的替代或更好的解决方案——除了“相关作品”部分中提到的那些的问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-10T19:17:25.950

让我根据讨论发布这段代码：

```
#include <initializer_list>
#define EXPAND(EXPR) std::initializer_list<int>{((EXPR),0)...}

// Example of use:
#include <iostream>
#include <utility>

void print(int i){std::cout << "int: " << i << '\n';}
int print(double d){std::cout << "double: " << d << '\n';return 2;}

template<class...T> void f(T&&...args){
  EXPAND(print(std::forward<T>(args)));
}

int main(){
  f();
  f(1,2.,3);
} 
```

我检查了生成的代码，`g++ -std=c++11 -O1`只`main`包含 3 次调用`print`，没有扩展助手的踪迹。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T16:56:56.050

使用*枚举*解决方案（ala Python）。

用法：

```
void fun(int i, size_t index, size_t size) {
    if (index != 0) {
        std::cout << ", ";
    }

    std::cout << i;

    if (index == size - 1) {
        std::cout << "\n";
    }
} // fun

enumerate(fun, 2, 3, 4);

// Expected output: "2, 3, 4\n"
// check it at: http://liveworkspace.org/code/1cydbw$4 
```

代码：

```
// Fun: expects a callable of 3 parameters: Arg, size_t, size_t
// Arg: forwarded argument
// size_t: index of current argument
// size_t: number of arguments
template <typename Fun, typename... Args, size_t... Is>
void enumerate_impl(Fun&& fun, index_list<Is...>, Args&&... args) {
    std::initializer_list<int> _{
        (fun(std::forward<Args>(args), Is, sizeof...(Is)), 0)...
    };
    (void)_; // placate compiler, only the side-effects interest us
}

template <typename Fun, typename... Args>
void enumerate(Fun&& fun, Args&&... args) {
    enumerate_impl(fun,
                   index_range<0, sizeof...(args)>(),
                   std::forward<Args>(args)...);
} 
```

范围生成器（从您的解决方案中窃取）：

```
// The structure that encapsulates index lists
template <size_t... Is>
struct index_list
{
};

// Collects internal details for generating index ranges [MIN, MAX)
namespace detail
{
    // Declare primary template for index range builder
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder;

    // Base step
    template <size_t MIN, size_t... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    // Induction step
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    {
    };
}

// Meta-function that returns a [MIN, MAX) index range
template<size_t MIN, size_t MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T21:56:06.660

在阅读了一些其他帖子并修改了一段时间后，我想出了以下内容（有点类似于上面，但实现有点不同）。我使用 Visual Studio 2013 编译器编写了这个。

使用 lambda 表达式的用法 -

```
static_for_each()(
    [](std::string const& str)
    {
        std::cout << str << std::endl;
    }, "Hello, ", "Lambda!"); 
```

使用 lambda 的缺点是参数必须与 lambda 的参数列表中声明的类型相同。这意味着它只适用于一种类型。如果要使用模板化函数，可以使用下一个示例。

使用结构包装函子的用法 -

```
struct print_wrapper
{
    template <typename T>
    void operator()(T&& str)
    {
        std::cout << str << " ";
    }
};

// 
// A little test object we can use.
struct test_object
{
    test_object() : str("I'm a test object!") {}
    std::string str;
};

std::ostream& operator<<(std::ostream& os, test_object t)
{
    os << t.str;
    return os;
}

//
// prints: "Hello, Functor! 1 2 I'm a test object!"
static_for_each()(print_wrapper(), "Hello,", "Functor!", 1, 2.0f, test_object()); 
```

这允许您传入任何您想要的类型并使用仿函数对它们进行操作。我发现这很干净，可以很好地满足我的需求。您也可以将它与这样的函数参数包一起使用 -

```
template <typename T, typename... Args>
void call(T f, Args... args)
{
    static_for_each()(f, args...);
}

call(print_wrapper(), "Hello", "Call", "Wrapper!"); 
```

这是实现 -

```
// 
// Statically iterate over a parameter pack 
// and call a functor passing each argument.
struct static_for_each
{
private:
    // 
    // Get the parameter pack argument at index i.
    template <size_t i, typename... Args>
    static auto get_arg(Args&&... as) 
    -> decltype(std::get<i>(std::forward_as_tuple(std::forward<Args>(as)...)))
    {
        return std::get<i>(std::forward_as_tuple(std::forward<Args>(as)...));
    }

    //
    // Recursive template for iterating over 
    // parameter pack and calling the functor.
    template <size_t Start, size_t End>
    struct internal_static_for
    {
        template <typename Functor, typename... Ts>
        void operator()(Functor f, Ts&&... args)
        {
            f(get_arg<Start>(args...));
            internal_static_for<Start + 1, End>()(f, args...);
        }
    };

    //
    // Specialize the template to end the recursion.
    template <size_t End>
    struct internal_static_for<End, End>
    {
        template <typename Functor, typename... Ts>
        void operator()(Functor f, Ts&&... args){}
    };

public:
    // 
    // Publically exposed operator()(). 
    // Handles template recursion over parameter pack.
    // Takes the functor to be executed and a parameter 
    // pack of arguments to pass to the functor, one at a time.
    template<typename Functor, typename... Ts>
    void operator()(Functor f, Ts&&... args)
    {
        // 
        // Statically iterate over parameter
        // pack from the first argument to the
        // last, calling functor f with each 
        // argument in the parameter pack.
        internal_static_for<0u, sizeof...(Ts)>()(f, args...);
    }
}; 
```

希望人们觉得这很有用:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T06:46:26.290

... 符号确实有一些有趣的选项，例如：

```
template<typename T>
int print(const T& x) {
  std::cout << "<" << x << ">";
  return 0;
}

void pass(...) {}

template<typename... TS>
void printall(TS... ts){
  pass(print(ts)...);
} 
```

不幸的是，我不知道有什么方法可以强制执行调用打印函数的顺序（相反，在我的编译器上）。请注意， print 需要返回一些东西。

如果您不关心订单，这个技巧会很有用。*

# ember.js - 模板中的动态值

> ID：14261184
> 
> 赞同：0
> 
> 时间：2013-01-10T15:19:32.113
> 
> 标签：ember.js

我扩展了一个视图（使用 fieldId 生成器函数）并设置了以下模板：

我需要为标签“for attribute”（使用 view.fieldId 计算）和 {{view Em.Textfield ...}} 具有相同的计算 ID

如何在 {{view Em.TextField 表达式..}} 中使用 view.fieldId 设置 id 属性？

还有其他选择吗？

```
template: Ember.Handlebars.compile('<label class="control-label" {{bindAttr for="view.fieldId"}}>{{view.label}}</label>\
                     <div class="controls">\
                     {{view Em.TextField valueBinding="view.value" class="input-large"}}\
                     <span class="help-inline">Something may have gone wrong</span>\
                     </div>') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:07:42.560

解决方法是将 的属性绑定`for`到`<label>`的`elementId`属性上`Ember.TextField`。

`viewName`首先，您必须通过设置其属性为您的 Ember.TextField 命名：

```
{{view Ember.TextField viewName="myTextField"}} 
```

然后，您必须将其绑定`elementId`到`for`属性，使用`bindAttr`：

```
<label {{bindAttr for="view.myTextField.elementId"}}> My label </label> 
```

它有效，只需[在此 JSFiddle 中尝试](http://jsfiddle.net/4ah3z/)。

注意：还有另一种解决方案是`input`将标签嵌套在内部。有关更多信息，请查看[这个 SO 问题：Using Ember.js text field ids for a tag](https://stackoverflow.com/questions/10468164/using-ember-js-text-field-ids-for-a-label-tag)

# django - 无法初始化绑定表单上的 ModelForm 字段？

> ID：14261187
> 
> 赞同：3
> 
> 时间：2013-01-10T15:19:40.533
> 
> 标签：django, django-forms

当我尝试创建一个像

```
MyModelForm(instance=a_model_instance_) 
```

似乎 Django 阻止了表单`__init__`方法中初始模型字段的任何设置，例如：

```
def __init__(self, *args, **kwargs):
    super(MyModelForm, self).__init__(*args, **kwargs)

    if self.instance.pk:
        if self.instance.my_field:
            my_field = self.instance.my_field
        else:
            # show parent's field instead
            my_field = self.instance.parent.my_field

        self.fields['my_field'].initial = my_field 
```

一旦表单绑定到实例，是否有任何理由在表单的`__init__`方法中初始化字段不再起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:27:53.247

我认为您想从其他模型字段值设置字段的初始值，如果它是无：

```
def __init__(self, *args, **kwargs):
    super(MyModelForm, self).__init__(*args, **kwargs)

    if self.instance.pk:
        if not self.initial.get('my_field'):
            self.initial['my_field'] = self.instance.parent.my_field 
```

# sql - 如何向使用 SELECT INTO 创建的表添加一个完整的主键

> ID：14261188
> 
> 赞同：3
> 
> 时间：2013-01-10T15:19:42.233
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我正在使用 SQL Server 2012 并通过以下方式创建表：

```
SELECT x, y
INTO CampRegistration
FROM tableA

UNION

SELECT x, y
FROM tableB 
```

x 和 y 不是主键。我希望`CampRegistration`表有一个额外的列，它是一个完整的代理主键，即。类似的东西`IDENTITY`。

我怎样才能做到这一点，无论是通过修改`SELECT INTO`或添加并填充列之后？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T15:32:48.697

其他答案会添加行号，但不要将其设为键，并且在您想添加新注册时也无济于事。以下是在您运行 SELECT INTO 之后，您可以添加一个 IDENTITY 列并使其成为键的方法：

```
ALTER TABLE dbo.CampRegistration
  ADD RegistrationID INT IDENTITY(1,1);

ALTER TABLE dbo.CampRegistration 
  ADD CONSTRAINT PK_CampRegistration
  PRIMARY KEY (RegistrationID); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:43:32.360

您可以使用该[`IDENTITY`函数](http://msdn.microsoft.com/en-us/library/ms189838.aspx)直接添加具有该`IDENTITY`属性的列。

```
;WITH T
     AS (SELECT x,
                y
         FROM   tableA
         UNION
         SELECT x,
                y
         FROM   tableB)
SELECT IDENTITY(INT, 1, 1) AS Id,
       x,
       y
INTO   CampRegistration
FROM   T 
```

之后您仍然需要添加 PK 约束，但这会在堆转换为聚集索引时添加额外的不必要的排序操作。最有效的方法是`CREATE`上桌

```
SELECT TOP (0) IDENTITY(INT, 1, 1) AS Id,
               x,
               y
INTO   CampRegistration
FROM   tableA 
```

然后在表仍然为空时添加聚集主键。

然后插入表中。SQL Server 意识到这`IDENTITY`将是聚集索引顺序，并且不会费心对它们进行排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T15:23:03.880

Use window function to create the column on the fly.

```
SELECT Row_Number() Over (Order By x,y) As ID, x, y
INTO CampRegistration
FROM tableA 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T15:27:52.387

由于您有一个 UNION，您需要使用 CTE 或内联视图。

例如

```
SELECT Row_Number() Over (order by x,y) rn, x,y
INTO CampRegistration
FROM
(
SELECT x, y
FROM tableA
UNION
SELECT x, y
FROM tableB
) as t 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T15:22:02.740

如何使用`ROW_NUMBER()`

```
SELECT x, y, ROW_NUMBER()
INTO CampRegistration
.... 
```

*   [TSQL ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

# linux - 如何测试自己编写的 linux 声音驱动程序？

> ID：14261193
> 
> 赞同：1
> 
> 时间：2013-01-10T15:20:24.343
> 
> 标签：linux, audio, driver

我为 linux 编写了一个声音驱动程序。看起来效果很好。我使用 alsa 应用程序对其进行了测试：aplay 和 arecord 当我尝试使用另一个应用程序 (PJSUA) 对其进行测试时，它无法按预期工作。找出问题是应用程序还是我的驱动程序对我来说很复杂..

所以我的问题是：谁能给我一个关于另一个简单应用程序的建议，我可以用它来测试我的驱动程序是否正常运行？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:56:58.440

编写设备驱动程序的一半战斗实际上是在用户空间编写测试工具以正确测试它们。您还应该在代码进入内核之前对其进行彻底的单元测试。

您无法避免了解`libasound`. 您可能希望使用调试版本进行测试，以便可以通过它进行调试。

我建议您从 ALSA[示例](http://www.alsa-project.org/alsa-doc/alsa-lib/_2test_2pcm_8c-example.html)开始- 可能`pcm.c`，然后对其进行修改，使其模糊您的驱动程序。至少您需要检查每种传输方法（例如，写入、写入和轮询、DMA）、缓冲区大小、通知周期和采样率。

# ruby-on-rails - rails form helper 更改表单 text_field

> ID：14261195
> 
> 赞同：0
> 
> 时间：2013-01-10T15:20:27.247
> 
> 标签：ruby-on-rails, forms

我有一个定义关联的**用户模型。**`has_one :profile`

在用户编辑操作/页面上，我更新了用户属性。我想更新一个*不*属于**User**模型但属于**Profile**的属性。

这是我的观点：

```
# _form.html.haml
=f.text_field :phone 
```

使用这种形式，我怎样才能更新 的`phone`属性`@user.profile`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:43:52.297

您应该允许更新用户模型中的嵌套属性：

```
class User
    has_one :profile
    accepts_nested_attributes_for :profile

end 
```

然后在您的表单中使用该`fields_for`方法将 Profile 中的字段嵌套到 User 表单中：

```
= f.fields_for :profile do |p|
  = p.text_field :phone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:35:04.440

一般来说，如果您有两个表 user 和 profile 具有关联，那么 -

用户表 = id、first_name、last_name

个人资料表 = id、user_id、电话

协会：

`User Class`-

```
class User < ActiveRecord::Base
  has_one :profile
end 
```

`Profile Class`-

```
class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

`User Controller`-

```
def index
  @user = current_user
  @user_phone = @user.profile.phone

end 
```

# android - 将新文件与 Android 应用关联

> ID：14261196
> 
> 赞同：2
> 
> 时间：2013-01-10T15:20:35.327
> 
> 标签：android, android-manifest, intentfilter

我想注册一个新的文件扩展名 (.db_backup)，以便使用我的应用程序打开所有具有此扩展名的文件。

基本上这种类型的文件作为附件备份到电子邮件中。打开附件时，我希望使用我的应用程序直接打开所有此类文件。

我通过提到 android:mimeType = application/* 成功地做到了这一点

但是现在所有应用程序（PDF、APK）也可以用我的应用程序打开（这很明显，因为提到了 *）。请告诉我清单中我应该提到什么 android:mimeType ？我的 AndroidManifest.xml 给出：

```
<activity
        android:name="com.package.RestoreFromMail"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/restore_mail" >
        <intent-filter android:priority="1" >
            <category android:name="android.intent.category.DEFAULT" >
            </category>

            <action android:name="android.intent.action.VIEW" >
            </action>

            <data
                android:host="*"
                android:pathPattern=".*\\.db_backup"
                android:scheme="http" >
            </data>
        </intent-filter>
        <intent-filter android:priority="1" >
            <category android:name="android.intent.category.DEFAULT" >
            </category>

            <action android:name="android.intent.action.VIEW" >
            </action>

            <data
                android:host="*"
                android:pathPattern=".*\\.db_backup"
                android:scheme="file" >
            </data>
        </intent-filter>
        <intent-filter android:priority="1" >
            <category android:name="android.intent.category.DEFAULT" >
            </category>

            <action android:name="android.intent.action.VIEW" >
            </action>

            <data
                android:host="*"
                android:mimeType="application/*" >
            </data>
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:21:19.950

这就是我现在在我的应用程序中设置意图的方式。只需将 .ext 替换为您的扩展名。另请注意，我使用的是 mimeType="*/*"。必须这样做才能使其与 Astro 文件管理器一起使用。现在通过删除内容方案中的 android:host="*" 使其也可以与电子邮件一起使用。

```
<!-- For email -->
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="content" />
    <data android:pathPattern=".*\\.ext" />
    <data android:mimeType="application/octet-stream" />
 </intent-filter>

  <!-- For http -->
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="http" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.ext" />
    <data android:pathPattern=".*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:mimeType="*/*" />
 </intent-filter>

<!-- For https -->
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="https" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.ext" />
    <data android:pathPattern=".*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:mimeType="*/*" />
 </intent-filter>

<!-- For file browsers and google drive -->
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="file" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.ext" />
    <data android:pathPattern=".*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\..*\\.ext"/>
    <data android:mimeType="*/*" />
 </intent-filter> 
```

# asp.net-mvc - nopCommerce 2.70 - 将主题作为内容放在联系我们表格上方

> ID：14261198
> 
> 赞同：0
> 
> 时间：2013-01-10T15:20:42.840
> 
> 标签：asp.net-mvc, nopcommerce

这是一个 nopCommerce 2.70 相关问题。

我想在“联系我们”表单上方添加几句话，但我不想在 ContactUs.cshtml 文件中硬编码它们。我希望能够在后端编辑它们。

是否可以通过调用“联系我们”表单模板中的变量或类似的方式将主题的内容/文本放在“联系我们”表单上方？如果是这样，我该怎么做？

在此先感谢您的帮助。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:21:51.957

实际上，有一个非常简单的方法可以做到这一点，通过将 TopicBlock 操作嵌入到您的 .cshtml 文件中，如下所示：

@Html.Action("TopicBlock", "Topic", new { systemName = "YourTopicSystemName" })

其中“YourTopicSystemName”是您在管理员中创建的主题的系统名称。这将允许您或您指定的用户通过管理员更新内容，而无需再次触摸文件。

# html - textarea 禁用向上/向下箭头滚动

> ID：14261199
> 
> 赞同：2
> 
> 时间：2013-01-10T15:20:44.230
> 
> 标签：html, css

我有溢出的文本区域：隐藏；风格。
但是，每当我按下向上/向下箭头时，textarea 都会滚动一点。
有什么办法可以禁用这个滚动？

这是jsfiddle：http: [//jsfiddle.net/6bV3W/](http://jsfiddle.net/6bV3W/)

如果按向上和向下键，则移动文本。

```
textarea {
        border: 1px solid black;
        width: 160px;
        height: 60px;
        font-size: 65px;
        background-color: transparent;
        color: inherit;
        display: block;
        font-family: inherit;
        line-height: 1;
        min-width: 30px;
        overflow: hidden;
        resize: none;
        text-transform: uppercase;
        white-space: pre;
    }
```

```
<textarea spellcheck="false" class="draggable"></textarea> 
```

我可以放大高度，但就我而言，我不能。有什么办法可以避免这种滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-17T07:20:10.273

这是因为当尝试应用较小的字体大小时，字体大小大于**文本区域**`font-size: 30px;`的高度，可以正常工作。除了这个你的代码很好@Naor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:10:58.913

您可以将 textarea 包装在 div 包装器中，如下所示：

```
<div class="textarea_wrapper"><textarea spellcheck="false" class="draggable"></textarea></div> 
```

然后，将该包装器的 CSS 设置为您为 textarea 设置的 CSS，并为 textarea 添加一个与包装器 div 高度相等的 line-height：

```
.textarea_wrapper {
    border: 1px solid black;
    width: 160px;
    height: 60px;
    font-size: 65px;
    background-color: transparent;
    color: inherit;
    display: block;
    line-height: 1;
    min-width: 30px;
    overflow: hidden;
    resize: none;
    text-transform: uppercase;
    white-space: nowrap;
}

textarea {
    font-family: inherit;
    font-size: 65px;
    line-height:60px;
    width: 160px;
} 
```

[请参阅此 Fiddle 以获取演示](http://jsfiddle.net/c_kick/4spSS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T06:42:38.897

好吧，这个问题似乎很老了，但希望我的代码能帮助有需要的人！
没有简单的方法可以实现这一点，但是可以做到，检查[DEMO](https://jsfiddle.net/tusharshuklaa/qL7ec058/)。

我所做的是：

1\. 固定 textarea 的高度
`height: 10rem;`
2\. 假设有四行，然后 line-height= height/4 （根据需要自己计算）
3\. 禁用滚动条
`overflow: hidden`或`overflow:auto`（两者都很好！）
4\. 现在检查 '\n' 的数量是否超过所需的行数：

这是完整的 JS 结构：

```
$(function() {
  BindHandlers();
  count_of_new_line = 0; /*This variable is global*/
});

function CaretPosition(ctrl) { /*This is to get the current position of cursor*/
  var CaretPos = 0;
  if (document.selection) {
    ctrl.focus();
    var Sel = document.selection.createRange();
    Sel.moveStart('character', -ctrl.value.length);
    CaretPos = Sel.text.length;
  } else if (ctrl.selectionStart || ctrl.selectionStart == '0')
    CaretPos = ctrl.selectionStart;
  return (CaretPos);
}

function BindHandlers() {
  $('#text_area').on({
    keyup: function(f) {
      var search_value = $(this).val();
      var cursorPosition = CaretPosition(document.getElementById('text_area'));
      var search_value_before_current_cursor = search_value.substr(0, cursorPosition);
      var latest_new_line = search_value_before_current_cursor.lastIndexOf("\n");
      var keycode=f.keyCode;
      if (keycode == 13) {
        count_of_new_line = count_of_new_line + 1;
        if (count_of_new_line > 3) {
          var max_val = search_value.substr(0, latest_new_line);
          $('#text_area').val(max_val);
          search_value = max_val;
          f.preventDefault();
        }
      }
    }
  })
} 
```

希望这会有所帮助！

# scala - 'i' 变量是如何在这个循环中递增的？

> ID：14261200
> 
> 赞同：4
> 
> 时间：2013-01-10T15:20:47.557
> 
> 标签：scala

下面的代码打印 0,1,2,3,4,5,6,7,8,9

```
for (i <- 0 until 10) {
    println(i) 
```

var 'i' 是如何递增的？我怀疑发生了一些隐含的事情，但检查了“直到”的签名，它返回了一个我不知道这是什么的范围？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T15:24:33.030

`for`在 scala 中不是一个循环，而是一个叫做 a 的东西`comprehension`。在您的情况下，它只是调用`Range.foreach`，因为`0 until 10`创建一个`Range`. 然后它只是为范围内的每个值递归调用您传递给 foreach 的函数。

**编辑**：

根据您的`for`外观，它将创建对`map`, `flatMap`, `foreach`, `filter`...的嵌套调用

例如：

```
for {
  x <- 0 until 10
  y <- 0 until 10
} yield x * y 
```

将编译为

```
(0 until 10) flatMap { x =>
  (0 until 10) map { y =>
    x*y
  }
} 
```

和

```
for {
  x <- 0 until 10
  if x % 2 == 0
} yield x * 2 
```

将被编译成类似

```
(0 until 10).filter { x =>
  x % 2 == 0
}.map { x =>
  x * 2
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T15:23:32.443

`for`被解释为`foreach`Scala 中集合的方法。所以真正执行的是

```
(0 until 10) foreach { i => println(i) } 
```

正如您所提到的，`until`它接受 2 个整数并返回 a `Range`，它是一个序列 {0,1,2,...,9}。您的程序会遍历这 10 个数字中的每一个并`println`对其应用函数。一句话，底层实现`for`是函数式编程风格，不需要做增量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T15:23:01.620

0 到 10 定义一个范围。

for 理解扩展为以下内容：

```
(0 until 10) foreach { println(_) } 
```

其中，范围扩大后类似于：

```
(Seq(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)) foreach { println(_) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:25:08.307

`until`是一种方法 - 以中缀表示法调用 - 返回一个[`Range`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range). `for`外观基本上是对 this 的迭代`Range`。这是同一事物的不同表示法：

```
0.until(10).foreach(println(_)) 
```

# asynchronous - 异步读取/写入数据

> ID：14261206
> 
> 赞同：2
> 
> 时间：2013-01-10T15:21:00.867
> 
> 标签：asynchronous, f#

我不认为我正在编写的这段小代码有任何实际应用，但我正试图将我的头脑围绕 async 并且似乎有点挣扎。假设我想从 Yahoo 提取历史股票价格数据，将所有数据保存到单个 csv 文件中，然后使用批量复制将其加载到 SQL Server 中。我不太担心将数据加载到 SQL Server 中，但我想知道如何将数据写入新的 csv 文件。可以/应该异步完成吗？

据我所知，在抓取历史数据时，无法将代码作为流的一部分抓取，因此我正在抓取流并将其映射到一个新列表，并将代码附加到每个项目的前面。有时，当我运行测试时，我会得到一个没有代码的记录，并且会有一个包含多个代码的记录（例如，“MSFT，YHOO”）。

所以，我的问题是，如何将这些数据转储到单个 csv 文件中而不引起问题？其次，当我拆分数据时，我得到一个空的尾部项目。放弃它的最佳方法是什么？

就像我说的，我不知道这有什么实际应用，但我正在努力学习，所以我希望你能原谅我的无知。感谢您的帮助，我真的很感激。这是我所拥有的：

```
open System
open System.IO
open System.Web
open System.Net

let fromDate = new DateTime(2013, 1, 1)

let getTickers = 
    "MSFT" :: "YHOO" :: []

let getData (ticker : string) = 
    async {
        let url = System.String.Format("http://ichart.finance.yahoo.com/table.csv?s={0}&g=d&ignore=.csv&a={1}&b={2}&c={3}", ticker, fromDate.Month - 1, fromDate.Day, fromDate.Year)

        Console.WriteLine(url)

        let req = WebRequest.Create(url)
        let! rsp = req.AsyncGetResponse()
        use stream = rsp.GetResponseStream()
        use reader = new StreamReader(stream)

        let lines = 
            reader.ReadToEnd().Split('\n')
            |> Seq.skip 1 // skip header
            |> Seq.map (fun line-> (String.Format("{0}, {1}", ticker, line.ToString())))

        Seq.iter (fun x->printfn "%s" (x.ToString())) lines
        ()
    }

let z = 
    getTickers 
    |> List.map getData
    |> Async.Parallel
    |> Async.RunSynchronously 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:25:42.167

IMO，这有点过头了，但希望它能证明你想知道的：

```
open System
open System.IO
open System.Net

let tickers = 
  [ 
    "MSFT"
    "YHOO"
  ]

let getData (writer: TextWriter) ticker =
  async {
    let url = sprintf "http://ichart.finance.yahoo.com/table.csv?s=%s&g=d&ignore=.csv" ticker
    let req = WebRequest.Create(url)
    let! resp = req.GetResponseAsync() |> Async.AwaitTask
    use stream = resp.GetResponseStream()
    use reader = new StreamReader(stream)
    let! lines = reader.ReadToEndAsync() |> Async.AwaitTask
    let lines = 
      lines.Split('\n')
        |> Seq.skip 1
        |> Seq.filter ((<>) "") //skip empty lines
    for line in lines do
      do! writer.WriteLineAsync(String.Format("{0}, {1}", ticker, line)).ContinueWith(ignore) |> Async.AwaitTask
  }

let writeAllToFile path =
  use writer = new StreamWriter(path=path)
  tickers
    |> Seq.map (getData writer)
    |> Async.Parallel
    |> Async.RunSynchronously
    |> ignore

writeAllToFile @"C:\quotes.csv" 
```

# c# - 将字符串数组拆分为多个部分

> ID：14261209
> 
> 赞同：0
> 
> 时间：2013-01-10T15:21:09.810
> 
> 标签：c#, list, sorting, arrays

我可以做到这一点，但我想要一种干净的方式来做这件事，不会给以后处理带来任何麻烦。

```
private String[][] SplitInto10(string[] currTermPairs)
{
   //what do i put in here to return 10 string arrays
   //they are all elements of currTermPairs, just split into 10 arrays.
} 
```

所以我基本上想将一个字符串数组（currTermPairs）平均分成 10 个或 11 个不同的字符串数组。我需要确保没有数据丢失并且所有元素都已成功传输

编辑：给你一个 n 大小的字符串数组。需要发生的是该方法需要从给定的字符串数组中返回 10 个字符串数组/列表。换句话说，将数组分成 10 个部分。

例如，如果我有

```
 A B C D E F G H I J K L M N O P Q R S T U 
```

我需要根据大小将它拆分为 10 个字符串数组或 11 个字符串数组，所以在这种情况下我会有

```
A B
C D
E F
G H 
I J
K L
M N 
O P 
Q R 
S T 
U   <--Notice this is the 11th array and it is the remainder 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:26:55.053

改用余数[`%`运算符](http://msdn.microsoft.com/en-us/library/0w4e0fzs%28v=vs.71%29.aspx)，这里是 Linq 方法：

```
string[][] allArrays = currTermPairs
            .Select((str, index) => new { str, index })
            .GroupBy(x => x.index % 10)
            .Select(g => g.Select(x => x.str).ToArray())
            .ToArray(); 
```

[**演示**](http://ideone.com/r1ohpU)（每个数组有 2 个字符串）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:05:49.047

这是一个不使用 LINQ 的解决方案，以防您想习惯数组和 for 循环：

```
// Determine the number of partitions.
int parts = currTermPairs.Length < 10 ? currTermPairs.Length : 10;

// Create the result array and determine the average length of the partitions.
var result = new string[parts][];
double avgLength = (double)currTermPairs.Length / parts;

double processedLength = 0.0;
int currentStart = 0;
for (int i = 0; i < parts; i++) {
    processedLength += avgLength;
    int currentEnd = (int)Math.Round(processedLength);
    int partLength = currentEnd - currentStart;
    result[i] = new string[partLength];
    Array.Copy(currTermPairs, currentStart, result[i], 0, partLength);
    currentStart = currentEnd;
}
return result; 
```

项目的总数可能不能被 10 整除。问题是如何分配不同长度的部分。在这里，我尝试将它们均匀分布。注意铸造`(double)currTermPairs.Length`。为了获得浮点除法而不是整数除法，这是必要的。

这里有一个小测试方法：

```
const int N = 35;
var arr = new string[N];
for (int i = 0; i < N; i++) {
    arr[i] = i.ToString("00");
}

var result = new PatrtitioningArray().SplitInto10(arr);
for (int i = 0; i < result.Length; i++) {
    Console.Write("{0}:   ", i);
    for (int k = 0; k < result[i].Length; k++) {
        Console.Write("{0}, ", result[i][k]);
    }
    Console.WriteLine();
} 
```

它的输出是（有 35 个元素）：

```
0:   00, 01, 02, 03, 
1:   04, 05, 06, 
2:   07, 08, 09, 
3:   10, 11, 12, 13, 
4:   14, 15, 16, 17, 
5:   18, 19, 20, 
6:   21, 22, 23, 
7:   24, 25, 26, 27, 
8:   28, 29, 30, 31, 
9:   32, 33, 34, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:26:46.827

我会说创建一个`List<List<string>>`包含 10 或 11 （无论您实际想要`List<string>`的数字），并执行以下操作：

```
int i = 0;
int index;
foreach(string s in src)
{
  index = i % lists.Length; //lists is the List<List<string>>
  lists[index].Add(s);
  i++;
} 
```

当然，如果原始列表中至少有 10 或 11 个项目，则只能拆分为 10 或 11 个列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:27:38.160

下面的帖子显示了拆分数组的一个很好的示例：

[C# 拆分数组](https://stackoverflow.com/questions/1841246/c-sharp-splitting-an-array)

它包含自定义拆分和中点拆分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T15:43:15.233

这适用于按顺序将它们分组（即 {1, 2}, {3, 4}, {5, 6}, {7, 8}, {9, 10}, {11, 12}, { 13、14}、{15、16}、{17、18}、{19、20}、{21}）：

```
 int groupSize = items.Length / 10;
    string[][] sets = items.Select((str, idx) => new { index = idx, value = str })
                           .GroupBy(a => a.index / groupSize)
                           .Select(gr => gr.Select(n => n.value).ToArray())
                           .ToArray(); 
```

如果您有 102 个项目，这将为您提供 10 个包含 10 个项目的数组和一个包含 2 个项目的数组（其余部分）。这是你所期待的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T16:08:12.653

使用[MoreLinq](http://code.google.com/p/morelinq/)的[Batch](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)扩展方法：

```
private String[][] SplitIntoParts(string[] items, int equalPartsCount)
{
   var batches = items.Batch(items.Count() / equalPartsCount);
   return batches.Select(x => x.ToArray()).ToArray();
} 
```

# ios - UITableView 抛出 NSInternalInconsistencyException

> ID：14261210
> 
> 赞同：0
> 
> 时间：2013-01-10T15:21:14.360
> 
> 标签：ios, uikit

使用`deleteRowsAtIndexPaths`从表中删除一行后，我收到`NSInternalInconsistencyException`了以下文本：

> 无效更新：无效的节数。更新后表视图中包含的节数（1）必须等于更新前表视图中包含的节数（1），加上或减去插入或删除的节数（0插入，1已删除）。

例外是指删除的**节**数，但该`deleteRowsAtIndexPaths`方法应该删除**行**。据我所知，部分的数量应该不受影响。这怎么可能发生？什么可能导致表认为我要删除行？

导致错误的完整代码行是：

```
[self.contentTable
 deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForItem:index inSection:0]]
 withRowAnimation:UITableViewRowAnimationMiddle]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:21:14.360

我确实设法解决了这个问题。事实证明，造成混乱的原因是一条无用的错误消息。

我的错误是我试图删除错误的行（我的表中有 14 行，我试图删除第 2147483647 行 - 并非巧合，这是 NSNotFound 的值）。显然，尝试删除此行会产生有关表中部分数量的异常消息。

# dns - SPF 记录中的 DNS 查找过多

> ID：14261214
> 
> 赞同：42
> 
> 时间：2013-01-10T15:21:24.157
> 
> 标签：dns, smtp, mailchimp, sendgrid, spf

我的网站需要使用 Google Apps、SendGrid 和 MailChimp 服务发送电子邮件。Google Apps 用于接收和阅读传入我的域的电子邮件。

我需要为我的域设置 SPF 记录。以下在语法上是正确的（不确定 A 和 MX 标记）：

> “v=spf1 一个 mx 包括：**_spf.google.com**包括：**servers.mcsv.net** 包括：**sendgrid.net** ~all”

但是如果我用[http://www.kitterman.com/getspf2.py](http://www.kitterman.com/getspf2.py)测试它，我会得到

> **PermError SPF 永久错误：DNS 查找过多**

[与http://www.onlineaspect.com/2009/03/20/too-many-dns-lookups-in-an-spf-record/](http://www.onlineaspect.com/2009/03/20/too-many-dns-lookups-in-an-spf-record/)类似的问题

如何优化/重写我的 SPF 记录？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-10T16:37:02.047

所以，我以前从来没有这样做过，但是根据你发过来的文章，这就是我想出的。

我们开始：

```
v=spf1 a mx include:_spf.google.com include:servers.mcsv.net include:sendgrid.net ~all 
```

`Too many DNS lookups`在抛出错误之前，我们总共进行了 10 次查找：

```
 2 (Initial TXT & SPF Lookups)
  2 (a & mx Lookups)
  1 (_spf.google.com)
  1 (servers.mcsv.net)
 +1 (sendgrid.net)
 -----------------
  7 Lookups 
```

因此，即使不遵循包含的 SPF 记录，我们也有 7 次查找。

* * *

现在，让我们更深入地了解一下。

### 1\. _spf.google.com

谷歌 SPF 记录评估为：

```
v=spf1 include:_netblocks.google.com include:_netblocks6.google.com ?all 
```

每个都解析为以下值：

```
# _netblocks.google.com
v=spf1 ip4:216.239.32.0/19 ip4:64.233.160.0/19 ip4:66.249.80.0/20 ip4:72.14.192.0/18 ip4:209.85.128.0/17 ip4:66.102.0.0/20 ip4:74.125.0.0/16 ip4:64.18.0.0/20 ip4:207.126.144.0/20 ip4:173.194.0.0/16 ?all

# _netblocks6.google.com
v=spf1 ip6:2607:f8b0:4000::/36 ip6:2a00:1450:4000::/36 ?all 
```

所以 google 又给了我们 2 次查找，使总数达到**9**次。

### 2.servers.mcsv.net

Mailchimp 有点笨拙，因为它增加了 3 个额外的查找：

```
v=spf1 include:spf1.mcsv.net include:spf2.mcsv.net include:spf.mandrillapp.com ?all 
```

我想根据您通过 Mailchimp 发送的内容，您可能能够删除其中一两条记录（但您必须自己评估）。

无论如何，那些解决以下问题：

```
# spf1.mcsv.net
v=spf1 ip4:207.97.237.194/31 ip4:207.97.238.88/29 ip4:207.97.240.168/29 ip4:69.20.10.80/29 ip4:69.20.41.72/27 ip4:74.205.22.1/27 ip4:69.20.90.0/26 ?all

# spf2.mcsv.net
v=spf1 ip4:204.232.163.0/24 ip4:72.26.195.64/27 ip4:74.63.47.96/27 ip4:173.231.138.192/27 ip4:173.231.139.0/24 ip4:173.231.176.0/20 ip4:205.201.128.0/24 ?all

# spf.mandrillapp.com
v=spf1 ip4:205.201.136.0/24 ip4:205.201.137.0/24 ?all 
```

这使我们总共进行了**12 次查找**（已经超过了限制的 2 次）。

### 2.sendgrid.net

SendGrid 最终成为我们额外查找次数最少的。

```
v=spf1 ip4:208.115.214.0/24 ip4:74.63.202.0/24 ip4:75.126.200.128/27 ip4:75.126.253.0/24 ip4:67.228.50.32/27 ip4:174.36.80.208/28 ip4:174.36.92.96/27 ip4:69.162.98.0/24 ip4:74.63.194.0/24 ip4:74.63.234.0/24 ip4:74.63.235.0/24 include:sendgrid.biz ~all 
```

所以这里唯一的额外查找是`sendgrid.biz`，其计算结果为：

```
v=spf1 ip4:208.115.235.0/24 ip4:74.63.231.0/24 ip4:74.63.247.0/24 ip4:74.63.236.0/24 ip4:208.115.239.0/24 ip4:173.193.132.0/24 ip4:173.193.133.0/24 ip4:208.117.48.0/20 ip4:50.31.32.0/19 ip4:198.37.144.0/20 ~all 
```

这使我们的查找总数达到 14 个。

* * *

所以我们的总数是**14 Lookups**。我们需要将其降至 10。我在下面概述了几个选项，您可能需要使用其中的 1 个以上才能将其降低。

1.  直接包含一些重定向的 spf 记录。现在我们知道 spf 记录重定向到哪些服务器，您可以去掉中间人并直接包含它们。 *注意：如果任何服务最终更改了其 SPF 记录，您将不得不手动完成更新过程。*

2.  删除您正在使用的一些服务。不确定您拥有所有这些服务的用例是什么，但您肯定可以使用一些重叠。例如，SendGrid 支持 (1) 事务性外发邮件，(2) 通讯/营销电子邮件，以及 (3) 传入邮件。所以可能会有一些可减少的冗余。

3.  如果 MX 记录是多余的，则删除它。根据您的设置，MX 查找可能是多余的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-22T14:51:23.167

斯威夫特的回答非常好。

上面没有提到的一项技术是查看具有自己 SPF 记录的单独子域是否可以用于通过这些不同路由发送邮件的系统。

例如，如果域是`example.com`，让谷歌应用程序从`user@gapps.example.com`. 然后可以有一个`gapps.example.com`包含的 SPF 记录`_spf.google.com`，并且`_spf.google.com`可以从主`example.com`SPF 记录中删除，从而将查找次数减少 3。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-19T16:51:43.653

查看[SPF-tools](https://github.com/spf-tools/spf-tools) *，它有助于将 SPF 记录从使用 include 的原始记录重新组装成仅包含`ip4`和`ip6`字段的静态记录。它可以很容易地与本地运行的 DNS 服务器或使用其 API 托管的 DNS 服务耦合在一起，以使所有内容与上游包含的内容保持同步。

*我是作者（现在和其他贡献者一起），它是在 Apache 2.0 许可下开源的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T06:06:23.857

我们探索了将 SPF 记录扁平化为 IP 以及创建子域。他们似乎都做了很多工作。我们从 spfproxy.org 找到了一项服务，它实际上需要几分钟的时间来设置。它们基本上使用 SPF 宏来掩盖其背后的 DNS 查找。不知道为什么更多的公司不提供这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T00:21:26.837

几年前，我编写了[hydrate-spf](https://github.com/xiongchiamiov/hydrate-spf)，这是一个查找包含结果并将结果合并到一个巨大记录中的工具。如自述文件中所述，这种方法并不理想 - 它消除了您包含的域更新其记录的能力。但是，当您遇到允许的限制时，它会立即解决问题，并且可以通过定期更新保持一定程度的可维护性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-31T02:59:26.047

10 次查找限制是 DNS 查找的限制。扁平化 SPF 记录以包含更少的 DNS 查找并将它们替换为 IP（扁平化）是一种绕过限制的方法。

您可以手动执行此操作，但是每次其中一个提供商更改其 IP（这种情况经常发生）时，您都必须更新您的 SPF 记录。

理想的解决方案是使用**SPF 扁平化服务**。这个对于小批量是免费的，或者对于每月超过 500 封电子邮件来说很便宜。它**会定期轮询您要包含的 SPF 记录以获取更新的 IP。**

[Fraudmarc.com](http://fraudmarc.com)

披露：我与这家公司无关，这不是推荐链接

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-15T05:47:44.287

这个 10-DNS-lookup 限制由 SPF 实施强加，以防止针对 DNS 基础设施的 DDoS 攻击。

使用[DMARCLY](https://dmarcly.com)的安全 SPF 功能，您可以在不重写 SPF 记录的情况下解除限制。

# php - 在 PHP 中做 Html 标记

> ID：14261215
> 
> 赞同：-2
> 
> 时间：2013-01-10T15:21:25.927
> 
> 标签：php, html, markup

我想用 PHP 使用 require 来做我的 HTML 标记，这可能吗？如果可以，你是怎么做的？

现在这是我的 index.php 中的代码：

```
<?php

require('header.php')
require('body.php')

htmlHead();
htmlContent();

?> 
```

然后在我的 header.php 文件中，我得到了这个：

```
<?php

 function htmlHead(){
 echo '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
            <title>Hello World</title>
            <link rel="stylesheet" href="/style.css" type="text/css">
        </head>';
}

?> 
```

然后是我的身体标签：

```
<?php
 function htmlContent(){
 echo'  <body>
        <div id="wrapper">
            <p>Hello World!</p>
        </div>
    </body>
</html>
';
}
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:23:25.833

您无需将 HTML 放入函数中。您可以简单地执行以下操作：

```
require('my_header.php'); 
```

**my_header.php**的内容如下所示：

```
<html>
<head>
  <title>My Title</title>
  <link rel="stylesheet" href="<?php $someVariable; ?>" type="text/css" />
  ...
</head> 
```

十分简单。

# flash - Flash图片流组件添加按钮

> ID：14261217
> 
> 赞同：2
> 
> 时间：2013-01-10T15:21:28.137
> 
> 标签：flash, actionscript, actionscript-2, coverflow, imageflow

谁能帮我在这个图像流组件中添加一个左右按钮？目前它使用图像来左右导航，但我似乎可以理解如何将按钮与动作脚本链接？我不做太多的闪光工作，所以非常感谢任何帮助。

```
import flash.filters.BlurFilter;
xml=new XML();
xml.ignoreWhite=true;
xml.load("image_flow.xml"); // set the xml file for data
ActiveHeight=200;
InactiveHeight=70;
ActivePicture=1;
borderSize=2;
backgroundColor=0x666666;
backgroundOverColor=0x333333;
pictureSpacing=5;
ZoomSpeed=2;
MoveSpeed=3;
mirrorDistance=5;
autoFlow=false;
rand=true;
time=3000;

var titleFormat:TextFormat = new TextFormat();
titleFormat.color=0xFFFFFF;
titleFormat.font="verdana";
titleFormat.size=12;

xml.onLoad = function(ok)
{
if (ok)
create_image_flow();
}

create_image_flow = function(){
this.createEmptyMovieClip("mask",this.getNextHighestDepth());
with(mask){
    beginFill(0x000000,100);
    lineTo(Stage.width,0);
    lineTo(Stage.width,Stage.height);
    lineTo(0,Stage.height);
    lineTo(0,0);
}

var pic:Object = new Object();
var picMirror:Object = new Object();

picMirror.onLoadInit = function(target:MovieClip){
    target.forceSmoothing = true;
    while (target._height>InactiveHeight){
        target._width-=target._width/100;
        target._height-=target._height/100;
    }
    height=target._height;
      while(target._height<=height){
            target._yscale-=1;
      }
    target.load=true;
    for (j=0;j<xml.firstChild.childNodes.length;j++)
     if (target==flow["object"+j].mirror.picture){
         target._y=flow["object"+j].background._height+mirrorDistance+target._height;
         with (flow["object"+j].mirror.background){
             beginFill(backgroundColor,100);
             lineTo(target._width+2*borderSize,0);
             lineTo(target._width+2*borderSize,target._height+2*borderSize);
             lineTo(0,target._height+2*borderSize);
             lineTo(0,0);
             _y=flow["object"+j].background._height+mirrorDistance-borderSize;
             _x=-borderSize;
         }
         with (flow["object"+j].mirror.backgroundOver){
             beginFill(backgroundOverColor,100);
             lineTo(target._width+2*borderSize,0);
             lineTo(target._width+2*borderSize,target._height+2*borderSize);
             lineTo(0,target._height+2*borderSize);
             lineTo(0,0);
             _y=flow["object"+j].background._height+mirrorDistance-borderSize;
             _x=-borderSize;
             _alpha=0;
         }
         with (flow["object"+j].mirrorMask){
             matrix = {matrixType:"box", x:0, y:-flow["object"+j].mirror.background._height/2, w:flow["object"+j].mirror.background._width, h:flow["object"+j].mirror.background._height, r:90/180*Math.PI};
             beginGradientFill(fillType, colors, alphas, ratios, matrix);
             lineTo(flow["object"+j].mirror.background._width,0);
             lineTo(flow["object"+j].mirror.background._width,flow["object"+j].mirror.background._height);
             lineTo(0,flow["object"+j].mirror.background._height);
             lineTo(0,0);
             _x=-borderSize;
             _y=flow["object"+j].mirror.background._y;
         }
         flow["object"+j].mirror.cacheAsBitmap=true;
         flow["object"+j].mirrorMask.cacheAsBitmap=true;
         flow["object"+j].mirror.setMask(flow["object"+j].mirrorMask);

     }

}

pic.onLoadInit = function(target:MovieClip){
    target.forceSmoothing = true;
    while (target._height>InactiveHeight){
        target._width-=target._width/100;
        target._height-=target._height/100;
    } 
    target.load=true;
    target.onRelease = function(){
        flow.title.text="";
        timer=undefined;
        for (j=0;j<xml.firstChild.childNodes.length;j++)
          if (target==flow["object"+j].picture){
              flow["object"+ActivePicture].swapDepths(ActivePicture+1);
              ActivePicture=j;
              flow["object"+ActivePicture].swapDepths(xml.firstChild.childNodes.length+1);
          }
    }
    target.onRollOver = function(){
        this.caption=true;
    }
    target.onRollOut = function(){
        this.caption=false;
    }
    target.onReleaseOutside = function(){
        this.caption=false;
    }

    for (j=0;j<xml.firstChild.childNodes.length;j++){
        if (target==flow["object"+j].picture){
            imagMirror.loadClip(xml.firstChild.childNodes[j].attributes.url,flow["object"+j].mirror.picture);
            with(flow["object"+j].background){
                beginFill(backgroundColor,100);
                lineTo(target._width+(2*borderSize),0);
                lineTo(target._width+(2*borderSize),target._height+(2*borderSize));
                lineTo(0,target._height+(2*borderSize));
                lineTo(0,0);
                _x=-borderSize;
                _y=-borderSize;
            }
            with(flow["object"+j].backgroundOver){
                beginFill(backgroundOverColor,100);
                lineTo(target._width+(2*borderSize),0);
                lineTo(target._width+(2*borderSize),target._height+(2*borderSize));
                lineTo(0,target._height+(2*borderSize));
                lineTo(0,0);
                _x=-borderSize;
                _y=-borderSize;
                _alpha=0;
            }
        }
    }
}
var imag:MovieClipLoader = new MovieClipLoader();
imag.addListener(pic);
var imagMirror:MovieClipLoader = new MovieClipLoader();
imagMirror.addListener(picMirror);

this.createEmptyMovieClip("flow",this.getNextHighestDepth());
flow.setMask(mask);
flow.createEmptyMovieClip("background",0);
with(flow.background){
    beginGradientFill(fillType, colorsBackground, alphasBackground, ratios, matrixBackground);
    lineTo(Stage.width,0);
    lineTo(Stage.width,Stage.height);
    lineTo(0,Stage.height);
    lineTo(0,0);
}
flow.createTextField("title",xml.firstChild.childNodes.length+2,0,0,0,0);
flow.title.autoSize="left";
flow.title.selectable=false;
for (i=0;i<xml.firstChild.childNodes.length;i++){
    if (i==ActivePicture)
    flow.createEmptyMovieClip("object"+i,xml.firstChild.childNodes.length+1);
    else
    flow.createEmptyMovieClip("object"+i,i+1);
    flow["object"+i].createEmptyMovieClip("background",1);
    flow["object"+i].createEmptyMovieClip("backgroundOver",2);
    flow["object"+i].createEmptyMovieClip("picture",3);
    flow["object"+i].createEmptyMovieClip("mirror",4);
    flow["object"+i].mirror.createEmptyMovieClip("background",1);
    flow["object"+i].mirror.createEmptyMovieClip("backgroundOver",2);
    flow["object"+i].mirror.createEmptyMovieClip("picture",3);
    flow["object"+i].createEmptyMovieClip("mirrorMask",5);
    imag.loadClip(xml.firstChild.childNodes[i].attributes.url,flow["object"+i].picture);
}

flow.onEnterFrame = function(){
    if ((getTimer()-timer>time)&&(autoFlow)){
        flow.title.text="";
        flow["object"+ActivePicture].swapDepths(ActivePicture+1);
        if (rand){
        ActivePicture=Math.round(Math.random()*(xml.firstChild.childNodes.length-1));
        if (ActivePicture<0)
          ActivePicture=0;
        }
        else{
            ActivePicture++;
            if (ActivePicture==xml.firstChild.childNodes.length)
             ActivePicture=0;
        }
        flow["object"+ActivePicture].swapDepths(xml.firstChild.childNodes.length+1);
        timer=undefined;
    }
    flow["object"+ActivePicture].x=(mask._width-flow["object"+ActivePicture]._width)/2;
    for (i=(ActivePicture+1);i<xml.firstChild.childNodes.length;i++)
       if (i==ActivePicture+1)
       flow["object"+i].x=flow["object"+(i-1)].x+flow["object"+(i-1)]._width+pictureSpacing-2*borderSize;
       else
        flow["object"+i].x=flow["object"+(i-1)].x+flow["object"+(i-1)]._width+pictureSpacing;

    for (i=(ActivePicture-1);i>=0;i--)
       flow["object"+i].x=flow["object"+(i+1)].x-flow["object"+i]._width-pictureSpacing;
    for (i=0;i<xml.firstChild.childNodes.length;i++){
        flow["object"+i].y=(mask._height-flow["object"+i]._height/2)/2;
        if (flow["object"+i].picture.load){
            if (i==ActivePicture){
               flow["object"+i].height=Math.round(2*ActiveHeight+(2*borderSize));
               flow["object"+i].filters=[];
            }
            else{
               flow["object"+i].height=Math.round(2*InactiveHeight+(2*borderSize));
               flow["object"+i].filters=[blurEffect];
            }
        }
        if (Math.round(flow["object"+i]._height)>flow["object"+i].height){
            flow["object"+i]._x+=ZoomSpeed*flow["object"+i]._width/200;
            flow["object"+i]._y+=ZoomSpeed*flow["object"+i]._height/200;
            ySize=ZoomSpeed*flow["object"+i]._height/200;
            xSize=ZoomSpeed*flow["object"+i]._width/200;
            flow["object"+i]._height-=ZoomSpeed*flow["object"+i]._height/100;
            flow["object"+i]._width-=ZoomSpeed*flow["object"+i]._width/100;
            if (flow["object"+i]._height<flow["object"+i].height){
                flow["object"+i]._x+=xSize;
                flow["object"+i]._y+=ySize;
                flow["object"+i]._height=flow["object"+i].height;
            }
        }
        if (Math.round(flow["object"+i]._height)<flow["object"+i].height){
            flow["object"+i]._x-=ZoomSpeed*flow["object"+i]._width/200;
            flow["object"+i]._y-=ZoomSpeed*flow["object"+i]._height/200;
            ySize=ZoomSpeed*flow["object"+i]._height/200;
            xSize=ZoomSpeed*flow["object"+i]._width/200;
            flow["object"+i]._height+=ZoomSpeed*flow["object"+i]._height/100;
            flow["object"+i]._width+=ZoomSpeed*flow["object"+i]._width/100;
            if (flow["object"+i]._height>flow["object"+i].height){
                flow["object"+i]._x+=xSize;
                flow["object"+i]._y+=ySize;
                flow["object"+i]._height=Math.round(flow["object"+i].height);
                flow.title.text=xml.firstChild.childNodes[i].attributes.title;
                flow.title.setTextFormat(titleFormat);
                flow.title._x=flow["object"+i]._x;
                flow.title._y=flow["object"+i]._y-flow.title._height-borderSize;
                timer=getTimer();
            }
        }
        if (flow["object"+i]._x<flow["object"+i].x)
            flow["object"+i]._x+=(flow["object"+i].x-flow["object"+i]._x)/MoveSpeed;
        if (flow["object"+i]._y<flow["object"+i].y)
            flow["object"+i]._y+=(flow["object"+i].y-flow["object"+i]._y)/MoveSpeed;
        if (flow["object"+i]._x>flow["object"+i].x)
            flow["object"+i]._x-=(flow["object"+i]._x-flow["object"+i].x)/MoveSpeed;
        if (flow["object"+i]._y>flow["object"+i].y)
            flow["object"+i]._y-=(flow["object"+i]._y-flow["object"+i].y)/MoveSpeed;
        if (flow["object"+i].picture.caption){
            flow["object"+i].filters=[];
            if (flow["object"+i].backgroundOver._alpha<100){
                flow["object"+i].mirror.backgroundOver._alpha+=5;
               flow["object"+i].backgroundOver._alpha+=5;
            }
        }
        else{
            if (flow["object"+i].backgroundOver._alpha>0){
                flow["object"+i].mirror.backgroundOver._alpha-=5;
              flow["object"+i].backgroundOver._alpha-=5;
            }
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:19:07.343

在舞台上添加两个按钮。

给他们`btn1`和`btn2`（或您选择的任何名称）的实例名称

添加以下代码

```
btn1.onPress = function () {
    flow.title.text="";
    if (ActivePicture==xml.firstChild.childNodes.length-1){
        ActivePicture=0;
    }else{
        ActivePicture++;
    }
}

btn2.onPress = function () {
    flow.title.text="";
    if (ActivePicture<=0){
        ActivePicture=xml.firstChild.childNodes.length-1;
    }else{
        ActivePicture--;
    }

} 
```

* * *

## 发生了什么

您的按钮`ActivePicture`每次递增或递减 1。如果`ActivePicture`超过图片数量，它将更改为第一张图片。如果`ActivePicture`低于图片数量，则转到最后一张图片。

# solr - SolrJ 用于控制 Solr/Luce 与 Straight Rest Calls

> ID：14261219
> 
> 赞同：1
> 
> 时间：2013-01-10T15:21:32.800
> 
> 标签：solr, lucene, solrj

我们正在为面向公众的 REST 应用程序运行 TomCat servlet (Railo)。我已经开始实施 SolrJ 来控制独立的 Solr 集群。查询运行良好，但我对流程摸不着头脑，而不是仅使用 Solr 提供的直接 HTTP 接口。我认为使用 SolrJ 有一些性能优势，这就是我开始实施它的原因，但是从我在响应时间中阅读和看到的内容来看，我认为我在那个帐户上错了（？）。

使用 SolrJ 与仅操作和返回来自 Solr 的 JSON 响应相比有什么真正的优势吗？对于不向客户端返回 JSON/XML 的 Java 应用程序，我当然会使用 SolrJ。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:29:51.017

我不知道有任何关于 SolrJ 性能提高的说法。它主要被设计成一种易于使用的与 Solr 交互的方式。SolrJ 可能会阻止您摆脱 Solr 界面允许的某些性能很差的事情，但是对于索引上的简单搜索，我认为它不会产生显着的速度改进。

我确实看到了 SolrJ 的一个性能优势： [ConcurrentUpdateSolrServer](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/client/solrj/impl/ConcurrentUpdateSolrServer.html)看起来像是一种处理更新的高性能方式，尤其是在处理大批量更新时。我希望它比仅建立连接并一次发送一个更新的幼稚实现要好得多，尤其是在负载较重的情况下。

# unity3d - Unity3D 中是否可以进行内容热交换

> ID：14261221
> 
> 赞同：3
> 
> 时间：2013-01-10T15:21:48.033
> 
> 标签：unity3d

这似乎是我应该能够轻松找到的东西，但我的 google foo 让我失望了。unity是否支持内容热交换？即，我正在使用 3d 模型或纹理，如果我在磁盘上更新，unity 是否会在我在游戏中时自动重新加载（未部署，只是调试游戏）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:06:44.157

我不确定模型，但纹理 def 重新加载。我一直都这样做。我将在 Photoshop 中修改 PNG 和/或 PSD，这些更改在应用程序中将是透明的。声音也一样，修改代码也是如此。尤其是 update() 和 FixedUpdate() 函数中的代码，或者重新加载关卡等。

如果添加新变量脚本有时会中断。此外，如果您添加声音或修改声音，新声音将在编辑器中弹出。最好的办法是暂停它，然后加载它，然后在 UNITY EDITOR 中取消暂停。

IDE 一旦检测到新内容，将尝试重新导入它，无论它是在播放、停止还是暂停。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:58:47.747

是的，它至少适用于 3D 模型的网格（我只使用 Blender）和纹理。在大多数情况下，当实例处于活动状态时，脚本会导致崩溃。

在 Unity 的早期版本中，我看到了与动画相关的问题。也许它现在或在某些情况下有效。

# c++ - 如何使用 WIC 将 ID2D1Bitmap 保存到文件中？

> ID：14261226
> 
> 赞同：2
> 
> 时间：2013-01-10T15:22:06.583
> 
> 标签：c++, direct2d, wic

我在将位图保存到文件时遇到问题。我正在使用[如何将 ID2D1Bitmap 保存到 PNG 文件](https://stackoverflow.com/questions/11447489/how-to-save-id2d1bitmap-to-png-file)作为参考，但我的错误与其中发布的错误不同。

我收到错误 0x88990015 HRESULT，这意味着：使用的资源是由不同资源域中的渲染目标创建的。

这是我的代码：

```
void Wnd::SavePng(LPCWSTR Path,ID2D1Bitmap* pBit) {
    CComPtr<ID2D1RenderTarget> pRT;
    CComPtr<IWICBitmap> pB;
    CComPtr<IWICBitmapEncoder> pEncoder;
    CComPtr<IWICBitmapFrameEncode> pFrame;
    CComPtr<IWICStream> pStream;

    WICPixelFormatGUID format = GUID_WICPixelFormat32bppPBGRA;
    HRESULT Hr = m_pWICFactory->CreateBitmap(pBit->GetSize().width,pBit->GetSize().height,format,WICBitmapCacheOnLoad,&pB); 

    if (SUCCEEDED(Hr)) {
        D2D1_RENDER_TARGET_PROPERTIES RTProps = RenderTargetProperties();
        RTProps.pixelFormat = PixelFormat(DXGI_FORMAT_B8G8R8A8_UNORM,D2D1_ALPHA_MODE_PREMULTIPLIED);
        Hr = m_pDirect2dFactory->CreateWicBitmapRenderTarget(pB,&RTProps,&pRT);
    }

    if (SUCCEEDED(Hr)) {
        pRT->BeginDraw();
        pRT->Clear();
        pRT->DrawBitmap(pBit);
        Hr = pRT->EndDraw();
    }

    if (SUCCEEDED(Hr)) {
        Hr = m_pWICFactory->CreateStream(&pStream);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pStream->InitializeFromFilename(Path,GENERIC_WRITE);
    }

    if (SUCCEEDED(Hr)) {
        Hr = m_pWICFactory->CreateEncoder(GUID_ContainerFormatPng,NULL,&pEncoder);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pEncoder->Initialize(pStream,WICBitmapEncoderNoCache);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pEncoder->CreateNewFrame(&pFrame,NULL);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pFrame->Initialize(NULL);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pFrame->SetSize(pBit->GetSize().width,pBit->GetSize().height);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pFrame->SetPixelFormat(&format);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pFrame->WriteSource(pB,NULL);
    }

    if (SUCCEEDED(Hr)) {
        Hr = pFrame->Commit();
    }

    if (SUCCEEDED(Hr)) {
        Hr = pEncoder->Commit();
    }
} 
```

我知道您不能将另一家工厂生产的资源用于另一家工厂，但必须有一种方法可以使这项工作发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:17:25.190

您对资源亲和性的理解不够。资源是特定于设备的，而不是特定于工厂的。是的，它们也往往是特定于工厂的，但关键是设备的特异性。

在您的示例中，您传入由其他渲染目标创建的位图，然后将其传递给不同渲染目标的 DrawBitmap 方法。您只能绘制由同一渲染目标创建的位图。这确保了位图和渲染目标（源和目标）在同一个资源域（地址空间）中。

# jquery - 在页面中加载某些 div

> ID：14261228
> 
> 赞同：0
> 
> 时间：2013-01-10T15:22:12.307
> 
> 标签：jquery, ajax, load

我正在尝试使用 ajax.load 在页面中加载某个 div

我的jQuery代码

```
$('nav ul li a').click( function() { 

   var pageHref=$(this).attr('href');

   $('.main_content').load(pageHref div);

return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:26:48.330

它应该是：

```
$('.main_content').load(pageHref + " div"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:26:57.907

你的`div`选择器应该是`string`

```
$('.main_content').load(pageHref + ' div'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:27:39.863

ajax 用于在您的页面中加载外部页面。如果您想将 div 的内容加载到同一页面上的另一个 div 中，那么您应该考虑执行以下操作：

```
$('#id_of_destination_div').html($('#id_of_source_div').html()); 
```

在旁注中，您应该尝试清楚地说明您的问题。这个问题有点模棱两可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:29:19.143

```
 $('.main_content').load(pageHref div); 
```

这里的语法不正确。不知道你想做什么，但假设你想加载整个`pageHref`并从中取出一个 div 应该放入`$(".main_content")`

在这种情况下，您应该像下面这样修改它：

```
 $('.main_content').load(pageHref + " div"); 
```

因此，例如，pageHref 等于“www.mysite.com/page.html”，而不是等于

```
 $('.main_content').load("www.mysite.com/page.html div"); 
```

（请参阅字符串连接。例如[这里）](http://www.scriptingmaster.com/javascript/concatenating-strings-javascript.asp)

但请注意，`div`指定为选择器将返回页面上**所有**可用的 div，因此您可能会发现使用 id 选择器更好：

```
 $('.main_content').load(pageHref + " #some_id"); 
```

为了得到你需要的唯一元素。

如果您只想附加一些内容，您可以执行以下操作：

```
$('nav ul li a').click( function() { 
   var pageHref=$(this).attr('href');
   $.get(pageHref, function(res) {$(".main_content").append(res); });
   return false;
}); 
```

它将加载 pageHref 的所有内容并将其附加到 main_content

# sql - 为出现多次的记录添加值

> ID：14261229
> 
> 赞同：1
> 
> 时间：2013-01-10T15:22:12.417
> 
> 标签：sql, database

我正在查询数据库中的 2 个表。如果用户在同一天多次显示，我想添加 hours_worked 字段的值。这就是我开始的：

```
SELECT name, date_worked, hours worked
FROM users u
INNER JOIN records r
ON u.id = r.users_id
....... 
```

这就是我所得到的。有关如何执行此操作的 SQL 语法的任何帮助会很棒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:25:06.237

只是聚合它使用`SUM`

```
SELECT name, date_worked, SUM(`hours worked`) AS totalHoursWorked
FROM users u
     INNER JOIN records r
       ON u.id = r.users_id
GROUP BY name, date_worked 
```

# android - Google-TV：SoundPool：无法加载样本：（null）

> ID：14261231
> 
> 赞同：1
> 
> 时间：2013-01-10T15:22:25.670
> 
> 标签：android, audio, google-tv

它适用于摩托罗拉 Xoom 平板电脑 3.2.1，但不适用于 google-tv Logitech Revue 3.2

```
SoundPool soundPool = new SoundPool(16, AudioManager.STREAM_MUSIC, 0);
poolId = soundPool.load(this, R.raw.cat, 1);
soundPool.play(poolId, 1.0f, 1.0f, 1, 0, 1); 
```

此类日志错误：SoundPool: Unable to load sample: (null)。

任何想法都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:47:33.527

GoogleTV 上的 SoundPool 类不会加载 MP3 曲目。改用OGG

# jquery - Waiting for an ajax call to finish

> ID：14261235
> 
> 赞同：0
> 
> 时间：2013-01-10T15:22:35.677
> 
> 标签：jquery

I'm using jquery's sortable to resort a list. The items are numbered so I'd like to be able to indicate the new numbers as well after the resort. Originally, I reloaded the page after doing the sort. However, I've just "discovered" ajax and find that it's a potentially much cleaner solution. My code almost works except for one issue. When the page is first loaded before the sort, a bunch of span tags are hidden; after I do my ajax call, however, they become unhidden, and I'd like them to remain hidden. I've tried:

```
 $.ajax({
                url: "/main_scripts/sort_chapters_and_sections.php",
                type: "POST",
                data: newOrder,
                success: function(thing_reordered){                                            $(".inline_link_list").html(thing_reordered);

$("span").each(function(){
    if ($(this).attr('class').match(/\bspan_hidden/)){
         $(this).hide();
    }
});
}
}); 
```

However, after the call, my span_hidden tags become unhidden. My guess is that the ajax call isn't completed yet so that my "span_hidden" tags are not yet in the browser and subsequently, there's nothing yet to hide. If I could understand how to ensure that the ajax call is completed finished, I can test this theory out. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:55:49.647

if 语句似乎是错误的。此外，您不需要使用 each() 进行如此简单的搜索。

试试看嘛：

```
$('.span_hidden').hide(); 
```

# android - In app purchase: signature is ""

> ID：14261237
> 
> 赞同：1
> 
> 时间：2013-01-10T15:22:42.823
> 
> 标签：android, in-app-purchase

In **`purchaseStateChanged()`** I received signature as "" String, so I received bad response from our server, because it cannot verify the billing.

Why the signature is ""?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:37:45.267

您是否正在使用测试产品 ( `android.test.purchased`) 进行购买？测试产品永远不会向您发回签名以进行验证 - 只有购买实际产品才会。

# mysql - 查询计算错误

> ID：14261238
> 
> 赞同：0
> 
> 时间：2013-01-10T15:22:47.627
> 
> 标签：mysql, sql, math

我在生活中见过一些错误，但最让我吃惊的是这个。

我有一个包含`0.02`.

现在我正在尝试这个查询：

```
select rma.*,120.0/60.0*rma.amount as reward 
```

现在数学告诉我们结果将是`0.04`，但令人惊讶的是，MySql（版本 5.5.28）另有说法，并说它是：

```
0.03999999910593033 
```

我也试过不`.0`带数字，使用大括号，结果还是一样。

现在，所有奇数的情况都会发生相同的结果。例如`4.1`将是`8.199999809265137`

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:25:07.917

尝试`CAST`这样：

```
select rma.*, CAST((120.0 / 60.0 * rma.amount) AS DECIMAL(10,2)) as reward 
```

# jakarta-ee - 如果使用 Maven 更改了包名称，则无法使用 Netbeans 部署 ear

> ID：14261242
> 
> 赞同：2
> 
> 时间：2013-01-10T15:22:59.530
> 
> 标签：jakarta-ee, maven, netbeans, glassfish

为了有一个用于远程调用的常量 JNDI 名称，我想从 EAR 包名称中删除版本。我用 maven-ear-plugin 中的标签 < finalName > 来做。它工作正常，但是，当我使用 Netbeans（7.1.2 版）部署（运行）包时，它会引发异常： *java.lang.IllegalArgumentException: No archive for deployment*

似乎 Netbeans 总是期望像*${project.artifactId}-${project.version}.ear*这样的名称。如何改变这种行为？

编辑：只有在远程（Glassfish）服务器上部署时才会发生。

非常感谢！杰米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:47:22.920

我正在开发一个与您的结构相同的 Netbeans ear 项目，但是当我从 Netbeans 运行或调试应用程序时，它会部署`${project.artifactId}-${project.version}.ear`在`target`文件夹下，无论如何 Netbeans 不使用从 maven-ear-plugin 生成的 ear你可以手动部署它，我已经成功完成了。这是已知的 Netbeans 行为，例如您可以参考此[链接](http://netbeans.org/bugzilla/show_bug.cgi?id=213873)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:30:01.953

要为您的 EJB 获得一致的名称，您首先必须为您的应用程序获得一致的名称。应用程序的名称可以在应用程序描述符文件 application.xml 中使用标记设置`<application-name>YourGreatApp</application-name>`。

如果未设置应用程序名称，则使用 E​​AR 文件名作为应用程序名称。使用 Maven，您应该始终设置您的应用程序名称。

application.xml 文件位于 EAR 中的 META-INF/ 下。

# ruby - 如何根据第二列中的值设置第一列中的复选框？

> ID：14261247
> 
> 赞同：0
> 
> 时间：2013-01-10T15:23:06.097
> 
> 标签：ruby, watir, watir-webdriver, browser-automation

我正在使用 Ruby 和 Watir 自动执行一项任务。

我想根据第二列中的值是否与我的输入值匹配来设置一个复选框（位于表的第一列中）。例如，在以下代码片段中，值“brett58”与我的输入值匹配，因此我想设置与之关联的复选框。

```
<tr class="cuesTableRowOdd">
    <td align="center">
        <input class="content-nogroove" type="checkbox" name="result[1].chked" value="true">
        <input type="hidden" value="7bd67e4d-a59f-0143-3886-22c1d205a5c1" name="result[1].col[0].stringVal">
        <input type="hidden" value="brett58" name="result[1].col[1].stringVal">
    </td>
    <td align="left">
        <a class="cuesTextLink" href="userEdit.do?key=7bd67e4d-a59f-0143-3886-22c1d205a5c1">brett58</a>
    </td>
    <td align="left">brett</td>
    <td align="left">lee</td>
    <td align="left"></td>
</tr> 
```

但我无法做到。在上述情况下，以下行用于目的（因为我的输入值与第一行匹配）：

```
browser.table(:class, "cuesTableBg").checkbox(:name, "result[1].chked").click 
```

但它不能被使用，因为所需的值可能并不总是在第一行。

循环遍历所有行是一种选择，但效率低下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:08:51.117

我会做：

```
browser.table(:class, "cuesTableBg").rows.find{ |row| 
  row.cells[1].text == 'brett58'
}.checkbox.set 
```

基本上，这就是说在第二列中找到具有“brett58”的表的第一行。然后设置该行中的第一个复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:57:50.360

尝试这样的事情：

```
def set_checkbox(row_text_to_match)
  @browser.table(:class, "cuesTableBg").row(:text, /#{Regexp.escape(row_text_to_match)}/).checkbox(:name, "result[1].chked").set
end 
```

# plsql - 相交两个嵌套数组

> ID：14261253
> 
> 赞同：1
> 
> 时间：2013-01-10T15:23:23.040
> 
> 标签：plsql

以下代码给出“PL/SQL：ORA-00907：缺少右括号”。为什么？

```
select count(*)
into v_cnt
from (table(v_A) intersect table(v_B)); 
```

尽管

```
select count(*)
into v_cnt
from table(v_A); 
```

编译没有问题。v_A 属于 t_A 类型，由：

```
create or replace type t_A is table of varchar2(1 byte); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:32:51.317

您必须首先将两个结果集相交，然后计算元素，如下所示：

```
 select count(*)
   into   l_cnt
   from 
      (
         select * 
         from   table(v_A) 
      intersect 
         select * 
         from   table(v_B)
      ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T20:40:12.087

如果您在 PL/SQL 中执行此操作，您可能应该使用[`MULTISET INTERSECT`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators006.htm#i1035636).

它比使用 SQL 更简单，速度也快几个数量级。

通常使用 SQL 更简单、更快捷。但是在这种情况下，由于您已经在 PL/SQL 中，所以情况正好相反。您希望尽可能避免在它们之间切换。

```
--SQL Method: 8.5, 8.455, 8.502 seconds
--PL/SQL Method: 0.015, 0.016, 0.016 seconds
declare
    v_cnt number;
    v_a t_a := t_a('a','b','c');
    v_b t_a := t_a('a','b');
    v_c t_a;
begin
    for i in 1 .. 100000 loop
        --SQL method
        /*
        select count(*) into v_cnt
        from 
        (
            select * from table(v_A) 
            intersect 
            select * from table(v_B)
        );
        */

        --PL/SQL method
        v_c := v_a multiset intersect v_b;
        v_cnt := v_c.count;
    end loop;

    dbms_output.put_line(v_cnt);
end;
/ 
```

# javascript - 无法让 javascript 滚动条在另一个页面上工作。

> ID：14261256
> 
> 赞同：0
> 
> 时间：2013-01-10T15:23:30.107
> 
> 标签：javascript, jquery, html, css, scroll

**我在一个页面上有自定义滚动条，我设法开始工作。出于某种原因，我无法在不同的页面上得到同样的东西。页面之间的唯一区别是它们的内容。在工作页面上，我嵌入了 YouTube 视频，在另一个页面上，我嵌入了 Soundcloud 音频。出于某种原因，我只能看到位于屏幕错误一侧的滚动条的拇指。我是这个网站的新手，所以如果我可能会有点不耐烦，我会提前道歉。谢谢你。**

**工作页面 HTML：**

```
 <!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="utf8" />
        <link rel="stylesheet" type="text/css" media="all" href="css/mainstyle.css"/>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#scrollbar1').tinyscrollbar();   
        });
    </script>   
            <meta name="viewport" content="initial-scale=1" />

    </head>
    <body>
    <div id="background">
        <div id="wrapper">

        <div class="navigation">
            <ul id="mainmenu">
                <li><a href="index.html">Home</a></li>  
                <li><a href="band.html">Band</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="shows.html">Shows</a></li>
                <li><a href="music.html">Music</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li class="active"><a href="media.html">Media</a></li>
                <li><a href="store.html">Store</a></li>                         
            </ul>
        </div>

        <div class="article">

            <div class="mediacontainer">
            <div id="scrollbar1">
            <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
            <div class="viewport">
            <div class="overview">

                    <iframe width="853" height="480" src="https://www.youtube.com/embed/3LsB125vBWw" frameborder="0" allowfullscreen></iframe>
                    <iframe width="853" height="480" src="https://www.youtube.com/embed/0LUYdvWQ_uI" frameborder="0" allowfullscreen></iframe>
                    <iframe width="853" height="480" src="https://www.youtube.com/embed/PHI63zlRA0s?list=UUYgrxNCR_m-Vmsk5M2q3U7Q" frameborder="0" allowfullscreen></iframe>
                    <iframe width="853" height="480" src="https://www.youtube.com/embed/5UFCRnTYoWI?list=UUYgrxNCR_m-Vmsk5M2q3U7Q" frameborder="0" allowfullscreen></iframe>

            </div>
            </div>
            </div>
            </div>
        </div>

            <div class="footer">

                    <ul id="footermenu">
                        <li><a href="hello.html">Terms of use</a></li>
                        <li><a href="hello.html">Privacy Policy</a></li>
                        <li><a href="hello.html">Contact</a></li>
                   </ul>

            </div>

</div>
</div>
</body>
</html> 
```

**CSS：**

```
 .mediacontainer {
    margin-left: -250px;
    }
.musiccontainer {
    margin-left: -10px;
    }
#scrollbar1 { margin-left: 300px; }
#scrollbar1 .viewport { height: 800px; overflow: hidden; position: relative; padding-left:0;  }
#scrollbar1 .overview { list-style: none; position: absolute; left: 0; top: 0; padding: 0; margin: 0; }
#scrollbar1 .scrollbar{ background: /*transparent url(../imagesscroll/bg-scrollbar-track-y.png)*/no-repeat 0 0;background-color: rgba(55, 55, 55, 0.7); position: relative; background-position: 0 0; float: right; width: 15px; }
#scrollbar1 .track { background: /*transparent url(../imagesscroll/bg-scrollbar-trackend-y.png)*/ no-repeat 0 100%; height: 100%; width:13px; position: relative; padding: 0 1px; }
#scrollbar1 .thumb { background: transparent url(../imagesscroll/scrollbarthumb.png) no-repeat 50% 50%; height: 20px; left:-5px; width: 25px; cursor: pointer; overflow: hidden; position: absolute; top: 0; }
#scrollbar1 .thumb .end {no-repeat 50% 0; overflow: hidden; height: 5px; width: 25px; display:none; }
#scrollbar1 .disable { display: none; }
.noSelect { user-select: none; -o-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; } 
```

**页面 HTML 无效：**

```
<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="utf8" />
        <link rel="stylesheet" type="text/css" media="all" href="css/mainstyle.css"/>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#scrollbar1').tinyscrollbar();   
        });
    </script>
            <meta name="viewport" content="initial-scale=1" />

    </head>
    <body>
    <div id="background">
        <div id="wrapper">

        <div class="navigation">
            <ul id="mainmenu">
                <li><a href="index.html">Home</a></li>  
                <li><a href="band.html">Band</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="shows.html">Shows</a></li>
                <li class="active"><a href="music.html">Music</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="media.html">Media</a></li>
                <li><a href="store.html">Store</a></li>                         
            </ul>
        </div>
        <div class="article">
            <div class="musiccontainer">
            <div id="musicscrollbar1">
            <div class="musicscrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
            <div class="musicviewport">
            <div class="musicoverview">

            <iframe width="960" height="166" style="overflow:hidden; border:none;"  src=                "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38657166&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>
            <iframe width="960" height="166" style="overflow:hidden; border:none;"  src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F31700420&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>
            <iframe width="960" height="166" style="overflow:hidden; border:none;"  src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F30789244&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>
            <iframe width="960" height="166" style="overflow:hidden; border:none;"  src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F27683416&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>
            <iframe width="960" height="166" style="overflow:hidden; border:none;" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F10400567&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>
            <iframe width="960" height="450" style="overflow:hidden; border:none;" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1286812&amp;color=ee780a&amp;auto_play=false&amp;show_artwork=true"></iframe>

            </div>
            </div>
            </div>
            </div>

        </div>

            <div class="footer">

                    <ul id="footermenu">
                        <li><a href="hello.html">Terms of use</a></li>
                        <li><a href="hello.html">Privacy Policy</a></li>
                        <li><a href="hello.html">Contact</a></li>
                   </ul>

        </div>
          </div> 
    </div>
</body>
</html> 
```

**Javascript：**

```
(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false}};a.fn.tinyscrollbar=function(d){var c=a.extend({},a.tiny.scrollbar.options,d);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(q,g){var k=this,t=q,j={obj:a(".viewport",q)},h={obj:a(".overview",q)},d={obj:a(".scrollbar",q)},m={obj:a(".track",d.obj)},p={obj:a(".thumb",d.obj)},l=g.axis==="x",n=l?"left":"top",v=l?"Width":"Height",r=0,y={start:0,now:0},o={},e="ontouchstart" in document.documentElement;function c(){k.update();s();return k}this.update=function(z){j[g.axis]=j.obj[0]["offset"+v];h[g.axis]=h.obj[0]["scroll"+v];h.ratio=j[g.axis]/h[g.axis];d.obj.toggleClass("disable",h.ratio>=1);m[g.axis]=g.size==="auto"?j[g.axis]:g.size;p[g.axis]=Math.min(m[g.axis],Math.max(0,(g.sizethumb==="auto"?(m[g.axis]*h.ratio):g.sizethumb)));d.ratio=g.sizethumb==="auto"?(h[g.axis]/m[g.axis]):(h[g.axis]-j[g.axis])/(m[g.axis]-p[g.axis]);r=(z==="relative"&&h.ratio<=1)?Math.min((h[g.axis]-j[g.axis]),Math.max(0,r)):0;r=(z==="bottom"&&h.ratio<=1)?(h[g.axis]-j[g.axis]):isNaN(parseInt(z,10))?r:parseInt(z,10);w()};function w(){var z=v.toLowerCase();p.obj.css(n,r/d.ratio);h.obj.css(n,-r);o.start=p.obj.offset()[n];d.obj.css(z,m[g.axis]);m.obj.css(z,m[g.axis]);p.obj.css(z,p[g.axis])}function s(){if(!e){p.obj.bind("mousedown",i);m.obj.bind("mouseup",u)}else{j.obj[0].ontouchstart=function(z){if(1===z.touches.length){i(z.touches[0]);z.stopPropagation()}}}if(g.scroll&&window.addEventListener){t[0].addEventListener("DOMMouseScroll",x,false);t[0].addEventListener("mousewheel",x,false)}else{if(g.scroll){t[0].onmousewheel=x}}}function i(A){a("body").addClass("noSelect");var z=parseInt(p.obj.css(n),10);o.start=l?A.pageX:A.pageY;y.start=z=="auto"?0:z;if(!e){a(document).bind("mousemove",u);a(document).bind("mouseup",f);p.obj.bind("mouseup",f)}else{document.ontouchmove=function(B){B.preventDefault();u(B.touches[0])};document.ontouchend=f}}function x(B){if(h.ratio<1){var A=B||window.event,z=A.wheelDelta?A.wheelDelta/120:-A.detail/3;r-=z*g.wheel;r=Math.min((h[g.axis]-j[g.axis]),Math.max(0,r));p.obj.css(n,r/d.ratio);h.obj.css(n,-r);if(g.lockscroll||(r!==(h[g.axis]-j[g.axis])&&r!==0)){A=a.event.fix(A);A.preventDefault()}}}function u(z){if(h.ratio<1){if(g.invertscroll&&e){y.now=Math.min((m[g.axis]-p[g.axis]),Math.max(0,(y.start+(o.start-(l?z.pageX:z.pageY)))))}else{y.now=Math.min((m[g.axis]-p[g.axis]),Math.max(0,(y.start+((l?z.pageX:z.pageY)-o.start))))}r=y.now*d.ratio;h.obj.css(n,-r);p.obj.css(n,y.now)}}function f(){a("body").removeClass("noSelect");a(document).unbind("mousemove",u);a(document).unbind("mouseup",f);p.obj.unbind("mouseup",f);document.ontouchmove=document.ontouchend=null}return c()}}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:26:29.263

在第二个 HTML 中，您有`$('#scrollbar1').tinyscrollbar();`，但看起来您将 div 重命名为 musicscrollbar1。这很可能是问题所在。所以只需将行更改为`$('#musicscrollbar1').tinyscrollbar();`

# perl - 使用 PAR::Packer 编译 perl 脚本（包括模块）

> ID：14261260
> 
> 赞同：2
> 
> 时间：2013-01-10T15:23:34.173
> 
> 标签：perl, compilation, cpan, perl-module, strawberry-perl

我知道这很丑，但我需要在 Windows 上为客户端编译一个 perl 脚本，所以基本上我试图用我的 .pl 脚本制作一个 .exe。

我正在使用通过 cpan 安装的 PAR::Packer，并且在成功之前我编译了一堆简单的脚本。

它以前工作正常，但现在看起来不工作，因为我添加了 use Text::CSV;

它可以工作，但是当我运行 .exe 时，它​​会出现此错误：

```
Can't locate Text/CSV_PP.pm in @INC (@INC contains: CODE(0x25f1f84) C:\Users\user
\AppData\Local\Temp\par-6b6f6e74757a\cache-6d4baa68e36871e6407210ca47953c635f
81e612\inc\lib C:\Users\user\AppData\Local\Temp\par-6b6f6e74757a\cache-6d4baa6
8e36871e6407210ca47953c635f81e612\inc CODE(0x239f2ec) CODE(0x239f67c)) at (eval
18) line 2.
 at script/csvutil.pl line 5.
Compilation failed in require at script/csvutil.pl line 5.
BEGIN failed--compilation aborted at script/csvutil.pl line 5. 
```

基本上我所做的是：

```
pp -o csvutil.exe csvutil.pl 
```

我尝试通过以下方式添加强制加载模块：

```
pp -M Text::CSV csvutil.pl 
```

我想我错过了一些东西......

我正在使用草莓 perl 5.16

代码开头：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;
use Text::CSV;

my $file = $ARGV[0];
my @rows;
my $csv = Text::CSV->new ( { binary => 1 ,sep_char => ",",allow_loose_quotes => 1, eol=> $/, always_quote =>1 } )  # should set binary attribute.
             or die "Cannot use CSV: ".Text::CSV->error_diag ();

     ...# basically print all the lines 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:02:31.900

Text::CSV 实际上只是一个界面。它自动确定使用哪个后端模块：纯 Perl Text::CSV_PP 或 XS（C 代码）Text::CSV_XS。PAR 正在检测对 Text::CSV 的静态依赖，但无法解析动态依赖。更改您的`-M`选项以包括 Text::CSV_XS 或 Text::CSV_PP。如果您安装了 XS 版本，请捆绑它。它要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:11:31.777

路径可能有问题`@INC`。或许你可以在[这里找到你的答案](https://stackoverflow.com/questions/11780324/inc-perl-cant-locate-class-csv-pm-in-inc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:54:41.240

我建议远离 PAR 并使用[Cava Packager](http://www.cavapackager.com/)。我过去使用过 PAR，无论我是否会打包应用程序，都会受到打击或错过。它似乎不能很好地处理某些模块，当你遇到一个它无法处理的时候，资源是稀疏的，而且修复通常是肮脏的 hack。Gtk+/Tk 应用程序确实给 PAR 带来了困难。

另一方面，Cava Packager 非常健壮、积极维护，并且能够处理我扔给它的所有模块。它允许您/社区创建有关如何处理特定模块的特殊情况的规则。我遇到的任何问题都已通过活动邮件列表快速解决。它提供了一个 GUI 来配置项目设置。它支持 InnoSetup 在打包应用程序时自动创建安装程序。它得到积极维护，目前正在努力成为开源。在我找到 Cava Packager 之前，我几乎放弃了将 perl 脚本打包为可执行文件以进行分发的想法。Cava 超出了我在使用 PAR 和 ActiveState 的 perl2exe 后设定的预期。听起来我是 Cava 的开发人员，但我真的不是！非常高兴。

我知道这并不能完全回答您提出的问题，但它确实解决了您的问题，我认为您可能会发现 Cava 和我一样有用。

# sms - 如果收到更多短信，GSM 接收器会发生什么

> ID：14261269
> 
> 赞同：0
> 
> 时间：2013-01-10T15:24:14.597
> 
> 标签：sms, gsm, sms-gateway

嗨，我想知道如果 gsm 调制解调器一次接收很多条短信，它会发生什么。一次说大约 1000 条短信，它会在每 2 分钟后再次收到 1000 条短信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:39:11.333

根据调制解调器的内存大小，它将耗尽内存（您可以在 SIM 上存储一定数量的 SMS，在设备上存储一定数量，具体取决于可用内存）。将“无法处理”发送回 SMSC，原因是“由于内存不足，无法存储短消息”。（3GPP 27.005、2.4.1.10 和 2.5.2.7）

SMSC（短消息服务中心）将在其定义的超时期限内重新尝试发送消息。如果在此期间没有管理，它将通知发送方失败。

接收大量短信的竞赛服务器和类似服务器被设置为处理这种情况，并且通常直接连接到短信中心（即他们通过互联网连接获取短信，不依赖调制解调器的内存）

# c++ - 错误 C2246：无法访问私有成员

> ID：14261273
> 
> 赞同：0
> 
> 时间：2013-01-10T15:24:30.430
> 
> 标签：c++, visual-c++, visual-studio-2010

我被这个编译器错误难住了，我一生都无法弄清楚发生了什么。整个错误对我来说没有多大意义，更奇怪的是，大部分代码都是从以前运行良好的项目中复制而来的。

错误和代码如下：

```
1>ClCompile:
1>  main.cpp
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\fstream(1347): error C2248: 'std::basic_ios<_Elem,_Traits>::basic_ios' : cannot access private member declared in class 'std::basic_ios<_Elem,_Traits>'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ios(176) : see declaration of 'std::basic_ios<_Elem,_Traits>::basic_ios'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          This diagnostic occurred in the compiler generated function 'std::basic_fstream<_Elem,_Traits>::basic_fstream(const std::basic_fstream<_Elem,_Traits> &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>
1>Build FAILED. 
```

这是*main.cpp* * 的非常小的代码：

```
#include <Mage/File/PlainText.h>
#include <cstdio>

int main(int argc, char** argv) {
    Mage::FilePlainText file = Mage::FilePlainText("shadow_pcf_gaussian_fragment.glsl");
    printf("%s\n", file.content().c_str());

    while (true) { }

    return 0;
} 
```

和代码**file.content()：**

```
Mage::String FilePlainText::content() {
    Mage::String src;

    try {
        open();

        // We allocate enough memory to copy the entire content to memory.
        mHandle.seekg(0, std::ios::end);
        src.reserve(mHandle.tellg());

        // Set pointer to 0 and copy to memory.
        mHandle.seekg(0, std::ios::beg);
        src.assign((std::istreambuf_iterator<char>(mHandle)), 
                    std::istreambuf_iterator<char>());

        close();
    } catch (Mage::Exception& e) {
        throw e;
    }

    return src;
} 
```

我的猜测是它与此有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:28:46.577

我猜`FilePlainText`是（直接或间接）派生​​自`fstream`，或者具有不可复制的类型成员`fstream`（在这种情况下，复制构造函数将尝试复制），所以

```
Mage::FilePlainText file = Mage::FilePlainText("shadow_pcf_gaussian_fragment.glsl"); 
```

是非法的。为什么不简单：

```
Mage::FilePlainText file("shadow_pcf_gaussian_fragment.glsl"); 
```

我怀疑你真的想要复制初始化。

Edit - you should probably make the copy constructor of `FilePlainText` `private` to prevent attempts at copying it.

# c# - Use threads only for web service call and not for Db call

> ID：14261275
> 
> 赞同：2
> 
> 时间：2013-01-10T15:24:33.353
> 
> 标签：c#, multithreading, web-services, sublist

My app in c# is working this way. I start as many threads as it is value in config file (dynamic creation of threads). What every thread is doing is: it goes to DB, calls stored procedure (if I have 60 threads, there are deadlocks). After that, every thread is calling web service, and going back to update rows. Here is how it is looking like

```
List<Message> messages =getMessages(ThreadNO);//goes to DB

if (messages != null)
{
    foreach (Message bm in messages)
    {
        if (bm.Status)
        {
            try
            {
                bm.send();//calls Web service
            }
            catch (Exception ex)
            {
                LOG.Logger.Error(ex.ToString());
            }
            updateStatus(bm);//goes back to DB
        }
        else
        {
            if (bm.subscribe())
                updateSubscription(bm);//calls WS
            else
                updateUnsuccessfulSubscription(bm);//calls WS
        }
    }
} 
```

I would like to do this in a DB less expensive way. I would like only once to go to DB, and after that to create sublists from object messages. After that I will create as many threads as sublists, and those sublists I will pass to send() method. Each thread will call send() method. But when I finish everything, how can I get out of threads and only once call stored procedure to update (updateMessage() method)? How can I do this in a way to only **use threads only to call web service**, and at same time to **call Db out of threads**?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:57:03.747

我认为[`Parallel.ForEach()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)在你的情况下会有用。

您要做的是从数据库中获取列表，然后使用并行处理项目，`Parallel.ForEach()`完成后，最后更新数据库。

就像是：

```
var messages = GetAllMessages(); //goes to DB

Parallel.ForEach(
    messages,
    new ParallelOptions { MaxDegreeOfParallelism = threadCount },
    message => { /* your code that calls the web service */ });

UpdateAll(messages); // goes back to the DB 
```

`Parallel.ForEach()`不保证`threadCount`会使用线程，但在您的情况下，您可能很快就会达到该数字，因为调用 web 服务会阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:45:04.950

我不确定我是否完全理解您的问题，但是如果您想一次将数据库调用限制为一个，您可以使用`lock:`

```
// put this field in a class somewhere
static object gate = new object();

// then wrap all your database calls in locks:
lock( gate )
{
  updateStatus(bm);
} 
```

这样，无论有多少线程尝试同时调用数据库，一次只能运行一个调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:00:32.840

先做你的选择，在一个线程上

然后使用线程来收集消息（我会使用[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd537608.aspx)，滚动你自己的线程需要很多麻烦）

现在，您的选择无法进行更新，但即使在单个线程中，您仍然可以与其他任务发生死锁，您的代码应该期待并处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:52:03.330

您应该研究消费者/生产者模式，例如参见[http://en.wikipedia.org/wiki/Producer-consumer_problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)

您的初始化将访问数据库并启动生产者（每个都是单独的线程）。这些将调用 Web 服务并将状态记录在共享的内存数据结构（队列）中。

单个消费者（线程）将在共享队列中查找元素，并将它们保存在数据库中并从队列中删除。

# c++ - std::bad_alloc ulimit

> ID：14261276
> 
> 赞同：2
> 
> 时间：2013-01-10T15:24:37.783
> 
> 标签：c++, bad-alloc

I'm working on a 32bit Ubuntu 12.04\. The RAM is 7.7 GB. When I run a certain process (written in C++) and reaches 50% of RAM usage, such process throws a "std::bad_alloc". The strange thing is that heap size is unlimited (command ulimit -v returns "unlimted"). So which can be the cause?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:28:01.330

在大多数 32 位平台上，进程不可能寻址超过 4GB（2^32 字节）的虚拟内存。在 32 位 Linux 上，为内核保留 1GB 的地址空间，因此用户进程被限制为 3GB 的可寻址内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:29:27.677

在 32 位机器上，即使使用[PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)，单个进程地址空间也不能大于 4GB。

# php - Magento 每个商店的价格不同

> ID：14261278
> 
> 赞同：2
> 
> 时间：2013-01-10T15:24:41.390
> 
> 标签：php, zend-framework, magento

我可以从这里将价格更改为全球/每个网站：系统 > 配置 > 目录 > 价格。

我有一个包含多家商店的网站。我想为每个商店设置一个不同的价格（不同的属性，不仅仅是价格）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:15:59.770

`innoext`为`store price`

单击[此处](http://innoexts.com/promotion/store-view-pricing/#.UO-RuHfcXyQ)获取

他们说它只适用于`Meganto V 1.5.0.1, 1.5.1.0, 1.6.0.0, 1.6.1.0, 1.6.2.0.`

但它适用于`Magento V 7 also`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:11:28.317

有一个很好的免费扩展可以为不同商店的产品设置不同的价格。[在这里检查](http://innoexts.com/promotion/store-view-pricing/)

# sql-server - 收银机的最佳数据库解决方案

> ID：14261281
> 
> 赞同：-2
> 
> 时间：2013-01-10T15:24:46.977
> 
> 标签：sql-server, sql-server-2008, sql-server-ce

我正在开发一台每天处理超过 20 笔交易的收银机，我希望您对适合我需要的数据库提出建议。在可维护性和有效性的情况下，sql server express 或 sql server ce 哪个是最好的。很抱歉有一个新手问题，但我需要你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:34:04.033

Express 版本旨在安装，而 Compact 版本旨在捆绑在您的应用程序中，这意味着开发人员可以在应用程序中分发它们。

因此，如果您正在为一家公司开发，请在您的最终产品中嵌入精简版。而且，SQL Compact 没有单独的进程，它与您的进程一起运行。

在[维基百科](http://en.wikipedia.org/wiki/SQL_Server_Compact)上：

> 与其他版本的 Microsoft SQL Server 不同，SQL CE 与托管它的应用程序在进程内运行。

此外，数据库大小限制可能是一个问题。SQL CE 仅承载 4 GB，而 Express 2008 R2 及更高版本可以处理 10 GB。但是较小的数据库大小也意味着较低的内存占用，CE 通常为 5 MB（同样来自 Wikipedia），EE 最多为 1 GB。

Compact Edition 的大小为 2 MB，而 Express 安装了一个服务器。Express 在单个物理处理器上的多个内核上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:37:36.813

如果您想选择最适合您需要的 MS SQL Server 数据库版本，请阅读此站点： http: [//www.microsoft.com/sqlserver/en/us/editions.aspx](http://www.microsoft.com/sqlserver/en/us/editions.aspx)。

关于较小版本的一篇很好的博客文章在这里：[http ://erikej.blogspot.de/2011/01/comparison-of-sql-server-compact-4-and.html](http://erikej.blogspot.de/2011/01/comparison-of-sql-server-compact-4-and.html)

# sqlite - SQLite + windsor.castle 版本问题

> ID：14261282
> 
> 赞同：0
> 
> 时间：2013-01-10T15:24:48.403
> 
> 标签：sqlite, castle-windsor, s#arp-architecture

我正在尝试运行一些集成测试并使用它：

```
public class ServiceLocatorInitializer
{
public static void Init()
{
    IWindsorContainer container = new WindsorContainer();

    container.Register(
        Component
        .For(typeof(IEntityDuplicateChecker))
        .ImplementedBy(typeof(EntityDuplicateChecker))
        .Named("entityDuplicateChecker"));

    container.Register(
        Component.For(typeof(ISessionFactoryKeyProvider))
        .ImplementedBy(typeof(DefaultSessionFactoryKeyProvider))
        .Named("sessionFactoryKeyProvider"));

    ServiceLocator.SetLocatorProvider(() => new WindsorServiceLocator(container));
}
} 
```

加上这个：

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
      <session-factory>
        <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
        <property name="dialect">NHibernate.Dialect.SQLiteDialect</property>
        <property name="connection.driver_class">NHibernate.Driver.SQLite20Driver</property>
        <property name="connection.connection_string">Data Source=:memory:;Version=3;New=True;</property>
        <property name="connection.release_mode">on_close</property>
        <property name="show_sql">true</property>
        <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
      </session-factory>
    </hibernate-configuration> 
```

我有对 Castle.Windsor 版本 3.1.0.0 的引用，但收到此错误：

> *无法加载文件或程序集“Castle.Windsor，Version=2.5.1.0，Culture=neutral，PublicKeyToken=407dd0808d44fbdc”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）*

不知道是什么原因以及如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:18:28.380

WindsorServiceLocator 是针对旧版本的 Castle 构建的，尚未更新。

您需要在测试项目的 App.Config 中添加 BindingRedirect，您应该可以通过在 Visual Studio 中打开 Nuget 包管理器控制台来添加它们，选择测试项目并运行

```
Add-BindingRedirect 
```

检查 App.Config，您现在应该有程序集的绑定重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:00:48.220

NHibernate.ByteCode.Castle 依赖于 Castle，因为它使用 DynamicProxy 作为其代理工厂。NHibernate 3.2 解决了这个问题，它有自己的代理工厂，不依赖于 Castle。如果可能，将 NHibernate 升级到至少 3.2 并从您的 nhibernate 配置文件中删除 proxyfactory 配置。

# wpf - 发布 wpf 时 FontFamily 的问题

> ID：14261283
> 
> 赞同：2
> 
> 时间：2013-01-10T15:24:48.083
> 
> 标签：wpf, font-family

我在整个应用程序中使用了 FontFamily="Swiss 721" ，当它安装在其他没有安装 Visual Studio 2010 的机器上时出现问题。问题是文本没有使用 Swiss 721 出现，而​​是使用默认字体系列（Times New Roman）出现。

任何想法？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:49:06.897

我已经安装了 Visual Studio 2010，但我没有“swiss 721”字体。谷歌搜索我发现这不是免版税字体。要将其与您的应用程序一起分发，您需要向生产者支付一些许可证：

[比特流](http://www.paratype.com/btstore/fonts/Swiss-721.htm)

# php - jQuery 只是刷新页面。- 尝试上传文件

> ID：14261284
> 
> 赞同：0
> 
> 时间：2013-01-10T15:24:59.430
> 
> 标签：php, jquery, html, file-upload

我正在尝试上传文件，但我想确保它是正确的文件类型，然后再将其发送到我的上传功能。所发生的只是页面刷新，我什至没有让我的警报框显示给我。

jQuery：

```
<script>
$('#submit').click(function (e){
    e.preventDefault();
    if(openFile($('input#file').val()) == 1){
        window.alert("Upload Successful!");
        ajax_route(upload());
    }else{
        window.alert("Upload Failed!");
    }
    });

function ajax_route(action_requested){ 
$.post("upload_process.php", {action : action_requested}, function(data){
    if (data.length>0){ 
        alert("Hoorah! Completed the action requested: "+action_requested); 
    } 
});

function openFile(file) {
var extension = file.substr( (file.lastIndexOf('.') +1) );
if ($('input#select').val == 1){
switch(extension) {
    case 'csv':
        return 1;
    default:
        return 0;
    }
}else if ($('input#select').val == 2){
switch(extension) {
    case 'xls':
        return 1;
    default:
        return 0;
    }
}else{
switch(extension) {
    case 'doc':
        return 1;
    default:
        return 0;
    }
}
};
</script> 
```

HTML 表单：

```
<div id="fileupload">
<form name="fileupload" id="fileupload" action="" method="POST" enctype="multipart/form-data">
<input type="text" name="select" id="select" value="" style="display:none;">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" id="submit" name="submit" value="Submit">
</form>
</div> 
```

PHP上传功能：

```
<?php
function upload(){
$select = $_POST["select"];

if($select == "1"){
    $path = "docs/tmtmasterdata.csv";
}elseif ($select == "2"){
    $path = "docs/A.2012_TMT_Vendor_Form.xls";
}elseif ($select == "3"){
    $path = "docs/z.Credit_Card_Authorization.doc";
}elseif ($select == "4"){
    $path = "docs/z.TMT_Customer_Credit_App.doc";
}

  if($_FILES['file'] != null){
    if(copy($_FILES['file']['tmp_name'],$path)){
        ?><script>window.alert("Upload Successful!");</script><?php
    }else{
        ?><script>window.alert("Upload Failed!");</script><?php
    }
  }
}
?> 
```

# mysql - 子查询获取最后一条记录

> ID：14261290
> 
> 赞同：0
> 
> 时间：2013-01-10T15:25:10.227
> 
> 标签：mysql, sql

我有 2 张桌子：`User`和`Session`. 对于每个用户，我想知道会话表中的最后一条记录是否是去年创建的。

我尝试了以下方法，但它不起作用：

```
SELECT *
FROM(
    SELECT MAX(`Session`.acDateF) as MaxDateF
    FROM `Session`
    WHERE `Session`.acType='1'
) as AcDate
GROUP BY `Session`.userId) 
WHERE YEAR(`Session`.acDateF) =YEAR(CURRENT_DATE())-1 
```

如果用户今年在表中有记录，则`Session`它不会出现在结果中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:33:38.320

你的问题不是很清楚，但听起来你想要这样的东西：

```
SELECT * 
FROM `Session` s
INNER JOIN 
(
    SELECT MAX(`Session`.acDateF) as MaxDateF, `Session`.userId
    FROM `Session`
    WHERE `Session`.acType='1'
        AND YEAR(s.acDateF) =YEAR(CURRENT_DATE())-1
    GROUP `Session`.userId
) as AcDate
    ON s.userId = AcDate.userId
    AND s.acDateF = AcDate.MaxDateF; 
```

或者，如果您想要用户数据：

```
SELECT * 
FROM `user` u
INNER JOIN 
(
    SELECT MAX(`Session`.acDateF) as MaxDateF, `Session`.userId
    FROM `Session`
    WHERE `Session`.acType='1'
        AND YEAR(s.acDateF) =YEAR(CURRENT_DATE())-1
    GROUP `Session`.userId
) as AcDate
    ON u.userId = AcDate.userId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:33:16.140

```
SELECT
    MAX(`Session`.acDateF) as MaxDateF,
    `Session`.userId
FROM `Session`
WHERE `Session`.acType='1'
GROUP BY `Session`.userId
having MAX(YEAR(`Session`.acDateF)) as MaxDateF =YEAR(CURRENT_DATE())-1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:34:05.497

这是一种方法。它使用子句中的相关子查询`where`来获取上一年的最后日期：

```
select *
from session s
where s.acDatef = (select MAX(se.acDatef)
                   from session s2
                   where s2.userid = s.userid and
                         YEAR(`Session`.acDateF) =YEAR(CURRENT_DATE())-1
                  ) 
```

# jquery - 气泡图在选择时将项目置于顶部

> ID：14261291
> 
> 赞同：2
> 
> 时间：2013-01-10T15:25:12.403
> 
> 标签：jquery, svg, charts, kendo-ui

我想在这里做两件事。

1.  在网格中选择时在顶部显示气泡。（是否有 z-index 属性？）
2.  在选择时获得与鼠标悬停相同的动画。（缩放气泡大小）

我这里有代码供参考。任何帮助，将不胜感激。

[http://jsbin.com/alupin/22/](http://jsbin.com/alupin/22/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:50:30.140

回答您的问题：

*   关于`z-index`：您可能已经意识到，图表是使用`SVG`. 所以答案其实[就在这里](https://stackoverflow.com/a/482147/1802671)

> SVG 中的 Z 索引由元素在文档中出现的顺序定义。如果要将特定形状置于顶部，则必须更改元素顺序。

*   关于`resizing`：每个`bubble`都是 SVG `circle`，因此您可以调整气泡的大小（就像您在事件处理程序中所做的那样） `mouseover`，`mouseout`但是无法将原始数据与`circle`元素链接（以可靠的方式），所以您不能。

**编辑**：如果您想重新排序元素（通过将元素放在列表末尾来模拟 z-index）。您可能会使用以下代码：

```
var previous = undefined;
$("circle").live("mouseover", function () {
    previous = $(this).prev();
    $(this).parent().append($(this));
    var radius = 0.00;
    currentRadius = this.r.baseVal.value;
    radius = this.r.baseVal.value * 1.4;
    $(this).animate({svgR: radius }, {
        duration: 200
    });
});

$("circle").live("mouseout", function () {
    if (previous && previous.length > 0) {
        $(this).insertAfter(previous);
    } else {
        $(this).parent().prepend($(this));
    }
    $(this).animate({svgR: currentRadius }, {
        duration: 200
    });
}); 
```

跑到[这里](http://jsfiddle.net/OnaBai/yVS27/)

如果您想根据颜色订购气泡，您应该使用：

```
function onGridSelectionChange(arg) {
    var grid = this;
    var selectedItems = this.select();
    $.map(jobGrowth, function (item) {
        item.color = "#8ebc00";
    });

    $.map(selectedItems, function (item) {
        SetColor(grid.dataItem(item));
    });

    createChart();
    var chart = $("#chart").data("kendoChart");
    chart.refresh();

    var listItems = $("circle");
    var parent = listItems.parent();
    listItems.sort(function(a,b) {
        var a1 = a.getAttribute("fill"), b1 = b.getAttribute("fill");
        if (a1 == b1) return 0;
        return a1 > b1 ? -1 : 1;
    });
    parent.html(listItems)
} 
```

[在这里](http://jsfiddle.net/OnaBai/yVS27/1/)测试

# php - 如何在 PHP 中继续之前等待回调

> ID：14261295
> 
> 赞同：0
> 
> 时间：2013-01-10T15:25:39.960
> 
> 标签：php, api, callback

我正在使用银行 API 开发在线支付解决方案。

当用户在银行网站上输入他的信用卡号（所以我不必处理 PCI 合规性）时，API 会回调我的一个页面以发送交易响应（批准、时间、金额等） .) 然后调用我的“返回 URL”将客户带回我的网站，但除了确认号之外没有任何信息。

我有一些信息要显示在 API 传输到回调的“返回 URL”上。因此，我决定将回调的数据存储在我的数据库中，以便稍后在“返回 URL”上检索它

如何确定我的“返回 URL”回调完成了它的操作并且我可以开始从数据库中检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:37:11.413

不知道 API 就很难说，但您肯定必须能够使用银行 API 检查确认号码，以检查它是否是“真实的”确认号码。

对您的“返回 URL”进行此检查，然后将收到的信息与初始回调时存储在数据库中的信息进行匹配。如果信息不匹配或不在您的数据库中，则抛出“等待/处理”.gif 文件并每 10 秒重试一次，直到您收到结果，否则处理超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:30:35.390

通常，您总是在 reutrn url 上向客户显示成功，但不提供任何下载。关于产品下载或确认邮件的信息将从回调 url 触发。

因为仍然不可能等待 api 回调，所以您只能等待回调并处理订单。

# javascript - 如果 div 被溢出隐藏，则滚动

> ID：14261296
> 
> 赞同：0
> 
> 时间：2013-01-10T15:25:41.233
> 
> 标签：javascript, jquery, jquery-selectors, scroll

我正在寻找检测类 '.selected' 的 div 何时低于其容器 div 的底部（被溢出隐藏：隐藏）。如果是，则向下滚动容器的内容以显示下一个“页面”，方法是滚动容器高度的等效项，或者滚动直到“.selected”再次位于其容器的顶部。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:38:19.597

我使用`scrollTo`了我在评论中发布的链接中的一些数学来做到这一点：

```
var top = it.position().top; 
var bd = top + it.height();     
var ch = $('.tab-demo-content').height();     
if(bd>ch){  //if focused item isn't visible, scroll to it
    $(it).closest('.tv-container-vertical').scrollTo(it,500);   //this finds its parent container and scrolls it
} 
```

*   `bd`=从容器顶部到所选项目底部的距离
*   `ch`= 内容容器高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T08:25:11.977

适当的本机（非 jquery）javascript 代码是：

```
element.scrollIntoView(); // Equivalent to element.scrollIntoView(true)
element.scrollIntoView(alignToTop); // Boolean arguments
element.scrollIntoView(scrollIntoViewOptions); // Object argument 
```

（参见[https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)）

大多数现代浏览器也支持 scrollIntoViewIfNeeded() ：

```
element.scrollIntoViewIfNeeded() 
```

# login - 这种登录方式叫什么

> ID：14261300
> 
> 赞同：0
> 
> 时间：2013-01-10T15:25:57.750
> 
> 标签：login, terminology, nomenclature

没有用户名和密码的登录类型是否有通用名称？

示例：向您的电子邮件发送唯一链接和密码的网站，以便只有您可以访问某些信息。但是，您永远不需要明确输入用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:29:24.970

这将属于基于令牌的身份验证。使用此类链接，这些令牌（链接中的唯一 ID）通常会在使用一次后过期。但是，在使用 API 时也使用相同的方案，其中用户拥有一个 API 令牌，可用于以用户身份访问 API。这解决了每次都必须通过网络发送密码的问题。

# android - 安卓GetView

> ID：14261301
> 
> 赞同：-1
> 
> 时间：2013-01-10T15:25:58.290
> 
> 标签：android

我有两个 gridView、两个 ArrayList 数据和两个不同的 ArrayAdapter，但为什么我看到它们的数据相同 - “2”？

```
data1.add("1");
ArrayAdapter<String> listAdapter1 = new ArrayAdapter<String>(this,  R.layout.item3, R.id.editText1, data1) {
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = LayoutInflater.from(getContext()).inflate(R.layout.item3, null);
        }
        final String theData = getItem(position);
        final EditText editText = (EditText) convertView.findViewById(R.id.editText1);
        editText.setText(theData);
        editText.addTextChangedListener(new MyTextWatcher(position));                   
        return convertView;
    }
};
gvMain1.setAdapter(listAdapter1);

data2.add("2");
ArrayAdapter<String>  listAdapter2 = new ArrayAdapter<String>(this,  R.layout.item3, R.id.editText1, data2) {
    @Override
    public View getView(final int position, View convertView, ViewGroup parent){
        if (convertView == null) {
            convertView = LayoutInflater.from(getContext()).inflate(R.layout.item3, null);
        }
        final String theData = getItem(position);
        final EditText editText = (EditText) convertView.findViewById(R.id.editText1);
        editText.setText(theData);
        editText.addTextChangedListener(new MyTextWatcher(position));                   
        return convertView;
    }
};
gvMain2.setAdapter(listAdapter2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:42:58.953

我创建类：

```
public class MyArrayAdapter extends ArrayAdapter<String> {
    private final Activity context;
    private final ArrayList<String> names;

    public MyArrayAdapter(Activity context, ArrayList<String> names) {
        super(context, R.layout.item3, names);
        this.context = context;
        this.names = names;
    }

    static class ViewHolder {

        public EditText editText;
    }

   public ArrayList<String> getData()
   {
       return this.names;
   }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.item3, null, true);
            holder = new ViewHolder();
            holder.editText  = (EditText) rowView.findViewById(R.id.editText1);
            rowView.setTag(holder);
        } else {
            holder = (ViewHolder) rowView.getTag();
        }

        holder.editText.setText(names.get(position));
        holder.editText.addTextChangedListener(new MyTextWatcher(position));    
        return rowView;
    }
    class MyTextWatcher implements TextWatcher 
    {
        private int position;

        public MyTextWatcher(int position) 
        {
                this.position = position;
        }

        public void afterTextChanged(Editable s) 
        {
            names.set(position, s.toString());
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) 
        {
        }

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) 
        {
        }

   }
} 
```

并从我的活动中调用它：

```
 final MyArrayAdapter myAd1=new MyArrayAdapter(this,data1);
final MyArrayAdapter myAd2=new MyArrayAdapter(this,data2);
     gvMain1.setAdapter(myAd1);
     gvMain2.setAdapter(myAd2); 
```

# javascript - 使用 Python 中的美丽汤从网站上的 javascript 结构中提取数据的问题

> ID：14261306
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:03.490
> 
> 标签：javascript, python, json, python-2.7, html-parsing

我正在尝试从使用 Javascript 结构加载数据的网站上抓取数据。我使用了这个问题的解决方案，[使用 html 标签来解决这个问题，同时使用漂亮的汤](https://stackoverflow.com/questions/14121788/issue-with-html-tags-while-scraping-data-using-beautiful-soup)来完成这个问题。之后，获取 JSON 数据字典，我对其进行迭代以成功获取设备名称和价格数据。

上述问题的解决方案中提到的代码实际上是从具有设备名称和价格的窗口中提取数据，其属性在代码中提到为`window.rates`。

**问题：**如果你看一下网站的结构，它有 3 个部分。

1.  第一部分包含带有计划名称及其其他详细信息的窗口
2.  第二部分包含带有设备名称和价格的窗口（这是我当前正在从中抓取数据的窗口）
3.  **第三部分包含计划名称、设备名称、价格及其每月价格**

**我想从第三部分中提取数据，因为我想要所有 4 个字段（计划名称、设备名称、价格、每月价格）**。不过，我可以使用上述问题的解决方案从第一和第二部分抓取数据。

现在，**我无法找到在第 3 部分中加载数据的 javascript，**以及我必须用来获取第 3 部分数据的 JSON 字典的属性（例如，第 2 部分的 window.rates）。

此外，当我们滚动第二部分的窗口时，网站第三部分中的数据会发生变化。

PS：我尝试打印页面上运行的所有脚本以找出在第三部分加载数据的脚本，但这没有任何帮助。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:54:22.930

您提供了指向您之前的问题的链接，其中提到了您感兴趣的网站：

[http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html](http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html)

你只需要看看代码。

假设您选择“Red M”作为计划和“Samsung Galaxy SIII Blau (Blue) / 16 GB。底部将显示：

## 详细项目

### Einmalige Kosten（一次性费用）

1.  Anschlusspreis（激活费用）：29.99
2.  Einmalzahlung（一次性付款）智能手机：9.90

    ### Monatliche Kosten（月费）

3.  红色 M 59.99

4.  24 x 10 % 拉巴特（折扣）-6.00
5.  24 x 5 欧元智能手机-拉巴特 -5.00

6.  学生、年轻人或残障人士也可享受三种 10.00/月折扣中的一种。

您需要解析（可能使用 Python 的 JSON 模块）这些 JavaScript 分配：

```
window.phones
window.rates
window.discounts
window.goodies
window.promotions 
```

我将带您了解数据结构。您必须自己编写代码。

`windows.phones`, 包含此条目（与我们的示例保持一致）：

```
window.phones = {
    sku1224225:{
        name:"Samsung Galaxy SIII Blau 16 GB",
        image:"/images/m1057472_300599.jpg",
        deliveryTime:"Lieferbar innerhalb 48 Stunden",
        sku1444275:{p:"prod1334441",e:"49.90"}, // "Vodafone Red S"
        sku1444283:{p:"prod1334441",e:"9.90"},  // "Vodafone Red M"
        sku1444291:{p:"prod1334441",e:"9.90"},  // "Vodafone Red Premium"
        sku1444286:{p:"prod1334441",e:"9.90"},  // "Vodafone Red L"
        sku1104261:{p:"prod1334441",e:"99.90"}  // "Vodafone Basic 100"
    },
    // . . .
} 
```

我添加了注释以显示计划名称。

在这里，我们看到了细节项目 2。

此处列出的 SKU 是在 中定义的计划子 SKU `window.rates`。对于“红色 M”，我们有：

```
window.rates = {
    sku1444279:{
        label:"Vodafone Red M",
        propId:"prod1564453",
        subsku:{
            sku1444283:{    // "Samsung Galaxy SIII Blau 16 GB", etc.
                monthlyChargest:"59.99",
                activationCharge:"29.99",
                discounts:[
                    "sku140988",    // "Ich bin 18-25 Jahre jung" (-10)
                    "sku140989",    // "Ich habe einen Schwerbehindertenausweis" (-10)
                    "sku140990"     // "Ich bin Student und jünger als 30" (-10)
                ],
                promotions:["27"],  // "24 x 5 Euro Smartphone-Rabatt" (-5)
                Goodies:[
                    "prod1674486"   // "24 x 10 % Rabatt" (-6)
                ]
            },
            // more subskus here . . .
        }
    },
    // . . .
} 
```

我再次为链接数据添加了评论。请注意，许多设备可以链接到同一个 subsku。

我们看到细节项目 1 和 3 以及指向项目 4、5 和 6 的链接。

`Goodies``windows.goodies`通过`prod`号码的链接：

```
window.goodies = {
    prod1674486:{
        SkuId:"prod1674486",
        Name:"24 x 10 % Rabatt",
        Value:"-6",
        Type:"absolute",
        DurationInMonth:"24"
    },
    // . . .
} 
```

这给了我们细节项目 4。

`window.rates``windows.promotions`还通过`subsku`的`promotions`列表链接到：

```
window.promotions = {
    27:{
        promotionId:"27",
        promotionName:"24 x 5 Euro Smartphone-Rabatt",
        promotionValue:"-5",
        Type:"absolute",
        duration_in_months:"24",
        deeplinkParameter:""
    },
    // . . .
} 
```

这为我们提供了详细信息 5。

`windows.discounts`包含详细信息项目 6 的特别折扣：

```
window.discounts = {
    sku140988:{
        SkuId:"sku140988",
        Name:"Ich bin 18-25 Jahre jung",
        Type:"absolute",
        DurationInMonth:"24",
        Value:{
            sku1444295:"-10",   // "Vodafone Red Premium"
            sku1444279:"-10",   // "Vodafone Red M"
            sku1444290:"-20"}   // "Vodafone Red L"
    },
    sku140989:{
        SkuId:"sku140989",
        Name:"Ich habe einen Schwerbehindertenausweis",
        Type:"absolute",
        DurationInMonth:"24",
        Value:{
            sku1444295:"-10",   // "Vodafone Red Premium"
            sku1444279:"-10",   // "Vodafone Red M"
            sku1444290:"-20"}   // "Vodafone Red L"
    },
    sku140990:{
        SkuId:"sku140990",
        Name:"Ich bin Student und jünger als 30",
        Type:"absolute",
        DurationInMonth:"24",
        Value:{
            sku1444295:"-10",   // "Vodafone Red Premium"
            sku1444279:"-10",   // "Vodafone Red M"
            sku1444290:"-20"}   // "Vodafone Red L"
    }
}; 
```

适当的折扣金额由计划主要 SKU 选择（通过 下列出的 SKU `value`）。

就是这样。只需将这 5 个对象解析为 Python 对象，您就会拥有所需的所有数据。

# objective-c - 无法在 Finder（Mountain Lion）中获得正确的目录路径

> ID：14261307
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:09.470
> 
> 标签：objective-c, xcode4.5, osx-mountain-lion, finder

在 iOS 中有两种获取和创建目录路径的方法：

```
- (NSString *)documentsDirectory
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return documentsDirectory;
}

- (NSString *)dataFilePath
{
    return [[self documentsDirectory] stringByAppendingPathComponent:@"Checklists.plist"];
} 
```

然后要求 NSLog 将结果打印到调试器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"Documents folder is %@", [self documentsDirectory]);
    NSLog(@"Data file path is %@", [self  dataFilePath]);
} 
```

调试器控制台中的结果是：

```
2013-01-09 13:23:10.845 Checklists[6734:c07] Documents folder is /Users/pdenlinger/Library/Application Support/iPhone Simulator/5.1/Applications/BBBA8972-3B38-4606-AECD-5D98821469D6/Documents
2013-01-09 13:23:10.847 Checklists[6734:c07] Data file path is /Users/pdenlinger/Library/Application Support/iPhone Simulator/5.1/Applications/BBBA8972-3B38-4606-AECD-5D98821469D6/Documents/Checklists.plist 
```

问题是，当我在 Finder 中剪切并粘贴 Documents 文件夹的路径（使用**Command + shift + G**命令）时，Finder 返回的结果表明没有这样的目录。

**已在终端**中手动尝试过，结果相同。

该怎么办？

我正在使用 Xcode 4.5.2 运行 OS X 10.8.2

# facebook - 在 Facebook 应用程序上插入 LIKE 按钮？

> ID：14261310
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:12.213
> 
> 标签：facebook, facebook-like

我在巴黎的一家网络机构工作。我们开发了一个 facebook 应用程序，如果我们直接在此应用程序中插入“LIKE”按钮，我需要知道是否可以/允许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:36:41.443

是的，您可以直接使用 facebook Like 按钮。[读这个](https://developers.facebook.com/docs/reference/plugins/like/)。

# mysql - SQL IN 子句只给出开始和结束数字

> ID：14261312
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:20.623
> 
> 标签：mysql, sql

有没有办法为 IN 的子句提供一个未定义的集合？

如：

```
select * from ABC WHERE MY_ID IN (X TO Y) 
```

示例：如果我给 X 给 3 和 Y 给 8 ；

```
select * from ABC WHERE MY_ID IN (3, ... , 8) 
```

这应该等同于：

```
select * from ABC WHERE MY_ID IN (3, 4, 5, 6, 7, 8) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T15:27:15.480

你需要这个

```
select * from ABC WHERE MY_ID between 3 and 8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:42:02.653

这个也可以试试。。。

```
select * from abc where id >= 3 and id <=8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:27:26.317

怎么样`BETWEEN`

```
SELECT * FROM ABC WHERE MY_ID BETWEEN 3 AND 8 
```

*   [MySQL BETWEEN 运算符](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

# concurrency - 读/写语义与对象语义中的冲突操作

> ID：14261314
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:22.530
> 
> 标签：concurrency, semantics

读/写语义和对象语义的含义（简单来说）是什么？为什么以下陈述是正确的？

> 借方/贷方写入银行账户，并在读/写语义下定义为冲突，而在对象语义下则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:10:40.193

没有更多上下文，我不确定这是否能回答问题。

以下 PDF 中的第 2.1-2 节提供了概述。

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.48.4184&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.48.4184&rep=rep1&type=pdf)

这里有一些关键点。

读/写

“读/写模型的两阶段锁定协议为每个对象维护两种类型的锁，即读锁和写锁。事务必须获得读（写）锁才能读（写）数据对象。两个锁如果两个锁都应用于同一个数据对象并且其中至少一个是写锁，则来自不同事务的冲突。如果锁与该数据对象上的任何其他锁冲突，则事务无法获得锁。

因此，如果另一个人在写，你就不能阅读，如果另一个人在读，你就不能写。但是如果另一个人正在阅读，你可以阅读。

目的

“一个对象维护一个状态并提供一组操作，作为事务访问和修改对象状态的唯一手段。......即使两个操作都是更新操作，两个交换操作也可以同时执行。”

现在，您可以允许对操作顺序无关紧要的事物进行读/写。

他们继续解释存款和取款如何不通勤（由于资金不足，提款可能会被拒绝），但两次存款可以通勤。这两个存款会相互阻塞，并且必须在读/写下按顺序发生，但在对象语义下，它们可以同时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:37:41.573

好吧，考虑到你已经输入了“（简单来说）”......我会对此进行尝试。

首先，当将“值”或“数据”称为对象时，这个问题最有意义。这是在 OODB 中讨论数据的典型方式。因此，存储的银行账户余额被称为“数据对象”，您可以获取锁来访问该值（读取、写入、删除等）

鉴于这种情况：读/写语义是“更改数据的含义”，基于它我们可以决定哪些读或写可以在锁定的事务中发生。相反，对象语义允许你以任何你认为合适的方式改变值，只要你持有相关的锁。

对于银行帐户，您希望锁定不允许在同一交易中同时发生借记和贷记（甚至多个借记或多个贷记）（因此它们继续被视为不同的操作）。这意味着您的读/写语义定义了多个要冲突的贷方/借方。

例如，如果在单笔交易的范围内，我将 10 英镑贷记到银行账户并从银行账户借记 7 英镑（即使用对象语义），则生成的银行对账单将显示 3 英镑的单笔贷记，而不是两个单独的条目。

通过使用读/写语义定义锁定逻辑，您可以确保事务不会以这种方式组合。

# c# - Xaml - VisualStates - 在颜色和动画之间改变背景

> ID：14261317
> 
> 赞同：1
> 
> 时间：2013-01-10T15:26:32.073
> 
> 标签：c#, windows-phone-7, xaml, custom-controls, visualstatemanager

我有自定义控件，如下所示：

```
<Style TargetType="local:AnswerButton">
<Setter Property="Background" Value="{StaticResource BlueGradient}"/>
<Setter Property="Template">
<Setter.Value>
<ControlTemplate TargetType="local:AnswerButton">
<Grid>
<vsm:VisualStateManager.VisualStateGroups>
   <vsm:VisualStateGroup x:Name="CommonStates">
      <vsm:VisualState x:Name="Normal">
        <Storyboard>
           <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.Background)" Storyboard.TargetName="myBorder">
             <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource BlueGradient}" />
           </ObjectAnimationUsingKeyFrames>
        </Storyboard>
      </vsm:VisualState>
      <vsm:VisualState x:Name="RightAnswer">
         <Storyboard RepeatBehavior="Forever" BeginTime="00:00:00" AutoReverse="True">
            <ColorAnimation Duration="0:0:0.6" From="Orange" To="Green" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="myBorder"/>
         </Storyboard>
      </vsm:VisualState>
    </vsm:VisualStateGroup>
  </vsm:VisualStateManager.VisualStateGroups>
  <Border BorderBrush="Blue" BorderThickness="2" CornerRadius="10">
    <Border Name="myBorder" Background="{TemplateBinding Background}" CornerRadius="9" Opacity="1">
       <Grid>
         <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="*" />
         </Grid.ColumnDefinitions>
         <TextBlock Grid.Column="0"
                    TextAlignment="Center" VerticalAlignment="Center" 
                    Text="{TemplateBinding Option}" Foreground="Yellow" />
         <TextBlock Grid.Column="1"
                    TextAlignment="Left" VerticalAlignment="Center" 
                    Text="{TemplateBinding Text}" Foreground="White" />
        </Grid>
      </Border>
    </Border>
  </Grid>
  </ControlTemplate>
  </Setter.Value>
  </Setter>
  </Style> 
```

我只想改变按钮的状态。首先（默认）哪个按钮具有 BlueGradient 画笔，其次是有动画的按钮（如 RightAnswer 状态）。此代码部分有效。当我将 RightAnswer 状态设置为按钮时，我将其更改为 Normal，然后当我尝试将其设置为 RightAnswer 时，我收到此错误：

> 无法解析指定对象上的 TargetProperty (Border.Background).(SolidColorBrush.Color)。

我认为问题在于，在一个状态下，我得到`Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"`了第二个状态`Storyboard.TargetProperty="(Border.Background)"`。我试图改变它，但它不起作用。那么我该如何解决这个问题呢？

编辑：

蓝色渐变

```
<LinearGradientBrush x:Key="BlueGradient"  
    StartPoint="0,0" EndPoint="1,1">
        <GradientStop Color="#12449d" Offset="0" />
        <GradientStop Color="#0a2554" Offset="1" />
    </LinearGradientBrush> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T20:47:12.590

您拥有 a`LinearGradientBrush`作为`Background`属性的刷子，但您尝试访问`(SolidColorBrush.Color)`它（本质上它无法将 LGB 转换为 SCB）。

对于这种情况，您不能使用画笔资源，因为画笔类型决定了`Storyboard`您需要运行的资源。您必须降低一级并`Color`用作您的资源。

（目前我没有使用我的开发机器，所以语法可能有点不对）

一、在资源上

```
<Color x:Key="ColorBlueFirstStop">#12449d</Color>
<Color x:Key="ColorBlueSecondStop">#0a2554</Color> 
```

然后，在模板中

```
<Border Name="myBorder" CornerRadius="9" Opacity="1">
    <Border.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="{StaticResource ColorBlueFirstStop}" Offset="0" />
            <GradientStop Color="{StaticResource ColorBlueSecondStop}" Offset="1" />
        </LinearGradientBrush>
   ......
</Border> 
```

最后在故事板中

```
<Storyboard RepeatBehavior="Forever" BeginTime="00:00:00" AutoReverse="True">
    <ColorAnimation Duration="0:0:0.6" 
                    From="Orange" 
                    To="Green" 
                    Storyboard.TargetProperty="(Border.Background).(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" Storyboard.TargetName="myBorder"/>
    <ColorAnimation Duration="0:0:0.6" 
                    From="Orange"  
                    To="Green" 
                    Storyboard.TargetProperty="(Border.Background).(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" Storyboard.TargetName="myBorder"/>
</Storyboard> 
```

# c# - 如何在 DataGridView 中对组合框列进行数据绑定？

> ID：14261319
> 
> 赞同：1
> 
> 时间：2013-01-10T15:26:43.027
> 
> 标签：c#, data-binding, datagridviewcombobox

我的情况如下：

我挑战了一个名为“学生”的课程，它很简单，如下所示：

```
public Student
{
   Public string Name;
   Public List<string> Subjects;
} 
```

然后我定义了一个`List<Student>`叫做`studentList`.

我怎样才能将它`studentList`与 a结合起来`DataGridView`？中的第二列`DataGridView`应该是一个组合框，列出学生的所有科目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:33:11.643

对我来说，这看起来像是 TreeView 或 ListView 的工作，假设您没有使用组合框来选择任何内容，而只是查看某些内容。

# serial-port - java.comm 串行端口的后续消息

> ID：14261321
> 
> 赞同：0
> 
> 时间：2013-01-10T15:26:47.707
> 
> 标签：serial-port, javax.comm

我想得到一些帮助：

我想用 Java 与串行设备通信，我已经开始玩一点`java.comm`包。我的设备应该响应我的消息，但我不知道如何实现这一点。第一条消息后，它不再起作用。`InputStream`变得不可用。

在调试时，我归结为这个简单的案例：

```
//question no. 1
outputStream.write(first_question);                                                            
outputStream.flush();                    

while (inputStream.available() > 0) {                         
  line = inputStream.read();                        
  System.out.println(line);                                                
}

//question no. 2
outputStream.write(second_question);       
outputStream.flush();

while (inputStream.available() > 0) {                         
   line = this.in.read();                        
   System.out.println(line);  
} 
```

` 感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:21:43.183

如果您使用的是 windows 机器，请确保，

1.  win32com.dll 到目录：jdk1.7.0/bin
2.  javax.comm.properties 到目录：jdk1.7.0/jre/lib
3.  comm.jar 到目录：jdk1.7.0/lib

并尝试通过在写入端口后使用线程延迟来执行以下代码。

```
outputStream.write(first_question);                                                            
outputStream.flush();
Thread.sleep(1000);`

byte[] readBuffer = new byte[500];

while (inputStream.available() > 0) { 

  int numBytes = inputStream.read(readBuffer);

  msg = new String(readBuffer, 0, numBytes);

   message += msg;

} 
```

它可以帮助你。

# html - 如何使我的输入字段在浏览器中看起来相同？

> ID：14261323
> 
> 赞同：5
> 
> 时间：2013-01-10T15:26:47.737
> 
> 标签：html, css, cross-browser

我有一个带有两个输入字段的登录页面。在 Chrome、Firefox 和 IE10 中，它们看起来很棒，但在 IE 7、8、9 中，它们太瘦了。这是字段的 HTML 和类。

HTML：

```
<div class="login-input">
<input data-val="true" data-val-required="Username is required." id="Username" name="Username" type="text" value="">
</div> 
```

CSS：

```
.login-input input
{
width: 250px;
height: 14px;
} 
```

这是它在 Chrome、Firefox、IE10 中的外观（正确外观） [http://i.imgur.com/6swf7.png](https://i.imgur.com/6swf7.png)

这就是它在 IE 7、8、9 中的外观（外观不正确） [http://i.imgur.com/ltzdG.png](https://i.imgur.com/ltzdG.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:36:22.513

您是否尝试设置填充值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:38:19.577

您可以尝试`box-sizing`，`border-box`但[不支持](http://caniuse.com/#search=box-sizing)ie7。

```
input {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:38:48.290

除了高度之外，还使用 ​​line-height。

```
.login-input input
{
  width: 250px;
  height: 14px;
  line-height: 14px;
} 
```

# php - Zend Framework 2 - 单元测试

> ID：14261324
> 
> 赞同：1
> 
> 时间：2013-01-10T15:26:51.213
> 
> 标签：php, unit-testing, authentication, zend-framework2, zend-test

我想创建一个简单的访问单元测试，如[教程](http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html#write-the-tests)中所示。

我的项目`ZFCUser`用于身份验证。

结果，我的（显然未经过身份验证的）测试人员得到`HTTP response`302 而不是预期的 200。

有什么想法我能做些什么吗？谢谢！

本教程中的代码如下所示：

```
public function testAddActionCanBeAccessed()
{
    $this->routeMatch->setParam('action', 'add');

    $result   = $this->controller->dispatch($this->request);
    $response = $this->controller->getResponse();

    $this->assertEquals(200, $response->getStatusCode());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:12:34.543

```
thanks, good idea! is there an easy way to mock the auth? – Ron 
```

我将其发布为答案，因为将其压入评论太多了。是的，有一种简单的方法可以模拟 AuthenticationService 类。首先，检查[Stubs / Mocks](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.stubs)上的文档。

您需要做的是从 Zend\Authentication\AuthenticationService 创建模拟并将其配置为假装包含一个身份。

```
public function testSomethingThatRequiresAuth()
{
    $authMock = $this->getMock('Zend\Authentication\AuthenticationService');
    $authMock->expects($this->any())
             ->method('hasIdentity')
             ->will($this->returnValue(true));

    $authMock->expects($this->any())
             ->method('getIdentity')
             ->will($this->returnValue($identityMock));

    // Assign $authMock to the part where Authentication is required.
} 
```

`$identityMock`在此示例中，需要预先定义一个变量。它可能是您的用户模型类的模拟或类似的东西。

请注意，我尚未对其进行测试，因此它可能无法立即工作。但是，它只是应该向您显示方向。

# rest - REST PUT 网址约定

> ID：14261330
> 
> 赞同：1
> 
> 时间：2013-01-10T15:27:03.747
> 
> 标签：rest, put

我正在尝试找出使用 REST 约定进行更新的正确方法。到目前为止，我们有：

单个项目的更新：

```
PUT
https://mydomain.com/dogs/{id}    accept: application/json, {dog} 
```

多个项目的更新：

```
PUT
https://mydomain.com/dogs    accept: application/json, [{dog1}, {dog2}, ...] 
```

我试图弄清楚约定是否也规定（除了我们上面的内容之外，或者代替我们上面的内容）这个单个项目：

```
PUT
https://mydomain.com/dogs    accept: application/json, {dog} 
```

然后，后续问题：假设我们更新集合时某个元素出现验证错误。惯例是否规定我们返回 422 并拒绝整个请求？还是我们更新有效的并返回 4xx 状态码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:04:38.330

PUT 一般用于更新，但 PUT 不代表更新。PUT 背后的基本思想是将资源放在特定位置。您的第一个代码段是准确的，因为您将该资源的新版本放在该位置。

但是，以下两个请求不支持 PUT 的语义：

```
PUT
https://mydomain.com/dogs    accept: application/json, [{dog1}, {dog2}, ...]

PUT
https://mydomain.com/dogs    accept: application/json, {dog} 
```

通常，我会要求调用我的 API 的人执行多个 PUT 请求，这些请求可以并行完成，以更新多个资源。但是，如果需要同时更新多个资源，我会考虑使用POST，例如：

```
POST
https://mydomain.com/dogs/update-many  accept: application/json, [{dog1}, ...] 
```

至于错误情况，最好通过文档处理。我认为，只要用户知道该行为，要么拒绝整个请求并回滚，要么返回包含每个已发送实体的标识符/成功状态的响应都是有效的。一般来说，我认为响应与请求直接相关，而不是与请求中的每个项目相关；因此，如果请求的任何部分失败，我会返回错误代码和解释。我觉得当假设请求的任何部分具有持久影响时，用户总是期望 2XX 代码更简单。

# jquery - 如何从同名元素组jquery中选择特定元素

> ID：14261332
> 
> 赞同：0
> 
> 时间：2013-01-10T15:27:03.940
> 
> 标签：jquery, jquery-selectors

最近我陷入了困境。我有一组具有相同名称的文本框，如下所示：

```
<p><input type="text" name="test[]" /></p>
<p><input type="text" name="test[]" /></p>
<p><input type="text" name="test[]" /></p> 
```

所以我需要做的是选择组的第二个元素。我试图提醒

`$('input[name="test['2']"]').val();`但它不起作用。

谁能帮我这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:27:47.997

您可以使用[eq](http://api.jquery.com/eq/)：

```
$('input[name="test[]"]').eq(1).val(); 
```

或[:eq](http://api.jquery.com/eq-selector/) :

```
$('input[name="test[]"]:eq(1)').val(); 
```

请注意，在这两种情况下，索引都是从零开始的

# jquery - jQuery API 使用

> ID：14261342
> 
> 赞同：0
> 
> 时间：2013-01-10T15:27:37.127
> 
> 标签：jquery, html

使用 jsFiddle，我正在尝试测试该`jQuery(...)`功能

```
<html>
  <body>
   <script>
     var section = jQuery("<div></div>");
     $("<p>This is a paragraph</p>").appendTo(section);
   </script>
  </body>
</html> 
```

为什么这段代码不会自动呈现带有“这是一个段落”的 HTML 页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:29:07.567

您必须在文档中添加部分。因为它只是在一个变量中。

```
$('body').append(section); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:35:48.787

在此处查看我的示例：

[http://jsfiddle.net/9PaTE/](http://jsfiddle.net/9PaTE/)

`$(document).ready()`失踪了，你需要`.appendTo('body')`

# c# - ObservableCollection 属性类

> ID：14261344
> 
> 赞同：1
> 
> 时间：2013-01-10T15:27:39.050
> 
> 标签：c#, asp.net, generics, mvvm

我在我的`MVVM`项目中重复这个属性太多次了。创建通用类或工厂来替换这些代码行的正确方法是什么？

```
 ObservableCollection<Result> _resultCollection;
    public ObservableCollection<Result> ResultCollection
    {
        get
        {
            if (_resultCollection == null)
                _resultCollection = new ObservableCollection<Result>();
            return _resultCollection;
        }
        set
        {
            _resultCollection = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:44:15.043

我知道这并不能完全回答您的问题，但是我个人更喜欢在 Visual Studio 中使用录制的宏来为我编写所有这些。

我更喜欢使用它而不是泛型类，因为它将所有相关代码保存在一个地方，并且很容易理解发生了什么。通常，我将所有私有字段放在班级的顶部，并将所有公共属性隐藏在一个`#region`我一直折叠的标签中，这样我就不需要滚动它们了。

在 VS 中创建宏相当容易：只需转到工具 > 宏 > 记录临时宏，然后仅使用键盘执行您想要的更改。让宏正常工作后，只需将其保存为永久宏即可。如果你做对了，你可以用任何变量重新运行宏，它会以同样的方式构建它。

创建宏时要记住的一些有用的键盘快捷键是：

*   `Ctrl+C`/`Ctrl+V`复制/粘贴
*   `Ctrl+Right`/`Ctrl+Left`移过一个词
*   `Home`/`End`移动到行首或行尾
*   `Shift`用于在移动光标时突出显示单词

您可能还需要对 VB 宏代码进行一些小的修改，例如`.Replace()`将小写字母变为大写字母。

这是一个示例宏，我用它来构建我所有的 MVVM 公共属性。它使用 PRISM 库，因此它使用语法`RaisePropertyChanged(() => this.SomeProperty);`

```
Sub PRISM_BuildPropertyChanged_CursorAtDefaultAfterCtrlRE()
    DTE.ActiveDocument.Selection.LineDown(False, 2)
    DTE.ActiveDocument.Selection.WordLeft(True)
    DTE.ActiveDocument.Selection.Copy()
    DTE.ActiveDocument.Selection.LineDown(False, 3)
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.CharLeft()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "RaisePropertyChanged(() => this."
    DTE.ActiveDocument.Selection.Paste()
    DTE.ActiveDocument.Selection.Text = ");"
    DTE.ActiveDocument.Selection.LineUp()
    DTE.ActiveDocument.Selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstText)
    DTE.ActiveDocument.Selection.CharRight(False, 4)
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.CharRight()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "if (value != "
    DTE.ActiveDocument.Selection.WordRight(True)
    DTE.ActiveDocument.Selection.Copy()
    DTE.ActiveDocument.Selection.CharLeft()
    DTE.ActiveDocument.Selection.Paste()
    DTE.ActiveDocument.Selection.DeleteLeft()
    DTE.ActiveDocument.Selection.Text = ")"
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "{"
    DTE.ActiveDocument.Selection.LineDown()
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "}"
End Sub 
```

有了它，我可以写我的私人定义，比如

```
private ObservableCollection<SomeObject> _someCollection; 
```

点击`Ctrl+R`,`E`构建公共属性定义

```
private ObservableCollection<SomeObject> _someCollection;

public ObservableCollection<SomeObject> SomeCollection
{
    get { return _someCollection; }
    set { _someCollection = value; }
} 
```

然后运行我的宏来构建属性更改通知

```
public ObservableCollection<SomeObject> SomeCollection
{
    get { return _someCollection; }
    set 
    {
        if (value != _someCollection)
        {
            _someCollection = value;
            RaisePropertyChanged(() => this.SomeCollection);
        }
    }
} 
```

（默认情况下，`Ctrl+R`,`E`将光标放在私有字段定义的末尾，因此这是运行此宏时光标需要位于的位置）

我还有另一个旧宏，它添加了检查值是否为空的代码，如果是，则将其设置为对象的新实例，但我从未使用过太多，因为我更喜欢在构造函数中设置默认定义而不是在属性定义中。

如果需要，它看起来像这样（注意宏名称 - 您需要在运行此宏之前突出显示公共属性名称）：

```
Sub CreatePublicGet_NoNull_HightlightPropertyNameFirst()
    DTE.ActiveDocument.Selection.CharLeft(False, 2)
    DTE.ActiveDocument.Selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstText, True)
    DTE.ActiveDocument.Selection.WordRight(True)
    DTE.ActiveDocument.Selection.Copy()
    DTE.ActiveDocument.Selection.LineDown(False, 2)
    DTE.ActiveDocument.Selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstText)
    DTE.ActiveDocument.Selection.CharRight(False, 4)
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.CharRight()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.CharLeft()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.LineUp(False, 2)
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Paste()
    DTE.ActiveDocument.Selection.Text = "();"
    DTE.ActiveDocument.Selection.LineDown()
    DTE.ActiveDocument.Selection.WordLeft(True)
    DTE.ActiveDocument.Selection.CharLeft()
    DTE.ActiveDocument.Selection.WordLeft(True)
    DTE.ActiveDocument.Selection.Copy()
    DTE.ActiveDocument.Selection.LineUp(False, 2)
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "if ("
    DTE.ActiveDocument.Selection.Paste()
    DTE.ActiveDocument.Selection.Text = " == null)"
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "{"
    DTE.ActiveDocument.Selection.LineDown()
    DTE.ActiveDocument.Selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstText)
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.NewLine()
    DTE.ActiveDocument.Selection.Text = "}"
    DTE.ActiveDocument.Selection.LineUp()
    DTE.ActiveDocument.Selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstText)
    DTE.ActiveDocument.Selection.Paste()
    DTE.ActiveDocument.Selection.Text = " = new "
    DTE.ActiveDocument.Selection.Collapse()
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.LineDown(False, 4)
    DTE.ActiveDocument.Selection.EndOfLine()
    DTE.ActiveDocument.Selection.LineUp(True)
    DTE.ActiveDocument.Selection.Delete()
End Sub 
```

并导致代码如下所示：

```
public ObservableCollection<SomeObject> SomeCollection
{
    get 
    {
        if (_someCollection == null)
        {
            _someCollection = new ObservableCollection<SomeObject>();
        }
        return _someCollection; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:31:12.013

AFAIK 没有某种形式的代码生成是不可能的。查看 T4 模板，如此处所[回答](https://stackoverflow.com/a/2968493/1059969) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:10:28.707

是的...能够绑定到一个字段会很棒，不是吗... ;-) 这让我想到**了第一个解决方案**：

(1) 创建一个转换器，允许您绑定一个字段。

```
public class FieldBindingConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var par = parameter as string;
        var field = value.GetType().GetField(par);
        return field.GetValue(value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后 (2) 直接从 XAML 绑定字段：

```
 <ItemsControl ItemsSource="{Binding ., Converter={StaticResource Field}, ConverterParameter=Coll2}" Grid.Row="1"> 
```

老实说，我有点不喜欢这样，因为它并没有真正解决问题......所以作为**第二种解决方案**，您可以直接从构造函数实例化该属性：

```
public Foo() 
{
    ResultCollection = new ObservableCollection<Result>();
}

[...]

public ObservableCollection<Result> ResultCollection { get; private set; } 
```

虽然这确实会增加您的内存占用几个字节（它将延迟实例化的语义更改为直接实例化），但我不会太担心这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:43:47.913

```
public abstract class XBase<T>
{
    ObservableCollection<T> _resultCollection;

    public ObservableCollection<T> ResultCollection
    {
        get
        {
            if (_resultCollection == null)
                _resultCollection = new ObservableCollection<T>();

            return _resultCollection;
        }
        set
        {
            _resultCollection = value;

        }
    }
} 
```

# javascript - jQuery UI 按钮在 IE 7 上不起作用

> ID：14261346
> 
> 赞同：0
> 
> 时间：2013-01-10T15:27:39.890
> 
> 标签：javascript, jquery, internet-explorer-7

我有这个代码：

```
<script type="text/javascript" src="<?=$path?>common/_LIB/3rd/jquery/jquery-ui-1.8.16/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="<?=$path?>common/_LIB/3rd/jquery/jquery-ui-1.8.16/js/jquery-ui-1.8.16.custom.min.js"></script>
<link type="text/css" href="<?=$path?>common/_LIB/3rd/jquery/jquery-ui-1.8.16/css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" />

<script>
    $(function() {
            $('.button,.button floatRight').button();
    });
</script> 
```

和

```
<a class="button floatRight" href="handset_list.php"><?=$reprint?></a> 
```

在 Chrome 和 FF、IE 9 上一切正常，但在 IE 8 和 IE 7 上，我只看不到上面链接的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:33:49.910

jQuery 选择器中的代码有错误。没有名为**"floatRight"**的标签名称。尝试这个：

```
$('.button').button(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:40:45.280

试试下面的代码：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:36:31.890

你大概是说

```
$(function() {
        $('.button,.button floatRight').button();
}); 
```

标签属性中的空格表示有两个类。在您的情况下，您尝试定位的按钮有两个类：`button`和`floatRight`. 因此两个点。

**编辑：**
我发现了别的东西：函数`$("#something").button();`调用`$.data`了很多次。根据[caniuse.com](http://caniuse.com/#feat=dataset) IE 仅部分支持属性上的自定义数据，因此，它可能无法像 jQuery UI 开发人员认为的那样在 IE 7 中工作。许多调用`$.data`让我认为`.button()`函数有点依赖它（但我还没有真正理解它，我只是快速浏览了一下）。如果是这样，那可能就是原因。如果你真的需要 IE 7 支持，我建议使用在 IE 7 是最常用的 IE 时发布的 jQuery UI 版本，尽管它可能不支持你现在使用的所有功能。我想说只是让 IE 7 用户看到一个锚点。主播有什么不好的？

# java - Java库中是否有任何装饰器类？

> ID：14261347
> 
> 赞同：1
> 
> 时间：2013-01-10T15:27:40.293
> 
> 标签：java, decorator

我想知道 Java 库中是否有任何类或接口可以用作装饰器模式或您推荐的任何 3rd 方库。我已经知道我可以自己做，但我正在寻找类似的东西在课堂上展示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:45:55.577

我认为您正在寻找类似 JLayer [http://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)

# php - 如何使用 createNamedBuilder() 绑定实体？

> ID：14261348
> 
> 赞同：3
> 
> 时间：2013-01-10T15:27:43.120
> 
> 标签：php, symfony

我需要在一页上有两种不同的形式（但使用相同的实体）。为此，我使用了`createNamedBuilder()`：

```
$cover = $this->get('form.factory')->createNamedBuilder('cover')
    ->add('file')
    ->getForm();

$data = $this->get('form.factory')->createNamedBuilder('data')
    ->add('name','text')
    ->getForm(); 
```

我的问题是，如何将我的实体绑定到它？当我使用`createFormBuilder()`它就像

```
$game = new Game;
$form = $this->createFormBuilder($game); 
```

如果我尝试这样使用`createFormBuilder`：

```
 $cover = $this->createFormBuilder($game)
        ->add('file')
        ->getForm();

    $data = $this->createFormBuilder($game)
        ->add('name')
        ->getForm(); 
```

使用第二个表单会导致“此表单不应包含额外字段”。注意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T14:36:57.060

在 Symfony 2.8/3.0 中，这发生了一些变化，如果您有一个想要绑定其他实体的表单，那么请在此处查看我的答案：

[在 Symfony 2.8/3.0 中将数据传递给 buildForm()](https://stackoverflow.com/questions/34027711/passing-data-to-buildform-in-symfony-2-8-3-0/34159802#34159802)

如果有人使用服务中的 a `createNamedBuilder`or`createNamed`函数，`form.factory`这里是关于如何使用它设置和保存数据的片段。您不能使用该`data`字段（保留该字段）并且您必须将传递的**数据/实体**设置为`$options`值。

我还合并了有关使用和选项的**@sarahg**说明，它似乎工作正常，但您首先需要定义字段`setAllowedTypes()``setRequired()``setDefined()`

如果您需要设置数据，请记住将其添加到`data`字段中。

在控制器中，我使用`getBlockPrefix`的是**2.8/3.0**`getName`中已弃用的

 ****控制器**

```
/*
* @var $builder Symfony\Component\Form\FormBuilderInterface
*/

$formTicket = $this->get('form.factory')->
              createNamed(
                  $tasksPerformedForm->getBlockPrefix(),
                  TaskAddToTicket::class,
                  null,
                  array(
                      'ticket' => $ticket
                  )
              ); 
```

**形式**

```
public function configureOptions(OptionsResolver $resolver)    {
    $resolver->setDefined('ticket');
    $resolver->setRequired('ticket');
    $resolver->addAllowedTypes('ticket', Ticket::class);

    $resolver->setDefaults(array(           
        'translation_domain'=>'AcmeForm',
        'validation_groups'=>array('validation_group_001'),
        'tasks' => null,
        'ticket' => null,
    ));
}

public function buildForm(FormBuilderInterface $builder, array $options)   {

    $this->setTicket($options['ticket']);
    //This is required to set data inside the form!
    $options['data']['ticket']=$options['ticket'];

    $builder

        ->add('ticket',  HiddenType::class, array(
                'data_class'=>'acme\TicketBundle\Entity\Ticket',
            )
        )
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T07:13:49.120

根据[API docs](http://api.symfony.com/2.3/Symfony/Component/Form/FormFactory.html#method_createNamedBuilder)，第三个参数`createNamedBuilder`可用于传入实体。

您的代码应如下所示：

```
$game = new Game;

$cover = $this->get('form.factory')->createNamedBuilder('cover', 'form', $game)
    ->add('file')
    ->getForm();

$data = $this->get('form.factory')->createNamedBuilder('data', 'form', $game)
    ->add('name','text')
    ->getForm(); 
```

（请注意，如果您碰巧仍在使用 Symfony 2.0，则交换第一个和第二个参数的位置。）**

# javascript - .Focus() 在 JQUERY MOBILE 中无法使用 jquery 或 javascript

> ID：14261349
> 
> 赞同：0
> 
> 时间：2013-01-10T15:27:43.383
> 
> 标签：javascript, jquery, iphone, keyboard

> **可能重复：**
> [输入字段中的 iPhone 触发键盘（HTML / Javascript）](https://stackoverflow.com/questions/5858545/iphone-trigger-keyboard-in-input-field-html-javascript)

我正在开发 jquery 移动网站。我想使用 javascript 或 jquery 将焦点放在文本字段上，以便它会弹出键盘。我已经尝试过`.focus(), .select()`，`.trigger('focus')`但它不起作用。--HTML--

```
<input id='txt' type='search' value='' /> 
```

--JQUERY--

```
$('#txt').focus();  

$('#txt').select();

$('#txt').focus(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:39:20.873

**编辑**：不确定您是指 jquery mobile 还是移动 jquery 站点，但如果您确实在使用**jquery mobile，请参见下文**：

自从您在上面注意到您正在使用[jquery mobile](http://jquerymobile.com/test/docs/api/events.html#)以来，有几件事：

> **使用 $(document).on('pageinit')，而不是 $(document).ready()：**
> 
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

此外，您可能需要`.focus`在事件中插入代码，例如`pagecreate`事件：

> 当页面在 DOM 中创建（通过 ajax 或其他）但在所有小部件有机会增强包含的标记之前触发。此事件对于希望像 jquery 移动小部件一样创建自己的自定义小部件以增强子标记的用户最有用。

[在此处](http://jquerymobile.com/test/docs/api/events.html#)查看有关文档的更多事件。

**如果您只是使用常规[jQuery](http://jquery.com/)**，那么您可能需要将代码包装在`$(document).ready(function(){ ... });`. 这有助于确保加载 DOM 并允许您的 jQuery 选择器`$("#txt")`找到页面上的元素。如果运行 JavaScript 时 DOM 尚未加载，`input`则不会找到 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:35:47.710

它应该可以工作，但既然没有，我会尝试一些不那么正常的东西，比如 .click()。你试过了吗？它应该工作。

# java - 泛型和子类型

> ID：14261354
> 
> 赞同：1
> 
> 时间：2013-01-10T15:28:06.617
> 
> 标签：java, generics

> 创建一个具有泛型类型的类`T`。定义第二个类型参数的类的子类，称为`V`. 使用该对象从两个类中调用方法。用不同的对象创建 2 个对象

这就是问题。

如果有人想，这不是家庭作业。我正在做一些java论文来练习。我不明白如何“用不同的对象创建 2 个对象”。任何人都可以帮忙吗？

```
class Gen<T> 
 {
  T obj;
  Gen(T ob)
  {
    obj = ob;
  }

 T getobj()
  {
    return obj;
  }
}

class Gen2<T, V> extends Gen<T>
{
  V obj1;
  Gen2(T ob,V ob1)
   {
    super(ob);
    obj1 = ob1;
   }

 V getobj1()
 { 
    return obj1;
 }

}

public class Ch2Lu4Ex3 
 {
  public static void main(String args[]) 
    {
      Gen2<String,String> g = new Gen2<String,String>("robin","raj");        

      System.out.println(g.getobj1());
      System.out.println(g.getobj());
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:34:28.617

问题的最后一部分：

> 用不同的对象创建 2 个对象

```
Gen2<Integer,String> inst = new Gen2<Integer,String>(1, "robin"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:32:20.693

好吧，您可以执行以下操作：

```
Gen<Integer> gen1 = new Gen<Integer>(10);
Gen2<Integer> gen2 = new Gen2<Integer,String>(10,"Hello"); 
```

或者您可以将它们组合起来，因为它们位于同一层次结构中。

```
Gen<Integer> gen1 = new Gen2<Integer,String>(10,"Hello"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:32:21.063

您是否要求以下内容：

```
Gen2<String,String> g = new Gen2<String,String>("robin","raj");
Gen2<Integer,Integer> h = new Gen2<Integer,Integer>(1, 2); 
```

还是我误解了你的问题？

# c++ - C++ 模板类型在 typedef 起作用的地方中断

> ID：14261356
> 
> 赞同：0
> 
> 时间：2013-01-10T15:28:13.523
> 
> 标签：c++, templates, compiler-errors, typedef

我目前被一个恕我直言的奇怪问题难住了：使用模板会破坏编译，而使用 typedef 就可以了。我正在编写的函数旨在从具有以下签名的实值时间序列中确定分析信号

```
#ifndef USE_TEMPLATE
typedef sample_t sample_T
#else
template<typename sample_T>
#endif
analytic_err analytic(
    size_t length,
    sample_T const * const signal,
    sample_T * const amplitude,
    sample_T * const phase )
{
    typedef kissfft<sample_T> kissfft_t;
    /* ... */ 
```

`kissfft`是 KissFFT 快速傅立叶变换库的 C++ 变体。再往前几行，我分配了一些工作区数组。

```
 kissfft_t::cpx_type *inout = new kissfft_t::cpx_type[padded_length]; 
```

我故意**不**使用 std::vector 并且我还修改了 Kissfft.hh 以减少 STL。我不想讨论 STL 的使用或不使用。在这个项目中，STL 是不行的*（不是我的决定）*。

这就是麻烦开始的地方。如果我*不*使用模板变体，即定义一个 typedef from`sample_t`一切`sample_T`工作正常，结果程序通过所有测试用例。

*一旦我切换到使用模板，麻烦就开始了：*

GCC 和 Clang 都出现了一些我无法理解的错误：

### GCC 错误

```
In file included from /home/dw/extradev/octuda/src/hilbert_test.cc:6:0:
signalprocess.cc: In function ‘analytic_err analytic(size_t, const sample_T*, samplT*, sample_T*)’:
signalprocess.cc:54:23: error: ‘inout’ was not declared in this scope
signalprocess.cc:54:35: error: expected type-specifier
signalprocess.cc:54:35: error: expected ‘;’
signalprocess.cc: In instantiation of ‘analytic_err analytic(size_t, const sample_T sample_T*, sample_T*) [with sample_T = float; analytic_err = analytic_err_t; size_t = long unsigned int]’:
test_analytic.cc:45:41:   required from here
signalprocess.cc:54:2: error: dependent-name ‘kissfft_t:: cpx_type’ is parsed as a n-type, but instantiation yields a type
signalprocess.cc:54:2: note: say ‘typename kissfft_t:: cpx_type’ if a type is meant
signalprocess.cc:59:2: error: dependent-name ‘kissfft_t:: cpx_type’ is parsed as a n-type, but instantiation yields a type
signalprocess.cc:59:2: note: say ‘typename kissfft_t:: cpx_type’ if a type is meant 
```

### 铿锵声错误

```
In file included from ../../src/hilbert_test.cc:6:
signalprocess.cc:54:23: error: use of undeclared identifier 'inout'
        kissfft_t::cpx_type *inout = new kissfft_t::cpx_type[padded_length];
                             ^
signalprocess.cc:54:35: error: expected a type
        kissfft_t::cpx_type *inout = new kissfft_t::cpx_type[padded_length];
                                         ^
signalprocess.cc:55:6: error: use of undeclared identifier 'inout'
        if(!inout) {
            ^

and some more all following the same gist. 
```

GCC 和 Clang 同意在使用模板时有些事情是不对的。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:31:28.847

当你使用模板时，那么这个

```
kissfft_t::cpx_type *inout = new kissfft_t::cpx_type[padded_length]; 
```

应该变成这样：

```
typename kissfft_t::cpx_type *inout = new typename kissfft_t::cpx_type[padded_length];
^^^^^^^^note                              ^^^^^^^^note 
```

因为`kissfft_t`依赖于模板参数，因此`cpx_type`是*依赖*类型，因此您需要使用`typename`它来消除它与静态值的歧义。

要详细了解为什么`typename`需要，请参阅此主题：

*   [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:34:07.697

如果`sample_T`是模板参数，那么`kissfft_t::cpx_type`是从属名称。在模板被实例化之前，编译器无法推断出它是一个类型名，所以它需要写成`typename kissfft_t::cpx_type`.

如果它不是模板参数，那么就会出现错误，所以不幸的是，无论是否定义`typename`，您都需要添加更多可怕的预处理器恶作剧才能做正确的事情。`USE_TEMPLATE`

# perforce - Subversion 语言中的 P4Merge

> ID：14261360
> 
> 赞同：0
> 
> 时间：2013-01-10T15:28:35.473
> 
> 标签：perforce

当我使用应用程序 P4Merge 时，我对它的语言感到非常困惑。什么是“基础”、“源”、“目标”和“合并”？

它们如何对应于 Subversion 中使用的语言？它使用名称“base”、“theirs”、“mine”和“merged”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:41:40.270

试试这个合并 UI 的描述：[http ://www.perforce.com/perforce/doc.current/manuals/p4v/merging_files.html](http://www.perforce.com/perforce/doc.current/manuals/p4v/merging_files.html)

# r - 根据 R 中定义的顺序获取列值

> ID：14261369
> 
> 赞同：0
> 
> 时间：2013-01-10T15:28:57.303
> 
> 标签：r, for-loop

我有一个包含几列的矩阵，我想获取提取的特殊列（作为向量），但根据该矩阵中的另一列进行排序。

到目前为止，我正在使用我觉得不太漂亮的 for 循环方法来做这件事。我想有更好的方法来做这些事情。

这是一个工作示例：

```
# creating a example matrix with two columns
df <- data.frame(colA=c("A","B","C","D","E"),colB=(1:5))
mat <- as.matrix(df)

# my desired order
my_order <- c("C","D","A","B")

# For loop and collecting results in a vector
out <- NULL
for(i in my_order) out <- c(out,mat[mat[,1]==i,2])

print(out) 
```

任何建议，更优雅和计算速度更快的方法的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:34:11.720

您可以使用`match`：

```
df$colB[match(my_order,df$colA)] 
```

由于您`colB`已经订购，`match(my_order,df$colA)`恰好返回相同的结果，但通常您需要索引。

# netbeans - 代码完成 Netbeans 7.2 Mac

> ID：14261373
> 
> 赞同：1
> 
> 时间：2013-01-10T15:29:09.250
> 
> 标签：netbeans, code-completion

我在 Mac 上使用 Netbeans 7.2 并且对代码完成有疑问。在我想要插入所选方法之前，一切似乎都有效。当我在 PHP 类中并输入：

```
$this-> 
```

...或者当我按下 CTRL-SPACE 时，会出现可用属性和方法的列表。当我选择一个并按 ENTER 时，选项消失并且没有插入任何内容。双击一个选项也不起作用，同样的行为。TAB 也不起作用。

这是正常行为吗？我应该怎么做才能插入一些东西？

提前致谢！

编辑： [http ://www.youtube.com/watch?v=UoEopKYPh_g](http://www.youtube.com/watch?v=UoEopKYPh_g)

...我看到 ENTER 应该可以工作。知道为什么它对我不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:04:40.687

重新启动 Netbeans 后，ENTER 确实起作用了。问题解决了，可能是一些小故障。

# assembly - 8051 LCD 'Hello World' - 用变量替换 DB

> ID：14261374
> 
> 赞同：1
> 
> 时间：2013-01-10T15:29:09.627
> 
> 标签：assembly, 8051

我正在使用专有的 8051 板来学习汇编编程。我目前正在开发一个 LCD 'Hello World' 程序。这是代码。

```
lcd_cmd equ 0800h           ;Write COMMAND reg address 0800h
lcd_st  equ 0801h           ;Read STATUS reg address 0801h
lcd_wr  equ 0802h           ;Write DATA reg address 0802h
lcd_rd  equ 0803h           ;Read DATA reg address 0803h

ORG 08100h

hello:  
mov P2, #(lcd_cmd SHR 8)            ;load P2 with high address
mov R0, #(lcd_cmd AND 255)          ;load R0 with command reg addr
mov R7, #03h                        ;set LCD position, line=1, char=3
mov dptr, #mesg1                    ;point to mesg1
acall   wr_string                   ;write mesg1 to LCD

mov R7, #41h                        ;set LCD position, line= 2, char=1
mov dptr, #mesg2                    ;point to mesg2
acall   wr_string                   ;write mesg2 to LCD

stop:   ajmp    stop                ;soft halt  

wr_string:
acall   lcd_busy        ;wait until LCD not busy
mov a, R7                           ;get LCD position
orl a, #080h                        ;msb set for LCD RAM address
movx    @R0, a                      ;write lcd_cmd to set line & char
nxt_char:
acall   lcd_busy                    ;wait until LCD not busy
clr a
movc    a, @a+dptr          
inc dptr                            ;point to next byte in string
jz  str_end                         ;if 0 then end of string

mov R1, #(lcd_wr AND 255)           ;Load R1 with wr_data address
movx    @R1, a                      ;Write char to LCD
sjmp    nxt_char                    ;get next char in string
str_end:    ret

lcd_busy:
mov R1, #(lcd_st AND 255)       ;Load R1 with status address
movx    a, @R1                          ;read LCD status
jb  acc.7, lcd_busy         ;keep checking until busy bit clear
ret

mesg1:  db  "Hello   ",0
mesg2:  db  "World ",0
END 
```

一切正常。但是，我无法将变量输出到 LCD。将#mesg1 替换为十六进制值（ascii 以保持简单）只会在屏幕上显示乱码。调用一个每次只增加一个值的子例程也是如此，所以我不确定当数据移入 dptr 时数据应该是什么格式。

我错过了什么愚蠢的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:10:18.440

`dptr`包含`address`要显示的文本。所以，如果你`#mesg1`用类似的东西替换

```
mov dptr, #045h 
```

您正在从地址 0x45 的内存中输出（随机）内容，这解释了您看到的加扰字符。

为了输出一些十进制值，您需要先将其转换为 ascii 字符串，然后您可以使用现有的`wr_string`例程将其打印出来。有关代码示例，请参见[http://www.electro-tech-online.com/microcontrollers/14371-hex-decimal-then-ascii.html（i,j,k](http://www.electro-tech-online.com/microcontrollers/14371-hex-decimal-then-ascii.html)包含您仍需要零终止的结果字符串为您的 wr_string 例程）。

* * *

下面的代码显示了一个类似的例程。请注意，`wr_string`需要修改以从 XDATA 读取数据，而不是从代码内存（`movx a, @dptr`而不是`clr a`/ `movc a, @a+dptr`）：

```
 ORG     08100h

hello:
    mov     r7, #42        ; value to convert
    mov     dptr, #buffer  ; destination buffer
    acall   str2ascii      ; convert value

    mov     P2, #(lcd_cmd SHR 8)   ; load P2 with high address
    mov     R0, #(lcd_cmd AND 255) ; load R0 with command reg addr
    mov     R7, #03h        ; set LCD position, line=1, char=3
    mov     dptr, #buffer   ; point to buffer
    acall   wr_string       ; write buffer to LCD

...

str2ascii:
; Converts a one byte decimal value into its ASCII string representation.
; Result is prepended with leading zeroes.
; 0   becomes "000"
; 42  becomes "042"
; 255 becomes "255"
;
; @param r7    Input value to convert (1 byte, 0 .. 255)
; @param dptr  Destination buffer, at 4 bytes (3 digits plus \0)
;
    mov     a, r7
    mov     b, #100
    div     ab        ; leftmost digit in a
    add     a,#30h    ; convert to ASCII
    movx    @dptr, a
    inc     dptr

    mov     a,b       ; get reminder
    mov     b,#10
    div     ab        ; middle digit in a, rightmost digit in b
    add     a,#30h    ; convert to ASCII
    movx    @dptr, a
    inc     dptr

    mov     a,b
    add     a,#30h    ; convert to ASCII
    movx    @dptr,a
    inc     dptr

    mov     a,#0
    movx    @dptr, a  ; terminate string
    ret

    xseg
buffer:     ds 17     ; one LCD line plus terminating \0

    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T22:38:47.367

在您的代码中， dptr 包含您的代码内存的地址，其中包含您要输出的字符串。因此，如果您将 #mesg1 更改为某个十六进制值，如下所示：

```
mov dptr, #mesg1

```

LCD 将尝试写入此十六进制地址上的 ascii 值。而且你不知道它包含什么。为了在 LCD 上输出变量（就像寄存器值一样），您应该尝试：

1 - 您不能使用 DB 指令将变量数据存储在程序存储器中。它不起作用。您应该将变量值写入内部或外部数据存储器。例如，您不能这样做：

```
   MOV dptr, #mesg1 ;指向mesg1
   ACALL wr_string ; 将 mesg1 写入 LCD

;很多说明...

消息1：
   数据库“我的字符串”            
   DB R1 ;如果 R1 是你的变量          

```

在上面的例子中，LCD 将只输出 MY STRING，独立于 R1 的值

2 - 您需要将变量的值（二进制、十进制或十六进制）转换为 ASCII。仅对于 0 到 9，这是一项非常容易的任务。只需将十六进制值 30H 添加到您的变量中。因此，例如：

```
    mov R1, #9H ;如果 R1 是带有某个数字的变量
    MOV A，R1
    添加一个，#30H
    MOV R1, A ;R1 将存储#39H，即数字 9 的 ascii 值

```

因此，一种选择是将变量拆分为单独的十进制数字，然后将每个数字转换为 ascii。此处的[代码](http://www.electro-tech-online.com/microcontrollers/14371-hex-decimal-then-ascii.html)执行此操作，并将每个 ascii 值存储在变量 i、j、k 上。

我以前使用两个函数：一个用于从代码内存中读取字符串，该字符串之前由 DB 指令存储，另一个用于从内部存储器中读取变量值：

```
    lcd_port EQU P1 ;我向LCD发送数据的端口
    data EQU #41H ;内部数据存储器中的一些随机寄存器

    MOV DPTR，#my_string       
    ACALL lcd_string ;此函数将在 LCD 上写入一些字符串

    MOV A, R1 ;如果 R1 是我的变量
    MOV数据，A
    ACALL lcd_dta ;将 R1 值写入 LCD

液晶字符串：
    移动 A，#0x00
    MOVA，@A+DPTR      
    JZ end_lcd_string    
    移动数据，一个          
    调用 lcd_data        
    INC DPTR             
    JMP lcd_string       
end_lcd_string：        
    RET

液晶数据：
    CALL lcd_busy ; 验证 LCD 是否忙，就像你的函数一样
    SETB LCD_RS ;设置 LCD RS 引脚上的位
    SETB LCD_E ;设置 LCD 使能引脚上的位
    MOV lcd_port ;将数据移至 LCD
    CLR LCD_E ;将 LCD 使能引脚设为 0
    RET

我的字符串：
    DB'你好世界'

```

上述代码应在 LCD 上输出字符串 HELLO WORLD，然后是 R1 值。

# magento - Magento：自定义 Magento 产品导入数据流

> ID：14261376
> 
> 赞同：0
> 
> 时间：2013-01-10T15:29:12.617
> 
> 标签：magento

如何自定义默认 Magento 产品导入数据流，以便在将某些字段插入数据库之前对其进行编辑。

我应该覆盖哪些文件来做到这一点？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-18T14:47:25.680

转到系统 -> 导入/导出 -> 数据流配置文件 -> 导入所有产品然后转到包含 XML 的选项卡。你应该看到这个：

```
<action type="dataflow/convert_parser_csv" method="parse">
    <var name="delimiter"><![CDATA[,]]></var>
    <var name="enclose"><![CDATA["]]></var>
    <var name="fieldnames">true</var>
    <var name="store"><![CDATA[0]]></var>
    <var name="adapter">catalog/convert_adapter_product</var> <!-- override this module -->
    <var name="method">parse</var> <!-- method that will import your data -->
</action> 
```

如您所见，您必须覆盖的类是 Mage_Catalog_Model_Convert_Adapter_Product ，负责导入数据的方法是： parse()

# jsp - 上传文件错误，-参数类型不匹配-

> ID：14261379
> 
> 赞同：5
> 
> 时间：2013-01-10T15:29:18.673
> 
> 标签：jsp, file-upload, struts-1

在我的jsp中，我有一个`html:file`这样的，并且在表单中我有getter和setter。但是在跑步时我得到了

```
Caused by: java.lang.IllegalArgumentException: Cannot invoke com.app.app.struts.forms.MyForm.setDocfile on bean class 'class com.app.app.struts.forms.MyForm'
    - argument type mismatch - had objects of type "java.lang.String" but expected signature "org.apache.struts.upload.FormFile" 
```

jsp：

```
<html:file property="docfile" styleId="docfile" size="45" ></html:file> 
```

仅在提交页面并且我没有上传任何内容时才收到错误。（上传字段不是必填字段。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T14:16:28.013

好像是编码有问题，struts 表单无法将提交识别为文件类型，请确保将表单的 enctype 属性设置`multipart/form-data`为`post`.

所以你应该有：

```
<html:form action="/somePath" enctype="multipart/form-data" method="post"></html:form> 
```

请注意，这可能会影响您的验证。有关更多信息，请参阅[此](https://stackoverflow.com/questions/14241354/struts-1-losing-request-parameters-after-failed-form-validation-with-multipart-f)线程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-06T14:06:44.563

将此依赖项添加到您的项目中：

```
 <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>

    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.4</version>
    </dependency> 
```

# objective-c - 在 os x 应用程序中进入全屏模式时自定义视图动画

> ID：14261392
> 
> 赞同：0
> 
> 时间：2013-01-10T15:29:57.240
> 
> 标签：objective-c, macos, cocoa, nsview, nswindow

当应用程序要全屏显示时，有什么方法可以同时为视图实现动画（帧更改）？

简要地：

我有一个带有 1 个窗口的应用程序，其中包含 3 个视图。由于某些原因，这些视图无法自动调整大小。（无法应用弹簧支柱）

因此，当应用程序进入全屏时 - 窗口变大了，但视图仍然很小，并且仅在

```
-(void)windowDidEnterFullScreen:(NSNotification *)notification 
```

我可以调整他们的框架，所以有一个明显的滞后。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:52:13.713

查看协议文档的[自定义全屏演示动画](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008202-CH1-SW51)部分。`NSWindowDelegate`特别是，我认为你会想要`–customWindowsToEnterFullScreenForWindow:`和`-window:startCustomAnimationToEnterFullScreenWithDuration:`.

# php - 使用 PHP 用用户输入填充 URL 字段

> ID：14261395
> 
> 赞同：-2
> 
> 时间：2013-01-10T15:30:15.363
> 
> 标签：php, html

我正在寻找一个简单的快速解决方案来使用 PHP 从基本的 HTML 菜单（用户选择）填充 URL 字段。

例如：www.123.com/test.php **?choice_1=USER_Input**t&choice_2=**USER_Input**

所以我希望用用户选择填充这两个粗体字段，然后请求它。这是我在工作中被要求做的事情，我没有访问数据库的权限。我只能请求一个网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:35:05.717

[`urlencode`](http://php.net/manual/en/function.urlencode.php)数据。

```
$url = "http://example.com/test.php?choice_1=" . urlencode($input1) . "&choice_2=" . urlencode($input2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:35:12.500

快速指南：

```
<form action="index.php" method="get">
<input type="text" name="input1" id="input1"/>
<input type="text" name="input2" id="input2"/>
<input type="submit" value="Submit">
</form> 
```

URL 看起来像这样：`index.php?input1=VALUE&input2=VALUE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:36:40.613

描述这个 HTML 菜单，它是一个 javascript 菜单还是一个带有链接的纯 HTML 菜单？JavaScript 菜单更灵活，可以让您选择多个选项。就我个人而言，我只会使用 HTML 表单并发布它。然后你可以做

```
header('Location: http://www.example.com/test.php?choice1=' . $POST['one'] . '&choice2=' . $POST['two']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:36:59.500

```
$url = 'http://123.com/test.php?';
$parts = array();
$request = array(
    'input_1' => $_POST['input_1'],
    'input_2' => $_POST['input_2'],
    'input_3' => $_POST['input_3'],
);
foreach ($request as $key => $value) {
    $parts[] = "{$key}={$value}";
}
$url .= implode('&', $parts); 
```

# microsoft-metro - vb.net 程序员迁移到 Metro 的指导

> ID：14261401
> 
> 赞同：-1
> 
> 时间：2013-01-10T15:30:37.943
> 
> 标签：microsoft-metro

我非常了解 vb.net（并且我已经做了一点 WPF），但想看看 Windows 8 / Metro 风格的编程与 VS Express for Windows 8。

有什么好的文章可以帮助解决这个问题吗？

我开始了一个空白项目，其中的一些部分看起来很熟悉，但我想尝试在页面上画一些圆圈来测试图形速度。我会在 vb 中以 OnRender 事件的形式完成此操作，但是虽然我有一个看起来相似的事件列表，但没有像 OnRender 或 OnPaint 这样的东西。

我如何在页面上（在 vb 代码中）绘制一个形状（圆圈）？在谷歌上似乎找不到很多关于 Metro / Windows 8 的信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:58:23.173

这是用于 Windows 8 开发的完整示例包，包括 VB 代码。这绝对是一个很好的起点。
[Windows 8 应用示例](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)
或者您可以使用此链接：
[使用 C# 或 Visual Basic (Windows) 创建您的第一个 Windows 应用商店应用](http://msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx)

# c++ - IntelliSense：没有运算符“+”与这些操作数匹配

> ID：14261402
> 
> 赞同：-1
> 
> 时间：2013-01-10T15:30:38.113
> 
> 标签：c++, operators, operands

你好，我是 C++ 新手，我收到了这个错误。IntelliSense：没有运算符“+”匹配这些操作数
有问题的代码行是：

```
cout << i << "\t" << temp->VehicleNo + "\n"; 
```

链接到显示错误上下文的图片

[http://i.imgur.com/IgKHn.jpg](http://i.imgur.com/IgKHn.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:48:19.227

所以，`temp->VehicleNo`是类的对象，`Vehicle`这个类有一个`VehicleNo`类型的成员`std::string`。要显示该字符串，您需要以下代码：

```
cout << i << "\t" << temp->VehicleNo.VehicleNo << "\n"; 
```

我建议您将其重命名`Node::VehicleNo`为`Node::Vehicle`，以便在上面的代码中为`temp->Vehicle.VehicleNo`，这更有意义。

# c - 如何防止 gdb 在下一个命令后停止

> ID：14261404
> 
> 赞同：2
> 
> 时间：2013-01-10T15:30:43.820
> 
> 标签：c, debugging, gdb

我正在尝试定义一系列命令，应在 gdb 中的断点后调用：

```
 break some_function
    commands
       up
       next
       printf "some_string"
       continue
    end 
```

在这种情况下（例如）我想在 some_function 处中断，在堆栈帧中向上并通过下一个命令跳转到该函数的后面，然后打印“some_string”（或者可能是某个变量，由函数更改）和然后只是继续。但这不起作用，因为 gdb 将在下一个命令之后停止并等待用户输入某些内容，而忽略以下命令。

编辑：好的，我上面给出的例子不符合我的描述。我真正想要的（感谢评论者尼古拉，见下文）是这样的：

```
 break some_function
    commands
       finish
       printf "some_string"
       continue
    end 
```

这将在“some_function”处中断，执行该函数，在“some_function”执行后立即返回并打印字符串“some_string”。我之前使用下一个命令时遇到的问题现在出现在完成命令中：执行将在此命令后停止，gdb 将等待用户输入，而忽略以下 printf 和 continue 语句。对不起，这个问题有点混乱。我自己对此并不满意，但再次发布它不会是一个更好的解决方案（因为评论会丢失并且会交叉发布）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:47:39.123

好的，我想我自己找到了答案：gdb 似乎在内部设置了一个断点来完成和下一个命令。但是，可以定义一个钩子，以克服在此断点处的中断。我认为最好的方法是生成自己的完成版本（或下一个命令）以避免副作用，所以这是可以做的：

```
 define myfinish
      finish
    end

    define hook-myfinish
      printf "some_string"
      continue
    end

    break some_function
    commands
      myfinish
    end 
```

建议使用`silent`中断命令部分开头的语句，以在中断时抑制附加输出：

```
 break some_function
    commands
      silent
      myfinish
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:43:51.203

为什么不简单地打破`some_function+0x4`或类似的偏移量？要知道正确的偏移量，请单击下一次，并记下偏移量...

```
break some_function+0x4
commands
   up
   printf "some_string"
   continue
end 
```

# multithreading - perl 队列文件用线程打开

> ID：14261405
> 
> 赞同：0
> 
> 时间：2013-01-10T15:30:49.837
> 
> 标签：multithreading, perl

我有简单的多线程站点检查器。我尝试在此目录中打开循环 txt 文件

```
my @files = glob( '*.txt' );

foreach my $file(@files){

   @sites=load_file($file);
   $total_count = scalar(@sites);

   for my $t (1..$threads) {
     push @threads, threads->create(\&check, $t);#check- main subroutine
     threads->create(\&stat)->join() if $t == $threads;#stat - realtime statistics(good/bads) sites
   }

   foreach my $t (@threads) {
     $t->join();
   }
} 
```

但它仅适用于第一个文件和程序终止。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:58:08.440

“站点检查器”当然是一个 I/O 绑定问题，而线程/分叉更适合解决 CPU 绑定问题。如果您使用异步方法，网络上的并行请求可以是单进程。[这是一个使用来自 CPAN 的YADA](https://metacpan.org/module/YADA)模块的非常简单的检查器，默认情况下使用 4 个并行连接：

```
#!/usr/bin/env perl
use common::sense;

use YADA;

YADA->new->append(
    [qw[
        http://www.cpan.org/modules/by-category/02_Language_Extensions/
        http://www.cpan.org/modules/by-category/02_Perl_Core_Modules/
        http://www.cpan.org/modules/by-category/03_Development_Support/
        http://www.cpan.org/modules/by-category/27_Pragma/
        http://www.cpan.org/modules/by-category/28_Perl6/
        http://www.cpan.org/modules/by-category/99_Not_In_Modulelist/
    ]] => sub {
        say $_[0]->final_url;
        say ${$_[0]->header};
    },
)->wait; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:37:43.780

如果您正在使用 Perl 进行线程化，有几件事情要避免：

*   过度分叉/创建新进程
*   共享状态，或共享任何不可变或不同步的东西！

您的代码使用硬连线限制`$threads`. 但是您传递并索引到一个全局 (*shudder*) 数组（忘记了第一个索引），因此某些站点可能会未经检查。此外，您为每组站点创建一组新线程，这似乎很浪费。

现在假设我们有一个 Thread::Queue。然后我们从创建几个线程开始：

```
#!/usr/bin/perl

use strict; use warnings; use threads; use Thread::Queue;
use constant THREADS => 5; # or whatever

my $queue = Thread::Queue->new();

my @threads = map threads->new(\&check, $queue),  1 .. THREADS; 
```

我们的`check`子例程将队列作为参数，从中获取站点：

```
sub check {
  my $q = shift;
  while (defined(my $site = $q->dequeue)) {
    ...; # check the site.
  }
} 
```

然后（在启动线程之后），我们用站点填充队列：

```
for my $file (@files) {
   my @sites = load_file($file);
   $queue->enqueue( @sites ); # keep queue operations to minimum
   # maybe wait until there are less that n sites in the queue
} 
```

文件完成后，我们将`undef`值排入队列；这会导致线程终止：

```
$queue->enqueue( (undef) x THREADS );
$_->join for @threads; 
```

# sql - SQL Pivot 显示用户问卷回复？

> ID：14261406
> 
> 赞同：1
> 
> 时间：2013-01-10T15:31:05.237
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot

我正在运行以下 SQL 语句

```
SELECT
 su.Id
  ,rp.QuestionId
  ,rp.AnswerId
FROM SiteUser su
  JOIN Response rp ON su.Id = rp.SiteUserId
  JOIN Answer an ON rp.AnswerId = an.Id 
```

导致以下输出

```
UserId    QuestionId    AnswerId
--------------------------------
1         1             1
1         2             6
2         1             2
2         2             3
3         1             2
3         2             2 
```

我想实现以下输出

```
UserId    Question1   Question2
-------------------------------
1         1           6
2         2           3
3         2           2 
```

任何人都可以帮助编写 Pivot 声明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:35:29.277

如果您使用的是具有该`PIVOT`功能的 RDBMS (SQL Server 2005+/Oracle)，那么您可以使用：

```
select Id, [1] As Question1, [2] as Question2
from
(
  SELECT su.Id
    ,rp.QuestionId
    ,rp.AnswerId
  FROM SiteUser su
  INNER JOIN Response rp 
    ON su.Id = rp.SiteUserId
  INNER JOIN Answer an 
    ON rp.AnswerId = an.Id
) src
pivot
(
  max(AnswerId)
  for QuestionId in ([1], [2])
) piv 
```

如果您使用的是 SQL Server，并且问题 id 的值数量未知，那么您可以使用动态 sql 来获得相同的结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct ', ' + QUOTENAME(QuestionId) 
                    from Response 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsFinal = STUFF((SELECT distinct ', ' + QUOTENAME(QuestionId) + ' as Question'+QuestionId 
                    from Response 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @colsFinal + ' from 
             (
                SELECT su.Id
                  ,rp.QuestionId
                  ,rp.AnswerId
                FROM SiteUser su
                INNER JOIN Response rp 
                  ON su.Id = rp.SiteUserId
                INNER JOIN Answer an 
                  ON rp.AnswerId = an.Id
            ) src
            pivot 
            (
                max(AnswerId)
                for QuestionId  in (' + @colsPivot + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:32:27.723

因为您没有提到任何 RDBMS，所以下面的这个查询几乎适用于所有 RDBMS。

```
SELECT  su.Id,
        MAX(CASE WHEN rp.QuestionId = 1 THEN rp.AnswerId ELSE NULL END) Question1,
        MAX(CASE WHEN rp.QuestionId = 2 THEN rp.AnswerId ELSE NULL END) Question2
FROM    SiteUser su
        INNER JOIN Response rp 
            ON su.Id = rp.SiteUserId
        INNER JOIN Answer an 
            ON rp.AnswerId = an.Id
GROUP BY su.Id 
```

# wpf - WPF 与 DataGrid 中的 DataContext 绑定

> ID：14261409
> 
> 赞同：1
> 
> 时间：2013-01-10T15:31:16.067
> 
> 标签：wpf, binding, datagrid, datacontext

我有一个 WPF DataGrid 并且在 DataGrid 中我希望显示一个依赖于 DataGrid 上下文（来自 ViewModel）之外的属性的列。

对于某些标签（没有 "DataContext." ），我在 DataGrid 之外具有相同的属性绑定，并且效果很好。

```
<DataGrid ItemsSource="{Binding Items.View}" AutoGenerateColumns="False"   x:Name="Overview" >

<DataGridTemplateColumn Header="{lex:Loc Value}" Width="Auto" Visibility="{Binding ElementName=Overview, Path=DataContext.CharacteristicMeasure.Characteristic.CharacteristicType.IsBool,Converter={StaticResource boolToInv}, ConverterParameter=true}" >
  <DataGridTemplateColumn.CellTemplate>
      <DataTemplate>
          <TextBlock Text="{Binding Value}" />
      </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>
  <DataGridTemplateColumn.CellEditingTemplate>
      <DataTemplate>
          <TextBox Text="{Binding Value}"  />
      </DataTemplate>
  </DataGridTemplateColumn.CellEditingTemplate>
  </DataGridTemplateColumn>
</DataGridTemplateColumn> 
```

不知何故，这根本不会影响 DataGridTemplateColumn 的 Visibility 属性。我不知道为什么以及如何继续。

**更新**

我的输出窗口显示以下错误：

```
 System.Windows.Data Error: 2 : Cannot find governing FrameworkElement or FrameworkContentElement for target element. BindingExpression:Path=DataContext.CharacteristicMeasure.Characteristic.CharacteristicType.IsBool; DataItem=null; target element is 'DataGridTemplateColumn' (HashCode=15721293); target property is 'Visibility' (type 'Visibility') 
```

**更新 2**

虽然我在 DataGrid 之外的另一个可见性属性上绑定了相同的属性

```
 <DockPanel Visibility="{Binding CharacteristicMeasure.Characteristic.CharacteristicType.IsBool,Converter={StaticResource boolToInv}, ConverterParameter=true}" >... 
```

这很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:54:48.197

听起来很奇怪，[`DataGridColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn%28v=vs.95%29.aspx)该类直接继承自`DependencyObject`，因此您不能对其属性使用绑定（它没有[`SetBinding`](http://msdn.microsoft.com/en-us/library/ms598273.aspx)方法）。

想不通为什么。

# c# - 无法解析此引用。找不到程序集

> ID：14261412
> 
> 赞同：68
> 
> 时间：2013-01-10T15:31:33.123
> 
> 标签：c#, .net

每次构建解决方案时，都会收到以下错误消息：

> 警告
> 
> 3
> 
> 无法解析此引用。找不到程序集“StandardClassLibrary，Version=1.0.0.0，Culture=neutral，processorArchitecture=MSIL”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。
> 
> 标准类库

所以我的应用程序有许多项目，其中`StandardClassLibrary`之一。上面的消息是一个警告，据我所知，它对我的​​解决方案没有影响。

但我宁愿它不在那里，以防万一......

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-10T15:46:01.883

当项目指向不再存在的程序集的旧位置时，您很可能会收到此消息。由于您能够构建一次，因此该程序集已被复制到您的`bin\Debug`/`bin\Release`文件夹中，因此您的项目仍然可以找到副本。

如果您在解决方案资源管理器中打开项目的引用节点，则引用旁边应该有一个黄色图标。删除引用并从正确的位置再次添加它。

如果您想知道引用它的位置，则必须在文本编辑器中打开 .csproj 文件并查找`HintPath`该程序集 - IDE 出于某种原因未显示此信息。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-10-27T07:45:22.147

如果有人在使用某些**nuget**包时遇到此问题，您可以通过使用包管理器控制台重新安装包来解决此问题：

```
Update-Package -reinstall 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-13T04:55:01.847

如果你用 Docker 构建了一个镜像，你会收到这些奇怪的消息：

> 警告 MSB3245：无法解析此引用。找不到程序集“Microsoft.Extensions.Configuration.Abstractions”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。[/src/Utilities/Utilities.csproj]

打开受影响的项目`Utilities/Utilities.csproj`，（你应该寻找你的项目）。您可能需要先从菜单中选择 Unload Project。右键单击 .csproj 文件并进行编辑。

现在，**删除所有`<HintPath>`标签**

保存，然后重试。

[![在此处输入图像描述](../Images/45450cb33fa2900500041805d69ea481.png)](https://i.stack.imgur.com/Jfs8Q.png)

[![在此处输入图像描述](../Images/2d89ddade4e43eff809db21f9793b272.png)](https://i.stack.imgur.com/8vR11.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-30T17:15:45.360

检查您的项目文件是否是只读的。通过右键单击项目文件夹并选择属性来删除只读属性。在属性屏幕中删除只读复选框。我遇到了同样的问题，这为我解决了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-01T05:24:28.443

如果项目通过 Team Foundation Server 签出到不同的 PC，同一个库文件的不同位置，Reference 中不会有黄色图标标记，但是当更改为 Release build 和 build 项目时，会报错。就像`@C.Evenhuis`所说的那样，它将使用以前构建中的旧版本（例如：调试构建），所以我没有注意到错误。

现在我知道将库文件放在不同 PC 上的不同位置是一个坏习惯。

只需要删除引用并从正确的位置重新添加相同的引用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-07T18:23:22.943

我在 VS 2017 中遇到了同样的警告。在我的情况下，我添加了一个单元测试项目，并且需要为它正在测试的 DLL 上的单元测试设置依赖项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-23T13:07:15.037

也许它会对某人有所帮助，但有时可能会缺少名称标记以供参考，这会导致在使用 MSBuild 构建时找不到程序集。确保该`Name`标签可用于特定的参考 csproj 文件，例如，

```
 <ProjectReference Include="..\MyDependency1.csproj">
      <Project>{9A2D95B3-63B0-4D53-91F1-5EFB99B22FE8}</Project>
      <Name>MyDependency1</Name>
    </ProjectReference> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-26T21:15:22.617

在 2020 年，这种行为仍然存在于 VS2019 中。（即使我从 VS2019 的解决方案资源管理器中清理项目，这也不能解决问题）

**对我有用的解决方案**是打开项目的文件夹，然后手动删除 \bin 和 \obj 目录。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-09T15:18:14.363

我在 VS mac 更新后遇到了这个问题。iOS sdk 已更新。我指的是项目文件夹中的 ios dll。中的版本号`hintpath`已更改。

早些时候：

```
<Reference Include="Xamarin.iOS">   
     <HintPath>..\..\..\..\..\..\..\..\Library\Frameworks\Xamarin.iOS.framework\Versions\13.18.2.1\lib\mono\Xamarin.iOS\Xamarin.iOS.dll</HintPath>
    </Reference>
    <Reference Include="Xamarin.iOS">
      <HintPath>..\..\..\..\..\..\..\Library\Frameworks\Xamarin.iOS.framework\Versions\13.18.1.31\lib\mono\Xamarin.iOS\Xamarin.iOS.dll</HintPath>
    </Reference>
    <Reference Include="Xamarin.iOS">          <HintPath>..\..\..\..\..\..\..\Library\Frameworks\Xamarin.iOS.framework\Versions\13.18.3.2\lib\mono\Xamarin.iOS\Xamarin.iOS.dll</HintPath>
    </Reference> 
```

我参考了上一次提交中的数字，只更改了项目文件夹中的数字，在 android、ios 文件夹中什么也没做。为我工作！！！

现在：

```
<Reference Include="Xamarin.iOS">                                                            
 <HintPath>..\..\..\..\..\..\..\..\Library\Frameworks\Xamarin.iOS.framework\Versions\13.20.2.2\lib\mono\Xamarin.iOS\Xamarin.iOS.dll</HintPath>
        </Reference> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-08-28T13:19:21.707

就我而言，我有以下警告：

> 无法解析此引用。找不到程序集“x”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

> 无法解决“x，Version=1.0.0.248，Culture=neutral，PublicKeyToken=null”和“x”之间的冲突。选择“x，版本=1.0.0.248

dll 的路径在我的 .csproj 文件中是正确的，但我有两次引用它，第二次引用是另一个版本。一旦我删除了不必要的引用，警告就消失了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-03T19:14:21.110

这让我困惑了一段时间，直到我发现解决方案中各个项目的依赖关系已经搞砸了。直截了当，您的组件自然会出现在正确的位置。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-22T18:14:49.023

就我而言，这是因为 .net 框架版本与 MySQL 连接器库不匹配。当我更新我的 .NET 版本时，一切都很顺利。 [http://net-informations.com/q/faq/mysql.html#:~:text=Add%20Reference,Library%20in%20your%20C%23%20project](http://net-informations.com/q/faq/mysql.html#:%7E:text=Add%20Reference,Library%20in%20your%20C%23%20project)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-20T05:51:21.460

在将 NuGet 包添加到 iOS 项目（在 Xamarin 表单项目中）时，我遇到了类似的链接器问题。我们之前在构建配置中提供了额外的 mtouch 参数，例如 *-dlsym:false -cxx -v -v -v -v -gcc_flags*

从配置中删除*-dlsym:false*后，我的问题得到了解决。

# android - Rajawali - 从模型 obj 错误加载纹理

> ID：14261417
> 
> 赞同：0
> 
> 时间：2013-01-10T15:31:54.680
> 
> 标签：android, opengl-es-2.0, blender, rajawali

我正在尝试制作一个加载 3d 对象的应用程序。

当我加载这个对象（http://rgcouto.net/alexandre/COKE/fineObj/）时，一切正常。截图：[http ://rgcouto.net/alexandre/COKE/Screenshot_2013-01-10-15-04-42.png](http://rgcouto.net/alexandre/COKE/Screenshot_2013-01-10-15-04-42.png)

但是当我尝试加载从搅拌机导出的我的对象（http://rgcouto.net/alexandre/COKE/myObj/）时，纹理没有出现并且对象很暗.. 截图：[http ://rgcouto.net /alexandre/COKE/Screenshot_2013-01-10-15-02-27.png](http://rgcouto.net/alexandre/COKE/Screenshot_2013-01-10-15-02-27.png)

我做错了什么？我必须做什么，才能使我的对象出现纹理？

我的混合文件：http://rgcouto.net/alexandre/COKE/blend/

我的渲染器：

```
public class ObjRenderer extends RajawaliRenderer {
    private static final String TAG = "renderer";
    private BaseObject3D mObjectGroup;
    Number3D mAccValues;

    public ObjRenderer(Context context) {
        super(context);
        setFrameRate(60);
        mAccValues = new Number3D();

}

protected void initScene() {

    // mLight = new DirectionalLight(1, -1, 1);
    // mLight.setPower(.9f);
    DirectionalLight light = new DirectionalLight(0, 0, 1);
    light.setPower(1);

    // light.setPosition(0, 20, -20);
    // light.setLookAt(0, 0, 0);

    mCamera.setPosition(0, 0, -14);
    mCamera.setLookAt(0, 0, 0);

    ObjParser objParser = new ObjParser(mContext.getResources(),
            mTextureManager, R.raw.camaro_obj);
    objParser.parse();
    mObjectGroup = objParser.getParsedObject();
    Log.d(TAG, "carreguei");
    DiffuseMaterial material = new DiffuseMaterial();
    material.setUseColor(true);
    mObjectGroup.setMaterial(material);
    mObjectGroup.addLight(light);

    // mObjectGroup.setScale(3);
    addChild(mObjectGroup);

    // mCameraAnim = new RotateAnimation3D(Axis.Y, 360);
    // mCameraAnim.setDuration(8000);
    // mCameraAnim.setRepeatCount(Animation3D.INFINITE);
    // mCameraAnim.setTransformable3D(mObjectGroup);
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    super.onSurfaceCreated(gl, config);
    // mCameraAnim.start();
}

public void onDrawFrame(GL10 glUnused) {
    super.onDrawFrame(glUnused);
    mObjectGroup.setRotY(mObjectGroup.getRotY() + 1);
    // mObjectGroup.setRotation(mAccValues.y, mAccValues.x, mAccValues.z);
}} 
```

问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:38:07.007

在绘制对象之前绑定纹理吗？

在许多 GPU 上，纹理必须是 2 的幂，我已经在这里解释过：

[OpenGL，着色器模型 3.3 纹理：黑色纹理？](https://stackoverflow.com/questions/8818125/opengl-shader-model-3-3-texturing-black-textures/8818391#8818391)

如果您不使用 2 次幂纹理，则效果就是您正在体验的效果，即黑色渲染纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:09:40.670

您必须为您的材质/对象添加颜色或纹理。见这里：[http ://www.rozengain.com/blog/2011/12/05/rajawali-tutorial-3-materials/](http://www.rozengain.com/blog/2011/12/05/rajawali-tutorial-3-materials/)

要告诉您更多信息，我必须查看 OBJ 文本。

干杯

# wolfram-mathematica - 在mathematica中组合两个函数

> ID：14261421
> 
> 赞同：0
> 
> 时间：2013-01-10T15:32:09.520
> 
> 标签：wolfram-mathematica

我是 Mathematica 的新手，在定义某些函数组合时遇到了麻烦。

让`m1`和`m2`成为 映射 使得R 是实`m1: R^2 -> R^2`线`m2:R^2->R^1`

```
m1[eta_, zeta_] = {eta^3, zeta^3} 
m2[x_, y_] = x^2 + y^2

m3[eta_, zeta_]  = Composition[m2, m1][eta, zeta] 
```

在评估最后一行，即`shift+enter`我得到输出

```
m2[{eta^3, zeta^3}] 
```

但这应该是`m3[eta,zeta]=eta^6 + zeta^6`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:05:59.057

写： m3[eta_, zeta_] = m2@@m1[eta,zeta]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:49:09.460

您的函数`m1`返回一个包含 2 个元素的列表，而您的函数`m2`需要 2 个参数。更改`m1`返回的内容或`m2`期望的内容。在这种情况下，重新定义`m2`为

```
m2[{x_, y_}] = x^2 + y^2 
```

线索是，`m2[{eta^3, zeta^3}]`当您向函数提供错误类型的参数时，Mathematica 给出的那种输出——它返回未计算的输入表达式。当你学习时，你会看到很多。

哦，您可能希望在函数定义中使用`SetDelayed`（通常写为`:=`）而不是`Set`（或`=`）。请参阅文档以了解您可能想要这个的原因。

# android - Android - SimpleCursorAdapter changeCursor 函数太慢

> ID：14261424
> 
> 赞同：3
> 
> 时间：2013-01-10T15:32:19.247
> 
> 标签：android, spinner, simplecursoradapter

我正在寻找一种解决方案来加快更新我的微调器。目前，每当我根据先前选择的微调器更改搜索条件时，我正在使用 SimpleCursorAdapter 并调用 ChangeCursor。

我做了一些时间测试，查询需要 5ms 到 60ms，而 changeCursor 函数需要 600ms 到 4000ms+。是否有另一种方法可以更快地更新适配器上的光标？我没有使用相同的查询，所以我不能简单地重新查询游标，然后调用 notifydatasetchanged。我必须创建一个新查询然后取回一个新光标（也许有更好的方法来完成这部分）。

这是我目前的填充方式

```
private void writerSpinner() {
        String[] columns = new String[] { Passage.COL_WRITER_ID + " " + BaseColumns._ID, Passage.COL_WRITER_NAME };
        String whereClause = null;
        String groupBy = null;
        String orderBy = Passage.COL_WRITER_ID + " ASC";

        if (mAdapterPassage == null) {
            String[] columnsSpinner = new String[] { Passage.COL_WRITER_NAME };
            int[] to = new int[] { android.R.id.text1 };

            mAdapterPassage = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_spinner_item, null, columnsSpinner, to);
            mAdapterPassage.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            mPassage.setAdapter(mAdapterPassage);
            mPassage.setOnItemSelectedListener(onItemSelectedListener);
        }

        AsyncLoadData loadData = new AsyncLoadData(mAdapterPassage, mPassage, Passage.TABLE_NAME_WRITERS, columns, whereClause, groupBy, orderBy);
        loadData.execute();
    }

    private void updateChapterSpinner() {
        String[] columns = new String[] { Passage.COL_WRITER_ID + " " + BaseColumns._ID, Passage.COL_CHAPTER_ID };
        String whereClause = Passage.COL_WRITER_ID + " = " + mSelectedWriterId;
        String groupBy = Passage.COL_CHAPTER_ID;
        String orderBy = Passage.COL_CHAPTER_ID + " ASC";

        if (mAdapterChapter == null) {
            String[] columnsSpinner = new String[] { Passage.COL_CHAPTER_ID };
            int[] to = new int[] { android.R.id.text1 };

            mAdapterChapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_spinner_item, null, columnsSpinner, to);
            mAdapterChapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            mChapter.setAdapter(mAdapterChapter);
            mChapter.setOnItemSelectedListener(onItemSelectedListener);
        }

        AsyncLoadData loadData = new AsyncLoadData(mAdapterChapter, mChapter, Passage.TABLE_NAME_PASSAGES, columns, whereClause, groupBy, orderBy);
        loadData.execute();
    }

    private void updateVerseSpinner() {
        String[] columns = new String[] { Passage.COL_WRITER_ID + " " + BaseColumns._ID, Passage.COL_VERSE_ID };
        String whereClause = Passage.COL_WRITER_ID + " = " + mSelectedWriterId
                + " AND " + Passage.COL_CHAPTER_ID + " = " + mSelectedChapter;
        String groupBy = Passage.COL_VERSE_ID;
        String orderBy = Passage.COL_VERSE_ID + " ASC";

        if (mAdapterVerse == null) {
            String[] columnsSpinner = new String[] { Passage.COL_VERSE_ID };
            int[] to = new int[] { android.R.id.text1 };

            mAdapterVerse = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_spinner_item, null, columnsSpinner, to);
            mAdapterVerse.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            mVerse.setAdapter(mAdapterVerse);
            mVerse.setOnItemSelectedListener(onItemSelectedListener);
        }

        AsyncLoadData loadData = new AsyncLoadData(mAdapterVerse, mVerse, Passage.TABLE_NAME_PASSAGES, columns, whereClause, groupBy, orderBy);
        loadData.execute();
    }

private class AsyncLoadData extends AsyncTask<Void, Void, Void> {
        String mTableName; 
        String[] mColumns;
        String mWhereClause;
        String mGroupBy;
        String mOrderBy;
        Spinner mSpinner;
        Cursor mCursor;
        SimpleCursorAdapter mAdapter;

        public AsyncLoadData(SimpleCursorAdapter adapter, Spinner spinner, String tableName, String[] columns, String whereClause, String groupBy, String orderBy) {
            mAdapter = adapter;
            mSpinner = spinner;
            mTableName = tableName;
            mColumns = columns;
            mWhereClause = whereClause;
            mGroupBy = groupBy;
            mOrderBy = orderBy;
        }

        @Override
        protected void onPreExecute()
        {
            //mSpinner.setVisibility(View.GONE);
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            long startCursor = new Date().getTime();
            mCursor = mDBHandler.query(mTableName, mColumns, mWhereClause, null, mGroupBy, null, mOrderBy);
            long timeToQuery = new Date().getTime() - startCursor;          

            Log.i("CursorQuery", "Time to Query Cursor " + mGroupBy + ": "  + timeToQuery + "ms");

            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {   
            long startAdapter = new Date().getTime();
            mAdapter.changeCursor(mCursor);
            long timeToChangeCursor = new Date().getTime() - startAdapter;

            Log.i("AdapterQuery", "Time to Change Cursor " + mGroupBy + ": " + timeToChangeCursor + "ms");

            mAdapter.notifyDataSetChanged();
            //mSpinner.setVisibility(View.VISIBLE);
        }
    }

private OnItemSelectedListener onItemSelectedListener = new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            switch(parent.getId()) {
            case R.id.bible_passage:
                mSelectedWriterId = position + 1;
                updateChapterSpinner();
                break;
            case R.id.bible_chapter:
                mSelectedChapter = position + 1;    
                updateVerseSpinner();
                break;
            case R.id.bible_verse:
                mSelectedVerse = position + 1;
                break;
            }
        }

        public void onNothingSelected(AdapterView<?> parent) {

        }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T23:31:55.930

# 问题

`changeCursor`需要这么长时间 的原因是返回的游标`Database.query(...)`仅在必要时才初始化（所以这是游标的错，而不是适配器的错）。

游标初始化缓慢的原因是它一次解析整个结果集（因为它需要知道总计数）。尽管 SQLite 非常快地返回大量查询，但 java 解析它们的速度非常慢（比 SQLite 慢 100 到 1000 倍）。

# 解决方案

进来吧，[HugeSQLiteCursor](https://github.com/Bruce-Connor/HugeSQLiteCursor)（[带有 JavaDoc！](http://bruce-connor.github.io/HugeSQLiteCursor/)）。我写了这个游标来解决这个问题。它以增量和自动的方式加载结果，而不是一次全部加载（通过一种巧妙的解决方法来找出几乎 0 开销的总计数）。

[下载`.jar`文件](https://github.com/Bruce-Connor/HugeSQLiteCursor/raw/master/hugesqlitecursor.jar)，将其添加到您的`libs/`文件夹中，然后执行以下操作来使用它（完全限定名称是`com.malabarba.hugesqlitecursor.HugeSQLiteCursor`）：

```
adapter.changeCursor(new HugeSQLiteCursor(db, stepSize,
                                          table, columnFields,
                                          selection, selectionArgs)); 
```

如您所见，由于结果是延迟加载的，因此您需要将数据库和查询参数传递给构造函数。一旦创建，游标应该在您以前使用 SQLiteCursor 的任何情况下都能正常工作。

第二个参数 ( `stepSize`) 是您希望在创建光标时最初加载的项目数。**这是重要的参数**。

**整个游标的初始化时间将与只有`stepSize`结果一样有效。**但是不要使`stepSize`适合一个屏幕的结果数量更小。

这个 Cursor 有效地消除了“Java 太慢”的瓶颈。在我的 Nexus 4 上，它在不到**60 毫秒**的时间内返回 50.000 个结果的查询，而 SQLiteCursor 则需要大约 1000 毫秒。当然，如果您的查询非常庞大，以至于 SQLite 返回结果的速度都很慢，那么这个游标只能让您走这么远。

# reporting-services - tablix/matrix 中具有动态列的数据集

> ID：14261427
> 
> 赞同：2
> 
> 时间：2013-01-10T15:32:25.947
> 
> 标签：reporting-services, dataset, ssrs-2008, reporting, reportingservices-2005

我有一个数据集，它可以包含 5 列、第 6、7、10、20 列，甚至 100 列。至少有两个是静态的，其余的是动态的（我正在根据数据库中存在的表进行缩放）。

如何在 Reporting Services 中实现这一点？

如何指定值是动态的 tablix 字段？

最终结果将是这样的：

```
|   TITLE | ENUNCIATION | GOOD | VERY GOOD | BAD | VERY BAD |
-------------------------------------------------------------
| title 1 |  question 1 |    5 |         3 |   1 |        0 |
| title 2 |  question 2 |    1 |         0 |   3 |        0 |
| title 3 |  question 3 |    0 |         0 |   1 |        0 |

|   TITLE | ENUNCIATION |   1  |     2     |  3  |     4    |
-------------------------------------------------------------
| title 1 |  question 1 |    5 |         3 |   1 |        0 |
| title 2 |  question 2 |    1 |         0 |   3 |        0 |
| title 3 |  question 3 |    0 |         0 |   1 |        0 | 
```

**注意**：前两个是静态的，其余是动态的。

**编辑：**

我有这张桌子：

```
|   ID_SCALE  | ID_SCALE_ENTRY   | NAME          |
--------------------------------------------------
|      1       |        1        |    GOOD       |    
|      1       |        2        |    VERY GOOD  |   
|      1       |        3        |    BAD        |   
|      1       |        4        |    VERY BAD   |    
|      2       |        1        |       1       |    
|      2       |        2        |       2       |
|      2       |        3        |       3       |
|      2       |        4        |       4       |
|      2       |        5        |       5       |
|      2       |        6        |       6       |
|      2       |        7        |       7       | 
```

**编辑+注意：** 我想完全按照第一个表中所示显示。问题是 (Good, Very Good, Bad, Very Bad, 1, 2, 3, 4) 字段是动态创建的，无法在 tablix 中指定。

一个例子：当我想要数据集的字段值时，我把这个表达式 Fields!Good.value 但现在想象它不是“好”而是“1”个字段！Good.value 不再存在。结论，是一个具有动态列的数据集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T15:51:57.973

**首先**- 您应该为此使用 Matrix。

**第二**- 要完成您想要的，在您返回数据的方法中，您必须返回至少三个数据字段。

前任：

```
ColDescription - Column description
StaticRowDescription - Row description / static column value
Value - The real value for that column/row combination. 
```

知道了？

你的矩阵应该是这样的：

```
| Any Text               | [ColDescription] |
| [StaticRowDescription] | [Value]          | 
```

**编辑**：

忘了说 Any text 是我在这个例子中的静态列。您可以添加更多以满足您的需要。

**-------------------------------------------------- -------------**

由于您的评论而举了一个例子。

这是您在 return 方法中实现的方式：

假设您有一个静态列`Description`和其他 (n)。

```
public IEnumerable<YourReturnClass> GetData(int param) 
{
    List<YourReturnClass> returnList = new List<YourReturnClass>();
    foreach (var row in allYourRows())
    {
        foreach (var col in row.getColumns())
        {
            returnList.add(new YourReturnClass(){
                StaticRowDescription = row.Description,
                ColDescription = col.Description,
                Value = myValueAccordingToCurrentColumnXRow()
            });
        }
    }

    return returnList;
} 
```

这作为你的矩阵：

```
| Description            | [ColDescription] |
| [StaticRowDescription] | [Value]          | 
```

这样，如果您有一行`allYourRows()`带有描述“费用”，两列名称为“Gas”和“Electricity”，您的矩阵结果将如下所示：

```
| Description | Gas | Electricity |
-----------------------------------
| Expenses    | 25  | 150         | 
```

更好的？

***这只是为了解释矩阵的工作原理，您获取数据的方式可能与描绘的方式不同。***

报告 (RDL) 将是相同的，唯一的变化是您获取数据的方式。如果您有这样的表：（ *这将是您数据库中的表（您存储数据的位置））*

```
| RowDescription | DynamicColumnHeader | Value |
------------------------------------------------
| Year 2013      | January             | 500   |
| Year 2013      | February            | 850   |
| Year 2013      | March               | 265   |
| Year 2014      | February            | 965   | 
```

那么您的报告将如下所示：

```
| Description | January | February | March|
-------------------------------------------
| Year 2013   | 500     | 850      | 265  |
| Year 2014   |         | 965      |      | 
```

明白了吗？

我附上了您的报告的外观图片：

![图片](../Images/e4c1f0a9aae75fc5ad606b06b98274d4.png)

新编辑：

```
|   TITLE | ENUNCIATION    | [NAME]                          |
-------------------------------------------------------------
| [title] |  [enunciation] |  [ID_SCALE] OR [ID_SCALE_ENTRY] | 
```

*或乘法，总和等...

根据最后的评论进行编辑：

```
|   TITLE | ENUNCIATION    | [NAME]                          |
-------------------------------------------------------------
| [title] |  [enunciation] | [Count(NAME)]                   | 
```

是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:49:44.603

你想要做的是一个[Pivot grid](http://www.dbxtra.com/help-file/Pivot_Grid.htm)，它是用来汇总数据的，它包含一个行区域（Title 和 Enunciation 字段所在的位置）、一个列区域（Q_Name 字段所在的位置）和一个数据区域想总结一下（在你的情况下，我相信一些事情）。

![DBxtra 中的枢轴网格](../Images/04da9063e5aa4eb2d7e038cdfda4b461.png)

当然，您可以在纯 SQL 上执行此操作，但即使您有固定数量的列，执行和维护也是一场噩梦。如果您对这种方法更感兴趣，可以在这里查看我的答案：[如何在 Acess 2010 中制作包含每个月的案例类型计数的报告](https://stackoverflow.com/questions/13918536/how-to-make-a-report-with-count-of-type-of-cases-in-each-month-in-acess-2010/13924197#13924197)。

免责声明：屏幕截图中的工具是[DBxtra](http://www.dbxtra.com/)，这是我推广的用于报告和商业智能的工具。

# java - 如何使用 jersey (java) 初始化休息服务器中的对象？

> ID：14261430
> 
> 赞同：1
> 
> 时间：2013-01-10T15:32:33.440
> 
> 标签：java, web-applications, jersey

我有一个愚蠢的问题。我有一个 java web 应用程序和一个带有 jersey 的 rest 接口。我可以在哪里放置初始化代码块？

例如，我有一个单例，带有一个方法“createInstance”。休息服务器运行时如何执行“createInstance”方法。有没有像“Main()”这样的东西来放置初始化的东西？

我在项目中也有 servlet，但是当用户打开网页时它们正在执行。

我想知道是否存在放置我的初始化代码的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:43:14.837

最后我找到了解决方案：

为了执行初始化代码，我可以创建“ServletContextListener”的实现。

通过这种方式，我这样做：

```
package foopackage;

...
public class ServletContextClass implements ServletContextListener
{  

    @Override
    public void contextInitialized(ServletContextEvent arg0) 
    {        
            ...     
    }

    @Override
    public void contextDestroyed(ServletContextEvent arg0) 
    {
           ...
    }
} 
```

要在应用程序服务器初始化后使用此侦听器，必须将其放在 web.xml 中。

```
 <listener>
     <listener-class>foopackage.ServletContextClass</listener- class>
 </listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:42:21.440

完全不清楚“初始化对象”是什么意思。我想显而易见的答案是你在需要的地方初始化一个对象。

如果你需要创建一个单例，你可以像使用 Java 中的任何其他单例一样创建它，使用静态文件或枚举；你会在你的一个 REST 方法中得到它的一个实例。例如

```
@GET
@Produces("application/xml")
public String getData() {
   Singleton singleton = Singleton.getInstance();
   String result = singleton.domSomething();
   return result;
} 
```

如果您想要使您的资源（Web 服务）成为单例，那么您可以通过扩展 javax.ws.rs.core.Application 来实现，然后根据您使用的 JAX-RS 实现和服务器，您可能需要配置您的 web.xml 以使用此应用程序定义初始化您的 REST 服务。此类具有名为的方法`getSingletons()`，您可以扩展该方法以提供资源的单例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T15:48:29.150

休息资源就像任何其他类一样。
您可以使用构造函数来初始化您的对象。

# c++ - 基于最大值的换行/溢出数的算法

> ID：14261431
> 
> 赞同：1
> 
> 时间：2013-01-10T15:32:35.077
> 
> 标签：c++, c, algorithm

有人来挑战吗？我正在寻找一种有效的算法来实现固定最大值的数字的换行/溢出行为。

说，最大可能的数值定义为：

```
#define MAX_NUMBER_VALUE 100 
```

还有一个函数`translate`，它采用带符号的 32 位或 64 位整数值并使用 MAX_NUMBER_VALUE 常量“将其环绕”：

```
int_fast8_t translate(int_fast32_t value) {

  if (abs(value) > MAX_NUMBER_VALUE) {
    return ...; // This!
  }

  return value;
} 
```

预期的输入和输出：

```
translate(55)   => 55
translate(100)  => 100
translate(101)  => -100
translate(102)  => -99
translate(200)  => -1
translate(202)  => 1
translate(300)  => 99
translate(-40)  => -40
translate(-100) => -100
translate(-101) => 100
translate(-102) => 99
translate(-200) => 1
translate(-201) => 0
... 
```

值围绕数字“走动”，就好像它是一个圆形行星一样。这看起来确实类似于 C/C++ 处理 int 溢出条件的方式。我想知道是否有一种快速有效的方法来实现这种包装？像移位或其他按位运算一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:35:45.343

听起来您只是在描述`%`运算符，并对负数进行了一些仔细的处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:43:15.147

```
int_fast8_t translate(int_fast32_t value) {
  return sgn(value)*( (abs(value)+MAX)%(2*MAX+1)-MAX )
} 
```

`int_fast32_t`应该这样做，假设为类型定义了模块化划分

编辑为包括处理负数，但现在看起来有点混乱。有关 sgn(x) 的智能实现，请参阅[此](https://stackoverflow.com/questions/1903954/is-there-a-standard-sign-function-signum-sgn-in-c-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:39:49.140

只要您`input + MAX_VALUE`小于相关整数类型的最大值，我认为您可以使用它，甚至不需要初始`abs`检查：

```
return ((input + MAX_VALUE) % (MAX_VALUE * 2 + 1)) - MAX_VALUE; 
```

# html - 正确格式化这些表格

> ID：14261435
> 
> 赞同：0
> 
> 时间：2013-01-10T15:32:49.617
> 
> 标签：html, forms, xhtml

我有一种情况，嵌套表单可以很好地工作，但显然嵌套表单是不允许的。

以下面的例子为例：

```
<form method="post" action="bid.php">
   <input type="hidden" value="11111111" name="auction_id">
   <input type="hidden" value="bid_confirm" name="action">                
    <!-- Holder Ends -->
    <div class="holder2">
        <div class="text">
            Quantity:
        </div>
        <div class="field">
            <input type="text" maxlength="6" value="1" class="small" name="quantity">
        </div>
        <!-- Btn Ends -->                                                    
        <div class="contentClear"></div>
    </div>
    <!-- Holder Ends -->                                                             
    <div class="holder holder3">                                                        
        <div class="field">
            <input type="text" maxlength="15" name="max_bid">
        </div>
        <div class="btn">
            <input type="image" src="images/pixel.gif" class="bid" name="submit">
        </div>
        <!-- Btn Ends -->
        <form method="post" action="make_offer.php?auction_id=11111111">  
            <div class="btn btn_offer">
                <input type="image" src="images/pixel.gif" class="offer" name="submit">
            </div>
            <!-- Btn Ends -->
        </form>                                    
        <div class="contentClear"></div>
    </div>
    <!-- Holder Ends -->            
</form> 
```

您将从上面看到嵌套是理想的位置。

从技术上讲，我可以在另一个表单开始之前关闭第一个表单，因为所有必填字段都已输出`auction_id,action,quantity,max_bid`，但是我想避免这种情况，因为随后代码开始看起来很混乱，因为表单将在代码的不同部分打开和结束&不是很理想。

有没有人知道如何在不使用 Javascript 的情况下处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:55:17.573

您可以让第二个表单（提供报价）成为`AJAX`您不提交表单但仍正确发送数据的组件。IMO 这将是最好的方法，但你不想恢复`javascript`（出于某种原因）。

另一个可行的选择是不要让表单插入`iFrame`页面。然后，此页面上将包含您的第二个表单并提交。这样做的问题是您必须找到一种将拍卖ID 传递给iFrame 的方法。但是如果你可以通过 URL 参数做到这一点，那么它应该不会太糟糕。

我认为它看起来很像：

```
 <!-- Btn Ends -->
    <iframe src="pagewithform2.php?auction_id=1111111" width="xx" height="xx" scrolling="no"/>                                  
    <div class="contentClear"></div> 
```

# android - ListView 与 EditText 键盘问题

> ID：14261436
> 
> 赞同：2
> 
> 时间：2013-01-10T15:32:50.143
> 
> 标签：android, listview, keyboard, android-edittext

在我的应用程序中，我有一个 Activity，其中包含一个 Fragment，其中包含一个带有各种 EditTexts 的 ListView，如下所示：

活动 -> 片段 -> 列表视图 -> 编辑文本

当点击 EditText 时，会显示软键盘并发生以下两种情况之一：

*   如果 Activity 尚未失去焦点（例如，通过访问 Android 主屏幕），则整个 Activity 会略微向上滑动，以便 EditText 不会被键盘遮挡。

*   如果 Activity 在某些时候失去焦点（再次，例如访问 Android 主屏幕），ListView 会在键盘上方滚动 EditText（活动保持静止），但 EditText 失去焦点！

这些结果都不是理想的。理想情况下，我总是希望 ListView 在键盘上方滚动 EditText 而不会使 EditText 失去焦点。谁能指出我正确的方向和/或解释为什么我现在看到同一动作的两种不同行为？

编辑：作为参考，我正在为 Android 4.2 构建并在 Nexus 7 平板电脑上进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:55:57.320

问题是，当您在 ListView 行中使用 EditText 时，您的 ListView 可能会被重绘以为键盘腾出空间。并且当您的 ListView 被重绘时，系统不会记住光标之前的位置。

如果您在 ScrollView 而不是 ListView 中使用 LinearLayout，则似乎不会发生相同的问题。这听起来很愚蠢，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T09:46:06.580

最近我也遇到了这个问题，我通过在 AndroidManifest.xml 中添加**android:windowSoftInputMode="adjustPan"**来解决这个问题。这不会导致 listview 重绘，所以edittext不会失去焦点。

# jquery - jquery validate：如果存在错误，则更改选项卡标题的颜色

> ID：14261438
> 
> 赞同：1
> 
> 时间：2013-01-10T15:32:55.357
> 
> 标签：jquery, jquery-validate

我有一个分布在两个选项卡上的表单，如果包含的选项卡包含有错误的任何字段，我想将选项卡标题涂成红色。

[我在这个-->小提琴](http://jsfiddle.net/houmie/Nf8xY/11/)<--中得到了很多工作。在字段中输入一个值，您将看到红色选项卡标题如何消失。但是，如果您删除条目以便立即启动错误验证，则选项卡不会恢复为红色。

从外观上看，当错误验证第二次抛出时，该函数`invalid-form.validate`不会命中，除非我挂钩到错误的事件。

我真的用完了我可以把它挂起来的事件，知道把它放在哪里吗？:)

```
function mark_tab_header_error(form, element, is_error){
    var id = $(form).find(element).closest('.tab-pane').attr('id');
    $(form).find(element).closest('.tabbable').find('.tab_header').each(function(index, value){
        if($(this).attr('href') == '#' + id){
            if(is_error)
                $(this).css({color: 'red'});
            else
                $(this).removeAttr('style');            
        }                   
    }); 
}

$(document).ready(function () {

  var validator = validation_rules('#myform');
  validator.form();

  function validation_rules(form) {

    $.validator.addClassRules("fillone", {
      require_from_group: [1, ".fillone"]
    });

    var validator = $(form).bind("invalid-form.validate",  
            function() { 
                if(validator.numberOfInvalids() > 0)
                    mark_tab_header_error(form, validator.lastElement, true);                           
            }).validate({    
      errorPlacement: function (error, element) {
        var field_error = $(form).find('#id_' + element.attr('name')).siblings('.field_error');
        if (field_error.length > 0) {
          error.appendTo(field_error);
        }

        $(field_error).show();
      },
      invalidHandler: function () {
        $("#validation_summary").text(validator.numberOfInvalids() + " field(s) are invalid");
      },
      errorContainer: "#validation_summary",
      success: function(){
                    mark_tab_header_error(form, validator.lastElement, false);
              }

    });
    return validator;
  }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:16:26.080

I'm not an expert but I think I've achieved what you are trying to do : [forked fiddle](http://jsfiddle.net/PsaJY/)

Basically, I've just added this :

```
$.validator.addMethod("require_from_group", function(value, element, options) {
  var validOrNot = $(".fillone").filter(function() {
     // Each field is kept if it has a value
     return $(this).val();
     // Set to true if there are enough, else to false
  }).length >= 1;

  mark_tab_header_error(form, validator.lastElement, !validOrNot);

  if(!$(element).data('being_validated')) {
    var fields = $(".fillone", element.form);
    fields.data('being_validated', true);
    // .valid() means "validate using all applicable rules" (which 
    // includes this one)
    fields.valid();
    fields.data('being_validated', false);
  }  
  return validOrNot;
}); 
```

Thanks to this wonderful answer : [jQuery Validate - require at least one field in a group to be filled](https://stackoverflow.com/q/1300994/667433)

I'm really not a JavaScript expert, don't hesitate to let me know if it's a bad idea...

**Update**

Following your comment, I was able to make other validation work : [http://jsfiddle.net/PsaJY/3/](http://jsfiddle.net/PsaJY/3/)

I had to do two things :

*   Change the success handler that update the tabs : the error condition should be `validator.numberOfInvalids() > 0` instead of `false` since from what I understand, this handler is called each times a field transtion from error to success states ;
*   Force the validation of the whole form by binding `onfocusout` and `onkeyup` events.

# c# - 如何更改控制台应用程序上的目录

> ID：14261439
> 
> 赞同：16
> 
> 时间：2013-01-10T15:32:55.297
> 
> 标签：c#, directory, console-application

我正在为 c# 上的分配创建一个简单的资源管理器程序，并将目录设置为`c:\\Windows`

您如何能够将目录从默认窗口更改为控制台中的其他内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T15:36:49.303

```
Directory.SetCurrentDirectory(@"c:\program files\"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T15:37:12.980

您可以[`Environment.CurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)为目录路径设置属性。

> 获取或设置当前工作目录的标准路径。

```
public static void Main(string[] args)
{
    Environment.CurrentDirectory = "C:\\Windows";
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T15:35:39.383

尝试设置`Environment.CurrentDirectory`为您想要的值。

在你的情况下：

```
Environment.CurrentDirectory = "C:\\Windows"; 
```

# android - 在 Android 中显示已安装的应用程序时出现重复

> ID：14261441
> 
> 赞同：2
> 
> 时间：2013-01-10T15:33:00.473
> 
> 标签：android, android-package-managers

首先，我想说这是我在 StackOverflow 上的第一篇文章，所以我希望我做得对。

我正在尝试制作一个显示所有用户应用程序的 Android 应用程序。我遇到的问题是某些应用程序被多次显示。我不知道如何检查与包相关的活动，但我认为这是与此类似的情况：

[Android：如何获取已安装活动的列表，就像它们出现在启动器中一样，没有重复](https://stackoverflow.com/questions/9904698/android-how-to-get-a-list-of-installed-activities-as-they-appear-in-launcher)

Intent 解决方案不显示任何重复项，但我将如何使用类似的内容在 GridView 中显示？

编辑：感谢您的快速回复。这是我已经获得包裹的方式。但是，我没有使用 0 标志。替换 0 标志后，我仍然收到重复。是否与 GridView 的工作方式有关？我碰巧注意到，当我在网格视图上向下滚动并返回时，我的列表顺序不同。

将应用程序拉入列表的代码：

```
ArrayList<ApplicationInfo> apps =  (ArrayList<ApplicationInfo>) manager.getInstalledApplications(0);  //manager is a variable containing getPackageManager 
```

编辑2：

使用以下代码输出 ArrayList 后：

```
 for(int i = 0; i < apps.size(); i++){

        Log.i((String) apps.get(i).loadLabel(manager), apps.get(i).packageName);

    } 
```

我可以得出结论，数组中没有重复项。但是，它们以某种方式出现在网格视图中。

最终编辑：

这个问题的最佳答案最终解决了 GridView 问题：

[屏幕滚动时，GridView 中的项目会重复](https://stackoverflow.com/questions/11245620/items-inside-gridview-getting-repeated-when-screen-scrolls)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:41:02.737

这是获取当前安装的软件包的另一种方法。当我以这种方式获取信息时，我不会得到重复：

```
 PackageManager packageManager = null;
            List<ApplicationInfo> appsList = new ArrayList<ApplicationInfo>();
            try {
                packageManager = getPackageManager();
                if (packageManager != null) {
                    appsList = packageManager.getInstalledApplications(0);
                }
            } catch (Exception e1) {
                Log.v("TAG", "This is my error: ", e1);
            } 
```

然后，您可以从 ApplicationInfo 对象中检索各种信息（包括图标、名称等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:23:08.357

这应该一劳永逸地解决问题。

```
 PackageManager packageManager = null;
 List<ApplicationInfo> appsListTest = new ArrayList<ApplicationInfo>();
 try {

     packageManager = context.getPackageManager();
     if (packageManager != null) {
         appsListTest = packageManager.getInstalledApplications(0);

     }
 } catch (Exception e1) {
     Log.v("TAG", "This is my error: ", e1);
 }

 Log.d("LOG", " New PM : " + appsListTest.size() );

 Iterator<ApplicationInfo> iterator = appsListTest.iterator();
while (iterator.hasNext()) {
    Log.d("LOG", " : " + iterator.next().loadLabel(packageManager).toString());

} 
```

# qt - 如何调试 $.mobile.changePage？

> ID：14261448
> 
> 赞同：1
> 
> 时间：2013-01-10T15:33:17.930
> 
> 标签：qt, debugging, jquery-mobile

调用时我的页面没有变化`$.mobile.changePage`。出现一条错误消息，但仅此而已！

如何监控错误？是否有状态码或响应消息？`$.mobile.changePage`在 JQuery Mobile 中有什么替代方法吗？

我的代码尽可能简单：

```
$.mobile.changePage("page.html", {showLoadMsg: true}); 
```

有关信息，此代码嵌入在 QWebKit 中，我不使用服务器。这只是独立的 HTML。标准异步请求工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:19:53.257

我在这个[答案](https://stackoverflow.com/a/9362457/902025)中找到了解决方案。

我应该`window.location.href = "page.html";`改用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:35:31.283

使用[QWebInspector](http://doc.qt.digia.com/qt/qwebinspector.html)检查 ajax 调用的响应

# sql - 在数据库级别设置 MaxDOP 是否会限制该数据库或该数据库中运行的查询的 CPU？

> ID：14261453
> 
> 赞同：1
> 
> 时间：2013-01-10T15:33:32.533
> 
> 标签：sql, sql-optimization

我们有一个 16 核的 CPU。CPU 仅用于具有单个数据库的 SQL Server。目前，MaxDOP 设置为 0。

我们正在考虑将 MAXDOP 更改为 8 以尝试限制查询使用的最大 CPU 数量，但是顾问 DBA 表示这将限制数据库使用的 CPU 数量。

有人对这个有经验么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:35:56.980

在服务器级别 = 所有查询。这是[最大并行度](http://msdn.microsoft.com/en-us/library/ms181007%28SQL.105%29.aspx)选项

每个查询，使用[MAXDOP](https://stackoverflow.com/questions/163917/optionmaxdop-1-in-sql-server)提示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:43:16.753

您始终可以在要限制的查询末尾指定“OPTION (MAXDOP 1)”。这只会影响该查询。

# ios - iOS如何在已经堆叠的ViewController上调用presentViewController

> ID：14261455
> 
> 赞同：2
> 
> 时间：2013-01-10T15:33:37.540
> 
> 标签：ios, presentmodalviewcontroller

我正在尝试将视图控制器推送到已推送的视图控制器上，如下所示。但是，不知何故，当我尝试推送时`newPersonViewController`，这个新控制器并没有被推送到堆栈上。我不知道为什么 Xcode 抱怨我试图添加一个不属于层次结构的新控制器。我是否呈现`ABPeoplePickerViewController`错误？这就是`newPersonViewController`无法将其推入堆栈的原因吗？

来自控制台的消息：

> 警告：尝试呈现不在窗口层次结构中的视图！

编码：

```
- (void)addPerson
{
    ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController alloc] init];
    newPersonVC.newPersonViewDelegate = self;
    UINavigationController *uiNav = [[UINavigationController alloc] initWithRootViewController:newPersonVC];

    [self presentViewController:uiNav animated:YES completion:nil];
}

- (void)showPeoplePicker
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;

    [self presentViewController:picker animated:YES completion:nil];
    [picker.topViewController setEditing:YES];
    picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addPerson)];
    picker.topViewController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(peoplePickerCancel)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:07:52.157

问题是`addPerson`试图从不是当前控制器的视图控制器中呈现模态。（您的`self`原始视图控制器）不是活动控制器。是`ABPeoplePickerNavigationController`。

因此，首先，定义一个类属性来跟踪`picker`：

```
@property (nonatomic, weak) ABPeoplePickerNavigationController *picker; 
```

接着，

*   修改`showPeoplePicker`以设置该属性；和
*   修改`addPerson`以使用该属性：

因此：

```
- (void)addPerson
{
    ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController alloc] init];
    newPersonVC.newPersonViewDelegate = self;
    UINavigationController *uiNav = [[UINavigationController alloc] initWithRootViewController:newPersonVC];

    [self.picker presentViewController:uiNav animated:YES completion:nil];
}

- (void)showPeoplePicker
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;

    [self presentViewController:picker animated:YES completion:nil];
    [picker.topViewController setEditing:YES];
    picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd    target:self action:@selector(addPerson)];
    picker.topViewController.navigationItem.leftBarButtonItem  = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(peoplePickerCancel)];

    self.picker = picker;
}

- (void)newPersonViewController:(ABNewPersonViewController *)newPersonView didCompleteWithNewPerson:(ABRecordRef)person
{
    [newPersonView dismissViewControllerAnimated:YES completion:nil];
} 
```

# jdbc - dbcp 以高打开/关闭率生成与 Oracle DB 的连接数

> ID：14261460
> 
> 赞同：1
> 
> 时间：2013-01-10T15:33:50.753
> 
> 标签：jdbc, connection, apache-commons-dbcp, jdbc-pool

我的应用程序使用**DBCP1.4**、hibernate 和 spring，连接到 oracle。在几百个请求/秒的常见负载下，我获得了与数据库的太多 TCP 连接（导致数据库端过度使用系统进行身份验证，16 核机器的 cpu 为 95%）。超过 80 个连接/秒，每个连接为来自客户端的少量请求和 FIN 提供服务。每个会话只有 15-20 毫秒。我想调整**DBCP**或**oracle 驱动程序**（不知道哪个负责）以延长每个连接的时间（至少考虑 5-10 秒）我怎么能得到这个？DBCP 中的池设置为

```
 <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>     
    <property name="initialSize" value="10"/>
    <property name="maxActive" value="100"/>
    <property name="maxIdle" value="100"/>
    <property name="maxWait" value="5000"/>
    <property name="removeAbandoned" value="true"/>
    <property name="removeAbandonedTimeout" value="60"/>
    <property name="logAbandoned" value="false"/>
    <property name="validationQuery" value="select 1 from dual"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="numTestsPerEvictionRun" value="2"/>
    <property name="timeBetweenEvictionRunsMillis" value="-1"/>
    <property name="minEvictableIdleTimeMillis" value="600000"/>
    <property name="validationQueryTimeout" value="5"/>
    <property name="poolPreparedStatements" value="false"/> 
```

spring的线程执行器设置是-

```
 <property name="connectionGetterExecutor">
        <bean class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
            <property name="corePoolSize" value="15"/>
            <property name="maxPoolSize" value="100"/>
            <property name="queueCapacity" value="10000"/>
        </bean>
    </property> 
```

# symfony - symfony2 请求获取 gmail 别名或带有更多符号的字符串

> ID：14261471
> 
> 赞同：0
> 
> 时间：2013-01-10T15:34:34.920
> 
> 标签：symfony

一个 gmail 别名：`test+alias1@gmail.com`

网址示例：`/enabled-account/?mail=test%2Balias1%40gmail.com`

在控制器中：

```
$mail = $this->getRequest()->get('mail'); // result 'test alias1@gmail.com' 
```

缺少“更多”的标志！

如何恢复初始标志？

# css - 在 HTML5 的文章中使用主要内容持有者？

> ID：14261472
> 
> 赞同：0
> 
> 时间：2013-01-10T15:34:38.647
> 
> 标签：css, html, optimization

我正在为自定义博客页面创建一个模板，并且想知道以下内容是否被归类为良好的 HTML5？

**当前的**

```
<article>
    <header class="clearfix">
        <h1><a href="/link">Title</a></h1>
        <p>Posted on the <time><?=date?></time></p>
    </header>
    <div>
        <p>main content will be here like this ...</p>
        <p>main content will be here like this ...</p>
        <p>main content will be here like this ...</p>
    </div>
    <footer>
        <div class="clearfix">
            <h3>Share this Article</h3>
            <div class="social-button">Facebook</div>
            <div class="social-button">Twitter</div>
            <div class="social-button">Google</div>
        </div>
        <div>
            <h3>Comments</h3>
            <strong>Coming Soon ...</strong>
        </div>
    </footer>
</article> 
```

我试图避免使用`<div>`“主要内容”，但我需要使用 clearfix 并且如果没有`div`?

```
article p:last-child:after{
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
    } 
```

会有多负面`<div>`？也许我应该在`<section>`那里使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:53:45.800

使用没有什么不好的`DIV`（只要不是用来替换更合适的语义元素）。它没有语义，只是应用样式的通用容器。

# orm - 如何编写 ORM 语句以从数据对象返回过滤后的数据？

> ID：14261473
> 
> 赞同：3
> 
> 时间：2013-01-10T15:34:38.833
> 
> 标签：orm, coldfusion, hql

好的。我刚刚开始在我的 Coldfusion 应用程序中使用 ORM。到目前为止，它一直进展顺利。我碰到了这个障碍。我有这两张表：

![在此处输入图像描述](../Images/d162132506caa239a2d8bf95674a8dbc.png)

这是我用来将数据加载到页面中的代码。if 的第二部分是默认加载，第一部分是用于将列表过滤到特定类别的部分。

```
<cfif form.filtercat neq ''>
    <cfset load = ormexecuteQuery('from product_spec_cats as cats inner join cats.product_spec_cat_prod_cat_lnk as link WHERE link.spl_prod_cat_id = #form.filtercat#',{},false)>
<cfelse>
    <cfset load = entityload('product_spec_cats')>
</cfif> 
```

查询返回这`cfelse`正是我需要的：

![在此处输入图像描述](../Images/44fc8e351f671f8227494795e339d32a.png)

查询返回 this，这`cfif`是一个问题，因为每个父数组中有两个子数组。

![在此处输入图像描述](../Images/154b2299bec19c117029ff545f8ba0f3.png)

所以，我的问题是，如何编写 HQL 以返回与默认查询相同结构的数据，并且仍然能够过滤数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T19:21:28.973

您正在运行的 HQL 同时选择`product_spec_cats`和`product_spec_cat_prod_cat_link`实体，因为您没有定义要选择的内容：

```
from product_spec_cats as cats 
inner join cats.product_spec_cat_prod_cat_lnk as link 
WHERE link.spl_prod_cat_id = #form.filtercat# 
```

`select * from ...`该查询与普通 SQL 查询中的 a基本相同。你想要做的是：

```
select cats
from product_spec_cats as cats 
inner join cats.product_spec_cat_prod_cat_lnk as link 
where link.spl_prod_cat_id = #form.filtercat# 
```

根据你的关系是如何建立的，你甚至可能不需要内连接，你可以这样写你的查询：

```
from product_spec_cats as cats    
where cats.product_spec_cat_prod_cat_lnk.spl_prod_cat_id = #form.filtercat#` 
```

最后，顺便说一句，我建议您使用查询参数，**尤其是**当您将`form`范围内的某些内容粘贴到查询中时：

```
ormExecuteQuery("
    select cats
    from product_spec_cats as cats
    inner join cats.product_spec_cat_prod_cat_lnk as link
    where link.spl_prod_cat_id = :catID
", { catID = form.filtercat }); 
```

# python - 如何编写返回另一个函数的函数？

> ID：14261474
> 
> 赞同：103
> 
> 时间：2013-01-10T15:34:44.280
> 
> 标签：python, function, functional-programming, currying

在 Python 中，我想编写一个`make_cylinder_volume(r)`返回另一个函数的函数。返回的函数应该可以使用参数调用`h`，并返回具有高度`h`和半径的圆柱体的体积`r`。

我知道如何从 Python 中的函数返回*值*，但是如何返回*另一个函数*？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-01-11T03:17:45.697

试试这个，使用 Python：

```
import math
def make_cylinder_volume_func(r):
    def volume(h):
        return math.pi * r * r * h
    return volume 
```

像这样使用它，例如与`radius=10`and `height=5`：

```
volume_radius_10 = make_cylinder_volume_func(10)
volume_radius_10(5)
=> 1570.7963267948967 
```

请注意，返回一个函数是在函数内部定义一个新函数并在最后返回它的简单问题——注意为每个函数传递适当的参数。仅供参考，从另一个函数返回一个函数的技术称为[currying](http://en.wikipedia.org/wiki/Currying)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-07-09T08:00:04.663

使用 lambda，也称为匿名函数，您可以将`volume`内部的函数抽象`make_cylinder_volume_func`为一行。与 Óscar López 的回答没有什么不同，使用 lambda 的解决方案在某种意义上仍然“更实用”。

这是您可以使用 lambda 表达式编写接受的答案的方法：

```
import math
def make_cylinder_volume_fun(r):
    return lambda h: math.pi * r * r * h 
```

然后像调用任何其他咖喱函数一样调用：

```
volume_radius_1 = make_cylinder_volume_fun(1)
volume_radius_1(1) 
=> 3.141592653589793 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-11-09T03:13:35.870

只是想指出你可以用 pymonad 做到这一点

```
 import pymonad 

 @pymonad.curry
 def add(a, b):
     return a + b

 add5 = add(5)
 add5(4)
 9 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-19T13:01:26.363

我知道我参加聚会为时已晚，但我认为您可能会觉得这个解决方案很有趣。

```
from math import pi
from functools import partial

def cylinder_volume(r, h):
    return pi * r * r * h

make_cylinder_with_radius_2 = partial(cylinder_volume, 2)
make_cylinder_with_height_3 = partial(cylinder_volume, h=3)

print(cylinder_volume(2, 3))            # 37.6991118431
print(make_cylinder_with_radius_2(3))   # 37.6991118431
print(make_cylinder_with_height_3(2))   # 37.6991118431 
```

这是有关如何工作的[文档](https://docs.python.org/3.7/library/functools.html#functools.partial)`partial`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-12-17T09:03:29.077

这是一个庞大的示例，它涵盖了一个函数中的许多单个多参数情况

```
def maths(var='NA'):
if var.lower() == 'add':
    def add(*args):
        return "Sum is : "+str(sum(args))
    return add
elif var.lower() == 'substract':
    def substract(a,b):
        if a>b:
            return "Difference is : "+str(a-b)
        else:
            return "Difference is : "+str(b-a)
    return substract
elif var.lower() == 'multiply':
    def multiply(*args):
        temp = 1
        for x in args:
            temp = temp*x
        return "multiplication is : "+str(temp)
    return multiply
elif var.lower() == 'divide':
    def divide(a,b):
        return "Division is : "+str(a/b)
    return divide
else:
    print("Please choose one of given operations: 'add','substract','multiply','divide'") 
```

这里先调用需要运算的数学函数，然后使用返回的函数进行实际计算

# web-services - Web 服务调用失败，Glassfish 3.1.2.2 + Apache2 + proxy_ajp 上的块标头无效

> ID：14261475
> 
> 赞同：4
> 
> 时间：2013-01-10T15:34:46.153
> 
> 标签：web-services, apache2, glassfish-3, java-metro-framework, ajp

我已经在 Glassfish 3.1.2.2 服务器前面设置了 Apache 2.2.16，以在 TCP 443 上提供 HTTPS。我正在使用 Apache proxy_http 和 proxy_ajp 模块将请求中继到正在侦听 TCP 8009 端口（AJP 侦听器）的 Glassfish。当我尝试访问我的 Web 应用程序中的任何 Web 服务方法时，我在服务器日志中收到以下错误。如果我直接使用 8080 端口，一切正常，所以它似乎与 AJP 有关。如果我用浏览器连接到 SSL 端口，我可以正确获取 Web 服务的 WSDL，因此 AJP 至少在某种程度上可以工作。

```
[#|2013-01-10T13:57:30.155+0200|SEVERE|glassfish3.1.2|com.sun.xml.ws.transport.http.HttpAdapter|_ThreadID=22;_ThreadName=Thread-2;|Couldn't create SOAP message due to exception: org.jvnet.mimepull.MIMEParsin
gException: java.io.IOException: Invalid chunk header
com.sun.xml.ws.protocol.soap.MessageCreationException: Couldn't create SOAP message due to exception: org.jvnet.mimepull.MIMEParsingException: java.io.IOException: Invalid chunk header
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:366)
        at com.sun.xml.ws.transport.http.HttpAdapter.decodePacket(HttpAdapter.java:343)
        at com.sun.xml.ws.transport.http.HttpAdapter.access$400(HttpAdapter.java:99)
        at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:623)
        at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)
        at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:218)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)
        at org.apache.tapestry.jaxws.internal.metro.MetroHttpServletRequestFilter.service(MetroHttpServletRequestFilter.java:90)
        at $HttpServletRequestFilter_d72aa5c88d557.service(Unknown Source)
        at $HttpServletRequestHandler_d72aa5c88d55a.service(Unknown Source)
        at org.tynamo.security.services.impl.SecurityConfiguration$1.call(SecurityConfiguration.java:55)
        at org.tynamo.security.services.impl.SecurityConfiguration$1.call(SecurityConfiguration.java:53)
        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:380)
        at org.tynamo.security.services.impl.SecurityConfiguration.service(SecurityConfiguration.java:53)
        at $HttpServletRequestFilter_d72aa5c88d556.service(Unknown Source)
        at $HttpServletRequestHandler_d72aa5c88d55a.service(Unknown Source)
        at org.apache.tapestry5.internal.gzip.GZipFilter.service(GZipFilter.java:53)
        at $HttpServletRequestHandler_d72aa5c88d55a.service(Unknown Source)
        at org.apache.tapestry5.internal.services.IgnoredPathsFilter.service(IgnoredPathsFilter.java:62)
        at $HttpServletRequestFilter_d72aa5c88d554.service(Unknown Source)
        at $HttpServletRequestHandler_d72aa5c88d55a.service(Unknown Source)
        at org.apache.tapestry5.services.TapestryModule$1.service(TapestryModule.java:852)
        at $HttpServletRequestHandler_d72aa5c88d55a.service(Unknown Source)
        at $HttpServletRequestHandler_d72aa5c88d553.service(Unknown Source)
        at org.apache.tapestry5.TapestryFilter.doFilter(TapestryFilter.java:171)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ajp.AjpProcessorTask.invokeAdapter(AjpProcessorTask.java:135)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.jvnet.mimepull.MIMEParsingException: java.io.IOException: Invalid chunk header
        at org.jvnet.mimepull.MIMEParser.fillBuf(MIMEParser.java:434)
        at org.jvnet.mimepull.MIMEParser.skipPreamble(MIMEParser.java:300)
        at org.jvnet.mimepull.MIMEParser.access$300(MIMEParser.java:67)
        at org.jvnet.mimepull.MIMEParser$MIMEEventIterator.next(MIMEParser.java:143)
        at org.jvnet.mimepull.MIMEParser$MIMEEventIterator.next(MIMEParser.java:128)
        at org.jvnet.mimepull.MIMEMessage.makeProgress(MIMEMessage.java:198)
        at org.jvnet.mimepull.MIMEPart.getHeaders(MIMEPart.java:147)
        at org.jvnet.mimepull.MIMEPart.getContentType(MIMEPart.java:139)
        at com.sun.xml.ws.encoding.MimeMultipartParser$PartAttachment.getContentType(MimeMultipartParser.java:175)
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:406)
        at com.sun.xml.ws.encoding.MimeCodec.decode(MimeCodec.java:210)
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:353)
        ... 57 more
Caused by: java.io.IOException: Invalid chunk header
        at com.sun.grizzly.tcp.http11.filters.ChunkedInputFilter.doRead(ChunkedInputFilter.java:191)
        at com.sun.grizzly.tcp.http11.InternalInputBuffer.doRead(InternalInputBuffer.java:791)
        at com.sun.grizzly.tcp.Request.doRead(Request.java:501)
        at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:336)
        at com.sun.grizzly.util.buf.ByteChunk.substract(ByteChunk.java:436)
        at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:357)
        at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:265)
        at org.jvnet.mimepull.MIMEParser.fillBuf(MIMEParser.java:432)
        ... 68 more 
```

这是 apache vhost 配置：

```
<VirtualHost *:443>
    ServerName host.domain.com
    ProxyPass / ajp://host.domain.com:8009
    SSLEngine on
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP
    SSLCertificateFile      /etc/ssl/private/cert.crt
    SSLCertificateKeyFile   /etc/ssl/private/key.key
    SSLCertificateChainFile /etc/ssl/private/DigiCertCA.crt
</VirtualHost> 
```

# sas - 将数字与字符连接起来

> ID：14261481
> 
> 赞同：4
> 
> 时间：2013-01-10T15:34:56.307
> 
> 标签：sas

```
data test;
name = 'abcdefgh';
age = 30;
res = name || age;
run; 
```

当我运行上面的代码时，变量 res 持有 -> abcdefgh 30

为什么数字变量 age 用空格填充，然后与字符变量连接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T15:50:04.927

数字和字符连接时，先将数字转换为字符变量，然后将两个字符变量连接在一起。将数值变量转换为字符变量的默认格式是 BEST12。（尽管这可能会根据您的数字变量的格式而有所不同）。 `put(30,BEST12.)`将产生`'          30'`然后连接到字符变量。

为避免这种情况，请使用 strip 作为 Aaron 注释，或者使用 CATS ( `res=cats(name,age);`) 进行连接，它会自动去除所有变量，或者自己放置数字变量（使用 PUT，如果需要，可以使用 -l 强制左对齐选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:41:00.573

试试下面的代码来连接没有空格的变量。

```
data test;
name = 'abcdefgh';
age = 30;
res = name || strip(age);
run; 
```

SAS 可能很古怪。我对“为什么”的最佳猜测是 SAS 正试图使数字看起来对文本输出列表正确对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T07:06:18.143

您也可以使用它：

```
res=name || put(age,3.); 
```

不要对数值变量使用*Strip、Trim 等*函数。您将在日志窗口中看到 NOTE：

> 注意：数字值已在 (Line):(Column) 给出的位置转换为字符值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T15:55:23.753

您曾问“为什么”它正在这样做。如果您强制 SAS 不使用其他人在这里提到的好方法来定义它，那么当一个变量定义为字符串而另一个变量定义为数字时，您可能会遇到排序问题。例子：

```
VAR3 = VAR1 || VAR2;
VAR4 = VAR1 || PUT(VAR2,2.);

VAR1     VAR2    VAR3     VAR4
DOG      1       DOG 1    DOG1
DOG      2       DOG 2    DOG2
...      ...     ...      ...
DOG      11      DOG11    DOG11 
```

如果你排序`VAR3`你得到你可能想要的......如果你排序`VAR4`你得到`DOG1`, `DOG11`, `DOG2`...

只是我的观察。希望有帮助。

# asp.net - Asp.net 2.0 和 IIS 6 中的 URL 重写

> ID：14261482
> 
> 赞同：1
> 
> 时间：2013-01-10T15:34:56.383
> 
> 标签：asp.net, url-rewriting, iis-6

我已经阅读了很多关于这个主题的文章/论坛帖子，但我还没有找到适合我的解决方案（或者我可能没有正确理解它们）。我正在尝试在现有网站上实现 URL 重写，以制作更“SEO 友好”的 URL。

当前的 URL 结构为：[http ://www.website.com/campgrounds/CampgroundDetails.aspx?CampgroundId=xxxx](http://www.website.com/campgrounds/CampgroundDetails.aspx?CampgroundId=xxxx)

我从查询字符串中获取 CampgroundId 并从 SQL 中提取数据。

有没有办法仍然使用这些 URL，但让它们向用户显示如下：[http ://www.website.com/campgrounds/country/state/campgroundname.aspx](http://www.website.com/campgrounds/country/state/campgroundname.aspx)

Country/State/CampgroundName 将从我们的 SQL 数据库中提取

任何帮助将不胜感激！

# mysql - 使用 Propel 1.6 从 3 个表中检索信息和计数的单个 SQL 查询

> ID：14261485
> 
> 赞同：3
> 
> 时间：2013-01-10T15:34:58.943
> 
> 标签：mysql, sql, join, propel

我有以下（简化的）数据库结构：

桌子`book`

```
id
title 
```

桌子`page`

```
id
bookId
number 
```

桌子`figure`

```
id
pageId 
```

`page.bookId`和`figure.pageId`是分别指向主键`book.id`和的外键`page.id`。

一本书可以没有页面，页面可以没有数字。

对于指定的书 id，使用*单个*sql 查询，我想检索

1.  图书信息
2.  包含各自信息的页面列表
3.  每页的图形数量

结果的示例 JSON 表示如下：

```
{
    "id": 34, 
    "title": "The title"
    "pages": [
    {
        "id": "44",
        "number": 1
        "figureCount": 2
    },
    {
        "id": "45",
        "number": 2
        "figureCount": 5
    },
    ...
    ]
} 
```

Propel 1.6 有可能吗？生成的 SQL 查询应该是什么？

我使用 MySql 5.0。

编辑：这是我的（简化的）Propel schema.xml：

```
<table name="book" phpName="Book">
    <column name="id" type="bigint" required="true" primaryKey="true" autoIncrement="true" />
    <column name="title" type="varchar" size="512" required="true" />
</table>

<table name="page" phpName="Page" >
    <column name="id" type="bigint" required="true" primaryKey="true" autoIncrement="true" />
    <column name="book_id" type="bigint" required="true" />
    <column name="number" type="integer" required="true" />
    <foreign-key foreignTable="book" phpName="Book" refPhpName="Page" onUpdate = "cascade" onDelete = "cascade">
       <reference local="book_id" foreign="id" />
    </foreign-key>
</table>

<table name="figure" phpName="Figure">
    <column name="id" type="bigint" required="true" primaryKey="true" autoIncrement="true" />
    <column name="page_id" type="bigint" required="true" />
    <foreign-key foreignTable="page" phpName="Page" refPhpName="Figure" onUpdate = "cascade" onDelete = "cascade">
       <reference local="page_id" foreign="id"/>
    </foreign-key>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:37:36.853

根据@user1073631 的精彩回答，推进查询应该是这样的：

```
$books = BookQuery::create()
  ->select(array('Book.Id', 'Book.Title', 'Page.Id', 'Page.Number'))
  ->withColumn('count(Figure.ID)', 'FigureCount')
  ->leftJoin('Book.Page')
  ->leftJoin('Page.Figure')
  ->groupBy('Book.Id')
  ->groupBy('Book.Title')
  ->groupBy('Page.Id')
  ->groupBy('Page.Number')
  ->find(); 
```

我不确定`join()`是否最好查看生成的类来确定这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:15:56.577

我没有使用过那个 ORM，但无法想象它不支持你想要做的事情。这是您要查找的 SQL：

```
SELECT 
  B.Id,
  B.Title,
  P.Id as PageId,
  P.Number,
  COUNT(F.Id) as FigureCount
FROM 
  Book B
    LEFT JOIN Page P ON B.Id = P.BookId
    LEFT JOIN Figure F ON P.Id = F.PageId
GROUP BY 
  B.Id,
  B.Title,
  P.Id,
  P.Number 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/fc4f4/1)。

注意：我不认为您打算让两个页面对象具有相同的 id (44)——我将其中一个更改为 45。

# actionscript-3 - 在运行时本地化组件标签

> ID：14261493
> 
> 赞同：0
> 
> 时间：2013-01-10T15:35:21.223
> 
> 标签：actionscript-3, apache-flex, localization, tabnavigator

我在这样定义的导航器中有几个不同的选项卡：（删除了特定于客户端的域）

```
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx"
                    xmlns:container="com.*****.shop.admin.container.*"
                    width="100%" height="100%"
                    implements="com.*****.common.container.IScreen"
                    xmlns:services="com.****.shop.admin.services.*"
                    label="Service Types"> 
```

我有不同语言环境的资源包，en_US 看起来像这样：

```
ServicesScreen.label=Service Types 
```

当我尝试这样做时，它不起作用：

```
...    
... 
label="{resourceManager.getString('resources','ServicesScreen.label')}" 
```

我没有得到我的资源包条目，而是在我的 GUI 中看到一些奇怪的东西，例如：

```
Shop0.ShopSkin9._ShopSkin_Group1.contentScroller.ScrollerSkin13.contentGroup.vsMain.AdminView154.SkinnableContainerSkin159.contentGroup.subNavItems.opCodeScreen 
```

我的资源包在其他情况下也可以工作，例如表单输入字段旁边的标签等。但是，代码可以编译，实际上并没有抛出任何错误（编译或运行时）。我尝试将值分配给一个变量并在标签字段中使用该变量，但这会导致编译错误。

我尝试在组件的创建完成时调用 setter 方法，但这也没有解决问题。

**如何本地化我的标签标签，我可以在运行时动态地这样做吗？**

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:02:31.403

我想我会自己回答这个问题，尽管归功于 Sunil D。我不知道为什么在我测试时它没有早点工作，我第一次肯定错过了一些东西，但是这里有。首先我补充说：

```
creationComplete="init(event)"> 
```

然后在那个方法体中我做了：

```
 protected function init(event:FlexEvent):void
    {
        this.label = resourceManager.getString('resources','opCodeScreen.title');
    } 
```

它就像一个魅力。老实说，我很确定我今天早上做了同样的测试，但我猜不是。Sunil 如果您想让您的评论成为答案，我会继续接受它。

编辑：在运行时更改文本，添加`currentStateChange`调用上述方法

干杯!

# c++ - 可以这样声明for循环吗？

> ID：14261494
> 
> 赞同：3
> 
> 时间：2013-01-10T15:35:23.247
> 
> 标签：c++

`for(int i(5) ; i-->0 ; ) { //use i as iterator here }`

这是一样的吗

`for(int i=5; i>0 ; i--)`??

我试图在谷歌中找到类似的声明，但没有找到任何东西

还请建议更简洁的方法来声明相同的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T15:37:12.240

不，这些不一样。在第一种情况下，`i`将在第一次执行循环体之前递减。

有关工作演示，请参阅[http://ideone.com/AbHF3m 。](http://ideone.com/AbHF3m)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T15:37:54.147

这是不一样的。在第一种情况下， 的值`i`将`4`在第一次迭代和`0`最后一次迭代中。在第二种情况下，`i`将`5`在第一次迭代和`1`最后一次迭代中。

**编辑**

对于@Y.Ecarri：

第一种情况：

1.  设置`i`为`5`
2.  比较`i > 0`，即`5 > 0`
3.  减量`i`。`i`就是现在`4`
4.  `i`输入具有值的循环体`4`
5.  车身饰面

第二种情况：

1.  设置`i`为`5`
2.  比较`i > 0`，即`5 > 0`
3.  `i`输入具有值的循环体`5`
4.  车身饰面
5.  减量`i`。`i`就是现在`4`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T15:38:33.523

不，不一样。第一个版本比较减量前的值，*每次*迭代`i` *前*进行减量；第二个比较减量*后*的值，并在每次迭代*后*执行减量。

 ***所以第一个迭代结束`{4,3,2,1,0}`，而第二个迭代结束`{5,4,3,2,1}`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:02:14.333

它们与其他人指出的不同，因为顺序是：

1.  for 循环的第一部分（在第一个分号之前）仅在开始时计算一次。
2.  第二部分在代码块之前进行评估，根本不会评估第二部分返回零值（假、空指针或 0 数字）。在这个解析为 i-- > 0 的部分中，比较发生在减量之前，因为它是一个后减量运算符。因此，当我最初是 1 时，它会是真的，但接下来我会减少到 0 来表示接下来发生的事情
3.  循环体。
4.  如果没有异常终止（使用 break 或 return），则 for 循环的第 3 部分将在循环块的末尾执行。

如果`i`是一个有符号的 int，所以它可以达到 -1，你可以替换为

```
for( int i=4; i >= 0; --i ) { // body 
```

它的意图看起来更明显。如果你有一个无符号整数，例如 size_t，你仍然可以通过切换顺序让它看起来更明显

```
for( size_t i = 5; 0 < i--; ) { // body 
```

您也可以完全删除 0 和比较，然后执行

```
for( size_t i = 5; i--; ) { // body 
```

在以上两个中，我仍然对您`i=5`在第一次迭代中真正希望它以 4 开始时开始这一事实感到不舒服。所以我什至可能会切换到 do...while.. 当然我必须`i`在循环之外进行初始化。

```
size_t i = 5;
do { // body
    --i; // clearly 4 now on first iteration
} while( i != 0 ); 
```***

# css - 是否可以在 CSS3 中混合透明色和纯色？

> ID：14261496
> 
> 赞同：6
> 
> 时间：2013-01-10T15:35:26.837
> 
> 标签：css

是否可以在 CSS3 中从纯色和透明色动态制作透明背景？例如：

```
<div class="red trans1">
CONTENT
</div> 
```

与 CSS

```
.red {
background: #FF0000;
}
.trans1
background: rgba(255,255,255,0.5);
} 
```

在这种情况下，纯色将完全覆盖透明度。当然，我的意思是使用不同的属性（`background`,`background-color`等）。

我有 10 种纯色，并希望为每种颜色创建 10 级透明度。如果为每种颜色单独制作透明色，则需要100个CSS类；例如：

```
.red1 {
.background: rgba(255,0,0,0.1);
}
.red2 {
.background: rgba(255,0,0,0.2);
}
.red3 {
.background: rgba(255,0,0,0.3);
}
....
.blue1 {
.background: rgba(0,0,255,0.1);
}
.blue2 {
.background: rgba(0,0,255,0.2);
}
.blue3 {
.background: rgba(0,0,255,0.3);
} 
```

我正在寻找一种动态方式来混合纯色和透明背景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T15:59:08.470

## 纯 CSS

是的，您可以通过创造性地使用伪元素来分离颜色和透明度。例如，[这个小提琴演示了以下代码](http://jsfiddle.net/SngdD/2/)（注意我已经根据`:after`伪元素安排了所有内容）：

**HTML**

```
<div class="opBkg red op10">Red 10%</div>
<div class="opBkg red op50">Red 50%</div>
<div class="opBkg blue op80">Blue 80%</div> 
```

**相关CSS**

```
.opBkg {
  position: relative;
}

.opBkg:after {
  content: '';
  position: absolute;
  z-index: -1;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
}

.red:after {
  background-color: red;
}
.blue:after {
  background-color: blue;
}
.op10:after {
  opacity: .1;  
}
.op50:after {
  opacity: .5;  
}
.op80:after {
  opacity: .8;  
} 
```

您将有 10 个不透明度规则，无论您想要多少颜色，然后是`opBkg`用于设置的总体类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:44:47.650

您将需要明确创建 10 条规则，或者让[SASS](http://sass-lang.com/) / [Compass](http://compass-style.org/reference/compass/css3/opacity/)等预处理器为您完成。

唯一的其他选择是使用 JavaScript 根据指示透明度程度的某些属性动态设置不透明度。以下使用 jQuery 来完成此操作：

```
<div class="red" data-opacity=".75"></div>
<div class="red" data-opacity=".50"></div>
<div class="red" data-opacity=".25"></div> 
```

```
$(".red").css("background-color", function (index, old) {
    var data = { 
        color: old.match(/[0-9, ]+/), 
        alpha: $(this).data("opacity") 
    };
    return "rgba(" + data.color + ", " + data.alpha + ")";
}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/WYDJL/](http://jsfiddle.net/jonathansampson/WYDJL/)

# java - 如何将这些新消息传递给另一个类

> ID：14261506
> 
> 赞同：2
> 
> 时间：2013-01-10T15:36:03.313
> 
> 标签：java, multithreading, design-patterns, concurrency, threadpool

现在基本上我已经创建了三个类。

```
public void run() {  
int seqId = 0;  
while(true) {  
    List<KamMessage> list = null;  
    try {  
        list = fullPoll(seqId);  
    } catch (Exception e1) {  
        e1.printStackTrace();  
    }  
    if (!list.isEmpty()) {  
        seqId = list.get(0).getSequence();  
        incomingMessages.addAll(list);  
        System.out.println("waiting 3 seconds");  
        System.out.println("new incoming message");  
    }  
    try {  
        Thread.sleep(3000);  
        System.out.println("new incoming message");  
    } catch (InterruptedException e) {  
        e.printStackTrace();  
    }   
   }  
 }  
 public List<KamMessage> fullPoll(int lastSeq) throws Exception {  
 Statement st = dbConnection.createStatement();  
 ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION =  804 and SEQ >" +  
 lastSeq + "order by SEQ DESC");        
 List<KamMessage> pojoCol = new ArrayList<KamMessage>();  
  while (rs.next()) {  
    KamMessage filedClass = convertRecordsetToPojo(rs);  
    pojoCol.add(filedClass);  
  }  
for (KamMessage pojoClass : pojoCol) {  
    System.out.print(" " + pojoClass.getSequence());  
    System.out.print(" " + pojoClass.getTableName());  
    System.out.print(" " + pojoClass.getAction());  
    System.out.print(" " + pojoClass.getKeyInfo1());  
    System.out.print(" " + pojoClass.getKeyInfo2());  
    System.out.println(" " + pojoClass.getEntryTime());  
   }             
return pojoCol;  
  } 
```

以下是这些类： 1.Poller- 执行轮询并将新数据从 db 传递到控制器

2.Controller——这个类有一个线程Pool，它同时调用Poller并有新的数据要从处理器请求

3.Processor——这个类必须寻找新数据，处理它并将其返回给控制器。

所以现在我的问题是如何实施第三阶段......

这是我的控制器类：

```
public class RunnableController {  

/** Here This Queue initializes the DB and have the collection of incoming message
 *                    
 */  
  private static Collection<KpiMessage> incomingQueue = new ArrayList<KpiMessage>();  
  private Connection dbConncetion;  
  public ExecutorService threadExecutor;  
  private void initializeDb()  
  {  
    //catching exception must be adapted - generic type Exception prohibited  
    DBhandler conn = new DBhandler();  
    try {  
        dbConncetion = conn.initializeDB();  
    } catch (Exception e) {  
        // TODO Auto-generated catch block  
        e.printStackTrace();  
     }  
  }  

private void initialiseThreads()  
{         
    try {  

        threadExecutor = Executors.newFixedThreadPool(10);  
            PollingSynchronizer read = new PollingSynchronizer(incomingQueue, dbConncetion);  
        threadExecutor.submit(read);  

    }catch (Exception e){  
    e.printStackTrace();  
    }  

}  

@SuppressWarnings("unused")  
private void shutDownThreads()  
{         
    try {  
        threadExecutor.shutdown();  
        //DB handling should be moved to separate DB class  
        dbConncetion.close();  

    }catch (Exception e){  
    e.printStackTrace();  
    }  

}  

/** Here This Queue passes the messages and have the collection of outgoing message 
 *  
 */  

//private Collection<KpiMessage> outgingQueue = new ArrayList<KpiMessage>();  
//have to implement something here for future  

     public static void main(String[] args) throws InterruptedException {  
     RunnableController controller = new RunnableController();  

    System.out.println(incomingQueue.size());  

    controller.initializeDb();  
    controller.initialiseThreads();  

    Thread.sleep(3000);  
    System.out.println("Polling");  

  }  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:48:42.347

我建议使用 BlockingQueue，而不是简单的 ArrayList。只需更改`incomingQueue`变量的类型。然后你可以让另一个线程（或线程池）做类似的事情

```
//pseudocode
while (true) {
   // it polls data from the incomingQueue that shares with the producers
    KpiMessage message = this.incomingQueue.take()

   //Then process the message and produces an output... you can put that output in a different queue as well for other part of the code to pick it up
} 
```

BlockingQueues 的一个很好的例子可以在这里找到[http://www.javamex.com/tutorials/blockingqueue_example.shtml](http://www.javamex.com/tutorials/blockingqueue_example.shtml)

# php - 使用 SELECT COUNT (*) 作为 PHP 分页

> ID：14261508
> 
> 赞同：1
> 
> 时间：2013-01-10T15:36:12.207
> 
> 标签：php, sql, pagination

嗨 stackoverflow 读者和工作人员，我在使用分页代码时遇到问题。当我使用 SELECT COUNT(*) as num FROM $tbl_name 时，一切都很好，但是当我尝试 SELECT COUNT(*) as num FROM $tbl_name WHERE marca=nokia 时，只对包含“nokia”字的结果进行分页来自名为“modele”的表中的“marca”，我收到一个错误：“警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 17 行的 E:\server\htdocs\pag.php 中给出”

这是代码框架：

```
$marca = $_GET['marca'];
/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name WHERE marca=$marca";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages1 = $total_pages['num'];

/* Setup vars for query. */
$targetpage = "paginare.php";   //your file name  (the name of this file)
$limit = 5;                                 //how many items to show per page
$page = $_GET['pagina'];
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT * FROM $tbl_name LIMIT $start, $limit";
$result = mysql_query($sql);
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\">« Inapoi</a>";
    else
        $pagination.= "<span class=\"disabled\">« Inapoi</span>";   

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?pagina=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=$lastpage\">$lastpage</a>";     
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?pagina=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?pagina=$counter\">$counter</a>";                   
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?pagina=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=$lastpage\">$lastpage</a>";     
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?pagina=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">Inainte »</a>";
    else
        $pagination.= "<span class=\"disabled\">Inainte »</span>";
    $pagination.= "</div>\n";       
} 
```

我的 php 到此结束，抱歉英语不好，提前谢谢你。马塞尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:40:16.687

SQL 中的任何字符串都需要用 " 或 ' 包围。像这样：

```
$query = "SELECT COUNT(*) as num FROM $tbl_name WHERE marca='{$marca}'"; 
```

使用结果查询：

```
SELECT COUNT(*) as num FROM $tbl_name WHERE marca='nokia' 
```

# python - 有时在新的 oAuth 握手后从 intuit Anywhere api 获取“API 需要授权”

> ID：14261512
> 
> 赞同：2
> 
> 时间：2013-01-10T15:36:24.493
> 
> 标签：python, intuit-partner-platform

使用 Intuit Anywhere (AI) 完成 oAuth 握手后，我使用 API 获取蓝点菜单的 HTML。有时，会返回预期的 HTML。其他时候，我收到此消息

> 此 API 需要授权。22 2013-01-10T15:32:33.43741Z

通常，当 oAuth 令牌过期时会返回此消息。但是，在我得到它的情况下，我可以在我的网站中单击一下或进行刷新，然后返回预期的 HTML。我检查了正在发送的标头，在这两种情况下（即，返回预期的 HTML 并返回错误时），请求完全相同。如果这是 Intuit API 中的一个错误，我不会感到惊讶，但我试图首先排除任何其他可能性。如果您对如何解决此问题有任何想法，请告诉我。谢谢。

**更新：**似乎只有在我刷新时才会出现问题。在 OSX 上的 Firefox 和 Safari 中似乎都是这种情况。这听起来像是一个 Javascript 缓存问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T21:52:49.897

我也收到了此错误，并将其发布为其他偶然发现此错误的指针。对我来说，错误代码 22（需要身份验证）意味着 OAuth 签名错误。这很令人困惑，因为我在 Quickbooks 文档中找不到此错误以进行重新连接。

我将请求签名为“POST”请求，而不是“GET”请求，这是 Quickbooks 调用重新连接端点所需要的。

# debugging - 如何配置 IntelliJ 11 + 远程 tomcat 6 + maven 导入模块？

> ID：14261515
> 
> 赞同：3
> 
> 时间：2013-01-10T15:36:34.393
> 
> 标签：debugging, maven, tomcat, intellij-idea

这是我现在拥有的：

*   将多个 Maven 模块导入 IntelliJ 项目
*   Maven 目标从 Maven 项目弹出窗口运行正常 - 创建了一个 war 文件。
*   从“Build|Make Project”制作项目也可以。但是这里没有创建战争，只有 .class 文件。
*   Tomcat 6 在另一台机器上运行
*   手动将包 maven 目标生成的战争部署到远程 tomcat 工作正常。
*   本地 tomcat 6 实例配置为应用程序服务器。我不打算使用这个实例，但 JetBrains 文档说我必须有一个本地实例才能使用 IDE 配置应用程序服务器。
*   没有为 IntelliJ 项目配置任何工件和构面。
*   远程tomcat运行`JAVA_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,address=1317,suspend=n,server=y`

我希望能够在 IntelliJ 中调试我的服务器。这意味着，我必须有一个运行配置，它执行以下操作：

1.  生成相应的战争文件。制作项目不会产生任何战争，因此应该修改它以产生战争，或者应该将战争作为运行配置的一部分创建。我不知道哪一个是正确的方法。
2.  将其部署或重新部署到远程 tomcat 实例。
3.  让我远程调试代码。

我该怎么做？

**编辑**

更正。其中一个项目自动添加了 Web facet，因为 IntelliJ 已注意到该`...\src\main\webapp\WEB-INF\web.xml`文件。

**编辑2**

这是我的远程 tomcat 运行配置对话框：

![在此处输入图像描述](../Images/96c3e81093fd0c119ad31858e4e264a6.png)

文档说我应该在对话框中有**执行“更新”操作**选项。它在哪里？

**编辑3**

我已经向 IntelliJ 添加了 Spring 支持和 Spring Web 服务插件，因为我们正在使用它们。现在 IntelliJ 识别了它并添加了 Spring 方面：

![在此处输入图像描述](../Images/55f3cd33c131931b5b692d2c59eb05e8.png)

但是，远程 Tomcat 运行配置对话框中仍然没有**执行“更新”操作**选项。

我错过了什么？

**编辑4**

解决了缺少**执行“更新”操作**选项的谜团 -[如何在 IntelliJ 的远程 Tomcat 运行配置中启用“更新”操作选项？](https://stackoverflow.com/questions/14313026/how-to-enable-the-perform-on-update-action-option-in-the-remote-tomcat-run-con)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:20:57.717

## 1) 产生战争

要让 IntelliJ IDEA 生成 war 文件，您需要为模块定义一个“web”方面。

1.  转到*文件 > 项目结构 > 模块*
2.  选择您的模块
3.  添加（通过“+”图标或 Alt+Insert）Web 构面。
4.  配置方面。（如果您遵循标准，默认值应该没问题，但请检查它们。）

一旦定义了 Web 构面，就可以定义 WAR 工件。

1.  转到“项目结构”对话框中的“工件”页面。
2.  您首先需要创建一个爆炸的战争神器。
    1.  点击添加按钮
    2.  选择“Web 应用程序：已展开”，然后选择“来自模块”
    3.  在弹出窗口中，选择您的模块。验证 Web 应用程序工件是否已正确定义。同样，如果您遵循标准，默认值应该是好的。
3.  一旦定义了分解的工件，再次单击添加工件按钮并选择“Web 应用程序：Archie”，然后选择“For {module-name}:war exploded”（或者如果您没有使用默认名称）。
4.  验证配置。

IDEA 现在将在您构建时创建一个战争文件。

## 2) 部署到远程服务器

您可以将此作为运行/调试配置的一部分。请参阅下一节。

## 3) 远程调试

您只需创建一个运行/调试配置即可执行此操作。

1.  从菜单中转到*运行 > 编辑配置*
2.  单击添加图标（或键入 Alt + Insert）并从弹出列表中选择 Tomcat 服务器 > 远程
3.  配置运行/调试设置。我建议单击“帮助”按钮。它将向您展示各种选项。（请务必注意哪些可用于本地、远程或两者。）查看帮助页面上的“远程暂存”信息。此外，请务必选择部署选项卡并选择要部署的工件（并指定上下文路径。）启动/连接选项卡的“调试”部分将需要在远程 Tomcat 上配置的调试连接信息服务器。
4.  默认情况下，“Make”应该列在“Before Launch”部分。并且一旦您添加了要部署的工件，启动前还应该显示该工件将被构建。如果没有，请添加它。

定义后，您可以执行此运行/调试配置。要进行调试，请使用“调试”按钮或快捷方式 (Shift+F9) 启动。这将创建您的项目，创建战争，部署它，然后连接调试器。如果您只想运行而不进行调试，请单击运行按钮，或使用快捷键 Shift+F10。

# amazon-ec2 - 无法从 SQL Developer 连接到 EC2 Linux 框中的 Oracle db。TNS 侦听器错误

> ID：14261518
> 
> 赞同：0
> 
> 时间：2013-01-10T15:36:41.897
> 
> 标签：amazon-ec2, oracle11g, tnsnames

我创建了一个 EC2 linux 机器：Oracle Database 11.2.0.1 64-bit Standard Edition One (ami-31739c58)。实例运行良好。我可以通过键入以下内容使用 ssh（Mac OS Lion 中的终端）从我的个人计算机连接到 box：

```
ssh -i predikto1.pem root@ec2-54-235-243-231.compute-1.amazonaws.com 
```

我创建了一个新的 EC2 安全组，通过 TNS 打开端口 1521。我更新了我的`tnsnames.ora`文件以包含正确的公共 DNS。我能够使用笔记本电脑（Macbook Air）上的 SQL Developer 连接到 Oracle DB。

我停止了 EC2 实例，等了几天，然后开始备份实例。公共 DNS 名称已更改。所以我`tnsnames.ora`在我的电脑上归档并更新了主机字段以反映我最新的（新的）公共 DNS：

```
oradb=
(DESCRIPTION= 
(ADDRESS=(PROTOCOL=tcp)(HOST=ec2-54-235-243-231.compute-1.amazonaws.com)(PORT=1521))
(CONNECT_DATA=
(SID = oradb)
)
) 
```

我尝试使用 SQL 开发人员从我的笔记本电脑连接到 EC2 上的 Oracle DB 并获得一个

> 错误：TNS 侦听器当前不知道连接描述符中给出的 SID。

我尝试通过 EC2 实例屏幕创建弹性 IP，并将其分配给实例。用主机 ec2-54-235-243-231.compute-1.amazonaws.com 替换 TNSNAMES.ORA 文件中的 IP 地址（IP 为 54.235.243.231）也没有运气。我重新开始了，什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:08:23.470

您的“EC2 安全组”是否在“数据库安全组”中处于“已授权”状态？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T02:41:25.633

尝试使用 AWS RDS 而不是 AMI。它非常容易设置。我花了几天时间调整适用于 Oracle 的 AWS AMI（从版本 11 开始，出现问题，然后切换到 12，再次调整......）。使用 AWS RDS，您可以设置所需的任何版本（11、12、回滚到 11 等）。所有这些设置都比您自己配置更容易。

使用 RDS - 您可以设置 oracle 用户名、密码、轻松查看何时运行、停止它、IP 地址、管理访问等（所有这些都来自 UI 控制台，而无需通过 SSH 连接到任何服务器）..

# javascript - 如果为空，则使用备用 DataSource 列

> ID：14261519
> 
> 赞同：0
> 
> 时间：2013-01-10T15:36:48.410
> 
> 标签：javascript, datatable, yui

我正在使用 YUI2 数据库。我有这样指定的列：

变量列 = [

```
{ key: "check"
            , label: '<input type="checkbox" name="checkAll" id="checkAll"/>'
            , formatter: "checkbox"
            }
, { key:"subject"
            , sortable:false
            , resizeable:false
            , formatter: YAHOO.widget.DataTable.formatSubject
            , width: "16px"
            } .....more 
```

数据源：

```
var mySource = new DataSource('.do?');
    mySource.responseType   = DataSource.TYPE_JSON;
    mySource.responseSchema = {
        resultsList : 'records',
        fields      : [
            'pos'
            ,'subject'
            ,'subject2' .... 
```

在我的数据源中，我为每一行以及另一列返回“主题”，我们称之为“主题2”。当指定行的“主题”列为空时，我希望“主题”列使用数据源中的“主题 2”。如果没有过度的黑客攻击，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:09:57.720

我认为最简单的方法是使用格式化程序：

```
YAHOO.widget.DataTable.formatFrom = function ( elCell, oRecord, oColumn, oData ) {
    var val = oData;
    if(val === "") {
        val = oRecord.getData().subject2;
    }.... 
```

# jquery-mobile - 加载新页面时，Jquery Mobile 不会更改 URL

> ID：14261521
> 
> 赞同：0
> 
> 时间：2013-01-10T15:36:53.777
> 
> 标签：jquery-mobile, asp-classic

提交时，我的表单变量被写入数据库，页面更改为下一页，但地址栏没有更改。即它仍然显示mobile2.asp，即使视图是mobile3.asp。我错过了什么？

```
<head> 
    <title>mysite</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="include/js/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/themes/mycss.css" />
    <script src="include/js/jquery.js"></script>
    <script src="include/js/jquery.mobile-1.2.0.js"></script>

<%
dim EN
EN           = xss_Clean(Request.Form("EN"))
If Request.ServerVariables("REQUEST_METHOD")= "POST" Then
    write_element "EN", EN
    response.redirect "mobile3.asp"
End if
%>
</head> 

<div data-role="content">
        <form action="mobile2.asp" method="post">
        <div id="entries" class="list" data-theme="a">
            <label for="EN" class="select"><h1 class="header">Number required</h1></label>    
    <select name="EN"> 
       <option value="1">1</option>
       <option value="10">10</option> 
       <option value="15">15</option> 
       <option value="20">20</option></select>
        </div>
<button type="submit" data-theme="b" name="submit" value="submit-value" class="ui-btn-hidden" aria-disabled="false" data-ajax="false">Proceed</button>
     </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:11:59.373

也许重定向的*结束语？*

```
response.redirect "mobile3.asp" 
```

# ms-access - MS Access 交叉表查询 - 按月报告的列总和

> ID：14261525
> 
> 赞同：1
> 
> 时间：2013-01-10T15:37:09.010
> 
> 标签：ms-access, crosstab

我正在整理一个交叉表，我想要一个按月分组的多列值（所有数字）的报告。这是我使用的 SQL。我知道这不会带来预期的结果。每个“timex”列都有不同的数字。我想要一个返回按月分组的列的总和的查询。

`TRANSFORM Sum(tblTimeTracking.time1+ tblTimeTracking.time2+ tblTimeTracking.time3+ tblTimeTracking.time4+ tblTimeTracking.time5+ tblTimeTracking.time6+ tblTimeTracking.time7+ tblTimeTracking.time8+ tblTimeTracking.time9+ tblTimeTracking.time10+ tblTimeTracking.time11+ tblTimeTracking.time12+ tblTimeTracking.time13+ tblTimeTracking.time14+ tblTimeTracking.time15+ tblTimeTracking.time16+ tblTimeTracking.time17+ tblTimeTracking.time18+ tblTimeTracking.time19+ tblTimeTracking.time20+ tblTimeTracking.time21+ tblTimeTracking.time22 ) AS Total SELECT tbl_vlookup.Manager AS Manager FROM tbl_vlookup INNER JOIN tblTimeTracking ON tbl_vlookup.[Associate Name] = tblTimeTracking.Associate GROUP BY tbl_vlookup.Manager PIVOT Format([Day],"yyyy-mm");`

```
Associate    Day          Time 1    Time 2  Time 3  Time 4  Time 5  Time 6  Time 7   
John Smith  12/1/9999       1         0       0      5.5      1      0.25   0.25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:34:54.403

像这样的东西：

```
TRANSFORM Sum(q.Time1) AS SumOfTime1
SELECT q.Associate, q.Day
FROM (SELECT t.Associate, t.Day, t.Time1,"Time1" As TimeType
FROM tbl t
UNION ALL
SELECT t.Associate, t.Day, t.Time2,"Time2" As TimeType
FROM tbl t
UNION ALL
SELECT t.Associate, t.Day, t.Time3,"Time3" As TimeType
FROM tbl t)  AS q
GROUP BY q.Associate, q.Day
PIVOT q.TimeType; 
```

正如我所提到的，你需要把桌子弄平。它似乎只是不同类型的数据:)

# magento - Magento：删除对 Telefone 字段的要求

> ID：14261526
> 
> 赞同：0
> 
> 时间：2013-01-10T15:37:09.063
> 
> 标签：magento

谁可以帮助取消对 Telefone 字段的要求？

我尝试了解决方案：

[http://www.magentocommerce.com/boards/viewthread/10948/P0/](http://www.magentocommerce.com/boards/viewthread/10948/P0/)

[http://www.magentocommerce.com/boards/viewthread/199287/](http://www.magentocommerce.com/boards/viewthread/199287/)

但没有运气...

PS 我使用 Magento 版本。1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:18:13.240

尝试

在您的数据库表名称中：eav_attribute

寻找`attribute_code`=电话

设置`is_required`= 0

您也可以通过创建扩展的自定义模块来完成此操作`Mage_Customer_Model_Form`

```
<customer>
     <rewrite>
          <form>MageIgniter_RemoveRequiredField_Model_Customer_Form</form>
      </rewrite>
</customer>

class MageIgniter_RemoveRequiredField_Model_Customer_Form extends Mage_Customer_Model_Form {

    protected function _getFormAttributeCollection() {

        $collection = parent::_getFormAttributeCollection()
                        ->addFieldToFilter('attribute_code', array('neq' => 'created_at'));
        // look for the 'telephone' field here and change 'is_required' 
```

# java - if(...) - 两个相等的边被认为不相等

> ID：14261530
> 
> 赞同：-4
> 
> 时间：2013-01-10T15:37:12.677
> 
> 标签：java, android

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我是 android 新手，这是我在 StackOverflow 上的第一篇文章。简而言之，我面临一个非常奇怪的问题：在某些方法中，我使用了 if(...)，并且两个值都相等，但它没有通过如果 。这是一个例子：

```
String []s=db.getStudentsNames();
        String []t=CopyNames(s);
        String t1,t2;

        t2=Id.getText().toString();
        for(int i=0;i<s.length;i++)
        {
            t1=t[i].substring(t[i].indexOf("-")+1).toString();
            Notifications(t[i].substring(t[i].indexOf("-")+1).toString());
            if(t1.toString()==t2.toString())//Problem!
            {
                Notifications("Id already exists for "+t[i].substring(0,t[i].indexOf("-")).toString());
                return false;
            }
        } 
```

变量 t1 & t2 是 : `t1="123456789"`& `t2="123456789"`，但它不会像它们不相等一样进入 if。还有其他地方是两个相等的边被认为是不相等的 - 在同一个java页面（活动）中，例如 `if(add.getText().toString()=="Add Student")`：：添加指的是一个按钮，默认情况下，一个文本：“添加学生”所以我该如何解决这个问题问题 ？

**当这个问题开始时，我开始在 LogCat 中看到：

```
 W/KeyCharacterMap(282): No keyboard for id 0

 W/KeyCharacterMap(282): Using default keymap: /system/usr/keychars/qwerty.kcm.bin

 D/dalvikvm(282): GC_FOR_MALLOC freed 5438 objects / 256800 bytes in 73ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:39:04.863

您不应该使用`==`比较 Java 中的字符串。改为使用`t1.toString().equals(t2.toString())`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:39:05.240

永远不要`==`在 String 对象上使用。改为使用`t1.equals(t2)`。

# haskell - 为 ffi 运行 hs_init(0, 0) 时出现分段错误

> ID：14261531
> 
> 赞同：2
> 
> 时间：2013-01-10T15:37:22.690
> 
> 标签：haskell, ffi

我正在尝试从 python 调用 Haskell 函数。我有以下制作文件：

```
GHC=ghc
GHC_RUNTIME_LINKER_FLAG=-lHSrts-ghc7.4.1

libffi-example.so: Example.o wrapper.o
    $(GHC) -o $@ -shared -dynamic -fPIC $^ $(GHC_RUNTIME_LINKER_FLAG)

Example_stub.h Example.o: Example.hs
    $(GHC) -c -dynamic -fPIC Example.hs

wrapper.o: wrapper.c Example_stub.h
    $(GHC) -c -dynamic -fPIC wrapper.c

clean:
    rm -f *.hi *.o *_stub.[ch]

clean-all:
    rm -f *.hi *.o *_stub.[ch] *.so

# Runs the example Python program
example: libffi-example.so
    python program.py 
```

wrapper.c 唯一`hs_init`通过调用创建包装器`hs_init(0,0);`。包装器被称为`example_init`

`make example`运行时`example_init`（即调用时）出现分段错误`hs_init(0,0)`。

有人能告诉我为什么会这样和/或如何解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:57:27.770

它应该工作：

> “此外，`hs_init()`对于 argc 和 argv，可以使用 NULL 调用，表示缺少命令行参数。”

这似乎是 ghc-7.2.1 到 ghc-7.4.1 中的一个错误：

**RFib.hs：**

```
{-# LANGUAGE ForeignFunctionInterface #-}
module RFib where

fib :: Int -> Int
fib n
    | n >= 0    = go 0 1 n
    | even n    = -go 0 1 (-n)
    | otherwise = go 0 1 (-n)
      where
        go a _ 0 = a
        go a b k = go b (a+b) (k-1)

foreign export ccall "rfib" fib :: Int -> Int 
```

**rfib.c：**

```
#include <stdio.h>
#include <HsFFI.h>

int rfib(int);

int main(void) {
    hs_init(0,0);
    printf("%d\n", rfib(35));
    hs_exit();
    return 0;
} 
```

编译并运行：

```
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.0.2 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
9227465
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.0.4 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
9227465
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.2.1 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
Speicherzugriffsfehler
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.2.2 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
Speicherzugriffsfehler
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.4.1 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
Speicherzugriffsfehler
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc-7.4.2 -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
9227465
$ rm rfib.o RFib.hi RFib.o a.out
$ ghc -O2 -Wall -no-hs-main RFib.hs rfib.c && ./a.out
[1 of 1] Compiling RFib             ( RFib.hs, RFib.o )
Linking a.out ...
9227465 
```

更改两行`rfib.c`：

```
int main(int argc, char *argv[]) {
    hs_init(&argc,&argv); 
```

它适用于所有版本（我已安装的> = 7.0）。

所以要修复它

*   通过`&argc`和`&argv`
*   upgrade GHC

are the two most obvious ways.

# c - 在 C 预处理器中临时覆盖宏

> ID：14261534
> 
> 赞同：24
> 
> 时间：2013-01-10T15:37:40.683
> 
> 标签：c, c-preprocessor

我需要暂时覆盖一个宏然后恢复它。像：

```
#define FOO X
#save FOO
#define FOO Y
...
#restore FOO 
```

在标准 C 预处理器中是否有可能？在海湾合作委员会？

**添加**。关于现实世界的例子。我使用全局宏来处理错误异常。它的作用类似于`assert`，但用于持久使用，不仅用于调试版本；因此，例如，我通常在宏内部调用函数（有副作用）。它被定义一次，但定义不是持久的；因此我不知道它是先验的。对于某些代码，我需要它自己的修改版本的宏，但我想*保存一般的代码样式*。当一部分代码使用一个宏，另一部分使用另一个宏时，这看起来很难看——两个宏的*目的相同*，但实现方式略有不同。

所以，我最好暂时保存原始宏，对部分代码使用不同的版本，然后恢复原始宏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-02-28T00:10:58.390

这可以通过`#pragma push_macro`和实现`#pragma pop_macro`。这些不是标准的 C——它们最初是一个 MSVC 扩展——但[clang 支持它们](https://clang.llvm.org/doxygen/classclang_1_1Preprocessor.html#a04dec9fbfa220dfea433bcbeffa270c3)，[GCC 也是如此](https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Push_002fPop-Macro-Pragmas.html)。

示例用法：

```
int main() {
#define SOME_MACRO 1
  printf("SOME_MACRO = %d\n", SOME_MACRO);
#pragma push_macro("SOME_MACRO")
#define SOME_MACRO 2
  printf("SOME_MACRO = %d\n", SOME_MACRO);
#pragma pop_macro("SOME_MACRO")
  printf("SOME_MACRO = %d\n", SOME_MACRO);
  return 0;
} 
```

印刷：

```
SOME_MACRO = 1
SOME_MACRO = 2
SOME_MACRO = 1 
```

您也可以在/对中`#undef`使用宏，调用将重新定义它。`push_macro``pop_macro``pop_macro`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T19:08:19.477

如前所述，这实际上是不可能的。根据情况，这可能是一种解决方法：

```
#include "generalmacrodefs.h" // put them in here or include them indirectly
#undef macro1
#define macro1 "specialized temporary value"
#undef macro1
#include "generalmacrodefs.h" // restores 
```

这要求`generalmacrodefs.h`至少对您可能临时覆盖的定义使用这样的模式：

```
#ifndef macro1
#define macro1 "original value"
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:44:09.427

最接近 C 语言的是`#undef`指令，它简单地取消定义宏，允许它被替换：

```
#define FOO X

...

#undef FOO
#define FOO Y

...

#undef FOO
#define FOO X 
```

问题是，一旦重新定义它，您就无法知道它的“旧”值`FOO`- 因此您的值必须在一个地方硬编码。

您也不能创建一个宏来为您保存值，因为不可能有一个宏来在标准 C 中创建其他预处理器指令。

# javascript - 带有外部 Javascript 文件的 SVG 和 HTML

> ID：14261537
> 
> 赞同：1
> 
> 时间：2013-01-10T15:37:50.623
> 
> 标签：javascript, html, svg

我有一个名为 index.html 的 HTML 文件，其中包含一个 svg（使用 object-tag）和一个 js-file（使用 script-tag）。在 HTML 文件中调用时，js 函数都可以正常工作。现在，当我想访问 svg 文件中的一个 js 函数时，我必须链接到 svg 文件中的 js 文件（使用 xlink）。这些函数仍然可以在 svg 文件中工作，但是一旦这些函数引用 HTML 文件中的任何元素（例如 document.getElementById('div1')），它们就不再工作了（我的猜测：可能是因为函数没有在 HTML 中寻找元素，但在 SVG 文件中。）我可以做些什么来让这些功能再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:44:19.300

当您在 SVG 中嵌入 JS 函数时，它们总是在 SVG 的私有范围内执行，因此无法访问它之外的任何内容。

当你想创建一个带有动态 SVG 的交互式 Web 应用程序时，你应该将修改 SVG 的 JS 函数放在 HTML 的 javascript 代码中。您可以通过获取元素的`.contentDocument`，从嵌入 HTML 的 javascript 访问 SVG 文档树。`<object>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:32:24.117

您可以使用顶部或父对象从 svg 获取容器 html。这里有一个完整的[svg 到容器 html 和容器 html 到 svg 示例，这里有大量注释](https://jwatt.org/svg/demos/scripting-across-object.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:56:58.877

在现代浏览器中，您可以简单地将 svg 直接放在 HTML 中，JS（和 CSS）将在两者上无缝运行。

```
<div>
  <svg:svg xmlns:svg="www.w3.org/2000/svg" version="1.1" height="100" width="100" viewBox="0 0 100 100">
    <svg:circle id="circle" cx="50" x="50" y="50"/>
  </svg:svg>
</div>

<script>
    document.getElementById("circle").style.fill="red";
</script> 
```

# solr - 将多个表中的数据索引到 solr

> ID：14261539
> 
> 赞同：0
> 
> 时间：2013-01-10T15:37:57.050
> 
> 标签：solr

我正在尝试将 mySQL 数据库中的两个表索引到 solr 中。以下是步骤：

步骤：1 更改数据配置

第 2 步：schema.xml 应该有 solr_details 字段

第 3 步：运行完整导入命令请参阅网站：[http ://wiki.apache.org/solr/DIHQuickStart](http://wiki.apache.org/solr/DIHQuickStart)

有人可以向我解释第 2 步吗？他这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:55:29.480

`solr_details`是定义在 中的字段，与 wiki 页面中提到的`schema.xml`任何其他字段等一样。`'solr_id'``'solr_name'`

他的意思是，您只需要确保`solr_details`在`schema.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T07:14:10.477

您需要在使用数据导入处理程序之前定义 solr 架构。按照 [链接] ( [http://www.solrtutorial.com/schema-xml.html](http://www.solrtutorial.com/schema-xml.html) ) 或[https://cwiki.apache.org/confluence/display/solr/Defining+Fields](https://cwiki.apache.org/confluence/display/solr/Defining+Fields)

# facebook - Facebook 活动提要高度，在 Safari 中

> ID：14261542
> 
> 赞同：0
> 
> 时间：2013-01-10T15:38:13.977
> 
> 标签：facebook, facebook-like

我试图从 Facebook 页面获取 Facebook likebox+feed 以在我的网页上正确显示。

我在 Safari 中遇到了高度问题，显然在某些 Chrome 版本中。

我不能发布图片，因为我的声誉只有 6。所以我不得不试着解释一下：

在我的 Firefox 和 Chrome 浏览器中，一切正常。

但是在我的 Safari 浏览器和我的同事 Chrome 浏览器中，Facebook 的likebox 显示的高度不正确。它设置为并且应该是 1200px 高。但只显示aprox 395px。它所在的 div 容器未设置为特定高度。

这就是我的实现方式：

```
<div class="fb-like-box" data-href="http://www.facebook.com/Citysingler" data-width="400" data-height="1200" data-show-faces="false" data-stream="true" data-header="false"></div> 
```

在线问题：（它是右栏中的提要）： [http ://www.citysingler.dk/Gaestebog/98](http://www.citysingler.dk/Gaestebog/98)

知道如何使它看起来正确，跨浏览器吗？

谢谢约翰

# android - 使用 Cocos 2D-x 和 Visual Studio 2012 跨平台

> ID：14261547
> 
> 赞同：0
> 
> 时间：2013-01-10T15:38:37.767
> 
> 标签：android, ios, windows-8, visual-studio-2012, cocos2d-x

我是 cocos 2D-x 的新手。我想在跨平台（通常是 android、ios 和 windows 8）上使用 cocos 2d-x 开发应用程序。我已经看到有一个适用于 windows 8 的 cocos 2d-x 构建。

我的问题是：

1.  cocos 2d-x 可以用来开发这样的跨平台app吗？
2.  我们可以在 windows 上使用 Visual Studio 2012 设置 cocos 2d-x 来制作这样的应用程序吗？
3.  如果是，欢迎任何步骤。

谢谢！

问候，

高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:47:37.763

如果您使用 html 平台[Cocos2d-html5](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Download)进行开发，您可以为多个平台构建（[这里是一个基础教程](http://www.raywenderlich.com/32970/how-to-make-a-cross-platform-game-with-cocos2d-javascript-tutorial-getting-started)）。

至于你的第二个问题，你只需创建一个新项目（网站）然后编写你的 javascript。

目前我在让 VS 注意到 cocos2d 类时遇到问题。它在 Eclipse 中工作，所以我知道出了什么问题。如果你走这条路，请注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:01:30.447

如果您下载[cocos2d-x-for-win8](http://cocos2d-x.googlecode.com/files/cocos2d-x-for-win8-0.11.0.zip) zip 文件并将其解压缩，您应该会找到一个 guide.chm 帮助文件，该文件提供逐步说明，指导您完成安装和使用它。

# ios - iPhone上的错误URL，当我在浏览器中输入它时它可以工作

> ID：14261548
> 
> 赞同：2
> 
> 时间：2013-01-10T15:38:39.747
> 
> 标签：ios, json, url, didfailwitherror

我正在制作一个jsonstring。当我执行它时，当我在浏览器中执行它时它就可以工作。我通过记录确切的 url 并将其复制到浏览器中来做到这一点。比我得到我想要的 HTTP Get，但在 iPhone 中我只得到一个错误的登录。

```
- (IBAction)getDown:(id)sender { //perform get request
    NSLog(@"beginnen met versturen");

    //NSString * _barCode = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

    //build up the request that is to be sent to the server
    //NSString*jsonString = [[NSString alloc] initWithFormat:@"{\"barcode\":\"%@\"}", _barCode];

    NSString*jsonString = [[NSString alloc] initWithFormat:@"{\"barcode\":\"123456\"}"];

    NSString *str = [NSString stringWithFormat: @"http://server.nl/scan.php?data=%@",jsonString];
    NSLog(@"%@", str);
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL    URLWithString:str]];
    NSLog(@"url: %@", request);

    [request setHTTPMethod:@"GET"];
   // [request addValue:@"getValues" forHTTPHeaderField:@"METHOD"]; //selects what task the server will perform
    NSLog(@"met value: %@", request);

    //initialize an NSURLConnection  with the request
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if(!connection){
        NSLog(@"Connection Failed");
    }

}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{ // executed when the connection receives data

    receivedData = data;
    /* NOTE: if you are working with large data , it may be better to set recievedData as NSMutableData
     and use  [receivedData append:Data] here, in this event you should also set recievedData to nil
     when you are done working with it or any new data received could end up just appending to the
     last message received*/
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{ //executed when the connection fails

    NSLog(@"Connection failed with error: %@",error.localizedDescription);
}
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{

    /*This message is sent when there is an authentication challenge ,our server does not have this requirement so we do not need to handle that here*/
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

    NSLog(@"Request Complete,recieved %d bytes of data",receivedData.length);

    //[self.delegate requestReturnedData:receivedData];//send the data to the delegate
    NSData *data = receivedData;
    NSDictionary *dictionary = [NSDictionary dictionaryWithJSONData:data];
    NSLog(@"%@",dictionary.JSONString ); ; // set the textview to the raw string value of the data recieved

    NSString *value1 = [dictionary objectForKey:@"barcode"];
    NSLog(@"%@", value1);
    NSString *value2 = [dictionary objectForKey:@"product"];
    NSLog(@"%@",dictionary);
    NSLog(@"%@", value2);

} 
```

这是日志：

```
2013-01-10 16:31:46.550 Scanner[14875:907] http://server.nl/scan.php?data={"barcode":"123456"}
2013-01-10 16:31:46.551 Scanner[14875:907] url: <NSMutableURLRequest (null)>
2013-01-10 16:31:46.553 Scanner[14875:907] met value: <NSMutableURLRequest (null)>
**2013-01-10 16:31:46.556 Scanner[14875:907] Connection failed with error: bad URL** 
```

当我从字符串中删除完整的 json 时，我没有得到错误的 url。所以可能有问题。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:44:21.830

在执行 URL 请求之前，您需要对其进行编码。最好和最优雅的解决方案是在 NSString 上添加一个类别，例如：

```
- (NSString*)URLEncode {
    // Should not be encoded:-_.
    return [(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)self, NULL, CFSTR(";/?:@&=+$,!*'()<>#%\"{}|\\^[]`~"), kCFStringEncodingUTF8) autorelease];
//
} 
```

当您提出请求时：

```
NSString *str = [NSString stringWithFormat: @"http://server.nl/scan.php?data=%@",jsonString];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL    URLWithString:[str URLEncode]]; 
```

如果您不想使用其他文件（甚至认为会被推荐），请将此方法添加到您的类中：

```
- (NSString*)URLEncode:(NSString )yourURL {
 // Should not be encoded:-_. 
return [(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)self, NULL, CFSTR(";/?:@&=+$,!'()<>#%\"{}|\\^[]`~"), kCFStringEncodingUTF8) autorelease]; 
} 
```

并使用

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:[self URLEncode:str]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:44:49.363

我现在没有太多信息，对不起，我有点着急，刚刚看到你的问题。但是我看到了你的问题，我记得在一个项目上工作，该项目本质上是一个基于 HTML 的 iphone 遥控器，当用户点击遥控器的一些按钮时，它遵循打开相同页面但有指示服务器暂停、播放、停止等的服务器端代码……我记得 iPhone 有一个错误，导致它无法解析我的所有 URL，即使它们的格式和工作都正确在桌面客户端上。这就是我切换到 POST 请求的原因（用户点击而不是激活设置隐藏表单变量的 javascript 函数，然后提交表单，而不是直接导航到长 URL）。无论如何，我知道这可能并不直接适用于你，但关键是我确实在 iPhone 的 URL 解析中发现了一个错误，所以这可能不是你的错。稍后我会查找我能找到的任何新信息。祝你好运。

# excel - VBA查找并插入单元格更改

> ID：14261549
> 
> 赞同：0
> 
> 时间：2013-01-10T15:38:39.967
> 
> 标签：excel, vba

**主要工作表：**

学生 | 等级 | 目标代码 | 目标文本

吉姆 | 一个 | 代码1 | 这是与 Code1 对应的文本

**查找表，在名为“目标”的工作表中定义为“名称”“目标代码”：**

代码1 | 这是与 Code1 对应的文本

代码2 | 这是与 Code2 对应的文本

我需要一些 VBA，以便在更改任何记录的 TargetCode 字段时，将相应的文本以文本形式放置到 Target Text 列中。我不能在 Target Text 列中使用 LOOKUP，因为文本需要是可编辑的，如果你尝试编辑它，你只是在编辑 LOOKUP 公式。任何形式的帮助将不胜感激。

我已经从 StackExchange 的其他部分中挑选了一些代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim cell_to_test As Range, cells_changed As Range
Dim result As String
Dim sheet As Worksheet

    Set cells_changed = Target(1, 1)
    Set cell_to_test = Range("D2")

    If Not Intersect(cells_changed, cell_to_test) Is Nothing Then 

        Set sheet = ActiveWorkbook.Sheets("Persuasive Speaking")
        Set TargetSheet = ActiveWorkbook.Sheets("Targets")
        result = Application.WorksheetFunction.Lookup(sheet.Range("D2"),     sheet.Range("WritingTargets"))
        MsgBox ("Test")
    End If
End Sub- 
```

但我收到错误“对象'_Worksheet'的方法'范围'失败......

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:58:42.060

```
Private Sub Worksheet_Change(ByVal Target As Range)

Const COL_IDS As Long = 3
Const COL_TARG_TEXT As Long = 4

Dim rngIds As Range, c As Range, val
Dim rngTable As Range, tmp, result

    On Error GoTo haveError

    Set rngIds = Application.Intersect(Target, Target.Parent.Columns(COL_IDS))

    If Not rngIds Is Nothing Then
        Set rngTable = ThisWorkbook.Sheets("Targets").Range("TargetCodes")
        For Each c In rngIds.Cells
            tmp = Trim(c.Value)
            If Len(tmp) > 0 Then
                val = Application.VLookup(tmp, rngTable, 2, False)
                'disable events to avoid re-triggering this sub                 
                Application.EnableEvents = False
                c.EntireRow.Cells(COL_TARG_TEXT).Value = _
                                    IIf(IsError(val), "Not found!", val)
                Application.EnableEvents = True
            End If
        Next c
    End If

    Exit Sub

haveError:
    'MsgBox Err.Description
    Application.EnableEvents = True

End Sub 
```

# c# - 如何使用 ASP.Net 中的资源文件从母版页更改应用程序的语言

> ID：14261551
> 
> 赞同：0
> 
> 时间：2013-01-10T15:38:44.820
> 
> 标签：c#, asp.net

我在 ASP.Net 中有一个使用 C# 的应用程序。在 aspx 文件的母版页中，我有 3 个具有 3 种语言的图像按钮：英语、法语、罗马尼亚语：

```
<asp:ImageButton ID="ImgRo" ImageUrl="~/Images/Romania Flag.png" runat="server" 
                 Height="25px" ToolTip="RO" style="border-color:black; 
                 background-color:black" OnClick="ImgRo_CLick"/>|
<asp:ImageButton ID="ImgEn" ImageUrl="~/Images/United States Flag.png" runat="server" 
                 Height="25px" ToolTip="EN" style="border-color:black; 
                 background-color:black" OnClick="ImgEn_CLick"/>|
<asp:ImageButton ID="ImgFr" ImageUrl="~/Images/France Flag.png" runat="server" 
                 Height="25px" ToolTip="FR" style="border-color:black; 
                 background-color:black" OnClick="ImgFr_CLick"/>| 
```

当我单击其中一个时，我有事件可以在会话中保存所选语言：

```
protected void ImgRo_CLick(object sender, EventArgs e)
{
    SaveLanguage("Ro");
}
protected void ImgEn_CLick(object sender, EventArgs e)
{
    SaveLanguage("En");
}
protected void ImgFr_CLick(object sender, EventArgs e)
{
    SaveLanguage("fr-Fr");
}

protected void SaveLanguage(string language)
{
    Session[AppDefs.LANGUAGE] = language;
    Thread.CurrentThread.CurrentCulture = new CultureInfo(language);
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(language);
}

public string GetLanguage()
{

    if (Session[AppDefs.LANGUAGE] != null)
    {
        return Session[AppDefs.LANGUAGE].ToString();
    }
    else
    {
        return "en";
    }
} 
```

在母版页中，我打开登录页面，然后打开其他页面。从母版页中选择时，如何更改所有页面的 UICulture？

我在 preinit 事件上尝试登录页面，但不起作用：

```
protected void Page_PreInit(object sender, EventArgs e)
{
   UICulture = Master.GetLanguage();//"fr-FR"
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:23:12.437

将区域性名称存储在会话变量中是一个好的开始，但是您必须在 CurrentThread 中为每个请求更改线程区域性。在 PreInit 中尝试以下代码：

```
var language = Master.GetLanguage();
Thread.CurrentThread.CurrentCulture = new CultureInfo(language);
Thread.CurrentThread.CurrentUICulture = new CultureInfo(language); 
```

# apache - Vaadin UI 组件不显示 (liferay+vaadin)

> ID：14261554
> 
> 赞同：2
> 
> 时间：2013-01-10T15:39:00.963
> 
> 标签：apache, vaadin

我正在使用 Eclipse 来开发使用`vaadin (6.6.6)`和`apache tomcat-6.0.26`.

创建 WAR 文件夹时，我在里面找不到 Vaadin 文件夹。

只有`WEB-INF`和`META-INF`在那里。这会生成一个奇怪的布局（UI 组件不可见，背景颜色为白色）。当此版本部署在另一台机器上时，它会在 apache 上生成错误，但奇怪的是它正在第一台机器上运行（我的意思是布局不完整）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:42:12.013

您应该更新您的小部件集，同时在 web.xml 中设置您的小部件集目录

```
<init-param>
<description>Application widgetset</description>
<param-name>widgetset</param-name>
<param-value>com.vaadin.sth</param-value> 
```

# c - snmptrap IPv6 目标不起作用

> ID：14261558
> 
> 赞同：1
> 
> 时间：2013-01-10T15:39:11.663
> 
> 标签：c, ipv6, net-snmp

我将 snmptrap 编译为“独立”应用程序以在嵌入式设备上运行。使用 IPv4 发送陷阱就像一个魅力，但是当使用 IPv6 地址作为目标时，日志中会显示以下内容：

```
tdomain: tdomain_transport_full("snmptrap", "udp6:[fd64:3ef5:bb33::2]", 0, "[NIL]", "[NIL]")
tdomain: Found no domain from specifier "udp6" 
```

我编译了我的 net-snmp (v5.7.2) 库

```
--enable-ipv6
--with-mib-modules="mibII/ipv6 host notification snmpv3mibs"
--with-transports="UDPIPv6 TCPIPv6" 
```

并将命令行应用程序执行为：

```
snmptrap -v 1 -M ./mibs/ -c public 'udp6:[fd64:3ef5:bb33::2]' '1.2.
3.4.5.6' '172.16.11.144' 6 99 '55' 1.11.12.13.14.15  s "teststring" 
```

谁能指出我解决这个问题的正确方向？

干杯，弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:08:49.053

确保 ipv6[ **fd64:3ef5:bb33::2** ] 地址是可访问的，并且您已经使用 --ipv6 enable 成功编译了 net-snmp 库，

编译后，您已指示 snmpd 使用 udp 和 udp6 协议。

您可以使用 Wireshark调试[SNMP协议](https://www.youtube.com/watch?v=_A2mPw7iSfY)

或者，您也可以尝试其他客户端发送 IPv6 pdu 以确保您的客户端发送正确的数据。

# ruby-on-rails-3 - 唯一关联：通过

> ID：14261560
> 
> 赞同：0
> 
> 时间：2013-01-10T15:39:14.897
> 
> 标签：ruby-on-rails-3

我有一个多对多：通过一组类之间的关系，如下所示：

```
class Company
  has_many :shares
  has_many :users, :through => :shares, :uniq => true
end

class User
  has_many :shares
  has_many :companys, :through => :shares, uniq => true
end

class Share
  belongs_to :company
  belongs_to :user
end 
```

我想确保一种独特的关系，以便用户只能在任何一家公司拥有一份股份，这是我尝试使用“uniq”参数实现的目标。

起初我认为这是可行的，但是似乎“uniq”的行为是过滤记录的SELECT，而不是预先插入，所以我仍然在数据库中得到重复的记录，如果我想这会成为一个问题直接开始处理 :shares 关联，因为调用 user.shares 将返回重复记录（如果存在）。

任何人都可以提供一种可以强制建立真正独特关系的方法吗？这样如果我尝试在用户和公司之间添加第二个关系，它会拒绝它并只保留原始关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:51:29.480

您是否尝试将其添加到您的`Share`课程中？

```
validates_uniqueness_of :user, scope: :company 
```

另外，在您的`User`课堂上，我认为应该是：

```
has_many :companies, through: :shares 
```

我希望这会有所帮助。

# eclipse - 在 Eclipse Kepler 中安装 WAS8.5 支持时出现问题

> ID：14261563
> 
> 赞同：4
> 
> 时间：2013-01-10T15:39:25.083
> 
> 标签：eclipse, websphere

我正在尝试将我的环境从 Juno 升级到 Kepler。但是，当我尝试安装此处找到的 IBM 插件时..

```
http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/V8.5/ 
```

它不会让他们安装，因为它说我缺少一些插件，有人知道我在哪里可以找到它们吗？

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：WebSphere® Application Server V8.5 Tools 8.5.1001.v20121206_1718 (com.ibm.websphere.wdt.st.v85.feature.group 8.5.1001.v20121206_1718) 缺少要求：IBM Enterprise Navigator Component 7.5.101。 v20120918_0238 (com.ibm.etools.project.explorer 7.5.101.v20120918_0238) 需要 'bundle com.ibm.icu [3.6.1,4.5.0)' 但找不到无法满足依赖关系：来自：Enterprise Explorer 1.0 .1.v20120918_0238 (com.ibm.etools.project.explorer.feature.feature.group 1.0.1.v20120918_0238) 至：com.ibm.etools.project.explorer [7.5.101.v20120918_0238] 无法满足依赖性：来自： Java EE 开发工具 1.0.0.v20121205_0320 (com.ibm.wdt.javaee.feature.feature.group 1.0.0.v20121205_0320) 到：

更新：开普勒还不支持这个吗？！？！？！ [http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14694723](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14694723)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T06:05:41.480

Kepler 已发布，您可以投票支持 IBM 的 RFE，以添加对 Kepler 的 websphere 插件支持。

[http://www.ibm.com/developerworks/rfe/execute?use_case=viewRfe&CR_ID=36925](http://www.ibm.com/developerworks/rfe/execute?use_case=viewRfe&CR_ID=36925)

RFE 链接自 websphere 开发者论坛：

[https://www.ibm.com/developerworks/community/forums/html/topic?id=0b0dff76-f833-4607-95e8-538a9ddaec75](https://www.ibm.com/developerworks/community/forums/html/topic?id=0b0dff76-f833-4607-95e8-538a9ddaec75)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T13:35:13.820

Eric Peters 上周五在博客文章中宣布，WebSphere Developer Tools V8.5.5.1 可用于 Eclipse Kepler SR1 (4.3.1) 和 Juno (4.2.2)： [https ://www.ibmdw.net /wasdev/2013/10/25/websphere-developer-tools-v8-5-5-1-eclipse-kepler/](https://www.ibmdw.net/wasdev/2013/10/25/websphere-developer-tools-v8-5-5-1-eclipse-kepler/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:10:12.323

显然 IBM 还不支持 Eclipse Kepler :-(

# symfony - Doctrine2 OneToMany - ManyToOne 返回空集合，数据库正常

> ID：14261565
> 
> 赞同：6
> 
> 时间：2013-01-10T15:39:28.033
> 
> 标签：symfony, doctrine-orm, one-to-many

我有很多这种类型的关系，但我不明白为什么这种关系不起作用。
我有一个委托和一个促销实体：
委托

晋升

```
 /**
 * Company\CBundle\Entity\Promotion
 * 
 * @ORM\Entity
 * @DoctrineAssert\UniqueEntity("promotionCode")
 */
class Promotion
{
    const REGISTER_DAYS = 30;
    const REGISTER_DISCOUNT = 100;

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="promotionCode", type="string", unique=true, nullable=true)
     */
    protected $promotionCode;

    /**
     * @ORM\Column(name="name", type="string")
     */
    protected $name;

    /**
     * @ORM\Column(name="description", type="string", nullable=true)
     */
    protected $description;

    /**
     * @ORM\Column(name="days", type="integer")
     */
    protected $days;

    /**
     * @ORM\Column(name="discount", type="float")
     */
    protected $discount;

    /**
     * @ORM\ManyToOne(targetEntity="Delegation", inversedBy="promotions")
     * @ORM\JoinColumn(name="delegation_id", referencedColumnName="id")
     */
    private $delegation;

    /**
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="promotions")
     */
    private $product;

    /**
     * @var date $adquiredDate
     *
     * @ORM\Column(name="adquiredDate", type="date", nullable=true)
     */
    private $adquiredDate; 
```

当我在控制器中创建促销时，表 Promotion 具有与委托相关的新对象

```
private function createPromotion($delegation)
{
    $em = $this->getDoctrine()->getEntityManager();
    $promotion = Promotion::createPromotion($delegacion, Promotion::REGISTER_DAYS, Promotion::REGISTER_DISCOUNT);
    $em->persist($promotion);
    $em->persist($delegation);

    $em->flush();
} 
```

数据库

```
*************************** 15\. row ***************************
           id: 32
delegation_id: 19
         days: 20
     discount: 50
 adquiredDate: 2013-01-10

*************************** 16\. row ***************************
           id: 33
delegation_id: 19
         days: 25
     discount: 50
 adquiredDate: 2013-01-10
*************************** 17\. row ***************************
           id: 34
delegation_id: 19
         days: 30
     discount: 50
 adquiredDate: 2013-01-10 
```

但是当我在另一个控制器/动作中调用 $delegation->getPromotions() 时，没有促销，返回一个没有数据的 Doctrine\ORM\PersistentCollection。

有人可以帮忙吗？

编辑更多信息。$delegation->getPromotions() 是空的，但是寻找该委托的提升并调用 $promotion->getDelegation() 正在正确地返回委托：？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:58:53.603

您是否尝试过定义您的 $delegation 属性，例如

```
/**
 * @ORM\ManyToOne(targetEntity="Delegation", inversedBy="promotions")
 * @ORM\JoinColumn(name="delegation_id", referencedColumnName="id")
 */
private $delegation; 
```

请参阅[Doctrine2 文档：关联映射->多对一](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-one-unidirectional)

* * *

您的代码中还有很多错别字。例如

```
/**
 * @ORM\OneToMany(targetEntity="Promotion", mappedBy="delegacion", cascade={"all"}, orphanRemoval=true)
 */
protected $promotions; 
```

`mappedBy="delegacion"`应该是`mappedBy="delegation"`。

或者

```
public function getDeleTacion()
{
    return $this->deleTacion;
} 
```

应该

```
public function getDelegation()
{
    return $this->delegation;
} 
```

## 编辑

好的，我为你创建了一个对我有用的简约版本。您可以从那里构建它或观察与您的代码的差异：

促销.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Promotion
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Delegation", inversedBy="promotions", cascade={"persist"})
     * @ORM\JoinColumn(name="delegation_id", referencedColumnName="id")
     */
    public $delegation;

    /**
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="promotions", cascade={"persist"})
     * @ORM\JoinColumn(name="product_id", referencedColumnName="id")
     */
    public $product;
} 
```

委托.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Delegation
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="Promotion", mappedBy="delegation", cascade={"all"}, orphanRemoval=true)
     */
    public $promotions;

    public function __construct() {
        $this->promotions = new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

产品.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Product
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="Promotion", mappedBy="product", cascade={"all"}, orphanRemoval=true)
     */
    public $promotions;

    public function __construct() {
        $this->promotions = new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

如果你现在做类似的事情

```
$delegation = new Delegation();
$product = new Product();
$promotion = new Promotion();
$promotion->delegation = $delegation;
$promotion->product = $product;

$em->persist($promotion);
$em->flush();

$products = $em->createQuery('select p from BundleName\Entity\Product p')->execute();
$delegations = $em->createQuery('select d from BundleName\Entity\Delegation d')->execute();

var_dump(count($products[0]->promotions), count($delegations[0]->promotions)); 
```

你应该最终得到

```
int(1)
int(1) 
```

所以引用实际上被保存并且可以读取。呸。祝你好运！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-01T11:01:05.097

我有一个类似的错误，我在一些新创建的实体上的多对一关系包含实体，而反向一对多没有，尽管数据库中显然有相应的行。

我确实在一对多方面坚持并刷新实体，但我也必须这样做 

```
$entityManager->clear(); 
```

在再次从存储库中获取这些实体以使一对多关系能够访问这些实体之前。

# javascript - 使用 JQuery 动态创建 DIV 并在新 DIV 中添加 DIV

> ID：14261578
> 
> 赞同：0
> 
> 时间：2013-01-10T15:39:54.553
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我正在尝试使用以下查询从数据库中为我的 phonegap 应用程序动态创建带有 DIV 的页面。为了简单起见，数据库将只有 2 列，“ID”和“Data”：

```
function querySuccessOrders(tx, results) {
console.log("Successful QUERY of the Table");
var len = results.rows.length;

for (var i=0; i<len; i++){ 
    $('#body').append('<div data-role="page" id="coi'+results.rows.item(i).ID+'" data-theme="b"></div>');
}

for (var i=0; i<len; i++){  
    $('#coi'+results.rows.item(i).ID+'').append('<div data-role="header" data-theme="b" id="coi_header'+results.rows.item(i).ID+'"></div>');
}

for (var i=0; i<len; i++){  
    $('#coi'+results.rows.item(i).ID+'').append('<div data-role="content" data-theme="b" id="infoGuts'+results.rows.item(i).ID+'"></div>');
}

for (var i=0; i<len; i++){  
    $('#coi'+results.rows.item(i).ID+'').append('<div data-role="footer" data-position="fixed" class="footer-docs" data-theme="b" id="coi_footer'+results.rows.item(i).ID+'"></div>');
}

for (var i=0; i<len; i++){  
    $('#coi_header'+results.rows.item(i).ID+'').append('<h1>ID #'+results.rows.item(i).ID+'</h1>');
    $('#coi_header'+results.rows.item(i).ID+'').append('<a href="#page" data-icon="home" data-iconpos="notext" id="intro" class="ui-btn-right"></a>');  
}

for (var i=0; i<len; i++){  
    $('#coi_header'+results.rows.item(i).ID+'').append('<div data-role="navbar" data-theme="b" id="coi_navbar'+results.rows.item(i).ID+'"></div>');
}

  for (var i=0; i<len; i++){  
    $('#coi_header'+results.rows.item(i).ID+'').append('<div data-role="navbar" data-theme="b" id="coi_navbar'+results.rows.item(i).ID+'"></div>');
}

for (var i=0; i<len; i++){  
    $('#coi_navbar'+results.rows.item(i).ID+'').append('<ul>');
    $('#coi_navbar'+results.rows.item(i).ID+'').append('<li><a href="#COI'+results.rows.item(i).ID+'">COI</a></li>');
    $('#coi_navbar'+results.rows.item(i).ID+'').append('<li><a href="#COP'+results.rows.item(i).ID+'">COP</a></li>');
    $('#coi_navbar'+results.rows.item(i).ID+'').append('<li><a href="#COQ'+results.rows.item(i).ID+'">COQ</a></li>');
    $('#coi_navbar'+results.rows.item(i).ID+'').append('</ul>');
}

for (var i=0; i<len; i++){  
    $('#coi_footer'+results.rows.item(i).ID+'').append('<p>footer</p>');     
}

for (var i=0; i<len; i++){
    $('#info'+results.rows.item(i).ID+'').append('ID:'+results.rows.item(i).ID+'<br />');
    $('#info'+results.rows.item(i).ID+'').append('Data:'+results.rows.item(i).Data+'<br />');
}

} 
```

本质上，我试图让身体动态地看起来像这样：

```
 <body id="body">

<div data-role="page" id="coi1" data-theme="b">
    <div data-role="header" data-theme="b" id="coi_header1">
        <h1>ID #1</h1>
        <a href="#page" data-icon="home" data-iconpos="notext" id="intro" class="ui-btn-right"></a>
            <div data-role="navbar" data-theme="b" id="coi_navbar1">

                         <ul>
                           <li><a href="#COI1">COI</a></li>
                           <li><a href="#COP1">COP</a></li>
                           <li><a href="#COQ1">COQ</a></li>
                         </ul>
            </div>
    </div>
    <div data-role="content" data-theme="b" id="infoGuts1">
           ID:1<br />
           Data: asd <br />
    </div>
    <div data-role="footer" data-position="fixed" class="footer-docs" data-theme="b" id="coi_footer1">
     <p>footer</p>  
    </div>
</div>

<div data-role="page" id="coi2" data-theme="b">
    <div data-role="header" data-theme="b" id="coi_header2">
        <h1>ID #2</h1>
        <a href="#page" data-icon="home" data-iconpos="notext" id="intro" class="ui-btn-right"></a>
            <div data-role="navbar" data-theme="b" id="coi_navbar2">
                          <ul>
                           <li><a href="#COI2">COI</a></li>
                           <li><a href="#COP2">COP</a></li>
                           <li><a href="#COQ2">COQ</a></li>
                         </ul>              
            </div>
    </div>
    <div data-role="content" data-theme="b" id="infoGuts2">
            ID:2<br />
           Data: asd <br />
    </div>
    <div data-role="footer" data-position="fixed" class="footer-docs" data-theme="b" id="coi_footer2">
     <p>footer</p>  
    </div>
</div>

Doing this for each ID

</body> 
```

以下是我遇到的问题，经过一段时间的环顾后无法找到解决方案：

创建的 Div 格式松散（它们缺少 css）

新的 div 似乎混合在一起（几乎就像我创建不正确一样），就像 div 没有像我在 body 示例中布置的那样进入正确的位置。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:25:13.497

jQuery Mobile 文档在这种情况下真的很糟糕。如果我理解正确，您想在完全动态生成的页面上刷新 CSS。jQM 文档声明使用此语法**.trigger('create')**但不幸的是它在 jQM 中不起作用。

在您的情况下，您应该使用以下语法：

```
$("#index").trigger("pagecreate"); 
```

这是此解决方案的示例：http: [//jsfiddle.net/Gajotres/mpFJn/](http://jsfiddle.net/Gajotres/mpFJn/)

# c - 指向字符串的指针数组 - C

> ID：14261579
> 
> 赞同：0
> 
> 时间：2013-01-10T15:39:56.360
> 
> 标签：c, multidimensional-array

我有一个我真的无法理解的问题。我是一个新手 C 程序员，我有一个大致是这样的程序：

```
void filetostr(FILE *, char *s[]);
void strtofile(char *s[], FILE *);
void XORstr(char *, int);
void XORtext(char *s[], int);
void printext(char *s[]);

int main(int args, char *argv[]) {

    char *s[MAXLENGTH];
    char ln[MAXLENGTH];

    FILE *input, *xorred, *rexorred, *out;

    input = fopen("input.txt", "r");
    filetostr(input, s);
    fclose(input);

    printext(s);

    XORtext(s, KEY);        
}

void filetostr(FILE *fp, char *s[]) {
    char ln[MAXLENGTH];
    char *p;
    int i = 0;

    while (fgets(ln, MAXLINE, fp)) {
        p = (char *) malloc(strlen(ln) * sizeof(char));
        strcpy(p, ln);
        s[i++] = p;
    }
}

void printext(char *s[]) {
    while (*s) {
        printf("%s", *s);
        s++;
    }
}

void XORstr(char *s, int key) {
    int c;
    while (c = *s)
        *s++ = key ^ c;
}

void XORtext(char *txt[], int key) {
    while (*txt) {
        XORstr(*txt, key);
        txt++;
    }
} 
```

我有两个两个问题：

*   首先，当我用 构建指向字符串的指针数组时`filetostr`，我让它工作，但文本中间的两行重复（数组中有两个对它们的引用，因此`printext`它们被打印两次）。这怎么可能？对 malloc 的调用是否错误？
*   其次，当我尝试对我刚才提到的行进行异或运算时，它们只会异或一次，所以我最终得到一个异或行，每个重复行都有一个正常的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:43:11.517

```
 p = (char *) malloc((strlen(ln) + 1) * sizeof(char)); 
```

代替

```
 p = (char *) malloc(strlen(ln) * sizeof(char)); 
```

顺便说一句，你可以改变

```
p = (char *) malloc((strlen(ln)+1) * sizeof(char));
strcpy(p, ln);
s[i++] = p; 
```

经过

```
s[i++] = strdup(ln) 
```

一样的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:43:45.463

里面不太对`malloc`。`filetostr`它应该是

```
p = malloc(strlen(ln) + 1); 
```

您需要为终止空字符分配空间，不需要强制转换返回并且可以依赖`sizeof(char)`为 1

# mysql - MySQL 将 Damerau–Levenshtein Fuzzy 与 Like 通配符混合

> ID：14261580
> 
> 赞同：2
> 
> 时间：2013-01-10T15:39:59.700
> 
> 标签：mysql, algorithm, levenshtein-distance

我最近在 MySQL 中实现了 Damerau-Levenshtein 算法的 UDF，并且想知道是否有一种方法可以将 Damerau-Levenshtein 算法的模糊匹配与 Like 函数的通配符搜索结合起来？如果我在表中有以下数据：

```
ID | Text
---------------------------------------------
1  | let's find this document
2  | let's find this docment
3  | When the book is closed
4  | The dcument is locked 
```

我想运行一个包含 Damerau–Levenshtein 算法的查询...

```
select text from table where damlev('Document',tablename.text) <= 5; 
```

...使用通配符匹配以在我的查询中返回 ID 1、2 和 4。我不确定语法或者这是否可能，或者我是否必须以不同的方式处理这个问题。上面的 select 语句单独工作正常，但不适用于单个单词。我将不得不将上面的 SQL 更改为...

```
select text from table where 
 damlev('let's find this document',tablename.text) <= 5; 
```

...当然只返回 ID 2。我希望有一种方法可以将模糊和通配符组合在一起，如果我希望返回的所有记录都包含“文档”一词或其变体出现在文本字段中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:51:39.963

在处理人名并对其进行模糊查找时，对我有用的是创建第二个单词表。还要创建第三个表，它是包含文本的表和单词表之间的多对多关系的相交表。将一行添加到文本表时，您可以将文本拆分为单词并适当地填充相交表，并在需要时将新单词添加到单词表中。一旦这个结构到位，您可以更快地进行查找，因为您只需要在唯一词表上执行您的 damlev 函数。一个简单的连接可以让您获得包含匹配单词的文本。 ![在此处输入图像描述](../Images/ef4d9ab0cdb9f58e441fc3858ba451ad.png)

单个单词匹配的查询看起来像这样：

```
SELECT T.* FROM Words AS W
JOIN Intersect AS I ON I.WordId = W.WordId
JOIN Text AS T ON T.TextId = I.TextId
WHERE damlev('document',W.Word) <= 5 
```

两个词看起来像这样（在我的脑海中，所以可能不完全正确）：

```
SELECT T.* FROM Text AS T
JOIN (SELECT I.TextId, COUNT(I.WordId) AS MatchCount FROM Word AS W
      JOIN Intersect AS I ON I.WordId = W.WordId
      WHERE damlev('john',W.Word) <= 2
            OR damlev('smith',W.Word) <=2
      GROUP BY I.TextId) AS Matches ON Matches.TextId = T.TextId
          AND Matches.MatchCount = 2 
```

这里的好处是，以一些数据库空间为代价，您只需将耗时的 damlev 函数应用于唯一单词，无论您的文本表的大小如何，这可能只会数以千计。这很重要，因为 damlev UDF 不会使用索引 - 它会扫描应用它的整个表来计算每一行的值。只扫描唯一的单词应该会快得多。另一个优点是 damlev 应用于单词级别，这似乎是您所要求的。另一个优点是您可以扩展查询以支持搜索多个单词，并且可以通过在 TextId 上对匹配的相交行进行分组来对结果进行排名，并根据匹配数进行排名。

# javascript - 需要绘制工作流活动图

> ID：14261581
> 
> 赞同：1
> 
> 时间：2013-01-10T15:40:02.990
> 
> 标签：javascript, .net, graph, charts, workflow

我需要一个开源图表来满足以下要求。

我的自定义 .net 实现的工作流应用程序中有 10 个步骤。“文档”会随着时间向前和向后通过这个工作流程。我想在工作流程中绘制“文档”活动，如下所示。

x 轴 - 从左到右 - 预定义的工作流程步骤 y 轴 - 从上到下 - 带箭头的线应该代表从一个步骤到另一个步骤的移动。该箭头可以指向下一步或上一步，因为文档可以双向遍历。它甚至可能发生在同一天。所以我想我们需要一些弯曲的箭头线。

我需要一个好的开源图表（可能是 javascript）或一个简单的机制来绘制上面的图表。我尝试了甘特图，但实际上它并不完全符合我想要的方式。它有时间用于 x 轴，并且真正关注特定运动的持续时间而不是活动。

感谢你的帮助。

# c# - 禁用没有 javascript 的“提交”按钮

> ID：14261582
> 
> 赞同：0
> 
> 时间：2013-01-10T15:40:10.137
> 
> 标签：c#, asp.net, submit

我正在尝试对“双重提交”问题实施某种解决方案，当有一个提交按钮触发需要一些时间运行的代码例程时，就会出现这种问题。

不幸的是，大量用户仍在使用旧的互联网浏览器和一些运行无脚本插件。我不能使用 javascript。

单击asp.net中的按钮后有没有办法禁用按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:42:03.133

由于您想在用户单击后（并且您的页面仍在加载时）禁用该按钮，因此必须在客户端完成。JavaScript 是唯一可以用于此目的的客户端语言。

因此，请确保*如果*用户禁用了 Javascript（现在几乎不可能），那么您的最终页面可以处理“双重提交”数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:42:42.553

短篇小说，没有。

在您的情况下，您需要编写一些服务器端代码来检测重复发布，然后丢弃重复请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:18:50.680

*因此，如果没有某种*客户端脚本，就不可能禁用该按钮。如果您假设它将被禁用，无论它是哪种客户端脚本，那么这都是一项不可能完成的任务。

您*可以*做的是确保他们尝试执行的操作在每次页面加载时不会运行超过一次。

1.  加载页面时创建一个隐藏字段；使用 GUID 填充该字段。
2.  在服务器端单击处理程序的开始处输入一个`Lock`块。
3.  根据该 GUID 检查是否存在会话密钥。（给它一个前缀，这样它就不会与任何其他基于 GUID 的会话密钥发生冲突。）
4.  如果密钥存在，退出`lock`块并且什么都不做，或者显示某种错误消息。
5.  如果它们的键不存在，则向该会话键添加一个新值，退出`lock`块并执行您的操作。给会话密钥一个合适的过期时间；它不应该超过几分钟。您甚至可以在操作结束时删除相关的会话密钥，如果在该点重复它是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:44:57.833

您可以在每次单击按钮后在服务器上启动计时器并将其置于会话中。在下一次点击时，您可以检查计时器并应用或拒绝下一次用户点击。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-10T15:46:09.210

在按钮单击事件中只需编写代码

```
{

//Some Code

button1.Enabled = false;

} 
```

# vba - VBA excel查找集合的统计模式

> ID：14261584
> 
> 赞同：0
> 
> 时间：2013-01-10T15:40:24.487
> 
> 标签：vba, collections

因此，我试图在 Excel 中分析一些数据，但在查找最常见的数字时遇到了一些麻烦。我有一个未知数量的地点，可以有未知数量的捐赠。例如

*   布兰特福德 $50.00
*   布兰特福德 $25.00
*   布兰特福德 $50.00
*   温莎 $200.00
*   魁北克 $25.00
*   魁北克 $100.00
*   魁北克 $50.00
*   魁北克 $50.00
*   魁北克 $25.00
*   魁北克 $50.00
*   魁北克 $50.00
*   魁北克 $25.00
*   魁北克 $100.00
*   魁北克 $40.00
*   温莎 $140.00
*   温莎 $20.00
*   温莎 $20.00

所以我需要使用 VBA 来查找每个位置的计数、总和、平均值和模式（必须通过 VBA 完成，不能只编写关于如何使用高级过滤器/数据透视表执行此操作的说明:()。

所以现在使用 VBA 我有一个字典对象，它将位置名称存储为一个键，并将每个捐赠存储在一个集合中。使用我有计数的集合的计数，可以轻松地循环遍历集合以获得总和，使用我的平均值；但是，我不确定获得该模式的最有效方法。

我知道如果我的数据位于使用 Application.mode 的数组中，我可以找到它，但这似乎不适用于集合 :(。将集合转换为数组虽然是为了找到模式，但我并不觉得最有效的解决方案。我能找到的唯一其他选择是对集合进行排序，然后遍历它们以找到模式。

所以想知道是否有人知道找到集合统计模式的好方法？

```
Dim locdata As Object
Set locdata = CreateObject("scripting.dictionary")  

For counter = 2 To max
    mykey = Cells(counter, loccol).value
    If Not (locdata.exists(mykey)) Then
        locdata.Add (mykey), New Collection
    End If
    locdata(mykey).Add (Cells(counter, donamountcol).value)
Next counter
For Each k In locdata.keys
    locname = k
    Cells(counter, 1) = k
    Cells(counter, 2) = locdata(k).Count
    donationtotal = 0
    For Each donvalue In locdata(k)
        donationtotal = donationtotal + donvalue
    Next donvalue
    Cells(counter, 3) = donationtotal
    Cells(counter, 4) = donationtotal / CDbl(locdata(k).Count)
    'Cells(counter, 5) = Application.mode(locdata(k)) doesn't work :(
    counter = counter + 1
Next k 
```

编辑：理想情况下，输出应该是（以魁北克为例）魁北克：计数：10 总和：515 平均：51.5 模式：50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:02:57.337

我过去也遇到过类似的情况。在我看来，excel 中缺少一个非常强大的 VBA 函数——相当于 MySQL 中的“where”语句。
所以我自己写了一个非常简单的......这缺少很多功能，但它可以让你做你想要的，同时最大限度地减少你编写的代码量。
基本概念：可以从函数调用中返回一个数组，Excel 内置函数可以对这样的数组进行操作，就像对函数进行操作一样。因此，如果您有一个返回“我想要模式的所有数字”的函数，那么`=MODE(myfunction())`会给您想要的答案。
我选择调用我的函数`subset(criteria, range1, range2)`。
它以最简单的形式返回 range2 中与 range1 中满足条件的元素相对应的元素。这没有经过广泛的测试，但我希望你明白这一点。
顺便说一句，您可以在多个单元格中将其作为数组公式（shift-ctrl-enter）输入；在这种情况下，您会在第一个单元格中获得第一个返回的元素，等等。有时，当您有一个需要返回多个值（例如范围）的函数时，这是一个有用的技巧 - 但对于这种情况，您只需要结果喂给另一个函数。

```
Option Explicit
' Function subset(criteria, range1, range2)
' Return an array with the elements in range2 that correspond to
' elements in range1 that match "criteria"
' where "criteria" can be a string, or a value with a < = > sign in front of it

' example: =subset("bravo", A1:A10, B1:B10)
' returns all cells from B that corresponds to cells in A with "bravo"
' =subset("<10", A1:A10, B1:B10) returns all cells in B corresponding to
' cells in A with a value < 10
' This is analogous to the "where" function in SQL, but much more primitive

Function subset(criteria As String, range1 As Range, range2 As Range)
Dim c
Dim result
Dim ii, jj As Integer
On Error GoTo etrap

If range1.Cells.Count <> range2.Cells.Count Then Exit Function
ReDim result(1 To range1.Cells.Count)
ii = 1
jj = 1
For Each c In range1.Cells
If compare(c.Value, criteria) = 0 Then
  result(ii) = range2.Cells(jj).Value
  ii = ii + 1
End If
jj = jj + 1
Next c

If ii > 1 Then
ReDim Preserve result(1 To ii - 1)
subset = result
Else
subset = Nothing
End If

Exit Function
etrap:
MsgBox "Error " & Err.Description
End Function

Private Function compare(a, b)
' type of a decides what kind of comparison we do
If TypeName(a) <> TypeName("hello") Then
' use numerical comparison
compare = Not (Evaluate(a & b))
Else
' use string comparison
compare = StrComp(a, b, vbTextCompare)
End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:39:32.000

实际上，我只是决定制作一本字典。所以我有位置和每个位置，而不是每个捐赠金额的字典。很容易以这种方式比较计数以找到模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:22:21.593

以下是如何将范围内的值动态地放入数组中。我会**`CountIF`**在 VBA 中使用它们的名称来查找最常见的对象。**因为你不知道`location names`或`donations`.** 然后数组是要走的路。

```
Dim ar as Variant
Dim endRow as Long

'get last row in the range
endRow = Sheets(1).Cells(Sheets(1).Rows.Count, "A").End(xlUp).Row    
'ar = WorksheetFunction.Transpose(Shets(1).Range("A1:A12")
 'using endrow
 ar = WorksheetFunction.Transpose(Shets(1).Range("A1").resize(endRow).value) 
```

更新：`subroutine`下面使用一次迭代（for循环）来找到`Mode`..

```
Sub FrequencyByLocDonations()
Dim ar As Variant, dc As Object
Dim rngInput As Range, mxRng As Range
Dim endRow As Long, i As Integer
Dim counts As Double, maxLoc As Double
Dim maxLocation As String
   Set dc = CreateObject("Scripting.Dictionary")

   '-- When you know the range
   '   ar = WorksheetFunction.Transpose(Shets(1).Range("A1:A12").Value

    'get last row in the range when you don't know but the starting cell
    endRow = Sheets(3).Cells(Sheets(3).Rows.Count, "C").End(xlUp).Row
    Set rngInput = Sheets(3).Range("C2").Resize(endRow - 1, 1)

    '--you may also use that set rngInput as well
    '   WorksheetFunction.Transpose(rngInput).Value

    '-- using endrow-1 to not to take an extra blank row at the end
    ar = WorksheetFunction.Transpose(Sheets(3).Range("C2").Resize(endRow - 1, 2).Value)

    For i = LBound(ar, 2) To UBound(ar, 2)
        If Not (dc.exists(ar(1, i))) Then
            counts = Application.WorksheetFunction.CountIf(rngInput, ar(1, i))
            If counts >= maxLoc Then
                maxLocation = ar(1, i)
                maxLoc = counts
            End If
            dc.Add ar(1, i), counts
        End If
    Next i

    '-- output to the Sheet
    Sheets(3).Range("C2").Offset(0, 2).Resize(UBound(dc.keys) + 1, 1) = _ 
              Application.Transpose(dc.keys)
    Sheets(3).Range("C2").Offset(0, 3).Resize(UBound(dc.items) + 1, 1) = _
              Application.Transpose(dc.items)
    Sheets(3).Range("C2").Offset(0, 4) = "Most Frequent Location :" _ 
              & maxLocation & "; " & maxLoc

    Set dc = Nothing
End Sub 
```

输出：

![在此处输入图像描述](../Images/5edf7230f62ef9d6ce27c30b8a6f05d1.png)

# apache - 使用 Nutch 重新抓取 URL 仅用于更新的站点

> ID：14261586
> 
> 赞同：9
> 
> 时间：2013-01-10T15:40:29.493
> 
> 标签：apache, solr, lucene, nutch, web-crawler

我用 Nutch 2.1 抓取了一个 URL，然后我想在页面更新后重新抓取它们。我怎样才能做到这一点？我如何知道页面已更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T15:45:08.040

简直不能。您需要重新抓取页面以控制它是否已更新。因此，根据您的需要，优先考虑页面/域并在一段时间内重新抓取它们。为此，您需要一个作业调度程序，例如[Quartz](http://quartz-scheduler.org/)。

您需要编写一个比较页面的函数。但是，Nutch 最初将页面保存为索引文件。换句话说，Nutch 会生成新的二进制文件来保存 HTML。我认为无法比较二进制文件，因为 Nutch 将所有爬网结果组合在一个文件中。如果您想以原始 HTML 格式保存页面以进行比较，请参阅我对[这个问题的回答。](https://stackoverflow.com/questions/10007178/how-do-i-save-the-origin-html-file-with-apache-nutch/10060160#10060160)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T06:05:49.123

您必须安排 ta Job 以触发 Job
但是，Nutch AdaptiveFetchSchedule 应该使您能够抓取和索引页面并检测页面是新的还是更新的，而您不必手动进行。

[文章](http://pascaldimassimo.com/2010/06/11/how-to-re-crawl-with-nutch/)详细描述了相同的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T09:50:37.823

怎么样[http://pascaldimassimo.com/2010/06/11/how-to-re-crawl-with-nutch/](http://pascaldimassimo.com/2010/06/11/how-to-re-crawl-with-nutch/)

这在讨论：[如何重新抓取 nutch](https://stackoverflow.com/questions/13873694/how-to-recrawle-nutch)

我想知道上述解决方案是否确实有效。我们说话的时候我正在努力。我爬取新闻站点并且他们经常更新他们的首页，所以我需要经常重新抓取索引/首页并获取新发现的链接。

# file-io - 由于“topMeta”，COLLADA DOM open() 函数返回 null

> ID：14261587
> 
> 赞同：0
> 
> 时间：2013-01-10T15:40:39.823
> 
> 标签：file-io, collada

我试图打开一个[.dae](http://collada.org/mediawiki/index.php/DOM_guide%3a_Importing_documents)文件。

但是当我尝试打开文档时，它是空的，因为名为“topMeta”的东西是空的。我不知道如何正确设置 topMeta。

这是代码

```
DAE dae;

daeElement *root = dae.open("simple.dae"); 
```

# maven - 为什么 Maven 从不同于 settings.xml 中指定的 Nexus 存储库下载依赖项？

> ID：14261593
> 
> 赞同：0
> 
> 时间：2013-01-10T15:40:50.573
> 
> 标签：maven, jboss, jenkins, jboss7.x, nexus

我在处理 JBoss 的 Nexus 存储库的这个问题时做错了什么？

我正在尝试构建 JBoss AS7 并通过内部 Nexus 存储库代理 JBoss Public 存储库组。我希望通过我的 Nexus 存储库代理整个构建 - 不访问 jboss.org Nexus 存储库。但是，我遇到了一个问题。

在测试 jboss-as-jmx 之前，一切都可以构建，因为它想从另一个 repo 下载工件...... /developer 组。

我在日志中注意到它尝试这样做：

```
Downloading artifact org.jboss.as:jboss-as-jmx:jar:7.1.2.Final from jboss-developer (http://repository.jboss.org/nexus/content/groups/developer/, releases+snapshots) 
```

因此，我将 jboss-developer repo id 添加到指向[http://repository.jboss.org/nexus/content/groups/developer](http://repository.jboss.org/nexus/content/groups/developer)的 Nexus 中，并将其添加到代理的 JBoss Public 组中。但是，它似乎没有覆盖 jboss-developer 存储库，Maven 仍然尝试从 jboss.org 下载工件

以下是相关测试阶段的日志输出：

```
T E S T S
-
Forking command line: /bin/sh -c cd "/opt/jenkins/jobs/JBoss AS7/workspace/jmx" &amp;&amp; /usr/java/jdk1.7.0_05/jre/bin/java -Duser.region=US -Duser.language=en -jar '/opt/jenkins/jobs/JBoss AS7/workspace/jmx/target/surefire/surefirebooter6443418663635953999.jar' '/opt/jenkins/jobs/JBoss AS7/workspace/jmx/target/surefire/surefire6887873281987795093tmp' '/opt/jenkins/jobs/JBoss AS7/workspace/jmx/target/surefire/surefire5481790486559149986tmp'
Running org.jboss.as.jmx.model.LegacyTypeConverterUnitTestCase
Tests run: 49, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.389 sec
Running org.jboss.as.jmx.model.ExpressionTypeConverterUnitTestCase
Tests run: 46, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.143 sec
Running org.jboss.as.jmx.model.NameConverterUnitTestCase
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec
Running org.jboss.as.jmx.model.ObjectNameAddressUtilTestCase
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running org.jboss.as.jmx.JMXSubsystemTestCase
Resolving artifact org.jboss.as:jboss-as-jmx:jar:7.1.2.Final
Downloading artifact org.jboss.as:jboss-as-jmx:jar:7.1.2.Final from jboss-developer (http://repository.jboss.org/nexus/content/groups/developer/, releases+snapshots)
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Downloading: http://repository.jboss.org/nexus/content/groups/developer/org/jboss/as/jboss-as-jmx/7.1.2.Final/jboss-as-jmx-7.1.2.Final.jar

org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact org.jboss.as:jboss-as-jmx:jar:7.1.2.Final from/to jboss-developer (http://repository.jboss.org/nexus/content/groups/developer/): Error transferring file: Connection timed out from http://repository.jboss.org/nexus/content/groups/developer/org/jboss/as/jboss-as-jmx/7.1.2.Final/jboss-as-jmx-7.1.2.Final.jar 
```

这是我的本地 ~/.m2/settings.xml - 在此阶段之前，所有其他依赖项工件都已被此代理。它仍然没有覆盖 Maven 从[http://repository.jboss.org](http://repository.jboss.org)下载这一依赖项 jboss-as-jmx 的尝试。

```
<settings>
  <mirrors>
    <mirror>
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://repository.mycompany.com:8080/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
        <repository>
          <id>jboss-public-repository-group</id>
          <url>http://jbosspublic</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
        <repository>
          <id>jboss-developer</id>
          <url>http://jbosspublicdev</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
        <pluginRepository>
          <id>jboss-public-repository-group</id>
          <url>http://jbosspublic</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
        <pluginRepository>
          <id>jboss-developer</id>
          <url>http://jbosspublic</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
  </proxies>
</settings> 
```

更新1：

当我运行 mvn help:effective-pom 我看到这个片段

```
 <distributionManagement>
    <repository>
      <id>jboss-releases-repository</id>
      <name>JBoss Releases Repository</name>
      <url>https://repository.jboss.org/nexus/service/local/staging/deploy/maven2/</url>
    </repository>
    <snapshotRepository>
      <id>jboss-snapshots-repository</id>
      <name>JBoss Snapshots Repository</name>
      <url>https://repository.jboss.org/nexus/content/repositories/snapshots/</url>
    </snapshotRepository>
  </distributionManagement> 
```

和这个：

```
<jboss.releases.repo.url>https://repository.jboss.org/nexus/service/local/staging/deploy/maven2/</jboss.releases.repo.url>
<jboss.snapshots.repo.url>https://repository.jboss.org/nexus/content/repositories/snapshots/</jboss.snapshots.repo.url> 
```

这很奇怪，因为我知道所有其他工件都可以从我的内部关系代理 repo 下载。接下来我将尝试将这些 s 添加到我的 /.m2/settings.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:03:50.750

下载这些依赖项是因为它们不是 Maven 构建的一部分，而是测试套件的一部分。其中 testsuite 动态加载以前版本组件的 maven 依赖项，以便它可以测试与以前版本的兼容性。

查看有关如何/在何处完成的[源代码](https://github.com/jbossas/jboss-as/blob/master/model-test/src/main/java/org/jboss/as/model/test/MavenUtil.java#L179)

# oracle - 甲骨文：DBMS_LDAP。如何保护存储过程中的密码

> ID：14261595
> 
> 赞同：0
> 
> 时间：2013-01-10T15:40:59.280
> 
> 标签：oracle, security, passwords

我正在使用 oracle DBMS_LDAP 模块执行任务，并且需要保护该过程。

在建立会话和连接的调用中，我需要提供密码。

```
 l_retval := DBMS_LDAP.simple_bind_s(ld     => l_session,
                                      dn     => l_ldap_user,
                                      passwd => l_ldap_passwd); 
```

我还需要保护这个密码不让其他人得到它......那该怎么做呢？

我虽然可以将密码放在安全表中.. 可以工作。不过，我需要每个人都可以使用此程序..所以我不确定它是如何工作的。

我不确定我的选择是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:11:11.393

您可以使用“包装工具”包装（混淆）您的过程，但 Oracle 声明：

*“包装 PL/SQL 源文本不是隐藏密码或表名的安全方法。要获得高保证的安全性，请使用 Oracle Database Vault，如 Oracle Database Vault 管理员指南中所述。”*

```
create or replace procedure p
as
  l_password varchar2(100);
begin
  l_password := 'mysupersecretpassord';
end;
/

me@XE> @source p

SOURCE
--------------------------------------------------------------------------------

CREATE OR REPLACE PROCEDURE "ME"."P" as   l_password varchar2(100);
begin   l_password := 'mysupersecretpassord'; end;

$ wrap iname=p.prc

PL/SQL Wrapper: Release 11.2.0.2.0- 64bit Production on Sun Jan 13 08:37:42 2013

Copyright (c) 1993, 2009, Oracle.  All rights reserved.

Processing p.prc to p.plb

me@XE> @p.plb

Procedure created.

me@XE> @source p

SOURCE
--------------------------------------------------------------------------------

CREATE OR REPLACE PROCEDURE "ME"."P" wrapped
a000000
369
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd

abcd
abcd
abcd
abcd
abcd
abcd
7
5e 96
VoaqA4NZ8B46JZ/ptgsDoULsSlwwg5nnm7+fMr2ywFwWj8B0iwlp
pfQouHTLy/4owMznx3TA
M7h0ZSV8IXxQoIvAwDL+0oRcOAEKDkG6k3GjyKPDbuxxiaMJyFRxbg+JUUj
XQ/zB4Nempk3k
q6k= 
```

# jquery - 在 Web2py 中将对象从视图发送到功能控制器

> ID：14261605
> 
> 赞同：1
> 
> 时间：2013-01-10T15:41:26.293
> 
> 标签：jquery, ajax, json, web2py

我试图以与以下相同的方式将对象从视图发送到控制器（Web2py）：

[如何使用 JQuery Ajax 将 JSON 对象传递给 web2py](https://stackoverflow.com/questions/1719244/how-to-pass-a-json-object-to-web2py-using-jquery-ajax)

ajax部分是：

```
var testObject = {};
testObject.value1 = "value1value!";
testObject.value2 = "value2value!";

var DTO = { 'testObject' : testObject };

var data = $.toJSON(DTO);    //Using the toJSON plugin by Mark Gibson

 $.ajax({
    type: 'POST',
    url: '/Myapplication/controllers/jsontest.json',
    contentType: "application/json; charset=utf-8", 
    data: data,
    dataType: 'json',
success:  function(data){  alert('yay'); }
}); 
```

并且函数 jsontest 在 /Myapplication/controllers/default.py 我有

```
def jsontest():
   import gluon.contrib.simplejson
   data = gluon.contrib.simplejson.loads(request.body.read())
   return dict() 
```

做同样的测试我得到了一个很好的字符串。我在[https://sites.google.com/site/jollytoad/json.js?attredirects=0](https://sites.google.com/site/jollytoad/json.js?attredirects=0)`var data = $.toJSON(DTO);` 得到了 json.js

但没有任何东西传输到 jsontest 函数。谁能解释我有什么问题？我觉得我的网址可能不好......等等谢谢你的回答......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:15:44.203

```
url: '/Myapplication/controllers/jsontest.json' 
```

以上不是有效的 web2py URL（“控制器”是保存控制器文件的文件夹的名称，但它没有出现在 URL 中）。正确的 URL 是：

```
url: '/Myapplication/default/jsontest.json' 
```

如果 Javascript 在 web2py 视图文件中（而不是单独的 .js 文件），那么生成 URL 的首选方法是通过`URL()`函数：

```
url: '{{=URL('default', 'jsontest.json')}}' 
```

[有关更多详细信息，请参阅有关调度](http://web2py.com/books/default/chapter/29/04#Dispatching)和[`URL()`函数](http://web2py.com/books/default/chapter/29/04#URL)的书籍部分。

请注意，您的代码假定存在 /views/default/jsontest.json 视图文件或您已启用 generic.json 视图（有关更多详细信息，请参见[此处](http://web2py.com/books/default/chapter/29/10#Generic-views)）。但是， jsontest() 函数实际上并不向视图返回任何内容或对 JSON 数据执行任何操作。

# mediaelement.js - Mediaelement.js 纵横比 2.35

> ID：14261606
> 
> 赞同：1
> 
> 时间：2013-01-10T15:41:31.223
> 
> 标签：mediaelement.js

当使用 Yootheme 的 widgetkit 中的媒体播放器（使用 Mediaelement.js）时，我注意到该脚本根据海报框架的宽度计算视频播放器的高度。

我已将海报框架的宽度设置为 940 像素，Mediaelement.js 将高度添加为 528 像素。如果视频和海报图像的纵横比是 16:9，那通常是可以的。但是，我在 2.35 工作。

由于具有响应式模板，我无法设置包含视频的 div 的高度，因为这会在平板电脑/手机上查看时影响模板。

是否可以更改 Mediaelement.js 中的计算以反映纵横比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T19:43:52.807

我在这方面并没有过多的描述，但是如果您以 JS（而不是 jquery 方法）的方式初始化，那么您可以使用 MEjs 必须提供的方法：

setVideoSize，设置视频大小。setPlayerSize，设置播放器大小。

```
meVideo.media.setVideoSize( screen.width , screen.height);
meVideo.setPlayerSize( screen.width , screen.height); 
```

JS：

```
meVideo = new MediaElementPlayer('#mediaElement',{
            defaultVideoWidth: '100%',
            defaultVideoHeight: '100%',
            videoWidth: '100%',
            videoHeight: '100%',
            loop: false,
            enableAutosize: true,
            features: ['playpause','progress','current','duration','tracks','volume'],
            success: function(media, node, player) {
                 var events = ['loadstart', 'play','pause', 'ended', 'loadeddata', 'loadedmetadata', 'progress', 'canplay'];
                 for(var i=0, il=events.length; i<il; i++){
                    var eventName = events[i];
                    media.addEventListener(events[i], function(e) {
                        console.log(eventName);
                    });
                 };

            },
            error: function () { 
                console.log('Error Loading Video');
            }
        }); 
```

html:

```
<video id="mediaElement" poster="{{image.src}}" controls="controls" preload="auto">
                <!-- MP4 source must come first for iOS -->
                <source type="video/mp4" src="{{mp4_url}}" />
                <!-- WebM for Firefox 4 and Opera -->
                <source type="video/webm" src="{{webm_url}}" />
                <!-- OGG for Firefox 3 -->
                <source type="video/ogg" src="{{ogg_url}}" />
                <source type="video/flv" src="{{flv_url}}" />
                <!-- Fallback flash player for no-HTML5 browsers with JavaScript turned off -->
                <object scale="noborder" allowFullScreen="false" type="application/x-shockwave-flash" data="{{ STATIC_URL }}js_scss/libs/mediaelement/flashmediaelement.swf">       
                    <param name="movie" value="{{ STATIC_URL }}js_scss/libs/mediaelement/flashmediaelement.swf" /> 
                    <param name="flashvars" value="controls=true&poster={{image.src}}&file={{flv_url}}" />      
                    <!-- Image fall back for non-HTML5 browser with JavaScript turned off and no Flash player installed -->
                    <img src="{{image.src}}" alt="{{image.credit}}" title="No video playback capabilities" />
                </object>
        </video> 
```

# iphone - 在 Facebook 墙上发布照片时出错

> ID：14261608
> 
> 赞同：0
> 
> 时间：2013-01-10T15:41:32.553
> 
> 标签：iphone, objective-c

嗨，我已经在目标 c 中实现了 facebook graph api，并遇到了这样的错误

```
dictionary , {
    error =     {
        code = 190;
        message = "Malformed access token AAAGKSrZBYyhABALuirFQZAdHsWE5hqMvr8f7RoVqPSW7Rvtkh1T98gBcT93C5htSLt8XM8WvTF8JRZBI6HnjkEZAlLhc9EgQEecFZC5jHwQZDZD&expires_in=5159421";
        type = OAuthException;
    };
}
2013-01-10 20:33:06.665 FBFun[3325:11303] Photo id is: (null)
2013-01-10 20:33:20.448 FBFun[3325:11303] Got Facebook Photo: {"error":{"message":"(#803) Some of the aliases you requested do not exist: (null)","type":"OAuthException","code":803}} 
```

每个工作文件我都可以从 facebook 获取我的所有个人资料信息，但无法在 facebook 墙上发布照片我也已经从这个网站 [http://www.raywenderlich.com/1626/how-to-post-to实施了这些教程-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app) 如果您知道如何发布照片，请告诉我

# jquery - 将按钮绑定到 JSONP 请求

> ID：14261610
> 
> 赞同：0
> 
> 时间：2013-01-10T15:42:01.230
> 
> 标签：jquery, jsonp

我正在尝试绑定`$('#pics').click(function()){`以激活以下基本 JSONP 请求：

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?",
        function(data){
          $.each(data.items, function(i,item){
            $("<img/>").attr("src", item.media.m).appendTo("#images");
            if ( i == 3 ) return false;
          });
        });
  }); 
```

HTML：

```
<body>
<button name="pics" id="pics">Pics</button>

<div id="images">
</div> 
```

这个想法是有一个具有不同按钮和请求的页面，但我无法获得执行该功能的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:43:50.520

试试这个 ：

```
 $('#pics').on('click',function(){

        $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne? tags=cat&tagmode=any&format=json&jsoncallback=?",
         function(data){
          $.each(data.items, function(i,item){
            $("<img/>").attr("src", item.media.m).appendTo("#images");
            if ( i == 3 ) return false;
          });
        });
       });

    }); 
```

# cpu - 系统启动时哪个内核首先初始化？

> ID：14261612
> 
> 赞同：8
> 
> 时间：2013-01-10T15:42:02.403
> 
> 标签：cpu, bootloader

我想知道 CPU 启动时多核处理器的哪个内核首先初始化？（我的意思是在引导加载程序级别）是第一个核心？还是随机核心？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T19:13:17.103

您想阅读本地 apic，您可以在“第 2a 卷”中阅读：

[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

每个处理器都有一个对应的本地 apic，在每个本地 apic 中都有一个 apic ID 寄存器，它在系统初始化时被分配一个唯一值。

上线的初始内核称为引导处理器 (BSP)，实际上可以是裸片上的任何物理内核。更多信息在“第 3a 卷”中，他们讨论了引导处理器选择过程。

以下是 vol3a 的摘录：

> **8.4.1 BSP 和 AP 处理器**
> 
> MP 初始化协议定义了两类处理器：引导处理器 (BSP) 和应用处理器 (AP)。在 MP 系统上电或复位后，系统硬件会动态选择系统总线上的一个处理器作为 BSP。其余处理器被指定为 AP。
> 
> 作为 BSP 选择机制的一部分，在 BSP 的 IA32_APIC_BASE MSR（见图 10-5）中设置 BSP 标志，表明它是 BSP。对于所有其他处理器，该标志被清除。
> 
> BSP 执行 BIOS 的引导代码以配置 APIC 环境，设置系统范围的数据结构，并启动和初始化 AP。当 BSP 和 AP 被初始化时，BSP 开始执行操作系统初始化代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:50:55.153

这取决于处理器本身的架构。这样的事情并没有真正的标准。例如，PS3 核心有 9 个核心，其中一个将任务安排给其他 8 个。在这种情况下，可以公平地考虑一个核心在另一个 8 之前处理指令。就其他处理器而言，这是一个更难分辨的东西。假设引导加载程序将其指令发送到内核集是明智的，此时无论逻辑门将指令分配给内核，都以它们总是以任何方式这样做。在大多数情况下，我知道启动时的任务调度和任何其他时间的任务调度并没有真正的区别。最基本的任务调度硬件只会选择第一个可用的核心，通常是被认为是“第一个”的核心 一个由机器。但是就像我一直说不同的机器做不同的事情一样，所以我建议找出你正在使用的内核并检查那个内核的作用。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-27T19:39:08.073

每个处理器都有自己的本地 APIC 和相关的本地 APIC ID，这个可以从本地 APIC 寄存器中读取（同一个在每个处理器上给出不同的 ID）

# python - 如何为 Python 安装 yaml 包？

> ID：14261614
> 
> 赞同：420
> 
> 时间：2013-01-10T15:42:03.043
> 
> 标签：python, python-2.7, yaml, pip, pyyaml

我有一个使用 YAML 的 Python 程序。我尝试使用它在新服务器上安装它`pip install yaml`，它返回以下内容：

```
$ sudo pip install yaml
Downloading/unpacking yaml
  Could not find any downloads that satisfy the requirement yaml
No distributions at all found for yaml
Storing complete log in /home/pa/.pip/pip.log 
```

如何为 Python 安装 yaml 包？我正在运行 Python 2.7。（操作系统：Debian Wheezy）

* * *

## 回答 #1

> 赞同：684
> 
> 时间：2013-01-10T16:21:59.333

你可以试试pip中的搜索功能，

```
$ pip search yaml 
```

它在简短描述中使用 yaml 在 PyPI 中查找包。这揭示了各种包，包括 PyYaml、yamltools 和 PySyck 等（请注意，[PySyck 文档](http://pyyaml.org/wiki/PySyck)建议使用 PyYaml，因为 syck 已过时）。现在你知道了一个特定的包名，你可以安装它：

```
$ pip install pyyaml 
```

如果你想在 linux 系统范围内安装 python yaml，你也可以使用包管理器，比如`aptitude`或`yum`：

```
$ sudo apt-get install python-yaml
$ sudo yum install python-yaml 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-01-10T15:42:03.043

`pip install pyyaml`

如果您没有 pip，请运行`easy_install pip`以安装 pip，这是首选软件包安装程序 -[为什么使用 pip 而不是 easy_install？](https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install). 如果您更喜欢坚持使用 easy_install，那么`easy_install pyyaml`

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2014-01-23T19:49:22.233

### This answers if for MacOS

**Update:** Nowadays installing is done with pip, and for many users [a wheel](https://pip.pypa.io/en/stable/user_guide/#installing-from-wheels) may be available (depending on your Mac and required version of [PyYaml](https://pypi.org/project/PyYAML/#files)). In some cases [libyaml](https://pyyaml.org/wiki/LibYAML) is still required to build the C extension (on mac); this can be done with:

```
brew install libyaml
python -m pip install pyyaml 
```

* * *

*Outdated method*:

For MacOSX (mavericks), the following works:

```
brew install libyaml
sudo python -m easy_install pyyaml 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-05-12T15:58:56.140

```
pip install PyYAML 
```

如果未找到或编译 libyaml，PyYAML 可以在 Mavericks 上不使用它。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-03-30T19:17:17.853

有三个支持 YAML 的包。Syck ( `pip install syck`) 从 2002 年开始实施 YAML 1.0 规范；PyYAML ( `pip install pyyaml`) 遵循 2004 年的 YAML 1.1 规范；和[ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml/)遵循最新的（YAML 1.2，从 2009 年开始）规范。

您可以安装 YAML 1.2 兼容软件包，`pip install ruamel.yaml`或者如果您正在运行现代版本的 Debian/Ubuntu（或衍生版本），请使用：

```
sudo apt-get install python-ruamel.yaml 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-02-19T18:56:48.850

以下命令将下载`pyyaml`，其中还包括`yaml`

```
pip install pyYaml 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-08-12T13:11:24.183

基于 Debian 的系统：

`$ sudo aptitude install python-yaml`

或更新的python3

`$ sudo aptitude install python3-yaml`

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-07-24T08:50:39.220

“应该有一种——最好只有一种——明显的方法来做到这一点。” 所以让我再添加一个。这个更像是 Debian/Ubuntu 的“从源代码安装”，来自[https://github.com/yaml/pyyaml](https://github.com/yaml/pyyaml)

安装 libYAML 及其标头：

```
sudo apt-get install libyaml-dev 
```

[下载](http://pyyaml.org/download/pyyaml)pyyaml 源代码：

```
wget http://pyyaml.org/download/pyyaml/PyYAML-3.13.tar.gz 
```

从源安装，（不要忘记激活你的 venv）：

```
. your/env/bin/activate
tar xzf PyYAML-3.13.tar.gz
cd PyYAML-3.13.tar.gz
(env)$ python setup.py install
(env)$ python setup.py test 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-05-28T20:01:08.730

# 考虑改用[strictyaml](https://pypi.org/project/strictyaml/)

如果您有幸自己创建 yaml 文件，或者您不需要常规 yaml 的[任何这些功能](https://hitchdev.com/strictyaml/features-removed/)，我建议您使用[`strictyaml`](https://pypi.org/project/strictyaml/)而不是标准`pyyaml`包。

简而言之，默认的 yaml 在安全性、接口和可预测性方面存在一些严重缺陷。`strictyaml`是没有这些问题的 yaml 规范的一个子集（并且有更好的文档记录）。

您可以在此处阅读有关[常规 yaml 问题的更多信息](https://arp242.net/yaml-config.html)

**意见：** `strictyaml`应该是 yaml 的默认实现，旧的 yaml 规范应该被废弃。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-14T22:07:34.160

输入 pip3 install yaml 或类似 Connor pip3 install strictyaml

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-18T11:27:28.637

对我来说，安装 libyaml 的开发版本就可以了。

```
yum install libyaml-devel         #centos
apt-get install libyaml-dev       # ubuntu 
```

# backbone.js - 在 Backbone 视图中未调用渲染

> ID：14261616
> 
> 赞同：1
> 
> 时间：2013-01-10T15:42:07.073
> 
> 标签：backbone.js

这是我的骨干：

```
App.Models.Count = Backbone.Model.extend({
        url: this.url,
        initialize: function() {
            this.fetch({
                success: function(data, response) {
                    this.count = data.get('count');
                    console.log(this.count);  // 9, correct answer
                }
            });
        }
    });

    App.Views.Count = Backbone.View.extend({
        tagName: 'span',
        initialize: function(options) {
            this.count = this.options.count;
            console.log(options);  // returns correctly
            this.model.on('reset', this.render, this);
        },
        render: function() {
            console.log('test'); // not called
            this.$el.html(this.model.toJSON());
            return this;
        }
    }); 
```

在我的路线中：

```
var mc = new (App.Models.Count.extend({'url' : 'main-contact-count'}))();
var mcv = new (App.Views.Count.extend({ model: mc }))();
console.log(mcv); // 9, correct answer
$('#contactCount').html(mcv); 
```

如您所见，我的`render`方法永远不会被调用。此外，根据我在 Firebug 中看到的 console.log 内容，我的视图似乎在我的模型之前被调用。是因为异步吗？为什么不`render`叫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:08:15.367

您正在以一种时髦的方式使用 Backbone。这是执行此操作的更标准方法：

```
App.Models.Count = Backbone.Model.extend({
    urlRoot: "main-contact-count"
});

App.Views.Count = Backbone.View.extend({
    tagName: 'span',
    initialize: function(options) {
        this.model.on('change', this.render, this);
    },
    render: function() {
        console.log('test');
        this.$el.html(this.model.toJSON());
        return this;
    }
}); 
```

在路由器中：

```
var mc = new App.Models.Count();
var mcv = new App.Views.Count({model: mc});
mc.fetch();
$('#contactCount').html(mcv.el); 
```

编辑

事实证明，您正在收听 Backbone 模型上的“重置”。这永远不会发生。尝试听“改变”而不是重置：

```
this.model.on('change', this.render, this); 
```

# r - 子集 R 数据框导致神秘的 NA 行

> ID：14261619
> 
> 赞同：68
> 
> 时间：2013-01-10T15:42:20.060
> 
> 标签：r, subset, reshape, na

我一直在遇到我认为的错误。这没什么大不了的，但我很好奇是否有其他人看到过。不幸的是，我的数据是机密的，所以我必须编造一个例子，这不会很有帮助。

在对我的数据进行子集化时，我偶尔会得到原始数据框中没有的神秘 NA 行。甚至行名也是 NA。例如：

```
example <- data.frame("var1"=c("A", "B", "A"), "var2"=c("X", "Y", "Z"))
example

  var1 var2
1    A    X
2    B    Y
3    A    Z 
```

然后我运行：

```
example[example$var1=="A",]

  var1 var2
1    A    X
3    A    Z
NA<NA> <NA> 
```

当然，上面的例子实际上并没有给你这个神秘的 NA 行；我在这里添加它是为了说明我的数据遇到的问题。

[也许这与我使用Google 的 read.xlsx 包](http://cran.r-project.org/web/packages/xlsx/xlsx.pdf)导入我的原始数据集，然后在子集之前执行宽到长整形有关。

谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-05-20T16:17:11.973

将条件包装在`which`：

```
df[which(df$number1 < df$number2), ] 
```

* * *

**这个怎么运作：**

它返回条件匹配的行号（条件为`TRUE`）并相应地对这些行上的数据框进行子集化。

比如说：

```
which(df$number1 < df$number2) 
```

返回行号`1`、`2`、`3`和.`4``5`

因此，写作：

```
df[which(df$number1 < df$number2), ] 
```

和写法一样：

```
df[c(1, 2, 3, 4, 5), ] 
```

或者更简单的版本是：

```
df[1:5, ] 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-12-15T18:56:13.320

我看到 OP 已经回答了这个问题，但是由于他的评论深埋在评论部分，这是我解决这个问题的尝试（至少使用我的数据，它的行为方式相同）。

首先，一些示例数据：

```
> df <- data.frame(name = LETTERS[1:10], number1 = 1:10, number2 = c(10:3, NA, NA))
> df
   name number1 number2
1     A       1      10
2     B       2       9
3     C       3       8
4     D       4       7
5     E       5       6
6     F       6       5
7     G       7       4
8     H       8       3
9     I       9      NA
10    J      10      NA 
```

现在是一个简单的过滤器：

```
> df[df$number1 < df$number2, ]
     name number1 number2
1       A       1      10
2       B       2       9
3       C       3       8
4       D       4       7
5       E       5       6
NA   <NA>      NA      NA
NA.1 <NA>      NA      NA 
```

这里的问题是`NA`第三列中 s 的存在导致 R 将整行重写为`NA`。尽管如此，数据框尺寸仍然保持不变。这是我的修复，它需要知道哪一列包含`NA`s：

```
> df[df$number1 < df$number2 & !is.na(df$number2), ]
  name number1 number2
1    A       1      10
2    B       2       9
3    C       3       8
4    D       4       7
5    E       5       6 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-05-07T13:58:09.490

使用与您发布的代码类似的代码时，我遇到了同样的问题。使用函数子集（）

```
subset(example,example$var1=="A") 
```

NA 行反而被排除在外。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-28T22:42:37.453

使用 dplyr：

```
library(dplyr)
filter(df, number1 < number2) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-05T07:42:04.120

我发现使用 %in$ 而不是 == 可以解决这个问题，尽管我仍然想知道为什么。例如，代替： df[df$num == 1,] 使用： df[df$num %in% c(1),] 将起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-12T09:54:44.997

```
 > example <- data.frame("var1"=c("A", NA, "A"), "var2"=c("X", "Y", "Z"))
    > example
      var1 var2
    1    A    X
    2 <NA>    Y
    3    A    Z
    > example[example$var1=="A",]
       var1 var2
    1     A    X
    NA <NA> <NA>
    3     A    Z 
```

**可能这一定是您期望的结果...试试这个尝试在条件之前使用哪个条件来避免 NA**

```
 example[which(example$var1=="A"),]
      var1 var2
    1    A    X
    3    A    Z 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-20T11:10:13.260

另一个原因可能是条件错误，例如检查因子列是否等于不在其级别中的值。困扰了我一阵子。

# vba - 如何创建文件名中包含特殊字符的文本文件

> ID：14261632
> 
> 赞同：2
> 
> 时间：2013-01-10T15:42:46.743
> 
> 标签：vba, excel-2003, createfile

*演示我的问题*

*   打开一个新的 Excel 工作簿并将这些符号设计师协会保存到单元格 [A1]
*   在编辑器中的某处插入以下 VBA 代码 ( `Alt`+ `F11`)
*   每行执行它 ( `F8`)

```
子测试（）

    strCRLF = StrConv(vbCrLf, vbUnicode)
    strSpecialchars = StrConv（单元格（1, 1），vbUnicode）
    strFilename = "c:\test.txt"

    打开 strFilename 以输出为 #1
    打印 #1, strSpecialchars & strCRLF;
    关闭 #1

结束子
```

您将获得一个包含 [A1] 中的中文字符的文本文件。如果您知道添加的技巧，这证明 VBA 能够处理 unicode 字符`StrConv(vbCrLf, vbUnicode)`

现在尝试相同的`strFilename = "C:\" & strSpecialchars & ".txt"`. 你会得到一个错误，你不能用这个文件名创建一个文件。当然，您不能使用相同的技巧添加新行，因为它是文件名。

如何使用 VBA 创建文件名中包含特殊字符的文本文件？
有解决方法还是我做错了什么？

**笔记**

*   我正在使用 Windows 7 x64。我可以手动创建带有特殊字符的文本文件
*   我找到了[使用 FileSystemObject 的第二种方法](http://www.excelforum.com/excel-programming-vba-macros/394470-write-line-problem-when-writing-simplified-chinese-characters.html?p=1060414&viewfull=1)。但我希望我可以避免设置[对 VB 脚本运行时库的引用](https://stackoverflow.com/questions/3233203/how-do-i-use-filesystemobject-in-vba)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T11:24:35.913

从单元格中检索到的值已经是 Unicode。

`StrConv(vbUnicode)`为您提供“双 unicode”，该代码已损坏，因为它使用当前系统代码页进行了转换。
然后该`Print`命令将其转换回“单一 unicode”，再次使用当前系统代码页。不要这样做。您不是在保存 unicode，而是在保存无效的东西，这些东西可能只在您当前设置下的特定计算机上显示有效。

如果要输出 Unicode 数据（即避免默认的 VB 将输出文本从 Unicode 自动转换为 ANSI 的机制），您有多种选择。

最简单的方法是在`FileSystemObject`不尝试发明任何有关 unicode 转换的情况下使用：

```
With CreateObject("Scripting.FileSystemObject")
  With .CreateTextFile("C:\" & Cells(1).Value & ".txt", , True)
    .Write Cells(1).Value
    .Close
  End With
End With 
```

请注意控制 Unicode 的最后一个参数。

如果你不想这样，你可以声明`CreateFileW`和`WriteFile`函数：

```
Private Declare Function CreateFileW Lib "kernel32.dll" (ByVal lpFileName As Long, ByVal dwDesiredAccess As Long, ByVal dwShareMode As Long, ByRef lpSecurityAttributes As Any, ByVal dwCreationDisposition As Long, ByVal dwFlagsAndAttributes As Long, ByVal hTemplateFile As Long) As Long
Private Declare Function CloseHandle Lib "kernel32.dll" (ByVal hObject As Long) As Long
Private Declare Function WriteFile Lib "kernel32.dll" (ByVal hFile As Long, ByRef lpBuffer As Any, ByVal nNumberOfBytesToWrite As Long, ByRef lpNumberOfBytesWritten As Long, ByRef lpOverlapped As Any) As Long

Private Const CREATE_ALWAYS As Long = 2
Private Const GENERIC_WRITE As Long = &H40000000 
```

```
Dim hFile As Long
hFile = CreateFileW(StrPtr("C:\" & Cells(1).Value & ".txt"), GENERIC_WRITE, 0, ByVal 0&, CREATE_ALWAYS, 0, 0)

Dim val As String
val = Cells(1).Value

WriteFile hFile, &HFEFF, 2, 0, ByVal 0&  'Unicode byte order mark (not required, but to please Notepad)
WriteFile hFile, ByVal StrPtr(val), Len(val) * 2, 0, ByVal 0&

CloseHandle hFile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T10:53:34.363

您在 FileSystemObject 的正确轨道上。正如 Morbo 提到的，您可以后期绑定它，因此没有设置参考。FSO 有一个 CreateTextFile 函数，可以在 unicode 中设置，因此字符将显示为 '??????' 在 VBA 中，但会正确写入文件名。请注意 CreateTextFile 函数的第二个参数指定文件名的 unicode 字符串。以下将为您解决问题：

```
Sub test()
    Dim strCRLF As String, strSpecialchars As String, strFilename As String
    Dim oFSO As Object, oFile As Object

    strCRLF = StrConv(vbCrLf, vbUnicode)
    strSpecialchars = StrConv(Cells(1, 1), vbUnicode)
    strFilename = "C:\" & Cells(1, 1).Value & ".txt"

    Set oFSO = CreateObject("Scripting.FileSystemObject")
    Set oFile = oFSO.CreateTextFile(strFilename, , True)

    oFile.Write strSpecialchars & strCRLF

    oFile.Close

    Set oFile = Nothing
    Set oFSO = Nothing
End Sub 
```

# javascript - HTML 文档中没有定义 JavaScript 函数，为什么不呢？

> ID：14261634
> 
> 赞同：0
> 
> 时间：2013-01-10T15:42:54.323
> 
> 标签：javascript

我正在编写一个程序，该程序允许用户输入电话号码并根据一些条件告诉用​​户它是否被接受/拒绝。我已经计算出了进行计算的函数，但我无法让 JavaScript 与 HTML 文档一起工作：它没有被找到。

这是两个代码：（JS然后HTML）：

```
function testanummer(nummer){
    nummer = document.getElementById("a").value;
    if isNaN(nummer){
        console.log("Hi! This phone number appears faulty, please try again.");
    } else if (nummer.length <=8) && else if (nummer.length >=14) {
        console.log("Thanks! We'll be in touch shortly.");
    } else {
        console.log("Hi! This phone number appears faulty, please try again.");
    } 
```

HTML：

```
<html>
<head>
    <title> Uppgift nummer 5</title>

    <script src="testanummer.js"></script>
</head> 

<body>
    <form>
        <label for="a">Skriv in ditt telefonnummer här: </label>
        <input type="text" name="nummer" id="a">
        <input type = "button" value ="Testa telefonnummer" onclick="testanummer(nummer);">
    </form>
</body>
</html> 
```

知道为什么它不起作用吗？我收到此错误：

> 未捕获的 SyntaxError：意外的标识符

和：

> 未捕获的 ReferenceError：未定义 testanummer

任何想法为什么它不起作用？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:46:59.700

代码中有两个语法错误。第一个语法错误在这里：

```
if isNaN(nummer){ 
```

它应该是：

```
if (isNaN(nummer)) { 
```

第二个语法错误在这一行：

```
} else if (nummer.length <=8) && else if (nummer.length >=14) { 
```

语法应该是：

```
} else if (nummer.length <= 8  && nummer.length >= 14) { 
```

但是，似乎您的条件倒退了，我认为这就是您的意思：

```
} else if (nummer.length >= 8  && nummer.length <= 14) { 
```

调用函数时，您应该从文本框中获取值，而不仅仅是对它的引用。此外，并非所有浏览器都将输入字段放在全局范围内，请使用表单访问该字段：

```
<input type = "button" value ="Testa telefonnummer" onclick="testanummer(this.form.nummer.value);"> 
```

然后你可以跳过`nummer`函数中变量的赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:47:39.753

两个错误：

```
} else if ((nummer.length <=8) && else if (nummer.length >=14)) { 
```

将其更改为（即使您的条件是错误的......比 8 短且比 14 长？）：

```
} else if ((nummer.length <=8) && (nummer.length >=14)) { 
```

你在事件处理程序中有一个错误`onclick`：

```
onclick="testanummer(nummer);" 
```

应该：

```
onclick="testanummer(this.form.nummer.value);" 
```

或者如果从函数中删除参数（因为你无论如何都在函数中检索它）甚至：

```
onclick="testanummer();" 
```

所以你最终的 .js 文件应该是：

```
function testanummer(nummer){
    nummer = document.getElementById("a").value;
    if (isNaN(nummer)) {
        console.log("Hi! This phone number appears faulty, please try again.");
    } else if ((nummer.length <=8) && (nummer.length >=14)) {  //HAVE A LOOK AT THIS CONDITION
        console.log("Thanks! We'll be in touch shortly.");
    } else {
        console.log("Hi! This phone number appears faulty, please try again.");
    }
} 
```

# r - 如何使 write.table 保留暗名？

> ID：14261636
> 
> 赞同：3
> 
> 时间：2013-01-10T15:43:01.673
> 
> 标签：r

我需要将多个表保存在一个 CSV 文件中，并且很难看到如何保留维度名称。我搜索了 SO，发现最接近的是： [如何在 xtable.table 输出中获取暗名？](https://stackoverflow.com/questions/12800784/how-to-get-dimnames-in-xtable-table-output) 他对 xtable 的问题是我对 write.table 的问题——表中存在暗名（如果我使用它，还有 prop.table 和 ftable），但被 write.table 删除。我使用 write.table 而不是 write.csv 来表示 append=T。

该数据集来自一项调查，目的是创建带有标记轴的完整交叉表集。在这种情况下，实际的行/列标签并不重要，只有维度标签。我是 R 新手，所以希望我没有错过一些明显的东西。

```
d<-read.csv('dataset.csv')  # dataset with column headings, no row labels
cat('BEGIN\n',file='xtabs.csv')
for (i in 1:ncol(d)) {
    for (j in 1:ncol(d)) {
        cat(paste('\ni=',i,' j=',j,'\n'),file='xtabs.csv',append=T)
        t<-table(d[,i],d[,j],dnn=c(names(d[i]),names(d[j])))
        pt<-prop.table(t,1)
        write.table(pt,'xtabs.csv',sep=',',dec='.',row.names=F,col.names=F,append=T)
        print(pt)   # shows dimnames in the console as expected
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:46:52.390

尝试这个：

```
tbl <- with(warpbreaks, table(wool, tension))
pt <- prop.table(tbl)
write.ftable(ftable(pt),file = "~/Desktop/table.csv", sep = ",",
             quote = FALSE) 
```

我可能`ftable`在这里滥用了 s，它用于多维表格数据（即两个以上的变量）。但这是我发现的唯一一种将表格写入文本文件的（看似）你想要的格式的东西。

# printing - 使用 XSL 在 A4 以外的纸张上打印

> ID：14261644
> 
> 赞同：0
> 
> 时间：2013-01-10T15:43:19.547
> 
> 标签：printing, xsl-fo

我需要使用 XSL 生成一封信并将其打印到非 A4 大小的页面上。

我尝试设置页面高度和页面宽度，但这只是设置工作区域并且不包含任何纸张尺寸信息。因此，当我通过 Adob​​e Reader 查看时，页面尺寸仍然是 A4 大小。

在我的 xsl 中，我目前有以下内容

```
 <xsl:template name="LAYOUT-SETUP">
  <fo:layout-master-set>
    <fo:simple-page-master master-name="first-page" page-height="55mm" page-width  ="85mm" margin-top="5mm" margin-bottom="4mm" margin-left="3mm" margin-right="3mm">
    <fo:region-body />
    <fo:region-before extent="0mm" region-name="xsl-region-before-first"/>
    <fo:region-after extent="0mm"/>
  </fo:simple-page-master> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:08:23.103

似乎您在任何地方都发现了正确的页面...看看一些示例如何在[http://www.learn-xsl-fo-tutorial.com/Page-Layout.cfm#h1 中定义 FO 的页面设置。 1](http://www.learn-xsl-fo-tutorial.com/Page-Layout.cfm#h1.1)

# algorithm - 使用递归查找数组中的第二大元素

> ID：14261646
> 
> 赞同：0
> 
> 时间：2013-01-10T15:43:44.573
> 
> 标签：algorithm, sorting, data-structures, recursion

正如标题所说，是否有任何有效的方法可以使用递归找到数组中的第二大元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:50:52.970

**[基于分区的选择算法](http://en.wikipedia.org/wiki/Selection_algorithm#Partition-based_general_selection_algorithm)本质上是递归的**，它可以让您选择`k`数组中的第 'th 个元素，因此使用它 - 您实际上可以找到任何的答案`k`，包括`k = n-1`（您的情况）。

`O(n)`平均而言，这是在相当低的常数下完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:48:13.470

如果对数组一无所知`O(n)`，无论是递归还是迭代，你都不能做得更好。

只需递归地传递数组，同时传递两个最大的元素并在找到更大的值时替换它们。

```
find_largest(array_begin, largest, secondLargest)
    if (array_begin = NULL)
       return secondLargest
    if (array_begin.value > largest)
       secondLargest = largest
       largest = array_begin.value
    return find_largest(array_begin+1, largest, secondLargest) 
```

`largest`并且`secondLargest`最初可以设置为您希望在数组中找到的最小值。

你是对的，排序（至少完全排序）是矫枉过正的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:50:53.470

`O(n)`像这样的东西：

```
int findSecondLargest(int[] arr, int index, int largest, int secondLargest) {
    if(index == arr.length) {
        return secondLargest;
    }
    int element = arr[index];
    if(element > secondLargest) {
        if(element > largest) {
            return findSecondLargest(arr, index + 1, element, largest);
        } else {
            return findSecondLargest(arr, index + 1, largest, element);
        }
    }
    return findSecondLargest(arr, index + 1, largest, secondLargest);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:55:26.467

```
 public void recurs(int[] data, int ind, int max1, int max2){
        if(ind<data.length){
            if(data[ind]>max1){
                int temp = max1;
                max1 = data[ind];
                max2 = temp;
            } else if(data[ind]>max2){
                max2 = data[ind];
            }
            recurs(data, ind+1, max1, max2);
        } else {
            return max2;
        }
        return -1;
    } 
```

调用它：recurs(dataX, 0, Integer.MIN_VALUE, Integer.MIN_VALUE);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:24:21.840

本能地，您可以扫描数组并对每个值进行两次比较。无论如何，你需要 O(n) 来解决这个问题。它足够快。

在不必要的时候尽量避免递归，因为它不是免费的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-16T10:14:39.100

如果您通过递归进行，那么您最多必须进行 3(n)/2-2 比较，但为了获得更好的解决方案，请将此问题视为具有 n 个节点的二叉树。然后将进行 n-1 比较以找到最大的和 log(n)-1 比较以找到第二大的。但有些人认为它需要 n + log(n) 比较。

# algorithm - 在Matlab中将Excel列号转换为列名

> ID：14261648
> 
> 赞同：0
> 
> 时间：2013-01-10T15:43:47.147
> 
> 标签：algorithm, excel, matlab

我使用的 Excel 2007 最多支持 16,384 列。我想获取列名对应的列号。

目前，我正在使用以下代码。但是，此代码最多支持 256 列。如果列号大于 256，知道如何获取列名。

```
function loc = xlcolumn(column)

    if isnumeric(column)
        if column>256
            error('Excel is limited to 256 columns! Enter an integer number <256');
        end
        letters = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
        count = 0;
        if column-26<=0
            loc = char(letters(column));
        else
            while column-26>0
                count = count + 1;
                column = column - 26;
            end
            loc = [char(letters(count)) char(letters(column))];
        end

    else
        letters = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
        if size(column,2)==1
            loc =findstr(column,letters);
        elseif size(column,2)==2
            loc1 =findstr(column(1),letters);
            loc2 =findstr(column(2),letters);
            loc = (26 + 26*loc1)-(26-loc2);
        end
    end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:31:52.137

作为转移，这是一个全函数句柄示例，（几乎）不需要基于文件的函数。这是基于`dec2base`函数的，因为 Excel 列名（几乎）是 26 进制数字，令人沮丧的区别是没有“0”字符。

注意：总体而言，这可能是一个糟糕的想法，但它确实有效。更好的解决方案可能在文件交换的其他地方找到。

首先，我无法绕过的一个基于文件的函数，用于执行任意深度函数组合。

```
function result = compose( fnHandles )
%COMPOSE Compose a set of functions
%    COMPOSE({fnHandles}) returns a function handle consisting of the
%    composition of the cell array of input function handles.  
%
%    For example, if F, G, and H are function handles with one input and
%    one output, then: 
%        FNCOMPOSED = COMPOSE({F,G,H});
%        y = FNCOMPOSED(x);
%    is equivalent to 
%        y = F(G(H(x)));
if isempty(fnHandles)
    result = @(x)x;
elseif length(fnHandles)==1
    result = fnHandles{1};
else
    fnOuter     = fnHandles{1};
    fnRemainder = compose(fnHandles(2:end));
    result = @(x)fnOuter(fnRemainder(x));
end 
```

然后，将base26值转换为正确字符串的奇怪的、人为的路径

```
%Functions leading to "getNumeric", which creates a numeric, base26 array
remapUpper = @(rawBase)(rawBase + (rawBase>='A')*(-55));          %Map the letters 'A-P' to  [10:26]
reMapLower = @(rawBase)(rawBase + (rawBase<'A')*(-48));          %Map characters  '0123456789' to [0:9]
getRawBase = @(x)dec2base(x, 26);

getNumeric = @(x)remapUpper(reMapLower(getRawBase(x)));

%Functions leading to "correctNumeric"
%    This replaces zeros with 26, and reduces the high values entry by 1.
%    Similar to "borrowing" as we learned in longhand subtraction
borrowDownFrom   = @(x, fromIndex) [x(1:(fromIndex-1))  (x(fromIndex)-1) (x(fromIndex+1)+26)  (x((fromIndex+2):end))];
borrowToIfNeeded = @(x, toIndex)   (x(toIndex)<=0)*borrowDownFrom(x,toIndex-1) + (x(toIndex)>0)*(x);  %Ugly numeric switch

getAllConditionalBorrowFunctions = @(numeric)arrayfun(@(index)@(numeric)borrowToIfNeeded(numeric, index),(2:length(numeric)),'uniformoutput',false);
getComposedBorrowFunction = @(x)compose(getAllConditionalBorrowFunctions(x));

correctNumeric = @(x)feval(getComposedBorrowFunction(x),x);

%Function to replace numerics with letters, and remove leading '@' (leading
%zeros)
numeric2alpha = @(x)regexprep(char(x+'A'-1),'^@','');

%Compose complete function
num2ExcelName = @(x)arrayfun(@(x)numeric2alpha(correctNumeric(getNumeric(x))), x, 'uniformoutput',false)'; 
```

现在使用一些压力转换进行测试：

```
>> num2ExcelName([1:5 23:28 700:704 727:729 1024:1026 1351:1355 16382:16384])
ans = 
'A'
'B'
'C'
'D'
'E'
'W'
'X'
'Y'
'Z'
'AA'
'AB'
'ZX'
'ZY'
'ZZ'
'AAA'
'AAB'
'AAY'
'AAZ'
'ABA'
'AMJ'
'AMK'
'AML'
'AYY'
'AYZ'
'AZA'
'AZB'
'AZC'
'XFB'
'XFC'
'XFD' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T00:34:24.673

我编写的这个函数适用于任意数量的列（直到 Excel 用完列）。它只需要输入一个列号（例如，16368 将返回一个字符串'XEN'）。

如果这个概念的应用与我的函数不同，重要的是要注意每 26^(x-1) + 26^(x-2) + ... + 26^2 + 开始一列 x 个 A 26 + 1。（例如“AAA”从 26^2 + 26 + 1 = 703 开始​​）

```
function [col_str] = let_loc(num_loc)
test = 2;
old = 0;
x = 0;
while test >= 1
    old = 26^x + old;
    test = num_loc/old;
    x = x + 1;
end
num_letters = x - 1;
str_array = zeros(1,num_letters);
for i = 1:num_letters
    loc = floor(num_loc/(26^(num_letters-i)));
    num_loc = num_loc - (loc*26^(num_letters-i));
    str_array(i) = char(65 + (loc - 1));
end
col_str = strcat(str_array(1:length(str_array)));
end 
```

希望这可以节省一些时间！

# html - 在 Tumult 炒作项目中包含 Joomla 模块

> ID：14261650
> 
> 赞同：0
> 
> 时间：2013-01-10T15:43:47.603
> 
> 标签：html, joomla, module

我目前正在使用[`Hype`](http://tumult.com/hype/).

我想做的是将某些`Joomla`模块*包含*在我的动画中。例如：我想创建一个侧边栏动画，`Hype`其中本身包含一个`joomla login module`. 我知道可以包含`HTML Widgets`在`hype`项目中，但我不知道是否可以将 a`Joomla Module`转换为`HTML Widget`.

我知道这是一个非常具体的问题，但也许这里有人已经尝试过类似的事情。

# c# - 将 Excel 工作表读入数据表的最佳/最快方法？

> ID：14261655
> 
> 赞同：44
> 
> 时间：2013-01-10T15:43:52.993
> 
> 标签：c#, .net, vb.net

我希望这里有人可以为我指明正确的方向 - 我正在尝试创建一个相当强大的实用程序来将 Excel 工作表（可能是 .xls 或 .xlsx）中的数据读取到 DataTable 中，就像可能的。

我在 VB 中提出了这个例程（尽管我对一个好的 C# 答案同样满意）：

```
Public Shared Function ReadExcelIntoDataTable(ByVal FileName As String, ByVal SheetName As String) As DataTable
    Dim RetVal As New DataTable

    Dim strConnString As String
    strConnString = "Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)};DBQ=" & FileName & ";"

    Dim strSQL As String 
    strSQL = "SELECT * FROM [" & SheetName & "$]"

    Dim y As New Odbc.OdbcDataAdapter(strSQL, strConnString)

    y.Fill(RetVal)

    Return RetVal

End Function 
```

我想知道这是否是最好的方法，或者是否有更好/更有效的方法（或者只是更智能的方法 - 也许是 Linq / 本机 .Net 提供程序）来代替使​​用？

另外，只是一个快速而愚蠢的附加问题-我是否需要包含诸如`y.Dispose()`和`y = Nothing`或将要处理的代码，因为变量应该在例程结束时消失，对吗？

谢谢！！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-05-13T18:24:43.743

如果你想基于**Ciarán 回答在 C# 中做同样的事情**

```
string sSheetName = null;
string sConnection = null;
DataTable dtTablesList = default(DataTable);
OleDbCommand oleExcelCommand = default(OleDbCommand);
OleDbDataReader oleExcelReader = default(OleDbDataReader);
OleDbConnection oleExcelConnection = default(OleDbConnection);

sConnection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Test.xls;Extended Properties=\"Excel 12.0;HDR=No;IMEX=1\"";

oleExcelConnection = new OleDbConnection(sConnection);
oleExcelConnection.Open();

dtTablesList = oleExcelConnection.GetSchema("Tables");

if (dtTablesList.Rows.Count > 0) 
{
    sSheetName = dtTablesList.Rows[0]["TABLE_NAME"].ToString();
}

dtTablesList.Clear();
dtTablesList.Dispose();

if (!string.IsNullOrEmpty(sSheetName)) {
    oleExcelCommand = oleExcelConnection.CreateCommand();
    oleExcelCommand.CommandText = "Select * From [" + sSheetName + "]";
    oleExcelCommand.CommandType = CommandType.Text;
    oleExcelReader = oleExcelCommand.ExecuteReader();
    nOutputRow = 0;

    while (oleExcelReader.Read())
    {
    }
    oleExcelReader.Close();
}
oleExcelConnection.Close(); 
```

> 这是另一种在不使用 OLEDB 的情况下快速将 Excel 读入 DataTable 的方法 请记住，文件 ext 必须是 .CSV 才能正常工作

```
private static DataTable GetDataTabletFromCSVFile(string csv_file_path)
{
    csvData = new DataTable(defaultTableName);
    try
    {
        using (TextFieldParser csvReader = new TextFieldParser(csv_file_path))
        {
            csvReader.SetDelimiters(new string[]
            {
                tableDelim 
            });
            csvReader.HasFieldsEnclosedInQuotes = true;
            string[] colFields = csvReader.ReadFields();
            foreach (string column in colFields)
            {
                DataColumn datecolumn = new DataColumn(column);
                datecolumn.AllowDBNull = true;
                csvData.Columns.Add(datecolumn);
            }

            while (!csvReader.EndOfData)
            {
                string[] fieldData = csvReader.ReadFields();
                //Making empty value as null
                for (int i = 0; i < fieldData.Length; i++)
                {
                    if (fieldData[i] == string.Empty)
                    {
                        fieldData[i] = string.Empty; //fieldData[i] = null
                    }
                    //Skip rows that have any csv header information or blank rows in them
                    if (fieldData[0].Contains("Disclaimer") || string.IsNullOrEmpty(fieldData[0]))
                    {
                        continue;
                    }
                }
                csvData.Rows.Add(fieldData);
            }
        }
    }
    catch (Exception ex)
    {
    }
    return csvData;
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-10T16:29:09.553

我一直用`OLEDB`这个，比如......

```
 Dim sSheetName As String
    Dim sConnection As String
    Dim dtTablesList As DataTable
    Dim oleExcelCommand As OleDbCommand
    Dim oleExcelReader As OleDbDataReader
    Dim oleExcelConnection As OleDbConnection

    sConnection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Test.xls;Extended Properties=""Excel 12.0;HDR=No;IMEX=1"""

    oleExcelConnection = New OleDbConnection(sConnection)
    oleExcelConnection.Open()

    dtTablesList = oleExcelConnection.GetSchema("Tables")

    If dtTablesList.Rows.Count > 0 Then
        sSheetName = dtTablesList.Rows(0)("TABLE_NAME").ToString
    End If

    dtTablesList.Clear()
    dtTablesList.Dispose()

    If sSheetName <> "" Then

        oleExcelCommand = oleExcelConnection.CreateCommand()
        oleExcelCommand.CommandText = "Select * From [" & sSheetName & "]"
        oleExcelCommand.CommandType = CommandType.Text

        oleExcelReader = oleExcelCommand.ExecuteReader

        nOutputRow = 0

        While oleExcelReader.Read

        End While

        oleExcelReader.Close()

    End If

    oleExcelConnection.Close() 
```

提供`ACE.OLEDB`者将同时读取`.xls`和`.xlsx`文件，我一直发现速度非常好。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-10T12:40:50.823

```
public DataTable ImportExceltoDatatable(string filepath)
{
    // string sqlquery= "Select * From [SheetName$] Where YourCondition";
    string sqlquery = "Select * From [SheetName$] Where Id='ID_007'";
    DataSet ds = new DataSet();
    string constring = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filepath + ";Extended Properties=\"Excel 12.0;HDR=YES;\"";
    OleDbConnection con = new OleDbConnection(constring + "");
    OleDbDataAdapter da = new OleDbDataAdapter(sqlquery, con);
    da.Fill(ds);
    DataTable dt = ds.Tables[0];
    return dt;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-05-11T13:44:40.163

这对我来说似乎工作得很好。

```
private DataTable ReadExcelFile(string sheetName, string path)
{

    using (OleDbConnection conn = new OleDbConnection())
    {
        DataTable dt = new DataTable();
        string Import_FileName = path;
        string fileExtension = Path.GetExtension(Import_FileName);
        if (fileExtension == ".xls")
            conn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Import_FileName + ";" + "Extended Properties='Excel 8.0;HDR=YES;'";
        if (fileExtension == ".xlsx")
            conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Import_FileName + ";" + "Extended Properties='Excel 12.0 Xml;HDR=YES;'";
        using (OleDbCommand comm = new OleDbCommand())
        {
            comm.CommandText = "Select * from [" + sheetName + "$]";
            comm.Connection = conn;
            using (OleDbDataAdapter da = new OleDbDataAdapter())
            {
                da.SelectCommand = comm;
                da.Fill(dt);
                return dt;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-20T14:22:27.267

您可以将 OpenXml SDK 用于 *.xlsx 文件。它的工作速度非常快。我为这个 sdk 做了简单的 C# IDataReader 实现。见[这里](https://github.com/gSerP1983/OpenXml.Excel.Data)。现在您可以轻松地将 excel 文件读取到 DataTable，并且可以将 excel 文件导入 sql server 数据库（使用 SqlBulkCopy）。ExcelDataReader 读取速度非常快。在我的机器上，10000 条记录少 3 秒，60000 条记录少 8 秒。

读取数据表示例：

```
class Program
{
    static void Main(string[] args)
    {
        var dt = new DataTable();
        using (var reader = new ExcelDataReader(@"data.xlsx"))
            dt.Load(reader);

        Console.WriteLine("done: " + dt.Rows.Count);
        Console.ReadKey();
   }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-24T05:51:14.733

我发现像这样很容易

```
 using System;
    using System.Data;
    using System.IO;
    using Excel;

    public DataTable ExcelToDataTableUsingExcelDataReader(string storePath)
    {
        FileStream stream = File.Open(storePath, FileMode.Open, FileAccess.Read);

        string fileExtension = Path.GetExtension(storePath);
        IExcelDataReader excelReader = null;
        if (fileExtension == ".xls")
        {
            excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
        }
        else if (fileExtension == ".xlsx")
        {
            excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
        }

        excelReader.IsFirstRowAsColumnNames = true;
        DataSet result = excelReader.AsDataSet();
        var test = result.Tables[0];
        return result.Tables[0];
    } 
```

注意：您需要为此安装 SharpZipLib 包

```
Install-Package SharpZipLib 
```

干净整洁！;)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-20T16:11:48.690

这是从excel oledb读取的方式

```
try
{
    System.Data.OleDb.OleDbConnection MyConnection;
    System.Data.DataSet DtSet;
    System.Data.OleDb.OleDbDataAdapter MyCommand;
    string strHeader7 = "";
    strHeader7 = (hdr7) ? "Yes" : "No";
    MyConnection = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fn + ";Extended Properties=\"Excel 12.0;HDR=" + strHeader7 + ";IMEX=1\"");
    MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [" + wks + "$]", MyConnection);
    MyCommand.TableMappings.Add("Table", "TestTable");
    DtSet = new System.Data.DataSet();
    MyCommand.Fill(DtSet);
    dgv7.DataSource = DtSet.Tables[0];
    MyConnection.Close();
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-07-16T15:07:58.983

```
''' <summary>
''' ReadToDataTable reads the given Excel file to a datatable.
''' </summary>
''' <param name="table">The table to be populated.</param>
''' <param name="incomingFileName">The file to attempt to read to.</param>
''' <returns>TRUE if success, FALSE otherwise.</returns>
''' <remarks></remarks>
Public Function ReadToDataTable(ByRef table As DataTable,
                                incomingFileName As String) As Boolean
    Dim returnValue As Boolean = False
    Try

        Dim sheetName As String = ""
        Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & incomingFileName & ";Extended Properties=""Excel 12.0;HDR=No;IMEX=1"""
        Dim tablesInFile As DataTable
        Dim oleExcelCommand As OleDbCommand
        Dim oleExcelReader As OleDbDataReader
        Dim oleExcelConnection As OleDbConnection

        oleExcelConnection = New OleDbConnection(connectionString)
        oleExcelConnection.Open()

        tablesInFile = oleExcelConnection.GetSchema("Tables")

        If tablesInFile.Rows.Count > 0 Then
            sheetName = tablesInFile.Rows(0)("TABLE_NAME").ToString
        End If

        If sheetName <> "" Then

            oleExcelCommand = oleExcelConnection.CreateCommand()
            oleExcelCommand.CommandText = "Select * From [" & sheetName & "]"
            oleExcelCommand.CommandType = CommandType.Text

            oleExcelReader = oleExcelCommand.ExecuteReader

            'Determine what row of the Excel file we are on
            Dim currentRowIndex As Integer = 0

            While oleExcelReader.Read
                'If we are on the First Row, then add the item as Columns in the DataTable
                If currentRowIndex = 0 Then
                    For currentFieldIndex As Integer = 0 To (oleExcelReader.VisibleFieldCount - 1)
                        Dim currentColumnName As String = oleExcelReader.Item(currentFieldIndex).ToString
                        table.Columns.Add(currentColumnName, GetType(String))
                        table.AcceptChanges()
                    Next
                End If
                'If we are on a Row with Data, add the data to the SheetTable
                If currentRowIndex > 0 Then
                    Dim newRow As DataRow = table.NewRow
                    For currentFieldIndex As Integer = 0 To (oleExcelReader.VisibleFieldCount - 1)
                        Dim currentColumnName As String = table.Columns(currentFieldIndex).ColumnName
                        newRow(currentColumnName) = oleExcelReader.Item(currentFieldIndex)
                        If IsDBNull(newRow(currentFieldIndex)) Then
                            newRow(currentFieldIndex) = ""
                        End If
                    Next
                    table.Rows.Add(newRow)
                    table.AcceptChanges()
                End If

                'Increment the CurrentRowIndex
                currentRowIndex += 1
            End While

            oleExcelReader.Close()

        End If

        oleExcelConnection.Close()
        returnValue = True
    Catch ex As Exception
        'LastError = ex.ToString
        Return False
    End Try

    Return returnValue
End Function 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-24T13:34:50.340

下面的代码是我自己测试的，非常简单，易懂，好用，速度快。此代码最初采用所有工作表名称，然后将该 Excel 文件的所有表放入数据集中。

```
 public static DataSet ToDataSet(string exceladdress, int startRecord = 0, int maxRecord = -1, string condition = "")
    {
        DataSet result = new DataSet();
        using (OleDbConnection connection = new OleDbConnection(
                (exceladdress.TrimEnd().ToLower().EndsWith("x"))
                ? "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + exceladdress + "';" + "Extended Properties='Excel 12.0 Xml;HDR=YES;'"
                : "provider=Microsoft.Jet.OLEDB.4.0;Data Source='" + exceladdress + "';Extended Properties=Excel 8.0;"))
            try
            {
                connection.Open();
                DataTable schema = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
                foreach (DataRow drSheet in schema.Rows)
                    if (drSheet["TABLE_NAME"].ToString().Contains("$"))
                    {
                        string s = drSheet["TABLE_NAME"].ToString();
                        if (s.StartsWith("'")) s = s.Substring(1, s.Length - 2);
                        System.Data.OleDb.OleDbDataAdapter command =
                            new System.Data.OleDb.OleDbDataAdapter(string.Join("", "SELECT * FROM [", s, "] ", condition), connection);
                        DataTable dt = new DataTable();
                        if (maxRecord > -1 && startRecord > -1) command.Fill(startRecord, maxRecord, dt);
                        else command.Fill(dt);
                        result.Tables.Add(dt);
                    }
                return result;
            }
            catch (Exception ex) { return null; }
            finally { connection.Close(); }
    } 
```

享受...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-19T07:09:42.110

使用下面的代码片段会很有帮助。

```
string POCpath = @"G:\Althaf\abc.xlsx";

string POCConnection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + POCpath + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=1\";";

OleDbConnection POCcon = new OleDbConnection(POCConnection);
OleDbCommand POCcommand = new OleDbCommand();
DataTable dt = new DataTable();
OleDbDataAdapter POCCommand = new OleDbDataAdapter("select * from [Sheet1$] ", POCcon);
POCCommand.Fill(dt);
Console.WriteLine(dt.Rows.Count); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-06-28T11:22:11.340

这是另一种方法

```
public DataSet CreateTable(string source)
{
    using (var connection = new OleDbConnection(GetConnectionString(source, true)))
    {
        var dataSet = new DataSet();
        connection.Open();
        var schemaTable = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        if (schemaTable == null)
            return dataSet;

        var sheetName = "";
        foreach (DataRow row in schemaTable.Rows)
        {
            sheetName = row["TABLE_NAME"].ToString();
            break;
        }

        var command = string.Format("SELECT * FROM [{0}$]", sheetName);
        var adapter = new OleDbDataAdapter(command, connection);
        adapter.TableMappings.Add("TABLE", "TestTable");
        adapter.Fill(dataSet);
        connection.Close();

        return dataSet;
    }
}

//

private string GetConnectionString(string source, bool hasHeader)
{
    return string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};
    Extended Properties=\"Excel 12.0;HDR={1};IMEX=1\"", source, (hasHeader ? "YES" : "NO"));
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-11-20T19:55:31.537

我已经使用过这种方法，对我来说，它非常高效和快速。

```
// Step 1\. Download NuGet source of Generic Parsing by Andrew Rissing
// Step 2\. Reference this to your project
// Step 3\. Reference Microsoft.Office.Interop.Excel to your project
// Step 4\. Follow the logic below

public static DataTable ExcelSheetToDataTable(string filePath) {

    // Save a copy of the Excel file as CSV
    var xlApp = new XL.Application();
    var xlWbk = xlApp.Workbooks.Open(filePath);
    var tempPath =
        Path.Combine(Environment
            .GetFolderPath(Environment.SpecialFolder.UserProfile)
            , "AppData"
            , "Local",
            , "Temp"
            , Path.GetFileNameWithoutExtension(filePath) + ".csv");

    xlApp.DisplayAlerts = false;
    xlWbk.SaveAs(tempPath, XL.XlFileFormat.xlCSV);
    xlWbk.Close(SaveChanges: false);
    xlApp.Quit();

    // The actual parsing
    using (var parser = new GenericParserAdapter(tempPath)) {
        parser.FirstRowHasHeader = true;
        return parser.GetDataTable();
    }

} 
```

[Andrew Rissing 的通用解析](https://github.com/AndrewRissing/GenericParsing)

# asp.net-mvc - asp.net mvc - 如何告诉子操作忽略布局

> ID：14261656
> 
> 赞同：9
> 
> 时间：2013-01-10T15:44:00.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3, layout

我正在使用`@Html.Action()`在我的视图中呈现子操作。

该`_ViewStart.cshtml`文件指定所有视图都应使用如下特定布局：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

问题是，该布局也被应用于我的子操作，所以最后一页最终有两个页眉和两个页脚。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-10T15:47:53.567

2种可能性：

1.  `return PartialView()`从相应的控制器动作而不是`return View()`

2.  空白视图本身的布局

    ```
    @{
        Layout = null;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T17:21:57.627

似乎您想使用`ChildActionOnly`并且不想从视图中传递模型，那么您不能使用 PartialView。

如果是这样，您需要手动删除布局

```
@{
    Layout = "";
} 
```

# c++ - C++ 卡尔曼滤波器库产生 1.#R(NaN) 结果

> ID：14261667
> 
> 赞同：3
> 
> 时间：2013-01-10T15:44:28.447
> 
> 标签：c++, nan, kalman-filter

我目前正在尝试使用[Free C++ Extended Kalman Filter Library](http://kalman.sourceforge.net/doc.php)。我了解卡尔曼滤波器的基础知识，但是我遇到了使用此库生成 NaN 值的问题。SO上有没有人有使用卡尔曼滤波器算法来发现我的错误的经验？

这是我的过滤器：

```
class PointEKF : public Kalman::EKFilter<double,1,false,true,false> {
public:
        PointEKF() : Period(0.0) {
            setDim(3, 1, 3, 1, 1);
        }

        void SetPeriod(double p) {
            Period = p;
        }
protected:
        void makeBaseA() {
            A(1, 1) = 1.0;
            //A(1, 2) = Period;
            //A(1, 3) = Period*Period / 2;
            A(2, 1) = 0.0;
            A(2, 2) = 1.0;
            //A(2, 3) = Period;
            A(3, 1) = 0.0;
            A(3, 2) = 0.0;
            A(3, 3) = 1.0;
        }
        void makeBaseH() {
            H(1, 1) = 1.0;
            H(1, 2) = 0.0;
            H(1, 3) = 0.0;
        }
        void makeBaseV() { 
            V(1, 1) = 1.0;
        }
        void makeBaseW() {
            W(1, 1) = 1.0;
            W(1, 2) = 0.0;
            W(1, 3) = 0.0;
            W(2, 1) = 0.0;
            W(2, 2) = 1.0;
            W(2, 3) = 0.0;
            W(3, 1) = 0.0;
            W(3, 2) = 0.0;
            W(3, 3) = 1.0;
        }

        void makeA() {
            double T = Period;
            A(1, 1) = 1.0;
            A(1, 2) = T;
            A(1, 3) = (T*T) / 2;
            A(2, 1) = 0.0;
            A(2, 2) = 1.0;
            A(3, 3) = T;
            A(3, 1) = 0.0;
            A(3, 2) = 0.0;
            A(3, 3) = 1.0;
        }
        void makeH() {
            double T = Period;
            H(1, 1) = 1.0;
            H(1, 2) = T;
            H(1, 3) = T*T / 2;
        }
        void makeProcess() {
            double T = u(1);
            Vector x_(x.size());
            x_(1) = x(1) + x(2) * T + (x(3) * T*T / 2);
            x_(2) = x(2) + x(3) * T;
            x_(3) = x(3);
            x.swap(x_);
        }
        void makeMeasure() {
            z(1) = x(1);
        }

        double Period;
}; 
```

我使用它如下：

```
void init() {
    int n = 3;
    static const double _P0[] = {
                                 1.0, 0.0, 0.0,
                                 0.0, 1.0, 0.0,
                                 0.0, 0.0, 1.0
                                };
    Matrix P0(n, n, _P0);
    Vector x(3);
    x(1) = getPoint(0);
    x(2) = getVelocity(0);
    x(3) = getAccleration(0);
    filterX.init(x, P0);
} 
```

和，

```
 Vector measurement(1), input(1), u(1);
    u(1) = 0.400;
    double start = data2->positionTimeCounter;
    double end = data->positionTimeCounter;
    double period = (end - start) / (1000*1000);
    filterX.SetPeriod(period);
    measurement(1) = getPoint(0);
    input(1) = period;
    filterX.step(input, measurement);
    auto x = filterX.predict(u); 
```

**注意：** 我使用的数据是从单位圆生成的 x 点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:47:14.273

如果您使用矩阵的基本版本：

```
A = [ 1 0 0;
      0 1 0;
      0 0 1 ];
H = [ 1 0 0 ]; 
```

您没有可观察的系统，因为您的测量仅捕获第一个状态（位置），并且在 A 矩阵中，位置及其导数（速度、加速度）之间没有耦合。可[观察性矩阵](http://en.wikipedia.org/wiki/Observability)如下：

```
O = [ H;
      H*A;
      H*A*A ];
O = [ 1 0 0;
      1 0 0;
      1 0 0 ]; 
```

这显然是奇异的，即您的系统是不可观察的。并且通过 EKF 算法输入应该会产生错误（这种情况应该由算法检测到），但如果没有检测到，它将导致估计中的 NaN 结果，与您所经历的完全一样。

现在，makeA() 函数中的 A 矩阵更合适：

```
A = [ 1 h h*h/2;
      0 1 h;
      0 0 1 ];
H = [ 1 0 0 ];       // use this H matrix (not [ 1 h h*h/2 ]) 
```

导致可观察性矩阵：

```
O = [ 1    0      0;
      1    h  h*h/2;
      1  2*h  2*h*h ]; 
```

这是全秩（不是单数），因此，你有一个可观察的系统。

卡尔曼滤波算法可能[对矩阵的条件](http://en.wikipedia.org/wiki/Condition_number)非常敏感，这意味着如果时间步长非常小（例如`1e-6`），则需要使用连续时间版本。此外，NaN 的问题可能来自 KF 算法所需的线性求解器（求解线性方程组）。如果库的作者使用了一种简单的方法（例如，高斯消元法、带或不带枢轴的 LU 分解、没有枢轴的 Cholesky 等），那么这将使数值调节问题变得更糟。

注意你应该从一个非常高的 P 矩阵开始你的 KF 过滤，因为初始 P 应该反映你的初始状态向量的不确定性，这通常非常高，所以 P 应该在`1000 * identity`.

# mysql - 将层次结构转换为嵌套集的 SQL 查询/过程

> ID：14261668
> 
> 赞同：2
> 
> 时间：2013-01-10T15:44:37.503
> 
> 标签：mysql, sql, data-structures, nested

我有很多带有 id 和 parent_id 的经典（mysql）表，我需要将它们转换为 n[嵌套 set](http://en.wikipedia.org/wiki/Nested_set_model)。对于每一行，我需要计算深度（可能会有所不同）和左/右节点。

是否可以使用 mySQL 查询或存储过程来做到这一点？

编辑：深度可能会有所不同，因此嵌套连接不是最佳解决方案。

# java - RESTful java 客户端和 HttpClient

> ID：14261670
> 
> 赞同：0
> 
> 时间：2013-01-10T15:44:42.277
> 
> 标签：java, curl, restlet

我有一个用于在 UNIX 中执行的 Curl 命令。

```
curl --digest -u 'user':'pass' 'https://<URL>/getCustomers' (which is working for me) 
```

我试图用Java来做到这一点。

我尝试使用 Restlet 和 HttpClient，但都没有。我不知道实现它的确切方法。

```
private static void get() {
try {

    DefaultHttpClient httpClient = new DefaultHttpClient();

    HttpGet getRequest = new HttpGet("https://<URL>/getCustomers");

    getRequest.addHeader("accept", "application/json");
    HttpResponse response = httpClient.execute(getRequest);

    httpClient.getCredentialsProvider().setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT), new UsernamePasswordCredentials(USER, PASSWORD));

    if (response.getStatusLine().getStatusCode() != 200) {
        throw new RuntimeException("Failed : HTTP error code : " + response.getStatusLine().getStatusCode());
    }

    BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())));

    String output;

    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {
        System.out.println(output);
    }

    httpClient.getConnectionManager().shutdown();

  } catch (ClientProtocolException e) {

    e.printStackTrace();

  } catch (IOException e) {

    e.printStackTrace();
  }
} 
```

不知道哪里做错了，各位大神能帮帮我吗？输出是 JSON，你们也可以告诉我如何捕获输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:38:01.750

您的问题遗漏了一些细节，例如您得到的错误是什么。

我建议阅读 HTTPClient 文档，更具体地说，阅读有关[身份验证](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)和抢占式工作原理的部分。

然后，您可以不直接处理状态码和实体，而是将流利的 API 转为

```
Executor executor = Executor.newInstance()
        .auth(new HttpHost("example.com"), "username", "password")
        .authPreemptive(new HttpHost("example.com"));

executor.execute(Request.Get("http://example.com/foobar.json"))
        .returnContent().asString(); 
```

# javascript - 从 html+javascript cakePHP 2.x 生成 PDF

> ID：14261681
> 
> 赞同：0
> 
> 时间：2013-01-10T15:45:07.853
> 
> 标签：javascript, cakephp, pdf, pdf-generation

我正在尝试在 cakePHP 应用程序中生成 pdf 文件，但到目前为止只有 html 包含在文件中。问题是页面的主要内容（日历）是由生成 PDF 时完全忽略的 javascript 生成的。在这种情况下，最好的解决方案是什么？

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:09:06.057

如果您使用 wkhtmltopdf 之类的东西，它应该可以工作，因为它包含 chrome 中使用的实际渲染代码。

有一个现成的[插件可以开箱即用（安装 wkhtmltopdf 之后）](https://github.com/ceeram/CakePdf)

# ios - Facebook log-in with app when using Safari or Facebook App not working

> ID：14261687
> 
> 赞同：0
> 
> 时间：2013-01-10T15:45:34.467
> 
> 标签：ios, objective-c, cocoa, facebook-ios-sdk

I've followed [this](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/) facebook's tutorial on how to authenticate in an iOS app. I've followed each step and the authentication works fine if I'm logged in to facebook in "device settings" > "Facebook", but If I log out from there and try to authenticate using the app or the browser the method sessionStateChanged:state:error never gets called. I also have this method implemented in the appDelegate and it is being called but then nothing else happens:

```
- (BOOL)application:(UIApplication *)application
    openURL:(NSURL *)url
    sourceApplication:(NSString *)sourceApplication
    annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url];
} 
```

Any Idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:47:16.443

Have you tried adding this to your app delegate?

```
-(void)applicationDidBecomeActive:(UIApplication *)application {
  [super applicationDidBecomeActive:application];
  [[FBSession activeSession] handleDidBecomeActive];
} 
```

From FBSession.h

```
/*!
 @abstract
 A helper method that is used to provide an implementation for
 [UIApplicationDelegate applicationDidBecomeActive:] to properly resolve session state for
 the Facebook Login flow, specifically to support app-switch login.
*/
- (void)handleDidBecomeActive; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:26:36.817

This link is the answer: [https://developers.facebook.com/bugs/414563691940501?browse=search_506e2a4ecd68e7258709929](https://developers.facebook.com/bugs/414563691940501?browse=search_506e2a4ecd68e7258709929)

In my plist file I have the option

```
Application does not run in background: YES 
```

So the sdk fails when trying to start session from the "Facebook App" or from "Safari"

If I find a solution for this, I'll update!

# php - PHP 表唯一键

> ID：14261693
> 
> 赞同：0
> 
> 时间：2013-01-10T15:46:05.040
> 
> 标签：php, database, unique

我有 3 张桌子。

第一张表是USERS，第二张表是PRODUCT KEY，第三张表是PRODUCT KEY和USER的join。

看起来像这样：

```
CREATE TABLE product_keys
(
id INT auto_increment PRIMARY KEY,
product_key VARCHAR(255)
);

CREATE TABLE users
(
id INT auto_increment PRIMARY KEY,
username VARCHAR(50),
email VARCHAR(50)
);

CREATE TABLE user_keys
(
id INT auto_increment PRIMARY KEY,
product_key VARCHAR(255) UNIQUE,
user_id INT
); 
```

示例：产品密钥表有 70 个密钥。如果第一个用户注册，他将收到一封包含产品密钥的电子邮件。然后，第一个用户 ID 和该产品密钥将保存到第三个表中。

问题是如何使已发送的产品密钥不再发送，而是在第二个用户注册时发送下一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:50:56.923

你的问题很不清楚。您需要注册 100 个用户但只有 70 个密钥？那么，第 71 位用户不可能获得唯一的用户。

否则，您可以`uniqid()`用于生成这些键，每次调用它时都应该返回一个唯一的字符串

编辑：所以您只需要知道密钥表中的哪些密钥已被使用？要么在其中放置一个新列（类似于“已使用”），每次将其分配给用户时将其设置为 true（还允许您轻松获取未使用的产品密钥），或者您可以简单地删除记录使用表中的键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:52:36.053

在第三个表中添加另一列`used`，默认值为 0。之后，当您使用某个键时，将其更改为 1。

当您选择要分配给用户的键时，仅选择带有 的键`used=0`。

# wpf - WPF：将进度条添加到列表框项

> ID：14261696
> 
> 赞同：0
> 
> 时间：2013-01-10T15:46:12.640
> 
> 标签：wpf, listbox, itemtemplate, z-order

我试图让我的 ListBoxItems 的背景由 ProgressBar 构成，但“Z-Index”的东西似乎对我不起作用。我在某处读到 Grid 不支持 Z-Index（如 Canvas），并且默认情况下元素按添加顺序呈现。这显然也是我的情况。但是当我单击一个列表框项时，我的 TextBlock（见下文）消失了，显然是因为 ProgressBar 出现在了前面。有趣的是，其他子控件（图像和动画）并没有消失，所以我有点困惑。

这是我的 ListBox 的 ItemTemplate：

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <Grid Name="ListBoxGrid">
            <Grid.RowDefinitions>
                <RowDefinition Height="100"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
            </Grid.ColumnDefinitions>
            <ProgressBar Grid.Column="0" Grid.ColumnSpan="3" Background="White" Value="{Binding Path=SendProgress}" />
            <Image Width="50" Stretch="Uniform" Grid.Column="0" HorizontalAlignment="Center" Margin="20,0,0,0" VerticalAlignment="Center" Source="{Binding Image}" />
            <TextBlock FontSize="16" Grid.Column="1" VerticalAlignment="Center" Text="{Binding Path=ImageFilePath, Padding="20,0,0,0" />
            <Canvas Grid.Column="2">
                <Image Canvas.Left="25" Canvas.Top="25" Width="50" Height="50" Source="{Binding Status}" />
                <my:LoadingAnimation HorizontalAlignment="Center" VerticalAlignment="Center" Width="100" Height="100" Canvas.Left="5" Canvas.Top="5" Visibility="{Binding IsSending, Converter={StaticResource BooleanToVisibilityConverter1}}" />
            </Canvas>
        </Grid>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:06:54.493

Panel.ZIndex 属性对我来说很好 示例代码：

```
<Grid>
    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Panel.ZIndex="2">
        <Button Name="goButton" Height="30" Width="50" Margin="0,10,0,50" Click="goButton_Click">GO!</Button>
        <ProgressBar Name="progressBar" Width="300" Height="30" />
    </StackPanel>

        <Label VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="100" Content="SHOWTHIS" Panel.ZIndex="1"/>
</Grid> 
```

如果我理解得很好，那么在这种情况下，用于可见性的 Style Datatriggers 可能会很有用 数据模板的每个元素的示例代码：

```
<Image>
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsSending}" Value="True">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsSending}" Value="False">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image> 
```

# sql-server-2008 - 如何转换用作时间的 5 位 INT 并在 SQL 中将其显示为 HH:MM:SS

> ID：14261697
> 
> 赞同：3
> 
> 时间：2013-01-10T15:46:14.567
> 
> 标签：sql-server-2008

我正在处理数据查询，我的一个字段的时间格式为“33600”，是一种数据类型 (INT)。我需要知道如何转换该字段，以便它显示正确的 HH:MM:SS 时间格式。我使用的当前查询给我的日期/时间为 MM/DD/YYYY:00:00:00。

例如：Convert(datetime,Cast(Ap.aptApptTime as varchar(6),3)as Appt_time

这会产生正确的约会日期，但时间为 00:00:00。我需要根据“33600”之类的值显示正确的时间。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:51:00.333

如果 33600 是毫秒数，这应该可以工作。

```
DECLARE @Var TIME = '00:00'
SELECT DATEADD(MS, 33600, @Var) 
```

如果秒；

```
DECLARE @Var TIME = '00:00'
SELECT DATEADD(S, 33600, @Var) 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:07:27.893

假设 33600 是秒数，你也可以试试

```
Cast(Cast((33600/86400.0) as smalldatetime) as time) 
```

`86400.0`一天的总秒数在哪里。不要忘记“.0”，否则 SQL 会将其视为整数，结果将始终为零或午夜。您也不能直接从数字转换为时间字段，因此您必须使用中间的 smalldatetime 字段。

# sql-server - 优化 SQL 查询：一对一关系，但结构类似于一对多

> ID：14261701
> 
> 赞同：0
> 
> 时间：2013-01-10T15:46:32.617
> 
> 标签：sql-server, tsql, query-optimization

我有一个看起来像这样的表结构：

**人**

```
Id 
```

**人口统计**

```
Id  
PersonId 
```

这`Person > PersonDemographic`是一对一的关系，并且通过对 的唯一约束被迫如此`PersonDemogrphic.PersonId`。

这种结构遍及这个特定的数据库。因此，任何从 Person 到包含人员详细信息的表的连接都包括哈希匹配和表扫描。

为了优化查询，我尝试将人员 ID（而不是表身份）作为聚集主键。这导致了嵌套循环和聚集索引扫描（以及轻微的性能改进）。

知道这是一对一的关系，我想我可以通过给 join`FORCESEEK`提示来提高性能；然而，这使情况变得更糟。根据执行计划中的统计数据，“反向关系”表上的聚集索引搜索似乎仍在每行执行一次运算符，而不是“通常相关”表的执行，估计执行次数为1.

我正在寻找建议以获得针对这种情况的最佳执行计划。虽然我意识到*“修复你的表结构”*是有效的并且可能是最好的答案，但我希望在这个时候避免这种情况。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:49:22.873

您是否尝试过使用外键而不是唯一约束？

# xslt - 在 XSLT 中，为什么我需要与变量而不是属性值进行比较（在测试表达式中）

> ID：14261706
> 
> 赞同：0
> 
> 时间：2013-01-10T15:46:42.423
> 
> 标签：xslt

我正在解析一个文档，其行为不同，具体取决于 id 属性是否是值集合的元素（下面代码中的 $item-ids ）。我的问题是，为什么我需要分配一个变量，然后与该值进行比较，如下所示：

```
<xsl:template match="word/item">
    <xsl:variable name="id" select="@abg:id"/>
    <xsl:if test="$item-ids[.=$id]">
        <xsl:message>It matches!</xsl:message>
    </xsl:if>
</xsl:template> 
```

似乎我应该能够这样做，尽管它不起作用：

```
<xsl:template match="word/item">
    <xsl:if test="$item-ids[.=@abg:id]">
        <xsl:message>It matches!</xsl:message>
    </xsl:if>
</xsl:template> 
```

这是我一直忘记并不得不重新学习的东西。任何人都可以解释为什么它会这样工作吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:08:55.520

要了解 XPath，您需要了解上下文节点的概念。像@id 这样的表达式正在选择上下文节点的属性。并且上下文节点在方括号内发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:07:03.103

在这种情况下，您不必使用变量。在这里您可以使用：

```
<xsl:template match="word/item">
    <xsl:if test="$item-ids[. = current()/@abg:id]">
        <xsl:message>It matches!</xsl:message>
    </xsl:if>
</xsl:template> 
```

您不能只使用的原因`$item-ids[. = @abg:id]`是，在 中，您处于（在这种情况下）`[]`之前的任何内容的上下文中，因此将被视为，这不是您想要的。`[]``$item-ids``@abg:id``$item-ids/@abg:id`

`current()`指的是当前上下文*之外*的`<xsl:if>`所以`current()/@abg:id`应该反映你想要的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:02:27.983

我认为这是因为线

```
<xsl:if test="$item-ids[.=@abg:id]"> 
```

将 的值`$item-ids`与字符串 '@abg:id' 进行比较 - 您需要将其与值进行比较，`@abg:id`这就是为什么您需要将该值选择到`$id`变量中以使测试工作的原因。

这些帮助有用？

编辑：我误解了这个问题 - 其他答案比我的要好。

# google-chrome - CKEditor - Webkit 浏览器中的编辑器宽度溢出

> ID：14261708
> 
> 赞同：3
> 
> 时间：2013-01-10T15:46:44.983
> 
> 标签：google-chrome, safari, webkit, ckeditor, wysiwyg

我发现工具栏[不会自动包含在 WebKit](https://stackoverflow.com/a/5863324/244826)浏览器（Safari、Chrome）中。CKEditor 3 报告了一个[三年前的错误](http://dev.ckeditor.com/ticket/4232)，但它已被关闭。也许这是一种回归？

我没有在我的配置中设置宽度。我希望编辑器自动扩展到可用宽度。编辑器位于应用了样式的`div`元素内。`overflow: hidden;`

这是我的工具栏配置：

```
config.toolbar = [
    {name:'clipboard', items:['Cut', 'Copy', 'Paste', 'PasteText',
            '-', 'Undo', 'Redo']},
    {name:'insert', items:['Link', 'Unlink', 'Image', 'Table', 'SpecialChar']},
    {name:'basic', items:['Bold', 'Italic', 'Strike',
            '-', 'NumberedList', 'BulletedList',
            '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock',
            '-', 'Outdent', 'Indent',
            '-', 'RemoveFormat']},
    {name:'styles', items:['Styles']},
    {name:'additional', items:['jQuerySpellChecker',
            '-', 'Source',
            '-', 'Maximize']}
]; 
```

火狐：
![工具栏包装得很好](../Images/f49633f7418e99b940683214d4db48b1.png)

Chrome（由于容器而切断了编辑器）：
![工具栏不换行](../Images/00ab0c680d1e88b3fa53490cab4748bc.png)

我不想添加硬中断，因为我以不同的宽度使用相同的编辑器配置。如何在不使用手动换行“按钮”的情况下解决此问题？

* * *

**更新**

我在表单中使用`fieldset`元素。我发现添加`fieldset`是触发布局问题的原因。此代码重现了该问题：

```
<!DOCTYPE html>
<html>
    <head>
        <title>CKEditor</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            html {
                background-color: lightgray;
            }
            #content {
                margin: 0 auto;
                border: 1px solid black;
                padding: 10px;
                width: 400px;
                overflow: hidden;
                background-color: white;
            }
            fieldset {
                margin: 0;
                border: 0 none;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <div id="content">
            <fieldset>
                <textarea name="editor1" id="editor1">&lt;p&gt;Foo foo!&lt;/p&gt;</textarea>
            </fieldset>
        </div>
        <script type="text/javascript" src="http://ckeditor.com/apps/ckeditor/4.0.1/ckeditor.js"></script>
        <script>
            CKEDITOR.replace('editor1');
        </script>
    </body>
</html> 
```

* * *

**更新 2**

我已经[提交了错误报告](http://dev.ckeditor.com/ticket/9947)。我将接受一个为这个错误提供解决方法的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:23:26.927

我无法重现此问题。在 4.0 和 4.0.1 上都没有。我刚刚复制了您的工具栏配置 +`{ resize_dir: 'both', resize_minWidth: 300, width: 500 }`以便更好地观察它是否有效，结果如下：

![在此处输入图像描述](../Images/c481acee3e4f2901ed6e9fdd3fd4ccd3.png)

**更新（2013 年 1 月 11 日）**

我创建了这样一个示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>Sample</title>
    <meta charset="utf-8">
    <script src="../ckeditor.js"></script>
    <style>
        #content {
            width: 50%;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="content">
        <textarea cols="80" id="editor1" name="editor1" rows="10">
            &lt;p&gt;Foo foo!&lt;/p&gt;
        </textarea>
        <script>
            CKEDITOR.replace( 'editor1', {
                toolbar: // your toolbar
            } );
        </script>
    </div>
</body>
</html> 
```

一切对我来说仍然很好。我可以更改浏览器的宽度并且工具栏可以正确调整大小。所以我的猜测是你的一些样式破坏了编辑器，或者你有一些非默认的 CKEditor 设置导致了这种情况。

# sql - SQL 字段总和

> ID：14261711
> 
> 赞同：-6
> 
> 时间：2013-01-10T15:46:55.517
> 
> 标签：sql

我有一个简单的 SQL 表，如下所示：

```
INSERT INTO RACUN VALUES(1, 'Gotovina', to_date('02.01.2013', 'DD.MM.YYYY'), 210, 1508989500195);

INSERT INTO RACUN VALUES(2, 'Gotovina', to_date('02.01.2013', 'DD.MM.YYYY'), 220, 1508989500195);

INSERT INTO RACUN VALUES(3, 'Gotovina', to_date('02.01.2013', 'DD.MM.YYYY'), 230, 1508989500195);

INSERT INTO RACUN VALUES(4, 'Gotovina', to_date('02.01.2013', 'DD.MM.YYYY'), 240, 1508989500195);

INSERT INTO RACUN VALUES(5, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 250, 1508989500195);

INSERT INTO RACUN VALUES(6, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 260, 1508989500195);

INSERT INTO RACUN VALUES(7, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 270, 1508989500195);

INSERT INTO RACUN VALUES(8, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 280, 1508989500195);

INSERT INTO RACUN VALUES(9, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 290, 1508989500195);

INSERT INTO RACUN VALUES(10, 'Gotovina', to_date('02.01.2012', 'DD.MM.YYYY'), 300, 1508989500195); 
```

我需要计算 2013 年 1 月租金的价格值总和（日期后的列）。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:50:15.107

```
SELECT SUM(price) as price_sum FROM RACUN WHERE date > '01-01-2013' AND date < '01-31-2013' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:52:28.050

请参阅：[http ://www.w3schools.com/sql/sql_func_sum.asp](http://www.w3schools.com/sql/sql_func_sum.asp)

你的可能会读

```
SELECT SUM(price_column_name) as PriceSum 
FROM table_name 
WHERE date_column_name date > 'MM-DD-YYYY' AND date < 'MM-DD-YYYY' 
```

当然，在适当的字段中进行替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:56:53.807

在 sql sum 中是这样的：

```
SELECT SUM(column_name) FROM RACUN where date_column between startDate and endDate 
```

由于您没有插入列名，因此我无法根据您的情况对其进行调整

或者您可以从日期中提取月份和年份，并在 where 子句中使用这些值

# javascript - 在 Google 地图上渲染饼图

> ID：14261715
> 
> 赞同：0
> 
> 时间：2013-01-10T15:47:03.990
> 
> 标签：javascript

使用 javascript + 谷歌地图

在我的应用程序中，我有一个显示 Google 地图的屏幕。而且，我有一些呈现为饼图的国家/地区的人口增长统计数据。我成功地使用 Google API 渲染了 PieCharts。现在我想在 GoogleMap 上渲染这些生成的饼图。例如，应该有一个在美国呈现的饼图，它解释了美国每年的人口增长。我怎样才能实现它？请提出一些想法。是否可以使用 Google API for Map Layers.?? 谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:56:25.080

取决于 API，即 v3，您可以使用视图覆盖（阅读[https://developers.google.com/maps/documentation/javascript/reference?hl=de#OverlayView](https://developers.google.com/maps/documentation/javascript/reference?hl=de#OverlayView)）允许附加自定义 DOM 元素，您可以在其中呈现任何内容您可能想要的 HTML。在该视图中，您可以渲染由您使用的任何第三方图表库生成的 SVG / VML 饼图。

# html - Html - 如何实际使用本地 iframe？（什么都没有出现）

> ID：14261718
> 
> 赞同：-1
> 
> 时间：2013-01-10T15:47:34.353
> 
> 标签：html, iframe

我正在做一些需要我在嵌入式 iframe 中构建 html 的工作。有点像jsbin。

然而，我对我的第一个尖峰感到难过。

当我将它放在 iframe 中时，为什么我的 html 没有被呈现？

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <iframe>
    <html>
      <head><meta charset=utf-8 /></head>
      <body>
        <h1>Big Header</h1>
      </body>
    </html>
  </iframe>
</body>
</html> 
```

[这是我的jsbin。](http://jsbin.com/omumaf/1/)

此外，当我尝试使用 d3 在 iframe 中绘制一些 svg 时，它们看起来很奇怪，而且没有缩放。在打开开发工具并将 svg 文本编辑为 html 后，我发现即使在任何地方添加一个无意义的空间也会让它重新绘制和正确渲染。因此，如果有人可以告诉我任何我可以阅读的资源，那么加分很明显，iframe 不像我想象的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:49:56.650

iframe 需要指向要加载的页面。您不要在 iframe 标记之间放置 html。如果您在 iframe 标记之间放置任何内容 - 它是您希望在客户端使用的浏览器不支持该标记的情况下显示的文本。您应该在自己的本地 html 页面上方制作 html，并将上面的 iframe src 属性指向该网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:13:50.460

经过一天的研究：

就像迈克说的那样，iframe 中的 html 是针对浏览器不支持 iframe 并且不会显示的情况。但是，完全可以在 iframe 中动态构建文档，而无需服务器端查询。为此，您必须使用 javascript 来构建文档。您可以获取它的引用并像这样编写 html：

```
var  iframe = document.getElementsByTagName('iframe')[0];
    ,doc = iframe.contentDocument || iframe.contentWindow.document
    ; 
doc.open();
doc.write('<p>Some html</p>');
do.close(); 
```

请注意，正如 Remy[在这里](http://www.youtube.com/watch?v=y4lBEZTThvg)提到的，文档必须在编写之前打开并在之后关闭。

# iphone - 如何在iphone sdk中获取推送通知的到达时间

> ID：14261723
> 
> 赞同：2
> 
> 时间：2013-01-10T15:47:43.443
> 
> 标签：iphone, xcode, apple-push-notifications

目前我正在远程推送通知服务中工作。我有一个问题，即如何获取推送通知的到达时间。检查下图![在此处输入图像描述](../Images/4e6233f828ac34920f6c9a3ccf348db4.png)

过得去吗？谁来帮帮我...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:10:11.897

通过这种方式可以轻松记录应用程序接收到的时间。

```
- (void)application:(UIApplication*)application
       didReceiveRemoteNotification:(NSDictionary*)userInfo {

    NSDate *appReceiptTime = [NSDate date]; 
```

服务器发送的时间可以作为自定义字段包含在推送请求中，如下所示：

> { "sentAt": "2013-01-01 11:00:00 +0000" }

...并在 userInfo 中的 @"sentAt" 键下找到

设备何时收到通知？我不知道有什么方法可以做到这一点。你需要那个准确吗？发送时间可能是一个不错的近似值……甚至可以通过将其向前 3-5 秒来改进。

# c# - Web 服务 MS Word 比较自动化导致冻结

> ID：14261725
> 
> 赞同：0
> 
> 时间：2013-01-10T15:47:47.583
> 
> 标签：c#, web-services, ms-word, asmx, office-automation

我的 WebService 使用 ms word COM 来比较 2 个 .doc 文件。当结果文件将超过 1 Mb 时 - 它会挂起。（对于较小的文件 - 一切正常）。当我在 IIS 上发布和运行 WebService 时会发生这种情况。（主机在 win serv 2008 x64，IIS - 7 下）因此，Word COM 作为 COM 引用添加到 Service。我必须在那里安装 ms word 2010 x64，否则服务会抛出 null ref 异常。

在我的本地计算机上（在 VS 调试模式下），在 win 7 和 office 2010 32 位下，一切正常。

详细信息：我正在使用JS调用Web服务：

```
function post_to_url() {
    var path = "http://localhost:32496/Service1.asmx/runCompareService";
    var params = {'mAuthToken':'xU/fnlKCe85R25I8IIRHIQCmPc7rcajYVHLQ3JChv8w=','documentId':'1441378','origVerNum':'1','revisedVerNum':'2'};
    var method = "post"; 
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

        for(var key in params) {
            if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);
            form.appendChild(hiddenField);
            }
        }

        document.body.appendChild(form);
        form.submit();
    } 
```

c#比较方法：

```
 public void doCompare(String file1path, String file2path, String file3path)
    {
        Microsoft.Office.Interop.Word.Application wordApp = null;
        Microsoft.Office.Interop.Word.Document doc1 = null;
        Microsoft.Office.Interop.Word.Document doc2 = null;
        Microsoft.Office.Interop.Word.Document doc = null;

        object wordTrue = (object)true;
        object wordFalse = (object)false;
        object missing = Type.Missing;

        object fileToOpen = @file1path;
        object fileToOpen1 = @file2path;
        object fileToSave = @file3path;

        try
        {
            wordApp = new Microsoft.Office.Interop.Word.Application();
            wordApp.Visible = false;
            wordApp.DisplayAlerts = WdAlertLevel.wdAlertsNone;
            try
            {
                doc1 = wordApp.Documents.Open(ref fileToOpen, ref missing, ref wordFalse, ref wordFalse, ref missing,
                ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref wordTrue, ref missing,
                ref missing, ref missing, ref missing);
            }
            catch (Exception e)
            {
                throw new Exception("Failed to open approved file" + e.ToString());
            }
            try
            {
                doc2 = wordApp.Documents.Open(ref fileToOpen1, ref missing, ref wordFalse, ref wordFalse, ref missing,
                ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing);
            }
            catch (Exception e)
            {
                throw new Exception("Failed to open revised file" + e.ToString());
            }
            if ((doc1 != null) && (doc2 != null))
            {
                try
                {
                    doc = wordApp.CompareDocuments(doc1, doc2, WdCompareDestination.wdCompareDestinationOriginal, WdGranularity.wdGranularityWordLevel,
                    true, true, true, true, true, true, true, true, true, true, "", false);
                    doc.SaveAs2(fileToSave);
                    ((_Document)doc).Close();
                }
                catch (Exception e)
                {
                    throw new Exception("Failed to save compare result file" + e.ToString());
                }
            }
        }
        catch (Exception e)
        {
            throw new Exception("Failed to open MS Word Application" + e.ToString());
        }
        finally
        {
            ((_Application)wordApp).Quit();
        }
    } 
```

响应更改为：

```
private void DownloadToBrowser(String filePath)
    {
        FileInfo file = new FileInfo(filePath);
        byte[] fileBytes = ReadFile(filePath);

        Context.Response.Clear();
        Context.Response.ClearHeaders();
        Context.Response.ClearContent();
        Context.Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
        Context.Response.AddHeader("Content-Length", file.Length.ToString());
        Context.Response.AddHeader("Connection", "close");
        Context.Response.ContentType = "application/msword";
        Context.Response.ContentEncoding = Encoding.UTF8;
        Context.Response.OutputStream.Write(fileBytes, 0, fileBytes.Length);
        Context.Response.Flush();
        Context.ApplicationInstance.CompleteRequest();
    } 
```

看起来服务在 COM 比较操作上挂起

```
try 
{
     doc = wordApp.CompareDocuments(doc1, doc2, WdCompareDestination.wdCompareDestinationOriginal, WdGranularity.wdGranularityWordLevel,
                    true, true, true, true, true, true, true, true, true, true, "", false);
      doc.SaveAs2(fileToSave);
      ((_Document)doc).Close();
}
 catch (Exception e)
{
       throw new Exception("Failed to save compare result file" + e.ToString());
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:02:00.123

办公自动化是为了自动化桌面程序（Word、Excel 等）而开发的。它做出了许多假设，即它在桌面环境中运行。例如，它可能会在多线程进程中运行时出现问题。

它不能很好地工作，如果有的话。如果你很幸运，那么它会立即失败，你会找到另一个解决方案。如果你不走运，你会把一些东西投入生产，依赖它，*然后*你会开始遇到难以解决甚至无法修复的关键问题。

# 不要这样做

使用 office 2010 COM查看[asp.net Web 服务](https://stackoverflow.com/questions/7382704/asp-net-web-service-using-office-2010-com)

# haskell - 为什么 Haskell 有非严格的函数（语义）？

> ID：14261728
> 
> 赞同：4
> 
> 时间：2013-01-10T15:47:54.207
> 
> 标签：haskell, functional-programming, computer-science, category-theory

根据这篇关于[haskell中指称语义的](http://en.wikibooks.org/wiki/Haskell/Denotational_semantics#Non-Strict_and_Strict_Languages)文章， 所有类型都有底部，如果函数f：A->B将类型A的底部映射到类型B的底部，则它是严格的，否则称为*非**严格*。

（这让人联想到态射保留基点的尖锐类别）。

为什么 Haskell 有非严格函数，而标准 ML 没有？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T18:00:08.560

*每种*具有递归的编程语言都至少有一个非严格函数，通常以条件 ( `if-then-else`) 的形式出现。否则，所有递归都将表示底部（非终止）。然而，与非严格函数一样，这些语言中的大多数都不允许您定义自己的函数！一些语言通过提供宏来弥补这一限制——这是一种类似于函数的机​​制，可以转换语法而不是值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T16:31:23.667

> 为什么 Haskell 有非严格函数，而标准 ML 没有？

Haskell 有非严格的函数——通常是惰性函数——因为它们是一个有用的编程特性。

它们改进了等式推理，使编写代码更容易，并使编写更多种类的程序成为可能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T18:16:24.797

[Simon Peyton-Jones 在他的一组幻灯片《穿毛衬衫》](http://research.microsoft.com/en-us/um/people/simonpj/papers/haskell-retrospective/haskellretrospective.pdf)中对此给出了很好的回应。

> 懒惰很方便
> 
> 递归值非常有用
> 
> 懒惰让你诚实[关于纯洁]

最后一个原因对我来说是最重要的。Haskell 的计算纯度和对效果的严格控制在很大程度上归功于它的非严格性。

> 每种按值调用的语言都已屈服于副作用的警笛声

程序员想要编写类似 C 的代码，我认为这是在大多数语言中引诱的“警笛声”。在 Haskell 中，随意交错效果是没有意义的，因为非严格性意味着您无法确定何时执行效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T17:06:40.167

> 为什么 Haskell 有非严格函数，而标准 ML 没有？

因为，haskell 中的表达式以弱头范式计算，而标准 ML 表达式以范式计算。

然后，在 Haskell 中，您可以在标准 ML 中使用未评估的 thunk 进行推理，而这是您无法做到的。
但是，您应该知道可以将惰性添加到标准 ML。（例如，您可以在 ocaml 中执行此操作）

Haskell 中默认的惰性是一种设计选择，可能反映了这样一种信念，即创建一个默认处理惰性的编译器可以提高对函数式编程的理解，让研究社区向前迈出一步。

# session - 服务器如何与 RMI 中的客户端建立会话

> ID：14261735
> 
> 赞同：1
> 
> 时间：2013-01-10T15:48:17.617
> 
> 标签：session, rmi, distributed-computing, sessiontracking

我希望有人告诉我在哪里搜索如何在 RMI 中建立客户端和服务器之间的会话，即用于搜索目的的概念名称是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:25:46.403

我在 2001 年的书中将其命名为远程会话模式。

这个想法是有一个单一的 RMI 对象，绑定在注册表中，只有一个`login()`方法。如果成功，该方法会为每个调用返回一个新的 RemoteSession 对象，其中包含会话所需的 API。RemoteSession 当然是另一个远程接口。它还包含一个`logout()`取消导出对象的方法，它还实现了`Unreferenced`，作为终止会话的另一种方式。

RemoteSession 的每个实例都可以维护客户端状态，因此它是一个会话对象，并且由于获取 RemoteSession 对象的唯一方法是 via `login()`，因此它在第一个近似值上是安全的。

# c# - 函数调用中的 C# 委托

> ID：14261737
> 
> 赞同：3
> 
> 时间：2013-01-10T15:48:24.063
> 
> 标签：c#, delegates

我已经定义了一个这样的委托：

```
 delegate void processRecord(int a, int b); 
```

现在我想用它来创建一个匿名方法来提供函数调用。函数定义如下：

```
 void someFunction(processRecord fcn); 
```

我想`someFunction`用匿名方法调用，但这我做错了：

```
 someFunction(new processRecord(a, b) {
       // do stuff
   }); 
```

像这样的东西的正确语法是怎样的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T15:50:43.810

使用参数声明对方法的调用的正确语法`processRecord`是：

```
someFunction(delegate (int a, int b) {
    // use a and b here
}); 
```

您可以利用 lambda 语法调用您的`someFunction`, 因为`processRecord`与 兼容`Action<int,int>`，如下所示：

```
someFunction((a, x) => Console.WriteLine(a + "; " + x)); 
```

但是在 .net 框架中已经存在通用委托，`Action`因为`.NET 3.5`您可以使用它而不是创建自己的委托。

因此，您可以简单地将函数定义为

```
void someFunction(Action<int, int> fcn) {} 
```

然后打电话

```
someFunction( (a,b) => /*use a and b here*/ ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:50:37.733

你可以这样称呼它：

```
someFunction(delegate( int a, int b) {
   // do stuff
}); 
```

C# 编译器会发现你是`delegate processRecord`从调用的上下文中进行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:51:39.450

如果你在你的中使用 deletegate，你可以使用它 `someFunction`

```
 someFunction(delegate( int a, int b) {
       // do some stuff
    }); 
```

这是一个[`DEMO`](http://ideone.com/JGV6XS).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:51:31.343

以下是一些选项，所有这些选项都有效地做同样的事情：

```
someFunction((a,b) => DoStuff());

someFunction(delegate(int a, int b){ doStuff(); });

someFunction(new processRecord((int a, int b) => 
{
    doStuff(); doMoreStuff(); 
})); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T15:52:27.317

```
processRecord t = (q,w) =>
        {
            int n = q+w;
        };
        someFunction(t); 
```

# jquery - 简单的jquery appendTo

> ID：14261740
> 
> 赞同：0
> 
> 时间：2013-01-10T15:48:35.670
> 
> 标签：jquery

我是 jquery 的新手，所以请原谅这个问题：这是我的 html

```
<!DOCTYPE html>
<head>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src=teacher_index.js></script>
</head>
<body>

    <div id="lessons_viewer">
    </div>
</body> 
```

这是我的js：

```
var data=[
{image:"reading_practice.png"},
{image:"drag_meaning.png"}
]

function populate_lessons_viewer(data){
    for (var i=0,count=data.length;i<count;i++){
        $('<img/>', {
        className: 'lesson_image',
        src: data[i].image
        }).appendTo('#lessons_viewer');
    };
};

$(document).ready(populate_lessons_viewer(data)); 
```

我究竟做错了什么？图片没有附加！

ps 我知道如何在 js 中做到这一点，但我正在尝试学习 jquery。

我再次为我的新手错误和问题道歉，但是......当我移动时：

```
$(document).ready(populate_lessons_viewer(data)); 
```

声明到 html 文档中......而不是它的 js 文档。如果有人能解释一下，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:59:10.627

您已经声明了数据变量.. 无需通过尝试并将其传递给您的 document.ready 函数

```
var data=[
  {image:"reading_practice.png"},
  {image:"drag_meaning.png"}
] 
```

一个普通的 document.ready 函数是这样的

```
$(document).ready(function() {code here ...}); 
```

你正在尝试做

```
$(document).ready(function(data){code here ...}); 
```

您只需要摆脱数据参数，因为您已经声明了变量

```
function populate_lessons_viewer(){
    for (var i=0,count=data.length;i<count;i++){
        $('<img/>', {
        className: 'lesson_image',
        src: data[i].image
        }).appendTo('#lessons_viewer');
    };
};

$(document).ready(populate_lessons_viewer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:22:36.473

您的问题在于 $(document).ready() 语句。由于您在函数中有一个参数，它正在评估该函数并将其发送到 ready() 函数。您想将整个功能发送到其中。

使用 $(document) 完成此操作的一种方法是只传递函数名称，因为 data 已经是一个全局变量。

```
function populate_lessons_viewer() {
    //...
};

$(document).ready(populate_lessons_viewer); 
```

或者，作为大多数 jQuery 应用程序的首选，您可以使用 init() 函数。如果您曾经使用过 C 语言，这类似于将您的代码放在 main() 函数中。它将在加载文档后启动。

```
data = [
    {image: "foo.png"},
    {image: "bar.png"}
];

$(init);

function init() {
    //your code, such as:
    populate_lessons_viewer(data);
    //...other initial functions
}

function populate_lessons_viewer(data) {
    //....
} 
```

**更新：**我刚刚想到的另一个选择是将该函数封装在另一个函数中：

```
$(document).ready(function() {
    populate_lessons_viewer(data)
}); 
```

我已经对此进行了测试，并且确实有效。您不必更改其余代码。

# jquery - 新 Soundcloud 顶栏是如何编程的？

> ID：14261741
> 
> 赞同：0
> 
> 时间：2013-01-10T15:48:40.140
> 
> 标签：jquery, uinavigationbar, soundcloud

我很想知道是否有人知道新的 Soundcloud 网站是如何开发的？具体来说，即使用户已经离开当前正在播放的歌曲，歌曲如何继续通过顶栏音频播放器播放？

当您单击顶部条形波形时，它会将用户带回到正在播放的歌曲。可以使用 AJAX 和 Jplayer 复制相同的用户体验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:26:48.017

实际上有一篇博客文章详细介绍了我们的前端架构 - <a href="http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/" rel="nofollow ">http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/

还有一个关于 W3C Israel HTML5Fest 的演讲[http://www.youtube.com/watch?v=DXe9QjphsT8](http://www.youtube.com/watch?v=DXe9QjphsT8)

回答你的问题，是的，我不明白为什么不能使用 jPlayer 来做同样的事情。目前我们播放音频的首选库是 SoundManager。

**升级版**。我绝对建议您查看[http://zohararad.github.com/audio5js/](http://zohararad.github.com/audio5js/)，这是一个新库，可让您使用带有 Flash 回调的 HTML5 音频

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T15:50:23.767

在我看来，SoundCloud 是一个 SPA（单页应用程序）。可能使用 BackboneJS 或一些类似的 JavaScript 库构建...

SPA 是只有一页（理论上）同步加载的概念。其余的通过 AJAX 从服务器中提取视图和其他内容来完成，这些内容由一些 SPA 库在内部处理。

问候。

# mysql - 如何编写需要翻译两列的 SQL 查询？

> ID：14261743
> 
> 赞同：1
> 
> 时间：2013-01-10T15:48:45.387
> 
> 标签：mysql, join

我有两张表——一张是库存记录，另一张是翻译（供法语和德语用户使用）。

库存：

```
╔════╦═══════╦═══════════════════╦═══════════════════════════╗
║ ID ║ PRICE ║ ITEMTRANSLATIONID ║ ITEMCATEGORYTRANSLATIONID ║
╠════╬═══════╬═══════════════════╬═══════════════════════════╣
║  1 ║    10 ║               423 ║                      1323 ║
║  2 ║    31 ║              1776 ║                      1953 ║
╚════╩═══════╩═══════════════════╩═══════════════════════════╝ 
```

翻译：

```
╔══════╦═══════════╦════════════╦═════════╗
║  ID  ║  ENGLISH  ║   FRENCH   ║ GERMAN  ║
╠══════╬═══════════╬════════════╬═════════╣
║    1 ║ knife     ║ couteau    ║ messer  ║
║    2 ║ fork      ║ fourchette ║ gabel   ║
║  423 ║ spoon     ║ cuillère   ║ löffel  ║
║ 1323 ║ cultery   ║ couverts   ║ besteck ║
║ 1776 ║ table     ║ table      ║ tabelle ║
║ 1953 ║ furniture ║ meubles    ║ möbel   ║
╚══════╩═══════════╩════════════╩═════════╝ 
```

有没有办法编写 SQL 查询来获取每个库存项目的价格和翻译名称？我一次只需要一种语言。

如果只有一列需要翻译，我可以使用`INNER JOIN`. 问题是，有两列需要翻译——一列用于项目名称，另一列用于项目类别名称。

即所需输出（法语）

```
╔════╦═══════╦══════════╦══════════════╗
║ ID ║ PRICE ║   ITEM   ║ ITEMCATEGORY ║
╠════╬═══════╬══════════╬══════════════╣
║  1 ║    10 ║ cuillère ║ couverts     ║
║  2 ║    31 ║ table    ║ meubles      ║
╚════╩═══════╩══════════╩══════════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:52:01.663

在表上连接表`Translations`两次，`Stock`这样您就可以获得表中每一列的值`Stock`

```
SELECT  a.ID, a.Price, b.French AS Item, c.French AS ItemCategory  
FROM    Stock a
        INNER JOIN Translations b
            ON a.ItemTranslationId = b.ID
        INNER JOIN Translations c
            ON a.ItemCategoryTranslationId = c.ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/7fba2/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:51:24.737

使用此表结构，您需要对`JOIN`表进行`Translations`两次...一次获取`Item`，再次获取`ItemCategory`：

```
SELECT
    s.ID,
    s.Price,
    i.French AS Item,
    ic.French AS ItemCategory
FROM
    Stock s
    JOIN Translations i ON i.ID = s.ItemTranslationId
    JOIN Translations ic ON ic.ID = s.ItemCategoryTranslationId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:31:24.133

您可以使用此查询：

```
SELECT  a.ID, a.Price,
(select French from  Translations b where b.ID=a.ItemTranslationId) as ITEM,
(select French from  Translations c where c.ID=a.ItemCategoryTranslationId) as ITEMCATEGORY
FROM Stock a 
```

# php - 使用 jquery 传递选项选择变量

> ID：14261745
> 
> 赞同：1
> 
> 时间：2013-01-10T15:48:49.137
> 
> 标签：php, jquery, ajax

Noob 在这里尝试用 Jquery 做一些简单的事情。基本上我有一个小的选择选项下拉列表，如下所示：

```
<select onchange="javascript:swapContent('con3');">
    <option>selection 1</option>
    <option>selection 2</option>
    <option>selection 3</option>
</select> 
```

目前它通过 ajax 发布到这里的 $php 变量：

```
$contentVar = $_POST['contentVar']; 
```

javascript函数在这里：

```
<script language="JavaScript" type="text/javascript">
function swapContent(cv) {
    $("#myDiv").html('<img src="loader.gif"/>').show();
    var url = "myphpscript.php";
    $.post(url, {contentVar: cv} ,function(data) {
        $("#myDiv").html(data).show();
    });    
}
</script> 
```

我怎样才能发布选择选项下拉列表的值？

我意识到这是基本的，但我必须从某个地方开始，找不到向我展示如何做我需要的教程。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:52:30.157

> 我怎样才能发布选择选项下拉列表的值？

如果您想向游览脚本发送值，您应该首先为您的选项元素提供值（并为您的`<select>`元素提供一个 id 以便能够使用它并检索所选值）：

```
<select onchange="javascript:swapContent('con3');" id="myselect">
    <option value="value1">selection 1</option>
    <option value="value2">selection 2</option>
    <option value="value3">selection 3</option>
</select> 
```

接着：

```
// get the currently selected value from the dropdown
var value = $('#myselect').val();
$.post(url, { contentVar: cv, selectedValue: value }, function(data) {
    $("#myDiv").html(data).show();
}); 
```

另一方面，如果您想发送所选选项的文本，则可以使用：

```
// get the currently selected value from the dropdown
var text = $('#myselect option:selected').text();
$.post(url, { contentVar: cv, selectedText: text }, function(data) {
    $("#myDiv").html(data).show();
}); 
```

现在在您的 PHP 脚本中，您可以获取值：

```
$_POST['selectedValue'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:52:52.817

**HTML**：

从选择中删除内联 javascript 更改事件。

```
<select>
  <option>selection 1</option>
  <option>selection 2</option>
  <option>selection 3</option>
</select> 
```

**jQuery** :

将更改事件绑定到您的选择。在此事件中，`this.value`使用的是选择的值。

```
$(document).on("change", "select", function(){
    $("#myDiv").html('<img src="loader.gif"/>').show();
    var url = "myphpscript.php";

    $.post(url, {contentVar: this.value} ,function(data) {
        $("#myDiv").html(data).show();
        });    
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T15:53:04.257

```
var val = $('select option:selected').text(); 
```

使用 jQuery 的选择器语法，您首先选择“选择”控件，然后选择选择控件的“选项”子项。然后查找选定的状态。最后，返回文本。

当然，照原样，此代码将选择页面上的每个“选择”控件。最好给您的选择控件一个 id：

```
<select id="mySelect">
    <option>Some option</option>
    <option>Some other option</option>
</select> 
```

然后代码变成

```
var val = $('#mySelect option:selected').text() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T15:58:36.110

您可能需要考虑一种[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)方法，并且在您的 html 标记中没有 on-change 事件，而是附加一个事件处理程序，如下所示，来自[jQuery API 站点](http://api.jquery.com/change/)

```
<!DOCTYPE html>
<html>
 <head> 
  <style>div { color:red; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
 </head>
 <body>
  <select name="sweets">
    <option>Chocolate</option>
    <option>Candy</option>
    <option>Taffy</option>
    <option>Fudge</option>
    <option>Cookie</option>
 </select>
 <div></div>
 <script>
   $("select").change(function () {
    var str = "";
    $("select option:selected").each(function () {
       str += $(this).text() + " ";
    });
    $("div").text(str);
   })
  .change();
 </script>
 </body>
</html> 
```

# android - CSS font-face 不会在 PhoneGap 应用程序上加载

> ID：14261746
> 
> 赞同：0
> 
> 时间：2013-01-10T15:48:50.263
> 
> 标签：android, cordova, jquery-mobile

我使用 PhoneGap 在 Android 中实现了一个应用程序。所以 UI 是用 jQuery Mobile 实现的。我使用 CSS font-face 为应用程序文本提供自定义字体。

```
@font-face {
    font-family: "MyFont";
    src: url("../fonts/MyFont.ttf") format("truetype"),
    src: url("../fonts/MyFont.otf") format("opentype");
}
body {
    font-family: MyFont;
} 
```

但是当我在 Android 上安装应用程序时，默认字体会显示文本。

如何在 Android 中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:29:09.567

这是适用于 android 手机的正确语法：

```
@font-face {
    font-family: 'yanone';
    src: url('fonts/yanone/YanoneKaffeesatz-Regular-webfont.eot?') format('eot'), 
         url('fonts/yanone/YanoneKaffeesatz-Regular-webfont.woff') format('woff'), 
         url('fonts/yanone/YanoneKaffeesatz-Regular-webfont.ttf') format('truetype'), 
         url('fonts/yanone/YanoneKaffeesatz-Regular-webfont.svg#webfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

您还应该注意自定义字体的相对路径。

# ruby-on-rails - Rails：更新到非易受攻击的版本

> ID：14261747
> 
> 赞同：3
> 
> 时间：2013-01-10T15:48:52.143
> 
> 标签：ruby-on-rails, ruby

昨天发布了**严重的安全错误**，它允许**执行任意代码**：[CVE-2013-0156 和 CVE-2013-0155 的 Rails PoC 漏洞利用](http://ronin-ruby.github.com/blog/2013/01/09/rails-pocs.html)

我想将 rails 项目从 3.1.1 更新到最新版本：3.2.11

我在 gemfile 中有这些行：

```
gem 'rails', '3.1.1'
# ...
group :assets do
  gem 'sass-rails',   '~> 3.1.4'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end 
```

我更改了 rails 版本并运行`bundle update`：

```
Fetching source index for http://rubygems.org/
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    rails (= 3.2.11) x86-mingw32 depends on
      railties (= 3.2.11) x86-mingw32

    coffee-rails (~> 3.1.1) x86-mingw32 depends on
      railties (3.1.10)

Bundler could not find compatible versions for gem "actionpack":
  In Gemfile:
    rails (= 3.2.11) x86-mingw32 depends on
      actionpack (= 3.2.11) x86-mingw32

    meta_search (>= 1.1.0.pre) x86-mingw32 depends on
      actionpack (3.1.0.beta1) 
```

我什至不能用`bundle update rails`命令更新它。

更新rails的正确方法是什么？如果我在 gemfile 中更新 rails 版本并运行`bundle`，`sass-rails`/etc 版本会出现错误。
我应该将哪些版本放入此文件中`sass-rails`？`coffee-rails`我在哪里可以找到这些信息？

PS“~>”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:44:42.380

3.2.11 不是唯一安全的版本。还发布了其他包含安全修复程序的 gem：3.1.10、3.0.19 和 2.3.15。

从对 3.1 的依赖`sass-rails`来看，您似乎已经在使用 3.1.10？

您可以使用 3.1.10，也可以升级`sass-rails`到`coffee-rails`3.2 版本，但您还必须为 Rails 3.2 更新您的应用程序。在您的情况下，我会选择 3.1.10，至少要先获取安全修复程序。

另外，您询问了`~>`. 这基本上意味着最新版本的 gem 具有相同的主要和次要版本，以及大于或等于您指定的任何版本的点版本，`-> 3.1.1`最新的 3.1.x 也是如此，但不是任何 3.2 版本。

发生捆绑器错误是因为您告诉它使用 rails 3.2，但`sass-rails`告诉它使用 3.1。当 Bundler 收到这样相互矛盾的指令时，它不知道该怎么办。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:35:31.647

如果由于某种原因您不能直接更新 Rails 版本，您可能也有兴趣将临时补丁注入`config/initializers`.

见这里：
[https ://groups.google.com/forum/#!topic/rubyonrails-security/61bkgvnSGTQ/discussion](https://groups.google.com/forum/#!topic/rubyonrails-security/61bkgvnSGTQ/discussion)

从上面的 Rails 3.x 帖子中，需要运行这些：

```
# Disable XML
ActionDispatch::ParamsParser::DEFAULT_PARSERS.delete(Mime::XML) 

# Disable YAML and Symbol parsing
ActionDispatch::ParamsParser::DEFAULT_PARSERS.delete(Mime::YAML) 
ActiveSupport::XmlMini::PARSING.delete("symbol") 
ActiveSupport::XmlMini::PARSING.delete("yaml") 
```

# php - 如何使用 php 有效地翻译网站内容，保持 SEO 友好？

> ID：14261748
> 
> 赞同：1
> 
> 时间：2013-01-10T15:48:55.133
> 
> 标签：php, seo, translate

这是场景：

我有一个网站，我会翻译并最终在上面应用一个好的 SEO。哪种方法最适合翻译内容（菜单链接、大约 10 篇文章、alt 标签、标题标签、元标签、html lang 等），同时被 Google、Bing、Yandex 和其他搜索引擎轻松索引？

我的第一个想法是使用一个翻译 php 函数，该函数由我自己制作的数组组成（我已经有了它的原型），它获取内容并以用户的语言显示它。

这是正确的道路吗？这里的问题是我想确保有一个动态系统，允许我将来添加一种新语言。

也许 MySql 是正确的选择？

该网站不使用 cms，我自己使用 php 制作了它，但如果需要，我可以毫无问题地依赖 MySql。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:22:29.577

您基本上有 3 种选择，每种选择各有利弊：

**1：**正如 Dainis Abols 建议的那样，将其放入数据库中-取决于您的服务器的设置方式，这可能是最慢、最繁重的系统路线（尽管这都是相对的，除非您获得数百万查看一个小时）。

**2：**使用PHP库文件；我倾向于将库文件用于字段标签（名字、姓氏等）等小型单个项目，并将 CMS 管理的 HTML 等较大的内容存储在数据库中……这减少了数据库调用，但为您加载的每个字典增加了一点开销变成脚本`<?php $this->page->dictionary->product = Dictionary::load("product"); ?>`之类的东西。

**3：**最后，我个人认为值得看看 PHP 的[gettext](http://php.net/manual/en/function.gettext.php)实现，尽管您需要像[poedit](http://www.poedit.net/)这样的东西来维护 PO（压缩翻译文件）。这使您能够非常快速地维护翻译，因为您只需将文本包装在一个简单的下划线函数中即可在 PHP 文档中输入文本：

例如`<?= _("Hello World"); ?>`

然后，您可以在压缩的 PO 文件中维护翻译 - 它非常高效（可能比使用原生 PHP 文件更快）但是在自然语言的细微差别方面确实存在一些缺点。

例如，如果您有一个字段标签“标题” `<?= _("Title"); ?>`，那么所有的实例都`_("Title")`将以相同的方式翻译。

这意味着您不能将“Title”既用作人名的表单标签又用作书名；例如，在德语中，您可能希望将*Anrede*用于一个“标题”，将*Titel*用于另一个。

虽然，要真正使用`gettext`您可能需要运行自己的服务器 - 当您更改 PO 文件时可能需要重新启动 Apache：\

至于**搜索引擎**，它们会从您的代码中读取输出，因此您使用哪种方法执行翻译并没有太大区别，但理想情况下，您可能希望保持 URL RESTful，因此无论您是否包含 PHP 字典，调用数据库或使用 gettext （或稍后将您的想法从一种更改为另一种），您将能够使用类似的方式将语言映射到 URL，`http://www.mysite.com/en_gb/widgets`这样您就可以在不更改 URL 的情况下更改程序的工作*方式*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:55:07.080

将所有文本存储在 db 中，并为语言应用另一个字段：

```
+----+---------+---------+
| id | text_en | text_de |
+----+---------+---------+
|  1 | English | Deutch  |
+----+---------+---------+ 
```

现在，当用户切换语言时，只需使用该语言的字段：

```
$lang = 'en';
$query = "SELECT text_".$lang." FROM texts WHERE id = 1"; 
```

类似的东西。因此，您所有的客户端文本都将始终存储在数据库中。所以你的输出会是这样的：

```
<div id="header"><?=get_db_text_for_id(1)?></div> 
```

当然，您需要预防措施和更多领域，但这是一般的想法。

# oracle - 需要找出特定Menu的层级信息

> ID：14261749
> 
> 赞同：0
> 
> 时间：2013-01-10T15:48:56.560
> 
> 标签：oracle, oracle11g

我使用“select ... start with initial-condition connect by recurse-condition”语法编写了一个查询，以获取特定菜单的层次信息。

```
select count(SUB_MENU_ID) from FND_MENU_ENTRIES_VL
start with MENU_ID = 76580
and SUB_MENU_ID is not null
connect by prior menu_id=sub_menu_id 
```

生产/生产：16

现在，如果我编写查询以手动将记录数提高到 2 级，那我的输出为 36。

```
select distinct(SUB_MENU_ID) from FND_MENU_ENTRIES_VL 
where MENU_ID = 76580
and SUB_MENU_ID is not null
union
select distinct(SUB_MENU_ID) from FND_MENU_ENTRIES_VL where MENU_ID in(
select distinct(SUB_MENU_ID) from FND_MENU_ENTRIES_VL where MENU_ID = 76580 
and SUB_MENU_ID is not null) 
```

请告知第一个查询有什么问题。

这是我的数据：

```
SUB_MENU_ID MENU_ID
    67723   72570
    67723   72581
    67829   72582
    67849   76580
    67850   67849
    68039   72878
    70604   72578
    70702   72578
    70734   76458
    71330   76580
    72570   76580
    72578   76580
    72581   76580
    72582   76580
    72712   76475
    72878   76580
    73144   73145
    73145   76580
    73244   76580
    74226   71330
    74356   76580
    76457   76458
    76458   76580
    76459   76580
    76460   76462
    76461   76462
    76462   76580
    76463   76466
    76464   76466
    76465   76466
    76466   76580
    76467   72578
    76475   76580
    76591   76466
    77139   76580
    77140   77139
                                            67849
                                            71330
                                            72578
                                            72582
                                            72878
                                            73244
                                            74356
                                            76458
                                            76459
                                            76462
                                            77139
                                            76580 
```

# jquery - 一步一步的表单使用jQuery隐藏错误的div点击第一步

> ID：14261753
> 
> 赞同：1
> 
> 时间：2013-01-10T15:49:06.253
> 
> 标签：jquery

我创建了一个使用 jQuery 逐步完成 3 个步骤的分步表单。

第一步，如何调整 jQuery 以隐藏我的`customise`div 并在单击返回时显示`entire_product`div？

在我单击第一步时，它隐藏了所有 div。

* * *

我使用 jQuery 最初显示`entire_product`div，然后当单击链接时，它会隐藏`entire_product`div 并改为显示`customise`div（代码如下）。

```
<div class="entire_product">
    Content here.
    <a id="customise" class="configure-demo" href="#">Configure new system &amp; get quote</a>
</div> 
```

这是`customise`div：

```
<div class="customise" style="display:none;">
    <form id="customisesystem" method="post" action="">
        <div id="first-step">
            <div class="steps">
                <p><b>Step 1 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Options 1</p>

                <div id="customise-area">
                    <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
                </div>
            </div>
        </div>

        <div id="second-step">
            <div class="steps">
                <p><b>Step 2 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Options 2</p>

                <div id="customise-area">
                    <input type="checkbox" name="software[]" value="<?php the_title(); ?>">
                </div>
            </div>
        </div>      

        <div id="third-step">
            <div class="steps">
                <p><b>Step 3 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Options 3</p>

                <div id="customise-area">
                    <input type="submit" name="submit" id="submit" value="submit" />
                </div>
            </div>
        </div>      
    </form>
</div> 
```

然后我有一个 jQuery 的负载，即创建返回和下一步按钮来逐步完成 3 个步骤：

```
<script type="text/javascript">
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
jQuery(document).ready(function( $ ) {
            // init
            $('#customisesystem > div')
                .hide()
                .prepend(navHTML);
            $('#first-step .prev').remove();
            $('#last-step .next').remove();

            // show first step
            $('#first-step').show();

            $('a.next').click(function(){
                var whichStep = $(this).parent().parent().attr('id');

                if( whichStep == 'first-step' )
                {
                    // validate first-step
                }
                else if( whichStep == 'second-step' )
                {
                    // validate second-step
                }
                else if( whichStep == 'last-step' )
                {
                    // validate last-step
                }

                $(this).parent().parent().hide().next().show();
            });

            $('a.back').click(function(){
                $(this).parent().parent().hide().prev().show();
            });
        });

jQuery(document).ready(function( $ ) {
$("#customise").click(function(){
    $(".entire_product").hide();
    $(".customise").show();
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:24:25.193

看到这个：http: [//jsfiddle.net/nnKp4/1/](http://jsfiddle.net/nnKp4/1/)

```
 $('a.back').click(function(){
          var whichStep = $(this).parent().parent().attr('id');
          if(whichStep == "first-step"){
            $(".customise").hide();
            $(".entire_product").show();
          }
          else{
            $(this).parent().parent().hide().prev().show();
          }
 }); 
```

# javascript - 图片未加载 - PhoneGap

> ID：14261760
> 
> 赞同：0
> 
> 时间：2013-01-10T15:49:16.830
> 
> 标签：javascript, jquery, html, image, cordova

我以编程方式将图像添加到我的 html 中。在 Firefox 中，图像加载良好。但是在我测试的所有设备上的 android 中，都不会出现图像。它只是在一个框中显示他们的 alt。

HTML：

```
<div class="ui-popup-container fade in" id="popupPhoto-popup" tabindex="0">
        <div data-role="popup" id="popupPhoto" data-overlay-theme="a" data-theme="d" data-corners="false" class="ui-popup ui-body-d ui-overlay-shadow" aria-disabled="false" data-disabled="false" data-shadow="true" data-transition="none" data-position-to="origin">
            <!-- insert images here -->
        </div>
    </div>
<div class="ui-screen-hidden ui-popup-screen" id="popupCloseRight-screen"></div> 
```

JS：

```
//shows images upon clicking part in table
function tableSelect(location){
//remove previous images
$("#popupPhoto").text("");
//if image was added or not
var boolean = false;
//splits part names
var part = $("#table"+location).text().split(" ");
//part[0] always empty
for(var i=1;i<part.length;i++){                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
    //so 11 works
    if(part[i] == "11"){
        part[i]="OO";
    }
    //runs through every name in imagedir to see if image exists
    for(var j=0;j<imagedir.length;j++){
        //check if single image
        if(part[i] == imagedir[j]){
            $("#popupPhoto").append($("<img>", {src: 'images/gradegeoImages/'+part[i]+'.png', "class": 'popphoto', alt: part[i] }));
            boolean = true;
            break;
        //checks if double image
        }else if(part[i].concat("1") == imagedir[j]){
            $("#popupPhoto").append($("<img>", {src: 'images/gradegeoImages/'+part[i]+'1.png', "class": 'popphoto', alt: part[i].concat("1") }));
            $("#popupPhoto").append($("<img>", {src: 'images/gradegeoImages/'+part[i]+'2.png', "class": 'popphoto', alt: part[i].concat("2") }));
            boolean = true;
            break;
        }
    }
    //if no images, display "No information available"
    if(boolean == false){
        $("#popupPhoto").append($("<div>", {text: 'No information availabe for '+gradegeo+' of '+part[i]}));
    }
}
//show images
$("#popupPhoto").addClass("ui-popup-active");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:23:02.247

我发现当我在图像路径中调用我的图像时，part[i] 的值是大写字母，而图像名称是小写的。在我弄清楚这一点后，我感到非常愚蠢……显然，Firefox 不在乎您的图像是否区分大小写，因为它们在调试过程中就在那里工作。

# asp.net - 如何有条件地检查 EpiServer:MenuList 中 .aspx 文件中的属性？

> ID：14261765
> 
> 赞同：0
> 
> 时间：2013-01-10T15:49:29.303
> 
> 标签：asp.net, episerver

我正在 EpiServer 中构建一个菜单，我只想包含特定页面类型的项目。如果重复项的页面类型等于“X”，则将其打印出来，否则什么也不做。

```
<ItemTemplate>
 <li>
    <span class="menu-level-1">
      <%# Container.CurrentPage.PageTypeName == "NameOfPageType" ? "Something": "" %>                       
      <span class="menu-divider"></span>
    </span>
 ...
 ..
 . 
```

我想打印出每个（符合条件的）项目页面名称，即：

```
<EPiServer:Property PropertyName="PageName" runat="server"> 
```

执行代码而不是打印出“某事”的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:07:06.650

您可以选择以下任何一种：

```
<%# Container.CurrentPage.PageTypeName == "NameOfPageType" ? Container.CurrentPage.PageName : "" %> 
```

或使用标准 ASP.NET PlaceHolder 控件包装您的 Property 控件：

```
<span class="menu-level-1">
  <asp:PlaceHolder runat="server" Visible=<%# Container.CurrentPage.PageTypeName == "NameOfPageType" %> >
        <EPiServer:Property PropertyName="PageName" runat="server" />
      </asp:PlaceHolder>
      <span class="menu-divider"></span>
</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:19:35.787

[`PageTreeData`您可以从底层控件](http://sdk.episerver.com/library/cms6.1/html/T_EPiServer_Web_WebControls_PageTreeData.htm)挂钩到 Filter 事件。

尝试这样的事情

```
yourMenulistControl.Filter += 
       (o, args) => new FilterCompareTo("PageTypeName", "YOURPAGETYPENAME")
                        .Filter(args.Pages); 
```

# c - sscanf 与管道 C

> ID：14261767
> 
> 赞同：1
> 
> 时间：2013-01-10T15:49:34.123
> 
> 标签：c, parsing, scanf

我在使用 sscanf 解析 c 时遇到问题

我用一个名为 read_line() 的函数在控制台上阅读了一段文本

```
char cm1[100],cm2[100],cm3[100]
printf("Enter command:");
read_line(var_text);
/*var_text = cat /etc/passwd | cut -f1 d: | sort */
int num = sscanf(var_text,"%s | %s | %s",cm1,cm2,cm3); 
```

好的，如果我`var_text cat | cut | sort`在 cm1 return cat 中写入 cm2 return cut 和 cm3 return sort，但如果我写`cat /etc/passwd | cut -f1 d: | sort`，cm1 return cat 和 cm2 和 cm3 none...

我用c做了一个shell，我需要命令和属性

谢谢大家，抱歉英语不好:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:53:13.023

`%s`格式说明符将在第一个空白字符处停止处理。如果是：

> 猫 /etc/passwd | 切-f1 d：| 种类

它将是`cat`第一个`%s`结束的空间。然后，格式说明符期望 a`|`不存在`cm2`且未`cm3`填充。您可以使用扫描集来实现此目的：

```
if (3 == sscanf(var_text, "%99[^|]| %99[^|]| %99s", cm1, cm2, cm3))
{
} 
```

注意使用宽度说明符来防止缓冲区溢出并检查返回值`sscanf()`以确保填充所有目标变量。

格式说明符`%99[^|]`声明最多读取 99 个字符（比目标缓冲区大小少一个以容纳空终止符），直到`|`遇到一个字符。

[请参阅http://ideone.com/Cz1Qef](http://ideone.com/Cz1Qef)上的演示。

# ios - NSPredicate 在不同的实体上

> ID：14261771
> 
> 赞同：1
> 
> 时间：2013-01-10T15:49:52.980
> 
> 标签：ios, objective-c, core-data, nspredicate, nsfetchedresultscontroller

我想在不同的实体上制作 NSPredicate 。这是我的核心数据库。

![在此处输入图像描述](../Images/e1fe2450f29c3c8e85623c2a355fc6be.png)

为了简单起见，这是我应该做的查询。

```
Select c.c_name From Company c, Person p Where c.c_id = p.cu_company_id 
```

现在我想知道如果我想达到上面查询的结果，我的谓词应该是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:15:14.767

假设 c_id 和 cu_company_id 是整数，你可以试试

```
 NSFetchRequest *fr = [[NSFetchRequest alloc] initWithEntityName:@"Person"];
    NSError *error;
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"cu_company_id == data.company.c_id"];
    [fr setPredicate:predicate];
    NSArray *persons = [self.managedObjectContext executeFetchRequest:fr error:&error]; 
```

一旦你有了 people 数组，你就可以遍历它并获取这个人的名字。反其道而行之

```
 NSFetchRequest *fr = [[NSFetchRequest alloc] initWithEntityName:@"Company"];
    NSError *error;
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"c_id == data.person.cu_company_id"];
    [fr setPredicate:predicate];
    NSArray *companies = [self.managedObjectContext executeFetchRequest:fr error:&error]; 
```

一旦你有了公司数组，你就可以遍历它并获得公司的名称。

# r - 从文本文件中提取数据

> ID：14261776
> 
> 赞同：7
> 
> 时间：2013-01-10T15:50:04.340
> 
> 标签：r

在其他语言中似乎有类似的问题，但我在 R 中找不到。

我在一个目录的子目录中有许多文本文件；它们都具有扩展名 (.log)，并且包含文本和数据的混合。我想从这些相对较大的文件中提取几行。

例如，一个文件如下...

```
blahblahblah

NUMBER OF CARTESIAN GAUSSIAN BASIS FUNCTIONS =  210

blahblahblah

 ----------------------------------------<br />
 CPU timing information for all processes<br />
 ========================================<br />
 0: 8853.469 + 133.948 = 8987.417<br />
 1: 8850.817 + 126.587 = 8977.405<br />
 2: 8851.925 + 128.576 = 8980.501<br />
 3: 8847.992 + 125.871 = 8973.864<br />
 ----------------------------------------<br />
 ddikick.x: exited gracefully.<br />

blahblahblah 
```

我想收集基函数的数量（本例中为 210）和 CPU 时间总量。

“NUMBER OF CARTESIAN GAUSSIAN BASIS FUNCTIONS =”对每个文件都是唯一的；即，如果我在文本编辑器中打开文件并使用此字符串进行搜索，我只返回这一行。同样对于“所有进程的 CPU 计时信息”和“正常退出”。

我很感激我似乎没有做很多事情来帮助自己，但我只是不知道从哪里开始。如果有人能指出我正确的方向，我希望能够填补其余部分。

在@Ben（见下文）给我的帮助之后，这是我最终使用的代码，

```
filesearch <- function (x) {

f <- readLines(x)
cline <- grep("NUMBER OF CARTESIAN GAUSSIAN BASIS FUNCTIONS",f,
                    value=TRUE)
val <- as.numeric(str_extract(cline,"[0-9]+$"))
coline <- grep("^ +CPU timing information", f)
numstr <- sapply(str_extract_all(f[coline+2:5],"[0-9.]+"),as.numeric)
cline1 <- sum(numstr[4,])/60
output <- c(val, cline1)
return(cat(output,"\n"))
} 
```

我获取了这个函数并键入了我每次需要的文件，然后我手动将两个结果转移到另一个文件中。没有我想要的那么优雅，但这样做为我节省了很多时间。再次感谢@Ben。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:11:26.700

也许

```
library(stringr)
f <- readLines("datafile.txt")
cline <- grep("NUMBER OF CARTESIAN GAUSSIAN BASIS FUNCTIONS",f,
                    value=TRUE)
val <- as.numeric(str_extract(cline,"[0-9]+$")) 
```

将工作？

要获取其他值，请尝试

```
cline <- grep("^ +CPU timing information",f)
(numstr <- sapply(str_extract_all(f[cline+2:5],"[0-9.]+"),as.numeric))
##         [,1]     [,2]     [,3]     [,4]
## [1,]    0.000    1.000    2.000    3.000
## [2,] 8853.469 8850.817 8851.925 8847.992
## [3,]  133.948  126.587  128.576  125.871
## [4,] 8987.417 8977.405 8980.501 8973.864 
```

已经转置了值矩阵，`sapply`所以最后一行是我们想要的位（对应于文件中的最后一列）。`numstr[4,]`使用or`numstr[nrow(numstr),]`或提取它`tail(numstr,1)`。

（**编辑**：在“CPU 计时”字符串之前允许空格）（**编辑**：做对了！）

（要对所有日志文件执行此操作，请将其打包在一个函数`list.files(pattern="\\.log$")`中并与...结合使用`sapply`）

# java - Shiro-Guice 过滤器链角色配置

> ID：14261778
> 
> 赞同：4
> 
> 时间：2013-01-10T15:50:09.783
> 
> 标签：java, security, roles, shiro

如何在`addFilterChain`方法中配置角色？

在 INI 文件中，它类似于

```
[url]
/secure/** = authc, roles[admin] 
```

在 Java 方法中会怎样？

```
addFilterChain("/secure/**", ROLES); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:56:09.687

ShiroWebModule 提供了一个模仿 INI [] 语法的“config”方法。

因此，相当于您的 INI 配置将是：

```
addFilterChain("/secure/**", AUTHC, config(ROLES, "admin")); 
```

# debugging - XP到Win7升级后VB6 App崩溃故障排除

> ID：14261780
> 
> 赞同：2
> 
> 时间：2013-01-10T15:50:14.263
> 
> 标签：debugging, windows-7, vb6, remote-debugging

我有一个我提供支持的 VB6 应用程序。此应用程序适用于 Windows XP 和 Windows 7。使用用户状态迁移工具将一些用户从 Windows XP 迁移到 Windows 7。这些用户现在在应用程序中打开某些屏幕（表单）时会收到一般的“应用程序已崩溃”Windows 错误消息。我的假设是缺少 dll/ocx 引用，但我无法追踪它。

我尝试了许多/不同的故障排除技术：

*   完全卸载并重新安装我的应用程序
*   手动重新注册我知道使用的所有 dll 和 ocx
*   在损坏的计算机和正常工作的计算机上运行进程监视器以​​比较访问的 dll 和 ocx。答案可能就在这里，但即使在过滤掉大部分背景噪音之后，数据量仍然是压倒性的。至少我在它崩溃之前检查了所有的调用以及所有不成功的调用。所有不成功的调用都在工作和非工作之间匹配。
*   安装了 Windows 调试器工具并捕获了故障转储。使用 DebugDiag 分析故障转储。DebugDiag 说异常在 msvbvm60.dll 中。我尝试为我的 exe 构建一个 PDB 文件并将其加载到 DebugDiag 中以获取有关异常发生位置的更多详细信息，但 DebugDiag 不想接受 PDB（可能在这里做错了，但它似乎忽略了它。但是，当我进行远程调试时，这个相同的 PDB 文件可以正常工作。）
*   我重新编译了我的 VB6 程序，没有在 PCCode 中进行任何优化。我在网上读到，有时在 PCCode 中构建，虽然对性能不利，但会告诉你真正的例外。
*   使用上面创建的 PDB 文件远程调试 VB6 应用程序。调试器说应用程序在创建新窗口后崩溃，在一行设置`MousePointer = vbHourGlass`...对我来说，这似乎不太可能是错误的真正原因。程序中至少有 20 个其他位置调用了同一行并且一切正常。（*忘记这个了*）
*   使用 Dependency Walker 并在工作和非工作计算机上分析应用程序。依赖 walker 发现的所有错误在两台计算机之间都是相同的。在工作计算机上没有发现其他依赖项，并且在非工作计算机上缺少的所有依赖项也在工作计算机上丢失。

这些操作都没有改变我的错误消息或向我显示错误是什么（除非它确实是鼠标光标问题）...... Windows 事件日志中没有与应用程序崩溃相关的条目。

非工作计算机和工作计算机都具有相同的基本 Windows 7 映像，唯一的区别是 USMT 更改了什么，这进一步让我相信这是某种古怪的配置更改或缺少 dll/ocx 或者可能是未注册的dll/ocx.

任何关于如何追查问题根源的想法或想法将不胜感激。

**更新 1 - 对**
@MarkHall 问题的回答我尝试以管理员身份运行它，但没有关闭 UAC。该应用程序以具有完整 UAC 的非管理员身份在 Windows 7 机器上运行良好。Windows XP 是 32 位的，Windows 7 是 64 位的，但它同样适用于用户未从 Windows XP 迁移的类似框。

@Beaner它可能将设置存储在已损坏的某处，但是远程调试使我认为它更有可能是其他东西，因为它似乎在与UI相关的步骤上死了，这让我认为它可能是丢失的dll/ocx 参考。

@Bob77 该应用程序已安装到`Program Files (x86)`. 虽然许多库确实驻留在同一个文件夹中，但它们都已注册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T07:15:12.650

彼得，我经常注意到调试器会指示一行实际上不正确的代码，具体取决于实际汇编语言中发生错误的位置。您应该在将光标设置为`vbHourGlass`. 您的异常可能发生在该代码行之前，但该行是调试器认为的实际错误代码行。

既然你说它发生在窗口打开时，我会仔细查看你可能在表单上引用的任何 ocx，但实际上可能没有被使用或调用。你可能有一个你不打算在那里的，这可能会导致安全问题，或者在 Win7 上？如果需要，手动编辑 .frm 文件，并查看表单引用的所有 GUID。

有可能一台机器正在使用 PER-USER 注册，而另一台机器正在使用 PER-SYSTEM 注册？我不知道...

我会更仔细地查看您尝试打开的表单，并对您在表单加载事件中所做的一切非常谨慎，等等。这听起来可能像在一个系统上启用 Windows Aero 一样愚蠢，而不是在另一个系统上启用，或者某些其他类型的“主题”设置将 VB 表单渲染例程扔进一个嘶嘶声......甚至可能是愚蠢的东西作为您从中选择的图标中的透明颜色索引？

如果您仍在开发此应用程序（或至少维护它），请创建一个全新的表单，并在表单上重新创建所有控件等（抵制从旧表单复制/粘贴它们的诱惑...... .)，然后看看这是否有效。然后，一次将所有事件代码复制到新表单一个事件，至少有足够的事件代码来使表单功能，即使它只是一个“死表单”，不加载任何数据，或者任何形式的假设去做。每次更改后检查和调试，您最终会找到它。当然，请确保您隔离其中一个已失效的系统，以便拥有一个可以在其上复制问题的平台，否则它只是猜测。我发现使用带有异机还原的 Acronis 之类的东西是一个很好的选择，可以将图像文件放入一个好的 HV，比如 VirtualBox，然后将该映像还原为 VM，这样您就可以在不干扰实际用户的情况下进行调试。这听起来像是很多工作，但话说回来，重新编写一个已经存在的应用程序也是如此，对吧？:)

失败了...... `/*`并且`*/`是你的朋友！（好吧，我们正在处理 VB，所以`'`会是你最好的朋友！呵呵......但我会开始注释掉表单上的所有代码，直到那个吸盘打开。然后一旦它打开，开始放一行回到一次，然后重新运行它......这就是所谓的“VooDoo 调试”，但有时，你必须做你必须做的......

非常感谢彼得！:) 现在你让*我*参与其中，我觉得**我**是调试这个傻瓜的人！就像我试图修复的代码一样！:)

让我知道这是否有帮助...我实际上对您的发现很感兴趣。

# actionscript-3 - AS 3 简单易用

> ID：14261783
> 
> 赞同：1
> 
> 时间：2013-01-10T15:50:24.013
> 
> 标签：actionscript-3, animation, tween

我怎样才能移动一个物体并在它移动时能够看到它？不只是消失并出现在不同的位置，就像使用以下代码一样。

> buttonL2_btn.addEventListener（MouseEvent.CLICK，左）；
> 
> 功能左（事件：事件）：无效{
> 
> ```
>  box_mc.x =241.5;
> } 
> ```

这会将 myObject 移动到指定的任何位置，但我希望在移动时能够看到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:54:17.637

在您的示例中，您只是在按下某个按钮时设置它的 X 位置，当您需要将 X 更改为 EnterFrame 事件时，如下所示：

```
this.addEventListener(Event.ENTER_FRAME, move);

function move(event:Event):void{
      box_mc.x -= 5
} 
```

您的 box_mc 应根据您的帧速率向左移动 5 个像素。

* * *

您可以轻松地使用缓动库。我强烈推荐[TweenMax](http://www.greensock.com/tweenmax/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:24:05.987

好吧，我有点厌倦了人们不断建议一些补间引擎。当然他们摇滚，但它不会帮助 OP 了解他在做什么。

Kircho 使用非常简单的补间移动对象我建议在 onEnterFrame 事件中使用以下代码让您的对象移动：

```
addEventListener(Event.ENTER_FRAME, onEnterFrame);
var xGoal:Number = 100;     //::  The target X destination for your object
var yGoal:Number = 100;     //::  The target Y destination for your object
var smothness:Number = 10;  //::  Smoothness factor for movement.  The lower the  value the faster the movement.

function onEnterFrame(e:Event):void
{
      box_mc.x += (xGoal - box_mc.x) / smothness;
      box_mc.y += (yGoal - box_mc.y) / smothness;
} 
```

将以设定的平滑度将您的盒子对象移动/缓和到所需的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:45:08.027

您可以安装任何 437 个可用的补间引擎
，也可以添加几行代码

设置一个保存目标值的变量

```
var dest:Number = 241.5; // this is what gets updated on mouse click 
```

在框的enterframe事件上：

```
function onBoxEnterFrame(e:MouseEvent):void{
  if (dest != box_mc.x){
    var easeNum:Number = 0.4 // between 0 and 1, the higher the number, the slower the transition
    box_mc.x = box_mc.x * easeNum + dest * (1-easeNum);
  }
} 
```

您可以添加几行以在位置接近时捕捉位置（小于 0.1 差异）或使用更线性的变化，您可以像增量一样进行调整，`box_mc.x += 5;`直到它与 dest 数匹配

# jquery - 为什么我的 jQuery 脚本没有看到我更改了元素的类？

> ID：14261784
> 
> 赞同：0
> 
> 时间：2013-01-10T15:50:27.393
> 
> 标签：jquery

我有这个超级简单的 jQuery 脚本，但我无法正常工作。我当然错过了一些东西，因为我以前做过这样的事情，没有任何问题。

Codepen 链接：[http ://codepen.io/jimmykup/full/pjJhC](http://codepen.io/jimmykup/full/pjJhC)

```
$("div.minimize").click(function() {

    alert("Changing to RED");
    $(this).removeClass('minimize');
    $(this).addClass('maximize');

});

$("div.maximized").click(function() {

    alert("Changing to BLUE");
    $(this).removeClass('maximize');
    $(this).addClass('minimize');

}); 
```

问题是一旦我`<div>`的类已更改为`.maximize`jQuery 继续运行，就好像该类仍然存在一样`.minimize`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:51:34.103

您的代码没有看到类更改，因为该事件仅在*绑定事件时与*选择器匹配的元素上注册。

如果您的代码真的那么简单，最好只在单个处理程序中测试该类。我添加了一个额外的类`clickable`，以便事件不会绑定到页面上的*每个* `div`：

```
$('div.clickable').on('click', function() {
    var $this = $(this);
    if ($this.hasClass('minimize')) {
       $this.addClass('maximize').removeClass('minimize');
    } else {
       $this.addClass('minimize').removeClass('maximize');
    }
}); 
```

如果您不想将`clickable`类添加到您的 div 中，请`div.minimize,div.maximize`根据@Kevin 的回答在选择器中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:52:21.490

更改元素的类不会更改绑定到它的事件。但是，您可以使用委托事件来完成此操作，因为委托事件将事件绑定到查找匹配子元素的父元素。

```
$(document).on("click","div.minimize",function() {

    alert("Changing to RED");
    $(this).removeClass('minimize').addClass('maximize');

});

$(document).on("click","div.maximized",function() {

    alert("Changing to BLUE");
    $(this).removeClass('maximize').addClass('minimize');

}); 
```

或者更好的是，单个事件。

```
$("div.minimize,div.maximize").click(function(){
    if ($(this).is(".minimize")) {
        alert("Changing to RED");
        $(this).removeClass('minimize').addClass('maximize');
    }
    else {
        alert("Changing to BLUE");
        $(this).removeClass('maximize').addClass('minimize');
    }
}); 
```

甚至比这更好，

```
$("div.minimize,div.maximize").click(function(){
    alert("Changing to " + $(this).is(".minimize") ? "RED" : "BLUE");
    $(this).toggleClass('maximize minimize');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:56:24.563

发生这种情况是因为当你绑定点击事件时，当时没有 div.maximize。

换句话说，只是 $("div.minimize").click() 被应用，它仍然附加到 div。

相反，我会将事件附加到文档或 div 的父级：

```
$(document).on("click", ".minimize", function() {

    alert("Changing to RED");
    $(this).removeClass('minimize');
    $(this).addClass('maximize');

});

$(document).on("click", ".maximized", function() {

    alert("Changing to BLUE");
    $(this).removeClass('maximize');
    $(this).addClass('minimize');

}); 
```

那应该行得通。如果这个想法只是在这两个类之间切换，您可以使用以下代码来简化代码：

```
$(document).on("click", ".minimize, .maximize", function() {
    $(this).toggleClass('minimize');
    $(this).toggleClass('maximize');
}); 
```

# dictionary - 如何在 Pascal 中实现 trie 数据结构？

> ID：14261785
> 
> 赞同：1
> 
> 时间：2013-01-10T15:50:27.183
> 
> 标签：dictionary, pascal, trie

我想尝试一下 Pascal。我开始是，但我的插入方法不能正常工作。这是程序的一部分：

```
type PVrchol = ^Vrchol;
     Vrchol = record
       endOfTheWord:boolean;
       deti:array['a'..'z'] of PVrchol;
     end;
var trie:PVrchol;

FUNCTION getChildnode(current:PVrchol;k:char):PVrchol;
    Begin
      if current^.deti[k]<>nil then
         getChildnode:=current^.deti[k]
       else
         getChildNode:=nil;
    End;

PROCEDURE insertWord(word:string;var trie:PVrchol);
var i:integer;
  current, childNode:PVrchol;
Begin
  current:=trie;
  childNode:=current;
  for i:=1 to Length(word) do begin
      childNode:=getChildnode(current,word[i]);
      if childNode=nil then begin
        new(childNode);
        current^.deti[word[i]]:=childNode;
      end;
      current:=childNode;
  end;
  current^.endOfTheWord:=true;
End;
BEGIN
new(trie);
//there are some methods reading the words from input, and calling the insertWord procedure.
END. 
```

insertWord 过程总是得到一个单词，所以参数不会是“”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:23:51.150

问题可能是记录不会像类一样自动归零？尝试添加

```
fillchar(childnode,sizeof(childnode),#0); 
```

在新的（子节点）之后

# ember.js - 创建子视图的控制器操作？

> ID：14261786
> 
> 赞同：0
> 
> 时间：2013-01-10T15:50:32.657
> 
> 标签：ember.js

使用最新的 ember.js 构建，我正在尝试使用控制器操作来创建 childView 并将其推送到当前视图中。但我不知道如何与相关视图交谈。

在我的 search.handlebars 中：

```
<p>Results:</p>
{{#each animal in someResults}}
  <li><a {{action showAnimal animal}}>{{animal.species.commonName}}</a></li>
{{/each}} 
```

在 App.SearchController 中，我有：

```
showAnimal: function(animal) {
  // Now what?? The below is obviously wrong
  this.animalView = App.AnimalView.create({controller: animal});
  var childView = App.SearchView.createChildView(this.animalView);
  App.SearchView.get('childViews').pushObject(childView);
} 
```

从内部可见的对象`showAnimal`是：

*   `animal`- 好的
*   `this.container`- 在这里看不到任何有用的东西
*   `this.target`- 貌似路由器？

无论如何，我很困惑。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:31:13.287

认识到我的问题有点神秘/具体情况，这是我最终所做的，以防有人关心。请注意，一些 API 随后发生了变化。

回想一下，我正在尝试在当前视图中弹出一个 jQuery UI 对话框。[Luke Melia 关于这个主题的精彩文章](http://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/)是我最初方法的基础。

在车把中：

```
{{#each animal in someResults}}
  <li><a {{action showAnimal animal target="view" href=true}}>{{animal.species.commonName}} </a></li>
{{/each}} 
```

然后在 App.SearchView 中：

```
App.SearchView = Ember.View.extend({
  templateName: 'my-appname/~templates/search',
  showAnimal: function(animal) {
    animalDialog = App.AnimalView.create()
    animalDialog.set('context', animal);
    animalDialog.append();
  }
}); 
```

为了完整起见，这里是 AnimalView。

```
App.AnimalView = JQ.Dialog.extend({
  templateName: 'my-appname/~templates/animal',
  autoOpen: true,
  modal: true,
  closeText: "Ok"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:52:46.723

您使用 the`{{action}}`而不是`{{linkTo}}`helper 有什么原因吗？`{{linkTo}}`将生成与助手一起传递的动物的链接。[http://emberjs.com/guides/templates/links/](http://emberjs.com/guides/templates/links/)。

然后，您可以[按照 Router API Guides 中的](http://emberjs.com/guides/routing/defining-your-routes/)说明定义路由。

# asp.net - 为什么存储过程的 C# 更新查询不起作用？

> ID：14261789
> 
> 赞同：0
> 
> 时间：2013-01-10T15:50:42.877
> 
> 标签：asp.net, stored-procedures

这个问题源于一篇网络文章在弹出窗口中插入和更新一行 GridView。[在这里](http://www.aspsnippets.com/Articles/Add-Edit-Update-Records-in-GridView-using-Modal-Popup-in-ASP.Net.aspx)。

单击 GridView 中的编辑按钮，您会看到一个弹出窗口进行编辑。您编辑窗口并单击“保存”将其保存在数据库中。保存方法是：

```
protected void Save(object sender, EventArgs e)
{

    using (SqlCommand cmd = new SqlCommand())

    {
        cmd.CommandType = CommandType.StoredProcedure;
        //cmd.CommandText = "AddUpdateCustomer";

        cmd.CommandText = "UPDATE [Customers] SET [CompanyName] = @CompanyName ,[ContactName] = @ContactName WHERE CustomerID = @CustomerID";

        cmd.Parameters.AddWithValue("@CustomerID", txtCustomerID.Text);
        cmd.Parameters.AddWithValue("@ContactName", txtContactName.Text);
        cmd.Parameters.AddWithValue("@CompanyName", txtCompany.Text);

        GridView1.DataSource =  this.GetData(cmd);
        GridView1.DataBind();

        cmd.ExecuteNonQuery();

    }
} 
```

在线文章使用了`cmd.CommandText`我更改的注释行，因为它不起作用，也没有找到它的实用性。我还添加了最后一行 `cmd.ExecuteNonQuery();`来执行查询但实际上数据库没有变化。

该方法可能有什么问题`Save`以及如何处理该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:11:09.873

您已请求调用存储过程，但您注释掉的行是包含存储过程名称的行。

看起来您实际上是在执行原始 SQL，因此您应该尝试：

```
cmd.CommandType = CommandType.Text; 
```

但是您的 CommandText 行也不起作用，因为它不是真正的 SQL。它需要包含变量的内容而不是变量名。而且您应该执行查询而不是非查询。

```
protected void Save(object sender, EventArgs e)
{
    using (SqlCommand cmd = new SqlCommand())
    {
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = String.Concat("UPDATE [Customers] SET [CompanyName] = ", txtCompany.Text, ", [ContactName] = ", txtContactName.Text, " WHERE CustomerID = ", txtCustomerId.Text, ";");

etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T06:31:00.127

您需要编写代码以在页面加载时填充文本框，如下所示：

```
public page_load()
{
   if(!ispostBack)
   {
     // Write code to fill controls first time
    }
} 
```

这是因为在每次回发时，asp.net 都会将控件值保存在视图状态中，并且当从服务器控件返回的页面填充有旧值并且数据库表将使用旧值而不是新值进行更新时

# javascript - 输入的字符代码是什么？

> ID：14261791
> 
> 赞同：-6
> 
> 时间：2013-01-10T15:50:47.220
> 
> 标签：javascript, html, unicode

考虑这段代码：http:
[//jsfiddle.net/YttKb/](http://jsfiddle.net/YttKb/)

我希望我的 javascript 添加新的文本行。我正在使用 utf-8 编码。我需要插入什么字符才能换行？显然`\n`不会创建新的文本行（仅创建新的换行符）。虽然`\n\n`创建一个新行。

**编辑：**

我已经更新了小提琴。如果您在第一行的末尾手动按回车，即使有换行符（`\n`） ，它也不会根据需要创建新行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:51:33.043

它有点特定于平台。它通常是`\n`或`\r\n`。

当然，如果您谈论的是 HTML，那么这些都不会有所作为，因为在 HTML 中（除非您正在处理`pre`格式，无论是`pre`元素还是样式中具有各种类似`pre`值的任何东西`white-space`），空白只是空间。您需要使用一个元素来垂直分解事物（`<br>`或者更适合您正在做的事情）。

看着你的小提琴，你正在处理 HTML，所以`\n`,`\r\n`等是无关紧要的。这是一个更新的这样做：

```
$("#test").append("<br>And hello from script"); 
```

[小提琴](http://jsfiddle.net/a3qN3/)

...但`<br>`通常是最后的手段。通常你可以做一些更符合语义的事情。

# javascript - 谷歌地图打印不正确

> ID：14261798
> 
> 赞同：1
> 
> 时间：2013-01-10T15:51:05.823
> 
> 标签：javascript, google-maps

我在通过 JavaScript API V3 打印 Google 地图时遇到了一些问题。问题是地图显示为两部分，地图的顶部和底部部分相互重叠。

代码如下所示：

```
 var geocoder;
  var map;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 12,
      center: latlng,
      scrollwheel: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    codeAddress();             
  }

  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });      
  } 
```

谁能说有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:00:04.240

试试这个它有效

```
.map{
    width: 1000px;
    height: 410px;
    overflow: visible;
    position: absolute;
    background-color: rgb(229, 227, 223);
} 
```

里面的html标签（div id="map_canvas" class="map"）

# android - 无需连接即可从 AP 读取 WiFi 属性

> ID：14261800
> 
> 赞同：1
> 
> 时间：2013-01-10T15:51:12.800
> 
> 标签：android, wifi, android-wifi

我想知道Android中是否有任何方法可以从WiFi接入点读取一些可配置的属性，而无需连接/验证到网络。基本上，我只想列出实现/宣传我正在开发的特定 Web 服务的网络。

谢谢， - 拉斐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:59:30.797

您可以使用`WifiManager`.

> 此类提供用于管理 Wi-Fi 连接的所有方面的主要 API。通过调用 Context.getSystemService(Context.WIFI_SERVICE) 获取此类的实例。它处理几类项目：
> 
> 已配置网络的列表。可以查看和更新​​列表，并且可以修改各个条目的属性。当前活动的 Wi-Fi 网络（如果有）。可以建立或断开连接，并可以查询有关网络状态的动态信息。接入点扫描的结果，包含足够的信息来决定要连接的接入点。它定义了在 Wi-Fi 状态发生任何变化时广播的各种 Intent 操作的名称。这是执行 Wi-Fi 特定操作时使用的 API。要在抽象级别执行与网络连接相关的操作，请使用 ConnectivityManager。

这是链接：

[http://developer.android.com/reference/android/net/wifi/WifiManager.html](http://developer.android.com/reference/android/net/wifi/WifiManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:22:47.973

您可以检索[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html)实例：

```
WifiManager wifiManager = ( WifiManager ) mContext.getSystemService ( mContext.WIFI_SERVICE ) ; 
```

您还可以获得[NetworkInfo](http://developer.android.com/reference/android/net/NetworkInfo.html)对象：

```
 ConnectivityManager connManager = ( ConnectivityManager ) context
            .getSystemService ( Context.CONNECTIVITY_SERVICE ) ;
    NetworkInfo mWifi = connManager.getNetworkInfo ( ConnectivityManager.TYPE_WIFI ) ; 
```

# sql - 无效的对象名称“DQM.dbo.ST_0043_BLANK_CONSENT_SAP_SIEBEL”

> ID：14261808
> 
> 赞同：0
> 
> 时间：2013-01-10T15:51:43.193
> 
> 标签：sql, sql-server, cursor

**大家好，是的，来自较早问题的同一个人......在游标/SQL方面我真的很糟糕我一直在使用我制作的以下存储过程/游标..它编译正确，当我出现问题时尝试执行它我得到这个错误：**

消息 208，级别 16，状态 1，第 1 行无效的对象名称“DQM.dbo.ST_0043_BLANK_CONSENT_SAP_SIEBEL”。

（0 行受影响）消息 208，级别 16，状态 1，第 1 行无效的对象名称“DQM.dbo.ST_0044_CONSENT_SIEBEL_SAP_DIFF”。

（0 行受影响）消息 208，级别 16，状态 1，第 1 行无效的对象名称“DQM.dbo.ST_0045_CONSENT_SIEBEL_BANNER_DIFF”。

**现在我知道所有这些对象都存在，因为当我全选时，我会返回行。任何帮助，将不胜感激。**

```
 USE [Adhoc_datafix]
GO
/****** Object:  StoredProcedure [dbo].[CostTest_02]    Script Date: 01/10/2013 15:43:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
ALTER PROCEDURE [dbo].[CostTest_02]
AS
BEGIN

DECLARE @Issue_id int;
DECLARE @Master_id int;
DECLARE @Issue_table varchar(255);
DECLARE @price real;
DECLARE @rowcount bigint;
DECLARE @sql varchar(3000)

DECLARE cost_cursor cursor FOR
SELECT [Issue Id], [Master Issue Id], [Issue Table], [Price]
from Adhoc_datafix..[IssueTable]
FOR UPDATE OF [Issue Id];

OPEN cost_cursor;
FETCH NEXT FROM cost_cursor into @Issue_ID, @Master_id, @Issue_table, @Price

WHILE @@FETCH_STATUS = 0
BEGIN

SELECT @sql = 'Select count(*) from DQM.' + quotename(@Issue_table)
EXEC(@sql)
set @Rowcount = @@rowcount

UPDATE ADHOC_DATAFIX..[Issue Cost]
set [Issue Id] = @Issue_ID ,
    [Master Issue Id] = @Master_ID ,
    [Row Count] = @Rowcount,
    [Cost] = CAST(@Rowcount * @price as money)

--WHERE CURRENT OF cost_cursor;
FETCH NEXT FROM cost_cursor into @Issue_ID, @Master_id, @Issue_table, @Price
END

close cost_cursor;

DEALLOCATE cost_cursor;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:23:29.593

问题似乎是您正在使用`QUOTENAME()`将架构和表名一起引用：

```
select quotename('dbo.ST_0045_CONSENT_SIEBEL_BANNER_DIFF')
-- returns [dbo.ST_0045_CONSENT_SIEBEL_BANNER_DIFF] 
```

因此 SQL Server 认为您正在尝试查询架构中调用`[dbo.ST_0045_CONSENT_SIEBEL_BANNER_DIFF]`的表：`DQM`

```
select * from DQM.[dbo.ST_0045_CONSENT_SIEBEL_BANNER_DIFF] 
```

但是您确实想查询架构中调用`[ST_0045_CONSENT_SIEBEL_BANNER_DIFF]`的表：`dbo`

```
select * from DQM.dbo.[ST_0045_CONSENT_SIEBEL_BANNER_DIFF] 
```

要解决此问题，请`dbo.`从`@Issue_Table`字符串的开头删除前缀并在 之后对其进行硬编码`DQM`，或者如果您想支持不同的模式，请使用`PARSENAME()`分别获取模式和表名：

```
SELECT @sql = 'Select count(*) from DQM.' + quotename(parsename(@Issue_table, 2)) + N'.' + quotename(parsename(@Issue_table, 1)) 
```

作为一般建议，每当您使用动态 SQL 时，[给自己一个简单的方法](https://stackoverflow.com/questions/10739306/setting-variables-in-sql-functions-probs/10739598#10739598)或`PRINT`最终`SELECT`字符串，这样您就可以查看您构建的查询是否真的正确。

# sql - 多部分标识符无法绑定

> ID：14261810
> 
> 赞同：1
> 
> 时间：2013-01-10T15:51:49.300
> 
> 标签：sql, sql-server-2008

我查看了有关此主题的几篇帖子，但无法解决此错误。我已经链接了我试图包含在 SQL 2008 中的 WHERE 子句中的服务器。我能够在没有 WHERE 子句的情况下成功执行查询。我确定我忽略了一些东西，只是需要一些建议。多部分标识符的消息位于 WHERE 子句中的这一行。

LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME.SocialSecurityNumber

```
SELECT     dbo.VP_PUNCHORIGIN.PERSONNUM, EXPORT_DIRECTTIME_1.SocialSecurityNumber,         dbo.VP_PUNCHORIGIN.PERSONFULLNAME
FROM         dbo.VP_PUNCHORIGIN INNER JOIN
                  LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME AS EXPORT_DIRECTTIME_1 ON 
                  dbo.VP_PUNCHORIGIN.PERSONNUM = EXPORT_DIRECTTIME_1.SocialSecurityNumber
WHERE     (dbo.VP_PUNCHORIGIN.PERSONNUM NOT IN
                      (SELECT     LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME.SocialSecurityNumber AS Expr1
                        FROM          LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME AS EXPORT_DIRECTTIME_1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:54:45.623

您在子句子查询中使用别名`WHERE`但不引用它：

```
SELECT p.PERSONNUM, 
    EXPORT_DIRECTTIME_1.SocialSecurityNumber,         
    p.PERSONFULLNAME
FROM dbo.VP_PUNCHORIGIN p
INNER JOIN LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME AS EXPORT_DIRECTTIME_1 
    ON p.PERSONNUM = EXPORT_DIRECTTIME_1.SocialSecurityNumber
WHERE p.PERSONNUM 
         NOT IN (SELECT EXPORT_DIRECTTIME_2.SocialSecurityNumber 
                 FROM LAWNURSEDB.NGDemo.dbo.EXPORT_DIRECTTIME AS EXPORT_DIRECTTIME_2) 
```

# c++ - Mac 上使用 C++ 的非法指令 4

> ID：14261820
> 
> 赞同：2
> 
> 时间：2013-01-10T15:52:14.210
> 
> 标签：c++, macos

我通过终端在我的mac（10.8.2）上运行此代码，并且对于某些n它以“非法指令4”终止，有人知道为什么，或者如何停止它吗？

我很困惑，因为除了 n = 43、45、47 和 57 之外，代码运行良好。

同样在 n=60 之后，似乎所有 n 都会发生这种情况。可能是内存问题，因为它适用于较低的 n 值。

注意：与整数 c 有关的任何事情都纯粹是为了减少第一个 while 循环。最好我希望 while 循环读取 b<251 给我 250 次迭代，但我改为运行 b<51 for c=1,2,3,4,5 之类的东西来获得 5 个具有 50 个结果而不是 1 个的不同文件250。

代码如下：

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
using namespace std;

int main()
{

  int a,b,c,f,i,j,k,m,n,s;
  double p,Time,Averagetime,Energy,energy,Distance,Length,DotProdForce,Forcemagnitude,
         ForceMagnitude[101],Force[101][4],E[10001],En[501],x[101][4],y[101][4];

  clock_t t1,t2;
  t1=clock();

  b=1;
  c=1;
  Time=0.0;

  while(b<251){

    clock_t t3,t4;
    t3=clock();

    /*  set the number of points */
    n=45;

    /* check that there are no more than 100 points */
    if(n>100){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    /* reset the random number generator */
    srand((unsigned)time(0));  

    for (i=1;i<=n;i++){
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

      for (k=1;k<=3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    /* calculate the energy */
    Energy=0.0;

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                    +pow(x[i][3]-x[j][3],2));

        Energy=Energy+1.0/Distance;
      }
    }

    /* Save Original Points */
    for(i=1;i<=n;i++){
      y[i][1]=x[i][1];
      y[i][2]=x[i][2];
      y[i][3]=x[i][3];
    }

    /* Loop for random points m times*/
    m=10;

    if (m>100){
      cout << "The m="<< m << " loop is inefficient...lessen m \n";
      exit(0);
    }

    a=1;

    while(a<m){

      /* assign random points */
      for (i=1;i<=n;i++){
        x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (k=1;k<=3;k++){
          x[i][k]=x[i][k]/Length;
        }
      }

      /* calculate the energy */
      energy=0.0;

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){
          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

          energy=energy+1.0/Distance;
        }
      }

      if(energy<Energy)
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            Energy=energy;
            y[i][j]=x[i][j];
          }
        }
      else
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            energy=Energy;
            x[i][j]=y[i][j];
          }
        }

      a=a+1;
    }

    /* Create string stream 1 */
    ostringstream String1;
    String1 << "Bestrandonpoints_" << n;  //add number

    /* Output these points */
    ofstream File1 (String1.str().c_str());
    File1 << "Energy=" << Energy << "\n";
    for(i=1;i<=n;i++){
      File1 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
    }
    File1.close(); 

    /* For energy file later */
    E[0]=Energy;

    /* Start doing gradient flow approach */
    a=1;
    s=0;
    f=0;
    Forcemagnitude=1.0;

    if(n>80)
      p=0.005;
    else if(n>60)
      p=0.01;
    else if(n>40)
      p=0.02;
    else
      p=0.05;

    while(Forcemagnitude>0.00005){

      /* Reset initial force and energy change */

      for(i=1;i<=n;i++){ 
        Force[i][1]=0.0; 
        Force[i][2]=0.0; 
        Force[i][3]=0.0; 
      } 
      /* Calculate force on each particle */

      for(i=1;i<=n;i++){ 
        for(j=1;j<i;j++){

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));
          Force[i][1]=Force[i][1]+((x[i][1]-x[j][1])/(pow((Distance),3))); 
          Force[i][2]=Force[i][2]+((x[i][2]-x[j][2])/(pow((Distance),3))); 
          Force[i][3]=Force[i][3]+((x[i][3]-x[j][3])/(pow((Distance),3))); 
        } 

        for (j=i+1;j<=n;j++){ 

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));
          Force[i][1]=Force[i][1]+((x[i][1]-x[j][1])/(pow((Distance),3))); 
          Force[i][2]=Force[i][2]+((x[i][2]-x[j][2])/(pow((Distance),3))); 
          Force[i][3]=Force[i][3]+((x[i][3]-x[j][3])/(pow((Distance),3)));
        }
      }

      /* Add the force to my points */
      for(i=1;i<=n;i++){

        DotProdForce=Force[i][1]*x[i][1]+Force[i][2]*x[i][2]+Force[i][3]*x[i][3];

        y[i][1]=x[i][1];
        y[i][2]=x[i][2];
        y[i][3]=x[i][3];

        Force[i][1]=Force[i][1]-DotProdForce*y[i][1];
        Force[i][2]=Force[i][2]-DotProdForce*y[i][2];
        Force[i][3]=Force[i][3]-DotProdForce*y[i][3];

        x[i][1] = y[i][1]+p*(Force[i][1]);
        x[i][2] = y[i][2]+p*(Force[i][2]);
        x[i][3] = y[i][3]+p*(Force[i][3]);

        /* Bring it back onto sphere */

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (j=1;j<=3;j++){
          x[i][j]=x[i][j]/Length;
        }
      }

      /* Calculate the new energy */

      energy=0.0;

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));
          energy=energy+1.0/Distance;
        }
      }

      E[a]=energy;

      /* Choose best energy and therefore best points */
      if (energy<Energy)
        Energy=energy,s=s+1;
      else
        energy=Energy,f=f+1,p=(9.5*p)/10;

      for(i=1;i<=n;i++){
        ForceMagnitude[i]=pow((pow(Force[i][1],2)+pow(Force[i][2],2)
                               +pow(Force[i][3],2)),0.5);
      }

      for(i=1;i<=n-1;i++){
        if(ForceMagnitude[i]<ForceMagnitude[i+1])
          ForceMagnitude[i]=ForceMagnitude[i+1];
        else
          ForceMagnitude[i+1]=ForceMagnitude[i];
      }

      Forcemagnitude=ForceMagnitude[n];

      a=a+1;
    }

    En[b]=Energy;

    b=b+1;

    t4=clock();
    float diff ((float)t4-(float)t3);
    float seconds = diff / CLOCKS_PER_SEC;

    Time = Time + seconds;

  }

  Averagetime = Time/(b-1);

  cout << fixed << setprecision (4) << "Average Time: " << Averagetime << "(s) \n";
  cout << fixed << setprecision(10) << "Energy=" << Energy << "\n";

  t2=clock();
    float diff ((float)t2-(float)t1);
    float seconds = diff / CLOCKS_PER_SEC;

  /* Create string stream 2 */
  ostringstream String2;
  String2 << "GFPoints_" << n;  //add number

  /* Output these points */
  ofstream File2 (String2.str().c_str());
  for(i=1;i<=n;i++){
    File2 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
  }
  File2.close(); 

   /* Create string stream 3 */
  ostringstream String3;
  String3 << "GFEnergies_" << n;  //add number

  /* Output these points */
  ofstream File3 (String3.str().c_str());
  for(i=1;i<a;i++){
    File3 << fixed << setprecision (10) << E[i] << "\n";
  }
  File3.close(); 

  /* Output to help with gnuin.txt */
  ofstream File4 ("mypoints");
  for(i=1;i<=n;i++){
    File4 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
  }
  File4.close(); 

  /* Create string stream 4 */
  ostringstream String4;
  String4 << "GFInfo_" << n;  //add number

  /* Output these points */
  ofstream File5 (String4.str().c_str());
  File5 << "Iterations=" << a-1 << "\n";
  File5 << "Successes=" << s << " Failures=" << f << "\n";
  File5 << fixed << setprecision(20) << "Energy=" << Energy << "\n";
  File5 << fixed << setprecision(5) << "Total run time: " << seconds << "(s) \n";
  File5 << fixed << setprecision(5) << "Average run time: " << Averagetime << "(s) \n";
  File5.close(); 

  /* Create string stream 5 */
  ostringstream String5;
  String5 << "GF%Energies_" << n << "_" << c;  //add number

  /* Output these points */
  ofstream File6 (String5.str().c_str());
  for(i=1;i<b;i++){
    File6 << fixed << setprecision(20) << En[i] << "\n";
  }
  File6.close();

  cout << fixed << setprecision(5) << "Run time: " << seconds << "(s)" << "\n";
  return 0;

} 
```

感谢您对这个主题的任何启发，A.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:02:31.997

尝试编译：

```
-mmacosx-version-min=10.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:06:15.917

明显的问题是这些行：

```
E[a]=energy;
En[b]=Energy; 
```

您在每次循环迭代时递增`a`和`b`，但不要根据固定数组边界检查它们；因此，如果循环迭代太多次，您将在数组之外写入。

也许您想用动态数组 ( ) 替换它们，或者如果或变得太大`std::vector<double>`，您可能想中止。`a``b`

# php - 获取正在运行或挂起的 PHP 脚本的堆栈跟踪

> ID：14261821
> 
> 赞同：10
> 
> 时间：2013-01-10T15:52:15.197
> 
> 标签：php, debugging, stack-trace

我有一个每天晚上从 cron 作业运行的脚本。最近，在脚本执行几分钟后，它开始完全冻结，我不知道为什么。如果这是 Java，我可以简单地运行`kill -3 PID`，它会在标准输出中打印一个线程转储。PHP 中是否有任何等价物，我可以在其中获取正在运行的 PHP 脚本上的当前堆栈跟踪（理想情况下是内存信息）的转储？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T16:04:38.957

您可以做的最好的事情是`--enable-debug`在`configure`. 如果该过程仍然挂起，您可以使用 gdb 和一些宏通过以下步骤获取 PHP 级别的堆栈跟踪：

```
$ gdb -p $PHP_PID
(gdb) bt     # Get a system-level stacktrace, might already give some info
(gdb) source /path/to/php-src/.gdbinit # Load some useful macros
(gdb) dump_bt executor_globals.current_execute_data
            # Macro from PHP's .gbinit giving PHP stack trace
            # If you for whatever reason are using a thread-safe PHP build you have to do this:
(gdb) ____executor_globals
(gdb) dump_bt $eg.current_execute_data 
```

然后提前调试:-)

请注意，要使其正常工作，您必须拥有一个带有符号信息的 PHP 二进制文件，以`--enable-debug`确保这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-01T15:53:30.647

我注意到有一个使用 pcntl_signal 的可能解决方案。我自己没有试过，你可以在这里找到一些示例代码：

[https://secure.phabricator.com/D7797](https://secure.phabricator.com/D7797)

```
function __phutil_signal_handler__($signal_number) {
  $e = new Exception();
  $pid = getmypid();
  // Some phabricator daemons may not be attached to a terminal.
  Filesystem::writeFile(
    sys_get_temp_dir().'/phabricator_backtrace_'.$pid,
    $e->getTraceAsString());
}

if (function_exists('pcntl_signal')) {
  pcntl_signal(SIGHUP, '__phutil_signal_handler__');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T15:56:08.557

是的。您可以使用[`debug_backtrace`](http://php.net/manual/de/function.debug-backtrace.php). 您也可能需要[`memory_get_usage`](http://php.net/manual/de/function.memory-get-usage.php).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-18T11:40:04.677

如果您安装了 PHP 的 gdb 和调试符号，您可以获得完整的 PHP 回溯。

安装调试符号的方法可能因发行版而异。例如，我在 Amazon Linux 上运行`rpm -qa | grep php56-common`并将结果传递给`debuginfo-install`. 请注意，使用标准包管理器安装调试符号可能不会产生预期的结果 - 在 Amazon Linux 上，我在运行时得到了不同版本 PHP 的调试符号，`yum install php56-debuginfo`而 gdb 不喜欢这样。

如果您已将[机器配置为生成核心转储](https://bugs.php.net/bugs-generating-backtrace.php)，您甚至不需要运行该进程即可获得回溯。您可以`kill -ABRT $pid`稍后检查核心转储。

然后，您可以使用 开始调试正在运行的进程`gdb -p $pid`或使用`gdb /usr/bin/php $path_to_core_dump`.

键入`bt`将为您提供 C 堆栈跟踪。有时这足以让您知道可能出了什么问题。确保调试符号安装正确；`bt`应该指向 PHP 源代码中的文件名和行号。

现在试试`p executor_globals.current_execute_data`。它应该打印类似`$1 = (struct _zend_execute_data *) 0x7f3a9bcb12d0`. 如果是这样，这意味着 gdb 可以检查 PHP 的内部结构。

使用一点 Python 脚本，您可以生成完整的 PHP 回溯。输入`python-interactive`然后插入这个小脚本：

```
def bt(o):
  if o == 0: return
  print "%s:%d" % (o["op_array"]["filename"].string(), o["opline"]["lineno"])
  bt(o["prev_execute_data"])

bt(gdb.parse_and_eval("executor_globals.current_execute_data")) 
```

请注意，此方法在很大程度上取决于 PHP 的内部结构，因此它可能不适用于早期或以后的版本。我用 php 5.6.14 做到了这一点。这种方法的优点是它适用于正在运行的进程和核心转储，而且您不必重新编译 PHP 或重新启动 PHP 脚本。您甚至可以在发现挂起进程*后安装 gdb 和调试符号。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T15:58:37.387

如果 PHP 脚本超过最大运行时间，它应该超时。这肯定会为您解决问题；等它坏了，你的堆栈跟踪就出来了。

我想您的代码（或 php.ini）中可能有一些东西将最大运行时间设置为零以阻止它中断。如果你有这个，那么摆脱它（或者如果默认值真的太小，将它设置为一个非常大的超时）。

您可能还想尝试使用 xDebug 或类似工具运行它，这将为您提供探查​​器跟踪，该跟踪将为您提供程序的调用树，并允许您单步执行 IDE 中的代码，因此您可以看到到底发生了什么；如果那里有一个无限循环，你应该能够很快地从中识别出来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-30T01:53:23.603

我想提出避免使用 php 调试符号的替代方法。在某些情况下，安装调试符号更麻烦，即当我们在非根 docker 容器中运行 httpd 时。这种方法需要安装 xdebug 扩展（例如，已经安装在基于 Openshift 的 PHP 容器中）

首先，下载这个 gdb 脚本：[dumpstack.gdbscript](https://gist.githubusercontent.com/yudhiwidyatama/1dce8c80b979663302177bbd8c0d2de5/raw/35e4bb3a2d54ca7d21f75fac77e9e1f17a77e7d1/dumpstack.gdbscript)，并将其保存在 /tmp/dumpstack.gdbscript 中。

其次，像这样调用 gdb（用 php 进程 ID 替换 $pid）：

```
gdb --batch --readnever --pid=$pid --command=/tmp/dumpstack.gdbscript 2>/dev/null 
```

结果将类似于这些：

> [启用使用 libthread_db 的线程调试]
> 使用主机 libthread_db 库“/lib64/libthread_db.so.1”。
> 0x00007fe37f597d47 来自 /lib64/libc.so.6
> {main}@/opt/app-root/src/enterprisetracker/index.php:0
> global@/opt/app-root/src/enterprisetracker/index.php :117
> UploadDownload@/opt/app-root/src/enterprisetracker/system/codeigniter/CodeIgniter.php:197 library@/opt/app-root/src/enterprisetracker/system/application/controllers/uploaddownload.php:5 _ci_load_class@ /opt/app-root/src/enterprisetracker/system/libraries/Loader.php:91 global@/opt/app-root/src/enterprisetracker/system/libraries/Loader.php:827 session_start@/opt/app-root /src/enterprisetracker/system/application/libraries/DX_Auth.php:15 [新 LWP 57961]
> [新 LWP 57960]
> [新 LWP 57956]
> [新 LWP 57955]
> [新 LWP 57954]
> [新 LWP 57953]
> [新 LWP 57952]

如果您需要转储所有运行 PHP 脚本的 httpd 进程，请下载此 bash 脚本[dumpphp.sh](https://gist.githubusercontent.com/yudhiwidyatama/1dce8c80b979663302177bbd8c0d2de5/raw/35e4bb3a2d54ca7d21f75fac77e9e1f17a77e7d1/dumpphp.sh)，使其可执行并运行。

# tridion - 针对旧版本模板发布 SDL Tridion 内容

> ID：14261822
> 
> 赞同：3
> 
> 时间：2013-01-10T15:52:16.397
> 
> 标签：tridion

我的内容是针对我上传的 (c# dll) 模板构建块的早期或早期版本发布的。

*   在模板生成器中查看代码时 - 一切都很好。
*   预览/发布代码的最新版本时不会被拾取。

上传的 DLL 是否缓存在某处？

我正在使用 SDL Tridion 2001 SP1 HR 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:14:18.970

是 - 发布者缓存程序集。为了调查这个问题，我建议编辑 `C:\Program Files (x86)\Tridion\bin\TcmPublisher.exe.config`添加一个日志输出文件，看看你是否可以通过这种方式获得更多信息。

正如弗兰克所说，重新启动发布者应该可以解决问题。

# jquery - 在多页应用程序中使用 Breeze

> ID：14261826
> 
> 赞同：2
> 
> 时间：2013-01-10T15:52:20.593
> 
> 标签：jquery, asp.net-mvc-4, knockout.js, breeze

我正在尝试为我正在开发的 ASP.NET MVC 4 应用程序设置 MVVM。最近，我遇到了来自 John Papa 的出色演示/代码示例（可以在此处查看[http://www.johnpapa.net/recent-presentation-on-spa-basics/](http://www.johnpapa.net/recent-presentation-on-spa-basics/)）。

他谈到拥有 jquery/knockout.js/breeze.js 软件堆栈，但仅限于单页应用程序 (SPA) 的上下文中。

查看代码 - 我看到 bootstrapper.js 巧妙地为所有视图设置了绑定。

```
ko.applyBindings(vm.sessions, $(app.viewIds.sessions).get(0));
ko.applyBindings(vm.speakers, $(app.viewIds.speakers).get(0));
ko.applyBindings(vm.session, $(app.viewIds.session).get(0)); 
```

如果我有更多的 cshtml 文件，在更复杂的应用程序中拆分视图，我如何优雅地处理导航发生时的引导绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:09:55.360

您可以使用几个选项（在我的脑海中）链接到 html 的其他视图：1）@Html.Partial 2）[敲除外部模板插件](https://github.com/ifandelse/Knockout.js-External-Template-Engine) 3）自定义 AJAX 去获取视图的 HTML 4）模板引擎您选择抓住它 5) RequireJS 及其文本插件 6) 将它们全部加载到 1 页中（对于任何大小的东西都很讨厌）

如果你已经有淘汰赛，。您可能想要使用 Knockout 外部模板插件。它非常适合引入远程 HTML。如果你已经有了 require.js，那么文本插件也很不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:58:08.827

您仍然可以将其作为 SPA，但将所有“页面”分成单独的 cshtml 文件，然后使用 Html.Partial 将它们加载到 index.cshtml 中：

```
 @Html.Partial("_Substation")
 @Html.Partial("_Location")
 @Html.Partial("_Weather")
 @Html.Partial("_RealTimeValues")
 @Html.Partial("_EventView") 
```

所有这些字符串都是我单独的 cshtml 文件的名称，但它仍然是一个 SPA。

除非有其他原因您不想拥有 SPA？

# c# - If\Else 更高效？

> ID：14261832
> 
> 赞同：1
> 
> 时间：2013-01-10T15:52:35.297
> 
> 标签：c#, if-statement, performance, processing-efficiency

写出这个 if/else 语句是否有可能更简洁/有效的方式？我必须在这个数据库中的每个字段（接近 200 个字段）上检查 null 并且到最后代码看起来会很混乱。:\

```
if (dr["OLD_NUMBER"] != DBNull.Value)
{
    lblOldNumber.Text = dr["OLD_NUMBER"].ToString();
}
else
{
    lblOldNumber.Text = string.Empty;
}
// A bunch more with different lbls and columns 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T15:54:03.647

你可以完全摆脱`if`。

`DBNull.Value.ToString()`返回一个空字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T15:55:46.530

你可以做

```
lblOldNumber.Text = dr["OLD_NUMBER"] != DBNull.Value ? dr["OLD_NUMBER"].ToString() : string.Empty; 
```

上面的语句需要更少的行并且对我来说看起来更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:58:31.483

根据经验，当您看到这种重复时，请编写一个函数来进行处理。

```
string FormatIt(object value) 
{
   return value.ToString(); // or whatever the logic is like
} 
```

然后：

```
lblOldNumber.Text = FormatIt(dr["OLD_NUMBER"]); 
```

所以，如果你不得不修改你的代码来格式化金钱或类似的东西，你有**一个**地方可以改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:01:59.030

像这样的东西：

```
var labels = new Dictionary<string, YourLabelClass>
                         {
                             {"OLD_NUMBER", lblOldNumber},
                             //Add your 200 fields here 
                             {"ANOTHER_NUMBER", lblAnotherNumber},
                         };

        foreach (var label in labels)
        {
            label.Value.Text = dr[label.Key].ToString();
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T15:54:10.413

```
lblOldNumber.Text = string.Empty;
if (dr["OLD_NUMBER"] != DBNull.Value)
{
    lblOldNumber.Text = dr["OLD_NUMBER"].ToString();
} 
```

或者你可以制作像

```
void ApplyValue(Label label,object value, string defaultValue){
     label.Text =defaultValue;
     if (value != DBNull.Value)
     {
         label.Text = value.ToString();
     }
} 
```

并使用下一个代码

```
ApllyValue(lblOldNumber,dr["OLD_NUMBER"],string.Empty); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T15:55:10.443

您可以使用以下内容：

```
lblOldNumber.Text = dr["OLD_NUMBER"] != DBNull.Value ? dr["OLD_NUMBER"].ToString() : string.Empty; 
```

有关 ?: 运算符而不是 if 的更多信息，可以在[此处找到：（C# 参考）](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T15:59:30.517

我可能会写一个方法：

```
void TextOrNull(object item, Label lbl)
{
  lbl.Text = item != DBNull.Value ? item.ToString() : String.Empty;
} 
```

并称它为：

```
TextOrNull(dr["OLD_NUMBER"], lblOldNumber); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T15:59:42.170

我会制作一个包含此内容的方法，例如：

```
private void setLabelText( IDataRecord dr, string columnName, Label label )
{
    label.Text = string.Empty
    if (dr[columnName] != DBNull.Value)
    {
        label.Text = dr[columnName].ToString();
    }
} 
```

然后用适当的标签和记录名称等简单地调用它。

```
setText( dr, "OLD_NUMBER", lblOldNumber ); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-10T16:05:54.233

我没有尝试过这么多，但是类`ItemArray`上有一个`DataRow`将返回`DataRow`. 可能能够以这种方式设置循环并测试值，而不是硬编码键的名称。

再次不确定这是否可行，因为我的 PC 上没有设置测试场景，但是像这样？

```
foreach (var col in dataRow.ItemArray)
{
    if(DBNull.Value != col)
        lbl.Text = col.ToString()
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-10T15:56:26.733

查询数据库时，您可以从数据集中删除空值。

```
var result = (context.MyTable.Where(c => c.OLD_NUMBER != null)); 
```

# matlab - gui中的回调函数不知道句柄

> ID：14261835
> 
> 赞同：0
> 
> 时间：2013-01-10T15:52:42.643
> 
> 标签：matlab, user-interface, callback

我尝试在我的 gui 中实现一个更新等待栏的后备功能。我将函数句柄传递给加载图像的函数。回退本身有效，但我没有得到等待栏的句柄。

```
function z_WaitBarUpdate(value, maxValue)
handles=guidata(handles.output); % <-- fails because handles is unknown
if ishandle(handles.waitbar.handle)
    waitbar(value/maxValue,handles.waitbar.handle,handles.waitbar.text);
end 
```

我用这段代码用句柄调用函数

```
hWait = waitbar(0,'1','Name','Reading calibration file ...');
cleanupWaitbar = onCleanup( @()( delete( hWait )));       
handles.waitbar.handle = hWait;
handles.waitbar.text = 'reading subset of stack ...';
readCalibrationImage( handles , @z_WaitBarUpdate); 
```

知道如何在我的回调中访问等待栏句柄吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:05:54.293

我通常不会使用您正在使用的大多数功能，我不是 Matlab GUI 人。但是，我认为这会奏效。

1.  改变

    ```
    function z_WaitBarUpdate(value, maxValue) 
    ```

    到

    ```
    function z_WaitBarUpdate(value, maxValue, handles) 
    ```

2.  改变

    ```
    readCalibrationImage( handles , @z_WaitBarUpdate); 
    ```

    到

    ```
    readCalibrationImage( handles , @(value, maxValue) z_WaitBarUpdate(value, maxValue, handles)); 
    ```

首先，这定义了更新函数的第三个输入，以处理您丢失的输入。如果`handles`未传入，则该函数将无法使用它。然后，在`handles`创建结构之后，这将创建一个匿名函数，其目的是定义第三个输入，同时允许稍后在实际调用该函数时定义前两个输入。

# css - 为什么按钮上的 em 与 px 不同？

> ID：14261836
> 
> 赞同：1
> 
> 时间：2013-01-10T15:52:45.063
> 
> 标签：css

我创建了一个带有按钮 html 标记的按钮。现在我正在尝试在 em 中制作高度和宽度。我知道 16px 等于 1em。该规则适用于我目前看到的所有东西，除了按钮。如果我希望按钮高度为 45px，则按钮高度为 45px。如果我想将 45px 更改为 em，那就是 2.8125em。会短很多。为了使它接近 45px 与 em 它实际上是 3.5em 左右，在 px 中实际上是 56px。这是为什么？是浏览器的问题吗？顺便说一句，我正在使用 Safari。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T15:54:23.737

`em`等于相关元素的字体大小。如果您的按钮的字体大小与*16px*不同，那么`em`也会有所不同。

您一直在查看的所有元素的字体大小都必须设置为 16 像素。这并不奇怪，因为它是许多浏览器的默认设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T17:14:31.793

其他人谈到了对 em 单位如何与像素相关的误解，但根本问题尚未得到充分解决。

我今天发布了同样的问题，showdev[在这里回答了它。](https://stackoverflow.com/questions/24536160/why-does-the-button-tag-treat-em-differently-from-how-a-div-does)

本质上，按钮应用了“系统字体”，阻止它继承其父级的字体大小。据我所知，这发生在所有主要浏览器中，并且是“预期行为”。

为了克服这个问题，在你的 css 中，指定按钮标签（或只是一个特定的按钮）应该显式地继承它们的字体大小：

```
button {
     font-size:inherit;
} 
```

这将使其将 em 大小视为与您正在处理的其他元素相同。当然，这也会改变文本的大小，这对你来说可能是也可能不是问题......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T15:57:20.550

> 我知道 16px 等于 1em。

那是不对的。unil`1em`不对应于特定的像素值，它对应于元素当前字体的字符大小。

默认情况下，该按钮具有不同的字体。设置按钮的字体，它会得到你习惯的大小。

但是，如果您希望大小为一定数量的像素，则应使用`px`单位而不是`em`. 即使您指定相同的字体系列和字体大小，`em`单位也可能在浏览器和操作系统之间有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:55:48.893

从此页面[关于 CSS 中的单位](http://www.w3.org/Style/Examples/007/units.en.html)：

> em 和 ex 单位取决于字体，并且对于文档中的每个元素可能不同。em 只是字体大小。

`em`来自[The Amazing em unit 和其他最佳实践的](http://www.w3.org/WAI/GL/css2em.htm)更多信息：

> 多年来，“em”的含义发生了变化。并非所有字体都有字母“M”（例如中文），但所有字体都有高度。因此，该术语指的是字体的高度，而不是字母“M”的宽度。
> 
> 在 CSS 中，em 单位是测量长度的通用单位，例如页边距和元素周围的填充。

最后是[W3 规范](http://www.w3.org/TR/css3-values/#font-relative-lengths)的定义：

> 单位
> 
> 等于使用它的元素的 'font-size' 属性的计算值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T15:57:37.747

按钮的 line-height 可能与其他元素的 line-height 不同，加上 1em 仅等于 16px 如果这是您设置的基础。很可能是这样，但是在您提供的描述中我并不清楚，所以我只想指出这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-16T01:52:59.333

1em 等于 font-size 默认等于 16px（浏览器默认 font-size 选项）

例子

```
<button style="padding:0;border:0;background:#2f55c3;color:#fff;min-width:4em;height:3em;font-size:1em;">Text</button>
```

# generics - 为什么未为具有相同模板值参数类型的比较器类型定义 TreeMap 构造函数？

> ID：14261841
> 
> 赞同：2
> 
> 时间：2013-01-10T15:52:52.517
> 
> 标签：generics, constructor, comparator, treemap

我的地图的值类型是 `List<Pair<Integer, String>>`

我想按列表中第一对的左侧对其进行排序。但是有一个错误说：

> 构造函数 `TreeMap<String,List<Pair<Integer,String>>> (Comparator<List<Pair<Integer,String>>>)` 未定义

这是我的代码：

```
import java.util.TreeMap;
import org.apache.commons.lang3.tuple.Pair;

Map<String, List<Pair<Integer, String>>> data = new HashMap<String, List<Pair<Integer,String>>>();  
            ....
Comparator<List<Pair<Integer, String>>> valueComparator = new Comparator<List<Pair<Integer, String>>>() {
            @Override
            public int compare(List<Pair<Integer, String>> o1,
                    List<Pair<Integer, String>> o2) {
                int rzt = o1.get(0).getLeft() - o2.get(0).getLeft();
                return rzt;
            }  
           };

           TreeMap<String, List<Pair<Integer, String>>> sortedByValues = new TreeMap<String, List<Pair<Integer, String>>>(valueComparator);
           sortedByValues.putAll(data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:58:39.930

`Comparator`应该比较键而不是值。的构造函数[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Comparator%29)具有以下签名：

```
public TreeMap(Comparator<? super K> comparator) 
```

`K`Key的类型参数在哪里：`Class TreeMap<K,V>`

# c# - SetWindowPos 不会改变最大化状态

> ID：14261843
> 
> 赞同：3
> 
> 时间：2013-01-10T15:53:02.427
> 
> 标签：c#, .net, window, pinvoke

我们很好地使用了 SetWindowPos，设置了窗口的位置，效果很好。

我唯一的疑虑是，如果我们正在移动的窗口最大化，那么它会移动并变成适当的大小，但是，它仍然会认为自己处于最大化状态，并继续显示“恢复“ 按钮。

有没有办法在调用 SetWindowPos 后告诉该窗口替换最大化按钮？

另请注意：这些窗口不一定是 Windows 窗体窗口，但可能是资源管理器、Chrome、Firefox、记事本等应用程序。

这是我们对 SetWindowPos 的调用：

`PInvokeMethods.SetWindowPos( hwnd, 0, position.Left + x, position.Top + y, position.Width, position.Height, PInvokeMethods.SWP_NoZOrder | PInvokeMethods.SWP_NoActivate);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:51:04.357

如果您想在单个调用中设置状态和位置，可以使用[`SetWindowPlacement`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633544.aspx)API。

首先，您将调用以使用当前值`GetWindowPlacement`填充结构。[`WINDOWPLACEMENT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632611.aspx)然后您将修改`showCmd`and`rcNormalPosition`成员。然后你会在`SetWindowPlacement`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:05:02.463

也许你可以在尝试改变位置之前尝试调用[`ShowWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)with 。`SW_SHOWNORMAL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:41:55.970

SetWindowPos 不改变窗口状态（只改变它的位置）。

请改用 SetWindowPlacement，并在 SHowCmd 成员设置为 SW_SHOWMAXIMIZED 的情况下完成 WindowPlacement 结构 ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms632611(v=vs.85).aspx )](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632611(v=vs.85).aspx)

# perl - Perl oneliner 可能是一个失控的多行 ++ 消息

> ID：14261847
> 
> 赞同：-3
> 
> 时间：2013-01-10T15:53:13.557
> 
> 标签：perl

我正在尝试重新格式化 MySQL 的日期。这个 Perl one-liner 给了我下面的错误信息。

我想了解它为什么会给出此错误消息。

```
echo 'Dec 2 04:08:40 EST 2012' | perl -lane ' my @abbr = qw( Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec );
                ( $amon, $mday, $hour,$tz, $year) =split('\s+',$_);
                for (my $i = 0; $i < @abbr; $i++) {
                next unless $abbr[$i] =~ /^$amon/;
                $mon=$i;
                }
                $mon++;
                print  "$year-$mon-$mday $hour";

            ' 
```

**错误信息**

```
syntax error at -e line 3, near ") {"
  (Might be a runaway multi-line ++ string starting on line 2)
syntax error at -e line 9, near ";}"
Execution of -e aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:05:29.897

问题是您试图在单引号字符串中嵌入单引号。您可以转义它们，但默认情况下会在空格上`split`拆分。`$_`

这是一个解决方案，但正如 Mat 所说，这是一个程序，而不是单线。把它放在一个文件里。

```
echo 'Dec 2 04:08:40 EST 2012' | perl -lane '
@abbr = qw( Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec );
($amon, $mday, $hour, $tz, $year) = split;
for my $i (0..$#abbr) {
  next unless $abbr[$i] =~ /^$amon/;
  $mon=$i;
}
$mon++;
print  "$year-$mon-$mday $hour";' 
```

# python - 在 Quickly 应用程序中嵌入 matplotlib？

> ID：14261855
> 
> 赞同：1
> 
> 时间：2013-01-10T15:53:57.190
> 
> 标签：python, matplotlib, embed, canonical-quickly

我是一般的编程新手，因此很快。我想在我的 Quickly 应用程序中嵌入一个 Matplotlib 图。我找到了一些如何使用一般 pyGTK 应用程序执行此操作的示例，但我不确定如何快速使用它们...我至少需要 matplotlib 窗口来停止停用主窗口。

如果您能帮助我并告诉我在标准嵌入代码中需要更改的内容，我会很高兴。官方的例子是[here](http://matplotlib.org/examples/user_interfaces/embedding_in_gtk.html)我只是不明白，如何在这里应用它......

我使用 Glade 设计界面，Quickly 使用 pygobject，而不是 pyGTK，这些是主要问题。

新的：

我发现[了这个](https://github.com/JackKelly/matplotlib/commit/a496ef152b497463b73689fe87e13fbbc90df913) 而且似乎我必须在这里使用文件**init** .py，而不是包含我所有代码的主文件。它看起来像这样：

```
# -*- Mode: Python; coding: utf-8; indent-tabs-mode: nil; tab-width: 4 -*-
'''
Some licensing information
'''
import optparse

import locale
from locale import gettext as _
locale.textdomain('chromograph')

from gi.repository import Gtk # pylint: disable=E0611

from chromograph import ChromographWindow

from chromograph_lib import set_up_logging, get_version

def parse_options():
    """Support for command line options"""
    parser = optparse.OptionParser(version="%%prog %s" % get_version())
    parser.add_option(
        "-v", "--verbose", action="count", dest="verbose",
        help=_("Show debug messages (-vv debugs chromograph_lib also)"))
    (options, args) = parser.parse_args()

    set_up_logging(options)

def main():
    'constructor for your class instances'
    parse_options()

    # Run the application.    
    window = ChromographWindow.ChromographWindow()
    window.show()
    Gtk.main() 
```

提前致谢！

# list - 如何从 Java ME LWUIT 复选框列表中获取多个选定项目

> ID：14261860
> 
> 赞同：0
> 
> 时间：2013-01-10T15:54:15.097
> 
> 标签：list, java-me, checkbox, lwuit

我正在用 Java 开发一个应用程序来发送短信。它使用`PIM`库来获取电话联系人并使用 CheckBox 列表显示它。用户可以选择多个联系人。我用来存储使用on`Vector`获得的选定元素。这种方法的问题是当用户取消选择一个项目时，它不能被删除。有什么简单的方法可以从.`list.getSelectedItem()``ActionEvent``Vector`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:43:14.117

我猜您无法从向量中删除取消选择的数字，因为一旦将其添加到向量中，您就无法识别它的索引。您可以更改数据结构并改用哈希表，这样您就可以使用键，例如数字来识别条目，当它被取消选择时，只需查找键并将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:35:25.607

我认为因为您使用 ListcellRenderer 实现，所以您在列表中使用了 setRenderer 函数。此功能适用于您工作的列表。您从向量中删除但不更新列表（原始列表中使用的 ListcellRenderer）。因此，每当您从向量中删除时，您都需要再次更新列表（并调用 setRenderer(..) ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T06:53:41.300

为了能够检查和取消选中列表项，您可以使用以下过程：

*   将布尔变量添加到您的 PIM 对象列表中

*   向渲染器添加一个复选框，该复选框从布尔变量中获取其值

*   然后当用户单击每个项目时，使用列表的侦听器捕获它。

*   最后在侦听器中将布尔值的状态更改为 true 或 false。

    之后你有一个列表，它的布尔变量显示用户选择了哪些元素。

# mysql - 在 MySQL 回调中对服务器响应的管道“请求”响应未按预期工作？节点

> ID：14261863
> 
> 赞同：1
> 
> 时间：2013-01-10T15:54:24.940
> 
> 标签：mysql, node.js, http, callback, request

我很难理解为什么我在下面提供的代码没有像我预期的那样工作。基本概念是：

浏览器 -> Nodejs 服务器 -> MySQL 回调 -> 请求 -> 服务器响应。

有人能够解释为什么以下代码按预期工作。

```
// Load modules
var http        = require('http');
var https       = require('https');
var httpProxy   = require('http-proxy'); 
var url         = require('url');
var qstr        = require('querystring');
var path        = require('path');
var requester   = require('request');

var server = httpProxy.createServer(function(request, response) { 

    proxy = requester({
      url: 'http://www.srcnix.com',
      method: 'GET'
    });      

    request.pipe(proxy);
    proxy.pipe(response);

});

server.listen(8080); 
```

但是，当我将请求和管道放置在回调中时，无论是在 MySQL 查询回调（如下所示）还是在另一个请求回调中，它都无法通过管道将响应发送到服务器。

```
// Load modules
var http        = require('http');
var https       = require('https');
var httpProxy   = require('http-proxy'); 
var url         = require('url');
var qstr        = require('querystring');
var path        = require('path');
var requester   = require('request');

var globalConf  = require('./config/global.js');

var mysql       = require('mysql');
var connection  = mysql.createConnection({
  host:     globalConf.db.portal.host,
  user:     globalConf.db.portal.username,
  password: globalConf.db.portal.password,
  database: globalConf.db.portal.database
});

var server = httpProxy.createServer(function(request, response) { 
  connection.query('SELECT 1', function(err, rows) {        
    if(rows.length) 
    {
      proxy = requester({
        url: 'http://www.srcnix.com',
        method: 'GET'
      });      

      // PIPE FAILS TO WORK!                
      request.pipe(proxy);
      proxy.pipe(response);
    }
  });      
});

server.listen(8080); 
```

非常欢迎您的想法和知识，并提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T05:37:55.890

因为对 mysql 的查询是异步的，当时间结束时，请求已经完成了所有数据的发送。您需要暂停请求，直到回调完成。

```
var server = httpProxy.createServer(function(request, response) {
  request.pause();
  connection.query('SELECT 1', function(err, rows) {        
    if(rows.length) 
    {
      request.resume();
      proxy = requester({
        url: 'http://www.srcnix.com',
        method: 'GET'
      });      

      // PIPE FAILS TO WORK!                
      request.pipe(proxy);
      proxy.pipe(response);
    }
  });      
}); 
```

[看看这里，这是我得到回复并为我工作的地方！](https://stackoverflow.com/a/11386833/1648473)

# java - 如何在 Java 中设置和使用类、库、包？

> ID：14261864
> 
> 赞同：0
> 
> 时间：2013-01-10T15:54:30.027
> 
> 标签：java, class

我对使用非 Java 原生的外部类库和 API 的想法很陌生，我什至不知道我是否用正确的术语提出了正确的问题。所以让我解释一下我在做什么。

我需要读取和写入 Excel 文件。我发现[这个页面](http://www.vogella.com/articles/JavaExcel/article.html)有一个 Java-Excel API。我想为我的本地 Java 实例安装并使用该 API（）`C:\java\`，这样我就可以在创建新程序（例如 `import jxl.CellView`我有一个来自[sourceforge](http://jexcelapi.sourceforge.net/)的 zip 文件，但在那之后，我就迷路了。

说明参考在 Eclipse 中设置它；我不是 Eclipse 作为 IDE 的粉丝......所以我想知道如何“手动”完成它。我认为这将帮助我更好地理解为什么它会以未来的方式运作。

所以，我的下一条指令是……“要在 Java 程序中使用这个库，请将 lib jxl.jar 添加到项目中的类路径中。请参阅在 Eclipse 中更改类路径。” 我只是将 zip 文件解压缩到`C:\java`? 这就是他们所说的我的课程路径吗？我需要从这里执行哪些步骤以确保我可以根据需要导入适当的类？

此外，这些类是否与小程序捆绑在一起？当我编译一个java程序时，即使他们没有在运行它的机器上安装这个特定的包，该文件的接收者是否能够运行它？

有人可以给我一些看法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:15:56.300

我喜欢将我所有的第三方库放在 c:\java\lib 中。这样我就可以将它们与我在 c:\java 中的 JRE 和 JDK 分开。这不是绝对必要的，但是整洁是很好的。以下是一些特定于使用您感兴趣的库的说明。

提取`jexcelapi_2_6_12.zip`到`c:\java\lib\`.

这应该意味着现在存在以下文件：`C:\java\lib\jexcelapi\jxl.jar`.

让我们现在把你的代码放进`c:\java\work`去，让它分开。`c:\java\work\MyClass.java`使用文本编辑器创建文件：

```
import jxl.CellView;
public class MyClass {
    public static void main(String[] args) {
        System.out.println("I can access " + CellView.class);
    }
} 
```

打开命令提示符并将目录更改为 c:\java\work。

`cd /d c:\java\work`

现在编译类：

`javac -classpath ..\lib\jexcelapi\jxl.jar MyClass.java`

如果您没有收到错误，该目录现在应该包含一个新文件`MyClass.class`，这是您编译的程序。

如果您看到错误： *'javac' 不是内部或外部命令、可运行程序或批处理文件。*然后您可以指定 javac.exe 的完整路径。以下示例假设您有一个位于 c:\java\jdk1.6.0_37 的 JDK，这在您的系统上可能是也可能不是：

`c:\java\jdk1.6.0_37\bin\javac -classpath ..\lib\jexcelapi\jxl.jar MyClass.java`

运行你编译的程序：

`C:\java\work>java -classpath ..\lib\jexcelapi\jxl.jar;. MyClass`

输出：
*我可以访问类 jxl.CellView*

注意类路径末尾的分号和点`java`。这会将当前目录添加到类路径中，以便 java 可以找到 MyClass.class。这对`javac`.

与`PATH`应该只包含目录的 不同，java 的`CLASSPATH`（或`-classpath`）可以包含文件和目录。当文件出现在类路径中时，它应该是一个 JAR。由于 JAR 只是 zip 文件，因此您有时还会在类路径中看到 ZIP 文件。这是非标准的，但它有效。Java 会将 .zip 文件视为 .jar。如果您需要在程序中添加第二个库，请使用分号 (Windows) 或冒号 (*nix) 分隔文件。

`javac -classpath ..\lib\jexcelapi\jxl.jar;..\lib\lib-2.0\lib-2.0.jar MyClass.java`

有时库包含多个 jar 文件。在这种情况下，您需要将作为库一部分的每个 JAR 文件添加到类路径中。同样，用分号分隔它们。如果这看起来很乏味，您就会开始明白为什么人们喜欢使用 IDE 或 Ant 来处理 Java 而不是命令行命令。

还有很多东西需要学习，比如使用包、使用环境变量 CLASSPATH 来设置类路径而不是使用`-classpath`命令行参数、将 JDK bin 目录添加到 PATH、在类路径中添加多个条目、创建 shell 脚本使重建和重新运行程序更容易，使用 IDE 进行开发，使用 Maven/Ant 进行构建，制作自己的 JAR，......要学习的东西的清单还在继续。这篇文章并不是为了说明最佳实践，而是为了让你快速上手。遵循 Internet 上发布的 Oracle 文档和其他最佳实践，以不断改进您的 Java 开发环境。

*此外，这些类是否与小程序捆绑在一起？*
如果您的程序最终将成为一个小程序，那么是的，您需要将 jxl.jar 与您的程序一起分发——人们不会在他们的计算机上拥有它，也不会想要自己下载它. 我不打算在这里描述如何制作小程序。网络上有很多资源。谷歌搜索并返回有关您遇到的问题的更具体问题。

*当我编译一个java程序时，即使他们没有在运行它的机器上安装这个特定的包，该文件的接收者是否能够运行它？*
jxl 库不会编译到您的程序中。您将需要以某种方式将 jxl 库连同您的程序一起交付给您的用户。您可能应该将您的程序捆绑到一个 JAR 中，因为大多数重要程序包含多个 Java 类，这意味着您的程序将包含多个 .class 文件。有很多方法可以解决这个问题。花一些时间阅读有关如何创建小程序的资源，然后带着更具体的问题回到 stackoverflow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:59:21.683

转到命令行。

输入：

```
echo %CLASSPATH% 
```

它应该返回一个目录列表。您可以将要导入的库放入其中的任何一个中。

阅读：[http ://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:11:26.243

类路径是目录和`.jar`文件的列表，Java 虚拟机从中加载它需要的类。一些目录和 jars 默认在里面（基本上是 Java 安装附带的库），其他的必须由用户指定。

一种指定附加位置的方法是`CLASSPATH`环境变量。如果有多个条目，则由平台的路径分隔符（Windows 上的分号，大多数其他系统的冒号）分隔它。

另一种方式是`-classpath`启动编译器或java虚拟机时的选项。

在您的情况下，将`jxl.jar`文件放在某处（例如`/some/path/jxl.jar`），然后调用编译器（假设 MyClass 在默认包中并存储在当前目录中）

```
javac -classpath /some/path/jxl.jar:. MyClass.java 
```

并运行它使用

```
java -classpath /some/path/jxl.jar:. MyClass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:14:57.220

在你有 jxl.jar 的 zip 文件中，你必须在你的项目中包含这个 jxl.jar，就像外部库一样。例如在 netbeans 中：

[http://jsumon.wordpress.com/2009/11/24/adding-external-jar-or-library-to-netbeans-java-project/](http://jsumon.wordpress.com/2009/11/24/adding-external-jar-or-library-to-netbeans-java-project/)

和日食：

[http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

# php - 如何从 Concrete5 CMS 的 view.php 中的块中获取 pageID

> ID：14261866
> 
> 赞同：3
> 
> 时间：2013-01-10T15:54:35.733
> 
> 标签：php, concrete5

我想从页面属性中传输一些数据作为 GET 请求数据。我在块的 view.php 中创建的请求的 URL。如何在 view.php 中获取当前页面的 cID？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T05:08:30.023

`$currentPageCID = Page::getCurrentPage()->getCollectionID();`

# css - 移动下拉导航重叠内容

> ID：14261868
> 
> 赞同：0
> 
> 时间：2013-01-10T15:54:44.083
> 
> 标签：css, mobile, drop-down-menu, nav

对于我的[投资组合网站](http://mtthwbsh.com)，我正在使用可折叠的移动导航，该导航在切换时打开。切换打开时，列表项与内容重叠，而我希望它将内容向下推。我没有任何绝对立场或任何东西，所以我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:04:13.933

你有“位置：相对；” 在您的 NAV 元素上，该元素是具有明确设置高度的 DIV 的子元素。移除此高度可让您的页面内容向下移动。

# c++ - 如何正确地将浮点数与 int 相乘并获得仅受有效数字影响的结果？

> ID：14261877
> 
> 赞同：6
> 
> 时间：2013-01-10T15:54:50.473
> 
> 标签：c++, floating-point, multiplication

我有在浮点数（表示一秒）和 int64（表示一纳秒）之间转换的代码，从浮点数中*取`6`小数位*

```
int64_t nanos = f * 1000000000LL; 
```

然而，许多存储在浮点数中的十进制值不能完全用二进制浮点数表示，所以我得到的结果就像`14199999488`我的浮点数是`14.2f`. 目前我通过计算小数点后的有效位数来解决这个问题

```
const float logOfSecs = std::log10(f);

int precommaPlaces = 0;
if(logOfSecs > 0) {
   precommaPlaces = std::ceil(logOfSecs);
}

int postcommaPlaces = 7 - precommaPlaces;
if(postcommaPlaces < 0) {
   postcommaPlaces = 0;
} 
```

然后将浮点数打印成字符串，让 Qt 正确地舍入浮点数。然后我将字符串解析为一个前后逗号整数，并用整数算术将它们相乘。

```
const QString valueStr = QString::number(f, 'f', postcommaPlaces);
qint64 nanos = 0;
nanos += valueStr.section(".", 0, 0).toLongLong() * 1000000000LL;
if(postcommaPlaces) {
   nanos += valueStr.section(".", 1).toLongLong() * 
     std::pow(10.0, 9 - postcommaPlaces);
} 
```

这工作正常，但我想知道是否有更好，也许更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:31:21.293

通过将值存储在`float`损坏已经造成的情况下，您已经丢失了原始数字，无论它是什么。您可以*猜测*一个可能预期的值，然后进行四舍五入，或者如果您只是尝试为用户显示一个值，您可以四舍五入到小数位数。

`int64_t`相反，您可以通过在整个代码库中使用定点表示来解决所有这些问题，从不转换为/从`float`并避免在每次转换期间丢弃精度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:32:39.217

例如，如果您想四舍五入到小数点后一位

```
#include <iostream>

int main()
{
    float f = 14.2f;
    long long n = f * 1000000000LL;
    std::cout << "float: " << n << '\n';
    n = (f + 0.05) * 10;
    n *= 100000000LL;
    std::cout << "rounded: " << n << '\n';
    return 0;
} 
```

小数点后两位是`(f + 0.005) * 100`, ..., 小数点后六位

```
n = ((long long)((f + 0.0000005) * 1000000)) * 1000LL; 
```

如果要考虑*有效数字*（所有数字），则必须先取*小数位*`log10(f)`，然后再调整四舍五入。

 *但是正如@MarkB 已经说过的，如果您`int64_t`首先使用，则根本不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:12:09.687

如其他答案所述，四舍五入到任意数量的十进制数字与打印浮点数密切相关。由于正确执行的算法相当复杂，因此正确执行此操作的最简单方法是使用 printf 本身。

请注意，您不一定必须提供任意数量的数字，另一种方法是使用最短的小数，该小数将在基数 2 中原样转换回来。此类算法用于在 Scheme、Java、Python、Squeak/ 中打印浮点数Pharo 等……不幸的是，libm printf 和任何标准 C 库都不兼容。

方案甚至更好，因为它打印 * 当您施加固定数量的数字时数字不重要（* 表示任何数字在转换回基数 2 时都会产生相同的浮点数）。

在此问题[http://code.google.com/p/pharo/issues/detail?id=4957](http://code.google.com/p/pharo/issues/detail?id=4957)中有一个名为 Float-asMinimalDecimalFraction.st 的附件，其中包含在 Smalltalk 中实现的与 Scheme 类似的打印算法，但输出一个分数（两个任意长度整数的比率）而不是 ASCII 字符串。

因此，例如，尽管 14.2f 在内部完全表示为 14.19999980926513671875 为时不晚，但您可以检索到正确舍入为它的最短小数部分是 (142/10)。

在 Smalltalk 中使用这样的代码，解决您的问题的方法很简单：

```
nanos := (floatingPointSeconds asMinimalDecimalFraction * 1e9) rounded. 
```

但是上面的代码在后台使用了精确的算术（`1e9`是一个整数）和任意长度的整数。

请注意，在浮点数中执行乘法会很糟糕：

```
nanos := (aFloat * 1e9) asMinimalDecimalFraction rounded. 
```

实际上，虽然 1e9 asFloat 转换是精确的，但它的有效位跨越 21 位，因此浮点乘法很可能会累积舍入错误并恶化检索小分数的问题。

尽管在技术上以某种方式回答了这个问题，但由于以下原因，我个人认为上述算法在实用上是不合适的：

1.  在没有任意精度算术库的帮助的情况下使用低级 C/C++ 指令进行操作并不是获得结果的最快途径

2.  它非常有限，因为它不适用于具有几个舍入误差的计算结果（它们在统计上需要很多数字）

3.  如果您可以完全避免使用 Float 并使用 nanos int，那就太过分了

尽管如此，知道它的存在总是很高兴......*

# ios - XCode 4.5 中带有 ARC 的 Phantom Memory 泄漏，其中肯定会调用 dealloc 或 Instruments 问题？

> ID：14261879
> 
> 赞同：6
> 
> 时间：2013-01-10T15:54:58.730
> 
> 标签：ios, objective-c, cocoa, automatic-ref-counting, instruments

前言; 这不是一个普遍的“我有一个有泄漏的巨型应用程序”的问题。这是关于自动引用计数在具有完整源代码的几乎微不足道的演示应用程序中无法正常工作的特定问题，或者是微妙的代码生成或编译器问题，或者是 Instruments 中的错误。（TLDR：哦。实际上是一个奇怪的小比赛条件）

我对 Instruments 的“分配”列表显示实例泄漏这一事实感到困惑，然而，我有该类的一个实例，只有一个，而 ARC 导致调用 dealloc 方法，我知道它被调用是因为当 dealloc 完成时，会打印一条 NSLog 消息，但它仍然显示在 Instruments 的泄漏列表中。

retainCount 永远不会超过 1。它没有被任何人保留，它正在被释放，但它看起来像是一个“泄漏”，因为它在 Instrument 的泄漏中显示为一个活动实例。

这怎么可能？

我还在用 ARC 学习 Objective-C，所以我想我一定犯了一个常见的初学者错误。这是我唯一的 init 和我的对象的 dealloc：

```
- (id) initWithMessage:(NSString*)messageForUser
{
    self = [super init];
    if (self)
    {
        _message = messageForUser;
        NSLog( @"from constructor: %@",_message);
    }
    return self;

}

- (void)dealloc {
    NSLog(@"Goodbye cruel world. One WPMyObject signing off.");
   // [message release]; // ARC forbiddeth thee! Begone release.
    _message = nil;

   // [super dealloc]; // ARC forbiddeth explicit super dealloc
} 
```

只是想看看我是否可以，我尝试调用`[super dealloc]`dealloc 方法，然后 ARC 以一个错误阻止你，这很好，因为它会为你做这件事。但是，当我编写自己的 init 方法时，它不会阻止我。

当我在 XCode 中使用“Run”运行程序时，我得到了“再见残酷世界”NSLog 消息，正如我希望的那样，当运行 dealloc 时，我也得到了这个实例仍然存在于末尾的证据运行，当使用内存泄漏模板进行仪器分析时：

如果我在没有下面的实例创建代码的情况下运行，我只会报告一些标准库 malloc 泄漏，但如果我添加此代码，则会发生所有泄漏：

```
 WPMyObject * myObject = [[WPMyObject alloc] initWithMessage: @"Hello World!\n" ]; 
```

这是我所看到的，我认为我理解的是告诉我 WPMyObject 的唯一实例正在泄漏：

![在此处输入图像描述](../Images/cdf52729a6859b5a5c9f461b164c9c62.png)

非常简单的完整源代码（使用 Objective-C 和 的小型 Mac OS X 命令行应用程序`Foundation/Foundation.h`）在 BitBucket 上。单击[此链接](https://bitbucket.org/wpostma/objectivecplaymac/src)可在浏览器中查看源代码。

`@autoreleasepool {...}`main.m 单元在上下文语句中运行单个测试对象实例创建：

![在此处输入图像描述](../Images/65c0114045b74cfd265be14e5f1c5ec2.png)

如果您想在自己的计算机上查看完全微不足道的代码，请像这样抓取它：

```
 hg clone https://bitbucket.org/wpostma/objectivecplaymac 
```

`}`更新：您可以通过在结束自动释放池之前添加这行代码来修复“泄漏”（可能是 Instruments 中的错误，或 clang/llvm 编译器错误，而不是“真正的泄漏”） ：

```
 NSLog( @"Reached end of autorelease pool" ); 
```

是的。添加日志消息。“泄漏”消失。这是 Mac OS X 10.7.5 上的 XCode 4.5.2 (4G2008a)，包含 Instruments 版本 4.5 (build 4523)。

Update2：这确实是一个简单的多进程竞争条件。下面的代码似乎是一个合理的调试构建位黑客。如果有更明确的说法“等到 Instruments 用我完成，然后退出 main()”，那可能是一个不错的未来功能，Apple 工程师。PROFILER_SYNC("MESSAGE") 宏在发布模式下扩展为空，但在调试版本中，将“MESSAGE”发送到分析器......确实非常方便。

```
int main(int argc, const char * argv[])
{
    // This creates and cleans up an auto-release pool context.
    @autoreleasepool {

        foo(); // Microscopic amounts of debug code you want profiler to analyze go here.

#ifdef DEBUG
        usleep(10000); // race condition prevention in debug builds, so Instruments can finish up.
#endif

    }
#ifdef DEBUG
    usleep(10000); // race condition prevention in debug builds, so Instruments can finish up.
#endif

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:13:53.993

听起来不像是泄漏，更像是比赛条件。`NSLog`编写和程序执行之间的竞争被终止。或者缓冲问题，更有可能是在达到某个阈值之前不会刷新输出。

尝试`sleep(100);`在自动释放池的右大括号之后放置一个。或者尝试在`dealloc`.

如果这不能“修复”它，则显示反汇编并查看两个版本的代码之间的变化。

* * *

发生这种情况的原因： 出于性能原因， Instruments 和 NSLog() 都被有效缓冲。它们被设计用于运行时间相对较长的进程，该进程几乎总是有一个主事件循环或调用`dispatch_main()`.

这样做是为了尽量减少对目标应用程序性能的影响，但它可能会导致微基准测试出现异常，因为该过程的生命周期非常短暂。

如果您在短暂的过程中有一个最小的测试用例，我建议您关闭`main()`with `[[NSRunLoop currentLoop] run];`。这将永远运行，并为仪器和/或调试器提供一个可行的运行时。

# cuda - 缺少 8 位变量的 CUDA 内联 PTX 约束字母，以禁用 8 位变量的 L1 缓存（布尔）

> ID：14261881
> 
> 赞同：1
> 
> 时间：2013-01-10T15:55:00.587
> 
> 标签：cuda, inline-assembly, cpu-cache, type-constraints, ptx

**介绍**

在[这个问题](https://stackoverflow.com/questions/12553086/cuda-disable-l1-cache-only-for-one-variable "这个问题")中，我们可以学习如何为单个变量禁用 L1 缓存。这是公认的答案：

> 如上所述，您可以使用内联 PTX，这是一个示例：

```
__device__ __inline__ double ld_gbl_cg(const double *addr) {
  double return_value;
  asm("ld.global.cg.f64 %0, [%1];" : "=d"(return_value) : "l"(addr));
  return return_value;
} 
```

> 您可以通过将 .f64 替换为 .f32 (float) 或 .s32 (int) 等来轻松改变这一点，return_value "=d" 的约束为 "=d" (float) 或 "=r" (int) 等。注意 (addr) 之前的最后一个约束 - “l” - 表示 64 位寻址，如果您使用 32 位寻址，它应该是“r”。

但是，现在我想加载一个布尔值（1 字节）而不是浮点数。所以，我认为我可以做这样的事情（对于架构> = sm_20）：

```
__device__ inline bool ld_gbl_cg(const bool* addr){
  bool return_value;
  asm("ld.global.cg.u8 %0, [%1];" : "=???"(return_value) : "l"(addr));
  return return_value;
} 
```

， 在哪里 ”？？？” 应该是布尔值的适当约束字母，分别是 8 位无符号整数（从[这个问题](http://www.mathworks.com/matlabcentral/answers/47879 "这个问题")，我推断出这一点，因为注意到对于 >=sm_20，“u8”用于布尔值）。[但是，我在 nvidias 文档“ Using inline PTX Assembly in CUDA](http://mlso.hao.ucar.edu/hao/acos/sw/cuda/doc/Using_Inline_PTX_Assembly_In_CUDA.pdf "在 CUDA 中使用内联 PTX 程序集") ”中找不到合适的约束字母（第 6 页列出了一些约束字母）。所以我的问题是：

**问题**

1.  是否有任何类型的任何 CUDA 内联 PTX 约束字母：

    *   布尔值
    *   无符号 8 位整数
    *   或 evtl 8 位二进制变量
2.  如果没有，我该怎么办（在介绍中解释）？[-这里](https://stackoverflow.com/questions/11546221/syntax-on-inline-ptx-code-for-cuda "这里")简短讨论的参数“b0”、“b1”等有帮助吗？

非常感谢您提前提供任何帮助或意见！

**更新**

我还需要一个从 L2 缓存而不是全局内存读取的存储函数 - 即与**上述 ld_gbl_cg 函数互补**的存储函数（只有拥有此函数后，我才能完全验证 njuffa 的答案是否有效）。根据下面 njuffa 的回答，我的最佳猜测是：

```
__device__ __forceinline__ void st_gbl_cg (const bool *addr, bool t)
{
#if defined(__LP64__) || defined(_WIN64)
    asm ("st.global.cg.u8 [%0], %1;" : "=l"(addr) : "h"((short)t));
#else
    asm ("st.global.cg.u8 [%0], %1;" : "=r"(addr) : "h"((short)t));
#endif
} 
```

但是，编译器给出警告“参数“addr”已设置但从未使用过”，并且程序在运行时失败并出现“未指定的启动失败”。我也尝试使用 .u16 而不是 .u8，因为我不知道它到底指的是什么。然而结果是一样的。

**（附加信息）** PTX 3.1 文档中的以下段落似乎对这个问题很重要：

> 5.2.2 子字大小的限制使用 .u8、.s8 和 .b8 指令类型仅限于 ld、st 和 cvt 指令。.f16 浮点类型仅允许在与 .f32 和 .f64 类型之间进行转换。所有浮点指令仅在 .f32 和 .f64 类型上运行。为方便起见，ld、st 和 cvt 指令允许源和目标数据操作数比指令类型大小更宽，以便可以使用常规宽度寄存器加载、存储和转换窄值。例如，在加载、存储或转换为其他类型和大小时，8 位或 16 位值可以直接保存在 32 位或 64 位寄存器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:31:52.137

根据文档“在 CUDA 中使用内联 PTX”，字节大小的操作数没有限制。我能说的最好的，最接近所需功能的是通过中间“短”移动数据。这会产生一个额外的 SASS 指令，用于从“short”到“bool”的转换。

```
__device__ __forceinline__ bool ld_gbl_cg (const bool *addr)
{
    short t;
#if defined(__LP64__) || defined(_WIN64)
    asm ("ld.global.cg.u8 %0, [%1];" : "=h"(t) : "l"(addr));
#else
    asm ("ld.global.cg.u8 %0, [%1];" : "=h"(t) : "r"(addr));
#endif
    return (bool)t;
} 
```

# jquery - Javascript/jQuery 使用例外数组和 3 个或更少字符的单词将每个单词大写

> ID：14261882
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:02.037
> 
> 标签：jquery, capitalize

我有这个代码工作：http: [//jsfiddle.net/Q2tFx/](http://jsfiddle.net/Q2tFx/)

```
$.fn.capitalize = function () {
$.each(this, function () {
    var split = this.value.split(' ');
    for (var i = 0, len = split.length; i < len; i++) {
        split[i] = split[i].charAt(0).toUpperCase() + split[i].slice(1);
    }
    this.value = split.join(' ');
});
return this;
};

$('.title').on('keyup', function () {
    $(this).capitalize();
}).capitalize(); 
```

我想要一份**例外词列表**。

另外，我不想将**3 个或更少字符**的单词大写。

我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:14:16.483

尝试这样的事情：http: [//jsfiddle.net/Q2tFx/10/](http://jsfiddle.net/Q2tFx/10/)

```
$.fn.capitalize = function () {
  var wordsToIgnore = ["to","and","the","it", "or", "that", "this"],
      minLength = 3;
  function getWords(str) {
    return str.match(/\S+\s*/g);
  }
  this.each(function () {
    var words = getWords(this.value);
    $.each(words,function(i,word) {
      // only continue if word is not in ignore list
      if (wordsToIgnore.indexOf($.trim(word)) == -1 && $.trim(word).length > minLength) {
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
      }
    });
    this.value = words.join("");
  });
};

$('.title').on('blur', function () {
  $(this).capitalize();
}).capitalize(); 
```

当前设置为忽略少于 3 个字符的单词和列表中的单词

# visual-studio-2012 - vs2012的第二个实例

> ID：14261883
> 
> 赞同：9
> 
> 时间：2013-01-10T15:55:05.087
> 
> 标签：visual-studio-2012

有谁知道如何打开 VS2012 的第二个实例？我想打开一个解决方案，然后打开另一个来比较代码。以前可以用 VS2010 做到这一点。还是我只是在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T15:25:40.820

您不能使用 Metro 接口一次启动超过 1 个 VS2012 实例！恕我直言，这很愚蠢，也花了一段时间才弄清楚。

无论如何，通过执行以下操作启动第二个实例（在打开 1 个实例后）：
右键单击任务栏中的 VS2012 图标并选择“Visual Studio 2012”或
按住左键单击 + 向上拖动并选择“Visual Studio 2012”或
Just如果有桌面图标，请使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T13:45:08.017

您可以按住 Shift 键并单击桌面任务栏上已经运行的任何程序以打开一个新实例。也适用于任何版本的 VS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:57:02.717

只需启动两次vs2012，并打开不同的项目。我经常这样做。

注意：在加载项目之前打开 Visual Studio。如果您启动一次，加载一个项目，然后从该窗口打开另一个项目，您的第一个项目将关闭...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T15:00:31.507

如果您使用的是 Windows 8，如果您已经打开了一个实例，则应该右键单击任务栏上的 VS2012 图标。然后从下拉列表中单击“VS 2012”链接。

:)祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-13T11:43:00.750

您只需右键单击 VS 图标并选择“打开新窗口”即可。

它对我来说很好（VS 2013，Win 8.1）。

[http://screencast.com/t/xK1EMEmHoBW](http://screencast.com/t/xK1EMEmHoBW)

# c - 将代码和变量放入链接器中定义的特定 RAM 部分

> ID：14261885
> 
> 赞同：1
> 
> 时间：2013-01-10T15:55:07.297
> 
> 标签：c, compiler-construction, linker, microcontroller, ram

谢谢参观。

编译我的 C 项目时，链接器会生成一个文件，我可以在其中定义我想要的 RAM 部分，如下所示：

```
-ra RAMCHECK=0x00028000/0x000296FF

-ra D_RAM=0x0002a000/0x0002D6FF

-ra IDLE_TSK=0x0002D700/0x0002DFFF

-ra NORMAL_TSK=0x0002E000/0x0002EFFF

-ra HIGH_TSK=0x0002F000/0x0002FFFF 
```

我的问题如下：

如何将代码段和变量定义到 RAM 的特定位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:02:16.190

这就是它的完成方式`gcc`：

```
int data[100] __attribute__((section ("D_RAM"))) = {0}; /* should be initialized */
void myfunc(void) __attribute__((section ("HIGH_TSK"))) { ... } 
```

你的编译器（它的名字是什么？）可能有它自己的 C 扩展，工作方式相同。

# c# - 在使用 Autofac 时使用 C# 模拟 System.IO.XXX 类

> ID：14261886
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:09.543
> 
> 标签：c#, moq, autofac

我在项目中使用 Autofac 作为 DI 容器。现在我已经开始在其中使用 Moq 创建单元测试。由于业务类的代码已经编写好了，所以我想避免对业务类进行重大更改。我在模拟 System.IO.XXX 类（如 FileSystemWatcher、Directory、File、StreamReader 等）时遇到问题。主要是因为它们要么是静态类，要么没有任何接口。

// 这是我的商务舱之一的样子

```
internal class SpanFileReader : ISpanFileReader
{
// Some private variables
    private string _filePath;
    private readonly ISpanLogger _spanLogger;

#region Public Properties
    // Prorperties....
#endregion

#region Constructor

public SpanFileReader(string filePath)
{
    _filePath = filePath;
    _spanLogger = IocContainer.Instance.Container.Resolve<ISpanLogger>();
}

#endregion

#region Public Methods

public bool ReadSpanRecords(CancellationToken ct)
{
    try
    {
        if (!VerifySpanFile())
            return false;

        _spanFileLines = new List<string>();

        using (var streamReader = new StreamReader(_filePath))
        {
            while (!streamReader.EndOfStream)
            {
                // some logic
            }
        return true;
        }
    }

    catch (OperationCanceledException operationCanceledException)
    {
        _spanLogger.UpdateLog("some message");
        throw;
    } 
    catch (Exception ex)
    {
        _spanLogger.UpdateLog("some message);
        throw;
    }
}

public void MoveFileToErrorFolder(string spanFileName)
{
    var spanFilePath = AppConfiguration.SpanFolderPath + spanFileName;
    var errorFilePath = AppConfiguration.SpanErrorFolderPath + spanFileName;
    try
    {
        if (File.Exists(spanFilePath))
        {
            if (!File.Exists(errorFilePath))
            {
                _spanLogger.UpdateLog("some message");
                File.Move(spanFilePath, errorFilePath);
                _spanLogger.UpdateLog("some message");
            }
            else
            {
                File.Delete(spanFilePath);
                _spanLogger.UpdateLog("some message");
            }
        }
        else
        {
            _spanLogger.UpdateLog("some message");
        }
    }
    catch (Exception ex)
    {
        _spanLogger.UpdateLog("some message");
        throw ex;
    }
}
} 
```

现在我想以这样的方式使用**StreamReader() ，我可以使用****Autofac**通过某个接口（比如**IStreamReader**）解析它的实例。因此，在为**SpanFileReader()**编写单元测试时，我可以在容器中注册**IStreamReader 的**Moq 实例并使用它而不是实际实例。我也想对**File()**类做类似的事情，这样我就可以提供我自己的 moq 实现，在测试 SUT（**SpanFileReader**实例）时调用它。有人可以建议一个正确的方法来处理这些场景。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:16:22.650

你提到了两个问题：

**如何嘲笑`StreamReader`？**

1.  `IStreamReader`通过从 中复制方法来创建您的界面`StreamReader`。
2.  创建一个`StreamReaderWrapper`实现`IStreamReader`.
3.  在包装器的构造函数中，创建一个`StreamReader`.
4.  对于每个方法，将调用转发到包装对象。

例如

```
interface IStreamReader
{
    string ReadLine();
    // etc...
}

public class StreamReaderWrapper : IStreamReader
{
    private StreamReader _streamReader;

    public StreamReaderWrapper(string path)
    {
        _streamReader = new StreamReader(path);
    }

    public string ReadLine()
    {
        return _streamReader.ReadLine();
    }
} 
```

现在`new StreamReader()`使用 Autofac（或任何工厂/IoC 容器）替换您的代码。测试时，返回 a`Mock<IStreamReader>()`代替：

```
using (var streamReader =
    IocContainer.Instance.Container.Resolve<IStreamReaderWrapper>(_filePath))
{
    // ...
} 
```

**如何嘲笑`File`？**

执行与上面相同的操作，而不是创建一个没有构造函数/包装对象的`IFile`and`FileWrapper`类。

实例化此包装器的一个实例以供整个类使用，并在您通常使用的任何地方使用此实例`File`。

例如

```
interface IFile
{
    bool Exists(string name);
    // etc...
}

public class FileWrapper : IFile
{
    public bool Exists(string name)
    {
        return File.Exists(name);
    }
} 
```

然后（从你的例子）：

```
public SpanFileReader(string filePath)
{
    // ...
    _fileWrapper = IocContainer.Instance.Container.Resolve<IFileWrapper>();
}

public void MoveFileToErrorFolder(string spanFileName)
{
    // ...
    if (_fileWrapper.Exists(spanFilePath))
    {
       // ...
    }
} 
```

* * *

我发现这是一个非常干净的模式，因为所有的构造函数/方法签名都被保留了下来。拥有不涉及文件系统且易于模拟的测试是一个巨大的优势，而且速度也快得多。

一个重要的提示是避免向包装器添加任何逻辑，否则它们可能也需要测试（所以你必须创建一个包装器包装器......）！

类似的类`File`也可以通过实例访问，因此您可能希望创建单独的接口以分别保存实例和静态方法包装器（`IFileStatics`？）。

另一个想法是建立一个包含各种包装的 .Net 类的库以供将来使用，或者使用各种 .NET 技术（例如 Castle Dynamic Proxy）自动创建包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T11:42:40.087

查看 System.IO.Abstractions [https://github.com/tathamoddie/System.IO.Abstractions](https://github.com/tathamoddie/System.IO.Abstractions)。我最近才发现这一点，但它对我来说效果很好。

这基本上是一个包含 System.IO 中类的包装器的库，因此您可以构造函数将它们注入到您的类中，并在您的测试中传递模拟。

例如：

```
// register in autofac
builder.RegisterType<FileWrapper>().As<FileBase>();

public class MyClass 
{
    private readonly FileBase _file;

    public MyClass(FileBase file) 
    {
         _file = file;
    }

    public void MyMethod()
    {
        _file.Exists("...");
    }

 } 
```******

# c# - SaveChanges 没有反映在 raven 数据库中

> ID：14261888
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:12.817
> 
> 标签：c#, ravendb

我对 RavenDB 很陌生。

当我调用`SaveChanges()`我的会话时，它成功执行，但数据没有存储在数据库中。

我的代码如下：

```
using (var session = RavenDocumentStore.OpenSession())
{
    var time = session.Query<Exampleusers>()
            .Where(x => x.Username == userName).FirstOrDefault();
    var temp = time.Id;
    var data = session.Load<Exampleusers>(
            string.Format("Exampleusers/{0}", temp));

    data.Expiration = DateTime.Now;

    session.SaveChanges();
} 
```

是什么导致了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:25:52.540

加载 Exampleusers 时传入 temp 而不是 string.format(...)

```
using (var session = RavenDocumentStore.OpenSession())
{
    var time = session.Query<Exampleusers>()
        .Where(x => x.Username == userName).FirstOrDefault();
    var temp = time.Id;
    var data = session.Load<Exampleusers>(temp);

    data.Expiration = DateTime.Now;
    session.SaveChanges(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:25:09.120

问题在于您的 id 字符串的手动格式。这是不必要的，并且由于您的复数形式而可能是错误的。

1.  以单数形式命名您的实体。 `ExampleUser`
2.  确保您从查询中得到结果。如果索引过时或未找到用户名，则为`time`空。您应该检查以避免`NullReferenceException`.
3.  直接加载实体即可。如果您使用的是字符串 ID，则您拥有完整的文档密钥。如果您使用整数或 guid id，Raven 有一个重载可以为您转换它。

    var data = session.Load(time.Id);

它应该可以工作。

# javascript - jQuery Basic Slider - 删除调整大小/响应功能

> ID：14261889
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:21.553
> 
> 标签：javascript, jquery, wordpress, slider

我正在使用 Basic jQuery Slider (http://basic-slider.com/)，并且正在尝试删除响应/调整大小功能。滑块应保持在居中的 div 内，并且不会改变大小 - 但是，一旦我调整窗口大小，滑块就会垂直拉伸，但它的宽度似乎没问题。有问题的页面是[http://www.ritapaynemusic.com/home](http://www.ritapaynemusic.com/home)

我已经在这里粘贴了js代码-希望有人可以帮助我！谢谢。

```
/*
* Basic jQuery Slider plug-in v.1.3
*
* http://www.basic-slider.com
*
* Authored by John Cobb
* http://www.johncobb.name
* @john0514
*
* Copyright 2011, John Cobb
* License: GNU General Public License, version 3 (GPL-3.0)
* http://www.opensource.org/licenses/gpl-3.0.html
*
*/

;(function($) {

"use strict";

$.fn.bjqs = function(o) {

    // slider default settings
    var defaults        = {

        // w + h to enforce consistency
        width           : 720,
        height          : 265,

        // transition valuess
        animtype        : 'fade',
        animduration    : 450,      // length of transition
        animspeed       : 4000,     // delay between transitions
        automatic       : null,     // enable/disable automatic slide rotation

        // control and marker configuration
        showcontrols    : true,     // enable/disable next + previous UI elements
        centercontrols  : true,     // vertically center controls
        nexttext        : '<img src="http://www.ritapaynemusic.com/wp-content/themes/sfas/slider/img/next.png">',   // text/html inside next UI element
        prevtext        : '<img src="http://www.ritapaynemusic.com/wp-content/themes/sfas/slider/img/prev.png">',   // text/html inside previous UI element
        showmarkers     : true,     // enable/disable individual slide UI markers
        centermarkers   : true,     // horizontally center markers

        // interaction values
        keyboardnav     : true,     // enable/disable keyboard navigation
        hoverpause      : true,     // enable/disable pause slides on hover

        // presentational options
        usecaptions     : true,     // enable/disable captions using img title attribute
        randomstart     : null,     // start from a random slide
        responsive      : false,     // enable responsive behaviour

    };

    // create settings from defauls and user options
    var settings        = $.extend({}, defaults, o);

    // slider elements
    var $wrapper        = this,
        $slider         = $wrapper.find('ul.bjqs'),
        $slides         = $slider.children('li'),

        // control elements
        $c_wrapper      = null,
        $c_fwd          = null,
        $c_prev         = null,

        // marker elements
        $m_wrapper      = null,
        $m_markers      = null,

        // elements for slide animation
        $canvas         = null,
        $clone_first    = null,
        $clone_last     = null;

    // state management object
    var state           = {
        slidecount      : $slides.length,   // total number of slides
        animating       : null,            // bool: is transition is progress
        paused          : null,            // bool: is the slider paused
        currentslide    : 1,                // current slide being viewed (not 0 based)
        nextslide       : 0,                // slide to view next (not 0 based)
        currentindex    : 0,                // current slide being viewed (0 based)
        nextindex       : 0,                // slide to view next (0 based)
        interval        : null              // interval for automatic rotation
    };

    var responsive      = {
        width           : null,
        height          : null,
        ratio           : null
    };

    // helpful variables
    var vars            = {
        fwd             : 'forward',
        prev            : 'previous'
    };

    // run through options and initialise settings
    var init = function() {

        // differentiate slider li from content li
        $slides.addClass('bjqs-slide');

        // conf dimensions, responsive or static
        if( settings.responsive ){
            conf_responsive();
        }
        else{
            conf_static();
        }

        // configurations only avaliable if more than 1 slide
        if( state.slidecount > 1 ){

            // enable random start
            if (settings.randomstart){
                conf_random();
            }

            // create and show controls
            if( settings.showcontrols ){
                conf_controls();
            }

            // create and show markers
            if( settings.showmarkers ){
                conf_markers();
            }

            // enable slidenumboard navigation
            if( settings.keyboardnav ){
                conf_keynav();
            }

            // enable pause on hover
            if (settings.hoverpause && settings.automatic){
                conf_hoverpause();
            }

            // conf slide animation
            if (settings.animtype === 'slide'){
                conf_slide();
            }

        }

        if(settings.usecaptions){
            conf_captions();
        }

        // TODO: need to accomodate random start for slide transition setting
        if(settings.animtype === 'slide' && !settings.randomstart){
            state.currentindex = 1;
            state.currentslide = 2;
        }

        // slide components are hidden by default, show them now
        $slider.show();
        $slides.eq(state.currentindex).show();

        // Finally, if automatic is set to true, kick off the interval
        if(settings.automatic){
            state.interval = setInterval(function () {
                go(vars.fwd, false);
            }, settings.animspeed);
        }

    };

    var conf_responsive = function() {

        responsive.width    = $wrapper.outerWidth();
        responsive.ratio    = responsive.width/settings.width,
        responsive.height   = settings.height * responsive.ratio;

        if(settings.animtype === 'fade'){

            // initial setup
            $slides.css({
                'height'        : '290px',
                'width'         : '720px'
            });
            $slider.css({
                'height'        : '290px',
                'width'         : '720px'
            });
            $wrapper.css({
                'height'        : '290px',
                'max-width'     : '720px',
                'position'      : 'relative'
            });

            if(responsive.width < settings.width){

                $slides.css({
                    'height'        : responsive.height
                });
                $slider.css({
                    'height'        : responsive.height
                });
                $wrapper.css({
                    'height'        : responsive.height
                });

            }

        if(settings.animtype === 'slide'){

            // initial setup
            $slides.css({
                'height'        : settings.height,
                'width'         : settings.width
            });
            $slides.children('img').css({
                'height'        : settings.height,
                'width'         : settings.width
            });
            $slider.css({
                'height'        : settings.height,
                'width'         : settings.width * settings.slidecount
            });
            $wrapper.css({
                'height'        : settings.height,
                'max-width'     : settings.width,
                'position'      : 'relative'
            });

            if(responsive.width < settings.width){

                $slides.css({
                    'height'        : responsive.height
                });
                $slides.children('img').css({
                    'height'        : responsive.height
                });
                $slider.css({
                    'height'        : responsive.height
                });
                $wrapper.css({
                    'height'        : responsive.height
                });

            }

            $(window).resize(function() {

                // calculate and update dimensions
                responsive.width    = $wrapper.outerWidth(),
                responsive.ratio    = responsive.width/settings.width,
                responsive.height   = settings.height * responsive.ratio;

                $slides.css({
                    'height'        : responsive.height,
                    'width'         : responsive.width
                });
                $slides.children('img').css({
                    'height'        : responsive.height,
                    'width'         : responsive.width
                });
                $slider.css({
                    'height'        : responsive.height,
                    'width'         : responsive.width * settings.slidecount
                });
                $wrapper.css({
                    'height'        : responsive.height
                });
                $canvas.css({
                    'height'        : responsive.height,
                    'width'         : responsive.width
                });

                resize_complete(function(){
                    go(null,state.currentslide);
                }, 200, "some unique string");

            });

        }

    };

    var resize_complete = (function () {

        var timers = {};

        return function (callback, ms, uniqueId) {
            if (!uniqueId) {
                uniqueId = "Don't call this twice without a uniqueId";
            }
            if (timers[uniqueId]) {
                clearTimeout (timers[uniqueId]);
            }
            timers[uniqueId] = setTimeout(callback, ms);
        };

    })();

    // enforce fixed sizing on slides, slider and wrapper
    var conf_static = function() {

        $slides.css({
            'height'    : settings.height,
            'width'     : settings.width
        });
        $slider.css({
            'height'    : settings.height,
            'width'     : settings.width
        });
        $wrapper.css({
            'height'    : settings.height,
            'width'     : settings.width,
            'position'  : 'relative'
        });

    };

    var conf_slide = function() {

        // create two extra elements which are clones of the first and last slides
        $clone_first    = $slides.eq(0).clone();
        $clone_last     = $slides.eq(state.slidecount-1).clone();

        // add them to the DOM where we need them
        $clone_first.attr({'data-clone' : 'last', 'data-slide' : 0}).appendTo($slider).show();
        $clone_last.attr({'data-clone' : 'first', 'data-slide' : 0}).prependTo($slider).show();

        // update the elements object
        $slides             = $slider.children('li');
        state.slidecount    = $slides.length;

        // create a 'canvas' element which is neccessary for the slide animation to work
        $canvas = $('<div class="bjqs-wrapper"></div>');

        // if the slider is responsive && the calculated width is less than the max width
        if(settings.responsive && (responsive.width < settings.width)){

            $canvas.css({
                'width'     : responsive.width,
                'height'    : responsive.height,
                'overflow'  : 'hidden',
                'position'  : 'relative'
            });

            // update the dimensions to the slider to accomodate all the slides side by side
            $slider.css({
                'width'     : responsive.width * (state.slidecount + 2),
                'left'      : -responsive.width * state.currentslide
            });

        }
        else {

            $canvas.css({
                'width'     : settings.width,
                'height'    : settings.height,
                'overflow'  : 'hidden',
                'position'  : 'relative'
            });

            // update the dimensions to the slider to accomodate all the slides side by side
            $slider.css({
                'width'     : settings.width * (state.slidecount + 2),
                'left'      : -settings.width * state.currentslide
            });

        }

        // add some inline styles which will align our slides for left-right sliding
        $slides.css({
            'float'         : 'left',
            'position'      : 'relative',
            'display'       : 'list-item'
        });

        // 'everything.. in it's right place'
        $canvas.prependTo($wrapper);
        $slider.appendTo($canvas);

    };

    var conf_controls = function() {

        // create the elements for the controls
        $c_wrapper  = $('<ul class="bjqs-controls"></ul>');
        $c_fwd      = $('<li class="bjqs-next"><a href="#" data-direction="'+ vars.fwd +'">' + settings.nexttext + '</a></li>');
        $c_prev     = $('<li class="bjqs-prev"><a href="#" data-direction="'+ vars.prev +'">' + settings.prevtext + '</a></li>');

        // bind click events
        $c_wrapper.on('click','a',function(e){

            e.preventDefault();
            var direction = $(this).attr('data-direction');

            if(!state.animating){

                if(direction === vars.fwd){
                    go(vars.fwd,false);
                }

                if(direction === vars.prev){
                    go(vars.prev,false);
                }

            }

        });

        // put 'em all together
        $c_prev.appendTo($c_wrapper);
        $c_fwd.appendTo($c_wrapper);
        $c_wrapper.appendTo($wrapper);

        // vertically center the controls
        if (settings.centercontrols) {

            $c_wrapper.addClass('v-centered');

            // calculate offset % for vertical positioning
            var offset_px   = ($wrapper.height() - $c_fwd.children('a').outerHeight()) / 2,
                ratio       = (offset_px / settings.height) * 100,
                offset      = ratio + '%';

            $c_fwd.find('a').css('top', offset);
            $c_prev.find('a').css('top', offset);

        }

    };

    var conf_markers = function() {

        // create a wrapper for our markers
        $m_wrapper = $('<ol class="bjqs-markers"></ol>');

        // for every slide, create a marker
        $.each($slides, function(key, slide){

            var slidenum    = key + 1,
                gotoslide   = key + 1;

            if(settings.animtype === 'slide'){
                // + 2 to account for clones
                gotoslide = key + 2;
            }

            var marker = $('<li><a href="#">'+ slidenum +'</a></li>');

            // set the first marker to be active
            if(slidenum === state.currentslide){ marker.addClass('active-marker'); }

            // bind the click event
            marker.on('click','a',function(e){
                e.preventDefault();
                if(!state.animating && state.currentslide !== gotoslide){
                    go(false,gotoslide);
                }
            });

            // add the marker to the wrapper
            marker.appendTo($m_wrapper);

        });

        $m_wrapper.appendTo($wrapper);
        $m_markers = $m_wrapper.find('li');

        // center the markers
        if (settings.centermarkers) {
            $m_wrapper.addClass('h-centered');
            var offset = (settings.width - $m_wrapper.width()) / 2;
            $m_wrapper.css('left', offset);
        }

    };

    var conf_keynav = function() {

        $(document).keyup(function (event) {

            if (!state.paused) {
                clearInterval(state.interval);
                state.paused = true;
            }

            if (!state.animating) {
                if (event.keyCode === 39) {
                    event.preventDefault();
                    go(vars.fwd, false);
                } else if (event.keyCode === 37) {
                    event.preventDefault();
                    go(vars.prev, false);
                }
            }

            if (state.paused && settings.automatic) {
                state.interval = setInterval(function () {
                    go(vars.fwd);
                }, settings.animspeed);
                state.paused = false;
            }

        });

    };

    var conf_hoverpause = function() {

        $wrapper.hover(function () {
            if (!state.paused) {
                clearInterval(state.interval);
                state.paused = true;
            }
        }, function () {
            if (state.paused) {
                state.interval = setInterval(function () {
                    go(vars.fwd, false);
                }, settings.animspeed);
                state.paused = false;
            }
        });

    };

    var conf_captions = function() {

        $.each($slides, function (key, slide) {

            var caption = $(slide).children('img:first-child').attr('title');

            // Account for images wrapped in links
            if(!caption){
                caption = $(slide).children('a').find('img:first-child').attr('title');
            }

            if (caption) {
                caption = $('<div class="capt" style="width: 310px; height: auto; vertical-align:middle; display: inline-block;"><span class="bjqs-caption">' + caption + '</span></div>');
                caption.appendTo($(slide));
            }

        });

    };

    var conf_random = function() {

        var rand            = Math.floor(Math.random() * state.slidecount) + 1;
        state.currentslide  = rand;
        state.currentindex  = rand-1;

    };

    var set_next = function(direction) {

        if(direction === vars.fwd){

            if($slides.eq(state.currentindex).next().length){
                state.nextindex = state.currentindex + 1;
                state.nextslide = state.currentslide + 1;
            }
            else{
                state.nextindex = 0;
                state.nextslide = 1;
            }

        }
        else{

            if($slides.eq(state.currentindex).prev().length){
                state.nextindex = state.currentindex - 1;
                state.nextslide = state.currentslide - 1;
            }
            else{
                state.nextindex = state.slidecount - 1;
                state.nextslide = state.slidecount;
            }

        }

    };

    var go = function(direction, position) {

        // only if we're not already doing things
        if(!state.animating){

            // doing things
            state.animating = true;

            if(position){
                state.nextslide = position;
                state.nextindex = position-1;
            }
            else{
                set_next(direction);
            }

            // fade animation
            if(settings.animtype === 'fade'){

                if(settings.showmarkers){
                    $m_markers.removeClass('active-marker');
                    $m_markers.eq(state.nextindex).addClass('active-marker');
                }

                // fade out current
                $slides.eq(state.currentindex).fadeOut(settings.animduration);
                // fade in next
                $slides.eq(state.nextindex).fadeIn(settings.animduration, function(){

                    // update state variables
                    state.animating = false;
                    state.currentslide = state.nextslide;
                    state.currentindex = state.nextindex;

                });

            }

            // slide animation
            if(settings.animtype === 'slide'){

                if(settings.showmarkers){

                    var markerindex = state.nextindex-1;

                    if(markerindex === state.slidecount-2){
                        markerindex = 0;
                    }
                    else if(markerindex === -1){
                        markerindex = state.slidecount-3;
                    }

                    $m_markers.removeClass('active-marker');
                    $m_markers.eq(markerindex).addClass('active-marker');
                }

                // if the slider is responsive && the calculated width is less than the max width
                if(settings.responsive && ( responsive.width < settings.width ) ){
                    state.slidewidth = responsive.width;
                }
                else{
                    state.slidewidth = settings.width;
                }

                $slider.animate({'left': -state.nextindex * state.slidewidth }, settings.animduration, function(){

                    state.currentslide = state.nextslide;
                    state.currentindex = state.nextindex;

                    // is the current slide a clone?
                    if($slides.eq(state.currentindex).attr('data-clone') === 'last'){

                        // affirmative, at the last slide (clone of first)
                        $slider.css({'left': -state.slidewidth });
                        state.currentslide = 2;
                        state.currentindex = 1;

                    }
                    else if($slides.eq(state.currentindex).attr('data-clone') === 'first'){

                        // affirmative, at the fist slide (clone of last)
                        $slider.css({'left': -state.slidewidth *(state.slidecount - 2)});
                        state.currentslide = state.slidecount - 1;
                        state.currentindex = state.slidecount - 2;

                    }

                    state.animating = false;

                });

            }

        }

    };

    // lets get the party started :)
    init();

};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:14:23.490

问题解决了。

只需对索引文件进行以下更改：

```
 /*  height      : 320,
    width       : 620,*/
    responsive  : false 
```

# python - 带有变量 sig figs 的 Sig fig 格式显示

> ID：14261894
> 
> 赞同：3
> 
> 时间：2013-01-10T15:55:32.473
> 
> 标签：python, string, python-2.7

我正在尝试在字符串中显示 sig figs 并且我找到了这种`'{:.2f}'.format(x)`样式，只要我在代码中将 sig figs 的数量作为整数，它就可以很好地工作，但是我似乎无法让这种格式的格式工作如果sig figs 的数量包含在一个变量中。 `2`工作`sig=2`不。我一直在尝试使用`%`with with来像这样`.format`插入，但它不起作用。 `sig``'{:.%if}'.format(x) %sig'`

我确信有一个非常简单优雅的解决方案，但我无法弄清楚。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:03:08.043

您实际上可以使用字符串格式替换来为格式字符串本身提供参数：

```
In [79]: '{:.{s}f}'.format(1.234, s=2)
Out[79]: '1.23'

In [80]: '{:.{s}f}'.format(1.234, s=3)
Out[80]: '1.234' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:11:23.143

对于我们这些非常喜欢它的人，您也可以使用旧式字符串插值（% 格式）来做到这一点：

```
>>> "%.*f"%(2,1.2345)
'1.23'
>>> "%.*f"%(3,1.2345)
'1.234' 
```

但是，如果您使用的是较新版本的python（2.6+），您可能应该使用@unutbu 提出的表单

# mod-rewrite - mod_rewrite 协助

> ID：14261896
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:38.197
> 
> 标签：mod-rewrite

我一直在努力使用 mod_rewrite，希望在以下情况下提供帮助：

我想要以下 URL 格式：

> http://site.com/[子部分]/[国家名称]/[城市名称]

打开页面（不重定向）：

> http://site.com/[国家名称]/[城市名称]/index.php

例如，如果用户键入以下任何内容：

> site.com/search/Canada/Vancouver
> 
> site.com/content/Canada/Vancouver

它会显示文件（不重定向）：

> site.com/Canada/Vancouver

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:48:47.333

尝试以下规则：[虽然未在此处测试]

```
RewriteRule ^(search/)([^?]*) $2 [L,NC]
RewriteRule ^(content/)([^?]*) $2 [L,NC] 
```

# apache-flex - 带有组合框的 Flex 树结构

> ID：14261897
> 
> 赞同：1
> 
> 时间：2013-01-10T15:55:43.073
> 
> 标签：apache-flex

我需要在 flex 中显示一个树结构，除了在每个节点中我需要显示一个 ComboBox。Tree 控件似乎无法做到这一点。有没有我想念的内置方法来做到这一点？

# linux - 来自标头 shell 脚本的子字符串

> ID：14261900
> 
> 赞同：1
> 
> 时间：2013-01-10T15:55:46.000
> 
> 标签：linux, shell, unix, grep

我需要帮助，我有来自 tcpdump 标头的下一行：

```
11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229) 
```

我需要指定 header 的值（例如：proto），结果必须是：

```
proto UDP (17) 
```

我正在尝试使用该 shell 脚本程序：

```
var=flags
echo '11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229)' | grep -oP "\b$var+" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:58:10.910

单程：

```
echo '11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229)' | grep -o 'proto [^,]\+' 
```

使用变量：

```
$ x="proto"
$ echo '11:46:24.85123........., proto UDP (17), length 229)' | grep -o "${x} [^,]\+"
proto UDP (17) 
```

# python - 如何在 IPython 笔记本中打开交互式 matplotlib 窗口？

> ID：14261903
> 
> 赞同：149
> 
> 时间：2013-01-10T15:55:48.013
> 
> 标签：python, matplotlib, jupyter-notebook

我正在使用 IPython，`--pylab=inline`有时希望快速切换到交互式、可缩放的 matplotlib GUI 以查看绘图（当您在终端 Python 控制台中绘图时弹出的图形）。我怎么能那样做？最好不要离开或重新启动我的笔记本。

IPy 笔记本中的内联图的问题在于它们的分辨率有限，我无法放大它们以查看一些较小的部分。使用从终端启动的 maptlotlib GUI，我可以选择要放大的图形矩形并相应地调整轴。我试着用

```
from matplotlib import interactive
interactive(True) 
```

和

```
interactive(False) 
```

但这并没有做任何事情。我在网上也找不到任何提示。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-01-11T11:35:29.277

根据[文档](http://ipython.readthedocs.org/en/stable/interactive/plotting.html)，您应该能够像这样来回切换：

```
In [2]: %matplotlib inline 
In [3]: plot(...)

In [4]: %matplotlib qt  # wx, gtk, osx, tk, empty uses default
In [5]: plot(...) 
```

这将弹出一个常规的绘图窗口（可能需要在笔记本上重新启动）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2014-12-08T12:24:27.637

如果您只想从内联图切换到交互式图并返回（以便您可以平移/缩放），最好使用 %matplotlib 魔法。

```
#interactive plotting in separate window
%matplotlib qt 
```

并返回 html

```
#normal charts inside notebooks
%matplotlib inline 
```

%pylab 魔法导入一堆其他的东西，甚至可能导致冲突。它执行“从 pylab 导入 *”。

您还可以使用新的笔记本后端（在 matplotlib 1.4 中添加）：

```
#interactive charts inside notebooks, matplotlib 1.4+
%matplotlib notebook 
```

如果您想在图表中具有更多交互性，可以查看**mpld3**和**bokeh**。mpld3 很棒，如果你没有大量的数据点（例如 <5k+）并且你想使用普通的 matplotlib 语法，但与 %matplotlib notebook 相比，它具有更多的交互性。Bokeh 可以处理大量数据，但您需要了解它的语法，因为它是一个单独的库。

您也可以查看 pivottablejs (pip install pivottablejs)

```
from pivottablejs import pivot_ui
pivot_ui(df) 
```

无论交互式数据探索多么酷，它都可能完全破坏可重复性。它发生在我身上，所以我尝试仅在早期阶段使用它，并在对数据有感觉后切换到纯内联 matplotlib/seaborn。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-10-10T15:31:57.283

从 matplotlib 1.4.0 开始，现在有一个交互式后端可在笔记本中使用

```
%matplotlib notebook 
```

有几个版本的 IPython 没有注册该别名，回退是：

```
%matplotlib nbagg 
```

如果这不起作用，请更新您的 IPython。

要玩这个，请转到[tmpnb.org](http://tmpnb.org)

并粘贴

```
%matplotlib notebook

import pandas as pd
import numpy as np
import matplotlib

from matplotlib import pyplot as plt
import seaborn as sns

ts = pd.Series(np.random.randn(1000), index=pd.date_range('1/1/2000', periods=1000))
ts = ts.cumsum()

df = pd.DataFrame(np.random.randn(1000, 4), index=ts.index,
                  columns=['A', 'B', 'C', 'D'])
df = df.cumsum()
df.plot(); plt.legend(loc='best') 
```

进入代码单元（或者只是修改现有的 python 演示笔记本）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-06-27T13:09:19.420

您可以使用

`%matplotlib qt`

如果出现错误`ImportError: Failed to import any qt binding`，请将 PyQt5 安装为：`pip install PyQt5`它适用于我。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-22T13:00:38.197

对于您的问题，更好的解决方案可能是[Charts](https://github.com/arnoutaertgeerts/python-highcharts)库。它使您能够使用出色的[Highcharts](http://highcharts.com) javascript 库来制作精美的交互式绘图。Highcharts 使用 HTML`svg`标签，因此您的所有图表实际上都是矢量图像。

一些特点：

*   您可以下载 .png、.jpg 和 .svg 格式的矢量图，因此您永远不会遇到分辨率问题
*   交互式图表（缩放、滑动、悬停在点上，...）
*   可在 IPython 笔记本中使用
*   使用异步绘图功能同时探索数百个数据结构。

*免责声明：我是图书馆的开发者*

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-28T15:43:43.397

我在 20117 年 5 月 28 日在 www.continuum.io/downloads 的 Anaconda 的“jupyter QTConsole”中使用 ipython。

这是一个使用 ipython 魔术在单独窗口和内联绘图模式之间来回切换的示例。

```
>>> import matplotlib.pyplot as plt

# data to plot
>>> x1 = [x for x in range(20)]

# Show in separate window
>>> %matplotlib
>>> plt.plot(x1)
>>> plt.close() 

# Show in console window
>>> %matplotlib inline
>>> plt.plot(x1)
>>> plt.close() 

# Show in separate window
>>> %matplotlib
>>> plt.plot(x1)
>>> plt.close() 

# Show in console window
>>> %matplotlib inline
>>> plt.plot(x1)
>>> plt.close() 

# Note: the %matplotlib magic above causes:
#      plt.plot(...) 
# to implicitly include a:
#      plt.show()
# after the command.
#
# (Not sure how to turn off this behavior
# so that it matches behavior without using %matplotlib magic...)
# but its ok for interactive work... 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-05-19T18:18:29.947

重新启动内核并清除输出（如果不是从新笔记本开始），然后运行

```
%matplotlib tk 
```

有关更多信息，请转到[使用 matplotlib 绘图](http://ipython.org/ipython-doc/stable/interactive/reference.html#plotting-with-matplotlib)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-12T17:04:07.417

我找到了解决方案。我卸载了 pyqt5，它是通过 apt 安装的。然后，我通过 pip 再次安装了它。这解决了导入错误。

```
sudo apt-get remove --auto-remove python-pyqt5

pip install PyQt5 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-29T11:11:01.637

`matplotlib.use('nbagg')`不适用于新版本的 matplotlib。

相反，我们使用魔术函数作为 

```
%matplotlib nbagg 
```

它适用于新版本的 matplot lib (>3.0)。

```
import matplotlib
import matplotlib.pylab as plt
%matplotlib inline
%matplotlib nbagg 
```

# html - 如何对齐浮动的div

> ID：14261906
> 
> 赞同：0
> 
> 时间：2013-01-10T15:55:57.990
> 
> 标签：html, css, css-float

我对 div 浮动有疑问，

我使用了两个向左浮动的 DIV，但如果 div 2 有大文本，它会在 div 1 下加载，我该如何防止这种情况，我想要两个 div 内联加载。我使用了 inline-block 但没有工作。

[http://jsfiddle.net/pS6Gg/](http://jsfiddle.net/pS6Gg/)

```
<div style="width: 100%;overflow:hidden;">
 <div style="float: left;width:">Left Stuff</div>
 <div style="float: left;margin-left:10px;">    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
 <br style="clear: left;" />
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:58:54.227

不知何故像这样：

```
<div style="width: 100%; overflow:hidden;">
 <div style="float: left;width:20%">Left Stuff</div>
 <div style="float: left;width:80%">Right Stuff</div>
</div> 
```

但是，我不建议使用这样的布局技术，因为它可能会在以后给您带来一些麻烦，当您可能考虑将您的页面移植到移动设备或一些微型显示设备时。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:03:04.317

好吧，如果内容太长以至于两个 DIV 无法显示在同一行上，*您希望发生什么？*您要么必须使用第二行，要么截断显示的内容。

由于在第二行已经发生了，`<span>`如果更可取，请考虑使用内联元素来实现第二个效果。[例子](http://jsfiddle.net/yLeVX/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:57:41.390

您需要为这两个元素设置一个**宽度**参数。`<div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:09:39.793

[http://jsfiddle.net/pS6Gg/4/](http://jsfiddle.net/pS6Gg/4/)或[http://jsfiddle.net/pS6Gg/5/](http://jsfiddle.net/pS6Gg/5/)会这样做吗？

第一种可能性让第二个 div 围绕第一个流动，

```
<div style="float: left; width: 50px;">Left Stuff</div>
<div style="margin-left:10px;">... text ...</div> 
```

第二个通过定义第一个 div 的宽度并给父 div 一个定义的高度供子级填充来创建列效果。

```
<div style="width: 100%;overflow:hidden; height:200px;">              <-- parent height 
<div style="float: left; width: 50px; height:100%;">Left Stuff</div>
<div style="margin-left:10px; height:100%;"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:34:28.747

```
 <div style="width:800px;">
    <div style="float: left;">Left Stuff</div>
    <div style="padding-left:80px;">....</div> 
```

尝试通过 padding-left by 80px ...它在.your Fiddle 中的工作..尝试一下

# objective-c - 将操作分配给包含子菜单的 NSMenuItem

> ID：14261907
> 
> 赞同：1
> 
> 时间：2013-01-10T15:55:59.663
> 
> 标签：objective-c, cocoa, nsmenu

在 Xcode 中，我创建了一个带有子菜单的简单菜单项（来自库的子菜单菜单项）。它的子菜单有一些特定的操作，但我也希望项目本身包含一个点击处理程序。现在，如果我将它连接到控制器中的动作 - 它不起作用。甚至有可能做到吗？

一些附加信息：此菜单项是应用程序自定义停靠菜单的一部分。

谷歌似乎没有太大帮助（或者至少我找不到“赢家”关键字），所以任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:17:52.383

Try this way:

```
NSMenuItem *mainItem = [[NSMenuItem alloc] init];
[mainItem setTitle:@"Main item"];
NSMenu *submenu = [[NSMenu alloc] init];
[submenu addItemWithTitle:@"Sub item" action:nil keyEquivalent:@""];
[mainItem setSubmenu:submenu]; 
```

Or,

```
NSMenu *newMenu;
NSMenuItem *newItem;

// Add the submenu
newItem = [[NSMenuItem allocWithZone:[NSMenu menuZone]] initWithTitle:@"Flashy" action:NULL keyEquivalent:@""];
newMenu = [[NSMenu allocWithZone:[NSMenu menuZone]]initWithTitle:@"Flashy"];
[newItem setSubmenu:newMenu];
[[NSApp mainMenu] addItem:newItem]; 
```

# java - 动态绑定比静态绑定提供更少的执行时间

> ID：14261908
> 
> 赞同：-2
> 
> 时间：2013-01-10T15:56:01.663
> 
> 标签：java

考虑以下代码：

```
 import java.io.*;
    import java.util.*;

    class parent{
      private static int static_count;
      final void static_display(){
       for(int i=0; i< 1000000; i++){
         Object obj = new Object();
       }
       System.out.println("Static method called"+static_count+"times");    
      }
      public void dynamic_display(){
        System.out.println("implemented in child");
      } 
    }

    class child extends parent{
      private static int dynamic_count;
      public void dynamic_display(){
        for(int i=0; i< 1000000; i++){
          Object obj = new Object();
        }
        System.out.println("dynamic method called"+dynamic_count+"times");    
      }
    }

    class sample{
      public static void main(String args[]){
      parent pnt= new parent();
      parent pnt2=new child();
      //static binding
      long startTime = System.nanoTime();
      pnt.static_display();
      long elapsedTime = System.nanoTime() - startTime;

      System.out.println("Total execution time for static binding in millis: "
            + elapsedTime/1000000);
      //dynamic binding
      long startTime2 = System.nanoTime();
      pnt2.dynamic_display();
      long elapsedTime2 = System.nanoTime() - startTime2;

      System.out.println("Total execution time for dynamic binding in millis: "
            + elapsedTime2/1000000);
     }
    } 
```

执行此代码时，我得到以下答案，

```
 Static method called0times
    Total execution time for static binding in millis: 11
    dynamic method called0times
    Total execution time for dynamic binding in millis: 9 
```

只考虑结果中的执行时间。我试图找到执行静态和动态绑定方法所花费的时间。但是根据我的回答，动态绑定比静态绑定要快。这怎么可能。我在任何地方都错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:00:57.673

看起来您的所有测试都以相同的顺序运行，静态然后动态。JVM 可能已经决定优化您的代码，因为它运行的时间量是静态测试的一部分。静态测试将获得优化的所有成本，并获得一些好处。动态代码将受益。

这只是 Java 代码的这种微基准测试可能遇到的各种问题的一个示例。

如果您想要有意义的结果，请使用您正在处理的真实程序并在上下文中进行测试。如果在实际使用中差异太小无法衡量，那么它太小而无法超过代码清晰度。

# javascript - 隐藏由 onkeyup 事件显示的 div（在外部单击时隐藏）

> ID：14261910
> 
> 赞同：0
> 
> 时间：2013-01-10T15:56:07.153
> 
> 标签：javascript, jquery

我的 HTML 代码如下：

```
<div style="float:right;">
    <form>
     <input id="search" onkeyup="lookup(this.value);" type="text" />
    </form>
    <div style="position:relative;">
       <div id="suggestions" style="position:absolute;"></div>
    </div>
</div> 
```

我的 jQuery 代码如下：

```
$("#search").blur(function(){
   $('#suggestions').fadeOut();
}); 
```

我的 JavaScript 代码如下：

```
function lookup(inputString)
{
    if(inputString.length == 0) {
        $('#suggestions').fadeOut();
    } else {
        $.post("/ajax/search/", {queryString: ""+inputString+""}, function(data) { 
            $('#suggestions').fadeIn();
            $('#suggestions').html(data);
        });
    }
} 
```

我尝试了以下但没有奏效：

```
$(document.body).click(function(){
   if (!$('#suggestions').has(this).length) {
    $('#suggestions').hide();
    }
}); 
```

我的问题是当我在div`#suggestions`外部单击时如何隐藏 a 。`#suggestions`现在它只有在#search 中没有字符时才会消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:07:26.773

不要在文档内做任何检查点击：

```
$(document).click(function () {
    $('#suggestions').hide();
}); 
```

如果您还希望在`suggestions`单击 div 时使项目可见，请添加以下内容：

```
$('#suggestions').click(function(e) {
   e.stopPropagation();
}); 
```

这是一个演示[小提琴](http://jsfiddle.net/TX5PT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:10:51.153

尝试这个

```
$('html').click(function(e){
   if (!($(e.target).is('#suggestions'))&&($(e.target).closest('#suggestions').length==0)) {
    $('#suggestions').hide();
    }
}); 
```

# javascript - jqGrid多级分组行为奇怪

> ID：14261914
> 
> 赞同：1
> 
> 时间：2013-01-10T15:56:21.987
> 
> 标签：javascript, jquery, jqgrid

我遇到了一些奇怪的情况，我想知道是否有人可以提供帮助。

在我正在使用的代码中，几个月来我一直在使用多级 (2) 分组，并且没有任何问题。我最近有一个请求添加第三级分组，这导致该级别上的收起（+/- 切换）表现异常。

按 groupField 名称划分的三个级别分别是：part_description、locn_abbr 和corporate_abbr。corporate_abbr 是最近添加的第三级。示例输出如下所示：

1.1 部件说明 1

   1.2 位置

      1.3 客户 1

2.1 部件说明 2

   2.2 位置 2

      2.3 客户 2

3.1 部件说明 3

   3.2 地点 3

      3.3 客户 3

如预期的那样，单击零件描述或位置旁边的 + 将展开客户下方的数据。单击 – 旁边的任何一个也可以正常工作，数据会回滚到适当的级别。

单击 Customer 旁边的 + 会按预期展开数据。单击 – 汇总当前条目的客户数据以及下一个条目的客户数据，这也会删除下一个条目的部件描述和位置级别。使用上面的例子，假设我点击了 - 在第一个条目的客户级别旁边，它看起来像这样：

1.1 部件说明 1

   1.2 位置 1

      1.3 客户 1

      1.3 客户 2

3.1 部件说明 3

   3.2 地点 3

      3.3 客户 3

此外，如果我单击 1.3 Customer 2 旁边的 +，整个条目将像以前一样重新绘制，位于条目 1 下方。

我已经用每个可以想象的搜索词搜索了这个问题，但没有找到任何东西。当这不起作用时，我查看了源代码，并稍微弄乱了 groupingToggle。我也没有成功。有人对这个问题有任何见解吗？我提供的代码片段中是否有明显的遗漏？

这是分组代码的片段：

```
grouping: true,
        groupingView: {
            groupField: ['part_description', 'locn_abbr', 'corporation_abbr'],
            groupOrder: ['desc', 'asc', 'desc'],
            groupColumnShow: [false, false, false],
            groupText: ['<span style="font-weight: bold; background: #D8D8D8; padding: 3px; padding-bottom: 4px; padding-top: 2px; border: 1px solid #A4A4A4; width: 650px; display: inline-block;">{0}</span>', '<span style="font-weight: bold; width: 200px; display: inline-block;">Location: {0}</span><span style=" width: 200px; font-weight: bold; display: inline-block;">Weight: {current_item_weight}</span>', '<span style="width: 200px; display: inline-block;">Customer: {0}</span><span>Weight: {current_item_weight}</span>'],
            groupCollapse: true,
            groupSummary: [false, false, false],
            groupDataSorted: true
        }, 
```

提前致谢。

# ruby-on-rails - 具有后台作业的竞争条件的解决方法

> ID：14261920
> 
> 赞同：0
> 
> 时间：2013-01-10T15:56:37.567
> 
> 标签：ruby-on-rails, resque, race-condition

我正在开发一个`Rails 3.0.19`应用程序 ( `ruby 1.9.2`)，使用`MySQL 5.1`. 从实际代码中抽象一点，我得到的是这样的：

`Widgets`并且它们`Parts`具有`name`属性，并且它们的名称`Parts`有时是从关联的名称派生的`Widget`。所以很自然地，当 a`Widget`的名称更新时，我也想更新`Parts`. 这可能需要相当长的时间（约 60 秒），所以我想在后台工作中进行。因此：

```
class Widget < ActiveRecord::Base
  has_many :parts

  after_save :update_part_names

  def update_part_names
    if name_was && name_changed?
      Resque.enqueue Widget, { 'widget' => self.id, 'old_name' => name_was }
    end
  end

  def self.perform(args)
    widget = Widget.find(args['widget'])
    widget.parts.each do |part|
      new_name = part.name.sub(args['old_name'], widget.name)
      part.name = new_name
      part.save!
    end
  end
end 
```

现在，在我的开发环境中，这很好用。但随后我将此代码推送到我们的暂存环境，在该环境中，我们有许多 resque 工作人员在与应用服务器不同的盒子上运行。现在更新排队，并且似乎成功完成，但实际更新发生在某些`Widget.name`更新而不是其他更新上。如果我`Widget.perform`从控制台运行，它会 100% 工作。

我的假设是这是一个竞争条件——在有更多并行发生的暂存环境中，作业正在排队，然后在`save`事务`Widget`完成之前执行（这可能需要一秒钟；`Widgets`是具有许多协会）。因此，`Widget.find`在 resque 工作中加载了`Widget`仍然具有旧名称的记录，因此`part.name.sub(args['old_name'], self.name)`什么也不做。

我尝试将以下代码添加到作业的方法中：

```
def self.perform(args)
  widget = Widget.find(args['widget'])
  if widget.name == args['old_name']
    Resque.enqueue Widget, args
  else
    # run as before 
```

当时的想法是，只要`Widget`尚未提交对名称的更新，这只会继续重新排队作业，然后它就会成功。但是我仍然看到`part`名称有时会更新的行为，但并非总是如此。（据我所知，每次更新该作业的排队次数永远不会超过一次。）

所以有两个问题：（1）我对问题的诊断一开始就错了吗？(2) 如何让我的更新作业每次都能成功运行？

编辑：越来越确定这确实是一种竞争条件；在之前添加`sleep 60`到后台作业`Widget.find`似乎可以使更新成功地发​​生 100% 的时间。但我不认为这是一个可以接受的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:20:24.897

[在http://logicalfriday.com/2012/08/21/rails-callbacks-workers-and-the-race-you-never-expected-to-lose/](http://logicalfriday.com/2012/08/21/rails-callbacks-workers-and-the-race-you-never-expected-to-lose/)的帮助下找到了解决方案

我之前考虑过使用`after_commit`回调而不是使用回调`after_save`，但拒绝了这个想法，理由是`after_commit`我们不再可以访问`name_was`. 然而，显然 Rails 通过散列使更改即使在提交后仍可用（尽管`reload`从数据库中获取对象会丢弃它们） 。`previous_changes`例如，

```
after_commit :update_part_names

def update_part_names
  return unless self.previous_changes['name'].try(:first)
  Resque.enqueue Widget,
    { 'widget' => self.id, 'old_name' => self.previous_changes['name'].first }
end 
```

`previous_changes`好像：

```
{ "name" => ['old_name', 'updated_name'] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:42:32.700

一些想法 - 你可以做一些事情来最小化竞争条件的机会。首先 - 将作业排入队列，而不是小部件。失败只会影响失败的部分。然后，当您处理作业时，请执行 update_column 而不是保存！- 它会更快，你不会触发其他回调。

```
class Part

  belongs_to :widget

  def self.perform(args)
    part = Part.find(args['part'])
    part.update_column(:name, part.name.sub(args['old_name'], self.name))
  end

end 
```

如果您不必发送旧名称也很好，您可以使用现有方法简单地重新创建零件名称吗？

# css - 更少的条件/保护来检查元素：活动？

> ID：14261925
> 
> 赞同：0
> 
> 时间：2013-01-10T15:56:56.703
> 
> 标签：css, css-selectors, less

我有一个列表项，其中包含一个链接。我已将列表项设置为链接本身，并`:active`启用了 css 属性以使其看起来被单击。但是，我希望当我单击其中的链接时*不会发生这种情况，以免混淆用户实际结束的位置。*

在我改变任何东西之前：

```
.store-list-item:active {
    -webkit-box-shadow: inset 2px 2px 2px 2px rgba(0, 0, 0, 0.6);
    box-shadow: inset 2px 2px 2px 2px rgba(0, 0, 0, 0.6);
} 
```

在尝试了警卫之后：

```
.store-list-item:active when not (.store-list-item .make-default:active) {
    -webkit-box-shadow: inset 2px 2px 2px 2px rgba(0, 0, 0, 0.6);
    box-shadow: inset 2px 2px 2px 2px rgba(0, 0, 0, 0.6);
} 
```

这可能吗？如果没有，有什么解决方法吗？

**编辑：我添加了一个关于正在发生的事情的 jsfiddle。** [http://jsfiddle.net/cV8ep/1/](http://jsfiddle.net/cV8ep/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T02:07:56.343

## 解决方法

如果您将当前位于的样式应用到将位于其中`li`的新包装器，该包装器包含*除*“设为默认”按钮之外的所有内容，然后在按钮上应用 a和按钮以将其定位回wrapper 在大约相同的位置，这将使按钮与获取状态的 wrapper 中的关联（现在是新的 wrapper ，而不是）。这将防止在单击按钮时激活效果。`div``li`*`position: relative``li``position: absolute``:active``div``li`*

 *[**看到这个小提琴**](http://jsfiddle.net/cV8ep/5/)（它有一些“hacky”点，就像我只是`.pull-right`为了说明而覆盖了这个类；你想要对代码的实际构造更加优雅一点）。*

# oracle - 删除具有外键约束的行

> ID：14261926
> 
> 赞同：0
> 
> 时间：2013-01-10T15:56:57.670
> 
> 标签：oracle, plsql

我正在处理一个需求。

有一个表。我想从该表中删除一行，但我无法删除它，因为

1.此表由 79 个表通过外键关系引用 2.这 79 个表中的每一个都由其他 100 个表引用

所以你可以想象它的树结构。所以我需要从底部开始，到达顶部。我需要通过 SQL 来完成

所以我应该从哪里开始???我需要创建一个临时表或任何我可以做任何有用的方法的东西???

注意：不允许级联删除

我可能无法访问任何系统表..任何可以方便的方法？？？我正在使用 oracle 10g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:09:09.310

见：[http ://www.techonthenet.com/oracle/foreign_keys/disable.php](http://www.techonthenet.com/oracle/foreign_keys/disable.php)

```
ALTER TABLE table_name
disable CONSTRAINT constraint_name; 
```

请务必了解执行此类程序的后果以及它将对其他数据/应用程序功能产生的影响。

此外，如果不是很明显，请务必在之后启用约束

```
ALTER TABLE table_name
enable CONSTRAINT constraint_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:16:12.487

您可以使用以下查询（不需要访问 sys 表）来获取表的所有外键及其对应的主键。您可以使用它来构建某种递归函数，该函数遍历您的树并删除所有父条目。

```
select uc.constraint_name, ucc.table_name, ucc.column_name from
user_constraints uc
left join user_cons_columns ucc on (uc.r_constraint_name = ucc.constraint_name)
where uc.table_name = 'TABLENAME'
and uc.constraint_type = 'R' 
```

# r - 在R中的栅格地图上绘制具有比例大小的点到值

> ID：14261930
> 
> 赞同：0
> 
> 时间：2013-01-10T15:57:03.697
> 
> 标签：r, graphics, ggplot2, points, raster

我希望有人能给我一个起点来解决我的问题。

我有一个光栅图像显示蛤物种的出现预测。所以，我有一组坐标，比如 xyz，我想在这个图像上显示。我使用了函数`points`, 在地图上显示点。

例子：

```
myraster<-raster(nrows=250, ncols=217, xmn=540222, xmx=546732, ymn=6652656, ymx=6660156, crs=NA) # creating a raster object

set.seed(12) # placing values into raster

values(myraster) <- runif(ncell(myraster))

head(dataXYZ) # an sample of my XYZ dataset
       x       y    z
1 544500 6658000   11
2 545500 6657000    9
3 546000 6655000    2
4 544000 6655000    1
5 545000 6656500   17
6 545500 6656500   10
plot(myraster)
points(dataXYZ) 
```

我想显示这些点的大小与相关的 z 值成比例，如 R 中的气球图。也是一个图例。

有人可以提供任何提示吗？起点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:24:21.880

不知道你认为气球图是什么，但你想这样做吗？

```
x     <-  c(1, 2, 3, 4)
y     <-  c(1, 2, 3, 4)
size  <-  c(1, 2, 3, 4)

df  <-  data.frame(x, y, size)

plot(x, y, cex=size) 
```

# javascript - 为什么我的 Ajax 不能在 Google Chrome 或 IE 上运行，但可以在 FireFox 上运行，我怎样才能让它工作

> ID：14261931
> 
> 赞同：0
> 
> 时间：2013-01-10T15:57:06.803
> 
> 标签：javascript, html, ajax

/* ajax 在 Chrome 或 IE 上不起作用*/
var request = new XMLHttpRequest();

```
function pg2() {
    request.open("GET","Html/picture.html",true);

    request.onreadystatechange= function() {
        if (request.readyState == 4){
            document.getElementById('content').innerHTML = request.responseText;
        }
    }
    request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:03:41.023

您的第一行有语法错误（尾随句点）。

不同的浏览器使用不同的 JavaScript 引擎，可能是 Firefox 的更宽松。

修复你的 JS，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:38:57.927

如果您只是直接从 HD 打开 http 页面，我相信您会遇到与跨域来源相关的网络错误。Chrome 强制要求 AJAX 请求必须发送到同一来源。[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

如果您使用诸如 Apache 或 IIS 之类的 HTTP 服务器来为您的页面提供服务，它应该可以工作。

您可以通过右键单击页面然后选择 Inspect Element 来打开开发人员工具以查看您遇到的错误。

# sql - 困难分组查询

> ID：14261932
> 
> 赞同：1
> 
> 时间：2013-01-10T15:57:11.380
> 
> 标签：sql, sql-server, group-by, pivot

我无法编写查询以获得我想要的结果。我有下表：

```
CREATE TABLE [dbo].[inputs](
    [iid] [int] IDENTITY(1,1) NOT NULL,
    [tag_id] [int] NULL,
    [date_time] [datetime] NULL,
    [input_raw] [float] NULL,
    [input_calibrated] [float] NULL,
    [input_type] [varchar](50) NULL,
    [virtual_record] [varchar](50) NULL,
    [status_change] [varchar](50) NULL,
    [prev_stat_chg] [varchar](50) NULL,
    [prev_status_change] [varchar](50) NULL,
    [unix_timestamp] [float] NULL,
 CONSTRAINT [PK_inputs] PRIMARY KEY CLUSTERED 
(
    [iid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,   ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]`
) 
```

我正在编写一个查询以获取可与我拥有的时间线图一起使用的格式的数据。需要数据“分组依据”“unix_timestamp”和“n”个 tag_id 的“input_raw”。

例如：

```
SELECT TOP 20 inputs.unix_timestamp, inputs.input_raw, inputs.tag_id 
FROM [200030].[dbo].inputs
WHERE inputs.tag_id = 92149 or inputs.tag_id = 92164
ORDER BY unix_timestamp DESC 
```

给我结果：

```
unix_timestamp  input_raw   tag_id
1357788990  313         92149
1357788990  210         92164
1357788690  313         92149
1357788690  210         92164
1357788390  313         92149
1357788390  210         92164
1357788090  313         92149
1357788090  210         92164
1357787790  313         92149
1357787790  210         92164
1357787490  313         92149
1357787490  210         92164
1357787190  313         92149
1357787190  210         92164
1357786890  313         92149
1357786890  210         92164
1357786590  313         92149
1357786590  210         92164
1357786290  313         92149
1357786290  210         92164 
```

我需要一个看起来像这样的结果：

```
unix_timestamp     tag(92149)     tag(92164)
1357788990         313            210
1357788690         313            210
|
|
Vetc... 
```

如果时间戳上的其他标签有任何其他数据，则如果一个标签中缺少任何数据，则还需要字符串“未定义”或“NULL”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:59:59.410

```
SELECT  unix_timestamp,
        MAX(CASE WHEN tag = 92149 THEN input_raw ELSE NULL END) [tag92149],
        MAX(CASE WHEN tag = 92164 THEN input_raw ELSE NULL END) [tag92164]
FROM    tableName
GROUP BY unix_timestamp 
```

或者

```
SELECT unix_timestamp, [92149] As tag92149, [92164] as tag92164
FROM
    (
      SELECT    unix_timestamp, 
                tag,
                input_raw
      FROM      tableName
    ) a
    PIVOT
    (
      MAX(input_raw)
      for tag in ([92149], [92164])
    ) b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:00:26.380

这是一个旋转查询。您可以使用以下方法在任何数据库中执行此操作：

```
select unix_timestamp, 
       max(case when tag = 92149 then input_raw end) as tag_92349,
       max(case when tag = 92164 then input_raw end) as tag_92164
from (SELECT TOP 20 inputs.unix_timestamp, inputs.input_raw, inputs.tag_id 
     FROM [200030].[dbo].inputs
     WHERE inputs.tag_id = 92149 or inputs.tag_id = 92164
    ) t
group by unix_timestamp
ORDER BY unix_timestamp DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:00:31.610

这是数据的枢纽。您没有指定您使用的 RDBMS，但您可以在所有数据库中使用以下内容：

```
SELECT unix_timestamp,
  max(case when inputs.tag_id = 92149 then input_raw else null end) tag_92149,
  max(case when inputs.tag_id = 92164 then input_raw else null end) tag_92164
FROM [200030].[dbo].inputs
GROUP BY unix_timestamp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f7dcc/1)

如果您使用的是带有`PIVOT`函数的数据库（SQL Server/Oracle），那么您可以使用：

```
select *
from
(
  select unix_timestamp,
    input_raw,
    tag_id 
  from [200030].[dbo].inputs
) src
pivot
(
  max(input_raw)
  for tag_id in ([92149], [92164])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f7dcc/4)

两者的结果是：

```
| UNIX_TIMESTAMP | 92149 | 92164 |
----------------------------------
|     1357786290 |   313 |   210 |
|     1357786590 |   313 |   210 |
|     1357786890 |   313 |   210 |
|     1357787190 |   313 |   210 |
|     1357787490 |   313 |   210 |
|     1357787790 |   313 |   210 |
|     1357788090 |   313 |   210 |
|     1357788390 |   313 |   210 |
|     1357788690 |   313 |   210 |
|     1357788990 |   313 |   210 | 
```

# php - preg_replace Ñ 用正确的字符

> ID：14261936
> 
> 赞同：1
> 
> 时间：2013-01-10T15:57:39.040
> 
> 标签：php, regex, preg-replace

我试图在 preg_replace 中替换 Ñ 的值。我有这个代码：

```
<?php
$name = 'AVENDAÑO, PAULVIC T.';
$match = preg_replace('/[^A-Z]/','N',$name);

echo '<pre>';
print_r($match);
echo '</pre>';
?> 
```

虽然变量 $name 包含 AVENDAÑO, PAULVIC T。但它仍然显示 AVENDAÑO, PAULVIC T。

但是当我尝试使用上面的代码时，它会将所有非字符替换为 N。

我知道我的正则表达式有问题，或者有人知道解决这些字符格式问题的替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:06:03.403

最好的方法是使用`iconv` [http://php.net/manual/en/function.iconv.php](http://php.net/manual/en/function.iconv.php)

```
echo iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:08:28.643

请改用 str_replace。

```
<?php
$name = 'AVENDAÑO, PAULVIC T.';
$match = str_replace('Ñ','N',$name);

echo $match;
?> 
```

# c# - 为 windows phone 使用自己的 web 服务

> ID：14261938
> 
> 赞同：0
> 
> 时间：2013-01-10T15:57:52.567
> 
> 标签：c#, web-services, windows-phone-7

我创建了自己的 Web 服务来使用。我添加了服务参考。但是在 store_getProducts 处，XDocument xReturn = XDocument.Load(e.Result); 发生错误 它说该字符串未被识别为有效的uri。参数名称 inputuri。有人可以告诉我有什么问题吗

```
SvcRefstore.ServiceSoapClient storeclient = new SvcRefstore.ServiceSoapClient();
       storeclient.getProductsAllCompleted += new EventHandler<SvcRefstore.getProductsAllCompletedEventArgs>(store_getProducts);
       storeclient.getProductsAllAsync();
       storeclient.setItemsarrayAsync(itemarray); 
```

store_getProducts

```
 void store_getProducts(object sender, SvcRefstore.getProductsAllCompletedEventArgs e)
    {

        XDocument xReturn = XDocument.Load(e.Result);
         IEnumerable<Products> myQuote = from item in xReturn.Descendants("Products")
                                         select new Products
                                         {

                                             Name = Convert.ToString(item.Element("Name").Value),
                                             unitPrice = Convert.ToString(item.Element("unitPrice").Value),
                                         };
         Products thisQuote = myQuote.ElementAt(0);
         textBlock1.Text = thisQuote.Name.ToString();
    } 
```

下面是我创建消费的 getProducts 方法

```
 public string getProductsAll()
{
    storeDBCon dbConn;
    dbConn = new storeDBCon();

    DataSet idataset = new DataSet();
    string products = "";

    SqlConnection db = dbConn.GetConnection();

    SqlCommand cmd;
    string sqlRetrieve = "SELECT * FROM Product WHERE Name = @Name";

    db.Open();
    try
    {
        for (int i = 0; i < itemsarray.Length; i ++ )

         //   foreach (String item in itemsarray)
            {
                cmd = new SqlCommand(sqlRetrieve, db);

                cmd.Parameters.AddWithValue("@Name", itemsarray[i]);

                SqlDataReader reader = cmd.ExecuteReader();
                if (reader.HasRows == true)
                {
                    reader.Read();
                    //_userId = reader.GetInt32(0);
                    productID = reader.GetInt32(0);
                    pname = reader.GetString(1);
                    pDesc = reader.GetString(2);
                    unitPrice = reader.GetString(3);
                    imagefilename = reader.GetString(4);

                    products = productID + "," +pname + "," + pDesc + "," + unitPrice + "," + imagefilename + "";
                }
                else

                    products = "Null";

            }

    }
    catch (Exception ex)
    {
        errMsg = ex.Message;
    }
    finally
    {
        db.Close();

    }

    return products;

} 
```

下面是 setItemsarray 方法

```
public void setItemsarray(string[] _str)
    {
        itemsarray = _str;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:05:32.307

这里有几个问题，首先，如果你想将一个字符串加载到 XDocument 中，你需要调用`XDocument doc = XDocument.Parse(string)`not `XDocument.Load()`。

其次，您的`getProductsAll()`Web 服务方法只是构建一个逗号分隔的字符串。是什么让您认为可以将其加载到 XML 文档中？您需要从`getProductsAll()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:05:07.807

正如我在[之前的回答](https://stackoverflow.com/a/5102892/588868)中所解释的，`XDocument.Load`当您指定加载内容的 url 并`XDocument.Parse`在字符串中加载 xml 内容时使用。

在您的情况下，您必须像这样重写代码：

```
void store_getProducts(object sender, SvcRefstore.getProductsAllCompletedEventArgs e)
{

    XDocument xReturn = XDocument.Parse(e.Result); // Change is here
     IEnumerable<Products> myQuote = from item in xReturn.Descendants("Products")
                                     select new Products
                                     {

                                         Name = Convert.ToString(item.Element("Name").Value),
                                         unitPrice = Convert.ToString(item.Element("unitPrice").Value),
                                     };
     Products thisQuote = myQuote.ElementAt(0);
     textBlock1.Text = thisQuote.Name.ToString();
} 
```

[编辑]：经过一番挖掘，我可以看到您的服务器代码不返回 XML，而是一个简单的字符串连接值......稍后您还会遇到其他错误。

# maven - 带有空格的 Maven 系统属性 - Ubuntu 包装中断

> ID：14261941
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:00.340
> 
> 标签：maven, ubuntu

我正在尝试将这样的系统属性传递给 Maven

```
mvn install -Dmy.property="foo bar" 
```

使用 /usr/bin/mvn 中的 Ubuntu 包包装器，这会中断 - 不知何故，命令行被解释为好像是单独`-Dmy.property=foo`的`bar` 参数。

罪魁祸首似乎是包装脚本中的某些东西 - 不知何故，`$@`命令`/usr/share/maven2/bin/mvn $@`中的 重新拆分了命令行参数并错误处理了引号。

有人知道怎么修这个东西吗？

# android - Android：如何由用户自己动态创建新的数据库表？

> ID：14261942
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:04.077
> 
> 标签：android, database, oncreate

我试图找出一种根据用户请求在我的数据库中动态创建新表的方法。我当前的 DB 类使用以下代码。我试图弄清楚如何改变它以便能够动态地创建新表。我的一个想法是使用此代码并首先使用 onCreate 创建一个表，该表将保存未来表的名称。从那里，当用户输入一个新表时，我将该表添加到将保存表名的当前表中，然后我将选择它并使用 to 实际创建具有该特定名称的表。我不确定这是否真的有效，但这是我刚刚想到的，想看看你们的想法。

```
private static class DbHelper extends SQLiteOpenHelper{

    /* Constructor */
    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db){
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                KEY_FRONT + " TEXT NOT NULL, " + 
                KEY_BACK + " TEXT NOT NULL);"
        );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2){
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:04:59.820

我不确定我是否特别赞成你的想法。我认为最好有一个基础，即您实际上是*首先*尝试制作一个 SQLite String 。在最终创建表之前拥有一些中间数据持有者也很重要。

就我个人而言，我会制作一个表单和一个`Object`可以读取表单上所有内容（表名、列号等）并输出您需要的字符串的表单。然后，如果需要，您可以将整个保存`String`到`SharedPrefs`或`SQLite`您喜欢的任何位置。

# c++ - 从 unary_function 继承的谓词函子，它不是带 1 个参数的函数

> ID：14261949
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:10.663
> 
> 标签：c++, stl, predicate, functor

我有一个从 unary_function 继承的仿函数类：

```
template<class T>
class Matcher : public std::unary_function<T, bool>
{
private:
    int m_match;

public:
    Matcher(int valToMatch) : m_match(valToMatch) { };
    bool operator() (T toTest)
    {
        return T.prop == m_match;
    }
} 
```

使用以下其中一项的函数：

```
void DoStuff(std::unary_function<ThisType, bool> & pred, 
             vector<ThisType> & stuffToTest)
{
    for(vector<ThisType>::iterator it = stuffToTest.begin();
        it != stuffToTest.end(); ++it)
    {
        if(pred(*it))      // <<< Compiler complains here
        {
             // do stuff
        }
    }
} 
```

原调用函数：

```
Matcher myMatcher<ThisType>(n);
// have vector<ThisType> myStuff
DoStuff(myMatcher, myStuff); 
```

据我所知，我有一个模板仿函数，我正在构造一个带有 ThisType 类型的实例，我将它传递给需要一个 unary_function 参数的函数并使用 ThisType 的实例调用。

但是编译器抱怨“术语不会评估为带 1 个参数的函数”。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:02:23.863

这是因为即使您将派生类对象传递给函数，函数参数仍然`std::unary_function`没有成员`operator()`接受一个参数。因此错误。

我建议您将函数更改为函数模板：

```
template<typename F>
void DoStuff(F && pred, vector<ThisType> & stuffToTest)
{
    for(auto it = stuffToTest.begin(); it != stuffToTest.end(); ++it)
    {
        if(pred(*it))  
        {
             // do stuff
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:03:59.127

[unary_function](http://en.cppreference.com/w/cpp/utility/functional/unary_function)不是多态类型，它只是一个提供`argument_type`and`result_type`成员类型的基类。

你可以传递给你的`DoStuff`函数 a`std::function<bool(ThisType)>`或者你让你的`DoStuff`函数模板

# javascript - Javascript 使菜单仅在被选中时才可见

> ID：14261950
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:16.240
> 
> 标签：javascript

我有这个菜单结构

```
<div id="menu-s">
<ul>
<li>
<a href="#">About Us</a>
    <ul class="sub-menu">
       <li>
          <a>
       </li>
     </ul>
</li> 
```

我使用这个js：

```
 <script>
        $(document).ready(function () {
  $('#menu-s > li > a').click(function(){
    if ($(this).attr('class') != 'active'){
      $('#menu-s li ul').slideUp();
      $(this).next().slideToggle();
      $('#menu-s li a').removeClass('active');
      $(this).addClass('active');
    }
  });
});
</script> 
```

我只想在调用父 li 时使 sub ul 可见..请帮助我..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:03:50.570

第一个没有结束标签`<ul>`。此外，您的选择器无效。它应该是`$('#menu-s > ul > li > a')`

@edit
代码`$(this).attr('class') != 'active'`也是无效的，因为它总是正确的（我认为）。你应该使用类似的东西`if(!$(this).hasClass('active'))`

@edit2
那是因为如果你只处理没有类“活动”的情况，但是当它这样做时，你没有代码来处理它。添加将解决此问题的 else 语句。

# asp-classic - 不同页面中的相同功能名称

> ID：14261951
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:19.963
> 
> 标签：asp-classic, logic

我有一些 ASP 页面，有时不同的页面具有相同的名称功能。`<!-- #include -->`如果我只有用户请求的一页，我不明白为什么这些函数会随机反应（不执行，错误说已经定义等） 。我猜它不应该给我一个错误......
有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:20:00.733

听起来很明显，但您确定每页只包含一次所需的功能页面，并且您没有包含本身包含声明变量的功能页面的页面吗？

还要检查有问题的变量是否没有在出错的页面上出于其他目的而声明。

（我之所以这么说是因为这是我经常犯规的事情）

# c++ - 制作基于 c++ 的程序以在 Windows 上显示网页

> ID：14261952
> 
> 赞同：-6
> 
> 时间：2013-01-10T15:58:19.537
> 
> 标签：c++

每台windows电脑都默认安装了ie，所以我想制作一个使用ie显示网页的程序！我希望程序只是一个没有地址栏的简单窗口！我还想在程序中添加关闭、最大化和最小化按钮。我也想为程序添加图标！知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:39:51.270

假设您使用 MFC，这相当简单。使用 AppWizard 创建 MFC 应用程序。在 AppWizard 选项的第一页中，将“应用程序样式”更改为“MFC 标准”并（可能）将其更改为“单个文档”程序。在最后一页中，将视图的基类从 CView 更改为 CFormView。

转到项目的资源视图，然后编辑`IDD_<project_name>_FORM`对话框。它最初会包含一个静态控件，说明“在此处插入控件”。删除该静态控件，然后右键单击表单并选择“插入 ActiveX 控件...”。这将弹出一个 ActiveX 控件列表。从列表中选择“Microsoft Web 浏览器”。

这将在您的窗口中放置一个（小）网络浏览器（您可能希望拉伸它以填充窗口）。右键单击控件，然后选择“添加变量...”。这将打开一个对话框，您需要在其中填写变量的名称（例如，您可以将其命名为“浏览器”）。

然后切换到类视图并选择您的视图类。在下部窗格中，双击“OnInitialUpdate”。在该函数已经存在的代码之后，添加如下行：

```
browser.Navigate("http://www.google.com", NULL, NULL, NULL, NULL); 
```

[显然将“http://www.google.com”替换为您要显示的网站的 URL]。

编译并运行，（假设您的计算机已连接到 Internet 等）它应该会在启动时打开所选网页。

您可能还想在视图中为 WM_SIZE 添加一个处理程序，并在/如果用户调整窗口大小时让它调整控件的大小以填充窗口。这有点复杂，因为您的窗口将在您的控件完全初始化之前收到 WM_SIZE 消息。因此，您通常希望添加一个名为“control_valid”之类的布尔变量。在视图的构造函数中将其初始化为“false”。在“导航”调用之后的 OnInitialUpdate 代码中，添加“valid = true;”。然后在 WM_SIZE 处理程序中，仅在（有效）时调整控件的大小，例如：

```
void Cbrowse_fixedView::OnSize(UINT nType, int cx, int cy)
{
    CFormView::OnSize(nType, cx, cy); 

    // This is the block of code we added:
    if(valid) {
        CRect rect;
        GetClientRect(&rect);
        m_browser.MoveWindow(&rect);
    }
} 
```

这样，当用户调整应用程序窗口的大小时，浏览器控件将始终调整大小以填充窗口。

# cakephp - Cake PHP 模型关联如何在不同数据源之间工作

> ID：14261954
> 
> 赞同：1
> 
> 时间：2013-01-10T15:58:25.603
> 
> 标签：cakephp, model, datasource, has-and-belongs-to-many

最近几天我一直在玩 cakephp，我正在尝试弄清楚不同数据源之间的关联是如何工作的。我一直在谷歌上搜索，但没有取得太大的成功。

例如，假设我有两个模型，一个将数据存储在 MySQL 数据库中，另一个将数据存储在 XML 文件中。他们都有 HABTM 设置相互链接。那么，当一个被搜索时，系统是如何连接两个数据源的，效率如何（即避免N+1问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-05T19:10:17.553

我刚刚使用 cake 3 遇到了类似的问题。

我正在使用 Postgres，我的数据位于不同的模式中，我将这些模式定义为不同的数据源。为了使关系工作，我必须为蛋糕添加表定义，以发出单独的查询来连接数据。

这是我的 AccountsTable 中的关系定义，它存储在 comp_x.accounts 中，属于存储在 public.banks 中的 Banks

```
$this->belongsTo('Banks', [
        'foreignKey' => 'bank_id',
        'strategy' => 'select' // this is the change I made
]); 
```

这样，cake 会进行单独的查询以获取银行数据，而不是尝试在同一查询中加入不存在的表 comp_x.banks。

在您的问题中，您提到了 HABTM 关系。我相信它可能是相似的。关于效率，我没有什么要补充的，因为我还没有在大型数据集上测试过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:06:43.143

它不是。当您创建一个`relation`蛋糕时，您所做的就是构建 MySQL 获取数据所需的语言。

Cake 与这种关系如何等同于 MySQL 通常获取的实际数据无关。

# r - 在 R 中生成可能排列的随机、非重复子集

> ID：14261955
> 
> 赞同：4
> 
> 时间：2013-01-10T15:58:31.193
> 
> 标签：r, permutation

给定`p`离散变量，我想随机选择`k`它们可能的排列。换句话说，对于和中的变量`a`，两个随机排列将是 和。`{0,1}``b``{1,2,3}``[0,2]``[1,3]`

我想在不首先生成所有可能排列的表的情况下生成这些，因为随着变量数量和它们可以采用的值的增加，这样做会变得很麻烦。问题是我想这样做而不会重复。[我在这里](https://twitter.com/joshua_ulrich/statuses/243339556785618944)找到的代码很接近：

```
x <- sample.int (2, m*n, TRUE)-1L
dim(x) <- c(m,n) 
```

我意识到对于`values > 2`，我可以将其简化为二进制值矩阵，因此仅限于解决二进制变量的这个问题就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:37:01.667

我知道你说过你不想做所有可能的排列，但实际上并没有那么麻烦。只需使用 expand.grid() 并从结果中采样。例如：

```
a <- c(0,1)
b <- c(1,2,3)
combinations <- expand.grid(a,b)

k <- 2
combinations[sample(nrow(combinations),k),] 
```

这将产生

```
 Var1 Var2
2    1    1
5    0    3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:02:39.173

这可以满足您的需要。它将采用每个变量的排列而不是整体。这在技术上是相同的，但我相信它会加快速度。

```
a <- 1:100
b <- 1:100
c <- 1:100

yourdatamatrix <- cbind(a, b, c) 
```

现在我们有了一些数据，函数来了：

```
PermutationFunction <- function (data, k) {

  # creating matrix: amount of variables * amount of permutations
  permutations <- matrix(1:(k * length(data[1,])), nrow=k) 
  row <- NULL

  # Output will have as many columns as there are variables.
  for (i in 1:length(data[1,])) {
   permutations[ ,i] <- sample(data[ , i], k, replace=FALSE)
  }
  permutations
}

PermutationFunction(yourdatamatrix, k = 10) 
```

时间检查（40 个变量，每个变量有 10000 个值，取 5000）：

```
system.time(PermutationFunction(yourdatamatrix, 5000))

> system.time(PermutationFunction(yourdatamatrix, 5000))
   user  system elapsed 
   0.05    0.00    0.05 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:07:21.103

这是一个答案的尝试：

首先，将 k 设置为要生成的组合数

```
k <- 6

# Store your "p discrete variables" as a list (in this case I've arbitrarily made 4)

variables <- list(a = 1:5, b = 3:12, c = 5:14, d = 7:20)

# Generate a matrix with combinations as rows and each column corresponding to a variable

combinations <- matrix( sapply(variables, sample, 1), 
                        ncol = length(variables), 
                        dimnames = list( NULL , names(variables))

                        )

# Compute combinations until you have generated k that are unique

while(nrow(combinations) < k){

comb.new <- sapply(variables, sample, 1)

combinations <- unique(rbind(combinations, comb.new))

}

rownames(combinations) <- NULL 
```

我知道它不是很漂亮，但它似乎工作！它还具有不要求离散变量具有相同长度并计算唯一组合的优点，而不是仅从每个变量中选择唯一元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:34:59.987

（同意 Kolassa 对您的术语的批评。）如果问题仅限于每个集合中最多 16 个集合，那么您可以将每个样本保存为单个 4 字节整数（正如即将到来的 R 3.0 之前的所有 R 版本所做的那样)，第一个选择作为最低 2 个字节中的位，第二个选择作为高 2 个字节中的位。您将加起来 2^index[i] ，其中“索引”是位置。如果你想要代码，你必须首先提供编码的示例案例。

# sencha-touch-2 - 执行 sencha 命令时出错 (sencha touch2)

> ID：14261958
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:35.860
> 
> 标签：sencha-touch-2

我收到此错误：

```
sencha generate app GS ../GS
/Applications/SenchaSDKTools-2.0.0-beta3/sencha: line 2: which: command not found
/Applications/SenchaSDKTools-2.0.0-beta3/sencha: line 2: dirname: command not found
/Applications/SenchaSDKTools-2.0.0-beta3/sencha: line 3: /bin/node: No such file or directory 
```

如果我只执行 sencha，我也会遇到同样的错误。请帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:18:04.770

使用最新的 Sencha Cmd。下载后，将其安装在 Sencha SDK Tools 的 bin 文件夹中。使用此链接下载最新版本的 Sencha Cmd [http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

然后输入 Sencha，它会显示 Sencha cmd 安装的版本。

# mysql - 使用变量列表在查询中选择“ALL”

> ID：14261962
> 
> 赞同：0
> 
> 时间：2013-01-10T15:58:43.097
> 
> 标签：mysql, bash

我的第一个（简化）脚本 mysql_script.sh 是：

```
#!/bin/bash
/usr/bin/mysql --password=**** --database=mydb<<EOMYSQL
SELECT SUM(usd) FROM mytable WHERE country=$VAR
INTO OUTFILE "oufile_$VAR.txt" FIELDS TERMINATED BY ';';
EOMYSQL 
```

第一个脚本是从第二个脚本调用的：

```
#!/bin/bash
list=( 30 50 60 )
for L in "${list[@]}"
do
  VAR=${L} ./mysql_script.sh
done 
```

它工作正常，但现在我需要获得第 4 个查询，其结果为`$VAR=*`, 或`$VAR=30 or 50 or 60`. 由于 VAR 是我数据库中每个国家/地区的代码，因此我需要“所有国家/地区”的 SUM(usd) 值。我该如何表达？

我测试`'%%'`并`'*'`没有成功。

谢谢，

* * *

为（我希望）更好地理解而编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:11:28.483

试试这个：

```
#!/bin/bash
list=( 30 50 60 country)
for L in "${list[@]}"
do
  VAR=${L} ./mysql_script.sh
done 
```

这将导致`where country=country`which 始终为真，从而返回所有行的总和。

处理 OR 会变得更加棘手，我会说，在这一点上，您最好将 bash 转移到像 perl 或 python 这样的脚本语言中。

# php - 带sql的纸牌游戏引擎

> ID：14261984
> 
> 赞同：-3
> 
> 时间：2013-01-10T15:59:44.340
> 
> 标签：php, sql, sql-server-2008-r2

我打算使用sql创建一个纸牌游戏引擎，4个人玩家的游戏组成和卡片在一个sql表中，现在每件事都完成了游戏逻辑和积分，每个游戏都由一个单独的sql表管理，玩家能够创建房间

每个房间都应该有一个游戏桌，其中包含每个玩家代表的卡片数据和一个单独的聊天桌

1.  如果同时运行 1000 场比赛，并且每次打出一张牌，那么就会向服务器发出请求，从玩家牌组中删除一张牌，记录玩家得分和总游戏得分，这可以在单个 sql 数据库中处理吗没有延迟和性能问题？

2.  我可以为每个游戏室使用全局临时表##sometable，还是必须手动创建表并在游戏结束后删除它们？

3.  我还想知道将聊天数据存储在单个 sql 表中是否会产生问题，我想到的一件事是将所有打开房间的聊天数据保存在具有游戏 id 列的单个数据表中，但是如果这会带来一些性能问题有成千上万行的聊天数据？

4.  还有每场比赛的数据库怎么样，那会不会是过度杀戮？
5.  此类应用程序如何正常管理？

6.  我必须使用多个服务器并在它们上分发正在运行的游戏吗？

7.  您对优化此类事情的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:50:02.210

您应该考虑使用基于内存的缓存系统（例如 Velocity 或 Memcached）来解决性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:06:59.173

1.  是的。关于如何扩展这样的任务的讨论很长。
2.  你可以。但是您应该考虑一个更智能的模型，即多个游戏发生在一个表中。
3.  我会使用[SQL Server Service Broker](http://msdn.microsoft.com/en-us/library/bb522893%28v=sql.105%29.aspx)进行聊天
4.  是的。

我建议您将您的问题分解为多个问题，以便专门研究您问题领域某个方面的贡献者可以做出相应的贡献。

我不知道如何`PHP`工作；但我相当肯定，让许多游戏逻辑发生在客户端会更有效率。为每个游戏动作进行服务器调用是可行的，我的意见只是它不是最理想的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T04:28:24.113

1.  是的，我希望现场玩家在采取行动之前至少有 1 秒的延迟，并且每场比赛一次只有一场比赛在采取行动。因此，对于 1000 场游戏，每秒大约有 1000 笔交易达到峰值。对现代架构没有过多的负担。
2.  大多数 DBMS 中创建和销毁表的开销更大。把它们都放在同一张桌子上。
3.  在一张桌子上聊天就可以了。您可以通过归档以前不活跃游戏的聊天并从主实时数据库中删除来保持性能。
4.  是的，非常低效。增加了复杂性而没有收获。
5.  不知道你在问什么。
6.  仅当您扩展时。我想你会从单个数据库服务器开始，直到你需要更多容量。
7.  从有经验的人开始的良好设计数据库设计将有很长的路要走。不要一开始就浪费太多时间进行微优化，否则您将永远无法起步。在扩展时根据需要进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T22:37:02.737

简而言之，SQL Server 等关系数据库对于游戏来说不是很有用，因为它们无法有效地存储结构化的层次结构数据

我仍然主张避免使用 SQL，但现在有更多选项，`NoSQL`并且为了真正的性能，您应该考虑使用快速临时存储，例如[Redis](http://redis.io/)或 Memcache

您可以快速查看[Cassandra vs MongoDB vs CouchDB vs Redis vs Riak vs HBase vs Couchbase vs Neo4j vs Hypertable vs ElasticSearch vs Accumulo vs VoltDB vs Scalaris 比较](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

优化是一个完全不同的主题。对于广泛的和特定的项目。

# python - matplotlib 函数图的彩色段

> ID：14261988
> 
> 赞同：1
> 
> 时间：2013-01-10T16:00:05.400
> 
> 标签：python, matplotlib, polygon

我想知道是否有更优雅的方式在下面的代码中绘制多边形，或者使用特殊的绘图函数或参数？

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import norm
x = np.linspace(-4,4,150)
# plot density with shaded area showing Pr(-2 <= x <= 1)
lb = -2
ub = 1
d=norm.pdf(x)
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
ax.plot(x, d)
### can this be done more elegantly ###
sx = np.linespace(lb,ub,100)
sd = norm.pdf(sx)
sx = [lb] + sx + [ub]
sd = [0] + list(sd) + [0]
xy = np.transpose(np.array([sx, sd]))
pgon = plt.Polygon(xy, color='b')
#######################################
ax.add_patch(pgon)
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:19:36.933

也许您正在寻找[plt.fill_between](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.fill_between)：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import norm
x = np.linspace(-4,4,150)
# plot density with shaded area showing Pr(-2 <= x <= 1)
lb = -2
ub = 1
d = norm.pdf(x)
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
ax.plot(x, d)

idx = np.searchsorted(x,[lb,ub])
sx = x[idx[0]:idx[1]]
sd = d[idx[0]:idx[1]]
plt.fill_between(sx, sd, 0, color = 'b')
plt.show() 
```

![在此处输入图像描述](../Images/5392c851efb5592f2d6830d34da45519.png)

# javascript - Zebra 对 html 表进行条带化处理

> ID：14261989
> 
> 赞同：0
> 
> 时间：2013-01-10T16:00:06.740
> 
> 标签：javascript, css, zebra-striping

假设我有两张桌子，一张有白色行，一张有所有绿色行。

我目前有针对白色背景执行此操作的 stripeTable 代码：

```
function stripeTables($tables) {
    $("tbody tr:odd td,tbody tr:odd th", $tables).css("background-color", "#f7f6f6");
} 
```

但我想要一个使奇数行更暗的函数，这样如果基础背景不是白色，它仍然只是改变“一些 RGB”值*“更暗”*，这样我就不必选择一个不同的颜色。

关于如何快速做到这一点的任何想法？我正在考虑读取背景的 RGB 值，然后为它计算一个更暗的值，但我对如何做到这一点一无所知。

**更新：**

**jquery-color**解决方案的问题 是我需要提供当前的 bg 颜色，因为可以在 td/th 级别和 tr 级别和 TABLE 级别以及上面的任何其他元素上设置我真的不能确定我的桌子将以颜色 X 作为背景。至少在使用 $(this).css('background-color') 时不会，（如果背景颜色未在我应用条纹颜色的 CSS 级别定义，则返回 undefined。

[以jQuery 和颜色计算](https://stackoverflow.com/questions/4241618/jquery-and-colour-calculation)中介绍的方式使用 jsColors getRGB 函数

```
function stripeTables($tables) {
    //    $("tbody tr:odd td,tbody tr:odd th", $tables).css("background-color", "#f7f6f6");
    $("tbody",$tables).each(function () {
        $("tr:odd td,tr:odd th", $(this)).css('background-color', function () {

            var rgb = getRGB($(this).css('background-color'));
            if (!rgb) {
                rgb = getRGB("#FFF");
            }
            for (var i = 0; i < rgb.length; i++) {
                rgb[i] = Math.max(0, rgb[i] - 10);
            }
            var newColor = 'rgb(' + rgb[0] + ',' + rgb[1] + ',' + rgb[2] + ')';
            return newColor;

        }, 1500);
    });
} 
```

*代码现在只适用于白色背景：*

**具体更新的问题，我需要了解元素的实际背景颜色 hex/rgb，即使它没有设置在那个 CSS LEVEL**

# java - 在 Windows 7 中使用相对路径的 Java 文件类

> ID：14261997
> 
> 赞同：1
> 
> 时间：2013-01-10T16:00:33.707
> 
> 标签：java, file, maven-2, relative-path

我在 Maven2 单元测试中有一些令人困惑的行为。以下测试代码在 Eclipse 和 Maven2 中运行时会产生不同的结果：

```
File f = new File( JUnitConstants.TEST_FILE );
File root = new File( "." );
Log.info( "File Info:" );
Log.info( f.toString() + (f.exists() ? " exists" : " doesn't exist") );
Log.info( f.getAbsoluteFile().toString() + (f.getAbsoluteFile().exists() ? " exists" : " doesn't exist") );
Log.info( root.toString() + (root.exists() ? " exists" : " doesn't exist") );
Log.info( root.getAbsoluteFile().toString() + (root.getAbsoluteFile().exists() ? " exists" : " doesn't exist") ); 
```

在 Eclipse 中，一切都存在并且单元测试运行良好。在 maven 中， f.exists() 方法返回 false；所以它认为该文件不存在！这是 maven 运行测试的输出：

```
2013-01-10 09:50:51,737 [main] INFO  - File Info:
2013-01-10 09:50:51,737 [main] INFO  - target\test-classes\test\test.img doesn't exist
2013-01-10 09:50:51,737 [main] INFO  - C:\Users\me\code\HEAD\modules\project\target\test-classes\test\test.img exists
2013-01-10 09:50:51,737 [main] INFO  - . exists
2013-01-10 09:50:51,737 [main] INFO  - C:\Users\me\code\HEAD\modules\project\. exists 
```

所以，文件存在，根目录是我所期望的，但是为什么Java在使用相对路径时会认为文件不存在？

我在 Windows 7 64 位；使用 JDK 1.6_38 32 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:40:43.790

我从未`new File(filepath)`在测试中真正使用过构造函数。我总是用...

```
String filepath = "test/test.img"; // relative to src/test/resources
InputStream inputStream = getClass().getClassLoader().getResourceAsStream(filepath); 
```

或者，如果资源文件与使用它们的测试位于相同的包结构中，您可以使用更简单的...

```
String filename = "test.img"; // relative to src/test/resources/package/where/tests/live
InputStream inputStream = getClass().getResourceAsStream(filepath); 
```

这似乎在 Maven 和我的 coice IDE [IntelliJ IDEA](http://www.jetbrains.com/idea/)中都有效。

有关上述代码的详细说明，请参阅[此博客文章](http://fuyun.org/2009/11/how-to-read-input-files-in-maven-junit/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:14:02.440

一段时间后，我确定问题出在万无一失的测试过程中。Maven 构建在类似于以下的命令下运行测试：

```
cmd.exe /X /C ""C:\Program Files (x86)\Java\jdk1.6.0_38\jre\bin\java" -Djava.library.path=target/test-classes -jar C:\Users\me\AppData\Local\Temp\surefirebooter6580985433891892701.jar C:\Users\me\AppData\Local\Temp\surefire8381564625923782274tmp C:\Users\me\AppData\Local\Temp\surefire2578536694398675625tmp" 
```

我可以从命令行使用这些确切的参数（在引号内）运行 java 并且一切正常，但是一旦我将它们分叉到另一个命令窗口（cmd.exe /X /C），它就会以同样的方式失败。

我通过禁用 pom.xml 文件中的分叉解决了这个问题：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <argLine>-Djava.library.path=target/test-classes</argLine>
        <forkMode>never</forkMode>
    </configuration>
</plugin> 
```

这仍然必须是我的系统配置中的东西，因为其他 Windows 7 64 位计算机没有这个问题，但关闭分叉似乎是一个解决方案。