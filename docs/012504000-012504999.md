# StackOverflow 问答 12504000-12504999

# asp.net-mvc - SimpleMembership MVC 4 从 UserProfile 中获取数据，在 pages_Roles 中具有角色

> ID：12504002
> 
> 赞同：2
> 
> 时间：2012-09-19T22:52:47.690
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我有以下代码。但是必须有一种更高效的数据库方法来执行此操作，因为如果我错了，请纠正我数据库查询的数量是（1 +（具有管理员角色的用户数量））

对于新的 MVC 4 项目，成员资格默认值为表 UserProfile、webpages_Roles 和 pages_UsersInRoles。我看到很多 Roles.Get* 的内置方法。如果我想避免编写像下面这样的代码，我是否需要为 pages_Roles 和 pages_UsersInRoles 以及所有代码优先属性显式创建模型？仅从 Roles.Get* 获取用户名是不够的，我需要完整的 UserProfile。

仅供参考，下面的“UserRole”对象只是一个枚举

```
public ActionResult Admins()
    {
        var dbContext = new UsersContext();
        var usernames = Roles.GetUsersInRole(UserRole.SiteAdministrator.ToString());
        var adminUsers = new List<UserProfile>();
        foreach (string username in usernames)
        {
            var adminUser = dbContext.UserProfiles.FirstOrDefault(u => u.UserName.ToLower() == username);
            adminUser.Roles.Add(UserRole.SiteAdministrator);
            adminUsers.Add(adminUser);
        }

        return View(adminUsers);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:19:12.053

是的，你不想那样做。这是一种非常低效的方式。

相反，请按照设计使用这些工具。例如，像这样：

```
var usernames = Roles.GetUsersInRole(UserRole.SiteAdministrator.ToString());

var adminUsers = dbContext.UserProfiles
     .Where(x => usernames.Contains(x.Username)).ToList();

return View(adminUsers); 
```

# video - 在 OpenXML 中定位视频关系

> ID：12504010
> 
> 赞同：5
> 
> 时间：2012-09-19T22:53:06.350
> 
> 标签：video, openxml

所以我正在编写一个 pptx 解析器并使用 OpenXML 来加载数据。一切都很顺利（这是一个谎言——我实际上已经准备好把电脑扔到房间另一边跳出窗户了），但我遇到了加载视频的问题，我根本无法弄清楚。问题是 OpenXML 似乎无法找到指定视频 URI 的关系标签。

我所做的是编写代码来循环浏览幻灯片中的各个部分并注销它们的 ID，如下所示：

```
SlidePart slidePart = ...;
foreach(var curPart in slidePart.Parts)
  Console.WriteLine("Part ID: " + curPart.RelationshipId); 
```

所以效果很好 - 它会注销 slide.xml.rels 文件中指定的所有关系 - 相关文件的视频关系除外。我可以在rels文件中看到视频关系，它与幻灯片中videoFile标签的链接ID匹配，但我不知道如何通过代码获取它。我的图像加载工作正常（OpenXML 可以找到图像关系）。视频关系的处理方式是否与其他关系不同？如何获取视频 URI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:06:29.987

视频关系存储在 SlidePart 的 ExternalReleationships 集合中。

Powerpoint 通过以下方式（简化）将视频（外部文件）嵌入到演示文稿中：

1.  `Video`它在 ap:timing (class `Timing`) 标签内为包含视频的幻灯片创建 ap:video (class ) 标签。
2.  p:video 标签包含一个名为 p:cMediaNode (class `CommonMediaNode`) 的子标签。

3.  p:cMediaNode 包含一个名为 p:tgtEl（类`TargetElement`）的子节点。

4.  同样，p:cMediaNode 包含一个名为 p:spTgt (class `ShapeTarget`) 的子节点，它指向与视频相关的图片形状的 ID。图片形状的ID存储在`NonVisualDrawingProperties` `Id`成员中。因此，视频通过这些 Id 连接到图片形状。

5.  此外，图片形状包含一个名为 a:videoFile (class `VideoFromFile`) 的子对象。VideoFromFile 类有一个名为的成员`Link`，它指向外部关系的 Id。

我强烈建议您下载*OpenXML SDK 2.0 生产力工具*。此工具允许您检查演示文件的生成 XML。

以下代码枚举给定演示文稿中所有幻灯片的所有视频。对于每个视频，都会打印到外部文件的 Uri。这是通过查找给定视频的相关外部关系来完成的。

```
using (var doc = PresentationDocument.Open("c:\\temp\\presentation.pptx", false))
{
  var presentation = doc.PresentationPart.Presentation;

  foreach (SlideId slideId in presentation.SlideIdList)
  {
    SlidePart slidePart = doc.PresentationPart.GetPartById(slideId.RelationshipId) as SlidePart;
    if (slidePart == null || slidePart.Slide == null)
    {
      continue;
    }

    Slide slide = slidePart.Slide;

    var videos = slide.Descendants<Video>();

    Console.Out.WriteLine("Found videos for slide ID: {0}", slideId.Id);
    foreach (Video video in videos)
    {
      ShapeTarget shapeTarget = video.Descendants<ShapeTarget>().FirstOrDefault();

      Console.Out.WriteLine("ShapeTargetId = {0}", shapeTarget.ShapeId);

      var videoFromFile = slide.CommonSlideData.ShapeTree.Descendants<Picture>().
                Where<Picture>(p => p.NonVisualPictureProperties.Descendants<NonVisualDrawingProperties>().FirstOrDefault().Id == shapeTarget.ShapeId).
                FirstOrDefault().Descendants<VideoFromFile>().FirstOrDefault();                

      Console.Out.WriteLine("Releationship ID: {0}", videoFromFile.Link);

      var externalReleationship = 
                slidePart.ExternalRelationships.Where(er => er.Id == videoFromFile.Link).FirstOrDefault();

      if(externalReleationship == null) // Then it must be embedded
      {
         ReferenceRelationship rr = slidePart.GetReferenceRelationship(videoFromFile.Link);
         if (rr != null)
         {
           Console.Out.WriteLine(rr.Uri.OriginalString);
         }
      }
      else
      {
        Console.Out.WriteLine("Path to video file: {0}", externalReleationship.Uri.AbsolutePath);
      }
    }
  }
} 
```

当然，您也可以直接枚举 a:videoFile (class `VideoFromFile`) 标签。请参阅下面的代码。

```
foreach (SlideId slideId in presentation.SlideIdList)
{
  SlidePart slidePart = doc.PresentationPart.GetPartById(slideId.RelationshipId) as SlidePart;
  if (slidePart == null || slidePart.Slide == null)
  {
    continue;
  }

  Slide slide = slidePart.Slide;

  var videos = slide.CommonSlideData.ShapeTree.Descendants<VideoFromFile>();

  foreach (VideoFromFile video in videos)
  {                                
    Console.Out.WriteLine("Releationship ID: {0}", video.Link);

    var externalReleationship =
           slidePart.ExternalRelationships.Where(er => er.Id == video.Link).FirstOrDefault();

    if(externalReleationship == null) 
    {
        ReferenceRelationship rr = slidePart.GetReferenceRelationship(videoFromFile.Link);
        if (rr != null)
        {
          Console.Out.WriteLine(rr.Uri.OriginalString);
        }
    }
    else
    {
      Console.Out.WriteLine("Path to video file: {0}", externalReleationship.Uri.AbsolutePath);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T13:53:01.553

请原谅我重新提出这个早已不复存在的问题，但我刚刚遇到了完全相同的问题，并且我有一个不需要在幻灯片 XML 中挖掘来查找元素的解决方案。事实证明，视频和媒体部分没有出现在`slidePart.Parts`集合中（如 OP 所述），但它们*确实*出现在另一个集合`slidePart.DataPartReferenceRelationships`中。所以我能够找到对嵌入式视频的引用，如下所示：

```
SlidePart slidePart = ...;
foreach(var videoPart in slidePart.DataPartReferenceRelationships.OfType<VideoReferenceRelationship>())
  Console.WriteLine("Video Part ID: " + videoPart.Id); 
```

对OP有用可能有点晚了，但希望它可以节省一些时间:)

# java - 正则表达式在字符串中查找时间

> ID：12504012
> 
> 赞同：1
> 
> 时间：2012-09-19T22:53:35.233
> 
> 标签：java, regex

我正在尝试使用正则表达式从以下字符串中提取时间

```
Free concert at 8 pm over there
Free concert at 8pm over there
Free concert at 8:30 pm over there
Free concert at 8:30pm over there 
```

有人知道如何在 Java 中使用 Regex 来做到这一点吗？

我尝试了以下 (1[012]|[1-9]):[0-5]0-9?(?i)(am|pm) 但我认为它不允许在之前或之后使用单词。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:01:34.033

试试这个：`(?i)at (.+?) over`

**例子：**

```
String str = "Free concert at 8 pm over there"
        + "Free concert at 8pm over there"
        + "Free concert at 8:30 pm over there"
        + "Free concert at 8:30pm over there";

Pattern p = Pattern.compile("(?i)at (.+?) over");
Matcher m = p.matcher(str);

while( m.find() )
{
    System.out.println(m.group(1));
} 
```

**输出：**

```
8 pm
8pm
8:30 pm
8:30pm 
```

**另一个（只有时间，没有 at / over 或任何其他词）：**

```
(?i)[0-9]{1,2}:??[0-9]{0,2}\\s??(?:am|pm) 
```

但那里你不需要`group(1)`（你可以拿`group(0)`或干脆`group()`）！

**例子：**

```
String str = "Free concert at 8 pm over there"
        + "Free concert at 8pm over there"
        + "Free concert at 8:30 pm over there"
        + "Free concert at 8:30pm over there";

Pattern p = Pattern.compile("(?i)[0-9]{1,2}:??[0-9]{0,2}\\s??(?:am|pm)");
Matcher m = p.matcher(str);

while( m.find() )
{
    System.out.println(m.group());
} 
```

# tfs - TFS 2010 构建定义仅输出 DLL 和 PDB？

> ID：12504016
> 
> 赞同：0
> 
> 时间：2012-09-19T22:54:21.747
> 
> 标签：tfs, msbuild, tfsbuild, build-definition

所以，我是 TFS 构建定义的新手——我公司的 RA 团队询问如何部署我构建的项目。在本例中，是一个 Windows 服务项目。

当我从 Visual Studio 编译时，“bin”目录包含我需要的所有文件......包括复制设置为“复制本地”的“.bat”文件。

无论如何，默认“构建定义”的最后一步是“为项目运行 MSBuild”......但这似乎只是**将整个解决方案中的**每个 DLL 粘贴到输出目录中。

我错过了什么吗？...我如何让构建：

1.  只构建一个项目 - 而不是整个解决方案。
2.  将“bin”目录中的所有文件放入输出目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:57:10.593

当您编辑构建定义时，如果您愿意，您可以只指定一个项目。默认情况下，TFS Build 应该将所有内容放在您通常在 bin 目录中找到的 Build Drop 中。

![在此处输入图像描述](../Images/aee684c6a360a320831953da19a51f60.png)

如果您发现构建缺少您希望存在的文件，请查阅 MSBuild 日志，您可以从 TFS 构建日志中找到链接。您还可以在对构建进行排队时使用 Verbosity=Diagnostic 运行 TFS 构建，这将导致 MSBuild 日志包含更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:16:30.067

Dylan Smith 的回答是正确的，并且让我 90% 在那里......这是一个奇怪的错误，一些快速谷歌搜索在这里发现：http: [//social.msdn.microsoft.com/Forums/uk/tfsbuild/thread/990fdd96-69bc -4e99-be0e-acc0874e022f](http://social.msdn.microsoft.com/Forums/uk/tfsbuild/thread/990fdd96-69bc-4e99-be0e-acc0874e022f)

所以，解决方案是：

1.  做 Dylan 说的（选择 csproj 文件）。
2.  删除构建的“任何 CPU”部分......只需针对“发布”或“调试”或其他任何内容。

# jquery - 带有 POST 或 PUT 的 jQuery.ajax 没有 IE8 和 IE9 的响应标头

> ID：12504018
> 
> 赞同：1
> 
> 时间：2012-09-19T22:54:23.207
> 
> 标签：jquery, ajax, http-headers, xmlhttprequest, jqxhr

我注意到对于 IE8 和 IE9，如果我使用带有**POST**和**PUT**动词的 jQuery.ajax() 调用我的 RESTful API，那么我不会在 jqXHR 中取回任何**响应标头。**但是，GET 请求按预期工作。

此行为与所有其他浏览器不同。我已经验证 Chrome、FF、Opera 和 Safari 在 POST 和 PUT 请求的响应中都返回了完整的预期标头集。只有 IE8 和 IE9 似乎将标题扔在地板上。（我没有检查的一件事是 HEAD 请求会发生什么。）

我已经用**Fiddler**验证了标头实际上是通过网络实现的，所以问题出在 jQuery 本身或 IE8 和 IE9 上。

这是一个已知的问题？如果是这样，是否有解决方法。我可以在 jQuery 中重载/覆盖某些内容以保留 POST 和 PUT 之后的标题吗？我目前的解决方法是在成功回调中使用 GET 简单地重新获取修改后的数据，因为 IE8 和 IE9 不会与**GET**操作的标头混淆。

这是我主要的基于 jQuery 的 AJAX 工作方法的片段：

```
 $.ajax({
        url: String.format(um.proxy.url, url),
        type: ajaxParams.verb,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: String.format('{0}', ajaxParams.jsonData),
        headers: mapOfHeaders,
        success: function (data, textStatus, jqXHR) {
            //...
        },
        error: function (msg, textStatus, errorThrown) {
            //...
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:50:57.917

事实证明，这是所有当前 IE 风格（7、8 和 9）的**已知问题。**如果响应代码是**204**，那么 IE 会简单地将所有标题扔到地板上。对于像我这样编写纯 AJAX 实现需要最新 eTag 进行并发检查的人，IE 放弃了纯 AJAX 方法并迫使我立即执行 GET 以获取当前 eTag。:facepalm:

以下是我设法挖掘的几篇文章：

**HTTP 中缺少 ETag 标头 Internet Explorer 中的无内容响应**

[http://dalelane.co.uk/blog/?p=2043](http://dalelane.co.uk/blog/?p=2043)

**response.headers.ETag 未定义**

[http://datajs.codeplex.com/discussions/398295](http://datajs.codeplex.com/discussions/398295)

一种部分解决方法是嗅探 IE，然后立即执行 HEAD 请求以获取 ETag，但这种方法的问题是，如果有人设法在您之前潜入并更新记录，您将获得 eTag因为*她的*改变，而不是*你*的。所以这不是一个可接受的解决方法。

所以，我嗅探 IE 并立即执行 GET。否则对于所有其他浏览器，我只需使用 jQuery 的 jqXHR.getResponseHeader(namespace.constants.headers.eTag) 来获取 eTag。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:17:51.547

如果您的 REST 服务与您请求的应用程序位于不同的服务器上，您可能需要查看这篇文章。接受的答案解释了为什么需要使用 JSONP 内容类型。

[对 REST 服务的 jQuery ajax 调用](https://stackoverflow.com/questions/7112672/jquery-ajax-call-to-rest-service)

# shell - Emacs 中字符运行模式（ansi-term）的键盘快捷键

> ID：12504025
> 
> 赞同：1
> 
> 时间：2012-09-19T22:55:58.813
> 
> 标签：shell, emacs, keyboard

我在 Emacs **24.1中使用****WindMove**使用键盘快捷键在多个窗口中移动：

 **```
(global-set-key (kbd "M-J") 'windmove-left)          ; move to window on the left
(global-set-key (kbd "M-L") 'windmove-right)         ; move "       "    the right
(global-set-key (kbd "M-I") 'windmove-up)            ; move "       "    above
(global-set-key (kbd "M-K") 'windmove-down);         ; move "       "    below 
```

有没有办法将这些**WindMove**键盘快捷键与**ansi-term**上的**字符运行模式**相关联？我想避免不得不切换到**行运行模式**以在窗口之间移动。一段时间后，输入和来回进入/离开终端变得乏味。****`C-c C-k``C-c C-j`****

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:57:57.610

默认情况下，`term-char-mode`将大多数键转发到终端，而不在 Emacs 中解释它们，这就是`windmove`键绑定不起作用的原因。

这是一种覆盖键`term-char-mode`映射以强制`windmove`解释而不是转发绑定的方法：

```
(eval-after-load "term"
  '(progn
     (define-key term-raw-map (kbd "M-J") 'windmove-left)
     (define-key term-raw-map (kbd "M-L") 'windmove-right)
     ;; ...
     )) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:03:23.087

下面的代码将为您工作。它使用 Emacs 建议机制，允许用户动态更改函数的行为，而无需直接修改其源代码。在这种情况下，它用于使`winmove-*`函数`term-char-mode`在执行其原始定义之前运行。如果您还使用其他窗口选择功能，例如`other-window`，除 之外`winmove-*`，您可以以相同的方式建议这些功能。有关建议机制的详细信息，请参阅[建议功能](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)。

该代码还处理与`term-raw-map`键盘映射相关的问题。在完全加载（或执行）`term-raw-map`之前未定义。因此，您应该将表单添加到钩子中，该钩子在加载时会自动运行，而不是将它们放在初始化文件的顶层。`term.el``M-x``ansi-term``(define-key term-raw-map ...)``term-load-hook``term.el`

```
(global-set-key (kbd "M-J") 'windmove-left)
(global-set-key (kbd "M-L") 'windmove-right)
(global-set-key (kbd "M-I") 'windmove-up)
(global-set-key (kbd "M-K") 'windmove-down)

(defun ansi-term-char-mode ()
  (if (string= (buffer-name) "*ansi-term*")
    (term-char-mode)))

(defadvice windmove-left (before windmove-left-ansi-term (&optional arg))
  (ansi-term-char-mode))

(defadvice windmove-right (before windmove-right-ansi-term (&optional arg))
  (ansi-term-char-mode))

(defadvice windmove-up (before windmove-up-ansi-term (&optional arg))
  (ansi-term-char-mode))

(defadvice windmove-down (before windmove-down-ansi-term (&optional arg))
  (ansi-term-char-mode))

(add-hook 'term-load-hook
  (lambda ()
    (define-key term-raw-map (kbd "M-J") 'windmove-left)
    (ad-activate 'windmove-left)
    (define-key term-raw-map (kbd "M-L") 'windmove-right)
    (ad-activate 'windmove-right)
    (define-key term-raw-map (kbd "M-I") 'windmove-up)
    (ad-activate 'windmove-up)
    (define-key term-raw-map (kbd "M-K") 'windmove-down)
    (ad-activate 'windmove-down))) 
```******

# .net - VS2010 忽略“添加服务引用”\“集合类型”=列表。仅为集合生成数组

> ID：12504026
> 
> 赞同：5
> 
> 时间：2012-09-19T22:56:04.647
> 
> 标签：.net, visual-studio-2010, webservice-client

Web服务位于：http: [//api.bing.net/search.wsdl](http://api.bing.net/search.wsdl)

在 VS2010 的项目中，我单击“添加服务引用”。作为“集合类型”，我指定“ **System.Collections.Generic.List** ”（或该列表中的任何其他内容，但不是数组）。单击确定 - 它将生成代码。

**实际结果**：

代码包含数组而不是列表：

```
[System.Xml.Serialization.XmlArrayAttribute(Order=10)]
public SourceType[] Sources {
    get {
        return this.sourcesField;
    }
    set {
        this.sourcesField = value;
        this.RaisePropertyChanged("Sources");
    }
} 
```

**预期结果**：

代码应包含所有集合的列表。

**问题**：

在 Web 服务文件夹中生成了许多影响实际代码生成的文件：Reference.svcmap、*.svcinfo、*.wsdl 本身。

> **如何强制 Wsdl2code 生成器（使用上面提到的这些文件）为此 Web 服务生成列表？**

Reference.svcmap 包含使用列表的行，但它没有帮助：

```
<CollectionMappings>
  <CollectionMapping TypeName="System.Collections.Generic.List`1" Category="List" />
</CollectionMappings>
<GenerateSerializableTypes>true</GenerateSerializableTypes>
<Serializer>Auto</Serializer>
<UseSerializerForFaults>true</UseSerializerForFaults>
<ReferenceAllAssemblies>true</ReferenceAllAssemblies>
<ReferencedAssemblies />
<ReferencedDataContractTypes />
<ServiceContractMappings /> 
```

[此处](https://stackoverflow.com/questions/3159681)提出了类似的问题-但其最佳答案对这种情况没有帮助。

# google-chrome - Chrome 的激进缓存

> ID：12504027
> 
> 赞同：1
> 
> 时间：2012-09-19T22:56:06.360
> 
> 标签：google-chrome, caching

由于我已经实现了我的缓存清单来缓存一些东西，我注意到 Chrome 开始积极缓存所有内容，我发现自己不得不强制删除缓存，`chrome://appcache-internals/`因为 CTRL-F5，CTRL-R 将无法工作，即使我反复按它们。

这是我的缓存清单

```
CACHE MANIFEST

CACHE:
/static/sound.wav

NETWORK:
* 
```

你遇到过这个问题吗？我有哪些选择可以防止这种行为？

# javascript - jQuery Mobile：在页面中间隔小部件

> ID：12504031
> 
> 赞同：2
> 
> 时间：2012-09-19T22:56:26.893
> 
> 标签：javascript, html, css, jquery-mobile

我正在使用分组按钮小部件和列表视图小部件。我的代码是

```
<div data-role="controlgroup" data-type="horizontal" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal">
    <div class="ui-controlgroup-controls" align="center">
        <!-- ........ -->        
    </div>        
</div>

<ul data-role="listview" id="mylist">
    <li data-role="list-divider" role="heading" data-theme="b">
        Sheet: Untitled1
    </li>
    <!-- ........ -->
    <li id="mylistSummary" data-role="list-divider" role="heading" data-theme="b">
        Total:
    </li>
</ul> 
```

现在的问题是小部件彼此相邻出现，中间没有任何间距。

![在此处输入图像描述](../Images/85764fb7821cf05406b99c1677b8dded.png)

我应该怎么做才能确保这些（可能还有其他）小部件之间的所需空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:17:39.923

我认为您可以尝试添加一个简单`<br>`的来分隔这两个组件：

```
<div data-role="controlgroup" data-type="horizontal" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal">
    <div class="ui-controlgroup-controls" align="center">
        <!-- ........ -->        
    </div>        
</div>

<br>

<ul data-role="listview" id="mylist">
    <li data-role="list-divider" role="heading" data-theme="b">
        Sheet: Untitled1
    </li>
    <!-- ........ -->
    <li id="mylistSummary" data-role="list-divider" role="heading" data-theme="b">
        Total:
    </li>
</ul> 
```

或者您可以尝试使用`margin-bottom`，例如，尝试以下操作：

```
<div style="margin-bottom: 5px;" data-role="controlgroup" data-type="horizontal" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal">
    <div class="ui-controlgroup-controls" align="center">
        <!-- ........ -->        
    </div>        
</div>

<ul data-role="listview" id="mylist">
    <li data-role="list-divider" role="heading" data-theme="b">
        Sheet: Untitled1
    </li>
    <!-- ........ -->
    <li id="mylistSummary" data-role="list-divider" role="heading" data-theme="b">
        Total:
    </li>
</ul> 
```

希望这可以帮助。

让我知道这些解决方案是否适合您。

# javascript - 我可以使用变量的值来启动函数吗？

> ID：12504037
> 
> 赞同：1
> 
> 时间：2012-09-19T22:57:15.597
> 
> 标签：javascript, jquery, function, variables

> **可能重复：**
> [调用以变量命名的 JavaScript 函数](https://stackoverflow.com/questions/1723287/calling-a-javascript-function-named-in-a-variable)

我想使用变量的值作为调用来启动一个函数，但我不确定它是否可能？

说我有：

```
function myFunction(){
    // Do something
}

var functionName = "myFunction";
functionName(); // This should run the function named myFunction 
```

这是可以做到的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:58:46.877

你可以做几件事：

```
//if the function is in the global scope:

window["myFunction"](); 
//or
var functionName = "myFunction";
window[functionName](); 
```

或者维护自己的地图：

```
var functions = {
    myFunction: function() {
        ...
    },
    ...
    myOtherFunction: function() {
        ...
    }
}; 
```

然后以下任一方法将起作用：

```
functions.myFunction(); //will work
functions["myFunction"](); //will also work;

var functionName = "myFunction";
functions[functionName](); //also works 
```

当然，您可以使用`eval`：

```
eval(functionName + "()"); 
```

但是`eval`很危险，**不**推荐。

**基于你的小提琴**

您的`right`和`left`函数已在匿名函数的本地范围内定义。这意味着它们**不是**全局`window`对象的一部分。您应该使用我上面描述的第二种方法（构建自己的地图）：

```
var directions = {
    right: function() {
        ...
    },
    left: function() {
        ...
    }
    ...
};

var direction = "right";
directions[direction](); 
```

# javascript - 可以用来增加字母的方法是什么？

> ID：12504042
> 
> 赞同：121
> 
> 时间：2012-09-19T22:57:30.387
> 
> 标签：javascript, increment, alphabetical

有谁知道提供增加字母的方法的 Javascript 库（例如下划线、jQuery、MooTools 等）？

我希望能够做类似的事情：

```
"a"++; // would return "b" 
```

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-09-19T23:00:52.400

## 简单直接的解决方案

```
function nextChar(c) {
    return String.fromCharCode(c.charCodeAt(0) + 1);
}
nextChar('a'); 
```

正如其他人所指出的那样，缺点是它可能无法按预期处理像字母“z”这样的情况。但这取决于你想从中得到什么。上面的解决方案将为“z”之后的字符返回“{”，这是 ASCII 中“z”之后的字符，因此它可能是您正在寻找的结果，具体取决于您的用例。

* * *

## 独特的字符串生成器

（2019/05/09 更新）

由于这个答案已经获得了如此多的知名度，我决定将其扩大到原始问题的范围之外，以潜在地帮助那些在谷歌上遇到这个问题的人。

我发现我经常想要的是在某个字符集中生成顺序的、唯一的字符串（例如只使用字母），所以我更新了这个答案以包含一个可以在此处执行此操作的类：

```
class StringIdGenerator {
  constructor(chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ') {
    this._chars = chars;
    this._nextId = [0];
  }

  next() {
    const r = [];
    for (const char of this._nextId) {
      r.unshift(this._chars[char]);
    }
    this._increment();
    return r.join('');
  }

  _increment() {
    for (let i = 0; i < this._nextId.length; i++) {
      const val = ++this._nextId[i];
      if (val >= this._chars.length) {
        this._nextId[i] = 0;
      } else {
        return;
      }
    }
    this._nextId.push(0);
  }

  *[Symbol.iterator]() {
    while (true) {
      yield this.next();
    }
  }
} 
```

用法：

```
const ids = new StringIdGenerator();

ids.next(); // 'a'
ids.next(); // 'b'
ids.next(); // 'c'

// ...
ids.next(); // 'z'
ids.next(); // 'A'
ids.next(); // 'B'

// ...
ids.next(); // 'Z'
ids.next(); // 'aa'
ids.next(); // 'ab'
ids.next(); // 'ac' 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-19T23:00:39.773

普通的javascript应该可以解决问题：

```
String.fromCharCode('A'.charCodeAt() + 1) // Returns B 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-27T18:18:57.263

如果给定的字母是z怎么办？这是一个更好的解决方案。它是 A,B,C... X,Y,Z,AA,AB,... 等等。基本上它会增加字母，如 Excel 电子表格的列 ID。

nextChar('yz'); // 返回“ZA”

```
 function nextChar(c) {
        var u = c.toUpperCase();
        if (same(u,'Z')){
            var txt = '';
            var i = u.length;
            while (i--) {
                txt += 'A';
            }
            return (txt+'A');
        } else {
            var p = "";
            var q = "";
            if(u.length > 1){
                p = u.substring(0, u.length - 1);
                q = String.fromCharCode(p.slice(-1).charCodeAt(0));
            }
            var l = u.slice(-1).charCodeAt(0);
            var z = nextLetter(l);
            if(z==='A'){
                return p.slice(0,-1) + nextLetter(q.slice(-1).charCodeAt(0)) + z;
            } else {
                return p + z;
            }
        }
    }

    function nextLetter(l){
        if(l<90){
            return String.fromCharCode(l + 1);
        }
        else{
            return 'A';
        }
    }

    function same(str,char){
        var i = str.length;
        while (i--) {
            if (str[i]!==char){
                return false;
            }
        }
        return true;
    }

// below is simply for the html sample interface and is unrelated to the javascript solution

var btn = document.getElementById('btn');
var entry = document.getElementById('entry');
var node = document.createElement("div");
node.id = "node";

btn.addEventListener("click", function(){
  node.innerHTML = '';
  var textnode = document.createTextNode(nextChar(entry.value));
  node.appendChild(textnode);
  document.body.appendChild(node);
});
```

```
<input id="entry" type="text"></input>
<button id="btn">enter</button>
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-05-02T12:52:08.233

一种可能的方式如下定义

```
function incrementString(value) {
  let carry = 1;
  let res = '';

  for (let i = value.length - 1; i >= 0; i--) {
    let char = value.toUpperCase().charCodeAt(i);

    char += carry;

    if (char > 90) {
      char = 65;
      carry = 1;
    } else {
      carry = 0;
    }

    res = String.fromCharCode(char) + res;

    if (!carry) {
      res = value.substring(0, i) + res;
      break;
    }
  }

  if (carry) {
    res = 'A' + res;
  }

  return res;
}

console.info(incrementString('AAA')); // will print AAB
console.info(incrementString('AZA')); // will print AZB
console.info(incrementString('AZ')); // will print BA
console.info(incrementString('AZZ')); // will print BAA
console.info(incrementString('ABZZ')); // will print ACAA
console.info(incrementString('BA')); // will print BB
console.info(incrementString('BAB')); // will print BAC

// ... and so on ... 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T23:00:34.797

你可以试试这个

```
console.log( 'a'.charCodeAt​(0))​ 
```

首先将其转换为 Ascii 数字 .. 增加它 .. 然后从 Ascii 转换为 char ..

```
var nex = 'a'.charCodeAt(0);
console.log(nex)
$('#btn1').on('click', function() {
   var curr = String.fromCharCode(nex++)
   console.log(curr)
}); 
```

​检查[小提琴](http://jsfiddle.net/sushanth009/nFp75/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-22T13:05:18.577

我需要多次使用字母序列，所以我根据这个 SO question 制作了这个函数。我希望这可以帮助其他人。

```
function charLoop(from, to, callback)
{
    var i = from.charCodeAt(0);
    var to = to.charCodeAt(0);
    for(;i<=to;i++) callback(String.fromCharCode(i));
} 
```

*   **从 -**开始字母
*   **到**最后一个字母
*   **callback(letter) -**为序列中的每个字母执行的函数

如何使用它：

```
charLoop("A", "K", function(char) {
    //char is one letter of the sequence
}); 
```

**[看到这个工作演示](http://jsfiddle.net/9FDM9/)**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-19T23:10:59.807

添加所有这些答案：

```
// first code on page
String.prototype.nextChar = function(i) {
    var n = i | 1;
    return String.fromCharCode(this.charCodeAt(0) + n);
}

String.prototype.prevChar = function(i) {
    var n = i | 1;
    return String.fromCharCode(this.charCodeAt(0) - n);
} 
```

示例：http: [//jsfiddle.net/pitaj/3F5Qt/](http://jsfiddle.net/pitaj/3F5Qt/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-10-30T16:02:31.567

这个效果很好：

```
var nextLetter = letter => {
    let charCode = letter.charCodeAt(0);
    let isCapital = letter == letter.toUpperCase();

    if (isCapital == true) {
        return String.fromCharCode((charCode - 64) % 26 + 65)
    } else {
        return String.fromCharCode((charCode - 96) % 26 + 97)
    }
}

EXAMPLES

nextLetter("a"); // returns 'b'
nextLetter("z"); // returns 'a'
nextLetter("A"); // returns 'B'
nextLetter("Z"); // returns 'A' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-19T14:14:31.783

一个只是为了笑的解决方案

```
function nextLetter(str) {
  const Alphabet = [
    // lower case alphabet
    "a", "b", "c",
    "d", "e", "f",
    "g", "h", "i",
    "j", "k", "l",
    "m", "n", "o",
    "p", "q", "r",
    "s", "t", "u",
    "v", "w", "x",
    "y", "z",
    // upper case alphabet
    "A", "B", "C",
    "D", "E", "F",
    "G", "H", "I",
    "J", "K", "L",
    "M", "N", "O",
    "P", "Q", "R",
    "S", "T", "U",
    "V", "W", "X",
    "Y", "Z"
  ];

  const LetterArray = str.split("").map(letter => {
    if (Alphabet.includes(letter) === true) {
      return Alphabet[Alphabet.indexOf(letter) + 1];
    } else {
      return " ";
    }
  });

  const Assemble = () => LetterArray.join("").trim();
  return Assemble();
}

console.log(nextLetter("hello*3"));
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-30T21:21:04.807

[这是我在https://stackoverflow.com/a/28490254/881441](https://stackoverflow.com/a/28490254/881441)上提交的 rot13 算法的变体：

```
function rot1(s) {
  return s.replace(/[A-Z]/gi, c =>
    "BCDEFGHIJKLMNOPQRSTUVWXYZAbcdefghijklmnopqrstuvwxyza"[
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(c) ] )
} 
```

底部的输入代码和查找的编解码器位于顶部（即输出代码与输入代码相同，但移位了 1）。该函数仅更改字母，即如果传入任何其他字符，则此编解码器将对其进行更改。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-26T17:42:20.613

这真的很老了。但我需要这个功能，而且没有一个解决方案最适合我的用例。我想生成 a, b, c...z, aa,ab...zz, aaa... 。这个简单的递归完成了这项工作。

```
function nextChar(str) {
if (str.length == 0) {
    return 'a';
}
var charA = str.split('');
if (charA[charA.length - 1] === 'z') {
    return nextID(str.substring(0, charA.length - 1)) + 'a';
} else {
    return str.substring(0, charA.length - 1) +
        String.fromCharCode(charA[charA.length - 1].charCodeAt(0) + 1);
}
}; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-19T10:00:04.087

在闭包中使用 {a: 'b', b: 'c', etc} 创建一个函数：-

```
let nextChar = (s => (
    "abcdefghijklmopqrstuvwxyza".split('')
    .reduce((a,b)=> (s[a]=b, b)), // make the lookup
c=> s[c] // the function returned
))({}); // parameter s, starts empty 
```

用法：-

```
nextChar('a') 
```

添加大写和数字：-

```
let nextCh = (
    (alphabeta, s) => (
        [alphabeta, alphabeta.toUpperCase(), "01234567890"]
            .forEach(chars => chars.split('')
               .reduce((a,b) => (s[a]=b, b))), 
        c=> s[c] 
    )
)("abcdefghijklmopqrstuvwxyza", {}); 
```

ps 在某些版本的 Javascript 中，可以使用`[...chars]`代替`chars.split('')`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-14T09:06:15.363

```
 function charLoop(from, to, callback) {
    var i = from.charCodeAt(0);
    var to = to.charCodeAt(0);
    for (; i <= to; i++) {
        callback(String.fromCharCode(i));
    }
}

var sequence = "";
charLoop("A", "Z", function (char) {
    sequence += char + " ";
});

sequence = sequence.trim();
sequence = sequence.split(" ");

var resseq = sequence;
var res = "";
var prevlet = "";
var nextlet = "";

for (b = 0; b < resseq.length; b++) {
    if (prevlet != "") {
        prevlet = resseq[b];
    }

    for (a = 0; a < sequence.length; a++) {
        for (j = 1; j < 100; j++) {
            if (prevlet == "") {
                prevlet = sequence[a];
                nextlet = sequence[a + 1];
                res += sequence[a] + sequence[a] + 0 + j + " ";
            }
            else {

                if (j < 10) {
                    res += prevlet + sequence[a] + 0 + j + " ";
                }
                else {
                    res += prevlet + sequence[a] + j + " ";
                }
            }
        }
    }
}

document.body.innerHTML = res; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-09T16:30:31.263

基于@Nathan墙答案增量和减量

```
// Albhabet auto increment and decrement
class StringIdGenerator {
    constructor(chars = '') {
      this._chars = chars;
    }

  next() {
    var u = this._chars.toUpperCase();
    if (this._same(u,'Z')){
        var txt = '';
        var i = u.length;
        while (i--) {
            txt += 'A';
        }
        this._chars = txt+'A';
        return (txt+'A');
    } else {
      var p = "";
      var q = "";
      if(u.length > 1){
          p = u.substring(0, u.length - 1);
          q = String.fromCharCode(p.slice(-1).charCodeAt(0));
      }
      var l = u.slice(-1).charCodeAt(0);
      var z = this._nextLetter(l);
      if(z==='A'){
        this._chars = p.slice(0,-1) + this._nextLetter(q.slice(-1).charCodeAt(0)) + z;
          return p.slice(0,-1) + this._nextLetter(q.slice(-1).charCodeAt(0)) + z;
      } else {
        this._chars = p+z;
          return p + z;
      }
    }
  }

  prev() {
    var u = this._chars.toUpperCase();
    console.log("u "+u)
    var l = u.slice(-1).charCodeAt(0);
    var z = this._nextLetter(l);
    var rl = u.slice(1)
    var y = (rl == "A") ? "Z" :this._prevLetter(rl.charCodeAt(0))
      var txt = '';
      var i = u.length;
      var j = this._chars
      var change = false
      while (i--) {
        if(change){
          if (u[u.length-1] == "A"){
            txt += this._prevLetter(u[i].charCodeAt(0))
          }else{
            txt += u[i]
          }

        }else{
          if (u[u.length-1] == "A"){
            txt += this._prevLetter(u[i].charCodeAt(0))
            change = true
          }else{
            change = true
            txt += this._prevLetter(u[i].charCodeAt(0))
          }
        }
      }
      if(u == "A" && txt == "Z"){
        this._chars = ''
      }else{
        this._chars = this._reverseString(txt);
      }
      console.log(this._chars)
      return (j);
  }
  _reverseString(str) {
      return str.split("").reverse().join("");
  }
  _nextLetter(l){
      if(l<90){
          return String.fromCharCode(l + 1);
      }
      else{
          return 'A';
      }
  }

  _prevLetter(l){
    if(l<=90){
      if(l == 65) l = 91
        return String.fromCharCode(l-1);
    }
    else{
        return 'A';
    }
  }
  _same(str,char){
      var i = str.length;
      while (i--) {
          if (str[i]!==char){
              return false;
          }
      }
      return true;
  }

} 
```

用法

```
const ids = new StringIdGenerator();

ids.next(); 
ids.prev(); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-29T10:38:16.207

这是我在 Javascript 中将字母递增到无穷大的函数（仅限大写字母）

```
function getNextStringId(str) {
    let index = str.length-1;
    let baseCode= str.charCodeAt(index);
    do{
        baseCode= str.charCodeAt(index);
        let strArr= str.split("");
        if(strArr[index] == "Z"){
            strArr[index] = "A";
            if(index==0){
                strArr.unshift("A");
            }
        }
        else{
            strArr[index]= String.fromCharCode(baseCode + 1);
        }
        str= strArr.join("");
        index--;
    } while(baseCode == 90)
    return str;
}

getNextStringId("A") // B
getNextStringId("Z") // AA
getNextStringId("ABZZ") // ACAA 
```

# php - 在没有 zip 存档的情况下使用 netbeans 设置 Symfony2

> ID：12504043
> 
> 赞同：1
> 
> 时间：2012-09-19T22:57:36.403
> 
> 标签：php, netbeans, symfony, installation

我正在尝试开始学习 Symfony 2 框架，所以我想为此设置我最喜欢的 IDE（在 Ubuntu 12.04.01 上）但问题是在`options >PHP > Symfony2`窗口中我应该给出 Symfony2 zip 下载的路径我无法从网站下载。

所以我想知道我是否可以从位于的 Symfony2 目录（与 composer 一起安装）设置它`/opt/lampp/Symfony2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:02:09.583

你使用linux作为操作系统吗？如果您提供此类信息，那就太好了。

但是我在本地主机（xampp）上使用带有windows的netbeans。如果您在一个项目文件夹中同时拥有项目和 symfony2 库，那么您只需从现有源导入项目就可以了。

当您有一个单独的 symfony2 库目录时，您应该将 symfony2 作为库添加到您的项目中。为此，您必须导航到项目设置。

netbeans 的最新 php 发行版已经安装了 twig，所以这对于使用 symfony2 进行模板开发非常有用。

祝你好运 ;）

# c# - WCF 序列化不如预期

> ID：12504046
> 
> 赞同：0
> 
> 时间：2012-09-19T22:58:16.413
> 
> 标签：c#, asp.net, wcf, web-services, xml-serialization

我有这样的 ac# 类作为我的 WCF 方法的返回：

```
[Serializable]
[XmlRoot("OutputItem")]
public class MyItem
{
    [XmlElement("ItemName")] 
    public string NodeName { get; set; }

    [XmlArray("Fields"), XmlArrayItem(ElementName = "Field", Type = typeof(MyItemField))]
    public List<MyItemField> Fields { get; set; }

} 
```

我的 WCF 方法是这样的：

```
public MyItem GetItemXML(string id)
{
   MyItem mi = new MyItem();

   //do some stuff to populate mi

   return mi;   
} 
```

我希望它的 XML 输出是这样的：

```
<xml version="1.0" encoding="utf-16"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <GetItemXMLResponse xmlns="http://www.here.com/XML/ItemService.xsd">
      <GetItemXMLResult>
        <OutputItem>
           <ItemName>FR</ItemName>
           <Fields>
            ......
           </Fields>
        </OutputItem>
      </GetItemXMLResult>
    </GetItemXMLResponse>
  </s:Body>
</s:Envelope> 
```

但是，输出如下 -`<OutputItem>`顶部没有指令：

```
<xml version="1.0" encoding="utf-16"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <GetItemXMLResponse xmlns="http://www.here.com/XML/ItemService.xsd">
      <GetItemXMLResult>
           <ItemName>FR</ItemName>
           <Fields>
            ......
           </Fields>
      </GetItemXMLResult>
    </GetItemXMLResponse>
  </s:Body>
</s:Envelope> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:40:35.210

```
// The Model Object

[Serializable]
[XmlRoot("OutputItem")]
[DataContractAttribute]
public class MyObject
{
    [XmlElement("ItemName")]
    [DataMemberAttribute] 
    public string Name { get; set; }

    [XmlArray("DummyItems")]
    [XmlArrayItem("DummyItem", typeof(MyItemField))]
    public List<Fields> DummyItem { get; set; }
}

// The Class that implement the contract
[DataContract]
public class ConsumptionService : IAnyContract
{
    public MyObject GetItemXML(string id)
    {
       MyObject mo = new MyObject();
       //do some stuff to populate mi
       MyObject mo;   
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:06:06.867

如果我没记错的话，这一切都取决于您的 [OperationContract] 是如何定义的。您可能必须使用消息契约来获得您想要的行为。看看[http://msdn.microsoft.com/en-us/library/ms730255.aspx](http://msdn.microsoft.com/en-us/library/ms730255.aspx)

# java - 在java中读取不同编码的文本文件

> ID：12504052
> 
> 赞同：0
> 
> 时间：2012-09-19T22:58:57.323
> 
> 标签：java, character-encoding

如果我有一个用 ISO 编码的文件，但想使用 java 以 UTF-8 格式读取文件，我还会得到相同的文本吗？

µÃÿ 等特殊字符会显示相同的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:06:13.940

不，你不会。UTF-8 不会以与 ISO-8859-1 相同的方式对 U+007f 以外的字符进行编码（ISO-8859-1 将 U+0080 到 U+00ff 编码为单个字节`\x80`，`\xff`而 UTF-8 对每个字符使用两个字节那些字符）。

打开文件时必须使用显式编码规范：`new InputStreamReader(new FileInputStream(...), <encoding>)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:11:06.550

简而言之，没有。ISO 中字符的表示方式（按位）与 UTF-8 中字符的表示方式不同。

但是，您可以将文件从 ISO 转换为 UTF-8，但不能将 UTF-8 转换为 ISO，因为 UTF-8 中的可识别字符比 ISO 中的要多得多。

我的建议是检测编码（请参阅：[Java：如何确定流的正确字符集编码](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)），然后相应地处理每种情况。

# php - 如果存在则更新一行，如果不存在则创建一个新的 MySQL

> ID：12504056
> 
> 赞同：7
> 
> 时间：2012-09-19T22:59:50.103
> 
> 标签：php, mysql

我正在将姓名、号码和公司插入数据库。

我的桌子很简单：

```
id(primary key)
name
slideView
company 
```

如果传递给它的名称存在，我需要更新此信息，如果不使用此数据创建新行。我看过，`REPLACE INTO`但我认为这对我不起作用……因为我根本不碰身份证。

我的代码是：

```
insertData($name,$count,$company);

function insertData($name, $count, $company) {

    #Try/Catch statement to connect to DB, and insert data
    try {
        #DB username/password   
        $usernameDB = '****';
        $passwordDB = '****';

        #Create new PHP Database Object with the address, username, and password as parameters
        $pdo = new PDO('mysql:host=localhost;dbname=*****', $usernameDB, $passwordDB);

        #Set pdo attributes to handle errors 
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        #assign the sth variable (sth means statement handle) to insert the data
        $sth = $pdo->prepare("REPLACE INTO ***** SET name = ?, slideView = ?, company = ?");

        #Execute the insert
        $sth->execute(array($name,$count,$company));

    #Error if can't connect or insert
    } catch(PDOException $e) {
        echo 'Error: ' . $e->getMessage();
    }#/try
} 
```

我是 SQL 新手，还没有找到一个很好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:16:00.440

您可能会更好地`insert ... on duplicate update`为此使用语法，尽管这意味着传递一些额外的参数，但它可以[将替换中的某些问题消除为](http://www.mysqlperformanceblog.com/2007/01/18/insert-on-duplicate-key-update-and-replace-into/)似乎不断出现的语法。

```
REPLACE INTO ***** SET name = ?, slideView = ?, company = ? 
```

可以写成：

```
insert into yourTableName (name, slideView, company)
    values (:name, :slideView, :company)
    on duplicate key update set
        slideView=:$slideView2, company=:company2 
```

然后执行如下：

```
$sth->execute(array(':name' => $name, ':slideView' => $count,
    ':company' => $company, ':slideView2' => $count, ':company2' => $company)); 
```

上面的格式使用命名参数（它们更容易阅读/调试）并将新行插入到数据库中 - 或者如果唯一/主键列`name`已经具有值，则使用剩余的行更新行信息。

您必须在此处使用两次参数（即使 slideView 和 company 将包含相同的信息），因为在查询中不能使用两次参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:01:57.700

REPLACE INTO 应该可以正常工作 - 它还检查具有 UNIQUE 约束的列。因此，您只需[将您的`name`列标记为唯一](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)，以便 REPLACE INTO 将其识别为重复。

我没有尝试过这个特定的用例，但文档似乎允许这样做。

# java - 比较两个或多个 JTable 和“突出显示”差异

> ID：12504057
> 
> 赞同：2
> 
> 时间：2012-09-19T22:59:59.917
> 
> 标签：java, swing, jtable, comparator, renderer

我正在构建一个摇摆应用程序，它将在左侧有一个项目列表，在右侧有一个表格。右侧显示的表格数量取决于左侧选择的项目。我希望能够“突出显示”（setBackground）所有正在显示的表中相同的行。

我已经阅读了有关覆盖 prepareRenderer 或 getTableCellRendererComponent 的信息。然后，条件渲染逻辑位于 Overridden 方法中。

[DefaultTableCellRenderer getTableCellRendererComponent 永远不会被调用](https://stackoverflow.com/questions/9834508/defaulttablecellrenderer-gettablecellrenderercomponent-never-gets-called) [http://tips4java.wordpress.com/2010/01/24/table-row-rendering/](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/) [http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)

但是从我所知道的和我所理解的（如果我错了，请纠正我），这两个选项都不允许您在这个被覆盖的方法中同时比较两个不同的 JTable。prepareRenderer 在扩展 JTable 的类中被覆盖，因此它在特定表上被实例化。然后，被覆盖的方法只会影响 Table 的特定实例。

```
public class CustomRenderer extends JTable {
@Override
public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
    Component c = super.prepareRenderer(renderer, row, column);
    //  add custom rendering here
    return c;
}};

...
CustomRenderer currTable = new CustomRenderer(); 
```

getTableCellRendererComponent 是通过特定 JTable 的 columnModel 中的特定列的 setCellRenderer 设置的。

```
public class CustomRenderer extends DefaultTableCellRenderer {
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    JLabel l = (JLabel) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        if (isSelected) {
            l.setBackground(Color.gray);
        }
        else {
            l.setBackground(Color.white);
        }
    return l;
    }};

...
CustomRenderer cr = new CustomRenderer();
currTable.getcolumnModel().getColumn(1).setCellRenderer(cr); 
```

那么我将如何做类似的事情

```
if(tableOne.getValueAt(1, 1).equals(tableTwo.getValueAt(1, 1) 
//set Cell 1,1 background(Color.blue)
else
//set Cell 1,1 background(Color.red) 
```

现在我有一个非常丑陋的 hack，它使用多个表格单元格选择和一个 getTableCellRendererComponent 方法，该方法测试 isSelected 布尔值并相应地更改背景。现在这已经足够好了（因为我是唯一一个使用这个程序的人），但是必须有一种更好的方法能够根据不同表的条件或值同时比较和更改一个表的呈现。

或者我可以解决这个问题吗？

提前感谢您的阅读/回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:25:12.593

> 我已经阅读了有关覆盖 prepareRenderer 或 getTableCellRendererComponent 的信息。然后，条件渲染逻辑位于 Overridden 方法中。但是从我所知道的和我所理解的（如果我错了，请纠正我），这两个选项都不允许您在这个被覆盖的方法中同时比较两个不同的 JTable。

你为什么这么说，你有什么数据来支持这个说法，因为它是错误的。

> prepareRenderer 扩展了 JTable

一个方法不能扩展一个类，所以这没有意义。

> 所以它被覆盖的方法只能访问 JTable 的特定实例，并且 getTableCellRendererComponent 是通过特定 JTable 的 columnModel 中的特定列的 setCellRenderer 设置的。

方法可以访问程序员允许他们访问的任何内容。关键在于传递引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:55:18.717

使用[SwingX](http://swingx.java.net)基础设施，就像

*   实现一个 HighlightPredicate ，它决定一个不是单元格是否应该被突出显示
*   实例化一个荧光笔（通过设置背景颜色进行装饰的 ColorHighlighter）并将其添加到两个表中
*   实现/注册一些侦听器，根据状态将谓词设置为 Highlighter

下面是一个简短的片段，它使用配置了列表中所选项目的 EqualsHighlightPredicate 来突出显示具有相同内容的所有单元格。享受！

```
final JXList list = new JXList(AncientSwingTeam.createNamedColorListModel());
JXTable table = new JXTable(new AncientSwingTeam());
final ColorHighlighter highlighter = new ColorHighlighter(
        HighlightPredicate.NEVER, Color.YELLOW, null);
list.addHighlighter(highlighter);
table.addHighlighter(highlighter);
ListSelectionListener l = new ListSelectionListener() {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting()) return;
        highlighter.setHighlightPredicate(
                createPredicate(list.getSelectedValue()));
    }

    private HighlightPredicate createPredicate(Object selectedValue) {
        if (selectedValue == null) return HighlightPredicate.NEVER;
        return new HighlightPredicate.EqualsHighlightPredicate(selectedValue);
    }
};
list.getSelectionModel().addListSelectionListener(l); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T23:25:19.287

我可能会使用某种“突出显示模型”，它能够确定哪些表中的哪些行应该突出显示（以及如何突出显示）。

然后，您要么直接将其提供给单元格渲染器，要么直接在单元格渲染器中从表格中提取它（但是，这假定表格的类型正确，并打开了一整罐蠕虫）。

所以基本上你最终可能会得到类似......

```
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    // Seed the component with the default values
    super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
    // You may need to change the value of the component to reflect what
    // you want to display here

    // It should be noted, that this method will override the selection
    // highlighting, you may want to check isSelected and make
    // your own decisions over what needs to be done.
    HighlightModel model = getHighlightModel();
    // You should check for null
    Color color = model.getHighlightBackgroundFor(table, row);
    if (color != null) {
        setOpaque(true);
        setBackground(color);
    }

    return this; // Assuming you've used a component as a base renderer ;)

} 
```

# visual-studio - 通过 MSI 安装时未实例化 Visual Studio 扩展 MEF 类

> ID：12504058
> 
> 赞同：0
> 
> 时间：2012-09-19T23:00:19.563
> 
> 标签：visual-studio, wix, mef, visual-studio-2012, visual-studio-extensions

我正在编写一个 VS 2012 插件，其中包含一个`Package`以及一个`IWpfTextViewCreationListener` `MEF`扩展类。

它是使用创建 MSI 的 WiX 项目安装的，将所有文件放在`C:\Program Files\...[Application]`; 它创建 Packages 注册表项以指向包含 Package 实现的 DLL。

在实验性 Visual Studio 实例中调试插件时，一切运行正常。

运行 MSI 安装程序时，包代码运行良好，但未实例化 MEF 类。

注意：*如果我使用 VSIX（我不用于 MSI 安装）安装包，一切都可以正常工作。*

MEF 类（与包在同一程序集中）：

```
[Export(typeof (IWpfTextViewCreationListener))]
[ContentType("text")]
[TextViewRole(PredefinedTextViewRoles.Document)]
internal sealed class HighlightAdornerFactory : IWpfTextViewCreationListener
{
    [Import]
    public IClassificationTypeRegistryService ClassificationRegistry = null;

    [Import]
    public IClassificationFormatMapService FormatMapService = null;

    [Export(typeof (AdornmentLayerDefinition))]
    [Name(HighlightAdornment.Name)] 
    [Order(After = PredefinedAdornmentLayers.Selection, Before = PredefinedAdornmentLayers.Text)]
    public AdornmentLayerDefinition editorAdornmentLayer = null;
 public void TextViewCreated(IWpfTextView textView)
    { /** ... **/ }
} 
```

我曾经`VisualMEFX`检查过打包它的 DLL。它报告没有导出匹配`IClassificationTypeRegistryService`。这并没有解释为什么它在与 VSIX 一起安装或通过 IDE 调试时工作。但在解决问题时了解它可能很有用。

```
 [Export] MySolution.HighlightAdornerFactory (ContractName="Microsoft.VisualStudio.Text.Editor.IWpfTextViewCreationListener")
  [Export] MySolution.Adornment.HighlightAdornerFactory.editorAdornmentLayer (ContractName="Microsoft.VisualStudio.Text.Editor.AdornmentLayerDefinition")
  [Import] MySolution.Adornment.HighlightAdornerFactory.ClassificationRegistry (ContractName="Microsoft.VisualStudio.Text.Classification.IClassificationTypeRegistryService")
    [Exception] System.ComponentModel.Composition.ImportCardinalityMismatchException: No exports were found that match the constraint: 
    ContractName    Microsoft.VisualStudio.Text.Classification.IClassificationTypeRegistryService
    RequiredTypeIdentity    Microsoft.VisualStudio.Text.Classification.IClassificationTypeRegistryService
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition)
   at Microsoft.ComponentModel.Composition.Diagnostics.CompositionInfo.AnalyzeImportDefinition(ExportProvider host, IEnumerable`1 availableParts, ImportDefinition id) in C:\Temp\MEF_Beta_2\Samples\CompositionDiagnostics\Microsoft.ComponentModel.Composition.Diagnostics\CompositionInfo.cs:line 157
  [Import] MySolution.HighlightAdornerFactory.FormatMapService (ContractName="Microsoft.VisualStudio.Text.Classification.IClassificationFormatMapService")
    [Exception] System.ComponentModel.Composition.ImportCardinalityMismatchException: No exports were found that match the constraint: 
    ContractName    Microsoft.VisualStudio.Text.Classification.IClassificationFormatMapService
    RequiredTypeIdentity    Microsoft.VisualStudio.Text.Classification.IClassificationFormatMapService
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition)
   at Microsoft.ComponentModel.Composition.Diagnostics.CompositionInfo.AnalyzeImportDefinition(ExportProvider host, IEnumerable`1 availableParts, ImportDefinition id) in C:\Temp\MEF_Beta_2\Samples\CompositionDiagnostics\Microsoft.ComponentModel.Composition.Diagnostics\CompositionInfo.cs:line 157 
```

我已经尝试将我程序集中的所有引用库添加到 MSI 中，但这没有帮助。我没有看到任何异常被抛出，`IWpfTextViewCreationListener`该类根本没有被加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:40:52.727

您看到的行为是设计使然；只有在某处的 .vsixmanifest 中列出程序集时，它们才会包含在 MEF 组合中。当您通过 MSI 添加 Package 注册表项时，这不会将您的程序集添加到 MEF 组合中。当您在实验性配置单元中进行测试或直接安装扩展时，您正在将您的程序集包含在您预期的 MEF 组合中。

按照我的推荐顺序，您有几种方法可以解决此问题：

1.  不要使用 MSI。如果可能的话，我强烈鼓励这样做。VSIX 非常强大，为用户提供了许多优势：它们更易于安装和卸载，并且与扩展管理器和 Visual Studio 库集成。除非您可以证明 VSIX 不适合您的方案，否则请使用它们。

2.  使用 WiX 3.6，它有一个 VsixPackage 元素，它将为您安装 VSIX。文档可[在此处](http://wix.sourceforge.net/manual-wix3/vs_xsd_vsixpackage.htm)获得。

3.  让您的 MSI 将 VSIX 的内容安装到 [Program Files]\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\[Your Product Name]，然后运行 ​​devenv /setup 作为自定义操作的一部分。这非常棘手，需要大量手动 WiX 创作。选项#2 的存在是有原因的——WiX 人实际上知道他们在做什么。;-)

# php - PHP检查功能

> ID：12504069
> 
> 赞同：-3
> 
> 时间：2012-09-19T23:01:46.503
> 
> 标签：php, function

我有一个检查功能：

```
function checkCandidateEmail($email)
    {
         $email = $_POST;

        if($email)
        {
            $candemail = (SQL);
            if(isset($candemail['email']))
            {
              return TRUE;
            } else {
              return FALSE;
            }

            return $canEmailCheck;
        }
    } 
```

我已经开始创建一个函数，但我得到 NULL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:07:06.827

```
function checkCandidateEmail($email)
    {
         $email = $_POST; // being immediately overwritten - redundant argument. 

        if($email) // Since $email isn't an optional argument, you'll get a PHP warning if it is missing, making this check confusing.
        {
            $candemail = (SQL); // Evaluating a constant? this will be bool 
            if(isset($candemail['email'])) // Since $candemail is a bool and not an array, this will never return true
            {
              return TRUE;
            } else {
              return FALSE;
            }  // this entire if/else block can be simplified to this: return (isset($candemail['email']));

            return $canEmailCheck; // this is an undefined variable and will never get returned anyway because of the above return statements.
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:33:19.713

下次请详细说明您的问题。如果 $_POST 与 SQL 查询或参数与 SQL 查询一起传递，我不确定您*尝试比较什么。*我假设前者。

如果来自该 SQL 表行的电子邮件等于提交的电子邮件，则返回 TRUE。否则，返回 FALSE。真正的简化版。现在它还会检查用户是否提供了电子邮件：

```
function checkCandidateEmail()
    {
    if (!$_POST['email']) echo "Error, please provide an email";
    else
      {
      $candemail = (SQL);   // Return a row from a query
      return $candemail['email'] == $_POST['email'];
      }
    } 
```

* * *

如果传递了参数，则将其与数据库进行比较。如果没有通过，将提交的 $_POST['email'] 与数据库进行比较。

```
function checkCandidateEmail($email=null)
    {
    $candemail = (SQL);   // Return a row from a query
    if (!$email) $email = $_POST['email'];
    return $candemail['email'] == $email;
    } 
```

`SQL`注意：在这两种情况下，您都必须根据您的数据库替换正确的字符串和函数。

注意 2：确保您的查询返回一封电子邮件，因为此简单代码不会检查两个字符串是否为空。

# asp.net - 向 X 位置显示一个数字但丢弃 0？

> ID：12504073
> 
> 赞同：1
> 
> 时间：2012-09-19T23:02:48.903
> 
> 标签：asp.net, vb.net

我确信这很简单，但如果我需要像这样使用 ASP.net (VB) 动态显示数字：

1.5 => 1.5

2.0 => 2

1.25 => 1.25

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:07:18.053

您可以使用以下方法修剪零[`TrimEnd`](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)：

```
string formatted = "2.0".TrimEnd(new char[] { '0', '.' }); 
```

# grails - grails spring security ui密码验证器

> ID：12504076
> 
> 赞同：0
> 
> 时间：2012-09-19T23:03:48.997
> 
> 标签：grails, spring-security

我想在我自己的控制器中验证密码。有什么方法可以将密码发送到 Spring Security UI 并在密码验证时获得回报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:47:43.503

您正在寻找：

```
springSecurityService.encodePassword 
```

如果你已经用盐配置了你的系统，你也将需要它。只需对字符串进行编码，然后从您的用户对象中读取编码后的字符串，然后比较两者

文件：

[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#6.2%20SpringSecurityService](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#6.2%20SpringSecurityService)

# jquery - Jquery写入tbody

> ID：12504080
> 
> 赞同：0
> 
> 时间：2012-09-19T23:04:21.737
> 
> 标签：jquery

我有一个 id 为“serialTable”的 tbody，想通过 ajax 将一些表数据写入其中 .. 所以我把它放了

```
$(document).keyup(function(e) {
        if(e.which == 13) {
                $("#loader").html("<img src='/images/loaders/loader9.gif'>").fadeIn(400,function(){
                        var serialInput = $("#serial").val();
                        var data = 'scan=1&serial='+serialInput;
                        $.post('/ajax/delivery_scan.php', data, function(response){
                                $('#serial').val('').focus();
                                var new_div = $(response).hide();
                                $('#serialTable').append(new_div);
                                new_div.slideDown();
                        }
                });
        }
}); 
```

这个想法是，在“输入”的每个键上，“序列”的文本输入字段中的序列将直接与其余凭据一起处理到表中。然而，它似乎没有任何反应。我一直想知道这里是否有人可以指出我出了什么问题。谢谢 ：-）

编辑：这是表格的html：

```
<div class="table">
    <div class="head"><h5 class="iFrames">List of Serials/Products for Delivery to Site </h5></div>
    <table cellpadding="0" cellspacing="0" width="100%" class="tableStatic">
        <thead>
            <tr>
                <td width="20%">Serial</td>
                <td width="20%">Product Name</td>
                <td width="20%">Item Code</td>
            </tr>
        </thead>
        <tbody id="serialTable">
        </tbody>

    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:30:20.550

看起来您有语法错误。你需要关闭`$.post()`

您应该在控制台中看到一个错误。

# macos - 在 os x 上的 IntelliJ 11.1 中使用 emacs 模式 MB 输入 unicode 积分

> ID：12504081
> 
> 赞同：9
> 
> 时间：2012-09-19T23:04:30.393
> 
> 标签：macos, emacs, unicode, intellij-idea

在 os x 上使用 IntelliJ 11.1 的默认 emacs 键绑定我尝试使用 MB（或字面上的选项-B）返回一个单词，而不是返回一个单词，输入 unicode 整数符号。MB（选项-B）在我的 emacs 安装中运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-21T10:28:22.420

下载此键盘布局：[https ://github.com/idf/dotfiles/blob/master/keylayout/OptDisabled.keylayout](https://github.com/idf/dotfiles/blob/master/keylayout/OptDisabled.keylayout)

要启用新布局，您必须将其保存到“~/Library/Keyboard Layouts”中，然后从系统偏好设置 -> 键盘 -> 输入源中启用它。

然后，通过这种键盘布局，您可以在 IntelliJ 中使用元键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T02:43:41.400

看起来 JDK 8u60 解决了这个问题。[https://youtrack.jetbrains.com/issue/IDEA-17392#comment=27-983397](https://youtrack.jetbrains.com/issue/IDEA-17392#comment=27-983397)

# python - 如何获得附加到金字塔中被调用视图的权限？

> ID：12504083
> 
> 赞同：3
> 
> 时间：2012-09-19T23:04:48.670
> 
> 标签：python, pylons, pyramid

在我的禁止视图中，如果所有成员访问访客页面，我想将他们重定向到他们的仪表板，如果他们访问成员页面，我想将所有访客重定向到登录页面。这很容易。

但是，在某些情况下，我需要抛出一个 HTTPForbidden 错误，这不是权限失败的原因，而是简单地向用户显示原因。如何确定 HTTPForbidden 是权限失败还是其他原因造成的？我想我可以用`pyramid.security.has_permission`（还没有尝试过）做一些奇怪的事情，但必须有一个更简单的方法。

2011 年的一个老问题，据说这是在待办事项列表中[如何检查金字塔（塔 2）中授权失败的权限？](https://stackoverflow.com/questions/4916149/how-to-check-what-permission-failed-in-authorization-in-pyramid-pylons-2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:47:25.683

这不完全是您所要求的，但它仍然可以帮助您。您的问题的正确答案已经给出：您最好提出一个比`HTTPForbidden`.

但是，如果您真的想根据触发异常的丢失权限来更改禁止视图的行为，则`HTTPForbidden`需要获取其名称。缺失权限的名称可以`HTTPForbidden`在`HTTPForbidden.result.permission`. 但首先，`HTTPForbidden`需要将异常作为禁止视图的上下文传递。

例如，这是我如何在我的 web 应用程序中使用它来通知用户为什么他无法访问特定功能，以便他可以要求管理员在适当的情况下相应地重新配置 ACL。

```
@forbidden_view_config(renderer='/forbidden.mako')
def forbidden(context, request):
    return { 'required_permission': context.result.permission } 
```

它适用于金字塔 1.4。我在文档中找不到任何东西，所以我通过调试金字塔来破解它。这更像是一种解决方法，而不是一个干净的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T00:26:03.827

我没有测试过它，但我想做的是`HTTPForbidden`在你手动执行此操作的地方提出其他内容。你甚至可以子类化`HTTPForbidden`：

```
class WeDontLikeYourFace(HTTPForbidden):
    pass

def my_view(context, request):
    if request['face'] != 'beautyful':
        raise WeDontLikeYourFace("go away") 
```

然后你可以为你的自定义异常注册一个自定义视图，或者在为 HTTPForbidden 注册的通用视图方法中做一些 if/else 的事情。

您还可以将自定义字段添加到您的子类以传递您需要的任何信息。

# java - 可执行jar

> ID：12504084
> 
> 赞同：0
> 
> 时间：2012-09-19T23:05:00.850
> 
> 标签：java, executable

好吧，我制作了一个可执行 jar，其中包含一个通过应用程序运行的测试游戏。它对我来说运行良好，但对我的朋友来说却不行。它说它无法找到主要课程。那么他必须安装java jdk还是什么？有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:28:12.947

是的，有办法解决它。运行此脚本：

```
@ECHO off
SETLOCAL ENABLEDELAYEDEXPANSION
:: this .bat script creates a file association for executable .jar files
ECHO Creating .jar file association...
ECHO JAVA_HOME is %JAVA_HOME%
IF NOT DEFINED JAVA_HOME GOTO :FAIL
REG ADD "HKCR\jarfile" /ve /t REG_SZ /d "Executable Jar File" /f
REG ADD "HKCR\jarfile\shell" /ve /f
REG ADD "HKCR\jarfile\shell\open" /ve /f
ECHO REG ADD "HKCR\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%*" /f
REG ADD "HKCR\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%**" /f
REG ADD "HKLM\jarfile" /ve /t REG_SZ /d "Executable Jar File" /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell" /ve /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell\open" /ve /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%*" /f
ECHO Finished creating .jar file association for executable .jar files.
PAUSE
GOTO EOF
:FAIL
ECHO Script failed. JAVA_HOME not defined.
PAUSE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:14:47.313

好吧，一方面，他可能使用了错误的 JVM 命令行参数来运行 Java jar。其次，您在构建 jar 文件时可能没有正确定义主类（请参阅：[无法为 jar 文件加载主类](https://stackoverflow.com/questions/3036148/unable-to-load-main-class-for-jar-file)）。

你解决这个问题的方式？在我上面提供的链接中，您将看到一些可以提供给 JVM 的命令行参数，它们对 JVM 的运行方式产生了很大的影响。获取这些命令行参数并构建最终用户可以运行以正确初始化程序的批处理（或外壳）文件。

由于您的计算机设置不同，因此处理“.jar”类型文件的外壳扩展名也可能不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:24:35.413

尝试在他们的机器上安装最新版本的 java (JRE)（确保它与编译您的应用程序的版本相同或更高）并确保如果您使用不同的体系结构（x86 / x64），您拥有任何库的正确版本。我昨天才遇到此错误，因为我将 JDK 7u7 应用程序部署到具有 JRE 6u7 的机器上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-30T07:14:32.083

1.  安装新的 JRE。
2.  在运行 jar 时，请确保在他的命令中给出类路径。例如。java -cp asd -jar 文件.jar

# jquery - 使用jquery animate扩展侧栏时自动调整div

> ID：12504088
> 
> 赞同：-1
> 
> 时间：2012-09-19T23:05:57.780
> 
> 标签：jquery, html, css

我正在尝试实现本网站[http://www.qvivo.com/](http://www.qvivo.com/)中使用的效果。jquery 工作正常，我现在的问题是如何在左侧面板/侧边栏展开时自动调整主要内容的大小。请帮助伙计们。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:00:28.383

来自 QVIVO 的 Liam。我写了一个快速的 jsFiddle ( [http://jsfiddle.net/fZy6z/](http://jsfiddle.net/fZy6z/) ) 来模仿网站的框架。

我的主要建议是尽量让浏览器为您完成大部分工作。我们没有使用 JQuery 为 DOM 设置动画，而是简单地使用 CSS 转换添加和删除类标签。最初您不会看到好处，但是当您开始用复杂的 DOM 树填充右侧面板时，您会发现平滑动画的唯一方法是通过硬件加速过渡。

关于自动调整主要内容的问题，这很简单——永远不要为包含的 div 声明宽度值，因为它们无论如何都会自动拉伸到页面的宽度。然后可以为这些 div 中的内容指定 100% 的宽度值。

干杯，利亚姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:25:22.880

I am not the best with Jquery, So I mix it a little bit with JavaScript.

You will need to play with the Width % of what you want and look.

from your CSS, First I put the class pannel_button I put it Absoute. Also I remove the float left

```
.panel_button{
    height: 50px;
    width: 50px;
    cursor: pointer;
    background-image: url(images/arrow.png);
    background-position: center center;
    background-repeat: no-repeat;
    border: thin solid #CCC;
    margin-left: -1px;
    top: 200px;
    position:absolute;
} 
```

Then for your Jquery ands some of my JavaScript, as I am better in JS, I made the animation this way

```
var content = document.getElementsByClassName("content");
$('.panel_button').click(function()
{
    $(".panel").animate({width:'toggle'},500); 

    if( content[0].style.width=="70%" ){ 
        $(".content").animate({width:"90%"},500);
           $(".panel_button").animate({left:"0%"},500); 
    }
    else{  $(".content").animate({width:"70%"},500);
           $(".panel_button").animate({left:"29%"},500); 
          }
}); 
```

But Like I said, you will need to play with the Width and positon to make your button where you want it really. And also, remove the float left for your Hover.

# html - 是否有为所有浏览器编码 CSS 的标准方法？

> ID：12504089
> 
> 赞同：-3
> 
> 时间：2012-09-19T23:06:02.440
> 
> 标签：html, css

我有以下问题：

我正在制作这个网站...我正在使用 html 和 CSS。我一直在努力保持 CSS 尽可能标准，并在使用三个主要浏览器时进行检查：chrome、firefox 和 ie。在我的电脑中，它似乎工作正常（除了一些小细节）。但是，当其他人在其他屏幕维度打开它时，事情就变得不合适了。有谁知道为什么会发生这种情况？看看我在说什么这是主页：

www.britobmarketing.com/ledtogo/index.html

我敢打赌，在您的某些计算机中它会有点不对齐，但在我的计算机中它看起来很完美。好紧张！！！

另外，正如我所说，我正在尝试保持 CSS 标准，以便每个浏览器都能以相同的方式查看它。但是像 Firefox 和 ie 这样的浏览器无法识别除视频之外的三个按钮上的“圆边”效果。它确实适用于其余部分，这让我感到困惑！任何人都知道为什么会发生这种情况？

非常感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:14:59.600

这*不是*浏览器渲染引擎做不同事情的问题。

您没有考虑视口的可变宽度。您的页眉和页脚居中，您的内容固定在左侧。因此，随着视口变宽，页眉页脚保持不变，中心向左滑动。

因此，对于您的内容，问题在于：

```
#indexcontainter {
  width: 980px;
  height: 390px;
  float: none;
  margin-left: 170px;
} 
```

在您的标题中，`margin: auto`居中是什么，使左右边距自动彼此相等。但是对于内容，您将左边距硬编码为`170px`.

将其更改为使用自动边距，它开始工作得很好：

```
#indexcontainter {
  width: 980px;
  height: 390px;
  float: none;
  margin: auto;
} 
```

# asp.net-mvc - AntiForgery 和 JSON 不兼容？

> ID：12504090
> 
> 赞同：0
> 
> 时间：2012-09-19T23:06:07.887
> 
> 标签：asp.net-mvc, json, orchardcms

我已经在 Orchard Modules 中成功使用 AntiForgery 选项和 Ajax 有一段时间了。最近，我一直想改变使用默认的 ContentType = 'application/x-www-form-urlencoded; charset=UTF-8' 到 JSON 有效负载 (ContentType='application/JSON')。

一旦我这样做，我就会得到 ASP.NET 抛出的异常“未提供所需的防伪令牌或无效。”。好的，但是如何在保留 JSON 有效负载的同时添加 __RequestVerificationToken 呢？

作为参考，这是我正在使用的代码：

```
 var config = {
        url: url,
        type: "POST",
        data: data ,
        dataType: "json",
        contentType: "application/json; charset=utf-8"
    };
    $.ajax(config); 
```

控制器（在到达此处之前显示“未提供所需的防伪令牌或无效。”）：

```
 [HttpPost]
    public ActionResult Update(ShoppingCartItemVM[] items)
    {
       // do stuff
    } 
```

这是 Orchard AntiForgery 包装器或 MVC AntiForgery 功能的限制吗？还是我（再次）愚蠢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:56:44.170

季斯卡是正确的。我会深入一点。

注意：只有果园管理员的“post”结果需要防伪令牌。因此，无需记住在 json 请求中使用“Get”的位置。

通常你会想要发送比请求令牌更多的数据。在这种情况下，您随请求发送的“数据”对象必须包含该 __RequestVerificationToken 值。在这种情况下，jQuery 很有用，例如：

```
var defaultPostValues = { __RequestVerificationToken:'@Html.AntiForgeryTokenValueOrchard()', id: 1, ..etc.. };
var myValues = { answers: [1,5,5,10] };
var data = $.extend({}, defaultPostValues, myValues); 

var config = {
    url: url,
    type: "POST",
    data: data ,
    dataType: "json",
    contentType: "application/json; charset=utf-8"
};
$.ajax(config); 
```

也可以根据模块定义关闭防伪令牌（如果我没记错的话？）。模块.txt

```
Name: Polls
AntiForgery: false
Author: Matt
... removed for brevity 
Features:
    Polls
... etc 
```

但是，如果您的调用在 Orchard 的模块中，我建议使用防伪，并且当且仅当外部请求需要您的数据时才禁用。但我会推荐 Orchard 中的 WebAPI 用于这种情况，但这会创建一个全新的故事，并且可能会超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:28:57.433

也许试试这个：

```
​data = {color: 'red', weight:'20lbs'};

// do some more work...

// Append the anti-forgery token to the POST values: 
data['__RequestVerificationToken'] = '@Html.AntiForgeryTokenValueOrchard()';

// Make the .ajax() call: 
var config = {
    url: url,
    type: "POST",
    data: data ,
    dataType: "json",
    contentType: "application/json; charset=utf-8"
};
$.ajax(config); 
```

如果您在剃刀视图以外的地方形成 json，您可以`@Html.AntiForgeryTokenValueOrchard()`在剃刀视图内部进行操作并将其传递给 javascript 对象或变量，以便您可以通过 javascript 将其添加到 json。

编辑：除了 Matthew 发布的方法之外，您还可以在不使用 .extend() 的情况下进行 AJAX 调用之前将防伪标记附加到 POST 值。示例：http: [//jsfiddle.net/JC66L/](http://jsfiddle.net/JC66L/)。

# javascript - 在 jsfiddle.net 和 cssdeck.com 等网站上为个人用户存储 HTML、CSS、JS

> ID：12504091
> 
> 赞同：4
> 
> 时间：2012-09-19T23:06:11.267
> 
> 标签：javascript, html, css, storage

有没有人了解如何在[jsfiddle.net](http://www.jsfiddle.net)和[cssdeck.com](http://www.cssdeck.com)等网站（即允许用户创建/存储自己的前端项目的网站）上为每个用户存储 html、css 和 js？

它们是作为文本字符串存储在数据库中的用户表/集合中，还是作为单独的文件存储？有谁知道这里的最佳做法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:32:48.543

jsfiddle 的创始人大约在一年前回答了这个问题。

从答案：

> 它是 SQL，结构是用 Django 的 ORM 生成的。馅饼和版本使用单独的表格。由于我的设计不好，目前代码保存在同一个表中。它会在不久的将来发生变化。

资料来源：[https ://stackoverflow.com/questions/5283257/how-does-jsfiddle-work](https://stackoverflow.com/questions/5283257/how-does-jsfiddle-work)

# ios - iOS - NSFileHandle availableData 仅在应用程序在设备上手动运行时挂起

> ID：12504095
> 
> 赞同：0
> 
> 时间：2012-09-19T23:06:33.543
> 
> 标签：ios, stdout, nsfilehandle

我设置了一个文件句柄来读取 stdout 的内容，当我尝试使用 availableData 从中提取数据时，它会挂起，但仅当应用程序在我的设备上手动运行时。当我通过 Xcode 在我的设备上或在模拟器上运行该应用程序时，它会按预期提取数据，而我的其余代码可以完美运行。任何想法发生了什么？我的代码如下：

```
int pipefd[2];                
pipe(pipefd);
dup2(pipefd[1], STDOUT_FILENO);
close(pipefd[1]);

NSFileHandle *stdoutReader = [[NSFileHandle alloc] initWithFileDescriptor:pipefd[0]];

// this method writes output to stout
int result = [self createOutput:string1:string2];

// code hangs on this next line when app is run manually on device)
NSData *stdoutData = [stdoutReader availableData]; 
```

我想知道是否在我的设备上，createOutput 方法运行得更慢，所以当我尝试从标准输出中获取数据时，还没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:03:57.623

好吧，看起来 iOS 5.1 不再允许写入标准输出了。对于有兴趣阅读更多内容的任何人，这里有一篇内容丰富的博客文章：[http ://spouliot.wordpress.com/2012/03/13/ios-5-1-vs-stdout/](http://spouliot.wordpress.com/2012/03/13/ios-5-1-vs-stdout/)

# python - 从字典中删除大量键的最快方法

> ID：12504096
> 
> 赞同：3
> 
> 时间：2012-09-19T23:06:40.247
> 
> 标签：python, python-2.7

给定一个大字典，（实际上是 a `defaultdict`）具有数千万个键值对（字符串：整数）。

我想根据值的简单条件（例如`value > 20`）删除大约一半的键/值对。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:12:13.170

我认为基于迭代器的 dict 再生是一个好方法：

```
newdict = dict((k,v) for k,v in d.iteritems() if v > 20) 
```

或者

```
newdict = {k: v for k,v in d.iteritems() if v > 20} 
```

在 Python 2.7 中。

请注意，您必须小心使用`d = {k: v for k,v in d.iteritems() if v > 20}`. 相反，您应该调用

```
d.clear()
d.update({k: v for k,v in d.iteritems() if v > 20}) 
```

这样，对数据的旧引用`d`也将引用过滤后的数据。

**编辑：**

让我们通过基准比较这个线程中讨论的三种方法：

结果显然取决于要“删除”的字典的比例（这可能是不可预测的，但只有线程开启者知道）。它也可能高度依赖于垃圾收集的活动，默认情况[下](http://docs.python.org/library/timeit.html#timeit.Timer.timeit)在`timeit`. 它被关闭以减少测量中的噪音。但是，这可以完全改变方法的排名。我们来看一下：

预先基准代码：

```
from timeit import timeit

n = 2
N = "10**7"
mod = "9999999"
gc = "False"
print "N: %s; mod: %s; garbage collection: %s" % (N, mod, gc)

setup ="""
N = %s
mod = %s
d = {x:1 for x in xrange(N)}
if %s:
    gc.enable()""" % (N, mod, gc)

t = timeit(
'd = {k:v for k, v in d.iteritems() if not k % mod}',
setup=setup,
number=n)
print "%s times method 1 (dict comp): %.3f s" % (n, t)

t = timeit(
'''
for k, v in d.items():
    if k % mod:
        del d[k]
''',
setup=setup,
number=n)
print "%s times method 2 (key deletion within for loop over d.items()): %.3f s" % (n, t)

t = timeit('''
removekeys = [k for k, v in d.iteritems() if k % mod]
for k in removekeys:
    del d[k]
''',
setup=setup,
number=n)
print "%s times method 3 (key deletion after list comp): %.3f s" %(n, t) 
```

**案例1（没有过滤掉字典的项目）：**

*启用垃圾收集：*

```
N: 10**7; mod: 1; garbage collection: True
2 times method 1 (dict comp): 4.701
2 times method 2 (key deletion within for loop over d.items()): 15.782
2 times method 3 (key deletion after list comp): 2.024 
```

*垃圾收集已禁用：*

```
N: 10**7; mod: 1; garbage collection: False
2 times method 1 (dict comp): 4.701
2 times method 2 (key deletion within for loop over d.items()): 4.268
2 times method 3 (key deletion after list comp): 2.027 
```

**案例2（字典的一半项目被过滤掉）：**

*启用垃圾收集：*

```
N: 10**7; mod: 2; garbage collection: True
2 times method 1 (dict comp): 3.449 s
2 times method 2 (key deletion within for loop over d.items()): 12.862 s
2 times method 3 (key deletion after list comp): 2.765 s 
```

*垃圾收集已禁用：*

```
N: 10**7; mod: 2; garbage collection: False
2 times method 1 (dict comp): 3.395 s
2 times method 2 (key deletion within for loop over d.items()): 4.175 s
2 times method 3 (key deletion after list comp): 2.893 s 
```

**案例3（几乎所有字典的项目都被过滤掉了）：**

*启用垃圾收集：*

```
N: 10**7; mod: 9999999; garbage collection: True
2 times method 1 (dict comp): 1.217 s
2 times method 2 (key deletion within for loop over d.items()): 9.298 s
2 times method 3 (key deletion after list comp): 2.141 s 
```

*垃圾收集已禁用：*

```
N: 10**7; mod: 9999999; garbage collection: False
2 times method 1 (dict comp): 1.213 s
2 times method 2 (key deletion within for loop over d.items()): 3.168 s
2 times method 3 (key deletion after list comp): 2.141 s 
```

在具有 24 GB 内存的 Xeon E5630 上的 Linux 2.6.32-34-generic 上的 64 位 Python 2.7.3 上测量。峰值内存使用低于 10 %（通过顶部监控）。

**结论**

1.  方法 1 和 3 的性能与垃圾回收的状态无关。
2.  方法 2 因垃圾收集而显着减慢。方法 1 和 3 总是更快，除了禁用垃圾收集和没有项目被过滤掉的情况。
3.  如果大多数项目预计会被过滤掉，请使用方法 1（字典理解）。如果您希望丢弃多达一半的键（或者甚至更多，需要更精细的基准测试），请使用方法 3。

无论如何我都会选择方法 1，因为它的代码比方法 3 更简洁，而且性能差异不大。但这完全取决于你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:11:35.117

```
dict((k,v) for k,v in original_dict.iteritems() if condition) 
```

这会根据您的条件以内存友好（由于`iteritems`和生成器）和有效的方式（而不是大量的函数/方法调用）创建一个新字典。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T23:25:50.887

以供参考：

```
>>> from timeit import timeit as t
    # Create a new dict with a dict comprehension
>>> t('x={k:v for k, v in x.iteritems() if v % 2}', 'x={x:x for x in xrange(10**7)}', number=30)
100.02150511741638
    # Delete the unneeded entries in-place
>>> t('''for k, v in x.items():
...   if v % 2 != 0:
...     del x[k]''', 'x={x:x for x in xrange(10**7)}', number=30)
89.83732604980469 
```

（我假设模数 == 0 比较的速度与 < 20 的数量级相同，但这与这些测试并不真正相关。）对于非常大的 dict，它们的数量级大致相同，但我猜就地速度要快一些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T23:15:14.490

如果您可以制作新的`dict`：

```
dict((k, v) for k,v in D.iteritems() if k != "foo") 
```

如果你真的想修改原来的：

```
removekeys = [k for k, v in D.iteritems() if k == "foo"]
for k in removekeys: del D[k] 
```

我不确定这些是最快*的*，但它们应该很快。

# html - 跨 div 表格？它有效吗？

> ID：12504099
> 
> 赞同：1
> 
> 时间：2012-09-19T23:06:56.057
> 
> 标签：html, forms, html-validation

基本上是因为一些 javascript/css 规则，我不能只将这两个`div`'s 包装在一个表单标签中并完成它。

所以，我想知道下面的 html 是否被认为是有效的？

```
<div id="tab1">
    <form>
        <input type="text" name="whatever" />
</div>

<div id="tab2">
        <input type="submit" value="Submit" />
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:08:32.517

不，这不是有效的 HTML/XML。

更糟糕的是，它会被解析为：

```
<div id="tab1">
    <form>
        <input type="text" name="whatever" />
    </form> <!-- form will be closed here, because parent is being closed -->
</div>

<div id="tab2">
        <input type="submit" value="Submit" />
    </form> <!--  not sure about what happens with this one, but it will be either removed or replaced with empty <form></form> element -->
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:09:42.073

此处介绍：[http ://www.impressivewebs.com/dom-improperly-nested/](http://www.impressivewebs.com/dom-improperly-nested/)

它是无效的 XML/XHTML，但 HTML5 会更宽容。显示/结构可能不一致，因此应彻底测试。许多浏览器现在会自动“纠正”这种格式。在任何情况下都最好避免。

# svn - SVN 多人在同一个项目上工作

> ID：12504103
> 
> 赞同：2
> 
> 时间：2012-09-19T23:07:24.543
> 
> 标签：svn, tortoisesvn, project, versioning

我是新的与多人一起使用 SVN 的人，所以请多多包涵。我正在与多个开发人员一起开发 C++ 项目，我们正在使用 SVN 来同步和版本化我们的`.h`文件`.cpp`。我习惯于仅使用 SVN 对我自己的项目进行版本控制，但是当我们尝试提交多个开发人员修改过的文件时，与其他开发人员合作会导致文件冲突。

如果发生冲突，是否可以将主干中的文件合并到工作副本中？或者也许是一个更好的问题，如果出现文件冲突，您会建议什么？

我们正在使用 TortoiseSVN 与 SVN 服务器进行通信。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:45:37.213

我对你的问题有点困惑。每个人都使用自己签出的工作目录吗？我有时会看到公司实际上在多个用户之间共享一个工作结帐目录。这是一个很大的禁忌。

如果您都使用自己的工作目录（Subversion 客户端真的没关系。您可以使用 TortoiseSVN、Twitter 或任何客户端）共享项目应该没问题。如果有人对一组你也在处理的文件提交了更改，Subversion 根本不会让你签入你的更改，除非你首先进行*更新*以获取刚刚签入的最新更改。如果有冲突，Subversion 将标记冲突的位置。只需修复冲突，并将文件标记为已解决。然后，提交您的更改。

这真的是全自动化的。你没有什么特别的事情要做。Subversion 不会让你提交过时的更改。您必须进行更新，将这些最新更改合并到您的工作副本中，然后才能提交更改。Subversion 甚至会告诉你哪些文件得到了更新和合并。

# .net - 优化对 RESTful 服务的多次调用

> ID：12504104
> 
> 赞同：0
> 
> 时间：2012-09-19T23:07:41.357
> 
> 标签：.net, rest, service, web

我需要从 C# 客户端代码多次调用 RESTful Web 服务。我还没有切换到 .Net 4.0 的奢侈 - 有没有办法在 .Net 3.5 中实现这一点？

这些调用都是对同一个方法的，只是参数不同。我需要等到所有调用都完成后才能继续执行其余的逻辑。

我一直在研究将 RX 向后移植到 3.5，但不确定我是否可以使用它。我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:20:37.240

试试[http://restsharp.org/](http://restsharp.org/)，它是 .NET 3.5+ 的 REST API 使用者

# jetty - 如何在 Jetty Overlay Deployer 中使用“节点”？

> ID：12504106
> 
> 赞同：0
> 
> 时间：2012-09-19T23:07:47.273
> 
> 标签：jetty, overlay, nodes

我一直在研究 Jetty Overlay Deployer。（http://wiki.eclipse.org/Jetty/Tutorial/Configuring_the_Jetty_Overlay_Deployer）。此页面几乎准确地解释了如何使用此功能。不幸的是，它没有谈论“节点”。还有其他人如何使用“节点”功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:25:07.213

节点功能只是另一层覆盖。所以你有基本的 web 应用程序，然后你覆盖它来制作一个模板，这个模板覆盖了节点特定的配置，最后覆盖了实例特定的配置。

因此，在实例化 OverlayAppProvider 时，您设置了一个节点名称，然后它总是用于查找覆盖节点覆盖。

请注意，我们尚未将覆盖部署程序移植到 jetty-9，但我们将：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=404508](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404508)

# php - 如何限制我的 PHP 列表显示的行数

> ID：12504109
> 
> 赞同：3
> 
> 时间：2012-09-19T23:07:57.423
> 
> 标签：php, forms, list

我有一个显示为列表格式的提交表单，我想知道我能做些什么来使列表只显示一定数量的最新提交信息。我正在对其进行测试，目前该列表在一个页面上，仅显示 50 多个提交，将页面拉得很长。

```
 <?php
$query='select * from article order by `article`.`time` DESC';
$result=mysql_query($query); 
echo '<table width="600px">';
while($row = mysql_fetch_array($result))
{
    echo "<td><a href='".$row['url']."'>".$row['title']."</a></td> <td>".$row['description']."</td><td>".$row['type']."</td></tr>";
}
echo '<table>';
 ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T23:09:12.080

欢迎来到 SO！修改你的sql语句如下：

```
$query='SELECT * FROM article ORDER BY `article`.`time` DESC LIMIT 10'; 
```

将 10 更改为应显示的条目数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:24:18.413

即使您只应选择所需的数据，您也可能需要查看 a `for-loop`，如果您知道要运行某项的次数，这将很有用。你可能会得到一个看起来像这样的循环：

```
for($i = 0; $i < 10 && $row = mysql_fetch_array($result); $i++) {
   echo "<td><a href='".$row['url']."'>".$row['title']."</a></td> <td>".$row['description']."</td><td>".$row['type']."</td></tr>";
} 
```

如果您有足够的数据，此代码将运行 10 次。

# scala - 在intellij中调试scala代码？

> ID：12504111
> 
> 赞同：4
> 
> 时间：2012-09-19T23:08:03.127
> 
> 标签：scala, intellij-idea

我刚刚加入了一个大量使用 scala 的团队。我们使用带有 scala 插件的 intellij CE。

到目前为止，除了调试器之外，一切似乎都正常工作。

有谁知道如何在 intellij 中为 scala 设置调试器？有什么好的在线资源吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T02:02:31.787

这取决于它是桌面应用程序还是网络应用程序，无论如何这个线程应该对你有用：[Debugging Scala code with simple-build-tool (sbt) and IntelliJ](https://stackoverflow.com/questions/4150776/debugging-scala-code-with-simple-build-tool-sbt-and-intellij)

# actionscript-3 - 在 FlexPrintJob 中将 CheckBox 或其他控件添加到 PrintDataGrid

> ID：12504112
> 
> 赞同：0
> 
> 时间：2012-09-19T23:08:15.527
> 
> 标签：actionscript-3, printing, air, flex4, flashbuilder4

所以我们做得很好。

使用 FlexPrintJob 从 XMLListCollection 获取字段以在 Flash Builder 4 AIR 应用程序中打印，并使用其自己的 PrintDataGrid 自定义 PrintView 对象。

```
<mx:PrintDataGrid id="myDataGrid" width="100%">
    <mx:columns>
        <!-- "word" is the name of the XML field that prints-->
        <mx:DataGridColumn dataField="word" headerText="My Word List" />
    </mx:columns>
</mx:PrintDataGrid> 
```

现在我希望能够为用户提供一个选项，以便在每个单词之前的打印输出中添加一个复选框。我应该创建另一个自定义 PrintView 吗？如何将复选框控件（仅用于打印输出，不需要在应用程序本身中）添加到列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:38:01.910

我自己想出了一个解决方案。由于这些复选框只需要在打印页面上，它们不需要是实际的复选框控件，因此我在 labelFunction 中使用 Unicode 编号作为空白白框（actionscript 语法中的 \u25a2）。

```
<mx:PrintDataGrid id="myDataGrid" width="100%">
    <mx:columns>
        <mx:DataGridColumn dataField="word" headerText="My Word List" labelFunction="addCheckBoxes" />
    </mx:columns>
</mx:PrintDataGrid>
<fx:Script>
    <![CDATA[
        function addCheckBoxes(theItem:Object, theColumn:DataGridColumn):String{
            var itemText:String = theItem[theColumn.dataField];
            var retString:String = "\u25a2 \u25a2 \u25a2  " + itemText;
            return retString;
        }
    ]]>
</fx:Script> 
```

此代码放置在我最初为列表创建的 PrintView 的副本中。

# c# - 用 C# 编写一个 LINQ 来过滤通用 PointF 列表中的 max x/y

> ID：12504114
> 
> 赞同：2
> 
> 时间：2012-09-19T23:08:30.990
> 
> 标签：c#, linq

如果我有一个包含 PointF 的列表，例如：

```
[10.5, 5.5]
[8.5, 4.5]
[10.5, 6.5]
[5.5, 10.5]
[10.5, 3.5] 
```

是否有可能让 LINQ 先找到 x 的最大值，然后从这些最大 X 值中找到 Y 的最大值以产生如下结果：

```
[10.5, 6.5] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T23:27:09.173

```
points.OrderBy(i => i.x).ThenBy(i => i.y).Last(); 
```

或者如果您更喜欢 LINQ 查询语法：

```
(from point in points
orderby point.x, point.y 
select point).Last(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:12:37.133

按 x 值分组，取最高组并选择该组中最高的 y 值。

```
PointF maxPoint = points
        .GroupBy(p => p.X)
        .OrderByDescending(g => g.Key)
        .Take(1)
        .Select(g => new PointF(g.Key, g.Max(p => p.Y)))
        .First(); 
```

# sql - 更改 ORDER BY 会导致“转换数据类型错误”

> ID：12504118
> 
> 赞同：4
> 
> 时间：2012-09-19T23:09:29.413
> 
> 标签：sql, sql-server, stored-procedures

我要前言，不是我写的。我今天早些时候继承了它，我一直在努力寻找解决方案。下面的代码库有效 - 除了每平方英尺的成本以 Alpha 顺序而不是数字返回。

```
SELECT 
  CTE.Suite, CTE.Building, CS.Address, CS.City, CS.State, CTE.Tenant,
  CTE.AverageCharges, CTE.SQFT, CTE.CostSQFT, CTE.TenantType
FROM cteInvoices as CTE
   ...
ORDER BY 
  CASE @Order
       WHEN 'Suite' THEN CTE.Suite
       WHEN 'Cost' THEN cast(CTE.costSQFT as varchar)
  END 
```

我将最终情况更改为以下内容：

```
 ORDER BY 
  CASE @Order
       WHEN 'Suite' THEN CTE.Suite
       WHEN 'Cost' THEN CTE.costSQFT
   END 
```

这固定了成本排序，但是，当我选择按套件排序时，我得到：

```
 Msg 8114, Level 16, State 5, Procedure rCostSQFTcsort, Line 17
  Error converting data type varchar to numeric. 
```

我晚上大部分时间都在处理这个问题，但我似乎没有做任何事情来解决它——如果有的话，它会使事情变得更糟。我希望第二双眼睛可以对这个问题有所了解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T23:11:10.347

如果它们不能转换为相同的类型，您可能需要将它们分成两个单独的子句。原因是它`CASE`是一个返回单一数据类型值的表达式，并且所有潜在选项所呈现的数据类型必须是可转换的。如果没有`ELSE`则`NULL`返回，因此它将对该“分支”的所有行进行相同的排序：

```
 ORDER BY 
  CASE @Order
       WHEN 'Suite' THEN CTE.Suite END,
  CASE @Order
       WHEN 'Cost' THEN CTE.costSQFT END; 
```

您可能可以显式转换其中之一，但这可能会改变其含义（例如，您可能仍想在*之后*`11.0`排序，并且将两者都转换为字符串不会这样做。 *`9.0`*

# c# - 如何在控件的 ArrayList 上正确使用 Contains 方法？

> ID：12504123
> 
> 赞同：1
> 
> 时间：2012-09-19T23:09:55.273
> 
> 标签：c#, asp.net, .net, vb.net

我有一个 asp.net 控件（文本框等）的数组列表。

在添加新控件之前，我需要检查数组列表中是否已经存在控件。我该怎么做，因为 .Contains 似乎无法在控件的 ArrayList 上正常工作。

这就是我想要做的：

```
Private Sub AddControl(ByVal ctrl As Control)
Dim al As ArrayList = DirectCast(Session("MyControls"), ArrayList)

If Not al.Contains(ctrl) Then
 al.Add(ctrl)
 Session("MyControls") = al
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:24:36.270

也许这会起作用：

```
object[] items = al.ToArray();

bool result = items.Any(c => c.Id == ctrl.Id );

if ( !result )
{
   al.Add(ctrl);
   Session["MyControls"] = al;
} 
```

# jquery - Wordpress jQuery Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：12504128
> 
> 赞同：1
> 
> 时间：2012-09-19T23:10:18.273
> 
> 标签：jquery, wordpress, syntax-error

我已经准备好尝试调试这段代码了。我有一个页面需要在同一页面中显示大量子帖子而无需转到另一个页面，但是我无法使代码正常工作，但我找不到任何错误。我什至完全删除了它并从头开始重新编写它以试图找到错误但什么也没有，而且一如既往地 JavaScript 在向我指出错误方面是可怕的。我已经尝试过 firebug、jslint 并在 jsfiddle 中制作了相同的结构，但我找不到问题所在。我会说相同的代码在 jsfiddle 中运行良好，但在其他任何地方都没有。我看到页面正在正确加载 jquery，所以 api 不是问题。请帮忙，我不知道还能做什么！

下面是代码结构：

HTML-帖子导航

```
<ul id="sub_select">
  <li class="select">
   <a href="#post1">Post 1</a>
  </li>
  <li class="select">
   <a href="#post2">Post 2</a>
  </li>
</ul> 
```

HTML-帖子

```
<div id="post1" class="about_txt">
  <div class="title">
    <h1>Post 1</h1>
  </div>
  <div class="desc">
    <p>The post itself</p>
  </div>
</div>
<div id="post2" class="about_txt" style="display: none;">
  <div class="title">
    <h1>Post 2</h1>
  </div>
  <div class="desc">
    <p>The post itself</p>
  </div>
</div> 
```

jQuery脚本:(

```
$(document).ready(function() {
    $(".select a").click(function(event){
        event.preventDefault();
        $(".about_txt").hide('slow');
        var toShow = $(this).attr('href');
        $(toShow).show('slow');
    });​
}); 
```

更新：我添加了显然忘记复制的 $，但感谢您指出这一点。我仍然有这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T02:21:40.820

此代码末尾似乎有一个“不可见”字符：

```
$(".select a").click(function(event){
    event.preventDefault();
    $(".about_txt").hide('slow');
    var toShow = $(this).attr('href');
    $(toShow).show('slow');
});​  //<= There's an invisible character here, 
     //    you can try pressing backspace once at the end of the semicolon 
```

为了快速修复，删除不可见字符或复制并粘贴以下代码并替换您的：

```
$(document).ready(function() {
    $(".select a").click(function(event){
        event.preventDefault();
        $(".about_txt").hide('slow');
        var toShow = $(this).attr('href');
        $(toShow).show('slow');
    });
}); 
```

编辑：一点调查显示，隐形字符是[零宽度空间（U+200B）](http://www.fileformat.info/info/unicode/char/search.htm?q=%E2%80%8B&han=Y&preview=none)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:15:28.140

这一行 `(document).ready(function()`应该是`$(document).ready(function()` 它应该在文档前有一个**$**符号..

要仔细检查单击事件的注释并在其中放置警报。请检查警报是否触发。

# ajax - 如果 JSF 页面受 j_security_check 保护，则不会在 ajax 请求上引发 ViewExpiredException

> ID：12504131
> 
> 赞同：7
> 
> 时间：2012-09-19T23:10:35.087
> 
> 标签：ajax, jsf-2, j-security-check, viewexpiredexception

我有一个不受`j_security_check`. 我执行以下步骤：

1.  在浏览器中打开 JSF 页面。
2.  重新启动服务器。
3.  单击 JSF 页面上的命令按钮以启动 ajax 调用。

Firebug 显示 a`ViewExpiredException`如预期的那样被引发。

> 邮政：
> 
> ```
> javax.faces.ViewState=8887124636062606698:-1513851009188353364 
> ```
> 
> 回复：
> 
> ```
> <partial-response>
> <error>
> <error-name>class javax.faces.application.ViewExpiredException</error-name>
> <error-message>viewId:/viewer.xhtml - View /viewer.xhtml could not be restored.</error-message>
> </error>
> </partial-response> 
> ```

但是，一旦我将页面配置为受保护`j_security_check`并执行上面列出的相同步骤，奇怪的是（对我来说）`ViewExpiredException`不再引发。相反，响应只是一个新的视图状态。

> 邮政：
> 
> ```
> javax.faces.ViewState=-4873187770744721574:8069938124611303615 
> ```
> 
> 回复：
> 
> ```
> <partial-response>
> <changes>
> <update id="javax.faces.ViewState">234065619769382809:-4498953143834600826</update>
> </changes>
> </partial-response> 
> ```

有人可以帮我解决这个问题吗？我希望它会引发异常，以便我可以处理该异常并显示错误页面。现在它只是响应一个新的 ViewState，我的页面卡住了，没有任何视觉反馈。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T03:29:34.077

我能够重现您的问题。这里发生的是容器调用`RequestDispatcher#forward()`安全约束中指定的登录页面。但是，如果登录页面本身也是一个 JSF 页面，那么`FacesServlet`也会在转发的请求上调用 。由于请求是转发的，这将简单地在转发的资源（登录页面）上创建一个新视图。但是，由于是ajax请求，没有任何`render`信息（整个POST请求在安全检查转发过程中基本被丢弃），只会返回视图状态。

请注意，如果登录页面不是 JSF 页面（例如 JSP 或纯 HTML），则 ajax 请求将返回页面的整个 HTML 输出作为 ajax 响应，JSF ajax 无法解析并解释为“空”响应。

不幸的是，它“按设计”工作。我怀疑 JSF 规范中对 ajax 请求的安全约束检查存在一些疏忽。原因毕竟是可以理解的，幸运的是很容易解决。只是，您实际上不想在此处显示错误页面，而只是完整地显示登录页面，就像在非 ajax 请求期间发生的那样。您只需检查当前请求是否为 ajax 请求并被转发到登录页面，然后您需要发送一个特殊的“重定向”ajax 响应，以便更改整个视图。

您可以通过以下方式实现此目的`PhaseListener`：

```
public class AjaxLoginListener implements PhaseListener {

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.RESTORE_VIEW;
    }

    @Override
    public void beforePhase(PhaseEvent event) {
        // NOOP.
    }

    @Override
    public void afterPhase(PhaseEvent event) {
        FacesContext context = event.getFacesContext();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
        String originalURL = (String) request.getAttribute(RequestDispatcher.FORWARD_REQUEST_URI);
        String loginURL = request.getContextPath() + "/login.xhtml";

        if (context.getPartialViewContext().isAjaxRequest()
            && originalURL != null
            && loginURL.equals(request.getRequestURI()))
        {
            try {
                context.getExternalContext().invalidateSession();
                context.getExternalContext().redirect(originalURL);
            } catch (IOException e) {
                throw new FacesException(e);
            }
        }
    }
} 
```

* * *

**更新**此解决方案是因为[OmniFaces 1.2](http://omnifaces.org)已内置到[`OmniPartialViewContext`](http://showcase.omnifaces.org/contexts/OmniPartialViewContext). 因此，如果您碰巧已经使用了 OmniFaces，那么这个问题就[完全透明地](https://github.com/omnifaces/omnifaces/blob/2.3/src/main/java/org/omnifaces/context/OmniPartialViewContext.java#L113)解决了，您不需要`PhaseListener`为此定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-29T14:39:44.373

上面的 AjaxLoginListener 解决方案对我有用。有趣的是，我们使用的是 omnifaces 3.11.1，但 OmniPartialViewContext 在我的场景中不起作用。这是因为对 loginViewId 的检查与当前 viewId 不匹配，因为我的 web.xml 中有一个错误页面，用于 org.jboss.weld.contexts.NonexistentConversationException。请注意，当为我触发 AjaxLoginListener 时，它会在调用 context.getExternalContext().invalidateSession(); 时引发异常；所以它从不调用redirect()。所以我不确定我的场景是否与该线程中的原始场景完全相同。以下是我用来重新创建场景的步骤：

1.  访问带有 ajax 命令按钮的 xhtml 页面。
2.  等待会话超时。
3.  单击 ajax 命令按钮。
4.  用户被重定向到映射到 web.xml 中的 NonexistentConversationException 的错误页面
5.  单击该页面上请求安全 URL 的链接
6.  系统显示登录页面 - 登录。
7.  单击将您带到包含步骤 1 中的 ajax 命令按钮的 xhtml 页面的链接。
8.  系统显示包含 NonexistentConversationException 错误页面内容的部分响应。

AjaxLoginListener 是否可能正在工作，因为它映射到 PhaseId.RESTORE_VIEW 而 OmniPartialViewContext 映射到 PhaseId.RENDER_RESPONSE？

# iframe - 将库添加到 Flex 4 (flex iframe)

> ID：12504135
> 
> 赞同：0
> 
> 时间：2012-09-19T23:11:15.417
> 
> 标签：iframe, actionscript, flex4, adobe, flash-builder

我正在尝试在 Flash Builder 中将 flex iframe 与 Adob​​e Flex 项目一起使用，并且我已经通过添加库`Project -> Properties -> Library Path -> Add SWC Folder`但我仍然收到错误`The prefix "flexiframe" for element "flexiframe:IFrame" is not bound`，就好像我没有链接它一样。

```
<flexiframe:IFrame id="googleIFrame"
                       label="Google"
                       source="htp://google.com"
                       width="80%"
                       height="80%"/> 
```

我对 Flex 非常陌生，我找不到任何好的资源。先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:41:09.133

您可能缺少文件顶部的命名空间定义：

> ```
> <s:Application xmlns:fx=“http://ns.adobe.com/mxml/2009”
>                xmlns:s=“library://ns.adobe.com/flex/spark”
>                xmlns:mx=“library://ns.adobe.com/flex/mx”
>                xmlns:flexiframe="http://code.google.com/p/flex-iframe/">
> [...]
> 
> </s:Application> 
> ```

您可以在[用户指南](https://github.com/flex-users/flex-iframe/wiki/Users-guide)中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T12:31:09.407

[首先从http://code.google.com/p/flex-iframe/downloads/list](http://code.google.com/p/flex-iframe/downloads/list)下载 SWC 文件夹。然后设置这个 Project->Properties->Flex Build Path->Add SWC。从构建文件夹链接 .swc。包括这也 xmlns:flexiframe="http://code.google.com/p/flex-iframe/"

# php - Codeigniter 从视图将多个参数传递给控制器 ？

> ID：12504137
> 
> 赞同：5
> 
> 时间：2012-09-19T23:11:24.713
> 
> 标签：php, codeigniter

我有一个输出许多图像的系统，它们旁边有一个 A 链接以将它们设置为专辑封面。

我有多个专辑，并且在我的数据库中有一个名为“is_feature”的字段，如果图像是封面，则设置为 1，如果不是，则设置为 0。

我不知道选择图像的最佳方法，我最初输出如下内容；

```
<a href="/admin/set_photo/'.$image_id.'" title="Set this photo as the feature photo">Set</a> 
```

（image_id 显然是图片的 id），这个函数会调用模型并将所有其他照片的“is_feature”字段设置为 0，并将这张照片的“is_feature”字段设置为 1。

问题是它也清除了所有其他专辑功能。我几乎需要在A链接中传递给变量，第一个是图像的id，第二个是专辑的id，然后我的模型函数只能将“is_feature”设置为0 where album_id =专辑的id通过了。

反正有没有像这样传递两个变量？还是我以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T07:03:57.007

您可以将 URL 中的值设置为查询参数

```
<a href="/admin/set_photo?var1=<?= $image_id;?>&var2=<?= $size;?>"
   title="Set this photo as the feature photo"> Set </a> 
```

您可以在控制器中检索

```
$image_id = $this->input->get('var1');
$image_size = $this->input->get('var2'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T23:15:51.767

呃什么？你可以通过任何你需要的东西。

```
$data = array(
               'title' => 'My Title',
               'heading' => 'My Heading',
               'message' => 'My Message'
          );

$this->load->view('blogview', $data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T12:17:01.543

根据字符串或数组的**数据类型**，有 3 种传递数据的方法（您可以使用下面解释的任何一种，根据您的要求）：

## **通过视图**

```
 //For data you collected through POST method from FORM, collect them as array
        $data=array(
            'employee_name' => $this->input->post('emp_name'),
            'employee_email' => $this->input->post('emp_email'),
            'employee_password' => $this->input->post('emp_password')
             );

$this->load-> view(''mynextpage", $data) 
```

## **通过控制器**

```
redirect('controller_name/index'.$valueofcustomer);
OR
redirect(base_url()."controller_name/index/".$valueofcustomer);

//then in your 'view', you can access value of customer like this:
$v_o_c = $this->uri->segment(3); 
echo "your value is " .$v_o_c; 
```

## **通过会话**

```
$data = array(
                'user_name' => $user_name,
                'is_logged_in' => true
            );

$this->session->set_userdata($data); //set the session
redirect('another_controller/index'); 

//then access those in another_controller like this:
$in = $this->session->set_userdata('$data');

Note: Session data will available only for redirect and lost on next page request 
```

# django - 错误：没有名为 fileupload 的模块

> ID：12504143
> 
> 赞同：1
> 
> 时间：2012-09-19T23:12:13.237
> 
> 标签：django, file-upload, django-models, blueimp

我正在尝试使用这个移植版本的 jQuery File Upload (https://github.com/sigurdga/django-jquery-file-upload)。我将“fileupload”目录放在项目的根目录中（接下来是我的 myapp，settings.py），并修改了我的 urls.py 文件，`url(r'^upload/', include('fileupload.urls')),`并将其添加`'fileupload',`到我`INSTALLED_APPS`的 settings.py 文件中的设置中。当我尝试时，`python manage.py validate (OR shell OR syncdb)`我收到此错误：`Error: No module named fileupload`

我是不是安装错了应用程序？我已经安装了 PIL，显然是 Django (1.4.1)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:19:06.917

如果您使用的是 Django 1.4，并且`settings.py`您已将 fileupload 应用程序安装在与.`myproject.fileupload``fileupload`

```
# settings.py
INSTALLED_APPS = (
    ...
    'myproject.fileupload',
    ...
)

# urls.py
url(r'^upload/', include('fileupload.urls')) 
```

另一种方法是将您的`fileupload`应用程序移动到父目录中。

# cakephp - Cakephp 调整新窗口链接的大小

> ID：12504147
> 
> 赞同：0
> 
> 时间：2012-09-19T23:12:31.527
> 
> 标签：cakephp, hyperlink, targets

大家好，创建一个链接，当您单击它时，它会打开一个新窗口。我想知道是否可以限制窗户开口的大小？

这是我打开窗口的链接的代码

```
<?php echo $this->Html->link(
    $this->Html->image($help, array(
    "alt" => "eBox")),
    '/accounts/help', array('target'=>'_blank', 'escape'=>false)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:37:54.557

您可以这样做，但只能使用 Javascript。

原始代码将类似于：

```
<a href="/pages/home" target="_blank" onClick="window.open('/pages/home', 'windowname','toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=300,height=290'); return false;">Text Link</a> 
```

您真正需要的唯一参数是宽度和高度，但您可能会发现其他参数也很有用。如果没有，只需删除它们。如果用户没有javascript，它只会正常打开链接。

要使用 html 帮助程序，请将您的 javascript 传递给 onClick 数组键：

```
<?php echo $this->Html->link(
$this->Html->image($help, array(
"alt" => "eBox")),
'/accounts/help', array(
    'target'=>'_blank',
    'escape'=>false,
    'onClick'=>"window.open('/pages/home', 'windowname','toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=300,height=290'); return false;"
)); ?> 
```

PS - 你可以在这里阅读 window.open 方法：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# linux - 如何使用 bash 命令将文件名列表写入 .lst 文件

> ID：12504152
> 
> 赞同：0
> 
> 时间：2012-09-19T17:07:17.687
> 
> 标签：linux, bash, php

我是 linux 新手并尝试在我尝试编写的 PHP 脚本中使用 bash 命令，我需要从我正在使用 PHP 中的 DirectoryIterator () 迭代的目录中写入每个 PDF 文件名一个 .lst 文件，我坐在另一个文件夹中，并且每个文件名都列在文本文件的新行中。

.lst 文件应如下所示：

1.pdf
2.pdf
3.pdf
...

我希望这是有道理的。任何帮助/方向将不胜感激。

这是我到目前为止提出的代码：

```
// Use the command line cp to copy each PDF file in the sourceDir to the destinationDir.
foreach ($srcDir as $entity) {

    /**
     * @var DirectoryIterator $entity
     */
    /*$result = rename($sourceDir . '/' . $entity->getFilename(), $destinationDir .'/' . $entity->getFileName());
    if(!$result)
    {
        throw Exception('Could not copy file ' . $entity->getFilename() . 'to destination directory ');
    }*/

    $cpString = 'cp ' . $sourceDir . '/' . $entity->getFilename() . ' ' . $destinationDir .'/' . $entity->getFileName() . ' 2<&1';
    passthru($cpString, $returnVar);

    if($entity->isFile() && strtoupper($entity->getExtension()) == 'PDF')
    {
        $cpString = 'cp ' . $sourceDir . '/' . $entity->getFilename() . ' ' . $destinationDir .'/' . $entity->getFileName();
        if ($counter = 1) {
            $catString = 'cat ' . $destinationDir . '/' . $batchNum . '.lst';
        }
        $cpString = ''
    }
    $counter++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:17:47.187

```
$fh = fopen("foo.lst", "w");

foreach ($srcDir as $entity)
    fwrite($fh, $entity->getFilename() . "\n");

fclose($fh); 
```

# node.js - node.js 和 socket.io - 广播未定义

> ID：12504156
> 
> 赞同：1
> 
> 时间：2012-09-19T23:13:44.870
> 
> 标签：node.js, socket.io

使用 Node.js 和 socket.io，以下工作正常，直到尝试广播回客户端。

我的广播未定义？

```
var http = require('http'),
    sys  = require('sys'),
    fs   = require('fs'),
    io   = require('socket.io');

var server = http.createServer(function(request, response) {
  response.writeHead(200, {
    'Content-Type': 'text/html'
  });

  var rs = fs.createReadStream(__dirname + '/index.html');
  sys.pump(rs, response);

});

var socket = io.listen(server);
debugger;
socket.on('connection', function(client) {
  debugger;
  var username;

  client.send('Welcome to this socket.io chat server!');
  client.send('Please input your username: ');

  client.on('message', function(message) {
    if (!username) {
      username = message;
      client.emit('Welcome, ' + username + '!');
      return;
    }
    socket.broadcast.send('a message');
    //io.socket.send('a message');
    //io.socket.emit('message', username + ' sent: ' + message);
  });

});

server.listen(4000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:02:47.183

如果您想从特定客户端向其他客户端发送消息，请使用：

```
client.broadcast.send('a message'); 
```

要向所有客户端发送消息，请使用：

```
socket.sockets.send('a message'); 
```

`sys`, `pump`, 它们都已被弃用。

[https://github.com/joyent/node/wiki/API-changes-between-v0.6-and-v0.8](https://github.com/joyent/node/wiki/API-changes-between-v0.6-and-v0.8) [http://nodejs.org/api/util.html#util_util_pump_readablestream_writablestream_callback](http://nodejs.org/api/util.html#util_util_pump_readablestream_writablestream_callback)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:26:42.037

那是因为`broadcast`是`io.sockets.socket`对象的方法（`client`在您的情况下），而不是`io.sockets`对象的方法（例如您的误导性命名`socket`）。你想要`client.broadcast...`。

从您的代码来看，您使用的是非常旧的 node 版本（例如`sys.pump()`），并且您可能还使用了旧版本的 socket.io。

# java - 如何避免使用大量变量？

> ID：12504163
> 
> 赞同：4
> 
> 时间：2012-09-19T23:15:18.167
> 
> 标签：java, variables

我想创建一个简单的程序来输出输入的任何元素的原子质量。我正在学习我最近开始的 Java 课程，所以我不知道如何避免使用超过 100 个变量，每个变量都带有元素原子质量。

另外，我如何获得`if`使用用户输入的名称（我知道如何将其存储在字符串中）并将其与其中一个元素匹配的语句，以输出元素的质量（对应于用于存储的方法多个元素）。

如何压缩此示例代码：

```
int carbon = 12;
int oxygen = 16;
int hydrogen = 1;
int sulfur = 32;
etc.... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T23:20:31.670

听起来您的第一步是了解 Map 数据结构。您可以使用它将字符串名称与整数值相关联，然后稍后再查找它们。

```
Map<String, Integer> elements = new HashMap<String, Integer>();
elements.put("CARBON", 12);
elements.put("OXYGEN", 16);
//etc 
```

然后，如果您有一些输入，则可以查找该数字。

```
String userInput = scanner.next(); // or however you're getting input

Integer atomicWeight = elements.get(userInput.toUpper());
if (atomicWeight == null) //print element not found etc 
```

然后，一旦程序关闭并开始工作，您就可以了解适合从源代码外部加载参考数据的任何技术，无论是文件、数据库、Web 服务或其他什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T23:25:22.763

如果遇到这个问题，我可能会定义一个枚举。

```
public enum Elements
{
    HYDROGEN(1),
    ...
    UNOBTANIUM(666);

    public final int atomicWeight;

    Elements(int atomicWeight)
    {
       this.atomicWeight = atomicWeight;
    }
} 
```

然后得到正确的元素

```
String name = ...// from user input
Elements e = Elements.valueOf(name.toUpperCase()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T23:29:06.617

Because the atomic mass of the elements is not going to change at any point in your app, you should define them as final:

```
public class AtomicMass {
    public static final int CARBON = 12;
    public static final int OXYGEN = 16;
    ...
} 
```

...or, you could use an enum:

```
public static enum Element {
    carbon(12),
    oxygen(16),
    hydrogen(1),
    sulfur(32);

    private int atomicMass;

    private Element( int mass ) {
        this.atomicMass = mass;
    }
} 
```

If you order your elements sequentially (and add an UNKNOWN for 0) you wouldn't even need to explicitly provide the mass.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T02:05:33.087

我建议使用一些人建议的枚举，尽管我会做一些不同的事情。地图有很多开销，并且由于您的数据不是动态的，因此不太适合。原子质量应该是一个十进制值（double 或 BigDecimal 取决于您使用它的目的），而不是 int

```
public enum AtomicElement {
    HYDROGEN(1.00794),
        HELIUM(4.002602),
        ...;

    private double atomicMass;

    private AtomicElement (double atomicMass) {
        this.atomicMass = atomicMass;
    }

    public int getAtomicNumber() {
        return ordinal();
    }

    public double getAtomicMass() {
        return atomicMass;
    }

    public static AtomicElement forAtomicNumber(int atomicNumber) {
         return AtomicElement.values()[atomicNumber];
    }

    public static AtomicElement forElementName(String elementName) {
         return AtomicElement.valueOf(elementName);
    }

} 
```

然后您可以按原子序数或元素名称搜索

```
 AtomicElement.forAtomicNumber(2);
   AtomicElement.forElementName("CARBON"); 
```

但是，这确实假设您要表示整个元素周期表，数据中没有间隙，因为它使用 ordinal() 值作为原子序数。如果你想要间隔，你必须有一个原子序数的 int 字段，你的“forAtomicNumber”函数必须循环通过“values()”来找到给定数字的那个。

如果您想包括已知同位素等，您甚至可以扩展它……如果您的要求要求这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T23:22:42.017

我喜欢将相关数据分组到数组或数组列表中。

```
String[] elements = new String[# of elements in table]; 
```

根据元素的位置，您可以获得原子序数。

然后我会遍历它们以查找任何元素或填充数组。您可以查看 Java Scanner 类以获取用户的输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T23:37:39.143

创建一个名为的类`Element`，其中包含名称、原子序数等属性。每个元素将对应一个`Element`. 然后，您可以将所有的`Elements`s 放在几个映射中，按名称、原子序数等作为键。使用工厂类来实例化和初始化映射，并提供查找方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T23:43:28.947

如果我理解正确，您只想有 1 个变量来存储所有元素及其质量，在这种情况下，我建议使用 HashMap。它不会真正节省代码行，但会让你很容易地完成第 2 点。HashMaps 存储一组键值对，如果您有键，您可以获得值，因此这将创建列表：

```
//Declare a new hashmap and initialize it
HashMap<String, Integer> elements = new HashMap<>();

//Add element information
elements.put("CARBON", 12);
elements.put("OXYGEN", 16);
elements.put("HYDROGEN", 1);
elements.put("SULFUR", 32); 
```

然后例如要从对话框中获取用户输入并将结果打印到命令行，您可以执行以下操作：

```
//Collect user input and convert it to all upper case (in real life you would validate this)
String input = JOptionPane.showInputDialog(null, "Please enter an element name").toUpperCase();

//If element name exists in hashmap print its atomic weight
if(elements.containsKey(input.toUpperCase())){
    System.out.println("Atomic Weight: " + elements.get(input));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T23:46:20.610

将数据存储在文件中

```
Element, Weight
oxygen = 16
carbon, 12
.
.
. 
```

伪代码：

```
//Read data file into a `Map<String, int>`
//Get user input
//Access map
//Output 
```

# iphone - iOS6：如何通过 Identifier 连接 Storyboard 中的 UIViewController？

> ID：12504164
> 
> 赞同：2
> 
> 时间：2012-09-19T23:15:20.407
> 
> 标签：iphone, ios, xcode, storyboard, ios6

有谁知道如何将 Storyboard 中的 UIViewControllers 与标识符连接起来？它似乎不再工作了..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T23:29:33.200

Select the UIViewController, once u see a highlighted UIView (usually blue color) then go to the left most column on the XCODE. Select the Attribute inspector , you will see "Title" and "Identifier" label in the "View Controller" section. Give any name to it and in the program to refer to your view controller you can do something like this:

```
UIStoryboard *us = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
FirstViewController *fvc = [storyboard instantiateViewControllerWithIdentifier:@"firstview"]; 
```

This works , let me know if u have any issues.

# c# - 线程循环并等待来自缓冲区的消息 - 最佳解决方案

> ID：12504166
> 
> 赞同：1
> 
> 时间：2012-09-19T23:15:30.853
> 
> 标签：c#, multithreading, buffer, synchronisation

我有一个特定的问题，我想要一个单独的工作线程，如果缓冲区不为空，它在某些时期控制。如果不是，线程从缓冲区（ConcurrentQueue）发送数据......有什么好的解决方案，这对CPU来说并不昂贵？

这是我的方法，它有效但可能不是很好（真的我不太了解线程同步）。

```
public void start(object timeout){

            //Message - my own objective implementation of some tcp message
            Message m;
            while (true) {
                if (msgBuffer.Count != 0) {
                    if (msgBuffer.TryDequeue(out m)) {
                        client.SendData(MediatorPacket.GetPacketBytes(m));
                        SpinWait.SpinUntil(() => { if (msgBuffer.Count != 0) return true; else return false; });
                    }
                }
            }
        }*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:25:34.320

绝对地。看看[TPL DataFlow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)库。特别是，[BufferBlock](http://msdn.microsoft.com/en-us/library/hh160414.aspx)应该适合您的需求。您可能还会发现[这本入门读物](http://www.microsoft.com/download/en/details.aspx?id=14782)很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:54:55.043

听起来您正在寻找具有阻塞行为的生产者-消费者（即消费者将阻塞并且在缓冲区中有数据之前不会被调度。）。在这种情况下，看看[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。

# gwt - GWT：最大响应大小

> ID：12504173
> 
> 赞同：0
> 
> 时间：2012-09-19T23:16:19.043
> 
> 标签：gwt, servlets

我在 GWT 2.5 中遇到问题。每当我在远程服务上调用异步方法时，都会收到“无法反序列化响应”错误。async 方法返回一个简单的字符串。导致错误的原因可能是字符串的大小：返回 70.000 个字符的字符串的方法失败，而返回 60.000 个字符的字符串则不会。

我的问题是：有人知道如何处理 GWT 中的大返回值吗？我想我总是可以尝试将它变成一个常规的 http servlet，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:11:22.467

这是 DevMode 中用于解码 RPC 有效负载的 JS Parser 的限制，它认为 Java 字符串不能超过 64K 个字符： [http ://code.google.com/p/google-web-toolkit/source/browse/trunk/ dev/core/src/com/google/gwt/dev/js/rhino/Parser.java#1420](http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/dev/js/rhino/Parser.java#1420)

感觉提交关于 GWT 的错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:39:59.597

从来没有尝试过发送这么长的字符串。但作为一个黑客，你可以只返回 string.split 它会给你数组。

# facebook - 如何获取用户分享 Facebook 帖子的人员和时间

> ID：12504179
> 
> 赞同：5
> 
> 时间：2012-09-19T23:16:54.420
> 
> 标签：facebook, facebook-graph-api, facebook-fql, share

对于我的朋友分享（不是喜欢）我的 Facebook 帖子，我想知道谁分享了它以及何时分享。使用图形 api，我可以获得喜欢或评论信息以及帖子被分享的次数。我正在寻找的是一个图形 api 调用或 Facebook fql 查询共享，它返回类似于此的结果集：

```
data": [
      {
         "id": "user_id_1",
         "name": "Username 1",
         "created": "some date"
      },
      {
         "id": "user_id_2",
         "name": "Username 2",
         "created": "some other date"
      }
   ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:19:22.727

我现在也在寻找确切的东西很长一段时间。由于 Facebook 显示了分享该帖子的用户列表，我预计 Graph API 中也会提供相同的内容。但不幸的是，迄今为止还没有这样的东西。

对于这个问题，我能找到的最佳解决方法是在 Facebook 页面上[抓取](http://facebook.stackoverflow.com/a/8675389/375233)分享给定帖子的用户列表。我还没有尝试过这个解决方案，但这应该可以解决这个问题。这里唯一的问题是，如果 Facebook 更改该页面的 HTML 结构，则必须修改爬虫**。**

# ipad - 基于语言环境以编程方式在 StoryBoard 之间切换

> ID：12504186
> 
> 赞同：2
> 
> 时间：2012-09-19T23:17:51.313
> 
> 标签：ipad, ios5, storyboard, right-to-left

我有两个故事板，一个用于 LTR（从左到右的脚本，如英语、德语等），一个用于阿拉伯语 RTL（从右到左的脚本）。我想根据选择的用户语言在这两个故事板之间切换。目前我在 AppDelegate.m 文件中执行此代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

NSString *typeN = [[NSLocale preferredLanguages] objectAtIndex:0];
//NSBundle *myBundle= [[NSBundle alloc] init];

if([typeN compare:@"ar"] == NSOrderedSame){
    UIStoryboard *us = [UIStoryboard storyboardWithName:@"RtlStoryboard" bundle: nil];
   FirstViewController *myStoryBoardInitialViewController = [us instantiateInitialViewController];
    myStoryBoardInitialViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        NSLog(@"arabic- RTL");
}
else {
    UIStoryboard *ms = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];

   FirstViewController *myStoryBoardInitialViewControl = [ms instantiateInitialViewController];
    myStoryBoardInitialViewControl.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
     NSLog(@"english- ENG");

} 
```

这是正确的做法吗，尽管对于阿拉伯语 [typeN compare:@"ar"] if block 正在执行但它仍在加载 LTR storyBoard。两个故事板的视图控制器也相同，因为代码逻辑相同，只是屏幕格式不同。请提供有关此问题的指示或详细信息。

# php - Oracle/oci_connect/PHP 的奇怪 ORA-01858 异常（缓存？）

> ID：12504187
> 
> 赞同：0
> 
> 时间：2012-09-19T23:18:37.357
> 
> 标签：php, oracle, caching, oracle-call-interface

我正在使用我编写的 PHP 脚本（复制如下）使用 oci 函数从给定 Oracle 数据库的不同模式中检索数据。昨天，我注意到一个到目前为止 100% 可重现的问题，我很难理解。

问题是：我有一个简单的查询（“select * from table where id = '42'”）和两个模式 S1 和 S2。首先我连接到数据库，然后对于每个模式，我更改 current_schema 并执行查询。如果我在 S1 上执行此操作，它会返回 0 结果，这很好。如果我在 S2 上执行此操作，它会返回 2 个结果，这很好。如果我在 S1 然后 S2 上执行此操作，它将在 S1 上返回 0 结果（这很好），并且 `1858 - ORA-01858: a non-numeric character was found where a numeric was expected`在尝试在 S2 上执行查询时出现错误。相应的非数字字符似乎是“选择 *”中的“*”。

由于我怀疑 Oracle 缓存问题，我决定在执行查询之前在查询末尾附加一个随机注释。这确实解决了这个问题。这是相当骇人听闻的，并且出于性能原因可能是错误的。

由于我无法在 SQL 开发人员中重现此问题，因此问题也可能来自我的代码本身，但随机后缀解决了问题的事实让我认为 Oracle 缓存做错了事。

所以这是我的代码：第一部分包含用于包装 oci 函数的有用函数，第二部分是几个不同测试的实际运行：BUG 是错误场景（ORA-01858），RAND 是带有随机后缀的场景（很好） , SCHEMA_1 是只有第一个模式的场景（0 结果：很好），SCHEMA_2 是只有第二个模式的场景（2 个结果：很好），SAME_SCHEMA 是第二个模式两次的场景（2 个结果两次：很好）。

```
<?php

function db_trigger_error($e) // http://php.net/manual/en/function.oci-error.php
{
    $message =
        "\n<pre>\n" .
        htmlentities($e['code']) . " - " .
        htmlentities($e['message']) . " : \n" .
        htmlentities(str_replace(array("\r\n","\t"),array("  "," "),$e['sqltext'])) .
        sprintf("\n%" . ($e['offset']+1) . "s", "^") .
        "\n</pre>\n";
    throw new Exception($message);
}

function execute_query($conn,$query,$fetch_wanted,&$fetch,&$result)
{
    echo($query . "; ...<br>\n");

    // PARSE
    $stid = oci_parse($conn, $query);
    if (!$stid) { db_trigger_error(oci_error($conn)); }
    $type = oci_statement_type($stid); 

    // EXECUTE
    $exe = oci_execute($stid);
    if (!$exe) { db_trigger_error(oci_error($stid)); }

    // FETCH ARRAY RESULT
    $update = oci_num_rows($stid);
    $fetch = $fetch_wanted  ?
        oci_fetch_all($stid, $result,null,null,OCI_FETCHSTATEMENT_BY_COLUMN) :
        0;

    // FREE STUFF
    oci_free_statement($stid);
    echo(" ... returned $fetch row" . ($fetch>1?'s':'') . " and updated/inserted/deleted $update row" . ($update>1?'s':'') . " ($type)<br>\n");
}

function connect_db(&$conn,$username,$password,$connec_string)
{   
    echo("Connecting to username/password@connec_string<br>\n");
    $conn = oci_connect($username,$password,$connec_string);
    if (!$conn) { db_trigger_error(oci_error()); }
    echo("Connected to Server " . oci_server_version($conn) . " with Client version " . oci_client_version($conn) . "<br>\n");
}

function close_connect_db($conn)
{
    if ($conn)
    {
        echo("Connection closed<br>\n");
        oci_close($conn);
    } else 
    {
        echo("No connection to close<br>\n");
    }
}

$username="USERNAME";
$password="PASSWORD";
$connec_string="(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=HOST)(PORT=PORT)))(CONNECT_DATA=(SERVICE_NAME=SERVICE)))";
$query="select * from TABLE t where t.T_ID = '035DA31100000000'";

foreach(array('BUG','RAND','SCHEMA_1','SCHEMA_2','SAME_SCHEMA') as $testCase)
{
    echo "Start $testCase<br>\n";
    $schemas=($testCase=='SCHEMA_1') ?    array('S1') :
             ($testCase=='SCHEMA_2') ?    array('S2') :   
             ($testCase=='SAME_SCHEMA') ? array('S2','S2') :
                                          array('S1','S1');

    connect_db($conn,$username, $password, $connec_string);
    foreach($schemas as $schema)
    {
        $suffix=($testCase=='RAND') ? ' --' . rand() : '';
        $query_schema="alter session set current_schema=$schema";
        try 
        {
            execute_query ($conn,$query_schema,   false,$fetch,$result,false);
            execute_query($conn, $query . $suffix,true, $fetch,$result,false);
        }  catch (Exception $e)
        {
            echo 'Caught exception: ',  $e->getMessage(), "\n";
            $fetch=0;
        }
    }
    close_connect_db($conn);
    echo "End $testCase<br>\n";
}
?> 
```

相应的输出是：

```
Start BUG
Connecting to username/password@connec_string
Connected to Server Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production With the Partitioning and Data Mining options with Client version 10.2.0.3.0
alter session set current_schema=S1; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 0 row and updated/inserted/deleted 0 row (SELECT)
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...

Warning: oci_execute() [function.oci-execute]: ORA-01858: a non-numeric character was found where a numeric was expected in /users/myself/public_html/ProofOfConcept.php on line 25
Caught exception:
1858 - ORA-01858: a non-numeric character was found where a numeric was expected : 
select * from TABLE t where t.T_ID = '035DA31100000000'
       ^
Connection closed
End BUG

Start RAND
Connecting to username/password@connec_string
Connected to Server Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production With the Partitioning and Data Mining options with Client version 10.2.0.3.0
alter session set current_schema=S1; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000' --1458191218; ...
... returned 0 row and updated/inserted/deleted 0 row (SELECT)
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000' --849888503; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
Connection closed
End RAND

Start SCHEMA_1
Connecting to username/password@connec_string
Connected to Server Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production With the Partitioning and Data Mining options with Client version 10.2.0.3.0
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
Connection closed
End SCHEMA_1

Start SCHEMA_2
Connecting to username/password@connec_string
Connected to Server Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production With the Partitioning and Data Mining options with Client version 10.2.0.3.0
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
Connection closed
End SCHEMA_2

Start SAME_SCHEMA
Connecting to username/password@connec_string
Connected to Server Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production With the Partitioning and Data Mining options with Client version 10.2.0.3.0
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
alter session set current_schema=S2; ...
... returned 0 row and updated/inserted/deleted 0 row (ALTER)
select * from TABLE t where t.T_ID = '035DA31100000000'; ...
... returned 2 rows and updated/inserted/deleted 0 row (SELECT)
Connection closed
End SAME_SCHEMA 
```

有人知道这个问题吗？如果数据库端有适当的修复？使用随机评论作为后缀不好吗？提前致谢。

**编辑以添加部分调查**

这是在 Justin Cave 的良好建议下完成的。

我现在已经更新了 PHP 代码，这样我就可以根据随机标记检索 sql_id `select * from v$sql where sql_text like '%random_part'`，然后我可以使用`select * from table(dbms_xplan.display_cursor('sql_id'))`. 在“RAND”场景中，这个随机部分在我们运行两次选择查询时是不同的，在其他场景中，随机部分保留用于查询的不同运行。

然后我们得到：

*   对于 RAND 场景

`select * from v$sql where sql_text like '%random_part'`返回 1 行。对应的查询计划是

```
 Plan hash value: 2841037776

  ----------------------------------------------------------------------------------------------------------
  | Id  | Operation                   | Name                       | Rows  | Bytes | Cost (%CPU)| Time     |
  ----------------------------------------------------------------------------------------------------------
  |   0 | SELECT STATEMENT            |                            |       |       |     1 (100)|          |
  |   1 |  TABLE ACCESS BY INDEX ROWID| TABLE                      |     1 |   283 |     1   (0)| 00:00:01 |
  |*  2 |   INDEX RANGE SCAN          | I_T_ID                     |     1 |       |     1   (0)| 00:00:01 |
  ----------------------------------------------------------------------------------------------------------

   Predicate Information (identified by operation id):             
   ---------------------------------------------------

       2 - access("BFP"."T_ID"='035DA31100000000') 
```

*   对于越野车场景：

`select * from v$sql where sql_text like '%random_part'`返回具有相同 SQL_ID 的 2 行。行的不同部分是：END_OF_FETCH_COUNT（对应 1 和 0）、PARSE_CALLS（对应 1 和 0）、BUFFER_GETS（对应 4 和 3）、OPTIMIZER_COST（对应 2 和 1）、PARSING_SCHEMA_ID（对应 193 和 203）、PARSING_SCHEMA_NAME（分别为 S1 和 S2）、CHILD_NUMBER（分别为 0 和 1）、CPU_TIME（分别为 7598 和 4093）、ELAPSED_TIME（相同）、CHILD_ADDRESS（奇怪的事情）。对应的查询计划是

```
 Plan hash value: 2841037776

  ----------------------------------------------------------------------------------------------------------
  | Id  | Operation                   | Name                       | Rows  | Bytes | Cost (%CPU)| Time     |
  ----------------------------------------------------------------------------------------------------------
  |   0 | SELECT STATEMENT            |                            |       |       |     2 (100)|          |
  |   1 |  TABLE ACCESS BY INDEX ROWID| TABLE                      |     5 |  1535 |     2   (0)| 00:00:01 |
  |*  2 |   INDEX RANGE SCAN          | I_T_ID                     |     5 |       |     1   (0)| 00:00:01 |
  ----------------------------------------------------------------------------------------------------------

   Predicate Information (identified by operation id):             
   ---------------------------------------------------

       2 - access("BFP"."T_ID"='035DA31100000000') 
```

似乎使用了相同的查询计划。

# sql - 按案例排序多个字段

> ID：12504189
> 
> 赞同：0
> 
> 时间：2012-09-19T23:18:46.540
> 
> 标签：sql, sql-server

下面的代码（以及许多类似的代码）继续返回空白。

基本上，如果 LaborCode = '01 - SC' 那么它应该按 JobSite、LaborCode 和 Schedule（确切日期）排序

如果不是 01 - SC，则应按 JobSite、LaborCode 和 DayNo（星期几）排序

```
Select Distinct Agreements.AgrmntID, Agreements.Description, Agreements.Status,
  JobSites.SiteName, JobSites.Address2, JobSites.City, Customers.CustName,
  Customers.CompanyName, LaborCodeTypes.RepairCode As LaborCode, Schedule = Case
    LaborCodeTypes.RepairCode
    When '01 - SC' Then Left(Convert(varchar,AgreementSchedules.SchedDate,110),
    10) Else DateName(dw, AgreementSchedules.SchedDate)
  End, Employees1.EmpName As Vendor, Employees.EmpName As [Area Manager],
  DatePart(dw, AgreementSchedules.SchedDate) As DayNo
From Agreements Inner Join
  Customers On Agreements.CustID = Customers.CustID Inner Join
  AgreementSchedules On Agreements.AgrmntID = AgreementSchedules.AgrmntID
  Inner Join
  JobSites On Agreements.CustSiteID = JobSites.CustSiteID Left Outer Join
  LaborCodeTypes On AgreementSchedules.RepairID = LaborCodeTypes.RepairID
  Left Outer Join
  Employees On AgreementSchedules.FormanEmpID = Employees.EmployeeID Left Join
  WorkOrderSchedules On WorkOrderSchedules.ScheduleID =
    AgreementSchedules.ScheduleID And AgreementSchedules.ScheduleID =
    WorkOrderSchedules.ScheduleID Left Join
  WorkOrderScheduleTechs On WorkOrderSchedules.ScheduleID =
    WorkOrderScheduleTechs.ScheduleID Left Join
  Employees Employees1 On WorkOrderScheduleTechs.EmployeeID =
    Employees1.EmployeeID
Where Agreements.Status = 2 And LaborCodeTypes.RepairCode <> 'Vendor Bill' And
  Month(AgreementSchedules.SchedDate) = Month(GetDate())
Order By Case
    When [LaborCodeTypes.RepairCode] In ('01 - SC') Then JobSites.SiteName +
    LaborCodeTypes.RepairCode + Schedule
    Else JobSites.SiteName + LaborCodeTypes.RepairCode + DayNo End 
```

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:22:13.137

试试这个：

```
ORDER BY JobSites.SiteName, 
         LaborCodeTypes.RepairCode, 
         CASE WHEN LaborCodeTypes.RepairCode IN ('01 - SC') THEN Schedule ELSE DayNo END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:07:10.373

好的，在 SQL Server 中：

```
CREATE PROCEDURE dbo.Agreements_GetList
AS
BEGIN
  SET NOCOUNT ON;

  SELECT DISTINCT
    a.AgrmntID, 
    a.Description, 
    a.Status,
    js.SiteName, 
    js.Address2, 
    js.City, 
    c.CustName,
    c.CompanyName, 
    LaborCode = lct.RepairCode, 
    Schedule = CASE lct.RepairCode 
      WHEN '01 - SC' THEN CONVERT(CHAR(10), aSch.SchedDate, 110)
      --------------------^^^ much better than LEFT and not specifying length
      ELSE DATENAME(WEEKDAY, aSch.SchedDate) END, 
  Vendor = e2.EmpName, 
  [Area Manager] = e1.EmpName,
  DayNo = CONVERT(CHAR(1), DATEPART(WEEKDAY, aSch.SchedDate))
  --------^^^ this convert is important
FROM dbo.Agreements AS a 
INNER JOIN dbo.Customers AS c 
  ON a.CustID = c.CustID 
INNER JOIN dbo.AgreementSchedules AS aSch 
  ON a.AgrmntID = aSch.AgrmntID
INNER JOIN dbo.JobSites AS js 
  ON a.CustSiteID = js.CustSiteID 
LEFT OUTER JOIN dbo.LaborCodeTypes AS lct 
  ON aSch.RepairID = lct.RepairID
LEFT OUTER JOIN dbo.Employees AS e1 
  ON aSch.FormanEmpID = e1.EmployeeID 
LEFT OUTER JOIN dbo.WorkOrderSchedules AS w
  ON w.ScheduleID = aSch.ScheduleID
LEFT OUTER JOIN dbo.WorkOrderScheduleTechs AS wt
  ON w.ScheduleID = wt.ScheduleID 
LEFT OUTER JOIN dbo.Employees AS e2
  ON wt.EmployeeID = e2.EmployeeID
WHERE 
  a.Status = 2 
  AND lct.RepairCode <> 'Vendor Bill' 
  AND aSch.SchedDate >= DATEADD(MONTH, 0, DATEDIFF(MONTH, 0, GETDATE()))
  AND aSch.SchedDate < DATEADD(MONTH, 1, DATEDIFF(MONTH, 0, GETDATE()))
ORDER BY 
  js.SiteName,
  lct.RepairCode,
  CASE WHEN lct.RepairCode = '01 - SC'
    THEN js.SiteName ELSE DayNo END;
END
GO 
```

现在我完全不了解您的应用程序，因此您必须弄清楚如何从中调用存储过程，而不是嵌入 SQL。

# java - Java 泛型：创建扩展 Throwable 的类对象的集合

> ID：12504190
> 
> 赞同：7
> 
> 时间：2012-09-19T23:18:46.523
> 
> 标签：java, generics

为什么第一行有效，第二行不行？

```
Collection<Class<? extends Throwable>> exs =
    new ArrayList<Class<? extends Throwable>>() {{ add(MyOwnException.class); }};
Collection<Class<? extends Throwable>> exs = Arrays.asList(MyOwnException.class); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T01:55:23.137

它是错误的原因是 java 推断出错误的类型，但是您可以通过在对类型化方法的调用中指定类型来使其编译，*而无需强制转换*[`Arrays.asList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)：

```
Collection<Class<? extends Throwable>> exs 
    = Arrays.<Class<? extends Throwable>>asList(Exception.class); // compiles 
```

在不指定类型的情况下，java 会推断集合的元素类型为`Class<Exception>`，*不能*分配给`Collection<Class<? extends Throwable>>`。

记住泛型，**如果**`B`扩展`A`，`List<B>`则不扩展。**`List<A>`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T23:28:14.977

Generics are very tricky.

In this case `Arrays.asList` will return a `List<Class<MyOwnException>>`, which is not the same than `List<Class<? extends Throwable>>`.

Their behavior will differ since the type `List<Class<? extends Throwable>>` would allow you to add objects that extend Throwable but `List<Class<MyOwnException>>` only accept objects of type MyOwnException.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:59:33.063

`Arrays.asList(MyOwnException.class)`推断有 type ，由于类型参数不同`List<Class<MyOwnException>>`，所以不兼容。`List<Class<? extends Throwable>>`

如果您将通配符放在第一级，它应该可以工作：

```
Collection<? extends Class<? extends Throwable>> exs = Arrays.asList(MyOwnException.class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T00:05:32.933

第一行有效，因为分配**右侧**元素的类型（的`ArrayList`）是`Class<? extends Throwable>`允许添加任何类型的`Class<? extends Throwable>`对象，包括你的`MyOwnException`. 您还可以在第一行添加`Collection`an`Exception.class`或 a`NullPointerException.class`等。

但是第二行要严格得多：你有一个`Collection<Class<? extends Throwable>>`可能包含 a `Class<Exception>`、 a`Class<NullPointerException>`等的 a ，并且你想放置一个`Collection<Class<MyOwnException>>`不允许`Class<Exception>`等的 a 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T23:46:00.487

如果第二个示例可以工作，它将允许这样的代码：

```
Collection<Class<? extends Throwable>> exs = Arrays.asList(MyOwnException.class);
exs.add(IOException.class); 
```

看到问题了吗？`Arrays.asList()`将返回 a `List<Class<MyOwnException>>`，然后您将尝试将 a`Class<IOException>`插入其中。这显然是类型不匹配。**

# ios - iOS 生命周期：在 UIApplication 运行之前会发生什么？

> ID：12504195
> 
> 赞同：0
> 
> 时间：2012-09-19T23:19:16.277
> 
> 标签：ios

我有一个我无法真正回答的问题，所以我想知道是否有人可以在这里有所启发。

基本上，我有兴趣在运行应用程序之前和运行应用程序时了解 iOS 中发生了什么……但从操作系统的角度来看。

我已经看过很多关于当用户在主屏幕上点击应用程序时会发生什么的帖子，但我很想知道在后台基本上发生了什么，然后应用程序控制并主运行 UIApplication 的单例。而且一旦应用程序运行，整个操作系统是否在应用程序的主运行循环中被阻塞或其他事情发生？

特别是，我想了解谁创建了 UIApplication 将运行的进程（所以我假设整个应用程序将在该进程中运行）。

还想知道操作系统在做什么，例如，我在应用程序中打开一个连接......因为我看到创建了一个新线程（查看崩溃报告，我看到一堆线程正在运行，而不仅仅是主要的），但我不知道在哪里以及由谁创建它们（UIApplication 本身？，它们在启动应用程序之前已经在哪里运行？）。

希望问题很清楚；我到处搜索以查找信息，但我得到的只是当你点击一个应用程序时，main() 运行并调用 UIApplication，它控制、处理委托和视图等等......但是发生了什么在操作系统中是一个谜。

是否有任何与 iOS 部分相关的资源？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:36:25.063

iPhone 的操作系统与任何其他现代操作系统非常相似。有一个提供低级功能的内核，一个提供高级功能的 API（对应用程序或操作系统本身）等等。

操作系统本身有很多进程始终处于活动状态，想想设备能够接收通知、接听电话、管理连接以及它需要运行的任何东西的事实。

当你启动一个应用程序时，唯一改变的是一个进程被启动并且它的控制权被赋予了应用程序。

> 而且一旦应用程序运行，整个操作系统是否在应用程序的主运行循环中被阻塞或其他事情发生？

整个操作系统没有被阻塞，启动的进程只是与许多其他不断运行的进程一起[调度。](http://en.wikipedia.org/wiki/Scheduling_%28computing%29)这是通过[多任务处理](http://en.wikipedia.org/wiki/Computer_multitasking)来实现的。

> 特别是，我想了解谁创建了 UIApplication 将运行的进程（所以我假设整个应用程序将在该进程中运行）。

该进程由操作系统本身创建，它创建了一个新的进程结构来管理刚刚启动的应用程序并对其进行调度（具有高优先级，因为它将在前台运行）。

> （UIApplication 本身？，它们在启动应用程序之前已经在哪里运行？）。

线程在某种意义上类似于进程，它们有自己的代码并且它们实际上做某事，但线程是轻量级的，因为许多线程可以由一个进程管理。这意味着您的应用程序（或 API 调用）可以创建一个线程，该线程将与您的应用程序的主线程一起运行并管理它们的操作，但所有这些线程将共享相同的 CPU 分配时间和相同的内存空间等等。实际上 Cocoa 从开发人员的角度隐藏了许多细节，因此您不必确切关心应用程序自动启动哪些线程，因为您不需要：它们用于在对象之间调度消息，管理异步事件等等。

但这只是冰山一角，在了解 iOS 的工作原理之前，您应该了解较低级别的基础架构是如何工作的，例如[BSD Unix](http://en.wikipedia.org/wiki/Berkeley_Software_Distribution#Significant_BSD_descendants)，它实际上是 Darwin 的祖先之一，它是 iOS 运行的内核。在了解了它的工作原理之后，您将了解它的基础设施是如何工作的（即 iOS + 它的 API）。

# python - 如何在 Python 中反转希伯来字符串？

> ID：12504197
> 
> 赞同：5
> 
> 时间：2012-09-19T23:19:38.557
> 
> 标签：python

我正在尝试在 Python 中反转希伯来语字符串：

```
line = 'אבגד'
reversed = line[::-1]
print reversed 
```

但我得到：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0x93 in position 0: ordinal not in range(128) 
```

愿意解释我做错了什么吗？

编辑：答案很好，谢谢！我还尝试使用以下方法将字符串保存到文件中：

```
w1 = open('~/fileName', 'w')
w1.write(reverseLine) 
```

但现在我得到：

```
return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode characters in position 1-3: character    maps to <undefined> 
```

任何想法如何解决这个问题，太？

编辑：找到解决方案，请参阅下面的答案。总之我用

```
codecs.open('~/fileName', 'w', encoding='utf-8') 
```

代替

```
open('~/fileName', 'w') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T23:22:49.203

在希伯来语字符串前面添加`u`对我有用：

```
In [1]: line = u'אבגד'

In [2]: reversed = line[::-1]

In [2]: print reversed
דגבא 
```

* * *

对于第二个问题，您可以使用：

```
import codecs

w1 = codecs.open("~/fileName", "r", "utf-8")
w1.write(reversed) 
```

将 unicode 字符串写入文件`fileName`。

或者，不使用`codecs`，您将需要在写入文件时对`reversed`字符串进行编码：`utf-8`

```
with open('~/fileName', 'w') as f:
    f.write(reversed.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-11T17:20:29.460

由于数字的相反顺序等，您需要的不仅仅是反转一个字符串来翻转希伯来语反词。

算法要复杂得多；

此页面中的所有答案（到目前为止）很可能会弄乱您的数字和非希伯来语文本。

在大多数情况下，您应该使用

```
from bidi.algorithm import get_display
print get_display(text) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T23:22:31.017

您需要使用 unicode 字符串常量：

```
line = u'אבגד'
reversed = line[::-1]
print reversed 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T23:23:03.527

字符串默认被视为 ascii。使用 u'' 表示 unicode

```
line = u'אבגד'
reversed = line[::-1]
print reversed 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T23:24:21.823

确保您使用的是 unicode 对象

```
line = unicode('אבגד', 'utf-8')
reversed = line[::-1]
print reversed 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T23:53:59.027

找到如何写入文件：

```
w1 = codecs.open('~/fileName', 'w', encoding='utf-8')
w1.write(reverseLine) 
```

# google-chrome - Chrome 不尊重儿童的边界半径

> ID：12504198
> 
> 赞同：7
> 
> 时间：2012-09-19T23:19:40.550
> 
> 标签：google-chrome, webkit, css

我在让 Chrome 尊重子元素的边框半径时遇到了一些麻烦。

这是设置：

```
<div class='wrapper'>
    <img id='sosumi' src='http://images.apple.com/safari/images/overview_hero.jpg' />
</div> 
```

如果包装器是定位元素（例如位置：相对）并且具有边框半径，则边框半径将不会应用于 img 内容。

它也不必是图像。填充背景的任何内容。

这是展示问题的简化示例页面。在 Safari、Mobile Safari、Firefox 或 IE 中查看，图像的角将被剪裁为圆角。在 Chrome 中查看图像溢出角落（尽管溢出：隐藏的 css）并且看起来很难看。

看看： [https ://dl.dropbox.com/u/433436/no-rounding/index.html](https://dl.dropbox.com/u/433436/no-rounding/index.html)

问题：是否有一些不太疯狂的解决方法？有谁知道为什么这会影响一个基于 WebKit 的浏览器而不影响其他浏览器？也许这很快就会在 Chrome 中更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T04:15:44.683

您需要删除`position: relative`

如果你*真的*需要相对位置，那么你可以双重包装你的元素：

HTML：

```
<div class="outer">
    <div class="wrapper">
        <div class="inside">
        </div>
    </div>
</div> 
```

CSS：

```
.outer {
    position: relative;
}
.wrapper {
    width: 100px;
    height: 100px;
    overflow: hidden;
    border: 3px solid red;
    border-radius: 20px;
}
.inside {
    width: 100px;
    height: 100px;
    background-color: #333;
} 
```

[http://jsfiddle.net/eprRj/](http://jsfiddle.net/eprRj/)

请参阅以下相关问题：

*   [强制孩子在 CSS 中服从父母的弯曲边框](https://stackoverflow.com/questions/3714862/forcing-child-to-obey-parents-curved-borders-in-css)
*   [CSS边框半径没有在Webkit上修剪图像](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)
*   [如何使 CSS3 圆角在 Chrome/Opera 中隐藏溢出](https://stackoverflow.com/questions/5736503/how-to-make-css3-rounded-corners-hide-overflow-in-chrome-opera)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:00:08.270

只需添加

```
    .wrapper:first-child{
    边框半径：20px；
    }

```

您将不得不根据边框厚度调整半径并将其从孩子身上取下。我还将为较旧的支持浏览器添加前缀 -moz- 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:07:12.440

尝试给子元素一个`border-radius`给父元素的一半。

从这个答案：[https ://stackoverflow.com/a/5421789/187954](https://stackoverflow.com/a/5421789/187954)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T15:13:58.713

添加`display: block;`或 `display: inline-block;`到父元素可以解决它。

# ant - Ant 任务到 FTP 只指定文件

> ID：12504200
> 
> 赞同：0
> 
> 时间：2012-09-19T23:20:01.267
> 
> 标签：ant, ftp

我有一个 Ant 任务，它 FTP 指定目录中的所有文件，它使用一个文件集：

```
<fileset dir="${publicDirectory}">
  <include name="media/**/*" />
</fileset> 
```

我有一个文件，其中包含我想要包含的所有文件：

```
media/some/dir/1.txt
media/some/other/2.txt
... 
```

我怎样才能让文件集读取文件并且只包含我在那里列出的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:48:20.110

我已经尝试了很多东西，但似乎没有什么能解决一个基本问题：该`<ftp>`任务仅适用于文件集，不适用于其他类型的资源。我尝试了各种过滤器链，但无济于事。

我能想到的最好的办法是使用[Ant-Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html) `<for>`或`<foreach>`任务来遍历文件，然后使用`<exec>`任务来执行*ftp*的命令行版本。

# maven - 是什么让您在 maven 或 gradle 中定义项目

> ID：12504204
> 
> 赞同：2
> 
> 时间：2012-09-19T23:21:00.503
> 
> 标签：maven, project, gradle

我已经看到使用 maven 或 gradle 的“项目”（一个系统）包含很多小项目。这些项目不仅是平行的，而且还包含儿童项目和儿童的儿童项目。这使得“项目”结构相当难以理解。我的问题是什么让你在 maven 或 gradle 中定义一个项目。我的答案将取决于可重用性。将“项目”分解为不同的模块并将它们真正分开是有意义的，但如果这个层或小模块不会被许多不同的其他模块使用，它应该只是 maven/gradle 项目的一部分。你对此有何看法？谢谢。

# php - 桌面应用程序的用户验证？

> ID：12504205
> 
> 赞同：0
> 
> 时间：2012-09-19T23:21:11.500
> 
> 标签：php, api, desktop

我为我的最新项目编写了一个 API。它完全用 PHP 编写，目前支持 Web 和移动应用程序。我们也想将其扩展到桌面应用程序，但我不确定如何让用户通过桌面应用程序登录，同时仍然保护用户名和密码免受所述应用程序的影响。

Stackoverflow 上有很多出色的开发人员，所以请给我一些出色的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:10:22.467

> 该应用程序将由第 3 方开发，因此我想确保他们无法存储用户名和密码

如果应用程序必须发送用户名和密码，那么它必须能够访问它们，所以根本不要在应用程序内部使用它们。

使用[OAuth](http://en.wikipedia.org/wiki/OAuth)。这是[包括 Twitter 在内](https://dev.twitter.com/docs/auth/oauth/faq)的许多大型组织使用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:02:01.517

它是一个桌面应用程序，它可以完全访问用户的键盘和内存。如果应用程序应该有一个登录表单，最终用户可以在其中输入他们的用户名和密码，则应用程序根据定义具有此数据。

唯一的解决方案是自己分发登录应用程序，它会执行某种基于令牌的身份验证，并通过您的 api 为第 3 方应用程序提供登录令牌。

oauth 和网络上的其他单点登录系统通常使用来自系统登录自身的 iframe 或弹出窗口。不应允许任何第三方网站或应用程序提供此输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:08:17.170

有很多可能性。想到什么：

*   [颁发由您的CA](http://en.wikipedia.org/wiki/Certificate_authority)签名的[证书](http://en.wikipedia.org/wiki/Public_key_certificate)并稍后验证，例如通过[OpenSSL 库](http://php.net/manual/en/book.openssl.php)或[Apache](http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html#accesscontrol)。
*   使用[公钥](http://en.wikipedia.org/wiki/Public-key_cryptography)加密，例如通过[GnuPG lib](http://www.php.net/manual/en/book.gnupg.php)，并仅授予对已知公钥的访问权限。
*   使用任何类型的[基于令牌的身份验证](http://en.wikipedia.org/wiki/Software_token)或任何其他[两因素身份验证](http://en.wikipedia.org/wiki/Two-factor_authentication)..
*   只需给他们另一组 API 凭证（Secret Key、API Key）

# .htaccess - Like Button、vBulletin 和 Mod Rewrite

> ID：12504206
> 
> 赞同：0
> 
> 时间：2012-09-19T23:21:16.167
> 
> 标签：.htaccess, url, url-rewriting, facebook-like, vbulletin

在我的 vBulletin 板上使用 Facebook 的 Like 按钮时，我遇到了一个非常非常非常奇怪的问题。在我的线程模板中，我使用了以下代码，它位于 body 标记内：

```
<td class="vbs_forumdata alt1">
    <div id="fb-root"></div>
        <script type="text/javascript">(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/all.js#xfbml=1";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");</script>
        <div id="thread_sharing_content_facebook">
            <div class="fb-like" data-href="{vb:raw sharingurl}" data-layout="button_count" data-send="false" data-show-faces="false" data-width="90"></div>
        </div>
    </div>
</td> 
```

一旦模板被 vBulletin 引擎处理，变量 {vb:rawsharingurl} 就会被线程的规范 URL 替换，如下所示：

```
http://MYDOMAIN/threads/THREADID-THREADTITLE 
```

例如：

```
http://www.mydomain.com/threads/1-Hello-Community 
```

查看线程页面的 HTML 源代码，一切似乎都按预期工作：

```
<td class="vbs_forumdata alt1">
    <div id="fb-root"></div>
        <script type="text/javascript">(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/all.js#xfbml=1";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");</script>
        <div id="thread_sharing_content_facebook">
            <div class="fb-like" data-href="http://www.mydomain.com/threads/1-Hello-Community" data-layout="button_count" data-send="false" data-show-faces="false" data-width="90"></div>
        </div>
    </div>
</td> 
```

但是，如果我点击“Like”按钮来分享线程页面……戏剧性的来了：

![戏剧](../Images/7363eb5b0384cfdda135eb8dc53e3fba.png)

线程页面的原始 URL 被搞砸了，变成了这样的东西：

```
http://MYDOMAIN/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/THREADID-THREADTITLE 
```

任何人都知道为什么我会遇到这个奇怪的问题？我唯一想自己弄清楚的是我的 htaccess 文件，其中包含一些重写规则。这几乎是 vBulletin 的默认设置……但是，无论如何，它们是：

```
RewriteEngine On
RewriteBase /

// Block Bad Bots
RewriteCond %{HTTP_USER_AGENT} [...]
RewriteRule ^.*$ - [F,L]

RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteRule ^forums/.* forumdisplay.php [QSA]
RewriteRule ^members/.* member.php [QSA]
RewriteRule ^threads/.* showthread.php [QSA]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteRule ^(?:(.*?)(?:/|$))(.*|$)$ $1.php?r=$2 [QSA]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ - [NC,L]

RewriteRule ^(.*)$ - [R=404,L] 
```

**编辑：我尝试使用 Facebook URL 调试器和...**

*报废信息*

```
Response Code: 200
Fetched URL: http://www.mydomain.com/threads/1-Hello-Community
Canonical URL: http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community 
```

*必须修复的严重错误*

```
Could Not Follow Redirect Path: Using data from http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community because there was an error following the redirect path. 
```

*必须修复的错误*

```
Too Many Redirects: URL redirected too many times. Please reduce the number of redirects. 
```

*应该修复的按钮警告*

```
Admins And App ID Missing: fb:admins and fb:app_id tags are missing. These tags are necessary for Facebook to render a News Feed story that generates a high click-through rate.
Like Button Tag Missing: og:title is missing. The og:title meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate.
Like Button Tag Missing: og:type is missing. The og:type meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate.
Like Button Tag Missing: og:image is missing. The og:image meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate. 
```

*应该修复的开放图警告*

```
Inferred Property: The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property: The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property: The 'og:description' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property: The 'og:image' property should be explicitly provided, even if a value can be inferred from other tags. 
```

*对象属性*

```
og:url: http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community
og:type: website
og:title: #Page Title#
og:image: 
og:description: #Meta Description#
og:updated_time: 1348134967 
```

*重定向路径*

```
originale: http://www.mydomain.com/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community
rel="canonical": http://www.mydomain.com/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/threads/1-Hello-Community 
```

最终 URL 以粗体显示（这是我们尝试从中提取元数据的 URL）。

请，请，请...帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:53:03.717

您可能需要添加 meta og 标签

```
 <meta type="og:url" content="<?php get_current_url(); ?>" > 
```

试试看

# hadoop - 创建一个使用可以返回列名的 UDF 函数的 hiveQL 查询

> ID：12504207
> 
> 赞同：1
> 
> 时间：2012-09-19T23:21:18.707
> 
> 标签：hadoop, hive, hiveql

我想创建一个 Hive UDF 函数，该函数根据某个值返回特定的列名，比如 retreivecol(age)。如果年龄为 20，则返回要在选择查询中使用的列名列表，如 'name、email、fbuserid、friend list ' 等，如果年龄小于 20 则单独返回 'name'。所以我希望我的 HIVE QL 查询看起来像

从 User_Data 中选择 retreivecol(age)；

上面的查询只打印列的名称，如“名称、电子邮件、fbuserid、朋友列表”等，而不是将它们视为列名称并基于相同的过滤。任何指针都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:26:06.957

我不确定 UDF 是否是执行此操作的正确位置，因为 UDF 只是看到传递给它们的值，它们实际上无法访问整个表结构。

相反，您可以在嵌套表中执行此操作吗？

```
select name,email,id FROM
(
  select
    name,
    if(age < 20, email, NULL) as email,
    if(age < 20, id, NULL) as id
  FROM mytable

) a 
```

# mysql - 8 位小数的纬度/经度应该使用哪种 MySQL 数据类型？

> ID：12504208
> 
> 赞同：306
> 
> 时间：2012-09-19T23:21:32.423
> 
> 标签：mysql, types, floating-point

我正在处理地图数据，并且`Latitude/Longitude`扩展到小数点后 8 位。例如：

```
Latitude 40.71727401
Longitude -74.00898606 
```

我在[Google 文档](https://developers.google.com/maps/articles/phpsqlsearch_v3#createtable "谷歌文档")中看到 它使用：

```
lat FLOAT( 10, 6 ) NOT NULL,  
lng FLOAT( 10, 6 ) NOT NULL 
```

但是，它们的小数位只能到 6。
我应该使用`FLOAT(10, 8)`还是有另一种方法可以考虑存储这些数据，以便精确。它将与地图计算一起使用。谢谢！

* * *

## 回答 #1

> 赞同：672
> 
> 时间：2012-09-19T23:39:41.177

MySQL 支持[Spatial 数据类型](https://dev.mysql.com/doc/refman/5.5/en/spatial-type-overview.html)，`Point`是可以使用的单值类型。例子：

```
CREATE TABLE `buildings` (
  `coordinate` POINT NOT NULL,
  /* Even from v5.7.5 you can define an index for it */
  SPATIAL INDEX `SPATIAL` (`coordinate`)
) ENGINE=InnoDB;

/* then for insertion you can */
INSERT INTO `buildings` 
(`coordinate`) 
VALUES
(POINT(40.71727401 -74.00898606)); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2019-04-21T06:07:43.603

在 laravel 中使用**十进制列**类型进行迁移

```
$table->decimal('latitude', 10, 8);
$table->decimal('longitude', 11, 8); 
```

有关更多信息， [请参阅](https://laravel.com/docs/8.x/migrations#columns)可用的列类型

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-05-24T19:01:06.650

此外，您会看到`float`值是四舍五入的。

```
// 例如：给定值 41.0473112,29.0077011

浮动（11,7） | 十进制(11,7)
--------------------------
41.0473099 | 41.0473112
29.0077019 | 29.0077011

```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-02-27T01:13:18.827

不要使用浮点数...它会使您的坐标四舍五入，从而导致一些奇怪的事件。

使用小数

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-07-15T13:30:00.913

我相信在 MySQL 中存储 Lat/Lng 的最佳方法是使用带有 SPATIAL 索引的 POINT 列（2D 数据类型）。

```
CREATE TABLE `cities` (
  `zip` varchar(8) NOT NULL,
  `country` varchar (2) GENERATED ALWAYS AS (SUBSTRING(`zip`, 1, 2)) STORED,
  `city` varchar(30) NOT NULL,
  `centre` point NOT NULL,
  PRIMARY KEY (`zip`),
  KEY `country` (`country`),
  KEY `city` (`city`),
  SPATIAL KEY `centre` (`centre`)
) ENGINE=InnoDB;

INSERT INTO `cities` (`zip`, `city`, `centre`) VALUES
('CZ-10000', 'Prague', POINT(50.0755381, 14.4378005)); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-03-16T13:37:44.030

自从提出这个问题以来，MySQL 现在已经支持空间数据类型。因此，当前接受的答案没有错，但如果您正在寻找附加功能，例如查找给定多边形内的所有点，请使用 POINT 数据类型。

查看有关地理空间数据类型和[空间分析功能](https://dev.mysql.com/doc/refman/8.0/en/spatial-analysis-functions.html)[的 Mysql 文档](https://dev.mysql.com/doc/refman/8.0/en/spatial-type-overview.html)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-05-09T23:59:40.977

您可以将数据类型设置为有符号整数。当您将坐标存储到 SQL 时，您可以设置为 lat*10000000 和 long*10000000。当您选择距离/半径时，您会将存储坐标划分为 10000000。我用 300K 行对其进行了测试，查询响应时间很好。（2 x 2.67GHz CPU，2 GB RAM，MySQL 5.5.49）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-10-20T13:22:32.183

小数点后 6 位的精度约为 16 厘米，这意味着如果两个物体之间的距离小于 16 厘米，则它们具有相同的 lat 和 lng。

此外，在 mariadb/mysql 中，如果我们有大量数据用于索引，则使用 float/double 并不理想，而 Point 数据类型是数据大小的开销。最好使用十进制或将 lat long 转换为 INT。

使用带 6 个小数位的小数是一个不错的选择，因为我们可以忽略转换，并且我们只有 16 厘米的误差，经度在 -180 到 180 之间，因此需要比纬度多 1 位，在 -90 到 90 度之间：

```
Lat DECIMAL(8,6)
Lng DECIMAL(9,6) 
```

我们可以扩展到小数点后 8 位：

```
Lat DECIMAL(10,8)
Lng DECIMAL(11,8) 
```

[MySQL 参考](http://mysql.rjweb.org/doc.php/latlng)

[Mariadb 参考资料](https://mariadb.com/kb/en/latitudelongitude-indexing/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-05T10:40:42.883

```
CREATE TABLE your_table_name (
   lattitude  REAL,
   longitude  REAL
) 
```

还可以考虑在您的经纬度声明中添加进一步的验证：

```
CREATE TABLE your_table_name (
   lattitude  REAL CHECK(lattitude IS NULL OR (lattitude >= -90 AND lattitude <= 90)),
   longitude  REAL CHECK(longitude IS NULL OR (longitude >= -180 AND longitude <= 180))
) 
```

解释： [https ://dev.mysql.com/doc/refman/5.7/en/floating-point-types.html](https://dev.mysql.com/doc/refman/5.7/en/floating-point-types.html)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-06-02T18:07:45.680

在 Rails 上使用迁移 ruby

```
class CreateNeighborhoods < ActiveRecord::Migration[5.0]
  def change
    create_table :neighborhoods do |t|
      t.string :name
      t.decimal :latitude, precision: 15, scale: 13
      t.decimal :longitude, precision: 15, scale: 13
      t.references :country, foreign_key: true
      t.references :state, foreign_key: true
      t.references :city, foreign_key: true

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2021-10-27T08:20:20.797

你应该简单地使用`varchar (20)`

# .net - 通过 Directory.GetFiles() 在安全的系统文件上循环而不抛出异常

> ID：12504209
> 
> 赞同：0
> 
> 时间：2012-09-19T23:21:34.117
> 
> 标签：.net, vb.net

> **可能重复：**
> [当 Directory.GetFiles() 被拒绝访问时忽略文件夹/文件](https://stackoverflow.com/questions/172544/ignore-folders-files-when-directory-getfiles-is-denied-access)

我有这个例子，它循环特定文件夹中的文件。

```
Imports system.IO
Dim Files() as string = Directory.GetFiles("D:\example","*.*",SearchOption.AllDirectories)
For Each S As String in Files
Listbox1.Items.Add(S)
Next 
```

到那时一切都好。但问题出在这里：如果用户选择一个顶级文件夹（如驱动器“D：\”），代码将如下：

```
Imports system.IO
    Dim Files() as string = Directory.GetFiles("D:\","*.*",SearchOption.AllDirectories)
    For Each S As String in Files
    Listbox1.Items.Add(S)
    Next 
```

该问题将是一个异常[UnauthorizedAccessException]，因为循环到达了安全文件夹“系统卷信息”，程序将停止。我需要跳过此异常并在每个文件上进行代码循环，除了受保护的文件和文件夹（如系统卷信息）。

对造成的不便表示歉意....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:34:09.003

```
Imports System.IO

Public Class Form1

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim strFileList(-1) As String
    Call GetAllFiles("C:\", "*.*", strFileList)

    ListBox1.ClearSelected()
    For Each s As String In strFileList
      ListBox1.Items.Add(s)
    Next s
  End Sub

  Public Sub GetAllFiles(folder As String, searchPattern As String, ByRef fileList() As String)
    'First add all files in the current folder
    Dim strFiles(-1) As String
    Try
      strFiles = Directory.GetFiles(folder, searchPattern, SearchOption.TopDirectoryOnly)
    Catch ex As Exception
    End Try
    If strFiles.GetUpperBound(0) >= 0 Then
      Dim intStartIndex As Integer = fileList.GetUpperBound(0) + 1
      ReDim Preserve fileList(fileList.GetUpperBound(0) + strFiles.GetUpperBound(0) + 1)
      For i As Integer = 0 To strFiles.GetUpperBound(0)
        fileList(intStartIndex + i) = strFiles(i)
      Next i
    End If
    'Next go through all folders
    Dim strFolders(-1) As String
    Try
      strFolders = Directory.GetDirectories(folder, "*.*", SearchOption.TopDirectoryOnly)
    Catch ex As Exception
    End Try
    If strFolders.GetUpperBound(0) >= 0 Then
      For Each strFolder As String In strFolders
        Call GetAllFiles(strFolder, searchPattern, fileList)
      Next strFolder
    End If
  End Sub

End Class 
```

# javascript - 如何在第一个分隔符上拆分

> ID：12504216
> 
> 赞同：0
> 
> 时间：2012-09-19T23:22:35.370
> 
> 标签：javascript, jquery

假设我有一组要拆分的项目（这是一个页面）。

我正在尝试“智能”提取标题，但仅提取相关部分。

我也不想要前导/尾随空格。

不过，我不太确定如何去做这件事.. 没有在其他循环中放置一堆循环。

```
function cleanTitle(title) {
    // Extract up to first delimiter
    var delims = ['|','·','-',':'];
} 
```

我正在使用 jquery。

我还将 delims 数组按照我认为最重要的顺序排列。而不是在移动到下一个之前搜索第一个数组项的整个标题，我认为它应该一次一个字母地处理整个字符串......它会检查字符串的每个字母是否包含在该数组中。如果没有，它会继续前进。我知道很多 url 可能包含所有 4 个中的 3 个，否则它就不会很好地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:32:13.757

You can use a regex to do the work for you:

```
var str = "This is a title-And the rest of the string";
var title;
var matchChar = str.match(/^(.*?)[|·\-:]/);
if (matchChar) {
    title = matchChar[1];   // "This is a title"
} else {
    title = str;
} 
```

Working demo: [http://jsfiddle.net/jfriend00/kxVMB/](http://jsfiddle.net/jfriend00/kxVMB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:38:16.953

`split`接受正则表达式或字符串作为其参数。您可以使解决方案不那么冗长：

```
function cleanTitle(title) {
    return title.split(/[-.|:]/)[0];
} 
```

演示：http: [//jsfiddle.net/AlienWebguy/JkRv6/](http://jsfiddle.net/AlienWebguy/JkRv6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T20:12:51.703

所有这些答案都***忽略***了明显和最优雅的解决方案（尽管 RegEx 肯定是对循环的改进）。只需使用`string.split(/^(.*?)[|·\-:]/,1)` 这是*ECMAScript 1*，所以我不明白为什么它不会在所有浏览器中都可用。

# 句法

`string.split(separator, limit)`

* * *

# 参数

### 参数说明

`separator Optional. Specifies the character, or the regular expression, to use for splitting the string. If omitted, the entire string will be returned (an array with only one item)`

`limit Optional. An integer that specifies the number of splits, items after the split limit will not be included in the array`

# iphone - 使用音量按钮在 iPhone 上切换飞行模式

> ID：12504222
> 
> 赞同：3
> 
> 时间：2012-09-19T23:23:09.800
> 
> 标签：iphone, objective-c, iphone-privateapi

这是一个很难的。我每天要切换飞行模式十几次，并且想要一种快速的方法来做到这一点。我是少数会为专用于飞行模式的物理按钮而死的用户。我想尝试使用降低音量按钮来完成。这不会出现在应用商店中，我很高兴（而且我认为确实有必要）使用一些私人图书馆。事实上，事实证明我需要越狱手机。在这个阶段我正在寻找一般的架构建议，而不是特定的代码（尽管这永远不会受到伤害）。

所以问题是：解决这个问题的最佳架构是什么？我以这种方式分解问题：

1）如何让应用程序在后台运行，以便它可以监听并响应音量按钮按下（可能还有来自远程控制设备的音量降低事件）。我在这里有三个选择： --创建一个VOIP应用程序--创建一个导航应用程序--创建一个音频应用程序音频应用程序似乎是最合理的方式。我是否必须不断重复播放无声曲目以使我的应用程序在后台保持活力？如果我从另一个应用程序播放音轨，我似乎会遇到应用程序死机的问题。

2）如何拦截音量下降事件。这个问题的一个答案： [程序访问 iPhone 音量按钮](https://stackoverflow.com/questions/772832/program-access-to-iphone-volume-buttons)

3）如何检查飞机状态并进行更改。这个问题的旧答案是我不明白的一些马赫代码和动态链接：http: [//blogs.oreilly.com/iphone/2009/01/bring-airplane-mode-control-ba.html](http://blogs.oreilly.com/iphone/2009/01/bring-airplane-mode-control-ba.html)

了解私人图书馆的最佳资源似乎在这里： [http ://theiphonewiki.com/wiki/index.php?title=/System/Library/Frameworks](http://theiphonewiki.com/wiki/index.php?title=/System/Library/Frameworks)

任何关于更好的私人图书馆“文档”的建议或 Zdziarski 的“iPhone 开放应用程序开发”一书的更新都将受到欢迎。

感谢您和我一起考虑这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:02:21.803

我认为，最好将其分解为多个单独的问题，因为它们都是不相关的。

**1）**关于背景。我建议使用 LocationManager 并定期打开和关闭它。这会重置计时器，该计时器正在计算您可以在后台停留的时间。

以下是一些有用的链接：

[iPhone - 背景调查事件](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events)

[setKeepAliveTimeout 和 BackgroundTasks](https://stackoverflow.com/questions/4777499/setkeepalivetimeout-and-backgroundtasks)

[http://www.slideshare.net/tranq72/ios4-multitasking-development-notes](http://www.slideshare.net/tranq72/ios4-multitasking-development-notes)

**2）**不知道。

**3)**该方法将不再起作用，因为已删除 SBSetAirplaneModeEnabled api。

但是，我可以解释提供的链接中的代码是如何工作的：

```
#define SBSERVPATH  "/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices" 
```

这些只是定义了不同动态加载的库的存储位置。

```
void *sbserv = dlopen(SBSERVPATH, RTLD_LAZY); 
```

这将加载动态加载的库

```
int (*setAPMode)(mach_port_t* port, BOOL yorn) = 
         dlsym(sbserv, "SBSetAirplaneModeEnabled"); 
```

这段代码做了两件事。dlsym 在这个动态加载的库中找到 SBSetAirplaneModeEnabled 函数的地址。并将其存储在 setAPMode 变量中。

```
setAPMode(p, yorn); 
```

这只会调用这个函数。

```
dlclose(sbserv); 
```

这将关闭句柄（我们不再需要它）。

您会看到`mach_port_t`很多私有 API 调用的一部分。通常[这个马赫端口是进程间通信系统的一部分](https://stackoverflow.com/questions/12410102/where-can-i-find-a-good-documentation-on-mach-kernel-messaging)

这是非常简短的解释。为了与其他应用程序通信，您需要向它发送消息，并且`mach_port_t`是您发送这些消息的句柄。例如，在`setAPMode`内部向 SpringBoard 应用程序发送一条消息，该应用程序打开/关闭飞行模式。这就是为什么我们必须将它传递给这些函数的原因。

有不同的方法可以获取其他应用程序的端口。但是，私有 API 最常见的是调用另一个私有 API，它将端口返回给您。

有一个 API，`SBSSpringBoardServerPort`它返回 Springboard 服务器端口并将其传递给其他 Sprinboard 客户端 API。

# wordpress - 我怎样才能让谷歌找到我的实际网站而不是 Alexa？它与wordpress模板有关吗？

> ID：12504226
> 
> 赞同：-1
> 
> 时间：2012-09-19T23:23:50.033
> 
> 标签：wordpress, seo

当我在谷歌中搜索我的网站（使用全名）时。这是 listzz 上的第一项；

我的网站 [http://www.alexa.com/data/details/traffic_details/malonemasonry.com/malonemasonry.com/](http://www.alexa.com/data/details/traffic_details/malonemasonry.com/malonemasonry.com/) 看到这个 Go Daddy InstantPage®！[http://malonemasonry.com](http://malonemasonry.com)。在 GoDaddy.com 上使用域名免费获取您的域名。这是我的网站的描述。您已访问此页面 2 次。最后访问：2012 年 9 月 12 日

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:27:20.497

发生的事情是 Google 机器人尚未抓取您的新网站。上次去那里时，它看到了您的默认 GoDaddy 页面。

您可以将您的网站提交给 Google 重新抓取，或者等待机器人抓取您的网站并更新列表。我建议您阅读[Google 对流程的说明](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1352276)。

# linq - 如何使用实体框架过滤实体中的所有内容

> ID：12504231
> 
> 赞同：0
> 
> 时间：2012-09-19T23:24:32.513
> 
> 标签：linq, entity-framework, orm, entity

我正在使用 VS2010、VB.NET 和实体框架。

我的应用程序中有一个文本框，您可以在其中通过输入他的姓名、身份证号或姓氏来搜索一个人。显然我在数据库中有一个名为 PERSON 的表，我该如何从数据库中检索与搜索匹配的所有人员。

例如，我的数据库中有这两个人：

**人 1.**
姓名：Samantha
姓氏：Randf
ID：702020406

**人 2**
姓名：Eric
姓氏：Salas
ID：405670233

如果一个人在搜索文本字段中输入字母**“s”** ......两个人都应该从数据库中检索，因为名字中的人 1 和姓氏中的人 2 重合。这是一个全球搜索，你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:22:45.903

您可以使用 Contains() 方法来匹配搜索字符串。以下示例将返回名字或姓氏中任何位置包含“s”的人。

```
context.Persons.Where(p => p.Name.ToLower().Contains("s") || p.LastName.ToLower().Contains("s")); 
```

或者，您可以使用带有 LIKE 运算符的标准 SQL 语句并使用`context.ExecuteStoreQuery()`函数执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:51:49.330

```
context.Persons.Where(p => p.Name.Contains("s") || p.LastName.Contains("s")) 
```

# jquery - jQuery 插件样板

> ID：12504235
> 
> 赞同：0
> 
> 时间：2012-09-19T23:24:42.623
> 
> 标签：jquery, methods, boilerplate

我正在使用 jquery 样板 () 并且无法通过我的不同方法访问我的选项。

例如

```
Plugin.prototype = {
    init: function()
    {
        console.log(this.options); // This output my options

        $(this.element).on('mouseenter', this.enter);
        $(this.element).on('mouseleave', this.leave);
        $(this.element).on('click', this.click);
    },
    enter: function(e)
    {
        console.log(this.options); // This output 'undefined'
    }
} 
```

我试图在我的输入方法中访问我的选项，但没有成功。

有人可以帮我弄清楚为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:27:43.827

`this`在处理程序中是您单击的元素。

如果您想保留您的原始文件`this`，请调用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)。

# web-services - 在@Endpoint Spring WS 1.5 中访问应用程序上下文

> ID：12504236
> 
> 赞同：0
> 
> 时间：2012-09-19T23:24:46.010
> 
> 标签：web-services, spring, spring-mvc, spring-ws

我想从我的端点处理程序方法中访问我在 /WEB-INF/springws-servlet.xml 中定义的 bean。目前我正在诉诸如下图。是否有更好的方法来访问上下文以获取端点内的 bean。

```
ApplicationContext ctx = new FileSystemXmlApplicationContext("webapp/WEB-INF/springws-servlet.xml");

BeanType mybean = (BeanType) ctx.getBean("mybean"); 
```

jaxb2marshaller 也是如此。我在 springws-servlet.xml 中设置了它。如何在我的端点中访问它而不是做

```
JAXBContext jc = JAXBContext.newInstance("com.test.mypackage");
Marshaller m = jc.createMarshaller(); 
```

下面是我的 webapp/WEB-INF/springws-servlet.xmlwebapp/WEB-INF/springws-servlet.xml

```
 <bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
    <constructor-arg ref="jaxbmarshaller"/>
  </bean>

  <bean id="endpointMapping" class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping"/>

  <bean id="jaxbmarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>org.hr_xml._3.SyncHRMasterDataType</value>
            <value>org.openapplications.oagis._9.ConfirmBODType</value>
        </list>
    </property>
  </bean>

  <bean id="mybean" class="com.test.package">
    <property name="releaseID" value="1"/>
  </bean> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:24:33.650

您应该只在端点内自动装配您的依赖项：

```
class MyEndPoint{

  @Autowired MyBean mybean
..
} 
```

# php - 即使为真，php if 语句也不会执行

> ID：12504237
> 
> 赞同：2
> 
> 时间：2012-09-19T23:24:59.127
> 
> 标签：php, if-statement

如果不使用 php，我想比较两个密码以确保它们匹配并重定向。我已经编写了这段代码，但是即使密码不匹配，if 语句中的代码也不会执行。

```
<?php 
include 'includes/dbcnx.php';
$username = $_POST['username'];
$password = $_POST['password'];
$pass2 = $_POST['pass2'];
$email = $_POST['email'];

if($password != $pass2)
    header('Location: register_form.php');
if(strlen($username)>30)
    header('Location: register_form.php?error=1&usrlen=1');

$username = mysql_real_escape_string($username);
$email = mysql_real_escape_string($email);
$salt = createSalt();
$hash = hash('sha256',$salt.$hash);
mysql_select_db("sealion");
$query = "INSERT INTO users (username, password, salt, email)
        VALUES ('$username','$hash','$salt','$email');";
mysql_query($query);
header('Location: index.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:27:28.537

在`header`重定向命令之后，您需要`exit;`否则代码将继续运行，给出重复的标头命令 - 您发送的最后一个是起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:28:13.387

The code *does* execute, but a `header()` will not stop the rest of the code being executed on it's own:

```
if($password != $pass2)
{
    header('Location: register_form.php');
    exit;
} 
```

On that note, your code might be easier to read if you put the entire suite of operations inside the conditional statement.

```
if($password != $pass2)
{
    header('Location: register_form.php');
}
else if(strlen($username)>30)
{
    header('Location: register_form.php?error=1&usrlen=1');
}
else
{
    // Do your updates here...
} 
```

This would make your code easier to read by the next chap (or if you come back to in in six months time) - and would also make it impossible for multiple actions to happen.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:27:21.780

`Location`您在脚本末尾再次更改标题：

```
if(strlen($username)>30)
    header('Location: register_form.php?error=1&usrlen=1');
/* ... */
header('Location: index.php'); 
```

我的猜测是该`if`块正在正确执行，但`header()`第二次调用该函数正在更改标题。尝试`if-else`改用：

```
if(strlen($username)>30) {
    header('Location: register_form.php?error=1&usrlen=1');
}
else {
    $username = mysql_real_escape_string($username);
    $email = mysql_real_escape_string($email);
    $salt = createSalt();
    $hash = hash('sha256',$salt.$hash);
    mysql_select_db("sealion");
    $query = "INSERT INTO users (username, password, salt, email)
            VALUES ('$username','$hash','$salt','$email');";
    mysql_query($query);
    header('Location: index.php');
} 
```

# sublimetext2 - Sublime Text 2 在自动模式下构建系统选择优先级

> ID：12504238
> 
> 赞同：0
> 
> 时间：2012-09-19T23:24:59.687
> 
> 标签：sublimetext2

当创建 2 个或更多时，Sublime Text 2 如何选择使用哪个构建系统？例如，我按照所示顺序安装了 Python 3 以及使用 Python 2.7 的 wxPython 2.8。我添加了一个新的构建系统，发现它位于 \Data\Packages\User 中。这些是创建的构建系统的内容：

```
{
    "cmd": ["C:\\python27\\python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

它们在工具->构建系统中出现的顺序是：（从上到下）Python wxPython

我想我想要完成的是默认使用 Python 3，但允许自己为包含 wxPython 的项目选择 2.7。看起来很合理，但可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:47:08.703

对于具有相同选择器的构建系统（在这种情况下`source.python`），Sublime Text 似乎按照它们被导入的顺序（即字母顺序）覆盖。

有点 hack，但是如果您的构建文件以`wxPython.sublime-build`2.7 和`Python.sublime-build`3 命名，那么要将自动构建优先级赋予 3，您可以重命名前者，`!wxPython.sublime-build`以便首先导入并覆盖它。

# python - 如何处理重复事件中的 DST 和 TZ？

> ID：12504247
> 
> 赞同：13
> 
> 时间：2012-09-19T23:25:38.100
> 
> 标签：python, datetime, pytz, rrule, python-dateutil

dateutil rrule 是否支持 DST 和 TZ？需要类似于 iCalendar RRULE 的东西。

如果不是 - 如何解决这个问题（安排重复事件和 DST 偏移更改）

进口

```
>>> from django.utils import timezone
>>> import pytz
>>> from datetime import timedelta
>>> from dateutil import rrule
>>> now = timezone.now()
>>> pl = pytz.timezone("Europe/Warsaw") 
```

timedelta 的问题（需要具有相同的本地时间，但 DST 偏移量不同）：

```
>>> pl.normalize(now)
datetime.datetime(2012, 9, 20, 1, 16, 58, 226000, tzinfo=<DstTzInfo 'Europe/Warsaw' CEST+2:00:00 DST>)    
>>> pl.normalize(now+timedelta(days=180))
datetime.datetime(2013, 3, 19, 0, 16, 58, 226000, tzinfo=<DstTzInfo 'Europe/Warsaw' CET+1:00:00 STD>) 
```

rrule 的问题（需要在每次发生的每个本地小时都相同）：

```
>>> r = rrule.rrule(3,dtstart=now,interval=180,count=2)
>>> pl.normalize(r[0])
datetime.datetime(2012, 9, 20, 1, 16, 58, tzinfo=<DstTzInfo 'Europe/Warsaw' CEST+2:00:00 DST>)
>>> pl.normalize(r[1])
datetime.datetime(2013, 3, 19, 0, 16, 58, tzinfo=<DstTzInfo 'Europe/Warsaw' CET+1:00:00 STD>) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T09:24:51.210

@asdf：我无法在评论中添加代码，所以我需要将其发布为答案：

恐怕有了你的解决方案，我总是会丢失 DST 信息，因此半年的重复时间将是 1 小时的休息时间。

根据您的回答，我发现这可能是正确的解决方案：

```
>>> from datetime import datetime
>>> import pytz
>>> from dateutil import rrule
>>> # this is raw data I get from the DB, according to django docs I store it in UTC
>>> raw = datetime.utcnow().replace(tzinfo=pytz.UTC)
>>> # in addition I need to store the timezone so I can do dst the calculations
>>> tz = pytz.timezone("Europe/Warsaw")
>>> # this means that the actual local time would be
>>> local = raw.astimezone(tz)
>>> # but rrule doesn't take into account DST and local time, so I must convert aware datetime to naive
>>> naive = local.replace(tzinfo=None)
>>> # standard rrule
>>> r = rrule.rrule(rrule.DAILY,interval=180,count=10,dtstart=naive)
>>> for dt in r:
>>>     # now we must get back to aware datetime - since we are using naive (local) datetime, 
        # we must convert it back to local timezone
...     print tz.localize(dt) 
```

这就是为什么我认为您的解决方案可能会失败：

```
>>> from datetime import datetime
>>> from dateutil import rrule
>>> import pytz
>>> now = datetime.utcnow()
>>> pl = pytz.timezone("Europe/Warsaw")
>>> r = rrule.rrule(rrule.DAILY, dtstart=now, interval=180, count=2)
>>> now
datetime.datetime(2012, 9, 21, 9, 21, 57, 900000)
>>> for dt in r:
...     local_dt = dt.replace(tzinfo=pytz.UTC).astimezone(pl)
...     print local_dt - local_dt.dst()
...     
2012-09-21 10:21:57+02:00
2013-03-20 10:21:57+01:00
>>> # so what is the actual local time we store in the DB ?
>>> now.replace(tzinfo=pytz.UTC).astimezone(pl)
datetime.datetime(2012, 9, 21, 11, 21, 57, 900000, tzinfo=<DstTzInfo 'Europe/Warsaw' CEST+2:00:00 DST>) 
```

如您所见，rrule 结果与我们存储在数据库中的真实数据之间存在 1 小时的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:46:04.327

请注意，根据您的 USE_TZ 设置，django.utils.timezone.now() 返回的内容可以是天真或有意识的日期时间。您应该在内部用于计算的内容（例如，`now`您提供给 rrule.rrule 的内容）是基于 UTC 的日期时间。它可以是一个偏移感知的（即。`datetime.now(pytz.UTC)`），或一个幼稚的（即。`datetime.utcnow()`）。后者似乎更适合存储（请参阅[此博客文章](http://lucumr.pocoo.org/2011/7/15/eppur-si-muove/)）。

现在， rrule.rrule 处理时区，这就是为什么您观察 rrule 产生的 CEST 到 CET 变化的原因。但是，如果您想要始终获得相同的时间（例如，每天凌晨 0 点，无论是否为 DST），那么您实际上想要“忽略”更改。这样做的一种方法是这样做`dt = dt - dt.dst()`，如果`dt`是一个有意识的日期时间。

您可以这样做：

```
from datetime import datetime
from dateutil import rrule
import pytz
now = datetime.utcnow()
pl = pytz.timezone("Europe/Warsaw")
r = rrule.rrule(rrule.DAILY, dtstart=now, interval=180, count=2)

# will yield naive datetimes, assumed UTC
for dt in r:
    # convert from naive-UTC to aware-local
    local_dt = dt.replace(tzinfo=pytz.UTC).astimezone(pl)
    # account for the dst difference
    print local_dt - local_dt.dst() 
```

这会打印两个日期时间，每个日期时间都在不同的时区（嗯，不同的 DST 设置），都代表相同的挂钟时间。如果您要处理有意识的UTC-datetimes 而不是像示例中那样的naive-assumed-UTC，您只需跳过 .replace 部分。可以在[此处](http://taaviburns.ca/presentations/what_you_need_to_know_about_datetimes/)找到有关这些转换的快速备忘单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:56:46.377

是的，关键是你永远不应该存储本地时间。存储 UTC 并按需转换为本地时间（即在每个请求的基础上，使用请求数据，如 Accept-Language 标头，以了解您应该使用什么 tz）。

What you're doing is you're using a localized datetime for calculations (ie. `rrule.rrule()`). This is suboptimal, as you need to know the target timezone to do that, so this can be done per request only, as opposed to precalculating the rrule realizations. That's why you should use UTC internally (ie. to precalculate the datetimes) and then convert them prior to sending to the user. In this case, only the conversion would have to be done after receiving the request (that is, when the target timezone is known).

# c# - 为什么当我从 nuget 安装 Silverlight 工具包时找不到 System.Windows.Controls.Toolkit.Internals？

> ID：12504254
> 
> 赞同：3
> 
> 时间：2012-09-19T23:26:35.240
> 
> 标签：c#, silverlight, nuget, silverlight-toolkit, nuget-package

我已经从 Nuget 安装了 Silverlight Toolkit，但是当我尝试运行该项目时，它会抛出一个错误，告诉我：

> {System.IO.FileNotFoundException：无法加载文件或程序集'System.Windows.Controls.Toolkit.Internals，Version=4.0.5.0，Culture=neutral，PublicKeyToken=2c5c654d367bf4a7'或其依赖项之一。该系统找不到指定的文件。文件名：'System.Windows.Controls.Toolkit.Internals，版本=4.0.5.0，Culture=neutral，PublicKeyToken=2c5c654d367bf4a7'}

所以，我在我的项目中添加了这个程序集，也给我带来了错误。

我开始考虑是否必须修改 nuget 包或类似的东西。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:10:11.740

无论出于何种原因，NuGet 包中`System.Windows.Controls.Toolkit.Internals.dll`都缺少。`Silverlight Toolkit Core`我最终下载了工具包 zip 存档（[CodePlex 上的 Silverlight 发布页面](http://silverlight.codeplex.com/releases)），在本地提取程序集，并将对它的引用添加到我的 Silverlight 项目中。在那之后，一切都很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:28:22.297

我建议不要使用 Silverlight 工具包的官方 nuget 版本。在撰写本文时，nuget 是第 4 版。官方 silverlight 工具包有 2 个更新版本。最容易使用 2011 年 12 月的二进制版本，而不是最近的 2012 年 5 月（手动编译很棘手）。silverlight 工具包确实看起来放弃了。无法使用和破坏释放。没有快速入门教程等。这是基于我对工具包的痛苦经历。

# azure - 拒绝访问 azure 上的特定文件夹

> ID：12504255
> 
> 赞同：1
> 
> 时间：2012-09-19T23:26:51.547
> 
> 标签：azure, azure-web-app-service

我最近将一个相当大的网站迁移到 Azure。

我知道这不是最佳做法，但该站点配置为将机密文件存储在内容文件夹中，该文件夹在 IIS 中配置为全部拒绝。

但是，当我尝试在所述文件夹中添加 web.config 时，Azure 在直接访问文件时会忽略拒绝条目。我尝试了不同的配置组合，没有给出任何结果。

```
 <system.webServer>
  <security>
      <authorization>
          <remove users="*" roles="" verbs="" />
      </authorization>
  </security>
</system.webServer> 
```

和

```
<security>
 <ipSecurity allowUnlisted="false">            
 </ipSecurity>
</security> 
```

但是，如果我将无效的 web.config 上传到该文件夹​​，该站点将引发错误并且不提供任何服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:41:04.410

您将不得不将这些文件从实例中移出并将它们放在其他地方（blob 存储是一个不错的选择）。

您正在做的事情在网络农场场景中根本无法正常工作。如果没有一些真正疯狂的解决方法，将文件存储在网站的单个实例上对于网络农场来说是不可行的。尽管从技术上讲，您可以使用单个持久性 VM 来执行此操作，但您不会在单个实例上运行一个非常可扩展的网站。

将文件复制到 blob 存储中，并使用首先检查安全性然后流式传输和/或为存储中的 blob 生成 SAS 签名的方法替换对它们的直接调用。

# node.js - 用于流处理图像的 Node.js 库

> ID：12504259
> 
> 赞同：2
> 
> 时间：2012-09-19T23:27:11.160
> 
> 标签：node.js, image-processing, stream

我正在构建一个处理图像上传的应用程序，当图像上传时，我想制作 3 个缩略图，并将它们上传到 Amazon S3。

现在我想知道是否有库可以在图像上传、处理并最终以异步流程流式传输时执行此操作。

解决这个问题最合乎逻辑的方法是将文件上传到服务器，一旦上传完成，创建3个缩略图，然后将它们全部上传到Amazon S3并删除上传的文件。

但我不希望任何磁盘 I/O 参与，也不希望存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:21:48.197

[为 nodejs](http://aheckmann.github.com/gm/)尝试gm lib 。

在这种情况下，您应先将原始图像下载到服务器。然后您可以将其发送给 gm 以异步创建所有缩略图。

作为输入 gm 接受可读流，因此无需先保存图像。它也返回流，因此您可以直接将其发送到 S3。

Gm 非常快速且易于使用。它取决于 imagemagick 或 graphicsmagick 库（我的选择是 graphicsmagick，因为它更轻更快）。

不幸的是，gm 在处理图像之前会将图像保存在磁盘上，尽管您不会注意到它正在查看您的代码。但它自己处理所有清理工作，所以你不必关心它。

我认为您不会找到完全没有任何磁盘 I/O 的 nodejs 图像处理库。

# macos - Zookeeper 服务器启动，但不保持启动状态

> ID：12504271
> 
> 赞同：9
> 
> 时间：2012-09-19T23:28:21.297
> 
> 标签：macos, apache-zookeeper

使用命令启动服务器时：

`zkServer start`

我得到以下回复：

`JMX enabled by default Using config: /usr/local/etc/zookeeper/zoo.cfg Starting zookeeper ... STARTED`

太棒了，对吧？不，zookeeper 不会保持启动状态......当我`zkServer start`再次运行时，我会得到相同的确切响应......永远。再次运行启动命令时，我应该得到这个：

`MX enabled by default Using config: /usr/local/etc/zookeeper/zoo.cfg Starting zookeeper ... STARTED sh-3.2# zkServer start JMX enabled by default Using config: /usr/local/etc/zookeeper/zoo.cfg Starting zookeeper ... already running as process 8086.`

我检查了活动监视器，服务也没有运行，我猜它只是显示为“Java”。

要安装/配置 zookeeper，我这样做了：

*   冲泡安装动物园管理员
*   sudo easy_install kazoo
*   cp /usr/local/etc/zookeeper/zoo_sample.cfg /usr/local/etc/zookeeper/zoo.cfg
*   zkServer 启动

做相同步骤的同事没有这个问题....有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:31:11.537

我从源代码构建了 zookeeper 并且它可以工作，所以有时必须用自制的 zookeeper 进行一些处理。一个奇怪的错误。

# .net - Can I serialize an object (containing members: Dictionary, List... etc) in Mono and deserialize it in MS.NET or vice versa by using protobuf-net?

> ID：12504275
> 
> 赞同：4
> 
> 时间：2012-09-19T23:29:06.973
> 
> 标签：.net, mono, unity3d, protobuf-net, binaryformatter

I have a server running on MS.NET and a client on Mono (this is a Unity3D engine) and when i try to BinaryFormatter().Deserialize an object like this:

```
 [Serializable]   
    public class Simulator  
    {
        public IDictionary<int, Task> tasks = new Dictionary<int, Task>(); 
```

the client side cannot found/load types: Dictionary, List... The same "client code" running under MS.NET works good i.e. does not have any exceptions during deserialization.

As i read from [http://www.mono-project.com/FAQ:_Technical#Compatibility](http://www.mono-project.com/FAQ:_Technical#Compatibility) this is a common problem:

*"If you are serializing your own classes, there is no problem, since you have control over the assemblies and classes being used for serialization. However, if you are serializing objects from the framework, serialization compatibility is not guaranteed, since the internal structure of those objects may be different. This compatibility is not even guaranteed between different MS.NET versions or Mono versions."*

Does ProtoBuf-Net help to avoid/resolve this serialization/deserialization problem ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:43:36.907

是的，像 protobuf-net 这样的外部序列化工具可以解决这个问题——事实上，一旦你在平台之间进行序列化（C++ 到 java 到 python 到 .net），框架版本就不再那么重要了。

所以是的：在 .NET 上加载时，在单声道/统一的 protobuf-net 中序列化的数据完全兼容。但是，应该注意的是`BinaryFormatter`，protobuf-net*并不是*直接的 1:1 等价物——每个都有略微不同的特性和行为。例如，protobuf-net 不会遍历事件/委托，并且通常不能很好地处理仅称为“对象”的事物。但是，完全支持字典和列表等关键/常见场景。

# actionscript-3 - Flex 标注容器列表项选择问题 - 禁用自动弹出

> ID：12504281
> 
> 赞同：0
> 
> 时间：2012-09-19T23:30:05.777
> 
> 标签：actionscript-3, apache-flex, containers, flash-builder, callout

我在 Flash 中遇到 CalloutButtons 和容器的问题。我已经成功创建了一个标注按钮，它显示了一个可滚动的项目列表。选择一个项目后，相应的图像应显示在主视图中。

但由于某种原因，似乎出现了 2 个标注 - 当我向下滚动菜单时，一个实例关闭并传递数据（这是以前存储的数据，因为这次还没有选择数据）。 ...当我确实选择了一个项目时，列表会关闭，但不会再次调用 closeHandler。

**问题似乎是当单击 calloutButton 时，Flex 会自动创建一个标注容器。我怎样才能禁用它？**

或者换成我的...

谢谢

编辑 - 这是我的代码：

**PrimaryCallout.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Callout xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:weapons="services.weapons.*">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import assets.dataFiles.Loadout;
            import spark.events.IndexChangeEvent;

            protected function list_creationCompleteHandler(event:FlexEvent):void
            {
                getDataResult.token = weapons.getData();
            }

            protected function list_ChangeHandler(event:IndexChangeEvent):void
            {   
                close(false);
                Loadout.primaryImage    = list.selectedItem.ImgID;
                Loadout.primaryTitle    = list.selectedItem.WeapName;

            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:CallResponder id="getDataResult"/>
        <weapons:Weapons id="weapons"/>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

        <s:List id="list" width="240" height="100%" change="list_ChangeHandler(event)"
                creationComplete="list_creationCompleteHandler(event)"
                labelField="WeapName">
            <s:AsyncListView list="{getDataResult.lastResult}"/>
        </s:List>
</s:Callout> 
```

**加载视图.mxml**

```
 <?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:weapons="services.weapons.*"
        xmlns:callouts="views.callouts.*"
        title="Loadout">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            import spark.events.DropDownEvent;

            import assets.dataFiles.Loadout;
            import views.callouts.PrimaryCallout;

            protected function calloutbutton1_openHandler(event:MouseEvent):void
            {
                var primaryCallout:PrimaryCallout = new PrimaryCallout();

                primaryCallout.open(primary, true);
            }

            protected function list_creationCompleteHandler(event:FlexEvent):void
            {
                getDataResult.token = weapons.getData();
                //weaponImage.source = "assets/weapons/{Loadout.primaryImage}";
            }

            protected function primary_closeHandler(event:DropDownEvent):void
            {
                //primary.label = Loadout.primaryTitle;
                weaponImage.source      = "assets/weapons/"+ (Loadout.primaryImage);

            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:CallResponder id="getDataResult"/>
        <weapons:Weapons id="weapons"/>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:Image x="0" y="0" width="100%" height="100%" scaleMode="stretch" smooth="true"
             source="assets/06iOS.jpg"/>
    <s:CalloutButton id="primary" x="10" y="10" height="56" label="Primary" fontStyle="normal"
                     fontWeight="normal" lineThrough="false"
                     click="calloutbutton1_openHandler(event)" textDecoration="none" close="primary_closeHandler(event)"/>
    <s:Image id="weaponImage" x="10" y="74" width="240" height="105"
             source="assets/weapons/{data.ImgID}"/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:40:40.867

感谢您的代码。您的两个 Callout 实例的原因是您使用了`CalloutButton`一个单独的`Callout`. 鉴于`CalloutButton`创建自己的实例，`Callout`你最终会同时拥有`CalloutButton`'s default`Callout`和你自己创建的实例。

您需要更改的是使用您`PrimaryCallout`的通用按钮（这将需要您自己处理打开/关闭操作）或使用`CalloutButton`'s 默认值`Callout`。

# ruby - 如何以编程方式访问 i18n 翻译文件中的字段？（使用 r18n 和 Sinatra）

> ID：12504283
> 
> 赞同：0
> 
> 时间：2012-09-19T23:30:28.673
> 
> 标签：ruby, internationalization, sinatra

我正在`Sinatra`使用国际化系统开发一个基于网络的应用程序`Sinatra r18n`。

我的`./i18n/en.yml` `r18n`翻译文件包含以下内容：

```
season:
  summer:  !!pl
    0: no Summers
    1: one Summer
    n: "%1 Summers"
  autumn: !!pl
    0: no Autumns
    1: one Autumn
    n: "%1 Autumns"
  winter: !!pl
    0: no Winters
    1: one Winter
    n: "%1 Winters"
  spring: !!pl
    0: no Springs
    1: one Spring
    n: "%1 Springs" 
```

在我的代码中，我可以轻松访问`"Total: #{t.season.summer season_count}."`，但在尝试以编程方式访问我的季节名称时遇到了麻烦。

`s = t.season[season_name]`返回一个[`Translation`](https://github.com/ai/r18n/blob/master/r18n-core/lib/r18n-core/translation.rb)对象。

但是，我查看[了 a 的来源，`Translation`](https://github.com/ai/r18n/blob/master/r18n-core/lib/r18n-core/translation.rb)但看不到我从中生成翻译文本`Translation`和数字的明显方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:40:06.817

你得到了翻译，因为你没有将 count 发送到 season[season_name]，所以 R18n 返回 subhash。只需使用：

```
s = t.season[season_name, season_count] 
```

# c# - Get original URL in a callback

> ID：12504288
> 
> 赞同：0
> 
> 时间：2012-09-19T23:31:10.967
> 
> 标签：c#, asp.net-mvc-3

Assuming that I'm talking about an ASP.NET MVC 3 application, the scenario is something like

1.  I browse to the URL `http://localhost:60088/Example?param1=test123` that returns a view
2.  Next I click a button that triggers an Ajax call to the URL `http://localhost:60088/Example/DoSomethign` that returns a JSON string

So, my dilemma is that in the `DoSomething` controller action I need to get the `param1` parameter that was passed in the first step.

My first take is to do something like this:

```
public ActionResult DoSomething()
{
    ...

    Uri baseUrl = this.Request.UrlReferrer;
    // Somehow extract the parameter from baseUrl

    ...
} 
```

But I'm not sure if that's a good idea at all...

**Questions:**

1.  Is safe to assume that `this.Request.UrlReferrer` will **always** have the URL that was called in a non-callback way (even if I made several more callbaks after the `_DoSomething_` first callback)?

2.  Is there a better way to accomplish waht I'm trying to do?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:36:51.130

不; 您不能假设引荐来源网址将始终存在。

相反，您应该将原始 URL 作为参数包含在 AJAX 请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:39:13.683

在返回视图的操作中，您可以将 a 添加`param1`到 a`ViewBag`中，如下所示：

```
public ActionResult Example(string param1)
{
    ViewBag.Param1 = param1;
    return View();
} 
```

然后在 ajax 调用中，只需传递`ViewBag.Param1`作为路由值。它有时可能是空的，但这不应该伤害任何东西。

# asp.net-mvc - The name does not exist in current context

> ID：12504290
> 
> 赞同：1
> 
> 时间：2012-09-19T23:31:26.550
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, telerik-mvc, telerik-open-access

Im new to ASP.NET MVC3\. I got stuck with this error, while I was doing the same thing as here in these videos:

[http://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-model?seriesID=1529](http://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-model?seriesID=1529) and

[http://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-controllers](http://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-controllers)

(i looked other similar questions on stack but didnt find the solution)

my code is:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace testbaza.Controllers
{
    public class KorController : Controller
    {

        private EntitiesModel dbContext;
        protected override void Initialize(System.Web.Routing.RequestContext requestContext)
        {
            base.Initialize(requestContext);
            if (this.Session[ContextModule.Content_KEY] != null)
            {
                this.dbContext = this.Session[ContextModule.Content_KEY] as EntitiesModel;
            }
            else {
                throw new Telerik.OpenAccess.Exceptions.NoSuchObjectException("Cannot find EntitiesModel", null);
            }
        } 
```

and im getting this error: **The name 'ContextModule' does not exist in the current context.**

This is mine further code which i did before:

I added this in project\Web.config(same as in video 1):

```
 <httpModules>
      <add name="ContextModule" type="testbaza.ContextModule, testbaza"/>
    </httpModules> 
```

I added ASP.NET module called "ContextModule" to \project(same as in video)

This is ContextModule.cs:

```
using System;
using System.Web;

namespace testbaza.Models
{
    public class ContextModule : IHttpModule
    {

        internal const string CONTEXT_KEY = "datacontext";

        public void Dispose()
        {

        }

        public void Init(HttpApplication context)
        {
            context.PostRequestHandlerExecute += new EventHandler(context_PostRequestHandlerExecute);
            context.PreRequestHandlerExecute += new EventHandler(context_PreRequestHandlerExecute);
        }

        private void context_PreRequestHandlerExecute(object sender, EventArgs e)
        {
            if (HttpContext.Current.Session != null)
            {
                HttpContext.Current.Session[CONTEXT_KEY] = new EntitiesModel();
            }
        }

        private void context_PostRequestHandlerExecute(object sender, EventArgs e)
        {
            CommitTransactions();

            DisposeContext();

            ClearSession();

        }

        private void CommitTransactions()
        {
            if (HttpContext.Current.Session == null)
            {
                return;
            }

            EntitiesModel dbContext =
                HttpContext.Current.Session[CONTEXT_KEY] as EntitiesModel;
            if (dbContext != null)
            {

                dbContext.SaveChanges();
            }
        }

        private void DisposeContext()
        {
            if (HttpContext.Current.Session == null)
            {
                return;
            }

            EntitiesModel dbContext =
                HttpContext.Current.Session[CONTEXT_KEY] as EntitiesModel;
            if (dbContext != null)
            {

                dbContext.Dispose();
            }
        }

        private void ClearSession()
        {

            if (HttpContext.Current.Session == null)
            {
                HttpContext.Current.Session.Remove(CONTEXT_KEY);
            }
        }
    }
} 
```

Can anyone help me with the problem? Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:04:58.877

在您的控制器中添加以下内容：

```
using testbaza.Models; 
```

你应该没事。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:38:19.757

该类是在`testbaza.Models`名称空间中定义的，而您的控制器不在其中。
您需要使用`using`语句导入该名称空间。

# ios - 在 iOS 6 中以编程方式打开地图应用

> ID：12504294
> 
> 赞同：159
> 
> 时间：2012-09-19T23:31:57.387
> 
> 标签：ios, objective-c, ios6, mapkit

在 iOS 6 之前，打开这样的 URL 会打开 (Google) Maps 应用程序：

```
NSURL *url = [NSURL URLWithString:@"http://maps.google.com/?q=New+York"];
[[UIApplication sharedApplication] openURL:url]; 
```

现在有了新的 Apple Maps 实施，这只是将 Mobile Safari 打开到 Google Maps。如何使用 iOS 6 完成相同的行为？如何以编程方式打开地图应用程序并让它指向特定的位置/地址/搜索/其他？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-10-15T17:10:35.707

这是Apple的官方方式：

```
// Check for iOS 6
Class mapItemClass = [MKMapItem class];
if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) 
{
    // Create an MKMapItem to pass to the Maps app
    CLLocationCoordinate2D coordinate = 
                CLLocationCoordinate2DMake(16.775, -3.009);
    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate 
                                            addressDictionary:nil];
    MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
    [mapItem setName:@"My Place"];
    // Pass the map item to the Maps app
    [mapItem openInMapsWithLaunchOptions:nil];
} 
```

如果您想获取到该位置的驾驶或步行指示，您可以在数组中包含 a `mapItemForCurrentLocation`，并适当地设置启动选项。`MKMapItem``+openMapsWithItems:launchOptions:`

```
// Check for iOS 6
Class mapItemClass = [MKMapItem class];
if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) 
{
    // Create an MKMapItem to pass to the Maps app
    CLLocationCoordinate2D coordinate = 
                CLLocationCoordinate2DMake(16.775, -3.009);
    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate 
                                            addressDictionary:nil];
    MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
    [mapItem setName:@"My Place"];

    // Set the directions mode to "Walking"
    // Can use MKLaunchOptionsDirectionsModeDriving instead
    NSDictionary *launchOptions = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeWalking};
    // Get the "Current User Location" MKMapItem
    MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];
    // Pass the current location and destination map items to the Maps app
    // Set the direction mode in the launchOptions dictionary
    [MKMapItem openMapsWithItems:@[currentLocationMapItem, mapItem] 
                    launchOptions:launchOptions];
} 
```

`else`您可以在之后的声明中保留您原来的 iOS 5 及更低版本的代码`if`。请注意，如果您颠倒`openMapsWithItems:`数组中项目的顺序，您将获得从坐标*到*当前位置的方向。您可以通过传递一个构造`MKMapItem`的而不是当前的位置地图项来使用它来获取任意两个位置之间的方向。我没试过。

最后，如果您有一个地址（作为一个字符串）需要指示，请使用地理编码器创建一个`MKPlacemark`, 通过`CLPlacemark`.

```
// Check for iOS 6
Class mapItemClass = [MKMapItem class];
if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:@"Piccadilly Circus, London, UK" 
        completionHandler:^(NSArray *placemarks, NSError *error) {

        // Convert the CLPlacemark to an MKPlacemark
        // Note: There's no error checking for a failed geocode
        CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
        MKPlacemark *placemark = [[MKPlacemark alloc]
                                  initWithCoordinate:geocodedPlacemark.location.coordinate
                                  addressDictionary:geocodedPlacemark.addressDictionary];

        // Create a map item for the geocoded address to pass to Maps app
        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
        [mapItem setName:geocodedPlacemark.name];

        // Set the directions mode to "Driving"
        // Can use MKLaunchOptionsDirectionsModeWalking instead
        NSDictionary *launchOptions = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeDriving};

        // Get the "Current User Location" MKMapItem
        MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];

        // Pass the current location and destination map items to the Maps app
        // Set the direction mode in the launchOptions dictionary
        [MKMapItem openMapsWithItems:@[currentLocationMapItem, mapItem] launchOptions:launchOptions];

    }];
} 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-09-19T23:38:26.333

找到了我自己的问题的答案。[Apple在此处](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)记录其地图 URL 格式。看起来您基本上可以替换`maps.google.com`为`maps.apple.com`.

**更新：**事实证明，iOS 6 上的 MobileSafari 也是如此；点击链接以`http://maps.apple.com/?q=...`使用该搜索打开地图应用程序，与`http://maps.google.com/?q=...`以前的版本相同。这有效，并记录在上面链接的页面中。

更新：这回答了我关于 URL 格式的问题。但是 nevan king 的回答[（](https://stackoverflow.com/a/12900617/412107)见下文）是对实际 Maps API 的出色总结。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-09-22T15:05:11.313

最好的方法是调用新的 iOS 6 方法`MKMapItem` `openInMapsWithLaunchOptions:launchOptions`

例子：

```
CLLocationCoordinate2D endingCoord = CLLocationCoordinate2DMake(40.446947, -102.047607);
MKPlacemark *endLocation = [[MKPlacemark alloc] initWithCoordinate:endingCoord addressDictionary:nil];
MKMapItem *endingItem = [[MKMapItem alloc] initWithPlacemark:endLocation];

NSMutableDictionary *launchOptions = [[NSMutableDictionary alloc] init];
[launchOptions setObject:MKLaunchOptionsDirectionsModeDriving forKey:MKLaunchOptionsDirectionsModeKey];

[endingItem openInMapsWithLaunchOptions:launchOptions]; 
```

这将启动从当前位置驾驶的导航。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-19T23:43:48.770

我看到您找到了 maps.apple.com 网址“方案”。这是一个不错的选择，因为它会自动将旧设备重定向到 maps.google.com。但是对于 iOS 6，有一个您可能想要利用的新类：[MKMapItem](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/doc/uid/TP40011746)。

您感兴趣的两种方法：

1.  [-openInMapsWithLaunchOptions:](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/instm/MKMapItem/openInMapsWithLaunchOptions:) - 在 MKMapItem 实例上调用它以在 Maps.app 中打开它
2.  [+openMapsWithItems:launchOptions:](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/clm/MKMapItem/openMapsWithItems:launchOptions:) - 在 MKMapItem 类上调用它以打开 MKMapItem 实例数组。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-12T06:07:43.293

这是一个使用 Swift 完成的 nevan king 解决方案的课程：

```
class func openMapWithCoordinates(theLon:String, theLat:String){

            var coordinate = CLLocationCoordinate2DMake(CLLocationDegrees(theLon), CLLocationDegrees(theLat))

            var placemark:MKPlacemark = MKPlacemark(coordinate: coordinate, addressDictionary:nil)

            var mapItem:MKMapItem = MKMapItem(placemark: placemark)

            mapItem.name = "Target location"

            let launchOptions:NSDictionary = NSDictionary(object: MKLaunchOptionsDirectionsModeDriving, forKey: MKLaunchOptionsDirectionsModeKey)

            var currentLocationMapItem:MKMapItem = MKMapItem.mapItemForCurrentLocation()

            MKMapItem.openMapsWithItems([currentLocationMapItem, mapItem], launchOptions: launchOptions)
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-27T10:46:28.873

我发现使用[http://maps.apple.com?q=](http://maps.apple.com?q=) ... 链接设置会首先在旧设备上打开 safari 浏览器，这很烦人。

因此，对于使用 maps.apple.com 参考打开您的应用程序的 iOS 5 设备，步骤如下所示：

1.  您单击应用程序中的某些内容，它指的是 maps.apple.com 网址
2.  safari 打开链接
3.  maps.apple.com 服务器重定向到 maps.google.com url
4.  maps.google.com url 被解释并打开谷歌地图应用程序。

我认为（非常明显和令人困惑的）步骤 2 和 3 对用户来说很烦人。因此，我检查操作系统版本并在设备上运行 maps.google.com 或 maps.apple.com（分别适用于 ios 5 或 ios 6 操作系统版本）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-01T07:57:18.013

我对这个问题的研究使我得出以下结论：

1.  如果您使用 maps.google.com，那么它将在 Safari 中为每个 ios 打开地图。
2.  如果您使用 maps.apple.com，那么它将在 ios 6 的地图应用程序中打开地图，并且还可以与 ios 5 一起使用，而在 ios 5 中，它会在 safari 中正常打开地图。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-20T16:51:51.653

如果您想改为打开 Google 地图（或作为辅助选项提供），您可以使用[此处](https://developers.google.com/maps/documentation/ios/urlscheme)`comgooglemaps://`记录的`comgooglemaps-x-callback://`URL 方案。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-07-07T10:41:55.073

在启动 url 之前，从 url 中删除任何特殊字符并将空格替换为 +。这将为您省去一些麻烦：

```
 NSString *mapURLStr = [NSString stringWithFormat: @"http://maps.apple.com/?q=%@",@"Limmattalstrasse 170, 8049 Zürich"];

    mapURLStr = [mapURLStr stringByReplacingOccurrencesOfString:@" " withString:@"+"];
    NSURL *url = [NSURL URLWithString:[mapURLStr stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];
    if ([[UIApplication sharedApplication] canOpenURL:url]){
            [[UIApplication sharedApplication] openURL:url];
        } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-11-08T06:40:19.140

```
NSString *address = [NSString stringWithFormat:@"%@ %@ %@ %@"
                             ,[dataDictionary objectForKey:@"practice_address"]
                             ,[dataDictionary objectForKey:@"practice_city"]
                             ,[dataDictionary objectForKey:@"practice_state"]
                             ,[dataDictionary objectForKey:@"practice_zipcode"]];

        NSString *mapAddress = [@"http://maps.apple.com/?q=" stringByAppendingString:[address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        NSLog(@"Map Address %@",mapAddress);

        [objSpineCustomProtocol setUserDefaults:mapAddress :@"webSiteToLoad"];

        [self performSegueWithIdentifier: @"provider_to_web_loader_segue" sender: self]; 
```

//VKJ

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-05-04T20:14:54.747

不使用地图，只是以编程方式使用 UiButton 动作，这对我来说非常有用。

```
// Button triggers the map to be presented.

@IBAction func toMapButton(sender: AnyObject) {

//Empty container for the value

var addressToLinkTo = ""

//Fill the container with an address

self.addressToLinkTo = "http://maps.apple.com/?q=111 Some place drive, Oak Ridge TN 37830"

self.addressToLinkTo = self.addressToLinkTo.stringByAddingPercentEscapesUsingEncoding(NSUTF8StringEncoding)!

let url = NSURL(string: self.addressToLinkTo)
UIApplication.sharedApplication().openURL(url!)

                } 
```

您可以将其中的一些代码分散开来。例如，我将变量作为类级变量，让另一个函数填充它，然后按下按钮时只需获取变量中的内容并清理它以在 URL 中使用。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-09-30T22:43:14.627

根据@PJeremyMalouf 的回答更新到 Swift 4：

```
private func navigateUsingAppleMaps(to coords:CLLocation, locationName: String? = nil) {
    let placemark = MKPlacemark(coordinate: coords.coordinate, addressDictionary:nil)
    let mapItem = MKMapItem(placemark: placemark)
    mapItem.name = locationName
    let launchOptions = [MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving]
    let currentLocationMapItem = MKMapItem.forCurrentLocation()

    MKMapItem.openMaps(with: [currentLocationMapItem, mapItem], launchOptions: launchOptions)
} 
```

# php - PHP: Moving (not copying) referenced arrays across array elements by loops and functions

> ID：12504299
> 
> 赞同：0
> 
> 时间：2012-09-19T23:32:18.280
> 
> 标签：php, arrays, pass-by-reference

I have an ordered array so that each `ref` key is guaranteed to exist among the former elements in the same array. However, the reference might be inside another array in a former element. So I'm using a recursive function to find the appropriate place, but for some reason I can not delete the former element.

*What I can do:* Copy necessary elements to where they belong
*What I can **not** do:* Move these elements across arrays

Here's a pseudo output of the original array.

```
Array
(
    [0] => Array
        (
            [id] => 1
            [ref] => 
            [arr] => Array ()
        )
    [1] => Array
        (
            [id] => 2
            [ref] => 1
            [arr] => Array ()
        )
    [2] => Array
        (
            [id] => 3
            [ref] => 1
            [arr] => Array ()
        )
    [3] => Array
        (
            [id] => 4
            [ref] => 3
            [arr] => Array ()

        )
) 
```

Here's my code.

```
$myArr = array(/* above elements gathered from the DB */);
foreach ($myArr as &$arr) {
    if (!is_null($arr['ref'])) relocate($arr, $arr['ref']);
}
unset($arr);

function relocate(&$node, $id, &$arr=NULL) {
    global $myArr;
    if (is_null($arr)) $arr = &$myArr;
    foreach ($arr as &$arr1) {
        if ($arr1['id'] == $id) {
            array_push($arr1['arr'], &$node);
            return;
        }
    }
    unset($arr1); // not sure if this is necessary
    if (!empty($arr['arr'])) relocate(&$node, $id, &$arr['arr']);
} 
```

And the desired output:

```
Array
(
    [0] => Array
        (
            [id] => 1
            [ref] => 
            [arr] => Array
                (
                    [0] => Array
                        (
                            [id] => 2
                            [ref] => 1
                            [arr] => Array ()
                        )
                    [1] => Array
                        (
                            [id] => 3
                            [ref] => 1
                            [arr] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 4
                                            [ref] => 3
                                            [arr] => Array ()
                                        )
                                )
                        )
                )
        )
) 
```

What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:48:21.797

我认为通过引用移动是一种想象的方法。我最终使用了以下代码。

```
$myArr = array(/* elements gathered from the DB */);
foreach ($myArr as $arr) {
    if (!is_null($arr['ref'])) {
        relocate($arr, $arr['ref']);
        unset($myArr[array_search($arr,$myArr)]);
    }
}

function relocate($node, $id, &$arr=NULL) {
    global $myArr;
    if (is_null($arr)) $arr = &$myArr;
    foreach ($arr as &$arr1) {
        if ($arr1['id'] == $id) {
            return array_push($arr1['arr'], $node);
        }
        if (!empty($arr1['arr'])) relocate($node, $id, &$arr1['arr']);
    }
} 
```

# c++ - Getting the full path of a running PID with C/C++ without using the system function (Linux)

> ID：12504301
> 
> 赞同：1
> 
> 时间：2012-09-19T23:32:54.740
> 
> 标签：c++, c, linux, process, pid

So I want to be able to get the full path of a running process (which I have the process ID for) without using any commands on the command line. Anyone has any ideas on how to do this?

I do have the PID, is there any function that by passing the PID can return the full path of that process as a char *?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T23:42:35.563

用于`readlink("/proc/<pid>/exe", buf, bufsize)`获取`<pid>`的可执行文件的路径。这适用于 Linux，只要`procfs`可用（通常是）。

示例用法：

```
int get_exe_for_pid(pid_t pid, char *buf, size_t bufsize) {
    char path[32];
    sprintf(path, "/proc/%d/exe", pid);
    return readlink(path, buf, bufsize);
} 
```

返回`-1`失败并设置`errno`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T17:45:59.720

[男人 3 真实路径](http://linux.die.net/man/3/realpath)

这会扩展所有符号链接和目录相关标记。可悲的是，它是 GNU 特定的，我将它`-std=gnu99`与`printf("%s\n", realpath("/proc/self/exe", NULL))`.

# php - ZF2 - ServiceManager injecting into 84 tables... tedious

> ID：12504302
> 
> 赞同：4
> 
> 时间：2012-09-19T23:33:08.773
> 
> 标签：php, zend-framework2

I originally made another thread about this a couple of months ago in regards to ZF2 injecting into tables with DI during Beta 1 and figured back then that it wasn't really possible. Now ZF2 has been released as version 2.0.0 and ServiceManager is defaulted to instead of DI I guess I have the same question now I'm refactoring.

I've got 84 tables that need the DbAdapter injecting into them and I'm sure there has to be a better way as I'm replicating myself SO much.

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'accountTable' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $table     = new Model\DbTable\AccountTable($dbAdapter);
                return $table;
            },
            'userTable' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $table     = new Model\DbTable\UserTable($dbAdapter);
                return $table;
            },
            // another 82 tables of the above
        )
    )
} 
```

With the EventsManager and ServiceManager I have no idea where I stand in getting my application's instances/resources.

Thanks, Dom

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:50:58.577

有了很多这样的注入，你最好创建一个服务管理器初始化器，然后实现一个像 DbAdapterAwareInterface 这样的接口。如果您想了解这个想法的实际效果，请查看 zf2 代码库中的 EventManagerAwareInterface。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:50:54.627

我编写了一个名为[DiWrapper](https://github.com/aimfeld/di-wrapper)的 ZF2 模块，您可以使用它来自动生成和自动更新这种工厂代码。您必须将`Zend\Db\Adapter\Adapter`DiWrapper 作为共享实例提供。然后您可以使用 ServiceManager 或 DiWrapper 来获取您的表类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T03:36:25.263

它真的可以。php5.3+ 仅注入 *pointers 或“链接”

# objective-c - respondsToSelector fails for appearance proxy

> ID：12504304
> 
> 赞同：20
> 
> 时间：2012-09-19T23:33:28.843
> 
> 标签：objective-c, xcode, ios5, ios6, uiappearance

I’m trying to detect an iOS 6-specific appearance method, by running `respondsToSelector` on the `[UIBarButtonItem appearance]`. However, it always returns `NO` for me, whatever selector I specify:

```
// Should show NOPE in iOS 5, YEP in iOS 6\. Shows NOPE always
NSLog(@"%@", [[UIBarButtonItem appearance] respondsToSelector:@selector(setBackgroundImage:forState:style:barMetrics:)] ? @"YEP" : @"NOPE"); 

// Should show YEP in both iOS 5 and iOS 6\. Shows NOPE always
NSLog(@"%@", [[UIBarButtonItem appearance] respondsToSelector:@selector(setBackgroundImage:forState:barMetrics:)] ? @"YEP" : @"NOPE"); 
```

Actually using those methods works fine on their respective versions of iOS, but I can’t seem to detect which one is available to me. So how do I properly do that?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-19T23:42:57.100

不要检查外观代理。你永远不能依赖它，因为它是一个代理。相反，直接检查具有新方法的项目，在这种情况下，`UIBarButtonItem`：

```
BOOL hasNewMethod = [UIBarButtonItem instancesRespondToSelector:@selector(setBackgroundImage:forState:style:barMetrics:)];
if( hasNewMethod )
  NSLog(@"Running iOS 6 with new method");
else
  NSLog(@"Current OS doesn't support method..."); 
```

# java - 餐厅程序教程

> ID：12504306
> 
> 赞同：0
> 
> 时间：2012-09-19T23:34:15.127
> 
> 标签：java, android

我继续学习老师给我的 Android 教程。该程序的想法是输入餐厅名称、地址和餐厅类型，并创建一个显示这些内容的界面。

我相信我完全复制了代码。但是，我收到一个错误：

```
"The method getType() is undefined for the type Restaurant". 
```

我不知道这意味着什么以及如何解决它。

Eclipse 给我的建议是“在餐厅类型中创建方法 getType()”，但是当我这样做时，在运行我的程序、输入我的餐厅的详细信息并保存它们时，我得到一个空指针异常。

所以我的问题是：

*   错误是什么意思？
*   我如何解决它？

下面是我的主类Lunchlist.java：

```
@SuppressLint({ "ParserError", "ParserError" }) 
public class LunchList extends Activity {
    List<Restaurant> model=new ArrayList<Restaurant>();
    ArrayAdapter<Restaurant> adapter=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lunch_list);

        Button save=(Button)findViewById(R.id.btnSave);

        save.setOnClickListener(onSave);

        ListView list=(ListView)findViewById(R.id.restaurants);

        adapter=new RestaurantAdapter();
        list.setAdapter(adapter);
    }

   private View.OnClickListener onSave=new View.OnClickListener() {
        public void onClick(View v){
            Restaurant r=new Restaurant();
            EditText name=(EditText) findViewById(R.id.name);
            EditText address=(EditText) findViewById(R.id.address);

            r.setName(name.getText().toString());
            r.setAddress(address.getText().toString());

            RadioGroup types=(RadioGroup)findViewById(R.id.types);

            switch (types.getCheckedRadioButtonId()){
            case R.id.sit_down:
                r.setType("sit_down");
                break;
            case R.id.take_out:
                r.setType("take_out");
                break;
            case R.id.delivery:
                r.setType("delivery");
                break;

            }
            adapter.add(r);
        }
        };

        class RestaurantAdapter extends ArrayAdapter<Restaurant> {
            RestaurantAdapter(){
                super(LunchList.this,R.layout.row,model);
            }
        public View getView(int position, View convertView, ViewGroup parent){
            View row=convertView;
            RestaurantHolder holder=null;

            if (row==null){
                LayoutInflater inflater=getLayoutInflater();

                row=inflater.inflate(R.layout.row, parent, false);
                holder=new RestaurantHolder(row);
                row.setTag(holder);
            }
            else{
                holder=(RestaurantHolder)row.getTag();
            }
            holder.populateFrom(model.get(position));
            return(row);
        }
        }

        static class RestaurantHolder {
            private TextView name=null;
            private TextView address=null;
            private ImageView icon=null;
            private View row=null;

            RestaurantHolder(View row){
                this.row=row;

                name=(TextView)row.findViewById(R.id.title);
                address=(TextView)row.findViewById(R.id.address);
                icon=(ImageView)row.findViewById(R.id.icon);
            }

            void populateFrom(Restaurant r){
                name.setText(r.getName());
                address.setText(r.getAddress());

            if (r.getType().equals("sit_down")){
                icon.setImageResource(R.drawable.sitdown);
            }
            else if (r.getType().equals("takeout")){
                icon.setImageResource(R.drawable.takeout);  
            }
            else{
                icon.setImageResource(R.drawable.delivery);
            }

        }
}
} 
```

这个类是 Restaurant.java：

```
public class Restaurant {
private String name="";
private String address="";
private Object type;

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public void setType(String string) {
    // TODO Auto-generated method stub

}
public String toString(){
    return(getName());
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:51:43.370

将此添加到您的餐厅课程

```
public String getType() {
    return type;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:55:48.517

在回答您的任务的第一部分时，根据您给我们的代码，您肯定需要`getType()`在类中实现该方法`Restaurant`。

关于`NullPointerException`，这可能是因为您的`getType`实现返回了可能未初始化的值（实际上，鉴于您的实现没有逻辑`type`，因此无法设置）。`setType`您将需要执行以下操作：

```
public void setType(String string) {
    this.type = string;
} 
```

您可能还想`type`在`LunchList`使用`getType`. 取决于你如何使用它。

# php - 仅在生产服务器上找不到类错误

> ID：12504307
> 
> 赞同：7
> 
> 时间：2012-09-19T23:34:32.020
> 
> 标签：php, namespaces, silex

我正在使用 Silex 开展一个项目。在一个特定的文件中，我添加了一条`use`语句，让自动加载器包含一个特定的 php 文件。稍后在文件中，我使用该类。开发服务器上一切正常，但是当我进入生产环境时，我收到一条`Fatal error: Class not found`消息。编辑：两台服务器现在都使用 PHP 5.4.4。

是否有任何类型的安装特定问题可能导致此问题？我可以确认 composer 生成的两个命名空间自动加载文件是相同的。

只是为了彻底起见，这里是 include 语句：

```
use Instaphp; 
```

下面是后面代码中类的使用：

```
$app['instaphp'] = $app->share(function() use ($app) {
            if($app['tagframe.instagram_token'] === null) {
                return Instaphp\Instaphp::Instance();
            } else {
                return Instaphp\Instaphp::Instance($app['tagframe.instagram_token']);
            }
        });

        $app['instaphp.config'] = $app->share(function() use ($app) {
            return Instaphp\Config::Instance();
        }); 
```

这是确切的错误：

```
Fatal error: Class 'Instaphp\Config' not found in /var/www/silexsandbox/src/TagFrame/Silex/TagFrameServiceProvider.php on line 89 
```

更新：我应该补充一点，在我正在处理的相当大的代码库中，我在其他任何地方都没有遇到过这样的错误，所以我知道这并不像所有命名空间都不起作用那么简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:17:20.693

默认情况下，Mac 使用日志式不区分大小写的文件系统。Linux，取决于你的风格，大多是区分大小写的。这肯定会导致您在上面描述的行为。

我建议您在 Mac 上创建第二个分区并将其格式化为 Journaled Case-Sensitive，以使其更接近您的生产环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T12:17:17.880

感谢您的评论。我确实确保我使用 Composer 进行了更新，以便转储自动加载器。

问题（我在几个小时的摆弄后发现）是我使用的第三方库（Instaphp）的目录结构是小写的。这并没有给我的 Mac 带来问题，但是生产服务器正在运行 Ubuntu，我想它使用了区分大小写的文件处理实用程序，而 Mac 没有。

我完全在踢自己，因为我花了一个晚上！

# android - View invalidating too slow?

> ID：12504309
> 
> 赞同：2
> 
> 时间：2012-09-19T23:35:18.633
> 
> 标签：android, view, invalidation, redraw

I'm trying to draw some animations in a view by invalidating it, thus changing the positions in the onDraw method.

Looks something like this:

Controller:

```
public void setStateProgress(int percent) {
    stateProgress = percent;
    view.invalidate();
} 
```

Thread:

```
public void run() {
    long startTime = System.currentTimeMillis();

    while (activity.STATE != MainActivity.State.ANIMATION_FINISHED) {
        long timeDiff = System.currentTimeMillis() - startTime;

        int percent = Math.round(((float) MainActivity.TIME_PER_STATE / 10000f)
                * timeDiff);

        // if this state's time is over, move on to the next.
        if (timeDiff >= MainActivity.TIME_PER_STATE
                && activity.STATE != MainActivity.State.ANIMATION_FINISHED) {
            activity.setState(activity.STATE + 1);
            startTime = System.currentTimeMillis();
            percent = 0;
        }
        final int finalPercent = percent;

        activity.runOnUiThread(new Runnable() {
            public void run() {
                Log.d(TAG, "Updating progress to "+finalPercent+"%, invalidating view...");
                activity.getAnalyzeController().setStateProgress(
                        finalPercent);
            }
        });
        try {
            Thread.sleep(50);
        } catch (Exception e) {

        }
    }
} 
```

I've played around with the sleep time, but even with 50ms sleep time it does not seem to re-draw the view.

In the onDraw method of the view is not too much. Just some lines and rectangles for testing purpose. Anyone got an idea how to speed things up? Should I handle the thread in a different way? I'm open for suggestions, timing in threads is not my speciality. :)

Thanks for your help.

EDIT:

My guess: By runOnUiThread I invoke another thread passed to some handler (?) and this takes a while.. but how should I do it otherwise?

# python - passlib and Google app engine

> ID：12504310
> 
> 赞同：0
> 
> 时间：2012-09-19T23:35:25.103
> 
> 标签：python, google-app-engine, import, libraries

I downloaded the Python library passlib and i am trying to use the sha256_crypt class to encrypt and decode data.

I included it in the `app.yaml` file but it says `the library "passlib" is not supported`.

I can't use it? If so what should I use instead?

Furthermore, is there a limitation on the libraries you can use with GAP ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:03:36.523

您不需要将该模块添加到 app.yaml 中的库中。

你只需要上传模块和你的代码。为此，您无需安装模块（使用 pip、easy_install、apt-get 等），而是将其复制/解压缩到项目文件夹中。

你为什么不改用 Pycrypto，它作为[第三方库](https://developers.google.com/appengine/docs/python/tools/libraries27)被支持并且是用 C语言编写的。

关于最后一个问题，Appengine 中可以运行的库有一些限制。目前不支持用户提供的带有 C 扩展的模块，有些是通过[第三方库](https://developers.google.com/appengine/docs/python/tools/libraries27)支持的。此外，出于安全考虑，某些系统调用被禁用，因此也可以防止使用某些模块。

# python - 如何保持 python qtwebkit 实例运行和持久化？

> ID：12504311
> 
> 赞同：2
> 
> 时间：2012-09-19T23:35:29.540
> 
> 标签：python, pyqt, qtwebkit

我需要我的 Python QtWebKit 脚本来保持运行并监听更多命令。现在，如果用户连接并向服务器发送命令，服务器端脚本将在完成后运行并退出。

例如，如果用户输入要导航到的 URL，QtWebKit 会获取 URL 并呈现它。在某个时候，他们可能希望发送登录命令并查看该页面的屏幕截图。脚本开始，导航到 URL 并登录，然后截取该页面的屏幕截图。

有什么方法可以让脚本监听未来的命令而不必从头开始？

预期：用户向服务器发送命令，QtWebKit 加载 URL 并保持打开状态。用户发送命令登录并截屏，QtWebKit 无需重新启动脚本即可登录并截屏。

这里的特殊情况是用户不提前知道他希望执行的命令的确切顺序。所以用户不能拼出 A 到 Z 并让脚本一次运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:09:35.357

我使用 twisted 来设置一个简单的 xmlrpc 服务器作为后端，它是持久的，并且如果需要，它的任务是创建基于 PyQt/PySide 的 webkit 浏览器的新实例，或者重用现有的。一个单独的前端 web 应用程序是用户和后端应用程序之间的“中间人”，将命令连同 session_id 一起发送到扭曲的 xmlrpc 服务器，如果 session_id 具有已经运行的浏览器，扭曲的服务器可以通过它查找，或者需要实例化一个新的。这是一个简单的例子：

```
# -*- coding: utf-8 -*-
from pyvirtualdisplay import Display
display = Display(visible=False, size=(1024, 768), color_depth=24)
display.start()

from PySide.QtGui import QApplication
app = QApplication([])
import qt4reactor
qt4reactor.install()

from twisted.web import server
from twisted.web.xmlrpc import XMLRPC
from twisted.internet import defer
from PySide.QtWebKit import QWebView, QWebPage
from PySide.QtNetwork import QNetworkAccessManager, QNetworkRequest
from PySide.QtCore import QUrl, QByteArray

class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()

        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)

        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)
        self.web_view.loadFinished.connect(self._load_finished)

    def _load_finished(self, ok):
        # the page is loaded
        frame = self.web_view.page().mainFrame()
        self.deferred_request.callback(frame.toHtml())

    def _make_request(self, url):
        request = QNetworkRequest()
        request.setUrl(QUrl(url))
        return request

    def perform(self, request_data):
        # say request_data is a dict having keys: 'url', 'post_data'
        self.deferred_request = defer.Deferred()
        request = self._make_request(request_data['url'])
        self.web_view.load(request)

        return self.deferred_request

class TestXMLRPCServer(XMLRPC):

    def __init__(self):
        XMLRPC.__init__(self, allowNone=True)
        self.browser_instances = dict()

    def xmlrpc_open(self, request_data, session_id):
        print session_id, request_data
        try:
            browser = self.browser_instances[session_id]
            print 'using existing instance'
        except KeyError:
            browser = Browser()
            self.browser_instances[session_id] = browser
            print 'new instance created'

        return browser.perform(request_data)

def start_server(port=1234):
    from twisted.internet import reactor
    r = TestXMLRPCServer()
    reactor.listenTCP(port, server.Site(r))
    reactor.run()

if __name__ == '__main__':
    start_server() 
```

还有一个客户只是为了测试功能：

```
# -*- coding: utf-8 -*-
import xmlrpclib

def test_server(port=1234):
    s = xmlrpclib.Server('http://localhost:{0}/'.format(port))
    session_id = 'a1b2c3d4e5f6'
    html = s.open({'url': 'http://www.google.com'}, session_id)
    print unicode(html).encode('utf-8')
    html = s.open({'url': 'http://www.ubuntu.com'}, session_id)
    print unicode(html).encode('utf-8')

    session_id = 'f6e5d4c3b2a1'
    html = s.open({'url': 'http://www.yahoo.com'}, session_id)
    print unicode(html).encode('utf-8')

if __name__ == '__main__':
    test_server() 
```

# java - 实例化作为参数传递的类的枚举

> ID：12504313
> 
> 赞同：-1
> 
> 时间：2012-09-19T23:35:33.810
> 
> 标签：java, generics, enums, compiler-warnings

我有一个方法：

```
public Object instantiateAlmostAnyType(String stringToParse, Class<?> targetType) {
  ...
  if (targetType.isEnum())
    return Enum.valueOf((Class)targetType, stringToParse);
} 
```

它有效，但我收到编译器警告。一切为了这`return`条线：

```
类是原始类型。对泛型类的引用应该被参数化
枚举是一种原始类型。应该参数化对泛型类型 Enum 的引用
类型安全：Class 类型的表达式需要未经检查的转换才能符合 Class
类型安全：Enum 类型的泛型方法 valueOf(Class, String) 的未经检查的调用 valueOf(Class, String)

```

有什么办法（除了@suppressWarnings）来避免警告吗？任何演员表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T23:59:45.113

```
public <T extends Enum<T>> T instantiate(String stringToParse, Class<T> targetType) {
    ...
    return Enum.valueOf(targetType, stringToParse);
} 
```

现在您在编译时检查`Class`实例必须是一个`enum`类型，并且不必进行任何不安全的强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:22:03.510

直到现在我还没有找到解决方案，所以我认为这是不可能的。如果有人给我答案，我会接受

# jquery - jquery点击值不只显示白页

> ID：12504317
> 
> 赞同：0
> 
> 时间：2012-09-19T23:36:24.463
> 
> 标签：jquery, click, this

你好，我对 jquery val() 有一些问题

当我点击 div 时，jquery 不显示值只是白页，什么是不正确的？

html

```
<div class='item' value='first test'>test</div> 
```

jQuery

```
$(".item").click(function() {
  var item_id = $(this).val();
  document.write(item_id);
}); 
```

我知道我可以使用 id 但我有超过 1 个 div

我不知道也许 div 不支持价值？请帮我解决这个问题或写一些类似的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:38:53.250

`div`不支持`value`，试试`data-`属性。

```
<div class="baz" data-foo="bar">

$('.baz').data('foo') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:39:42.550

`document.write()`页面完成渲染后无法使用。
相反，您应该使用 jQuery 来设置现有元素的文本。

而且，您不能`value`在非表单元素上使用 s。

# php - 调用未定义的方法 UserModel::addUser()

> ID：12504321
> 
> 赞同：3
> 
> 时间：2012-09-19T23:37:21.353
> 
> 标签：php, codeigniter, controller

来自同一模型的其他功能工作正常，我只有其中两个有问题，它们都与数据库交互。在当地工作。

从错误日志中。**PHP 致命错误：调用未定义的方法 UserModel::getScreens()**

我已经通过谷歌搜索了所有内容，但看不到这些功能无法在服务器上运行的原因。登录也与数据库对话并且工作正常。

我已经为调用`$this->UserModel->method()` `$this->userModel->method()`等尝试了不同的命名约定。与更改加载模型相同。`$this->load->model('UserModel', ' ', TRUE);`

**user.php**（控制器）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

session_start();

class User extends CI_Controller {

    function __construct(){
        parent::__construct();
        $this->load->model('usermodel','',TRUE);
    }

    public function register(){
       ..........
       $addUser = $this->usermodel->addUser($this->input->post());
       ..........
    }

    public function screens($id = FALSE){
        $data = $this->checkStatus('screens');
        //userInfo is coming from the checkStatus function.
        //Have verified with a var_dump($user_id) and it appears
        $user_id = $data['userInfo'][0]['id'];
        $data['screens'] = $this->Usermodel->getScreens($user_id);
        if($data){
            $data['title'] = 'My SCREENs';
            if($id){
                $data['id'] = $id;
                $this->load->template('screenview', $data);
            } else {
                $this->load->template('screens', $data);
            }
        }
    }

    public function login(){
        //This works
        ..........
        $result = $this->usermodel->login($email, $password);
        ..........
    }
} 
```

**用户模型.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
Class UserModel extends CI_Model{

    function __construct(){
        parent::__construct();
        $this->salt = "_________";

    }

    function getScreens($userID){
    //This doesn't work
        $this -> db -> select('*');
        $this -> db -> from('screens');
        $this -> db -> where('user_id = ' . "'" . $userID . "'");
        $query = $this -> db -> get();

        return $query->result_array();
    }

    function addUser($data){
    //This doesn't work
         $data = array(
           'first_name' => $data['firstname'] ,
           'last_name' => $data['lastname'] ,
           'email' => $data['email'],
           'dob' => $data['dob-day'] . '/' . $data['dob-month'] . '/' . $data['dob-year'],
           'height' => $data['height'],
           'weight' => $data['weight'],
           'password' => sha1($data['password1'] . $this->salt),
           'gender' => $data['gender']
        );
        $added = $this->db->insert('users', $data);
        if($added){
            return true;
        } else {
            return false;
        }
    }

    function login($email, $password){
    //This works
        $this -> db -> select('id, email, password');
        $this -> db -> from('users');
        $this -> db -> where('email = ' . "'" . $email . "'");
        $this -> db -> where('password = ' . "'" . sha1($password . $this->salt) . "'");
        $this -> db -> limit(1);

        $query = $this -> db -> get();

        if($query -> num_rows() == 1){
            return $query->result();
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:30:16.063

您不能在用户模型模型中使用多个大写字母。第一个字母必须大写，所有其他字母必须小写。

尝试：

```
Class Usermodel extends CI_Model{ 
```

在你的控制器中

```
$this->load->model('Usermodel', '', TRUE);
$this->Usermodel->getScreens() 
```

将在一秒钟内发布文档

编辑：

[http://codeigniter.com/user_guide/general/models.html](http://codeigniter.com/user_guide/general/models.html)

查看“模型剖析”下的规则。当我第一次开始使用 CI 时，我花了太多时间试图解决这个确切的问题 :)

编辑2：

另外，我很久以前也遇到过这个问题，但是 $this->usermodel->whatever() 可以在我的本地机器上工作，但不能在服务器上工作。原因？Apache 在大写字母方面很痛苦。确保您在 $this->Usermodel 中将所有 U 大写

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T03:19:47.767

问题出在 git 上。

每次我进行更改时，git 都会将文件识别为`userModel.php`，而不是`usermodel.php`每次调用时它都会向里面看`usermodel.php`，除了登录功能之外什么都没有。

=/

# mod-rewrite - 重写规则未正确重定向

> ID：12504323
> 
> 赞同：2
> 
> 时间：2012-09-19T23:37:38.397
> 
> 标签：mod-rewrite

试图将目录的所有内容重定向到不同的 URL。我有：

```
RewriteRule ^Diet\ Plans(.*)$ http://dietplans.example.com$1 [R=301,L] 
```

当通过以下方式调用时：`abc.com/Diet Plans` 所有工作都按预期工作 - 被带到重定向域的文档根目录

但是如果我将它调用为：`abc.com/Diet Plans/xxx.pdf` 它仍然会转到文档根目录而不是`http://dietplans.example.com/xxx.pdf`

我究竟做错了什么？

我想要的是对“饮食计划”目录的任何引用，以重定向到新服务器中的同一位置，但没有“饮食计划”父目录组件。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:59:15.113

您可以尝试使用 mod_alias 代替：

```
Redirect 301 "/Diet Plans" http://dietplans.example.com 
```

这也将解释诸如`abc.com/Diet Plans/xxx.pdf`->`http://dietplans.example.com/xxx.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:44:19.520

我认为这与 L 标志有关。

这意味着停止处理规则集。在这种情况下，由于您要搜索任意数量的后续字符，因此始终会*首先*找到根域。因此，所有处理都将停止。

# c - libpq 将通知输出到终端

> ID：12504325
> 
> 赞同：2
> 
> 时间：2012-09-19T23:37:57.800
> 
> 标签：c, postgresql, libpq

我正在编写一个在 C 中包装 libpq 的库。当我执行类似的查询`DROP SCHEMA IF EXISTS bob`并且`bob`不存在时，libpq 输出

```
"NOTICE:  schema "bob" does not exist, skipping" 
```

进入我的终端，但随后成功。同样，如果我用它创建一个表，`id serial primary key`则会打印一条通知，说明它自动生成了一个序列。

如何停止将其打印到终端中？如果用户需要，我的库中有获取此类信息的功能，但它不应该像这样输出到终端。

我在文档中没有看到任何内容`PQexecParams()`，`PQconnectdb()`等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:47:32.427

请参阅手册中的[libpq - 通知处理](http://www.postgresql.org/docs/current/static/libpq-notice-processing.html)。您需要提供通知处理器来替换默认处理器。

> 默认通知处理器很简单：
> 
> ```
> static void
> defaultNoticeProcessor(void *arg, const char *message)
> {
>     fprintf(stderr, "%s", message);
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:42:41.440

一种选择是更改它的标准输出（和/或标准错误）。

# ios - loadNibNamed:owner:options 创建的自定义 UIView：removeFromSuperview 后泄漏

> ID：12504326
> 
> 赞同：1
> 
> 时间：2012-09-19T23:38:03.570
> 
> 标签：ios, uiview, memory-leaks, nib, loadnibnamed

我有一个应用程序，我想在其中显示一些内容的 CustomView（继承自 UIView）。但是我在运行时的每一点都不需要它，所以我想创建它并删除它以避免浪费内存。

我在单独的 nib 文件中有这个视图。并在 viewController 中使用此代码加载它：

```
NSArray *arr = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:self options:nil];

for (id object in arr) {
    if ([object isKindOfClass:[MyCustomView class]])
        self.myCustomView = (MyCustomView *)object;
}  

[self.view addSubview:self.myCustomView]; 
```

myCustomView 是 viewController 的属性

```
@property (nonatomic, strong) IBOutlet MyCustomView *myCustomView; 
```

但是在 Instruments 中我可以看到#Living 是 3（例如，当我调用上面的代码 3 次时），#Transitory 仍然是 1，而 #Overall 是 4。这意味着 MyCustomView 泄漏:( 当我设置`self.myCustomView = nil`它时它是无用的:(

有人可以帮我解决这个泄漏吗？我正在使用ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:50:07.637

我认为`[MyCustomView removeFromSuperview]`会完成这项工作。:)

# list - 如何避免不必要的计算？

> ID：12504334
> 
> 赞同：5
> 
> 时间：2012-09-19T23:38:34.237
> 
> 标签：list, optimization, haskell

如果列表中超过 3 个元素的测试失败，我需要返回 false。有什么我可以优化的吗？

```
isItemOk :: Integer -> Boolean 
isItemOk = ( some costly opernation ) 
```

这是我要优化的功能，

```
isListOk :: [Integer] -> Boolean 
isListOk = 3 >= sum ( [ 1 | x <- [1.1000], isItemOk x ]) 
```

我的优化尝试，假设如果找到 4 个元素就不会寻找更多。

```
isListOk :: [Integer] -> Boolean 
isListOk = 3 >= sum ( take 4 [ 1 | x <- [1.1000], isItemOk x ]) 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T23:44:18.180

您可以只使用`filter`检查失败元素的东西，然后`take 4`查看您有多少元素`length`。

懒惰的评估意味着找到这四个后它不会检查任何东西，所以你完成了。当然，如果测试在三个或更少的元素上失败，它会检查整个列表，但你无能为力。

*要避免*的重要事情是“计算未通过测试的元素”，或“过滤然后得到结果的长度”，或类似的东西。如果不先使用`take`或类似的东西，这样做将强制检查整个列表。`null`这是经常给初学者的“使用或模式匹配检查空列表”建议的更通用版本。但看起来你已经在避免这个错误了！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T23:42:42.800

对于像 3 这样的小数字，您可以只使用模式匹配。

```
case filter isItemOk xs of
   x1 : x2 : x3 : _ -> ...
   _                -> ... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T06:11:01.287

我想借此机会炒作一下[惰性自然数](http://hackage.haskell.org/packages/archive/numbers/3000.0.0.0/doc/html/Data-Number-Natural.html)。使用这个库`genericLength`，我们可以写

```
import Data.Number.Natural
import Data.List
isListOk = (3 :: Natural) >= genericLength (filter isItemOk [1..1000]) 
```

它不会做更多的工作：这个函数在返回之前最多会找到四个正常的项目。例如：

```
> (3 :: Natural) >= genericLength (filter even (2:4:6:8:undefined))
False 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T00:52:08.200

让我先重写一下你的函数，如

```
isListOk :: Bool 
isListOk = length (filter isItemOk [1 .. 1000]) <= 3 
```

可以说比你的版本更惯用。（请注意，我还更改了类型签名，因为您的签名不正确。此外，您应该写`1 .. 1000`而不是`1.1000`.）

惰性求值是你最好的朋友，因为它通常会确保不会执行不必​​要的计算。

不幸的是，您使用`length`（或将列表中的每个元素映射到 1，然后像您一样对结果列表求和）在这里遇到了阻碍。也就是说，`length`在列表的脊椎中是严格的：它只能在将列表评估到最后时才产生列表的长度，在这种情况下，这意味着您的程序将不得不运行您的检查一千次。

一种解决方案是将长度的计算（即，遍历列表的脊椎）和计算的长度是否不超过给定阈值的测试组合成一个函数，该函数实际上在其脊椎中是惰性的参数列表：

```
isNotLongerThan :: [a] -> Integer -> Bool
isNotLongerThan []       n = n >= 0
isNotLongerThan (_ : xs) n = n >= 1 && isNotLongerThan xs (n - 1) 
```

然后写

```
isListOk :: Bool 
isListOk = filter isItemOk [1 .. 1000] `isNotLongerThan` 3 
```

对于可重用的解决方案，您当然可以对谓词和阈值进行抽象：

```
forNoMoreThan :: (a -> Bool) -> Integer -> [a] -> Bool
forNoMoreThan p n = (`isNotLongerThan` n) . filter p

isListOk :: Bool
isListOk = (isItemOk `forNoMoreThan` 3) [1 .. 1000] 
```

最后，正如 hammar 所指出的，如果您的阈值足够小且固定，您可以简单地使用模式匹配来确定列表是否足够短。

# ms-access - 带参数查询的 if 语句

> ID：12504337
> 
> 赞同：-2
> 
> 时间：2012-09-19T23:39:01.913
> 
> 标签：ms-access

请为我提供复制和粘贴的 SQL，以便我的 if 语句提示用户输入`want_date`，但如果用户只是单击“确定”，则默认值将是当前日期。

```
INSERT INTO tbl_New_part_ID_input ( want_date )
SELECT [please input want date or just click ok to use todays current date] AS Expr1; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:59:30.753

`nz([Input Date],now())`

`nz`是一个函数，如果第一项为空，则返回第二项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:45:32.670

我更喜欢 MS SQL ，不确定相同的语法是否适用于访问。但可以试一试或得到一个想法。如果值为 null，它将使用系统中的当前日期。

插入到 tbl_New_part_ID_input (ISNULL(@Want_date,getdate())

# php - 理解和解析 cURL 响应

> ID：12504339
> 
> 赞同：-4
> 
> 时间：2012-09-19T23:39:30.297
> 
> 标签：php

```
 var $conn = false;
    var $username = "";
    var $password = "";
    var $error = false;

   function GetBetween($content,$start,$end){
    $r = explode($start, $content);
    if (isset($r[1])){
        $r = explode($end, $r[1]);
        return $r[0];
    }
    return '';
    }

    function get($url)
    {
        $this->conn = new Curl('youtube');

        $html = $this->conn->get($url);

        if(strstr($html,'verify-age-thumb'))
        {
            $this->error = "Adult Video Detected";
            return false;
        }

        if(strstr($html,'das_captcha'))
        {
            $this->error = "Captcah Found please run on diffrent server";
            return false;
        }

    if(!preg_match('/encoded_fmt_stream_map.*/',$html,$match))
        {
            $this->error = "Error Locating Download URL's";
            return false;
        }

        $fmt_url =  substr(urldecode($match[0]), 1);
        $urls = explode(',',$fmt_url);
        $foundArray = array();

        foreach($urls as $url)
        {
        $url_end = strstr($url, "&quality");

       // $foundArray[] = $this->GetBetween($url, "&url=", "&type=");
        $foundArray[substr(strstr($url_end, "&itag="), 6)] = substr( (str_replace($url_end, "", $url)), 4 );

        }

        $formats = array(
            '5'=>array('flv','Low Quality'),
            '6'=>array('flv','Low Quality'),
            '13'=>array('3gp','Low Quality'),
            '17'=>array('3gp','Medium Quality'),
            '18'=>array('mp4','High Quality (480p)'),
            '22'=>array('mp4','High Quality (720p)'),
            '34'=>array('flv','High Quality (320p)'),
            '35'=>array('flv','High Quality (480p)'),
            '36'=>array('3gp','High Quality'),
            '37'=>array('mp4','High Quality (1080p)'),
//            '43'=>array('webm',''),
//            '44'=>array('webm',''),
//            '45'=>array('webm',''),
        );

        foreach ($formats as $format => $meta) {
            if (isset($foundArray[$format])) {
                $videos[] = array('ext' => $meta[0], 'type' => $meta[1], 'url' => urldecode($foundArray[$format]));
            } 
        }

        return ($videos);
    } 
```

我正在解析来自 youtube(YT) 的输出，以便在我的网站上播放视频。当 YT 更改其格式时，此代码一直有效。

我不理解的关于这个片段的部分来自“foreach($urls as $url)”

我知道他正在解析从 curl 请求返回的数据。我编写了“GetBetween”fxn 来挑选一些我想象的相关代码，但它仍然返回一个空数组。

有人可以解释一下分配给“$foundArray”的内容吗？还有分配给“$videos[]”数组的内容。"$meta[0]" 和 "$meta[1]" 是指数组的第一行，即 "'5'=>array('flv','Low Quality')" 还是数组的前两行大批？

您可以提供的任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:55:49.127

对于 $urls 中的每个 URL，它获取 URL 之前的部分`&quality`并将其分配给`$foundArray[itag]`，其中`itag`是 URL 之后的部分`&itag=`（我假设这始终是 URL 中的最后一个参数）。

对于`$formats`数组的第一行，`$meta[0]`is`flv`和`$meta[1]`is `Low Quality`。因此，`foreach ($formats...)`循环遍历每种格式，查看其中一个 URL 的 itag 是否等于格式编号。如果找到匹配项，它会在其中添加一行，`$videos`其中包含格式信息和 URL 的解码版本。

因此，结果将`$videos`包含一个数组，其中每行包含一个扩展名、视频质量和该视频版本的 URL。

# objective-c - 如何在 xcode 4.5 中创建倒数计时器

> ID：12504341
> 
> 赞同：1
> 
> 时间：2012-09-19T23:39:40.953
> 
> 标签：objective-c, ios, xcode4.5

好的，我想创建多个计时器，它们都在不同的时间（25、50,1 分钟、1 分钟 30 秒……）开始，但我不知道如何让它在它达到 0 时停止，当它达到零时，带上“播放器”换一种说法。

这是我的 .h 文件

```
@interface ViewController :UIViewController {

IBOutlet UILabel *seconds;

NSTimer *timer;

int MainInt;
}

@end 
```

这是我的 .m 文件

```
@implementation ViewController

-(void)countDownDuration {

MainInt -= 1;

seconds.text = [NSString stringWithFormat:@"%i", MainInt];

}

-(IBAction)start:(id)sender {

MainInt = 25;

timer = [NSTimer scheduledTimerWithTimeInterval:1.0

                                         target:self
                                       selector:@selector(countDownDuration)
                                       userInfo:nil
                                        repeats:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:42:58.607

NSTimer 不会自动执行此操作，但将其添加到您的 countDownDuration 方法很简单。例如：

```
-(void)countDownDuration {
  MainInt -= 1;
  seconds.text = [NSString stringWithFormat:@"%i", MainInt];
  if (MainInt <= 0) {
    [timer invalidate];
    [self bringThePlayerToAnotherView];
  }
} 
```

当然，您要创建多个计时器。您可以将每个变量存储在不同的变量中，并为每个变量分配一个不同的选择器。但是如果你查看 NSTimer 的文档，回调方法实际上将定时器对象作为选择器；你忽略了它，但你不应该。

同时，您可以将所需的任何类型的对象存储为计时器的 userInfo，因此这是为每个计时器存储单独的当前倒计时值的好地方。

因此，您可以执行以下操作：

```
-(void)countDownDuration:(NSTimer *)timer {
  int countdown = [[timer userInfo] reduceCountdown];
  seconds.text = [NSString stringWithFormat:@"%i", countdown];
  if (countdown <= 0) {
    [timer invalidate];
    [self bringThePlayerToAnotherView];
  }
}

-(IBAction)start:(id)sender {
  id userInfo = [[MyCountdownClass alloc] initWithCountdown:25];
  timer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                           target:self
                                         selector:@selector(countDownDuration:)
                                         userInfo:userInfo
                                          repeats:YES];
} 
```

我留下了一些未写明的细节（比如 - 的定义`MyCountdownClass`必须包含方法`initWithCountdown:`并且`reduceCountdown`做正确的事情），但它们都应该非常简单。（此外，您可能想要一个 userInfo 存储的不仅仅是倒计时值——例如，如果每个计时器将玩家发送到不同的视图，您也必须将视图存储在那里。）

PS，注意你现在需要`@selector(countDownDuration:)`. ObjC 的新手总是把这件事搞砸。`countDownDuration:`并且`countDownDuration`是完全不相关的选择器。

PPS， 的完整定义`MyCountdownClass`必须可见`countDownDuration:`（除非您有其他具有相同选择器的类）。您可能希望显式转换 to 的结果`userInfo`以`MyCountdownClass *`使事情更清楚。

# actionscript-3 - as3 无法设置复选框标签 - 需要知道它何时加载

> ID：12504345
> 
> 赞同：0
> 
> 时间：2012-09-19T23:40:14.260
> 
> 标签：actionscript-3, checkbox

我们有一个 fla，在“高级 Actionscript 设置”下，我们有

“自动声明阶段实例”

未选中。

然后，我们在文档类的类级别上有一堆这样的声明：

```
public var spouseCheck:CheckBox; 
```

如果我在构造函数中设置配偶Check.label = "blah"，它就不起作用。但是，如果我稍后设置它（当另一个事件发生时），它确实有效。这意味着此时复选框已完全加载。如何在复选框上放置一个事件侦听器，以便我知道它何时完全加载，并且可以设置标签？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:38:31.697

在您设置的类的构造函数中`spouseCheck.label = "blah"`，删除该行并添加该行：

```
spouseCheck.addEventListener(Event.ADDED_TO_STAGE,init); 
```

然后创建初始化函数：

```
function init(e:Event):void {
    spouseCheck.label = "blah";
    spouseCheck.removeEventListener(Event.ADDED_TO_STAGE,init);
} 
```

当配偶检查在 displayList（舞台）上时触发该事件，并应确保它已准备好。

# program-files - 当我将 64 位应用程序安装到 32 位程序文件 (x86) 中时，64 位应用程序会像 32 位一样工作吗

> ID：12504347
> 
> 赞同：0
> 
> 时间：2012-09-19T23:40:33.703
> 
> 标签：program-files

我想问如果我将 64 位程序安装到 Program Files (x86) 中，它仍然可以作为 64 位运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:41:12.677

是的。64 位应用程序将始终只运行 64 位，无论它安装在何处。

但是，这将是 64 位程序的非标准安装位置，因此我不建议这样做。64 位应用程序通常应该安装到`Program Files`，而不是`Program Files (x86)`.

# ruby-on-rails - 黄色背景的 ActiveAdmin

> ID：12504349
> 
> 赞同：0
> 
> 时间：2012-09-19T23:40:48.853
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我正在 Rails ActiveAdmin 中开发应用程序，CRUD 背景在两种情况下是黄色的。- 新建和编辑：背景按钮 - 显示：背景字段

我的模型被命名为 Highlight。

用户 CRUD 是完美的：没有黄色背景。

**截图：**

*   新建和编辑：[http ://www.organicadigital.com/_clientes/masotti/new-edit.jpg](http://www.organicadigital.com/_clientes/masotti/new-edit.jpg)
*   显示：[http ://www.organicadigital.com/_clientes/masotti/show.jpg](http://www.organicadigital.com/_clientes/masotti/show.jpg)

谢谢您的帮助！

# python - 在 Python 中正确使用与过度使用 *args

> ID：12504351
> 
> 赞同：5
> 
> 时间：2012-09-19T23:41:00.990
> 
> 标签：python, arguments, maintainability

我一直在查看我正在使用的开源包的源代码。几乎每个函数都使用 *args 而不是命名参数。我发现很难遵循和使用代码，因为每次我想调用一个函数时，我都必须返回，挑选源代码，并确定参数应该是什么，以及它们应该是什么顺序。我的问题是：是否有令人信服的理由在每个函数中使用 *args，或者这是对这个概念的滥用？谢谢，-b

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:49:36.897

这可能是个人原因，但我只使用 *args 和 **kwargs 当我有很多可选字段时，其中一些字段仅在特定上下文中使用。

我使用 args 的唯一其他场合是为云 API 构建 XML RPC 客户端时。由于我只是将参数传递给底层并且由于函数是动态生成的，因此我别无选择，只能使用 *args，因为我无法提前知道所有参数。

在大多数情况下，您甚至都不需要它。我认为这主要是懒惰而不是其他任何事情。

一些来自 Java 和 C# 的人可能会使用它作为“params”的替代品，但是在 python 中传递可选参数的方法有很多。

而且我同意即使你使用 *args，你也应该有一个非常好的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T23:45:43.393

在每个函数中使用`*args`是一个坏主意，因为它可以掩盖代码中的错误（调用具有错误数量参数的函数）。我想经验法则应该是只`*args`在*需要* `*args`时使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T23:49:45.347

在[Python 之禅中](http://www.python.org/dev/peps/pep-0020/)，我们被告知要显式而不是隐式。应尽可能使用显式参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T23:46:04.173

当没有令人信服的理由使用`*args`时，这是对概念的滥用。通常有很好的参数名称，有助于理解。即使没有，也`(x, y, z)`告诉你更多`(*args)`。

除了使代码更具可读性之外，它还有助于捕获错误（例如，如果你调用一个`(x, y, z)`函数，`(2, 3)`你会在调用时得到一个错误，而不是在函数内部），它通常更简洁，甚至可以更高效。

但有时有令人信服的理由广泛使用`*args`.

例如，如果您正在包装一个较低级别（C 或其他）模块并希望进行完美转发，那么使用`*args`. 如果您自动生成包装器代码而不是手动编写它，则更是如此。当然，这仍然是一个折衷——这对包装模块的开发者来说更​​容易，但对用户来说更难——但有时这种折衷是值得的。

在不知道您所指的特定包的情况下，不可能猜测它是一个引人注目的用例还是滥用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T05:14:22.737

如果你包装一个未知函数（装饰器返回的函数经常这样做），那么你经常需要使用`(*args, **kwargs)`.

一些类层次结构`(*args, **kwargs)`在可能需要层次结构中不同类的不同签名的方法中使用（`__init__`是罪魁祸首）。如果您可以避免这种情况，这*真的*很有帮助，但是可能有必要以理智的方式处理多重继承层次结构（或者至少尽可能理智地处理多重继承）。

`**kwargs`当我有大量可选参数时，我有时最终会使用，但这需要大量文档。

在一个消耗`*args`自身的函数中（而不是将它们传递给具有未知签名的其他函数，如在装饰器或类继承案例中），那么我倾向于认为`*args`几乎不应该使用它，除了表示“零个或多个一样的东西”。在这种情况下，您应该将其命名为`*websites`or `*spaceships`or `*watermelons`， not `*args`。一堆不相关的参数不应该被压缩到`*args`. 更糟糕的是，函数使用`*args`“an x, ay, and az, or else an x​​ and a z”，其中第二个参数根据传递的参数数量做不同的事情。到那时，它们显然都应该有名称和默认值（即使这只是标准`None`default 然后在函数中查看哪些是非`None`模式的）并通过关键字而不是位置传递。

# javascript - 如何访问 javascript 文件中的查询字符串

> ID：12504359
> 
> 赞同：0
> 
> 时间：2012-09-19T23:42:00.317
> 
> 标签：javascript, html, query-string

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

比方说，我们`<script>`在 HTML 标记中有一个这样的标签

```
<script src="/path/file.js?test=1&data=2"></script> 
```

..有什么方法可以访问其中的查询字符串`file.js`吗？`window.location`当然不会改变，因此您不能为此使用它。

如果这是不可能的，您如何将数据传递到脚本文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:55:53.837

Musa 在这里有正确的方法（来自评论）。您可以像访问其他任何标签一样访问脚本标签（您可以使用 ID 来简化操作）：

```
<script id='my_script_1' src="/path/file.js?test=1&data=2"></script> 
```

然后只需解析 src 并仅获取查询字符串：

```
var js_lib = document.getElementById('my_script_1');
var js_url = js_lib.src;
var js_url_pieces = js_url.split('?');
alert(js_url_pieces[1]); 
```

注意：为简单起见，我使用 split 。您可能想[使用 regex](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)。

如果要重新加载 js 文件，只需重置源：

```
js_lib.src = js_url_pieces[0]+'?new query string'; 
```

我认为这应该适用于大多数浏览器。

或者，正如其他人所提到的，您可能想要编写更灵活的函数或使用全局变量来通过 _GET 变量来实现您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:43:22.147

我能想到的唯一可靠的方法是通过[document.currentScript](https://developer.mozilla.org/en-US/docs/DOM/document.currentScript)但目前只有 Firefox 支持。

[这个问题](https://stackoverflow.com/questions/2161159/get-script-path)可能有一些有用的信息。

要将数据传递到脚本文件中，我可以使用全局变量。总的来说，我不太喜欢它们，但这可能是它们的合适用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:53:27.490

听起来您想将一些数据从父文档传递到您包含的 javascript 文件中。你可以用一个全局变量来做，像这样

你的文件.html：

```
<script>
var myVar = "Hi";
</script>
<script src="script.js"></script> 
```

脚本.js：

```
alert(myVar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T00:00:02.527

当脚本运行时，该脚本是页面上的最后一个元素（由于 JavaScript 被阻塞）。您可以利用这一点：

```
var scripts = document.getElementsByTagName('script'),
    me = scripts[scripts.length-1],
    myurl = me.getAttribute("src"),
    myquery = myurl.split("?")[1].split("#")[0].split("&"),
    qcount = myquery.length, query = {}, i, tmp;
for( i=0; i<qcount; i++) {
    tmp = myquery[i].split("=");
    query[decodeURIComponent(tmp[0])] = decodeURIComponent(tmp[1]);
} 
```

请注意，这只有在代码的最外层范围内才有效，即。不在函数中。它也不适用于异步或延迟脚本。

# javascript - Windows 触摸屏上的 Jquery-HTML5 绘图画布？

> ID：12504369
> 
> 赞同：2
> 
> 时间：2012-09-19T23:43:03.783
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我正在创建一个允许用户使用 HTML5 Canvas 标签在屏幕上绘图的应用程序。

这在使用鼠标时效果很好，我什至使用 jquery 在 android 上工作`touch`。

使用 Windows 7 或 8 平板电脑时会出现问题。它不起作用的原因很简单，浏览器尝试滚动而不是鼠标按下和拖动。

它适用于 android 而不是 windows 的原因是由于 android 支持`ontouchstart`并且`ontouchend`我无法让它在 windows 平板电脑上运行。

那么，有没有办法让浏览器停止尝试在屏幕上滚动和绘图？

谢谢。

# jquery - JQuery 使用 each() 获取准确的元素高度

> ID：12504370
> 
> 赞同：2
> 
> 时间：2012-09-19T23:43:03.910
> 
> 标签：jquery, jquery-animate, jquery-masonry, each

出于某种原因，当页面加载时，我无法为循环中的元素获取准确的高度值`each()`，但是当我在 上尝试完全相同的`height()`功能时`mouseleave`，它工作正常。[明白我的意思了](http://www.whatworksforamerica.org/dev/ideas-that-work/)吗？它应该是获取描述的高度`div`，并使用它来确定初始位置。

我认为这可能与在设置高度之前需要加载的图像有关，因此`load()`尝试延迟到之后。它似乎确实使高度大于没有它，但仍小于实际高度。有任何想法吗？

```
jQuery(document).ready(function() {

var total = jQuery('.portfolio-item-holder figure').length;
var numLoaded = 0;

jQuery('.portfolio-item-holder img').one('load', function() {
  numLoaded++;
  if (numLoaded == total) {

    jQuery('.portfolio-item-holder figure').each(function(e) {
      var desc = jQuery(this).find('.description').outerHeight(true);
      console.log(desc);
      jQuery(this).find('figcaption').animate( { 'bottom' : -1 * desc }, 400, 'easeInOutQuart' );
    });

  }
}).each(function(){
  if(this.complete) jQuery(this).trigger('load');
});

jQuery('.portfolio-item-holder figure').bind('mouseenter', function(e) {

  var title = jQuery(e.currentTarget).find('h3').position();
  jQuery(e.currentTarget).find('figcaption').animate( { 'bottom' : '0', 'queue' : false }, 400, 'easeInOutQuart' ); 

}).mouseleave(function(e) {
  var desc = jQuery(e.currentTarget).find('.description').outerHeight(true);

  jQuery(e.currentTarget).find('figcaption').animate( { 'bottom' : -1 * desc, 'queue' : false }, 400, 'easeInOutQuart' ); 

});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:59:39.383

有时，当它不能以一种方式工作时，试着让它以另一种方式工作。这是我推荐的：

**1）**在您的CSS中，1a）将`.description`类设置为`display:none;`和1b）将`.portfolio-item-holder figcaption`类设置为`bottom:0px;`

**2）**设置鼠标事件处理程序：

```
function PortfolioImageHandler() {

    $('#portfolio-item-holder').on({

          mouseenter: function () { ShowPortfolioDescription($(this)); },
          mouseleave: function () { HidePortfolioDescription($(this)); }

    }, '.portfolio-item');
} 
```

**3）**实现事件处理程序：

```
function ShowPortfolioDescription(ThePortfolioItem) {
    ThePortfolioItem.find('.description').stop().slideDown(500);
}

function HidePortfolioDescription(ThePortfolioItem) {
    ThePortfolioItem.find('.description').stop().slideUp(200);
} 
```

**4）**将您的代码结构更改为：

```
$(document).ready(function () {
  //you should only have calls to other functions, no actual implementations
  //should be coded in the document.ready function; keep the handlers out of here
  PortfolioImageHandler();
});

function PortfolioImageHandler() {...}
function ShowPortfolioDescription (ThePortfolioItem) {...}
function HidePortfolioDescription (ThePortfolioItem) {...} 
```

这将大大减少您的代码到几行代码。请注意，当用户重复触发 mouseenter/mouseleave 事件时，该函数有助于防止 yoyo 效应：每个事件在执行 a或`.stop()`之前首先取消任何正在进行的动画。让我知道这是如何工作的；这是通过手动修改 Chrome 检查器中的设置来显示结果的 2 张图片。顺便说一句，如果您在 IE8 中查看该站点，您设置它的方式将无法正常工作；推荐的实施应该可以正常工作。`slideUp``slideDown`

![在此处输入图像描述](../Images/7225c1baf0abdf1022e96a85d1227da3.png)

![在此处输入图像描述](../Images/6ba230cb63ac51ba30f3dd1f104ca719.png)

追问：我一路看到艾伦。浏览器上的输出有什么不同吗？

![在此处输入图像描述](../Images/63b41c927303229edf0cf2b6694139e8.png)

# unit-testing - 使用 IOC 配置单元和集成测试

> ID：12504371
> 
> 赞同：0
> 
> 时间：2012-09-19T23:43:04.690
> 
> 标签：unit-testing, inversion-of-control, integration-testing, mstest

我有一个单元测试项目，它使用 Ninject 来模拟数据库存储库。我想使用这些相同的测试作为集成测试，并使用 Ninject 将我的真实数据库存储库绑定回它们各自的实现，以便在数据库中测试/强调应用程序。

有没有办法用 Visual Studio 2012 做到这一点，或者是否有其他测试框架，除了 MSTest，它允许这种类型的配置？

我真的很讨厌将这些单元测试重写/复制到集成测试项目中，但我怀疑我可以将文件作为链接复制，并将单个测试文件编译到两个项目（单元和集成）中。

谢谢托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:40:44.497

你的要求对我来说听起来很奇怪。单元测试和集成测试之间的区别远不止是否连接到数据库。集成测试要么具有更大的范围，要么测试组件是否正确通信。当您编写单元测试时，这样的单元的范围通常很小（一个类/组件，所有依赖项都被模拟出来），这意味着不需要使用 DI 容器。

让我换一种说法。当测试完全相同时，您为什么有兴趣在使用和不使用数据库的情况下进行相同的测试。只需将数据库留在其中并进行测试即可。除了这些测试之外，您还可以添加“真正的”单元测试，其范围要小得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T03:50:16.590

使用 Nunit，您可以使用 TestCase 做到这一点，

假设您需要使用 CustomerRepository 和 OrderRepository 使用单元和单元/集成测试，

```
[TestFixture]
public class TestCustomerRepository
{
    IKernel _unit;
    Ikernel _integration;

    [SetUp]
    public void Setup()
    {
       //setup both kernels
    }

    [TestCase("Unit")]
    [TestCase("Integration")]
    public void DoTest(String type)
    {
        var custRepo = GetRepo<ICustomerRepository>(type);
        var orderRepo = GetRepo<IOrderRepository>(type);
        //do the test here
    }

    protected T GetRepo<T>(String type)
    {
        if (type.Equals("Unit"))
        {
            return _unit.Get<T>();
        }
        return _integration.Get<T>();
    }
} 
```

这是基本思想。

# r - 在 R 中，如何在绘图标签中以粗体显示十的幂？

> ID：12504376
> 
> 赞同：1
> 
> 时间：2012-09-19T23:43:53.317
> 
> 标签：r, plot

我想以粗体显示“10^4 点”作为我的 x 轴标签。

我知道如何用粗体制作一个简单的标签：

```
plot(1:10, xlab="")
mtext(text="10 points", side=1, font=2, line=3) 
```

感谢[这个答案](https://stackoverflow.com/a/10216832/597069)，我知道如何制作一个十次方的标签，但没有什么是粗体：

```
mtext(text=expression(paste(10^4, " points")), side=1, font=2, line=3) 
```

感谢[这个答案](https://stackoverflow.com/a/6047422/597069)，我也知道如何用粗体希腊字母制作标签：

```
mtext(text=expression(bold(paste(beta, "=", 10^1, " points"))), side=1, line=3) 
```

但是十的力量仍然不是粗体！

它也不适用于`bquote`：

```
mtext(text=bquote(bold(10^1~points)), side=1, line=3) 
```

任何的想法？

以下是有关我的系统的一些详细信息。需要帮助请叫我。

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-redhat-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:54:31.607

诀窍是使用“4”而不是数字 4。

```
mtext(text=expression(paste(10^bold("4"), " points")), side=1, font=2, line=3) 
```

顺便说一句，这是不需要绘图的另一种情况`paste`：

```
mtext(text=expression(10^bold("4")~points), side=1, font=2, line=3) 
```

我看到你引用了我之前在 plotmath 上的一篇帖子，发现 Ripley 教授 2010 年帖子的链接是旧的 finzi 服务器，它不再承载 rhelp 搜索的负载。我已经[更新了那个链接](https://stat.ethz.ch/pipermail/r-help/2010-March/232923.html)。

# codeigniter - CodeIgniter 分页配置错误？

> ID：12504380
> 
> 赞同：1
> 
> 时间：2012-09-19T23:44:15.763
> 
> 标签：codeigniter, codeigniter-2

请查看名为“test”的控制器中的以下代码：

```
$this->load->library('pagination');

// These 3 are the minimum config that needs to be set
$config['base_url']   = base_url() . 'test/?' . http_build_query($_GET, '', '&amp;');
$config['total_rows'] = 173;
$config['per_page']   = 20;

// This returns something like this: ?name=foo/20
// I would expect something like this: ?name=foo&per_page=20
// $config['enable_query_strings'] = TRUE;

// This retuns something like this: ?name=foo&per_page=20 (which is what I want),
// but the documentation says it should be: ?c=test&m=index&per_page=20
$config['page_query_string'] = TRUE;

$this->pagination->initialize($config);
echo $this->pagination->create_links(); 
```

然后转到：`test/?name=foo`

生成的分页链接看起来是正确的。当您单击链接号“2”时，您将被重定向到`?name=foo&per_page=20`正确的位置。但是，创建的新分页看起来不对。它看起来像这样：（`?name=foo&per_page=20&per_page=40`其中 per_page 在查询字符串中出现两次）。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:31:14.893

添加 uri 段

```
$config['uri_segment'] = x ; 
```

# c++ - 在非调试模式下运行代码的问题

> ID：12504389
> 
> 赞同：1
> 
> 时间：2012-09-19T23:45:11.177
> 
> 标签：c++, visual-studio-2012

我正在使用 Visual Studio 2012 Premium。当这段代码正常执行时（不在调试器中），唯一的输出是一个空行。但是当它在调试器中运行时，输出是“January 9 8”。在 Debug 和 Release 之间切换没有任何区别，使用 #pragma optimize("", off) 关闭 main() 函数的优化没有任何作用。我该怎么做才能使其输出“January 9 8”？

P02.cpp 包含：

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>

using namespace std;

int main(){

    system("cls");

    string s = "";

    ifstream tt;
    tt.open("P02.DAT");

    getline(tt, s);

    cout << s << endl;

    return 0;
} 
```

P02.DAT 包含：

```
January 9 8
February 19 17
March 20 23
April 20 15
May 15 16
June 8 7
July 12 9
August 20 18
September 21 27
October 18 17
November 19 24
December 18 17 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:45:11.483

这听起来像是一个经典的工作目录问题。在 Visual Studio 外部运行时，确保 P02.DAT 与可执行文件位于同一目录中。

在 IDE 中执行时，Visual Studio 通常将当前工作目录设置为解决方案的根目录。你可能有这样的布局：

*   构建\项目.sln
*   构建\P02.DAT
*   构建\调试\project.exe
*   构建\发布\project.exe

在 Visual Studio 中执行 project.exe 时，它​​将设置要构建的工作目录，允许您的应用程序访问 P02.DAT。如果您在 Visual Studio 之外执行 project.exe（例如在 cmd 实例中），它将在您所在的任何目录中查找。

# twitter-bootstrap - 在 Twitter Bootstrap 中隐藏移动设备侧边栏的样式问题

> ID：12504393
> 
> 赞同：0
> 
> 时间：2012-09-19T23:45:43.200
> 
> 标签：twitter-bootstrap, responsive-design

我有以下简单的标记：

```
<div class="container">
    <div class="row">
        <div class="span8">
            <!- Main page -->
        </div>
        <div class="span4 visible-desktop">
            <!- Right-hand Sidebar -->
        </div>
    </div>
</div> 
```

基本上，我想要的只是删除非桌面设备的侧边栏，以便主页占据整个宽度。

使用标记后，侧边栏在较小的屏幕（例如平板电脑）上不可见，但主要位不会延伸到整个屏幕，它只会留下一个白色间隙。

在非常小的屏幕（例如手机）上，侧​​边栏确实会正确消失 - 我认为这是没有空间的时候。

如何更改标记/样式以使其按平板电脑设备的要求工作？

（我知道 jQuery 是一种选择，但如果可能的话，我更喜欢非 js 方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:53:11.840

好的，所以更新了我的问题，因为我第一次没有正确理解我的 OP 问题。

我不相信引导程序希望 @media 标记以这种方式工作，但您可以针对目标媒体大小编辑 bootstrap-responsive.css 代码。

您应该在 css 文件中看到类似的内容

```
media (min-width: 768px) and (max-width: 979px) {
    .row {
         margin-left: -20px;
         *zoom: 1;
    }
.
.
.
    .magepage{
         width:100%;
    }
} 
```

让你的代码像这样

```
<div class="container">
    <div class="row">
        <div class="span8 mainpage">
            <!- Main page -->
        </div>
        <div class="span4 visible-desktop">
            <!- Right-hand Sidebar -->
        </div>
    </div>
</div> 
```

希望这可以帮助，

# nservicebus - 使用 NServiceBus，如何检查总线是否准备好？

> ID：12504397
> 
> 赞同：2
> 
> 时间：2012-09-19T23:46:14.837
> 
> 标签：nservicebus

如果我尝试发送消息（`bus.Send<SomeCommand>(...)`例如使用），并且由于某种原因端点不可用（可能尚未设置），我会收到类似于以下内容的异常

> *找不到目标队列“myqueue@mycomputer”。您可能在配置文件的 UnicastBusConfig 部分的 MessageEndpointMappings 中错误地配置了此类消息的目标 (MyCommands.SomeCommand)。也可能是给定队列尚未创建或已被删除。*

我想通过提前（在应用程序启动时）检查总线是否准备好并且端点可以访问来避免这种情况。

没有在每辆公共汽车上捕获异常。发送，还有其他方法可以确定公共汽车的健康状况吗？我正在寻找类似的东西，`bus.IsReady()`但我找不到。

# gcc - Automake 链接模块

> ID：12504403
> 
> 赞同：1
> 
> 时间：2012-09-19T23:47:06.103
> 
> 标签：gcc, gnu, ld, autoconf, automake

我对 automake/autoconf 有疑问。我将首先向您展示我的源代码树的布局：

src
------arch
----------avr
--------------i2c.c
--------sys
------ -----线程.c

现在我的问题。完全编译arch/avr/i2c.c和sys/thread.c并不难。但我实际上想要的是部分编译我的所有子目录（使用 gcc -c），然后将一个子目录中的所有对象链接在一起（ld -r），并在编译所有子目录时制作这些子目录对象文件的程序。这可能吗？如果可以，怎么做？

格雷茨，米歇尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T05:38:51.837

Automake 不支持`ld -r`，我认为`libtool`也做不到。通常的设置是为每个目录构建一个静态存档，并将主程序与这些静态存档链接。

你可以在`arch/avr/Makefile.am`

```
noinst_LIBRARIES = libavr.a
libavr_a_SOURCES = i2c.c ... 
```

类似的东西`sys/`，`src/Makefile.am`看起来像

```
SUBDIRS = arch sys .
bin_PROGRAMS = foo
foo_SOURCES = main
foo_LDADD = arch/avr/libavr.a sys/libsys.a 
```

# spring - 用于 HTTP 请求的 Spring AOP 日志记录

> ID：12504404
> 
> 赞同：2
> 
> 时间：2012-09-19T23:47:16.633
> 
> 标签：spring, logging, aop

我正在尝试通过 aop 在控制器中记录 http 请求。但是，在方面代码中，如果我

```
 httpServletRequest.getInputStream() 
```

那么请求数据将无法在主流中检索。

所以，我在控制器中创建了另一个公共方法，它传入了请求字符串

```
 public String processRequest(String data){...} 
```

这个方法是记录“数据”的切入点。

但问题是，Spring 无法识别该方法的切入点，该方法没有日志记录。我需要这方面的帮助。

这是aop的定义

```
 <bean id="myLogger" class="com.my.MyLogger" />

<aop:config>
    <aop:aspect id="Log" ref="myLogger">
        <aop:around  method="log" pointcut="execution(public * com.my.controller.processRequest(..))" />
    </aop:aspect>
</aop:config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:04:00.513

Spring AOP 默认使用 AOP 代理。因此，您的原始 bean 被生成的代理 bean 包装，并且所有“外部”调用都通过代理。内部方法调用（在同一个 bean 中）绕过代理。

在这里很好地解释了：http: [//static.springsource.org/spring/docs/2.5.5/reference/aop.html#aop-understanding-aop-proxies](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html#aop-understanding-aop-proxies)

# ruby-on-rails - vim nerdtree 文件显示带有 * 附加

> ID：12504405
> 
> 赞同：13
> 
> 时间：2012-09-19T23:47:26.350
> 
> 标签：ruby-on-rails, vim, nerdtree

> **可能重复：**
> [gVim 在右侧（和粗体）显示带有星号的每个文件？](https://stackoverflow.com/questions/3435472/gvim-displays-every-file-with-an-asterisk-on-the-right-and-bold)

我在我的 rails 项目中使用带有 nerdtree 插件的 vim，并且一些文件显示为`*`附加到文件名。它们的颜色也与其他文件不同。

```
edit.html.erb*
index.html.erb
show.html.erb* 
```

是什么`*`意思？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T00:25:09.143

关键是可执行位。例如，如果您这样做：

```
$touch no_exec_file exec_file
$chmod -v u+x exec_file
$ls -lF
total 0
-rwxr--r-- 1 reoo reoo 0 2012-09-19 19:14 exec_file*
-rw-r--r-- 1 reoo reoo 0 2012-09-19 19:14 no_exec_file 
```

您可以在 exec_file 中看到“*”，现在，如果您打开 VIM，您可以在 exec_file 中再次看到“*”符号。

因此，NERDTree 插件会为那些可以由用户执行的文件显示“*”符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T23:55:17.917

这意味着您的文件是可执行的，这意味着您授予了它们可执行的权限。或者它们是例如 .exe 之类的文件。

# vb.net - DataReader.Read 后如何插入、更新或删除？

> ID：12504407
> 
> 赞同：3
> 
> 时间：2012-09-19T23:47:38.147
> 
> 标签：vb.net, sqldatareader, datareader

我有一个项目需要在读取时更新数据库`DataReader`，它说`DataReader`已经在这个连接上打开了，必须先关闭。

这是我的代码：

```
Try

    conn = fOpenConnection()
    cmd = conn.CreateCommand
    queryjadi = "select *..."
    cmd = New MySqlCommand(queryjadi, conn)
    dbReader = cmd.ExecuteReader

    While dbReader.Read
        For Each lvi In lsvBOM.Items
            If dbReader("kode") = lvi.Text.ToString Then
                **'here i want to update my database**
            End If
        Next
    End While

    dbReader.Close()

    queryjadi = "SELECT * ... "

    cmd = New MySqlCommand(queryjadi, conn)
    dbReader = cmd.ExecuteReader

    For Each lvi In lsvBOM.Items
        status = False
        While dbReader.Read
            If dbReader("kode") = lvi.Text Then
                status = True
            End If
        End While
        If status = False Then
            'untuk insert
            **'here i want to insert into database**
        End If
    Next

   MessageBox.Show("Data sudah disimpan", "Informasi", MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1)

Catch sqlEx As MySqlException

    fSQLError(sqlEx.Number, sqlEx.Message)

Catch ex As Exception

    MessageBox.Show(ex.Message, "Kesalahan", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1)

Finally
    dbReader.Close()
    cmd.Dispose()
    conn.Close()

End Try 
```

我知道我在读取时无法访问数据库`DataReader`，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:21:36.223

通常，一个连接只支持一个并发操作；因此，如果您想使用单个连接，一种方法是首先缓冲数据*（*到某种列表或表中），然后遍历*内存*中的列表，使用连接执行更新。

根据数据库供应商/版本，您可能能够启用“MARS”（多个活动结果集） - 这是一种在同一连接上*启用多个命令的技术。*例如，在 SQL Server 上，这是通过将连接字符串更改为包括以下内容来激活的：

```
MultipleActiveResultSets=True 
```

第三种选择是使用两个连接；一个用于读取操作，一个用于更新 - 但是，请注意，这可能会遇到连接之间的阻塞（也可能是死锁）问题。

然而，第四个也是最首选的选项是：不要为了更新而通过网络拉取数据。如果可能，在 SQL 中编写一个基于批处理的操作，直接执行更改而无需离开数据库，然后执行该 SQL 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:36:16.940

打开一个新的连接，或者使用不会阻塞连接的技术，比如数据适配器/数据表。

# lambda - 如何在 DrRacket Scheme 中使用 lambda

> ID：12504411
> 
> 赞同：4
> 
> 时间：2012-09-19T23:48:58.163
> 
> 标签：lambda, scheme

我想问你是否可以帮助我进行编程练习。我正在尝试制作这种形式的 lambda 表达式：

```
λz.x(yz) 
```

我理解这一点的方式是，它`y`是一个函数，应用于 value `z`。然后`x`是一个函数，如果该函数`y`应用于`z`. 然后整个表达式是这样说的：

```
λz.x(yz) means: Do the following with the argument z: 
```

1.  将函数`y`应用于`z`.
2.  将该函数`x`应用于第一个过程的结果。

我制作了这个程序来尝试让 Scheme 完成上述所有操作：

```
(define (zlamb)
  (lambda (z)
    (lambda (x)
      (* (lambda (y) (* z 4)) 2)))) 
```

当我运行它时，我得到的只是：

```
Welcome to DrRacket, version 5.3 [3m].
Language: R5RS; memory limit: 128 MB.
( (zlamb) 3)
procedure:...lambdaefing1.rkt:3:4
> 
```

有人可以向我解释我做错了什么吗？我想要得到的是`(3 * 4) * 2 = 24`. 所以我做了（或认为我做了）内部函数`y = z * 4`和外部函数`x = y(z) * 2`。

我在互联网上搜索了所有解释，但在大海捞针中找不到我正在寻找的特定针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:23:27.560

Arafinwe 所说的一切对我来说都非常有道理。但是，我仍然担心您可能会误解您的任务。

更具体地说，lambda 演算本质上是方案术语的子集，语法略有不同。特别是 lambda 演算项 λz。在 Scheme 中写为 (lambda (z) )。好吧，需要注意的是也必须翻译。

应用程序 (zx) 在 Scheme 中简单地写为 (zx)。此外，数学家很懒惰，他们有时会省略括号，所以 a(bc) 实际上是 (a (bc)) 的简写。我正在努力不直接翻译你的术语，在这里:)。

但是请注意，将给定的 lambda 演算项直接翻译成 Scheme 将不是一个格式良好的程序，因为它包含自由引用（“未绑定变量”）y 和 z。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:12:00.250

让我们从内到外分解您的程序：

```
(* z 4) 
```

乘以`z`4

```
(lambda (y) (* z 4)) 
```

一个函数返回`z*4`

```
(* (lambda (y) (* z 4)) 2) 
```

该函数和 2 的乘积。您不能将函数乘以 2。这可能是导致您的错误的原因；也许您的意思是执行以下操作：

```
(define (zlamb)
  (lambda (z)
    ((lambda (y) (* 2 (y z))) ; Note the two parenthesis before lambda - this is a function application
      (lambda (z2) (* z2 4))))) 
```

首先请注意，两个`z`s 最终是相同的，因为`z2`绑定到第`z`3 行的值。实际上它们都可以命名`z`，但我以不同的方式命名它们以防止混淆。

进一步看来，您的基本问题是将函数名称与其参数混淆：

```
(lambda (name) ...) 
```

创建一个**参数**为的**匿名**函数。我们能够像在第 3 行中那样引用第 4 行中的匿名函数的原因是通过构造**`name``y`**

 **```
((lambda (y) ...) (lambda ...)) 
```

它将第二个函数作为参数传递给第一个函数，从而将其命名为`y`。**

# java - restlet 2.1 jar 在哪里

> ID：12504412
> 
> 赞同：0
> 
> 时间：2012-09-19T23:49:09.927
> 
> 标签：java, restlet

该站点[http://www.java2s.com/Code/Jar/o/org.restlet.htm](http://www.java2s.com/Code/Jar/o/org.restlet.htm)有一个 restlet jar 列表。但不是 2.1 版本。当我去官方网站[http://www.restlet.org/downloads/testing](http://www.restlet.org/downloads/testing)时，他们没有罐子。有没有地方可以找到2.1 jar？我对 Java SE 版感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:00:31.033

[我从您提供的http://restlet.org/](http://restlet.org/)链接下载了 restlet 2.1rc6 zip 文件，jar 文件位于 lib 目录中。有一堆包含 jar 文件的子目录。适用于 Java SE Zip 存档的 2.1 版候选发布 6 版（第 2 个链接向下）。

# spring - 如何在工厂bean的工厂方法中定义参数

> ID：12504414
> 
> 赞同：0
> 
> 时间：2012-09-19T23:49:25.960
> 
> 标签：spring, applicationcontext

我有一个具有 A 类型的构造函数参数的 bean，它由工厂类 B 创建，B 有一个工厂方法为“getInstance（字符串名称）”，取决于输入名称 B 类返回 A 的实例，在 applicationContext.xml 文件中，我不知道如何将名称注入“getIntance”方法，这是我目前所做的：

```
<bean id="A" class="blah.blah.blah.">
  <constructor-arg type="foo.foo.foo.foo">
    <bean factory-bean="B" factory-method="getInstance" />  <== should it be getInstance('halo') instead?
  </constructor-arg>
</bean>

<bean id="B" class="boo.boo.boo.boo"></bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:32:28.610

你应该能够做到这一点：

```
<bean id="A" class="blah.blah.blah.">
  <constructor-arg type="foo.foo.foo.foo">
    <bean factory-bean="B" factory-method="getInstance" >  
        <constructor-arg value="aName"/>
    </bean>
  </constructor-arg>
</bean> 
```

# php - 重新打开：PHP array_shift(); VS 重置（）；未设置（）；数组拼接（）；

> ID：12504418
> 
> 赞同：7
> 
> 时间：2012-09-19T23:49:59.173
> 
> 标签：php, reset, unset

## 重新开放：

由于 PHP 是一种服务器端语言，我假设我使用的浏览器并不重要，但显然并非如此。我一直在使用谷歌浏览器。

我在本地机器上安装了 WAMP，因此我可以在本地对其进行测试，看看它是否与我的共享主机帐户一样。两种代码都按应有的方式工作（在 Chrome 中提醒您）。然后我查看了共享主机上完全相同的代码——一个有效，另一个无效。

我打电话给我的共享托管支持，他们试图复制这个问题并说他们没有找到它。因此，我在 Firefox 和 IE 中尝试了它，并且在 IE 中尝试了它，你瞧……它在两者中都能完美运行，就像在 WAMP 上一样。

这对我来说仍然没有多大意义。我在一家知名托管公司的共享托管帐户上使用 PHP 5.3，但由于他们无法真正解决代码问题，因此无处可去。他们可以复制问题，但无法回答原因。我将在接下来的几周内尝试了解更多信息，并在我了解更多信息后发布更新。

## 我想要做的是：

*   生成一系列数字
*   将它们随机排列
*   将该随机排序的数字数组复制到会话数组中
*   获取数组的第一个值，删除该值，并将所有值下移一个

## 这是我的问题：

我尝试使用`array_shift();`它，它在第一次运行时运行良好，但每次运行代码后它都会删除前两个元素。

为了测试发生了什么，我尝试先打印数组，执行`array_shift();`，然后再次打印数组以查看发生了什么。

## 预期成绩：

运行#1：

```
[0]=>5 [1]=>2 [2]=>1 [3]=>4 [4]=>3  //print_r($array);
                                    //execute array_shift($array);
[0]=>2 [1]=>1 [2]=>4 [3]=>3         //print_r($array); 
```

运行#2：

```
[0]=>2 [1]=>1 [2]=>4 [3]=>3         //print_r($array);
                                    //execute array_shift($array);
[0]=>1 [1]=>4 [2]=>3                //print_r($array); 
```

## 实际结果：

运行#1：

```
[0]=>5 [1]=>2 [2]=>1 [3]=>4 [4]=>3  //print_r($array);
                                    //execute array_shift($array);
[0]=>2 [1]=>1 [2]=>4 [3]=>3         //print_r($array); 
```

运行#2：

```
[0]=>1 [1]=>4 [2]=>3                //print_r($array);
                                    //execute array_shift($array);
[0]=>4 [1]=>3                       //print_r($array); 
```

## 我的问题（续）

因此，我尝试使用`reset($array);`,`unset($array[0]);`和`array_splice($array,1,0);`作为 array_shift($array); 的替代方法 它奏效了！然后我尝试并排比较它们并清理代码，现在它们正在做相反的事情。有时reset、unset和array_shift；一次调用时甚至会跳过数组中的最多 7 个单元格。`array_shift();`正在按照我现在想要的方式工作，但我想知道为什么。快把我逼疯了！如果有人可以请帮助我，我将不胜感激。

## 代码转储：

## 未设置、重置、拼接

```
<?php
session_start();
$min = A; 
$max = S;

if((!isset($_SESSION['image'])) || ($_SESSION['image'] == null))
{
$numbers = range($min, $max);  //set a range for all images 
shuffle($numbers); //shuffle the order for randomness

$_SESSION['image'] = $numbers;

echo "<br />Current value: " . $_SESSION['image'][0] . "<br />";
print_r($_SESSION['image']);

reset($_SESSION['image']);
unset($_SESSION['image'][0]);
array_splice($_SESSION['image'],1,0);
echo "<br />New value: " . $_SESSION['image'][0] . "<br />";
echo "<br />1st exec<br />";

}
else
{
echo "<br />Current value: " . $_SESSION['image'][0] . "<br />";
print_r($_SESSION['image']);

reset($_SESSION['image']);
unset($_SESSION['image'][0]);
array_splice($_SESSION['image'],1,0);
echo "<br />New value: " . $_SESSION['image'][0] . "<br />";
echo "<br />2nd exec<br />";

}
?> 
```

## 转移

```
<?php
session_start();
$min = A; 
$max = S;

if((!isset($_SESSION['id2'])) || ($_SESSION['id2'] == null))
{
$numbers = range($min, $max);  //set a range for all images 
shuffle($numbers); //shuffle the order for randomness

$_SESSION['id2'] = $numbers;

echo "<br />Current value: " . $_SESSION['id2'][0] . "<br />";
print_r($_SESSION['id2']);

array_shift($_SESSION['id2']);
echo "<br />New value: " . $_SESSION['id2'][0] . "<br />";
echo "<br />1st execution<br />";

}
else
{
echo "<br />Current value: " . $_SESSION['id2'][0] . "<br />";

print_r($_SESSION['id2']);

array_shift($_SESSION['id2']);
echo "<br />New value: " . $_SESSION['id2'][0] . "<br />";
echo "<br />2nd execution<br />";

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:52:05.663

为了最终了解发生了什么，我建议[注册一个 tick-function](http://php.net/manual/en/function.register-tick-function.php)。滴答函数**可以在每个 PHP 语句执行时执行**。

这是一个简单的，它**跟踪每个语句的行/文件**（随时添加更多详细信息）：

```
// Execute at each single statement
declare(ticks=1);

// Function to get called at each executing statement    
function logEachStatement() {

  $traceInfo = debug_backtrace();
  $lastActivation = $traceInfo[ count( $traceInfo ) - 1 ];

  $info = "\n" 
        . $lastActivation[ 'line' ]  . '@' . $lastActivation[ 'file' ] 
        ;

  $targetFile = dirname( __FILE__ ) . '/stmnt.log' );

  file_put_contents( $targetFile, $info, FILE_APPEND );

}

// using a function as the callback
register_tick_function( 'logEachStatement', true ); 
```

虽然还有其他选项可以追查问题，但此选项**不需要外部基础架构**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:23:29.703

假设您粘贴了*实际*代码，发生这种情况的唯一方法是您发出了无意的中间请求。但是，仅凭给定的信息，我们就不可能确定这种情况如何或为什么会发生。

我的建议是使用您选择的浏览器开发工具（例如 Firebug）并监控网络选项卡以确保只有一个请求被发送到脚本。如果这没有出现您的问题，请添加一些简单的调试日志记录，例如：

```
$log = date('Y-m-d H:i:s')
     . ' :: Request received from '
     . $_SERVER['REMOTE_ADDR']
     . "\n";
file_put_contents('/path/to/your/log/file', $log, FILE_APPEND); 
```

然后在测试后检查您的日志以确保只添加了一个条目。

# iphone - iPhone：为 armv7s 更新应用程序时出现运行时 dyld_fatal_error

> ID：12504419
> 
> 赞同：0
> 
> 时间：2012-09-19T23:50:05.973
> 
> 标签：iphone, ipad, ios6, armv7

我正在尝试更新我的应用程序以使用 iPhone5，这需要确保它是为 armv7 和 armv7s 架构编译的。我已经更新了我的项目中的构建设置，并使用这些设置重新编译了所有静态链接的库。所以它现在编译和链接成功。

但是，在运行 iOS6 的设备 (iPad) 上运行它（当然只支持 armv7 架构）时，我会立即使用以下输出崩溃：

```
dyld: vm_protect(0x00001000, 0x003BB000, false, 0x07) failed, result=2 for segment __TEXT in /var/mobile/Applications/....[name/location of my app].... 
```

我也在跟踪窗口中得到了这个：

```
dyld`dyld_fatal_error:
0x2fe400c4:  trap   
0x2fe400c8:  nop 
```

我没有 iPhone5 来测试二进制文件的 armv7s 部分。当然，在发布到野外之前，我会在真实设备上对其进行测试，但同时我希望能够使用我当前运行 iOS6 的 armv7 iPad/iPhone 继续工作。我正在使用最近发布的 Xcode 4.5。

那么，任何人都知道发生了什么，或者可能有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:56:35.440

重新下载并随后重新编译我包含的库之一解决了这个问题。显然，在添加 armv7s 架构时，我在库的构建配置中更改了不正确的内容，或者库项目的某些部分以某种方式损坏。（受影响的库是 FTGLES2 Xcode 项目中包含的 Freetype2 库。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T05:13:42.393

当您静态重新编译库时，您可能不小心禁用了动态链接（导致编译时将 -static 标志传递给 clang）。

通过在 LLVM 编译器语言设置中将“启用与共享库的链接”切换为“是”（默认值）进行修复。（这会从项目文件中删除 GCC_LINK_WITH_DYNAMIC_LIBRARIES = NO）。

# multithreading - 如何以单线程模式启动我的 grails 开发服务器？

> ID：12504426
> 
> 赞同：1
> 
> 时间：2012-09-19T23:51:40.293
> 
> 标签：multithreading, tomcat, grails

grails run-app 将在嵌入式 tomcat 服务器中启动我的应用程序。

我想配置这个嵌入式服务器，以便只有一个请求处理器线程可用，并且多个线程串行处理而不是同时处理（类似于 rails 世界中的默认 webrick 行为）

是否可以？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:56:53.867

据我所知，Tomcat插件并不直接支持这一点。但是您可以轻松地修改 Tomcat 插件并运行您自己的版本。

如果您查看 org.grails.tomcat.TomcatServer 类，您会看到它启动了一个 Tomcat 实例。这是此类的文档：http: [//tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/startup/Tomcat.html](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/startup/Tomcat.html)

有一个 getConnector() 方法将返回默认的 HTTP 连接器。拥有它后，您可能可以更改设置，例如 maxThreads。

但要小心，性能会很糟糕。但我想你已经知道了。

# unit-testing - Lua：如何验证表是否包含特定功能

> ID：12504434
> 
> 赞同：1
> 
> 时间：2012-09-19T23:52:18.187
> 
> 标签：unit-testing, lua, first-class-functions

我正在开发一个模块，该模块根据传入的参数返回一个充满函数的表。具体来说，该模块返回一组数据转换规则（函数），这些规则需要应用于数据集，具体取决于哪个客户是发送它。

我决定将我的规则库（biz 逻辑）与决定应用哪些规则的代码（配置逻辑）分离。

这是我正在编写的单元测试，以验证 ruleBuilder 是否根据我的一个场景添加了正确的规则（函数）：

```
ruleBuilder = require("ruleBuilder")
ruleLibrary = require("ruleLibrary")
local rules = ruleBuilder.assembleRules("Customer1231")

assert(rules[1] == ruleLibrary.missingSSNRule) 
```

这是进行验证的正确方法吗？即使`ruleLibrary.missingSSNRule`函数通过闭包或参数引用了其他几个函数，这也会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:08:36.327

为了验证一个表是否包含一个特定的函数，你可以使用 Lua 表中的键可以是任何东西（包括函数）这一事实。在您的`assembleRules`代码中，您可以编写如下内容：

```
function assembleRules(...)
  ...
  return {
    [someOtherCoolModule.coolFunction] = someOtherCoolModule.coolFunction,
    [yetAnotherModule.anotherFunction] = yetAnotherModule.anotherFunction,
  }
end 
```

然后稍后您可以简单地检查密钥是否存在：

```
local rules = ruleBuilder.assembleRules("somedata")
assert(rules[someOtherCoolModule.coolFunction]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:02:07.723

假设返回值`ruleBuilder.assembleRules`应该以某种方式知道放入其返回值的`someOtherCoolModule.coolFunction`第 0 个索引（注意：Lua 使用基于 1 的索引。不要使用 0 作为索引），那么是的。

> 即使 someOtherCoolModule.coolFunction 是一个闭包，这会起作用吗？

*Lua 中的所有*函数都是闭包。但是，我将假设您的意思`ruleBuilder.assembleRules`是它将采用`someOtherCoolModule.coolFunction`并围绕它构建一个新功能。

一个函数等于它自己。但*它只*等于它自己。就像两个表只有当它们是*同一个*表对象时才相等，两个函数也只有当它们是*同一个*函数时才相等。函数不等于同一函数的不同实例化，也不等于任何其他函数。[以下是这方面的例子](http://ideone.com/50NrR)。

# actionscript-3 - 如何在 Actionscript 3 中创建无限环绕轨道背景

> ID：12504436
> 
> 赞同：0
> 
> 时间：2012-09-19T23:52:33.873
> 
> 标签：actionscript-3

所以我一直在寻找一种方法来围绕中心点进行背景轨道。我遇到了greensock blitmask，它在包装位图数据以实现无限滚动效果方面做得非常出色。但是，我想不出一种方法来使用这个 blitmask 来旋转位图数据并且仍然具有环绕效果。下面是我的 SWF 的链接。

移动的图像是我希望包装并具有无限滚动效果的图像。问题是处理图像在旋转后从屏幕上移开后的重新定位。

**编辑**：我完全忘记了这个问题，并决定把它放在我的游戏的次要位置，因为它需要很长时间才能弄清楚。我最近回到了这个概念，因为我有一个让它发挥作用的想法。下面是一个指向 .SWF 的链接，它显示了我想要完成的工作。虽然这个例子有效，但我觉得它不是最好的解决方案。

“WASD”控制运动

## [轨道背景](http://shawn-freeman.com/assets/orbitingbkgd.swf)

我使用了一些三角函数来计算星星与玩家之间的距离。如果那颗星超出该距离，则使用它的角度 * -1 重新定位它。此代码在链接下。

```
var travelVal:Number = 0;
var turnVal:Number = 0;
var currentChild:DisplayObject;
var currentStar:Star;
var childIndex:int = 0;
var angle:Number = 0;
var distance:Number = 0;

if (controller.isKeyDown(Keyboard.A))
        {
            turnVal += TURN_SPEED;
        }

        if (controller.isKeyDown(Keyboard.D))
        {
            turnVal -= TURN_SPEED;
        }

        if (controller.isKeyDown(Keyboard.W))
        {
            travelVal += PLAYER_SPEED;
        }

        if (controller.isKeyDown(Keyboard.S))
        {
            travelVal -= PLAYER_SPEED
        }

        for (childIndex = 0; childIndex < numChildren; childIndex++)
        {
            currentChild = getChildAt(childIndex);

            //if (currentChild != player && currentChild != debugOutput && currentChild != blackBkgd)
            if(currentChild is Star)
            {
                currentStar = currentChild as Star;

                //move this child based on the travel value
                currentChild.y += travelVal * currentStar.speed;

                //calculate the orbiting
                distance = Math2.distanceBetweenObjects(player, currentChild);
                angle = Math.atan2(currentChild.y - player.y, currentChild.x - player.x);

                if (distance > STAGE_WIDTH ) angle = angle * -1; 
                //get orginal angle in radians
                //angle = Math.atan2(currentChild.y - player.y , currentChild.x - player.x);
                angle = Math2.radiansToDegress(angle);
                angle += turnVal;
                //currentStar.rotation = angle;

                angle = Math2.degreesToRadians(angle);

                currentChild.x = player.x + (distance * Math.cos(angle));
                currentChild.y = player.y + (distance * Math.sin(angle));
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:23:06.213

为了绕某个中心点旋转，首先平移 (-centerpoint.x,-centerpoint.y)，然后绕 (0,0) 旋转，然后再平移 (centerpoint.x,centerpoint.y)。

# mysql - 第一范式和名字和姓氏

> ID：12504439
> 
> 赞同：-1
> 
> 时间：2012-09-19T23:52:55.910
> 
> 标签：mysql, database, database-design, normalization

我正在尝试掌握 1NF，我想知道下表是否为 1NF。我将假设没有，因为在列中 first_name、last_name 和 full_name 可以重复，因此需要转移到一个新表，其中有列 user_id 和 first_name、last_name 和 full_name。下图是参考数据库的截图。

[http://imgur.com/kerlB](http://imgur.com/kerlB)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T00:20:10.150

1NF 是关于原子性，而不是冗余（这就是更高范式的意义）。本质上，如果所有属性都是原子的，那么您的表就是 1NF。

显然，表是否在 1NF 中取决于您定义为“原子”的内容。“原子性”实际上意味着什么是一个有争议的问题，但我会在这里采取务实的逐案处理方法，并简单地问：

***在我试图解决的问题的上下文中，访问¹值的任何部分是否有意义，或者我总是访问整个值？***

如果我总是访问整体，它在那个特定的上下文中是原子的。

在您的示例中，您可能希望单独访问`first_name`和`last_name`，因此`full_name`将是非原子的，这将是违反 1NF 的原因。但是，如果您知道永远不需要分别访问名字和姓氏，那么您可以**只**使用`full_name`并且仍然不违反 1NF。

* * *

*¹ “访问”值在这里应该得到相当广泛的理解。它可能显然意味着从数据库中读取它，但也可能意味着在约束中使用它，或者索引它等等......*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:01:56.147

当然可以。

您对当前设计所说的话，如果它是第一个正常的，那么单个“实体”（让我们称之为一个人）与一个且只有一个用户记录相关联。

如果您将姓名字段移到单独的表中，您基本上是在说一个“人”可能与一个或多个用户记录相关联，并且该人在更新其姓名时应该对所有用户进行相同的更改他们的“用户”

如果您需要这样的结构，表格看起来更像：

```
user_id|username|password|email|person_id 
```

每个“人”都有一个单独的表格

```
person_id|first_name|last_name|full_name 
```

第一正常不是关于复制数据。只看名字，你很可能有很多人叫“鲍勃”或“爱丽丝”，只是因为数据被一遍又一遍地重复，并不等于说表有重复数据。关键是每条记录都应该是原子的。

# jquery - 自定义图像推子

> ID：12504440
> 
> 赞同：0
> 
> 时间：2012-09-19T23:53:02.403
> 
> 标签：jquery, loops, jquery-animate

我正在尝试制作一个图像推子画廊，它可以循环播放许多图像，然后重复。我已经成功地编写了它在图像中消失的部分，但我不知道如何让它重复。我正在使用的当前代码只是无限加载，我想是因为我以某种方式创建了一个无限循环，但我不确定如何或如何绕过它。

jQuery

```
//create array with the images id tags
var img_arr = [
            '#img1',
            '#img2',
            '#img3'
        ]
        var i = 0;
        arr_length = img_arr.length;
        gal_repeat = img_arr.length - 1;
        $(document).ready(function img_gallery() {
            //loop through the fade animation until the end of the array
            for (i = 0; i < arr_length; i++) {
                $(img_arr[i])
                    .animate(
                        { opacity: '1.0' }, 2000
                    );
                $('.img').delay(1000).animate({opacity: 0.0}, 2000);
                //THIS IS WHERE THE PROBLEM IS.  if I comment out this 'if' 
                //statement, the gallery works fine but doesn't repeat
                if (i == gal_repeat) {
                    i = 0;
                }
            }
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:17:52.050

您可以将 setInterval 用于重复的内容：

```
//create array with the images id tags
var images = ['#img1', '#img2', '#img3'];
numberOfImages = images.length;

$(document).ready(function() {

    var num = 0;
    setInterval(function() {
        num = (num + 1) % numberOfImages;

        $(images[num]).animate({
            opacity: '1.0'
        }, 2000);

        $('.img').delay(1000).animate({
            opacity: 0.0
        }, 2000);

    }, 5000);
}); 
```

# c++ - XOR 运算符 C++

> ID：12504444
> 
> 赞同：2
> 
> 时间：2012-09-19T23:53:43.987
> 
> 标签：c++, encryption, xor

这里简单的问题。XOR 运算符 (^) 有问题。我可以很好地异或整数并得到正确的结果；但是，当对两个字符进行异或运算时，不会返回任何内容：

```
int main() {
    char a = 'a';
    char b = 'b';
    char c;

    c = a^b;
    cout << c << endl;
} 
```

没发生什么事。没有输出。我在这里做错了什么。我正在尝试使用它对具有给定密钥的字符串进行 XOR 加密，但在此操作时遇到问题。我想我可以得到 ASCII 值并将其转换为相应的字符，但是这个工具将用于加密文件以及纯文本，所以我想不惜一切代价避免这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T23:58:58.767

`'a' ^ 'b'`( `0x61 ^ 0x62`) 导致`3`，这是一个*不可打印的字符*，[ASCII](http://en.wikipedia.org/wiki/Ascii) `ETX`，因此没有打印输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:54:56.210

的结果`'a' ^ 'b'`是一个不可打印的字符，即`'\3'`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T00:05:35.753

试试这个。

```
#include <iostream>
#include <iomanip>

int main() {
    char a = 'a';
    char b = 'b';
    char c;

    c = a^b;
    std::cout << std::hex << static_cast<int>(c) << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T01:48:55.183

`std::ostream::operator<<`（并且`std::cout`是`std::ostream`）输出*格式化*文本。当你传递它 a`char`时，它会尝试格式化和输出一个字符（想想 ASCII）。如果`char`不是可打印字符，则不会将其打印出来（原因很明显）。如果您希望它输出格式化的*integer*，则需要对其进行强制转换：

```
char a = 'a'; // 'a' == 0x61
char b = 'b'; // 'b' == 0x62
char c = a ^ b; // 0x61 ^ 0x62 == 0x03
std::cout << static_cast<int>(c) << std::endl; 
```

值得一提的是，如果您使用无格式输出功能`std::ostream::write`，它将输出无格式字符。但是请注意，因为如果您尝试写出一个不可打印的字符，它会“工作”，但您的控制台不会显示它（因为再次，它是一个不可打印的字符）。

# ios - ActionScript、NetStream.Play.Failed iOS AIR 移动

> ID：12504447
> 
> 赞同：3
> 
> 时间：2012-09-19T23:54:19.650
> 
> 标签：ios, actionscript-3, ipad, actionscript, air

我正在尝试在 m4a (aac) 中流式传输本地音频文件，类似于 Tiberiu-Ionuț Stan (http://stackoverflow.com/questions/2036107/aac-mp4-not-working-in-actionscript-3s-netstream)：

```
package
{

    import flash.net.NetConnection;
    import flash.net.NetStream;

    import flash.events.NetStatusEvent;
    import flash.events.AsyncErrorEvent;
    import flash.events.Event;

    public class Mysound
    {
        private var _connection:NetConnection;
        private var _netStream:NetStream;
        private var _filePath:String;
        private var _client:Object;

        public function MainDocument(filePath:String):void
        {
            _filePath = filePath;
            connect();
        }

        private function connect():void
        {
            _connection=new NetConnection();
            _connection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
            _connection.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);

            _connection.connect(null);
        }

        private function netStatusHandler(event:NetStatusEvent):void
        {
            switch (event.info.code)
            {
                case "NetConnection.Connect.Success":
                    requestAudio();
                    break;
            }
        }

        private function requestAudio():void
        {
            _netStream=new NetStream(_connection);
            _netStream.addEventListener(NetStatusEvent.NET_STATUS, this._netStatusHandler);
            _netStream.addEventListener(AsyncErrorEvent.ASYNC_ERROR, this._asyncErrorHandler);

            _client = new Object();
            _client.onMetaData = onMetaData;
            _netStream.client = _client;

            _netStream.backBufferTime = 0;
            _netStream.bufferTime = 0.5;
            _netStream.bufferTimeMax = 5;

            _netStream.play(filePath);
        }

        private function asyncErrorHandler(event:AsyncErrorEvent):void
        {
            trace(event);
        }

        private function onMetaData(metadata:Object):void
        {
            var str:String = "";
            for (var key:String in metadata) {
                str += key + ": " + metadata[key];
            }
            trace(str);
        }
    }
} 
```

它适用于我的模拟器，但不适用于设备（​​ipad）。我发现设备上的 netStatusHandler 捕获状态“NetStream.Play.Failed”，但我不知道为什么，我知道它正确读取文件，因为它确实获得了正确的元数据，它也开始缓冲声音，但无法播放它. 文件位于我的应用程序 swf 旁边的文件夹中，因此它不应该是沙盒问题。我还应该尝试什么让它工作？

# javascript - 如何使用three.js在两种颜色之间进行补间？

> ID：12504449
> 
> 赞同：6
> 
> 时间：2012-09-19T23:54:30.210
> 
> 标签：javascript, animation, three.js, tween, color-blending

我有一个给定颜色的 three.js 对象。我想将它平滑地设置为另一种颜色。在动画期间，它应该只显示开始和结束之间的直接渐变。也就是说，它不应该在 RGB 颜色空间中线性执行补间。我什至不确定 HSV 空间内的线性补间是否会很好看。

如何在 three.js 对象上获得这种颜色补间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:14:21.280

我有一个在 HSV 空间中进行补间的版本。它并不完美，因为沿途会出现许多不同的色调。

Three.js 不包含从`THREE.Color`. 所以，添加一个：

```
THREE.Color.prototype.getHSV = function()
{
    var rr, gg, bb,
        h, s,
        r = this.r,
        g = this.g,
        b = this.b,
        v = Math.max(r, g, b),
        diff = v - Math.min(r, g, b),
        diffc = function(c)
        {
            return (v - c) / 6 / diff + 1 / 2;
        };

    if (diff == 0) {
        h = s = 0;
    } else {
        s = diff / v;
        rr = diffc(r);
        gg = diffc(g);
        bb = diffc(b);

        if (r === v) {
            h = bb - gg;
        } else if (g === v) {
            h = (1 / 3) + rr - bb;
        } else if (b === v) {
            h = (2 / 3) + gg - rr;
        }
        if (h < 0) {
            h += 1;
        } else if (h > 1) {
            h -= 1;
        }
    }
    return {
        h: h,
        s: s,
        v: v
    };
}; 
```

然后，补间相对简单：

```
new TWEEN.Tween(mesh.material.color.getHSV())
    .to({h: h, s: s, v: v}, 200)
    .easing(TWEEN.Easing.Quartic.In)
    .onUpdate(
        function()
        {
            mesh.material.color.setHSV(this.h, this.s, this.v);
        }
    )
    .start(); 
```

我很想听听更感性自然的过渡。

# delphi - MDIChild 最小化未正确激活

> ID：12504456
> 
> 赞同：1
> 
> 时间：2012-09-19T23:55:42.200
> 
> 标签：delphi

您好，一如既往地感谢，我在 MDI 应用程序中最小化 MDIChild 表单时遇到问题 MDIChild simple 当我调用子表单时显示为活动并淡化它，但是当我打开更多表单并最小化时，这些不是活动的，总是活动的似乎要最小化第一个表单，我意识到消息 WM_MDIACTIVATE 不起作用，也许我应该覆盖任何程序窗口？

非常感谢！

# static-analysis - 给定函数 f 的代码，如何静态确定 x 是否影响 f(x)？

> ID：12504458
> 
> 赞同：0
> 
> 时间：2012-09-19T23:55:45.570
> 
> 标签：static-analysis

如果我有某个函数的代码`f`（为了简单起见，它接受一个输入），我需要确定输入是否`x`影响输出`f(x)`，即是否`f`是下面定义的常量函数。

如果wrt 的输出不变，则定义`f`为常量函数。这应该适用于所有输入。因此，例如，如果我们有，它可能会为除 x = 0 之外的所有输入输出 0，它可能会输出错误。所以不是一个常数函数。`f``x``f(x) = 0 power x``f`

为了简单起见，我只能对代码进行静态分析并假设代码是 Java 源代码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:26:00.503

这几乎肯定是可能的。在大多数情况下。没有奇怪的事情发生的地方。

对于普通函数，是实际返回值而不是做自己的小事情的普通有用的类型，是的。

对于一个简单的函数，不是递归的，没有那种讨厌的，手动执行它，我可能会使静态分析等效于符号图，在那里我检查代码并确定*可能*是边界条件的 x 的每个值或类似的（例如，代码中有`if (x < 0)`某处，所以我检查函数的 x 值接近 0）。如果这种尝试注定要失败，请在我尝试将其用于某事之前告诉我。

除非您使用四倍精度 x 值或类似大小的东西，否则使用蛮力磨掉它可能会起作用，因为这样蛮力可能需要数年时间。尽管那时它不再是真正的静态分析。

静态分析通常实际上意味着让计算机通过查看代码来告诉您，而不是您自己查看（至少不是很多）。很多语言都有这样的算法，[维基百科](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)有这样的列表，包括一些免费甚至开源的。可以做某事的最终证明是它已经完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:16:06.223

这显然至少与解决停机问题（作为练习留下的证明）一样难，所以答案是“不”，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:23:16.603

由于您将非终止函数称为非常量，因此这是从您的问题到停止问题的简化：

```
void does_it_halt(...);

int f(int x) {
    if(x == 1) {
        does_it_halt();
    }
    return 0;
} 
```

询问是否`f`为常数等同于询问是否`does_it_halt`停止。因此，您所要求的是不可能的，因为停止问题是无法确定的。

# ios - Flex Mobile 4.6 App 不会在 IOS 上创建数据库？

> ID：12504461
> 
> 赞同：0
> 
> 时间：2012-09-19T23:56:21.043
> 
> 标签：ios, database, sqlite, flex4, flashbuilder4

我已经在 Flex 中创建移动应用程序一年多了，并且做了很多复杂的事情，但是最近我想做的一些简单的事情是不适用于我正在创建的新移动应用程序。

我只是希望能够在设备上创建一个 sqlite db，这样我就可以读取和写入数据，创建数据库我使用了下面的代码：

```
sqlConnection = new SQLConnection();
                sqlConnection.open(File.documentsDirectory.resolvePath("New.db"));
                var stmt:SQLStatement = new SQLStatement();
                stmt.sqlConnection = sqlConnection;
                stmt.text = "CREATE TABLE IF NOT EXISTS cars (id INTEGER PRIMARY KEY AUTOINCREMENT, Name VARCHAR(90))";
                stmt.execute(); 
```

然后，当我在 Flashbuilder 中调试应用程序时，对于 android 和 IOS 来说，一切看起来都很好。但是，当我出于某种原因在设备上运行应用程序时，未创建数据库：-S

这对我来说很奇怪，因为我确信我使用了正确的代码，因为我在另一个应用程序中使用了下面的代码，这与您看到的完全相同，当我在 IOS 上运行该应用程序时，它可以很好地创建数据库： -S：-S

```
sqlConnection = new SQLConnection();
                sqlConnection.open(File.documentsDirectory.resolvePath("Bikes.db"));
                var stmt:SQLStatement = new SQLStatement();
                stmt.sqlConnection = sqlConnection;
                stmt.text = "CREATE TABLE IF NOT EXISTS makes (id INTEGER PRIMARY KEY AUTOINCREMENT, name INTEGER)";
                stmt.execute();
                stmt.text = "CREATE TABLE IF NOT EXISTS models (id INTEGER PRIMARY KEY AUTOINCREMENT, name INTEGER)";
                stmt.execute(); 
```

我不明白为什么我创建的旧应用程序可以工作而新应用程序不能工作？？有谁知道是否有任何其他元素需要到位才能让我将此数据库文件写入 IOS？只是要注意我已将所有权限添加到清单中，感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:47:46.267

我很确定documentsDirectory 在iOS 上是写保护的。

对于特定于应用程序的文件，请`File.applicationStorageDirectory`改用。您对该目录具有开箱即用的读取和写入访问权限，无需更改权限。

# android - 为 Android 应用程序实现密码锁

> ID：12504462
> 
> 赞同：9
> 
> 时间：2012-09-19T23:56:25.540
> 
> 标签：android

我的应用程序包含敏感的用户信息，我们需要实现一个密码屏幕，以便在用户打开应用程序时显示。[这是我在阅读这篇文章后](https://stackoverflow.com/questions/8249651/know-when-to-show-a-passcode-lock)尝试的两种方法。

1.  使用静态变量并将其重置`onStop()`为每个活动，并在每个活动中再次检查它，`onStart()`如果时间超过最小阈值，例如 1-2 秒，则显示密码屏幕。这种方法的问题是我的应用程序还使用意图来调用相机和条形码扫描仪，用户可能会在这些外部应用程序中花费更长的时间。在这种情况下，我可以提高阈值，但这会使计算变得复杂，并不是一个很好的解决方案。

2.  我使用这种方法尝试了另一种方法。

    ```
    protected boolean isAppOnForeground(final Context context) {
    List<RunningAppProcessInfo> appProcesses = ((ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE)).getRunningAppProcesses();

        if (appProcesses == null) {
            return false;
        }

        final String packageName = context.getPackageName();

        for (RunningAppProcessInfo appProcess : appProcesses) {
            if ((appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND) && 
                 appProcess.processName.equals(packageName)) {
                return true;
            }
        }
        return false;
    } 
    ```

但是，当我在每个活动的 onStart 方法中检查它时，这将始终返回 true，因为该进程在它处于 onStart 时已经启动

当用户打开应用程序时，我可以采取任何其他方法来显示密码吗？即使用户单击主屏幕退出应用程序，然后从最近的应用程序返回应用程序，它也应该显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:22:05.807

我已经实现了这个确切的功能。我基本上做了你的#1，但以更干净的方式。

我所做的是编写一个抽象子类`Activity`，并覆盖`onResume()`。在那里，决定是否需要显示 pin 锁定屏幕。如果你这样做了，完成自己并开始密码锁定活动。让您的所有活动扩展此活动。

要记住您所在的位置，您可以在用于启动 pin 锁定活动的意图中添加额外的“起始意图”。当应用程序被解锁时，pin lock Activity 可以使用这个额外的东西来让用户回到他们原来的位置。

如果您的应用程序是基于片段的，这将很简单。每当托管所有片段的活动恢复时，您都会显示 pin 锁定片段。就这样。

由一堆活动组成的应用程序的问题在于没有明确的“启动”应用程序的定义时刻。这个概念不存在。这本质上是您在#1 解决方案中发现的问题。`onResume()`似乎是一个不错的选择，但有很多原因可以调用它。例如，用户启动活动 A，该活动启动活动 B。现在他们按下回。显示销锁，或不？

any solution that utilizes a thread that checks foreground processes is a terrible idea because of the battery impact.

finally, you might want to question the requirement of having a pin lock every time the app is brought into the foreground. it seems excessive if i bounce out to read a text message and come back 10s later i'm forced to re-enter a pin. time based seems more appropriate.

# uinavigationcontroller - iOS 6 UITabBarController 支持当前 UINavigation 控制器的方向

> ID：12504464
> 
> 赞同：17
> 
> 时间：2012-09-19T23:57:04.680
> 
> 标签：uinavigationcontroller, rotation, uitabbarcontroller, orientation, ios6

我有一个正在更新到 iOS 6 的 iPhone 应用程序，但该应用程序存在轮换问题。我有一个`UITabBarController`16 `UINavigationCotrollers`。大多数子视图可以纵向或横向工作，但其中一些仅纵向。在 iOS 6 中，事情在不应该发生的时候发生了变化。

我尝试子类化 tabBarController 以返回`supportedInterfaceOrienations`当前 navigationController 的选定 viewController：

```
- (NSUInteger)supportedInterfaceOrientations{

    UINavigationController *navController = (UINavigationController *)self.selectedViewController;
    return [navController.visibleViewController supportedInterfaceOrientations];
} 
```

这让我更接近了。视图控制器在可见时不会旋转错位，但如果我处于横向并切换选项卡，即使不支持新选项卡，新选项卡也会处于横向。

理想情况下，应用程序只会位于当前可见视图控制器的支持方向。有任何想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-20T02:48:00.840

子类化您的`UITabBarController`重写这些方法：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // You do not need this method if you are not supporting earlier iOS Versions
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

子类化您的`UINavigationController`重写这些方法：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

然后在您不想旋转的视图控制器中实现这些方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

对于您确实想要旋转的视图控制器：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }

    -(NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }

    -(BOOL)shouldAutorotate
    {
        return YES;
    } 
```

您的 tabbarController 应添加为应用程序窗口的 RootviewController。如果您计划支持默认方向，iPhone 的默认方向是颠倒，那么您不需要做任何其他事情。如果你想支持颠倒或者你不想支持另一个方向，那么你需要在 app delegate 和/或 info.plist 中设置适当的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:45:23.170

我遇到了导航堆栈中的一些视图控制器支持所有方向的问题，一些只支持纵向，但`UINavigationController`正在返回所有应用程序支持的方向，这个小技巧帮助了我。我不确定这是预期的行为还是什么

```
@implementation UINavigationController (iOS6OrientationFix)

-(NSUInteger) supportedInterfaceOrientations {
    return [self.topViewController supportedInterfaceOrientations];
}

@end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T12:15:30.827

我认为这样的东西更好（作为类别方法）

```
-(NSUInteger) supportedInterfaceOrientations {
    if([self.topViewController respondsToSelector:@selector(supportedInterfaceOrientations)])
    {
        return [self.topViewController supportedInterfaceOrientations];
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

这确保了该方法的实现。如果您不进行此检查并且该方法未实现（如在 iOS5 环境中），则应用程序应该崩溃！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T00:51:03.753

如果您打算为所有视图控制器启用或禁用旋转，则不需要子类化`UINavigationController`. 而是使用：

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

在你的`AppDelegate`.

如果您计划在您的应用程序中支持所有方向，但在父视图控制器（`UINavigationController`例如堆栈）上支持不同方向，您应该使用

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

from`AppDelegate`结合您的父视图控制器中的以下方法。

```
 - (BOOL)shouldAutorotate 
```

和

```
- (NSUInteger)supportedInterfaceOrientations 
```

但是，如果您计划在同一个导航堆栈中的不同 CHILDREN ViewControllers 中有不同的方向设置（像我一样），您需要检查导航堆栈中的当前 ViewController。

我在我的`UINavigationController`子类中创建了以下内容：

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    int interfaceOrientation = 0;

    if (self.viewControllers.count > 0)
    {
        DLog(@"%@", self.viewControllers);
        for (id viewController in self.viewControllers)
        {
            if ([viewController isKindOfClass:([InitialUseViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else if ([viewController isKindOfClass:([MainViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else
            {
                 interfaceOrientation = UIInterfaceOrientationMaskAllButUpsideDown;
            }
        }
    }
    return interfaceOrientation;
} 
```

由于您无法再从子 ViewControllers 控制呈现的视图控制器的旋转设置，因此您必须以某种方式拦截当前在导航堆栈中的视图控制器。所以这就是我所做的:)。希望有帮助！

# c++ - 奇怪的 C++ 类输出

> ID：12504465
> 
> 赞同：0
> 
> 时间：2012-09-19T23:57:08.073
> 
> 标签：c++, xcode

下面是我为我的 C++ 编程实验室编写的一个类中的一个函数的输出：

```
400370r307.18192e 22404.03336e-41370390400360 
```

**涉及**代码：****

 **`class Worker`

```
void Worker::displayWorker()
cout << name;
cout << hour;
cout << total; 
```

（我正在使用 Xcode 4.4.1 在 Mac 上编程）...

这是工人数组和显示工人的调用-

```
employeeArray[i].displayWorker(); 
```

关于该输出意味着什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:01:00.970

看起来像一些浮点数，但“r”是“奇数”（可能是名称的一部分）。建议更好地分解它：

```
void Worker::displayWorker()
cout << "name=" << name << endl;
cout << "hour=" << hour << endl;
cout << "total=" << total << endl; 
```**

# ios - 哪些 applescript 命令可以发送到 iOS 模拟器？

> ID：12504467
> 
> 赞同：5
> 
> 时间：2012-09-19T23:57:25.980
> 
> 标签：ios, xcode, ios-simulator, applescript

我知道你可以用 applescript 告诉 iOS 模拟器退出。你能告诉它从当前应用程序“回家”吗？然后单击应用程序的图标重新启动它？这对于我需要验证后台任务是否完成的应用程序测试和许多其他情况很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T22:21:20.440

iOS 模拟器不直接支持 AppleScript。它没有脚本字典。这意味着在 AppleScript 中操作它的唯一真正方法是使用适用于任何应用程序的 UI 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:59:24.833

任何 AppleScriptable 应用程序都必须导出脚本字典，以便 AppleScript 知道它的命令是什么。您可以通过在脚本编辑器中打开应用来查看任何应用的字典。

请注意，即使应用程序没有提供您想要的脚本命令，系统 UI 脚本或 Automator 仍可能用于驱动其 UI。（例如，在 iOS 模拟器的菜单栏中选择 Home 或 Rotate 命令。）

您还可以通过 Xcode 附带的 Instruments 应用程序执行 iOS 特定的 UI 自动化操作。

# winforms - MVP 模式 视图界面中包含的内容

> ID：12504468
> 
> 赞同：0
> 
> 时间：2012-09-19T23:57:39.287
> 
> 标签：winforms, mvp

在我被要求编写的 WinForms 应用程序中使用 MVP 模式。请原谅 VB.net，因为我被迫使用它:(

作为 MVP 的新手，我使用了被动模型实现，其中视图和模型之间没有依赖关系，只有演示者知道两者

视图是 UI 的表示，哪些功能应该是 IVIEW 界面的一部分

我是否应该在 IView 中有方法/动作/任务，即

```
 Property QItems As IList(Of QItem)
    Property SelectedQItem As QItem

    Property QueStatus As QueStatus

    Property ReportName As String
    Property ScheduleName As String

    Sub BuildQItems()

    Sub RunQue()

    Sub StopQue()

    Sub CancelCurrent()

    Sub PauseCurrent() 
```

并使调用查看在 winform 中实现的 Iview 接口

```
class Winform 
   implements IView

 Private Sub btnCreate_Click(sender As System.Object, e As System.EventArgs) Handles btnCreate.Click Implements IVIEW.Create
    If (_presenter.CreateSchdule()) Then
        MessageBox.Show("Sucessfully Created")
        Close()
    End If
End Sub

End Class 
```

还是我应该只持有状态

```
 Property QItems As IList(Of QItem)
    Property SelectedQItem As QItem

    Property QueStatus As QueStatus

    Property ReportName As String
    Property ScheduleName As String 
```

并直接调用作为 WinForm 一部分的 Presenter，而不用担心 Iview 接口

IE

```
_presenter.BuildItems()

_presenter.RunQue() 
```

在使用 MVP 时，您如何权衡何时采用这两种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:28:56.233

如果您指的是被动视图方法，那么您不应该尝试调用演示者或在视图中编写业务逻辑。相反，视图应该创建一个传递自身引用的演示者实例。登录表单示例：

```
public LoginView() // the Form constructor
{
   m_loginPresenter = new LoginPresenter(this);
}

public void ShowLoginFailedMessage(string message)
{
   lblLoginResult.Text = message;
} 
```

View 接口应该包含允许演示者向视图呈现业务对象以及管理 UI 状态（间接）的属性。前任：

```
interface ILoginView
{
   event Action AuthenticateUser;
   string Username { get; }
   string Password { get; }
   string LoginResultMessage { set; }
} 
```

演示者将类似于：

```
public LoginPresenter(ILoginView view)
{
   m_view = view;
   m_view.AuthenticateUser += new Action(AuthenticateUser);
}

private void AuthenticateUser()
{
   string username = m_view.Username;
   ...
   m_view.ShowLoginResultMessage = "Login failed...";
} 
```

对 C# 代码感到抱歉，但我有一段时间没有接触过 VB.NET。

# c++ - 似乎无法使用多台显示器进行双缓冲绘画

> ID：12504472
> 
> 赞同：3
> 
> 时间：2012-09-19T23:58:30.717
> 
> 标签：c++, winapi, gdi, screensaver, doublebuffered

我正在尝试重新制作用 C++ 和 WinAPI 编写的 Windows 屏幕保护程序，以便在多个监视器上工作。我发现[这篇文章](http://www.codeproject.com/Articles/7831/Dual-Multiple-Monitor-Support-in-Win32)提供了基础知识。但是当我在自己的代码中实现它时，我得到了一个奇怪的结果。看看这段代码：

```
case WM_PAINT:
{
    PAINTSTRUCT ps = {0};
    HDC hdcE = BeginPaint(hWnd, &ps );

    EnumDisplayMonitors(hdcE, NULL, MyPaintEnumProc, 0);

    EndPaint(hWnd, &ps);
}
break;

BOOL CALLBACK MyPaintEnumProc(
      HMONITOR hMonitor,  // handle to display monitor
      HDC hdc1,     // handle to monitor DC
      LPRECT lprcMonitor, // monitor intersection rectangle
      LPARAM data       // data
      )
{
    MONITORINFO mi = {0};
    mi.cbSize = sizeof(mi);
    if(GetMonitorInfo(hMonitor, &mi))
    {
        //Is it a primary monitor?
        BOOL bPrimary = mi.dwFlags & MONITORINFOF_PRIMARY;

        DoDrawing(bPrimary, hdc1, &mi.rcMonitor);
    }

    return 1;
}

void DoDrawing(BOOL bPrimaryMonitor, HDC hDC, RECT* pRcMonitor)
{
//#define DIRECT_PAINT          //Comment out for double-buffering

    int nMonitorW = abs(pRcMonitor->right - pRcMonitor->left);
    int nMonitorH = abs(pRcMonitor->bottom - pRcMonitor->top);

    HDC hMemDC = ::CreateCompatibleDC(hDC);
    if(hMemDC)
    {
        HBITMAP hMemBmp = ::CreateCompatibleBitmap(hDC, nMonitorW, nMonitorH);
        if(hMemBmp)
        {
            HBITMAP hOldBmp = (HBITMAP)SelectObject(hMemDC, hMemBmp);

            COLORREF clr, clrBorder;
            if(bPrimaryMonitor)
            {
                clr = RGB(0, 128, 0);           //Green
                clrBorder = RGB(255, 0, 0);
            }
            else
            {
                clr = RGB(128, 0, 0);           //Red
                clrBorder = RGB(0, 255, 0);

            }

            RECT rcRect;
#ifndef DIRECT_PAINT
            //With double-buffering
            rcRect.left = 0;
            rcRect.top = 0;
            rcRect.right = nMonitorW;
            rcRect.bottom = nMonitorH;
#else
            rcRect = *pRcMonitor;
#endif

            HBRUSH hBrush = ::CreateSolidBrush(clr);

#ifndef DIRECT_PAINT
            //With double-buffering
            ::FillRect(hMemDC, &rcRect, hBrush);
#else
            ::FillRect(hDC, &rcRect, hBrush);
#endif

#ifndef DIRECT_PAINT
            //With double-buffering
            ::BitBlt(hDC, pRcMonitor->left, pRcMonitor->top, nMonitorW, nMonitorH, hMemDC, 0, 0, SRCCOPY);
#endif

//Debugging output
CString _s;
_s.Format(_T("%s\n")
          _T("%s\n")
          _T("hDC=0x%X\n")
          _T("hMemDC=0x%X\n")
        _T("RcMonitor: L=%d, T=%d, R=%d, B=%d")
          , 
          bPrimaryMonitor ? _T("Primary") : _T("Secondary"),
#ifndef DIRECT_PAINT
          _T("Double-buffering"),
#else
          _T("Direct paint"),
#endif
          hDC,
          hMemDC,
          pRcMonitor->left,
          pRcMonitor->top,
          pRcMonitor->right,
          pRcMonitor->bottom);
::DrawText(hDC, _s, _s.GetLength(), pRcMonitor, DT_NOCLIP | DT_NOPREFIX);

            SelectObject(hMemDC, hOldBmp);
            ::DeleteObject(hMemBmp);
        }

        ::DeleteDC(hMemDC);
    }

} 
```

绘画总是在主显示器上工作。但是当我画到辅助显示器时，我只能直接画到它的 DC。当我使用双缓冲技术（将 DIRECT_PAINT 预处理器指令注释掉）时，我只会在应该是红色的辅助监视器上看到黑屏。

我在这里附上两张截图。

第一个使用直接绘画的作品： ![在此处输入图像描述](../Images/b6c998789c6603c9a441ef6464c306d8.png)

然后是双缓冲失败的那个： ![在此处输入图像描述](../Images/615dd5facd8f2c29955546ab69748f05.png)

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:36:57.167

将 WM_PAINT 的代码替换为

```
case WM_PAINT:
   hdc = BeginPaint(hWnd, &ps);
   EnumDisplayMonitors(hdc, NULL, MyPaintEnumProc, 0);
   EndPaint(hWnd, &ps); 
```

和

```
case WM_PAINT:
   hdc = GetDC(NULL);
   EnumDisplayMonitors(hdc, NULL, MyPaintEnumProc, 0);
   ReleaseDC(NULL, hdc); 
```

它会起作用。

请参阅此[http://msdn.microsoft.com/en-us/library/windows/desktop/dd162610(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162610(v=vs.85).aspx)。

# python - 使用python仅计算文本文件中的每个单词一次

> ID：12504477
> 
> 赞同：0
> 
> 时间：2012-09-19T23:59:36.680
> 
> 标签：python, algorithm, dictionary, iteration, defaultdict

我有一个小 Python 脚本，我正在为课堂作业做准备。该脚本读取一个文件并打印 10 个最频繁和最不频繁的单词及其频率。对于这个作业，一个单词被定义为 2 个字母或更多。我的词频工作得很好，但是任务的第三部分是打印文档中**唯一**词的总数。唯一词含义计算文档中的每个词，**只计算一次。**

在不过多更改当前脚本的情况下，如何只计算一次文档中的所有单词？

**ps 我使用的是 Python 2.6，所以请不要提及 collections.Counter 的使用**

```
from string import punctuation
from collections import defaultdict
import re

number = 10
words = {}
total_unique = 0
words_only = re.compile(r'^[a-z]{2,}$')
counter = defaultdict(int)

"""Define words as 2+ letters"""
def count_unique(s):
    count = 0
    if word in line:
        if len(word) >= 2:
            count += 1
    return count

"""Open text document, read it, strip it, then filter it"""
txt_file = open('charactermask.txt', 'r')

for line in txt_file:
    for word in line.strip().split():
        word = word.strip(punctuation).lower()
        if words_only.match(word):
               counter[word] += 1

# Most Frequent Words
top_words = sorted(counter.iteritems(),
                    key=lambda(word, count): (-count, word))[:number] 

print "Most Frequent Words: "

for word, frequency in top_words:
    print "%s: %d" % (word, frequency)

# Least Frequent Words:
least_words = sorted(counter.iteritems(),
                    key=lambda (word, count): (count, word))[:number]

print " "
print "Least Frequent Words: "

for word, frequency in least_words:
    print "%s: %d" % (word, frequency)

# Total Unique Words:
print " "
print "Total Number of Unique Words: %s " % total_unique 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:03:19.140

计算字典中`key`s的数量：`counter`

```
total_unique = len(counter.keys()) 
```

或者更简单地说：

```
total_unique = len(counter) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T00:13:07.607

A`defaultdict`很棒，但它可能比你需要的更多。关于最常用词的部分，您将需要它。但是在没有这个问题的情况下，使用 a`defaultdict`是多余的。在这种情况下，我建议使用 a`set`代替：

```
words = set()
for line in txt_file:
    for word in line.strip().split():
        word = word.strip(punctuation).lower()
        if words_only.match(word):
               words.add(word)
num_unique_words = len(words) 
```

现在`words`只包含唯一的单词。

我发布这个只是因为你说你是 python 新手，所以我想确保你也知道`set`s。同样，出于您的目的， a`defaultdict`工作正常并且是合理的

# c++ - 关于 Boost 共享内存的问题

> ID：12504480
> 
> 赞同：3
> 
> 时间：2012-09-20T00:00:15.770
> 
> 标签：c++, boost, ipc, shared-memory, boost-interprocess

我正在尝试提出一种简单但可移植的方式来使用共享内存。`Boost::interprocess`似乎是一个不错的起点，但我遇到了一些问题/担忧。

1.  我可以以某种方式查询 shm 段的存在吗，最好使用 boost API？我总是可以尝试使用`create_only`并捕获异常来创建它，但这是一个糟糕的设计，我不希望堆栈在“好”路径中展开。
2.  即使附加了其他进程，我也可以截断该段吗？（当然，前提是我会处理同步）我想所有其他进程都必须重新映射，它们是否也必须重新连接？
3.  Boost doc说，在Windows上，便携式`shared_memory_object`实际上并不是共享内存本身，而是一个内存映射文件。我理解正确吗？这意味着我必须在 Windows 上使用专门的代码，这是我试图避免的。让我质疑 Boost 是否适合我的目的，还有其他选择吗？与其与 boost 作斗争，我还不如自己编写特定于平台的代码——在您看来，这值得付出努力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T21:07:16.663

1.  不，这不是糟糕的设计。这是使用 IPC 执行此操作的标准方法。您（通常）无权访问命名系统，并且拥有诸如文件系统之类的现有对象列表。
2.  如果我没记错的话：如果你在映射时截断，新的无效地址会出现内存冲突（如果支持内存保护）。你不必重新映射，你只需要关心你在做什么。我不确定您是否真的需要截断 SHM，但这是您的问题。
3.  这不是问题，它只是意味着底层对象是一个文件，因为 SHM 的标准语义包括持久性。但不要在意，那是提升内部技巧。语义是你想要的，所以用它来获得可移植性！

# mysql - 选择一个 DISTINCT ID，然后从另一个表中提取数据

> ID：12504485
> 
> 赞同：0
> 
> 时间：2012-09-20T00:01:13.603
> 
> 标签：mysql, logic

我有 2 个 MySQL 表，一个用于零件，一个用于多年。我不知道如何在stackoverflow上制作表格..不断制作标题所以这是我解释我需要什么的弱尝试。

表格1

```
id | part_id | years
====================
 0 |    15   | 1945
 1 |    15   | 1946
 2 |    16   | 1944
 3 |    16   | 1947
 4 |    16   | 1948
 5 |    17   | 1953 
```

您可能已经猜到了，part_id 是部件表中部件的 id 号。现在，我知道我有这个可以根据年份提取一个不同的零件 ID。那部分很容易。

```
SELECT DISTINCT part_id FROM `years` WHERE year BETWEEN 1945 AND 1949 
```

这只是一个例子，但它的工作方式与我想要的完全一样。给我

15 和 16。只有一次。这是伟大的。

现在，我是否需要在 php 中循环以从部件中获取信息？我不知道如何在这里加入。

```
<?php
foreach($item_pulled_from_db as $newid) {
    $query = "SELECT * FROM 'parts' WHERE id = $newid";
} // I know there's more stuff to do in here, just a basic overview for you to look at
?> 
```

我应该做上面的代码吗？有没有办法选择一个 DISTINCT part_id 然后从另一个表中为 MySQL 中的该 ID 提取数据？还是我必须做这样的循环？

编辑：我希望这不是一个太令人困惑的问题。我不太会说话，这就是我喜欢编程的原因。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:20:25.107

使用连接：

```
SELECT parts.*
FROM parts
JOIN (SELECT DISTINCT part_id
      FROM years
      WHERE year BETWEEN 1945 AND 1949) years
ON parts.id = years.part_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:20:57.630

您可以在单个查询中使用 JOIN 来完成此操作。尝试：

```
SELECT `parts`.* FROM `parts`
INNER JOIN `years` ON `years`.`part_id` = `parts`.`id`
WHERE `years`.`year` BETWEEN 1945 AND 1949 
```

从 PHP 执行该单个查询，然后获取结果集。它应该与使用多个查询得到的结果相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:21:45.683

此查询为您提供所需的结果：

```
SELECT DISTINCT
    p.*
FROM 
    years y
INNER JOIN
    parts p ON p.id = y.part_id
WHERE 
    y.year BETWEEN 1945 AND 1949 
```

# python - pycrypto 和谷歌应用引擎

> ID：12504489
> 
> 赞同：3
> 
> 时间：2012-09-20T00:01:59.157
> 
> 标签：python, google-app-engine, libraries, pycrypto

您如何将 pycrypto 与 GAP 一起使用？

[这里](https://developers.google.com/appengine/docs/python/tools/libraries)说不支持最新版本。这是否意味着我必须使用他们指出的版本？

我试过了，但是，当我执行时，`setup.py`我得到了错误`src/MD2.c:15:20: fatal error: Python.h: No such file or directory compilation terminated.
error: command 'gcc' failed with exit status 1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T06:10:01.027

几小时前发布的 App Engine 1.7.2 现在支持最新版本 PyCrypto 2.6。链接的文档可能已过时，很快就会更新。您可以通过[指示应用引擎包含它来使用它](https://developers.google.com/appengine/docs/python/python25/migrate27#Configuring_Libraries)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T02:00:41.333

要使 GAE 使用 pycrypto，您必须将以下内容添加到您的 app.yaml 文件中：

```
libraries:
- name: pycrypto
  version: "2.6" 
```

像一个魅力，[像代码](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.AES-module.html)

```
from Crypto.Cipher import AES
from Crypto import Random
class MainPage(webapp2.RequestHandler):
  def get( self ) :
    self.response.headers['Content-Type'] = 'text/plain'
    key = b'Sixteen byte key'
    iv = Random.new().read(AES.block_size)
    cipher = AES.new(key, AES.MODE_CFB, iv)
    msg = iv + cipher.encrypt(b'Attack at dawn')
    self.response.write( msg ) 
```

应该像魅力一样工作（实际上会触发下载！）

[此处包含有关可用库的哪些版本的信息](https://developers.google.com/appengine/docs/python/tools/libraries27)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T05:52:09.907

GAP 不会让你使用完整版的 pycrypto，因为它有很多 C，所以你不能部署它，他们必须把它削减到他们可以允许的范围内。你必须使用`from google.appengine.dist import use_library`然后`use_library('lib', 'version.')`。希望它有点帮助。

# php - 当 PHP 运行 MySQLi 查询时，Jquery '正在加载'消息

> ID：12504490
> 
> 赞同：0
> 
> 时间：2012-09-20T00:02:04.270
> 
> 标签：php, jquery, mysql, ajax, mysqli

我正在编写一个对数据库进行一些报告的页面。为简单起见，我所包含的所有内容仅使用一个字段。一旦我了解了我必须做什么的概念，我就可以将它应用到完整版本，这是一个更大的数据库。

这是我的结构的一个想法，以及我希望它能够做什么。我有 results.php，它有一个表单，用户可以在其中输入名称并单击提交。当他们单击提交时，我希望它弹出一个带有“请稍候”消息的弹出窗口（尝试 BlockUI，但对建议开放）。而在后台getstuff.php 正在抓取输入的名称并检查该名称的数据库。一旦找到（或未找到），blockUI 消息就会消失，并在 results.php 中的表单下现在显示一个表格，其中包含来自 getstuff.php 的结果

代码：结果.php：

```
<form action="getstuff.php" method="post" enctype="multipart/form-data" id="aplas" name="aplas" class="cmxform">
    <table cellpadding="0" cellspacing="3" id="reportTable">
      <tr>
        <td><label for="name">Name: </label></td>
      </tr>
      <tr>
        <td><input type="text" name="name" id="name" maxlength="3" size="10" /></td>
      </tr>
      <tr>
        <td colspan="9" align="right"><input type="submit" name="submit" value="Find" id="find"></td>
      </tr>
    </table>
  </form>
  <div id="content"> </div> 
```

getstuff.php：

```
require_once('includes/DbDetails.php');
$name = $_POST['name'];
@mysqli_select_db($DBConnect, "DATABASE")
    Or die("<p><b>Unable to select the database.</b></p>" . "<p>Error Code ".mysqli_errno($DBConnect).": ".mysqli_error($DBConnect))."</p>";
$SQLquery = "SELECT * FROM users WHERE name='".$name."'";    
$QueryResult = @mysqli_query($DBConnect, $SQLquery) 
    Or die("<p>Unable to execute the query.</p>"."<p>Error Code ".mysqli_errno($DBConnect).": ".mysqli_error($DBConnect))."</p>"; 
$row = mysqli_fetch_row($QueryResult);
$tableString = "<table><tr><th>Name:</th></tr><tr><td>{$row[0]}</td></tr></table>";
mysqli_close($DBConnect);
echo $tableString; 
```

results.php 中的 Javascript：

```
$(document).ready(function(){
    $('#find').click(function(){
        $.blockUI;
        $.post("getstuff.php", $("#aplas").serialize(), function(data) {
            $('#content').html(data);
            $.unblockUI;
        });
    });
}); 
```

这是我以前没有做过的 blockUI 和额外文件 (getstuff.php) 部分。最初，results.php 表单操作是针对自身的，并且全部包含在一个文件中，但是当查询运行时，页面似乎什么都不做，这对用户来说不是很友好。

一旦查询完成，我正在尝试找出我需要做的事情，以便`$tableString`从 results.php 中的 getstuff.php显示。`<div id="content">`

非常感谢任何有关我出错的地方及其外观的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:18:21.953

您只需要回显 tableString，这是getstuff.php 中唯一缺少的东西

如果你想发送整个表单 $.post("getstuff.php", $("#aplas").serialize(), function(data) {});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:26:14.607

既然你得到了.html（），请检查这是否对你有用

```
require_once('includes/DbDetails.php');
$name = $_POST['name'];
@mysqli_select_db($DBConnect, "DATABASE")
    Or die("<p><b>Unable to select the database.</b></p>" . "<p>Error Code ".mysqli_errno($DBConnect).": ".mysqli_error($DBConnect))."</p>";
$SQLquery = "SELECT * FROM users WHERE name='".$name."'";    
$QueryResult = @mysqli_query($DBConnect, $SQLquery) 
    Or die("<p>Unable to execute the query.</p>"."<p>Error Code ".mysqli_errno($DBConnect).": ".mysqli_error($DBConnect))."</p>"; 
$row = mysqli_fetch_row($QueryResult);?>
<table><tr><th>Name:</th></tr><tr><td>{<?php echo $row[0]?>}</td></tr></table>
<?php 
mysqli_close($DBConnect);
exit();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:06:01.663

好的，在将问题缩小到 jquery 之后，我开始阅读有关表单、.post 等的各种 API，并尝试了一些东西，然后是 BAM！它开始工作了。

将 results.php 头中的 jquery 更改为：

```
$(document).ready(function() {
    $("#aplas").submit(function(event) {
        $.blockUI();
        event.preventDefault();
        $.post("getstuff.php", $("#aplas").serialize(), function(data) {
            $('#content').html(data);
            $.unblockUI();
        });
    });
}); 
```

主要的变化是从

```
$('#find').click(function(){ 
```

到

```
$("#aplas").submit(function(event) { 
```

谢谢你的帮助。

# iphone - 卸载 Xcode 4.5 开发者预览版

> ID：12504492
> 
> 赞同：10
> 
> 时间：2012-09-20T00:02:11.657
> 
> 标签：iphone, ios, xcode, xcode4, developer-tools

我在 Xcode 4.5 DP1 发布给开发人员时安装了它。但是，现在 Xcode 4.5 在 Mac App Store 中发布，我不再需要 DP1。如何在不影响常规 Xcode 安装的情况下完全删除它（以及它安装的开发工具的新版本，如果有的话）？提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T00:13:54.530

从您的应用程序文件夹中删除旧应用程序。Xcode 安装是自包含的，可以在同一台机器上进行多次安装。

# python - 添加具有不同索引的熊猫系列而不获取 NaN

> ID：12504493
> 
> 赞同：28
> 
> 时间：2012-09-20T00:02:13.150
> 
> 标签：python, pandas

我正在尝试在 pandas 中做我认为是直截了当的操作，但我似乎无法让它发挥作用。

我有两个具有不同索引数量的熊猫系列，如果它们共享一个索引，我想将值加在一起，否则我只想传递没有相应索引的值。

例如

```
Sr1 = pd.Series([1,2,3,4], index = ['A', 'B', 'C', 'D'])
Sr2 = pd.Series([5,6], index = ['A', 'C'])
Sr1        Sr2
A     1    A     5
B     2    C     6
C     3
D     4 
```

`Sr1 + Sr2`或`Sr1.add(Sr2)`给

```
A     6
B   NaN
C     9
D   NaN 
```

但我想要的是

```
A     6
B     2
C     9
D     4 
```

其中的`B`和`D`值`Sr1`只是传递。

有什么建议么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-20T00:09:18.543

你可以使用`fill_value`：

```
>>> import pandas as pd
>>> Sr1 = pd.Series([1,2,3,4], index = ['A', 'B', 'C', 'D'])
>>> Sr2 = pd.Series([5,6], index = ['A', 'C'])
>>> Sr1+Sr2
A     6
B   NaN
C     9
D   NaN
>>> Sr1.add(Sr2, fill_value=0)
A    6
B    2
C    9
D    4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-13T05:51:16.903

```
Sr1 = pd.Series([1,2,3,4], index = ['A', 'B', 'C', 'D'])

Sr2 = pd.Series([5,6,7], index = ['A', 'C','E'])
(Sr1+Sr2).fillna(Sr2).fillna(Sr1) 
```

**使用 fillna 的另一种方法。当 indeces 也不匹配时，它适用于所有情况**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-04T04:11:36.777

使用的解决方案`fillna()`：

```
>>> import pandas as pd
>>> Sr1 = pd.Series([1, 2, 3, 4], index = ['A', 'B', 'C', 'D'])
>>> Sr2 = pd.Series([5, 6], index = ['A', 'C'])
>>> (Sr1 + Sr2).fillna(Sr1 + 0)
A    6.0
B    2.0
C    9.0
D    4.0 
```

# eclipse - 外部和嵌套类测试的 Eclipse JUnit 测试，@RunWith(Enclosed.class)

> ID：12504494
> 
> 赞同：1
> 
> 时间：2012-09-20T00:02:29.247
> 
> 标签：eclipse, junit

我在外部类和静态嵌套类上有 @Test 方法。

@RunWith(Enclosed.class) 运行所有嵌套测试，我如何在外部最顶层类中运行这些*以及测试？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T08:50:36.460

正在开发的新 JUnit 5 允许在嵌套内部类中进行测试：http: [//junit.org/junit5/#nested-tests](http://junit.org/junit5/#nested-tests)

这将同时运行测试和嵌套类。此外，与`Enclosed`JUnit 4 运行器不同，我相信 JUnit 5 也会在内部类的每次测试之前和之后运行外部类/类的`@Before`和`@After`方法（这使得以类似于 describe/it 的方式编写测试成为可能[rspec](http://rspec.info/)的语法）。

（在 JUnit 5 从 IDE 等获得更多支持之前，您也可以[使用 JUnit 4 运行 JUnit 5](http://junit.org/junit5/#using-junit-4-to-run-junit-5-tests)）。

[还有一个名为NestedRunner](https://github.com/NitorCreations/CoreComponents/blob/master/junit-runners/src/main/java/com/nitorcreations/junit/runners/NestedRunner.java)的第三方跑步者，我相信它也会做你想做的事，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:43:39.767

`Enclosed`不运行顶级类中的测试，只运行静态内部类中的测试。

将您的测试放入内部类。

# ruby-on-rails - Rails 说，尽管控制台显示数据库，但 class 是 nil

> ID：12504499
> 
> 赞同：0
> 
> 时间：2012-09-20T00:03:36.813
> 
> 标签：ruby-on-rails, ruby, object, web, null

我的 Ruby on Rails 项目中有一个对象（工具）数据库。当我使用“rails dbconsole”和

```
select * from tools; 
```

它返回工具对象的完整列表。但是当我尝试查看以下页面时，它给了我一个错误。

页：

```
 <!DOCTYPE html>
<html lang="en">

<%= stylesheet_link_tag "tools", :media => "all" %>
<body>
<%= @tools.each do |tool| %>
 <%= link_to(tool(image_tag.image_url)) %>
 <% end %>

</body>
</html> 
```

错误：

```
undefined method `each' for nil:NilClass 
```

当我更改代码以添加针对 nil 对象的 if 语句时，页面可以正常工作（不显示任何工具）。

```
<% if @tools.nil? %>
<% else %>
  <%= @tools.each do |tool| %>
    <%= link_to(tool(image_tag.image_url)) %>
    <% end %>
<% end %> 
```

所以看起来@tools 里面没有任何值，但是当我在 dbconsole 中查看它时，那里有工具。我无法弄清楚这一点，过去几天我一直在谷歌上搜索答案，所以欢迎任何和所有想法！

编辑：添加 tools_controller.rb

```
class ToolsController < ApplicationController
before_filter :check_authentication
def check_authentication
  unless session[:user_id]
    session[:intended_action] = action_name
    session[:intended_controller] = controller_name
    redirect_to new_session_url
  end
end

  def new
    @tool = Tool.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @tool }
    end
  end

 def show
 end

 def index
    @tools = Tool.all
  end

  # GET /tools/1/edit
  def edit
    @tool = Tool.find(params[:id])
  end

  # POST /tools
  # POST /tools.json
 def create
    @tool = Tool.new(params[:tool])
    respond_to do |format|
      if @tool.save
        format.html { redirect_to @tool, :notice => 'tool was successfully created.' }
        format.json { render :json => @tool, :status => :created, :location => @tool }
      else
        format.html { render :action => "new" }
        format.json { render :json => @tool.errors, :status => :unprocessable_entity }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:29:57.000

*正如@nbarraille 所建议的那样，为每个*动作加载`@tools`一个 before_filter是一个坏主意，因为有许多（可能是大多数）动作你*肯定*不需要全套工具（例如和）。该行命中您的数据库，因此您应该尽量减少使用它的次数。**`create``destroy``@tools = Tool.all`**

 **对于您在此处的情况，您只需更改您的`show`操作即可使其正常工作：

```
def show
  @tools = Tool.all
end 
```

However, note that normally the `show` action is for displaying a *single* resource (tool), not the whole list of resources (which is normally done in the `index` action). It looks like you're deviating from the normal way of doing things, is there any particular reason why?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:09:00.947

为了使`@tools`变量可以从您的视图中访问，您需要在控制器中声明它，如下所示：

```
@tools = Tool.all 
```

如果您希望它只能从一个页面访问，只需在相应的方法中声明它。

这是一个示例，假设您想让变量可用于您的`home/index`页面：

```
class HomeController < ApplicationController

  def index
     @tools = Tool.all

    respond_to do |format|
      format.html # index.html.erb
    end
  end
end 
```

如果您希望它可以在您的所有页面中访问，您可以在`before_filter`您的`ApplicationController`.

以下是如何做到这一点：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :load_variables

  # Load variables to be used everywhere
  def load_variables
    @tools = Tool.all
  end
end 
```**

# sql-server - 无法在 Linq-to-SQL 中创建基于外键关系的属性

> ID：12504500
> 
> 赞同：0
> 
> 时间：2012-09-20T00:03:49.230
> 
> 标签：sql-server, linq-to-sql

表名：`Author`

*   AuthorID -> 主键
*   名
*   姓

表名：`Titles`

*   ISBN -> 主键
*   书名
*   版号
*   版权

表名：`AuthorISBN`

*   ISBN -> 外键
*   AuthorID -> 外键

我可以：

```
var AuthorsAndISBNs =
            from author in database.Author
            join books in database.AuthorISBN
                on author.AuthorID equals books.AuthorID
            orderby author.LastName, author.FirstName
            select new { author.FirstName, author.LastName, books.ISBN }; 
```

但是，我不能这样做：

```
var authorsAndTitles =
           from title in database.Titles
           from book in title.AuthorISBN
           let author = book.Author
           orderby author.LastName, author.FirstName, title.BookTitle
           select new { author.FirstName, author.LastName, title.BookTitle }; 
```

我认为 LINQ 会根据外键关系自动创建属性，这使您可以轻松访问其他表中的相关行：(

> 作者与 AuthorISBN 具有一对多关系，与 Titles 具有“多对一”关系

请帮忙！被困在这几天：'（谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:25:17.780

为了让 LINQ 让您访问其他表中的相关行，每个表都必须有一个 PrimaryID。问题是“AuthorISBN”表没有primaryID，因此没有创建任何属性:)

# jquery - jQuery - 滚动时控制页面

> ID：12504502
> 
> 赞同：0
> 
> 时间：2012-09-20T00:04:13.040
> 
> 标签：jquery, scroll, viewport

我得到了这个网站，其中有 5 个块，每个人都有视口大小、100% 宽度和 100% 高度。因此，当页面加载时，您只能看到第一个。其他的在它下面。然后，当您向下滚动时，您会看到第二个，然后是第三个，依此类推，直到到达最后一个所在的页面末尾。我在想是否有一种方法可以强制逐块滚动页面而不是默认的线性方式。我希望用户在向下滚动时直接（嗯，不是直接，而是通过动画，如果可能的话）看到第二个块，而不是看到两个块之间的路径。这些块就像不同的页面，无需单击任何位置（因为这将是我使其工作的最简单（也是唯一的）方式），我想逐页移动它们，只需滚动。那可能吗？谢谢！

编辑：

我尝试使用 scrollTo 插件，但我也无法弄清楚。让我们考虑一下用户向下滚动以使其更容易。这就是我所做的：

```
var tempScrollTop, currentScrollTop = 0; // 2 vars to check if user scrolls down
var isScrolling = false;
var nextPage = 2 // I'm on 1st page, I want to show page 2 when user scrolls down;
$(window).scroll(function(){
  currentScrollTop = $(window).scrollTop(); // current position

  if (tempScrollTop < currentScrollTop && ! isScrolling ){ // if user scrolls down
    isScrolling = true; // animation in progress, shouldn't get into this 'if' till finished
    $(window).scrollTo('section#page-' + nextPage, 1000, {
        onAfter: function(){ isScrolling = false; nextPage++; }
    });
  }

  tempScrollTop = currentScrollTop; // update the current position
}); 
```

'if' 语句检查用户是否向下滚动。从技术上讲，它应该可以工作，但是在向我展示了我想要的页面之后，他只是转到下一个，然后是之后的一个，并且一直向下滚动到最后！做了一些测试，我发现应该在每个动画（这意味着一个完整的页面滚动）之后执行的代码是随机执行的。我的意思是， isScrolling = false 不会发生，而 nextPage++ 会发生，这就是它不断滚动的原因（实际上是因为它会转到下一页）。它不应该在动画完成后执行此操作，而不是在执行过程中执行此操作吗？我很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T09:22:45.970

我认为根本原因是，当第一个动画停止并且 isScrolling 未设置时，无论如何都会触发滚动事件，因此您会获得另一个动画，直到页面到达底部。当我尝试在动画停止时取消设置滚动标志时遇到过这样的问题。一个简单的解决方案是延迟取消设置滚动标志，例如

```
$(window).scrollTo('section#page-' + nextPage, 1000, {
    onAfter: function() {
        setTimeout(function() { isScrolling = false; nextPage++; }, 100);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:29:11.417

最好的选择是[jQuery.ScrollTo 插件](http://flesler.blogspot.com.es/2007/10/jqueryscrollto.html)。

它非常容易设置，并允许使用各种动画和表达您想要滚动的位置的方式。

你需要处理滚动事件，[使用这个插件](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)

两者结合，你就可以得到你想要的。

要滚动到下一个或上一个元素，您应该跟踪当前可见项目以便能够转到下一个或上一个。

您还需要在使用 scrollTo 时跟踪滚动位置（sccrollTop 属性），以便您可以猜测用户是向上还是向下滚动。

最后，您可能需要在用户开始滚动时设置“滚动标志”，并在用户停止滚动时取消设置，以便您知道在每次 scrollTo 移动后是否必须继续查看滚动位置。

另一种选择是使用 jQuery 工具，但您应该将设计更改为类似于[此 demo](http://jquerytools.org/demos/scrollable/site-navigation.html)的内容。这不是您要求的，但我认为它提供了更好的用户体验。

# sdk - 在 Titanium Studio 中设置 TideSDK

> ID：12504503
> 
> 赞同：1
> 
> 时间：2012-09-20T00:04:37.390
> 
> 标签：sdk, osx-lion, titanium, tidesdk

我正在尝试在钛工作室中设置潮汐dk，但由于某种原因它无法正常工作......这是我到目前为止所做的：

*   从 appcelerator 下载 Titanium Studio v2.1.2.201208301612
*   从tidesdk.org 下载TideSDK v1.2.0.RC4
*   在 Titanium Studio 中添加了 sdk，如下所示：“帮助 > 安装特定的钛 sdk”

基本上我只是按照以下说明操作：[https](https://groups.google.com/forum/?fromgroups=#!topic/titanium-desktop-transition/wv6fiRD6Sbo) ://groups.google.com/forum/?fromgroups=#!topic/titanium-desktop-transition/wv6fiRD6Sbo 但是不会出现启动新桌面项目的选项。有什么我做错了什么吗？

根据这个谷歌小组的说法，我正在使用狮子 10.7.4，这应该不是问题。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:47:38.110

这里有几件事可以在您的路上为您提供帮助：

即将推出的 1.3.0 支持具有 Xcode 4.x 的 Lion 和 Mountain Lion，但不支持 1.2.0.RC4。1.2.0.RC4 可以在 Xcode 3.x 上与 Snow Leopard 10.6.x 一起正常工作。短期内的另一种可能性是考虑在 Windows 7 或 Ubuntu 11.04 虚拟机上进行开发，直到 1.3.0-beta 版发布。预计此版本很快就会发布，它提供了对核心库的更新，并提供了对 OSX、Windows 和 Linux 的当前操作系统版本的支持。

您在 1.2.0.RC4 中编写的代码将在 1.3.0 中正常工作，因为没有 API 更改。唯一的变化将在 JavaScript 命名空间中。在 1.3.0 中，未来的 JavaScript 命名空间将使用“Ti”而不是“Titanium”。通过在代码中设置全局变量，您可以开始使用“Ti”。

`var Ti = Titanium;`

至于 Titanium Studio，不幸的是 Appcelerator 放弃了桌面支持，但又恢复了它。他们推出了一个据报道可以工作的更新：

[http://preview.appcelerator.com/appcelerator/studio/desktop/update/beta/](http://preview.appcelerator.com/appcelerator/studio/desktop/update/beta/)

如果您遇到任何问题，另一种方法是下载 TiDev 社区：

[http://api.appcelerator.net/p/pages/app_page?token=m4rZLSv6](http://api.appcelerator.net/p/pages/app_page?token=m4rZLSv6)

TiDev 社区确实已经走到了生命周期的尽头，但它将在短期内用于创建运行您的应用程序。

TideSDK 团队正在开发一个名为 TideSDK Builder 的新应用程序。TideSDK Builder 将提供创建、运行和打包应用程序的基础知识。它还将提供用于启动您的应用程序项目的脚手架。还将提供具有类似功能的新潮汐构建器 CLI。我们希望将这些捆绑到 1.3.0 的正式版本中，该版本的目标是 9 月底。

Appcelerator 提供了 Titanium Studio SDK。TideSDK 团队正在对此进行探索，以确保 Titanium Studio IDE 可以在未来继续使用。

最后要记住的是，Titanium Studio 和 TiDev 社区不再支持 Appcelerator 曾经提供的网络打包服务。这意味着在 TideSDK 团队继续检查选项的同时进行本地打包。

请在 twitter 上关注 TideSDK 以获取更新和公告，网址为[http://twitter.com/TideSDK](http://twitter.com/TideSDK)

# c - Sqlite3_bind_text 分段错误

> ID：12504508
> 
> 赞同：0
> 
> 时间：2012-09-20T00:05:54.990
> 
> 标签：c

我的应用程序对给定目录进行递归扫描，我将每个唯一路径存储在数据库中。有一次我遇到了段错误和 glibc 火灾：

```
*** glibc detected *** ./test: double free or corruption (!prev): 0x08cd1a20 *** 
```

gdb 证实了这一点。

调用以下函数时出现问题：

```
int
populatePathDB(sqlite3* db, char *absolutePath)
{
 char *sql;
 sqlite3_stmt *stmt ;
 int ret;

 sql = "INSERT INTO paths (path) VALUES (?)";

 ret = sqlite3_prepare_v2(db,sql,-1,&stmt,NULL);
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db));

 ret = sqlite3_bind_text(stmt, 1, absolutePath, -1, SQLITE_STATIC);
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db));

 sqlite3_step(stmt);
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db));

/* sqlite3_clear_bindings(stmt);
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db));

 sqlite3_reset(stmt);
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db)); */

 ret = sqlite3_finalize( stmt );
 if ( ret != SQLITE_OK)
  DB_ERR(db, sqlite3_errmsg(db));

 return SQLITE_OK;
} 
```

我猜变量 absolutePath（由调用者分配）被删除了两次。即使使用 SQLITE_TRANSIENT 我也有同样的错误。

有任何想法吗？

添加递归扫描功能：

```
int walkDir( char *dir, unsigned int recursive)
{
 DIR* dirstream;
 struct stat statbuf;
 struct dirent *entry = NULL;
 int exists, fd;
 size_t dlen, entlen, nlen;
 size_t buflen = 0;
 char *baseName = NULL;

extern sqlite3 *magicDB_g;
extern sqlite3 *pathDB_g;

 assert (dir !=NULL);

 if ( ( dirstream = opendir(dir) ) == NULL ) {
  ERR_MSG("opendir");
  return (EXIT_FAILURE);
 }

dlen = strlen(dir);
buflen = MEMCHUNK;
if (dlen >= buflen)
  buflen = roundToNextPowerOf2(dlen);

baseName = xmalloc(buflen);

while ( ( entry = readdir(dirstream) ) ) {
    if(!strcmp(".",entry->d_name) ||
        ! strcmp("..",entry->d_name))
           continue;
  if (entry->d_name[0] == '.')
        continue;

  nlen = dlen + (entlen = strlen(entry->d_name));
  if (unlikely(nlen + 2 > buflen) )
        xrealloc(baseName, buflen << 1);

  if (dlen == 1 && *dir == '/' )
     sprintf(baseName, "%s%s" , dir, entry->d_name);
  else
     sprintf(baseName, "%s/%s" , dir, entry->d_name);
     /*snprintf (baseName, need + 2,"%s/%s", baseName, entry->d_name);*/

  exists = lstat(baseName, &statbuf);
  if (exists < 0)
        continue;

  if ( S_ISREG(statbuf.st_mode) && statbuf.st_size != 0 )
  {
     if ((fd = open(baseName, O_RDONLY)) == -1) {
           ERR_MSG("open");
           continue;
        }

    //fileSignature_v1(fd,NBYTES,magicDB_g);

     if ( close(fd) == -1)
        ERR_MSG("close");
  }

  if ( S_ISDIR(statbuf.st_mode) )
  {
     /* Create a absolute path database with unique entries */
     populatePathDB(pathDB_g, baseName); <-- No segfault if not called.
     if (recursive) {
    printf("basename: %s\n",baseName);
        walkDir(baseName,recursive);
     }
   }
}

 free(baseName); <-- Seems to be deleted twice when back from populatePathDB()

 if (closedir(dirstream) == -1)
    ERR_MSG("closedir");

 return (EXIT_SUCCESS);
} 
```

这是错误声明：

```
Program received signal SIGSEGV, Segmentation fault.
_int_malloc (av=0x379440, bytes=34) at malloc.c:3598
3598    malloc.c: Aucun fichier ou dossier de ce type.
(gdb) bt
#0  _int_malloc (av=0x379440, bytes=34) at malloc.c:3598
#1  0x0024fd3c in __GI___libc_malloc (bytes=34) at malloc.c:2924
#2  0x0011541f in local_strdup (s=0xb7fe2a8c "/lib/i386-linux-gnu/libgcc_s.so.1") at dl-load.c:162
#3  0x001185d4 in _dl_map_object (loader=<optimized out>, name=<optimized out>, type=2, trace_mode=0, mode=-1879048191, nsid=0) at dl-load.c:2473
#4  0x00122d5d in dl_open_worker (a=0xbfffe690) at dl-open.c:225
#5  0x0011ecbf in _dl_catch_error (objname=0xbfffe6b4, errstring=0xbfffe6b8, mallocedp=0xbfffe6bf, operate=0x122c30 <dl_open_worker>, args=0xbfffe690)
    at dl-error.c:178
#6  0x001227e4 in _dl_open (file=0x334345 "libgcc_s.so.1", mode=-2147483647, caller_dlopen=0x2d7e38, nsid=-2, argc=2, argv=0xbffff314, env=0x8051040)
    at dl-open.c:639
#7  0x002fbd41 in do_dlopen (ptr=0xbfffe840) at dl-libc.c:89
#8  0x0011ecbf in _dl_catch_error (objname=0xbfffe814, errstring=0xbfffe818, mallocedp=0xbfffe81f, operate=0x2fbce0 <do_dlopen>, args=0xbfffe840)
    at dl-error.c:178
#9  0x002fbe37 in dlerror_run (operate=<optimized out>, args=<optimized out>) at dl-libc.c:48
#10 0x002fbec7 in __GI___libc_dlopen_mode (name=0x334345 "libgcc_s.so.1", mode=-2147483647) at dl-libc.c:165
#11 0x002d7e38 in init () at ../sysdeps/i386/backtrace.c:44
#12 0x00388e8e in pthread_once () at ../nptl/sysdeps/unix/sysv/linux/i386/pthread_once.S:122
#13 0x002d80a5 in __GI___backtrace (array=0xbfffee90, size=64) at ../sysdeps/i386/backtrace.c:121
#14 0x00241310 in __libc_message (do_abort=2, fmt=0x3393bc "*** glibc detected *** %s: %s: 0x%s ***\n") at ../sysdeps/unix/sysv/linux/libc_fatal.c:180
#15 0x0024be42 in malloc_printerr (action=<optimized out>, str=<optimized out>, ptr=0x80c4eb8) at malloc.c:5007
#16 0x0804aa8f in walkDir (dir=0x8075a60 "/home/olivier/Téléchargements", recursive=1) at dirtraverser.c:251
#17 0x0804aa63 in walkDir (dir=0x80528f8 "/home/olivier", recursive=1) at dirtraverser.c:245
#18 0x0804bdc0 in main (argc=2, argv=0xbffff314) at main.c:246 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:29:13.230

您的`xrealloc`调用 ( `xrealloc(baseName, buflen << 1);`) 是错误的：您没有将其结果分配给`baseName`. `xrealloc`可能会释放你给它的缓冲区（并返回一个不同的指针），所以如果你不分配结果，那么你可以双重释放缓冲区。

# java - 如何将 xml 转换为 html 并将其发送到带有图像的传真机？

> ID：12504510
> 
> 赞同：-4
> 
> 时间：2012-09-20T00:06:50.137
> 
> 标签：java, xml, image, xslt, fax

我有一个 XML 文件。我必须阅读这个 xml 文件的内容并将其转换为 html 格式，然后将其发送到带有 java 中的一些图像的传真。

我无法编辑 xml 文件。甚至没有将它链接到 XSLT。

有什么想法我能做到这一点吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:53:15.960

您可以使用[Transformer](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/Transformer.html)将任意 XSLT 应用到使用 java.xml 的文档（XML 或其他）。这个网站和互联网上的其他地方比比皆是。

至于传真部分，谷歌上有很多关于“java 传真”的有趣点击。

# html - 语言切换器、性能优化和 SEO

> ID：12504513
> 
> 赞同：0
> 
> 时间：2012-09-20T00:07:51.057
> 
> 标签：html, performance, seo

我正在开发一个多语言网站。在网站顶部有一个语言切换器。

[语言切换器 http://imageshack.us/a/img443/5456/languageswitcher.png](http://imageshack.us/a/img443/5456/languageswitcher.png)

出于性能原因，这些标志被包装到一个单一的图集（[Atlas http://imageshack.us/a/img834/8260/flagsy.png](http://imageshack.us/a/img834/8260/flagsy.png)）中，并且图像显示为`<a>`元素的背景。

```
<ul class="languages">
    <li><a href=".../en/" class="lang-en"></a></li>
</ul>

a.lang-en { background: url('path-to-atlas.png') -17px 0; } 
```

`<a></a>`锚点 ( )中没有文本。

但是搜索引擎优化呢？

爬虫对这个链接做了什么？我如何告诉爬虫链接的文本类似于`'English (UK)'`or `'Italiano'`？

我可以做类似的事情：

```
<a href=".../en/" class="lang">English (UK)</a>

a.lang {
    line-height: 0; 
    font-size: 0;
    color: transparent; 
} 
```

但这是“隐藏文本”，谷歌讨厌它。

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:34:19.267

老实说，我不会为此担心太多。谷歌正在积极打击过度优化。谷歌知道页面上显示的是什么语言，并会在抓取每个链接时弄清楚。

在按钮的一般情况下，谷歌会查看周围的文本和按钮的目的地来确定相关性。

如今，标题标签几乎没有相关性，因为它经常塞满无意义的关键字，但它对悬停在元素上的用户很有帮助。

谷歌致力于为用户提供最好的服务，尽管他们可能并不总是能做到正确，有时一些非常垃圾/黑帽的东西会从裂缝中溜走，排名第一，但这些不会持久。您能做的最好的事情就是提供出色的用户体验和出色的内容，从长远来看，它会为您提供锻炼。

# asp.net-mvc-4 - 有没有办法执行条件认证？

> ID：12504516
> 
> 赞同：0
> 
> 时间：2012-09-20T00:08:26.110
> 
> 标签：asp.net-mvc-4, forms-authentication

我们正在创建一个 MVC4 文档检索站点，其中一些文档需要身份验证，而其他文档允许匿名访问。

URL 包含一个文件夹 ID，用于检索文档列表。有时所有文件都不需要验证，有时所有文件都需要验证，有时它是混合的。

我将如何处理这个？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:24:15.077

您可以在获取潜在受限文档的操作上创建自定义授权过滤器。

它将首先检查文档是否需要授权，方法是将其与受限制文档的静态缓存 ID 列表进行比较。

然后，如果文档被限制，过滤器将检查当前用户是否被授权。如果用户被授权，则操作将正常呈现。否则，操作结果应与 401/403（以适当者为准）或重定向到默认的“未经授权”页面一起放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:13:20.913

我会在`bool RequiresAuthentication`包含文档的数据库表中添加一个项目。这将是`false`如果文档是免费的（不需要身份验证），`true`如果不是。

然后您可以在提供文档的控制器中执行类似的操作。

```
public Details(int Id)
{
    Document doc = databaseContext.Document.Find(Id);
    if(doc.RequiresAuthentication)
    {
        if(User.Identity.IsAuthenticated)
        {
            return View(doc);
        }
        // If the user is not authenticated, redirect them to log on
        return RedirectToAction("LogOn", "Account");
    }
    else
    {
        return View(doc);
    }
} 
```

您甚至可以将 a 传递`returnUrl`给登录，这样一旦用户登录，他们就会被重定向回他们想要的文档。

# c# - 如何强制编译器检查是否设置了特定属性

> ID：12504517
> 
> 赞同：0
> 
> 时间：2012-09-20T00:08:26.020
> 
> 标签：c#, .net

在下面的类中，我想强制编译器检查它`PropC`是否设置，如果没有，在编译模式下显示错误。

```
public class ClassA 
{
    public object PropA { get; set; }
    public object PropB { get; set; }
    public object PropC { get; set; }        
} 
```

我知道我可以使用[PostShart](http://www.sharpcrafters.com/)创建自定义属性，但我想使用 .NET 内置类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:33:25.937

这不是 .NET 框架的默认功能。

但是，您可以使用[Code Contracts 包来确保 Object Invariants](http://devlicio.us/blogs/derik_whittaker/archive/2009/07/01/code-contracts-primer-part-5-utilizing-object-invariants.aspx)。

您可以配置设置以在您的类上运行[静态代码分析](http://msdn.microsoft.com/en-us/magazine/hh335064.aspx)，以确保满足可验证的不变量。作为后备，您将获得这些合约的运行时安全性，因为访问具有无效返回值的属性将导致运行时错误或调试断言。这是通过代码合同包在编译期间执行代码重写并插入额外代码来验证您的合同来实现的。

请注意，这些行为都取决于您配置的设置。该软件包太复杂，无法在 stackoverflow 答案中解释，但您可以在[http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)阅读手册/文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:12:13.127

[我虽然检查你的程序是否会完成](http://en.wikipedia.org/wiki/Halting_problem)类似于检查，但我认为你想要更多范围的版本：“如果我的对象创建确保在对象离开它创建的函数之前设置属性”。这在理论上是可能的，但 C# 编译器没有提供这样做的方法。我相信在编译时根本不可能进行更广泛的检查“是否在使用前分配了属性”。

重构可能是更好的方法 - 如果您根本不允许创建无效对象，则更容易证明此类对象不存在于程序中。即[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method)可能是一种选择：

```
public class ClassA 
{
   public object PropC { get; private set; }        
   private ClassA (){};
   public Create (object propC)
   {
      return new ClassA{ PropC = propC };
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:12:25.460

您所要求的仅在运行时可用，而不是在编译时可用。您应该使用单元测试来检查是否正在设置属性。

# button - 在 APEX 4.1 中以表格形式手动创建“添加行按钮”给出错误

> ID：12504522
> 
> 赞同：0
> 
> 时间：2012-09-20T00:08:44.760
> 
> 标签：button, row, oracle-apex, manual, tabular-form

我在 APEX 4.1 的表格中创建了手动添加行按钮。但是，当我按下 ADD Row 按钮时，表格形式的查询不会刷新。我在表格区域设置了部分页面刷新。

添加行按钮提交页面。

表格形式具有联合所有查询，查询的第二部分具有列的所有对应空值，并且正在从 Dual 获取数据。它有 where 条件

其中 :REQUEST = 'ADD_ROWS' 并按级别 <=1 连接；

问题。

当我把上面的 where 子句生成页面时，浏览器在底部显示警告，详细信息有以下错误

错误：对象不支持此属性或方法”。

在我按下“添加行”按钮的地方，它会重新加载页面，但不会创建新行。我也在 Firefox 中尝试过。Firefox 没有显示任何警告，但按下 Add Row 按钮时不会创建任何行。

当我在 union all SQL 语句的第二部分注释掉 where 条件时，不会生成警告，所以我认为这与 where 条件有关。

我的添加行功能基于 Denes 在他的应用程序中解释的以下方法

[http://apex.oracle.com/pls/apex/f?p=31517:170:9915790172855](http://apex.oracle.com/pls/apex/f?p=31517:170:9915790172855) :::::

请提供您的宝贵意见。

非常感谢。

# ruby - 我的第一个 ruby 应用程序 - 斐波那契数列

> ID：12504530
> 
> 赞同：2
> 
> 时间：2012-09-20T00:09:33.540
> 
> 标签：ruby

我正在编写一个返回斐波那契数列中第 n 个元素的方法，但遇到了意外的结束错误。

```
def fib_seq(n)

  a = [0]

  n.times do |i|
    if i==0
      a[i] = 0
    else if i==1
      a[i] = 1
    else
      a[i] = a[i-1] + a[i-2]
    end  
  end

  return a[n]
end

puts fib_seq(4) 
```

关于我可以搞砸的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T00:17:08.477

假设您试图返回第 n 个（而不是第 (n-1) 个，即 fib(1) = 0 NOT fib(0) = 0）。

我通过更改来修复它：

```
else if i==1 
```

到

```
elsif i==1 
```

（和）

```
return a[n] 
```

到

```
return a[n - 1] 
```

所以你的最终代码应该是这样的：

```
def fibSeq(n)

  a = [0]

  n.times do |i|
    if i==0
      a[i] = 0
    elsif i==1
      a[i] = 1
    else
      a[i] = a[i-1] + a[i-2]
    end  
  end

  return a[n-1]
end

puts fibSeq(4) 
```

根据您在下面的评论，以下代码将起作用：

```
def fibSeq(n)

  a = [0]

  (n+1).times do |i|
    if i==0
      a[i] = 0
    elsif i==1
      a[i] = 1
    else
      a[i] = a[i-1] + a[i-2]
    end  
  end

  return a[n]
end

puts fibSeq(4) 
```

如果要将 fibs 输出为列表，请使用：

```
return a[0..n] 
```

代替

```
return a[n] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-07T21:13:50.313

非常优化的代码

版本 1

```
def fib(n, cache)
  return 1 if n <= 2
  return cache[n] if cache[n]
  cache[n] = fib(n - 1, cache) + fib(n - 2, cache)
end

cache = {}
puts fib(5,cache) 
```

版本 2

```
def fib(n)
 return 1 if n <= 2
 fib_index = 3
 a, b = 1, 1
 while fib_index <= n
   c = a + b
   a = b
   b = c
   fib_index += 1
 end
c
end

puts fib(100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T00:17:55.957

如果你去递归，这是伪代码：

```
fib(n) {
    if n = 0 -> return 0
    else if n = 1 -> return 1
    else -> return fib(n-1) + fib (n-2)
} 
```

# oracle-apex - 将值传递给交互式报表区域搜索单元

> ID：12504533
> 
> 赞同：1
> 
> 时间：2012-09-20T00:09:55.493
> 
> 标签：oracle-apex

我想知道是否可以从一个页面将一个项目传递到 IRR 搜索单元格，然后根据传入的搜索值项目模拟按下“Go”按钮来处理该搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:19:25.770

[https://apex.oracle.com/pls/apex/f?p=54687:36](https://apex.oracle.com/pls/apex/f?p=54687:36)上的示例

重定向和设置搜索按钮重定向到同一页面并设置隐藏项的值。（我将使用我的示例页面作为参考）

*   创建一个隐藏项`P36_SEARCH_THIS`，值保护为否
*   创建一个动态动作，加载时开火，3 个真实动作

    1.  执行 javascript

        ```
        $("#apexir_SEARCH").val($v("P36_SEARCH_THIS"));
        gReport.search("SEARCH"); 
        ```

    2.  清除，项目，`P36_SEARCH_THIS`

    3.  执行 PLSQL 代码

        ```
        apex_util.set_session_state('P36_SEARCH_THIS', NULL); 
        ```

*   将动态动作的条件（不是When条件）设置为 `Value of Item / Column in Expression 1 is NOT NULL`，并 `Expression 1`设置为`P36_SEARCH_THIS`

将项目设置为不受保护，并且不一定需要清除项目的 2 个动态操作，但它们会阻止记住搜索值，并且在页面加载时搜索将再次消失。一个例子是搜索已经发生，用户删除过滤器，然后在某个时间点按 F5。页面将重新加载并重新应用过滤器。

# java - 如何为 libgdx/box2d 中的特定主体强制执行最大速度？

> ID：12504534
> 
> 赞同：3
> 
> 时间：2012-09-20T00:09:58.153
> 
> 标签：java, box2d, libgdx

我通过 Libgdx 使用 Box2D 来创建场景。我有一个场景，我想不断地推动一个特定的物体`applyForce`（方向会不时改变），但只能达到给定的速度。

想象一个由火箭发动机推动的圆形物体（四面都有喷嘴），G 为零，用于说明。

**有没有办法在不重新计算施加的力或每次更新时重复计算的情况下做到这一点？**我只知道如何为*所有*对象设置最大速度。目前我最好的选择是以`linearDamping`某种方式使用，但我希望有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T10:53:42.307

您可以使用 SetLinearVelocity 覆盖当前速度。

```
b2Vec2 vel = body->GetLinearVelocity();
float speed = vel.Normalize();//normalizes vector and returns length
if ( speed > maxSpeed ) 
    body->SetLinearVelocity( maxSpeed * vel ); 
```

================

*编辑：* 简单的空气阻力可以通过在相反的行进方向上施加一个小的阻力来建模，并与行进速度成比例。

```
b2Vec2 vel = body->GetLinearVelocity();
body->ApplyForce( 0.05 * -vel, body->GetWorldCenter() ); 
```

阻力的比例值（本例中为 0.05）确定阻力将等于火箭发动机施加的力的速度，并且这两个力相互抵消，从而产生最高速度。

```
maxSpeed = thrustForce.Length() / 0.05; 
```

纯粹主义者会指出，阻力实际上是相对于速度的平方，所以更准确地说，你可以这样做：

```
b2Vec2 vel = body->GetLinearVelocity();
float speed = vel.Normalize(); //normalizes vector and returns length
body->ApplyForce( 0.05 * speed * speed * -vel, body->GetWorldCenter() ); 
```

...我认为这会给你一个最高的速度

```
maxSpeed = sqrtf( thrustForce.Length() / 0.05 ); 
```

# java - 在Java中将毫秒字符串转换为日期

> ID：12504537
> 
> 赞同：15
> 
> 时间：2012-09-20T00:11:00.703
> 
> 标签：java, string, date

我有一个字符串 x = "1086073200000" 。这基本上是毫秒，我需要将其转换为日期。

要转换我正在使用

```
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");

long tempo1=Long.parseLong(x);
System.out.println(tempo1);  // output is 86073200000 instead of the whole thing
long milliSeconds=1346482800000L;

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(milliSeconds);
System.out.println(formatter.format(calendar.getTime())); 
```

问题是当我将字符串 x 转换为 long 时，由于 long 大小的限制，一些数字会消失。

如何保留整个字符串。

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-20T00:20:57.507

> ```
> double tempo=Double.parseDouble(z); 
> ```

你为什么要解析你的`String`which 应该是 a `Long`as a `Double`？

尝试使用`Long.parseLong`：

```
String x = "1086073200000"

DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");

long milliSeconds= Long.parseLong(x);
System.out.println(milliSeconds);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(milliSeconds);
System.out.println(formatter.format(calendar.getTime())); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T00:23:25.170

我尝试了这段代码，它对我有用

```
public static void main(String[] args) {
    String x = "1086073200000";
    long foo = Long.parseLong(x);
    System.out.println(x + "\n" + foo);

    Date date = new Date(foo);
    DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
    System.out.println(formatter.format(date)); 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-22T05:56:09.627

```
Date date = new Date(milliseconds); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-29T01:24:03.510

# iphone - iOS 6 4 英寸设备屏幕比例为 2.0 是一个错误，高度是否正确？

> ID：12504541
> 
> 赞同：-2
> 
> 时间：2012-09-20T00:11:49.600
> 
> 标签：iphone, ios

只需在 iphone5 4 英寸模拟器上测试 [UIScreen mainScreen].scale 属性，值为 2.0 ，这是一个错误吗？

[更新] 谢谢Tommy，我对iphone5的绑定大小有错误的想法，新的绑定大小是320x568，所以比例仍然是2.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T00:13:02.370

如果您使用的是 Retina 设备，则比例为 2.0。

# ios - AFNetworking（POST 出现 400 错误）

> ID：12504547
> 
> 赞同：2
> 
> 时间：2012-09-20T00:12:35.500
> 
> 标签：ios, afnetworking, force.com, salesforce-chatter

我的 URL 是正确的，但我的请求必须是格式错误的。我得到了 400。有什么想法吗？API 文档说，如果传递参数而不是 JSON 正文，它可能会返回 400。提前致谢。

```
- (void)postFeedItem:(NSDictionary *)paramDict Response:(void (^)(id))callbackBlock Failure:(void (^)())failure {

NSString *targetUrl = [NSString stringWithFormat:@"%@/services/data/v23.0/chatter/feeds/user-profile/%@/", _appManager.coordinator.credentials.instanceUrl, [_appManager.userInformation objectForKey:@"sfUserId"]];

AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:targetUrl]];
/*
 { "body" :
 {
 Request body example:
 "messageSegments" : [
 {
 "type": "Text",
 "text" : "New post"
 }
 ]
 }
 }
 */

NSArray *arr = [NSArray arrayWithObjects:
                [NSDictionary dictionaryWithObjectsAndKeys:@"Text", @"type",
                 @"New post", @"text",
                 nil],
                nil];
NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:
                      [NSDictionary dictionaryWithObjectsAndKeys:arr, @"messageSegments", nil],
                      @"body",
                      nil];

NSLog(@"JSON: %@", [[NSString alloc] initWithData:[self toJSON:info] encoding:NSUTF8StringEncoding]);

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"feed-items" parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendData:[self toJSON:info]];
}];

[request setValue:[NSString stringWithFormat:@"OAuth %@",_appManager.coordinator.credentials.accessToken] forHTTPHeaderField:@"Authorization"];
[request addValue:@"false" forHTTPHeaderField:@"X-Chatter-Entity-Encoding"];
[request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"success");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"FAILED CHATTER Request: %@ - %@ - %@", [request URL], [request allHTTPHeaderFields], error.description);
}];

[operation start]; 
```

}

这是 NSLog：

2012-09-19 18:10:54.732 RingDNA Free[6018:c07] __47-[ChatterHelper postFeedItem:Response:Failure:]_block_invoke_087 [Line 76] FAILED CHATTER Request: [https://na4.salesforce.com/services/data /v23.0/chatter/feeds/user-profile/00560000001j3paAAA/feed-items](https://na4.salesforce.com/services/data/v23.0/chatter/feeds/user-profile/00560000001j3paAAA/feed-items)- { "接受编码" = gzip; "接受语言" = "en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr , uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8"; 授权=“OAuth 00D60000000KV29！ARkAQFWhnhOtcGFgVMT4MkZHCV3zG9SY4en66718BiG_ZY59W0gR1iSWA8i.ey_b94vqjRW_RQITALBWmfpPrKTGk”；“内容类型”=“多部分/表单数据；边界=边界+0xAbCdEfGbOuNdArY，应用程序/json”；“用户代理”=“com.ringdna.dreamforce.RingDNA-Free/36（未知，iPhone OS 5.1，iPad 模拟器，Scale/1.000000）”；“X-Chatter-Entity-Encoding”=假；} - 错误域=com.alamofire.networking.error Code=-1011 “预期状态代码 [索引数：100（在 1 个范围内），索引：（200-299）]，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:57:12.193

经过几次尝试，我们发现了这一点。基本上，SFDC 会验证您发送到 Chatter API 的参数的顺序，它会出现。如果这对其他人有帮助，现在可以在 Github 中使用 Chatter 帖子的代码示例：

[https://github.com/kyleroche/Dreamforce-2012](https://github.com/kyleroche/Dreamforce-2012)

# r - 如何使用R中的绘图功能更改散点图中x轴和y轴标签的字体大小和颜色？

> ID：12504549
> 
> 赞同：38
> 
> 时间：2012-09-20T00:12:37.573
> 
> 标签：r, scatter-plot

我使用以下代码绘制散点图。如何增加x轴和y轴标签的字体大小和更改颜色？

```
data=read.csv("data.csv") 
plot(data$column1,data$column2,xlab="x axis", ylab="y axis",  pch=19) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-20T00:50:23.723

查看`?par`各种图形参数。

一般`cex`控制大小，`col`控制颜色。如果你想控制标签的颜色，`par`is `col.lab`，轴注释`col.axis`的颜色，`main`文本的颜色`col.main`等。名字很直观，一旦你知道从哪里开始。

例如

```
x <- 1:10
y <- 1:10

plot(x , y,xlab="x axis", ylab="y axis",  pch=19, col.axis = 'blue', col.lab = 'red', cex.axis = 1.5, cex.lab = 2) 
```

![在此处输入图像描述](../Images/847df6f6d2687051c5640098a4464d2b.png)

如果您需要更改周围框和轴线的颜色/样式，请查看`?axis`or `?box`，您会发现您将在调用`box` 和 axis 时使用相同的参数名称。

您可以根据自己的意愿进行大量控制。

例如

```
plot(x , y,xlab="x axis", ylab="y axis",  pch=19,  cex.lab = 2, axes = F,col.lab = 'red')
box(col = 'lightblue')
axis(1, col = 'blue', col.axis = 'purple', col.ticks = 'darkred', cex.axis = 1.5, font = 2, family = 'serif')
axis(2, col = 'maroon', col.axis = 'pink', col.ticks = 'limegreen', cex.axis = 0.9, font =3, family = 'mono') 
```

![在此处输入图像描述](../Images/5458e624ce07b74fb127b110ef6b6d9d.png)

这非常丑陋，但显示了您可以控制的部分内容

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-20T00:30:55.390

要找到正确的参数，您需要首先访问`?plot.default`，它指的是您`?par`和`?axis`：

```
plot(1, 1 ,xlab="x axis", ylab="y axis",  pch=19,
           col.lab="red", cex.lab=1.5,    #  for the xlab and ylab
           col="green")                   #  for the points 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:36:03.683

以 DWins 为例。

我经常做的，特别是当我使用许多具有相同颜色或大小信息的不同绘图时，我将它们存储在我从未使用过的变量中。这有助于我保持代码更简洁，并且可以“全局”更改它。

例如

```
clab = 1.5
cmain = 2
caxis = 1.2

plot(1, 1 ,xlab="x axis", ylab="y axis",  pch=19,
           col.lab="red", cex.lab=clab,    
           col="green", main = "Testing scatterplots", cex.main =cmain, cex.axis=caxis) 
```

你也可以写一个函数，做类似的事情。但对于快速拍摄，这是理想的。您还可以将此类信息存储在额外的脚本中，这样您就没有凌乱的绘图脚本：

然后你用 setwd("") source("plotcolours.r")

然后在一个名为 plotcolours.r 的文件中存储所有例如颜色或大小变量

```
clab = 1.5
cmain = 2
caxis = 1.2 
```

颜色可以使用

```
darkred<-rgb(113,28,47,maxColorValue=255) 
```

由于您的变量“darkred”现在存储了颜色信息，您可以在实际的绘图脚本中访问它。

```
plot(1,1,col=darkred) 
```

# iphone - 如何使用 iPhone 摄像头测量房间内的可见蓝光强度？

> ID：12504550
> 
> 赞同：0
> 
> 时间：2012-09-20T00:12:52.583
> 
> 标签：iphone, objective-c, ios, camera, luminance

我看到在 LUX 中测量像素亮度的算法是（[从这里获得](http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera)）

```
double luminance = r*0.299 + g*0.587 + b*0.114; 
```

**我有兴趣了解“蓝色”光谱中给定图片的光强度，而不是纯亮度。**如何才能做到这一点？是否会简单地获取相机图像中每个像素的加权“蓝色”值并以某种方式平均/添加它们来解决问题？

谢谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:39:33.600

亮度是单位面积的强度。

您发布的公式不是关于将红色、绿色和蓝色强度转换为总亮度，反之亦然；它只是对红色、绿色和蓝色亮度进行加权以获得总亮度。您已经获得了蓝色亮度，因此适用于您的相关公式是：

```
b 
```

或者，如果您愿意：

```
b*0.114 
```

另一方面，这取决于您要问什么，但它可能在这条路径上的某个地方：

每个像素的强度是该像素的亮度乘以像素的面积。

整个阵列的强度是所有这些单独强度的总和。

整个阵列的亮度是整个阵列的强度除以阵列的总面积，显然这也是微不足道的。

整个房间的亮度是……好吧，大概这里的重点是您假设它与相机阵列的亮度大致相同，因此假设它与最后一个值相同。

整个房间内任何平面的强度是亮度乘以该平面的面积，整个房间的强度是所有这些平面的总和，但这些可能对你不是很有用。

照片的强度就是您拍摄照片时整个相机阵列的强度。这可能比房间的强度更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:57:08.163

@abamert 已经给出了正确答案。我正在添加一些细节。

数字成像和视频中的术语`luminance`很常见，但不是最佳选择，因为它可能会与光度学术语混淆。一个更好的选择是`luma`。OP 链接到的文章正是这种混淆（尽管实际上链接到维基百科上的光度学术语条目，具有讽刺意味的是，它恰好以注释开始，*不要与 Luma 混淆*）。

`LUX`是发光强度的度量单位，除非您使用经过完美校准的设备，使用原始数据并确定实际响应曲线，否则您从像素数据中获得的值不能与此类度量相关。您没有从相机图像中获得 LUX 或 Candles 或任何精确的东西。

有几种颜色模型，每个模型可能有多个颜色空间。您的图像数据采用 RGB 格式，但 RGB 是一种颜色模型，而不是颜色空间。有几个 RGB 颜色空间。

该公式是根据颜色空间中的数据计算 NTSC 颜色空间中定义`Y = R*0.299 + G*0.587 + B*0.114`的亮度的标准公式（请注意，Y、R、G 和 B 都是介于 0 和 1 之间的值）。但是您的图像可能不在空间中，它可能在颜色空间中，因此您实际上只是获得了一个不存在于标准定义的颜色空间中的值（在某种意义上，您是在构建自己的空间）。`Y``CIE-RGB``CIE-RGB``sRGB`

这给我们带来了另一个重要的问题：***我有兴趣了解给定图片的光在“蓝色”光谱中的强度，而不是纯亮度。***如果您不准确定义对您来说蓝色光谱是什么，那将毫无意义。正如@abamert 所说，您已经从 RGB 图像中获得了一个 _ *blue _ 值。*那是一种蓝色，根据`sRGB`它使用 D65 白点并具有 x=0.15 和 y=0.06（在`CIE-XYZ`空间中）作为蓝色原色。这更容易计算，因为您已经拥有它。

# java - Java 代码 API 存储库

> ID：12504555
> 
> 赞同：0
> 
> 时间：2012-09-20T00:13:23.043
> 
> 标签：java, api, repository

可能是一个愚蠢的问题，但我还是想尝试一下。我需要一个 Java 存储库或类似的东西，我可以在其中找到使用特定 Java API 的代码。例如，我想查找经常使用 StringBuffer 的 Java 代码。这样做的原因是我可以看到 API 是如何使用的。这样的事情是否存在或至少有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:17:31.893

试试[http://grepcode.com/](http://grepcode.com/) 它搜索开源代码。

# ios - 使用 UIAppearance 指定字体时，UINavigationBar 标题的行为异常（仅限 iOS 5）

> ID：12504556
> 
> 赞同：2
> 
> 时间：2012-09-20T00:13:30.740
> 
> 标签：ios, uiappearance

我正在使用 UIAppearance 为我的应用程序中的 UINavigation 栏标题设置字体。

如果我不设置外观字体，标题会立即出现，正如预期的那样，并且它的呈现不是动画的。

但是，当我使用 UIAppearance 指定替代字体时，标题会出现（使用指定的字体），但会在 iOS 5 上加载时使用某种动画过渡出现。它有时也会停止（？）并且只显示标题的第一个字符. 如果我离开并再次返回，标题将正确显示。

我只在 iOS 5 上看到了这个问题，并且使用字体设置标题在 iOS 6 上表现正确。

在 iOS 5 的模拟器上也可以看到此问题，并且在模拟器中的 iOS 6 上再次正常运行。

我在AppDelegate中设置了外观，如下...

```
[[UINavigationBar appearance] setTitleTextAttributes:
    [NSDictionary dictionaryWithObjectsAndKeys:
        [UIFont fontWithName:FONT_OF_ALL_KNOWLEDGE size:0.0f], UITextAttributeFont,
            nil]]; 
```

栏的标题在 viewDidLoad 中为每个 [tabbed] 视图设置，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.navigationItem setTitle:@"Title"];
} 
```

有没有其他人看到这个问题，有解决办法吗？谢谢。

**更新**

我已经尝试在 viewDidLoad 中明确设置字体（就在设置标题之前），而不是使用 UIAppearance，但我仍然看到同样的问题，并且仍然只在 iOS 5 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:48:42.303

我终于通过创建以下`UIViewController`类别解决了这个问题：

```
#import <UIKit/UIKit.h>

@interface UIViewController (A4UExtras)

+ (NSDictionary *)defaultTitleTextAttributes;

@end

#import "UIViewController+A4UExtras.h"

@implementation UIViewController (A4UExtras)

+ (NSDictionary *)defaultTitleTextAttributes
{
    NSDictionary *navBarTextAttributes = @{
                                           UITextAttributeTextColor         :   [UIColor whiteColor],
                                           UITextAttributeFont              :   [UIFont fontWithName:@"Avenir-Book" size:17.0],
                                           UITextAttributeTextShadowColor   :   [UIColor colorWithRed:0 green:0 blue:0 alpha:.35],
                                           UITextAttributeTextShadowOffset  :   @1,
                                           };

    return navBarTextAttributes;
}

@end 
```

当然，按照您希望的方式配置文本属性。然后，在我的所有视图控制器的`viewDidLoad`方法中，我执行以下操作：

```
#import "UIViewController+A4UExtras.h"

…

- (void)viewDidLoad
{
    [super viewDidLoad];

    // NavBar appearance and setup
    self.navigationController.navigationBar.titleTextAttributes = [UIViewController defaultTitleTextAttributes];

    self.navigationItem.title = @"My Title";
} 
```

它就像一个魅力！希望它也适合你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:18:22.790

有类似的问题。在 iOS < 6.0 的代码 ( )中设置时，我`UINavigationBar`的 s 只会显示标题的一个字符。`self.title = @"Title"`

我通过使用大于的字体大小解决了这个问题`0.0`：

```
[[UINavigationBar appearance] setTitleTextAttributes:@{
    UITextAttributeFont : [UIFont fontWithName:@"HelveticaNeue-Medium" size:20.0]
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T07:31:04.710

使用此代码：

```
[[UINavigationBar appearance] setTitleTextAttributes:
[NSDictionary dictionaryWithObjectsAndKeys:
    [UIFont fontWithName:FONT_OF_ALL_KNOWLEDGE size:0.0f], UITextAttributeFont,
        nil]];
// Present a temp UIViewController 
UIViewController *vc = [[UIViewController alloc]init];
[self presentViewController:vc animated:NO completion:nil];//"self" is an instance of UIViewController
[vc dismissViewControllerAnimated:NO completion:nil]; 
```

看起来不太好，但工作！

# zeromq - ZeroMQ/ZMQ 推/拉模式的用处

> ID：12504559
> 
> 赞同：49
> 
> 时间：2012-09-20T00:13:47.520
> 
> 标签：zeromq, pyzmq

在试验`ZeroMQ` `Push/Pull`（他们所说的`Pipeline`）套接字类型时，我很难理解这种模式的实用性。它被称为“负载平衡器”。

给定单个服务器向多个工作人员发送任务，Push/Pull 将在所有客户端之间平均分配任务。3 个客户端和 30 个任务，每个客户端获得 10 个任务：client1 获得任务 1、4、7、... client2、2、5、...等等。很公平。字面上地。

然而，在实践中，任务复杂性或客户端计算资源（或可用性）通常是非均匀混合的，那么这种模式就会被严重破坏。所有任务似乎都是提前安排好的，服务器不知道客户端的进度，甚至不知道它们是否可用。如果 client1 宕机，它的剩余任务不会发送给其他客户端，而是为 client1 排队。如果 client1 仍然关闭，则永远不会处理这些任务。相反，如果客户端处理其任务的速度更快，则它不会获得更多任务并保持空闲状态，因为它们仍然为其他客户端安排。

使用`REQ/REP`是一种可能的解决方案；然后只将任务分配给可用资源。

所以我错过了什么吗？如何`Push/Pull`有效使用？有没有办法使用这种套接字类型来处理客户端、任务等的不对称性？

谢谢！

这是一个简单的 Python 示例：

```
# server

import zmq
import time

context = zmq.Context()
socket = context.socket(zmq.PUSH)
#socket = context.socket(zmq.REP)   # uncomment for Req/Rep

socket.bind("tcp://127.0.0.1:5555")

i = 0
time.sleep(1)   # naive wait for clients to arrive

while True:
  #msg = socket.recv()    # uncomment for Req/Rep
  socket.send(chr(i))
  i += 1 
  if i == 100:
    break

time.sleep(10)   # naive wait for tasks to drain 
```

.

```
# client

import zmq
import time
import sys

context = zmq.Context()

socket = context.socket(zmq.PULL)
#socket = context.socket(zmq.REQ)    # uncomment for Req/Rep

socket.connect("tcp://127.0.0.1:5555")

delay = float(sys.argv[1])

while True:
  #socket.send('')     # uncomment for Req/Rep
  message = socket.recv()
  print "recv:", ord(message)
  time.sleep(delay) 
```

在命令行上启动 3 个带有延迟参数的客户端（即 1、1 和 0.1），然后启动服务器，看看所有任务是如何均匀分布的。然后杀死其中一个客户端以查看其剩余任务未得到处理。

取消注释指示将其切换到`Req/Rep`类型套接字的行并观察更有效的负载平衡器。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-21T09:44:55.227

它不是负载均衡器，这是在 0MQ 文档中停留了一段时间的错误解释。要进行负载平衡，您必须从工作人员那里获取有关其可用性的一些信息。PUSH 与 DEALER 一样，是循环分配器。它的原始速度和简单性很有用。您不需要任何类型的喋喋不休，只需将任务泵入管道，它们就会以网络可以处理的速度尽快发送给所有可用的工作人员。

当您执行大量的小任务，并且工作人员不经常出入时，该模式很有用。该模式不适用于需要时间完成的大型任务，因为您需要一个仅将新任务发送给可用工作人员的队列。它还受到反模式的影响，如果客户端发送许多任务然后工作人员连接，第一个工作人员将获取 1,000 条左右的消息，而其他工作人员仍在忙于连接。

您可以通过多种方式制作自己的高级路由。查看指南中的 LRU 模式：在此，工作人员明确告诉代理“准备好”。您还可以进行基于信用的流量控制，这就是我在任何实际负载平衡情况下都会做的事情。它是 LRU 模式的推广。见[http://hintjens.com/blog:15](http://hintjens.com/blog:15)

# java - 我应该使用哪个 restlet 版本来创建网站

> ID：12504561
> 
> 赞同：2
> 
> 时间：2012-09-20T00:14:08.840
> 
> 标签：java, restlet

我想使用 Restlet 框架创建一个 java rest API。我希望我的 API 在 Internet 上可用，以便前端应用程序可以是 iPhone 或 Android 的手机应用程序或网站。我的服务器可能是 tomcat（我还没有检查 glassfish 是否会这样做）。

我的问题是：我使用哪个版本的 Restlet：Java SE 或 Java EE 版？这是一个非常简洁地描述它们的链接：[http ://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/171-restlet/344-restlet.html](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/171-restlet/344-restlet.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:43:39.253

使用这个：Java EE 版。它有额外的代码来连接到企业容器。

来源：[_](http://wiki.restlet.org/docs_2.0/13-restlet/275-restlet/312-restlet.html)

> 此版本旨在开发和部署 Restlet 应用程序在 Java EE 应用服务器中，或者更准确地说是在 Apache Tomcat 等 Servlet 容器中。

# c# - 如何提取http xml答案的值

> ID：12504562
> 
> 赞同：2
> 
> 时间：2012-09-20T00:14:24.830
> 
> 标签：c#, xml, parsing

好吧，我对 C# 有点陌生，我正在尝试获取 http 答案的值。但我以前从未使用过 XML 的东西。

简单的例子： http: [//freegeoip.net/xml/123.123.123.123](http://freegeoip.net/xml/123.123.123.123)

```
<Response>
<Ip>123.123.123.123</Ip>
<CountryCode>CN</CountryCode>
<CountryName>China</CountryName>
<RegionCode>22</RegionCode>
<RegionName>Beijing</RegionName>
<City>Beijing</City>
<ZipCode/>
<Latitude>39.9289</Latitude>
<Longitude>116.388</Longitude>
<MetroCode/>
</Response> 
```

我想返回`<CountryName></CountryName>`C# 中的部分。有什么例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:34:22.320

您可以通过以下两种方式之一进行操作。快速而肮脏的方法是在 XML 字符串中简单地搜索 CountryName，但我怀疑这是一个特别可靠的答案。

由于提供的 XML 格式不正确，因此对此响应表示警告，我将提供以编程方式读取 XML 的更好答案是在 System.Xml 命名空间中，并使用 XmlDocument 对象加载和解析数据：

```
using System.Xml;

public static void Main(String args[])
{
    XmlDocument foo = new XmlDocument();

    //Let's assume that the IP of the target player is in args[1]
    //This allows us to parameterize the Load method to reflect the IP address
    //of the user per the OP's request
    foo.Load( String.Format("http://freegeoip.net/xml/{0}",args[1])); 

    XmlNode root = foo.DocumentElement;

    // you might need to tweak the XPath query below
    XmlNode countryNameNode = root.SelectSingleNode("/Response/CountryName");

    Console.WriteLine(countryNameNode.InnerText);
} 
```

这不是一个 100% 完美的解决方案，但它应该代表一个良好的开端。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:04:36.343

试试这个程序。然后您可以通过响应对象访问信息。

```
public class Response
{
    public string Ip { get; set; }
    public string Countrycode { get; set; }
    public string CountryName { get; set; }
    public string RegionCode { get; set; }
    public string City { get; set; }
    public string ZipCode { get; set; }
    public string Latitude { get; set; }
    public string Longitude { get; set; }
    public string MetroCode { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var client = new System.Net.WebClient();

        string downloadedString = client.DownloadString("http://freegeoip.net/xml/123.123.123.123");

        XmlSerializer mySerializer =
            new XmlSerializer(typeof(Response));

        Response response = null;

        XmlReader xmlReader = XmlReader.Create(new System.IO.StringReader(downloadedString));

        response = (Response)mySerializer.Deserialize(xmlReader);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:24:45.540

使用[XmlDocument.Load 方法](http://msdn.microsoft.com/en-us/library/875kz807.aspx)从 URL 获取文档。

然后使用[XmlNode.SelectNodes 方法](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)获取您感兴趣的节点。为此，您需要使用简单的[XPath Expression](http://www.w3schools.com/xpath/xpath_examples.asp)。

您还可以使用[LINQ2XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。

# java - 添加依赖项以播放 scala.build 文件时出错

> ID：12504565
> 
> 赞同：0
> 
> 时间：2012-09-20T00:15:20.083
> 
> 标签：java, scala, playframework, playframework-2.0, akka

我正在用 java 做一个 akka 项目并玩 framewrok。

我想用akka远程集群构建一个集群系统。

但是在将依赖项添加到 build.scala 文件之后

我收到以下错误。

```
[info] Done updating.
[error] java.lang.NoClassDefFoundError: akka/util/FiniteDuration 
```

这是 build.scala 文件中的代码

```
object ApplicationBuild extends Build {

    val appName         = "akka-remote"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      "com.typesafe.akka" % "akka-actor" % "2.1-SNAPSHOT" ,
          "com.typesafe.akka" % "akka-remote" % "2.1-SNAPSHOT" ,
         "com.typesafe.akka" % "akka-kernel" % "2.1-SNAPSHOT"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here 
        resolvers += "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases"
    )

} 
```

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:12:13.310

我假设您使用的是最新的稳定版 Play！

玩！framework 2.0.x 随 Akka 2.0.2 提供，**但不随 Akka remote 提供**。要添加它，只需使用：

```
val appDependencies = Seq(
      "com.typesafe.akka" % "akka-actor" % "2.0.2" ,
      "com.typesafe.akka" % "akka-remote" % "2.0.2" ,
      "com.typesafe.akka" % "akka-kernel" % "2.0.2"
) 
```

如果您需要日志记录功能，您还可以添加

```
 "com.typesafe.akka" % "akka-slf4j" % "2.0.2" 
```

如果您在 Play 中使用 2.1 Akka 版本！2.0.x serie 也许你会遇到一些冲突

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:29:26.807

Akka 已经附带 Play 框架：[https ://github.com/playframework/Play20/blob/master/framework/project/Build.scala#L280](https://github.com/playframework/Play20/blob/master/framework/project/Build.scala#L280)

但是嵌入式版本不是最新的（Akka 2.0.2 for Play 2.0.3）。

如果您添加最新的 Akka 版本，您可能会遇到一些 lib 冲突。

作为您的问题，Typesafe 存储库中不存在您的依赖版本（2.1-SNAPSHOT）`releases`：[http ://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/](http://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/)

您必须使用 Typesafe`snapshots`存储库：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    resolvers += "Typesafe Releases" at "http://repo.typesafe.com/typesafe/snapshots"
) 
```

# html - 如何水平扩展 div 直到它碰到另一个 div？

> ID：12504567
> 
> 赞同：1
> 
> 时间：2012-09-20T00:15:32.887
> 
> 标签：html, css

如果我有两个 div 并且每次加载页面时一个会改变宽度（页面每次加载不同的图片）我如何使另一个扩展或取消扩展以使其触及另一个 div？

问题解决了，所以我拿出了网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:30:39.773

这是您需要的 HTML 结构和 CSS：

```
<div id="wrapper">
    <div id="image"></div>
    <div id="summary"></div>
</div>​

#wrapper
{
    padding: 30px;
    float: left;
    width: 500px;
    height: 400px;
    background:#00FF00;    
}

#image
{
    float:left;
    width:100px;
    height:250px;
    background: #CCCCCC;
}

#summary
{
    width:auto;
    height:200px;
    background: #FF0000;    
}​ 
```

这里有一个[DEMO](http://jsfiddle.net/rBwRq/)供你玩。调整图片div的宽度，看看summary div如何响应

# javascript - 将 Arraybuffer 编码为 Base32

> ID：12504569
> 
> 赞同：1
> 
> 时间：2012-09-20T00:15:39.313
> 
> 标签：javascript, base32

我正在尝试将 ArrayBuffer javascript 对象编码为 base32 字符串，但没有成功。有没有人对我如何做到这一点有任何建议？这是我目前拥有的。我已经从 base32-js 项目中改编了一些代码。

```
var alphabet = '0123456789abcdefghjkmnpqrtuvwxyz'
var alias = { o:0, i:1, l:1, s:5 }
var lookup = function() {
    var table = {}
    for (var i = 0; i < alphabet.length; i++) {
        table[alphabet[i]] = i
    }
    for (var key in alias) {
        if (!alias.hasOwnProperty(key)) continue
        table[key] = table['' + alias[key]]
    }
    lookup = function() { return table }
    return table
}
function Encoder() {
    var skip = 0
    var bits = 0
    this.output = ''
    this.readByte = function(byte) {
        if (typeof byte == 'string') byte = byte.charCodeAt(0)
        if (skip < 0) {
            bits |= (byte >> (-skip))
        } else {
            bits = (byte << skip) & 248
        }
        if (skip > 3) {
            skip -= 8
            return 1
        }
        if (skip < 4) {
            this.output += alphabet[bits >> 3]
            skip += 5
        }
        return 0
    }
    this.finish = function(check) {
        var output = this.output + (skip < 0 ? alphabet[bits >> 3] : '') + (check ? '$' : '')
        this.output = ''
        return output
    }
}
Encoder.prototype.update = function(input, flush) {
    for (var i = 0; i < input.length; ) {
        i += this.readByte(input[i])
    }
    // consume all output
    var output = this.output
    this.output = ''
    if (flush) {
      output += this.finish()
    }
    return output
}
function encode(input) {
  var encoder = new Encoder()
  var output = encoder.update(input, true)
  return output
}
var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://www.richerlife.com/wp-content/uploads/2012/01/google-logo-682-571408a.jpg', false);
xhr.overrideMimeType("text/plain; charset=x-user-defined");  
xhr.onload = function(e) {
  if (this.status == 200) {
    alert(encode(xhr.responseText));
  }
};
xhr.send(); 
```

# php - php检查表值如果为空添加否则检查其他

> ID：12504570
> 
> 赞同：-3
> 
> 时间：2012-09-20T00:15:48.033
> 
> 标签：php, loops, if-statement

你好我有一些问题。如果 staitment 为真，如何制作，如果 staitment 则循环，否则返回我的员工

```
function checkSlot($member_id){
$i = 1;
 $query = mysql_query("SELECT * FROM `inventory` WHERE `member_id` = '".$member_id."'");
 $row = mysql_fetch_array($query);
  if($row['slot'.$i.''] > 0){
   $i++;
  }else{
   return true;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:32:44.897

您需要一个循环来检查所有值。

```
function checkSlot($member_id){ 
    $query = mysql_query("SELECT * FROM `inventory` WHERE `member_id` = '".(int)$member_id."'"); 
    $row = mysql_fetch_array($query); 
    if ($row) {
        for($slotNumber = 1; $slotNumber<=10; $slotNumber++) {
            if($row['slot'.$slotNumber] == 0){ 
                return $slotNumber;
            }
        }
    }
    return 0;
} 
```

另外，考虑使用`PDO`or`mysqli_()`函数（不是`mysql_()`），因为 mysql 将被弃用。在习惯旧方法并需要重写所有内容之前先习惯新方法。

我已将 $member_id 强制为整数以使其安全 - 否则`mysql_real_escape_string()`用作最低限度（或最好`PDO`或`mysqli_()`如上所述的功能）

# classification - Weka 和 K-Means 聚类 - 如何获得完整的数据均值

> ID：12504571
> 
> 赞同：0
> 
> 时间：2012-09-20T00:16:02.387
> 
> 标签：classification, weka, k-means

我正在使用 weka，虽然我可以获得类均值，但我需要获得 Weka 的完整数据均值。这似乎不是通过获取类意味着将它们相加然后除以类的数量来完成的，因为完整的数据平均值与此相差很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:30:49.033

在 Weka Explorer Preprocess 选项卡上，单击您加载的数据变量，您将在右侧看到平均值和其他统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:34:30.017

我敢肯定直接计算不会太难，但我对 WEKA 不熟悉，所以我建议绕道：只用一个集群 ( `k=1`) 运行 k-means 集群怎么样？该集群将包含所有数据点，因此平均值将是整个数据集的平均值。或者你的意思是“完整数据的意思”有什么不同？

# java - 如何在横向模式下检测方向

> ID：12504576
> 
> 赞同：2
> 
> 时间：2012-09-20T00:16:23.383
> 
> 标签：java, android, screen-orientation

我的程序在横向模式（API7）下运行，所以我在 mainfest 和我的

程序。

```
 android:screenOrientation="landscape"
        android:configChanges="orientation|keyboardHidden" 
```

和

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

尽管在横向模式下，它还需要知道用户是横向还是纵向。

从这里，我发现了一些关于方向的帖子。我试过了

onConfigurationChanged 和 display.getOrientation();

不幸的是，onConfigurationChanged 不起作用。而 getOrientation() 只是返回 Landscape。

如何在没有 SensorManager 的情况下正确获取方向信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:46:42.087

要在运行时确定设备的当前方向，您可以使用 WindowManager 类。下面的代码片段演示了它：

```
WindowManager wm = getWindowManager();
Display d = wm.getDefaultDisplay();

if (d.getWidth() > d.getHeight()) {
// landscape mode
}
else {
// portrait mode
} 
```

# ruby - 在 OS X Lion 中为 MacVim 安装 command-t 插件的 Ruby 消息错误

> ID：12504579
> 
> 赞同：1
> 
> 时间：2012-09-20T00:17:02.930
> 
> 标签：ruby, vim, plugins, installation, macvim

我正在关注这个在 MacVim 上安装 Commant-t 的[视频教程。](https://wincent.com/products/command-t)有时我必须`ruby extconf.rb`在文件夹中执行命令`~/.vim/ruby/command-t`。我收到以下错误：

```
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:48:32.623

# iphone - 在视图过渡动画完成后执行选择器或动画

> ID：12504581
> 
> 赞同：1
> 
> 时间：2012-09-20T00:17:08.660
> 
> 标签：iphone, ios, animation, uiview, uiviewcontroller

我正在寻找一种在转换到视图完成*后执行动画的方法，但**没有*使用`viewDidAppear:`，因为我只希望在前一个视图发布通知时发生动画。

我知道`UIView`'s 的`animateWithDuration: delay: options: animations: completion:`方法，所以我可以将延迟设置为与视图转换动画持续时间相同（这是很多以 -tion 结尾的单词...），但想知道是否有更好的方法做这个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:10:40.997

`viewDidAppear`可能是开始动画的最佳位置。这样您就不必担心时间延迟，因为加载时间会因设备而异。要解决这个问题，您可以简单地放置一个`BOOL`条件`viewDidAppear`并设置它，以便动画仅在`BOOL == YES`.

# file - Java 代码无法读取位于客户端计算机上的文件

> ID：12504585
> 
> 赞同：1
> 
> 时间：2012-09-20T00:17:30.807
> 
> 标签：file, file-upload

我正在使用一个 struts 应用程序。我想在 JSP 中上传一个文件并在 Java 中读取该文件的内容。

案例 1：我在本地 tomcat 服务器中部署了这个 application.war，并运行了该应用程序，它运行良好。（本机操作系统为windows）

案例2：当我在Unix机器上的tomcat服务器中部署这个application.war并运行时，它给出了错误“没有这样的文件或目录”。在 unix 机器上运行时，它无法读取存储在我本地机器上的文件。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:18:53.437

您无法从服务器与客户端计算机进行交互。

相反，您需要使用 HTML 文件上传控件，并读取 POST 回服务器的文件内容。

# python - 如何在 python 中查看 Heroku 日志记录和运行时错误输出

> ID：12504588
> 
> 赞同：15
> 
> 时间：2012-09-20T00:17:35.590
> 
> 标签：python, web-applications, heroku

我正在使用 Heroku 在 Python 中开发一个 Web 应用程序，但我不知道如何有效地测试调试它。我尝试使用 print(...) 和 sys.stdout.write(...) 但是当我使用“foreman start”在本地运行或部署到云并运行“heroku logs”来查看时，我从未看到任何输出云日志。此外，我不知道如何调试 python 运行时错误，例如发生异常时。该应用程序的 Web 请求返回 HTTP 500，但我无法调试它以查看异常的来源。有什么办法可以看到这些信息吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-13T21:51:57.547

添加`sys.stdout.flush()`打印语句后为我解决了这个问题。

就我而言，问题似乎是 stdout 被缓冲而 stderr 没有。

如果您甚至没有通过 看到异常`foreman start`，请确保您实际上是在正确的 IP/PORT 上访问您的服务器。您应该会在来自`foreman start`.

此外，您可以尝试让您的 Web 框架在调试模式下运行——大多数现代框架将在调试/开发模式下在浏览器中显示堆栈跟踪。使用烧瓶？`app.config['DEBUG'] = True`或`app.run(..., debug=True)`。

```
# logging helper
def p(*args):
  print args[0] % (len(args) > 1 and args[1:] or [])
  sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-28T04:33:19.357

如果您正在使用 Foreman 运行 Python 项目，并且在查看 stdout/stderr 时遇到问题，这里有一些适合您的解决方案。如果您使用 Procfile 直接调用 python CLI，那么您可以使用“-u”选项来避免标准输出缓冲：

```
python -u script.py 
```

如果你使用 Procfile 来管理一个 WSGI 服务器，例如调用 gunicorn、flask、bottle、eve 等，那么你可以在你的 python 项目的根目录中添加一个“.env”文件，包含以下内容：

```
PYTHONUNBUFFERED=True 
```

另请参阅此问题的答案： [工头仅显示带有“started wit pid #”的行，没有其他内容](https://stackoverflow.com/q/8717198/1240482)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-01T17:26:34.527

请注意任何其他 Django/Python 初学者。记得添加

```
import sys 
```

和这样的东西

```
print ("hello world") # python 3
sys.stdout.flush() 
```

将打印到控制台。

从 PHP 迁移到 Py/Dj KISS 可能很少见。

# objective-c - 我在 ARC 下编写了代码，使用这种方法我已经得到了 EXC_BAD_ACESS

> ID：12504589
> 
> 赞同：0
> 
> 时间：2012-09-20T00:17:43.603
> 
> 标签：objective-c, automatic-ref-counting

我创建 NavigationItem 和 BarButtonItem 使用 items.leftBarButtonItem 添加到，并且我使用 @selector 处理的 baritem 的操作，它可以很好地编译但是当我触摸 buttonitem 时，它崩溃了..可能是选择器导致它。当我在配置文件上关闭 ARC 时，它向右转...为什么？我对ARC感到困惑，任何人都可以告诉我如何处理它？

```
@implementation IGMainViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 340, 44)];

    UINavigationItem  *items = [[UINavigationItem alloc] init];
    UIBarButtonItem  *leftBtn = [[UIBarButtonItem alloc] initWithTitle:@"aa" style:UIBarButtonSystemItemAdd target:self action:@selector(doItAgain:)];
    items.leftBarButtonItem = leftBtn;
    [navBar pushNavigationItem:items animated:NO];
    [self.view addSubview:navBar];
}
-(void)doItAgain:(id)sender
{
    NSLog(@"sss");
}
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

//固定版本：

```
 //old:
    IGMainViewController *mview = [[IGMainViewController alloc] init];
    [self.view addSubview:mview.view];
    //fixed:
    @property(strong,nonatomic) IGMainViewController *mview; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:20:38.393

`@selector(doItAgain)`表示 doItAgain 方法不带参数，而您的方法带 1。要解决此问题，请在选择器名称中添加冒号：`@selector(doItAgain:)`

# python - python字符串格式化函数

> ID：12504598
> 
> 赞同：0
> 
> 时间：2012-09-20T00:18:50.950
> 
> 标签：python

我有一堆字符串格式的数字，我想要一些关于格式化这些的函数的想法。

前任。

输入 00000000.00 - 应该输出 0.00

输入 00000123.00 - 应该输出 123.00

输入 0000-123.00 - 应该输出 -123.00

输入 00-00123.45 - 应该输出 -123.45

输入 -0000123.00 - 应该输出 -123.00

输入 00000000.-5 - 应该输出 -0.05

输入 0000000-.25 - 应该输出 -0.25

对于包含负号的字符串，我可以想到的一种方法如下。数字 = "0000-123.00"

```
if num.find("-") != -1:

    num = "-" + num.replace("-","") 
```

这会给我 num 为 -0000123.00 但我不知道如何摆脱前导零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:46:18.103

您可以像这样解析数字：

```
def parse_funky_numstring(s):
    neg = s.count('-') % 2
    s = s.replace('-', '0')
    num = float(s)
    return -num if neg else num 
```

然后使用 Python 的字符串格式对其进行格式化，

```
num = "{:0.2f}".format(parse_funky_numstring(s)) 
```

# xcode - UIBarButtonItem 没有响应

> ID：12504602
> 
> 赞同：0
> 
> 时间：2012-09-20T00:19:30.520
> 
> 标签：xcode, ios5, uibarbuttonitem

我正在以编程方式创建一些条形按钮项目，但是没有调用第一个按钮的选择器。我的 viewDidLoad 现在有以下代码：

```
[super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
   // self.navigationItem.leftBarButtonItem = self.editButtonItem;

    _defaultBarColor = self.navigationController.navigationBar.tintColor;
    [self loadPreferences];

    self.spinner = [[UIActivityIndicatorView alloc]  initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    self.btnSpinner = [[UIBarButtonItem alloc] initWithCustomView:self.spinner];

    self.btnRefresh = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refreshPressed:)];

    self.lblLastUpdate = [[UIBarButtonItem alloc] initWithTitle:@" " style:UIBarButtonItemStylePlain target:nil action:nil];
    [self.lblLastUpdate setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIFont boldSystemFontOfSize:13], UITextAttributeFont,nil] forState:UIControlStateNormal];

    self.flexibleSpace = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
        self.toolbarItems = [NSArray arrayWithObjects:self.btnRefresh,self.flexibleSpace,self.lblLastUpdate,self.flexibleSpace, nil];

    self.detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];

    [self loadData]; 
```

到目前为止，我发现如果我将标签（工具栏中的第二项）的选择器设置为第一项的选择器，那么第一个项目选择器会被调用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:52:42.397

> 您分配了 barbutton，但没有为 barButton 设置框架。
> 
> 为 barButton 分配设置框架后。

```
btnSpinner.frame=CGRectMake(10,10,70,40); 
```

# c++ - c++中的指针和引用，何时何地

> ID：12504603
> 
> 赞同：-2
> 
> 时间：2012-09-20T00:19:40.980
> 
> 标签：c++, pointers, reference, dereference

在 Java 世界进行了长时间的冒险之后，我回到了 C++，并且正在重新理解 C++ 如何使用指针的概念/语法。

举几个例子。

在java中

```
 public void MyFunc(MyClass class) 
    {
        class.DoSomething;
    } 
```

是相同的

```
 void MyFunc (MyClass* class)
    {
        class->DoSomething;
    } 
```

和

```
 public MyClass GetMyClass()
    {
        return class;
    } 
```

是一样的（看着它我意识到我必须将我返回的内容存储在一个指针中，所以它不一样......）

```
 MyClasss* GetMyClass()
    {
        return (&class); // could you say here "return <-MyClass"
    } 
```

相反，也许这是相同的（看起来这应该返回位于“&MyClass”的 MyClass 对象，因此您可以从返回的任何位置直接在此位置编辑此对象）

```
 MyClasss GetMyClass()
    {
        return (&class);
    } 
```

你也可以使用 -> 来访问存储在指针指向的地址的对象，你可以使用 <- 来存储地址吗？

最后，有什么意义

```
 void MyFunc(MyClass1 &class1, MyClass2 &class2) 
```

对比

```
 void MyFunc(MyClass1* class1, MyClass* class2) 
```

是不是您首先要在地址处传入数据存储，而在示例 2 中，您要传入要使用的数据的地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:33:14.617

指针是一个内存地址，您可以在其中找到数据（可以是对象、结构或原始类型）。当您说 时`return (&object)`，您将返回一个内存地址 - 一个数字（例如 1736cbfa）。使用该内存地址，您可以使用 -> 运算符访问对象的各个元素。您不会向调用函数“推回”任何内容，因此您不需要任何“<-”运算符。只需将函数视为返回一个数字，而是一种特殊的幻数，它可以告诉您所需的数据在哪里，您应该没问题。

关于您的最后一点，`void MyFunc(MyClass * object)`将您在函数中找到数据的内存地址/指针/幻数发送一份副本。 `void MyFunc(MyClass & object)`基本上在幕后做同样的事情，但允许您直接引用 object1（如在 object.element 而不是 object->element 中）。当您想在函数内部修改 object1 时，首选第二种方法，因为您不会以这种方式意外取消引用空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:40:09.463

Java 引用类型更像是 C++ 引用而不是 C++ 指针，所以我不得不不同意几乎所有关于类似代码的说法。我将它们重写如下：

爪哇：

```
 public void myFunc(MyClass c) 
    {
        c.doSomething();
    } 
```

C++:
void myFunc (MyClass& class) { class.doSomething(); }

至于你的第二个例子，这甚至不会在 Java 中编译： public MyClass GetMyClass() { return MyClass; }

我想你的意思是

```
 public MyClass getMyClass()
    {
        return new MyClass();
    } 
```

这在 C++ 中可以完全相同的方式完成，但使用指针而不是引用：

```
 MyClass* getMyClass()
    {
        return new MyClass();
    } 
```

至于您的最后一个示例/问题，让我们将其简化为一个参数：

```
void myFunc(MyClass c); 
```

对比

```
void myFunc(MyClass & rc) 
```

对比

```
void MyFunc(MyClass* pc) 
```

这里`c`是一个对象，`rc`是一个对象的引用，`pc`是一个指向对象的指针。

这些都有不同的用途。使用`c`and的语法`rc`类似；两者都使用`.`运算符来访问成员，就像在 Java 中一样。使用的语法`pc`不同；指针使用`*`运算符进行间接访问，使用`->`运算符进行成员访问。

除非您有更具体的问题，否则我不确定在此处添加什么。我建议您通过查看类和标准对象变量开始刷新您的 C++ 技能。当你掌握了这些，你就可以继续使用指针和引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T00:40:49.933

假设：

```
class MyClass 
{
  public:
    void Foo() {}
}

class OtherClass:
{
  public:
    MyClass GetValue() { return myClass; }
    MyClass& GetRef() { return myClass; }
    MyClass* GetValPtr() { return &myClass; }
  private:
    MyClass myClass;        
}

OtherClass bar; 
```

第一种方法将返回名为**myClass**的成员的**副本**。如果您收到变量并对其进行更改，则不会影响成员变量。您可以像这样调用该方法，. 请注意，您已通过*复制*实例检索到该实例。除非您将其分配给变量，否则您将无法重用此特定实例。这*不是*调用内部的 成员实例**`Foo``bar.GetVal().Foo()``MyClass`**`Foo``MyClass``bar`****

 ****The second method will return a **reference** to the member variable. References are used because unlike pointers, they ***cannot be NULL***. You can access the `Foo` method like so, `bar.GetRef().Foo()`. Remember that this will *call the method of the `MyClass` member instance inside `bar`*.

The third method will return a **pointer to the member myClass**. You can access the `Foo` method like so, `bar.GetPtr()->Foo()`. Remember that this will *call the method of the `MyClass` member instance inside `bar`*.****

# perl - 在 Wampserver 中运行 BioPerl 脚本

> ID：12504610
> 
> 赞同：0
> 
> 时间：2012-09-20T00:20:59.830
> 
> 标签：perl, wampserver

我正在 Windows 上使用 wampserver 创建一个页面并在本地工作。我想访问数据库 Ensemble 以获取一些有用的信息，例如基因的序列，我遇到了以下问题：

我已经安装了 ActivePerl 和所需的 API，并且我的 bioperl 脚本可以在命令提示符下完美运行。

就 wampserver 而言，我已经在 Apache 中修改了 httpd.conf 以运行 perl 脚本。我可以通过 wamp 执行一个简单的 perl 脚本（例如 hello world）。（我将 id 存储在 www 并转到 localhost/hello.pl）

当我想在 wampserver 中运行脚本以获取序列（当然更复杂）时，我收到此错误：

> install_driver(mysql) 失败：在@INC 中找不到 DBD/mysql.pm（@INC 包含：C:/wamp/bin/Perl/lib C:/wamp/bin/Perl/site/lib。C:/src /ensembl/modules) 在 (eval 8) 第 3 行。也许 DBD::mysql perl 模块尚未完全安装，或者“mysql”的大小写不正确。可用驱动程序：DBM、ExampleP、File、Gofer、Proxy、Sponge。在 C:/src/ensembl/modules/Bio/EnsEMBL/Registry.pm 第 1594 行

在命令提示符窗口中，脚本运行。我如何管理它以在 wampserver 中运行它？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:40:02.163

该`@INC`数组包含 Perl 查找模块的所有路径。目前，您的 WAMP Perl 会查看以下位置：

```
C:/wamp/bin/Perl/lib
C:/wamp/bin/Perl/site/lib
.
C:/src/ensembl/modules 
```

这些目录都不包含一个子目录`DBD`，而该子目录又包含`mysql.pm`. （请使用文件管理器验证这一点）

你似乎已经用 ActivePerl 安装了这个模块。尝试打印出`@INC`那个 perl。如果 ActivePerl`@INC`包含未包含在 WAMP perl 中的路径`@INC`（见上文），那么您应该修复它以使用 ActivePerl 模块。例如

```
use lib 'C:/foo/bar/lib'; 
```

*在*你面前`use DBD::mysql`。它可能会解决问题。

# ruby - Rails 3 - 如何在：has_many 上设置属性：与单选按钮关联

> ID：12504611
> 
> 赞同：0
> 
> 时间：2012-09-20T00:21:01.033
> 
> 标签：ruby, ruby-on-rails-3, activerecord, many-to-many

现在已经两天了，我阅读博客、观看铁路广播、阅读书籍等，但我找不到一个优雅的解决方案来解决我的问题。

上下文：我有多个业务，可以有多个contact_persons。此外，每个企业必须始终有一个主要联系人。所以我通过business_contact_persons 表在business 和contact_person 之间建立了多对多的关系。

```
class Business < AR
has_many :business_contact_persons, :dependent => :destroy
has_many :contact_persons, :through => :business_contact_persons

class ContactPersons < AR
has_many :business_contact_persons, :dependent => :destroy
has_many :business, :through => :business_contact_persons

class BusinessContactPerson < AR
belongs_to :business
belongs_to :contact_person

#Primary is a boolean in the database
attr_accessible :primary, :contact_id, :business_id 
```

现在，我试图在我的业务视图中实现的是允许用户选择他们想要分配特定业务的每个contact_person，并且选择他们想要成为主要联系人的人。因此，在我的新业务视图中，我可以显示一组复选框，显示所有可用的contact_persons，以及一个带有相同contact_persons 列表的radio_button 组来选择主要的。

为了节省业务，我在我的控制器中使用它：

```
@business.attributes = params[:business] 
```

它适用于保存 business_contact_persons 因为它访问属性槽

```
params[:business][:contact_person_ids] 
```

但这不会将我的主要 business_contact_persons 布尔字段分配给用户选择的字段。更糟糕的是，我将如何处理编辑业务，因为用户可以更改业务的主要联系人。

另外，关于如何验证企业是否分配了主要联系人的想法会非常好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:27:32.613

实现此目的的一种方法是使用 Rails 表单标签助手。

### 创建您自己的选择标签：

您可以使用自己的名称创建自己的选择标签，例如“bcp”表示业务联系人。您可以创建自己的选项，并且有从集合创建选项的快捷方式。

### 控制器：

在您的控制器中，您将获得参数：

```
bcp = BusinessContactPerson.find(params[:bcp])
bcp.primary = true
bcp.save! 
```

Rails 有很多帮助器来构建你自己的表单：

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag)

### before_validation：

您将在验证业务模型之前创建/更新 BCP。

您可能想查看 ActiveRecord #before_validation 回调。

另请参阅 #inverse_of 设置以确保 #belongs_to 找到相同的记录。

（我不确定这一切都会奏效——这些是我会尝试的起点）

# php - 我怎样才能获得 xml 属性 ?

> ID：12504612
> 
> 赞同：0
> 
> 时间：2012-09-20T00:21:06.187
> 
> 标签：php, xml, youtube, simplexml, xml-namespaces

我无法弄清楚或找出如何`permission="allowed"`使用 PHP 解析这个 xml 中的值`simplexml_load_file`。

基本结构是

```
<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:gd="http://schemas.google.com/g/2005" xmlns:yt="http://gdata.youtube.com/schemas/2007" gd:etag="W/&quot;DkEDSH47eCp7I2A9WhJbEEQ.&quot;">
<yt:accessControl action="comment" permission="allowed" />
<yt:accessControl action="commentVote" permission="allowed" />
<yt:accessControl action="videoRespond" permission="moderated" />
<yt:accessControl action="rate" permission="allowed" />
<yt:accessControl action="embed" permission="allowed" />
<yt:accessControl action="list" permission="allowed" />
<yt:accessControl action="autoPlay" permission="allowed" />
<yt:accessControl action="syndicate" permission="allowed" /> 
```

如何获得`permission=allowed`最后一行的属性值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:29:14.273

您想使用**XPath**来检索记录，它是一种 XML 查询语言。

请参阅[SimpleXMLElement 的 xpath()](http://php.net/manual/en/simplexmlelement.xpath.php)和[registerXPathNamespace()](http://www.php.net/manual/en/simplexmlelement.registerxpathnamespace.php)方法。W3Schools[在此处解释 XPath 的语法](http://www.w3schools.com/xpath/default.asp)。

对于这个 XML

```
$xml = <<<EOD
<book xmlns:chap="http://example.org/chapter-title">
   <title>My Book</title>
</book>
EOD; 
```

你会像这样注册一个命名空间：

```
$sxe = new SimpleXMLElement($xml);
$sxe->registerXPathNamespace('c', 'http://example.org/chapter-title');
$result = $sxe->xpath('//c:title'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:09:04.507

这太烦人了……

（在哪里`$xml = simplexml_load_file($source);`）

我可以通过以下方式访问权限属性：

```
$xml->children('http://gdata.youtube.com/schemas/2007')->accessControl[4]->attributes()->permission; 
```

# objective-c - CAAnimation 的“animationDidStop:”只调用了一次

> ID：12504613
> 
> 赞同：1
> 
> 时间：2012-09-20T00:21:21.783
> 
> 标签：objective-c, xcode, ipad, caanimation

我有多组按钮，单击时会从其原始位置动画到其设定位置。对象动画后，我希望将其从超级视图中删除。

这是我的animationDidStop代码：

```
- (void) animationDidStop:(SKBounceAnimation *)animation finished:(BOOL)flag {
        [self.cellImageViewGlobal removeFromSuperview];
        NSLog(@"Animation didStop called");
 } 
```

所以当我点击一个按钮（即self.cellImageViewGlobal）时，它会动画，然后在动画之后，它将从superview中删除。在接下来的单击或点击中，self.cellImageViewGlobal 不会从超级视图中删除。我发现这个函数只通过我的日志调用一次。

我在 viewDidLoad 中将自己设置为代表：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.animateProduct.delegate = self; // animateProduct is the last animation being called in the CAAanimationGroup array
} 
```

我还在我的动画函数中设置了这个委托。我不明白我的代码似乎有什么问题。我想每次我点击一个按钮，动画之后它都会调用“animationDidStop”函数。

顺便说一句，我尝试了多种方法或解决方案来解决它。首先是我使用了积木。块中的动画完成后，将执行以下操作：

```
completion:^(BOOL finished){

[self.cellImageViewGlobal removeFromSuperview];
} 
```

但是这段代码不会等待模拟器中的动画完成。我在 Paul Hegarty 的讲座中了解到，在动画代码中，它完成了代码的执行，但它不会等待动画本身（在模拟器中投影）完成。

希望你能帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:04:59.717

检查标志的值（如果成功终止，则应为 YES）；我有同样的问题（我认为），动画被立即删除（并且使用 flag=NO 调用 animationdidstop）并且永远不会终止（即使它继续显示）

我正在努力解决这个问题，可能与 ARC 有关（您在项目中使用 ARC 吗？）

# ios - NSTimer 增长数据量

> ID：12504619
> 
> 赞同：2
> 
> 时间：2012-09-20T00:22:24.577
> 
> 标签：ios, memory-leaks, nstimer, xcode-instruments

我在 Instruments 中查看我的应用程序以降低内存使用和内存增长。我发现了一件奇怪的事情。当我从`NSTimer`某个间隔开始（在我的情况下为 0.1 秒）时，在 Instruments 中我可以看到它`CFArray (store-deque)`并且`CFArray (mutable-variable)`仍在增长（大约每秒 200 字节）。那样行吗？还是有问题？*#Living* number 是恒定的，*#Transitory*和*#Overall*会增长。此外，整体内存仍然更大。对我来说，有很多事情在阴影中。比如`Malloc 32 Bytes`，`Malloc 48 Bytes`...

当然，在计时器“tick”处调用的方法是空的，以确保它不是我......

我应该关心他们还是只是系统的东西......？？？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T00:23:18.180

我知道这是旧的，但如果未来的读者像我一样偶然发现这个问题，我会指出你需要担心的数字是“Live Bytes”和“# Living”。“暂时”和“总体”条目包括已创建并随后销毁的项目。

供您参考，根据*Instruments User Reference中的*[Allocations Instrument](https://developer.apple.com/library/ios/documentation/AnalysisTools/Reference/Instruments_User_Reference/AllocationsInstrument/AllocationsInstrument.html)文档：

 *> **Live Bytes：** 已分配但未释放的字节数。
> 
> **# Living：** 已创建且仍在堆上的对象数。
> 
> **# Transitory：** 在选定时间范围内创建和销毁的对象数。
> 
> **总字节数：** 已分配的此类型的总字节数，包括已释放的字节数。
> 
> **# 总体：** 已分配的此类对象或内存块的总数，包括已释放的对象或内存块的总数。
> 
> **# 分配（净额/总体）：** 当前账户和总账户的直方图。*

# php - Magento 中的“特价”表在哪里？

> ID：12504621
> 
> 赞同：9
> 
> 时间：2012-09-20T00:22:40.397
> 
> 标签：php, mysql, magento

我试图用 mySQL 一个 php 脚本批量更新“Special_price”和“price”，我知道包含“price”的表和行，但不知道包含“special_price”的表和行。

我已经查看了数据库本身，但仍然没有运气。有任何想法吗？我需要表名和字段名。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T04:22:06.283

我在 Magento Question Answers Guild 的会员资格要求我建议您修复 API 错误，而不是使用普通的旧 SQL 来更新数据库。正如在其他地方提到的，直接更新数据库可能会使 Magento 进入系统无法识别的状态，这可能会导致奇怪的、令人愤怒的错误。

也就是说，特价值将与其他产品属性值一起存储在

```
catalog_product_entity_decimal 
```

桌子。该表有一个`attribute_id`列，该列与该表有外键关系`eav_attribute`。在`eav_attribute`表格中查找带有代码的属性`special_price`。那`attribute_id`和产品`entity_id`应该足以在`catalog_product_entity_decimal`.

请记住，如果产品没有`special_price`集合，则不会存在任何行。还要记住，如果一个产品`special_price`在不同的范围级别上有一个集合，那么可能有不止一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:48:50.567

特价是十进制类型的属性。首先，您需要通过应用以下 sql 查询来获取属性 id： `SELECT attribute_id FROM eav_attribute WHERE attribute_code='special_price';`

`catalog_product_entity_decimal`然后，您可以通过在表中插入记录来为任何产品添加特价。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-08T21:15:28.013

以下是如何从通过 csv 文件导入的 SKU 列表中删除特价`temp_import_sp_price_delete`。

```
delete deci from catalog_product_entity_decimal deci, 
                 `catalog_product_entity` pr,
                 temp_import_sp_price_delete temp 
where temp.SKU= pr.SKU and pr.entity_id=deci.entity_id and deci.attribute_id=76 
```

# mysql - Rails 数据库迁移

> ID：12504622
> 
> 赞同：0
> 
> 时间：2012-09-20T00:22:44.060
> 
> 标签：mysql, ruby-on-rails-3

我有一个先前定义的数据库，我想使用 Ruby on Rails 作为我的前端。Rails 迁移过程中是否有任何步骤可以使此过程更快，或者我是否坚持解释架构并手动构建迁移和类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:38:11.933

实际上有一个非常[简单的解决方案:)](http://www.justinball.com/2008/05/09/dump-an-existing-database-schema-into-a-ruby-on-rails-migration-ready-format/)

# java - Java程序中的设计分歧

> ID：12504624
> 
> 赞同：0
> 
> 时间：2012-09-20T00:22:51.643
> 
> 标签：java, api

我们正在设计一个系统，该系统将具有多个“处理器”，这些“处理器”在网络中相互通信以完成某些任务。

实际上，这应该成为一个库，将被公司的几个团队使用。

我们使用 Avro 来定义处理器将接受的输入和输出类型。到目前为止，一切都很好。但是现在，我的一些同事正在游说通过静默执行一些转换来为简单类型提供“更大的灵活性”，例如 int -> long（精细）或 String -> int（否！！！）。这个想法是 Avro 模式定义了处理器的工作原理，但在一些简单的情况下，我们应该让一个将 int 作为字符串输出的处理器与需要一个 int 的处理器对话......

我们正在对此进行辩论，我用以下论点反对它：

1.  我们应该有更多的类型安全性，现在的便利性可能会成为以后错误的来源；
2.  使用这种机制，API 会变得“模糊”，并且您可以/不能发送到处理器的类型并不总是很清楚
3.  如果第一个 rev 没有这种机制并且需要严格的类型定义，我们总是可以放松它并在以后开始做一些“转换”，如果它真的是一个好主意的话。但不知何故，这些论点似乎没有通过。

这种“转换”机制的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:46:43.007

我不认为这场辩论会因技术优势而获胜或失败。它涉及太多的主观问题......在这个阶段。（例如，需要灵活性的想法是主观的，类型转换相关的 API 不匹配将是一个问题的想法也是如此。）

我处理争议的方式是指出，价值转换框架将涉及对正常 Avro 做事方式的复杂（昂贵、耗时、潜在风险、难以长期维护）扩展。建议你不要用这个预先加载项目。而是推迟它，直到您实现了足够的实际功能来决定是否真的需要复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:32:00.087

我认为 Java API 的用户会期望 Java 行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T00:37:25.870

我认为[稳健性原则](http://en.wikipedia.org/wiki/Robustness_principle)可以帮助你：

> 在你所做的事情上保持保守，在你从他人那里接受的东西上保持自由（通常被改写为“在你发送的东西上保持保守，在你接受的东西上保持自由”）。

也就是说，我不提倡编写你不需要的代码。为什么不按照您提议的方式进行，如果系统需要您的对手提议的额外功能，请稍后按照您的建议添加？如果他们不能理解这一点，我真的会质疑他们是否在听你的话，也许会想办法重新表达你的论点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T00:59:11.097

如果处理器 api 关于它们需要/提供的类型是强类型的，那么您会在编译时免费获得大量错误检查。这是无价的。如果人们坚持支持转换，我可以想到一些（相当容易实现的）想法，它们不会失去这种好处：

1.  在构建处理器网络时，调用者必须显式提供执行适当转换的“粘合”处理器。例如，如果`Processor<I,O>`代表一个具有输入类型`I`和输出类型的处理器`O`，那么调用者将提供一个处理器来从字符串转换为整数。

2.  该框架可以包括一个“类型转换器注册表”（类似于`Map<Pair<Class<I>,Class<O>>,Transformer<I,O>>`），其中包含一堆标准转换并允许用户还添加新的转换。构建处理器网络的开发人员可以选择使用严格类型（上面的#1），或者让框架自动从注册表中选择类型转换处理器。

# android - Android：Google+ 点赞列表布局

> ID：12504630
> 
> 赞同：2
> 
> 时间：2012-09-20T00:23:33.153
> 
> 标签：android

我有兴趣显示一个可滚动的项目列表，并希望以一种花哨的方式显示它们，就像 Google+ Android 应用程序一样。如何创建这样的样式列表？奖励：当你滚动时，他们是如何产生这种甜蜜的飞入效果的？在此处查看 UI 的屏幕截图：

![图片](../Images/195b441c1f604536c827177d54a4dde8.png)

有谁知道任何包含此内容的示例或任何地方的任何教程？

# python - python中范围的行为和numpy中的范围

> ID：12504632
> 
> 赞同：2
> 
> 时间：2012-09-20T00:23:50.427
> 
> 标签：python, numpy, range

有人可以解释下面的“-5”吗？我对 numpy 有点陌生，但这似乎很奇怪

```
In [112]: an_int=9

In [113]: an_int/2
Out[113]: 4

In [114]: range(-an_int/2,an_int/2)
Out[114]: [-5, -4, -3, -2, -1, 0, 1, 2, 3]

In [115]: arange(-an_int/2,an_int/2)
Out[115]: array([-5, -4, -3, -2, -1,  0,  1,  2,  3])

In [116]: range(-4,4)
Out[116]: [-4, -3, -2, -1, 0, 1, 2, 3] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T00:26:59.923

问题不是麻木的。“问题”是python中的整数除法会降低结果而不是截断为0（如C语言） - 例如`-9/2` *，它被解析为`(-9)/2`*（或者`(-9)//2`如果你使用python3.x）评估为`-5`. `int`另一方面，内置函数确实向零截断。换句话说：

```
a = -9
b = 2
print a//b #-5
print int(float(a)/b) #-4 
```

如果你有兴趣。这是 Guido 的[一篇博客文章](http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html)，讨论了这个有趣的（也许有些争议）的设计决定。

# c# - MVC4少转换

> ID：12504636
> 
> 赞同：1
> 
> 时间：2012-09-20T00:24:47.147
> 
> 标签：c#, asp.net-mvc-4, less

我正在尝试了解如何将 .less 转换与 MVC4 一起使用。

我想在运行时用我自己的值以编程方式替换 .less 变量。

给定以下代码，我如何将我的变量值（要替换）传递给解析器？

```
public class CustomTransform : IBundleTransform
{
    private readonly CssMinify _cssMinify = new CssMinify();

    public void Process(BundleContext context, BundleResponse response)
    { 
        response.Content = dotless.Core.Less.Parse(response.Content);
        _cssMinify.Process(context, response);
    }
} 
```

编辑：一个示例解决方案将是惊人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:40:16.073

一开始我会完全把它们塞进内容中，即

```
public void Process(BundleContext context, BundleResponse response)
{ 
    string myContent = "";
    foreach(var variable in myCustomVariables)
         myContent += String.Format("@{0}={1};", variable.Name, variable.Value);

    response.Content = dotless.Core.Less.Parse(myContent + response.Content);
    _cssMinify.Process(context, response);
} 
```

Havent 编译了上面的内容（你可以用 stringbuilder 写得更好），但它应该显示基本思想

# nhibernate - 与组件一起使用时，Linq to nHibernate Fetch 会出现错误“获取请求必须是简单的成员访问表达式”

> ID：12504639
> 
> 赞同：3
> 
> 时间：2012-09-20T00:25:21.417
> 
> 标签：nhibernate, fluent-nhibernate, linq-to-nhibernate, fluent-nhibernate-mapping

我有两节课：

```
public class Reference
{
  public virtual string Id { get; set; }
  // ... 
  public virtual Stamp Stamp { get; set; }
}

public class Stamp
{
  public DateTime? Created { get; set; }
  public User CreatedBy { get; set; }
  public DateTime? LastUpdated { get; set; }
  public User LastUpdatedBy { get; set; }
} 
```

Reference.Stamp 使用以下流畅的 nhibernate 映射映射为组件（以便“Stamp”字段出现在 Reference 表中）：

```
public class ReferenceMap : ClassMap<Reference>
{
  public ReferenceMap()
  {
    Id(e => e.Id);
    // ...
    Component(e => e.Stamp);
  }
}

public class StampMap : ComponentMap<Stamp>
{
  public StampMap()
  {
    Map(e => e.Created);
    References(e => e.CreatedBy);
    Map(e => e.LastUpdated);
    References(e => e.LastUpdatedBy);
  }
} 
```

我想对“CreatedBy”和“LastUpdatedBy”字段进行急切的提取，以避免在列出我的“参考”项目时出现 N+1。

我试过这个：

```
Reference[] references = session
  .Query<Reference>()
  .Fetch(r => r.Stamp.CreatedBy)
  .Fetch(r => r.Stamp.LastUpdatedBy)
  .ToArray(); 
```

导致此错误：

**System.ArgumentException：获取请求必须是 o => o.Related 类型的简单成员访问表达式；'r.Stamp.CreatedBy' 太复杂了。**

关于如何让我的 fetch 工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T02:09:30.917

我相信这是 LINQ 提供程序的限制。

您可以：

*   *不*使用`Fetch`（有更好的替代方案来解决 N+1 问题；我更喜欢批处理）
*   直接映射这些属性，无需`Component`
*   使用 HQL 而不是 LINQ

不过，我相信你的构造*应该*得到支持。[您可以在https://nhibernate.jira.com](https://nhibernate.jira.com)打开一个问题

# r - R：通过选择具有相等值的整个列为每一行开发一个新的矩阵表

> ID：12504640
> 
> 赞同：0
> 
> 时间：2012-09-20T00:25:36.043
> 
> 标签：r

我有多个带有大矩阵的 .csv 文件，大约 300 行和 2000 列。我想通过选择具有相等值为 1 的整个列来为每一行开发一个新的矩阵表。我想保留行名和列名，并想在目录中创建具有行名的文件。

这是数据集的示例：

```
 pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
WHIRR-25        1              0          1            0                 1              1                1
WHIRR-28        1              0          1            0                 0              1                0
WHIRR-55        0              0          1            0                 0              0                0
WHIRR-61        0              0          0            0                 0              1                0
WHIRR-76        0              0          1            0                 0              0                0
WHIRR-87        1              1          1            0                 0              1                1
WHIRR-92        1              0          0            1                 0              1                1 
```

所以这个数据集将产生如下输出：

```
 Whirr-25
                   pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
 WHIRR-25        1              0          1            0                 1              1                1
 WHIRR-28        1              0          1            0                 0              1                0
 WHIRR-55        0              0          1            0                 0              0                0
 WHIRR-61        0              0          0            0                 0              1                0
 WHIRR-76        0              0          1            0                 0              0                0
 WHIRR-87        1              1          1            0                 0              1                1
 WHIRR-92        1              0          0            1                 0              1                1

Whirr-28
                pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
 WHIRR-28        1              0          1            0                 0              1                0
 WHIRR-55        0              0          1            0                 0              0                0
 WHIRR-61        0              0          0            0                 0              1                0
 WHIRR-76        0              0          1            0                 0              0                0
 WHIRR-87        1              1          1            0                 0              1                1
 WHIRR-92        1              0          0            1                 0              1                1

Whirr-55

             pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java

WHIRR-55        0              0          1            0                 0              0                0
WHIRR-76        0              0          1            0                 0              0                0
WHIRR-87        1              1          1            0                 0              1                1

Whirr-61
          pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
WHIRR-61        0              0          0            0                 0              1                0
WHIRR-87        1              1          1            0                 0              1                1
WHIRR-92        1              0          0            1                 0              1                1

Whirr-76
               pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
WHIRR-76        0              0          1            0                 0              0                0
WHIRR-87        1              1          1            0                 0              1                1

Whirr-87
              pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
WHIRR-87        1              1          1            0                 0              1                1
WHIRR-92        1              0          0            1                 0              1                1

Whirr-92
              pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
 WHIRR-92        1              0          0            1                 0              1                1 
```

我应用了这个脚本，但脚本只基于列而不是行创建新表：

```
 dat <- read.table(file="Task_vs_Files_Proj.csv", header=T, sep=",", row.names=1) 
    dat

    apply( sapply(dat , function(x) return( as.logical(x) ) ), 2, function(x) dat[x, ])

$pom.xml.
        pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
    WHIRR-25        1              0          1            0                 1              1                1
    WHIRR-28        1              0          1            0                 0              1                0
    WHIRR-87        1              1          1            0                 0              1                1
    WHIRR-92        1              0          0            1                 0              1                1

    $ZooKeeper.java
             pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
    WHIRR-87        1              1          1            0                 0              1                1

    $HBase.java
             pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
    WHIRR-25        1              0          1            0                 1              1                1
    WHIRR-28        1              0          1            0                 0              1                0
    WHIRR-55        0              0          1            0                 0              0                0
    WHIRR-76        0              0          1            0                 0              0                0
    WHIRR-87        1              1          1            0                 0              1                1 
```

在这里感谢专家的帮助...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:26:55.280

据我所知，你想要

```
# cycle through all rows
for(which_row in seq_len(nrow(.data))){
  # get the subset of the rows from this row 
  subset_data <- .data[which_row:nrow(.data),]
  # which elements for each column == 1
  which_one <- lapply(subset_data, function(x){which(as.logical(x))})
  # drop the columns where there are no 1's
  which_one <- Filter(function(x){length(x) >0},which_one)
  # filter to those which == 1, and then get the unique combination
  # of rows (sorted to original order)
  which_rows <- sort(Reduce(union,Filter(function(x) {1 %in% x}, which_one)))
  # the file name
  file_name <- sprintf('file_%s.csv', row.names(.data)[which_row])
  # save
  write.csv(subset_data[which_rows,], file_name, row.names = T)
  # prints the data set to the console for checking
  print(subset_data[which_rows,])
  # message to show what file is created
  message(sprintf('Saving %s', file_name))
} 
```

# php - 预赛的表现不像我记得的那样

> ID：12504641
> 
> 赞同：1
> 
> 时间：2012-09-20T00:25:41.030
> 
> 标签：php, preg-match, behavior

这绝对让我烦透了。我通常会使用 PHP，但这让我很头疼：

```
preg_match("/\/([0-9]*)\//i","http://url.com/folder/133302/",$s);
print_r($s); 
```

输出：

```
Array ( [0] => // [1] => ) 
```

我希望它与 URL 中指定的数字相匹配，我确定这曾经可以工作：s

如果我添加一个字母，它可以正常工作（字母 x）：

```
preg_match("/\/([0-9]*)x\//i","http://url.com/folder/133302x/",$s);
print_r($s); 
```

输出：

```
Array ( [0] => /133302x/ [1] => 133302 ) 
```

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:28:45.350

```
preg_match("/\/([0-9]+)\//i","http://url.com/folder/133302/",$s); 
```

如果你说`*`（“零次或多次”），你也匹配`//`. `+`说“一次或多次”，这就是你所需要的。

此外，您可能想使用另一个分隔符，并删除无用的`i`修饰符：

```
preg_match("#/([0-9]+)/#","http://url.com/folder/133302/",$s); 
```

# python - 批量编辑 GAE 数据存储中的多个实体？

> ID：12504643
> 
> 赞同：0
> 
> 时间：2012-09-20T00:25:43.853
> 
> 标签：python, google-app-engine, batch-file, entity, google-cloud-datastore

如何批量编辑实体？

在 GAE 的数据查看器中，我可以单击单个实体，然后手动输入并替换其任何值。但是我怎样才能一次为多个（数千个）实体执行此操作？

我只想找到在其值中具有特定字符串的每个实体并将其替换为另一个。

我在 GAE 的仪表板/数据查看器中没有看到任何控件。或者也许有可能在应用程序内完成这个？它在python中，如果这有所不同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:33:29.290

看看[远程 API](https://developers.google.com/appengine/articles/remote_api)，它可以让您从舒适的 SDK 中与数据存储进行交互。你可以这样做：

```
q = MyModel.all()
for entity in q:
    # Do your search-and-replace operation on entity 
```

关于性能和一次可以获取的实体数量有一些警告，所以请阅读这篇文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:03:16.277

您不能像在普通 SQL 服务器中那样批量编辑实体。可能的解决方案：

1.  如果您没有太多实体（几千个），请编写您自己的迁移方法并自己调用它。
2.  [MapReduce](https://developers.google.com/appengine/docs/python/dataprocessing/overview)，它可以并行工作。
3.  如另一个答案中所述，使用远程 API。

# javascript - Javascript：隐藏表格行

> ID：12504647
> 
> 赞同：1
> 
> 时间：2012-09-20T00:26:12.870
> 
> 标签：javascript, sharepoint

Newby Javascript 问题在这里。哦，我知道有很多不同的方法可以做到这一点——其中很多在这个网站上都有解释——但这个问题与这段代码特别相关。

```
<html>
<head>
<script type="text/javascript" language="javascript">
    function getField(fieldType, fieldTitle) {
        var docTags = document.getElementsByTagName(fieldType);
        for (var i = 0; i < docTags.length; i++) {
            if (docTags[i].title == fieldTitle) {
                return docTags[i]
            }
        }
    }

    function SetHidden() {
        getField('tr', 'TRA').style.display = 'none';
        getField('tr', 'TRB').style.display = '';
    }

    SetHidden()

</script>

</head>

<body>

<table>
<tr title="TRA">
    <td>Tier A Kit Count</td>
<tr title="TRB">
    <td>Tier B Kit Count</td>
</tr>
</table>

</body>
</html> 
```

此代码已在我正在处理的站点上广泛使用[这是一个具有一些自定义 javascript 的共享点页面]，但如果我在新页面上使用它，我会不断收到`getField('tr', 'TRA').style.display = 'none'`样式未定义或不是对象的错误。

我是在错误的地方得到一个逗号，还是共享点页面在我不在的其他地方调用 getElementsByTagName？

任何帮助解决这个特定的代码位将不胜感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:31:41.163

您的`SetHidden()`函数可能会在页面完全加载之前被调用。尝试将其更改为：

```
window.onload = SetHidden; 
```

# sql - PostgreSQL 以毫秒为单位为 postgres 预先创建的日期舍入时间戳秒

> ID：12504648
> 
> 赞同：5
> 
> 时间：2012-09-20T00:26:17.323
> 
> 标签：sql, postgresql, time, timestamp, zone

我有一个查询，不幸的是必须比较 2 个时间戳。PHP date() 函数为数据库提供了一个时间戳，存储为没有时区的时间戳，因此该日期没有添加毫秒。另一个是带有时区的 PG 时间戳。所以这两个日期都已经创建并插入到表中，这里是一个日期示例：

没有时区的时间戳 = 2012-09-19 18:13:26

PG 的时区时间戳 = 2012-09-19 18:13:26.893878-04

我可以投射 PG date::timestamp(0) 这让我很接近，但正如预期的那样，日期被四舍五入；2012-09-19 18:13:27

所以我的问题是如何让秒数四舍五入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:22:35.923

要向下舍入到第二个，请使用`date_trunc('seconds', :timestamp)`

例子：

```
select date_trunc('seconds', '2012-09-19 18:13:26.893878-04'::timestamp)
  = '2012-09-19 18:13:26'::timestamp; 
```

这产生`t`（真）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T00:42:50.327

比较时间戳的相等性很少能很好地工作。如果这两个时间戳是在`2012-09-19 18:13:26.99999999`? 时钟抖动、调度程序抖动、执行时间差异等可能而且经常会将一个推到下一秒。它也不必那么接近边缘发生。您可以尝试使用 hack

而是与窄范围进行比较；说2秒：

```
SET timezone = '+04:00';

SELECT (TIMESTAMP '2012-09-19 18:13:26')::timestamptz 
       BETWEEN TIMESTAMPTZ '2012-09-19 18:13:26.893878-04' - INTERVAL '1' SECOND 
           AND TIMESTAMPTZ '2012-09-19 18:13:26.893878-04' + INTERVAL '1' SECOND; 
```

我不确定你可以使用比这更粗的东西，因为你的 PHP 时间戳的精度是 1 秒。

如果您确定 PHP 总是截断时间戳（向下舍入）而不是舍入，即使它捕获了时间戳，您也可以通过调整括号间隔来粗略地纠正这一点。例如，尝试 1 秒间隔（给定 PHP 的时间戳精度，您可以测试的最窄间隔）尝试，并假设 PHP 总是将时间戳截断：

```
SELECT (TIMESTAMP '2012-09-19 18:13:26')::timestamptz 
       BETWEEN TIMESTAMPTZ '2012-09-19 18:13:26.893878-04' - INTERVAL '1' SECOND 
           AND TIMESTAMPTZ '2012-09-19 18:13:26.893878-04'; 
```

就我个人而言，我会在每边至少再增加 0.1 秒以确保：

```
SELECT (TIMESTAMP '2012-09-19 18:13:26')::timestamptz 
       BETWEEN TIMESTAMPTZ '2012-09-19 18:13:26.893878-04' - INTERVAL '1.1' SECOND 
           AND TIMESTAMPTZ '2012-09-19 18:13:26.893878-04' + INTERVAL '0.1' SECOND; 
```

如果您真的坚持测试相等性，请使用：

```
regress=# SELECT date_trunc('second', TIMESTAMPTZ '2012-09-19 18:13:26.893878-04');
       date_trunc       
------------------------
 2012-09-19 18:13:26-04
(1 row) 
```

但请注意，测试两个单独捕获的时间戳是否相等是危险和错误的。

# powershell - 如何从自定义 shell 使用 GitHub for Windows 附带的 posh-git？

> ID：12504649
> 
> 赞同：23
> 
> 时间：2012-09-20T00:26:18.133
> 
> 标签：powershell, github-for-windows, posh-git

安装适用于 Windows 的 GitHub 是立即获得初学者的 git Windows 应用程序 msysgit 和 posh-git 的好方法 - 但您只能通过调用“GitHub.appref-ms --open-shell”来使用 posh-git 启动 git shell。

我想要做的是启动控制台，加载 powershell，并使用 Windows 版 Github 附带的 posh-git - 但我想不出办法将它加载到 powershell 中。

更新：我不想单独为 Windows 安装 Git，因为已经安装了 msysgit。

通过从 AppData\Local\Github 文件夹中调用 shell1.ps1 脚本，我取得了一些进展——它确实让我调用了 git。但它不显示我所在的分支，与 GitHub for Windows 的“Git Shell”相反。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-21T05:34:27.827

尽管@dahlbyk 的回答没有提供解决方案，但它仍然将我推向了正确的方向。问题是，Phil 的 Haack 博客文章中引用的 $env:posh-git 环境没有定义，因此在 PowerShell 配置文件脚本中对其进行测试没有任何作用。

但有效的是从同一个脚本运行 shell.ps1 和 profile.example.ps1。这是像我这样的 PowerShell 菜鸟的食谱：

1.  在活动用户的 Documents\WindowsPowerShell 文件夹中编辑或创建 Microsoft.PowerShell_profile.ps1（如果该文件夹不存在，则创建该文件夹）
2.  添加以下 2 行：

    ```
    . (Resolve-Path "$env:LOCALAPPDATA\GitHub\shell.ps1")
    . $env:github_posh_git\profile.example.ps1 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T01:33:37.620

从[http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx)，将其放入您的配置文件中以从 GitHub 加载 posh-git for Windows：

```
# If Posh-Git environment is defined, load it.
if (test-path env:posh_git) {
    . $env:posh_git
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-27T21:07:18.683

[按照这些](http://learnaholic.me/2012/10/12/make-powershell-and-git-suck-less-on-windows/)说明，要在 powershell 中安装和使用 Posh-git，请执行以下操作：

1.  `git clone git://github.com/dahlbyk/posh-git.git`到您选择的目录
2.  允许使用以下任一方式执行脚本：
    1.  `Set-ExecutionPolicy RemoteSigned`
    2.  `Set-ExecutionPolicy Unrestricted`
3.  `cd posh-git`
4.  `.\install.ps1`
5.  `. $PROFILE`

我最初遵循流行的[haacked.com](http://haacked.com/archive/2011/12/19/get-git-for-windows.aspx/)教程中给出的指示（正如@dahlbyk 和@CB 所指出的那样），但与 OP 有类似的问题。

# scala - scala 更好的 map getOrElse 语法

> ID：12504650
> 
> 赞同：19
> 
> 时间：2012-09-20T00:26:21.160
> 
> 标签：scala

有没有更好的方法来编写下面的代码？

```
val t = map.get('type).getOrElse(""); 
if (t != "") "prefix" + t; 
```

对内联代码感兴趣

```
val t = map.get('type).getOrElse("").???? 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-20T00:32:15.380

`Map`有自己的`getOrElse`方法，所以你可以只写以下内容：

```
val t = map.getOrElse('type, "") 
```

`t`它完成了与第一个示例中的定义相同的事情。

* * *

解决您的评论：如果您知道您的地图永远不会包含空字符串作为值，您可以使用以下内容添加`"prefix"`：

```
map.get('type).map("prefix" + _).getOrElse("") 
```

或者，如果您使用的是 Scala 2.10：

```
map.get('type).fold("")("prefix" + _) 
```

如果您的地图*可以*有`""`值，则此版本的行为将与您的有所不同，因为它将为这些值添加前缀。如果您希望在单行中与您的版本完全相同的行为，您可以编写以下内容：

```
map.get('type).filter(_.nonEmpty).map("prefix" + _).getOrElse("") 
```

不过，这可能不是必需的——听起来您不希望地图中有空字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T01:36:28.137

还值得注意的是，在某些情况下，您可以一次调用替换多个常见`.getOrElse`用法。`.withDefaultValue`

```
val map = complexMapCalculation().withDefaultValue("")

val t = map('type) 
```

我不会说这是每次都应该做的事情，但它可以很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T08:46:07.053

您还可以使用 Scalaz [Zero](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Zero.scala)类型类，因此您的代码如下所示。一元运算符在[OptionW](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/OptionW.scala#L80)上定义。

```
val t = ~map.get('type)                 // no prefix
val t = ~map.get('type).map("prefix"+_) // prefix 
```

这是一个示例会话：

```
scala> import scalaz._; import Scalaz._
import scalaz._
import Scalaz._

scala> val map = Map('type -> "foo")
map: scala.collection.immutable.Map[Symbol,java.lang.String] = Map('type -> foo)

scala> ~map.get('type)
res3: java.lang.String = foo

scala> ~map.get('notype)
res4: java.lang.String = ""

scala> ~map.get('type).map("prefix"+_)
res5: java.lang.String = prefixfoo

scala> ~map.get('notype).map("prefix"+_)
res6: java.lang.String = "" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T13:48:05.180

在阅读本书`Play for Scala`时，我拿起了这个在控制器中定义的代码片段，这可能是*getOrElse*更好的语法。

```
def show(ean: Long) = Action { implicit request =>

  Product.findByEan(ean).map { product =>
    Ok(views.html.products.details(product))
  }.getOrElse(NotFound)

} 
```

其中，*Product.findByEan(ean: Long)*被定义为

```
def findByEan(ean: Long) = products.find(_ean == ean) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-16T13:20:48.857

```
 val t = map.getOrElse("type","") match {case value if value !="" => s"prefix${value}" case _ => ""} 
```

# ruby - Ruby zerofill 一个字符串

> ID：12504651
> 
> 赞同：24
> 
> 时间：2012-09-20T00:26:38.767
> 
> 标签：ruby, printf, ruby-1.9.2

在 Ruby 中格式化一个用零填充的整数很容易：

```
sprintf( "%010d", 345 ) #=> "0000000345" 
```

但是当我尝试用零填充字符串时，我找不到一个简单的解决方案：

```
sprintf( "%010d", "12AD" ) #=> ArgumentError: invalid value for Integer(): "12AD"
sprintf( "%010s", "12AD" ) #=> "      12AD" 
```

我想获得：

```
sprintf( "%010s", "12AD" ) #=> "00000012AD" 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-20T00:33:23.117

您可以使用[`rjust`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rjust)或[`ljust`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-ljust)。

```
>> "12AD".rjust(10, '0')
#=> "00000012AD" 
```

# jquery - jQuery多维对象数组出现未定义

> ID：12504652
> 
> 赞同：0
> 
> 时间：2012-09-20T00:26:58.797
> 
> 标签：jquery, object, multidimensional-array

我在 wordpress 网站上将数组从 php 带入 jquery。它是一个多维数组，在我转换为 $jqueryArray 后看起来像这样（取自 console.log）

2 : 对象 { max=" 10", min=" 500 ", number=" 2 "}

3 : 对象 { max=" 15", min=" 750 ", number=" 3 "}

4 : 对象 { max=" 8", min=" 400 ", number=" 4 "}

5 : 对象 { max=" 12", min=" 700 ", number=" 5 "}

1 : 对象 { max=" 10", min=" 500 ", number="1 "}

代码如下：

```
 jQuery(function() {
    jQuery('.wpsc_select_variation').change(function(){

        var arrayFromPHP = <?php echo json_encode($alt_tables) ?>;
        var $jqueryArray = {};

            jQuery.each(arrayFromPHP, function (key, value) {
                $jqueryArray[key] = {};
                $jqueryArray[key] = value;
            });
        console.log($jqueryArray);

        // clears the div that we will type the Table Minimum order too
        jQuery('#table-details').empty();
        var $selectedName;

        // returns an integer, specific to the Table # selected
        $selectedName = jQuery(this).find(':selected').text().replace('Table ', '');

        console.log($jqueryArray.$selectedName);

        var $newDetails = 'Table minimum order: ';
        jQuery('#table-details').append( $newDetails );
    });

}); 
```

由于某种原因 $jqueryArray.$selectedName 未定义。我可以看到 $jqueryArray 有 5 个键，编号从 1 到 5，但即使我尝试 console.log($jqueryArray.1); 我不确定。我似乎无法弄清楚如何从数组中调用号码。基本上我想要

$jqueryArray[$selectedName][min] 我在 console.log 中尝试了 $jqueryArray[$selectedName] 并且也收到了 undefined

我添加了一个 jsfiddle [http://jsfiddle.net/kzuyd/14/](http://jsfiddle.net/kzuyd/14/)

我把`<?php echo json_encode($alt_tables) ?>`它添加为变量，因为 php 在 jsfiddle 中不起作用。希望它的工作原理相同..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:04:03.063

[**更新了 jsFiddle**](http://jsfiddle.net/kzuyd/15/)

```
jQuery(function() {
    var arrayFromPHP = '{"1 ":{"note":null,"max":" 10","min":" 500 ","number":"1 "}," 2 ":{"note":null,"max":" 10","min":" 500 ","number":" 2 "}," 3 ":{"note":null,"max":" 15","min":" 750 ","number":" 3 "}," 4 ":{"note":null,"max":" 8","min":" 400 ","number":" 4 "}," 5 ":{"note":null,"max":" 12","min":" 700 ","number":" 5 "}}';

    var $jqueryArray = {};

    // you must parse `arrayFromPHP`, it's not actually an array now
    // it's a JSON string
    jQuery.each(JSON.parse(arrayFromPHP), function(key, value) {

        // your keys have spaces at the end of them e.g. "1 "
        // trim them first
        $jqueryArray['Table' + key.trim()] = {};
        $jqueryArray['Table' + key.trim()] = value;
    });

    jQuery('.wpsc_select_variation').change(function() {

        jQuery('#table-details').empty();
        jQuery('#table-minimum').empty();
        var $selectedName;

        $selectedName = jQuery(this)
            .find("option:selected")
            .text()
            .replace(/\s/g, '');
            // to replace all spaces, use the regex shown

        var $newDetails = 'The selected name: ' + $selectedName + '';
        jQuery('#table-details').append($newDetails);

        // use obj["min"] to get the minimum
        var $tableMin = '<br /><br />The table minimum is: ' +
                        $jqueryArray[$selectedName]["min"] + '';
        jQuery('#table-minimum').append($tableMin);
    });

});​ 
```

# php - Ruby 日期时间与 PHP 日期时间

> ID：12504654
> 
> 赞同：1
> 
> 时间：2012-09-20T00:27:17.743
> 
> 标签：php, ruby, datetime

我在 PHP 中有以下代码，我正在尝试在 Ruby 中编写相同的代码。

```
$date = new DateTime(null, new DateTimeZone("UTC"));  
$created = $date->format("Y-m-d\TH:i:s\Z"); //YYYY-MM-DDTHH:mm:ss.000Z; 
```

其中 T 代表时区缩写，Z 代表 PHP 中的时区偏移（参考： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)）。
由此生成的样本日期是`2012-09-20T15:46:22.571Z`

我想出的 ruby​​ 代码是，`Time.now.utc.strftime("%Y-%m-%d%Z%H:%M:%S")`但它给出的输出`2012-09-20UTC00:24:57`接近于我想要达到的输出，但不完全相同。谁能指出我正确的方向，以便最终获得带有 .xxxZ 的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:56:49.553

更好地查看[Time#strftime 各种 ISO 8601 格式部分](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)，您可能会想出：

```
Time.now.strftime("%F%Z%T.%LZ") 
```

1.  `%F`对于 ISO 8601 日期格式 (%Y-%m-%d)
2.  `%Z`对于时区缩写名称
3.  `%T.%L`对于带小数部分的当地时间，句号为小数点（扩展）
4.  `Z`对于最终`"Z"`的时间字符串。

# c - 在C中复制字符串的结尾

> ID：12504657
> 
> 赞同：7
> 
> 时间：2012-09-20T00:27:34.960
> 
> 标签：c, string, copy, strncpy

我正在尝试使用 strncpy 仅将字符串的一部分复制到 C 中的另一个字符串。

如：

```
c[] = "How the heck do I do this"; 
```

然后复制`"do this"`到另一个字符串，这样：

```
d[] = "do this" 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T00:29:53.897

只需传递您要复制的第一个字母的地址：`strcpy(dest, &c[13])`.

如果您想在字符串结束之前结束，请使用`strncpy`or，更好，`memcpy`（不要忘记 0 终止复制的字符串）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T00:50:36.350

`strncpy`是（基本上总是）错误的选择。在这种特定情况下，它会起作用，但只是偶然 - 因为您正在复制字符串的结尾，所以它会像`strcpy`. 当然，这会导致它`strcpy`也可以工作，但更容易。

如果您想处理更一般的情况，有一个相当令人惊讶（但非常有效）的选择：`sprintf`可以完全按照您的意愿行事：

```
sprintf(d, "%s", c+20); 
```

`sprintf`（与`strncpy`or不同`strcpy`）也适用于最一般的情况——假设您只想复制`do I`到`d`，但已`d`作为正确的 NUL 终止字符串出现：

```
sprintf(d, "%*s", 4, c+13); 
```

这里，`4`是要复制的部分的长度，`c+13`是指向要复制的部分开头的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:30:16.017

听起来您正在寻找[strncpy](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)函数。不要介意 C++ 站点，文档是针对 C 的。

或者您也可以使用该`strcpy`功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T00:36:25.027

使用[memcpy](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)可能更合适，只能复制字符串的一部分。

使用 strncpy 或 strcpy 实际上将整个字符串复制到 '\0' 终止符。

无论如何，谨慎和明智的做法是假设结果字符串有足够的空间，否则缓冲区溢出，因此请确保缓冲区中有足够的空间。

# linechart - gRaphael 库 - 具有多行、单独工具提示的折线图

> ID：12504659
> 
> 赞同：1
> 
> 时间：2012-09-20T00:28:00.013
> 
> 标签：linechart, graphael

我在这里有一个折线图：http: [//jsbin.com/ugexag/1](http://jsbin.com/ugexag/1)

您可以在 jsbin 中看到，当您将鼠标悬停在一个“列”上时，每行的数据都会通过 hoverColumn() 函数显示在工具提示中。我很想找到一种方法让工具提示仅在单个数据点悬停时出现。我在 gRaphael 文档中没有看到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:54:38.590

[折线图演示](http://g.raphaeljs.com/linechart.html)的右下象限有一个这样的例子。我将在今天晚些时候查看它并在此处更新我发现的内容。我怀疑`hoverColumn`没有被使用，或者被创造性地使用，因为当我使用它时，`y`我得到的悬停事件是列上所有`y`值的平均值`x`。

*更新*：看了之后，我发现了你的发现，诀窍是只有一个演示列在两行中排成一行。如果您每年绘制一些图表，那么您的年份列肯定会在所有行上重复出现。所以这不太方便。

我测试的是（在链接的折线图演示的控制台中）：

```
var r = Raphael("holder");
var lines = r.linechart(330,250,300,220,[
   [ 1, 2, 3, 4, 5, 6, 7],[ 2, 3, 4, 5, 6, 7, 8],[9,10]
  ],[
   [10,10,10,10,10,10,10],[20,20,20,20,20,20,20],[5,25]
  ],{nostroke:false, axis:"0 0 1 1", symbol: "circle", smooth: true});
lines.hoverColumn(function(){
    this.tags=r.set();
    for(var i=0;i<this.y.length;i++){
      this.tags.push(r.tag(this.x,this.y[i],this.values[i],160,10).insertBefore(this));
    }
  }, function(){
    this.tags && this.tags.remove();
  }); 
```

这至少说明了问题所在。问题确实出`hoverColumn`在文档和文档上。没有提到实际上传递给它的信息`hover`几乎相同。`this`因此，您可以将最后一条语句重写为：

```
lines.hover(function({
  this.tags=r.set();
  this.tags.push(r.tag(this.x,this.y,this.value,160,10).insertBefore(this));
 }, function(){
  this.tags && this.tags.remove();
 }); 
```

请注意，`value`现在是单数且不带索引，`y`.
最后，您可以通过删除 a 来进一步简化它`set()`：

```
lines.hover(function(){
  this.tag = r.tag(this.x,this.y,this.value,160,10).insertBefore(this);
 }, function(){
  this.tag && this.tag.remove();
 }); 
```

# .net - 我的 MVC 3.0 应用程序无法在 Visual Studio 2012 上运行。为什么？

> ID：12504677
> 
> 赞同：1
> 
> 时间：2012-09-20T00:30:51.663
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2012

我有一个使用 VS 2010 完成的标准 MVC 3.0 应用程序。当我尝试使用 VS 2012 打开它时，它没有加载并`incompatible`在项目名称旁边显示一个标签。

错误详情如下：

```
Unsupported
This version of Visual Studio does not have the following project types installed or does not support them. You can still open these projects in the version of Visual Studio in which they were originally created.
     - Cerebello, "D:\Projetos\Azure\X\X\X.ccproj"

Non-functional changes required
Visual Studio will automatically make non-functional changes to the following projects in order to enable them to open in this version and Visual Studio 2010 SP1\. Project behavior will not be impacted.
     - Cerebello, "D:\Projetos\Azure\X\X.sln" 
```

我在谷歌搜索没有结果。

可能会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:04:24.287

您需要安装适用于 .NET 的 Windows Azure SDK - 2012 年 6 月 SP1。 `*.ccproj`文件是 Azure 项目。

[http://www.microsoft.com/en-us/download/details.aspx?id=30651](http://www.microsoft.com/en-us/download/details.aspx?id=30651)

# javascript - javascript 代码部分未在测试环境中执行，可用于生产、开发（Rails 3 应用程序）

> ID：12504679
> 
> 赞同：0
> 
> 时间：2012-09-20T00:31:01.723
> 
> 标签：javascript, ruby-on-rails, selenium, cucumber, capybara

导轨 3

我在表单中有一个列表：

```
<%= form_for @article do |f| %>
  <ul>
    <% @product.each do |p| %>
      <li id="product_<%=p.id%>">
        <div>
         <%= f.radio_button(:p_id, p.id, class: 'hidden') %>
        </div>
      </li>
    <% end %>
  </ul>
  <%= f.submit 'submit', :id=>"submit_category", :class=>'hide' %>
<% end %> 
```

我添加了一个 javascript 函数，以便当用户单击 li 元素时，选择单选按钮并提交表单。

```
<script type="text/javascript">
  $('li').click(function() {
    $(this).find('input[type=radio]').attr('checked', true);
    $('#submit_category').click();
  });
</script> 
```

这在生产，开发中完美运行，但测试环境失败：表单已提交，但未选中单选按钮，因此出现验证错误。

我的测试是用 Cucumber + Selenium + Capybara 完成的。测试线：

```
When /^I click on the "(.*?)" product$/ do |product_name|
  @product = Product.find_by_name(product_name)
  page.find('li', id: "product_#{@p.id}").click
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:13:12.097

在这里猜测，但是将代码包装成 $(function () { ..your code }) (domready) 回调有帮助吗？

# iphone - UIImages 在 iPhone 模拟器上表现完美，但不会立即在真实设备上加载

> ID：12504680
> 
> 赞同：0
> 
> 时间：2012-09-20T00:31:01.760
> 
> 标签：iphone, xcode, uiimageview

我正在制作一个 Iphone 应用程序，其中涉及一个在屏幕上奔跑的人。但是，在玩家第一次移动他之前，图像不会加载。在 iPhone 模拟器上，图像只是从一开始就弹出。为什么会这样？我将图像设置在 ViewDidLoad 的顶部 这是 -(void)ViewDidLoad 中的代码：

```
Man.image = [UIImage imageNamed:@"ManImage.png"]; 
```

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:55:04.157

它发生了。

**第 1 步：** 在 iPhone 上删除您的应用程序。

**Step2：** 执行Xcode->Product->Clean，然后再次运行。您以这种方式清除旧缓存。

# requirejs - 如何停止加载 requireJS 模块

> ID：12504682
> 
> 赞同：0
> 
> 时间：2012-09-20T00:31:22.167
> 
> 标签：requirejs

什么是阻止 requireJS 模块从直到运行时才知道的信息加载的好策略？

我想出的方案涉及使用加载器插件来检查一些运行时属性并根据其属性列表检查“受保护”模块，如果它们不应该加载，则不调用 load()在加载器插件 load() 函数中。但是，这会导致浏览器错误，这在旧版本的 IE 中会导致实际的脚本错误，这不是我想要/需要的（实际上是超时错误，因为从未调用 load()）。

有没有办法说，“是的，我知道你想加载这个，但是，嗯，我们不想，这不是一个错误，所以继续你的业务吧。” 或者也许是一个更好的方案来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:02:08.923

我通过执行 load(null) 并在引用可能无法加载的模块的位置检查 null 来解决此问题。

# php - Solaris 9 中的 PHP 5.2 - 5.3 升级

> ID：12504683
> 
> 赞同：0
> 
> 时间：2012-09-20T00:31:33.407
> 
> 标签：php

我正在尝试在 Solaris 9 SPARC 框中将 PHP 5.2.13 升级到 5.3.16。我在当前版本（5.2.13）中安装了许多扩展。PHP 5.2.13 的安装是通过二进制文件而不是通过源代码进行的。扩展是通过源代码通过 configure、make、make install 命令安装的。

升级时，如果我将 .so 文件复制到扩展目录或重新配置它们就足够了吗？

任何信息都非常感谢。

谢谢巴努

# cassandra - 使用 Hector 对象映射器的复合列的对象映射

> ID：12504688
> 
> 赞同：2
> 
> 时间：2012-09-20T00:32:03.463
> 
> 标签：cassandra, hector

我找不到任何说明如何将字段注释为复合列的文档或示例。无论如何要这样做还是不支持？

例如，

```
@Column(name="body")
private String body; 
```

这将创建一个列“body”

有没有办法注释这样它会创建一个复合列“body：foo”？

# hadoop - 如何在单个 JVM 中运行 hadoop 多线程方式？

> ID：12504690
> 
> 赞同：2
> 
> 时间：2012-09-20T00:32:20.743
> 
> 标签：hadoop, jvm, mapreduce

我有 4 个核心桌面，想使用我的所有核心使用 hadoop 进行本地数据处理。（即有时我有足够的能力在本地处理数据，有时我将相同的作业提交到集群）。

默认情况下，hadoop 本地模式只运行一个映射器和一个减速器，所以我的本地作业真的很慢。由于“痛苦”的配置，我不想首先在单机上设置集群，其次我每次都必须创建 jar。如此完美的解决方案是如何在单台机器上运行嵌入式 Hadoop

PS 伪分布式模式是不好的选择，因为它会使用单节点创建集群，所以我只会得到一个映射器，我必须花一些时间进行额外的配置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:18:40.873

您需要使用[MultithreadedMapRunner](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/MultithreadedMapRunner.html) - 只需在 JobConf 的 setMapRunnerClass 方法中设置它，不要忘记将 mapred.map.multithreadedrunner.threads 设置为所需的并发级别。

还有另一种方法，你应该：

*   [在 Job-typed 对象中将MultithreadedMapper](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapreduce/lib/map/MultithreadedMapper.html)设置为您的映射器类
*   打电话`MultithreadedMapper.setMapperClass`给你实际的映射器类
*   `MultithreadedMapper.setNumberOfThreads`以理想的并发级别调用

但请注意，您的映射器类应该是线程安全的，并且它的设置和清理方法将被调用多次，因此将 MultithreadedMapper 与 MultipulOutput 混合不是一个聪明的主意，除非您实现自己的 MultithreadedMapper 启发类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:14:54.643

出于隔离目的，Hadoop 故意不在一个 JVM 中同时运行多个任务。在独立（本地）模式下，只使用一个 JVM。如果你想利用你的四个核心，你应该在伪分布式模式下运行，并将最大并发任务数增加到四个。您可以使用`mapred.tasktracker.map.tasks.maximum`和`mapred.tasktracker.reduce.tasks.maximum`属性执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-28T12:44:49.713

```
 Configuration conf = new Configuration();

    Job job = new Job(conf, "SolerRandomHit");

    job.setOutputKeyClass(Text.class);

    job.setOutputValueClass(IntWritable.class);

    job.setMapperClass(MultithreadedMapper.class); 
```

# c++ - C++ 编译器错误 - '没有匹配的调用函数...'

> ID：12504692
> 
> 赞同：1
> 
> 时间：2012-09-20T00:32:31.230
> 
> 标签：c++, visual-c++

我试图确定这个编译器错误背后的原因是'没有匹配的函数调用到 address::set_street(); 任何建议将不胜感激 - 谢谢

```
#include <iostream>
#include <string>
using namespace std;

    class address {

    public:

        address();

        void set_street(string street) {
            streetname = street;
        };

        string  get_street() {
            return streetname;
        };  

        void    set_parish(string parish) {
            parishname = parish;
        }

        string  get_parish() {
            return parishname;
        }

        void    set_country(string country) {
            countryname = country;
        }

        string  get_country() {
            return countryname;
        }

    private:
        string streetname;
        string parishname;
        string countryname;
    };

    int main(int argc, char* argv[]) {

        system("color 0c");

        address enteredaddress;

            cout<<"Enter street name" <<endl <<endl;

        cin >>enteredAddress.set_street();

        cout<< endl;

            system ("pause");

        return 0;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:33:58.853

`set_street()`需要一个参数，它正在寻找一个没有任何参数的参数，但它找不到一个参数，这就是它抱怨的原因。

您需要将输入存储在字符串变量中，然后使用该字符串作为参数调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T00:35:46.370

这不是 I/O 在 C++ 中的工作方式：您不能从流中读取并将结果传递给这样的设置器。您需要先将街道读入一个变量，然后将该变量传递给 set_street：

```
string tmpStr;
cin >> tmpStr;
enteredAddress.set_street(tmpStr); 
```

# javascript - jQuery id 选择器和 validate.js

> ID：12504693
> 
> 赞同：1
> 
> 时间：2012-09-20T00:32:36.580
> 
> 标签：javascript, jquery, validation

所以我在看我几天前写的一些代码，它工作得很好，我完全不知道怎么做。我希望你们中的一个可以帮助我。

在我的验证代码中，我正在执行一些 ajax 请求。这是使用“远程”标签完成的。这些请求将在表单中输入的用户名和电子邮件发送到服务器。

```
 $("#signup-form").validate({
    rules: {
        username: {
            required: true,
            remote: {
                url: "/CheckDuplicateUsername/",
                type: "get",
                data: { 
                    username: $("#username").val()
                }
            }
        },

        email: {
            required: true,
            remote: {
                url: "/CheckDuplicateEmail/",
                type: "get",
                data: { 
                    email : $("#email").val()
                }
            }
        },
//More code 
```

请注意，我将电子邮件和用户名字段中的值发送到服务器。我使用 ID 获取这些值。我想我是从表单的标签中获取这些数据的。现在让我向您展示我的 HTML。请注意，我的用户名和密码标签中的 ID 与上面的 jQuery 代码中使用的 ID 不同。

```
<div class="fieldWrapper">

              <label for="id_username">Username: </label>
              <input id="id_username" type="text" placeholder="First Name" name="username" maxlength="30" class="valid">
           </div>

<div class="fieldWrapper">

                <label for="id_email">Email</label>
                <input id="id_email" type="text" placeholder="Email" name="email" maxlength="75">
           </div> 
```

我的两个输入标签的 ID 分别为“id_username”和“id_email”。但是验证代码选择了 ID 为“用户名”和“电子邮件”的标签。请注意，我的验证代码正在向服务器发送正确的数据。如果我尝试更改验证代码以选择与“id_username”和“id_email”关联的标签内的值，则会将空字符串发送到服务器。怎么会这样！？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:44:49.357

当你有

```
rules: {
        username: {
... 
```

这意味着 validate 具有`name`属性 equal的字段`username`。当您指定`remote`选项时，您可以`data`用于发送附加字段的数据。就像插件文档中的这个例子一样：

> “使电子邮件字段成为必需的电子邮件并发出远程请求以检查给定地址是否已被占用。此外，http 方法设置为“post”，并且用户名与电子邮件地址一起发送。”

```
$("#myform").validate({
  rules: {
    email: {
      required: true,
      email: true,
      remote: {
        url: "check-email.php",
        type: "post",
        data: {
          username: function() {
            return $("#username").val();
          }
        }
      }
    }
  }
}); 
```

# android - 在微调器中显示对象而不仅仅是字符串

> ID：12504702
> 
> 赞同：0
> 
> 时间：2012-09-20T00:33:29.180
> 
> 标签：android, android-spinner

我正在用微调器构建一个对话框。对话完成后，它使用字符串参数调用父活动的方法 - 参数是被选择的字符串值。

**我目前的方法：**
我正在设置微调器的数组适配器，如下所示：

```
ArrayAdapter<String> adapter = 
    new ArrayAdapter<String>(getActivity(), android.R.layout.simple_spinner_item,
    categoryNames);     

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
mySpinner.setAdapter(adapter); 
```

`categoryNames`是一个字符串数组。对话框完成后，所选`categoryName`内容将用作父活动上的方法调用的参数。

**我真正想做的是：**
我真正想要的是显示一个`Category`对象列表。该类`Category`有 2 个属性 -`categoryId`和`categoryName`. 微调器仍应`categoryName`在下拉视图中显示 s，但是当对话框完成时，它应该能够明确地分辨出哪个被选中，并使用所选类别`Category`的 调用父活动的回调方法。`categoryId`

可以有多个`Category`ies 具有相同的`categoryName`.

**问：**以上怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T00:44:43.773

有几种不同的方法可以做你想做的事：

*   将额外数据存储在适配器中，例如 SimpleAdapter、SimpleCursorAdapter 或自定义的。
*   使用自定义对象的集合而不是字符串，只需覆盖该`toString()`方法即可在 Spinner 中呈现用户可读的字符串。

* * *

您似乎想做第二个选项，所以这是一个通用示例：

```
class Category {
    int id;
    String name;

    public Category(int id, String name) {
        this.id = id;
        this.name = name;
    }

    @Override
    public String toString() {
        return name;
    }
} 
```

您的 ArrayAdapter 几乎相同：

```
List<Category> categories = new ArrayList<Category>();
// Add new items with: categories.add(new Category(0, "Stack");

ArrayAdapter<Category> adapter = 
        new ArrayAdapter<Category>(getActivity(), android.R.layout.simple_spinner_item,
        categories);

...
mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        Category category = parent.getItemAtPosition(position);
        Log.v("Example", "Item Selected id: " + category.id + ", name: " + category.name);
    }

    public void onNothingSelected(AdapterView<?> parent) {}
}); 
```

# java - 适用于 Ubuntu 的 Java NFC 标签应用程序

> ID：12504706
> 
> 赞同：1
> 
> 时间：2012-09-20T00:34:18.837
> 
> 标签：java, ubuntu, debian, nfc

我正在寻找一个可以在桌面上读取 NFC 标签的工作 Java 教程应用程序（不是 Android - 这很容易！）。我的目标是拥有一个可以从 NFC 标签读取 url 的简单应用程序。我更喜欢 Java，但一切都很好。

到目前为止，nfctools 看起来很有希望，但我找不到基于它的简单阅读器。

我正在使用 ubuntu 12.04 并让 pcsc_scan 从加密狗读取原始数据，并使用 libtools 的 nfc-probe 来检测卡/nfc，但我追求更高级别的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:07:56.313

我会请你试试这个

[https://github.com/grundid/nfctools](https://github.com/grundid/nfctools)

以及这些帮助您入门的示例

[https://github.com/grundid/nfctools-examples](https://github.com/grundid/nfctools-examples)

> == Java NFC 工具 ==
> 
> NFCTools 是 Java 中用于 NFC 的库和工具的集合。目标设备是桌面读写器和安卓智能手机。
> 
> 库中的大多数功能都已使用运行 ICS 的 Nexus S 和 ACR 122 USB NFC 桌面阅读器进行了测试。
> 
> NDEF 标签功能适用于 Mifare 经典 1K 和 4K 卡以及 Ultralight/C (Type2) 标签。
> 
> 您可以在以下网址找到使用这些工具和一些 YouTube 视频的实时演示小程序：http: [//www.grundid.de/nfc/](http://www.grundid.de/nfc/)
> 
> 使用此库的在线 NDEF 编辑器也可在以下网址获得：http: [//ndefeditor.com](http://ndefeditor.com)

# java - 如何通过自定义标签查看web-inf下的jsp文件？

> ID：12504708
> 
> 赞同：1
> 
> 时间：2012-09-20T00:34:21.803
> 
> 标签：java, spring, jsp

我正在尝试检查 WEB-INF/view 文件下是否有文件。我目前正在使用 Spring 和 JSP 2.0，并尝试制作一个论坛主题。在自定义标签中，我试图检查 jsp 文件是否存在于目录中，但我无法让它工作......

```
File file = new File("./skin/login", "login.jsp");
login.jsp is included as /WEB-INF/view/skin/login/login.jsp 
```

无论如何要检查这个文件是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:54:37.293

使用`ServletContext.getRealPath()`方法从*虚拟*路径构造绝对路径。

```
String realPath=getServletContext().getRealPath("/WEB-INF/view/skin/login/login.jsp");

File file = new File(realPath);

if(file.exists()) {
   //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:42:43.927

试试这个

```
if (file.exists()) {
    //do what you want if file exists
} else {
    //do what you want if file doesn't exist
} 
```

# c - 字符串操作中的双重自由错误

> ID：12504710
> 
> 赞同：2
> 
> 时间：2012-09-20T00:34:40.230
> 
> 标签：c, string, malloc

如果通过了长字符串，则可以免费获得以下代码。我尝试了各种各样的事情。如果我删除 free(s) 行，它就会消失。不知道为什么会这样。

```
void format_str(char *str1,int l,int o) {
    char *s = malloc(strlen(str1)+1);
    char  *s1=s, *b = str1;
    int i=0;
    while(*str1!='\0') {
        i++;
        *s1++=*str1++;

        if(i>=l) {
            if(*str1!=',') {
                continue;
            }
        *s1++=*str1++;
            *s1++='\n';
            for(i=0;i<o;i++) {
                *s1++=' ';
            }
            i = 0;
        }
    }
    *s1 = '\0';
    strcpy(b,s);
    free(s);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:38:30.477

您可能没有`s`为要复制的数据量分配足够的空间。我不知道你的逻辑到底在做什么，但我看到了类似的东西

```
 *s1++=*str1++;
        *s1++='\n'; 
```

您将多个字符复制到`s`(via `s1`) 中的单个字符`str1`。

为了热爱所有可计算的事物，请使用更好的变量名！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:23:48.493

你几乎肯定会破坏堆。例如：

```
int main() 
{
    char original[1000] = "some,,,string,,, to,,,,format,,,,,";

    printf( "original starts out %u characters long\n", strlen(original));
    format_str( original, 6, 6);
    printf( "original is now %u characters long\n", strlen(original));

    return 0;
} 
```

将要求分配的缓冲区`malloc()`比大小大得多`strlen(str1)+1`。具体来说，它必须至少有 63 个字节长（因为函数在问题中进行了编码，分配的大小为 35 个字节）。

如果您需要更具体的帮助，您应该描述您正在尝试做什么（例如参数`l`和`o`用途是什么？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T02:23:38.480

为了心理健康，我将尝试重新格式化您的代码并猜测重命名变量。

```
void format_str(char *str, int minlen, int indent) 
{
    char *tmpstr = malloc( strlen(str) + 1 ); // here is the problem
    char *wrkstr = tmpstr, *savestr = str;
    int count = 0;

    while ( *str != '\0' ) {
        count++;
        *wrkstr++ = *str++;

        if ( count >= minlen ) {

            if ( *str != ',' ) {
                continue;
            }

            *wrkstr++ = *str++;
            *wrkstr++ = '\n';
            for ( count = 0;  count < indent;  count++ ) {
                *wrkstr ++= ' ';
            }
            count = 0;
        }
    }

    *wrkstr = '\0';
    strcpy(savestr,tmpstr);
    free(tmpstr);
} 
```

正如其他人指出的那样，您没有为临时字符串分配足够的空间。

您的代码中还有另外两个问题（其中一个是主要问题）。

您可能应该通过检查`str`不是`NULL`，也可能是`minlen`并且`indent`不是否定来验证您的论点。然而这并不重要，因为`NULL`str 只会出现段错误（标准库字符串函数的相同行为）和低于 1 的值`minlen`和/或`indent`只是表现得好像它们是 0。

主要问题是你有多少空间`str`。您在格式化期间盲目地增长字符串，然后将其复制回同一内存。这是等待发生的缓冲区溢出（具有潜在的严重安全隐患，特别是如果`str`碰巧指向堆栈）。

要解决这个问题：

*   您应该分配足够的空间。

*   您应该返回分配的字符串并规定调用者负责释放它（就像这样`strdup`做），或者添加一个指定可用空间的参数，`str`然后如果不足以存储格式化的字符串，则避免任何工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:09:23.947

用例是一个很好的例子，说明需要有可能进行试运行。

我建议你像这样修改你的代码：

```
ssize_t format_str(const char * input, int p1, int p2, char * output); 
```

1 目标缓冲区应由函数调用者通过`òutput`传递给函数的参数提供

2 该函数应返回写入目标缓冲区的字符数（负值可能表示任何类型的错误）

3 如果传递的`output`值为 NULL，则该函数不**复制**任何内容，而只是解析所引用的数据`input`并确定将多少字符写入目标缓冲区并返回该值。

然后使用转换函数需要调用它两次，如下所示：

```
char * input = "some,,test   , data,,, ...";
int p1 = <some value>, p2 = <some other value>;
ssize_t ssizeOutput = format_str(input, p1, p2, NULL)
if (0 > ssizeOutput)
{
  exit(EXIT_FAILURE);
}
else if (0 < ssizeOutput)
{
  char * output = calloc(ssizeOutput, sizeof(*output));
  if (!output)
  {
    exit(EXIT_FAILURE);
  }

  ssizeOutput = format_str(input, p1, p2, output);
  if (0 > ssizeOutput)
  {
    exit(EXIT_FAILURE);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T05:40:10.733

正如其他人指出的那样，堆内存很可能会损坏，因为代码写入超出了分配内存的末尾。

验证内存是否损坏很简单。在函数开始时保存 str1 的长度，我们将其命名为“len_before”。在调用 free() 之前，再次获取字符串长度并将其命名为“len_after”。

如果 (len_after > len_before) 那么我们有一个致命错误。

一个相对简单的解决方法是传入 str1 可以增长到的最大长度，分配那么多内存并在超过最大长度之前停止，即用 null 截断它但保持在限制范围内。

```
int len_before, len_after;

len_before = strlen(str1) + 1;
.
. /* Rest of the code. */
.
len_after = strlen(str1) + 1;
if (len_after > len_before) {
    printf("fatal error: buffer overflow by %d bytes.\n", len_after - len_before);
    exit(1);
}
free(s); 
```

# delphi - 如何检测应用程序焦点更改？

> ID：12504713
> 
> 赞同：1
> 
> 时间：2012-09-20T00:35:43.647
> 
> 标签：delphi, delphi-2006

我知道如何获取正在运行的前台窗口应用程序的标题和 exe 名称，但我使用 a`TTimer`来验证它何时更改。

有没有办法检测由 Alt+Tab、任务栏应用程序选择甚至新程序的启动触发的事件？

我使用 Delphi 2006 和 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:04:27.953

一种选择是安装全局挂钩。使用[CBT 钩子](http://msdn.microsoft.com/en-us/library/ms644977%28v=vs.85%29.aspx)，只要窗口被激活（除其他外），系统就会调用钩子过程。全局挂钩回调将放置在加载到进程地址空间中的 dll 中，因此它只能映射到具有相同“位”的进程（使用 Delphi 2006，回调将仅由 32 位调用过程）。此外，它不能映射到以更高权限创建的进程的地址空间（即，如果安装挂钩的进程不是以管理员身份运行的应用程序）。您还必须设计某种进程间通信机制，因为您的回调在其他应用程序中运行。你[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/ms644990%28v=vs.85%29.aspx)用来安装一个全局钩子。

另一种选择是使用事件挂钩，即[`SetWinEventHook`](http://msdn.microsoft.com/en-us/library/dd373640%28v=vs.85%29.aspx). 有两种，[in-context](http://msdn.microsoft.com/en-us/library/dd318524%28v=vs.85%29.aspx)和[out-of-context](http://msdn.microsoft.com/en-us/library/dd373611%28v=vs.85%29.aspx)。前一个，就像一个全局钩子，被放置在一个 dll 中以映射到其他进程的地址空间，所以你会遇到同样的缺点。断章取义的事件是最轻松的。在通知时它们不会被提示为全局钩子或上下文事件，但我相信这仍然比计时器更好。在您的上下文中挂钩事件的一个缺点是，您必须在回调中编写更多代码，即使对于子窗口，您也会收到窗口焦点通知，并且您必须解决它属于哪个应用程序等。 .

# flashdevelop - CreateJS + Haxe -> Uncaught ReferenceError: createjs is not defined

> ID：12504718
> 
> 赞同：0
> 
> 时间：2012-09-20T00:36:18.327
> 
> 标签：flashdevelop, haxe, createjs

成功编译后：[http://nickalie.com/posts/67](http://nickalie.com/posts/67)，当我尝试在浏览器中查看它时，我在`Uncaught ReferenceError: createjs is not defined`这里得到了一个（在生成的编译 create.js 文件上）：

```
var Main = $hxClasses["Main"] = function() { }
Main.__name__ = ["Main"];
Main._shape = null;
Main._stage = null;
Main.main = function() {
    createjs.Ticker.useRAF = true; 
```

未捕获的 ReferenceError：未定义 createjs

```
 createjs.Ticker.setFPS(60);
    haxe.Log.trace("hallo~!",{ fileName : "Main.hx", lineNumber : 35, className :             "Main", methodName : "main"});
} 
```

**编辑：**

好的，我添加了两个 EaselJS/TweenJS 文件，没有错误，但没有其他任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:06:29.123

好的，我能够在#haxe iRC 居民@Jan_Flanders 的帮助下完成这项工作。所需要的只是一个 build.hxml 文件：

```
-main Main
-cp src
-lib createjs
-js bin/m.js 
```

然后指定一个hxml文件：[FlashDevelop——指定一个HXML文件？](https://stackoverflow.com/questions/3664944/flashdevelop-specify-an-hxml-file)现在它可以工作了。

# r - 连接误差线的平均点

> ID：12504721
> 
> 赞同：2
> 
> 时间：2012-09-20T00:36:50.713
> 
> 标签：r, ggplot2

在 ggplot2 中，我正在尝试一件简单的事情，但由于某种原因我无法做到。我已经在数据框中调整了均值和 SE，并且想要绘制均值、误差线，然后将均值与点连接起来。这是代码和错误（除了连接方式之外，它会做所有事情`geom_line`（使用[RCookbook](http://wiki.stdout.org/rcookbook/Graphs/Plotting%20means%20and%20error%20bars%20%28ggplot2%29/)：

```
library(ggplot2)
#data set
data1 <- structure(list(group = structure(1:3, .Label = c("1", "2", "3"
), class = "factor"), estimate = c(55.7466654122763, 65.0480954172939, 
61.9552391704298), SE = c(2.33944612149257, 2.33243565412438, 
2.33754952927041), t.ratio = c(23.8290016171476, 27.8884844271143, 
26.5043535525714)), .Names = c("group", "estimate", "SE", "t.ratio"
), row.names = c(NA, 3L), class = "data.frame")

#the attempted plot
pd <- position_dodge(.1)
ggplot(data1, aes(x=group, y=estimate, group=group)) + 
    geom_errorbar(aes(ymin=estimate-SE, ymax=estimate+SE), 
        colour="black", width=.1, position=pd) +
    geom_line(data=data1, aes(x=group, y=estimate)) + 
    geom_point(position=pd, size=4) 
```

错误：

```
ymax not defined: adjusting position using y instead
geom_path: Each group consist of only one observation. Do you need to adjust the group aesthetic? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:01:24.910

如果您`group`在 ggplot 调用中删除分组并 `x = as.numeric(group )`在对 的调用中设置`geom_line`，则它可以工作。

此外，您不需要`data1`在内部重新引用`geom_line`

```
ggplot(data1, aes(x=group, y=estimate)) + 
  geom_errorbar(aes(ymin=estimate-SE, ymax=estimate+SE), 
  colour="black", width=.1, position=pd) +
  geom_line( aes(x=as.numeric(group), y=estimate)) + 
  geom_point(position=pd, size=4) 
```

![在此处输入图像描述](../Images/7230fe488c47e290c0da546a7ae1c70c.png)

如果您`group`按`group`，那么您只有一个值`geom_line`来创建一行，因此会出现错误消息。`ggplot`如果将变量`x`或映射变量视为一个因素，则会发生相同的错误`y`- 这是因为如果您将变量编码为一个因素，R（和 ggplot）将认为它们是独立的组，而不是连接点 - 这是明智的默认行为。

# 编辑 - 带有字母因子标签

由于因子在内部编码的方式，这将适用于*字母*`R`因子标签 （即 as.numeric(factor) 返回数字而不是因子标签）

即。

将组更改为`a`, `b`,`c`

```
levels(data1[['group']]) <- letters[1:3] 
ggplot(data1, aes(x=group, y=estimate)) + 
  geom_errorbar(aes(ymin=estimate-SE, ymax=estimate+SE), 
  colour="black", width=.1, position=pd) +
  geom_line( aes(x=as.numeric(group), y=estimate)) + 
  geom_point(position=pd, size=4) 
```

![在此处输入图像描述](../Images/9a8efa2d6043ec8d7284084bd7c38ef6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:05:27.160

作为 mnel 答案的替代方案，您可以创建一个新变量，以便您拥有一个所有 3 个组都具有相同值的列：

```
 data1$all <- "All" 
```

然后将其用作`group`您的线条的美学：

```
ggplot(data1, aes(x=group, y=estimate)) + 
    geom_errorbar(aes(ymin=estimate-SE, ymax=estimate+SE), 
        colour="black", width=.1, position=pd) +
    geom_line(aes(x=group, y=estimate, group=all)) + 
    geom_point(position=pd, size=4) 
```

Mnel 的答案可能更优雅，但如果组不是数字并且不能如此直接地转换为数字，这可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T01:26:29.830

您还可以查看此[SO Question](https://stackoverflow.com/questions/7977742/two-factor-anova-errorbar-plot-in-r)的第二个答案如果您正在努力实现更全面的实施，这可能会为您节省一些时间。

# .net - WCF NetTcpPortSharing 仅适用于本地主机？

> ID：12504723
> 
> 赞同：0
> 
> 时间：2012-09-20T00:37:00.293
> 
> 标签：.net, wcf, windows-server-2008-r2

我有一个 WCF 服务，它已经使用本地主机上的端点地址工作了很长时间。

**作品：** `net.tcp://localhost/myApp`

**失败：** `net.tcp://100.5.5.5/myApp`

我想将服务公开给网络上的另一个盒子。失败的版本会引发以下错误：

`The TransportManager failed to listen on the supplied URI using the NetTcpPortSharing service: the service failed to listen.`

从 localhost 切换到使 WCF 混乱的 IP 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:08:24.813

您必须监听分配给主机的 IP。嗬！

# android - How do i display webviews in viewflipper?

> ID：12504725
> 
> 赞同：-1
> 
> 时间：2012-09-20T00:37:41.683
> 
> 标签：android, xml, layout, webview, viewflipper

I am a noob to android development and i am trying to display a listview and multiple webviews within a view flipper. Before i added the webviews and listview the viewflipper xml was parsing and executing fine. However, now eclipe is giving me the same "Element type "WebView" must be followed by either attribute specifications, ">" or "/>"." message for each child view in my viewflipper. I am at my wits end trying to figure out what is goin on. any help is greatly appreciated.

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:layout_height="match_parent" android:background="#FFFFFF">

<ImageButton
    android:id="@+id/twitter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|right"
    android:background="@null"
    android:src="@drawable/twitterlogo" >
</ImageButton>

<ImageButton
android:id="@+id/youtube"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="bottom|right"
android:layout_marginRight="100dp"
android:background="@null"
android:src="@drawable/youtubelogo" >
</ImageButton>

<ImageButton
android:id="@+id/rss"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="bottom|right"
android:layout_marginRight="50dp"
android:background="@null"
android:src="@drawable/rsslogo" >
</ImageButton>

<ImageButton
android:id="@+id/calendar"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="bottom|right"
android:layout_marginRight="150dp"
android:background="@null"
android:src="@drawable/ic_launcher" >
</ImageButton>

<ViewFlipper android:layout_width="match_parent"
    android:layout_height="match_parent" android:id="@+id/viewFlipper1" >
    <WebView android:id="@+id/webViewnews"android:layout_width="match_parent"
        android:layout_height="match_parent" ></WebView>
    <ListView android:id="@+id/ListViewId" android:layout_width="fill_parent"
        android:layout_height="wrap_content"android:cacheColorHint="#00000000"></ListView>          
    <WebView android:id="@+id/webViewcoinshows"android:layout_width="match_parent"
        android:layout_height="match_parent" ></WebView>
    <WebView android:id="@+id/webViewyoutube"android:layout_width="match_parent"
        android:layout_height="match_parent" ></WebView>
</ViewFlipper> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:15:13.110

Sounds like you need to clean your project. If that doesn't work then clean up the structure a bit. Crtl+Shift+F should do the trick.

# json - Json 结果包含类型未匹配的 NaN

> ID：12504726
> 
> 赞同：2
> 
> 时间：2012-09-20T00:37:58.747
> 
> 标签：json, google-fusion-tables

v1.0 API 返回 NaN 的 json 值，这是无效的 JSON。

这是一个可重现的错误。

1.  创建具有 NUMERIC 类型的列的 Fusion Table
2.  插入一条值为空字符串的记录。
3.  查询该记录。

示例表：164EYrIvGHKG1IRSXbG6_MD1kqHcvs0Vm-nRlRE4

```
INSERT INTO 164EYrIvGHKG1IRSXbG6_MD1kqHcvs0Vm-nRlRE4 (Text,Number) VALUES ('Null','')
SELECT * from 164EYrIvGHKG1IRSXbG6_MD1kqHcvs0Vm-nRlRE4 where Text = 'Null' 
```

如果您在[API 资源管理](https://developers.google.com/apis-explorer/#p/fusiontables/v1/fusiontables.query.sql?sql=SELECT%20%2a%20from%20164EYrIvGHKG1IRSXbG6_MD1kqHcvs0Vm-nRlRE4%20where%20Text%20%253D%20%27Null%27&_h=12&)器中尝试此查询，它将失败，因为它无法解析生成的 JSON。

预期结果将是插入失败或将结果转换为 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:56:23.577

感谢您报告此事。我创建了一个内部问题来跟踪它。

# javascript - 如何使用 Javascript 删除 Mobile Safari 的 JS 文件？

> ID：12504731
> 
> 赞同：1
> 
> 时间：2012-09-20T00:39:01.850
> 
> 标签：javascript, ipad, mobile-safari

我网站上的一个 Javascript 文件搞砸了 iPad (Mobile Safari) 上的显示。我只想在 iPad 上删除该文件并将其提供给其他所有浏览器。

我有以下javascript：

```
<script type="text/javascript">
<![CDATA[
function removejscssfile(filename, filetype){
 var targetelement=(filetype=="js")? "script" : (filetype=="css")? "link" : "none" //determine element type to create nodelist from
 var targetattr=(filetype=="js")? "src" : (filetype=="css")? "href" : "none" //determine corresponding attribute to test for
 var allsuspects=document.getElementsByTagName(targetelement)
 for (var i=allsuspects.length; i>=0; i--){ //search backwards within nodelist for matching elements to remove
  if (allsuspects[i] && allsuspects[i].getAttribute(targetattr)!=null && allsuspects[i].getAttribute(targetattr).indexOf(filename)!=-1)
   allsuspects[i].parentNode.removeChild(allsuspects[i]) //remove element by calling parentNode.removeChild()
 }
}

if((navigator.userAgent.match(/iPad/i)) 
{
  removejscssfile("somescript.js", "js") //remove all occurences of "somescript.js" on page for ipad 
}
]]
</script> 
```

首先 - 上面的 Javascript 有效吗？（我知识有限）

其次 - 这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:46:25.150

我通过找到有问题的 JS 函数并添加：

```
&& navigator.userAgent.match(/ipad/i) == null 
```

简单就好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:49:17.447

如果您不使用 php 或其他更容易的方法，则应该以相反的方式进行操作，如果浏览器不是 ipad，则有条件地将文件加载到文档的头部。

```
 function loadjscssfile(filename, filetype) {
            if (filetype == "js") { //if filename is a external JavaScript file

                var fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript")
                fileref.setAttribute("src", filename)

            }
            else if (filetype == "css") { //if filename is an external CSS file
                var fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref != "undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
    }

    var isiPad = navigator.userAgent.match(/iPad/i) != null;

    if (!isiPad) {
        //load js OR css files
    } 
```

# sql - 从字符串中去除非数字字符

> ID：12504732
> 
> 赞同：6
> 
> 时间：2012-09-20T00:39:04.760
> 
> 标签：sql, sql-server-2008, tsql

我目前正在做一个数据转换项目，需要从字符串中删除所有字母字符。不幸的是，我无法创建或使用函数，因为我们不拥有源机器，这使得我从搜索以前的帖子中找到的方法无法使用。

在 select 语句中执行此操作的最佳方法是什么？速度不是太大的问题，因为它只会运行超过 30,000 条左右的记录，而且是一次性声明。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T01:34:42.163

您可以在单个语句中执行此操作。您并没有真正创建一个包含 200 多个 REPLACE 的声明，是吗？！

```
update tbl
set S = U.clean
from tbl
cross apply
(
    select Substring(tbl.S,v.number,1)
    -- this table will cater for strings up to length 2047
    from master..spt_values v
    where v.type='P' and v.number between 1 and len(tbl.S)
    and Substring(tbl.S,v.number,1) like '[0-9]'
    order by v.number
    for xml path ('')
) U(clean) 
```

使用示例数据显示此查询的工作[SQL Fiddle](http://sqlfiddle.com/#!3/06c5e/1/0)

复制如下以供后代使用：

```
create table tbl (ID int identity, S varchar(500))
insert tbl select 'asdlfj;390312hr9fasd9uhf012  3or h239ur ' + char(13) + 'asdfasf'
insert tbl select '123'
insert tbl select ''
insert tbl select null
insert tbl select '123 a 124' 
```

结果

```
ID  S
1   390312990123239
2   123
3   (null)
4   (null)
5   123124 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T01:50:30.817

CTE 来这里寻求帮助。

```
;WITH CTE AS 
(
SELECT 

      [ProductNumber] AS OrigProductNumber
      ,CAST([ProductNumber] AS VARCHAR(100)) AS [ProductNumber]           
FROM [AdventureWorks].[Production].[Product]
UNION ALL
SELECT OrigProductNumber
       ,CAST(STUFF([ProductNumber], PATINDEX('%[^0-9]%', [ProductNumber]), 1, '') AS VARCHAR(100) ) AS [ProductNumber]
FROM CTE WHERE PATINDEX('%[^0-9]%', [ProductNumber]) > 0 
)

SELECT * FROM CTE
WHERE PATINDEX('%[^0-9]%', [ProductNumber]) = 0   
OPTION (MAXRECURSION 0) 
```

输出：

```
OrigProductNumber   ProductNumber
WB-H098                 098
VE-C304-S               304
VE-C304-M               304
VE-C304-L               304
TT-T092                 092 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T01:10:55.313

好吧，如果你真的不能使用函数，我想你可以这样做：

```
SELECT REPLACE(REPLACE(REPLACE(LOWER(col),'a',''),'b',''),'c','')
  FROM dbo.table... 
```

显然它会比这更难看，因为我只处理了前三个字母，但它应该给出这个想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-20T08:43:52.107

RichardTheKiwi 的脚本用于在没有交叉应用的选择中使用，还添加了点，因为在我的情况下，我将它用于 varchar 字段中的 double 和 money 值

```
CREATE FUNCTION dbo.ReplaceNonNumericChars (@string VARCHAR(5000))
RETURNS VARCHAR(1000)
AS 
    BEGIN
        SET @string = REPLACE(@string, ',', '.')
        SET @string = (SELECT   SUBSTRING(@string, v.number, 1)
                       FROM     master..spt_values v
                       WHERE    v.type = 'P'
                                AND v.number BETWEEN 1 AND LEN(@string)
                                AND (SUBSTRING(@string, v.number, 1) LIKE '[0-9]'
                                     OR SUBSTRING(@string, v.number, 1) LIKE '[.]')
                       ORDER BY v.number
                      FOR
                       XML PATH('')
                      )
        RETURN @string
    END
GO 
```

谢谢 RichardTheKiwi +1

# haskell - Haskell SOEGraphics 窗口不会关闭

> ID：12504742
> 
> 赞同：5
> 
> 时间：2012-09-20T00:41:18.950
> 
> 标签：haskell, graphics, io

我目前正在遵循书中的练习：“Haskell School of Expression”，并且已经达到了关于创建图形的第三章。本书使用[SOEGraphics](http://cvs.haskell.org/Hugs/pages/libraries/HGL/Graphics-SOE.html)模块并演示了在窗口中绘制一些简单的文本，然后按下按钮将其关闭。

但是，在编译和执行后，我发现虽然窗口出现了屏幕上的文本，但无论我按下哪个键，或者焦点是在命令行还是窗口本身，窗口都拒绝关闭。

以下是本书的源代码：

```
module Main where
import SOE
main =  runGraphics(
        do  w <- openWindow
                "My First Graphics Program" (300, 300)
            drawInWindow w (text(100,200) "HelloGraphicsWorld")
            k <- getKey w
            closeWindow w
        ) 
```

关闭窗口的唯一方法是使用 CTRL-C 强制它退出。我的代码有什么被我忽略的吗？该程序使用 GHC 7.4.1 编译并在 Ubuntu 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:58:47.660

尝试`getKeyChar`代替`getKey`. 某些操作系统中的首选使用方法和/或行为似乎发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:01:30.607

我正在使用[当前版本](http://www.cs.yale.edu/homes/hudak/SOE/SOE-20120121.zip)的 SOE 软件包，它是在问题日期前大约 9 个月发布的。就像问题的海报一样，我在 Ubuntu (12.04) 上运行 GHCi 7.4.1。我遇到了同样的问题，但 DuckMaestro 的回答并不适用：

`getKeyChar`未在 SOE 包的任何模块中定义。然而，`getKeyEx`是：

`getKeyEx :: Window -> Bool -> IO Char`

虽然在 SOE 包本身中没有记录，但这个函数似乎在模块中模拟了它的[同名。](http://cvs.haskell.org/Hugs/pages/libraries/HGL/Graphics-HGL-Utils.html#v%3AgetKeyEx)`Graphics.HGL.Utils`

然而，虽然`getKey`是从 SOE 模块导出的，但`getKeyEx`不是。

为了在按键事件上编译并关闭窗口

1.  `getKeyEx`从 SOE 模块导出
2.  在问题中引用的代码中，更改`k <- getKey w`为`k <- getKeyEx w True`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-12T17:20:51.253

Daniel 是正确的，但我发现 getKeyEx 在仅使用 getKeyEx 的 getKey 不起作用时起作用很奇怪。于是我看了看。问题很清楚。这是 getKey 的现有代码

```
getKey win = do
  ch <- getKeyEx win True
  if ch == '\x0' then return ch
    else getKeyEx win False 
```

这就是它应该是什么

```
getKey win = do
  ch <- getKeyEx win True
  if ch /= '\x0' then return ch
    else getKeyEx win False 
```

进行此修复并 getKey 工作。

# perl - perl 列出包中的子程序，不包括从其他包中导入的子程序

> ID：12504744
> 
> 赞同：0
> 
> 时间：2012-09-20T00:41:42.930
> 
> 标签：perl, package, subroutine

有几种方法可以列出包中的所有子项：

```
sub list_methods {
    my $package = shift;
    no strict 'refs';
    return grep { defined &{"$package\::$_"} } keys %{"$package\::"}
} 
```

但是，如果包“使用”其他包，例如“File::Basename”，也会列出“fileparse”等子包。我试图“要求”软件包而不是“使用”它们，问题可以解决。另一方面，如果我“需要”包，我必须指定潜艇的完整路径。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:27:45.027

```
use B qw( svref_2object );

sub list_nonimported_subs {
    my ($pkg_name) = @_;
    my $pkg = do { no strict 'refs'; *{ $pkg_name . '::' } };

    my @nonimported_subs;
    for my $name (keys %$pkg) {
       my $glob = $pkg->{$name};
       my $code = *$glob{CODE}
          or next;

       my $cv = svref_2object($code);
       my $orig_pkg_name = $cv->GV->STASH->NAME;
       next if $orig_pkg_name ne $pkg_name;

       push @nonimported_subs, $name;
    }

    return @nonimported_subs;
} 
```

有一个标志可以告诉您是否导入了 glob 中的 CV，但我找不到如何使用 B 来获取它，所以我检查`__PACKAGE__`了 sub 与正在检查的包的比较。

无法判断某个东西是否是方法，所以我概括了 sub 的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:59:15.960

PPI 将解析源代码，因此模块甚至不需要加载：

```
use PPI;

my $source = $INC{'Some/Module.pm'};  # or whatever
my $Document = PPI::Document->new($source) or die "oops";
for my $sub ( @{ $Document->find('PPI::Statement::Sub') || [] } ) {
    unless ( $sub->forward ) {
        print $sub->name, "\n";
    }
} 
```

# php - amazon s3 从上传响应中获取对象信息

> ID：12504745
> 
> 赞同：0
> 
> 时间：2012-09-20T00:41:45.017
> 
> 标签：php, api, amazon-s3, amazon-web-services

我正在使用 PHP 将图像上传到亚马逊 s3。当我上传文件时，我想将有关它的信息存储在我的数据库中，以便在需要获取有关文件的信息（文件名、大小、类型）时发出更少的 API 请求

创建新对象：

```
 //initiate the class
    $s3 = new AmazonS3();

    $bucket = 'my_bucket';

    //upload the file           
    $response = $s3->create_object($bucket, $filename, array(
                    'fileUpload' => $filepath,
                    'acl' => AmazonS3::ACL_PUBLIC,
                    'contentType' => $file_type,
                    'storage'     => AmazonS3::STORAGE_REDUCED,
                    'headers'     => array( // raw headers
                          'Cache-Control' => 'max-age=315360000', 
                          'Expires' => gmdate("D, d M Y H:i:s T", strtotime("+5 years"))
                    )

    ));                 

    var_dump($response->isOK()); 
```

上传成功后，是否可以在`$response`不发出新的 GET 请求的情况下从变量中获取文件名、大小和文件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:19:44.887

这些值不在 中`$response`，但您不需要它们。你已经知道你想知道的一切：

*   文件名为`$filename`.
*   文件大小可以由 确定`filesize($filepath)`。
*   文件类型是`$file_type`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:02:51.647

`$response`我可以通过使用访问返回的数组`header`

例如获取文件大小

```
$response->header['_info']['size_upload'] 
```

# scala - 斯卡拉代码片段

> ID：12504746
> 
> 赞同：2
> 
> 时间：2012-09-20T00:42:16.933
> 
> 标签：scala

我是斯卡拉的新手。任何人都可以向我解释以下代码吗？

```
 val l: Either[String, Int] = Left("flower")
 val r: Either[String, Int] = Right(12)
 l.left.map(_.size): Either[Int, Int] // Left(6)
 r.left.map(_.size): Either[Int, Int] // Right(12) 
```

关于第 3 行和第 4 行，我有几个问题：

1.  _.size 在上下文中代表什么？
2.  r.left 返回什么？
3.  r.left.map 返回什么？
4.  r.left.map(_.size): Either[Int, Int] 是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T01:42:13.947

第一行定义了一个`l`类型为 的变量`Either[String, Int]`。（`Either`抽象）类用于表示某物何时可以保存两个可能值之一。和类 subclass `Left`，因此是有效的分配。约定用于表示某种失败（例如，描述出了什么问题），并表示某种成功的计算/值。有了这些信息，第二行也很容易解释。`Right``Either``Left``String``Right`

第 3 行和第 4 行使用`l`和`r`变量的投影并执行`map`. `left`and`right`方法返回投影。如果您`left`对`Left`变量进行投影，则可以在`map`内部值上进行投影。如果您`right`对`Left`变量进行投影，`Right`即使在`map`. 如果你`right`在 a`Left`等上做同样的事情。

所以第 3 行，因为`l`是 a`Left`并且你`left`投影它，所以你应用给你`map`的`Left("flower")`值，`Left(6)`因为“花”的长度为 6。

在第 4 行，`r`它`Right`什么也不做。

对于您的问题：

1.  `_.size`是传递给该`map`方法的函数。该`map`方法“解包”内部的值`Left`（它对第 4 行没有任何作用，`Right`因为它是左投影）并调用`.size`它。

2.  `r.left`返回值的左投影`Right(12)`。如代码的第 4 行所示，对此进行映射没有任何作用。

3.  相同的旧`Right(12)`值。

4.  由于它是`Right(12)`and 类型`Right[_, Int]`，它是子类`Either[Int, Int]`，所以它是有效的。它只是为了展示我相信的类型。

如果你去 REPL 并输入类似的东西`val foo = Right(1234)`，你会得到一个类型`Right[Nothing, Int]`- 这“有效”，因为该`Nothing`类型是所有类型的子类。

On a related note, once you start feeling comfortable with that and/or Scala, I recommend checkout Scalaz (a library for Scala that provides functional programming things like type classes, monads, and all that good stuff) and the `Validation` class which is pretty similar to `Either`.

# javascript - AngularJS - 在服务中处理异步数据

> ID：12504747
> 
> 赞同：0
> 
> 时间：2012-09-20T00:42:26.423
> 
> 标签：javascript, angularjs

我想在服务中获取一些异步数据，这些数据需要在那里进一步处理。代码在[plnkr](http://plnkr.co/edit/6SkzXK?p=preview)，

我模拟了一个超时的异步调用，一旦收到数据，UI就会更新。但是，我还需要处理服务中的数据 (doubleData) 并稍后在我的 UI 中使用。说，我需要用一些细节来扩充数据。

由于数据在`{{doubleData()}}`被调用时为空，因此它永远不会填充它。如何在我的服务中实现进一步处理数据的方法（填充异步 - 比如说 $http）？

## 索引.html

```
<!doctype html>
<html ng-app="myApp"> 
    <head>
        <script type="text/javascript" src="../../../angular-1.0.2/angular.js"></script>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <div ng-controller="MainCtrl">
            {{data}}<br>
            {{doubleData()}}
        </div>
    </body>
</html> 
```

## 脚本.js

```
var app = angular.module('myApp',[]);

app.factory('myService', function($timeout) {
  var data = [],
      doubleData = [];

  var myService = {};
  myService.async = function() {
    $timeout(function(){
        data.length = 0;
        for(var i = 0; i < 10; i++){
            data.push({val: Math.random()});                        
        }
    }, 5000); 
  };
  myService.data = function() { return data; };
  myService.doubleData = function() { 
    doubleData = []
    for (var i = 0; i < data.length; i++) {
        doubleData.push({val: 10* data[i]});   
    };    
    return doubleData;                 
  };

  return myService;
});

app.controller('MainCtrl', function( myService,$scope) {
  myService.async();
  $scope.data = myService.data();
  $scope.doubleData = myService.doubleData;

}); 
```

## 输出（5秒后）：

```
[{"val":0.4908415926620364},{"val":0.25592787051573396},{"val":0.8326190037187189},{"val":0.6478461190126836},{"val":0.8502937415614724},{"val":0.19280604855157435},{"val":0.06115643493831158},{"val":0.5100495833903551},{"val":0.4134843284264207},{"val":0.5548313041217625}]
[{"val":null},{"val":null},{"val":null},{"val":null},{"val":null},{"val":null},{"val":null},{"val":null},{"val":null},{"val":null}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:01:23.340

看起来您的问题是您需要访问的 for 循环中的错字`data[i].val`：

```
for (var i = 0; i < data.length; i++) {
    doubleData.push({val: 10* data[i].val});   
}; 
```

另一种执行此操作的方法（不注意变量的更改）是以`doubleData`与您绑定相同的方式进行绑定，`data`并在异步回调中调用一个函数以清空并`doubleData`使用计算值填充。有关示例，请参[见此 plnkr](http://plnkr.co/edit/XLBYXO?p=preview)。

# c# - 异步套接字序列化和反序列化

> ID：12504748
> 
> 赞同：0
> 
> 时间：2012-09-20T00:42:42.867
> 
> 标签：c#

我在从客户端接收用 Java 编写的对象时遇到问题。我 100% 确定我的客户端代码，这很好。但是当我尝试从我的 C# 异步服务器接收几个错误时，我认为这是因为我真的不知道如何获取它的流

```
int iRx = socketData.m_currentSocket.EndReceive(asyn);
byte[] receivedData = socketData.dataBuffer;
MemoryStream memStream = new MemoryStream();
BinaryFormatter binForm = new BinaryFormatter();
memStream.Write(receivedData, 0, receivedData.Length);
memStream.Seek(0, SeekOrigin.Begin);
UserData usdata = (UserData)binForm.Deserialize(memStream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:50:20.943

Java 序列化的内容将与内置的 .NET 序列化程序完全不同。您必须知道流的格式并手动反序列化一个字节。

例如，如果您`int`在 .NET 中序列化一个，它会序列化一个 7 位编码值。如果您使用 序列化自定义类型`BinaryFormatter`，它会在流中包含该类型的强名称——这显然不是 Java 会做的。

您可能需要考虑在 Java 和 .NET 中工作的第三方序列化器/反序列化器。例如[http://woxserializer.sourceforge.net/](http://woxserializer.sourceforge.net/)

# python - 与 Tastypie 的反向关系，AttributeError

> ID：12504756
> 
> 赞同：0
> 
> 时间：2012-09-20T00:44:51.867
> 
> 标签：python, django, django-models, tastypie

我有一个资源，我试图在其中公开它的选票。

```
class ViewPostResource(ModelResource):
    user = fields.ForeignKey(UserResource,'user',full=True)
    votes = fields.ToOneField('voting.resources.GetVotesResource', attribute='vote_set', full=True)
    class Meta:
        queryset = UserPost.objects.all()
        resource_name = 'posts'
        include_resource_uri = False

class GetVotesResource(ModelResource):
    user = fields.ForeignKey(UserResource,'user', full=True)

    class Meta:
        queryset = Vote.objects.all()
        resource_name = 'vote' 
```

不过，我的投票模型与正常情况有些不同。如何使用以下模型设置公开帖子的投票？

```
class Vote(models.Model):
    user         = models.OneToOneField(User, related_name='vote')
    content_type = models.ForeignKey(ContentType)
    object_id    = models.PositiveIntegerField()
    object       = generic.GenericForeignKey('content_type', 'object_id')
    vote         = models.SmallIntegerField(choices=SCORES) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:49:50.643

我将改用“脱水”：

```
 def dehydrate(self, bundle):
        bundle.data['votes'] = Vote.objects.filter(object_id=bundle.obj.id, content_type=n).count() // or use aggregate to get total votes.
        return bundle.date 
```

将“n”替换为正确的内容类型。

# html - html锚标签

> ID：12504759
> 
> 赞同：0
> 
> 时间：2012-09-20T00:45:08.827
> 
> 标签：html

我有以下 div 标签：

```
 <div id="headerimage"></div> 
```

与此相关的是以下 css：

```
 #headerimage
    {
     width: 897px;
     height: 65px;
     background: url('../images/headerimg.jpg'); 
    } 
```

我需要背景图片可以点击到当用户点击它时，它会转到 url。

我做了以下工作，但不确定是否有更优雅的方式（注意我如何在锚标记中使用它：

```
 <a href="http://www.myurl.com">
      <div id="headerimage"></div>
     </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:52:23.793

内特，

你可以把你的锚标签变成一个块元素：http: [//jsfiddle.net/Vdfz8/](http://jsfiddle.net/Vdfz8/)

希望这会有所帮助，甚至可能会为您简化事情。

干杯

# c++ - Pygment 词法分析器多个标记

> ID：12504760
> 
> 赞同：2
> 
> 时间：2012-09-20T00:45:13.053
> 
> 标签：c++, lexer, pygments

我正在使用 Python 插件 Pygments 的词法分析器。我想获取 C++ 代码的令牌，特别是在声明新变量时，例如

```
int a=3,b=5,c=4; 
```

这里 a,b,c 应该被赋予类型“Declared variables”，它不同于

```
a=3,b=5,c=4; 
```

这里 a,b,c 应该简单地被赋予类型“变量”，因为它们之前已经声明过。

我想使用词法分析器一次扫描多个标记的能力（[请参阅 Pygments 文档](http://pygments.org/docs/lexerdevelopment/#scanning-multiple-tokens-at-once)）我想编写一个正则表达式

```
(int)(\s)(?:([a-z]+)(=)([0-9]+)(,))*, bygroups(Type,Space,Name,Equal,Number,Comma) 
```

（“？：”只是告诉 Pygments 这个分组不应该在 bygroups 中使用。）

但是，它不匹配该行中的任意数量的声明，而是只返回该行中最后一个声明的标记（在这种情况下，“c = 4”部分。）我怎样才能让它返回所有声明的标记线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:59:55.427

你需要的是一个有状态的词法分析器。您的正则表达式不起作用的原因是这些组不连续。

```
int a=3,b=5,c=4; 
```

在这里，您希望字符 0..2 为 Type、3..3 Space、4..7 Name、Equal Number 和 Comma，然后是 Name、Equal、Number 和 Comma。那不好。

解决方案是记住何时看到类型声明，进入一个新的词法分析器模式，该模式一直持续到下一个分号。请参阅 pygments 文档中的[更改状态](http://pygments.org/docs/lexerdevelopment/#changing-states)。

下面是一个使用 CFamilyLexer 并添加三个新词法分析器状态的解决方案。因此，当它在`function` 状态下看到这样的行时：

```
int m = 3 * a + b, x = /* comments ; everywhere */ a * a; 
```

首先它消耗：

```
int 
```

它匹配我添加的新规则，因此进入`vardecl`状态：

```
m 
```

哦，一个变量的名称！由于词法分析器处于`vardecl`状态，这是一个新定义的变量。将其作为`NameDecl`令牌发出。然后进入`varvalue`状态。

```
3 
```

只是一个数字。

```
* 
```

只是一个运营商。

```
a 
```

哦，一个变量的名称！但是现在我们处于`varvalue`状态所以它*不是*一个变量声明，只是一个常规的变量引用。

```
+ b 
```

一个运算符和另一个变量引用。

```
, 
```

`m`完全声明的变量值。回到`vardecl`国家。

```
x = 
```

新变量声明。

```
/* comments ; everywhere */ 
```

另一个状态被压入堆栈。在注释中，原本有意义的标记会`;`被忽略。

```
a * a 
```

变量的值`x`。

```
; 
```

返回`function`状态。特殊变量声明规则完成。

```
from pygments import highlight
from pygments.formatters import HtmlFormatter, TerminalFormatter
from pygments.formatters.terminal import TERMINAL_COLORS
from pygments.lexer import inherit
from pygments.lexers.compiled import CFamilyLexer
from pygments.token import *

# New token type for variable declarations. Red makes them stand out
# on the console.
NameDecl = Token.NameDecl
STANDARD_TYPES[NameDecl] = 'ndec'
TERMINAL_COLORS[NameDecl] = ('red', 'red')

class CDeclLexer(CFamilyLexer):
    tokens = {
        # Only touch variables declared inside functions.
        'function': [
            # The obvious fault that is hard to get around is that
            # user-defined types won't be cathed by this regexp.
            (r'(?<=\s)(bool|int|long|float|short|double|char|unsigned|signed|void|'
             r'[a-z_][a-z0-9_]*_t)\b',
             Keyword.Type, 'vardecl'),
            inherit
        ],
        'vardecl' : [
            (r'\s+', Text),
            # Comments
            (r'/(\\\n)?[*](.|\n)*?[*](\\\n)?/', Comment.Multiline),
            (r';', Punctuation, '#pop'),
            (r'[~!%^&*+=|?:<>/-]', Operator),
            # After the name of the variable has been tokenized enter
            # a new mode for the value.
            (r'[a-zA-Z_][a-zA-Z0-9_]*', NameDecl, 'varvalue'),
        ],
        'varvalue' : [
            (r'\s+', Text),
            (r',', Punctuation, '#pop'),
            (r';', Punctuation, '#pop:2'),
            # Comments
            (r'/(\\\n)?[*](.|\n)*?[*](\\\n)?/', Comment.Multiline),                
            (r'[~!%^&*+=|?:<>/-\[\]]', Operator),
            (r'\d+[LlUu]*', Number.Integer),            
            # Rules for strings and chars.
            (r'L?"', String, 'string'),
            (r"L?'(\\.|\\[0-7]{1,3}|\\x[a-fA-F0-9]{1,2}|[^\\\'\n])'", String.Char),
            (r'[a-zA-Z_][a-zA-Z0-9_]*', Name),
            # Getting arrays right is tricky.
            (r'{', Punctuation, 'arrvalue'),
        ],
        'arrvalue' : [
            (r'\s+', Text),
            (r'\d+[LlUu]*', Number.Integer),
            (r'}', Punctuation, '#pop'),
            (r'[~!%^&*+=|?:<>/-\[\]]', Operator),
            (r',', Punctuation),
            (r'[a-zA-Z_][a-zA-Z0-9_]*', Name),
            (r'{', Punctuation, '#push'),
        ]
    }

code = '''
#include <stdio.h>

void main(int argc, char *argv[]) 
{
    int vec_a, vec_b;
    int a = 3, /* Mo;yo */ b=5, c=7;
    int m = 3 * a + b, x = /* comments everywhere */ a * a;
    char *myst = "hi;there";
    char semi = ';';
    time_t now = /* Null; */ NULL;
    int arr[10] = {1, 2, 9 / c};
    int foo[][2] = {{1, 2}};

    a = b * 9;
    c = 77;
    d = (int) 99;
}
'''
for formatter in [TerminalFormatter, HtmlFormatter]:
    print highlight(code, CDeclLexer(), formatter()) 
```

# iphone - 如何设置 NSPredicate 来检查关系的属性？

> ID：12504761
> 
> 赞同：1
> 
> 时间：2012-09-20T00:45:13.207
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我有一个名为 的实体`Entry`，它与名为 的实体具有一对多的关系`Media`。从`Media`侧面看，关系名称是`entry`。条目有一个名为 的属性`entryID`，我想在媒体实体上创建一个 NSPredicate ，它返回所有它们的`entry`关系具有特定的`entryID`. 我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:52:18.083

假设您要获取的关系被调用`entry`并且`entryID`是某种数字类型。

```
NSNumber *desiredID = @(12345);
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"entry.entryID = %@", desiredID]; 
```

# javascript - JavaScript 中的 i++ 和 ++i 之间是否存在性能差异？

> ID：12504765
> 
> 赞同：11
> 
> 时间：2012-09-20T00:45:38.887
> 
> 标签：javascript, performance, operators, post-increment, pre-increment

我读过[C 中 i++ 和 ++i 之间是否存在性能差异？](https://stackoverflow.com/questions/24886/is-there-a-performance-difference-between-i-and-i-in-c)：

> 如果不使用结果值，i++ 和 ++i 之间是否存在性能差异？

JavaScript 的答案是什么？

例如，以下哪个更好？

1)

```
for(var i=0;i<max;i++){
    //code
} 
```

2)

```
for(var i=0;i<max;++i){
    //code
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T00:51:05.437

这是一篇关于这个主题的文章：http: [//jsperf.com/i-vs-i/2](http://jsperf.com/i-vs-i/2)

`++i`似乎*稍微*快一些（我在 Firefox 上测试过），根据这篇文章，一个原因是：

> 使用 i++，在您可以在后台增加 i 之前，必须创建 i 的新副本。使用 ++i 你不需要那个额外的副本。i++ 将在增加 i 之前返回当前值。++i 返回递增的版本 i。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-20T00:53:02.750

不，执行时间没有区别。两个代码片段的不同之处在于当 i 递增时。

```
for(i = 0; i < max; i++)
{
    console.log(i);
} 
```

第一个示例将产生结果：0,1,2,3,...,max-1

```
for(i = 0; i < max; ++i)
{
    console.log(i);
} 
```

第二个示例将产生结果：1,2,3,...,max

i++ 在操作后增加值。++i 在操作之前增加值。

除了在 ++i 上进行的迭代次数减少之外，没有任何性能差异，因为增量是在第一次操作之前完成的

# vb.net - LINQ 组重复行并删除除第一行之外的所有行

> ID：12504772
> 
> 赞同：-1
> 
> 时间：2012-09-20T00:47:52.163
> 
> 标签：vb.net, linq, datatable, duplicates

我在stackoverflow上的一个问题中找到了以下LINQ代码，我想用它来删除数据表中的重复行并留下索引最少的行，这是代码，我无法弄清楚代码添加到注释行中

```
 Dim duplicates = From row In GoogleResults.AsEnumerable()
           Let seller = row.Field(Of String)("Seller")
           Group row By seller Into DuplicateSellers = Group
           Where DuplicateSellers.Count() > 1
           Select DuplicateSellers
            For Each DuplicateSellerRows In duplicates
                For Each row In DuplicateSellerRows
                    'remove current row, but skip the first one
'row.Delete() will remove all rows but how can i keep the first one?
                Next
            Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:56:11.493

您可以使用[Skip()](http://msdn.microsoft.com/en-us/library/bb358985.aspx)跳过每组重复项中的第一行：

```
For Each DuplicateSellerRows In duplicates
    For Each row In DuplicateSellerRows.Skip(1)            
        row.Delete() 
    Next
Next 
```

# mysql - LEFT JOIN 和 IS NULL 效果

> ID：12504773
> 
> 赞同：3
> 
> 时间：2012-09-20T00:48:15.220
> 
> 标签：mysql, sql, left-join

在[http://dev.mysql.com/doc/refman/5.5/en/left-join-optimization.html](http://dev.mysql.com/doc/refman/5.5/en/left-join-optimization.html)可以阅读：

> 如果您使用 LEFT JOIN 查找某个表中不存在的行，并且您有以下测试： col_name IS NULL in the WHERE 部分，其中 col_name 是声明为 NOT NULL 的列，MySQL 停止搜索更多行（对于特定的组合键）在找到与 LEFT JOIN 条件匹配的行之后。

任何人都可以用人类可读的语言向我解释这意味着什么吗？或用新手可读的语言；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:51:58.613

只有在右表上没有匹配的行才会被返回。这可以说明为：

![在此处输入图像描述](../Images/aae8e56f6910568fafe5c8b22c1e9749.png)

如您所见，有两个表正在连接。阴影部分是 上不存在的记录`Table B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:02:36.897

左连接总是为左表中的每一行连接右表中的至少一行，即使右表中没有与连接条件匹配的行。如果发生这种情况，则右侧表中该行的列都将为空。

这意味着执行左连接然后`not null`在右侧表列中测试空值（在一列中）是测试连接表中没有对应行的行的有效习惯用法。

您引用的摘录是说 MySQL 在执行这种形式的查询时足够智能，一旦第一个表被加入，就停止从右侧表中加入更多行（因为这样做会浪费时间 -您已经明确表示您正在查找右侧表格中不匹配的行，因此一旦找到至少一个行，再查找更多行将毫无用处）。

# c++ - Ada 到 C++：传递一个无符号的 64 位值

> ID：12504774
> 
> 赞同：10
> 
> 时间：2012-09-20T00:48:32.487
> 
> 标签：c++, interface, ada

我需要将 2 条数据从 Ada 程序传递给一些 C++ 代码进行处理。

*   数据 - 双倍。
*   时间 - 无符号 64 位。

我能够使用 Long_Float（C++ 中的双精度）和 Integer（C++ 中的 int，但显然不是 64 位）在 Ada 中创建一个与我的 C++ 方法一起使用的过程。我使用了以下代码（代码不在我身上，因此语法可能略有偏差）：

```
procedure send_data (this : in hidden_ptr; data : in Long_Float; time : in Integer);
pragma import (CPP, send_data, "MyClass::sendData"); 
```

现在它正在工作，我正在尝试将时间扩展到完整的 64 位，并且理想情况下希望在 C++ 端有一个 unsigned long long 。我在 Ada 中没有看到任何匹配的类型，所以我创建了自己的类型：

```
type U64 is mod 2 ** 64; 
```

当将该类型与我的 send_data 方法一起使用时，我收到一条错误消息，指出无法将该类型映射到 C++ 类型（类似于这些行，我再次没有代码或确切的错误短语）。

有没有办法将 Ada 中的用户定义类型传递给 C++？也许在 Ada 中有另一种类型可以用作无符号 64 位值？如果这样更容易，有没有办法将我的 U64 类型的地址作为参数传递给 C++ 方法？我正在使用green hills adamulti compiler v3.5（对ada来说非常新，不确定该信息是否有帮助）。例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:57:34.010

作为@KeithThompson 的评论/答案的附录......

Ada 官方支持的 C 接口类型在[Interfaces.C](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-B-3.html)中，里面没有超长的 int 或 unsigned （在 2005 版本中。2012 版本正式了吗？）。

你做了正确的事情来解决它。如果您的编译器不支持这一点，则必须采取更严厉的措施。

首先要尝试的是通过引用传递 64 位 int。不过，这将需要在 C 端进行更改。

我知道 C/C++ TIME 结构往往是 64 位值，定义为联合结构。所以你可以做的是定义一个 Ada 记录来模仿其中一个 C 结构，确保它以 C 的方式布局（例如：使用记录表示和大小子句），然后使该对象成为你导入的例程所使用的它的参数。

之后，您将不得不使用讨厌的参数技巧。例如，您可以尝试将参数的 Ada 导入一侧更改为 64 位浮点数，将实际参数 unchecked_converting 转换为 64 位浮点数，然后尝试以这种方式传递它。问题在于，许多 CPU 的传递在与整数不同的寄存器中浮动。所以这可能行不通，如果它确实是不可移植的。

如果您弄清楚编译器的 CPP 调用约定是如何工作的，那么可能还有其他方法可以伪造它。例如，如果它使用两个相邻的 32 位寄存器来传递 64 位整数，您可以将您的 Ada 64 位整数拆分为两个，并在 Ada 端将其传递给两个参数。如果它通过引用传递 64 位值，您可以告诉 Ada 方您正在传递指向 U64 的指针。同样，这些解决方案不会是可移植的，但它们会让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-01T15:01:10.687

```
Put_Line("First = " & Interfaces.C.long'Image(Interfaces.C.long'First));
Put_Line("Last = " & Interfaces.C.long'Image(Interfaces.C.long'Last)); 
```

结果：

```
First = -9223372036854775808
Last =  9223372036854775807 
```

# c++ - C ++中的对齐malloc

> ID：12504776
> 
> 赞同：6
> 
> 时间：2012-09-20T00:48:47.090
> 
> 标签：c++, c, malloc

我对书中的问题13.9有一个问题，“破解编码面试”。问题是编写一个支持分配内存的对齐的alloc和free函数，并且在答案中给出了代码如下：

```
void *aligned_malloc(size_t required_bytes, size_t alignment) {
  void *p1;
  void **p2;
  int offset=alignment-1+sizeof（void*);
  if((p1=(void*)malloc(required_bytes+offset))==NULL)
  return NULL;
  p2=(void**)(((size_t)(p1)+offset)&~(alignment-1));  //line 5
  p2[-1]=p1; //line 6
  return p2;
} 
```

我对第 5 行和第 6 行感到很困惑。既然您已经将偏移量添加到 p1，为什么还要执行“and”？[-1] 是什么意思？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T01:28:16.217

您的示例代码不完整。它什么也不分配。很明显，您缺少设置 p1 指针的 malloc 语句。我没有这本书，但我认为完整的代码应该遵循以下原则：

```
void *aligned_malloc(size_t required_bytes, size_t alignment) {
    void *p1;
    void **p2;
    int offset=alignment-1+sizeof（void*);
    p1 = malloc(required_bytes + offset);               // the line you are missing
    p2=(void**)(((size_t)(p1)+offset)&~(alignment-1));  //line 5
    p2[-1]=p1; //line 6
    return p2;
} 
```

那么......代码有什么作用？

*   策略是分配比我们需要的空间更多的空间（到 p1 中），并在缓冲区开始之后的某处返回一个 p2 指针。
*   由于对齐是 2 的幂，因此在二进制中它必须是 1 后跟零的形式。例如，如果对齐为 32，则二进制为 00100000
*   (alignment-1) 二进制格式将 1 变为 0，并将 1 之后的所有 0 变为 1。例如：(32-1) 为 00011111
*   ~ 将反转所有位。即：11100000
*   现在，p1 是指向缓冲区的指针（请记住，缓冲区的偏移量比我们需要的要大）。我们将偏移量添加到 p1：p1+offset。
*   所以现在，(p1+offset) 大于我们想要返回的值。我们将通过按位和来消除所有无关紧要的位： (p1+offset) & ~(offset-1)
*   这是 p2，我们要返回的指针。请注意，因为它的最后 5 位数字为零，所以它按照要求是 32 对齐的。
*   p2 是我们将返回的。但是，当用户调用aligned_free 时，我们必须能够到达p1。为此，请注意我们在计算偏移量时为一个额外的指针保留了位置（即第 4 行中的 sizeof(void*)。
*   所以，我们想把 p1 放在 p2 之前。这是 p2[-1]。这是一个有点棘手的计算。请记住 p2 被定义为 void* *。一种看待它的方法是 void 数组*。C 数组计算表明 p2[0] 正好是 p2。p2[1] 是 p2 + sizeof(void*)。通常 p2[n] = p2 + n*sizeof(void*)。编译器还支持负数，因此 p2[-1] 是 p2 之前的一个 void*（通常为 4 个字节）。

我猜这aligned_free 是这样的：

```
void aligned_free( void* p ) {
    void* p1 = ((void**)p)[-1];         // get the pointer to the buffer we allocated
    free( p1 );
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T00:54:44.010

p1 是实际分配。p2 是返回的指针，它引用分配点之后的内存，并为对齐和首先存储实际分配的指针留出足够的空间。当调用aligned_free() 时，将检索p1 来执行“真正的”free()。

关于位数学，这有点麻烦，但它有效。

```
p2=(void**)(((size_t)(p1)+offset)&~(alignment-1));  //line 5 
```

请记住，p1 是实际的分配参考。对于踢，让我们假设以下内容，使用 32 位指针：

```
alignment = 64 bytes, 0x40
offset = 0x40-1+4 = 0x43
p1 = 0x20000110, a value returned from the stock malloc() 
```

重要的是`malloc()`原始请求在原始请求之上和之外分配了额外的 0x43 字节空间。这是为了确保可以考虑对齐数学*和*32 位指针的空间：

```
p2=(void**)(((size_t)(p1)+offset)&~(alignment-1));  //line 5
p2 = (0x20000110 + 0x43) &~ (0x0000003F)
p2 = 0x20000153 &~ 0x0000003F
p2 = 0x20000153 & 0xFFFFFFC0
p2 = 0x20000140 
```

p2 在 0x40 边界上对齐（即 0x3F 中的所有位都是 0），并且留下了足够的空间来存储原始分配的 4 字节指针，由 p1 引用。

自从我做对齐数学以来，它已经*永远*存在了，所以如果我把这些位搞砸了，*请*有人纠正这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T05:01:31.510

顺便说一句，这不是唯一的方法。

```
 void* align_malloc(size_t size, size_t alignment)
    {
         // sanity check for size/alignment. 
         // Make sure alignment is power of 2 (alignment&(alignment-1) ==0)

         // allocate enough buffer to accommodate alignment and metadata info
         // We want to store an offset to address where CRT reserved memory to avoid leak
        size_t total = size+alignment+sizeof(size_t);
        void* crtAlloc = malloc(total);
        crtAlloc += sizeof(size_t); // make sure we have enough buffer ahead to store metadata info
        size_t crtArithmetic = reinterprete_cast<int>(crtAlloc); // treat as int for pointer arithmetic
        void* pRet = crtAlloc + (alignment - (crtArithmetic%alignment));
        size_t *pMetadata = reinterprete_cast<size_t*>(pRet);
        pMetadata[-1] = pRet - crtArithmetic- sizeof(size_t);
        return pRet;
    } 
```

例如 size = 20, alignement = 16 and crt malloc 返回地址 10\. 并假设 sizeof(size_t) 为 4 字节

```
- total bytes to allocate = 20+16+4  = 40
- memory committed by crt = address 10 to 50
- first make space in front by adding sizeof(size_t) 4 bytes so you point at 14
- add offset to align which is 14 + (16-14%16) = 16
- move back sizeof(size_t) 4 bytes (i.e. 12) and treat that as size_t pointer and store offset 2 (=12-10) to point to crt malloc 
```

开始

同样，align_free 会将 void 指针转换为 size_t 指针，向后移动一个位置，读取存储在那里的值并调整偏移量以移动到 crt alloc 开头

```
void* align_free(void* ptr)
{
      size_t* pMetadata = reinterprete_cast<size_t*> (ptr);
      free(ptr-pMetadata[-1]);  
} 
```

优化：如果对齐大于 sizeof(size_t)，则不需要额外分配 sizeof(size_t)

# php - PHP顶级项目系统

> ID：12504778
> 
> 赞同：1
> 
> 时间：2012-09-20T00:48:49.070
> 
> 标签：php

基本上我有一个网站，每次用户点击支持按钮时，用户都会对用户发布的项目或“支持”进行投票，它会进入一个表格并存储 3 个东西，一个正常的自动增量标识符，“支持”它的 user_id 和他们支持的项目 ID。现在我们每天都想在主页上显示“热门项目”。我猜这将通过一个 php 脚本和一个 cron 作业来完成。我真的想不出如何正确查询数据库以确定 X 数量的顶级项目。（很可能是 5 或 10 个）我已经考虑了一段时间，但我想不出答案。任何想法/答案都有很大帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:59:53.250

假设，您有一个名为`votesTable`field的 SQL 数据库表`numberOfVotes`。

如果没有 cron-job 等，您可能会运行这个**MySQL-query**

```
SELECT * 
  FROM votesTable
  ORDER BY votesTable.numberOfVotes DESC
  LIMIT 10 
```

检索**前 10 名投票条目**。

这个[YouTube 视频](http://www.youtube.com/watch?v=YAfY4HeDd_Q) *PHP 教程：简单评级/投票系统 [第 01 部分]*可能会有所帮助（[教程作者的页面](http://betterphp.co.uk/tutorials.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:03:08.640

好吧，您将不得不向该数据库添加一种或另一种时间戳。所以你可以从午夜到晚上 11:59 查询一天。我会说`datetime`格式即：`YYYY-MM-DD HH:MM:SS`（24小时格式）

如果处理得当，你可以做类似的事情

```
<?php
$todayMidnight = date('Y-m-d'). ' 00:00:00';
$todayLastMin = date('Y-m-d'). ' 23:59:59';
$result = mysql_query("select * from the_table where the_Time BETWEEN $todayMidnight AND $todayLastMin LIMIT 10 order by the_count");
?> 
```

# javascript - 如何检测已到达可滚动元素的末尾？

> ID：12504779
> 
> 赞同：1
> 
> 时间：2012-09-20T00:48:55.357
> 
> 标签：javascript

我在列表中显示 10 个 wordpress 帖子标题，然后是一个“加载更多”按钮，用于加载接下来的 10 个结果。

当到达该列表的可滚动父项的末尾时，我将如何自动触发该按钮（让我们将其设为 javascript 事件）？

是否可以检测滚动条的位置，或屏幕上最后一个列表项的可见性？什么是最失败的证明方法？

谢谢你们的提示和技巧！

PS我不使用jQuery，所以不需要建议使用它的解决方案:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:58:41.967

您可以通过使用此处定义的函数`scroll`监听事件监听器来检查页面/元素向下滚动多远[https://stackoverflow.com/a/4638434/1615483](https://stackoverflow.com/a/4638434/1615483)（实际上并不依赖于 jQuery）`myElm.addEventListener('scroll',scrolled,false);`

# css - 浏览器缩放时填充丢失（Chrome）

> ID：12504785
> 
> 赞同：1
> 
> 时间：2012-09-20T00:50:13.460
> 
> 标签：css, google-chrome, cross-browser, zooming, padding

我定义了以下CSS：

```
#content {
    padding: 6px;
    margin: 0 10px;
    border-left: solid 1px #176184;
    border-bottom: solid 2px #176184;
    border-right: solid 1px #176184;
    background-color: #fff;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    -moz-border-radius-bottomleft: 5px;
} 
```

当我处于“正常”缩放级别时，一切看起来都很棒。但是，一旦我以增加的缩放重新加载，Chrome 就会放弃填充。火狐和IE都不错。我已经尝试了我能想到的一切，并且花了几个小时寻找无济于事。这非常令人沮丧，所以我将非常感谢任何提示！

# google-maps - 谷歌地图多边形 - 叠加

> ID：12504788
> 
> 赞同：3
> 
> 时间：2012-09-20T00:50:34.403
> 
> 标签：google-maps, polygons

我正在尝试在我的谷歌地图上实现“负面”叠加，类似于您在 Estately.com 上获得的效果。基本上，我已经成功地根据我收集的 KML 数据绘制了映射多边形。当有多个路径时，它们绘制得很好。

因此，对我的示例进行建模，首先我从 polygonCoords （这是一个 LatLng 对象数组的数组）围绕我的区域创建一组折线：

```
for (var d = 0 ; d < polygonCoords.length ; d++) 
{
  var b = new google.maps.Polyline( {
                                    path: polygonCoords[d],
                                    strokeWeight: 4,
                                    strokeColor: "#4F6D8F",
                                    strokeOpacity: 1,
                                    map: map
                                   });
} 
```

我有一个由以下定义的“负空间”多边形：

```
function negativeSpaceBoundary()
{
  return [new google.maps.LatLng(10, -170), 
          new google.maps.LatLng(10, -50), 
          new google.maps.LatLng(80, -50), 
          new google.maps.LatLng(80, -170), 
          new google.maps.LatLng(10, -170)]
}; 
```

所以，我将负空间多边形移到我的 polygonCoords 数组中，并尝试绘制多边形：

```
negativeSpace = new google.maps.Polygon( {
                                           path: polygonCoords,
                                           strokeWeight: 0,
                                           strokeOpacity: 1,
                                           strokeColor: "#4F6D8F",
                                           fillColor: "#000000",
                                           fillOpacity: 0.2,
                                           clickable: false,
                                           map: map
                                         }); 
```

基本上，我希望会发生的是我最初的一组折线将在负空间多边形中“打一个洞”，这样基本上没有覆盖我的城市边界。如果你去restately.com，搜索“Paradise Valley, AZ”，你可以看到效果。

我尝试了几种变体（多边形与折线，不同的填充颜色和不透明度等），但没有达到我的示例中显示的效果。

有任何想法吗？顺便说一句，使用 v3 API。

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:12:47.053

两条路径都需要在同一个多边形中。内孔路径缠绕方向需要与外路径相反。

[http://www.geocodezip.com/v3_polygon_example_donut.html](http://www.geocodezip.com/v3_polygon_example_donut.html)

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_nosidebar.html?lat=37.155939&lng=-79.497071&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/virginia_inverted_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_nosidebar.html?lat=37.155939&lng=-79.497071&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/virginia_inverted_kml.xml)

[你的多边形](http://www.geocodezip.com/v3_polygon_example_complex_hole.html)（所有的“洞”似乎都是一样的）。

# iphone - 如何从iOS中存储在文件中的数据中解码多个对象

> ID：12504796
> 
> 赞同：0
> 
> 时间：2012-09-20T00:51:48.903
> 
> 标签：iphone, ios, xcode, ios5

我有一个包含名字和姓氏以及其他一些信息的表格。我使用一个人类来存储这些信息。在提交单击时，我使用在 person 类中实现的 NSCoding 将其归档在文件 person.txt 中。如果我在文件 person.txt 中添加多个人员，我怎样才能获取文件中存储的所有人员对象。解码人员类只是给了我最后添加的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:44:02.667

如果您希望将所有人员对象序列化，那么您需要将`NSArray`存储它们的集合类或任何其他集合类作为`NSKeyedArchiver`. 例如：（假设为 ARC）

```
#import <Foundation/Foundation.h>

@interface Person:NSObject <NSCoding>
@property (nonatomic, copy) NSString *lastName;
@property (nonatomic, copy) NSString *firstName;
// etc.
@end

@implementation Person

@synthesize lastName = _lastName;
@synthesize firstName = _firstName;

- (void)encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:self.lastName forKey:@"ln"];
    [aCoder encodeObject:self.firstName forKey:@"fn"];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if( !self ) { return nil; }

    _lastName = [aDecoder decodeObjectForKey:@"ln"];
    _firstName = [aDecoder decodeObjectForKey:@"fn"];

    return self;
}

@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    Person *me = [Person new];
    me.lastName = @"Kitten";
    me.firstName = @"Mittens";

    Person *you = [Person new];
    you.lastName = @"Youe";
    you.firstName = @"JoJo";

    NSArray *people = [NSArray arrayWithObjects:me,you,nil];
    NSData *serializedData = [NSKeyedArchiver archivedDataWithRootObject:people];

    //  write your serializedData to file, etc.

    [p release];
} 
```

但是，为什么存档中的 .txt 扩展名？它只是二进制数据，对吧？

# mysql - 从表和不同的列 y 中选择 id

> ID：12504799
> 
> 赞同：2
> 
> 时间：2012-09-20T00:52:00.467
> 
> 标签：mysql, sql

我有以下sql：

```
SELECT `id` FROM `exchange` WHERE `photo` = 1 ORDER BY `id` DESC LIMIT 18 
```

我怎样才能得到不同的`location`值？

例如这样做但它返回一个错误：

```
SELECT `id`, distinct(`location`) FROM `exchange` WHERE `photo` = 1 ORDER BY `id` DESC LIMIT 18 
```

示例表：

```
id    location

1        7
2        8
3        4
4        4
5        2
6        32 
```

示例结果（当 LIMIT 5 时）：

6,5,4,2,1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:54:40.903

`DISTINCT`适用于整行，而不适用于每列的值。删除该列`ID`，您将拥有唯一的位置。

```
SELECT distinct `location`
FROM `exchange` 
WHERE `photo` = 1 
ORDER BY `id` DESC 
LIMIT 18 
```

**更新 1**

您可以使用**MAX()**之类的*AGGREGATE FUNCTION*并按它们的. 再试一次，**`ID`**

 **```
SELECT location, MAX(ID) ID
FROM exchange
GROUP BY location 
```**

# rally - ReleaseCumulativeFlowData 和 CardState

> ID：12504806
> 
> 赞同：1
> 
> 时间：2012-09-20T00:53:28.503
> 
> 标签：rally

我正在尝试对 ReleaseCumulativeFlowData 对象运行查询，如下所示：

```
((ReleaseObjectID = 12345) AND CardState="Accepted") 
```

但是，运行查询会导致以下错误消息：

```
OperationResultError
Could not read: could not read all instances of class
com.f4tech.slm.domain.reporting.ReleaseCumulativeFlowDataSet 
```

这是 Rally 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:26:35.467

WSAPI 对查询的结构非常挑剔。您必须在链式查询过滤器周围包含括号，因此您需要以下内容：

> ((ReleaseObjectID = 12345) AND (CardState = "Accepted"))

# javascript - Object.create 是否支持所谓的类方法？

> ID：12504808
> 
> 赞同：0
> 
> 时间：2012-09-20T00:53:39.100
> 
> 标签：javascript, object-create

当我使用构造函数创建对象时，例如：

```
function Person(name, age) {
  this.name = name;
  this.age = age;
 } 
```

我可以将作为函数的属性添加到构造函数，其作用类似于（静态）类方法。Object.create 似乎不支持这一点。那正确吗？Object.create 创建的所有对象的构造函数属性似乎是同一个函数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:38:51.823

你确定你是说`static`？

我的意思是，在一种更依赖于类的语言中，你可能有：

```
class Person {

    static people = 0;

    public name;
    public age;

    public Person (name, age) { this.name = name; this.age = age; Person::people += 1; }
    public sayName () { echo this.name; }

    static numPeople () { echo Person::people; }
} 
```

那你可能会说：

```
bob = new Person("Bob", 32);
bob.sayName(); // "Bob"
Person::numPeople(); // 1 
```

如果你想要`Person::numPeople();`功能，没有什么能阻止你添加`Object.create.numPeople = function () {};`

您可能想问自己的问题是“为什么？”

您是否尝试调用静态方法，例如：

```
bob.constructor.numPeople(); 
```

如果是这样，我相信有更好的解决方法。例如，扩展构造函数的原型将默认提供对静态属性/方法的访问。

```
var personObj = {
    sayName : function () { console.log(this.name); },
    sayAge : function () { console.log(this.age); }
};

var bob = Object.create(personObj, { name : "Bob", age : 32 }); 
```

这些以类似于传统继承的方式访问，但在每个对象引用*相同*的函数和值的意义上是静态的，因此如果该原型对象更改，每个构造的实例也会更改。

就个人而言，我更喜欢内联和按需进行大部分对象创建的自由。如果我需要创建多个相同格式，那么我通常会创建一个工厂，而不是创建一个构造函数或使用 Object.create。

使用工厂，即使只是一个简单的工厂，使用一层或两层闭包，您可以模拟私有属性/方法，而使用第二个闭包，您可以模拟“类范围”的私有静态。

# wpf - 如何将绑定在 DataGrid 中的实体作为按钮的 CommandParameter 传递

> ID：12504810
> 
> 赞同：1
> 
> 时间：2012-09-20T00:53:58.220
> 
> 标签：wpf, data-binding, wpfdatagrid

我有以下数据网格

```
<DataGrid>
<DataGrid.Columns>
<DataGridTextColumn Header="Registro" Binding="{Binding NumeroRegistro}"    />
<DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="*" />
<DataGridTextColumn Header="Login" Binding="{Binding Login}" Width="200" />
<DataGridTemplateColumn Width="30"  >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Name="btnEditarFisioterapeuta" CommandParameter="{Binding Id}" Click="btnEditarFisioterapeuta_Click">
                <Rectangle>
                    <Rectangle.Fill>
                        <VisualBrush Visual="{StaticResource appbar_page_edit}" />
                    </Rectangle.Fill>
                </Rectangle>
            </Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

而且，在后面的代码中，我像这样填充数据网格的项目

```
dgFisioterapeuta.ItemsSource = listOfEntities; 
```

没什么特别的。请注意，我`Id`将实体的 绑定在 中`Button`，以便在后面的代码中我可以获取它`Id`并编辑实体。我想知道，如果整体`DataGrid`绑定到实体列表，为什么不将整个实体传递为`CommandParameter`？

有没有办法做到这一点？

换句话说，我想换行

```
<Button Name="btnEditarFisioterapeuta" CommandParameter="{Binding Id}" > 
```

到这样的事情。

```
<Button Name="btnEditarFisioterapeuta" CommandParameter="{Binding The_binding_that_represents_the_entity_of_this_row}" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:59:18.423

是的，你可以这样做，这很简单：

```
<Button Name="btnEditarFisioterapeuta" CommandParameter="{Binding}"> 
```

（请注意，当您编写它时`{Binding Id}`，它是 的简写`{Binding Path=Id}`，因此要获取整个实体，您只需排除路径。）

# css - 将指南针添加到现有的 sass 项目？

> ID：12504811
> 
> 赞同：6
> 
> 时间：2012-09-20T00:54:04.723
> 
> 标签：css, sass, compass-sass

我有一个使用 vanilla 的现有项目，`SASS`我想将[Compass](http://compass-style.org/)添加到其中。我过去使用过 Compass，但只将它与`compass create`命令一起使用。

我正在寻找一种能够通过仅导入与其关联的 SCSS 文件来利用指南针功能的方法，而不必遵守它提供的结构。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T01:37:05.737

在独立项目中，您需要的只是 gem 和`config.rb`. 我将配置文件从一个项目复制/粘贴到另一个项目，然后调整插件要求和文件结构等设置。你可以使用任何你喜欢的结构，只要你在配置文件中设置它。

这是我当前项目之一的示例：

```
# Compass CSS framework config file

require 'susy'
require 'modular-scale'
require 'sassy-buttons'
require 'breakpoint'
require 'compass-css-arrow'
require 'rgbapng'
# Require any additional compass plugins here.

project_type = :stand_alone
# Set this to the root of your project when deployed:
http_path = "/"
sass_dir = "sass"
css_dir = "static/css"
images_dir = "static/images"
fonts_dir = "static/fonts"
javascripts_dir = "static/js"
line_comments = false
preferred_syntax = :scss
output_style = :expanded
relative_assets = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T21:26:11.863

根据[指南针文档](http://compass-style.org/help/documentation/command-line/)，您可以使用

```
compass init rails path/to/project [--using blueprint] 
```

# html - 双倍的

> ID：12504818
> 
> 赞同：1
> 
> 时间：2012-09-20T00:55:24.370
> 
> 标签：html

我有一些文本要同时居中在页面上，并且段落中的文本要向左调整？一点帮助？

这就是我一直在尝试的

```
 <p align="center"><div align="left>text<br>more text</p></div> 
```

显然不起作用，这只会改变一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:04:50.107

`align="center"`并`align="left"`已弃用。改用 CSS。

这是一种方法（假设您想要 2 个嵌套元素，或查看 Brad 的将单个元素居中的方法）：http: [//jsfiddle.net/EzNJQ/1/](http://jsfiddle.net/EzNJQ/1/)

```
<div id="outer">
    <p id="inner">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
    </p>
</div>​

#outer{
    width: 300px;
    margin: 0 auto; /* centers */
}
#inner {
    text-align: left;   
} 
```

更多示例：[http ://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:08:01.850

令人不安的部分（尽管 IE 总是不同）是为了使项目居中，水平边距需要设置为自动（允许浏览器实际居中内容）。所以，[话虽](http://jsfiddle.net/eS6xc/)如此：

```
p.centered {
    margin: 0px auto;
    width: 300px;
    border: 1px solid #f0f;
}

<p class="centered">This is your paragraph</p> 
```

这`width`是您的电话（为了清楚起见，我添加了一个边框），但只需将边设置`margin`为`auto`，内容将左对齐（除非另有指定`text-align`）。

# sql - 在 emacs 的 sql-mode 中，如何通过代理或网关连接到 SQL DB？

> ID：12504819
> 
> 赞同：1
> 
> 时间：2012-09-20T00:55:31.027
> 
> 标签：sql, emacs, elisp

我正在扩展到使用 emacs`sql-mode`来处理我的工作中的一些数据库。其中一些数据库不能直接从我的工作站访问 - 我需要先 ssh 到网关服务器，然后才能连接到它们（即，`mysql -h 'foo_host' -u 'foo_user' --password='double_foo' -D foo_db`在网关服务器上的终端会话中工作，但直接在我的机器上运行时不起作用）。我在 EmacsWiki 和 Customize 界面上搜索`sql-mode`了一下，但我找不到内置的方式来表示“对于与 Foo 数据库的连接，您需要使用主机 Bar 作为代理”。有没有办法告诉`sql-mode`这样做，或者我是否仅限于通过`~/.ssh/config`使用特定于 foo-db 的名称和适当的 ProxyCommand 调用创建一个条目来破解它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:56:26.357

我不认为有。但是破解 sql.el 来支持这一点应该是相当容易的（通过引入一个新的连接参数“sql-remote”）。与此同时，您必须以某种方式手动切换到网关的“目录”，例如

```
M-x cd /ssh:gateway.com: RET 
```

或来自 lisp

```
(let ((default-directory "/ssh:gateway.com:"))
  (sql-connect "ssh-hop-connection")) 
```

# php - PHP 代码在 Chrome 而不是 Firefox 中工作

> ID：12504821
> 
> 赞同：-1
> 
> 时间：2012-09-20T00:55:58.787
> 
> 标签：php, redirect, location

```
$redirect = $_GET["a"];

if(isset($redirect))
{
    $get302 = mysql_fetch_assoc(mysql_query("SELECT url, redirect from urls where redirect = '" . $redirect . "'"));
    header("Location: " . $get302["url"]);
    exit();
} 
```

据我所知，这段代码在逻辑上工作得很好。（确保不会有任何循环，所以我放了一个 isset()。但由于某种原因，firefox 不喜欢它，我不确定如何更多地编辑代码以使其工作。

编辑：我还应该注意，代码在 Google Chrome 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:02:00.000

您应该查看[这篇 SO 文章](https://stackoverflow.com/questions/5418096/php-redirect-not-working-in-ie-firefox-after-form)。

那里的讨论建议您`exit;`在发出标头重定向后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:07:24.503

Firefox 更紧密地遵循网络标准，我猜你有一个相对的 uri，你传递给重定向，不允许。

# iphone - UIView 动画在模拟器中很好，在设备上不稳定

> ID：12504823
> 
> 赞同：1
> 
> 时间：2012-09-20T00:56:12.627
> 
> 标签：iphone, ios, animation, uiview

我的应用程序中有三个 UIView 动画。一个用于在视图中移动（类似于 modalViewController 演示文稿的外观），另一个用于将其移出，第三个用于设置 UIImageView 的框架。在模拟器上，它看起来很棒；平滑清晰。但是，在实际设备（iPhone 4）上，它非常不稳定，有时根本没有动画。在我的 iPad 2 上，它看起来好一点，但不是它应该在的地方。任何线索有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:20:02.613

明白了 - 供将来参考，iOS 不擅长编程投影...如果您使用的是矩形视图，您可以使用 "View.layer.shadowPath = [UIBezierPath bezierPathWithRect:View.bounds].CGPath; "

# xml - 使用提供的 xsd 文件进行 XML 验证

> ID：12504827
> 
> 赞同：0
> 
> 时间：2012-09-20T00:57:26.560
> 
> 标签：xml, c#-4.0, xsd

这不是一个特定的编程问题，而是要求知道做某事的正确方法。

“The Something”：我的代码执行用户提供的将 XML 作为标准输出的 powershell 脚本。该输出应该遵循我们作为软件设置例程的一部分发布和交付的模式。我们支持输出中的版本，因此客户的 XML 将在其 XML 的根目录中针对版本 2 输出具有类似的内容：

```
<my_report version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mycompany.com/permanent/config-2.0.xsd config-2.0.xsd"> 
```

客户输出的 XML 可能不是有效的 XML（因此在我们使用它之前需要进行验证）。

我的目标是获取版本属性的值并确保它与提供的正确 .xsd 文件名匹配，然后使用该 .xsd 文件来验证输出 XML。

由于输出 XML 可能无效，因此我不能依赖 XElement.Parse() 之类的东西将 XML 放入变量中以对其进行操作。所以，我觉得我唯一的办法是解析第一个元素（my_report）并使用字符串操作来进行确定。

注意：运行代码的机器不保证可以访问互联网。

我的基本问题：这是理智的想法吗？我是否愿意做这样的事情？如果思维不健全，有什么好的选择？

平台是 Windows Server 2008 R2，C# 4.0 控制台应用程序类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:08:09.363

通常，对于 Xml 文档的版本控制，您使用命名空间。在这种方法中，每个版本都有自己的命名空间和自己的 Xsd。要验证 Xml 文档，您需要将所有 Xsd 文档加载到一个模式集并验证 xml。这远非理想（增加了很多复杂性，即使文档只是不同的版本，它们在语义上是完全不相关的，而通常是在以前版本之上构建的新版本等），但我认为这仍然是最常见的事情。如果您只是对已经使用没有命名空间的 xml 文档进行版本控制的现有系统进行改造验证，那么使用上述方法将意味着您的应用程序中会有很多变化（更不用说发送 xml 文件的客户所做的更改）。要发现版本，您可以首先使用 XmlReader - 您将移动到根元素并检查名称是否符合您的预期以及版本属性（或者只是版本，因为您的架构应该拒绝具有意外根元素的文档）。然后，您将抛出您创建的 XmlReader 实例并创建一个新实例以进行验证（并可能加载文档）。这应该很便宜，因为您实际上并没有阅读整个文档来发现版本，而只是发现了根元素，并且如果文档不是有效的 Xml 文档（例如没有根节点等），XmlReader 将检测到并且扔。然后，您将抛出您创建的 XmlReader 实例并创建一个新实例以进行验证（并可能加载文档）。这应该很便宜，因为您实际上并没有阅读整个文档来发现版本，而只是发现了根元素，并且如果文档不是有效的 Xml 文档（例如没有根节点等），XmlReader 将检测到并且扔。然后，您将抛出您创建的 XmlReader 实例并创建一个新实例以进行验证（并可能加载文档）。这应该很便宜，因为您实际上并没有阅读整个文档来发现版本，而只是发现了根元素，并且如果文档不是有效的 Xml 文档（例如没有根节点等），XmlReader 将检测到并且扔。

# html - JQuery 可滚动文本隐藏

> ID：12504829
> 
> 赞同：1
> 
> 时间：2012-09-20T00:57:38.273
> 
> 标签：html, jquery-plugins, scroll

我正在使用[这个](http://www.class.pm/files/jquery/uscrollbar/demo/#)插件，我设法让它工作。但问题是我希望文本正文在用户单击某个选项之前不可见。但由于某种原因，它始终可见。这是我的html：

```
<div id="Hotel" class="Information" style="display:none">
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
<p>ljasdlaskdfjlkasjdflkajsdflkjaskldf</p>
</div> 
```

这是我的 JQuery 代码：

```
$(document).ready(function(e) {
    $('.Information').uscrollbar();
    $("ul.navigation").click(function(e) {
        $sel = $(this).val();
        if($sel==1)
            $('#Hotel').show();
    });
}); 
```

谁能告诉我为什么它是可见的，即使我将它设置为不可见？

还有一件事，我如何设置插件的各种选项，如自动隐藏？我试过这个：

```
$('.Information').uscrollbar({
    autoHide: true,
}); 
```

但这似乎不起作用，有什么想法吗？谢谢

# oracle - 突出显示两个字符串之间的差异

> ID：12504832
> 
> 赞同：6
> 
> 时间：2012-09-20T00:58:26.150
> 
> 标签：oracle, plsql, string-comparison, oracle11gr2

如果我有两个较长的字符串，VARCHAR2s，是否有一个简单的方法或算法可以复制或移植到 PL/SQL 来比较它们，插入标记（即，当在网页中呈现时，差异将被突出显示）。

例如：

```
BEGIN
  DBMS_OUTPUT.put_line(
    markup_differences
         (in_old     => 'Hello world, this is your captain speaking.'
         ,in_new     => 'Hello WORLD, this is not your captain.'
         ,in_preins  => '<ins>'
         ,in_postins => '</ins>'
         ,in_predel  => '<del>'
         ,in_postdel => '</del>'
         ));
END; 
```

预期输出：

```
Hello <del>world</del><ins>WORLD</ins>, this is <ins>not</ins> your captain
<del>speaking</del>. 
```

请注意，这表明“world”已更改为“WORLD”，“not”被插入，“speaking”被删除。

背景：我的目的是比较两个最相似的 HTML 片段，并用高亮标记它们以在浏览器中显示。性能将不是优先事项。这是一个一次性应用程序，所以我不追求完美的解决方案。即使有什么让我成为其中的一部分，总比没有好-而且我还没有向客户承诺任何事情:)

或者，我可以很容易地在我的 Apex 应用程序中加入一个简单的 Javascript 解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:18:01.183

John Resigs 博客上有一个非常简单的 js-diff 算法：http: [//ejohn.org/projects/javascript-diff-algorithm/](http://ejohn.org/projects/javascript-diff-algorithm/)

也许这有帮助。

# html - HTML5 应用程序缓存：清单已更新，但文件又从应用程序缓存中获取了一次

> ID：12504834
> 
> 赞同：8
> 
> 时间：2012-09-20T00:58:44.580
> 
> 标签：html, cache-manifest, offlineapps

我有一个带有注释的缓存清单

```
# Version 3.2 
```

为了更新所有应用程序，我只需更改版本号。它有效，但是：

当我更新清单时，所有内容都会正确更新（新缓存已填充），但实际文件会从（旧）缓存中多花一次时间。当我重新加载两次时，一切都会更新。这种行为正确吗？使用铬 21。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T05:01:49.527

是的，这是当前的“正确”行为。这就是发生的事情：

当您刚刚对清单文件进行更改并刷新浏览器时，会发生这种情况（假设您在线）

*   浏览器首先加载回缓存中的所有文件
*   然后浏览器在线检查您的清单文件
*   它检测到清单文件已更改，然后将继续下载新文件
*   但是，请记住，此时，您仍然会查看“旧文件”，因为浏览器在上线下载“新文件”之前已经加载了旧文件
*   如果此时，如果您再次点击刷新（第二次），您应该获得“新文件”

这是目前的标准行为。有些人放了一些事件处理程序来提示用户进行另一次刷新（第一次刷新后）

就个人而言，我认为浏览器应该负责提醒用户在完成下载新文件后再次刷新，但现在，大多数人都会从“window.applicationCache”中放入事件处理程序来触发事件来帮助管理这一点。

要查看使用 window.applicationCache 的示例，请访问此处：[http ://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

它在“更新缓存”部分下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T14:31:21.210

可以按[此处](https://developer.apple.com/library/iad/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/OfflineApplicationCache/OfflineApplicationCache.html#//apple_ref/doc/uid/TP40007256-CH7-SW5)所述立即交换缓存：

```
function updateSite(event) {
    window.applicationCache.swapCache();
}
window.applicationCache.addEventListener('updateready', updateSite, false); 
```

# verilog - 始终块中的 Verilog 生成/genvar

> ID：12504837
> 
> 赞同：23
> 
> 时间：2012-09-20T00:59:23.637
> 
> 标签：verilog

我试图让一个模块通过 ISE 12.4 中的语法检查，它给了我一个我不明白的错误。首先是代码片段：

```
parameter ROWBITS = 4;

reg [ROWBITS-1:0] temp;

genvar c;
generate
    always @(posedge sysclk) begin
        for (c = 0; c < ROWBITS; c = c + 1) begin: test
            temp[c] <= 1'b0;
        end
    end
endgenerate 
```

当我尝试语法检查时，我收到以下错误消息：

> 错误：HDLCompiler:731 - “test.v” 第 46 行：不允许对非寄存器 <c> 进行程序分配。

我真的不明白它为什么抱怨。“c”不是电线，而是genvar。这应该等同于完全合法的语法：

```
reg [3:0] temp;

always @(posedge sysclk) begin
    temp[0] <= 1'b0;
    temp[1] <= 1'b0;
    temp[2] <= 1'b0;
    temp[3] <= 1'b0;
end 
```

请不要评论如果没有生成会更容易编写它。这是一段更复杂的代码的简化示例，其中涉及多个 if 和对“temp”的非阻塞分配。另外，不要只告诉我有更新版本的 ISE，我已经知道了。OTOH，如果您*知道*它已在更高版本的 ISE 中修复，请告诉我您知道哪个版本有效。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-20T01:15:51.940

您需要反转生成块内的嵌套：

```
genvar c;
generate
    for (c = 0; c < ROWBITS; c = c + 1) begin: test
        always @(posedge sysclk) begin
            temp[c] <= 1'b0;
        end
    end
endgenerate 
```

从技术上讲，这会生成四个 always 块：

```
always @(posedge sysclk) temp[0] <= 1'b0;
always @(posedge sysclk) temp[1] <= 1'b0;
always @(posedge sysclk) temp[2] <= 1'b0;
always @(posedge sysclk) temp[3] <= 1'b0; 
```

在这个简单的例子中，四个 always 块和一个包含四个赋值的 always 块之间的行为没有区别，但在其他情况下可能会有。

在构建设计的内存表示（在模拟器的情况下）或映射到逻辑门（在综合工具的情况下）时，需要解决依赖于 genvar 的操作。在设计运行之前，`always @posedge`它没有意义。

受限于某些限制，您可以在 always 块内放置一个 for 循环，即使是可合成的代码也是如此。对于综合，循环将被展开。但是，在这种情况下，for 循环需要与 a `reg`、`integer`或类似内容一起使用。它不能使用 a `genvar`，因为在 always 块中使用 for 循环描述了在时钟的每个边沿发生的操作，而不是可以在设计的详细说明期间静态扩展的操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-02T00:12:21.930

`temp`如果您希望在同一个始终块中分配的所有位，则不需要生成块。

```
parameter ROWBITS = 4;
reg [ROWBITS-1:0] temp;
always @(posedge sysclk) begin
    for (integer c=0; c<ROWBITS; c=c+1) begin: test
        temp[c] <= 1'b0;
    end
end 
```

或者，如果您的模拟器支持 IEEE 1800 (SytemVerilog)，那么

```
parameter ROWBITS = 4;
reg [ROWBITS-1:0] temp;
always @(posedge sysclk) begin
        temp <= '0; // fill with 0
    end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T14:55:22.023

如果您不介意必须编译/生成文件，那么您可以使用预处理技术。这为您提供了生成的功能，但会生成一个干净的 Verilog 文件，该文件通常更易于调试并导致更少的模拟器问题。

我使用[RubyIt](http://morganp.github.com/RubyIt/)从使用 ERB（嵌入式 Ruby）的模板生成 verilog 文件。

```
parameter ROWBITS = <%= ROWBITS %> ;
always @(posedge sysclk) begin
  <% (0...ROWBITS).each do |addr| -%>
    temp[<%= addr %>] <= 1'b0;
  <% end -%>
end 
```

生成 module_name.v 文件：

```
$ ruby_it --parameter ROWBITS=4 --outpath ./ --file ./module_name.rv 
```

生成的module_name.v

```
parameter ROWBITS = 4 ;
always @(posedge sysclk) begin
  temp[0] <= 1'b0;
  temp[1] <= 1'b0;
  temp[2] <= 1'b0;
  temp[3] <= 1'b0;
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T05:42:20.077

在一个模块中，Verilog 本质上包含两个结构：项目和语句。语句总是出现在过程上下文中，包括介于 begin..end、函数、任务、always 块和初始块之间的任何内容。诸如生成构造之类的项目直接在模块中列出。For 循环和大多数变量/常量声明可以存在于这两种上下文中。

在您的代码中，您似乎希望将 for 循环评估为生成项，但该循环实际上是 always 块的过程上下文的一部分。对于要被视为生成循环的 for 循环，它必须位于模块上下文中。generate..endgenerate 关键字完全是可选的（某些工具需要它们）并且没有效果。有关如何评估生成循环的示例，请参[见此答案。](https://stackoverflow.com/questions/9561762/incrementing-multiple-genvars-in-verilog-generate-statement/9574368#9574368)

```
//Compiler sees this
parameter ROWBITS = 4;
reg [ROWBITS-1:0] temp;
genvar c;

    always @(posedge sysclk) //Procedural context starts here
    begin
        for (c = 0; c < ROWBITS; c = c + 1) begin: test
            temp[c] <= 1'b0; //Still a genvar
        end
    end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-12T10:37:54.420

对于verilog 就做

```
parameter ROWBITS = 4;
reg [ROWBITS-1:0] temp;
always @(posedge sysclk) begin
  temp <= {ROWBITS{1'b0}}; // fill with 0
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-30T19:21:28.037

简而言之，您不要`generate`在 always 进程中使用，而是使用 generate 来创建参数化进程或实例化特定模块，您可以在其中组合`if-else`或`case`. 所以你可以移动这个生成并创建一个特定的进程或实例，例如，

```
module #(
parameter XLEN = 64,
parameter USEIP = 0
)
(
 input clk,
input rstn,
input [XLEN-1:0] opA,
input [XLEN-1:0] opB,
input [XLEN-1:0] opR,
input en
);

generate 
case(USEIP)
0:begin
always @(posedge clk or negedge rstn)
begin
if(!rstn)
begin
 opR <= '{default:0};
end
else
begin
if(en)
 opR <= opA+opB;
else
opR <= '{default:0};
end
end
end
1:begin
  superAdder #(.XLEN(XLEN)) _adder(.clk(clk),.rstm(rstn), .opA(opA), .opB(opB), .opR(opR), .en(en));
end
endcase

endmodule 
```

# objective-c - 无法将 UIDocument 添加到数组中

> ID：12504844
> 
> 赞同：1
> 
> 时间：2012-09-20T01:00:39.333
> 
> 标签：objective-c, ios, cocoa-touch, icloud, uidocument

如果我尝试将打开的 UIDocument 添加到数组中，我什么也得不到。这可能是它应该如何工作，我不确定。

```
- (void)loadDocAtURL:(NSURL *)fileURL withClassName:(NSString *)className {

    id doc = [[NSClassFromString(className) alloc] initWithFileURL:fileURL];

    [doc openWithCompletionHandler:^(BOOL success) {

        if (!success) {
            NSLog(@"Failed to open %@", fileURL);
            return;
        }

        NSLog(@"I'm a doc. My class is %@, my title is %@", NSStringFromClass([doc class]), [doc title]);

        dispatch_async(dispatch_get_main_queue(), ^{
        //[self addOrUpdateEntryWithURL:fileURL metadata:metadata state:state version:version];
        [_tableList addObject:doc];
        [self.tableView reloadData];
        NSLog(@"%d", _tableList.count);
        });

    }];

}; 
```

NSLog 返回：我是一名医生。我的课是歌曲，我的标题是一首新歌

到现在为止还挺好。

[self.tableView reloadData]，正确重新加载表格并显示正确数量的单元格，只有它们是空的，这就是为什么：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Song *theSong = [tableList objectAtIndex:indexPath.row];
    NSLog(@"I am a %@", NSStringFromClass([theSong class]));
    UILabel *titleLabel = (UILabel *)[cell viewWithTag:0];
    UILabel *lyricLabel = (UILabel *)[cell viewWithTag:1];
    NSLog(@"I'm in the table view. My title is %@", [theSong lyric]);
    titleLabel.text = theSong.title;
    lyricLabel.text = theSong.lyric;
    [theSong closeWithCompletionHandler:^(BOOL success) {

        // Check status
        if (!success) {
            NSLog(@"Failed to close %@", theSong.fileURL);
            // Continue anyway...
        }

        }];
    return cell;
} 
```

这两个 NSLogs 输出：我是（null）并且我在表视图中。我的标题是（空）

当我断点并查看抓取后的歌曲时，它完全是空的。

这使我认为您无法打开 UIDocument，将其粘贴在数组中并将其拉出数组。我对么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:07:25.207

如果这首歌是 nil，那么几乎可以肯定数组是 nil。我注意到您将其称为 as`_tableList`和 as `tableList`。我的猜测是那些不是同一个指针。

尝试在 cellForRowAtIndexPath 中使用 _tableList。记录它以确认它不是零。

您可以通过在添加后立即记录 [_tableList lastObject] 来反驳您关于数组的理论。

# shell - 向帐户创建脚本添加检查

> ID：12504846
> 
> 赞同：1
> 
> 时间：2012-09-20T01:01:12.333
> 
> 标签：shell

我继承了以下脚本来在 OSX 中创建帐户。

我想在其中包含一个检查，首先检查目标上是否已经存在具有该名称的帐户，如果是，则回显消息“帐户存在”，然后不采取任何其他操作，然后继续。

典型的 /tmp/list.txt 仅包含短名称，即：

```
jdoe
brianx
peterm
smithd 
```

非常感谢您的帮助！

```
#! /bin/sh

if [ $# -ne 1 ]
then
        echo mkhdir: Did not find required argument: group name
        echo Usage: mkhdir \[group\]
        exit 1
fi

for i in  `cat /tmp/list.txt` ; do
if [ ! -r /Volumes/UserStorage/Users/$i ]
   then
      mkdir /Volumes/UserStorage/Users/$i
      mkdir /Volumes/UserStorage/Users/$i/Backups
fi
chown -R $i:$1 /Volumes/UserStorage/Users/$i
chmod -R 700 /Volumes/UserStorage/Users/$i
find /Volumes/UserStorage/Users/$i -type d -exec chmod 701 {} \;
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:06:10.770

@shellter 谢谢！我在回声线中添加了一个右引号，效果很好！

完成的脚本片段：

```
for i in  `cat /tmp/list.txt` ; do
    if [ ! -d /Volumes/UserStorage/Users/$i ] ; then
         mkdir /Volumes/UserStorage/Users/$i
    else 
       echo "/Volumes/UserStorage/Users/$i already exists" >&2
    fi
    if [ ! -d /Volumes/UserStorage/Users/$i/Backups ] ; then
        mkdir /Volumes/UserStorage/Users/$i/Backups
    else
        echo "/Volumes/UserStorage/Users/$i/Backups already exists" >&2
    fi
    chown -R $i:$1 /Volumes/UserStorage/Users/$i
    chmod -R 700 /Volumes/UserStorage/Users/$i
    find /Volumes/UserStorage/Users/$i -type d -exec chmod 701 {} \;
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:58:41.837

测试`[ ! -r ... ]`不会告诉您 /Volumes/UserStorage/Users/$i 是否是目录。采用

```
for i in  `cat /tmp/list.txt` ; do
    if [ ! -d /Volumes/UserStorage/Users/$i ] ; then
         mkdir /Volumes/UserStorage/Users/$i
    else 
       echo "/Volumes/UserStorage/Users/$i already exists" >&2
    fi
    if [ ! -d /Volumes/UserStorage/Users/$i/Backups ] ; then
        mkdir /Volumes/UserStorage/Users/$i/Backups
    else
        echo "/Volumes/UserStorage/Users/$i/Backups already exists" >&2
    fi
    chown -R $i:$1 /Volumes/UserStorage/Users/$i
    chmod -R 700 /Volumes/UserStorage/Users/$i
    find /Volumes/UserStorage/Users/$i -type d -exec chmod 701 {} \;
done 
```

`701`谁知道`701`决赛的目的是什么`find ... chmod`？

IHTH

# c# - Mono 的语法高亮控制？

> ID：12504850
> 
> 赞同：4
> 
> 时间：2012-09-20T01:01:34.980
> 
> 标签：c#, mono, scintilla

我似乎找不到任何用于 Mono 的语法高亮小部件/控件。我知道 GtkSourceView 有一个 Mono 版本，但我实际上无法在任何地方找到它。

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:08:40.137

我最喜欢的代码编辑器控件是[Scintilla](http://scintilla.org)。它具有对 windows、gtk 和 cocoa 的原生支持。

[ScintillaNET](http://scintillanet.codeplex.com/)提供了一个出色的 .net 包装器，尽管我不知道它对 gtk 的支持程度如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:11:08.030

你看过 MonoDevelop 编辑器吗？

[https://github.com/mono/monodevelop/tree/master/main/src/core/Mono.Texteditor](https://github.com/mono/monodevelop/tree/master/main/src/core/Mono.Texteditor)

# wso2 - ESB 4.0.3 中的 WSO2 数据服务功能在返回的 XML 中放置了错误的默认值

> ID：12504854
> 
> 赞同：0
> 
> 时间：2012-09-20T01:02:21.117
> 
> 标签：wso2, wso2esb, wso2carbon

我在带有 Java 6.0 的 MAC OS X 10.7.4 上使用 WSO2 4.0.3

我在 ESB 中安装了数据服务功能。典型的问题是 DB 列类型为整数且 DB 中值为 null 的 XML 元素的输出值。当整数数据类型的 DB 值为空时，WSO2 数据服务将默认值设置为 0。

例如，如果我有一个表，其列名为“客户编号”，类型为整数，并且 DB 中的值为 null，则数据服务返回的 XML 元素为 0<\CUSTOMER_NUMBER>。如果该列的 DB 值为 null，我期望返回空元素。

如果我可以设置数据服务类型的任何配置，您能否告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:46:27.503

没有外部配置。这实际上是一个问题，如果 DB 中存在 null，则已修复以设置该类型的默认值。默认情况下分配 int '0'。

这是报告的[JIRA](https://wso2.org/jira/browse/CARBON-13024)

# javascript - 使用 ajax 加载成对的 html & js 文件并保持顺序

> ID：12504855
> 
> 赞同：0
> 
> 时间：2012-09-20T01:02:25.863
> 
> 标签：javascript, jquery, javascript-events

我有一个使用 ajax 加载页面部分的页面。每个部分都由一个 html 文件和一个 javascript 文件组成，该文件只为那部分 html 定义事件。

我想做的是想出一种管理文件加载的方法，该方法可以将两个文件绑定在一起。

这是我现在如何尝试使其工作的伪代码，但我不知道是否有更有条理的方式。

伪代码：（使用jquery）

1.  循环浏览需要加载的 html/js 文件对列表。
2.  将一个对象添加到唯一标识这对文件的数组中。该对象最终将保存 html 和 js 对象的容器
3.  开始加载html。当html返回时，将内容追加到页面中，并将id记录在数组对象中
    *   这很容易，因为我直接使用 jquery get 回调的内容。
4.  开始加载js。当文件加载时，js 执行并使用对文件返回值的引用更新数组中的对象。
    *   *这是最难的部分。jQuery.getScript() 完成后会自动执行脚本，所以我不能使用返回值，因为它已经创建了。因为我不能使用 ajax 响应，所以我必须让 js 文件知道它将自己添加到的对象

所以，我希望有一些 js lib 已经可用，可以在 html 和 js 对之间进行一些数据绑定。

另外，我不确定如何构建对象管理器。js 文件中的每个对象都将具有相同的事件绑定，当您移动到该部分时会调用这些事件。

抱歉，这是一个加载的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:06:34.997

我认为我的 AJAX 库可能会有所帮助：

[http://depressedpress.com/javascript-extensions/dp_ajax/](http://depressedpress.com/javascript-extensions/dp_ajax/)

最有用的功能之一是能够定义具有多个“调用”（单个 HTTP 调用）的单个“请求”（触发单个处理程序）。因此，您可以定义一个请求以同时包含对脚本的调用和对 HTML 的第二次调用。当两个调用都完成时，定义的处理程序将被调用并以正确的顺序将结果传递给它。

用于处理请求的请求池可以使用多个背景对象（允许多线程）进行实例化，这样当请求在调用处理程序之前获取所有数据时，它们不会被迫通过单线程浪费时间（尽管您可以这样做如果您愿意，也可以这样做）。

这是一个如何使用它的简单示例：

```
 // The handler function
function AddUp(Nums) { alert(Nums[1] + Nums[2] + Nums[3]) };

    // Create the pool
myPool = DP_AJAX.createPool();

    // Create the request
myRequest = DP_AJAX.createRequest(AddUp);

    // Add the calls to the request
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [5,10]);
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [4,6]);
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [7,13]);

    // Add the request to the pool
myPool.addRequest(myRequest); 
```

“myRequest”定义了处理程序。addCall() 方法添加多个调用。一旦所有三个结果都将作为三个响应的数组发送到处理程序（与添加调用的顺序相同）。

您可以成对调用您的文件，甚至可以将它们全部捆绑到一个请求中 - 由您决定。

希望这可以帮助！

# lisp - 选择折线时 Autocad 错误“错误：错误的争论类型：lselsetp nil”

> ID：12504861
> 
> 赞同：1
> 
> 时间：2012-09-20T01:03:31.593
> 
> 标签：lisp, block, autocad, polyline

我目前正在尝试在沿另一条折线运行的两个块（first_block，second_block）之间运行一条折线，在操作结束时调用一个插入函数，该函数使用开始和结束块的详细信息填充注释块（cable_name_tag） .

该多段线将横切其他块，并且通常需要与底层多段线（cable_ducting）平行运行，因此用户需要选择多段线的适当部分来放置注释，因为空间有时是有限的。

我已经注意到，如果我注释掉 second_block 并提供一个硬编码值，那么 ssget 函数可以正常工作，所以我有理由确定问题出在该代码中 first_block 和 second_block 的语法或处理上。

```
(defun c:cable ()
  (vl-load-com)
  (setvar "clayer" "cable layer")
  (setvar "celtype" "bylayer")
  (setvar "osmode" 515)
  (command "_.pline"
           (getpoint))
  (while (> (getvar ' cmdactive) 0)
    (command pause)
    (princ "\npress enter to finish:"))
  (setq elst
        (entsel "\nselect cable segment: "))
  (setq ename
        (car elst))
  (setq pt
        (cadr elst))
  (setq annopt pt)
  (setq pt
        (vlax-curve-getclosestpointto ename pt))
  (setq param
        (vlax-curve-getparamatpoint ename pt))
  (setq preparam
        (fix param))
  (setq postparam
        (1+ preparam))
  (list (setq pt1
              (vlax-curve-getpointatparam ename preparam))
        (setq pt2
              (vlax-curve-getpointatparam ename postparam)))
  (setq cable
        (entlast))
  (setq cable_start
        (vlax-curve-getstartparam cable))
  (setq cable_start_point
        (vlax-curve-getstartpoint cable))
  (setq cable_end_point
        (vlax-curve-getendpoint cable))
  (setq cable_end
        (angtos (angle '(0 0)
                       (vlax-curve-getfirstderiv cable 0.0))))
  (setq first_block
        (ssget "_c" cable_start_point cable_end_point
               (list (cons 0 "insert")
                     (cons 2 "first_block"))))
  (setq second_block
        (ssget "_c" cable_start_point cable_end_point
               (list (cons 0 "insert")
                     (cons 2 "second_block"))))
  (setq end_cable
        (ssname second_block 0))
  (setq start_cable
        (ssname first_block 0))
  (setq $end_cable
        (vla-get-textstring
         (cadr (vlax-safearray->list
                (variant-value
                 (vla-getattributes
                  (vlax-ename->vla-object end_cable)))))))
  (setq $start_cable
        (vla-get-textstring
         (cadr (vlax-safearray->list
                (variant-value
                 (vla-getattributes
                  (vlax-ename->vla-object start_cable)))))))
  (setq cable_name
        (vlax-curve-getendparam cable))
  (command ; insert cable param
           "-insert"
           "cable_name_tag"
           annopt
           "1"
           "1"
           cable_angle
           cable_name
           $start_cable
           $end_cable
           "144"
           cable_length)) 
```

我被困在这个角落里，如果有人能提供任何帮助、建议或指示，我将不胜感激。

谢谢大家的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:35:43.980

为什么不直接使用`(entlast)`来获取刚刚创建的实体？

# node.js - MongoDb 和 Nodejs 服务器响应

> ID：12504862
> 
> 赞同：-1
> 
> 时间：2012-09-20T01:03:32.920
> 
> 标签：node.js, mongodb, coffeescript, mongoose, restify

在我的 javascript 类中，我有一个函数可以返回这样的列表，

```
//ProjectClass.js
getProjectList: () =>
    @Project.find (err, projects) =>
        console.log(projects)
        return projects 
```

但是，每当我尝试从 nodejs 发送服务器响应时

```
//App.js
project = new projectSchema.Project()
res.send(project.getProjectList()) 
```

我得到以下回复

```
{
    "options": {
        "populate": {}
    },
    "_conditions": {},
    "_updateArg": {},
    "op": "find"
} 
```

具有讽刺意味的是，如果我将 res 对象传递给我的 getProjectList 并从我的 getProjectList 函数发送服务器响应，那么一切正常。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:30:26.930

`@Project.find`是一个异步函数，一旦`find`结果可用，就会调用您的匿名回调。 `getProjectList`返回在该函数中执行的最后一个同步语句的结果，即 的返回值`@Project.find`。这不是`projects`您的回调返回的数组，而是您在响应中看到的查询对象。

# assembly - 构建 YASM/NASM Hello World 时遇到问题

> ID：12504868
> 
> 赞同：0
> 
> 时间：2012-09-20T01:04:23.183
> 
> 标签：assembly, nasm, yasm

我正在尝试将[hello.asm](https://github.com/mcandre/mcandre/tree/master/nasm/hello)构建到 Windows 可执行文件中，但是当我使用建议的命令来组装、链接和编译代码时，我得到了错误。无论我使用的是[Strawberry Perl](http://strawberryperl.com/)的 GCC 还是[MinGW](http://www.mingw.org/)的 GCC，都会对相同的 YASM/NASM 代码给出错误。

这是痕迹。要么我在 Makefile 或 .ASM 中做错了，要么链接过程有问题。无论哪种方式，我都希望有人帮助我解决错误。

无论我使用 nasm 还是 yasm 来组装目标文件，我都会得到相同的结果。

草莓 Perl GCC 跟踪：

```
C:\> make
nasm -f win32 -l hello.lst hello.asm
gcc -o hello hello.o
ld: cannot find crt1.o: No such file or directory
ld: cannot find -lmingw32
ld: cannot find -lgcc
ld: cannot find -lmoldname
ld: cannot find -lcrtdll
ld: cannot find -luser32
ld: cannot find -lkernel32
ld: cannot find -ladvapi32
ld: cannot find -lshell32
ld: cannot find -lmingw32
ld: cannot find -lgcc
ld: cannot find -lmoldname
ld: cannot find -lcrtdll
make: *** [hello] Error 1 
```

MinGW GCC 跟踪：

```
$ make
gcc -o hello hello.o
c:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../libmingw32.a(main.o):main.c:(.text+0x104): undefined reference to `WinMain@16'
collect2: ld returned 1 exit status
make: *** [hello] Error 1 
```

眼镜：

*   雅思 1.2.0
*   NASM 2.10.05
*   草莓 Perl gcc 4.4.3
*   MinGW gcc 4.5.2
*   草莓 Perl 5.12
*   MinGW 0.1
*   Windows 7 专业版 x64
*   MacBook Pro 2009

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:59:28.620

`main()`用这样的标签替换你的函数`_WinMain@16`：

### 主程序

```
 section .text
    extern  _foo

;--------------------------------------------------
; main()
; 在 Win32 環境下, _WinMain@16 為程式進入點
;--------------------------------------------------

    global  _WinMain@16
_WinMain@16:
    ; foo(2,3)
    ; 呼叫時, 參數為堆疊順序 (先進後出)
    push    DWORD 3     ; b=3
    push    DWORD 2     ; a=2
    call    _foo

    ; 堆疊復原
    pop     eax
    pop     eax
    ret 
```

### foo.c

```
 #include <stdio.h>

    void foo(int a, int b) {
         printf("%d + %d = %d\n", a, b, a+b);
    } 
```

### 生成文件

```
all:
    rm -f *.o
    gcc -c foo.c
    nasm -f win32 -o main.o main.asm
    gcc -o main.exe main.o foo.o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:44:03.833

分几个部分的解决方案：

1.  发生了一件奇怪的事情：当我手动键入`gcc ...`构建可执行文件时，我得到的链接错误很少。但是当我`make`以前运行完全相同的命令时，我得到了各种链接错误。事实证明，Free Pascal 的 make.exe 隐藏了正确的 make.exe。您可以通过提升 PATH 中的正确目录或卸载有问题的应用程序来解决此问题。我对 Pascal 没有太多用处，所以我卸载了它，突然 gcc 开始工作得更好了。

2.  Windows NASM/YASM 程序集需要在函数名称前加上下划线 ( `_`)。为了保持汇编代码多平台，在代码中省略下划线，并使用 Makefile 选项告诉 nasm/yasm 在 Windows 中构建时以下划线为前缀。

3.  在 Windows 中通过手动调用将这些东西链接在一起进行构建是`ld`行不通的。替换`gcc`修复了奇怪的“未定义的 printf”链接错误，因为 GCC 不知何故知道如何解决这个问题。

4.  很难正确退出程序，尤其是在多平台方式下。一种方法是设置`eax`为零然后返回。

所有这些都反映在 GitHub 上用于[NASM](https://github.com/mcandre/mcandre/tree/master/nasm/hello)和[YASM](https://github.com/mcandre/mcandre/tree/master/yasm/hello)的 hello.asm 的工作版本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T02:29:50.600

对于一个简单的 Windows 控制台你好：hello.asm

```
extern  printf, ExitProcess

SECTION     .data
szHello db  "Hello there!", 0

SECTION     .text
StartHello:
    push    szHello
    call    printf
    add     esp, 4 

    push    0
    call    ExitProcess 
```

生成文件：

```
hello: hello.obj
    GoLink.exe  /console /entry StartHello hello.obj kernel32.dll msvcrt.dll  

hello.obj: hello.asm
    nasm -f win32 hello.asm -o hello.obj 
```

# java - 如何给自己发短信

> ID：12504870
> 
> 赞同：0
> 
> 时间：2012-09-20T01:04:23.240
> 
> 标签：java, android, sms

如何在 Android 上向自己发送短信？我想输入发件人和虚构内容，并将其显示在 SMS 通知栏中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:12:37.123

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage("DESTINATION NUMBER", null, "Your Message Text", null, null); 
```

同样在您的 Android Manifest 文件中，添加以下权限：

```
uses-permission android:name="android.permission.SEND_SMS" 
```

或者，如果您想发送超过 160 个字符的短信：

```
String phoneNo = "INSERT NR HERE";
String message = "This is a long message that is supposed to be longer than 160 characters.";

SmsManager smsManager = SmsManager.getDefault();
ArrayList msgparts = smsManager.divideMessage(message);

smsManager.sendMultipartTextMessage(phoneNo, null, msgparts, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:23:32.887

如果您想向自己发送消息，则可以使用[通知管理器](http://developer.android.com/reference/android/app/NotificationManager.html)。
当你想得到通知时调用下面的函数。为此通知传递消息字符串和标题字符串。 [这是给你的好教程](http://www.vogella.com/articles/AndroidNotifications/article.html)

您还需要[Pending Intent](http://developer.android.com/reference/android/app/PendingIntent.html) 在特定任务完成后或同时发送此通知。`Pending Intent`允许外部应用程序使用您的应用程序的权限来执行一段预定义的代码。
这是可能对您有所帮助的代码。

```
protected void sendnotification (String title, String message) {
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);       
int icon = R.drawable.icon;
CharSequence tickerText = message;
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when);
Context context = getApplicationContext();
CharSequence contentTitle = title;
CharSequence contentText = message;
Intent notificationIntent = new Intent(this, YourActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

notification.flags = Notification.FLAG_AUTO_CANCEL;
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
mNotificationManager.notify(1, notification);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T14:49:09.030

如果 SMS 不是强制性的，您也可以向自己发送聊天消息。

实现这一目标的两个项目：

*   Nimrod，用于 Facebook Messenger：[https ://www.nimrod-messenger.io/](https://www.nimrod-messenger.io/)
*   电报中间人，用于电报：[https ://github.com/n1try/telegram-middleman-bot](https://github.com/n1try/telegram-middleman-bot)

# c# - 资源文件名搜索

> ID：12504871
> 
> 赞同：0
> 
> 时间：2012-09-20T01:04:28.340
> 
> 标签：c#, .net, vb.net, resx

我现在只有一个资源文件，但它最终会增长到更多。在大多数情况下，每个资源文件的名称都有一致的模式，但值会有所不同。每个资源文件 (*.resx) 都将与我正在构建的类密切相关。

话虽如此，名称模式是这样的：`Key?`、、、和。`SKey``UKey?``SUKey`

*   `Key?`: ? 可以是任何单个字符。正则表达式模式将是这样的`Key[A-Z]`
*   `UKey?`: ? 可以是任何单个字符。如同`Key?`
*   `SKey`& `SUKey`：这些名称中只有一个可能是任何资源文件

我真的只是想知道，提取资源文件中的值的最佳方法是什么，因为它们并不总是在 A 和 Z 之间有每个字母？

## 于 2012 年 9 月 20 日上午 11:48 CST 编辑

```
ResourceManager resmgr = project.resx_name.ResourceManager;
string[] mtch = resmgr.getstring("Key?").toarray<string>(); 
```

然后遍历数组并从结果匹配中构建一个字符串。上面所有指定的`Key`模式都将产生一个字符串值正则表达式模式。

## 于 2012 年 9 月 22 日上午 9:00 CST 编辑

好的，这是我到目前为止的逻辑，任何人都可以验证它的可行性吗？我还没有完成类的其他组件的构建，所以我将完成它们的开发，然后希望在下周中下旬开始测试。

```
ResourceSet rs = syntaxhighlighter.vbnet.ResourceManager.GetResourceSet( CultureInfo.CurrentCulture , true , true );
foreach( DictionaryEntry entry in rs ) {
    if( Regex.IsMatch( entry.Key.ToString() , "Key" ) ) {
        if( Regex.IsMatch( entry.Key.ToString() , "^Key[A-Z]" ) ) {
            this._keys += entry.Value.ToString();
        } else if( Regex.IsMatch( entry.Key.ToString() , "^SKey$" ) ) {
            this._keys += entry.Value.ToString();
        } else if( Regex.IsMatch( entry.Key.ToString() , "^UKey[A-Z]" ) ) {
            this._ukeys += entry.Value.ToString();
        } else if( Regex.IsMatch( entry.Key.ToString() , "^SUKey$" ) ) {
            this._ukeys += entry.Value.ToString();
        }
    }
}
this._attr = @"<(.*\.)?(.+?)(Attribute)?(\((.*)?\))?>"; 
```

### 资源.resx 文件

名称 - 值

*   KeyA - AddHandler|AddressOf|别名|And|AndAlso|As
*   SKey - #Const|#Else|#ElseIf|#End|#If|\=|\&|\&\=|*|*\=|/|/\=|\|\\=|\^|\ ^\=|+|+\=|-|-\=|>>|>>\=|\<\<|\<\<\=

# pinvoke - 如何使用 C# 中的本机 DLL？

> ID：12504874
> 
> 赞同：1
> 
> 时间：2012-09-20T01:04:54.830
> 
> 标签：pinvoke, native-code

给定一个本机 DLL，没有文档或任何东西，并假设它不是 COM 组件，有没有办法从该 DLL 中提取某种接口，以便可以从 C# 调用它？

我知道 PInvoke，但这要求我已经知道方法名称和签名。我没有那些。

甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:45:20.143

您可以使用 PE 阅读工具列出导出的函数。例如[Dependency Walker](http://www.dependencywalker.com/)会为你做这件事。

但是，您无法使用这些信息做很多事情。没有原生 DLL 的元数据告诉您如何调用这些函数，它们的签名是什么。甚至参数代表什么。

这个项目出了点问题。仅靠 DLL 是不够的。您需要一个头文件和一些文档。

# javascript - Ko-Grid 投掷错误

> ID：12504876
> 
> 赞同：1
> 
> 时间：2012-09-20T01:05:00.477
> 
> 标签：javascript, jquery, knockout.js, requirejs, kogrid

我刚刚将 KO Grid 加载到我的应用程序中，看看结果如何。在尝试时，它一直失败，向我显示 ko 未定义的错误。事实上，我可以看到 KnockOut 库被加载到我的 firebug 中，其他使用 Knockout 的代码正在运行，没有任何抱怨。

无论如何，我们也使用 require js 作为我们框架的一部分，所以我决定在 Ko-grid.js 中添加一些 Require 代码。

现在它在“self.data”上失败了，它说既没有定义自我也没有定义数据。我很确定很多人都在使用 ko 网格，并且我的设置存在一些问题，但是它抛出的那种错误没有任何意义。

以前有人遇到过这种问题吗？

# gem - 尝试在 Ubuntu 12.04 中安装 gem 时没有写入权限

> ID：12504877
> 
> 赞同：-1
> 
> 时间：2012-09-20T01:05:04.417
> 
> 标签：gem, ubuntu-12.04, sqlite3-ruby

我正在尝试运行此命令

```
gem intstall sqlite3-ruby -v 1.2.5 
```

在 Ubuntu 12.04 上，但我不断收到此错误：

> 您没有写入 /var/lib/gems/1.9.1 目录的权限

这阻止了我完全运行 bundle install 命令，因此我无法运行 rails server 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:28:13.287

尝试使用 sudo 权限：

```
sudo gem install sqlite3-ruby 
```

* * *

如果你遇到

> /usr/bin/ruby1.9.1 extconf.rb /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载这样的文件 -- mkmf (LoadError)

确保您也已`ruby1.9.1-dev`安装。

要安装它，请运行此命令

```
sudo apt-get install ruby1.9.1-dev 
```

# json - 玩框架 2 + Couchbase，我应该将 json 转换为 scala 模型吗？

> ID：12504881
> 
> 赞同：0
> 
> 时间：2012-09-20T01:05:35.757
> 
> 标签：json, scala, playframework, models, couchbase

我正在使用 Play 2 + Scala + Couchbase，在视图中使用 jQuery、HTML5、CSS。

我有 Couchbase json 文档/查看从 ajax 请求等返回的结果。访问此类数据的控制器路径在 Play 的路由文件中定义，并返回/呈现 json 响应。（我一直在玩各种方法）

目前我只是在测试东西，并使用 javascript (jQuery) 来提取感兴趣的 json 文档元素并将每个元素的基于 html 的表示呈现到页面。我还没有写回任何更改，但是当我最终确定我的方法时会这样做。

我的问题是，鉴于设置，您认为我应该将 json 数据转换为控制器中等效的 Scala 模型对象吗？

Pouchdb 看起来很有趣，但我不知道它是否适用于 couchbase 视图。这是我将来可能会考虑整合的东西。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:23:01.353

Liftweb 的 json 解析器可以快速处理我的 json 文档，因此我可以轻松地将它们提取到 Scala 案例类中。仍在为我的应用程序寻找理想的方法，但这很有效，并且数据在转换后更易于管理......

# java - 运算符 * 未定义参数类型 [][]array, double

> ID：12504882
> 
> 赞同：0
> 
> 时间：2012-09-20T01:05:43.947
> 
> 标签：java, arrays, error-handling, project

我正在做一个对图像进行简单对比的项目，我已经扫描了数组以找到最小值和最大值，但现在我必须绘制图像。

我不断收到此错误“操作符 * 未定义参数类型绘图面板，双精度”

这是代码

```
 public void simple (Graphics g) {
    if (DrawingPanel.imageArray != null) {
        int width = getWidth();
        int height = getHeight();
        int hPos = (width - DrawingPanel.imageArray[0].length) / 2;
        int vPos = (height - DrawingPanel.imageArray.length) / 2;
        for (int r = 0; r < DrawingPanel.imageArray.length; r++)
            for (int c = 0; c < DrawingPanel.imageArray[r].length; c++) {
                newc = Math.round(maxshade * ((double)(DrawingPanel.imageArray[r][c] - minshade) / (maxedshade - minshade))); //error here!!!
                g.setColor(new Color(DrawingPanel.imageArray[r][c], DrawingPanel.imageArray[r][c], DrawingPanel.imageArray[r][c]));
                g.drawLine(c+hPos, r+vPos, c+hPos, r+vPos);                     
            }
        g.setColor(Color.black);
        g.drawRect(hPos, vPos, DrawingPanel.imageArray[0].length, DrawingPanel.imageArray.length);                  
} 
```

}

任何帮助将不胜感激..谢谢！

这也是我计算最小最大值的地方......

```
 public static void computeImageStatistics(DrawingPanel array) {
        DrawingPanel.array = carray;
            maxedshade = carray[0][0];      
            for (int i = 0; i < carray.length; i++) {
              for (int j = 0; j < carray[i].length; j++) {
                if (carray[i][j] > maxedshade) {
                  maxedshade = carray[i][j];
                }
              }
            }
            minshade = carray[0][0];    
            for (int i = 0; i < carray.length; i++) {
              for (int j = 0; j < carray[i].length; j++) {
                if (minshade > carray[i][j]) {
                    minshade = carray[i][j];
                }
    }
            }
    } 
```

和我的绘图面板中的一些其他变量..

```
 public void showImage(File fileName) {
        Scanner scan;
        try {
            scan = new Scanner(fileName);
            typefile = scan.next();
            iname = scan.next();       
            width = scan.nextInt();
            height = scan.nextInt();
            maxshade = scan.nextInt();
            array = new int[width][height];

            for(int r = 0; r < array.length; r++)
                for(int c = 0; c < array[r].length; c++)
                    array[r][c] = scan.nextInt();
            imageArray = array;
            repaint();              
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:31:23.497

错误消息告诉您不能在`maxshade`and之间使用运算符 '*' `((double)(DrawingPanel.imageArray[r][c] - minshade) / (maxedshade - minshade))`。因为 maxshade 是 类型`DrawingPanel`，而不是数字（double/long/float/int...）。

当我查看您的第二个代码块时，我看到一个静态变量名称`maxedshade`。它看起来像一个数字。

然后我查看您的错误行：

```
newc = Math.round(maxshade * ((double)(DrawingPanel.imageArray[r][c] - minshade) / (maxedshade - minshade))); //error here!!! 
```

你在“ **maxshade** ”上输入错误了吗？它应该是**maxedshade**吗？

# cassandra - 使用 Astyanax 的复合列的对象映射

> ID：12504883
> 
> 赞同：1
> 
> 时间：2012-09-20T01:06:14.633
> 
> 标签：cassandra, astyanax

例如，

```
@Column("body")
private String body; 
```

这将创建一个列“body”

我希望能够进行注释，以便我可以创建一个复合列，例如“body:foo”。

没有任何用于此目的的示例，甚至没有任何迹象表明这是可能的。有没有人对此有更多的了解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T21:57:40.050

我不完全确定这将与实体持久化一起使用，但我可能会玩一些类似的东西：

```
@Column()
@Serializer(MyCompositeSerializer.class)
private SomeEntity entity;

public class MyCompositeSerializer extends AnnotatedCompositeSerializer<SomeEntity> {
    public MyCompositeSerializer() {
        super(SomeEntity.class);
    }
} 
```

`public class AnnotatedCompositeSerializer<T> extends AbstractSerializer<T>`如果上述方法不起作用，请查看如何实现以了解您需要做什么。

# vhdl - VHDL 中的“std_logic”枚举类型的目的是什么？

> ID：12504884
> 
> 赞同：6
> 
> 时间：2012-09-20T01:06:15.710
> 
> 标签：vhdl, digital

`std_logic`枚举类型的目的是什么？

```
'U': uninitialized. This signal hasn't been set yet.
'X': unknown. Impossible to determine this value/result.
'0': logic 0
'1': logic 1
'Z': High Impedance
'W': Weak signal, can't tell if it should be 0 or 1.
'L': Weak signal that should probably go to 0
'H': Weak signal that should probably go to 1
'-': Don't care. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T06:21:16.540

*   “X”通常是由两个语句以相反方向驱动相同信号引起的，即“0”和“1”
*   'Z' 用于构建三态输出/输入
*   'L' 和 'H' 分别用于模拟下拉或上拉
*   当您不关心向量中的某些位时，在比较中使用“-”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T01:46:23.283

std_logic 基本上是单线或位。您可以对它们使用逻辑运算符（and、or、xor 等）。在模拟设计时，我相信我只看到了“X”、“0”或“1”。显然你想要'0'或'1'。“X”表示该值未知（可能未连接到任何东西或信号中存在故障）。此外，std_logic_vector 可用于需要超过 1 位宽的信号。我不确定这是否能回答你的问题......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T08:57:20.903

该`std_logic`类型由 IEEE-1164 标准引入，作为单根导线或位的准确代表。VHDL 语言本身不提供足以表示“真实”逻辑的单比特类型。也就是说，表示现代可编程逻辑器件中可建模和可合成逻辑的所有可能状态。

`std_logic`在 VHDL 历史的早期，不同的开发人员基本上是出于表示现实世界信号的需要而编写自己的版本。IEEE-1164 引入了这种标准化的逻辑类型，旨在增强不同开发人员为不同架构编写的代码的互操作性。

该标准的维基百科文章提供了简洁的描述：

[http://en.wikipedia.org/wiki/IEEE_1164](http://en.wikipedia.org/wiki/IEEE_1164)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-06T21:22:03.623

除了已经给出的答案之外，我认为值得一提的是，STD_LOGIC 是所谓的已解析类型，即信号有优先级。例如，1 和 0 对 H 或 L 具有更高的优先级，因此如果同时使用 L 和 1 驱动信号，则输出将为高电平（逻辑 1），因为 1 的优先级高于 L。

碰巧的是，您列出值的顺序，在您的问题中是优先级的顺序，需要注意的是某些值具有相同的优先级，因此如果您使用这两个信号驱动它们，则没有明确的“获胜者”，因此结果是层次结构中的下一个“未知”状态（“X”或“W”），一个简单的例子是，如果信号由“H”和“L”驱动，结果将是“ W'。

STD_LOGIC 的解析表如下所示：

```
--      ---------------------------------------------------------
--      |  U    X    0    1    Z    W    L    H    -        |   |  
--      ---------------------------------------------------------
        ( 'U', 'U', 'U', 'U', 'U', 'U', 'U', 'U', 'U' ), -- | U |
        ( 'U', 'X', 'X', 'X', 'X', 'X', 'X', 'X', 'X' ), -- | X |
        ( 'U', 'X', '0', 'X', '0', '0', '0', '0', 'X' ), -- | 0 |
        ( 'U', 'X', 'X', '1', '1', '1', '1', '1', 'X' ), -- | 1 |
        ( 'U', 'X', '0', '1', 'Z', 'W', 'L', 'H', 'X' ), -- | Z |
        ( 'U', 'X', '0', '1', 'W', 'W', 'W', 'W', 'X' ), -- | W |
        ( 'U', 'X', '0', '1', 'L', 'W', 'L', 'W', 'X' ), -- | L |
        ( 'U', 'X', '0', '1', 'H', 'W', 'W', 'H', 'X' ), -- | H |
        ( 'U', 'X', 'X', 'X', 'X', 'X', 'X', 'X', 'X' )  -- | - | 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-18T17:51:34.777

**`std_logic`有解析功能**

除了and之外，它不仅`std_logic`有更多有用的状态，而且还定义了一个解析函数。`1``0`

分辨率函数是 VHDL 语言概念。它是一个与类型相关联的函数，它确定当该类型的多个值应用于单个信号时会发生什么。语法是：

```
SUBTYPE std_logic IS resolved std_ulogic; 
```

`std_ulogic`.的未解决（因此用处不大）版本在哪里`std_logic`？

特别是，这意味着美好的事物，例如`0`并`1`导致`X`：

```
library ieee;
use ieee.std_logic_1164.all;

entity std_logic_tb is
end std_logic_tb;

architecture behav of std_logic_tb is
    signal s0 : std_logic;
begin
    s0 <= '0';
    s0 <= '1';
    process
    begin
        wait for 1 ns;
        assert s0 = 'X';
        wait;
    end process;
end behav; 
```

这具有直观的意义，正如我们所理解`X`的那样，将多个不兼容的值应用于单根导线的状态。

`std_logic`还知道如何根据 LRM 上的表格解析每对可能的输入信号对。

`bit`另一方面，它没有解析功能，如果我们在上面的示例中使用它，则会导致 GHDL 0.34 上的仿真错误。

的可能值`std_logic`是一个不错的选择，因为它们由[IEEE 1164](https://en.wikipedia.org/wiki/IEEE_1164)标准化并处理许多常见用例。

相关：[https ://electronics.stackexchange.com/questions/51848/when-to-use-std-logic-over-bit-in-vhdl](https://electronics.stackexchange.com/questions/51848/when-to-use-std-logic-over-bit-in-vhdl)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-31T01:37:29.757

我在 Xilinx 的模拟器 ISim 中观察到了这种行为：

*   'U' - 是所有未明确设置默认值的信号的默认状态。我建议为每个信号设置一个默认值。
*   'X' - 当信号由两个或多个具有不同值的驱动器驱动时分配
*   'Z' - 是明确的高 Z 状态。请记住，这只能在具有支持三态的元素的硬件中实现。我建议仅将其用于 IO 引脚，因为这些资源在结构中很少见。
*   “0”和“1”是正常状态。
*   我从未见过任何其他状态，我不希望它们适用于 FPGA。

在 ISim 中检查变量是不可能的，但我假设同样的规则适用。

# ssl - 使用 OpenSSL/https 保护多核 solr/jetty 服务器

> ID：12504885
> 
> 赞同：1
> 
> 时间：2012-09-20T01:06:18.537
> 
> 标签：ssl, solr, openssl, jetty

我有一个多核 solr 实例在带有 Jetty 的服务器上运行，我正在努力保护后端。我已将 Jetty 配置为使用 https 协议，当我向 solr 提交 /select 时一切正常，但不使用任何分片，例如：

```
https://localhost:7450/solr/core0/select?indent=true&rows=10&start=0&q=*:* 
```

我得到了我的搜索结果，一切都很好。

但是当我想搜索所有分片时：

```
https://localhost:7450/solr/core0/select?indent=true&rows=10&start=0&q=*:*&shards=localhost:7450/solr/core0,localhost:7450/solr/core1,... 
```

我得到以下异常。我猜我需要以某种方式配置 solr 本身，以便它通过 https 协议向其他分片发送/接收请求，但在谷歌搜索数小时后我不走运。

```
org.apache.solr.common.SolrException
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:275)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.jetty.security.SslSocketConnector$SslConnection.run(SslSocketConnector.java:713)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: org.apache.solr.client.solrj.SolrServerException: org.apache.commons.httpclient.ProtocolException: The server localhost failed to respond with a valid HTTP response
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:472)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:249)
    at org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:129)
    at org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:103)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:269)
    at java.util.concurrent.FutureTask.run(FutureTask.java:123)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:651)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:676)
    at java.lang.Thread.run(Thread.java:637)
Caused by: org.apache.commons.httpclient.ProtocolException: The server localhost failed to respond with a valid HTTP response
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1987)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:419)
    ... 8 more 
```

我正在使用 Solr 3.6 和 Jetty 6.1-SNAPSHOT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T18:26:10.300

我仍在努力为自己设置此设置，但似乎已在 Solr 4.7 中添加了支持查看原始错误：[https ://issues.apache.org/jira/browse/SOLR-3854](https://issues.apache.org/jira/browse/SOLR-3854)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:12:31.070

您应该能够在 solrconfig.xml 中为 core0 设置用于分片调用的 URL 方案：

```
<requestHandler name="standard" class="solr.SearchHandler" default="true">
  <!-- other params go here -->
  <shardHandlerFactory class="HttpShardHandlerFactory">
    <str name="urlScheme">https://</str>
  </shardHandlerFactory>
</requestHandler> 
```

从源代码来看，这似乎适用于 Solr 3.6.0 及更高版本。不过，我仍在使用 Solr 3.4.0，所以我自己没有尝试过。

参考：[http ://wiki.apache.org/solr/SolrConfigXml#Configuration_of_Shard_Handlers_for_Distributed_searches](http://wiki.apache.org/solr/SolrConfigXml#Configuration_of_Shard_Handlers_for_Distributed_searches)

# bash - bash 脚本：var="[|-d]"

> ID：12504886
> 
> 赞同：1
> 
> 时间：2012-09-20T01:06:26.493
> 
> 标签：bash

我发现我的程序开始输出一些我没有输入的“b”很奇怪。然后我发现了这个：

```
var="[|-a]"
echo $var
var="[|-b]"
echo $var
var="[|-c]"
echo $var
.
.
. 
```

第一个`echo`输出我想要的：[|-a]。其他的，从 b 到 z，总是输出“b”。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:08:54.290

您忘记在输出中引用变量，并且您有一个字符范围表达式匹配的名为“b”的文件。

```
var="[|-a]"
echo "$var"
var="[|-b]"
echo "$var"
var="[|-c]"
echo "$var" 
```

# android - phonegap 条码扫描器插件的致命异常

> ID：12504887
> 
> 赞同：0
> 
> 时间：2012-09-20T01:07:17.407
> 
> 标签：android, eclipse, cordova, phonegap-plugins

当我单击我的 QR 码按钮时，我在 eclipse 中收到以下错误：

```
09-19 17:47:03.703: E/AndroidRuntime(21726): FATAL EXCEPTION: main
09-19 17:47:03.703: E/AndroidRuntime(21726): java.lang.RuntimeException: Unable to         
instantiate activity ComponentInfo{com.knotis.knotisdroidapp/com.google.zxing.client.android.CaptureActivity}:     java.lang.ClassNotFoundException: com.google.zxing.client.android.CaptureActivity
09-19 17:47:03.703: E/AndroidRuntime(21726):    at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.os.Looper.loop(Looper.java:154)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.ActivityThread.main(ActivityThread.java:4944)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at java.lang.reflect.Method.invokeNative(Native Method)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at java.lang.reflect.Method.invoke(Method.java:511)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at dalvik.system.NativeStart.main(Native Method)
09-19 17:47:03.703: E/AndroidRuntime(21726): Caused by: java.lang.ClassNotFoundException: com.google.zxing.client.android.CaptureActivity
09-19 17:47:03.703: E/AndroidRuntime(21726):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
09-19 17:47:03.703: E/AndroidRuntime(21726):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
09-19 17:47:03.703: E/AndroidRuntime(21726):    ... 11 more 
```

这是我的清单文件。我很确定这与我的活动的命名方式有关..

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.knotis.knotisdroidapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <!-- ZXing activities --> 
        <activity 
            android:name="com.google.zxing.client.android.CaptureActivity" 
            android:screenOrientation="landscape" 
            android:configChanges="orientation|keyboardHidden" 
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
            android:windowSoftInputMode="stateAlwaysHidden" 
            android:exported="false"> 
            <intent-filter>
                 <action android:name="com.phonegap.plugins.barcodescanner.SCAN"/> 
                 <category android:name="android.intent.category.DEFAULT"/>
                  </intent-filter> 
                  </activity> 
        <activity 
            android:name="com.google.zxing.client.android.encode.EncodeActivity" 
            android:label="@string/share_name"> 
            <intent-filter> 
                <action android:name="com.phonegap.plugins.barcodescanner.ENCODE"/> 
                    <category android:name="android.intent.category.DEFAULT"/> 
            </intent-filter> 
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我已经仔细检查了权限和类似的东西。

# php - 强制将用户重定向到相应的子站点（wordpress 多站点）

> ID：12504888
> 
> 赞同：1
> 
> 时间：2012-09-20T01:07:22.147
> 
> 标签：php, wordpress

那么有谁知道如何实现代码来检查用户是否是站点的成员，如果不是，将他们重定向到各自的子站点？本质上，我试图将登录用户限制在他们注册的子站点，所以当他们尝试访问主站点或不同的子站点时，他们会被重定向到他们的子站点主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:15:54.753

有很多 Wordpress 插件可以让你做这种事情。

我会推荐[“多站点用户管理”](http://wordpress.org/extend/plugins/multisite-user-management/)。然后，您只需将特定用户角色应用到每个站点，并编辑用户角色验证码以根据需要重定向用户。

如果这没有帮助，我建议在Wordpress 插件搜索中搜索[“用户角色”](http://wordpress.org/extend/plugins/search.php?q=user%20role)和[“多站点用户管理” 。](http://wordpress.org/extend/plugins/search.php?q=multisite%20user%20management)有很多财富可供选择，其中至少有一个可以满足您的大部分需求。

# binary - 二进制补码解释

> ID：12504893
> 
> 赞同：1
> 
> 时间：2012-09-20T01:07:29.700
> 
> 标签：binary, twos-complement

二进制补码如何工作？例如：

```
5: 00000101
-5 (two's complement): 11111011 
```

如何判断后者应该是 251 还是 -5？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T01:25:28.447

他们都是，也没有。`11111011`只是一种位模式 - 如果用于某些运算（例如算术），它只会获得一些固有的意义。

根据您使用的操作，解释可能不同 - 使用 2 的补码的原因是，例如在整数算术中，操作的位模式结果将是正确的，无论您将其解释为有符号还是无符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:09:48.217

你不能！这就是许多语言都有有符号和无符号类型的原因。因此编译器/解释器知道是将二进制值解释为有符号（二进制补码）还是无符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T02:04:07.243

为了更好地理解二的补码，请查看[维基百科页面](http://en.wikipedia.org/wiki/Two%27s_complement)

位串的解释取决于将使用该数据的指令。如果将变量声明为无符号位，则该位将被解释为常规二进制数。否则，如果将其声明为有符号变量，则将其解释为二进制补码值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T19:44:21.530

如果它是一个有符号整数，它的最高有效位将作为它的符号位。如果符号位为 0，则该数字为正数。如果符号位为 1，则该数字为负数并以 2 的补码形式表示，编译器执行 2 的补码操作来处理这些负整数。

但是在明确声明为“unsigned int”的无符号整数的情况下，没有符号位，也没有 2 的补码解释。

因此，对于有符号的 8 bin int 11111011 是 5 的 2 的补码，因此代表 -5，但对于无符号的 8 位 int 11111011 是 251，如您所述。

# html - css 仅在标签内强制某些字符使用斜体？

> ID：12504900
> 
> 赞同：1
> 
> 时间：2012-09-20T01:08:54.643
> 
> 标签：html, css, tags, italics

这可能吗？基本上，我希望能够设置一个标签，上面写着“在这个标签内，az 变为斜体，但没有其他内容。” 或者同样适用于 az 和 AZ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:18:05.600

CSS 旨在设置页面结构的样式，而不是直接设置页面内容的样式。

话虽这么说，有几种解决方法（显然）：

1.  包裹你想要斜体的字符`<i>,<span>,<em>,<dfn>,<var>,<cite>`
2.  使用 javascript 搜索所有文本并将这些元素中的任何一个包裹在该文本周围
3.  使用服务器端代码将您的文本拆分为一个数组，并使用服务器端的标签格式化文本，以便当内容进入页面时，它已经被格式化。

无法使用 CSS 选择特定字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:03:01.220

只能以一种棘手的方式使用支持有限的 CSS3 功能（WebKit 浏览器），即[`unicode-range`限制](http://www.w3.org/TR/css3-fonts/#unicode-range-desc)in 。`@font-face`以下在我的计算机上的 Chrome 和 Safari 中有效，但很可能不适用于您的计算机：

```
@font-face {
  font-family: funny;
  src: local("Times New Roman");
}
@font-face {
  font-family: funny;
  src: local("Times New Roman Kursivoitu");
  unicode-range: U+61-7A;
}
p { font-family: funny; } 
```

如果您可以在正在使用的字体系列中找出特定斜体字体（字体）的特定名称，它也可能在您的计算机上工作。也许替换可能会这样做`Italic`，`Kursivoitu`但关键是特定名称因系统而异，即使字体系列名称（如 Times New Roman）是相同的。

这将是一个丑陋的 hack，因为它会使浏览器使用斜体字体，即使`font-style`是默认字体 ( `normal`)。

您可以将此想法与可*下载*字体一起使用，从那时起您可以控制其名称。我使用[FontSquirrel](http://www.fontsquirrel.com)的 Cardo 字体系列对此进行了测试，稍微编辑了交付的 CSS：

```
@font-face {
    font-family: 'Cardo';
    src: url('Cardo104s-webfont.eot');
    src: url('Cardo104s-webfont.eot?#iefix') format('embedded-opentype'),
         url('Cardo104s-webfont.woff') format('woff'),
         url('Cardo104s-webfont.ttf') format('truetype'),
         url('Cardo104s-webfont.svg#CardoRegular') format('svg');
}
@font-face {
    font-family: 'Cardo';
    src: url('Cardoi99-webfont.eot');
    src: url('Cardoi99-webfont.eot?#iefix') format('embedded-opentype'),
         url('Cardoi99-webfont.woff') format('woff'),
         url('Cardoi99-webfont.ttf') format('truetype'),
         url('Cardoi99-webfont.svg#CardoItalic') format('svg');
    unicode-range: U+61-7A;
}
p { font-family: Cardo; } 
```

我只是将特定的字体名称`CardoRegular`和`CardoItalic`此处更改为相同的名称，`Cardo`并将该名称用于一个元素，其中字母 a-z 应以斜体显示，而其他字符在常规 Cardo 中显示。

要使字母 a–z 和 A–Z 变为斜体，您可以将限制编辑为

```
unicode-range: U+41-5A, U+61-7A; 
```

`@font-face`在支持但不支持限制的浏览器上`unicode-range`，这个诡计回退到在整个元素中使用常规 Cardo。

# jquery - 单击时无法删除元素

> ID：12504901
> 
> 赞同：2
> 
> 时间：2012-09-20T01:09:05.487
> 
> 标签：jquery

我有一个页面，我在页面加载时 appendTo 一个 div。在用户可以通过单击另一个元素来关闭此 div 之后。

```
var overlay = jQuery('<div id="start">111111111</div>');
overlay.appendTo(document.body);

$("#go").click(function() {
    $(document).remove("#start");
}); 
```

不幸的是，它确实附加了 div，但没有删除......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:11:57.383

如何先找到元素，然后调用 remove 代替：

```
$('#start').remove(); 
```

此外，这可以稍微改变一下：

```
$('<div>',{'id':'start'}).text('111111111').appendTo('body');

$('#go').on('click',function(e){
  $('#start').remove();
}); 
```

除非您使用的是过时的 jQuery 版本，[`.on()`](http://api.jquery.com/on/)否则应该使用绑定来代替（请参阅文档）。

如果你想将它存储为`overlay`，你也可以使用它（重新引用它）：

```
var overlay = $('<div>',{'id':'start'}).text('111111111').appendTo('body');
$('#go').on('click',function(e){
  overlay.remove();
}); 
```

[上面的例子](http://jsfiddle.net/Ac4Bb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:13:31.267

**工作演示** [http://jsfiddle.net/7y6bY/](http://jsfiddle.net/7y6bY/)

API：[http ://api.jquery.com/remove/](http://api.jquery.com/remove/)

**代码**

```
var overlay = jQuery('<div id="start">111111111</div>');
overlay.appendTo(document.body);

$("#go").click(function() {
    $("#start").remove();
});​ 
```

# regex - 正则表达式：从哪里开始

> ID：12504902
> 
> 赞同：0
> 
> 时间：2012-09-20T01:09:10.420
> 
> 标签：regex

学习正则表达式时，你会从哪里开始？我正在寻找一套好的东西来学习，这样我就可以建立一个良好的基础。我不希望从记忆中知道一切，但如果我能学到正确的东西——而且足够多——我可以在这方面有一个良好的开端。

请给我您的建议，以便我可以有效地开始学习正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:16:07.880

从这里开始和结束：[掌握正则表达式（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0596528124 "通过杰弗里弗里德尔。 关于正则表达式的最佳书籍 - 永远！")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:12:37.023

我在这个网站上学习了我知道的正则表达式： [http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

它确实内容丰富，易于理解，最重要的是，免费！它是由正则表达式专家制作的，所以没有什么好害怕的。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T02:31:30.210

[就个人而言，我从文档](http://docs.python.org/library/re.html)中学习了 Regex(python regex)

对于正则表达式测试，我主要使用[Rubular](http://www.rubular.com)，它允许您快速检查正则表达式与文本块，以查看它删除的内容。它还支持分组，这对于测试应用程序非常有用。

虽然正则表达式有多种约定，但最常见的是 perl 样式，由 Perl、Python、Ruby 等使用。

干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T01:20:22.540

If you can follow c syntax documentation, then I'd highly recommend the unix man pages from "ed" program, which are also available on the net if you don't have access to unix/linux. This is where all the regex variants (for various programming languages) started. Once you swalled it you'll be able to easily apply yourself to any variant. "man ed" on unix/linux, read the regular expressions part. Or search for "man ed" on google.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T03:45:52.133

正则表达式的语法在编程语言之间通常是一致的。但它们的实现因语言而异。掌握 ridgerunner 提到的正则表达式是一个很好的起点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T02:43:03.700

正则表达式实际上是由 DFA（确定性有限自动机）实现的，并且在数学上也可以描述为非确定性有限自动机。这些模型非常简单，我认为您只需要学习基础知识即可了解其背后的逻辑：

我们有一个由符号 A 组成的字母表，例如 A = { a,b } 或在实际应用程序中很多不同的字符，例如 UTF-8。然后我们在图中有节点，其中一个是起始节点。

这些节点可以使用消耗一个输入字符的转换连接，然后我们转到一个新节点（或同一个节点）。

所以假设我们想要一个正则表达式，它需要 3 a 然后 1 b 进行匹配，它可以被视为以下 DFA：

```
start-> () -a-> () -a-> () -a-> () -b-> end 
```

如果我们允许循环，那么我们会得到以下类型的正则表达式 a*，我们可以通过使用 a 留在同一个节点中。看看[http://en.wikipedia.org/wiki/Deterministic_finite_automaton](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)

我认为陷入不同编程语言和文本编码的实现细节是不明智的。最好先了解逻辑，剩下的只是细节。

在学习理论之前，我会从例如 pythons regex 文档开始进行比较，在不了解微积分的情况下开始在数学中按部分进行积分，这看起来很神奇，但实际上它并不是很难，而是非常优雅和有趣学习和理解！

# java - 当我修改一个变量时，两个变量都会发生变化

> ID：12504903
> 
> 赞同：0
> 
> 时间：2012-09-20T01:09:17.443
> 
> 标签：java, variables, matrix

我正在做这样的算法：

```
public int[][] moveLeft(int m[][], int[] index){
    Puzzle x = new Puzzle(m);
    System.out.println(x);
    int[][] p = m;
    int temp = p[index[0]][index[1]];
    p[index[0]][index[1]] = p[index[0]][index[1]-1];
    p[index[0]][index[1]-1] = temp;
    return p;
} 
```

更具体地说，我想要做的是改变某些值的位置并返回新矩阵，但是当我调试时，我注意到值“m”也会改变，即使我在做改变值 p。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:17:46.647

这是你的罪魁祸首：

```
int[][] p = m; 
```

一旦你这样做，`p`并`m`引用同一个确切的对象，因为 Java 中的数组是引用对象。对 ' 内容的任何更改`p`都将反映在 中`m`，因为`p`和`m`是单个对象的两个不同名称。

如果您需要`p`成为 的副本`m`，则应明确执行。这是[一个答案的链接，](https://stackoverflow.com/a/1686523/335858)向您展示了它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:19:30.243

我认为你应该使用：

```
int [][] p = new int[m.length][];
for(int i = 0; i < m.length; i++)
   p[i] = m[i].clone(); 
```

而不是**int[][] p = m;**

这样`p`和`m`引用**两个不同的对象**。

# javascript - 如何通过 jquery/javascript 发布到 rails 的切换

> ID：12504905
> 
> 赞同：1
> 
> 时间：2012-09-20T01:09:45.627
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我目前有一个名为的模型`project_todo`，它有一个名为的列`done`，它是一个布尔值。我已经设置好了，所以我目前可以将它从应用程序的一侧拖到另一侧，将它从待办事项拖到完成。但是，它并没有明显保存。

我需要做的是拖动切换布尔值，我相信我需要做的是通过 JS/jquery 发布到更新路径来做到这一点。但是，我不确定这应该是什么样子。

谁能给我一些示例代码和/或指出我正确的方向。

所以我可以做这样的事情：

```
$.ajax({
  type: 'POST',
  url: '/project_todo/<%project_todo.id%>/edit',
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:23:26.660

假设我们有一个链接，点击它应该更新列：

```
<%= link_to 'update project', edit_project_todo_path(project_todo), :class => 'updateProject' %> 
```

那么 js 可能看起来像：

```
$('.updateProject').click(function(event) {
  event.preventDefault();

  $.ajax({
    type: 'POST',
    url: $(event.target).attr('href')
  });
}); 
```

您可以使用任何您想要的事件来执行此操作，如果它是一个表单，您可以使用表单的 action 属性

# algorithm - 求递归函数的时间复杂度

> ID：12504907
> 
> 赞同：1
> 
> 时间：2012-09-20T01:10:14.283
> 
> 标签：algorithm, recursion, time-complexity

作业是为了表明时间复杂度是 Ω(2 ^(max(n,m)) ) 在最坏的情况下跟随递归函数。

假设如下：

*   n = w1len（单词 w1 的长度），
*   m = w2len（单词 w2 的长度）

这是代码

```
int dist(String w1, String w2, int w1len, int w2len) {
    if (w1len == 0) {
        return w2len;
    }
    if (w2len == 0) {
        return w1len;
    }   
    int res = dist(w1, w2, w1len - 1, w2len - 1) + (w1.charAt(w1len - 1) == w2.charAt(w2len - 1) ? 0 : 1);      
    int addLetter = dist(w1, w2, w1len - 1, w2len) + 1;
    if (addLetter < res)
        res = addLetter;
    int deleteLetter = dist(w1, w2, w1len, w2len - 1) + 1;
    if (deleteLetter < res)
        res = deleteLetter;

    return res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:24:00.243

尝试为函数绘制调用树。它是什么样子的？你能估计 dist 函数的调用次数吗？

# java - 如何将 JFreechart 添加到面板？

> ID：12504910
> 
> 赞同：3
> 
> 时间：2012-09-20T01:11:23.677
> 
> 标签：java, swing, panel, jfreechart

我已经尝试寻找答案以使其正常工作，但没有成功，我快要失去理智了，所以我的问题来了。

我最近下载了 JFreeChart 来创建图表并在我拥有的 GUI 中实现它们。这是我要插入图形的 GUI 和面板（标记为白色）：

[报告1 http://www.freeimagehosting.net/newuploads/eff3r.png 报告](http://www.freeimagehosting.net/newuploads/eff3r.png) [2 http://www.freeimagehosting.net/newuploads/v5sty.png](http://www.freeimagehosting.net/newuploads/v5sty.png)

我使用 NetBeans 编辑器构建了 GUI 和一个在线可用的 JFreeChart 示例。下面是我的 GUI 的代码：

```
import java.awt.Color;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.math.BigDecimal;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.SwingConstants;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PiePlot3D;
import org.jfree.data.general.DefaultPieDataset;
import org.jfree.data.general.PieDataset;
import org.jfree.util.Rotation;

public class Report extends JFrame implements Defaults {

public MMap j1map,j2map,j3map;
public int total_stations = 0, total_jobs = 0, total_parts = 0;
BigDecimal[] j1_systimebig, j1_worktimebig, j1_idletimebig, j1_queuetimebig,
             j2_systimebig, j2_worktimebig, j2_idletimebig, j2_queuetimebig,
             j3_systimebig, j3_worktimebig, j3_idletimebig, j3_queuetimebig;
public String sim_time;
BigDecimal systime = new BigDecimal(0);
BigDecimal worktime = new BigDecimal(0);
BigDecimal idletime = new BigDecimal(0);
BigDecimal queuetime = new BigDecimal(0);
/**
 * Creates new form Report
 */
public Report() {
    //setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle(TITLE_Report);
    validate();
    setResizable(false);
    setVisible(true);
    //setLocationRelativeTo(null);
    initComponents();
    this.addWindowListener(new WindowAdapter() {
        @Override
       public void windowClosing(WindowEvent e) {
          e.getWindow().dispose();
          }
       }
    );
    centertables();
    //JLayeredPane layeredPane = new JLayeredPane(); 
    PieChart demo = new PieChart("Which operating system are you using?");
    demo.setOpaque(true); 
    demo.setBounds(0, 0, 300, 300);
    demo.setFocusable(true);
    demo.setBackground(Color.gray); 
    demo.setBorder(BorderFactory.createLineBorder(Color.black, 1));
    //start();
    demo.setDoubleBuffered(true);        
    //demo.pack();
    //demo.setVisible(true);        
    //PieChart("teste");
    chartPanel1.add(demo, new Integer(0));
    //layeredPane.add(demo, new Integer(0));
    //this.getContentPane().add(jLayeredPane1); 
}

/* *************************************
 *          GRAPHICS
 *************************************/

public void PieChart(String chartTitle) {
    System.out.println("PieChart");
    // This will create the dataset 
    PieDataset dataset = createDataset();
    // based on the dataset we create the chart
    JFreeChart chart = createChart(dataset, chartTitle);
    // we put the chart into a panel
    ChartPanel chartPanel = new ChartPanel(chart);
    // default size
    chartPanel.setPreferredSize(new java.awt.Dimension(250, 270));
    // add it to our application
    //setContentPane(chartPanel);
    //StationsPanelGraph.add(chartPanel);
    //jLayeredPane1.add(chartPanel, new Integer(0), 0);

}

private  PieDataset createDataset() {
    System.out.println("PieDataset");
    DefaultPieDataset result = new DefaultPieDataset();
    result.setValue("Linux", 29);
    result.setValue("Mac", 20);
    result.setValue("Windows", 51);
    return result;

}

private JFreeChart createChart(PieDataset dataset, String title) {
    System.out.println("Create Chart");
    JFreeChart chart = ChartFactory.createPieChart3D(title,          // chart title
        dataset,                // data
        true,                   // include legend
        true,
        false);

    PiePlot3D plot = (PiePlot3D) chart.getPlot();
    plot.setStartAngle(290);
    plot.setDirection(Rotation.CLOCKWISE);
    plot.setForegroundAlpha(0.5f);
    return chart;

}    

 /* *************************************
 *         END GRAPHICS
 *************************************/  

} 
```

这是结果：

[报告3 http://www.freeimagehosting.net/newuploads/unolz.png](http://www.freeimagehosting.net/newuploads/unolz.png)

我在主类构造函数中初始化并添加图表，下面是图表的代码。我不得不避免发布整个代码，因为它超出了字符限制，但是这里是完整代码的 url（由 NetBeans 初始化 Swing 组件）：[http ://tny.cz/8a4e8b2f](http://tny.cz/8a4e8b2f)

任何解决方案的提示？

提前谢谢，如果还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T02:20:15.177

Don't let the GUI designer dictate your design. Use it, if at all, to manage individual panels, as suggested [here](https://stackoverflow.com/a/2561540/230513). It's not possible to edit a GUI project without the `.form` file; I just added your chart using a `FlowLayout` so you can see it, without altering `initComponents()`.

![image](../Images/e11c31619fe2afee532b13077e466c28.png)

```
import java.awt.FlowLayout;
import java.math.BigDecimal;
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PiePlot3D;
import org.jfree.data.general.DefaultPieDataset;
import org.jfree.data.general.PieDataset;
import org.jfree.util.Rotation;

public class Report extends JFrame {

    public int total_stations = 0, total_jobs = 0, total_parts = 0;
    BigDecimal[] j1_systimebig, j1_worktimebig, j1_idletimebig, j1_queuetimebig,
        j2_systimebig, j2_worktimebig, j2_idletimebig, j2_queuetimebig,
        j3_systimebig, j3_worktimebig, j3_idletimebig, j3_queuetimebig;
    public String sim_time;
    BigDecimal systime = new BigDecimal(0);
    BigDecimal worktime = new BigDecimal(0);
    BigDecimal idletime = new BigDecimal(0);
    BigDecimal queuetime = new BigDecimal(0);

    private static final String title = "Which operating system are you using?";

    /**
    * Creates new form Report
    */
    public Report() {
        initComponents();
        jPanel2.removeAll();
        jPanel2.setLayout(new FlowLayout(FlowLayout.LEFT));
        jPanel2.add(createPieChart(title));
        this.setLocationRelativeTo(null);
    }

    /*
    * *************************************
    * GRAPHICS ***********************************
    */
    private ChartPanel createPieChart(String chartTitle) {
        System.out.println("PieChart");
        PieDataset dataset = createDataset();
        JFreeChart chart = createChart(dataset, chartTitle);
        ChartPanel chartPanel = new ChartPanel(chart);
        return chartPanel;
    }

    private PieDataset createDataset() {
        System.out.println("PieDataset");
        DefaultPieDataset result = new DefaultPieDataset();
        result.setValue("Linux", 29);
        result.setValue("Mac", 20);
        result.setValue("Windows", 51);
        return result;

    }

    private JFreeChart createChart(PieDataset dataset, String title) {
        System.out.println("Create Chart");
        JFreeChart chart = ChartFactory.createPieChart3D(
            title, dataset, true, true, false);
        PiePlot3D plot = (PiePlot3D) chart.getPlot();
        plot.setStartAngle(290);
        plot.setDirection(Rotation.CLOCKWISE);
        plot.setForegroundAlpha(0.5f);
        plot.setCircular(true);
        return chart;

    }

    /*
    * *************************************
    * END GRAPHICS ***********************************
    */
    /**
    * This method is called from within the constructor to initialize the form.
    * WARNING: Do NOT modify this code. The content of this method is always
    * regenerated by the Form Editor.
    */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        // code elided
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        this.dispose();
    }

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Report().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    public javax.swing.JPanel chartPanel1;
    public javax.swing.JButton jButton1;
    public javax.swing.JButton jButton2;
    public javax.swing.JLabel jLabel1;
    public javax.swing.JLabel jLabel10;
    public javax.swing.JLabel jLabel11;
    public javax.swing.JLabel jLabel12;
    public javax.swing.JLabel jLabel13;
    public javax.swing.JLabel jLabel14;
    public javax.swing.JLabel jLabel15;
    public javax.swing.JLabel jLabel16;
    public javax.swing.JLabel jLabel17;
    public javax.swing.JLabel jLabel18;
    public javax.swing.JLabel jLabel19;
    public javax.swing.JLabel jLabel2;
    public javax.swing.JLabel jLabel20;
    public javax.swing.JLabel jLabel21;
    public javax.swing.JLabel jLabel22;
    public javax.swing.JLabel jLabel23;
    public javax.swing.JLabel jLabel24;
    public javax.swing.JLabel jLabel25;
    public javax.swing.JLabel jLabel26;
    public javax.swing.JLabel jLabel27;
    public javax.swing.JLabel jLabel28;
    public javax.swing.JLabel jLabel29;
    public javax.swing.JLabel jLabel30;
    public javax.swing.JLabel jLabel4;
    public javax.swing.JLabel jLabel7;
    public javax.swing.JLabel jLabel8;
    public javax.swing.JLabel jLabel9;
    public javax.swing.JPanel jPanel1;
    public javax.swing.JPanel jPanel2;
    public javax.swing.JPanel jPanel3;
    public javax.swing.JPanel jPanel4;
    public javax.swing.JPanel jPanel6;
    public javax.swing.JPanel jPanel7;
    public javax.swing.JPanel jPanel8;
    public javax.swing.JScrollPane jScrollPane1;
    public javax.swing.JScrollPane jScrollPane3;
    public javax.swing.JScrollPane jScrollPane5;
    public javax.swing.JScrollPane jScrollPane6;
    public javax.swing.JSeparator jSeparator1;
    public javax.swing.JSeparator jSeparator3;
    public javax.swing.JSeparator jSeparator4;
    public javax.swing.JSeparator jSeparator5;
    public javax.swing.JSeparator jSeparator6;
    public javax.swing.JTabbedPane jTabbedPane1;
    public javax.swing.JTable jTable1;
    public javax.swing.JTable jTable2;
    public javax.swing.JTable jTable3;
    public javax.swing.JTable jTable4;
    // End of variables declaration
} 
```

# scala - Scala 可迭代内存泄漏

> ID：12504917
> 
> 赞同：6
> 
> 时间：2012-09-20T01:12:38.867
> 
> 标签：scala, memory-leaks, iterable

我最近开始使用 Scala 并遇到以下问题。下面是 4 种不同的方法来遍历文件的行，做一些事情，并将结果写入另一个文件。其中一些方法正如我所想的那样工作（尽管使用大量内存来这样做），而有些则无休止地消耗内存。

这个想法是将 Scala 的 getLines Iterator 包装为一个 Iterable。我不在乎它是否多次读取文件——这就是我期望它做的事情。

这是我的复制代码：

```
class FileIterable(file: java.io.File) extends Iterable[String] {
  override def iterator = io.Source.fromFile(file).getLines
}

// Iterator

// Option 1: Direct iterator - holds at 100MB
def lines = io.Source.fromFile(file).getLines

// Option 2: Get iterator via method - holds at 100MB
def lines = new FileIterable(file).iterator

// Iterable

// Option 3: TraversableOnce wrapper - holds at 2GB
def lines = io.Source.fromFile(file).getLines.toIterable

// Option 4: Iterable wrapper - leaks like a sieve
def lines = new FileIterable(file)

def values = lines
      .drop(1)
      //.map(l => l.split("\t")).map(l => l.reduceLeft(_ + "|" + _))
      //.filter(l => l.startsWith("*"))

val writer = new java.io.PrintWriter(new File("out.tsv"))
values.foreach(v => writer.println(v))
writer.close() 
```

它正在读取的文件约为 10GB，行数为 1MB。

前两个选项使用恒定的内存量（~100MB）迭代文件。这是我所期望的。这里的缺点是迭代器只能使用一次，并且它使用 Scala 的按名称调用约定作为伪迭代。（作为参考，等效的 c# 代码使用 ~14MB）

第三个方法调用定义在 TraverableOnce 中的 toIterable。这个工作，但它使用大约 2GB 来做同样的工作。不知道内存的去向，因为它无法缓存整个 Iterable。

第四个是最令人震惊的——它立即使用所有可用内存并抛出 OOM 异常。更奇怪的是，它对我测试过的所有操作都执行此操作：drop、map 和 filter。查看实现，它们似乎都没有保持太多状态（尽管下降看起来有点可疑 - 为什么它不只计算项目？）。如果我不做任何操作，它工作正常。

我的猜测是，它在某处维护对所读取的每一行的引用，尽管我无法想象如何。在 Scala 中传递 Iterables 时，我看到了相同的内存使用情况。例如，如果我采用案例 3 (.toIterable) 并将其传递给将 Iterable[String] 写入文件的方法，我会看到同样的爆炸。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T06:01:51.393

请注意[ScalaDoc 的`Iterable`](http://www.scala-lang.org/api/current/scala/collection/Iterable.html)说法：

> 此 trait 的实现需要提供一个带有签名的具体方法：
> 
> ```
>  def iterator: Iterator[A] 
> ```
> 
> 他们还需要提供一种`newBuilder`为同类集合创建构建器的方法。

由于您没有为 提供实现`newBuilder`，因此您将获得默认实现，它使用 a`ListBuffer`并因此尝试将所有内容放入内存中。

您可能希望实现`Iterable.drop`为

```
def drop(n: Int) = iterator.drop(n).toIterable 
```

但这会破坏集合库的表示不变性（即`iterator.toIterable`返回 a `Stream`，而您想`List.drop`返回 a`List`等 - 因此需要这个`Builder`概念）。

# c - 对 C 中的字符执行算术运算

> ID：12504921
> 
> 赞同：1
> 
> 时间：2012-09-20T01:13:41.227
> 
> 标签：c, string, math, char, int

我正在尝试编写一个程序来加、减、乘和除一串字符。我现在在程序中的位置是弄清楚如何将输入字符串分成两个字符串，然后执行适当的 +-/*。

输入应该看起来像这样 abc+aaa

并且输出应该是 abc + aaa = bcd

如何将字符串转换为整数字符串？

```
#include <stdio.h>
#include <math.h>
#include <string.h>

int main() {

printf("This is a pseudo arithmetic program");

char input[10];
input[10] = '\0';
char first [9];
first[9] = '\0';
char last [9];
last[9] = '\0';

int i = 0; 
int b; 
int e;

while (input[0] != '0') {

if (input[0] == 0){
return -1;
}

printf("\nEnter a math problem in SOS format using only lowercase letters up to 9    characters");
printf("\nEx: abc+abc... type '0' to quit \n");
scanf("%s", input);

int x = 0;
x = strlen(input); 

    if (strchr(input, '+')){
    for (i = 0; i <= x; i++) {
         if (i == '+')
         strncpy(first, &input[0], i-1);
         i = 0;
    }
    for (i = x; i >= input[0]; i--) {
         if (i == '+')
         strncpy(last, &input[i], x);
         i = 0;    

    } 

     printf("%s", first);     
     printf(" + ");
     printf("%s", last);
     printf(" = %d", first + last);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:32:39.847

您的代码似乎存在多个问题：

1.  几乎所有数组都发生了数组越界：

    字符输入[10]；
    输入[10] = '\0';

如果你想用'\0'初始化最后一个字符，那么它应该是

```
input [9] = '\0' 
```

数组索引总是从 0 开始。

1.  目前尚不清楚以下几行的用途：

    while (input[0] != '0') { if (input[0] == 0){ return -1; }

2.  当输入一个字符串时，为什么提示用户输入一个 0 来结束它？

3.  strrchr 返回搜索字符开始的指针。因此，您可以自己确定“+”符号的位置，并且两个拆分字符串而不是您的 while 循环。请参阅[strrchr 手册页](http://www.manpagez.com/man/3/strrchr/)

4.  另外，您添加字符的想法还不清楚。从您的示例中，您似乎正在考虑 a = 1，b = 2 等。在这种情况下，如果您的代码不区分大小写，那么您可以将所有输入转换为大写，然后`(input[0] - 'A')+1`将您的字母转换为 a， b、c 到 1、2、3 等。

希望这些指点有所帮助。建议您再次检查您的问题陈述并相应地重构您的代码。

# ios - 如何获取 UICollectionViewCell 的矩形？

> ID：12504924
> 
> 赞同：72
> 
> 时间：2012-09-20T01:14:22.193
> 
> 标签：ios, uitableview, ios6, uicollectionview

`UITableView`有方法`rectForRowAtIndexPath:`，但这在UICollectionView中不存在。我正在寻找一种干净的方式来获取单元格的边界矩形，也许我可以将其添加为`UICollectionView`.

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-09-24T04:54:05.420

我发现这样做的最佳方法如下：

**Objective-C**

```
UICollectionViewLayoutAttributes *attributes = [self.collectionView layoutAttributesForItemAtIndexPath:indexPath]; 
```

**迅速**

```
let attributes = collectionView.layoutAttributesForItem(at: indexPath) 
```

然后您可以通过`attributes.frame`或访问该位置`attributes.center`

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-05-11T09:23:32.580

只需两行代码即可获得完美的框架：

**Objective-C**

```
UICollectionViewLayoutAttributes * theAttributes = [collectionView layoutAttributesForItemAtIndexPath:indexPath];

CGRect cellFrameInSuperview = [collectionView convertRect:theAttributes.frame toView:[collectionView superview]]; 
```

**斯威夫特 4.2**

```
let theAttributes = collectionView.layoutAttributesForItem(at: indexPath)
let cellFrameInSuperview = collectionView.convert(theAttributes.frame, to: collectionView.superview) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-02-24T10:47:11.340

在迅速 3

```
 let theAttributes:UICollectionViewLayoutAttributes! = collectionView.layoutAttributesForItem(at: indexPath)
 let cellFrameInSuperview:CGRect!  = collectionView.convert(theAttributes.frame, to: collectionView.superview) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-07T17:43:57.750

迅速你可以这样做：

```
//for any cell in collectionView
let rect = self.collectionViewLayout.layoutAttributesForItemAtIndexPath(clIndexPath).frame

//if you only need for visible cells
let rect = cellForItemAtIndexPath(indexPath)?.frame 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-20T06:15:35.253

怎么样

```
-(CGRect)rectForCellatIndexPath:(NSIndexPath *)indexPath {

    UICollectionViewCell *cell = [self cellForItemAtIndexPath:indexPath];

    if (!cell) {
        return CGRectZero;
    }

    return cell.frame;

} 
```

作为一个类别`UICollectionView`？

```
#import <UIKit/UIKit.h>

@interface UICollectionView (CellFrame)

-(CGRect)rectForCellatIndexPath:(NSIndexPath *)indexPath;

@end

#import "UICollectionView+CellFrame.h"

@implementation UICollectionView (CellFrame)

-(CGRect)rectForCellatIndexPath:(NSIndexPath *)indexPath {

    UICollectionViewCell *cell = [self cellForItemAtIndexPath:indexPath];

    if (!cell) {
        return CGRectZero;
    }

    return cell.frame;

}

@end 
```

# ruby-on-rails - 带有 HTTP 标头的 redirect_to

> ID：12504931
> 
> 赞同：11
> 
> 时间：2012-09-20T01:16:17.030
> 
> 标签：ruby-on-rails, ruby, redirect

不确定这是否可行或是否有意义，但我正在尝试在设置 HTTP 标头字段后进行重定向。就像是：

```
request.headers['Accept'] = 'application/json'
redirect_to url 
```

显然这不起作用，就像`request`当前请求一样，而不是重定向。有什么方法可以调用`redirect_to`自定义 HTTP 标头吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-19T08:46:21.263

无论您使用什么语言或框架，都无法重定向到设置了自定义标题的页面**。**换句话说，没有办法触发 HTTP 重定向并导致客户端（浏览器）添加自定义标头。

正如您自己提到的，您正在为指示浏览器重定向的响应设置自定义标头，而不是为重定向本身。

站点指示浏览器发出带有自定义标头的 HTTP 请求的唯一方法是使用 Javascript 和`XMLHttpRequest`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-30T23:19:22.223

使用[响应对象](http://guides.rubyonrails.org/action_controller_overview.html#the-response-object)...

> 如果您想为响应设置自定义标头，那么 response.headers 就是这样做的地方。headers 属性是一个将标头名称映射到它们的值的散列，Rails 会自动设置其中的一些。如果要添加或更改标头，只需将其分配给 response.headers 以这种方式：
> 
> `response.headers["Content-Type"] = "application/pdf"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T14:39:32.397

你不能直接做，但有一种间接的方法

> redirect_to your_url, flash: { accept_header: 'application/json' }

然后检查目标 url 中的 flash[:accept_header]。

这不是特别优雅，但它有效。它类似于使用特殊的 url 参数 - your_url(accept_header: json) - 但它不会被用户/书签/等看到。

# asp.net - ASP.NET 中的键值对 - 客户端

> ID：12504933
> 
> 赞同：1
> 
> 时间：2012-09-20T01:16:23.063
> 
> 标签：asp.net, devexpress, visual-studio-2012

我对编写 ASP.NET Web 应用程序非常陌生。但我一直负责这样做。我已经编写了一组广泛的 Web 服务，可与我们的后端数据库一起使用。到目前为止，我只使用这些 Web 服务编写了桌面应用程序。这是我第一次涉足 Web 应用程序。

到目前为止，我一直做得很好。但是我已经到了一个地步，我试图尽量减少一些回发延迟。

我正在使用 gridview 让用户为一对多关系输入一些数据。他们从下拉列表中选择的字段之一。选择此列表后，我正在回发以获取相应的键值，然后显示它，但这需要很长时间。理想情况下，这应该是即时的，所以我想知道最好的方法是什么 - 客户端/javascript - 在名称-值对列表上进行查找？

从一些初步的网络搜索来看，两种最流行的方法似乎是使用隐藏字段来存储列表，或者将其存储在 JSON 对象中？

我正在寻找有关最佳方法的意见，以及如何专门将此列表存储在客户端？据我了解，使用隐藏字段可能是最简单的。

意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:51:38.190

我认为您根本不需要将它存储在客户端，而是对服务器进行异步 Ajax 调用以检索实际值。您应该能够通过将 GridView 和显示的标签控件放入 UpdatePanel 中轻松完成此操作，其中触发器被定义为下拉列表。

# php - 为什么这个脚本会添加一个问号？

> ID：12504935
> 
> 赞同：2
> 
> 时间：2012-09-20T01:16:39.157
> 
> 标签：php, javascript, ajax, jquery, iframe

我正在构建一个 url 缩短服务，但我注意到这个重定向脚本在每个 url 的末尾添加了一个问号。[http://tinyurl.com/j0t9](http://tinyurl.com/j0t9)变成[http://tinyurl.com/j0t9？](http://tinyurl.com/j0t9?)怎么来的？

```
<script>
  function go(){
    window.frames[0].document.body.innerHTML='<form target="_parent" action="http://tinyurl.com/j0t9"></form>';
    window.frames[0].document.forms[0].submit()
  }    
</script>
<iframe onload="window.setTimeout('go()', 99)" src="about:blank" style="visibility:hidden"></iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:20:06.690

这很简单：您提交一个 GET 请求，浏览器添加 ? 在 URL 和查询字符串之间 - 即使查询字符串为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:19:04.803

您正在使用（默认）GET 方法提交表单。表单中的数据（全部都没有）被附加到查询字符串中的 URI（其开头由一个`?`字符标记）。

# scala - 如何创建一个带有条件必需字段的 Playframework 2.0 表单？

> ID：12504937
> 
> 赞同：8
> 
> 时间：2012-09-20T01:16:49.443
> 
> 标签：scala, validation, playframework, playframework-2.0

假设我想要一个带有字段的表单，电子邮件，只有在他们没有输入他们的电话号码时才需要。此外，只有当他们没有输入他们的电子邮件时才需要电话号码，我该怎么做做这个？

如果 requiredNoValid 存在，我想做这样的事情。

```
import play.api.data._
import play.api.data.Forms._
import play.api.data.validation.Constraints._

case class User(email: Option[String] = None, age: Option[Int])

val userForm = Form(
  mapping(
    "email" -> email.verifying(requiredNoValid(phoneNumber)),
    "phoneNumber" -> number.verifying(requiredNoValid(email))
  )(User.apply)(User.unapply)
) 
```

我已经在 Play 1.X 中为此构建了自己的解决方案，但我想放弃其中的大部分并使用 Play 2 表单来为我执行此操作，如果功能存在或者是否有办法通过实现来做到这一点验证器或约束。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T01:39:04.413

您还可以添加`verifying`多个字段。举个简单的例子：

```
val userForm = Form(
  mapping(
    "email" -> optional(email),
    "phoneNumber" -> optional(number)
  ) verifying("You must provide your email or phone number.", { 
      case (e, p) => 
        isValidEmail(e) || isValidPhoneNumber(p)
  })(User.apply)(User.unapply)
) 
```

现在在外部验证内部，您可以访问电子邮件和电话号码，并且可以进行交叉验证。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T15:38:37.907

该解决方案适用于 Java，但我相信如果您使用 scala，您可以使用类似的方法提交并验证后，您可以获得绑定的表单数据。如果它无效，您可以使用一些错误消息拒绝该表单。例如：

```
//Get filled form
Form<User> filledForm = userForm.bindFromRequest();
//Get the user object
User u = filledForm.get();

//If both are not empty
if(u.phoneNumber.isEmpty() && u.email.isEmpty()){
    filledForm.reject("email", "You must provide a valid email or phone number");
} 
```

# python - ATDD Google App Engine with Python - 密钥问题

> ID：12504938
> 
> 赞同：0
> 
> 时间：2012-09-20T01:17:15.537
> 
> 标签：python, unit-testing, google-app-engine

我对这个问题的处理方法可能完全错误，所以请不要犹豫，纠正它。我还在问题标题中添加了 ATDD，因为我正在尝试测试我的 web api 的输出，这不仅仅是一个单元测试。

我在用：

*   谷歌应用引擎 1.7.1
*   GAE 高复制数据存储
*   Python 2.7.3

我使用样板代码设置我的测试：

```
self.testbed = testbed.Testbed()
self.testbed.activate()
self.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=0)
self.testbed.init_datastore_v3_stub() 
```

然后我调用一个模拟对象设置来设置我的实体并将它们保存到测试平台数据存储区。我使用计数器添加 5 位艺术家 ID 为 1 - 5 的艺术家：

```
def add_mock_artist_with(self, artist_id, link_id, name):
    new_artist = dto.Artist(key_name=str(artist_id),
        name=name,
        link_id= str(link_id))
    new_artist.put() 
```

我的测试是我的 web api 返回：

```
{
    "artists": [
            {
            "artist": {
                "name": "Artist 1",
                "links": {
                    "self": {
                        "href": "https://my_server.com/artist/1/"
                    }
                }
            }
        },
.
.
.      
            {
            "artist": {
                "name": "Artist 5",
                "links": {
                    "self": {
                        "href": "https://my_server.com/artist/5/"
                    }
                }
            }
        }
    ],
    "links": {
        "self": {
            "href": "https://my_server.com/artists/"
        }
    }
} 
```

最初我想如果我每次运行测试时都启动一个新的测试平台，我可以指望我的艺术家按顺序输入到数据存储中，因此会得到 ids 1 - 5。我的测试最初通过了，但随着时间的推移由于 id 不匹配而开始失败（我会得到一个链接，如：“href”：“https://my_server.com/artist/78/”）。依赖顺序生成的 id 让我感到有点内疚，所以我决定修复它。我偶然发现了键是名称或生成的 id 的概念。我更新了返回 JSON 的模板以供使用：

```
artist.key().id_or_name() 
```

在模拟对象的情况下，我在构造时提供了键名：

```
key_name=str(artist_id) 
```

对于非模拟构造，我没有包含那行代码并让 GAE 分配 id。

由于我的模板使用 key().id_or_name() 来输出属性，所以一切顺利并且测试通过了。

但是，现在当我测试可以通过以下[http://my_server.com/artist/5/](http://my_server.com/artist/5/)访问的单个艺术家的返回时，我的测试失败了。要将艺术家从数据存储中取出，我使用以下代码：

```
def retrieve_artist_by(id):
    artist = dto.Artist.get_by_id() 
```

在生产中，这会很好，因为它都是基于 id 的。但是，在我的测试中，它没有找到任何东西，因为我在模拟构造中使用了 key_name=str(artist_id) ，并且名称与 id 不同。

我希望有类似的东西：

```
artist = dto.Artist.get_by_id_or_name() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:37:28.060

也许不是您正在寻找的答案，但可以确定您是在生产服务器还是部署服务器上运行并执行不同的代码路径。

[在 Python 中，如何测试我是否在 Google App Engine SDK 中？](https://stackoverflow.com/questions/1916579/in-python-how-can-i-test-if-im-in-google-app-engine-sdk) [http://code.google.com/appengine/docs/python/runtime.html#The%5FEnvironment](http://code.google.com/appengine/docs/python/runtime.html#The%5FEnvironment)

```
os.environ['SERVER_SOFTWARE'].startswith('Development') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:48:06.903

这是我现在正在使用的。我不喜欢它，但它应该在 prod 中表现出色，因为我将使用生成的 id。在测试中，如果它没有通过 id 找到它，它将尝试按名称查找。

```
def retrieve_artist_by(id):
    artist = dto.Artist.get_by_id(id)

    if artist is None:
        artist = dto.Artist.get_by_key_name(str(id))

    return artist 
```

# ruby-on-rails - 在 RoR 3 中将对象传递给渲染（：template => "template.json.rabl")

> ID：12504939
> 
> 赞同：0
> 
> 时间：2012-09-20T01:17:37.347
> 
> 标签：ruby-on-rails, json, rabl

我需要将 json 嵌入到 html 中，并且在[#322 RailsCasts](http://railscasts.com/episodes/322-rabl)中说明了使用[RABL](https://github.com/nesquena/rabl/)的方法......

```
app/views/places/show.html.erb
<div id="place" data-place="<%= render(template: "places/show.json.rabl") %>" > 
```

这是我的 rabl 模板

```
app/views/places/show.json.rabl
object  @place
attributes :id, :name, :desc, :address
node(:type) { |place| place.type_place.name }

child :photos do 
  attributes :id, :desc
  node(:url) { |photo| photo.image.url(:square) }
end 
```

它工作正常，但我想在其他视图中呈现 rabl 模板，例如：

```
app/views/places/finder.html.erb
<%= @places.each do |place| %>
  <div id="place-<%= place.id %>" data-place="<%= render(template: "places/show.json.rabl") %>" >
<% end %> 
```

它显示下一条消息错误

> nil:NilClass 的未定义方法“type_place”

```
Extracted source (around line #1):

1: object  @place
2: attributes :id, :name, :desc, :address
3: 
4: node(:type) { |place| place.type_place.name } 
```

从消息中我认为错误是我没有将对象位置传递给模板......我尝试了很多但我没有得到这个。

提前谢谢，对不起我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T01:25:53.220

您需要显式调用`Rabl::Renderer`

```
<%= @places.each do |place| %>
    <div id="place-<%= place.id %>" data-place="<%= Rabl::Renderer.json(place, 'places/show', view_path: 'app/views') %>" >
<% end %> 
```

# ruby - 如何在红宝石中每秒调用一个方法

> ID：12504940
> 
> 赞同：5
> 
> 时间：2012-09-20T01:17:37.067
> 
> 标签：ruby, rhodes, stopwatch

我想在 ruby​​ 中创建一个秒表程序，所以我用谷歌搜索它并找到了这个[**SO Q**](https://stackoverflow.com/questions/858970/how-to-get-a-stopwatch-program-running)。

但是在那边，作者`tick`用`1000xxx.times`. 我想知道如何使用类似的方法来做到这一点，`(every second).times`或者对于每秒钟的增量都调用该`tick`函数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T23:47:17.767

这个功能：

```
def every_so_many_seconds(seconds)
  last_tick = Time.now
  loop do
    sleep 0.1
    if Time.now - last_tick >= seconds
      last_tick += seconds
      yield
    end
  end
end 
```

像这样使用时：

```
every_so_many_seconds(1) do
  p Time.now
end 
```

结果如下：

```
# => 2012-09-20 16:43:35 -0700
# => 2012-09-20 16:43:36 -0700
# => 2012-09-20 16:43:37 -0700 
```

诀窍是睡不到一秒钟。这有助于防止你失去蜱虫。请注意，您不能保证您永远不会丢失一个刻度。这是因为操作系统无法保证您的非特权程序在需要时获得处理器时间。

因此，请确保您的时钟代码不依赖于每秒调用的块。例如，这会很糟糕：

```
every_so_many_seconds(1) do
  @time += 1
  display_time(@time)
end 
```

这会很好：

```
every_so_many_seconds(1) do
  display_time(Time.now)
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-20T02:02:41.797

```
Thread.new do
  while true do
    puts Time.now # or call tick function
    sleep 1
  end
end 
```

# javascript - 停止发送电子邮件

> ID：12504943
> 
> 赞同：2
> 
> 时间：2012-09-20T01:18:44.717
> 
> 标签：javascript, thunderbird, thunderbird-addon

我正在为 Thunderbird 编写一个附加组件，并希望能够在某些条件下取消发送电子邮件。我有以下代码允许我在发送电子邮件之前执行代码，但我不知道如何停止它。

```
document.getElementById("msgcomposeWindow").addEventListener( "compose-send-message", function(){
  var msgcomposeWindow = document.getElementById( "msgcomposeWindow" );
  var msg_type = msgcomposeWindow.getAttribute( "msgtype" );

  // do not continue unless this is an actual send event
  if( !(msg_type == nsIMsgCompDeliverMode.Now || msg_type == nsIMsgCompDeliverMode.Later) )
      return;

  alert('Sending Message...');//works fine
  if(true){ //eventually this would have more logic...
    //stop email
  }else{
    //let email go
  }
}, true ); 
```

我需要做什么才能停止发送电子邮件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:40:30.200

为了防止发送电子邮件，您需要防止事件冒泡：

```
function send_event_handler( evt ) {
    if(shouldStopEmail) {
        evt.preventDefault();
        return false;
    }
}

window.addEventListener( "compose-send-message", send_event_handler, true ); 
```

# java - 抛出实例化异常

> ID：12504948
> 
> 赞同：2
> 
> 时间：2012-09-20T01:19:36.140
> 
> 标签：java, android, exception

我还没有完成这个应用程序，但我希望在我的手机上看到它的样子。但是，它使用 InstantiationException 强制关闭。

logcat 中的异常：

> 09-19 20:13:47.987: D/szipinf(5396): 初始化充气状态 09-19 20:13:48.007: D/dalvikvm(5396): newInstance failed: no () 09-19 20:13:48.007: D/AndroidRuntime(5396): 关闭 VM 09-19 20:13:48.007: W/dalvikvm(5396): threadid=1: 线程退出未捕获异常 (group=0x4001d560) 09-19 20:13:48.017: E /AndroidRuntime(5396): 致命异常: main 09-19 20:13:48.017: E/AndroidRuntime(5396): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.hyperspacemg.showstopper/com.hyperspacemg.showstopper。 MainActivity}: java.lang.InstantiationException: com.hyperspacemg.showstopper.MainActivity 09-19 20:13:48.017: E/AndroidRuntime(5396): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1680) 09-19 20:13:48.017：E/AndroidRuntime(5396)：在 android.app.ActivityThread。handleLaunchActivity(ActivityThread.java:1784) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 android.app.ActivityThread.access$1500(ActivityThread.java:123) 09-19 20:13:48.017: E /AndroidRuntime(5396): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:939) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 android.os.Handler.dispatchMessage(Handler. java:99) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 android.os.Looper.loop(Looper.java:130) 09-19 20:13:48.017: E/AndroidRuntime(5396) : 在 android.app.ActivityThread.main(ActivityThread.java:3835) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-19 20 :13:48.017: E/AndroidRuntime(5396): 在 java.lang.reflect.Method.invoke(Method.java:507) 09-19 20:13:48.017: E/AndroidRuntime(5396):在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 com.android.internal.os.ZygoteInit.main( ZygoteInit.java:622) 09-19 20:13:48.017: E/AndroidRuntime(5396): at dalvik.system.NativeStart.main(Native Method) 09-19 20:13:48.017: E/AndroidRuntime(5396):引起：java.lang.InstantiationException: com.hyperspacemg.showstopper.MainActivity 09-19 20:13:48.017: E/AndroidRuntime(5396): at java.lang.Class.newInstanceImpl(Native Method) 09-19 20:13 :48.017: E/AndroidRuntime(5396): at java.lang.Class.newInstance(Class.java:1409) 09-19 20:13:48.017: E/AndroidRuntime(5396): at android.app.Instrumentation.newActivity( Instrumentation.java:1021) 09-19 20:13:48.017: E/AndroidRuntime(5396): 在 android.app.ActivityThread。performLaunchActivity(ActivityThread.java:1672) 09-19 20:13:48.017: E/AndroidRuntime(5396): ... 11 更多 09-19 20:13:48.017: W/ActivityManager(1426): 强制完成活动 com。 hyperspacemg.showstopper/.MainActivity 09-19 20:13:48.177: D/dalvikvm(1426): GC_EXTERNAL_ALLOC 释放 311K, 42% 空闲 6658K/11335K, 外部 2060K/2067K, 暂停 73ms 09-19 20:13:48.237: D /dalvikvm(5379): GC_CONCURRENT 释放 346K, 48% 空闲 3158K/6023K, 外部 0K/0K, 暂停 18ms+3ms 09-19 20:13:48.378: I/dalvikvm(5355): JIT 的竞技场总页数: 11 09 -19 20:13:48.518：W/ActivityManager(1426)：HistoryRecord{40824588 com.hyperspacemg.showstopper/.MainActivity} 的活动暂停超时hyperspacemg.showstopper/.MainActivity 09-19 20:13:48.177: D/dalvikvm(1426): GC_EXTERNAL_ALLOC 释放 311K, 42% 空闲 6658K/11335K, 外部 2060K/2067K, 暂停 73ms 09-19 20:13:48.237: D /dalvikvm(5379): GC_CONCURRENT 释放 346K, 48% 空闲 3158K/6023K, 外部 0K/0K, 暂停 18ms+3ms 09-19 20:13:48.378: I/dalvikvm(5355): JIT 的竞技场总页数: 11 09 -19 20:13:48.518：W/ActivityManager(1426)：HistoryRecord{40824588 com.hyperspacemg.showstopper/.MainActivity} 的活动暂停超时hyperspacemg.showstopper/.MainActivity 09-19 20:13:48.177: D/dalvikvm(1426): GC_EXTERNAL_ALLOC 释放 311K, 42% 空闲 6658K/11335K, 外部 2060K/2067K, 暂停 73ms 09-19 20:13:48.237: D /dalvikvm(5379): GC_CONCURRENT 释放 346K, 48% 空闲 3158K/6023K, 外部 0K/0K, 暂停 18ms+3ms 09-19 20:13:48.378: I/dalvikvm(5355): JIT 的竞技场总页数: 11 09 -19 20:13:48.518：W/ActivityManager(1426)：HistoryRecord{40824588 com.hyperspacemg.showstopper/.MainActivity} 的活动暂停超时11 09-19 20:13:48.518: W/ActivityManager(1426): HistoryRecord{40824588 com.hyperspacemg.showstopper/.MainActivity} 的活动暂停超时11 09-19 20:13:48.518: W/ActivityManager(1426): HistoryRecord{40824588 com.hyperspacemg.showstopper/.MainActivity} 的活动暂停超时

**主要活动**

```
package com.hyperspacemg.showstopper;

import com.hyperspacemg.showstopper.ColorPickerDialog.OnColorChangedListener;

import android.os.Bundle;
import android.app.Activity;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.RadioButton;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity implements OnColorChangedListener
    {
    public static final String PREFS_NAME = "ShowStopperPrefsFile";

    SeekBar seekbarChan, seekbarRed, seekbarGreen, seekbarBlue, seekbarBand, seekbarSens;
    TextView valueChan, valueRed, valueGreen, valueBlue, side, valueBand, valueSens, valueSave;
    private static int Chan = 0;
    private static int Rset = 0;
    private static int Gset = 0;
    private static int Bset = 0;
    private static int Side = 0;
    private static int Band = 0;
    private static int Sens = 24;
    private static int Save = 0;

    String chanFinal = null;
    String redFinal = null;
    String greenFinal = null;
    String blueFinal = null;
    String modeFinal = null;
    String sideFinal = null;
    String bandFinal = null;
    String sensFinal = null;
    String saveFinal = null;
    String message = "<HMG" + chanFinal + ":" + redFinal + ":" + greenFinal + ":" + blueFinal + ":" + modeFinal + ":" + sideFinal + ":" + bandFinal + ":" + sensFinal + ":" + saveFinal + ">"; 

    public MainActivity(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);

        valueChan = (TextView) findViewById(R.id.textViewChan);
        seekbarChan = (SeekBar) findViewById(R.id.seekBarChan);
        valueRed = (TextView) findViewById(R.id.textViewRed);
        seekbarRed = (SeekBar) findViewById(R.id.seekBarRed);
        valueGreen = (TextView) findViewById(R.id.textViewGreen);
        seekbarGreen = (SeekBar) findViewById(R.id.seekBarGreen);
        valueBlue = (TextView) findViewById(R.id.textViewBlue);
        seekbarBlue = (SeekBar) findViewById(R.id.seekBarBlue);
        valueBand = (TextView) findViewById(R.id.textViewBand);
        seekbarBand = (SeekBar) findViewById(R.id.seekBarBand);
        valueSens = (TextView) findViewById(R.id.textViewSens);
        seekbarSens = (SeekBar) findViewById(R.id.seekBarSens);

        int sbar_chan_position = settings.getInt("seekbar_chan_pref", 0);
        seekbarChan.setProgress(sbar_chan_position);
        valueChan.setText("Channel: " + sbar_chan_position);
        Chan = sbar_chan_position;

        int sbar_red_position = settings.getInt("seekbar_red_pref", 0);
        seekbarRed.setProgress(sbar_red_position);
        valueRed.setText("Red: " + sbar_red_position);
        Rset = sbar_red_position;

        int sbar_green_position = settings.getInt("seekbar_green_pref", 0);
        seekbarGreen.setProgress(sbar_green_position);
        valueGreen.setText("Green: " + sbar_green_position);
        Gset = sbar_green_position;

        int sbar_blue_position = settings.getInt("seekbar_blue_pref", 0);
        seekbarBlue.setProgress(sbar_blue_position);
        valueBlue.setText("Blue: " + sbar_blue_position);
        Bset = sbar_blue_position;

        int sbar_band_position = settings.getInt("seekbar_band_pref", 0);
        seekbarBand.setProgress(sbar_band_position);
        valueBand.setText("Band: " + sbar_band_position);
        Band = sbar_band_position;

        int sbar_sens_position = settings.getInt("seekbar_sens_pref", 0);
        seekbarSens.setProgress(sbar_sens_position);
        valueSens.setText("Sensitivity: " + sbar_red_position);
        Sens = sbar_sens_position;

        seekbarChan.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueChan.setText("Channel: " + progress);

                Chan = progress;

                String chanFinal = "" + Chan;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarRed.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueRed.setText("Red: " + progress);

                Rset = progress;

                String redFinal = "" + Rset;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarGreen.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueGreen.setText("Green: " + progress);

                Gset = progress;

                String greenFinal = "" + Gset;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarBlue.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueBlue.setText("Blue: " + progress);

                Bset = progress;

                String blueFinal = "" + Bset;

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarBand.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                    String audB = null;
                    switch(progress)
                    {
                    case 0:
                    audB = "63Hz";
                    break;
                    case 1:
                    audB = "160Hz";
                    break;
                    case 2:
                    audB = "400Hz";
                    break;
                    case 3:
                    audB = "1kHz";
                    break;
                    case 4:
                    audB = "2.5kHz";
                    break;
                    case 5:
                    audB = "6.25kHz";
                    break;
                    case 6:
                    audB = "16kHz";
                    break;
                    }
                valueBand.setText("Band: " + audB);

                Band = progress;

                String bandFinal = "" + Band;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarSens.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                    int sensitivity = progress + 1;
                valueSens.setText("Sensitivity: " + sensitivity);

                Sens = progress;

                String sensFinal = "" + Sens;

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void colorChanged(int color) {

        int sbar_red_position = Color.red(color);
        int sbar_green_position = Color.green(color);
        int sbar_blue_position = Color.blue(color);

        seekbarRed.setProgress(sbar_red_position);
        valueRed.setText("Red: " + sbar_red_position);
        Rset = sbar_red_position;

        seekbarGreen.setProgress(sbar_green_position);
        valueGreen.setText("Green: " + sbar_green_position);
        Gset = sbar_green_position;

        seekbarBlue.setProgress(sbar_blue_position);
        valueBlue.setText("Blue: " + sbar_blue_position);
        Bset = sbar_blue_position;

    }

    @Override
    public void onStart() {
        super.onStart();
        }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt("seekbar_red_pref", Rset);
        editor.putInt("seekbar_green_pref", Gset);
        editor.putInt("seekbar_blue_pref", Bset);
        editor.commit();
    }

    @Override
    public void onStop() {
        super.onStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    public void onClickColorPicker(View v) {
        new ColorPickerDialog(this, this, Color.rgb(Rset, Gset, Bset)).show();
    }

    public void onRadioButtonClicked(View v) {
        // When radio button is clicked

        // dumb stuff to make these radio group
        RadioButton rb = (RadioButton) v;

        RadioButton rb0 = (RadioButton) findViewById(R.id.radio0);
        RadioButton rb1 = (RadioButton) findViewById(R.id.radio1);

        rb0.setChecked(false);
        rb1.setChecked(false);
        rb.setChecked(true);
        // end dumb stuff

        int checkedRadioButton = rb.getId();

        String radioButtonSelected = "";

        switch (checkedRadioButton) {
        case R.id.radio0:
            radioButtonSelected = "0";
            break;
        case R.id.radio1:
            radioButtonSelected = "1";
            break;
        }
        String audS = radioButtonSelected;
    }

} 
```

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
<RelativeLayout
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"
 android:padding="5dp">
 <TextView
        android:id="@+id/textViewChan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="@string/channel"/>

 <SeekBar
        android:id="@+id/seekBarChan"
        android:layout_below="@+id/textViewChan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:max="4"
        android:paddingBottom="10dp" />
 <Button
        android:id="@+id/btnChoose"
        android:layout_below="@+id/seekBarChan"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/choose"/>
 <Button
        android:id="@+id/btnRandom"
        android:layout_below="@+id/btnChoose"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/random"/>
 <TextView
        android:id="@+id/textViewRed"
        android:layout_below="@+id/btnRandom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Red" />
    <SeekBar
        android:id="@+id/seekBarRed"
        android:layout_below="@+id/textViewRed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <TextView
        android:id="@+id/textViewGreen"
        android:layout_below="@+id/seekBarRed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Green" />
    <SeekBar
        android:id="@+id/seekBarGreen"
        android:layout_below="@+id/textViewGreen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <TextView
        android:id="@+id/textViewBlue"
        android:layout_below="@+id/seekBarGreen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Blue" />
    <SeekBar
        android:id="@+id/seekBarBlue"
        android:layout_below="@+id/textViewBlue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <Spinner
        android:id="@+id/spinnerMode"
        android:layout_below="@+id/seekBarBlue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/mode_array"
        android:prompt="@string/mode_prompt" />
    <TextView
        android:id="@+id/textViewSide"
        android:layout_below="@+id/spinnerMode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="@string/side" />

      <RadioButton
          android:id="@+id/radio0"
          android:layout_below="@+id/textViewSide"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="left"
          android:layout_marginLeft="10dp"
          android:checked="true"
          android:onClick="onRadioButtonClicked"
          android:text="@string/left" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_below="@+id/textViewSide"
            android:layout_toRightOf="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:onClick="onRadioButtonClicked"
            android:text="@string/right" />
        <TextView
        android:id="@+id/textViewBand"
        android:layout_below="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/band" />
        <SeekBar
        android:id="@+id/seekBarBand"
        android:layout_below="@+id/textViewBand"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="5"
        android:paddingBottom="10dp" />
        <TextView
        android:id="@+id/textViewSens"
        android:layout_below="@+id/seekBarBand"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/sens" />
        <SeekBar
        android:id="@+id/seekBarSens"
        android:layout_below="@+id/textViewSens"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
        <Button
        android:id="@+id/btnApply"
        android:layout_below="@+id/seekBarSens"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/apply"/>
        <Button
        android:id="@+id/btnSave"
        android:layout_below="@+id/btnApply"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="@string/save"/>

</RelativeLayout>
</ScrollView> 
```

**字符串.xml**

```
<resources>

    <string name="app_name">Show Stopper</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">Show Stopper</string>
    <string name="random">Random Color!</string>
    <string name="channel">Channel %d</string>
    <string name="Red">Red %d</string>
    <string name="Green">Green %d</string>
    <string name="Blue">Blue %d</string>
    <string name="side">Audio Side</string>
    <string name="left">Left</string>
    <string name="right">Right</string>
    <string name="band">Band %d</string>
    <string name="sens">Sensitivity %d</string>
    <string name="choose">Choose a Color!</string>
    <string name="apply">Apply</string>
    <string name="save">Save</string>

    <string name="mode_prompt">Choose a Mode</string>

    <string-array name="mode_array">
        <item>Random Fade</item>
        <item>HeartBeat Red</item>
        <item>Set Color</item>
        <item>Pulse Color</item>
        <item>Heartbeat Color</item>
        <item>Audio Color</item>
        <item>Audio Random Flash</item>
        <item>Audio Random Set</item>
    </string-array>

</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:46:19.167

改变：

```
public MainActivity(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
```

到：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
```

# mysql - 无法在 mysql 工作台中创建隧道管理器

> ID：12504950
> 
> 赞同：1
> 
> 时间：2012-09-20T01:20:13.570
> 
> 标签：mysql, ubuntu, ssh, workbench

在我的孩子们入睡后，我已经在 mysql workbench 上玩了将近一个星期了。在谷歌的帮助下，我花了几个小时试图让它工作，但我真的被困住了。起初，我有 paramiko 和 pycrypto 问题，但我卸载然后通过终端重新安装。但我仍然收到“无法使用 root 用户在 ip:port 连接到 mysql 无法启动 SSH 隧道管理器。当我检查日志文件时，我看到了这个： `21:12:42 [INF][ SSH tunnel]: Starting tunnel 21:12:42 [ERR][ python]: Error running file. 21:12:42 [WRN][ ]: Tunnel manager could not be executed`

我可以毫无问题地通过终端访问 mysql。我还记得通过终端启动 SSH 也没有问题，但不记得我使用了哪些步骤（由于我无数次的谷歌搜索）。无论哪种方式，我从来没有通过工作台工作过。请帮忙。顺便说一句，mysql 和 workbench 在我的本地机器上。

# python - 像在 MATLAB 中一样在 IPython 中保存会话？

> ID：12504951
> 
> 赞同：22
> 
> 时间：2012-09-20T01:20:19.553
> 
> 标签：python, ipython, pandas

It would be useful to save the session variables which could be loaded easily into memory at a later stage.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T01:34:06.203

```
In [23]: %logstart /tmp/session.log
Activating auto-logging. Current session state plus future input saved.
Filename       : /tmp/session.log
Mode           : backup
Output logging : False
Raw input log  : False
Timestamping   : False
State          : active

In [24]: x = 1

In [25]: %logstop

In [26]: quit()
Do you really want to exit ([y]/n)? y 
```

然后我们可以使用以下命令恢复会话：

```
% ipython -log /tmp/session.log 
Activating auto-logging. Current session state plus future input saved.
Filename       : ipython_log.py
...

In [1]: x
Out[1]: 1 
```

有关“会话记录和恢复”的更多信息，请参阅[文档](http://ipython.org/ipython-doc/stable/interactive/reference.html#session-logging-and-restoring)。

请注意，这仅存储IPython 运行的*命令。*它不保存 IPython 会话的状态。恢复会话需要重新执行命令。

* * *

如果您将[PYTHONSTARTUP](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSTARTUP)环境变量设置为指向一个名为的文件，例如`startup.py`：

```
PYTHONSTARTUP=/path/to/startup.py 
```

然后将以下内容放入/path/to/startup.py：

```
try:
    # https://stackoverflow.com/a/5377051/190597 (Tom Dunham)
    __IPYTHON__
except NameError:
    pass
else:
    # https://stackoverflow.com/a/15898875/190597 (user2261139)
    from IPython import get_ipython
    ipython = get_ipython()
    ipython.magic("%logstart /tmp/session.log") 
```

然后 IPython 将在您启动交互式会话时自动调用 %logstart。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-01T20:35:13.790

寻找类似的东西我遇到了[save_ipython_variables](https://pypi.python.org/pypi/save_ipython_variables/0.0.3)：

> `save-ipython-variables`让您...轻松将全局 IPython 变量保存到磁盘，并在您再次需要它们时将它们加载回全局命名空间，即使在全新的 IPython 会话中也是如此。

我还没有太多机会使用它，但看起来很有希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-20T12:01:00.283

还有一个魔术命令，`history`可用于编写用户给出的所有命令/语句。

语法：`%history -f file_name`. 此外`%save file_name start_line-end_line`，star_line 是起始行号，end_line 是结束行号。在选择性保存的情况下很有用。

`%run`可用于执行保存文件中的命令

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-20T10:45:28.777

我还没有尝试过，但从 AE Drew 的回答开始，我找到了一个可能的替代方案。看起来 IPython 有一个内置的魔法命令，称为[%store](http://ipython.org/ipython-doc/rel-0.12/config/extensions/storemagic.html)：

> %store 用于轻量级持久性的魔法。在 IPython 的数据库中存储变量、别名和宏。要在启动时自动恢复存储的变量，请将其添加到您的 ipython_config.py 文件中：

```
c.StoreMagic.autorestore = True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-06T18:00:41.957

不是我的解决方案，但这似乎是最接近的解决方案，如果您使用的是 ipython：[https ://stackoverflow.com/a/28552465/4752883](https://stackoverflow.com/a/28552465/4752883)

# android - 如何从 ResolveInfo 启动 Intent

> ID：12504954
> 
> 赞同：26
> 
> 时间：2012-09-20T01:20:26.767
> 
> 标签：android, android-intent, launcher

我正在尝试为 android 制作一个自定义启动器，并且我正在尝试弄清楚如何启动一个不同的应用程序表单。我认为这样做的方法是意图，我在这里找到了一个帖子：

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

虽然我真的不明白答案！有人可以给我一个简明的片段或一系列步骤，从单个 ResolveInfo 到启动由该 ResolveInfo 代表的应用程序吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-20T11:09:41.430

给定一个`ResolveInfo`命名`launchable`：

```
ActivityInfo activity=launchable.activityInfo;
ComponentName name=new ComponentName(activity.applicationInfo.packageName,
                                     activity.name);
Intent i=new Intent(Intent.ACTION_MAIN);

i.addCategory(Intent.CATEGORY_LAUNCHER);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
            Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
i.setComponent(name);

startActivity(i); 
```

（来自[https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot)）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-02T23:08:00.327

通过这种方式创建一个新的 Intent。

```
 Intent intent = new Intent();
    intent.setClassName(resolveInfo.activityInfo.applicationInfo.packageName,
            resolveInfo.activityInfo.name);
    startActivity(intent); 
```

# android - 带有 .net 的 Android 套接字

> ID：12504955
> 
> 赞同：0
> 
> 时间：2012-09-20T01:20:47.297
> 
> 标签：android

我在 Android 程序中设置了一个按钮以连接到 .net PC。

这是我的代码：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==btn_con){
        try{
            s=new Socket("xxx.xxx.xxx.xxx", xxxx);
            BufferedReader in=new BufferedReader(new InputStreamReader(s.getInputStream()));
            String str=in.readLine();
            Toast t=Toast.makeText(this, str, Toast.LENGTH_LONG);
            t.show();
            _isconnected=true;
        }catch(Exception e){
           Toast t=Toast.makeText(this, "链接发生错误"+e.getMessage(), Toast.LENGTH_LONG);
           t.show();
           System.out.println("连接发生错误："+e.getMessage());
        }
    } 
```

当我运行程序时，它会引发 Permission denied 异常。我已经运行了一个 .net 服务程序；这是一个客户端安卓程序。如果我运行 Java 客户端，则没有这样的问题。当我在手机中运行Android程序时，我不知道如何解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:29:36.997

也许是因为您忘记在 Android 清单文件中授予完整的网络访问权限？

请参阅[从 android 应用程序访问 Internet 需要什么权限？](https://stackoverflow.com/questions/2378607/what-permission-do-i-need-to-access-internet-from-an-android-application)

# javascript - JSON 到 Javascript 层次结构（数组？）

> ID：12504956
> 
> 赞同：2
> 
> 时间：2012-09-20T01:21:12.397
> 
> 标签：javascript, json, d3.js, dynamic-arrays

我想在 d3 树布局中使用 JSON 的层次结构，例如：

[http://bl.ocks.org/1249394](http://bl.ocks.org/1249394)

在我的工作中，我在 javascript 中使用了一个变量：

```
var treeData = {
  "name" : "A1", "children" : [
    {"name" : "A3", "children": [
      {"name" : "A31", "children" :[
        {"name" : "A311" },
        {"name" : "A312" }
      ]}
    ]}
  ]}; 
```

如何将此层次结构用作*动态*javascript 数组，以便可以提取值并动态添加或删除层次结构中的新层/分支？这需要循环还是空数组？我希望能够创建这种层次结构。我的主要问题是我不知道如何在 javascript 数组代码中保留层次结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:08:36.487

如果我正确理解了您的问题，那么在您像上面那样为 treeData 赋值之后，它已经是您想要的层次结构了。为了更轻松地操作它们，您可以执行以下操作

```
tree.nodes(treeData); 
```

获取对象数组

# bash - 设置 -e 选项时如何避免 bash 脚本失败？

> ID：12504957
> 
> 赞同：36
> 
> 时间：2012-09-20T01:21:14.420
> 
> 标签：bash, shell, scripting

我有一个带有`-e`选项集的 bash 脚本，它在第一个错误时使整个脚本失败。

在脚本中，我正在尝试对`ls`目录进行操作。但这条路可能存在也可能不存在。如果路径不存在，则`ls`命令失败，因为`-e`设置了标志。

有没有办法可以防止脚本失败？

作为旁注，我已经尝试过在该命令之前和之后执行 and 的技巧，它可以工作`set +e`。`set -e`但我正在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-20T01:38:25.923

`||`您可以使用和保证以 0 状态退出的命令“捕获”错误：

```
ls $PATH || echo "$PATH does not exist" 
```

由于复合命令无论是否`$PATH`存在都会成功，`set -e`因此不会触发并且您的脚本不会退出。

要静默抑制错误，您可以使用以下`true`命令：

```
ls $PATH || true 
```

要执行多个命令，您可以使用复合命令之一：

```
ls $PATH || { command1; command2; } 
```

或者

```
ls $PATH || ( command1; command2 ) 
```

只要确保在任何一个复合命令中都没有失败。第二个示例的一个好处是，您可以在子 shell 中关闭立即退出模式，而不会影响其在当前 shell 中的状态：

```
ls $PATH || ( set +e; do-something-that-might-fail ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T02:10:18.910

另一种选择是用来`trap`捕捉`EXIT`信号：

```
trap 'echo "ls failed" ; some_rescue_action' EXIT
ls /non_exist 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T01:32:19.237

一种解决方案是测试文件夹的存在

```
function myLs() {
    LIST=""
    folder=$1
    [ "x$folder" = "x" ] && folder="."
    [ -d $folder ] && LIST=`ls $folder`
    echo $LIST
} 
```

这样 bash 如果`$folder`不存在就不会失败

# nasm - Nasm 构建字符串

> ID：12504958
> 
> 赞同：-2
> 
> 时间：2012-09-20T01:21:20.287
> 
> 标签：nasm, masm, masm32

嗨，我试图在 Nasm 中创建一个循环。我有循环工作，但想在它循环时更改字符串并且似乎无法让它工作。

我有这个工作：

```
main:
        mov ebx,0               ; set ebx to 0 
       myloop:                  ;
       inc ebx                  ;
       mov [msg], 2Ah           ;  Immediate move * to msg
       mov eax, 2Ah             ;
       push ecx                ; save ecx as printf uses it
       push OFFSET msg         ; parameter used by printf
       call printf             ; print string msg
       add esp, 4              ; remove  pointer to msg
       pop ecx                 ; restore ecx
        cmp ebx,[len]           ;
         jl myloop                  ;
       ret

.DATA

msg    db  "Hello, World+!", 0Ah, 0  ; 0A cariage return
                                     ; 0  end of string
star BYTE 2Ah ; 2A (hex) = Ascii *
len   equ $ - (msg +1)               ; length of string msg
 end 
```

它输出 *ello, World! 正确的次数，但我希望它输出这个

```
*ello, World!
**llo, World!
***lo, World!
****o, World! 
```

等等。

谁能帮助我。

我还必须注意，它链接到 C 库以使用 printf 进行输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:02:09.553

我不会评论它

```
SECTION .data
msg     db  "Hello, World+!", 0Ah, 0  
len     equ $ - msg - 2

SECTION .text 
main:
    xor     ebx, ebx
    mov     esi, msg

    push    esi
    call    printf
    add     esp, 4 
.DoStar:
    mov     byte [esi + ebx], 2Ah
    push    esi
    call    printf
    add     esp, 4 

    inc     ebx
    cmp     ebx, len
    jne     .DoStar
    ret 
```

# data-binding - 向火花组合框添加功能以实现更好的绑定

> ID：12504959
> 
> 赞同：1
> 
> 时间：2012-09-20T01:21:59.040
> 
> 标签：data-binding, drop-down-menu, actionscript, flex-spark

# 我尝试做的...

我正在尝试实现更高级的 dropDownList 组件。我添加了一个新属性 selectedValue，它基本上可以取任何值。目前，该组件仅尝试将 selectedValue 与 dataprovider 项的“id”进行匹配。当我调试样本时，它看起来不错，selectedIndex 是根据 selectedValue 设置的。

## 问题...

启动后 selectedItem 不会显示在 dropDownList 中，仅当我单击下拉按钮时才会出现。表示它已被选中但未在视图中显示。

***应用程序启动后...***

[点击查看图片](https://img.skitch.com/20120920-8ed5bej7dt1iu4mijxh2cfnnma.jpg)

***当我单击自定义组件上的箭头按钮时...***

[点击查看图片](https://img.skitch.com/20120920-raac6r5stqpin1cmcyjpsq3pfc.jpg)

***这是代码...***

主要的.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
     xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:components="ch.fa.ed.ui.components.*"
     width="100%" height="100%" >

<fx:Script>
    <![CDATA[

        import mx.collections.ArrayCollection;

        private var _dpList : ArrayCollection;

        public function get dpList() : ArrayCollection {
            if (_dpList == null) {
                _dpList = new ArrayCollection();

                // create items
                var person1 : Object = new Object();
                person1.id = 10;
                person1.name = "Bush";

                var person2 : Object = new Object();
                person2.id = 12;
                person2.name = "Obama";

                var person3 : Object = new Object();
                person3.id = 30;
                person3.name = "Clinton";

                _dpList.addItem(person1);
                _dpList.addItem(person2);
                _dpList.addItem(person3);
            }

            return _dpList;
        }

        public function set dpList(dpList : ArrayCollection) : void {
            _dpList = dpList;
        }
    ]]>
</fx:Script>
<s:VGroup>
    <s:DropDownList id="ddList" dataProvider="{dpList}" labelField="name" selectedIndex="2"/>
    <components:EdDropDownList id="ddList2" dataProvider="{dpList}" labelField="name" selectedValue="30"/>
</s:VGroup>
</s:Group> 
```

EdDrowDownList.as

```
package ch.fa.ed.ui.components {

import mx.collections.IList;

import spark.components.DropDownList;

/**
 * @author Michael Wittwer <michael.wittwer@falution.ch>
 * @date 20.09.2012
 */
public class EdDropDownList extends DropDownList {

    /* ******************************************************************************************************
     * fields                                                                                               *
     ****************************************************************************************************** */
    private var _selectedValue : *;

    /* ******************************************************************************************************
     * member variables                                                                                     *
     ****************************************************************************************************** */
    private var selectedValueChanged : Boolean;

    private var dataProviderChanged : Boolean;

    public function EdDropDownList() {
        super();
    }

    /*
     * overriding the commitProperties method to make sure the selectedValue field gets represented in ui
     */
    override protected function commitProperties() : void {
        super.commitProperties();

        if (selectedValueChanged && dataProviderChanged) {
            // find the item mathing selectedValue and set index
            if (selectedValue != null && dataProvider != null) {
                for (var i : int = 0; i < dataProvider.length; i++) {
                    var item : * = dataProvider.getItemAt(i);
                    if (item.id == selectedValue) {
                        selectedIndex = i;
                        break;
                    }
                }
            }

            dataProviderChanged = false;
            selectedValueChanged = false;
        }

        if (selectedValueChanged) {
            selectedValueChanged = false;

            // find the item mathing selectedValue and set index
            if (selectedValue != null && dataProvider != null) {
                for (var i : int = 0; i < dataProvider.length; i++) {
                    var item : * = dataProvider.getItemAt(i);
                    if (item.id == selectedValue) {
                        selectedIndex = i;
                        break;
                    }
                }
            }
        }

        if (dataProviderChanged) {
            dataProviderChanged = false;
            // find the item mathing selectedValue and set index
            if (selectedValue != null && dataProvider != null) {
                for (var i : int = 0; i < dataProvider.length; i++) {
                    var item : * = dataProvider.getItemAt(i);
                    if (item.id == selectedValue) {
                        selectedIndex = i;
                        break;
                    }
                }
            }
        }
    }

    /* ******************************************************************************************************
     * getter and setter methods                                                                            *
     ****************************************************************************************************** */
    [Bindable]
    public function get selectedValue() : * {
        return _selectedValue;
    }

    public function set selectedValue(selectedValue : *) : void {
        _selectedValue = selectedValue;
        selectedValueChanged = true;

        invalidateProperties();
    }

    [Bindable]
    override public function set dataProvider(value : IList) : void {
        super.dataProvider = value;
        dataProviderChanged = true;
        invalidateProperties();
    }
} 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T22:55:55.410

<s:ComboBox> 有几个错误，包括影响绑定的问题（如上面的主题中所述）和[自定义文本输入](https://issues.apache.org/jira/browse/FLEX-33684)。作为一种变通方法，有一个 ActionScript、Flex、仅 spark 组合框可以修复其中的许多问题，它可作为[开源](https://github.com/pdpsolutions/px/blob/master/visual/BindableComboBox.mxml).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:14:11.060

最终的解决方案非常简单。只需将 super.commitProperties(); 在重写 commitProperties() 方法的末尾。

这绝对有道理。因为我们在我们自己的 commitProperties() 中操作了一个属性（selectedIndex），该属性已经在 super 方法中处理过。因此，在下次调用 commitProperties() 之前，对 selectedIndex 的更新将不可见。

所以 commitProperties() 对于一个工作组件看起来像这样：

```
override protected function commitProperties() : void {
        if (selectedValueChanged && dataProviderChanged) {
            // find the item mathing selectedValue and set index
            updateSelectedIndex();

            dataProviderChanged = false;
            selectedValueChanged = false;
        }

        if (selectedValueChanged) {
            selectedValueChanged = false;

            // find the item mathing selectedValue and set index
            updateSelectedIndex();
        }

        if (dataProviderChanged) {
            dataProviderChanged = false;
            // find the item mathing selectedValue and set index
            updateSelectedIndex();
        }

        super.commitProperties();
    }

    private function updateSelectedIndex() : void {
        if (selectedValue != null && dataProvider != null) {
            for (var i : int = 0; i < dataProvider.length; i++) {
                var item : * = dataProvider.getItemAt(i);
                if (item.id == selectedValue) {
                    selectedIndex = i;
                    break;
                }
            }
        }
    } 
```

希望这可以帮助。

# javascript - 如何正确检测浏览器是否支持border-image？

> ID：12504962
> 
> 赞同：-1
> 
> 时间：2012-09-20T01:22:28.827
> 
> 标签：javascript, html, internet-explorer, cross-browser, browser-feature-detection

我制作了一个使用边框图像的 HTML 应用程序。

Chrome 总是自动更新，FireFox 从 3.5+ 开始支持 -moz-border-image。所以我认为可以肯定地说大多数 Chrome 和 FireFox 用户都可以享受这种效果。但对于 IE 用户，我也希望他们享受一种不那么令人愉快，但可以忍受的效果。

因此，我认为我需要一种正确的方法来查找浏览器是否支持使用 JavaScript 的边框图像并进行一些破解，但我不知道该怎么做。

参考： http: [//msdn.microsoft.com/en-us/magazine/hh475813.aspx](http://msdn.microsoft.com/en-us/magazine/hh475813.aspx)（特征检测）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:25:57.887

使用 Modernizr，您可以使用您需要检测的功能创建自己的自定义下载。[http://modernizr.com/download/](http://modernizr.com/download/)

# php - 循环内对象的php比较运算符

> ID：12504964
> 
> 赞同：2
> 
> 时间：2012-09-20T01:22:48.147
> 
> 标签：php, object, loops, comparison-operators

我在 php 中有两个包含自定义类对象的数组。一个我使用 $h 在 while 循环中迭代，另一个我通过 while 循环内的另一个变量 $i 访问以进行比较。如果满足某个条件，我只会在父循环中增加 $i ，并且数组中可能存在同一对象的多个副本，我需要跳过这些副本。

我的代码如下所示：

```
$h = 0;
$i = 0
$j = 10; // Number determined elsewhere but statically entered for example purposes

while ($h < $j)
{
    if ($audits[$i]->id == $auditIDs[$h])
    {
        // Do Stuff...

        do
        {
            $i++;
        } while ($audits[$i]->id == $audits[$i+1]->id);
    }
    else
    {
        // Do stuff...
    }
    $h++;
} 
```

如果我用 === 替换 == 比较运算符，它仍然会失败。但是，用一个简单的 IF 语句替换 do-while 循环是可行的。

```
if ($audits[$i]->id == $audits[$i+1]->id)
{
    $i++;
} 
```

但是该代码不允许数组中存在多个重复项，这可能会发生也可能不会发生，并且我必须在调用 if 语句之前手动增加 $i （如果前一个 if 必须至少增加一次）语句评估为真）。

任何人都可以对这种情况有所了解吗？感谢您的帮助！

```
class auditItem
{
    public $login;
    public $points;
    public $date;
    public $onTime;
    public $name;
    public $id;
    public $msg;

    function auditItem($login, $points, $date, $name, $id, $msg)
    {
        $this->login = $login;
        $this->points = $points;
        $this->date = $date;
        $this->name = $name;
        $this->id = $id;
        $this->msg = $msg;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:37:28.560

为什么不使用 while 循环而不是 do-while？在这种情况下，条件将首先在 $i=0 处进行评估，然后递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:31:20.563

在 PHP 中，do-while 循环具有特殊的行为。它与常规 while 循环的不同之处在于保证第一次迭代始终运行。在您的代码中， $i 在比较检查之前已经增加了 1，而在 if 语句中，它没有。

这就是我注意到的两个代码块的区别。您没有提供有关 $audits 数组的足够信息来提供可靠的解决方案。也许第二个索引超出范围？

# iphone - 似乎无法使用 NSArray 调用 NSInvocationOperation

> ID：12504965
> 
> 赞同：2
> 
> 时间：2012-09-20T01:22:51.833
> 
> 标签：iphone, uiimage, nsoperationqueue, nsinvocationoperation

我正在尝试从 url 在后台加载图像。如果我通过的只是 NSUrl，那么代码效果很好。如果我尝试传递带有其他变量的 NSArray，它永远不会被调用：

这段代码很好用，调用了 LoadImage2，而后者又很好地调用了 ImageLoaded2。

```
- (void)LoadBackgroundImage2: (char*)pImageURL
{

    NSString* pImageURLString = [NSString stringWithFormat:@"%s", pImageURL];

    NSLog( @"LoadBackgroundImage2: %@", pImageURLString );

    NSOperationQueue *queue = [NSOperationQueue new];
    NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                    initWithTarget:self
                                    selector:@selector(LoadImage2:)
                                    object:pImageURLString];
    [queue addOperation:operation];
    [operation release];
}

- (void)LoadImage2: (NSString*)pImageURL
{
    NSLog( @"LoadImage2: %@", pImageURL );

    NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:pImageURL]];
    UIImage* image = [[[UIImage alloc] initWithData:imageData] autorelease];
    [imageData release];
    [self performSelectorOnMainThread:@selector(ImageLoaded2:) withObject:image waitUntilDone:NO];
} 
```

此代码不起作用。LoadImage 永远不会被调用：

```
- (void)LoadBackgroundImage: (char*)pImageURL :(int)textureID :(int)textureType
{

    printf( "LoadBackgroundImage( %s, %d, %d)\n", pImageURL, textureID, textureType );

    NSString* pImageURLString = [NSString stringWithFormat:@"%s", pImageURL];

    NSArray* pUrlAndReferences = [[[NSArray alloc] initWithObjects: pImageURLString, textureID, textureType, nil] autorelease];

    NSOperationQueue *queue = [[NSOperationQueue new] autorelease];
    NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                    initWithTarget:self
                                    selector:@selector(LoadImage:)
                                    object:pUrlAndReferences];

    [queue addOperation:operation];
    [operation release];
}

- (void)LoadImage: (NSArray*)pUrlAndReferences
{
    NSString* pImageUrl = [pUrlAndReferences objectAtIndex: 0];
    int textureId = [ [ pUrlAndReferences objectAtIndex: 1 ] intValue ];
    int textureType = [ [ pUrlAndReferences objectAtIndex: 2 ] intValue ];

    NSLog( @"\n\nLoadImage: %@, %d, %d\n", pImageUrl, textureId, textureType );

    NSData* pImageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:pImageUrl]];
    UIImage* pImage = [[[UIImage alloc] initWithData:pImageData] autorelease];

    NSArray* pImageAndReferences = [[[NSArray alloc] initWithObjects: pImage, textureId, textureType, nil] autorelease];

    [pImageData release];
    [self performSelectorOnMainThread:@selector(ImageLoaded:) withObject:pImageAndReferences waitUntilDone:NO];
} 
```

任何人都知道为什么 LoadImage 没有被调用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:05:35.660

我的猜测是你没有保留你的队列。这是正在发生的事情

1.  您的数组（自动释放）进入`NSInvocationOperation`并被保留（没问题）
2.  你`NSInvocationOperation`进入队列（保留），然后它被释放。这里没问题，因为保留计数仍然是 1：1 ( `alloc`) + 1 ( `retain`) - 1 ( `release`) = 1 = 未释放。
3.  您的队列已分配（`new`= `alloc`+ `init`），然后自动释放，但它没有保留在其他地方。问题来了：因为你已经自动释放了队列，一旦方法`LoadBackgroundImage`完成，队列的保留计数为 0，它会自动释放，因此，你的 Invocation 将不会被执行。

您可以通过`autorelease`从队列中删除呼叫来尝试是否存在问题。如果我是正确的，您的代码应该可以工作。但请注意，这不是一个好的解决方案，因为您正在失去记忆。这只是看看它是否有效。

您绝对应该创建一个类、一个单例、一个实例变量或任何您喜欢保留该队列实例的东西。此外，最好只为所有`LoadBackgroundImage`呼叫设置一个队列，而不是每次都创建一个新队列。

# javascript - KO Grid 能够看到数组，但无法显示真实网格

> ID：12504966
> 
> 赞同：0
> 
> 时间：2012-09-20T01:22:54.830
> 
> 标签：javascript, jquery, knockout.js

我正在尝试使用 KnockOut Grid 来填充一些数据。它可以很好地绑定到 ObservableArray，但它没有填充网格。

我不确定我在这里错过了什么。

我正在加载jsfiddle给你看看：http://jsfiddle.net/sf4p3/6/

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:52:56.290

干得好：

[http://jsfiddle.net/jearles/sf4p3/14/](http://jsfiddle.net/jearles/sf4p3/14/)

我更改`data: myObsArray()`为`data: myObsArray`，添加对 Knockout 作为托管资源的引用并将框架切换为 jQuery，并添加了 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:27:43.703

你需要 jquery 来让网格工作你的小提琴没有 jquery

# java - 垃圾回收中的连锁反应

> ID：12504968
> 
> 赞同：2
> 
> 时间：2012-09-20T01:23:38.310
> 
> 标签：java, garbage-collection

我在 Java 中有一个非常基本的问题。我到处搜索，但在任何地方都找不到解决方案。

我正在尝试阅读有关删除二叉树的信息。在深入研究 DFS、BFS 等之前，我在想，如果我只是释放对树根的所有活动引用，整个树应该会自动进行 GC。我的意思是，如果我只是删除对根的唯一活动引用，那么根必须得到 GC，因此，没有更多对根的子节点的活动引用，它们应该得到 GC。这必须继续作为连锁反应，直到整个树被 GCed。我的分析是对还是错？

**假设**：所有节点仅由其父节点引用，其他任何节点均未引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:28:39.863

一般来说，你是对的。那*可能会*发生。

然而，在特定意义上，大多数垃圾收集器并不是这样工作的。当您删除指向树根的最后一个链接时，GC 不会立即启动。相反，它会等到它是一个好的（例如有效的）运行时间。然后它跟踪所有仍然可以访问的对象（即不是垃圾），处理它们，然后回收其余的。（事实上​​，对于最好的垃圾收集器来说，“回收其余部分”的过程非常便宜。）

对此的例外是引用计数（所谓的）垃圾收集器，其中删除最后一个引用确实会触发立即级联删除。但是在主流垃圾收集语言中没有使用引用计数，因为它很慢并且因为它不能使用循环回收数据结构。当然，我从来没有遇到过使用引用计数来进行垃圾收集的 Java 实现。

# ruby-on-rails - Rails 3：使用选项和值的散列进行字段选择

> ID：12504970
> 
> 赞同：0
> 
> 时间：2012-09-20T01:23:48.587
> 
> 标签：ruby-on-rails

我想将此哈希用作 f.select 的文本和值列表

控制器

```
@asset_status_options = [ { "New - Ordered"    => "0"  },
                          { "New - On Site"    => "10" },
                          { "New - Tested"     => "99" },
                          { "Used - Ordered"   => "1"  },
                          { "Used - On Site"   => "11" },
                          { "Used - Torn Down" => "25" },
                          { "Used - Rebuilt"   => "76" },
                          { "Used - Tested"    => "100"}] 
```

看法

```
<%= m.select :status, options_for_select(@asset_status_options,"") %> 
```

下拉的结果是：

```
 { "New - Ordered"    => "0"  }
 { "New - On Site"    => "10" }
 { "New - Tested"     => "99" }
 { "Used - Ordered"   => "1"  }
 { "Used - On Site"   => "11" }
 { "Used - Torn Down" => "25" }
 { "Used - Rebuilt"   => "76" }
 { "Used - Tested"    => "100"} 
```

我正在寻找值 0 和 New - Ordered 等文本。

我觉得很简单，但我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:31:38.287

您需要：

```
@asset_status_options = { "New - Ordered"    => "0",
                          "New - On Site"    => "10",
                          "New - Tested"     => "99",
                          "Used - Ordered"   => "1",
                          "Used - On Site"   => "11",
                          "Used - Torn Down" => "25",
                          "Used - Rebuilt"   => "76",
                          "Used - Tested"    => "100" } 
```

或者：

```
@asset_status_options = [ ["New - Ordered",    "0"],
                          ["New - On Site",    "10"],
                          ["New - Tested",     "99"],
                          ["Used - Ordered",   "1"],
                          ["Used - On Site",   "11"],
                          ["Used - Torn Down", "25"],
                          ["Used - Rebuilt",   "76"],
                          ["Used - Tested",    "100"] ] 
```

有关详细信息，请参阅[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)。

# android - How to pass data from AsyncTask to Ui Thread

> ID：12504975
> 
> 赞同：5
> 
> 时间：2012-09-20T01:24:08.677
> 
> 标签：android, android-asynctask

I'm implementing an `asyncTask` class to load the data from server. I have the data already and I want to pass it to the UI Thread, but I don't know how.

This is the code:

```
public class InboxHandler extends FragmentActivity implements OnLineSelectedListener {

    static final int GET_CODE = 0;
    private TextView textView3, textView2;
    private Button button1, button2, button3;
    private LinearLayout tab1, tab2, tab3;
    private CheckBox cbVerPorCategoria;
    private ActionBar actionBar;
    private TextView txtTitle;
    private Settings settings;
    FragmentTransaction fragmentTransaction;
    BottomPanel bottomPanel;
    public List<OrderRequest> orderRequestArray;
    private OrderRequestParser orderRequestParser;
    public static int number;
    int clickCounter = 0;
    private boolean doubleBackToExitPressedOnce = false;
    private static Context context;
    DataLoader dataLoader;
    private MyAsynckTask myAsynckTask;

    public InboxHandler(){}

    public List<OrderRequest> getOrderRequestArray() {
        return orderRequestArray;
    }

    public void setOrderRequestArray(List<OrderRequest> orderRequestArray) {
        this.orderRequestArray = orderRequestArray;
    }

    public static Context getContext()
    {
        return context;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_inbox);

        context = this.getApplicationContext();

        settings = Settings.getInstance();
        settings.setPrefs(getSharedPreferences(settings.getPREFERENCES(), Activity.MODE_PRIVATE));
        settings.setPrefsEditor(settings.getPrefs().edit());        
        settings.getPrefsEditor().putBoolean("isLoggedIn", true);
        settings.isVistaSimple = true;

        actionBar = (ActionBar) findViewById(R.id.actionbar);

        initComponents();
        prepareActionBar();
    }

    private void initComponents() {

        try {
            MyAsynckTask myAsynckTask = new MyAsynckTask(this); 
            myAsynckTask.execute(); 

            //HERE I USED A SUGGESTION IN A SIMILAR QUESTION. THAT IS: PASS THE ACTIVITY TO THE ASYNCTASK, AND FROM IT, SAVE IN THE ACTIVITY, THE DATA THAT IU WANT FROM THE ASYNCTASK. I DO THAT, BUT IN THE ACTIVITY, THE DATA IS NULL I SUPPOSE DUE TO, I DONT EVEN SEE IN THE LOGCAT,  THE FOLLOWING RESULT:

            try{
                Log.e("e", ""+this.getOrderRequestArray().get(0).getDocNumber());
            } catch(Exception e){
                e.printStackTrace();
            }

//If you see the onPostExecute, I test if the data I want is there. and it is there! I set that to the list of the class InboxHandler, but in the above code, when i try to test if it is there, it´s not. And that code don´t even appear in logcat. The "Log.e("e", ""+this.getOrderRequestArray().get(0).getDocNumber());" nor the "e.printStackTrace();"

            bottomPanel =new BottomPanel();
            Bundle bundle = new Bundle();
            bundle.putSerializable("arrayPedidos", (Serializable) orderRequestArray);
            bottomPanel.setArguments(bundle);

            //actionBar.setTitle("Inbox");
            NotificationFragment notificationFragment = new NotificationFragment(orderRequestArray, actionBar);

            Bundle bundleNotificationFragment = new Bundle();
            bundleNotificationFragment.putString("title", "Inbox");
            notificationFragment.setArguments(bundleNotificationFragment);

            fragmentTransaction = getSupportFragmentManager().beginTransaction();
            fragmentTransaction.add(R.id.frame_list_container, notificationFragment);
            fragmentTransaction.add(R.id.frame_bottom_panel, bottomPanel);      
            fragmentTransaction.commit();

        } 
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }

    private class MyAsynckTask extends AsyncTask {

        private String stringMensaje;
        public List<OrderRequest> orderRequestArray;
        private OrderRequestParser orderRequestParser;
        private Request request;
        private Settings settings;
        private InboxHandler inboxHandler;

        public MyAsynckTask(InboxHandler inboxHandler){
            this.inboxHandler = inboxHandler;
        }

        @Override
        protected Object doInBackground(Object... params) {

            List<OrderRequest> array = this.getOrderRequests();
            settings = Settings.getInstance();

            if(array != null){
                settings.setOrderRequestArray(array); 
                orderRequestArray = array;
                Log.e("orderRequestArray", "Me trajo el orderRequestArray en doInBackground!");
            } else {
                Log.e("orderRequestArray", "No me trajo el orderRequestArray en doInBackground!");
            }

            return array;

        }

        @Override
        protected void onPostExecute(Object result) {
            super.onPostExecute(result);

            List<OrderRequest> array = (List<OrderRequest>) result;

            this.setOrderRequestArray(array);

            if(orderRequestArray != null){
                inboxHandler.setOrderRequestArray(orderRequestArray);
                Log.e("orderRequestArray", "is not null en onPostExecute!");
            } else {
                Log.e("orderRequestArray", "is null en onPostExecute!");
            }

            if(inboxHandler.getOrderRequestArray() != null){
                Log.e("inboxHandler.getOrderRequestArray()", "is not null en onPostExecute!");
            }
            else {
                Log.e("orderRequestArray", "is null en onPostExecute!");
            }
        }

        public List<OrderRequest> getOrderRequests() {

            orderRequestParser = new OrderRequestParser();
            orderRequestArray = new ArrayList<OrderRequest>();
            List<OrderRequest> orderRequestArray = orderRequestParser.listOrderRequest();

            Settings.getInstance().setOrderRequestArray(orderRequestArray);
            if(orderRequestArray != null){
                Log.e("orderRequestArray", "Me trajo el orderRequestArray en getOrderRequestArray!");
            } else {
                Log.e("orderRequestArray", "No me trajo el orderRequestArray en getOrderRequestArray!");
            }

            return orderRequestArray;

        }

        public void setOrderRequestArray(List<OrderRequest> orderRequestArray) {
            this.orderRequestArray = orderRequestArray;
        }

        public List<OrderRequest> getOrderRequestArray() {
            return orderRequestArray;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:28:56.460

```
protected void onPostExecute(Object result) 
```

it is running in GUI thread, you can access GUI elements there.

and only there should be the:

```
 try{
            Log.e("e", ""+this.getOrderRequestArray().get(0).getDocNumber());
        } catch(Exception e){
            e.printStackTrace();
        } 
```

and

```
 Bundle bundle = new Bundle();
    bundle.putSerializable("arrayPedidos", (Serializable) orderRequestArray);
    bottomPanel.setArguments(bundle); 
```

I can't see any reason, why is this question down voted.

# python - 在对 pandas DataFrame 中的列进行 .str.split() 操作后获取最后一个“列”

> ID：12504976
> 
> 赞同：108
> 
> 时间：2012-09-20T01:24:57.557
> 
> 标签：python, string, pandas, split

我在 pandas DataFrame 中有一个列，我想将其拆分为一个空格。拆分很简单`DataFrame.str.split(' ')`，但我不能从最后一个条目创建一个新列。当我`.str.split()`列时，我得到一个数组列表，但我不知道如何操作它来为我的 DataFrame 获取一个新列。

这是一个例子。列中的每个条目都包含“符号数据价格”，我想拆分价格（最终在一半的情况下删除“p”...或“c”）。

```
import pandas as pd
temp = pd.DataFrame({'ticker' : ['spx 5/25/2001 p500', 'spx 5/25/2001 p600', 'spx 5/25/2001 p700']})
temp2 = temp.ticker.str.split(' ') 
```

产生

```
0    ['spx', '5/25/2001', 'p500']
1    ['spx', '5/25/2001', 'p600']
2    ['spx', '5/25/2001', 'p700'] 
```

但`temp2[0]`只给出一个列表条目的数组并`temp2[:][-1]`失败。如何将每个数组中的最后一个条目转换为新列？谢谢！

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-10-24T16:13:48.523

Do this:

```
In [43]: temp2.str[-1]
Out[43]: 
0    p500
1    p600
2    p700
Name: ticker 
```

So all together it would be:

```
>>> temp = pd.DataFrame({'ticker' : ['spx 5/25/2001 p500', 'spx 5/25/2001 p600', 'spx 5/25/2001 p700']})
>>> temp['ticker'].str.split(' ').str[-1]
0    p500
1    p600
2    p700
Name: ticker, dtype: object 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-09-20T01:43:43.317

您可以使用该`tolist`方法作为中介：

```
In [99]: import pandas as pd

In [100]: d1 = pd.DataFrame({'ticker' : ['spx 5/25/2001 p500', 'spx 5/25/2001 p600', 'spx 5/25/2001 p700']})

In [101]: d1.ticker.str.split().tolist()
Out[101]: 
[['spx', '5/25/2001', 'p500'],
 ['spx', '5/25/2001', 'p600'],
 ['spx', '5/25/2001', 'p700']] 
```

您可以从中创建一个新的 DataFrame：

```
In [102]: d2 = pd.DataFrame(d1.ticker.str.split().tolist(), 
   .....:                   columns="symbol date price".split())

In [103]: d2
Out[103]: 
  symbol       date price
0    spx  5/25/2001  p500
1    spx  5/25/2001  p600
2    spx  5/25/2001  p700 
```

为了更好地衡量，您可以固定价格：

```
In [104]: d2["price"] = d2["price"].str.replace("p","").astype(float)

In [105]: d2
Out[105]: 
  symbol       date  price
0    spx  5/25/2001    500
1    spx  5/25/2001    600
2    spx  5/25/2001    700 
```

PS：但如果你*真的*只想要最后一列，`apply`就足够了：

```
In [113]: temp2.apply(lambda x: x[2])
Out[113]: 
0    p500
1    p600
2    p700
Name: ticker 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-07-07T17:52:33.223

[https://pandas.pydata.org/pandas-docs/stable/text.html](https://pandas.pydata.org/pandas-docs/stable/text.html)

```
s2 = pd.Series(['a_b_c', 'c_d_e', np.nan, 'f_g_h'])
s2.str.split('_').str.get(1) 
```

或者

```
s2.str.split('_').str[1] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-13T17:12:15.873

使用熊猫 0.20.3：

```
In [10]: import pandas as pd
    ...: temp = pd.DataFrame({'ticker' : ['spx 5/25/2001 p500', 'spx 5/25/2001 p600', 'spx 5/25/2001 p700']})
    ...:

In [11]: temp2 = temp.ticker.str.split(' ', expand=True)  # the expand=True return a DataFrame

In [12]: temp2
Out[12]:
     0          1     2
0  spx  5/25/2001  p500
1  spx  5/25/2001  p600
2  spx  5/25/2001  p700

In [13]: temp3 = temp.join(temp2[2])

In [14]: temp3
Out[14]:
               ticker     2
0  spx 5/25/2001 p500  p500
1  spx 5/25/2001 p600  p600
2  spx 5/25/2001 p700  p700 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-25T14:22:22.743

如果您正在寻找单线（就像我来这里），这应该很好：

```
temp2 = temp.ticker.str.split(' ', expand = True)[-1] 
```

您还可以简单地修改此答案以将此列分配回原始 DataFrame，如下所示：

```
temp['last_split'] = temp.ticker.str.split(' ', expand = True)[-1] 
```

我想这是一个流行的用例。

# html - Div 中的 Div

> ID：12504977
> 
> 赞同：0
> 
> 时间：2012-09-20T01:25:11.550
> 
> 标签：html

我遇到了这个问题，我在 div 中放置了一个 div，我将“标题”定位为高度 50，然后将“导航栏”置于其下方，所以我将高度设置为 100%，尽管事情是，它没有停留在 div 内，它实际上偏离了 div 并离开了 div 并出现了滚动条。

我希望“站点”占用墙壁，然后所有其他 div 都适合该 div。

```
 <div id="site">
        <div id="title">TitleBar</div>
        <div id="navbar">NavBar</div>
        <div id="frame">FrameBar</div>
    </div>
body{
    margin: 0;
}
#site{
position:absolute;
width: 100%;
height: 100%;
*border: 1px solid #333;
}
#title{
border: 1px solid #333;
height: 50;
}
#navbar{
border: 1px solid #c38a8a;
width: 200;
height: 100%;
} 
```

我发现了一张显示类似内容的图像。 [http://img176.imageshack.us/img176/4637/picture1zb1.png](http://img176.imageshack.us/img176/4637/picture1zb1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:40:40.463

您可以通过向 css 添加 float 属性来使 HTML 中的分区彼此并排显示。

```
#navbar{
    border: 1px solid #c38a8a;
    width: 200px;
    height: 100%;
    float: left;
} 
```

此外，始终在大小后添加“px”单位。现代浏览器假定您的意思是 px，但较旧的浏览器可能不是。

当您有一个设置像素宽度的侧边栏时，没有防止重叠的好方法。要实现液体宽度（或流体宽度）样式，您必须在 #frame 左侧添加负 200px 边距（到计数器侧边栏）。然后，在#frame 中添加另一个分区来为该部分设置样式。这就是我在我的网站上实现外观的方式，这也是之前默认 Drupal 主题（Garland）中使用的解决方案。

```
#frame{
    margin-left: -200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:15:29.387

那是因为 100% 高度实际上意味着“使用与容器相同的高度”。

但是我并没有完全得到你对这个布局的所有要求，如果你的导航栏是一个导航栏，它应该被设计成当内容太大时允许滚动条出现。

但我认为你会用错误的结构来完成这个，你想要一个包装器 div 有什么实际原因吗？我已经为此创建了一个小提琴，检查这是否更接近你想要的：http: [//jsfiddle.net/6g6HV/2/](http://jsfiddle.net/6g6HV/2/)

这另一个是你的，如果你想玩它：http: [//jsfiddle.net/yq8PS/3/](http://jsfiddle.net/yq8PS/3/)

编辑：将 javascript 解决方案添加到答案[http://jsfiddle.net/6g6HV/9](http://jsfiddle.net/6g6HV/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:04:44.300

在这种情况下，导航栏的 100% 并不意味着剩余高度，而是父级可见高度的 100%；因此，如果父级的高度为 400 像素，那么导航栏的高度也将为 400 像素。如果将此大小添加到标题栏的高度，则得到的总值大于父级的大小；因此，scolling bar 的出现。

虽然宽度通常没有问题，使其看起来充满了屏幕的整个长度，但在 HTML 和 CSS 中很难对高度做同样的事情，因为它们不是为这类事情而设计的；尤其是具有叠瓦状结构（div 内的 div）。

有些人会使用 Javascript 来获取屏幕（浏览器）的大小并相应地计算其对象的大小，但我不知道您是否可以使用纯 HTML/CSS 解决方案来做同样的事情；特别是如果您想让您的解决方案与许多浏览器兼容。

有关更多信息，请查看[http://www.tutwow.com/htmlcss/quick-tip-css-100-height/](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)

# mediaelement.js - 如何在现场播放时检索 HTML5 音频播放器的当前时间？（媒体元素.js）

> ID：12504982
> 
> 赞同：2
> 
> 时间：2012-09-20T01:25:46.077
> 
> 标签：mediaelement.js

我在网站上使用 HTML5 音频标签。我需要在播放曲目时拉出当前时间，最好以秒为单位。最终，我将需要利用这段时间与页面上的其他元素进行交互，但似乎无法弄清楚如何在曲目播放时实时检索当前时间。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:00:36.603

您需要向音频播放器添加一个事件侦听器。这些事件都列在这里[http://www.w3schools.com/html5/html5_ref_eventattributes.asp](http://www.w3schools.com/html5/html5_ref_eventattributes.asp)在“媒体事件”下。创建 MediaElement 播放器时，您可以在“成功”功能下添加事件监听器。

使用此方法可确保它也适用于 Flash 后备。

```
mediaElement = new MediaElementPlayer('audio',{
//options etc

// method that fires when the Flash or Silverlight object is ready
success: function (mediaElement, domObject) {   

   // add event listeners
   mediaElement.addEventListener('timeupdate', function(e) {
       onVideoTimeUpdate(e);
   }, false);

   mediaElement.addEventListener('pause', function(e) {
       onVideoPaused(e);
   }, false);

   mediaElement.addEventListener('play', function(e) {
       onVideoPlayed(e);
   }, false);

   //etc
}

function onVideoTimeUpdate(e){
    //something to do on the time update event
} 
```

如果您只是使用 HTML5 音频标签，您可以像这样添加事件侦听器

```
myaudio=document.getElementById("audio1");
myaudio.addEventListener("timeupdate", function(e)
  {
     //something to do on the time update event
   }
); 
```

# sql - 如何从varchar中获取最后四个字符？

> ID：12504985
> 
> 赞同：116
> 
> 时间：2012-09-20T01:25:56.013
> 
> 标签：sql, sql-server-2008, tsql

我试图仅从 varchar 字段中获取最后四个字符。所有的行都是不同的长度。我应该使用什么功能来完成这个？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-09-20T01:27:21.363

正确应该这样做：

```
select RIGHT('abcdeffff',4) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-04-07T11:46:19.660

```
SUBSTR(column, LENGTH(column) - 3, 4) 
```

`LENGTH`返回字符串的长度并`SUBSTR`从“位置长度 - 4”返回 4 个字符

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-20T01:28:03.093

[`RIGHT ( character_expression , integer_expression )`](http://msdn.microsoft.com/en-us/library/ms177532.aspx)

```
SELECT RIGHT(column, 4) FROM ... 
```

还有其他[字符串函数](http://msdn.microsoft.com/en-us/library/ms181984.aspx)的列表。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-09-20T01:27:51.233

使用`RIGHT()`函数： http: [//msdn.microsoft.com/en-us/library/ms177532 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177532(v=sql.105).aspx)

```
SELECT RIGHT( '1234567890', 4 ); -- returns '7890' 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-02-07T00:07:55.810

对于 Oracle SQL，`SUBSTR(column_name, -# of characters requested)`将提取给定查询的最后三个字符。**例如**

```
SELECT SUBSTR(description,-3) FROM student.course; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-31T07:30:17.620

### 您可以选择最后一个字符`-`

```
WHERE SUBSTR('Hello world', -4) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-09-22T09:23:01.243

我在 SQL Server 中使用了 RIGHT 函数，它正在工作。

```
SELECT RIGHT( your_column_name, 4 ); 
```

--它将显示最后4位/字符

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2020-05-30T14:00:50.940

在hackerrank上测试过的解决方案......

```
select distinct(city) from station
where substr(lower(city), length(city), 1) in ('a', 'e', 'i', 'o', 'u') and substr(lower(city), 1, 1) in ('a', 'e', 'i', 'o', 'u'); 
```

# php - 防止用户在 Javascript 中直接查看 PHP url

> ID：12504988
> 
> 赞同：1
> 
> 时间：2012-09-20T01:26:39.603
> 
> 标签：php, javascript

我想阻止用户在 Javascript 中直接看到 PHP URL。例子 ：

```
{
$.ajax(
{
    type: "POST",
    url: "search.php",
    data: dataString,
    cache: false,
    success: function(html)
    {
        $("#display").html(html).show();
    }
});
}return false; 
```

是否有可能或以任何方式阻止用户在查看我的页面源时看到 php URL？有时用户可能会尝试直接打开 php url。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:32:05.667

我（或任何客户）仍然可以使用任何数量的工具来解决这个问题（包括 99% 构建的浏览器中的内置调试器）——不值得混淆它。

如果您担心直接访问，请检查脚本中[的 AJAX 请求](http://davidwalsh.name/detect-ajax)。（仍然可以破解，但这是一个开始）。正如[之前的答案](https://stackoverflow.com/a/4929440/298053)中所提供的：

```
<?php

  $isAjax = isset($_SERVER['HTTP_X_REQUESTED_WITH'])
         && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest';
  if (!$isAjax) die('Unauthorized access');

  /* rest of search.php */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:38:18.273

好吧，把事情说清楚..

1.  一旦它在客户端（浏览器）上，您就无法隐藏它。用户仍然可以在客户端返回下载或查看源代码。
2.  混淆并不是真正需要的，因为你只是让事情变得复杂而不保护任何东西。
3.  但是任何服务器端代码（PHP）都不会显示，因为它是由服务器端处理的，服务器只返回服务器端代码的执行结果。

如果您遇到问题，您可以做的是检查 $_POST 和 $_GET 参数在到达您的 PHP 代码时是否有效，从而使每个 POST 和 GET 请求都有效且安全。它有点像这样

```
<?php
  if(isset($_POST['username']) && isset($_POST['password'])){
    //everything seems fine
    echo 'ok';
  }
  else{
  //someone is doing a direct acess
     header('index.php');
  }
?> 
```

或检查会话以仅为登录用户保护您的页面

```
 <?php
      if(isset($_SESSION['userid'])){
        //everything seems fine
        echo 'ok';
      }
      else{
      //someone is doing a direct acess
         header('index.php');
      }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T01:43:34.320

正如评论中所说，

> 我们如何防止用户直接打开 PHP url？

您应该在 php 中创建一个非常长的随机字符串（令牌）的会话并将其传递给 js ajax 函数，以便它将令牌与 ajax 请求一起发送。在服务器端，您可以检查是否生成了相同的令牌。您可能希望尽快使令牌过期。

我不知道，如果它是标准方式，但可以为您提供一个开始。

# ember.js - 如何使用 ember.js 创建一个指向具有文本值的路由的操作助手

> ID：12504990
> 
> 赞同：1
> 
> 时间：2012-09-20T01:26:59.113
> 
> 标签：ember.js, handlebars.js, ember-old-router

我正在使用 ember pre 1.0 编写一个简单的排序/分页控制器。当用户单击表格上的列标题时，我想更改控制器上的排序属性。我有一个简单的动作助手，它指向我的路由器 sortUser 方法，但我似乎无法传递路由可以用作参数的原始字符串，例如“用户名”或“id”

我的网址也似乎坏了（获取此网址）

```
http://localhost:8000/#/sort/undefined 
```

代替

```
http://localhost:8000/#/sort/username 
```

先感谢您

```
<table width="250px">
<thead>
<th><a {{action sortUsers "id" href=true}}>id</th>                                        
<th><a {{action sortUsers "username" href=true}}>username</th>
<th>update</th>
<th>delete</th>
</thead>
<tbody> 
```

这是我的路由器（消除了一些复杂性，但它是嵌套路由）

```
PersonApp.Router = Ember.Router.create({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      paginateUsers: Ember.Route.transitionTo('paginated'),
      sortUsers: Ember.Route.transitionTo('index.sort.index'),
      connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('person', router.get('store').findAll(PersonApp.Person));
      },
      index: Ember.Route.extend({
        route: '/'
      }),
      paginated: Ember.Route.extend({
        route: '/page/:page_id',

        connectOutlets: function(router, context) {
          router.get('personController').set('selectedPage', context.page_id);
        },

        exit: function(router) {
          router.get('personController').set('selectedPage', undefined);
        }
      }),
      sort: Ember.Route.extend({
        route: '/sort/:column',

        serialize: function(router, context) {
          if (context) { return { sort: context.sort } }
          return {sort: undefined}
        },

        deserialize: function(router, context) {
          return { sort: context.column }
        },

        connectOutlets: function(router, context) {
          router.set('personController.sortProperties', ['username']);
          router.get('personController').set('selectedPage', 1);
        }, 
```

**更新**

我现在有一个完整的[jsfiddle](http://jsfiddle.net/Rf3h8/)（沿着侧过滤器+分页排序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:51:46.340

我认为您可能有两个可能导致您的问题的较小问题的组合。

1.  您的 sortUsers 操作指向您的排序路径下的索引路径。我在您包含的代码中没有看到这样的路线。我只看到一个 sort/:column 路由。

    我昨天在获得与此工作类似的路线时遇到了问题，最终得到了类似以下的内容来获得正确的“上下文”。我完全不确定你是否应该这样做，但它让事情对我有用。

    ```
    sortUsers: function(router, event) {
      // you can now also console.log here as suggested by sly7_7
      router.transitionTo('index.sort', event.context);
    }, 
    ```

2.  您的序列化/反序列化方法看起来不正确。它们可能很好，但从我的外部角度来看，它们看起来很破碎。序列化应该将您拥有的任何内容作为“上下文”并将其转换为 url 参数。反序列化应该做相反的事情，并返回与序列化作为输入得到的完全相同的结果。

    ```
    serialize: function(router, context) {
      return {
        column: context // you are passing a string so let's just put that in the url as is 
      }
    },
    deserialize: function(router, urlParams) {
      return urlParams.column; // just return the straight string from the url
    } 
    ```

我可能遗漏了一些细节，但这看起来像是一些可能使您的过渡运行的更改。

另外，请确保您要求路由器记录它在做什么......然后您还可以更好地跟踪您的进度。**启用记录：真**

# c++ - 通过 void 指针修改结构的内容

> ID：12504991
> 
> 赞同：2
> 
> 时间：2012-09-20T01:27:02.457
> 
> 标签：c++, pointers, struct, void

请注意，我 95% 不熟悉指针。

所以这是我的困境，我有一个结构让我们称之为`foo`

```
struct foo{
int a;
} 
```

所以让我们创建一个 foo 的实例

```
foo test; 
```

现在我想分配一个 void 指针指向这个

```
 void *ptest;
 ptest = &test; 
```

这一切都很好，但是当涉及到修改内容（即 int a within foo）时，我不知道如何处理这个问题。我试过`static_cast`这样：

```
static_cast<foo*>(ptest).a=0; 
```

但这也没有用。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:28:25.813

您只需更换 . 与->

直接处理对象或对象的引用时使用点运算符，通过指针处理对象时使用 -> 运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:28:43.330

您将其转换为指针，因此您需要使用运算符取消引用它`*`或使用`->`运算符。

选项 A：

```
*(static_cast<foo*>(ptest)).a=0 
```

选项 B：

```
static_cast<foo*>(ptest)->a=0 
```

# regex - 帮助将 Apache 重写规则转换为 PHP 正则表达式

> ID：12504995
> 
> 赞同：0
> 
> 时间：2012-09-19T21:59:55.590
> 
> 标签：regex

短篇小说：我正在使用这种技术通过使用 filemtime() 在文件名中添加一个字符串来自动版本化我的 css 和 js 文件： [http ://w-shadow.com/blog/2012/07/30/automatic-versioning -of-css-js/](http://w-shadow.com/blog/2012/07/30/automatic-versioning-of-css-js/)

我在我的本地机器（MAMP）上启动并完美运行，但我使用 WP Engine 进行托管，它们是在 nginx 上设置的，不支持 .htaccess 重写规则。

不过，它们确实有输入 PHP 正则表达式 (preg_replace) 的地方，它们的指令如下所示：

> HTML 后处理
> PHP 正则表达式到替换值的映射，在 WordPress 完成发出整个页面后在所有博客 HTML 上执行。模式和替换行为采用 preg_replace() 的方式。
> 
> 以下示例删除了第一个模式中的所有 HTML 注释，并导致在第二个模式中从另一个域加载一个 favicon（具有任何文件扩展名）：
> 
> `#<!--.*?-->#s =>`
> 
> `#\bsrc="/(favicon\..*)"# => src="http://mycdn.somewhere.com/$1"`

. 所以我想知道将这个重写规则转换为 PHP 正则表达式有多难：

`RewriteRule ^(.*)\.[\d]{10}\.(css|js)$ $1.$2 [L]`

如果这甚至与 apache 重写做同样的事情。该技术的重点是破坏 css 或 js 文件的浏览器缓存以及更改它们的时间，但不求助于具有各种缺点的查询字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:36:39.667

实际上，它几乎是一样的。使用您的正则表达式，对其进行分隔，将其放入字符串中并转义正确的内容，然后使用您的重写规则并使用单引号将其变为字符串，您就完成了。在您的示例中：

```
$newUrl = preg_replace('/^(.*)\\.[\\d]{10}\\.(css|js)$/', '$1.$2', $url); 
```

这将正确地重写你给它的任何 url。然而，听起来这些 preg_replaces 是在一个大文档中完成的，这意味着你的正则表达式不会做你认为的那样。然而，这是一个完全独立的问题。我什至不会猜测，因为我不知道您的要求是什么。如果您在制作正则表达式时需要帮助，请根据您的具体要求打开另一个问题。

另外：下次，[检查文档。](http://php.net/manual/en/function.preg-replace.php)