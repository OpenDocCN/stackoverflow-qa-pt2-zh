# StackOverflow 问答 16066000-16066999

# javascript - 具有从不同域重定向到相同域的 iframe 当前 src

> ID：16066000
> 
> 赞同：0
> 
> 时间：2013-04-17T17:05:40.543
> 
> 标签：javascript, iframe, cross-domain

我有一个来自 a.com 的页面，其中包含来自 b.com 的 iframe，经过一些操作，b.com 最终将 iframe 重定向回 a.com。那么页面可以访问iframe的当前位置/src吗？

问候，

吉什努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:49:36.477

一旦 iframe 中的页面在 a.com 上，安全限制就会解除，您可以像往常一样访问父页面。更改 iframe src 时会更新安全限制，即使它是由 iframe 本身更改的。

如果您需要知道 iframe 何时最终定向回 a.com，您可以让它调用父文档中的函数，`window.parent.redirected()`其中`redirected()`是您在 a.com 的父文档中定义的函数。

# regex - How-to Use Regex to locate _[a-z] and Replace with just the capital letter of the lower case letter

> ID：16066002
> 
> 赞同：1
> 
> 时间：2013-04-17T17:06:06.487
> 
> 标签：regex, replace, find

I've inherited a bunch of C++ files that need to have function and variable names changed to meet our new C++ coding 'standards'.

Like all C/C++ code, there are variables/functions such as my_new_function or My_Newer_Function...

The Java folks have forced a camel cap style on us, so what I want to do is search for any underscore and make the next letter capitalized and have the underscore removed, that is:

my_new_function becomes myNewFunction

and

My_Newer_Function becomes MyNewerFunction

also, if the name has a number in it such as my_8th, it just removes the '_' to become my8th. This should probably be a separate regex.

I have some general knowledge of regex but this one has stumped me.. and with so many files and so little time, I have come to the beneficent gathering of the members of SO for help.

Thank you in advance.

Yes, I know, I should make the Java folks do this, but I just work here...

;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:13:13.657

You can do:

```
sed -r 's/_([a-z])/\U\1/g' file 
```

[See it](http://ideone.com/HyzRHi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:53:57.270

In my experience, if you try to change your code massively with a single command you risk to find exceptions (e.g., quoted text).

I suggest you to build a shell:

```
1\. for each file
2\.    get the names of variables/functions 
3\.    for each name apply the sed command to get its new-name
4\.       on the fly build a sed command to replace exactly each name with the new-name in the the file 
```

…costly but secure…</p>

# android - OSMDroid GPS 跟踪和覆盖轨迹

> ID：16066003
> 
> 赞同：0
> 
> 时间：2013-04-17T17:06:14.560
> 
> 标签：android, gps, overlay, tracking, osmdroid

我正在使用 osmdroid 地图制作 GPS 跟踪应用程序。我有一项服务可以跟踪 gps 数据并将其存储在 sqlite 数据库中。该服务通过广播与地图通信（每次更改位置时，它都会发送广播消息）。当 Map 收到广播消息时，它会从数据库中获取最新的纬度和经度，并将地图移动到地理点。到目前为止，它运行流畅。

现在，我想用当前轨迹覆盖地图，在上面显示路线。我以这种方式使用 ItemizedIconOverlay 厌倦了它：

```
public static void locateMap(Context context) {

    try{
        SQLiteDatabase database = context.openOrCreateDatabase(DBNAME, MODE_PRIVATE, null);

        Cursor cLat = database.rawQuery(latitudeQuery, null);
        if (cLat.moveToFirst()) {
            latitude = cLat.getDouble(0);
        }
        else {
            latitude = 0;
        }

        Cursor cLong = database.rawQuery(longitudeQuery, null);
        if (cLong.moveToFirst()) {
            longitude = cLong.getDouble(0);
        }
        else {
            longitude = 0;
        }

        database.close();

        GeoPoint geoPoint = new GeoPoint(latitude,longitude);
        mMapController.animateTo(geoPoint);
        mMapController.setCenter(geoPoint);

        overlayItems.add(new OverlayItem("","",geoPoint));
        Drawable mDrawable = context.getResources().getDrawable(R.drawable.pont);

        mResourceProxy = new DefaultResourceProxyImpl(context.getApplicationContext());
        mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(overlayItems, mDrawable, null, mResourceProxy);

        mMapView.getOverlays().add(mMyLocationOverlay);

    }
    catch(Exception ex){
        String err = (ex.getMessage()==null)?"drawOnMapFailed":ex.getMessage();
        Log.v("MAP",err);
    }
} 
```

它一直有效，直到点击地图。我得到 IndexOutOfBoundsException 异常，所以我认为地图并不喜欢这种方式。代码有问题，还是有其他方法可以覆盖 osmdroid？也许这与我制作这个应用程序的方式有关？

更新：我以这种方式尝试使用 PathOverlay，但在地图上没有显示任何内容：

```
 PathOverlay mMyLocationOverlay = new PathOverlay(Color.RED, context); 
        mMyLocationOverlay.addPoint(geoPoint);

        mMapView.getOverlays().add(mMyLocationOverlay); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:14:41.810

如果您只想显示路线，您应该查看专为该工作设计的 PathOverlay。即使您解决了错误，您当前的方法也会很快得到大量覆盖。使用 PathOverlay，您将只有一个叠加层，您需要将新点添加到其中。该实现经过优化，可以处理屏幕内外的大量点。

# multithreading - boost asio 是否按顺序调用异步处理程序

> ID：16066007
> 
> 赞同：1
> 
> 时间：2013-04-17T17:06:51.217
> 
> 标签：multithreading, thread-safety, boost-asio

如果我在主线程的单独线程上启动 asio 计时器和接收，处理程序可以同时运行吗？我认为不是，即使它们同时准备好，单独的线程也会按顺序调用事件。要同时调用处理程序，asio 必须创建自己的（第 3 个）线程，甚至中断一个处理程序以运行另一个处理程序。我找不到说明处理程序将按顺序调用的文档，即使这看起来很可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:33:34.047

如果多个线程正在为`io_service`的事件循环提供服务，例如调用 的线程池[`io_service::run()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/run.html)，则处理程序可能会同时执行。另一方面，如果只有一个线程`io_service`为`io_service::run*()`. Boost.Asio [Timer.5 - 在多线程程序中同步处理程序](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tuttimer5.html)教程可能会提供有关此主题的更多见解。

# c# - 在 linq 动态查询字符串中使用数值

> ID：16066008
> 
> 赞同：1
> 
> 时间：2013-04-17T17:06:55.450
> 
> 标签：c#, linq, decimal, dynamic-linq

我正在尝试进行动态 linq 查询，该查询将根据字符串检查值。

首先，这是查询：

```
objQry = from o in m_Db.OBJECTS.Where(whereConditions)
                      select o;

if(!objQry.Any())
{
    return null;
} 
```

该`whereConditions`变量是我构建并作为参数传递的字符串，以找出我需要的值。以下是有效字符串的示例：

`OBJ_NAME == \"Sword\" and OBJ_OWNER == \"Stan\"` 这将返回名称为“Sword”且所有者为“Stan;

`OBJ_COLOR == \"Blue\" OR OBJ_COLOR == \"Red\"` 这将返回任何颜色为蓝色或红色的项目。

到那里为止，我很好，但现在我有一个问题：我需要检查一个十进制字段。所以我试过这个字符串：

`OBJ_NUMBER == 1`

但是即使存在 OBJ_NUMBER 值为 1 的对象，查询也会返回 null。它是小数。如何指示他们需要检查十进制值的查询？

**** 编辑 ****

我试图“修改”传递的值，使其看起来像这样：

```
"CARD_NUMBER == Convert.ToDecimal(1)" 
```

现在我有另一种错误告诉我：

```
LINQ to Entities does not recognize the method 'System.Decimal ToDecimal(Int32)' method, and this method cannot be translated into a store expression. 
```

任何线索任何人？我仍在寻找一种方法来做到这一点。谢谢！

**编辑 2**

您可以通过查看[这个问题](https://stackoverflow.com/questions/17836453/dynamic-call-to-ef-database-to-retrieve-exact-wanted-data-instead-of-sorting-a-b)来了解我的代码是如何形成的。

让我们回到这个问题。我想检查十进制值。假设 OBJ_NUMBER 是一个十进制字段。

使用`Dynamic Linq`，我尝试读取十进制字段。假设我想获取每个数字为 1.27 的对象。然后该`whereConditions`字段的形状将如下所示：

```
OBJ_NUMBER == 1.27 
```

但后来我会得到一个`Invalid real literal '1.27'`错误。我不知道为什么。

所以我尝试了 Gert Arnold 的解决方案并改为这样做：

```
decimal bDecimal = decimal.Parce(valueToParse);

param = new ObjectParameter("cardNumber", typeof(decimal)) { Value = bDecimal };

valuesToUse.Add("CARD_NUMBER == @cardNumber");

listParams.Add(param); 
```

但我最终遇到了两个问题：

1.  第一个问题是我的`whereConditions`字符串是这样形成的：

    `CARD_NUMBER == @cardNumber`

    但我收到以下错误：

    `No property or field 'cardNumber' exists in type 'CARD'`

    让我相信它无法在对象参数和用于执行查询的字符串之间建立联系。

2.  如您所见，我有一个参数列表。这是因为我无法确定用户将选择多少个参数。所以每次用户输入一个新的搜索字段时，我都必须创建一个新的 ObjectParameter 并将其存储在一个列表中。以下是我之后尝试做的事情：

    `ObjectParameter[] arrayParameters = listParams.ToArray(); // Convert the list to an array`

然后，当我尝试进行查询时：

```
cardQry = from c in mDb.CARD.Where(whereConditions, arrayParameters)
                               select c; 
```

但无济于事。

**结果**

根据下面回答的问题，我开发了一些“糟糕”但功能强大的东西。

首先，我*忽略*了每个小数字段，因为我永远无法使用动态 linq 访问它们。相反，我这样做：

```
var valuesToParse = keyValuePair.Value.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries);

// Here I parse the value and, if that's the case, the symbol.

decimal baseValue = decimal.Parse(valuesToParse[0]); 

if (valuesToParse.Count() > 1)
{
    string baseMethod = valuesToParse[1];

    if (baseMethod == ">" || baseMethod == ">=")
    {
        if (baseMethod == ">=")
        {
            baseValue--;
        }

        // The list is actually like this: Dictionary<string, object> list = new Dictionary<string, object>();
        list.Add("low", baseValue);

        // I kind of activate a tag telling me that the user is looking for a higher value.
        cardHigher = true;
    }
    else
    {
        if (baseMethod == "<=")
        {
            baseValue++;
        }

        list.Add("low", baseValue);

        cardLower = true;
    }
}
else
{
    //lowParam = new ObjectParameter("dec", typeof(decimal)) { Value = baseValue };

    list.Add("low", baseValue);
}

cardNumberActivated = true; 
```

最后，当我得到对象列表时，我这样做：

```
if (list.Count > 0)
{

    (example)
    if (cardNumberActivated)
    {
        if (cardHigher)
        {
            q = mDb.CARD.Where("CARD_NUMBER >= @0", list["low"]).ToList();
        }
        else if (cardLower)
        {
            q = mDb.CARD.Where("CARD_NUMBER <= @0", list["low"]).ToList();
        }
        else
        {
            q = mDb.CARD.Where("CARD_NUMBER == @0", list["low"]).ToList();
        }
    }
}

// Here we get the orinalData with the basic filters.
listToReturn.AddRange(cardQry);

if (q != null)
{
    //listToReturn.AddRange(q);
    for (int i = 0; i < listToReturn.Count; i++)
    {
        var priceList1 = listToReturn[i];
        if (!q.Any(_item => _item.CARD_NUMBER == priceList1.CARD_NUMBER))
        {
            listToReturn.RemoveAt(i);
            i--;
        }
    }
} 
```

它有效。这**不是**使它工作的优雅方式，但我可以按照我想要的方式验证字段，为此，我最后很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:51:53.247

您不应该使用内联谓词值构建查询字符串。请改用参数。然后也可以指定类型：

```
var whereConditions= "it.CARD_NUMBER = @cardNumber";
var param = new ObjectParameter("cardNumber", typeof(decimal)) { Value = 1 };
objQry = from o in m_Db.OBJECTS.Where(whereConditions, param); 
```

**编辑**

我不知道您的代码中有什么不起作用。这只是从我自己的一个项目中派生的一段随机工作代码：

```
var param1 = new ObjectParameter("dec", typeof(decimal)) { Value = 90000m };
var param2 = new ObjectParameter("int", typeof(int)) { Value = 90000 };
var q = ValueHolders.Where("it.DecimalValue >= @dec OR it.IntegerValue > @int",
                    param1, param2).ToList(); 
```

请注意，`param1, param2`它也可能是一个`ObjectParameter`.

# php - 这将如何更好地编写用于将 php 外部数据添加到 jquery 选择

> ID：16066010
> 
> 赞同：0
> 
> 时间：2013-04-17T17:07:06.470
> 
> 标签：php, ajax, cordova, jquery-mobile

我想使用phonegap提交一个应用程序，我的应用程序使用了很多我知道苹果不太喜欢的php，只是拒绝了该应用程序并说最好有一个网络应用程序。我在这里有一个示例 index.html

```
<!DOCTYPE HTML>
<html>
<head>
      <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="css/logout-button.min.css" />
         <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" href="css/my.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        </script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script src="js/jquery.cookies.2.2.0.min.js"></script>

<script type="text/javascript">
var uid = $.cookies.get( 'uid' );
 if(uid == null)
                 {
                window.location ='account-login.html'; }
                 else
                 { }
</script>
</head>

<body>
<div data-role="page" id="index4">

           <div data-theme="a" data-role="header">
        <a data-role="button" data-direction="reverse" data-rel="back" data-transition="slide"
         data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
            Back
        </a>
        <h3>
           Event Details
        </h3>
    </div>

         <div data-role="content">
             <form id="eventForm" name="eventForm">
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <label for="event">
                                Event
                            </label>
                            <input name="eventname" id="eventname" placeholder="eventname" value="" type="text" />
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <label for="about">
                                About
                            </label>
                            <textarea name="about" id="about" placeholder="about" value=""></textarea>
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                    <label for="dates">
                                Choose Dates
                            </label>
                            <div id="with-altField"></div>
                            <input type="hidden" id="altField" name="dates">
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <label for="enddate">
                                End Date
                            </label>
                            <div id="with-altfield1"></div>
                            <input type="hidden" id="altField1" name="enddate">
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <script>
                            $.get('event-details.php', function(data){
                            $('#yourdiv').html(data);
                            });
                        </script>   
                        <div id="yourdiv"></div>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="manual">Add Emails</label>
                        <textarea cols="40" rows="8" name="emails" id="emails"></textarea>
                    </div>
                        <input type="submit" value="Submit" id="submitEventButton">
                </form>
        </div>
</div>  
</body>
</html> 
```

我在这里调用 event-details.php

```
<?
require_once("../backend/functions.php");
dbconn();
                            $id = $CURUSER["id"];
                            $res = "SELECT username,email,status FROM users left join cal_contacts on cal_contacts.contactid = users.id WHERE cal_contacts.userid = $id";
                            $res1 = mysql_query($res);
                        ?>
                        <label for="select-choice-1" class="select">
                                Choose Contacts:
                            </label>
                            <select name="contacts[]" id="contacts" multiple="multiple" data-native-menu="false">
                        <?
                            while($row = mysql_fetch_array($res1))
                            { 
                            print "<option value=$row[email]>$row[email] ($row[status])</option>";
                            }
                        ?>
                        </select>
                        <? 
```

我有通过 php 创建的选择菜单。我想知道是否有另一种方法可以做到这一点，所以完整的选择 html 不必在 php 脚本上。这意味着一旦提交，我将更难更改我的应用程序，我相信苹果会更容易接受它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:09:40.273

如果您的问题只是删除该 HTML 上的 PHP 处理，您可以将其作为 Web 服务移动到其他地方，然后通过 ajax 请求获取它。然后您可以使用 json 等来获取数据并填充您的选择菜单。

这是[关于 jquery 的文档](http://api.jquery.com/jQuery.ajax/)！关于如何发出ajax请求。

我在这里找到了一个与您想要实现的目标相似的教程。

[如何为 iOS 应用程序编写简单的 PHP/MySQL Web 服务](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)！

# c++ - 如何在 Windows 文件打开对话框中管理导航窗格？

> ID：16066011
> 
> 赞同：1
> 
> 时间：2013-04-17T17:07:06.750
> 
> 标签：c++, winapi, c++builder, vcl

vista 和 win7 中可用的标准 OpenFile 对话框允许您添加显示在对话框左侧导航窗格顶部的“应用程序链接”。在包含的屏幕截图中，我添加了 2 个文件夹。我正在使用 C++Builder 并且使用 TFavoriteLinkItems 非常简单，我不确定 Visual Studio（或其他）用户会如何做到这一点。

![文件打开对话框](https://i.stack.imgur.com/agaI6.png)

问题是我在折叠文件夹并将窗口滚动到顶部后截取了屏幕截图。在正常情况下，用户甚至不会注意到我添加了这些链接，因为导航窗格将以初始目录为中心，并且库或用户（在本例中为“Marc”）文件夹也可能会展开。

有没有办法以编程方式强制窗格滚动到顶部，或者折叠所有打开的文件夹，“应用程序链接”除外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:50:35.607

我找到了答案，而且很简单。

在 vcl 意义上，TFileOpenDialog 选项包括 HidePinnedPlaces 选项。这会从导航窗格中删除所有内容，除了如上所述使用 FavoriteLinks::add 添加的项目。

在更面向 Microsoft 的方法中，IFileDialog::SetOptions 方法是查看的地方。此处描述了所有选项：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb761832%28v=vs.85%29.aspx。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761832%28v=vs.85%29.aspx)

您可以使用 shell: 文件夹添加“我的电脑”或其他文件夹，这在您处理完其他所有内容后非常方便。C++Builder 代码如下所示：

```
void TMyForm::AddFolderLinks() {
  TFavoriteLinkItem * link = FileOpenDialog1->FavoriteLinks->Add();
  link->Location = "shell:MyComputerFolder";
  link = FileOpenDialog1->FavoriteLinks->Add();
  link->Location = "shell:Libraries";
  link = FileOpenDialog1->FavoriteLinks->Add();
  link->Location = ExtractFilePath(Application->ExeName);
  link = FileOpenDialog1->FavoriteLinks->Add();
  link->Location = "c:\\projects\\Athabasca";
} 
```

并产生以下内容，这正是我想要的： ![改进的打开对话框](https://i.stack.imgur.com/Acj7V.png)

# sparql - 如何在 SparqlParameterizedString 中分配参数值

> ID：16066012
> 
> 赞同：2
> 
> 时间：2013-04-17T17:07:07.797
> 
> 标签：sparql, parameterized, dotnetrdf, blank-nodes

我正在玩一些 Dotnetrdf 的 sparql 引擎，我正在尝试创建参数化查询但尚未成功。

假设我正在处理带有标识为 _:1690 的空白节点的图 g，其代码

```
Dim queryString As SparqlParameterizedString = New SparqlParameterizedString()
queryString.Namespaces.AddNamespace("rdfs", UriFactory.Create("http://www.w3.org/2000/01/rdf-schema#"))

queryString.CommandText = "SELECT ?label { @context rdfs:label ?label } "
queryString.SetParameter("context", g.GetBlankNode("1690"))

Dim result As VDS.RDF.Query.SparqlResultSet = g.ExecuteQuery(New SparqlQueryParser().ParseFromString(queryString)) 
```

每当我运行它时，我都会让所有节点都具有 rdfs:label 属性，而不是仅在我的空白节点上过滤结果。

请问，如何正确设置参数的值，以便我在结果中只得到一项？

在此先感谢，马克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:51:52.447

SPARQL 查询中的空白节点与 RDF 图中的空白节点不同

在 SPARQL 查询中，空白节点被视为具有有限范围的临时变量，它与特定的空白节点不匹配，因此您**无法**编写 SPARQL 查询以通过空白节点标识符进行选择。

因此，您创建查询的代码给出的结果与您`@context`用变量替换的结果相同，例如`?s`

如果您需要找到与特定空白节点关联的值，那么您需要制定一个查询，根据它参与的三元组唯一地选择该空白节点。如果您不能这样做，那么您需要重新考虑您的数据建模，因为如果是这种情况，那么您可能应该使用 URI 而不是空白节点。

* * *

作为一种解决方法，因为您使用的是 dotNetRDF 并拥有要查询的原始图形，因此您可以使用`IGraph`API，例如

```
INode label = g.GetTriplesWithSubjectPredicate(g.GetBlankNode("1690"), g.CreateUriNode("rdfs:label")).Select(t => t.Object).FirstOrDefault(); 
```

请记住，`label`如果您要查找的三元组不存在，则它可能始终为空

# zend-framework - Zend 拒绝访问更改的 url 参数最佳实践？

> ID：16066013
> 
> 赞同：0
> 
> 时间：2013-04-17T17:07:17.297
> 
> 标签：zend-framework, url, authentication, hide

在我的视图 index.phtml 中的多用户应用程序中：

```
<a href="<?php echo $this->url( array( "module" => "myModule", "controller"
=>"myController","action" => "edit", "id" => $objThings->thingsid), 
'default', TRUE )?> 
```

单击此链接将导致网址：

```
http://website/mymodule/mycontroller/edit/id/228 
```

用户可以在其中编辑记录。

登录后，用户可以复制此 url 并将参数更改为 229 或 130 等，并获取其他用户的信息。

防止这种情况的最佳做法是什么，在记录级别设置身份验证并拒绝访问其他用户的记录？（当然记录有一个用户标识）。
隐藏 url 中的参数将是一个不吸引用户的步骤，欢迎对此提出建议。还需要在模块/操作级别上进行身份验证。

我一直在寻找，但似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:24:17.930

两者都做。如果您想编辑登录用户的个人资料详细信息，则不需要 URL 中的 id，因为您已经知道他们是谁。

然后，在您的更新代码中，只允许他们更新他们的特定数据。

如果您有一个已登录的用户，您很可能拥有一个对象，这将使更新他们的数据变得容易（取决于您是否使用 ActiveRecord 或其他东西），否则请确保您在 SQL 中使用 id。

# c# - Dapper 自定义助手（用于表值参数）逗号而不是浮点值中的点

> ID：16066015
> 
> 赞同：1
> 
> 时间：2013-04-17T17:07:18.910
> 
> 标签：c#, sql-server-2008, dapper

来自[Dapper 是否支持 SQL 2008 表值参数的代码？](https://stackoverflow.com/questions/6232978/does-dapper-support-sql-2008-table-valued-parameters)效果很好。

但是随着 MSSQL SQL_VARIANT 列的出现（通常）麻烦......

```
private static string ConnectionString = @"data source=192.168.1.1;initial catalog=;persist security info=False;user id=sa;password=";

private static void TestTVP2()
    {
        var connection = new SqlConnection(ConnectionString);
        connection.Open();

        var nums =
            connection
            .Query<BigIntKeySqlVariantValueType.TypeFields>("[dbo].[pmesAttributeValueUpdate]", new BigIntKeySQLVariantValueTVP(new[]
                    {
                        new BigIntKeySqlVariantValueType.TypeFields{ParameterName = 9976669, ParameterValue= 8.5}
                    }, "@tvp")
                ).ToList();

        foreach (var num in nums)
        {
            Console.WriteLine(num.BigIntKeySqlVariantValueTypeId + " " + num.ParameterName + " " +
                              num.ParameterValue);
        }
    }

internal class BigIntKeySQLVariantValueTVP : SqlMapper.IDynamicParameters
{
    private readonly IEnumerable<BigIntKeySqlVariantValueType.TypeFields> _values;
    private readonly string _parametername;

    public BigIntKeySQLVariantValueTVP(IEnumerable<BigIntKeySqlVariantValueType.TypeFields> values, string parametername)
    {
        this._values = values;
        this._parametername = parametername;
    }

    public void AddParameters(IDbCommand command)
    {
        var sqlCommand = (SqlCommand)command;
        sqlCommand.CommandType = CommandType.StoredProcedure;

        var numberList = new List<SqlDataRecord>();

        // Create an SqlMetaData object that describes our table type.
        SqlMetaData[] tvpDefinition =
            {
                new SqlMetaData(
                    "BigIntKeySQLVariantValueTypeId", SqlDbType.BigInt, true, false, SortOrder.Unspecified, -1),
                new SqlMetaData("ParameterName", SqlDbType.BigInt),
                new SqlMetaData("ParameterValue", SqlDbType.Variant),
            };

        foreach (var n in _values)
        {
            // Create a new record, using the metadata array above.
            var rec = new SqlDataRecord(tvpDefinition);

            rec.SetInt64(1, n.ParameterName); // Set the value.
            rec.SetValue(2, n.ParameterValue);

            numberList.Add(rec); // Add it to the list.
        }

        // Add the table parameter.
        var p = sqlCommand.Parameters.Add(_parametername, SqlDbType.Structured);
        p.Direction = ParameterDirection.Input;
        p.TypeName = "BigIntKeySQLVariantValueType";
        p.Value = numberList;
    }

    public void AddParameters(IDbCommand command, SqlMapper.Identity identity)
    {
        AddParameters(command);
    }
}

public class BigIntKeySqlVariantValueType 
{
    /// <summary>
    /// Type POCO
    /// </summary>
    public struct TypeFields
    {
        public long BigIntKeySqlVariantValueTypeId { get; private set; }

        public long ParameterName { get; set; }

        public object ParameterValue { get; set; }
    }
} 
```

下面是 Dapper 生成的代码，如 SQL Profiler 中所示：

```
declare @p1 dbo.BigIntKeySQLVariantValueType
insert into @p1 values(9976669,8,5)
exec [dbo].[pmesAttributeValueUpdate] @tvp=@p1 
```

我的[表值](http://msdn.microsoft.com/en-us/library/bb675163.aspx)类型：

```
CREATE TYPE [dbo].[BigIntKeySQLVariantValueType] AS TABLE(
    [BigIntKeySQLVariantValueTypeId] [bigint] IDENTITY(1,1) NOT NULL,
    [ParameterName] [bigint] NULL,
    [ParameterValue] [sql_variant] NULL,
    PRIMARY KEY CLUSTERED 
(
    [BigIntKeySQLVariantValueTypeId] ASC
)WITH (IGNORE_DUP_KEY = OFF)
) 
```

Dapper 生成的代码应该是：

```
insert into @p1 values(9976669,8.5) 
```

如何用点“替换”逗号`SqlParameter`

```
 // Add the table parameter.
        var p = sqlCommand.Parameters.Add(_parametername, SqlDbType.Structured);
        p.Direction = ParameterDirection.Input;
        p.TypeName = "BigIntKeySQLVariantValueType";
        p.Value = numberList; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:54:31.050

事实证明，逗号而不是句点的值**仅**显示在 SQL Profiler 和 Console.Write 中。

向数据库传递正确的浮点值。

# c# - C# 二进制读取不完整的字符串

> ID：16066017
> 
> 赞同：0
> 
> 时间：2013-04-17T17:07:31.860
> 
> 标签：c#, winforms, listview, binaryreader

我希望在这个问题上得到一些帮助，所以你可以在下面的图片中看到，我似乎无法阅读到 0x00 的整个单词： ![在此处输入图像描述](https://i.stack.imgur.com/zwnIh.png)

我正在尝试做的是正确读取文件字符串，这是我用来打开文件的代码：

```
 private void menuItem2_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        textBox1.Text = "";
        menuItem12.Text = "file type is: ";
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open File";
        ofd.Filter = "All Files (*.*)|*.*";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.GetEncoding("SHIFT-JIS"));
            foreach (char mychar in br.ReadChars(4)) menuItem12.Text += mychar;
            if (menuItem12.Text != "file type is: TXTD")
            {
                MessageBox.Show("This is not a TXTD file...", "Sorry", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }
            else
            {
                    MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    br.BaseStream.Position = 0x8;
                    int Pntrnum = br.ReadInt16();
                    menuItem11.Visible = true;
                    menuItem11.Text = Pntrnum.ToString();
                    List<int> offsets = new List<int>();
                    br.BaseStream.Position = 0x10;
                    for (int i = 0; i < Pntrnum; i++)
                    {
                        offsets.Add(br.ReadInt32());
                    }
                    Dictionary<int, string> values = new Dictionary<int, string>();
                    for (int i = 0; i < offsets.Count; i++)
                    {
                        int currentOffset = offsets[i];

                        int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                        int stringLength = (nextOffset - currentOffset - 1) / 2;

                        br.BaseStream.Position = currentOffset;

                        var chars = br.ReadChars(stringLength);
                        values.Add(currentOffset, new String(chars));
                    }

                    foreach (int offset in offsets)
                    {
                        listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
                    }

                    br.Close();
                    br = null;
            }
        }
        ofd.Dispose();
        ofd = null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:22:34.827

“SHIFT-JIS”编码对 ASCII 范围内的字符使用单个字节。

我可以看到您的文本是 ASCII，但是这行代码：

```
stringLength = (nextOffset - currentOffset - 1) / 2; 
```

假设字符占用两个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:18:18.450

为了将二进制数据转换为正确的字符串，您应该了解**[Encodings](https://stackoverflow.com/questions/5864272/understanding-text-encoding-in-net)**。所以你可以在`System.Text.Encoding`. 然后你可以像这样将字节数组转换为字符串：

```
byte[] byteArray = // your byte array
System.Text.Encoding encoding = Encoding.UTF8; //use proper encoding
string value = encoding.GetString(byteArray); 
```

你也可以看看[MSDN](http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.71%29.aspx)

# c++ - 从用户定义的类型转换为双精度类型转换

> ID：16066022
> 
> 赞同：0
> 
> 时间：2013-04-17T17:07:40.787
> 
> 标签：c++, casting, type-conversion

我必须从用户定义的 Lab 类型（属于 Lab 空间颜色类型）类型转换为双精度类型。

```
static Lab heartColorLab(0.0,0.0,0.0);

heartColorLab =  _goals.getCurrentColorLab();

printf("updateScheduleLab %d {%d %d %d}\n", dtime, heartColorLab.L, heartColorLab.a, heartColorLab.b); 
```

所以我希望 heartColorLab.L、heartColorLab.a、heartColorLab.b 的值加倍。当我尝试 c 样式类型转换时，编译器给了我一个错误，说从类型“实验室”到类型“双”的无效转换。那么如何从 Lab 用户定义类型转换为双精度类型。

# php - jQuery Mobile 在表单提交时加载外部 PHP

> ID：16066023
> 
> 赞同：0
> 
> 时间：2013-04-17T17:07:41.597
> 
> 标签：php, forms, jquery, cordova, jquery-mobile

我正在使用 PhoneGap 开发一个 Android jQuery Mobile 应用程序，它不允许我使用 PHP。所以我想加载一个我在其他地方托管的外部 PHP 页面。基本上这就是我正在寻找的内容：
用户填写表格然后单击提交
外部 PHP 页面已加载，然后返回到我的应用程序中的确认页面。

这可能吗？几天来我一直在尝试这样做，但仍然无法使其正常工作。它要么只加载外部 PHP 页面，要么只加载确认页面，或者它会在 PHP 页面之前加载确认页面，这会让用户看到一个空白页面。任何帮助将不胜感激！

这是我目前拥有的：

```
$("#inputform").submit(function() {
    alert("test");
    $.getJSON("http://www.somewhere.com/sendemail.php");
    $.mobile.changePage("confirmation.html");
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:27:19.097

如果在ajax请求成功事件中将页面改为confirmation.html怎么办？

```
$.ajax({
    url: 'http://www.somewhere.com/sendemail.php',
    success: function(data, textStatus, XMLHttpRequest)
    {
        //do some work
        $.mobile.changePage("confirmation.html");
    }
}); 
```

或使用 getJson

```
$.getJSON('http://www.somewhere.com/sendemail.php', function(data) {
    //do some work
    $.mobile.changePage("confirmation.html");
} 
```

在成功请求 sendemail.php 之后，您将能够对返回的数据执行任何操作，然后直接进入 Confirmation.html 页面。

# javascript - If Else 输出相同的结果

> ID：16066025
> 
> 赞同：-1
> 
> 时间：2013-04-17T17:07:42.143
> 
> 标签：javascript, if-statement

很抱歉再次打扰大家，但我的代码似乎还有另一个问题。它为某些输入输出相同的结果，我在过去 15 分钟左右试图找出问题所在。我会问我的导师，但我目前不在大学。

再次，代码在下面，感谢您抽出宝贵的时间来忍受我。

```
//declare vars and/or constants
var endString = "Total cost per night is $";

//input vars
pplCount = prompt("How many people will be staying?");
discYes = prompt("Do you have an AAA discount?");
viewYes = prompt("Do you want a room with a view?");

//if variables
//double yes

if(pplCount == "1" || pplCount == "2" && discYes == "Yes" && viewYes == "Yes") {
    discount = 50*0.15;
    roomCost = 50;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost - discount + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes == "Yes" && viewYes == "Yes") {
    discount = 60*0.10;
    roomCost = 60;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost - discount + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "Yes" && viewYes === "Yes") {
    discount = 70*0.05;
    roomCost = 70;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost - discount + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "1" || pplCount === "2" && discYes === "No" && viewYes === "Yes") {
    discount = 50*0.15;
    roomCost = 50;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "No" && viewYes === "Yes") {
    discount = 60*0.10;
    roomCost = 60;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "No" && viewYes === "Yes") {
    discount = 70*0.05;
    roomCost = 70;
    viewCost = (roomCost*0.10);
    finalRoomCost = roomCost + viewCost;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "1" || pplCount === "2" && discYes === "No" && viewYes === "No") {
    finalRoomCost = 50;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "No" && viewYes === "No") {
    finalRoomCost = 60;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "No" && viewYes === "No") {
    finalRoomCost = 70;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "1" || pplCount === "2" && discYes === "Yes" && viewYes === "No") {
    discount = 50*0.15;
    roomCost = 50;
    viewCost = (roomCost*0.10);
    roomCost = roomCost - discount;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "Yes" && viewYes === "No") {
    discount = 60*0.10;
    roomCost = 60;
    finalRoomCost = roomCost - discount;
    document.write(endString + finalRoomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "Yes" && viewYes === "No") {
    discount = 70*0.05;
    roomCost = 70;
    finalRoomCost = roomCost - discount;
    document.write(endString + finalRoomCost);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:14:45.407

运算符比`&&`绑定得更紧密`||`，这意味着

```
if(pplCount == "1" || pplCount == "2" && discYes == "Yes" && viewYes == "Yes") { 
```

被解释为

```
if(pplCount == "1" || ((pplCount == "2" && discYes == "Yes") && viewYes == "Yes")) { 
```

因此，当“pplCount”为 1 时，将采用该逻辑分支，而不管“discYes”和“viewYes”的值如何。

这就像普通的代数约定（纸和铅笔，忘记 JavaScript），其中乘法优先于加法。当你写

```
2x + 5 
```

那么每个人都知道您的意思是“将 x 乘以 2，然后加 5”而不是“将 5 加到 x，然后将其乘以 2”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:18:11.173

我想对你的条件进行分组有一些问题。所以请检查您的条件，如下所示，我认为它可能会解决您的问题。

```
if((pplCount === "1" || pplCount === "2") && (discYes === "Yes" && viewYes === "Yes")) 
{
......
......
}
else if()
{
} 
```

# zend-framework2 - Zend 2.1：是否可以通过 Db>Sql>Select 进行多模式连接

> ID：16066032
> 
> 赞同：1
> 
> 时间：2013-04-17T17:08:01.173
> 
> 标签：zend-framework2, zend-db, zend-db-select

我对 Zend 很陌生，并且对 Zend Select 抽象有所了解。在尝试创建一个从不同模式连接另一个表的查询时，我遇到了一些问题。

我要生成的 mySql 查询是：

```
SELECT * FROM `assets`
JOIN `projects`
ON `assets`.project_id = `projects`.id
JOIN `secondSchema`.`users` AS `users`
ON `users`.id = `projects`.user_id
WHERE `projects`.id = ?
AND `users`.id = ? 
```

使用 Zend/Db/Sql/Sql/Select 我可以设置以下选择构建器，但我正在努力在生成的 Sql 语句中设置另一个模式：

```
$select = $this->_sqlBuilder->select();
    $select->from('assets');
    $select->join(
        'projects',
        'projects.id = assets.project_id'
    );
    $select->join(
        'users',
        'users.id = projects.user_id'
    );
    $select->where->equalTo('assets.project_id', $projectID);
    $select->where->equalTo('users.id', $userId); 
```

我曾尝试使用 \Zend\Db\Sql\TableIdentifier 来设置模式，但适配器中的原始模式随后被替换，看起来没有一种方法可以让两种模式都出现在查询中。

无论如何要使用 Sql/Select 来执行此操作，还是使用 Zend Db 以错误的方式解决此问题？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:27:08.060

看起来这实际上是不可能使用 Db\Select 可悲的。但是，您可以直接从适配器创建一些不错的供应商可移植 sql。 [http://framework.zend.com/manual/2.1/en/modules/zend.db.adapter.html](http://framework.zend.com/manual/2.1/en/modules/zend.db.adapter.html)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:31:28.340

由于 Select 类转义引号的方式，出现此问题。

$select->join("database2.table2", "database2.table2.id = table.id")

呈现为：

SELECT 'table'.*, 'database2.table2'.* FROM 'table' INNER JOIN 'database2.table2' ON 'database2'.'table2'.'id' = 'table'.'id'

请注意围绕“database2.table2”的不一致和不正确的引用。

更新 \Zend\Db\Sql\Select 中的第 596、599、624、625 行以将“quoteIdentifier”方法替换为“quoteIdentifierInFragment”可以正确呈现查询并允许执行跨数据库连接。

我已经向 Zend 提交了一份问题报告，因为我不相信当前的行为是有意的，因此希望它会在未来的构建中得到更新。现在手动更新类已经很容易了（尽管确实有点脏）。

[https://github.com/zendframework/zf2/issues/4307](https://github.com/zendframework/zf2/issues/4307)

# html - Gumby 2 切换不起作用

> ID：16066037
> 
> 赞同：1
> 
> 时间：2013-04-17T17:08:28.847
> 
> 标签：html, mobile, frameworks, toggle, gumby-framework

我下载了 Gumby 2 并将其合并到我的网站中。不幸的是，当您在移动设备上访问它时，应该打开导航的切换无法出现。我不确定它为什么会这样，我知道我已将所有正确的代码放入我的 html 网站。希望这里有人可以帮助我。

网站在这里 - [http://vortexradio.co.uk](http://vortexradio.co.uk)随时查看源代码以尝试帮助。

丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:01:38.513

您正在使用`gumby-trigger="#nav1 > something .something"`，但您的导航元素是`id="#nav3"`

# javascript - 显示 Json 值

> ID：16066038
> 
> 赞同：0
> 
> 时间：2013-04-17T17:08:32.367
> 
> 标签：javascript, json

我现在一直在处理 json 值。我在 ajax 调用中返回 json 值。现在我想以特定格式显示 json。例如，让返回的值为

```
{"Heading 1":["Content 1","Content 2"],"Heading 2":["Content 1","COntent 2","Content 3"],"Heading3":["Content 1"]} 
```

我想以这样的方式显示

```
<h4>Heading 1</h4> <input type="checkbox">Content 1<br><input type="checkbox">Content 2<br>
<h4>Heading 2</h4> <input type="checkbox">Content 1<br><input type="checkbox">Content 2<br><input type="checkbox">Content 3<br>
<h4>Heading 3</h4> <input type="checkbox">Content 1<br> 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:15:45.667

试试这个方法：

```
var data, container, key, curHeading, heading, i, checkbox;

data = {"Heading 1":["Content 1","Content 2"],"Heading 2":["Content 1","COntent 2","Content 3"],"Heading3":["Content 1"]};

container = document.createElement("div");
for (key in data) {
    curHeading = data[key];
    heading = document.createElement("h4");
    heading.innerHTML = key;
    container.appendChild(heading);
    for (i = 0; i < curHeading.length; i++) {
        checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        container.appendChild(checkbox);
        container.appendChild(document.createTextNode(curHeading[i]));
        container.appendChild(document.createElement("br"));
    }
}

document.body.appendChild(container); 
```

**演示：http:** [//jsfiddle.net/UwSU6/1/](http://jsfiddle.net/UwSU6/1/)

事件中发生这种情况的`window.onload`位置（例如在 jsFiddle 中）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T17:16:39.657

```
var json ={"Heading 1":["Content 1","Content 2"],"Heading 2":["Content 1","COntent 2","Content 3"],"Heading3":["Content 1"]}
obj = JSON.parse(json);

for ( evaluationHere){
    createTheElementsHEre()

}
insertHtml(); 
```

# r - 使用尺寸映射和密度 2d 的不寻常图例

> ID：16066039
> 
> 赞同：5
> 
> 时间：2013-04-17T17:08:37.670
> 
> 标签：r, ggplot2

我正在尝试在 ggplot2 中制作散点图，其大小映射到第三个变量和密度 2d 轮廓。似乎传说被密度2d轮廓所混淆。

例如，以下代码有效：

```
library('ggplot2')
set.seed(1)
x=rnorm(100); y=rnorm(100,sd=10); z=seq(1,10,length.out=100)
dd=data.frame(x=x,y=y,z=z)
ggplot(dd,aes(x,y,size=z))+geom_point() 
```

![情节看起来很正常](https://i.stack.imgur.com/DZOI0.png)

但是现在，请注意，当我添加对`stat_density2d()`. 特别是，情节图例显示蓝色块而不是黑色圆圈：

```
ggplot(dd,aes(x,y,size=z))+geom_point()+stat_density2d() 
```

![情节图例显示蓝色块而不是黑色圆圈](https://i.stack.imgur.com/L2gOy.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:20:24.403

作为`size=`您可以设置的美学之一，`stat_density2d()`在这种情况下，它是在`ggplot()`调用中设置的，图例是为 - 线和点制作的（点隐藏在图例中的线下，`geom_point()`如前所述`stat_density2d()`）。要从图例中删除蓝线，您可以在其中手动设置`size=0.5`（或其他值）`stat_density2d()`然后图例将是正确的。

```
ggplot(dd,aes(x,y,size=z))+geom_point()+stat_density2d(size=0.5) 
```

![在此处输入图像描述](https://i.stack.imgur.com/HTpQe.png)

# cocoa - 将菜单项绑定到第一响应者的属性

> ID：16066042
> 
> 赞同：2
> 
> 时间：2013-04-17T17:08:52.150
> 
> 标签：cocoa, interface-builder, menuitem, cocoa-bindings, nsdocument

我有一个基于文档的应用程序。

在我的文档类中，

*   我有一个 BOOL 属性：`isActionPossible`。
*   我也有一个 IBAction : `- (IBAction) doTheAction:(id)sender`。

现在，在 中`MainMenu.xib`，我想将菜单项连接到操作。这很容易，当您知道 Interface Builder 中的 First Responder “代表”应用程序的活动文档时。

**但是我应该如何****将此项目菜单**的可用性（“启用属性”）与**活动文档的 BOOL 属性绑定？****`isActionPossible`**

事实上，在提议的列表中，没有“第一响应者”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:30:35.807

两种选择：

1.  您可以实现菜单验证，请参阅[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html)。简而言之，在显示菜单之前，系统会向处理该操作的同一对象发送验证请求，其中包括第一响应者。您只需向文档类添加一个方法，该方法返回一个`BOOL`; 在你的情况下你的`isActionPossible`财产。
2.  使用其`currentDocument`属性`NSDocumentController`返回与主窗口关联的文档。然后，您可以使用绑定来绑定`<Document Controller>.currentDocument.isActionPossible`. 这种方法更通用，因为您可以将标签内容绑定到值等，并将其用于菜单绑定。

# c - 如何让终端刷新而不在 C 中打印新内容

> ID：16066047
> 
> 赞同：2
> 
> 时间：2013-04-17T17:09:10.897
> 
> 标签：c, linux, terminal, interaction

我想制作一个更动态的界面，而不是每次都打印出一个全新的页面，但不知道如何实现它。例如，如果我们有一个从 0% 到 100% 的下载栏，我想直接在终端上更改数字，而不是打印出 100 行 1%、2%、3%。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:13:28.747

您可以打印一个`\r`称为“回车”的字符，并且在大多数情况下应该将光标返回到行首，以便您可以打印已经存在的文本。我说应该是因为它不能保证，它取决于程序运行的外壳。如果你想做更多奇特的东西，你应该研究[ncurses](http://www.gnu.org/software/ncurses/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:14:04.857

您应该使用跨平台终端访问库，例如[libncurses](http://www.gnu.org/software/ncurses/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:14:25.260

更简单的选择是使用`\r`. 打印`\r`会将光标移动到行首，使您能够打印悬停旧字符。

一个解决方案看起来像

```
for (i = 0; i < 100; ++i)
{
    printf("\r%3i%%", i);
    fflush(stdout);
    /* ... */
} 
```

如果您需要对终端进行更高级的控制，可以使用[termcaps](http://www.gnu.org/software/termutils/manual/termcap-1.3/html_mono/termcap.html)。

# java - 理解java代码（抽象类、扩展函数）

> ID：16066049
> 
> 赞同：0
> 
> 时间：2013-04-17T17:09:24.857
> 
> 标签：java

我试图理解这段代码......

这是原始代码：

```
public class understanding {
    public static void main(String[] args) {
        int n = 5;
        Shape[] s = new Shape[n];
        for (int i = 0; i < n; i++) {
            s[i] = getShape(i);
            System.out.println(s[i]);
        }
        System.out.println(compute(s));
    }

    public static Shape getShape(int i) {
        if (i % 2 == 0) {
            return new Circle(i);
        } else {
            return new Polygon(i, i);
        }
    }

    public static double compute(Shape[] a) {
        double nc = 0;
        for (int i = 0; i < a.length; i++) {
            nc += a[i].getMeasure();
            System.out.println(a[i].getMeasure());
        }
        return nc;
    }
}

public abstract class Shape {
    protected abstract double getMeasure();
}

public class Polygon extends Shape {
    private double x;
    private double y;

    Polygon(double x_, double y_) {
        x = x_;
        y = y_;
    }

    public double getMeasure() {
        return 2 * (x + y);
    }
}

public class Circle extends Shape {
    private double r;

    Circle(double r_) {
        r = r_;
    }

    public double getMeasure() {
        return 2 * r;
    }
} 
```

有人可以帮我理解这段代码如何返回 28。但也解释一下我卡住的部分......

空跑时，我卡在这里：

```
for(int i=0;i<n;i++){  // i=0, i<5, i++
    s[i] = getShape[i] // i=0, go to getShape class
...

getShape(i) //i=0
if (i%2==0) //TRUE so..
    return new Circle(i); //bc the boolean is True, go to Circle() class
...

Circle extends Shape{
    private double r; 
    Circle(double r_){ //I get lost here.. is r=0 now (because r_=i and r=r_)?
        r = r_;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:19:21.417

循环按`main`顺序产生, `Circle(0)`, `Polygon(1,1)`, `Circle(2)`, `Polygon(3,3)`; `Circle(4)`这是因为`i % 2`偶数为 0，奇数为 1。对于多边形，`measure`返回 2*(x+y)，因此对于 (1,1)，您有 2*(1+1) = 4，对于 (3,3)，您有 2 * (3+3) = 12。对于圆圈，`measure`返回 2*r，因此对于 (0)，您有 2 * 0 = 0，对于 (2)，您有 2 * 2 = 4，对于 (4)，您有 2 * 4 = 8\. 0+4 +4+12+8 = 28。

对于迷路的地方，`getShape(i)`将 的值传递`i`给`getShape`; when `i`= 0 this 创建一个 Circle，so`0`被传递给 Circle 构造函数，然后`Circle(0)`设置`r`为 0。同上 if `i`= 2 then `r`= 2，依此类推。

# java - 边框布局间距/边距

> ID：16066055
> 
> 赞同：0
> 
> 时间：2013-04-17T17:09:32.337
> 
> 标签：java, swing, layout-manager, margins, grid-layout

对于我的 Java 初学者课程，我们制作了一个自动井字游戏，现在我们正在创建一个 GUI 来玩它。但是，我在正确设置间距/边距时遇到了很多麻烦。到目前为止，我一直在尝试获取 GUI 的通用框架，然后我将返回并实际实现我已经制作的井字游戏。所以，到目前为止，我有这个：

```
import java.awt.*;

import java.awt.event.*;

import javax.swing.*;

import javax.swing.border.*;

public class ITTTGUI extends JFrame implements ActionListener{

    //butimport javax.swing.border.*;tons
    private JPanel sizePanel;
    private JPanel buttonPanel;
    private JPanel displayPanel;
    private JPanel bottomPanel;
    private JTextField size;
    private JButton rebuildButton;
    private JButton[] buttons;
    private JLabel output;

    //constructor
    public NumberChooser(){
        setTitle("BitchFace");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //content pane
        Container cp = getContentPane();

        //add a panel for the size
        sizePanel = new JPanel();
        sizePanel.setBorder(new EmptyBorder(5, 5, 5, 5) );//adds margin to panel
        sizePanel.setLayout(new FlowLayout());
        size = new JTextField("3",5);
        sizePanel.add(new JLabel("N"));
        sizePanel.add(size);
        rebuildButton = new JButton("Rebuild");
        rebuildButton.addActionListener(this);
        sizePanel.add(rebuildButton);
        //add bottom panel for output

            sizePanel.add(new JButton("Player:"), BorderLayout.EAST);
            sizePanel.add(new JButton("Move:"), BorderLayout.EAST);
            sizePanel.add(new JButton("Winner:"), BorderLayout.EAST);

        //add a panel for the numbers
        buttonPanel = new JPanel();
        buttonPanel.setBorder(new EmptyBorder(5, 5, 5, 5) );//adds margin to panel
        buildButtonsPanel();

        //add bottom panel for output
        JPanel bottomPanel = new JPanel();
        bottomPanel.setBorder(new EmptyBorder(5, 5, 5, 5) );//adds margin to panel
        bottomPanel.add(new JButton("New Game"), BorderLayout.SOUTH);
        bottomPanel.add(new JButton("Advise"), BorderLayout.SOUTH);
        bottomPanel.add(new JButton("Quit"), BorderLayout.SOUTH);

        //add panels to main pane
        cp.setLayout(new BorderLayout());
        cp.add(sizePanel, BorderLayout.EAST);
        cp.add(buttonPanel, BorderLayout.CENTER);
        cp.add(bottomPanel, BorderLayout.SOUTH);
        pack();
    }

    //this is a helper method to rebuild the buttons panel
    private void buildButtonsPanel(){
        int n = 3;
        try{
            n = Integer.parseInt(size.getText());
        }catch(Exception e){
            e.printStackTrace();
        }
        buttonPanel.removeAll();
        buttonPanel.setLayout(new GridLayout(n,n,4,4));
        buttons = new JButton[n*n];
        for(int i=0; i < buttons.length; i++){

            buttons[i] = new JButton("*");
            buttonPanel.add(buttons[i]);
            buttons[i].addActionListener(this);
        }
        revalidate();
        repaint();
        pack();
    }

    public void actionPerformed(ActionEvent e){
        Object s = e.getSource();
        //check to see if the action came from the rebuild button
        if(s == rebuildButton){
            buildButtonsPanel();
        }
        //otherwise it came from the grid

    }

    //entry point
    public static void main(String[] args){
        //create the GUI
        NumberChooser nc = new NumberChooser();
        nc.setVisible(true);
    }

} 
```

不一定要准确，大体相同即可。而且也没有 X 或获胜者变量，因为我还没有实现它。我还尝试将边距从 (5,5,5,5) 更改为喜欢 (1,1,1,1)，但这并没有改变任何东西，所以这也让我感到困惑。

对此的任何帮助，或如何通常进行这项任务将不胜感激。

（而且它不接受我的图片。对不起。）链接是：

问题是看起来像这样： ![我的 GUI 是什么样子的](https://i1224.photobucket.com/albums/ee362/Devolutor/COPimage1_zps459f304b.png)

[https://i1224.photobucket.com/albums/ee362/Devolutor/COPimage1_zps459f304b.png](https://i1224.photobucket.com/albums/ee362/Devolutor/COPimage1_zps459f304b.png)

它应该看起来像这样： ![它应该是什么样子](https://i.stack.imgur.com/8fp1Z.png)

[http://i1224.photobucket.com/albums/ee362/Devolutor/COPimage2_zps8981c846.png](http://i1224.photobucket.com/albums/ee362/Devolutor/COPimage2_zps8981c846.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:45:54.323

要在按钮之间留出更多空间，请在网格布局中使用大于 4 的像素数：

```
buttonPanel.setLayout(new GridLayout(n,n,4,4)); 
```

要在右侧使用网格而不是流，请使用 GridLayout（就像您为按钮所做的那样，但有 4 行和 2 列）而不是 FlowLayout。

# sql-server-2008 - 在 SSRS 2008 R2 或 2012 中是否有本地化“参数/提示”的解决方案？

> ID：16066057
> 
> 赞同：3
> 
> 时间：2013-04-17T17:09:40.733
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, ssrs-2012

我现在使用的是 SQL Server 2008 R2。

我的网站完全按原样显示报告，包括出现参数的容器（客户更喜欢这种方式）。

但是，我的网站解决方案包括本地化（葡萄牙语、英语、西班牙语）。

我尝试通过为每种语言创建一个参数来翻译参数，然后根据所选语言显示它们。它在 SSRS 2008 中不起作用。因为我不知道如何找到提示的可见性属性。

有谁知道解决方案...或者如果 SQL Server 2012 有用于翻译参数提示或条件可见性的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:48:55.087

到目前为止，我发现的唯一解决方案（SSRS 2008、2008R2、2010、2012）是打破 DRY 戒律，并使用语言代码复制报告作为报告名称的一部分（例如 MyReport_sp.rdl、MyReport_de.rdl 等) 然后在客户端请求和 SSRS 实例之间放置一个 Web 服务。然后，Web 服务必须根据随客户端请求传递的“文化”参数将请求发送到正确的报告。

这不是一个好的解决方案，尽管至少 Culture 参数也用于本地化报告的其余部分。我们仍然希望在将来的某个日期，MS 将添加即时本地化功能，我们可以将报告重命名为 MyReport.rdl，然后将所有内容实际本地化。嗯，什么概念……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T17:09:51.387

另一种解决方法是在参数的提示中输入一个数字，然后通过使用“从查询中获取值”或在标签表达式中使用带有 switch 语句的表达式构建器为每个参数的标签添加本地化版本的前缀。

对于从查询中获取值选项，如果您在查询中有翻译版本，您将拥有类似这样的数据集：

```
SELECT ParamLabel, ParamValue
FROM MyLocalisedParameters
WHERE UserLanguage = @Language 
```

或者如果不是这样：

```
SELECT
    CASE @Language
        WHEN 'pt-PT' THEN 'Selecione Departamento: ' + ParamLabel
        WHEN 'es-ES' THEN 'Seleccionar Departamento: ' + ParamLabel
        ELSE 'Select Department: '  + ParamLabel
    END AS ParamLabel
    , ParamValue
FROM MyParametersTable 
```

在这两种情况下，创建 Globals!Language 并将其分配给名为 @Language 的参数。

或者，如果将表达式生成器用于一组硬编码的值，它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/E8g6N.jpg)

无论哪种方式，最终结果都会如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/HwKMV.jpg)

不完美，但比同一份报告的多个副本更容易维护。如果您希望它看起来更整洁，那么只需将参数提示作为参数列表中的一个条目，并将其设置为默认值以避免每一行重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T09:48:09.133

没有...
根据 connect.microsoft.com，此功能已在 SSRS 2005 发布后请求，虽然它在 Microsoft 的 TODO 列表中，但从未分配过程序员执行此操作的时间，因此在 2012 年, SSRS 仍然无法做到这一点。

尽管（费很大力气）可以翻译其他所有内容，但无法翻译参数提示。

也没有条件可见性，参数的可见性是固定的。

此外，没有办法让 SSRS 使用提供的语言而不是浏览器语言设置中设置的语言。

您唯一可以做的就是编写一个 C# 程序来加载您的 XML 文件，获取报告的参数名称（可能还有报告的名称），在数据库中查找它们，然后自动为 n 创建 N 个报告语言。

然后，您必须将您的用户重定向到他们的语言的报告。
然后您只需要编写一个上传工具，因为您不想手动执行此操作。

另一种方式是使用ReportViewer控件，并重新实现参数选择。
我认为有 CrissCross 试图做到这一点，但它在我测试的 2 份报告中都失败了。

一个邪恶的黑客将是：

```
parametername: babla_language1 / blabla_language2 / blabla_language3 / blabla_language4 
```

然后使用 jQuery 获取该字符串。做 string.split('/')[index_of_language]
然后猎杀 / 永远不在“blabla_languageXY”之内

**编辑：**
我实际上是这样做的。您必须使用 setInterval 来执行此操作，因为在选择参数时无法检测到更改。

# cassandra - 关闭 Cassandra 服务器，然后在 Windows 7 中重新启动它

> ID：16066058
> 
> 赞同：3
> 
> 时间：2013-04-17T17:09:41.000
> 
> 标签：cassandra, port, shutdown

我在运行 Windows 7 的本地开发盒中安装了单节点集群，它运行良好。由于某种原因，我需要重新启动我的桌面，然后每当我在命令提示符下这样做时，它总是给我以下异常 -

```
S:\Apache Cassandra\apache-cassandra-1.2.3\bin>cassandra -f
Starting Cassandra Server
Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 7199; nested exception is:
        java.net.BindException: Address already in use: JVM_Bind 
```

表示某处正在使用端口。我对`cassandra.yaml`文件进行了一些更改，所以我需要关闭`Cassandra server`然后重新启动它。

有人可以帮我吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-02T10:02:22.257

在 windows7 中，使用 apache cassandra，会在 cassandra 的根文件夹中创建一个 pid.txt 文件。给出以下指令以停止服务器：

*d:/cassandra/bin> 停止服务器 -p ../pid.txt -f*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T18:08:20.590

运行 -f 将服务器作为服务启动，您可以通过`task manager`.

听起来您的 Cassandra 服务器在您的机器启动时作为服务在后台自行启动。您可以[配置](http://social.technet.microsoft.com/wiki/contents/articles/758.disable-and-enable-windows-7-startup-programs.aspx)Windows 启动服务。要在 windows 的前台运行 cassandra，只需使用：

```
> cassandra.bat 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-07T10:22:13.760

如果您正在使用与 DataStax 社区版捆绑在一起的 Cassandra 并在您的机器启动时作为服务运行，那么您可以执行以下命令来启动和停止 Cassandra 服务器。

以管理员权限启动命令提示符

运行以下命令

```
 net start DataStax_Cassandra_Community_Server

      net stop DataStax_Cassandra_Community_Server 
```

# github - 在 GitHub 上删除带有提交消息的引用？

> ID：16066059
> 
> 赞同：5
> 
> 时间：2013-04-17T17:09:43.467
> 
> 标签：github, command, commit

可以通过以下方式从其他问题中引用问题：

```
reference #xxx 
```

是否有可能从提交的问题中删除引用？（像这个：）

![在此处输入图像描述](https://i.stack.imgur.com/2t9yH.jpg)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-05-14T05:42:55.243

当然可以，但它需要重写提交历史，这在公共回购中被认为是不良行为。

但是，如果您决定这样做，只需编辑提交并强制推送

```
git commit --amend
git push --force origin master 
```

# database - 了解 B+ 树插入

> ID：16066064
> 
> 赞同：7
> 
> 时间：2013-04-17T17:10:13.447
> 
> 标签：database, algorithm, indexing, b-tree

我正在尝试使用以下序列创建 B+ 树，

`10 20 30 40 50 60 70 80 90 100`

所有索引节点应该有最少 2 个和最多 3 个键。我能够插入到 90，但是一旦插入 100，它就会将高度从 2 增加到 3。

问题是 root 的第二个孩子有一个节点，我无法修复它。它应该至少有2个，对吧？有人可以指导我吗？

**更新：**我正在遵循这个算法

```
If the bucket is not full (at most b - 1 entries after the insertion), add the record.
Otherwise, split the bucket.
Allocate new leaf and move half the bucket's elements to the new bucket.
Insert the new leaf's smallest key and address into the parent.
If the parent is full, split it too.
Add the middle key to the parent node.
Repeat until a parent is found that need not split.
If the root splits, create a new root which has one key and two pointers. (That is, the value that gets pushed to the new root gets removed from the original node) 
```

PS：我正在手动进行，以了解算法。没有代码！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:31:57.273

我相信你的 B+ 树没问题，假设你的 B+ 树的顺序是 3。如果顺序是**m**，每个内部节点可以有**⌈m/2⌉**到**m**个子节点。在您的情况下，每个内部节点可以有 2 到 3 个子节点。在 B+ 树中，如果一个节点只有 2 个子节点，那么它只需要 1 个键，因此 B+ 树不会违反任何约束。

如果你仍然困惑，看看这个[`B+ Tree Simulator`](http://csilm.usu.edu/lms/nav/activity.jsp?sid=__shared&cid=usu@mills&lid=53)。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:19:47.670

要在插入值 10 到 100 后获得您绘制的树，树的顺序必须是 4 而不是 3。否则给出的答案是正确的：顺序 m 允许在每个叶子和每个节点中有 m-1 个键。在那之后，维基百科的描述变得有点混乱，因为它专注于孩子而不是键，并且没有提到如何处理四舍五入。只处理键，规则是：

```
Max keys for all nodes = Order-1
Min keys for leaf nodes = floor(Order/2)
Min keys for internal nodes = floor(maxkeys/2) 
```

所以你在节点中有一个键是正确的（order=4，max=3，minleaf=2，minnode=1）。您可能会发现此页面很有用，因为它具有在线 JavaScript 版本的流程以及插入和删除的文档：

[http://goneill.co.nz/btree.php](http://goneill.co.nz/btree.php)

# stata - 我使用 Stata 12 中的什么命令来解释有限因变量模型的系数？

> ID：16066067
> 
> 赞同：1
> 
> 时间：2013-04-17T17:10:33.670
> 
> 标签：stata, margins

我正在运行以下代码：

```
oprobit var1 var2 var3 var4 var5 var2##var3 var4##var5 var6 var7 etc. 
```

如果没有交互项，我可以使用以下代码来解释系数：

```
mfx compute, predict(outcome(2)) 
```

[对于等于 2 的结果（我总共有 4 个结果）]

但由于`mfx`不适用于交互条款，我得到一个错误。我尝试使用 `margins`命令，但它也不起作用！！！ `margins var2 var3 var4 var5 var2##var3 var4##var5 var6 var7 etc... , post`

`margins`仅适用于交互项：`(margins var2 var3 var4 var5, post)` 我使用什么命令来解释交互和常规变量？

最后，用简单的语言，我的问题是：给定上面的回归模型，我可以使用什么命令来解释系数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:09:56.260

mfx 是一个旧命令，已替换为边距。这就是为什么它不适用于您用于定义交互的因子变量表示法。我不清楚您实际上打算使用 margins 命令计算什么。

下面是一个示例，说明如何获得结果 2 概率的平均边际效应：

```
. webuse fullauto
(Automobile Models)

. oprobit rep77 i.foreign c.weight c.length##c.mpg

Iteration 0:   log likelihood = -89.895098  
Iteration 1:   log likelihood = -76.800575  
Iteration 2:   log likelihood = -76.709641  
Iteration 3:   log likelihood = -76.709553  
Iteration 4:   log likelihood = -76.709553  

Ordered probit regression                         Number of obs   =         66
                                                  LR chi2(5)      =      26.37
                                                  Prob > chi2     =     0.0001
Log likelihood = -76.709553                       Pseudo R2       =     0.1467

--------------------------------------------------------------------------------
         rep77 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
     1.foreign |   1.514739   .4497962     3.37   0.001      .633155    2.396324
        weight |  -.0005104   .0005861    -0.87   0.384    -.0016593    .0006384
        length |   .0969601   .0348506     2.78   0.005     .0286542     .165266
           mpg |   .4747249   .2241349     2.12   0.034     .0354286    .9140211
               |
c.length#c.mpg |  -.0020602   .0013145    -1.57   0.117    -.0046366    .0005161
---------------+----------------------------------------------------------------
         /cut1 |   17.21885   5.386033                      6.662419    27.77528
         /cut2 |   18.29469   5.416843                      7.677877    28.91151
         /cut3 |   19.66512   5.463523                      8.956814    30.37343
         /cut4 |   21.12134   5.515901                      10.31038    31.93231
--------------------------------------------------------------------------------

.  margins, dydx(*) predict(outcome(2))

Average marginal effects                          Number of obs   =         66
Model VCE    : OIM

Expression   : Pr(rep77==2), predict(outcome(2))
dy/dx w.r.t. : 1.foreign weight length mpg

------------------------------------------------------------------------------
             |            Delta-method
             |      dy/dx   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   1.foreign |  -.2002434   .0576487    -3.47   0.001    -.3132327    -.087254
      weight |   .0000828   .0000961     0.86   0.389    -.0001055    .0002711
      length |  -.0088956    .003643    -2.44   0.015    -.0160356   -.0017555
         mpg |   -.012849   .0085546    -1.50   0.133    -.0296157    .0039178
------------------------------------------------------------------------------
Note: dy/dx for factor levels is the discrete change from the base level. 
```

如果您想要预测而不是边际效应，请尝试

```
margins, predict(outcome(2)) 
```

仅交互项的边际效应在非线性模型中更难计算。详情[在这里](http://www.stata-journal.com/article.html?article=st0063)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T01:03:51.883

```
The marginal effects for positive outcomes, Pr(depvar1=1, depvar2=1), are
        . mfx compute, predict(p11)
The marginal effects for Pr(depvar1=1, depvar2=0) are
        . mfx compute, predict(p10)
The marginal effects for Pr(depvar1=0, depvar2=1) are
        . mfx compute, predict(p01) 
```

# c# - 在 Windows 上将 XSP 作为独立服务器运行需要什么？

> ID：16066073
> 
> 赞同：0
> 
> 时间：2013-04-17T17:10:52.333
> 
> 标签：c#, xsp

我正在尝试为 Windows 设置一个最小的 XSP 副本，供学生在 ASP.NET 介绍课程中使用。他们有 Visual C#，我不想通过给他们 Mono 本身来混淆问题。由于各种原因，我不想使用 IIS。我之前用 Jetty 的压缩副本为 JSP 做了类似的事情，效果非常好。

作为一个实验，我安装了 Mono 2.10.9，并且可以直接从安装中成功运行 XSP。但是可执行文件（xsp2.exe）在lib\mono\2.0\winhack，服务器环境在lib\xsp\test。我想创建一个目录，其中包含一组最少的文件（xsp2.exe、xsp.exe.config、Mono.WebServer2.dll 以及其他任何需要的文件），我可以将其压缩并提供给学生。但是，我得到的只是 Mono.WebServer2 的“找不到文件”异常。

我复制了 Mono.WebServer2.dll，然后为 Mono.Security 得到了相同的结果。当我复制 Mono.Security.dll 时，错误指的是 Mono.WebServer2 “或其依赖项之一”（没有告诉我是哪一个）。

谁能告诉我我需要什么作为最小设置？

# html - 为什么没有明确宽度的表格单元格样式元素不会拉伸以填充表格/表格行样式父项的剩余宽度？

> ID：16066074
> 
> 赞同：7
> 
> 时间：2013-04-17T17:10:57.617
> 
> 标签：html, css, css-tables

有人可以解释为什么下面的两个表格布局不一样（具体来说，为什么第二个“表格单元格”div 不会像在真正的桌子）？

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head></head>
    <body>
        <div style="width: 100%; border: 1px solid black;">
            <div style="display: table-cell; border: 1px solid red; height: 20px; width: 20px;">.</div>
            <div style="display: table-cell; border: 1px solid red;">.</div>
            <div style="display: table-cell; border: 1px solid red; height: 20px; width: 20px;">.</div>
        </div>
        <table style="width: 100%; border: 1px solid black; border-spacing: 0;">
            <tr>
                <td style="width: 20px; border: 1px solid red;">.</td>
                <td style="border: 1px solid red;">.</td>
                <td style="width: 20px; border: 1px solid red;">.</td>
            </tr>
        </table>
    </body>
</html> 
```

编辑：如果您尝试将图像设置为表格单元格，结果会出现一些意外行为：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
      <style type="text/css"><![CDATA[
* {border: 1px solid black;}
table, .table, .row {
    width: 100%;
}
.table {
    display: table;
}
.row {
    display: table-row;
}
.cell {
    display: table-cell;
}
img {
    height: 21px;
    width: 21px;
}
    ]]></style>
  </head>
  <body>
    <div class="table">
      <div class="row">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" class="cell" />
        <div class="cell">
        </div>
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" class="cell" />
      </div>
    </div>
  </body>
</html> 
```

第二个单元格样式的 div 不会一直水平拉伸以填充表格宽度的其余部分。如果您向其中添加内容，它会逐渐添加。诡异的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T17:17:07.083

除非 table-cell 元素的父元素是 table-row 元素（并且其父元素是 table 元素）或 table 元素，否则会为您插入匿名 table 和 table-row 元素。匿名元素无法设置样式。

如果您希望表格单元格元素占据整个可用宽度，则需要创建一个明确的表格元素来包含它们以用于样式目的。

[http://tinker.io/29b92](http://tinker.io/29b92)

```
 <div style="width: 100%; display: table; border: 1px solid black;">
        <div style="display: table-cell; border: 1px solid red; height: 20px; width: 20px;">.</div>
        <div style="display: table-cell; border: 1px solid red;">.</div>
        <div style="display: table-cell; border: 1px solid red; height: 20px; width: 20px;">.</div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:21:53.787

原来答案是'图像不能可靠地作为表格单元格'，但我错误地简化了我的初始测试用例。谢谢大家！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T17:19:21.197

如果您希望其中一行扩展到相同的宽度，您应该使用其他表中的表。

另外，如果你的父表是100%，你的子表也不可能是100%，你试过98%吗？

为您的 HTML 和外部 CSS 文件设置样式，以防止每行重复您的子句。

如果这不起作用，请告诉我，我将继续寻找您可以尝试的更多选项。

# asp.net - ASP.Net 中的 OData 服务

> ID：16066075
> 
> 赞同：0
> 
> 时间：2013-04-17T17:10:57.910
> 
> 标签：asp.net, asp.net-mvc, odata

我有一个 O-Data 服务，我已经使用 VS 2012 在 ASP.Net 项目中使用了它

现在我想使用 ASP.Net 用户控件自动处理此 odata 服务的 CRUD 操作。

我希望找到一个像 GridView 这样的用户控件，它允许我：

1.  显示来自 odata 服务的数据。
2.  添加新记录。
3.  更新现有的。
4.  删除现有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:20:57.993

您有几个选择，但 Kendo UI/Telerik 的 MVC Grid 可能是最流行的内置支持：http: [//blogs.telerik.com/aspnetmvcteam/posts/10-12-16/binding-telerik-grid-for -asp-net-mvc-to-odata.aspx](http://blogs.telerik.com/aspnetmvcteam/posts/10-12-16/binding-telerik-grid-for-asp-net-mvc-to-odata.aspx) [http://www.telerik.com/products/aspnet-mvc.aspx](http://www.telerik.com/products/aspnet-mvc.aspx)

就个人而言，我建议您自己进行 CRUD 操作，或者使用 Datatables [http://www.datatables.net/](http://www.datatables.net/)之类的东西并编写您自己的适配器以在其间运行。

# android - 我将如何调用此方法在我的应用程序开始时清除数据库？

> ID：16066080
> 
> 赞同：0
> 
> 时间：2013-04-17T17:11:23.173
> 
> 标签：android, boolean, public

此方法在我的数据库类中

```
 public boolean deletePlayers(long paramLong)
  {
    return this.mDb.delete("Players", "_id=" + paramLong, null) > 0;
  } 
```

我想在我的 Launch Activity 类中调用它

```
public class LaunchActivity extends Activity {
 Button start;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homescreen);
        addListenerOnButton();
        PlayerDbAdapter db = new PlayerDbAdapter(getApplicationContext());
        db.open();
        db.deletePlayers(0);
        db.close();

    }
    public void addListenerOnButton() {

        final Context context = this;

        start = (Button)findViewById(R.id.startButton);

        start.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {
    Intent intent = new Intent(context, LoginActivity.class);
                                    startActivity(intent); 
                                    finish(); 
```

这是我尝试过的

```
 PlayerDbAdapter db = new PlayerDbAdapter(getApplicationContext());
        db.open();

db.deletePlayers(0);
        db.close(); 
```

但我仍然从我的列表视图中的先前条目中获取数据。我也试过

```
db.deletePlayers(1); 
```

无济于事

全适配器类

```
public class PlayerDbAdapter {

private static final String DATABASE_TABLE = "Players";
private static final String DATABASE_CREATE = "CREATE TABLE "+DATABASE_TABLE+" (_id integer primary key autoincrement, Player_Name text not null, Player_Position text not null, Player_Number text not null, Team text not null);";
private static final int DATABASE_VERSION = 3;
  public static final String KEY_BODY = "Player_Name";
  public static final String KEY_ROWID = "_id";
  public static final String KEY_TITLE = "Player_Position";
  public static final String KEY_NUMBER = "Player_Number";
  public static final String KEY_TEAM = "Team";
private static final String TAG = "PlayerDbAdapter";
  private final Context mCtx;
  private SQLiteDatabase mDb;
  private DatabaseHelper mDbHelper;

  public PlayerDbAdapter(Context paramContext)
  {
    this.mCtx = paramContext;
  }

  public void close()
  {
    this.mDbHelper.close();
  }

  public long createPlayers(String playerName, String playerPosition, String playerNumber, String team)
  {
    ContentValues localContentValues = new ContentValues();
    localContentValues.put(KEY_BODY, playerName);
    localContentValues.put(KEY_TITLE, playerPosition);
    localContentValues.put(KEY_NUMBER, playerNumber);
    localContentValues.put(KEY_TEAM, team);
    try{
        return this.mDb.insert("Players", null, localContentValues);
    } catch (Exception e) {
        Log.e("Juma", e.getMessage());
    }

    return 0;
  }

  public boolean deletePlayers(long paramLong)
  {
    return this.mDb.delete("Players", "_id=" + paramLong, null) > 0;
  }

  public Cursor fetchAllPlayers()
  {
    return this.mDb.query("Players", new String[] { "_id", "Player_Name", "Player_Position","Player_Number","Team" }, null, null, null, null, null);
  }

  public Cursor fetchPlayer(long paramLong)
    throws SQLException
  {
    Cursor localCursor = this.mDb.query(true, "Players", new String[] { "_id", "Player_Name", "Player_Position", "Player_Number","Team" }, "_id=" + paramLong, null, null, null, null, null);
    if (localCursor != null)
      localCursor.moveToFirst();
    return localCursor;
  }

  public PlayerDbAdapter open()
    throws SQLException
  {
    this.mDbHelper = new DatabaseHelper(this.mCtx);
    this.mDb = this.mDbHelper.getWritableDatabase();
    return this;
  }

  public boolean updateNote(long paramLong, String paramString1, String paramString2,String paramString3,String paramString4)
  {
    ContentValues localContentValues = new ContentValues();
    localContentValues.put("Player_Name", paramString1);
    localContentValues.put("Player_Position", paramString2);
    localContentValues.put("Player_Number", paramString3);
    localContentValues.put("Team", paramString4);
    return this.mDb.update("players", localContentValues, "_id=" + paramLong, null) > 0;
  }

  private static class DatabaseHelper extends SQLiteOpenHelper
  {
    DatabaseHelper(Context paramContext)
    {
      super(paramContext, "Players", null, 1);
    }

    public void onCreate(SQLiteDatabase paramSQLiteDatabase)
    {
      paramSQLiteDatabase.execSQL("CREATE TABLE Players (_id integer primary key autoincrement, Player_Name text not null, Player_Position text not null,  Player_Number text not null, Team text not null);");
    }

    public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
    {
      Log.w("PlayerDbAdapter", "Upgrading database from version " + paramInt1 + " to " + paramInt2 + ", which will destroy all old data");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS Players");
      onCreate(paramSQLiteDatabase);
    }

  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:35:30.870

从您的班级发布一些代码，在您初始化适配器时`DBAdapter`可以快速替换。删除项目后，您还会刷新列表视图吗？如果没有，请调用您的 listview 适配器。`getApplicationContext()``this``notifyDataSetChanged()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:20:57.607

`deletePlayers`如果要清除所有玩家，请不带参数创建并调用它。

```
public boolean deletePlayers()
{
    return this.mDb.delete("Players", "1", null) > 0;
} 
```

# mysql - 使用 sum & group 加入三个 mysql 表

> ID：16066081
> 
> 赞同：0
> 
> 时间：2013-04-17T17:11:26.110
> 
> 标签：mysql, sql

我有以下三个表

1.  acc_chart_of_accounts
2.  acc_chart_of_sub_accounts
3.  acc_posting_details

所有用户都使用表 acc_chart_of_accounts 作为名义账户的起始列表，表 chart_of_sub_accounts 包含用户添加的任何新名义账户。表 acc_posting_details 包含账户交易条目。目标是使用 acc_chart_of_accounts 表作为基础显示名义账户列表，并将用户创建的任何其他名义代码与每个名义代码的总和添加到列表中，所有这些都由 company_id 过滤。为此，我尝试了以下方法：

我采用了 acc_chart_of_accounts 表和 acc_chart_of_sub_accounts 表，并将以下查询应用于下面的两个表。

**acc_chart_of_accounts**

名义上的acc_no coa_name

* * *

```
 10  Freehold property cost             
        20  Freehold property depreciation     
       110  Leasehold property cost            
       120  Leasehold property depreciation    
       210  Plant and machinery cost 
```

**acc_chart_of_sub_accounts**

名义上的acc_no coa_name

* * *

```
 1200  Bank current account 
```

这是从主表**acc_chart_of_accounts**和用户设置的子表**acc_chart_of_sub_accounts中列出名义账户的查询...**

```
SELECT nominal_acc_no,coa_name FROM
(
    SELECT nominal_acc_no ,coa_name FROM acc_chart_of_accounts
    UNION
    SELECT nominal_acc_no,coa_name FROM acc_chart_of_sub_accounts
) A; 
```

这就是它给出的结果，我删除了一些结果以使事情更容易阅读，您可以看到该查询采用右表 acc_chart_of_sub_accounts 上的名义代码条目并将其插入到左表的列表中acc_chart_of_accounts 虽然在列表的末尾，但我想 ORDER BY 会对其进行排序。

因此，当用户将新的名义账户添加到他们的账户时，它会显示在主图表上，如下所示。

名义上的acc_no coa_name

* * *

```
 10  Freehold property cost             
        20  Freehold property depreciation     
       110  Leasehold property cost            
       120  Leasehold property depreciation    
       210  Plant and machinery cost                       
       **1200  Bank current account** 
```

我现在需要做的是将下表 acc_posting_details 添加到组合中，我需要能够将此表链接到其他两个表，以便它将任何总余额添加到返回的结果中。

post_detail_id 名义上的_acc_no 借记贷方 company_id

* * *

```
 1            2109    0.00   27.00             0
         2            2200    4.00    0.00             0
         3            7000   23.00    0.00             0
         4            2109    0.00   27.00             0
         5            2200    4.00    0.00             0
         6            6100   23.00    0.00             0 
```

现在，当用户查看他们的会计科目表时，他们将看到主表中的所有名义代码加上他们可能设置的任何其他代码以及每个名义代码可能存在的任何余额。此查询必须通过过滤company_id 将来自 $_SESSION 值。

以下是我设法使用以下代码生成的查询的结果：

```
SELECT
    `acc_chart_of_accounts`.`nominal_acc_no`
    , `acc_chart_of_accounts`.`coa_name`
    , SUM(`acc_posting_details`.`debit`) AS `dabit`
    , SUM(`acc_posting_details`.`credit`) AS `credit`
    , `acc_posting_details`.`company_id`
FROM
    `acc_chart_of_accounts`
    LEFT JOIN `acc_posting_details` 
        ON (`acc_chart_of_accounts`.`nominal_acc_no` = `acc_posting_details`.`nominal_acc_no`)
GROUP BY `acc_chart_of_accounts`.`nominal_acc_no`; 
```

nominal_acc_no coa_name 借方贷方

* * *

```
 10  Freehold property cost             (NULL)  (NULL)        
        20  Freehold property depreciation     (NULL)  (NULL)        
       110  Leasehold property cost            (NULL)  (NULL)        
       120  Leasehold property depreciation    (NULL)  (NULL)        
       210  Plant and machinery cost           (NULL)  (NULL)       
       310  Fixture and fittings cost          (NULL)  (NULL)        
       320  Fixture and fittings depreciation  (NULL)  (NULL)       
       410  Motor vehicles cost                (NULL)  (NULL)        
       420  Motor vehicles depreciation        (NULL)  (NULL)       
       700  Investments                        (NULL)  (NULL)        
       900  Goodwill                           (NULL)  (NULL)        
      1000  Stock                              (NULL)  (NULL)        
      1100  Trade debtors                      (NULL)  (NULL)     
      1103  Debtors and prepayments            (NULL)  (NULL)        
      2100  Purchase ledger control            (NULL)  (NULL)        
      2109  Creditors                            0.00   54.00           
      2200  VAT control acc                      8.00    0.00            
      2300  PAYE NI Liability                  (NULL)  (NULL)        
      2600  Bank loan                          (NULL)  (NULL)        
      2700  Hire purchase                      (NULL)  (NULL)       
      2800  Lease purchase                     (NULL)  (NULL)        
      2900  Other loans                        (NULL)  (NULL)        
      3000  Capital Acc BBF                    (NULL)  (NULL)        
      3100  Capital introduced                 (NULL)  (NULL)       
      3200  Profit and loss account            (NULL)  (NULL)        
      3300  Personal drawings                  (NULL)  (NULL)       
      4000  Sales                              (NULL)  (NULL)        
      4009  Discounts allowed                  (NULL)  (NULL)        
      4100  Eport sales                        (NULL)  (NULL)        
      4200  Royalties received                 (NULL)  (NULL)       
      4210  Commisions received                (NULL)  (NULL)        
      4220  Insurance payout received          (NULL)  (NULL)       
      4230  Rental income                      (NULL)  (NULL)        
      4240  Bank interest received             (NULL)  (NULL)        
      5000  Purchases                          (NULL)  (NULL)       
      5900  Opening stock                      (NULL)  (NULL)       
      5950  Closing stock                      (NULL)  (NULL)        
      6000  Direct labour                      (NULL)  (NULL)        
      6100  Goods out cost                      23.00    0.00           
      6200  Goods in cost                      (NULL)  (NULL) 
```

这只是读取两个帐户表，并没有读取 acc_chart_of_sub_accounts 中的额外名义帐户，但它给出了我想要结束的内容。我真的很难过，所以我真的可以做伸出援助之手。谢谢

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:02:55.363

I think maybe you are looking for a sub select. Your question is kind of rambling, so I'm not sure.

```
SELECT
    A.`nominal_acc_no`
    , A.`coa_name`
    , SUM(`acc_posting_details`.`debit`) AS `dabit`
    , SUM(`acc_posting_details`.`credit`) AS `credit`
    , `acc_posting_details`.`company_id`
FROM
(
    SELECT nominal_acc_no ,coa_name FROM acc_chart_of_accounts
    UNION
    SELECT nominal_acc_no,coa_name FROM acc_chart_of_sub_accounts
) A
    LEFT JOIN `acc_posting_details` 
        ON (A.`nominal_acc_no` = `acc_posting_details`.`nominal_acc_no`)
GROUP BY A.`nominal_acc_no`; 
```

# mysql - 加入动态sql

> ID：16066099
> 
> 赞同：1
> 
> 时间：2013-04-17T17:12:26.340
> 
> 标签：mysql, sql, dynamic, join

我有以下按预期工作的动态 sql 查询。但现在我想将结果与 account_id 上的另一个查询的结果结合起来。我尝试了通常的方法，将查询设为派生表然后加入，但这不起作用（我认为它与所有分号有关）。有没有一种特殊的方法可以将动态 sql 查询与另一个查询连接起来？

```
 SET @sql = NULL;
  SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN phone_name = ''',
      phone_name,
      ''' THEN 1 else 0 END) AS `',
      phone_name, '`'
    )
  ) INTO @sql
FROM yt;

SET @sql 
  = CONCAT('SELECT account_id, ', @sql, ' 
            from yt
            group by account_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:29:00.350

您可以简单地将查询的其余部分放在串联中吗？

```
...
/* Your existing code */
SET @sql 
  = CONCAT('SELECT account_id, ', @sql, ' 
            from yt
            group by account_id');

/* Now put your derived table stuff in */
SET @sql 
  = CONCAT('select a.account_id, b.something_else
            from some_table as b join (', @sql, ') as a
            on a.account_id = b.account_id');

/* Continue your existing code */
PREPARE stmt FROM @sql;
... 
```

# java - Android - 随机 NullPointerException 崩溃报告

> ID：16066101
> 
> 赞同：0
> 
> 时间：2013-04-17T17:12:26.913
> 
> 标签：java, android, nullpointerexception, ormlite

有时我会收到来自谷歌的随机崩溃报告`NullPointerExceptions`（见上文）。我试图重现这些错误，但我无法捕捉到它们。

我得到的 NPE 示例：

```
Caused by: java.lang.NullPointerException
at com.gamequiz.databasemanager.CategoryManager.getAllCategories(CategoryManager.java:28) 
```

* * *

```
Caused by: java.lang.NullPointerException
at com.gamequiz.databasemanager.QuestionManager.getQuestionsFromLevel(QuestionManager.java:30)
at com.gamequiz.databasemanager.QuestionManager.getNumberOfQuestionAnsweredFromLevel(QuestionManager.java:148) 
```

* * *

我虽然我的`dbHelper`变量`null`有时是，但我不知道为什么。

由于我不知道如何解决这个问题，我发布了我的代码的所有步骤：

首先，我初始化所有管理器`LaunchActivity`：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_launch);

        initializeAllManagers();

       //some stuff

}

public void initializeAllManagers(){
        InitializeAllManagers.init(getApplicationContext());
    } 
```

在我的`InitializeAllManagers`课堂上，我设置了应用程序生命周期所需的所有管理器：

```
public class InitializeAllManagers {

    public static void init(Context context){
        DatabaseManager.init(context);
        CategoryManager.init(DatabaseManager.getInstance().getHelper());
        //and others initializations
    }
} 
```

`DatabaseManager`类（dbManager 和 dbHelper 的初始化）：

```
public class DatabaseManager {

    private static DatabaseManager instance;
    private DatabaseHelper helper;

    public static void init(Context ctx) {
        if (instance==null) {
            instance = new DatabaseManager(ctx);
        }
    }

    public static DatabaseManager getInstance() {
        return instance;
    }

    private DatabaseManager(Context ctx) {
        helper = new DatabaseHelper(ctx);
    }

    public DatabaseHelper getHelper() {
        return helper;
    }
} 
```

最后有一个经理的例子：

```
public class CategoryManager {

    private static DatabaseHelper dbHelper;

    public static void init(DatabaseHelper dbHelperInstance) {
        dbHelper = dbHelperInstance;
    }

    public static ArrayList <Category> getAllCategories(){
            ArrayList <Category> cList = null;
            try {
                cList = (ArrayList<Category>) dbHelper.getCategoryDao().queryForAll();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return cList;
    }
} 
```

所以我怀疑我的`dbHelper`变量`null`有时是。有谁知道我如何解决这个问题？

**编辑 ：**

NPE主要指这几行：

```
cList = (ArrayList<Category>) dbHelper.getCategoryDao().queryForAll(); 
Dao <Question, Long> questionDao = dbHelper.getQuestionDao(); 
```

这就是为什么我怀疑`dbHelper`有时`null`会发生这种情况，并且当应用程序休眠片刻时显然会发生崩溃（请参阅上面的反馈）。

* * *

一位用户的反馈：

> 所以，主要是如果我离开应用程序而不退出它，当我尝试返回它时，应用程序经常会崩溃。有时我只是被送回菜单，但主要是完全退出应用程序，我必须重新启动它才能继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:26:12.980

我怀疑当应用程序最小化一段时间然后重新打开时会发生这种情况。如果感觉需要内存，Android 可以并且会从堆中删除对象。特别是静态变量可以被删除。在访问静态变量之前检查它们是否为空。

例如，在您的`DatabaseManager`类中，在`getInstance()`方法中而不是在中创建实例`init()`。

```
public static DatabaseManager getInstance() {
    if(instance == null) instance = new DatabaseManager();
    return instance;
} 
```

**编辑：**
请注意，我在这个答案中的推理是错误的。请阅读所有评论以进行澄清。

# c++ - CPU 架构的 8 位 FFT？

> ID：16066107
> 
> 赞同：3
> 
> 时间：2013-04-17T17:12:57.703
> 
> 标签：c++, c, fft, sse, 8-bit

我正在寻找可以处理 8 位实数到复数转换（大小为 65K）的 FFT 引擎。对此的需求是加速实时信号处理引擎。它目前受到 8 位 -> FP32 和 FP32 -> 8 位转换的限制，以及实际的 FFT 受内存带宽限制（我们目前正在使用 FFTW）。

我认为 Spiral 项目可能能够做到这一点[http://spiral.net](http://spiral.net)，但他们网页上似乎唯一可用的代码是用于单次或双次转换。

任何人都知道可以做到这一点的任何 C 或 C++ 库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:46:18.310

有时我遇到了同样的问题。我的数据帧的 FFTW 在 14 毫秒内执行（向前、一些计算和向后），而直接字节（或短）到浮点数组的转换需要 12-19 毫秒。所以我制作了 SSE 函数来将字节转换为浮点数（每个周期 4 个元素），并且获得了显着的速度增益 - 现在转换在 2.2-5 毫秒内完成。

如果您的编译器可以使用自动向量化，请先尝试。

如果没有，请使用内在函数编写简单的转换函数。

我使用过内联汇编程序（MOVD、PUNPCKLBW、PUNPCKLWD、CVTDQ2PS、MOVAPS 命令序列）。

```
procedure BytesToSingles(Src, Dst: Pointer; Count: Integer);
asm
  //EAX = Src pointer to byte array
  //EDX = Dst pointer to float array !!! 16 byte-aligned !!!
  //ECX = Count (multiple of four)
  SHR ECX, 2           // 4 elements per cycle
  JZ @@Exit
  PXOR XMM7, XMM7      // zeros
@@Cycle:
  MOVD XMM1, [EAX]     // load 4 bytes
  PUNPCKLBW XMM1, XMM7 // unpack to words
  PUNPCKLWD XMM1, XMM7 // words to int32
  CVTDQ2PS XMM0, XMM1  // convert integers to 4 floats
  MOVAPS [EDX], XMM0   // store 4 floats to destination array
  ADD EAX, 4           // move array pointers
  ADD EDX, 16
  LOOP @@Cycle
@@Exit:
end; 
```

请注意，正如 Paul R 在评论中所写，对 8 位数据的 FFT 实现会遇到数值错误问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:32:46.723

您*不想*在定点进行所有处理。您的数据将在该大小的 FFT 中变成糊状。从技术上讲，您可以使用 32 位定点并保留所有动态，但您仍然必须转换数据*，并且*它会比使用浮点数慢（您标记了 SSE，所以我假设您在具有 FPU 的英特尔机器上） . 我的意见基于我创建[Kissfft的工作](http://sourceforge.net/projects/kissfft/)

而是专注于加快类型转换。我没有运行 MBo 的汇编代码，但它看起来是正确的方法。我认为展开可能会使其更快。

如果您不习惯汇编，请改用 SSE2 编译器内部函数。它会一样快（假设编译器不错），它会让你的代码更具可读性和可维护性。 [这个答案](https://stackoverflow.com/questions/9161807/sse-convert-short-integer-to-float)会给你大部分你需要的东西。

# c# - 访问特定（非当前）区域性的资源字符串

> ID：16066108
> 
> 赞同：3
> 
> 时间：2013-04-17T17:13:00.103
> 
> 标签：c#, .net, asp.net-mvc-4, localization, resx

我有一个 ASP.NET MVC4 应用程序，在“资源”文件夹中有两个资源文件，如下所示：

```
项目
 资源
  Resources.fr-CA.resx
  资源.resx

```

我根据用户设置设置了当前文化，并且此设置一切正常。

但是，我有一个处理错误的类，既向用户显示它们，又将它们记录在数据库中。我想要的是使用用户的当前文化显示错误消息，但使用英文消息将其记录在数据库中。

我做了一些研究，发现了几个选项来获取特定文化的资源字符串，但我遇到了问题。

`HttpContext.GetLocalResourceString("~/Resources/Resources.resx", "Error_Message", CultureInfo.CreateSpecificCulture("en-US"))`throws`The resource class for this page was not found. Please check if the resource file exists and try again.`我试过弄乱 uri 无济于事。

`HttpContext.GetGlobalResourceString("Resources", "Error_Message", CultureInfo.CreateSpecificCulture("en-US"))`总是返回 null。

我怎样才能做到这一点（在不改变的情况下获取特定文化的资源字符串`Thread.CurrentThread.CurrentCulture`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:19:23.460

不要使用资源字符串进行日志记录。

*   资源字符串可以在与代码无关的情况下更改，从而使日志更难搜索。
*   如果字符串不在代码中内联，则更难理解将写入日志文件的内容。

但是，如果您确实需要从其他语言获取字符串，请使用较低级别的 API 来获取正确的资源集并获取字符串：[ResourceManager.GetResourceSet](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.getresourceset.aspx)和[ResourceSet.GetString](http://msdn.microsoft.com/en-us/library/517tyftf.aspx)

# javascript - 不可读的 .js 文件？如何转换回来？

> ID：16066109
> 
> 赞同：3
> 
> 时间：2013-04-17T17:13:02.313
> 
> 标签：javascript, jquery, html

我有 3 个文件 something.js、something.min.js 和 something.style.js 第三个是不可读的（这是在我上传的服务器中）：[删除链接有充分的理由]。我想将文件转换回正常文件，或作为可读字符串访问。如果我可以将我的普通js转换为这种格式，那就太好了。感谢您的帮助，并对我的语法错误感到抱歉:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T17:18:14.507

这是一个典型的混淆错误。

我使用了[http://jsbeautifier.org/](http://jsbeautifier.org/)，你来了！

[http://pastebin.com/mH1x33Un](http://pastebin.com/mH1x33Un)

# javascript - jQuery 插件 - 如何添加/绑定事件

> ID：16066110
> 
> 赞同：6
> 
> 时间：2013-04-17T17:13:03.373
> 
> 标签：javascript, jquery, jquery-plugins

好的，这是我第一次尝试创建一个 jQuery 插件，所以我目前正在关闭教程。

到目前为止我有

```
(function($)
{
    $.tippedOff = function(selector, settings)
    {
        var config = {
            'top':0,
            'left':0,
            'wait':3000
        };
        if(settings){$.extend(config, settings);}

        var $elem = $(selector);
        if($elem.length > 0)
        {
            $elem.each(function()
            {
                $(this).css({"color":"#F00"});
            })
        }

        return this;
    };
})(jQuery); 
```

这适用于更改所提供元素的文本颜色。然而。我想为插件生效的元素添加功能。例如悬停或单击事件。但我现在无法理解这个想法，因为它`selector`可以是任何东西。所以它不像我可以通过普通的jQuery方法那样硬编码一些特定的东西。

那么，有了这个，我如何在渲染后将这种类型的功能添加到事物中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T19:32:08.263

在创建插件时，很容易让事情变得过于复杂，所以尽量让事情变得简单。

我为您提供了该插件的***两个***示例。`tippedOff`这也是两个插件的[jsfiddle 演示](http://jsbin.com/ukotit/39/edit)。

第一个按原样使用您的原始代码（未进行**重大更改**）：

```
$.tippedOff = function(selector, settings)
    {
        var config = {
            'top':0,
            'left':0,
            'wait':3000
        };
        if(settings){$.extend(config, settings);}

        var $elem = $(selector);
        if($elem.length > 0)
        {
            $elem.each(function()
            {
              //bind mouseenter, mouseleave, click event
                $(this).css({"color":"#F00"})
                .mouseenter(function(){
                  $(this).css({"color":"green"});
                })
                .mouseleave(function(){
                  $(this).css({"color":"#F00"});
                })
                .click(function(){
                  $(this).html('clicked');
                });

            })
        }

        return this;
    }; 
```

但是，这个是基于您的原始代码。基本上，我已经使用[这些技巧](http://docs.jquery.com/Plugins/Authoring)重建了您的原始代码。这就是我个人的做法。我还为您提供了以下更改的细分。（**做出重大改变**）：

```
$.fn.tippedOff = function(settings) {
      var config = $.extend( {
          'top':0,
          'left':0,
          'wait':3000,
          'color': 'orange',
          'hoverColor': 'blue'
      }, settings);

      return this.each(function() {
          $this = $(this);
          $this.css({ 'color': config.color})
          .mouseenter(function(){
             $this.css({ 'color': config.hoverColor });
          })
          .mouseleave(function(){
             $this.css({ 'color': config.color });
          })
          .click(function(){
             $this.html('clicked');
          });
      });
    } 
```

## --------------------------------------

## 分解：

***原始代码：***

```
$.tippedOff = function(selector, settings) { 
```

***改变：***

```
$.fn.tippedOff = function( settings ) { 
```

**注释：**

`$.tippedOff`和之间的区别`$.fn.tippedOff`是巨大的！将插件添加到`$.fn`命名空间而不是`$`命名空间将使您不必提供 a`selector`并使生活更简单。

我个人喜欢[这个答案](https://stackoverflow.com/questions/15393661/jquery-plugin-authoring/15393690#answer-15393702)，其中@Chad 指出：

> 我遵循的经验法则是：使用 $. 当它与 DOM 无关（如 ajax）时，使用 $.fn。当它对使用选择器抓取的元素（如 DOM/XML 元素）进行操作时。

* * *

***原始代码：***

```
if(settings){$.extend(config, settings);} 
```

***改变：***

```
var config = $.extend( {
          'top':0,
          'left':0,
          'wait':3000
      }, settings); 
```

**注释：**

有一个`if`声明是多余的。[`.extend()`](http://api.jquery.com/jQuery.extend/)为您完成所有工作。

* * *

***原始代码：***

```
var $elem = $(selector);
        if($elem.length > 0)
        {
            $elem.each(function()
            {
                $(this).css({"color":"#F00"});
            })
        }

        return this; 
```

***改变：***

```
return this.each(function() {
          $this = $(this);
          $this.css({ 'color': config.color});
}); 
```

**注释：**

使用`return this.each(function(){})`是很好的做法并保持可链接性。不仅如此，您将不再需要担心`selector`'s 的长度。

* * *

*注意：如果你想添加额外的事件，那么`methods`在你的插件中使用不同的：[jQuery Doc Reference - Authoring Plugins](http://docs.jquery.com/Plugins/Authoring#Events)。

我希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-13T21:37:23.900

我没有足够的声誉点来评论并完全同意知识渊博的 Dom。我只想在更改的代码中添加它，最好使用**var**关键字创建一个**局部**变量： 这将使插件更好，并允许您将插件应用于页面中的多个元素，例如： **`var $this = $(this);`

`$('#testX').tippedOff2();`
`$('#testY').tippedOff2();`
`$('#testZ').tippedOff2();`**

# javascript - 按下时如何更改切换按钮文本？

> ID：16066115
> 
> 赞同：0
> 
> 时间：2013-04-17T17:13:10.407
> 
> 标签：javascript, jquery, toggle, togglebutton

我希望能够按下一个显示“隐藏”的按钮，然后在用户单击该按钮时说“显示”。在下面的代码中，切换部分有效，但现在我需要在隐藏内容后将“隐藏”文本变为“显示”。

我从以下位置获取切换代码： http: [//thedesignspace.net/MT2archives/000298.html#.UW61YqKG33U](http://thedesignspace.net/MT2archives/000298.html#.UW61YqKG33U)

```
 <script type="text/javascript">
    function toggle(element) {
    document.getElementById(element).style.display = (document.getElementById(element).style.display == "none") ? "" : "none";
    }
    </script>

    <div class="ISBody">
     <h5>Header</h5>
     <div class="ISTopLink"><a href="#ISTop">Return to Top</div>
     <div class="ISHide"><a href="javascript:toggle('pos')">Hide Products - </a></div>
     <hr>
     <div id="pos" style="display: block;">
      <div class="ISProductBody">
       <div class="ISSubHead"><A HREF="#">Prodcut Name</A></div>
      <div class="ISList">
       <ul>
        <li>Text here</li>
        <li>Text here</li>
        <li>Text here</li>
        <li>Text here</li>
      </ul>
      </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:41:29.437

将您的按钮代码更改为以下内容：

```
<div class="ISHide" onclick="toggle(this)"><a href="#" >Hide Products</a></div> 
```

并将您的脚本更改为这样的内容

```
<script type="text/javascript">
function toggle (t) {
if (t.childNodes[0].innerHTML == "Hide Products") {
    t.childNodes[0].innerHTML = "Show Products";
} else {
    t.childNodes[0].innerHTML = "Hide Products";
}
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T17:39:52.610

由于您的问题被标记为 jQuery，请使用 jQuery：

```
<div class="ISHide"><a href="#" class="hideLink">Hide Products - </a></div>

$(".hideLink").on("click", function(){
    if($(this).text()=="Hide Products - ")
    {
        $(this).text("Show Products - ");
    } else {
        $(this).text("Hide Products - ");
    }
    $(".ISProductBody").toggle(); 

    return false;
}); 
```

示例：http: [//jsfiddle.net/calder12/KCj3r/](http://jsfiddle.net/calder12/KCj3r/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-21T15:10:55.640

我的“答案”是对 Rick Calder 答案的修改。我使用了为类似场景提供的代码，但它在按钮内有 HTML 标记（在本例中为 Font Awesome 图标）。我认为它可能会帮助某些人将解决方案应用于其他情况。

我必须做的唯一修改是将“.text”更改为“.html”并添加“.addClass”/“.removeClass”以更改按钮样式。（不包括 CSS，因为它在这里很简单。）

这是我使用的代码：

```
$(".expand-button .button").on("click", function(){
    if($(this).html()==" Watch Video <i class=\"fa fa-play\"></i> ")
    {
        $(this).html(" Hide Video <i class=\"fa fa-times\"></i> ");
        $(this).addClass("secondary");
    } else {
        $(this).html(" Watch Video <i class=\"fa fa-play\"></i> ");
        $(this).removeClass("secondary");
    }
    $(".expand-button-content").fadeToggle();
}); 
```

谢谢你，里克和 OP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T20:43:22.893

下面显示了在功能顶部清楚地切换的按钮文本。为简洁起见，它使用了 Javasript 三元运算符。如果有必要，它还允许您循环浏览两个以上的文本标签。如果仅切换两个值，则标签值的顺序`labels`无关紧要。

```
$(".expand-button .button").on("click", function(e){
  const labels = ['Show', 'Hide']
  let idx = labels.indexOf(e.target.innerHTML) + 1
  idx == labels.length ? idx = 0 : idx
  e.target.innerHTML = labels[idx]
}); 
```

如果仅切换两个值，则仅使用三元运算符的更短的解决方案：

```
 e.target.innerHTML == 'Show' ? e.target.innerHTML == 'Hide' : e.target.innerHTML == 'Show' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-24T05:09:51.713

```
var button = document.querySelector(".button")
var text   = document.querySelector(".text")
var t
button.addEventListener("click",function(){

    if(text.textContent=="Like"){
        t = "Liked"
    }
    else{
        t="Like"
    }
    text.textContent=t;
}) 
```

这是一个更改为 Liked 的 Like 按钮的示例。该方法非常简单，如果文本是 Like，则将变量 t 设置为“liked”，反之亦然，然后 t 替换文本内容。为我工作干杯，:D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-17T19:34:01.703

```
TextBox.innerHTML = " ";
ButtonId.onclick = function(){
if (TextBox.innerHTML == " ") {
TextBox.innerHTML = "HI";
}
else {
TextBox.innerHTML = " ";
}
}
```

```
<a href="http://fbgadgets.blogspot.com/2014/01/link-change-into-button.html">ReadMore:</a>
<img id="ButtonId" src="https://www.w3schools.com/tags/smiley.gif" width="107" height="98">
<p id="TextBox"> </p>
```

# objective-c - Initializer element is not a compile-time constant - 从 const 结构中引用 const 块

> ID：16066117
> 
> 赞同：0
> 
> 时间：2013-04-17T17:13:15.993
> 
> 标签：objective-c, xcode, struct, constants, clang

**环境**

XCode 4.6.2
OSX 10.7.5

**NMFoo.h**

```
typedef void(^NMFooBlock)();

struct NMFooStruct {
    __unsafe_unretained NMFooBlock fooBlock;
};
typedef struct NMFooStruct NMFooStruct;

@interface NMFoo : NSObject

@end 
```

**NMFoo.m**

```
#import "NMFoo.h"

NMFooBlock const NMFooBlockConst = ^{};

NMFooStruct const NMFooStructConst = { .fooBlock = NMFooBlockConst };

@implementation NMFoo

@end 
```

产生一个

> 错误：初始化元素不是编译时常量 NMFooStruct const NMFooStructConst = { .fooBlock = NMFooBlockConst };

即使 NMFooBlockConst 被定义为 const，这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:22:18.300

[这个答案来自 mikeash。](https://twitter.com/mikeash/status/324625278435459073)

> 'NMFooBlockConst' 不是编译时常量表达式，因此是不允许的。

尽管表达式 ^{} 是编译时常量，但 'NMFooBlockConst' 并不符合语言定义。

> 根据定义，变量不是编译时常量表达式。^{} 是。

关键字 const 是不相关的。

> const 关键字与某个东西是否是编译时常量表达式无关。

赞赏迈克。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:23:06.353

答案就在这里，我认为：[https ://stackoverflow.com/a/6143271/73479](https://stackoverflow.com/a/6143271/73479)

但是，这将起作用：

```
NMFooStruct const NMFooStructConst = { .fooBlock = ^{} }; 
```

# c++ - VS2012 - Decltype 作为尾随返回类型中的模板参数

> ID：16066120
> 
> 赞同：1
> 
> 时间：2013-04-17T17:13:23.453
> 
> 标签：c++, c++11, visual-studio-2012, decltype, compiler-bug

以下代码适用于 gcc 甚至 VC11 Nov CTP，但无法使用 VC11 RTM 进行编译。

```
template<typename T>
struct A {
    typedef typename T::Type BreakMe;
    T x;
};
struct B { typedef int Type; };

template<typename T>
struct C {
    static A<T> f(A<T> a) {
        return A<decltype(a.x)>();
    }
    static auto g(A<T> a) -> A<decltype(a.x)> {
        return A<decltype(a.x)>();
    }
};

int main(int argc, char* argv[])
{
    C<B>::f(A<B>());
    C<B>::g(A<B>());
    return 0;
} 
```

*   VC11 RTM：[http ://rise4fun.com/Vcpp/9u2](http://rise4fun.com/Vcpp/9u2)
*   VC11 CTP：[http ://rise4fun.com/Vcpp/6lS](http://rise4fun.com/Vcpp/6lS)

VC11 RTM 似乎失败了 decltype 作为返回值中的模板参数传递：它认为“T=unknown”。请注意`f`，尽管在其中使用 decltype ，但编译得很好。

这是 RTM 中的编译器错误吗？如果是这样，有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:18:21.777

我找到了解决方法。

诀窍是将整个返回类型传递给辅助结构，并强制在那里解析模板。`typedef`- 在辅助结构中使用返回类型似乎还不够，因为 decltyped 模板参数似乎仍然未知。但是，将其设置为辅助结构中函数的返回类型似乎会强制该类型被解析。然后，您可以简单地获取此函数的返回类型（再次使用 decltype）。

将其包装在一个变通方法宏中给出

```
#if defined(_MSC_VER) && _MSC_VER <= 1700
namespace workarounds {
  template<typename T>
  struct resolve_template {
    static T ret();
  };
}
#define RESOLVE_TEMPLATE(A) decltype(::workarounds::resolve_template<A>::ret())
#else
#define RESOLVE_TEMPLATE(A) A
#endif 
```

将其添加到上面给出：[http ://rise4fun.com/Vcpp/JplI](http://rise4fun.com/Vcpp/JplI)

# vba - 对于范围内的每个单元格，如果在下一个单元格中找到单独范围内的值，则执行操作

> ID：16066123
> 
> 赞同：2
> 
> 时间：2013-04-17T17:13:39.690
> 
> 标签：vba, excel, excel-formula, array-formulas

我已经构建了这个宏，但我希望有一个更快的版本或一个能在更短的时间内做同样事情的公式。

是）我有的：

```
 For Each cell In Range("Table_Query_1[[#Data],[Reason2]]")
        For Each PossibleValue In Range("F2", Range("F2").End(xlDown))
            If Len(cell) = 0 Then
             If (InStr(UCase(cell.Offset(0, 1)), UCase(PossibleValue)) <> 0) Then
               cell.Value = PossibleValue.Value
             End If
             Else
                Exit For
             End If
         Next
         If Len(cell) = 0 Then
            cell.Value = cell.Offset(0, -1)
        End If
    Next 
```

我可以使用以下数组公式获得任何东西的唯一另一种方法

```
=IF(ISNA(MATCH($F$3:$F$10,[@Extra Info],0)),[@Reason],$F$3:$F$10) 
```

但这对于第 4 行和第 9 行的部分匹配不起作用。我也怀疑这个数组公式会比 vba 宏快得多，而且它还需要更多的测试维护在这种情况下，值范围（F2：f3），因为我必须不断更新该公式，否则我必须使原始范围像 F2：F100 女巫会导致它花费更长的时间。

![样本](https://i.stack.imgur.com/9Ppqc.png)

所以，我想要的是，如果我的值范围内的任何值（在这种情况下为 F2：F3），是否在当前行的额外信息列中找到，然后是该行的原因 2（偏移（0，-1 )) 等于匹配的值。但如果没有找到，那么只需使用该行中的原因（偏移量（0,1））。

第二个问题是我需要在 QueryTable 刷新后运行宏，但是如果我将其设置为单元格上的单元格更改事件，则查询中将发生更改，宏在导入最终查询表之前运行并完成，并且排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:22:06.290

解决了！

这是我在上面发布的具有初始公式的评论。

`=IF(COUNT(FIND($F$2:$F$3,C1)),"What Will Go Here",A1)`

下面告诉你什么必须代替`"What Will Go Here"`

将此公式放在单元格 B2 中。请注意，这是一个数组公式。输入公式后，您必须按 `CTRL`+ `SHIFT`+ 。`ENTER`

`=IF(COUNT(FIND($F$2:$F$4,C2)),INDEX($F$2:$F$4,MATCH(SUM(IF(ISNUMBER(--FIND($F$2:$F$4,C2,1)),--FIND($F$2:$F$4,C2,1))),FIND($F$2:$F$4,C2,1),0),0),A2)`

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/DWwKO.png)

**说明**：

`FIND($F$2:$F$4,C2,1)`与数组一起使用时返回一个数组。要检查值，您可以突出显示它并按下`F9`它，它会告诉您找到匹配项的位置。看这个截图

![在此处输入图像描述](https://i.stack.imgur.com/lt61m.png)

所以它告诉我们它在 4532 的第 3 个位置找到了匹配项。但它没有告诉我们它找到了匹配项是什么。

现在下一步是从数组中检索该数字的位置。因此，在上面的示例中，它将是位置 2，并且要找到我们将使用的位置`MATCH()`并使用 MATCH，我们将需要它`3`

所以要从数组中检索`3`，我们使用这个公式

`=SUM(IF(ISNUMBER(--FIND($F$2:$F$4,C2,1)),--FIND($F$2:$F$4,C2,1)))`

![在此处输入图像描述](https://i.stack.imgur.com/dB1eX.png)

现在我们有了它，`3`所以我们将使用它`Match`在`Possible Value`

`=MATCH(SUM(IF(ISNUMBER(--FIND($F$2:$F$4,C2,1)),--FIND($F$2:$F$4,C2,1))),FIND($F$2:$F$4,C2,1),0)`

这会给我们`2`

![在此处输入图像描述](https://i.stack.imgur.com/OaCVo.png)

现在我们知道了数字在 中的位置`Possible Value`。为了找到这个数字，我们将使用`INDEX`

`=INDEX($F$2:$F$4,MATCH(SUM(IF(ISNUMBER(--FIND($F$2:$F$4,C2,1)),--FIND($F$2:$F$4,C2,1))),FIND($F$2:$F$4,C2,1),0),0)`

![在此处输入图像描述](https://i.stack.imgur.com/wpYyW.png)

**样本工作簿**

[http://wikisend.com/download/280280/Sample.xlsx](http://wikisend.com/download/280280/Sample.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:16:32.873

这是我遇到的一个解决方案，它不必输入数组，并且似乎比 Siddharth Rout 的解决方案运行得更快。我正在使用公式

```
=IFERROR(LOOKUP(1E+100,SEARCH($F$2:$F$4,C2),$F$2:$F$4),A2) 
```

我在 C2 中寻找 F2:F4 范围内的任何单词。如果没有找到它会抛出一个`ERROR`并且在那种情况下我知道什么都没有找到并简单地返回原来的原因。

图中未显示我还将 F2:F4 转换为命名范围`Reasons`，并更改公式：

```
 =IFERROR(LOOKUP(1E+100,SEARCH(Reasons,C2),Reasons),A2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/HKkk8.jpg)

# asp.net-mvc - .NET MVC 自定义验证（无数据注释）

> ID：16066124
> 
> 赞同：5
> 
> 时间：2013-04-17T17:13:40.643
> 
> 标签：asp.net-mvc, validation

使用 .NET MVC 和代码优先 EF 来实现请求的功能。业务对象相对复杂，我用它`System.ComponentModel.DataAnnotations.IValidatableObject`来验证业务对象。
现在我正在尝试寻找方法，如何使用 MVC ValidationSummary 而不使用数据注释来显示来自业务对象的验证结果。例如（非常简化）：

业务对象：

```
 public class MyBusinessObject : BaseEntity, IValidatableObject
    {
        public virtual IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
           return Validate();
        }
        public IEnumerable<ValidationResult> Validate()
        {
           List<ValidationResult> results = new List<ValidationResult>();

           if (DealType == DealTypes.NotSet)
           {
                results.Add(new ValidationResult("BO.DealType.NotSet", new[] { "DealType" }));
           }

           return results.Count > 0 ? results.AsEnumerable() : null;
        }
    } 
```

现在在我的 MVC 控制器中，我有这样的东西：

```
 public class MyController : Controller
    {
        [HttpPost]
        public ActionResult New(MyModel myModel)
        {
           MyBusinessObject bo = GetBoFromModel(myModel);
           IEnumerable<ValidationResult> result = bo.Validate();
           if(result == null)
           {
               //Save bo, using my services layer
               //return RedirectResult to success page
           }

           return View(myModel);
        }
    } 
```

看来，我有`Html.ValidationSummary();`。
**如何传递`IEnumerable<ValidationResult>`给 ValidationSummary？**

我试图通过谷歌搜索找到答案，但我找到的所有示例都描述了如何使用模型中的数据注释而不是业务对象中的数据注释来显示验证摘要。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T17:20:12.670

在模型中添加属性，比如 BusinessError

在视图中执行以下操作

```
 @Html.ValidationMessageFor(model => model.BusinessError) 
```

然后在您的控制器中，只要您有错误，请执行以下操作

```
ModelState.AddModelError("BussinessError", your error) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T17:35:47.280

我会看看[FluentValidation](https://github.com/FluentValidation/FluentValidation)。这是一个没有数据注释的验证框架。我在一些复杂的验证项目中使用它取得了巨大的成功，它也可以在 MVC 项目之外使用。

这是他们页面中的示例代码：

```
using FluentValidation;

public class CustomerValidator: AbstractValidator<Customer> {
  public CustomerValidator() {
    RuleFor(customer => customer.Surname).NotEmpty();
    RuleFor(customer => customer.Forename).NotEmpty().WithMessage("Please specify a first name");
    RuleFor(customer => customer.Company).NotNull();
    RuleFor(customer => customer.Discount).NotEqual(0).When(customer => customer.HasDiscount);
    RuleFor(customer => customer.Address).Length(20, 250);
    RuleFor(customer => customer.Postcode).Must(BeAValidPostcode).WithMessage("Please specify a valid postcode");
  }

  private bool BeAValidPostcode(string postcode) {
    // custom postcode validating logic goes here
  }
}

Customer customer = new Customer();
CustomerValidator validator = new CustomerValidator();
ValidationResult results = validator.Validate(customer);

bool validationSucceeded = results.IsValid;
IList<ValidationFailure> failures = results.Errors; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:51:20.210

`DbEntityValidationException`如果存在验证错误，实体框架应该抛出一个。然后，您可以使用异常将错误添加到`ModelState`.

```
try
{
     SaveChanges();
}
catch (DbEntityValidationException ex)
{
     AddDbErrorsToModelState(ex);
}
return View(myModel);

protected void AddDbErrorsToModelState(DbEntityValidationException ex)
{
     foreach (var validationErrors in ex.EntityValidationErrors)
     {
          foreach (var validationError in validationErrors.ValidationErrors)
          {
               ModelState.AddModelError(validationError.PropertyName, validationError.ErrorMessage);
          }
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:20:38.677

传递 IEnumerate 的内容并继续利用 Html.ValidationSummary 的方法之一是更新 ModelState。

[您可以在此处](https://stackoverflow.com/questions/719390/updating-modelstate-with-model-object)找到有关如何更新 ModelState 的精彩讨论。

# css - CSS - 元素的清晰样式

> ID：16066131
> 
> 赞同：1
> 
> 时间：2013-04-17T17:14:18.650
> 
> 标签：css, tinymce

我正在使用`tinymce` `wysiwyg`为我的网站创建一些漂亮的说明。我只需将 html 生成的代码保存到我的数据库中，然后在页面上显示该 html。

由于我的网站加载了自己的样式表，因此有些东西往往会根据样式规定的内容（如`<ul>`、`<li>`或`<p>`标签）显示出来

如果这些标签中的任何一个是从 生成的`tinymce`，我网站的样式表将为它们设置样式。

在黑暗中射击 - 是否有一种样式可以使浏览器忽略驻留在特定元素内的所有样式？

对于视觉辅助，这是`tinymce`我正在制作的快照： ![小麦](https://i.stack.imgur.com/s3xL1.png)

这是我网站上显示的 html 的快照：

![TinyMce 的结果](https://i.stack.imgur.com/yUHJT.png)

（这个 html 位于里面 `<div id="tinymce_html"><?php echo $tinymce_html; ?></div>`）

这是在 main.css 样式表中影响它的 css（站点范围内）

```
ol, ul {
  list-style:none;
  padding: 0;
  margin: 0;
} 
```

顺便说一句，我只是举例说明`<ul>`标签的结果。我相信我会遇到更多的标签。（因此我最初的问题是——“是否有一种样式可以让浏览器忽略驻留在特定元素中的所有样式？”）

我不想做的是为与 相关的任何内容创建一个全新的样式表`tinymce`，或者`html`我想显示的其他内容不受任何网站样式的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:49:13.237

看起来你想应用一个 CSS 重置样式表。看看[这里](http://www.cssreset.com/)，选择最适合你的那个。

您必须使用[custom_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css) tinymce 配置选项将此 css 添加到编辑器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:17:04.953

在开始新项目之前始终使用“重置 css”！

看看[这个](http://meyerweb.com/eric/tools/css/reset/)。

将此样式复制粘贴到您的代码上方，然后从这里开始。它重置了所有元素。

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

# java - 创建后在 JFreeChart 上绘图

> ID：16066132
> 
> 赞同：0
> 
> 时间：2013-04-17T17:14:18.937
> 
> 标签：java, annotations, jfreechart

我正在做一个学校项目，我已经被这个问题困扰了一周。我不知道如何在创建 jfreechart 后对其进行注释。

现在程序看起来像这样->![我的程序](https://i.stack.imgur.com/8PE0E.jpg)

用户应该能够通过鼠标单击在图表上绘制线条或添加字符串。有人知道该怎么做吗？

我如何扩展 ChartPanel：

```
import java.awt.Graphics;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;

public class ExChartPanel extends ChartPanel {
private static final long serialVersionUID = 1L;
String txt="Can add Strings before creating chart";

public ExChartPanel(JFreeChart chart){
    super(chart);
}

public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawString(txt, 100, 100);
}

public void setTxt(String txt) {
    this.txt = txt;
    repaint();
}} 
```

现在，当我运行时，我可以在制作图表之前绘制字符串...但是如果按下主框架按钮调用 setTxt("some txt")，它不会更新面板上的文本。线条和其他形状也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:10:28.670

您需要扩展`JFree ChartPanel`以添加此功能。

您的扩展类应该捕获用户操作、创建注释并使用`XYPlot.addAnnotation`.

如[`ChartPanel`](http://www.jfree.org/jfreechart/api/javadoc/index.html)API 文档中所述，每当收到任何更改通知时，都会自动重绘图表。

此外，请参阅`ChartPanel`源代码以更好地理解 API 并在这些 API 之上构建您的类。

# php - 使 PDF 或页面仅可查看一次，并防止其被打印或共享

> ID：16066138
> 
> 赞同：1
> 
> 时间：2013-04-17T17:14:33.397
> 
> 标签：php, wordpress, pdf, security

在我们的 Wordpress 网站上，我们希望某些页面或文件仅供付费查看材料一次的会员使用。内容可以是网站页面或 PDF，但关键是我们希望会员只能看到一次，并且我们还希望确保客户不能打印、复制或共享它。

我们意识到屏幕上的任何东西都可以被抓取，是的，理论上总会有一些人会通过 OCR 运行它或简单地输入它，但数量会相对较少，尤其是在我们特定的组中。综上所述，您是否知道保护页面或文件不被轻松共享或打印的“最佳”方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:24:46.710

由于网页内容被加载到浏览器的本质，它在技术上作为临时文件在您的系统上。PDF 旨在成为便携式文档。

至于网页，您可以创建新的打印样式，这会弄乱打印，并添加一些 javascript 以使复制变得痛苦，但这是破坏 Web 文档的预期目的。

另一种选择（不是我赞同这个！）是在 Flash 中制作内容！扯掉总是很痛苦;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:57:49.780

您可以设置一个简单的数据库访问表，该表存储针对页面/文件 URL 的用户 ID。

```
access_id | user_id | resource_url 
```

当用户查看页面时，您可以检查此表，例如：

```
SELECT access_id 
FROM   access_table
WHERE  user_id = {YOUR_USER_ID}
AND    resource_url = "{CURRENT_URL}" 
```

如果您得到结果，则允许访问并删除该行。下次他们尝试该 URL 时，将没有结果，因此拒绝访问。

对于 pdf，要实现这一点，您需要一个使用参数 ($_GET['resource_id']) 调用的包装脚本，其中包含上述代码，然后使用 headers 和 file_get_contents() 将 pdf 内容输出到屏幕。

注意：这当然不会像其他人提到的那样完全解决问题，但应该添加额外的保护层，因为它会阻止 URL 被共享

# javascript - 未启用动态对象

> ID：16066150
> 
> 赞同：1
> 
> 时间：2013-04-17T17:15:09.847
> 
> 标签：javascript, html

我是 Javascript 的初学者，我正在尝试创建一个动态 Web 按钮，当我在文本框中键入一些文本时应该启用该按钮。

下面是代码，但是当我在编辑框中输入一些文本时，按钮未启用。

任何人都可以在这方面帮助我。

```
<html>
<form>
<input onkeyup="EnableThis(this, document.getElementsByName('btnReplayType')[0])"name="txtReplayType" size="20" type="text"/>
<input onclick="alert(document.getElementsByName('txtReplayType')[0].value)" disabled="65535" name="btnReplayType" size="20" type="button" value="Type and enable me" />
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:22:17.493

这是一个如何实现的[**示例。**](http://jsfiddle.net/CtusG/)您会在下面注意到我已经删除了您的内联事件处理程序；这将使您的 HTML 更具可读性并且是更好的实践。

**HTML**

```
<form>
  <input name="txtReplayType" size="20" type="text"/>
  <input name="btnReplayType" size="20" type="button" value="Type and enable me" disabled />
</form> 
```

**JavaScript**

```
var text = document.getElementsByName('txtReplayType')[0],
    button = document.getElementsByName('btnReplayType')[0];

text.onkeyup = function(){
    if(this.value !== ""){
        button.disabled = false;
    }
    else{
        button.disabled = true;
    }
};

button.onclick = function(){
    alert(text.value);
}; 
```

如果您是 JavaScript 新手并正在寻找资源，我整理了[一小页链接](http://chasewest.github.io/)，我发现这些链接有些帮助（包括教程、规范文档等）。

# git - Git：我怎样才能修改文件并仍然签出其他分支？

> ID：16066153
> 
> 赞同：1
> 
> 时间：2013-04-17T17:15:26.173
> 
> 标签：git, github, branch, git-branch

我不得不修改项目中的一些文件，但它们是配置文件，我不想提交它们（配置仅适用于我的环境）。但是，我仍然想更改分支，但是当我使用`git checkout`它时说我的本地更改将被覆盖。我不知道如何处理这个。

我想要这些更改，不想提交它们（因为我随后在 github 上发送拉取请求，这些更改会出现在那里，这不是我想要的），但我仍然想更改分支。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:37:55.170

*   当文件是 时`untracked`，把它们放进去，`.gitignore`这样你就永远不会提交它们。

*   当文件为 时`tracked`，将它们[存储](http://git-scm.com/book/en/Git-Tools-Stashing)起来：

    ```
    git stash
    git checkout <other branch>
    git stash apply  #(This may or may not give some conflicts) 
    ```

    当您不再需要这些更改时

    ```
    git stash drop 
    ```

    请注意，您可以`apply`在`drop`同一命令中使用`git stash pop`，但如果存在冲突则不会`drop`，因此有时最好单独执行它们以避免混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:38:40.457

如果您的修改不应该离开您的存储库，请使用过滤器来应用和删除您的本地更改。 [这是一个有效的单文件案例](https://stackoverflow.com/a/15936382/1290731)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:19:56.747

从 Git 中取消跟踪文件并将文件放在 .gitignore 列表中。

git rm --cached 文件名

# xml - 将 2 个输入 XML 模式合并到一个 CSV 文件中 - biztalk 2009

> ID：16066159
> 
> 赞同：0
> 
> 时间：2013-04-17T17:15:39.967
> 
> 标签：xml, csv, visual-studio-2008, biztalk, biztalk-2009

我将如何将 2 个输入 XML 模式合并到 1 个 CSV 输出文件中？

2 个输入各有 1 个根、1 个子记录和子记录中的 5 个子字段元素。输出有 10 个字段元素，两个输入中的 5 个字段中的每一个都有 1 个（保持简单开始）

在我的编排中，我有一个并行动作对象，有 2 个接收形状，它们导致带有转换的构造消息，我指定了 2 个输入消息和该转换的输出消息，然后它导致发送形状。我已经配置了 3 个端口，用于接收和发送，现在接收都设置了要指定的端口绑定，传输是文件，并且我已经指定了一个文件夹。发送现在还设置了要指定的端口绑定，传输是 XMLTransmit，我已经指定了一个输出 CSV 文件。

在生成的地图中，我只是将输入中的 5 个字段中的每一个都链接到输出中它们各自的字段。

我缺少将 2 个文件正确合并到 CSV 中的东西。我需要一张特殊的地图，还是必须在某处更改一些设置，以便将输出文件生成为与 XML 相对应的 CSV。

编辑 - 我也配置了 3 条消息，并且我做了一个关联，但我不确定如何处理关联。

创建关联类型时应该选择哪些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T01:12:00.953

你还需要

(回车，换行）。然后在记录中，您必须将子分隔符类型字符和子分隔符设置为 ,（逗号）。如果您希望数据中有任何逗号，您可能还希望在字段上将换行字符设置为 "。

2）您需要添加一个带有（添加新项目，发送管道）的发送管道，您需要将平面文件组装器放在组装阶段，并且文档架构指向上述1中的架构。

3）您需要更新映射到两个输入的映射以使用上述模式。

4）您需要在发送端口中从 2 中选择管道。

对于相关性，您通常会将其设置为消息中某些内容的提升属性，因为您尚未定义匹配两个文件的标准是什么，我不能更具体。示例包括文件中的日期（例如，您想匹配两个具有相同日期的文件）。先在没有相关性的情况下尝试它并让它工作，你可以稍后添加相关性。

# ios - GPUImageFilters 中的某些内容即使在释放后仍保留在内存中

> ID：16066162
> 
> 赞同：2
> 
> 时间：2013-04-17T17:15:57.480
> 
> 标签：ios, objective-c, memory-management, opengl-es, gpuimage

我正在使用 GPUImage 对实时图像和静态图像进行大量图像处理，我注意到在翻阅了大约 100 个缩略图之后，每个缩略图都对每个图像进行了略微不同的图像处理，之后内存中仍有对象它们已完成处理，并且都与 GPUImageFilters 相关：

**（分配的生命周期是“已创建且仍然存在”）** ![在此处输入图像描述](https://i.stack.imgur.com/W9HZN.png)

你可以看到我正在做的一些处理的内存峰值，完成后，在山的另一边，我在内存中留下了一些东西，我选择了一些 24KB 块来检查（还有其他块）。你可以在右边看到，第一个项目来自 GPUImageSoftLightBlendFilter，如果我点击所有 12 个项目，每个项目都来自一个 GPUImageFilter（GPUImageHardLightBlendFilter、GPUImageMultiplyBlendFilter 等）。现在，如果我再次执行相同的处理，并展开内存图选择，您将看到没有创建这些对象的新实例，就好像它们占用了内存中的空间一次，然后就闲逛了：

![在此处输入图像描述](https://i.stack.imgur.com/H6c9d.png)

果然，如果我将内存图选择更改为仅显示第二座山，您会看到这些线不再出现，因为它们没有再次“创建并仍然存在”：

![在此处输入图像描述](https://i.stack.imgur.com/c70Hm.png)

为什么会这样，我不希望这些 GPUImageFilter 对象的内存在我的应用程序运行的整个生命周期中一直存在？我在 GPUImageFilters 中记录了一些日志，以确认它们正在被释放并且正在调用 dealloc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T18:57:22.790

从 GPUImage 源代码检查来看，最后使用的过滤器中的对象看起来`GLProgram`仍然由 shared 设置（并保留）`GPUImageContext`，这意味着其对应的 OpenGL 程序对象也不能消失。但是，现有`GLProgram`实现的 dealloc 仅将当前程序标记为删除。不同的是，如果当前绑定的程序是被删除的程序`glDeleteTextures`，`glDeleteProgram`它不会解除绑定，这意味着它还不能完全*销毁*。因此，您可能必须进行两项更改：

1.  调用`[GPUImageContext setActiveShaderProgram:nil]`以清除当前的 GLProgram 绑定，这会释放对当前程序的最后引用`GLProgram`并将当前程序标记为删除。
2.  通过调用 确保程序未绑定`glUseProgram(0)`。您可以通过多种方式执行此操作：
    *   在上面的调用之后立即显式调用它，因为正确的`EAGLContext`已经被绑定了。
    *   将调用添加到 的主体`+[GPUImageContext setActiveShaderProgram:]`，或者通过在上面无条件地添加它`[shaderProgram use]`，或者通过调用其中一个`[shaderProgram use]`或`glUseProgram(0)`取决于是否`shaderProgram`是`nil`。
    *   检查`-[GLProgram dealloc]`它是否是当前绑定的程序`glGetIntegerv(GL_CURRENT_PROGRAM, &program)`，如果是则解除绑定。

# javascript - 一个组件是否只绑定到一个元素？

> ID：16066169
> 
> 赞同：4
> 
> 时间：2013-04-17T17:16:23.873
> 
> 标签：javascript, twitter-flight

我正试图绕过 Twitter 航班。假设我有一个程序页面，它有 16 个元素处理管理程序、CRUD 操作、AJAX 请求等...使用 twitter 飞行，我需要为每个节点元素或程序页面创建一个组件吗？将每个元素附加到程序组件中的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:07:02.790

为您附加到的每个元素实例化一个组件。如果您有一个 DOM 节点列表，则可以调用`.attachTo`每个节点并为所有节点实例化一组组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T20:36:01.917

您不必将组件附加到每个节点。您可以在文档中附加一个组件来完成所有工作，但将其分解为更小的功能块是有意义的。IMO，一个组件应该代表一个功能。

例如，您可能有一个组件通过 ajax 与 API 通信，另一个处理特定表单的提交，另一个管理列表的内容。单个组件的功能取决于您。为了便携性、可重用性和易于维护性，保持组件小且定义明确是有意义的。

话虽如此，您可能不想制造很多很多微小的组件。我不想为列表中的每个项目创建一个，但我可能会为页面上的每个列表创建一个。

组件的单个实例可以附加到 DOM 节点。组件可以访问从其根节点扩展的完整 DOM 树。

# javascript - AngularJS 指令：更改 $scope 未反映在 UI 中

> ID：16066170
> 
> 赞同：58
> 
> 时间：2013-04-17T17:16:36.173
> 
> 标签：javascript, angularjs

我正在尝试使用 AngularJS 制作一些自定义元素并将一些事件绑定到它，然后我注意到 $scope.var 在绑定函数中使用时不会更新 UI。

这是一个描述问题的简化示例：

HTML：

```
<!doctype html>
<html ng-app="test">
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
    <script src="script.js"></script>

  </head>
  <body>

<div ng-controller="Ctrl2">
  <span>{{result}}</span>
  <br />
  <button ng-click="a()">A</button>
  <button my-button>B</button>

</div>

  </body>
</html> 
```

JS：

```
function Ctrl2($scope) {
    $scope.result = 'Click Button to change this string';
    $scope.a = function (e) {
        $scope.result = 'A';
    }
    $scope.b = function (e) {
        $scope.result = 'B';
    }
}

var mod = angular.module('test', []);

mod.directive('myButton', function () {
    return function (scope, element, attrs) {
        //change scope.result from here works
        //But not in bind functions
        //scope.result = 'B';
        element.bind('click', scope.b);
    }
}); 
```

演示：[http ://plnkr.co/edit/g3S56xez6Q90mjbFogkL?p=preview](http://plnkr.co/edit/g3S56xez6Q90mjbFogkL?p=preview)

基本上，我将`click`事件绑定到`my-button`并希望`$scope.result`在用户单击按钮 B 时进行更改（类似于`ng-click:a()`按钮 A）。`$scope.result`但是如果我这样做，视图不会更新到新的。

我做错什么了？谢谢。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-04-17T17:24:14.343

事件处理程序被称为“外部”Angular，因此尽管您的`$scope`属性会更新，但视图不会更新，因为 Angular 不知道这些更改。

`$scope.$apply()`在事件处理程序的底部调用。这将导致一个[摘要循环](http://docs.angularjs.org/guide/concepts#runtime)运行，并且 Angular 会注意到您对 Angular 所做的更改`$scope`（因为在您的 HTML`$watches`中使用该 Angular 设置）并更新视图。`{{ ... }}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-31T14:02:43.417

这也可能是不同问题但具有相同症状的结果。

如果您销毁分配给视图的父范围，即使在`$apply()`调用之后，其更改也不会以任何方式影响视图。查看[示例](http://jsfiddle.net/HB7LU/15966/)- 您可以通过文本输入更改视图值，但是当您单击 时`Destroy parent scope!`，模型不再更新。

我不认为这是一个错误。这是应用程序中的代码过于hacky的结果:-)

[我在使用Angular Bootstrap 的 modal](https://angular-ui.github.io/bootstrap/#/modal)时遇到了这个问题。我试图打开第一个范围的第二个模态。然后，我立即关闭了导致父作用域被破坏的第一个模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-13T07:58:34.383

使用超时

$timeout(function () { 代码.... }, 0);

# javascript - 如何知道一个人的价值 与 JavaScript 中的某些内容？

> ID：16066172
> 
> 赞同：-2
> 
> 时间：2013-04-17T17:16:38.923
> 
> 标签：javascript, select, option

我做了很多搜索，但我无法解决我的问题。

```
<select id="my_select">
    <option value="Findme_1">Knowing_1
    <option value="Findme_2">Knowing_2
</select> 
```

在一个函数中，我需要在内容中找到带有“Findme_1”的选项的值。

请问我该怎么做？

编辑：我不需要找到所选选项的值，我也不需要使用它的索引找到选项的值，我只知道内容“Knowing_1”并且我想知道值“Findme_1”。

我想过一个循环，但可能还有其他更常见的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:22:42.407

用这个。 [例子](http://jsfiddle.net/chauhangs/nmvf6/2058/)

```
 $('#my_select').find('option[text="Knowing_1"]').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:22:44.233

使用 SelectedIndex 属性。[检查这个](http://www.w3schools.com/jsref/prop_option_value.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:23:27.177

这将提醒所选选项的值：

```
(function() {

    var select = document.getElementById('my_select');
    select.addEventListener('change', function(){
        alert( select.options[select.selectedIndex].value );
    });

})(); 
```

此外，您应该关闭您的选项元素：

```
<select id="my_select">
    <option value="Test_1">Findme_1</option>
    <option value="Test_2">Findme_2</option>
</select> 
```

完整代码和预览：http: [//jsfiddle.net/CX5aq/](http://jsfiddle.net/CX5aq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:24:33.297

首先，您的 html 不正确，您缺少关闭标记。应该是这样的

```
<select id="my_select">
    <option value="Test_1">Findme_1 </option>
    <option value="Test_2">Findme_2 </option>
</select> 
```

然后我猜，每当用户选择下拉菜单时，您都希望通过 javascript 获取值，所以现在编写一个 javascript

```
<script> 
    document.getElementById('my_select').onchange = function(){

      var my_value = this.value; // you have your new value on the variable my_value

    }; 
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T17:52:59.483

要`<option>`通过其文本查找，您可以遍历[`options`集合](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement#Properties)并检查[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)（标准）或[`innerText`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent#Differences_from_innerText)（IE，非标准）：

```
function valueByText(select, text) {
    var options = select.options;
    var textContent;

    for (var i = 0, l = options.length; i < l; i++) {
        textContent = options[i].textContent || options[i].innerText;

        if (textContent.indexOf(text) >= -1) {
            return options[i].value;
        }
    }

    return null;
}

var result = valueByText(document.getElementById('my_select'), 'Knowing_1'); 
```

示例：http: [//jsfiddle.net/jXpS2/](http://jsfiddle.net/jXpS2/)

* * *

此外，如果您有可用的 DOM 库，它们可以帮助简化这一点。

比如 jQuery 的[`:contains()`选择器](http://api.jquery.com/contains-selector/)：

```
var result = $('#my_select option:contains("Knowing_1")').val(); 
```

示例：http: [//jsfiddle.net/rcjfj/](http://jsfiddle.net/rcjfj/)

# internet-explorer - 浏览器支持消息弹出插件

> ID：16066175
> 
> 赞同：1
> 
> 时间：2013-04-17T17:16:46.910
> 
> 标签：internet-explorer, browser, cross-browser

我知道有像[https://code.google.com/p/ie6-upgrade-warning/](https://code.google.com/p/ie6-upgrade-warning/)和[http://browser-update.org](http://browser-update.org)这样的插件非常方便地警告用户不要使用 IE6/7。

但是，如果我想更进一步并自定义检测以显示“抱歉，不支持 IE，请下载 Chrome”怎么办？有这样的插件吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T00:42:43.180

Stack Overflow 是获取您正在寻找的答案的好地方，但有时您正在寻找的答案并不是您*真正需要*的答案。在这种情况下，我必须给你后者，因为给你前者会对你和你的同龄人造成极大的伤害。

不要试图检测单个浏览器，然后将您的流量汇集到另一个浏览器中——这对业务不利，对您的职业生涯不利，对整个网络也不利。我的意思不是不尊重，我只是作为一个观察网络十多年的人说话。

今天使用 Internet Explorer 6 的用户不在那里，因为它是他们最喜欢的浏览器，因此要求他们进行更改只会让他们感到沮丧，并可能将他们赶出您的网站。关于这一点的更多信息，以及 Kyle Simpson 的演讲[Browser Versions are Dead](http://www.youtube.com/watch?v=gAxTilYa5bo)中的相关点。正如著名开发者 Nicholas Zakas 所说，[是时候停止指责 Internet Explorer 了](http://www.smashingmagazine.com/2012/07/12/its-time-to-stop-blaming-internet-explorer/)。

就一般的 Internet Explorer 而言，最新的分期付款令人难以置信。Internet Explorer 9 标志着产品发生了根本性的变化，显示出对 Web 标准的支持越来越多。此后 Internet Explorer 10 很快发布（打破了 2 年发布周期的想法），并显示了对许多甚至 Chrome 尚不支持的“CSS3”功能的支持。

今天，行业本身似乎正在欣赏 Internet Explorer，包括科技巨头[Leo Laporte 和 Steve Gibson](https://soundcloud.com/jonathansampson/leo-laporte-and-steve-gibson)。Lea Verou（[Dabblet](http://dabblet.com/)、[Prism](http://prismjs.com/)和[W3C 员工](http://www.w3.org/People/#lea)的创建者）曾公开表示“IE在几个版本之前*是*一个糟糕的浏览器。IE10 实际上非常好，而不仅仅是像样的”。还[宣布](http://blog.jquery.com/2013/01/14/the-state-of-jquery-2013/)“jQuery 2.0 现在为 Chrome、Safari 和 Firefox 提供了比 Internet Explorer 更多的补丁和填充程序！”

我最近一次又一次地发现，当 Internet Explorer 10 呈现不正确的内容时，这通常是由开发人员尝试一些“聪明的技巧”来检测 Internet Explorer 并提供替代内容造成的。最近的一个示例来自一个尝试仅向 IE7 及更高版本提供内容的站点，该站点执行以下操作：

```
if ( $.browser.msie && $.browser.version.substr(0, 1) < 7 ) {
    /* Assume this is IE6 or below, and deliver substandard experience */
} 
```

这个小技巧建议版本“10.0”实际上是 Internet Explorer 1，并提供了可怕的体验。修复此代码，使 IE 获得为 Chrome 设计的相同体验，从而恢复了站点 -*一切正常*。这在今天并不少见，它[已经发生](http://blog.reybango.com/2012/05/08/hey-paydirt-your-site-works-just-fine-in-ie/)了一次又一次。

与其专注于如何让访问者安装新软件来查看您的网站，不如专注于编写基于标准的标记，使用渐进增强、功能检测、必要时使用 polyfill 等最佳实践，并与您的网站保持一致在旧浏览器中优雅地降级。毕竟，您的网站不需要在每个浏览器中[看起来都一样。](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

最后，今天测试 Internet Explorer 的成本几乎消失了。虽然它在 Mac 和旧版本的 Windows 上不可用，但 Internet Explorer 的每个版本（6 到 10，现代和桌面）都可以通过 BrowserStack 使用（[3 个月免费](http://www.modern.ie/en-us/virtualization-tools#browserstack)，由 Microsoft 提供），也可以通过免费下载在[modern.IE](http://modern.ie)上的虚拟机。更不用说浏览器内的仿真了，这让 CSS-Tricks 的 Chris Coyier[兴奋不已。](https://twitter.com/chriscoyier/status/178508977578053633)

关于 Internet Explorer 的未来，David Storey（Opera 的新成员，W3C WG 成员）表示[它看起来非常光明](http://generatedcontent.org/post/47216611856/ie11)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:50:31.363

我不会推荐一个警报，但我还是把一个警报放在一起，只是因为我明白是什么驱使开发人员做这种事情...... IE 不那么糟糕？真的吗？

[jsFiddle](http://jsfiddle.net/apaul34208/W9gPQ/18/)

警报选项

```
<!--[if IE]>
<script>alert("Sorry, IE is not supported, Please download Chrome");</script>
<![endif]--> 
```

侵入性较小的`<div>`选项

```
 <!--[if IE]>
<div id="box">Sorry, IE is not supported, <a href="https://www.google.com/intl/en/chrome/browser/?hl=en&brand=CHMA&utm_campaign=en&utm_source=en-ha-na-us-bk&utm_medium=ha">Please download Chrome</a></div>
<![endif]--> 
```

您可以将`<!--[if IE]>`用于仅当用户在 IE 中查看您的页面时想要显示的任何内容，也适用于 css 解决方法。

# c# - 将 listview 列格式化为小数点后 2 位

> ID：16066176
> 
> 赞同：0
> 
> 时间：2013-04-17T17:16:48.597
> 
> 标签：c#, visual-studio-2010

我有这段代码，我在网站上搜索了如何格式化列

```
listView2.Items.Clear();
listView2.GridLines = true;
        for (int i = 0; i < miraxy.Rows.Count; i++) 
            {
                DataRow drow = miraxy.Rows[i];

                if (drow.RowState != DataRowState.Deleted)
                {
                    ListViewItem lvi = new ListViewItem(drow["CFOP"].ToString());
                    lvi.SubItems.Add(drow["Tnota"].ToString());
                    lvi.SubItems.Add(drow["Valor"].ToString());
                    listView2.Items.Add(lvi);
                }
            } 
```

我需要将“Valor”列格式化为 123.2456.789,2345 我尝试使用此代码但不工作。我需要格式化为 2 位小数。

```
 lvi.SubItems.Add( string.Format( "{0:000,000.00}",drow["Valor"].ToString())); 
```

有了这条线：

```
 lvi.SubItems.Add( string.Format( "{0:000,000.00}", Convert.ToDecimal (drow["Valor"]))); 
```

我有这个结果：1.419.192,67
001.528,41 我需要怎么写才能杀死左边的零？

感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:48:52.000

使用此格式字符串：

```
string.Format("{0:#,##0.00}", Convert.ToDecimal(drow["Valor"])) 
```

`#`'s（与 相对`0`）仅在数量足够大时才使用格式的那部分。

# android - 使用静态 Handler 类，引用外部 TextView

> ID：16066181
> 
> 赞同：0
> 
> 时间：2013-04-17T17:16:59.520
> 
> 标签：android

我是 Java 和 Android 编程的新手，虽然我已经完成了一些广泛的 PHP 编码，所以我很快就理解了大多数概念。我不知道做事的“方法”。

作为一个练习应用程序，我想编写一个快速傅立叶变换应用程序，向我显示录制的音频频谱（我是物理专业的，所以这似乎是一个值得和有趣的小项目。）（是的，我知道它以前做过）。

到目前为止，我已经设置了 AudioRecord 阅读器并让它读取字节，我发现如果我想让它在后台运行而不冻结应用程序，我需要创建一个发布到处理程序的线程，我想了解如何将数据传递给 Handler。现在它只是在 MainActivity 的 TextView 中显示字节，所以我可以“看到”正在发生的事情。

我被卡住的地方显然是因为我的处理程序不是静态的，在我的应用程序完美运行几秒钟后，GC 会破坏一些东西（我不知道是什么），然后它就崩溃了。经过一番阅读，我似乎发现我需要扩展 Handler 并实现一些 WeakReference，但老实说，它已经到了我不知道自己在做什么的地步。如果有人能解释这里到底发生了什么，或者我如何从某个外部类中引用我的 TextView，我将不胜感激。在此先感谢东风

这是代码：

```
private Handler uiCallback = new Handler () {
    public void handleMessage (Message msg) {

        tv.setText(Arrays.toString(msg.getData().getByteArray("data")));
    }
};

@Override
protected void onResume() {
    super.onResume();

    tv = (TextView) findViewById(R.id.mainView);

    bufferSize = AudioRecord.getMinBufferSize(44100, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
    ar = new AudioRecord(AudioSource.MIC, 44100, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize); 

    shortbuffer = new short[bufferSize];
    bytebuffer = new byte[bufferSize];

    ar.startRecording();

    tv.setText("Hello");

    int N = 0;

    // now you can start reading the bytes from the AudioRecord
    Thread t = new Thread() {
        public void run() {
            Bundle b = new Bundle();
            Message msg = Message.obtain();
            while (true) {
                ar.read(bytebuffer, 0, bytebuffer.length);
                byte[] pkt = Arrays.copyOf(bytebuffer, bytebuffer.length);

                //tv.setText(Arrays.toString(pkt));

                b.putByteArray("data", pkt);
                msg.setData(b);
                uiCallback.sendMessage(msg);

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }
    };

    t.start();
}

@Override
protected void onPause() {
    super.onPause();

    ar.stop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:32:52.043

您在循环中多次发送相同的消息，您必须在发送之前获取一条新消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:25:32.810

弱引用是避免访问已从其容器（例如活动）中删除的视图的提示。

一个可能的替代解决方案是您执行以下操作：

```
class YourSpecialAudioClass implements ISpecialAudioClass
{
/**this class can be used by the outside UI world, inside the implementation of the runnable in the CTOR*/
@override
public byte[] getData(){...}

public YourSpecialAudioClass(Runnable doSomethingWithDataRunnable)
  {
  this.doSomethingWithDataRunnable=doSomethingWithDataRunnable;
  this.handler=new Handler();
  }
...
  while(true)
    {
    ...
    this.handler.post(this.doSomethingWithDataRunnable);
    }
...
} 
```

不要忘记在不需要时停止线程更新 UI，尤其是在 Activity 正在关闭时。

# html - 被 Internet Explorer 阻止的视频标签元素

> ID：16066191
> 
> 赞同：1
> 
> 时间：2013-04-17T17:17:25.783
> 
> 标签：html, internet-explorer, html5-video

好的，所以我有这个 html 5 代码可以在 chome 和 firefox 上正常工作，但不能在 internet explorer(9) 上工作：

```
<video width="60%" height="360" controls autoplay>
    <source src="video/video1_edit.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
    <source src="video/video1_edit.ogg" type='video/ogg; codecs="theora, vorbis"'>
    <source src="video/video1_edit.webm" type='video/webm; codecs="vp8.0, vorbis"'>
    <object data="video/video1_edit.mp4" width="60%" height="360">
        <embed src="video/video1_edit.mp4" width="60%" height="360">
    </object>
    <br/>
    <br/>
    <font color="red">Can't play video. Please Upgrade your browser.</font>
</video> 
```

每次我在 IE 上尝试它时，我得到的只是一个禁用的媒体播放器，它说：“Internet Explorer 阻止了一个 ActiveX 控件，所以这个页面可能无法正确显示”

那么，假设用户不想或不知道如何更改其 ActiveX 限制设置，我如何嵌入可用于 Internet Explorer 播放的视频？如果要求不高，也可以在旧版本中播放。

编辑：@robertc 是对的，更改我使用的视频类型的默认 MIME 类型解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:13:38.527

按F12，浏览器模式和文档模式是什么意思？它需要说 IE9 和 IE9 标准模式`<video>`才能工作。您是否选中[了以兼容模式显示 Intranet 站点？](http://blogs.msdn.com/b/ie/archive/2009/06/17/compatibility-view-and-smart-defaults.aspx)

# javascript - 正则表达式删除所有不跟随数字的句点

> ID：16066193
> 
> 赞同：2
> 
> 时间：2013-04-17T17:17:39.380
> 
> 标签：javascript, regex

我有`str.replace(/.(?![0-9])/g, '')`。
但它会删除除句点和句点后的数字之外的所有内容。
例如“3.14”变成“.1”

我想要的是：

```
"3.14" -> "3.14"
"hello.world" -> "helloworld"
".hi." -> "hi"
"hi.25" -> "hi.25" 
```

这样做的正则表达式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:19:37.280

`.`是正则表达式中的元字符（默认匹配除换行符以外的任何字符）。你需要逃避它：

```
str.replace(/\.(?![0-9])/g, '') 
```

或者

```
str.replace(/[.](?![0-9])/g, '') 
```

取决于你的喜好。

请注意，您可以替换`[0-9]`为`\d`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T17:19:43.137

如果您不转义点，则表示“匹配任何字符”。

```
str.replace(/\.(?![0-9])/g, '') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:26:49.310

虽然其他答案是正确的，但我会指出另一个选项（不使用前瞻）：

```
str.replace(/\.+([^0-9]|$)/g, '$1') 
```

这`$1`是返回匹配第一组括号的东西的特殊语法。

* * *

事实证明，这种方法比前瞻（[http://jsperf.com/regexp-look-ahead-speed ）](http://jsperf.com/regexp-look-ahead-speed)*慢*，但我仍然认为它作为另一种选择很有趣。我个人发现像这样捕获令牌更加直观和灵活。但是，如果您需要速度，请与其他人一起去。

# c# - 如何在 SevenZipSharp 源代码中启用 SevenZipSFX 类？

> ID：16066195
> 
> 赞同：1
> 
> 时间：2013-04-17T17:17:47.193
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, sevenzipsharp

我将非常感谢如何在 SevenZipSharp 源中启用 SFX 类的分步指南，如此处所述：

[如何使用 SevenZipSharp 创建 SFX ZIP？](https://stackoverflow.com/questions/5637668/how-to-create-a-sfx-zip-with-sevenzipsharp/5639661#5639661)

...获得使用 SevenZipSharp 创建 SFX 文件的功能。

源文件：[http ://sevenzipsharp.codeplex.com/downloads/get/145910](http://sevenzipsharp.codeplex.com/downloads/get/145910)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T14:45:33.357

```
private void button1_Click(object sender, EventArgs e)
    {
        SevenZipCompressor comp = new SevenZipCompressor(@"c\Temp\");
        SevenZipCompressor.SetLibraryPath(@"C:\Users\i.cil\Desktop\7zip\SevenZip\7z.dll");
        comp.ArchiveFormat = OutArchiveFormat.SevenZip;
        comp.CompressionLevel = CompressionLevel.Ultra;
        comp.CompressionMethod = CompressionMethod.Lzma;
        comp.CompressionMode = CompressionMode.Create;
        comp.CompressFiles(@"c:\Temp\Temp.7z", @"C:\Temp\CentAppLOG13-Sep-13010004.bak");

        SfxModule mdl = SfxModule.Extended;

        SevenZipSfx sfx = new SevenZipSfx(mdl);

        sfx.ModuleFileName = @"C:\Users\i.cil\Desktop\7zip\SevenZip\sfx\7zxSD_LZMA.sfx";
        sfx.MakeSfx(@"c:\Temp\Temp.7z",
                    new Dictionary<string, string> 
                    { 
                        { "Title", "ATIG Platform" }, 
                        { "InstallPath", ProgramFilesx86() + "\\ATIG Platform" },
                        { "BeginPrompt", "Yükleme işlemi başlatılsın mı?" },
                        { "CancelPrompt", "Yükleme işlemi iptal edilecek?" },
                        { "OverwriteMode", "2" },
                        { "GUIMode", "1" },
                        { "ExtractDialogText", "Dosyalar ayıklanıyor" },
                        { "ExtractTitle", "Ayıklama İşlemi" },
                        { "ErrorTitle", "Hata!" }
                    }, 
                    @"c:\Temp\Temp.exe");
    }

    static string ProgramFilesx86()
    {
        if (8 == IntPtr.Size
            || (!String.IsNullOrEmpty(Environment.GetEnvironmentVariable("PROCESSOR_ARCHITEW6432"))))
        {
            return Environment.GetEnvironmentVariable("ProgramFiles(x86)");
        }

        return Environment.GetEnvironmentVariable("ProgramFiles");
    } 
```

# macros - 使用宏在 Scheme 中对函数进行柯里化

> ID：16066198
> 
> 赞同：4
> 
> 时间：2013-04-17T17:18:04.317
> 
> 标签：macros, lisp, scheme, currying, define-syntax

我正在学习 Scheme 中的宏系统，我认为实现 curried 函数将是一个好的开始。这是我做的：

```
(define-syntax function
    (syntax-rules ()
        ((_ () body ...) (lambda () body ...))
        ((_ (param) body ...) (lambda (param) body ...))
        ((_ (param_1 param_2 params ...) body ...) (lambda (param_1 . rest)
            (let ((k (function (param_2 params ...) body ...)))
                (if (null? rest) k (apply k rest)))))
        ((_ name params body ...) (define name (function params body ...))))) 
```

此代码按预期工作。例如我可以定义一个`add`函数如下：

```
(function add (x y) (+ x y)) 
```

然后我可以正常调用它：

```
(add 2 3) ; => 5 
```

此外，我可以轻松地部分应用它：

```
(map (add 10) '(2 3 5 7)) ; => (12 13 15 17) 
```

现在我正在考虑允许对带有剩余参数的函数进行柯里化。所以我添加了一个新的语法规则：

```
((_ (param . params) body ...) (lambda (param . params) body ...)) 
```

不幸的是，当我尝试使用此规则创建函数时，它给了我一个错误：

```
(function add (x . y) (apply + `(,x ,@y))) 
```

这是错误消息：

```
Error: invalid syntax in macro form: (x . y)

    Call history:

    <eval>    (##sys#= len7 0)
    <eval>    (loop11 (##sys#cdr l6) (##sys#+ len7 -1))
    <eval>    (##sys#cdr l6)
    <eval>    (##sys#+ len7 -1)
    <eval>    (##sys#= len7 0)
    <eval>    (loop11 (##sys#cdr l6) (##sys#+ len7 -1))
    <eval>    (##sys#cdr l6)
    <eval>    (##sys#+ len7 -1)
    <eval>    (##sys#= len7 0)
    <eval>    (##sys#eq? l6 (quote ()))
    <eval>    (##sys#car tail15)
    <eval>    (##sys#cdr tail15)
    <eval>    (##sys#cons (rename14 (##core#syntax lambda)) (##sys#cons param body))
    <eval>    (rename14 (##core#syntax lambda))
    <eval>    (##sys#cons param body)
    <syntax>      (##core#lambda add (x . y) (apply + (quasiquote ((unquote x) (unquote-splicing y))))) <- 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:58:26.493

你没有说你使用的是什么版本的方案。它似乎不支持宏中的“点”模式。

在 Racket 中，您的代码似乎可以正常工作：

```
#lang racket

(define-syntax function
    (syntax-rules ()
      ((_ () body ...) (lambda () body ...))
      ((_ (param) body ...) (lambda (param) body ...))
      ((_ (param_1 param_2 params ...) body ...) (lambda (param_1 . rest)
                                                   (let ((k (function (param_2 params ...) body ...)))
                                                     (if (null? rest) k (apply k rest)))))

      ((_ (param . params) body ...) (lambda (param . params) body ...))
      ((_ name params body ...) (define name (function params body ...)))))

(function add (x . y) (apply + `(,x ,@y)))

(add 2 3) 
```

运行它会产生答案

```
5 
```

.

顺便说一句，我想我会把它写成两个宏；'function'这个名字的双重用途有点粗略...... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:53:58.983

[评论正确；这个答案不是currying，而是部分评估。]

只是让你知道，你不需要使用`define-syntax`来支持柯里化。通常在不需要时使用语法是不受欢迎的，因为 1) 语法引入了不同的评估规则，2) 语法不能用作值。

这里有两种实现，一种用于（左）咖喱，一种用于右咖喱：

```
 (define (curry func . curry-args)
    (lambda args
      (apply func (append curry-args args))))

  (define (rcurry func . curry-args)
    (lambda args
      (apply func (append args curry-args)))) 
```

以此为例：

```
> (define add-5 (curry + 5))
> (add-5 5)
10 
```

# android - 在 Android XML 中缩放 ImageView

> ID：16066199
> 
> 赞同：1
> 
> 时间：2013-04-17T17:18:05.317
> 
> 标签：android, xml, imageview

在 XML 中缩放 ImageView 时。有没有一种方法可以代替使用`android:layout_width="100dp"`和`android:layout_height="100dp"`按比例缩放图像，例如将大小加倍/三倍等？这主要是因为我发现手动硬编码“dp”既繁琐又不准确。

# mysql - 更新表中所有行中的一列

> ID：16066202
> 
> 赞同：32
> 
> 时间：2013-04-17T17:18:12.243
> 
> 标签：mysql, rows, updating

我想在一个表的所有行中更新一个相同的列，有人可以帮我如何更新表吗？只有一个输入字段应该更新所有行的值。此代码不起作用，我知道 index 和 array 有问题。

```
<?php
    <form method="post" dir="rtl" name="maxcharfield" >                     
        <textarea onKeyDown="textCounter(this,'progressbar1',300)" 
          onKeyUp="textCounter(this,'progressbar1',300)" 
          onFocus="textCounter(this,'progressbar1',300)"  
            style="font-family:'B_yekan';" id="text" name="text" rows="0" cols="0" class="required"></textarea>
        <div class="cleaner h10"></div> 

        <div style="font-family:'B_yekan';" dir="rtl" id="progressbar1" class="progress" ></div>
        <script>textCounter(document.getElementById("maxcharfield"),"progressbar1",100)</script>    

        <input class="styled-button-8" style="margin-top:10px; float:right; margin-right:50px; font-size: 14px;  padding: 5px 14px;" type="submit" value="save" name="Submit"   />
        <input style="font-family:'B_yekan';" type="reset" value="reset" id="reset" name="reset" class="submit_btn float_l" />

    </form>

<?php
// for updating Check if button name "Submit" is active, do this 
if(isset($_POST['Submit']) && $_POST['Submit'] == 'save')
    {
        $sql1="UPDATE `".$tbl_name."` SET `board`='".$_REQUEST['text']."'  ";
                            $result1=mysql_query($sql1);
     }

    }   
?> 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-17T17:21:42.613

您使解决方案过于复杂。为了更新每条记录，您尝试采用的方法是：

1.  选择所有记录。
2.  获取每条记录的 ID。
3.  循环遍历 ID。
4.  按该 ID 更新每条记录。

`UPDATE`语法有一个更简单的方法来做到这一点。您不需要为语句提供`WHERE`子句`UPDATE`。如果没有该子句，它将默认更新表中的每条记录：

```
UPDATE TableName SET `board`='value' 
```

**另外**，请注意您的代码中存在[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞。通过 `$_REQUEST['text']`直接在 SQL 查询中使用，您允许任何用户向您的查询发送 SQL 代码。然后，您的代码将执行他们发送给您的任何内容。这可能使他们损坏或删除您的数据，甚至获得对您服务器的管理访问权限。

对于初学者，请停止使用`mysql_*`函数。PHP 已弃用这些，不应再使用它们。他们有[一个`mysqli_`替代品](http://php.net/manual/en/book.mysqli.php)。除此之外，在 SQL 查询中使用输入之前，请使用[该`mysqli_real_escape_string()`函数对输入进行清理。](http://php.net/manual/en/mysqli.real-escape-string.php)最后，使用[准备好的语句](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)而不是直接将值连接到 SQL 字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-14T09:51:32.957

上面给出了`Error Code: 1175\. You are using safe update mode and you tried to update a table without a WHERE that uses a KEY column.`错误。

在单列下更新行中所有值的一个查询。

```
UPDATE TableName SET `board`='value' WHERE `id` > 1; 
```

只需附加一个`WHERE`子句，现在如果 this 在任何 CMS 中，您将获得 this 的变体`id`，它可以是`entity_id`or, `post_id`。

# c# - 使用 urlrewriter.net 设置友好 url 显示实际 url

> ID：16066209
> 
> 赞同：0
> 
> 时间：2013-04-17T17:18:37.213
> 
> 标签：c#, .net

我在玩 urlrewriter.net 并设置一些友好的 url。我设置了一个映射，但我注意到地址栏中的 url 从友好地址变为实际地址。我的印象是这将被用户掩盖。我在这里错过了什么吗？

```
<redirect url="~/products/(.+)/(.+)" to="~/Default.aspx?category=$1&amp;type=$2" /> 
```

友好的网址

```
http://localhost:58358/products/dvds/metal 
```

实际网址

```
http://localhost:58358/Default.aspx?category=dvds&type=metal 
```

# java - 最后一行是否传递了一个对象？还是对对象的引用？

> ID：16066210
> 
> 赞同：0
> 
> 时间：2013-04-17T17:18:39.407
> 
> 标签：java

所以在课堂上，我的老师说第 2 行和第 3 行都传递了对对象的引用。
我问她为什么第 3 行不直接传递一个对象，我对她的论点不是很信服。
你能告诉我她是对还是错，并为这两种情况提供某种证据吗？

```
JFrame frame = new JFrame();        //line 0
JLabel label = new JLabel("hello"); //line 1
frame.add(label);                   //line 2
frame.add(new JLabel("goodbye"));   //line 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:21:20.993

Java 只传递对象引用，也就是说，引用实际上是按值传递的，这可能会造成混淆。Java中没有“直接传入对象”这样的东西。

传入的是一个表示引用的值，在这种情况下，第 3 行是*unnamed*或*anonymous*，在方法的范围内，它的名称是表示该引用的方法参数的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T17:20:55.470

Java 中的所有内容都是按值传递的，甚至引用。在第 2 行，当您传入 时，会创建一个新引用，该引用指向与 one 所指向`label`的对象相同的对象。`label`在第 3 行，发生了类似的事情；只是它不明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:26:55.300

它可以通过任何一种方式完成：

```
frame.add(new JLabel("hello"));     //line 2
frame.add(new JLabel("goodbye"));   //line 3 
```

或者：

```
JLabel label = new JLabel("hello");
JLabel label2 = new JLabel("goodbye");
frame.add(label);    //line 2
frame.add(label2);   //line 3 
```

无论哪种方式，对对象的引用都会被传递。在第一个版本中，对象引用被创建为参数。您不必将引用存储在变量中，它可以立即传递。我认为你的老师是对的。最好给她带一个苹果。

# xml - XML Schema 类型别名？

> ID：16066211
> 
> 赞同：5
> 
> 时间：2013-04-17T17:18:40.347
> 
> 标签：xml, xsd, w3c

有没有办法在 XSD 中定义具有空限制的类型别名/强 typedef/simpleType？

```
<xsd:simpleType name="identifier">
  <xsd:restriction base="xsd:string">
    <xsd:pattern value="^[a-zA-Z_][a-zA-Z0-9_]*$" />
  </xsd:restriction>
</xsd:simpleType>

<xsd:simpleType name="type">
  <xsd:restriction base="identifier" />
</xsd:simpleType> 
```

我想稍后对“类型”类型的属性应用一些验证逻辑，而不是“标识符”类型的属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T18:09:29.323

是的，用空限制派生这样的类型是非常合法的。但是，虽然这两种类型具有相同的值空间，但它们不是同义词。派生类型可以替代基类型，但不能替代。例如，在模式感知 XSLT 样式表中，针对基本类型验证的元素将不匹配需要派生类型实例的模板规则。

# scheme - 如何在方案中使用文件夹？

> ID：16066212
> 
> 赞同：2
> 
> 时间：2013-04-17T17:18:49.820
> 
> 标签：scheme

当您使用 foldr 时，您使用的过程有 2 个参数，列表的当前值和累加器。假设您迭代的列表是一个数字列表，长度相同。然后，当您遍历它们时，您希望将相同索引的数字相乘并将其存储为累加器。

如果你`lambda (x acc) (map * x acc)`在里面使用`foldr`，这会失败，因为`acc`我相信一开始是一个空列表。你怎么能处理这样的基本情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:26:39.260

这可以用`foldr`好吧解决，诀窍是在开始时正确初始化累加值。不需要在这里做花哨的东西（比如宏）！

```
(define lst '((1 2 3) (2 3 5) (3 5 7)))

(foldr (lambda (x acc) (map * x acc))
       (car lst)
       (cdr lst))

=> '(6 30 105) 
```

当然，如果列表为空`(car lst)`就会失败。因此，您可能希望在调用`foldr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:01:29.083

假设您有一个列表列表，如下所示：

```
((1 2 3) (2 3 5) (3 5 7)) 
```

你想把它减少到：

```
(6 30 105) 
```

我会简单地做：

```
(define-syntax mul
    (syntax-rules ()
        ((_ (lists ...)) (map * 'lists ...)))) 
```

您可以按如下方式使用它：

```
(mul ((1 2 3) (2 3 5) (3 5 7))) ; => (6 30 105) 
```

上面的代码简单地扩展为：

```
(map * '(1 2 3) '(2 3 5) '(3 5 7)) 
```

然后你可以折叠结果列表。例如：

```
(foldr + 0 (mul ((1 2 3) (2 3 5) (3 5 7)))) ; => 141 
```

# c# - 或与 || 条件

> ID：16066213
> 
> 赞同：1
> 
> 时间：2013-04-17T17:18:52.333
> 
> 标签：c#, vb.net, conditional-statements

我刚开始使用 Vb.Net。我习惯了 C# 语法。我知道我可以在 C# 中做到这一点：

```
if (x | y)
//Test both 

if (x || y)
//Test both unless x is true 
```

在 Vb.Net 中，考虑到这一点，我怎么能完成同样的事情：

```
If x or y Then
//Test both no matter what 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T17:20:12.080

> 在 Vb.Net 中，我怎样才能完成同样的事情？

`OrElse`

文档在这里：

[http://msdn.microsoft.com/en-us/library/ea1sssb2.aspx](http://msdn.microsoft.com/en-us/library/ea1sssb2.aspx)

`&&`顺便说一句，VB相当于`AndAlso`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:22:41.720

在 Vb.NET 中，等价物是 OrElse。

> 用于对两个表达式执行短路逻辑析取。

```
If x OrElse y Then 
```

参考： http: [//msdn.microsoft.com/en-us/library/ea1sssb2 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/ea1sssb2(v=vs.71).aspx)

# android - 限制 apk 大小 - 即使有大量资源？

> ID：16066215
> 
> 赞同：1
> 
> 时间：2013-04-17T17:18:54.110
> 
> 标签：android, apk, android-image, filesize, android-screen-support

我使用以下内容作为我的研究：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[由于多种密度和屏幕尺寸，APK 太大？](https://stackoverflow.com/questions/11184167/too-large-apk-due-to-multiple-densities-and-screens-sizes)

[如何减小应用程序 (.apk) 大小](https://stackoverflow.com/questions/3815269/how-to-reduce-app-apk-size?lq=1)

我目前正在努力让我的应用程序支持多种屏幕尺寸。目前我没有以下内容：

1.  不同屏幕尺寸的单独布局文件
2.  在相关图像密度文件夹（ldpi、mdpi、hdpi、xhdpi）中分离图像。

其他信息：

1.  所有图片均为.png
2.  我确实想支持平板电脑等大屏幕尺寸
3.  我不希望支持低于这个尺寸的任何东西 - 320x480

尽管我还没有准备好所有东西，但我的应用程序是高度定制的（就图形而言） -**现在略高于 4 mb。（.apk 大小）**

如果我添加单独的布局文件和图像 - app .apk 文件大小可能会爆炸。

**问题：**

我怎样才能解决这个问题并将 .apk 文件大小保持在最小？

**到目前为止我提出的想法：**

1.  位图采样 - 并创建图像加载器
2.  从网上下载图像 - 我希望避免这样做，除非没有其他选择。
3.  将一些文件转换为 .jpeg 文件 - 仍然不清楚它是如何工作的。
4.  使用 .9.patch 图像文件？我相信这使布局设计更容易..但不确定我是否可以使用它来节省 .apk 大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:27:54.343

您可以在发布模式下启用 ProGuard。**ProGuard 工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。结果是较小的 .apk 文件更难进行逆向工程。**

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)。

还可以查看链接中的视频

[http://www.youtube.com/watch?v=amZM8oZBgfk](http://www.youtube.com/watch?v=amZM8oZBgfk)。谈话是关于多版本化的。

减少 .apk 文件大小的提示

[http://developer.sonymobile.com/2012/01/31/tips-for-reducing-apk-file-size/](http://developer.sonymobile.com/2012/01/31/tips-for-reducing-apk-file-size/)

# google-api - Google+ api 不会在登录请求中返回个人资料名称

> ID：16066222
> 
> 赞同：1
> 
> 时间：2013-04-17T17:19:25.873
> 
> 标签：google-api, google-plus

[这里](https://developers.google.com/+/api/oauth#scopes)的谷歌文档清楚地表明

> 您不应将 userinfo.profile 或 plus.me 与 [https://www.googleapis.com/auth/plus.login] 范围结合使用，因为它们是隐式包含的，并且会为您的用户创建一个令人困惑的权限对话框。

...但如果我不使用

`https://www.googleapis.com/auth/userinfo.email`并且`https://www.googleapis.com/auth/userinfo.profile`与`https://www.googleapis.com/auth/plus.login`api 一起不会返回用户的电子邮件地址或姓名。

如果我不应该与`userinfo`范围一起确定`plus.login`范围，我如何获取用户的姓名和电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:25:33.683

您需要`userinfo.email`获取电子邮件地址，但您应该能够在*不*请求`userinfo.profile`. `plus.login`应该让您访问“GET /plus/v1/people/{userid}”调用，该调用应该返回以下字段/对象（至少）：

*   name - 一个对象，包含分解为字段的名称
*   显示名称
*   昵称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T06:37:36.800

我也很难获得个人资料和电子邮件地址。最后我发现我可以使用这些范围来获取所有内容：

' [https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login) '、'电子邮件'、'个人资料'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-10T22:07:05.797

似乎谷歌在其文档中有点含糊。他们说范围“plus.login”包含显示名称和电子邮件，但是，在使用不同的 Google 帐户（普通 Gmail、Google+、Google Apps）运行几次测试之后，这似乎是错误的。

如果用户没有 Google+ 个人资料，“plus.login”将不包含 displayName。这似乎也发生在 Google Apps 帐户上。因此，为了涵盖所有可能的 Google 帐户状态，安全的选择是要求：

*   [https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login)
*   [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)
*   [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)
*   [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

他们说最后两个已弃用，但是，如果您不使用它们，某些帐户将不会返回所有基本信息。我不知道这是否与谷歌帐户的“年龄”有关，或者只是谷歌端的一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-21T14:20:26.880

以这种方式对我有用

范围 = [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)电子邮件

**userinfo.profile**和**email**之间有空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T08:06:26.577

我已经使用以下范围参数实现了多范围。

> 范围 = [https://www.googleapis.com/auth/userinfo.email+profile](https://www.googleapis.com/auth/userinfo.email+profile)

# c# - Oracle Date 列存储时间，但不显示它

> ID：16066223
> 
> 赞同：5
> 
> 时间：2013-04-17T17:19:27.153
> 
> 标签：c#, sql, oracle, datetime, user-interface

我有一个链接到 C# Visual Studio 应用程序的 oracle 数据库后端。

我有一个存储几个日期的 INVOICE 表。

在 UI 中，我将 DateTimePicker 数据绑定到这些字段。用户选择 DATE 和 TIME。这些值存储到数据库中，以后可以检索，但我在 Oracle 界面中看不到时间。

C# 数据集可视化工具： ![在此处输入图像描述](https://i.stack.imgur.com/mwTVS.png)

Oracle 数据视图 ![在此处输入图像描述](https://i.stack.imgur.com/RCikG.png)

请注意，两个图像都在查看同一张表，首先来自 Visual Studio，然后来自 Oracle。TIME 存储在会话之间的某处，因为它可以被检索并填充此列绑定到的用户界面控件：

![在此处输入图像描述](https://i.stack.imgur.com/S1Nhu.png)

问题是我想在 ORACLE 中运行 SQL 并将数据导出到 EXCEL，但是由于时间在 ORACLE 表中不可见，因此我不能在 EXCEL 报告中使用它。

这是设定吗？或一些奇怪的缓存问题或什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T20:03:48.397

好的，这是一个免费的答案:)

请使用该`TO_CHAR`功能以您想要的格式返回日期。

# sql - 从访问中的多个表创建查询

> ID：16066229
> 
> 赞同：0
> 
> 时间：2013-04-17T17:19:39.723
> 
> 标签：sql, ms-access

我在设计查询时遇到了问题，我可以在一些帮助下完成。我有三个表（还有更多，但这些应该这样做）：

*   游戏评论
*   审稿人
*   游戏

我需要一个查询，它只会选择评论者没有评论过的游戏（如果有任何意义的话）。

有任何想法吗？这是在添加评论表单上填充一个框，以便在选择评论者时，下一个下拉列表将仅显示该评论者尚未评论的游戏

更多信息：游戏评论和评论者包含一个`reviewer`ref 字段，游戏评论和游戏包含一个`game`ref 字段

```
SELECT Game.*, [Game Review].*
FROM Game LEFT JOIN [Game Review] ON Game.[Game Ref] = [Game Review].[Game Ref*]
WHERE [Game Review].[Reviewer ref*] IS NULL; 
```

我认为这不起作用，因为我从表单中的文本框中获取数据，即

```
[Forms]![FRM_Add_review_form]![reviewercombo] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:54:24.187

我做了一些假设，因为我没有所有的字段名称，但它会是这样的：

```
SELECT Game.*, GameReview.*
from Game
Left Join GameReview 
on Game.GameID = GameReview.GameID
WHERE GameReview.Review IS NULL 
```

# c++ - std::map 插入而不创建临时值

> ID：16066232
> 
> 赞同：3
> 
> 时间：2013-04-17T17:19:46.467
> 
> 标签：c++, stl, stdmap, stdset

我有一个存储、字符串和一组双打的地图，如下所示。

```
typedef std::map<std::string, std::set<double> > exprType;
typedef std::map<std::string, std::set<double> >::iterator exprIter;

exprType exPricesData;

std::vector<double> lastprice;
std::string exchange; 
```

我需要一种为给定键插入价格的方法，并编写了以下代码。

```
 std::set<double> prices;
  double temp =  lastprice[0]; // An array of values comes as a parameter
  prices.insert(temp); // Creating a temp. set

  std::pair<exprIter,bool> locIter = exPricesData.insert(
            std::pair<std::string, std::set<double> >(exchange, prices));

   for ( int i = 1; i < lastprice.size() ; ++i )
   {
        locIter.first->second.insert(lastprice[i]);
   } 
```

我想知道，有没有办法特别改进第一部分，它创建了一个临时集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:25:39.620

你的意思是这样的吗？

```
std::set<double> &prices = exPricesData[exchange];  //returns existing value, or inserts a new one if key is not yet in map

prices.insert(lastprice.begin(), lastprice.end()); 
```

哦，使用`std::set<double>`. 如果数字是计算的结果，则数字不准确可能会导致您不期望它们出现在集合中的不同成员。

# android - 删除视图上的 OnClickListener 删除后面视图上的所有触摸事件

> ID：16066235
> 
> 赞同：7
> 
> 时间：2013-04-17T17:20:05.500
> 
> 标签：android, view, onclicklistener

我有一个带有标题、垂直菜单和透明背景视图的顶部栏布局。

按下时`btn_menu`，会使用动画打开垂直菜单。当菜单打开时，我`OnClickListener`在透明背景视图上设置一个，当单击透明背景时关闭菜单。关闭菜单时，我`OnClickListener`从背景视图中删除，使用：

```
mTopBarBg.setOnClickListener(null); 
```

问题是它似乎删除了它后面的视图的所有触摸事件（在`content_container`主布局中设置）。例如。一个`ViewPager`不再检测到滑动，或者一个`ListView`不再滚动并且不能再被点击，而它们之前工作正常。

怎么了？

**在顶部栏片段中**

```
private void toggleMenu(int duration){
    if(mMenuIsOpen){

        TranslateAnimation anim1 = new TranslateAnimation(0,0,0,-(mHeight-mMenuVerticalOffset));
        anim1.setFillAfter(true);
        anim1.setDuration(duration);
        mVerticalMenu.setAnimation(anim1);

        AlphaAnimation anim2 = new AlphaAnimation(0.7f, 0.0f);
        anim2.setFillAfter(true);
        anim2.setDuration(duration);
        mTopBarBg.setAnimation(anim2);

        mTopBarBg.setOnClickListener(null);

        mMenuIsOpen = false;
    }
    else{

        TranslateAnimation anim1 = new TranslateAnimation(0,0,-(mHeight-mMenuVerticalOffset),0);
        anim1.setFillAfter(true);
        anim1.setDuration(duration);
        mVerticalMenu.setAnimation(anim1);

        AlphaAnimation anim2 = new AlphaAnimation(0.0f, 0.7f);
        anim2.setFillAfter(true);
        anim2.setDuration(duration);
        mTopBarBg.setAnimation(anim2);

        mTopBarBg.setOnClickListener(mBgClickListener);

        mMenuIsOpen = true;
    }
} 
```

**主要布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/mainbg" 
        android:scaleType="centerCrop"/>

    <FrameLayout
        android:id="@+id/content_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingTop="44dp" />

    <FrameLayout
        android:id="@+id/top_bar_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipChildren="false" />

</RelativeLayout> 
```

**顶栏布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000" >

    <View
        android:id="@+id/top_bar_bg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#000000"
        android:visibility="gone" />

    <LinearLayout
        android:id="@+id/vertical_menu"
        android:layout_width="50dp"
        android:layout_height="match_parent"
        android:layout_marginTop="44dp"
        android:background="#ffffff"
        android:orientation="vertical"
        android:visibility="gone" >

        <!-- vertical menu layout -->

    </LinearLayout>

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:background="#ffffff" >

        <Button
            android:id="@+id/btn_menu"
            android:layout_width="50dp"
            android:layout_height="44dp"
            android:background="@drawable/menubtn" />       

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="44dp"
            android:layout_toRightOf="@id/btn_menu"
            android:gravity="center" >

            <ImageView
                android:layout_width="130dp"
                android:layout_height="44dp"
                android:src="@drawable/logo" />
        </LinearLayout>
    </RelativeLayout>

</RelativeLayout> 
```

**打开菜单的顶栏**

![在此处输入图像描述](https://i.stack.imgur.com/hS8OY.jpg)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T05:16:53.290

尝试`setClickable(false)`在您的叠加层上也使用`View`。使用该`setOnClickListener()`方法使`View`可点击，这可能会“吃掉”你未来的事件（即使在使用后`null`不会修改之前设置的可点击属性）。

作为一个方面，您的布局与您尝试做的事情相比非常复杂。更准确地说，布局比它应该的更深。`FrameLayout`当容器具有与 bar相同的属性时，拥有一个容器是没有意义的`RelativeLayout`（您可以使用`include`标签来包含 bar 而无需额外的`FrameLayout`）。您也可以`top_bar_bg` `View`直接在 root 上丢失并设置侦听器`RelativeLayout`。最后，内部`RelativeLayout`（标题）可以通过将子视图正确定位在根中并在其下`Relativelayout`为白色空`View`（具有适当的尺寸以模拟白色背景）来移除和替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:14:35.467

`onClickListener`您可以做一件事，而不是删除。始终设置`onClickListener`并使用 a`boolean variable`来打开和关闭菜单。所以你的代码将类似于

```
 boolean is_menu_open = false;
 public void onClick(View v){
        if(is_menu_open){
             hidemenu;
             is_menu_open = false;
        } else
             do nothing
  } 
```

并且每当您显示菜单时，然后设置`is_menu_open`为`true`

# angularjs - 在 $digest 之后延迟 angularjs 监视执行（引发 DOM 事件）

> ID：16066239
> 
> 赞同：32
> 
> 时间：2013-04-17T17:20:18.070
> 
> 标签：angularjs, angularjs-directive

我有一个触发 DOM 事件的手表：

```
scope.$watch(function() { return controller.selected; }, function(selected) {
    if (selected) {
        $input.trigger('focus');
    }
}); 
```

问题是我有一个处理“焦点”的处理程序，它执行`scope.$apply`.

```
$input.bind('focus', function() {
    scope.$apply(function() { controller.focused = true; });
}); 
```

因此，当 my`$watch`从内部被触发时，`$digest`它会导致错误，因为它试图触发另一个`$digest`.

我的解决方法是将触发器放在`$timeout`.

```
scope.$watch(function() { return controller.selected; }, function(selected) {
    if (selected) {
        $timeout(function() { $input.trigger('focus'); });
    }
}); 
```

这有效......到目前为止。这是处理这个问题的正确方法吗？我不确定这是否适用于所有情况，并且想看看是否有一种角度认可的方法可以在摘要之后延迟一段代码。

谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-17T17:32:55.470

[$timeout](http://docs.angularjs.org/api/ng.$timeout)通常用于在摘要循环之后（以及**在**浏览器呈现之后）运行某些内容。

`$timeout`将导致函数执行后执行另一个摘要循环。如果您`trigger`不影响任何 Angular，您可以将`invokeApply`参数设置`false`为避免运行另一个摘要循环。

如果您希望回调在浏览器呈现**之前**运行：如果代码使用`$evalAsync` *from 指令*排队，它应该在 Angular 操作 DOM 之后但在浏览器呈现之前运行。`$evalAsync` *但是，如果代码使用来自控制器*的队列，它将在 Angular 操作 DOM 之前（以及在浏览器呈现之前）运行。另请参阅[https://stackoverflow.com/a/17303759/215945](https://stackoverflow.com/a/17303759/215945)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:44:41.680

就像每个人一直说的那样，你不应该在你的控制器中做 DOM 的东西。

这是一个应用两种方式数据绑定来聚焦的解决方案。现在您的焦点绑定到一个变量。因此，当您将变量设置为 true 时，它​​将焦点设置在相应的元素上，并且当元素获得焦点时，设置变量。

[http://plnkr.co/edit/CvPCVxy4MfJEM1UksrrA?p=preview](http://plnkr.co/edit/CvPCVxy4MfJEM1UksrrA?p=preview)

我们现在已经成功地将焦点从控制器代码中分离出来。它还负责处理所有 $timeout 问题（我猜）。您唯一需要注意的是，您不应该使用同一个变量来绑定两个不同元素的焦点。

**编辑：**更新了 plunk，因为前一个不能正常工作。

# python - Python 中类的列表或散列的 in 运算符的机制是什么？

> ID：16066242
> 
> 赞同：2
> 
> 时间：2013-04-17T17:20:32.377
> 
> 标签：python

我试图了解如何在 Python 中实现对象的列表或散列。更具体地说，在[这个问题](https://stackoverflow.com/questions/2217001/override-in-operator-in-python)中，这是我能得到的最接近的，我通过这样做看到了这一点：

```
class MyClass(object):

def __init__(self):
    self.numbers = [1,2,3,4,54]

def __contains__(self, key):
    return key in self.numbers

>>> m = MyClass()
>>> 54 in m
True 
```

我可以直接在类中使用运算符**来检查其中的属性**。

我的问题是这个问题的延伸。假设我有一个 MyClass 对象的列表或哈希，即：

```
list = [m1,m2,m3]
hash = {m1,m2,m3} 
```

我想使用类似的东西：

```
if 54 in list: 
   #do something
if 54 in hash: 
   #do something 
```

需要在 MyClass 中定义哪些方法才能使 in 运算符起作用？我不确定 in 做了什么（如果是 == 则需要 __eq 或其他东西）。如果您碰巧知道在这种情况下如何使 .index() 工作，我也将不胜感激。

**编辑：对不起，最初的问题令人困惑。我希望我说清楚了。我正在尝试查找属于该类的属性，例如另一个问题的原始示例。但现在我试图在列表或哈希中这样做。从某种意义上说，我希望通过询问一个元素是否在列表中，它询问它是否在列表的每个元素中。**我不确定是通过在列表或哈希中使用运算符来做到这一点，还是使用 == 进行比较。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:27:21.653

当`in`测试包含时，它会根据您的自定义类型检查是否*相等。*

换句话说，`ob in some_sequence`可以看成：

```
any((ob is contained_ob or ob == contained_ob) for contained_ob in some_sequence) 
```

两个自定义类`ob1`和`ob2`测试相等，如果：

1.  它们是相同的，`ob1 is ob2`是True。它们是同一个对象。
2.  如果`ob1`有`__eq__`方法，则`ob1.__eq__(ob2)`进行测试。
3.  如果`ob1`没有这种方法，但`ob2.__eq__()` *确实*存在则`ob2.__eq__(ob1)`尝试。

您还可以定义`__ne__()`and/or`__cmp__()`方法使事情变得更复杂一些，但您通常希望避免在自定义类型中过多地玩弄这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:46:49.200

As @MartijnPieters said, you should overload the `__eq__()` method. I'm not sure what you mean by the hash/dictionary example you gave.

```
class MyClass(object):

    def __init__(self):
        self.numbers = [1,2,3,4,54]

    def __contains__(self, key):
        return key in self.numbers

    def __eq__(self, other):
        if other in self.numbers:
            return True
        else:
            return False

m1 = MyClass()
m2 = MyClass()
m3 = MyClass()

test1 = 54 in [m1, m2, m3]
print test1
#True
test2 = 666 in [m1, m2, m3]
print test2
#False 
```

# facebook - 简单 fql 状态的错误结果

> ID：16066256
> 
> 赞同：0
> 
> 时间：2013-04-17T17:21:12.410
> 
> 标签：facebook, facebook-graph-api, facebook-fql, status

我正在测试这个 fql 多查询

`"status":"SELECT status_id,time,message,place_id,source,uid FROM status WHERE uid = \''.$pageID.'\' AND status_id IN (SELECT object_id FROM #query1))",`

这必须返回所选“用户”（$pageID）在所选 status_id 上的状态列表

结果是错误的，我得到相同的结果

`"status":"SELECT status_id,time,message,place_id,source,uid FROM status WHERE status_id IN (SELECT object_id FROM #query1))",`

第二个查询打印具有许多不同 UID 的 27 状态，第一个查询打印相同的 27 状态但都具有相同的 UID？

任何想法/建议？

**更新**：我在这里粘贴完整的多查询使用

`$multiQuery = '{ "query1":"SELECT object_id,post_id,object_type FROM like WHERE user_id = me() limit 200", "status":"SELECT status_id,time,message,place_id,source,uid FROM status WHERE (uid = \''.$pageID.'\' AND status_id IN (SELECT object_id FROM #query1))", "photo":"SELECT object_id,created,owner FROM photo WHERE owner = \''.$pageID.'\' AND object_id IN (SELECT object_id FROM #query1)", "link":"SELECT created_time,owner FROM link WHERE owner = \''.$pageID.'\' AND link_id IN (SELECT object_id FROM #query1)" }';`

# ios - NSJSONSerialization 无法识别

> ID：16066259
> 
> 赞同：1
> 
> 时间：2013-04-17T17:21:16.417
> 
> 标签：ios, objective-c, json, serialization

我试图将 json 字符串解析成字典。为此我使用以下代码：

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:json_string]; 
```

这给了我以下错误：

```
+[NSJSONSerialization JSONObjectWithData:]: unrecognized selector sent to class... 
```

我在 Apples 文档中进行了搜索，发现该类包含在 Foundation 框架中（我的项目中包含了该框架）。我不知道为什么会这样。

任何的想法？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T17:24:36.040

你忘记了一些论点：

```
NSError *error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:json_string options:0 error:&error]; 
```

请注意，第一个参数是一个`NSData`对象，而不是字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T17:27:38.010

完整的选择器是`JSONObjectWithData:options:error:`，所以看起来您缺少两个参数。尝试类似的事情：

```
NSError *error = nil;
NSData *jsonData = [rawJSONString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *jsonObject = [NSJSONSerialization JSONObjectWithData:jsonData options: kNilOptions error:&error]; 
```

请注意，这需要一个`NSData`参数而不是一个`NSString`参数，并且不会总是返回一个`NSDictionary`，它可能是一个`NSArray`或另一个 Foundation 对象。在生产使用中，您应该`error`在相信这`jsonObject`是一个有效对象之前检查参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T17:27:51.933

根据[文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)，您首先需要将您的字符串转换为 NSData 对象，并调用正确的 NSJSONSerialization 类方法。您可以执行以下操作：

```
NSData *stringData=[json_string dataUsingEncoding:NSUTF8StringEncoding];
NSError *jsonError=nil;
NSDictionary *dictionary =[NSJSONSerialization  JSONObjectWithData:stringData options:0 &jsonError]; 
```

检查 jsonError 以获取有关出错的提示（如果有的话）。如果一切顺利，您的字典中将填充 json_string 信息。

# optimization - 哪些非局部效应可以改变基本块的性能？

> ID：16066263
> 
> 赞同：5
> 
> 时间：2013-04-17T17:21:40.090
> 
> 标签：optimization, assembly, compilation, x86, micro-optimization

[**基本块**](http://en.wikipedia.org/wiki/Basic_block)是只有一个入口点和一个出口点的程序集片段（维基百科链接也有更严格的定义）。许多编译器优化过程依赖于编译器将用户代码分解为基本块，然后再将它们提供给优化器。

我很想知道哪些非局部效应会影响基本块本身的性能。非局部效应是指基本块之外的代码在可能影响其运行时间之前如何运行，或者代码在内存中的布局如何影响它。这比担心带有循环、分支等的任意程序的性能更具限制性。

程序的其他部分（内存和指令缓存）使用我的头缓存似乎是最大可能的非本地影响。还有先前执行的指令或当前正在运行的较早指令的管道设置状态。我特别对 x86/x86-64 感兴趣，但对其他架构的影响似乎也值得了解。还有其他非局部效应吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:53:14.707

这是一个简短的列表：

*   代码和数据在内存层次结构中的位置
*   缓存线效果
*   其他线程并行执行
*   锁和其他同步
*   中断（来自 I/O 设备或操作系统陷阱调用）
*   访问模式导致的页面错误
*   数据访问依赖关系（相同与不同的内存地址）
*   写序列化/一致性

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:08:32.307

如果基本块包含函数调用，那是一个很大的未知数。

# wpf - 如何仅在 xaml 中单击按钮时显示图像可见性

> ID：16066266
> 
> 赞同：0
> 
> 时间：2013-04-17T17:21:43.490
> 
> 标签：wpf, xaml

我试图在单击按钮时更改图像的可见性，但随后图像消失并将其可见性更改回隐藏。基本上是一个保存图像，让用户知道保存成功。我只想在 xaml 中执行此操作。有什么建议吗？

代码：

```
<Image x:Name="SavedImage"
       Source="/check.ico">
  <Image.Resources>
    <Style TargetType="Image">
      <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=SaveDocumentsButton, Path=IsPressed}"
                     Value="True">
          <Setter Property="Visibility"
                  Value="Visible"></Setter>
        </DataTrigger>
        <Trigger Property="Image.Visibility"
                 Value="Visible">
          <Trigger.EnterActions>
            <BeginStoryboard>
              <Storyboard x:Name="saveStoryBoard">
                <DoubleAnimation x:Name="z"
                                 BeginTime="0:0:0"
                                 Duration="0:0:3"
                                 From="1.0"
                                 To="0.0"
                                 Storyboard.TargetProperty="Opacity" />
              </Storyboard>
            </BeginStoryboard>
          </Trigger.EnterActions>
        </Trigger>
      </Style.Triggers>
    </Style>
  </Image.Resources>
</Image>
<Button x:Name="SaveDocumentsButton"
        Style="{StaticResource SaveButtonWhite}"
        Command="{Binding SaveUnitCommand}"
        HorizontalAlignment="Right">
</Button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:48:32.747

这应该很好地工作：

```
<Grid>
  <Image x:Name="SavedImage"
         Source="http://i.msdn.microsoft.com/dn166920.cover_lrg(en-us,MSDN.10).jpg">
    <Image.Resources>
      <Style TargetType="Image">
        <Style.Triggers>
          <DataTrigger Binding="{Binding ElementName=SaveDocumentsButton, Path=IsPressed}"
                       Value="True">
            <Setter Property="Opacity"
                    Value="1"></Setter>

            <DataTrigger.EnterActions>

              <BeginStoryboard>
                <Storyboard x:Name="saveStoryBoard">
                  <DoubleAnimation x:Name="z"
                                   BeginTime="0:0:0"
                                   Duration="0:0:3"
                                   From="1.0"
                                   To="0.0"
                                   Storyboard.TargetProperty="Opacity" />
                </Storyboard>
              </BeginStoryboard>
            </DataTrigger.EnterActions>
          </DataTrigger>

        </Style.Triggers>
      </Style>
    </Image.Resources>
  </Image>
  <Button x:Name="SaveDocumentsButton"
          Content="TEST"
          HorizontalAlignment="Right">
  </Button>
</Grid> 
```

# css - css 兄弟与选择器之间的另一个元素

> ID：16066269
> 
> 赞同：2
> 
> 时间：2013-04-17T17:22:13.617
> 
> 标签：css, asp.net-mvc-3

我有一张桌子，当你按下一个单元格时，它会改变它的颜色：

**HTML**

```
<table id="hours">
  <tr>
    <td>
      <div>
        <input type="checkbox" id="checkHourR01C01" />
        <label for="checkHourR01C01"> </label>
      </div>
    </td>
  ... 
```

**CSS**

```
table#hours input[type=checkbox] { visibility: hidden; }
table#hours input[type=checkbox]:checked  + label { background-color: blue; } 
```

这很完美。现在的问题是我正在使用 ASP MVC 3，并且 Html.CheckboxFor 添加了一个隐藏的输入类型。所以我的html结构是这样的：

**HTML**

```
<table id="hours">
  <tr>
    <td>
      <div>
        <input data-val="true" data-val-required="The Selected field is required." id="Days_0__Hours_0__Selected" name="Days[0].Hours[0].Selected" type="checkbox" value="true" />
        <input name="Days[0].Hours[0].Selected" type="hidden" value="false" />
        <label for="Days_0__Hours_0__Selected"> </label>
      </div>
    </td>
  ... 
```

所以现在是这样的：

```
table#hours input[type=checkbox]:checked input[type=hidden] + label { background-color: blue; } 
```

但这不起作用。有没有办法用CSS修复它，或者我需要更改为jquery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:30:25.883

尝试`~` [一般的兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors)：

```
table#hours input[type=checkbox]:checked input[type=hidden] ~ label { background-color: blue; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:31:03.700

`label`仍然是`checkbox`它的兄弟，只是不相邻。尝试您的原始 CSS，除了使用`~`而不是`+`.

```
table#hours input[type=checkbox]:checked ~ label { background-color: blue; } 
```

# ruby-on-rails - 生产模式下的 Rails 可安装发动机资产

> ID：16066271
> 
> 赞同：0
> 
> 时间：2013-04-17T17:22:17.993
> 
> 标签：ruby-on-rails, asset-pipeline, production-environment, rails-engines

我在 rails 4 中构建了一个可安装的 rails 引擎。我在另一个应用程序中使用了该引擎。在开发模式下，一切运行正常，我可以毫无问题地使用引擎，并且所有引擎资产都正确显示。

但是当我将主机应用程序部署到我的服务器时，我的 scss 和 js 文件不再包括在内。所有引擎资产均已正确编译。在 public/assets 目录中存在一个带有引擎名称的目录，我可以找到已编译的 css 和 js 文件以及图像。

但！当我从主机应用程序中打开引擎页面时（因此呈现引擎布局文件）

```
<%= stylesheet_link_tag "backbone/application.css", media: "all" %>
<%= javascript_include_tag "backbone/application.js" %> 
```

引擎布局文件中的标头标签被翻译成：

```
<link href="/stylesheets/backbone/backbone.css" media="all" rel="stylesheet" />
<script src="/javascripts/backbone/backbone.js"></script>. 
```

显然，这些标签不引用资产文件夹。此外，application.js 和 application.css 被重命名为主干.js 和主干.css。

有人可以告诉我为什么在部署期间编译资产，但是应该查明资产的样式表 javascript 标签是完全错误的吗？我忘记了引擎中的一些配置吗？

**更新**

配置/环境/development.rb：

```
Nad::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb.

  # In the development environment your application's code is reloaded on
  # every request. This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Do not eager load code on boot.
  config.eager_load = false

  # Show full error reports and disable caching.
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send.
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger.
  config.active_support.deprecation = :log

  # Raise an error on page load if there are pending migrations
  config.active_record.migration_error = :page_load

  # Debug mode disables concatenation and preprocessing of assets.
  config.assets.debug = true

  config.action_mailer.default_url_options = { :host => 'localhost:3000' }

end 
```

配置/环境/production.rb：

```
Nad::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb.

  # Code is not reloaded between requests.
  config.cache_classes = true

  # Eager load code on boot. This eager loads most of Rails and
  # your application in memory, allowing both thread web servers
  # and those relying on copy on write to perform better.
  # Rake tasks automatically ignore this option for performance.
  config.eager_load = true

  # Full error reports are disabled and caching is turned on.
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Enable Rack::Cache to put a simple HTTP cache in front of your application
  # Add `rack-cache` to your Gemfile before enabling this.
  # For large-scale production use, consider using a caching reverse proxy like nginx, varnish or squid.
  # config.action_dispatch.rack_cache = true

  # Disable Rails's static asset server (Apache or nginx will already do this).
  config.serve_static_assets = false

  # Compress JavaScripts and CSS.
  config.assets.js_compressor  = :uglifier
  # config.assets.css_compressor = :sass

  # Whether to fallback to assets pipeline if a precompiled asset is missed.
  config.assets.compile = false

  # Generate digests for assets URLs.
  config.assets.digest = true

  # Version of your assets, change this if you want to expire all your assets.
  config.assets.version = '1.0'

  # Specifies the header that your server uses for sending files.
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # Set to :debug to see everything in the log.
  config.log_level = :info

  # Prepend all log lines with the following tags.
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups.
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production.
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server.
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets.
  # application.js, application.css, and all non-JS/CSS in app/assets folder are already added.
  # config.assets.precompile += %w( search.js )

  # Ignore bad email addresses and do not raise email delivery errors.
  # Set this to true and configure the email server for immediate delivery to raise delivery errors.
  # config.action_mailer.raise_delivery_errors = false

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found).
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners.
  config.active_support.deprecation = :notify

  # Disable automatic flushing of the log to improve performance.
  # config.autoflush_log = false

  # Use default logging formatter so that PID and timestamp are not suppressed.
  config.log_formatter = ::Logger::Formatter.new

  config.action_mailer.default_url_options = { :host => 'arbeidsconferentie.nl' }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T08:42:39.530

根据您使用的托管服务提供商，您可能需要设置：

```
config.serve_static_assets = true 
```

例如，Heroku 不向服务器静态资产提供 nginx 或 apache。此外，如果您想在本地机器上以生产模式运行 rails 服务器，您需要将此配置设置为`true`.

# python - 绘制目录中的所有数据文件

> ID：16066273
> 
> 赞同：3
> 
> 时间：2013-04-17T17:22:22.747
> 
> 标签：python, numpy, matplotlib

我试图在 python 的一个目录中绘制我的所有数据文件，然后保存生成的图。我**不是**在尝试编写高效的 p​​ython 代码（不幸的是）：现在只是对绘制数据感兴趣。

我是 python 的新手，我的目标是在我的论文中组织数字。

所以使用下面的代码，这就是我想要做的：

1.  我列出所有`.dat`文件`glob`
2.  我用文件名填充一个数组
3.  我遍历这个文件名数组和`plot_surface`每个数据文件

我试图绘制的数据[在这里](http://dl.dropboxusercontent.com/u/13223318/profiledata.zip)

向我吐出的错误是：

## 错误

```
 File "/home/dnaneet/Research/test_collection/dftdata/profile2.py", line 59, in <module>
    plot(x, y, z)
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 2286, in plot
    ret = ax.plot(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 3783, in plot
    for line in self._get_lines(*args, **kwargs):
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 317, in _grab_next_args
    for seg in self._plot_args(remaining, kwargs):
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 278, in _plot_args
    raise ValueError, 'third arg must be a format string'
ValueError: third arg must be a format string 
```

## Python代码

> ```
> import os
> import glob
> import sys
> import subprocess
> import matplotlib.pyplot as plt
> from mpl_toolkits.mplot3d import Axes3D
> import numpy as np
> 
> from numpy import *
> from numpy.random import rand
> from pylab import pcolor, show, colorbar, xticks, yticks
> from pylab import *
> 
> print 'Listing all profile/dat files'
> profilefilelist = glob.glob('*profile*.dat')
> raw_input('Press ENTER to continue...')
> print profilefilelist
> 
> for i in profilefilelist:
>   DATA = i
>   def get_data(fname=DATA):
>     '''Read 2d array of z coordinates from file. Convert to float values
>     and wrap in a numpy array.'''
>     with open(fname) as f:
>         data = [map(float, line.split()) for line in f]
>     return np.array(data)
>     def plot(x, y, z):
> 
>         fig = plt.figure()
>         ax = fig.gca(projection='3d')
>         ax.plot_surface(x, y, z, rstride=5, cstride=5,cmap="binary",linewidth=0.1)
>         ax.set_zlim3d(0.0,4.0)  
>         ax.set_xlabel('X',fontsize=16,fontweight="bold")
>         ax.set_ylabel('Y',fontsize=16,fontweight="bold")
>         ax.set_zlabel('h(X,T)',fontsize=16,fontweight="bold")
>         savefig(os.getcwd()+DATA+'.pdf',figsize=(5,5),dpi=600)
>         savefig(os.getcwd()+DATA+'.pdf',figsize=(5,5),dpi=600)
> 
> if __name__ == '__main__':
>     z = get_data()
>     x = range(z.shape[0])
>     y = range(z.shape[1])
>     x, y = np.meshgrid(x, y)
>     plot(x, y, z) 
> ```

## 问题

这是因为我的缩进不佳还是这里发生了更险恶的事情？我应该怎么做才能纠正这些错误？

我不太了解python，并且一直试图远离mathematica（因为我将毕业并且再也买不起世界上的mathematicas或matlabs了）。

## SE上提供的先前代码：

[这里](https://stackoverflow.com/a/16022815/957560)

## 修改后的代码（基于答案）

> ```
> import os
> import glob
> import sys
> import subprocess
> import matplotlib.pyplot as plt
> from mpl_toolkits.mplot3d import Axes3D
> import numpy as np
> 
> from numpy import *
> from numpy.random import rand
> from pylab import pcolor, show, colorbar, xticks, yticks
> from pylab import *
> 
> print 'Listing all profile/dat files'
> profilefilelist = glob.glob('*profile*.dat')
> raw_input('Press ENTER to continue...')
> print profilefilelist
> DATA=profilefilelist
> 
> for i in DATA:
>     def get_data(fname=i):
>         '''Read 2d array of z coordinates from file. Convert to float values
>         and wrap in a numpy array.'''
>         with open(fname) as f:
>             data = [map(float, line.split()) for line in f]
>             return np.array(data)
> for i in DATA:    
>     def my_plot(x, y, z):
>         fig = plt.figure()
>         ax = fig.gca(projection='3d')
>         ax.plot_surface(x, y, z, rstride=5, cstride=5,cmap="binary",linewidth=0.1)
>         ax.set_zlim3d(0.0,4.0)  
>         ax.set_xlabel('X',fontsize=16,fontweight="bold")
>         ax.set_ylabel('Y',fontsize=16,fontweight="bold")
>         ax.set_zlabel('h(X,T)',fontsize=16,fontweight="bold")
>         plt.show()
> #        savefig(os.getcwd()+DATA+'.pdf',figsize=(5,5),dpi=600)
> #        savefig(os.getcwd()+DATA+'.pdf',figsize=(5,5),dpi=600)    
> 
> if __name__ == '__main__':
>             z = get_data()
>             x = range(z.shape[0])
>             y = range(z.shape[1])
>             x, y = np.meshgrid(x, y)
>             my_plot(x, y, z) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:58:47.317

一些清理建议（你的任务比较简单，我认为有一些不必要的操作）：

*   不要迭代列表的索引，迭代列表本身；
*   摆脱样板代码（打印，`raw_input`仅用于确认等）
*   利用数组创建例程。
*   不要创建只在一个地方调用的函数。
*   避免多次导入或`from module import *`, 因为它已经导致名称冲突。

这是您的程序的修改版本，我相信它可以达到相同的结果。这不是您问题的解决方案，而是一系列小的改进（或我认为的改进）：

```
import os
import glob
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import numpy as np

for fname in glob.glob('*profile*.dat'):

    z = numpy.loadtxt(fname)

    x,y = np.meshgrid(range(z.shape[0]), range(z.shape[1]))

    fig = plt.figure()

    ax = fig.gca(projection='3d')
    ax.plot_surface(x, y, z, rstride=5, cstride=5,cmap="binary",linewidth=0.1)
    ax.set_zlim3d(0.0,4.0)

    ax.set_xlabel('X',fontsize=16,fontweight="bold")
    ax.set_ylabel('Y',fontsize=16,fontweight="bold")
    ax.set_zlabel('h(X,T)',fontsize=16,fontweight="bold")
    plt.savefig(os.getcwd()+fname+'.pdf',figsize=(5,5),dpi=600)
    plt.savefig(os.getcwd()+fname+'.pdf',figsize=(5,5),dpi=600) 
```

您可以选择在最后两行中使用：

```
plt.savefig(os.path.join(os.getcwd, "%s.pdf" % fname), figsize=(5,5), dpi=600) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:33:59.180

我至少可以看到一个缩进问题（尽管我没有所有依赖项来重现它）。

您的 def plot(x,y,z) 在 def get_data 函数内（在您的 for 循环内）。

您只需要定义一次函数，因此您可以将 def get_data 和 def 绘图线从第 0 列开始。然后您的

```
if __name__ == '__main__' 
```

block 将调用您的绘图函数而不是 pyplot （如回溯中所示）。

此外，无需在 for 循环中定义 get_data，您只需使用您正在查找的 DATA 文件调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:38:54.243

一个简单的例子来帮助你理解函数和循环是如何工作的。

```
# Here I define bar 10 times, but call it 1 times
# This is what you're doing in your code
print "defining bar 10 times"
for i in range(10):
    def bar(i):
        print "bar " + str(i)
print "running it once"
bar(99)

# Here I define foo once, and call it 10 times
# This is what I think you're trying to do
print "defining foo once"
def foo(i):
    print "foo " + str(i)

print "running foo 10 times"
for i in range(10):
    foo(i) 
```

这是上面代码的输出：

```
defining bar 10 times
running it once
bar 99
defining foo once
running foo 10 times
foo 0
foo 1
foo 2
foo 3
foo 4
foo 5
foo 6
foo 7
foo 8
foo 9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T17:32:59.977

您已经定义了自己的函数并将其命名`plot`，但是当您调用它时，`plot(x,y,z)`它看起来像是在调用标准`pyplot.plot`命令（请参阅回溯中的代码位置）。例如，尝试将其重命名`my_plot`为。

一般来说，在这种情况下，强烈建议不要用其他常用函数的名称来命名您自己的对象（函数和变量）。

正如@tstone 所指出的，您的函数定义在循环内，在运行循环之前定义它们，但也要给它们唯一的名称。使用唯一名称，如果您愿意，您仍然可以使用普通`plot`函数，并且您会发现范围错误（它是在循环中定义的），因为唯一名称（`my_plot`例如）将是未定义的.

尝试像这样重组你的脚本：

```
import ...

def get_data(fname):    #fname is now a required argument, to be fed in by the loop in __main__ body
    '''Read 2d array of z coordinates from file. Convert to float values
    and wrap in a numpy array.'''
    ...

# should pass DATA to the savefig:
def my_plot(x, y, z, DATA):
    ...
    savefig(...DATA...)

# do everything else here:
if __name__ == '__main__':
    print 'Listing all profile/dat files'
    profilefilelist = glob.glob('*profile*.dat')
    raw_input('Press ENTER to continue...')
    print profilefilelist

    # you didn't need `i` since you just immediately assigned it to DATA, just call it DATA in the first place
    for DATA in profilefilelist:
        z = get_data(DATA)
        x = range(z.shape[0])
        y = range(z.shape[1])
        x, y = np.meshgrid(x, y)
        my_plot(x, y, z, DATA)       # Here, pass DATA to `my_plot` 
```

请注意，我更改了 for 的参数`get_data`，使其没有默认参数，但它将接受一个变量（这里称为`DATA`来自循环的变量）。

# amazon-cloudsearch - 如何在同一个 cloudsearch 查询中使用“or”和“and”？

> ID：16066275
> 
> 赞同：2
> 
> 时间：2013-04-17T17:22:30.577
> 
> 标签：amazon-cloudsearch

如何在同一个查询中使用“**或**”和“**和”？**

我有两个工作正常的查询：

```
http://xxx.cloudsearch.amazonaws.com/2011-02-01/search?q=keyword&bq=(or field_1:'x' field_1:'y')

http://xxx.cloudsearch.amazonaws.com/2011-02-01/search?q=keyword&start=0&bq=(and field_3:'x' field_4:'True') 
```

field_1 是文字类型。

第一个我使用“或”，第二个“和”有条件。我怎样才能把这两个查询放在一个？我尝试了几种方法，但总是从 Amazon CloudSearch 中得到一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:26:00.297

好，我知道了。这是答案：

```
(and field_2:'x' field_3:'y' (or field_1:'w' field_1:'z' )) 
```

# mysql - MySQL查询选择具有相同值的所有字段

> ID：16066276
> 
> 赞同：0
> 
> 时间：2013-04-17T17:22:33.640
> 
> 标签：mysql, select, having

我正在寻找编写 MySQL 查询的帮助。

每行至少有两行具有相同的 conversation_id。我想选择在所有行中具有相同会话 ID 的收件人状态字段中具有“删除”的那些。

```
SELECT conversation_id
FROM xf_conversation_recipient
GROUP BY recipient_state HAVING (delete in all fields) 
```

将选择以下对话 ID

```
conversation_id recipient_state
1               delete
1               delete 
```

不会选择以下对话 ID

```
conversation_id recipient_state
1               delete
1               active 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:00:40.190

```
SELECT conversation_id, COUNT(DISTINCT recipient_state) AS nb, recipient_state
FROM xf_conversation_recipient
GROUP BY conversation_id
HAVING nb=1 AND recipient_state='delete' 
```

查询按对话 ID 分组，仅保留具有 1 个不同收件人状态且收件人状态等于“删除”的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:34:59.350

我能想到的最好的方法是自左加入：

```
SELECT DISTINCT r1.conversation_id
FROM xf_conversation_recipient AS r1
LEFT JOIN xf_conversation_recipient AS r2 ON r2.conversation_id = r1.conversation_id AND r2.recipient_state != 'delete'
WHERE r1.recipient_state = 'delete' AND r2.conversation_id IS NULL 
```

基本上，抓取所有没有匹配行且没有“删除”作为状态的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:38:27.263

给定一个如下所示的表`xf_conversation_recipient`：

```
+----------------+----------------+
|conversation_id |recipient_state |
+----------------+----------------+
|1               |delete          |
|1               |delete          |
|2               |active          |
|2               |delete          |
|3               |delete          |
|3               |delete          |
|4               |active          |
|4               |delete          |
|5               |active          |
|5               |active          |
|6               |delete          |
|6               |delete          |
+----------------+----------------+ 
```

以下查询返回符合您条件的所有对话的 ID

```
SELECT 
    conversation_id AS selectedId, 
    count(*) AS count    
FROM xf_conversation_recipient   
WHERE recipient_state = "delete" 
GROUP BY conversation_id 
HAVING count>1 
```

回报：

```
+-----------+------+
|selectedId |count |
+-----------+------+
|1          |2     |
|3          |2     |
|6          |2     |
+-----------+------+ 
```

请注意，根据您的应用程序，您可能希望在此处停止。

* * *

嵌套这个查询，我们可以只提取`selectedId`列，然后再次嵌套它，我们可以将它用作`IN`查询的条件，如下所示：

```
SELECT * FROM xf_conversation_recipient 
WHERE xf_conversation_recipient.conversation_id IN (
    SELECT t1.selectedId FROM (
        SELECT 
            conversation_id AS selectedId, 
            count(*) AS count
        FROM xf_conversation_recipient
        WHERE recipient_state = "delete"
        GROUP BY conversation_id
        HAVING count>1
    ) t1  
) 
```

返回：

```
+----------------+----------------+
|conversation_id |recipient_state |
+----------------+----------------+
|1               |delete          |
|1               |delete          |
|3               |delete          |
|3               |delete          |
|6               |delete          |
|6               |delete          |
+----------------+----------------+ 
```

# ruby-on-rails-3 - 如何在 ActiveAdmin 中显示多个图像

> ID：16066281
> 
> 赞同：9
> 
> 时间：2013-04-17T17:22:42.007
> 
> 标签：ruby-on-rails-3, paperclip, activeadmin

我正在使用回形针上传多张图片。我也在使用 Active Admin。到目前为止，我已经能够上传多张图片并将它们与我的“产品”模型相关联。我还能够在索引页中显示所有相关图像的**“名称”**。但是，我无法找到如何在产品模型的展示页面中***显示***“所有”图像（不仅仅是名称）。请在下面找到代码。

\app\models\product.rb

```
has_many :images, :dependent => :destroy
accepts_nested_attributes_for :images, :allow_destroy => true 
```

\app\models\image.rb

```
belongs_to :product
has_attached_file :image, :styles => {
  :thumb=> "100x100>",
  :small  => "300x300>",
  :large => "600x600>"
    } 
```

\app\admin\products.rb

```
index do
  column "Images" do |product|
    product.images.map(&:image_file_name).join("<br />").html_safe
  end
end

show do |product|
  attributes_table do
  row "Images" do
      ul do
        li do 
          image_tag(product.images.first.image.url(:small))
        end
        li do 
          image_tag(product.images.second.image.url(:small))
        end
        li do 
          image_tag(product.images.last.image.url(:small))
        end
      end
    end
  end
end 
```

我发现了一些有用的东西，但这确实是糟糕的编程。我目前有 3 张图片与每个产品相关联，我在我的展示块中使用上面的代码。请提出一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T15:55:51.943

你的意思是你需要显示每一个图像而不仅仅是其中的 3 个？如果是，请尝试

```
row "Images" do
   ul do
    product.images.each do |img|
      li do 
        image_tag(img.image.url(:small))
      end
    end
   end
end 
```

# php - PHP脚本执行和静态变量隔离

> ID：16066284
> 
> 赞同：0
> 
> 时间：2013-04-17T17:22:48.633
> 
> 标签：php, class, static-members, isolation-level, isolation

我有一个相当基本的 PHP 问题，我似乎无法找到答案。当用户访问执行 PHP 脚本的网站时，该脚本是否与同一脚本的所有其他运行实例隔离运行？

例如，如果我有一个带有静态变量的类（这意味着该变量基本上在该类的所有实例中共享）将每个访问网站的用户都有自己的静态变量副本，或者所有用户都有相同的静态变量多变的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:24:26.263

每个用户都有自己的变量，它只在每个请求中共享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:25:57.490

除了使用 shmop 函数之外，不存在共享变量的某些方法。

这是一个完全的隔离。（每个请求都会启动一个新的解释器会话）

# c++ - 使用 C++ 矩阵的自定义索引

> ID：16066286
> 
> 赞同：3
> 
> 时间：2013-04-17T17:22:51.063
> 
> 标签：c++, matrix, indices

我想在 C++ 中处理 C++ 二维数组（矩阵），就像对 R 数据帧一样。我的意思是能够为矩阵指定索引值。

例如自然的 C++ 整数矩阵是这样的：

```
 0 1 2 3 4 ...
0 1 0 1 0 .
1 3 . . .
2 8 . .
3 . .
4 .
.
.
. 
```

我想在矩阵中指定索引，所以它们会是这样的，例如：

```
 5 7 8 13 24 ...
0 1 0 1 0 .
1 3 . . .
2 8 . .
6 . .
8 .
.
.
. 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:31:56.933

如果要切换矩阵的列、行，可以使用一些间接方法：

```
 indexTable[0][0] = 0; // map row index 0 to 0
 indexTable[1][0] = 5; // map column index 0 to 5 
```

并像这样使用它：

```
 value = matrix[indexTable[0][RowIndex]][indexTable[1][ColumnIndex]; 
```

或者您可以编写一个类来为您处理这种间接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:39:35.640

我会创建一个类

*   将任意指定的索引转换为从 0 开始的增量索引
*   包装一维数组，以便您可以使用转换后的索引将其作为二维数组访问

一个工作示例看起来像这样

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <stdexcept>
#include <iterator>
#include <cassert>

using namespace std;

class DataFrame
{
  vector<int> data;

public:
  typedef vector<ssize_t> idx_t;
private:
  idx_t rowIdx;
  idx_t colIdx;

public:
  DataFrame(const idx_t &rowIdx, const idx_t &colIdx)
    : data(rowIdx.size() * colIdx.size())
    , rowIdx(rowIdx)
    , colIdx(colIdx)
  {
    assert(is_sorted(rowIdx.begin(), rowIdx.end()));
    assert(is_sorted(colIdx.begin(), colIdx.end()));
  }

  int& operator()(int i, int j)
  {
    idx_t::iterator itI, itJ;

    itI = lower_bound(rowIdx.begin(), rowIdx.end(), i);
    if(rowIdx.end() == itI || i != *itI) throw out_of_range("could not find specified row");
    itJ = lower_bound(colIdx.begin(), colIdx.end(), j);
    if(colIdx.end() == itJ || j != *itJ) throw out_of_range("could not find specified col");

    return data[distance(rowIdx.begin(), itI)*colIdx.size() +
      distance(colIdx.begin(), itJ)];
  }

  vector<int> & getData() { return data; }
};

int main()
{
  DataFrame::idx_t rI, cI;
  rI.push_back(3);
  rI.push_back(5);

  cI.push_back(2);
  cI.push_back(3);
  cI.push_back(10);

  DataFrame df(rI, cI);

  df(3,2) = 1;
  df(3,3) = 2;
  df(3,10) = 3;
  df(5,2) = 4;
  df(5,3) = 5;
  df(5,10) = 6;

  ostream_iterator<int> out_it(cout, ", ");
  copy(df.getData().begin(), df.getData().end(), out_it);
  cout << endl;

  return 0;
} 
```

每行/列的任意索引在向量中指定。为了保持一些性能，代码要求索引单调递增。（如果您有 C++11，则在 ctor 中进行检查；如果您没有 C++11，则没有该`is_sorted`功能。此外，此代码不会验证任意索引的唯一性。）

当您访问数据时，它只是对每个索引向量进行二进制搜索，以找到向量中与任意索引匹配的位置，并将该位置用作基础数据的相应索引。有一个从 2D 索引到 1D 索引的简单转换。

如果您需要担心，您可能需要检查我的索引错误检查对于坏/好索引的所有组合是否正确。

我将留给您在`const`访问器、各种构造函数等方面添加更多的健壮性/功能。如果您想将其推广到除 2 以外的维度数组，我建议您创建一个仅将任意索引转换为 0 的类-based 索引，这将消除我的一些代码重复。还有其他方法可以将任意索引转换为基于 0 的索引，例如使用`map`其他人建议的方法。但是在这种情况下，存在一些问题，例如创建者`map`必须确保如果有 10 列，则 [0, 10) 中的每个索引作为映射中的值恰好出现一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:57:45.647

R 中的A`data.frame`本质上只是 a `list`of 列的精美包装，并且 a`list`不合逻辑地与 C++ 中的`std::map`¹非常等价（而不是顾名思义， of `std::list`）。

因此，换句话说，您可以使用与此类似的 typedef 来近似`data.frame`：

```
typedef std::map<int, std::vector<int>> data_frame; 
```

…但是 R 类实际上要强大得多，因为它们在某种程度上是通用的，支持数据框中的不同类型，检查所有行的长度是否相同，并允许对列和行进行命名访问。最后，我们不要忘记 R 支持处理数据帧、漂亮地打印它们以及有效地加载和保存它们。

根据*您*的需要，当然没有必要在 C++ 中复制所有这些，但将您的结构包装在一个类中并提供一个适当的接口来访问它绝对是有益的。

* * *

¹实际上，一个`std::unordered_map`. 这需要 C++11。

# git - 我在哪里可以找到实施的耐心差异？

> ID：16066288
> 
> 赞同：12
> 
> 时间：2013-04-17T17:22:56.623
> 
> 标签：git, version-control, diff, perforce

在这个网站上很好地回答了 Bram Cohen 的耐心差异在 bazaar 中作为默认差异和 git diff 的一个选项，但我发现很难找到一个独立的独立程序来实现这个特定的差异算法。

例如，我想将耐心差异应用于 perforce 差异，并且通过规范的“frobnitz”代码示例非常清楚耐心差异如何更好：

![在此处输入图像描述](https://i.stack.imgur.com/I1PnI.png)

右边的终端调用了`git diff`带有`--patience`标志的 。

我还设置了`diff-highlight`perl 脚本，它的工作是在这些行的第一个和最后一个不同部分之间的匹配行上反转颜色。左侧有一个例子，这并没有太大帮助，但我会让它滑动，因为至少那里*有*那个分号......无论如何，改进 diff-highlight 脚本不是这个问题的主题.

除了在哪里可以找到独立的耐心差异之外，如果有人知道如何使 perforce`p4`使用外部差异程序，那也是必须要做的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:09:45.833

它可能不像我想要的那样理想，但从实际的角度来看，这个解决方案非常好（这是一个非常好的视角）。

`git diff --no-index --patience file1 file2`做这项工作。（感谢@StevenPenny）

`$P4DIFF`变量定义了外部差异......我们只是把`git diff --patience --no-index`它塞进去。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T09:25:14.703

我冒昧地将耐心移植到一个[有点独立的库](https://github.com/jcdickinson/difflib)中，它在 C# 中。图书馆还处于早期阶段。它主要是一个逐行端口；所以希望它具有 Python 的大部分稳定性。

请记住，[耐心](https://github.com/jcdickinson/difflib/blob/master/DiffLib/PatienceSequenceMatcher.cs)只会找到最长的公共子序列（在差异方面，这意味着文件中未更改的部分）。您将需要自己[确定添加和删除](https://github.com/jcdickinson/difflib/blob/master/DiffLib/Differencer.cs#L51)。

还要记住，在 Bazaar 存储库中，也有 Python 和 C 中的实现（同样，这些实现只解决了 LCS 问题）：

*   [C 版本](http://bazaar.launchpad.net/~bzr-pqm/bzr/bzr.dev/view/head:/bzrlib/_patiencediff_c.c)：似乎更看重性能而不是清晰度，通过阅读本文您将不容易理解算法。Python 互操作也有很多代码开销。
*   [Python 版本](http://bazaar.launchpad.net/~bzr-pqm/bzr/bzr.dev/view/head:/bzrlib/_patiencediff_py.py)：算法的参考实现。似乎主要看重清晰度而不是性能。

如果您需要编写自己的实现，我建议您先移植 Python 版本，然后查看 C 实现以获取有关如何加快速度的提示。

Git仓库里应该也有实现，但是我没有去搜。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-11T01:15:56.963

Cohen 自己的 Python 实现只需要稍作调整（如下）即可独立运行。它在两个文件中，我通过谷歌搜索“difflib 耐心”找到了其中的副本：

[http://stuff.mit.edu/afs/athena/system/i386_deb50/os/usr/share/pyshared/bzrlib/patiencediff.py](http://stuff.mit.edu/afs/athena/system/i386_deb50/os/usr/share/pyshared/bzrlib/patiencediff.py) 和 [http://stuff.mit.edu/afs/athena/system/i386_deb50/ os/usr/share/pyshared/bzrlib/_patiencediff_py.py](http://stuff.mit.edu/afs/athena/system/i386_deb50/os/usr/share/pyshared/bzrlib/_patiencediff_py.py)

第一个文件可以像 diff 一样从命令行运行。第二个是内部循环的 Python 实现。（单个文件？？读者练习！）在 bzrlib 中，还有一个内部循环的 C 实现。

这里（在程序本身的帮助下）是我让它们独立运行的补丁：

```
Sandy$ patiencediff.py --patience orig/patiencediff.py patiencediff.py
--- orig/patiencediff.py
+++ patiencediff.py
@@ -15,14 +15,20 @@
 # along with this program; if not, write to the Free Software
 # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

+try:
+    from bzrlib.lazy_import import lazy_import
+    lazy_import(globals(), """
+    import os
+    import sys
+    import time
+    import difflib
+    """)
+except:
+    import os
+    import sys
+    import time
+    import difflib

-from bzrlib.lazy_import import lazy_import
-lazy_import(globals(), """
-import os
-import sys
-import time
-import difflib
-""")

 __all__ = ['PatienceSequenceMatcher', 'unified_diff', 'unified_diff_files']
@@ -135,11 +141,18 @@
         PatienceSequenceMatcher_c as PatienceSequenceMatcher
         )
 except ImportError:
-    from bzrlib._patiencediff_py import (
-        unique_lcs_py as unique_lcs,
-        recurse_matches_py as recurse_matches,
-        PatienceSequenceMatcher_py as PatienceSequenceMatcher
-        )
+    try:
+        from bzrlib._patiencediff_py import (
+            unique_lcs_py as unique_lcs,
+            recurse_matches_py as recurse_matches,
+            PatienceSequenceMatcher_py as PatienceSequenceMatcher
+            )
+    except ImportError:
+        from _patiencediff_py import (
+            unique_lcs_py as unique_lcs,
+            recurse_matches_py as recurse_matches,
+            PatienceSequenceMatcher_py as PatienceSequenceMatcher
+            )

 def main(args):
Sandy$ patiencediff.py --patience orig/_patiencediff_py.py _patiencediff_py.py
--- orig/_patiencediff_py.py
+++ _patiencediff_py.py
@@ -15,11 +15,16 @@
 # along with this program; if not, write to the Free Software
 # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

-
+from __future__ import print_function
 from bisect import bisect
 import difflib

-from bzrlib.trace import mutter
+try:
+    from bzrlib.trace import mutter
+except:
+    import sys
+    def mutter(msg):
+        print (msg, file=sys.stderr)

 __all__ = ['PatienceSequenceMatcher', 'unified_diff', 'unified_diff_files']
Sandy$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-26T23:57:19.187

对于 javascript 实现，增强了 PatienceDiff 以确定可能移动的行（称为“PatienceDiffPlus”），请参阅[https://github.com/jonTrent/PatienceDiff](https://github.com/jonTrent/PatienceDiff)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-02T17:05:31.593

Patientdiff 的 Bazaar 实现也可作为单独的 Python 模块使用。

*   作为 GitHub 存储库：[https ://github.com/breezy-team/patiencediff](https://github.com/breezy-team/patiencediff)
*   在奶酪店：[https](https://pypi.org/project/patiencediff/) ://pypi.org/project/patiencediff/或`pip install patiencediff`

# java - 菜单和子菜单的 JavaFX2-fxml 标记

> ID：16066294
> 
> 赞同：2
> 
> 时间：2013-04-17T17:23:38.717
> 
> 标签：java, contextmenu, javafx-2, javafx, fxml

如何使用`FXML`创建子菜单？我已经在 java 的 start 方法中完成了它，但我想将我的代码移动到`FXML`. 请检查`item2`，我在哪里添加了 2 `submenus`。

```
 ContextMenu contextMenu = new ContextMenu();
    Menu item2 = new Menu("Actions");
    MenuItem item7 = new MenuItem("Close All");

    MenuItem subMenu1 = new MenuItem("Save");
    MenuItem subMenu2 = new MenuItem("Save As..");

    item2.getItems().addAll(subMenu1, subMenu2); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T19:18:30.710

首先，我建议查看[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)。尽管有一些怪癖，但它是学习 FXML 布局的好工具。

其次，这应该让你朝着正确的方向前进。

```
<Menu text="Actions" fx:id="item2">
  <items>
    <MenuItem text="Save" fx:id="subMenu1" />
    <MenuItem text="Save As.." fx:id="subMenu2" />
  </items>
</Menu> 
```

# c# - “无法通过行访问已删除的行信息”试图从我的数据表中删除未使用的行

> ID：16066296
> 
> 赞同：4
> 
> 时间：2013-04-17T17:23:42.370
> 
> 标签：c#, datatable, delete-row

我正在抓取数据，将其粘贴到 中`DataTable`，并将其显示在`DataGridView`该表的绑定中。我试图做到这一点，以便删除当前抓取中未包含的数据表中的数据。我这样做如下：

```
public void FillTable(DataTable table, IEnumerable<MyObject> readings)
{
    var currentReadingsNames = new List<string>();
    var lastParent = string.Empty;
    var index = 0;

    foreach (var reading in readings)
    {
        if (reading.ParentName != lastParent)
        {
            lastParent = reading.ParentName;
            index = 0;
        }
        LoadRow(table, reading, index++);
        currentReadingsNames.Add(MakeKey(reading));
    }

    //Iterate through the rows in our data table. If the row is not one we just loaded, get rid of it.
    foreach (DataRow row in table.Rows)
    {
        if (!currentReadingsNames.Contains(MakeKey(row["ParentID"].ToString(), row["ID"].ToString())))
        {
            row.Delete();
        }
    }
    table.EndLoadData();
} 
```

`MakeKey(reading)`并`MakeKey(properties)`返回一个字符串，我可以用两种不同的方式识别我的对象。假设这有效。

当我运行它时，我得到：

> 无法通过该行访问已删除的行信息。

我觉得我不应该尝试访问已删除的行，因为我只在查看完它的值（`parentID`和`ID`列）后才删除该行。这与我理解的行为不同吗？任何想法为什么会发生这种情况？如果这段代码应该工作，也许错误在其他地方，但我没有更改任何其他内容，所以我会感到惊讶（我正在尝试添加这个删除行为）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T17:39:41.423

只需为已删除的行添加一个过滤器，如下所示：

```
foreach (DataRow row in table.Rows)
{
    if(row.RowState != DataRowState.Deleted) 
    {     
       if (!currentReadingsNames.Contains(MakeKey(row["ParentID"].ToString(), row["ID"].ToString())))
            {
                row.Delete();
            }
        }
    } 
```

# groovy - Groovy 脚本返回 mongodb 不同的值

> ID：16066298
> 
> 赞同：1
> 
> 时间：2013-04-17T17:24:00.690
> 
> 标签：groovy

我正在使用 Pentaho 报表设计器和 Groovy 脚本来构建报表。我已经能够返回数据并使用带参数的排序。我被难倒的部分是动态而不是手动构建我的参数列表的独特之处。我可以在查找查询之后运行限制，但其他文档会添加其他不同的值。

这是我使用 groovy 的限制： 代码：

```
 def columnNames = ["<columnName"] as String[]
    def columnTypes = [String.class] as Class[]

    TypedTableModel model = new TypedTableModel(columnNames, columnTypes);

    def docs = meter.find(new BasicDBObject("<name>", "<value>")).limit(26)
    while (docs.hasNext()) {
    def doc = docs.next()
    model.addRow([ doc.get("<name>").getString("<sub_docname>")] as Object[]);
    }
    docs.close() 
```

我尝试添加 distinct 以获取唯一值而不是 find 但收到有关 hasNext 的错误 No signature of method: com.mongodb.BasicDBList.hasNext() 代码：

```
 def docs = meter.distinct("<name.subdocname>")
    while (docs.hasNext()) {
    def doc = docs.next()
    model.addRow([ doc.get("<name>").getString("<subdocname>")] as Object[]);
    }
   docs.close() 
```

任何帮助，将不胜感激。

# c++ - 排序3个数字c ++

> ID：16066304
> 
> 赞同：-7
> 
> 时间：2013-04-17T17:24:10.630
> 
> 标签：c++, function

我应该编写一个接受`3`整数参数并重新排列它们的函数。例如，如果`a=370`, `b=2105`，`c=40`则该函数应导致`a = 2105`, `b=370`, `c=40`。

我的代码给了我

> errorLNK201`未解析的外部符号和致命错误LNK1120：1未解析的外部

```
#include <iostream>
using namespace std;
int a, b, c;
void sort_three (int & a, int & b, int & c);
void main () {}
void sort (int & a, int & b, int & c) {} 
```

谢谢！我意识到 sort 和 sort_three 不匹配，解决了，谢谢大家

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T17:25:37.317

名称不匹配：

```
void sort_three (int & a, int & b, int & c);
void sort (int & a, int & b, int & c) { 
```

前者显然是后者的原型，但它的名称错误。

排序算法也不太正确（对于初学者来说，它在 中具有未定义的行为`r[i+1]`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:25:42.097

改名

```
void sort (int & a, int & b, int & c) { 
```

至

```
void sort_three (int & a, int & b, int & c) { 
```

当链接器无法找到足够的信息来将函数调用与函数定义链接时，总是会发生链接器错误。

原型中的函数签名应与定义中的函数签名匹配。并且也应该使用相同的签名来调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:26:08.087

你的“void sort”不应该是“void sort_three”吗？（虽然有助于查看精确的链接错误）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T17:26:18.757

您声明了 sort_three`void sort_three (int & a, int & b, int & c);`但定义了排序`void sort (int & a, int & b, int & c) {`，因此您的程序中没有 sort_three。

# git - 获取一个 git 远程分支到我的本地

> ID：16066310
> 
> 赞同：-1
> 
> 时间：2013-04-17T17:24:24.047
> 
> 标签：git, github

我有一个本地分支`new-backlog-feature`，我把它推到了 github，一个团队成员拉了这个分支并进行了更改。更改后他推回 GH，现在我想从远程分支中提取他的更改（同名）`new-backlog-feature`

这是怎么做到的？

我努力了

```
git fetch origin/new-backlog-feature 
```

但是当我打开文本编辑器时，这些更改不会显示出来。我可以看到 GH 的变化。在 git fetch 之后我是否缺少一个步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:31:00.280

**拉 = 提取 + 合并**或**提取 = 拉 - 合并**

您只获取了更改，但为了查看它们，您需要将它们合并到您的本地分支中。

最好的方法是获取更改`git fetch origin`，然后将每个分支与本地分支合并`git merge origin/branch`。建议这样做，而不仅仅是`git pull origin`因为您可以更好地控制自己在做什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:31:36.227

首先，您必须将本地存储库与 github 同步：

```
git fetch origin 
```

然后，您可以显示分支中的更改：

```
git log new-backlog-feature..origin/new-backlog-feature
gitk new-backlog-feature..origin/new-backlog-feature 
```

如果更改正常，您可以运行`git merge`以更新本地分支：

```
# on branch new-backlog-feature
git merge origin/new-backlog-feature 
```

如果您还没有创建任何本地提交，这将导致快进合并。如果您有本地提交，这将创建一个新的合并提交，它将重新加入两条历史记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:31:44.203

Fetch 将来自远程仓库的提交放入您的仓库。Checkout 在你的工作树中放置一个特定的提交。合并将提交与您当前的结帐相结合。

# php - 邮件功能中包含文本的 HEREDOC 错误

> ID：16066314
> 
> 赞同：0
> 
> 时间：2013-04-17T17:24:38.610
> 
> 标签：php, include, heredoc

我正在使用 HEREDOC 将一些文本包含到邮件 PHP 函数的正文中。

但是，我收到此错误：

“PHP 解析错误：语法错误，意外的 T_SL 在...”

错误是指包含文件的 HEREDOC 部分：

```
<?php
$message = <<<EOD <html></body>Dear $firstName $lastName,
Sincerely,
Customer Service
EOD;?> 
```

我写这篇文章的方式有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:26:50.277

```
<?php
$message = <<<EOD
    <html><body>Dear {$firstName} {$lastName},
    Sincerely,
    Customer Service
EOD;
?> 
```

使用heredoc语法，除了开始标识符之后的新行之外应该没有任何内容，`<<<EOD`甚至没有空格，并且您希望将变量包装在花括号中。结束标识符`EOD;`之前应该没有空格，并且应该跟一个新行。

[PHP Heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:27:17.257

```
<?php
$message = <<<EOD
<html></body>Dear $firstName $lastName,
Sincerely,
Customer Service
EOD;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:27:39.467

改变

```
EOD;?> 
```

至

```
EOD;
?> 
```

为什么？

引用 PHP 文档：

> 需要注意的是，带有结束标识符的行不能包含其他字符，分号 (;) 除外。这尤其意味着标识符可能不会缩进，并且分号之前或之后可能没有任何空格或制表符

# javascript - chrome扩展中的消息传递不起作用

> ID：16066317
> 
> 赞同：1
> 
> 时间：2013-04-17T17:24:44.127
> 
> 标签：javascript, google-chrome, google-chrome-extension, event-listener, message-passing

我是 chrome 扩展的新手，入门时遇到了一些麻烦。

首先，我的总体目标是能够单击弹出窗口中的按钮并在 DOM 中进行一些更改。如果我理解正确的话，这样做的方法是加载一个内容脚本并向这个内容脚本发送一条消息。这是我查看 Chrome 开发人员页面所得到的，但我在控制台日志中看不到任何内容：

清单.json

```
{
    "manifest_version": 2,

    "name": "Test",
    "version": "1.0",

    "permissions": [
        "tabs", "http://*/*"
    ],

    "content_scripts": [
        {
            "matches": ["http://*/*"],
            "js": ["content.js"]
        }
    ],

    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html"
    }
} 
```

popup.html

```
<html>
  <body>
    <script src="popup.js"></script>
  </body>
</html> 
```

popup.js

```
document.addEventListener('DOMContentLoaded', function () {
    chrome.tabs.getSelected(null, function(tab) {
        chrome.tabs.sendMessage(tab.id, {greeting: "hello"}, function(response) {
            console.log(response.farewell);
        });
    });
}); 
```

内容.js

```
chrome.runtime.onMessage.addListener(
    function(request, sender, sendResponse) {
        console.log(sender.tab ?
                    "from a content script:" + sender.tab.url :
                    "from the extension");
        if (request.greeting == "hello")
            sendResponse({farewell: "goodbye"});
    }); 
```

很多代码直接来自文档，所以我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:02:46.557

我只是将您的代码复制到我的机器上并按原样运行它，它可以按您的预期工作。不过，我认为您可能会对您期望的输出出现*在哪里感到困惑。*`console.log`

打开任何网页并打开该页面的控制台。单击您的浏览器操作，弹出窗口出现，果然`from a content script:chrome-extension://fndmlopghajebfadeabnfnfmhalelokm/popup.html`出现了该行。

但是，您看不到您的`goodbye`行出现在那里 - 因为这是从 注销`popup.js`，而不是选项卡的内容脚本。让我们为弹出窗口打开一个检查器并在`goodbye`那里查找消息。右键单击浏览器操作图标并选择“检查弹出”菜单项。您的（空）弹出窗口显示，并出现一个新的检查器窗口；选择控制台选项卡，您将在`goodbye`那里看到消息。

有关更多信息，请参阅[Chrome 扩展调试教程](http://developer.chrome.com/extensions/tut_debugging.html#inspect-popup)。

*PS。* `chrome.tabs.getSelected`已弃用；[你应该`chrome.tabs.query`](http://developer.chrome.com/extensions/tabs.html#method-query)改用。我同意方觉的观点——你应该考虑使用程序化注入来改变你的 DOM。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T09:01:20.983

popup.js 脚本将在您加载 popup.html (DOMContentLoaded) 时启动该文件。但是可以肯定的是，内容将被注入脚本还没有在任何网页中，因为你还没有来​​得及打开它，并且“匹配”：[“http:// * / *”]，就可以了. 通过后台脚本更改后台内容脚本，我认为它会起作用。

# python - 将按钮释放视为键盘中断 tkinter

> ID：16066322
> 
> 赞同：1
> 
> 时间：2013-04-17T17:24:51.797
> 
> 标签：python, button, tkinter, release, keyboardinterrupt

我在 Python 3 中使用 tkinter 创建一个程序，但我被卡住了......我有无限循环，由按下按钮触发：

```
def task13():
    while True:
        #do stuff

...

button13 = Button(root, width=25, text="13", command=task13)
goButton.pack(side=LEFT,anchor="n") 
```

如何在释放 button13 时终止 task13？是否有“键盘中断”代码或者我可以修改循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:44:58.180

没有办法中断正在运行的函数。但是，您可以`<ButtonRelease-1>`为按钮设置一个绑定，并在该绑定中设置一个标志。然后，`task13`您可以在循环顶部检查该标志。您还需要一个绑定`<ButtonPress-1>`来启动循环，因为`command`它与在按钮小部件上释放鼠标按钮有关。

这仅在您在循环中为事件提供服务时才有效。如果`#do stuff`阻塞了事件循环，则您无能为力，只能在单独的线程或进程中运行该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:45:37.440

按钮有`"<Button-1>`和`<ButtonRelease-1>`事件：

```
from tkinter import *

def press(*args):
    print('press')
    global pressed
    pressed = True
    master.after(0, loop)

def release(*args):
    print('release')
    global pressed
    pressed = False

def loop():
    if pressed:
        print('loop')
        # Infinite loop without delay is bad idea.
        master.after(250, loop)

master = Tk()
pressed = False

b = Button(master, text="OK")
b.bind("<Button-1>", press)
b.bind("<ButtonRelease-1>", release)
b.pack()
mainloop() 
```

# php - OOP 错误调用非对象上的成员函数 insertName()

> ID：16066327
> 
> 赞同：0
> 
> 时间：2013-04-17T17:25:05.953
> 
> 标签：php, oop, pdo

您好，我已经编写了一个快速代码来将名称插入数据库。

这是数据库连接的类：

（我隐藏密码等，基本上我在顶部定义它们）

```
class Database
{
    private $pdo;
    private $query;
    public function __construct()
    {
        try
        {
            $this->pdo = new PDO('mysql:host='.MYSQL_HOST.';dbname=oop', MYSQL_USER, MYSQL_PASSWORD);
            $this->pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            echo 'Sucessfully connected to MySQL server!';
        }
        catch(PDOException $e)
        {
            echo $e->getMessage();
        }
    }

    public function query($name)
    {
        $this->query = $this->pdo->prepare("INSERT INTO user (name) VALUES (:name)");
        $this->query->bindValue(":name", $name);
        $this->query->execute();
        echo 'Sucessfully send!';
    }
} 
```

这是我基本上使用查询并处理它们的类：

```
class System
{
    private $Database;

    public function __construct(Database $Database = null)
    {
        $this->Database = $Database;
    }

    public function insertName($name)
    {
        if ($this->db != null)
        {
            $this->db->query($name);
        }
    }
} 
```

这是 config.php

```
include("system.class.php");
include("db.class.php");

$system = new System($Database);
$db = new Database(); 
```

这是 index.php

```
<?php

include("config.php");

?>

<html>
<form action="" method="post">
<input type="text" name="name">
<input type="submit">
</form>

<?php

    if (isset($_POST) && !empty($_POST['name']))
    {
        $Database->insertName($_POST['name']);
        echo 'Scessfuly inserted!';
    }
?>
</html> 
```

**问题：**

发送数据时（提交表单后）出现以下错误：

致命错误：在第 17 行的 C:\xampp\htdocs\oop\index.php 中的非对象上调用成员函数 insertName()

我做错什么了？这是第 17 行：

```
 $Database->insertName($_POST['name']); 
```

**我该如何解决这个问题，问题是什么？**

*谢谢。*

将其从 $db 更改为类的实际名称后，我得到以下信息：

在第 17 行调用 C:\xampp\htdocs\oop\index.php 中未定义的方法 Database::insertName()

编辑：

```
if (isset($_POST) && !empty($_POST['name']))
{
    $system->insertName($_POST['name']);
    echo 'Scessfuly inserted!';
}

class System
{
    private $Database;

    public function __construct(Database $Database = null)
    {
        $this->Database = $Database;
    }

    public function insertName($name)
    {
        if ($this->Database != null)
        {
            $this->Database->query($name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:30:18.437

看起来你有两个问题。第一个是，您试图在未定义的变量上调用方法。在 config.php 中，您将 Database 对象定义为`$db`，而不是`$Database`。其次，方法`insertName()`是在类`System`not中定义的`Database`。

尝试将行更改为`$system->insertName($_POST['name'])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:28:01.640

我引用：

```
$db = new Database(); 
```

为什么`$Database`在调用变量时使用`$db`？

采用：

```
$db->insertName($_POST['name']); 
```

* * *

在 TO 编辑问题后：

该方法`insertName`在`System`类中。所以使用`$system->insertName(...);`.

# java - 从消息处理程序启动 asynctask

> ID：16066332
> 
> 赞同：3
> 
> 时间：2013-04-17T17:25:25.283
> 
> 标签：java, android, android-fragments, android-asynctask

我的应用程序中有一个 gps 类。在 onLocationChanged 方法中，我向应该执行异步任务的活动发送处理程序消息。如果我从活动的任何地方调用它，我的 asyntask 可以自行运行良好，但是当它通过处理程序调用时，我一直在崩溃。我确定这与我如何从处理程序开始任务有关。

这是我的活动片段中的处理程序，它应该启动异步任务

```
 public Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
      super.handleMessage(msg);
      Log.d("MainMenu_NearbyFragment", "handler recieved for on location changed");
      if (!sortingPlaces) {
        getActivity().runOnUiThread(new Runnable() {
          @Override
          public void run() {
            new sortNearby().execute();
          }
        });
      }
    }
  }; 
```

我像这样从我的 onLocationChanged 向处理程序发送消息

```
 public void onLocationChanged(Location location) {
    new MainMenu_NearbyFragment().handler.sendEmptyMessage(0);
  } 
```

编辑：

这是在实际设备上运行后的堆栈跟踪。（前一个是在模拟器上运行的，这是一个不同的消息，我一开始没有意识到）。

```
java.lang.NullPointerException
at  badams.android.alcology.fragments.MainMenu_NearbyFragment$1.handleMessage(MainMenu_NearbyFragment.java:43)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

第 43 行是：

```
getActivity().runOnUiThread(new Runnable() { 
```

我这样做的原因是因为我需要能够从未实现 LocationListener 的活动中检测到 locationChanged。所以我的想法是在 onLocationChanged 中我向我的活动发送一条消息，通知它进行更新。也许这是我处理这个问题的错误方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:38:47.420

我最终通过使用

```
handler.post(new Runnable() 
```

代替

```
getActivity().runOnUiThread(new Runnable() 
```

这似乎**启动**了 asynctask 就好了！从处理程序调用时，异步任务无法正常工作，但这与这个问题无关。我真的不明白为什么会这样，但确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:24:50.757

利用

```
MainMenu_NearbyFragment.this.getActivity().runOnUiThread(new Runnable() { 
```

代替

```
getActivity().runOnUiThread(new Runnable() { 
```

它应该工作..

# validation - 淘汰赛验证：HTML5 最小/最大解析为字符串

> ID：16066346
> 
> 赞同：2
> 
> 时间：2013-04-17T17:26:13.327
> 
> 标签：validation, knockout.js

KO 验证插件似乎将 HTML5 数字输入属性（例如，最小值、最大值）解析为字符串，而不是数字。这导致当数字输入具有最小/最大属性时，它们被错误地确定为无效。请参阅：http: [//jsfiddle.net/hTvsj/](http://jsfiddle.net/hTvsj/)。

HTML：

```
<label>Some number, valid between 0 and 10</label>
<input type="number" required min="0" max="10" data-bind="value: someNum"/> 
```

JS：

```
function vm(){
    self=this;
    self.someNum=ko.observable("5");
}
ko.validation.configure({
    parseInputAttributes: true,
});
ko.applyBindings(ko.validatedObservable(new vm())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:43:24.680

这是淘汰赛验证中的一个错误。它已通过[pull request 355](https://github.com/Knockout-Contrib/Knockout-Validation/pull/355)修复，并以[2.0.0 版本](https://github.com/Knockout-Contrib/Knockout-Validation/releases/tag/2.0.0)发布。

请注意，要使其正常工作，observable 中的值需要存储为数字，而不是字符串。您可以使用数字扩展器（可在[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)找到）强制将键入的值存储为数字而不是字符串。

# java - 乒乓球中的 Java 球非常奇怪地弹跳

> ID：16066348
> 
> 赞同：0
> 
> 时间：2013-04-17T17:26:15.083
> 
> 标签：java, class, object, user-interface, pong

当球到达左桨正上方的某个点时，它几乎在桨内飞溅并反弹并继续下降。它必须与下面的功能有关，但我无法弄清楚。

```
public static boolean intervallContains(int low,int high, int n) { //determines if something is in a certain range
            return n >= low && n <= high;
        }
        public void detectPaddle(){  //determines if ball is close enough to paddle for detection
        int withinY = (paddleStart+y) - (ballStartY+randomBally);
        int withinY2 = (paddleStartTwo+ytwo) - (ballStartY+randomBally);
        //System.out.println(withinY +"  paddle - ball" );
       // System.out.println(ballStartY+randomBally +"  ball" );

        if (ballStartX+randomBallx <= paddleFace1  &&  intervallContains(-50,50,withinY)){
        dx = -dx;
        }
        if(ballStartX+randomBallx >= paddleFace2 && intervallContains(-50,50,withinY2)){
        dx = -dx;

        }
        }

public void points(){
          if(ballStartX+randomBallx >= jpW-30){
                  score1++;
                  randomBallx = 30;
                  randomBally = 30;
             dx = -dx;         
             }
             else if(ballStartX+randomBallx <= 0){
                  score2++;
                  randomBallx = 0;
                  randomBally = 0;
                 dx = -dx;
             }
          if(score1 == Pong.points){

                  //JOptionPane.showMessageDialog(null, "Player one wins? maybe?...");
                  //choose to continue or close to reset game
                  //System.exit(0);
          }
        } 
```

这是完整的代码

```
import java.awt.Color;
import java.awt.Event;
import java.awt.Graphics;
import java.util.Random;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Pong extends JFrame implements ActionListener{

        //implement constants

        PongPanel pongPanel = new PongPanel(); 

        //JFrame pong x and y coordinates
        static final int jfpX = 150;
        static final int jfpY = 20;

        // JFrame pong width and height
        static final int jfpW = 800;
        static final int jfpH = 600;
        String pointStr;
        static int points;

        Thread thrd;

        public static void main(String[] args) {
                Pong jfp = new Pong();
                jfp.setVisible(true);

        }

        public Pong(){
                setBounds(jfpX,jfpY,jfpW,jfpH);
                setTitle("Pong");
                setResizable(false);
                setDefaultCloseOperation(EXIT_ON_CLOSE);
                setBackground(Color.black);

                 pointStr = JOptionPane.showInputDialog("Enter how many points you want to play to. The limit is 25, And must be at least 5.");

                 try{

                 points = Integer.parseInt(pointStr);

                 }

                 catch(NumberFormatException e){
                         pointStr = JOptionPane.showInputDialog("Please enter digits only.");
                 }

                add(pongPanel);
                addKeyListener(pongPanel);

                thrd = new Thread (pongPanel);
                thrd.start();
                }

        public void actionPerformed(ActionEvent e) {

        }

}

class PongPanel extends JPanel implements Runnable, KeyListener{
        Random random = new Random();
        static final int jpW = 800;
        static final int jpH = 600;
        int paddleStart = (jpH/2)-60;
        int paddleStartTwo = (jpH/2)-60;
        int ballStartX = (jpW/2)-30;
        int ballStartY = (jpH/2)-30;
        int ytwo,x,y;
        int paddleFace1 = 40;
        int paddleFace2 = 730;
        int ballD = 30;
        int paddleW1 = 20;
        int paddleH1 = 100;
        int paddleW2 = 20;
        int paddleH2 = 100;
        boolean play = true;
        boolean leftWall1 = true;
        boolean leftWall2 = true;
        boolean rightWall1 = true;
        boolean rightWall2 = true;
        int min = -2;
        int max = 2;
        int score1, score2;     
        int randomBallx = random.nextInt(max-min+1)+min;
        int randomBally = random.nextInt(max-min+1)+min;

        int dx = 7;
        int dy = 7; //direction of y

        public void ballNotZero(){// makes sure the ball doesnt go straight up and down
        if (randomBallx == 0){
               randomBallx = random.nextInt(max-min)+min;
             }
             if(randomBally == 0){
               randomBally=random.nextInt(max-min)+min;
             }

        }

        public PongPanel(){

        }

        protected void paintComponent(Graphics g)
        {
        super.paintComponent(g);

        Color ball,score,paddleOne,paddleTwo;
        score = new Color(0,255,0);
        ball = new Color(255,0,255);
        paddleOne = new Color(255,0,0);
        paddleTwo = new Color(0,0,255);

        g.setColor(ball);
        g.fillOval(ballStartX+randomBallx,ballStartY+randomBally,ballD,ballD);

     //   g.setFont(font);
        g.setColor(score);
        g.drawString(Integer.toString(score1),200 ,100 );
        g.drawString(Integer.toString(score2),600,100);

        g.setColor(paddleOne);
        g.fillRect(20,paddleStart+y,paddleW1,paddleH1);

        g.setColor(paddleTwo);
        g.fillRect(760,paddleStartTwo+ytwo,paddleW2,paddleH2);

        g.setColor(Color.white);
        g.drawLine(400,0,400,600);  

        }
        public void run() {
                while(play){
                paddleWalls();
                detectPaddle();
                ballBounce();
                points();
                moveBall();
                ballNotZero();
                repaint();
        try {Thread.sleep(75); } catch(Exception e){

        };

                }
        }
        public static boolean intervallContains(int low,int high, int n) { //determines if something is in a certain range
            return n >= low && n <= high;
        }
        public void detectPaddle(){  //determines if ball is close enough to paddle for detection
        int withinY = (paddleStart+y) - (ballStartY+randomBally);
        int withinY2 = (paddleStartTwo+ytwo) - (ballStartY+randomBally);
        //System.out.println(withinY +"  paddle - ball" );
       // System.out.println(ballStartY+randomBally +"  ball" );

        if (ballStartX+randomBallx <= paddleFace1  &&  intervallContains(-50,50,withinY)){
        dx = -dx;
        }
        if(ballStartX+randomBallx >= paddleFace2 && intervallContains(-50,50,withinY2)){
        dx = -dx;

        }
        }

        public void moveBall(){

                randomBallx+=dx;
                randomBally+=dy;
        }
        public void ballBounce(){
        if(ballStartY+randomBally >= jpH-50){
         dy = -dy;

        }
        else if(ballStartY+randomBally <= 0){
         dy = -dy;
        }
        }

        public void paddleWalls(){
         if((paddleStart+y) == 0){
                 leftWall1 = false;
         }
         else{
                 leftWall1 = true;
                 }
         if((paddleStart+y) == 480){
                 rightWall1 = false;
         }
         else{
                 rightWall1 = true;
                 }
         if((paddleStartTwo+ytwo) == 0){
                 leftWall2 = false;
         }
         else{
                 leftWall2 = true;
                 }
         if((paddleStartTwo+ytwo) == 480){
                 rightWall2 = false;
         }
         else{
                 rightWall2 = true;
                 }

        }

        public void points(){
          if(ballStartX+randomBallx >= jpW-30){
                  score1++;
                  randomBallx = 30;
                  randomBally = 30;
             dx = -dx;         
             }
             else if(ballStartX+randomBallx <= 0){
                  score2++;
                  randomBallx = 0;
                  randomBally = 0;
                 dx = -dx;
             }
          if(score1 == Pong.points){

                  //JOptionPane.showMessageDialog(null, "Player one wins? maybe?...");
                  //choose to continue or close to reset game
                  //System.exit(0);
          }
        }

        public void keyPressed(KeyEvent e) {

        //player one controls
        if(e.getKeyCode() == KeyEvent.VK_A && leftWall1 == true){
                y-=10;
        }
        else if(e.getKeyCode() == KeyEvent.VK_S && rightWall1 == true){
                        y+=10;
                }

        //player two controls
        if(e.getKeyCode() == KeyEvent.VK_QUOTE && leftWall2 == true){
                ytwo-=10;
        }
        else if(e.getKeyCode() == KeyEvent.VK_SEMICOLON && rightWall2 == true){
                        ytwo+=10;
                }
        if(e.getKeyCode() == KeyEvent.VK_ESCAPE){
         System.exit(0);
        }

        }

        public void keyTyped(KeyEvent e) {

        }

        public void keyReleased(KeyEvent e) {

        }
        public void startPong() {
                        play = true;
                }

                public void stopPong() {
                        play = false;
                }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:33:15.487

由于无法直接看到问题，我猜您的问题出在您的`detectPaddle()`方法中。在其中，您可以查看球是否离您的桨足够近。但是，您不会检查它是否朝着正确的方向移动。

更改这些行：

```
if (ballStartX+randomBallx <= paddleFace1  &&  intervallContains(-50,50,withinY)){
    dx = -dx;
}
if(ballStartX+randomBallx >= paddleFace2 && intervallContains(-50,50,withinY2)){
    dx = -dx;
} 
```

包括检查球的方向。或许是这样的：

```
if (dx < 0 && ballStartX+randomBallx <= paddleFace1  &&  intervallContains(-50,50,withinY)){
    dx = -dx;
}
if(dx > 0 && ballStartX+randomBallx >= paddleFace2 && intervallContains(-50,50,withinY2)){
    dx = -dx;
} 
```

这样球就不会在桨内反弹——它只能在一个方向上反弹。

另外，我在这里假设这`paddleFace1`是您的左桨和`paddleFace2`右桨。

# c# - 如何在不启动任务的情况下构建任务？

> ID：16066349
> 
> 赞同：64
> 
> 时间：2013-04-17T17:26:15.650
> 
> 标签：c#, task-parallel-library, async-await

我想使用[这个](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1.-ctor#System_Threading_Tasks_Task_1__ctor_System_Func_System_Object__0__System_Object_) `Task<TResult>`构造函数。我似乎无法正确使用语法。有人可以更正我的代码吗？

另外，我是否正确地认为如果 a`Task`是以这种方式构造的，它就没有开始？

我认为我需要的构造函数是：

```
Task<TResult>(Func<Object, TResult>, Object) 
```

我得到的错误是：

> 参数 1：无法从“方法组”转换为“ `System.Func<object,int>`”

```
static void Main(string[] args)
{
    var t = new Task<int>(GetIntAsync, "3"); // error is on this line
    // ...
}

static async Task<int> GetIntAsync(string callerThreadId)
{
    // ...
    return someInt;
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-17T17:34:13.730

```
var t = new Task<int>(() => GetIntAsync("3").Result); 
```

或者

```
var t = new Task<int>((ob) => GetIntAsync((string) ob).Result, "3"); 
```

为避免使用 lambda，您需要编写如下静态方法：

```
private static int GetInt(object state)
{
   return GetIntAsync(((string) state)).Result;
} 
```

接着：

```
var t = new Task<int>(GetInt, "3"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-14T15:02:39.373

要使用`Task`接受`object state`参数的构造函数，您还必须有一个接受`object`参数的函数。一般这是不方便的。存在此构造函数的原因是为了避免在热路径中分配对象（[闭包）。](https://stackoverflow.com/questions/428617/what-are-closures-in-net)对于正常使用，闭包的开销可以忽略不计，避免它们会无缘无故地使您的代码复杂化。所以[这](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1.-ctor#System_Threading_Tasks_Task_1__ctor_System_Func__0__)是你应该使用的构造函数：

```
public Task (Func<TResult> function); 
```

...以这个 lambda 作为参数：

```
() => GetIntAsync("3") 
```

但是，您的情况有一个特殊性：传递给构造函数的 lambda 返回 a `Task<int>`。这意味着泛型类型`TResult`被解析为`Task<int>`，因此您最终会得到一个嵌套任务：

```
var t = new Task<Task<int>>(() => GetIntAsync("3")); 
```

启动外部任务将导致内部任务的创建。要获得最终结果，您必须使用`await`运算符两次，一次用于完成外部任务，一次用于完成内部任务：

```
static async Task Main(string[] args)
{
    var outerTask = new Task<Task<int>>(() => GetIntAsync("3"));
    //...
    outerTask.Start(); // or outerTask.RunSynchronously() to use the current thread
    //...
    Task<int> innerTask = await outerTask; // At this point the inner task has been created
    int result = await innerTask; // At this point the inner task has been completed
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-17T01:47:17.113

有一个类似的问题，我们希望确保任务可重用，而无需重新启动任务。Rx 救了我们的培根。您将需要 nuget 包`System.Reactive`。

见下文`GetIntTask`返回一个未启动`GetIntOnce`的任务，并确保任务启动，并且任务的结果被缓冲并重播给任何调用者（使用`Replay(1)`）

```
async Task Main()
{
    var awaitableResult = GetIntOnce();
    Console.WriteLine("Has the task started yet? No!");
    var firstResult = await awaitableResult;
    Console.WriteLine($"Awaited Once: {firstResult}");
    var secondResult = await awaitableResult;
    Console.WriteLine($"Awaited Twice: {secondResult}");
}

public static IObservable<int> GetIntOnce()
{
    return Observable.FromAsync(() =>
        {
            var t = GetIntTask();
            t.Start();
            return t;
        }).Replay(1).AutoConnect();
}

public static Task<int> GetIntTask()
{
    var t = new Task<int>(
    () =>
    {
        Console.WriteLine("Task is running!");
        return 10;
    });
    return t;
} 
```

输出是：

```
Has the task started yet? No!
Task is running!
Awaited Once: 10
Awaited Twice: 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-11T14:07:36.017

我发现异步 lambda 效果最好，因为：

1.  工作是通过调用方法开始的，这意味着您不需要调用`.Start`，因此不可能忘记这样做。
2.  这种方法不会“遭受”内部/外部任务问题；你总是在等待正确的任务，而不是它的包装。

```
Func<Task<int>> f = async () => await WorkAsync(2);

Console.WriteLine("Sleeping before start");

await Task.Delay(100);

Console.WriteLine("Waking up to start");

var result = await f();

Console.WriteLine($"The work is done and the answer is: {result}"); 
```

这将产生以下输出：

```
Sleeping before start
Waking up to start
Starting 2
Ending 2
The work is done and the answer is: 4 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-06-10T09:51:53.970

.net 5 中的一种新方法（实际上我不知道什么时候可以开始这样做，我现在正在使用 .net 5）

```
Task<int> MyStartLaterTask = null;
//... Some Time Later
MyStartLaterTask ??= GetIntAsync(string callerThreadId);
await MyStartLaterTask; 
```

我很欣赏这并不完全是“预先定义并稍后使用”，但据我所知，这也是同样的事情。我有一个循环，我想定义一个只在需要时运行并且只运行一次的任务。这就是这样做的，它创建了一个任务，我可以在第一次需要它时分配它，然后在需要它的输出时等待它。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-04-17T17:41:23.200

```
 //creating task
   var yourTask = Task<int>.Factory.StartNew(() => GetIntAsync("3").Result);

   //...

   int result = yourTask.Result; 
```

更新：

是的，不幸的是它确实启动了任务。改用上面提到的代码：

```
 //creating task
   var yourTask = new Task<int>(() => GetIntAsync("3").Result);

   //...

   // call task when you want
   int result = yourTask.Start(); 
```

# c# - Application.Exit 上的 TargetParameterCountException

> ID：16066352
> 
> 赞同：1
> 
> 时间：2013-04-17T17:26:30.240
> 
> 标签：c#, forms, exit

我正在尝试从与主线程不同的线程关闭我的 C# Form 应用程序。我总是收到此错误：Program.cs 主行的 mscorlib.dll 中发生“System.Reflection.TargetParameterCountException”：

```
Application.Run(new Im_SecurityCenter(args)); 
```

我已经尝试通过 this.BeginInvoke(ShutdownDelegate) 并使用调度程序来完成它，但总是出现相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:23:49.310

该异常表明 Invoke 调用存在问题。

使用 Threads 窗口查找异常的真正来源。引用的行不是来源。

确保被调用的后期绑定方法具有与传入 .Invoke 相同数量的参数

# php - Yii 授权和重定向

> ID：16066353
> 
> 赞同：3
> 
> 时间：2013-04-17T17:26:32.040
> 
> 标签：php, yii

我是 Yii 的新手，我需要解决一些问题：有一些控制器有一些动作，如果用户尝试加载一些动作，我需要检查他是否被授权；如果是，则执行一些操作，如果不是 - 重定向到登录页面。我该怎么做？我希望我不需要检查 Yii::user 并在每个操作中手动重定向？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:39:22.047

使用动作过滤器，创建 yii crud 时有基本的访问控制过滤器。以下是有关过滤器的文档：
[http ://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)

访问控制的现成解决方案的主题在这里： [http ://www.yiiframework.com/doc/guide/1.1/pl/topics.auth#sec-3](http://www.yiiframework.com/doc/guide/1.1/pl/topics.auth#sec-3)

简而言之，在控制器中创建方法：

```
 public function filters()
    {
        return array(
            'accessControl',
        );
    } 
```

然后使用方法定义操作的访问规则：

```
public function accessRules()
{
    return array(
        array('deny',
            'actions'=>array('create', 'edit'),
            'users'=>array('?'),
        ),
        array('allow',
            'actions'=>array('delete'),
            'roles'=>array('admin'),
        ),
        array('deny',
            'actions'=>array('delete'),
            'users'=>array('*'),
        ),
    );
} 
```

**编辑**

如果用户未通过身份验证，要为重定向定义 url，请在用户组件中定义它：

```
'user' => [
                'class' => 'CWebUser', // or custom
                'allowAutoLogin' => true, // for autologin
                'loginUrl' => ['/ua/user/login'], // if not authenticated go here
     ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:50:51.330

我创建了 AdminModule.php。在此，我创建了一个函数来检查用户是否登录。还有一些公共页面，不需要登录。

```
public function beforeControllerAction($controller, $action)
{
    if(parent::beforeControllerAction($controller, $action))
    {   
        // this overwrites everything in the controller
        $controller->layout = 'admin';
        // this method is called before any module controller action is performed
        // you may place customized code here
        $route=$controller->id.'/'.$action->id;
        $publicPages=array(
            'user/login',
            'default/error',
        );
        if($this->password!==false && Yii::app()->user->isGuest && !in_array($route,$publicPages))
            Yii::app()->user->loginRequired();
        else
            return true;
    }
    else
        return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T14:53:17.873

作为 Mohit Bhansali 示例的简化版本，我在 AdminModule 中实现了以下代码：

```
public function beforeControllerAction($controller, $action)
{
    if(parent::beforeControllerAction($controller, $action)) {
        if (Yii::app()->user->isGuest) {
            Yii::app()->user->loginRequired();
        } elseif (Yii::app()->user->id != 'myadminuser') {
            throw new CHttpException(403, 'You are not authorized to perform this action.');
        }

        return true;
    } else {
        return false;
    }
}
```

然后，我还能够从每个管理模块控制器中删除 filters() 中返回的 accessControl 数组（但必须保留空的 filter() 函数），并完全删除 accessRules()。例如，这里是 DefaultController：

```
class DefaultController extends Controller
{
    public function filters()
    {
    }

    public function actionIndex()
    {
        $this->render('index');
    }
}
```

值得一提的是，除了简单的访问控制之外，建议使用 RBAC，如果我们在这里使用 RBAC，我们会调用 Yii::app()->user->checkAccess() 而不是检查 Yii:: AdminModule 中的 app()->user->id。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T17:35:36.573

只需添加这个

```
if(Yii::app()->user->getId()===null) {

      // This is the case where user is not logged in so redirect
     $this->redirect(array('site/login'));

} else {

     // this is the case where user is logged in 
     // do your business 

} 
```

有一个非常好的SO帖子已经存在，您可以参考您的案例

[如何在 Yii 的索引页面上对用户进行身份验证](https://stackoverflow.com/questions/8698615/how-to-authenticate-user-on-index-page-in-yii)

希望这可以帮助

# breeze - Breeze data.results 不加载嵌套的 JSON

> ID：16066354
> 
> 赞同：1
> 
> 时间：2013-04-17T17:26:32.197
> 
> 标签：breeze

我有下一个层次类：

```
public class HClass
{
    public HClass()
    {
        Children = new List<HClass>();
    }

    [Key]
    public int Id { get; set; }
    public Nullable<int> ParentId { get; set; }        
    public string Name { get; set; }

    public virtual ICollection<HClass> Children { get; set; }
} 
```

我在控制器中有一个返回父母和孩子的方法：

```
[HttpGet]
public IQueryable<HClass> Items() 
```

我的视图模型中有一个功能：

```
function getItems() {
        return entityQuery.from('Items')
            .using(manager).execute()
            .then(success)
            .fail(queryFailed);

        function success(data) {
            vm.items = data.results; //Problem here.
        }
    } 
```

在调试模式下，我查看“ `data.XHR.responseText`”有一个完整的嵌套 JSON，其中包含所有项目及其各自的子数组，但“ `data.results`”只有没有子的父。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:53:41.347

这是设计使然，data.results 具有您查询的“即时”结果，即顶级“项目”。但是，如果您深入了解任何结果项的“子项”属性，您应该会看到子项。

如果不是这种情况，请检查您是否在 ApiController 类上使用 [BreezeController] 属性。此属性将 JSON.NET 序列化程序配置为向每个 json 'entity' 添加一个 '$type' 属性。如果您没有看到此属性，则可以肯定您缺少该属性。如果没有 $type 信息，微风将无法将孩子识别为实体并忽略它们。

（旁注，您也可以使用 JsonResultsAdapter 或 [JsonFormatter] 属性来做类似的事情，但 [BreezeController] 方法更简单）

# file-upload - 带有转换检索第二个文件 ID 的 Google Drive Api 文件插入

> ID：16066360
> 
> 赞同：0
> 
> 时间：2013-04-17T17:27:01.950
> 
> 标签：file-upload, google-drive-api

在 C# 中，Google Drive API，在插入新文件时，强制转换为 Google 文档格式。

API 返回新转换和上传的文件的文件 ID。

但是 API 还插入了未转换的原始文件的副本。

如何获取第二个文件的文件 ID？request的responsebody只返回一个文件资源

```
FilesResource.InsertMediaUpload Request = Service.Files.Insert(body, Stream1, filetype);
Request.Convert = true;
Request.Upload();
Google.Apis.Drive.v2.Data.File File1 = Request.ResponseBody; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T09:41:18.863

我正在做同样的事情。请参阅文件的编辑链接 [https://docs.google.com/file/d/id](https://docs.google.com/file/d/id) of file/edit 没有转换

现在通过转换编辑文件单词从上面的链接到文档。它为我工作。 [https://docs.google.com/document/d/id](https://docs.google.com/document/d/id) of file/edit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:20:10.860

我从来没有处理过转换文件，所以我很好奇你在这里说什么，我很惊讶 Files.Insert 会创建文件的转换版本和“原始”版本，特别是如果它没有一些将原始文件的 ID 返回给您的方式。

您是如何发现在 convert = true 时 File.Insert 创建了文件的两个副本的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:29:57.233

我找不到检索第二个“未转换”文件 ID 的方法。所以解决方法是分两步上传：1）在转换关闭的情况下上传，获取第一个 ID，2）在转换打开的情况下复制新上传的文件。，获取第二个 ID

# makefile - Makefile 中的扩展变量值

> ID：16066364
> 
> 赞同：0
> 
> 时间：2013-04-17T17:27:22.357
> 
> 标签：makefile

我正在学习Makefile的一些基础知识，并编写如下简单示例：

```
urname=Chang
givenname=SJ
fullname=$(givenname) $(surname)
hello:
    @echo $(fullname)

surname=Lin

ALL_PACKAGES=
hello1:
ifeq (,$(ALL_PACKAGES))
    @echo There is no package
    $(error $(ALL_PACKAGES) is empty)
else
    @echo there are some packages
endif
    @echo $(ALL_PACKAGES)

ALL_PACKAGES += package1 
```

我可以理解`make hello`结果将是“SJ Lin”，因为 $(surname) 最后是“Lin”。

但是，在结果中`make hello1`，为什么 $(ALL_PACKAGES) 在 if 条件下为空（我猜如果在上以相同的方式是“package1” `make hello`）？

此外，为什么第一个回显消息（“没有包”）不会打印，而只有错误消息呢？

谢谢老师。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:31:02.590

1.  `make hello`将产生“Jay Lin”，而不是“SJ Lin”。我不知道你从哪里得到“SJ”。

2.  `ALL_PACKAGES`在解析的那个点是空的，所以这就是你得到这个结果的原因。在`ifeq`解析 makefile 时处理，在它实际开始运行和构建目标之前。

3.  `make`在它开始运行和构建目标之前，它在解析 makefile 时打印出错误消息（并导致退出）。

4.  如果您要注释掉该`$(error`行，您将得到两个打印输出`make hello1`- 两个是`There is no package`消息（由于`ALL_PACKAGES`解析中当时的状态而包含在内），然后是在实际处理过程`package1`中稍后被扩展。`$(ALL_PACKAGES)``make`

# php - CakePHP RequestHandler 返回 RSS/JSON 而不是 HTML

> ID：16066365
> 
> 赞同：1
> 
> 时间：2013-04-17T17:27:24.153
> 
> 标签：php, cakephp, cakephp-2.1

我一直在愉快地移动我的网站，直到本周我们开始看到一些错误出现，这些错误与我对 Cake 的 RequestHandler 工作方式的误解有关，但我还没有找到一个好的解决方法。

我正在使用一种方法来查找和返回各种格式的内容，以便它们都存在于同一个 URL 上（也许这是我的错误，我需要将它们拆分？）。所以，在我的控制器中，我有：

`if ($this->RequestHandler->ext == 'rss') {`

获取 RSS 提要。我也尝试使用`isRss()`但改变了它，认为这是我的问题的根源。我的问题是这样的：

当从浏览器点击这个 url（我们称之为`/blog`）时，我通常会得到一个 HTML 响应。如果我点击它，`/blog.rss`我会收到 RSS 响应。到目前为止很棒。但是，如果我`/blog`使用我的标头集点击该地址，因为`Accepts: application/rss+xml;`它会返回 RSS，而不管没有文字 .rss 扩展名的事实。`/blog`这些页面被缓存，所以现在我的浏览器用户在请求地址而不是 HTML 版本时最终会看到 RSS 提要的缓存版本。

我检查了 RequestHandler ，结果发现它使用 _setExtension() 来设置`ext`基于 Accepts 标头的值，即使不存在“真正的”扩展。似乎没有对此进行覆盖，所以看起来我要么被迫自己解析 URL 以查看是否真的有扩展名，要么完全分离出这些 URL 并且不允许来自`/blog`地址空间的 rss/json（例如, `/blog/feed`, `/blog/json`)。

有没有更好/更简单的方法来解决这个问题，或者我在这种设置方式中缺少的东西？我认为`ext`这是存在实际扩展的可靠迹象，但也许还有另一种寻找它的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:48:09.460

你说对了一部分。*如果没有明确设置扩展*`_setExtension`，则调用该函数，因此类似 url 的请求将请求该函数，但如果您这样做，则不会被调用。*`/blog``/blog.rss``_setExtension`*

 *无论如何，这只是为了说明这一点。继续。

阅读[_setExtension() 文档](http://api.cakephp.org/2.1/class-RequestHandlerComponent.html#__setExtension)

> 如果 html 是首选类型之一，则不会设置任何内容类型，这是为了避免首选 html 和其他几种内容类型的浏览器出现问题。

所以，我在这里的理解是：如果你传递`html`给你的`Router::parseExtensions`，那么内容类型将不会根据接受的标题设置。检查您的 cake 版本[的代码](http://api.cakephp.org/2.1/source-class-RequestHandlerComponent.html#129-152)（第 149 行），如果您有或在您喜欢的类型上，则会`if`跳过扩展的内容类型覆盖。`html``xhtml`

```
if (count($similarTypes) === 1 && !in_array('xhtml', $preferredTypes) && !in_array('html', $preferredTypes)) {
         $this->ext = array_shift($similarTypes);
     } 
```

尝试做

```
Router::parseExtensions('html', 'rss' /*and other extensions if you want*/) 
```

看看是否能解决你的问题。*

# mongodb - pymongo/MongoDB中基于不完整字典查找文档

> ID：16066368
> 
> 赞同：0
> 
> 时间：2013-04-17T17:27:31.763
> 
> 标签：mongodb, python-2.7, pymongo

我将时间存储为字典，我并不完全关心小时/分钟/秒，因为我想找到当天的每个约会。

显然（或者可能不是很明显，因为我一开始认为它会起作用），查找 ('time': {'month': m, 'day': d, 'year': y}) 不会返回任何结果。我假设我必须将 dict 的其余部分与 [任何字符，任何长度] 的正则表达式匹配，但这也没有返回任何内容。

```
db.appointments.find({'name': some_name, 'time': {'month': mm, 'day': dd, 'year': yyyy, 'hour': r'.*', 'minute': r'.*', 'second': r'.*'}}) 
```

我自己查找并尝试过的所有东西似乎也不起作用，所以我不确定我应该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:38:06.120

从技术上讲，您将时间存储为[子文档](http://docs.mongodb.org/manual/core/read-operations/#read-operations-subdocuments) 相关报价以帮助您：

> 当子文档中的字段包含与指定值匹配的字段时，子文档中特定字段的相等匹配选择文档。
> 
> 在以下示例中，查询使用点符号来匹配字段 producer 的值是子文档的所有文档，该子文档包含值为“ABC123”的字段 company，并且可能包含其他字段：
> 
> db.inventory.find( { 'producer.company': 'ABC123' } )

所以你的例子可能是：

```
db.appointments.find({'name': some_name, 'time.month' : mm, 'time.day': dd, 'time.year': yyyy}}) 
```

# ruby - 将 eventmachine 输出返回到 Ruby 中的对象

> ID：16066372
> 
> 赞同：0
> 
> 时间：2013-04-17T17:27:49.290
> 
> 标签：ruby, eventmachine

在下面的函数（在一个类中定义`Myclass`）中，我可以在 ruby​​ 中运行该函数，如

```
myoutput =  Myclass.get_par("http://eol.org/api/ping/1.0.json,http://eol.org/api/ping/1.0.json") 
```

并且调用的输出被打印到终端，但我的输出**没有**分配给 object `myoutput`。

有没有办法让输出返回到一个对象，而不仅仅是打印？

```
def self.get_par(urls)
  allurls = urls.split(',')
  results = []
  EM.synchrony do
    concurrency = 2
    results << EM::Synchrony::Iterator.new(allurls, concurrency).map do |url, iter|
      http = EventMachine::HttpRequest.new(url).aget
      http.callback { iter.return(http.response) }
      http.errback { iter.return(http) }
    end
    EventMachine.stop
    puts results # all completed requests
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:30:33.183

`puts`Returns ，因此返回`nil`的结果`puts`对您没有太大帮助。

`results`改为返回，或者两者都做，例如，

```
def self.get_par(urls)
  # ... etc ...
  puts results
  results
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:38:12.747

原来我只是在错误的地方返回输出

```
def self.get_par(urls)
  allurls = urls.split(',')
  results = []
  EM.synchrony do
    concurrency = 2
    results << EM::Synchrony::Iterator.new(allurls, concurrency).map do |url, iter|
      http = EventMachine::HttpRequest.new(url).aget
      http.callback { iter.return(http.response) }
      http.errback { iter.return(http) }
    end
    EventMachine.stop
  end
  results # SHOULD HAVE BEEN HERE #
end 
```

# ios - 通过触摸旋转圆形量规/仪表的指针

> ID：16066374
> 
> 赞同：1
> 
> 时间：2013-04-17T17:27:53.190
> 
> 标签：ios, objective-c, uiview, quartz-core

我有一个看起来像圆形仪表的 UIView，它的手围绕中心锚点旋转（想想：速度计）。我让它工作，所以手旋转到使用层变换给定值的正确位置。

我希望用户能够将仪表的手拖动到另一个值。我在弄清楚这种交互时遇到了麻烦-我可以在手上使用 UIPanGestureRecognizer 来获取平移点，但是如何从中计算调整后的手角度？这实际上似乎更像是一个几何问题。

另外，因为它是一个圆形仪表，我不想仅根据平移点的 x 或 y 分量来调整角度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:24:20.903

如果我理解正确，这是简单的几何：在极坐标和笛卡尔坐标系之间转换。使用触摸点的位置来找到围绕圆的角度（就像在极坐标中一样）：

```
CGPoint touchPoint = ...;
double touchTheta = atanf(touchPoint.x, touchPoint.y); 
```

然后你可以做一些事情，比如计算针的端点，给定它的长度（半径）：

```
CGPoint needleEndpoint = (CGPoint){needleLength * sinf(touchTheta),
                                   needleLength * cosf(touchTheta)}; 
```

# typo3 - Templavoila：部分和容器正在删除我的 div

> ID：16066377
> 
> 赞同：0
> 
> 时间：2013-04-17T17:27:54.703
> 
> 标签：typo3, templavoila

我想映射一个 FCE，我的结构如下所示：

```
| ROOT (div INNER)
 --|EL
 --|SC (div INNER)
 ----|CO (div OUTER)
 ------|EL (div INNER)
 ------|EL (div INNER)
 ------|EL (div INNER) 
```

**问题 1：**

如果我在我的部分元素上使用 OUTER 或 INNER 映射容器，则没有任何变化。我总是`<div>`在前端。如果我将它映射到`<div class="item">`这个 div 上，它就会在前端消失。因此，我添加了附加项`div`以保留`<div class="item">`在前端输出中。

```
<div> <!--root -->
   <div class="wrapper">
       <h1>heading</h1> <!--element before section -->
       <div class="another-wrapper-element"> <!-- section -->
          <div> <!-- container: additional element **(problem no. 1)** -->
              <div class="item">
                  <div class="heading"> <!-- element 1 -->
                  <div class="description"> <!-- element 2 -->
          </div>
          <div class="clearer"></div> <!-- **problem no.2** --> 
```

**问题二：**

容器下方部分中的所有元素都会在前端消失。在这种情况下，`<div class="clearer"></div>`缺少。

我该怎么做才能防止前端的 div 消失？如何正确映射这些？

**完整的 HTML 代码：**

```
<!doctype html>
<!-- FCE Team Container -->
<div>
    <div class="team-container-wrapper">
        <h2>Heading</h2>
        <div class="team-container">
            <div>
                <div class="team-member">
                    <div class="team-member-left">
                        <img src="img/some-picture.jpg" width="158" height="218" alt="" />
                    </div>
                    <div class="team-member-right">
                        <div class="team-member-name">some name</div>
                        <div class="team-member-tel">T: <span class="team-member-tel-content">012323445</span></div>
                        <div class="team-member-mobile">M: <span class="team-member-mobile-content">1232143241</span></div>
                        <div class="team-member-email">E: <span class="team-member-email-content"><a href="mailto:email@world.com">email@world.com</a></span></div>
                        <div class="team-member-history">
                            <p>
                                Some text:<br />
                                <span class="team-member-history-content">info</span>
                            </p>
                        </div>
                    </div>
                    <div class="clearer"></div>
                </div>
                <div class="clearer"></div>
                <div class="team-container-bottom"><img src="img/team-container-bottom.png" width="50" height="9" alt="" /></div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:07:22.700

我从来没有在 templavoila 中隐藏 div 的问题。这里有一些提示和提示。 `INNER`意味着您映射的标签将保持不变，只会替换内容。`OUTER`意味着标签本身也将被删除，并且不会显示在输出中。请注意，根元素以其他方式处理。OUTER 表示该元素将在那里显示，而 INNER 表示该元素将被删除。

在你的情况下，你需要两个 FCE 来获得这个。一个包含容纳所有物品的容器，一个包含物品。

第一个 FCE：

*   根元素是第一个`<div class="team-container-wrapper">`映射的元素，`OUTER`因为您希望该元素位于前端
*   创建节点标头并映射到`H2`
*   创建节点“内容元素的容器”并映射到`<div class="team-container">`模式是`INNER`因为您希望输出中的标记

第二个FCE：

*   根元素是`<div class="team-member">`模式`OUTER`
*   为名称、电话添加节点。移动、电子邮件等并映射到相同的 div，所有`INNER`

# php - 使用 Json_Decode 创建表时遇到问题

> ID：16066383
> 
> 赞同：0
> 
> 时间：2013-04-17T17:28:23.990
> 
> 标签：php, arrays, json, html-table

我正在与另一家公司的 AP 合作，他们通过 XML 向我返回一组数据。我正在尝试获取该 xml 数据，并将其转换为 HTML 表。XML 完美解码，我可以`$result`以非表格格式显示，但是当我尝试格式化它时，我收到服务器错误..我在这里束手无策。

这是我的代码（下半部分）

```
$array = json_decode(json_encode((array)simplexml_load_string($result)),1);

$array_user=$array['user'];

$tab='<table border="1" width="400">';
for ($j=1; $j< count($array_user) ; $j++) {

  $tab.='<tr>';
  $tab.='<td>'.$array_user[$j]['id'].'</td>;
  $tab.='<td>'.$array_user[$j]['login'].'</td>;
  $tab.='<td>'.$array_user[$j]['mail'].'</td>;
  $tab.='<td>'.$array_user[$j]['date'].'</td>;
  $tab.='</tr>';
}

$tab.='</table>';

echo $tab;
?> 
```

有这方面经验的人知道为什么或明白为什么我会收到一般错误吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:30:09.917

您错过了关闭所有字符串文字。

因此，例如以下行：

```
$tab.='<td>'.$array_user[$j]['id'].'</td>; 
```

必须看起来像这样：

```
$tab.='<td>'.$array_user[$j]['id'].'</td>'; // <-- note the closing ' 
```

# javascript - 为什么 new Date().getTime() 在 javascript 中返回太多“0”

> ID：16066388
> 
> 赞同：5
> 
> 时间：2013-04-17T17:28:44.190
> 
> 标签：javascript, date, timestamp

我试图从javascript中的日期获取时间戳，但`new Date(2013, 03, 17).getTime()`返回`1366149600000`错误（1981-2-2 23:11:12）。如果我删除最后三个零，我会得到好的日期。

问题出在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T17:30:40.037

它返回毫秒，unix 时间戳以秒为单位，因此您需要删除最后 3 位数字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T17:34:19.013

根据 Damien 的回答，你会得到毫秒，所以基本上你必须将 .getTime() 结果除以 1000

getTime() / 1000 => 好的 unixtimestamp

# get - Arduino + SIM900 模块 - 没有正确获得命令响应

> ID：16066389
> 
> 赞同：0
> 
> 时间：2013-04-17T17:28:48.003
> 
> 标签：get, command, arduino, response

我无法从 SIM900 模块获得正确响应，如果我使用示例中的代码，它就可以正常工作。

对于这个命令：

```
void GetContacts(){
  mySerial.print("AT+CPBF=\"Mailbox\"");
  delay(100);
  mySerial.println();
} 
```

并使用此打印代码：

```
if (mySerial.available()){
  Serial.write(mySerial.read());
} 
```

我得到：

```
AT+CPBF="Mailbox"

+CPBF: 1,"+584125089112",145,"Mailbox3"

+CPBF: 2,"+584264273127",145,"Mailbox1"

+CPBF: 3,"+584147373665",145,"Mailbox2"

OK 
```

这是完美的，但如果我尝试读取输出然后像这样打印它：

```
if (mySerial.available()){
  int intValue = mySerial.read();

  String stringOne;
  stringOne =  String(intValue, HEX); //int to HEX

  char charConversion;
  charConversion = hexNibbleToChar(stringOne[0]) * 16 + hexNibbleToChar(stringOne[1]); //HEX to Char
  contactString += charConversion;

  Serial.println(contactString);
}

char hexNibbleToChar(char nibble){
  if (nibble >= '0' && nibble <= '9')
    return nibble - '0';
  else if (nibble >= 'a' && nibble <= 'f')
    return 10 + nibble - 'a';
  else
    return 10 + nibble - 'A';
} 
```

我得到：

```
AT+CPBF="Mailbox"

+CPBF: 1,"+584125089112",145,"Mailbox3"

+CPBF: 2,"+58426 
```

突然停在那里，我不知道为什么，我尝试在 int intValue = mySerial.read(); 之后立即阅读和打印 行，当我使用任何在线转换器将得到的十进制字符串转换为 char 时，结果是相同的。

你们中有人看到我做错了吗？

谢谢，胡安医生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:33:18.740

好吧，对于那些有同样问题或相关问题的人，我的解决方案是将所有响应保存在字符串变量中，然后在“mySerial”变量不再可用时对其进行处理

```
String contactString = "";
if(mySerial.available()){
  contactString += (char) mySerial.read(); 
}
else{
  if(contactString != ""){
    //Process response
  }
  contactString = "";
} 
```

我正在处理 mySerial.available() 中的所有数据，不知何故我截断了响应......

# mongodb - 如何更新与spring数据中的条件匹配的数组中的嵌套对象-mongodb？

> ID：16066393
> 
> 赞同：4
> 
> 时间：2013-04-17T17:28:58.567
> 
> 标签：mongodb, spring-data-mongodb

我在 mongodb 中有一个从这个 java 模型创建的文档：

```
class Comment 
{ 
    String pollID; 
    List<CommentDetail> commentDetailList;
}

class CommentDetailList
{
    String text;
    User user;
}

class User
{
    String userID;
    String username;
} 
```

因此，我的文档将如下所示：

```
{
  "pollID":"ABCDEFG",
  "commentDetailList":
   [
     {
        "text":"Hello Comment1",
        "user":
        {
           "userID":"001",
           "username": "username1"
        }
     },
     {
        "text":"Hello Comment2",
        "user":
        {
           "userID":"001",
           "username": "username1"
        }
     },
     {
        "text":"Hello Comment3",
        "user":
        {
           "userID":"002",
           "username": "username2"
        }
     }
  ]
} 
```

现在我想使用以下代码更新用户 ID = 001 的用户的用户名：

```
Query query = new Query(Criteria.where("pollID").is("ABCDEFG")
            .and("commentDetailList")
            .elemMatch(Criteria.where("user.userID").is("001")));

Update update = new Update().set("commentDetailList.$.user.username", username);

WriteResult wr = mongoTemplate.updateMulti(query, update, "comment"); 
```

问题是它只更新第一条评论（带有文本=“Hello Comment1”的评论）。

有人可以帮我吗？

我对更新功能有误解吗？

谢谢。

PS。对不起我的英语：D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-18T18:36:24.827

试试这个查询：

```
Query query = new Query(new Criteria().andOperator(
  Criteria.where("pollID").is("ABCDEFG"),
  Criteria.where("commentDetailList").elemMatch(Criteria.where("user.userID").is("001"))
)); 
```

# ruby-on-rails - Rails - 带有 :remote => true 和 false 的 form_tag

> ID：16066396
> 
> 赞同：1
> 
> 时间：2013-04-17T17:29:04.020
> 
> 标签：ruby-on-rails, ruby, ajax, redirect

我有一个表格`:remote => true`，其中包含`button`和`submit_tag`发送表格。当我通过**button**发送表单时，我需要将表单发送为`:remote => true`并通过 AJAX 呈现一些数据，这对我来说效果很好。

**但是如果用户通过submit_tag**发送表单，我需要执行一些操作，然后**重定向**到另一个页面。

有什么办法，如何在表单头中使用**:remote => true来做到这一点？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:44:50.630

好的，这就是我解决它的方法：

```
render js: %(window.location.href='#{root_url}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:12:41.653

尝试使用 jsvascript。添加远程属性以在按钮单击时动态形成。

# tsql - PIVOT 中的列未按所需顺序

> ID：16066398
> 
> 赞同：0
> 
> 时间：2013-04-17T17:29:11.957
> 
> 标签：tsql, pivot

我刚开始使用`SQL PIVOT`并且对列的排序有疑问，并且很想知道如何纠正它。我在这里和其他网站上筛选了几个与 PIVOT 相关的帖子，但没有任何内容立即引起人们的注意。

您会注意到我在每个查询中添加了一个硬编码的 OrderBy 文件，但这并没有帮助，我认为皮托管正在对列进行排序的是 [Description] 字段。因此，目前这些列按以下顺序从左到右出现：

***[收费期]、[优秀]、[良好]、[中期]、[满意]、[不满意]、[很好]***。

相反，我需要以下顺序：

***[收费期]、[临时数量]、[优秀]、[很好]、[良好]、[满意]、[不满意]***。

我开始认为这可能不是一个纯粹的支点问题 - 我可以使用一些帮助，谢谢。

存储过程如下所示：

```
DECLARE @cols NVARCHAR(MAX)
DECLARE @query NVARCHAR(MAX)

SET NOCOUNT ON;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED

SELECT @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT '],[' + [Description] 
FROM dbo.vQualScoringGrade 
ORDER BY '],[' + [Description] FOR XML PATH('')), 1,2,'') + ']'

SET @query = N'SELECT [Fee Period], ' + @cols + ' FROM 
(SELECT [Award Fee Period],GradeCount, Description, Value, OrderBy FROM 
dbo.vQualScoringGrade) p
PIVOT (SUM([Value]) for [Description] IN ( ' + @cols + ' )) AS pvt ORDER BY [Fee Period]'

execute(@query) 
```

为 sproc 提供数据的视图 [vQualScoringGrade] 如下所示：

```
SELECT TOP (100) PERCENT [Fee Period], GradeCount, Description, 
GradeCount AS Value, OrderBy
FROM (SELECT [Fee Period], 'No of Interim' AS Description, COUNT(VerNumber) AS GradeCount, 1 AS
OrderBy
FROM dbo.vQualScoringExcellent AS vQualScoringExcellent
GROUP BY GIIANumber, Description
UNION
SELECT [Fee Period], 'Excellent' AS Description, COUNT(Description) AS GradeCount, 2 AS OrderBy
FROM dbo.vQualScoringExcellent AS vQualScoringExcellent_1
GROUP BY VerNumber, Description
UNION
SELECT [Fee Period], 'Very Good' AS Description, COUNT(Description) AS GradeCount, 3 AS OrderBy
FROM dbo.vQualScoringVeryGood AS vQualScoringVeryGood
GROUP BY VerNumber, Description
UNION
SELECT [Fee Period], 'Good' AS Description, COUNT(Description) AS GradeCount, 4 AS OrderBy
FROM dbo.vQualScoringGood AS vQualScoringGood
GROUP BY VerNumber, Description
UNION
SELECT [Fee Period], 'Satisfactory' AS Description, COUNT(Description) AS GradeCount, 5 AS
OrderBy
FROM dbo.vQualScoringSatisfactory AS vQualScoringSatisfactory
GROUP BY VerNumber, Description
UNION
SELECT [Fee Period], 'Unsatisfactory' AS Description, COUNT(Description) AS GradeCount, 6 AS OrderBy
FROM dbo.vQualScoringUnsatisfactory AS vQualScoringUnsatisfactory
GROUP BY VerNumber, Description) AS QualScoringGrade
ORDER BY OrderBy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:09:48.730

试试这样：

```
SELECT @cols = STUFF((SELECT '],[' + [Description] 
    FROM dbo.vQualScoringGrade 
    GROUP BY [Description] 
    ORDER BY MAX([orderby]), [Description] 
    FOR XML PATH('')), 1,2,'') + ']' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:38:17.287

您在此处指定要按字母顺序排列的列：

```
SELECT @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT '],[' + [Description] 
  FROM dbo.vQualScoringGrade 
  ORDER BY '],[' + [Description] FOR XML PATH('')), 1,2,'') + ']' 
```

通过添加一个`ORDER BY`子句。

如果每个描述都有一个关联的列顺序字段，您可以对其进行排序以获得明确的顺序。

另外：通常从查询返回的列的顺序并不重要。使用数据的应用程序负责格式化数据。这应该包括以合适的顺序显示它。

# java - 创建文件服务器端并通过选择文件夹从客户端保存它

> ID：16066401
> 
> 赞同：0
> 
> 时间：2013-04-17T17:29:24.727
> 
> 标签：java, sql, spring-mvc, text-files, mule

我使用 spring mvc（客户端）和 ESB Mule 流（服务器端），其中包括 java 组件（类）。

事情是我在客户端有一个“EXPORT”按钮，当单击它时会触发 ESB Mule 中的 SELECT * FROM 表，然后在 java 组件中使用该信息创建一个文件服务器端：

这是骡流（添加了通用名称）

```
<flow name="EXPORT_TABLE_DATA">
    <ajax:servlet-inbound-endpoint channel="/export_table" responseTimeout="10000"/>
    <jdbc:outbound-endpoint exchange-pattern="request-response"
          queryKey="export_table_data"
          queryTimeout="-1"
          connector-ref="ExtendedRoutingConnector">
        <jdbc:query key="export_routing_table_data"
                    value="SELECT * FROM table_name"/>
    </jdbc:outbound-endpoint>
    <component class="com.web.esb.component.GenerateRoutingTableTextFile" />
</flow> 
```

这是在`GenerateRoutingTableTextFile`Java 组件内部。

```
File dir = new File("routing-data");
if(!dir.exists()) {
    dir.mkdir();            
}
BufferedWriter writer = new BufferedWriter(new FileWriter(dir +"/" + "tabledata_" + System.currentTimeMillis() + ".txt"));
ArrayList<CaseInsensitiveHashMap> arrayList; 
try{
    arrayList = (ArrayList) eventContext.getMessage().getPayload();
    for(CaseInsensitiveHashMap map : arrayList){
        writer.write("** data line from SQL Query **"));
        writer.newLine();
    }
    writer.close();
} catch (Exception e){
    writer.close();
    e.printStackTrace();
}
return writer; 
```

事情是，这是在项目中创建一个文件夹。我想做的是将文件发送到客户端，以便弹出另存为...。

我怎样才能将它推送到客户端？有任何想法吗？

提前致谢。

# sql - 使用具有不同外键的另一个表的特定行的计数更新多行

> ID：16066404
> 
> 赞同：0
> 
> 时间：2013-04-17T17:29:39.160
> 
> 标签：sql, sql-update, sql-server-2012

我的表视图上有一个触发器，它将所有视图记录到特定页面。此触发器使用应由插入字段派生的总视图更新公司表。在实际情况下，永远不会发生一家公司获得多个视图（因此只需选择所有视图并添加一个就足够了），但我喜欢安全地编码，所以...

公司：ID、视图

CompanyViews：ID、CompanyId

需要的触发器：

```
UPDATE Companies 
    SET Views = Views + (SELECT Count(1) FROM INSERTED  AS i WHERE i.CompanyId = Id) 
    WHERE Id IN (SELECT DISTINCT(CompanyId) FROM INSERTED) 
```

但是，这...不起作用。我不太清楚为什么，但基本上预期的结果如下：说，插入的表有

```
Id, CompanyId
1   2
2   2
3   3
4   5
5   2
6   3 
```

在这种情况下，公司 2 将获得 3 次观看，公司 3 将获得 2 次观看，公司 5 将获得 1 次观看。

当我的查询失败时，我应该如何处理？

编辑：通过“不起作用”，我的意思是，值保持不变。事实上，它会将 NULL 插入它确实检测到的行（即 DISTINCT 值）。如果我省略了 Views +，它只会将其设为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:37:48.730

不知道为什么要手动尝试使用触发器跟踪此数据，并处理并发问题，确保减少单独触发器中的删除计数等。相反，我只创建一个索引视图，让 SQL Server为您完成工作：

```
CREATE VIEW dbo.CompanyViewTotals
WITH SCHEMABINDING
AS
  SELECT CompanyId, Views = COUNT_BIG(*)
    FROM dbo.CompanyViews
    GROUP BY CompanyId;
GO
CREATE UNIQUE CLUSTERED INDEX x ON dbo.CompanyViewTotals(CompanyId);
GO 
```

是的，这会对您的插入造成影响，但您的触发器也是如此。这具有始终正确的额外好处，允许您删除触发器，并允许您删除表`Views`上的浪费列`Companies`。即使没有索引视图，这显然是没有该列就可以获得的冗余数据。

如果您真的无法绕过 Entity Framework 中的所有这些糟糕的限制，那么您可以使用触发器以缓慢且不可靠的方式来完成。您需要修复更新语句以使用`inserted`与基表之间的正确关联，并正确考虑`NULL`基表中的潜在值。

```
;WITH cte(CompanyId,NewViews) AS 
(
  SELECT CompanyId, COUNT(CompanyId) 
    FROM inserted 
    GROUP BY CompanyId
)
UPDATE c
  SET c.Views = COALESCE(c.Views, 0) + cte.NewViews
  FROM cte INNER JOIN dbo.Companies AS c
  ON cte.CompanyId = c.CompanyId; 
```

# ios - 为什么 UITableViewCell 在编辑模式下突出显示颜色未显示

> ID：16066406
> 
> 赞同：0
> 
> 时间：2013-04-17T17:29:51.933
> 
> 标签：ios, objective-c, uitableview

我有一个 UITableView，当它处于编辑模式时，选定的单元格的背景突出显示，但我分配给单元格标签的突出显示颜色不会在编辑模式下应用，尽管它在普通模式下的选择中工作正常。

```
UILabel *desc = [[[UILabel alloc]initWithFrame:CGRectMake(self.textXStart, descYStart, self.descWidth, descHeight)]autorelease];
desc.lineBreakMode = self.descLineBreakMode;
desc.font = font;
desc.textAlignment = NSTextAlignmentLeft;
desc.numberOfLines = self.descLinesNumber;
desc.text = descText;

desc.highlightedTextColor = [UIColor whiteColor]; 
```

然后我将它添加到单元格内容视图

在普通情况下，会显示突出显示的颜色，但是当我单击编辑按钮并选择一个单元格时，标签文本没有突出显示的颜色。

你认为这个问题的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:49:55.300

如果您已设置`allowsMultipleSelectionDuringEditing`为`YES`，则`UITableView`“进入编辑模式时不查询编辑样式”，如类参考中所述：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/allowsMultipleSelectionDuringEditing](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/allowsMultipleSelectionDuringEditing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T17:11:16.463

我遇到了同样的问题。对我有用的是覆盖 didSelectRowAtIndexPath 和 didDeselectRowAtIndexPath 并在我的自定义单元格中手动设置标签的颜色。

此外，您需要确保在进入和退出编辑模式时调用重新加载数据。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [[self tableView] reloadData];
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    DocumentCell *cell = (DocumentCell *) [tableView cellForRowAtIndexPath:indexPath];
    if([cell isEditing]) {
        cell.titleLabel.textColor = [UIColor blackColor];
        cell.dateLabel.textColor = [UIColor blackColor];
        cell.tagsLabel.textColor = [UIColor blackColor];
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DocumentCell *cell = (DocumentCell *) [tableView cellForRowAtIndexPath:indexPath];
    if([cell isEditing]) {
        cell.titleLabel.textColor = [UIColor whiteColor];
        cell.dateLabel.textColor = [UIColor whiteColor];
        cell.tagsLabel.textColor = [UIColor whiteColor];
    }
} 
```

# android - Android GC和AudioTrack，GC线程卡在dlmalloc_inspect_all和AudioTrack卡住..tryLock

> ID：16066414
> 
> 赞同：3
> 
> 时间：2013-04-17T17:30:29.697
> 
> 标签：android, garbage-collection, audiotrack

快速背景：该应用程序是一个音频播放器，ffmpeg 编译为原生共享对象并用于解码，单独的原生库编译为共享对象并用于音频处理，AudioTrack 用于输出处理后的音频。所有音频功能都封装在一个类中，该类使用静态类变量来确保只有一个实例。在这个类中：一个ja​​va线程用于从ffmpeg获取数据，通过原生处理库完成音频处理。本机处理调用需要 2 到 3.5 毫秒，具体取决于配置。处理后的音频位于由读取和写入计数信号量管理的 ByteBuffer 数组中。一个单独的 java 线程 ByteBuffer.get 一个音频块，减少 sem 计数并将 byte[] 数据发送到 AudioTrack。AudioTrack 配置为流模式，缓冲区大小为 getMinBufferSize 返回的大小的 2 倍。音频数据以每通道 512 个样本块的形式通过系统，对于立体声，2048 字节。

问题：一切都很好，随机的时间，然后一切都停止了，没有崩溃，没有 SIGSEG，应用程序只是消耗了大部分 CPU 并且什么都不做。GUI 没有响应，ADT 中的调试器失去了与应用程序的连接。使用 shell 和 top -m 10 -t，我可以看到应用程序 GC 线程正在消耗 49%，我假设是单核。有时，AudioTrack 会以低利用率弹出。与应用程序相关的其他线程从未出现在前 10 名中。这在 4.2.2 上发生得非常快，在 4.0.1 和 4.1.1 上不太确定。

为了解决：我使用 libc.debug.malloc 10 来验证本机内存使用情况。发现并修复了一些泄漏，但根据 libc，没有任何内容超出缓冲区的末端。安装 ByteBuffers 作为解决方法的尝试，之前使用了 byte[] 并表现出相同的问题。我删除了 AudioTrack 并替换为基于 OpenSL ES 的本机代码，结果相同。毫不奇怪，因为 OpenSL ES 使用了 AudioTrack。Log.i 样式的调试消息显示写入 AudioTrack 线程停止消耗数据，ffmpeg 读取和处理线程继续，直到 ByteBuffer 数组填满。我已将 System.gc() 调用放在战略位置，有时需要更长时间，但仍会出现挂起。我在 THREAD_PRIORITY_URGENT_AUDIO 设置了“已处理的音频数据到 AudioTrack”线程的优先级，没有观察到任何变化。

我已经广泛搜索了类似问题的实例，但发现的信息很少。我为 Eclipse/ADT 安装了 ARM 的 DS-5 调试功能。该工具能够保持与旋转应用程序的连接。暂停表明 GC 线程处于 dlmalloc_inspect_all 内部的无限循环中，可能试图回收或合并本机堆。AudioTrack 线程在暂停时处于 nanosleep，从 usleep 调用，AudioTrack.cpp 中只有两个 this 实例，一个在 processAudiobuffer 中，另一个在 tryLock 中。tryLock 从 stepServer 和 framesReady 调用。我无法从挂起的应用程序中获取堆栈转储，kill -3 在挂起 #1 threadid=2 (pcf=0) 时产生自旋，该应用程序从未被声明为 ANR，因此没有 /data/ANR/traces.txt。

我的概要 - GC 正在做它的事情并检查本机堆。根据文档，GC 不会在 JNI 调用中间暂停。但是它必须暂停 AudioTrack 线程，并且当本机堆检查与 AudioTrack 的 processAudioBuffer 的执行同时发生时，就会发生死锁。

问题： 1) 我肯定会受益于原生组件的堆栈跟踪，缺少开发平台和 JTAG 调试器，还有其他方法可以尝试吗？2) 有没有人看到 GC 和 AudioTrack 进入死锁路线的任何问题？3) GC dlmalloc_inspect_all 调用是否有可能被抑制或以其他方式同步以避免此问题？4）对解决这个问题有什么建议吗？

如果有帮助，我很乐意发布一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T03:51:28.557

Faced same issue (random hang - all stops, no crash, no SIG, consumes most of the CPU and does nothing). Problem was in corrupted memory in JNI code (like buffer overrun).

Also this issue seems very device dependent (100% repro on 2 of my devices, and no one issue on other 3) Other platforms (win32, iOS) also didn't spotted corrupted memory (i'm working on crossplatform game) So android's dalvik memory manager is nice "tool" to detect memory bugs, now we testing everyday build on "memory corruption sensitive" device. Helps to ensure new code stability

[For more info try](http://elinux.org/Android_Memory_Usage#Debugging_Android_application_memory_usage)

[And an excellent article by Dianne Hackborn](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android/2299813#2299813)

# php - MySQL表中的重复结果？

> ID：16066415
> 
> 赞同：2
> 
> 时间：2013-04-17T17:30:31.357
> 
> 标签：php, mysql

我有以下代码：

```
 <?php

$select =  mysqli_query ($con,"SELECT field_2 FROM info4");  
 if (! $select) {
die('Query unfunctional ' . mysqli_error($con));
}
   ?>

<table>
<td><select name="City">

<?php
while ($res=mysqli_fetch_array($select)){
foreach($res as $value){
echo "<option>" . $value . "</option>";
}}
?>
</select></td></table> 
```

连接在哪里`$con`。

但这会输出所有重复值的下拉列表。例如，如果我的表中有 1 和 2，它会输出：1/1/2/2（在下拉列表中）。我想我在代码中犯了一个错误——任何人都可以看到它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:35:22.517

[`mysqli_fetch_array`](http://us1.php.net/manual/en/mysqli-result.fetch-array.php)默认为结果返回类型`MYSQLI_BOTH`，它返回关联值和非关联值。为什么会这样，我不知道，但它返回的数组是：

```
$res = array(0 => '1', 'field_2' => '1'); 
```

您可以通过使用`mysqli_fetch_assoc`或指定`MYSQLI_ASSOC`为返回值来解决此问题。我首选的解决方法是：

```
while ($res = mysqli_fetch_assoc($select)) {
    echo "<option>$res[field_2]</option>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:35:14.653

尝试这个。在这种情况下，foreach 循环是不必要的。

```
<?php
while ($res=mysqli_fetch_assoc($select)){
echo "<option>" . $res["field_2"] . "</option>";
}
?> 
```

# c++ - 在 main.cpp 之外创建一个类以使用 QtQuick2ApplicationViewer 的正确方法是什么？

> ID：16066428
> 
> 赞同：1
> 
> 时间：2013-04-17T17:31:19.620
> 
> 标签：c++, qt, qml, qt5, qtquick2

我想制作一个使用 QML 进行对话 UI 的 C++ 应用程序。

我正在尝试将我的 UI 代码放在***main.cpp***之外，以便以后可以将其分开以在线程中运行。

我构建并运行：编译中没有错误，应用程序输出中没有错误。

但是，屏幕上什么也没有显示。但如果写在*main.cpp*中，这段代码会正确显示 QML 对话框：

```
QtQuick2ApplicationViewer viewer;
viewer.setMainQmlFile(QStringLiteral("qml/Kiosk/main.qml"));

viewer.showExpanded(); 
```

我所做的：

*新项目 -> 应用程序 -> Qt Quick 2 应用程序（内置元素）*

我保留*main.qml*原样。

我添加了一个新类“对话框”

*Dialog.h*代码：

```
#ifndef DIALOG_H
#define DIALOG_H

#include <QObject>

#include "qtquick2applicationviewer.h"

class Dialog : public QObject
{
    Q_OBJECT
public:
    explicit Dialog(QObject *parent = 0);

    void show();

    signals:

public slots:

};

#endif // DIALOG_H 
```

*Dialog.cpp*代码：

```
#include "dialog.h"

Dialog::Dialog(QObject *parent) :
    QObject(parent)
{    
}

void Dialog::show()
{
    QtQuick2ApplicationViewer viewer;
    viewer.setMainQmlFile(QStringLiteral("qml/Kiosk/main.qml"));

    viewer.showExpanded();
} 
```

*main.cpp*代码：

```
#include <QtGui/QGuiApplication>    
#include "dialog.h"

int main(int argc, char *argv[])
{
    QGuiApplication app(argc, argv);

    Dialog *dia = new Dialog();
    dia->show();

    return app.exec();
} 
```

当我切换回*QtQuick 1.0*并将使用***QtQuick2ApplicationViewer***的代码块替换为***QDeclarativeView***时：

```
view = new QDeclarativeView();
view->rootContext()->setContextProperty("Dialog", this);    //this
view->setSource(QUrl("qml/Kiosk/main.qml"));
view->setResizeMode(QDeclarativeView::SizeRootObjectToView); 
```

我的 QML 应用程序正确显示。但我想使用***QtQuick 2.0***。我是 Qt 编程的新手，所以任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:39:48.817

在我自己寻找资源时遇到了这个问题。我想我可以对您的问题有所了解，但我自己只是开始掌握 QtQuick。

在您的`Dialog::Show()`方法中，您正在创建一个局部变量，该局部`QtQuick2ApplicationViewer`变量将在函数调用结束时被销毁，因此您将看不到任何内容，因为它会立即返回。

另外，我发现获得 qml 显示的最简单方法是直接使用 QQuickView。例如

```
int main(int argc, char** argv)
{
  QApplication app(argc, argv);

  QQuickView qtQuickApp;
  qtQuickApp.setSource(QUrl("test.qml"));
  qtQuickApp.show();

  app.connect( &app, SIGNAL( lastWindowClosed() ), &app, SLOT( quit() ) );
  app.exec();

  return 0;

} // main 
```

# c - C 语言简介：加法和循环

> ID：16066431
> 
> 赞同：2
> 
> 时间：2013-04-17T17:31:29.487
> 
> 标签：c, debugging, floating-point, calculator, addition

我正在继续追求精通 C，我目前正在做一个练习，让我的基本计算器不断提示我输入两个操作数和一个运算符。如果运算符不是“+”，则会显示错误消息。现在，我遇到了一些问题。

1.  当我输入“+”时，它会显示两次。我的代码中没有任何东西表明这会发生。
2.  第一个操作数表现出同样的问题。我也不知道如何告诉我的代码我已经完成了输入。
3.  第二个操作数很好，但我仍然不知道如何终止输入。
4.  在它显示结果之后，它会正确循环返回，但在再次提示之前给我一条错误消息。

[http://tinypic.com/r/34ew5cx/6](http://tinypic.com/r/34ew5cx/6)

注意：我知道您使用 lf 来读取 scanf 中的双数，但由于某种原因 lf 对我不起作用，而 f 工作得很好，所以忽略 :)

感谢您的任何观察，以及有关如何格式化代码/在本网站上提问/如何解决此类问题的任何一般性建议。谢谢你的帮助！

```
int main () {
char mychar;
    int a;
    double op1;
    double op2;

    printf("Welcome to Andrew Hu's calculator program!\n"); //Greeting

    while(1)
    {    printf("Enter a mathematical operation to perform:\n");
        scanf("%c", &mychar);

    if(mychar == '+') //Valid Operators
        a = 1;
    else
        a = 0;

    if(a == 0) //Operator Checker, error if invalid
        printf("\nError, not a valid operator\n");
    else if(a == 1){
        printf("%c\n", mychar),
        printf("Enter OP1:\n"),
        scanf("%f", &op1),
        printf("%f\n", op1),
        printf("Enter OP2:\n"),
        scanf("%f\n", &op2),
        printf("%f\n", op2),
        printf("Result of %f %c %f = %f\n",
                op1, mychar, op2, (op1 + op2) );
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:43:47.057

这是一个典型的案例，您的老师/导师/书籍/在线教程/任何建议使用`scanf()`是一个好主意，而实际上并非如此。您也不应该对行尾做出任何假设，并且作为最后和边缘的旁注，您应该更好地构建代码（包括花括号的格式和一致性）。

我建议你做的是别管穷人`scanf()`，它并不总是按照你的想法做，尤其是当有单个字符、字符串和换行符要读取时。相反，您最好阅读一行并解析和/或验证它。如果你做得对，它也会简单得多。

> 我也不知道如何告诉我的代码我已经完成了输入。

好吧，你决定。`quit`运营商呢？例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main()
{
    char buf[0x100] = { 0 };

    while (1) {
        // If the user has entered "q", we enter the loop        
        fgets(buf, sizeof(buf), stdin);
        if (buf[0] == 'q') break;

        char *end;
        float op1 = strtof(buf, &end); // parse 1st operand

        while (isspace(*end)) {
            end++;
        }

        char op = *end++; // get operator

        float op2 = strtof(end, NULL); // parse 2nd operand
        float r;

        // do the calculation
        switch (op) {
        case '+':
            r = op1 + op2;
            break;
        case '-':
            r = op1 - op2;
            break;
        case '*':
            r = op1 * op2;
            break;
        case '/':
            r = op1 / op2;
            break;
        default:
            fprintf(stderr, "Error: invalid operator '%c'\n", op);
            continue;
            break;
        }

        // print the result
        printf("%f %c %f = %f\n", op1, op, op2, r);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:45:23.777

首先，您需要在 scanf 中使用 %lf 来读取双精度，否则您只需读取一个浮点数并将其存储在双精度的一半中...

```
 scanf("%lf", &op1), 
```

这对于 printf 来说不是必需的，因为每个 float 参数首先被提升为 double ...

# email - How can I add a picture in an email which is a html format with SwiftMailer (Symfony2)

> ID：16066438
> 
> 赞同：2
> 
> 时间：2013-04-17T17:31:52.343
> 
> 标签：email, symfony, insert, image, swiftmailer

I have developed a page for a client, and I have to do a newsletter. I already have the template of the mail and what I want is to insert a picture in those emails.

The code :

```
foreach($customer as $customer)
{
  $mail = $customer->getMailcustomer();
  $message = \Swift_Message::newInstance();
  $message->setSubject('Info');
  $message->setFrom('abcd@noreply.ch');
  $message->setTo($mail);
  $message->setContentType("text/html");

  $message->setBody(
    $this->renderView(
            'MyBundle:Customer:email.html.twig',
            array('form' => $form->createView())
    )
  );

  $this->get('mailer')->send($message);  
} 
```

This code works and I have a nice email page but what I don't know is how to insert a picture in it.

I tried to insert a picture in the `email.html.twig` but it didn't work.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T21:24:31.507

Here is the example from [http://swiftmailer.org/docs/messages.html](http://swiftmailer.org/docs/messages.html):

You can embed files in two stages if you prefer. Just capture the return value of embed() in a variable and use that as the src attribute.

```
// You can embed files from a URL if allow_url_fopen is on in php.ini
$message->setBody(
'<html>' .
' <head></head>' .
' <body>' .
'  Here is an image <img src="' .
     $message->embed(Swift_Image::fromPath('http://site.tld/logo.png')) .
   '" alt="Image" />' .
'  Rest of message' .
' </body>' .
'</html>',
  'text/html'
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:27:08.223

Put your images on a server. Then link them with an absolute url path in the html of the newsletter. The images will simply be requested from that server.

# java - Java，我可以在同一个 if 语句中使用 toUpperCase 和 equals 吗？

> ID：16066440
> 
> 赞同：0
> 
> 时间：2013-04-17T17:32:06.593
> 
> 标签：java, string, if-statement

我只是想知道是否可以使用 Scanner 读取 String 值，将其转换为大写，并在同一个 if 语句中使用 .equals("NO") 。基本上，如果用户输入 'no' 'No' 'NO' 'nO' 它会将其更改为 'NO' 然后执行 .equals("NO") 以检查用户是否要继续程序。是的，我知道 if 语句参数的当前语法不正确，这是因为我不知道该怎么做。我可以在 if 语句中执行 toUpperCase 和 equals() 吗，还是需要使用单独的 toUpperCase 语句？

紧接着公开课program2 {

```
public static String cont="";
public static Scanner in=new Scanner(System.in); 
```

在我的 main() 中；

```
System.out.print("Continue? Yes/No >> ");
cont=in.nextLine();
if(cont.toUpperCase/equals("NO")
{
System.exit(0);
}
showmenu(); 
```

此外，由于我使用的是 Syste.out.print() 和 System.out.println()，如果有一种方法可以清除输出窗口中的所有文本，那将会很有帮助。有没有办法清除输出窗口？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T17:33:27.003

用于`String.equalsIgnoreCase()`测试是否相等，忽略大小写。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T17:33:08.337

是的，你可以这样做。只需这样做：

```
if (s.toUpperCase().equals("NO")) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:33:47.303

你可以这样做

```
cont.toUpperCase().equals("NO") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T17:34:35.990

1）你可以这样做：

```
// include a null check here
if (cont!=null && cont.toUpperCase().equals("NO")) {} 
```

或者

```
if(cont.equalsIgnoreCase("No")) 
```

2）清除控制台：

```
Runtime.getRuntime().exec("cls"); // cls command is OS dependent 
```

# jquery - 了解 jQuery 的工作原理

> ID：16066444
> 
> 赞同：6
> 
> 时间：2013-04-17T17:32:29.630
> 
> 标签：jquery

我是 jQuery 的新手。我正在学习一门课程并获得了一个测试项目，但我不知道该怎么做。我只是要求有人帮助我理解。以下是要求：

![任务](https://i.stack.imgur.com/hLryx.png)

这是我尝试过的：

```
$(document).ready(function() {
// site code
for (var i=0; i<10; i++)
{   
    //jQuery factory
    $("body").appendTo("<a href=">"+i+</>")
}
}); 
```

这是 HTML 部分：

```
<body>
<div id="wrap">
    <ul id="navleft"></ul>
    <ul id="navright"></ul>
</div>

<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>

</body>
</html> 
```

我不想要答案，而是朝着正确的方向前进。我需要一个家教，但他们太贵了，而且我的老师永远找不到，所以我看看是否有人不介意帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:39:06.487

你有逻辑和语法错误。`;`确保您的语句以 ' '结尾

我认为您对`$()`工作原理感到困惑。简单来说，您可以`$()`从页面中输入您想要选择的任何内容。所以你正在做`$('body')`，它告诉 jquery，“嘿，把所有被标记的元素还给我`<body>`”，这当然只是一个。

您的任务希望您将 'navleft' id 'appendTo'。那么你想从页面中选择什么？请注意，要使用您查找 ID，`$()`您应该这样做`$("#id")`

现在对于 appendTo，您的作业说要附加 a `<li>`，但是您要附加其他内容。

您应该完全附加它所说的附加内容。 `<li><a>..<a/><li/>`

最后一个遍历要求你应该有足够的时间自己做。请记住 $() 将选择您告诉它的所有项目，那么您需要选择什么才能将颜色应用于所有锚点？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:35:23.547

除了您帖子中明显的语法错误外，我还会查看[`appendTo`](http://api.jquery.com/appendTo)and的文档[`append`](http://api.jquery.com/append)。

^(...然后交换回合`"body"`和`"<a href=">"+i+</>"`)

* * *

您可以使用与浏览器捆绑在一起的 Web 工具来跟踪语法错误和运行时异常。在大多数浏览器（Chrome、FireFox）中，通过键盘上的 F12 访问这些。

# android - 扩展文件：下载扩展文件后，启动 Intent 到下一个活动

> ID：16066445
> 
> 赞同：1
> 
> 时间：2013-04-17T17:32:31.193
> 
> 标签：android, apk-expansion-files

我有下面的代码可以成功下载扩展文件，但我不知道在哪里添加我的 Intent 以便一旦`expansion file is downloaded`我可以`start my activity.`

请帮忙。

```
try {
            Intent launchIntent = ExpansionFilesActivity.this.getIntent();
            Intent intentToLaunchThisActivityFromNotification = new Intent(ExpansionFilesActivity.this,
                ExpansionFilesActivity.this.getClass());
            intentToLaunchThisActivityFromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intentToLaunchThisActivityFromNotification.setAction(launchIntent.getAction());

            if (launchIntent.getCategories() != null) {
            for (String category : launchIntent.getCategories()) {
                intentToLaunchThisActivityFromNotification.addCategory(category);
            }
            }

            // Build PendingIntent used to open this activity from
            // Notification
            PendingIntent pendingIntent = PendingIntent.getActivity(ExpansionFilesActivity.this, 0,
                intentToLaunchThisActivityFromNotification, PendingIntent.FLAG_UPDATE_CURRENT);
            // Request to start the download
            int startResult = DownloaderClientMarshaller.startDownloadServiceIfRequired(this, pendingIntent, SampleDownloaderService.class);

            if (startResult != DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED) {
            // The DownloaderService has started downloading the
            // files,
            // show progress
            initializeDownloadUI();
            return;
            } // otherwise, download not needed so we fall through to
              // starting the movie
        } catch (NameNotFoundException e) {
            Log.e(LOG_TAG, "Cannot find own package! MAYDAY!");
            e.printStackTrace();
        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T12:04:25.330

Android 开发人员指南上的示例如下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // Check if expansion files are available before going any further
    if (!expansionFilesDelivered()) {
        // Build an Intent to start this activity from the Notification
        Intent notifierIntent = new Intent(this, MainActivity.getClass());
        notifierIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                                Intent.FLAG_ACTIVITY_CLEAR_TOP);
        ...
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                notifierIntent, PendingIntent.FLAG_UPDATE_CURRENT);

        // Start the download service (if required)
        int startResult = DownloaderClientMarshaller.startDownloadServiceIfRequired(this,
                        pendingIntent, SampleDownloaderService.class);
        // If download has started, initialize this activity to show download progress
        if (startResult != DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED) {
            // This is where you do set up to display the download progress (next step)
            ...
            return;
        } // If the download wasn't necessary, fall through to start the app
    }
    startApp(); // Expansion files are available, start the app
} 
```

所以首先你看看它是否可用。如果不在服务中下载并且完成后向用户发出有关数据可用的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T00:07:01.827

我正在探索另一种设计：

1.  `public void onDownloadStateChanged(int newState)`当 newstate == STATE_COMPLETED 时，从内部调用 startApp() 。由于某些原因，我被调用了两次 onDownloadState()。我添加了一个标志 downloadStateCompleted 以避免重复调用 startApp()。

2.  在 STATE_COMPLETED 上清除通知。

用户的体验可能会更好，因为下载完成后应用程序会继续（进入 startApp()）。但我不确定这种方法是否违背了下载库的设计和使用方式。在扩展文件文档中，我没有看到从内部调用 startApp() 的任何迹象`onDownloadStateChanged`。

# c# - 保存变量的值

> ID：16066446
> 
> 赞同：-3
> 
> 时间：2013-04-17T17:32:34.803
> 
> 标签：c#, database

我创建了一个程序，例如有一个 openfiledialog 来打开不同的文件路径。但是当我重新启动程序时，数组中的所有文件路径都消失了，所以每次我都需要重新选择这些文件。

有没有解决方案，所以当我关闭程序时它会保存选择的文件，所以当我之后启动程序时，我仍然有这些文件？

我听说数据库可以在那里完成这项工作，现在我对数据库的经验为零，并且有很多不同的方法可以创建一个......

我的想法是将所有值写入 .TXT 文件并在启动时重新读取它，但这似乎是一个混乱的解决方案。

如果您认为数据库是一个完美的解决方案，这些是数据库的要求： - 仅限本地 - 能够保存 +- 50 个变量（int's, strings, bools, ...） - 易于使用（无需安装其他数据库程序当您安装程序本身时）

欢迎所有想法和教程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:37:41.200

我建议您在深入了解序列化之前阅读一些有关[序列化](http://msdn.microsoft.com/en-ca/library/vstudio/ms233843.aspx)的内容，以确保您了解自己在做什么。

我个人会使用[Xml Document](http://msdn.microsoft.com/en-ca/library/system.xml.xmldocument.aspx)或[Binary Writer](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)，因为您只有几件事情要序列化。

> 这些是数据库的要求： - 仅限本地 - 能够保存 +- 50 个变量（整数、字符串、布尔值，...） - 易于使用

对于数据库，您必须安装程序。

如果你想要一个本地数据库，我推荐[MsAccess](http://en.wikipedia.org/wiki/Microsoft_Access)，它在你开始时很容易使用。

如果你想多推一点[MySQL](http://www.mysql.com/)是另一种易于使用的（对于像这样的基本任务），但你必须阅读关于[T-SQL的查询语言](http://www.tsql.info/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:36:51.190

您可以在硬盘上存储各种格式的数据： `JSON, XML, CSV`. 我会去，`JSON`因为它很容易序列化和反序列化到你的内存对象。然而，这个论点还有其他优点和缺点。有关更多信息，请参阅[https://stackoverflow.com/questions/3536893/what-are-the-pros-and-cons-of-xml-and-json](https://stackoverflow.com/questions/3536893/what-are-the-pros-and-cons-of-xml-and-json)。

# image - Three.js 运行时纹理/图像更新

> ID：16066448
> 
> 赞同：17
> 
> 时间：2013-04-17T17:32:37.020
> 
> 标签：image, three.js, textures

我试图通过从 Select Form 元素中选择一个选项来在运行时更改立方体图像。运行代码时，选择后图像会发生变化，但之前的立方体和图像会留在场景中。

更改材质/图像/纹理时如何正确清除/刷新/更新场景。

```
<div id = "container"></div>

<form id = "changesForm">
    Cube Image:
    <br>
    <select id = "cubeImage">
        <option value = "random">Random</option>
        <option value = "image1">First Image</option>
        <option value = "Image2">Second Image</option>
    </select>
    <br>
</form>

<script type = "text/javascript">

window.onload = windowLoaded;

function windowLoaded(){
    if (window.addEventListener){
        init();
        animate();
                             //document.getElementById('container').addEventListener('mousemove', containerMouseover, false);
    window.addEventListener( 'resize', onWindowResize, false );
    var cubeImage = document.getElementById('cubeImage');
    cubeImage.addEventListener("change", changeCubeImage, false);
    }
    else if (window.attachEvent){
        //init();
        //animate();
                  //document.getElementById('container').attachEvent('onmousemove', containerMouseover);
        //window.attachEvent( 'onresize', onWindowResize);
    }

function changeCubeImage(e){
    //e.preventDefault();
    var target = e.target;
    cubeImageCheck = target.value;      
    createCube();               
}

// rest code ..... 

function createCube(){
    //image
    var cubeImg;

    switch (cubeImageCheck){
        case 'random': {
           // should load the 2 images random - to do 
            cubeImg = new THREE.ImageUtils.loadTexture("img1.jpg");
           break;
        }
        case 'image1': {
            cubeImg = new THREE.ImageUtils.loadTexture("image1.jpg");
            break;
        }
        case 'image2': {
            cubeImg = new THREE.ImageUtils.loadTexture("image2.jpg");
            break;
       }
}

cubeImg.needsUpdate = true;

// geometry
var cubeGeometry = new THREE.CubeGeometry(200,200,200);;
// material
var cubeMaterial = new THREE.MeshPhongMaterial({
    map: cubeImg, 
    side:THREE.DoubleSide, 
    transparent: true, 
    opacity:1, 
    shading: THREE.SmoothShading, 
    shininess: 90, 
    specular: 0xFFFFFF
});

cubeMaterial.map.needsUpdate = true;

//mesh
cubeMesh = new THREE.Mesh(cubeGeometry, cubeMaterial);
cubeMesh.needsUpdate = true;
scene.add(cubeMesh);
}

// rest .... 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-17T21:22:19.313

在选择更改时，您可以更新现有的网格纹理，不需要删除或创建新的网格：

```
mesh.material.map = THREE.ImageUtils.loadTexture( src );
mesh.material.needsUpdate = true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-13T19:07:05.153

带加载器的完整示例：

首先，创建您的网格并应用任何材料

```
//Add SPHERE
this.earthMesh = new THREE.Mesh(
  new THREE.SphereBufferGeometry(3, 35, 35),
  new THREE.MeshPhongMaterial()
);
this.scene.add(this.earthMesh); 
```

现在加载您的纹理图像并将其应用于网格材质

```
//LOAD TEXTURE and on completion apply it on SPHERE
new THREE.TextureLoader().load(
  "https://images.pexels.com/photos/1089438/pexels-photo-1089438.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",
  texture => {
    //Update Texture
    this.earthMesh.material.map = texture;
    this.earthMesh.material.needsUpdate = true;
  },
  xhr => {
    //Download Progress
    console.log((xhr.loaded / xhr.total) * 100 + "% loaded");
  },
  error => {
    //Error CallBack
    console.log("An error happened" + error);
  }
); 
```

进度和错误回调是可选的

# linux - 新打开的终端的默认状态是什么

> ID：16066451
> 
> 赞同：1
> 
> 时间：2013-04-17T17:32:42.977
> 
> 标签：linux, terminal, serial-port, posix

我在Linux中有以下功能，

```
#include <termios.h>

struct termios s;
int fd=open("/dev/ttyO0",O_RDWR);
tcgetattr( fd,&s); 
```

中的内容是什么`s`，或者换句话说，我的`ttyO0`终端（串行终端）的状态是什么`fd`。新打开的终端是否有默认状态，因为 fd 现在是全新的。也请让我知道在哪里可以找到相关文件。

# php - 在 php 中使用 google calendar api v3 获取定期事件

> ID：16066452
> 
> 赞同：4
> 
> 时间：2013-04-17T17:32:43.563
> 
> 标签：php, google-calendar-api, recurring-events

我正在使用 google calendar api v3 来获取日历事件。但是如何获取所有重复发生的事件。它只是返回带有一些提示的单个事件，例如：DAILY;UNTIL=20 等。请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-15T00:58:18.937

如果您使用事件：列表 API 方法，请添加`singleEvents=true`参数。从[API 文档](https://developers.google.com/google-apps/calendar/v3/reference/events/list "事件：列表")：

> 单一事件
> 
> 布尔值
> 
> 是否将循环事件展开为实例，只返回单个一次性事件和循环事件的实例，而不返回底层循环事件本身。可选的。默认值为假。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T22:37:53.987

如果事件是重复事件。您需要在 API 中使用事件 ID 调用另一个函数，然后该函数将返回所有实例。

这是什么意思 1) 你从 API 中得到一个正常的偶数列表。2) 然后，如果您找到具有 RecurenceID/Recurrence 的事件，您可以使用 EVENT ID 调用以下命令。您还可以在搜索正常事件时指定您想要的参数（几乎）

获取[https://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId/instances](https://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId/instances)

这是一篇不错的博客文章。 [http://googleappsdeveloper.blogspot.com/2011/12/calendar-v3-best-practices-recurring.html](http://googleappsdeveloper.blogspot.com/2011/12/calendar-v3-best-practices-recurring.html)

谷歌 API 页面位于： [https ://developers.google.com/google-apps/calendar/v3/reference/events/instances](https://developers.google.com/google-apps/calendar/v3/reference/events/instances)

干杯

彼得

# xml - 如何将外部链接添加到 XML 文档（DTD shema）？

> ID：16066453
> 
> 赞同：0
> 
> 时间：2013-04-17T17:32:45.520
> 
> 标签：xml, syntax-error, dtd

首先 - 创建`xml`文件`contract01.xml`并添加一些常用链接 - `&buyer;`.

与此目的是另一个文件`contr01.dtd`。这是根据 DTD Sheme 创建的。

并且需要将链接从更改`&buyer;`为`Vasul Vadultsyv`

但是当`.xml`在浏览器上启动这个文件时，`Chrome`它会显示下一个`errors:`

```
This page contains the following errors:

error on line 4 at column 17: Entity 'buyer' not defined
error on line 6 at column 24: Entity 'buyer' not defined
error on line 7 at column 35: Entity 'buyer' not defined
Below is a rendering of the page up to the first error. 
```

我不明白为什么会这样。
您是否知道如何以`XML(DTD)`正确的方式通过链接来解决这种情况。
我尝试了[Sams Teach Yourself XML in 21 Days (3rd Edition) 中的](https://rads.stackoverflow.com/amzn/click/com/0672325764)这个例子。
也许这可能是一个有点旧的信息。

**代码（contract01.xml）：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE contract SYSTEM "contr01.dtd">
<contract>
    <para1>&buyer; agrees to buy the property defined below on the terms 
            and conditions set forth in this contract.</para1>
    <para2 section="1">&buyer; will take title of the real propirty described below, 
            for which consideration &buyer; agrees to pay... </para2>
</contract> 
```

**代码 (contr01.dtd)**

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT contract (para1, para2)>
<!ELEMENT para1 (#PCDATA)>
<!ELEMENT para2 (#PCDATA)>
<!ATTLIST para2
    selection CDATA #REQUIRED>
<!ENTITY buyer "Vasul Vadultsyv"> 
```

**问题：**

*   如何解决这个麻烦？
*   你能推荐一些好的xml教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:39:39.907

我认为 chrome 不会从您的本地系统加载 DTD。尝试在内部子集中包含实体声明：

```
<!DOCTYPE contract SYSTEM "contr01.dtd" [
<!ENTITY buyer "Vasul Vadultsyv">
]> 
```

也许您应该尝试使用实际的验证器而不是 Web 浏览器来验证您的 XML。（[Xerces](http://xerces.apache.org/)易于使用。）

# parsing - 解析，选择哪种方法？

> ID：16066454
> 
> 赞同：2
> 
> 时间：2013-04-17T17:32:49.140
> 
> 标签：parsing, compiler-construction, grammar, top-down

我正在开发一个编译器（接近 C 的语言），我必须在 C 中实现它。我的主要问题是如何选择正确的解析方法以便在编写编译器时高效。

这是我目前的语法：http: [//img11.hostingpics.net/pics/273965Capturdcran20130417192526.png](http://img11.hostingpics.net/pics/273965Capturedcran20130417192526.png)

我正在考虑制作一个自上而下的解析器 LL(1)，如下所述：http: [//dragonbook.stanford.edu/lecture-notes/Stanford-CS143/07-Top-Down-Parsing.pdf](http://dragonbook.stanford.edu/lecture-notes/Stanford-CS143/07-Top-Down-Parsing.pdf)

考虑到这种语法，它是否是一个有效的选择，因为我知道我首先必须删除左递归规则。您还有其他建议吗？

谢谢你，门蒂内特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:24:53.527

构建解析器的最有效方法是使用特定工具，其存在的目的是构建解析器。它们曾经被称为*编译器编译器*，但现在焦点已转移（扩大）到*语言工作台*，它为您提供更多帮助来构建自己的语言。例如，几乎任何语言工作台都会立即为您的语言提供 IDE 支持和语法突出显示，只需查看语法即可。它们还极大地帮助调试您的语法和语言（您没想到左递归是您最大的问题，是吗？）。

在目前最好的支持和开发的语言工作台中，可以命名：

*   [流氓](http://www.rascal-mpl.org/)
*   [恶搞](http://strategoxt.org/Spoofax)
*   [MPS](http://www.jetbrains.com/mps/)
*   [元编辑+](http://www.metacase.com/)
*   [文本](http://www.eclipse.org/Xtext/)

如果你真的这么想，或者如果你考虑自己编写一个解析器只是为了娱乐和体验，最好的现代算法是[SGLR](http://researchr.org/publication/Vis97.sglr)、[GLL](http://dotat.at/tmp/gll.pdf)和[Packrat](http://bford.info/packrat/)。每一个都是持续半个世纪的算法研究的精髓，所以不要指望在一瞬间完全理解它们，也不要指望你会出现的前几个“修复”会带来任何好处和。但是，如果您确实提出了不错的改进，请不要犹豫与作者分享您的发现或以其他方式发表！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T03:34:59.020

这里有很多答案，但他们把事情弄糊涂了。是的，有 LL 和 LR 解析器，但这不是你的选择。

你有语法。有一些工具可以在给定语法的情况下自动为您创建解析器。可敬的[Yacc](http://dinosaur.compilertools.net/yacc/)和[Bison](http://www.gnu.org/software/bison/)就是这样做的。他们创建了一个 LR 解析器（实际上是 LALR）。还有一些工具可以为您创建 LL 解析器，例如[ANTLR](http://dinosaur.compilertools.net/yacc/)。像这样的工具的缺点是它们不灵活。他们自动生成的语法错误消息很糟糕，错误恢复很困难，而且旧的鼓励你以一种方式分解你的代码——这恰好是错误的方式。正确的方法是让你的解析器吐出一个抽象语法树，然后让编译器从中生成代码。这些工具希望您混合解析器和编译器代码。

当您使用这样的自动化工具时，LL、LR 和 LALR 之间的功率差异确实很重要。你不能“欺骗”来扩大他们的权力。（在这种情况下，强大意味着能够为有效的上下文无关文法生成解析器。有效的上下文无关文法是为每个输入生成唯一的、正确的解析树，或者正确地说它与文法不匹配。）我们目前没有可以为每个有效语法创建解析器的解析器生成器。然而，LR 可以处理比任何其他类型更多的语法。无法处理语法并不是一场灾难，因为您可以以解析器生成器可以接受的形式重写语法。然而，如何做到这一点并不总是很明显，

存在 LL、LALR 和 LR 解析器的原因是很久以前，生成 LR 解析器的工作在时间和内存方面对现代计算机来说都是一项繁重的工作。（注意这是它需要*生成*解析器，这仅在您编写它时发生。生成的解析器运行得非常快。）但那是很久以前的事了。对于中等复杂的语言，生成 LR(1) 解析器所需的 RAM 远少于 1GB，而在现代计算机上则需要不到一秒钟的时间。出于这个原因，您最好使用 LR 自动解析器生成器，例如[Hyacc](http://hyacc.sourceforge.net/)。

另一种选择是您编写自己的解析器。在这种情况下，只有一个选择：LL 解析器。当这里的人说写 LR 很难时，他们低估了情况。人类几乎不可能手动创建 LR 解析器。您可能认为这意味着如果您编写自己的解析器，您将被限制使用 LL(1) 语法。但这并不完全正确。由于您正在编写代码，因此您可以作弊。您可以前瞻任意数量的符号，并且因为在您准备好并准备好之前您不必输出任何内容，因此抽象语法树不必匹配您正在使用的语法。这种作弊的能力弥补了 LL 和 LR(1) 之间失去的所有权力，而且通常还有一些。

手写解析器当然有其缺点。无法保证您的解析器实际上匹配您的语法，或者就此而言不检查您的语法是否有效（即识别您认为的语言）。它们更长，而且更不鼓励您将解析代码与编译代码混合使用。它们显然也只用一种语言实现，而解析器生成器经常用几种不同的语言输出它们的结果。即使他们不这样做，LR 解析表也可以用只包含常量的数据结构（比如 JSON）来表示，而实际的解析器只有 100 行代码左右。但是手写解析器也有好处。因为您编写了代码，所以您知道发生了什么，因此更容易进行错误恢复并生成合理的错误消息。

最后，权衡通常是这样的：

*   对于一次性工作，使用 LR(1) 解析器生成器要好得多。生成器会检查你的语法，节省你的工作量，现代的会直接拆分抽象语法树，这正是你想要的。
*   对于像 mcc 或 gcc 这样高度完善的工具，请使用手写的 LL 解析器。无论如何，您将编写大量单元测试来保护自己，错误恢复和错误消息更容易正确处理，并且它们可以识别更大类别的语言。

我唯一的另一个问题是：为什么是 C？编译器通常不是时间关键代码。[如果你愿意让你的编译器运行得慢一点——例如我自己的Lrparsing](http://www.stuart.id.au/russell/files/lrparsing) ，有非常好的解析包可以让你在 1/2 的代码中完成工作。请记住，这里的“相当慢”的意思是“人类几乎察觉不到”。我想答案是“我正在处理的作业指定 C”。为了给你一个想法，当你放宽要求时，从你的语法到解析树变得多么简单。这个程序：

```
#!/usr/bin/python

from lrparsing import *

class G(Grammar):
  Exp = Ref("Exp")
  int = Token(re='[0-9]+')
  id = Token(re='[a-zA-Z][a-zA-Z0-9_]*')
  ActArgs = List(Exp, ',', 1)
  FunCall = id + '(' + Opt(ActArgs) + ')'
  Exp = Prio(
      id | int | Tokens("[]", "False True") | Token('(') + List(THIS, ',', 1, 2) + ')' |
      Token("! -") + THIS,
      THIS << Tokens("* / %") << THIS,
      THIS << Tokens("+ -") << THIS,
      THIS << Tokens("== < > <= >= !=") << THIS,
      THIS << Tokens("&&") << THIS,
      THIS << Tokens("||") << THIS,
      THIS << Tokens(":") << THIS)
  Type = (
      Tokens("", "Int Bool") |
      Token('(') + THIS + ',' + THIS + ')' |
      Token('[') + THIS + ']')
  Stmt = (
      Token('{') + THIS * Many + '}' |
      Keyword("if") + '(' + Exp + ')' << THIS + Opt(Keyword('else') + THIS) |
      Keyword("while") + '(' + Exp + ')' + THIS |
      id + '=' + Exp + ';' |
      FunCall + ';' |
      Keyword('return') + Opt(Exp) + ';')
  FArgs = List(Type + id, ',', 1)
  RetType = Type | Keyword('void')
  VarDecl = Type + id + '=' + Exp + ';'
  FunDecl = (
      RetType + id + '(' + Opt(FArgs) + ')' +
      '{' + VarDecl * Many + Stmt * Some + '}')
  Decl = VarDecl | FunDecl
  Prog = Decl * Some
  COMMENTS = Token(re="/[*](?:[^*]|[*][^/])*[*]/") | Token(re="//[^\n\r]*")
  START = Prog

EXAMPLE = """\
Int factorial(Int n) {
  Int result = 1;
  while (n > 1) {
    result = result * n;
    n = n - 1;
  }
  return result;
}
"""

parse_tree = G.parse(EXAMPLE)
print G.repr_parse_tree(parse_tree) 
```

产生这个输出：

```
(START (Prog (Decl (FunDecl
  (RetType (Type 'Int'))
  (id 'factorial') '('
  (FArgs
    (Type 'Int')
    (id 'n')) ')' '{'
  (VarDecl
    (Type 'Int')
    (id 'result') '='
    (Exp (int '1')) ';')
  (Stmt 'while' '('
    (Exp
      (Exp (id 'n')) '>'
      (Exp (int '1'))) ')'
    (Stmt '{'
      (Stmt
        (id 'result') '='
        (Exp
          (Exp (id 'result')) '*'
          (Exp (id 'n'))) ';')
      (Stmt
        (id 'n') '='
        (Exp
          (Exp (id 'n')) '-'
          (Exp (int '1'))) ';') '}'))
  (Stmt 'return'
    (Exp (id 'result')) ';') '}')))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:41:49.373

感谢您提供所有这些建议，但我们最终决定使用与此处完全相同的方法来构建自己的递归下降解析器：[http ://www.cs.binghamton.edu/~zdu/parsdemo/recintro.html](http://www.cs.binghamton.edu/~zdu/parsdemo/recintro.html)

实际上，我们更改了语法以删除左递归规则，并且因为我在第一条消息中显示的语法不是 LL(1)，我们使用我们的令牌列表（由我们的扫描仪制作）进行前瞻更远。看起来它工作得很好。

现在我们在这些递归函数中构建了一个 AST。你有什么建议吗？提示？非常感谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:43:13.070

最有效的解析器是 LR 解析器，而 LR 解析器有点难以实现。您可以使用递归下降解析技术，因为它更容易在 C 中实现。

# css - 如何停止媒体查询强制继承 div 上的“左”和“右”css 属性？

> ID：16066457
> 
> 赞同：1
> 
> 时间：2013-04-17T17:32:51.213
> 
> 标签：css, media-queries

我有一个媒体查询和相应的 CSS，它在屏幕右侧为桌面用户设置了一个工具集，在底部为移动用户设置了一个工具集。但是，它会覆盖 CSS 属性并将 0 分配给“左”和“右”。我做错了什么？请看下面萤火虫的截图。

![在此处输入图像描述](https://i.stack.imgur.com/bSlPc.png)

这是我的媒体标签：

```
 /* 
- Binds all layouts together with imports and mediaqueries.
*/

//@import "libs/reset.less";

@import "mediaqueries/global.less";
@import "mediaqueries/desktop.less";
@import "mediaqueries/mobile.less";

@media only screen and (min-width: 480px) {
.mqMobile; /* Use mix-in to make sure that the styles are expanded inside the     mediaquery */
}

@media only screen and (min-width: 992px) {
.mqDesktop; /* Use mix-in to make sure that the styles are expanded inside the    mediaquery */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:45:50.263

For the mobile media query, use `right: auto`. This should override the normal CSS, and switch the `right` property from `0` without actually specifying a specific value. For example:

```
@media only screen and (min-width: 480px) {
    .mqMobile {
        left: 0;
        right: auto;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:49:17.800

您需要在您的 css 文件中添加媒体查询。

*这将针对所有*

```
 #toolset{
      float:left;
    } 
```

*这将针对移动*

```
@media only screen and (max-device-width: 480px) {

     #toolset{
        float:right;
     }

} 
```

参考这个：

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# php - 使用 fb 或 twitter 登录

> ID：16066458
> 
> 赞同：0
> 
> 时间：2013-04-17T17:32:52.207
> 
> 标签：php, facebook, api, twitter

对于我正在从事的项目，我认为拥有使用 facebook/twitter 登录的功能将是有益的。

我有一些设计理论要解决。

当用户第一次使用 twitter 或 facebook 登录网站时，我将获取他们的电子邮件和其他相关信息并将其存储在存储普通注册用户的数据库中。

当他们返回时，他们会再次使用 twitter/fb 登录，它会在数据库中找到信息，不再添加。

如果有人尝试使用这些服务提供的电子邮件地址进行注册，则会向该电子邮件地址发送一封电子邮件以确认是他们，然后他们只需生成一个密码即可让他们使用已存储的信息登录。

我可以将网站上的其他数据链接到我在整个过程中为他们存储的用户 ID。

所以我的问题是这是否是解决这个问题的正确方法？其他人如何使用这些类型的登录 api，然后将它们绑定到站点数据？

我认为这是一个合理的问题，但如果我把它放在错误的部分，请随时移动它！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:45:53.687

well, everything should be written here [http://developers.facebook.com/](http://developers.facebook.com/) also try using php sdk for facebook api, for twitter here [https://dev.twitter.com/](https://dev.twitter.com/)

Create an app in both fb and twitter, take the access token and access token secret

You should download all the files necessary and then configure them as is written in manual, if you will have trouble connecting to them write me a message to my mail(jurijs.nesterovs@inbox.lv) i'll try to help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T03:36:58.893

在我自己之前为我的网站做过这件事。那是脸书/推特/谷歌。我敢打赌那是最好的办法。Google 的 API 是这 3 个 API 中最简单的。Twitter 对我来说很难，因为我不使用 OOP，而且所有的库都是 OOP。

关于您的设计，我的网站不允许用户再次使用相同的电子邮件加入。如果他们通过电子邮件使用 Facebook 加入，当他们尝试使用同一电子邮件使用 twitter 加入时，我会告诉用户他们已经使用 Facebook 注册。

# typo3 - 仅当 FCE 不为空时才显示字段

> ID：16066459
> 
> 赞同：3
> 
> 时间：2013-04-17T17:32:55.103
> 
> 标签：typo3, typoscript, templavoila

我目前正在 Templavoila 映射我的 FCE。用户有一个输入字段，应该输入一个文本。如果未输入文本，则不应显示该元素。因此我有这个打字稿代码：

```
10 = TEXT
10.value.field = field_member_tel
10.wrap = T: <span class="team-member-tel-content"> | </span>
10.if.isTrue.field = field_member_tel 
```

`10.value.field`不管用。我的输出只有`T:`. 如何从字段中获取值？

也许我应该提到这个元素在一个容器中，如果这会有所不同的话。

**编辑：**

这导致相同的结果：

```
10 = TEXT
10.value = {field_member_tel}
10.insertData = 1
10.wrap = T: <span class="team-member-tel-content"> | </span>
10.if.isTrue.field = field_member_tel 
```

这是有效的，但我在这里不需要错字链接：

```
10 = TEXT
10.typolink.parameter.field = field_member_email
10.typolink.title.field = field_member_name
10.wrap = E: <span class="team-member-email-content"> | </span>
10.if.isTrue.field = field_member_email 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:10:57.583

感谢梅雷克。解决方案如下所示：

```
10 = TEXT
10.field = field_member_tel
10.wrap = T: <span class="team-member-tel-content"> | </span>
10.if.isTrue.field = field_member_tel 
```

# python - 在python中使用re.findall输出一组参数而不是每行的一组参数

> ID：16066460
> 
> 赞同：0
> 
> 时间：2013-04-17T17:32:55.207
> 
> 标签：python, for-loop, findall

我曾经`readlines`将文件中的所有句子拆分，我想用它`re.findall`来查找其中的大写字母。但是，我能得到的唯一输出是所有句子的一组大写字母，但我想要文件中每个句子的一组大写字母。

我目前正在使用 for 循环尝试此操作，但我不确定这是否是此任务的最佳操作方案。

输入：

```
Line 01: HE went to the SHOP
Line 02: THE SHOP HE went 
```

这就是我得到的输出：

```
[HE, SHOP, THE] 
```

我想得到输出：

```
[HE, SHOP], [THE, SHOP, HE] 
```

有没有办法做到这一点？我已经把我的编码放在了下面。谢谢！

```
import re, sys

f = open('findallEX.txt', 'r')

lines = f.readlines()

ii=0

for l in lines:
    sys.stdout.write('line %s: %s' %(ii, l))
    ii = ii + 1

for x in l
    re.findall('[A-Z]+', l)
print x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:37:10.067

我认为这样做的方法如下：

```
txt = """HE went to the SHOP
THE SHOP HE went"""

result = []
for s in txt.split('\n'):
    result += [re.findall(r'[A-Z]+', s)]

print(result) # prints [['HE', 'SHOP'], ['THE', 'SHOP', 'HE']] 
```

或使用列表推导（可读性稍差）：

```
txt = """HE went to the SHOP
    THE SHOP HE went"""

print([re.findall(r'[A-Z]+', s) for s in txt.split('\n')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:15:47.637

如果您的数据确实是这种形式（单词完全大写），您甚至不需要正则表达式。[isupper](http://docs.python.org/2/library/stdtypes.html#string-methods#istr.isupper)就是你所需要的。

```
with open('findallEX.txt') as f:
    for line in f.readlines():
        print [word for word in line.split() if word.isupper()] 
```

添加了一个示例。

# ruby - ruby 正则表达式扫描与 .split 方法

> ID：16066462
> 
> 赞同：0
> 
> 时间：2013-04-17T17:32:56.470
> 
> 标签：ruby, regex

我试图建立一种方法，您可以将每个单词的第一个字母大写。我把它写成

```
def titleize(name)
   name.scan(/\w+/) { |x| x.capitalize! }
end 
```

它只是无法正常工作。它不会大写和字母。我做了一些搜索，最终在这里找到了[大写标题](https://stackoverflow.com/questions/14251311/capitalizing-titles)的答案。它被写成

```
def titleize(name)
   name.split(" ").each { |x| x.capitalize! }.join(" ")
end 
```

为什么我的代码根本没有大写？如果我添加了一个 put 语句并将其写为

```
def titleize(name)
   name.scan(/\w+/) { |x| puts x.capitalize! }
end 
```

它会输出带有大写字母的“hi there”，但 => 仍然只是“hi there” 我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:56:14.000

更正的代码：

```
def titleize(name)
   name.scan(/\w+/).each { |x| x.capitalize! }.join(' ')
end

p titleize("ayan roy") #=>"Ayan Roy" 
```

让我们看看为什么你的不工作：

```
def titleize(name)
   name.scan(/\w+/) 
end

p titleize("ayan roy") #=>["ayan", "roy"] 
```

现在你的线路`name.scan(/\w+/) { |x| x.capitalize! }`，`x`被传递为`"ayan", "roy"`。现在看下面：

```
def titleize(name)
   name.scan(/\w+/) { |x| p x.capitalize!  } 
end

p titleize("ayan roy") 
```

*输出：*

```
"Ayan"
"Roy"
"ayan roy" 
```

正如[`String#scan`](http://www.ruby-doc.org/core-2.0/String.html#method-i-scan)所说：

> ***扫描（模式）{|匹配，...| block } → str - 如果给出了 block，scan 将返回`receiver`调用它的那个。两种形式都遍历 str，匹配模式（可能是正则表达式或字符串）。对于每个匹配，都会生成一个结果并将其添加到结果数组或传递给块。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:58:18.853

`scan`返回/产生新字符串，并且永远不会修改源字符串。也许你想要`gsub`。

```
def titleize(name)
  name.gsub(/\w+/) {|x| x.capitalize }
end 
```

或者最好使用 [titleize gem](https://github.com/granth/titleize)中可能更正确的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:36:51.400

您的代码不起作用，因为`#scan`返回`String`作为正则表达式结果的新对象并将它们传递给块。因此，在您的方法中，您基本上采用了这些新对象，通过调用对它们进行了变异，`#capitalize!`但之后从未在任何地方使用它们。

你应该这样做：

```
def titleize(name)
  name.scan(/\w+/).each { |x| x.capitalize! }.join(' ')
end 
```

但这对我来说似乎更具可读性：

```
def titleize2(name)
  name.split(' ').each { |w| w.capitalize! }.join(' ')
end 
```

但是请注意，这些方法不会改变传递的原始参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:54:27.990

的块形式`scan`返回原始字符串，无论您在块中做什么。（我认为您可以通过直接引用它来更改块中的原始字符串，但不建议更改您正在迭代的内容。）相反，做你的`split`变化，而不是`each`, do`collect`后跟`join`：

```
name.split(" ").collect { |x| x.capitalize }.join(" ") 
```

这也适用于包含数字和标点符号的标题。

# ruby - Ruby 迭代器——获取下一项/项

> ID：16066465
> 
> 赞同：0
> 
> 时间：2013-04-17T17:33:07.350
> 
> 标签：ruby, iterator, idioms

在解析文件时，我想查找一行，然后从那里开始解析：

```
inFile.each_line do |line|
    if line == 'User E'
        #start parsing next line
    end
end 
```

你如何建议我做这种事情？我应该回到正常循环吗？如果我使用`break`，有没有办法让迭代器的迭代计数保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:18:26.820

我会去：

```
string = "I want to parse from here to here"
index = string.index(from)
string[index,-1].each_line do |l|
  parse
end 
```

这种方式应该比使用 split 或为每一行添加测试更快。

如果您的文件很大，您可能希望分块获取它。

# c# - 参数不正确。服务器或代码问题？

> ID：16066467
> 
> 赞同：2
> 
> 时间：2013-04-17T17:33:10.657
> 
> 标签：c#, asp.net, iis

谁能告诉我为什么我在项目中的一个页面上收到错误消息“参数不正确”。基本上，这只发生在 IE 中，并且只有一台 1 服务器。我有一个开发、一个测试和一个实时服务器。该链接有一个查询字符串值“city=Québec”。我不确定它是否与特殊的法语 e 字符有关，但此代码适用于开发和测试站点上的所有浏览器，以及实时服务器上的 chrome 和 firefox，但如果我在实时使用 IE服务器，链接将我发送到一个完全白色的页面，上面写着“参数不正确”。我完全不知道为什么。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:09:08.890

我的猜测是 Firefox 会自动对 URL 执行 UTF-8 编码，而 IE 不会。只需将链接更改为 UTF-8 编码版本，就可以了。示例：city=Qu%C3%A9bec

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:37:13.050

仔细检查您的服务器正在发送的 HTTP 标头不会有什么坏处……但显然主要问题出在浏览器和/或客户端 PC 上。

看看这些链接：

*   浏览器语言设置（旧版IE）：

    [http://support.microsoft.com/kb/185035](http://support.microsoft.com/kb/185035)

*   无法创建临时文件：

    [http://www.ehow.com/info_12218814_temporary-internet-files-parameter-incorrect.html](http://www.ehow.com/info_12218814_temporary-internet-files-parameter-incorrect.html)

问：什么版本的 IE 遇到问题？

# api - 如何使用 curl 实用程序根据名称从 Facebook 提取公共个人资料信息

> ID：16066468
> 
> 赞同：0
> 
> 时间：2013-04-17T17:33:12.817
> 
> 标签：api, facebook-opengraph, facebook-authorization

我正在尝试使用 curl 实用程序提取所有公开的个人资料信息，即姓名、生日、位置、性别、家乡、教育、爱好。我正在使用正确的访问令牌，但我只能使用 curl 实用程序根据任何名称搜索来提取 id、name、gender。

任何人都可以帮助我了解使用 curl 实用程序提取 Facebook 中某人共享的所有公共信息的确切步骤。

早期的答复是高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T08:31:31.913

先设置网址：

```
$url = https://graph.facebook.com/USER_ID/?fields=name,email,username,birthday 
```

现在，调用这个函数 curlify

```
$contents = curlify($url); 
```

这是功能：

```
function curlify($url)
{
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($c, CURLOPT_URL, $url);
    $contents = curl_exec($c);
    $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
    curl_close($c);

    return $contents;
} 
```

它将以 JSON 格式返回数据

# apache - 是否可以使用 AWS Beanstalk 的 .ebextensions 配置来安装 mod_pagespeed Apache 模块？

> ID：16066470
> 
> 赞同：9
> 
> 时间：2013-04-17T17:33:19.440
> 
> 标签：apache, amazon-web-services, amazon-elastic-beanstalk, mod-pagespeed

我正在为我的 Django/Python 应用程序使用 AWS Beanstalk，并且我想使用 Google 的 mod_pagespeed 模块。是否可以使用 .ebextensions/.config 文件安装和运行 mod_pagespeed？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T22:30:38.667

下载包

将 rpm 添加到您的 ebextensions 目录中

在 .ebextensions 目录中创建一个 .config 文件

将命令添加到配置文件中，如下所示：

```
container_commands:
    01-command:
        command:        rm -rf /pagespeed/ebextensions

    02-command:
        command:        mkdir -p /pagespeed/ebextensions

    03-command:
        command:        cp -R .ebextensions/* /pagespeed/ebextensions/

    04-command:
        command:        rpm -U /pagespeed/ebextensions/mod-pagespeed.rpm 
```

确保命令如图所示缩进，没有制表符，否则将不起作用。

将“mod-pagespeed.rpm”交换为实际的 rpm 文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T15:43:34.227

好的，所以我想添加查理史密斯的答案。我建议您确保已打开以下各项。

1.  mod_deflate - 你可能想要压缩你的 html、css、xml 和 javascript。
2.  如果您使用 CDN（例如 AWS CloudFront），请在 Apache.conf 中启用重写域过滤器
3.  为图像和 css 设置一个简短的缓存控制，以便当您打开 extend_cache 过滤器时 pagespeed 将能够扩展缓存。
4.  我也喜欢 rewrite_javascript、dns_prefetch、collapse_whitespace 和 combine_javascript 过滤器。

以下是 GitHub Gists，向您展示了它是如何完成的。

*   [apache conf 文件](http://goo.gl/h0D0x)
*   [Beanstalk container_commands](http://goo.gl/192jl)（它们与 Charlie 的基本相同）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-12T20:18:08.340

多谢你们！在您回答@man2xxl 之后，我得到了很好的效果。

您不必弄乱 /pagespeed/extensions 目录，beantalk .ebextensions 配置可以简单地是：

```
packages:
  yum:
    at: []

10_setup_apache_for_mod_pagespeed:
  command: "cp enable_mod_pagespeed.conf /etc/httpd/conf.d"
20_install_mod_pagespeed:
  command: rpm -U -iv --replacepkgs mod-pagespeed-*.rpm
30_clear_mod_pagespeed_cache:
  command: touch /var/cache/mod_pagespeed/cache.flush 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-04T18:36:53.803

您可以通过 URL 安装软件包。因此，您不必下载和分发 RPM。像这样的工作：

```
packages:
    rpm:
        pagespeed: https://dl-ssl.google.com/dl/linux/direct/mod-pagespeed-stable_current_x86_64.rpm
files:
    "/etc/httpd/conf.d/zzzz-pagespeed-options.conf":
        mode: "00644"
        owner: root
        group: root
        encoding: plain
        content: |
            # put your pagespeed configuration here 
```

请注意，我将文件命名为 zzzz-pagespeed-options.conf，以便 httpd 服务器最后加载它。

这样做的另一个优点是您真的不需要包含任何命令或担心复制文件并维护 .ebextensions 文件夹中的文件。您只需更新 .config 文件中的文件条目。

# android - 带有虚线轮廓的按钮 - 9patch with tileMode="repeat"？

> ID：16066477
> 
> 赞同：0
> 
> 时间：2013-04-17T17:33:48.187
> 
> 标签：android, button, background, repeat, nine-patch

我正在尝试完成这种设计。它需要拉伸以适应不同的屏幕，而不是拉伸它应该重复模式，我认为图片非常不言自明。9patch 不会剪掉它，因为它只会拉伸。

![在此处输入图像描述](https://i.stack.imgur.com/2Pwx5.png)

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:28:57.963

做你想做的最简单的方法是使用一个`shape`带有元素集的drawable`stroke`来获得那个破折号图案。

您也可以使用`layer-list`可绘制对象来做到这一点。

# svn - 在不区分大小写的情况下将文件名添加到 svn:ignore

> ID：16066485
> 
> 赞同：3
> 
> 时间：2013-04-17T17:34:16.653
> 
> 标签：svn, svnignore

我想向 a 添加一个文件，`svn:ignore`以便即使文件名以不同的大小写存在，它也总是被忽略。怎么做？

例如：

我想忽略该文件`readme.md`，即使它在任何情况下都存在，例如

```
README.md
readme.MD
Readme.md
......
..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:38:54.230

```
[Rr][Ee][Aa][Dd][Mm][Ee].[Mm][Dd] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:40:42.290

Subversion 允许以下[文件模式](http://svnbook.red-bean.com/en/1.5/svn.advanced.props.special.ignore.html)：（`?`匹配单个字符）、`*`（匹配字符串）和`[...]`（其中 ... 表示要匹配的字符子集）。`[Xx]`因此，您可以使用大写和小写字符的表单项来构建文件名。

# javascript - 查询函数参数表示对象名

> ID：16066499
> 
> 赞同：0
> 
> 时间：2013-04-17T17:35:16.453
> 
> 标签：javascript, styles

当你看到下面的例子时，事情就会清楚了。

```
function AddStyle(prob, value) {
    Elem = document.getElementById('box');
    Elem.style.prob = value;
}

// Here is, when usage.
AddStyle('backgroundColor', 'red'); 
```

正如您在前面的示例中看到的，我们有两个参数（`prob`是属性名称），（`value`是属性的值）。

该示例不起作用，也没有发生错误。我确定这一行`Elem.style.prob = value;`尤其是这里的问题`style.prob`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:36:35.123

变量不是以这种方式解决的。基本上，您的代码正在寻找一个字面上称为`prob`. 您必须使用方括号访问该属性，因为对象是按属性名称索引的。就像是：

```
Elem.style[prob] = value; // Access the property of style equal to the value of prob 
```

这相当于：

```
Elem.style['backgroundColor'] = value; 
```

这相当于：

```
Elem.style.backgroundColor = value; 
```

[演示](http://jsfiddle.net/MUeEJ/)

# c#-4.0 - 在 wp8 和 windows rt 之间发送文件

> ID：16066510
> 
> 赞同：0
> 
> 时间：2013-04-17T17:35:49.063
> 
> 标签：c#-4.0, windows-phone-8, windows-rt

我一直在试图弄清楚是否可以在 wp8 设备和 windows rt（Surface）之间发送文件。有些人似乎写道这是可能的，但他们从未写过如何做到这一点。

所以我想做的是 1\. 在 wp8 设备上使用我的应用程序录制视频并将其保存到隔离存储中（这是我目前所在的位置） 2\. 将视频（大约 20 分钟录制时间）发送到我的windows rt 设备 3\. 在 rt 设备上播放视频。第 1 步和第 3 步很简单，但第 2 步让我抓狂。我一直在考虑使用蓝牙，但由于速度只有 700kbit/s 左右，传输它需要很长时间。Usb 是不行的，因为它在隔离存储中。Skydrive需要3g。所以我在想的是在我的 wp8 设备上开始互联网共享，然后将我的 windows rt 设备连接到它，当它完成时使用 wifi 从 wp8 发送视频以赢得 rt。

有什么办法可以工作还是这是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:25:20.853

如果您的设备在同一个 Wi-Fi 网络中，您可以使用它来发送文件。忽略细节，这可以通过两个步骤来实现：

1.  使设备在网络中相互发现（它们应该知道彼此的 IP 地址）。
2.  实现通过 tcp 套接字发送文件。最简单的方法是将文件分割成一些任意但很小的块，然后一个接一个地发送这些块。

当然，这是一个高级描述，所以如果您在上述主题方面需要进一步的帮助，请随时提出。

**编辑：** [这个 url](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocketlistener.aspx)表示有可能监听传入的网络连接，因为相关类可用于 Windows 应用商店应用程序和 Windows Phone 8。您可以将其用作起点。

**编辑 1：**我很快为您举了一个例子，以证明它有效。刚刚在我的 Lumia 920 上测试过。

```
Windows.Networking.Sockets.StreamSocketListener listener = new Windows.Networking.Sockets.StreamSocketListener();                    
listener.ConnectionReceived += async (_, args) =>
{
    var w = new Windows.Storage.Streams.DataWriter(args.Socket.OutputStream);
    w.WriteInt32(42);
    await w.StoreAsync();
};
await listener.BindEndpointAsync(new Windows.Networking.HostName("127.0.0.1"), "55555");
var clientSocket = new Windows.Networking.Sockets.StreamSocket();
await clientSocket.ConnectAsync(new Windows.Networking.HostName("127.0.0.1"), "55555");

var r = new Windows.Storage.Streams.DataReader(clientSocket.InputStream);
await r.LoadAsync(4);
var res = r.ReadInt32();
clientSocket.Dispose();
System.Windows.MessageBox.Show(res.ToString(), "The Ultimate Question of Life, the Universe, and Everything", System.Windows.MessageBoxButton.OK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:46:03.357

这是您要在代码中尝试做的事情吗？您的平均文件大小是多少 - 我们说的是低分辨率 320x480 还是高清质量 720p+ 视频...？你有什么限制？（时间、连接性等）

您可以设置[Dropbox](http://dropbox.com)进行传输。免费版本的空间有限（如果您共享空间会更大），但如果您根据需要将文件移入和移出 Dropbox，那么您至少可以设置它并忘记它。这仍然需要网络连接，因此如果您需要在旅途中执行此操作，它可能不是一个好的答案。

如果这是您在迪斯尼世界度假或露营或类似活动时需要做的事情，它可能不是一个可行的选择。

# android - 在 Fragment 中使用 PullToRefreshExpandableListView

> ID：16066511
> 
> 赞同：4
> 
> 时间：2013-04-17T17:35:57.490
> 
> 标签：android, android-fragments, expandablelistview, expandablelistadapter, pull-to-refresh

我使用库进行列表视图拉取刷新片段，这是一个非常好的库： [https ://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

现在我想使用**PullToRefreshExpandableListView**。我查看了示例代码，并很好地解释了活动。现在我想在 Fragment 中使用它。但我有问题。下面我在 Activity 中编写了一些由库发布者完成的部分代码，以及我的 Fragment 代码

`PullToRefreshExpandableListView`在 Activity中使用的原始代码：

```
class PullToRefreshExpandableListActivity extends
        ExpandableListActivity {

    //created mAdapter (SimpleExpandableListAdapter)
    //inflated mPullRefreshListView (PullToRefreshExpandableListView)
    //and setListAdapter(mAdapter);
} 
```

一切都好 ！

在我的代码中

片段类 created ，**onCreateView**方法膨胀 PullToRefreshExpandableListView ，创建 mAdapter 如上代码。但是当我想设置适配器时，有我的问题:(

代码 ：

```
mPullRefreshListView.setAdapter(mAdapter); 
```

编译错误：

```
The method setAdapter(ListAdapter) in the type PullToRefreshAdapterViewBase<ExpandableListView> is not applicable for the arguments (SimpleExpandableListAdapter) 
```

所以如果你知道如何`PullToRefreshExpandableListView`在 Fragment 中使用，请帮助，或者请写如何设置适配器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T08:57:28.077

您可以使用 PullToRefreshExpandableListFragment：

[https://github.com/chrisbanes/Android-PullToRefresh/blob/master/extras/PullToRefreshListFragment/src/com/handmark/pulltorefresh/extras/listfragment/PullToRefreshExpandableListFragment.java](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/extras/PullToRefreshListFragment/src/com/handmark/pulltorefresh/extras/listfragment/PullToRefreshExpandableListFragment.java)

# sql - 获取不符合条件的行数

> ID：16066518
> 
> 赞同：1
> 
> 时间：2013-04-17T17:36:14.520
> 
> 标签：sql, select

给定一个包含客户和产品的简单表格（订单详细信息/历史记录之类的东西）：

```
+--------------------+
| customer | product |
+--------------------+
| Smith    | p1      |
| Smith    | p3      |
| Jones    | p1      |
| Jones    | p2      |
| Davis    | p3      |
| Davis    | p9      |
| Brown    | p1      |
| Brown    | p2      | 
| Brown    | p5      |
+----------+---------+ 
```

我想列出所有从未订购过产品*p1*的客户，即上述数据集中的*Davis*。

这是我开始的地方，但当然，它不起作用，我想不出下一步该去哪里：

```
select 
    customer,
    count(*) as c 
where product='p1' 
    and c = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:40:56.897

试试这个：

```
select customer
from MyTable
where customer not in (select customer from MyTable where Product = 'P1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:47:09.973

You can also use this approach

```
 SELECT t.CustomerName
 FROM Table t
 WHERE NOT EXISTS (SELECT 1 
                   FROM Table t2 
                   WHERE t2.CustomerName = t.CustomerName
                   AND t2.ProductName = 'p1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:40:08.760

这是一种使用聚合查询的方法：

```
select customer
from t
group by customer
having sum(case when product = 'p1' then 1 else 0 end) = 0 
```

这为您提供了表中的所有客户。如果您有单独的客户列表，那么您可以使用：

```
select customer
from customerTable
where customer not in (select customer from t where product = 'p1') 
```

# php - 使用 div 标签和 php include

> ID：16066521
> 
> 赞同：0
> 
> 时间：2013-04-17T17:36:22.610
> 
> 标签：php, html

这可能是关于我在自学 html 中没有学到的东西的基本问题。在我的 index.html 中，我有一个 div 调用 php 文件，如下所示：

```
 <div id="portafolio" /> 
<p class="first">Portafolio</p>
<p class="second">Estos son algunos de nuestros proyectos.</p>

<?php include 'portafolio.html'; ?>

<!-end #portafolio ->
</div> 
```

在 php 文件中，有一些 javascript 和更多 div 标签，如下所示：

```
 <script type='text/javascript'>

$(document).ready(function(){

$("img.a").hover(
function() {
$(this).stop().animate({"opacity": "0"}, "slow");
},
function() {
$(this).stop().animate({"opacity": "1"}, "slow");
});

});
</script>

<div class="fadehover">
<img src="images/motmotcoffee/motmotcoffee_1BW.jpg" alt="" class="a" />
<img src="images/motmotcoffee/motmotcoffee_1.jpg" alt="" class="b" />
</div> 
```

我希望从 php 文件中打印出来的 html 包含在其中，其中包含在 CSS 中定义的顶部和底部边框，但它没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:44:15.123

将文件的扩展名更改为`.php`，相应地修改包含语句，这应该可以工作。您的服务器可能未配置为将`.html`文件作为 php 文件处理。

**更新：**

你的`<div id="portafolio" />`标签是自动关闭的，所以里面不会有任何东西......把它改成`<div id="portafolio">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T09:34:02.357

对于可能值得的东西，我无法包括：

[其他 html 标记]

在 include.php 文件中。我测试的任何浏览器都不会呈现包含和内部 div 标签的内容。

这只是一个问题，因为我必须复制一个 fubar 导航数组，这迫使我在 ul 中使用两个 div 来让浮动的 li 自行排列。

# android - 在应用中只调用一次Activity，并在应用被杀死后重新启动时再次显示

> ID：16066523
> 
> 赞同：0
> 
> 时间：2013-04-17T17:36:27.013
> 
> 标签：android, android-activity, sharedpreferences

我正在开发一个应用程序，我必须在应用程序生命周期中只显示一次活动。

我正在做的是`MainActivity.java`我正在调用一个`Activity 1`，所以当我进入我的应用程序之后，每当我回到我的应用程序时都会`MainActivity.java`被`Activity 1`调用。我只想展示一次。

`Activity 1`当用户杀死应用程序并重新启动它时，应该再次显示。

这是我正在做的事情`MainActivity.java`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    startActivity(new Intent(MainActivity.this,
                Activity1.class));

    } 
```

我曾尝试使用以下代码，但它仅在首次安装应用程序时运行一次。

```
private boolean isFirstTime() {
    SharedPreferences preferences = getPreferences(MODE_PRIVATE);
    boolean ranBefore = preferences.getBoolean("RanBefore", false);
    if (!ranBefore) {
        // first time
        SharedPreferences.Editor editor = preferences.edit();
        editor.putBoolean("RanBefore", true);
        editor.commit();
    }
    return !ranBefore;
} 
```

我怎样才能修改上面的代码，以满足我的要求。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:40:52.930

改变

```
return !ranBefore 
```

到

```
return ranBefore 
```

在我看来，你总是返回相同的东西而不是你初始化的变量。此外，您可以将代码`Activity`直接放在该方法中。那么你甚至不必担心一个`return`声明。在您更改值后，它将永远不会再次运行它`SharedPreferences`

**编辑**

您可以在中将您的`SharedPreferences`值设置为 false `onCreate()`。`Activity`如果您在去另一个地方时没有完成您的工作，并且如果它是您的主要工作`Activity`，那么您可能永远不想完成它，直到您退出应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:03:12.497

你应该`ranBefore`在`onDestroy`

```
@Override
public void onDestroy() 
{
    SharedPreferences preferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = preferences.edit();
    editor.putBoolean("RanBefore", false);
    editor.commit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:05:30.473

我已经使用`SharedPreferences`. 我所做的是在 Splash 我输入了一些值`SP`，并在`MainActivity`我检查了，如果值匹配显示活动，否则不要打开对话框。而且`keyCodeBack()`，我已经清除了`SP`，这有助于我满足我的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T06:07:48.750

使用共享首选项..

要终止活动，请在 onClick() 处使用 class.finish() ..

# jquery - 无法将 MobiPick 日期选择器集成到已经具有 data-role="page" 的 div 的自定义表单中

> ID：16066525
> 
> 赞同：0
> 
> 时间：2013-04-17T17:36:31.327
> 
> 标签：jquery, date, mobile

我对 Javascript 和 jQuery 非常陌生，但想将下面漂亮的日期选择器集成到我们的表单中。

[http://mobipick.sustainablepace.net/demo-advanced.html](http://mobipick.sustainablepace.net/demo-advanced.html)

故障码：

```
$(document).on( "pagecreate", "#demo", function() {
var picker = $( "input[type='text']", this );
picker.mobipick();
});

<div id="demo" data-role="page" data-add-back-btn="true">
<div data-role="content" >
<div class="demo">
<input type="text" />
</div>
</div>
</div> 
```

问题是它只在 pagecreate 上运行函数并传递我不知道实际传递的“this”。我的表单已经有一个主表单`<div data-role="page">`，当我添加另一个 div 时`<div id="demo" data-role="page">`，第二个 div 不显示。如果我将其更改为`<div id="demo" data-role="subpage">`then 它会显示，但上面的功能不会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:52:04.670

其他人发布了这个完美运行的代码。

Javascript

> ```
>  $(document).ready(function () {
>             var picker = $("#StartDate", this);
>             picker.mobipick();
>             picker.bind("change", function () {
>                 var date = $(this).val();
>             // formatted date                   
>             var dateObject = $(this).mobipick("option", "date");
>             });
>             }); 
> ```

html

```
<input name="StartDate" id="StartDate"  type="text" value=""/> 
```

# django - 从模型扩展的 Django 表单不起作用

> ID：16066531
> 
> 赞同：0
> 
> 时间：2013-04-17T17:36:52.300
> 
> 标签：django, django-models, django-forms

我想创建一个从我的模型继承的表单，但它不起作用，我不知道为什么。

它不会抛出任何异常，只是不显示指定的字段。

模型.py

```
class Picture(models.Model):
    picture = models.ImageField(upload_to='/')
    name = models.CharField(max_length=30)
    owner = models.ForeignKey(Artist)
    date = models.DateField()
    description = models.CharField(max_length=1000)
    width = models.IntegerField(max_length=9)
    height = models.IntegerField(max_length=9)
    sold = models.BooleanField(default=False)
    added = models.DateTimeField(auto_now_add=True)
    active = models.BooleanField(default=False)
    genres = models.ManyToManyField(Genre)
    def __unicode__(self):
        return u'%s from %s by %s' % (self.name, self.date, self.owner) 
```

表格.py

```
class PictureForm(forms.Form):
    class Meta:
        model = Picture
        fields = ('picture', 'name', 'date', 'description', 'width', 'height') 
```

我错过了什么，还是有一个普遍的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:42:14.450

您正在使用`forms.Form`not `forms.ModelForm`：

```
class PictureForm(forms.ModelForm):
    class Meta:
        model = Picture
        fields = ('picture', 'name', 'date', 'description', 'width', 'height') 
```

# c# - 无法在 Visual C# 2010 Express 中访问构建配置管理器或构建配置

> ID：16066536
> 
> 赞同：6
> 
> 时间：2013-04-17T17:37:07.173
> 
> 标签：c#, visual-studio-2010, visual-studio, xna, xna-4.0

# 全文

通常，当我安装 Visual C# 2010 Express 时，我要做的第一件事就是切换到专家设置。这使我可以访问构建配置和相应的管理器。这个最新的安装似乎行为不端。

我创建的第一个项目是 XNA 4.0 (Refresh) 项目。我导入了一些旧代码，切换到专家设置，并确认我能够访问构建配置管理器和构建配置工具栏。但是，当我打开项目属性并切换到“构建”选项卡时，找不到正常的“配置”和“平台”下拉菜单。此外，即使在工具栏/管理器中将调试选择为活动状态，也清楚地使用了发布设置。

我尝试了从重新启动 Visual Studio 到手动编辑 .csproj XML 的所有方法——顺便说一下，将 Debug 标记为活动配置：而不是 Release。有趣的是，无论构建配置的顺序如何，如果 Release 存在，那将是项目属性中*实际*活动的配置（不是从工具栏的下拉列表中选择的）。请记住，由于某种原因，通常出现在项目属性页面上的下拉列表不存在。

运气不好，我在一个单独的解决方案中创建了两个新项目：一个控制台应用程序和一个 WinForms 应用程序。这一次，构建配置管理器甚至没有出现在构建菜单中，并且工具栏中的下拉菜单被禁用，就好像我什至没有打开解决方案一样。

我已经搜索和搜索，但我找不到这种行为的解释或解决方案。

注意：我确实可以通过 MSDN 访问 Visual Studio 2010，因此如有必要，升级是一个可行的解决方案。

# tl;博士

是的，我已切换到专家设置。

*   Windows 8 专业版，最新
*   新鲜的 Visual C# 2010 Express 安装
*   XNA 4.0 刷新

## 问题

1.  新 XNA 项目：
    *   切换构建配置对实际配置没有影响；尽管另有说明，但它总是卡在 Release 上。
    *   在项目属性 -> 构建中，构建配置/平台的下拉列表不存在。
2.  新的控制台/WinForms 项目：
    *   构建配置管理器不在构建菜单中。
    *   构建配置工具栏禁用了下拉菜单，并且没有选择任何内容。

## 已经尝试过

*   删除 Release 配置
    效果：切换到 Debug

*   重新创建发布配置
    效果：删除时切换到调试，然后在重新创建时返回发布

*   在文本编辑器中摆弄 .csproj XML
    效果：无；一开始看起来不错

*   重新创建所有配置
    效果：总是登陆发布

*   重新启动 Visual C# Express 2010
    效果：无

*   摆弄设置
    效果：无

*   重新加载项目
    效果：无

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T03:12:24.100

1.  打开菜单：`Tools`-> `Options`...
2.  选择`Projects and Solutions`
3.  查看`Show advanced build configurations`

我不记得过去需要启用此功能，尽管我总是必须切换到专家设置。再说一次，我已经使用 Visual Studio 2012 有一段时间了，所以我可能只是忘记了。我也很少使用 Express，所以这可能是 Express 和完整版本之间的差异。

# javascript - Javascript 画布交互式图表 - 如何让我的代码更短

> ID：16066541
> 
> 赞同：2
> 
> 时间：2013-04-17T17:37:28.963
> 
> 标签：javascript, html, canvas

我正在尝试自学 javascript 和 HTML5，（刚刚开始），并且对于画布的一些练习，我试图将[这个图表](http://www.stefan.gr/dhammachart-bigger.gif)变成画布上的交互式图表，单击一个单词会打开下面的一些树，并且很快。我不能发布它的图片，因为我在这里太新了，抱歉。

问题是，我所做的代码都按照我的意愿工作（耶！），但它已经很长了，并且要映射图表的其余部分（到目前为止我只完成了一小部分）它将是 JavaScript 中的战争与和平。所以我想知道是否有人可以看看我的代码并告诉我如何让它更简洁？

我在谷歌上搜索过，并查看了有关 javascript 的书籍，但没有任何反应。我也将尝试使用 SVG 进行练习，并怀疑它可能更有效，但由于我特别想学习 javascript+canvas，我真的希望这种方式也能很好地工作。提前感谢您的帮助。

这是我的代码：

```
onload = BDS;
var called = false;

function BDS() {

var c = document.getElementById("canvas");
var ctx = c.getContext("2d");

ctx.font = "bold 48px Arial";
ctx.fillStyle = "#F63";
ctx.textAlign = "center";
var B = "Buddha          ";
var D = "Dhamma          ";
var S = "Sangha";
ctx.fillText(B     +     D      +    S, 500, 100);

}

function q(event) {
event = event || window.event;

var canvas = document.getElementById("canvas"),
x = event.pageX - canvas.offsetLeft,
y = event.pageY - canvas.offsetTop;

//alert(x + ' ' + y);
if (x < 295 && x > 120 && y > 60 && y < 110){
    called = false;
    buddha();
}

if (x < 600 && x > 400 && y > 60 && y < 110) {
    called = true;
    dhamma();   
}

if (x < 880 && x > 710 && y > 60 && y < 110) {
    called = false;
    sangha();
}

if (called === true && x < 330 && x > 140 && y > 260 && y <300) {
    alert("yay"); 
}

}

function buddha() {
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
ctx.clearRect(0, 0, 1000, 750);

ctx.beginPath();
ctx.moveTo(185, 120);
ctx.lineTo(500, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.font = "bold 48px Arial";
ctx.fillStyle = "#F63";
ctx.textAlign = "center";
var B = "Buddha          ";
var D = "Dhamma          ";
var S = "Sangha";
ctx.fillText(B     +     D      +    S, 500, 100);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Accomplished", 500, 300);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Fully Enlightened", 500, 350);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Perfect in True Knowledge and Conduct", 500, 400);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Sublime", 500, 450);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Knower of Worlds", 500, 500);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Incomparable Leader of Persons to be Tamed", 500, 550);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Teacher of Gods and Humans", 500, 600);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "center";
ctx.fillText("Blessed", 500, 650);
}

function sangha(){
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
ctx.clearRect(0, 0, 1000, 750);

ctx.beginPath();
ctx.moveTo(800, 120);
ctx.lineTo(270, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.moveTo(840, 120);
ctx.lineTo(680, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.font = "bold 48px Arial";
ctx.fillStyle = "#F63";
ctx.textAlign = "center";
var B = "Buddha          ";
var D = "Dhamma          ";
var S = "Sangha";
ctx.fillText(B     +     D      +    S, 500, 100);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "right";
ctx.fillText("Monastic Sangha     ", 500, 300);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "right";
ctx.fillText("Nuns                ", 500, 350);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "right";
ctx.fillText("Monks               ", 500, 400);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "right";
ctx.fillText("Novice Nuns         ", 500, 450);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "right";
ctx.fillText("Novice Monks        ", 500, 500);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#0C0";
ctx.textAlign = "left";
ctx.fillText("     Noble Sangha", 500, 300);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "left";
ctx.fillText("          Arahants", 500, 350);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "left";
ctx.fillText("      Non-Returners", 500, 400);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "left";
ctx.fillText("     Once-Returners", 500, 450);

ctx.font = "bold 36px Arial";
ctx.fillStyle = "#FCF";
ctx.textAlign = "left";
ctx.fillText("     Stream-Enterers", 500, 500);
}

function dhamma() {
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
ctx.clearRect(0, 0, 1000, 750);

ctx.beginPath();
ctx.moveTo(500, 120);
ctx.lineTo(235, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.moveTo(505, 120);
ctx.lineTo(420, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.moveTo(510, 120);
ctx.lineTo(620, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.moveTo(515, 120);
ctx.lineTo(805, 250);
ctx.strokeStyle = "#FCF";
ctx.lineWidth = 5;
ctx.stroke();

ctx.font = "bold 48px Arial";
ctx.fillStyle = "#F63";
ctx.textAlign = "center";
var B = "Buddha          ";
var D = "Dhamma          ";
var S = "Sangha";
ctx.fillText(B     +     D      +    S, 500, 100);

ctx.font = "bold 40px Arial";
ctx.fillStyle = "#09F";
ctx.textAlign = "center";
ctx.fillText("Suffering    Origin    Cessation    Path", 500, 300);
} 
```

# c# - 为 ASP.Net 开发服务器启用目录浏览

> ID：16066544
> 
> 赞同：2
> 
> 时间：2013-04-17T17:37:44.177
> 
> 标签：c#, asp.net, asp.net-development-serv

我想在我的 Asp.Net MVC 应用程序中提供目录列表/浏览。所以我修改了web.config：

```
<system.webServer>
    <directoryBrowse enabled="true" />
</system.webServer> 
```

它在 IIS 或 IIS Express 下运行良好。但是在 VS Development Server 上它给出了`HTTP 404 The resource cannot be found.`

有什么可以让它发挥作用吗？

# php - Preg_replace 将第二个参数添加到 php 函数

> ID：16066545
> 
> 赞同：0
> 
> 时间：2013-04-17T17:37:42.480
> 
> 标签：php, preg-replace

当谈到 preg_replace 功能时，我仍然完全迷失了，所以如果有人帮助我完成这个功能，我会非常高兴。

我有一个字符串，其中可以包含对函数的调用，例如：`Published("today")`我需要通过正则表达式将其转换为`Published("today", 1)`

我基本上需要通过正则表达式向函数添加第二个参数。我不能使用 str_replace 因为第一个参数可以是（必须是）字母数字文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:43:41.407

```
$string = 'Published("today")';
$foo = preg_replace('/Published\("(\w+)"\)/', 'Published("$1", 1)', $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:47:07.373

[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)应该做我认为的工作。

```
<?php
$string = 'Published("today"); Published("yesterday"); Published("5 days ago");';

$callback = function($match) {
    return sprintf('%s, 1', $match[0]);
};

$string = preg_replace_callback(
    '~(?<=Published\()"[^"]+"(?=\))~',
    $callback,
    $string
);

echo $string;

/*
    Published("today", 1); Published("yesterday", 1); Published("5 days ago", 1);
*/ 
```

# ios - 如何使用 class-dump 查找您的 iOS 应用程序在何处使用私有内容

> ID：16066548
> 
> 赞同：1
> 
> 时间：2013-04-17T17:37:54.217
> 
> 标签：ios, iphone-privateapi

我无法弄清楚我应该如何使用`class-dump`来查看我的应用程序访问私有内容的位置。我收到错误消息“应用程序引用了 Payload/My App.app/My App: locale_charset 中的非公共符号”。但是，我认为最好知道我的应用程序在哪里访问私有方法或其他私有内容。

我已经看到[了这个答案](https://stackoverflow.com/a/1157414/1292230)，但它根本没有解释如何使用它。[我已经尝试查找如何使用它，但除了文档](http://stevenygard.com/projects/class-dump/)之外我找不到任何有用的东西。

如何使用它在我的应用程序中搜索访问的私有内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:41:00.837

`class-dump`提供由可执行文件或框架定义的所有方法的列表（嗯，或多或少；有一些方法可以存在，但不会出现，但`class-dump`会得到其中的大部分）。可以将`class-dump`Apple 框架的输出与扫描公共标头进行比较，以找到私有方法列表，然后扫描您的代码以查找这些私有方法。这是很多工作，你肯定需要一个工具来完成它。

至少有一个工具说它有帮助，称为[App-Scanner](https://github.com/ChimpStudios/App-Scanner)。我还没有尝试过。我不知道这个领域有任何其他工具。

也就是说，当然，偶然使用它们有点奇怪。您通常必须采取一些技巧才能在不产生警告的情况下调用它们（当然，您不会发出警告，因为那太疯狂了；如果是，请修复您的警告，您会找到私有 API）。如果您在某些地方禁止了未知选择器警告，或者您使用类别来声明 Apple 私有方法，那么请查找并删除它们。当你说“我在做这件不公开的事情，我在欺骗编译器让我做这件事”时，一定有一个时间点。一般不会偶然发生。

# ckeditor - ckeditor 如何允许 .insertHtml(" ")

> ID：16066556
> 
> 赞同：3
> 
> 时间：2013-04-17T17:38:26.493
> 
> 标签：ckeditor

```
var currentDialog = CKEDITOR.dialog.getCurrent();
currentDialog._.editor.insertHtml("<customTag myAttr='var'></customTag>"); 
```

抛出错误，`TypeError: Cannot read property 'isBlock' of undefined`

如果我尝试`.insertHtml("<span>hello</span>")`它就可以了。

如何更改 ckeditor 以允许我通过指定我自己的自定义 html 标签`.insertHtml()`？我很想把它改成类似`<span class='custom'...`或类似的东西，但我不得不处理遗留的 CMS 文章。使用最新的ckeditor。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:36:37.980

1.  您需要修改`CKEDITOR.dtd`对象，以便编辑器知道此标记并正确解析 HTML 并处理 DOM：

    ```
    CKEDITOR.dtd.customtag = { em:1 };        // List of tag names it can contain.
    CKEDITOR.dtd.$block.customtag = 1;        // Choose $block or $inline.
    CKEDITOR.dtd.body.customtag = 1;          // Body may contain customtag. 
    ```

2.  [您需要在Advanced Content Filter](http://docs.ckeditor.com/#!/guide/plugin_sdk_integration_with_acf)中允许此标记及其样式/属性/类：

    ```
    editor.filter.allow( 'customtag[myattr]', 'myfeature' ); 
    ```

不幸的是，由于某些缓存，在某些情况下您无法在加载 CKEditor 后修改 DTD 对象——您需要在创建它时对其进行修改。所以要做到这一点：

1.  克隆[CKEditor 存储库](https://github.com/ckeditor/ckeditor-dev)或[CKEditor 预设存储库](https://github.com/ckeditor/ckeditor-presets)。

2.  修改[core/dtd.js](https://github.com/ckeditor/ckeditor-dev/blob/master/core/dtd.js)代码。

3.  并按照以下说明构建您的缩小包`README.md`- 唯一的要求是 Java（抱歉 - Google Closure Compiler :P）和 Bash。

**PS。**插入未知元素时不应抛出该错误，因此我报告了[http://dev.ckeditor.com/ticket/10339](http://dev.ckeditor.com/ticket/10339)并解决了此不便[http://dev.ckeditor.com/ticket/10340](http://dev.ckeditor.com/ticket/10340)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T09:17:54.357

我结合使用 createFromHtml() 和 insertElement() 解决了这个问题

```
CKEDITOR.replace('summary', { ... });

var editor = CKEDITOR.instances.summary; 
editor.on('key', function(ev) {
    if (ev.data.keyCode == 9) { // TAB
        var tabHtml = '<span style="white-space:pre">&#09;</span>';
        var tabElement = CKEDITOR.dom.element.createFromHtml(tabHtml, editor.document);
        editor.insertElement(tabElement);
    }
} 
```

# windows - Windows 上的 Git - 如何在 Linux 上使用远程仓库进行身份验证

> ID：16066561
> 
> 赞同：2
> 
> 时间：2013-04-17T17:38:37.943
> 
> 标签：windows, git, ssh

由于基于 HTTP 的 Windows 上的 Git 存储库存在一些严重问题，我们正在将 Git“服务器”迁移到 Linux。

假设我已经安装了适用于 Windows 的 msysgit 和 Putty，当我克隆、拉取和推送时，我将如何验证 SSH 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:59:09.657

在 SSH 的情况下：

*   在服务器上，您需要允许使用公钥和私钥进行身份验证，您可以谷歌如何做到这一点，例如[http://shapeshed.com/setting_up_git_for_multiple_developers/](http://shapeshed.com/setting_up_git_for_multiple_developers/)
*   在客户端上，只需将您的私钥放入`.ssh`Windows 主页的文件夹中，例如`C:\Users\Name\.ssh`，就像在 unix 上一样。

您仍然可以使用 HTTP，它会 (1) 始终要求输入用户名和密码，或者 (2) 您也可以将用户名和密码放入 URL：`https://username:password@git.mydomain.com/...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:16:14.290

[此页面](http://support.beanstalkapp.com/customer/portal/articles/68161-how-to-install-git-in-windows-using-putty)包含有关使用 PuTTy 进行 Git 公钥身份验证的所有内容。简而言之：

*   使用 puttygen 生成密钥对
*   将公钥放入服务器
*   在本地计算机中，将 GIT_SSH 环境变量设置为指向 plink.exe
*   运行腻子选美并在那里加载你的私钥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T22:45:36.940

我建议完成[本教程](http://nathanj.github.com/gitguide/index.html)。

需要注意的是它谈论的是 github，所以告诉服务器你的 SSH 密钥的故事是不同的。

不同的是您打算如何管理您的开发人员。“问题”是 SSH 与真正的远程（我的意思是服务器端）用户一起运行，这些用户必须有常规的 Unix 系统帐户。

如果您只有少数开发人员，这没关系。`devel`然后，您只需将它们全部添加到一个特殊组（`git init --bare --shared=group`例如`devel`目录下的存储库，该目录设置了[“组粘性位”](https://stackoverflow.com/a/4832402/720999)并属于该组`devel`）。

要在这种设置中将开发人员密钥的公共部分分发到服务器，您必须将该密钥部分（来自开发人员的`id_rsa.pub`文件，它是 ASCII）复制并粘贴到文件`/home/developer/.ssh/authorized_keys`文件中。如果该文件不存在，请创建它。如果密钥是在安装了 OpenSSH 客户端的机器上生成的，您可以使用该`ssh-copy-id`程序在一个步骤中传输密钥。

这可能会变得一团糟，因此您可能会考虑实施一个虚拟化 Git 用户的解决方案（就像 github 那样）。有很多可供选择：

*   [`gitolite`](https://github.com/sitaramc/gitolite)- 据说是最流行的解决方案。没有多余的装饰，使用专门的管理员 Git 存储库进行管理，该存储库包含开发人员的公钥和描述存储库和权限的配置文件。普通 Perl，可作为软件包安装在大多数明智的发行版上。
*   [`gitlab`](http://gitlab.org/)— 一个交钥匙的多合一解决方案。用 Ruby 编写，因此您可能会面临维护噩梦。
*   [`gitblit`](http://gitblit.com/)— 另一个用纯 Java 编写的一体化解决方案（请注意，它不调用 vanilla Git，而是使用纯 Java Git 层 - JGit）。

# ajax - 转义片段重定向 htaccess

> ID：16066562
> 
> 赞同：1
> 
> 时间：2013-04-17T17:38:38.680
> 
> 标签：ajax, .htaccess, redirect

我的网站 ( `thedutchtilt.com`) 使用 AJAX。

现在我知道，每当 Google 尝试抓取页面时，例如 #!stories/component_74511，它都会将该 url 转换为`thedutchtilt.com/?_escaped_fragment_=stories/component_74511`.

我的问题是，如何格式化 htaccess 重定向，以便上述站点映射到另一个站点？

我试过了

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=stories/component_74511
RewriteRule ^$ http://www.thedutchtilt.com/full.html? [R=302,L] 
```

但尝试这个只是给出`http://thedutchtilt.com/?_escaped_fragment_=stories/component_74511`，这是我的主页。

我现在真的很困惑，似乎没有任何工作（叹气）。

卡提克

**当前的.htaccess：**

```
RewriteEngine on
RewriteOptions inherit

# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .php

RedirectMatch ^/$ /index.html

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=stories/component_74511     
RewriteRule ^$ thedutchtilt.com/full.html? [R=302,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:40:04.667

感谢您提供 .htaccess 代码。问题是你的这一`RedirectMatch`行：

```
RedirectMatch ^/$ /index.html 
```

将其注释掉，然后重试。`index.html`应使用此 DirectoryIndex 指令默认加载：

```
DirectoryIndex index.html 
```

# jquery - jQuery MovingBoxes 添加不透明度过渡

> ID：16066563
> 
> 赞同：0
> 
> 时间：2013-04-17T17:38:39.853
> 
> 标签：jquery

这都是关于这个 jQuery 插件的：

[https://github.com/CSS-Tricks/MovingBoxes](https://github.com/CSS-Tricks/MovingBoxes)

它基本上滚动内容，也能够调整非活动内容的大小。毕竟它真的很好而且很灵活，我想添加将非活动面板淡化为给定不透明度并将活动面板淡化为完全不透明度的功能。

有一些方法，即在这里找到：

[https://github.com/CSS-Tricks/MovingBoxes/issues/69](https://github.com/CSS-Tricks/MovingBoxes/issues/69)

但无论如何，

这些是 CSS3-Solutions 和 image-overlay-solutions ，由于三个原因，它们都是不切实际的：

1.) CSS3 只是正确地动画图像的淡出，但当前图像没有淡入，因为当前类是在动画完成后应用的。

2.) 并非所有浏览器，当然也不是所有移动浏览器都支持 css3 转换

3.) 带有图像叠加的解决方案更多的是一种解决方法，而且不是很灵活。

所以：

滚动时不能以某种方式包含 jQuery.animate: Opacity 吗？将当前图像淡化为完全不透明并将“其他”图像淡出？

欢迎任何帮助。我用移动盒子的 JavaScript 试试运气，但它似乎比我想象的要复杂......

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:18:28.413

我自己找到的。对于淡入零编辑此部分：

```
// Resize panels to normal
    base.returnToNormal = function(num, time){
        var panels = base.$panels.not(':eq(' + (num - base.adj) + ')').removeClass(o.currentPanel);
        if (o.reducedSize === 1) {
            panels.css({ width: base.regWidth }); // excluding fontsize change to prevent video flicker
        } else {
            panels.stop(true,false).animate({ width: base.regWidth, fontSize: o.reducedSize + 'em' , opacity: 0 }, (time === 0) ? 0 : o.speed);
        }
    }; 
```

并再次淡入完全不透明编辑此部分：

```
// Zoom in on selected panel
        base.growBigger = function(num, time, flag){
            var panels = base.$panels.eq(num - base.adj);
            if (o.reducedSize === 1) {
                panels.css({ width: base.curWidth }); // excluding fontsize change to prevent video flicker
                // time delay prevents click outer panel from following links - fixes issue #67
                setTimeout(function(){
                    base.completed(num, flag);
                }, (time === 0) ? 0 : o.speed);
            } else {
                panels.stop(true,false).animate({ width: base.curWidth, fontSize: '1em', opacity: 1 }, (time === 0) ? 0 : o.speed, function(){
                    // completed event trigger
                    // even though animation is not queued, trigger is here because it is the last animation to complete
                    base.completed(num, flag);
                });
            }
        }; 
```

照顾那里的“动画”部分：这是关键。

# android - 非父 java.lang.NullPointerException

> ID：16066565
> 
> 赞同：0
> 
> 时间：2013-04-17T17:38:44.953
> 
> 标签：android, nullpointerexception

我正在开发一个 android 应用程序，它需要我`java.lang.NullPointerException`，我不知道可能是什么原因。在以下几行中，您将获得`logcat`导致此崩溃的方法（第 151 行）。

```
04-17 18:56:19.729: E/AndroidRuntime(31291): FATAL EXCEPTION: main
04-17 18:56:19.729: E/AndroidRuntime(31291): java.lang.NullPointerException
04-17 18:56:19.729: E/AndroidRuntime(31291):    at tomorrowapps.com.tweeet.Main.DrawViewUp(Main.java:151)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at tomorrowapps.com.tweeet.Main.onOptionsItemSelected(Main.java:340)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.app.Activity.onMenuItemSelected(Activity.java:2548)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:980)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.view.View$PerformClick.run(View.java:17359)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.os.Handler.handleCallback(Handler.java:725)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.os.Looper.loop(Looper.java:137)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at android.app.ActivityThread.main(ActivityThread.java:5259)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-17 18:56:19.729: E/AndroidRuntime(31291):    at dalvik.system.NativeStart.main(Native Method) 
```

这里是导致异常的方法（第 151 行）

```
private void DrawViewUp() {
    // TODO Auto-generated method stub
    if(adview.getVisibility()==View.VISIBLE){
        drawview.bringToFront();                   //This is line 151
        adview.setVisibility(View.INVISIBLE);
        stroke.setVisibility(View.VISIBLE);
        rojo.setVisibility(View.VISIBLE);
        verde.setVisibility(View.VISIBLE);
        azul.setVisibility(View.VISIBLE);
        negro.setVisibility(View.VISIBLE);
    } else if (adview.getVisibility()==View.INVISIBLE){
        et1.bringToFront();
        adview.setVisibility(View.VISIBLE);
        stroke.setVisibility(View.INVISIBLE);
        rojo.setVisibility(View.INVISIBLE);
        verde.setVisibility(View.INVISIBLE);
        azul.setVisibility(View.INVISIBLE);
        negro.setVisibility(View.INVISIBLE);
    }
} 
```

我还有一个方法，其中包含在 onCreate 方法上运行的所有 findViewById：

```
private void findViewById() {
    // TODO Auto-generated method stub
    et1=(EditText)findViewById(R.id.et1);
    tv1=(TextView)findViewById(R.id.tv1);
    views=(FrameLayout)findViewById(R.id.capture);
    drawview=(DrawView)findViewById(R.id.drawview);
    adview=(AdView)findViewById(R.id.adView);
    stroke=(SeekBar)findViewById(R.id.stroke);
    rojo=(ImageView)findViewById(R.id.rojo);
    verde=(ImageView)findViewById(R.id.verde);
    azul=(ImageView)findViewById(R.id.azul);
    negro=(ImageView)findViewById(R.id.negro);
} 
```

所以有人知道为什么会崩溃吗？

编辑：我删除了我所有的代码，是不必要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:02:30.663

问题是在 DrawView 类中，第二个和第三个构造函数在`super()`构造函数的其他变量中没有，如下例所示：

```
public class DrawView extends View {

    public DrawView(Context context) {
    super( context);
    }

    public DrawView(Context context, AttributeSet attrs) {
    super( context, attrs ); //first problem
    }

    public DrawView(Context context, AttributeSet attrs, int defStyle) {
    super( context, attrs, defStyle ); //second problem
    }

} 
```

使用解决：

[findViewById() 为布局 XML 中的自定义组件返回 null，而不是其他组件](https://stackoverflow.com/questions/1691569/findviewbyid-returns-null-for-custom-component-in-layout-xml-not-for-other-co)

[http://igoesolutions.com/blog/2011/06/20/custom-view-is-not-using-the-2-or-3-argument-view-constructors-xml-attributes-will-not-work/](http://igoesolutions.com/blog/2011/06/20/custom-view-is-not-using-the-2-or-3-argument-view-constructors-xml-attributes-will-not-work/)

# java - Microsoft JET 数据库引擎的数据库驱动程序

> ID：16066566
> 
> 赞同：2
> 
> 时间：2013-04-17T17:38:47.970
> 
> 标签：java, database, jdbc, jet

我目前正在寻找在我的 Java 程序中编写一个导入器来从包含 JET 数据库的文件中导入数据，但到目前为止，我正在寻找这种格式的 JDBC 驱动程序（或者只是另一个可以从中读取的 Java 库）已经证明无果。

有谁知道这样的驱动程序是否存在，或者如果不存在什么（平台无关）替代品可能可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:31:13.237

我实际上一直在使用 JDBC 和 jetEngine 查询将 CSV 文件导入 Access 数据库，如下所示

`Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");`
// 将此设置为您机器上的 MS Access DB

`String filename = "C:/Automation_Tools/Databases/Data.mdb";`

`String database = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=";`

`database+= fileName.trim() + ";DriverID=22;READONLY=false}";`

// 添加到最后，现在我们可以从 DriverManager 获取连接

`con = DriverManager.getConnection( database ,"","");`

然后使用这样的查询

`String sql = "INSERT INTO " + accessTableName + " SELECT * FROM [Text;HDR=YES;TextDelimiter=\";Has Quotes=TrueFMT=Delimited(,);DATABASE=" + csvDirPath + ";].[" + csvFileName + "]";`

//导入/创建表 `String sql = "SELECT * INTO " + accessTableName + " FROM [Text;HDR=YES;TextDelimiter=\";FMT=Delimited(,);DATABASE=" + csvDirPath + ";].[" + csvFileName + "]";` `

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-23T12:14:55.273

我现在自己正在研究这个，并将尝试[UCanAccess](http://ucanaccess.sourceforge.net/site.html "ucanaccess")。根据主页，它说它是

> 一种开源 Java JDBC 驱动程序实现，它允许 Java 开发人员和 jdbc 客户端程序（例如，DBeaver、NetBeans、SQLeo、Open Office Base、Libre Office Base、Squirrell）读/写 Microsoft Access 数据库。
> 
> 因为它是一个纯 java 实现，所以它可以在 Windows 和非 Windows 操作系统（例如 linux/unix）中运行。**不需要 ODBC。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:28:15.927

您可以使用内置的[JDBC ODBC 桥接](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)驱动程序。使用如下连接字符串：`jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=database.mdb`。这不是平台独立的。必须安装 Jet 引擎（或 ACE）。有时编码和备注字段会出现问题。

还有一个替代方案：[http](http://www.hxtt.com/access.html) ://www.hxtt.com/access.html 他们声称平台独立，但我自己没有尝试过。

# c# - 使用 since_id 和 max_id 遍历页面

> ID：16066568
> 
> 赞同：1
> 
> 时间：2013-04-17T17:38:52.963
> 
> 标签：c#, twitter

我目前正在将代码迁移到 Twitter 1.1。以前，我使用 page 参数对基于搜索/推文的遍历页面执行一系列 GET 请求。但是对于 1.1，您必须使用 since_id 和 max_id。虽然我理解这两个参数背后的想法，但我想知道使用这些参数选项获取 500 条推文（或 N 条）推文的首选方式是什么。

目前我正在使用空白的 since_id 参数进行获取请求，然后我将此参数设置为我返回的推文的最后一个 str_id。因此，对于我的下一次 get 请求迭代，我的 since_id 等于 iv 得到的最后一条推文的最后一个 id。真的不确定我是否做得对。

有人知道使用这两个参数遍历页面的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T16:05:46.113

基本上，您从 since_id 开始处理更新（更新的推文）。你从 max_id 回到旧的推文。您可以使用参数计数来调整时间线的大小。返回的计数可能受速率限制。希望有帮助！

请参阅：请参阅此文档以在此处使用时间线：[https](https://dev.twitter.com/docs/working-with-timelines) ://dev.twitter.com/docs/working-with-timelines 或尝试在此处使用 Twitter 开发控制台构建您的查询：[https ://dev.twitter.com/安慰](https://dev.twitter.com/console)

# asp.net - 在 asp.net,c#,ms-access 数据库中更改密码

> ID：16066577
> 
> 赞同：0
> 
> 时间：2013-04-17T17:39:31.427
> 
> 标签：asp.net, c#-4.0, ms-access-2007

我正在 asp.net、c#、MS-access 数据库中设计一个更改密码屏幕，我有 4 个字段 userid、oldpassword、newpassword 确认密码

现在我没有得到结果计数返回 0 我已经更新了我的代码

我的代码如下

```
 try

      {

      OleDbConnection myCon = new  OleDbConnection(ConfigurationManager.ConnectionStrings["vhgroupconnection"]
       .ConnectionString);
        myCon.Open();

        string userid = txtuserid.Text;
        string oldpass = txtoldpass.Text;
        string newPass = txtnewpass.Text;
        string conPass = txtconfirmpass.Text;

        string q = "select user_id,passwd from register where user_id = @userid and       passwd = @oldpass";

        OleDbCommand cmd = new OleDbCommand(q, myCon);

        cmd.Parameters.AddWithValue("@userid", txtuserid.Text);

        cmd.Parameters.AddWithValue("@oldpass", txtoldpass.Text);

      OleDbDataReader re = cmd.ExecuteReader();
        re.Read();

        if (re["user_id"].ToString() != String.Empty && re["passwd"].ToString() != String.Empty)
        {
            if (newPass.Trim() != conPass.Trim())
            {
                lblmsg.Text = "New Password and old password does not match";

            }
            else
            {
               q = "UPDATE register SET  passwd = @newPass WHERE user_id =@userid";
                cmd = new OleDbCommand(q, myCon);
                cmd.Parameters.AddWithValue("@userid", txtuserid.Text);
                cmd.Parameters.AddWithValue("@newPasss", txtnewpass.Text);

                int count = cmd.ExecuteNonQuery();

                if (count > 0)
                {
                    lblmsg.Text = "Password changed successfully";
                }
                else
                {
                    lblmsg.Text = "password not changed";
                }
            }
        }
    }
    catch(Exception ex)
    {
        throw ex;
    } 
```

请帮我解决错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:43:42.450

您收到错误，`No constructor is defined`因为您无法直接实例化此对象。如[MSDN](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.aspx)所述：

> 要创建 OleDbDataReader，您必须调用 OleDbCommand 对象的 ExecuteReader 方法，而不是直接使用构造函数。

本质上，在创建连接并指定查询后，您将执行以下操作：

```
OleDbDataReader re = cmd.ExecuteReader(); 
```

# mysql - MySql 不会导入 mysql 转储

> ID：16066582
> 
> 赞同：0
> 
> 时间：2013-04-17T17:39:53.063
> 
> 标签：mysql, sql, mysqldump

mysqldump v 5.10 将整个数据库转储到单个 .sql 文件中。完全删除mysql安装，并重新安装全新。导入数据 > dumpedfile.sql 每次都在同一行失败并出现语法错误。

```
DELIMITER ;; 
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `AddDate` BEFORE INSERT ON interviewlist FOR EACH ROW
SET NEW.InterviewListDateCreated = CURDATE(); */;; 
DELIMITER ; 
```

尝试创建触发器/事件/或过程时总是失败。我为大多数表定义了多个触发器。因此，必须一个一个地重新创建它们会有点烦人。mysqldump 是否输入了错误的语法？我正在尝试通过 MySql Workbench > 导入数据以 root 用户身份导入

编辑：删除该代码块允许所有其他触发器正确插入......奇怪，因为它们的语法完全相同。此外，使用 mysqldump 中的“添加锁定/解锁”选项重新转储文件允许文件完美导入。*耸耸肩*

# r - 在 r 中绘制每月和每年的天气数据

> ID：16066583
> 
> 赞同：3
> 
> 时间：2013-04-17T17:39:55.360
> 
> 标签：r, plot, ggplot2, lattice

我正在尝试开发一个天气数据中出现的天气图 - 类似的东西。

![在此处输入图像描述](https://i.stack.imgur.com/q6WzJ.jpg)

我想绘制每日价值（尽管平均值可以出现在圆圈中）。我正在使用 ggplot2，因为它需要多方面的（每个月和每年）。

```
st <- as.Date ("2009-1-1")
en <- as.Date ("2011-12-28")
date1 <- seq(st, en, "1 day")
year <- format(date1, "%Y")
month <- format (date1, "%b")
day <- as.numeric (format(date1, "%d"))

avgtm <- round (rnorm (length(date1), 50,5), 1)
maxtm <- avgtm + abs(rnorm (length (avgtm), 0, 5))
mintm <-  avgtm - abs(rnorm (length (avgtm), 0, 5))

myd <- data.frame ( year, month, day, avgtm, maxtm, mintm)
require(ggplot2)
qplot(day, avgtm, data = myd, geom = "line", col = "red") +
facet_grid(year ~ month) + theme_bw() 
```

![在此处输入图像描述](https://i.stack.imgur.com/idVXs.jpg)

这里有一个主要问题，线路将在几个月之间连接。

每个月都绘制到最大值（尽管一个月可以以 28 结束，该月留空）。 ![在此处输入图像描述](https://i.stack.imgur.com/fd4Am.jpg)

有没有一种聪明的方法来实现我想要实现的目标。我试过 ggplot2 但可能还有其他不错的选择。

**编辑：**

我试图在每月的第一天添加垂直线来区分月份。这是我试图找到一个月的第一天：

```
 td = as.Date (seq(as.Date("2009/1/1"), as.Date("2011/12/28"), "months")) 
```

我试图用它来绘制线：

```
qplot(date, avgtm, data = myd, geom = "line", col = "red") +
  facet_wrap(~year, scales='free_x', ncol=1, nrow=3) +

   geom_vline(xintercept=td, linetype="dotted") + theme_bw() 
```

但是运行报错：Error : Invalid intercept type: should be a numeric vector, a function, or a name of a function

如何绘制带有日期的垂直线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:48:18.347

制作一个日期列怎么样，然后只在年份分面

```
myd$date <- as.Date(paste(myd$year, myd$month, myd$day), format='%Y %b %d')

qplot(date, avgtm, data = myd, geom = "line", col = "red") +
  facet_wrap(~year, scales='free_x', ncol=1, nrow=3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/huDVk.png)

您也可以添加`scales='free_x'`到您的情节中，但会发现它使解释变得困难。

通过对月份和年份进行分面，您可以告诉查看者和绘图工具，绘制的变量不是连续的。正如您在问题中指出的那样，这是不正确的。因此，没有刻面...您可以根据需要为每个月或每天添加刻度线。

```
library(scales)
qplot(date, avgtm, data = myd, geom = "line", col = "red") +
      facet_wrap(~year, scales='free_x', ncol=1, nrow=3) +
      scale_x_date(breaks=date_breaks("month"), labels=date_format("%b")) 
```

或者，您可以在一个图上提取`day of year`和绘制所有内容，按年份着色：

```
myd$doy <- format(myd$date, '%j')
p <- ggplot(myd, aes(x=doy, y=avgtm, color=year, group=year))

p + geom_line() 
```

或者

```
p + geom_smooth() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T21:19:00.327

有一个解决方案 `panel.xblocks`from `latticeExtra`：

```
st <- as.Date("2009-1-1")
en <- as.Date("2011-12-28")
date1 <- seq(st, en, "1 day")

avgtm <- round (rnorm (length(date1), 50,5), 1)

myd <- data.frame(date1, avgtm) 
```

我定义了两个函数来提取月份和年份值，而不是将它们包含在`data.frame`. `panel.xblocks`这种方法在以下`panel`功能中很有用 `xyplot`：

```
month <- function(x)format(x, '%m')
year <- function(x)format(x, '%Y') 
```

我`year(date1)`用作条件变量来生成三个面板。这些面板中的每一个都将显示该年的时间序列 ( `panel.xyplot`) 和一系列以交替颜色突出显示月份 ( ) 的连续块`panel.xblocks`。您应该注意，`y`参数 in`panel.xblocks`是`month`先前定义的函数：

```
xyplot(avgtm ~ date1 | year(date1), data=myd,
       type='l', layout=c(1, 3),
       scales=list(x=list(relation='free')),
       xlab='', ylab='',
       panel=function(x, y, ...){
           panel.xblocks(x, month,
                         col = c("lightgray", "white"),
                         border = "darkgray")
           panel.xyplot(x, y, lwd = 1, col='black', ...)
           }) 
```

![块](https://i.stack.imgur.com/mxxxO.png)

# sql - SQL如何在比较2个sql表时选择最大值

> ID：16066587
> 
> 赞同：0
> 
> 时间：2013-04-17T17:39:56.583
> 
> 标签：sql, max

我正在做一个项目，但我被困在一个查询上：

我想创建某种基于 wi-fi 的 GPS。有 2 个表（用户和位置），我需要将结果放在第三个表中。

第一个表是从用户手机发送信息的地方。

电话 MAC 地址和具有信号强度的无线接入点 MAC。用户手机可以看到多个无线接入点。

第二个表是所有已知无线接入点及其坐标（纬度和经度）的存储位置。

以下是表格：

`Users`：

```
| PhoneMac    |   apMac      |   signal  |  
|   user1     |11:11:11      |     20    |  
|   user1     |22:22:22      |     80    |  
|   user1     |33:33:33      |     50    |  
|   user1     |55:55:55      |     99    |  
|   user2     |11:11:11      |     60    |  
|   user3     |44:44:44      |     10    |  
|   user3     |11:11:11      |     90    | 
```

`Locations`桌子：

```
| apMac           |   Lat       |   Lon     |  
|   11:11:11      |10.000       |30.000     |  
|   33:33:33      |30.000       |30.000     |  
|   44:44:44      |40.000       |40.000     | 
```

我需要一个从表中获取 apMac 的查询`Users`，检查它们是否在`Locations`表中，并从找到的那些中选择信号最强的那个。

所以结果应该是 PhoneMac 和所选 AP 的坐标。每个用户都应该这样做。

使用上面的表格应该是正确的结果：

```
| PhoneMac     |     Lat     |     Lon       |  
|   user1      |30.000       |30.000         |  
|   user2      |10.000       |10.000         |  
|   user3      |10.000       |10.000         |  

    sql = "SELECT t1.PhoneMac, t1.apMac, t1.signal, t2.apMac, t2.lat, t2.lon,
    COUNT(t1.MacTel) AS num
    FROM users t1
    INNER JOIN locations t2
    ON t1.apMac=t2.apMac
    GROUP BY t1.PhoneMac
    ORDER BY num DESC"; 
```

这是我到目前为止的代码。我不知道如何包含有关选择`apMac`最强信号的部分，因为现在它只返回`apMac`列表中的第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:51:12.290

在大多数数据库中，您可以使用以下方法执行此操作`row_number()`：

```
select PhoneMac, lat, long
from (select u.PhoneMac, l.lat, l.long,
             ROW_NUMBER() over (partition by u.apMac order by signal desc) as seqnum
      from users u join
           locations l
           on u.apMac = l.apMac
     ) t
where seqnum = 1; 
```

在 MySQL 或 Access 或其他不支持 ANSI 标准的数据库中`row_number()`，您可以使用相关子查询来执行此操作。这是一种方法：

```
select distinct PhoneMac,
        (select lat from Locations l where l.apMac = u.apMac order by signal limit 1) as lat,
        (select lon from Locations l where l.apMac = u.apMac order by signal limit 1) as long
from users u 
```

# jquery - 如何将 jquery select2 绑定到新添加的选择？

> ID：16066589
> 
> 赞同：6
> 
> 时间：2013-04-17T17:40:00.560
> 
> 标签：jquery, jquery-select2

我有一个 razor-mvc 网络和一个表单上的几个选择。我将此选择与 jquery 中的 select2 插件绑定，如下所示：

```
$('select.company_select, select.positions_select').select2(); 
```

我的表单是一个 ajax 表单（javascript 的 ajax，而不是 Ajax.BeginForm）。问题是，当我提交表单时，我添加了另一个表单，其中包含第一个表单的提交值，但是该新表单上的选择不会应用 select2 插件。我知道这是正常的，因为新项目应该与 .on() 或 .live() 绑定，但我不知道该怎么做。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T07:29:20.970

使用[ajaxcomplete](http://api.jquery.com/ajaxcomplete/)

```
$( document ).ajaxComplete(function(){
  $(".select2").select2();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T11:16:30.077

您正在执行 ajax 调用，因此请确保您在页面上的任何新选择框的任何其他选择上重新初始化选择。

所以你的ajax调用看起来像

```
$.ajax({ 
     url: '.../', 
     data..., 
     type...,
     success: function(data) 
     {
         $('#newFormAddedID select').select2();
     } 
```

应该做的伎俩..你也可以完成它：function（...如果表单被添加，无论ajax调用是否成功。

# android - SharedPreferences 获取最后保存的数字图像问题

> ID：16066590
> 
> 赞同：0
> 
> 时间：2013-04-17T17:40:01.603
> 
> 标签：android, sharedpreferences

在我的应用 InfiniteGallery 类中，通过按下按钮，您可以将任何图像保存到 SD 卡，以获取上次保存的编号并存储保存的图像的最后编号，以便您可以**按顺序存储所有图像** ，但是当添加 SharedPreferences 时，我有红线下的错误：

1- `SharedPreferences savedNumber = getSharedPreferences(PREFS_NAME, 0);` （在 :getSharedPreferences 下）。

**错误是：创建方法'getSharedPreferences'（字符串，int）'**

2- `SharedPreferences saveNumber = getApplicationContext().getSharedPreferences(PREFS_NAME, 0);` （在：getApplicationContext下）。

**错误是：创建方法'getApplicationContext（）'**

我试图修复它但是icant，任​​何建议或帮助将不胜感激，谢谢

我的代码：

```
 View vi=convertView; 
    final ViewHolder holder; 
    if(convertView==null){ 
        vi = inflater.inflate(R.layout.gallery_items, null); 
        holder=new ViewHolder(); 
        holder.text=(TextView)vi.findViewById(R.id.textView1); 
        holder.image=(ImageView)vi.findViewById(R.id.image); 
        holder.button=(Button)vi.findViewById(R.id.button_save);
bm = BitmapFactory.decodeResource( mContext.getResources(), images[itemPos]);
         holder.image.setImageBitmap(bm);           
        holder.button.setOnClickListener(new OnClickListener() {
  private Bitmap bm;
  private String PREFS_NAME;
public void onClick(View arg0) {
    String root = Environment.getExternalStorageDirectory().toString();
       File myDir = new File(root + "/saved_images");
       if(!myDir.exists()){
           myDir.mkdirs();}

        SharedPreferences savedNumber = getSharedPreferences(PREFS_NAME, 0); 
        int lastSavedNumber = savedNumber.getInt("lastsavednumber",0); 
        lastSavedNumber++; 
        String fname = "Image-"+lastSavedNumber+".png"; 

        File file = new File (myDir, fname); 
        if (file.exists ()) {file.delete (); } 
        try { 
        FileOutputStream out = new FileOutputStream(file); 
        bm.compress(Bitmap.CompressFormat.PNG, 100, out);
                 //Your Bitmap from the resouce 
        out.flush(); 
        out.close(); 
        Toast.makeText(mContext, "Saved", Toast.LENGTH_LONG).show();}
         catch (Exception e) { 
        e.printStackTrace(); }

       SharedPreferences saveNumber = getApplicationContext().getSharedPreferences
               (PREFS_NAME, 0); 
        SharedPreferences.Editor editorset = saveNumber.edit(); 
        editorset.putInt("lastsavednumber",lastSavedNumber); 
        editorset.commit();
      Toast.makeText(mContext, "button clicked", Toast.LENGTH_LONG). 
                 show();}});

      vi.setTag(holder);}

    else holder=(ViewHolder)vi.getTag(); 
    holder.text.setText(name[itemPos]); 

    final int stub_id=images[itemPos]; 
    holder.image.setImageResource(stub_id); 

    return vi; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:55:11.057

知道那条红线说什么会很有帮助，但在这里我相信这是因为你失踪了`Context`。将其更改为

```
SharedPreferences savedNumber = this.getSharedPreferences(PREFS_NAME, 0); 
```

和

```
SharedPreferences saveNumber = this.getSharedPreferences(PREFS_NAME, 0); 
```

根据您在应用程序中的位置，您可能需要您所在`ActivityName.this`的`ActivityName`名称`Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:09:01.140

这都是因为您处于没有此方法的类的范围内。

你可以做的是接下来的事情之一：

1.  在函数中有一个 Context 类型的参数，并将其用于使用方法“getSharedPreferences”。

2.  有一个 Context 类型的字段，并将其设置在您班级的 CTOR 中。

3.  如果您的类在扩展 Context 的类中，而不是 this.getSharedPreferences，请写下类的名称，然后写“.this.getSharedPreferences”。

4.  创建一个将保存应用程序实例的全局静态变量。您可以在应用程序类的 onCreate() 中实例化它。每当您需要上下文时，都可以使用它而不是在类和方法之间传递实例。

# c# - 跨域 HTTP POST — 单点登录

> ID：16066592
> 
> 赞同：0
> 
> 时间：2013-04-17T17:40:04.600
> 
> 标签：c#, javascript, asp.net, cross-domain, http-post

几天来，我一直在努力寻找解决问题的方法。

搜索给了我很多选择，但没有一个我可以适应我的场景。

我有一个 Web 应用程序 (C# ASP.NET)，它必须将一些数据发布到另一个域中的另一个应用程序，作为 SSO。（使用 SSL 重定向到另一个域的 HTTP POST）

另一个域上的应用程序期待一个包含一些 JSON 格式纯文本数据的帖子，然后将用户重定向到另一个页面。

我不能使用表单提交，因为它将表单本身发送到应用程序，而不仅仅是我的数据，所以它无法读取我发送的数据。

XMLHttpRequest 确实有效，但是作为 ajax 调用，它不会重定向用户，并且我无法从响应中取回 Location 标头。

我无法控制其他应用程序，并且我只能使用我们的库，所以 JQuery 不是一个选项。

有谁知道我怎样才能做到这一点？服务器端或客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T18:19:52.150

大多数基于 POST 的跨域 SSO 场景的工作方式如下：

*   新的未经身份验证的浏览器转到服务提供商
*   服务提供商重定向到带有特定查询字符串的 SSO url（通常包含由服务提供商签名的小请求，以将该服务提供商标识到 SSO 门）
*   浏览器对 SSO 网关 url 执行 GET
*   SSO 网关响应一些交互式登录 UI
*   浏览器获取用户名/密码输入并将其发布到 SSO 网关
*   SSO 网关验证并响应一个带有小 Javascript 的 HTML 页面，其中包含身份验证响应数据
*   Javascript 反过来指示浏览器将身份验证响应数据 POST 回服务提供商 URL

在此处阅读：[http](http://en.wikipedia.org/wiki/SAML_2.0#HTTP_POST_Binding) ://en.wikipedia.org/wiki/SAML_2.0#HTTP_POST_Binding 您还将从阅读 SAML2、OAuth 和 WS-Federation 规范中受益匪浅。

# regex - 如果是数字，则忽略斜线后的所有内容

> ID：16066608
> 
> 赞同：1
> 
> 时间：2013-04-17T17:40:59.693
> 
> 标签：regex

如果它是一个数字，我试图忽略斜线后的所有内容 -

[http://www.example.com/123abc/456/ABC/789/](http://www.example.com/123abc/456/ABC/789/)

所需的输出是

[http://www.example.com/123abc/](http://www.example.com/123abc/)

到目前为止，我已经尝试了以下方法 -

```
(https?:\/\/.*)(?=/\d+).* 
```

这给了我 -

[http://www.example.com/123abc/456/ABC/](http://www.example.com/123abc/456/ABC/)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:48:24.880

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:48:50.980

The `.*` is greedy and will try to match as much as possible. The `789` existence allows for a match of everything up to it. Instead you can use.

```
(https?:\/\/.*?)(?=/\d+).* 
```

The `?` makes the `.*` relucant, so it will match as *little* as possible to satisfy the expression.

However, this doesn't fulfill the requirement you described which is actually "Ignore everything after the *second* slash if it is a number." You can use (in your specific case):

```
(https?:\/\/.*?\/.*?\/)(?=\d+).* 
```

# java - java.util.NoSuchElementException 重新尝试

> ID：16066611
> 
> 赞同：0
> 
> 时间：2013-04-17T17:41:09.993
> 
> 标签：java

好的，我的第一个问题搞砸了，请立即查看。

这是我的错误

```
 java.util.NoSuchElementException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextByte(Unknown Source)
at java.util.Scanner.nextByte(Unknown Source)
at Filename.getMenu(Filename.java:38)
at Filename.main(Filename.java:23) 
```

这是我的代码

```
 import java.util.Scanner;
public class asdasdasd {

    public static void main(String[] args){

        short[] time = {2008, 2009};

        String[] champs = {"Mouths", "Mouths"};

        getMenu(time, champs);
    }

        public static void getMenu(short[] time, String[] champs){
            Scanner keyboard = new Scanner(System.in);
            byte a;

            do{
                System.out.println("\t\t\tMain Menu");
                System.out.println("Select an Option || Example: Type '1' for Seach\n\n");
                System.out.println("\t\t1.Search\n");
                System.out.print("Input the number: ");
                a = keyboard.nextByte();
                if(a == 1){
                    getSearch(time, champs);
                }
              } while(a < 5);
            keyboard.close();
        }

        public static void getSearch(short[] time, String[] champs){
            Scanner keyboard = new Scanner(System.in);
            String Team;
            byte b;
            do{
                System.out.print("\n\nEnter the name of the team: ");
                Team = keyboard.next();
                if("Mouths".equals(Team) || "mouths".equals(Team)){
                    Team = "mouths";

                }
                System.out.print("Start a new Search?\nInput 1 for Yes or any other number to return to the main menu: ");
                b = keyboard.nextByte();

            }
            while(b == 1);

            keyboard.close();                                           

        }
    } 
```

好的，所以基本上输入是 1，然后是嘴巴，然后是 2。然后出现错误。

很抱歉所有愿意提供帮助的人，我没有提供太多信息。我只是害怕因为抄袭而被贬低。

我已经被告知要使用 hasNext() 或类似的东西。从来没有使用过它，我也没有任何经验。如果有人可以向我展示一个示例或如何在此编码中使用它，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:45:29.587

`nextByte()`获取缓冲区中的第一个字节`keyboard`，但不消耗换行符`\n`，该换行符`nextByte()`在第二次调用时获取。

你应该释放缓冲区放置一个

```
keyboard.nextLine(); 
```

后

```
keyboard.nextByte(); 
```

以及之后

```
keyboard.next(); 
```

为了告诉您的扫描仪直接丢弃该行的其余部分并从它找到的下一行读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:48:44.510

修改为

```
if(keyboard.hasNextByte()) 
  a = keyboard.nextByte(); 
```

和

```
 if(keyboard.hasNext())
 Team = keyboard.next(); 
```

适用的地方。并在读取之前清除换行符的缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:08:57.030

出现问题是因为您正在调用`keyboard.close()`，我认为您不应该这样做。

在您的`getSearch`方法退出之前，您关闭您正在使用的扫描仪。调用[`close`Scanner 类的方法](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#close())也将关闭扫描仪正在读取的流。在你的情况下，这是`System.in`. 下一次`getMenu`调用时`keyboard.nextByte()`，它会向它拥有的扫描仪（与 使用的扫描仪不同`getSearch`）询问下一个字节。该扫描仪也在读取`System.in`. 但是，`System.in`现在已经关闭，因此将没有下一个字节要读取。这就是为什么你得到一个`NoSuchElementException`.

通常，关闭已完成的事情是一种很好的做法。例如，如果您正在读取文件，则应始终在完成后关闭该文件。但是，在程序退出之前您还没有完成`System.in`，因此在此之前关闭它是错误的。

至少我会删除对`keyboard.close()`within的调用`getSearch`。我也不担心在`getMenu`.

# git - 如何避免 git 在编辑器上显示合并消息？

> ID：16066612
> 
> 赞同：0
> 
> 时间：2013-04-17T17:41:12.713
> 
> 标签：git

从现在开始，不知道为什么，每次我在本地机器上执行 git pull 来拉取远程 repo 更改时，都会在我的编辑器上打开一条合并消息。

毫无疑问，这确实很烦人。

以前有没有人有过这种情况，如果有，你是怎么做的？

在我的本地 git 配置中，我尝试了：

```
git config --global care.mergeoptions --no-edit 
```

徒劳无功。

也许是因为它不是 a`mergeoption`而是 a `pull`（后跟一个合并）。?

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:26:58.893

您收到这些消息是因为您在本地提交了未在被拉取的上游存储库中的更改。从字面上看，您正在处理不同的分支，并且必须合并更改。如果您不想进行显式合并提交，则可以`git rebase`在合并后在本地树上执行 a，这将消除合并提交. 这仍然需要您关闭编辑器以创建默认合并消息。您可以通过做来进一步优化它`git pull --rebase`，它会自动执行变基。

# php - 如何使 php 将 \t \n 显示为制表符和换行符而不是字符

> ID：16066614
> 
> 赞同：41
> 
> 时间：2013-04-17T17:41:13.607
> 
> 标签：php, character-encoding

我正在尝试将我的 php 文件中的数据输出为纯文本，并且我希望输出具有如下表格格式：

```
data1    data2    data3
1        a        b
2        c        d
.... 
```

当我尝试这个时：

```
foreach(...)
echo $data1 . '\t' . $data2 . '\t' . $data3 . '\n'; 
```

它将它们打印为`data1\tdata2\tdata3\n...`

如何让 php 读取`\t`并`\n`作为制表符和换行符？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-17T17:46:47.257

put it in double quotes

`echo "\t";`

See: [http://php.net/language.types.string#language.types.string.syntax.double](http://php.net/language.types.string#language.types.string.syntax.double)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-17T17:43:31.253

```
"\n" = new line
'\n' = \n
"\t" = tab
'\t' = \t 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-17T17:43:05.437

`"\t"`不`'\t'`，php不会在单引号中转义

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-17T17:43:19.070

把它放在双引号中：

```
echo "\t"; 
```

单引号不会扩展转义字符。

如有疑问，请使用[文档。](http://php.net/language.types.string#language.types.string.syntax.single)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T17:52:08.933

您可以使用 HTML，

```
foreach(...)
echo $data1 . '&nbsp' . $data2 . '&nbsp' . $data3 . '<br/>'; 
```

# regex - htaccess 正则表达式允许“-”和字母

> ID：16066616
> 
> 赞同：0
> 
> 时间：2013-04-17T17:41:21.540
> 
> 标签：regex, .htaccess

这是我在 htaccess 上的正则表达式

```
RewriteRule ^(.*)/([0-9]+)/(.*).html$ index.php?m=post&id=$2&cat=$1 [L,NC] 
```

但是当我尝试输入此 url 时，我得到 404 页面未找到。

site.com/movies-tv/119284/movie-brscreener-hq-thriller.html

我需要在电影电视上允许“-”

# c# - 单击删除命令字段删除按钮时禁用并突出显示gridview中的一行

> ID：16066626
> 
> 赞同：0
> 
> 时间：2013-04-17T17:41:57.463
> 
> 标签：c#, asp.net, gridview, datatable, highlighting

我想在单击删除按钮时**突出显示并禁用gridview 行。**我正在使用数据表并将其绑定到网格并在用户单击删除按钮时更改标志**IS_DELETED='Y' 。**删除按钮当前位于命令字段中。一旦用户单击删除按钮，它应该禁用该行并隐藏按钮，以限制用户进一步编辑。有人可以帮我解决这个问题。这一直困扰着我很久。谢谢是提前。

![在此处输入图像描述](https://i.stack.imgur.com/ZFRHE.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:56:31.327

将此[小提琴](http://jsfiddle.net/pbaYa/)视为使用 jQuery 的基本示例。谷歌一下你需要的 jQuery。再次 - 您需要处理按钮单击，然后更改它的父行。

```
$('input.delete').click(function(){
   $(this).closest('tr').find('input.button').hide().end().addClass('disabled');
}); 
```

# vector - python中极地空间/坐标中两个向量相加的结果

> ID：16066627
> 
> 赞同：0
> 
> 时间：2013-04-17T17:42:00.260
> 
> 标签：vector, geometry, polar-coordinates

考虑一个向量，从原点开始，在极坐标中。

```
(r1, phi1) 
```

然后将另一个向量添加到该向量；

```
(r2, phi2) 
```

然后使用合成向量绘制一个三角形。顶角（theta）的值可以用phi1和phi2计算，用余弦法则确定R的大小，用正弦法则计算出R的角度。

它变得非常棘手，因为根据 phi2 的值，计算 theta 的方程会发生变化。

有没有其他解决方案可以巧妙地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:45:11.813

这是一个视频，解释了添加向量的数学。

[http://www.youtube.com/watch?v=5by-REDgyg0](http://www.youtube.com/watch?v=5by-REDgyg0)

一旦你拥有所有两个下角，三角形中的角之和为 180。

# c - 如何完成网络编程中 tcp 拆解的 4 个步骤

> ID：16066631
> 
> 赞同：0
> 
> 时间：2013-04-17T17:42:26.913
> 
> 标签：c, linux, tcp, network-programming

在网络编程中，我在A和B之间建立了tcp连接时编写了2个TCP程序A和B，如果我想关闭它，我可以在A上使用以下代码片段：

```
int main(){
......    //blabla
shutdown(sockfd, SHUT_RDWR);
close(sockfd);
return;   // program finish
} 
```

这样，socket 就会向 B 发送 FIN/ACK 并从 B 接收 ACK。我使用 tcpdump 抓包，我注意到只有从 A 到 B 的 FIN/ACK 和从 B 到 A 的 ACK，所以有只有2个步骤。但是对于tcp teardown，应该有4个步骤，从B到A的FIN / ACK和从A到B的ACK sebsequently。所以，它是不​​完整的。

所以我的问题是如何完成这 4 个步骤，因此，我想知道

1 程序 B 如何检测 A 是否发送了 SYN/ACK，如果 B 正在发送，`n=recv();`那么如果 n 是`0`，则表示 A 已经主动关闭。但是如果 B 空闲，如何检测？如果 B 正在做`n=sendto()`，我认为如果`n<0`，那么 A 会主动关闭，但我的测试似乎我的想法是错误的。

2 我怎样才能让程序A完成前4步的TCP拆解`return`（退出程序）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:46:52.997

> A 进行了主动关闭。但是如果 B 空闲，如何检测

`send`据我所知，除非您执行/ `recv`（或等效项），否则您的流程不会得到通知。

*   A`send`应该触发一个`SIGPIPE`信号或`-1`返回`errno = EPIPE`
*   A`recv`应该返回 0 来表示 EOF

理想情况下，您的程序 (B) 应该已经在**监视文件描述符的可用输入**（可能使用`select(2)`，`poll(2)`或等效的）。如果这样做，一旦对等端关闭其连接端，您正在监视的文件描述符将变得“有趣”以供读取，并且后续`read`将返回 0。

我个人建议`epoll(2)`，但请记住它是特定于 Linux 的。

> 如何让程序 A 在返回前完成 TCP 拆解 4 个步骤（退出程序）

当您的进程终止时，操作系统所做的一件事就是**关闭其所有文件描述符**。这个过程的一部分也是关闭套接字，关闭套接字意味着关闭连接（你提到的最后两个部分）。

# sql - NOT NULL 值之间的升序和降序

> ID：16066632
> 
> 赞同：1
> 
> 时间：2013-04-17T17:42:38.190
> 
> 标签：sql, sql-server, sql-server-2008

使用此查询：

```
WITH CTE
AS
(
    SELECT 
        concat(e.FirstName, ' ', e.LastName) as Employee_Name, 
        g.GrantName, 
        g.Amount, 
        case 
            when g.Amount IS NULL THEN 0 
            ELSE 1 
        END AS IS_NULL_Amount
    from Employee e 
        LEFT OUTER join [Grant] g
            ON g.EmpID = e.EmpID
)

SELECT 
    CTE.Employee_Name, 
    CTE.GrantName, 
    CTE.Amount 
from CTE
ORDER BY CTE.IS_NULL_Amount desc 
```

我得到这些结果：

```
Employee_Name      GrantName                   Amount
---------------------------------------------------------
Barry Brown        K-Land fund trust           15750.00
Lee Osako          TALTA_Kishan International  18100.00
David Kennson      BIG 6's Foundation%         21000.00
Eric Bender        Just Mom                    9900.00
David Lonning      92 Purr_Scents %% team      4750.00
David Lonning      Robert@BigStarBank.com      18100.00
David Lonning      www.@-Last-U-Can-Help.com   25000.00
David Lonning      Big Giver Tom               95900.00
James Newton       Mega Mercy                  55000.00
Terry O'Haire      Ben@MoreTechnology.com      41000.00
Sally Smith        Thank you @.com             21500.00
Barbara O'Neil     NULL                        NULL
Phil Wilconkinski  NULL                        NULL
Janis Smith        NULL                        NULL
Alex Adams         NULL                        NULL
John Marshbank     NULL                        NULL
Lisa Kendall       NULL                        NULL

(17 row(s) affected) 
```

如何仅在非空值之间对 ASC 和 DESC 进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:47:08.983

排序 IS_NULL_Amount 和 Amount

```
ORDER BY CTE.IS_NULL_Amount desc,Amount asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:47:37.337

试试这个 order by 子句：

```
order by cte.Is_Null_Amount desc, EmployeeName 
```

或者

```
order by cte.Is_Null_Amount desc, Amount desc 
```

# java - 序列化中的 java.io.InvalidClassException

> ID：16066636
> 
> 赞同：0
> 
> 时间：2013-04-17T17:43:04.557
> 
> 标签：java, exception, serialization

在阅读了连载之后，我尝试对书中提供的示例进行实验。以下代码有一些变化，这基本上是从 SCJP 书中挑选的。

```
import java.io.FileInputStream;

public class SerializationTest {
    public static void main(String[] args) {
        Collar c = new Collar(4);
        Dog d = new Dog(c, "Sheru", 32);
        FileOutputStream fos = null;
        ObjectOutputStream oos = null;
        try {
            fos = new FileOutputStream(
                    "C:\\Users\\dell\\Desktop\\NewDir\\DogState.txt");
            oos = new ObjectOutputStream(fos);
            oos.writeObject(d);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                oos.close();
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        // ***************************************************************************************************
        // //
        Dog restore = null;
        FileInputStream fis = null;
        ObjectInputStream ois = null;
        try {
            fis = new FileInputStream(
                    "C:\\Users\\dell\\Desktop\\NewDir\\DogState.txt");
            ois = new ObjectInputStream(fis);
            restore = (Dog) ois.readObject();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            try {
                fis.close();
                ois.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        System.out.println("after: dog name: "+ restore.name +" , collar=" + restore.getCollar());
        System.out.println("Animal material is:" + restore.getWeight());
    }
}

// Intentionally added parameterized constructor so that default constructor is not called.
class Animal{
    int weight = 42;
    public Animal(int weight) {
        this.weight = weight;
        System.out.println("animal constructor");
    }
}

class Dog extends Animal implements Serializable {
    String name;
    transient Collar collar;

    public Collar getCollar() {
        return collar;
    }

    public void setCollar(Collar collar) {
        this.collar = collar;
    }

    public int getWeight() {
        return weight;
    }

    public void setWeight(int weight) {
        this.weight = weight;
    }

    public Dog(Collar collar, String name, int weight) {
        super(weight);
        System.out.println("Dog constructor");
        this.collar = collar;
        this.name = name;
    }

}
class Collar {
    int size;

    public Collar(int size) {
        System.out.println("Collar constructor");
        this.size = size;
    }
} 
```

这里我的问题是为什么会发生 InvalidClassException，请解释异常的根本原因是什么。电流输出为

```
Collar constructor
animal constructor
Dog constructor
java.io.InvalidClassException: Dog; Dog; no valid constructor
    at java.io.ObjectStreamClass.checkDeserialize(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at SerializationTest.main(SerializationTest.java:39)
Caused by: java.io.InvalidClassException: Dog; no valid constructor
    at java.io.ObjectStreamClass.<init>(Unknown Source)
    at java.io.ObjectStreamClass.lookup(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at SerializationTest.main(SerializationTest.java:18)
Exception in thread "main" java.lang.NullPointerException
    at SerializationTest.main(SerializationTest.java:54) 
```

如果我删除 Animal 构造函数并注释掉 Dog 构造函数中的 super(weight)，那么输出是

```
Collar constructor
Dog constructor
after: dog name: Sheru , collar=null
Animal material is:42 
```

我理解这个输出，并且我也得到了这样一个事实，即在反序列化过程中调用了可序列化类的超类构造函数，但这里没有默认构造函数，因此发生了异常。但是我想知道为什么会发生这种异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:44:08.267

当您尝试从文件中读取时抛出异常：

```
at java.io.ObjectInputStream.readObject(Unknown Source)
at SerializationTest.main(SerializationTest.java:39) 
```

堆栈跟踪清楚地表明您的程序在尝试读取对象时中止。可能让您感到困惑的是第二个堆栈跟踪引用了写入：

```
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at SerializationTest.main(SerializationTest.java:18) 
```

但是您似乎跳过了这一*非常*重要的行：

```
Caused by: java.io.InvalidClassException: Dog; no valid constructor 
```

Java stacktraces 可以嵌套，一个异常可以导致另一个异常；这是一个小小的 ackward。事实上，在对象的序列化过程中，已经计算出没有默认构造函数。[以下是相关源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/ObjectStreamClass.java#ObjectStreamClass.%3Cinit%3E%28java.lang.Class%29)的摘录：

```
...
cons = getSerializableConstructor(cl);
...
} else if (cons == null) {
    deserializeEx = new InvalidClassException(name, "no valid constructor");
} 
```

这意味着在写入期间，已经很清楚没有有效的构造函数。但是，异常不会被抛出，而是与对象一起序列化。后来在反序列化的时候，调用了这段代码：

```
void checkDeserialize() throws InvalidClassException {
    if (deserializeEx != null) {
        InvalidClassException ice =
            new InvalidClassException(deserializeEx.classname,
                                      deserializeEx.getMessage());
        ice.initCause(deserializeEx);
        throw ice;
    }
} 
```

这里，抛出了一个“真正的”异常，但它的原因被设置为对象序列化期间存储的异常。

这种机制只存在于 SUN/Oracle 的 Java 实现中；OpenJDK 在尝试读取时显然会引发异常，并且不会保留堆栈跟踪以防止写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:33:05.180

不可序列化的基类 Dog 必须具有可访问的默认构造函数。当您注释掉 Dog(weight) 构造函数时，您强制编译器提供一个，而当您将它留在编译器中时，它不会提供一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T08:21:18.900

有一条规则是，序列化类的*父类*或*任何与之关联的类*必须*实现 Serializable*。
在您的情况下，当您删除`super(weight);`then 它检查默认构造函数并正常运行
但如果您放置`class Animal implements Serializable`then 代码也可以正常运行。

# libevent - 使用 libevent 超时事件有什么错误？

> ID：16066643
> 
> 赞同：2
> 
> 时间：2013-04-17T17:43:27.687
> 
> 标签：libevent

我正在尝试学习 libevent 以在未来的项目中使用。我正在尝试创建一个事件，每次超时时调用它的回调函数。回调函数所做的就是将“timeout_cb called”打印到标准输出。

我的回调函数代码是：

```
static void timeout_cb(evutil_socket_t fd, short what, void *arg) { 
printf("timeout_cb called");
} 
```

我的活动代码是：

```
struct event *toEvent; // time out event do this every so often

toEvent = event_new(base, -1, EV_TIMEOUT, timeout_cb, NULL); // base is the event base
event_add(toEvent, &five_seconds); //five_seconds is a timeval struct with 5 seconds 
```

该程序将编译并运行，没有错误或警告，但它不会打印出回调函数中的短语。我在其他回调类型中使用了类似的 printf 语句来验证它们是否被调用，并且在函数内部到达了各种行，但这没有任何作用。我等了 30 秒左右，但仍然没有打印到屏幕上。纯超时事件我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:38:54.380

你必须做

```
event_new(base, -1, 0, timeout_cb, NULL); 
```

请注意，有一些方便的宏可以添加计时器，evtimer_new()、evtimer_add()，请参阅[文档](http://www.wangafu.net/~nickm/libevent-2.0/doxygen/html/event_8h.html)

# python - 如何在 Python 中绑定常量参数？

> ID：16066644
> 
> 赞同：1
> 
> 时间：2013-04-17T17:43:28.243
> 
> 标签：python

我有一个类似于

```
class C:
    def __init__(self, a):
        self.a = a
    def noParam(self):
        return self.a
    def withParam(self, b)
        return self.a + b
instC = C(5.) 
```

我需要将类的特定实例的方法作为参数传递。通过`instC.noParam`工作正常，但我如何通过`instC.withParam`总是`b`等于说`239`？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T17:44:54.187

你想使用[`functools.partial`](http://docs.python.org/2/library/functools.html#functools.partial)：

```
import functools

instC = C(5.)
meth = functools.partial(instC.withParam, 239) 
```

然后您可以传递此方法（与您的实例和值 239 绑定）：

```
do_thing(meth) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T17:45:32.707

您可以使用`lambda`函数来绑定参数：

`meth = lambda: instC.withParam(239)`

# c++ - 哪里是询问有关 PREfast 问题的好地方？

> ID：16066651
> 
> 赞同：2
> 
> 时间：2013-04-17T17:43:46.677
> 
> 标签：c++, visual-studio, static-analysis, prefast

哪里是询问有关 PREfast 问题的好地方？

显然，PREfast 有一些限制——有些看起来很愚蠢：

*   它无法将 a 识别`CString`为`const TCHAR *`二进制兼容）。
*   它无法理解 an`if (FooClass const & foo = FooClass(args))`实际上初始化 foo..
*   它抱怨 shlobj.h 中的 ILIsChild() （应该更正@microsoft）
*   要求检查 _setmode 的返回值，但 _setmode 的文档表明它为错误调用无效参数处理程序，并返回其先前的模式（检查完全没用！）
*   使用 DEVNAMES 结构时错误地指示字符数和字节数不匹配（例如 wDriverOffset - 记录为字符数 - 因此不是不匹配）

不确定哪里有人在讨论 PREfast 的使用及其错误和解决方法？

# c++ - 我如何将此信号连接到插槽

> ID：16066653
> 
> 赞同：0
> 
> 时间：2013-04-17T17:43:47.690
> 
> 标签：c++, qt

我想在我的主类中创建一个信号，`foo`以便不同类中的静态方法可以发出它。我刚开始使用 QT，所以我有点困惑。我目前有以下代码

```
class Foo : public QMainWindow
{
    Q_OBJECT
public:
    Foo(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~Foo();
signals:
    void UpdateSignal(int val);
private slots:
    void MySlot(int val);
};

Foo::Foo(QWidget *parent, Qt::WFlags flags): QMainWindow(parent, flags)
{
    //How do I connect Bfoo::somemethod() here.  I know its suppose to be like
    connect(xx,SIGNAL(UpdateSignal(int)),this, SLOT(MySlot(int)));
    ui.setupUi(this);
}

void Foo::MySlot(int val)
{
 //Do something..
}

Now I have this class

Class Bfoo
{
   static void somemethod()
   {
       emit UpdateSignal(12);
   }
} 
```

关于静态如何`somemethod()`发出的任何建议`UpdateSignal`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:01:44.303

当您发出信号时，有必要知道哪个对象正在发出它。这是因为信号没有被实现为不同类之间的消息，而是（可能不同的）类**实例之间的消息。**其次，信号是受保护的方法。外部用户无法访问它们。您可以做的是定义`Foo`将在其中进行发射的公共方法：

```
void Foo:EmitUpdateSignal(int x) {
    emit UpdateSignal(x);
} 
```

然后在`Bfoo::somemethod()`你需要传递将发出信号的对象：

```
void BFoo::somemethod(Foo &f) {
    f.EmitUpdateSignal(12);
} 
```

但是，请注意您在做什么。您在同一实例中发出连接到插槽的信号。这表明存在设计缺陷，但如果没有更多关于您将要实现的目标的详细信息，我无法给出任何提示。

# php - mysql fetch数组在函数中返回false，但在文档中没有

> ID：16066655
> 
> 赞同：0
> 
> 时间：2013-04-17T17:44:02.280
> 
> 标签：php, mysql, function, loops

我正在创建一个 CMS 并让 php 创建一个页面。我有一个像这样的while循环

```
while($row = mysql_fetch_array($results)) {
echo "some html code" . $row['name']; 
```

它缩短了，但希望你明白这一点。我的页面中的全部内容都可以正常工作，并且我想将其移至包含功能，因为我想重用它。问题是我这样做并且它停止工作。

我做了一些测试，发现该函数正在获取查询结果，并且在执行 var dump 后两者都是相同的，当我尝试将其分配给数组时，问题就来了。它返回为假，因此在上面的代码中，例如，

```
$row = false; 
```

我完全迷失了这一点，如果我的解释令人困惑，我很抱歉，但我是一个新手，我尝试过搜索，但是....我真的不知道从哪里开始任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:14:38.117

您所做的查询基本上是错误的，请尝试准确发布您拥有的代码，`$query`然后让我们看看问题所在。另外，最好使用`mysqli`函数。但为此，请编辑问题并键入查询，或者只是在`die(mysql_error())`查询的末尾加上`$query`. 它将显示您的确切错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:27:49.630

我在测试函数时把它弄出来了我在主页上注释掉了原始代码但由于某种原因我注释得不够多（它是 php 和 html 的混合，显然 php 没有被正确注释掉）这个一定是引起了某种冲突，因为当我将函数放在页面上的代码上方时，该函数起作用了，而它下面的长代码却没有

抱歉浪费你们的时间伙计们

# android - DialogFragment 中的地图缩略图

> ID：16066662
> 
> 赞同：0
> 
> 时间：2013-04-17T17:44:23.467
> 
> 标签：android, google-maps, supportmapfragment

我正在努力在 AlertDialog 或 SherlockDialogFragment 中显示缩略图大小的地图。

我的xml中有这个

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
class="com.google.android.gms.maps.MapFragment" /> 
```

只有这个在我的`SherlockDialogFragment`

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    getDialog().setCanceledOnTouchOutside(true);
    getDialog().setTitle(offer.retailer);

    View v = inflater.inflate(R.layout.businesstmpalert, container, false);
    return v
} 
```

我收到一个`Error inflating class fragment`错误

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:15:46.593

这不起作用，因为您正在嵌套片段（`MapFragment`在 a 内`DialogFragment`）并`MapFragment`在`<layout>`.

来自[http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

> 注意：当布局包含`<fragment>`. 仅当动态添加到片段时才支持嵌套片段。

您可以以编程方式嵌套片段：

```
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.map_fragment_host, MapFragment.newInstance()).commit(); 
```

in ，或（最好`DialogFragment`是`onActivityCreated()`恕我直言）切换到`MapView`，您可以安全地将其用作`<layout>`. 在这种情况下，请记住将片段生命周期事件传播到[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)`MapView`中指定的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T07:03:27.497

```
<meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

1-将这些行添加到清单文件的末尾。

如果这不起作用那么...

2-扩展 android.support.v4.app.FragmentActivity

```
public class MainActivity extends android.support.v4.app.FragmentActivity 
```

# java - P 的 Java toString() 覆盖

> ID：16066663
> 
> 赞同：0
> 
> 时间：2013-04-17T17:44:40.927
> 
> 标签：java, overriding, tostring

我正在尝试从如下所示的数组列表中打印这些歌曲：添加歌曲后，我必须删除其中一首歌曲并显示剩下的歌曲，但我不确定如何覆盖 toString() 方法，因为我的输出看起来像这样

输出：

```
com.tdd.bll.Song@5e6a13
com.tdd.bll.Song@862041
com.tdd.bll.Song@1af9d1c
com.tdd.bll.Song@73a35c
com.tdd.bll.Song@1ea25aa

@Test
public void AddSongTest() {
    moesList.addSong(new Song("Alone", "Tech N9ne"));
    moesList.addSong(new Song("Wings", "Macklemore"));
    moesList.addSong(new Song("One More Night", "Maroon 5"));
    moesList.addSong(new Song("Words I Never Said", "Lupe Fiasco"));
    moesList.addSong(new Song("Dumb It Down", "Lupe Fiasco"));
    moesList.addSong(new Song("Nobody's Perfect", "J.Cole"));
    assertEquals(6, moesList.songCount());
}

@Test
public void RemoveSongTest() {     
  AddSongTest();
  moesList.removeSong(1);
  assertEquals(5, moesList.songCount());
  moesList.SongsLeft();
}
}

public void removeSong(int songsNumber) {
  songs.remove(songsNumber);
}

public void SongsLeft(){
  //System.out.print(songs.iterator().next());
  Iterator<Song> iterator = songs.iterator();
  while (iterator.hasNext()) {
    System.out.println(iterator.next().toString());
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:47:28.107

Just in the class Song add a method which has the name toString() which returns the name of the song.

```
public String toString(){ 
    return theMemberVariableWithSongNameInIt ;
} 
```

# javascript - 为什么我无法获取此 xml 文件所需标记的名称

> ID：16066664
> 
> 赞同：0
> 
> 时间：2013-04-17T17:44:42.137
> 
> 标签：javascript, xml, xml-parsing

我尝试获取head- **>文本节点**的子节点的名称（所以我在写的时候需要Buut

```
var headerstyles = xmlDoc.getElementsByTagName("head")[0].getElementsByTagName("style")[0].childNodes; 

   for (i=0;i<headerstyles.length;i++) 
   {
        alert (headerstyles[i].nodeName);

   } 
```

我得到响应**#text color #text font #text**

所以在看到实际的 NodeName 之前我不明白为什么我得到了这个**#text** ，我该如何解决这个问题。

这是我的代码

```
xmlhttp.open("GET","desc.xml",false);
    xmlhttp.send();
    alert (xmlhttp.responseText);
    xmlDoc=xmlhttp.responseXML;
    alert (xmlDoc);

     var headerstyles = xmlDoc.getElementsByTagName("head")[0].getElementsByTagName("style")[0].childNodes; 

   for (i=0;i<headerstyles.length;i++) 
   {
        alert (headerstyles[i].nodeName);

   } 
```

这是我的 desc.xml

```
<docs>
 <main>
   <bgrnd>
     <img> </img>
     <color> </color>
   </bgrnd>

   <head>
     <text>Learning about Birds</text>
     <style>
       <color>red</color>
       <font>italic bold 30px Georgia,serif</font>

     </style>
   </head>

   <text>
     <link>  
       <l>   
         <dscrpt>Lesson 1 - Diet and feeding; Water and Drinking</dscrpt>
         <hrf> diet.html </hrf>
       </l>

       <l>
         <dscrpt>Lesson 2 - Feather Care </dscrpt>
         <hrf> feather.html  </hrf>
       </l>

       <l>
         <dscrpt>Lesson 3  - Level three  </dscrpt>
         <hrf> item3.html  </hrf>
       </l>

     </link> ... and so on 
```

..................................................

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:07:38.097

**#text**指的是文本节点。在您的情况下，您将使用`children`而不是`childNodes`.

```
xmlhttp.open("GET","desc.xml",false);
    xmlhttp.send();
    alert (xmlhttp.responseText);
    xmlDoc=xmlhttp.responseXML;
    alert (xmlDoc);

     var headerstyles = xmlDoc.getElementsByTagName("head")[0].getElementsByTagName("style")[0].children; 

   for (i=0;i<headerstyles.length;i++) 
   {
        alert (headerstyles[i].nodeName);

   } 
```

[在此处查看](https://stackoverflow.com/questions/7935689/what-is-the-difference-between-children-and-childnodes-in-javascript)子节点和子节点之间的不同

# java - 如何使两个相同的图像彼此分开？

> ID：16066666
> 
> 赞同：0
> 
> 时间：2013-04-17T17:44:55.507
> 
> 标签：java

所以我是java入门，我的技能有限，我们的老师要我们做一个屏幕保护程序。我的目标是 2 有多个热气球物体同时在屏幕上弹跳，当它们撞到墙上时，它们会随机改变方向。我让一个气球随机弹跳，只是它有时会假发并且仍然离开屏幕，但我认为这个问题出在我的数学中。
我需要帮助的问题是，当我向小程序添加第二个图像时，两个图像似乎是链接的，它们移动完全相同，当一个改变方向时另一个改变方向，唯一不同的是起始坐标，我如何制作它们彼此分开？这是我的代码。

```
***
import acm.program.*;
import acm.graphics.*;
import java.awt.Color;

public class HotAirBalloons extends GraphicsProgram
{

    private static final int APPLET_WIDTH = 800;
    private static final int APPLET_HEIGHT = 600;
    private int speedX = 1;
    private int speedY = 1;

    public void init()
    {
        setSize(APPLET_WIDTH,APPLET_HEIGHT);
        setBackground(new Color(100,210,255));
    }

    public void moveRandomDirection()
    {
        double direction = Math.random() * 2.0 * Math.PI;
        double speed = 3.0;
        speedX = (int) (speed * Math.cos(direction));
        speedY = (int) (speed * Math.sin(direction));
    }

    public void run()
    {

        GImage img1 = new GImage("balloon.jpg");
        add(img1, 0, 0);
        GImage img2 = new GImage("balloon.jpg");
        add(img2, 200, 200);

        while(true)
        {
            pause(15);
            img1.move(speedX, speedY);
            img2.move(speedX, speedY);

            if (img1.getX() > APPLET_WIDTH - 50)
            {
                moveRandomDirection(); 
            }

            if (img1.getX() < 1)
            {
                moveRandomDirection(); 
            }

            if (img1.getY() +85 > APPLET_HEIGHT)
            {
                moveRandomDirection(); 
            }
            if (img1.getY() < 1)
            {
                moveRandomDirection(); 
            }
            if (img2.getX() > APPLET_WIDTH - 50)
            {
                moveRandomDirection(); 
            }

            if (img2.getX() < 1)
            {
                moveRandomDirection(); 
            }

            if (img2.getY() +85 > APPLET_HEIGHT)
            {
                moveRandomDirection(); 
            }
            if (img2.getY() < 1)
            {
                moveRandomDirection(); 
            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:51:15.800

这应该有效：

```
import acm.program.*;
import acm.graphics.*;
import java.awt.Color;
import java.awt.Point;

public class HotAirBalloons extends GraphicsProgram
{
    private int speed1 = new Point(1, 1);
    private int speed2 = new Point(1, 1);

    public Point moveRandomDirection()
        {
            double direction = Math.random() * 2.0 * Math.PI;
            double speed = 3.0;
            return new Point((int) (speed * Math.cos(direction)), (int) (speed * Math.sin(direction)));
        }

    public void run()
    {

        GImage img1 = new GImage("balloon.jpg");
        add(img1, 0, 0);
        GImage img2 = new GImage("balloon.jpg");
        add(img2, 200, 200);

        while(true)
        {
            pause(15);
            img1.move(speed1.x, speed1.y);
            img2.move(speed2.x, speed2.y);

            if (img1.getX() > APPLET_WIDTH - 50 || img1.getX() < 1)
            {
                speed1 = moveRandowmDirection();
            }

            if (img1.getY() +85 > APPLET_HEIGHT || img1.getY() < 1)
            {
                speed1 = moveRandomDirection(); 
            }

            if (img2.getX() > APPLET_WIDTH - 50 || img2.getX() < 1)
            {
                speed2 = moveRandomDirection(); 
            }

            if (img2.getY() +85 > APPLET_HEIGHT || img2.getY() < 1)
            {
                speed2 = moveRandomDirection(); 
            }
        }   
    }
} 
```

编辑：这修复了“链接”行为，当图像与边缘碰撞时，我投票赞成 Rob Watts 解决问题的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:48:25.120

您对两个气球使用相同的 speedX 和 speedY 变量。给他们自己的速度变量。

此外，气球“有时会假发”的原因是，当您选择随机方向时，您没有指定它不能位于您试图让它们远离的方向。

为了解决这个问题，我建议您为每个气球创建一个 moveRandomDirection 方法，传递一个表示它们击中哪条边的值。然后将他们可以移动的方向限制为任何其他方向。

尝试这个：

```
public void moveBalloonOneInRandomDirection(int whichEdge)
{
    double direction = 0;
    switch(whichEdge) {
    case(0): // Top edge
        direction = Math.random() * Math.PI + ONLY_ALLOW_DOWN_VAL;
    case(1): // Left edge
        direction = Math.random() * Math.PI + ONLY_ALLOW_RIGHT_VAL;
    case(2): // Bottom edge
        direction = Math.random() * Math.PI + ONLY_ALLOW_UP_VAL;
    case(3): // Right edge
        direction = Math.random() * Math.PI + ONLY_ALLOW_LEFT_VAL;
    }
    double direction = Math.random() * 2.0 * Math.PI;
    double speed = 3.0;
    speedX1 = (int) (speed * Math.cos(direction));
    speedY1 = (int) (speed * Math.sin(direction));
} 
```

然后在你的 if 语句中，你会有这样的东西：

```
if (img1.getX() > APPLET_WIDTH - 50) // Right edge
{
    moveBalloonOneInRandomDirection(3);
} 
```

您可能还应该使用常量，这样您就可以使用“幻数”而不是

```
private static final int RIGHT_EDGE = 3;
...
moveBalloonOneInRandomDirection(RIGHT_EDGE); 
```

# c - 使用winsock.h 到ipv4 的整数

> ID：16066670
> 
> 赞同：-1
> 
> 时间：2013-04-17T17:45:15.853
> 
> 标签：c, windows, ipv4

我有一个关于使用联合库winsock.h将数字转换为ipv4地址的问题如何写？

```
#ifdef obsolete
        union {
                struct { u_char s_b1,s_b2,s_b3,s_b4; } S_un_b;
                struct { u_short s_w1,s_w2; } S_un_w;
                u_long S_addr;
        } S_un; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:57:14.303

这是一种方法：

```
S_un addr;

addr.S_addr = htonl( 2655715960 );

printf("%hhu.%hhu.%hhu.%hhu  %hhX:%hhX:%hhX:%hhX \n",
       addr.S_un_b.s_b1, addr.S_un_b.s_b2, addr.S_un_b.s_b3, addr.S_un_b.s_b4,
       addr.S_un_b.s_b1, addr.S_un_b.s_b2, addr.S_un_b.s_b3, addr.S_un_b.s_b4 ); 
```

幻数`2655715960`是您评论中的示例输入值。代码将打印想要的行：

```
158.75.2.120  9E:4B:2:78 
```

注意：使用十六进制打印 IPv4 地址并不常见。

注 2：使用`struct in_addr`代替`S_un`. 因此，您可以使用`inet_ntoa`将 IP 号转换为字符串的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:52:08.240

使用我的魔法玻璃球，我试图猜测这里问的是什么：

[sockaddr_storage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740504%28v=vs.85%29.aspx)可以使用 IPv4 和 IPv6 地址。

`ss_family`表示里面存放的是什么。

根据它的设置，它是`sockaddr_in`（对于 IPv4）或`sockaddr_in6`（对于 IPv6）（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms740496(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740496(v=vs.85).aspx)）。

# java - 如何在java中对用户输入进行单元测试

> ID：16066671
> 
> 赞同：6
> 
> 时间：2013-04-17T17:45:18.117
> 
> 标签：java, unit-testing

我试图了解如何测试用户的输入（请注意，我不是在尝试进行模拟测试，而是对实际用户输入的测试）

目前，正如您在我的程序中看到的那样，我已经对我的测试用例的值进行了硬编码，并且它通过了所有测试，但是我怎样才能获得用户的输入并对其进行测试。

有没有办法可以在我的构造函数中调用 System. 并在我在测试类中创建 MyClass1 的实例时传递它？

如果可能的话，请给我一些示例代码，以便我更好地理解。

如果我有这样的界面

```
public interface IMyClass{
   public int getvalue1();
   public int getvalue2();
   public int getvalue3();
} 
```

然后是这样的接口实现

```
public class MyClass1 implements MyClass{

private int _value1 = 0;
private int _value2 = 0;
private int _value3 = 0;

public MyClass1(int number1, int number2, int number3)
{

   _value1 = number1;
    _value2 = number2;
    _value3 = number3;
}

public void setLength1(int value1)
{
    _value1 = value1;
}

public void setLength2(int length2)
{
    _value2 = value2;
}

public void setLength3(int length3)
{
    _value3 = value3;
}

public int getValue1()
{
    return _value1;
}

public int getValue2()
{
    return _value2;
}

public int getValue3()
{
    return _value3;
}
} 
```

最后是一个测试类：

```
public class ClasTest extends TestCase {

public void testNumbers()
{
   MyClass1 numbers= new MyClass1(1,2,3);
   assertThat(numbers.getValue1(),is(not(numbers.getValue2())));

}
} 
```

谢谢你，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T17:50:47.757

使用`System.setIn(new InputSteam());`然后写入传入到 System.in 的输入流

请参阅：[JUnit：如何模拟 System.in 测试？](https://stackoverflow.com/questions/1647907/junit-how-to-simulate-system-in-testing)

**单输入**

```
String data = "Users Input";
System.setIn(new ByteArrayInputStream(data.getBytes()));

Scanner scanner = new Scanner(System.in);
System.out.println(scanner.nextLine()); 
```

结果

```
Users Input 
```

**多个输入**

```
String data = "Users Input" +
        "\nA second line of user input.";
System.setIn(new ByteArrayInputStream(data.getBytes()));

Scanner scanner = new Scanner(System.in);
System.out.println("Line 1: " + scanner.nextLine());
System.out.println("Line 2: " + scanner.nextLine()); 
```

结果

```
Line 1: Users Input
Line 2: A second line of user input. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:56:39.720

如果在 unix 上

`java MyProgram < sampleinput.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:49:25.603

用户扫描器类

```
public void testNumbers()
{

    Scanner scan = new Scanner(System.in);
    System.out.println("value1");
    int value1 = scan.nextInt();

    System.out.println("value2");
    int  value2 = scan.nextInt();

    System.out.println("value3");
    int value3 = scan.nextInt();

   MyClass1 numbers= new MyClass1(value1, value2, value3);
   assertThat(numbers.getValue1(),is(not(numbers.getValue2())));

} 
```

# java - 创建 16 位随机数 (JAVA)

> ID：16066673
> 
> 赞同：2
> 
> 时间：2013-04-17T17:45:19.397
> 
> 标签：java, eclipse, eclipse-plugin

我想在java中随机创建16位数字。我可以用 String 来做，然后转换为 Long。还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:49:46.187

您可以使用 Java 类 Random 来生成随机 Longs，就像这里的数字高达一百万：

```
final long MAX_NUMBER_YOU_WANT_TO_HAVE = 9999999999999999L;
final long MIN_NUMBER_YOU_WANT_TO_HAVE = 1000000000000000L;
Long actual = Long.valueOf(Math.abs(Float.valueOf(new Random().nextFloat() * (MAX_NUMBER_YOU_WANT_TO_HAVE - MIN_NUMBER_YOU_WANT_TO_HAVE)).longValue())); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T17:54:44.613

如果您绝对需要 16 位数字（不是从 0 到 10^17-1 的数字）

```
Random rand = new Random;
long accumulator = 1 + rand.nextInt(9); // ensures that the 16th digit isn't 0
for(int i = 0; i < 15; i++) {
    accumulator *= 10L;
    accumulator += rand.nextint(10);
} 
```

我可能在 for 循环上有一个单独的，`i < 16`如果需要的话使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T17:55:56.970

您想要 16 位数字的原因可能是这里的关键。

如果您只想要一个可能与最大 16 位数字一样大的数字，请使用您喜欢的随机数生成器生成介于`0`和之间的随机数`9 999 999 999 999 999`。如果这是原因，您可以根据需要添加前导零以准确显示 16 个字符。

如果您明确希望有 16 个十进制数字并且第一个不能为零，则可以尝试使用`999 999 999 999 999`as 上限进行相同的练习，并在前面添加一个从 1 到 9 的随机数字（将其乘以千万亿然后与另一个随机数，如果需要的话）。

还有很多其他选择，但这些可能是最明显和最容易实现的。我很确定Java中有用于生成随机长数的本地工具。

# batch-file - 批处理文件以递归方式将单个子目录从多个父目录移动到另一个单个定义的目录

> ID：16066675
> 
> 赞同：2
> 
> 时间：2013-04-17T17:45:23.563
> 
> 标签：batch-file, windows-7, move, file-processing

如果该标题还不够令人困惑..希望我想做的事情更容易理解。

Windows 7 以防万一。

我正在工作的文件夹中有多个目录；

```
C:\WorkingDir\1
C:\WorkingDir\2
C:\WorkingDir\3
and so on 
```

在每个文件夹（1、2、3 等）中都有一个子目录，没有其他文件或文件夹；

```
C:\WorkingDir\1\5E04AB
C:\WorkingDir\2\4F07FC
C:\WorkingDir\3\9DA04F 
```

我需要将每个子目录从父文件夹中移动到一个新文件夹；

```
C:\NewFolder\5E04AB
C:\NewFolder\4F07FC
C:\NewFolder\9DA04F 
```

就是这样！我认为这可能很简单，但我无法理解变量或解释如何使用它们的更好资源。我根本不怎么使用批处理文件，所以我很抱歉这种求助的呼声。希望知识渊博的人有一个简单的解释可以帮助我:-)

我发现了这个：[http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)

但是有人可以将我链接到一个资源，在那里我可以了解有关批处理变量和参数的更多信息以供将来参考吗？

谢谢你，谢谢你，谢谢你

**更新：**

@endoro 感谢您的回复。我第一次尝试运行您的代码时一定有用户错误。它工作正常，一切都很好！非常感谢！

**更新 2** 运行用户 1 贡献的代码后，它将创建我的 NewFolder 目录，但不会向其中复制任何内容。它仍然是空的。这是我运行 DOS 时的一些重复输出：

```
C:\WorkingDir>(
set fldr2=C:\WorkingDir\1\5E04AB
 move "C:\WorkingDir\\" "C:\NewFolder\"
)
The system cannot find the file specified.

C:\WorkingDir>(
set fldr2=C:\WorkingDir\2\4F07FC
 move "C:\WorkingDir\\" "C:\NewFolder\"
)
The system cannot find the file specified.

C:\WorkingDir>(
set fldr2=C:\WorkingDir\3\9DA04F
 move "C:\WorkingDir\\" "C:\NewFolder\"
)
The system cannot find the file specified.` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:16:35.170

请查看输出并删除`echo`，如果没问题：

```
@echo off &setlocal 
set "workingdir=WorkingDir"
md "C:\NewFolder" 2>nul

pushd "%workingdir%"
cd
for /d %%i in (*) do for /d %%j in ("%%~i\*") do echo move "%%~fj" "C:\NewFolder\%%~nxj"
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:30:00.907

我无法对此进行测试，但是：

```
@echo off
setlocal EnableDelayedExpansion
md "c:\NewFolder\"
cd "C:\WorkingDir\"
for /D /r %%a in ("*") do (
    set fld1=%%a
    cd "%fld1%"
    for /D /r %%b in ("*") do (
        set fld2=%%b
        move "c:\WorkingDir\%fld1%\%fld2%" "C:\NewFolder\%fld2%"
        )
    ) 
```

还有一个很好的批处理资源：

[http://ss64.com/nt/](http://ss64.com/nt/)

# delphi - DELPHI：WSDL 导入错误

> ID：16066677
> 
> 赞同：1
> 
> 时间：2013-04-17T17:45:24.847
> 
> 标签：delphi, wsdl, delphi-2005

使用 Delphi 2005，我从这里导入 WSDL：[https ://certtransaction.elementexpress.com/express.asmx?wsdl](https://certtransaction.elementexpress.com/express.asmx?wsdl)

当我导入此 WSDL 时，其中一种类型是“TransactionSetup”，它没有正确导入。根据文档“TransactionSetup”应具有以下内容：

```
<s:complexType name="TransactionSetup">
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupID" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupAccountID" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupAcceptorID" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupApplicationID" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupApplicationName" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TransactionSetupApplicationVersion" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="TransactionSetupMethod" type="tns:TransactionSetupMethod"/>
<s:element minOccurs="1" maxOccurs="1" name="Device" type="tns:Device"/>
<s:element minOccurs="1" maxOccurs="1" name="Embedded" type="tns:BooleanType"/>
<s:element minOccurs="1" maxOccurs="1" name="CVVRequired" type="tns:BooleanType"/>
<s:element minOccurs="1" maxOccurs="1" name="AutoReturn" type="tns:BooleanType"/>
<s:element minOccurs="0" maxOccurs="1" name="CompanyName" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="LogoURL" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Tagline" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="WelcomeMessage" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="ReturnURL" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="ReturnURLTitle" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="OrderDetails" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="ProcessTransactionTitle" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="ValidationCode" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="DeviceInputCode" type="tns:DeviceInputCode"/>
</s:sequence>
</s:complexType> 
```

我得到的是：

```
 // ************************************************************************ //
  // Namespace : https://transaction.elementexpress.com
  // ************************************************************************ //
  TransactionSetup = class(TRemotable)
  private
    Fcredentials: Credentials;
    Fapplication: Application;
    Fterminal: Terminal;
    Ftransaction: Transaction;
    FtransactionSetup: TransactionSetup;
    Faddress: Address;
    FpaymentAccount: PaymentAccount;
    FextendedParameters: ArrayOfExtendedParameters;
  public
    destructor Destroy; override;
  published
    property credentials: Credentials read Fcredentials write Fcredentials;
    property application: Application read Fapplication write Fapplication;
    property terminal: Terminal read Fterminal write Fterminal;
    property transaction: Transaction read Ftransaction write Ftransaction;
    property transactionSetup: TransactionSetup read FtransactionSetup write FtransactionSetup;
    property address: Address read Faddress write Faddress;
    property paymentAccount: PaymentAccount read FpaymentAccount write FpaymentAccount;
    property extendedParameters: ArrayOfExtendedParameters read FextendedParameters write FextendedParameters;
  end; 
```

我发现的一件事是，有一个方法和一个类型都名为“TransactionSetup”，并且导入器似乎以某种方式将方法的参数捕获为类型参数。这是导入的方法：

```
 ExpressSoap = interface(IInvokable)
  ['{83D77575-DBDE-3A05-D048-60B2F6BCDFE6}']
    procedure TransactionSetup(const credentials: Credentials; const application: Application; const terminal: Terminal; const transaction: Transaction; const transactionSetup: TransactionSetup; const address: Address; const paymentAccount: PaymentAccount; const extendedParameters: ArrayOfExtendedParameters; out response: Response); stdcall; 
```

有没有办法让进口商获得“TransactionSetup”类型的正确类型参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:06:36.930

我使用 Delphi 7。我遇到了类似的问题。我下载了更新导入器 WSDL 和 WebService/SOAP 运行时。此更新与 D2007、D7、D2005 和 D2006 兼容：
[http ://cc.embarcadero.com/Item/24535](http://cc.embarcadero.com/Item/24535)

如果您需要更多详细信息，请参阅我的博客。西班牙语，对不起： [http ://www.3engine.net/wp/2010/02/invocando-un-servicio-web-wcf-desde-delphi-7](http://www.3engine.net/wp/2010/02/invocando-un-servicio-web-wcf-desde-delphi-7)

# bash - 如何确定 VirtualBox 设备是否无头？

> ID：16066681
> 
> 赞同：2
> 
> 时间：2013-04-17T17:45:30.660
> 
> 标签：bash, virtual-machine, virtualbox

VirtualBox 虚拟机可以无头启动或使用传统的 GUI 类型启动。我已经筛选了`vboxmanage`文档，但找不到查询当前类型的方法。除了 grepping 正在运行的进程或 X 窗口之外，确定 VM 是否来自 Bash 的无头的最佳机制是什么？

注意：我也尝试过在无头会话`vboxmanage showvminfo`和`vboxmanage guestproperty enumerate`GUI 会话之间进行区分，但唯一的差异是时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:07:46.167

一些想法...

如果您使用的是 Linux，请尝试比较他们的 /proc/${PID} 目录。也许您可以在 fd/ 中找到打开的套接字或在 environ 中设置 DISPLAY env。注意它是零终止的（使用 tr '\0' '\n'）。

干杯

# javascript - 如何在新的div中换行？

> ID：16066683
> 
> 赞同：4
> 
> 时间：2013-04-17T17:45:36.737
> 
> 标签：javascript, jquery, wrapper, gettext

我的 HTML：

```
<div class="mainDiv">
  <p>This is a paragraph</p>
  <div class="innerDiv">This is a div</div>
  This is what I want to wrap
</div>
```

我想要的是：

```
<div class="mainDiv">
  <p>This is a paragraph</p>
  <div class="innerDiv">This is a div</div>
  <div class="wrapper">
    This is what I want to wrap
  </div>
</div>
```

我试过了：

```
$('.mainDiv').find(".innerDiv").next().wrap('<div class="wrapper" />') 
```

但它不起作用。我怎样才能达到上述结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:47:41.287

您可以将 jQuery [contents()](http://api.jquery.com/contents/)与[slice](http://api.jquery.com/slice/)方法一起使用：

```
$('.mainDiv').contents().slice(-1).wrap('<div class="wrapper"/>'); 
```

[**工作演示**](http://jsfiddle.net/duDmZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:52:45.457

另一种解决方案使用`nextSibling`：

```
$($('.mainDiv .innerDiv')[0].nextSibling).wrap('<div class="wrapper">'); 
```

[http://jsfiddle.net/4MCen/](http://jsfiddle.net/4MCen/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:59:58.387

另一种解决方案

```
$('.mainDiv').contents().last().wrap('<div class="wrapper"/>'); 
```

[**工作演示**](http://jsfiddle.net/mohammadAdil/VTDHL/)

# php - foreach loops with 2 mysql queries

> ID：16066689
> 
> 赞同：-1
> 
> 时间：2013-04-17T17:45:49.193
> 
> 标签：php, mysql, foreach

I've contracted a simple tagging system,

My PHP page gets a string of tags, First it 'exlpode' them and then I use a foreach loop to find the tag id in the id-tagname table, once I found the tag id I place it in another table called articledtaged, where there two values, article id and tag id.

This is the code:

```
if (isset($_POST['tag'])&&!empty($_POST['tag'])){
    $tag = $_POST['tag'];
    $tagsarr = explode(",", $tag);
    print_r ($tagsarr);
    foreach($tagsarr as $key=>$row){
    echo $row ;

    $tagidquery = "SELECT id FROM tags WHERE tagname = '$row'";
    $results = mysql_query($tagidquery);
    $tagidarr = mysql_fetch_assoc($results);
    $tagid = $tagidarr['id'];
    echo $tagid;

    $taginsertquery = "INSERT INTO tagedarticle (articleid,tagid) VALUES('$yourarticleid','$tagid')";
    mysql_query($taginsertquery);
    } 
```

But the second part only works once,

For example, if I have 3 tags, "cool", "wonderful", "lame", each with its own id (lets say 4-6 for this example). The results will be

```
tagname     tagid    
cool         4
wonderful  (empty)
lame       (empty) 
```

But why?!

please advice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:01:42.110

如果你稍微改变一下逻辑怎么办。您正在用逗号分解标签值，所以为什么不使用 IN 语句将其放入选择查询中。然后您可以遍历返回的标签 ID 并将它们插入到您的多对多表中。

```
if ( isset($_POST['tag']) && !empty($_POST['tag']) ) {
    $tag = "'" . str_replace(",", "','", $_POST['tag']) . "'";
    $tagidquery = "SELECT id FROM tags WHERE tagname IN ($tag)";
    $results = mysql_query($tagidquery);
    while($row = mysql_fetch_assoc($results))
    {
        $tagId = $row['id'];
        $taginsertquery = "INSERT INTO tagedarticle (articleid,tagid) VALUES('$yourarticleid','$tagId')";
        mysql_query($taginsertquery);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:39:58.647

您可以使用 mysqli 准备好的语句，这些语句在循环中工作得更好并防止 sql 注入：

```
if ( isset($_POST['tag']) && !empty($_POST['tag']) )
{
    $tag     = $_POST['tag'];
    $tagsarr = explode(",", $tag);
    $con     = new mysqli('host', 'username', 'password', 'database');
    $select  = $con->prepare("SELECT id FROM tags WHERE tagname=? LIMIT 1");
    $insert  = $con->prepare("INSERT INTO tagedarticle (articleid,tagid) VALUES(?,?)";
    foreach($tagsarr as $key=>$row)
    {
        $select->bind_param("s", $row);
        $select->execute();
        $select->bind_result($id);
        $select->fetch();

        $insert->bind_param('ss', $yourarticleid, $id);
        $insert->execute();
    }
    $select->close();
    $insert->close();
    $con->close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:34:53.880

干净的：

```
 if (empty($_POST['tag']))
    return;

$tagsarr = explode(",", $_POST['tag']);
$tagsSQL = array();
foreach ($tagsarr as $tag)
    $tagsSQL[] = '"'.mysqli_real_escape_string($link, trim($tag)).'"';

$tagidquery = "SELECT id FROM tags WHERE tagname IN (".implode(",", $tagsSQL.")";
$results = mysql_query($tagidquery);
while($row = mysql_fetch_assoc($results)) {
    $tagId = $row['id'];
    $taginsertquery = "INSERT INTO tagedarticle (articleid,tagid) VALUES(".intval($yourarticleid).",".intVal($tagId).")";
    mysql_query($taginsertquery);
} 
```

# apache-flex - Spark ItemRenderer“速记”导致奇怪的行为

> ID：16066690
> 
> 赞同：2
> 
> 时间：2013-04-17T17:45:49.740
> 
> 标签：apache-flex, flex4, behavior, itemrenderer

我有一个简单的 ItemRenderer，当我在 Spark 产品列表中使用它时会导致奇怪的行为。定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
  xmlns:s="library://ns.adobe.com/flex/spark" 
  xmlns:mx="library://ns.adobe.com/flex/mx"
  creationComplete="setProduct()">

  <fx:Script>
    <![CDATA[

      [Bindable]
      private var p:MyProduct;

      private function setProduct():void
      {
        p = data as MyProduct;
      }

    ]]>
  </fx:Script>

  <s:Label text="{p.name}" paddingTop="6" paddingBottom="4"
    color="{p.active ? Constants.BLACK : Constants.DISABLED_COLOR}"
    fontStyle="{p.active ? 'normal' : FontStyle.ITALIC}"/>

</s:ItemRenderer> 
```

它与 List 的默认 ItemRenderer 基本相同。我决定使用该变量`p`，这样我就不必`(data as MyProduct)`在标签绑定中一遍又一遍地编写（这在更大、更复杂的 ItemRenderer 中尤其麻烦）。

它导致的行为似乎“反转”了显示的项目，但项目的实际顺序保持不变。当产品使用新值更新时会发生这种情况。例如，我将有一个产品列表`A B C D`。如果我更新其中任何一个的属性，则 List 会将顺序更改为*show* `D C B A`。但是如果我点击这个反向列表中的产品 D，它仍然会“加载”产品 A。 [这篇文章描述了一个类似的问题](https://stackoverflow.com/q/2540821/209107)，但没有包含代码，所以我不确定它是否完全相同。

我将此错误跟踪到使用变量`p`. 如果我只是`(data as MyProduct)`在标签绑定中使用，它可以正常工作。如果我从上面的链接中获取示例并`setProduct()`在事件上运行该方法`dataChange`，那么错误就会消失并按预期工作。但是，我不相信这不仅仅是巧合。

有没有其他人经历过这样的事情？问题是否与使用事件直接相关`creationComplete`？我在想这可能`creationComplete`只开火一次，就把一切都搞砸了。不确定这与列表反转显示的产品有什么关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:54:01.220

这可能是由于项目渲染器被回收。我会覆盖数据设置器而不是使用creationComplete，这样您就可以确保捕获对数据的更改。

```
override public function set data(value : Object) : void {
    super.data = value;
    p = value as MyProduct;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:04:54.003

有几件事。首先，如果您有要设置的值对象，那么我通常会在我的设置数据代码中进行设置。

```
override public function set data( value:OBject ):void
{
  super.data = value;
  p = value as MyProduct;
} 
```

但与我认为真正的问题相比，这是相对较小的豆子。方括号表示该属性绑定到该对象/对象链。所以我们不得不问，这个语句中绑定的对象是什么？

```
"{p.active ? 'normal' : FontStyle.ITALIC}" 
```

我并不是说它不应该起作用，但我们希望尽可能多地消除错误。所以如果我是你，我的代码应该是这样的。

```
[Bindable] public var fonstStyle:String;
[Bindable] public var color:int;
[Bindable] public var name:String;
private var _p:MyProduct;

override public function set data( value:OBject ):void
{
  super.data = value;
  _p = value as MyProduct;
  fonstStyle = _p.active ? 'normal' : FontStyle.ITALIC;
  color = _p.active ? Constants.BLACK : Constants.DISABLED_COLOR;
  name = _p.name;
} 
```

我也会摆脱那个“creationComplete”事件监听器。使用 ItemRenderers 时，任何基于数据的属性设置都应通过“设置数据”功能完成。

现在我查看了您的代码，您的渲染器可能在通过“creationComplete”创建之后设置了这些变量，然后它们没有被更新。

# c# - Programmatically Using Track Changes Comments in Outlook 2013 Add-in

> ID：16066693
> 
> 赞同：1
> 
> 时间：2013-04-17T17:45:53.330
> 
> 标签：c#, vsto, ms-office, outlook-addin, outlook-2013

I've developed a VSTO Outlook add-in that uses the [track changes comment functionality](http://www.papercheck.com/images/2010-word-track-changes-step-8.png) of Word to highlight certain keywords in emails. This works great in Outlook 2010, but not in Outlook 2013\. When I attempt to do this, I get the following exception:

```
System.Runtime.InteropServices.COMException (0x800A11FD): This command is not available.
    at Microsoft.Office.Interop.Word.Comments.Add(Range Range, Object& Text) 
```

This seems to imply that the function is not available, even when using Word as the Outlook message editor. I checked this by verifying the registry key `HKEY_CURRENT_USER\Software\Microsoft\Office\15.0\Outlook\Options\Mail` value `EditorPreference` is set to `0x00030001` (`196609`), which should set Word as the editor.

I know that Microsoft changed [how comments work in Office 2013](http://blogs.office.com/b/microsoft-word/archive/2012/08/28/comments-and-revisions-in-word-2013.aspx), but the functionality is fundamentally the same from the user perspective.

**Does anyone have insight into why this could be happening, or more importantly a fix or workaround?**

My code is below:

```
var document = Inspector.WordEditor as Word.Document;
foreach (Word.Paragraph paragraph in document.Paragraphs) {
    range = paragraph.Range;
    range.Collapse(Word.WdCollapseDirection.wdCollapseStart);
    range.MoveStart(Word.WdUnits.wdCharacter, highlight.Start);
    range.MoveEnd(Word.WdUnits.wdCharacter, highlight.Length);
    var comment = range.Comments.Add(range, "Look at this word!");
} 
```

# javascript - highcharts 反转 x 轴标签步进

> ID：16066694
> 
> 赞同：0
> 
> 时间：2013-04-17T17:45:54.037
> 
> 标签：javascript, highcharts

我有几个 highcharts 图表，显示用户可以自定义的日期范围内的数据。在指定范围非常长且细化的情况下，我通过将 xAxis.options.labels.step 设置为某个值 n 来告诉 highcharts 跳过 x 轴标签。

我的问题是，这通常会导致 x 轴上的最后一个日期不显示。默认情况下，Highcharts 将始终显示第一个（最左侧）日期，然后显示每个第 n 个标签，直到图形的边缘，但这并不总是包括最终标签。

对于我的用例，我希望相反：我希望始终显示最终日期，然后显示每个向左移动的第 n 个日期，不一定包括第一个日期。是否有一个我缺少的旋钮可以让我调整 highcharts 以获得这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:16:22.487

我决定使用 tickPositioner 并手动应用日期格式。我设法找到了一种方法来正确显示 x 轴标签。

# python - Add an extra information in a python plot?

> ID：16066695
> 
> 赞同：6
> 
> 时间：2013-04-17T17:45:54.077
> 
> 标签：python, matplotlib

Suppose we have a figure with three plots in it for three different parameters. But for the all three plots We have same temperature T=4K . Then how can I add this information in the figure?

I am not interested to write it in the Caption. I want it on the figure itself.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T18:35:01.147

**[figtext](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.figtext)**会很好用。

`figtext`over `text`and的优点`annotate`是`figtext`默认使用图形坐标，而其他默认使用坐标轴的坐标（因此，如果不同绘图之间的坐标轴不同，“T=4K”会四处移动）。

```
import matplotlib.pyplot as plt

plt.figure()
plt.xlim(-10, 10)
plt.ylim(0, .01)
plt.figtext(.8, .8, "T = 4K")
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/T3plv.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T20:38:57.513

这是使用的演示`annotate`。查看[此示例](http://matplotlib.org/examples/pylab_examples/annotation_demo2.html)以了解不同样式的注释。

```
import matplotlib.pyplot as plt
import numpy as np

plt.ion()
fig, ax = plt.subplots()

x = np.linspace(0,4,100)

plt.plot(x,2*x)
plt.plot(x,x**2)
plt.plot(x,np.sqrt(8*x))

ax.annotate('T = 4K', xy=(2,4), xycoords='data',
            xytext=(-100,60), textcoords='offset points',
            arrowprops=dict(arrowstyle='fancy',fc='0.6',
                            connectionstyle="angle3,angleA=0,angleB=-90"))

plt.show()
raw_input() 
```

![在此处输入图像描述](https://i.stack.imgur.com/9VQcR.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-03T19:16:10.713

[`figtext`](https://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.figtext)可以在多个子图图形的底部进行注释，就像独立于图形的注释一样，因此您可以在一张图片中添加额外的注释或备注。我也在找这个。感谢你们！:-)

```
import matplotlib.pyplot as plt

plt.figure(1)
plt.suptitle("SOME TITLE HERE")
#FIRST SUBPLOT
plt.subplot(311)
plt.ylabel(r"$a [m/s^2]$") # YOU CAN USE LaTeX TYPESETTING IN PYPLOT STRINGS!
plt.xlabel("time [s]")
plt.grid(True)
plt.plot(some_data)
# SECOND SUBPLOT
plt.subplot(312)
...
# THIRD SUBPLOT
plt.subplot(313)
...
# BOTTOM LABEL
plt.figtext(0.5, 0, "SOME LABEL BELOW ALL SUBPLOTS", ha="center", fontsize=7, bbox={"facecolor":"orange", "alpha":0.5, "pad":5})
# DRAW THE PLOT
plt.show() 
```

如果 ， Notre`ha=center`将使字符串居中`x=0.5`。您还可以使用`fontsize`和`bbox`参数来更改字符串及其区域的外观。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T17:51:36.390

好吧，我不确定您的意思，但是您可以使用该`text()`方法将文本添加到情节中。

[在 matplotlib pyplot 中绘制文本](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.text)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T17:52:11.570

我建议在 T=4K 区域周围设置一个灰色水平区域

如果您查看matplotlib 文档`axhspan(ymin, ymax, xmin=0, xmax=1, **kwargs)`中[的 axes](http://matplotlib.org/api/axes_api.html)，您可以这样做：

![水平和垂直区域](https://i.stack.imgur.com/Zi2me.png)

# c# - Combinatorial optimization where several criteria must be satisfied

> ID：16066698
> 
> 赞同：1
> 
> 时间：2013-04-17T17:46:12.970
> 
> 标签：c#, algorithm

We are a group of first-year students studying computer science.

We are working on a project called "The electronical diet plan" (directly translated)

We want to make a program in C# that on a weekly basic calculate a diet plan that fullfiels/satisfies some criteria:

Your daily energy intake should not exceed the calculated calorie needs. (Ex. If we calculate that a person should eat 2000 calories per day, the diet plan should plan approximately 2000 calories)

The daily energy (calories) should be distributed as follows:

*   Fat 25-35%
*   Carbohydrates 50-60%
*   Proteins 10-20%

We have a "database" with food and how much fat, carbohydrates and proteins it contains + the approximate price. And we have a "database" with recipies and how much time it takes to cook it.

SO: We want to make a program that on a weekly basic calculate a good diet plan which satisfies the daily energy need (and how it should be distributed (fat, carbohydrates, proteins)). The program should also plan a diet plan that not takes a lot of time and not cost to much (the user defines a upper bound for the price pr. week).

SO.. We want help to find a method/algorithm that can combinate 3-6 dishes per day which satisfied this ^^ We have been looking at a lot of combinational optimizations algorithms/problems but mostly "The knapsack problem".

But these algorithms/problem is only satisfying one criteria or trying to find the "cheapest" solution. -> We want to satisfy a lot of criteria and want to find the best solution (not cheapest.. ex. fat has to be between 25-35%, not just be the lowest value)

We hope that some of you can help us with a good algorithm.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:46:03.200

当谈到寻找“最便宜”的解决方案而不是“最好的”时，您只需要重新定义“便宜”。

在优化理论中，通常指的是要最小化的成本函数-在您的情况下，“成本”可能是“与 30% 的脂肪百分比差异”，即吃 30% 的脂肪不需要任何成本，而吃 20% 作为 40%。当然，为了使方法更复杂，你可以称重，这样吃太多脂肪比吃太少更“昂贵”。

现在，如果您为每个标准创建成本，您还必须一起权衡它们，正如 mellamokb 在评论中指出的那样；为此，只需计算加权总成本。你最终会得到类似下面的东西：

> 饮食成本=（价格的重要性）*价格+（时间的重要性）*时间+（脂肪的重要性）*（与脂肪目标的偏差）+等...

如果你想让它不可能超出预算（花费的钱），你可以添加一些术语，比如
`over budget ? infinity : 0`让算法在预算内找到解决方案。您还可以限制用餐的重复等 - 或多或少是您的想象力（和计算能力）设置了限制。

现在您有了成本函数，您可以开始着手解决问题：最小化饮食成本。突然间，所有那些找到“最便宜”解决方案的算法都变得有意义了……；）

* * *

请注意，制定此成本函数通常是困难的部分。根据您权衡成本的方式，您会找到非常不同的解决方案；并非所有这些都是有用的（实际上它们中的大多数可能不会有用）。

# asp.net - Issue with   in texbox

> ID：16066704
> 
> 赞同：0
> 
> 时间：2013-04-17T17:46:38.063
> 
> 标签：asp.net

I want to avoid, and get rid of, any blank space that is showing up like this in my textbox `"&nbsp;"` How can I not show this blank space when the page loads? I am using a popup model extender so when it loads I get the blank space which causes an error when I try to save the data.

Here is my textbox:

```
<tr>
    <td>
        <asp:Label ID="Label24" runat="server" Text="BO_Start"></asp:Label>
    </td>
    <td>
        <asp:TextBox ID="Start" runat="server"></asp:TextBox>
    </td>
</tr> 
```

# jquery - jQuery array - duplicates are printed larger

> ID：16066705
> 
> 赞同：0
> 
> 时间：2013-04-17T17:46:45.770
> 
> 标签：jquery

I have this line of code

```
var songs = document.getElementsByTagName("span");
var songArray = jQuery.makeArray(songs);
$(songArray).appendTo(document.body); 
```

Which looks for span tags on a page, creates an array then displays them. I don't know if that's the best way to do it but it works. But the problem I'm having is I want to display the array and if there is a duplicate in that array, it deletes the duplicate and increases the font size of the first instance of it. Not sure how to get that done.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:59:48.397

下面的代码将选择所有`span`s 并将它们添加到正文中，除非添加了具有相同“值”的跨度，在这种情况下，字体大小将设置为`larger`但是函数 'getValue' 保留为“练习”，因为缺乏关于什么构成重复的信息

```
var songs = $("span")
    temp = {};
songs.each(function(){
  var value = getValue(this);
  if(!temp.hasOwnProperty()){
     (temp[value] = $(this).clone())
       .appendTo(document.body);
  } else {
     temp[value].css({"font-size":"larger"})
  }
}); 
```

# php - PHP组合数组所有数组元素

> ID：16066708
> 
> 赞同：0
> 
> 时间：2013-04-17T17:46:49.423
> 
> 标签：php, arrays

*假设我不想循环并构建一个新数组*，那么 PHP 中是否有内置方法可以将两个数组添加在一起并在第一个数组的键之后推送第二个数组的所有键？我用谷歌搜索，找不到任何可以做到这一点的东西，但想知道是否有人知道

例如结合这些..

```
array( 0 => "a", 1 => "b" );
array ( 0 => "c", 1 => "d" ); 
```

得到这个..

```
array( 0 => "a", 1 => "b", 2 => "c", 3 => "d" ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:48:25.277

这：

```
array_merge(array( 0 => "a", 1 => "b" ),array ( 0 => "c", 1 => "d" )); 
```

或者

```
array( 0 => "a", 1 => "b" ) + array ( 0 => "c", 1 => "d" ) 
```

第一个将覆盖重复的键，第二个不会。而且您可能必须对数组进行排序。

或者，您可以这样做：

```
array_merge(array_values(array( 0 => "a", 1 => "b" )), array_values(array ( 0 => "c", 1 => "d" ))) 
```

那肯定会奏效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:50:09.357

看看[array_merge](http://uk3.php.net/manual/en/function.array-merge.php)。

```
<?php
$ab = array('a', 'b');
$cd = array('c', 'd');

var_dump(
    array_merge($ab, $cd)
);

/*
    array(4) {
      [0]=>
      string(1) "a"
      [1]=>
      string(1) "b"
      [2]=>
      string(1) "c"
      [3]=>
      string(1) "d"
    }
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:52:16.250

你也可以试试：

```
<?php
    $array1 = array(0 => 'zero_a', 2 => 'two_a', 3 => 'three_a');
    $array2 = array(1 => 'one_b', 3 => 'three_b', 4 => 'four_b');
    $result = array_merge($array1, $array2);

    print_r($result);

    /*
    Array
    (
        [0] => zero_a
        [1] => two_a
        [2] => three_a
        [3] => one_b
        [4] => three_b
        [5] => four_b
    )
    */
?> 
```

[参考](http://www.php.net/manual/en/function.array-merge.php)

# http - Wireshark 不显示 GET 或 POST 数据

> ID：16066712
> 
> 赞同：0
> 
> 时间：2013-04-17T17:46:57.383
> 
> 标签：http, networking, get, wireshark, packet-sniffers

我是一名学生，我正在上我的第一个网络课程。我正在从事一项旨在让我习惯使用 Wireshark 并了解数据包传输的作业。部分任务是收集有关某个 GET 请求的一些数据，但我的 Wireshark 没有显示与 GET 或 POST 请求相关的任何内容。

我和我的导师讨论过这个问题，他也想不通。我已经尝试卸载/重新安装 Wireshark，但没有任何不同。

这是我应该获取 GET 数据时得到的结果：

```
26030 1157.859131000 128.119.245.12 10.0.0.7 HTTP 564 HTTP/1.1 404 Not Found (text/html) 
```

这是我连接到服务器后收到的第一个数据包（来自右键单击“复制”）。根据我从作业说明和讲师那里收集到的信息，这应该会收到一个 GET 请求。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:06:16.773

您可以使用像 firebug 这样的浏览器插件来检查正在交换的实际请求和响应标头。有时由于页面缓存，实际文档可能不会在仅标题后重新获取，例如自从被交换后修改或浏览器缓存版本未过期。

# angularjs - 使用 $routeChangeSuccess 上一个属性更改 AngularJS 位置/路线

> ID：16066717
> 
> 赞同：1
> 
> 时间：2013-04-17T17:47:17.567
> 
> 标签：angularjs

我有一个控制器登录，可以像这样保存以前的路线：

```
$scope.$on('$routeChangeSuccess', function (event, currentRoute, previousRoute) {
  security.previousRoute = previousRoute;
}); 
```

所以我将previousRoute保存在我的工厂安全中......

在那个工厂里，我需要用那个来改变我的位置！我怎样才能做到这一点？我试过了：

```
security.previousRoute.reload(); 
```

但是那个 Route 对象没有 reload 方法......

谢谢

我以前的Route 对象：

```
| y {params: Object, pathParams: Object, $$route: Object, loadedTemplateUrl: "/app/template/user/index.html", reloadOnSearch: true…}
 -  $$route: Object
 - loadedTemplateUrl: "/app/template/user.html"
 -  params: Object
 -  pathParams: Object
 -  __proto__: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:58:14.977

只需使用 $location 属性来设置 url

```
$location.path(security.previousRoute); 
```

# c++ - Segmentation fault when assigning value in double pointer

> ID：16066718
> 
> 赞同：0
> 
> 时间：2013-04-17T17:47:18.297
> 
> 标签：c++, pointers, segmentation-fault, assignment-operator

I have a double pointer that I am using to create an array of linked lists. Basically I am trying to take the data from my "cities" that is already in an array, and assign these cities in my "row" portion of this double pointer, so that I can iterate through these rows with a seperate "flight" data file, and if they match, then link all of the data onto that certain row in the double pointer.

My type.h file which contains the stuct for the node, etc:

```
#ifndef TYPE_H
#define TYPE_H
#include<string>

struct flight
{
    int flightID;
    std::string origin;
    std::string destination;
    int price;
};

typedef flight listItemType;

struct Node
{
    listItemType data;
    Node * next;
};

typedef Node ** nodePtr;
typedef Node * node;
#endif 
```

My flightMap.h file which contains all of my class objects:

```
#include "type.h"
#include <string>

using namespace std;
const int MAX = 50;
#ifndef flightMap_Class
#define flightMap_Class

class flightMapClass
{
    private:
        int size;
        string* cities;
        nodePtr flights;
        node Head;

    public:
        flightMapClass();
        ~flightMapClass();
        void readCities();
        void readFlights();
};

#endif 
```

and my flightMap.cpp which contains the operations for these objects:

```
#include "flightMap.h"
#include <string>
#include <iostream>
#include <cstdlib>
#include <fstream>

using namespace std;

flightMapClass::flightMapClass()
{
    size = 0;
    Head = NULL;
}

flightMapClass::~flightMapClass()
{
    node cur = Head;

    while(Head!=NULL)
    {
        cur->next = NULL;
        delete cur;
        Head = Head->next;
        cur = Head;
    }
}

void flightMapClass::readCities()
{
    int index = 0;
    ifstream fin;
    fin.open("cities.dat");
    fin >> size;
    cities = new string[size];
    while(fin.peek()!=EOF)
    {
        fin >> cities[index];
        index ++;
    }
    for(int i = 0; i < index -1; i++)
    {
        cout << cities[i] << endl;
    }
    fin.close();

}

void flightMapClass::readFlights()
{
    cout <<"Reading into Flight Data" << endl;
    flights = new Node * [size];
    for(int i = 0; i < size; i++)
    {
        flights[i]->data.origin = cities[i];
        cout << flights[i]->data.origin << endl;
    }
} 
```

When I try and run the program, here is the output.. (in my main file, I have it running readCities first, and then readFlights, so I have determined that the cities do actually load correctly into the array that I am loading in "readCities", since they do infact output correctly) :::

```
Albuquerque
Chicago
San-Diego
Nashville
San-Francisco
Miami
Dallas
Washington-DC
St-Louis
New-York-City
Los-Angeles
Boston
Las-Vegas
Orlando
Columbus
Seattle
Atlanta
Memphis
Houston
Austin
Denver
Minneapolis
Tampa
Portland
Kansas-City
Phoenix
Philadelphia
San-Jose
Charlotte
Detroit

reading flights
Reading into Flight data
Segmentation fault 
```

... I have essentially determined that it is coming from these lines of code::

```
flights[i]->data.origin = cities[i];
cout << flights[i]->data.origin << endl; 
```

How would I assign data into the "rows" portion of my flights so as to not get a segmentation fault? Is this not the correct way to set it up, because by the looks of it to me, its assigning a string to a string? I am confused.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:55:13.727

```
flights = new Node * [size]; 
```

是不足够的。这只是**一个节点指针数组**。指针尚未指向已分配的节点。

您还需要分配每个节点。

```
for(int i = 0; i < size; i++)
{
    flights[i] = new Node;
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
    flights[i]->data.origin = cities[i];
    cout << flights[i]->data.origin << endl;
} 
```

# java - 我似乎无法弄清楚如何打印出包括重复项在内的所有单词

> ID：16066719
> 
> 赞同：0
> 
> 时间：2013-04-17T17:47:19.050
> 
> 标签：java

我试图让它按升序打印出文本文件中的所有单词。当我运行它时，它会按升序打印出来，但它只打印一次出现的单词。我希望它打印出每个出现的单词（想要重复）。我不确定我做错了什么。另外我希望它只打印出单词而不是文本文件中的标点符号。我知道我需要使用“拆分”，只是不确定如何正确使用它。我以前用过一次，但不记得如何在这里应用它。

这是我到目前为止的代码：

```
public class DisplayingWords {

public static void main(String[] args) throws 
        FileNotFoundException, IOException 
{
    Scanner ci = new Scanner(System.in);
    System.out.print("Please enter a text file to open: ");
    String filename = ci.next();
    System.out.println("");

    File file = new File(filename);
    BufferedReader br = new BufferedReader(new FileReader(file));

    StringBuilder sb = new StringBuilder();
    String str;
    while((str = br.readLine())!= null)

    {
/*
 * This is where i seem to be having my problems.
 * I have only ever used a split once before and can not 
 * remember how to properly use it. 
 * i am trying to get the print out to avoid printing out 
 * all the punctuation marks and have only the words
 */

      //  String[] str = str.split("[ \n\t\r.,;:!?(){}]");
        str.split("[ \n\t\r.,;:!?(){}]");
        sb.append(str);
        sb.append(" ");
        System.out.println(str);
    }

    ArrayList<String> text = new ArrayList<>();
    StringTokenizer st = new StringTokenizer(sb.toString().toLowerCase());
            while(st.hasMoreTokens()) 
            {
                String s = st.nextToken();
                text.add(s);
            }

            System.out.println("\n" + "Words Printed out in Ascending "
                                + "(alphabetical) order: " + "\n");

            HashSet<String> set = new HashSet<>(text);
            List<String> arrayList = new ArrayList<>(set);
            Collections.sort(arrayList);
            for (Object ob : arrayList)
                System.out.println("\t" + ob.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:54:07.787

您的重复项可能在这里被删除

```
HashSet<String> set = new HashSet<>(text); 
```

a`set`通常不包含重复项，所以我只需对您的`text`数组列表进行排序

```
Collections.sort(text);
for (Object ob : text)
    System.out.println("\t" + ob.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:55:01.307

问题在这里：

```
HashSet<String> set = new HashSet<>(text); 
```

[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)不包含重复项。

您应该改用以下代码：

```
 //HashSet<String> set = new HashSet<>(text);
    List<String> arrayList = new ArrayList<>(text);
    Collections.sort(arrayList); 
```

同样对于拆分方法，我建议您使用：

```
s.split("[\\s\\.,;:\\?!]+"); 
```

例如考虑下面给出的代码：

```
String s = "Abcdef;Ad; country hahahahah?           ad! \n alsj;d;lajfa try.... wait, which wish work";
String sp[] = s.split("[\\s\\.,;:\\?!]+");
for (String sr : sp )
{
    System.out.println(sr);
} 
```

其输出如下：

```
Abcdef
Ad
country
hahahahah
ad
alsj
d
lajfa
try
wait
which
wish
work 
```

# database - Database versioning and migration techniques for schema & data

> ID：16066720
> 
> 赞同：2
> 
> 时间：2013-04-17T17:47:20.307
> 
> 标签：database, versioning, database-schema

I want to know what are the different techniques & tools used for database versioning and migration. I am also interested in saving a snapshot of the data along with the schema changes. Would that be a good practice?

I have come across tools like [`alembic`](http://alembic.readthedocs.org/en/latest/) and [`sqitch`](https://metacpan.org/module/App%3a%3aSqitch), although I haven't used either. I have around 200 table in PostgreSQL.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:53:43.933

1.  阅读有关将[Liquibase 与 PostrgeSQL 结合使用的信息](http://www.liquibase.org/databases)
2.  请您 DBA 创建数据（或完整）转储，您使用 Liquibase 的 ALTER-dumps 存储这些转储

# xcode - 无法在 IB 中更改视图的大小

> ID：16066721
> 
> 赞同：3
> 
> 时间：2013-04-17T17:47:21.903
> 
> 标签：xcode

我刚刚创建了一个 xib 并将一个独立的 UIView 拖入其中，但是我无法设置它的大小 - X、Y、宽度、高度在大小检查器中显示为灰色。

然而，这是我之前在其他项目中做过的事情——事实上，我只是打开了一个旧项目来检查，我在 xib 中有一个独立的 UIView，我可以在 IB 中调整它的大小。

为什么 IB 这次不允许我调整大小？

在我的新项目中的视图和我的旧项目中的视图之间对 IB 中的所有属性进行并排的视觉比较，我看不到任何不同的设置，这将解释 IB 允许在一个中设置大小但不允许在另一个中设置大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T17:50:43.693

您需要在 Attributes Inspector 中的 Simulated Metrics 部分下将大小设置为*Freeform 。*

# javascript - Removing a function for Safari ONLY in JQUERY

> ID：16066724
> 
> 赞同：0
> 
> 时间：2013-04-17T17:47:33.397
> 
> 标签：javascript, jquery, html

Basically I've created a single page website and I've used **JQuery** to create a **ScrollTo** effect when clicking on different links. Because I have a fixed div at the top of the page, I've offset the target to the height of the fixed div at the top of the page, so that when it scrolls, the contents isn't hidden by the fixed div at the top of the page:

```
if ($target) {
     var targetOffset = $target.offset().top - $("#div_at_top_of_page").outerHeight(); 
```

This works fine, scrolling the target div below my fixed navigation at the top of my page. However in Safari, the scroll to already scrolls below the div by default, so adding:

```
$("#div_at_top_of_page").outerHeight(); 
```

this causes Safari to scroll to the target, but also adding the height of the div at the top of the page, creating a margin.

I'm just looking for a solution to cancel this:

```
$("#div_at_top_of_page").outerHeight() 
```

for Safari only. Any help would be appreciated, thanks!

EDIT: I'm open to any other solutions rather than browser detection.

Here's the complete thing:

```
$(document).ready(function() {
 function filterPath(string) {
 return string
 .replace(/^\//,'')
 .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
 .replace(/\/$/,'');
    }
$('a[href*=#]').each(function() {
 if ( filterPath(location.pathname) == filterPath(this.pathname)
 && location.hostname == this.hostname
 && this.hash.replace(/#/,'') ) {
  var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
  var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor :    false;
   if ($target) {
     var targetOffset = $target.offset().top - $("#fixed_div_at_top").outerHeight();
     $(this).click(function(e) {
       $('html, body').animate({scrollTop: targetOffset}, 800);
       e.preventDefault();
       var d = document.createElement();
    d.style.height = "101%";
    d.style.overflow = "hidden";
    document.body.appendChild(d);
    window.scrollTo(0,scrollToM);
    setTimeout(function() {
    d.parentNode.removeChild(d);
        }, 10);
       return false;
     });
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:56:37.610

您的问题的直接答案是使用`$.browser`（[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/) - 很久以前已弃用并在 jQuery 1.9 中删除），但我不能推荐它。最好使用特征检测。最好不要依赖任何一种方法。之所以提供此答案只是因为您最初专门询问了针对 Safari 的问题。

# objective-c - 为什么我可以修改 const __restrict 指针但不能修改 typdef 版本？

> ID：16066730
> 
> 赞同：0
> 
> 时间：2013-04-17T17:48:02.133
> 
> 标签：objective-c, pointers, constants, restrict-qualifier

注意：我使用的是最新版本的 Xcode 附带的目标 C 编译器。

为什么这是合法的：

```
void verySpecial(const float* __restrict foo, const int size) {
    for (int i = 0; i < size; ++i) {

        // ... do special things ...

        ++foo;  // <-- Should be illegal to modify const pointer?
    }
} 
```

但是，如果我使用 typedef，它会做我认为应该做的事情。

```
typedef float* __restrict RFloatPtr;

void verySpecial(const RFloatPtr foo, const int size) {
    for (int i = 0; i < size; ++i) {

        // ... do special things ...

        ++foo;  // <-- Now this is a compiler error.
    }
} 
```

那么，typedef 的情况有什么不同，我不明白什么？阅读 __restrict 让我的大脑受伤，我什至不确定这是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:53:01.597

```
++foo;  // <-- Should be illegal to modify const pointer? 
```

是的。修改 const 指针是非法的。`const`但是，将非指针修改为非指针`const`。我觉得你很困惑

```
const float *foo 
```

和

```
float *const foo 
```

另外，当然你不能修改`restrict`指针，因为它没有意义。`restrict`告诉编译器该指针保证不会与其他指针重叠。如果您减少或增加指针，这个假设可能不再成立。

# php - 无法通过 post 方法获取文本区域的值

> ID：16066731
> 
> 赞同：4
> 
> 时间：2013-04-17T17:48:03.253
> 
> 标签：php, html, http-post

这是一个非常简单的形式，如下面的代码所示：

```
 <form method="POST" action="news.php?nid=2">
  <textarea id="txtcomment" style="width:100%; height: 70px;" maxlength="300"></textarea><br /><br />
  <input type="submit" class="button" style="float: right; cursor:pointer;" value="Comment">
 </form> 
```

但在 news.php 中我无法获得“txtcomment”的值

```
 echo $_POST['txtcomment']; 
```

它什么也不返回...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T17:49:41.737

这是因为您需要命名文本区域：

```
<textarea name="txtcomment"></textarea> 
```

该`id`参数与表单的工作方式没有任何关系（`label`s 除外，但这在这里并不重要）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T17:49:10.853

指定文本区域的名称属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T17:49:17.907

在 textarea 中添加名称属性

```
<textarea id="txtcomment" name="txtcomment" style="width:100%; height: 70px;" maxlength="300"></textarea> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-17T17:49:25.883

你需要有一个带有 txtcomment 的属性名称，你有一个属性 'id'

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-17T17:49:28.983

您必须定义一个名称属性（id 属性是可能的但不是必需的）。

```
<textarea name="txtcomment" ...> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-17T17:49:31.783

textarea name 必须是 txtcomment 而不是 id like

```
<form method="POST" action="news.php?nid=2">
<textarea id="txtcomment" name="txtcomment" style="width:100%; height: 70px;" maxlength="300"></textarea><br /><br />
<input type="submit" class="button" style="float: right; cursor:pointer;" value="Comment">
</form> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-17T17:49:29.797

命名数组中的字段的不是 id=""，而是 name=""。

```
<textarea name="txtcomment" id="txtcomment" style="width:100%; height: 70px;" maxlength="300"></textarea><br /><br /> 
```

# proxy - XPages headTag“书签”图标 - 由于代理路由，文件不存在

> ID：16066743
> 
> 赞同：0
> 
> 时间：2013-04-17T17:48:49.080
> 
> 标签：proxy, icons, xpages, favicon

我的 XPage headTag 代码在防火墙内正常工作。因为用户将通过代理访问此数据库，所以代理导致我的图标/书签图标出现问题。此错误出现在日志中：

文件不存在：C:/www/docs/ttt/apple-touch-icon-precomposed.png 其中“ttt”将引导您到下面的 Domino 服务器“路径”。

我们的 Domino 服务器上的路径是：/sss/database.nsf/apple-touch-icon-precomposed.png

png 文件位于我的图像资源中。我认为使用带有 href 参数和 png 文件名的 headTag 可以解决问题，特别是因为图像在数据库中。我需要对上面的路径进行硬编码吗？或者我如何动态编码？还是有完全不同的方法？谢谢！肯德拉

在 HTML 中，我可能会这样做：

```
<link rel="apple-touch-icon" href="touch-icon-iphone.png" />
<link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" />
<link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="144x144" href="touch-icon-ipad-retina.png" /> 
```

在 XPages Resources 的 headTag 中，我正在这样做：

```
<xp:headTag tagName="link" loaded="true" rendered="true">
            <xp:this.attributes>
            <xp:parameter name="rel" value="apple-touch-icon"
                    loaded="true">
                </xp:parameter>
            <xp:parameter name="href" value="AppIcon.png"></xp:parameter>
            </xp:this.attributes>
        </xp:headTag>
        <xp:headTag tagName="link" rendered="true" loaded="true">
            <xp:this.attributes>
                <xp:parameter name="rel" value="apple-touch-icon"></xp:parameter>
                <xp:parameter value="72x72" name="sizes"></xp:parameter>
                <xp:parameter name="href"
                    value="touch-icon-ipad.png">
                </xp:parameter>
            </xp:this.attributes>
        </xp:headTag>
        <xp:headTag tagName="link" rendered="true" loaded="true">
            <xp:this.attributes>
            <xp:parameter name="rel" value="apple-touch-icon"></xp:parameter>
            <xp:parameter value="57x57" name="sizes"></xp:parameter>
            <xp:parameter name="href" value="apple-touch-icon-precomposed.png"></xp:parameter>
            </xp:this.attributes>
        </xp:headTag>
        <xp:headTag tagName="link" rendered="true" loaded="true">
            <xp:this.attributes>
            <xp:parameter name="rel" value="apple-touch-icon"></xp:parameter>
            <xp:parameter value="114x114" name="sizes"></xp:parameter>
            <xp:parameter name="href" value="touch-icon-iphone-retina.png">
            </xp:parameter>
            </xp:this.attributes>
        </xp:headTag>
        <xp:headTag tagName="link" rendered="true" loaded="true">
            <xp:this.attributes>
            <xp:parameter name="rel" value="apple-touch-icon"></xp:parameter>
            <xp:parameter value="144x144" name="sizes"></xp:parameter>
            <xp:parameter name="href" value="touch-icon-ipad-retina.png">
            </xp:parameter>
            </xp:this.attributes>
        </xp:headTag> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:17:40.107

来自您的代理的消息“文件不存在”表明此请求实际上*没有*被重定向。成功的代理重定向永远不会导致向用户泄露代理 www 目录路径。错误显示完整路径的事实表明您的重定向失败。是时候重新访问您的代理设置了。在 Notes 方面无事可做。

# javascript - 如何将div移动到各个方向

> ID：16066744
> 
> 赞同：0
> 
> 时间：2013-04-17T17:48:50.470
> 
> 标签：javascript, jquery

> 单击相应按钮时，我想在各个方向上稍微移动一个 div（单击顶部按钮时移动到顶部，单击左按钮时移动到左侧......等等）。我可以在 jQuery 中做到这一点

请帮助我。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:55:49.333

```
$('.right').click(function() {
    $(".wrap").animate({ scrollLeft: "+=50" }, "slow");
    return false;
});

$('.down').click(function() {
    $(".wrap").animate({ scrollTop: "+=50" }, "slow");
    return false;
}); 
```

[http://jsfiddle.net/3xaPz/1/](http://jsfiddle.net/3xaPz/1/)

# c# - 店铺一览 MySQL数据库中的数组

> ID：16066747
> 
> 赞同：1
> 
> 时间：2013-04-17T17:49:04.503
> 
> 标签：c#, mysql, list

我正在做一个 C# 项目，我有一个类型的列表，`DbAndTables`例如

```
List<DBAndTableNames> myList = new List<DBAndTableNames>(); 
```

我需要将此列表的内容存储在 MySQL 数据库中，但我在 Google 上找不到任何关于如何奇怪地执行此操作的信息。我想我有一点回忆，我需要将它转换为字节数组，然后以某种方式将其写入数据库。

感谢您的任何帮助，您可以提供。

**更新** 我忘了提到这是一个多维列表数组，下面是列表使用的类定义。我查看了 XMLSerialization，但据我所知，这不支持多维列表。

```
public class DatabaseAndTableNames
{
    public string database;
    public List<string> tables = new List<string>();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:56:19.813

您可以做的是序列化并将其保存在数据库中。当你需要它时，你可以反序列化它。

*   [序列化和反序列化 .NET 对象的最快方法](https://stackoverflow.com/questions/4143421/fastest-way-to-serialize-and-deserialize-net-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:58:49.297

这是一种时髦的方法。您真的应该将其保存为第二个表中的一对多关系。但是，如果您真的想将数组的内容保存到数据库中的单个列，则必须以某种方式将数据序列化为文本（[XMLSerializer 很好且易于使用](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)）或者如果您只是存储一个字符串列表，创建一个管道或命令分隔列表并将其保存到列

# css - 使用 css 创建和定位 venn-diagram

> ID：16066748
> 
> 赞同：1
> 
> 时间：2013-04-17T17:49:05.423
> 
> 标签：css, venn-diagram

我正在尝试使用 css 创建一个效果——我想要三个看起来像维恩图的重叠圆圈。我想在圆圈上应用 css 动画变换，使它们看起来像脉动。

我目前正在尝试使用`&#183;`或·作为维恩图圈。但是，正如您（希望）看到的那样，这个角色的位置不是左对齐或右对齐......因此定位它非常困难。请注意下图中的点如何位于 100 像素 x 100 像素的边界框之外。

![在此处输入图像描述](https://i.stack.imgur.com/sZibA.png)

我想将 venn-diagram 的圆圈定位到它们的父元素中，以便将 venn-diagram 元素定位到其他地方。有没有更好的方法来创建这种外观？自定义字体？SVG？

```
<style>

@-webkit-keyframes dot1
{
    0%   {color: rgba(255, 0, 0, .3);}
    50%  {color: rgba(255, 0, 0, .8);}
    100%  {color: rgba(255, 0, 0, .3);}
}

.dot
{
    font-size: 200px;
    position: absolute;
}

.dot1
{
    -webkit-animation:dot1 2s infinite;
    top: 0;
}  

.dot2
{
    -webkit-animation:dot1 2s infinite;
    left: 20px;
    top: 0;
}  

.dot3
{
    -webkit-animation:dot1 2s infinite;
    top: 10px;
    left: 15px;
}  

.container
{
    border-style: solid;
    border-color: pink;
    border-width: 1px;
    width: 100px;
    height: 100px;
}

</style>
</head>
<body>

  <div class='container'>
  <span class='dot dot1'>&#183;</span>
  <span class='dot dot2'>&#183;</span>
  <span class='dot dot3'>&#183;</span>
  </div>

</body> 
```

[http://jsbin.com/ozeham/1/edit](http://jsbin.com/ozeham/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:00:54.320

您可以简单地使用 ccs3 ( ) 创建一个圆圈，而不是使用点字符`border-radius`。这些圈子更容易控制：http: [//jsbin.com/ozeham/3/](http://jsbin.com/ozeham/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:55:55.887

SVG 可以正常工作 - 但如果您想坚持使用 CSS，请尝试只为维恩图使用较小的容器，然后定位容器以将整个图一起移动。

例如

```
<div class="venn">
    <div class="dot dot1"></div>
    <div class="dot dot2"></div>
    <div class="dot dot3"></div>
</div> 
```

然后使用`position: absolute`点（`top`和`left`属性来调整位置）。对于容器，使用`position: absolute` *或* `position: relative`将其放置在盒子内：

```
.venn {
    position: relative;
    top: 50%;
    left: 50%;
}
.dot {
    position: absolute;
} 
```

[http://jsbin.com/ozeham/6/edit](http://jsbin.com/ozeham/6/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:08:37.073

您可以解决此问题的方法数量。我不完全清楚你想通过这个实现什么。我会使用边界半径来创建圆圈。

[http://jsbin.com/ozeham/10/edit](http://jsbin.com/ozeham/10/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:09:14.963

当您可以使用如下语法时，为什么还要麻烦将字符用作圆圈：

```
.circle {
    width:whatever;
    height:whatever;
    border-radius:50%;
    opacity:33%;
}

#foo {
    background-color:#FF0000;
}

#bar {
    background-color:#00FF00;
}

#qux {
    background-color:#0000FF;
}

.container {
    position:relative;
    right:whatever;
    top:whatever;
} 
```

连同 HTML：

```
<div class="container">
    <div class="circle" id="foo"></div>
    <div class="circle" id="bar"></div>
    <div class="circle" id="qux"></div>
</div> 
```

# python - SQLAlchemy 与关联代理问题的关系

> ID：16066749
> 
> 赞同：3
> 
> 时间：2013-04-17T17:49:07.507
> 
> 标签：python, sqlalchemy

我一直在浏览许多网站以试图了解发生了什么，但我真的需要一些直接的帮助。如果我错过了文档中明显的内容，我很抱歉。

这是我正在尝试做的事情（除了基本代码，我已经删除了所有内容）：

```
Base = declarative_base()

class User(Base):
    __tablename__ = 'user'
    login = Column(String(60), primary_key=True, nullable=False)

    groups = association_proxy('user_to_groups', 'group', creator=lambda group: UserToGroup(group_name=group.name))

    def __init__(self, login, groups=None):
        self.login = login
        if groups:
            for group in groups:
                self.groups.append(group)

class Group(Base):
    __tablename__ = 'group'
    name = Column(String(100), primary_key=True, nullable=False)
    description = Column(String(100), nullable=True)

    users = association_proxy('group_to_user', 'user', creator=lambda user: UserToGroup(user_login=user.login))

    def __eq__(self, other):
        return self.name == other.name

class UserToGroup(Base):
    __tablename__ = 'user_to_group'
    user_login = Column(String(60), ForeignKey(User.login), primary_key=true)
    group_name = Column(String(100), ForeignKey(Group.name), primary_key=true)

    user = relationship(User, backref='user_to_groups', cascade='all') #, cascade="all, delete"  #, delete-orphan ?
    group = relationship(Group, backref='group_to_user', cascade='all') #, cascade="all, delete"  #, delete-orphan ?

group1 = Group(name ="g:superadmin")
group2 = Group(name ="g:admin")
session.add_all([group1, group2])
session.flush()
user1 = User(login = "test", groups=[group1, group2])
session.add(user1)
session.flush()

user1 = session.query(User).filter(User.login=='test').one()
print(user1.user_to_groups)
print(type(user1.groups), dir(user1.groups))
user1.groups.remove(Group(name='g:admin')) 
```

这是尝试运行后的响应回溯`user1.groups.remove(Group(name='g:admin'))`：

> AssertionError：依赖规则试图在实例“<UserToGroup at 0x7f33f49bd190>”上清除主键列“user_to_group.user_login”

我想要它做的只是删除`user_to_group`表中的行并相应地更新对象以反映更改。

当关系表没有映射到对象时，我已经让它工作了，[但是我需要将它映射到对象以使用继承](https://stackoverflow.com/questions/15958338/logging-versions-with-sqlalchemy-including-relationship-tables)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:08:52.537

级联从拥有父对象到被删除的子对象，因此 User.user_to_groups、Group.group_to_user：

```
class UserToGroup(Base):
    __tablename__ = 'user_to_group'
    user_login = Column(String(60), ForeignKey(User.login), primary_key=True)
    group_name = Column(String(100), ForeignKey(Group.name), primary_key=True)

    user = relationship(User, backref=backref('user_to_groups', cascade='all, delete-orphan'))
    group = relationship(Group, backref=backref('group_to_user', cascade='all, delete-orphan')) 
```

# c# - 创建函数 来自 MemberExpression 和常量

> ID：16066751
> 
> 赞同：3
> 
> 时间：2013-04-17T17:49:10.970
> 
> 标签：c#, .net, lambda, expression, expression-trees

我没有做足够的表达树工作来让这个工作......

本质上，我想要创建的是`m.MyProperty == 1`，用于采用`Func<T, bool>`.

我已经`MemberExpression`有了。我尝试了各种各样的事情，但我不断收到不同的错误。

我目前有这样的事情（不起作用）：

```
object const = 1;
var equalExpression = Expression.Equal( memberExpression, Expression.Constant( const ) );
var compiled = Expression.Lambda<Func<T, bool>>( equalExpression, Expression.Parameter( typeof( T ) ).Compile(); 
```

这给了我一个例外：

> System.InvalidOperationException：从范围“”引用的“MyType”类型的变量“m”，但未定义

我已经尝试过重新设计其中的几个不同部分，但没有提出任何可行的方法。

`const`是一个可以是任何类型的对象，但应该与`MemberExpression`.

**解决方案：**

```
object c = 1;
var parameterExpression = (ParameterExpression)memberExpression.Expression;
var equalExpression = Expression.Equal(memberExpression, Expression.Constant(c));
var compiled = Expression.Lambda<Func<T, bool>>(equalExpression, parameterExpression).Compile(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:53:23.047

这不起作用的原因是您在编译 lambda 时使用了“独立”参数表达式。您应该在创建`Expression.Parameter( typeof( T ))` *之前*创建，并在创建成员表达式和编译 lambda 时使用`memberExpression`相同的*实例：*`ParameterExpression`

```
var pe = Expression.Parameter( typeof( T )); // <<== Here
var memberExpression = Expression.PropertyOrField(pe /* Here */, "MyProperty");
var equalExpression = Expression.Equal( memberExpression, Expression.Constant( const ) );
var compiled = Expression.Lambda<Func<T, bool>>( equalExpression, pe ).Compile();
//                                                                ^^
//                                                                ||
//                                                             And here 
```

# sql - SQL Server：动态过程中的光标，插入 Null 值的错误 b/c

> ID：16066774
> 
> 赞同：0
> 
> 时间：2013-04-17T17:50:25.503
> 
> 标签：sql, sql-server, cursor

我会尽力解释......我正在将信息从一张表恢复到另一张表。即实际行已被删除，因此 PK 现在消失了。该表的备份存在于其他地方。我已经操纵格式以正确的顺序获取正确的列。

我设置了一个游标来获取每个值并插入。插入实际上发生在光标循环区域内。

所以我遇到的问题是它在循环时一次插入一个值。第一个插入是 PK 和繁荣。我正在测试的表中的某些值不允许空值。所以第二个只有主键被插入它打破了 b/c 我违反了表约束。当然，我稍后会输入这些值。但它们一次执行一个语句。想法？

# sql - 如何在 SQL 选择语句中将 2 列或更多列附加在一起

> ID：16066775
> 
> 赞同：0
> 
> 时间：2013-04-17T17:50:38.313
> 
> 标签：sql, oracle, append, grouping

环境：甲骨文。

示例数据：

`select col1, col2, col3 from tableName`产生这个：

```
COL1      COL2      COL3
The       Word      Was
Value1    Value2    Value3
I         Am        Table 
```

我想要这样的东西： `select (col1 + col2 + col3) as GroupCol from tableName`产生这个：

```
GROUPCOL
TheWordWas
Value1Value2Value4
IAmTable 
```

一列将三列合并为一列。

这将用于在运行 select 语句时将十个不同的位置列一起附加到 on 字段中。 **这必须在 SQL 级别**，而不是在某些报告层中高于它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:53:17.253

使用`||`运算符。

```
SELECT COL1 || COL2 || COL3 
```

# javascript - 关闭和这个澄清？

> ID：16066778
> 
> 赞同：4
> 
> 时间：2013-04-17T17:50:48.973
> 
> 标签：javascript

我在以下上下文中遇到了一个小问题`this`：

在 JavaScript`this`中，总是指我们正在执行的函数的“所有者”，或者更确切地说，指的是函数作为方法的对象。

所以，这段代码：

```
var o={

  f:function ()
     {
       console.log(this); //the owner of the function is `o`
     }
}

console.log(o.f()) // this shows the `o` as this 
```

一切都好。

那么为什么这个代码

```
var o = {
    f: function ()
    {
        return function ()
        {
            console.log(this);
        }
    }
}
console.log(o.f()()) 
```

表明这`this`是全局对象/窗口？

`o.f()`返回一个函数，然后我执行它。但 Hoster 对象仍然是`o`。那么为什么它显示主机为`window`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:58:05.330

的值`this`是由你调用函数的对象决定的，而不是函数被声明的地方。

例如，如果您执行了以下操作：

```
var f = o.f;
console.log(f()); 
```

你会看到那`this`也是窗口。

您还可以执行以下操作：

```
var o2 = { f: o.f };
console.log(o2.f()); 
```

在那里，`this`将是 o2 对象，而不是 o。

在您的情况下， of 正在返回一个函数，您在没有对象引用的情况下调用该函数。在这种情况下，调用的函数被调用并`this`设置为全局对象（在浏览器中是`window`）。

如果要保留`this`指针，则需要在闭包中捕获它，如下所示：

```
var o = {
    f: function ()
    {
        var self = this;
        return function ()
        {
            console.log(self);
        }
    }
}
console.log(o.f()()) 
```

然后无论如何调用它，您都将拥有正确的对象引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:57:27.887

不，返回的函数只是一个函数，不托管在任何对象上（`this`默认为全局对象）。将这种双重调用视为

```
var temp = o.f();
temp(); 
```

而不是那个“所有者上下文”的比喻（经常失败），最好参考[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。“所有者”对象解释仅适用于您在对象上*调用*方法的情况 - 一旦您将函数传递（进入回调，对其进行`return`分配，分配它）它就会失去其上下文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T17:58:34.777

`this`由函数的调用方式设置，而不是由它的存储位置设置。

`o.f()`有效，因为您`f()`在`o`. 如果您将该函数复制到另一个对象，`this`则会发生变化。

例如：

```
var x = {
  a: o.f
};

console.log(x.a()); // logs x, not o.  because the "context" is x 
```

在您的第二个示例中，`o.f()`返回一个函数，然后在“无上下文”的情况下运行该函数。这使得“上下文”设置为`window`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T17:55:39.523

答案很简单。您正在返回一个闭包并随后在窗口范围内对其进行评估。如果你没有返回函数，你就不会有这个问题。

解决方案：

```
var o = {
  f: function() {
    return function() { console.log(this); }
  }
};
console.log(o.f().apply(o, [])); 
```

将关闭的所有权`o`从无到有 (= `window`)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T18:16:57.597

当函数没有所有者时，获取本地上下文会退回到全局上下文，因为真正的上下文是`undefined`. 如果真实上下文是`null`.

在非严格模式下所有这些都是真的！

在严格模式下，获取本地上下文不会退回到其他任何东西。上下文保持原样，也就是说，在不拥有函数的情况下：`undefined`。意识到这一点非常重要。

# c# - 如何转换列表 运行时类型（列表 >)

> ID：16066779
> 
> 赞同：2
> 
> 时间：2013-04-17T17:50:54.033
> 
> 标签：c#, linq, casting, dapper, dynamic-language-runtime

我正在使用一种返回签名为`IEnumerable<dynamic>`. 在特定调用的运行时，它正在返回`List<Dapper.SqlMapper.FastExpando>`.

```
var x0 = repo.Find(proc, param); 
//x0 runtime type is {List<Dapper.SqlMapper.FastExpando>} 
```

`LINQPad.Extensions.Dump`表示运行时类型`x0`is:`List<IDictionary<String, Object>>`但我似乎无法转换/转换为`List<IDictionary<String, Object>>`. 这是 Linqpad 转储的屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/OoV7W.png)

最终，我需要将每个 Dictionary 中的所有 Values 加入到单个`IEnumerable<DateTime>`.

```
IEnumerable<DateTime> GetDates(int productId) 
{
    const string proc = "[dbo].[myproc]";
    dynamic param = new { Id = "asdf" };
    var x0 = repo.Find(proc, param); 
    //...
    //linq conversion from x0 to IEnumerable<DateTime> here.
} 
```

**我得到的错误**

```
List<IDictionary<String, Object>> x5 = repo.Find(proc, param); 
```

结果是：

```
RuntimeBinderException: Cannot implicitly convert type 'object' to
 'System.Collections.Generic
     .List<System.Collections.Generic.IDictionary<string,object>>'.
An explicit conversion exists (are you missing a cast?) 
```

**背景：** 我正在使用`Dapper`包装器，无法更改返回非规范化结果的数据库表/存储过程。存储过程返回 1 行 100 列，而不是 100 行 1 个数据元素。我想避免创建一个类来表示 100 列，并希望利用`Dapper`的自动能力通过 columnName、columnValue 的 IDictionary 将列数据转换为行。

**更新** 这似乎是动态参数的问题。当内联指定时，它可以工作。如果在本地指定然后作为参数传递，则失败。

```
IEnumerable<DateTime> GetDates(int productId) 
{
    const string proc = "[dbo].[myproc]";
    dynamic param = new { Id = "asdf" };

    //next line throws RuntimeBinderException: 'object' does not 
    //contain a definition for 'First'.
    //IDictionary<String, object> x0 = repo.Find(proc, param).First();

    //this succeeds:
    IDictionary<String, object> x0 = repo.Find(proc, new { Id = "asdf" }).First();

    IEnumerable<DateTime> qry2
       = x0.Values.AsQueryable()
           .Where(x => x != null)
           .Select(x => (DateTime) x);
    return qry2;
} 
```

以下是 和 的`Find`签名`Query`：

```
//Repository::Find
public IEnumerable<dynamic> Find(string procName, object param = null)

//Dapper SqlMapper::Query
public static IEnumerable<dynamic> Query(this IDbConnection cnn, string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:52:39.540

您可以使用 LINQ`Cast`方法强制转换序列中的每个项目。

```
List<IDictionary<String, Object>> data = repo.Find(proc, param)
    .AsEnumerable()
    .Cast<IDictionary<String, Object>>()
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:02:30.890

`Repo.Find`不返回`IEnumerable<dynamic>`. 它返回`object`。如果您确定它总是会返回 a `List<IDictionary<String, Object>>`，请执行以下操作：

```
List<IDictionary<String, Object>> x5 = (List<IDictionary<String, Object>>)repo.Find(proc, param); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T14:18:06.383

所以问题是，通过指定 param as`dynamic`导致方法被动态调用并且扩展方法不能再被链接。

所以你可以只使用`var`而不是`dynamic`：

```
 var param = new { Id = "asdf" };
 var data = repo.Find(proc, param)
.Cast<IDictionary<String, Object>>()
.ToList(); 
```

或者只是在调用之前将`dynamic`参数转换为：`object`

```
 var data = repo.Find(proc, (object)param)
.Cast<IDictionary<String, Object>>()
.ToList(); 
```

或者，如果`Find`真的返回一个运行时类型，`System.Collections.Generic.List<Dapper.SqlMapper.FastExpando>`只需转换结果以`dynamic`确保它在分配它之前使用它的运行时类型，并且特别重要的是分配给它，`IEnumerable<>`因为它是一个协变类型（`IList<>`或`List<>`将失败）。

```
IEnumerable<IDictionary<String, Object>> data = (dynamic) repo.Find(proc, param); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T03:08:06.860

## 解决方案

不要从您的方法中传回动态。Dapper 有一个 ToList< T > 扩展方法，所以你可以转换为任何支持的类型。在这种情况下，如果您确实需要低级关联数组，请传回 List< Dictionary < string, object >>。

还值得注意的是，C# 动态不会跨程序集边界编组，因此这可能是您遇到的潜在问题。如果要跨程序集进行封送处理，则需要使用 Expando、List< Dictionary < string、object >> 或两个程序集都引用的其他类型。

## 解释

这是包含 FastExpando（第 941 行）的[Dapper SQLMapper 源](https://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs?r=c9160c13fb45eb512f66524825612397aa3728ba)的旧版本。请注意 FastExpando 的类定义。

私有类 FastExpando : System.Dynamic.DynamicObject, IDictionary< string, object >

# php - 在控制器、视图和模型中放置逻辑

> ID：16066781
> 
> 赞同：0
> 
> 时间：2013-04-17T17:50:56.897
> 
> 标签：php, model-view-controller, laravel, eloquent, laravel-3

我正在生成一个包含单个模型中所有行的选择菜单，并且我提出了 3 种不同的解决方案 - 但我很难决定哪个最有意义并遵循 MVC / Laravel最佳实践。

**模型状态**

```
states table:
id    abbr    name
1     AL      Alabama
2     AK      Alaska
3     AZ      Arizona
4     AR      Arkansas
etc. 
```

* * *

**解决方案#1：**从控制器中的模型中检索所有状态，执行逻辑以在控制器中生成状态数组，将其传递给视图并使用带有传入数组的 laravel 表单类生成选择菜单。

*控制器：my_controller.php*

```
public function get_index()
{
    $states = State::all();
    foreach ($states as $state)
    {
        $states_array[$state->id] = $state->name;   
    }
        return View::make('my_view')->with('states_array',$states_array);
} 
```

*查看：my_view.php*

```
{{ Form::select('state_id',$states_array); }} 
```

* * *

**解决方案#2：**从控制器中的模型中检索所有状态，将检索到的状态模型传递给视图，执行逻辑以在视图中生成状态数组，并使用带有结果数组的 laravel 表单类生成选择菜单。

*控制器：my_controller.php*

```
public function get_index()
{
    $states = State::all();
    return View::make('my_view')->with('states',$states);
} 
```

*查看：my_view.php*

```
@foreach ($states as $state)
    $states_array[$state->id] = $state->name;
@endforeach
{{ Form::select('state_id',$states_array); }} 
```

* * *

**解决方案#3：**向状态模型添加一个 all_array()（或可选地扩展所有）方法，该方法提取所有状态记录，执行逻辑以创建数组并返回结果数组。在控制器中调用所述方法并将其传递给视图。使用传入数组的 laravel 表单类生成选择菜单。

*型号：my_model.php*

```
public static function all_array()
{
    $states = self::all();
    foreach ($states as $state)
    {
        $states_array[$state->id] = $state->name;   
    }
    return $states_array;
} 
```

*控制器：my_controller.php*

```
public function get_index()
{
    $states = State::all_array();
    return View::make('my_view')->with('states',$states);
} 
```

*查看：my_view.php*

```
{{ Form::select('state_id',$states); }} 
```

那么这 3 种解决方案中的哪一种最有意义，并且更紧密地遵循 MVC / Laravel 最佳实践？可选 - 是否有比上述 3 更好的解决方案？

任何和所有的回应都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:07:20.357

我会选择选项一，但使用模型中的 lists() 方法对其进行简化。

```
$states_array = State::lists( 'name', 'id' ); 
```

这会产生您正在寻找的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:54:12.567

我会选择解决方案#3。没有理由模型只需要以 ORM 方式运行。如果检索完整的状态列表是您需要执行的常见活动，那么请务必将其添加到您的模型类中。这样，如果您需要做任何事情，例如排除某些状态，您可以在一个地方进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:47:25.790

我不会使用任何这些解决方案。您应该实现演示者模式以包装任何演示逻辑并将其置于视图之外。将其保留为模型可能是下一个最佳方法，但理想情况下，您应该将域逻辑与表示逻辑分开。

有一些[演示者包](http://bundles.laravel.com/search?q=presenter)，Laravel 4 甚至有一些[演示者包](https://packagist.org/search/?q=laravel%20presenter)可用。

养成分离逻辑的习惯很棒，尤其是当你意识到你在视图中做了很多表示逻辑时。

但需要明确的是，最好的方法是使用上述`lists()`方法。不过还是给演示者看看。

# shell - 如何区分函数参数和 /bin/sh 脚本中的脚本参数？

> ID：16066790
> 
> 赞同：1
> 
> 时间：2013-04-17T17:51:24.220
> 
> 标签：shell, arguments, command-line-arguments, sh

显然，您可以通过 $1、$2 等访问a的**参数。**`shell script`

但是如果你在脚本中执行一个函数，你可以以同样的方式访问**参数。**`function`

如果我想创建一个接收参数并且还具有接收参数的函数的 shell 脚本，该怎么做？

我试过这样做但是范围中断，如果我没有向脚本传递任何参数，该函数认为没有参数:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:32:02.180

我没有发现这种情况，函数参数的范围与脚本参数的范围不同

```
bar ()
{
  echo $1
}
echo $1
bar bird 
```

输出

```
$ foo.sh

bird

$ foo.sh dog
dog
bird 
```

# visual-studio-2012 - 无法使用团队基础服务器 2012 创建新的构建代理

> ID：16066791
> 
> 赞同：1
> 
> 时间：2013-04-17T17:51:28.337
> 
> 标签：visual-studio-2012, tfsbuild, build-agent

我们最近升级到了团队基础服务器 2012 更新 2，现在我们在尝试添加新的构建代理时遇到错误。

错误：TF900559：构建代理 MyBuildAgent 无法为构建控制器 MyBuildControler 提供服务。生成控制器和代理必须运行相同版本的 Team Foundation Build。

现在我已经确保我们运行的是正确的版本，甚至尝试了全新安装、更新 1 和更新 2，但我仍然收到此错误消息。

我应该注意到，这个构建代理是通过复制我们拥有的另一个代理并重命名所有内容而创建的。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:48:17.223

@user2291942

我在尝试将 TFS 2012 Update 2 与 TFS 2010 构建服务器集成时收到此错误。我知道 2012 Update 2 旨在允许这样做，但我已经在 Application Tier Server 上配置了控制器（我想很多人都这样做），它显然正在运行 TFS 2012 Update 2。

为了纠正这个问题，我将 TFS 2010 服务器配置为连接到 TFS 2012 Update 2 应用程序层/存储库的构建控制器。然后，在创建构建代理并将它们附加到该控制器时，问题得到了解决。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T18:07:23.490

您确定已在 TFS App Server + Build Controller + Build Agent 上升级到 TFS 2012 Update 2 吗？

如果不这样做，我建议只在构建代理服务器上卸载 TFS 并重新安装 TFS。这是一个相对快速和无痛的过程。

# javascript - Javascript 显示非常大的数字而不是显示 xe+n

> ID：16066793
> 
> 赞同：6
> 
> 时间：2013-04-17T17:51:36.373
> 
> 标签：javascript, math

我有经常输出非常大的数字的 javascript 代码，我希望完全显示而不是获得一个值，例如`2.7934087356437704e+56`我希望它显示整个数字。有可能在 JS 中实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:02:44.077

如此大的数字，您将失去 Javascript 的精度。它返回的指数形式是 Javascript 可以表示的最精确的形式。但是，如果您不关心精度的损失并且只想要一个扩展数字的字符串，您可以使用您自己的函数来执行此操作。我找不到可以本机执行此操作的方法，因此您必须自己添加它。

[我找到了Jonas Raoni Soares Silva](http://jsfromhell.com/string/expand-exponential)为你做的这个片段：

```
String.prototype.expandExponential = function(){
    return this.replace(/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/, function(x, s, n, f, c){
        var l = +c < 0, i = n.length + +c, x = (l ? n : f).length,
        c = ((c = Math.abs(c)) >= x ? c - x + l : 0),
        z = (new Array(c + 1)).join("0"), r = n + f;
        return (s || "") + (l ? r = z + r : r += z).substr(0, i += l ? z.length : 0) + (i < r.length ? "." + r.substr(i) : "");
    });
}; 
```

一个使用示例是：

```
> var bignum = 2.7934087356437704e+56;
> (bignum+'').expandExponential();
"279340873564377040000000000000000000000000000000000000000" 
```

您必须先将数字转换为字符串，因此`+''`

如果您真的需要精确的精度，您可以尝试使用[Big Number](http://jsfromhell.com/classes/bignumber "大号")或[javascript-bignum 之](https://github.com/jtobey/javascript-bignum)类的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:53:40.943

在 JavaScript 中，所有数字都是浮点数，因此您没有绝对精度。

# jquery - jquery验证...验证方法不起作用但不抛出错误

> ID：16066797
> 
> 赞同：1
> 
> 时间：2013-04-17T17:51:52.663
> 
> 标签：jquery, jquery-validate

我有一个弹出式 notifyDa 并且弹出式显示 3 个不同的条件。这工作正常。我面临的问题是验证。验证方法不起作用。而且除了“必填”字段验证之外，我还有一个场景，其中有 2 个下拉列表，如果选择了其中一个，则可以提交表单。

我的弹出代码是

```
function notifyDa(daValueForUser) {
        var ctx = '${contextPath}';
        var queryUrl = ctx + "/excessList.htm?getDaList=true";

        var html = "<form id='notifyForm'><table><tr><td align='center' colspan='2'> Excess Notification </td></tr>";
        $.ajax({
            url : queryUrl,
            type : "POST",
            dataType : "text",
            success : function(result) {
                result = jQuery.parseJSON(result);  // as dataType is Text
                var items = result;

    if(daValueForUser>=4) {
                    html = html + "<tr><td>Select DA Holder</td><td><select id='daList'><option>select</option>";
                    for ( var i = 0; i < items.length; i++ ) {
                        html = html + "<option value='"+items[i]+"'>"+items[i]+"</option>";
                    }
                }
    if (daValueForUser<=3) { 
                    html = html + "<tr><td>Select DA4 Holder</td><td><select id='daList1'>";
                    for ( var i = 0; i < items.length; i++) {
                        html = html + "<option value='"+items[i]+"'>"
                                + items[i] + "</option>";
                    }
                    html = html + "</select></td></tr><tr><td>Select DA4 Holder</td><td><select id='daList2'>";
                    for ( var i = 0; i < items.length; i++) {
                        html = html + "<option value='"+items[i]+"'>"
                                + items[i] + "</option>";
                    }
                }
                html = html+"</select></td></tr><tr><td>Comments:</td><td><input name='comments'></td></tr>" +  
                    "<tr><td></td><td> <table><tr><td align='right'><button type='button' onclick='javascript:sendNotifyDetails();'>Send</button></td><td align='left'><button type='button' onclick='javascript:closeNotifyDaPopup();'>Cancel</button></td></tr></table></td></tr></table></form>";

                $('#notifyDiv').empty();
                $('#notifyDiv').html(html);

                $("#pop").click(function() {
                    $("#notifyDiv").fadeIn(1000);
                    if (!$("#notifyDiv").is(':visible')) {
                        return;
                    }
                });

                $("#notifyDiv").css({
                    left : ($(window).width() - $('#notifyDiv').width()) / 2,
                    top : ($(window).width() - $('#notifyDiv').width()) / 7,
                    position : 'absolute'
                });

                $('#daList1').change(function(e) {
                    index = this.selectedIndex;
                    $('#daList2 option').prop('disabled', false); // enable all options
                    if (index != 0) {
                        $('#daList2').get(0).selectedIndex = 0; // so you don't disable the option after it's selected
                        $('#daList2 option:eq(' + index + ')').prop('disabled', true);
                    }
                });
            },
            error : function() {

            }
        });

    } 
```

我的验证代码是

```
 function sendNotifyDetails(){
        alert("Inside close");

        $("#notifyForm").validate({
            submitHandler: function() { alert("Submitted!");},
            rules: {
                daList: "required",
                comments: "required"
            },
            errorElement: "div",
            messages: {
                daList:  "Select a DA Holder",
                comments: "Enter comments"
            }
        });

} 
```

* * *

它正在输入验证方法但不显示错误消息。我将错误元素作为 span 并在选项之前插入。现在我将代码更改为

```
function notifyDa(daValueForUser) {
        var ctx = '${contextPath}';
        var queryUrl = ctx + "/excessList.htm?getDaList=true";
        //daValueForUser=3
        var html = "<form id='notifyForm'><span class='errorMessage'></span><div id='error'></div><table><tr><td align='center' colspan='2'> Excess Notification </td></tr>";
        $.ajax({
            url : queryUrl,
            type : "POST",
            dataType : "text",
            success : function(result) {
                result = jQuery.parseJSON(result);  // as dataType is Text
                var items = result;

                if(daValueForUser>=4) {
                    html = html + "<tr><td>Select DA Holder</td><td><select id='daList'><option>select</option>";
                    for ( var i = 0; i < items.length; i++ ) {
                        html = html + "<option value='"+items[i]+"'>"+items[i]+"</option>";
                    }
                }
                if (daValueForUser<=3) { 
                    html = html + "<tr><td>Select DA4 Holder</td><td><select id='daList1'>";
                    for ( var i = 0; i < items.length; i++) {
                        html = html + "<option value='"+items[i]+"'>"
                                + items[i] + "</option>";
                    }
                    html = html + "</select></td></tr><tr><td>Select DA4 Holder</td><td><select id='daList2'>";
                    for ( var i = 0; i < items.length; i++) {
                        html = html + "<option value='"+items[i]+"'>"
                                + items[i] + "</option>";
                    }
                }
                html = html+"</select></td></tr><tr><td>Comments:</td><td><input name='comments'></td></tr>" +  
                    "<tr><td></td><td> <table><tr><td align='right'><input type='submit' value='Send'/></td><td align='left'><button type='button' onclick='javascript:closeNotifyDaPopup();'>Cancel</button></td></tr></table></td></tr></table></form>";

                $('#notifyDiv').empty();
                $('#notifyDiv').html(html);

                $("#notifyForm").validate({
                    submitHandler: function() { alert("Submitted!");},
                    errorElement: "span",
                    errorPlacement: function(error, element) {
                        error.insertBefore($("#error"));
                    },
                    rules: {
                        daList: "required",
                        comments: "required"
                    },
                    messages: {
                        daList:  "Enter DA Holder",
                        comments: "comments required"
                    }
                });

                $("#notifyDiv").fadeIn(1000);

                $("#notifyDiv").css({
                    left : ($(window).width() - $('#notifyDiv').width()) / 2,
                    top : ($(window).width() - $('#notifyDiv').width()) / 7,
                    position : 'absolute'
                });

                $('#daList1').change(function(e) {
                    index = this.selectedIndex;
                    $('#daList2 option').prop('disabled', false); // enable all options
                    if (index != 0) {
                        $('#daList2').get(0).selectedIndex = 0; // so you don't disable the option after it's selected
                        $('#daList2 option:eq(' + index + ')').prop('disabled', true);
                    }
                }); 
            },
            error : function() {

            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:21:40.163

您需要`$('#notifyForm').validate`在关闭事件发生之前调用。

因此，一旦您使用此代码创建了表单：

```
$('#notifyDiv').html(html); 
```

在那之后，您应该调用 validate：

```
 $("#notifyForm").validate({
        submitHandler: function() { alert("Submitted!");},
        rules: {
            daList: "required",
            comments: "required"
        },
        errorElement: "div",
        messages: {
            daList:  "Select a DA Holder",
            comments: "Enter comments"
        }
    }); 
```

然后，将您的按钮更改为提交按钮，如下所示：

老的：

```
<button type='button' onclick='javascript:sendNotifyDetails();'>Send</button> 
```

新的：

```
<input type="submit" value="Send"/> 
```

这将自动触发验证，如果表单有效，您的 submitHandler 将被调用。

# php - htaccess 404 重定向适用于 .html 扩展名，但不适用于 .php 扩展名

> ID：16066806
> 
> 赞同：0
> 
> 时间：2013-04-17T17:52:13.097
> 
> 标签：php, html, .htaccess, http-status-code-404, file-extension

我制作了一个自定义 404 页面并插入到我的 htaccess 文件中：

```
ErrorDocument 404 /404.php 
```

每当我测试没有扩展名或 .html 扩展名的 url 时，错误直接工作正常。但是，当我输入带有 .php 扩展名的 url 时，会出现一个空白页面，其中显示“未指定输入文件”消息。弹出。

我必须做什么才能让我的自定义 404 页面也弹出 .php 文件扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:09:26.260

当 PHP`CGI Binary`在您的服务器中编译为 a 时会发生这种情况。在这种情况下，即使您`apache`定义了 404，对 PHP 的请求也会传递`CGI binary`给当未找到要处理的文件时，会出现此错误 ( `No input file specified`)。

此问题的解决方案将根据各种其他配置参数而有所不同，但基本上您应该尝试做的是首先检查 URL，如果它不存在，则将其转换为非 php url，以便规则生效并显示正确的 404。

未经测试，但内容如下：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteRule ^.+\.php$ /non_existant_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:00:35.437

你需要设置目录

```
RewriteEngine on
ErrorDocument 404 http://www.yoursite.com/404.php 
```

如果您的本地人喜欢这样

```
RewriteEngine on
ErrorDocument 404 directory/404.php 
```

# c# - 如何在动作方法之间正确传递变量？

> ID：16066807
> 
> 赞同：1
> 
> 时间：2013-04-17T17:52:15.763
> 
> 标签：c#, .net, asp.net-mvc-4

我有一个列出项目的 ListController，以及一个处理 ListController 中所选项目的不同操作的 ManageController。

那么，我如何将变量传递给 ManageController（及其子操作），以便**即使用户在不同的浏览器中打开相同的 URL** ，它也存在。

这直接不包括会话和 Cookie。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:03:28.247

您可以尝试将要共享的数据保存在 TempData 中，这就像在 Session 中保存数据一样，但是在读取数据的请求结束时数据将被自动删除。

```
[HttpPost]
public ActionResult FirstAction()
{
    ...
    TempData["sharedData"] = data;
    return RedirectToAction("SecondAction");
}

public ActionResult SecondAction()
{
    var data= TempData["sharedData"];

    return View(data);
} 
```

# google-chrome-devtools - 查找在源中选择元素的位置

> ID：16066809
> 
> 赞同：2
> 
> 时间：2013-04-17T17:52:24.420
> 
> 标签：google-chrome-devtools

是否以任何方式（Chrome 扩展）搜索源 JavaScript（或 CSS）文件中元素的所有选择？基本上，我想看看源代码在哪里修改了元素。例如，单击按钮时。Chrome 开发工具不会搜索按钮单击事件的绑定位置，而是会为我完成并显示给我。这在 Chrome 开发工具或扩展程序中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:27:21.853

有而且很棒:)

Windows 上的 CTRL-SHIFT-F 和 Mac 上的 CMD-OPT-F。[https://plus.google.com/115133653231679625609/posts/e4W2kdrFJY9](https://plus.google.com/115133653231679625609/posts/e4W2kdrFJY9)

享受！

# iphone - 如何执行我当前 iOS 应用程序中的 coco2d 游戏？

> ID：16066812
> 
> 赞同：0
> 
> 时间：2013-04-17T17:52:37.090
> 
> 标签：iphone, ios, objective-c, xcode, cocos2d-iphone

我最近创建了一个 cocos2d 应用程序，我需要通过我的主 XIB 中的 UIButton 启动该应用程序。我目前已将 cocos-2d-ios.xcodeproj 和 MyGame.xcodeproj 添加到我的应用程序中。在我尝试将 cocos2d 标头导入到我的主视图控制器之前，所有项目都成功构建，我得到了一个错误。

22:10：找不到“cassert”文件

有没有办法我可以做到这一点？是否可以？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:02:19.073

该线程讨论了相同的问题。-

[http://www.cocos2d-iphone.org/forum/topic/21853](http://www.cocos2d-iphone.org/forum/topic/21853)

似乎将您的 .m 类重命名为 .mm 可能会解决问题。

# wpf - WPF中的按钮单击验证

> ID：16066814
> 
> 赞同：0
> 
> 时间：2013-04-17T17:52:40.570
> 
> 标签：wpf, wpf-controls, wpf-4.0

我正在开发 WPF 应用程序。在我的应用程序中，有不同的表格可以保存数据。我想在按钮单击或失去控制焦点时验证数据。我希望 WPF 验证像 ASP.Net 验证一样工作。

我不知道页面加载后表单验证。它应该仅在用户失去控制焦点或用户单击按钮时验证。

我在google上做了很多研发。但我确实通过设置解决方案找到了任何正确的设置。

请帮帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T19:30:33.313

In this example I show you two text box with validation...

XAML Coding......

```
 <TextBlock Text="Throw Exception in Property" Grid.Column="1" Grid.Row="0" VerticalAlignment="Center" FontSize="22" Foreground="Chocolate" />
    <TextBlock Text="Name " Grid.Column="0" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="15" Foreground="DarkGreen" />
    <TextBlock Text="Age" Grid.Column="0" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="15" Foreground="DarkGreen" />

    <TextBox Name="txtName" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Left" Width="170" Height="30" Background="Azure" Text="{Binding Path=pName,Mode=TwoWay,ValidatesOnExceptions=True}"/>
    <TextBox Name="txtAge" Grid.Row="2" Grid.Column="2" HorizontalAlignment="Left" Width="170" Height="30" Background="Azure" Text="{Binding Path=pAge,Mode=TwoWay,ValidatesOnExceptions=True}"/>
    <Button Name="btnSubmit" Content="Submit" Grid.Row="4" Height="30" Click="btnSubmit_Click"/> 
```

C# Coding

```
 private void Page_Loaded(object sender, RoutedEventArgs e)
    {
        Student s = new Student();
        this.DataContext = s;
    }

    public class Student : INotifyPropertyChanged
    {
        string name;
        int age;

        public string pName
        {
            get 
            {
                return name;
            }

            set
            {
                if (string.IsNullOrWhiteSpace(value))
                {
                    throw new ArgumentException("Name field must be enterd.");
                }
                name = value;
                OnPropertyChanged("pName");
            }
        }

        public int pAge
        {
            get
            {
                return age;
            }
            set
            {
                if(!Regex.IsMatch(value.ToString(),"[0-9]"))
                {
                    throw new ArgumentException("Age field must be in number.");
                }

                if(value < 18 || value > 100)
                {
                    throw new ArgumentException("Age field must be 18-100.");
                }

                age = value;
                OnPropertyChanged("pAge");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string data)
        {
            if (PropertyChanged != null)
            { 
                PropertyChanged(this,new PropertyChangedEventArgs(data));
            }
        }

    } 
```

# c# - 具有多个获取和参数的 Asp.net mvc api

> ID：16066815
> 
> 赞同：3
> 
> 时间：2013-04-17T17:52:44.650
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

伟大的，

我的 asp.net mvc4 研究项目有问题。我尝试创建具有多个 get 操作的 apicontroller，其中一些带有参数，而另一些则没有。

我的 API

```
public class ContentController : ApiController
{
    [System.Web.Http.HttpGet]
    public HttpResponseMessage Categories1()
    {
        return Request.CreateResponse(HttpStatusCode.OK, new string[] { "Toys", "Games", "Animals", "Woob-Woob" }, Configuration.Formatters.JsonFormatter);
    }

    [System.Web.Http.HttpGet]
    public HttpResponseMessage Categories2()
    {
        return Request.CreateResponse(HttpStatusCode.OK, new string[] { "Toys", "Games", "Animals", "Woob-Woob" }, Configuration.Formatters.JsonFormatter);
    }

    [System.Web.Http.HttpGet]
    public HttpResponseMessage Categories3(int i)
    {
        return Request.CreateResponse(HttpStatusCode.OK, new string[] { "Toys", "Games", "Animals", "Woob-Woob" }, Configuration.Formatters.JsonFormatter);
    }

    [System.Web.Http.HttpGet]
    public HttpResponseMessage Categories4(int i)
    {
        return Request.CreateResponse(HttpStatusCode.OK, new string[] { "Toys", "Games", "Animals", "Woob-Woob" }, Configuration.Formatters.JsonFormatter);
    }
} 
```

我的 apiConfig：

```
 public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "ApiByActionWithId",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "ApiByAction",
            routeTemplate: "api/{controller}/{action}"
        );

        config.Routes.MapHttpRoute(
            name: "ApiByName",
            routeTemplate: "api/{controller}/{action}/{name}",
            defaults: null
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    } 
```

以及这个结果

对于 /api/content/categories1，结果是 ["Toys","Games","Animals","Woob-Woob"]

对于 /api/content/categories3 和 /api/content/categories3/1 结果 - “未找到与请求 URI 'http://localhost:51200/api/content/categories3' 匹配的 HTTP 资源。”

我不知道应该如何处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:57:48.667

我认为它失败是因为 api 操作中的参数名称与路由中的参数名称不匹配。

更改您的第一条路线：

```
config.Routes.MapHttpRoute(
    name: "ApiByActionWithId",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

到以下：

```
config.Routes.MapHttpRoute(
    name: "ApiByActionWithId",
    routeTemplate: "api/{controller}/{action}/{i}",
    defaults: new { i = RouteParameter.Optional }
); 
```

看看这是否有效。

一般来说，更具体的路线应该在 Register 方法的顶部。更通用的路线在底部作为包罗万象。

考虑如下控制器：

```
public class UserSettingsController : ApiController
{
    [HttpGet]
    public HttpResponseMessage GetAll();
    [HttpGet]
    public HttpResponseMessage Get(string key);
    [HttpGet]
    public HttpResponseMessage Set(string key, string value);
    [HttpGet]
    public HttpResponseMessage Restore(string key);
} 
```

要设置路线，它需要以下路线。请注意，它们是有序的，因此如果 api 调用上没有键，则将命中 GetAll 方法。如果切换了前 2 个路由，则永远不会命中 GetAll 版本，因为对 /api/settings 的调用将转到 Get 方法，并且键只会设置为 null。

```
 config.Routes.MapHttpRoute(
              name: "user/settings",
              routeTemplate: "user/settings",
              defaults: new { controller = "UserSettings", action = "GetAll" },
              constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
        );

        config.Routes.MapHttpRoute(
              name: "user/settings/{key} (get)",
              routeTemplate: "user/settings/{key}",
              defaults: new { controller = "UserSettings", action = "Get" },
              constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
        );

        config.Routes.MapHttpRoute(
              name: "user/settings/{key} (set)",
              routeTemplate: "user/settings/{key}",
              defaults: new { controller = "UserSettings", action = "Set" },
              constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Put) }
        );

        config.Routes.MapHttpRoute(
              name: "user/settings/{key}/restore",
              routeTemplate: "user/settings/{key}/restore",
              defaults: new { controller = "UserSettings", action = "Restore" },
              constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) }
        ); 
```

# c# - 使用交替项目 Win7 在 ListView 上设置选定项目颜色

> ID：16066817
> 
> 赞同：0
> 
> 时间：2013-04-17T17:52:48.750
> 
> 标签：c#, .net, wpf, listview

我遇到了 WPF ListView 控件的问题，其中选定的项目颜色在 Windows 7（Aero）上不受尊重，但在 Server 2008 上有效。

![Windows Server 2008 屏幕截图](https://i.stack.imgur.com/DpwT3.png) ![Windows 7 / Aero 屏幕截图](https://i.stack.imgur.com/JvY7G.png)

第一张图片来自 Windows Server 2008 机器，点击了“培根”选项。然后我在 Windows 7 上运行相同的程序，然后单击“培根”选项。

很明显，我为所选项目设置的背景在 Aero 主题上没有得到尊重，但我不知道如何处理它。

XAML 代码：

```
<Window x:Class="WPFDriver.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="150" Width="150">
    <Window.Resources>
        <Style TargetType="ListViewItem">
            <Setter Property="BorderThickness" Value="0,1,0,0"/>
            <Setter Property="BorderBrush" Value="Gray" />
            <Style.Resources>
                <!-- set the selected item color -->
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="DeepPink"/>
            </Style.Resources>
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Background" Value="{x:Static SystemColors.InfoBrush}" />
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="{x:Static SystemColors.WindowBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <ListView Name="lvItems" AlternationCount="2" ItemsSource="{Binding Path=Joop}">
        <ListView.View>
            <GridView AllowsColumnReorder="True">
                <GridViewColumn Header="Widget" DisplayMemberBinding="{Binding Path=Widget}" ></GridViewColumn>
                <GridViewColumn Header="Coin" DisplayMemberBinding="{Binding Path=Coin}" ></GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Window> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;

namespace WPFDriver
{
    public partial class MainWindow : Window
    {
        public class Thing
        {
            public string Widget { get; set; }
            public string Coin { get; set; }
        }

        public ObservableCollection<Thing> Joop { get; set; }

        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = this;
            Joop = new ObservableCollection<Thing>();

            Joop.Add(new Thing() { Widget = "Code", Coin = "Quarter" });
            Joop.Add(new Thing() { Widget = "Bicycle", Coin = "Nickel" });
            Joop.Add(new Thing() { Widget = "Bacon", Coin = "Dime" });
            Joop.Add(new Thing() { Widget = "A Koda", Coin = "Penny" });
        }
    }
} 
```

**更新：** Peter Hansen 提出的第一个解决方案：在 ListView 样式中，添加 IsSelected 和 HighlightBrushKey

```
<Style TargetType="ListViewItem">
    <Setter Property="BorderThickness" Value="0,1,0,0"/>
    <Setter Property="BorderBrush" Value="Gray" />
    <Style.Resources>
        <!-- set the selected item color (Works for non Aero theme) -->
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="DeepPink"/>
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="ItemsControl.AlternationIndex" Value="0">
            <Setter Property="Background" Value="{x:Static SystemColors.InfoBrush}" />
        </Trigger>
        <Trigger Property="ItemsControl.AlternationIndex" Value="1">
            <Setter Property="Background" Value="{x:Static SystemColors.WindowBrush}"/>
        </Trigger>
            <!-- set the selected item color (Works for Win7 Aero theme) -->
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="DeepPink"></Setter>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:13:08.007

您不应该`SystemColors.HighlightBrushKey`像那样覆盖该值，因为它并不真正可靠。主题可能会以不同的方式获得用于选择的颜色，这就是您现在所经历的。

相反，您可以创建一个`Trigger`侦听 的`IsSelected`属性`ListViewItem`并在其为真时更改颜色：

```
<Style TargetType="ListViewItem">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="DeepPink" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

# sharepoint - SharePoint 2010 搜索正在爬网未发布的项目和草稿项目

> ID：16066823
> 
> 赞同：1
> 
> 时间：2013-04-17T17:53:06.877
> 
> 标签：sharepoint, sharepoint-2010

Sharepoint 搜索爬虫索引未发布的项目和草稿项目，我仔细检查了搜索爬虫帐户和帐户的权限为对该站点的只读访问权限。

当有人在搜索某些东西时，所有未发布的项目和草稿都会出现在搜索结果中，我们希望避免它。

它是一个发布网站。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-27T07:39:19.083

检查您的库中的草稿项目安全设置（版本控制设置的一部分），您需要设置只有可以编辑项目的用户才能看到草稿。

# r - multipanel smooth with grouping factor in lattice

> ID：16066826
> 
> 赞同：4
> 
> 时间：2013-04-17T17:53:18.083
> 
> 标签：r, lattice, smoothing

I would like to use lattice to create multipanel scatterplots and add smooth lines through each panel using a grouping factor, here is a dummy dataframe

```
x <-  rep(1:10, 4)
a <-  as.factor(rep(1:4, 10))
b <-  as.factor(sort(rep(1:2, 20)))
y <- rep(NA, 80)
df <- data.frame(x, y, a, b)
df$y[df$b=="1"] <- df$x[df$b=="1"]+df$x[df$b=="1"]^0.5
df$y[df$b=="2"] <- df$x[df$b=="2"]+df$x[df$b=="2"]^1
df$y[df$b=="3"] <- df$x[df$b=="3"]+df$x[df$b=="3"]^2
for(i in 1:80) df$y[i] <- df$y[i]+rnorm(1, 0, 10) 
```

I've tried with this:

```
library(lattice)    
xyplot(y ~ x|a, data = df, groups = b, type = "b", 
                      panel = function(x, y,...){ 
                      panel.smooth(x, y, ...)
                      panel.xyplot(x, y, ...)
                       }) 
```

But does not seems to work, I can't see why, sure is something that I'm missing. However, I have another problem, that is, I need to change the some smoothing parameters (span, and degree). I found a way to do that online by Chi in Cross Validated (is it right to quote other users work in this way?), that is:

```
my.panel.loess <- function(x, y, span = 2/3, degree = 0.5, ...) {
  loess.fit <- loess.smooth(x, y, span = span, dgree = degree )
  panel.lines(loess.fit$x, loess.fit$y, ...)
  panel.xyplot(x, y, ...)}

xyplot(y ~ x|a, data = df, groups = b, type = "b", 
                  panel=function(...) 
                    panel.superpose(panel.groups=my.panel.loess, ...)) 
```

but I can't make it to plot a line for the loess smoother and points for the original data points. I've tried to add the argument type in the custom made function but lattice doesn't like the multiple argument. Any suggestion?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-22T21:50:15.257

Or without the latticeExtra, simply:

```
xyplot(y~ x|a, data = df, groups = b, type = c("p", "smooth")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T18:16:43.807

I've often found **latticeExtra** (and its `layer()`, `as.layer()`, and overloaded `+` operator) a big help in settings like yours:

```
library(latticeExtra)
my.panel.loess <- function(x, y, span = 2/3, degree = 0.5, ...) {
    loess.fit <- loess.smooth(x, y, span = span, dgree = degree )
    panel.lines(loess.fit$x, loess.fit$y, ...)
}

## A plot with the smoothing lines
a <- xyplot(y ~ x|a, data = df, groups = b, type="l",
            panel=function(...) panel.superpose(panel.groups=my.panel.loess,...))
## A plot with the points
b <- xyplot(y ~ x|a, data=df, groups=b)

## Both together
plot(a+b) 
```

![enter image description here](https://i.stack.imgur.com/tk2gI.png)

# html - $(div).click(function) 上 $.ajax 生成的 HTML

> ID：16066827
> 
> 赞同：0
> 
> 时间：2013-04-17T17:53:18.690
> 
> 标签：html, ajax, javascript-events, event-handling, jquery

我正在制作商店目录，产品 HTML 是通过 $(document).ready(function() 上的 $.AJAX 请求生成的。

```
 $.ajax({
  url: "../includes/geracatalogo.php",
  method: "post",
  data: {tipos: tipos, categorias: categorias, pagina: pagina},
  success: function(html){
     $("#produtos").empty();
     $("#produtos").fadeOut(0);
     $("#produtos").append(html);
     $("#produtos").fadeIn(700);
       }
});
}); 
```

现在，在这个 HTML 上，我有页码（所有页面并选择了一个）。我想在这个页面按钮上添加一个 .clickEvent。

```
$(".pages").click(function(){
$(this).toggleClass('selected');
}); 
```

我的疑问是，我把上面的片段放在哪里？关于成功函数？还是在 $.Ajax 之外？

问题是：如果我把它放在 $(document).ready(function() 上，事件监听器将在 DIV 之前创建（无法挂钩）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:56:36.010

在成功函数之外定义它。您可以使用事件委托将事件处理程序挂钩到尚不存在的元素。

```
$(document).on('click', '.pages', function(){
    $(this).toggleClass('selected');
}); 
```

`document`可以替换，但任何现有的`.pages`. 有关更多详细信息，请参阅[`on`](http://api.jquery.com/on/)文档，特别要注意**Direct and delegated events**部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:59:56.077

你可以使用[jQuery 的`.on()`函数](http://api.jquery.com/on/)来解决这个问题。所以它可能看起来像这样：

```
$(document).ready(function () {
    $(document).on('click', '.pages', function () {
        $(this).toggleClass('selected');
    });
}); 
```

（我不确定它是否需要做，`$(document).ready()`但如果所有其他事件活页夹都在那里，那么你不妨把它们放在一起。）

这本质上所做的是，它不是绑定到元素本身的单击事件，而是绑定到文档的单击事件（`.on()`被调用的选择器，可以是目标元素之上的任何父元素）。当点击发生时，该事件会通过 DOM 冒泡。因此，在这种情况下，点击事件`document`开始使用此处理程序。

第二个参数是过滤点击事件的选择器。因此，虽然这个处理程序在技术上接收*所有*在 DOM 中冒泡的点击事件，但它会忽略任何与选择器不匹配的事件。（在这种情况下，`.pages`。）最后，还有用于响应事件的函数。

由于这只绑定一次到一个总体父元素，它不需要在添加子元素时重新绑定。这些元素可以随心所欲地添加和删除，相关的点击事件发生在它们之上。此外，由于它只绑定一次，因此与将同一个处理程序绑定到许多子元素相比，性能有所提高。

# jquery - jQuery 动画显示和移动元素

> ID：16066828
> 
> 赞同：0
> 
> 时间：2013-04-17T17:53:22.113
> 
> 标签：jquery

下面是我制作的一个小型工作脚本。看看[这里](http://jsfiddle.net/knsgp/)

```
$(document).ready(function () 
{
  $("ul li a").hover(function () 
  {
    $("span", this).fadeIn('fast');
    $("label", this).fadeIn('fast');
  },
    function () 
    {
        $("span", this).fadeOut(500);
        $("label", this).fadeOut(500);
    }
  );
}); 
```

我一直在尝试做的是使用一些简单的动画功能将此效果更改为动画，但我只是没有得到正确的结果。

我正在尝试做的一个例子是：

1.  悬停在`<a>`元素上后，显示 hidden `<span>`，将其位置设置为“left：30px”。
2.  将位置设置为 "bottom:100px" 。

我将不胜感激任何与此相关的建议、解决方案或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:04:02.943

```
$(document).ready(function () {
    $("ul li").on({
        mouseenter: function() {
            var self = this;
            $("span, label", this).fadeIn('fast', function() {
                $(this).stop().animate({
                    left: 30,
                    top : $(self).height() - 100
                }, 400);
            });
        },
        mouseleave: function() {
            var self = this;
            $("span, label", this).stop().animate({
                    left: -30,
                    top : 0
            }, 400, function() {
                $(this).fadeOut('fast');
            });
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/knsgp/3/)

# asp.net-mvc-4 - 我们是否应该在 Onion 架构中公开 IDataContext

> ID：16066830
> 
> 赞同：0
> 
> 时间：2013-04-17T17:53:26.370
> 
> 标签：asp.net-mvc-4, datacontext, onion-architecture

在 ASP.NET MVC 中实现 Onion 架构时，我的理解是我们[应该/可以公开 IDataContext 接口](http://onionarch.codeplex.com/SourceControl/changeset/view/e0ddb728120b#src/Core/Domain/IDataContext.cs)，该接口可以在 UI 中注入和引用。

所以基本上在 ASP.NET MVC 中，我们可以这样做：

```
_context.Products.Add(myBadProduct); 
```

那不是让 UI 层实现业务逻辑吗？我相信 Onion 的基本理念之一是它可以清楚地了解哪些代码进入了哪些层，并明确禁止 UI 层实现业务逻辑。

如果我们将存储暴露给 UI（有或没有`SaveChanges`能力），我们让 UI 开发人员实现自定义业务逻辑。

这可以通过仅通过诸如此类的域服务将所有操作暴露给底层 IDataContext 来“修复[”](http://onionarch.codeplex.com/SourceControl/changeset/view/e0ddb728120b#src/Core/Services/Impl/ShoppingCartProcessor.cs)。

**用一句话总结我的问题：**

我们应该允许 UI 层接触 IDataContext 还是应该只通过域服务公开所有上下文操作？如果我们公开 IDataContext，是否也可以公开在 IDataContext 中定义的 SaveChanges 方法（例如在实际的 EfDataContext 中实现）？

我认为 IDataContext 应该公开为只读（即没有 SaveChanges 功能），用于查询目的，而 C_UD 方法应该公开为域服务。对还是错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:00:40.450

首先，我想提醒一下，即使[onionarch.codeplex](http://onionarch.codeplex.com/)对于每个想要进入 Onion 架构的人来说都是一个非常好的起点（一切都非常简单），将其作为思考的来源是可以的，但是Matt Hidinger 的意图肯定不是在这里提供任何生产代码。

也就是说，恕我直言，这个决定取决于几个参数。

你是单独工作还是在一个大团队中工作？是否所有的开发人员都参与其中，相当不错的？你有DBA吗？你关心表演吗？

我在一家有很多不同开发人员的公司工作。我们的网站每分钟被点击大量时间，我们的 Web 应用程序正在访问一个非常庞大的数据库，该数据库由强大的 DBA 团队密切监控。如果我让开发人员对数据库创建自己的查询，我不确定每个人都会激活分析器来查看生成的 T-SQL 是否正常。控制每一个 Linq2Entities 查询是不可能的。这会导致性能问题和 DBA 的心脏病 :-) （当然缓存会有所帮助，但它并不能解决所有问题）。

因此，正如@DarinDimitrov 所说，这两种方法都是正确的，但从我的角度来看，我更喜欢不让消费者直接使用 IDataContext。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:42:41.593

> 我们应该允许 UI 层接触 IDataContext 还是应该只通过域服务公开所有上下文操作？

实际上这两种方法是正确的。你会看到有人推荐第一个，其他人推荐第二个。例如，Ayende Rahien 写了一篇[不错的博客文章](http://ayende.com/blog/3955/repository-is-the-new-singleton)，他解释说他更喜欢简单地将底层接口暴露给消费者，而不是最终使用以下方法的服务层：

*   查找客户（ID）
*   FindCustomerWithAddresses(id)
*   FindCustomerWith..
*   ...

就我个人而言，我也倾向于这样做，但这又是主观的。就 SaveChanges 方法而言，我也会将其公开给消费者。

# python - 从书中学习python，在这里需要一点帮助

> ID：16066838
> 
> 赞同：0
> 
> 时间：2013-04-17T17:53:50.453
> 
> 标签：python, eclipse, ubuntu, pydev

好的，所以我有这本书 Violent Python - A Cookbook for Hackers, Forensic Analysts, Penetration Testers and Security Engineers。我已经到了第 10 页，我完全是个菜鸟，但这真的让我着迷。

但是这段代码让我很难过：

```
import socket
socket.setdefaulttimeout(2)
s = socket.socket()
s.connect(("192.168.95.148",21))
ans = s.recv(1024)
print ans 
```

这就是我在控制台中得到的结果：

```
File "/usr/lib/python2.7/socket.py", line 224, in meth
return getattr(self._sock,name)(*args)
socket.timeout: timed out 
```

从我所看到的书中说我应该得到这个：

```
220 FreeFloat Ftp Server (Version 1.00). 
```

我正在使用 pydev 和 eclipse 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:57:36.083

`s.connect(("192.168.95.148",21))`似乎尝试连接到 IP 地址为 192.168.95.148 的 FTP 服务器。如果您没有在该 IP 上运行 FTP 服务器，您将收到连接超时错误，而不是来自 FTP 服务器的响应。你有在 192.168.95.148 上运行的 FreeFloat FTP 服务器吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:46:57.750

那么，您可以尝试连接到已知的公共 FTP 服务器吗？如果缺少服务器正在阻止您。例如，ftp.mozilla.org

# xml - 从 Google 电子表格绘制的 xml/rss 提要？

> ID：16066839
> 
> 赞同：1
> 
> 时间：2013-04-17T17:54:00.723
> 
> 标签：xml, rss, google-sheets

这是一个非常笼统的查询 - 实际上我只是在寻找让我走上正确道路的指针。

简而言之，**我希望从 Google 电子表格生成实时 xml/rss 提要绘图？**我可以使用 Google Apps 脚本来生成它吗？

背景：我有一个专有的 CMS，我想将这些 rss 提要放入其中（我知道该怎么做！）。

电子表格的内容只是几个列标题（名称、简短描述、关键字、个人网站 URL）。我希望能够将内容（行）添加到电子表格中，并通过 RSS 的魔力，让这些内容通过提要出现在网站上。

我真的很感激有关如何实现这一目标的任何指示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:04:42.103

是的，以 JSON 格式从电子表格中检索数据相对简单。[请参阅此处的 Google API 文档来](https://developers.google.com/gdata/samples/spreadsheet_sample)解释这一点。我在下面给出了一个基本示例。

您只需将`<script>`文件添加到您的网页，如下所示

```
<script src="http://spreadsheets.google.com/feeds/*TYPE*/*ID*/*WS*/public/values?alt=json-in-script&amp;callback=*FN*"></script> 
```

*   其中***TYPE***是`list`或`cells`。`list`将 JSON 数据作为每个条目作为一行提供，`cells`并将单个单元格作为它们自己的条目提供。
*   其中***ID***是电子表格的长 ID。
*   其中***WS***是工作表编号，例如 1、2、3 等。
*   其中***FN***是您要在 JSON 数据返回后调用的函数。

如果您需要专门采用 XML 格式的数据，那么我刚刚快速搜索了一下，并且有一些页面可以帮助在两种格式之间进行解析。抱歉，我没有任何使用 XML 的经验，所以我无能为力。

# javascript - JS - 工厂模式在存储在内存中时会覆盖私有变量

> ID：16066844
> 
> 赞同：1
> 
> 时间：2013-04-17T17:54:22.333
> 
> 标签：javascript, factory-pattern

所以我对 js 还是很陌生，我想进入更高级的东西，但是我对工厂模式有这个问题，这是基本代码：

```
(function () {

    var objs = [];

    function createObj(name) {

        var thename = name;

        return {
            publicsaythename : function () {
                console.log(thename);   
            }
        }
    }

    for(var i = 0; i < 5; i++) {
        var theObj = createObj("thename" + i);
        theObj.publicsaythename();

        objs.push(theObj);
    }

    for(var i = 0; i < objs.length; i++) {
        theObj.publicsaythename();
    }

})(); 
```

第一系列 console.log 调用输出我所期望的：

```
thename0
thename1 
thename2 
thename3 
thename4 
```

第二系列的 console.logs 输出我创建的最后一个对象 5 次。

```
 5 x thename4 
```

难道我做错了什么？还是这是预期的？

如果它是预期的。您如何解决能够存储您创建的对象以供以后使用的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:58:12.320

您只在变量中存储一个对象引用`theObj`，因此输出符合预期。

我认为这是您打算在第二个循环中执行的操作：

```
for(var i = 0; i < objs.length; i++) {
     objs[i].publicsaythename();
} 
```

因此，存储对象的方式没有任何问题。我猜你只是在使用它们时犯了一个错误。:-)

# jsp - Struts如何向现有表单添加新动作和新表单

> ID：16066850
> 
> 赞同：0
> 
> 时间：2013-04-17T17:54:38.793
> 
> 标签：jsp, struts, action

我有一个现有的表单，它有一个很好的现有操作，我需要添加一个浏览按钮来在同一个 JSP 中附加文件。

为此，我在表单中添加了 enctype="multipart/form-data" 以添加对附件的支持，但现有操作出现错误，因为它不支持它。好的，我将为文件附件创建一个单独的操作

所以我做了以下事情：

```
<html:form action="/existingAction" method="POST" >
    ...
    --THIS IS ADDED
    <html:form action="/newAction" method="POST" enctype="multipart/form-data">
        <table>
            <tr>
                    <td><html:file size="55" alt="Browse" property="attachmentFile" styleId="attachmentFile"" /></td>
                <html:submit value="AddDoc"/>
                </td>               
            </tr>
        </table>
    </html:form>
    --END OF NEW CODE
    ...
    <html:submit value="completed"/>
</html:form> 
```

在 struts 配置中，我为新操作添加了一个条目：

```
<action path="/newAction" type="com.action.AttachmentAction"
    scope="request" name="myForm" validate="false">

    <forward name="done" path="/forward/complete.do" />
</action> 

<action path="/existingAction" type="com.action.ExistingAction"
           scope="request" name="myForm" validate="false">

      <forward name="done" path="/forward/complete.do" />
</action> 
```

但它不起作用，新代码后的 jsp 未显示在 GUI 中。如何将具有不同操作的新文件附件添加到现有表单/操作？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:57:36.550

我不确定您使用的是哪个版本的 struts，但在 v1.2 中，可能无法对单个 jsp 进行 2 个表单操作。说您可以说类似 <form enctype="multipart/form-data" action=" /newAction" method="post"> 在浏览按钮上，输入文件类型作为文件，你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:03:12.760

你不能嵌套这样的表单，它甚至不是合法的 HTML。

要么有两种形式，要么使用一种形式来解决根本问题。

# java - 带有警报管理器的 Android 上下文

> ID：16066851
> 
> 赞同：0
> 
> 时间：2013-04-17T17:54:44.260
> 
> 标签：java, android, alarmmanager, android-context

我目前正在构建一个笔记应用程序。每个笔记都可以有一个警报来提醒用户该笔记。我想知道我是否在程序中创建了警报，然后在“启动时”重建它。由于笔记应用程序当时不会运行，上下文会有所不同吗？如果我误解了上下文，有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:11:17.210

我刚刚发布了我自己的带有提醒功能的 Notes 应用程序，所以你去吧：当设备重新启动时，AlarmManager 会丢失所有已注册的警报。因此，您必须注册您的应用程序以在启动完成时收听系统发送的广播，然后重新添加所有提醒。

# bash - 通过 sh 脚本接受多个参数 [UNIX]

> ID：16066854
> 
> 赞同：0
> 
> 时间：2013-04-17T17:54:54.000
> 
> 标签：bash, unix, arguments, sh

我在这里要做的是允许用户输入多个参数（文件名）并将它们发送到我创建的回收站 sh 脚本称为“sh safe_rm”

所以我会这样做：

$] sh safe_rm testFile2 testFile 3

我需要两个文件都可以通过，有什么想法吗？

```
file=$1

if [ $# -eq 0 ]
then
   echo "You have not entered a file"
   exit
elif [ -d $file ]
then
   echo "Your file is a directory"
   exit
elif [ -e $file ]
then
   sendToBin
else
   echo "Your file $file does not exist"
   exit

  fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:59:20.500

尝试这样的事情：

```
sh safe_rm testFile2 testFile 3

for var in "$@"
do
    echo "$var"
done 
```

这将打印：

```
testFile2
testFile
3 
```

[有关更多信息，请参阅此帖子](https://stackoverflow.com/questions/255898/how-to-iterate-over-arguments-in-bash-script)

# javascript - Gmaps.js - zoomControlOpt 不会改变位置或样式

> ID：16066856
> 
> 赞同：4
> 
> 时间：2013-04-17T17:55:04.337
> 
> 标签：javascript

第一篇在stackoverflow上发帖。

尝试使用 Gmaps.js ( [http://hpneo.github.io/gmaps/](http://hpneo.github.io/gmaps/) ) 在我的网站上集成谷歌地图。该地图正在正常工作，但我想对 UI 进行一些更改。

我已经禁用了默认 UI，只添加了缩放控件，我想这样做。

但是我需要更改缩放控件的位置，无论我尝试什么，都没有任何反应。缩放控制保持在默认位置。对于真正的问题，触摸缩放控制也是如此。你看，我在地图的一部分上有一个透明（.png）图像，该图像使触摸缩小按钮无法触摸，所以我必须移动它。

经过一番尝试，我发现 zoomControlOpt 对象都没有改变任何东西。

```
$(document).ready(function(){
            var map = new GMaps({
                div: '#map',
                lat: 60.156372,
                lng: 16.851997,
                zoom: 11,
                disableDefaultUI: true,
                zoomControl : true,
                zoomControlOpt: {
                    style : 'SMALL',
                    position: 'TOP_RIGHT'
                },
            });
            map.addMarker({
                lat: 60.140132,
                lng: 16.83658,
                open: true,
                title: 'Ingbofestivalen',
                infoWindow: {
                    content: 'Ingbofestivalen ligger på cykelavstånd från Tärnsjö. Bussförbindelser till Tärnsjö finns från Sala, Heby och Uppsala.' 
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T10:29:10.440

zoomControlOpt 不起作用，因为您禁用了默认 UI，如果您只想使用缩放控件，您可以使用下面的代码

```
var map = new GMaps({
            div: '#map',
            lat: 60.156372,
            lng: 16.851997,
            zoom: 11,
            zoomControl : true,
            zoomControlOpt: {
                style : 'SMALL',
                position: 'TOP_RIGHT'
            },
            panControl : false,
            streetViewControl : false,
            mapTypeControl: false,
            overviewMapControl: false
}); 
```

# jasper-reports - 在 iReport 中添加数据库字段作为超链接 url 的一部分

> ID：16066861
> 
> 赞同：1
> 
> 时间：2013-04-17T17:55:23.230
> 
> 标签：jasper-reports, ireport

我需要将数据库字段作为超链接 url 的一部分添加到 jrxml 文件。在参考框中我有

```
"https://mywebsite.com/cart.php?a=add&pid=3&customfield[3]=<insert field>" 
```

我需要用字段 site_url 替换“插入字段”。我试过只插入字段名称

```
<$F{site_url}> 
```

但我明白了

```
<((java.lang.String)field_site_url.getValue())> 
```

而不是该领域的内容。

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:01:15.653

用户 216...,

以下是我如何在 iReport 中创建指向其他报表的参数化超链接：

*   右键单击要超链接的字段，然后单击“超链接”
*   将超链接类型更改为“ReportExecution”
*   单击链接参数选项卡
*   点击添加按钮
*   链接参数名称是目标报告中的参数
*   参数类名定义参数类
*   最后，值表达式是要传递的值，在您的情况下为 $F{site_url}

# javascript - 为什么我的全局变量在我的 javascript 文件的缩小版本中未定义？

> ID：16066872
> 
> 赞同：2
> 
> 时间：2013-04-17T17:56:08.830
> 
> 标签：javascript, minify

我有一个变量

```
var globalValue = 700; 
```

在我的 aScript.js 脚本文件的顶部声明，此变量正在由同一文件中的另一个函数 aFunction() 访问。

虽然一切正常，但当我缩小脚本文件时，aFunction() 中 globalValue 的值未定义。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:48:03.563

我在这里找到了罪魁祸首。另一个脚本文件有一个错误（我无法控制，因为它是由其他人编写的内部脚本），我们目前忽略了它，因为它非常微不足道。

我声明要缩小的文件的顺序是 -

```
<JavaScriptFiles Include= "Scripts/theScriptWithError.js" />
<JavaScriptFiles Include= "Scripts/aScript.js" /> 
```

所以现在，由于 theScriptWithError.js 中的错误，它没有从 aScript.js 加载我的变量。我移动了订单，以便

```
<JavaScriptFiles Include= "Scripts/aScript.js" />
<JavaScriptFiles Include= "Scripts/theScriptWithError.js" /> 
```

现在一切正常。

这就是一切混乱的原因。感谢您的建议和帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:13:08.960

[这里](https://stackoverflow.com/questions/16064947/javascript-confuse-about-functions-scope-of-variables)解释了同样的问题。您定义`globalValue`为全局变量。但是当您缩小代码时，在`aFunction()`函数内您还定义`globalValue`为局部变量（可能是因为缩小器），如下所示：

```
var globalValue = 700;
function aFunction() {
  var globalValue;
  alert(globalValue); // undefined
}
aFunction(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:14:09.147

声明行的缩小版本值得一看。我怀疑正在发生的事情是缩小器有助于缩短声明中的变量名（类似于_a1），但没有替换aFunction中所有出现的globalValue。

我以前用类似的缩小器看到过这个，但恐怕我从来没有深入了解原因——而是我在网上找到了一个正确缩小的脚本版本。

# ios - 故事板静态表格视图单元格不可访问

> ID：16066875
> 
> 赞同：0
> 
> 时间：2013-04-17T17:56:17.790
> 
> 标签：ios, uitableview, storyboard

使用情节提要，我创建了一个包含大约 6 个静态单元格的表格视图，这些单元格具有各种标签、开关和视图，其中一个在启动时不可见。这使得设计细胞非常容易。不幸的是，计划是通过解析数据结构来填充和设置所有 6 个单元中的开关和事物。我发现并且并非完全出乎意料的是，当我解析数据结构时不实例化不可见的最后一个单元格，因此未配置开关等。

在动态表格视图中，我只需在 cellForIndexPath 等中处理其中的一些内容，我可以在单元格出现之前对其进行配置。但是，对于静态单元格，您无法使用该数据源方法，否则将无法正常工作。

关于如何在滚动到视图之前强制实例化最后一个隐藏单元格（或我想要的所有单元格）的任何建议？还有什么其他方法可以解决这个问题？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:12:23.427

只需要添加`<UITableViewDelegate>`并添加方法`tableView:cellForRowAtIndexPath:`

# javascript - jQuery 上下文选择器差异

> ID：16066877
> 
> 赞同：1
> 
> 时间：2013-04-17T17:56:20.433
> 
> 标签：javascript, jquery, jquery-ui

挑战是将特定类添加到 jQuery UI 对话框中的特定按钮。

我已经测试了这两个，这将起作用：

```
$('button:contains("Add New")', $('#selectDialog').parent()).addClass('alternateButtonStyle'); 
```

这个; 但是，将不起作用：

```
$('button:contains("Add New")', '#selectDialog:parent').addClass('alternateButtonStyle'); 
```

为什么第二个代码示例不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:58:36.633

选择`:parent`器不选择父元素，它只是过滤到作为父元素的元素。它是 的倒数`:empty`。

[http://api.jquery.com/parent-selector/](http://api.jquery.com/parent-selector/)

它不会起作用，因为它没有做你认为它做的事情。

该用例也没有记录，您的上下文选择器实际上应该是一个 jquery 对象，只需将其包装在`$()`

未记录的功能可能会在没有警告的情况下被破坏。

# excel - 如何在 VBA 中列出图表对象的属性？

> ID：16066878
> 
> 赞同：1
> 
> 时间：2013-04-17T17:56:21.007
> 
> 标签：excel, vba, charts

我想克隆（使用 VBA）一些图表并能够更改它们，因为我需要知道它们包含什么。

如何在 VBA 中列出图表对象的属性，更像是其他语言中的对象转储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:02:35.270

在 VBE 中，使用 Locals 窗口：

![Chart 的 Locals 窗口部分视图的屏幕截图](https://i.stack.imgur.com/dSk52.jpg)

然后，您可以复制任何现有图表，并简单地操作需要为每个图表更改的属性，或者您可以即时创建新图表，根据需要设置属性。

# matlab - 过滤单元阵列 - MatLab

> ID：16066879
> 
> 赞同：1
> 
> 时间：2013-04-17T17:56:23.213
> 
> 标签：matlab, filter

我有一个问题，我想我已经回答了，但它没有用。这是交易：

我有一个大型单元格数组（大约 300000x60），其中包含一些数字数据、一些日期、一些空白、一些我必须过滤的字符串（如在 Excel 中）：例如：

```
m = ...
{   'date '    'code' 'number'  'market'  'max'     'min'    
 '01/01/2000'   'tsa'    1          0      0.9       0.0008
 '01/01/2000'   'sje'    2          0      1.8       1.5
 '01/02/2000'   'koi'    1          1      5.5       1.8
 '02/01/2000'   'sjk'    2          0      5.8       3.5
 '05/02/2000'   'kkj'    5          7      5.5       3.8 }; 
```

我可以使用以下方法过滤字符串（“代码”列）：

```
b = m(strcmp('tsa',m(:,2)),:); 
```

结果：

```
b =
'01/01/2000'   'tsa'    1          0      0.9       0.0008 
```

（这是完美的工作）。

但是，当我尝试过滤数字时，`c=m([m{:,3}] == 1,:);` 我在“c”中有一些奇怪的答案（我在第 3 列中得到了一个包含所有可能值的单元格数组，而不仅仅是对应于数字“1”的那些）！

我想要这样的答案：

```
 c = m([m{:,3}] == 1,:)
    c =
    '01/01/2000'   'tsa'    1          0      0.9       0.0008
    '01/02/2000'   'koi'    1          1      5.5       1.8 
```

谁能帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:10:19.050

问题是`m`单元格数组中的标题。

你必须离开标题：

```
c = m([m{2:end,3}] == 1,:) 
```

如果您选择整个第三列，您将获得：

```
>> m{:,3}
ans =
number
ans =
     1
ans =
     2
ans =
     1
ans =
     2
ans =
     5 
```

请注意，该列中的第一个单元格是 type `char`，而其他单元格是`double`。

如果你连接它们：

```
>> [m{:,3}]
ans =
number 
```

这里要小心，因为数字并没有消失，而是被转换为`char`，事实上：

```
>> double(ans)
ans =
   110   117   109    98   101   114     1     2     1     2     5 
```

现在发生的情况是，比较是针对这个扩大的数组进行的：

```
>> [m{:,3}] == 1
ans =
     0     0     0     0     0     0     1     0     1     0     0 
```

这可能不是您想要的索引。

要测试您的代码，您可以选择其中的一部分并按 F9。只有突出显示的代码将被执行。因此，您无需在 cmd 窗口中键入这些命令即可查看部分代码的作用。

# c++ - Assimp Sample 给出错误

> ID：16066881
> 
> 赞同：0
> 
> 时间：2013-04-17T17:56:35.200
> 
> 标签：c++, opengl, assimp

我刚刚得到了最后一个 assimp SDK，并做了一个项目，我正确地链接了它（链接没有错误）但是我似乎对 Sample 项目有一些麻烦。更具体地说，SimpleOpenGL 之一。我将 C++ 与 OpenGL 和 Visual Studio 10 结合使用。

```
struct aiVector3D scene_min, scene_max, scene_center; 
```

上面的行会产生以下错误。

```
1>main.cpp(25): error C2371: 'aiVector3D' : redefinition; different basic types
1>d:\libraries\assimp--3.0.1270-sdk\include\assimp\vector3.h(124) : see declaration of 'aiVector3D'
1>main.cpp(25): error C2079: 'scene_min' uses undefined struct 'aiVector3D'
1>main.cpp(25): error C2079: 'scene_max' uses undefined struct 'aiVector3D'
1>main.cpp(25): error C2079: 'scene_center' uses undefined struct 'aiVector3D' 
```

还有更多错误，但如果在我解决这个问题后它们仍然出现，我会发布它们。

***因评论而编辑***

看起来这样行得通！谢谢。但是你能解释一下为什么 struct 这个词不会影响 C 中的程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:29:07.200

您必须`struct`从定义中删除该词，因为[在头文件中](https://github.com/assimp/assimp/blob/master/include/assimp/vector3.h)`aiVector3D`声明的方式不同。

在链接的头文件中，您会看到`#ifdef __cplusplus`预处理器用于条件编译的行。这意味着`#else`如果您使用 C++ 编译器，直到下一个的所有内容都将被编译到目标文件中。这段代码告诉我们 aiVector3D 是`aiVector3t<float>`.

如果您使用纯 C 编译器，则 aiVector3D 的声明是

```
struct aiVector3D {
    float x,y,z;
} 
```

这将符合您的定义。

# c - 创建 atoi 函数

> ID：16066885
> 
> 赞同：4
> 
> 时间：2013-04-17T17:56:40.013
> 
> 标签：c, function, atoi

我正在尝试创建自己的 atoi 函数。使用以下内容，我得到的返回值为 0。无论我在函数中更改数字变量是什么，我都会得到一个返回值。关于修改代码的任何建议？

```
//my atoi function
int atoi_me(char *numstring)
{
    int number = 0;
    while((*numstring >= '0') && (*numstring <= '9'))
    {
        number = (number * 10) + (*numstring - '0');
        numstring++;
    }

    return number;
}

int main()
{
    char *number[MAXSIZE];
    int num;

    printf("Please enter a number:\n");
    scanf("%c", &number);
    num = atoi_me(*number);
    printf("%d", num);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:09:07.110

1.  您正在声明一个 数组`char *`，即字符串数组，而不是单个字符串。你可能想要：

    ```
    char number[MAXSIZE]; 
    ```

2.  您的`scanf`格式字符串错误。如果你想读取一个字符串，你应该使用`%s`. `%c`只读取一个字符。

3.  您的`scanf`参数是错误的 - 传递`number`自己（或者`&number[0]`如果您愿意），而不是`&number`.

4.  您传递给的参数`atoi_me`是错误的。`number`用（或等效地）调用它`&number[0]`，而不是`*number`.

把所有这些放在一起，你应该有一个`main`像这样的例程：

```
int main(void)
{
    char number[MAXSIZE];
    int num;
    printf("Please enter a number: ");
    scanf("%s", number);
    num = atoi_me(number);
    printf("%d\n", num);
    return 0;
} 
```

编者注：你有一个潜在的缓冲区溢出`scanf`行。你最好使用这样的功能，这样[`fgets(3)`](http://www.manpagez.com/man/3/fgets/)可以很容易地防止这种问题。

[`atoi(3)`](http://www.manpagez.com/man/3/atoi/)传统上还支持负数（带有前导`-`）和正数的可选前导`+`，您的实现无法处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:32:07.540

这不是您的`atoi_me()`功能的问题，而是您如何获取输入的问题。您的实现在您对工作原理的理解方面显示出一些弱点`scanf()`。这本身不是问题，犯错毕竟是学习过程的一部分。

首先将输入收集到缓冲区中通常更安全，因为`scanf()`标准输入过于依赖程序用户来完全按照您期望的方式输入输入。在这种情况下，没有太大的危害，因为您只需要一行输入。但是，通常，一个程序会处理多行输入，并且`scanf()`在发生错误时会卡住。因此，您可以使用类似这样的方法来获取输入行：

```
char line[MAXLINESIZE];

if (fgets(line, MAXLINESIZE, stdin) == 0) {
    fprintf(stderr, "no input was provided!\n");
    return 0;
} 
```

如其他地方所述，`%c`用于您收集的输入的格式说明符是错误的。由于您需要十进制数字，因此该`*scanf()`系列有一个格式说明符，允许您仅收集这些字符。

```
char number[MAXSIZE];

if (sscanf(line, " %[0-9]", number) != 1) {
    fprintf(stderr, "no number found in input: %s", line);
    return 0;
} 
```

在这里，我使用用`line`检索到的`fgets()`，并解析出包含数字的输入部分。前导空格会导致`sscanf()`跳过导致数字的空格字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:11:09.077

正如我所想，问题出在你的电话上。

将您的主要更改为。

```
int main()
{
    char number[MAXSIZE];
    int num;

    printf("Please enter a number:\n");
    scanf("%s", number);
    num = atoi_me(number);
    printf("%d", num);
    return 0;
} 
```

除此之外，使用 scanf - [http://c-faq.com/stdio/scanfprobs.html](http://c-faq.com/stdio/scanfprobs.html)不是一个好主意。在这种情况下，您应该使用`fgets`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:10:21.740

由于`number`应该是一个字符数组，

*   `char number[MAXSIZE];`您应该将其声明为
*   `&number`你不应该用`number`, 直接调用你的函数：`atoi_me(number);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T18:13:44.473

一些评论：

```
int atoi_me(const char *numstring)... 
```

最好使用 const 类型指针，因为您不打算修改字符串内容。

```
int main()
{
    char number[MAXSIZE]; // array of chars
    int num;

    printf("Please enter a number:\n");
    scanf("%s", number);     // enter a string, not a char
    num = atoi_me(number);   // pointer to char, not pointer to pointer
    printf("%d", num);
    return 0;
} 
```

# java - 使用 Bytebuffer 写出与简单写出的返回不同

> ID：16066889
> 
> 赞同：4
> 
> 时间：2013-04-17T17:56:54.810
> 
> 标签：java, bytebuffer, randomaccessfile

我正在尝试将字节数据写入文件并对其进行优化，我想减少写入文件的次数。

目前，我正在使用：

```
try (RandomAccessFile out = new RandomAccessFile(file, "rw")) {

    for(int i = 0; i < totalPkts; i++) {
        out.writeInt(data.get(i));
    }
} 
```

这工作正常，但由于有很多`out.write`电话，所以速度很慢。

因此，我尝试使用 a`ByteBuffer`来代替：

```
try (RandomAccessFile out = new RandomAccessFile(file, "rw")) {
    ByteBuffer buffer = ByteBuffer.allocate(totalPkts*4); // prevent BufferOverflow

    for(int i = 0; i < totalPkts; i++) {
        buffer.putInt(data.get(i));
    }
    out.write(buffer.array());
} 
```

两种方法生成的文件大小不同。该`ByteBuffer`文件几乎比正常的输出文件大一 mb。这可以解释为什么差异会说它们不一样。

我尝试使用 DataOutputStream，结果是一样的。使用写入的文件`ByteBuffer`仍然比不使用`ByteBuffer`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T13:45:03.067

使用 ByteBuffer 写入文件时较大的原因是因为您如何初始化 ByteBuffer。当您简单地编写 using 时`writeInt(int)`，您只编写了您需要编写的数据。但是，当您创建 ByteBuffer 时，您创建的它比我理解的防止溢出所需的大。但是，这也意味着底层数组，即从`array()`方法返回的数组，也比它需要的大。由于数组不了解位置和限制，所以当你写数组时，所有的数据*和*之后的空白空间都会被写入，导致文件很大。您需要做的是将所有数据放入缓冲区后，您需要翻转缓冲区，然后创建一个长度与`limit()`缓冲区（一旦翻转），然后`get(byte[])`是缓冲区中的所有数据。拥有*该*数组后，您需要编写它。

这就是我所说的：

```
try (RandomAccessFile out = new RandomAccessFile(file, "rw")) {
    ByteBuffer buffer = ByteBuffer.allocate(totalPkts*4);

    for(int i = 0; i < totalPkts; i++) {
        buffer.putInt(data.get(i));
    }

    buffer.flip();
    byte[] data = new byte[buffer.limit()];
    buffer.get(data);
    out.write(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:04:57.603

如果您想减少写入量，请考虑使用字节数组写入文件流。（前提是 data 变量中的数据可以转换为字节）。至于不一样，请检查您是否在某个时候刷新流并在程序终止之前正确关闭它。

# c# - 在 wix 中使用 Program Files 的短名称

> ID：16066890
> 
> 赞同：1
> 
> 时间：2013-04-17T17:56:56.137
> 
> 标签：c#, windows, wix, windows-installer, environment-variables

我正在使用 Wix 为应用程序创建 msi

在 AppName.wxs 中设置了一个环境变量：

```
<Component Id="MyAppEnvVar" Directory="TARGETDIR" Guid="eabcc802-6853-4db8-b827-    985db85683cf">
      <Environment Id="MyAppEnv" Action="set"
     Name='MyApp_HOME'
     Part='all'
     System="yes"
     Value="[BinDir]"/>
   </Component> 
```

BinDir 在此处指定：

```
<Directory Id='ProgramFilesFolder' Name='PFiles'>
       <Directory Id='MyAppDir' Name='MyApp'>
         <Directory Id='ClientDir' Name='$(env.MyAppDIR)'>
            <Directory Id='BinDir' Name='$(var.PRODUCTVERSION)'> 
```

这会将环境变量“MyApp_HOME”设置为 C:\Program Files (x86)\MyAPP\Client\2.0.0.0

我要做的是将 MyApp_HOME 设置为短名称，如下所示： c:\Progra~2\MyAPP\Client\2.0.0.0

我查看了 SHORTFILENAMES 属性，但不确定它如何适合 .wxs 文件。

是否可以在 Wix 中使用程序文件的短名称？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:42:22.077

您可以`SHORTFILENAMES`在 MSI 中将 设置为一个值，这将强制将所有内容安装到短路径。这是最接近的方法，它**可能会**起作用，但会对您习惯于以长形式看到的任何路径产生副作用。

该`Registry/@Value`属性允许您使用语法`[!FileId]`来获取`File`具有匹配`Id`属性的短路径。不幸的是，这不适用于`Environment/@Value`属性，也不适用于目录标识符。

这意味着您被困在编写自定义操作来自己解决它。如果可能，我建议修复读取属性的内容以支持长路径。:)

# c# - 如何使 WPF 故障转移到 WinForms

> ID：16066892
> 
> 赞同：0
> 
> 时间：2013-04-17T17:57:02.707
> 
> 标签：c#, .net, wpf, winforms, wpf-4.0

我正在编写一个将使用 WPF 或 WinForm 运行的应用程序。这个想法是，如果 Windows Presentation Foundation 不在系统上（例如旧服务器），我希望 WPF 故障转移到 Winform。

我不希望将它们“组合”起来，而是将它们与 WinForm 分开设计一个 WPF 表单。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:01:22.083

这没有意义。

*   如果开发面向 .Net Framework 3.0 或更高版本的 .Net 应用程序，则 WPF 将存在（它是 .Net Framework 的一部分）。

*   如果您没有安装该版本，则如果它的目标是不存在的框架版本，winforms 应用程序也不会运行。

*   任何给定的 .Net 应用程序都必须针对特定版本的框架，当然，该特定版本必须存在于它将运行的机器中。

*   如果您想要一些“回退”机制，您将必须构建同一应用程序的 2 个不同版本，一个针对 .Net 2.0，另一个针对 3.0 或更高版本，它们将是彼此无关的独立应用程序。

澄清：

如果说 .Net Framework 4.0 安装在给定的机器上，那么 WPF 就会安装在该机器上。WPF 是 .Net 框架的一部分，从 .Net 3.0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:02:46.377

您是否打算为您的应用程序安装安装程序？如果是这样，您可以检查系统上安装了哪个版本的 .NET 框架，然后确定要安装哪个版本的应用程序。

为了重用您的一些代码，您可以拥有一个库，您的应用程序的两个版本都可以将其用于与演示无关的业务逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:59:40.953

我认为这在大量工作中是不可能的。通常，如果缺少依赖项，Windows 会在启动时将所有依赖项加载到内存中，您的应用程序将崩溃。可以选择让它延迟加载，但这是一项安静的艰苦工作。

您可以使用用于 Windows 窗体的 dll 和用于 WPF 的第二个 dll 来实现它。您可以在启动和加载时检查系统，而不是当前系统的 GUI。

但是，我建议只编写一个 Windows 窗体 UI。实施每一个思考双重并不是很有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:13:12.273

我实际上已经实现了一个同时具有 WinForms 和 WPF 用户界面的程序。我首先实现了 WinForms，然后当人们抱怨 WinForms 看起来“太 90 年代”时添加了 WPF。目前，旧 UI 仍可通过“-winforms”命令行选项使用。我使用 MVVM 并严格禁止在视图模型中使用 WPF 类；因此，大部分代码在两个版本之间共享。WinForms 本身并不能很好地支持 MVVM 模式，但我使用了[Update Controls](http://updatecontrols.codeplex.com/)框架，它提供了自己独特的 MVVM 方法，作为位于 WinForms 之上的库（并与 WPF 无缝集成）。

然而，你想做的事情是相当具有挑战性的。WPF 附带 .NET 3.5（3.0？），因此您可能需要单独的可执行文件，一个用于 .NET 3.5，一个用于 2.0。（我对此不是 100% 确定的，因为 .NET 3.5 实际上仍然使用相同的 2.0 CLR 二进制文件；所以它可能以某种方式在一个可执行文件中完成。）

但是为什么要这么麻烦呢？现在几乎所有的计算机都安装了 .NET 3.5，没有的计算机可以升级。

# ruby-on-rails - 如何使用导轨上的引导程序启用开关切换？

> ID：16066893
> 
> 赞同：0
> 
> 时间：2013-04-17T17:57:12.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我想在我的 rails 应用程序上实现这个开关切换。
[http://www.larentis.eu/bootstrap_toggle_buttons/](http://www.larentis.eu/bootstrap_toggle_buttons/)
[https://github.com/nostalgiaz/bootstrap-switch](https://github.com/nostalgiaz/bootstrap-switch)

所以，我所做的是，

在下面创建这些

*   /assets/javascripts/bootstrap_toggle.js
*   /assets/javascripts/toggle.js
*   /assets/stylesheets/bootstrap_toggle.css.erb

在**views/layouts/application.html.erb** 我添加了这些

```
<%= javascript_include_tag 'bootstrap_toggle.js' %>
<%= stylesheet_link_tag 'bootstrap_toggle' %> 
```

然后我将其添加到视图以显示**切换**

```
<div id="normal-toggle-button">
    <input type="checkbox" checked="checked">
</div> 
```

在上述一切之后，我执行了

```
bundle exec rake assets:precompile RAILS_ENV=production 
```

但是，它只显示常规复选框，而不是切换:(为什么？我该如何修复？？？

**/assets/javascripts/bootstrap_toggle.js**

```
!function ($) {
  "use strict";

  $.fn['bootstrapSwitch'] = function (method) {
    var methods = {
      init: function () {
        return this.each(function () {
            var $element = $(this)
              , $div
              , $switchLeft
              , $switchRight
              , $label
              , myClasses = ""
              , classes = $element.attr('class')
              , color
              , moving
              , onLabel = "ON"
              , offLabel = "OFF"
              , icon = false;

            $.each(['switch-mini', 'switch-small', 'switch-large'], function (i, el) {
              if (classes.indexOf(el) >= 0)
                myClasses = el;
            });

            $element.addClass('has-switch');

            if ($element.data('on') !== undefined)
              color = "switch-" + $element.data('on');

            if ($element.data('on-label') !== undefined)
              onLabel = $element.data('on-label');

            if ($element.data('off-label') !== undefined)
              offLabel = $element.data('off-label');

            if ($element.data('icon') !== undefined)
              icon = $element.data('icon');

            $switchLeft = $('<span>')
              .addClass("switch-left")
              .addClass(myClasses)
              .addClass(color)
              .html(onLabel);

            color = '';
            if ($element.data('off') !== undefined)
              color = "switch-" + $element.data('off');

            $switchRight = $('<span>')
              .addClass("switch-right")
              .addClass(myClasses)
              .addClass(color)
              .html(offLabel);

            $label = $('<label>')
              .html("&nbsp;")
              .addClass(myClasses)
              .attr('for', $element.find('input').attr('id'));

            if (icon) {
              $label.html('<i class="icon icon-' + icon + '"></i>');
            }

            $div = $element.find(':checkbox').wrap($('<div>')).parent().data('animated', false);

            if ($element.data('animated') !== false)
              $div.addClass('switch-animate').data('animated', true);

            $div
              .append($switchLeft)
              .append($label)
              .append($switchRight);

            $element.find('>div').addClass(
              $element.find('input').is(':checked') ? 'switch-on' : 'switch-off'
            );

            if ($element.find('input').is(':disabled'))
              $(this).addClass('deactivate');

            var changeStatus = function ($this) {
              $this.siblings('label').trigger('mousedown').trigger('mouseup').trigger('click');
            };

            $element.on('keydown', function (e) {
              if (e.keyCode === 32) {
                e.stopImmediatePropagation();
                e.preventDefault();
                changeStatus($(e.target).find('span:first'));
              }
            });

            $switchLeft.on('click', function (e) {
              changeStatus($(this));
            });

            $switchRight.on('click', function (e) {
              changeStatus($(this));
            });

            $element.find('input').on('change', function (e) {
              var $this = $(this)
                , $element = $this.parent()
                , thisState = $this.is(':checked')
                , state = $element.is('.switch-off');

              e.preventDefault();

              $element.css('left', '');

              if (state === thisState) {

                if (thisState)
                  $element.removeClass('switch-off').addClass('switch-on');
                else $element.removeClass('switch-on').addClass('switch-off');

                if ($element.data('animated') !== false)
                  $element.addClass("switch-animate");

                $element.parent().trigger('switch-change', {'el': $this, 'value': thisState})
              }
            });

            $element.find('label').on('mousedown touchstart', function (e) {
              var $this = $(this);
              moving = false;

              e.preventDefault();
              e.stopImmediatePropagation();

              $this.closest('div').removeClass('switch-animate');

              if ($this.closest('.switch').is('.deactivate'))
                $this.unbind('click');
              else {
                $this.on('mousemove touchmove', function (e) {
                  var $element = $(this).closest('.switch')
                    , relativeX = (e.pageX || e.originalEvent.targetTouches[0].pageX) - $element.offset().left
                    , percent = (relativeX / $element.width()) * 100
                    , left = 25
                    , right = 75;

                  moving = true;

                  if (percent < left)
                    percent = left;
                  else if (percent > right)
                    percent = right;

                  $element.find('>div').css('left', (percent - right) + "%")
                });

                $this.on('click touchend', function (e) {
                  var $this = $(this)
                    , $target = $(e.target)
                    , $myCheckBox = $target.siblings('input');

                  e.stopImmediatePropagation();
                  e.preventDefault();

                  $this.unbind('mouseleave');

                  if (moving)
                    $myCheckBox.prop('checked', !(parseInt($this.parent().css('left')) < -25));
                  else $myCheckBox.prop("checked", !$myCheckBox.is(":checked"));

                  moving = false;
                  $myCheckBox.trigger('change');
                });

                $this.on('mouseleave', function (e) {
                  var $this = $(this)
                    , $myCheckBox = $this.siblings('input');

                  e.preventDefault();
                  e.stopImmediatePropagation();

                  $this.unbind('mouseleave');
                  $this.trigger('mouseup');

                  $myCheckBox.prop('checked', !(parseInt($this.parent().css('left')) < -25)).trigger('change');
                });

                $this.on('mouseup', function (e) {
                  e.stopImmediatePropagation();
                  e.preventDefault();

                  $(this).unbind('mousemove');
                });
              }
            });
          }
        );
      },
      toggleActivation: function () {
        $(this).toggleClass('deactivate');
      },
      isActive: function () {
        return !$(this).hasClass('deactivate');
      },
      setActive: function (active) {
        if (active)
          $(this).removeClass('deactivate');
        else $(this).addClass('deactivate');
      },
      toggleState: function (skipOnChange) {
        var $input = $(this).find('input:checkbox');
        $input.prop('checked', !$input.is(':checked')).trigger('change', skipOnChange);
      },
      setState: function (value, skipOnChange) {
        $(this).find('input:checkbox').prop('checked', value).trigger('change', skipOnChange);
      },
      status: function () {
        return $(this).find('input:checkbox').is(':checked');
      },
      destroy: function () {
        var $div = $(this).find('div')
          , $checkbox;

        $div.find(':not(input:checkbox)').remove();

        $checkbox = $div.children();
        $checkbox.unwrap().unwrap();

        $checkbox.unbind('change');

        return $checkbox;
      }
    };

    if (methods[method])
      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    else if (typeof method === 'object' || !method)
      return methods.init.apply(this, arguments);
    else
      $.error('Method ' + method + ' does not exist!');
  };
}(jQuery);

$(function () {
  $('.switch')['bootstrapSwitch']();
}); 
```

**/assets/javascripts/toggle.js**

```
$('#normal-toggle-button').toggleButtons(); 
```

**/assets/stylesheets/bootstrap_toggle.css.erb**

```
.has-switch {
  display: inline-block;
  cursor: pointer;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  border: 1px solid;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  position: relative;
  text-align: left;
  overflow: hidden;
  line-height: 8px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
  min-width: 100px;
}
.has-switch.switch-mini {
  min-width: 72px;
}
.has-switch.switch-small {
  min-width: 80px;
}
.has-switch.switch-large {
  min-width: 120px;
}
.has-switch.deactivate {
  opacity: 0.5;
  filter: alpha(opacity=50);
  cursor: default !important;
}
.has-switch.deactivate label,
.has-switch.deactivate span {
  cursor: default !important;
}
.has-switch > div {
  display: inline-block;
  width: 150%;
  position: relative;
  top: 0;
}
.has-switch > div.switch-animate {
  -webkit-transition: left 0.5s;
  -moz-transition: left 0.5s;
  -o-transition: left 0.5s;
  transition: left 0.5s;
}
.has-switch > div.switch-off {
  left: -50%;
}
.has-switch > div.switch-on {
  left: 0%;
}
.has-switch input[type=checkbox] {
  display: none;
}
.has-switch span,
.has-switch label {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  cursor: pointer;
  position: relative;
  display: inline-block;
  height: 100%;
  padding-bottom: 4px;
  padding-top: 4px;
  font-size: 14px;
  line-height: 20px;
}
.has-switch span.switch-mini,
.has-switch label.switch-mini {
  padding-bottom: 4px;
  padding-top: 4px;
  font-size: 10px;
  line-height: 9px;
}
.has-switch span.switch-small,
.has-switch label.switch-small {
  padding-bottom: 3px;
  padding-top: 3px;
  font-size: 12px;
  line-height: 18px;
}
.has-switch span.switch-large,
.has-switch label.switch-large {
  padding-bottom: 9px;
  padding-top: 9px;
  font-size: 16px;
  line-height: normal;
}
.has-switch label {
  text-align: center;
  margin-top: -1px;
  margin-bottom: -1px;
  z-index: 100;
  width: 34%;
  border-left: 1px solid #cccccc;
  border-right: 1px solid #cccccc;
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #f5f5f5;
  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));
  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
  border-color: #e6e6e6 #e6e6e6 #bfbfbf;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #e6e6e6;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch label:hover,
.has-switch label:focus,
.has-switch label:active,
.has-switch label.active,
.has-switch label.disabled,
.has-switch label[disabled] {
  color: #ffffff;
  background-color: #e6e6e6;
  *background-color: #d9d9d9;
}
.has-switch label:active,
.has-switch label.active {
  background-color: #cccccc \9;
}
.has-switch label i {
  color: #000;
  text-shadow: 0 1px 0 #fff;
  line-height: 18px;
  pointer-events: none;
}
.has-switch span {
  text-align: center;
  z-index: 1;
  width: 33%;
}
.has-switch span.switch-left {
  -webkit-border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px;
  border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px;
  border-bottom-left-radius: 4px;
}
.has-switch span.switch-right {
  color: #333333;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
  background-color: #f0f0f0;
  background-image: -moz-linear-gradient(top, #e6e6e6, #ffffff);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#e6e6e6), to(#ffffff));
  background-image: -webkit-linear-gradient(top, #e6e6e6, #ffffff);
  background-image: -o-linear-gradient(top, #e6e6e6, #ffffff);
  background-image: linear-gradient(to bottom, #e6e6e6, #ffffff);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffe6e6e6', endColorstr='#ffffffff', GradientType=0);
  border-color: #ffffff #ffffff #d9d9d9;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #ffffff;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-right:hover,
.has-switch span.switch-right:focus,
.has-switch span.switch-right:active,
.has-switch span.switch-right.active,
.has-switch span.switch-right.disabled,
.has-switch span.switch-right[disabled] {
  color: #333333;
  background-color: #ffffff;
  *background-color: #f2f2f2;
}
.has-switch span.switch-right:active,
.has-switch span.switch-right.active {
  background-color: #e6e6e6 \9;
}
.has-switch span.switch-primary,
.has-switch span.switch-left {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #005fcc;
  background-image: -moz-linear-gradient(top, #0044cc, #0088cc);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0044cc), to(#0088cc));
  background-image: -webkit-linear-gradient(top, #0044cc, #0088cc);
  background-image: -o-linear-gradient(top, #0044cc, #0088cc);
  background-image: linear-gradient(to bottom, #0044cc, #0088cc);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0044cc', endColorstr='#ff0088cc', GradientType=0);
  border-color: #0088cc #0088cc #005580;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #0088cc;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-primary:hover,
.has-switch span.switch-left:hover,
.has-switch span.switch-primary:focus,
.has-switch span.switch-left:focus,
.has-switch span.switch-primary:active,
.has-switch span.switch-left:active,
.has-switch span.switch-primary.active,
.has-switch span.switch-left.active,
.has-switch span.switch-primary.disabled,
.has-switch span.switch-left.disabled,
.has-switch span.switch-primary[disabled],
.has-switch span.switch-left[disabled] {
  color: #ffffff;
  background-color: #0088cc;
  *background-color: #0077b3;
}
.has-switch span.switch-primary:active,
.has-switch span.switch-left:active,
.has-switch span.switch-primary.active,
.has-switch span.switch-left.active {
  background-color: #006699 \9;
}
.has-switch span.switch-info {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #41a7c5;
  background-image: -moz-linear-gradient(top, #2f96b4, #5bc0de);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#2f96b4), to(#5bc0de));
  background-image: -webkit-linear-gradient(top, #2f96b4, #5bc0de);
  background-image: -o-linear-gradient(top, #2f96b4, #5bc0de);
  background-image: linear-gradient(to bottom, #2f96b4, #5bc0de);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff2f96b4', endColorstr='#ff5bc0de', GradientType=0);
  border-color: #5bc0de #5bc0de #28a1c5;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #5bc0de;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-info:hover,
.has-switch span.switch-info:focus,
.has-switch span.switch-info:active,
.has-switch span.switch-info.active,
.has-switch span.switch-info.disabled,
.has-switch span.switch-info[disabled] {
  color: #ffffff;
  background-color: #5bc0de;
  *background-color: #46b8da;
}
.has-switch span.switch-info:active,
.has-switch span.switch-info.active {
  background-color: #31b0d5 \9;
}
.has-switch span.switch-success {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #58b058;
  background-image: -moz-linear-gradient(top, #51a351, #62c462);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#51a351), to(#62c462));
  background-image: -webkit-linear-gradient(top, #51a351, #62c462);
  background-image: -o-linear-gradient(top, #51a351, #62c462);
  background-image: linear-gradient(to bottom, #51a351, #62c462);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff51a351', endColorstr='#ff62c462', GradientType=0);
  border-color: #62c462 #62c462 #3b9e3b;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #62c462;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-success:hover,
.has-switch span.switch-success:focus,
.has-switch span.switch-success:active,
.has-switch span.switch-success.active,
.has-switch span.switch-success.disabled,
.has-switch span.switch-success[disabled] {
  color: #ffffff;
  background-color: #62c462;
  *background-color: #4fbd4f;
}
.has-switch span.switch-success:active,
.has-switch span.switch-success.active {
  background-color: #42b142 \9;
}
.has-switch span.switch-warning {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #f9a123;
  background-image: -moz-linear-gradient(top, #f89406, #fbb450);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#f89406), to(#fbb450));
  background-image: -webkit-linear-gradient(top, #f89406, #fbb450);
  background-image: -o-linear-gradient(top, #f89406, #fbb450);
  background-image: linear-gradient(to bottom, #f89406, #fbb450);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff89406', endColorstr='#fffbb450', GradientType=0);
  border-color: #fbb450 #fbb450 #f89406;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #fbb450;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-warning:hover,
.has-switch span.switch-warning:focus,
.has-switch span.switch-warning:active,
.has-switch span.switch-warning.active,
.has-switch span.switch-warning.disabled,
.has-switch span.switch-warning[disabled] {
  color: #ffffff;
  background-color: #fbb450;
  *background-color: #faa937;
}
.has-switch span.switch-warning:active,
.has-switch span.switch-warning.active {
  background-color: #fa9f1e \9;
}
.has-switch span.switch-danger {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #d14641;
  background-image: -moz-linear-gradient(top, #bd362f, #ee5f5b);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#bd362f), to(#ee5f5b));
  background-image: -webkit-linear-gradient(top, #bd362f, #ee5f5b);
  background-image: -o-linear-gradient(top, #bd362f, #ee5f5b);
  background-image: linear-gradient(to bottom, #bd362f, #ee5f5b);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffbd362f', endColorstr='#ffee5f5b', GradientType=0);
  border-color: #ee5f5b #ee5f5b #e51d18;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #ee5f5b;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.has-switch span.switch-danger:hover,
.has-switch span.switch-danger:focus,
.has-switch span.switch-danger:active,
.has-switch span.switch-danger.active,
.has-switch span.switch-danger.disabled,
.has-switch span.switch-danger[disabled] {
  color: #ffffff;
  background-color: #ee5f5b;
  *background-color: #ec4844;
}
.has-switch span.switch-danger:active,
.has-switch span.switch-danger.active {
  background-color: #e9322d \9;
} 
```

# javascript - 如何找到“完整”图像的数量？

> ID：16066897
> 
> 赞同：14
> 
> 时间：2013-04-17T17:57:21.317
> 
> 标签：javascript, html, jquery

我想查找具有“完成”属性的特定元素（div）中的图像数量（因为在浏览器中已完成加载它们）。

我已经在这个问题上磕磕绊绊了一个多小时，我的大脑完全被炸了。一些帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T18:00:05.547

要回答您的直接问题以查找具有该`complete`属性的图像，您可以使用以下命令：

```
var container = document.getElementById("div_id"),
    images = container.getElementsByTagName("img"),
    completeImages = [],
    j = images.length,
    i, cur;
for (i = 0; i < j; i++) {
    cur = images[i];
    if (cur.complete) {
        completeImages.push(cur);
    }
} 
```

运行此代码后，是一个具有as 属性的元素`completeImages`数组。`<img>``complete``true`

使用 jQuery，您可以使用：

```
var images = $("#div_id").find("img").filter(function () {
    return $(this).prop("complete");
    // or
    return this.complete;
}); 
```

在这种情况下， , 是具有as 属性的元素`images`的 jQuery 对象（类似数组的对象）。`<img>``complete``true`

`complete`另一个选项是使用`load`事件来检测它们何时加载并为它们设置特殊数据，而不是检查属性：

```
$("#div_id").on("load", "img", function () {
    $(this).data("image-complete", true);
}); 
```

并找出加载了哪些/多少：

```
$("#div_id").find("img").filter(function () {
    return $(this).data("image-complete");
}); 
```

请注意，`load`事件不完全支持/可靠`<img>`s: [http://api.jquery.com/load-event/](http://api.jquery.com/load-event/) - 向下滚动到“与图像一起使用时加载事件的注意事项”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:01:15.933

您还可以使用类重新创建相同的行为 -

```
$("img").load(function(){
  $(this).addClass('complete');
}); 
```

现在，每当您想查看已加载的图像数量时，您都可以使用此选择器 -

```
$("img.complete").length 
```

# vba - 带有空格和范围的 MS Access VBA acImport 工作表名称

> ID：16066903
> 
> 赞同：4
> 
> 时间：2013-04-17T17:57:40.170
> 
> 标签：vba, ms-access, import, ms-access-2010, spreadsheet

我正在构建一个带有一个名为“Go”的按钮的表单，用于从 Excel 文件中导入特定范围的特定 Excel 工作表。另一个子/函数负责将文件名放在名为 text_filepathdata 的字段中。

我发现工作表名称中的空格是有问题的，但是可以通过使用特殊引号来解决。

```
Dim sheetname As String
sheetname = "'Commit Volumes!'"
DoCmd.Transferspreadsheet acImport, acSpreadsheetTypeExcel12, _
    "lcl_ImportedFile", text_filepathdata, True, sheetname 
```

那行得通，但是由于特殊引号，我无法在工作表名称之外指定范围...（即“'Commit Volumes！A6：Z5000'”不起作用，两者的串联也不起作用像“'Commit Volumes'”和“A6:Z5000”这样的作品）

我尝试了各种引用和连接方式，但唯一有效的是：

```
sheetname = "'Commit Volumes!'"
sheetname = "'Commit Volumes$'"
sheetname = "CommitVolumes!A6:Z5000" 
```

无法修改 Excel 表，因为它来自另一个系统，并且文件（更新后）必须上传回该系统。

这是我的代码：

```
Private Sub button_Go_Click()
On Error GoTo Err_button_Go_Click

Dim sheetname As String
sheetname = "'Commit Volumes!'"

If IsNull(text_filepathdata) Or text_filepathdata = "" Then
    MsgBox "Please browse and select a valid file to import.", _
        vbCritical, "Invalid File"
Else
    DoCmd.OpenForm "f_PleaseWait_Processing", acNormal, , , acFormReadOnly, acWindowNormal
    If ifTableExists("lcl_ImportedFile") = True Then
        DoCmd.DeleteObject acTable, "lcl_ImportedFile"
    End If
    DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel12,_
        "lcl_ImportedFile", text_filepathdata, True, sheetname

'Call module to process the imported data
        Call MainProcess
    End If

Exit_button_Go_Click:
    Exit Sub

Err_button_Go_Click:
    MsgBox Err.Number & " - " & Err.Description
    Resume Exit_button_Go_Click

End Sub 
```

根据问题，我收到两条不同的错误消息。

如果名称中有空格，我会得到：运行时错误 3129：无效的 SQL 语句；预期为“DELETE”、“INSERT”、“PROCEDURE”、“SELECT”或“UPDATE”。

如果名称有问题，否则我会得到：运行时错误 3011：Microsoft Access 数据库引擎找不到对象“Commit Volumes$A1:Z5000”。确保对象存在并且正确拼写其名称和路径。如果“Commit Volumes$A1:Z5000”不是本地对象，请检查您的网络连接或联系服务器管理员。

任何帮助将不胜感激！

账单

我尝试过的变体：

```
sheetname = "'Commit Volumes'!A6:Z5000"; 
sheetname = "'Commit Volumes!'A6:Z5000" 
sheetname = "'Commit Volumes$'A6:Z5000" 
sheetname = "'Commit Volumes'$A6:Z5000" 
sheetname = "'Commit Volumes'$A$6:$Z$5000" 
sheetname = "'Commit Volumes!'$A$6:$Z$5000" 
sheetname = "'Commit Volumes$'$A$6:$Z$5000" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:21:17.160

如果文件以已知\set 格式从其他系统导出，您可以通过索引而不是名称来引用它：

例如：工作表 (1)、工作表 (2)。然后添加范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-14T01:29:37.010

我有同样的问题。当我创建一个范围字符串变量并将其传递给 DoCmd.TransferSpreadsheet 例程时，Access 更改了“！” 字符到“$”并给了我一个错误。如果我将字符串常量传递给 DoCmd.TransferSpreadsheet 例程的 Range 参数，Access 不会更改该字符。换句话说，运行以下代码，...

```
Dim strFilename As String
Dim strRange As String
Dim strTableName As String

strFilename = "YourWorkbookName.xlsx"
strRange = "Sheet5!A1:Z99"
strTableName = "tblImport"

DoCmd.TransferSpreadsheet _
  TransferType:=acImport, _
  SpreadsheetType:=acSpreadsheetTypeExcel12Xml, _
  TableName:=strTableName, _
  FileName:=strFilename, _
  HasFieldNames:=True, _
  Range:=strRange 
```

...给了我 3011 运行时错误。

但是，当我将工作表名称和地址分成两个单独的变量并将它们传递给例程时，Access 很高兴。换句话说，当我运行代码时，...

```
Dim strAddress As String
Dim strFilename As String
Dim strSheetName As String
Dim strTableName As String

strAddress = "A1:Z99"
strFilename = "YourWorkbookName.xlsx"
strSheetName = "Sheet5"
strTableName = "tblImport"

DoCmd.TransferSpreadsheet _
  TransferType:=acImport, _
  SpreadsheetType:=acSpreadsheetTypeExcel12Xml, _
  TableName:=strTableName, _
  FileName:=strFilename, _
  HasFieldNames:=True, _
  Range:=strSheetName & "!" & strAddress 
```

...我没有收到任何错误，并且 Sheet5 工作表中的数据已正确导入 tblImport。

需要注意的是，Sheet5 不是工作簿的第一张工作表，并且 strAddress 中没有“$”字符。

快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:06:18.717

这就是你需要的：

`'Commit Volumes'!A6:Z5000`

当工作表名称带有空格或破折号时，excel 会在工作表名称本身周围放置单引号，而不是在整个引用周围。

所以：

```
sheetname = "'Commit Volumes'!A6:Z5000" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T16:52:03.203

使用不带范围的 sheetname = "Commit Volumes$" 似乎可以通过将表字段名称与 excel 列标题相匹配来工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T18:13:56.713

我找到了一种适用于我需要的两种情况的解决方案。

上面的原始海报和所有在这里回答的尝试都无法偶然发现使其工作所需的特定格式。通过顽固的反复试验，我做到了，这不是我们任何人所期望的。

为了让 DoCmd.TransferSpreadsheet 函数获取特定工作表上的特定范围，“范围”参数必须采用以下格式：

```
"SheetName$A1:Z100" 
```

如果 SheetName 中有空格，则它必须是：

```
"Sheet Name$A1:Z100" 
```

1.  工作表名称*不能*放在单引号中，否则方法将失败。
2.  工作表名称*不能*在范围之前以感叹号结尾，否则该方法将失败。
3.  范围 (A1:Z100) 不得*采用*固定寻址表示法，否则该方法将失败。

总结一下：如果您有一个名为“WB”的工作簿，其中包含两个工作表：“S1”和“S 2”，并且您想从每个工作表中导入范围 A1:Z100：

```
DoCmd.TransferSpreadsheet ,,"TABLE NAME 1","WB",,"S1$A1:Z100"
DoCmd.TransferSpreadsheet ,,"TABLE NAME 2","WB",,"S 2$A1:Z100" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T19:36:54.933

我遇到过同样的问题。

最后我发现你可以使用：

sheetname = "Commit Volumes!A6:Z5000" example DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel9, "table name", _ filetoimport, False, "Commit Volumes!A6:Z5000"

问候！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-06T00:35:03.923

我尝试了上述建议的解决方案，不幸的是它在我的情况下不起作用：当工作表的名称中有空格时，Access 的导入方法确实不喜欢它。

我做了一个解决方法：将代码中的工作表重命名为简短且没有空格的名称，例如：从“Data Q1 2016”到“WS1”。这样，您可以将值“WS1$”传递给导入函数的 Range 参数，Access 将导入给定工作表的使用范围

导入第二个工作表时，我再次使用代码并将其重命名为“WS2”......等等。

总之：在代码运行时将工作表重命名为不带空格的短名称，并在末尾添加“$”符号以使其获取使用的范围。

# java - 为什么它不在前面？

> ID：16066904
> 
> 赞同：-3
> 
> 时间：2013-04-17T17:57:44.370
> 
> 标签：java, jsf

```
 <h:dataTable class="pretty" value="" var="item">
                    <h:column>
                        <f:facet name="Title">
                            <h:outputText value="Title"/>
                        </f:facet>
                        <h:outputText value="Title"/>
                    </h:column>
                    <h:column >
                        <f:facet  name="Outstanding" class="right" >
                            <h:outputText value="Description"/>
                        </f:facet>
                        <h:outputText  value="Outstanding"/>
                    </h:column>
                </h:dataTable> 
```

输出列在 tbody 中而不是在 ad 中，为什么？我希望他们在头。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:04:16.867

你想要`<f:facet name="header">`，不`Title`或者`Outstanding`。已命名的构面将`header`进入. 构面的内容（“标题”或“杰出”）将是标题单元格的内容。`th``thead`

# c++ - 关于将输入存储到字符串中，并使用 cout 显示它

> ID：16066906
> 
> 赞同：0
> 
> 时间：2013-04-17T17:57:46.100
> 
> 标签：c++, arrays, switch-statement

我正在编写一个程序，它将请求用户输入 INT，并将其存储在 [10] 的数组中。我希望能够让用户选择选项 DISPLAY 并查看数组中的所有数据。我只是想不通，这是我到目前为止所拥有的：

```
case 2 : {
                 int SamtW;
                 cout << " Please enter how much you would like to withdraw "<< endl;
                 cin >> SamtW;
                 sa.doWithdraw(SamtW);
                 break;
             } 
```

这是上面调用的函数：

```
int saving:: doWithdraw(int amount)
{
    for (int i = 0; i < 10; i++)
{
     last10withdraws[amount];
    }
    if (amount > 1)
    {
    setBalanceW(amount);
    }
    else {
        cout << " ERROR. Number must be greater then zero. " << endl;
    }
    return 0;
} 
```

我相信这会将用户输入放入字符串 last10withdraws 中。然后我希望用户能够调用这个函数：

```
string saving::display()
{
    last10withdraws[10];
    return 0;
} 
```

这将有望显示数组的内容。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:06:49.557

```
last10withdraws[10]; 
```

这没有任何作用。这将获取数组的第 11 个元素（不存在）的值，然后将其丢弃。

同样是这样：

```
 last10withdraws[amount]; 
```

获取元素的值`last10withdraws`并将其丢弃。它不会为它分配任何值或将其存储在任何地方。

我想你想要：

```
int saving:: doWithdraw(int amount)
{
    if (amount > 0)
    {
        for (int i = 9; i != 0; i--)
        { // move the 9 elements we're keeping up one
            last10withdraws[i] = last10withdraws[i-1];
        }
        last10withdraws[0] = amount; // add the latest
        setBalanceW(amount);  // process the withdraw
    }
    else
    {
        cout << " ERROR. Number must be greater then zero. " << endl;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:14:37.183

好的 从您的评论中：

首先，您需要一个额外的变量，`saving`例如`nr_of_withdraws`. 它将跟踪`withdraws`已制作的数量。并且在构造类时应该将其分配为零。

然后每次你插入到`last10withdraws`你增量`nr_of_withdraws`。如果`nr_of_withdraws`大于 9，则您的数组已满，您需要对其进行处理。所以...

* * *

```
// Constructor.
saving::saving {
    nr_of_withdraws = 0;
} 
```

* * *

```
// doWithdraw
int saving:: doWithdraw(int amount)
{
    // See if you have space
    if(nr_of_withdraws > 9)
       cout << "last10withdraws are done. Slow down."
       return 0;
    }
    // These lines. oh thy are needed.
    last10withdraws[nr_of_withdraws] = amount;
    nr_of_withdraws++;

    if (amount > 1)
    {
        setBalanceW(amount);
    }
    else {
        cout << " ERROR. Number must be greater then zero. " << endl;
    }
    return 0;
} 
```

# ios - connectionDidFinishLoading 没有被调用，为什么？

> ID：16066908
> 
> 赞同：1
> 
> 时间：2013-04-17T17:57:48.507
> 
> 标签：ios, objective-c, request, nsurlconnection, send

我发送请求，但没有调用方法 connectionDidFinishLoading，为什么？

```
- (void)startHttpRequestWithCookie:(NSArray *)authCookies
{
    NSURL *url = [NSURL URLWithString:@"http://test.test/mbox.php"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    NSDictionary* headers = [NSHTTPCookie requestHeaderFieldsWithCookies:authCookies];
    [request setHTTPShouldHandleCookies:NO];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setAllHTTPHeaderFields:headers];
   NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (connection) {
        // Create the NSMutableData to hold the received data.
             responseData = [NSMutableData new];
    } else {
        // Inform the user that the connection failed.
    }
}

  - (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
        [responseData setLength:0];
    }

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [responseData appendData:data];
    }

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
        NSString* responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
        NSLog(@"%@", responseString);
        NSError *error = nil;
        NSData* data = [responseString dataUsingEncoding:NSUTF8StringEncoding];

etc..
    } 
```

这是我的代码，我不明白为什么不叫connectionDidFinishLoading

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:16:18.600

尝试实现`- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response`并检查响应对象中返回的值。

# c# - 我在哪里可以找到 LongListSelectorItem？

> ID：16066912
> 
> 赞同：0
> 
> 时间：2013-04-17T17:57:53.120
> 
> 标签：c#, windows-phone-8

我已经通过 NuGet 安装了最新版本的 WPtoolkit。

通过浏览 CodePlex 上的代码，它看起来好像应该可用： http: [//phone.codeplex.com/SourceControl/changeset/view/80797#1336040](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336040)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:49:53.087

它在默认`<phone> </phone>`命名空间下

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj244365%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj244365%28v=vs.105%29.aspx)

参考也见 [http://www.geekchamp.com/articles/the-new-longlistselector-control-in-windows-phone-8-sdk-in-depth](http://www.geekchamp.com/articles/the-new-longlistselector-control-in-windows-phone-8-sdk-in-depth)

# c - 对二维数组求和

> ID：16066913
> 
> 赞同：1
> 
> 时间：2013-04-17T17:58:02.913
> 
> 标签：c, for-loop, multidimensional-array

代码：

```
for ( int i = 0 ; i < n ; i++)
    for ( int j = 0 ; j < n ; j++)
        sum += ? ; 
```

什么是更好的？

```
sum += a[i][j] or
sum += a[j][i] 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:05:02.543

鉴于您有一个平方数组（列数 = 行数），运行时间/结果没有区别。

```
sum+=a[i][j]; 
```

前任。

```
1 2 3
4 5 6
7 8 9

sum= 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9; 
```

这个是通过从第一行开始并将其上的每个数字添加到总和并在它进入下一行之后得出总和。

总和+=a[j][i];

前任。

```
1 2 3
4 5 6
7 8 9

sum= 1 + 4 + 7 + 2 + 5 + 8 + 3 + 6 + 9; 
```

另一方面，这个取一列中每个元素的总和，然后移到下一列。

如果您没有相同数量的行和列，则必须稍微编辑一下 for 语法。

```
for(int i = 0; i < n; i++)     // n = number of rows
  for(int j = 0; j < m; j++)   // m = number of columns
     sum += a[i][j]; 
```

当然在这里你可以反转 fors，和/或使用 sum+a[i][j]; 最终结果将是相同的，但总和将以另一种方式创建。

由于新信息而编辑：

告诉自己一些时间复杂度，实际上由于缓存的原因有一个小的时间差。访问靠近在一起的数据内存比相距很远的数据内存要快，所以 a[i][j] 会比 a[ j][i]。

为了查看这些差异，您需要使用一个巨大的 n 作为数组的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:07:23.633

就更好的而言，确实没有区别。如果您关心矩阵的总和（例如二维数组），那应该没关系。你最终会得到相同的金额。如果我们假设您使用“i”扫描行，使用“j”扫描列，那么如果您执行“sum += a[i][j]”，您将得到总和“一行一次”，如果您执行“sum += a[j][i]”，那么它将一次是一列。

因此，如果您不关心中间子项，但您关心的是总和，那么没有正确或错误的方式或更好或更坏的方式。“sum += a[i][j]”虽然更容易阅读和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:04:44.253

作为一般规则，在处理多维数据时，为了自己的理智，我会尽量保持字母顺序。IE：

```
sum += a[i][j][k] 
```

# string - 从文件中捕获字符串后从字符串中提取数字

> ID：16066920
> 
> 赞同：1
> 
> 时间：2013-04-17T17:58:24.560
> 
> 标签：string, bash, variables, for-loop, sed

我正在尝试从文件中检索内存值，并将其与参考值进行比较。但是一次一件事....我尝试使用 set/source/grep/substring 来变量，但它们都没有真正起作用。然后我找到了一种使用 for 循环的方法（参见代码）。问题：我正在从文件中接收整个字符串，但我无法摆脱其中的最后一个字符。

```
 #!/bin/bash

 #source start_params.properties
 #mem_val= "$default.default.minmaxmemory.main"
 #mem_val= grep "default.default.minmaxmemory.main" start_params.properties
 for mLine in $(grep 'default.default.minmaxmemory.main' start_params.properties)
  do
    echo "$mLine"
 done
 echo "${mLine:4:5}"  # didn't get rid of the last `m` in `-max4095m`
 v1="max"
 v2="m"
 echo "$mLine" | sed -e "s/.*${v1}//;s/${v2}.*//" #this echo the right value. 
```

循环迭代两次：第一个输出： `default.default.minmaxmemory.main=-min512m` 第二个输出：`-max4096m` 然后 sed 命令输出是`4096`，但是我如何更改代码 ST 中的最后一行，它将值存储在变量中？

谢谢你的建议，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:11:43.683

```
$ sed '/max[0-9]/!d; s/.*max//; s/m//' start_params.properties
4096 
```

*   删除不匹配的行`max[0-9]`
*   删除行的第一部分，直到`max`
*   删除最终`m`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:22:19.440

您可以使用`grep`过滤`max`部分，然后使用另一个 a`grep -o`来提取数字：

```
echo "$mLine" | grep "$max" | grep -o '[[:digit:]]*' 
```

# php - 使用 PHP 的参数化更新 SQL 查询

> ID：16066922
> 
> 赞同：0
> 
> 时间：2013-04-17T17:58:27.160
> 
> 标签：php, sql

我有一个表，其中有两个条目`id = 10`。我的 SQL 更新查询如下所示：

```
$q = "UPDATE `table_name` SET `col_name` = 'value' WHERE `id` = ?";
if($con-prepare($q)){
    $stmt->bind_param("i","10");
    $stmt->execute;
    $stmt->fetch;
    $stmt->close();
} 
```

查询不会运行，错误在哪里？而且，当它运行时，它会更新所有条目`id = 10`还是只更新第一个条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:01:04.753

```
$stmt->execute();
$stmt->fetch(); 
```

不要忘记`()`显示这是一个方法调用，否则 PHP 会将其解释为属性访问。

并写：`$stmt = $con->prepare()`而不是`$con-prepare()`（或者你想从函数调用的返回中减去`prepare()`？`$con`）

它将更新所有条目`id=10`

# java - 获取给定超类的子类的静态变量

> ID：16066933
> 
> 赞同：0
> 
> 时间：2013-04-17T17:58:52.433
> 
> 标签：java, static, subclass

这对我来说很难用文字表达出来，所以请允许我解释一下。

我有一个抽象类`Entity`和子类`House`和`Warehouse`. 每个子类都具有相同的静态变量，但具有不同的值。

当在我的游戏中按下按钮时，将`Action`创建一个指定创建并放置在世界中的实体子类。我想编写一个通用方法，`Entity`使用它所在的子类的静态变量将一些东西放到世界上。

我有一个类`PlaceEntityAction`，当单击鼠标时，假设条件正确，将放置适当的实体。如何将我想要放置的类传递给这个 Action 以便它适用于任何泛型`Entity`？

这是一些愚蠢的代码：

```
if (mousePressed)) {
    if (some conditions are true) {

        int ex = x pos
        int ey = y pos

        if (world.player.haveFunds(e.COST_ENERGY, e.COST_MONEY,
                    e.COST_RESOURCE)) {
            if (world.places[ex][ey] == 0) {
                world.entities.add(e);
                world.player.addEnergy(-e.COST_ENERGY);
            }
        }
    }
} 
```

所以基本上我怎样才能`e`让它成为我传递给 Action 的任何子类，因为 COST_MONEY 等是静态的，应该由类而不是对象访问？

我真的很难表达我想要什么。也许有人可以破译这个或提供一些关于我的问题的其他见解。如果您愿意，我可以提供任何其他必要的信息。

编辑：

`e`是我之前基于 ID 系统初始化的任何子类的实例，但我不喜欢这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:04:41.800

静态变量在这里是错误的方法，特别是因为您已经实例化了您的实体。

相反，在父类上创建抽象函数`costEnergy()`、`costMoney()`等，并在子类上实现它们（使用正确的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:05:50.150

静态变量在 Java 中不是多态的。一种选择是在 Entity 中声明抽象方法 getCostEnergy、getCostMoney 和 getCostResource，并让每个子类覆盖这些方法以返回不同的常量。这适用于您的场景吗？

# cakephp - 具有翻译行为的 CakePHP 递归 2

> ID：16066940
> 
> 赞同：0
> 
> 时间：2013-04-17T17:59:14.393
> 
> 标签：cakephp, recursion, internationalization, cakephp-2.3

我想通过代码查找所有关系：

```
$this->set('types', $this->Project->ProjectType->find('all', array(
    'recursive' => 2))); 
```

当我将递归设置为 2 时出现错误：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'I18n__name.content' in 'field list' 
```

使用字段（文本类型）`ProjectType`的翻译行为进行建模。`content`其他递归效果很好。如何返回结果`recursive = 2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:20:24.473

根本不要使用递归。

在您的 AppModel 中将其设置为`public $recursive = -1;`，之后不要更改它。然后使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来检索相关数据。

递归会给您带来比其价值更多的头痛。如果 Containable 不是那么容易/很棒，也许我们会被递归卡住，但是......它很棒而且很容易:)

# java - java小程序显示来自本地主机的图像

> ID：16066944
> 
> 赞同：0
> 
> 时间：2013-04-17T17:59:34.740
> 
> 标签：java, image, applet

我在 Apache 服务器上有一个图像，它被 cpp 中的程序在第二秒内过度保存了 10 次。我想在网站上显示这个看起来像动画的图像。我在netbeans的applet查看器中编写了这个脚本及其工作，但是当我在网站上放置类时，显示图像并且不会改变。我花了很多时间在这上面，但它不起作用。谁能帮助我？

```
public class poprawki extends Applet implements Runnable {
    Thread thread1;
    boolean running = true;
    BufferedImage obraz = null;

    public void paint(Graphics g)     {
        g.drawImage(obraz, 10, 10, null);
    }

    public void wyswietlanie_obrazu() {
        try {
            obraz =ImageIO.read(new URL("http://localhost/obraz.jpg"));
            repaint();
        } catch (IOException e) {
        }
    }

    public void init() {
        setLayout(null);

        thread1 = new Thread(this);
        thread1.start();

        repaint();
    }

    public void destroy() {
        running = false;
        thread1 = null;
    }

    public void run() {
        while (running) {
            try {
                wyswietlanie_obrazu();
                Thread.sleep(100);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:47:31.980

首先，如评论中所述，不要忽略异常。如果您没有忽略它，您会收到一条错误消息来解释问题所在。相反，通过忽略它，您将自己置于黑暗中。

如果你在不是 apache 服务器的机器上运行这个小程序，那么显然它不会工作。localhost 是...本地主机，即applet 运行的主机，而不是Web 服务器的主机。

用于`Applet.getDocumentBase()`获取指向小程序来自的 Web 服务器的 URL。

# c++ - C++ 使用项目而不是库

> ID：16066947
> 
> 赞同：0
> 
> 时间：2013-04-17T17:59:48.047
> 
> 标签：c++, windows, linker

我在 VS2010 中有一个巨大的解决方案，其中包括几个项目。我基本上正在处理其中一个项目。这个项目需要其他项目。但是，它们目前仅通过 Properties->Linker->Input 与这一项目链接。这些 Input 依赖由 project1.lib、project2.lib 等填充。

有人知道我如何让我的项目使用实际项目而不是他们的库吗？

我问是因为我想删除代码，如果我从其他项目中删除一些东西，我仍然必须生成库才能真正看到更改。

这就是为什么我想直接链接到其他项目，以便任何更改立即“可见”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:04:17.457

您可以使用[项目引用](http://msdn.microsoft.com/en-us/library/vstudio/ez524kew%28v=vs.100%29.aspx)
项目属性->通用属性->参考

# jquery - 如何在没有 jquery UI 的情况下制作可拖动的背景？

> ID：16066953
> 
> 赞同：0
> 
> 时间：2013-04-17T18:00:00.887
> 
> 标签：jquery, css, jquery-ui

这是我一直在尝试使用的代码：

```
$(document).ready(function() {
    var cc = 0;
    var drag = false;
    var bgp = 10;

    $('body').mousedown(function(){
        var bg =  Number($('body').css('background-position-x').replace(/[^-\d\.]/g, ''));
        bgp =+ bg;
        drag = true;
    });

    $('body').mouseup(function(){
        drag = false;
    });

    $('body').mousemove(function(e){
         $(this).mousedown(function(){
             cc =+ e.pageX;
         });
         if (drag==true) {
             cc =+ e.pageX;
         }

        function pan() {
             $('body').css('background-position',bgp+cc);
        } 

        if(drag==true) {
             pan();
        }
    });
}); 
```

它有点工作，但不是根据您移动鼠标的距离来更改背景位置，而是根据鼠标距页面左边缘的距离设置背景位置。

我如何解决这个问题的想法是将背景设置为原始位置+鼠标单击时拖动鼠标的位置。虽然如果有一种完全不同的方法来解决这个问题，那也很好。

我正在尝试自学 jquery，所以我愿意批评我的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:21:42.880

捕获 mousedown 动作的起始位置和初始背景位置（x 和 y）：

```
var startX = event.pageX;
var startY = event.pageY;
var initialX = parseInt($('body').css('background-position-x'));
var initialY = parseInt($('body').css('background-position-y')); 
```

在你的 mousemove 事件中，捕捉你的 startX 和你的movedX 之间的区别

```
var differenceX = startX - e.pageX;
var differenceY = startY - e.pageY; 
```

然后将这些差异添加到您的初始背景位置 x 和 y。

```
$('body').css('background-position-y', (initialY + differenceY));
$('body').css('background-position-x', (initialX + differenceX)); 
```

# sql-server - Microsoft SQL Server Management Studio SSMS 2012 中的 SQL Azure 数据库缺少数据库图表节点？

> ID：16066956
> 
> 赞同：4
> 
> 时间：2013-04-17T18:00:10.640
> 
> 标签：sql-server, azure

从 SQL Server Management Studio 连接到 Windows azure SQL Server 数据库时，似乎缺少数据库图表节点。

见附图。我从 'en_sql_server_2012_enterprise_edition_x86_x64_dvd_813294' 安装但找不到该选项。

![在此处输入图像描述](https://i.stack.imgur.com/I39SN.png)

也许我的 DBA 需要启用图表？每个[SQL Server Management Studio 显示数据库图表 (ER) 权限](https://stackoverflow.com/questions/849784/sql-server-management-studio-display-database-diagrams-er-permissions?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:26:35.023

这似乎是 SQL Azure 而不是 SQL Server 2008 R2（基于提供的屏幕截图中是否存在联合节点）。现在，绘制数据库图表的最佳选择是在 SQL Server 上本地创建数据库并从那里生成图表。希望该工具能很快赶上 SQL Azure！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-16T23:48:52.293

自 2015 年 7 月以来，有一个 SSMS 预览版，其中管理资源管理器允许在 Azure 上使用数据库图表，它运行良好，因此工具几乎终于赶上了。

搜索“SQL Server Management Studio 预览版”。目前可以在此处下载 2016 年 4 月的预览版

[https://msdn.microsoft.com/en-us/library/mt238290.aspx](https://msdn.microsoft.com/en-us/library/mt238290.aspx)

# draw - 处理：显示在大约 1600 帧时出现异常

> ID：16066958
> 
> 赞同：0
> 
> 时间：2013-04-17T18:00:18.090
> 
> 标签：draw, processing

我有一个用 Processing 编写的“艺术”应用程序，它在大约 1600 帧时变得很糟糕。代码位于[https://github.com/jxxcarlson/Processing/tree/master/seurat](https://github.com/jxxcarlson/Processing/tree/master/seurat)。试试这个来复制错误：（1）启动应用程序。(2) 按空格键调出控件。(3) 等到大约 1600 帧。突然，控件将消失，取而代之的是一个大的彩色矩形。啊! 我已经从多个角度查看了代码，但一定遗漏了一些东西。如果在 displayControls() 中禁用 if 语句的主体，在“Seurat”选项卡中，错误就会消失——但我的控件也是如此。耶！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:15:49.323

`IF`当以下等于 true时，您的问题就开始了。

```
//Frames.pde
           if (frameCount > phase) {
              for(int i = 0; i < particles.length; i++) {
                particles[i].change(M);  // M = maximum particle radius
                particles[i].display();
              }
            } 
```

通过更改`frames[i].phase = 200*i;`为`Seurat.pde`进行测试`frames[i].phase = 10*i;`

老实说，我没有花时间阅读您的代码来了解原因，但是现在您可以将精力集中在这种情况上。

# android - 创建数据库“缓冲区”？安卓

> ID：16066960
> 
> 赞同：0
> 
> 时间：2013-04-17T18:00:23.240
> 
> 标签：android, sql

我正在编写一个应用程序，它允许在 Web 界面上编写笔记，然后在手机上查看。

我已经使用：

*   JSON + PHP 脚本获取表信息

*   为“note”创建一个类

*   用 JSON 代码填充 ArrayList

*   如果 JSON 代码 == "" 则从本地 SQL 读取 JSON 字符串

    *   如果 JSON 代码有文本（即已到达网站），则从本地 SQL 中删除所有内容，然后用新的 JSON 字符串更新本地 SQL（我知道这是低效的，但我是新手，这是我想的一系列步骤我自己，我不在乎有“备份”或其他什么。

但是我遇到的问题是，现在我想将其标记为完成，并且在按下按钮的那一刻，运行 PHP 脚本，并且 MySQL Web DB 得到更新，然后手机接下来再次读取 JSON 代码并更新其本地数据库。问题是如果我没有连接，我不知道该怎么做，因为代码将在本地设置，但是当它下次连接时，它将通过本地 SQL 复制代码，并且任务将再次设置为不完整。

有什么方法可以创建一种“缓冲区”，即在连接时继续尝试运行 php 脚本，或者在下一次联系网站并读取值之前运行 php 脚本？

抱歉，如果我在这里有点慢或遗漏了什么，我已经工作了几个小时了，我有点发疯了哈哈。

# java - 读取和替换字符串中的整数

> ID：16066968
> 
> 赞同：1
> 
> 时间：2013-04-17T18:00:46.230
> 
> 标签：java, string, integer

我有一个字符串，例如“x(10, 9, 8)”我想从字符串中读取每个整数，然后使用整数作为数组索引从数组中检索一个新整数并用这个值替换它。

我尝试过的所有方法似乎更适合将相同的东西应用于所有整数，或者只是检索整数然后失去对它们的跟踪。谁能告诉我最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:14:48.920

使用正则表达式，您可以“浏览”字符串中的每个数字，无论它们是如何分隔的，并根据需要替换它们。例如，下面的代码打印`x(101, 99, 88)`：

```
public static void main(String[] args) {
    int[] array = {0, 1, 2, 3, 4, 5, 6, 7, 88, 99, 101};
    String s = "x(10, 9, 8)";

    Pattern p = Pattern.compile("\\d+");
    Matcher m = p.matcher(s);
    StringBuilder replace = new StringBuilder();
    int start = 0;
    while(m.find()) {
        //append the non-digit part first
        replace.append(s.substring(start, m.start()));
        start = m.end();
        //parse the number and append the number in the array at that index
        int index = Integer.parseInt(m.group());
        replace.append(array[index]);
    }
    //append the end of the string
    replace.append(s.substring(start, s.length()));

    System.out.println(replace);
} 
```

注意：您应该添加一些异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:14:56.447

`Integer.parseInt()`使用,`String.split(",")`和`String.indexOf()`(for the `(`and )解析字符串的数字。用它们`)`创建一个。`List`

遍历此列表并使用数组中的值创建一个新列表。

遍历新列表并创建响应字符串。

# android - 从 Gridview 中删除图像

> ID：16066970
> 
> 赞同：1
> 
> 时间：2013-04-17T18:00:51.963
> 
> 标签：android, file, filepath, sd-card

我试图简单地从网格视图中删除图像。我之前遇到了问题，没有删除任何内容，但现在这不是问题，因为我确定我只需要正确的文件路径。图像保存在我的 sd 卡上，因此我需要代码帮助，以正确识别已单击图像的正确文件路径，并在单击删除按钮时将其删除。我究竟做错了什么？不会引发任何错误，并且我的清单在所有权限上都是最新的。我认为它会比原来简单得多。以下是我的代码：

```
 deletebutton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    int id = viewIt.getId();
    Log.i("start", "BEGIN_DELETE");
    String myPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/My Directory/";
    File file= new File(myPath + intent.getData());

if(file.exists()){  
    file.delete();
}
    Log.i("end", "END_DELETE");

    dialog.dismiss();                                                                       

    }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:29:53.617

弄清楚了！我使用 textview 查看返回的文件路径，然后使用它直到我得到正确的文件路径。然后它就像一个魅力。下面是我的工作代码。

```
delete.setOnClickListener(new View.OnClickListener() {

                                @Override
                                public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    int id = viewIt.getId();
                                     Log.i("start", "BEGIN_DELETE");
                                        String filestring = arrPath[id];
                                        filepath.setText(filestring);
                                        File myDir = new File(filestring);
                                        if(myDir.exists()) 
                                        {
                                            myDir.delete();
                                        }
                                        dia.dismiss();
                                        Log.i("end", "END_DELETE"); 

                                }
                            }); 
```

# ruby-on-rails-3 - Twitter bootsrap模型在单击link_to时褪色，但模态上出现黑色褪色

> ID：16066974
> 
> 赞同：0
> 
> 时间：2013-04-17T18:01:00.690
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, modal-dialog, fade

我尝试在单击链接时淡化模态，但在模态弹出窗口上出现黑色淡入淡出以下是我的模态和链接代码

点击以下链接模态淡入淡出

```
 <%= link_to 'New Trade','#myModal', :class => 'btn',:style => 'float:right;', :role => 'button', :data =>{ :toggle => 'modal', :keyboard => true, :backdrop => true } %> 
```

以下是模态代码

```
<div id="myModal" class="modal fade" tabindex="1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" keyboard="true">
    <%= simple_form_for @trade_category, :url => create_trade_category_path(@trade_category), :html => { :class => 'form_height'} do |f| %>
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">New Trade Category</h3>
      </div>
      <div class="modal-body">
          <%= f.input :name,:lable => false, :autofocus => true, :placeholder =>"Trade category name", :class=> 'input-block-level' %>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <%= f.submit "Create Trade category", :class=> "btn btn-primary" %>
      </div>
    <% end %>
  </div> 
```

我得到了以下内容 ![在此处输入图像描述](https://i.stack.imgur.com/mW95e.png)

CSS如下

.modal-backdrop { 位置：固定；顶部：0；右：0；底部：0；左：0；z 指数：1040；背景颜色：#00000}

.modal {位置：固定；前10名％; 左：50%；z-index: 1050;}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:48:30.207

在应用程序文件中解决的问题父 div 导航栏的位置是固定的，所以我删除了固定的位置，现在它工作正常。

# jquery-isotope - 在同位素砌体中实施粘性物品

> ID：16066979
> 
> 赞同：1
> 
> 时间：2013-04-17T18:01:19.090
> 
> 标签：jquery-isotope

我正在使用 Isotope 提取帖子列表，并使用日期作为初始排序，并允许用户按评论和推荐的数量进行排序。一切都按预期工作。

现在我需要完成的是置顶帖。我有一组帖子，我想每隔 10 个随机显示一次。基本上每 10 个帖子我想显示其中一个粘性帖子。

我已经找到了一种在初始加载时执行此操作的方法，每 10 次计数将其注入循环中，但我的问题是在加载所有内容后，排序方法的更改会搞砸。有什么办法可以注入一个粘性帖子，无论排序顺序如何，它实际上都会粘在它应该在的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:48:53.440

自从我发布了我的最后一个答案以来，刚刚发布了来自 Isotope 创建者的名为[Packery的新产品。](http://packery.metafizzy.co/)

Packery 允许您将任意数量的元素“标记”到您喜欢的任何位置。其余元素将整齐地堆叠在任何固定位置（即冲压）元素周围。它在填充孔方面也比同位素做得更好。

我现在的建议是定期在您的置顶帖上盖章，让 Packery 处理其余的事情。

Packery 具有与 isotope 类似的选项和方法，因此您可能会发现您可以简单地将`.isotope()`调用替换为`.packery()`调用。

Packery 还支持使用 jQuery UI 拖动或另一个名为[Draggabilly](http://draggabilly.desandro.com/)的插件进行拖动。我对 Draggabilly 的唯一问题是（还没有）它的打字稿定义文件。它也没有像同位素那样的过滤能力，因此可能不适合您的任务。*Isotope 的创建者刚刚在一封电子邮件中告诉我，他将在适当的时候将 Packery 布局包含到同位素中。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T13:38:36.257

将项目保留在同位素显示列表的开头或结尾的最简单方法是将其作为排序计算的一部分。您只需将排序值偏向非常小（对于页眉项目）或非常大（对于页脚项目）。

按照您指定的间隔放置它们要复杂得多。您可能需要对它们进行一次排序以确定整体顺序，然后更改粘性项目的排序值，以匹配您希望它们插入的位置。然后你重新排序。

*另一种方法是编写一组自定义布局方法来替换标准布局方法。*

# sql - 错误消息“缺少函数名）。” 在视觉 foxpro 9.0

> ID：16066980
> 
> 赞同：0
> 
> 时间：2013-04-17T18:01:19.390
> 
> 标签：sql, sql-server-2008, foxpro

我在将 SQL 语句转换为 FoxPro 时遇到问题。我遇到的麻烦是我收到错误代码“函数名称丢失）。”，但我就是不知道问题出在哪里或出在哪里。问题出在下面一行。任何帮助是极大的赞赏。

`NVL(select sum(amount) from tpaymentitem where tpaymentitem.invoiceid = 0 and tpaymentitem.programid = (select max(tinvoiceitem.programid) FROM tinvoiceitem),0) as prepay,;`

整个foxpro代码如下。

```
Select  acc.accountid,;
ti.invoiceid,;
ti.invoicedate,;
DATE() - ti.invoicedate as invage,;
sum(NVL([subtotalregular],0) + NVL([fedtaxregular],0) + NVL([statetaxregular],0) + NVL([localtaxregular],0)) as invamount, ;
NVL((select sum(amount) from tpaymentitem where invoiceid = ti.invoiceid),0) as paidamt,;
(sum(NVL([subtotalregular],0) + NVL([fedtaxregular],0) + NVL([statetaxregular],0) + NVL([localtaxregular],0)) - NVL((select sum(amount) from tpaymentitem where invoiceid = ti.invoiceid),0)) as invbalance,;
max(tii.programid) as programid,;
NVL(select sum(amount) from tpaymentitem where tpaymentitem.invoiceid = 0 and tpaymentitem.programid = (select max(tinvoiceitem.programid) FROM tinvoiceitem),0) as prepay,;
do while com.stchargeinterest = 1 AND acc.nofincharge = 0 ;
  if DATE() - ti.invoicedate >= com.stmindaysforinterest ;
    ROUND((sum(NVL([subtotalregular],0) + NVL([fedtaxregular],0) + NVL([statetaxregular],0) + NVL([localtaxregular],0)) - NVL((select sum(amount) from tpaymentitem where invoiceid = ti.invoiceid),0)) * ((com.stinterestrate / 365) * DATE() - ti.invoicedate)),2);
  ENDif  ;
ENDdo as financecharge,;
com.stchargeinterest,;
com.stinterestrate,;
acc.nofincharge,;
com.stmindaysforinterest,;
com.stinterval;
INTO cursor tmpbalance;
FROM taccount acc;
INNER JOIN tcompany com ON com.companyid=acc.companyid;
LEFT JOIN tinvoice ti ON ti.accountid=acc.accountid;
LEFT JOIN tinvoiceitem tii ON ti.invoiceid=tii.invoiceid;
WHERE acc.accountid = m.cust_no AND acc.companyid = 1;
GROUP BY acc.accountid,ti.invoiceid,ti.invoicedate,com.stinterval,com.stchargeinterest ,;
com.stinterestrate,acc.nofincharge,com.stmindaysforinterest,acc.companyid 
```

我正在转换的 SQL 代码如下，最初是从存储过程中捕获的。

```
Select  acc.accountid,ti.invoiceid,ti.invoicedate,DateDiff(d,ti.invoicedate,getdate()) as invage,
sum(isnull([subtotalregular],0)+isnull([fedtaxregular],0)+isnull([statetaxregular],0)
    +isnull([localtaxregular],0)) as invamount, 
ISNULL((select sum(amount) from tpaymentitem where invoiceid=ti.invoiceid),0) as paidamt,
(sum(isnull([subtotalregular],0)+isnull([fedtaxregular],0)+isnull([statetaxregular],0)
    +isnull([localtaxregular],0)) -
ISNULL((select sum(amount) from tpaymentitem where invoiceid=ti.invoiceid),0)) as invbalance,
max(tii.programid) as programid,
ISNULL((select sum(amount) from tpaymentitem where invoiceid=0 and programid = max(tii.programid)),0) as prepay,
CASE WHEN (com.stchargeinterest = 1) AND (acc.nofincharge=0) THEN
    CASE WHEN DateDiff(d,ti.invoicedate,getdate()) >= com.stmindaysforinterest THEN
        ROUND((sum(isnull([subtotalregular],0)+isnull([fedtaxregular],0)+isnull([statetaxregular],0)+isnull([localtaxregular],0)) 
            -ISNULL((select sum(amount) from tpaymentitem where invoiceid=ti.invoiceid),0)) 
            * ((com.stinterestrate / 365) * DateDiff(d,ti.invoicedate,getdate())),2)
    ELSE  0 END 
ELSE 0 END as financecharge,com.stchargeinterest ,com.stinterestrate,
acc.nofincharge,com.stmindaysforinterest,com.stinterval
INTO #tmpbalance
FROM taccount acc
INNER JOIN tcompany com ON com.companyid=acc.companyid
LEFT JOIN tinvoice ti ON ti.accountid=acc.accountid
LEFT JOIN tinvoiceitem tii ON ti.invoiceid=tii.invoiceid
WHERE acc.accountid= @accountid AND acc.companyid = @companyid
GROUP BY acc.accountid,ti.invoiceid,ti.invoicedate,com.stinterval,com.stchargeinterest ,
com.stinterestrate,acc.nofincharge,com.stmindaysforinterest,acc.companyid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:46:22.840

我会翻译这个：

```
ISNULL((select sum(amount) from tpaymentitem where invoiceid=0 and programid = max(tii.programid)),0) as prepay 
```

像这样：

```
NVL( (select sum(amount) from tpaymentitem where invoiceid=0 and programid = max(tii.programid)) ,0) as prepay 
```

编辑：

这个怎么样：

```
( sum(NVL(amount,0)) from tpaymentitem where invoiceid=0 and programid = max(tii.programid) ) as prepay 
```

抱歉，这行不通。这是与主语句不同的选择语句。

编辑2：

```
(select sum(NVL(amount,0)) from tpaymentitem where invoiceid=0 and programid = max(tii.programid)) as prepay 
```

可以尝试简化它，只是为了排除故障：

```
(select sum(amount) from tpaymentitem where 1) as prepay 
```

我为在黑暗中刺伤而道歉。

# rest - 为什么我们在使用超媒体链接时需要自定义媒体类型？

> ID：16066987
> 
> 赞同：6
> 
> 时间：2013-04-17T18:01:40.890
> 
> 标签：rest, hypermedia, mediatypeformatter

我目前正在设计一个纯粹面向资源的企业服务。在阅读了几篇博客、书籍等之后。我相信带有超媒体链接的 REST 是要走的路。

但是，所有这些博客和书籍都说的一件事是在响应中使用超媒体链接时不要使用 application/xml 作为媒体类型。除了通用声明之外，他们都没有说明原因 - 没有链接关系类型的普通 URI 不会将 URI 的语义传达给客户端。

据我了解，这是一种推荐的方法来定义您自己的自定义媒体类型并让客户知道如何阅读它。但是如果知道连接到我的服务的客户端永远不会是浏览器，这有关系吗？我不能在我的响应中使用 application/xml 类型公开这些链接吗？

我希望这里有人可以详细说明这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:05:47.180

您不必使用自定义媒体类型。事实上，REST 试图阻止人们创建过于具体的媒体类型。理想的情况是媒体类型应该传达语义信息，而不是特定于任何特定服务。

application/xml 的一个问题是它对链接的外观没有标准定义。是吗

`<Link rel="foo" href="/foo">`

或者是

`<foo href="/foo">`

或其他一些变体？您的客户如何知道如何在不使用“带外”知识的情况下识别文档中存在哪些链接？“带外”知识是您要避免的，因为它会导致客户端在服务器进行更改时中断，并且客户端无法保护自己免受带外知识的更改。

另一个问题`application/xml`是它除了元素和属性的层次结构之外不包含任何语义。语义要么必须通过媒体类型或链接关系来传达。如果您使用`application/xml`，那么您必须使用链接关系来告诉客户端如何使用该文档。

在链接关系和媒体类型中传达语义之间可以有一个很好的平衡。但老实说，这个行业正在试图弄清楚这种平衡到底是什么，并且有很多人对这个问题有不同的看法。

我建议查看[application/hal+xml](http://stateless.co/hal_specification.html)。它最接近通用 XML，但定义了链接语义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-16T22:32:16.133

这是我能想到的最佳答案……我最近联系了菲尔丁博士以验证我的理解，但尚未收到回复。如果他对我大喊大叫，我会修改它。

我怀疑，正如 Darrel Miller 所[暗示的](https://stackoverflow.com/a/16068117/284051)那样，目标应该是避免创建过于具体的类型——毕竟，[有人说过](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)：

> REST API 永远不应该有对客户端很重要的“类型化”资源。

我觉得互联网上大多数与 REST 相关的超媒体内容基本上都违反了这一原则，并将人们引向了错误的方向——因为他们在他们的资源中引入了非常具体的“限定词”（我将提到它们）。

您会看到类似`application/vnd.com.foo.bar+xml`或`application/vnd.com.example.thing+json`- 有些人决定不使用类型本身，而是使用参数，例如`application/xml; someKey=someValue`- 在我看来，这与限定没有什么不同。对我来说，这是一个*类型化的资源*。

`text/html`是超文本的缩影是有原因的——浏览器有一个*处理指令*，它用来理解这种媒体类型。不仅是渲染和布局，而且强大的交互先例是由 HTML 规范设置的（例如，锚标签导致检索，表单可以通过编码触发提交等等），正是由于这个原因，这种非常通用、非常强大的超媒体类型已经允许我们今天使用的所有网页存在，而您的浏览器和提供它们的服务器之间没有任何耦合 - 唯一需要的是理解 HTML 作为内容类型是什么。

这对 API 意味着什么？这意味着为某些资源、某些特定 URI（或它们的集合）创建特定的内容类型并不能稳健地使用超媒体，并且可能意味着您具有 REST 试图避免的那种客户端-服务器耦合。这也意味着`application/xml`类似的东西是贫血的——它们有*解析*指令但没有*处理*指令。设计良好的 REST API 将具有更通用的超媒体类型，不是为特定资源创建的，而是明确定义潜在客户必须了解才能参与的处理指令。

有趣的 - 并且公认可能有争议 - 事情`text/html`已经有很多 - 为什么不使用它呢？我们的 API 消费者想要 HTML 以外的东西（例如，他们认为 JSON 或 XML 格式是灵丹妙药）的事实实际上是由于对拥有超媒体驱动的应用程序引擎意味着什么存在固有的误解 - 即它的处理指令表示应该是相当通用的。当然，您可以使用 XML 做到这一点，只需让您的 API 定义一组清晰的元素及其含义即可。关于使用 HTML 的部分只是为了说明一点。

有抱负的 REST API，即使有一组丰富的超链接来表达通过资源的状态转换，也可能——而且似乎最常见——无法实现 REST 真正涉及的那种可扩展的、长期存在的架构风格。

# android - android初学者教程解析XML时出错

> ID：16066992
> 
> 赞同：0
> 
> 时间：2013-04-17T18:01:46.583
> 
> 标签：android

我刚刚开始了android的初学者教程，编译时出现4个错误，即使代码基本上是从网页复制的，我已经按照所有步骤进行操作。错误如下：

*   元素类型“LinearLayout”必须后跟属性规范“>”或“/>”。activity_main.xml /test/res/layout 第 6 行 Android XML 格式问题
*   R 无法解析为变量 MainActivity.java /test/src/com/example/test 第 12 行 Java 问题
*   R 无法解析为变量 MainActivity.java /test/src/com/example/test line 19 Java 问题
*   error: Error parsing XML: not well-formed (invalid token) activity_main.xml /test/res/layout line 6 Android AAPT Problem]

这是代码：activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" 

        <EditText android:id="@+id/edit_message"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:hint="@string/edit_message"
            android:layout_weight="1" />

        <Button android:layout_width="wrap content"
            android:layout_height="wrap_content"
            android:text="@string/button_send" /> 

    </LinearLayout> 
```

MainActivity.java

```
 package com.example.test;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;

    public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

    } 
```

我到处搜索，尝试了所有方法，但仍然无法正常工作，所以这是我最后的希望。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:02:53.837

您的 LinearLayout 标签应该关闭。

IE

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" <-- close here 
```

像这样

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:05:59.603

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <EditText android:id="@+id/edit_message"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message"
        android:layout_weight="1" />
    <Button android:layout_width="wrap content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" /> 
</LinearLayout> 
```

复制这个，清理项目并运行。您没有在 EditText 之前结束 LinearLayout 标签。

# ubuntu - Ubuntu 12.10 上 uWSGI 上的 Flask - 版本不匹配？

> ID：16066993
> 
> 赞同：1
> 
> 时间：2013-04-17T18:01:54.237
> 
> 标签：ubuntu, nginx, flask, wsgi, uwsgi

我正在尝试按照本指南为我的 Flask 应用程序提供 uWSGI：[http ://flask.pocoo.org/docs/deploying/uwsgi/](http://flask.pocoo.org/docs/deploying/uwsgi/)

但是，当我尝试运行时`uwsgi`，出现以下问题：

```
(venv)deniz@lister:~/sites/site-lister$ uwsgi -s /tmp/lister.sock --module flood --callable app
uwsgi: unrecognized option '--module'
getopt_long() error 
```

我猜这是版本不匹配，因为我的 uwsgi 版本是 1.2.3-debian。但如果这就是问题所在并且我是 Ubuntu 新手，我如何在不手动构建所有内容的情况下正确安装更新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:47:07.330

如果你想卸载 uwsgi，你可以这样做：

```
pip uninstall uwsgi 
```

然后重新安装最新版本：

```
pip install uwsgi 
```

然后使用 uwsgi 将此文档用于您的烧瓶应用程序：

[http://uwsgi-docs.readthedocs.org/en/latest/Embed.html](http://uwsgi-docs.readthedocs.org/en/latest/Embed.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:09:02.977

请尝试以下文档，我已经用它建立了一些 Flask 站点。

[http://library.linode.com/web-servers/nginx/python-uwsgi/ubuntu-12.04-precise-pangolin](http://library.linode.com/web-servers/nginx/python-uwsgi/ubuntu-12.04-precise-pangolin)

# ruby-on-rails - Rails：加载部分数组

> ID：16066994
> 
> 赞同：0
> 
> 时间：2013-04-17T18:02:00.377
> 
> 标签：ruby-on-rails, arrays, renderpartial

在我的`Rails`应用程序中，我已经有以下代码：

```
<% %w(number_of_students edit_class_name tech_help).each do |modal| %>
  <%= render "common/modals/#{modal}" %>
<% end %> 
```

将添加更多模态，而不是在我想要循环遍历目录并仅渲染每个文件的目录`app/views/common/modals`中明确列出它们。`%w()``common/modals`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:38:22.297

这是我想出的：

```
def render_modals
    files = Dir.glob("#{Rails.root}/app/views/common/modals/*").collect { |file| File.basename(file, ".html.erb").sub("_", "") }.flatten

    files.collect do |modal|
      render partial: "common/modals/#{modal}"
    end.join.html_safe
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:46:01.877

在更合适的地方定义一个简单的方法（也许是应用程序助手？），如下所示：

```
def modals
  %w(number_of_students edit_class_name tech_help)
end 
```

如果您在控制器/模型中也需要这些模式，也许您应该在适当的类中定义此方法？例如

```
class Modal
  def self.types
    %w(number_of_students edit_class_name tech_help)
  end
end 
```

此外，如果您经常渲染模板，那么还要定义

```
def render_modals
  modals.map do |modal| # Modals here should be the method that you just defined, example, Modal.types
    render partial: "common/modals/#{modal}"
  end.join
end 
```

# compression - NSURLConnection 什么时候解压一个压缩资源？

> ID：16066998
> 
> 赞同：2
> 
> 时间：2013-04-17T18:02:36.823
> 
> 标签：compression, streaming, zip, gzip, afnetworking

我已经阅读了如何`NSURLConnection`自动解压缩压缩（压缩）资源，但是我无法在任何地方找到 Apple 文档或官方词来指定定义此解压缩发生时间的逻辑。我也很想知道这与流数据有何关系。

**问题**

我相信，我有一台服务器使用分块编码将文件流式传输到我的应用程序。这是 WCF 服务。顺便说一句，我们使用流媒体是因为它可以在高使用率期间减轻服务器负载，而且因为我们的文件将非常大（100 MB）。这些文件可以被压缩或未压缩。我认为在我的情况下，因为我们正在流式传输数据，所以`Content-Encoding`标头不可用，`Content-Length`. 我只`"Transfer-Encoding" = Identity`在我的回复中看到。

我正在使用该`AFNetworking`库将这些文件与`AFHTTPRequestOperation`'s`inputStream`和`outputStream`. 我也尝试过使用`AFDownloadRequestOperation`类似的结果。

现在，`AFNetworking`文档说明压缩文件将`NSURLConnection`在下载后自动解压缩（我相信是通过 ），而这并没有发生。我将它们写入我的文档目录，没有任何问题。然而，它们仍然是拉链的。我也可以手动解压缩它们。所以文件没有损坏。他们不会自动解压缩，因为我正在传输数据并且`Content-Encoding`没有指定吗？

**我想知道的：**

1.  为什么我的压缩文件没有自动解压？是因为流媒体吗？我知道之后我可以使用另一个库来解压缩，但如果可能的话，我想避免这种情况。
2.  什么时候`NSURLConnection`知道什么时候自动解压下载的文件？我在任何地方的文档中都找不到这个。这是否与标头值相关联？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T13:25:56.617

`NSURLConnection`当响应标头中有适当的`Content-Encoding`（例如`gzip`）可用时，将自动解压缩。这取决于您的服务器来安排。