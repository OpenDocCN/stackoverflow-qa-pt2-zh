# StackOverflow 问答 15518000-15518999

# c++ - 在没有测试数据的情况下查找段错误

> ID：15518000
> 
> 赞同：1
> 
> 时间：2013-03-20T07:49:43.407
> 
> 标签：c++, debugging, testing, segmentation-fault

这似乎是一个愚蠢的问题，但我需要知道，是否有任何工具可以在没有测试数据的情况下在我的代码中查找可能的段错误点，这会导致段错误。特别是一些用于测试正确使用指向数组中项目的指针的工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:53:12.553

一般有几个选择：

*   代码审查（不是计算机程序意义上的工具，但仍然是一种工具）
*   静态代码分析器
*   模糊测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:11:47.277

[Valgrind](http://valgrind.org/)的[MemCheck](http://valgrind.org/info/tools.html#memcheck)是一个很好的选择。即使数据不会立即导致分段错误，也可能存在无效的内存访问（悬空指针、从未初始化的变量读取、缓冲区溢出、堆损坏……）。这将在它们发生时指出它们，而不是等待可能仅在离问题本身很远的地方发生的分段错误，从而允许您修复它们。

# javascript - 从两个数组在javascript中的第三个数组中获取唯一值

> ID：15518004
> 
> 赞同：0
> 
> 时间：2013-03-20T07:49:51.583
> 
> 标签：javascript, arrays, unique

我有两个 javascript 数组对象，如下所示

第一个数组：

```
count_array[0].left= 0;
count_array[0].width= 33;
count_array[0].id= 1;
count_array[1].left= "";
count_array[1].width= "";
count_array[1].id= 2;
count_array[2].left= "";
count_array[2].width= "";
count_array[2].id= 3; 
```

第二个数组：

```
temp_array[0].left= "";
temp_array[0].width= "";
temp_array[0].id= 4;
temp_array[1].left= "";
temp_array[1].width= "";
temp_array[1].id= 5;
temp_array[2].left= 0;
temp_array[2].width= 33;
temp_array[2].id= 1; 
```

我想从上面的两个数组中获取在javascript中具有唯一id值的数组，如下所示

第三个数组：

```
temp_array_cnt[0].left= 0;
temp_array_cnt[0].width= 33;
temp_array_cnt[0].id= 1; 
```

我正在使用下面的代码，但它不工作

```
function intersection(x,y){
  x.sort();y.sort();
 var i=j=0;ret=[];
 while(i<x.length && j<y.length){
  if(x[i]<y[j])i++;
  else if(y[j]<x[i])j++;
  else {
    ret.push(x[i]);
    i++,j++;
   }
  }
 return ret; 
```

}

请在这里帮助我。谢谢

我现在正在使用以下功能

```
 function intersection(x,y){
ret=[];
//x.sort();y.sort();
for(var i=0;i<x.length;i++)
{
 for(var j=0;j<y.length;i++)
 {
    //console.log(x[i].eventid);
    var chk_left=x[i];
    if(chk_left.id == chk_left.id)
    {
        ret.push(chk_left);
    }
 }
}
   return ret;
   } 
```

但它给了我这样的错误“id 为空或不是对象”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:55:47.357

```
var temp = 0;

for(var i=0;i<count_array.length;i++)
{
for(var j=0;j<temp_array.length;i++)
{
if(count_array[i].id == temp_array[j].id)
{
temp_array_cnt[temp].left= count_array[i].left;
temp_array_cnt[temp].width= count_array[i].width;
temp_array_cnt[temp].id= count_array[i].id;
temp++;
}
}
} 
```

# jquery - 获取网络错误 415 - 不支持的媒体类型

> ID：15518005
> 
> 赞同：1
> 
> 时间：2013-03-20T07:49:57.190
> 
> 标签：jquery, xml, ajax, soap

在我的 HTML5 应用程序中，当我尝试调用 SOAP Web 服务时出现“不支持的媒体类型”错误。

这是我的javascript函数的代码。

```
function login()
{
    var soapMessage = '<?xml version="1.0" encoding="UTF-8"?>'+
    '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:blu="http://www.bluedoortech.com/">'+
    '<soapenv:Header/>'+
    '<soapenv:Body>'+
        '<blu:Connect>'+
            '<blu:userID>' +  $("#txtUserName").val() + '</blu:userID>'+
            '<blu:pwd>' + $("#txtPassword").val() + '</blu:pwd>'+
        '</blu:Connect>'+
    '</soapenv:Body>'+
    '</soapenv:Envelope>';

    $.ajax({
        url : 'Wealth.asmx' ,
        data: soapMessage,
        type: "POST",
        dataType: "xml", 
        cache : false,
        processData: false
    }).success(function(xmlDoc,textStatus) {
        alert($(xmlDoc).text());
    });
}[1] 
```

在这里，我还附上了错误屏幕。

出于测试目的，我制作了一个 php 文件，并使用该 php 文件来调用此 SOAP Web 服务。当我连接到网络服务时，它工作得很好。这是PHP代码。

```
 header("Content-type: text/xml"); 
        $soap_request = file_get_contents('php://input');

        $xml = simplexml_load_string($soap_request);

        $userIDTag = $xml->xpath('//blu:userID');
        $userID = $userIDTag[0][0];

        $passwordIDTag = $xml->xpath('//blu:pwd');
        $password = $passwordIDTag[0][0];

        $client = new SoapClient("Wealth.asmx?WSDL", array('trace' => true));
        $objLogin =  $client->Connect(array('userID'=>$userID,'pwd'=>$password));

        echo $client->__getLastResponse(); 
```

请帮助我确定问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:34:02.380

正如 Joachim Isaksson 建议的那样，我已经添加了内容类型标题，它现在运行良好。我也在这里张贴。

```
function login()
{
    var soapMessage = '<?xml version="1.0" encoding="UTF-8"?>'+
    '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:blu="http://www.bluedoortech.com/">'+
    '<soapenv:Header/>'+
    '<soapenv:Body>'+
        '<blu:Connect>'+
            '<blu:userID>' +  $("#txtUserName").val() + '</blu:userID>'+
            '<blu:pwd>' + $("#txtPassword").val() + '</blu:pwd>'+
        '</blu:Connect>'+
    '</soapenv:Body>'+
    '</soapenv:Envelope>';

    $.ajax({
        url : 'Wealth.asmx' ,
        data: soapMessage,
        headers: {
            "Content-Type":"text/xml"
        },
        type: "POST",
        dataType: "xml", 
        cache : false,
        processData: false
    }).success(function(xmlDoc,textStatus) {
        alert($(xmlDoc).text());
    });
} 
```

# android - android 应用程序中最用户友好的布局选项

> ID：15518009
> 
> 赞同：2
> 
> 时间：2013-03-20T07:50:07.900
> 
> 标签：android, xamarin.android

所以我面临的问题不是主观判断什么对用户最有利（我认为），而是有哪些选项可用于说明定位。

想想某种团队运动应用程序，您可以在其中为球员放置小点（然后我可以用一些代表球员的 UI 组件替换这些点）![以球员姓名首字母推销](../Images/bc76264150977396c03b2785d2ba5abf.png)，您可以在其中拖放红色和蓝色点

我用gridview尝试了这个，这非常困难，因为我需要设置一定数量的行/列，并且当你使用分辨率更高的手机时它们不会缩放，所以开始破解“自定义组件”感觉就像我在重新发明轮子。

有比编写自己的组件更好的选择吗？

如果有什么不同，我正在使用 xamarin.android

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:02:11.147

我将使用 MvvmCross 数据绑定针对集合绑定的 FrameLayout 来实现这一点。

该方法的核心使用在parent 中包含的 parent 中 child 的`TranslationX`and`TranslationY`属性。`View``FrameLayout`

父母是：

```
<?xml version="1.0" encoding="utf-8"?>
<pointsongrid.BindableFrameLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:local="http://schemas.android.com/apk/res/points.on.grid"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  local:MvxBind="ItemsSource Points"
  local:MvxItemTemplate="@layout/item"/> 
```

列表项是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/points.on.grid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    local:MvxBind="TranslationX X, Converter=X;TranslationY Y, Converter=Y"
  >
  <LinearLayout
    android:layout_width="20dp"
    android:layout_height="20dp"
    local:MvxBind="BackgroundColor Color, Converter=NativeColor"
  />      
  <TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    local:MvxBind="Text Player"
    />      
</LinearLayout> 
```

StackOverflow 的整个代码有点长，所以我发布了一个快速仓库来演示 - [https://github.com/slodge/MvvmCross-Players](https://github.com/slodge/MvvmCross-Players) - 那里的数据绑定 FrameLayout 肯定可以改进 - 看看 LinearLayout 代码如果您需要对更改列表的支持（例如 ObservableCollection），请参考主要的 MvvmCross 存储库。

结果看起来有点像：

![在此处输入图像描述](../Images/a8acd0cb911578b0aa6307e9e11add4e.png)

# php - Zend Framework 2 Identical Validator 空字段

> ID：15518010
> 
> 赞同：2
> 
> 时间：2013-03-20T07:50:10.353
> 
> 标签：php, validation, zend-framework2

我想让用户能够编辑他们的帐户 - 如果他们指定了新密码，请更新它。

为了确保密码拼写正确，我使用了带有第二个字段的相同验证器。这在创建新用户时有效，但在编辑时我遇到了以下问题：

密码字段可以为空，因此不需要。由于密码重复字段也可以为空（只是因为您不需要更改密码或填写密码字段），如果密码中有任何值，我不需要在此字段中重新输入密码场地。

如果我提交了一个空的密码字段（非必需）和一个必填的密码重复字段，我会收到错误，请填写密码重复字段。

如果令牌中没有值，我如何强制检查相同的验证器但接受空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:32:52.737

最近我有同样的问题。这就是我所做的。对于 ADD 用户表单，我添加了密码和重新输入密码，并带有“必需”选项。对于 EDIT 表单，我做了两件事：

1）在呈现表单之前，我确保密码（和重新输入密码）字段为空。当您拉用户以填充未设置密码字段时。

2) 在检查表单的 isValid 之前提交 EDIT 表单时，将提交的密码的 require 选项更改为 false。之后再次在 isValid 之前，检查帖子中的密码字段是否为空。如果它是空的，请在将其传递给表单进行验证之前从数组中取消设置密码字段。

结果将是，当您在密码字段中提交内容时，它将检查并验证是否相同。如果密码值为空，则将保留以前的密码，因为用户更新查询不会触及密码字段。

您可以在密码字段中添加一个小注释，例如：“保留空白以保留旧密码”。

希望这可以帮助 ：）

斯托扬

# java - 创建通用列表

> ID：15518013
> 
> 赞同：0
> 
> 时间：2013-03-20T07:50:14.343
> 
> 标签：java, generics, type-erasure

如何在 Java 中创建通用列表？我也可以将`Class<T>`实例传递给方法。

像这样：

```
public static <T> List<T> createList(Class<T> clazz) {
    List<T> list = new ArrayList<T>();

    list.add(clazz.newInstance());

    return list;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T07:53:08.547

我不明白你为什么想要一个方法。你可以做`new ArrayList<String>()`，`new ArrayList<Integer>()`等等。

如果你想把它写成一个方法，做

```
 public static <T> List<T> createList() {
    return new ArrayList<T>();
 } 
```

返回类型`List<T>`由编译器推断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:38:14.443

如果你想将实例传递给列表意味着你可以试试这个

```
public class info  {

    private int Id;

    public void setId(int i_Id) {
    this.Id = i_Id;
    }

    public int getId() {
    return this.Id;
    }

}

class two{
    private List<info> userinfolist;

    userinfolist= new ArrayList<info>();

    //now you can add a data by creating object to that class

     info objinfo= new info();
     objinfo.setId(10);
     userinfolist.add(objinfo); .//add that object to your list
     } 
```

# neo4j - Neo4j 的性能

> ID：15518017
> 
> 赞同：0
> 
> 时间：2013-03-20T07:50:22.330
> 
> 标签：neo4j

我了解到 Neo4j 可以在 2.7 秒或更短的时间内遍历 100 万条记录。我正在创建一个网站，该网站使用 ajax 来查找用户输入的单词，该字典本身包含 100 万个单词。因此，对于用户输入的每个字母，在 2.7 秒内获得建议是非常缓慢的。任何人都可以建议我，我应该如何解决这个问题？我希望我的问题很清楚。

PS将字典中的每个单词视为一个节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:36:23.160

Both Solr and Neo4j indexes use Lucene, so why not use Neo4j indexing for autocomplete?

# java - 使布局适应 hdpi 和 xhdpi

> ID：15518019
> 
> 赞同：0
> 
> 时间：2013-03-20T07:50:25.797
> 
> 标签：java, android, android-layout

我正在开发一个应用程序，昨天我将它部署在 Galaxy S3 和 Galaxy S 上。我知道第一个支持 xhdpi，第二个支持 hdpi。因此，我还定义了 layout-large 和 layout-xlarge，因为我[在此处（Google 站点）](http://developer.android.com/guide/practices/screens_support.html)阅读 了结果是两者都使用了 layout（medium）。所以我尝试了（为了开玩笑）layout-hdpi 和 layout-xhdpi，然后开始工作！

我不明白为什么？有什么建议吗？

此外：我在我的项目中定义了 layout-small、layout (medium)、layout-hdpi、layout-xhdpi 和 layout-large。我需要添加其他布局，但是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:13:08.973

layout-large 和 layout-xlarge 对应屏幕的大小。MDPI/(X)HDPI 对应于您设备的分辨率。这是两个不同的东西。

Galaxy S 有一个“正常”尺寸和 HDPI 分辨率的屏幕，这就是为什么它会使用“layout”文件夹而不是 layout-large 或其他任何东西。然而，它将使用 layout-hdpi。

最重要的是为 ldpi、mdpi、hdpi 和 xhdpi 提供替代 drawable。如果尺寸定义正确（没有绝对尺寸、拉伸到屏幕宽度等），布局应该会自动调整

在您提到的链接中，特别检查“支持的屏幕范围”部分，它包含有关此问题的更多信息。

# jsp - 将 ResultSet 中的单个值存储在变量中并在另一个页面上使用它

> ID：15518024
> 
> 赞同：3
> 
> 时间：2013-03-20T07:50:39.897
> 
> 标签：jsp, resultset

在我的代码中，我想将表“寄存器”中的第四个属性“密码”存储到来自 ResultSet 的变量中，并将其保存在会话中并在另一个页面上使用它。

```
<%@ page import="java.sql.*" %>
<%
try
{
String eml =  request.getParameter("email");
session.setAttribute("to",eml);
Class.forName("oracle.jdbc.driver.OracleDriver");
Connection  con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234"     
Statement st=con.createStatement();
ResultSet rs= st.executeQuery(" select * from register where email='"+eml+"' ");
while(rs.next())
**String psw = rs.getString(4);**
}
**session.setAttribute("pswd",psw);**
response.sendRedirect("sendProcess.jsp");
rs.close();
st.close();
con.close();
}
catch(Exception e){}
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:30:33.233

在 JSP 页面中创建连接对象是一种不好的做法。查看 JSP 页面一般认为是显示信息。尝试向 servlet 发送请求，并在 servlet 中调用另一个包含您的业务逻辑代码的类（您插入到 JSP 页面中）。然后根据您从业务逻辑中获得的响应，将结果存储到会话属性中，并从 servlet 重定向到所需页面。并尝试`String psw`在循环外声明。

```
String psw=null;
while(rs.next())
{ 
psw = rs.getString(4);
}
session.setAttribute("pswd",psw); 
```

# android - 从SD卡在webview中播放视频时出现空指针异常

> ID：15518028
> 
> 赞同：0
> 
> 时间：2013-03-20T07:50:52.433
> 
> 标签：android, html, video, webview

在 Html 文件中，始终在以下行中显示错误，

```
<video src="file:///sdcard/kummar.m4v" width="300" onclick="playvideo('file:///sdcard/ku<p>testing of video element.</p> 
```

这是我的 Java 代码。在这里，我将视频文件保存在名为“kummar.m4v”的 SD 卡上，下面是我的 HTML 文件。我将 Html 文件保存在 assets -> New-> file->test.html 中。

当我调试代码时，我发现了错误；在这一行它抛出**空指针异常**

```
 webView.getSettings().setPluginState(WebSettings.PluginState.ON); 
```

完整的 Java 代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView webView = (WebView) findViewById(R.id.webView1);
    String html = "<embed src=\"file:///android_asset/" + "test.html" + " \"play=\"true\" loop=\"true\" width=\"100%\" height=\"100%\"> <embed>";
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadDataWithBaseURL("file:///android_asset/", html, "text/html", "utf-8", null);
    WebViewClient webViewClient = new WebViewClient();
    webView.setWebViewClient(webViewClient);
    webView.setWebViewClient(new WebViewClient(){
        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);
        }

        @Override
        public void onLoadResource(WebView view, String url) {
            if (url.endsWith(".m4v")) {
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                intent.setDataAndType(Uri.parse(url), "video/*");
                view.getContext().startActivity(intent);
            }else{
                super.onLoadResource(view, url);
            }
        }
    });
} 
```

Test.Html 文件：

```
<html lang="en">
    <head>
        <meta charset=utf-8>
        <title>Sample HTML5 Structure</title>
        <SCRIPT LANGUAGE="JavaScript">
            function playvideo(url){
            window.location=url;
            }
        </SCRIPT>
    </head>
    <body>
        <video src="file:///sdcard/kummar.m4v" width="300" onclick="playvideo('file:///sdcard/ku<p>testing of video element.</p></video>
    </body>
</html> 
```

我不知道 HTML 是对还是错（由于我缺乏 HTML 知识）。

这是我的 Logcat 错误：

```
03-20 20:35:51.911: E/AndroidRuntime(9222): FATAL EXCEPTION: main
03-20 20:35:51.911: E/AndroidRuntime(9222): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.videoManager/com.videoManager.VideoManagerActivity}: java.lang.NullPointerException
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.os.Looper.loop(Looper.java:123)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at java.lang.reflect.Method.invoke(Method.java:521)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at dalvik.system.NativeStart.main(Native Method)
03-20 20:35:51.911: E/AndroidRuntime(9222): Caused by: java.lang.NullPointerException
03-20 20:35:51.911: E/AndroidRuntime(9222):     at com.videoManager.VideoManagerActivity.onCreate(VideoManagerActivity.java:44)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-20 20:35:51.911: E/AndroidRuntime(9222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-20 20:35:51.911: E/AndroidRuntime(9222):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:17:10.777

如果它正在崩溃

```
webView.getSettings().setPluginState(WebSettings.PluginState.ON); 
```

那么您的 webView 对象可能为 null 或 getSettings() 返回 null。

检查是否

```
WebView webView = (WebView) findViewById(R.id.webView1); 
```

真的找到了webView，如果findViewById返回“null”，可能是R.id.webView1所在的xml布局没有设置为当前Activity的内容。

# android - 如何在android中实现应用程序电池使用量的计算？

> ID：15518032
> 
> 赞同：4
> 
> 时间：2013-03-20T07:51:05.677
> 
> 标签：android

我可以使用**BatteryManager**找出总电池百分比。

我正在尝试实现我打开的每个应用程序消耗多少电池电量的逻辑，直到我关闭应用程序。

是否可以使用**BatteryManger**或需要启动任何其他服务来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:02:41.280

这是因为在 Android 中对电源管理 API 的调用是私有的，不会暴露给开发人员。这些 API 只能通过*Reflection*获得。

Android 内部使用的有关从电源管理获取统计信息的主要包保存在`com.android.internal.os.*`（例如`com.android.internal.os.BatteryStatsImpl`）中。

StackOverflow 用户 Chris Thompson 共享了一个存储库，其中包含用于处理所需内容的工具和应用程序。你可以在[这里](https://code.google.com/p/syspower/)找到它。

你可以从他所做的事情中启发自己，并在此基础上建立一些东西。

此外，您似乎可以使用`adb shell dumpsys batteryinfo`.

一个简单`strace dumpsys batteryinfo`的过程`adb shell`可能会提示您如何检索这些信息`dumpsys`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:37:41.043

您可以使用广播接收器来获取有关电池数据的信息，我不知道您多久获取一次该数据，但我认为至少它可以作为一个起点。

```
public class Main extends Activity {

private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
   @Override
   public void onReceive(Context arg0, Intent intent) {
      int level = intent.getIntExtra("level", 0);
      //Do stuff with level
   }
};

@Override
public void onCreate(Bundle data) {
   super.onCreate(data);
   setContentView(R.layout.main);
   this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
  }
} 
```

# java - Android 对话框，移除细灰色边框 (~2px) 环绕对话框

> ID：15518043
> 
> 赞同：0
> 
> 时间：2013-03-20T07:51:40.067
> 
> 标签：java, android, dialog

我需要一种方法来删除 Android 添加到对话框视图内容的 2px 灰色边框。我已经尝试了该站点上标记为 OK 的大部分解决方案。所需的最终结果显示在最后一张图片中（一个只显示我的视图的对话框，没有任何由 android 添加的额外 UI 元素）

这是当前代码：

```
AlertDialog.Builder builder = new Builder(this);
builder.setView(dialogContent); //a view inflated from xml
... 
chooseActionDialog = builder.create();
...
chooseActionDialog.setView(dialogContent, 0, 0, 0, 0); //this removed the padding between grey border & actual content.. this is why i set view twice
chooseActionDialog.show();
...
Drawable d = new ColorDrawable(Color.TRANSPARENT);    
chooseActionDialog.getWindow().setBackgroundDrawable(d);  //this seems to change color of padding area (between grey border & actual content) 
```

注意：具有 2 个参数（context、themeId）的 Builder 构造器确实可以按预期工作（仍然有边框和对话框变得丑陋）

![在此处输入图像描述](../Images/673e2e4b9884c49f092417eab7007bab.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T07:58:35.867

在您的 style.xml 中的 values 文件夹中创建您自己的样式，如下所示

```
<style name="Theme.Trans" parent="android:Theme.Translucent">
   <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:background">@android:color/transparent</item>
</style> 
```

将此样式应用于您的对话框

```
final Dialog dialog = new Dialog(UrActivity.this, R.style.Theme_Trans); 
```

# php - 重新加载后javascript找不到iframe

> ID：15518047
> 
> 赞同：0
> 
> 时间：2013-03-20T07:51:51.357
> 
> 标签：php, javascript, ajax, iframe

我不是在寻求解决方案，因为我解决了问题。这更像是“为什么会发生”？理解是一切的根源，我不知道为什么会这样。

我有一个包含两个分层 div（Div 1 和 Div 2）的网页。Div1 显示一个按钮，单击时显示 Div 2，其中包含一个表单和一个 iframe（名为“myframe”）。当用户在 Div 2 中单击“取消”时，Div 2 被清空并消失，再次显示 Div 1。一切都是使用 Ajax 和 PHP 加载的。

我的问题：我第一次单击 Div 1 中的按钮时，一切都显示正常，而且 - 最重要的是 - 我可以使用 javascript 访问 iframe。

两个都

```
var b=window.frames['myframe']
and 
var b=window.frames[0] 
```

导致警报（b.name）显示“myframe”。

然而，奇怪的是，当我取消 Div 2（清空并隐藏它）然后使用完全相同的代码再次按下 Div 1 中的按钮时，在引用 iframe 时，在 javascript 中给了我“NULL”。我检查了 DOM，Div 2 在取消后确实是空的，并且 iframe 第二次在那里，正确显示它的内容，那么为什么 javascript 没有拾取它呢？我试过等待几分钟，然后再次点击按钮，首先在 Div 2 中加载另一个页面，但它没有用。

我的解决方案是将时间添加到 iframe-name 中，从而在每次加载时为其赋予唯一的名称。这很好用，现在即使在“取消”之后，javascript 也可以访问 iframe。

我的问题是：为什么在使用静态名称时，js第二次找不到iframe？

div 2 的内容是：

```
//THE FORM
<form id="myform" name="myform" class="myform" action="" method="post" enctype="multipart/form-data" target="upload_target" onsubmit="" onkeypress="return keyCheck(event)">
// some form stuff
</form>
<iframe src='imbo/php/system_fotohidden.php' id='myframe' name='myframe'></iframe> 
```

和javascript：

```
function click(){
    var b=window.frames['myframe'];
    alert(b.name);
    } 
```

**[编辑]** 也许是为了澄清我在用 div 做什么：

1.  单击 Div 1 中的按钮“loadform”
2.  Ajax 在 Div 2 中加载带有 Form 和 Iframe 的页面（一切都很好）
3.  使用 JS => JS 访问 div 2 中的 Iframe 找到 Iframe 并弹出它的名称
4.  取消表格：JS => div2.innerHTML='' and div2.style.display='none'
5.  单击 Div 1 中的按钮“loadform”
6.  Ajax 在 Div 2 中加载与 Form 和 Iframe 完全相同的页面（它仍然显示很好）
7.  使用 JS => JS 访问 div 2 中的 Iframe 给出 NULL 而不是 Iframe-name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:46:34.693

通过将元素`innerHTML`属性设置为“”，您将删除其所有子项，因此它们不再存在。您不能通过 name 或 by`document.frames`或其他任何方式引用它们。

要隐藏`DIV`元素，您可以使用`DIV.style.visibility='hidden';`.

这是一个示例小提琴[http://jsfiddle.net/ptFwE/1/](http://jsfiddle.net/ptFwE/1/)；您可以看到，在设置为空字符串之后`childNodes`的属性`div`中没有子项。`DIV``innerHTML`

如果您需要此 div 用于其他目的，请考虑将`visibility`IFRAME 设置为`hidden`仅或使用另一个 DIV。

# php - 如何使用 phpseclib 从我的 php 服务器上传文件-> someOther 服务器？

> ID：15518049
> 
> 赞同：6
> 
> 时间：2013-03-20T07:51:54.343
> 
> 标签：php, phpseclib

我正在尝试将文件从我的 php 服务器上传到其他服务器（我的工作场所非常糟糕，无法阻止 ssh 流量）

无论如何，这就是我想要做的：（在：/public_html/manage.php

```
<?php

set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib/phpseclib');
include('Net/SSH2.php');
include('Net/SFTP.php');

$ssh = new Net_SSH2('SomeServer',22); //starting the ssh connection to localhost
if (!$ssh->login('root', '12345')) { //if you can't log on...
    exit('ssh Login Failed');
}
$sftp = new Net_SFTP('SomeServer',22);
if (!$sftp->login('root', '12345')) { //if you can't log on...
    exit('sftp Login Failed');
}
echo $sftp->pwd();

$output = $sftp->put('/root/1_yum_stuff.sh', '1_yum_stuff.txt');
echo $output;
$output = $ssh->exec('ls -a');
//$output = $ssh->exec('./1_yum_stuff.sh & 1>1.txt');
echo $output;
$output = $ssh->exec('pwd');
echo $output;
echo("3rd try!");
?> 
```

问题是，文件“1_yum_stuff.txt”位于我的 php 服务器上的 /public_html/ 文件夹中，而 sftp 就是无法移动该文件。

无论如何，这是使用 phpseclib 的 sftp 模块的正确方法吗？（例如放？）

谢谢：） ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:58:30.260

我会稍微重写你的代码。例如。：

```
<?php

set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib/phpseclib');
include('Net/SSH2.php');
include('Net/SFTP.php');

$sftp = new Net_SFTP('SomeServer',22);
if (!$sftp->login('root', '12345')) { //if you can't log on...
    exit('sftp Login Failed');
}
echo $sftp->pwd();

$output = $sftp->put('/root/1_yum_stuff.sh', '1_yum_stuff.txt');
echo $output;
$output = $sftp->exec('ls -a');
//$output = $sftp->exec('./1_yum_stuff.sh & 1>1.txt');
echo $output;
$output = $sftp->exec('pwd');
echo $output;
echo("3rd try!");
?> 
```

Net_SFTP 扩展了 Net_SSH2，因此它继承了所有方法。此外，CBroe 是对的 - 如果没有 phpseclib 的第三个参数，`$sftp->put()`将创建 /root/1_yum_stuff.sh ，其中包含 15 个字节（即。`strlen("1_yum_stuff.txt")`）。

# nagios - Nagios 插件错误

> ID：15518050
> 
> 赞同：0
> 
> 时间：2013-03-20T07:51:54.793
> 
> 标签：nagios

```
[root@245557-web4 etc]# /usr/local/nagios/libexec/check_mem.sh --help

Wrong Syntax: check_mem.sh --help

Usage: check_mem.sh [-w|--warning]<percent free> [-c|--critical]<percent free>

[root@245557-web4 etc]# /usr/local/nagios/libexec/check_mem.sh -w 3 -c 4
/usr/local/nagios/libexec/check_mem.sh: line 59: machinfo: command not found
(standard_in) 1: parse error
(standard_in) 2: parse error
(standard_in) 1: parse error
(standard_in) 2: parse error
(standard_in) 1: parse error
(standard_in) 1: parse error
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 1%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 2%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 1%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 2%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 1%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 2%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 1%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 2%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 1%3: integer expression expected
/usr/local/nagios/libexec/check_mem.sh: line 119: [: 2%3: integer expression expected
OK - Memory usage: total: MB - used: MB(%) - free: MB(%);Top 5 Memory Processes(memKB,pname,pid):  138062 mysqld 2643, 80454 cvd 3169, 76292 httpd 19706, 76043 httpd 18358, 76043 httpd 16573|Memory usage=MB;;;0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:01:35.930

'check_mem.sh' 脚本没有得到很好的维护。使用“check_mem.pl”，可以在最新版本的 nagios-plugins 的“contrib”文件夹中找到。可从： http: [//www.nagios.org/download/plugins](http://www.nagios.org/download/plugins)

# sql-server - 在sql server中保存字节数组

> ID：15518051
> 
> 赞同：29
> 
> 时间：2013-03-20T07:51:58.403
> 
> 标签：sql-server, bytearray, sqlcommand

我希望使用一种方法来保存需要使用字节数组的密码，如本文[所述](https://stackoverflow.com/questions/4329909/hashing-passwords-with-md5-or-sha-256-c-sharp)

那么我应该在sql server中使用哪种数据类型来保存字节数组？以及如何使用 SqlCommand 传递和检索字节数组？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T08:02:47.093

如果它总是相同的长度，那么`binary(length)`将是合适的。如果它的长度会有所不同，请使用`varbinary(maxlength)`.

[二进制和 varbinary](http://msdn.microsoft.com/en-gb/library/ms188362.aspx)。

而且，正如@pswg 所说，您可以通过将其放入合适的参数中来从代码中传递它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T07:54:07.790

只需使用`byte[]`与任何其他参数相同的方式，指定`SqlDbType.Binary`为参数类型。这是 C# 中的示例

```
// Generate your password hash some way
byte[] passwordHash = new byte[] { 0x0, 0x1, 0x2 ... };

...

command.Parameters.Add("@passwordHash", SqlDbType.Binary);
command.Parameters["@passwordHash"].Value = passwordHash; 
```

或者，如果您更喜欢 VB.NET

```
' Generate your password hash some way
Dim passwordHash As Byte() = New Byte() { &H0, &H1, &H2 ... }

...

command.Parameters.Add("@passwordHash", SqlDbType.Binary)
command.Parameters("@passwordHash").Value = passwordHash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T03:18:45.517

我建议使用`nvarchar(45)`Base64 将你的 32 个字节转换为字符串。这是保存哈希的标准方法。

或者，您可以`nvarchar(64)`将其存储为十六进制字符串。

# git - .gitignore 仍然忽略已删除的项目

> ID：15518053
> 
> 赞同：3
> 
> 时间：2013-03-20T07:51:58.570
> 
> 标签：git, github, gitignore

我有一个标准的 .gitignore 文件，我包含在每个项目中。其中的一行忽略了“bin”。

碰巧，在这个特定的项目中，我实际上*想要*一个 /bin 目录。我从 .gitignore 中删除了“bin”，但 git 仍然不允许我添加 /bin 目录。它仍然认为它应该忽略它，即使该字符串已从 .gitignore 中删除。

我找到的所有答案都是关于如何忽略以前提交的内容，但我没有找到任何关于如何添加以前忽略的内容的信息。

那么：我如何告诉 git 取消忽略以前忽略的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:31:14.690

*   确保您的 .gitignore 不再忽略该`bin`目录。为了确认你可以`git ls-files . --ignored --exclude-standard --others`从你的 repo 的根目录运行来列出所有被 git 忽略的文件。

*   另一种方法是，如果您尝试使用***不***提供参数添加`bin`目录，git 会抱怨文件当前被忽略。如果您确实看到此消息，那么您仍然有一个地方似乎导致 git 忽略该目录。`git add` *`-f``.gitignore``bin`*

**   还要记住，git 不会对空目录进行版本控制。您需要在目录下至少有一个文件，以便 git 在版本控制下跟踪它。在这种情况下，在目录下创建一个虚拟文件`bin`，该文件说`git add bin/.dummy`. 这样，您可以确保`bin`在克隆或签出时创建目录。* 

 ***根据您的评论**更新：****

 ***   .gitignore 文件可以存在于存储库中的多个目录中，以包含或排除不同目录级别的规则。从 repo 的根目录运行`find . -type f -name .gitignore`以查看 repo 中是否有任何其他 gitignore 文件。

还有一种使用以下 git 配置选项指定 gitingore 的全局方法，检查您的设置中是否存在这样的配置：

```
git config --global --get core.excludesfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:36:31.103

很可能您有一个全局 git 忽略文件 -`~/.gitignore`通常。您可以通过以下方式检查：

```
-> git config core.excludesfile 
/home/andy/.gitignore 
```

您可以反转忽略规则，或者最简单的解决方案是添加 bin 文件并继续：

```
git add -f bin
git commit -m "Adding my bin files" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T07:55:43.077

请注意，您的意思仍然是“忽略”它。您的意思是当您键入“git status”时，bin/ 目录不会显示为未跟踪或已修改？

尝试将其显式添加到 git 中？

```
git add bin/
git commit -m "Adding the bin directory" 
```***

# hadoop - 由于 hadoop 中的合并操作，Mapper 任务挂在那里

> ID：15518059
> 
> 赞同：0
> 
> 时间：2013-03-20T07:52:43.550
> 
> 标签：hadoop

我的 hadoop 作业的映射器任务总是挂在那里，即使它的进度是 100%，它的状态仍在运行。而且我看到在映射器任务日志中完成了很多合并操作。我已经将参数 io.sort.mb 和 io.sort.factor 更改为更大的数字。但这并没有解决我的问题。我有大约 2000 个 mapper 任务，mapper 任务的总输出大小为 200G，这意味着每个 mapper 任务的输出大小约为 100M，这对我来说应该不是很大的大小。所以我不明白为什么mapper任务做这么多合并操作

关于这个问题的任何想法？谢谢

这是我的日志（顺便说一句，下面的大小数字是什么意思？）：

```
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44335 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45076 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44057 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45369 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45388 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45816 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44765 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45761 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45379 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44456 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45581 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45939 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45418 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 45241 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44809 bytes
[INFO] Merger - Merging 2 sorted segments
[INFO] Merger - Down to the last merge-pass, with 2 segments left of total size: 44736 bytes
[INFO] Merger - Merging 2 sorted segments 
```

# android - 从 ViewPager 获取焦点视图无法正常工作

> ID：15518066
> 
> 赞同：3
> 
> 时间：2013-03-20T07:53:15.063
> 
> 标签：android, android-viewpager

使用 ViewPager 通过左/右滑动切换视图。

我有一个 pagerview，里面有各种视图（自定义列表视图、图像视图等），当滑动 pagerview 时，应根据索引更改子值以滚动。我的问题是，当我运行我的项目时，在滑动索引后显示第一个索引而不是第 0 个索引的值也不合适。幻灯片大小将取决于 sqllite 数据库中的值。

调用pagerview

```
pager = (ViewPager) findViewById(R.id.panelPager);
        adapter = new MyPagerAdapter();     
        pager.setAdapter(adapter);
        pager.setCurrentItem(0); 
```

这是我的寻呼机适配器类

```
public class MyPagerAdapter extends PagerAdapter {

        @SuppressWarnings("deprecation")
        @Override 
        public Object instantiateItem(View collection,int position) {   
            Log.d("Pos",""+position);
            PagerView = new View(collection.getContext());

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            PagerView = inflater.inflate(R.layout.newmainviewpager, null, false);
            lvMenu=(ListView)PagerView.findViewById(R.id.lvMenuItem);
            imgMainItem=(ImageView)PagerView.findViewById(R.id.imgDisplay);
            edQty=(TextView)PagerView.findViewById(R.id.edQty1);
            edQty.setText("1");
            btnAdd=(Button)PagerView.findViewById(R.id.btnAdd);
            btnSub=(Button)PagerView.findViewById(R.id.btnsub);
            tvDesc=(TextView)PagerView.findViewById(R.id.tvDesc);
            btnPurchaseOrder=(Button)PagerView.findViewById(R.id.btnPlaceOrder);
            btnPurchaseOrder.setOnClickListener(RevisedMainMenu.this);
            imgfbConnect=(Button)PagerView.findViewById(R.id.imgfbConnect);
            imgfbConnect.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    FetchImagePath fetchimage = new FetchImagePath(RevisedMainMenu.this);
                    fetchimage.execute("http://192.168.1.6/dat/imagepath.php");
                }
            });
            displayMenu(position);
            btnAdd.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int qty=Integer.parseInt(edQty.getText().toString().trim());
                    qty=qty+1;
                    edQty.setText(String.valueOf(qty));
                }
            });
            btnSub.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int qty=Integer.parseInt(edQty.getText().toString().trim());
                    if(qty>1)
                    {
                        qty=qty-1;
                        edQty.setText(String.valueOf(qty));
                    }
                    else
                        Toast.makeText(getApplicationContext(), "Invalid Operation",Toast.LENGTH_LONG).show();
                }
            });
            lvMenu.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position,
                        long id) {
                    SubMenuid12=ExtraSubMenuIdlst.get(position);
                    byte[] photo =datasource.getImagePathFromSubMenuId(ExtraSubMenuIdlst.get(position));
                    ByteArrayInputStream imageStream = new ByteArrayInputStream(photo);
                    Bitmap theImage= BitmapFactory.decodeStream(imageStream);
                    Bitmap bitmapScaled = Bitmap.createScaledBitmap(theImage, 300,250, true);
                    Drawable drawable = new BitmapDrawable(bitmapScaled);
                    imgMainItem.setBackgroundDrawable(drawable);      
                    String Desc=datasource.getSubMenuDescriptionFromSubMenuId(SubMenuid12);
                    tvDesc.setText(Desc);
                    selectionPos=position;
                    Log.d("SelPos",""+selectionPos);   //.d("das","dasdas");
//                  
                }
            });
//          }
//          Log.d("MenuID",MenuIdlst.get(position));

            ((ViewPager) collection).addView(PagerView, 0);
            return PagerView;

        }
        @Override
        public void destroyItem(final View arg0, final int arg1,
                final Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public boolean isViewFromObject(final View arg0, final Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public void finishUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public Parcelable saveState() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
            // TODO Auto-generated method stub

        }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return  MenuIdlst.size();
        }

    } 
```

这是第 1 个显示的索引 1， ![在此处输入图像描述](../Images/6ac0465f340bd4967c8e9f78ef2f7af9.png)

这是第 0 个索引位置，应该显示在第 1 个位置 ![在此处输入图像描述](../Images/6d7e1650947f0d14615f3b6ba6ca331d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:48:50.793

您可以像这样编写页面更改侦听器类：

```
pager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int pageNum) {
        // TODO Auto-generated method stub
        Log.d("index", "onpagechange: " + pageNum);
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {

    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:35:49.270

采用

```
setPrimaryItem(View container, int position, Object object) 
```

在您的适配器中（覆盖它）

以此目的。

# algorithm - for循环的频率计数

> ID：15518069
> 
> 赞同：2
> 
> 时间：2013-03-20T07:53:20.997
> 
> 标签：algorithm, loops, for-loop

我无法理解以下内容：

考虑这个循环：

```
for (j=1;j<n;j++)
    //j=1 will run once
    //j<n will run n-1+1 = n times
    //j++ will run n-1 times (one less than the conditional statement above) 
```

现在考虑以下几点：

```
for (j=3;j<=n;j++)
    //j=3 will run once
    //j<=n will run n-3+2 = n-1 times 
```

现在，我会说 j++ 将运行 n-2 次，但根据我的讲义，它将运行 2(n-2) 次。

我不明白这有什么意义，例如如果 n = 5，循环将检查 j<=n 4 次，但只会增加 3 次。根据注释它会增加6倍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:06:22.197

```
for (j=1;j<n;j++) 
```

等效于（在 C 中）

```
j = 1;
while (j < n) {
   ...
   j++;
} 
```

尝试使用较小的值`j`，例如 2：`j < 2`测试 2 次 (n) 和`j++`一次 (n-1)。

在第二种情况下

```
for (j=3;j<=n;j++) 
```

对于`n = 4`,`j<=n`被测试 3 次 (n-1)、`j++`2 次 (n-1) 而不是 2(n-2)。实际上，您可以说`j++`只有在条件为真时才会执行，即*条件测试的次数*减一（前提是循环之前没有*中断*，在 C 和其他类似语言中）。

这两个样本之间的区别是`j<n`vs `j<=n`：在 C 中，您可以翻译（用于整数比较）

```
j <= n 
```

到

```
j < n+1 
```

这可能有助于理解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:05:50.763

对于第一个示例（假设 n >= 1），计数`j<n`应该只是 n。

对于第二个示例（假设 n >= 2），计数为`j<=n`n-1 和`j++`n-2。

你的理解是正确的，这在讲义中是错误的。

# android - 使用计时器从服务开始活动

> ID：15518070
> 
> 赞同：0
> 
> 时间：2013-03-20T07:53:23.330
> 
> 标签：android, android-activity, alarmmanager

我想每 10 分钟后从服务中调用我的主要活动。我该怎么做呢？

我尝试使用`AlarmManager`. `MyAppReceiver`我使用以下代码触发：

```
private void setNextSchedule()
{
     AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
     PendingIntent pi = PendingIntent.getBroadcast(this, 0,new Intent(this,     MyAppReciever.class), 0);
     long duration = 20000;
     am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
     SystemClock.elapsedRealtime(), duration, pi);
} 
```

并调用它`onStartCommand()`的服务，但它不工作。

```
public class MyAppReciever extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub
        Toast.makeText(context,"in myAppreceiver",Toast.LENGTH_LONG).show();
        context.startActivity(new Intent(context, MainActivity.class));
    }
} 
```

在清单中

```
<receiver android:name=".MyAppReciever" /> 
```

# jquery - 如何更改 jquery 以使某些垂直选项卡正常工作？

> ID：15518072
> 
> 赞同：0
> 
> 时间：2013-03-20T07:53:25.107
> 
> 标签：jquery, html, css, jquery-ui

我有一些垂直选项卡，我想添加更多，但我想在第一个垂直选项卡的右侧添加。第一个在左侧，在它们旁边是内容框，我希望在这个内容框之后是一组新的垂直选项卡，它们将应用于同一个内容框。这是我想要的图像（我在 Photoshop 中制作的）：

![IMAGE 是必须在这里](../Images/f72ec2a2b774972ea4d6ce450b4b7fe0.png)

这是我尝试过的：[http://jsfiddle.net/26zQS/18/](http://jsfiddle.net/26zQS/18/) 但我不知道如何更改 jquery 以在两列上工作

## HTML

```
<div class="verticalslider" id="textExample">
    <ul class="verticalslider_tabs right">
        <li><a href="#">1-right</a>

        </li>
        <li><a href="#">2-right</a>

        </li>
        <li><a href="#">3-right</a>

        </li>
        <li><a href="#">4-right</a>

        </li>
        <li><a href="#">5-right</a>

        </li>
    </ul>
    <ul class="verticalslider_tabs">
        <li><a href="#">1-left</a>

        </li>
        <li><a href="#">2-left</a>

        </li>
        <li><a href="#">3-left</a>

        </li>
        <li><a href="#">4-left</a>

        </li>
        <li><a href="#">5-left</a>

        </li>
    </ul>
    <ul class="verticalslider_contents">
        <li>Nothing</li>
        <li>
                <h2>Activitate 1</h2>
ADI</li>
        <!-- elementul al doilea -->
        <li>
                <h2>Nunc Adipiscing</h2>

            <p>CUC adipiscing purus id orci rutrum placerat. Nam posuere elementum ipsum quis faucibus. Fusce fermentum turpis ac erat mollis sit amet varius mi placerat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut ante justo, varius quis dignissim nec, condimentum in dui. Nulla sed lectus eu nunc vehicula vulputate vel nec velit. Integer eu purus nunc. Donec odio augue, sagittis pellentesque adipiscing id, dignissim vel enim. Maecenas a risus est.</p>
        </li>
        <li>
                <h2>Praesent Dapibus</h2>

            <p>Praesent dapibus metus vitae velit blandit tempor. Donec dignissim tempus neque, a vestibulum massa aliquam sed. Vestibulum velit quam, facilisis vel pharetra nec, bibendum eget mauris. In vitae ligula ac justo varius ullamcorper. Nullam vitae urna eu metus pellentesque vehicula vel sit amet nibh. Cras nec velit dictum neque imperdiet congue in nec eros. Suspendisse ante felis, eleifend sed pellentesque id, sagittis ut magna. .</p>
        </li>
        <li>
                <h2>Praesent Dapibus</h2>

        </li>
    </ul>
</div> 
```

## jQuery

```
$(document).ready(function () {
    $("#textExample").verticaltabs({
        speed: 500,
        slideShow: false,
        activeIndex: 0
    });
    $("#imageExample").verticaltabs({
        speed: 1000,
        slideShow: true,
        slideShowSpeed: 3000,
        activeIndex: 0,
        playPausePos: "topRight"
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:02:30.647

这是我的 JS 代码，并链接到 JSFiddle：http: [//jsfiddle.net/uTAAU/19/](http://jsfiddle.net/uTAAU/19/) 请注意，我已经稍微更改了您的 HTML

```
$(document).ready(function () {
    $('.verticalslider_tabs li a').on('click',function(){
        var noumber = $(this).attr('id').replace('tab',''); // Here I check with element was clicked and take it noumber

        $('.verticalslider_tabs li.activeTab').removeClass('activeTab'); // I'm looking for li with class activeTab, when I get it I? remove that class
        $(this).parent().addClass('activeTab'); // Now I'm adding class activeTab to the li (parent of clickrd a element) so the border won't be displayed
        $('.verticalslider_contents li.activeContent').hide().removeClass('activeContent'); // Now I'm hidding the active tab
        $('.verticalslider_contents li[data-tab="'+noumber+'"]').fadeIn(500).addClass('activeContent'); // Here is fade in and adding activeContent class to an element
     })
}); 
```

# php - 缓冲对 ajax 和 sql 的调用

> ID：15518075
> 
> 赞同：0
> 
> 时间：2013-03-20T07:53:37.233
> 
> 标签：php, javascript, ajax, sqlite

我的情况是一个带有 HTML 选择标签的 PHP 脚本。当 select 的 onchange 发生时，它可以触发多达 15 个 javascript 函数，每个函数都略有不同。每个函数都有一个对 PHP 脚本的 AJAX 调用（此脚本中没有 HTML）并返回一个 PHP 回显，该回显用作 .responseText 以更改文档中的元素。

这一切都很好而且很快，但我确实怀疑处理函数的顺序是任意的，尽管这并不重要。

我现在要做的是在由 AJAX 调用的 PHP 脚本中包含一个 SQL UPDATE 到数据库中。这就是整个事情似乎要倒下的地方，因为我只生成了一些 SQL 语句，而不是我想要的那个，因为从最初触发的 15 个函数中，最多应该生成 7 个SQL 语句。

关于缓冲 AJAX 调用的任何想法？

# android - 在android中隐藏键盘

> ID：15518077
> 
> 赞同：1
> 
> 时间：2013-03-20T07:53:39.117
> 
> 标签：android, android-widget

每当我单击按钮时，我都使用以下代码作为 util 文件方法来隐藏我的键盘。

```
public static void hideKeyPad(){
        Activity activity = MainActivity.getActivity();
        InputMethodManager imm = (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
   } 
```

但是键盘总是来的。请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:00:38.620

尝试使用此代码对我有用

```
 InputMethodManager inputManager = (InputMethodManager)
               getSystemService(Context.INPUT_METHOD_SERVICE); 
 inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
                  InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:19:04.947

使用`hideSoftInputFromWindow`方法并作为第一个参数传递您的`EditText`.

```
InputMethodManager inputManager = (InputMethodManager)
               getSystemService(Context.INPUT_METHOD_SERVICE); 
inputManager.hideSoftInputFromWindow(yourEdit.getWindowToken(), 0); 
```

# jquery - JQuery编号重新排序包含类的孩子

> ID：15518080
> 
> 赞同：1
> 
> 时间：2013-03-20T07:53:47.583
> 
> 标签：jquery, jquery-selectors

我正在尝试重新排序一些数字标签，但我只希望它循环遍历包含具有特定类的子项的选择器。

我的html：

```
<div class="input-prepend">
   <span class="add-on">1</span>
   <input data-line-id="4613" type="text" class="input-large address-line" value="6 Flakefield">
   <img data-toggle="tooltip" class="input-action delete-line" src="/public_html/images/delete.png" width="16" height="16" data-original-title="Delete line 1.">
</div> 
```

和jQuery：

```
$('#addressStepContent').on('click', '.delete-line', function(){
   //$(this).parent().detach();
   $.each($(this).parent().siblings('> .address-line').andSelf(), function(i, v){
       $(this).children('.add-on').text(i+1)
   })
}) 
```

这不起作用，它只会影响`input-prepend`您单击删除图像的 div。

如何让这个循环遍历包含有类的孩子的选择器`.address-line`

* * *

它还需要在遇到标签元素时停止或跳出循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:56:22.473

使用 find ..我认为你不需要循环

提这个..

```
 $(this).parent().find('.add-on').text(i+1) 
```

或者

```
$(this).siblings('.add-on').text(i+1) 
```

或者

```
$(this).closest('.add-on').text(i+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:03:03.163

试过这样？？

```
 $.each($(this).parent().find('.address-line'), function(i, v){
        $(this).children('.add-on').text(i+1)
      }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:07:49.503

试试这个：

```
$('#addressStepContent').on('click', '.delete-line', function(){
    var i = $(this).closest('div').index();
    $(this).siblings('.add-on').text(i+1);
}); 
```

为此，您需要一个局部变量。

`.each()`根本不需要，`.siblings()`似乎有点不正确。试试这个，看看它是否有帮助。

### [查看演示](http://jsfiddle.net/c8ues/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:51:35.273

这是我想出的解决方案。如果您对如何使其变得更好有任何想法，请告诉：

```
$('#addressStepContent').on('click', '.delete-line', function(){
      targets = $(this).parent().siblings();

      $(this).parent().detach();
      n = 0
      $.each(targets, function(i, v){
        if($(this).is('label') && $(this).text() != 'Address lines')
        {
          alert($(this).text())
          return false;
        } else {
          if($(this).children('.add-on').length > 0)
          {
            n++;
          }
          $('.add-on', this).text(n);
        }
      })
    }) 
```

# sql-server - Sql HierarchyId 如何获取 2 级祖先

> ID：15518094
> 
> 赞同：0
> 
> 时间：2013-03-20T07:54:56.370
> 
> 标签：sql-server, hierarchy

使用 sql 层次结构 ID 如何获取所有没有子代的行（即最后一个后代）？

假设我的表结构如下：

```
 Id, 
 Name,
 HierarchyId 
```

并有这些行：

```
1, Craig, /
2, Steve, /1/
3, John, /1/1/
4, Collin /1/1/1
5, Sam, /2/
6, Matt, /2/1/
7, Chris, /2/1/1/
8, Molly, /2/1/1/1 
```

现在，当我通过 Id = 8 时，即对于 molly，我想要祖先 2 级，这意味着 Matt 和 chris

对其他人也是如此。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:35:42.183

您可以修改以下查询以实现此目的：

```
declare @hierarchyid hierarchyid
select @hierarchyid = [HierarchyId] from table_name where id = child_id
select * from table_name where [HierarchyId] in (@hierarchyid.GetAncestor(2)) 
```

# javascript - 将不同数量的元素附加到每个组

> ID：15518095
> 
> 赞同：0
> 
> 时间：2013-03-20T07:55:01.913
> 
> 标签：javascript, d3.js

我对 d3 很陌生而且我正在尝试学习它如何处理多维数组。

我需要根据嵌套数组的长度将不同数量的元素附加到组中：

```
Var data = [
            [1,2,3],
            [1,2,3,4],
            [1,2,3,4,5]
           ]; 
```

基于这个例子，我需要有 3 个组；第一个有 3 个元素，第二个有 4 个，第三个有 5 个。

遍历分配给每个组的*基准的正确方法是什么？*d3 是否提供这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:06:45.357

首先循环遍历组然后遍历每个组中的元素的简单演示：

```
var data = [
    [1,2,3],
    [1,2,3,4],
    [1,2,3,4,5]
];

var viz = d3.select("#viz");
var groups = viz
                .selectAll("div.group")
                .data(data, function(d, index) { 
                   return d.key; 
                })
                .enter()
                .append("div")
                .classed('group', true)
                .text(function(d, i) { return 'group ' + i});

var nodes   = groups
                .selectAll("div.node")
                .data(function(d, index){ 
                   return d;
                })
                .enter().append("div")
                .classed('node', true)
                .text(function(d, i) { return d}); 
```

作为要点，为了清晰起见，使用 css 样式 [https://gist.github.com/widged/5203275](https://gist.github.com/widged/5203275)

如果这不能真正回答您的问题，请告诉我

# javascript - 使用 node.js 时服务器 GCM 未启动

> ID：15518096
> 
> 赞同：3
> 
> 时间：2013-03-20T07:55:07.280
> 
> 标签：javascript, node.js

我创建了一个 javascript 文件（notification.js）。我使用 node.js 在命令***node notification.js***中启动 web 服务。我收到错误消息***Can not file module node-gcm***。我之前使用命令***npm install node*** -gcm 为 node.js 下载了 node-gcm 。我不知道如何处理这个问题。请帮我。

通知.js

```
var gcm = require('node-gcm');
//var gcm = require('../gcm.js');

var message = new gcm.Message();
var sender = new gcm.Sender('AIzaSyB8IAgyo9DJbmGiVISnCCoxcQRD7em6KfI');
var registrationIds = [];

message.addData('title','My Game');
message.addData('message','Your turn!!!!');
message.addData('msgcnt','1');
message.collapseKey = 'demo';
message.delayWhileIdle = true;
message.timeToLive = 3;

// At least one token is required - each app registers a different token
     registrationIds.push('APA91bHg7QEO3h44OCrBAb6yoHEvNvVSrRRcJjufS5fduCw2YhC83BZ9eqlxYS9PbKIAoFrmK-rvNEQ-CxrAjy4Wy13CRt5or1h7kG9XDRg2Tcy4zx8EpGOYLybmgnLDmVVvTJF4PR9Y');

server.listen(4040)
sender.send(message, registrationIds, 4, function (result) {
console.log(result);
}); 
```

# javascript - 如何在不使用 eval 的情况下将字符串中的语句转换为实际语句？

> ID：15518100
> 
> 赞同：0
> 
> 时间：2013-03-20T07:55:44.107
> 
> 标签：javascript

```
var statement = "true && 'yes' || 'no'"
eval(statement) 
```

给我“是”。

但我需要一种不使用 eval 的方法来做到这一点。反正有这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:07:34.643

正如[@James Allardice](https://stackoverflow.com/questions/15518100/how-to-turn-a-statement-in-a-string-to-actual-statement-without-using-eval#comment21978092_15518100)在评论中所说，如果你需要使用`eval`，就使用它。

如果由于某种原因你不喜欢`eval`作为典型的 JavaScript 函数，还有另一种解决方法，它的作用基本相同：

```
var statement = "true && 'yes' || 'no'";
new Function("return " + statement)(); 
```

# ios - 如何滑动以删除特定部分中的行

> ID：15518102
> 
> 赞同：0
> 
> 时间：2013-03-20T07:55:51.283
> 
> 标签：ios, objective-c, uitableview, sections

我有两个数组。每个 Array 都有一个部分。当用户滑动该行并选择删除时，它必须删除右侧部分中的相应行。如何更改我的代码以使其在正确的部分中删除。到目前为止，这是我的代码。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //remove the deleted object from your data source.
        //If you're data source is an NSMutableArray, do this
        if (self.numberOfSections == 1)
        {
            [self.playerNames removeObjectAtIndex:indexPath.row];
        }
        else
        {
            //code here needs to determine which section needs to be deleted
        }
        [self.tableView reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:01:38.653

尝试改变

```
if (self.numberOfSections == 1) 
```

到：

```
if (indexPath.section == 1) 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:17:35.500

这是一些代码片段：

```
-(void)tableView:(UITableView*)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath {
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
    forRowAtIndexPath:(NSIndexPath *)indexPath {
    // If row is deleted, remove it from the list.
    if (editingStyle == UITableViewCellEditingStyleDelete) {
          NSInteger row = [indexPath row];
          [tableDataSource removeObjectAtIndex:row];      
          [tableView reloadData];
    }
} 
```

另请参阅此[Apple 文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:18:49.273

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //remove the deleted object from your data source.
        //If you're data source is an NSMutableArray, do this
        if (self.numberOfSections == 1)
        {

            [self.playerNames removeObjectAtIndex:indexPath.row];
        }
        else
        {
             if (indexPath.section == 0)
             {
                 [self.team1 removeObjectAtIndex:indexPath.row];
             }
            else
            {
                [self.team2 removeObjectAtIndex:indexPath.row];
            }
        }
        [self.tableView reloadData];
    }
} 
```

# java - 通过单击按钮从另一个打开 jFrame

> ID：15518103
> 
> 赞同：0
> 
> 时间：2013-03-20T07:55:52.093
> 
> 标签：java, swing, jpanel, visibility

我知道这已经过去了很多次，我已经在谷歌上搜索了几个小时，但由于某种原因我无法让它工作。请放轻松...我是 java 的菜鸟，我是 vb.net 男孩。谢谢您的帮助

这是我的调用页面中的按钮侦听器代码。我得到一个错误

```
Method setvisable(boolean) is unidentified for the type Pay_Types 
```

* * *

```
private class BtnEditPayActionListener implements ActionListener {
        public void actionPerformed(ActionEvent arg0) {
            Pay_Types p = new Pay_Types();
            p.setvisable(true);
        }
    } 
```

我也试过这个监听器。这里同样的错误

```
private class BtnEditPayMouseListener extends MouseAdapter {
    @Override
    public void mouseClicked(MouseEvent e) {
        Pay_Types p = new Pay_Types();
        p.setvisable(true);         
    }
} 
```

这是我的 Pay_Types.java 代码。

```
package com.dooleyfam.bep1;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JCheckBox;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import javax.swing.JPanel;
import javax.swing.border.TitledBorder;
import javax.swing.JTextField;
import javax.swing.JLabel;
import javax.swing.JButton;

public class Pay_Types {

    private JFrame frame;
    private JCheckBox chckbxEmpty;
    private JCheckBox chckbxPerLoadedMile;
    private JCheckBox chckbxHourly;
    private JCheckBox chckbxOvertime;
    private JPanel panel;
    private JPanel panel_1;
    private JPanel panel_2;
    private JCheckBox chckbxPerMile;
    private JCheckBox chckbxPerDay;
    private JCheckBox chckbxOther;
    private JPanel panel_3;
    private JCheckBox chckbxPerCwthundred;
    private JCheckBox chckbxPercentageOf;
    private JCheckBox chckbxOther_1;
    private JTextField textField;
    private JTextField textField_1;
    private JTextField textField_3;
    private JTextField textField_4;
    private JTextField textField_6;
    private JTextField textField_7;
    private JTextField textField_8;
    private JTextField textField_9;
    private JLabel lblDenotesThat;
    private JButton btnCancel;
    private JButton btnOk;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Pay_Types window = new Pay_Types();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public Pay_Types() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 503, 285);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        panel = new JPanel();
        panel.setBorder(new TitledBorder(null, "Per Mile", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        panel.setBounds(6, 11, 166, 97);
        frame.getContentPane().add(panel);
        panel.setLayout(null);

        chckbxEmpty = new JCheckBox("Empty");
        chckbxEmpty.setBounds(102, 15, 55, 23);
        panel.add(chckbxEmpty);

        chckbxPerLoadedMile = new JCheckBox("Loaded");
        chckbxPerLoadedMile.setBounds(102, 41, 61, 23);
        panel.add(chckbxPerLoadedMile);

        chckbxOther = new JCheckBox("Other*");
        chckbxOther.setBounds(102, 67, 61, 23);
        panel.add(chckbxOther);

        textField_3 = new JTextField();
        textField_3.setBounds(10, 16, 86, 20);
        panel.add(textField_3);
        textField_3.setColumns(10);

        textField_4 = new JTextField();
        textField_4.setBounds(10, 42, 86, 20);
        panel.add(textField_4);
        textField_4.setColumns(10);

        panel_1 = new JPanel();
        panel_1.setBorder(new TitledBorder(null, "Hourly", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        panel_1.setBounds(182, 11, 297, 71);
        frame.getContentPane().add(panel_1);
        panel_1.setLayout(null);

        chckbxOvertime = new JCheckBox("Overtime");
        chckbxOvertime.setBounds(102, 40, 86, 23);
        panel_1.add(chckbxOvertime);

        chckbxHourly = new JCheckBox("Regular");
        chckbxHourly.setBounds(102, 14, 68, 23);
        panel_1.add(chckbxHourly);

        textField_6 = new JTextField();
        textField_6.setBounds(10, 15, 86, 20);
        panel_1.add(textField_6);
        textField_6.setColumns(10);

        textField_7 = new JTextField();
        textField_7.setBounds(10, 41, 86, 20);
        panel_1.add(textField_7);
        textField_7.setColumns(10);

        panel_2 = new JPanel();
        panel_2.setBorder(new TitledBorder(null, "Per Diem", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        panel_2.setBounds(0, 108, 172, 71);
        frame.getContentPane().add(panel_2);
        panel_2.setLayout(null);

        chckbxPerMile = new JCheckBox("Per Mile");
        chckbxPerMile.setBounds(102, 14, 63, 23);
        panel_2.add(chckbxPerMile);

        chckbxPerDay = new JCheckBox("Per Day");
        chckbxPerDay.setBounds(102, 40, 63, 23);
        panel_2.add(chckbxPerDay);

        textField_8 = new JTextField();
        textField_8.setBounds(10, 15, 86, 20);
        panel_2.add(textField_8);
        textField_8.setColumns(10);

        textField_9 = new JTextField();
        textField_9.setBounds(10, 42, 86, 20);
        panel_2.add(textField_9);
        textField_9.setColumns(10);

        panel_3 = new JPanel();
        panel_3.setBorder(new TitledBorder(null, "Other", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        panel_3.setBounds(182, 82, 297, 97);
        frame.getContentPane().add(panel_3);
        panel_3.setLayout(null);

        chckbxPerCwthundred = new JCheckBox("Per Hundred Weight (CWT)");
        chckbxPerCwthundred.setBounds(102, 14, 157, 23);
        panel_3.add(chckbxPerCwthundred);

        chckbxPercentageOf = new JCheckBox("Percentage of Line Haul (PLH)");
        chckbxPercentageOf.setBounds(102, 41, 169, 23);
        panel_3.add(chckbxPercentageOf);

        chckbxOther_1 = new JCheckBox("Other (Flat Rate, Percentage) *");
        chckbxOther_1.setBounds(102, 68, 189, 23);
        panel_3.add(chckbxOther_1);

        textField = new JTextField();
        textField.setBounds(10, 15, 86, 20);
        panel_3.add(textField);
        textField.setColumns(10);

        textField_1 = new JTextField();
        textField_1.setBounds(10, 42, 86, 20);
        panel_3.add(textField_1);
        textField_1.setColumns(10);

        lblDenotesThat = new JLabel("* Denotes that the amount is entered on the main screen.");
        lblDenotesThat.setBounds(85, 190, 283, 14);
        frame.getContentPane().add(lblDenotesThat);

        btnCancel = new JButton("Cancel");
        btnCancel.setBounds(390, 215, 89, 23);
        frame.getContentPane().add(btnCancel);

        btnOk = new JButton("OK");
        btnOk.setBounds(291, 215, 89, 23);
        frame.getContentPane().add(btnOk);
    }
} 
```

再一次感谢你的帮助

谢谢安德鲁，我确实忘记了这个问题....我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:00:36.600

要么制作`Pay_Types extends JFrame`要么`p.getFrame().setVisible(true);`

Pay_Types 不是 frame 类型，因此您会收到上述错误。

# java - 如何检查Java中的ArrayList中是否存在重复元素

> ID：15518107
> 
> 赞同：-2
> 
> 时间：2013-03-20T07:56:16.307
> 
> 标签：java

我有一个 ArrayList 演员。当我打印这个演员变量时，我得到这样的输出：

公羊，板球，公羊，国际象棋

我只想取一个“Ram”而不是重复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T07:57:34.243

您需要使用 a[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)而不是 a `List`。

来自文档：-

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T07:58:41.113

您可能喜欢使用`Set`而不是`ArrayList`因为它存储独特的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:20:38.283

[包含](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)

这是用于 java 文档的数组列表中可用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:04:15.910

```
ArrayList<String> values = ... //Your values
HashSet<String> uniqueValues = new HashSet<>(values);
for (String value : uniqueValues) {
   ... //Do something
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T08:05:58.027

你应该使用一个集合。具体来说，如果顺序无关紧要，我建议使用 HashSet，如果要保留到达顺序，我建议使用 LinkedHashSet。

如果出于其他原因确实需要 ArrayList，则可以通过复制到 LinkedHashSet 来删除重复项，然后再返回。这可能比排序和测试更快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T07:57:59.970

为什么要使用arraylist？使用集。

或者，如果您想知道是否有任何重复项，请使用 java.util.Collections.sort() 进行排序，然后将前一个元素与当前元素进行比较以查找重复项

或者

```
public int getNumOfDuplicates(List<Integer> dupAraay)
{ 
  Set<Integer> yourSet = new HashSet();
  int dupFound = 0;

  for (Integer yourInt : dupAraay)
  {
   if (!set1.add(yourInt))
   {
    dupFound++;
   }
  }
  return dupFound;
} 
```

# asp.net-mvc - MVC 4 - 我应该在家庭控制器中使用局部视图吗？

> ID：15518116
> 
> 赞同：1
> 
> 时间：2013-03-20T07:56:37.327
> 
> 标签：asp.net-mvc, asp.net-mvc-4, controller, partial-views

我正在学习 MVC4，试图了解控制器分离的最佳实践。到目前为止，我已经了解到为站点的每个逻辑单元配备一个控制器是件好事。

例如，如果我有一个包含评论、餐厅和评论者的餐厅评论网站，我将添加三个匹配的控制器。每个控制器都知道如何创建实体的列表视图（可能还有更多功能）。

家庭控制器目前知道如何为以下内容创建视图：“关于”、“联系我们”……
我希望它是主要的索引操作来显示前 10 名评论者/评论/餐厅。这些“前 10 名”列表的外观与专用控制器中的相应列表不同。

因此，对于评论，在文件夹Views => Reviews => _ReviewsTopTen.cshtml中创建部分视图是否是一个好习惯？

（此视图仅用于主控制器的 Index 操作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:07:40.620

首先，我会查看您的标记并决定首先需要拆分为部分视图是否足够。如果不是，那么保留在视图本身中是完全可以的。为了它而抽象事物毫无意义。

如果您确实需要局部视图并且它只能在 Home 控制器中使用，那么正确的位置是 Views > Review > _ReviewsTopTen.cshtml。

但是，如果部分中的标记与您网站的另一部分相同，并且只是 css 样式不同，那么您应该在 Views > Shared 中创建一个部分视图，以便它可以在多个控制器视图中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:35:57.273

我认为控制器逻辑分离的最佳实践是`@Html.Action()`在您的主视图中为您需要显示的每个逻辑单元使用方法。因此，例如，如果您需要在家庭控制器视图中显示 10 条评论，则类似于`@Html.Action("TopTenReviews", "Reviews(<-controller name)")`

# windows-installer - 我怎样才能得到msi的版本

> ID：15518122
> 
> 赞同：0
> 
> 时间：2013-03-20T07:57:20.073
> 
> 标签：windows-installer, version

如何获取我的 msi 版本？ ![版本](../Images/124396dea51a0d88c73d31415980721c.png)

我试过这个：

```
 private void barButtonItem_Version_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            MessageBox.Show("Version" + System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString());
        } 
```

我也尝试过：

```
 MessageBox.Show("Version: " + System.Reflection.Assembly.GetEntryAssembly().GetName().Version.ToString()); 
```

这个代码：

```
 Assembly assembly = Assembly.GetExecutingAssembly();
            FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(assembly.Location);
            string version = fvi.FileVersion;

            MessageBox.Show("Version: " + version); 
```

这个代码：

```
 string productVersion = FileVersionInfo.GetVersionInfo(Assembly.GetExecutingAssembly().Location).ProductVersion;

            MessageBox.Show("Version: " + productVersion); 
```

和这个：

```
 MessageBox.Show("Version: " + Application.ProductVersion); 
```

但它们都返回 1.0.0.0，正如您在图像上看到的那样，我的版本是 1.0.0

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:12:20.717

此版本存储在 MSI 属性表中的属性 ProductVersion 中。您可以轻松查询该表以获取属性值：[How to read MSI properties in c#](https://stackoverflow.com/questions/13950420/how-to-read-msi-properties-in-c-sharp)

# c# - 是否有“AllIndexesOf”方法？

> ID：15518124
> 
> 赞同：4
> 
> 时间：2013-03-20T07:57:27.490
> 
> 标签：c#, .net, indexof

**背景：**

我正在研究评估器（我知道有可用的解决方案，但我需要一些我需要自己实现的功能）。我需要在评估中找到所有出现的开括号。但是，为此我需要括号的所有索引。

**问题：**

是否有类似 AllIndexesOf 方法返回 a`int[]`或`IEnumerable<int>`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T07:59:11.017

没有，但您可以使用以下 LINQ 查询获取所有索引。

```
int number  = 10;
int[] intArray = new[] { 1, 32, 10, 5, 65, 6, 10, 10 };
var allIndexes = intArray.Select((r,i)=> new {value = r, index = i})
                         .Where(r=> r.value == number)
                         .Select(r=> r.index); 
```

`allIndexes`将包含`2,6 and 7`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T08:03:40.327

你也可以使用`Enumerable.Range`

```
 var indexes = Enumerable.Range(0, list.Count)
                         .Where(index => list[index] == yourValue); 
```

# php - 无法安装 bcompiler pecl 扩展

> ID：15518125
> 
> 赞同：1
> 
> 时间：2013-03-20T07:57:33.480
> 
> 标签：php, pecl, bcompiler

我已经用谷歌搜索了这个，直到我脸色发青——无论我尝试什么，我似乎都无法安装 bcompiler。

我在 Windows 上运行 xampp 1.8.1

```
# pecl install bcompiler
downloading bcompiler-1.0.2.tgz ...
Starting to download bcompiler-1.0.2.tgz (57,347 bytes)
..............done: 57,347 bytes
11 source files, building
ERROR: The DSP bcompiler.dsp does not exist. 
```

我也尝试下载扩展源并构建它，尽管这有点超出我的深度 - 然后我收到错误消息，即无法理解 msdev 的输出。

我也尝试过返回几个版本的 xampp 并且没有任何运气，但我真的希望它在 php 5.4 上运行

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-23T12:26:24.027

您可以按照以下步骤在 linux 上安装 bcompiler

```
root@linux# wget http://pecl.php.net/get/bcompiler-1.0.2.tgz

root@linux# tar -xvf bcompiler-1.0.2.tgz

root@linux# cd bcompiler-1.0.2

root@linux# phpize

root@linux# ./configure

root@linux# make

root@linux# make install

root@linux# make test 
```

最后你必须在`bcompiler.ini`里面 创建一个ini文件

```
/etc/php5/apache2/conf.d 
```

并添加这一行

```
extension=bcompiler.so 
```

最后重新启动您的网络服务器

会正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T12:29:53.260

[只需从http://pecl.php.net/package/bcompiler](http://pecl.php.net/package/bcompiler)下载文件

行动： - 只要确保，你阅读输出，在某一时刻，它会告诉你 bcompiler.so 文件已保存在哪里。

```
root@linux# wget http://pecl.php.net/get/bcompiler-1.0.2.tgz
root@linux# tar -xvf bcompiler-1.0.2.tgz
root@linux# cd bcompiler-1.0.2
root@linux# phpize
root@linux# ./configure
root@linux# make
root@linux# make install
root@linux# make test 
```

如果没有出现任何问题，则必须将 bcompiler.so 文件放在“ext”目录中。

如果一切正常，现在开始使用你的 bcompiler :)

# javascript - 为什么 ie 请求 UI 的 html 两次？

> ID：15518136
> 
> 赞同：1
> 
> 时间：2013-03-20T07:58:15.923
> 
> 标签：javascript, internet-explorer, http, http-headers

我正在开发一个客户端服务器应用程序，在该应用程序中，我们通过 URL：http:\[服务器的 IP]：[端口号] 在我们的 pc 上打开客户端。客户端的 GUI 分为多个部分，在左侧窗格中禁用右键单击。

我们的一位客户遇到了错误（Java script error at line:36,char:3,Error:object expected,code:0,URL:http:\localhost:6741/content.html），所以右键点击可以左窗格也产生错误。错误线是

html.append(" writeAppletObject('appdiv', '").append(getParameter("javaclsid")).append("', '2048', '2048', 'ContentGeneratorApplet', 'ContentGeneratorApplet', 内部);"这个错误的原因可能是什么？客户说他们第一次成功打开它，但之后每次尝试他们都会收到这个错误......

注意：我的应用程序使用 IE 中提到的 URL 启动，并且会出现一个弹出窗口，我们在其中执行应用程序和原始窗口的每个操作，我们可以关闭它们，因为它们仅用于启动。我的客户使用的是 IE8，操作系统是 Xp。

我比较了 iehttpheader 的成功和不成功尝试，我注意到在这两种情况下都发出了两次 GET /content.html HTTP/1.1 和 GET /startNSM.html HTTP/1.1(部分 ui) 请求。在成功尝试第二次请求时，它被提供，但在失败的情况下，GET /startNSM.html HTTP/1.1 在第一个请求中提供，我们在 content.html 中得到提到的错误。注意：GET /content.html HTTP/1.1 未在第一个请求中提供，并在第二个请求中导致错误。

任何帮助将不胜感激......在此先感谢

# sqlite - 是否可以使用 Flash 播放器插件而不是 AIR 将数据保存到 sqlite？

> ID：15518137
> 
> 赞同：0
> 
> 时间：2013-03-20T07:58:21.550
> 
> 标签：sqlite, air, local-storage, flash

我们有一个 Flash 网络应用程序。我们认为使用本地存储来提高性能和响应能力。LSO 不及 sqlite。AIR 在产品方面对我们来说太远了，因此想问一下 Flash 播放器是否已经发展到包括来自浏览器的 sqlite 本地存储，比如 HTML5 可以访问......干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:31:53.760

如果你愿意通过 JS 我认为你是在正确的轨道上。

请参阅：[Javascript + HTML5 本地存储](https://stackoverflow.com/questions/2800238/javascript-html5-localstorage)

# .htaccess - 在 TYPO3 中使用 .htaccess 隐藏重定向 / 到子文件夹

> ID：15518139
> 
> 赞同：1
> 
> 时间：2013-03-20T07:58:34.777
> 
> 标签：.htaccess, rewrite, typo3

我们正在设置 TYPO3 安装，如果用户调用**example.com/**，我们希望服务器重定向到**/typo/index.php?id=106**。

这应该在不更改地址栏的情况下发生。服务器上的所有其他文件访问（例如 example.com/test.png）都应重定向到 example.com/typo/test.png）。

这是根目录中的 .htaccess 文件。据我了解，它会将 URL 中没有**/typo**的所有内容重定向到子文件夹并附加参数：

```
RewriteCond %{REQUEST_URI} !^/typo/
RewriteRule ^(.*)$ typo/$1 [L] 
```

现在，这似乎已经奏效了，当我调用 example.com/index.php?id=106 时，我没有得到 404。不幸的是，TYPO3 似乎有一些问题（或者 .htaccess 配置不正确），因为我们收到一条消息“未指定输入文件”。

还缺少的是未指定路径时的初始重定向。然后它应该转到 /typo/index.php?id=106。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T08:15:24.800

您可以在根目录中的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

# URL with no path
RewriteCond %{REQUEST_URI}  ^/?$        [NC]
RewriteCond %{REQUEST_URI}  !index\.php [NC]
RewriteRule .*  /typo/index.php?id=106  [NC,L]

# URL with path    
RewriteCond %{REQUEST_URI}  !^/typo     [NC]
RewriteRule ^(.+)  /typo/$1             [NC,L] 
```

静默地图：

`http://domain.com/`至

`http://domain.com/typo/index.php?id=106`

和

`http://domain.com/anything`

`http://domain.com/typo/anything`

对于永久重定向，将 [NC,L] 替换为 [R=301,NC,L]

# linux - 我在用 g++ 编译时遇到很多错误

> ID：15518142
> 
> 赞同：-1
> 
> 时间：2013-03-20T07:58:52.453
> 
> 标签：linux, g++

我需要创建一个可以在 Windows 和 Linux 上运行、使用 SQLite 并用 C++ 编写的应用程序。我正在学习如何在 C++ 中使用 SQLite，所以我制作了一个简单的 SQLite 包装器来执行查询，您可以检索结果。

我使用 Visual Studio 2010 编写了这个应用程序，但我没有使用任何 .NET 库或任何可能与 Windows 相关的东西。

该程序在 Windows 上编译并且可以工作，但是当我将它转移到 linux 时，除了 SQLite 库之外的所有东西都可以编译；我正在运行 arch 并使用 gcc v4.7.2。

为了包含 SQLite 库，我去了 SQLite 下载页面并下载了[Source Code](http://www.sqlite.org/download.html)。我提取`sqlite3.c`并`sqlite3.h`包含`sqlite3.h`在我的课程中。

这是我为编译代码而给出的命令：`g++ sqlite3.c DatabaseConnection.cpp SQLiteExample.cpp`

由于有一些代码和很多错误，我将在这里链接它们：

*   [所有的错误](http://pastebin.com/7cDdjh1g)
*   [我的代码的链接](https://github.com/samwell/SQLiteExample)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:14:20.053

使用这个 Makefile：

```
FLAGS=-Wall -Werror
LIBS=-lpthread -ldl
all: sqlite3.o
        g++ $(FLAGS) sqlite3.o DatabaseConnection.cpp SQLiteExample.cpp $(LIBS)  

sqlite3.o:
        gcc $(FLAGS) sqlite3.c -c 
```

# java - Maven：javaee-api 与 jboss-javaee-6.0

> ID：15518148
> 
> 赞同：13
> 
> 时间：2013-03-20T07:59:05.540
> 
> 标签：java, maven, jboss, dependencies, java-ee-6

我想要一个用 maven 构建的 Java JEE6 项目，并且我想要它是*标准的*

所以，我把它放在我的 pom.xml 中：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

像这样的项目，它应该在每个兼容的 JEE6 容器中运行（jboss、geronimo、glashfish 等）

那么，为什么这个jboss依赖存在呢？

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>3.0.2.Final</version>
    <scope>provided</scope>
 </dependency> 
```

如果我使用它，我是否与 jboss 绑定，所以我只能将这个服务器与这个应用程序一起使用？

总是使用标准的 javaee-api 不是更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T08:16:50.757

标准 api 被削弱，即缺少方法体。测试时会出现这种情况。我曾经遇到过这个陷阱，对它不是很满意。

因此，建议使用另一个包作为参考。

您可以仔细查看[Adam Biens 博客](http://www.adam-bien.com/roller/abien/entry/trouble_with_crippled_java_ee)

如果您确实需要，您还可以为不同的部署环境制作配置文件。但是，基本上我同意，可悲的是，这不是一个非常愉快的情况。

对于测试问题，您可以查看[此线程](https://stackoverflow.com/questions/2116220/how-can-i-use-different-jars-for-compiling-and-testing-in-maven)。

编辑：
顺便说一句，因为现在这可能很有趣。**Java EE 7**的 javaee-(web-)api 的这个问题已经消失（[源](http://www.adam-bien.com/roller/abien/entry/javaee_7_heals_crippled_jars)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-25T04:36:14.887

java-api依赖的第一个解决方案是正确的方法：理想情况下你的应用程序不应该关心它工作的服务器环境。对于单元测试，您可以使用[Arquillian](http://arquillian.org/)，它可以帮助您在“家”中测试企业 bean 而不会感到头疼。如果您使用的是 jboss-javaee，您确定您的应用程序将在另一台服务器上部署并正常工作，而不是 jboss？

# templates - Magento 如何制作我自己的基于管理员的自定义模板？

> ID：15518149
> 
> 赞同：1
> 
> 时间：2013-03-20T07:59:09.583
> 
> 标签：templates, magento-1.7

我是magento的新手。我想在 magento 中开发自己的自定义模板。我想在管理面板中进行一些自定义设置以更改主题的外观，例如更改颜色或上传徽标等。所以有人可以告诉我是否有任何可用的文档或任何引用的链接？任何帮助和建议都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:16:43.343

看看这个链接[http://www.silksoftware.com/magento-module-creator](http://www.silksoftware.com/magento-module-creator)

在底部附近，您有 Magento 系统配置部分，您可以使用它创建一个模块来处理整个站点的所有管理设置。这是迄今为止学习如何设置模块的最佳方式，尤其是涉及管理设置的复杂模块。

但是会有你想要的插件，所以首先检查 Magento 连接，并且有一些用于旧版 Magento 安装的免费主题，其中包括用于自定义主题的类似自定义插件，如果你可以挖掘它们，你可以将它们用作潜在参考（对不起我手头没有任何示例，因为我使用购买的主题来学习）。

# c# - 从服务中注销

> ID：15518153
> 
> 赞同：1
> 
> 时间：2013-03-20T07:59:50.463
> 
> 标签：c#, wcf

我目前以这种方式使用用户名和密码登录：

```
var client = new ServiceReference.CalcServiceClient();
client.ClientCredentials.UserName.UserName = "test";
client.ClientCredentials.UserName.Password = "test";
client.DoWork(); 
```

这工作正常。现在，我想添加一种注销方式（用户按下按钮，应该以某种方式发送注销请求）。

这是可能的吗？如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:09:18.213

如果 WCF 配置为 PerSession，a`client.Close();`将完成这项工作。

该过程将是：

*   客户端创建 WCF 服务的代理并进行方法调用。
*   创建了一个 WCF 服务实例，它为方法响应提供服务。
*   客户端在同一会话中再进行一次方法调用。
*   相同的 WCF 服务实例为方法调用提供服务。
*   当客户端完成其活动时，WCF 实例将被销毁并提供给垃圾收集器进行清理。

使用 Close 您将触发垃圾收集器清理。

如果 WCF 配置了 PerCall，则无需担心 Close/Logof。我建议始终执行显式关闭（和使用），但在这种情况下并不是真正必要的。

如果 WCF 配置为 SingleInstance... 好吧，也许你做错了:) 无论如何，你应该继续使用 Close()。

# c# - 如何在 Visio 2013 加载项中添加自定义面板？

> ID：15518156
> 
> 赞同：5
> 
> 时间：2013-03-20T08:00:02.653
> 
> 标签：c#, ms-office, visio, office-addins

最近，我编写了一个 Outlook 插件，其中包含用于额外功能区、上下文菜单等的ribbon.xml 文件。我还添加了一个停靠在窗口右侧的额外面板。

现在我开始研究如何为 Visio 创建加载项。Ribbon.xml 实际上是相同的，所以这根本不是问题。但是，当打开 Visio 文档时，我似乎找不到任何添加自定义面板的方法。

到目前为止，我在 Visio 中有这个以了解文档是否已打开/创建/更改：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    MessageBox.Show("Visio Add-In V1");
    Globals.ThisAddIn.Application.DocumentChanged += new Visio.EApplication_DocumentChangedEventHandler(docChanged);
    Globals.ThisAddIn.Application.DocumentOpened += new Visio.EApplication_DocumentOpenedEventHandler(docChanged);
    Globals.ThisAddIn.Application.DocumentCreated += new Visio.EApplication_DocumentCreatedEventHandler(docChanged);
}

private void docChanged(Visio.Document doc)
{
    MessageBox.Show("Document loaded");
} 
```

在 Outlook 中，我会这样做来添加一个自定义面板（简化）：

```
MyPanel ctrl = new MyPanel();
Microsoft.Office.Tools.CustomTaskPane ctp = Globals.ThisAddIn.CustomTaskPanes.Add(ctrl, title);
ctp.Visible = true;
ctp.Width = 300;
ctp.DockPosition = Microsoft.Office.Core.MsoCTPDockPosition.msoCTPDockPositionRight; 
```

现在我如何能够在 Visio 2013 加载项中执行此操作？

**编辑：**

不幸的是，这让我认为这是不可能的：http: [//msdn.microsoft.com/en-us/library/vstudio/bf08984t.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bf08984t.aspx)

**编辑2：**

以下答案应该有效：[Visio VSTO 中是否提供任务窗格？](https://stackoverflow.com/questions/5246213/are-task-panes-available-in-visio-vsto)

但是，我似乎找不到在主窗口上获取停靠面板的方法。这是我尝试过的：

```
Globals.ThisAddIn.Application.Windows.Add("testpanel", VisWindowStates.visWSDockedLeft, VisWinTypes.visStencilAddon, null, null, null, 300); 
```

这会添加窗口，就好像它是一个新的绘图......

**编辑3：**

Visio 对此表示我有一个无效的窗口类型会引发 COM 异常。

```
Application.Windows.Add("testpanel", VisWindowStates.visWSDockedRight, VisWinTypes.visAnchorBarAddon, null, null, 300); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:19:02.730

您可以在 Visio 中使用锚条，而不是任务窗格 如果您下载 Visio SDK 并查看代码示例库，您将在用户界面下找到锚条用法。

为了完整起见，您可能希望查看此 MSDN 文章 Windows.Add Method (Visio) - [http://msdn.microsoft.com/en-us/library/office/ff767674.aspx](http://msdn.microsoft.com/en-us/library/office/ff767674.aspx)

# mysql - 从 Lift 应用程序连接 MySQl

> ID：15518157
> 
> 赞同：1
> 
> 时间：2013-03-20T08:00:04.713
> 
> 标签：mysql, scala, lift

我正在使用与 Eclipse 集成的 Lift webframe 工作。我从 github 下载了一个示例应用程序，并使用 OnSubmit 概念处理了一些表单。现在我正在尝试将我的应用程序与 MySQL 连接以存储我的登录凭据。我在 boot.scala 配置中给出了以下代码，并添加了 jdbc 驱动程序。但我不知道出了什么问题。它不工作。任何人都可以给出一个想法。提前谢谢。

```
Class.forName("com.mysql.jdbc.Driver")

def connection = DriverManager.getConnection(
        "jdbc:mysql://localhost/scalatest",
        "username", "pass") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:22:13.743

失败的最可能原因是在mysql的某个地方。它在工作吗？3306端口是否开放？

另外，如果我没记错的话，mysql 的正确地址应该是 jdbc:mysql://localhost:3306/scalatest （但我可能错了——检查一下。）

# ibatis - Mybatis返回一个字符串而不是List of String

> ID：15518162
> 
> 赞同：1
> 
> 时间：2013-03-20T08:00:27.460
> 
> 标签：ibatis, mybatis

我有一个直截了当的查询，例如，

```
Select emp_Name from Employee where empID=123 
```

我怎样才能得到 return 作为 only`String`而不是`List<String>`，因为这里这个查询将只返回一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:29:04.850

将映射器接口中方法的返回类型更改为`String`. 这将只返回值，或者`null`如果没有条目。

# sas - SAS Proc IML：循环填充矩阵

> ID：15518170
> 
> 赞同：0
> 
> 时间：2013-03-20T08:00:55.803
> 
> 标签：sas, sas-iml

我有以下代码在 MATLAB 中运行良好，我可以在 SAS/PROC IML 中转置：

```
[row col] = size(coeff);

A_temp    = zeros(row,col);
for i = 1: row/6            
    A_temp(6*(i-1)+1:6*i,:) = coeff(6*(i-1)+1:6*i,4:col);end; 
```

在 Proc IML 中，我执行以下操作：

```
proc iml;
  use i.coeff;
  read all var {...} into coeff;
  print coeff;

row=NROW(coeff);
print row;
col=NCOL(coeff);
print col;
A_temp=J(row,col,0); *create zero matrix;
print A_temp;

Do i=1 TO row/6;
A_temp[(6*(i-1)+1):(6*i),]=coeff[(6*(i-1)+1):(6*i),(4:col)];
END;
quit; 
```

代码在 DO 循环处发生故障“（执行）矩阵不符合操作。”......为什么？如果我在 PROC IML 中理解正确，如果我希望选择所有列（在 MATLAB 中这将是“：”），但在 SAS IML 中我只是将其留空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:43:14.940

您应该正确指定它。A[rows,] 表示 A 的所有列，而不是任意数量的列。请参阅此简化示例：

```
proc iml;
/*  use i.coeff;
  read all var {...} into coeff;
  print coeff;
*/
coeff = J(15,10,3);
row=NROW(coeff);
print row;
col=NCOL(coeff);
print col;
A_temp=J(row,col,0); *create zero matrix;
print A_temp;

Do i=1 TO row;
* does not work; *A_temp[i,]=coeff[i,(4:col)];
A_temp[i,1:col-3]=coeff[i,(4:col)];
END;
quit; 
```

# extjs - ExtJS4 图表中的多个时间线系列与一个商店

> ID：15518172
> 
> 赞同：0
> 
> 时间：2013-03-20T08:00:59.237
> 
> 标签：extjs, extjs4.1

来自服务器的数据如下所示：

```
[
  { date: 123456789, browser: 'firefox', clicks: 123, ... },
  { date: 123456789, browser: 'chrome' , clicks: 456, ... },
  { date: 123456790, browser: 'firefox', clicks: 678, ... },
  { date: 123456790, browser: 'chrome' , clicks: 453, ... },
  { date: 123456791, browser: 'firefox', clicks: 234, ... },
  { date: 123456791, browser: 'chrome' , clicks: 555, ... },
  ...
] 
```

我从中生成我的模型，将它们打包到商店中并在网格中显示它们，效果很好。

但现在我想为这个表显示一个时间线图，它应该为每个浏览器都有一个系列。

可以过滤系列吗？

像这样的东西：

```
series: [
  {
    type  : 'line', 
    title : 'Chrome',
    xfield: 'clicks',
    yfield: 'date',
    filter: { browser: '*chrome*' }
  }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:12:49.180

您只能过滤商店，但当您过滤商店时，您的网格也会被过滤。您可以制作商店的副本，或使用来自第一个商店的过滤数据创建一个新商店。

# android - 致命异常主要（无法启动活动）原因：java.lang.NullPointerException

> ID：15518173
> 
> 赞同：0
> 
> 时间：2013-03-20T08:00:59.737
> 
> 标签：android, textview, settext

我是 android 的菜鸟，当我尝试 settext 或 setcolor 或之前工作的任何东西时，我遇到了一个奇怪的异常

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        pageNoSeek = (SeekBar)findViewById(R.id.pageNoSeekBar);
        pageNotv = (TextView)findViewById(R.id.pageNotv);
        nextButton=(ImageButton)findViewById(R.id.leftButton);
        backButton=(ImageButton)findViewById(R.id.rightButton);
        mainText = (TextView)findViewById(R.id.mainText);
        mainText.setTextColor(Color.RED);
} 
```

如上面的代码所示，没有什么不寻常的..实际上我之前在另一台机器上使用过相同的代码..如果我添加了它，它会在 setTextColor 或 setTextSize 处出错..

```
> 03-20 07:55:17.552: E/AndroidRuntime(1718): FATAL EXCEPTION: main
03-20 07:55:17.552: E/AndroidRuntime(1718): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thedarkdimension.keyboardShortcut/com.thedarkdimension.keyboardShortcut.StoryViewController}: java.lang.NullPointerException
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.os.Looper.loop(Looper.java:137)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at java.lang.reflect.Method.invoke(Method.java:511)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at dalvik.system.NativeStart.main(Native Method)
03-20 07:55:17.552: E/AndroidRuntime(1718): Caused by: java.lang.NullPointerException
03-20 07:55:17.552: E/AndroidRuntime(1718):     at com.thedarkdimension.keyboardShortcut.StoryViewController.getNextPage(StoryViewController.java:95)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at com.thedarkdimension.keyboardShortcut.StoryViewController.connectToDB(StoryViewController.java:84)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at com.thedarkdimension.keyboardShortcut.StoryViewController.onCreate(StoryViewController.java:47)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.Activity.performCreate(Activity.java:5104)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-20 07:55:17.552: E/AndroidRuntime(1718):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-20 07:55:17.552: E/AndroidRuntime(1718):     ... 11 more 
```

我无法得到它..任何人都可以帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:06:40.603

从您的代码片段`onCreate`看来，您似乎没有调用`setContentView`. 出于这个原因，所有的调用都`(X)findViewById(R.id.x);`返回 null，因此当您尝试对变量进行操作时，您会得到一个空指针异常。[mainText 为空，因为未找到视图]。

**解决方案：**先 调用`setContentView`，然后初始化你的变量，然后做剩下的事情

# windows - 如何在 windows phone 7 中绑定来自 xml 文件的动态多列表数据？

> ID：15518176
> 
> 赞同：1
> 
> 时间：2013-03-20T08:01:30.900
> 
> 标签：windows, linq, windows-phone-7, c#-4.0, linq-to-xml

嗨，我正在使用下面给出的 xml 文件，我尝试了很多代码来从 xml 文件中获取多个列表，但我无法获得。

```
<?xml version="1.0" encoding="utf-8" ?>
  <root>
    <Categories>
      <Category name="Photos">
        <Articles>
          <article  title="Sherawat's">
            <Description>
               Hottie Sherawat 
            </Description>
            <FullContent>
             <style> img {padding:2px;} </style><p> <img alt=" Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_mallika-sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p> <p>Sherawat is all set to begin shooting for&nbsp;<em>Dirty Politics</em>&nbsp;where she plays Bhanwari Devi, a nurse whose murder hit the headlines last year. Meanwhile, she gets talking on&nbsp;Hollywood where she has not really had any meaty roles.</p>
            </FullContent>
            <thumb_image>
              <image  url="http://sss.com/Photo1.jpeg"/>"/>
            </thumb_image>
        </article>
        <article articleid="2684" title="Steals the Mai Show">
        <Description>
           <p> Actor Hrithik Roshan has always nursed a dream of working with acclaimed Director Kapur.</p>
        </Description>
       <FullContent>
        <div id="container" class="cf">
           <link rel="stylesheet" href="http://sss.com/imageslider/app/css/demo.css" type="text/css" media="screen" /> 
         <link rel="stylesheet" href="http://sss.com/imageslider/app/css/flexslider.css" type="text/css" media="screen" /> 
                 <div id="main" role="main"> <section class="slider"> <div class="flexslider"> <ul class="slides">
                   <li>Sonam Kapoor<img src="http://sss.com//website/var/tmp/thumb_5814_1_01feb2013__appfeed.jpeg" alt="Kapoor"/></li>
          </ul>
          </li>
         </div>
       </FullContent>
       <thumb_image>
            <image  url="http://Photo2.jpeg"/>"/>
       </thumb_image>
     </article>
 </Articles>
 </Category>
 <Category name="Videos">
<Articles>
   <article articleid="415" title=" Dirty Politics">
      <Description>
         Sherawat speaks about the men whom she’s over the moon about
      </Description>
      <FullContent>
        <style> img {padding:2px;} </style><p> <img alt="Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://sss.com/bolly/feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p>
      </FullContent>
      <thumb_image>
        <image  url="http://Video1.jpeg"/>"/>
      </thumb_image>
    </articles>
    <article articleid="68" title="Digital!">
     <Description>
         <p> Touch, tap, flip, slide! You don&#39;t, you experience it.</p>
      </Description>
      <FullContent>
        <p> Touch, tap, flip, slide! You don&#39;you experience it.</p> <br/><br/><br/> <br/><br/>
      </FullContent>
      <thumb_image>
        <image  url="http://Video2.jpeg"/>"/>
      </thumb_image>
    </article>
 </Article>
</Category>
 <Category name="Bolly">
   <Articles>
     <article articleid="415" title="upcoming movie">
       <Description>
           the men whom she’s over the moon about
       </Description>
       <FullContent>
        <style> img {padding:2px;} </style><p> <img alt="Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://sss.com/bolly/feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p>
      </FullContent>
       <thumb_image>
         <image url="http://sss.com/website/var/tmp/thumb_5854_90_mallika-sherawat_thumb_bolly__forfeed.jpeg"/>
       </thumb_image>
       </articles>
       <article articleid="436" title="Surprise Package">
         <Description>
           There was more than just good music at the trio's recent performance
         </Description>
         <FullContent>
           <style> img {padding:2px;} </style><p> <img alt="Akcent" pimcore_disable_thumbnail="true" pimcore_id="6110" pimcore_type="asset" src="http://dev2.mercuryminds.com/global/feb2013/surprise-package-at-akcent-concert/18_akcent_global.jpg" style="width: 370px; height: 500px; float: left;" /></p>
         </FullContent>
         <thumb_image>
           <image url="http://sss.com/website/var/tmp/thumb_6109_18_akcent_thumb__forfeed.jpeg"/>
         </thumb_image>
       </article>
    </Article>
 </Category>
 </Categories>
</root> 
```

我的 MainPageXaml.cs 代码

```
 public MainPage()
    {
        InitializeComponent();

        WebClient downloader = new WebClient();
        Uri uri = new Uri("http://sss.com/webservices/new_feed_articls.xml", UriKind.Absolute);
        downloader.DownloadStringCompleted += new DownloadStringCompletedEventHandler(NotchsDownloaded);
        downloader.DownloadStringAsync(uri);
    }

  void NotchsDownloaded(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Result == null || e.Error != null)
        {
            MessageBox.Show("There was an error downloading the XML-file!");
        }
         else
         {
             ParseXMLFile(e.Result);
         }
    }

    void ParseXMLFile(string  dataInXmlFile)
    {
        try
        {
          //Parsing XML File

            XDocument xmlDoc = XDocument.Parse(dataInXmlFile);

            var query = from l in xmlDoc.Descendants("Category")
                        select new Data
                        {
                            name = (string)l.Attribute("name").Value,
                            Titles = l.Element("Articles").Elements("article")
                                     .Select(s => s.Attribute("title").Value)
                                     .ToList(),

                            Image = l.Element("Articles").Elements("article")
                                     .Elements("thumb_image").Elements("image")
                                     .Select(x => x.Attribute("url").Value).ToList()
                        };
                    foreach (var result in query)
                    {
                      Console.WriteLine(result.name);
                         foreach (var detail in result.Titles)
                         {
                           Console.WriteLine(detail);
                         }
                     }
                     List.ItemsSource = query.ToList();

        }
        catch(Exception e)
        {
        }

    } 
```

我的班级档案

```
public class Data
{

    [XmlAttribute("name")]
        public string name { get; set; }

    [XmlAttribute("title")]
    public List<string> Titles { get; set; }

    [XmlAttribute("url")]
    public List<string> Image { get; set; }

    [XmlElement("Description")]
    public string Description { get; set; }

    [XmlElement("FullContent")]
    public string FullContent { get; set; }

}

[XmlRoot("root")]
public class DataArray
{
    [XmlArray("Categories")]
    [XmlArrayItem("Category")]
    [XmlArrayItem("Articles")]
     [XmlArrayItem("article")]
    public ObservableCollection<Data> Collection { get; set; }
} 
```

我的 XAML 文件

```
<ListBox x:Name="List" ItemsSource="{Binding}"
           Margin="0,-0.25,2,-6" Grid.Row="3" HorizontalAlignment="Right" Width="478" d:LayoutOverrides="VerticalMargin" Grid.RowSpan="2">
        <ListBox.ItemTemplate>
            <DataTemplate>
                  <StackPanel Margin="0,0,0,0"  Orientation="Vertical" Grid.ColumnSpan="2" Grid.RowSpan="3" x:Name="ControlsPanel"
                        Grid.Column="0"
                        Height="160"
                        VerticalAlignment="Top">
                        <StackPanel Background="#eb2427" Orientation="Vertical">
                            <TextBlock Grid.Row="1"  FontFamily="Calibri" FontSize="34" FontWeight="Bold"  FontStyle="Normal" Margin="10,0,0,0"
                                Text="{Binding name}" 
                                   />               
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Grid.Row="1" FontFamily="Calibri" FontSize="32" Foreground="#a7a9ac" Width="Auto"
                                Text="{Binding Titles}" TextWrapping="Wrap" ScrollViewer.HorizontalScrollBarVisibility="Visible"/>
                        </StackPanel>
                        <StackPanel>
                                <Image Source="{Binding Image}" Width="Auto"></Image>
                        </StackPanel>
                    </StackPanel>       
            </DataTemplate> 
        </ListBox.ItemTemplate>
    </ListBox> 
```

我尝试了很多代码，但我得到了相同的结果。输出没有变化。我在我的输出屏幕短裤下面给出

![在此处输入图像描述](../Images/9f7d57ca1ed5f11b2c33c59a2b3bd0d6.png)

我想要像这样的输出

![在此处输入图像描述](../Images/fbae1294402e6a291643ec4f192ade61.png)

嗨，我尝试了很多东西，但很长时间都无法解决这个问题。所以现在我告诉你我的期望。请任何人考虑我的问题并给我任何代码来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:47:04.370

您必须`ListBox`在您的`ListBox.ItemTemplate`, 而不是该部分中创建另一个：

```
 <StackPanel Orientation="Horizontal">
                        <TextBlock Grid.Row="1" FontFamily="Calibri" FontSize="32" Foreground="#a7a9ac" Width="Auto"
                            Text="{Binding Titles}" TextWrapping="Wrap" ScrollViewer.HorizontalScrollBarVisibility="Visible"/>
                    </StackPanel>
                    <StackPanel>
                            <Image Source="{Binding Image}" Width="Auto"></Image>
                    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:30:15.833

首先，将 Image 属性重命名为 Images，因为它是一个图像列表，而不是单个图像。

然后，在 XAML 代码中，将该图像列表的显示方式从显示一个图像调整为多个图像。这与显示集合的方式相同 - 通过使用 ListBox（或其他适当的 ItemsControl）。将 XAML 更改为：

```
<ListBox ItemsSource="{Binding Image}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}" Width="Auto"></Image>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这将显示一个图像列表，而不是显示一个包含一个图像的 StackPanel。但它将垂直而不是水平显示它们。查看以下线程以获取更多信息：[如何让水平列表框在 WP7 中水平滚动？](https://stackoverflow.com/questions/4581380/how-do-i-get-a-horizontal-listbox-to-scroll-horizontally-in-wp7).

# java - 如何在 Java 中使用循环和平均值

> ID：15518190
> 
> 赞同：-4
> 
> 时间：2013-03-20T08:02:32.900
> 
> 标签：java, loops

我的程序应该找到学生的女性、男性和总平均 GPA 的平均值。还有女性、男性和学生总数。首先它询问学生是男性还是女性。如果您选择男性，它会执行循环，但在结束之后。我希望我的程序直接进入下一个选择。例如，如果您选择男性，您将输入女性，反之亦然。

```
import java.util.Scanner;
public class practice {
  public static void main(String [] args) {
    Scanner keyboard = new Scanner (System.in);
    int maleCount=0, femaleCount=0, totalStudents;
    double GPA, mTotal = 0, mAverage, fTotal = 0, fAverage, allAverage;

    System.out.println("Is the student Male or Female?");
    System.out.println("Enter M for male or F for female.");
    String student = keyboard.next().toUpperCase();
    System.out.println("Enter GPA");
    GPA = keyboard.nextDouble();

    if (student.equals("M")) {
      while (GPA >=0) {
        mTotal = mTotal + GPA;
        maleCount++;
        GPA = keyboard.nextDouble();
      }
    }

    if (student.equals("F")) {
      while (GPA >=0) {
        fTotal = fTotal + GPA;
        femaleCount++;
        GPA = keyboard.nextDouble();
      }
    }

    mAverage = mTotal/maleCount;
    fAverage = fTotal/femaleCount;
    allAverage = mTotal + fTotal;
    totalStudents = maleCount + femaleCount;

    System.out.println("Total MALE students: " + maleCount);
    System.out.println("Total FEMALE students: " + femaleCount);
    System.out.println("Total STUDENTS: " + totalStudents);
    System.out.println("Total MALE GPA: " + mTotal);
    System.out.println("Total FEMALE GPA: " + fTotal);
    System.out.println("Total MALE Average GPA: " + mAverage);
    System.out.println("Total average: " + allAverage);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:14:21.810

> 如何在 Java 中使用循环和平均值？

好吧，我想说，就像你问题中的代码一样。只需在需要循环的部分周围添加一个循环，然后弄清楚你将如何结束循环。

其他跳出来的问题是：

*   您似乎以奇怪的顺序接受输入。

*   你计算`allAverage`不正确。再看一遍代码。问题应该很明显。

* * *

实际上，回答这个问题的困难之一是完全不清楚编写的程序应该如何表现。我们无法从您向我们展示的内容中推断出这一点。'因为你写的显然行不通……从可用性的角度来看。

如果您不理解并且无法正确解释需求，那么您将能够正确实现它们的机会不大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:21:46.837

修复了我的代码，抱歉不清楚。

```
import java.util.Scanner;
public class practice 
{
public static void main(String [] args)
{
Scanner keyboard = new Scanner (System.in);
int maleCount=0, femaleCount=0, totalStudents, count = 0;
double GPA, mTotal = 0, mAverage, fTotal = 0, fAverage, allAverage;

System.out.println("Is the student Male or Female?");
System.out.println("Enter M for male or F for female.");
String student = keyboard.next().toUpperCase();

do{
  System.out.println("Enter GPA " + student);
  GPA = keyboard.nextDouble();
if (student.equals("M"))
{
while (GPA >=0)
{
    mTotal = mTotal + GPA;
    maleCount++;
    GPA = keyboard.nextDouble();
}
student = "F";
}

else if (student.equals("F"))
{
    while (GPA >=0)
    {
        fTotal = fTotal + GPA;
        femaleCount++;
        GPA = keyboard.nextDouble();
    }
    student = "M";
}
}
while (++count < 2);

mAverage = mTotal/maleCount;
fAverage = fTotal/femaleCount;
totalStudents = maleCount + femaleCount;
allAverage = (mTotal + fTotal)/totalStudents;

System.out.println("Total MALE students: " + maleCount);
System.out.println("Total FEMALE students: " + femaleCount);
System.out.println("Total STUDENTS: " + totalStudents);
System.out.println("Total MALE GPA: " + mTotal);
System.out.println("Total FEMALE GPA: " + fTotal);
System.out.println("Total average: " + allAverage); 
```

}

# objective-c - 试图使 SplashScene (Cocos2d) 形成 Pablo Ruiz 的书，但它不起作用

> ID：15518192
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:02:46.080
> 
> 标签：objective-c, cocos2d-iphone

我将此场景添加到项目并在 ProjectRunDelegate 运行它，当方法 cFadeAndShow 启动时它下降了谁能告诉我有什么问题吗？

我使用 xCode 3.2.6 和 cocos2d 1.0.1

或者也许有人已经有工作启动场景来在游戏开始时显示一些公司的标志

谢谢

```
#import "SplashScene.h"
@implementation SplashScene

-(id) init {
    if ( (self = [super init])) {   
        [self addChild:[SplashLayer node]];

    }
    return self;
}
-(void)dealloc{
    [super dealloc];
}
@end

@implementation SplashLayer

-(id) init {
    if ( (self = [super init])) {

        self.isTouchEnabled = YES;

        NSMutableArray * splashImages = [[NSMutableArray alloc] init];
        for (int i =1; i<=2; i++) {
            CCSprite *splashImage = [CCSprite spriteWithFile:[NSString stringWithFormat:@"splash%d.png",i]];
            if (splashImage == nil) {
                CCLOG(@"splashImage is nil");
            }
            [splashImage setPosition:ccp(240,160)];
            [self addChild:splashImage];
            if (i!=1) 
                [splashImage setOpacity:0];
                [splashImages addObject:splashImage];
        }
        [self fadeAndShow:splashImages];
    }
    return self;
}

-(void) fadeAndShow:(NSMutableArray *) images{   // add the meehods

    if ([images count]<=1) {
        [images release];
        [[CCDirector sharedDirector]replaceScene:[GameScene scene]]; 
    }

    else {

        CCSprite *actual = (CCSprite *)[images objectAtIndex:0];
        [images removeObjectAtIndex:0];

        CCSprite * next = (CCSprite *)[images objectAtIndex:0];

        [actual runAction:[CCSequence actions:[CCDelayTime actionWithDuration:2], [CCFadeOut actionWithDuration:1],
                           [CCCallFuncN actionWithTarget:self selector:@selector(remove:)],nil]];
        [next runAction:[CCSequence actions:[CCDelayTime actionWithDuration:2], [CCFadeIn actionWithDuration:1],
                         [CCDelayTime actionWithDuration:2],
                         [CCCallFuncND actionWithTarget:self selector:@selector(cFadeAndShow:data:) data:images],nil]];
    }

}
-(void) cFadeAndShow:(id)sender dara:(void*)data{
    NSMutableArray * images = (NSMutableArray *) data;
    [self fadeAndShow:images];
}
-(void)remove:(CCSprite *)s{
    [s.parent removeChild:s cleanup:YES];
}
-(void)dealloc{
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:14:05.973

这是一个答案：

```
[[CCDirector sharedDirector] replaceScene: [CCTransitionZoomFlipAngular 
    transitionWithDuration:2 
    scene:[GameScene node]
    orientation:kOrientationLeftOver]]; 
```

# matlab - 特定元组的生成和计数（matlab）

> ID：15518196
> 
> 赞同：4
> 
> 时间：2013-03-20T08:02:57.253
> 
> 标签：matlab, tuples, combinatorics, multiple-conditions

我需要生成（我更喜欢 MATLAB）所有“唯一”整数元组`k = (k_1, k_2, ..., k_r)`及其相应的多重性，满足两个附加条件：

```
1\. sum(k) = n
2\. 0<=k_i<=w_i, where vector w = (w_1,w_2, ..., w_r) contains predefined limits w_i. 
```

“唯一”元组意味着它包含唯一的无序元素集 `(k_1,k_2, ..., k_r)`

```
[t,m] = func(n,w)
t ... matrix of tuples, m .. vector of tuples multiplicities 
```

典型的问题维度大约是：

```
n ~ 30, n <= sum(w) <= n+10, 5 <= r <= n 
```

（我希望存在任何多项式时间算法！！！）

```
 Example:

n = 8, w = (2,2,2,2,2), r = length(w) 

[t,m] = func(n,w)

t = 

2 2 2 2 0 

2 2 2 1 1

m = 

5

10 
```

在这种情况下，只存在两个“唯一”元组：

`(2,2,2,2,0)`具有多重性 5

有 5 个具有相同元素集的“相同”元组

```
 0     2     2     2     2

 2     0     2     2     2

 2     2     0     2     2

 2     2     2     0     2

 2     2     2     2     0 
```

和

`(2,2,2,1,1)`具有多重性 10

有 10 个具有相同元素集的“相同”元组

```
 1     1     2     2     2

 1     2     1     2     2

 1     2     2     1     2

 1     2     2     2     1

 2     1     1     2     2

 2     1     2     1     2

 2     1     2     2     1

 2     2     1     1     2

 2     2     1     2     1

 2     2     2     1     1 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:36:09.583

非常粗糙（极其无效）的解决方案。FOR 循环超过 2^nvec-1 (nvec = r*maxw) 测试样本和变量 res 的存储真的很糟糕！

该解决方案基于以下[问题](https://stackoverflow.com/questions/14848731/find-vector-elements-that-sum-up-to-specific-number-in-matlab)。

**有没有更有效的方法？**

```
function [tup,mul] = tupmul(n,w)
r = length(w);
maxw = max(w);
w = repmat(w,1,maxw+1);
vec = 0:maxw;
vec = repmat(vec',1,r);
vec = reshape(vec',1,r*(maxw+1));
nvec = length(vec);
res = [];
for i = 1:(2^nvec - 1)
    ndx = dec2bin(i,nvec) == '1';
    if sum(vec(ndx)) == n && all(vec(ndx)<=w(ndx)) && length(vec(ndx))==r
        res = [res; vec(ndx)];
    end
end
tup = unique(res,'rows');
ntup = size(tup,1);
mul = zeros(ntup,1);
for i=1:ntup
    mul(i) = size(unique(perms(tup(i,:)),'rows'),1);
end
end 
```

例子：

```
> [tup mul] = tupmul(8,[2 2 2 2 2])

tup =

     0 2 2 2 2
     1 1 2 2 2

mul =

     5
    10 
```

或相同的情况，但前两个位置的限制有所改变：

```
>> [tup mul] = tupmul(8,[1 1 2 2 2])

tup =

     1     1     2     2     2

mul =

    10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:38:50.230

这是由 Bruno Luong（现象级 MATLAB 程序员）创建的更好的算法：

```
function [t, m, v] = tupmul(n, w)
v = tmr(length(w), n, w);
t = sort(v,2);
[t,~,J] = unique(t,'rows');
m = accumarray(J(:),1);
end % tupmul

function v = tmr(p, n, w, head)
if p==1
    if n <= w(end)
        v = n;
    else
        v = zeros(0,1);
    end
else
    jmax = min(n,w(end-p+1));
    v = cell2mat(arrayfun(@(j) tmr(p-1, n-j, w, j), (0:jmax)', ...
        'UniformOutput', false));
end

if nargin>=4 % add a head column
    v = [head+zeros(size(v,1),1,class(head)) v];
end

end %tmr 
```

# c# - 使用sql事务的sql插入语句不起作用

> ID：15518197
> 
> 赞同：0
> 
> 时间：2013-03-20T08:02:59.400
> 
> 标签：c#, sql, sql-server, transactions

```
SqlConnection con = new SqlConnection(GlobalData.GetConnectionString());

string queryDepartment = null;
if (rbtnYes.Checked == true)
{
    if (rbtnMale.Checked == true)
    {
        queryDepartment = 
@"BEGIN TRY 
    BEGIN TRAN 
    insert into UserDetails 
       values('" + Convert.ToInt32(txtID.Text) + "','" + txtFullName.Text + "','" + txtPassword.Text + "','" + txtUserName.Text + "','" + cbDepartment.SelectedValue.ToString() + "','" + txtContactAddress.Text + "','" + Convert.ToInt64(txtContactNumber.Text.ToString()) + "','" + txtContactEmail.Text + "',CAST(GETDATE() AS DATE),'" + rbtnYes.Text + "',null,'" + rbtnMale.Text + "','" + Convert.ToInt64(txtSalary.Text.ToString()) + @"'); 
    insert into Users 
       values('" + GlobalData.UsersID_AddUsers + "','" + GlobalData.RoleID_AddUsers + "','" + txtUserName.Text + "','" + Convert.ToInt32(txtID.Text) + @"'); 
    COMMIT TRAN 
  END TRY 
  BEGIN CATCH 
    SELECT ERROR_NUMBER() AS ErrorNumber,ERROR_SEVERITY() AS ErrorSeverity,ERROR_STATE() AS ErrorState,ERROR_PROCEDURE() AS ErrorProcedure,ERROR_LINE() AS ErrorLine,ERROR_MESSAGE() AS ErrorMessage 
    IF @@TRANCOUNT > 0 
    ROLLBACK TRANSACTION 
  END CATCH";
    }
} 
```

我正在尝试使用 sql 事务将记录从 c# 代码插入到两个表中，但它不工作。

虽然我使用 sql 管理软件在 sql 表中插入相同的语句，但它的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:11:19.303

您的 SQL 以 a 开头，`BEGIN`但没有匹配的`END`。您不需要`BEGIN`- 删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:04:37.560

谢谢大家我自己解决了我的问题............问题是

```
 GlobalData.RoleID_AddUsers is 0.. 
```

但是由于 sql try catch 它没有向我显示错误....或捕获异常....但是当我删除 sql try catch ...然后它开始抛出异常说外键违规....和bla bla ........我根据要求调整代码......问题解决了......:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:41:24.833

既然您说没有错误出现，那么我想这是问题所在，您的条件不匹配，您介意放置一个调试点来检查您的条件是否匹配以调用您的插入函数？

```
if (rbtnYes.Checked == true)

if (rbtnMale.Checked == true) 
```

# servlets - 即使在 servlet 中发送请求后，URL 也不会改变

> ID：15518199
> 
> 赞同：1
> 
> 时间：2013-03-20T08:03:03.697
> 
> 标签：servlets, requestdispatcher

我将我的请求从登录 servlet 转发到位于教员文件夹（子文件夹）中的 FacultyHomePage.jsp....页面已显示，但 url 仍然是 /LoginServlet。为什么网址没有变化？？

```
 HttpSession sc= request.getSession();
          if(usertype==0)
          {
              sc.setAttribute("type", usertype);
              sc.setAttribute("id",id );
         rd=request.getRequestDispatcher("/faculty/FacultyHomePage.jsp");
         rd.forward(request, response);
          } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:08:02.647

`request`不会在请求调度程序中创建新对象。检查[RequestDispatcher.forward](http://docs.oracle.com/javaee/5/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)方法。

如果您想更改 URL，请使用[`response.sendRedirect(java.lang.String)`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)

# jquery - Jquery 对象索引的值

> ID：15518210
> 
> 赞同：0
> 
> 时间：2013-03-20T08:04:06.533
> 
> 标签：jquery

我有这个代码片段：

```
 var $ispan = $(window.test.document.getElementsByTagName("span"));
    for (var i=5; i<$ispan.size(); i++) {
        $('.content').append('<br>' + $ispan[i].text());
    }; 
```

所以 $ispan 包含一个跨度的集合。我正在尝试将这些跨度的特定选择附加到我的身体上。代码失败

```
$ispan[i].text() 
```

为什么这不起作用，应该如何做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:06:00.357

方括号从 jQuery 对象/集合返回特定的 DOM 节点，而不是 jQuery 对象；失败是因为本地 DOM 节点没有`text()`方法。因此，您应该使用：

```
$('.content').append('<br>' + $ispan.eq(i).text()); 
```

[概念证明](http://jsfiddle.net/davidThomas/v2AY7/1/)

请注意，在链接的“概念验证”中，我修改了附加元素的方法，将其切换为：

```
$ispan.eq(i).text('span ' + (i+1)).appendTo('.content').before('<br />'); 
```

这是因为，使用上面编写的方法（您在评论中说有效），元素`[Object object]`中的输出很多。`.content`

上述替代方法在 jQuery 对象中找到相关元素，设置其文本，将其附加到元素，然后在附加元素*之前*`.content`插入 a 。`<br />`

 *此外，您的原始选择器应该充分替换为`$('span')`，而不是过于复杂的 jQuery 包装的原生 DOM 选择器。

您在其他地方的评论中说，您需要处理一[组“特定](https://stackoverflow.com/questions/15518210/value-of-jquery-object-index/15518236#comment21978315_15518254)的”`span`元素，我假设这就是您使用 的原因`for() {...}`，您可以改为使用`:gt()`：

```
var $ispan = $("span:gt(4)");
$ispan.text(function (i) {
    return 'span ' + (i + 6);
}).appendTo('.content').before('<br />'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/v2AY7/3/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`before()`](http://api.jquery.com/before/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`:gt()`](http://api.jquery.com/gt-selector/).
*   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:07:07.713

尝试：

```
var $ispan = $('span');
$ispan.each(function(index) {
    if(index > 3)
       $('.content').append('<br>' + $(this).text());
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:10:10.043

你用 jQuery 编译了 javascript。这不是必需的。仅使用 javascript 或 jQuery。最推荐。使用 eq() 查找元素，并以 0 开始 for()。

尝试一下：

```
var ispan = $("span");
    for (var i = 0; i < ispan.length; i++) {
        $('.content').append('<br>' + ispan.eq(i).text());
    }; 
```*

# c++ - 如何更改 QTextTable 中的行高

> ID：15518211
> 
> 赞同：31
> 
> 时间：2013-03-20T08:04:07.773
> 
> 标签：c++, qt, qtextedit

我正在编写从`QTextEdit`类派生的复杂的富文本编辑器。它必须能够插入、调整大小并将各种格式应用于嵌入的表格。

我找到了设置列宽的函数（[setColumnWidthConstraints](http://qt-project.org/doc/qt-4.8/qtexttableformat.html#setColumnWidthConstraints)）。但是没有人来`change _rows_ heights`。

有什么办法可以做到这一点？

**示例代码：**

```
void CustomTextEdit::insertTable (int rows_cnt, int columns_cnt)
{
    QTextCursor cursor = textCursor ();
    QTextTableFormat table_format;
    table_format.setCellPadding (5);

    // TODO: This call just changed the frame border height, not table itself.
    //table_format.setHeight (50);

    // Setup columns widths - all is working perfectly.
    QVector <QTextLength> col_widths;
    for (int i = 0; i < columns_cnt; ++i)
        col_widths << QTextLength (QTextLength::PercentageLength, 100.0 / columns_cnt);
    table_format.setColumnWidthConstraints (col_widths);

    // ...But there is no similar function as setRowHeighConstraints for rows!

    // Insert our table with specified format settings
    cursor.insertTable (rows_cnt, columns_cnt, table_format);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T00:37:26.780

如果您只想使行*高于*其文本高度所需的高度，您可以尝试在行的第一个单元格中插入一个 0xN 透明图像（如果 Qt 不允许您执行零宽度，则为 1xN）。

也可以使用 QTextTableCellFormat::setTopPadding() 设置表格单元格的顶部填充，或者使用 QTextBlockFormat::setTopMargin() 设置顶部边距。但是填充和边距都被添加到文本布局高度AFAIK，所以它们都不是非常适合设置绝对高度。

你看过[卡利格拉](http://www.calligra.org/ "卡利格拉")吗？它的[libs/kotext 和 libs/textlayout](http://quickgit.kde.org/?p=calligra.git&a=tree)库实现了一个自定义的 QAbstractTextDocumentLayout，它对表格的支持比 QTextEdit 丰富得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T00:15:06.493

看来您可以使用 setHTML(QString) 或 insertHTML(QString) 函数来插入样式表。

> 当将此功能与样式表一起使用时，样式表将仅适用于文档中的当前块。为了在整个文档中应用样式表，请改用 QTextDocument::setDefaultStyleSheet()。

参考：[http ://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/qtextedit.html#insertHtml](http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/qtextedit.html#insertHtml)

appart from using shims ....根据[http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/richtext-html-subset.html](http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/richtext-html-subset.html)你可以设置字体宣言。

Qt 似乎针对的是 CSS2.1 规范，如下所示.. [http://www.w3.org/TR/CSS2/fonts.html#propdef-font](http://www.w3.org/TR/CSS2/fonts.html#propdef-font)

您是否尝试过在表格行中指定字体。

使用 insertHTML 传递以下字符串，其中该字符串被定义为 QString

```
<style>
table > tr {font-size: normal normal 400 12px/24px serif;}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T17:23:39.197

使用插入样式表`this->document()->setDefaultStyleSheet("css goes here");`

请参阅[http://qt-project.org/doc/qt-5.0/qtwidgets/qtextedit.html#document-prop](http://qt-project.org/doc/qt-5.0/qtwidgets/qtextedit.html#document-prop) 和[http://qt-project.org/doc/qt-5.0/qtgui/qtextdocument.html#defaultStyleSheet -支柱](http://qt-project.org/doc/qt-5.0/qtgui/qtextdocument.html#defaultStyleSheet-prop)

（链接到 Qt5 文档，但这些功能在 Qt4 中也可用。）

# android - 官方 FTDI android 驱动程序 read() 不工作

> ID：15518214
> 
> 赞同：3
> 
> 时间：2013-03-20T08:04:19.013
> 
> 标签：android, driver, ftdi

我正在使用来自[http://www.ftdichip.com/Android.htm的官方驱动程序](http://www.ftdichip.com/Android.htm)

> 03-20 13:37:52.359: WARN/FTDI(4453): 读取开始
> 
> 03-20 13:37:52.359: WARN/FTDI(4453): 6 个字节可用
> 
> 03-20 13:37:57.960:WARN/FTDI(4453): 0 字节读取
> 
> 03-20 13:37:57.960: WARN/FTDI(4453): 读完

源代码很简单：

```
public int read(byte[] buffer, int timeout) throws IOException {
    Log.w(TAG, "read starting");
    try {            
        Log.w(TAG, device.getQueueStatus() + " bytes available");
        int read = device.read(buffer);
        Log.w(TAG, read + " bytes read");
        return read;
    } finally {
        Log.w(TAG, "read finished");
    }
} 
```

即使过了一周，他们的支持部门也没有回复我。我在 Android 4.0.4 上，使用基于 Arduino Duemilanove ftdi 的板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:37:46.280

我做到了..

您**必须**按照此操作才能读取传入数据：

1.  打开后调用restartInTask()
2.  在读取之前获取可用的输入字节
3.  仅当可用字节数 > 0 时才读取

工作代码片段：

```
public int read(byte[] buffer, int timeout) throws IOException {
        params.setReadTimeout(timeout);
        Log.w(TAG, "read starting");
        try {
            int available = device.getQueueStatus();
            Log.w(TAG, available + " bytes available");

            if (available <= 0)
                return 0;

            int read = device.read(buffer, available, timeout);
            Log.w(TAG, read + " bytes read");
            return read;
        } finally {
            Log.w(TAG, "read finished");
        }
    } 
```

# qt - 使用 QSettings 保存 QLineEdit 文本的示例

> ID：15518215
> 
> 赞同：-2
> 
> 时间：2013-03-20T08:04:20.070
> 
> 标签：qt, qlineedit, qsettings

我可以得到一行代码来保存 QLineedit 的文本并在重新启动应用程序时检索它吗？请帮忙，这对我的项目非常重要……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:28:03.203

```
 //read 
 QSettings settings("settingName");
 QString aValue=settings.value("aKey").toString();

 //write
 QSettings settings("settingName");
 QString somevalue=textedit.text();
 settings.setValue("aKey",somevalue); 
```

# python - 如何将日期字符串转换为时间戳？

> ID：15518223
> 
> 赞同：0
> 
> 时间：2013-03-20T08:05:05.567
> 
> 标签：python, django, time

我想转换一个日期字段（取自 PostgreSQL 字符串）

```
"2009-02-13 15:31:30.123000" 
```

到一个 UNIX 时间戳，如

```
1234567890.123 
```

精度在毫秒级。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:12:52.003

您可以使用 datetime.datetime.strptime(some_datetime_string, '%Y-%m-%d %H:%M:%S.%f') 解析日期时间字符串。

然后使用这个答案[Python Create unix timestamp in the future 五分钟](https://stackoverflow.com/questions/2775864/python-datetime-to-unix-timestamp)将 datetime.datetime 转换为 unix 时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:19:15.623

首先，将其转换为`datetime`对象：

```
>>> import datetime
>>> date = datetime.datetime.strptime("2009-02-13 15:31:30.123000", 
...                                   "%Y-%m-%d %H:%M:%S.%f")
>>> date
datetime.datetime(2009, 2, 13, 15, 31, 30, 123000) 
```

然后，将其转换为时间戳：

```
>>> import time
>>> t = time.mktime(date.timetuple())
>>> t
1234535490.0 
```

现在，添加微秒：

```
>>> t += date.microsecond/1000000.0
>>> t
1234535490.123 
```

或者，如果您想丢弃不到一毫秒的任何内容：

```
>>> t += int(date.microsecond/1000)/1000.0 
```

（`int()`在 Python 2 中不需要转换，但为了与 Python 3 兼容而留在这里）。

# xslt - xslt 前兄弟中的重复

> ID：15518226
> 
> 赞同：1
> 
> 时间：2013-03-20T08:05:08.857
> 
> 标签：xslt

我有下面的 xml 文档。

```
<toc-div>
<toc-item>
    <toc-title>CHAPTER 1 INTRODUCTION</toc-title>
    <toc-subitem num="1.">
        <toc-title>The British Virgin Islands</toc-title>
        <toc-pg>1.001</toc-pg>
    </toc-subitem>
    <toc-subitem num="2.">
        <toc-title>History and early constitutional developments</toc-title>
        <toc-pg>1.003</toc-pg>
    </toc-subitem>
    <toc-subitem num="3.">
        <toc-title>Development as a financial centre</toc-title>
        <toc-pg>1.008</toc-pg>
    </toc-subitem>
    <toc-subitem num="4.">
        <toc-title>Common Law and Equity</toc-title>
        <toc-pg>1.015</toc-pg>
    </toc-subitem>
    <toc-subitem num="5.">
        <toc-title>Statutes</toc-title>
        <toc-pg>1.017</toc-pg>
    </toc-subitem>
    <toc-subitem num="6.">
        <toc-title>Taxation</toc-title>
        <toc-pg>1.022</toc-pg>
    </toc-subitem>
</toc-item> 
```

我正在应用下面的xslt。

```
<xsl:template match="toc-subitem">
    <table>
    <td>
    <xsl:value-of select="preceding-sibling::toc-title[1]"/>    
</td></table>
    <xsl:variable name="tocpg">
        <xsl:value-of select="current()/toc-pg"/></xsl:variable>
    <xsl:variable name="abc">
        <xsl:choose>
            <xsl:when test="not(contains(@num, '('))">
                <xsl:value-of select="1"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="2"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:variable name="before">
        <xsl:value-of select="normalize-space(substring-before($tocpg, '.'))"/>
    </xsl:variable>
    <xsl:variable name="after">
        <xsl:value-of select="normalize-space(substring-after($tocpg, '.'))"/>
    </xsl:variable>
    <xsl:variable name="z">
        <xsl:value-of select="current()/@num"/>
    </xsl:variable> 

    <xsl:variable name="tocpgtag" select="translate($tocpg,'.', '-')"/>

    <xsl:variable name="numa" select="number(translate(@num, '.', ''))" />

    <xsl:variable name="itemlevel">
        <xsl:value-of select="$ThisDocument//ntw:nums[@num=$abc]/@word"/>
    </xsl:variable>

    <xsl:variable name="tocitemlevel">
        <xsl:value-of select="concat('toc-item-', $itemlevel,'-level')"/>
    </xsl:variable>
    <xsl:variable name="conc">
        <xsl:value-of select="concat('er:#BVI_CH_0',$before, '/P', normalize-space($tocpgtag))"/>
    </xsl:variable>

    <table class="{$tocitemlevel}">

        <tbody>
            <tr>
                <td class="toc-subitem-num">
                    <xsl:value-of select="$z" />
                </td>
                <td class="toc-title">
                    <xsl:value-of select="current()/toc-title" />
                </td>
                <td class="toc-pg">
                    <a href="{$conc}">
                        <xsl:value-of select="current()/toc-pg" />
                    </a>
                </td>
            </tr>
        </tbody>

    </table>
</xsl:template> 
```

当我应用这个模板时，我得到的输出如下。

```
<table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">1.</td>
           <td class="toc-title">The British Virgin Islands</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-001">1.001</a></td>
        </tr>
     </tbody>
  </table>

  <table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">2.</td>
           <td class="toc-title">History and early constitutional developments</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-003">1.003</a></td>
        </tr>
     </tbody>
  </table>

  <table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">3.</td>
           <td class="toc-title">Development as a financial centre</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-008">1.008</a></td>
        </tr>
     </tbody>
  </table>

  <table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">4.</td>
           <td class="toc-title">Common Law and Equity</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-015">1.015</a></td>
        </tr>
     </tbody>
  </table>

  <table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">5.</td>
           <td class="toc-title">Statutes</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-017">1.017</a></td>
        </tr>
     </tbody>
  </table>

  <table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">6.</td>
           <td class="toc-title">Taxation</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-022">1.022</a></td>
        </tr>
     </tbody>
  </table> 
```

但我想得到它如下

```
<table>
     <td>CHAPTER 1 INTRODUCTION</td>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">1.</td>
           <td class="toc-title">The British Virgin Islands</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-001">1.001</a></td>
        </tr>
     </tbody>
  </table>

  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">2.</td>
           <td class="toc-title">History and early constitutional developments</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-003">1.003</a></td>
        </tr>
     </tbody>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">3.</td>
           <td class="toc-title">Development as a financial centre</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-008">1.008</a></td>
        </tr>
     </tbody>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">4.</td>
           <td class="toc-title">Common Law and Equity</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-015">1.015</a></td>
        </tr>
     </tbody>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">5.</td>
           <td class="toc-title">Statutes</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-017">1.017</a></td>
        </tr>
     </tbody>
  </table>
  <table class="toc-item--level">
     <tbody>
        <tr>
           <td class="toc-subitem-num">6.</td>
           <td class="toc-title">Taxation</td>
           <td class="toc-pg"><a href="er:#BVI_CH_01/P1-022">1.022</a></td>
        </tr>
     </tbody>
  </table> 
```

请让我知道我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:21:56.980

您应该为此使用单独的模板（我还清理了一堆`<xsl:variable>`s）：

```
 <xsl:template match="toc-title">
    <table>
      <tr>
        <td>
          <xsl:value-of select="preceding-sibling::toc-title[1]"/>
        </td>
      </tr>
    </table>
  </xsl:template>
  <xsl:template match="toc-subitem">
    <xsl:variable name="tocpg" select="toc-pg" />
    <xsl:variable name="abc" select="1 + contains(@num, '(')" />
    <xsl:variable name="before"
                  select="normalize-space(substring-before($tocpg, '.'))"/>
    <xsl:variable name="after"
                  select="normalize-space(substring-after($tocpg, '.'))"/>
    <xsl:variable name="z" select="@num"/>

    <xsl:variable name="tocpgtag" select="translate($tocpg,'.', '-')"/>
    <xsl:variable name="numa" select="number(translate(@num, '.', ''))" />

    <xsl:variable name="itemlevel"
                  select="$ThisDocument//ntw:nums[@num=$abc]/@word"/>

    <xsl:variable name="tocitemlevel"
                  select="concat('toc-item-', $itemlevel,'-level')"/>
    <xsl:variable name="conc"
                  select="concat('er:#BVI_CH_0',$before, '/P', 
                                 normalize-space($tocpgtag))"/>

    <table class="{$tocitemlevel}">
      <tbody>
        <tr>
          <td class="toc-subitem-num">
            <xsl:value-of select="$z" />
          </td>
          <td class="toc-title">
            <xsl:value-of select="toc-title" />
          </td>
          <td class="toc-pg">
            <a href="{$conc}">
              <xsl:value-of select="toc-pg" />
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </xsl:template> 
```

但是，我认为将每一行放在自己的表中并不是一个很好的设计。你为什么选择这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:22:45.420

笔记：

1.  您的标题表无效 - 它没有`<tr>`.
2.  您的 XSLT 给您重复的原因`toc-title`是您为每次`toc-subitem`处理打印它。在下面的解决方案中，它只打印一次。

对您的 XSLT 进行以下更改：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

<xsl:template match="//toc-item">
  <table>
    <td>
      <!-- Print the title *once* -->
      <xsl:value-of select="./toc-title"/>
    </td>
  </table>

  <!-- Process each subitem -->
  <xsl:apply-templates select="toc-subitem"/>
</xsl:template>

<xsl:template match="toc-subitem">

  <!-- Removed the <table> with the preceding sibling -->

  <xsl:variable name="tocpg">
    <xsl:value-of select="current()/toc-pg"/></xsl:variable>

  <!-- Put the rest of your XSLT here, no changes there -->

 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:29:42.240

我真的不明白你为什么想要这样的输出（`<td>`不是 的有效子级`<table>`，例如，在 HTML 中），但是这个样式表应该让你更接近（我重写了样式表以将你的代码拆分为单独的`<xsl:template>`元素）：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" indent="yes"/>

  <xsl:template match="/">
    <html>
      <body>
        <table>
          <xsl:apply-templates/>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="toc-item/toc-title">
      <td><xsl:value-of select="."/></td>
  </xsl:template>

  <xsl:template match="toc-subitem">
    <!--
    I don't know how your code that fetches the TOC item level is supposed
    to work so you'll have to figure that out yourself.
    -->
    <table class="toc-item-$level-level">
      <tbody>
        <tr>
          <xsl:apply-templates select="@* | node()"/>
        </tr>
      </tbody>
    </table>
  </xsl:template>

  <xsl:template match="@num">
    <td class="toc-subitem-num">
      <xsl:value-of select="."/>
    </td>
  </xsl:template>

  <xsl:template match="toc-subitem/toc-title">
    <td class="toc-title">
      <xsl:value-of select="."/>
    </td>
  </xsl:template>

  <xsl:template match="toc-pg">
    <td class="toc-pg">
      <a href="{concat('er:#BVI_CH_0', substring-before(., '.'), '/P', translate(., '.', '-'))}">
        <xsl:value-of select="."/>
      </a>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

### 输入

```
<?xml version="1.0"?>
<toc-div>
  <toc-item>
    <toc-title>CHAPTER 1 INTRODUCTION</toc-title>
    <toc-subitem num="1.">
      <toc-title>The British Virgin Islands</toc-title>
      <toc-pg>1.001</toc-pg>
    </toc-subitem>
    <toc-subitem num="2.">
      <toc-title>History and early constitutional developments</toc-title>
      <toc-pg>1.003</toc-pg>
    </toc-subitem>
    <toc-subitem num="3.">
      <toc-title>Development as a financial centre</toc-title>
      <toc-pg>1.008</toc-pg>
    </toc-subitem>
    <toc-subitem num="4.">
      <toc-title>Common Law and Equity</toc-title>
      <toc-pg>1.015</toc-pg>
    </toc-subitem>
    <toc-subitem num="5.">
      <toc-title>Statutes</toc-title>
      <toc-pg>1.017</toc-pg>
    </toc-subitem>
    <toc-subitem num="6.">
      <toc-title>Taxation</toc-title>
      <toc-pg>1.022</toc-pg>
    </toc-subitem>
  </toc-item>
</toc-div> 
```

### 输出

```
<html>
  <body>
    <table>
      <td>CHAPTER 1 INTRODUCTION</td>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">1.</td>
            <td class="toc-title">The British Virgin Islands</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-001">1.001</a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">2.</td>
            <td class="toc-title">History and early constitutional developments</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-003">1.003</a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">3.</td>
            <td class="toc-title">Development as a financial centre</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-008">1.008</a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">4.</td>
            <td class="toc-title">Common Law and Equity</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-015">1.015</a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">5.</td>
            <td class="toc-title">Statutes</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-017">1.017</a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="toc-item-$level-level">
        <tbody>
          <tr>
            <td class="toc-subitem-num">6.</td>
            <td class="toc-title">Taxation</td>
            <td class="toc-pg">
              <a href="er:#BVI_CH_01/P1-022">1.022</a>
            </td>
          </tr>
        </tbody>
      </table>
    </table>
  </body>
</html> 
```

如果您真的不需要它们，只需从第一条规则中删除`<html>`and元素。`<body>``<xsl:template>`

# python - 在python中暂停循环

> ID：15518232
> 
> 赞同：1
> 
> 时间：2013-03-20T08:05:52.503
> 
> 标签：python, loops, pyqt, pyside

我有一个循环使用 PySide 创建窗口，具体取决于用户输入的数字每个窗口都会调用其他函数。
我希望在所有属于第一个窗口的命令完成后打开第二个窗口。
那么，Python中有没有办法告诉循环停止，直到某个标志为真，例如

这就是我正在做的

```
for i in range(values):
    self.CreatWindow()      # the function that creates the window

def CreatWindow(self):
    window = QtGui.QMainWindow(self)
    window.setAttribute(QtCore.Qt.WA_DeleteOnClose)
    combo = QtGui.QComboBox(window)
    combo.addItem(" ")
    combo.addItem("60")
    combo.addItem("45")
    combo.activated[str].connect(self.onActivated)  

    btn = QtGui.QPushButton('OK', window)
    btn.clicked.connect(self.ComputeVec)
    window.show()

def onActivated(self, text):
    angle = int(text)

def ComputeVec(self):
    window.close()
    getVecValue(angle) 
```

现在在该函数中，窗口有一些对其他函数的调用，我想在最后一个函数中将标志设置为 True，`getVecValue`这将执行一些计算并存储结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:37:00.563

您可以在 ComputeVec 中调用 CreatWindow 并使用全局变量 count 来维护之前创建的窗口的计数，而不是使用不同的循环来打开新窗口。

```
count = 0
def ComputeVec(self):
    window.close()
    getVecValue(angle)
    global count
    count += 1
    if count in range(values) : 
        self.CreatWindow() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:36:45.337

循环的行为确实是这样的，因为函数调用`self.CreateWindow`等待被调用函数的返回值。

`self.CreateWindow`您可以从例如返回适当的值`return True`并执行以下操作：

```
for i in range(values):
    success = self.CreateWindow()
    if success:
        continue 
```

无论如何，如果 中没有返回值`self.CreateWindow`，则该语句`self.CreateWindow()`仍会被评估并导致`None`. 直到达到这个结果，循环才结束。

# c# - 如何检测物理防火墙、路由器和交换机工作正常

> ID：15518233
> 
> 赞同：1
> 
> 时间：2013-03-20T08:05:54.637
> 
> 标签：c#, networking, network-programming, windows-applications

我正在尝试开发一个网络监控 Windows 应用程序。有什么方法可以检测物理防火墙、路由器和交换机是否正常运行并且没有关闭或不工作？我还需要从连接到 LAN 的客户端系统中检测到这一点。

我猜对于交换机来说，ping 到它的 IP 地址是必要的吗？

对于 ping 开关，这是我的代码，

```
void PingSwitch()
{
    var ping = new Ping();

    if (!string.IsNullOrEmpty(this.IPV4Address))
    {
        PingReply pingReply = ping.Send(this.IPV4Address);

        if (pingReply.Status == IPStatus.Success)
            this.Background = Brushes.Green;
        else
            this.Background = Brushes.Red;
    }
} 
```

如何使用路由器和防火墙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:06:06.413

对于那些有兴趣的人，我发布了我得到的解决方案。

正如@Default 建议的那样，我使用 nmap 并从 c# 对 Switch 和 Router 进行隐身扫描并检测防火墙，这篇文章[有所帮助](https://stackoverflow.com/questions/5975321/c-sharp-how-to-chceck-if-external-firewall-is-enabled)。

# javascript - jquery 每 60 秒执行一次不同的操作

> ID：15518240
> 
> 赞同：0
> 
> 时间：2013-03-20T08:06:14.133
> 
> 标签：javascript, jquery, jquery-animate

我想每 60 秒执行一次不同的操作，以通过动画更改我的背景。现在通过单击运行。

```
$(document).ready(function(){ 

$("li.one").click( function(){ 
    $('#switch-container').animate({backgroundColor: '#18597f'}, 1000)
});

$("li.two").click( function(){ 
    $('#switch-container').animate({backgroundColor: '#8a0651'}, 1000)
});

$("li.three").click( function(){ 
    $('#switch-container').animate({backgroundColor: '#8a0651'}, 1000)
}); 
```

我怎么能这样做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:08:11.353

使用`setInterval()`.

该方法以指定的时间间隔**（以毫秒为单位）**`setInterval()`调用函数或计算表达式。

 **```
setInterval(function(){
  //code for animation
},DURATION); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:12:24.173

```
var colors = ['#18597f','#8a0651','#8a0651'],
    timer  = setInterval(function() {
        var rand = parseInt(Math.random()*(3 - 0),10);
        $('#switch-container').animate({backgroundColor: colors[rand]}, 1000);
    }, 1000); 
```

[**小提琴**](http://jsfiddle.net/ssPku/4/)

编辑：

以常规顺序而不是随机更改颜色：

```
var colors = ['green','red','yellow'],
    i      = 0,
    timer  = setInterval(function() {
        $('#switch-container').animate({backgroundColor: colors[i++]}, 500);
        i = i==3 ? 0 : i;
    }, 1000); 
```

[**小提琴**](http://jsfiddle.net/ssPku/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:11:48.827

```
$(document).ready(function () {
        //  alert("hello");
        changecolor();
    });
    function changecolor() {
        // alert("hi");
        var colors = ["#00FF00", "#CCCCCC", "#990099", "#FEA400", "#FF9900", "#6600FF", "#333333", ];
        var rand = Math.floor(Math.random() * colors.length);
        $('#controls-wrapper').css("background-color", colors[rand]);
        setTimeout('changecolor()', 100);
    } 
```

如果您不关心计时器中的代码是否可能比您的时间间隔更长，请使用 setInterval()：

```
setInterval(function, delay) 
```

这会一遍又一遍地触发作为第一个参数传入的函数。

更好的方法是使用 setTimeout 和自执行匿名函数：

```
(function(){
    // do some stuff
    setTimeout(arguments.callee, 60000);
})(); 
```

这保证了在您的代码执行之前不会进行下一次调用。我在这个例子中使用了 arguments.callee 作为函数引用。这是为函数命名并在 setTimeout 内调用它的更好方法，因为 arguments.callee 在 ecmascript 5 中已被弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:11:28.233

我曾经使用过这个模板：http: [//luiszuno.com/themes/kroft/](http://luiszuno.com/themes/kroft/) 它有一个动画背景。检查 html 文件中的 html、slider.js 文件中的变量时间和幻灯片文件夹中的后端 jquery 代码**

# vb6 - 水晶报表子报表定位VB6

> ID：15518246
> 
> 赞同：0
> 
> 时间：2013-03-20T08:06:36.360
> 
> 标签：vb6, crystal-reports, report, subreport

我正在 VB6 中创建一个报表，特别是我有一个横向的主报表，然后我再次插入一个横向的子报表，但是当我打印它时，子报表似乎是纵向剪切一些数据。

我将打印机属性方向设置为报表和子报表。

关于原因的任何想法？

提前致谢，詹保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:49:00.777

如果你去**Format Subreport ...**，应该检查**Can Grow 。**还要确保子报表中标记的字段可以增长。

# animation - 加载 Collada 网格姿势

> ID：15518249
> 
> 赞同：0
> 
> 时间：2013-03-20T08:06:48.693
> 
> 标签：animation, loading, collada

我从文件加载 collada 网格动画时遇到问题。骨架 startpose 是这样定义的

```
<translate sid="translate">-0.01199548 0.1422831 -0.009544329</translate>
<rotate sid="jointOrientZ">0 0 1 0</rotate>
<rotate sid="jointOrientY">0 1 0 0</rotate>
<rotate sid="jointOrientX">1 0 0 0</rotate>
<rotate sid="rotateZ">0 0 1 -6.883375</rotate>
<rotate sid="rotateY">0 1 0 -10.62618</rotate>
<rotate sid="rotateX">1 0 0 8.255196</rotate> 
```

我认为轮换应该按照他们在这里订购的顺序进行，还是我错过了什么？我发现了旋转是如何工作的，前三个值定义了要旋转的轴，最后一个值定义了多少度。但由于某种原因，我得到了一个非常奇怪的结果。我的系统适用于 collada 网格，该网格具有代表相同类型值的矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:45:23.747

就像你说的，伪命令的顺序：

```
translateObject()
orientZObject()
orientYObject()
orientXObject()
rotateZObject()
rotateYObject()
rotateXObject() 
```

不可能有其他组合。矩阵乘法不可交换。

在将 collada 解析为 webgl 渲染器时，这对我有用。对于矩阵运算，我使用 gl-matrix javascript 库。

# xamarin.ios - xamarin 支持 iOS 的 coreBluetooth 吗？

> ID：15518250
> 
> 赞同：7
> 
> 时间：2013-03-20T08:06:51.267
> 
> 标签：xamarin.ios, xamarin, core-bluetooth, bluetooth-lowenergy, xamarin.mobile

我是 Xamarin 的新手，正在执行可行性研究。

我不确定 Xamarin 是否为包括 iOS、android、Windows 在内的平台的低功耗蓝牙提供通用 API？在 iOS 中，这个 API 是 coreBluetooth。

请提供详细信息；我在网上搜索时找不到任何好的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T05:13:24.883

是的 Xamarin.iOS 和 Xamarin.Android 支持蓝牙。

不，它们不提供通用 API

* * *

对于我的 Sphero hacking - 我编写了一个跨平台蓝牙 Sphero 特定模块[https://github.com/slodge/BallControl/tree/master/Cirrious.Sphero.WorkBench/Plugins/Sphero](https://github.com/slodge/BallControl/tree/master/Cirrious.Sphero.WorkBench/Plugins/Sphero)

在 iOS 上，这个模块使用 ExternalAccessory 而不是 CoreBLuetooth——因为这是 Sphero 的工作方式，但在其他平台上，Sphero 使用蓝牙 SPP

如果您需要一些 CoreBluetooth 示例代码，那么我在[http://forums.xamarin.com/discussion/comment/7576/](http://forums.xamarin.com/discussion/comment/7576/)中编写并测试了一些代码，并[在 MonoTouch 的核心蓝牙中解决“CBConcreteCentralManager 未通电”](https://stackoverflow.com/questions/13657695/solving-cbconcretecentralmanager-is-not-powered-on-in-core-bluetooth-in-monoto/13660275#13660275)

# titanium - 合金小部件和钛模块之间的区别..

> ID：15518255
> 
> 赞同：2
> 
> 时间：2013-03-20T08:07:12.147
> 
> 标签：titanium, titanium-modules

合金小部件和钛模块有什么区别..？什么时候用什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T03:09:01.637

我知道它很旧，但是……这是谷歌搜索“钛模块小部件”时的第一个热门，所以……我猜很多人不知道。

这是 Appcelerator 对模块的解释：

[http://docs.appcelerator.com/titanium/3.0/#!/guide/Using_Modules](http://docs.appcelerator.com/titanium/3.0/#!/guide/Using_Modules)

这是对小部件的解释：

[http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_Widgets](http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_Widgets)

对我最大的不同？模块是旧的，小部件是新的。小部件包括 Alloy 的 XML 和 TSS 结构。如果找不到您喜欢的小部件，请使用模块。制作小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:16:13.707

Alloy 是 Titanium 的模型-视图-控制器 (MVC) 框架。作为非 mvc 中的模块，两者都可以在没有太大区别的任何地方使用。但是合金是新的 MVC 框架。在那里你可以比后者更快地开发应用程序。合金用于创建一些小部件和一些其他额外的东西。让您的应用程序更具互动性、趣味性和良好...

Alloy 是一个“面向组件”的应用程序框架，它通过模型/视图/控制器架构强制分离关注点。让我们看一下 Alloy 的一些核心架构概念。

你可以点击这个[链接](http://developer.appcelerator.com/blog/2012/11/gtka-one.html)

# xaml - 如何在 Metro 应用程序的列表框中更改一个特定列表框项的背景颜色？

> ID：15518256
> 
> 赞同：0
> 
> 时间：2013-03-20T08:07:29.100
> 
> 标签：xaml, windows-8, listbox, microsoft-metro, listboxitem

我正在开发一个 c#/xaml 地铁应用程序。

我有一个列表框，根据一个特定条件，我只想更改一个列表框项背景颜色。

这就是我尝试过的方式：-

```
if (lststudents != null)
{
    foreach (StudentClass obj in lststudents)
    {
        if (obj.stutype == "Red House")
        {
///I am unable to typecast to listboxitem, since it is of type student class 
ListBoxItem lstbxbitem = (obj)ListBoxItem;
///
            lstbxbitem.Background = new SolidColorBrush(Colors.Red);
        }
    }
}
lstbxbStudents.ItemsSource = lststudents ; 
```

请注意：- 我只想根据某些特定条件更改某些列表框项的背景颜色。

请让我知道如何实现这一目标？

有哪些不同的选择？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:50:59.843

在 ListBox 中使用 DataTemplate，然后您可以创建 DataTemplateSelector 来设置 ListBox 中特定项目的样式。

您可以参考这些链接：

[ItemsControl.ItemTemplate 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemtemplate) [ItemsControl.ItemTemplateSelector 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemtemplateselector)

这是一篇好文章：

[在 Windows 8 应用商店应用中使用动态 XAML](http://blogs.u2u.be/diederik/post/2013/01/08/Using-Dynamic-XAML-in-Windows-8-Store-Apps.aspx)

# c# - 如何从 Windows 服务应用程序公开 API

> ID：15518260
> 
> 赞同：2
> 
> 时间：2013-03-20T08:07:39.877
> 
> 标签：c#, windows, api, service

我正在研究应该执行某些任务的 Windows 服务应用程序。除了这些任务，我想让一些服务功能随时可用。意味着，完全分离的应用程序应该能够创建在 Windows 服务上指定的类型的对象，并且可以调用一些函数，当然是公开的。

让我知道是否有任何方法可以通过 API 或其他方式公开功能。如果是，请指导我查看任何教程或示例。

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:15:01.507

我认为您正在寻找的是使用 WCF 与其他应用程序通信的 Windows 服务。

这是一个非常简洁的教程，您可以通过： [http ://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication](http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication)

# javascript - 如何检查图像是否已使用 Javascript 加载？

> ID：15518263
> 
> 赞同：6
> 
> 时间：2013-03-20T08:07:54.113
> 
> 标签：javascript, image, loading, portability

在`OnLoad`我的网页处理程序中，我正在尝试检查所有图像是否已正确加载。

我正在遍历所有`<img>`标签并用我的`isImageLoaded()`函数检查它们。不幸的是，我的功能仅适用于 Firefox 和 IE 至版本 8。

有什么建议可以让它在 IE 9 和 10 中工作吗？

```
function isImageLoaded(img) {
    // check for IE
    if (!img.complete) {
        return false;
    }
    // check for Firefox
    if (typeof img.naturalWidth != "undefined" && img.naturalWidth == 0) {
        return false;
    }
    // assume it's ok
    return true;
} 
```

**更新：**事实证明，主要的罪魁祸首是可以在 IE9+ 加载所有图像之前触发 OnLoad。检查页面中图像的更好触发器是什么？我更愿意一次检查它们，而不是使用单独的 OnLoad / OnError 处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:31:31.740

> 在我网页的 OnLoad 处理程序中，我正在尝试检查所有图像是否已正确加载。

我假设您正在使用`body.onload`or `<body onload="">`？这应该仍然意味着所有图像都已加载 - 但是，通过使用：

```
window.addEventListener('load', function(){
  /// everything in the page has loaded now
}); 
```

或者对于旧版本的 IE：

```
window.attachEvent('onload', function(){
  /// everything in the page has loaded now
}); 
```

您将在浏览器中获得更一致的行为，而且我知道`window.onload`只有在加载所有内容后才会触发（但包括所有其他资源，如 javascript 和 css）。这个链接可能很有趣：

[window.onload 与 <body onload=""/>](https://stackoverflow.com/questions/191157/window-onload-vs-body-onload)

`onload`所以上面应该让你的函数有点多余，除非你在事件触发后将图像注入页面。但是，如果您想加快速度而不是等待*所有内容*下载，您可以使用 dom 就绪侦听器，然后实现 kennypu 提到的方法：

[跨浏览器 Dom 就绪](https://stackoverflow.com/questions/6902280/cross-browser-dom-ready)

据我所知，正如一个补充说明，`image.complete`应该适用于所有现代浏览器：

[https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)

# actionscript-3 - 移动设备上的 TLFTextField (ios/android)

> ID：15518264
> 
> 赞同：0
> 
> 时间：2013-03-20T08:07:59.247
> 
> 标签：actionscript-3, flash, apache-flex, air

我正在为 android 和 ios 编写和播放移动应用程序，我必须使用 TLFTextField 因为我需要 RTL (heb)。
当我单击文本框并设置焦点时，我遇到了各种可渗透的 TLFTextField
第一个事件，SoftKeyboard 没有显示，所以我必须从代​​码中显示它，然后即使键盘打开，文本框也没有'没有按键并保持空白。欢迎任何想法或建议？

```
 public function BaseView()
    {
        super();
        this.addEventListener(SoftKeyboardEvent.SOFT_KEYBOARD_ACTIVATE,onActive); 
        this.addEventListener(SoftKeyboardEvent.SOFT_KEYBOARD_DEACTIVATE,onDeactive);
    }
    protected function onDeactive(event:SoftKeyboardEvent):void
    {
        isKeyBordOpen = false;
        trace("deactive")

    }

    protected function onActive(event:SoftKeyboardEvent):void
    {
        isKeyBordOpen = true;
        trace("Active: " + event.type)
    }

    internal function addEventToTextFiled(textBox:TLFTextField):void
    {
        textBox.addEventListener(FocusEvent.FOCUS_IN,onFocus,false,0,true);
        textBox.addEventListener(FocusEvent.FOCUS_OUT,onOutFocus,false,0,true);
    }

    internal function removeEventToTextFiled(textBox:TLFTextField):void
    {
        textBox.removeEventListener(FocusEvent.FOCUS_IN,onFocus);
        textBox.removeEventListener(FocusEvent.FOCUS_OUT,onOutFocus);
    }

    internal function onOutFocus(event:FocusEvent):void
    {
        var txt:TLFTextField = event.currentTarget as TLFTextField;
        setText(txt,txt.text);
    }

    internal function onFocus(event:FocusEvent):void
    {
        var txt:TLFTextField = event.currentTarget as TLFTextField;

        if(isKeyBordOpen == false)
        {
            var isRisie:Boolean = txt.requestSoftKeyboard();
            trace("isRisie:Boolean " + isRisie)
            stage.focus = txt 
        }
        setBlock(txt);
    }   

    internal function setText(textBox:TLFTextField,txt:String):void
    {
        txt = StringUtil.trim(txt," ");
        textBox.needsSoftKeyboard = true;
        if(txt != null && txt.length > 0)
        {
            setBlock(textBox);
            textBox.text = txt;
        }
        else
        {
            setTrans(textBox);
        }
    }

    internal function setTrans(textBox:TLFTextField):void
    {
        textBox.background = false;
    }

    internal function setBlock(textBox:TLFTextField):void
    {
        textBox.background = true;
        textBox.backgroundColor = 0xffffff;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:39:27.147

解决方案可能根本不使用此类，而是使用 StageText [http://blogs.adobe.com/cantrell/archives/2011/09/native-text-input-with-stagetext.html](http://blogs.adobe.com/cantrell/archives/2011/09/native-text-input-with-stagetext.html)

# selenium - 如何使用 Python webdriver 获取子元素

> ID：15518274
> 
> 赞同：1
> 
> 时间：2013-03-20T08:08:50.330
> 
> 标签：selenium, python-2.7, selenium-webdriver

如何使用 Python webdriver 获取子元素类名

我可以使用 find_elements(By.TAG_NAME, "td") 去所有 td 元素

1.  我想访问子节点
2.  我想获取 'input class', 'type' , 'value','actiontypes', 'itemtype', 'aria-checked' -> ('checkbox', 'checkbox', "undefined",'删除'，'歌曲'，'假'）

    榆树 = WebElement(tds[2].parent,tds[2].id);

    ElmNew = Elm.find_element_by_class_name('checkbox');

尝试使用 find_element_by_class_name 但收到此[错误](https://stackoverflow.com/questions/ask)

```
NoSuchElementException: Message: u'Unable to locate element: {"method":"class name","selector":"checkbox"}' ; Stacktrace: Method FirefoxDriver.prototype.findElementInternal_ threw an error in file:///c:/users/<XXXX>/appdata/local/temp/tmpvsmd_c/extensions/fxdriver@googlecode.com/components/driver_component.js 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:50:23.707

你可以试试这个逻辑

```
elem = browser.find_elements_by_css_selector("td>input[class='checkbox']") 
```

实际上`find_elements`将返回匹配 WebElement 实例的列表，而不是单个匹配实例。

因此，您在此处迭代该列表以获取单个 WebElement。获得单独的 WebElements 后，您可以使用`get_attribute(name)`

```
individualEle.get_attribute("value"); 
```

# php - 没有在 Codeigniter、MySQL 中用 LIKE 搜索我想要的东西

> ID：15518278
> 
> 赞同：0
> 
> 时间：2013-03-20T08:09:10.533
> 
> 标签：php, mysql, codeigniter

我在 be_user_profiles.subject 中有以下示例。这些是每个老师教的科目ID。

```
1// English
1,2 // English and Math etc
1,2,14
2,4,114
12,24,34
15, 23 
```

我想选择 be_user_profiles.subject 有 1 的位置。当我使用以下内容时，它会输出其中有 1 的所有内容。所以它会输出所有。我试过 HAVING 但它只选择完全匹配。所以它只显示第一个。如何获取具有 be_user_profiles.subject 的数据？

```
 $this->db->select('*');
    $this->db->from('be_user_profiles');
    $this->db->join('be_users', 'be_users.id = be_user_profiles.user_id');
    $this->db->where('be_users.group', $teachergrp);
    $this->db->like('be_user_profiles.subject', $subjectid);
    //$this->db->having("be_user_profiles.subject = $subjectid");// this picks up only exact match 
    $query = $this->db->get(); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:26:02.940

be_user_profiles 表

```
row1: 1,2,14

row2: 2,4,114

row3: 12,24,34

row4: 15, 23 
```

要获取完全匹配的数据，请使用此查询

```
$this->db->query("
      SELECT * FROM `be_user_profiles` 
      WHERE subject LIKE '1'

      UNION

      SELECT * FROM `be_user_profiles` 
      WHERE subject LIKE '1,%'

      UNION

      SELECT * FROM `be_user_profiles` 
      WHERE subject LIKE '%,1,%'

      UNION

      SELECT * FROM `be_user_profiles` 
      WHERE subject LIKE '%,1'

   "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:28:43.397

`both`您放入`like`查询中的子句意味着`%`在要搜索的字符串的前后添加通配符，因此只要 12、21、121 等，它就会返回 1。如果删除它，它将仅搜索完全匹配。

您可以添加此`like`子句并为其添加逗号，我认为它会起作用。尝试添加这个而不是`like`你现在拥有的：

```
$this->db->like("," . "be_users.group" . "," , "," . $subjectid. "," , both); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:08:53.297

我认为您可以在这里使用正则表达式模式。

```
$pattern = "(^|.*,)1(,.*|$)";
...
...
$this->db->select('*');
....etc
$this->db->where("be_user_profiles.subject REGEXP $pattern"); 
```

此正则表达式模式假定逗号字符串中没有空格。

然而，正如@halfer 在评论中所说，你真的，真的应该把它分成一个带有teacherid 和subjectid 列的“teachersubject”表，否则它**会**很快咬你。[去过也做过 ：-） ]

例如，想象一下试图将上述内容扩展到寻找教授（（数学或物理）和英语）的老师。恶梦！

# phpmailer - why php mailer not send attachement?

> ID：15518279
> 
> 赞同：1
> 
> 时间：2013-03-20T08:09:10.707
> 
> 标签：phpmailer, php

I m using php mailer to send mail with attachment but i don't know why attachment not send else msg in body send properly and no error show plz give best solution for this

```
$to = 'ok123@gmail.com';
$msg = "This a body of a mail";
require_once("functions/class.phpmailer.php");
$mailer = new PHPMailer();

$mailer->From = "noreply@gmail.com";
$mailer->Subject = "attachment file";
$mailer->AddAddress($to);
$mailer->ContentType = 'text/html';
$mailer->CharSet = "UTF-8";
$mailer->Body = $msg;
$mailer->IsHTML(true);
$mailer->AddAttachment("images/20130319182911.zip","20130319182911.zip");
$mailer->Send();
echo "Message Sent OK<p></p>\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:22:40.823

This is my favorite mail attachment class. Use it if you like it.

```
class AttachmentEmail {
    private $from = 'yours@email.com';
    private $from_name = 'Your Name';
    private $reply_to = 'yours@email.com';
    private $to = '';
    private $subject = '';
    private $message = '';
    private $attachment = '';
    private $attachment_filename = '';

    public function __construct($to, $subject, $message, $attachment = '', $attachment_filename = '') {
        $this -> to = $to;
        $this -> subject = $subject;
        $this -> message = $message;
        $this -> attachment = $attachment;
        $this -> attachment_filename = $attachment_filename;
    }

    public function mail() {
        if (!empty($this -> attachment)) {
            $filename = empty($this -> attachment_filename) ? basename($this -> attachment) : $this -> attachment_filename ;
            $path = dirname($this -> attachment);
            $mailto = $this -> to;
            $from_mail = $this -> from;
            $from_name = $this -> from_name;
            $replyto = $this -> reply_to;
            $subject = $this -> subject;
            $message = $this -> message;

            $file = $path.'/'.$filename;
            $file_size = filesize($file);
            $handle = fopen($file, "r");
            $content = fread($handle, $file_size);
            fclose($handle);
            $content = chunk_split(base64_encode($content));
            $uid = md5(uniqid(time()));
            $name = basename($file);
            $header = "From: ".$from_name." <".$from_mail.">\r\n";
            $header .= "Reply-To: ".$replyto."\r\n";
            $header .= "MIME-Version: 1.0\r\n";
            $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
            $header .= "This is a multi-part message in MIME format.\r\n";
            $header .= "--".$uid."\r\n";
            $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
            $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
            $header .= $message."\r\n\r\n";
            $header .= "--".$uid."\r\n";
            $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use diff. tyoes here
            $header .= "Content-Transfer-Encoding: base64\r\n";
            $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
            $header .= $content."\r\n\r\n";
            $header .= "--".$uid."--";

            if (mail($mailto, $subject, "", $header)) {
                return true;
            } else {
                return false;
            }
        } else {
            $header = "From: ".($this -> from_name)." <".($this -> from).">\r\n";
            $header .= "Reply-To: ".($this -> reply_to)."\r\n";

            if (mail($this -> to, $this -> subject, $this -> message, $header)) {
                return true;
            } else {
                return false;
            }

        }
    }
    } 
```

And use it like

```
$sendit = new AttachmentEmail('test@example.com', 'Testing attachment!', 'Hi', '/home/test/test.jpg');
$sendit -> mail(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:15:05.030

Gmail removes `.zip` attachment when it detects particular files inside, like EXEs. Add zip attachment as `20130319182911.piz` and it should arrive. It's not a phpmailer problem, but a Gmail policy.

# inversion-of-control - 如何使用 Microsoft Unity IOC 容器注入 IEnumerable

> ID：15518283
> 
> 赞同：3
> 
> 时间：2013-03-20T08:09:29.693
> 
> 标签：inversion-of-control, unity-container

我有一项需要注入多个提供程序的服务，例如，请参见下文。如何使用 Unity 来实现这个功能？

```
public class MyService: IMyService
{
    public MyService(IEnumerable<Provider> Providers);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-13T09:15:22.740

我知道这是一个老问题，但也许这会帮助其他偶然发现这个问题的人。

只要您使用特定名称注册实现，就可以轻松注入。然后，您将获得所有已注册的实现。

```
public class MyService: IMyService
{
    public MyService(IProvider[] providers)
    {
       // Do something with the providers
    }
} 
```

只要确保将它们作为数组注入即可。Unity 会理解这一点。当您注册它们时，您可以这样注册它们：

```
container.RegisterType<IProvider, FooProvider>("Foo");
container.RegisterType<IProvider, BarProvider>("Bar"); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-20T09:57:21.007

一种方法是注入 UnityContainer 本身，然后解析您需要的所有 Provider：

```
public class MyService : IMyService 
{
    public class MyService(IUnityContainer iocContainer)
    {
        var providers = iocContainer.ResolveAll<IProvider>();
    }
} 
```

您唯一需要做的就是在设置的某处注册 UnityContainer：

```
unityContainer.Register<IUnityContainer>(unityContainer, new ContainerControllerLifetimeManager()); 
```

# javascript - Twitter Bootstrap 的 Django 和日期范围选择器组件

> ID：15518284
> 
> 赞同：3
> 
> 时间：2013-03-20T08:09:30.863
> 
> 标签：javascript, django, twitter-bootstrap, daterangepicker

我想为我的 Django 项目使用这个[日期范围选择器](http://www.dangrossman.info/2012/08/20/a-date-range-picker-for-twitter-bootstrap/)

问题是我不知道在服务器端（Django）我必须做什么？

可能是创建某种小部件？

可能是子类widgets.MultiWidget？

我认为这个小部件必须表现得像两个 DateTimeFields？

Django可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-05T16:32:44.913

我必须这样做；所以我在这里分享代码。它基本上重用了 Django `DateField`。

```
class DateRangeField(forms.DateField):
    def to_python(self, value):
        values = value.split(' - ')
        from_date = super(DateRangeField, self).to_python(values[0])
        to_date = super(DateRangeField, self).to_python(values[1])
        return from_date, to_date 
```

和

```
date_range = DateRangeField(required=False,
                            widget=forms.TextInput(attrs={'placeholder': _('from'),
                                                          'class': 'form-control datepicker'})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:31:17.543

鉴于示例输出是

```
MM/DD/YYYY - MM/DD/YYYY 
```

这将发布到您的视图中。我会自己处理而不是使用 Django 表单，并将其存储在两个 DateFields 中。类似这样的东西：

```
date_range = request.POST['date_range']
start_date_string = date_range.split(' - ')[0]
end_date_string = date.range.split(' - ')[1] 
```

这将为您提供所需的两个字符串，然后只需将它们传递到 DateFields 并保存即可。

# javascript - jQuery如何使用ajax读取和格式化数据以进行自动完成

> ID：15518289
> 
> 赞同：2
> 
> 时间：2013-03-20T08:10:08.903
> 
> 标签：javascript, jquery, ajax, autocomplete

我尝试使用 jQuery 实现一个简单的自动完成功能。但事实证明，这对我来说并不是那么简单。我有一个`<input type="text" name="test" id="test" />`，我试着让它自动完成。

我想用一个 PHP 脚本读取我的数据库，该脚本以 JSON（或您推荐的任何方式）返回数据。数据应该是一个单词列表，没什么复杂的 (["abc","bcd","cde"]); 没有额外的类别或事物。

为此，我在[这里](http://api.jqueryui.com/autocomplete/#option-source)阅读了 API ，但我对 JS 和事物中的匿名函数不太熟悉。

到目前为止我尝试了什么：

```
$(function() {
  function response(){};
  $( "#test" ).autocomplete({
        source: function(request, response(data)){ajaxRequest(request, response)}
    });
}); 
```

但我担心这不起作用。另外我完全不知道 ajaxRequest() 必须以什么格式返回数据。

有没有人有礼貌地知道这一点并可以帮助我？我会很高兴的！

非常感谢！-Yatekii

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:25:02.473

您应该将数据传递给响应回调

```
 $( "#test" ).autocomplete({
        source: function( request, response ) {
            var term = request.term;
            $.getJSON( "url.php", request, function( data, status, xhr ) {
                response( data );
            });
        }
    }) 
```

# android - 键盘出现时如何保持 UI 视图的大小相同？

> ID：15518292
> 
> 赞同：0
> 
> 时间：2013-03-20T08:10:16.337
> 
> 标签：android, android-layout, layout, android-activity, fragment

请查看随附的屏幕截图，我在左侧有一个片段出现在现有活动上，但是当键盘出现时，您会注意到右侧活动布局中的组件被压缩。如何将活动的布局设计为仅在键盘出现时向上滚动而不是压缩。

![在此处输入图像描述](../Images/a42613c08082372d7649e325f03b1e46.png)

我已经尝试过`baboo`发布 `android:windowSoftInputMode="adjustPan"`：但我得到了以下结果：![在此处输入图像描述](../Images/7ab38ec3cf8341389f537ba5b86b1684.png)

但是正如您所见，屏幕是从底部切开的？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:16:51.300

您需要在片段存在的活动中调整 android:windowSoftInputMode 尝试使用

```
 android:windowSoftInputMode="adjustPan" 
```

在你的清单中

# c# - ASP 有当前事件吗？

> ID：15518293
> 
> 赞同：0
> 
> 时间：2013-03-20T08:10:18.310
> 
> 标签：c#, asp.net

ASP 是否有类似于 Access 的 On Current 事件的构造？我继承了一组用 C# 编码的 ASP Web 表单，如果单击其中一个控件，与表单控件关联的规则就会启动，但我需要它们在表单打开时应用，而不仅仅是在更改时应用。他们不允许错误数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:15:24.783

> 我需要他们在表格打开时申请，而不仅仅是更改。

使用 ASP.NET，您可以使用`Page_Load`事件处理程序；查看[页面生命周期文档](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)以获取更多详细信息，因为这可能会引导您找到更合适的内容，并且总体上是一本颇具教育意义的读物。

# php - 如何返回内连接查询结果

> ID：15518294
> 
> 赞同：1
> 
> 时间：2013-03-20T08:10:20.013
> 
> 标签：php, mysql, oop

我有一些来自 2 个数据库的数据，我想返回到屏幕所以通常我会执行以下操作：

```
foreach($this->seminar->readSubscription() as $value) {
    $this->content .= '<tr>';
    $this->content .= '<td>'.$value->title.'</td>';

    $value->title is then the title from a table. 
```

但现在我需要来自 2 个不同表的 2 个不同的 id，所以我尝试了类似的东西

```
$value->seminar->id; 
```

或类似的东西：

```
$value->seminar.id; 
```

但似乎没有任何想法？

这是我的查询：

```
$result = $this->getDb()->query($query);
    $values = array();
    while(($row = $result->fetchObject()) !== false) {
        $values[] = $row;
    }
    return $values; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:02:40.580

在你的情况下：

您将结果作为对象而不是数组获取。我总是取一个数组，所以我的第一个答案不清楚。

如果您的查询如下所示：

```
SELECT a.`name` as name1, a.`otherthing`, d.`name` as name2 
FROM  `ploatjens` AS a
LEFT JOIN  `mapjens` AS d ON a.`dir` = d.`id` 
```

请注意，a.name 和 d.name 具有相同的别名，因此我使用`as newname`它们都给它们一个唯一的别名。

然后你可以像这样访问对象：

```
//your loop
$name_of_a = $value->name1;
$name_of_b = $value->name2;
$other = $value->otherthing;
//end of your loop 
```

当然，当使用 fetch 数组时，您可以使用以下方式访问：

```
//your loop
$name_of_a = $value['name1'];
$name_of_b = $value['name2'];
$other = $value['otherthing'];
//end of your loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:14:08.137

在您的“选择”查询中，为您的字段名称使用别名。

注册

# ios - 基于 UIView 掩码的 UIImageView 图像裁剪

> ID：15518296
> 
> 赞同：11
> 
> 时间：2013-03-20T08:10:26.303
> 
> 标签：ios, ios6, uiimageview, uiimage

所以我有一个画布（UIView）和一个 UIImageView，画布充当图像视图的蒙版

![在此处输入图像描述](../Images/ea1061a48573878641ad95a905d905e9.png)

我正在使用 UIGestureRecognizers 来缩放和旋转画布下的 UIImageView。

我想转换最终图像（在画布中显示为 UIImage，一种解决方案是将画布转换为如下所示的图像

```
UIGraphicsBeginImageContext(self.canvas.bounds.size);
[self.canvas.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *newCombinedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

现在这工作正常，但此解决方案的问题是图像被裁剪为画布的尺寸，因此分辨率非常低。

我探索的另一个选择是使用一些自定义 UIImage 类别来旋转和缩放。

```
[[[self.photoImage image] imageRotatedByDegrees:rotaton_angle] 
     imageAtRect:CGRectMake(x,y width,height)] 
```

我需要提供旋转角度（UIGesture Delegate提供的旋转角度不是度数或弧度，然后有x，y，宽度，高度，我想这些需要根据一些比例计算，（我确实得到了比例值来自 UIGesture 委托，但它们似乎不适合此功能）

这里有许多解决方案，可以指导您在给定矩形的情况下裁剪和图像。但在我的情况下，矩形与图像的比例不同，也涉及旋转。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:01:16.050

我已经设法解决了这个问题，这是我的解决方案，它绝对不是最干净的，但它确实有效。

我需要处理 3 件事，平移、缩放和旋转。

首先，我使用 UIGestureRecognizer Delegate 来获取所有 3 个在 UIGestureRecognizerStateEnded 处递增的累积值。

[然后对于旋转，我只使用了这里](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)讨论的 UIImage 类别

```
 self.imagetoEdit = [self.imagetoEdit imageRotatedByRadians:total_rotation]; 
```

对于缩放（缩放），我使用了 GPUImage（我在整个应用程序中都使用它）

```
GPUImageTransformFilter *scaleFilter = [[GPUImageTransformFilter alloc] init];
[scaleFilter setAffineTransform:CGAffineTransformMakeScale(total_scale, total_scale)];
[scaleFilter prepareForImageCapture];
self.imagetoEdit = [scaleFilter imageByFilteringImage:self.imagetoEdit]; 
```

对于平移，我正在这样做。（不是最干净的代码：S）也使用上面提到的 UIImage+Categories。

```
CGFloat x_ = (translation_point.x/canvas.frame.size.width)*self.imagetoEdit.size.width;
CGFloat y_ = (translation_point.y/canvas.frame.size.height)*self.imagetoEdit.size.height;
CGFloat xx = 0;
CGFloat yy = 0;
CGFloat ww = self.imagetoEdit.size.width-x_;
CGFloat hh = self.imagetoEdit.size.height-y_;

if (translation_point.x < 0) {
    xx = x_*-1;
    ww = self.imagetoEdit.size.width + xx;
}

if (translation_point.y < 0) {
    yy = y_*-1;
    hh = self.imagetoEdit.size.height + yy;
}

CGRect cgrect = CGRectMake(xx,yy, ww, hh);
self.imagetoEdit = [self.imagetoEdit imageAtRect:cgrect]; 
```

一切似乎都有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:05:34.717

这可能会有所帮助... [以正确的方式调整 UIImage 的大小](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

它可能需要对 ARC 等进行一些更新……尽管我认为有些人已经完成了它并将其发布在 Github 上。

# python - 从 Python 写入机器人框架控制台

> ID：15518298
> 
> 赞同：17
> 
> 时间：2013-03-20T08:10:29.643
> 
> 标签：python, console, robotframework

我是一个使用 python 的新手，我想请你帮忙告诉我如何将 Python 中的消息打印到机器人框架控制台中。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-05-22T14:15:59.737

python 函数有多种方法可以将信息发送到机器人日志或控制台。这些都记录在 Robot 框架用户指南的标题为[Logging information](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#logging-information)的部分中。

最简洁的方法是使用[日志 API](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#programmatic-logging-apis)，它为各种日志提供了专门的功能。例如，要将信息发送到您将使用的控制台`logger.console(message)`。

### 使用日志记录 API

这是一个使用此方法的库文件：

```
# ExampleKeywords.py
from robot.api import logger
def write_to_console(s):
    logger.console(s) 
```

您可以通过以下方式使用此库：

```
*** Settings ***
| Library | ExampleKeywords.py

*** Test Cases ***
| Use a custom keyword to write to the console
| | Write to console | Hello, world 
```

这只会出现在控制台中，不会出现在日志中。如果您希望信息显示在日志中，您可以使用记录器方法`info`、、、或。要记录错误，您只需抛出异常。`warn``debug``trace`

### 调用内置关键字

您的自定义关键字还有其他方法可以将信息发送到日志。例如，您可以获取对 BuiltIn 库的引用，并直接调用[log](http://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Log)或[log to console](http://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Log%20To%20Console)关键字，如下所示：

```
from robot.libraries.BuiltIn import BuiltIn
def write_to_console(s):
    BuiltIn().log_to_console("Hello, world") 
```

### 使用打印语句

最后，您可以使用打印语句将信息写入日志（但不仅仅是控制台）。您可以为字符串添加前缀`*<level>*`以影响日志级别。例如，要打印警告，您可以执行以下操作：

```
print "*WARN* Danger Will Robinson" 
```

### 概括

使用 API 可以说是记录关键字信息的最佳方法。但是，这是一个相当新的 API，仅在 Robot Framework 2.6 之后才可用，因此如果您使用的是旧版本的 Robot，您可能需要使用其他技术之一。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-23T16:49:36.487

听起来您要求的是一种编写库的方法，以便您的测试用例可以在测试执行期间打印到控制台。

这很简单，您可以在 RF 手册中的[Logging Information](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#logging-information)下找到它。简短的版本是您可以记录一个“警告”，该“警告”将出现在日志和屏幕上，并带有打印语句，如下所示：

```
print "*WARN* This text will show up on the console." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T10:37:53.797

此命令可用于在机器人控制台上打印任何消息或内容。

```
from robot.libraries.BuiltIn import BuiltIn
BuiltIn().log_to_console("Message that needs to be printed") 
```

# python - 通过扩展覆盖来自包含的块是空白的？

> ID：15518300
> 
> 赞同：2
> 
> 时间：2013-03-20T08:10:48.257
> 
> 标签：python, django, django-templates, django-1.4

所以我有一个基本模板，其中包括一个标题：

**base.html**：

```
{% include "header.html" %} 
```

**header.html**：

```
<ul>
     <li><a>Link</a></li>
     <li><a>Link</a></li>
     <li><a>Link</a></li>
</ul>
{% block diskspace %}Test{% endblock %} 
```

然后我想`diskspace`从扩展基础的模板中覆盖块，例如：

**专辑.html**：

```
{% extends "base.html" %}
{% block diskspace %}
<p>You need more space!</p>
{% endblock %} 
```

然而不幸的是`diskspace`只包含“测试”并且没有被覆盖。

我正在尝试的是可能的，还是我需要走另一条路？

**解决方案**

根据下面sergzach的回答，这是我最终实现的：

**header.html：**

```
<ul>
     <li><a>Link</a></li>
     <li><a>Link</a></li>
     <li><a>Link</a></li>
</ul>
{% if show_diskspace %}
    <p>You need more space!</p>
{% endif %} 
```

**base.html**

```
{% block header %}
    {% include "header.html" %}
{% endblock %} 
```

**专辑.html**

```
{% extends "base.html" %}
{% block header %}
    {% include "header.html" with show_diskspace="True" %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:41:54.380

**header.html**：

```
 <ul>
         <li><a>Link</a></li>
         <li><a>Link</a></li>
         <li><a>Link</a></li>
    </ul>

{{diskspace}} 
```

**base.html**

```
{% block header %}
    {% include "header.html" with diskspace='Test'%}
{% endblock %} 
```

**专辑.html**

```
{% extends "base.html" %}
{% block header %}
    {% include "header.html" with diskspace='<p>You need more space!</p>'|safe %}
{% endblock %} 
```

# java - Java：接口中的可变参数

> ID：15518302
> 
> 赞同：1
> 
> 时间：2013-03-20T08:11:06.983
> 
> 标签：java, variadic-functions

```
public interface MyInterface {
    public ArrayList<Double> f(ArrayList<Double>... args);
} 
```

我收到警告：`Type safety: Potential heap pollution via varargs parameter paramOfChildren`。我可以用 来抑制这个警告`@SuppressWarnings("unchecked")`。

但是，在实现此接口的每个类中，我都会再次收到此警告。我想知道是否有办法为实现该接口的所有类一次抑制此警告。如果没有，我们有充分的理由不应该这样做吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-06-15T08:09:11.167

你可以确定泛型：

```
class DoubleList extends ArrayList<Double> {
    private static final long serialVersionUID = 1L;
}

interface MyInterface {
    public DoubleList f(DoubleList... args);
} 
```

# android - 在 Android 中显示 RTF 文件

> ID：15518303
> 
> 赞同：0
> 
> 时间：2013-03-20T08:11:16.157
> 
> 标签：android, rtf

我从网络服务获得一个 RTF 文件。我需要在 ListItem 的 TextView 中显示它。我找不到任何解决方案或帮助类来实现它。

有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:08:23.033

使用[jRTF](http://code.google.com/p/jrtf/)专业管理java中的rtf文件。

[http://code.google.com/p/jrtf/](http://code.google.com/p/jrtf/)

# null - 是否需要对桌面窗口句柄进行空值检查

> ID：15518308
> 
> 赞同：0
> 
> 时间：2013-03-20T08:11:27.630
> 
> 标签：null, desktop, handle

在我的应用程序中，我通过以下语句获取桌面窗口句柄：
HWND hDeskTopWnd = :: GetDesktopWindow();

是否需要对 hDeskTopWnd 进行空值检查。只要桌面存在，桌面窗口在任何情况下都会为空。请澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:16:02.380

根据[MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633504%28v=vs.85%29.aspx)，没有关于 NULL 返回值的描述。但是，为了以防万一，进行检查也没有坏处（可能还有很多好处）。它花费很少，可能会节省很多。

# c# - 发送 RPC 以添加 playerName

> ID：15518311
> 
> 赞同：3
> 
> 时间：2013-03-20T08:11:36.307
> 
> 标签：c#, networking, object, unity3d, rpc

我正在努力做到这一点，每当玩家连接到服务器时，它会将其选定的名称传输到 RPC，然后它将为每个人更新玩家游戏对象。但这似乎给出了以下错误：

> 发送 RPC 失败，因为不支持“setPlayerName”参数 0 (UnityEngine.GameObject)。

这是我的代码：

```
void OnConnectedToServer() {
    GameObject newPlayer = (GameObject)Network.Instantiate(newPlayerPrefab, new Vector3(0,0,0), Quaternion.identity, 0);
    networkView.RPC("setPlayerName", RPCMode.AllBuffered, newPlayer);
}

[RPC]
void setPlayerName(GameObject newPlayer) {
    newPlayer.name = "Player_" + playerName;
} 
```

如果这不是更改新生成玩家`gameObject`名称的正确方法，那么请帮助我，这实际上是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:08:01.740

NetworkView.RPC 中不支持将 GameObject 作为参数...您可以在此处查看支持的参数类型：

[http://docs.unity3d.com/Documentation/Components/net-RPCDetails.html](http://docs.unity3d.com/Documentation/Components/net-RPCDetails.html)

（您也可以使用文档中未提及的 byte[]）

也许你可以将玩家的名字作为字符串发送，让服务器处理游戏对象的创建

# javascript - 通过检测窗口大小来替换图像

> ID：15518314
> 
> 赞同：0
> 
> 时间：2013-03-20T08:11:50.237
> 
> 标签：javascript, jquery, image

我正在尝试通过 JQuery 检测浏览器大小来加载不同的图像。实现代码如下，

```
$(window).resize(function(){
        var w_size = $(window).width();
        var img_src = $("img").attr("src");

        if (w_size < 400) {
            var new_s_image = img_src.replace(".", "_s.");
            $("img").attr("src",new_s_image);
        }else if (w_size < 780){
            var new_m_image = img_src.replace(".", "_m.");
            $("img").attr("src",new_m_image);
        }
    }); 
```

现在的问题是每次我调整窗口大小时，它都会附加“_s”。或“_m”。例如：**图像/image_m_m_m.jpg**。我需要附加“_s”。或“_m”。即使用户无数次调整窗口大小，字符也只有一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:59:45.730

尽管有 css 替代品，但正如您所要求的，这里是我的 jQuery 解决方案。

此代码将处理多个图像，并且可以添加另一个条件而无需太多麻烦。

代码是：

```
$(window).resize(function () {
    $("img").each(function() {
        var w_size = $(window).width();
        var img_src = $(this).attr("src").replace("_m", "").replace("_s", "");
        var new_image = (w_size < 400) ? img_src.replace(".", "_s.") : (w_size < 780) ? new_image = img_src.replace(".", "_m.") : img_src;
        $(this).attr("src", new_image);
    });
}); 
```

你可以在这个[JSFiddle中看到这个工作](http://jsfiddle.net/PeteUh/fSqZK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:17:29.350

相当多的人会建议基于 CSS 的解决方案，这可能是一个不错的选择。

**如果您仍然喜欢使用 jQuery**，则需要修改一些内容：

1.  **给你的正常状态一个后缀`img src`**

    例如：myimage_n.jpg

2.  **更改更新文件名的方式。**

    除了用新字符替换点之外`img_src.replace(".", "_s.")`，您还可以这样做：

    ```
    trimmedSrc = myImageSrc.substr(0, myImageSrc.length - 5);
    var newSrc = trimmedSrc + 'm.jpg';
    myImage.attr("src", newSrc); 
    ```

**工作示例：http:** [//jsfiddle.net/shodaburp/wvyF6/](http://jsfiddle.net/shodaburp/wvyF6/)

**清理代码：http:** [//jsfiddle.net/shodaburp/wvyF6/2/](http://jsfiddle.net/shodaburp/wvyF6/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:25:45.230

我认为每次浏览器的大小发生变化时都不需要更改图像。您可能希望采用*响应*式处理图像大小的方式。

例如，以下示例将使您的所有图像都具有响应性：

```
img {  
    height: auto;  
    max-width: 100%;   
} 
```

更改`src`属性中的图像是多余的，因为最后，由于每个图像都将被重新加载，这将导致过多的带宽消耗。另外，由于您不必处理图像的多个版本，这将在您的开发过程中为您节省*大量*时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:28:40.710

对于您的图像，使用扩展名作为“_s”。和'_m。对于特定和正常的图像作为“_n”。如果要替换，则可以替换“_n”。用'_m。或“_s”。并且它们不会一次又一次地附加

```
$(window).resize(function(){
    var w_size = $(window).width();
    var img_src = $("img").attr("src");

    if (w_size < 400) {
        var new_s_image = img_src.replace("_n.", "_s.");
        $("img").attr("src",new_s_image);
    }else if (w_size < 780){
        var new_m_image = img_src.replace("_n.", "_m.");
        $("img").attr("src",new_m_image);
    }else if (w_size > 780){
        var new_m_image = img_src.replace("_m.", "_n.");
        var new_m_image = new_m_image.replace("_s.", "_n.");
        $("img").attr("src",new_m_image);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T08:28:57.483

你为什么不只是添加一个封面图片。

 `````
html {
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    background-attachment: fixed;
    background-image: url(image.jpg);
    background-repeat: no-repeat;
    background-position: center center;
} 
````  `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T08:30:34.020

我建议使用媒体查询来控制当前可见的图像版本。考虑以下示例（我用 class 表示小图像，用 表示`s`普通图像`m`）：

CSS：

```
@media all and (max-width: 400px) {
    .s {display: block;}
    .m {display: none;}
}
@media all and (min-width: 400px) {
    .m {display: block;}
    .s {display: none;}
} 
```

以及 IE<9 的 jQuery 后备：

```
function adjustStyle(width) {
    width = parseInt(width);
    if (width < 400) {
        $('body').addClass('small');
    }
    else if (width > 400) {
        $('body').removeClass('small');
    }
}

$(function() {
    adjustStyle($(this).width());
    $(window).resize(function() {
        adjustStyle($(this).width());
    });
}); 
```

[http://jsfiddle.net/KGdyD/](http://jsfiddle.net/KGdyD/)

在 HTML 中，您将有两张图像，但有时只能看到一张。``

# ios - [NSURLConnection sendAsynchronousRequest: ...] 是否总是发送完成块？

> ID：15518316
> 
> 赞同：5
> 
> 时间：2013-03-20T08:11:58.447
> 
> 标签：ios, objective-c, cocoa-touch, nsurlconnectiondelegate

很可能是一个相当微不足道的问题，但完成块是否总是被调用`[NSURLConnection sendAsynchronousRequest: ...]`？或者我必须实现一个超时计时器吗？

考虑以下我`MBProgressView`在调用之前添加 a 并仅在完成块中将其删除的情况：

```
[self showHUDWithTitle:@"Configuring"];
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[[NSOperationQueue alloc] init]
                       completionHandler:^(NSURLResponse *response,
                                           NSData *data,
                                           NSError *error) {

     if ([data length] >0 && error == nil) {
         [self hideHUDWithFlag:YES 
                      andTitle:@"Finished" 
                   andSubtitle:@"(Box was configured)"];

     } else if ([data length] == 0 && error == nil) {
         [self hideHUDWithFlag:NO 
                      andTitle:@"Failed" 
                   andSubtitle:@"(Check box connection)"];
         NSLog(@"Nothing was downloaded.");

     } else if (error != nil) {
        [self hideHUDWithFlag:NO 
                     andTitle:@"Error" 
                  andSubtitle:@"(Check box connection)"];
         NSLog(@"Error = %@", error);
     }
 }]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T08:23:43.200

是的，完成处理程序总是被调用。如果请求因超时而失败，`error`将设置 和`data = nil`。

A`NSURLRequest`的默认超时时间为 60 秒，但您可以`request.timeoutInverval`在开始连接之前为其分配不同的值。所以不需要额外的计时器。

*补充：*在超时的情况下：

*   `[error domain]`是`NSURLErrorDomain`, 并且
*   `[error code]`是`NSURLErrorTimedOut`，

如果您只想显示错误消息，可以使用`[error localizedDescription]`，即“请求超时”。在这种情况下。（这可能取决于语言环境。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T09:24:21.417

```
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url
                                              cachePolicy:NSURLCacheStorageAllowed             
                                          timeoutInterval:20]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:22:56.453

[NSURLConnection sendAsynchronousRequest: ...] 在任何情况下都肯定会调用完成块。但是，如果您想将此过程限制为最大时间，您也可以使用超时计时器。

对于进度条，您将如何增加值？我建议您不要使用进度条，而是使用活动指示器。

希望这可以帮助。

# android - shouldOverrideUrlLoading 不起作用

> ID：15518317
> 
> 赞同：4
> 
> 时间：2013-03-20T08:11:59.533
> 
> 标签：android

在我的应用程序中，**shouldOverrideUrlLoading** () 在 4.0.3 版本上没有被调用。我已经在 2.2 和 4.0.1 上对其进行了测试，它们都运行良好。设备名称是**HTC verizon**。

我的目的是为页面中的 mailto: 和 tel: 链接提供自定义活动。如果 shouldOverrideUrlLoading() 从未被击中，关于如何完成这项工作的任何想法？

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:15:39.593

自动解释方法，您也应该覆盖 onPageStarted：

```
@Override
public void onPageStarted(WebView view, String url, Bitmap favicon) {
    super.onPageStarted(view, url, favicon);

    // 11 = Build.VERSION_CODES.HONEYCOMB (Android 3.0)
    if (Build.VERSION.SDK_INT < 11) {

    // According to this page:
    //
    // http://www.catchingtales.com/android-webview-shouldoverrideurlloading-and-redirect/416/
    //
    // shouldOverrideUrlLoading() is not called for redirects on
    // Android earlier than 3.0, so call the method manually.
    //
    // The implementation of shouldOverrideUrlLoading() returns
    // true only when the URL starts with the callback URL and
    // dummyCallbackUrl is true.

         if (shouldOverrideUrlLoading(view, url)) {
             view.stopLoading();
         }
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T20:02:16.303

改用以下方法 shouldOverrideUrlLoading()

```
 private static WebView webView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webView = (WebView) findViewById(R.id.web);

        webView.setWebViewClient(new webviewclient());
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com");

    }
public class webviewclient extends WebViewClient{

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {
        view.loadUrl(request.toString());
        return true;
    }
```

# javascript - 用 Object.create(null) 创建 JS 对象和 {} 一样吗？

> ID：15518328
> 
> 赞同：169
> 
> 时间：2013-03-20T08:12:35.303
> 
> 标签：javascript

我知道很多创建 JS 对象的方法，但我不知道那个`Object.create(null)`。

**问题：**

是否与以下内容完全相同：

```
var p = {} 
```

对比

```
var p2 = Object.create(null); 
```

?

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-03-20T08:37:19.000

它们不是等价的。`{}.constructor.prototype == Object.prototype`while`Object.create(null)`不继承任何东西，因此根本没有属性。

换句话说：一个ja​​vascript对象默认继承自Object，除非你明确地用null作为它的原型来创建它，比如：`Object.create(null)`。

`{}`而是等效于`Object.create(Object.prototype)`.

* * *

在 Chrome Devtool 中，您可以看到它`Object.create(null)`没有`__proto__`属性，而`{}`有。

[![在此处输入图像描述](../Images/bc722c84fb3b3b1501d37aaaa2cfb8b6.png)](https://i.stack.imgur.com/AtQ4c.png)

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2014-01-12T19:29:21.613

它们绝对不是等价的。我写这个答案是为了更全面地解释为什么它会有所作为。

1.  `var p = {};`

    创建一个从 继承属性和方法的对象`Object`。

2.  `var p2 = Object.create(null);`

    创建一个不继承任何东西的对象。

如果您将对象用作地图，并且使用上面的方法 1 创建了对象，那么在地图中进行查找时必须格外小心。由于`Object`继承了 from 的属性和方法，因此您的代码可能会遇到映射中存在您从未插入的键的情况。例如，如果您对 进行了查找`toString`，您会找到一个函数，即使您从未将那个值放在那里。你可以像这样解决这个问题：

```
if (Object.prototype.hasOwnProperty.call(p, 'toString')) {
    // we actually inserted a 'toString' key into p
} 
```

[请注意，可以将某些内容分配给`p.toString`，它只会覆盖继承的`toString`函数`p`。]

请注意，您不能仅仅`p.hasOwnProperty('toString')`因为您可能已将密钥“hasOwnProperty”插入到`p`中，所以我们强制它使用 中的实现`Object`。

另一方面，如果你使用上面的方法2，那么你就不用担心`Object`地图上出现的东西了。

您无法使用以下简单方法检查属性是否存在`if`：

```
// Unreliable:
if (p[someKey]) {
    // ...
} 
```

该值可能是一个空字符串，可能是`false`, or `null`, or `undefined`, or `0`, or`NaN`等​​。要检查属性是否存在，您仍然需要使用`Object.prototype.hasOwnProperty.call(p, someKey)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T19:16:53.107

通过 using 创建对象`{}`将创建一个原型为的对象，该对象`Object.prototype`继承了`Object`原型的基本功能，而通过 using 创建对象`Object.create(null)`将创建一个原型为 null 的空对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T06:51:34.713

如果有人正在寻找实施`Object.create(null)`，只是想知道它是如何工作的。它是使用`__proto__`非标准编写的，因此**我不推荐它**。

```
function objectCreateMimic()
{
  /*optional parameters: prototype_object, own_properties*/
  var P = arguments.length>0?arguments[0]:-1;
  var Q = arguments.length>1?arguments[1]:null;
  var o = {};
  if(P!==null && typeof P === "object")
  {
    o.__proto__ = P;
  }
  else if(P===null)
  {
    o.__proto__ = null;
  }
  if(Q!==null && typeof Q === "object")
  {
   for(var key in Q)
   {
     o[key] = Q[key];
   }
  }
  return o;
} 
```

**注意**：出于好奇，我写了这个，并且只是用简单的术语来写，例如，我没有将属性描述符从第二个对象转移到返回对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T04:12:03.533

当您使用 Object.create(null) 创建一个对象时，这意味着您正在创建一个没有原型的对象。**这里的null**表示原型链的结束。然而，当您创建像 {} 这样的对象时，将添加对象原型。因此，这是两个不同的对象，一个有原型另一个没有原型。希望这会有所帮助

# ios - 如何使用 QLPreviewController 的单个实例来查看来自服务器的多个 Powerpoint 演示文稿？

> ID：15518333
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:12:50.540
> 
> 标签：ios

关于如何使用 QLPreiviewController 来通过服务器获取多个 PPT 的任何想法。？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:40:42.557

将文档的 url 放在一个数组中，并实现[QLPreviewControllerDataSource](http://developer.apple.com/library/ios/ipad/#documentation/NetworkingInternet/Reference/QLPreviewControllerDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009665)协议中的两种方法。[苹果](http://developer.apple.com/library/ios/ipad/#samplecode/DocInteraction/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010052)有一个例子。

# android - 由于适配器，应用程序崩溃

> ID：15518337
> 
> 赞同：1
> 
> 时间：2013-03-20T08:12:54.003
> 
> 标签：android, facebook-graph-api, android-listview, android-arrayadapter

自上周以来，我在 Listview 中显示 facebook 好友列表数据时遇到问题，我无法弄清楚。我尝试了很多方法来做到这一点，但不幸的是它没有成功。好友列表显示在 logcat 中，但是当我想在 ListView 中显示它并且应用程序崩溃时。发生空指针异常错误和其他一些运行时错误

请帮我解决这个问题
我只想在 ListView 中显示来自 for 循环的朋友信息下面是我的代码

```
 public class About extends  Activity {
public ArrayList<String> values;

    ListView listViewPhoneBook;
@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.phone_book);
        values = new ArrayList<String>();
        getfriends();
        // Log.d("All Data",values.toString());
        ListView listViewPhoneBook=(ListView)findViewById(R.id.listPhoneBook);

          ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.each_contact, values);
          listViewPhoneBook.setAdapter(adapter);
          adapter.notifyDataSetChanged();}

public void getfriends(){
Request.executeMyFriendsRequestAsync( (Session)MainActivity.fbSession , new Request.GraphUserListCallback() {

    @Override
        public void onCompleted(List<GraphUser> users, Response response)  {
            for (int i = 0; i < users.size(); i++) {
                values.add(users.get(i).getName());
            }
            Log.d("All Data1",values.toString());
        }
    });
}
} 
```

日志猫

```
 03-20 14:18:28.156: E/ArrayAdapter(21885): You must supply a resource ID for a TextView
03-20 14:18:28.169: E/AndroidRuntime(21885): FATAL EXCEPTION: main
03-20 14:18:28.169: E/AndroidRuntime(21885): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.AbsListView.obtainView(AbsListView.java:2088)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1249)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.ListView.onMeasure(ListView.java:1160)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.View.measure(View.java:12773)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4788)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1374)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1022)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:555)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.View.measure(View.java:12773)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4788)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.View.measure(View.java:12773)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:815)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.View.measure(View.java:12773)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4788)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2108)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.View.measure(View.java:12773)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1147)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2642)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.os.Looper.loop(Looper.java:137)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.app.ActivityThread.main(ActivityThread.java:4666)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at java.lang.reflect.Method.invoke(Method.java:511)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
03-20 14:18:28.169: E/AndroidRuntime(21885):    at dalvik.system.NativeStart.main(Native Method)
03-20 14:18:28.169: E/AndroidRuntime(21885): Caused by: java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.widget.TextView
03-20 14:18:28.169: E/AndroidRuntime(21885):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379)
03-20 14:18:28.169: E/AndroidRuntime(21885):    ... 30 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:21:39.007

放

```
values = new ArrayList<String>();
getfriends(); 
```

和

```
for (int i = 0; i < users.size(); i++) {
    values.add(users.get(i).getName());
    Log.d("FRIENDSNAME",  users.get(i).getName());
} 
```

编辑：最终代码

使用此代码

```
public class About extends  Activity {

/*private String[] values;*/
public ArrayList<String> values;
    //private ActivityList listAdapter;

    ListView listViewPhoneBook;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

        super.onCreate(savedInstanceState);
        setContentView(R.layout.phone_book);
        values = new ArrayList<String>();
        listViewPhoneBook=(ListView)findViewById(R.id.listPhoneBook);
        getfriends();
        // Log.d("All Data",values.toString());

}

public void updateList()
{
          ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.each_contact, values);
          listViewPhoneBook.setAdapter(adapter);
          adapter.notifyDataSetChanged();
}

public void getfriends()
{
Request.executeMyFriendsRequestAsync( (Session)MainActivity.fbSession , new Request.GraphUserListCallback() {

    @Override
        public void onCompleted(List<GraphUser> users, Response response)  {
        /*values = new String[users.size()];*/

            for (int i = 0; i < users.size(); i++) {
               // values[i] = users.get(i).getName();
                values.add(users.get(i).getName());
               /* Log.d("FRIENDSNAME",  users.get(i).getName());*/

            }
            Log.d("All Data1",values.toString());
            updateList();
        }
    });
} 
```

# python-3.x - NLTK 标记器 ImportError：没有名为 copy_reg 的模块

> ID：15518338
> 
> 赞同：1
> 
> 时间：2013-03-20T08:12:56.057
> 
> 标签：python-3.x, nltk, importerror

简短信息：我正在运行 python 3.0 并安装了 NLTK（从 3.3 切换回来，因为 NLTK 不支持 3.3，这很糟糕，因为我拥有的所有其他扩展都适用于 3.3）
尝试提取命名实体时出现此错误：

```
File "D:\UM\Programming\Thesis\Thesis\test.py", line 10, in <module>
   sentences = nltk.sent_tokenize(file)
File "C:\Python30\Lib\site-packages\nltk\tokenize\__init__.py", line 75, in sent_tokenize
   tokenizer = load('tokenizers/punkt/english.pickle')
File "C:\Python30\Lib\site-packages\nltk\data.py", line 630, in load
   resource_val = pickle.load(opened_resource)
File "C:\Python30\lib\pickle.py", line 1323, in load
   return Unpickler(file, encoding=encoding, errors=errors).load()
ImportError: No module named copy_reg 
```

我在其他地方读到`ImportError`转储到非二进制文件时会出现这种情况，但在这种情况下，我试图读取已经转储的泡菜文件。有谁知道如何解决错误？
上述行中的变量`file`只是一个`string`包含少量文本的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:57:23.863

根据这篇[帖子，](https://github.com/nltk/nltk/issues/169) nltk 3.x 仍然存在一个主要问题：2.x 中的 nltk 中的模型是使用 python 2.x 保存的。使用 python 3 中新的 unicode 感知 io 系统，模型必须重新训练并保存在 python 3 可读的文件中。该帖子还有一个链接到带有新训练模型的分支，但我还没有尝试过。所以基本上由 unpickle 创建的 nltk 中的错误消息是由 python 2 和 3 之间不兼容的 pickle 版本引起的。编辑：实际上这里是一个[帖子](https://github.com/nltk/nltk/pull/359)，为什么提供的修复可能不起作用。

# jsf - 什么时候应该同步托管 bean 的方法？

> ID：15518339
> 
> 赞同：2
> 
> 时间：2013-03-20T08:13:00.507
> 
> 标签：jsf, thread-safety, managed-bean

如果该方法被例如`commandButton`组件作为AJAX 请求调用，并且该方法正在对托管bean 的实例变量进行操作，我们是否必须同步托管bean 方法？

假设我们有这个简单的托管 bean：

```
public class ManagedBeanTest {

  private int count;

  public int getCount() {
    return count;
  }

  public void setCount(int count) {
    this.count = count;
  }

  public String increaseCount() {
    count++;
    return null;
  }

} 
```

因此，如果在这种情况下，该`increaseCount`方法被`commandButton`内部的组件调用`action`，我是否必须同步该方法？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:29:23.313

> *什么时候应该同步托管 bean 的方法？*

当托管 bean 放入错误的范围时。因此，在设计合理的应用程序中，永远不会。

在**您的特定**示例中，您应该使用[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)而不是`int`并且可能使用一堆`synchronized`修饰符。

```
private AtomicInteger count = new AtomicInteger();

public int getCount() {
    return count.get();
}

public void incrementCount() {
    count.incrementAndGet();
}

// No setter! 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [JSF 2.x @ViewScoped 托管 bean 线程安全吗？](https://stackoverflow.com/questions/7410723/are-jsf-2-x-viewscoped-beans-thread-safe/7410894#7410894)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:28:35.770

这取决于 bean 的用例和范围。如果您的托管 bean 是请求范围的，则不需要任何同步。在视图范围的 bean 中，当您有多个 AJAX 请求时，不可能出现竞争条件问题（根据 JSF 2 规范和关于 Ajax 请求队列的章节来自同一客户端的 AJAX 请求排队并按顺序执行）。但是，您应该同步会话范围的 bean 方法（例如，如果用户在多个选项卡中打开页面）。当然，应用程序范围的 bean 的方法，它对托管 bean 的字段进行操作应该是同步的。

# java - Google Maps Query 返回的 JSON 包含编码字符，如 \x26（如何解码？）

> ID：15518340
> 
> 赞同：2
> 
> 时间：2013-03-20T08:13:03.663
> 
> 标签：java, json, string, google-maps, utf-8

在 Java 应用程序中，我得到 JSON（来自 Google Maps），`\x26`其中包含我想要转换为其原始字符的字符`&`。据我所知，这是一个 UTF-8 符号，但我不完全确定。在源 JSON 中可以出现各种编码字符（例如`\x3c/div\x3e`）。我怎样才能解码它们？

我试过：

```
String json = "\\x3c/div\\x3e";
byte [] b = json.getBytes("UTF-8");
json = new String(b,"UTF-8"); 
```

没运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:15:20.623

让它工作：

```
String json = "\\x3c/div\\x3e";        
json = URLDecoder.decode(json.replace("\\x", "%"), "UTF-8")
        .replace("\\=", "=")
        .replace("\\&", "=")
        .replace("\\?", "="); 
```

对于 Google Maps Query JSON Result 的结果出现的其他问题，需要另外三个替换。

# jquery - 使用 jQuery Validate 和 ASP MVC 在页面的其他部分显示错误消息

> ID：15518342
> 
> 赞同：1
> 
> 时间：2013-03-20T08:13:13.477
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用`ASP.NET MVC 4`和`jQuery validate`。

我有以下`HTML`标记：

```
@Html.TextBoxFor(x => x.ChangeIncidentNumber)
<button id="verifyButton" type="button">Verify</button>
@Html.ValidationMessageFor(x => x.ChangeIncidentNumber) 
```

`verifyButton is just a button`而**不是**提交按钮。单击时，它会从数据库中获取数据并用它填充文本框。当用户单击按钮并且在文本框中没有输入任何内容时，我需要显示一条必需的消息。

我有以下 jQuery 代码：

```
$(document).ready(function () {
     $("#searchForm").validate({
          rules: {
               ChangeIncidentNumber: "required"
          },
          messages: {
               ChangeIncidentNumber: "Required"
          }
     });

     $('#verifyButton').click(function () {
          $('#searchForm').valid();
     });
}); 
```

如果文本框为空并且我单击按钮，则错误消息将显示在文本框和按钮之间。我希望它显示在按钮的右侧。不确定是否可能，但我可以使用生成的元素`@Html.ValidationMessageFor`来显示消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:55:10.333

如果您有表单并定义了`form-id`，那么您可以直接`validation`在表单提交上设置，无需在验证按钮单击时定义功能。

当您提交表单时，它会自动检查验证。

**在右侧显示消息：**

```
<style>
label .error{
   float:none;
   display:block;
}
</style> 
```

# php - 无法使用 noczone php-sdk 发送 2 个通知

> ID：15518343
> 
> 赞同：2
> 
> 时间：2013-03-20T08:13:19.763
> 
> 标签：php, android, phpbb

我正在使用 noczone php-sdk 将有关我论坛中新帖子的通知发送到我的手机，但有时如果 2 人写了一篇新帖子，我只会收到一个关于第一篇帖子的通知。我没有收到关于另一个的任何通知（是的，另一个帖子已保存到数据库中！）

我正在运行 phpbb 并触发以下代码（因为它来自 noczone）

```
$notifyNoc = new nocZoneNotify();
$notifyNoc->send("New Post $postId - $postTitle");
error_log('Notification sent ! - '.$postId.' '.date()); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T00:11:30.873

您每 15 秒只能发送 1 条通知进行测试。

# opencv - 为什么 BFMatcher::match() 在 OpenCV 中不对称？

> ID：15518344
> 
> 赞同：2
> 
> 时间：2013-03-20T08:13:20.930
> 
> 标签：opencv, match

将图像 A 中的二进制描述符匹配到一组图像 B*，我碰巧尝试将“火车”和“查询”图像反转为以下函数：

```
cv::BFMatcher matcher;
matcher.match(queryDescriptors, trainDescriptors, matches); 
```

第一点是该函数不是对称的，即 match(trainDescriptors, queryDescriptors, matches) 不会给出相同数量的匹配。

其次，如果我使用 A 作为查询图像，使用 B* 作为训练图像（在 for 循环中），那么我总是从 A 到 B* 的图像获得相同数量的匹配（例如，如果 A -> B1 有 155 个匹配项，然后 A -> Bx 都有 155 个匹配项）。

但是如果我做相反的事情（即使用 B* 作为查询图像，使用 A 作为训练图像），那么每次匹配的数量都是不同的（这对我来说似乎更合乎逻辑）。

**直觉上，我会说 A 和 Bx 之间的匹配应该与 Bx 和 A 之间的匹配相同，但显然不是这样。这是为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:25:29.513

BFMatcher::match() 实际上为查询图像的每个描述符返回与训练图像的最佳匹配。由此，我们可以得出结论：

*   匹配数始终是查询图像的描述符数
*   这是不对称的：假设描述符 Ax 的最佳匹配是 Bz，而描述符 Ay 的最佳匹配是 Bz（即 A 上的两个描述符与 B 中的同一个描述符匹配），那么我们清楚地看到最佳匹配因为 Bz 要么是 Ax 要么是 Ay，但不是两者兼而有之。

假设之后进行几何验证（例如使用单应性），那么最好以匹配数量最大化的方式选择查询图像和训练图像。

# c# - ADB PUSH 编码

> ID：15518348
> 
> 赞同：0
> 
> 时间：2013-03-20T08:13:29.963
> 
> 标签：c#, android, encoding, adb, fat

我正在使用 adb push 从命令行（从 C# 桌面应用程序）将文件从 Windows 复制到我的 Nexus 7。问题是由于编码差异，带有重音符号的文件将无法正确复制......

有没有办法在复制之前设置 adb 的编码类型？或者你知道另一种在命令行中将文件从我的桌面推送到我的设备的方法吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:24:29.630

总之Android使用[FAT](https://stackoverflow.com/a/2703882/951448)文件系统。并在文件名中`FAT`使用**UTF-8 。**这意味着即使您设法以某种方式**将不是 UTF-8**的文件名作为命令行参数传递给 adb，由于上述限制，adb 的行为也无法确定。一个好的解决方法是：

*   读取文件名并将其更改为 UTF-8 投诉名称。

    ```
    byte[] bytes = Encoding.Default.GetBytes(originalPath);
    newPath= Encoding.UTF8.GetString(bytes); 
    ```

*   将文件复制到新生成的名称。“如果新名称与原始名称不匹配”

*   使用 adb 上传文件，然后删除副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:18:35.743

adb 不会重新编码文件，它只是按原样推送二进制内容。在使用 adb push 之前，您必须以正确的编码 (UTF-8) 创建文件。

编辑：啊，问题不在于包含重音字符的文件，而在于具有此类字符的文件名。你不能简单地用一个简单的名字推送文件，然后在设备上重命名它吗？

# c# - 如何在网格视图中显示从下拉列表中选择的数据？

> ID：15518349
> 
> 赞同：0
> 
> 时间：2013-03-20T08:13:37.010
> 
> 标签：c#, asp.net, gridview

我有一个`dropdownlist`我想在其中展示一所大学的不同分支。

当用户从中选择一个值时，与`dropdownlist`该值对应的数据必须显示在网格视图中。

例如，当用户从下拉列表框中选择“信息技术”时，必须在网格视图中显示与信息技术相关的教职员工列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:30:59.913

在下拉选择的索引更改方法上编写代码，该方法将通过获取值将数据绑定到gridview并将下拉属性自动回发设置为true

.aspx 文件

```
<asp:DropDownList id="ddlBranch" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlBranch_onSelectIndexChanged"/>
<asp:ListItem Value="1">Finance</asp:ListItem>
<asp:ListItem Value="2">Information Technology</asp:ListItem>
</asp:DropDownList>
<br/>
<br/>

<asp:GridView id="GridView1" runat="server"> 
```

你的 C# 代码

```
protected void ddlist_onSelectIndexChanged(object sender, EventArgs e)
 {
           string selectedBranch=ddlBranch.SelectedItem.Text;

           DataSet dsBranchDetails=GetDataForBranch(selectedBranch);

            GridView1.DataSource=dsBranchDetails;
            GridView1DataBind();
 }

public DataSet GetDataForBranch(string selectedBranch)
{
 //     your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:28:17.337

这是我的做法：

1）使用全局数据表变量来存储完整的数据。它将包含您的整个数据库表（类似于“从教职员工中选择 *”）

2）在加载时，使用该变量来填充一个gridview，也就是你在aspx中的表。通过提取大学分支的不同值并将其绑定到下拉列表，还可以使用它来构建选择框的项目列表，[请参阅此帖子以获取代码](https://stackoverflow.com/questions/1199176/how-to-select-distinct-values-from-datatable)

3) 将“onchange”事件附加到您的下拉列表中。在该事件的实现中，您将捕获选定的值，并可以使用默认数据视图的[rowfilter 属性](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)使用它来过滤您的数据表（这是全局的） 。完成后，您只需要触发一个新的 databind() ，将此过滤器数据绑定回您的 gridview

希望对您有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:30:50.010

1.  将您的网格视图绑定到数据源
2.  在您的数据源（对象数据源/SQL 数据源等）上定义一个控制参数并将控制参数设置为您的下拉列表
3.  将下拉列表的 AutoPostback 属性设置为 true

现在，每当您从下拉列表中选择一个值时，都会分别填充网格视图。

# php - 在 POST 之后设置 cookie 会给出“未定义索引”通知

> ID：15518350
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:13:40.917
> 
> 标签：php, jquery, codeigniter, cookies, setcookie

我在 php 中有一个 setcookie 函数。我有一个带有输入字段和提交按钮的 jquery 对话框。当我在输入字段中输入邮政编码并推送提交时，邮政编码保存在 php cookie 中。

此 cookie 将显示在主页上的输入字段中。

现在是我的问题，当我没有设置 cookie 时，例如，我将输入字段留空并单击提交它给我一个错误。但在输入字段中。

我正在使用codeigniter，所以这可能是问题所在。

错误：

> 消息：未定义索引：名称文件名：views/navmenu.php 行号：33

我设置的 cookie 和表单代码：

```
<div id="dialog" class="hidden" title="Welkom bij OostWestRegioBest.nl">
Vul hier uw postcode in.
<form method="post" action"">
Postcode: <input type="text" name="name" size="25">
<input type="submit" value="Opslaan">
<input type="hidden" name="submitted" value="true">
</form>

<?php
// set the cookie with the submitted user data
setcookie('name', $_POST['name']);
?>

<?php
    if(isset($_POST['Submit']))
    {
    header("location: {$_SERVER['PHP_SELF']}");
    }
?>

</div> 
```

我将在其中显示 cookie 的输入字段。

```
<input type="text" value='<?php echo $_COOKIE['name'] ?>'> 
```

希望有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:21:16.520

请仅在提交表单后设置cookie

```
if(isset($_POST['Submit'])){
     setcookie('name', $_POST['name']);
} 
```

您可以将输入字段更改为

```
<input type="text" value='<?php echo isset($_COOKIE['name']) ? $_COOKIE['name'] : '' ?>'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:20:19.710

仅当 $_POST 包含具有索引 - 名称的元素时才设置 cookie。

你可以试试这个。

```
<?php
    // set the cookie with the submitted user data
    setcookie('name', isset($_POST['name']) ? $_POST['name'] : "");
?> 
```

或者仅当 cookie 包含具有索引 - 名称的元素时才设置 cookie。

```
<?php
    if (isset($_POST['name'])) {
       // set the cookie with the submitted user data
       setcookie('name', $_POST['name']);
    }
?> 
```

根据您的要求选择任何一种。

# php - PHP 的 preg_match() 匹配字符串末尾的字符

> ID：15518355
> 
> 赞同：4
> 
> 时间：2013-03-20T08:14:12.403
> 
> 标签：php, regex, preg-match

我有下面的*if*语句，它永远不会返回 True。怎么了？

我是 PHP 和正则表达式的新手。

```
$String = '123456';
$Pattern = "/\d{2}$/";

// I intend to match '56', which are the last two digits of the string.

if(preg_match($Pattern $String, $matches))
{
    echo 'Matched';
} 
```

如果`$Pattern`是`"/^\d{2}/"`，则返回 true 并匹配数字 '12'；

* * *

我的错。上面的代码运行良好。

在实际代码中，$String 是从一个变量分配的，它总是以一个我不知道的点结束。

匹配上面最后两位数字的要求仅用于问题解释。该表达式在实际代码中是必需的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T08:24:23.567

你是对的。

```
$String = '123456';
$Pattern = "/\d{2}$/";
$Pattern2 = "/^\d{2}/";

if(preg_match($Pattern, $String, $matches))
{
    print_r($matches); // 56
}

if(preg_match($Pattern2, $String, $matches))
{
    print_r($matches); // 12
} 
```

# c++ - 堆栈上的匿名对象，在 C++ 中？

> ID：15518356
> 
> 赞同：8
> 
> 时间：2013-03-20T08:14:14.223
> 
> 标签：c++

我正在开发一个日志/跟踪单元（请**不要**指向现有的，这是为了体验和结果）。

要获得运行时调用堆栈跟踪，想法是首先构造一个`TraceObject`实例，一个函数被输入，它携带当前类和函数的信息。有点类似于：

```
TraceObject to( "MyClass", "myClassFunction" ); 
```

`TraceObject`推`this`入每个线程堆栈的构造函数，析构函数再次弹出它。因此可以在堆栈中查询调用堆栈。

我对这个工作感到满意。但是，有一个小告密：对象`to`。按照设计，它*永远不会*被这个名称所指。因此，它不需要*有*一个名称，尤其是可能与客户端使用的任何标识符（或者，在`_`前缀的情况下，实现）冲突的名称。

**tl;博士**

是否可以在堆栈上创建一个*匿名*的非临时对象（即，一个将一直存在到函数返回但没有标识符的对象），如果是，它将如何完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:29:35.077

**不。**

C++ 中有匿名对象，它们是表达式结果的临时对象，但它们只存在于它们所在的语句的上下文中。

如果你真的试图声明一个匿名对象，你会混淆解析器，它会认为你在声明......一个函数！

* * *

但是，有必要吗？

如果您接受使用宏来实际声明`TraceObject`，那么为每个跟踪使用宏就很简单；从而在那里提供类和功能。使用`__func__`或等效项，您可以提取类名和函数名（需要一些字符串解析，取决于编译器）并从那里开始工作。

当然，无论如何，您都会为每个跟踪使用一个宏，因为您可能需要文件名和行号！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T08:21:45.693

正如我在评论中所说，不能使用范围受限的匿名变量。

```
#define BEGIN_LOG   TraceObject abcdefghij( "", __func__ );

void Function(){
    BEGIN_LOG;

    //bla bla

} 
```

应该这样做，前提是有一个编译器宏来获取类名。

编辑：没有运气通过简单的方法获取类名，您可能需要执行类似于[Class name macro](https://stackoverflow.com/questions/3563783/class-name-macro)建议的操作。或者只是凑合着`__FILE__`。

编辑：您可能想尝试查看`__func__`其中`__FUNCTION__`一个或两个是否按您希望的方式工作。也没有指定 C++ 标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:42:41.403

一些行号的东西：

```
#define XPASTE(arg1, arg2) PASTEX(arg1, arg2)
#define PASTEX(arg1, arg2) arg1 ## arg2
#define TRACELOG() \
            TraceObject XPASTE(trace_object,  __LINE__) 
```

# javascript - 带有点击事件的 setinterval 根本不起作用

> ID：15518359
> 
> 赞同：0
> 
> 时间：2013-03-20T08:14:41.490
> 
> 标签：javascript, jquery, click, setinterval

我在让“setinterval”功能在“click”事件中工作时遇到问题。它在点击事件中根本不起作用，而如果我将它放在点击事件之外它起作用..我该如何解决这个问题？

我在谷歌上搜索了一个解决方案，但似乎“点击”事件已经存在问题。我希望你能帮助我解决这个问题。

谢谢。

```
function myTimer() {
    alert("test");
};

$(document).ready(function() {  
    $('#testButton').click(function() {
        var myVar = setInterval(function() {
            myTimer();
        }, 1000);
    });
}); 
```

**抱歉，伙计们...看来我这边有错误..我将输入按钮设置为运行服务器，这就是问题所在...感谢你们的帮助..对不起这个问题。 ..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:19:45.460

发布您的 html 代码并检查是否包含 jquery。您还可以检查 chrome 控制台或 firefox firebug 中是否有任何错误。如果页面上有按钮，您的代码[在这里有效](http://jsfiddle.net/H2Hjz/)

```
<button id="testButton">clickme</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:19:13.987

您确定要使用 setInterval 吗？setInterval 将一直运行相同的函数，直到它被清除。

不要在 setInterval 调用中定义函数，而是尝试仅引用 myTimer，即：

```
$('#testButton').click(function() {
    var myVar=setInterval(myTimer, 1000);
}); 
```

参见[“setInterval”与“setTimeout”](https://stackoverflow.com/questions/2696692/setinterval-vs-settimeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:21:17.260

尝试：

```
var myTimer = function() {
    alert("test");
}

$(document).ready(function() {
    $('#testButton').click(function() {
        var reload = function() {
            setTimeout(function() {
                myTimer();
                reload();
            }, 1000);
        }
        reload();
    });
}); 
```

# delphi - libvlc vmem 访问冲突

> ID：15518361
> 
> 赞同：3
> 
> 时间：2013-03-20T08:14:42.803
> 
> 标签：delphi, delphi-7, libvlc

我在我的项目中使用**paslibvlc**从*ip 摄像机*中获取以 h.264 流式传输的视频。我需要从此流中获取快照并尝试使用**vmem**。我的项目是用*delphi 7*编写的。当我使用字符串“rtsp://ip/main”连接到相机时，一切正常，但是当我设置回调和格式化时，会出现*访问内存冲突*错误。有人可以对我说，我做错了什么吗？这是代码

```
PBytes = ^TBytes;
TBytes = array of byte;

var
   MainForm: TMainForm;
   ctx:TBytes;

const
   cameraURL = 'rtsp://192.168.123.100/main';

function lock(opaque : Pointer; var planes : Pointer) : Pointer;
function unlock(opaque : Pointer; picture : Pointer; planes : Pointer) : Pointer;
function display(opaque : Pointer; picture : Pointer) : Pointer;

implementation

{$R *.dfm}

function lock(opaque : Pointer; var planes : Pointer) : Pointer;
begin
   planes := x;
end;

function unlock(opaque : Pointer; picture : Pointer; planes : Pointer) : Pointer;
begin
end;

function display(opaque : Pointer; picture : Pointer) : Pointer;
begin
end;

procedure TMainForm.PlayerInit();
var
  args: packed array[0..6] of PAnsiChar;
begin
  libvlc_dynamic_dll_init();

  SetLength(ctx, 1280*720*4+32);

  if (libvlc_dynamic_dll_error <> '') then
  begin
    MessageDlg(libvlc_dynamic_dll_error, mtError, [mbOK], 0);
    exit;
  end;

   args[0] := PAnsiChar(libvlc_dynamic_dll_path);
   args[1] := '--no-video-title-show';
   args[2] := '--no-xlib';
   args[3] := '--no-audio';

  p_li := libvlc_new(Length(args)-1, @args[0]);
  p_mi := NIL;
end;

procedure TMainForm.PlayerPlay(fileName: WideString);
var
  p_md: libvlc_media_t_ptr;
begin
  btm:=Tbitmap.Create;
  btm.Width:=1280;
  btm.Height:=720;
  PlayerStop();

  // create new media from fileName
  p_md := libvlc_media_new_path(p_li, PAnsiChar(System.UTF8Encode(fileName)));

  //libvlc_media_player_set_media(p_mi, p_md);
  p_mi := libvlc_media_player_new_from_media(p_md);

  if (p_mi <> NIL) then
  begin
   libvlc_video_set_callbacks(p_mi,@lock,@unlock,@display,@ctx);
   libvlc_video_set_format(p_mi, 'RV32', 1280, 720, 1280*4);
    //libvlc_media_player_set_hwnd(p_mi, btm.Handle);
  end;

  // play
  libvlc_media_player_play(p_mi);

  // release media
  if (p_md <> NIL) then
  begin
    libvlc_media_release(p_md);
    // p_md := NIL;
  end;
end;

procedure TMainForm.FormActivate(Sender: TObject);
begin
  PlayerInit();
  PlayerPlay(cameraURL);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:28:37.937

您的回调使用`register`调用约定。但这是 Delphi 特定的调用约定。您的图书馆使用`cdecl`. 这可以从库的 Pascal 源代码中看出：

```
type
  libvlc_video_lock_cb    = function(opaque : Pointer; 
      var planes : Pointer) : Pointer; cdecl;
  libvlc_video_unlock_cb  = function(opaque : Pointer; 
      picture : Pointer; planes : Pointer) : Pointer; cdecl;
  libvlc_video_display_cb = function(opaque : Pointer; 
      picture : Pointer) : Pointer; cdecl; 
```

您需要更改回调以匹配库的调用约定。

如果您没有使用`@`运算符来获取函数指针，编译器就会告诉您所有这些。这样做意味着编译器不会检查您的函数指针的签名是否与声明的签名匹配。这是人们最常犯的错误之一。无论出于何种原因，获得函数指针的方法是使用运算符的神话一直存在`@`。

总之，您需要添加`cdecl`到您的回调函数：

```
function lock(opaque : Pointer; var planes : Pointer) : Pointer; cdecl;
function unlock(opaque : Pointer; picture : Pointer; 
    planes : Pointer) : Pointer; cdecl;
function display(opaque : Pointer; picture : Pointer) : Pointer; cdecl; 
```

然后停止使用`@`来获取函数指针：

```
libvlc_video_set_callbacks(p_mi, lock, unlock, display, @ctx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:50:41.523

所有问题都在于我如何分配内存。在第一个主题中，我在程序的区域设置内存中分配内存，例如 SetLength(ctx, 1280*720*4+32)，但是为了做好工作，我必须使用 AllocMem 来使用非托管内存。

# ruby-on-rails - 无法通过 rails 连接到 oracle

> ID：15518366
> 
> 赞同：1
> 
> 时间：2013-03-20T08:14:57.777
> 
> 标签：ruby-on-rails, oracle

尝试通过 Ruby On Rails 连接到 oracle 时遇到问题 `( ruby -r oci8 -e "OCI8.new('hr', 'password').exec('SELECT * FROM jobs ORDER BY 1') {|r| puts r.join}" )`，如下所示：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_re
quire.rb:46:in `require': incompatible library version - C:/RailsInstaller/Ruby1
.9.3/lib/ruby/site_ruby/1.9.1/i386-msvcrt/oci8lib.so (LoadError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/core_
ext/kernel_require.rb:46:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/oci8.rb:20:in
`<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/core_
ext/kernel_require.rb:46:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/core_
ext/kernel_require.rb:46:in `require' 
```

这是我正在使用的：

```
 1\. ruby1.9.3p125 (2012-02-16) [i386-mingw32]
 2\. Rails 3.2.1
 3\. gem 2.0.3
 4\. Windows 7
 5\. Oracle 10g Express Edition 
```

有人知道如何解决上述问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T17:46:21.203

它将确保您安装的 oracle 客户端是 32 位的。

# php - 复选框不被选中

> ID：15518371
> 
> 赞同：1
> 
> 时间：2013-03-20T08:15:12.330
> 
> 标签：php, html

我正在尝试检索其值存储在数据库中的选中复选框，但即使它们存在于数据库中，它们也始终未选中。我已经尝试过了，但它不起作用，虽然具有不同结构的相同代码可以工作，但出于框架原因，我需要使用它来实现：

```
if(isset($sp['Etunimi'])&&isset($sp['Sukunimi'])){
        echo "<form method='post' action=''>";
        $comp=$this->All_Competences;
        echo"<br/>select competences for:".$sp['Etunimi'];
        $id=$sp['Id'];
        $tmp=array();
        if(isset($_POST['select_employee'])){
            $cid=$this->cids;
        }
        foreach($cid as $test)
        {
            array_push($tmp, $test['c_ID']);
        }
        for($i=0;$i<count($tmp);$i++){
        }
        echo "<table><th>valid?</th><th>Competence description</th>";

        foreach($comp as $compi){
            $checked='';
            if(in_array($compi['Competence_ID'],$tmp)){
                $checked='checked';

            }
            echo "<tr><td><input type='checkbox'".$checked."name='c[]' value='".$compi['Competence_ID']."'></td><td>".$compi['Competence_Description']."</td></tr>";

        }   
        echo "</table>";
        echo "<input type='hidden' name='action' value='selectchecked'>";
        echo "<input type='hidden' name='id' value='".$id."'>";
        echo "<input type='submit' value='submit checks'>";
        echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:24:05.640

输入名称之间必须有空格，因此您需要添加一些空格，因为 HTML 不知道如何解释它（输出为：）`checkedname='c[]'`：

```
if(in_array($compi['Competence_ID'],$tmp)){
    $checked = ' checked ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:19:02.347

试试这个：

```
 echo "<tr><td><input type='checkbox' checked='".$checked."' name='c[]' value='".$compi['Competence_ID']."'></td><td>".$compi['Competence_Description']."</td></tr>"; 
```

似乎你错过了：`checked=".$checked`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:22:38.023

`checked`在和之间添加一个空格`name.`

```
echo "<tr><td><input type='checkbox' checked='".$checked."' name='c[]' value='".$compi['Competence_ID']."'></td><td>".$compi['Competence_Description']."</td></tr>"; 
```

**或者**

```
echo "<tr><td><input type='checkbox' ".$checked." name='c[]' value='".$compi['Competence_ID']."'></td><td>".$compi['Competence_Description']."</td></tr>"; 
```

# asp.net-mvc-3 - MVC3 在内存中保存一个复杂的对象

> ID：15518374
> 
> 赞同：0
> 
> 时间：2013-03-20T08:15:19.513
> 
> 标签：asp.net-mvc-3, session, serialization, transactions

我们有一个基于 ASP.Net MVC3 的网络应用程序，用于索赔条目和管理。为简化起见，将索赔视为订单。声明可以有子对象，其子对象之一可以有子子对象。喜欢 ...

（即声明->项目->文件）

我们需要一个类似事务的机制。也就是说，在声明条目期间，用户可以添加/编辑/删除子对象或子对象。最后，他可以“**接受**”（提交）所有更改（对数据库）或“**取消**”（回滚/拒绝）所有更改。

我有哪些选项可以在技术上实现这个支持接受/取消机制的“事务性”功能解释。以下是我的一些想法——

1.  **获取整个 Claim 对象并通过序列化将其保存在会话中**。所有更改都将在“内存中”对此声明对象进行，最终用户可以决定接受/取消。

2.  **为每个 entity(xxxx) 添加一个“xxxx_transit”表**。所有操作都将在这个临时传输表上完成，当提交时，我们最终将更改应用到实际的 xxxx 表。

3.  **Knockout 方法**- 将 Claim 模型存储在客户端，对其应用更改。UI 绑定将立即反映更改。最后在提交时 - 将更改应用于数据库。

我的评价

> 1.  我们已经完成了，我们使用了 ASP.Net 会话状态服务，但是对象序列化会影响性能！
> 2.  额外的复杂性值得吗？尤其是与#1 的性能提升相比。
> 3.  我相信这会增加 GUI 层的复杂性和操作处理。安全吗？

你会推荐哪一个？如果误导，忘记我的想法，请分享你认为最好的？

谢谢你。

# c++ - 拥有 128 个整数（如 ++i）如何生成 128 种不同的 RGB 颜色（整数、整数、整数）？

> ID：15518381
> 
> 赞同：2
> 
> 时间：2013-03-20T08:15:39.707
> 
> 标签：c++, rgb

我正在迭代多边形标志。我有 128 个独特的 tham。我想知道如何为每个获得可区分的颜色（以便每个标志或多或少具有可区分的颜色）？如何从一个整数中获得这样的 RGB 整数？

拥有一个基于框架的模型东西是`rand()%255, rand()%255, rand()%255`没有意义的，而为每个可验证的存储颜色不是我想要的。`255-i`变化不提供可区分的结果。所以我寻求一种算法来从 given 中获得可区分的颜色`i`。

我有一个迭代器`i`和`unsigned long long`128 位掩码 ( `0001`, `0010`, `0100`...)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:19:05.920

128 个数字是 7 位的数据。我会将 7 位划分为 (2, 2, 3) 并使用这些（按某种顺序）作为红色、绿色和蓝色的高阶位。这应该在 RGB 颜色空间中尽可能地分散颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T09:03:49.977

简单地使用网格 r=4, g=8, b=4 很容易，但不一定会产生最佳输出，因为深色中的不同色调应该较少。

实验室空间中的处理将在每个单元之间具有最相等的感知距离，但我相信可以从 YUV 或 HSV 中找到合理的替代方案。

仅从评估其他答案的启发式/结果（我将尝试从游戏开发者网站找到最佳[副本](https://gamedev.stackexchange.com/questions/46463/is-there-an-optimum-set-of-colors-for-10-players/46530#46530)），我认为最好的结果来自立方以外的其他格。

```
 X   X   X
 X   X   X   X  <-- e.g. sampling points from hexagonical grid in HSV cone
   X   x   X    for some intensity level L.
 X   X   X   X
   X   X   X 
```

IMO的典型*错误*是将下一级 L+-1 与 L 对齐；相反，如果将下一个强度级别 L+-1 中的采样点旋转（45 度），则附近颜色的色调和强度都会有所不同。这个想法的另一个名称是为附近的颜色提供良好的*汉明距离。*

```
 x   x  L&1==0,    x    L&1==1
       *             x   x
     x   x             x 
```

同样在 HSV 锥体中，将有一种黑色、一种白色、三种深色色调、三种亮色色调、下一个强度级别的 6 或 12 种颜色等。

游戏开发者回答中的第二个优秀评论是文化偏见。我更愿意将这个概念表述为我们赋予某些颜色以含义，并且可以很好地区分*鼠尾草*与*橄榄色*或*薰衣草*与*紫红色*的颜色。

**编辑**链接中的第一个答案有 173 个赞成票，即使我无法区分颜色 5 和 6。而且只有 10 种颜色。但该理论声称是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:24:32.387

生成最佳不同颜色的调色板并不容易。既然你说你需要固定数量的颜色，你可以只预生成一种颜色，例如这里：

[http://tools.medialab.sciences-po.fr/iwanthue/](http://tools.medialab.sciences-po.fr/iwanthue/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:30:16.023

如果你真的需要生成这些，而不是使用预先生成的调色板，我至少建议不要在 RGB 中工作。

例如，Lab 颜色空间与人类视觉系统的关系更密切，因此在尝试寻找感知上不同的颜色时可能更合适。

因此，您可能会尝试在 Lab 中生成相距较远的颜色，然后再转换回 RGB。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T08:17:58.183

这取决于您想要以下内容的不同程度。

如果您发现在运行时创建颜色太难了，那么如何在您知道不同的托盘中创建预定义颜色的查找？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-03T05:26:23.897

这个怎么样：

```
int get_red(int rep){
    int x,r=0,i,temp;
    i=0;
    temp=rep;
    while(temp!=0){
        i++;
        if(i==3) r=temp%2;
        temp=temp/2;
    }
    if(i>3) x=(long long int)255/(i-2);
    else x=255;
    temp=r*x;
    return temp;

}

int get_green(int rep){
    int x,g=0,i,temp;
    i=0;
    temp=rep;
    while(temp!=0){
        i++;
        if(i==2) g=temp%2;
        temp=temp/2;
    }
    if(i>3) x=(long long int)255/(i-2);
    else x=255;
    temp=g*x;
    return temp;
}

int get_blue(int rep){
    long long int x,b=0,i,temp;
    i=0;
    temp=rep;
    while(temp!=0){
        i++;
        if(i==1) b=temp%2;
        temp=temp/2;
    }
    if(i>3) x=(int)255/(i-2);
    else x=255;
    temp=b*x;
    return temp;
} 
```

# asp.net - 在没有 Web 服务器的情况下运行 asp.net

> ID：15518385
> 
> 赞同：0
> 
> 时间：2013-03-20T08:16:00.377
> 
> 标签：asp.net

我是一名教师，将为几个基本 Asp.Net 的学生进行考试。在考试期间，他们只会做非常简单的事情，因此验证逻辑等背后的代码并不是什么大问题。

我的问题是 IT 部门无法进行设置，以便学生可以访问 Web 服务器（在专用服务器上进行考试）。他们唯一可用的是Visual Studio 2010。我想知道学生们能做多少。例如，即使没有安装 Web 服务器（或者我认为如此），他们也应该能够在设计视图中查看 .aspx 文件。有没有办法在没有 Web 服务器的情况下实际运行 Asp.Net 网站（就像可以运行一组 HTML 页面一样）？只是为了能够点击，不涉及真正的逻辑。或者类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:36:01.017

如果安装了 Visual Studio，它可以在 Visual Studio 开发服务器上运行。您不需要做任何其他事情，但请记住，它并不[完全代表生产服务器](https://stackoverflow.com/a/281683/783284)。

# objective-c - iOS 重新加载表方法

> ID：15518392
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:16:36.717
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我有一个标签栏，第一个视图需要登录 alertview 并且工作正常。当我切换到下一个选项卡时，我有一个表格视图。

我正在使用 JSON 在我从表视图控制器中的 viewDidLoad 方法以及另一个登录过程调用的方法中从在线获取数据。我想要两个部分，每个部分中的数据取决于我从解析数据中获得的属性之一。

问题是，在解析数据时，表格视图方法已经完成，所以我得到 0 节和 0 行并且没有数据显示。所以我的问题是，有没有办法只重新加载 no of section 方法、 no of rows 方法和 cellForRowAtIndexPath 方法。如果我重新加载整个表格视图，我会收到无限的警报视图，要求登录：/

编辑：

```
 #import "BooksViewController.h"
     #import "Me.h"
     #import "SBJson.h"

     @interface BooksViewController ()

     @end

     @implementation BooksViewController

     @synthesize name = _name;
     @synthesize ID = _id;
     @synthesize extended = _extended;
     @synthesize returned = _returned;
     @synthesize Date = _date;

     -(void) dealloc
     {
         self.name = nil;
         self.ID = nil;
         self.extended = nil;
         self.returned = nil;
         [super dealloc];
     }

     - (id)initWithStyle:(UITableViewStyle)style
     {
         self = [super initWithStyle:style];
         if (self) {

             BooksBorrowed = [[NSMutableArray alloc]init];
             BorrowedDates = [[NSMutableArray alloc]init];
             BorrowedIDs = [[NSMutableArray alloc]init];
             BorrowedExtensions = [[NSMutableArray alloc]init];
             BorrowedReturns = [[NSMutableArray alloc]init];

             /*message = [[UIAlertView alloc] initWithTitle:@"Please Login with your User                            ID and Password"
              message:nil
              delegate:self
              cancelButtonTitle:@"Cancel"
              otherButtonTitles:@"Continue", nil];

              [message setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];*/
             //book = [[BooksViewController alloc]init];
             me = [[Me alloc]init];
         }
         return self;
     }

     - (void)MyBooks
     {
NSString *authFormatString =
@"http://localhost:8888/Jineel_lib/bookBorrowed.php?uid=%d";

NSString *urlString = [NSString stringWithFormat:authFormatString, 1];

NSURL *url = [NSURL URLWithString:urlString];

NSString *contents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

response1 = [contents JSONValue];
if(contents)
{
    NSLog(@"contents : %@",contents);
    BookName = [[NSString alloc]init];
    DateBorrowed = [[NSString alloc]init];
    BookID = [[NSString alloc]init];
    BookExtended = [[NSString alloc]init];
    BookReturned = [[NSString alloc]init];

    BookName = [response1 valueForKey:@"BookName"];
    BookID = [response1 valueForKey:@"BookID"];
    DateBorrowed = [response1 valueForKey:@"DateBorrowed"];
    BookExtended = [response1 valueForKey:@"Extended"];
    BookReturned = [response1 valueForKey:@"Returned"];

    [BooksBorrowed addObject:BookName];
    [BorrowedDates addObject:DateBorrowed];
    [BorrowedIDs addObject:BookID];
    [BorrowedReturns addObject:BookReturned];
    [BorrowedExtensions addObject:BookExtended];

    NSLog(@"Arrays are : %@, %@, %@, %@, %@", BooksBorrowed, BorrowedDates, BorrowedIDs, BorrowedReturns, BorrowedExtensions);
         }
     }

     - (void)viewDidLoad
     {
         [super viewDidLoad];

         // Uncomment the following line to preserve selection between presentations.
         // self.clearsSelectionOnViewWillAppear = NO;

         // Uncomment the following line to display an Edit button in the navigation bar          for this view controller.
         // self.navigationItem.rightBarButtonItem = self.editButtonItem;
         [self MyBooks];
     }

     - (void)didReceiveMemoryWarning
     {
[sup         er didReceiveMemoryWarning];
         // Dispose of any resources that can be recreated.
     }

     #pragma mark - Table view data source

     - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
     {
         // Return the number of sections.
         return 1;
     }

     - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(         (NSInteger)section
     {
         // Return the number of rows in the section.
         NSLog(@"rows %d", [BooksBorrowed count]);
         return [BooksBorrowed count];
     }

     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
     {
         static NSString *CellIdentifier = @"Cell";
         UITableViewCell *cell = [tableView          dequeueReusableCellWithIdentifier:CellIdentifier];
         if (cell == nil) {
             cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault          reuseIdentifier:CellIdentifier] autorelease];
         }

                  bookName = BooksBorrowed[0];

                  cell.textLabel.text = bookName;
                  return cell;
     }

     @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:01:58.370

获取数据应该在后台线程上完成，这样 UI 就不会被阻塞。获取数据后，更新表视图数据源并重新加载表视图。这必须在主线程上完成。

下面的代码应该演示这个想法：

```
- (void)updateMyBooks
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Fetch data on a background thread:
        NSURL *url = ...;
        NSString *contents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
        if (contents) {
            NSMutableArray *newBooksBorrowed = [NSMutableArray array];

            // ... Parse JSON response and add objects to newBooksBorrowed ...

            dispatch_sync(dispatch_get_main_queue(), ^{
                // Update data source array and reload table view.
                BooksBorrowed = newBooksBorrowed;
                [self.tableView reloadData];
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:21:41.653

你有两种方法可以使用。

等到在您当前的线程中解析结束。

```
-(void)aFunc {
    //your job A
    while (A is not finished) {
        // If A job is finished, a flag should be set. and the flag can be a exit condition of this while loop
        // This executes another run loop.
       [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
}

[yourTable reloadData];
} 
```

或仅加载特定部分。

```
– reloadRowsAtIndexPaths:withRowAnimation:
– reloadSections:withRowAnimation:
– reloadSectionIndexTitles 
```

编辑：

另一种方法是通过[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，通过使用串行队列。`dispatch_sync()`，该块被入队并且该函数在该块被执行之前不会返回。

# objective-c - 带有 setPostValue 和方法 DELETE 的 ASIFormDataRequest

> ID：15518394
> 
> 赞同：1
> 
> 时间：2013-03-20T08:16:50.257
> 
> 标签：objective-c, json, cocoa-touch, asiformdatarequest

我正在尝试将 ASIFormDataRequest 与 setPostValues 和方法 DELETE 一起使用，以下是代码行

```
NSString *urlstring = [NSString stringWithFormat:@"%@%@",notificationsURL, typeId];
NSLog(@"Notification URL == %@",urlstring);
NSURL *urlR = [NSURL URLWithString:urlstring];

notificationAPNRequest = [ASIFormDataRequest requestWithURL:urlR];
notificationAPNRequest.timeOutSeconds = 30;
notificationAPNRequest.useSessionPersistence = NO;

[notificationAPNRequest setPostValue:deviceId forKey:@"deviceId"];
[notificationAPNRequest setPostValue:apnToken forKey:@"apnToken"];

if ([methodStr isEqualToString:@"OFF"]) {
    [notificationAPNRequest setRequestMethod:@"DELETE"];
}
else if ([methodStr isEqualToString:@"ON"]) {
    [notificationAPNRequest setRequestMethod:@"PUT"];
}

[notificationAPNRequest setDelegate:self];
[notificationAPNRequest setDidFinishSelector:@selector(notificationAPNSuccess:)];
[notificationAPNRequest setDidFailSelector:@selector(notificationAPNFailure:)];

[notificationAPNRequest startAsynchronous]; 
```

在成功方法中，我得到代码 405 `NSLog(@"%d",[request responseStatusCode]);`

当我从邮递员客户那里打到它时，它就起作用了。请让我知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:52:21.857

当您使用带有一些 post 参数的 DELETE 方法时，您需要在设置 Http DELETE 方法之前调用“buildPostBody”函数，如下所示

[notificationAPNRequest setPostValue:deviceId forKey:@"deviceId"]; [通知APNRequest setPostValue:apnToken forKey:@"apnToken"];

[通知APNRequest buildPostBody]; /// 在设置请求方法之前调用这个

[notificationAPNRequest setRequestMethod:@"DELETE"];

希望它现在有效

# java - 无法从结果类型为 void 错误的方法返回值

> ID：15518399
> 
> 赞同：3
> 
> 时间：2013-03-20T08:16:54.223
> 
> 标签：java, compiler-errors, return

我试图从一种方法中获取用户输入并在另一种方法中使用它。我对无法从结果类型为 void 错误的方法返回值感到困惑，因为“userMove”被定义为 int 类型。

```
public static void move()
{
    System.out.println("What do you want to do?");
    Scanner scan = new Scanner(System.in);
    int userMove = scan.nextInt();
    return userMove;
}

public static void usersMove(String playerName, int gesture)
{
    int userMove = move();

    if (userMove == -1)
    {
        break;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T08:17:52.973

只需`void`在`int`您返回`int`.

```
public static int move()
{
    System.out.println("What do you want to do?");
    Scanner scan = new Scanner(System.in);
    int userMove = scan.nextInt();
    return userMove;
} 
```

一个`void`方法意味着它什么都不返回（即没有返回语句），任何其他的然后`void`和返回是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T08:18:49.110

标记为的`void`方法意味着它不返回任何内容。可以将其视为 a`procedure`与 a 相对`function`。

将您的方法签名更改为`public static int move()`应该可以解决您的问题。您的方法现在将表示 a `function`，它有一个返回值。

[这个](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)Oracle 教程应该提供一些有用的信息。

# macros - 如何让我的宏不受内容辅助的干扰？

> ID：15518402
> 
> 赞同：0
> 
> 时间：2013-03-20T08:17:10.990
> 
> 标签：macros, intellij-idea

我在 Intellij-IDEA 中定义了一个宏，它是以下各项的组合：

1.  走到行尾
2.  类型`{`
3.  按`enter`

这是配置（append_brace_enter）：

![想法宏配置](../Images/b58d714d477179a5d8f08363f5b4e1bb.png)

这是一个显示它有效的小例子，`|`表示光标：

```
if(true | ) 
```

然后按我的宏的快捷键，它将变为：

```
if(true ) {
   |
} 
```

大多数时候它工作正常，但有时，当我按下快捷键并且有一个内容帮助列表时，它不会像我预期的那样工作。我必须按下`esc`才能隐藏列表，但这浪费了我近 1 秒钟的时间。

这是一个显示问题的截屏视频：

![想法宏观问题](../Images/613e64f803484795a9945df3ad3c9248.png)

你可以看到当我输入`if(a>b)`并调用宏时，它会变成一个`AutoCloseable {}`，这不是我想要的。

有什么解决方案可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:45:45.887

您可以为此使用完整语句 ( `Ctrl`++ `Shift`) `Enter`。
您也可以添加`Esc`到您的宏。您可以更改设置 | 编辑 | 代码完成 | 将第一个建议预选为 Never，End 将转到行尾。在[12.1 EAP](http://confluence.jetbrains.com/display/IDEADEV/IDEA+12.1+EAP)中，默认行为也不会受到太多影响。

# java - Lombok 在大型项目中减慢了构建过程

> ID：15518405
> 
> 赞同：6
> 
> 时间：2013-03-20T08:17:26.780
> 
> 标签：java, performance, build, lombok, ibm-rad

如果我在一个项目中使用 Lombok（大约 15 个单独的项目 - EJB、Web 等），Lombok 会使构建过程减慢大约 2-3 倍。有什么解决方案，还是龙目岛的一个缺点？

只是看项目的大小，大约是 400 `@Getter`、 120 `@Data`、 250`@Setter`和 100 `@EqualsAndHashCode`。

环境：IBM Rational Application Developer 8.0.4 和最新版本的 Lombok (0.11.6)

有什么想法可以让它更快吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T09:42:40.073

Lombok 是一个注解处理器（一个编译器插件，如果你愿意的话）。在编译时，每次在您的代码中找到一组特定的注释时都会调用它，并有机会生成新的源代码或引发编译器错误。如果在编译过程中生成了任何新内容，则必须进行另一次，直到所有内容都已成功编译。所以是的，找到注释、根据需要处理它们（见下文）以及运行额外的编译轮次都需要时间。

注释处理器规范明确禁止他们修改现有代码 - 您可以生成新类或额外文件（.properties 等），但不能更改现有代码。Lombok 通过检测使用的编译器来解决这个问题，并破解其内部 API 以更改内存中的 AST 以添加访问器等。这简直……太可怕了。

在我看来，这是一个重大的技术风险。最后，Lombok 没有你的 IDE 不能做的事情——生成访问器等，但可能危及你的整个项目——如果你升级你的编译器并且 Lombok 不支持它，或者引入了一个错误怎么办？你最终得到一个非编译代码（或者在你的情况下，一个非常慢的编译），只是为了隐藏一些没有害处的样板方法，除了在你的代码中占用几行。但那只是我的个人意见 ：）

所以回到你的问题，我看不出你怎么能得到更好的编译时间，除非一起删除 Lombok。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T08:48:41.087

最后，有一个可用的边缘构建，它可以大大加快 Lombok 的速度！他们做了很多工作来加快速度，现在对我来说效果很好。构建时间几乎减半，我不必每次保存文件都等待。

我还对我的项目进行了delomboked以比较速度，并且delomboked代码和带有lombok-annotations的代码之间没有太大区别。

您可以在此处下载边缘构建： [http ://projectlombok.org/download-edge.html](http://projectlombok.org/download-edge.html)

# c++ - 压缩库 Windows 运行时

> ID：15518413
> 
> 赞同：1
> 
> 时间：2013-03-20T08:18:00.567
> 
> 标签：c++, windows-runtime, windows-phone-8, zlib

我正在一个使用现有 C++ 代码的项目中工作，但我缺少 zlib.h，windows 不支持它，所以我需要找到一种方法来使用其他一些库。

例如，此代码不起作用：

```
uLongf outLength = m_outLength; 

uncompress(reinterpret_cast<Bytef*>(m_outBuf), &outLength,
    reinterpret_cast<Bytef*>(m_inBuf), m_inLength);

m_outOffs = 0; 
```

黑色的错误

```
uLongf
uncompress
Bytef 
```

有没有办法用另一个库或其他方式来做到这一点，或者有办法将它移植`zlib`到项目中。我正在使用 Visual Studio 2012。

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:22:10.393

> 我正在一个使用现有 C++ 代码的项目中工作，但我缺少 zlib.h，windows 不支持它，所以我需要找到一种方法来使用其他一些库。

你确定吗？[http://www.zlib.net/DLL_FAQ.txt](http://www.zlib.net/DLL_FAQ.txt)

> *   导出的符号仅在源文件“zlib.h”和“zlib.def”中定义，可在官方 zlib 源分发中找到。

您可以使用“现成的”DLL [http://gnuwin32.sourceforge.net/packages/zlib.htm（Zlib](http://gnuwin32.sourceforge.net/packages/zlib.htm) for Windows）或自己构建它：[http ://www.helyar.net/2010/compiling-zlib-lib -Windows/](http://www.helyar.net/2010/compiling-zlib-lib-on-windows/)

# java - 如何在 Android 中使用自定义按钮实现自定义操作栏？

> ID：15518414
> 
> 赞同：62
> 
> 时间：2013-03-20T08:18:12.893
> 
> 标签：java, android, android-actionbar

我想实现`ActionBar`必须如下所示的自定义：

![在此处输入图像描述](../Images/ea778027a1905b8fe83d17650fde446d.png)

所以问题：

1.  如何实现自定义视图之类的按钮：只是一些图像？
2.  我怎样才能在顶部画一条线`ActionBar`？
3.  以及如何实现没有分隔线的按钮：在`ActionBar`或什么上添加选项卡？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-03-20T09:30:42.650

![在此处输入图像描述](../Images/edceaf2ed101faddbdb7d4af09df251c.png)

如果您想使用`ActionBar`API，这几乎与您将获得的一样接近。我不确定你是否可以在`ActionBar`不做一些奇怪`Window`的黑客攻击的情况下在上面放置一个颜色条，这不值得麻烦。就改变`MenuItems`路线而言，您可以通过样式使它们更紧密。它会是这样的，但我还没有测试过。

```
<style name="MyTheme" parent="android:Theme.Holo.Light">
    <item name="actionButtonStyle">@style/MyActionButtonStyle</item>
</style>

<style name="MyActionButtonStyle" parent="Widget.ActionButton">
    <item name="android:minWidth">28dip</item>
</style> 
```

**以下是如何膨胀并将自定义布局添加到您的`ActionBar`.**

```
 // Inflate your custom layout
    final ViewGroup actionBarLayout = (ViewGroup) getLayoutInflater().inflate(
            R.layout.action_bar,
            null);

    // Set up your ActionBar
    final ActionBar actionBar = getActionBar();
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setCustomView(actionBarLayout);

    // You customization
    final int actionBarColor = getResources().getColor(R.color.action_bar);
    actionBar.setBackgroundDrawable(new ColorDrawable(actionBarColor));

    final Button actionBarTitle = (Button) findViewById(R.id.action_bar_title);
    actionBarTitle.setText("Index(2)");

    final Button actionBarSent = (Button) findViewById(R.id.action_bar_sent);
    actionBarSent.setText("Sent");

    final Button actionBarStaff = (Button) findViewById(R.id.action_bar_staff);
    actionBarStaff.setText("Staff");

    final Button actionBarLocations = (Button) findViewById(R.id.action_bar_locations);
    actionBarLocations.setText("HIPPA Locations"); 
```

**这是自定义布局：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:enabled="false"
    android:orientation="horizontal"
    android:paddingEnd="8dip" >

    <Button
        android:id="@+id/action_bar_title"
        style="@style/ActionBarButtonWhite" />

    <Button
        android:id="@+id/action_bar_sent"
        style="@style/ActionBarButtonOffWhite" />

    <Button
        android:id="@+id/action_bar_staff"
        style="@style/ActionBarButtonOffWhite" />

    <Button
        android:id="@+id/action_bar_locations"
        style="@style/ActionBarButtonOffWhite" />

</LinearLayout> 
```

**这是彩条布局：要使用它，只需`merge`在您添加的任何布局中使用`setContentView`.**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="@dimen/colorstrip"
    android:background="@android:color/holo_blue_dark" /> 
```

**以下是`Button`样式：**

```
<style name="ActionBarButton">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:background">@null</item>
    <item name="android:ellipsize">end</item>
    <item name="android:singleLine">true</item>
    <item name="android:textSize">@dimen/text_size_small</item>
</style>

<style name="ActionBarButtonWhite" parent="@style/ActionBarButton">
    <item name="android:textColor">@color/white</item>
</style>

<style name="ActionBarButtonOffWhite" parent="@style/ActionBarButton">
    <item name="android:textColor">@color/off_white</item>
</style> 
```

**以下是我使用的颜色和尺寸：**

```
<color name="action_bar">#ff0d0d0d</color>
<color name="white">#ffffffff</color>
<color name="off_white">#99ffffff</color>

<!-- Text sizes -->
<dimen name="text_size_small">14.0sp</dimen>
<dimen name="text_size_medium">16.0sp</dimen>

<!-- ActionBar color strip -->
<dimen name="colorstrip">5dp</dimen> 
```

如果您想定制更多，您可以考虑完全不使用`ActionBar`，但我不建议这样做。您也可以考虑通读[Android 设计指南](http://developer.android.com/design/index.html)，以更好地了解如何设计您的`ActionBar.`

如果您选择放弃`ActionBar`并使用您自己的布局，您应该确保`Toasts`在用户长按您的“MenuItems”时添加可操作。这可以[使用这个 Gist](https://gist.github.com/romannurik/3982005)轻松实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T09:04:35.017

1 您可以使用可绘制对象

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_item1"
        android:icon="@drawable/my_item_drawable"
        android:title="@string/menu_item1"
        android:showAsAction="ifRoom" />
</menu> 
```

2 为操作栏创建样式并使用自定义背景：

```
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <!-- other activity and action bar styles here -->
    </style>
    <!-- style for the action bar backgrounds -->
    <style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
        <item name="android:background">@drawable/background</item>
        <item name="android:backgroundStacked">@drawable/background</item>
        <item name="android:backgroundSplit">@drawable/split_background</item>
    </style>
</resources> 
```

3 再次样式 android:actionBarDivider

[android 文档](http://developer.android.com/guide/topics/ui/actionbar.html)对此非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T08:51:46.587

请在 menu.xml 文件中写入以下代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:my_menu_tutorial_app="http://schemas.android.com/apk/res-auto"
      xmlns:tools="http://schemas.android.com/tools"
      tools:context="com.example.mymenus.menu_app.MainActivity">
<item android:id="@+id/item_one"
      android:icon="@drawable/menu_icon"
      android:orderInCategory="l01"
      android:title="Item One"
      my_menu_tutorial_app:showAsAction="always">
      <!--sub-menu-->
      <menu>
          <item android:id="@+id/sub_one"
                android:title="Sub-menu item one" />
          <item android:id="@+id/sub_two"
                android:title="Sub-menu item two" />
      </menu> 
```

还要在活动类文件中编写此 java 代码：

```
public boolean onOptionsItemSelected(MenuItem item)
{
    super.onOptionsItemSelected(item);
    Toast.makeText(this, "Menus item selected: " +
        item.getTitle(), Toast.LENGTH_SHORT).show();
    switch (item.getItemId())
    {
        case R.id.sub_one:
            isItemOneSelected = true;
            supportInvalidateOptionsMenu();
            return true;
        case MENU_ITEM + 1:
            isRemoveItem = true;
            supportInvalidateOptionsMenu();
            return true;
        default:
            return false;
    }
} 
```

这是在操作栏中显示菜单的最简单方法。

# mysql - 根据辅助列中的值选择唯一行

> ID：15518415
> 
> 赞同：3
> 
> 时间：2013-03-20T08:18:18.510
> 
> 标签：mysql, group-by, sql-order-by

我有一个简单的 mysql 表：

```
id, code, product_name, supplier
 1, 3844, ProductName1, Supplier1
 2, 3844, ProductName1, Supplier2
 3, 1233, ProductName2, Supplier2 
```

我想从表中查询所有不同的产品。所以 sql 代码是`select * from table group by code`.

**我的问题**：

我想在“group by”语句中设置供应商优先级（例如，Supplier1 是最相关的，但在给定的列表中可能不存在`code`）。产品#1 和#2 相同。在我的结果表中，我想看到：

```
id, code, product_name, supplier
 1, 3844, ProductName1, Supplier1
 3, 1233, ProductName2, Supplier2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:20:00.523

你可能需要这个：

```
SELECT
  MIN(id) id,
  code,
  MIN(product_name) product_name,
  MIN(supplier) supplier
FROM
  yourtable
WHERE
  (code, CASE WHEN supplier='Supplier1' THEN '' ELSE supplier END)
  IN (SELECT   code, min(CASE WHEN supplier='Supplier1' THEN '' ELSE supplier END)
      FROM     yourtable
      GROUP BY code)
GROUP BY
  code
ORDER BY
  min(id); 
```

请[在此处](http://sqlfiddle.com/#!2/15ab3/7)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:44:20.790

试试这个，

```
SELECT * FROM table_name    GROUP BY code    ORDER BY supplier 
```

# ios - 所有 iPad 版本的内存警告阈值

> ID：15518417
> 
> 赞同：4
> 
> 时间：2013-03-20T08:18:21.600
> 
> 标签：ios, ipad, memory, memory-warning

iOS 应用程序有内存警告级别 1 和级别 2。问题是对于所有 iPad 设备（从 iPad 1 到 iPad 4、mini），发出警告的响应阈值是多少。例如，对于 iPad1，是 100 MB 吗？

谢谢

* * *

我也曾经打印出收到内存警告时使用的内存。

```
#import "mach/mach.h"
-(void) report_memory {

    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                                   TASK_BASIC_INFO,
                                   (task_info_t)&info,
                                   &size);
    if( kerr == KERN_SUCCESS ) {
        DLog(@"Memory in use (in MB ): %u", info.resident_size/1024/1024);
    } else {
        DLog(@"Error with task_info(): %s", mach_error_string(kerr));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:01:52.297

我不认为Apple官方记录了它，主要是因为它可能会在iOS版本之间发生变化，但这些是[“学习iPhone和iPad cocos2d游戏开发”](http://books.google.es/books?id=9CQL8t6Eob0C)一书中所述的数字：

```
+-----------------------------------------------------------------+  
| Installed Memory |  Available Memory | Memory Warning Threshold |
+-----------------------------------------------------------------+  
| 128 MB           |  35-40 MB         |  20-25 MB                | 
| 256 MB           |  120-150 MB       |  80-90 MB                | 
| 512 MB           |  340-370 MB       |  260-300 MB (estimated)  |
+-----------------------------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T08:57:45.243

根据练习和记忆... iPad 1 将在大约 16Mb 时触发级别 1，并且可能会在大约 32mb 时触发级别 2。iPad 2/3/mini 似乎可以达到大约 50Mb 到 64Mb。iPad 4 我还没有真正得到确凿的结果，但从规格来看，我预计在事情开始抱怨之前会达到大约 100-128Mb。

这是我至少在测试期间在仪器中观察到的。我已经开始运行一个宏来检测设备类型，并通过禁用石英绘制的项目、重图像等优雅地回退以支持旧设备......

同样，这些都不是来自任何规格的硬数据，只是我的测试结果。

这是我在应用程序委托中使用的一个类方法来检测 iPad 1，例如...

```
+ (BOOL)isiPad1 {
  struct utsname platform;
  int rc = uname(&platform);
  if(rc == -1) return NO;
  return !strcmp("iPad1,1", platform.machine);
} 
```

# java - Java 中 String 的 hashCode() 方法背后是什么？

> ID：15518418
> 
> 赞同：32
> 
> 时间：2013-03-20T08:18:26.887
> 
> 标签：java, hashcode

我一直在研究`hashCode()`java 中的方法，发现 String 类的方法很奇怪。源代码如下：

```
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;

        for (int i = 0; i < value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
} 
```

代码本身非常简单。但我想知道以这种方式计算哈希码的原因是什么？
为什么选择31？
为什么从 0 而不是 value.length - 1 开始？
任何保证这将使哈希码不太可能相互冲突？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T08:31:59.257

是的，哈希码冲突的概率非常低，例如在字符串的情况下，它取决于字符串值。如果我们没有使用 new 运算符创建任何字符串，那么如果新字符串具有与已经存在的值相同的值，则不会创建新的 String 对象，它引用堆中的旧值，在这种情况下，只有 hashCode 的值会与预期相同。

hashCode 的一般合约是：

每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

从 Java 1.2 开始，java.lang.String 类在整个字符串文本上使用乘积和算法实现其 hashCode()。[2] 例如，给定一个 java.lang.String 类的实例 s，其哈希码 h(s) 定义为

```
h(s)=s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
```

其中术语使用 Java 32 位 int 加法求和，s[i] 表示字符串的第 i 个字符，n 是 s 的长度。

供您在 Apache Harmony 中参考，方法 hashCode 是：

```
public int hashCode() {
    if (hashCode == 0) {
        int hash = 0, multiplier = 1;
        for (int i = offset + count - 1; i >= offset; i--) {
            hash += value[i] * multiplier;
            int shifted = multiplier << 5;
            multiplier = shifted - multiplier;
        }
        hashCode = hash;
    }
    return hashCode;
} 
```

# sql - 在 Oracle 表上创建 ON INSERT 触发器

> ID：15518423
> 
> 赞同：1
> 
> 时间：2013-03-20T08:18:59.617
> 
> 标签：sql, oracle, triggers, oracle10g

我必须`ON INSERT`在 Oracle 数据库上创建这个时髦的触发器。

我得到了这个缺少部分源代码的旧项目，所以现在我必须只使用数据库来做一些魔术。触发器应该使用另一个视图中的缺失值更新插入的行。

这是一些组成的示例数据：

我有这张表，我们称之为**TABLE1**。然后我有这个视图，我们称之为**VIEW2**。在视图中可能有多个具有相同 CODE 的记录，但它们是完全重复的，因此任何行都是有效的。只有少数这样的重复，但客户还没有过滤掉它们。

*   **TABLE1**和**VIEW1**具有以下字段`(CODE, PARTNER, COUNTRY)`。
*   **TABLE1**也有字段`COMMENT`。

所有字段都是 varchar 类型。

在此字段中，它的值`COMMENT`是`varchar`类型，并在其值中添加了一个后缀，如下所示： **“-XXX-CODE”**，例如“some comment-XXX-123”。

这是我的场景：

这被插入**TABLE1**：

```
**CODE;PARTNER;COUNTRY;COMMENT** 

 - 123;TEST;USA;SOME COMMENT
 - 145;TEST2;GB;SOME COMMENT
 - NULL;NULL;NULL;SOME COMMENT-XXX-154 
```

这是触发器应该启动的地方。 - 如果字段**CODE**为 NULL，触发器应该触发 - 根据 -XXX- 前缀解析代码（在本例中取值 154） - 在**VIEW**上进行选择（选择来自 VIEW1 的代码、合作伙伴、国家/地区，其中代码 = 154 - 如果找到记录，则应使用值更新**TABLE1**`code, partner and country`

好吧，我希望情况很清楚。由于我没有使用 oracle 的经验，因此非常感谢我的问题的解决方案。

感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:04:38.627

我不知道列 CODE 的类型是什么，所以我猜它是 INTEGER。这个给你

```
CREATE OR REPLACE TRIGGER tri_check_nulls
  BEFORE INSERT ON TABLE1
  FOR EACH ROW WHEN (new.CODE is NULL)
DECLARE
    VIEW_CODE   INTEGER;
BEGIN

    VIEW_CODE := TO_NUMBER(SUBSTR(new.COMMENT, INSTR(new.COMMENT, '-', -1, 1) + 1));

    select distinct v.CODE, v.PARTNER, v.COUNTRY
        into  :new.CODE, :new.PARTNER, :new.COUNTRY
        from VIEW1 v
        where v.CODE = VIEW_CODE;

END;
/ 
```

当然，您必须添加一些错误处理程序。请阅读 Oracle 文档[CREATE TRIGGER](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm)

# mysql - ForeignKey 字段中的 on_delete=models.SET_NULL 选项无效

> ID：15518427
> 
> 赞同：5
> 
> 时间：2013-03-20T08:19:07.927
> 
> 标签：mysql, django

我有两个 Django 模型有一个外键引用另一个：

```
class Style(models.Model):
    featured_item = models.ForeignKey('Item', blank=True, null=True)
    # more fields

class Item(models.Model):
    style = models.ForeignKey(Style, blank=True, null=True) 
    # more fields 
```

删除实例时，`Item`我得到一个 IntegrityError：

```
In [4]: cursor.execute("DELETE FROM myapp_item WHERE n = 0)

IntegrityError: (1451, 'Cannot delete or update a parent row: a foreign key constraint fails (`mydb`.`myapp_style`, CONSTRAINT `featured_item_id_refs_id_578e3e581685bdae` FOREIGN KEY (`featured_item_id`) REFERENCES `myapp_item` (`id`))') 
```

所以我在模型的外键字段中添加了`on_delete=models.SET_NULL`选项，即替换`featured_item``Style`

```
featured_item = models.ForeignKey('Item', blank=True, null=True) 
```

经过

```
featured_item = models.ForeignKey('Item', blank=True, null=True, on_delete=models.SET_NULL) 
```

并使用 South 迁移我的数据库（已经有数据）。

`Item`但是在删除实例时我仍然得到外键约束错误。

我正在使用 Django 1.5。

有人可以帮忙吗？

# git - 有什么方法可以更改 git 中特定提交的提交消息？

> ID：15518431
> 
> 赞同：6
> 
> 时间：2013-03-20T08:19:14.543
> 
> 标签：git

我想更改我之前所做的提交并推送到源/主的提交消息。现在我已经做了几个提交和推送。有什么方法可以更改对 master 进行的倒数第二次或倒数第三次推送的提交消息？

# android - 上传视频时无法处理视频错误通知

> ID：15518434
> 
> 赞同：0
> 
> 时间：2013-03-20T08:19:21.007
> 
> 标签：android, facebook, video, upload, video-processing

当我尝试从我的 android 应用程序将不同格式的视频（包括 .mp4 和 .3gp 文件）上传到 facebook 时，我在我的 facebook 帐户中收到一条通知，提示“无法处理您的视频。请访问视频帮助页面了解关于常见问题”。请帮助我。postToWall 功能将视频发布到 facebook。

```
 private void postToWall(String accessToken) {        
         String dataPath = "/mnt/sdcard/DCIM/Camera/video-2013-04-11-04-30-05.mp4";
         InputStream is = null;
         byte[] data = null;
         try {
            is = new FileInputStream(dataPath);
            data = readBytes(is);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        Bundle params = new Bundle();   
        params.putString(Facebook.TOKEN, mFacebook.getAccessToken());              
        params.putString("filename", "Video_02.mp4");
        params.putByteArray("video", data);
        params.putString("contentType", "video/quicktime");
       params.putString("message", "video message");         
        mAsyncRunner.request("me/videos", params, "POST", new PostRequestListener(), null);
    }

               public byte[] readBytes(InputStream inputStream) throws IOException {
        // This dynamically extends to take the bytes you read.
        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

        // This is storage overwritten on each iteration with bytes.
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        // We need to know how may bytes were read to write them to the byteBuffer.
        int len = 0;
        while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }

        // And then we can return your byte array.
        return byteBuffer.toByteArray();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:46:57.163

这似乎是 Facebook API 或 SDK 的一个新的已知错误（今天的第一次报告）。

您可以在这里支持错误报告：http: [//developers.facebook.com/bugs/543903808965945](http://developers.facebook.com/bugs/543903808965945)

# django - Django永久链接不起作用

> ID：15518435
> 
> 赞同：1
> 
> 时间：2013-03-20T08:19:21.567
> 
> 标签：django, permalinks

模型.py

```
 from django.db import models

    class Blog(models.Model):
        time = models.DateTimeField(auto_now_add = True)
        title = models.CharField(max_length = 100)
        slug = models.SlugField()
        perex = models.TextField()
        content = models.TextField()
        @models.permalink
        def get_absolute_url(self):
            return ('blog', [self.slug])

        def __unicode__(self):
            return self.title

        class Meta:
            ordering = ['-time'] 
```

视图.py

```
 from django.shortcuts import render_to_response, get_object_or_404
    from blog.models import Blog

    def blog_entries(request):
        blogs = Blog.objects.all()[0:3]
        title = "Blogs"
        return render_to_response('blog/blog.djhtml', {'blogs': blogs, 'title': title,})

    def blog_single_entry(request, slug):
        blog = get_object_or_404(Blog, slug=slug)
        title = blog.title
        return render_to_response('blog/single.djhtml', {'blog': blog, 'title': title,}) 
```

网址.py

```
 from django.conf.urls import patterns, include, url

    # Uncomment the next two lines to enable the admin:
    from django.contrib import admin
    admin.autodiscover()

    urlpatterns = patterns('',
        # Examples:
        # url(r'^$', 'kablog.views.home', name='home'),
        # url(r'^kablog/', include('kablog.foo.urls')),

        # Uncomment the admin/doc line below to enable admin documentation:
        # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

        # Uncomment the next line to enable the admin:
         url(r'^admin/', include(admin.site.urls)),
         url(r'^blog/', 'blog.views.blog_entries', name='blog'),
         url(r'^blog/(?P<slug>[-\w]+)/', 'blog.views.blog_single_entry', name='single_blog'),
    ) 
```

模板

```
 {% extends 'base.djhtml' %}
    {% block title %}| {{title}}{% endblock %}
    {% block content %}
    <div class="hero-unit">
      <h1>Welcome to my Blog</h1>
      <p>Where knowledge is always free</p>
      <p>
        <a class="btn btn-primary btn-large">
          Read More
        </a>
      </p>
    </div>
    <div class="row">
        {% for blog in blogs %}
            <div class="span4">
                <h2>{{blog}}<small>{{blog.time|date:"M D d Y"}}</small></h2>
                <p>{{blog.perex|safe}}</p>
                <a class="btn" href="{{ blog.get_absolute_url }}">
                  Read More
                </a>
            </div>
        {% endfor %}
    </div>
    {% endblock %} 
```

blog.get_absolute_url 不返回 slug 并且即使我尝试浏览“blog/my-first-blog”，浏览器也只会显示主博客而不是 single_blog，如果您浏览它也不会返回 404 错误“博客/dgdsghdsfhdsfhds"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:54:24.787

我也试过了，但我不能让它工作，所以我尝试了其他方法

```
class Blog(models.Model):
    [......]

    @property
    def get_blog_url(self):
        return reverse('blog', args=[self.slug])

<a class="btn" href="{{ blog.get_blog_url }}">
    Read More
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T20:28:06.657

您需要改为`@models.permalink`make `@permalink`。

# actionscript-3 - 在 HTMLLoader 中禁用或绕过 Adob e AIR 沙箱

> ID：15518439
> 
> 赞同：0
> 
> 时间：2013-03-20T08:19:28.620
> 
> 标签：actionscript-3, apache-flex, air

我经常遇到这个问题，我需要使用 htmlloader 并加载一个页面，并且该页面使用了一些与沙箱冲突的库或脚本。我使用了其他框架（Qt4、.NET、Java），从来没有遇到过这样的限制。我无法找到禁用沙箱的方法，我阅读了有关网桥和沙箱类型的文档，但我不理解这些概念，是否可以使用沙箱网桥或其他任何东西（可能是白名单域和/或本地脚本）作为示例尝试加载此页面

```
var url:String="http://www.google.com/trends/explore#q=wordpress%20plugins";
htmlLoader.load(new URLRequest(url));
htmlLoader.width=stage.width;
htmlLoader.height=stage.height;
stage.addChild(htmlLoader); 
```

欢迎任何建议，示例链接。

PS 在其他地方，我遇到了这个限制，当我尝试加载使用一些本地脚本/库的本地 html 时，修复库以使用 AIR 不是解决方案。我无法重新启动和使用其他框架，因为我正在向一些大型应用程序添加一些功能（移植不是解决方案）。

谢谢。

# xmpp - Smack 的 FileTransferManager.createOutgoingFileTransfer 只接受完整的 JID。如何确定 Smack 中用户的完整 JID？

> ID：15518440
> 
> 赞同：3
> 
> 时间：2013-03-20T08:19:29.733
> 
> 标签：xmpp, file-transfer, smack, asmack

经过数小时的调试并试图找出为什么使用 aSmack 文件传输无法正常工作，而正常的消息传递是，我终于设法将其归结为这一点。

当我按照 Smack 文档中给出的方法获取用户的名册列表时，Openfire 服务器正在发送名册的 JID，最后缺少 /。

```
Collection<RosterEntry> entries = roster.getEntries();
for (RosterEntry r : entries) {
    Log.v("Gabriel","Receiving: " + r.getUser());
} 
```

例如，如果我收到来自用户 gabriel 的消息，我会得到“发件人”为：

```
gabriel@dragonov/Smack 
```

但是 r.getUser() 以

```
gabriel@dragonov 
```

甚至

```
connection.getRoster().getPresence(contactName).getFrom() 
```

正在返回为“gabriel@dragonov”。

这导致文件传输失败，但奇怪的是不是常规消息传递。但是，当我在末尾手动添加 /Smack

```
 OutgoingFileTransfer transferr = manager.createOutgoingFileTransfer(contactJID+"/Smack"); 
```

有用。

我的问题是，如何接收包含资源部分的完整 JID 或配置文件传输以使其在使用裸 JID 时不会失败？

* * *

编辑：

我尝试了以下方法：

```
 Log.v("Gabriel", entries.size() + " buddy(ies):");
    for (RosterEntry r : entries) {
        Log.v("Pat","adding: " + r.getType() + "  " + r.getName());
        contacts.add(r.getUser());
    }      

    for (String contact : contacts){
        Iterator<org.jivesoftware.smack.packet.Presence> presences = connection.getRoster().getPresences(contact);
        Log.v("Gabriel", contact+" has: ");
        while(presences.hasNext()){
            Log.v("Gabriel",presences.next().getFrom());
        }           
    } 
```

但我仍然得到裸身份证。

输出：gabriel@dragonov 有：gabriel@dragonov

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:27:02.990

用于[`Iterator<Presence> Roster.getPresences(String user)`](http://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smack/Roster.html#getPresences%28java.lang.String%29)从用户的所有已知资源中获取存在信息。对于这个 Presence 实例`getFrom()`应该返回一个完整的 JID，你可以在`FileTransferManager.createOutgoingFileTransfer()`.

我创建了[SMACK-430](http://issues.igniterealtime.org/browse/SMACK-430)，关于在`createOutgoingFileTranfer()`. 它确实应该抛出一个异常，以便 smack 用户不必调试几个小时来找到原因（尽管它在方法 javadoc 中说明）。SMACK-430 还解释了为什么 FileTransferManager 需要完整的 JID 而不能与裸 JID 一起使用。

# java - FileInputStream, FileOutputStream - 检查文件的特定值/行/字符串

> ID：15518443
> 
> 赞同：2
> 
> 时间：2013-03-20T08:19:43.923
> 
> 标签：java, android, search, text-files, key-value

我已经咨询了这个社区几次，但似乎我仍然没有经验自己解决我的问题。

我的最新问题如下：

我有一个文件，在应用程序的私有存储（无根设备）中创建。我能够写入它，并从中读取。但是：我不知道，我如何在我的文件中添加其他信息（我认为另一个 FOS 会很容易地在第一个末尾添加数组，但我不确定），我不知道，我怎么能看看对于特定的例如字符串。

```
public static Runnable cfgsetlanecount(int l1, int l2, int l3, int l4,
        int l5, int l6, int l7, int l8, Context context)

        throws IOException {
    System.out.println("" + l1 + l2+ l3+l4+l5+l6+l7+l8);
    FileOutputStream fos = context
            .openFileOutput(cfg, Context.MODE_PRIVATE);
    String lanecount = "lanecount: " + (Integer.valueOf(l1).toString())
            + "" + (Integer.valueOf(l2).toString()) + ""
            + (Integer.valueOf(l3).toString()) + ""
            + (Integer.valueOf(l4).toString()) + "" + l5 + "" + l6 + ""
            + l7 + "" + l8;
    byte buf[] = lanecount.getBytes(); 
    fos.write(buf);
    fos.close();
    cfggetlanecount();
    return null;
}

public static Runnable cfggetlanecount() throws IOException {
    String collected =  null;
    FileInputStream fis = context.openFileInput(cfg);
    byte input[] = new byte [fis.available()];
    while (fis.read(input)!=-1){
        collected = new String (input);

        System.out.println(collected);
    }fis.close();
    return null;

} 
```

这是我到目前为止所做的代码。我想添加一个`time`值为 12:00 的字符串，并从不同的方法中读取它们。Lanecount 字符串的值是 10101010 我只想要这个值，通过说搜索字符串`lanecount:`并通过说搜索字符串来获取 12:00`time:`

编辑：

首先应该将此行添加到我的文件中。这应该是这样的：

第1行：车道数：10001000

line2：时间：12:00

第 3 行：timex：05:00

第 4 行：任何字词：fhfbjklös

第 5 行：停止字节：0x28

. . .

现在我想要一种方法，它能够取出关键字 timex 的值，或者另一个可以读取车道计数的方法。也许一个可以获得 Stopbyte 的价值。

然后我需要一个方法，它能够编辑关键字时间的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:01:01.140

根据您描述的文件内容，它听起来像是一个自然属性文件：

```
# This is a comment:
lanecount=10001000
time=12:00
timex=05:00
anyword=fhfbjklös
Stopbyte=0x28
... ... 
```

使用[java.util.Properties](http://developer.android.com/reference/java/util/Properties.html)，它会为您完成所有肮脏的工作：

```
# Write properties to private storage:
FileOutputStream fos = context.openFileOutput(cfg, Context.MODE_PRIVATE);
Properties props = new Properties();
props.setProperty("lanecount", "10001000");
props.setProperty("time", "12:00");
prop.store(fos, "This is a comment"); // store() is threadsafe
fos.close();

... ...

# Read properties from private storage: 
FileInputStream fis = context.openFileInput(cfg);
Properties props = new Properties();
props.load(fis); // load() is threadsafe
fis.close();
String lanecount = props.getProperty("lanecount");
String time = props.getProperty("time"); 
```

我不知道您的要求，作为替代方案，您可以从[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)而不是应用程序的私有存储加载/存储您的配置：

```
# Write properties to shared preferences:
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
SharedPreferences.Editor editor = prefs.edit();
editor.putString("lanecount", "10001000");
editor.putString("time", "12:00");
editor.commit();

... ...

# Read properties from shared preferences:
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
String lanecount = prefs.getString("lanecount", "defauleValue");
String time = prefs.getString("time", "defauleValue"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:18:16.273

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;

import android.content.Context;
import android.os.Environment;

import com.bowltec.own.OwnClass;

public class Config_cbt extends OwnClass{
    static String cfg = "config.cbt";
    static int coll;
    static Properties props;

    public static void createcfg() throws FileNotFoundException, IOException {
        String packageName = acti.getPackageName();
        String path = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/Android/data/" + packageName + "/files/";
        new File(path).mkdirs();
        props = new Properties();
    }

    public static void cfgset(String key, String val)
            throws IOException {
        FileOutputStream fos = acti.openFileOutput(cfg, Context.MODE_PRIVATE);
            props.setProperty(key, val);
            props.store(fos, "...");
    }

    public static int cfgget(String tocollect) throws IOException {

        FileInputStream fis = context.openFileInput(cfg);
        props.load(fis);
        fis.close();
        String collected = props.getProperty(tocollect, "0");
        coll = Integer.valueOf(collected);
        return coll;
    }
} 
```

这就是我现在的样子。这很完美。它适用于所有在同一问题上遇到问题的人。请随意使用。

`acti`在我的`OwnClass`使用中声明`protected static Activity acti;`并且`acti = this;`

# unix - 已安装软件的 Unix 注册表

> ID：15518445
> 
> 赞同：0
> 
> 时间：2013-03-20T08:19:47.387
> 
> 标签：unix, registry

我已经在 unix 上安装和配置了 SAS 9.3 软件。我通过手动删除文件夹犯了一个错误。我想知道在哪里可以找到 unix OS 中的注册表文件夹，以便手动删除我的 SAS 软件的影响？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:49:02.857

这取决于操作系统。对于 Debian 派生的 Linux 发行版，已安装的软件通过`dpkg`用户界面工具（如`aptitude`和`synaptic`管理已安装的软件包）进行管理。对于 Red Hat 派生的 Linux 发行版，它是`rpm`（并且通常`yum`作为管理用户界面）。Solaris 也有它自己的东西（`pkgadd`等等...）。

但是很可能您的“SAS 9.3”软件没有使用这些软件安装。相反，它的文件可能只是手动放置在文件系统中。目录`/usr/local`（大部分）和`/opt`（不太常见）保留供以这种方式安装的软件使用。根据软件的不同，找到与安装相关的所有文件以便以后删除它们可能很容易，也可能不容易。

# java - 在java中读取unicode txt

> ID：15518447
> 
> 赞同：2
> 
> 时间：2013-03-20T08:19:57.697
> 
> 标签：java, unicode, non-ascii-characters

我正在尝试从以 Unicode 编码的 .txt 文件中提取数据，因为其中有重音符号（法语名称）。下面是我的一部分代码。字符串 postalCode 的输出中有奇怪的小方块 (squareHsquare1square)。我怀疑这个问题与将内容视为 ASCII 的程序有关。有人请指出我正确的方向。谢谢！

```
Scanner in = new Scanner(new FileReader("postal_codes.txt"));
currentLine = in.nextLine();

//take first 6 char --> store as variable
postalCode = currentLine.substring(0, 5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:22:27.287

这听起来像一个编码问题。我假设“以 Unicode 编码”是指“以 UTF-8 编码”。试试这个：

```
Scanner in = new Scanner(
    new InputStreamReader(new FileInputStream("postal_codes.txt"), "UTF-8")); 
```

A`FileReader`自动使用平台的默认编码。这通常不是 UTF-8。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T08:24:34.003

如果您阅读 javadoc for [`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)，它会说（强调我的）：

> 此类的构造函数*假定默认字符编码*和默认字节缓冲区大小是适当的。*要自己指定这些值，请在 FileInputStream 上构造 InputStreamReader*。

换句话说，您需要使用：

```
new Scanner(new InputStreamReader(
     new FileInputStream("postal_codes.txt"), StandardCharsets.UTF_8)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:25:42.007

您可以使用番石榴，方法：

```
Files.readLines(File file Charset charset) : List<String> 
```

包的

```
com.google.common.io.Files; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:22:14.997

你可以试试这个：

```
BufferedReader in = new BufferedReader(new FileReader("postal_codes.txt", "UTF-8")));
String content = in.readLine();
postalCode = content.substring(0, 5); 
```

# javascript - 拖慢拖拽速度？

> ID：15518449
> 
> 赞同：0
> 
> 时间：2013-03-20T08:20:03.840
> 
> 标签：javascript

我正在使用以下函数来拖动 div：

```
function enableDragging(ele, ell) {
    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
    enableDragging.z = enableDragging.z || 1;
    var grabber = document.getElementById(ell);
    grabber.onmousedown = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        current = target.parentNode;
        dragging = true;
        x = ev.clientX + 2;
        y = ev.clientY + 2;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;

        var viewportWidth = viewport().width;
        var viewportHeight = viewport().height;
        document.onmousemove = function (ev) {
            ev = ev || window.event;
            if (dragging == true) {
                var Sx = parseFloat(ev.clientX) - x + Ox;
                var Sy = parseFloat(ev.clientY) - y + Oy;
                current.style.left = Math.min(Math.max(Sx, Math.min(viewport().width - Sx, 0)), viewportWidth - current.offsetWidth) + "px";

                current.style.top = Math.min(Math.max(Sy, Math.min(viewport().height - Sy, 0)), viewportHeight - current.offsetHeight) + "px";
            }
        }

        document.onselectstart = function () {
            return false;
        };

        document.onmouseup = function (ev) {
            ev = ev || window.event;
            dragging && (dragging = false);
            if (ev.preventDefault) {
                ev.preventDefault();
            }
        }

        document.body.style.MozUserSelect = "none";
        document.body.style.cursor = "default";

        return false;
    };
}

function viewport() {
    var e = window
    , a = 'inner';
    if ( !( 'innerWidth' in window ) ) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
} 
```

这就是我开始拖动的方式：

```
 var ele = document.getElementById("snapifyWrapper");
        enableDragging(ele, 'hndl'); 
```

我想弄清楚如何让阻力变慢？基本上我想减慢 div 被拖动的速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:53:31.167

在您的`document.onmousemove()`功能中，也许检查它`Sx`并且与移动对象之前和之前`Sy`有足够的不同？`x``y``current`

因此，在移动对象之前指定一个阈值并与该阈值进行比较。

```
// need to have displacement of 10px before moving the object
var threshold = 10;   
var getAbs = Math.abs;    // local reference to Math.abs() function
document.onmousemove = function (ev) {
    ev = ev || window.event;
    if (dragging == true) {
        var Sx = parseFloat(ev.clientX) - x + Ox;
        var Sy = parseFloat(ev.clientY) - y + Oy;

        if (getAbs(Sx) > threshold || getAabs(Sy) > threshold) {
            // move it       
            current.style.left = Math.min(Math.max(Sx, Math.min(viewport().width - Sx, 0)), viewportWidth - current.offsetWidth) + "px";
            current.style.top = Math.min(Math.max(Sy, Math.min(viewport().height - Sy, 0)), viewportHeight - current.offsetHeight) + "px";
        }
    }
} 
```

您还可以添加一个来指定*mousemove*`timer`应该在多长时间之前记录坐标。

# javascript - 如何解决我在加载 Facebook javascript-sdk 时遇到的错误？

> ID：15518450
> 
> 赞同：1
> 
> 时间：2013-03-20T08:20:07.003
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在使用以下代码将 Facebook javascript sdk 加载到我的页面中：-

```
 (function() {
            console.log('Hello World! From self executing function.'); 
            var e = document.createElement('script');
            e.async = true;
            e.type = 'text/javascript';
            e.src = document.location.protocol +  '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
            console.log('javascript sdk is appended into the fb-root element of the page.');
        }()); 
```

它正在正确加载，但我在控制台中收到以下错误：-

```
 Error: Permission denied to access property 'toString'
  [Break On This Error]     

   ...5(i(ca.getElementsByTagName('*')),'forEach',true,function(ka){if(!ea&&ka.getAttr... 
```

如何解决这个问题？

谢天谢地有任何帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:24:40.733

Facebook javascript SDK 通常会导致跨浏览器问题。为了解决这个问题，facebook 本身已经集成了一个方法，即在 FB.init() 函数中添加一个频道 url。

```
window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
  appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true  // parse XFBML tags on this page?
});

// Additional initialization code such as adding Event Listeners goes here

 }; 
```

添加通道文件可解决跨浏览器问题。

channel.html 文件的内容应该只有一行：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

FB.init() 中的 channelUrl 参数是可选的，但强烈推荐。提供通道文件可以帮助解决三个特定的已知问题。

*   包含跨框架通信的代码的页面可能会导致社交插件在没有 channelUrl 的情况下显示为空白。
*   如果没有提供 channelUrl 并且页面包含自动播放的音频或视频，则用户可能会听到两个音频流，因为该页面已在后台第二次加载以进行跨域通信。
*   通道文件将防止在您的服务器端日志中包含额外的命中。如果您未指定 channelUrl，则应从日志中删除包含 fb_xd_bust 或 fb_xd_fragment 参数的页面查看，以确保正确计数。

channelUrl 必须是与包含 SDK 的页面匹配的完全限定 URL。换句话说，如果您的站点使用 www 提供服务，则频道文件域必须包含 www，并且如果您修改页面上的 document.domain，您也必须在 channel.html 文件中进行相同的 document.domain 更改。

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

# visual-studio-2012 - 如何在 Visual Studio 2012 中撤消“范围到此”？

> ID：15518453
> 
> 赞同：355
> 
> 时间：2013-03-20T08:20:22.673
> 
> 标签：visual-studio-2012

在解决方案资源管理器中，我单击“范围至此”以仅显示解决方案的一部分。现在我找不到如何恢复正常视图。

关闭/重新打开解决方案资源管理器不起作用；我搜索了每个菜单项，“新解决方案资源管理器视图”也不起作用；我在谷歌上一无所获。

我一定遗漏了一些明显的东西......必须有一种简单的方法来撤消“范围到这个”，对吧？

* * *

## 回答 #1

> 赞同：549
> 
> 时间：2013-04-05T08:57:23.363

单击解决方案资源管理器中的“主页”图标（默认情况下是第三个，带有房屋象形图的那个）。这会将视图恢复为完整的解决方案。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-12-23T15:35:40.940

除了按下“主页”按钮之外，您还应该在解决方案资源管理器的左上角看到两个箭头。

按向左的那个会让你回到这个范围之外，按右边的那个会让你回到这个范围内。

本质上，它们用作前进和后退按钮。

额外的：

您还可以右键单击项目并选择“新建解决方案资源管理器窗口”以拥有两个可以独立浏览的独立解决方案资源管理器（请注意，更改其中一个的设置会影响另一个）。

# mysql - 将 3 分钟记录合并汇总为单行记录

> ID：15518458
> 
> 赞同：2
> 
> 时间：2013-03-20T08:20:44.060
> 
> 标签：mysql, sql

我有一个表格，每分钟记录一次数据。看起来像：

```
time_stamp            wh   
2013-02-01 08:00:00  1700    
2013-02-01 08:01:00  1600    
2013-02-01 08:02:00  1800    
2013-02-01 08:03:00  1700    
2013-02-01 08:04:00  1900    
2013-02-01 08:05:00  1400    
2013-02-01 08:06:00  1500    
2013-02-01 08:07:00  1700    
2013-02-01 08:08:00  1700    
2013-02-01 08:09:00  1800    
2013-02-01 08:10:00  1800    
2013-02-01 08:11:00  1400 
```

..ETC

我想每 3 分钟总结一次 wh 数据，每 3 分钟求一次平均值。输出将如下所示：

```
time_stamp            SUM(wh)    AVG(wh)
2013-02-01 08:00:00    5100       1700
2013-02-01 08:03:00    5500       1833.3333
2013-02-01 08:06:00    4900       1633.3333
2013-02-01 08:09:00    5000       1666.6667 
```

这似乎很容易，但我无法得到我想要的结果。这是我尝试的 sql 查询：

```
SELECT from_unixtime(ROUND(unix_timestamp(time_stamp) / 
       (60*3)) * 60 * 3) AS rounded_time,
       SUM(wh),
       AVG(wh)
FROM electrex_0
WHERE time_stamp BETWEEN '2013-02-01 08:00' AND '2013-02-01 09:00'
GROUP BY rounded_time 
```

通过使用此 sql 代码，我设法正确获取了 time_stamp 但不是 for`SUM`和`AVG`. 我意识到它会以另一种方式总结。例如：`Sum(wh)`2013-02-01 08:03:00 是 5100，它将从 08:02,08:03,08:04 获取数据并总结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:07:49.553

这是使用变量的方法

```
SET @VAR:=1;
SET @group=0;
SELECT 
    time_stamp,
    SUM(wh) AS `TotalSum`,
    AVG(wh) AS `TotalAvg`
FROM 
  (
    SELECT 
        time_stamp,
        wh,
        @VAR AS Level,
        @group AS `TGroup`,
        @group := IF(@VAR = 3,@group + 1 ,@group) ,
        @VAR := IF(@VAR = 3,1,@VAR+1 )
    FROM electrex_0
  ) AS l
GROUP BY TGroup 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/9e5d5/44)

输出

```
|     TIME_STAMP                  | TOTALSUM |  TOTALAVG |
----------------------------------------------------------
| February, 01 2013 08:00:00+0000 |     5100 |      1700 |
| February, 01 2013 08:03:00+0000 |     5000 | 1666.6667 |
| February, 01 2013 08:06:00+0000 |     4900 | 1633.3333 |
| February, 01 2013 08:09:00+0000 |     5000 | 1666.6667 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:41:53.817

您想如何从以下位置获得 5500：

```
2013-02-01 08:03:00  1700    
2013-02-01 08:04:00  1900    
2013-02-01 08:05:00  1400 
```

加起来是5000，不是吗？

这是您的查询已修复以返回正确的数据：

```
SELECT
  from_unixtime(ROUND((unix_timestamp(time_stamp) - 60) / (60*3)) * 60 * 3) AS rounded_time,
  SUM(wh),
  AVG(wh)
FROM electrex_0
WHERE time_stamp BETWEEN '2013-02-01 08:00'
    AND '2013-02-01 09:00'
GROUP BY rounded_time 
```

回报：

```
ROUNDED_TIME                    SUM(WH) AVG(WH)
February, 01 2013 08:00:00+0000 5100    1700
February, 01 2013 08:03:00+0000 5000    1666.6667
February, 01 2013 08:06:00+0000 4900    1633.3333
February, 01 2013 08:09:00+0000 5000    1666.6667 
```

[演示](http://sqlfiddle.com/#!2/9e5d5/15)

# javascript - 动画时流沙边距发生变化

> ID：15518460
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:20:58.510
> 
> 标签：javascript, jquery, css, animation, quicksand

在网站上工作

[http://lsmcreative.co.nz/](http://lsmcreative.co.nz/)

使用导航过滤拇指时，我遇到了一个有趣的错误。动画时，图像向左奇怪地移动

容器是相对位置的，就像文档一样我不确定发生了什么

我的代码是这样的

几乎当您单击菜单中的按钮时，拇指都突然向左推了 200px，然后动画回到原位？

```
 // Custom sorting plugin
    (function($) {
      $.fn.sorted = function(customOptions) {
        var options = {
          reversed: false,
          by: function(a) { return a.text(); }
        };
        $.extend(options, customOptions);
        $data = $(this);
        arr = $data.get();
        arr.sort(function(a, b) {
          var valA = options.by($(a));
          var valB = options.by($(b));
          if (options.reversed) {
            return (valA < valB) ? 1 : (valA > valB) ? -1 : 0;              
          } else {      
            return (valA < valB) ? -1 : (valA > valB) ? 1 : 0;  
          }
        });
        return $(arr);
      };
    })(jQuery);

    // DOMContentLoaded
    $(function() {

      // bind radiobuttons in the form
      var $btn = $('#navigation ul li a');

      // get the first collection
      var $projectThumbs = $('#portfolio');

      // clone applications to get a second collection
      var $data = $projectThumbs.clone();

      // attempt to call Quicksand on every form change
        $btn.click(function(e) {

            e.preventDefault();
            if($(this).data("type") == "all"){

               $btn.removeClass("selected");
               $(this).addClass("selected");
               var $filteredData = $data.find('li');

             } else {

               $btn.removeClass("selected");
               $(this).addClass("selected"); 

               var $filteredData = $data.find('li[data-type~=' + $(this).data("type") + ']');
        }   // end $btn.click function

        $projectThumbs.quicksand($filteredData, {
          adjustHeight: 'auto', // This is the line you are looking for.                        
          duration: 800,
          easing: 'easeInOutQuad'
        }, function(){
            // call js on the cloned divs
            $("a.grouped_elements").fancybox();

        });

      });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:06:22.327

我通过添加来修复它

左：2.9702970297%！重要；到 li 的 css

接着

```
#portfolio li:nth-child(3n+1){
    margin-left:0;
} 
```

# vim - 在 vim 中自定义注解

> ID：15518461
> 
> 赞同：0
> 
> 时间：2013-03-20T08:21:00.943
> 
> 标签：vim

我怎么能告诉 VIM 以与and`@throws`类似的方式突出显示该语句？`@param``@return`

![在此处输入图像描述](../Images/a276763e6cfa147f45d43289fe838403.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:32:42.990

您可以使用[SyntaxAttr.vim - 显示字符](http://www.vim.org/scripts/script.php?script_id=383)插件的语法高亮属性来确定该`@throws`部分的语法组。

然后，您可以通过将以下内容放入您的中来更改默认关联（例如，它是`phpThrows`并且它链接到） ：`Statement``~/.vimrc`

```
:hi link phpThrows Comment 
```

# java-native-interface - 在 C++ 中访问 HashMap 变量

> ID：15518480
> 
> 赞同：0
> 
> 时间：2013-03-20T08:22:32.300
> 
> 标签：java-native-interface, hashmap

我的 java 类“PMS”中有一个 HashMap 变量“AA”。现在我想访问 cpp 文件中的“AA”。我使用 JNI 来解决这个问题。这是我的代码：

```
jclass clazz=env->FindClass("com/pms/PMS");
jfieldID field=env->GetStaticFieldID(clazz, "AA", "Ljava/util/HashMap");
jobject objPackages=env->GetStaticObjectField(clazz,field); 
```

但我得到“java/lang/NoSuchFieldError”，即“AA”找不到。然后我试试这个：

```
jclass clsPackages=env->FindClass("com/pms/PMS$AA"); 
```

这次我得到“java/lang/NoClassDefFoundError”。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:55:33.520

我认为您的代码中的第二行应该是：

`jfieldID field=env->GetStaticFieldID(clazz, "AA", "Ljava/util/HashMap;");`

分号结尾。它是语法的一部分。我忘了为什么。

一个

# c++ - 在运行时反复使用和对象的最佳实践是什么

> ID：15518487
> 
> 赞同：2
> 
> 时间：2013-03-20T08:22:46.853
> 
> 标签：c++, class, object, static, singleton

我有一个班级，名为 Contoller。我想从该类创建一个对象，并在运行时一遍又一遍地更改 transactionValue 和 transactionId。什么是最好的方法。我想我可以从默认构造函数创建一个对象并将 setControllerValues 用于新值。这是最佳实践吗？

```
class Controller{
public:
    Controller();
    Controller(int,int);
    setControllerValues(int,int);
private:
    int transactionValue;
    int transactionId;
};

int main()
{
    Controller ct;
    ct.setControllerValues(3,4);
    ct.setControllerValues(6,7);
    ct.setControllerValues(34,45);
} 
```

编辑：我听说过单身人士。我应该用它吗？（我改变了“骨架”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:31:11.987

让它成为一个全球性的！不，等等，全局变量很糟糕。让它成为单例！不，等等，单例是一种反模式。将它作为参数传递到任何需要的地方！不，等等，tramp 数据很糟糕。让它成为一个全球性的！

一个人要做什么？

你付你的钱，你做出你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:27:00.127

是的，它可以被认为是好的做法。那里没有什么问题。也许你想在写给你的私人成员之前做一些数据验证`setControllerValues`。但是其中的一部分是您所拥有的非常简单的 OOP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:41:10.403

您听到的可能是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)，而不是骨架。

当然，您可以使用您展示的方法，但让我问您：您为什么选择这种方法而不是创建单独的对象？

我不喜欢它，原因如下：

*   如果你真的想确保整个应用程序的单个实例，你需要一个合适的单例（不是我喜欢它）。您当前的实现不会阻止任何人创建另一个控制器
*   处理多个实例比对单个实例的共享访问要容易得多。如果您必须将此对象提供给其他函数，或者更糟糕的是，线程怎么办？
*   不可变对象比可变对象更容易推理。可变状态是导致大量错误的原因，因为它提供了更多使类型不变量无效的机会
*   实际上，除了调用构造函数的成本之外，您一无所获，与您需要执行的其他逻辑相比，这很便宜

简而言之，我认为这种方法没有任何好处，因为我不知道其他可能使它更合理的要求。您已经引入了许多额外的复杂性以在对象创建期间保存一些指令，无论如何编译器都会对其进行优化。这是一个糟糕的权衡，IMO。

关于单身人士，总的来说我也不喜欢他们 :) 原因如下：

*   我非常怀疑类本身知道它的生命周期问题（单例、瞬态、每个线程等）。这是客户通常更了解的事情
*   依赖单例来测试代码要困难得多
*   共享状态 + 多线程 = 调试器之夜

话虽如此，有时它们很有意义。但是，您的示例似乎并非如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:49:13.837

这取决于。

如果没有可变状态（或很少），一些程序更容易推理；例如，多线程程序。

其他面向对象的方法会说 getter 和 setter 是诅咒。

在性能和在堆栈上创建新对象方面，c++11 和编译器非常擅长找出创建高效机器代码的最佳方法，远胜于你我。

我会考虑使用赋值运算符。它允许您使用来自一个对象的值来修改另一个对象：

```
class Controller {
public:
    Controller& operator=(const Controller& other) {
        transactionValue = other.transactionValue;
        transactionId = other.transactionId;
        return *this;
    }        
private:
    int transactionValue;
    int transactionId;
}; 
```

并使用：

```
Controller permanent(12, 5678);
//...
permanent = Controller(23, 6789); 
```

# windows - ANT 构建脚本如何杀死 Windows 进程？

> ID：15518492
> 
> 赞同：8
> 
> 时间：2013-03-20T08:23:10.237
> 
> 标签：windows, ant, command-line, build

我正在扩展 ANT 构建脚本以允许 TeamCity 构建代理运行 Selenium 测试。

在这样做时，需要一个以 selenium 启动的服务器，该服务器最终不会关闭。所以我添加了一个额外的目标来在每个 TC 构建结束时对 exe 名称执行 taskkill。

taskkill 是否需要 exe 的绝对路径，因为以下不起作用；

```
<target name="shutdown.server" depends="init.properties" description="Shutdown the server after Selenium">
    <exec osfamily="windows" executable="cmd.exe" spawn="true">
        <arg line="taskkill /f /t /im app.exe"/>
    </exec>
</target> 
```

这个过程似乎有几个孩子，这就是我选择的原因，`/f /t`但正如我所说，目前他们都没有关闭。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T08:36:55.477

那很容易；

```
<target name="shutdown.server" depends="init.properties" description="Shutdown the server after Selenium">
    <exec executable="taskkill">
        <arg line="/im app.exe /f /t"/>
    </exec>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T09:15:09.290

这是一篇旧帖子，通常我使用 . `timeout="milliseconds"`，但是对于长时间运行的进程，我发现杀死*Ant*启动的进程（尤其是`java.exe`Eclipse 中的线程）的最佳方法是使用[pskill.exe](https://docs.microsoft.com/en-us/sysinternals/downloads/pskill)。

只需将 pskill64.exe 加载到项目目录并运行以下*Ant*构建。

```
<project name="project" default="shutdown.java.tasks" basedir="../">
<target name="shutdown.java.tasks">

    <exec executable="path.to.pskill.in.your.project\pskill64">
        <arg value="java.exe" />
    </exec>

</target> 
```

典型的输出是：

```
shutdown.java:
 [exec] PsKill v1.16 - Terminates processes on local or remote systems
 [exec] Copyright (C) 1999-2016  Mark Russinovich
 [exec] Sysinternals - www.sysinternals.com
 [exec] 8 processes named java.exe killed. 
```

构建成功总时间：387 毫秒

# java - 休眠保存集合

> ID：15518493
> 
> 赞同：0
> 
> 时间：2013-03-20T08:23:17.010
> 
> 标签：java, hibernate, hibernate-mapping

我正在使用 Hibernate 4（带有 Spring）将我的对象保存到数据库中。当我尝试用集合子级保存父级时，我遇到了一些问题。

我的表：

```
| A | => PK (Composite) [String + Integer]
| B | => PK (Composite) [Stirng + Integer] + Integer 
```

自然地，B 的 PK 与 A 的相同 PK 复合，并且 A 包含 B 的集合。

在我的代码中，我想要：

```
A parent = new A();
parent.addCollection(new B());
parentDao.create(parent) 
```

当 Hibernate 保留对象时，它可以将 String 设置为 A PK 并计算 Inter 的 max + 1。B PK 的方式相同，Hibernate 从 A（父 => 子）设置相同的 PK 值并计算第二个 Intenger 的最大值 + 1。

这是可能的？提前致谢

**编辑**

我的课：

```
Class A {
    static Class A_PK {
      private String codAzienda;
      private Integer year;
      ... Get, Set, HashCode, Equals and toString() ...
    }

   private A_PK id;

   ... another columns ...

   @OneToMany(cascade=ALL)
   @JoinColumns({
      @JoinColumn(name="cod_azienda"),
      @JoinColumn(name="year")
   })
   List<B> children;
}

Class B {
   static Class B_PK {
       private String codAzienda;
       private Integer year;
       private Integer nextId;
       ... Get, Set, HashCode, Equals and toString() ...
   }

 @EmbeddedId
@AttributeOverrides({
   @AttributeOverride(name = "codAzienda", column = @Column(name = "cod_azienda")),
   @AttributeOverride(name = "codCliente", column = @Column(name = "cod_cliente"))
})

   private B_PK id;
   ... another columns ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:13:24.870

尝试以下操作：

**爪哇**

```
@Entity
@Table(name = "TABLE_A")
public class A implements Serializable {

    @Id
    @Column(name = "STR_ID")
    private String strId;

    @Id
    @Column(name = "INT_ID")
    @GeneratedValue(strategy = GenerationType.TABLE)
    private Integer intId;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "a")
    private List<B> bs;

    public A(String strId) {
        this.strId = strId;
    }

    public void addB(B b) {
        if (bs == null) {
            bs = new ArrayList<B>();
        }
        b.setA(this);
        bs.add(b);
    }
} 
```

**B.java**

```
@Entity
@Table(name = "TABLE_B")
public class B implements Serializable {

    @Id
    @Column(name = "INT_ID")
    @GeneratedValue(strategy = GenerationType.TABLE)
    private Integer intId;

    @Id
    @ManyToOne
    @JoinColumns({
        @JoinColumn(name = "A_STR_FK", referencedColumnName = "STR_ID"),
        @JoinColumn(name = "A_INT_FK", referencedColumnName = "INT_ID")
    })
    private A a;

    void setA(A a) {
        this.a = a;
    }
} 
```

# asp.net - 如何将百分号和pp添加到asp.net gridview中

> ID：15518497
> 
> 赞同：1
> 
> 时间：2013-03-20T08:23:25.923
> 
> 标签：asp.net, vb.net, visual-studio-2010, datagrid

我正在使用 Visual Studio 2010 并在 Visual Basic 中进行开发。我有一个 web 表单中的网格视图，我需要一些单元格显示 - 数字旁边的 % - 数字旁边的 pp（百分比点） - 只是一个数字

这在列和行之间有所不同，例如：

```
KPI             2012   2013    var
Volume          18     20      11%
VolumeToRevenue 10%    15%     5pp 
```

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:44:15.457

% 百分比符号的实体参考是

```
"&#37;" which displays in html as... 
```

%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:32:11.957

使用[`BoundField.DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)属性：

```
<asp:BoundField DataField="ProductID" 
                HeaderText="ProductID" 
                InsertVisible="False" ReadOnly="True" 
                SortExpression="ProductID" 
                DataFormatString="{0:D6}" /> 
```

更改`DataFormatString`为以下之一：

```
{0}%               // number + %
{0}pp              // number + pp
{0}                // just a number 
```

# eclipse - Eclipse 在 src 的文件夹中看不到配置

> ID：15518498
> 
> 赞同：1
> 
> 时间：2013-03-20T08:23:31.527
> 
> 标签：eclipse, spring, config

我有一个 Eclipse 项目，其中包含大约 50 个不同的配置文件，这些文件当前直接位于 src 文件夹下。我想将它们全部放在一个文件夹中，例如 src/config 以减少混乱。

但 Eclipse 似乎并不喜欢它。按照这里的建议，我尝试配置构建路径以包含此文件夹以及运行配置，但没有运气。

该怎么办？将它们全部留在 src 文件夹中？

# java - 使用非西方字符对字符串进行排序

> ID：15518502
> 
> 赞同：8
> 
> 时间：2013-03-20T08:23:44.563
> 
> 标签：java, string, sorting, locale

我想打印所有可用语言的排序波兰语名称。

```
import java.util.*;

public class Tmp
{
  public static void main(String... args)
  {
    Locale.setDefault(new Locale("pl","PL"));
    Locale[] locales = Locale.getAvailableLocales();
    ArrayList<String> langs = new ArrayList<String>();
    for(Locale loc: locales) {
      String  lng = loc.getDisplayLanguage();
      if(!lng.trim().equals("") && ! langs.contains(lng)){
        langs.add(lng);
      }
    }
    Collections.sort(langs);
    for(String str: langs){
      System.out.println(str);
    }
  }
} 
```

不幸的是，我对排序部分有疑问。输出是：

```
:
:
kataloński
koreański
litewski
macedoński
:
:
węgierski
włoski
łotewski 
```

不幸的是，在波兰语`ł`中是在`l`之前和之后，`m`所以输出应该是：

```
:
:
kataloński
koreański
litewski
łotewski
macedoński
:
:
węgierski
włoski 
```

我怎样才能做到这一点？是否有一种通用的非语言相关方法（比如说我现在想显示这个并使用另一种排序规则以另一种语言进行排序）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T08:33:58.390

尝试

```
Collections.sort(langs, Collator.getInstance(new Locale("pl", "PL"))); 
```

它会产生

```
...
litewski
łotewski
... 
```

有关详细信息，请参阅 Collat​​or API

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T08:30:00.990

您应该将 Collat​​or 传递给 sort 方法：

```
// sort according to default locale
Collections.sort(langs, Collator.getInstance()); 
```

默认排序顺序由字符串中的 Unicode 代码点定义，这不是任何语言中正确的字母顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T08:31:10.563

看看[`java.text.Collator.newInstance(Locale)`](http://docs.oracle.com/javase/6/docs/api/java/text/Collator.html#getInstance%28java.util.Locale%29)。您需要在您的情况下提供波兰语语言环境。整理器实现了`Comparator`接口，因此您可以在排序 API 和排序的数据结构（如`TreeSet`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:32:32.903

> 不幸的是，波兰语中 l 出现在 l 之后 m 之前，所以输出应该是：

您可以定义自己的[`Compararable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)或[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)接口。

或者这也可以帮助你：

*   [使用本地化对字符串列表进行排序](https://stackoverflow.com/questions/12889760/sort-list-of-strings-with-localization)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-05T12:47:12.597

我正在处理同样的问题。我发现本地收集器解决方案适用于 android 7.0，但不适用于早期的 android 版本。我已经实现了以下算法。它非常快（我对 3000 多个字符串进行了排序），并且在早期的 android 版本上也是如此。

```
public class SortBasedOnName implements Comparator {

    private Map<Character, Integer> myCharMap;
    private final static Map<Character, Integer>myPolCharTable = new HashMap<Character, Integer>();
    static {
        myPolCharTable.put(' ',0x0020);
        myPolCharTable.put('!',0x0021);
        myPolCharTable.put('"',0x0022);

        myPolCharTable.put('a',0x0040);
        myPolCharTable.put('ą',0x0041);
        myPolCharTable.put('b',0x0042);
        myPolCharTable.put('c',0x0043);
        myPolCharTable.put('ć',0x0044);

        myPolCharTable.put('{',0x0066);
        myPolCharTable.put('|',0x0067);
        myPolCharTable.put('}',0x0068);
    }

    public SortBasedOnName() {}

    public int compare(Object o1, Object o2) {

        Dictionary dd1 = (Dictionary) o1;
        Dictionary dd2 = (Dictionary) o2;

    return strCompareWithDiacritics(dd1.getOriginal(), dd2.getOriginal());
    }

    private  int strCompareWithDiacritics(String s1, String s2) {

        int i = 0;
        int result = 0;
        int length =0;

        s1 = s1.toLowerCase();
        s2 = s2.toLowerCase();
        if (s1.length() > s2.length()) {
            result = 1;
            length = s2.length();
        } else if (s1.length() < s2.length()) {
            result = -1;
            length = s1.length();
        } else if (s1.length() == s2.length()) {
            result = 0;
            length = s1.length();
        }

        try {
            while (i <length) {
                if (myPolCharTable.get(s1.charAt(i)) > myPolCharTable.get(s2.charAt(i))) {
                    result = 1;
                    break;
                } else if (myPolCharTable.get(s1.charAt(i)) < myPolCharTable.get(s2.charAt(i))) {
                    result = -1;
                    break;
                }
                i++;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-18T08:40:44.927

像这样的东西

```
val polishCollator = yourCollection.sortedWith(Comparator { s1, s2 ->
            Collator.getInstance(Locale("pl", "PL")).compare(s1,s2)
        }) 
```

# php - 使用 php 自定义数学函数

> ID：15518507
> 
> 赞同：1
> 
> 时间：2013-03-20T08:24:06.310
> 
> 标签：php

我不太擅长 PHP。我有一个我正在尝试执行的功能，但我无法这样做。我正在尝试这个已经有一段时间了。

```
$init_val = ($price/120) * 20;
$mid_val = $price - $init_val;
//$final_value = $mid_value - 35% of $mid_val     // want to execute this logic
//$final_value = $mid_value - ($mid_val * 35%);   // this gives error
//$final_value = $mid_value - 35%;                // same error 
```

给出的错误是：

> PHP 解析错误：语法错误，意外的 ';' 在第 51 行的 /var/www/site1/function.php 中

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:26:31.413

您不能`%`用作数学函数：

```
$final_value = $mid_value - ($mid_val * 0.35); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T08:27:16.543

您不能在 PHP 中使用像这样的百分比值。该`%`符号保留用于模运算。试试这个：

```
$final_value = $mid_value - ($mid_val * 0.35); 
```

那会给你65%`$mid_value`的`$final_value`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:26:17.683

`$final_value = $mid_value - ($mid_val * 0.35);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:30:33.967

如果您想编写百分比*的概念*，请创建一个函数

```
function percent($value) {
    return $value / 100;
} 
```

然后你可以写

```
$final_value = $mid_value - $mid_val * percent(35); 
```

（不需要括号，`$midval * percent(35)`因为`*`优先级高于`-`（[见此](http://php.net/manual/en/language.operators.precedence.php)））

`%` [是模运算符](http://php.net/manual/en/language.operators.arithmetic.php)。

# ruby - 在 Rails 应用程序上出现 500 内部服务器错误（heroku 日志已发布）

> ID：15518511
> 
> 赞同：0
> 
> 时间：2013-03-20T08:24:21.837
> 
> 标签：ruby, ruby-on-rails-3, heroku

**更新** 我解决了。代码中的 if 语句存在一些问题

在本地一切正常，但我不确定为什么会出现错误

我有我的 rails 应用程序，我正在尝试访问 URL“/users/username”，例如 tbrown。它是由未定义的方法“admin”还是其他原因引起的？Admin_user 已在我的 application_controller.rb 中定义，并且我有一个 admin_user.rb 模型。在这里发布的是heroku日志和控制器

heroku 日志

```
2013-03-20T08:05:55+00:00 app[web.1]: Started GET "/users/tbrown" for xx.xx.xx
.xx at 2013-03-20 08:05:55 +0000
2013-03-20T08:05:55+00:00 app[web.1]:
2013-03-20T08:05:56+00:00 app[web.1]:
2013-03-20T08:05:56+00:00 app[web.1]:     22:     <% end %></div>
2013-03-20T08:05:56+00:00 app[web.1]: ActionView::Template::Error (undefined met
hod `admin?' for nil:NilClass):
2013-03-20T08:05:56+00:00 app[web.1]:     23:     <% if current_user.admin? %>
 2013-03-20T08:05:56+00:00 app[web.1]:     21:     <span class="content2"><%= com
ment.comment_content %></span>
2013-03-20T08:05:56+00:00 app[web.1]:     24:     <%= link_to "delete", pos
t, method: :delete, 
```

应用程序控制器

```
def admin_user?
    unless current_user && current_user.admin?
      redirect_to root_url
      return false
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:39:56.363

问题出在你`app/views/posts/_post.html.erb`的线上：

```
<% if current_user.admin? %> 
```

This assumes that current_user is not nil (i.e. a user is logged in). You are already defensively coding around that problem in your controller `admin_user?` method. It might be better to implement a helper method along the same lines (but without the redirect) and call that from your view instead.

# c# - 了解树搜索中的 PLINQ 瓶颈

> ID：15518516
> 
> 赞同：3
> 
> 时间：2013-03-20T08:24:29.793
> 
> 标签：c#, plinq, alpha-beta-pruning

我对 PLINQ 有一些奇怪的结果，我似乎无法解释。我一直在尝试并行化 Alpha Beta 树搜索以加快搜索过程，但它实际上减慢了搜索速度。我希望当我提高并行度时，我会线性增加每秒的节点数......并在修剪被推迟到以后处理时处理额外的节点。虽然节点数符合预期，但我的时间没有：

非 plinq，访问的节点：61418，运行时间：0:00.67

并行度：1，访问节点：61418，运行时间：0:01.48

并行度：2，访问节点：75504，运行时间：0:10.08

并行度：4，访问节点：95664，运行时间：1:51.98

并行度：8，访问节点：108148，运行时间：1:48.94

* * *

有人帮我找出可能的罪魁祸首吗？

相关代码：

```
 public int AlphaBeta(IPosition position, AlphaBetaCutoff parent, int depthleft)
    {
        if (parent.Cutoff) 
            return parent.Beta;

        if (depthleft == 0) 
            return Quiesce(position, parent);

        var moves = position.Mover.GetMoves().ToList();

        if (!moves.Any(m => true))
            return position.Scorer.Score();

        //Young Brothers Wait Concept...
        var first = ProcessScore(moves.First(), parent, depthleft);
        if(first >= parent.Beta)
        {
            parent.Cutoff = true;
            return parent.BestScore;
        }

        //Now parallelize the rest...
        if (moves.Skip(1)
            .AsParallel()
            .WithDegreeOfParallelism(1)
            .WithMergeOptions(ParallelMergeOptions.NotBuffered)
            .Select(m => ProcessScore(m, parent, depthleft))
            .Any(score => parent.BestScore >= parent.Beta))
        {
            parent.Cutoff = true;
            return parent.BestScore;
        }
        return parent.BestScore;
    }

    private int ProcessScore(IMove move, AlphaBetaCutoff parent, int depthleft)
    {
        var child = ABFactory.Create(parent);
        if (parent.Cutoff)
        {
            return parent.BestScore;
        }
        var score = -AlphaBeta(move.MakeMove(), child, depthleft - 1);
        parent.Alpha = score;
        parent.BestScore = score;
        if (score >= parent.Beta)
        {
            parent.Cutoff = true;
        }
        return score;
    } 
```

然后是用于在树的各个级别之间共享 Alpha Beta 参数的数据结构......

```
public class AlphaBetaCutoff
{
    public AlphaBetaCutoff Parent { get; set; }

    private bool _cutoff;
    public bool Cutoff
    {
        get
        {
            return _cutoff || (Parent != null && Parent.Cutoff);
        }
        set
        {
            _cutoff = value;
        }
    }

    private readonly object _alphaLock = new object();
    private int _alpha = -10000;
    public int Alpha
    {
        get
        {
            if (Parent == null) return _alpha;
            return Math.Max(-Parent.Beta, _alpha);
        }
        set
        {
            lock (_alphaLock)
            {
                _alpha = Math.Max(_alpha, value);
            }
        }
    }

    private int _beta = 10000;
    public int Beta
    {
        get
        {
            if (Parent == null) return _beta;
            return -Parent.Alpha;
        }
        set
        {
            _beta = value;
        }
    }

    private readonly object _bestScoreLock = new object();
    private int _bestScore = -10000;
    public int BestScore
    {
        get
        {
            return _bestScore;
        }
        set
        {
            lock (_bestScoreLock)
            {
                _bestScore = Math.Max(_bestScore, value);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:31:47.447

当您只做很少的工作并为所有底层节点启动新线程时，您会在线程上产生巨大的开销。由于 Any，您可能正在处理更多节点，通常处理应该停止，但是在找到 Any（第一个匹配项）之前，一些节点已经开始处理。当您拥有一组已知的大型基础工作负载时，并行性将更好地工作。如果您只在顶级节点上进行并行处理，您可以尝试会发生什么。

# c# - 计算十个用户同时经过的时间

> ID：15518519
> 
> 赞同：0
> 
> 时间：2013-03-20T08:24:33.617
> 
> 标签：c#, visual-studio-2010, stopwatch

我需要捕捉十个用户按下两个按钮之间的时间。
我正在这样做`StopWatch`。

```
Stopwatch stopwatch1;  
Stopwatch stopwatch2; 
```

........就像这十秒表一样。

```
private void Start_Action1()  
{   
   stopwatch1 = new Stopwatch();  
   stopwatch1.Start();  
}  
private void Stop_Action1()  
{   
   stopwatch1.Stop();   
   txtTimeForAction1.Text = stopwatch.Elapsed.ToString();  
} 
```

10 个秒表的代码相同。
注意：所有用户都将连续执行此 START-STOP 操作。我需要分别记录每个周期的经过时间。我在桌面应用程序中使用。所有用户都将使用相同的应用程序。

使用 10`Stopwatch`是个好习惯？？还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:27:19.303

您可以跟踪每个用户的开始时间，使用一个秒表并且在一个用户调用停止操作后不要停止它，只有当他们都停止时。我不知道这是否是更好的做法，但这是一种不同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:32:03.540

我认为没有理由不使用秒表。但是，与其定义十个秒表，不如将它们保存在一个数组或字典中，每个`StopWatch`都与一个用户相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:47:28.737

就个人而言，我会给每个“用户”一个日期时间（开始时间），然后当事件完成时（例如 Key_Up）你可以通过以下方式获得经过的时间：

```
DateTime elapsedTime = DateTime.Now - StartTime. 
```

然后使用 elapsedTime.Seconds 或 .Minutes 等，甚至使用 elpasedTime.ToString("hh:mm:ss") 来获得格式良好的字符串。

# java - GWT - 更新面板中的表格

> ID：15518522
> 
> 赞同：0
> 
> 时间：2013-03-20T08:24:36.650
> 
> 标签：java, database, gwt, panel, celltable

我有一个verticalPanel，里面有一张桌子。OnModuleLoad 我从数据库中获取数据，这些数据显示在表格中。单击按钮时，我想将列表框中的新数据添加到它。它工作正常，但我不知道如何更新表格/面板。我现在做的是创建一个新表来显示数据，但我不能删除第一个表。我是否必须将表格附加到面板才能将其删除？实际上我不喜欢这个解决方案，这就是为什么我想知道是否有更新方法之类的。

**创建表**

```
public void createTimeTable(){
        //Table and Panel -> created globally
        //On Load -> get all times which are already booked
        serviceImplURL.getRpcDB().getBookedTimes(username, new AsyncCallback<ArrayList<Times>>() {
            /**
            */
            @Override
            public void onFailure(Throwable caught) {
                // TODO Auto-generated method stub

            }
            /**
            */
            @Override
            public void onSuccess(ArrayList<Times> startList) {
                /**
                */

                    table.setRowCount(startList.size(), true);
                    table.setRowData(0, startList);

                    // Add column to show the start time.
                      TextColumn<Times> startColumn 
                      = new TextColumn<Times>() {
                         @Override
                         public String getValue(Times times) {
                            return Double.toString(times.getStart());
                         }
                      };
                      table.addColumn(startColumn, "Beginn");

                   // Add column to show the pause time.
                      TextColumn<Times> pauseColumn 
                      = new TextColumn<Times>() {
                         @Override
                         public String getValue(Times times) {
                            return Integer.toString(times.getPause());
                         }
                      };
                      table.addColumn(pauseColumn, "Pause in Minuten");

                   // Add column to show the end time.
                      TextColumn<Times> endColumn 
                      = new TextColumn<Times>() {
                         @Override
                         public String getValue(Times times) {
                            return Double.toString(times.getEnd());
                         }
                      };
                      table.addColumn(endColumn, "Ende");

                      //table panel
                      panel.setBorderWidth(1);      
                      panel.setWidth("400");
                      panel.add(table);
                      panel.getElement().setId("mainTable");

                      // Add the widgets to the root panel.
                      RootPanel.get().add(panel);

            }               
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:38:38.473

首先，您必须更正您的代码。您只需要设置数据。对？因此无需一次又一次 地创建表**列来更改其中的数据。**

首先在 rpc 调用方法之外创建表结构。然后使用表的实例并在其中设置数据。

你必须只更新数据列表，使用方法如

```
table.setRowCount(startList.size(), true);
table.setRowData(0, startList); 
```

**编辑：**

```
 private void initilaize()
    {

                // Add column to show the start time.
                  TextColumn<Times> startColumn 
                  = new TextColumn<Times>() {
                     @Override
                     public String getValue(Times times) {
                        return Double.toString(times.getStart());
                     }
                  };
                  table.addColumn(startColumn, "Beginn");

               // Add column to show the pause time.
                  TextColumn<Times> pauseColumn 
                  = new TextColumn<Times>() {
                     @Override
                     public String getValue(Times times) {
                        return Integer.toString(times.getPause());
                     }
                  };
                  table.addColumn(pauseColumn, "Pause in Minuten");

               // Add column to show the end time.
                  TextColumn<Times> endColumn 
                  = new TextColumn<Times>() {
                     @Override
                     public String getValue(Times times) {
                        return Double.toString(times.getEnd());
                     }
                  };
                  table.addColumn(endColumn, "Ende");

                  //table panel
                  panel.setBorderWidth(1);      
                  panel.setWidth("400");
                  panel.add(table);
                  panel.getElement().setId("mainTable");

                  // Add the widgets to the root panel.
                  RootPanel.get().add(panel);
     }

    public void createTimeTable(){
            //Table and Panel -> created globally
            //On Load -> get all times which are already booked
            serviceImplURL.getRpcDB().getBookedTimes(username, 
new AsyncCallback<ArrayList<Times>>() {
                /**
                */
                @Override
                public void onFailure(Throwable caught) {
                    // TODO Auto-generated method stub

                }
                /**
                */
                @Override
                public void onSuccess(ArrayList<Times> startList) {
                    /**
                    */
                        table.setRowCount(startList.size(), true);
                        table.setRowData(0, startList);

                }               
            }); 
```

# ienumerable - C# IEnumerable 接口

> ID：15518527
> 
> 赞同：2
> 
> 时间：2013-03-20T08:25:00.180
> 
> 标签：ienumerable

我试图从一篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable%28v=vs.110%29.aspx)中理解这个例子，根据我对 IEnumberable 接口的理解，我们将能够使用 Foreach 循环遍历类集合，我对 Main 方法感到困惑，我们为什么不使用：

```
 foreach (Person p in peopleArray)
            Console.WriteLine(p.firstName + " " + p.lastName); 
```

代替

```
 People peopleList = new People(peopleArray);
    foreach (Person p in peopleList)
        Console.WriteLine(p.firstName + " " + p.lastName); 
```

例子：

```
using System;
using System.Collections;

public class Person
{
    public Person(string fName, string lName)
    {
        this.firstName = fName;
        this.lastName = lName;
    }

    public string firstName;
    public string lastName;
}

public class People : IEnumerable
{
    private Person[] _people;
    public People(Person[] pArray)
    {
        _people = new Person[pArray.Length];

        for (int i = 0; i < pArray.Length; i++)
        {
            _people[i] = pArray[i];
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
       return (IEnumerator) GetEnumerator();
    }

    public PeopleEnum GetEnumerator()
    {
        return new PeopleEnum(_people);
    }
}

public class PeopleEnum : IEnumerator
{
    public Person[] _people;

    // Enumerators are positioned before the first element 
    // until the first MoveNext() call. 
    int position = -1;

    public PeopleEnum(Person[] list)
    {
        _people = list;
    }

    public bool MoveNext()
    {
        position++;
        return (position < _people.Length);
    }

    public void Reset()
    {
        position = -1;
    }

    object IEnumerator.Current
    {
        get
        {
            return Current;
        }
    }

    public Person Current
    {
        get
        {
            try
            {
                return _people[position];
            }
            catch (IndexOutOfRangeException)
            {
                throw new InvalidOperationException();
            }
        }
    }
}

class App
{
    static void Main()
    {
        Person[] peopleArray = new Person[3]
        {
            new Person("John", "Smith"),
            new Person("Jim", "Johnson"),
            new Person("Sue", "Rabon"),
        };

        People peopleList = new People(peopleArray);
        foreach (Person p in peopleList)
            Console.WriteLine(p.firstName + " " + p.lastName);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T18:40:09.870

你是对的，你可以简单地使用第一个版本，因为数组实现`IEnumerable`.

他们选择迭代的原因`People`仅仅是出于学术目的；演示迭代器如何工作（以及如何实现`IEnumerable`）。如果他们只是简单地迭代`peoplearray`，他们将不会使用`People`该类，这是该示例的主要焦点。

# c# - 从异常详细信息中获取发生异常的类名和方法名

> ID：15518528
> 
> 赞同：4
> 
> 时间：2013-03-20T08:25:00.990
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我的 Global.asax.cs 中有这个 Application_Error 事件，它将在我的应用程序中发生任何未处理的异常。我能够收到错误消息。我还试图获得的是发生异常的类名和方法名，以便更容易追踪异常的原因和原因。请帮忙。

**全球.asax.cs**

```
protected void Application_Error(object sender, EventArgs e)
    {
        var errMsg = Server.GetLastError().Message;
        if (string.IsNullOrWhiteSpace(errMsg)) return;
        //Get Class name and method name
        //ErrorLog.SaveLog(errMsg, Classname, Methodname);
        Context.ClearError();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:30:02.237

您可以使用 StackTrace 在调用堆栈中找到此信息，请参阅[http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)中的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T09:39:02.620

最简单的方法是记录：

```
Server.GetLastError().ToString() 
```

这包括异常和任何内部异常的错误消息和堆栈跟踪，在某些情况下，还包括其他有用信息 (*)。

请注意，`Server.GetLastError().StackTrace`这只会给您外部异常的堆栈跟踪，不太有用。

(*) “其他有用信息”是指任何异常派生类都可以覆盖`ToString`以添加特定于该异常类型的附加信息。例如，[SqlException](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)覆盖`ToString`以附加`ClientConnectionId`.

# php - 正则表达式在日志文件中查找字符串并将字符串分成几部分

> ID：15518529
> 
> 赞同：1
> 
> 时间：2013-03-20T08:25:01.677
> 
> 标签：php, regex, whitespace

我对正则表达式很陌生，但我已经完成了足够的研究，可以把它放在一起。不幸的是，我遇到了障碍。我将使用这个正则表达式和 PHP preg_match 来解析一些服务器日志并返回特定的字符串，如“我的字符串”中的示例。

我的正则表达式：

```
\b([0-9\:]+)\s\"ANTIHAKE\sFOUND:\s+(.*?)\s\(([^)]+)\)\s+REASON:\s+(.*?)\s+\(([^)]+)\)" 
```

我的字符串：

```
15:34:51 "ANTIHAKE FOUND:  Kevin (106534790)  REASON:  Global Var  (Monky_hax_toggled)" 
```

最终我的目标是总共提取 5 个变量：
时间 - “15:34:51”
名称 - “Kevin”
UID - “106534790”
原因 - “全局变量”
特定原因 - “Monky_hax_toggled”

我遇到的一个具体问题是捕捉原因。我似乎无法弄清楚如何将“全局变量”捕获为一个字符串，包括空格。有人会帮助我吗？

谢谢！
乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:39:27.157

试试这个：

```
([0-9]{2}:[0-9]{2}:[0-9]{2})\s+"ANTIHAKE FOUND:\s+([^(]+)\s+\(([0-9]+)\)\s+REASON:\s+([^(]+)\s+\(([^)]+)\)" 
```

请记住，正则表达式是根据您的示例量身定制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:42:58.593

在 (.*?) 之后删除 \s+ 对我来说似乎没问题-：

```
\b([0-9\:]+)\s\"ANTIHAKE\sFOUND:\s+(.*?)\s\(([^)]+)\)\s+REASON:\s+(.*?)\(([^)]+)\) 
```

# visualforce - 如何控制标准字段的输入字段的宽度和高度？

> ID：15518531
> 
> 赞同：0
> 
> 时间：2013-03-20T08:25:03.143
> 
> 标签：visualforce

如何控制标准字段的输入字段的宽度和高度？截至目前，我正在通过使用来控制宽度

```
style="width:500px" 
```

但是如何设置高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:34:48.953

您应该使用文本区域而不是输入，您只能操纵输入的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:37:14.787

同样的方法，只需使用

```
style="width:500px; height:100px;" 
```

您还可以使用“font-size”、“border”和“padding”来让它看起来不错。

这里有一些例子[http://cssbutton.com/forms/](http://cssbutton.com/forms/) 标记为 CSS 的东西可以用在 style="" 标签中，就像你在宽度上做的那样。

# django - django-tastypie 使每个数据库查询两次

> ID：15518532
> 
> 赞同：2
> 
> 时间：2013-03-20T08:25:04.727
> 
> 标签：django, tastypie

这是我的第一篇文章，尽管我一直在搜索该网站。我找不到其他人有这个问题的证据。

我有一个使用 MySQL 数据库后端的 django-tastypie 构建的 REST API。每次调用 API 时（例如使用浏览器或 angularJS 前端），django-tastypie 后端都会使每个数据库调用两次。

这是一次 API 调用的 django SQL 记录器的输出：

```
(0.019) SELECT COUNT(*) FROM `products`; args=()
(0.020) SELECT `products`.`id` FROM `products` LIMIT 30; args=()
(0.023) SELECT (`product_styles`.`product_id`) AS `_prefetch_related_val`, `styles`.`id`, `styles`.`name` FROM `styles` INNER JOIN `product_styles` ON (`styles`.`id` = `product_styles`.`style_id`) WHERE `product_styles`.`product_id` IN (517, 518, 661, 662, 539, 429, 569, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 611, 597, 87, 88, 443, 509, 510, 511); args=(517, 518, 661, 662, 539, 429, 569, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 611, 597, 87, 88, 443, 509, 510, 511)
(0.020) SELECT COUNT(*) FROM `products`; args=()
(0.020) SELECT `products`.`id` FROM `products` LIMIT 30; args=()
(0.022) SELECT (`product_styles`.`product_id`) AS `_prefetch_related_val`, `styles`.`id`, `styles`.`name` FROM `styles` INNER JOIN `product_styles` ON (`styles`.`id` = `product_styles`.`style_id`) WHERE `product_styles`.`product_id` IN (517, 518, 661, 662, 539, 429, 569, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 611, 597, 87, 88, 443, 509, 510, 511); args=(517, 518, 661, 662, 539, 429, 569, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 611, 597, 87, 88, 443, 509, 510, 511) 
```

时间不同，但查询是相同的。我已经通过登录 MySQL 确认重复查询实际上正在发生，这不仅仅是 django 日志记录问题。我还使用wireshark 确认只发送了一个http 请求和响应（也就是说，这不是因为我不小心进行了两次API 调用）。

我已将模型和资源代码缩减为重现问题所需的基本内容，并将其包含在下面。任何人都可以就如何进一步调查提供一些想法吗？我难住了。

api.py

```
from tastypie.resources import ModelResource, Resource
from tastypie.fields import ToOneField, ToManyField
from FrameFish_aws.models import Product, ProductStyle, Style 

class StyleResource(ModelResource):
    class Meta:
        queryset = Style.objects.all()

class ProductResource(ModelResource):
    styles = ToManyField('FrameFish_aws.api.StyleResource', 'styles', full=True)
    class Meta:
        queryset = Product.objects.all().prefetch_related('styles')
        resource_name = 'frames'
        allowed_methods = ['get'] 
```

模型.py

```
from django.db import models

class Style(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=300)
    class Meta:
        db_table = u'styles'

class ProductStyle(models.Model):
    """Intermediate table for holding associating styles with products"""
    style = models.ForeignKey('Style', to_field='id')
    product = models.ForeignKey('Product', to_field='id')
    class Meta:
        db_table = u'product_styles'

class Product(models.Model):
    id = models.IntegerField(primary_key=True)
    styles = models.ManyToManyField('Style', through='ProductStyle')
    class Meta:
        db_table = u'products' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:20:03.310

我自己找到了答案。我仍在运行 django-debug-toolbar 中间件。我没有意识到它是通过[重新执行每个 sql 查询来](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/debug_toolbar/views.py)工作的……因此是重复的查询。

# iphone - iPhone - 文本字段覆盖整个屏幕

> ID：15518533
> 
> 赞同：-4
> 
> 时间：2013-03-20T08:25:09.533
> 
> 标签：iphone, uitextfield

一个初学者的问题：我在`Text Field`我的应用程序中添加了一个。在 IB 中它看起来很好，将其大小设置为 100 x 30。但是在模拟器上运行应用程序时，文本字段会覆盖整个屏幕。我该如何解决？

![在此处输入图像描述](../Images/07cdd805a9317d7d97b23f7a242a4f42.png)

![在此处输入图像描述](../Images/a1ea65ab50d0a6ec26c19f80451b9396.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:14:02.323

我认为你必须检查你的文件所有者与该文本字段的连接可能是通过你已经完成从文件所有者到文本字段的连接作为视图，所以删除那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:37:44.950

*   右侧的结帐实用程序视图
*   转到第一个选项卡
*   取消选中使用自动布局
*   转到第四个选项卡
*   检查自动调整子视图

遵循这些步骤可能会解决您的问题

享受编程！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:51:33.180

检查“AutoSizing”文本字段的属性

![自动调整大小设置为 False](../Images/366f642b72a198acee67e6b4e734016c.png)

希望，它会帮助你。

谢谢。

# python-2.7 - python中的简单HTTP客户端和服务器，但客户端同时发出至少50个请求，每个请求使用不同的IP地址

> ID：15518534
> 
> 赞同：1
> 
> 时间：2013-03-20T08:25:13.457
> 
> 标签：python-2.7

我想知道，HTTP CLIENT 如何同时向服务器发出 100 个请求，但每个请求使用不同的 IP 地址或**IP 地址**范围，python 中的代码或通过配置不同的 IP 地址或 IP 范围在代码中使用 CURL 函数地址

请帮助我编辑代码以使用不同的 IP 地址请求服务器上的 Html 或网页并读取其内容来发出多个请求。

幸运的是，python 为我们提供了一个 HTTP 服务器模块，它被称为 BaseHTTPServer。我们使用该模块中的两个类，即 BaseHTTPRequestHandler 和 HTTPServer。我们还需要使用 os 模块来访问您系统中的文件。

首先，我们需要导入这些模块

```
#!/usr/bin/env python

from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import os 
```

接下来，编写一个实现 BaseHTTPRequestHandler 的自定义类 KodeFunHTTPRequestHandler。

```
#Create custom HTTPRequestHandler class
class KodeFunHTTPRequestHandler(BaseHTTPRequestHandler): 
```

我只是从 HTTP 实现 GET 命令。为此，我们需要重写 do_GET() 函数。我们的目标是使用我们的客户端从服务器请求一个 HTML 文件（在下一步中解释）。do_GET() 函数中的脚本用于处理我们的目标

```
#handle GET command
def do_GET(self):
    rootdir = 'c:/xampp/htdocs/' #file location
    try:
        if self.path.endswith('.html'):
            f = open(rootdir + self.path) #open requested file

        #send code 200 response
        self.send_response(200)

        #send header first
        self.send_header('Content-type','text-html')
        self.end_headers()

        #send file content to client
        self.wfile.write(f.read())
        f.close()
        return

except IOError:
    self.send_error(404, 'file not found') 
```

最后，添加以下脚本来运行服务器

```
def run():
    print('http server is starting...')

#ip and port of servr
#by default http server port is 80
server_address = ('127.0.0.1', 80)
httpd = HTTPServer(server_address, KodeFunHTTPRequestHandler)
print('http server is running...')
httpd.serve_forever()

if __name__ == '__main__':
    run() 
```

保存并命名为任何您想要的名称（例如，kodefun-httpserver.py）。这是http服务器的完整脚本：

```
kodefun-httpserver.py

#!/usr/bin/env python

from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import os

#Create custom HTTPRequestHandler class
class KodeFunHTTPRequestHandler(BaseHTTPRequestHandler):

        #handle GET command
        def do_GET(self):
                rootdir = 'c:/xampp/htdocs/' #file location
                try:
                        if self.path.endswith('.html'):
                                f = open(rootdir + self.path) #open requested file

                                #send code 200 response
                                self.send_response(200)

                                #send header first
                                self.send_header('Content-type','text-html')
                                self.end_headers()

                                #send file content to client
                                self.wfile.write(f.read())
                                f.close()
                                return

                except IOError:
                        self.send_error(404, 'file not found')

def run():
print('http server is starting...')

#ip and port of servr
#by default http server port is 80
server_address = ('127.0.0.1', 80)
httpd = HTTPServer(server_address, KodeFunHTTPRequestHandler)
print('http server is running...')
httpd.serve_forever()

if __name__ == '__main__':
    run() 
```

编写一个简单的 HTTP 客户端

要检查我们的服务器是否工作正常，我们需要一个 HTTP 客户端。您可以使用您的网络浏览器来执行此操作。但是，如果您自己制作客户，那就太酷了。为此，让我们编写另一个脚本，将其命名为 kodefun-httpclient.py。将以下脚本复制到您的文件中：kodefun-httpclient.py

```
#!/usr/bin/env python (CLIENT CODE)

import httplib
import sys

#get http server ip
http_server = sys.argv[1]
#create a connection
conn = httplib.HTTPConnection(http_server)

while 1:
            cmd = raw_input('input command (ex. GET index.html): ')
            cmd = cmd.split()

            if cmd[0] == 'exit': #tipe exit to end it
                        break

            #request command to server
            conn.request(cmd[0], cmd[1])

            #get response from server
            rsp = conn.getresponse()

            #print server response and data
            print(rsp.status, rsp.reason)
            data_received = rsp.read()
            print(data_received)

conn.close 
```

使用 GET 命令进行测试

# java - 面向商务人士的轻量级 Java 属性 UI

> ID：15518537
> 
> 赞同：0
> 
> 时间：2013-03-20T08:25:31.053
> 
> 标签：java, properties, soa, business-rules

基本上我在后端服务之上有一个复合服务层。复合层通过简化查询等服务于前沿......这个想法是尽可能地将应用程序逻辑排除在复合层之外。但是，通常情况下，出于复杂的（业务）原因，我必须在我的服务层中包含一些业务规则，例如：

```
minimum_subscription_length_for_product_X=5_days 
```

让业务人员在简单的 java 应用程序中 CRUD 简单规则的最新方法是什么？我不想在规则维护过程中包括软件工程师，但也不想在花哨的 GUI 上花费大量金钱。最新的轻量级折衷方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:34:25.057

你需要什么样的用户界面？如果是传统的桌面应用程序，检查员是否合适？

![督察](../Images/92fbf4b0043c797a4c4fd4b002884f5f.png)

有关实施的更多信息是在这个问题中：

[创建检查器窗口](https://stackoverflow.com/questions/1767008/java-beans-creating-an-inspector-window)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:06:55.850

大多数规则引擎都带有开箱即用的 GUI。使用 JBoss Drools 之类的怎么样？

# python - python pyxb - 解组子类型列表

> ID：15518538
> 
> 赞同：1
> 
> 时间：2013-03-20T08:25:34.643
> 
> 标签：python, xml, xsd

我正在使用 pyxb 1.1.5 ...为 xsd 创建了绑定模块。
试图填充和创建 xml ...

BaseFooList 有一个 BaseFoo 列表

尝试填充子类型 FooOne 将在填充子类型元素时引发验证异常

```
t = vnet.root(type="GGG")
t.city="C1"
t.name="N1"
t.foos = BaseFooList()
foo1 = FooOne()
foo1.next="sss"
t.foos.item.append(foo1)
print t.toxml() 
```

===> pyxb.exceptions_.StructuralBadDocumentError: 找不到 element_use 时需要验证

谢谢，
冉

# ios - 将图像从 JSON 存储到自定义类 iOS

> ID：15518541
> 
> 赞同：3
> 
> 时间：2013-03-20T08:25:48.643
> 
> 标签：ios, json, uiimage

我正在构建一个 RSS 阅读器应用程序，遵循教程等等。

到目前为止，我已经构建了一个名为 blogPost 的自定义类，它存储了帖子名称和帖子作者，并具有基于名称的指定初始化程序。

我试图在我的 for 循环中提取帖子的缩略图，并将其显示在我当前显示标题和作者属性的单元格中。

我成功地提取了图像 URL 并从 JSON 中解析了它，但似乎无法将图像存储在 UIImage 中。

```
//Custom header for BlogPost

@interface BlogPost : NSObject
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *author;
@property (nonatomic, strong) UIImage *image;

// Designated Initializer
- (id) initWithTitle:(NSString *)title;

+ (id) blogPostWithTitle:(NSString *)tile;
@end 
```

这是 tableViewController

```
[super viewDidLoad];

NSURL *blogUrl = [NSURL URLWithString:@"http://www.wheninmanila.com/api/get_recent_summary/"];
NSData *jsonData = [NSData dataWithContentsOfURL:blogUrl];
NSError *error = nil;

NSDictionary *dataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];

self.blogPosts = [NSMutableArray array];

NSArray *blogPostsArray = [dataDictionary objectForKey:@"posts"];

for (NSDictionary *bpDictionary in blogPostsArray) {
    BlogPost *blogPost = [BlogPost blogPostWithTitle:[bpDictionary objectForKey:@"title"]];
    blogPost.author = [bpDictionary objectForKey:@"author"];

    NSURL *thumbURL = [bpDictionary objectForKey:@"thumbnail"];
    NSData *thumbData = [NSData dataWithContentsOfURL:thumbURL];

    blogPost.image = [[UIImage alloc] initWithData:thumbData];

    [self.blogPosts addObject:blogPost];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:38:17.110

更改此行：

```
NSURL *thumbURL = [bpDictionary objectForKey:@"thumbnail"]; 
```

对此：

```
NSURL *thumbURL = [NSURL urlWithString:[bpDictionary objectForKey:@"thumbnail"]]; 
```

字典中的值将是`NSStrings`，这与`NSURL`'s 不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T08:41:50.363

您正在使用`NSURL`而不是 a`NSString`并且`NSString`不响应选择器`isFileURL`（这就是您得到异常的原因）。我假设您的缩略图是一个字符串，因此您应该将其获取为`NSString`并将其转换`NSURL`为如下：

```
NSString *thumbAsString = [bpDictionary objectForKey:@"thumbnail"];
NSURL *thumbURL = [NSURL URLWithString:thumbAsString]; 
```

# apache - 某些手机 浏览器打不开某些网站，apache 访问日志中没有任何内容

> ID：15518544
> 
> 赞同：0
> 
> 时间：2013-03-20T08:26:07.583
> 
> 标签：apache

一个网站遇到了非常奇怪的问题。网站以前是由其他人制作的，我正在更新它。问题是一些移动浏览器甚至不尝试打开该站点。当我尝试使用 Symbian N8 默认浏览器打开站点时，它只会在 5% 的负载处停止，然后在一两分钟后出现消息“无法打开网站，请检查您的连接”。但是，如果我尝试使用 Opera Mini 或 Opera mobile 在同一部手机上打开该网站，它就可以正常工作。我听说其他一些人在平板电脑或手机上打开这个网站也有问题。

使用 symbian 默认浏览器连接时，Apache 访问日志不显示任何内容。此外，如果我删除具有一些规则的 .htaccess，它也无济于事。即使我添加 die("test"); 到 page.php 的第一行（首先由 .htaccess 加载）它不会在那些它不起作用的移动浏览器上显示。

# regex - 使用正则表达式查找文件中的所有邮件地址

> ID：15518547
> 
> 赞同：2
> 
> 时间：2013-03-20T08:26:20.717
> 
> 标签：regex, powershell

我需要使用 powershell 阅读大量文件并获取所有电子邮件地址。我试过这个解决方案

```
$myString -match '\w+@\w+\.\w+' 
```

问题是该变量`$matches`仅包含第一个匹配项。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:40:28.000

`-match`返回带有内容的字符串，因此它与字符串数组一起工作得更好，它可以在每行找到匹配项。你想要的是一个“全球”搜索，我相信它被称为。在 PowerShell 中，您可以使用`Select-String`参数`-AllMatches`来执行此操作。

尝试以下操作：

```
(Select-String -InputObject $myString -Pattern '\w+@\w+\.\w+' -AllMatches).Matches 
```

例子：

```
$myString = @"
user@domain.no hhaksda user@domain.com
dsajklg user@domain.net
"@

PS > (Select-String -InputObject $myString -Pattern '\w+@\w+\.\w+' -AllMatches).Matches | ft * -AutoSize

Groups            Success Captures          Index Length Value
------            ------- --------          ----- ------ -----          
{user@domain.no}     True {user@domain.no}      0     14 user@domain.no 
{user@domain.com}    True {user@domain.com}    23     15 user@domain.com
{user@domain.net}    True {user@domain.net}    48     15 user@domain.net 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-24T03:44:48.607

Select-String 方法在这里效果很好。但是，这种正则表达式模式根本不适合，您应该查看以下类似问题：[Using Regex in Powershell to grab email](https://stackoverflow.com/questions/11564679/using-regex-in-powershell-to-grab-email)

# git - 如何将我的所有文件恢复到另一个分支的早期提交之一？

> ID：15518550
> 
> 赞同：0
> 
> 时间：2013-03-20T08:26:41.080
> 
> 标签：git

例如，我`aaaa`在 Branch1 中有一个提交。Branch1 中的最新提交是`bbbb`. 我目前在 Branch2 中，我想丢弃我在 Branch2 中的所有提交，并将所有文件恢复到它们在 Branch1 commit 中的版本`aaaa`。

分支 1 中的文件保持原样。所以最终结果将在 Branch1 和 Branch2 中有 2 个类似的文件副本。

我怎样才能在 git 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:28:42.690

从`Branch2`运行：

```
git reset --hard aaaa 
```

# ruby-on-rails-3 - 覆盖 SessionsControllers 未登录

> ID：15518551
> 
> 赞同：0
> 
> 时间：2013-03-20T08:26:46.670
> 
> 标签：ruby-on-rails-3, devise, controller

我想在我的网站中添加 OpenID 身份验证。为此，我遵循了几个教程并使用了几个插件和 gem，最后我设法使用[devise_openid_authenticatable](https://github.com/nbudin/devise_openid_authenticatable) gem做*一些事情。*我也有正常的登录/密码验证、Facebook 验证和 Twitter 验证。这三个工作完美。

现在我试图覆盖 Devise's `Session Controller`，但是当我这样做时，正常的登录名/密码停止工作。我得到的错误是：

```
ActiveRecord::RecordNotFound in Sessions#create
     Couldn't find User without an ID 
```

其余的身份验证表格都可以正常工作，即使注册也很完美。这只是登录/密码身份验证方法...

我使用 Rails 3.0.1、Ruby 1.8.9 和 Devise 1.4.9

**路线.rb**

```
MAWeb::Application.routes.draw do

[...]

  devise_for :admins
  devise_for :users, :controllers => {:registrations => 'registrations', :sessions => 'sessions'}
  match '/users/openid' => 'users#openid_sign_in'
  match 'openid/sign_in' => 'openid#sign_in', :as => :openid_sign_in
  get 'openid/create'

  match '/auth/:provider/callback' => 'authentications#create'
  match '/auth/failure' => 'authentications#failure'

  resources :subscription_contact_datas

  resources :subscription_preferences do
    collection do
      post :create_with_params
    end
    member do
      get 'delete_tag'
    end
    get 'fill_event_id', :on => :member
  end
  resources :event_states

  resources :subscription_profiles do
    collection do
      put :update_profiles
    end
  end

  resources :event_criteria_options

  resources :subscriptions do
    collection do
      get :options_for_event_criteria
    end

  end

  resources :event_criterias
  resources :categories
  resources :user_infos do
      member do
        get 'edit'
      end
  end

  resources :events 

  resources :users do
    member do
      get 'showUserActivity'
    end
  end 

  resources :admins

  resources :subscriptions_from_poi

  root :to => "home#index"

  namespace :user do
    root :to => "users#index"
  end

  namespace :admin do
    root :to => "admins#index"
  end 
```

**注册控制器的覆盖工作完美*

编辑：添加了大部分路线。在我看来，我忽略的那些并不重要。

# ios - 从 Ios/Ipad Adob e Air 3 应用程序打印？

> ID：15518555
> 
> 赞同：0
> 
> 时间：2013-03-20T08:27:03.327
> 
> 标签：ios, flash, printing, air, adobe

有没有人有从 iOs/Adobe Air3 应用程序打印的经验？是否有可能无需编写本机扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T00:45:01.450

如果没有本机扩展，目前这是不可能的，尽管可以很容易地为它编写一个。

[链接到 Adob​​e Live Docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html)

它说：**移动浏览器支持：移动浏览器不支持此类**

# c# - 通过 WPF、C# 同步两个 SQLite 数据库

> ID：15518559
> 
> 赞同：3
> 
> 时间：2013-03-20T08:27:08.460
> 
> 标签：c#, .net, sqlite, sync

在我的应用程序中，我有一个本地数据库和一个服务器数据库。它们都是 SQLite DB。我需要使用 C# 代码同步这些（双向同步，即从服务器到客户端和客户端到服务器）。有n个本地系统和一个服务器。

我的要求是用户将触发同步操作，我的意思是任何按钮单击事件。应用程序无法自动同步。甚至在应用程序加载时也没有。

我已经搜索了 Microsoft Sync Framework，但我无法使用它，因为将使用该应用程序的所有本地系统都不会安装同步框架。

代码应支持以下场景：

1.  如果在服务器的表中插入新记录，则在用户触发同步后，该记录应该在本地出现。
2.  如果在本地的表中插入新记录，则在用户触发同步后，该记录也应进入服务器。
3.  如果在服务器和客户端中都插入了一条记录，则两者都应该同步并在两者中插入新记录。
4.  如果记录更新，它也应该同步。

我曾尝试使用 ADO.NET 的断开连接架构来使用数据集对象，但获取整个数据是一种性能开销。

我正在使用 .NET 4.0、Platform x86 和 WPF 应用程序

# java - Mac 上的 Java 问题指南

> ID：15518560
> 
> 赞同：2
> 
> 时间：2013-03-20T08:27:15.820
> 
> 标签：java, javafx-2

我遇到了一堵大墙，希望有人可以帮助我。

**前言：** 我们有一个桌面应用程序（基于 JavaFX）。它使用佳能的 SDK 与佳能相机对话。因此，可以下载最新拍摄的图像，获取有关相机事件的通知等。它在 Windows 上运行良好。

现在 SDK 是基于 32 位的，因此我们使用的 JVM 必须是基于 32 位的（64 位 JVM 不兼容，完全停止）。

**来到 Mac**

32 位 Mac 没有 Java-7。因此，我们得到了 Java-6，这不是问题（带有`-d32`VM 参数）。但事实证明，Mac 上没有用于 Java6 的 Java-FX。如何将我的应用程序与 Java6 和 Java-FX 捆绑在一起？任何夜间构建会有帮助吗？还是其他手动调整？否则它将需要对代码进行大量重组。

# php - Mysql全文搜索特定词

> ID：15518565
> 
> 赞同：-5
> 
> 时间：2013-03-20T08:27:26.953
> 
> 标签：php, mysql

```
tag1 - Novel, My pession, Holi, Book, My book, Having book
tag2 - Holi Novel, My pession, Book, My book, Having book
tag3 - Romantic Novel, My Novel, Book, My book, Having book
tag4 - Novel based, My Novel, Book, My book, Having book
tag5 - Ovel based, My Novel, Book, My book, Having book, Novel
tag6 - Based, My Novel, Book, Novel, Having book, Presume 
```

我只想搜索那些具有`Novel`. 它应该是搜索`tag1`和`tag5` 全文搜索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:32:20.987

```
WHERE
    tag1 REGEXP '(^|, )[[:<:]]Novel[[:>:]](,|$)' AND
    tag5 REGEXP '(^|, )[[:<:]]Novel[[:>:]](,|$)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:29:25.793

我通常以以下方式存储每个关键字

```
,Novel,My Passion,Holi, 
```

即字符串开头和结尾的逗号，所以现在您可以`'%,Novel,%'`在`LIKE`命令中搜索而不是 Novel，它就像一个魅力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:30:10.240

SELECT * FROM your_table WHERE subject LIKE 'Novel'

联盟

SELECT * FROM your_table WHERE subject LIKE 'Novel,%'

联盟

SELECT * FROM your_table WHERE subject LIKE '%,Novel,%'

联盟

SELECT * FROM your_table WHERE subject LIKE '%,Novel'

# eclipse - 为 eclipse rcp 产品创建 debian 包 (.deb)

> ID：15518571
> 
> 赞同：3
> 
> 时间：2013-03-20T08:28:17.193
> 
> 标签：eclipse, installation, eclipse-rcp, debian

大家好，大家好！

我已经使用`NSIS`.

### 现在我想在 Ubuntu 上安装。

在网上搜索后，我发现使用 debian 软件包 (.deb) 来安装我们的软件对最终用户来说会容易得多。

我可以在将应用程序导出为产品后执行我的应用程序，`Export Wizard`但无法找到有关如何`.deb`从 IDE 创建包的任何帮助。所以我的问题是：-

1.  我是否需要在我的 Eclipse IDE 中添加一些插件以便创建 deb 包？
2.  如果没有，那么有什么方法可以`makefile`在 Eclipse 中为我的项目创建一个，以便我可以按照[这里的建议创建一个 .deb 包](http://www.webupd8.org/2010/01/how-to-create-deb-package-ubuntu-debian.html)

*（我正在开发`Ubuntu-12.04LTS`任何帮助/建议/评论，因为我对 Ubuntu 完全陌生。提前谢谢你）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:53:53.277

前几天我也有同样的问题。那段时间我花时间在这上面，但随后一个简单的 shell 脚本就完成了这项工作。请通过这些链接。他们可能会帮助你——

[http://ubuntuforums.org/showthread.php?t=838485](http://ubuntuforums.org/showthread.php?t=838485)

[http://code.google.com/p/pkgcreator/](http://code.google.com/p/pkgcreator/)

另一种选择是使用 STOW。您可以在此处找到有关此的教程 -

[http://www.gnu.org/software/stow/stow.html](http://www.gnu.org/software/stow/stow.html)

[http://www.ibm.com/developerworks/linux/library/l-stow/](http://www.ibm.com/developerworks/linux/library/l-stow/)

# jasper-reports - 我们可以在 iReport API 中使用已编译的 .jasper 文件来生成报告吗？

> ID：15518573
> 
> 赞同：0
> 
> 时间：2013-03-20T08:28:19.060
> 
> 标签：jasper-reports, ireport

为什么我们使用**.jrxml**文件并在每次必须生成报告时在代码中编译它。

我们可以使用已编译**的 .jasper**文件使用**iReport API**生成报告吗？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:50:42.933

是的，您可以使用已编译的 .Jasper 文件在 iReport 中生成报告。如果我在 iReport 中打开一个 .Jasper 文件，它会自动为同一个 .Jasper 文件生成一个 .JRXML 文件，然后您就可以生成报告了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:57:29.227

是的，如果不更改模板，则不需要编译 .jrxml 文件。

```
private String jasperFile = "/path/to/yourReport.jasper";
jasperPrint = JasperFillManager.fillReport(jasperFile,
                reportParametrs,
                dataSource); 
```

# apache-flex - flex：如何验证多个必填字段

> ID：15518577
> 
> 赞同：0
> 
> 时间：2013-03-20T08:28:34.387
> 
> 标签：apache-flex, validation, required

我只能验证一个文件。

```
<mx:Validator required="true" property="text" source="{name}" valid="vaildator(event)" invalid="vaildator(event)" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:36:58.923

使用 Validator.validateAll() 函数获取每个字段的有效性，然后检查返回的数组是否为空。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Declarations>
    <mx:StringValidator 
        id="svSurname" 
        source="{tiSurname}" 
        property="text" 
        requiredFieldError="Surname is required!" 
        required="true"/>

    <mx:StringValidator 
        id="svFirstname" 
        source="{tiFirstname}" 
        property="text" 
        requiredFieldError="Firstname is required!" 
        required="true"/>

    <mx:NumberValidator 
        id="nvAge"
        source="{tiAge}"
        property="text"
        lowerThanMinError="Only after 18 years old" 
        minValue="18" 
        requiredFieldError="Age is required!" 
        required="true"/>

</fx:Declarations>

<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.validators.Validator;
        private function onBtnEnter():void
        {
            var validationResult:Array = Validator.validateAll([svSurname, svFirstname, nvAge]);

            if (validationResult.length == 0)
                Alert.show("All right!");
            else
                Alert.show("You have an error!");
        }
    ]]>
</fx:Script>

<s:VGroup x="10" y="10" width="250" height="150">

    <s:HGroup width="100%" verticalAlign="bottom">
        <s:Label text="Surname*" width="120" textAlign="right"/>
        <s:TextInput id="tiSurname" width="120"/>
    </s:HGroup>

    <s:HGroup width="100%" verticalAlign="bottom">
        <s:Label text="Firstname*" width="120" textAlign="right"/>
        <s:TextInput id="tiFirstname" width="120"/>
    </s:HGroup>

    <s:HGroup width="100%" verticalAlign="bottom">
        <s:Label text="Age*" width="120" textAlign="right"/>
        <s:TextInput id="tiAge" width="120"/>
    </s:HGroup>

    <s:HGroup horizontalAlign="center" width="100%" height="40">
        <s:Button id="btnEnter" label="Send" click="onBtnEnter()"/>
    </s:HGroup>

</s:VGroup>
</s:Application> 
```

# jquery - 带有 Wordpress 的 jQuery Masonry 无法正确显示

> ID：15518579
> 
> 赞同：0
> 
> 时间：2013-03-20T08:28:35.303
> 
> 标签：jquery, css, wordpress, jquery-masonry

我已将 Masonry 设置为在我正在尝试构建的网站上使用自定义帖子类型，但我对 Masonry 显示我的帖子的方式有疑问。帖子不是总是具有相同的页边距并在页面上流畅地流动，而是堆叠成三个（少数除外），然后跳过大量页面，然后再堆叠成三个。

这是一个[出错的例子](http://bildr.no/view/1419185)。

我的头：

```
<?php wp_enqueue_script("jquery"); ?>
    <?php wp_head(); ?>
    <script language="javascript" type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery.masonry.min.js"></script>
    <script type="text/javascript">
    jQuery(document).ready(function($){
        $('#kampanjer-container').masonry({
            itemSelector: '.kampanjepin',
            columnWidth: 226,
            singleMode: true });
    });</script> 
```

这是页面模板循环：

```
<!-- Start the Loop. -->
            <div id="kampanjer-container">
                <?php
                    $args = array(
                        'post_type' => 'kampanje',
                        'posts_per_page' => '15',
                    );
                    $kampanje = new WP_Query( $args );
                    if( $kampanje->have_posts() ) { while( $kampanje->have_posts() ) {
                            $kampanje->the_post(); ?>
                            <article class="kampanjepin">
                                <?php if ( has_post_thumbnail() ) { the_post_thumbnail(); } ?>
                                    <h3><?php the_title() ?></h3>
                                    <div class='kampanje-content'>
                                        <?php the_content() ?>
                                    </div>
                            </article><!-- END .kampanjepin -->
                            <?php
                        }
                    }
                    else {
                        echo 'Ingen kampanjer for øyeblikket!';
                    }
                ?>
            </div><!-- END #kampanjer-container --> 
```

还有我的风格：

```
#kampanjer-container {
    margin: 25px 0 0 -10px;
    width: 670px;
}

.kampanje-content {
    width: 182px;
}

.kampanjepin {
    float: left;
    margin: 10px;
    padding: 10px;
    -moz-box-shadow: 0 0 7px 0px rgba(0,0,0,0.07);
    -webkit-box-shadow: 0 0 7px 0px rgba(0,0,0,0.07);
    box-shadow: 0 0 7px 0px rgba(0,0,0,0.07);
    background-color: #ffffff;
    width: 182px;
}

.kampanjepin img {
    background-color: #ececec;
    max-width: 182px;
    max-height: 125px;
    display: block;
    text-align: center;
}

.kampanjepin h3 {
    font-size: 0.850em;
    font-weight: bold;
    margin: 10px 0 5px 0;
    color: #000000;
}

.kampanjepin p {
    font-size: 0.750em;
} 
```

如果有人可以帮助我解决这个问题，那就太好了！:)

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:39:11.353

事后看来，我很确定布局问题是由开放的后循环引起的——尤其是因为 Masonry 声明似乎是正确的。在不关闭帖子循环的情况下，在浏览器中查看源代码时，您的代码可能类似于以下示例，其中包含 2 个帖子：

```
<div id="kampanjer-container">

    <!--this is the first post-->
    <article class="kampanjepin">
        <img><!--this is the thumbnail-->
        <h3><!--this is the post title--></h3>
        <div class='kampanje-content'>
            <?php the_content() ?>
        </div>
    </article>
    <!--this is the first post-->

    </div><!--this is a stray closing tag from the parent container #kampanjer-container-->

    <!--this is the second post-->
    <article class="kampanjepin">
        <img><!--this is the thumbnail-->
        <h3><!--this is the post title--></h3>
        <div class='kampanje-content'>
            <?php the_content() ?>
        </div>
    </article>
    <!--this is the second post-->

    </div><!--this is a stray closing tag from the parent container #kampanjer-container-->

</div> 
```

发生这种情况的原因很简单：只要帖子循环没有用 关闭`<?php endwhile;?>`，循环将继续接受所有内容，`</article>`作为代码或内容，重复用于每个拉出显示的帖子。上面带有流浪的示例`</div>`可能只是循环中包含的许多其他内容之一，但它足以弄乱您的布局。

因此，您的整个 post 循环应该看起来像这样：

```
<div id="kampanjer-container"> <!--start of parent container-->

    <?php // define custom arguments
        $args = array(
            'post_type' => 'kampanje',
            'posts_per_page' => '15',
        );
        $kampanje = new WP_Query( $args );
    ?>

    <?php // start loop
        if($kampanje->have_posts() ) : while ( $kampanje->have_posts() ) : 
        $kampanje->the_post();
    ?>

        <!--post container-->
        <article class="kampanjepin">
            <?php if ( has_post_thumbnail() ) { the_post_thumbnail(); } ?>
            <h3><?php the_title() ?></h3>
            <div class='kampanje-content'>
                <?php the_content() ?>
            </div>
        </article>
        <!--post container-->

    <?php // end loop
        endwhile;
    ?>

    <?php else:?> 

       <!--No post message-->
       <?php echo 'Ingen kampanjer for øyeblikket!'; ?>

    <?php // end conditional if statement
        endif;
    ?>

</div> <!--end of parent container--> 
```

从修改后的代码中可以看出，`<?php endwhile; ?>`直接放在结束`</article>`标记之后。这确保了 post 循环仅使用`<article>`标签和其中的所有内容。因此，该`<article>`标签将在每个帖子中一致应用。

希望这有助于解决问题！

# java - 如何为 PrintWriter 设置 TimerTask？

> ID：15518589
> 
> 赞同：0
> 
> 时间：2013-03-20T08:29:02.113
> 
> 标签：java, timertask

我过去每 3 秒`TimerTask`发送一次*消息*，但它只发送一次。

```
 public static void main(String[] args) throws IOException {
            soc = new Socket("localhost", 12345);
            out = new PrintWriter(soc.getOutputStream(), true);
            send();
        }
        private static void send() {
            Timer timer = new Timer();
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    out.println("fetewtewwefwfewf egreg \n");
                    out.flush();
                    InputStream is;
                    try {
                        is = soc.getInputStream();
                        DataInputStream dis = new DataInputStream(is);
                        while (!soc.isClosed()) {
                            long value = dis.readLong();
                            System.out.println(value);
                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }, 3000);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:37:02.727

您正在使用`timer.schedule(TimerTask task, long delay)`which 仅将任务安排为一次执行。对于重复执行使用`timer.scheduleAtFixedRate(TimerTask task, long delay, long period)`，即更改您的代码为

```
 timer.scheduleAtFixedRate(new TimerTask() {
     ....
 }, 0, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:36:17.473

你应该看看[这个链接](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)

您正在使用`timer.schedule(TimerTask task, long delay)`哪个被安排一次。
对于重复调度，您应该使用`timer.schedule(TimerTask task, long delay, long period)`

但正如[Evgeniy Dorofeev所回答的那样](https://stackoverflow.com/a/15518708/725306)

```
timer.scheduleAtFixedRate(new TimerTask(){}, 0, 3000); 
```

它没有任务执行时间的开销。并且会在下次具体执行`period`。
While`timer.schedule(TimerTask t, long d, long period)`将包括您的任务执行的时间，并将`period`在您完成上一个任务后的下一次执行。

# c# - 关闭前动画弹出窗口

> ID：15518594
> 
> 赞同：1
> 
> 时间：2013-03-20T08:29:35.860
> 
> 标签：c#, animation, popup, windows-runtime

我正在 WinRT 中为 Windows 8 制作程序，但在[Popup-class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.popup%28v=win.10%29.aspx)方面遇到了一些问题。

弹出窗口中的内容在打开时具有精美的介绍动画。我想在弹出窗口关闭之前为它的内容制作动画，但还没有找到方法。

有任何想法吗？

提前致谢

编辑：这是我正在尝试做的一个例子。Closed-eventhandler 在关闭之前做任何事情显然为时已晚。但你明白了。

```
 Popup popup = new Popup();

    SolidColorBrush brush = new SolidColorBrush(Colors.Red);
    Ellipse ell = new Ellipse() { Fill = brush, Width = 300, Height = 300 };
    popup.Child = ell;

    popup.Opened += (sender, e) =>
    {
        ColorAnimation anim = new ColorAnimation() { To = Colors.Blue };
        Storyboard.SetTarget(anim, brush);
        Storyboard.SetTargetProperty(anim, "Color");

        Storyboard sb = new Storyboard();
        sb.Children.Add(anim);

        sb.Begin();
    };
    popup.Closed += (sender, e) =>
    {
        ColorAnimation anim = new ColorAnimation() { To = Colors.Green };
        Storyboard.SetTarget(anim, brush);
        Storyboard.SetTargetProperty(anim, "Color");

        Storyboard sb = new Storyboard();
        sb.Children.Add(anim);

        sb.Begin();
    };

    popup.IsOpen = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T05:59:12.483

这里的问题是弹出窗口只有 2 个可见状态 ( `isopen =true/false`)。当`IsOpen`设置为 false（即关闭）时，弹出窗口的可见性设置为 Collapsed 并且不播放动画。我的建议是：

弹出窗口显然有一个关闭按钮来关闭它，对吧？所以在那个关闭按钮的点击事件中，开始动画。然后在故事板上收听完成的事件并在`popup.IsOpen=false`那里设置

```
sb.Completed += SomeEventHandler 
```

# android - 如何包含 2 种塞尔维亚语变体？带有拉丁字母和西里尔字母

> ID：15518597
> 
> 赞同：5
> 
> 时间：2013-03-20T08:29:42.533
> 
> 标签：android, android-resources

我有一个安卓应用程序，我想翻译成塞尔维亚语，我想要两种语言的变体：拉丁字母和西里尔字母。我尝试了这个变体：`value-sr-rRS-Latn , value-sr-Latn , value-sr-rRS-Cyrl , value-sr-Cyrl` 但没有一个有效。我收到此错误：`android-apt-compiler: [NAMEOFAPP] invalid resource directory name: [path]\res/value-sr-rRS-Latn`

在有关 res dirs 和 Locale 的 Android 文档中，我找不到此选项。

我可以用 2 个语言变体制作 2 个目录吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-21T19:04:44.813

自 Android 7.0 起，正式包含了带有拉丁文字的塞尔维亚语。`values-sr`仍然用于西里尔字母，并`values-b+sr+Latn`用于拉丁字母。

`values-sr`西里尔文
`values-b+sr+Latn`拉丁文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:39:42.080

我刚刚测试了 Android 本地化，我发现你可以使用任意区域并且它会工作。

向项目中添加一个文件夹，其名称类似于`values-sr-rZZ`ZZ 是一个从未存在的虚构区域。

然后将以下代码添加到 Application 类中，我从[这里](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)获取并稍作更改：

```
public class MainApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();

        Resources res = this.getResources();
        Configuration conf = res.getConfiguration();
        boolean isLatinAlphabet = PreferenceManager.getDefaultSharedPreferences(this)... // get a value from the application settings

        if(conf.locale.getLanguage().equals("sr") && isLatinAlphabet) {
            conf.locale = new Locale("sr", "ZZ");
            res.updateConfiguration(conf, res.getDisplayMetrics());
        }
    }
} 
```

在此代码中，只有当用户选择了塞尔维亚语作为默认语言`conf.locale.getLanguage().equals("sr")`（`isLatinAlphabet`

您可以使用不同的条件并根据需要进行更改。

此外，这种更改语言的动态方式可能会在旧设备上出现菜单项错误，但不会在新设备上重现。

# c# - TabPage.Hide() 有什么作用？

> ID：15518598
> 
> 赞同：5
> 
> 时间：2013-03-20T08:29:44.120
> 
> 标签：c#, .net, winforms, tabcontrol

我想从 TabControl 中隐藏 TabPage。

我试过这样：

```
MyTabControls.TabPages[1].Hide(); 
```

它没有隐藏。

所以我搜索并看到应该删除它并在您想要时重新创建：**[如何从 TabControl 隐藏 TabPage](https://stackoverflow.com/questions/552579/how-to-hide-tabpage-from-tabcontrol)**

在这种情况下，`Hide`函数到底在做什么？

**截屏：**

![在此处输入图像描述](../Images/be68beabd59d54c7fce0675d458faf88.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T08:32:47.250

可悲的是，你不能如你所愿。如果您想要这种效果，您必须添加和删除选项卡并重新添加它们。

尝试使用这种语法：

```
theTabControl.TabPages.Remove(tabPageA); 
```

然后重新添加：

```
theTabControl.TabPages.Add(tabPageA); 
```

[Hide()](http://msdn.microsoft.com/en-Us/library/system.windows.forms.control.hide.aspx) - 隐藏控件相当于将 Visible 属性设置为 false。调用 Hide 方法后，Visible 属性返回 false 值，直到调用 Show 方法。

**为什么你可能会使用它**——你可能会使用`Show()`或者`Hide()`当你知道它的价值时，`Visible`当你将可见性作为参数时使用，尽管我个人倾向于总是使用`Visible`.

**在这种情况**下它将做什么- 在这种情况下，它是无用的，**不会做任何事情**。就像[Visible()](http://msdn.microsoft.com/en-us/library/y6e1ah1k.aspx)一样，以下适用于它：

> “TabPage 控件受其容器约束，因此从 Control 基类继承的某些属性将不起作用，包括 Top、Height、Left、Width、Show 和 Hide。”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T09:05:03.640

原因在[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage.aspx)上说明为

> TabPage 控件受其容器约束，因此从 Control 基类继承的某些属性将不起作用，包括 Top、Height、Left、Width、Show 和 Hide。
> 
> TabControl 中的选项卡是 TabControl 的一部分，但不是各个 TabPage 控件的一部分。TabPage 类的成员（例如 ForeColor 属性）仅影响选项卡页的客户矩形，而不影响选项卡。此外，TabPage 的 Hide 方法不会隐藏选项卡。若要隐藏选项卡，您必须从 TabControl.TabPages 集合中删除 TabPage 控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-12T19:46:36.533

由于`TabPage`该类是从该类派生的，`Control`因此它必须至少具有该方法`Control`。所以这个`Hide()`功能虽然没有效果，但不能被删除。它不是因为它做了什么，而是因为它与`Control`类的关系。

（不要问我为什么它没有效果。我也想要`Hide()`我的标签。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T23:48:42.547

试试这个小技巧；

在设计器中创建选项卡控件，然后在表单的构造函数中设置以下内容；

```
 this.tabReportSelection.ItemSize = new System.Drawing.Size(0, 1);
 this.tabReportInformation.Appearance = System.Windows.Forms.TabAppearance.Buttons;
 this.tabReportInformation.SizeMode = System.Windows.Forms.TabSizeMode.Fixed; 
```

然后在您的表单代码中的某处，使用以下内容显示您想要的 TabPage；

```
 tabReportSelection.SelectTab("tabPageName"); 
```

它对我来说效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T08:24:00.217

TabPage 控件受其容器约束，因此从 Control 基类继承的某些属性将不起作用，包括 Top、Height、Left、Width、Show 和 Hide。TabControl 中的选项卡是 TabControl 的一部分，但不是各个 TabPage 控件的一部分。TabPage 类的成员（例如 ForeColor 属性）仅影响选项卡页的客户矩形，而不影响选项卡。此外，TabPage 的 Hide 方法不会隐藏选项卡。若要隐藏选项卡，您必须从 TabControl.TabPages 集合中删除 TabPage 控件。

# python - 将 POST 与 Angularjs 和 Google App Engine Python 服务器一起使用

> ID：15518607
> 
> 赞同：0
> 
> 时间：2013-03-20T08:30:13.887
> 
> 标签：python, google-app-engine, angularjs

我这里有问题。

我一直在使用 $resource 进行简单的 GET，但最近我有大量数据要发送到服务器，但给出的 414 错误 URI 太大。我知道解决方案之一是使用 POST 而不是 GET。

我试图搜索 $http.post 和将参数传递给 $http 等解决方案，但无济于事。有人可以给我一个关于我应该怎么做的教程吗？

编辑：

这是我所做的：

```
 var data_2 = $.param({'method':"update_proj",
            'proj_id': proj_id,
            'ptitle': project.title,
            'pdescription': p_desc,
            'pexposure': tech,
            'pcompany': project.company,
            'pteamsize':project.teamsize,
            'ppoc': project.poc,
            'pemail': c_email,
            'pcontact': project.contact,
            'pimg':project.img,
            'pvideo':project.video,
            'prskill': rskills,
            'poutcome': project.outcome});

    $http({method:'update_proj',
      url: "http://osmosisgal.appspot.com/update_proj", 
      data: data_2,
      headers: {'Content-Type': 'application/x-www-form-urlencoded'}})
    .success(function(data,status){
     ...
    }); 
```

这是我在 GAE 上的 python 代码：

```
 class ActionHandler(webapp.RequestHandler):
       def update_project(self):
           proj_id = self.request.POST["proj_id"]
               .
               .
               . 
```

但我仍然有这个错误

```
Traceback (most recent call last):
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1535, in __call__
    rv = self.handle_exception(request, response, e)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1529, in __call__
    rv = self.router.dispatch(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~osmosisgal/1.366101252356646323/new_backend.py", line 1274, in update_project
    proj_id = self.request.POST["proj_id"]
  File "/python27_runtime/python27_lib/versions/third_party/webob-1.1.1/webob/multidict.py", line 312, in __getitem__
    return self._decode_value(self.multi.__getitem__(self._encode_key(key)))
  File "/python27_runtime/python27_lib/versions/third_party/webob-1.1.1/webob/multidict.py", line 568, in __getitem__
    raise KeyError("No key %r: %s" % (key, self.reason))
KeyError: "No key 'proj_id': Not a form request" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:35:59.067

从[文档](http://docs.angularjs.org/api/ng.%24http)中您可以看到该方法首先获取的是方法的类型而不是 url。

```
$http({method: 'POST', url: '/someUrl', data: my_data}).
  success(function(data, status, headers, config) {
    // this callback will be called asynchronously
    // when the response is available
  }).
  error(function(data, status, headers, config) {
    // called asynchronously if an error occurs
    // or server returns response with an error status.
  }); 
```

对于您的数据，您可以创建一个带有键值对的 json 对象，并将其传递给上面的函数。

也不要忘记在控制器定义中传递 $http。

```
function MyController($scope, $http) {...}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:54:54.647

我设法解决了它。最初我没有在 GAE 中托管我所有的静态文件，在我托管它之后，一切正常。

# html - 使用 pinit 按钮在 pinterest 上分享

> ID：15518608
> 
> 赞同：0
> 
> 时间：2013-03-20T08:30:14.043
> 
> 标签：html, pinterest

我创建了一个 pinit 按钮，可以在这里看到 [http://auragraphic.com/mag/](http://auragraphic.com/mag/)

对于每个图像都有一个 pinit 按钮，当我点击它时，我会通过以下内容

1.  url - 这包含图像 url
2.  媒体 - 这包含图片网址
3.  描述 - 这包含产品的文本 + 短网址

示例链接

```
http://pinterest.com/pin/create/button/?url=http://auragraphic.com/mag/gqlive/timberlandlook_1.jpg&media=http://auragraphic.com/mag/gqlive/timberlandlook_1.jpg&description=I %20love%20GQ%20Live%20products%20http://goo.gl/pFNcl

```

当我访问上述链接时，我收到一条来自 pinterest 的消息，指出此 pin 包含我们不允许的链接或文本。为了您的安全，我们已屏蔽此图钉

我可以知道上面的示例链接中有什么问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:40:24.490

这是由于 goo.gl 缩短器而发生的。我尝试在不缩短的情况下发布相同的链接，并成功发布。因此，要么使用其他一些列入白名单的网址缩短器，要么在共享时使用完整的链接。[更好的选择是使用来自http://yourls.org/](http://yourls.org/)的免费 URL 缩短器脚本创建您自己的 url 缩短器

# android - 在导出签名的应用程序期间，eclipse 崩溃

> ID：15518609
> 
> 赞同：35
> 
> 时间：2013-03-20T08:30:14.500
> 
> 标签：android, crash, dalvik

我有一个 android 应用程序，我在 2013 年 3 月 17 日完美地导出了签名版本。然后在 2013 年 3 月 19 日，我更新了 Facebook SDK 和 Android SDK Manager，然后再次尝试导出我的应用程序的签名版本。第一个错误。

现在我一直遇到这两个问题之一，我无法导出我的应用程序的新签名版本以重新上传 Google Play 商店。

1.  转换为 Dalvik 格式失败，错误 1
2.  或我的 Android 应用程序在导出时崩溃。

我已经尝试了许多我在网上找到的解决方案，但仍然没有运气。我什至删除并重新安装了 Eclipse、ADT 和 Facebook SDK。不过，我还是有问题。

Eclipse 实际上崩溃了，这真的很奇怪。有任何想法吗？

更新：因此，在导出已签名的应用程序时，我不再收到“转换为 Dalvik 格式失败并出现错误 1”。Eclipse 只是在导出签名的应用程序时崩溃。有任何想法吗？我拥有所有最新的软件：eclipse、facebook sdk、android sdk 等。我正在运行最新版本的 Mac OS X。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-22T02:55:36.010

所以这就是我解决问题的方法，我相信有人会再次遇到这个问题。对我有用的是关闭自动构建。这么小的东西。谢谢您的帮助！

*此外，上面的答案对其他人有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T08:35:09.940

我也经历过这个。尝试对项目执行 project->clean 并重新启动 eclipse 工作区。

如果它不起作用，请阅读此线程，它可能会对您有所帮助。

[“转换为 Dalvik 格式失败，错误 1”——仅在导出时](https://stackoverflow.com/questions/8161852/conversion-to-dalvik-format-failed-with-error-1-on-export-only)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T08:36:34.023

转到项目»属性»Java构建路径»库并删除除“Android XY”之外的所有内容，单击确定。

转到项目»清理»清理下面选择的项目»选择您的项目并单击确定。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-19T03:15:54.947

在导出 apk 之前自动禁用项目/构建。 ![在此处输入图像描述](../Images/2ef7576b190621b1eb77e0804978f8d4.png)

[从 Eclipse (ADT) 导出 APK 静默崩溃](https://stackoverflow.com/questions/11752270/exporting-apk-from-eclipse-adt-silently-crashes/27008240#27008240)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T00:36:22.990

这可能是因为有些库的类具有相似的名称或不同的 android 目标版本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-21T09:42:45.010

对我来说，在 Mac OS X Yosemite 上退出 Dropbox 很有帮助（我点击了“报告”，stacktrace 提到了一个 Dropbox 线程）。

# php - 3 步 POST 表单。使用会话、隐藏字段或...？

> ID：15518617
> 
> 赞同：1
> 
> 时间：2013-03-20T08:30:41.300
> 
> 标签：php, forms, session, post

我正在整理一个 4 步注册表单，最后会将用户重定向到 Paypal 并将整个表单内容输入数据库。

目前我有以下流程：

第 1 页 - 输入详细信息 点击提交 (POST)

第 2 页 - 检查第 1 页详细信息 第 2 页 - 将详细信息放入 $_SESSION 第 2 页 - 输入更多详细信息 点击提交 (POST)

第 3 页 - 检查第 2 页的详细信息 第 3 页 - 将详细信息放入 $_SESSION 第 3 页 - 输入更多详细信息 点击提交 (POST)

第 4 页 - 检查第 3 页的详细信息 第 4 页 - 处理所有数据并放入数据库 第 4 页 - 重定向到 Paypal 第 4 页 - 在将标志设置为活动数据库之前侦听成功完成

我的问题是，我这样做是否正确？虽然它工作得很好，但我不得不使用 jquery hacks 来让用户在任何阶段都可以“返回”以对表单进行更改。

我正在考虑使用隐藏字段而不是 SESSIONS，这样每个步骤都会重新提交所有数据，如果用户想返回一个步骤，我可以将所有数据返回到前一页。我认为用户以这种方式丢失数据的可能性更大吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:37:31.050

隐藏字段的概念会使事情变得难以管理......如果字段数量更多。

在您的情况下最好使用会话而不是隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:42:45.363

这取决于：您是否需要在每一步之后进行 POST？如果没有，您也可以将所有步骤放在页面中，每个步骤都放在一个字段集中，并在 javascript 中一次仅显示 1 个字段集（正如您所说的 jQuery）。这样只有最后一步的提交按钮才能提交整个表单

另一方面，如果你需要在每一步之后都有一个帖子，我会选择会话的方式，这样更安全

# php - 授予用户什么数据库权限？

> ID：15518623
> 
> 赞同：-3
> 
> 时间：2013-03-20T08:31:12.650
> 
> 标签：php, android, mysql, database, database-security

我正在制作一个基于网络的 Android 应用程序。我在我的虚拟主机上创建了一个服务器。我曾经使用 PHP 和 MySQL 来处理数据库操作，现在我想为这个数据库分配一个用户并授予他/她的权限以操作数据。

但是我不确定我应该授予用户哪些权限，哪些不应该，我在页面上附加了一个屏幕截图，要求我授予权限，我想知道什么是安全的，什么可能对我造成潜在伤害。

![在此处输入图像描述](../Images/1e46a7f185a0a5819ed993b8aa032812.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:33:56.057

您只需要 [CRUD](http://en.wikipedia.org/wiki/CRUD)（*创建、读取、更新、删除*）权限。

所以**DELETE**、**INSERT**、**UPDATE**、**SELECT**和**EXECUTE**（如果你有一些存储过程要调用）就足够了！

# c# - Unicode 名称正则表达式

> ID：15518631
> 
> 赞同：1
> 
> 时间：2013-03-20T08:31:35.123
> 
> 标签：c#, regex, unicode, character-properties

我发现了很多关于这个的链接，但没有一个对我有用。我用过`\p{Letter}`，它允许空格和数字。

我想要人名的 Unicode 正则表达式。只有英文、拉丁文、俄文、中文和其他欧洲国家等语言的字母，不允许使用数字、空格和特殊符号。有谁能够帮助我？我将在 jquery 验证引擎和 c# 代码中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:39:10.933

这些是处理个人姓名的 W3C 建议：http: [//www.w3.org/International/questions/qa-personal-names](http://www.w3.org/International/questions/qa-personal-names)

我认为您不会发现正则表达式对此非常有用。您必须允许几乎所有内容，除了可能根本不包含任何字母的字符串。

# voip - 如何在星号 1.4 上的出站呼叫上运行 ivr

> ID：15518634
> 
> 赞同：1
> 
> 时间：2013-03-20T08:31:57.583
> 
> 标签：voip, asterisk, ivr

我想知道如何在呼出电话上运行 ivr。

我像这样在星号的 extensions.conf 中进行了设置。

```
[outgoing]    ;context
exten => 1567XXXX,1,Dial(SIP/101010@ip)  ;the call is successfully route on this number
exten => 1567xxxx,1,Answer() 
exten => 1567xxxx,n,Wait(1)
exten => 1567xxxx,n,Playback(hello-world)   ;but i want this ivr to be play when end user pick                                                                               up the call 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T15:15:26.173

尝试在拨号命令中使用宏：

```
[outgoing]    ;context
exten => 1567XXXX,1,Dial(SIP/101010@ip,,M(call))
[macro-call]
exten => s,1,Wait(1)
exten => s,n,Playback(hello-world)
exten => s,n,MacroExit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:50:48.833

您需要创建出站呼叫并将呼叫的另一端置于您的上下文中。请查看这篇文章：[http ://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

注意：如果您要创建拨号程序，那真是个坏主意。最好找一个开源软件或聘请专业人士。这条路会有很多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:49:08.133

你有两个可能的选择。一种是使用“原始”命令。有关示例，请参见[http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Originate 。](http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Originate)

另一个是我在我的解决方案中喜欢的，因为它不需要 AMI，它使用假脱机调用文件。请参阅[https://wiki.asterisk.org/wiki/display/AST/Asterisk+Call+Files](https://wiki.asterisk.org/wiki/display/AST/Asterisk+Call+Files)了解如何操作。诀窍是在 /tmp 中创建假脱机文件，然后将文件“移动”到 ../spool/asterisk/outgoing 目录中。

如果您为假脱机呼叫分配一个唯一的通道变量键/值，那么您可以使用您的拨号计划来选择它并适当地路由呼叫。

如果您正在构建一个批处理拨号系统，最基本的是一个数据库应用程序，它每分钟创建一次呼叫假脱机文件，等于您的系统挂机的线路数。如果您想担心预测/优化拨号或将呼叫传递给代理，您的假脱机系统的复杂性会迅速增加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T10:53:08.020

以类似假脱机的方式创建出站呼叫并不像 MichelV69 所建议的那么容易——我的意思是，这很容易，但是一旦你开始有新的需求，事情就会开始迅速走下坡路。我完全同意这里的文章[http://www.wombatdialer.com/manuals/WD_UserManual-chunked/ar01s01.html#_why_was_wombatdialer_created](http://www.wombatdialer.com/manuals/WD_UserManual-chunked/ar01s01.html#_why_was_wombatdialer_created)因为这就是你将要面对的

# android - 只想在 api 级别 11 之后运行向上按钮

> ID：15518638
> 
> 赞同：1
> 
> 时间：2013-03-20T08:32:06.240
> 
> 标签：android, android-activity, up-button

我只希望 API 级别 11 及更高版本上的向上按钮，但我的程序需要在所有设备上运行。我怎样才能做到这一点？

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 
```

或者

我可以向所有 API 级别添加向上按钮吗？请指教...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:40:44.850

您可以使用以下命令检查设备上安装的 Android 操作系统版本：

```
int currentAPIVersion = android.os.Build.VERSION.SDK_INT;

if (currentAPIVersion >= android.os.Build.VERSION_CODES.HONEYCOMB) {

    // RUN THE CODE SPECIFIC TO THE API LEVELS ABOVE HONEYCOMB (API 11+)   
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
} 
```

您必须在应用程序的每个 Activity 部分中运行此检查，并且可能还需要在 API 级别低于 11 时提供替代方案。

然而，对于设备上不同 API 级别的用户而言，用户体验会存在差异。为了解决这个问题，您可以考虑查看[ActionBarSherlcock 库](http://actionbarsherlock.com/)，它可以帮助您为您的应用程序带来平等，无论 API 级别（2.x 及更高版本）如何。

**更新：**

要向 Home Button 添加将返回到上一个的操作`Activity`，请覆盖该`onOptionsItemSelected()`方法，如下所示。注意`android.R.id.home`代码中的使用。*如果*您有其他菜单项将显示在`ActionBar`相同的`onOptionsItemSelected()`.

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case android.R.id.home: {
        this.finish();

        return true;
    }

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:35:59.457

你可以使用 ActionBarSherlock - [http://actionbarsherlock.com/](http://actionbarsherlock.com/)来满足你的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:41:32.230

ActionBarSherlock 绝对是你需要的，看看这个[http://actionbarsherlock.com](http://actionbarsherlock.com)

# asp.net - 使用 webGL 将 Web 应用程序集成到公司的 CRM 中

> ID：15518645
> 
> 赞同：0
> 
> 时间：2013-03-20T08:32:34.287
> 
> 标签：asp.net, webgl, crm

我想使用 webGL 库开发一个 Web 应用程序。但是，要让它在 Internet Explorer 上运行，我们需要 IEWebGL 插件。

没关系。但是，主要问题是我想将此应用程序集成到公司的 CRM 系统中。为此，插件的使用将是一个问题。

那么，如何将该应用程序集成到 CRM 中呢？请提出一些解决方案。

谢谢

# css - 使用 Django 访问 .css 文件时遇到问题

> ID：15518654
> 
> 赞同：1
> 
> 时间：2013-03-20T08:33:02.883
> 
> 标签：css, django, static

我刚开始使用 Django，在 AptanaStudio3 中使用 PyDev。我使用有用的 Django 教程来构建我的简单项目的主干。现在我正在尝试使用 css 进行一些基本的格式化和着色，但已经花了很长时间挣扎。

html页面仍然显示正常。它只是没有抓住css（404）。我从控制台知道这一点：

```
[20/Mar/2013 12:41:51] "GET /signup/ HTTP/1.1" 200 306
[20/Mar/2013 12:41:51] "GET /signup/static/signup.css HTTP/1.1" 404 2750 
```

我的文件结构：

```
Learning
- Learning
--- templates
----- 404.html
----- 500.html
--- _init.py
--- settings.py
--- urls.py
--- wsgi.py
- signup
--- static
----- signup.css
--- templates
----- signup
------- detail.html
------- index.html
------- results.html
----- __init__.py
----- admin.py
----- models.py
----- tests.py
----- urls.py
----- view.py
--- manage.py
--- sqlite.db
--- python 
```

在设置中：

```
STATIC_ROOT = ''
STATIC_URL = 'static/'
STATICFILES_DIRS = ('')
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

在我的 html 模板中：

```
<html>
    <head>
        <title>User List</title>
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}signup.css" />
... 
```

在views.py中：

```
def ip_address_processor(request):
    return {'ip_address': request.META['REMOTE_ADDR']}
def index(request):
    user_list = User.objects.order_by('name')[:5]
    template = loader.get_template('signup/index.html')
    context = RequestContext(
                             request,
                             {'user_list': user_list,},
                             [ip_address_processor])
    return HttpResponse(template.render(context)) 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:54:14.993

*   你`STATIC_URL`是一个相对路径（`static/`），这意味着所有静态文件都将相对于当前页面进行搜索。Django 的测试服务器不期望这种行为，因此不会匹配静态 URL，从而触发 404 错误。您需要将该路径设为绝对路径，而不是相对于您的页面（`/static/`例如）

*   将 Django 的静态文件系统与测试服务器一起使用时，您需要使用`./manage.py collectstatic`

*   我也**强烈**建议使用`{% static 'signup.css' %}`语法而不是`{{ STATIC_URL }}signup.css`. *请注意，如果您使用这种替代格式，则需要* `{% load static %}` *在文件中较早的位置包含。*

# android-ndk - 无法构建 Osmand 的共享库

> ID：15518657
> 
> 赞同：2
> 
> 时间：2013-03-20T08:33:20.640
> 
> 标签：android-ndk, build-process

我完全按照[installDevelopmentEnvironment](https://code.google.com/p/osmand/wiki/InstallDevelopmentEnvironment)所说的步骤进行操作。

在“repo sync”之后，我在 android/OsmAnd 目录下运行脚本 ndk-build.sh。我在我的 PATH 环境变量中添加了 ANDROID_SDK、ANDROID_NDK、JAVA_HOME。我的操作系统是 Centos 6。我的 ndk 的版本是 r8。

脚本完成后，我检查了共享库文件。关于 QT 的库文件是正确构建的，例如 libQt5Core.so ，而有关 Osmand 的库文件，例如 libOsmAndCore.so ，没有构建。

我检查了输出日志，最后它说：

> Android NDK：警告：模块 OsmAndCore
> Android NDK 的 jni/../../../core/Android.mk 中不支持的源文件扩展名：./src/Location.cpp_ ./src/OsmAndApplication.cpp_ ./src/ PlatformAPI.cpp_
> Android NDK：警告：在 jni/../../../core/Android.mk 模块 OsmAndCore
> Android NDK 中不支持的源文件扩展名：./src/Location.cpp_./src/OsmAndApplication.cpp_。 /src/PlatformAPI.cpp_
> Android NDK：警告：在 jni/../../../core/Android.mk 中，模块 OsmAndCore_neon
> Android NDK 的源文件扩展名不受支持：./src/Location.cpp_ ./src/OsmAndApplication .cpp_ ./src/PlatformAPI.cpp_
> Android NDK：警告：模块 OsmAndCore 的 jni/../../../core/Android.mk 中不支持的源文件扩展名
> Android NDK：./src/Location.cpp_ ./src/OsmAndApplication.cpp_ ./src/PlatformAPI.cpp_
> Android NDK：警告：jni/../../../core/Android.mk 中不支持的源文件扩展名对于模块 OsmAndCore
> Android NDK: ./src/Location.cpp_ ./src/OsmAndApplication.cpp_ ./src/PlatformAPI.cpp_
> make: *** No rule to make target `jni/../../../core/externals/protobuf/./upstream.patched/src/google/protobuf/extension_set.cc', needed by`obj/local/armeabi/objs/osmand_protobuf/./upstream .patched/src/google/protobuf/extension_set.o'。停止。make: *** 等待未完成的工作.... Compile++ thumb : OsmAndCore <= java_wrap.cpp

我没有更改项目中的任何文件。我阅读了上面的 Android.mk 文件，但无法弄清楚它有什么问题。

这是Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

ifeq ($(OSMAND_BUILDING_NEON_LIBRARY),true)
    QT := $(LOCAL_PATH)/externals/qtbase-android/upstream.patched.$(TARGET_ARCH_ABI)-neon
else
    QT := $(LOCAL_PATH)/externals/qtbase-android/upstream.patched.$(TARGET_ARCH_ABI)
endif
OSMAND_PROTOBUF := $(LOCAL_PATH)/externals/protobuf/upstream.patched
OSMAND_SKIA_ROOT := $(LOCAL_PATH)/externals/skia
OSMAND_SKIA := $(LOCAL_PATH)/externals/skia/upstream.patched
OSMAND_EXPAT := $(LOCAL_PATH)/externals/expat/upstream.patched
OSMAND_CORE_RELATIVE := .
OSMAND_CORE := $(LOCAL_PATH)/$(OSMAND_CORE_RELATIVE)

LOCAL_C_INCLUDES := \
    $(QT)/include \
    $(QT)/include/QtCore \
    $(LOCAL_PATH)/src \
    $(OSMAND_PROTOBUF)/src \
    $(OSMAND_SKIA_ROOT) \
    $(OSMAND_SKIA) \
    $(OSMAND_EXPAT)/lib \
    $(OSMAND_SKIA)/include/core \
    $(OSMAND_SKIA)/include/config \
    $(OSMAND_SKIA)/include/effects \
    $(OSMAND_SKIA)/include/images \
    $(OSMAND_SKIA)/include/ports \
    $(OSMAND_SKIA)/include/utils \
    $(OSMAND_SKIA)/include/utils/android \
    $(OSMAND_SKIA)/src/core \
    $(OSMAND_CORE)/include \
    $(OSMAND_CORE)/src \
    $(OSMAND_CORE)/protos \
    $(OSMAND_CORE)/native/include \
    $(OSMAND_CORE)/native/src

LOCAL_CPP_EXTENSION := .cc .cpp
SRC_FILES := $(wildcard $(OSMAND_CORE)/src/*.c*)
LOCAL_SRC_FILES := \
    $(SRC_FILES:$(LOCAL_PATH)/%=%) \
    $(OSMAND_CORE_RELATIVE)/native/src/ElapsedTimer.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/common.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/mapObjects.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/multipolygons.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/renderRules.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/rendering.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/binaryRead.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/binaryRoutePlanner.cpp \
    $(OSMAND_CORE_RELATIVE)/native/src/proto/osmand_index.pb.cc \
    $(OSMAND_CORE_RELATIVE)/native/src/java_wrap.cpp

ifdef OSMAND_PROFILE_NATIVE_OPERATIONS
    LOCAL_CFLAGS += \
        -DOSMAND_NATIVE_PROFILING
endif

# Name of the local module
ifneq ($(OSMAND_BUILDING_NEON_LIBRARY),true)
    LOCAL_MODULE := OsmAndCore
else
    LOCAL_MODULE := OsmAndCore_neon
    LOCAL_ARM_NEON := true
endif

LOCAL_CFLAGS := \
    -DGOOGLE_PROTOBUF_NO_RTTI \
    -DSK_BUILD_FOR_ANDROID \
    -DSK_BUILD_FOR_ANDROID_NDK \
    -DSK_ALLOW_STATIC_GLOBAL_INITIALIZERS=0 \
    -DSK_RELEASE \
    -DSK_CPU_LENDIAN \
    -DGR_RELEASE=1 \
    -DANDROID_BUILD \
    -fPIC

ifeq ($(LOCAL_ARM_NEON),true)
    OSMAND_BINARY_SUFFIX := _neon
else
    OSMAND_BINARY_SUFFIX :=
endif

LOCAL_STATIC_LIBRARIES := \
    osmand_protobuf$(OSMAND_BINARY_SUFFIX) \
    osmand_jpeg$(OSMAND_BINARY_SUFFIX) \
    osmand_ft2$(OSMAND_BINARY_SUFFIX) \
    osmand_png$(OSMAND_BINARY_SUFFIX) \
    osmand_gif$(OSMAND_BINARY_SUFFIX) \
    osmand_expat$(OSMAND_BINARY_SUFFIX)
LOCAL_WHOLE_STATIC_LIBRARIES := osmand_skia$(OSMAND_BINARY_SUFFIX)
LOCAL_SHARED_LIBRARIES := \
    Qt5Core$(OSMAND_BINARY_SUFFIX)

LOCAL_LDLIBS := -lz -llog -ldl

include $(BUILD_SHARED_LIBRARY) 
```

有谁知道出了什么问题？

# android - android如何设置以编程方式准备的arrayAdapter布局

> ID：15518662
> 
> 赞同：1
> 
> 时间：2013-03-20T08:33:40.677
> 
> 标签：android, android-layout, android-arrayadapter

我正在尝试将自定义列表视图与 arrayadapter 一起使用。我有这个适配器的布局。但我想以编程方式创建这个适配器的布局。Arrayadapter 将此布局的 id 传递给它的超级。它不接受布局。如何传递布局对象而不是 resourceId？

超级（上下文，LayoutResourceId，ArrayList）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:57:15.650

对于 ArrayAdapter，您可能不需要扩展它，只需实例化它并使用它...使用此构造函数：http: [//developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.上下文，整数，整数）](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)

```
new ArrayAdapter(context, layoutResourceId,arrayList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:10:51.760

不，它不可能。因为 ArrayAdapter 没有默认构造函数。您还需要指定视图的结构以及它应该在其上绘制视图的原因，这就是 arrayadapter 将布局 ID 和上下文作为其参数之一的原因

```
 ArrayAdapter(Context context, int textViewResourceId) is the constructor of ArrayAdapter with least parameter. 
```

# android - 使用 android 和 redmine restapi 记录时间

> ID：15518668
> 
> 赞同：0
> 
> 时间：2013-03-20T08:34:25.987
> 
> 标签：android, json, redmine

我正在开发一个可以使用 redmine 记录时间的应用程序。现在我可以收到项目，但我不知道记录时间。

redmine 有一个restapi，但我没有找到任何答案......：

[http://www.redmine.org/projects/redmine/wiki/Rest_api](http://www.redmine.org/projects/redmine/wiki/Rest_api)

问候，凯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T21:01:39.600

您可以遵循[redmine-java-api 的](https://github.com/taskadapter/redmine-java-api)功能。不幸的是 redmine-java-api 在 android 上不能开箱即用，但可以对其进行修改。[在这里](https://stackoverflow.com/a/16780268/1427295)查看我的答案。

或者按照[this](https://stackoverflow.com/a/3506039/1427295) answer关于如何发出HTTP请求并通过以下方式发出请求：

```
new RequestTask().execute("http://demo.redmine.org/time_entries.json"); 
```

然后，要发出 POST 请求，请遵循[本](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)指南

# sql - 将新行从 SQL 推送到 vb.net

> ID：15518669
> 
> 赞同：1
> 
> 时间：2013-03-20T08:34:38.753
> 
> 标签：sql, vb.net

我想尽可能接近实时地获取插入到表中的数据。

为简单起见，假设我有一张名为

```
"DataInput" 
```

随着列：

```
ID, Name, Time 
```

将行插入数据库后，使用 VB.NET 获取行的最简单方法是什么？

每秒轮询一个新记录似乎很笨拙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:39:01.860

**对于 Sql Server** - 您可以使用**[查询通知](http://msdn.microsoft.com/en-us/library/ms130764%28v=sql.100%29.aspx)**

SQL Server 2005 引入了查询通知，这是一种新功能，允许应用程序在查询结果发生变化时向 SQL Server 请求通知。查询通知允许程序员设计仅在应用程序先前检索的信息发生更改时才查询数据库的应用程序。

参考：

[使用查询通知](http://msdn.microsoft.com/en-in/library/ms175110%28v=sql.100%29.aspx)

[使用查询通知](http://msdn.microsoft.com/en-us/library/ms130764%28v=sql.100%29.aspx)

另外，对于 .Net 看看：

**[SqlCacheDependency 类](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency%28v=vs.100%29.aspx)**：在所有受支持的 SQL Server 版本（Microsoft SQL Server 7.0、Microsoft SQL Server 2000 和 SQL Server 2005）上，SqlCacheDependency 类监视特定的 SQL Server 数据库表。当表发生变化时，与表关联的项目会从缓存中删除，新版本的项目会添加到缓存中。

参考：

[使用和监视 SQL 2005 查询通知](https://www.simple-talk.com/sql/t-sql-programming/using-and-monitoring-sql-2005-query-notification/)

# c# - C#中的Mysql查询

> ID：15518677
> 
> 赞同：1
> 
> 时间：2013-03-20T08:35:16.597
> 
> 标签：c#, mysql, database, c#-4.0

我要编写一个程序来查找段落的分数。数据库文件有一个单词分数。
**数据库文件**

```
 Word                       Pos_Score            

    intelligent               .987              
    allows                    .378               
    agree                     .546              
    industries                .289               
    guests                    .874 
```

使用 SELECT 查询和 WHERE 类，我将段落单词与数据库文件进行了比较。
**段落：**

```
I agree with you.  It seems an intelligent tourist industry allows its guests to either immerse fully, in part, or not, depending upon the guest. 
```

上面的段落有一些与数据库文件单词匹配的单词，因此将提取该单词的分数。
**程序输出**应该是这样的

```
Pos_score= .987+.378+.546+.289+.874=3.074 
```

**代码**

```
private void button1_Click(object sender, EventArgs e)
        {
            string MyConString = "server=localhost;" +"database=sentiwornet;" + "password=zia;" +"User Id=root;";
            StreamReader reader = new StreamReader("D:\\input.txt");
            float amd=0;
            string line;
            float pos1 = 0;
            while ((line = reader.ReadLine()) != null)
            {
                string[] parts = line.Split(' ');
                MySqlConnection connection = new MySqlConnection(MyConString);
                MySqlCommand command = connection.CreateCommand();
                MySqlDataReader Reader;

                foreach (string part in parts)
                {

                    command.CommandText = "SELECT Pos_Score FROM score WHERE Word = part";
                    try
                    {
                        amd = (float)command.ExecuteScalar();
                        pos1 = amd + pos1;
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message);
                    }
                    Reader = command.ExecuteReader();
                    connection.Open();
                }
            }
            MessageBox.Show("The Positive score of Sentence is="+pos1.ToString());
            reader.Close();
        } 
```

但这段代码不起作用，它给出了以下错误。

**错误 1**
​​对象引用未设置为对象的实例

**错误 2**
连接必须有效且打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:42:55.660

我认为这一定是第一个问题...

```
private void button1_Click(object sender, EventArgs e)
    {
        string MyConString = "server=localhost;" +"database=sentiwornet;" + "password=zia;" +"User Id=root;";
        StreamReader reader = new StreamReader("D:\\input.txt");
        float amd=0;
        string line;
    MySqlConnection connection = new MySqlConnection(MyConString);
    connection.Open();
        MySqlCommand command = connection.CreateCommand();
        MySqlDataReader Reader;
        float pos1 = 0;
        while ((line = reader.ReadLine()) != null)
        {
            string[] parts = line.Split(' ');

            foreach (string part in parts)
            {

                command.CommandText = "SELECT Pos_Score FROM score WHERE Word = @part";
                command.Parameters.Add("@part",MySqlDBtype.Varchar).Value = part;
                try
                {
                    amd = (float)command.ExecuteScalar();
                    pos1 = amd + pos1;
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
                Reader = command.ExecuteReader();

            }
        }
        MessageBox.Show("The Positive score of Sentence is="+pos1.ToString());
        reader.Close();
        connection.Close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:51:54.993

```
command.CommandText = "SELECT Pos_Score FROM score WHERE Word = " + part; 
```

# java - java - Jnlp 无法解析启动文件。第 0 行出错

> ID：15518679
> 
> 赞同：0
> 
> 时间：2013-03-20T08:35:21.970
> 
> 标签：java, jnlp, java-web-start

JNLP 无法启动并给出错误“无法解析启动文件。第 0 行出错”。

这是文件

```
<?xml version="1.0" encoding="utf-8"?> 
<jnlp spec="1.0+" codebase="http://192.168.102.95:8080/aasweb/" href="PdaSynch.jsp">
    <information>
        <title>Pda Synch</title>
        <vendor>Amplex</vendor>
        <homepage href="http://192.168.102.95:8080/" />
        <description>Pda Synch</description>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se version="1.6+" />
        <jar href="PdaSynch.jar" />
    </resources>

    <application-desc main-class="com.amplex.pda.ProcessPDAFiles" name="pdaSynch">
        <argument>user12</argument>
    </application-desc>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:37:27.023

我解决了，我从 jnlp 标记中删除了 href="PdaSynch.jsp" 属性

# vba - 为许多word文档添加页眉和页脚？

> ID：15518682
> 
> 赞同：1
> 
> 时间：2013-03-20T08:35:29.537
> 
> 标签：vba, header, ms-word, footer

我有大约 100 个需要更改页眉和页脚的文档。

有没有可能我可以通过在 word 文件中编写 vba 代码或宏来做到这一点？

是否可以在宏中提供一个特定文件夹，该文件夹将为该页脚中的所有文档添加页眉和页脚？

下面的代码给了我

> 错误 5111

```
Private Sub Submit_Click()

        Call openAllfilesInALocation

End Sub

Sub openAllfilesInALocation()
Dim i As Integer
With Application.FileSearch
.NewSearch
.LookIn = "C:\MyFolder\MySubFolder"
.SearchSubFolders = False
.FileName = "*.xls"
.Execute
For i = 1 To .FoundFiles.Count
'Open each workbook
Set Doc = Documents.Open(FileName:=.FoundFiles(i))
'Perform the operation on the open workbook
'wb.Worksheets("sheet1").Range("A1") = Date
'Save and close the workbook
With ActiveDocument.Sections(1)
    .Headers(wdHeaderFooterPrimary).Range.Text = "Header goes here"
    .Footers(wdHeaderFooterPrimary).Range.Text = "Footer goes here"
End With

Doc.Save
Doc.Close
'On to the next workbook
Next i
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:02:22.393

在您提供的代码中，您尝试使用旧`.FileSearch`属性。它曾经工作到 MS Office 2003，但现在不行。这是为您改进的代码。它将打开一个标准文件窗口，您可以在其中选择一个或几个文件进行处理。

```
Sub openAllfilesInALocation()
Dim Doc
Dim i As Integer

Dim docToOpen As FileDialog
Set docToOpen = Application.FileDialog(msoFileDialogFilePicker)
    docToOpen.Show

For i = 1 To docToOpen.SelectedItems.Count
'Open each document
Set Doc = Documents.Open(FileName:=docToOpen.SelectedItems(i))

With ActiveDocument.Sections(1)
    .Headers(wdHeaderFooterPrimary).Range.Text = "Header goes here"
    .Footers(wdHeaderFooterPrimary).Range.Text = "Footer goes here"
End With

Doc.Save
Doc.Close

Next i

End Sub 
```

# javascript - 选择内容以“+”开头的所有元素

> ID：15518689
> 
> 赞同：3
> 
> 时间：2013-03-20T08:36:04.523
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T08:37:01.073

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:40:44.240

这是另一种更受 CSS 驱动的方法，您甚至可以让您的 CSS 处理添加加号。检查一个类比检查一个元素的扩展性要好得多`innerHTML`，但这只有在你有大量 + 链接时才真正重要。

[jsFiddle](http://jsfiddle.net/FPYQx/)

**HTML**

```
<a href="/" class="add">Add</a>
<a href="/" class="add">Add</a> 
```

**CSS**

```
.add:before { content:"+ "; } 
```

**jQuery**

```
var addLinks = $('.add');

// or pure JS (faster if you only desire the DOM objects)
addLinks = document.getElementsByTagName('add'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:41:45.910

在 CSS3 中有一个 :contains() 选择器也可能有用。

```
$('a:contains("+ ")')..... 
```

作为一个例子.. 不完全是你正在寻找的，但可能会变得有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:15:43.417

```
var links = document.links, l = links.length, i, plus = [];
for (i = 0; i < l;i++){
    if(/\+\w/(links[i].textContent))plus.push(links[i]);
}; 
```

编辑：

```
var links = document.links, l = links.length, i, plus = [];
for (i = 0; i < l;i++){
    if(/\+\w/.test(links[i].textContent))plus.push(links[i]);
}; 
```

# c# - 如何停止循环？

> ID：15518692
> 
> 赞同：-5
> 
> 时间：2013-03-20T08:36:17.713
> 
> 标签：c#, loops

您好，我想知道为什么循环没有停止？我能做些什么来解决它！

这是我的代码：

```
 HtmlElementCollection elements = webBrowser1.Document.GetElementsByTagName("input");

        for (int i = 0; i < 5; i++)
        {
            foreach (HtmlElement element in elements)
            {

                if (element.Name == "q") { element.SetAttribute("value", word); }

                if (element.Name == "go") { element.InvokeMember("click"); }

            }
        } 
```

注意：set-attribute 中的“word”是一个随机词。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:41:14.883

InvokeMember 可能正在重新加载页面。因此，每次循环都会返回第一个链接（永远不会到达第二个链接）

# php - 如何将具有唯一值的 2 个数组合二为一

> ID：15518694
> 
> 赞同：1
> 
> 时间：2013-03-20T08:36:22.807
> 
> 标签：php, arrays

我有两个这样的数组

```
array (
[0] => Array
    (
        [search_terms] => Big Black Gay
        [searches] => 1
    )

[1] => Array
    (
        [search_terms] => Men Seeking Men Personals
        [searches] => 1
    )
) 
```

另一个这样的数组

```
 array (
   [0] => Array
    (
        [search_terms] => Men Seeking Men Personals
        [clicks] => 1
    )
   ) 
```

如何在不使用任何循环的情况下合并两个数组？任何 php 功能都可用于此？我需要这种输出

```
Array
(
[0] => Array
    (
        [search_terms] => Big Black Gay
        [searches] => 1
        [clicks] => 0
    )

[1] => Array
    (
        [search_terms] => Men Seeking Men Personals
        [searches] => 1
        [clicks] => 1
    )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:39:53.943

看看[array_merge](http://www.php.net/manual/en/function.array-merge.php)

```
var_dump(array_merge($array_one,$array_two)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:45:09.527

你可以试试

```
$data = array(
        0 => array(
                'search_terms' => 'Big Black Gay',
                'searches' => 1
        ),
        1 => array(
                'search_terms' => 'Men Seeking Men Personals',
                'searches' => 1
        )
);

$combine = array(
        0 => Array(
                'search_terms' => 'Men Seeking Men Personals',
                'clicks' => 1
        )
);

foreach ( $data as &$item ) {
    foreach ( $combine as $new ) {
        if ($item['search_terms'] == $new['search_terms'])
            $item['clicks'] = $new['clicks'];
    }

    if (! isset($item['clicks']))
        $item['clicks'] = 0;
}

print_r($data); 
```

输出

```
Array
(
    [0] => Array
        (
            [search_terms] => Big Black Gay
            [searches] => 1
            [clicks] => 0
        )

    [1] => Array
        (
            [search_terms] => Men Seeking Men Personals
            [searches] => 1
            [clicks] => 1
        )

) 
```

# javascript - 如何使用下拉菜单打开新的动态表单[选择标签]

> ID：15518698
> 
> 赞同：0
> 
> 时间：2013-03-20T08:36:33.570
> 
> 标签：javascript, jquery, html, css, forms

我会尽量具体一点。我有一个下拉菜单[选择标签]，用户可以选择 5 个选项；即从 1 到 5 的数字。现在根据所选选项，我想显示一个新表单，其输入标签数量与所选选项相同

因此，如果用户从下拉菜单中选择 3，则底部会出现一个子表，显示三个输入标签。代码是：

```
<select id="formName9" name="blockUnits">
 <option selected="selected" value="1">1</option>
 <option value="2">2</option>
 <option value="3">3</option>
 <option value="4">4</option>
 <option value="5">5</option>
</select> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T08:43:10.367

您将使用`on change`事件侦听器：

```
$('select#formName9').on('change', function() {
    /* Remove the existing input container, if it exists. */
    $('form#container').remove();

    /* Get the selected value and create the new container. */
    var val = $(this).val()
        $container = $('<form id="container"></form>');

    /* Loop through creating input elements based on value. */
    for(i=0;i<val;i++)
    {
        /* Create the new input element. */
        var $input = $('<input type="text"/>');

        /* Append this input element to the container. */
        $input.appendTo($container);
    }

    /* Add container to the page. */
    $container.insertAfter($(this));
}) 
```

[JSFiddle 示例](http://jsfiddle.net/PvJau/1/)。

然后，您可以在此基础上扩展以添加基于初始`selected`选项的默认输入：

[扩展的 JSFiddle](http://jsfiddle.net/PvJau/2/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T09:13:27.087

我支持詹姆斯唐纳利的回答。如果您希望它是纯 java 脚本，您可以使用此替代方法。

**HTML**

```
 <select id="formName9" name="blockUnits" onchange="addInput()">
     <option selected="selected" value="1" >1</option>
     <option value="2">2</option>
     <option value="3">3</option>
     <option value="4">4</option>
     <option value="5">5</option>
    </select>
    <form>
    <div id="newAdd"> </div>.
    </form> 
```

**JAVASCRIPT**

```
function addElement() {
    var element = document.createElement("input"); //creating input
    element.setAttribute("value", "");//setting its value
    element.setAttribute("name", "newInput");//naming the input
    var foo = document.getElementById("newAdd");
    foo.appendChild(element);//appendign the value into the parant div
}
function addInput(){
    document.getElementById("newAdd").innerHTML="";//clearing the div
     var noInp=parseInt(document.getElementById("formName9").value);
        while(noInp>0)
        {
        addElement();
            noInp--;
        }           
    } 
```

这是[JSFIDDLE](http://jsfiddle.net/nWtNm/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:44:34.013

```
$('select#formName9').on('change', function() {
var ddVal=$(this).val();
for(i=0;i<ddVal.length;i++)
{
$("#FORMPOSITION").append("<input type='text' name='ddG"+i+"' id='ddVL"+i+"'>");
}
}); 
```

在执行之前考虑引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:46:02.913

我尝试过并且工作过。尝试一下：

```
 $(document).ready(function() {
            $('#formName9').change(function() {
                var number = parseInt($('#formName9').val());
                if(number == 3) {
                    alert('3 HERE');
                }
            });
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T08:53:00.323

这是一个使用 jQuery 和 CSS 的动态示例。我提供了一个[有效的 jsFiddle。](http://jsfiddle.net/HhnrG/2/)

这是基本思想，您可以解决此问题并在需要时添加更多输入。

HTML：

```
<select id="formName9" name="blockUnits">
    <option selected="selected" value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>
<div id="form1" class="hiddenForm form">Form 1</div>
<div id="form2" class="hiddenForm form">Form 2</div>
<div id="form3" class="hiddenForm form">Form 3</div>
<div id="form4" class="hiddenForm form">Form 4</div>
<div id="form5" class="hiddenForm form">Form 5</div> 
```

jQuery：

```
$("#form1").show()
$("#formName9").change(function () {
    var form = "#form" + $(this).val();
    $(form).siblings(".hiddenForm").hide()
    $(form).show();
}); 
```

CSS：

```
.form {
    padding: 10px;
    border: 1px dotted #000;
    margin: 5px;
}
.hiddenForm {
    display: none;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-20T08:40:44.347

您可以使用[Ajax](http://api.jquery.com/jQuery.ajax/)调用，并将响应添加到DOM，或者使用JS 直接添加DOM。

对于直接 DOM，somethink 像（使用 jQuery）：

```
$('#formName9').on('change', function() {
   var selected = $(this).val();
   $('#aDomElement').empty();
   for (var i=1; i<=selected; i++) {
       $('#aDomElement').append(
           $('<div id="'+i+'">').html(
                   $('<input>').attr('name', 'input'+i).attr('type', 'text')
           )
        );
   }
}); 
```

`aDomElement`现有 HTML 元素的 ID在哪里。

# iphone - iTunes Connect 未检测到应用 ID

> ID：15518702
> 
> 赞同：5
> 
> 时间：2013-03-20T08:36:42.557
> 
> 标签：iphone, ios, ipad, app-store-connect

我想向应用商店添加一个新应用，他们会问我名称和 SKU 编号，然后我必须选择您的应用 ID。

当我选择应用 ID 制作新应用时，我找不到我需要的应用 ID。我只能找到那些我从未使用过的。

有谁知道如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T09:04:02.073

等待一段时间。这是苹果服务器的问题。

我昨天遇到了同样的问题。

# php - 在邮件正文 phpmailer 类中添加嵌入图像

> ID：15518703
> 
> 赞同：3
> 
> 时间：2013-03-20T08:36:45.200
> 
> 标签：php, html, phpmailer

我试图在我的消息正文中嵌入图像，但它最终作为附件

```
 $mailer->Subject = APP_NAME . " - " . $name . " send you and Ad : " . $row['name'];
    $mailer->IsHTML(true);
    $mailer->AddEmbeddedImage('../images/namDiams.png', 'logoimg', 'namDimes.png'); 

    //footer
    $footer = "Regards<br/><br/>";
    $footer .= '<table style="width: 95%">';
    $footer .= '<tr>';
    $footer .= '<td>';
    $footer .= "<strong><span style='font-size: 15px'>NamDimes Team</span></strong><br/>
                    NamDimes<br/>
                    Contact Number: " . APP_CONTACT . "<br/>
                    Email: " . APP_EMAIL . "<br/>
                    Website: " . APP_WEBSITE . "<br/>";
    $footer .= '</td>';
    $footer .= '<td style="text-align:right">';
    $footer .= '<img src=\"cid:logoimg\" />';
    $footer .= '</td>';
    $footer .= '</tr>';
    $footer .= '</table>';

    $mailer->Body = $body . $footer;
    $mailer->AltBody="This is text only alternative body.";
    $mailer->AddAttachment('../' . $row['image_path'], $row['name'] . ".jpg"); 
```

我已经设置了其他所有内容，包括地址、邮件发送出去、我想嵌入正文中的徽标图像作为附件附加，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:00:29.707

不用`$mailer->AddEmbeddedImage`，直接加

`<img src="http://.../images/namDiams.png" />`反而。

邮件长度应该更轻......而且它有效。

**编辑**

我不知道它是否会帮助你，但这里有一个小错误：

```
$mailer->AddEmbeddedImage('../images/namDiams.png', 'logoimg', 'namDimes.png'); 
```

应该

```
$mailer->AddEmbeddedImage('../images/namDiams.png', 'logoimg', 'namDiames.png');//the last param the second 'a' was missing... 
```

[这里的](https://stackoverflow.com/questions/1851728/how-to-embed-images-in-html-email)另一个话题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T06:20:09.887

我可以确认 user2189925 的回答确实有效。但是，我使用绝对路径，因为调用脚本的位置比图像的位置更容易发生变化。
例如

```
<img src="C:\folder\images\namDiames.png" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-01T01:59:05.073

遇到同样的问题，然后我决定更换以下

```
<img src="img/example.jpg" 
```

和

```
<img src= "https://mysitename.com/img/example.jpg"> 
```

它奏效了。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-20T09:18:53.573

只需将您的图像路径提供给邮件正文，例如：(img src="../images/cat.jpeg) 它肯定会起作用

# ruby-on-rails - Rails - 将外键分配给以相同形式创建的关联记录

> ID：15518705
> 
> 赞同：0
> 
> 时间：2013-03-20T08:36:50.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

当在同一个创建操作中创建对象和对象时，是否可以在 Rails3.2中为表`foo_id`中的记录分配外键？`Bar``Foo``Bar`

例如

```
@whatever = Whatever.new
@whatever.build_foo
@whatever.build_bar 
```

是否可以在运行创建操作后进行`after_create`回调以更新`foo_id`属性？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:06:42.350

`Bar`如果和之间的关联`Foo`已正确设置，则以下情况是可能的。

```
@whatever = Whatever.new
@whatever.build_foo
@whatever.build_bar
@whatever.bar.foo = @whatever.foo
@whatever.save 
```

# ckeditor - CKEDITOR 内联编辑器工具栏上的文本选择

> ID：15518709
> 
> 赞同：2
> 
> 时间：2013-03-20T08:37:02.743
> 
> 标签：ckeditor, inline, onselect

CKEditor 4 可以在“内联编辑器”模式下使用，只要相关文本区域获得焦点，它就会显示一个工具栏。我需要隐藏工具栏，只在用户选择一些文本时才显示它，我该怎么做？

我也想知道如何重新定位工具栏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:00:18.747

你可以尝试这样的事情：

```
$('#showEditor').mouseup(function () {
    if(getSelectedText()){
    //show inline editor instance

CKEDITOR.disableAutoInline = true;
var editor = CKEDITOR.inline( document.getElementById( 'showEditor' ) );

    }
});

function getSelectedText() {
    var t = '';
    if (window.getSelection) {
        t = window.getSelection();
    } else if (document.getSelection) {
        t = document.getSelection();
    } else if (document.selection) {
        t = document.selection.createRange().text;
    }
    return t;
} 
```

# html - 如何使用dust js partials

> ID：15518723
> 
> 赞同：0
> 
> 时间：2013-03-20T08:38:24.867
> 
> 标签：html, dust.js

以这种方式使用了部分，但我得到的输出是未定义的。创建了两个模板文件 parent 和 child 继承自 parent。

父.tl：

```
 <div><span><label>{+title}New{/title}</label></div> 
```

孩子.tl：

```
 {>"parent"/}
            {<title}
        {#t}
            <p>NEW {title1} For the Child</p>
        {/t}    
        {/title} 
```

我使用dustr 编译了这些模板，并将其作为.js 包含在我的HTML 中。

```
 <script src="https://raw.github.com/akdubya/dustjs/master/dist/dust-full-0.3.0.min.js"></script>
            <script src="parent.js"></script>
            <script src="child_template.js"></script>
            <div id="new"></div>
            <script>
            var r=document.getElementById("new");
            dust.render("demo", {t:{"title1":"Ram"}}, function(err, out) {
            r.innerHTML=out; 
            });
            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:07:52.083

这取决于部分在编译时的名称。您的子模板是否已命名`demo`（或可能`child`或`child_template`或`child_template.tl`？您的父模板是否已命名`parent`或可能`parent.tl`？

要调试，您可以打印`err`到控制台：

```
dust.render("demo", {t:{"title1":"Ram"}}, function(err, out) {
  console.log(err);
  r.innerHTML = out;
}); 
```

# html - 加载更少的文件

> ID：15518730
> 
> 赞同：2
> 
> 时间：2013-03-20T08:38:42.620
> 
> 标签：html, less

我开始学习较少的 CSS。有没有可能导入不同的less文件

基于视口元标记。我想为不同的分辨率编写自己的更少文件。

我也想知道“视口元标记是如何工作的？”

我想从元标记中知道

如何将设备宽度设置为元标记和相应媒体的“宽度”属性

查询被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T19:33:46.073

AFAIK 你不能用视口元标记来做到这一点。您可以为此使用媒体查询：[https ://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries)

在编译 Less 客户端站点时（参见： http: [//lesscss.org/#usage](http://lesscss.org/#usage)），您可以这样做：

```
<html>
<head>
    <link rel="stylesheet" media="(max-width: 767px)" href="green.less" />
    <link rel="stylesheet" media="(min-width: 768px)" href="red.less" />
    <script src="less.js" type="text/javascript"></script>
</head> 
<body>
<p>color this text</p>
</body>
</html> 
```

有：green.less:`p{color:green;}`和 red.less:`p{color:red;}`和

另请阅读[http://andydavies.me/blog/2012/12/29/think-twice-before-using-matchmedia-to-conditionally-load-stylesheets/](http://andydavies.me/blog/2012/12/29/think-twice-before-using-matchmedia-to-conditionally-load-stylesheets/)

在大多数情况下，您不会将客户端编译用于生产。甚至预处理器也应该只在开发过程中使用。在生产环境中，应该使用真正生成的 CSS 代码。当通过 npm 在服务器上安装 LESS 时，也会安装一个用于服务器端编译的编译器。

您可以在较少的文件中使用它们，而不是使用媒体查询来加载不同的资源。对于上面的示例，您的 less 代码应如下所示：

```
p{color:green;}
@media(min-width: 768px)
{
    p{color:red;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-10T10:38:45.580

通过向元素添加媒体查询，`<link>`它不会阻止浏览器下载该 css 文件。

将下载带有媒体查询的 css 文件，但它可能不是关键资源，也可能不会呈现阻塞。

`Finally, note that "render blocking" only refers to whether the browser has to hold the initial rendering of the page on that resource. In either case, the browser still downloads the CSS asset, albeit with a lower priority for non-blocking resources.`

更多细节[https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-blocking-css](https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-blocking-css)

# java - 理解 CaseInsensitiveComparator 中的逻辑

> ID：15518731
> 
> 赞同：29
> 
> 时间：2013-03-20T08:38:50.410
> 
> 标签：java, string, jdk1.6

谁能解释下面的代码`String.java`，特别是为什么有三个`if`语句（我已经标记`//1`了`//2`和`//3`）？

```
private static class CaseInsensitiveComparator
                     implements Comparator<String>, java.io.Serializable {
// use serialVersionUID from JDK 1.2.2 for interoperability
private static final long serialVersionUID = 8575799808933029326L;

    public int compare(String s1, String s2) {
        int n1=s1.length(), n2=s2.length();
        for (int i1=0, i2=0; i1<n1 && i2<n2; i1++, i2++) {
            char c1 = s1.charAt(i1);
            char c2 = s2.charAt(i2);
            if (c1 != c2) {/////////////////////////1
                c1 = Character.toUpperCase(c1);
                c2 = Character.toUpperCase(c2);
                if (c1 != c2) {/////////////////////////2
                    c1 = Character.toLowerCase(c1);
                    c2 = Character.toLowerCase(c2);
                    if (c1 != c2) {/////////////////////////3
                        return c1 - c2;
                    }
                }
            }
        }
        return n1 - n2;
    }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-20T08:47:24.020

来自[Unicode 技术标准](http://www.unicode.org/reports/tr18/#Simple_Loose_Matches)：

> 另外，由于自然语言的变幻莫测，也会出现两个不同的Unicode字符大小写相同的情况

因此，仅比较两个字符的大写是不够的，因为它们可能有不同的大写和相同的小写

简单的蛮力检查给出了一些结果。检查例如代码点 73 和 304：

```
char ch1 = (char) 73; //LATIN CAPITAL LETTER I
char ch2 = (char) 304; //LATIN CAPITAL LETTER I WITH DOT ABOVE
System.out.println(ch1==ch2);
System.out.println(Character.toUpperCase(ch1)==Character.toUpperCase(ch2));
System.out.println(Character.toLowerCase(ch1)==Character.toLowerCase(ch2)); 
```

输出：

```
false
false
true 
```

所以“İ”和“I”不相等。两个字符都是大写的。但是它们共享相同的小写字母：“i”，这使得在不区分大小写的比较中将它们视为相同的值。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-20T08:46:34.483

通常，我们希望转换一次案例并进行比较并完成它。但是，代码将大小写转换了两次，原因在注释中说明了另一种方法[`public boolean regionMatches(boolean ignoreCase, int toffset, String other, int ooffset, int len)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.regionMatches%28boolean%2Cint%2Cjava.lang.String%2Cint%2Cint%29)：

> 不幸的是，转换为大写字母不适用于格鲁吉亚字母，它有关于大小写转换的奇怪规则。所以我们需要在退出前做最后一次检查。

* * *

### 附录

的代码与中的代码`regionMatches`有一些不同`CaseInsenstiveComparator`，但本质上是相同的。为了交叉检查，下面引用了该方法的完整代码：

```
public boolean regionMatches(boolean ignoreCase, int toffset,
                       String other, int ooffset, int len) {
    char ta[] = value;
    int to = offset + toffset;
    char pa[] = other.value;
    int po = other.offset + ooffset;
    // Note: toffset, ooffset, or len might be near -1>>>1.
    if ((ooffset < 0) || (toffset < 0) || (toffset > (long)count - len) ||
            (ooffset > (long)other.count - len)) {
        return false;
    }
    while (len-- > 0) {
        char c1 = ta[to++];
        char c2 = pa[po++];
        if (c1 == c2) {
            continue;
        }
        if (ignoreCase) {
            // If characters don't match but case may be ignored,
            // try converting both characters to uppercase.
            // If the results match, then the comparison scan should
            // continue.
            char u1 = Character.toUpperCase(c1);
            char u2 = Character.toUpperCase(c2);
            if (u1 == u2) {
                continue;
            }
            // Unfortunately, conversion to uppercase does not work properly
            // for the Georgian alphabet, which has strange rules about case
            // conversion.  So we need to make one last check before
            // exiting.
            if (Character.toLowerCase(u1) == Character.toLowerCase(u2)) {
                continue;
            }
        }
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-08-26T19:21:20.163

在另一个答案中，默认语言环境已经给出了一个示例，说明为什么仅比较大写是不够的，即 ASCII 字母“I”和带有点“İ”的大写 I。

现在您可能想知道**，如果它捕获的大小写多于大写，为什么他们不只比较小写而不是大小写？**答案是，它不会捕获*更多的*案例，它只是找到*不同的*案例。

取字母“ı”（`(char)305`小点 i）和 ascii“i”。它们不同，它们的小写不同，但它们共享相同的大写字母“I”。

最后，将大写 I 与点 "İ" 与小的无点 i "ı" 进行比较。它们的大写字母（“İ”与“I”）和它们的小写字母（“i”与“ı”）都不匹配，但它们的大写字母的小写字母相同（“I”）。如果出现这种现象，我发现了另一种情况，即希腊字母“ϴ”和“ϑ”（字符 1012 和 977）。

所以真正的不区分大小写的比较甚至不能检查*原始字符*的大小写，而必须检查大写的小写。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-20T08:43:38.387

考虑以下字符：`f`和`F`。初始`if`语句将返回`false`，因为它们不匹配。但是，如果将两个字符都大写，则会得到`F`和`F`。然后他们会匹配。`c`比如说，和，情况并非如此`G`。

该代码是有效的。如果两个字符已经匹配，则无需大写（因此是第一个`if`语句）。但是，如果它们不匹配，我们需要检查它们是否仅在大小写上有所不同（因此是第二`if`条语句）。

最后的`if`语句用于某些字母表（例如格鲁吉亚语），其中大写是一件复杂的事情。老实说，我不太了解它是如何工作的（相信甲骨文就是这样做的！）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T08:46:47.337

在上述不区分大小写比较的情况下，假设**s1="Apple" 和 s2="apple"** 在这种情况下 'A'!='a' 因为两个字符的 ascii 值不同，所以它将两个字符都更改为大写然后再次比较，然后循环继续获得 n1-n2=0 的最终值，因此字符串变得相同。假设字符完全不相等，第二次检查

```
if (c1 != c2) {
return c1 - c2;
} 
```

返回两个字符的 ascii 值之差。

# php - While循环将值插入数据库？

> ID：15518735
> 
> 赞同：0
> 
> 时间：2013-03-20T08:39:04.313
> 
> 标签：php, mysql, database, while-loop

我目前有一个表单，我可以在其中订阅和取消订阅时事通讯的用户，如下所示：

![在此处输入图像描述](../Images/78f2b28b2fc8b81022b71bb2a8681d2f.png)

底部（订阅部分）的代码是这样的：

```
 <?php 
$i = 0;  
while($objResult1 = mysql_fetch_array($objQuery1))  
 {  
$i++;  
?>  
<tr>  
   <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid" value="<?=$objResult1["ID"];?>"> </div></td>
   <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub" value="10"> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub" value="90"> </div></td>
</tr>  
<?php  
 }  
?> 
```

将值插入数据库的代码是这样的：

```
<?php
mysql_connect('localhost','root','root');
mysql_select_db('NAW') or die (mysql_error());

$Klant_ID = $_POST['klantid'];
$Mail_ID  = $_POST['mailid'];
$Status   = $_POST['sub'];
$Datum    = date("d-m-Y");

$sql = mysql_query(
    "INSERT INTO Subscriptions (
        Klant_ID,
        Mail_ID,
        Status,
        Datum
    ) VALUES (
        '".$Klant_ID."',
        '".$Mail_ID."',
        '".$Status."',
        '".$Datum."'
    )"
);

if ($sql === false) {
    die (mysql_error());
} else {
    echo 'Je gegevens zijn succesvol in de database geplaatst.<br><br>Om de gegevens uit de database te bekijken klik <A HREF="klanten.php">hier</A>. <br>Om meer gegevens in te voeren klik <A HREF="index.html">hier</A>.';
}
?> 
```

数据库是：

```
ID   Klant_ID  Mail_ID  Status Datum 
1     6        1               test
2     6        1        test   test
3     10       10       10     19-03-13
16    6        4        90     20-03-2013
17    6        4        10     20-03-2013
18    7        4        90     20-03-2013 
```

现在它只会在我选中复选框的数据库中添加 1 行。我想让它工作，因此它将向数据库添加 3 行，例如：当我选择这样的框时： ![在此处输入图像描述](../Images/0e7bbbdd08112f2056a5ec432671adf2.png)

我希望将这些行添加到数据库中：

```
ID  Klant_ID  Mail_ID  Status  Datum
20  6         1        10      20-03-2013
21  6         2        90      20-03-2013
22  6         4        10      20-03-2013 
```

所以我的问题是这是否可以使用带有 mysql_fetch_array 的 while 循环？我不是 php 专业人士，因为我仍然是学生，我无法自己解决这个问题。我希望我的问题足够清楚，但是如果您有任何问题，请在评论中提问^^如果有人可以告诉我它是如何完成的或将我推向正确的方向，那就太好了！

（我知道我不应该再使用 mysql_* 但这不是重点^^）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:44:50.740

您可以遍历 $_POST['sub'] 并在该循环中插入。

首先，你必须使 sub 一个数组，所以替换`name="sub"`为`name="sub[]"`

现在您可以轻松地循环检查检查的值。

```
foreach($_POST['sub'] as $subscription){
    mysql_query("INSERT INTO Subscriptions (Klant_ID, Mail_ID, Status, Datum) VALUES   ('".$Klant_ID."', '".$Mail_ID."', '".$subscription."', '".$Datum."')") or die (mysql_error());
} 
```

我建议您不要使用 mysql_ 函数，因为它们已被弃用。改用 MySQLi 或 PDO（我最喜欢的）。:)

使用 PDO，您可以在循环之前准备查询，然后在循环内执行它。这样，PHP 只需准备一次查询。

```
$insert = $db->prepare("INSERT INTO Subscriptions (Klant_ID, Mail_ID, Status, Datum) VALUES   (?, ?, ?, ?)")
foreach($_POST['sub'] as $subscription){
    $db->execute(array($Klant_ID, $Mail_ID, $subscription, $Datum));
} 
```

这样，您的脚本也将是注入安全的，就像您当前的查询一样，它很容易被注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:49:41.393

改变：

```
<input type="checkbox" name="sub" value="10">
<input type="hidden" name="mailid" value="<?=$objResult1["ID"];?>"> 
```

到：

```
<input type="checkbox" name="sub[]" value="10">
<input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> 
```

并在 php 中执行：

```
$sql = mysql_query("INSERT INTO Subscriptions (Klant_ID, Mail_ID, Status, Datum) VALUES   ('".$Klant_ID."', '".$Mail_ID."', '".$Status."', '".$Datum."')") or die (mysql_error()); 
```

到：

```
foreach($_POST['sub'] as $i=>$s){
    $sql = mysql_query("INSERT INTO Subscriptions (Klant_ID, Mail_ID, Status, Datum) VALUES   ('".$Klant_ID."', '".$_POST['mailid'][$i]."', '".$s."', '".$Datum."')") or die(mysql_error());
} 
```

**注意**：这是**没有**注入和其他检查的解决方案，创建只是为了向您展示思考的方向。

# sql-server - SQL Server HierarchyId：移动子树问题

> ID：15518737
> 
> 赞同：0
> 
> 时间：2013-03-20T08:39:15.443
> 
> 标签：sql-server, debugging, stored-procedures

我创建了一个存储过程，如下所示：

```
CREATE PROCEDURE [SPNAME] 
    @UserCode INT, 
    @ReportsTo INT
AS
BEGIN
    SET NOCOUNT ON;
    DECLARE @HierarchyId HIERARCHYID
    DECLARE @NewParentHierarchyId HIERARCHYID
    DECLARE @OldParentHierarchyId HIERARCHYID
    SELECT  @HierarchyId = [Hierarchy]
    FROM    [aspnet_Users]
    WHERE   [UserCode] = @UserCode
    SELECT  @OldParentHierarchyId = [Hierarchy].GetAncestor(1)
    FROM    [aspnet_Users]
    WHERE   [UserCode] = @UserCode
    PRINT N'Old Root: ' + @OldParentHierarchyId.ToString()
    SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
    BEGIN TRANSACTION
        SELECT  @NewParentHierarchyId = [Hierarchy]
        FROM    [aspnet_Users]
        WHERE   [UserCode] = @ReportsTo
        PRINT N'New Root: ' + @NewParentHierarchyId.ToString()
        PRINT N'Old HierarchyId: ' + @HierarchyId.ToString()
        SELECT  @HierarchyId = @NewParentHierarchyId.GetDescendant(MAX([Hierarchy]), NULL)
        FROM    [aspnet_Users]
        WHERE   [Hierarchy].GetAncestor(1) = @NewParentHierarchyId
        PRINT N'New HierarchyId: ' + @HierarchyId.ToString()
        UPDATE  [aspnet_Users]
        SET     [Hierarchy] = @HierarchyId.GetReparentedValue(@OldParentHierarchyId, @NewParentHierarchyId)
        WHERE   [Hierarchy].IsDescendantOf(@OldParentHierarchyId) = 1
    COMMIT TRANSACTION
END 
```

我的分层数据如下：

```
 imirza10 (UserCode 1)
  -adil    (UserCode 3)
  --arif   (UserCode 5)
  ---saqib (UserCode 6)
  -farhan  (UserCode 4) 
```

上述存储过程旨在将 arif 从 adil 移动到 farhan。

当我使用以下语句执行 sp 时：

```
[aspnet_Users_ChangeHierarchy] 5, 4 
```

它在 SSMS 的消息选项卡上为我提供了以下信息：

```
Old Root: /1/1/
New Root: /1/2/
Old HierarchyId: /1/1/1/
New HierarchyId: /1/2/1/ 
```

> *消息 6522，级别 16，状态 2，过程 aspnet_Users_ChangeHierarchy，第 48行在
> 执行用户定义的例程或聚合“hierarchyid”期间发生 .NET Framework 错误：
> Microsoft.SqlServer.Types.HierarchyIdException：24009：SqlHierarchyId.GetReparentedValue 失败，因为 'oldRoot ' 不是 'this' 的祖先节点。'oldRoot' 是 '/1/1/'，而 'this' 是 '/1/2/1/'。
> Microsoft.SqlServer.Types.HierarchyIdException：
> 在 Microsoft.SqlServer.Types.SqlHierarchyId.GetReparentedValue（SqlHierarchyId oldRoot，SqlHierarchyId newRoot）*

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T17:42:28.013

没有任何进一步的测试，我在您的查询中看到以下问题：

1.  错误消息告诉您的是，您无法`@HierarchyId`从`@OldParentHierarchyId`to复制，`@NewParentHierarchyId`因为`@HierarchyId`它不是`@OldParentHierarchyId`（您已将其计算为新路径）的祖先。
2.  您用于`@HierarchyId.GetReparentedValue`计算新位置而不是实际值。这将为所有行提供相同的结果。
3.  您需要`@OldParentHierarchyId`从更新中排除。

UPDATE 查询应如下所示：

```
UPDATE [aspnet_Users]
SET    [Hierarchy] = [Hierarchy].GetReparentedValue(@OldParentHierarchyId, @NewParentHierarchyId)
WHERE  [Hierarchy].IsDescendantOf(@OldParentHierarchyId) = 1 AND [Hierarchy] <> @OldParentHierarchyId 
```

PS：我知道我在这个问题上迟到了，但无论如何它可能会对某人有所帮助。

# asp.net-mvc-3 - 在 mvc 3 中使用 ajax 上传视频文件

> ID：15518738
> 
> 赞同：0
> 
> 时间：2013-03-20T08:39:19.377
> 
> 标签：asp.net-mvc-3, video, upload

如何在我的项目中上传任何视频格式。和上传图片一样吗？，因为我可以上传图片但我不能上传任何视频。有小费吗？谢谢你。

我更新了我的问题，正如我所说我可以使用下面的代码上传图片，我的问题是如何同时上传视频和一些其他数据。

```
@model BookingCMS.Models.Booking

@{
    ViewBag.Title = "Index";
    //Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.fileupload.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/jquery.fileupload-ui.css")" rel="stylesheet" type="text/css" />
<br />
<br />

<fieldset>
    <legend>
        <h2>
            Add Movie</h2>
    </legend>
    <br />
    <table id="table-2">
        <tbody>
            <tr>
                <td>
                    Movie Name
                </td>
                <td>@Html.TextBoxFor(model => model.MovieName, new { @class = "editor-field" })
                </td>
            </tr>
            <tr>
                <td>
                    Status
                </td>
                <td>@Html.CheckBoxFor(model => model.Status)
                </td>
            </tr>
            <tr>
                <td>
                    Showing Type
                </td>
                <td>@Html.DropDownList("ShowingTypes", ViewBag.ShowingType as IEnumerable<SelectListItem>, "Select Type")
                </td>
            </tr>
            <tr>
                <td>
                    Movie Codes
                </td>
                <td>
                    <input class="checkbox" type="checkbox" id="SC" />
                    <label class="label">
                        Standard Cinema</label>
                    &nbsp;@Html.TextBoxFor(model => model.StandardCinema, new { @class = "textbox" })
                    <br />
                    <input class="checkbox" type="checkbox" id="I2D" />
                    <label class="label">
                        IMAX2D</label>
                    &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @Html.TextBoxFor(model => model.Imax2D, new { @class = "textbox" })
                    <br />
                    <input class="checkbox" type="checkbox" id="I3D" />
                    <label class="label">
                        IMAX 3D</label>
                    &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; @Html.TextBoxFor(model => model.Imax3D, new { @class = "textbox" })
                    <br />
                    <input class="checkbox" type="checkbox" id="DC" />
                    <label class="label">
                        Directors Club</label>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Html.TextBoxFor(model => model.DirectorsClub, new { @class = "textbox" })
                    <br />
                    <input class="checkbox" type="checkbox" id="DT2D" />
                    <label class="label">
                        Digital Theatre 2D</label>
                    @Html.TextBoxFor(model => model.DigitalTheatre2D, new { @class = "textbox" })
                    <br />
                    <input class="checkbox" type="checkbox" id="DT3D" />
                    <label class="label">
                        Digital Theatre 3D</label>
                    @Html.TextBoxFor(model => model.DigitalTheatre3D, new { @class = "textbox" })
                </td>
            </tr>
            <tr>
                <td>
                    Cast
                </td>
                <td>@Html.TextBoxFor(model => model.Cast, new { @class = "editor-field" })
                </td>
            </tr>
            <tr>
                <td>
                    Rating
                </td>
                <td>@Html.TextBoxFor(model => model.Rating, new { @class = "editor-field" })
                </td>
            </tr>
            <tr>
                <td>
                    Genre
                </td>
                <td>@Html.TextBoxFor(model => model.Genre, new { @class = "editor-field" })
                </td>
            </tr>
            <tr>
                <td>
                    Cinexclusive
                </td>
                <td>@Html.CheckBoxFor(model => model.Cinexclusive)
                </td>
            </tr>
            <tr>
                <td>
                    Blurb
                </td>
                <td>@Html.TextAreaFor(model => model.Blurb, new { style = "width:500px; height: 150px" })
                </td>
            </tr>
            <tr>
                <td>
                    Synopsis
                </td>
                <td>@Html.TextAreaFor(model => model.Synopsis, new { style = "width:500px; height: 150px" })
                </td>
            </tr>
            <tr>
                <td>
                    Poster Homepage
                </td>
                <td style>
                    <form id="file_upload" action="/Movies/UploadFiles" method="POST" enctype="multipart/form-data">
                    <div class="fileupload-buttonbar">
                        @*<div class="progressbar fileupload-progressbar">
                        </div>*@
                        <div id="file_name">
                        </div>
                        <div id="file_type">
                        </div>
                        <div id="file_size">
                        </div>
                        <div id="show_image"></div>
                        <span class="fileinput-button"><a href="javascript:void(0)" class="upload-image">
                            Upload image</a>
                            <input type="file" name="files[]" multiple id="file" />
                        </span>
                    </div>
                    </form>
                    @*@Html.TextBox("PosterHomepage", (string)ViewBag.PosterHomepage, new { @class = "editor-field" })*@
                </td>
            </tr>
            <tr>
                <td>
                    Running Time
                </td>
                <td>@Html.TextBoxFor(model => model.RunningTime, new { @class = "editor-field" })
                </td>
            </tr>
            <tr>
                <td>
                    Trailer
                </td>
                <td>@Html.TextBoxFor(model => model.Trailer, new { @class = "editor-field" }) @*Here is my problem ..how can I upload video with some other data*@
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <div style="float: left">
        <input type="button" id="btnAdd" value="Add" />
        <input type="button" id="btnCancel" value="Cancel" />
    </div>
</fieldset>
<script type="text/javascript">
    $(document).ready(function () {
        $('.progressbar').progressbar({ value: 0 });

        $('#file_upload').fileupload({
            dataType: 'json',
            url: '/Movies/UploadFiles',
            progressall: function (e, data) {
                $(this).find('.progressbar').progressbar({ value: parseInt(data.loaded / data.total * 100, 10) });
            },
            done: function (e, data) {
                $('#file_name').html(data.result.name);
                $('#file_type').html(data.result.type);
                $('#file_size').html(data.result.size);
                $('#show_image').html('<img src="/home/image/' + data.result.name + '" />');
                $('#file_name').css({ display: 'none' });
                $('#file_type').css({ display: 'none' });
                $('#file_size').css({ display: 'none' });
                //visibility: hidden;
                $(this).find('.progressbar').progressbar({ value: 100 });
            }
        });
    });

    $('#StandardCinema').hide();
    $('#Imax2D').hide();
    $('#Imax3D').hide();
    $('#DirectorsClub').hide();
    $('#DigitalTheatre2D').hide();
    $('#DigitalTheatre3D').hide();

    $('#SC').click(function () {
        var check = $("#SC").is(':checked');//.attr('checked');
        if (check == true) {
            $('#StandardCinema').show();
            $('#StandardCinema').focus();
        }
        else {
            $('#StandardCinema').hide();
        }
    });
    $('#I2D').click(function () {
        var check = $("#I2D").is(':checked');
        if (check == true) {
            $('#Imax2D').show();
            $('#Imax2D').focus();
        }
        else {
            $('#Imax2D').hide();
        }
    });
    $('#I3D').click(function () {
        var check = $("#I3D").is(':checked');
        if (check == true) {
            $('#Imax3D').show();
            $('#Imax3D').focus();
        }
        else {
            $('#Imax3D').hide();
        }
    });
    $('#DC').click(function () {
        var check = $("#DC").is(':checked');
        if (check == true) {
            $('#DirectorsClub').show();
            $('#DirectorsClub').focus();
        }
        else {
            $('#DirectorsClub').hide();
        }
    });
    $('#DT2D').click(function () {
        var check = $("#DT2D").is(':checked');
        if (check == true) {
            $('#DigitalTheatre2D').show();
            $('#DigitalTheatre2D').focus();
        }
        else {
            $('#DigitalTheatre2D').hide();
        }
    });
    $('#DT3D').click(function () {
        var check = $("#DT3D").is(':checked');
        if (check == true) {
            $('#DigitalTheatre3D').show();
            $('#DigitalTheatre3D').focus();
        }
        else {
            $('#DigitalTheatre3D').hide();
        }
    });

    $('#btnAdd').click(function () {
        var e = document.getElementById("file_name");
        var content = e.innerHTML;
        //alert(content);
        var _MovieName = $('#MovieName').val();
        var _Active = $('#Status').val();
        var _ShowingTypes = $('#ShowingTypes :selected').val();
        var _ShowingTypesText = $('#ShowingTypes :selected').text();
        var _Cast = $('#Cast').val();
        var _Rating = $('#Rating').val();
        var _Blurb = $('#Blurb').val();
        var _Synopsis = $('#Synopsis').val();
        var _RunningTime = $('#RunningTime').val();
        var _Genre = $('#Genre').val();
        var _Cinexclusive = $('#Cinexclusive');
        var _Trailer = $('#Trailer').val();
        var _PosterHomepage = content;

        var _SC = $('#StandardCinema').val();
        var _I2D = $('#Imax2D').val();
        var _I3D = $('#Imax3D').val();
        var _DC = $('#DirectorsClub').val();
        var _DT2D = $('#DigitalTheatre2D').val();
        var _DT3D = $('#DigitalTheatre3D').val();
        var isSC = $("#SC").attr('checked') ? true : false;
        var isI2D = $("#I2D").attr('checked') ? true : false;
        var isI3D = $("#I3D").attr('checked') ? true : false;
        var isDC = $("#DC").attr('checked') ? true : false;
        var isDT2D = $("#DT2D").attr('checked') ? true : false;
        var isDT3D = $("#DT3D").attr('checked') ? true : false;
        var isActive = $('#Status').attr('checked') ? true : false;
        var isCinex = $('#Cinexclusive').attr('checked') ? true : false;

        if (_ShowingTypesText == "Select Type") {
            alert("Showing Type is required.");
            return false;
        }

        if (isSC == true & _SC == "") {
            alert("Standard Cinema was selected! Movie code is required.");
            $('#StandardCinema').focus();
            return false;
        }

        if (isI2D == true & _I2D == "") {
            alert("IMAX 2D was selected! Movie code is required.");
            $('#Imax2D').focus();
            return false;
        }

        if (isI3D == true & _I3D == "") {
            alert("IMAX 3D was selected! Movie code is required.");
            $('#Imax3D').focus();
            return false;
        }

        if (isDC == true & _DC == "") {
            alert("Director's Club was selected! Movie code is required.");
            $('#DirectorsClub').focus();
            return false;
        }

        if (isDT2D == true & _DT2D == "") {
            alert("Digital Theatre 2D was selected! Movie code is required.");
            $('#DigitalTheatre2D').focus();
            return false;
        }

        if (isDT3D == true & _DT3D == "") {
            alert("Digital Theatre 3D was selected! Movie code is required.");
            $('#DigitalTheatre3D').focus();
            return false;
        }

        var postData = {
            moviename: _MovieName,
            status: isActive,
            showingtype: _ShowingTypes,
            cast: _Cast,
            rating: _Rating,
            genre: _Genre,
            cinexclusive: isCinex,
            blurb: _Blurb,
            synopsis: _Synopsis,
            runningtime: _RunningTime,
            trailer: _Trailer,
            posterhompage: _PosterHomepage,
            sc: _SC,
            i2d: _I2D,
            i3d: _I3D,
            dc: _DC,
            dt2d: _DT2D,
            dt3d: _DT3D
        };
        $.ajax({
            type: "POST",
            url: "/Movies/CreateMovie",
            dataType: "json",
            traditional: true,
            data: postData,
            cache: false,
            success: function (data) {
                if (data.Result == "Success") {
                    jAlert(data.Message, "Notification", function () {
                        window.location = '/Home/Index';
                    });
                }
                else
                    jAlert(data.Message, "Notification"); //, function () {
                //$('#code').focus();
                //});
            }
        });
    });

    $("#btnCancel").click(function () {
        window.location = "/Home/Index/";
    });
</script> 
```

控制器：

```
 public FilePathResult Image()
        {
            string filename = Request.Url.AbsolutePath.Replace("/home/image", "");
            string contentType = "";
            var filePath = new FileInfo(Server.MapPath("~/Images") + filename);

            var index = filename.LastIndexOf(".") + 1;
            var extension = filename.Substring(index).ToUpperInvariant();

            // Fix for IE not handling jpg image types
            contentType = string.Compare(extension, "JPG") == 0 ? "image/jpeg" : string.Format("image/{0}", extension);

            return File(filePath.FullName, contentType);
        }

        [HttpPost]
        public ContentResult UploadFiles()
        {
            var r = new List<UploadHomePage>();

            foreach (string file in Request.Files)
            {
                HttpPostedFileBase image = Request.Files[file] as HttpPostedFileBase;
                if (image.ContentLength == 0)
                    continue;
                string savedFileName = Path.Combine(Server.MapPath("~/Images"), Path.GetFileName(image.FileName));
                image.SaveAs(savedFileName);

                r.Add(new UploadHomePage()
                {
                    Name = image.FileName,
                    Length = image.ContentLength,
                    Type = image.ContentType
                });
            }
            ViewBag.PosterHomepage = Path.Combine(Server.MapPath("~/Images"), Path.GetFileName(r[0].Name));

            return Content("{\"name\":\"" + r[0].Name + "\",\"type\":\"" + r[0].Type + "\",\"size\":\"" + string.Format("{0} bytes", r[0].Length) + "\"}", "application/json");
        }

        [HttpPost]
        public ActionResult CreateMovie(string moviename, bool status, int showingtype, string cast, string rating, string genre, bool cinexclusive, string blurb, string synopsis, string runningtime, string trailer, string posterhompage, string sc, string i2d, string i3d, string dc, string dt2d, string dt3d)
        {
            try
            {
                //Saving process

                if (_WebResult.Result == 0)
                {
                    return Json(new { Result = "Success", Message = _WebResult.Message.ToString() });
                }
                else
                {
                    return Json(new { Result = "Error", Message = _WebResult.Message.ToString() });
                }
            }
            catch (Exception)
            {

                return Json(new { Result = "Error", Message = "" + " failed to save." });
            }
        } 
```

# xml - 使用动作脚本 3 使用 XML 中的数据来操作影片剪辑

> ID：15518739
> 
> 赞同：0
> 
> 时间：2013-03-20T08:39:24.550
> 
> 标签：xml, actionscript-3

创建时钟系统，需要从xml访问数据。数据中的元素决定了建筑的颜色。需要帮助将 xml 中的数据与界面中的对象链接并定位它们。到目前为止，我已经能够提取数据，但不知道如何将这两者联系起来以定位它们。我才走到这一步。

```
import com.greensock.loading.*;
import com.greensock.loading.display.*;
import com.greensock.events.LoaderEvent;
import flash.events.Event; 
import flash.net.URLLoader; 

var xmlLoader:URLLoader=new URLLoader();
xmlLoader.addEventListener(Event.COMPLETE, loadXML);

var xmlData:XMLList=new XMLList();
xmlLoader.load(new URLRequest("xmldata.xml"));

function loadXML(e:Event):void
{
    var i:int;
    xmlData = new XMLList(e.target.data);
    var theDots = xmlData.dots;
    var posx = xmlData.dots.posx;
    var posy = xmlData.dots.posy;
    for ( i=0; i<theDots.length(); i++ )
    {
        var dot_name = theDots[i].name;
        var pos_x = theDots[i].posx;
        var pos_y = theDots[i].posy;

        var mc:MovieClip = new theDot;
        var pos_x:Point X = new x;
        var pos_y:Point Y = new y;  
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:55:33.000

您必须设计您的`TheDot`类和所有其他简单类以接受构造函数中的属性，可能具有默认值，或者为它们提供函数以接受可能批量的属性，例如为建筑物着色将启动图形重新创建。一个例子：

```
public class TheHouse extends Sprite {
    private var fillColor:uint; // with alpha
    private var lineColor:uint;
    private var lineThickness:Number;
    private function drawHouse():void {
        // drawing house
        this.graphics.clear();
        this.graphics.lineStyle(lineThickness,(lineColor & 0xffffff),
            Number(lineColor>>>24)/255); // alpha is 0..1
        this.graphics.beginFill((fillColor&0xffffff),
            Number(fillColor>>>24)/255);
        this.graphics.circle(0,0,20); // *le perfectly drawn house code
        // actually here go graphics commands to draw a house via lines/curves
        this.graphics.endFill();
    }
    public function TheHouse() {
        lineColor=0xff000000;
        fillColor=0xffffffff;
        lineThickness=1.0;
        drawHouse();
    }
    public function set outlineColor(value:uint):void {
        if (lineColor==value) return;
        lineColor=value;
        drawHouse();
    } 
    // similarly do other setters
} 
```

# java - 我需要使用 Lucene 在调色板上实现图像索引

> ID：15518743
> 
> 赞同：1
> 
> 时间：2013-03-20T08:39:30.610
> 
> 标签：java, lucene

给定一个仅包含图像的目录，我需要使用 Lucene 索引（使用倒排索引）对文件进行索引。假设我们提供了一个工具来提取颜色百分比（不是特定的 RGB 百分比），我应该如何使用 Lucene 库，以便当我查询具有绿色的图像时，我得到的结果集为具有绿色百分比的图像按降序排列?? 我应该如何修改字段文件？如果我创建一个新的 ColorField 文件，它的数据类型可以是什么以促进最小的更改？我还需要修改分析器文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:53:28.777

我会将您要搜索的百分比索引为单独的字段。使用[IntField](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/IntField.html)、[DoubleField](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/DoubleField.html)、[FloatField](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/FloatField.html)、[LongField](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/LongField.html)或类似的，可能是最有意义的。

例如：

```
Document doc = new Document();
doc.add(new StoredField("path",path));
doc.add(new FloatField("green",percentageGreen,Field.Store.NO));
doc.add(new FloatField("red",percentageRed,Field.Store.NO));
//etc. 
```

诸如使用哪个数字字段、是否存储百分比等详细信息将取决于您的要求。

然后，您可以使用[NumericRangeQuery搜索这些百分比，或者使用适当的](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/NumericRangeQuery.html)[IndexSearcher.search 调用](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSearcher.html#search%28org.apache.lucene.search.Query,%20int,%20org.apache.lucene.search.Sort%29)基于它们进行排序，例如：

```
Sort sort = new Sort(new SortField("green",SortField.Type.FLOAT));
TopDocs docs = searcher.search(query,maxResults,sort); 
```

# c# - 用户控件中的数据绑定中继器

> ID：15518751
> 
> 赞同：0
> 
> 时间：2013-03-20T08:40:10.863
> 
> 标签：c#, asp.net, user-controls, repeater

我有一个显示 2 个用户控件的朋友列表页面。
第一个控件显示所有当前好友，而另一个显示当前好友请求。

用户按以下顺序控制负载：

**- 当前好友- 好友**
**请求**

他们每个人都以几乎相同的方式搜索数据库，使用相同的结构`List<>`，并绑定到非常相似`Repeaters`的 .

我得到的当前问题是：

```
ExecuteReader requires an open and available Connection. The connection's current state is closed. 
```

然而，我在每个读者面前打开连接，并在使用后关闭它。由于相似之处；我将发布其中一个`UserControl`'s 代码。将根据要求发布更多信息。

```
protected void Page_Load(object sender, EventArgs e)
    {
        GetFriend();
    }

    /// <summary>
    /// Get the current friends
    /// </summary>
    private void GetFriend()
    {
        try
        {
            List<FriendRequests> friendRequest = new List<FriendRequests>();

            // Get friend added by another
            const string strSql = "SELECT [id], [origionalId], [dateFriendAdded] FROM vwMemberFriendStatus WHERE contactId=@member AND accepted=1";

            SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text };

            sqlComm.Parameters.Add(new SqlParameter("@member", SqlDbType.Int)).Value =
                SiteSession.Current.NicknameId;

            SqlDataReader rdr = sqlComm.ExecuteReader();

            while (rdr.Read())
            {
                friendRequest.Add(new FriendRequests
                {
                    IsOrigional = false,
                    FriendId = rdr["id"].ToString(),
                    FriendName = Member.GetMemberName(rdr["origionalId"].ToString()),
                    DateAdded = DateTime.Parse(rdr["dateFriendAdded"].ToString()).ToString("dd MMMM yy")
                });
            }

            rptFriend.DataSource = friendRequest;
            rptFriend.DataBind();

            rdr.Close();
            DataConn.Disconnect();
            Response.Write("Current - Other <br/>");
        }
        catch (Exception f)
        {
            Response.Write("Current / Other: " + f.Message + "<br/>");
        }

        try
        {
            List<FriendRequests> friendRequest = new List<FriendRequests>();

            // Get friend added by self
            const string strSql =
                        "SELECT [id], [contactId], [dateFriendAdded] FROM vwMemberFriendStatus WHERE origionalId=@member AND accepted=1";

            SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text };

            sqlComm.Parameters.Add(new SqlParameter("@member", SqlDbType.Int)).Value =
                SiteSession.Current.NicknameId;

            SqlDataReader rdr = sqlComm.ExecuteReader();

            while (rdr.Read())
            {
                friendRequest.Add(new FriendRequests
                {
                    IsOrigional = true,
                    FriendId = rdr["id"].ToString(),
                    FriendName = Member.GetMemberName(rdr["contactId"].ToString()),
                    DateAdded = DateTime.Parse(rdr["dateFriendAdded"].ToString()).ToString("dd MMMM yy")
                });
            }

            rptFriend.DataSource = friendRequest;
            rptFriend.DataBind();

            rdr.Close();
            DataConn.Disconnect();
            Response.Write("Current - Self <br/>");
        }
        catch (Exception f)
        {
            Response.Write("Current / Self: " + f.Message + "<br/>");
        }
    } 
```

# visual-studio-2012 - 如何验证由 LocalSTS 发出的 SecurityToken XML 字符串

> ID：15518753
> 
> 赞同：1
> 
> 时间：2013-03-20T08:40:15.660
> 
> 标签：visual-studio-2012, wif, saml

有人可以指出一个验证 LocalSTS 颁发的令牌的示例（VS 2012 的身份和访问工具附带的 STS 提供程序）

谢谢，

# sql-server - 我如何获得查询结果的数量

> ID：15518757
> 
> 赞同：2
> 
> 时间：2013-03-20T08:40:42.557
> 
> 标签：sql-server, tsql

在结果行数的情况下，我需要更改 EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE 的值。例如，如果查询返回一行 INS 应该只是 INS，如果返回两行，则从第一行返回 INS + '' + 从第二行返回 INS，如果超过 3 行返回 - 来自第一行的 INS 和数字或行 - 1

这是我目前的代码。

```
SELECT   

EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS

FROM NOTIFICATIONS
LEFT JOIN APPLICATIONS ON NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
LEFT JOIN APPLICATION_REASONS ON APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
LEFT JOIN APPLICATION_TYPES ON APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
LEFT JOIN REFUSAL_TYPES ON REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
LEFT JOIN USERS ON USERS.ID=NOTIFICATIONS.EXECUTANT_FK
LEFT JOIN APPLICATION_INSTITUTIONS ON APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
LEFT JOIN EDU_INSTITUTIONS ON EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID=@ID 
```

PS对不起我的英语。

**UDP：** 我解决了第一种和第三种情况，但我现在不知道如何解决第二种我的代码

```
select INSE =
case 
when TotalRows = 1 then INS
--when TotalRows = 2 then INS + INS   
when cast(TotalRows as int) > 2 then INS + ' и '+ cast(TotalRows-1 as nvarchar)+' филиалами'
end
from(
SELECT 

EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS,
APPLICATION_INSTITUTIONS.IS_APPLICANT as ORD,
COUNT(*) OVER () [TotalRows]

FROM NOTIFICATIONS
left join APPLICATIONS on NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
left join APPLICATION_REASONS on APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
left join APPLICATION_TYPES on APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
left join REFUSAL_TYPES on REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
left join USERS on USERS.ID=NOTIFICATIONS.EXECUTANT_FK
left join APPLICATION_INSTITUTIONS on APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
left join EDU_INSTITUTIONS on EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID='20874f82-1887-4214-8812-53c21611202f'

) as tmp
order by  ORD desc 
```

**UPD2：**这个版本几乎可以工作，不工作是第二种情况

```
select INS_CASE =
case 
when TotalRows = 1 then INS
when TotalRows = 2 then
    (SELECT TOP 1 FULL_NAME_INSTRUMENTAL_CASE FROM EDU_INSTITUTIONS AS EDU WHERE EDU.ID = tmp.ID ORDER BY EDU.FULL_NAME_INSTRUMENTAL_CASE ASC ) 
    + ' и ' + 
    (SELECT TOP 1 EDU.FULL_NAME_INSTRUMENTAL_CASE FROM EDU_INSTITUTIONS AS EDU WHERE EDU.ID = tmp.ID ORDER BY EDU.FULL_NAME_INSTRUMENTAL_CASE DESC )
when TotalRows > 2 then INS + ' и '+ cast(TotalRows-1 as nvarchar)+' филиалами'
when TotalRows > 2 and ORD=0 then cast(TotalRows as nvarchar)+' филиалами ' + (SELECT top 1 INS from EDU_INSTITUTIONS as EDU where edu.id = id )
end
from(
SELECT 
EDU_INSTITUTIONS.ID as ID,
EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS,
APPLICATION_INSTITUTIONS.IS_APPLICANT as ORD,
COUNT(*) OVER () [TotalRows]

FROM NOTIFICATIONS
left join APPLICATIONS on NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
left join APPLICATION_REASONS on APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
left join APPLICATION_TYPES on APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
left join REFUSAL_TYPES on REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
left join USERS on USERS.ID=NOTIFICATIONS.EXECUTANT_FK
left join APPLICATION_INSTITUTIONS on APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
left join EDU_INSTITUTIONS on EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID='20874f82-1887-4214-8812-53c21611202f'
--and APPLICATION_INSTITUTIONS.IS_APPLICANT =1

--'20874f82-1887-4214-8812-53c21611202f'    --=2
--'859eef0a-be0f-48e8-9bb0-83cbebca6c5d'    -->2 
--'31992df7-a3ee-4d07-9596-21017424e594'    --=1
--'640d283d-57a7-4ddb-a7c3-f43caeb83aa1'    -->2 ORD 0

) as tmp
order by ORD desc 
```

**UPD3：**这是解决问题的方法

```
select INS_CASE =
case 
when TotalRows = 1 then INS
when TotalRows = 2 then
    (SELECT TOP 1 INS FROM (
SELECT 
EDU_INSTITUTIONS.ID as ID,
EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS,
APPLICATION_INSTITUTIONS.IS_APPLICANT as ORD,
COUNT(*) OVER () [TotalRows]

FROM NOTIFICATIONS
left join APPLICATIONS on NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
left join APPLICATION_REASONS on APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
left join APPLICATION_TYPES on APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
left join REFUSAL_TYPES on REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
left join USERS on USERS.ID=NOTIFICATIONS.EXECUTANT_FK
left join APPLICATION_INSTITUTIONS on APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
left join EDU_INSTITUTIONS on EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID='20874f82-1887-4214-8812-53c21611202f'

) as tmp ORDER BY INS DESC ) 
    + ' и ' + 
    (SELECT TOP 1INS FROM (
SELECT 
EDU_INSTITUTIONS.ID as ID,
EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS,
APPLICATION_INSTITUTIONS.IS_APPLICANT as ORD,
COUNT(*) OVER () [TotalRows]

FROM NOTIFICATIONS
left join APPLICATIONS on NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
left join APPLICATION_REASONS on APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
left join APPLICATION_TYPES on APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
left join REFUSAL_TYPES on REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
left join USERS on USERS.ID=NOTIFICATIONS.EXECUTANT_FK
left join APPLICATION_INSTITUTIONS on APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
left join EDU_INSTITUTIONS on EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID='20874f82-1887-4214-8812-53c21611202f'

) as tmp  ORDER BY INS ASC )
when TotalRows > 2 then INS + ' и '+ cast(TotalRows-1 as nvarchar)+' филиалами'
when TotalRows > 2 and ORD=0 then cast(TotalRows as nvarchar)+' филиалами ' + (SELECT top 1 INS from EDU_INSTITUTIONS as EDU where edu.id = id )
end
from(
SELECT 
EDU_INSTITUTIONS.ID as ID,
EDU_INSTITUTIONS.FULL_NAME_GENITIVE_CASE AS GEN,
EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE AS INS,
EDU_INSTITUTIONS.FULL_NAME_DATIVE_CASE AS DAT,
NOTIFICATIONS.[ADDRESS] AS [ADDRESS],
NOTIFICATIONS.NUMBER AS NUM,
NOTIFICATIONS.RESPONSE_NUMBER AS RNUM,
NOTIFICATIONS.SIGN_DATE AS SDATE,
NOTIFICATIONS.SIGNER_POST AS SPOST,
NOTIFICATIONS.SIGNER_FULL_NAME AS SNAME,
RECIPIENT_FULL_NAME AS FIO,
RTRIM(ISNULL(APPLICATION_TYPES.NAME_GENITIVE_CASE,'') + ' ' + ISNULL(APPLICATION_REASONS.NAME_PREPOSITIONAL_CASE, '')) AS REAS,
APPLICATION_INSTITUTIONS.IS_APPLICANT as ORD,
COUNT(*) OVER () [TotalRows]

FROM NOTIFICATIONS
left join APPLICATIONS on NOTIFICATIONS.APPLICATION_FK=APPLICATIONS.ID
left join APPLICATION_REASONS on APPLICATION_REASONS.ID=APPLICATIONS.REASON_FK
left join APPLICATION_TYPES on APPLICATION_TYPES.ID=APPLICATION_REASONS.APPLICATION_TYPE_FK
left join REFUSAL_TYPES on REFUSAL_TYPES.ID=APPLICATIONS.REFUSAL_TYPE_FK
left join USERS on USERS.ID=NOTIFICATIONS.EXECUTANT_FK
left join APPLICATION_INSTITUTIONS on APPLICATION_INSTITUTIONS.APPLICATION_FK=APPLICATIONS.ID 
left join EDU_INSTITUTIONS on EDU_INSTITUTIONS.ID=APPLICATION_INSTITUTIONS.INSTITUTION_FK

WHERE
NOTIFICATIONS.ID='20874f82-1887-4214-8812-53c21611202f'

) as tmp
order by ORD desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:15:06.727

也许你可以使用下一个组合：

```
....

SELECT INSE =
CASE
WHEN TotalRows = 1 THEN INS
WHEN TotalRows = 2 THEN 
    (SELECT TOP 1 EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE 
      FROM tmp AS EDU 
      ORDER BY EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE ASC) + ' ' + 
    (SELECT TOP 1 EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE 
      FROM tmp AS EDU 
      ORDER BY EDU_INSTITUTIONS.FULL_NAME_INSTRUMENTAL_CASE DESC)
WHEN CAST(TotalRows AS int) > 2 THEN INS + ' и '+ CAST(TotalRows-1 as nvarchar)+' филиалами'
END

.... 
```

# javascript - 如何从 Meteor.js 中另一个模板的事件触发模板的 EventMap 事件？

> ID：15518761
> 
> 赞同：1
> 
> 时间：2013-03-20T08:40:50.410
> 
> 标签：javascript, meteor

我在 Meteor.js 中偶然发现了一个非常时髦的要求——我有 2 个按钮（“作为孩子提交”和“作为兄弟提交”）和对按键做出反应的文本输入。按钮可以自行工作，但我想从输入的 keydown 事件触发由 Template.my_template.events(...) 制作的“点击”事件。

我设法使用以下构造（coffeescript）编写所有内容，同时使用 EventMap 和 render() 回调：

```
Template.my_template.events = 

    'keydown input': () -> reactToPressedKey();

Template.my_template.rendered = () ->

    $('click .submit_child').bind 'click', () -> doStuff();
    $('click .submit_sibling').bind 'click', () -> doStuff(); 
```

它像我预期的那样工作，但我想知道是否有更好的解决方案，比如只使用 EventMap (Template.my_template.events)？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T03:48:01.570

只需将事件放在另一个模板中。

```
Template.other_template.events 
  'click .submit_child': doStuff
  'click .submit_sibling': doStuff

Template.my_template.events
  'keydown input': reactToPressedKey 
```

# angularjs - Angular 视图中的变量输入类型

> ID：15518769
> 
> 赞同：1
> 
> 时间：2013-03-20T08:41:21.353
> 
> 标签：angularjs

我正在制作一个问卷应用程序，其中一组问题（和答案的类型）将由服务器设置。这是我范围内的一个示例（它是咖啡脚本，但你会明白的）：

```
 $scope.groups = [
        {
            id: "basics"
            text: "The Basics"
            questions: [
                {
                    id: "project_text"
                    text: "What's the name of the project?"
                    type: {
                        name: "Short Text"
                    }
                }
                {
                    id: "currency_type"
                    text: "Choose your currency"
                    type: {
                        name: "Enum"
                        options: ["$", "£", "€"]
                    }
                }
            ]
        }
        {
            id: "dev"
            text: "Development"
            questions: [
                {
                    id: "dev_cost"
                    text: "How much will development cost?"
                    type: {
                        name: "Integer"
                    }
                }
            ]
        }
    ] 
```

问题是，在我看来，我事先不知道我需要什么输入，因为这是由范围的状态设置的（你看到上面的 Enum、Integer、Short Text，后面还有更多）

在 Angular 中执行此操作的好方法是什么？我的第一个想法是只拥有一个基于参数的指令，它要么激活适当的指令（也许通过将相关元素注入 dom，这是否可能？），或者本身包含所有必要的输入并注入适当的指令。但是，我不确定这是执行此操作的适当方法。

有人愿意对此进行破解吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:12:34.317

你可以使用

```
ng-show="expression" 
```

仅当表达式计算结果为时才显示某些元素`true`

例如：

```
<div ng-show="foo.bar">I will be visible when foo.bar exists</div> 
```

如果您需要更复杂的条件，请使用AngularUI`ng-switch`或`ui-if`指令，这是执行相同切换的一种不太冗长的方式。

# javascript - AngularJS 中的简单 dom 操作 - 单击按钮，然后将焦点设置到输入元素

> ID：15518772
> 
> 赞同：19
> 
> 时间：2013-03-20T08:41:31.260
> 
> 标签：javascript, jquery, angularjs

我有这个角度代码：

```
<div class="element-wrapper" ng-repeat="element in elements">
  <div class="first-wrapper">
     <div class="button" ng-click="doSomething(element,$event)">{{element.name}}</div>   
  </div>
  <div class="second-wrapper">
    <input type="text" value="{{element.value}}">    
  </div>
</div> 
```

**我想要发生的事情：**当用户单击按钮时 - 输入元素将被聚焦。

**单击按钮元素并聚焦后如何找到输入元素？**

我可以做一个看起来像这样的功能：

```
function doSomething(element,$event) {
  //option A - start manipulating in the dark:
  $event.srcElement.parentNode.childNodes[1]

  //option B - wrapping it with jQuery:
   $($event.srcElement).closest('.element-wrapper').find('input').focus();
} 
```

它们都不起作用 - 有更好的 Angular 方法吗？在jQuery中使用诸如`.closest()`and as之类的函数？`.find()`

**更新：**

我发现这个 hack 是有效的**（但它似乎仍然不是正确的解决方案）**：

```
function doSomething(element,$event) {
   setTimeout(function(){
     $($event.srcElement).closest('.element-wrapper').find('input').focus();
   },0)
} 
```

我用 setTimeout 包装它，所以在 Angular 完成所有操作后，它会专注于输入元素。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-20T16:35:23.250

DOM 操作应该在指令而不是控制器中。我会定义一个`focusInput`指令并在按钮上使用它：

```
<div class="button" focus-input>{{element.name}}</div> 
```

指示：

```
app.directive('focusInput', function($timeout) {
  return {
    link: function(scope, element, attrs) {
      element.bind('click', function() {
        $timeout(function() {
          element.parent().parent().find('input')[0].focus();
        });
      });
    }
  };
}); 
```

[普朗克](http://plnkr.co/edit/96ZnWZZ0EU2VipioBpgC?p=preview)

由于[jqLit​​e](http://docs.angularjs.org/api/angular.element)在 DOM 遍历方法方面相当有限，因此我不得不使用`parent().parent()`. 您可能希望使用 jQuery 或一些 JavaScript 方法。

正如您已经发现的那样，`$timeout`需要`focus()`在浏览器呈现后调用该方法（即，完成对点击事件的处理）。

`find('input')[0]`让我们可以访问 DOM 元素，允许我们使用 JavaScript`focus()`方法（而不是`find('input').focus()`需要 jQuery）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-29T01:51:25.047

我最近一直在看 AngularJS，遇到了类似的情况。

我正在努力从主角度页面更新 Todo 示例应用程序，以在您双击 todo 项时添加“编辑”模式。

我能够使用基于模型/状态的方法解决我的问题。如果您的应用程序以类似的方式工作（当模型上的某些条件为真时，您希望将焦点设置在某个字段上），那么这也可能对您有用。

我的方法是将`model.editing`属性设置为`true`当用户双击待办事项标签时 - 这会显示可编辑的输入并隐藏常规的不可编辑标签和复选框。我们还有一个名为的自定义指令`focusInput`，它对同一`model.editing`属性有一个监视，并在值更改时将焦点设置在文本字段上：

```
<li ng-repeat="todo in todos">

    <div>
        <!-- Regular display view. -->
        <div ng-show="todo.editing == false">
            <label class="done-{{todo.done}}" ng-dblclick="model.editing = true">
                <input type="checkbox" ng-model="todo.done"/>{{todo.text}}
            </label>
        </div>

        <!-- Editable view. -->
        <div ng-show="todo.editing == true">
            <!--
                - Add the `focus-input` directive with the statement "todo.editing == true".
                  This is the element that will receive focus when the statement evaluates to true.

                - We also add the `todoBlur` directive so we can cancel editing when the text field loses focus.
            -->
            <input type="text" ng-model="todo.text" focus-input="todo.editing == true" todo-blur="todo.editing = false"/>
        </div>
    </div>

</li> 
```

这是`focusInput`当某些条件评估为时将焦点设置在当前元素上的指令`true`：

```
angular.module('TodoModule', [])
    // Define a new directive called `focusInput`.
    .directive('focusInput', function($timeout){
        return function(scope, element, attr){

            // Add a watch on the `focus-input` attribute.
            // Whenever the `focus-input` statement changes this callback function will be executed.
            scope.$watch(attr.focusInput, function(value){
                // If the `focus-input` statement evaluates to `true`
                // then use jQuery to set focus on the element.
                if (value){
                    $timeout(function(){
                        element.select();
                    });
                }
            });

        };
    })
    // Here is the directive to raise the 'blur' event.
    .directive('todoBlur', [
        '$parse', function($parse){
            return function(scope, element, attr){

                var fn = $parse(attr['todoBlur']);
                return element.on('blur', function(event){

                    return scope.$apply(function(){
                        return fn(scope, {
                            $event: event
                        });
                    });

                });

            };
        }
    ]); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-24T19:14:10.373

这是一个在目标 dom 元素上触发焦点事件的指令：

AngularJs 指令：

```
app.directive('triggerFocusOn', function($timeout) {
    return {
        link: function(scope, element, attrs) {
            element.bind('click', function() {
                $timeout(function() {
                    var otherElement = document.querySelector('#' + attrs.triggerFocusOn);

                    if (otherElement) {
                        otherElement.focus();
                    }
                    else {
                        console.log("Can't find element: " + attrs.triggerFocusOn);
                    }
                });
            });
        }
    };
}); 
```

的HTML：

```
<button trigger-focus-on="targetInput">Click here to focus on the other element</button>
<input type="text" id="targetInput"> 
```

[Plunker](http://plnkr.co/edit/f3A0KnLj8nAVcD3WQziJ?p=preview)上的一个活生生的例子

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-23T20:14:10.957

我必须创建一个帐户才能提供简单的答案。

```
//Add a bool to your controller's scope that indicates if your element is focused
... //ellipsis used so I don't write the part you should know
$scope.userInputActivate = false;
...
//Add a new directive to your app stack
...
.directive('focusBool', function() { 
    return function(scope, element, attrs) {
        scope.$watch(attrs.focusBool, function(value) {
            if (value) $timeout(function() {element.focus();});
        });
    }
})
...

<!--Now that our code is watching for a scope boolean variable, stick that variable on your input element using your new directive, and manipulate that variable as desired.-->
...
<div class="button" ng-click="userInputActivate=true">...</div>
...
<input type="text" focus-Bool="userInputActivate">
... 
```

当您不使用输入时，请务必重置此变量。您可以添加一个足够简单的 ng-blur 指令以将其更改回来，或者添加另一个将其重置为 false 的 ng-click 事件。将其设置为 false 只是为下一次做好准备。这是我发现的一个 ng-blur 指令示例，以防您找不到。

```
.directive('ngBlur', ['$parse', function($parse) {
    return function(scope, element, attr) {
        var fn = $parse(attr['ngBlur']);
        element.bind('blur', function(event) {
        scope.$apply(function() {
            fn(scope, {$event:event});
        });
    });
    }
}]); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-10T10:12:51.527

这是我想出的。我从上面的 Mark Rajcok 的解决方案开始，然后开始使其易于重用。它是可配置的，不需要控制器中的任何代码。焦点是纯粹的表现方面，不应该需要控制器代码

**html:**

```
 <div id="focusGroup">
     <div>
         <input type="button" value="submit" pass-focus-to="focusGrabber" focus-parent="focusGroup">
     </div>
     <div>
         <input type="text" id="focusGrabber">
     </div> 
 </div> 
```

**指示：**

```
chariotApp.directive('passFocusTo', function ($timeout) {
    return {
        link: function (scope, element, attrs) {
            element.bind('click', function () {
                $timeout(function () {
                    var elem = element.parent();
                    while(elem[0].id != attrs.focusParent) {
                        elem = elem.parent();
                    }
                    elem.find("#"+attrs.passFocusTo)[0].focus();
                });
            });
        }
    };
}); 
```

**假设：**

*   你的给予者和接受者就在附近。
*   当在一个页面上多次使用它时，使用的 id 是唯一的，或者给予和接受者位于 DOM 的一个独立分支中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-21T01:34:40.537

对于使用 .closest() 方法，我建议您应用原型继承机制狐狸扩展角度机会。像这样：

```
angular.element.prototype.closest = (parentClass)->
  $this = this
  closestElement = undefined
  while $this.parent()
    if $this.parent().hasClass parentClass
      closestElement = $this.parent()
      break
    $this = $this.parent()
  closestElement 
```

标记：

```
<span ng-click="removeNote($event)" class="remove-note"></span> 
```

用法：

```
 $scope.removeNote = ($event)->
    currentNote = angular.element($event.currentTarget).closest("content-list_item") 
    currentNote.remove() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-20T18:10:24.030

要查找输入，请将其添加 Id`<input id="input{{$index}}" .. />`并将 ngRepeat 索引作为参数传递给函数`ng-click="doSomething(element,$event, $index)"`

```
 <div class="element-wrapper" ng-repeat="element in elements">
  <div class="first-wrapper">
     <div class="button" ng-click="doSomething(element,$event, $index)">{{element.name}}</div>   
  </div>
  <div class="second-wrapper">
    <input id="input{{$index}}" type="text" value="{{element.value}}">    
  </div>
</div> 
```

在函数中使用`$timeout`零延迟等待 DOM 渲染结束。然后可以通过`getElementById`in`$timeout`函数找到输入。不要忘记添加`$timeout`到控制器。

```
.controller("MyController", function ($scope, $timeout)
{
  $scope.doSomething = function(element,$event, index) {
    //option A - start manipulating in the dark:
    $event.srcElement.parentNode.childNodes[1]

    $timeout(function () 
    {
      document.getElementById("input" + index).focus();
    });
  }
}); 
```

# c# - 使用 C# 的计算机的总页面文件大小

> ID：15518774
> 
> 赞同：2
> 
> 时间：2013-03-20T08:41:36.877
> 
> 标签：c#

我正在尝试读取所有驱动器的总页面文件大小。在我的电脑上显示大约 8375 MB。[当我从控制面板看到时]

但是当我尝试从 C# 代码中获取相同的值时，情况就不同了。我已经使用kernel32.dll 的函数从我的代码`GlobalMemoryStatusEx()`中读取相同的值 **（即 dwTotalPageFile） 。**它显示了一些 17247666176 字节值，等于 16448.65 MB

```
[return: MarshalAs(UnmanagedType.Bool)]

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern bool **GlobalMemoryStatusEx**([In, Out] MEMORYSTATUSEX lpBuffer); 
```

[操作系统：Windows 7 x64]

请任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:50:42.807

PagedSystemMemorySize64 是分配给进程的分页内存池中操作系统内核内存的总字节数。它对应于Taskmgr.exe 中的“分页池”列。

PagedMemorySize64 是为进程分配的用户模式虚拟内存的总字节数。它对应于 Taskmgr.exe 中的“提交大小”列。

请注意，这些部分中的进程共享内存，所有进程的分配总和远大于实际使用的内存量。此外，您无法合理地计算页面文件中“未使用”空间的数量，Windows 会根据正在运行的进程需要动态扩展和收缩它。

# extjs - 从 extjs 中的控制器更改 html

> ID：15518780
> 
> 赞同：0
> 
> 时间：2013-03-20T08:41:53.573
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

在我的 Extjs 4.1.1a 项目中，

**[小提琴](http://jsfiddle.net/cuJ5S/4/)**（*这个小提琴不起作用，仅供参考*）

我正在使用更改 HTML（在控制器中）值

```
Ext.apply(weekNotifications,{html: {"hello"}); 
```

但是页面（视图）没有更新。当我在 Chrome 控制台中检查变量`weekNotifications`时，在上述函数之后，`innerHTML`我添加的是“hello”，但在`weekNotifications.el.dom.innerHTML`“Notifications here”（旧文本）中。

我什至尝试过：

```
weekNotifications.update("Hello");   //same problem as stated above 
```

当我尝试时：

```
weekNotifications.el.dom.innerHTML = "hello"; 
```

我收到错误 - 无法调用未定义的 dom

为了更好地理解，我粘贴了`console.log(weekNotifications)`

![在此处输入图像描述](../Images/a7b2b6e8a34b31257fff10cdd974f4ca.png)

* * *

![在此处输入图像描述](../Images/5a6f3605d5cdd3caf398428adb3dd0e8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:29:02.670

`weekNotification`问题是当我尝试更改 html 时变量未呈现。所以我做了以下对我有用的事情：

```
weekNotifications.on(
      'render',
      function(self){
         self.update("hello");
      },
      this
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:06:23.903

正如我在评论中所说，您以某种方式获得了对错误组件的引用。`update`是正确的使用方法：

```
Ext.require('*');

Ext.onReady(function() {

    var ct = new Ext.container.Container({
        renderTo: document.body,
        html: 'Foo'
    });

    setTimeout(function(){
        ct.update('Bar');
    }, 500);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:07:59.470

最好不要使用 绕过 ExtJS 组件更新机制`innerHTML`，这样会比较混乱。也就是说，请注意您混淆了两个不同的属性，它们实际上具有相同的名称（innerHTML），但由不同类型的对象拥有。您在第一张图片中下划线的那个不属于您似乎相信的本机 DOM 节点，所有者实际上是一个 ExtJS 对象（查看“xtype”属性）。这意味着您没有与 DOM 对象交互，因此，更新其 innerHTML 属性不会产生任何结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:08:14.663

您是否尝试过在渲染组件后更改 html（它确保 html 已准备好使用或进行更改）。如下所示

```
Ext.require('*');

Ext.onReady(function() {

var ct = new Ext.container.Container({
    renderTo: document.body,
    html: 'Foo',
    listeners:{
        afterrender:function(ct){
            ct.el.dom.innerHTML = "hello"; //works
           // ct.update('Bar');  //works
        }
    }
}); 
```

});

# php - 尝试使用 php 函数制作计算器，但它不起作用

> ID：15518783
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:41:55.667
> 
> 标签：php, html, function

我是一个没有任何脚本的简单计算器，但它不起作用，当我点击按钮时，哪个函数被声明它不能正常工作，

```
<html>

<head>
</head>

<body>

<form method="post" action="">
<table align="center" border="1px" bordercolor="#CC0033" bgcolor="#99CC00"> 
<tr>
<td>
Number 1:</td><td><input type="text" name="number1"></td>
</tr>

<tr>
<td>

Number 2:</td><td> <input type="text" name="number2"></td>
</tr> 

<tr>
<td> 
Get Result:</td><td> <input type="text" name="total"> </td>
</tr>

<tr>
<td class="2">
<input type="button"  value="ADD" onclick="addition()">
<input type="button"  value="SUB" onclick="subtraction()">
<input type="button" value="MUL" onclick="multiply();">
<input type="button"   value="DIV" onclick="division()">
<input type="button"  value="MOD" onclick="modulus()">
</td>
</tr>
</table>
</form>

</body>
</html> 
```

Bellow 是一个 php 函数，我是 crated.but is not working

```
<?php

  error_reporting(E_ALL ^ E_NOTICE);

//if()
    function addition(){

        $number1=$_POST['number1'];
        $number2=$_POST['number2'];
        echo $total=$number1+$number2;

    }

    function subtraction(){

        $number1=$_POST['number1'];
        $number2=$_POST['number2'];
        echo $total=$number1-$number2;

    }

    function multiply(){

        $number1=$_POST['number1'];
        $number2=$_POST['number2'];
        echo $total=$number1*$number2;
    }

    function division(){

        $number1=$_POST['number1'];
        $number2=$_POST['number2'];
        echo $total=$number1/$number2;
    }

    function modulus(){

        $number1=$_POST['number1'];
        $number2=$_POST['number2'];
        echo $total=$number1%$number2;

    }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:45:06.153

您不能直接从 html 上下文调用 php 函数。像你一样使用一个`$_POST`变量`number1`，`number2`就像这样：

```
<input type="submit" name="mode" value="MOD"> 
```

在php方面：

```
if(isset($_POST['mode']) && $_POST['mode']=='MOD') modulus(); 
```

...或者干脆使用javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:58:57.437

试试这个。你应该制作javascript函数。

```
<html>

<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
function addition()
{
    var total = parseInt($('#number1').val()) + parseInt($('#number2').val());
    $('#total').val(total);
}

function subtraction()
{
    var total = parseInt($('#number1').val()) - parseInt($('#number2').val());
    $('#total').val(total);
}

function multiply()
{
    var total = parseInt($('#number1').val()) * parseInt($('#number2').val());
    $('#total').val(total);
}

function division()
{
    var total = parseInt($('#number1').val()) / parseInt($('#number2').val());
    $('#total').val(total);
}

function modulus()
{
    var total = parseInt($('#number1').val()) % parseInt($('#number2').val());
    $('#total').val(total);
}
</script>
</head>

<body>

<form method="post" action="">
<table align="center" border="1px" bordercolor="#CC0033" bgcolor="#99CC00"> 
<tr>
<td>
Number 1:</td><td><input type="text" name="number1" id="number1"></td>
</tr>

<tr>
<td>

Number 2:</td><td> <input type="text" name="number2" id="number2"></td>
</tr> 

<tr>
<td> 
Get Result:</td><td> <input type="text" name="total" id="total"> </td>
</tr>

<tr>
<td class="2">
<input type="button"  value="ADD" onclick="addition()">
<input type="button"  value="SUB" onclick="subtraction()">
<input type="button" value="MUL" onclick="multiply();">
<input type="button"   value="DIV" onclick="division()">
<input type="button"  value="MOD" onclick="modulus()">
</td>
</tr>
</table>
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:07:10.467

JavaScript 中没有定义点击事件！！！实现目标的一种方法是单击全部删除并尝试以下按钮：

```
<input type="submit" name="operation" value="ADD">
<input type="submit" name="operation" value="SUB">
<input type="submit" name="operation" value="MUL">
<input type="submit" name="operation" value="DIV">
<input type="submit" name="operation" value="MOD"> 
```

这样，当单击“一个”按钮时，您将按如下方式测试 $_POST['operation']；**并让您的函数将结果返回到 $total**

```
<?php 
$operation = isset($_POST['operation']) ? $_POST['operation'] : NULL;
switch($operation) {
    case 'ADD':
        $total = addition();
        break;

    case 'SUB':
        $total = subtraction();
        break;

    case 'MUL':
        $total = multiply();
        break;

    case 'DIV':
        $total = division();
        break;

    case 'MOD':
        $total = modulus();
        break;

    default:
        $total = '';
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:47:17.083

您已经在 PHP 中声明了函数，并且在`onclick`尝试调用 javascript 函数的事件上调用该函数。

如果你想调用 php 函数，你应该尝试

```
<input type="button" name="add" value="ADD">

<?php
    if(isset($_POST['add']))
    {
          addition();
    }
?> 
```

# interop - C++/CLI 中的#pragma managed(push,off) 会影响性能吗？

> ID：15518788
> 
> 赞同：3
> 
> 时间：2013-03-20T08:42:14.000
> 
> 标签：interop, c++-cli

我正在为 C# 编写一个 DLL 作为高性能模块，所以我使用 C++/CLI，因为它很容易在 C# 中引用并支持本机代码。我在[msdn](http://msdn.microsoft.com/en-us/library/0adb9zxe%28v=vs.110%29.aspx)上发现使用 #pragma managed(push, off) 和 #pragma managed(pop) 可以将其中的代码编译为本机代码。但根据我的简单测试，结果显示相反。

这是使用 Visual Studio 2012 使用 /clr 编译的代码。

> ```
> int clrloop()
> {
>   for (int i = 0; i < 999999999; i++)
>   {
>       double test=9.999;
>       test=pow(test, 10);
>   }
>   return 0;
> }
> 
> #pragma managed(push,off)
> int loop()
> {
>   for (int i = 0; i < 999999999; i++)
>   {
>       double test=9.999;
>       test=pow(test, 10);
>   }
>   return 0;
> }
> #pragma managed(pop)
> 
> int main(array<System::String ^> ^args)
> {
>     int a=loop();
>     int b=clrloop();
>     return 0;
> } 
> ```

性能分析表明，非托管 loop() 的成本是 clrloop() 的两倍。但是，如果我将 loop() 放入不同的 .cpp 文件并设置这个使用 /clr 编译的单个文件，并且不使用任何 #pragma managed(push, off) 东西，结果就像预期的那样好。

那么，这个#pragma 有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T08:41:58.803

我自己找到答案，所以，我正在回答它。

问题是由函数 pow() 引起的。

pow() 所在的*math.h*只是简单地包含在没有任何预处理器指令的情况下，这意味着它只是作为托管编译的。所以非托管循环（）将不得不调用托管pow（），从而成为从托管main（）到非托管循环（），再到托管pow（）的三级跳转，并导致开销。解决方案是将*math.h*包含在#pragma managed(push, off) 和#pragma managed(pop) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T01:11:31.847

maverix3 的答案的补充：

您应该使用非托管函数并将其放置在不使用预编译头文件的单独 CPP 文件中，以便手动将所有头文件包含在 #pragma managed(push,off) 部分中。然后添加一个头文件并记住在函数定义周围添加相同的 pragma 包装器。

# javascript - 带有属性的jQuery Tmpl值不起作用

> ID：15518791
> 
> 赞同：0
> 
> 时间：2013-03-20T08:42:19.943
> 
> 标签：javascript, jquery

我正在使用这个-> [https://github.com/jquery/jquery-tmpl](https://github.com/jquery/jquery-tmpl)

我需要的是使用上述插件递归地显示一组对象。

这怎么行不通？->`{{if value.exists != false}} checked {{/if}}`

请考虑以下代码：

```
{{each list}}
    <li><label class="checkbox{{if value.exists != false}} active{{/if}}"><input type="checkbox" {{if value.exists != false}} checked{{/if}} disabled>${$value.type}</label></li>
{{/each}} 
```

物体：

```
{ "list": 
    [
        { type: "GRAPH_A", exists: true },
        { type: "GRAPH_B", exists: false },
        { type: "GRAPH_C", exists: false },
    ]
} 
```

这是我得到的错误：

> ReferenceError：未定义值源文件：app/scripts/jquery.tmpl.min.js
> 
> 线路：10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:47:45.813

试试这个演示......看看源代码可能有用。 [使用 {{if}} 和 {{else}}](http://jquery.github.com/jquery-tmpl/demos/step-by-step/0_tmpl-read-only/3_if-else-tag.html)

数据：

```
var movies = [{
        Title: "Meet Joe Black",
        Languages: "English and French",
        Subtitles: "English"
    }, {
        Title: "Eyes Wide Shut",
        Subtitles: "French and Spanish"
    }, {
        Title: "The Mighty"
    }
]; 
```

html:

```
<script id="movieTemplate" type="text/x-jquery-tmpl">
    <tr>
        <td>${Title}</td>
        <td>
            {{if Languages}}
                Alternative languages: <em>${Languages}</em>.
            {{else Subtitles}}
                Original language only... <br/>Subtitles in <em>${Subtitles}</em>.
            {{else}}
                Original version only, without subtitles.
            {{/if}}
        </td>
    </tr>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:53:04.017

尝试

```
{{each list}}
    <li><label class="checkbox{{if exists != false}} active{{/if}}"><input type="checkbox" {{if exists != false}} checked{{/if}} disabled>${type}</label></li>
{{/each}} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/t33Kz/)

# asp.net - ValidationSummary 不显示错误

> ID：15518798
> 
> 赞同：0
> 
> 时间：2013-03-20T08:42:32.873
> 
> 标签：asp.net, validationsummary

我的 gridview 出现问题，不再显示 ValidationSummary-errors。ValidationSummary 的 Headertext 以及我设置为在 ExpressionValidation 触发时出现的 * 都会显示。

我很确定它以前有效，但我不知道为什么它不再有效。起初我认为这可能与页面上的其他 GridViews 有关，因为我喜欢在不同的 TabPanel 中有 5 个不同的 GridView，但我已经为每个 GridView 创建了一个验证组。

标记：

```
<asp:UpdatePanel runat="server" UpdateMode="Always">
    <ContentTemplate>
       <asp:GridView ID="gvBBG" runat="server" AutoGenerateColumns="false" DataKeyNames="ID" SkinID="gvWithoutWidth">
         <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                   <asp:ImageButton runat="server" ImageUrl="~/Images/GridView/gv_edit.png" CommandName="Edit"/>
                </ItemTemplate>
                <EditItemTemplate>
                   <asp:ImageButton runat="server" ImageUrl="~/Images/GridView/gv_cancel.png" CommandName="Cancel" CausesValidation="false"/>
                   <asp:ImageButton Id="ibUpdate" runat="server" ImageUrl="~/Images/GridView/gv_update.png" CommandName="Update"  CausesValidation="true"
                        ValidationGroup="UpdateBBG" Enabled="true" OnClientClick="return confirm('Datensatz einspielen/aktualisieren?')"/>
                </EditItemTemplate>
           </asp:TemplateField>
           <asp:TemplateField HeaderText="KV West" HeaderStyle-HorizontalAlign="Left">
               <EditItemTemplate>
                    <asp:TextBox ID="tbKVWest" runat="server" Text='<%# Bind("KVWestFormatted") %>' ValidationGroup="UpdateBBG" Width="50px" Height="15px"></asp:TextBox>
                     <asp:RequiredFieldValidator ID="rfvKVWest" ValidationGroup="UpdateBBG" runat="server"
                           ControlToValidate="tbKVWest" ErrorMessage="Bitte KVWest als Summe angeben"
                           SetFocusOnError="true">*</asp:RequiredFieldValidator> 
                      <asp:RegularExpressionValidator ID="revKVWest" ValidationGroup="UpdateBBG" runat="server"
                           ValidationExpression="^[0-9]{1,9}((\,)[0-9]{1,2})?$" ControlToValidate="tbKVWest" SetFocusOnError="true">*</asp:RegularExpressionValidator>
              </EditItemTemplate>
              <ItemTemplate>
                  <%# Eval("KVWestFormatted")%>
              </ItemTemplate>
        </asp:TemplateField>
....
      </Columns>
          <EmptyDataTemplate>Keine Daten vorhanden</EmptyDataTemplate>
  </asp:GridView>
      <p>
            <asp:ValidationSummary ID="vsUpdate3" runat="server" ShowMessageBox="true" ShowSummary="true" ValidationGroup="UpdateBBG" Font-Bold="true" ForeColor="Red" 
                 EnableClientScript="true" Enabled="true" HeaderText="Validierung..." />
      </p> 
```

如果你们能在这里帮助我，那就太好了。我不太确定问题是什么......也许是更新面板？也许我犯了一些愚蠢的错误..？我比较无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:53:16.127

您的按钮验证组已更新，但所有其他按钮都具有验证组 updatebbg，因此将您的按钮的验证组更改为 updatebbg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:45:59.227

发现问题.. 我必须为RequiredFieldValidator 和RegularExpressionValidator 设置错误消息。;) 顺便说一句，您不需要文本框内的验证组。

# sql - Postgres SQL 在同一张表上左外连接

> ID：15518801
> 
> 赞同：1
> 
> 时间：2013-03-20T08:42:36.123
> 
> 标签：sql, postgresql

我有这样的疑问：

```
SELECT c.name, i.name FROM inv_invoice_items c 
LEFT OUTER JOIN inv_invoice_items i ON i.name = c.name
WHERE c.id_invoice = 2108 AND i.id_invoice = (SELECT id_invoice FROM inv_invoices WHERE id =   2108) 
```

对于这个查询，我有这样的结果：

```
name  | name
-------------
pen   | pen 
```

但是对于没有加入的选择：

```
SELECT c.name FROM inv_invoice_items c
WHERE c.id_invoice = 2108 
```

结果是：

```
name
------
pen
pencil 
```

第二个查询：

```
SELECT i.name FROM inv_invoice_items i
WHERE i.id_invoice = (SELECT id_invoice FROM inv_invoices WHERE id = 2108) 
```

给出结果：

```
name
------
pen 
```

我希望我的第一个连接查询结果：

```
name   | name
---------------
pen    | pen
pencil | NULL 
```

如何达到这样的结果？我认为这种方式应该可以使用 LEFT OUTER JOIN。感谢您提前提出任何建议。

附言。我需要发现更正和更正（相关）发票的发票项目的差异。

一些样本数据：

```
create table inv_invoices (id bigint, id_invoice bigint, primary key(id));
create table inv_invoice_items (id bigint, id_invoice bigint NOT NULL, name character varying(100) NOT NULL, primary key (id));
insert into inv_invoices values (2105, NULL), (2106, NULL), (2107, NULL), (2108, 2106);
insert into inv_invoice_items values (1000, 2105, 'pen'), (1001, 2105, 'pencil'), (1002,2106, 'pen'), (1003, 2107, 'rubber'), 
(1004, 2107, 'pencil'), (1005, 2108, 'pen'), (1006, 2108, 'pencil'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:44:58.740

~~试试这个：~~

 ~~```
SELECT DISTINCT c.name, i.name 
FROM inv_invoice_items            AS c 
LEFT OUTER JOIN inv_invoice_items AS i   ON i.name       = c.name 
                                        AND c.id_invoice = 2108
LEFT OUTER JOIN inv_invoices      AS i2  ON i.id_invoice = i2.id_invoice 
                                        AND i2.id        = 2108; 
```~~  ~~* * *

试试这个：

```
SELECT
  t.name AS name1,
  v.name AS name2
FROM
(
  SELECT c.name 
  FROM inv_invoice_items c
  WHERE c.id_invoice = 2108
) AS t
LEFT JOIN
(
  SELECT i.name 
  FROM inv_invoice_items i
  WHERE i.id_invoice = (SELECT id_invoice 
                        FROM inv_invoices 
                        WHERE id = 2108)
) AS v ON t.name = v.name; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!10/29e5b/12)

这会给你：

```
|  NAME1 |  NAME2 |
-------------------
|    pen |    pen |
| pencil | (null) | 
```~~

# perl - WWW::Mechanize::Firefox 单击或从选择中选择一个选项？

> ID：15518808
> 
> 赞同：1
> 
> 时间：2013-03-20T08:42:50.460
> 
> 标签：perl, web-scraping, www-mechanize, www-mechanize-firefox

如何在`select`using中单击或选择一个选项`WWW::Mechanize::Firefox`。在这种情况下，`select`它在 a 内。`form`

代码如下：

```
<form name="formo">
<select class="selectc" onchange="go()" name="selecto">
<option value="">Option 1</option>
<option value="">Option 2</option>
<option value="?place1">Option 3</option>
<option value="?place2">Option 4</option> 
```

例如，我想单击选项 3 转到 place1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:14:02.373

你必须`$mech->select`像这样使用：

```
$mech->select( 'selecto', '?place1' ); 
```

第一个参数是`select`元素的名称，第二个是要设置的值。该值必须是 中的`option`s之一`select`。有关更多信息，请参阅[文档](https://metacpan.org/module/WWW%3a%3aMechanize%3a%3aFirefox#mech-select-name-value)。

# .net - 将数据时间值从 ASP.NET gridview 插入 SQL Server 数据表

> ID：15518812
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:10.317
> 
> 标签：.net, datetime, gridview, sql-date-functions, sql-types

我在 ASP.NET gridview 中有一个列，它在页面加载时以这种格式（dd/mm/yyyy 00:00:00）显示日期值。这绑定到具有声明为“日期”类型的列的 SQL 表。

在页脚模板中，gridview 的各个列中有一个“插入”按钮以及文本框。单击按钮后，新记录应插入到 SQL 服务器数据表中。

但是，有一个调试错误，错误提示： **SQLException is unhandled by usercode。从字符串转换日期和/或时间时转换失败**

这是此方法的代码：

```
protected void insertRowToDOitems(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Add")
        {
            string strDO_no = ((TextBox)GridView1.FooterRow.FindControl("txtdo_no")).Text;
            string strDO_item_no = ((TextBox)GridView1.FooterRow.FindControl("txtdo_item_no")).Text;
            string strMaterial = ((TextBox)GridView1.FooterRow.FindControl("txtmaterial")).Text;
            string strDeliveryQty = ((TextBox)GridView1.FooterRow.FindControl("txtdelivery_qty")).Text;
            string strSO_no = ((TextBox)GridView1.FooterRow.FindControl("txtso_no")).Text;
            string strSOItem_no = ((TextBox)GridView1.FooterRow.FindControl("txtso_item_no")).Text;
            string strUOM = ((TextBox)GridView1.FooterRow.FindControl("txtuom")).Text;
            string strDeliveryDate = ((TextBox)GridView1.FooterRow.FindControl("txtDelivery_date")).Text;

            //SQLDataSource parameters
            DOitem.InsertParameters.Clear();
            DOitem.InsertParameters.Add("do_no", strDO_no);
            DOitem.InsertParameters.Add("do_item_no", strDO_item_no);
            DOitem.InsertParameters.Add("material", strMaterial);
            DOitem.InsertParameters.Add("delivery_qty", strDeliveryQty);
            DOitem.InsertParameters.Add("so_no", strSO_no);
            DOitem.InsertParameters.Add("so_item_no", strSOItem_no);
            DOitem.InsertParameters.Add("uom", strUOM);
            DOitem.InsertParameters.Add("delivery_date", strDeliveryDate);

            DOitem.Insert();
        }
    } 
```

这个方法是从 GridView 标签中调用的：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="do_no,do_item_no" DataSourceID="DOitem" CellPadding="4" 
                    GridLines="None" 
                    AllowSorting="True" ShowFooter="True" style="margin-top: 1px" 
                    ForeColor="#333333" Height="58px" Width="546px" OnRowCommand="insertRowToDOitems"> 
```

如果错误是由于日期格式或类型的不同，如何解决？

另外，如何在 gridview 中显示从 SQL 表中检索到的日期（“dd/MM/yyyy”）？我尝试了以下方法，但它不起作用：

```
<EditItemTemplate>
                            <asp:TextBox ID="txtDelivery_date" runat="server"
                                         Text='<%#Bind("delivery_date", "{0:dd/MM/yyyy}") %>'>
                            </asp:TextBox>
                        </EditItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:15:38.380

是的，这可能是一个日期格式问题，例如如果您在前端使用英国时间格式并且 SQL 服务器可能使用美国日期格式，则会出现插入错误。我总是在代码中坚持使用 ISO 通用格式的日期字符串以避免这些问题，所以我会更改这一行：

```
DOitem.InsertParameters.Add("delivery_date", strDeliveryDate); 
```

对此

```
DOitem.InsertParameters.Add("delivery_date", DateTime.Parse(strDeliveryDate).ToString("s")); 
```

“s”将时间转换为如下格式：2013-03-12T21:15:07

抱歉，我不明白 EditTemplate 中的问题，该代码对我来说看起来不错。

# python - 版本 1.7.6 运行 dev_appserver 时 sanbox.py 的第 890 行导入错误

> ID：15518814
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:19.077
> 
> 标签：python, google-app-engine

我正在运行一些困难的 gettung 1.7.6。收到以下错误：

```
INFO     2013-03-20 08:39:10,233 admin_server.py:117] Starting admin server at: http://localhost:8086
ERROR    2013-03-20 08:39:13,768 wsgi.py:219] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 196, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/lib_config.py", line 353, in __getattr__
    self._update_configs()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/lib_config.py", line 289, in _update_configs
    self._registry.initialize()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/lib_config.py", line 164, in initialize
    import_func(self._modname)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py", line 890, in load_module
    raise ImportError
ImportError 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:12:18.333

我有同样的问题。我在 appengine 问题跟踪器中提出了一个问题：

[https://code.google.com/p/googleappengine/issues/detail?id=9008&sort=-id&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log](https://code.google.com/p/googleappengine/issues/detail?id=9008&sort=-id&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)

问题似乎是项目目录中的旧 pyc 文件。我删除了它们：

寻找 。-name "*.pyc" -exec rm -rf {} \;

重新启动服务器后，问题已为我解决。

如果这没有帮助，您可以使用旧的开发服务器：运行“old_dev_appserver.py”。+ 您现在需要的任何参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:05:28.710

在这里我决定了一些启动问题，删除项目并添加一个现有项目。我做到了，我的应用程序又正常启动了。

# c++ - 我应该对类中的所有值使用 setValues 吗？

> ID：15518815
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:19.387
> 
> 标签：c++, class, object, construction

在面向对象编程中，使用构造函数或使用 setValues 之类的方法之间是否存在差异。我不应该使用 setValues 方法吗？

```
class Controller{
public:
    Controller();
    Controller(int,int);
    setControllerValues(int,int);
private:
    int transactionValue;
    int transactionId;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:44:55.617

您应该始终使用**[成员初始化器列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**来初始化您的类成员。

请注意，我说的是***initialize***，这意味着在构造时提供一个值。除非您这样做，否则这些成员具有 Indeterminate 值，直到您显式调用该`set`方法以显式设置具有特定值的成员。

> **`setValues`使用构造函数或使用类似方法之间是否存在差异。**

是，有一点不同。C++ 为您提供了***初始化***类成员的机会，这是通过成员初始化器列表。如果您不在成员初始化器列表中初始化成员，则成员保持未初始化状态，即它们具有 Indeterminate 值。人们永远不会希望成员的状态是不确定的。

当您使用 set 方法时，您实际上是在***分配***而不是初始化成员。两者有区别：

```
Cost Member Initialization = Object Construction 
Cost of Member Assignment = Object Construction + Assignment 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:51:07.970

这是一个非常广泛的问题，答案会因上下文而异。你总是想在构造时初始化你的值，看起来你想提供合理的默认值，你可以用*一个*构造函数来做到这一点。这将节省您构建对象并随后设置值的时间。

如果您想在对象生命周期的后期设置您的值，您将需要“setter”。您可能更喜欢单独的“setter”而不是一个组合的 setter，以单独调整它们。

这是一些示例代码：

```
class Controller{
public:
    Controller(int value = SOME_SENSIBLE_DEFAULT,
               int id = SOME_OTHER_SENSIBLE_DEFAULT)
        :transactionValue(value)
        ,transactionId(id)
    {
    }

    void set_transaction_value(int value)
    {
        transactionValue = value;
    }

    void set_transaction_id(int id)
    {
        transactionid = id;
    }

private:
    int transactionValue;
    int transactionId;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:52:28.997

构造函数是类中的一个方法，它在创建对象时被执行。通常，我们将初始化代码放在构造函数中。在类中编写构造函数非常简单，请看以下示例：

```
public class Test
{
    public Test()
    {
        // Initialize code in the constructor.
    }
} 
```

*   构造函数不返回任何值。
*   引用和指针不能用于构造函数和析构函数，因为它们的地址不能被获取。
*   构造函数不能用关键字 virtual 声明。
*   如果构造函数被定义为私有的，我们就不能创建该类的实例。

方法：

*   在方法中，我们可以定义变量。这些变量的范围仅在方法内。
*   如果您声明一个公共变量，它将在所有方法中被访问。
*   方法可能/可能不包含返回类型。
*   方法可以在派生类中继承（注意方法应该是公共的）。

# c - 组装 ac 字符串并通过引用返回它（使用 malloc 和 string.h 函数）

> ID：15518816
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:27.647
> 
> 标签：c, string, http, malloc, strcat

我想组装某种 HTTP 标头（它只是我正在做的一个有趣的项目）。但我的问题更多是关于如何在 C 中做到这一点。我有一个这样的函数：

```
void assembleResponse(char **response, const unsigned short code, const unsigned long length, const char *contentType)
{
    char *status;
    char *server = {"Server: httpdtest\r\n"};
    char *content = malloc(17 + strlen(contentType));
    char *connection = {"Connection: close"};

    printf("AA");

    strcpy(content, "Content-type: ");
    strcat(content, contentType);
    strcat(content, "\r\n");

    printf("BB");

    switch (code)
    {
    case 200:
       //200 Ok
       status = malloc(sizeof(char) * 18);
       //snprintf(status, 17, "HTTP/1.1 200 Ok\r\n");
       strcpy(status, "HTTP/1.1 200 Ok\r\n");
       break;
    }

    printf("CC");

    unsigned int len = 0;
    len += strlen(status);
    len += strlen(server);
    len += strlen(content);
    len += strlen(connection);

    printf("DD");

    response = malloc(sizeof(char) * (len + 5));
    strcpy(*response, status);
    strcat(*response, server);
    strcat(*response, content);
    strcat(*response, connection);
    strcat(*response, "\r\n\r\n");

    printf("EE");
} 
```

在主要的某个地方，我想做出这样的回应：

```
char *resp;
assembleResponse(&resp, 200, 500, "text/html");
printf("assembled response: %s", resp); 
```

但我不太明白:) 我如何分配字符串并将内容插入其中似乎存在很多问题。我得到了“BB”标志，但进一步得到：

```
malloc: *** error for object 0x104b10e88: incorrect checksum for freed object - object was probably modified after being freed. 
```

我做错了什么以及如何解决？我熟悉`malloc`类似 C 的函数，但显然不是它们的专家。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:47:27.010

问题似乎在这里：

```
response = malloc(sizeof(char) * (len + 5)); 
```

`char*`在这种情况下，您正在分配一个大小不正确的数组。

你应该做：

```
*response = malloc(sizeof(char) * (len + 5)); 
```

为了分配一个数组`char`。

# binding - 淘汰赛延期评估

> ID：15518819
> 
> 赞同：-1
> 
> 时间：2013-03-20T08:43:41.550
> 
> 标签：binding, knockout.js

考虑以下代码：

```
 self.IsVisible = ko.computed({
        read: function () {
             //some logic goes here
            }

            return true;
        },
        deferEvaluation: true
    }, this); 
```

我的问题是，尽管 deferEvaluation 选项设置为 true，但在我第一次创建 viewModel 时会到达 IsVisible 中的代码。我希望只有在 IsVisible 绑定实际上在某处完成时才能访问此代码......

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:34:54.680

没有 jsFiddle 可以查看，我[创建了一个](http://jsfiddle.net/manzanotti/gPs5c/2/)，它的工作方式与我在 IE9 中的预期完全一样，而且它似乎可以在 Chrome 中工作。当您在 Chrome 中命中断点时，您确定这`applyBindings`不是调用堆栈吗？

# python - 如何从文件中解析 Python 模块

> ID：15518820
> 
> 赞同：7
> 
> 时间：2013-03-20T08:43:45.657
> 
> 标签：python, parsing

我看到了[这个 SO question](https://stackoverflow.com/questions/4650110/parse-python-file-and-evaluate-selected-functions)并尝试通过使用`.py`2 种方法创建一个文件并尝试读取它来使用它。
文件：

```
def f1(a):
    print "hello", a
    return 1

def f2(a,b):
    print "hello",a,", hello",b 
```

试图阅读它：

```
>>> r = open('ToParse.py','r')
>>> t = ast.parse(r.read) 
```

抛出异常：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python26\lib\ast.py", line 37, in parse
    return compile(expr, filename, mode, PyCF_ONLY_AST)
TypeError: expected a readable buffer object 
```

我究竟做错了什么？
**我的目标**是获取一个`python`模块并能够使用它来解析它`Python`- 公开它的类和方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T08:59:03.297

你需要打电话`read`。所以你的线

```
t = ast.parse(r.read) 
```

应该

```
t = ast.parse(r.read()) 
```

有关文件的信息，请参见[此处](http://docs.python.org/2/library/stdtypes.html#file.read)，有关 ast.parse 的信息请参见[此处](http://docs.python.org/2/library/ast.html#ast.parse)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T08:52:31.537

采用：

```
t = ast.parse(r.read()) # () is needed 
```

来源：[http ://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T09:00:57.250

如果你想动态地公开你的类和方法，那么你可能需要使用[eval](http://docs.python.org/2/library/functions.html#eval)和[compile](http://docs.python.org/2/library/functions.html#compile)。

在这种情况下，您可以这样做。

创建一个文件：

```
#test.py
def hello():
    print "hello" 
```

你可以这样称呼它：

```
#main.py
testContent = open("test.py").read()
#evaluate a content
eval(compile(testContent, "<string>", 'exec'))
#call function
hello() #prints hello 
```

**编辑**：还有另一种评估文件的方法：

```
#main.py
#evaluate a content
eval(compile("import test", "<string>", 'exec')) #test.py
#check list of methods
dir(test) # ['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'hello']
#call function
hello() #prints hello 
```

*我确实意识到，这`eval`可能不是那么好的选择，但我不知道其他方式。我很高兴看到其他解决方案*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T08:58:19.723

您正在尝试解析文件上读取的函数。

你要

```
t = ast.parse(r.read()) 
```

或（更紧密地遵循示例）

```
text = r.read()
ast.parse(text) 
```

不是

```
t = ast.parse(r.read) 
```

# c++ - 未使用的变量“类”[-Wunused-variable] - 错误/警告

> ID：15518821
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:46.003
> 
> 标签：c++, sdl

我有这个使用 SDL 的 C++ 项目。

我在编译时遇到这个错误，我不知道如何解决它。

它说：

```
Source/Classes/game.cpp:15:15: advarsel(this means 'warning' in danish): unused variable 'imagemanager' [-Wunused-variable] 
```

但 imagemanager 是一个类？这是导致错误的行：

```
Imagemanager imagemanager; // Init's class Imagemanager 
```

它位于文件“game.cpp”的第 15 行

这是“图像管理器”；

```
class Imagemanager
{
friend class Player;
private:

public:
SDL_Surface* load_image( std::string filename ); // Loads images

//Apply a surface to another. Often used for applying surface to display
int apply_surface( int x, int y, SDL_Surface* source, SDL_Surface* destination, SDL_Rect* clip );
}; 
```

这是在不同的文件中定义的，但已正确包含。

编辑：忘了说我正在使用这个类，但是编译器说当我使用它时它没有定义我在这里使用 imagemanager：

```
surface = imagemanager.load_image("player.png";); 
```

这是在另一个名为

```
Player 
```

并初始化为

```
player 
```

类（imagemanager 和 player）都在 Game 类的构造函数中初始化，游戏在 main 中初始化。我在播放器中使用 imagemanager 并计划在其他地方也使用它。主文件：

```
#include <windows.h>
#include <string>

#include "SDL/SDL.h"
#include "SDL/SDL_image.h"

#include "Classes/game.cpp"

int main( int argc, char* args[] ) 
{
    Game game;
    game.initialize(); // Initializes the rest of game
    game.go(); // Starts the game
    return 0; // Ends the program
} 
```

Game.cpp的构造函数+头文件：

```
#ifndef _GAME_
#define _GAME_
#include "imagemanager.cpp"
#include "player.cpp"
#include "timer.cpp"
#include "game.h"

Game::Game()
{
    screenDimension.w = 940; // Width  of the initialized window
    screenDimension.h = 540; // Height of the initialized window
    useFrameCap = true; // Tells the frame cap wether to activate or not
    quitGame = false; // Tells the main loop to quit if true
        FPS = 60; // Frames per second. Used by the frame cap.
    Imagemanager imagemanager; // Inits class Imagemanager
    Player player; // Inits class Player
    Timer timer; // Inits class Timer
    Game game; // Inits class Game
} 
```

稍后在“game.go()”中，我调用函数“player.render()”，然后调用“player.update()”：

```
if ( RunJumpF )
    {
        RunJumpF = player.jump();
    } 
```

RunJumpF 在按下右或想要在下一个滴答时运行时变为真

在所有其他事情的计算之后，我称之为：

```
player.update(); 
```

我的带有实际功能的 player.cpp 文件如下所示：

```
#ifndef __PLAYER__
#define __PLAYER__
#include <string>
#include "player.h"

Player::Player()
{
    surface = imagemanager.load_image("player.png";); // Loads the player tile and saves into the surface 'surface'
    if (surface == NULL) // in case something went wrong in loading the player, tell the user
    {
        SDL_WM_SetCaption("ERROR LOADING PLAYER!", NULL); // I know there are better ways to do this but i'll look at that later
    }
    needsUpdate = true;
}

bool Player::jump()
{
    move.x = move.x + 3; // Moves the player X pixels right, next time the player updates
    needsUpdate = true; // Tells the program to update the player

    return true; // Tells the program that this function isn't done and it will be run next tick
}

int Player::update()
{
    if ( needsUpdate )
    {
        pos.x = pos.x + move.x;
        pos.y = pos.y + move.y;
        move.x = 0;
        move.y = 0;
        render(); // This calculates the position of the player and blits the player to the display
        return 1; // If no errors were discovered return 1;
    } else {
        render();
        return -1; // If no need to update, returns -1
    }
}

bool Player::render()
{
        if (SDL_BlitSurface( surface, NULL, display, pos ) != 0)
        {
            SDL_WM_SetCaption("ERROR BLITTING PLAYER!", NULL); // Tells the user that shit gone wrong
            return false;
        }
        return true
}
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:45:18.523

这是警告，而不是错误。由于您不使用您的`imagemanager`对象而只声明它 - 您会收到此警告。您可以使用例如 `(void)imagemanager;`，或真正使用此对象（不要注意此警告，直到您开发应用程序）并且警告将消失。

编辑：如何向我们展示这个对象的用法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:45:28.430

`imagemanager`是类型的变量（对象）`Imagemanager`。

所以，警告是正确的。`imagemanager`在您的代码中某处使用，或删除该行。

另请注意，C++ 区分大小写，因此`Imagemanager`和之间存在差异`imagemanager`。

一个是代码中的类，另一个是该类型的对象。

# github - 我可以撤消仅安装了 tortoisehg 和 hg-git 的最后一次推送到 github 的提交吗？

> ID：15518822
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:48.273
> 
> 标签：github, mercurial, hg-git

我似乎找不到办法做到这一点。我试过例如：

```
hg push -f git+ssh://git@github.com:greatwolf/testrepo.git 
```

但它只会中止：

> abort：服务器上的 refs/heads/master 已更改，请在推送前拉取并合并

通过 github web 界面查看，似乎没有`strip`像 bitbucket 中的任何命令。如何在不需要在我的工作机器上安装 git 客户端的情况下核对最后提交的变更集？

现在我正在考虑的解决方案是从 github 上删除 repo，重新制作它，然后将我的本地 repo 推上去。这会起作用，但它更像是一种“蛮力”的方法，所以我认为它是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:16:01.977

您*可以*尝试摆弄本地仓库中的书签。如果您更改主书签以指向正确的 cset，hg-git 可能足够聪明，可以将该更改传播到 git 端 refs。否则，我认为这对 hg-git 的要求有点过分，所以你很可能不得不恢复到你的蛮力方法。

# jquery - jQuery 中的缓动选项不起作用

> ID：15518823
> 
> 赞同：0
> 
> 时间：2013-03-20T08:43:48.987
> 
> 标签：jquery, jquery-easing

我曾多次尝试使用缓动用于教育目的，但徒劳无功，我的尝试从未成功，肯定我做错了什么，但两天以来我无法识别错误，所以我在这里包含我的 jQuery 函数，希望你能告诉我在哪里问题。

附加代码的结果只是隐藏而不是动画

```
$(document).ready(function()
{
    $('#hide').click(
        function()
        {
            $('p').toggle(
            function()
            {
                $('p').animate({'padding':'=+150px'},3000,'swing')
            },
            function()
            {
                $('p').animate({'padding':'=-150px'},3000,'linear')
            }
            );
        }
    )
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:05:36.760

我删除了对已弃用形式的调用，`toggle`将其替换为简单的布尔值。另请注意，`padding`应设置为 like`-=150px`而不是`=-150px`.

```
var toggle = true;
$(document).ready(function()
{
    $('#hide').click(
        function()
        {
            if(toggle){
                $('p').animate({'padding':'+=150px'},3000,'swing');
                toggle = false;
            }else{
                $('p').animate({'padding':'-=150px'},3000,'linear');
                toggle = true;
            }
        }
    )
}); 
```

**工作示例：http:** [//jsfiddle.net/nBzCL/](http://jsfiddle.net/nBzCL/)

# jquery - 如何禁用下拉菜单？

> ID：15518825
> 
> 赞同：1
> 
> 时间：2013-03-20T08:44:00.363
> 
> 标签：jquery, html, css, jquery-mobile, ios6

我正在为iOS应用程序使用JqueryMobile-1.3.0和cordova-2.1.0。我想动态禁用下拉菜单怎么做？我正在这样做 `$('#assignedToDropDown').attr('disabled', true);` 使用它会变成禁用，但它看起来像活动元素意味着禁用元素 css 没有得到应用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:45:15.553

```
$('select').selectmenu('disable'); 
```

在此处阅读更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html)

工作示例：http: [//jsfiddle.net/Gajotres/dEXac/](http://jsfiddle.net/Gajotres/dEXac/)

# ruby - 如何使用 Ruby Graph Library 在运行时在 ruby 中添加顶点？

> ID：15518826
> 
> 赞同：0
> 
> 时间：2013-03-20T08:44:02.603
> 
> 标签：ruby, ruby-rgl

我使用以下代码创建了一个图表。

如何在运行时+添加顶点？

```
require 'rgl/adjacency'
dg = RGL::DirectedAdjacencyGraph[1,2,3,4,5,6,7]
dg.edges 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:25:52.727

你可以直接使用

```
dg.add_vertex 8 
```

检查它

```
dg.vertices 
```

但是，如果您想查看边中的顶点，则需要将其与另一个顶点链接您需要这样做。

```
dg.add_edge(7,8) 
```

**在您的情况下，图表有点不平衡。**

初始化后，这就是你得到的

```
[(1-2), (3-4), (5-6), (7-)] 
```

所有相邻的顶点对形成一条边。

其中顶点 7 与 nil 形成一条边。

删除它

```
dg.remove_edge(7,nil) 
```

请阅读[手册](http://rgl.rubyforge.org/rgl/classes/RGL/DirectedAdjacencyGraph.html)

# c# - 如何在asp.net 2012中给出相对路径

> ID：15518830
> 
> 赞同：2
> 
> 时间：2013-03-20T08:44:10.033
> 
> 标签：c#, asp.net

我使用解决方案资源管理器创建了一个新文件夹，例如 XML。我已经添加了文件，其中包含`xml`和。如何通过提供相对路径来获取这些文件？`xsl``a.xsl``b.xml`

例子：`transform.Load("~/XML/a.xsl"); //load up the stylesheet`

但是我在这里收到错误，找不到该文件。当我调试时，它会尝试从以下路径获取文件

```
C:\Program Files\IIS Express\~\XML\PersonnelHTML.xsl'. 
```

请提出解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:46:39.550

通常这是使用解决的

[Server.MapPath(路径)](http://msdn.microsoft.com/en-us/library/ms524632%28v=VS.90%29.aspx)

所以在您的示例中（假设 XML 文件夹位于您网站的根级别）将是

```
transform.Load(Server.MapPath("/XML/a.xsl")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:46:55.370

[在Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)的帮助下试试这个：

```
 transform.Load(Server.MapPath("~/XML/a.xsl")); 
```

# java - How to validate URL in java using regex?

> ID：15518845
> 
> 赞同：11
> 
> 时间：2013-03-20T08:45:13.897
> 
> 标签：java, regex, validation

I want to validate url started with `http/https/www/ftp` and checks for `/\` slashes and checks for `.com`,`.org` etc at the end of URL using regular expression. Is there any regex patttern for URL validation?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T08:50:26.993

This works:

```
Pattern p = Pattern.compile("(@)?(href=')?(HREF=')?(HREF=\")?(href=\")?(http://)?[a-zA-Z_0-9\\-]+(\\.\\w[a-zA-Z_0-9\\-]+)+(/[#&\\n\\-=?\\+\\%/\\.\\w]+)?");  

    Matcher m = p.matcher("your url here"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T08:47:54.170

I am use the following code for that

```
String lRegex = "^(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]"; 
```

btw a search in google and you would find the solution by yourself.

# java - 如何使用 JAXB 修改 XML 元素？

> ID：15518850
> 
> 赞同：2
> 
> 时间：2013-03-20T08:45:28.680
> 
> 标签：java, jaxb, jax-rs

我有一个由 JAXB 生成的 XML。请参阅下面的 XML 文件

```
<config>
 <instance>
      <hostName>192.168.2.98</hostName>
      <port>444</port>
 </instance>
 <instance>
      <hostName>192.168.3.2</hostName>
      <port>3333</port>
 </instance>
 <instance>
      <hostName>192.168.1.168</hostName>
      <port>168</port>
 </instance>
</config> 
```

现在，我的计划是按照以下步骤修改 XML：

1.  第一个“实例”元素端口值
2.  第二个“实例”元素主机名值
3.  第三个“实例”元素端口和主机名值

结果应该是这样的

```
<config>
 <instance>
      <hostName>192.168.2.98</hostName>
      <port>555</port>
 </instance>
 <instance>
      <hostName>192.168.3.140</hostName>
      <port>3333</port>
 </instance>
 <instance>
      <hostName>192.168.1.130</hostName>
      <port>8181</port>
 </instance>
</config> 
```

如何使用 JAXB 做到这一点？我应该将其 umnmarshall 到**JAXBElement**并将其传递给**Binder**吗？

仅供参考，我使用 HTML 表单通过**JAX-RS**修改 XML 文件。下面的资源发布方法仅适用于创建新实例，但不适用于修改/更新元素值

```
@POST
@Path("/modhost")
@Consumes({ MediaType.APPLICATION_FORM_URLENCODED,
        MediaType.APPLICATION_JSON })
@Produces(MediaType.APPLICATION_JSON)
public void modInstance(@FormParam("host") String hostX,
        @FormParam("port") String portX) {

    this.host = hostX;
    this.port = portX;

    try {

        String env = System.getenv("APP_HOME");

        String tesfile = env+"/tes2.xml";
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        File filex = new File(tesfile);
        Document document = db.parse(filex);

        JAXBContext jc = JAXBContext.newInstance(Config.class);

        Binder<Node> binder = jc.createBinder();
        Config config= (Config) binder.unmarshal(document);
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        List<Instance> instList = new ArrayList<Instance>();
        Instance inst = new Instance();
        inst.setHostName(host);
        inst.setPort(port);

        instList.add(inst);

        config.getInstance().addAll(instList);
        binder.updateXML(config);

        TransformerFactory tf = TransformerFactory.newInstance();
        StreamResult result = new StreamResult(filex);
        Transformer t = tf.newTransformer();
        t.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "5");
        t.setOutputProperty(OutputKeys.INDENT, "yes");
        t.transform(new DOMSource(document), result);
    } catch (TransformerConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JAXBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TransformerFactoryConfigurationError e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TransformerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

这里是 JAXB 类**Config**和**Instance**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = { "instances"})
@XmlRootElement(name = "config")
public class Config{

    @XmlElement(required = true)
    protected List<Instance> instance;

    public List<Instance> getInstance() {
      if (instance == null) {
          instance = new ArrayList<Instance>();
      }
    return this.instance;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = { "hostName", "port"})
@XmlRootElement(name = "instance")
public class Instances {

   @XmlElement(required = true)
   protected String hostName;
   @XmlElement(required = true)
   protected String port;

   public String getHostName() {
      return hostName;
   }

    public void setHostName(String value) {
       this.hostName = value;
   }

    public String getPort() {
      return port;
   }

   public void setPort(String value) {
      this.port = value;
   }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:05:46.713

我认为这应该有效

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Config {
    @XmlElement(name="instance", required = true)
    protected List<Instance> instances;

    public List<Instance> getInstances() {
        return instances;
    }
}

@XmlAccessorType(XmlAccessType.FIELD)
class Instance {
    protected String hostName;
    protected String port;

    public String getHostName() {
        return hostName;
    }

    public void setHostName(String value) {
        this.hostName = value;
    }

    public String getPort() {
        return port;
    }

    public void setPort(String value) {
        this.port = value;
    }
}

public static void main(String[] args) throws Exception {
    JAXBContext jc = JAXBContext.newInstance(Config.class);
    Config config = (Config)jc.createUnmarshaller().unmarshal(new File("1.xml"));
    List<Instances> list = config.getInstances();
    list.get(0).setPort(555);
    list.get(1).setHostName("192.168.3.140");
    list.get(2).setPort(168);
    list.get(2).setHostName("192.168.1.168");

    Marshaller m = jc.createMarshaller();
    m.marshal(config,  filex); 
```

# android - 如何在 android 中查找第三方应用内容提供商 URI？

> ID：15518851
> 
> 赞同：2
> 
> 时间：2013-03-20T08:45:29.453
> 
> 标签：android, android-contentprovider

假设我已经安装了第三方应用程序并且我想访问该应用程序中的内容提供商。

我怎么知道 URI 的权限部分？

我的意思是我怎么知道开发人员在清单文件中为 android:authorities="" 为提供者分配了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:10:32.877

查看文档后，您可以使用以下方法获取设备上的内容提供程序：

[公共抽象列表 queryContentProviders (String processName, int uid, int flags)](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryContentProviders%28java.lang.String,%20int,%20int%29 "http://developer.android.com/reference/android/content/pm/PackageManager.html#queryContentProviders(java.lang.String, int, int)")

这意味着您获取了您正在寻找的应用程序的 processName/UID。

在此处了解更多信息：http: [//developer.android.com/reference/android/content/pm/PackageManager.html](http://developer.android.com/reference/android/content/pm/PackageManager.html)

# xslt - xsl 1.0，如果超过 2 个元素，则计算然后更改 css 类

> ID：15518852
> 
> 赞同：0
> 
> 时间：2013-03-20T08:45:32.503
> 
> 标签：xslt, xslt-1.0

数据来自服务器，通常是两行，但有时更多。所以我尝试让列表动态变化。

```
 <xsl:template match="Event">
        <ul class="lines">
            <xsl:apply-templates select="Line"/>
        </ul>
    </xsl:template>

<xsl:template match="Line">
        <li class="something">
            <a href="">
                <span class="result"><xsl:value-of select="@result"/></span>
                <span class="odds"><xsl:value-of select="@odds"/></span>
            </a>
        </li>
    </xsl:template> 
```

我必须计算“li”的数量，如果超过2，我必须更改“li”的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:03:15.140

像这样的东西怎么样：

```
 <xsl:template match="Event">
    <ul class="lines">
      <xsl:apply-templates select="Line"/>
    </ul>
  </xsl:template>

  <xsl:template match="Line" name="Line">
    <xsl:param name="classVal" select="'something'" />
    <li class="{$classVal}">
      <a href="">
        <span class="result">
          <xsl:value-of select="@result"/>
        </span>
        <span class="odds">
          <xsl:value-of select="@odds"/>
        </span>
      </a>
    </li>
  </xsl:template>

  <xsl:template match="Line[count(../Line) > 1]">
    <xsl:call-template name="Line">
      <xsl:with-param name="classVal" select="'somethingElse'" />
    </xsl:call-template>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:04:45.560

在模板匹配中，您可以使用函数访问this 中的元素`Line`总数（该函数返回由导致此模板触发的表达式确定的“当前节点列表”中最后一个节点的索引号，在此case 是特定) 的子集。`Line``Event``last()``select``apply-templates``Line``Event`

```
<li>
  <xsl:attribute name="class">
    <xsl:choose>
      <xsl:when test="last() &lt;= 2">something</xsl:when>
      <xsl:otherwise>somethingElse</xsl:otherwise>
    </xsl:choose>
  </xsl:attribute> 
```

# c++ - 为什么要取消定义引用？

> ID：15518859
> 
> 赞同：0
> 
> 时间：2013-03-20T08:46:10.120
> 
> 标签：c++, undefined-reference

在我的`test.cpp`我有：

```
#include <iostream>
#include "first.h"
using namespace std;

int main ()
{
    auto dliste = d::data_preparation::prepare_d(100);
    cout << "Hello World!\n";
    return 0;
} 
```

在我的`first.h`我有：

```
namespace d {
    namespace data_preparation {
        something;
        std::vector<row<mdata::dliste>> prepare_d(int f);
        something;
    }
} 
```

在我的`first.cpp`我有：

```
#include "first.h"
something;
namespace d {
    namespace data_preparation {
        vector<row<mdata::dliste>> prepare_d(int f) {
            vector<row<mdata::dliste>> dliste;
            cout << f << '\n';
            return dliste;
        }
    }
} 
```

当我编译这个时，我得到：

> 未定义对 `d::data_preparation::prepare_d(int)' 的引用

**已编辑**

在我的`Makefile`我有：

```
test: test.o
        $(CXX) -o $@ $(LDFLAGS) $^ $(LDLIBS) 
```

我应该以某种方式修改它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:52:08.867

您很可能忘记链接`first.cpp`到您的可执行文件。

只需运行以下命令（如果您使用的是 gcc）：

```
g++ -c first.cpp -o first.o
g++ -c test.cpp -o test.o
g++ test.o first.o 
```

或者只使用紧凑版本：

```
g++ first.cpp test.cpp -o app 
```

* * *

您应该按照以下方式编辑您的 Makefile：

```
app: test.o first.o
    $(CXX) $^ -o $@ $(LDFLAGS) $(LDLIBS)

test.o: test.cpp
    $(CXX) -c test.cpp -o first.o

first.o: first.cpp
    $(CXX) -c first.cpp -o first.o 
```

*注意：我被迫使用 4 个空格进行缩进，但 Makefile 可能需要制表符。*

# makefile - GNU make 和 nmake：具有多个值的计算名称

> ID：15518863
> 
> 赞同：0
> 
> 时间：2013-03-20T08:46:26.080
> 
> 标签：makefile, nmake, gnu-make

[GNU make 手册](http://www.gnu.org/software/make/manual/html_node/Computed-Names.html#Computed-Names)描述了计算名称的用法，如下所示：

```
VAR1 := 5
VARX := VAR1
$(info $((VARX))) 
```

输出：`5`

如何在内部使用具有多个值的计算名称？

```
VAR1 := 5
VAR2 := 7
VARY := VAR1 VAR2

$(info ???(VARY)) 
```

所以那个输出会是`5 7`？

NMake 有类似的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:20:42.700

对于 GNU 制作：

```
$(foreach item,$(VARY),$($(item))) 
```

# regex - 正则表达式匹配结束标记之前缺少的句点 (.)

> ID：15518870
> 
> 赞同：0
> 
> 时间：2013-03-20T08:46:41.873
> 
> 标签：regex

如何使用正则表达式匹配结束标记之前缺少的句点 (.)？

为了让自己清楚，这里有一个示例：

样品需要匹配：

```
1\. text</… ></tag> ---> Where </...> is any tag and can be multiple end tags

2\. text</tag> 
```

不需要匹配的正确样本：

```
1\. text.</...></tag>
2\. text.</tag> 
```

我想忽略这样的事情：

```
,</tag>   --> Where , can be any punctuation except period (.) 
```

或者

```
,</...></tag> 
```

我希望有人可以帮助我非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:57:25.213

只需简单地使用`[^\.]`. 这将匹配任何内容，但`.` 在您的情况下，您需要使用`[^\.>]</`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:50:48.220

这就是我对我的问题所做的：

```
([^.:;(or)(and)\!\)()>])(\</.*?\>)\</tag\> 
```

这将匹配 end 之前没有句点 (.) 的文本：

```
text</otherEndTag>...</tag> 
```

但是标点符号列表将被忽略：

```
: ; ! ) ( > , or , and 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:52:20.317

`[,;:]`*将匹配除*句点之外的任何标点符号。随意扩展（因为我不确定您是否想要撇号、引号、斜杠等字符）

您也可以通过使用`[^,;:]`, where`^`代表 NOT in the character set 来否定它。

请参阅[此内容](http://www.regular-expressions.info/reference.html)以供参考。

# actionscript-3 - 如何从公共类 Myclass 扩展 MovieClip 访问场景中的对象？

> ID：15518873
> 
> 赞同：0
> 
> 时间：2013-03-20T08:47:03.603
> 
> 标签：actionscript-3, flash, class, object, scene

当我在场景第一帧的主代码中时，我可以很好地访问 player.x 和 y 属性，但是从类 Enemy.as 我只能在构造中发送一次参数，但我没有不知道如何不断更新循环中的那些坐标。xb 和 yb 是我每次在场景中创建 Enemy 对象时作为参数发送的场景中玩家对象的坐标，但此方法只提供一次坐标。我想在每个循环中更新播放器对象的坐标，我该怎么做？我试过这条线： trace("this.parent.player.x") 但它不起作用。

```
 public function Enemy(xLocation:int, yLocation:int, xb, yb) {
        // constructor code
        x = xLocation;
        y = yLocation;
        addEventListener(Event.ENTER_FRAME, loop);
        xa = xb;
        ya = yb;
    }

    public function loop(e:Event):void {

            x -= xSpeedConst;
            trace(this.x);
            trace (xa + " " + ya);

    } 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:59:30.957

只需将您的播放器实例传入 Enemy 而不是坐标，然后将实例保存在 Enemy 中，例如：

```
public class Enemy{
  private var player:Player;

  public function Enemy(xLocation:int, yLocation:int, playerParam){
    player = playerParam;
  }
} 
```

现在在您的循环中，您应该能够通过以下方式访问玩家更新的 x 和 y 值： player.x 或 player.y 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:03:05.773

有几种方法可以解决这样的问题。我最喜欢的一个是创建一个包含所有对象的管理器类，无论是作为子对象还是其他结构、数组等。然后，为您想要了解其他实例的类提供指向管理器类的链接（或将其获取为`this.parent`，但这更容易出错），并调用其接口以获取您需要的任何信息。例如，`Tower`射击怪物的类，请求经理类在其范围内获取怪物以选择目标，或您的`Enemy`类搜索玩家。

# php - 在 wordpress 网站中导航时，网页内容有点移动

> ID：15518876
> 
> 赞同：0
> 
> 时间：2013-03-20T08:47:13.313
> 
> 标签：php, html, css, wordpress, html-parsing

我使用 wordpress 开发了一个网站，问题是在页面之间导航时，它似乎有点移动（导航栏和内容等）。即，如果内容在一个地方，它会在另一页中移动一点。

我试图找出问题所在。最后我找到了问题，但没有找到解决方案。

问题是，我正在为 wordpress 使用 pagelines 主题。[因为它在加载时使用来自http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold](http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold)的 droid sans它使用的是浏览器默认字体或我提到的备用字体。这是问题所在。不同的字体有不同的样式和空间等。这就是网页看起来有点移动的原因。

任何机构都可以请解释一下我该如何解决这个问题。

关于屏幕截图：因为，我们无法显示在我没有附加的屏幕截图中移动的内容。谁能告诉我会是什么问题以及如何解决它

所有这些都是我的假设，就像它发生在较小的页面内容一样，如果还有其他问题使它移动，请告诉我。

提前致谢

编辑：（css代码->动态.css）

```
/* Import Google Fonts */
@import url(http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold);

/* Set Type */
h1, h2, h3, h4, h5, h6, .site-title{font-family:"Droid Sans", "Lucida Grande", Tahoma, sans-serif;letter-spacing:0.05em;text-transform:uppercase;font-weight:normal;font-variant:normal;font-style:normal;}

body, .font1, .font-primary, .commentlist{font-family:"Droid Sans", "Lucida Grande", Tahoma, sans-serif;letter-spacing:-0.05em;text-transform:none;font-weight:normal;font-variant:normal;font-style:normal;}

.font2, .font-sub, ul.main-nav li a, #secondnav li a, .metabar, .subtext, .subhead, .widget-title, .post-comments, .reply a, .editpage, #pagination .wp-pagenavi, .post-edit-link, #wp-calendar caption, #wp-calendar thead th, .soapbox-links a, .fancybox, .standard-form .admin-links, #featurenav a, .pagelines-blink, .ftitle small{font-family:"Droid Sans", "Lucida Grande", Tahoma, sans-serif;letter-spacing:-0.05em;text-transform:uppercase;font-weight:normal;font-variant:normal;font-style:normal;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:00:42.037

“感谢您发布代码，

您发布的这段代码一切正常，

```
fiddle http://jsfiddle.net/MarmeeK/HPu7X/ 
```

请参考小提琴并更改您要检查的代码，然后更新并将其发回。

我还找不到任何更改。

==== 编辑

如果问题与特定选项卡有关，请查看选项卡样式，其`:hover`样式将引导您找到问题源.. :)"

=== 现场审核后编辑，

```
.sf-menu li:hover ul,
.sf-menu li.sfHover ul {
    left:           0;
    top:            34px; /* match top ul list item height */
    z-index:        99;
} 
```

现在，问题出在包含菜单规则的 OTHER CSS 文件中。

这适用于 vierd 对齐而不是相对位置。这`top: 34px`是一个不应该存在的怪异步骤......

您应该将每个`li:hover`代码与此类代码分开，因为这是使 TAB 移动的唯一原因。

`/*** ESSENTIAL STYLES ***/`

并且`Demo skin`不稳定......请逐步纠正它们，这样就可以了：）

```
Uppdated fillde : http://jsfiddle.net/MarmeeK/HPu7X/1/ 
```

我已尝试更新它，但不必要的 CSS 太多，请聘请一位专业人员来帮助

我不会回复太多，因为这花了我很多时间。谢谢你

# c - 尾递归究竟是如何工作的？

> ID：15518882
> 
> 赞同：125
> 
> 时间：2013-03-20T08:47:34.390
> 
> 标签：c, algorithm, recursion, tail-recursion

我几乎了解尾递归的工作原理以及它与普通递归之间的区别。我**只是**不明白为什么它**不需要**堆栈来记住它的返回地址。

```
// tail recursion
int fac_times (int n, int acc) {
    if (n == 0) return acc;
    else return fac_times(n - 1, acc * n);
}

int factorial (int n) {
    return fac_times (n, 1);
}

// normal recursion
int factorial (int n) {
    if (n == 0) return 1;
    else return n * factorial(n - 1);
} 
```

在尾递归函数中调用函数本身后无事可做，但这对我来说没有意义。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-03-20T09:11:50.690

编译器可以简单地转换这个

```
int fac_times (int n, int acc) {
    if (n == 0) return acc;
    else return fac_times(n - 1, acc * n);
} 
```

变成这样的东西：

```
int fac_times (int n, int acc) {
label:
    if (n == 0) return acc;
    acc *= n--;
    goto label;
} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-03-20T09:12:43.980

你问为什么“它不需要堆栈来记住它的返回地址”。

我想扭转这种局面。它*确实*使用堆栈来记住返回地址。诀窍是发生尾递归的函数在堆栈上有自己的返回地址，当它跳转到被调用函数时，它会将其视为自己的返回地址。

具体来说，没有尾调用优化：

```
f: ...
   CALL g
   RET
g:
   ...
   RET 
```

在这种情况下，当`g`被调用时，堆栈将如下所示：

```
 SP ->  Return address of "g"
          Return address of "f" 
```

另一方面，通过尾调用优化：

```
f: ...
   JUMP g
g:
   ...
   RET 
```

在这种情况下，当`g`被调用时，堆栈将如下所示：

```
 SP ->  Return address of "f" 
```

显然，当`g`返回时，它将返回到`f`调用的位置。

*编辑*：上面的示例使用一个函数调用另一个函数的情况。当函数调用自身时，机制是相同的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-20T09:12:30.350

尾递归通常可以由编译器转换为循环，尤其是在使用累加器时。

```
// tail recursion
int fac_times (int n, int acc = 1) {
    if (n == 0) return acc;
    else return fac_times(n - 1, acc * n);
} 
```

会编译成类似的东西

```
// accumulator
int fac_times (int n) {
    int acc = 1;
    while (n > 0) {
        acc *= n;
        n -= 1;
    }
    return acc;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-10-28T00:44:53.173

### 递归函数中必须存在两个元素：

1.  递归调用
2.  一个记录返回值的地方。

### “常规”递归函数将 (2) 保留在堆栈帧中。

常规递归函数中的返回值由两种类型的值组成：

*   其他返回值
*   拥有函数计算的结果

让我们看看你的例子：

```
int factorial (int n) {
    if (n == 0) return 1;
    else return n * factorial(n - 1);
} 
```

例如，框架 f(5) “存储”了它自己的计算结果 (5) 和 f(4) 的值。如果我调用阶乘（5），就在堆栈调用开始崩溃之前，我有：

```
 [Stack_f(5): return 5 * [Stack_f(4): 4 * [Stack_f(3): 3 * ... [1[1]] 
```

请注意，除了我提到的值之外，每个堆栈都存储函数的整个范围。因此，递归函数 f 的内存使用量为 O(x)，其中 x 是我必须进行的递归调用的数量。所以，如果我需要 1kb 的 RAM 来计算阶乘（1）或阶乘（2），我需要 ~100k 来计算阶乘（100），依此类推。

### 一个尾递归函数将 (2) 放入它的参数中。

在尾递归中，我使用参数将每个递归帧中的部分计算结果传递给下一个。让我们看看我们的阶乘示例，尾递归：

```
int factorial (int n) {
    int helper(int num, int accumulated)
        {
            if num == 0 return accumulated
            else return helper(num - 1, accumulated*num)
        }
    return helper(n, 1)    
} 
```

让我们看看它在阶乘（4）中的帧：

```
[Stack f(4, 5): Stack f(3, 20): [Stack f(2,60): [Stack f(1, 120): 120]]]] 
```

看到差异了吗？**在“常规”递归调用中，返回函数递归地组成最终值。在尾递归中，他们只引用基本情况（最后一个评估）**。我们称**accumulator**为跟踪旧值的参数。

## 递归模板

常规递归函数如下：

```
type regular(n)
    base_case
    computation
    return (result of computation) combined with (regular(n towards base case)) 
```

要将其转换为尾递归，我们：

*   引入一个携带累加器的辅助函数
*   在主函数中运行辅助函数，将累加器设置为基本情况。

看：

```
type tail(n):
    type helper(n, accumulator):
        if n == base case
            return accumulator
        computation
        accumulator = computation combined with accumulator
        return helper(n towards base case, accumulator)
    helper(n, base case) 
```

看到不同？

## 尾调用优化

由于尾调用堆栈的无边界情况没有存储任何状态，因此它们并不那么重要。一些语言/解释器然后用新堆栈替换旧堆栈。因此，由于没有限制调用次数的堆栈帧，尾调用在这些情况下**的行为就像一个 for 循环。**

由你的编译器来优化它，或者不。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-20T15:17:00.290

下面是一个简单的例子，展示了递归函数是如何工作的：

```
long f (long n)
{

    if (n == 0) // have we reached the bottom of the ocean ?
        return 0;

    // code executed in the descendence

    return f(n-1) + 1; // recurrence

    // code executed in the ascendence

} 
```

尾递归是一个简单的递归函数，在函数的末尾进行递归，因此没有代码按顺序完成，这有助于大多数高级编程语言的编译器进行所谓的[尾递归优化](http://en.wikipedia.org/wiki/Tail_call)，也有更复杂的优化称为[尾递归模](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-16T13:30:34.163

递归函数是一个**自己调用的函数**

它允许程序员使用**最少的代码**编写高效的程序。

**不利的一面是，如果编写不当**，它们可能**会导致无限循环**和其他意外结果。

 **我将解释**简单递归函数和尾递归函数**

为了写一个**简单的递归函数**

1.  **要考虑的第一点是什么时候应该决定退出 if 循环**
2.  **第二个是如果我们是自己的函数要做什么流程**

从给定的例子：

```
public static int fact(int n){
  if(n <=1)
     return 1;
  else 
     return n * fact(n-1);
} 
```

从上面的例子

```
if(n <=1)
     return 1; 
```

是何时退出循环的决定因素

```
else 
     return n * fact(n-1); 
```

是否要进行实际处理

让我一一分解任务以便于理解。

让我们看看如果我运行内部会发生什么`fact(4)`

1.  **代入 n=4**

```
public static int fact(4){
  if(4 <=1)
     return 1;
  else 
     return 4 * fact(4-1);
} 
```

`If`循环失败，所以它进入`else`循环，所以它返回`4 * fact(3)`

2.  在堆栈内存中，我们有`4 * fact(3)`

    **代入 n=3**

```
public static int fact(3){
  if(3 <=1)
     return 1;
  else 
     return 3 * fact(3-1);
} 
```

`If`循环失败，所以它进入`else`循环

所以它返回`3 * fact(2)`

记住我们调用了```4 * fact(3)`

输出为`fact(3) = 3 * fact(2)`

到目前为止，堆栈有`4 * fact(3) = 4 * 3 * fact(2)`

3.  在堆栈内存中，我们有`4 * 3 * fact(2)`

    **代入 n=2**

```
public static int fact(2){
  if(2 <=1)
     return 1;
  else 
     return 2 * fact(2-1);
} 
```

`If`循环失败，所以它进入`else`循环

所以它返回`2 * fact(1)`

记得我们打电话`4 * 3 * fact(2)`

输出为`fact(2) = 2 * fact(1)`

到目前为止，堆栈有`4 * 3 * fact(2) = 4 * 3 * 2 * fact(1)`

3.  在堆栈内存中，我们有`4 * 3 * 2 * fact(1)`

    **代入 n=1**

```
public static int fact(1){
  if(1 <=1)
     return 1;
  else 
     return 1 * fact(1-1);
} 
```

`If`循环是真的

所以它返回`1`

记得我们打电话`4 * 3 * 2 * fact(1)`

输出为`fact(1) = 1`

到目前为止，堆栈有`4 * 3 * 2 * fact(1) = 4 * 3 * 2 * 1`

最后，**fact(4) = 4 * 3 * 2 * 1 = 24**

[![在此处输入图像描述](../Images/be655eb7a22d37543846d1fdd9c9896d.png)](https://i.stack.imgur.com/ELSwN.jpg)

**尾递归**将是

```
public static int fact(x, running_total=1) {
    if (x==1) {
        return running_total;
    } else {
        return fact(x-1, running_total*x);
    }
} 
```

1.  **代入 n=4**

```
public static int fact(4, running_total=1) {
    if (x==1) {
        return running_total;
    } else {
        return fact(4-1, running_total*4);
    }
} 
```

`If`循环失败，所以它进入`else`循环，所以它返回`fact(3, 4)`

2.  在堆栈内存中，我们有`fact(3, 4)`

    **代入 n=3**

```
public static int fact(3, running_total=4) {
    if (x==1) {
        return running_total;
    } else {
        return fact(3-1, 4*3);
    }
} 
```

`If`循环失败，所以它进入`else`循环

所以它返回`fact(2, 12)`

2.  在堆栈内存中，我们有`fact(2, 12)`

    **代入 n=2**

```
public static int fact(2, running_total=12) {
    if (x==1) {
        return running_total;
    } else {
        return fact(2-1, 12*2);
    }
} 
```

`If`循环失败，所以它进入`else`循环

所以它返回`fact(1, 24)`

3.  在堆栈内存中，我们有`fact(1, 24)`

    **代入 n=1**

```
public static int fact(1, running_total=24) {
    if (x==1) {
        return running_total;
    } else {
        return fact(1-1, 24*1);
    }
} 
```

`If`循环是真的

所以它返回`running_total`

输出为`running_total = 24`

最后，**fact(4,1) = 24的结果**

[![在此处输入图像描述](../Images/0488617c3abf8ed7c7ea0181aa6d16c5.png)](https://i.stack.imgur.com/FkcU1.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T09:05:17.293

我的回答更多的是猜测，因为递归与内部实现有关。

在尾递归中，递归函数在同一函数的末尾被调用。可能编译器可以通过以下方式进行优化：

1.  让正在进行的函数结束（即调用使用的堆栈）
2.  将要用作函数参数的变量存储在临时存储器中
3.  在此之后，使用临时存储的参数再次调用该函数

如您所见，我们在同一函数的下一次迭代之前结束了原始函数，因此我们实际上并没有“使用”堆栈。

但我相信如果函数内部要调用析构函数，那么这种优化可能不适用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-09T08:50:31.297

编译器有足够的智能来理解尾递归。如果从递归调用返回时，没有挂起的操作并且递归调用是最后一条语句，则属于尾递归的范畴。编译器基本上执行尾递归优化，删除堆栈实现。考虑下面的代码。

```
void tail(int i) {
    if(i<=0) return;
    else {
     system.out.print(i+"");
     tail(i-1);
    }
   } 
```

执行优化后，上面的代码转换为下面的代码。

```
void tail(int i) {
    blockToJump:{
    if(i<=0) return;
    else {
     system.out.print(i+"");
     i=i-1;
     continue blockToJump;  //jump to the bolckToJump
    }
    }
   } 
```

这就是编译器进行尾递归优化的方式。**

# angularjs - AngularJS 的良好实践

> ID：15518883
> 
> 赞同：0
> 
> 时间：2013-03-20T08:47:40.180
> 
> 标签：angularjs, angularjs-directive

在 google 和 stackoverflow 中搜索了几个小时后，我没有得到关于 AngularJS 良好实践的答案。

我的问题是::

1)在 AngularJS 中**使用 JQuery 和 CSS**操作 DOM 是一种好习惯吗？

2)**何时**显式添加 $injector 和 $inject？

**3)使用 JQuery 的 $.ajax() 方法在****Module**的控制器中异步调用是一种好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:55:46.170

> 1) 在 AngularJS 中使用 JQuery 和 CSS 操作 DOM 是一种好习惯吗？

您可能会惊讶 Angular 可以在没有 jQuery 的情况下完成多少工作。但是，[jqLit​​e](http://docs.angularjs.org/api/angular.element)肯定是 jQuery 的“精简”版本。如果你不能在 Angular 中“干净”地做到这一点（例如，如果你发现自己在写`parent().parent()`而不是`closest('.element-wrapper')`），那么当然可以使用 jQuery。

> 2) 何时显式添加 $injector 和 $inject？

正常的[依赖注入](http://docs.angularjs.org/guide/di)通常就足够了。但是，如果您确实需要，您可以使用 $injector 动态注入服务：[AngularJS 动态注入作用域或控制器](https://stackoverflow.com/questions/14415845/angularjs-dynamically-inject-scope-or-controller)

> 3) 使用 JQuery 的 $.ajax() 方法在模块的控制器中异步调用是一种好习惯吗？

使用[$http](http://docs.angularjs.org/api/ng.$http)或[$resource](http://docs.angularjs.org/api/ngResource.$resource)。他们做 $.ajax() 不做的事情，例如，当结果从服务器返回时，他们将启动 AngularJS 摘要循环。通常，您希望将服务器交互代码放入 Angular[服务](http://docs.angularjs.org/guide/dev_guide.services.understanding_services)中。

# php - 即使使用 CSRF 令牌，PHP 也会在表单提交中重复订单

> ID：15518885
> 
> 赞同：0
> 
> 时间：2013-03-20T08:47:47.517
> 
> 标签：php, duplicates, token, csrf, lighttpd

对于用 PHP 编写的应用程序中的“确认订单”页面，我需要防止提交多个表单，这样我们就不会收到重复的订单。我试图以两种方式处理这个问题：

1.  对于支持 javascript 的用户，提交按钮在点击时被禁用
2.  使用表单生成令牌并存储在会话中。在第一次提交时，它们会被比较并删除会话令牌。因此，应拒绝没有匹配令牌的后续提交。这应该具有防止 CSRF 攻击的额外好处。

我知道两者都是相当标准的做法，但问题似乎仍然存在？在禁用 js 的情况下，如果我多次单击提交按钮，我将获得 X 个重复订单。

这让我觉得这个问题可能与配置有关。它托管在 lighthttpd 上，php 使用 cgi-fcgi 编译。我不完全确定这是否相关，但我对现在这怎么可能感到困惑。

服务器代码如下（为简洁起见）：

```
<?php
    $_SESSION['token'] = uniqid('', true);
?>
<form name="myform" action="confirm" method="POST">
  <!--.... -->
 <input type="hidden" name="csrftoken" value="<?php echo $_SESSION['token']; ?>" />
 <input type="submit" name="submit" /> 
```

然后在提交时验证令牌：

```
<?php
   if ($_POST['csrftoken'] == $_SESSION['token']) {
       //proceed and process order
       unset($_SESSION['token']);
   }

?> 
```

会话已启动，令牌已正确生成并随后取消设置。

我过去使用过这种方法没有任何问题，但这次似乎仍然可以通过。将不胜感激任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:13:26.377

根据 Ghigo 的评论，我重构了代码以使其工作。

该问题最终是来自 iframe 和表单提交的会话锁定问题。确保会话尽早关闭是解决此问题的关键。

# php - Magento：为产品添加新图片

> ID：15518888
> 
> 赞同：0
> 
> 时间：2013-03-20T08:47:54.013
> 
> 标签：php, magento, zend-framework, magento-1.7, magento-1.5

当前有产品的基本图像、小图像、缩略图、横幅尺寸图像选项。我想为每个产品再添加一个选项，比如“品牌标志图片”。并且需要在需要的时候显示出来。

如果这可以通过一些配置或任何插件来完成？任何人有一些想法请分享谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:25:14.840

是的，您可以在图像选项卡中添加额外的选项。

Magento 提供 image 属性，因此使用 image 属性可以为图像添加一个额外的字段。

在前端，您可以将此属性作为普通的 magento 属性检索。

# c++ - 在基于范围的 for 中强制使用 cbegin()/cend()

> ID：15518894
> 
> 赞同：43
> 
> 时间：2013-03-20T08:48:22.550
> 
> 标签：c++

这个问题指的是：

[我什么时候应该使用新的 ranged-for，我可以将它与新的 cbegin/cend 结合使用吗？](https://stackoverflow.com/questions/5814553/ranged-for-and-cbegin-cend/5815268#5815268)

基于该问题，要强制使用`cbegin()`and `cend()`，需要执行以下操作，例如：

```
for (auto& v: const_cast<decltype(container) const>(container)) 
```

对于一个应该消除它的构造来说，这是很多样板代码。有没有更紧凑的方法来做到这一点？我提出问题的原因是，隐式共享容器可能会将我`begin()`用作分离自身的线索。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-20T09:01:10.210

更新：[`std::as_const`](http://en.cppreference.com/w/cpp/utility/as_const)将在 C++17 中，在`<utility>`标题中。

*在 C++17 之前*，它没有内置语法；但是，您可以轻松编写一个方便的包装器：

```
template<typename T> constexpr const T &as_const(T &t) noexcept { return t; }
for (auto &v: as_const(container)) 
```

请注意，这是调用`begin() const`而不是`cbegin()`专门调用；[标准容器](http://eel.is/c++draft/container.requirements.general)的一般要求规定了这一点`cbegin()`并且`begin() const`行为相同。

如果你的容器特别对待非常量迭代，它本身有一个成员函数可能是有意义的：

```
const Container &crange() const noexcept { return *this; }
for (auto &v: container.crange()) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T09:00:21.510

```
const auto& const_container = container;

for (const auto& v: const_container ) { 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-09T20:12:47.310

基于范围的 for 循环从不使用`cbegin()`or `cend()`。（因此没有办法强迫它。）相反的谣言令人惊讶地多；有些人认为`cbegin()`and`cend()`被使用了，但从不尝试相同的代码在没有`begin()`and的情况下是否可以编译`end()`。下面是一个简单的例子。想必只有`begin`and`end`才会被打印出来，不管加多少`const_cast`s。

```
#include <iostream>

class Iterable {
  struct Iterator {
    bool operator !=(const Iterator &) { return false; }
    int operator *(){ return 0; }
    Iterator& operator ++() { return *this; }
  };
public:
  Iterator cbegin() const noexcept {
    std::cout << "cbegin" << std::endl;
    return Iterator{};
  }
  Iterator cend() const noexcept {
    std::cout << "cend" << std::endl;
    return Iterator{};
  }
  Iterator begin() const noexcept {
    std::cout << "begin" << std::endl;
    return Iterator{};
  }
  Iterator end() const noexcept {
    std::cout << "end" << std::endl;
    return Iterator{};
  }
};

int main() {
  Iterable a;
  const Iterable b;
  for (auto i : a) {}
  for (auto i : b) {}
  for (const auto &i : a) {}
  for (const auto &i : b) {}
  return 0;
} 
```

# jquery - 使用 jQuery Validate 验证并执行 AJAX 调用以返回部分视图

> ID：15518899
> 
> 赞同：3
> 
> 时间：2013-03-20T08:48:35.617
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用`ASP.NET MVC 4`和`jQuery Validate`。

我的页面上有一个文本框和一个按钮。它是一个按钮，而**不是**提交按钮。单击按钮时，我验证输入到文本框中的数字并显示 2 个局部视图中的 1 个。

这是我的`HTML`标记：

```
@Html.TextBoxFor(x => x.ChangeIncidentNumber)
<button id="verifyButton" type="button">Verify</button>
@Html.ValidationMessageFor(x => x.ChangeIncidentNumber) 
```

在我开始使用 jQuery Validate 之前，我是这样做的：

```
$(document).ready(function () {
     $('#verifyButton').click(function () {
          $.ajax(
          {
               type: "POST",
               url: "/Server/GetChangeIncidentDetails",
               data: { changeIncidentNumber: $('#ChangeIncidentNumber').val() },
               dataType: "html",
               success: function (result) {
                    var domElement = $(result);
                    $("#changeIncidentDetails").html(domElement);
               }
          });
     });
}); 
```

我的`GetChangeIncidentDetails`操作方法：

```
public ActionResult GetChangeIncidentDetails(string changeIncidentNumber)
{
     ImplementationType implementationType = GetImplementationType(changeIncidentNumber);

     try
     {
          if (implementationType == ImplementationType.Change)
          {
               Change change = changeService.FindChangeByNumber(changeIncidentNumber);
               if (change != null)
               {
                    ChangeViewModel viewModel = Mapper.Map<ChangeViewModel>(change);

                    return PartialView("ChangeInformation", viewModel);
               }
               else
               {
                    // If it is null then I want to display an error message on the front end
               }
          }
          else if (implementationType == ImplementationType.Incident)
          {
               // Code is almost similar as above
          }
          else
          {
          }
     }
     catch (Exception ex)
     {
          // Handle error
     }
} 
```

在进入上面的操作方法之前，我在图片中添加了 jQuery Validate 以处理一些客户端验证。这是我目前拥有的：

```
$(document).ready(function () {
     $("#searchForm").validate({
          rules: {
               ChangeIncidentNumber: "required"
          },
          messages: {
               ChangeIncidentNumber: "Required"
          }
     });

     $('#verifyButton').click(function () {
          $('#searchForm').valid();
     });
}); 
```

我不确定如何将 2 合并在一起，验证和 ajax 调用是否可以一起完成，我是否需要将其分开，以及如何显示客户端错误消息`if change == null`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:35:58.347

我相信你可以做到：

```
 $('#verifyButton').click(function () {
          $('#searchForm').validate();

          if($('#searchForm').valid()){    
              $.ajax({
                   type: "POST",
                   url: "/Server/GetChangeIncidentDetails",
                   data: { changeIncidentNumber: $('#ChangeIncidentNumber').val() },
                   dataType: "html",
                   success: function (result) {
                       var domElement = $(result);
                       $("#changeIncidentDetails").html(domElement);
                       }
              });
          }
     }); 
```

请注意，我没有准确检查语法可能有额外或缺失的 } 或 )

要返回错误，您可以从您的操作方法返回一个 json 对象，该对象类似于

```
{success:true/false, 
 data:"jsondatafromactionmethod",
 error:"errormessagehere"} 
```

如果成功为真，则执行 html 替换/插入，否则以任何您想要的方式显示错误。

# grails - Spring secuirty core 和 cookie 与 grails

> ID：15518910
> 
> 赞同：1
> 
> 时间：2013-03-20T08:49:33.393
> 
> 标签：grails, cookies, spring-security

我正在使用带有 spring 安全核心的 Grails 2.1.2，我希望它使用 cookie，这样用户就不必第二次登录。我将以下内容添加到我的 Config.groovy

```
rememberMe.cookieName = "sptest_remember_me"
rememberMe.alwaysRemember=true
rememberMe.tokenValiditySeconds = 1209600
rememberMe.parameter = '_spring_security_remember_me'
rememberMe.key = "rem_me"
rememberMe.useSecureCookie=false
rememberMe.persistent=false 
```

但问题是我以编程方式使用

```
springSecurityService.reauthenticate(username,password) 
```

这不会为用户创建 cookie。那么无论如何我如何强制spring security为所有用户创建一个cookie。

# php - 将天数添加到当前日期

> ID：15518916
> 
> 赞同：0
> 
> 时间：2013-03-20T08:50:19.677
> 
> 标签：php

我想在当前日期添加几天。我使用以下代码。

```
$arrSearchValues=1000;

$datToDate = date('Y-m-d', strtotime("+$arrSearchValues days")); 
```

一切正常，直到天数超过 9070。在这个数字之上，结果日期为“1970-01-01”。有什么办法可以克服这个问题吗？请帮我举个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:57:10.903

根据[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 UTC 到 2038 年 1 月 19 日星期二 03:14:07 UTC。（这些日期对应于 32 位有符号整数的最小值和最大值。）

9070 天后，您的时间戳超出范围，因此您没有获得有效的时间戳，因此出现错误

如果时间戳无效，您可以显示错误

```
$arrSearchValues = 1000;
if(strtotime("+$arrSearchValues days"))
{
   $datToDate = date('Y-m-d', strtotime("+$arrSearchValues days"));
}
else
{
    echo "Out of range";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:57:35.433

2038 年 1 月 19 日是一个特殊的日子：在那一天，基于[Unix 时间的 32 位日期/时间实现](http://en.wikipedia.org/wiki/Unix_time) [用完了](http://en.wikipedia.org/wiki/Year_2038_problem)表示日期和时间的位，这就是加法溢出并将结果重置为开头的原因Unix 时代（1970 年 1 月 1 日）。

要绕过此限制，请切换到使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)和朋友：

```
$d = new DateTime();
$d->modify("+10000 days");
echo $d->format("Y-m-d"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:56:47.383

试试这个，它应该是最快的方法：

```
$arrSearchValues=time()+1000*24*60*60;
$datToDate = date('Y-m-d', $arrSearchValues); 
```

抱歉，我忘了使用 time()，检查更新的代码。

# pointers - 获取接口内的值地址

> ID：15518919
> 
> 赞同：7
> 
> 时间：2013-03-20T08:50:23.263
> 
> 标签：pointers, interface, go, memory-address

如何获取接口内的值的地址？

我有一个存储在接口中的结构，在 list.List 元素中：

```
import "container/list"
type retry struct{}
p := &el.Value.(retry) 
```

但我明白了：

```
cannot take the address of el.Value.(retry) 
```

这是怎么回事？既然结构体存储在接口中，为什么我不能得到指向它的指针呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T05:20:20.493

要理解为什么这是不可能的，考虑一下接口变量实际上是什么是有帮助的。接口值占用两个字，第一个描述包含值的类型，第二个（a）保存包含的值（如果它适合该字）或（b）指向存储值的指针（如果该值不适合一个单词）。

需要注意的重要事项是 (1) 包含的值属于接口变量，以及 (2) 当为变量分配新值时，可以重用该值的存储。知道这一点，请考虑以下代码：

```
var v interface{}
v = int(42)
p := GetPointerToInterfaceValue(&v) // a pointer to an integer holding 42
v = &SomeStruct{...} 
```

现在整数的存储已被重新用于保存指针，并且`*p`现在是该指针的整数表示。你可以看到它是如何破坏类型系统的，所以 Go 没有提供这样做的方法（除了使用`unsafe`包之外）。

如果您需要指向要存储在列表中的结构的指针，那么一种选择是存储指向列表中结构的指针，而不是直接存储结构值。或者，您可以将`*list.Element`值作为对包含结构的引用传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:59:44.133

在第一个近似值：你不能这样做。即使你可以，`p`它本身也必须有类型`interface{}`并且不会太有帮助 - 你不能直接取消引用它。

强制性问题是：您要解决什么问题？

最后但同样重要的是：接口定义行为而不是结构。直接使用接口的底层实现类型通常会破坏接口契约，尽管它可能存在非一般的合法情况。但是对于一组有限的静态已知类型，这些已经由[类型 switch 语句](http://golang.org/ref/spec#Switch_statements)提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T09:51:25.357

类型断言是产生两个值的表达式。在这种情况下取​​地址将是模棱两可的。

```
p, ok := el.Value.(retry)
if ok {
    // type assertion successful
    // now we can take the address
    q := &p 
} 
```

从评论：

> 请注意，这是指向值副本的指针，而不是指向值本身的指针。
> 
> —[詹姆斯·亨斯特里奇](https://stackoverflow.com/users/721283/james-henstridge)

因此，问题的解决方案很简单；在接口中存储一个指针，而不是一个值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T14:49:49.613

> [获取指向接口值的指针？](https://groups.google.com/d/topic/golang-nuts/vPHiJwxVN98/discussion)
> 
> 给定接口类型的变量，有没有办法获取指向存储在变量中的值的指针？
> 
> 这不可能。
> 
> 罗布·派克

接口值不一定是可寻址的。例如，

```
package main

import "fmt"

func main() {
    var i interface{}
    i = 42
    // cannot take the address of i.(int)
    j := &i.(int)
    fmt.Println(i, j)
} 
```

> [地址运算符](http://golang.org/ref/spec#Address_operators)
> 
> 对于 T 类型的操作数 x，地址操作 &x 生成 *T 类型的指向 x 的指针。操作数必须是可寻址的，即变量、指针间接或切片索引操作；或可寻址结构操作数的字段选择器；或可寻址数组的数组索引操作。作为可寻址性要求的一个例外，x 也可以是复合文字。

参考：

[接口类型](http://golang.org/ref/spec#Interface_types)

[类型断言](http://golang.org/ref/spec#Type_assertions)

[Go 数据结构：接口](http://research.swtch.com/interfaces)

[转到接口](http://www.airs.com/blog/archives/277)

# iphone - 如何将视频保存在文档文件夹中然后上传到服务器

> ID：15518925
> 
> 赞同：3
> 
> 时间：2013-03-20T08:50:31.620
> 
> 标签：iphone, ipad, video-capture

我正在从 iPad 应用程序录制视频，我希望该视频可以保存在文档文件夹中，或者我们可以直接将其上传到服务器。我已将音频文件存储在文档中，但如何保存视频文件。我正在使用以下代码录制视频。

```
 UIImagePickerController *picker = [[UIImagePickerController alloc] init];
  picker.delegate = self;

  if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
  {
    NSArray *mediaTypes = [NSArray arrayWithObject:(NSString*)kUTTypeMovie];
    picker.mediaTypes = mediaTypes ;
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo ;

    [self presentModalViewController:picker animated:NO];

    [picker release];
}
  else
    {

UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"Error" message:@" Camera Facility is not available with this Device" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alt show];
    [alt release];
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T08:55:22.450

试试这个，我用当前的日期时间存储它::

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    [self dismissViewControllerAnimated:NO completion:nil];
    NSString *type = [info objectForKey:UIImagePickerControllerMediaType];

    if ([type isEqualToString:(NSString *)kUTTypeVideo] || [type isEqualToString:(NSString *)kUTTypeMovie])
    {
        videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

        NSLog(@"found a video");

        // Code To give Name to video and store to DocumentDirectory //

        videoData = [[NSData dataWithContentsOfURL:videoURL] retain];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormat setDateFormat:@"dd-MM-yyyy||HH:mm:SS"];
        NSDate *now = [[[NSDate alloc] init] autorelease];
        theDate = [dateFormat stringFromDate:now];

        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Default Album"];

        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
           [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];

        NSString *videopath= [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@/%@.mov",documentsDirectory,theDate]] autorelease];

        BOOL success = [videoData writeToFile:videopath atomically:NO];

        NSLog(@"Successs:::: %@", success ? @"YES" : @"NO");
        NSLog(@"video path --> %@",videopath);
    }
} 
```

视频上传 ::

**`videoData`**是从`videoData = [[NSData dataWithContentsOfURL:videoURL] retain];`

```
- (void)uploadVideo
{
    NSData *imageData = videoData;

    NSString *urlString=[NSString stringWithFormat:@"%s", UploadVideoService];
    NSLog(@"url=== %@", urlString);

    request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*  body of the post */

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    //Video Name with Date-Time
    NSDateFormatter *dateFormat=[[NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"yyyy-MM-dd-hh:mm:ssa"];
    NSString *currDate = [dateFormat stringFromDate:[NSDate date]];

    NSString *str = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"file\"; filename=\"video-%@.mov\"\r\n", currDate];
    NSLog(@"String name::  %@",str);

    [dateFormat release];

    [body appendData:[[NSString stringWithString:str] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"result from webservice:::--> %@", returnString);

    [returnString release];
} 
```

希望，它会帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:21:16.290

一旦像这样尝试，

```
- (void)imagePickerController:(UIImagePickerController *)imagePicker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{

    NSURL *videoUrl = (NSURL *)[info objectForKey:UIImagePickerControllerMediaURL]; 

    NSDate *now = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"hh:mm:ss";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];

    NSData *videoData = [NSData dataWithContentsOfURL:videoUrl];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *savedvedioPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:now]]];
    savedvedioPath  = [savedvedioPath stringByAppendingFormat:@".mp4"];
    [videoData writeToFile:savedvedioPath atomically:NO];

    //here is the method to upload onto server
    [self Upload_server:savedvedioPath];

    [self dismissModalViewControllerAnimated:YES];
} 
```

现在定义您上传视频的方法，例如，

```
-(void)Upload_server:(NSString*)file_path {

  NSURL *url = [NSURL URLWithString: @"YOUR_URL_TO_UPLOAD"];
  ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
  [request setUseKeychainPersistence:YES];
  [request addFile:file_path forKey:@"YOUR_KEY"];

//insted of in above line you can also use [request setData:vedioData withFileName:@"your_file_name" andContentType:@"video/mp4" forKey:@"YOUR_KEY"] by Sending  vedioData of type NSData as another perameter to this method.

[request setDelegate:self];
[request setDidFinishSelector:@selector(uploadRequestFinished:)];
[request setDidFailSelector:@selector(uploadRequestFailed:)];
[request startAsynchronous];

} 
```

现在实现 ASIFormDataRequest 委托方法，例如，

```
- (void)uploadRequestFinished:(ASIHTTPRequest *)request{ 

   NSString *responseString = [request responseString];
  //do something after sucessful upload

}

- (void)uploadRequestFailed:(ASIHTTPRequest *)request{

  NSLog(@" Error - Statistics file upload failed: \"%@\"",[[request error] localizedDescription]); 

  } 
```

在这里，我将 ASIFormDataRequest 上传到服务器。希望它会帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:10:30.490

```
//for video..
#import <MobileCoreServices/MobileCoreServices.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/Mediaplayer.h>

#import <CoreMedia/CoreMedia.h>

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        NSArray *mediaTypes = [NSArray arrayWithObject:(NSString*)kUTTypeMovie];
        picker.mediaTypes = mediaTypes ;
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo ;

        [self presentModalViewController:picker animated:NO];

        [picker release];
    }
    else
    {
        UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"Error" message:@" Camera Facility is not available with this Device" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alt show];
        [alt release];
    } 
```

**用于保存到 Document 文件夹并保存在照片库中**

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];

        //for video
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        NSLog(@"video url-%@",videoURL);

        NSData *videoData = [NSData dataWithContentsOfURL:videoURL];

        NSString * videoName = [NSString stringWithFormat:@"student_%d_%d.mp4",stud_id,imgVidID];

        videoPath = [documentsDirectory stringByAppendingPathComponent:videoName];

        NSLog(@"video path-%@",videoPath);

        [videoData writeToFile:videoPath atomically:YES];

        NSString *sourcePath = [[info objectForKey:@"UIImagePickerControllerMediaURL"]relativePath];

        UISaveVideoAtPathToSavedPhotosAlbum(sourcePath,nil,nil,nil);
} 
```

# unit-testing - 在 grails 单元测试中模拟动态查找器

> ID：15518931
> 
> 赞同：0
> 
> 时间：2013-03-20T08:51:05.673
> 
> 标签：unit-testing, grails

我正在使用 grails 1.3.7。

在为我的控制器编写单元测试时，我收到错误，因为我在控制器中的操作使用了动态查找器，例如“findByName('ABC')”。我知道我也需要模拟动态查找器，我尝试了那个东西。但不幸的是没有成功。我请求您帮我解决我需要使用的确切模拟片段。此外，对于所有这些类型的模拟事物，请建议一些包含所有这些的文档 URL。

此外，在我的 grails 应用程序中，我将三个域之间的关联称为“hasMany 和 belongsTo”。因此，在为控制器编写单元测试时，请建议我究竟需要如何模拟这些域类。

请我要求你们所有人尽快回答，因为我被这些疑问所困扰。在此先感谢，并等待积极的答复。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:17:50.667

如果`name`是域的属性，那么当您[模拟域](http://www.grails.org/doc/1.3.7/guide/9.%20Testing.html#9.1%20Unit%20Testing)时，动态查找器将“自动”被模拟。你应该能够做到：

```
mockDomain(YourDomain) 
```

此时您将只返回 null，因此如果您希望该查询返回它们，请创建一些实例：

```
YourDomain instance = new YourDomain(name: 'foo')
mockDomain(YourDomain, [instance]) 
```

那么你可以这样做：

```
assert instance == YourDomain.findByName('foo') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-25T23:01:44.357

有人用 Grails 4.0.0 和 Spock 更新了这个问题吗？因为它似乎没有有效的动态查找器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:02:38.570

要模拟域动态查找器，请尝试：

```
def someDomainMock = new GrailsMock(SomeDomain)
someDomainMock.demand.static.findByName(1..1) { String name ->
    [new SomeDomain(name: name + '_1'), new SomeDomain(name: name + '_2')]
} 
```

# java - 在eclipse jvm配置中添加代码

> ID：15518933
> 
> 赞同：1
> 
> 时间：2013-03-20T08:51:30.517
> 
> 标签：java, eclipse, proxy, jvm, environment-variables

我有 3 行代码，我需要将它们添加到 Eclipse JVM 配置中，以便不必每次在我开发的每个程序中都编写它们。这是三行：

```
System.getProperties().put("proxySet", "true");
System.getProperties().put("proxyHost","prxoy.com");
System.getProperties().put("proxyPort", "8080"); 
```

知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:07:05.890

打开`Preferences`，然后将树导航到`Java -> Installed JREs`。

然后，您可以从那里`Edit`选择/默认 JRE，并通过将系统属性输入`Default VM Arguments`字段来添加它们，例如：

```
-DproxySet=true -DproxyHost=prxoy.com -DproxyPort=8080 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:24:31.487

**或者，您可以在网络连接**下配置代理主机和端口

 **```
Preferences >> General >> Network Connections 
```

选择**Active provider**作为“Manual”并更新/编辑代理主机和端口。**

# actionscript-3 - AS3（或 AS2） - 全局变量作为函数内部的局部变量

> ID：15518937
> 
> 赞同：0
> 
> 时间：2013-03-20T08:51:45.207
> 
> 标签：actionscript-3, flash, actionscript

我假设我在这里忽略了一些简单的事情。但基本上，我想做的只是简单地..我想代码会是一个更好的解释，这里是：

```
tobj = (an Array containing objects.)

for(i = 0; i < tobj.length; i++) {
   tobj[i].func = function() {
       trace(i);
   }
} 
```

基本上，我明白这里发生了什么.. i 随着全局变量的变化，所以如果我执行该函数，它将检索 i 的最后一个值，而不管它在分配时是什么。基本上我想在这里弄清楚使用什么方法将 i 作为全局转换为本地，这样当我在对象上执行函数时，它会输出分配的变量。

希望它是可以理解的和直截了当的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:14:32.757

如果在函数声明的右括号后添加括号，它将运行该函数：

```
var tobj = [new Object(),new Object(), new Object()];

for(var i = 0; i < tobj.length; i++) {
     tobj[i].func = function() {
     trace(i);
}() // < ------ 
```

这将跟踪：“0”、“1”、“2”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:17:14.910

简单的解决方案...可能还有另一种方法，但这对我有用。刚离开它几分钟。

```
tobj = (an Array containing objects.)

for(i = 0; i < tobj.length; i++) {
   tobj[i].func = function() {
       assigner(i);
   }
}

function assigner(var) {
   trace(var);
} 
```

# c++ - 命令设计模式的实现有一些错误？

> ID：15518939
> 
> 赞同：0
> 
> 时间：2013-03-20T08:51:55.853
> 
> 标签：c++, oop, design-patterns, command-pattern

[在俄语维基百科链接中](http://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_%28%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%29)，有一个命令设计模式的 C++ 实现示例。正如我从与 UML 类图比较的实现中了解到的那样，我看到：

1.  类 Document 是图中的 Invoker
2.  class Command 是图中的Command
3.  类 InsertCommand 是图中的 ConcreteCommand
4.  类 Receiver 是图中的 Receiver

另外，从图中我们可以看出，Invoker 聚合了 Command。但在我们的例子中，文档类不聚合命令。这是一个错误吗？或者它是命令模式的变体？在设计具体模式时一般应遵循多严格的 UML 图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:16:54.397

C++ 示例的命名不太好，我理解它们如下：

*   `Document`是 a `Receiver`，应用命令的对象
*   `Receiver`类`Invoker`根据提供的**UML**图起作用。
*   `main`方法是一个`Client`

您可以看一下 Java 示例，它更干净。

# dll - DLL和LIB扩展的区别

> ID：15518940
> 
> 赞同：4
> 
> 时间：2013-03-20T08:51:58.623
> 
> 标签：dll

我知道 LIB 文件是静态链接 - 当我在我的项目中使用它时，在编译时，它的所有内容都会添加到我的文件中。DLL 是动态的 - 加载到内存中，所有需要它的项目都可以使用它。

为什么我应该使用 DLL 而不是 LIB（反之亦然？如何将我的代码编译为 DLL（或 LIB）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-20T12:00:13.013

根据this [wiki page](https://en.wikipedia.org/wiki/Dynamic-link_library)，`.lib`文件与 结合使用`.dll`，这意味着您不必偏爱一个。

> 例如，kernel32.dll 是 Windows 基本功能（如文件创建和内存管理）的主要动态库，它通过 kernel32.lib 链接。

# c++ - 容器在结构内崩溃？

> ID：15518942
> 
> 赞同：0
> 
> 时间：2013-03-20T08:52:10.627
> 
> 标签：c++, stl, struct, containers

在结构中访问它们时，我似乎无法写入标准容器向量、映射和多映射（只有我尝试过的）。这是我正在尝试做的一个例子：

```
struct B
{
    void* pp;
};

struct A
{
    std::vector< B* > veEvents;
}; 
```

在某处的类函数中

```
A* d = new A;

B* f = new B;
d->veEvnts.push_back( f );  //<< this line crashes 
```

尝试以这种方式访问​​容器会使 STD 崩溃。它在引用此指针的行上的 STD 代码中崩溃。我尝试了几种解决方法，包括对向量语句进行类型定义，但没有奏效。似乎有希望作为一种解决方法的一个是将函数放入结构中并调用该函数......

```
struct B
{
   void* pp;
};

struct A
{
    void K( B* f )
    {
        static std::vector< B* > veEvents;

        veEvnts.push_back( f );  //<< this line crashes 
    }
}; 
```

在某些类函数中

```
A* a = new A;
B* b = new B;
a->K(b);   //This seems to work. 
```

有什么办法可以解决最初的问题，即访问结构内声明的容器会导致访问问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:47:35.487

好的！到了它的底部。Ivaylo 关于堆栈损坏是正确的。有问题的指针指向类的成员变量区域上的向量。向量最初是在那里创建的，复制到堆上相同结构类型的另一个结构，但向量仍然指向类堆栈。我试着写一个深拷贝，但来自不同的班级。那没有用。所以我从一开始就在堆上创建了一个结构，并在第一遍时用它来保存变量。后来，在另一个类中，使用堆上的结构，访问向量工作。最初应该以这种方式创建原始结构。再次感谢各位。我感谢您的所有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:10:27.037

这是'B'类的完整代码吗？如果是，那么粘贴的代码没有明显的问题。如果不是，那么导致崩溃的可能情况之一可能是：

1.  B 类在创建新对象时为 *pp 分配内存，但在复制时不这样做（即复制构造函数中的浅拷贝）。

2.  当您在向量中插入一个对象时，它会调用复制构造函数将您的对象复制到向量内存空间中。由于浅拷贝，插入的对象和它在向量中的对应对象共享由 pp 指向的相同指针。

3.  现在对象超出范围，析构函数删除了 pp 指向的内存。该对象的向量对应物仍然指向该内存并试图在某处访问该内存。

当您尝试通过静态引用做同样的事情时，不会发生删除（静态对象一旦超出范围就不会被删除）。您的对象和向量内的相应对象都一直指向有效内存，并且不会发生崩溃。

# c# - Windows 窗体 - 使用公共事件将窗体订阅到用户控件事件

> ID：15518944
> 
> 赞同：0
> 
> 时间：2013-03-20T08:52:15.220
> 
> 标签：c#, winforms, events, delegates

我在处理事件和/或委托时遇到了问题。我看到了非常相似的问题，但我仍然不清楚真正的实现。因此，请在您回答时更具体一些，以便我可以尝试并最终通过我知道的代码来了解公共/自定义事件的创建/处理究竟是如何工作的。

我所拥有的是一个`User Control`简单的文本框和一个按钮，我需要使用文本框中的值更改数据库中的记录。我将这个控件用于许多表单，所以我需要知道我正在使用哪个实体，并且能够调用它自己的保存方法。`click`如果我可以使用我的按钮事件`User Control`然后调用`Save()`当前表单的方法，那么做这一切会更容易。

这是我的用户控制：

```
namespace UserControls.CommonControls
{
    public delegate void ClickMe(string message);

    public partial class ChangeCode : UserControl
    {
        public event ClickMe CustomControlClickMe;
        public ChangeCode()
        {
            InitializeComponent();
        }

        private void btnChange_Click(object sender, EventArgs e)
        {
            if (CustomControlClickMe != null)
                CustomControlClickMe("Hello");
           //ToDo fill
            //MessageBox.Show("To Do: Write the busieness logic.");
        }

        public void SetTextBoxMask(MaskedTextBox txtBox)
        {
            txtChange.Mask = txtBox.Mask;
        }
    }
} 
```

我在最后一次尝试实现我需要的东西时发布了它。

这是需要使用来自更具体的`Click`事件的形式之一，因为如果我理解正确，那么就有我必须订阅事件的地方：`User Control``Constructor`

```
public MaterialEdit()
        {
            InitializeComponent();
            UserControls.CommonControls.ChangeCode. += new ClickMe(button2_Click);
        } 
```

`UserControls.CommonControls.ChangeCode`- 这就是我到达我`User Control`的名字的方式`ChangeCode`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:11:39.213

从您粘贴的内容来看，尚不清楚您是否向`ChangeCode`表单添加了控件。要使用控件及其事件和属性，首先必须为其创建新实例并将其添加到表单中。这个完成了：

*   在设计器中，通过将控件从工具箱拖动到窗体
*   在代码编辑器中，通过调用控件构造函数并将新对象添加到控件集合

只有这样，您才能处理该对象的事件。假设您将`ChangeCode`控件放到了一个窗体中，并且 Visual Studio 将其命名为`ChangeCode1`. 您将处理的`CustomControlClickMe`事件附加到这样的事件：

```
ChangeCode1.CustomControlClickMe += new ClickMe(button2_Click); 
```

您粘贴的代码 ( `UserControls.CommonControls.ChangeCode. += new ClickMe(button2_Click);`) 不正确，原因如下：

1.  从语法上讲，左侧表达式以 which 结尾，`.`这使得它不正确的赋值目标 ( `UserControls.CommonControls.ChangeCode.`)
2.  未提供事件名称，仅提供控件名称（您需要以要分配的内容结束分配的左侧 - `.CustomControlClickMe`）
3.  您正在尝试将处理程序附加到类而不是对象

# sql - sql server - 迭代每列数据

> ID：15518946
> 
> 赞同：-2
> 
> 时间：2013-03-20T08:52:18.087
> 
> 标签：sql, sql-server, tsql

**样本数据 ：**

```
LINE_NO E_FIELD F_FIELD G_FIELD HSA_STATUS  FAMILY  CACHE_FAMILY    Count
23053B  00000   00000   00000   S           SUMMIT      WER           43
23053B  00000   00000   00000   T           SUMMIT      WER           144
23053B  00000   00000   00684   T           SUMMIT      WER           2
23053B  00353   00418   00684   T           SUMMIT      WER           1
23053B  00353   00418   00763   T           SUMMIT      WER           1
23053B  00353   00418   01512   T           SUMMIT      WER           1
23053B  00353   00418   06797   T           SUMMIT      WER           1
23053B  00353   00418   30228   T           SUMMIT      WER           1
23053B  00353   00418   31935   T           SUMMIT      WER           2
23053B  05601   01402   00758   T           SUMMIT      WER           1
23053B  05601   01402   09091   T           SUMMIT      WER           1
23053B  05601   01402   65053   T           SUMMIT      WER           1
-------------------------------------------------------------------
23054B 00000 00000 00000 S                 SUMMIT      WER           37   
23054B 00000 00000 00000 T                 SUMMIT      WER           96    
23054B 00353 00418 00758 T                 SUMMIT      WER           1    
23054B 00354 00414 01095 T                  SUMMIT     WER           1 
```

这是我的查询：“ **SELECT LINE_NO,E_FIELD,F_FIELD,G_FIELD,HSA_STATUS,FAMILY,CACHE_FAMILY,Count = ((SUM(TOTAL))) FROM(SELECT LINE_NO,E_FIELD,F_FIELD,G_FIELD,HSA_STATUS,FAMILY,CACHE_FAMILY,Count( LINE_NO）作为 TX_HSA_SUMM 的总和，其中 MT_TIMESTAMP2 在（'2013-03-07 10:10:00'）和（'2013-03-08 10:20:00'）按 LINE_NO、E_FIELD、F_FIELD、G_FIELD、HSA_STATUS 分组， FAMILY,CACHE_FAMILY) 作为 GROUP BY LINE_NO,E_FIELD,F_FIELD,G_FIELD,HSA_STATUS,FAMILY,CACHE_FAMILY,total BY LINE_NO,E_FIELD,F_FIELD,G_FIELD,HSA_STATUS,FAMILY,CACHE_FAMILY,total"**

这实际上是我的示例数据。我已经算了。如您所见，列标题。我的问题是我需要对计数和我需要获得百分比的每一行求和。例如，上述记录的总数为**199**，因此第一条记录计数为**43**，因此计算应为**43/199 * 100**。如何查看百分比？这 ？？平均列来获得百分比。请帮助我，我急需这个。它应该只在破折号之后的特定行中完成，它是一个新行，所以在计算百分比时，它应该只计算那个特定的行，而不是计算并获得百分比。

有什么建议可以显示如何首先获得计数。然后从总和中计算，最后。计数应除以总和和 * 100 以获得百分比。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:56:59.380

尝试使用以下查询：

```
select (Count/(select SUM(Count) from tablename))*100 from tablename; 
```

这里`SUM()`用于查找列中值的总和。

[如链接](http://msdn.microsoft.com/en-us/library/ms187810.aspx)中所述，SUM 只能用于数字列。空值被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:41:10.093

最简单的方法：创建一个临时表（比如@temp），将上面的结果插入其中并执行以下操作：

```
Declare @temp table
(
    LINE_NO varchar(20), 
    E_FIELD varchar(20),
    F_FIELD varchar(20),
    G_FIELD varchar(20),
   HSA_STATUS varchar(20),
   FAMILY varchar(20),
   CACHE_FAMILY varchar(20),
   CountValue int
 )
 Insert into @temp
 Your above result shown in your question

Declare @CountSum int
Set @CountSum=(Select Sum(CountValue) From @temp)

Select t.*,Cast(Cast((t.CountValue*@CountSum) as Decimal(10,3))/100 as decimal(5,2))    Count_Percentage From @temp t 
```

它会给：

```
LINE_NO E_FIELD F_FIELD G_FIELD HSA_STATUS  FAMILY  CACHE_FAMILY    Count     Count_Percentage
=============================================================================================== 
23053B  00000   00000   00000   S           SUMMIT  WER               43        85.57
23053B  00000   00000   00000   T           SUMMIT  WER              144        286.56
23053B  00000   00000   00684   T           SUMMIT  WER              2          3.98
23053B  00353   00418   00684   T           SUMMIT  WER              1          1.99
23053B  00353   00418   00763   T           SUMMIT  WER              1          1.99
23053B  00353   00418   01512   T           SUMMIT  WER              1          1.99
23053B  00353   00418   06797   T           SUMMIT  WER              1          1.99
23053B  00353   00418   30228   T           SUMMIT  WER              1          1.99
23053B  00353   00418   31935   T           SUMMIT  WER              2          3.98
23053B  05601   01402   00758   T           SUMMIT  WER              1          1.99
23053B  05601   01402   09091   T           SUMMIT  WER              1          1.99
23053B  05601   01402   65053   T           SUMMIT  WER              1          1.99 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:45:08.373

```
;WITH T AS 
(
    SELECT 43 AS [Count]
    UNION ALL
    SELECT 144
    UNION ALL
    SELECT 2
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 2
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
    UNION ALL
    SELECT 1
)

SELECT 100.0 * T.[Count] / SUM(T.[Count]) OVER()
FROM T 
```

# makefile - 如何阻止Makefile将规则行打印到外壳上

> ID：15518952
> 
> 赞同：0
> 
> 时间：2013-03-20T08:52:28.187
> 
> 标签：makefile

我正在使用 makefile 来构建一组 C 文件。将.c文件编译为.o的规则如下：

```
%.o : %.c
    printf "\ncompiling $<\n"
    $(CC) -c $(CFLAGS) $< -o $@ 
```

执行此操作时，我正在观察 shell 上的以下输出：

```
printf "\ncompiling source/abcxyz.c\n"
compiling source/abcxyz.c
gcc.exe <other compiler inputs> 
```

我想防止`printf "\ncompiling source/abcxyz.c\n"`被打印到终端。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:56:48.087

在规则命令前加上一个`@`符号：

```
@printf "\ncompiling $<\n" 
```

# android - 用于阅读和编辑 PDF 的 Android API

> ID：15518954
> 
> 赞同：9
> 
> 时间：2013-03-20T08:52:29.350
> 
> 标签：android

我想知道是否有可用于编辑 PDF 文件并保存在 android 中的 API。此问题与打开或阅读 pdf 文件无关。当前可用的 API 不会提供编辑 PDF 文件的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:05:42.283

我想你可以试试[Qoppa Android PDF Toolkit](http://www.qoppa.com/android/)。虽然它不是免费的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:27:36.320

您可以使用第三方 java libray [PDF Clown](http://www.stefanochizzolini.it/en/projects/clown/features.html)。根据他们的网站，它具有以下功能

> *   PDF 生成器：PDF Clown 可以创建新的 PDF 文件
> *   PDF阅读器：PDF小丑可以访问现有的PDF文件
> *   PDF 编辑器：PDF Clown 可以操作现有的 PDF 文件

# php - 字符串的组合和合并

> ID：15518956
> 
> 赞同：-3
> 
> 时间：2013-03-20T08:52:35.320
> 
> 标签：php

我该如何结合这个

5 4 3 2 1 1（一个数组id）

3 3 2 1 3 2（数组值）

我希望数组（值）的输出是这样的

```
id  value
5 - 3
4 - 3
3 - 2
2 - 1
1 - 3
1-  2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:04:09.400

可能是这样的东西适合你

```
$array  = array(5=>3, 4=>3, 3=>2, 2=>3, 1=>2);

foreach($array as $key=>$value)
{
    $value  = $key."-".$value;
    $array[$key] = $value;

}

 var_dump($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:56:40.350

尝试这个：

```
$array  = array(5=>3, 4=>3, 3=>2, 2=>3, 1=>2);

foreach($array as $key=>&$val){
   $val  = $key."-".$val;
}

echo "<pre>";
print_r($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:11:55.277

你可以试试

```
$id = array(5 , 4 ,3 ,2, 1, 1) ;
$value = array(3 , 3 , 2, 1, 3, 2);

foreach ( array_map(null, $id, $value) as $group ) {
    vprintf("%d - %d\n", $group);
} 
```

输出

```
5 - 3
4 - 3
3 - 2
2 - 1
1 - 3
1 - 2 
```

# java - 空值校验编码标准

> ID：15518958
> 
> 赞同：1
> 
> 时间：2013-03-20T08:52:51.540
> 
> 标签：java, android, syntax, coding-style, null

我对空检查的编码标准有疑问。我想知道两者的区别

```
if(a!=null) 
```

和

```
if(null!=a) 
```

哪个更好，使用哪个，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T08:54:22.643

没有区别。但第一种更为常见。第二个也被称为“尤达条件”，因为它不自然的“语法”。

有一次我在一个项目中使用编码指南，`if (null != a)`因为他们认为开发人员更容易理解常量值必须始终放在第一位（如`CONSTANT_VALUE.equals(variable)`. 这对我来说很烦人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T08:57:23.327

**两者在 Java 中是相同的，因为只有布尔表达式可以在 if 中。**这只是程序员的一种编码风格偏好，他们中的大多数人使用`null != a`.

这是Java、C++ 等编程语言（称为**Yoda 条件**）`null != a`中的一种**古老做法。** 因为它是有效的，并且不小心分配给了所以写首先是**一个防止这种事故发生的后卫**。 **`if (a = null)``null``a``null`**

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T08:54:30.287

他们都是一样的。这取决于您的编码风格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T08:58:07.510

从编译器的角度来看，它们完全相同。但是第一种形式更具可读性，所以我建议你使用那个形式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T09:01:26.773

如果语句基于表达式的结果起作用，则它们之间没有区别，因此您编写`if(a!=null)` 或`if(null!=a)`将产生真或假，然后评估结果。

所以不管你写你喜欢哪个

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T09:02:55.860

他们都是一样的。尽管第一个变体很常见，但如果您知道第一个变量不为空，则第二个变体很有用

例如`"some value".equals(your_variable)`，某个值可以是您知道不为空的任何值。`your_variable`这将在is时避免 NPE `null`。

```
String str = "somevalue"; 

if(str != null && str.equals("somevalue")) { }

if("somevalue".equals(str)) { } 
```

`str`无论是`null`与否，这两个条件都将相同。****

# php - 使用 jQuery 或 PHP 从页面中删除多余的 HTML 代码？

> ID：15518960
> 
> 赞同：0
> 
> 时间：2013-03-20T08:53:01.560
> 
> 标签：php, jquery, concrete5

我的 Concrete5 模板中有一些代码，如果用户没有上传画廊图像，我不需要这些代码。因此，如果它不包含图像，我需要删除以下代码：

```
<ul class="Gal_2">
       <li class="Frst">    
       </li>

       <li>
       </li>
</ul> 
```

当它有图像时，它看起来像这样：

```
<ul class="Gal_2">
    <li class="Frst">
        <p><a rel="group" href="/concrete/files/2113/6352/1788/Lighthouse.jpg"><img width="1024" height="768" alt="Lighthouse.jpg" src="/concrete/files/2113/6352/1788/Lighthouse.jpg"></a>
        </p>
    </li>
    <li>
        <p><a rel="group" href="/concrete/concrete/themes/greek_yogurt/Images/TEMP_IMG1.jpg"><img width="800" height="537" alt="Island Rab" src="/concrete/concrete/themes/greek_yogurt/Images/TEMP_IMG1.jpg" style="float: left;"></a>
        </p>
    </li>
</ul> 
```

检查和删除标记的最快方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:55:26.840

尝试使用[**:not**](http://api.jquery.com/not-selector/)和[**:has**](http://api.jquery.com/has-selector/)

**[现场演示](http://jsfiddle.net/ERMuH/)**

```
$('.Gal_2:not(:has(a))').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:59:31.383

尝试以下操作：

```
<?php if (count($images)):?>
<ul class="Gal_2">
    <?php foreach($images as $index => $image):?>
        <li <?php echo $index == 0 ? 'class="Frst"' : ''?>>
            <p>
                <a rel="group" href="<?php echo $image['path']?>">
                    <img width="1024" height="768" src="<?php echo $image['path']?>">
                </a>
            </p>
        </li>
    <?php endforeach?>
</ul>
<?php endif?> 
```

最好在服务器端将其过滤掉，因为用户不需要这些空元素——首先它们必须与 HTTP 请求一起传输，然后必须使用 JavaScript 将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:56:07.650

你可以这样做：

~~if (!$('.Gal_2 img').length) { $('.Gal_2').remove(); }~~

该案例的固定版本有一个带有图像的**.Gal_2**和另一个没有图像的 .Gal_2：

```
$('.Gal_2').each(function() {
   if (! $(this).find('img').length) {
      $(this).remove();
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:56:30.500

你可能会使用类似的东西：

```
if (!$('img', 'ul.Gal_2 li')) {
    $('ul.Gal_2 li').hide();
    // or
    $('ul.Gal_2 li').remove();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T09:04:21.703

另一个

```
if($(".Frst").children().length) ? **do smthng** : $(".Gal_2").remove(); 
```

# regex - 如何使用正则表达式从字符串中提取 RFC1123 主机名？

> ID：15518964
> 
> 赞同：1
> 
> 时间：2013-03-20T08:53:12.740
> 
> 标签：regex, pcre, hostname

我正在寻找一个正则表达式，它可以匹配可以包含任何内容的字符串中任何可能是有效 RFC1123 主机名的内容。这个想法是提取可能是主机名的所有内容（通过检查子字符串是否符合所有要求为一个） - 除了最大长度为 255 个字符，这很容易在之后检查结果。

我最初想出了：

```
/(^|[^a-z0-9-])([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*)([^a-z0-9-]|$)/i 
```

虽然这匹配括号表达式 2 中的一些主机名（如预期的那样），但它似乎跳过了其他主机名。查看堆栈溢出问题，我发现了这个相关问题：

[匹配 DNS 主机名或 IP 地址的正则表达式？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

从正面反馈来看，答案应该是正确的（尽管它不验证标签大小），所以我想我会试一试。我将他们的表达式转换为类似于我之前的可提取格式：

```
/(^|[^a-z0-9-])((([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)*([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9]))([^a-z0-9-]|$)/i 
```

同样，它应该在括号表达式 2 中返回所需的结果，但它似乎跳过了一些有效的子字符串。我相信我检查不属于主机名的分隔符的方式可能存在问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:47:05.070

弄清楚了。在扫描字符串以查找顺序匹配时，在所需表达式之前和之后使用分隔符意味着每对主机名之间必须包含两个字符。因此，当主机名仅相差一个字符时，会跳过第二个字符！

要获得正确的结果，必须简单地删除前导分隔符：

```
/([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*)([^a-z0-9-]|$)/i 
```

只需要验证，不需要扫描。

# html - 以 html 格式发送电子邮件

> ID：15518972
> 
> 赞同：-2
> 
> 时间：2013-03-20T08:53:27.370
> 
> 标签：html, css

我正在做一个电子邮件表单，设计已经完成并且在网络浏览器中看起来不错，问题是，当我通过电子邮件发送它时，接收电子邮件看起来不像我在浏览器中打开它一样这里是来自浏览器和电子邮件的图像！ [在此处输入图像描述][1] ![在此处输入图像描述][2]

这是您可以访问的页面 [Emial 页面][3]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:06:45.397

由于电子邮件客户端数量众多，而且它们与其他 HTML 元素（如 div 标签）存在不同的问题，因此 HTML 电子邮件仍然必须主要使用表格来构建。

有关更多信息，请参见：http: [//www.campaignmonitor.com/blog/post/3472/div-tags-in-html-email-newsletters/](http://www.campaignmonitor.com/blog/post/3472/div-tags-in-html-email-newsletters/)

# c# - LINQ / 对象如何删除项目并将它们添加到另一个列表

> ID：15518974
> 
> 赞同：1
> 
> 时间：2013-03-20T08:53:32.130
> 
> 标签：c#, linq

我正在将 Linq 与对象一起使用并且有一个问题。

实际工作负载在后台作业中处理。

不应将实际工作量放在进一步的任务上。更重要的是，处理实际工作项的方法执行速度非常快并给出了结果，因此完整的工作量被放在工作项的块中。

一次，我只处理列表的前 n 个对象，因此我取 n 个对象，然后将它们从工作项的完整列表中删除。

```
Roughly:

int amount = 100;
List<WorkItem> actualWorkload = null;

lock(lockWorkload){ // complete Workload is filled in other thread
    if (actualWorkload.Count > amount)
    {
        actualWorkload.AddRange(completeWorkload.Take(amount));
    }
    else
    {
        actualWorkload.AddRange(completeWorkload);
    }
    completeWorkload.RemoveAll(x => actualWorkload.Contains(x));
}
//do something with workitems Process(actualWorkload); 
```

我的问题是：“Take”和“Remove”能否以某种方式结合起来，这样只需一步即可获取项目并直接从列表中删除这些项目？我搜索类似于 BlockingCollection 的“Take”的东西，它在返回时删除了一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:02:39.450

“Take and remove”对我来说听起来很像“Dequeue”，所以也许你可以只使用[Queue](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)或[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)？

但是，枚举器不会从队列中删除项目，因此您必须自己重复调用[Dequeue 。](http://msdn.microsoft.com/en-us/library/system.collections.queue.dequeue.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:57:30.027

即使有允许这样做的操作，在后台它仍然需要删除和添加它们。

但也许你不需要两个列表？也许您可能只有一个包含所有项目的列表，并且每个项目都有一个您设置为不同值或其他内容的状态。但当然，我不知道你的具体情况，所以这可能不可行。

# sql - SQL Group 一个已经分组的结果

> ID：15518979
> 
> 赞同：0
> 
> 时间：2013-03-20T08:54:11.030
> 
> 标签：sql, group-by

我必须在某些表上执行以下操作：

1.  我需要先根据某些东西对其进行分组，然后
2.  我需要根据其他内容再次对先前的结果进行分组。

有没有办法在单个查询中进行两个分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:02:42.060

您应该通过这两种方法检查您想要的结果：

```
select *
from (
   select *
   from table
   group by acol
)
group by bcol

select *
from table
group by acol, bcol 
```

试试这两个，他们应该有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:11:47.783

如果您向我们展示一些“J W”要求的代码，我们将更容易为您提供帮助。关于查询结构的信息不多，让我试一试。你是否试图做这样的事情：

```
WITH    FirstGroup
AS      (            
        SELECT  Color, ReorderPoint, COUNT(*) Items
        FROM    Production.Product
        GROUP   BY Color, ReorderPoint        
        )
SELECT  Color, SUM(ReorderPoint), SUM(Items) TotalItems
FROM    FirstGroup
GROUP   BY Color 
```

*注意：我使用 AdventureWorks 数据库*

# javascript - 向谷歌地图动态添加标记

> ID：15518983
> 
> 赞同：0
> 
> 时间：2013-03-20T08:54:16.333
> 
> 标签：javascript, php, ajax, google-maps

我正在尝试使用 ajax 和 php 的组合动态地将标记添加到我的 Google 地图中。代码的第一部分将 latlng 发送到 php 文件。然后 php 文件返回所需的标记位置。

当我提醒返回部分（ALERT TEST TO ENSURE PHP PROCESSED DATA FORCORRECTLY）时，它看起来不错，但我似乎无法将返回中的标记添加到我的地图上。

请参阅下面的代码。
//SEND DATA TO URL (send to php file) //RETURN DATA FOR PLACE MARKERS (这是返回 php 文件产生的)

非常感谢，

//发送数据到URL

```
 var xmlHttp = getXMLHttp();
     xmlHttp.onreadystatechange = function() {
     if (xmlHttp.readyState == 4) {
     HandleResponse(xmlHttp.responseText);
     }}                     
     xmlHttp.open("POST",'MYPHPFILE',true);
     xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
     xmlHttp.send("LATLON="+strLAT); 
```

//返回位置标记的数据

```
 var wxlatlng = new google.maps.LatLng(52,1); 
     var marker = new google.maps.Marker({ 
     position: wxlatlng,
     map: map,
     icon: '../../icons/flags/traffic_light_red.png',
     title: 'TEST', }); 
```

//返回位置标记的数据

```
 var wxlatlng = new google.maps.LatLng(52,1.1); 
     var marker = new google.maps.Marker({ 
     position: wxlatlng,
     map: map,
     icon: '../../icons/flags/traffic_light_red.png',
     title: 'TEST', }); 
```

//警报测试以确保 PHP 正确处理数据

```
 function HandleResponse(response) {
            document.getElementById('ResponseDiv').innerHTML = response;
            alert($('#ResponseDiv').text());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:52:56.720

我为我的问题找到的答案是使用 php 文件创建标记 xml 文件并通过 jQuery 响应加载 xml 文件

请参阅下面的代码；

```
 jQuery.get(YOURXMLFILE, function(data) {
       jQuery(data).find("marker").each(function() {
       var eachMarker = jQuery(this);
       var markerCoords = new google.maps.LatLng(
       parseFloat(eachMarker.find("Lat").text()),
       parseFloat(eachMarker.find("Lng").text())
       );
       var header  = eachMarker.find("title").text();
       var content = eachMarker.find("Content").text();
       var wxicon  = eachMarker.find("icon").text();
       //--------------------------------------------------------------------------        
        marker = new google.maps.Marker({
        position: markerCoords,
        icon: wxicon,
        map: map,
        animation: google.maps.Animation.DROP,
        title: header,
        });
        });
        }); 
```

# eclipse - 如何在 GWT 中调试 JSNI 方法？

> ID：15518992
> 
> 赞同：4
> 
> 时间：2013-03-20T08:54:42.283
> 
> 标签：eclipse, debugging, gwt, jsni

我有一个包含一些 JSNI 方法的 GWT 应用程序。我从里面得到了一个例外。如何在 IDE 中或通过浏览器调试该方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:54:33.447

如果您使用的是 2.5.x，请在[superdev 模式下](https://developers.google.com/web-toolkit/articles/superdevmode)配置和运行您的项目。启用您的 chrome 浏览器以使用源映射。最后，您将被带到浏览器调试控制台中的异常行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:12:48.917

根据@Thomas Broyer [HERE](http://grokbase.com/t/gg/google-web-toolkit/125bqsh306/how-can-i-find-jsni-code-in-firebug-or-chrome)（如果您正在使用`Chrome`）

如果您有`exception`in`JSNI`代码，您可以要求`Chrome`“停止所有异常”，您将看到您的`JSNI`代码并能够进入其中。你也可以试试“ `pause script execution`”。

PS：我没试过。只是一个线索，可以推动你走得更远。

# css - Css Sprites - 我的文件太大了吗？

> ID：15518998
> 
> 赞同：0
> 
> 时间：2013-03-20T08:55:03.073
> 
> 标签：css, css-sprites, sprite-sheet

我以前在我的网页上使用过不同的图像，现在我要进行优化。顺便说一句，这是一个约会网站。

我所做的是将我要使用的所有图像组合成一张大小为 280KB 的图像。

现在我的问题是：**那个文件很大吗？**我应该继续将它作为 css sprite 还是应该像以前一样使用小图像并逐个图像显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:59:44.830

拥有高达 1 - 1.5 MB 的精灵很好。

重要的是精灵中有多少图像，或者换句话说，您保存了多少 HTTP 请求。

如果您有 200KB 的 sprite 并且其中只有 2 张图像，那么使用它可能效率低下，但如果您有 5 MB 的 sprite 并且其中有 100 张图像，那么您将节省大量页面加载时间，因为只有 1向您的精灵发出请求，从而节省 99 个请求。

# zend-framework - Zend Framework 多个表单元素名称

> ID：15518999
> 
> 赞同：1
> 
> 时间：2013-03-20T08:55:06.153
> 
> 标签：zend-framework, zend-form

我的应用程序中有多个 Zend Framework(v1.12) 表单。

主要形式：

```
<?php

class Application_Form_Main extends Zend_Form
{

    public function init()
    {
        $this->setMethod('post')->setAction('some/url');
    }
}

?> 
```

我的子表格：

```
<?php

class Application_Form_User extends Zend_Form_SubForm
{

    public function init()
    {

       //first name element
        $this->addElement('text', 
                          'first_name', 
                          array(
                            'label'      => 'Name',
                            'required'   => true,  
                            'filters'    => array('StringTrim')           
                          )
        );

        //last name element
        $this->addElement('text', 
                          'last_name', 
                          array(
                            'label'      => 'Surname',
                            'required'   => true,
                            'filters'    => array('StringTrim')           
                          )
        );

        $this->setElementDecorators(array(
            'ViewHelper',
            'Errors'
        )); 
    }    

}

?> 
```

在我的自定义控制器（例如 UsersController.php）中，我使用多个用户子表单呈现主表单：

```
<?php 

$mainForm = new Application_Form_Main();

for($i=0; $i<2; $i++){

    $userForm = new Application_Form_User();              

    $mainForm->addSubForm($userForm, 'user_'.($i+1)); 

}       

//passing main form to the template
$this->view->mainForm = $mainForm;

?> 
```

所以我得到了带有 2 个用户 first_name 和 last_name 字段的表单。

在我的模板中，我以这种方式呈现表单：

```
<form action="<?php echo $this->mainForm->getAction(); ?>"
      enctype="<?php echo $this->form->getEnctype(); ?>"
      method="<?php echo $this->form->getMethod(); ?>"
">

<?php echo $this->mainForm->getSubForm('user_1')->first_name; ?>
<?php echo $this->mainForm->getSubForm('user_1')->last_name; ?>

<?php echo $this->echo $this->mainForm->getSubForm('user_2')->first_name; ?>
<?php echo $this->echo $this->mainForm->getSubForm('user_2')->last_name; ?>

</form> 
```

问题是 first_name 和 last_name 文本字段名称在两种形式中是相同的。我怎样才能让它有唯一的名字？如果我输出表格：

```
<?php echo $this->mainForm; ?> 
```

然后一切正常，我得到不同的字段名称。

那么有什么想法吗？