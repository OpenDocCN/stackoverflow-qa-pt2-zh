# StackOverflow 问答 13722000-13722999

# wpf - 在单独的视图中找不到 ElementName 的来源

> ID：13722002
> 
> 赞同：0
> 
> 时间：2012-12-05T11:13:49.163
> 
> 标签：wpf, mvvm, binding, commandparameter

我在 C# 中的 WPF 应用程序使用了 MVVM 模式。我定义了两个用户控件：

*   登录视图
*   项目查看

两个用户控件都添加到主窗口并使用相同的视图模型。`LoginView`包含一个`PasswordBox`定义如下：

`<PasswordBox Name="passwordBox" IsEnabled={Binding PasswordEnabled} />`

包含一个按钮，`ProjectsView`定义如下：

`<Button Content="Login" Command="{Binding ProjectLoginCommand}" IsEnabled={Binding ProjectLoginEnabled}" CommandParameter="{Binding ElementName=passwordBox}" />`

启动应用程序时，似乎`passwordBox`无法绑定元素名称。错误信息是：

`Cannot find source for binding with reference 'ElementName=passwordBox' [...]`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:48:47.203

你的元素

```
<PasswordBox Name="passwordBox" IsEnabled={Binding PasswordEnabled} /> 
```

位于`LoginView`用户控件中，但按钮

```
<Button Content="Login" Command="{Binding ProjectLoginCommand}" IsEnabled={Binding ProjectLoginEnabled}" CommandParameter="{Binding ElementName=passwordBox}" /> 
```

位于`ProjectsView`. 问题是您想从另一个用户控件的一个用户控件子元素访问。在我看来，将所有登录 UI 封装在`LoginView`用户控件中并将您的“项目”UI封装在用户控件中应该是更好的解决方案`ProjectsView`。

# java - 使用将xml作为放置的给定端点在java中调用rest ful web服务？

> ID：13722010
> 
> 赞同：0
> 
> 时间：2012-12-05T11:14:10.303
> 
> 标签：java, web-services, spring, restful-architecture

我是网络服务的新手。我正在做一个项目。我被要求调用一个完整的 web 服务，它采用 xml 作为输入。下面是终点。

```
https://api-something.com/someLocation/status 
```

HTTP方法是`POST`

我如何传递 xml 并在 Java/spring 中调用上述端点？

如何将`XML`文件作为输入传递到指定的端点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:21:35.373

如果您想使用 Spring，请查看 Spring Data REST [http://www.springsource.org/spring-data/rest#documentation](http://www.springsource.org/spring-data/rest#documentation)

在这里你会找到你的答案。

请注意，您还可以查看 Jersey（JAX-RS，Java EE 标准）： [http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:22:18.527

如果您正在编写集成测试，请查看[rest-assured](http://code.google.com/p/rest-assured/)（非常易于使用的库进行休息测试），它是[XML 示例](http://code.google.com/p/rest-assured/wiki/Usage#Example_2_-_XML)

如果您正在编写生产代码，请查看[RestTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)（它是一个弹簧组件）

# c# - 即使在对象浏览器中可见，也无法访问可移植类库中的“System.Servicemodel.Web”

> ID：13722012
> 
> 赞同：3
> 
> 时间：2012-12-05T11:14:17.793
> 
> 标签：c#, portability, portable-class-library

迄今为止我读过的所有文档都建议您可以从可移植类库中创建 Web 服务库，它们都指出：

*   System.ServiceModel &
*   System.ServiceModel.Web

可用于“WebGet”属性和其他 WCF Rest 功能。

但是，当我尝试引用命名空间时，它说它不可用，并且在代码中浏览不显示命名空间。

我通常认为这意味着它在可移植类库中不可用，但命名空间在对象浏览器中可见。

我什至尝试将我的目标框架限制为：

*   .NET 4.03 及更高版本
*   Silverlight 4 及以上

但没有乔伊。即使只使用 SL5 和 .NET 4.5 仍然不会公开命名空间

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:33:16.500

答案很简单是否定的

您可以在 PCL 项目中使用所有基本的 [DataContract] / [ServiceOperation] / [DataMember] 属性，但不能将 Rest Implementation 属性放在任何东西上。

为 PCL 中的属性提供尽可能多的属性，然后在具体实现中应用 Rest 属性的简单答案（确实需要存在于 PCL 中）

另外值得注意的是，当您使用 PCL 时，很多可序列化的标签都会丢失，因此请使用将 [DataContract] [DataMember] 属性添加到您的所有模型和属性，否则您会遇到我发现的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:08:45.023

我认为 Visual Studio 2010 在这方面存在某种缺陷。尽管`System.ServiceModel`和`System.ServiceModel.Web`程序集似乎被自动引用，但默认情况下它们*不是*，并且相应的命名空间不可用：

![未定义 ServiceModel 命名空间](../Images/20dd0b0e753ceb635eb2899dbf5b2ac1.png)

要解决此问题，请打开“*添加引用*”对话框。所有程序集似乎都被引用，但它们都不包含在项目*引用*列表中：

![似乎引用了程序集](../Images/b6f720dbe70e133ea081ac4a44bed14b.png)

要**真正**将所需的程序集添加到您的项目中，请从列表中选择程序集。现在，首先单击“*删除*” ，然后立即单击“*添加*”（或者，在列表中双击该程序集）。完成此操作后，“删除/添加”程序集现在将显式出现在项目的*引用*列表中：

![删除/添加组件](../Images/7991a605461f76e2068735674b5502cf.png)

当您键入时，相应的命名空间和类现在可用：

![可用的 ServiceModel 命名空间](../Images/572462dd63c6a37720514169203e7147.png)

并且可以成功构建项目。

这似乎适用于最广泛的平台包含，即 .NET Framework 4+、Silverlight 4+、WP7+ 和 Windows Store 应用程序。这已经在 VS 2010 上使用最新的 PCL 插件进行了测试。

在 Visual Studio 2012 上，*.NET 可移植子集*被列为一个整体，并且不能（取消）引用子集的单个程序集。但是，在 VS 2012 上，`System.ServiceModel`当您创建新的可移植类库时，似乎会自动覆盖对等程序集的访问。

以上所有内容均已在具有非 Express Visual Studio 版本的 Windows 7 系统上进行了测试。

# c# - 将 200 万行快速插入 SQL Server

> ID：13722014
> 
> 赞同：79
> 
> 时间：2012-12-05T11:14:24.503
> 
> 标签：c#, asp.net, sql-server, database, ado.net

我必须从文本文件中插入大约 200 万行。

通过插入，我必须创建一些主表。

将如此庞大的数据集插入 SQL Server 的最佳且快速的方法是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-05T11:18:12.367

1.  我认为最好在 DataSet 中读取文本文件的数据

2.  试用 **SqlBulkCopy** -[从 C# 应用程序批量插入 SQL](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)

    ```
    // connect to SQL
    using (SqlConnection connection = new SqlConnection(connString))
    {
        // make sure to enable triggers
        // more on triggers in next post
        SqlBulkCopy bulkCopy = new SqlBulkCopy(
            connection, 
            SqlBulkCopyOptions.TableLock | 
            SqlBulkCopyOptions.FireTriggers | 
            SqlBulkCopyOptions.UseInternalTransaction,
            null
            );

        // set the destination table name
        bulkCopy.DestinationTableName = this.tableName;
        connection.Open();

        // write the data in the "dataTable"
        bulkCopy.WriteToServer(dataTable);
        connection.Close();
    }
    // reset
    this.dataTable.Clear(); 
    ```

或者

在顶部执行第 1 步后

2.  从数据集创建 XML
3.  将 XML 传递到数据库并进行批量插入

您可以查看这篇文章以了解详细信息：[使用 C# DataTable 和 SQL 服务器 OpenXML 函数批量插入数据](http://pranayamr.blogspot.ca/2011/12/bulk-insertion-of-data-using-c.html)

但它没有用 200 万条记录进行测试，它只会消耗机器上的内存，因为你必须加载 200 万条记录并插入它。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-12-05T11:23:35.903

你可以试试[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)上课。

> 让您可以使用来自其他源的数据有效地批量加载 SQL Server 表。

有一篇很酷的[博客文章](https://web.archive.org/web/20160223064926/http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)介绍了如何使用它。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-10-20T13:53:21.443

重新解决 SqlBulkCopy 的问题：

我使用 StreamReader 来转换和处理文本文件。结果是我的对象列表。

我创建了一个类而不是`Datatable`一个或`List<T>`一个缓冲区大小（`CommitBatchSize`）。它将使用扩展名（在第二类中）将列表转换为数据表。

它工作得非常快。在我的 PC 上，我能够在 10 秒内插入超过 1000 万条复杂记录。

这是课程：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DAL
{

public class BulkUploadToSql<T>
{
    public IList<T> InternalStore { get; set; }
    public string TableName { get; set; }
    public int CommitBatchSize { get; set; }=1000;
    public string ConnectionString { get; set; }

    public void Commit()
    {
        if (InternalStore.Count>0)
        {
            DataTable dt;
            int numberOfPages = (InternalStore.Count / CommitBatchSize)  + (InternalStore.Count % CommitBatchSize == 0 ? 0 : 1);
            for (int pageIndex = 0; pageIndex < numberOfPages; pageIndex++)
                {
                    dt= InternalStore.Skip(pageIndex * CommitBatchSize).Take(CommitBatchSize).ToDataTable();
                BulkInsert(dt);
                }
        } 
    }

    public void BulkInsert(DataTable dt)
    {
        using (SqlConnection connection = new SqlConnection(ConnectionString))
        {
            // make sure to enable triggers
            // more on triggers in next post
            SqlBulkCopy bulkCopy =
                new SqlBulkCopy
                (
                connection,
                SqlBulkCopyOptions.TableLock |
                SqlBulkCopyOptions.FireTriggers |
                SqlBulkCopyOptions.UseInternalTransaction,
                null
                );

            // set the destination table name
            bulkCopy.DestinationTableName = TableName;
            connection.Open();

            // write the data in the "dataTable"
            bulkCopy.WriteToServer(dt);
            connection.Close();
        }
        // reset
        //this.dataTable.Clear();
    }

}

public static class BulkUploadToSqlHelper
{
    public static DataTable ToDataTable<T>(this IEnumerable<T> data)
    {
        PropertyDescriptorCollection properties =
            TypeDescriptor.GetProperties(typeof(T));
        DataTable table = new DataTable();
        foreach (PropertyDescriptor prop in properties)
            table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
        foreach (T item in data)
        {
            DataRow row = table.NewRow();
            foreach (PropertyDescriptor prop in properties)
                row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
            table.Rows.Add(row);
        }
        return table;
    }
} 
```

}

这是我想插入自定义对象列表`List<PuckDetection>`( `ListDetections`) 的示例：

```
var objBulk = new BulkUploadToSql<PuckDetection>()
{
        InternalStore = ListDetections,
        TableName= "PuckDetections",
        CommitBatchSize=1000,
        ConnectionString="ENTER YOU CONNECTION STRING"
};
objBulk.Commit(); 
```

`BulkInsert`如果需要，可以修改该类以添加列映射。例如，您有一个 Identity 键作为第一列。（假设数据表中的列名与数据库相同）

```
//ADD COLUMN MAPPING
foreach (DataColumn col in dt.Columns)
{
        bulkCopy.ColumnMappings.Add(col.ColumnName, col.ColumnName);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-05T15:12:23.020

我使用 bcp 实用程序。（批量复制程序）我每月加载大约 150 万条文本记录。每个文本记录的宽度为 800 个字符。在我的服务器上，将 150 万条文本记录添加到 SQL Server 表中大约需要 30 秒。

bcp 的说明位于[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-05T16:25:34.093

我最近遇到了这种情况（超过 700 万行），并通过 powershell 使用 sqlcmd（在将原始数据解析为 SQL 插入语句之后）一次 5,000 段（SQL 不能一次处理 700 万行）甚至 500,000 行，除非它分解成更小的 5K 片段。然后您可以一个接一个地运行每个 5K 脚本。）因为我需要利用 SQL Server 2012 Enterprise 中的新序列命令。我找不到使用所述序列命令快速有效地插入 700 万行数据的编程方式。

其次，一次插入一百万行或更多数据时要注意的一件事是插入过程中的 CPU 和内存消耗（主要是内存）。SQL 将在不释放上述进程的情况下完成如此规模的工作占用内存/CPU。不用说，如果您的服务器上没有足够的处理能力或内存，您可以很容易地在短时间内使它崩溃（我发现很难）。如果你的内存消耗超过 70-75%，只需重新启动服务器，进程就会恢复正常。

在我真正制定最终执行计划之前，我必须运行一堆试错测试来查看我的服务器的限制是什么（考虑到可使用的 CPU/内存资源有限）。我建议您在将其投入生产之前在测试环境中执行相同的操作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-25T06:22:58.510

我尝试了这种方法，它显着减少了我的数据库插入执行时间。

```
List<string> toinsert = new List<string>();
StringBuilder insertCmd = new StringBuilder("INSERT INTO tabblename (col1, col2, col3) VALUES ");

foreach (var row in rows)
{
      // the point here is to keep values quoted and avoid SQL injection
      var first = row.First.Replace("'", "''")
      var second = row.Second.Replace("'", "''")
      var third = row.Third.Replace("'", "''")

      toinsert.Add(string.Format("( '{0}', '{1}', '{2}' )", first, second, third));
}
if (toinsert.Count != 0)
{
      insertCmd.Append(string.Join(",", toinsert));
      insertCmd.Append(";");
}
using (MySqlCommand myCmd = new MySqlCommand(insertCmd.ToString(), SQLconnectionObject))
{
      myCmd.CommandType = CommandType.Text;
      myCmd.ExecuteNonQuery();
} 
```

*创建 SQL 连接对象并将其替换为我编写 SQLconnectionObject 的位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-10T19:44:02.320

我遇到了一个应该与 ADO、Entity 和 Dapper 一起使用的解决方案的问题，所以制作了[这个库](https://www.nuget.org/packages/MsSqlHelpers)；它以以下形式生成批次：

```
 IEnumerable<(string SqlQuery, IEnumerable<SqlParameter> SqlParameters)>  
    IEnumerable<(string SqlQuery, DynamicParameters DapperDynamicParameters)> 
```

[此链接](https://github.com/alecgn/mssql-helpers/blob/main/README.md)包含说明。它对 SQL 注入是安全的，因为使用参数而不是连接；如果需要，您也可以通过可选参数将标识插入设置为 ON。

与 ADO.NET 一起使用：

```
using MsSqlHelpers;
// ...
var mapper = new MapperBuilder<Person>()
    .SetTableName("People")
    .AddMapping(person => person.FirstName, columnName: "Name")
    .AddMapping(person => person.LastName, columnName: "Surename")
    .AddMapping(person => person.DateOfBirth, columnName: "Birthday")
    .Build();
var people = new List<Person>()
{ 
    new Person()
    {
        FirstName = "John", 
        LastName = "Lennon", 
        DateOfBirth = new DateTime(1940, 10, 9) 
    },
    new Person()
    {
        FirstName = "Paul", 
        LastName = "McCartney", 
        DateOfBirth = new DateTime(1942, 6, 18) 
    },
};
var connectionString = "Server=SERVER_ADDRESS;Database=DATABASE_NAME;User Id=USERNAME;Password=PASSWORD;";
var sqlQueriesAndParameters = new MsSqlQueryGenerator()
    .GenerateParametrizedBulkInserts(mapper, people);

using (var sqlConnection = new SqlConnection(connectionString))
{
    sqlConnection.Open();

    // Default batch size: 1000 rows or (2100-1) parameters per insert.
    foreach (var (SqlQuery, SqlParameters) in sqlQueriesAndParameters)
    {
        using (SqlCommand sqlCommand = new SqlCommand(SqlQuery, sqlConnection))
        {
            sqlCommand.Parameters.AddRange(SqlParameters.ToArray());
            sqlCommand.ExecuteNonQuery();
        }
    }
} 
```

与 Dapper 一起使用：

```
using MsSqlHelpers;
// ...
var mapper = new MapperBuilder<Person>()
    .SetTableName("People")
    .AddMapping(person => person.FirstName, columnName: "Name")
    .AddMapping(person => person.LastName, columnName: "Surename")
    .AddMapping(person => person.DateOfBirth, columnName: "Birthday")
    .Build();
var people = new List<Person>()
{ 
    new Person()
    {
        FirstName = "John", 
        LastName = "Lennon", 
        DateOfBirth = new DateTime(1940, 10, 9) 
    },
    new Person()
    { 
        FirstName = "Paul", 
        LastName = "McCartney", 
        DateOfBirth = new DateTime(1942, 6, 18) 
    },
};
var connectionString = "Server=SERVER_ADDRESS;Database=DATABASE_NAME;User Id=USERNAME;Password=PASSWORD;";
var sqlQueriesAndDapperParameters = new MsSqlQueryGenerator()
    .GenerateDapperParametrizedBulkInserts(mapper, people);

using (var sqlConnection = new SqlConnection(connectionString))
{
    // Default batch size: 1000 rows or (2100-1) parameters per insert.
    foreach (var (SqlQuery, DapperDynamicParameters) in sqlQueriesAndDapperParameters)
    {
        sqlConnection.Execute(SqlQuery, DapperDynamicParameters);
    }
} 
```

与实体框架一起使用：

```
using MsSqlHelpers;
// ...
var mapper = new MapperBuilder<Person>()
    .SetTableName("People")
    .AddMapping(person => person.FirstName, columnName: "Name")
    .AddMapping(person => person.LastName, columnName: "Surename")
    .AddMapping(person => person.DateOfBirth, columnName: "Birthday")
    .Build();
var people = new List<Person>()
{ 
    new Person() 
    { 
        FirstName = "John", 
        LastName = "Lennon", 
        DateOfBirth = new DateTime(1940, 10, 9) 
    },
    new Person()
    { 
        FirstName = "Paul", 
        LastName = "McCartney", 
        DateOfBirth = new DateTime(1942, 6, 18) 
    },
};
var sqlQueriesAndParameters = new MsSqlQueryGenerator()
    .GenerateParametrizedBulkInserts(mapper, people);

// Default batch size: 1000 rows or (2100-1) parameters per insert.
foreach (var (SqlQuery, SqlParameters) in sqlQueriesAndParameters)
{
    _context.Database.ExecuteSqlRaw(SqlQuery, SqlParameters);
    // Depracated but still works: _context.Database.ExecuteSqlCommand(SqlQuery, SqlParameters);
} 
```

# java - 用xpath替换对象列表中的值？

> ID：13722018
> 
> 赞同：1
> 
> 时间：2012-12-05T11:14:38.757
> 
> 标签：java, xml, xpath

xpath 是否能够替换 xml 文档的值？

以下获取所有名称元素，但我该如何替换它们？

```
<accounts>
<account>
<name>Johndoe1<name>
<account>
<account>
<name>Johndoe2<name>
<account>
</account>

XPathExpression fax = xpath.compile("/accounts/account/name")
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getNodeValue()); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:36:39.107

> xpath 是否能够替换 xml 文档的值？

不，XPath 是一种用于 XML 文档的*查询语言。*因此，它仅从 XML 文档中提取节点和数据，但不能更改（添加、替换、删除、节点）XML 文档。

当对 XML 文档的处理导致创建另一个与原始文档不同的 XML 文档时，这称为*XML 转换*。XSLT 是一种专为 XML 转换而设计的语言，是此类处理的最自然选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:16:05.097

XPath 仅标识文档中的节点。您必须使用 DOM api 来删除这些元素。有关如何[在](https://stackoverflow.com/questions/1374088/removing-dom-nodes-when-traversing-a-nodelist)遍历`NodeList`.

# sql-server - 将值插入到 sql server 中的表值参数中

> ID：13722019
> 
> 赞同：3
> 
> 时间：2012-12-05T11:14:43.147
> 
> 标签：sql-server, insert

将值插入用户类型表时出现错误。类型创建成功，但我无法将值插入该类型。

如何将值插入该表类型？

```
CREATE TYPE ProductType1 AS TABLE
(
    fld_SkillTargetID int
) 
```

我正在尝试使用以下语句将值插入该表类型：

```
declare @par as ProductType1
insert into @par values('fld_SkillTargetID')values(5166) 
```

但我收到错误。我无法将值插入该表类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T11:17:06.983

你有一个太多`values`- 你不需要转义字段名称：

```
insert into @par (fld_SkillTargetID)
values(5166) 
```

# javascript - Javascript 正则表达式拆分

> ID：13722024
> 
> 赞同：0
> 
> 时间：2012-12-05T11:15:02.200
> 
> 标签：javascript, regex

这是我的字符串

```
 var str = "Here is some &text:also , here is &another:one"
 var myRegExp = /\b\s(\&){1}(\w)+(\:){1}(\w)+\s?\b/g
 str.match(myRegExp)
 //[" &text:also", " &another:one"] 
```

到目前为止按预期工作，问题在于分裂

```
str.split(myRegExp) 
```

**期望：** [“这里有一些”，“，这里是”]
**现实**[“这里有一些”，“&”，“t”，“：”，“o”，“，这里是”，“&”，“回覆”， ””]

这可能是什么原因？我可以通过在匹配项上循环和拆分来提取我需要的数组，除此之外没有任何捷径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:19:22.713

这是因为`regex`引擎也将`group`值包含在结果中..使用`(?:)`

所以要拆分的正则表达式是

```
/\b\s(?:\&){1}(?:\w)+(?:\:){1}(?:\w)+\s?\b/g 
```

或者根本不需要分组

```
/\b\s\&{1}\w+\:{1}\w+\s?\b/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:26:07.470

您不需要分组或`{1}`正则表达式中的。利用：

```
var myRegExp = /\b\s&\w+:\w+\s?\b/g 
```

# php - php mysql查询连接错误无法选择数据库

> ID：13722026
> 
> 赞同：1
> 
> 时间：2012-12-05T11:15:03.423
> 
> 标签：php, mysql, database, connection

我在连接到我的数据库时遇到了一些麻烦。就我而言，我使用与往常相同的代码。但突然之间，我似乎无法建立联系。我已经在本地使用 MAMP 以及在我的服务器上在线尝试了该脚本。

我使用配置文件选择并使用以下代码连接数据库：

```
<?php
  $db_host = "localhost";
  $db_username = "root";
  $db_password = "root";
  $db_database = "dbname";
$link = mysqli_connect($db_host,$db_username,$db_password) or die("Cannot connect");
  mysqli_select_db($link, $db_database) or die("Cannot select database");
  ?> 
```

接下来，我尝试使用以下代码在我的页面上打印我的数据库中的信息：

```
<?php
$query="SELECT * FROM ditdoenweblokken ORDER BY id DESC";
$result = mysql_query($query) or die(mysql_error()) ;
while($rij = mysql_fetch_array($result)){  
$ID = $rij['id'];
?>
<li><a style="height:150px;width:150px;" class="fancybox" href="#inline1">
    <p style="font-weight:bold;"><?php echo($rij['titel']);?></p>
    <?php echo($rij['quote']);?></a>
</li>
<?php
}
?> 
```

我一直盯着我的眼睛，不知道如何继续前进。继续提出同样的问题。如果有人可以帮助我，将不胜感激。

那是错误信息：

> mysql_query() [function.mysql-query]: 无法通过 /public/sites/www.kernlab.nl/website/ 中的套接字 '/var/run/mysqld/mysqld.sock' (2) 连接到本地 MySQL 服务器第 11 行的 index.php
> 
> 警告：mysql_query() [function.mysql-query]：无法在第 12 行的 /public/sites/www.kernlab.nl/website/index.php 中建立到服务器的链接 无法连接到本地 MySQL 服务器通过套接字'/var/run/mysqld/mysqld.sock' (2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:11:17.010

在配置中，您使用`mysqli_`(mysqli extenton) 方法。

然后你使用`mysql_`（mysql extenton）方法。

您正在使用不同的扩展名。在这两种情况下使用相同的扩展。

# ios - iOS 崩溃堆栈解密

> ID：13722031
> 
> 赞同：3
> 
> 时间：2012-12-05T11:15:12.817
> 
> 标签：ios, xcode, crash

我们的 iPad 应用程序“MyApp”从现场收到了多份无法重现的崩溃报告，每天约有 3000 名用户。原因：“无法识别的选择器发送到实例” 受影响的设备：仅 iPad 1。

崩溃报告是指`[__NSCFDictionary buttonPressed:]`while`buttonPressed:`是 UIButton 的操作。显然，在崩溃情况下，按钮还没有准备好接收消息。相反，消息被分派到内存中的某个其他实例（在大多数情况下是字典）。

该操作`buttonPressed:`通过一个 xib 文件附加到按钮上（还有一种情况，即该操作以编程方式附加到图像视图）。`buttonPressed:`是当应用程序被带到前面时用户可能首先触发的操作。我怀疑在这些情况下，应用程序没有完全初始化（回到前面）并且无法恢复。

我的怀疑是基于符号（总是与这些崩溃一起发生）：（`_resourceLoadLoop`在主线程中执行？）和`_dispatch_mgr_wakeup`.

你有什么意见？您是否与 iPad 1 客户有过类似的经历？有已知的错误吗？

以下是典型崩溃堆栈的内容：

```
Hardware Model:      iPad1,1
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2012-12-04 06:35:48 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x35a2f32c
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception \'NSInvalidArgumentException\', reason: \'-[__NSCFDictionary buttonPressed:]: unrecognized selector sent to instance 0x40eaa0\'

Last Exception Backtrace:
0   CoreFoundation                      0x359b988f __exceptionPreprocess + 163
1   libobjc.A.dylib                     0x335dd259 objc_exception_throw + 33
2   CoreFoundation                      0x359bca9b -[NSObject doesNotRecognizeSelector:] + 175
3   CoreFoundation                      0x359bb915 ___forwarding___ + 301
4   CoreFoundation                      0x35916650 _CF_forwarding_prep_0 + 48
5   CoreFoundation                      0x359133fd -[NSObject performSelector:withObject:withObject:] + 53
6   UIKit                               0x330d4e07 -[UIApplication sendAction:to:from:forEvent:] + 63
7   UIKit                               0x330d4dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
8   UIKit                               0x330d4da1 -[UIControl sendAction:to:forEvent:] + 45
9   UIKit                               0x330d4b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493
10  UIKit                               0x330d5449 -[UIControl touchesEnded:withEvent:] + 477
11  UIKit                               0x330d392b -[UIWindow _sendTouchesForEvent:] + 319
12  UIKit                               0x330d3319 -[UIWindow sendEvent:] + 381
13  UIKit                               0x330b9695 -[UIApplication sendEvent:] + 357
14  UIKit                               0x330b8f3b _UIApplicationHandleEvent + 5827
15  GraphicsServices                    0x336ab22b PurpleEventCallback + 883
16  CoreFoundation                      0x3598d523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
17  CoreFoundation                      0x3598d4c5 __CFRunLoopDoSource1 + 141
18  CoreFoundation                      0x3598c313 __CFRunLoopRun + 1371
19  CoreFoundation                      0x3590f4a5 CFRunLoopRunSpecific + 301
20  CoreFoundation                      0x3590f36d CFRunLoopRunInMode + 105
21  GraphicsServices                    0x336aa439 GSEventRunModal + 137
22  UIKit                               0x330e7cd5 UIApplicationMain + 1081
23  MyApp                               0x0002411b main (main.m:14)
24  MyApp                               0x000240c0 start + 40

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x35a2f32c __pthread_kill + 8
1   libsystem_c.dylib                   0x34c1029f abort + 95
2   MyApp                               0x0012d595 +[PLCrashReporter sharedReporter] + 1
3   CoreFoundation                      0x359b9957 __handleUncaughtException + 75
4   libobjc.A.dylib                     0x335dd345 _objc_terminate + 129
5   libc++abi.dylib                     0x352253c5 safe_handler_caller(void (*)()) + 77
6   libc++abi.dylib                     0x35225451 operator delete(void*) + 1
7   libc++abi.dylib                     0x35226825 __cxa_current_exception_type + 1
8   libobjc.A.dylib                     0x335dd2a9 objc_exception_rethrow + 13
9   CoreFoundation                      0x3590f50d CFRunLoopRunSpecific + 405
10  CoreFoundation                      0x3590f36d CFRunLoopRunInMode + 105
11  GraphicsServices                    0x336aa439 GSEventRunModal + 137
12  UIKit                               0x330e7cd5 UIApplicationMain + 1081
13  MyApp                               0x0002411b main (main.m:14)

Thread 1:
0   libsystem_kernel.dylib              0x35a1f3a8 kevent + 24
1   libdispatch.dylib                   0x33d52bc9 _dispatch_mgr_wakeup + 1

Thread 2:
0   libsystem_kernel.dylib              0x35a1f004 mach_msg_trap + 20
1   CoreFoundation                      0x3598d3f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x3598c12b __CFRunLoopRun + 883
3   CoreFoundation                      0x3590f4a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x3590f36d CFRunLoopRunInMode + 105
5   WebCore                             0x37655ca3 RunWebThread(void*) + 403
6   libsystem_c.dylib                   0x34bd8735 _pthread_start + 321

Thread 3:
0   libsystem_kernel.dylib              0x35a1f004 mach_msg_trap + 20
1   CoreFoundation                      0x3598d3f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x3598c12b __CFRunLoopRun + 883
3   CoreFoundation                      0x3590f4a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x3590f36d CFRunLoopRunInMode + 105
5   Foundation                          0x34d54bb9 +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x34d54a81 -[NSThread main] + 73
7   Foundation                          0x34de8591 __NSThread__main__ + 1049
8   libsystem_c.dylib                   0x34bd8735 _pthread_start + 321

Thread 4:
0   libsystem_kernel.dylib              0x35a2f570 __select + 20
1   libsystem_c.dylib                   0x34bd8735 _pthread_start + 321

Thread 5:
0   libsystem_kernel.dylib              0x35a2fcd4 __workq_kernreturn + 8

Thread 6:
0   libsystem_kernel.dylib              0x35a2fcd4 __workq_kernreturn + 8

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000     r1: 0x00000000     r2: 0x00000001     r3: 0x00000000 
    r4: 0x00000006     r5: 0x3f2dbd98     r6: 0x00000002     r7: 0x2fe20a38 
    r8: 0x00469e00     r9: 0x00000000    r10: 0x00000000    r11: 0x0040eaa0 
    ip: 0x00000148     sp: 0x2fe20a2c     lr: 0x34c1720f     pc: 0x35a2f32c 
  cpsr: 0x00080010 

Binary Images:
   0x22000 -   0x288fff +MyApp armv7  <1f677ffc81aa3ccf958c65a92cce8418> /var/mobile/Applications/1D49C89A-36EA-43FC-BE76-7B770E36491B/MyApp.app/MyApp
0x3049d000 - 0x30550fff  iTunesStore armv7  <b3c0cce5f8e632e18f841c32b68f57a1> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x30555000 - 0x305d8fff  MapKit armv7  <e39706ac199134a497954e1f1d6d7245> /System/Library/Frameworks/MapKit.framework/MapKit
0x305d9000 - 0x305dffff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x306dd000 - 0x306f1fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x30745000 - 0x30824fff  RawCamera armv7  <293f818ba6533dceae8b900b6ed3c887> /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x30825000 - 0x30882fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x30883000 - 0x308cffff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x308f1000 - 0x30929fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x3092a000 - 0x30956fff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x30ef1000 - 0x30f42fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x30f43000 - 0x30f47fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x30fb3000 - 0x30fb3fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x30fb4000 - 0x30fcafff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30fcb000 - 0x30fe0fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x3129d000 - 0x312bafff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x312c0000 - 0x31433fff  MediaPlayer armv7  <63cdf8f9c66d36e7a4e69e2f6cae854f> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x315ea000 - 0x315eafff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> 
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:24:32.610

与其过早激活，不如说实现的控制器可能`buttonPressed:`已被释放，并且它的内存重新用于另一个对象。如果它仅限于某些设备，则可能是由于内存警告......以及已从 iOS 6 中删除的视图卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:26:52.797

将消息发送到完全不正确的对象的“无法识别的选择器”异常通常是由双重释放错误引起的。这意味着您的视图控制器（或任何具有该`buttonPressed:`方法的）已被释放，并且它的内存被另一个对象（在本例中为字典）回收。

您应该检查您的内存管理代码。如果您还没有，我强烈建议您转换为 ARC。这向后兼容 iOS 4（如果您不使用弱引用），通常会为您解决这些问题。

为了帮助调试，您可以通过编辑方案诊断设置来启用僵尸检测。您还可以使用 Instruments 中的“僵尸”乐器。这两种技术都可以帮助确认您是否有双重释放问题。

# c++ - 使用 QComboBox 过滤小部件

> ID：13722033
> 
> 赞同：0
> 
> 时间：2012-12-05T11:15:18.347
> 
> 标签：c++, qt, user-interface, qt3

我想使用 QComboBox 实现过滤器小部件。它应该工作的方式是，当我输入字母“a”时，它应该显示以“a”开头的项目，然后如果我输入“b”，它应该显示具有前缀“ab”等的项目。我通过覆盖类尝试`keyPressEvent`，`QComboBox`但它没有用。`QComboBox`我遇到的主要问题是，在出现下拉列表时如何使可编辑？我在这样的按键事件中打开下拉列表，

```
void SearchCombo::keyPressEvent(QKeyEvent *e)
{
    ...
    listBox()->popup();
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:23:06.563

我找到了解决方案。我所做的是，将`QListBox`'s（`QComboBox`有一个列表框）keyPressEvent's`QKeyEvent`传递给`QComboBox`'s LineEdit。`keyPressEvent`在使用它调用的 LineEdit 内部覆盖`QKeyEvent`

# android - 在 JBoss 7 上使用 Android maps.jar GeoPoint：java.lang.RuntimeException: stub

> ID：13722037
> 
> 赞同：1
> 
> 时间：2012-12-05T11:15:29.337
> 
> 标签：android, google-maps, exception, jboss7.x, geopoints

我是关于在 stackoverflow 上发布答案的新手。我希望你能帮助我。

我正在使用谷歌地图开发一个安卓应用程序。它通过 HTTP REST 调用 JBOSS 7 服务器，该服务器通过 HTTP REST 调用另一个服务器以从一些开放数据中获取一些点。然后，当第一个服务器收到响应时，它必须为智能手机客户端准备数据。因此，它使用 GeoPoint 准备了一个 OverlayItem 的数组列表。但是在创建 GeoPoint 的时候有一个例外。

我已将 maps.jar 和 gson-2.2.2.jar 放在 /WebContent/WEB-INF/lib/ 中，它似乎可以工作，但我对 Java 和 JBoss 不是那么专家，不知道它是否正确。

这是 JBoss 控制台中的异常：

> 11:36:23,287 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Prototipo_server_2].[it.unifi.sistemiTelematici.BikeServer.Rest.BikeServerREST]] (http --0.0.0.0-8080-1) Servlet it.unifi.sistemiTelematici.BikeServer.Rest.BikeServerREST 的 Servlet.service() 抛出异常：org.jboss.resteasy.spi.UnhandledException: java.lang.RuntimeException: stub at org .jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) [resteasy-jaxrs-2.3.2.Final.jar:] at org. jboss.resteasy.core。SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3。 2.Final.jar:] 在 org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:] 在 org.jboss.resteasy.plugins.server .servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:] 在 org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar: ] 在 javax.servlet.http.HttpServlet。服务（HttpServlet.java:847）[jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final] 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter（ApplicationFilterChain.java:329） [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina。 core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13\. Final.jar:] 在 org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final] 在 org. apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:] 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:] 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve .java:109) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:] at org .apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:] at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:] at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] at java。 lang.Thread.run（未知来源）[rt.jar:1.7.0_09] 原因：java.lang.RuntimeException：com.google.android.maps 的存根。GeoPoint.(Unknown Source) [maps.jar:] at it.unifi.sistemiTelematici.BikeServer.Rest.ServiziRastrelliere.getRastrelliereList(ServiziRastrelliere.java:100) [classes:] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [ rt.jar:1.7.0_09] 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_09] 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_09]在 java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_09] 在 org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) [resteasy-jaxrs-2.3.2 .Final.jar:] 在 org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) [resteasy-jaxrs-2.3.2.Final.jar:] 在 org.jboss.resteasy.core.ResourceMethod。调用（资源方法.java：222) [resteasy-jaxrs-2.3.2.Final.jar:] 在 org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) [resteasy-jaxrs-2.3.2.Final.jar:] 在org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525) [resteasy-jaxrs-2.3.2.Final.jar:] ... 还有 19 个

这是给出异常的类的代码：

```
package it.unifi.sistemiTelematici.BikeServer.Rest;

import it.unifi.sistemiTelematici.BikeServer.JSON.JSONArray;
import it.unifi.sistemiTelematici.BikeServer.JSON.JSONException;
import it.unifi.sistemiTelematici.BikeServer.JSON.JSONObject;
import it.unifi.sistemiTelematici.BikeServer.Utils.CoordinatesUtilities;

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.OverlayItem;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

import java.lang.reflect.Type;

@Path("/ServiziRastrelliere")
public class ServiziRastrelliere {

    private RestComuneFirenze restComune;
    private CoordinatesUtilities CoordinatesUtilities;

    public ServiziRastrelliere() {

        restComune = new RestComuneFirenze();
        CoordinatesUtilities = new CoordinatesUtilities();

    }

    JSONArray rastrelliereFeatures = null;

    @GET
    @Produces("application/json")
    @Path("/RastrelliereList/{latitudine}/{longitudine}")
    public String getRastrelliereList(@PathParam("latitudine") String latitudine, @PathParam("longitudine") String longitudine){

        String rastrelliereListJSON = null;

        JSONObject rastrellieraObj, rastrellieraGeometryObj, rastrellieraPropertiesObj;
        JSONArray rastrellieraCoordinates;
        double rastrellieraCoordX, rastrellieraCoordY;
        int rastrellieraCoordXint, rastrellieraCoordYint;
        String rastrellieraPostiString, rastrellieraLocalizzazione, rastrellieraModello;

        List<OverlayItem> myOverlayItemList = new ArrayList<OverlayItem>();
        Type listOfMyOverlayItemType = new TypeToken<List<OverlayItem>>(){}.getType();

        rastrelliereFeatures = restComune.getRastrelliereList(latitudine, longitudine);

        if (rastrelliereFeatures != null) {

            try {

                for (int i = 0; i < rastrelliereFeatures.length(); i ++) {

                    rastrellieraObj = rastrelliereFeatures.getJSONObject(i);
                    rastrellieraGeometryObj = rastrellieraObj.getJSONObject("geometry");

                    rastrellieraCoordinates = rastrellieraGeometryObj.getJSONArray("coordinates");
                    rastrellieraCoordX = rastrellieraCoordinates.getDouble(0);
                    rastrellieraCoordY = rastrellieraCoordinates.getDouble(1);
                    rastrellieraCoordXint = CoordinatesUtilities.fromJSONtoItemCoord(rastrellieraCoordX);
                    rastrellieraCoordYint = CoordinatesUtilities.fromJSONtoItemCoord(rastrellieraCoordY);

                    rastrellieraPropertiesObj = rastrellieraObj.getJSONObject("properties");

                    rastrellieraPostiString = rastrellieraPropertiesObj.get("NUMPOSTI").toString();
                    rastrellieraLocalizzazione = rastrellieraPropertiesObj.getString("LOCALIZZAZIONE");
                    rastrellieraModello = rastrellieraPropertiesObj.getString("MODELLO");

                    //myOverlayItemList.add(new OverlayItem(new GeoPoint(rastrellieraCoordYint, rastrellieraCoordXint), rastrellieraLocalizzazione, "Modello = " + rastrellieraModello + "Posti: " + rastrellieraPostiString));

                    System.out.println("rastrellieraCoordYint = " + rastrellieraCoordYint + " rastrellieraCoordXint = " + rastrellieraCoordXint);

                    //myOverlayItemList.add(new OverlayItem(new GeoPoint(rastrellieraCoordYint, rastrellieraCoordXint), "a", "b"));

                    GeoPoint geopoint = new GeoPoint(43770262, 11252829);

                    //myOverlayItemList.add(new OverlayItem( new GeoPoint(43770262, 11252829), "Access Title 1", "Access snippet 1"));

                }

            } catch (JSONException ex) {

                ex.printStackTrace();

            } 

            Gson gson = new Gson();
            rastrelliereListJSON = gson.toJson(myOverlayItemList, listOfMyOverlayItemType);

        } else {

            rastrelliereListJSON = "error";

        }

        return rastrelliereListJSON;

    }

} 
```

# android - 传递数组列表 多个活动之间

> ID：13722040
> 
> 赞同：8
> 
> 时间：2012-12-05T11:15:44.603
> 
> 标签：android, android-intent, arraylist

我正在尝试在我的应用程序中的多个活动之间传递对象的 ArrayList。是否可以使用 setData() 方法使用 Intent 来执行此操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T11:20:23.130

如果要发送对象的 ArrayList，那么您的类必须实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)或[Serializable](http://developer.android.com/reference/java/io/Serializable.html)接口。

请参阅这些很好的教程以在活动之间发送自定义对象

[http://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html](http://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html)

[http://www.anddev.org/novice-tutorials-f8/simple-tutorial-passing-arraylist-across-activities-t9996.html](http://www.anddev.org/novice-tutorials-f8/simple-tutorial-passing-arraylist-across-activities-t9996.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T11:26:31.983

使用下面的代码在意图中传递数组列表。

```
Intent mIntent = new Intent(FirstActivity.this, SecondActivity.class);
mIntent.putParcelableArrayListExtra("Data", mArraylist);
startActivity(mIntent); 
```

使用下面的代码从 Intent 获取数组列表。

```
Bundle bdl = getIntent().getExtras();
mArraylist1 = bdl.getParcelableArrayList("Data"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T11:20:33.090

首先，您需要在 Object 类中扩展 parcelable 类。然后你可以通过意图传递它`intent.putParcelableArrayListExtra("PASSING_DATA", data);`

这里的数据是自定义对象的数组列表。

请参阅[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)和[Parcelable 教程](http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html)以获得更好的理解

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:17:41.150

是的，有可能......您需要通过您的对象类实现 **Serializable**类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T11:19:41.480

如果对象实现 Parcelable，您可以使用 putParcelableArrayList 方法，如下所示：

```
Bundle data = new Bundle();
data.putParcelableArrayList("myArrayList", myList);
Intent i = new Intent();
i.putExtra("data", data); 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-06T20:10:34.527

您可以在定义它的位置使 arraylist 成为静态，并且只将位置传递给下一个活动

# objective-c - 如何在 xcode 4.4 中取消本地化文件

> ID：13722043
> 
> 赞同：1
> 
> 时间：2012-12-05T11:16:06.303
> 
> 标签：objective-c, ios, xcode

我的 xcode 项目中有一个 xib 文件，该文件已本地化为两种语言（英语和德语），由于 xib 中的一些更改，不再需要此（德语）本地化。

有没有一种简单的方法可以使用 xcode 从中删除这种本地化？目前我刚刚取消了两种语言的检查，然后手动将文件从 .lproj 目录复制回根目录。

我还以为我可以删除除英语以外的所有其他语言，它会自动回退，但似乎不是这样？当我这样做并运行德语时，应用程序在尝试加载该 xib 文件时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:22:46.457

**注意：您需要使用您的项目路径。如果您使用`find /`它，它将递归地删除所有带有提供语言的 lproj。**

您可以使用 shell 脚本来执行此操作。

创建一个包含以下内容的 shell 脚本

```
sync
df
date
foreach language ( German )
    find / -name $language.lproj -type d -exec rm -r -- {} ; -prune
end
date
df
sync 
```

运行。

如果您不熟悉 shell 脚本，请遵循以下步骤：

通过`chmod +x nolproj`在终端中使用使其可执行。

通过在终端中输入此文件来运行上述文件 `sudo ~/nolproj`。

德语将被删除！！！

如果要删除更多语言（lproj），只需将语言添加为`( German Italian French)`

# javascript - 删除文本值 onclick？

> ID：13722048
> 
> 赞同：0
> 
> 时间：2012-12-05T11:16:21.880
> 
> 标签：javascript, jquery, html, forms

如何在用户单击时删除输入类型 - 值文本。如何打印密码，而不是.......我必须使用java脚本吗？php有什么方法可以删除点吗？

这是我的代码

```
<html>
    <form action="testing.php" method="POST">
            <p>SIGN UP</p>
            <input type="text" name="name" value="Enter Name" />
            <input type="password" name="password" value="Enter Password"/>
            <input type="submit" name="submit"/>
    </form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:17:31.650

改用占位符：

```
<input name="Name" placeholder="Enter Name" /> 
```

# android - 从java调用本机方法时的Libc SIGSEGV

> ID：13722056
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:03.640
> 
> 标签：android, c++, java-native-interface, amazon, native-methods

我正在尝试让我的 Amazon In-app Purchases SDK 的 PurchasingObserver 的 java 实现通过本机方法与我的 C++ 代码进行通信。

PurchasingObserver.java //摘录

```
public class PurchasingObserver
{
    //...

    private native void postEvent(int type, String jsonData);
    // called by each of the four event handler methods, data is non-null
    // also tried it as native synchronized
} 
```

AmazonInAppPurchaseHandler.cpp //摘录

```
static AmazonInAppPurchaseHandler* AmazonInAppPurchaseHandler::s_pInstance(0); // dumbleton

JNIEXPORT void JNICALL  _NativePurchasingObserverPostEvent(JNIEnv* pEnv, jobject obj, jint type, jstring jsonData)
// friend function
{
  assert(type >= 0);
  assert(type < AmazonInAppPurchaseHandler::kNumEventTypes); // event type is in range
  assert(pEnv != 0); // JNI environment is valid

  printf("Stuff from the native callback: %d, %p\n", type, jsonData); // never gets printed.

  int jsonDataLen(0);
  const char* pJsonDataUtfChars(0);
  if(jsonData != 0)
  {
    jsonDataLen = pEnv->GetStringUTFLength(jsonData);
    pJsonDataUtfChars = pEnv->GetStringUTFChars(jsonData, 0);
  }

  assert(s_pInstance != 0); // got AmazonInAppPurchaseHandler instance
  s_pInstance->DoCallback(type, jsonDataLen, pJsonDataUtfChars);

  pEnv->ReleaseStringUTFChars(jsonData, pJsonDataUtfChars);
}

static const JNINativeMethod karNativeMethod[] =
{
  { 
    "postEvent",
    "(ILjava/lang/String;)V",
    (void*)&_NativePurchasingObserverPostEvent
  }
};

AmazonInAppPurchaseHandler::AmazonInAppPurchaseHandler()
{
  assert(s_pInstance == 0); // is only instance
  s_pInstance = this;

  JNIEnv* pEnv(GetJNIEnv());
  assert(pEnv != 0); // got JNI environment

  jint  result(pEnv->RegisterNatives(cPurchaseObserver, karNativeMethod, 1));
  assert(AmazonInAppPurchaseHandler, result == 0); // successfully registered
}

AmazonInAppPurchaseHandler::~AmazonInAppPurchaseHandler()
{
  s_pInstance = 0;
} 
```

一旦我执行任何生成事件的操作，就会发生以下情况： 1，事件处理程序被正确调用，它会进行日志记录。2，它还记录“发布事件...”，这是调用 postEvent() 之前的最后一件事。3，程序在 libc 中崩溃并带有 SIGSEGV。（它指的是我的应用程序，但请注意，反向 .com 名称被截断。我不确定这是否异常。） 4，C++ _NativePurchasingObserverPostEvent 中的跟踪永远不会到达。

日志：

> 12-05 10:24:47.380: D/com.mycompany.amazoninapp.PurchasingObserver@41970368(4604): onGetUserIdResponse: (com.amazon.inapp.purchasing.GetUserIdResponse@4196cf98, requestId: "dcf8e712-078b-4d47-9533- ee9ae544f53d”，getUserIdRequestStatus：“SUCCESSFUL”，userId：“DefaultTestUser”）
> 
> 12-05 10:24:47.380: D/com.mycompany.amazoninapp.PurchasingObserver@41970368(4604): 发布事件...
> 
> 12-05 10:24:47.380: A/libc(4604): 致命信号 11 (SIGSEGV) 在 0x00000008 (code=1), 线程 4604 (y.amazoninapp)
> 
> 12-05 10:24:47.390: I/AmazonSDKTester(3529): 发送购买更新响应广播 ({"revokedSkus":[],"offset":"1354703087397","status":"SUCCESSFUL","re​​questId": "b9aee42e-4f50-42c4-8a12-ba9eb1d19155","isMore":false,"receipts":[{"sku":"com.mycompany.amazoninapp.ENTI01","token":"eyJ0eXBlIjoiTk9OQ09OU1VNQUJMRSIsInNrdSI6ImNvbS5wbGF5ZXJ0aHJlZS5hbWF6b25pbmFw\ncC5FTlRJMDEifQ\n", "itemType":"ENTITLED"}],"userId":"DefaultTestUser"})

我经历了正确获取 JNI 类名和方法签名字符串的迭代（我们已经过去了 UnsatisfiedLinkErrors）；我正在仔细检查空字符串。我的 JNI 的其余部分工作正常，亚马逊应用内购买 UI 正确显示。保证在注册本机方法之前不会生成事件。

是什么导致了崩溃？

感谢您提前输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:32:00.117

您需要将您的函数声明为使用`C`调用约定。声明`extern "C"`如下：

```
extern "C" void _NativePurchasingObserverPostEvent(JNIEnv* pEnv, jobject obj, jint type, jstring jsonData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T23:25:29.190

尝试使用在 C++ 代码`javah`中创建一个标头`#include`，而不是自己编写函数原型。

# php - 在静态方法和此方法调用的方法中使用 $this

> ID：13722059
> 
> 赞同：0
> 
> 时间：2012-12-05T11:17:07.217
> 
> 标签：php, static

如何`$this->var1`在从静态方法调用的方法中使用？我有这个方法：

```
static public function getModuleConfigInputfields(array $data) {
    $fields = new InputfieldWrapper();
    $modules = Wire::getFuel('modules');
    $field = $modules->get("InputfieldText");
    $field->attr('name+id', 'apiKey');
    $field->attr('value', $data['apiKey']);
    $field->label = "API Key (Developer Key)";
    $field->description = 'Enter the API key';
    $fields->append($field);
    $field = $modules->get("InputfieldSelect");
    $field->attr('name+id', 'list_id');
    $mailing_lists = self::get_mc_lists();
    foreach($mailing_lists['data'] as $list)
    {
        $field->addOption($list->list_name, $list->list_id); 
    }
    $field->label = "Mailing list";
    $field->description = 'Choose a mailing list';
    $fields->append($field);
    return $fields;
} 
```

我想调用这个方法：

```
public function get_mc_lists()
{
    $api = new MCAPI($this->apiKey);

    $retval = $api->lists();

    if ($api->errorCode){
        return array('errorcode' => $api->errorCode, 'errormessage' => $api->errorMessage);
    } else {
        return array('data' => $retval['data'], 'total' => $retval['total']);
    }

} 
```

但我收到此错误：

> 不在对象上下文中使用 $this 时出错（第 31 行

第 31 行，即：`$api = new MCAPI($this->apiKey);`

那么我该如何解决这个问题，解决这个问题......我真的被困在这个问题上

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T11:27:36.973

静态方法没有与之关联的任何对象，因此`$this`在静态方法中没有可用的引用。但是，您可以将变量声明为静态并直接使用它而无需`$this`引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T11:27:37.427

Trimbitas 是正确的，你需要

```
self::$apiKey 
```

$this 仅适用于实例化对象，不适用于静态类函数。

# ruby-on-rails - 安全性：定义的角色可以通过 url 编辑和更改被滥用。在红宝石应用程序中

> ID：13722061
> 
> 赞同：6
> 
> 时间：2012-12-05T11:17:19.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在这个应用程序中有四个角色，

角色可以通过编辑 url id 进入未经授权的页面，并对页面的可用选项执行操作，从而误导应用程序故障。

任何人都对此有想法。是关闭会话的问题还是路由许可问题...提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:30:30.247

它与路由无关，您可以使用过滤器自己限制操作访问，即

```
class MyController < ApplicationController
  before_filter :check_access

  def secure_action_a
  end

  def secure_action_b
  end

  private

  def check_access
    case params[:action]
      when 'secure_action_a':
        redirect_to root_path, error: "Not Allowed" unless current_user.role == 'admin'
      when 'secure_action_b':
        redirect_to root_path, error: "Not Allowed" unless current_user.role == 'user'
    end
  end
end 
```

并且在一个动作上，您应该验证用户是否有权访问资源，所以假设您有一个向用户显示交易的操作，并且如果您编写如下代码，他只能看到他的交易：

```
def transaction
  @transaction = Transaction.find(params[:id])
end 
```

那么你有一个大问题，因为任何人都可以开始写像“http://mywebsite.com/transaction/23”这样的请求并看到交易，因为当前用户没有任何过滤器，所以你通常确保用户拥有资源

```
def transaction
  @transaction = current_user.transactions.find(params[:id])
end 
```

或

```
def transaction
  @transaction = Transaction.where(user_id: current_user.id, id: params[:id])
end 
```

稍后您可以使用[cancan](https://github.com/ryanb/cancan)等高级 gem来控制对资源的访问

最后，请务必阅读[rails 安全指南](http://guides.rubyonrails.org/security.html)

# c++ - 使用 Eigen 的网格：MatrixX3f 或 std::vector ?

> ID：13722062
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:20.243
> 
> 标签：c++, graphics, gpu, eigen

我在一个计算机图形项目中使用[Eigen](http://eigen.tuxfamily.org)库，其网格会经常变化。

对所有顶点位置、法线等使用动态特征矩阵对性能有何影响？

我应该使用：

```
Eigen::Matrix<float, Eigen::Dynamic, 3, Eigen::RowMajor> vertices; 
```

或者

```
std::vector<Eigen::Vector3f> vertices; 
```

每次更改后，我都必须将网格数据复制到 GPU，但据我了解，我可以使用 memcpy 有效地使用两种表示形式进行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:03:28.837

Vector 可能会消耗更多内存，因为它通常分配的空间比存储数据所需的空间多，并且`Eigen::Vector3f`每次调整它的大小时，vector 都会调用默认构造函数和析构函数。AFAIK，默认`Eigen::Vector3f`构造函数是空的，因此在发布构建中花费为零（但由于这个和调试迭代​​器，您可能会在调试构建中遇到性能问题）。另一方面，`Eigen::Matrix`每次调整大小时都会重新分配内存（它也会复制内容，就像`std::vector`你使用conservativeResize一样），这很慢。

但是，我还是推荐你使用vector，因为它更方便。您可以动态添加元素，无需重新分配即可调整其大小，在矢量上使用标准算法更简单。如果你想确定你的向量不会消耗比需要更多的内存，你可以使用这个技巧来调整它的大小：

```
std::vector<Eigen::Vector3f> vertices;
vertices.swap( std::vector<Eigen::Vector3f>(size, Eigen::Vector3f()) ); 
```

或查看[shrink_to_fit](http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit)

是的，您可以使用 memcpy 使用这两种表示有效地复制数据。但是 using`std::copy`将在发布版本中以相同的性能完成相同的工作（有时它甚至被编译器替换为`memcpy`）。

但是，如果您仍然对性能不满意，以下是我为自己制定的在这种情况下做出决定的提示：

*   如果您要经常调整顶点数组的大小（添加或删除元素）->`std::vector`避免频繁的重新分配。
*   如果您将大量数据存储在顶点数组中->`Eigen::Matrix`避免过多的内存消耗。
*   如果您对调试模式下的性能不满意（如果您经常处理顶点数组中的数据，这将是幸运的）-> go with `Eigen::Matrix`，`stl`调试迭代器可能会破坏性能（仅适用于 MSVC）

还可以考虑[boost::shared_array](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_array.htm) (scoped_array)，它们是专门为存储大块数据而不消耗额外内存而设计的。在您的场景中使用它们更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:33:11.623

动态分配的矩阵数组通常存在两个问题：

*   您将无法使用全局`memcpy`来复制整个结构：在动态分配矩阵的情况下（例如，您有 an`std::vector<float*>`而不是 an `std::vector<Eigen::Vector3f>`），您的数组仅包含一系列指针，并且所有这些指针都可以指向到内存中非常不同的位置。因此，执行 a`memcpy`只会复制指针，而不是数据，并且无法更改它，因为您的元素在内存中不是连续的（只有它们的指针是）。相反，您需要遍历 的每个元素，分别使用和元素`std::vector`访问它。例如，在执行 your 时，您将拥有（或类似的东西：它存储一个指针和许多行和列），而`operator[]``memcpy``memcpy``sizeof(Eigen::Matrix<float, Eigen::Dynamic, 3, Eigen::RowMajor>) = sizeof(void*) + 2*sizeof(int)``sizeof(Eigen::Vector3f) = 3*sizeof(float)`因为它真正存储数据而不是指针。

*   如果您需要频繁地创建和销毁矩阵，则使用动态分配的矩阵执行此操作会慢得多。具有固定大小的矩阵允许在堆栈上进行分配，这使其更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T08:57:13.477

两种表示的内存布局完全相同。主要区别在于，如果您需要插入向量或类似的东西， std::vector<> 会更加灵活。另一方面 Matrix<.,3,Dynamic> 是一个 Eigen 对象，因此更容易对其执行一些操作，例如：

```
Matrix<.,3,Dynamic> data;
data = Affine3f(...) * data; // apply an affine transformation
data.colwise().norm(); // get the norm of each vectors
... 
```

# excel - Excel - 不同的超链接指向同一个网站

> ID：13722063
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:24.363
> 
> 标签：excel, hyperlink, jasper-reports

我从 iReport 中设计的 Jasper 报告生成了 Excel，其中包含一些不同的网站超链接。它们都包含条件，例如

```
nvl(Country,'null')='SK' 
```

当我在 Excel 工作表中打开第一个超链接时，它会打开正确的网站，其中条件已更改

```
nvl%28Country%2C%27null%27%29%3D%27SK%27% 
```

问题是，当我然后单击具有其他条件的其他链接时，它仍然会打开第一个链接。

注意：链接长度超过 255 个字符。

其他人遇到过这个问题吗？它可以以某种方式修复吗？

# asp.net-mvc-3 - 以与控制器和操作相同的方式路由 MVC 区域内容？

> ID：13722065
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:27.423
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

我有一个带有区域的 MVC 3 项目，我们称之为 MyArea。我想将特定于 MyArea 的脚本和样式放在该区域的子文件夹下，从而产生如下的项目文件夹结构：

```
/Areas/MyArea
/Areas/MyArea/Controllers
/Areas/MyArea/Scripts   <-------- I want these here
/Areas/MyArea/Styles    <--------
/Areas/MyArea/ViewModels
/Areas/MyArea/Views
/Controllers
/Scripts
/Styles
/ViewModels
/Views 
```

很好，但是现在当我链接到文档/视图中的样式时，它必须这样写：

```
<link href="/Areas/MyArea/Styles/MyStyle.css" rel="stylesheet" type="text/css" /> 
```

我更喜欢这样链接它：

```
<link href="/MyArea/Styles/MyStyle.css" rel="stylesheet" type="text/css" /> 
```

这将与该地区的反对者和行动的路线相同。

我怎样才能实现这个路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:36:31.407

研究了 Behnam Esmaili 提到的问题，并进一步阅读，进一步阅读 :-) 这就是我想出的。

我创建了一个新的 IHttpModule 来检查每个传入请求的路径`/areaname/contentfolder/`，其中`areaname`是任何应用程序区域的名称，并且`contentfolder`是任何选定的可能内容文件夹名称列表中的任何一个。我选择硬编码一组合理的内容文件夹名称，但您可以让每个区域注册在某处注册其所有内容文件夹名称并使用它。

注意：在线 Microsoft 文档[演练：创建和注册自定义 HTTP 模块](http://msdn.microsoft.com/en-us/library/ms227673%28v=vs.100%29.aspx)建议您将 HTTPModule 类放在 App_Code 文件夹中。不！该文件夹中的类由 ASP.Net 运行时编译，从而在 temp .Net 文件夹中生成该类的二进制副本，这反过来在 ASP.Net 尝试加载 HTTPModule 类时会导致歧义。将课程放在您选择的不同文件夹中。

为了查找所有区域名称，我选择使用`AppDomain.CurrentDomain.GetAssemblies()`并查找`System.Web.Mvc.AreaRegistration`. 创建每个实例并检索其`AreaName`属性的值。

完整源代码：

```
public class HTTPModuleAreaContent : IHttpModule
{
    private List<string> allAreaNames = null;

    public HTTPModuleAreaContent()
    {
    }

    public String ModuleName
    {
        get { return "HTTPModuleAreaContent"; }
    }

    public void Init(HttpApplication application)
    {
        application.BeginRequest +=
            (new EventHandler(this.BeginRequest));
    }

    private void GetAreaNames(HttpContext context)
    {
        allAreaNames = AppDomain.CurrentDomain.GetAssemblies()
            .SelectMany(ass => ass.GetTypes())
            .Where(t => t.IsSubclassOf(typeof(AreaRegistration)))
            .Select(t => ((AreaRegistration)Activator.CreateInstance(t)).AreaName)
            .ToList();
    }

    private void BeginRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        HttpContext context = application.Context;
        if (allAreaNames == null)
            GetAreaNames(context);

        string filePath = context.Request.FilePath.ToUpper();
        string areaName = allAreaNames
            .FirstOrDefault(an => filePath.StartsWith('/' + an + '/', StringComparison.OrdinalIgnoreCase));
        if (string.IsNullOrEmpty(areaName))
            return;
        string areaNameUpper = areaName.ToUpper();
        if (filePath.StartsWith('/' + areaNameUpper + "/STYLES/")
            || filePath.StartsWith('/' + areaNameUpper + "/SCRIPT/")
            || filePath.StartsWith('/' + areaNameUpper + "/SCRIPTS/")
            || filePath.StartsWith('/' + areaNameUpper + "/JS/")
            || filePath.StartsWith('/' + areaNameUpper + "/JAVASCRIPT/")
            || filePath.StartsWith('/' + areaNameUpper + "/JAVASCRIPTS/")
            || filePath.StartsWith('/' + areaNameUpper + "/CONTENT/")
            || filePath.StartsWith('/' + areaNameUpper + "/IMAGES/")
        )
            context.RewritePath("/Areas/" + context.Request.Path);
    }

    public void Dispose() { }
} 
```

**编辑：**显然，上述解决方案不适用于不在域根目录的应用程序。经过一些工作，我想出了以下解决方案：

```
public class HTTPModuleAreaContent : IHttpModule
{
    private List<string> allAreaNames = null;
    private HashSet<string> folderNamesToRewrite = new HashSet<string>();

    public HTTPModuleAreaContent()
    {
    }

    public String ModuleName
    {
        get { return "HTTPModuleAreaContent"; }
    }

    public void Init(HttpApplication application)
    {
        application.BeginRequest +=
            (new EventHandler(this.BeginRequest));
        folderNamesToRewrite.Add("STYLES");
        folderNamesToRewrite.Add("SCRIPT");
        folderNamesToRewrite.Add("SCRIPTS");
        folderNamesToRewrite.Add("JS");
        folderNamesToRewrite.Add("JAVASCRIPT");
        folderNamesToRewrite.Add("JAVASCRIPTS");
        folderNamesToRewrite.Add("CONTENT");
        folderNamesToRewrite.Add("IMAGES");
    }

    private void GetAreaNames(HttpContext context)
    {
        allAreaNames = AppDomain.CurrentDomain.GetAssemblies().SelectMany(ass => ass.GetTypes()).Where(t => t.IsSubclassOf(typeof(AreaRegistration))).Select(t => ((AreaRegistration)Activator.CreateInstance(t)).AreaName).ToList();
    }

    private void BeginRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        HttpContext context = application.Context;
        if (allAreaNames == null)
            GetAreaNames(context);

        string filePath = context.Request.FilePath;
        string areaName = allAreaNames.FirstOrDefault(an => Regex.IsMatch(filePath, '/' + an + '/', RegexOptions.IgnoreCase | RegexOptions.CultureInvariant));
        if (string.IsNullOrEmpty(areaName))
            return;
        string areaNameUpper = areaName.ToUpperInvariant();
        Regex regex = new Regex('/' + areaNameUpper + "/([^/]+)/", RegexOptions.IgnoreCase | RegexOptions.CultureInvariant);
        Match m = regex.Match(filePath);
        if (m.Success && m.Groups.Count > 1)
        {
            string folderName = m.Groups[1].Value;
            string folderNameUpper = folderName.ToUpperInvariant();
            if (folderNamesToRewrite.Contains(folderNameUpper))
                context.RewritePath(regex.Replace(context.Request.Path, string.Format("/Areas/{0}/{1}/", areaName, folderName), 1));
        }
    }

    public void Dispose() { } 
```

# machine-learning - 这些分类器哪个更好？

> ID：13722067
> 
> 赞同：-2
> 
> 时间：2012-12-05T11:17:36.110
> 
> 标签：machine-learning

我不确定以下两个分类器中哪个分类器更好：

`Classifier 1 - Training set = 100%, Test set 70%`和 `Classifier 2 - Training set = 70%, Test set 75%`

我需要争辩说分类器 1 比分类器 2 更好。

两者都有其优点和缺点，但我没有具体的答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:28:02.480

第二个可能更好。

第一个分类器显然存在过[拟合问题](http://en.wikipedia.org/wiki/Overfitting)。换句话说，它不是学习训练集的基本原理，而是学习对数据的详尽描述。

这并不意味着第二个分类器很棒。但是，一般来说，如果 A 在测试集上的性能优于 B，则分类器 A 优于分类器 B。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:26:39.093

根据您提供的详细信息，与分类器 2 相比，分类器 1 似乎对训练集过度拟合，因此对测试集的表现更差。这表明分类器 2 在测试集方面“更好”。

如果您想以另一种方式争论，您可能需要指出有关分类器 1 的一些细节，例如它是如何训练的，使用了哪些算法。

# java - 适合 JPanel 的最大组件大小

> ID：13722068
> 
> 赞同：0
> 
> 时间：2012-12-05T11:17:39.843
> 
> 标签：java, swing, jpanel

我正在尝试将图像放置在 JPanel 中。我找到了 JPanel 的宽度和高度，并将图像缩放为与 JPanel 相同的宽度和高度。我的问题是图像稍微在 JPanel 之外。

一个简单的简短示例是

```
public class TestJPanel {

/**
 * @param args
 */
public static void main(final String[] args) {
    final JFrame jf = new JFrame();

    final JButton jb = new JButton("100by100");
    jb.setPreferredSize(new Dimension(100,100));

    final JPanel jp = new JPanel();
    jp.setPreferredSize(new Dimension(100, 100));

    System.out.println(jp.getInsets());

    jp.add(jb);

    jf.getContentPane().add(jp);
    jf.pack();

    jf.setVisible(true);
}
} 
```

在这种情况下，按钮稍微位于 JPanel 之外。除了`JPanel.getWidth()`和等效的高度方法之外，还有其他方法可以找到要放入 JPanel 的组件的最大尺寸吗？

**编辑**

我认为这是布局管理器的问题。在我的应用程序中，我使用的是 GridBagLayout。

将上面的示例更改为以下示例可防止按钮被切断。

```
public class TestJPanel {

/**
 * @param args
 */
public static void main(final String[] args) {
    final JFrame jf = new JFrame();

    final JButton jb = new JButton("100by100");
    jb.setPreferredSize(new Dimension(100,100));

    final JPanel jp = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));
    jp.setPreferredSize(new Dimension(100, 100));

    System.out.println(jp.getInsets());

    jp.add(jb);

    jf.getContentPane().add(jp);
    jf.pack();

    jf.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:58:22.733

正如我在我的问题中所说，问题出在布局管理器上。在我的应用程序中，这不是问题，因为我使用的是[GridBagLayout](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridBagLayout.html)。我有一系列 JComponent，其中一个是[ImageScrollPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html)的扩展，它没有空边框。

我发现诀窍是，类似于这个[问题](https://stackoverflow.com/questions/218825/how-to-reduce-space-between-jcheckboxes-in-gridlayout)，将我的组件的边框设置为空边框。

# web-services - 我如何为restful web服务格式化xml输入并调用服务

> ID：13722074
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:56.330
> 
> 标签：web-services, spring, rest

大家好，我使用restFul Web服务公开服务服务器端代码是

@RequestMapping(value = "/getPerson", method = RequestMethod.POST) public ModelAndView getPerson(@RequestParam("inputXml") String inputXml) {
-------------------- ------ ----------------
} return new ModelAndView("userXmlView", BindingResult.MODEL_KEY_PREFIX + String.class ， “测试”）; }

客户端实现是：

```
 URL oracle = new URL("http://localhost:8081/testWeb/restServices/getPerson?inputXml=input");
         System.out.println("Oracle URl is "+oracle);
         HttpURLConnection connection = (HttpURLConnection)oracle.openConnection();
         connection.setDoOutput(true);
        connection.setRequestProperty("Content-type", "application/xml; charset:ISO-8859-1");
        connection.setRequestMethod("POST");
        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String inputLine;
       while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);  
     in.close(); 
```

我能够使用 URL 访问服务 `http://localhost:8081/testWeb/restServices/getPerson?inputXml="input"` 实际上我的要求是，我需要像这样将 xml 字符串作为输入传递

```
http://localhost:8081/testWeb/restServices/getPerson?inputXml="<?xml%20version="1.0"%20encoding="UTF-8"%20standalone="yes"?><product><code>WI1</code><name>Widget%20Number%20One</name><price>300.0</price></product>" 
```

请帮我找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:26:02.587

Maya`/getPerson`不是 RESTful URI 名称。你应该使用类似的东西`/person`。这样，您可以使用 HTTP`GET`或它。`DELETE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:32:25.453

看看[RestAssured](http://code.google.com/p/rest-assured/wiki/Usage#Parameters)

```
given().
       formParam("formParamName", "value1").
       queryParam("queryParamName", "value2").
when().
       post("/something"); 
```

或弹簧[RestTemplate](http://blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/)

```
Map<String, String> vars = new HashMap<String, String>();
vars.put("count", "5");
restTemplate.getForObject(person, Person.class, vars); 
```

# javascript - 单击按钮时添加值

> ID：13722075
> 
> 赞同：1
> 
> 时间：2012-12-05T11:17:56.470
> 
> 标签：javascript, jquery, function, button, click

每次单击 a并将其显示在屏幕上时`10`，我都想添加。我已经尝试了一切，但我无法让它工作。`0``button`

这属于更长的代码：

```
var bet = 0;
pen.fillText('Bet: ' + bet, 350, 390);

function reactToBetIncrease() {
    bet += 10;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:20:12.810

```
var bet=0;

pen.fillText('Bet: '+bet,350,390);

function reactToBetIncrease()

{

    bet += 10;
    pen.fillText('Bet: '+bet,350,390);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:21:32.090

HTML

```
<button id="myButton"> 
```

JavaScript

```
var bet = 0;
$("#myButton").click(function() { bet += 10; }); 
```

**注意：**我不知道您的`pen`对象是什么，也不知道它来自哪个库。它可能需要一次更新调用——在这种情况下，它应该存在于*点击回调*中。否则，它可能需要每帧调用一次。由于您没有具体说明它的作用，因此我将其省略了。

# git - 每个分支的 Git 磁盘使用情况

> ID：13722076
> 
> 赞同：13
> 
> 时间：2012-12-05T11:17:58.747
> 
> 标签：git, diskspace

您知道是否有办法列出每个分支的 git 存储库的空间使用情况？（喜欢`df`或`du`愿意）

分支的“空间使用”是指“尚未在存储库的其他分支之间共享的提交使用的空间”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T11:52:13.143

这没有正确的答案。如果您查看仅包含在特定分支中的提交，您会得到一个 blob 列表（基本上是文件版本）。现在您必须检查这些 blob 是否是其他分支中任何提交的一部分。完成此操作后，您将拥有一个仅属于您的分支的 blob 列表。

现在你可以总结这些 blob 的大小来得到一个结果——但这可能是非常错误的。Git 将这些 blob 相互压缩，因此 blob 的实际大小取决于您的存储库中的其他 blob。您可以删除 1000 个 blob，每个 10MB，并且只释放 1kb 的磁盘空间。

通常一个大的 repo 大小是由 repo 中的单个大文件引起的（如果不是，你可能做错了什么:)。有关如何找到这些的信息可以在这里找到：[Find files in git repo over x MB, that doesn't exist in HEAD](https://stackoverflow.com/questions/298314/find-files-in-git-repo-over-x-megabytes-that-dont-exist-in-head)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:38:14.527

存储库的大部分空间被包含文件的 blob 占用。

但是当一个 blob 由两个分支（或两个具有相同内容的文件）共享时，它不会被复制。存储库的大小不能被认为是分支大小的总和。没有分支占用空间这样的概念。

并且有很多压缩可以节省小文件修改的空间。

通常切断一个分支只会释放一个非常小的、不可预测的空间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T11:34:23.057

Git 维护了一个有向无环提交图，每个提交（在简单的意义上）都会占用磁盘空间。

除非您的所有分支都与第一次提交不同，否则各个分支都会有共同的提交，这意味着每个分支“共享”一些磁盘空间。

这使得提供磁盘使用的“每个分支”数字变得困难，因为它需要限定共享的数量以及共享的其他分支。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T12:19:25.753

似乎没有这样的东西已经存在，这是我为此做的一个 Ruby 脚本。

```
#!/usr/bin/env ruby -w
require 'set'

display_branches = ARGV

packed_blobs = {}

class PackedBlob
    attr_accessor :sha, :type, :size, :packed_size, :offset, :depth, :base_sha, :is_shared, :branch
    def initialize(sha, type, size, packed_size, offset, depth, base_sha)
        @sha = sha
        @type = type
        @size = size
        @packed_size = packed_size
        @offset = offset
        @depth = depth
        @base_sha = base_sha
        @is_shared = false
        @branch = nil
    end
end

class Branch
    attr_accessor :name, :blobs, :non_shared_size, :non_shared_packed_size, :shared_size, :shared_packed_size, :non_shared_dependable_size, :non_shared_dependable_packed_size
    def initialize(name)
        @name = name
        @blobs = Set.new
        @non_shared_size = 0
        @non_shared_packed_size = 0
        @shared_size = 0
        @shared_packed_size = 0
        @non_shared_dependable_size = 0
        @non_shared_dependable_packed_size = 0
    end
end

dependable_blob_shas = Set.new

# Collect every packed blobs information
for pack_idx in Dir[".git/objects/pack/pack-*.idx"]
    IO.popen("git verify-pack -v #{pack_idx}", 'r') do |pack_list|
        pack_list.each_line do |pack_line|
            pack_line.chomp!
            if not pack_line.include? "delta"
                sha, type, size, packed_size, offset, depth, base_sha = pack_line.split(/\s+/, 7)
                size = size.to_i
                packed_size = packed_size.to_i
                packed_blobs[sha] = PackedBlob.new(sha, type, size, packed_size, offset, depth, base_sha)
                dependable_blob_shas.add(base_sha) if base_sha != nil
            else
                break
            end
        end
    end
end

branches = {}

# Now check all blobs for every branches in order to determine whether it's shared between branches or not
IO.popen("git branch --list", 'r') do |branch_list|
    branch_list.each_line do |branch_line|
        # For each branch
        branch_name = branch_line[2..-1].chomp
        branch = Branch.new(branch_name)
        branches[branch_name] = branch
        IO.popen("git rev-list #{branch_name}", 'r') do |rev_list|
            rev_list.each_line do |commit|
                # Look into each commit in order to collect all the blobs used
                for object in `git ls-tree -zrl #{commit}`.split("\0")
                    bits, type, sha, size, path = object.split(/\s+/, 5)
                    if type == 'blob'
                        blob = packed_blobs[sha]
                        branch.blobs.add(blob)
                        if not blob.is_shared
                            if blob.branch != nil and blob.branch != branch
                                # this blob has been used in another branch, let's set it to "shared"
                                blob.is_shared = true
                                blob.branch = nil
                            else
                                blob.branch = branch
                            end
                        end
                    end
                end
            end
        end
    end
end

# Now iterate on each branch to compute the space usage for each
branches.each_value do |branch|
    branch.blobs.each do |blob|
        if blob.is_shared
            branch.shared_size += blob.size
            branch.shared_packed_size += blob.packed_size
        else
            if dependable_blob_shas.include?(blob.sha)
                branch.non_shared_dependable_size += blob.size
                branch.non_shared_dependable_packed_size += blob.packed_size
            else
                branch.non_shared_size += blob.size
                branch.non_shared_packed_size += blob.packed_size
            end
        end
    end
    # Now print it if wanted
    if display_branches.empty? or display_branches.include?(branch.name)
        puts "branch: %s" % branch.name
        puts "\tnon shared:"
        puts "\t\tpacked: %s" % branch.non_shared_packed_size
        puts "\t\tnon packed: %s" % branch.non_shared_size
        puts "\tnon shared but with dependencies on it:"
        puts "\t\tpacked: %s" % branch.non_shared_dependable_packed_size
        puts "\t\tnon packed: %s" % branch.non_shared_dependable_size
        puts "\tshared:"
        puts "\t\tpacked: %s" % branch.shared_packed_size
        puts "\t\tnon packed: %s" % branch.shared_size, ""
    end
end 
```

有了那个，我可以在我的 2Mo git 存储库中看到，我有一个无用的分支，它占用了我 1Mo 的 blob，没有与任何其他分支共享。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-08T16:17:55.070

今天早上我遇到了同样的问题并写了一个快速脚本：

```
for a in $(git branch -a | grep remotes | awk '{print $1}' | sed 's/remotes\/origin\///'); do echo -n ${a} -\ ; git clean -d -x -f > /dev/null 2>&1 ;git checkout ${a} > /dev/null 2>&1; du -hs -I --exclude-dir=.git .;done 
```

这将在重置其内容后检查每个远程分支，以确保我们干净地检查它。然后它将显示没有`.git`目录的大小。

有了这个，我就可以找到推送一个包含大文件的分支的人。

**请记住在另一个克隆目录中执行此操作，因为它会清除所有未提交的内容**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-16T05:35:58.473

在 git 2.3.1 它支持`--disk-usage`

```
# reachable objects
git rev-list --disk-usage --objects --all 
```

[https://git-scm.com/docs/git-rev-list#_examples](https://git-scm.com/docs/git-rev-list#_examples)

# php - 从 wp 帖子页面获取 url

> ID：13722078
> 
> 赞同：0
> 
> 时间：2012-12-05T11:18:00.013
> 
> 标签：php, string

我正在尝试从 wordpress 网站中的 JW 嵌入帖子中获取特定的 .m3u8 网址。

该页面在呈现时包含此代码块。

```
....
"streamer":"",
"provider":"",
"file":"http://mysite.com:1935/live/mp4:folder/video.mp4/playlist.m3u8"}},
{"type":"download","config":{"streamer":"","provider":""}}
]}); 
```

我想要做的是如何获取 url 部分

```
http://mysite.com:1935/live/mp4:folder/video.mp4/playlist.m3u8 
```

并将其存储在一个变量中，以便我可以使用我的 RSS 代码传递它。

什么 php 函数可以从代码块中获取此 URL？

谢谢

# jqchart - 柱形图组填充 jQ 图表

> ID：13722093
> 
> 赞同：0
> 
> 时间：2012-12-05T11:19:00.120
> 
> 标签：jqchart

我希望柱形图看起来像这样。哪里有代表金、银、铜牌的三根柱子

![在此处输入图像描述](../Images/63309e14c022faa2c646c498ca273f72.png)

有没有办法在柱形图中的列之间调整 groupPadding ？如果没有，是否有任何黑客行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:35:46.450

我们已经在我们的论坛中回答了您：

[http://www.jqchart.com/forum/default.aspx?g=posts&t=166](http://www.jqchart.com/forum/default.aspx?g=posts&t=166)

# css - 如何删除使用CSS相对定位元素后出现的空白

> ID：13722095
> 
> 赞同：40
> 
> 时间：2012-12-05T11:19:11.090
> 
> 标签：css, layout, whitespace

出现的问题如下：在使用 CSS 对元素进行相对定位后，我得到了元素所在位置的空白……我不想要空白！

```
 .thetext 
    {
        width:400px;
        background:yellow;
        border: 1px dashed red;
        margin:50px;
        padding:5px;
        font-weight:bold;
    }
    .whiteblob
    {
        position:relative;
        top:-140px;
        left:70px;
        width:200px;
        height:50px;
        border: 4px solid green;
        background:white;
        font-size:2.5em;
        color:red;

    }
    .footerallowedwhitespaceinblue
    {
        height:10px;
        background-color:blue;
    }
    .footer
    {
        background-color:grey;
        height:200px;
    }
```

```
<div class="thetext"><script type="text/javascript">for(c=0;c<50;c++){document.write("Lorem ipsum dolor est, ");}</script>
    </div>
    <div class="whiteblob">
        &nbsp;buy this!
    </div>
    <div class="footerallowedwhitespaceinblue">
    </div>
    <div class="footer">
        The whitespace above is way to big! The buy this still takes up space whilst it is moved.
    </div>
```

JSFiddle：http: [//jsfiddle.net/qqXQn/](http://jsfiddle.net/qqXQn/)

正如您在示例中看到的，我想要的唯一空白是由 50px 边距的 thetext 块引起的空白；以及footerallowedwhitespaceinblue 的间距（制作为蓝色，因此可见）。问题是......现在空白太大了，因为“买这个” div 在相对定位后仍然占用空间。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-05T11:19:11.090

您可以通过应用等于元素宽度或高度的负边距来简单地解决此问题。

对于位于顶部的 100px 高度的元素，您将应用 margin-bottom:-100px;

对于位于底部的 100px 高度的元素，您将应用 margin-top:-100px;

对于位于左侧的 100px 宽度的元素，您将应用 margin-right:-100px;

对于位于右侧的 100px 宽度的元素，您将应用 margin-left:-100px;

剪切和粘贴 CSS 片段：

```
.top 
    {
    postion:relative;
    top:-100px;
    height:25px;
    margin-bottom:-25px;
    }
.bottom
    {
    postion:relative;
    top:100px;
    height:25px;
    margin-top:-25px;
    }
.left
    {
    postion:relative;
    left:-100px;
    width:25px;
    margin-right:-25px;
    }
.right
    {
    postion:relative;
    left:100px;
    width:25px;
    margin-left:-25px;
    } 
```

修改后的示例代码变为：

```
.thetext 
{
    width:400px;
    background:yellow;
    border: 1px dashed red;
    margin:50px;
    padding:5px;
    font-weight:bold;
}
.whiteblob
{
    position:relative;
    top:-140px;
    left:70px;
    width:200px;
    height:50px;
    margin-bottom:-50px;
    border: 4px solid green;
    background:white;
    font-size:2.5em;
    color:red;

}
.footerallowedwhitespaceinblue
{
    height:10px;
    background-color:blue;
}
.footer
{
    background-color:grey;
    height:200px;
}
```

```
<div class="thetext"><script type="text/javascript">for(c=0;c<50;c++){document.write("Lorem ipsum dolor est, ");}</script>
</div>
<div class="whiteblob">
    &nbsp;buy this!
</div>
<div class="footerallowedwhitespaceinblue">
</div>
<div class="footer">
</div>
```

[http://jsfiddle.net/qqXQn/1/](http://jsfiddle.net/qqXQn/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T07:12:16.673

这是一个例子。在这种情况下，对象先向右移动，然后使用负的顶部值向上移动。消除其尾随边距空间需要添加一个相等的负边距值。

```
 position:relative;
 width:310px;
 height:260px;
 top:-332px;
 margin-bottom:-332px;
 left:538px; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-20T07:57:50.490

你可以通过在 position:relative 之前给出 float:left 来解决这个问题。使用 margin-left, margin-top 属性而不是 top, left 也。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-04T04:14:37.703

如果你足够勇敢，你可以在相对定位的元素上放置`overflow:hidden;`一个和一个`bottom negative margin`，它会移除剩余的间距:) 即在响应式站点上。

但请检查它是否隐藏了所需的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-25T21:57:34.793

将相对 elememt top 设置为父字体大小，如下代码：

玉模板中的html：

```
div.dialog(id='login')
        div.dialog-header
            span.title login
            a.dialog-close(href="")  X
            hr
        div.dialog-body
            p hello this is body
            hr
        div.dialog-footer
            p this is footer 
```

和CSS：

```
 .dialog
    {
        height: 100%;
        position: absolute;
        top: -100%;
        right: 50%;
        left: 50%;
        bottom: 100%;
        border: 2px solid rgba(255, 255, 255,1);
        border-radius: 3px;
        font-size: 14px;

    }   
.dialog-body{
        position: relative;
        background-color: #F99;
        height: 80%;
        top: -14px;
    }
    .dialog-header{
        position: relative;
        height: 10%;
        background-color: #F9F9F9;

    }
    .dialog-footer{
        position: relative;
        height: 10%;
        top: -28px;
        background-color: #F9fdf9;

    } 
```

这对我有用！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-04T00:46:03.283

将外部 div 设置为“位置：相对”，将要移动的 div 设置为“位置：绝对”并设置顶部和左侧值。这将相对于外部 div（而不是页面）定位项目。相对位置留下空隙。绝对没有。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-05-16T13:39:26.940

这对我不起作用，有 4 个独立的相互关联的相对位置。我无法让它工作，甚至添加和重新定位每个：

目前，这是优化的（参见[http://christ.eye-of-revelation.org/index.html](http://christ.eye-of-revelation.org/index.html)第 2 页），但在所有情况下，它们都用于根据媒体或窗口大小突出显示图像的区域……< /p>

解决方案是全球性的，而且更容易；它还用于两个单独的块来模拟和交换两个页面：所有问题都解决了定义一个区域的宽度和高度，只需设置它的样式=“溢出：隐藏；”

希望这能有所帮助。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-03-02T18:47:05.740

将高度设置为 0 `height:0px;`：。

现在这个 div 可以放在任何地方。

# jsf-2 - 如何将多个组件放在 h:panelGrid 的单个单元格中

> ID：13722097
> 
> 赞同：8
> 
> 时间：2012-12-05T11:19:13.430
> 
> 标签：jsf-2, panelgrid

我想`<h:panelGrid>`用一列创建一个。但是在一行中，我想将两个组件放在一个单元格中。

例如

```
<h:panelGrid columns="1">
     <h:outputText value="ROW 1 A"/>
     <h:outputText value="ROW 1 B"/>

     <h:outputText value="ROW 2"/>
</h:panelGrid> 
```

应该以两行结束

> 第 1 行 A 第 1 行 B
> 第 2 行

但是，它目前最终成为

> 第 1 行 A 第
> 1 行 B
> 第 2 行

如何将多个组件放在一个单元格中`<h:panelGrid>`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T11:24:30.763

用单包装怎么样`<h:panelGroup>`

```
<h:panelGroup>
    <h:outputText value="ROW1 A"/>
    <h:outputText value="ROW 1 B"/>
</h:panelGroup> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:24:22.930

将它们包裹在一个`<h:panelGroup>`. [这是一个例子](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGroup.html)。

# php - 记录所有操作：好的设计模式？

> ID：13722102
> 
> 赞同：1
> 
> 时间：2012-12-05T11:19:36.970
> 
> 标签：php

我有一堂课：

```
class Phone
{
    public function addnewnumber ($name, $number)
    {
    }
} 
```

现在让我们假设我想记录所有操作。我不想在`Logger::add();`里面放一些东西`addnewnumber()`——也许不可能修改那个类。那怎么解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:32:18.543

您不能在每个类的每个方法上自动调用某些日志记录功能。如果你想在手机的 addnewnumber 方法中添加日志记录，而不改变类本身，你可以在你自己的类中扩展它。

```
class Phone
{
    public function addnewnumber($name, $number)
    {
    }
    public function somethingelse()
    {
    }
}

class MyPhone extends Phone
{
    public function addnewnumber($name, $number)
    {
        Logger::Add();
        parent::addnewnumber($name, $number);
    }
} 
```

现在您的 MyPhone 类具有所有电话方法，但是当调用 addnewnumber 方法时，它会记录号码，然后调用实际方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:46:10.690

在某些情况下，您可以使用一个代理类来包装您的对象并允许您使用`__call`. 它看起来像这样：

```
class Proxy
{
    private $_target;
    public function __construct($target)
    {
        $this->_target = $target;
    }

    public function __call($name, $params)
    {
        $callable = array($this->_target, $name);
        if (!is_callable($callable)) {
            trigger_error('Call to undefined method '.
                           get_class($this->_target).'::'.$name, E_USER_ERROR);
        }

        return $this->dispatch($callable, $params);
    }

    protected function dispatch($callable, $params)
    {
        return call_user_func_array($callable, $params);
    }
} 
```

然后，您可以从此类派生并覆盖`dispatch`以执行自定义处理：

```
class LoggingProxy extends Proxy
{
    protected function dispatch($callable, $params)
    {
        echo "Before calling ".get_class($callable[0]).'::'.$callable[1]."\n";
        $return = parent::dispatch($callable, $params);
        echo "After calling ".get_class($callable[0]).'::'.$callable[1]."\n";
        return $return;
    }
} 
```

并像这样使用它：

```
$proxy = new LoggingProxy(new Phone);
$proxy->addnewnumber(1, 2); 
```

**[看到它在行动](http://ideone.com/rCqRDs)**。

但是，这种方法确实有一些缺点：

*   它不适用于需要某种类型对象的代码（您传递的是 a`Proxy`而不是 a `Phone`）
*   它不允许您访问包装类的非公共成员

# android - 按下菜单键时打开自定义操作栏更多项目

> ID：13722106
> 
> 赞同：0
> 
> 时间：2012-12-05T11:19:51.883
> 
> 标签：android, android-actionbar, android-menu

由于 Android 不支持上下文菜单中的图标，我决定用我自己的自定义项替换本机 ActionBar More 菜单项。问题是它不听菜单硬件按键。有什么办法可以实现这种行为吗？实际上问题是找到一种方法来通过按键激活 ActionBar 中的项目。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:45:17.920

要在硬件菜单按钮单击时显示您的菜单（也是一个 ActionBar 项），您可以这样做（您需要在 OnCreateOptionsMenu 回调中保留对您的菜单的引用）：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch(keyCode) {
        case KeyEvent.KEYCODE_MENU:
            mainMenu.performIdentifierAction(R.id.your_custom_menu, 0);
           return true;  
    }
    return false;
} 
```

# zend-framework - Zend：如何使用zend创建图像选择表单并上传图像？

> ID：13722109
> 
> 赞同：0
> 
> 时间：2012-12-05T11:19:59.920
> 
> 标签：zend-framework, zend-form

基本上，如果用户想要上传自己的图像，我想要一个可以显示用户默认模板集和上传图像的表单。像这样的东西：

![在此处输入图像描述](../Images/4ffbb45ce74488c5149c9ed27250eee4.png)

我如何在 Zend 中实现这一点？到目前为止，我已经尝试创建一个模板表单类

```
class application_forms_FormTemplate extends Zend_Form{
public function init()
{
    $image = new Zend_Form_Element_Image('image', array('src' =>'/path/to/dock.jpg'));

    $template = $this->createElement('radio','tygTemplate');
    $template->addMultiOptions(
                    array(
                        'desert.jpg' => $image,
                        'dock.jpg' => 'something'
                    )
                )
            ->setSeparator('');

    $this->addElements(array(
                        $template,
                        //$image
                    ));
}} 
```

当我在视图中调用此表单时，我得到了单选按钮，但图像未在收音机旁边呈现。

有什么我做错了或者有人能指出我更好的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:37:14.803

我暂时无法测试，但可能是 Zend Form 的问题（默认转义），请尝试以下操作：

```
$template = new Zend_Form_Element_Radio('template', array('escape' => false)); 
$template->addMultiOptions(array(
    'xxx.jpg' => $image,
)); 
```

# ruby - CORS SSE - 未捕获的错误：SECURITY_ERR：DOM 异常 18

> ID：13722120
> 
> 赞同：0
> 
> 时间：2012-12-05T11:20:49.140
> 
> 标签：ruby, html, google-chrome, server-sent-events, goliath

我正在开发一个流媒体服务器，它使用[Goliath](https://github.com/postrank-labs/goliath)和 SSE 实时发送最新推文、新闻 ets 等更新。该服务器将映射到不同的域。

**索引.html**

```
<script>
    if(typeof(EventSource)!=="undefined") {
        var source = new EventSource('http://192.168.0.44:9000/api/stream/articles?channel=Headlines');

        // new connection opened callback
        source.addEventListener('open', function(e) {
          console.log('connection opened');
        }, false);

        // new connection opened callback
        source.addEventListener('message', function(e) {
            console.log(e.data);
           msg = JSON.parse(e.data);
           $('#result').append('<br/>').append(msg);
        }, false);

        // connection closed callback
        source.addEventListener('error', function(e) {
          if (e.eventPhase == EventSource.CLOSED) {
            console.log('connection closed');
          }
        }, false);
    } else {
        $('#result').append('<br/>').append("Whoops! Your browser doesn't receive server-sent events.") ;
    }
  </script> 
```

**歌利亚组件**

```
#!/usr/bin/env ruby
require 'rubygems'
require 'goliath'

class RedisPubsub < Goliath::API
  use(Rack::Static, :root => Goliath::Application.app_path("public"), :urls => ["/index.html", "/twitter.html", "/favicon.ico", '/stylesheets/', '/javascripts/', '/images/'])
  use Goliath::Rack::Params
  use Goliath::Rack::Render, 'json'

  def response(env)
    ...
    ....
    env.stream_send("data:#{message}\n\n")
    streaming_response(200, {'Content-Type' => 'text/event-stream', 'Access-Control-Allow-Origin' => '*'})
  end
end 
```

Goliath 流媒体服务器在本地机器的 9000 端口上运行。当我尝试通过`http://localhost/index.html`它访问页面时，即使它发送 CORS 'Access-Control-Allow-Origin' 标头作为响应，也会给出 Chrome 中提到的错误。请不要在这里它在FF上工作正常。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:55:30.423

您需要将 Content-type 标头设置为 text/event-stream，如[http://www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)中所示。

# php - PHPUnit 严格模式 - 如何更改默认超时

> ID：13722125
> 
> 赞同：9
> 
> 时间：2012-12-05T11:21:03.680
> 
> 标签：php, timeout, phpunit

我想继续在严格模式下运行我的单元测试，这样我就可以轻松地意识到任何特别长的测试，但同时默认超时 1s 是不够的。我可以为所有测试更改它吗？我知道我可以使用注释为每个类（和单个测试）设置超时`@short / @medium / @long`，但是所有测试都有类似的东西吗？也许在 phpunit.xml 中？

这是为了避免`PHP_Invoker_TimeoutException: Execution aborted after 1 second`这种情况偶尔发生。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T11:43:42.377

可以通过在 phpunit.xml 中设置想要的时间来启用该选项。时间以秒为单位。

例子：

```
<phpunit
    strict="true"
    timeoutForSmallTests="1"
    timeoutForMediumTests="5"
    timeoutForLargeTests="10"
>
 // test suites
</phpunit> 
```

通过标记实际测试功能，可以将测试标记为中型或大型，如下所示

```
/**
 * @medium
 */
public function testTestThing() {
     $this->assertTrue(false);
} 
```

编辑：[现代 PHPUnit 版本](https://github.com/sebastianbergmann/phpunit/wiki/Release-Announcement-for-PHPUnit-4.5.0#deprecated-settings)不再执行这些超时，并且通常通过为[之前由严格模式覆盖的](https://phpunit.de/manual/current/en/risky-tests.html)每件事引入单独的标志来改变严格模式的行为：

```
beStrictAboutTestsThatDoNotTestAnything="true"
checkForUnintentionallyCoveredCode="true"
beStrictAboutOutputDuringTests="true"
beStrictAboutTestSize="true"
beStrictAboutChangesToGlobalState="true" 
```

不相关的警告：它还将 XML 配置中的测试路径更改为相对于 XML 配置文件，而不是旧的默认路径是相对于当前工作目录的路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T08:00:17.800

或者，您也可以在 setUp() 方法中设置它们，如下所示：

```
$this->getTestResultObject()->setTimeoutForSmallTests(1);
$this->getTestResultObject()->setTimeoutForMediumTests(5);
$this->getTestResultObject()->setTimeoutForLargeTests(10); 
```

# c#-4.0 - 按数据类型调用扩展方法

> ID：13722129
> 
> 赞同：1
> 
> 时间：2012-12-05T11:21:14.170
> 
> 标签：c#-4.0

我想调用这样的`extension`方法

```
int.AnExtensionMethod() 
```

这是可能的还是我必须调用一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:29:31.730

扩展方法使您能够将方法“添加”到现有类型，而无需创建新的派生类型、重新编译或以其他方式修改原始类型。所以，你不能做你上面建议的事情，尝试这样做是没有意义的。扩展方法是 METHOD。方法作用于类或对象的实例...

请参阅[MSDN 上的这个基本介绍](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)和[一个非常相似的问题的答案](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/cc4fd6c2-7233-4921-a818-2196774e89c1/)。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:22:56.173

你可以这样做

```
 public static class intext {
        public static int doubleMe(this int x) {
            return 2 * x;
        }
    } 
```

像这样称呼它

```
 Console.WriteLine(5.doubleMe()); 
```

但我认为这`int.doubleMe()`是不可能的，您可以阅读更多信息：[**为什么没有扩展属性？**](http://blogs.msdn.com/b/ericlippert/archive/2009/10/05/why-no-extension-properties.aspx)

只是为了更清楚

`Console.WriteLine(5.doubleMe());`

相当于

`Console.WriteLine(intext.doubleMe(5));`

**扩展方法用于扩展现有类型而不是在其中添加方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:24:19.233

据我所知，它需要是一个类的实例。我不记得向类本身添加扩展方法。此外，为什么要向`int`（或其他）类添加扩展方法？

# android - GoogleAnalyticsTracker 无法解析为 android 中的类型

> ID：13722130
> 
> 赞同：2
> 
> 时间：2012-12-05T11:21:16.677
> 
> 标签：android, google-analytics

我尝试在我的应用程序中使用 Google Analytics。我创建了一个帐户，注册了一个应用程序并获得了注册号。将 libGoogleAnalyticsV2.jar 添加到我的应用构建路径中。我尝试使用以下代码。

```
GoogleAnalyticsTracker tracker = GoogleAnalyticsTracker.getInstance();
tracker.setDebug(true);
tracker.startNewSession("UA code",10, this); 
```

但我无法导入 GoogleAnalyticsTracker。它说

> “GoogleAnalyticsTracker 无法解析为类型”

**更新1**

我使用了 Google Analytics 的 version1。并使用了以下代码。从 PT 的回答来看，我等了超过 24 小时。我仍然无法在实时概览中看到用户。我在我的类文件中使用了以下代码。

```
GoogleAnalyticsTracker tracker;
tracker = GoogleAnalyticsTracker.getInstance();    
        tracker.startNewSession("UA code", 20,this);
        tracker.trackPageView("/BS_Splash"); 
```

**更新 2**

我厌倦了V2。使用了以下代码。

```
Context mCtx = this; // Get current context.
        GoogleAnalytics myInstance = GoogleAnalytics.getInstance(mCtx.getApplicationContext());
        myInstance.setDebug(true);
        Tracker myNewTracker = myInstance.getTracker("UA code");
        myInstance.setDefaultTracker(myNewTracker); 
```

在 log cat 我得到以下，**连接到服务失败 1**

```
12-08 13:40:20.423: I/GAV2(22947): Thread[Service Reconnect,5,main]: connecting to Analytics service
12-08 13:40:20.423: I/GAV2(22947): Thread[Service Reconnect,5,main]: connect: bindService returned false for Intent { act=com.google.android.gms.analytics.service.START (has extras) }
12-08 13:40:20.423: W/GAV2(22947): Thread[Service Reconnect,5,main]: Connection to service failed 1
12-08 13:40:20.423: I/GAV2(22947): Thread[Service Reconnect,5,main]: falling back to local store
12-08 13:40:20.433: V/GAV2(22947): Thread[GAThread,5,main]: dispatch running...
12-08 13:40:20.623: V/GAV2(22947): Thread[GAThread,5,main]: ...nothing to dispatch
12-08 13:40:20.633: I/GAV2(22947): Thread[GAThread,5,main]: PowerSaveMode initiated. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:02:43.553

尝试下载并安装“legacy”(v1) GA 库，或使用新的 V2“Advanced”API。

您拥有的代码假定 V1 API，因此安装 V1 库可能最容易。看：

[https://developers.google.com/analytics/devguides/collection/android/resources](https://developers.google.com/analytics/devguides/collection/android/resources)

或者，您可以在 V2 API 文档的“高级”部分找到等效的代码段（不使用 EasyTracker）。看：

[https://developers.google.com/analytics/devguides/collection/android/v2/advanced](https://developers.google.com/analytics/devguides/collection/android/v2/advanced)

具体来说，看起来全局实例查找现在需要一个 Android`Context`参数，而它只是`GoogleAnalytics`不是`GoogleAnalyticsTracker`：

```
Context mCtx = this; // Get current context.
GoogleAnalytics myInstance = GoogleAnalytics.getInstance(mCtx.getApplicationContext());
myInstance.setDebug(true); 
```

跟踪器现在作为`Tracker`类分开：

```
Tracker myNewTracker = myInstance.getTracker("UA-XXXX-2") // A new tracking ID. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:37:06.193

尝试使用跟踪`EasyTracker.getInstance().startActivity(this);`

如果它不起作用，请重新检查您添加到 libs 文件夹中的 .jar 文件！

# c++ - c++中的匿名类

> ID：13722137
> 
> 赞同：0
> 
> 时间：2012-12-05T11:21:35.463
> 
> 标签：c++, memory-management, anonymous-class

对于我的项目，我正在使用 C++ 中的匿名类，我想知道它们在内存中的分配位置。

我很确定这将在堆上分配，但我想知道其他人是否有更详细的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:44:59.997

正如所指出的，**类**没有分配到任何地方。**Objects**是匿名类的实例，可以通过多种方式分配：

例如作为另一个对象的子对象：

```
struct S
{
  struct {
    int x, y;
  } p;
}; 
```

或与类定义一起

```
struct
{
  float x, y;
} p; 
```

或使用`decltype`：

```
struct S
{
  struct {
    int x, y;
  } p;
};

void g (decltype (S::p)) {}

decltype (S::p) *f ()
{
  auto p = new decltype (S::p);
  g(*p);
  return p;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:25:47.143

如果匿名类是另一个类或结构的一部分，那么它将与周围的类或结构一起分配，无论是在堆上还是在堆栈上。

如果匿名类是全局变量，它会与其他全局变量一起存储。

如果匿名类是局部变量，它会与定义它的函数的其他局部变量一起存储在堆栈中。

# sandcastle - Sandcastle 帮助文件生成器：不是从 MAML 生成 HTML

> ID：13722139
> 
> 赞同：0
> 
> 时间：2012-12-05T11:21:38.323
> 
> 标签：sandcastle, shfb, maml

我在我的 Sandcastle 项目中添加了一个 test.aml 文件，其中 BuildAction 为 None。

我还添加了一个 Content Layout.content 文件并将 test.aml 添加到布局中。当我构建帮助（仅限网站格式）时，主题包含在 TOC 中，但内容不存在。当我单击该主题时，没有任何反应，它仍保留在上一个主题上。

我是否遗漏了什么，或者这是 SHFB 的已知问题/限制？

我正在使用 SHFB 的 v1.9.4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:42:05.927

我在这里回复：http: [//shfb.codeplex.com/discussions/405627](http://shfb.codeplex.com/discussions/405627)

另外，请注意 v1.9.5.0 可用。在尝试上述线程中的建议后，您可以尝试升级到最新版本，看看是否有任何改变。最好在 CodePlex 项目站点上保留与 SHFB 相关的帖子，因为我不经常使用 StackOverflow。

埃里克

# c# - 部分硬编码的文本框

> ID：13722140
> 
> 赞同：1
> 
> 时间：2012-12-05T11:21:42.913
> 
> 标签：c#, asp.net

我需要在 asp.net 中创建一个用户名文本框。格式如下：

```
DOMAIN-NAME/username 
```

现在`DOMAIN-NAME`，默认情况下应该是硬编码且不可编辑的文本。用户只能输入用户名，但不能删除`DOMAIN-NAME`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:24:50.760

如果您希望域是硬编码且不可编辑的，则需要将其放在服务器上。

在 page_load 上：

```
string domainName = @"DEFAULT-NAME/";
string userName = TextBoxId.Value; //do some server side checks on value before processing it though
string finalUserName = domainName + userName; 
```

即使您在页面上放置了一个辅助只读文本框，也永远不要相信不可编辑文本框收到的值是您所期望的，因为 POST 变量很容易被操纵。在服务器上添加域，并在页面上文本框附近的标签中显示它（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:13:17.560

好吧，如果您想将要求视为：“似乎有一个带有硬编码域名的文本框。” 然后试试这个：

```
<html>

<style type="text/css">

span.fakeTextBox{
    border: 2px inset #EBE9ED;
    display: inline-block; 
    padding: 3px; 
    font-family:"Times New Roman",Georgia,Serif;
}

span.fakeTextBox input{
    border: none;
    outline:none;
}

</style>

<body>

<span class="fakeTextBox">
MyDomain\<input type="text" >
<span>

</body>
</html> 
```

用户永远不会知道区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:28:26.880

选项 1：在文本框前显示标签并在阅读时使用 @LonWolf 的代码

选项 2：显示文本框背景图像和左侧填充。在图像中，您可以提供默认名称

选项 3：使用一些 jquery 插件，如下所示：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)，请参阅扩展表单控件，它显示了漂亮的文本框前缀和后缀

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:24:43.370

为什么您需要将它们都放在同一个文本框中？`textbox`域名不可编辑（非活动）和`textbox`用户名可编辑吗？

或者，您可以将两者放在同一个文本框中。但请确保字符串

> 域名/

用户未使用验证（`JQUERY`或`Javascript`）删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T11:24:55.483

单击文本框时删除域名，然后当他们离开文本框时附加域名。或者将 DOMAIN-NAME 放入标签并将 textBox 放在一边？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T11:24:57.813

您可以将域名放在文本框左侧的标签中。

如果它绝对必须在文本框中显示域，你将不得不纠正一些 javascript 来掩盖它。

可能有一些代码会有所帮助，例如，如果您使用的是 JQuery，这种事情：

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T11:25:08.797

你不能。文本框要么被禁用，这意味着您不能编辑任何内容，要么被启用，这意味着您可以编辑所有内容。大多数具有像您这样的要求的应用程序都在文本框前面使用标签来显示不可编辑的部分。

# web - 如何在 web 中嵌入 pentaho 报表设计器？

> ID：13722142
> 
> 赞同：1
> 
> 时间：2012-12-05T11:21:46.140
> 
> 标签：web, embed, pentaho, pentaho-report-designer

我想弄清楚如何在网页上嵌入 Pentaho Report Designer 报告。

我的意思不仅仅是打印 PRD 报告的结果——我实际上仍然希望使用 PRD 设计报告，而是在 Web 框架内。

有可能这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T22:14:55.370

您可以使用 Pentaho BI Server 来部署您的报表。这意味着另一个应用程序可以通过 Web 生成报告，甚至 BI Server 用户也可以生成报告。您可以配置单点登录和其他奇特的东西以将 BI 服务器用作报表服务器。

编辑报表的唯一方法是通过 Pentaho 报表设计器，它是一个在您的桌面上运行的 Java 应用程序。通过 BI 服务器界面，您只能管理已部署的报表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T00:29:24.693

如果您不想让服务器 pentaho 运行来执行此操作，您可以制作一个 servlet，其输出是 html、pdf 等格式的报告内容，这可以使用可以在其中找到的库 pentaho 报告设计器来完成同一个工具，首先您设计报告，然后在您创建的 servlet 中运行它，将位置、输出类型和您在报告中定义的其他参数作为参数传递

导入会话。报告会话；

公共类 ServletReport 扩展 HttpServlet {

```
public ServletReport() {
}

public void init() {
      ClassicEngineBoot.getInstance().start();

} 
```

protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { generateReport(req, resp); }

```
protected void doGet(HttpServletRequest req,    
                       HttpServletResponse resp) throws ServletException,
                                                        IOException {
    generateReport(req, resp);
}
protected void doPost(HttpServletRequest req,    
                       HttpServletResponse resp) throws ServletException,
                                                          IOException {
    generateReport(req, resp);
}

private void generateReport(HttpServletRequest req,
                            HttpServletResponse resp) throws ServletException,
                                                             IOException {
    HttpSession session = req.getSession(true);
    ReportSession values =
        (ReportSession)session.getAttribute("ReportSession");
    //  URL reportDefinitionURL = values.getReportDefinitionURL();

    String reportPath = req.getParameter("Report");
    String contenType = (String)req.getParameter("ContenType");
    //String isMDX = (String)req.getParameter("MDX");
    String url =
        req.getRequestURL().substring(0, req.getRequestURL().indexOf("servletreport")) +
        "Reportes/";
    URL reportDefinitionURL = new URL(url + reportPath);
    MasterReport report = createReportDefinition(reportDefinitionURL);
            try {
             //report.setQ
            Map<String, Object> reportParameters =
                values.getReportParameters();
            if (null != reportParameters) {
                for (String key : reportParameters.keySet()) {
                    report.getParameterValues().put(key,
                                                    (Object)reportParameters.get(key));
                }
            }

        } catch (Exception e) {
            // TODO: Add catch code
            e.printStackTrace();
        }

        OutputStream out = resp.getOutputStream();
        try {
            if (contenType.equalsIgnoreCase("HTML")) {
                resp.setContentType("text/html; charset=\"UTF-8\"");
                HtmlReportUtil.createStreamHTML(report, out);
            } else if (contenType.equalsIgnoreCase("PDF")) {
                resp.setContentType("application/pdf");
                PdfReportUtil.createPDF(report, out);
            } else if (contenType.equalsIgnoreCase("EXCEL")) {
                resp.setContentType("application/vnd.ms-excel");
                ExcelReportUtil.createXLS(report, out);
            } else if (contenType.equalsIgnoreCase("RTF")) {
                resp.setContentType("application/rtf");
                RTFReportUtil.createRTF(report, out);
            }
        } catch (ReportProcessingException rpe) {
            rpe.printStackTrace();
        } finally {
            out.close();
        }

}

//Return a value using EL
private Object executeValueExpression(String valueExpression) {
    FacesContext fctx = FacesContext.getCurrentInstance();
    ELContext elctx = fctx.getELContext();
    Application app = fctx.getApplication();
    ExpressionFactory exprFactory = app.getExpressionFactory();
    ValueExpression valueExpr =
        exprFactory.createValueExpression(elctx, valueExpression,
                                          Object.class);
    return valueExpr.getValue(elctx);
}

private MasterReport createReportDefinition(URL reportDefinitionURL) throws MalformedURLException {
    try {
        ResourceManager resourceManager = new ResourceManager();
        resourceManager.registerDefaults();
        Resource directly =
            resourceManager.createDirectly(reportDefinitionURL,
                                           MasterReport.class);
        MasterReport report = (MasterReport)directly.getResource();
        return report;
    } catch (ResourceException e) {
        e.printStackTrace();
    }
    return null;
} 
```

}

# liferay-ide - liferay 中的文件夹权限

> ID：13722144
> 
> 赞同：2
> 
> 时间：2012-12-05T11:21:59.887
> 
> 标签：liferay-ide

任何人都可以回答如何将文件夹权限更改为 liferay 中的自定义角色吗？我正在尝试通过控制面板进行操作。我的主要目标是仅授予角色上传文档的权限。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:01:49.053

在控制面板 > 文档和媒体中，编辑您要限制的文件夹的权限。

![在此处输入图像描述](../Images/b81b8f8410db756aba5a619e251fd6b2.png) ![在此处输入图像描述](../Images/48c610bcf610c992b29f05bd5285cb7f.png)

相应地调整权限，例如您可以上传文档的角色，可能会勾选所有内容。确保您限制其他角色，例如站点成员、用户和访客只能勾选查看权限

![在此处输入图像描述](../Images/1ccb2265ce2c24d8a32008afdb24056f.png)

# ruby-on-rails-3 - 查询 MongoDB 的单个字段并插入数组

> ID：13722147
> 
> 赞同：1
> 
> 时间：2012-12-05T11:22:19.863
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我目前正在使用 Mongoid 与我的 mongodb 数据库通信。我有如下查询：

```
ClassDoc.only(:class_id).where(:recurrs => true) 
```

我只对 ID 感兴趣，因为我在后续查询中将它们排除在外。但是，后续查询需要数组中的 ID，所以我必须这样做：

```
first_result_ids = ClassDoc.only(:class_id).where(:recurrs => true).collect { |class| class.class_id } 
```

这需要很长时间，因为 AFAIK '收集' 循环遍历每个结果。仅循环 1000 个结果可能需要 10 秒。

有没有办法将 ID 直接拉到数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:16:06.110

尝试这个

```
first_result_ids = ClassDoc.only(:class_id).where(:recurrs => true).map(&:class_id) 
```

# wordpress - 如何从我的粉丝页面提要发布到我的 wordpress 网站？

> ID：13722148
> 
> 赞同：0
> 
> 时间：2012-12-05T11:22:18.790
> 
> 标签：wordpress, android-activity, embed, feed, facebook-page

我希望将我的 Facebook 粉丝页面中的活动提要嵌入到我的 Wordpress 网站上，就像[这个例子](http://www.lucky-management.com/jordan.php)一样。

我想利用一个类似的盒子从我的 Facebook 粉丝页面中提取提要并将其发布到我的 wordpress 网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:10:17.580

看起来你不是技术人员，所以你最好的选择是 wordpress 的插件。有吨可用。这是十个列表：[http ://wpapi.com/10-great-wordpress-plugins-for-facebook/](http://wpapi.com/10-great-wordpress-plugins-for-facebook/)

# android - AsyncTask 与抽象混淆

> ID：13722152
> 
> 赞同：0
> 
> 时间：2012-12-05T11:22:46.667
> 
> 标签：android

我对android编程有点陌生，似乎无法摆脱这个错误..

它告诉我：

```
The type LoginForm.login must implement the inherited abstract method AsyncTask<String,Void,String>.doInBackground(String...) 
```

这是代码：

```
private class login extends AsyncTask<String, Void, String> {

     protected String doInBackground(String url) {
        String response = "";
          DefaultHttpClient client = new DefaultHttpClient();
          HttpGet httpGet = new HttpGet(url);
          try {
            HttpResponse execute = client.execute(httpGet);
            InputStream content = execute.getEntity().getContent();

            BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
            String s = "";
            while ((s = buffer.readLine()) != null) {
              response += s;
            }

          } catch (Exception e) {
            e.printStackTrace();
          }
        return response;
      }

      @Override
      protected void onPostExecute(String result) {

        int mId = 0;

        //Close loading bar and text
        login_form_loader.setVisibility(View.INVISIBLE);
        warning.setText(result);

      }
    } 
```

这到底是什么意思，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:23:52.303

您需要将方法签名更改为：

```
protected String doInBackground(String... url) 
```

（为了清楚起见，您也应该在该方法上添加`@Override`注释）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:26:12.140

doinbackground 函数在您的情况下应该是这样的

```
 @Override
    protected Result doInBackground(String... params) {
        // TODO Your code here
        return null;
   } 
```

# iphone - 页脚在三星 s2、iphone 中无法正确显示

> ID：13722153
> 
> 赞同：0
> 
> 时间：2012-12-05T11:22:46.550
> 
> 标签：iphone, css, android-layout, mobile

我有一个移动网站，我通过 css 调用我的页脚，这样它在加载时应该始终停留在手机屏幕的底部，以及如果我滚动浏览屏幕。它适用于一些设备，但在三星galaxy s2和iphone中给我带来了问题，它在屏幕底部上方有一段距离。

我附上屏幕截图以提供清晰的图片。

![页脚截图](../Images/3652e54a6491f249c4624d7bd4e2bec9.png)

你对这个问题有任何想法吗？

* * *

## 编辑：

CSS代码：

```
footer {
position: fixed;
bottom: 0;
width: 100%;
z-index:3; 
```

}

html代码：

```
<footer>
<nav>
<ul>
<li>
<a href="@Url.Action("Index", "Sell")" style="color:White; font-weight:bold; font-size:11px;">Sell </a>
</li>
</ul>
</nav>

</footer> 
```

这适用于所有主要浏览器和手机，但 Iphone、Ipad 出现问题。我已经搜索过这个并发现 Iphone（在 Iphon5 之前）不支持**position:Fixed**属性，因此我尝试使用**"position:absolute"**，但没有成功。使用**Position:static**将页脚放在页面底部而不是屏幕上。

在 Iphone 和三星 Galaxy Y 和其他手机中解决此问题的任何想法。

谢谢

# wordpress - WP_Query() 和自定义过滤器

> ID：13722156
> 
> 赞同：0
> 
> 时间：2012-12-05T11:22:58.530
> 
> 标签：wordpress

我正在尝试使用 WP_Query() 在我的 wordpress 博客上显示一些帖子。这个想法是在最近 30 天内发布的帖子中显示 9 个随机选择的帖子。由于某些原因，这似乎不起作用。

这是我使用的代码：

```
 function filter_where_custom( $where = '' ) {
        // posts in the last 30 days
        $where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
        return $where;
    }

    $args = "orderby=rand&posts_per_page=9";
    $my_query = new WP_Query();
    add_filter('posts_where', 'filter_where_custom');
    $my_query->query($args); 
```

我认为问题在于使用 add_filter 但到目前为止我一直无法理解我做错了什么。任何帮助都会很棒:)谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:24:14.723

这应该可以，不需要过滤器。
更多[时间参数](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)

```
$args = array(
  'year' => date('Y', strtotime('-30 days')),
  'monthnum' => date('m', strtotime('-30 days')),
  'day' => date('d', strtotime('-30 days')),
  'orderby' => 'rand',
  'posts_per_page' => 9
);
$my_query = new WP_Query($args);

// start your custom $my_query->have_posts() loop 
```

# google-places-api - Google Places 搜索请求在 gas_station 类型中是重复的 lat&long 数据

> ID：13722157
> 
> 赞同：2
> 
> 时间：2012-12-05T11:23:00.120
> 
> 标签：google-places-api

大概是我在发出查询结果 Nearby Search Requests 时发现了一个错误。

经纬度在谷歌答案的第一个元素之后重复。

正如您在下面看到的，此响应中的经纬度坐标完全相同（在 1 个项目 json 之后）。

![](../Images/f6e3175f5e984c9a784cb2be84b9a9bb.png)

此错误仅适用于 request `types=gas_station`。

请求示例：`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=55.751729,37.618454&radius=1500&types=gas_station&sensor=false&key=YourAPIKeyHere`

请告诉我，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:10:31.550

看来，如果您在 maps.google.com 上搜索所有这些地方，它们都包含近似位置，并带有“地图上的位置是近似的”字样，表明谷歌没有这些地方的位置数据，因此这似乎是数据质量问题。

如果您知道这些地点的正确位置，请按照 Google 地图帮助说明提交地图或地点编辑以[报告 Google 地图问题](http://support.google.com/maps/bin/answer.py?hl=en&answer=162873)或[报告商家信息问题](http://support.google.com/maps/bin/answer.py?hl=en&answer=171429)。

编辑 Google 地图和地点的另一种方法是按照 Google Map Maker 帮助中的[说明通过](http://support.google.com/mapmaker/bin/answer.py?hl=en&answer=1096110&ctx=cb&src=cb&cbid=-1ne8x7v2e648a&cbrank=1)[Google Map Maker](http://www.google.com/mapmaker)提交编辑。

您的编辑将在审核并接受后显示。

# c++ - 多线程程序中的 MPI_Isend/MPI_Recv

> ID：13722160
> 
> 赞同：2
> 
> 时间：2012-12-05T11:23:19.390
> 
> 标签：c++, multithreading, openmpi

我在**多线程**程序中有**MPI_Isend/MPI_Recv 问题。**

 **在程序中：

**第一台机器**有一个线程进行一些计算并调用`MPI_Isend`以将缓冲区发送到第二台机器，而另一个线程总是试图`MPI_Recv`从第二台机器获取数据。第一个线程将在再次调用之前`MPI_Wait`最后`MPI_Isend`完成`MPI_Isend`。

**第二台机器**做同样的事情。

然后我得到的结果是：

**第一台机器**：

线程**0**：`MPI_Isend`数据成功到第二台机器。但`MPI_Wait`因为最后`MPI_Isend`没有完成而被阻止。

线程**1**：尝试`MPI_Recv`从第二台机器获取数据，但没有数据，它被阻塞了。

**第二台机器**：

线程**0** :`MPI_Isend`数据到第一台机器成功。但`MPI_Wait`因为最后`MPI_Isend`没有完成而被阻止。

线程**1**：尝试`MPI_Recv`从第一台机器获取数据，但没有数据，它被阻塞了。

有没有人有任何想法？我非常感谢它，因为我已经跟踪了两天的问题，但没有任何进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:32:38.707

为了能够同时执行 MPI 调用，您必须初始化 MPI 库以支持级别的线程`MPI_THREAD_MULTIPLE`。为此，您必须将调用替换为`MPI_Init`：

```
int provided;

MPI_Init_thread(&argc, &argv, MPI_THREAD_MULTIPLE, &provided);
if (provided != MPI_THREAD_MULTIPLE)
{
    printf("Sorry, this MPI implementation does not support multiple threads\n");
    MPI_Abort(MPI_COMM_WORLD, 1);
} 
```

一些 MPI 库必须以某种（非默认）方式编译，以支持来自多个线程的调用。例如，必须在库构建时配置 Open MPI。其他供应商提供两种版本的库 - 一种支持线程，另一种不支持，您必须在链接代码时选择正确的一种。这是因为添加对线程的支持会增加许多 MPI 调用的延迟，如果他的程序不使用线程，没有人希望这样。**

# android - applicationDidEnterBackground (iOS) 和 onPause()/onStop() 的持续时间限制？

> ID：13722164
> 
> 赞同：2
> 
> 时间：2012-12-05T11:23:38.407
> 
> 标签：android, ios, background

这个问题是关于 iOS 和 Android 上的后台处理。在 iOS 上，平台将调用

```
applicationDidEnterBackground 
```

通知应用程序它已发送到后台。在 Android 上，调用是

```
onPause()/onStop() 
```

取决于之前或之后的版本 HONEYCOMB。功能完成的持续时间是多少，或者它们总是保证完成（即没有平台在完成之前杀死应用程序）？

# android - 优化复杂布局

> ID：13722167
> 
> 赞同：5
> 
> 时间：2012-12-05T11:23:49.157
> 
> 标签：android, android-layout, user-interface

我为 Android 开发了一个音频播放器，在我的浏览专辑活动中我遇到了一个性能问题：滚动延迟很多。

在这张图片中是我的布局表示：![在此处输入图像描述](../Images/032705d43cb99afa5d5a2f8f3fd82094.png)

这是一个显示一行的 ListView；一行包含按艺术家分组的 5 个专辑。

每种不同的颜色都是不同的布局文件。每个文件都由一个适配器管理。

在相册（橙色）中，我没有在 TextView 上使用 CompoundDrawable，因为我有 ImageView 延迟加载，而且我不明白如何在 textview 上进行这种延迟加载 CompoundDrawable。

如果您需要，我可以发布所有布局文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:38:51.870

经过多次优化，我改变了我的布局

![我的新布局](../Images/dd0ceea5134f8b7263e9718a57e62c14.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:37:14.100

你读过这篇文章吗？

[Android 性能案例研究](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)

它可能对您的情况有所帮助，但不了解您如何设置视图的更多信息，这只是一个建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:13:01.880

嗯，不确定，如果这在您的情况下很容易，但我认为如果您将每个表行设为 RelativeLayout，您可能会删除行的大部分或全部 LinearLayout 元素。您只需声明，一行中的每个 LinearLayout 必须位于另一个具有 android:layout_toLeftOf 和 android:layout_alignParentRight 的左侧/右侧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:31:05.100

如果您需要简化布局以提高性能，您将不得不牺牲一些东西，这样的简化不会是免费的。我认为最有前途的方法是用 GridLayout 替换您的行列表视图布局。原则上，您可以使用这样的 GridLayout 处理该行内的所有布局，但为了获得真正的好处，您必须放弃 GridView（艺术家的专辑网格）并将其作为 GridLayout 的一部分处理。这可能需要一些额外的 Java 代码，但我认为它应该会提高性能。

# php - 无法将外语字符插入数据库

> ID：13722170
> 
> 赞同：1
> 
> 时间：2012-12-05T11:23:54.750
> 
> 标签：php, mysql, character-encoding

我正在尝试通过 php 将非英语字符（例如：Josef Kricenský）插入我的 mysql 数据库

这是我的代码

```
$name=addslashes("Josef Kricenský");
$id=1;
mysql_query("'SET NAMES 'utf8'");
mysql_query("insert ignore into names (id,value) values ('$id','$name')"); 
```

数据被插入到表中，但它只插入到'ý'，即：Josef Kricensk

utf8_general_ci 是表排序规则，MyISAM 是存储引擎，此代码以前在我的其他站点上工作过，但似乎缺少一些东西。

如果我通过 phpMyadmin 插入它可以工作，所以我的猜测是代码缺少一些东西，顺便说一句 php 版本是 5.2.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:45:49.270

似乎在我的机器上运行良好的独立示例......

```
<?php
// added numeric code entity to reflect actual code of OP
// $param = 'Josef Kricenský';
$param = 'Josef Kricensk&#253;';
$param = html_entity_decode($param , ENT_XML1, 'UTF-8');

// this is not how you check for utf-8 encoding
// ...except  in this simple example ;-)
// all characters but the ý are encoded in one byte, ý uses two bytes 
// -> 16 bytes -> strlen($param) should be 16
if ( 16!=strlen($param) ) { 
    die("this doesn't seem to be utf-8 encoded");
}

// the mysql_ api is deprecated. Take a look at e.g. http://docs.php.net/pdo for alternatives
$mysql = mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test', $mysql) or die(mysql_error($mysql));
// SET NAMES 'utf8' doesn't tell the client library about the changed encoded
// so e.g. mysql_real_escape_string() may fail
// see http://docs.php.net/mysql_set_charset
mysql_set_charset('utf8', $mysql) or die(mysql_error($mysql));

// using a temporary table for this example...
setup($mysql);

// insert a record
echo "insert a record\n";
$query = sprintf("INSERT INTO soFoo (name) VALUES ('%s')",
    mysql_real_escape_string($param, $mysql)
);
mysql_query($query, $mysql) or die(mysql_error($mysql));

// retrieve the record
echo "retrieve the record\n";
$result = mysql_query('SELECT name FROM soFoo', $mysql) or die(mysql_error($mysql));
while( false!==($row=mysql_fetch_assoc($result)) ) {
    echo 'strlen($row[name])==', strlen($row['name']), "\n";
}

function setup($mysql) {
    mysql_query('
        CREATE TEMPORARY TABLE soFoo(
            id int auto_increment,
            name varchar(32),
            primary key(id)
        ) DEFAULT CHARSET=utf8
    ', $mysql) or die(mysql_error($mysql));
} 
```

印刷

```
insert a record
retrieve the record
strlen($row[name])==16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:56:01.477

尝试运行这个。

```
<?php

$name = "Josef Kricenský";
$id = 1;

if( substr( $name, 14, 2 ) !== "\xC3\xBD" ) {
    trigger_error( "This file was not saved in UTF-8\. Set your text editor to save the file in UTF-8" );
}

//Connect to mysql

mysql_set_charset( "utf8" );

$name_safe = "'" . mysql_real_escape_string( $name ) . "'";
$id_safe = (int)$id;

mysql_query( "insert ignore into names (id,value) values ($id_safe, $name_safe)" ); 
```

# eclipse - 即使将工作区切换到旧的工作区，Eclipse indigo 工作区也是空的。如何导入我所有的旧项目？

> ID：13722172
> 
> 赞同：1
> 
> 时间：2012-12-05T11:24:08.070
> 
> 标签：eclipse, workspace

我做了一个 MacOSX Mountain Lion 全新安装。

恢复备份的 eclipse 和工作区文件夹后，我试图在包资源管理器中显示我的所有项目，但无济于事。

有些人建议导入它们，但是当我尝试通过导入时

> 将文件导入一般现有项目到工作区

我明白了

> 找不到要导入的项目

我也试过通过切换工作台

> 文件-切换工作区-其他

但它也不会以这种方式挑选我的任何旧项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:46:31.360

检查项目是否仍有`.project`文件。由于它以点开头，因此在进行备份时可能会采用不同的处理方式，即被忽略。此外，Eclipse 没有找到任何项目也表明这可能是一个问题。

# ios5 - 更改 UINavigationBar 外观背景图像时状态栏颜色更改

> ID：13722173
> 
> 赞同：5
> 
> 时间：2012-12-05T11:24:10.277
> 
> 标签：ios5, uinavigationcontroller, ios6, appearance, tintcolor

我使用这行代码来改变导航栏背景：

```
 [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"image.png"] forBarMetrics:UIBarMetricsDefault]; 
```

在 iOS6 中，它可以工作，但在 iOS5 中，状态栏的背景也发生了变化，如下图所示： ![在此处输入图像描述](../Images/1dd4e34069eac09eabb5fb0a0e9ffd65.png)

这是怎么发生的。提前致谢。

还有一件事，我只是想改变 的颜色`UINavigationBar`，所以我使用了这段代码：

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]]; 
```

它在 iOS6 中运行良好，但在 iOS5 中则不行。是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T13:56:23.090

你可以用这个来设置你的状态栏

```
 [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES]; 
```

所以状态栏颜色为黑色，字体颜色为白色..

# c# - 我应该只为我的 web 应用程序中的一个变量创建会话，还是使用 GET？

> ID：13722184
> 
> 赞同：1
> 
> 时间：2012-12-05T11:24:43.337
> 
> 标签：c#, asp.net-mvc, web-applications

我正在开发一个网络应用程序。我正在从数据库中获取数据，进行一些计算并绘制图表。这个应用程序基于 MVC 4，用 C#/Razor 编写并使用 jQuery 插件。

我想知道是否值得只为一个变量使用会话。该应用程序已打开，并且该变量与登录无关。它只是一个 ID，对于这个应用程序来说是不变的，我经常需要它。或者我应该更好地将它放在查询字符串中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:26:01.453

如果所有用户的 ID 都相同，那么使用[Cache](http://msdn.microsoft.com/en-us/library/aa478965.aspx)会更好，但如果每个用户都有一个单独的 ID，则可以将其存储在 Session 中，而不是使用查询字符串。随着您的应用程序随着时间的推移而发展，可能难以管理查询字符串。

> 我想知道是否值得将会话仅用于一个变量。

您应该担心在会话中存储大型数据集，因为会话是在服务器上维护的，对于简单的 ID，会话可能是最好的存储机制（IMO）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:25:59.240

最好将变量存储在会话中。会话架构可供您使用，它是一个强大的架构，将消除您管理查询字符串等的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:26:47.220

将其存储在 Session 中以访问客户端。您可以将任何内容存储在 Session 索引中并完成您需要的工作

# c++ - 程序执行基本操作所花费的总时间

> ID：13722188
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:24:54.017
> 
> 标签：c++, c, algorithm, time, execution

我想知道程序执行所花费的时间。
而且我不希望用户花时间提供输入。
只有时间进行基本操作。
就像我们需要比较两种算法的效率一样。
基本操作如

```
a+b
a-b
a*b
a/b
a<b
a>b
a=b 
```

和更多。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:10:42.370

If you would like to use a profiler, then this can act as a poor-man's profiler:

```
#include <stdio.h>
#include <time.h>

clock_t start = clock();
/* Code you want timed here */
printf("Time elapsed: %f\n", ((double)clock() - start) / CLOCKS_PER_SEC); 
```

Courtesy: Julienne Walker aka Narue

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:28:00.687

为什么不只是使用[时间](http://linux.die.net/man/1/time)。这会测量 CPU 使用率，因此不会考虑用户输入时间等。

> time 命令使用给定的参数运行指定的程序命令。当命令完成时，时间会向标准错误写入一条消息，提供有关此程序运行的计时统计信息。这些统计数据包括 (i) 调用和终止之间经过的实时时间，(ii) 用户 CPU 时间（由 times(2) 返回的结构 tms 中的 tms_utime 和 tms_cutime 值的总和），以及 (iii)系统 CPU 时间（times(2) 返回的 struct tms 中的 tms_stime 和 tms_cstime 值的总和）

# android - Google Maps Android API v2 抛出 GooglePlayServicesNotAvailableException，过期，SupportMapFragment.getMap() 返回 null

> ID：13722192
> 
> 赞同：18
> 
> 时间：2012-12-05T11:24:57.270
> 
> 标签：android, google-maps, android-support-library, google-play-services, google-maps-android-api-2

我正在尝试使用 Android 支持库将新的 Google Maps Android API v2 合并到应用程序中。我经历了多次迭代，试图找到工作的地方，现在我放弃了，认为我应该在这里问。

我去了 API 控制台，创建了一个项目，为 Android 启用了 Google Maps API v2，根据需要创建了一个调试 KEY 并将其粘贴到清单上。没有身份验证问题或类似问题。很确定我做对了。

在我`libs`放置的项目文件夹中`android-support-v4.jar`（通过项目右键单击-> Android-> 添加支持库...）。在 Eclipse 中，我执行了 File->Import->Android->Existing Android Code Into Workspace 并导入了最新的（rev 3）android-sdk/google/google_play_services/libproject/google-play-services_lib。然后我将它作为依赖库添加到我的项目中（项目右键->属性->Android->添加为底部的库依赖。

在我的清单中，我有：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" ...>
    <permission
      android:name="myapp.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>

    <All the uses-permission required like INTERNET, ACCESS_NETWORK_STATE, WRITE_EXTERNAL_STORAGE, FINE AND COARSE LOCATION, etc>
    <uses-permission android:name="myapp.permission.MAPS_RECEIVE"/>
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
    <application ...>
        ...
        <uses-library android:name="com.google.android.maps" />
        <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="AI..."/>
    </application> 
```

在我的 mainview.xml 我有：

```
<fragment
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/map"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   class="com.google.android.gms.maps.SupportMapFragment" /> 
```

现在在 MainView.java 我有：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainView extends FragmentActivity ... {
    private GoogleMap mMap;

    @Override
    protected void onResume() {
        ...
        Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.map);
        SupportMapFragment mapFragment = (SupportMapFragment)fragment;
        mMap = mapFragment.getMap();
        //PROBLEM: mMap is null here even though mapFragment is not
    }
} 
```

然后我想我可能需要初始化片段，所以我`onCreate`在设置内容视图后添加了：

```
//Fragments
FragmentManager manager = getSupportFragmentManager(); 
FragmentTransaction transaction = manager.beginTransaction();
transaction.add(R.id.map, SupportMapFragment.newInstance());
transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
transaction.commit(); 
```

然后我说，也许不是`SupportMapFragment`，但我实际上应该参考实际的片段，在我的`onResume`我做了：

```
Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.map);
SupportMapFragment mapFragment = (SupportMapFragment)fragment;

//Fragments
FragmentManager manager = getSupportFragmentManager(); 
FragmentTransaction transaction = manager.beginTransaction();
transaction.add(R.id.map, mapFragment);
transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
transaction.commit();

mMap = mapFragment.getMap(); 
```

`mMap`在此之后再次为空。

然后我看到有一个`MapsInitializer`类，所以我想也许我应该先打电话。

所以我在上面代码中获取片段之前添加了代码：

```
try {
    MapsInitializer.initialize(this);
} catch (GooglePlayServicesNotAvailableException e) {
    e.printStackTrace();
} 
```

有了这个 Logcat 报告了警告（第 313 行是`MapsInitializer.initialize(this)`）：

```
com.google.android.gms.common.GooglePlayServicesNotAvailableException
    at com.google.android.gms.internal.n.c(Unknown Source)
    at com.google.android.gms.internal.n.a(Unknown Source)
    at com.google.android.gms.maps.MapsInitializer.initialize(Unknown Source)
    at myapp.activities.MainView.inflateSelectedViewAndSetData(MainView.java:313)
    at myapp.activities.MainView.onClick(MainView.java:642)
    at android.view.View.performClick(View.java:3153)
    at android.view.View$PerformClick.run(View.java:12148)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:152)
    at android.app.ActivityThread.main(ActivityThread.java:4615)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method) 
```

在我的尝试中，Logcat 会报告以下警告：

```
Google Play services out of date.  Requires 2010100 but found 1013 
```

这可能是罪魁祸首，但我没有找到解决方案。

在这一点上，我没有想法。[我在这里](https://stackoverflow.com/questions/13696620/google-maps-android-api-v2-authorization-failure)、[这里](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar)、[这里](https://plus.google.com/+AndroidDevelopers/posts/Tyz491d96Ci)阅读了几个主题，但没有一个建议解决了这个问题。对于后者，他们建议不包括项目依赖项，只包括 jar 文件。`google-play-services.jar`好吧，无论是从`google-play-services_lib/libs`文件夹中使用还是从该项目中导出我自己的 jar，这都不起作用。

顺便说一句，我在实际设备（2.3.5 和带有 3.2 的平板电脑）上运行，而不是在模拟器上运行。

任何帮助都衷心感谢。:)

**更新：**

解决方案在量子位下方。

至于导出库依赖项，一种不必处理它的简洁方法（在处理存储库时很痛苦）是使用[FatJar](http://fjep.sourceforge.net/)并导出`google_play_services_lib`项目（我没有从中创建本地副本，因为当它更新时我不想重新导入），并将输出的 fat jar 文件作为另一个 jar 文件包含在您的项目中。注意：在选择要包含在 fat jar 中的 jar 文件时，我必须排除该`annotations.jar`文件，因为它已经预先包含并且会导致重复错误。现在我要做的就是将它包含`google_play_services_rev_3.jar`在我的项目`libs`文件夹中，我很高兴。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T14:42:01.213

如该链接底部所述；[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

这是正确处理此问题的示例代码；

```
int checkGooglePlayServices =    GooglePlayServicesUtil.isGooglePlayServicesAvailable(mContext);
    if (checkGooglePlayServices != ConnectionResult.SUCCESS) {
    // google play services is missing!!!!
    /* Returns status code indicating whether there was an error. 
    Can be one of following in ConnectionResult: SUCCESS, SERVICE_MISSING, SERVICE_VERSION_UPDATE_REQUIRED, SERVICE_DISABLED, SERVICE_INVALID.
    */
       GooglePlayServicesUtil.getErrorDialog(checkGooglePlayServices, mActivity, 1122).show();
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T14:14:37.423

我在我的项目中遇到了同样的问题。`((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();`解决方法很简单，只要处理可以返回的可能性`null`。如果您将处理`null`内置`SupportMapFragment`将处理`Google Play services out of date.`错误，并将向您显示地图本地化消息和用于更新 Google Play 服务的按钮，就像 @qubz 在示例项目中讲述的那样。

示例代码：

```
@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

/**
 * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
 * installed) and the map has not already been instantiated.. This will ensure that we only ever
 * call {@link #setUpMap()} once when {@link #mMap} is not null.
 * <p>
 * If it isn't installed {@link SupportMapFragment} (and
 * {@link com.google.android.gms.maps.MapView MapView}) will show a prompt for the user to
 * install/update the Google Play services APK on their device.
 * <p>
 * A user can return to this FragmentActivity after following the prompt and correctly
 * installing/updating/enabling the Google Play services. Since the FragmentActivity may not have been
 * completely destroyed during this process (it is likely that it would only be stopped or
 * paused), {@link #onCreate(Bundle)} may not be called again so we should call this method in
 * {@link #onResume()} to guarantee that it will be called.
 */
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

/**
 * This is where we can add markers or lines, add listeners or move the camera. In this case, we
 * just add a marker near Africa.
 * <p>
 * This should only be called once and when we are sure that {@link #mMap} is not null.
 */
private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
} 
```

结果：

![在此处输入图像描述](../Images/08ec76650ba881aa1047dd1d9d52f9ff.png)

作为文件悲伤

> 只有在加载了底层地图系统并且片段中存在底层视图时，才能使用 getMap() 获取 GoogleMap。该类自动初始化地图系统和视图；但是，您无法保证它何时准​​备就绪，因为这取决于 Google Play 服务 APK 的可用性。如果 GoogleMap 不可用，getMap() 将返回 null。[支持MapFragment](https://i.stack.imgur.com/q8U6Y.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T11:43:20.613

`Google Play services`从 Play 商店下载并安装最新版本。由于某种原因，我无法通过搜索找到它。通过从文件夹中的 SDK 运行示例应用程序，`/extras/google/google_play_services/samples/maps`我被提示安装升级并被带到 Play 商店执行此操作。

# oracle - 从以前的记录计算百分比

> ID：13722193
> 
> 赞同：1
> 
> 时间：2012-12-05T11:24:58.920
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我正在尝试根据以前的记录计算百分比增长。说，我有这样的记录

```
----------------------------------------------------------------------------------
| user_id  | salary  | salary_date_change | percent_increase |  salary_record_id |
----------------------------------------------------------------------------------
| 10001    | 10000   |  01.10.2012        |                  |       1           |
| 10001    | 8000    |  01.09.2012        |                  |       2           |
| 10001    | 2000    |  01.07.2012        |                  |       3           |
| 10001    | 4000    |  01.08.2012        |                  |       4           |
| 10002    | 7500    |  01.09.2012        |                  |       5           |
| 10002    | 15000   |  01.10.2012        |                  |       6           |
--------------------------------------------------------------------------------- 
```

我想运行更新查询或过程并执行以下操作：

```
----------------------------------------------------------------------------------
| user_id  | salary  | salary_date_change | percent_increase |  salary_record_id |
----------------------------------------------------------------------------------
| 10001    | 10000   |  01.10.2012        |   20             |       1           |
| 10001    | 8000    |  01.09.2012        |   50             |       2           |
| 10001    | 2000    |  01.07.2012        |   50             |       3           |
| 10001    | 4000    |  01.08.2012        |                  |       4           |
| 10002    | 7500    |  01.09.2012        |                  |       5           |
| 10002    | 15000   |  01.10.2012        |   50             |       6           |
--------------------------------------------------------------------------------- 
```

我该怎么做？

这是我尝试过的：

```
 create or replace procedure salary_increase_migration (
     p_user_id integer,
     l_value varchar2 default null,
     l_old_salary number default null
 ) is 
 l_base_salary_prev_count integer default 0;
 CURSOR get_base_salary_prev IS
     SELECT * 
     FROM arr.user_multi_base_salary 
     ORDER BY salary_date_change DESC;  
 BEGIN                      

     FOR x IN get_base_salary_prev LOOP
         IF l_old_salary IS NOT NULL THEN
              l_value := ((x.salary/l_old_salary)-1)*100;
              UPDATE arr.user_multi_base_salary 
              SET percent_increase = l_value 
              WHERE user_id = x.user_id 
                  AND salary_record_id = x.salary_record_id;
              l_old_salary := x.salary;
         END IF;
     END LOOP;
 END; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:34:34.780

这应该是一个简单的更新。给定表中的一条记录，选择前一条记录应该非常简单（特别是如果所需的记录总是提前一天）。

就像是

```
 update my_table tgt
 set    percent_increase = (
          select (tgt.salary-src.salary)/case when src.salary = 0 then null else src.salary end
          from   my_table src
          where  src.user_id = tdt.user_id and 
                 src.salary_date_change = (
                   select max(src2.salary_date_change)
                   from   my_table src2
                   where  src2.user_id = src.user_id and
                          src2.salary_date_change < src.salary_date_change)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:38:00.873

计算您可以使用的百分比：

```
select 
  user_id, salary, salary_change_date, 
  salary/(lag(salary) over (partition by user_id order by salary_change_date))*100 as percent_increase
from user_multi_base_salary; 
```

更新 base_table：

```
merge into user_multi_base_salary t using(    
      select 
         user_id, salary, salary_change_date, 
         salary/(lag(salary) over (partition by user_id order by salary_change_date))*100 as percent_increase
      from user_multi_base_salary;
    )S
on (s.user_id = t.user_id and s.salary_change_date = t.salary_change_date)
when matched then update set
T.percent_increase = S.percent_increase 
```

# python - 线程不退出python

> ID：13722196
> 
> 赞同：1
> 
> 时间：2012-12-05T11:25:09.813
> 
> 标签：python, multithreading

我用python写了一个小线程示例。我面临的问题是，当线程内部出现异常时，该线程会继续运行并且不会退出。我有以下代码：

```
class Producer (threading.Thread):

    def __init__(self, threadId):
        threading.Thread.__init__(self)
        self.threadId  = threadId
        self.killReceived = False

    def produce(self):
        while 1:
            if self.killReceived == True:
                print self.threadId+"inside kill section"
                return False
            print "running"
            time.sleep(1) 
            raise Exception('boo')

    def run(self):
        try:
            self.produce()
        except Exception as e:
            ThreadManager.getInstance().shutdown(self.threadId)

    def stop(self):
        self.killReceived = True

class ThreadManager:
    _instance = None

    @staticmethod
    def getInstance():
        if ThreadManager._instance == None:
            ThreadManager._instance = ThreadManager()
        return ThreadManager._instance

    def __init__(self):
        ''' some initializations '''

    def shutdown(self, threadId):
        while threading.active_count() > 1:
            for thread in threading.enumerate():    
                if type(thread) != threading._MainThread: #never kill main thread directly
                    thread.stop()
                    #print thread.threadId+" is alive? "+str(thread.isAlive()) 
```

当我在生产者内部引发异常时，它被捕获并触发 ThreadManager 的关闭方法，该方法又调用除主线程之外的所有正在运行的线程的 stop() 方法。消费者使用此策略退出，但生产者挂起。如果我运行`isAlive`方法，我会看到生产者线程仍在运行，但是它的运行方法不再运行。因为它不再打印。由于 run() 内部`running`的方法中出现异常`produce`，所以线程应该自动完成。但事实并非如此。那么制作人具体在哪里呢？发生异常时如何使其停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:31:42.963

ThreadManager`shutdown`没有正确同步；它基本上是一个`threading.active_count() > 1`永远不会退出的while循环。如果两个或更多线程最终在此方法中，它们（和程序）将永远不会退出。

与其不断调用随机线程（甚至可能与您的线程无关），只需在 ThreadManager 中保存所有已启动线程的清单，然后`stop`对它们中的每一个调用一次。此外，实际调用 stop 的代码应该移到它在逻辑上所属的 ThreadManager 中。

此外，`ThreadManager.getInstance`它不是线程安全的；您最终可能会得到多个 ThreadManager。你应该使用[锁](http://docs.python.org/3/library/threading.html#lock-objects)。

总而言之，看起来您正在重新实现一个[`ThreadPoolExecutor`](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor). 你为什么不使用它呢？

# javascript - 如何在 gRaphael 折线图 hoverColumn 函数中检索当前 X 值？

> ID：13722197
> 
> 赞同：0
> 
> 时间：2012-12-05T11:25:11.940
> 
> 标签：javascript, linechart, vml, graphael

下面我发布了一些代码和评论，用于制作带有标签悬停效果的简单 gRaphael 折线图（包含的脚本文件可以在[http://raphaeljs.com](http://raphaeljs.com)和[http://g.raphaeljs.com](http://g.raphaeljs.com)找到）。该代码按应有的方式工作（因此对于其他从 gRaphael 线图开始的人来说是一个很好的例子），但我有一个关于标记函数的文本参数的问题/请求：

照原样，标签将在当前列显示每个点的 Y 值（this.values[i]），但我希望同时显示 X 值和 Y 值（X，Y）。我敢肯定这很简单，但到目前为止我还无法弄清楚如何去做。添加逗号和空格没问题，只是`', ' + this.values[i]`，但我不知道如何处理 X 值。`this.attr("x")`是我到目前为止最接近的，但那是纸上的 X 坐标，而不是图表 X 轴上的 X 值；-)

谁能帮帮我？

```
// make tags at every point on the current column
for (var i = 0; i < this.y.length; i++) {
  this.tags.push(
  // make tag (x, y, text, degree, radius)
paper.tag(this.x, this.y[i], this.values[i], 0, 4).insertBefore(this).attr([{ fill: "#ffffff" }, { fill: this.symbols[i].attr("fill") }])
); 
```

* * *

```
<html>
<head>
<title></title>
<script src="raphael-min.js"></script>
<script src="g.raphael-min.js"></script>
<script src="g.line-min.js"></script>
<script language="JavaScript">

function graphael() {

  var paper = Raphael("paper");

  var chartwidth = 800;
  var chartheight = 300;
  var charttopleftx = 20;
  var charttoplefty = 0;

  // The chart
  var linechart = paper.linechart(charttopleftx, charttoplefty, chartwidth, chartheight,

    // The X-coordinate sets
    [
    [0, 1, 2, 3, 4, 5],
    [0, 1, 2, 3, 4, 5],
    [0, 1, 2, 3, 4, 5]
    ],

    // The Y-coordinate sets
    [
    [500, 550, 540, 510, 600, 570],
    [500, 525, 400, 450, 390, 490],
    [500, 425, 500, 430, 650, 425]
    ],

    // Chart config
    { axis: "0 0 1 1", symbol: "circle", smooth: false, axisxstep: 5 });

    // The dots
    linechart.symbols.attr({ r: 4 });

    // The tags
    linechart.hoverColumn(

      // show
      function onmousein() {

        this.tags = paper.set(); // creates a set of tags (to be able to hide them all in one operation)

        // make tags at every point on the current column
        for (var i = 0; i < this.y.length; i++) {
          this.tags.push(
            // make tag (x, y, text, degree, radius)
            paper.tag(this.x, this.y[i], this.values[i], 0, 4).insertBefore(this).attr([{ fill: "#ffffff" }, { fill: this.symbols[i].attr("fill") }])
          );
        }

      }

      ,

      // hide
      function onmouseout() {
        this.tags.hide();
      }

    );

}

</script>
</head>

<body onload="graphael()">

<div id='paper' style='width:900;height:320;'></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T06:28:51.807

尝试在 chrome 中列出对象（CTRL+SHIFT+I->Console）。例如 - 为饼图图例中的每个标签获取 cy 和 y。

```
var pieChart = paper.piechart(w, h, rad, values, {legend: legend, legendpos: "south", minPercent: 0.1, legendothers: "Others"});

for( var i = 0; i < pieChart.labels.length; i++ ) {
 var CY=pieChart.labels[i][0][0].cy.animVal.value;
 var Y=pieChart.labels[i][1][0].y.animVal[0].value;
} 
```

# macos - 山狮上的自定义本地主机

> ID：13722200
> 
> 赞同：0
> 
> 时间：2012-12-05T11:25:21.420
> 
> 标签：macos, apache, localhost

我刚刚将 Mountain Lion 安装到我的 MBP。我需要创建一个自定义本地主机。有人可以帮我吗？我不擅长服务器设置，所以请温柔一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:46:44.803

[我在这里](http://coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion)和[这里](http://robdodson.me/blog/2012/10/02/virtual-host-in-mountain-lion-with-apache/)找到了答案！

# haskell - 找出函数属于哪个模块

> ID：13722203
> 
> 赞同：3
> 
> 时间：2012-12-05T11:25:44.490
> 
> 标签：haskell, ghci

在 ghci (haskell) 中有一个命令会告诉我一个函数属于哪个模块（在加载的模块中）。例如，如果该函数被称为 whichMod，那么它将按如下方式工作：

```
Prelude>whichMod take
Prelude
Prelude>whichMod sort
Data.List 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T11:28:37.863

您想要`:i`命令（的缩写`:info`）。

```
Prelude> :i take
take :: Int -> [a] -> [a]   -- Defined in GHC.List
Prelude> :i sort

Top level: Not in scope: `sort'
Prelude> :m +Data.List
Prelude Data.List> :i sort
sort :: Ord a => [a] -> [a]     -- Defined in Data.List 
```

正如您所建议的，它仅在函数位于当前加载的模块中时才有效。

请注意，您被告知该函数最初定义在哪个模块中。例如`take`，定义在`GHC.List`（至少在我的 ghc 副本中），但从前奏中重新导出。不会告诉您从哪个模块导入它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T12:32:42.127

是的，存在该功能：

```
Prelude> :! hoogle sort
Data.List sort :: Ord a => [a] -> [a]
Data.List sortBy :: (a -> a -> Ordering) -> [a] -> [a]
Data.ByteString sort :: ByteString -> ByteString
Data.ByteString.Char8 sort :: ByteString -> ByteString
Data.Sequence sort :: Ord a => Seq a -> Seq a
package sort-by-pinyin
Data.Sequence sortBy :: (a -> a -> Ordering) -> Seq a -> Seq a
GHC.Exts sortWith :: Ord b => (a -> b) -> [a] -> [a]
package sorty
package cabal-sort
package external-sort
Data.Graph.Inductive.Internal.Heap heapsort :: Ord a => [a] -> [a]
package heapsort
package natural-sort
package NaturalSort
Data.Graph topSort :: Graph -> [Vertex]
Data.Graph.Inductive.Query.DFS topsort :: Graph gr => gr a b -> [Node]
Data.Graph.Inductive.Query.DFS topsort' :: Graph gr => gr a b -> [a]
Data.Sequence unstableSort :: Ord a => Seq a -> Seq a
Data.Sequence unstableSortBy :: (a -> a -> Ordering) -> Seq a -> Seq a
Prelude> _ 
```

您可以在*“~/.ghci”*配置文件中定义一个别名

```
:def hoogle \str -> return $ ":! hoogle \"" ++ str ++ "\"" 
```

然后，你可以写

```
Prelude> :hoogle sort
Data.List sort :: Ord a => [a] -> [a]
Data.List sortBy :: (a -> a -> Ordering) -> [a] -> [a]
Data.ByteString sort :: ByteString -> ByteString
Data.ByteString.Char8 sort :: ByteString -> ByteString
Data.Sequence sort :: Ord a => Seq a -> Seq a
package sort-by-pinyin
Data.Sequence sortBy :: (a -> a -> Ordering) -> Seq a -> Seq a
GHC.Exts sortWith :: Ord b => (a -> b) -> [a] -> [a]
package sorty
package cabal-sort
package external-sort
Data.Graph.Inductive.Internal.Heap heapsort :: Ord a => [a] -> [a]
package heapsort
package natural-sort
package NaturalSort
Data.Graph topSort :: Graph -> [Vertex]
Data.Graph.Inductive.Query.DFS topsort :: Graph gr => gr a b -> [Node]
Data.Graph.Inductive.Query.DFS topsort' :: Graph gr => gr a b -> [a]
Data.Sequence unstableSort :: Ord a => Seq a -> Seq a
Data.Sequence unstableSortBy :: (a -> a -> Ordering) -> Seq a -> Seq a
Prelude> _ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T11:28:27.893

```
Prelude> :info take
take :: Int -> [a] -> [a]   -- Defined in `GHC.List' 
```

# .net - Picasa API 中的 OAuth 2.0 请求

> ID：13722204
> 
> 赞同：1
> 
> 时间：2012-12-05T11:25:45.643
> 
> 标签：.net, oauth, google-api

出于毕业文章的目的，我正在开发 Picasa API 的 Windows Phone 应用客户端，而不使用任何库。

我能够执行此处列出的前 5 个步骤：[https ://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#Auth](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#Auth)

但是如何执行第 6 步“将令牌附加到请求”？您的应用程序请求用户数据，并将访问令牌附加到请求中。

我尝试使用 HTTP Header Authentication: Bearer [access token] and query string ?access_token=[Token]

两者都没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:30:21.593

如果您在此处发布代码会有所帮助，但是基本上查询字符串 ?access_token= 应该可以工作。您使用的是客户端身份验证还是服务器端身份验证？

服务器端身份验证实际上还有一个额外的步骤。您需要将“代码”换成“令牌”。

之后，只需将访问令牌粘贴到查询字符串中即可。我有一个具有此 WCF 合同签名的有效工作项目：

```
[ServiceContract]
public interface IPicasaWeb
{
    [OperationContract]
    [WebInvoke(UriTemplate = "data/feed/api/user/{userId}?kind=photo&alt=json&access_token={accessToken}&max-results={perPage}&start-index={startIndex}&access={access}",
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        Method="GET")]
    Photos GetPhotos(string userId, string accessToken = null, int startIndex = 1, int perPage = 30, string access = "visible");
} 
```

# php - 在 PHP 中搜索相同的结果显示多次？

> ID：13722206
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:25:48.140
> 
> 标签：php, sql, search, select

我在 PHP 中使用 SQL 查询进行搜索：

```
SELECT *
FROM vendor, branches
WHERE branches.vendor_id = vendor.vendor_id
AND vendor.name LIKE '%".$query."%'
OR vendor.description LIKE '%".$query."%'
OR branches.city LIKE '%".$query."%' 
```

它多次显示结果。我希望 PHP 显示结果，如果找到，只显示一次，而不是多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:29:38.957

尝试选择不同的或使用分组依据。您可以使用下面的查询，如果您使用 distinct 或 group，请尝试使用一个元素，例如 SELECT id 而不是 SELECT *。

```
SELECT * FROM vendor as VTable 
WHERE vendor.name LIKE '%".$query."%' 
AND VTable.vendor_id = (SELECT TOP 1 FROM branches as BTable WHERE BTable.vendor_id = VTable.vendor OR BTable.city LIKE '%".$query."%')
OR vendor.description LIKE '%".$query."%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:42:44.873

尝试

```
 SELECT * FROM vendor INNER JOIN branches ON branches.vendor_id = vender.vendor_id
WHERE (
    vendor.name LIKE '%".$query."%'
    OR vendor.description LIKE '%".$query."%'
    OR branches.city LIKE '%".$query."%'
) 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:49:46.550

更具描述性，
1\. SELECT DISTINCT column_1(, column_2, etc) FROM table_name
2\. SELECT * FROM table_name GROUP BY column_1(, column_2)

# android - 专注于 EditText

> ID：13722213
> 
> 赞同：1
> 
> 时间：2012-12-05T11:26:03.947
> 
> 标签：android, focus, android-edittext

当我尝试按下 EditText 以获得焦点时，它只能从它的中间向左工作。如果我从中间向右按，什么也不会发生。

（它有宽度 = fill_parent）。

我在 Android 2.2 和 4.2.1 上进行了测试。两者的行为相同。

为什么会发生这种情况，可以“修复”吗？

是安卓平台的bug吗？

**更新：**

首先，我认为这与在活动开始时隐藏键盘有关，但我尝试了 4 个选项：

添加到基础 LinearLayout （检查[Stop EditText from getting focus at Activity startup](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)）

```
<LinearLayout
....
android:focusable="true"
android:focusableInTouchMode="true" /> 
```

我也试过：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

并在清单上进行更改：

```
<activity.... android:windowSoftInputMode="adjustUnspecified|stateHidden"/> 
```

并使用默认行为。

...都具有上述相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:31:50.063

问题已更新。老答案：

删除您在线性布局 xml 文件中所做的操作，并将此代码放在 create 方法上的活动中，以防止键盘自动弹出：

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:44:55.910

为什么将 android:focusable="true" android:focusableInTouchMode="true" 添加到 LinearLayout？在每个 LinearLayout 中，焦点将放在页面加载时的第一个可聚焦项上。如果您希望将焦点放在其他视图上，请在布局中的视图后添加一个标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T11:06:11.113

解决了这个问题。它与 EditText 宽度有关。

# selenium - Selenium 在尝试添加扩展时抛出错误 - “无法连接到二进制 FirefoxBinary”和“无法找到包含扩展 ID 的节点”

> ID：13722217
> 
> 赞同：2
> 
> 时间：2012-12-05T11:26:13.653
> 
> 标签：selenium

我试图让 Selenium 在测试时安装扩展。我正在使用最新的独立 JAR ( `selenium-server-standalone-2.26.0.jar`) 和 Firefox 17 来运行我的测试。当我不尝试添加扩展时，该程序运行良好。

我已经多次验证我尝试使用的扩展文件存在并且可以被程序访问，并且实际上包含有效的 install.rdf，因为我使用它在我的默认 Firefox 配置文件中手动安装扩展。

我的代码是：

```
FirefoxProfile fp=new FirefoxProfile();
File ext=new File("myext-2.17.xpi");
        try {
            fp.addExtension(ext);
            fp.setPreference("extensions.myext.version", "myext-2.17");
        } catch (Exception e2) {
            e2.printStackTrace();
        }
WebDriver wd=new FirefoxDriver(fp); 
```

完整的堆栈跟踪如下：

```
Exception in thread "pool-1-thread-2" org.openqa.selenium.WebDriverException: Failed to connect to binary FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe) on port 7055; process output follows: 
null
Build info: version: '2.26.0', revision: '18041', time: '2012-11-01 19:33:38'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_02'
Driver info: driver.version: FirefoxDriver
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:122)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:243)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:109)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:189)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:182)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:178)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:95)
    at TrafficGenerator.BrowserWindow.run(BrowserWindow.java:80)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.openqa.selenium.WebDriverException: org.openqa.selenium.WebDriverException: Cannot locate node containing extension id: C:\Users\Vivek\AppData\Local\Temp\unzip3924903411706376479stream\install.rdf
Build info: version: '2.26.0', revision: '18041', time: '2012-11-01 19:33:38'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_02'
Driver info: driver.version: FirefoxDriver
Build info: version: '2.26.0', revision: '18041', time: '2012-11-01 19:33:38'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_02'
Driver info: driver.version: FirefoxDriver
    at org.openqa.selenium.firefox.internal.FileExtension.readIdFromInstallRdf(FileExtension.java:141)
    at org.openqa.selenium.firefox.internal.FileExtension.writeTo(FileExtension.java:60)
    at org.openqa.selenium.firefox.FirefoxProfile.installExtensions(FirefoxProfile.java:465)
    at org.openqa.selenium.firefox.FirefoxProfile.layoutOnDisk(FirefoxProfile.java:443)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:77)
    ... 10 more 
```

使用FF16和FF9也存在错误。关于可能导致错误的原因以及如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T08:09:18.893

```
Caused by: org.openqa.selenium.WebDriverException: org.openqa.selenium.WebDriverException: Cannot locate node containing extension id: C:\Users\Vivek\AppData\Local\Temp\unzip3924903411706376479stream\install.rdf 
```

看起来您的扩展在 RDF 描述中缺少必需的“扩展 ID”字段。

您可能会尝试在没有扩展的情况下启动 Firefox，并尝试在没有 selenium 的正在运行的 Firefox 中安装扩展。

# python - 循环完成后引发for循环中遇到的第一个异常

> ID：13722218
> 
> 赞同：2
> 
> 时间：2012-12-05T11:26:27.503
> 
> 标签：python, exception-handling, for-loop, iterator

我有一个循环，可能会在一次或多次迭代中引发异常。我希望循环完成，然后引发遇到的第一个异常，在以下示例中为“raise on 4”。

示例代码：

```
e = None
for x in range(10):
    try:
        print x
        if x == 4:
            raise Exception('raise on 4')
        if x == 6:
            raise Exception('raise on 6')
    except Exception as e:
        print e
        continue
else:
    if e:
        raise 
```

输出：

```
0
1
2
3
4
raise on 4
5
6
raise on 6
7
8
9
Traceback (most recent call last):
  File "<stdin>", line 7, in <module>
Exception: raise on 6 
```

我可以使用日志记录模块来记录它们，这很好，但如果可能的话，我想提出第一个异常。

我对 Python 还是很陌生，所以我不完全确定我用“else”语句构建循环的方式是否非常 Pythonic 或正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:29:06.100

您必须存储`e`在一个单独的变量中：

```
firste = None
for x in range(10):
    try:
        print x
        if x == 4:
            raise Exception('raise on 4')
        if x == 6:
            raise Exception('raise on 6')
    except Exception as e:
        if firste is None:
            firste = e
        continue

if firste is not None:
    raise firste 
```

Now`firste`仅在第一次引发异常时设置。

`else`在这种情况下你不需要使用。仅当您的 for 循环包含`break`将跳过套件的语句时才使用它`else`，否则只需将测试放在循环`firste`下方`for`而不使用冗余`else`套件缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:34:49.827

您可以将错误附加到列表中，稍后再提出：

```
In [25]: errors=[]

In [26]: for x in range(10):
        try:
                print x
                if x == 4:
                        raise Exception('raise on 4')
                if x == 6:
                        raise Exception('raise on 6')
        except Exception as e:
                    errors.append(e)
                    continue
   ....:             
0
1
2
3
4
5
6
7
8
9

In [27]: for error in errors:
    raise error
   ....: 
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)
<ipython-input-27-1f1d8ab5ba84> in <module>()
      1 for error in errors:
----> 2     raise error

Exception: raise on 4 
```

# javascript - 如何使用 Jasmine 运行确切的套件/规格？

> ID：13722224
> 
> 赞同：0
> 
> 时间：2012-12-05T11:26:43.587
> 
> 标签：javascript, jasmine

当我点击确切的套件/规格过滤时，在[茉莉花页面](http://pivotal.github.com/jasmine/)上对我来说效果很好。但是当我试图在 localhost:8000 （简单的python服务器）上本地使用它时 - 它没有运行任何规范......

会是什么呢？似乎这不仅是我的问题，我已经在 jasmine google 小组中看到了确切的内容，但不幸的是，没有解决方案。

# javascript - 选择未更改时未触发的焦点

> ID：13722225
> 
> 赞同：3
> 
> 时间：2012-12-05T11:26:44.747
> 
> 标签：javascript, jquery, select, focusout

当输入框获得焦点时，我试图用选择列表替换输入框。如果没有任何更改，则恢复为旧值。

这一切都像预期的那样工作，但是当我只是关注输入框然后单击焦点事件之外的某个地方时，不会触发焦点事件。

这是设计使然还是我做错了什么？

的HTML：

```
<div id=test>
     <input type=text class=edit value=3 >
     <input type=hidden class=temps>
</div>​ 
```

和脚本：

```
$(function (){
    editfocus();     
    editout();            
});

function editfocus(){    
    $('.edit').unbind('focusin');
    $('.edit').bind('focusin', function() {
    console.log(this);
    var previous = this.value;
    $(this).siblings('.temps').val(previous);
    parentid=$(this).parent()[0].id;
    $('#'+parentid).children('.edit').replaceWith('<select class="edit listme" ><option value=1 >one</option><option value=2 >two</option></select>');
        editout();
    });
}
function editout(){
    $('.edit').unbind('focusout');
    $('.edit').bind('focusout', function() {
        parentid=$(this).parent()[0].id;
        oldval=$(this).siblings('.temps').val();
        $('#'+parentid).children('.edit').replaceWith('<input type=text class=edit   value="'+oldval+'" />');
        editfocus();
    });
}    ​ 
```

另请参阅此 jsfiddle：http: [//jsfiddle.net/mandropil/f9jN3/](http://jsfiddle.net/mandropil/f9jN3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:35:34.867

这可以通过在替换文本输入后手动聚焦选择元素来轻松解决。

所以`editOut()`在`editfocus()`函数之前，简单的放置：

```
$('select').focus(); 
```

# jquery - jquery 如何收集匹配的元素？

> ID：13722226
> 
> 赞同：0
> 
> 时间：2012-12-05T11:26:44.803
> 
> 标签：jquery

如果有人给我建议使用每个收集匹配的元素？

这是我试过的：

```
<ul>
<li class='options'></li>
<li></li>
<li class='options'></li>
<li></li>
<li class='options'></li>
<li class='options'></li>
</ul>​

var x = $();

x = (function(){
$.each($('li.options','ul'), function(i,e){
    return e;
})
    })()

    console.log(x)//i am getting undefined. 
```

[这是jsfiddle](http://jsfiddle.net/scDhx/)

我如何收集匹配的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:34:00.473

发生这种情况是因为您仅在迭代每个函数内部返回，但在外部匿名函数中没有。它应该是这样的：

```
var x = (function(){
    var elements = [];
    $.each($('li.options','ul'), function(i,e){
        elements.push(e);
    })
    return elements;
})();
console.log(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:30:15.167

Jquery 选择器本身会将匹配的元素作为集合返回

```
 $('ul > li.options') 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:32:37.013

如果您尝试获取选项值，我可能会这样做。如果你想比较它们，你可以简单地将它们放在比较数组中，具体取决于你的最终目标是什么（在这种情况下不完全确定你的意思是匹配）

```
$('.options').each(function() {
  console.log($(this).html());
}); 
```

# python - Django：测试成功加载静态文件

> ID：13722228
> 
> 赞同：8
> 
> 时间：2012-12-05T11:26:59.080
> 
> 标签：python, django, automated-tests, django-testing

是否可以在 Django 自动测试中测试成功加载静态页面组件？

例如，使用django测试客户端，除了测试`client.get('x').status_code`为200之外，我想测试所有页面的静态资源（链接的css和js文件）是否成功加载。

如果无法使用`client`，是否有插件或补充测试系统（例如 Selenium）来启用此类测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T16:44:55.300

我猜你想知道 django 的静态文件查找器是否能够找到你的静态资源。

考虑您的应用名称是`my_app`. 您在其中有一个文件夹`static`。您再次`my_app`在其中有一个名为的文件夹，其中包含您的静态资源，比方说一些名为“test.jpg”的图像。

```
myapp
|-- __init__.py 
`-- models.py
`-- static
    `-- myapp
        `-- test.jpg

from django.contrib.staticfiles import finders
from django.contrib.staticfiles.storage import staticfiles_storage

class TestStaticFiles(TestCase):
"""Check if app contains required static files"""
def test_images(self):
    abs_path = finders.find('myapp/test.jpg')
    self.assertTrue(staticfiles_storage.exists(abs_path)) 
```

`finders`在`static/`所有应用程序的子目录中查找静态资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T04:32:33.263

我刚刚发现自己遇到了一个非常相似的问题，尽管我想验证文件是否包含在页面中，而不是检查它是否已加载，因为我有选择地包含它。

为此，我只需使用 assertContains 进行检查：

```
def test_static_file_included(self):
    response = self.client.get(reverse('my-view'))
    self.assertContains(response, 'staticfilename.js') 
```

请记住，它`staticfilename.js`可能包含在页面的其他位置。

`assertContains`将检查响应 status_code 是否正常，然后检查搜索 str 是否包含在`response.content`.

# perl - perl 生产者连接到 activemq 服务器时出错

> ID：13722229
> 
> 赞同：0
> 
> 时间：2012-12-05T11:26:58.937
> 
> 标签：perl, activemq, eof, stomp, producer

我正在尝试让 perl 生产者与 ActiveMq 交谈。请找到我尝试过的代码。它给了我一个错误 **“*** Net::STOMP::Client::IO::receive_data(): cannot sysread(): EOF”**

调试错误后，`$stomp->connect();` 请让我知道为什么此时出现此错误...我无法在线找到有关此问题的太多帮助..

提前致谢

我试图远程登录到我试图连接的 url。首先它正在连接，最后它是一些错误消息，如下所示：

```
CacheEnabledSizePrefixDisabled MaxInactivityDurationInitalDelay'TcpNoDelayEnabledMaxInactivityDurationu0TightEncodingEnabledStackTraceEnabledPuTTY
Connection closed by foreign host. 
```

这意味着连接正在关闭。

**这些是我怀疑有错误的代理日志：**

```
2012-12-07 14:44:12,021 | WARN  | Transport Connection to: tcp://127.0.0.1:57404 failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ Transport: tcp:///127.0.0.1:57404@61616
2012-12-07 14:44:12,021 | WARN  | Transport Connection to: tcp://127.0.0.1:57403 failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ Transport: tcp:///127.0.0.1:57403@61616
2012-12-07 14:44:12,024 | WARN  | Transport Connection to: tcp://127.0.0.1:57405 failed: java.io.IOException: Unknown data type: 47 | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ Transport: tcp:///127.0.0.1:57405@61616
2012-12-07 14:44:12,024 | WARN  | Transport Connection to: tcp://127.0.0.1:57405 failed: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://127.0.0.1:57405 | org.apache.activemq.broker.TransportConnection.Transport | Async Exception Handler
2012-12-07 16:08:55,045 | WARN  | Transport Connection to: tcp://127.0.0.1:58008 failed: java.io.IOException: Unknown data type: 69 | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ Transport: tcp:///127.0.0.1:58008@61616
2012-12-07 16:08:55,045 | WARN  | Transport Connection to: tcp://127.0.0.1:58008 failed: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://127.0.0.1:58008 | org.apache.activemq.broker.TransportConnection.Transport | Async Exception Handler 
```

**代码：**

```
#! /usr/bin/perl

use strict;
use warnings;

use Net::STOMP::Client;
my $stomp = Net::STOMP::Client->new(uri => "tcp://$url:$port");
my $peer = $stomp->peer();
  printf("connected to broker %s (IP %s), port %d\n",
      $peer->host(), $peer->addr(), $peer->port());
  $stomp->connect();
  printf("speaking STOMP %s with server %s\n",
      $stomp->version(), $stomp->server() || "UNKNOWN");
  printf("session %s started\n", $stomp->session());
  $stomp->disconnect();
  printf("session ended\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:20:08.067

如果您告诉我们错误发生在哪一行，那会有所帮助，因为这会指出哪个调用因该错误而失败。

Perl 的 STOMP 库有一些非常错误的版本。确保您使用的是 CPAN 的最新版本，而不是系统上预装的旧版本。

# php - 使用数组值作为参数

> ID：13722231
> 
> 赞同：0
> 
> 时间：2012-12-05T11:27:21.577
> 
> 标签：php

我正在尝试创建一个对象，然后使用自定义参数调用一个方法。

我不能使用 call_user_func_array 因为这不会创建对象的新实例，稍后我需要在我的类中调用 $this 。

```
$params = array('param1', 'param2', 'etc') ; 
```

我该怎么做才能使结果等同于：

```
$controller = new $class ;
$controller->$method($param1, $param2, $etc) ; 
```

我也不想使用 ReflectionClass，因为据报道它比实例化慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:30:15.277

是的，您可以使用[call_user_func_array](http://php.net/manual/function.call-user-func-array.php)：

```
$controller = new $class;
call_user_func_array(array($controller, $method), $params); 
```

参考： http: [//php.net/manual/function.call-user-func-array.php](http://php.net/manual/function.call-user-func-array.php)

# c - 使用 Openssl 进行 rsa 签名时出现段错误

> ID：13722237
> 
> 赞同：2
> 
> 时间：2012-12-05T11:27:50.047
> 
> 标签：c, openssl

我正在尝试做 RSA 签名。我遵循的步骤是：

创建 RSA 密钥：

```
BIGNUM *check ;

        check = BN_bin2bn(m_priv_n, MODULUS_SIZE, rsa->n);
        if(check == NULL) 
        {
            perror("Error in n \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_e, EXPONENT_SIZE, rsa->e);
        if(check == NULL) 
        {
            perror("Error in e \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_d, D_SIZE, rsa->d);
        if(check == NULL) 
        {
            perror("Error in d \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_p, PRIME_NUMBER_SIZE, rsa->p);
        if(check == NULL) 
        {
            perror("Error in p \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_q, PRIME_NUMBER_SIZE, rsa->q);
        if(check == NULL) 
        {
            perror("Error in q \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_dp,DP_SIZE,rsa->dmp1);
        if(check == NULL) 
        {
            perror("Error in dp \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_dq, DQ_SIZE, rsa->dmq1);
        if(check == NULL) 
        {
            perror("Error in dq \n");
            rv = - 1;
            goto exit;
        }

        check = BN_bin2bn(m_priv_iq, IQ_SIZE, rsa->iqmp);
        if(check == NULL) 
        {
            perror("Error in iq \n");
            rv = - 1;
            goto exit;
        }

            EVP_PKEY *signing_key = EVP_PKEY_new();
        //  EVP_PKEY_assign_RSA(signing_key, rsa);

            EVP_PKEY_set1_RSA( signing_key, rsa ); 
```

计算哈希值：

```
EVP_MD_CTX mdctx;
        const EVP_MD *md;
        unsigned char md_value[EVP_MAX_MD_SIZE];
        unsigned int mdlen;

        OpenSSL_add_all_digests();
        md = EVP_get_digestbyname("sha256");

        if(!md)
        {
            printf("Unknown message digest \n");
            rv = - 1;
            goto exit;
        }

        EVP_MD_CTX_init(&mdctx);
        EVP_DigestInit_ex(&mdctx, md, NULL);
        EVP_DigestUpdate(&mdctx, input, strlen(input));
        EVP_DigestFinal_ex(&mdctx, md_value, &mdlen);
        EVP_MD_CTX_cleanup(&mdctx); 
```

然后签名，为此我尝试了两种不同的方法：第一种方法：

```
OpenSSL_add_all_algorithms();
        OpenSSL_add_all_ciphers();
        OpenSSL_add_all_digests();

        EVP_PKEY *evpKey = 0;
        evpKey = EVP_PKEY_new();

        EVP_PKEY_set1_RSA( evpKey, rsa );

        EVP_MD_CTX* ctx = 0;
        ctx = EVP_MD_CTX_create();
        EVP_SignInit_ex( ctx, EVP_sha256(), 0 );
        EVP_SignUpdate( ctx, md_value, mdlen);

        const int MAX_LEN = 256;
        unsigned char sig[MAX_LEN];
        unsigned int sigLen;
        memset(sig, 0, MAX_LEN);

        EVP_SignFinal( ctx, sig, &sigLen, evpKey );// Here it is getting crashed

        printf( "Got signature: '%s'\n", sig );

        EVP_MD_CTX_destroy( ctx );
        RSA_free( rsa );
        EVP_PKEY_free( evpKey );
        ERR_free_strings(); 
```

第二种方法：

```
 EVP_PKEY_CTX *ctx;
        unsigned char *sig;
        size_t siglen;

        ctx = EVP_PKEY_CTX_new(signing_key,NULL);

         if (!ctx)
         {
            printf("Error Occurred \n");
            rv = - 1;
            goto exit;

         }

         if (EVP_PKEY_sign_init(ctx) <= 0)
         {
            printf("Error \n");
            rv = - 1;
            goto exit;       
         }

         if (EVP_PKEY_CTX_set_rsa_padding(ctx, RSA_PKCS1_PADDING) <= 0)
         {
            printf("Error \n");
            rv = - 1;
            goto exit;       
         }

         if (EVP_PKEY_CTX_set_signature_md(ctx, EVP_sha256()) <= 0)
         {
            printf("Error \n");
            rv = - 1;
            goto exit;       
         }

            fflush(stdout);
         if (EVP_PKEY_sign(ctx, NULL, &siglen, md_value, mdlen) <= 0)
         {
            printf(" Error  \n");
            rv = - 1;
            goto exit;       

         }

         sig = (unsigned char*)OPENSSL_malloc(siglen);
         if (!sig)
         {
            printf(" malloc failure \n");
            rv = - 1;
            goto exit;       

         }
         if (EVP_PKEY_sign(ctx, sig, &siglen, md_value, mdlen) <= 0) // Here it is crashing
         {
            printf("Unknown message digest \n");
            rv = - 1;
            goto exit;       

         } 
```

在上述两种情况下，我都会遇到相同的错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000049b5ea in BN_MONT_CTX_set ()
(gdb) bt
#0  0x000000000049b5ea in BN_MONT_CTX_set ()
#1  0x000000000049b8f3 in BN_MONT_CTX_set_locked ()
#2  0x0000000000440a6c in RSA_eay_mod_exp ()
#3  0x000000000043fb29 in RSA_eay_private_encrypt ()
#4  0x00000000004050b2 in RSA_private_encrypt ()
#5  0x000000000044169f in RSA_sign ()
#6  0x0000000000443d1f in pkey_rsa_sign () 
```

任何解决此错误的帮助将不胜感激。

谢谢，尤维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:09:38.573

我得到了解决方案：我没有以正确的方式创建 RSA 密钥。以下是正确的方法：

```
 BIGNUM *check ;

    RSA *rsa = RSA_new(); // Create a new RSA key
    rsa->e = BN_new();
    rsa->n = BN_new();
    rsa->d = BN_new();
    rsa->p = BN_new();
    rsa->q = BN_new();
    rsa->dmp1 = BN_new();
    rsa->dmq1 = BN_new();
    rsa->iqmp = BN_new();

    check = BN_bin2bn(m_priv_n, MODULUS_SIZE, rsa->n);
    if(check == NULL) 
    {
        perror("Error in n \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_e, EXPONENT_SIZE, rsa->e);
    if(check == NULL) 
    {
        perror("Error in e \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_d, D_SIZE, rsa->d);
    if(check == NULL) 
    {
        perror("Error in d \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_p, PRIME_NUMBER_SIZE, rsa->p);
    if(check == NULL) 
    {
        perror("Error in p \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_q, PRIME_NUMBER_SIZE, rsa->q);
    if(check == NULL) 
    {
        perror("Error in q \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_dp,DP_SIZE,rsa->dmp1);
    if(check == NULL) 
    {
        perror("Error in dp \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_dq, DQ_SIZE, rsa->dmq1);
    if(check == NULL) 
    {
        perror("Error in dq \n");
        rv = - 1;
        goto exit;
    }

    check = BN_bin2bn(m_priv_iq, IQ_SIZE, rsa->iqmp);
    if(check == NULL) 
    {
        perror("Error in iq \n");
        rv = - 1;
        goto exit;
    }

    EVP_PKEY *signing_key = EVP_PKEY_new();
    EVP_PKEY_assign_RSA(signing_key, rsa); 
```

# android - android启用/禁用通知

> ID：13722238
> 
> 赞同：0
> 
> 时间：2012-12-05T11:27:50.483
> 
> 标签：android, mobile, notifications, push-notification

我是 android 开发和构建应用程序的新手。每当将公告记录到我的数据库中时，我都会尝试弹出通知。但是，并不是每个人都喜欢通知，因此应该有一个选项可以仅为我的应用禁用/启用通知。我想知道这是否可以用于 android 版本 2.1 及更高版本。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:34:42.897

当然。只需使用布尔变量来检查用户是否已启用或禁用通知并将其存储在您的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中。

每次需要启动通知时，检查变量；如果它是真的就启动通知，如果它是假的就不要启动它。

# javascript - 用户离开页面时清除会话变量

> ID：13722242
> 
> 赞同：0
> 
> 时间：2012-12-05T11:28:05.693
> 
> 标签：javascript, spring, jsf, session, primefaces

我想在用户离开页面时清除会话变量。我有一个表单，我在其中显示基于从 h:selectOneMenu 中选择的值的数据表。该表单有一个取消按钮，该按钮调用用于清除会话变量的销毁方法。一切正常。

问题描述：我正在调用一个在 onunload 事件下调用的 javascript 函数。此函数单击隐藏按钮“destroyBtn”。该按钮依次调用destroy() 方法。调用 destroy 方法并清除值，但当我单击表单或后退按钮之外的任何链接时页面导航停止。我正在使用@Component 和@Scope("session")。

```
function destroy(){
alert("Inside Destroy");
document.getElementById('MainForm:destroyBtn').click();
}

<h:commandButton id="destroyBtn" styleClass="none" value="Destroy" ajax="false"
 actionListener="#{TutorialsBean.destroy}" />

public void destroy(){
this.searchTxt="";
this.accessType.clear();
this.roleCart.clear();
this.manager = null;
this.helpList.clear();
this.setComment("");
} 
```

任何帮助将不胜感激。是否有任何其他方式可以使用 JSF 和 Spring 处理会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:01:58.337

为什么不将范围保持为视图？您的数据只保存到用户在页面上，并在用户离开页面时清除。

# facebook - facebook graph api：从id获取状态链接

> ID：13722243
> 
> 赞同：0
> 
> 时间：2012-12-05T11:28:08.003
> 
> 标签：facebook, facebook-graph-api

如果您通过图形 api 搜索“spiegel.de”：

`https://graph.facebook.com/search?q=spiegel&type=post&locale=de_DE`

结果不包含状态 URL。

如何从图形 api 结果生成 facebook 状态 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:47:01.220

具有`status id`, 具有以下结构：

```
<userid>_<statusid> 
```

如果您直接将其附加到, `facebook.com`，您将拥有如下内容：

```
http://facebook.com/<userid>_<statusid> 
```

例如。如果您有 ID `411158702281601_130747537082452`，则可以直接将其附加为，

[http://facebook.com/411158702281601_130747537082452](http://facebook.com/411158702281601_130747537082452)

这将是状态的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:28:08.003

结果集中的每个结果都包含一个唯一的 ID，例如

`142064272527925_534931533191604`

这`id`是结构像

`<userid>_<postid>`.

只需按如下方式构建状态网址：

`https://www.facebook.com/<userid>/posts/<postid>`

例如

`https://www.facebook.com/142064272527925/posts/534931533191604`

# solr - 如何在 solr 中读写外部文件字段？

> ID：13722245
> 
> 赞同：1
> 
> 时间：2012-12-05T11:28:11.903
> 
> 标签：solr, solrnet

我在 solr 中使用 External File 字段来存储我经常更新的数据类型。`_external_<myfieldTypename`我在我的索引目录中创建了一个文件>。我的数据是这样的：

```
4950 = 150.0
4951 = 65.0
4952 = 789.0
4953 = 786.0
4954 = 5.0
4955 = 21.0 
```

现在我创建了新字段：

`<fieldType name="<myfieldTypename>" class="solr.ExternalFileField" keyField="Name" defVal="1" indexed="false" stored="false" valType="float"/>`

`<field name="MyFieldName" type="<myfieldTypename>" indexed="true" stored="true"/>`

我的问题是如何从*外部*文件中读取数据？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:47:39.173

[文档](http://lucidworks.lucidimagination.com/display/solr/Working+with+External+Files+and+Processes)：-

> Solr 在 index 目录中查找名为`external_<fieldname>`or的外部文件`external_<fieldname>.*`

因此，在您的情况下，外部字段文件名应该是带有数据的 MyFieldName.txt 或 external_MyFieldName.txt。

> 外部字段不可搜索。它们只能用于函数查询或显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-26T21:33:42.257

`how can I read data from my external file?`

向 solr-user 组提出了同样的问题。（见[这里](http://www.mail-archive.com/solr-user@lucene.apache.org/msg84637.html)。） Yonik Seely 在该线程中的回答在 Solr 4.2.1 中对我来说很好。使用的语法是：

`fl=*,field(external_file_field)`

你也可以给它起别名，就像 Yonik 说的：

`fl=*,views:field(external_file_field)`

# qt - 调用 QGLContext::makeCurrent() 的方法

> ID：13722246
> 
> 赞同：0
> 
> 时间：2012-12-05T11:28:17.923
> 
> 标签：qt, qt4, qglwidget

我正在尝试在我们的应用程序中使用 QGLWidget。我从 QGLWidget 创建了一个派生类。我正在从一个单独的线程更新纹理（使用 glTexSubImage2D），并从 GUI 线程在 paintGL 中绘制纹理（使用 glTexCoord2i ..）。

我面临的问题是，当我调整窗口大小或最小化或最大化时，我得到“QGLContext::makeCurrent() : wglMakeCurrent failed: The requested resource is in use”，即使我已经覆盖了 initializeGL、resizeGL、paintGL 方法和在离开这些方法之前调用 doneCurrent。

有人可以帮助我了解需要覆盖哪些其他方法来解决此问题。

谢谢你。文

这是我的代码模板

```
#include "MyGlTexture.h" //my texture has pure open Gl code..it doesnt have qgl related code
#include <QGLWidget>

class MyGLWidget
   : public QGLWidget
{
   Q_OBJECT

   MyGLWidget(QWidget *parent = 0, Qt::WindowFlags f = 0);
   virtual ~MyGLWidget();

public slots:

   void updateTexure(QImage *img);

protected:   

   void initializeGL ();
   void resizeGL(int w, int h);
   void paintGL ();

   MyGlTexture m_Texture;
   QMutex m_DrawMutex;
};
MyGLWidget::MyGLWidget(QWidget *parent, Qt::WindowFlags f )
   : QGLWidget( parent,0, f)
{
 //some gl init code

}
MyGLWidget::~MyGLWidget()
{
//cleanup
}

void MyGLWidget::initializeGL ()
{
 ...........
 ...........
 m_Texture.Init(screenRect.width(),screenRect.height(), GL_TEXTURE_2D, GL_RGB);
}

void MyGLWidget::resizeGL(int width, int height)
{
   m_DrawMutex.lock();
   makeCurrent();
   //some code to get window size
   .................
   ...................   
   doneCurrent();
   m_DrawMutex.unlock();
}

//Updated by GUI Thread
void MyGLWidget::paintGL ()
{
   m_DrawMutex.lock();
   makeCurrent();

   m_Texure.Draw();

   doneCurrent();
   m_DrawMutex.unlock();
}
///Image Update thread
void MyGLWidget::updateTexure(QImage *img)
{
   m_DrawMutex.lock();
   makeCurrent();
   m_Texure.Update(img);
   doneCurrent();
   m_DrawMutex.unlock();
   //emit update singal which calls piantGL() to draw the texture
   update();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:21:21.080

你不应该在paintGL()、resizeGL() 或initializeGL() 中调用makeCurrent() 或doneCurrent()，因为OpenGL 上下文是由Qt 管理的并且已经在那里制作/完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:21:45.060

你不调用`makeCurrent`，或者`paintGL`，它是由 Qt 预先为你调用的。同样，您不应该在最后调用，因为周围的框架可能需要上下文仍然是最新的（实际上很少有真正需要调用的情况）。`initializeGL``resizeGL``doneCurrent``doneCurrent`

以同样的方式，您无需重新实现`resizeEvent`以获取调整大小信息。这`resizeGL`就是 for，由 自动调用`QGLWidget::resizeEvent`，由调用包裹`makeCurrent`。

所以只需将您的代码更改为：

```
#include "MyGlTexture.h" //my texture has pure open Gl code..it doesnt have qgl related code
#include <QGLWidget>

class MyGLWidget
   : public QGLWidget
{
   Q_OBJECT

   MyGLWidget(QWidget *parent = 0, Qt::WindowFlags f = 0);
   virtual ~MyGLWidget();

public slots:

   void updateTexure(QImage *img);

protected:   

   void initializeGL ();
   void resizeGL(int w, int h);  
   void paintGL ();

   MyGlTexture m_Texture;
   QMutex m_DrawMutex;
};
MyGLWidget::MyGLWidget(QWidget *parent, Qt::WindowFlags f )
   : QGLWidget( parent,0, f)
{
   //some gl init code

}
MyGLWidget::~MyGLWidget()
{
   //cleanup
}

void MyGLWidget::initializeGL ()
{
   ...........
   ...........
   m_Texture.Init(screenRect.width(),screenRect.height(), GL_TEXTURE_2D, GL_RGB);
}

void MyGLWidget::resizeGL(int width, int height)
{
   QMutexLocker locker(&m_DrawMutex);
   //some Gl code
}
//Updated by GUI Thread
void MyGLWidget::paintGL ()
{
   QMutexLocker locker(&m_DrawMutex);
   m_DrawMutex.Draw();       // Huh, should this be m_Texture?
}
///Image Update thread
void MyGLWidget::updateTexure(QImage *img)
{
   // Ok, here we need it, but still no need for doneCurrent
   makeCurrent();

   QMutexLocker locker(&m_DrawMutex);
   m_DrawMutex.Update(img);  // Huh, should this be m_Texture?

   //emit update singal which schedules piantGL() to be called!
   update();
} 
```

# c++ - 包括 xCode 中未显示的错误

> ID：13722248
> 
> 赞同：0
> 
> 时间：2012-12-05T11:28:18.847
> 
> 标签：c++, xcode, compiler-construction, gnu

最近我开始解决在线法官的问题，例如 UVA 在线法官。我尝试使用 C++ 解决这些问题，并使用 xCode IDE 编写代码。

但是，当我在我的代码中使用一些 C 函数（例如 printf 或 scanf）时，xCode 不会抱怨并且一切运行正常，但是，当我将我的代码提交给法官时，它正在使用 GNU C++ 4.5.3 和它给出编译错误。问题是我必须包含 cstdio 标头。

xCode 没有对这个小错误发出任何警告，这有点烦人。有什么办法可以打开这些错误吗？因此，当我使用需要标头的函数时，它会给出警告还是错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:04:18.173

问题是由`LLVM`编译器的一组头文件引起的。`<iostream>`包括`<ios>`which includes `<cstdio>`，这将导致`printf`存在的声明。

如果您使用 flag 编译 cpp 代码`-std=gnu++0x`，则`g++`在 Linux 下编译成功。

我不认为有一个选项会在 MacOS X 上触发相同的错误，除非您正确安装 gcc 的完整副本，包括 gcc 标头，因为标头隐含在`<ios>`标头中`LLVM`

在这种情况下，您应该`#include <cstdio>`确保已声明该函数，这也适用于 gnu gcc 编译器。

# asp.net-mvc-4 - 使用less文件在mvc4中运行时更改主题

> ID：13722250
> 
> 赞同：1
> 
> 时间：2012-12-05T11:28:22.403
> 
> 标签：asp.net-mvc-4

我是 mvc4 的新手。我想在 Web 应用程序的运行时更改主题。我有 site.less 文件，我在其中导入 variable.less 文件（其中包含所有主题设置），单击按钮我只想更改 @import 文件。提前致谢。

# android - 如何在 res\menu 中创建 TextView？

> ID：13722251
> 
> 赞同：4
> 
> 时间：2012-12-05T11:28:24.913
> 
> 标签：android, android-menu

我正在尝试在菜单中创建一个 TextView，文本将被动态设置。现在我的菜单有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_search"
        android:actionViewClass="android.widget.SearchView"
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="Search"/>
    <item
        android:id="@+id/action_sync"
        android:icon="@drawable/ic_menu_refresh"
        android:showAsAction="ifRoom"
        android:title="Sync"/>

</menu> 
```

如何创建只有文本的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:40:20.620

如果您只想显示文本，只需不要在 menu.xml 中添加图标。如果要更改代码中的文本，可以在活动回调的 onPrepareOptionsMenu() 中执行此操作，如下所示：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem myItem = menu.findItem(R.id.the_item);
    myItem.setTitle("bla");
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T11:23:57.077

我认为如果你想要自定义颜色、文本大小或字体，你应该有文本视图：

```
 String title = "MyTitle";

    TextView tvMiTitle = new TextView(getActivity());
    tvMiTitle.setText(title);
    tvMiTitle.setTextColor(Color.WHITE);
    // ==
    // MenuItem myMenuItem;
    myMenuItem.setActionView(tvMiTitle); 
```

# javascript - 如何在 Windows 7 中测试要与 Ipad 一起使用的网站

> ID：13722253
> 
> 赞同：3
> 
> 时间：2012-12-05T11:28:26.613
> 
> 标签：javascript, asp.net, ipad, cross-browser, mobile-safari

我是一名 ASP.net 开发人员，我需要测试我的网站，主要是 javascript 和客户端，以便能够跨浏览器。我是在 IE、FF、CH 中完成的，但我需要检查该网站是否在**Apple Ipads**中正确呈现。但是我没有也不会有 Ipad。

我该如何测试它？那里有“模拟器”或类似的东西吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:31:16.600

最接近的是使用 dekstop Safari，但这主要有助于布局和基本的 JavaScript。但是，要真正获得正确的结果，您需要拥有一台真正的 iPad。很多事情的工作方式不同（事件、多媒体支持等等）。

对于布局和基本 JS 测试，您可以尝试[Ripple 之](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc)类的东西，Chrome 扩展程序为您提供 iFrame 的包装器以及其他一些用于在桌面浏览器中进行测试的小增强功能。

您还可以使用像[http://www.browserstack.com/](http://www.browserstack.com/)这样的服务，它为您提供真实体验（当然触摸事件仍将通过鼠标“代理”）。虽然有点贵，但我认为他们有免费试用。

**升级版**。还有另一种更便宜的服务可以提供正确测试的方法 - <a href="http://saucelabs.com/home" rel="nofollow">http://saucelabs.com/home

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:56:51.477

IpadPeek 会有所帮助，但无法替代真实的东西。如果买不到，就不能借一会或者找有的人帮你测试一下吗？我可以从经验中说，iPadPeek 会有所帮助，但它远非完美，而且真的不会让您有必要说您的网站可以在 iPad 上运行。

# java - Vaadin ComboBox 选择前一个值而不是空值

> ID：13722258
> 
> 赞同：3
> 
> 时间：2012-12-05T11:28:52.183
> 
> 标签：java, combobox, vaadin

我有一个组合框，当用户键入时，值是从 Web 服务加载的。如果没有找到值，我想将组合框重置为空值。不使用 web 服务的固定 2 项的示例：

```
ComboBox comboBox = new ComboBox();
comboBox.addItem("First item");
comboBox.addItem("Second item");
comboBox.setNullSelectionAllowed(true);
comboBox.setInputPrompt("Select an item:");
comboBox.select("First item"); 
```

当我尝试输入输入提示“第三”然后单击离开以松开焦点时，“第一项”保持选中状态。

当我试图通过手动调用`comboBox.select(null)`or来覆盖此行为`comboBox.select("")`时`comboBox.setValue(null)`，仍然选择“第一项”。对我来说，这听起来像是一个组合框错误，但也许有人知道解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:36:25.803

作为快速解决方案，您可以使用此代码。只需将空元素添加到您的组合框中，然后在模糊或您需要的任何操作上选择它。

```
final ComboBox comboBox = new ComboBox();
comboBox.addItem("");
comboBox.setNullSelectionItemId(comboBox.getItem(""));

comboBox.addItem("First item");
comboBox.addItem("Second item");
comboBox.setNullSelectionAllowed(true);
comboBox.setInputPrompt("Select an item:");
comboBox.select("First item");

comboBox.addListener(new BlurListener() {

@Override
public void blur(final BlurEvent event) {
        comboBox.setValue("");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T12:25:05.807

将以下行添加到您的代码中：

```
combobox.setImmediate(true); 
```

这将显示选定的值，而不是前一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T05:59:02.337

由于`removeAllItems()`不适用于`combobox`，您可以删除单个项目以获得相同的效果。

例如：

```
//get state combos ids 
```

列出 stateIDs = (List) state.getItemIds();

```
for(int i=0;i<stateIDs.size();i++){
    state.removeItem(stateIDs.get(i));
} 
```

# sql - 优化长时间运行的 SQL Server 查询

> ID：13722264
> 
> 赞同：4
> 
> 时间：2012-12-05T11:29:11.700
> 
> 标签：sql, sql-server, performance, query-optimization

我有以下查询：

```
SELECT fpa.scenario_id,
   fpa.facility_id,
   cge.CostGroupId result_total_id,
   mp_surrogate_id,
   CAST(SUM(fpa.raw_amount * cge.CostSign) AS DECIMAL(25, 13)) 
   result_total_amount         
INTO ADM_FactProfitTotalAmount_1
FROM #tempAmount fpa
JOIN ResultTest cge ON cge.CostId = fpa.process_id 
WHERE fpa.scenario_id = 1
GROUP BY fpa.scenario_id, fpa.facility_id, cge.CostGroupId, fpa.mp_surrogate_id 
```

*   在`#tempAmount`我有 2.2 亿行。
*   在`ResultTest`我有 150 行。

我有一个索引`#tempAmount`：

```
CREATE NONCLUSTERED INDEX #tempAmount_process_id
ON  #tempAmount(scenario_id, facility_id, mp_surrogate_id, process_id ) 
```

执行大约需要 1 小时。是否可以对其进行优化？

编辑：

我在 ResultTest 列 CostId 上创建了索引，更改了一些其他索引和查询

```
 CREATE CLUSTERED INDEX #tempFactAmount_index 
    ON  #tempAmount (process_id ,facility_id, mp_surrogate_id )

    SELECT  ISNULL(CAST(1 as BIGINT), 0) scenario_id,
            fpa.facility_id,
            cge.CostGroupId result_total_id,
            fpa.mp_surrogate_id,
            CAST(SUM(fpa.raw_amount * cge.CostSign) AS DECIMAL(25, 13)) result_total_amount         
    INTO ADM_FactProfitTotalAmount_1
    FROM ResultTest cge
    JOIN #tempAmount fpa ON cge.CostId = fpa.process_id 
    GROUP BY fpa.facility_id, fpa.mp_surrogate_id, cge.CostGroupId 
```

执行计划：

41% 插入 ADM_FactProfitTotalAmount_1

51% 哈希匹配聚合

2% 哈希匹配内连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:13:47.167

在这种情况下，我发现在加入小表之前将大表中的金额相加通常会有所帮助。所以在这种情况下，我会使用以下内容：

```
;WITH SUMCTE
AS
(
SELECT      fpa.facility_id,
            fpa.mp_surrogate_id,
            fpa.process_id,
            SUM(fpa.raw_amount) AS total_amount         
    FROM #tempAmount fpa 
    GROUP BY fpa.facility_id, fpa.mp_surrogate_id, fpa.process_id
)
SELECT  CAST(1 as BIGINT) AS Scenario_id,
        facility_id,
        cge.CostGroupId result_total_id,
        mp_surrogate_id,
        CAST(SUM(SCT.total_amount * cge.CostSign) AS DECIMAL(25, 13)) result_total_amount         
    INTO ADM_FactProfitTotalAmount_1
    FROM ResultTest cge
    JOIN SUMCTE SCT ON cge.CostId = SCT.process_id 
    GROUP BY fpa.facility_id, fpa.mp_surrogate_id, cge.CostGroupId 
```

如果每个 process_id 在 ResulTest 中只有一行，我将通过以下方式删除外部组来进一步简化：

```
;WITH SUMCTE
AS
(
SELECT      fpa.facility_id,
            fpa.mp_surrogate_id,
            fpa.process_id,
            SUM(fpa.raw_amount) AS total_amount         
    FROM #tempAmount fpa 
    GROUP BY fpa.facility_id, fpa.mp_surrogate_id, fpa.process_id
)
SELECT  CAST(1 as BIGINT) AS Scenario_id,
        facility_id,
        cge.CostGroupId result_total_id,
        mp_surrogate_id,
        CAST((SCT.total_amount * cge.CostSign) AS DECIMAL(25, 13)) result_total_amount         
    INTO ADM_FactProfitTotalAmount_1
    FROM ResultTest cge
    JOIN SUMCTE SCT ON cge.CostId = SCT.process_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:05:05.763

首先，我建议捕获实际的执行计划。如果您从 SQL Server Management Studio (SSMS) 运行查询，请打开“包括实际执行计划”选项。如果此查询是从另一个程序运行的，请运行 SQL Server Profiler 并打开 Showplan Statistics Profile 和/或 Showplan XML Statistics Profile。查看此配置文件并查看查询的行为是否符合您的预期。

你有关于 ResultTest 列 CostId 的索引吗？只有 150 行，对这个表进行索引扫描没什么大不了的。如果您在此表上没有索引，您可以尝试一下。

我想知道执行计划是否正在执行嵌套循环以加入 ResultTest。如果是这样，那将是 150 X 220,000,000 = 330 亿次操作。如果是这种情况，散列连接或合并连接会执行得更好。您可以使用连接提示`OPTION (HASH JOIN)`或`OPTION (MERGE JOIN)`. 仅此一项就可以产生巨大的影响。

#tempAmount 上的索引有很多查询不需要的列`SELECT`。此外，它是一个`NONCLUSTERED`索引。是否还有 CLUSTERED 索引？如果没有，您可以尝试将其转换为`CLUSTERED`并删除其他列。这将减小索引的大小并且性能应该更好，因为scenario_id 的所有行都是连续的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:43:04.893

*   我建议从检查估计的执行计划开始。
    [http://msdn.microsoft.com/en-us/library/ms191194.aspx](http://msdn.microsoft.com/en-us/library/ms191194.aspx)

*   多列索引只有在保留前缀时才能使用。 [http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

    所以我建议将 process_id 移到scenario_id 旁边，因为它们用于 where 和 join。

    创建非聚集索引 #tempAmount_process_id ON #tempAmount(scenario_id, process_id, facility_id, mp_surrogate_id)

*   最后一个：让操作系统尽可能多地将你的磁盘块缓存到内存中。在 linux 中，在一些性能关键的数据库投入生产之前，请执行“cat your_database.store.file > /dev/null”。大量磁盘读取将从内存缓存中命中。

# xml - 在经典 ASP 中检索节点

> ID：13722266
> 
> 赞同：1
> 
> 时间：2012-12-05T11:29:20.623
> 
> 标签：xml, soap, asp-classic

经典 ASP 不是我的第一语言，我需要修复一些错误。我已经强调了这个问题，但有点卡住了。

我有以下 SOAP 响应，Root var 正在加载数据：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>  
<checkVatResponse xmlns="urn:ec.europa.eu:taxud:vies:services:checkVat:types">    
<countryCode>GB</countryCode>
<vatNumber>xxxxxxx</vatNumber>
<requestDate>2012-12-05+01:00</requestDate>
<valid>true</valid>
<name>XYZ LIMITED</name>
<address>Jon Street
London</address>
</checkVatResponse>
</soap:Body>
</soap:Envelope> 
```

现在我需要提取“有效节点”。我尝试了以下但无济于事

```
Set Root = oXmlDom.documentElement 

response.write(Root.SelectSingleNode("SOAP:Envelope/SOAP:Body/checkVatResponse/valid").text)
response.write(Root.SelectSingleNode("SOAP:Envelope/SOAP:Body/urn:checkVatResponse/valid").text)    
response.write(Root.SelectSingleNode("//urn:valid").text) 
```

请告诉我明显的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:20:09.850

好的，这里有几件事。首先，XML 区分大小写，因此您需要使用 Select 语句`soap:Body`而不是`SOAP:Body`.

其次，. `documentElement`函数返回 XML 的第一个元素，在本例中为`soap:Envelope`，因此由于您使用`SelectSingleNode`的是您创建的`Root`对象，因此这告诉解析器查找以下内容：

```
<soap:Envelope>
  <soap:Envelope>
    <soap:Body> 
```

因此，只需在您的 SelectSingleNode 语句中删除第一个分支，例如： `response.write(Root.SelectSingleNode("soap:Body/checkVatResponse/valid").text)`

希望有帮助。

# css - 很长的单词不包含在 HTML/CSS 中

> ID：13722267
> 
> 赞同：5
> 
> 时间：2012-12-05T11:29:22.043
> 
> 标签：css, asp.net-mvc, html

我有一个问题，如果用户要输入长评论/单词，例如“coooooooooooooooooooooooooooooooooooooool”，这会破坏页面上的格式。

下面是帮助解释场景（不按比例）以及使用的代码的图片：

![在此处输入图像描述](../Images/aa74fe34a125e7134a5bccdb8e29c138.png)

**html:**

```
<div class="comment-content">
    <p>cooooooooooooooooooooooooooooooooooooooool</p>
    <br />
    <a class="delete-comment" data-delete-comment-id="28" href="/">Delete</a>
</div> 
```

**CSS：**

```
.comment-content
{
    width: 525px; 
    margin: 13px 25px 0 0;
}
.comment-content p
{
    width: 525px;
} 
```

我想知道是否有一个快速修复此问题而无需更改太多标记和 CSS，因为这是我们不希望通过更改应用程序代码（用 ASP.NET/MVC 3 编写）来引入错误的代码区域。

如果 CSS/Html 不是一个选项，我猜 HTML 5`<wbr>`标记可用于分隔“x”个字符后的单词 - 唯一的问题是该网站是 9 种语言的多语言。例如，日文和中文的文本字符比英文文本字符大得多，这需要多个条件代码才能在添加`<wbr>`或减小字体大小之前获得字符数。就在关于最佳解决方案的建议之后。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T11:30:29.437

**试试这个**

```
.comment-content p {
    word-wrap: break-word;
} 
```

***[现场演示](http://tinkerbin.com/1ptzeG0G)***

***[更多信息](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:41:25.567

如果您希望它被很好地限制为：oooooo... 使用：

```
.comment-content .p{
    display:inline-block;
    white-space: nowrap;
    overflow:hidden;
    text-overflow: ellipsis;
} 
```

如果有不止一行，请使用

```
.comment-content .p{
    word-wrap: break-word;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:35:16.213

这可能会有所帮助：

```
.class {
    resize:none;
} 
```

# sql - 使用递归 SQL 命令而不使用递归（如在 SQL3 中）

> ID：13722269
> 
> 赞同：0
> 
> 时间：2012-12-05T11:29:30.483
> 
> 标签：sql, postgresql

我有这些表：

人（pid，姓名，电子邮件，电话，城市）

Ride(rid,pid,date,spots,start,target) [rideID, personID- 提供乘车的人，spots= 乘车的空位，start 和 target 是目的地]

参与（pid，rid）- 人 pid 参与 Ride rid

我必须满足功能慷慨用户（k）

慷慨度排名由该人提供的游乐设施数量定义。我必须按照这个定义找到第 K 个慷慨的用户（可能不止一个），或者如果列表中的人少于 K，则返回 NULL。

我正在考虑使用 VIEW 但查询的递归性质让我一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:50:30.070

**编辑**：由于您使用的是 PostgreSQL，因此 ROWNUM 的等价物将是 row_number() 这将像这样使用：

```
Select pid From 
    (Select pid, count(*) as ranking, row_number() OVER (Order By ranking Desc) as Rownum 
    From Ride 
    Group By pid
    Order By ranking desc)
    Where Rownum < K 
```

* * *

**初步答复**

如果你只需要他们的 pid 那么你可以试试这个。

```
Select pid From 
(Select pid, count(*) as ranking 
From Ride 
Group By pid
Order By ranking desc)
Where Rownum < K 
```

这样你就可以根据他们的排名获得 K 个第一个 pid。现在，如果你有少于 K 你仍然会得到它们。但是根据您正在开发的环境，您可以使用简单的计数来检查。

就像是

```
Select Count(*) 
From (Select Distinct pid 
    From Ride) 
```

您可以从哪里获得有多少不同的 pid 提供了乘车服务。您检查此数字是否 >= K 并且您已设置。

**重要提示**：RowNum 函数不适用于每种类型的 RDBMS（适用于 Oracle），但当然到处都有替代品（例如 LIMIT 等）。

# rest - 如果不存在 xsd，则为 RESTful 媒体类型

> ID：13722273
> 
> 赞同：1
> 
> 时间：2012-12-05T11:29:38.957
> 
> 标签：rest

我是 RESTful Web 服务的新手。我已经开始开发一个 RESTful Web 服务，它有一个接受请求对象并返回响应对象的方法。请求和响应对象都属于 XSD（比如 like `employee_v1_xsd`）。我的方法使用一个`EmployeeRequest`并产生或返回一个`EmployeeResponse`. 这就是我的方法声明。

```
@Consumes("application/vnd.employee_v1_xsd+xml")
@Produces("application/vnd.employee_v1_xsd+xml") 
```

`employee_v1_xsd`包含我的 REST WS 将使用的所有模式定义的 xsd在哪里。在 WADL 中，我给出了相同的媒体类型规范。

稍后，我必须添加另一个使用另一个 Web 服务的方法。由于某些原因（我不知道），我只得到了我要使用的 Web 服务的 WSDL。我可以通过 jaxb 的 xjc 命令生成使用 WSDL 调用 WS 所需的所有请求和响应对象。

我的问题是：

1.  我必须通过某些请求并在调用 Web 服务时获取响应对象（比如 TaxDetailsRequest 和 TaxDetailsResponse）。因为我没有要从我的 REST Web 服务调用的 Web 服务的任何 xsd，所以应该在方法声明上方和 WADL 中作为媒体类型给出什么？

2.  如果有人可以向我指出一个很好的教程或了解这种 REST 媒体类型的东西，那将非常有帮助。

# ruby-on-rails - 未定义的方法skip_confirmation！- 设计，omniauth

> ID：13722278
> 
> 赞同：7
> 
> 时间：2012-12-05T11:29:51.403
> 
> 标签：ruby-on-rails, devise, omniauth

尝试在 Heroku 上托管的应用程序上使用 devise、omniauth（包括 facebook-omniauth）设置 facebook 身份验证。调用 facebook API 有效，但我无法在回调后跳过确认步骤。

我遵循了关于omniauth的github教程：[https ://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

并阅读并尝试实现这一点： [设计skip_confirmation！不工作](https://stackoverflow.com/questions/8672189/devise-skip-confirmation-not-working)

但是我的heroku日志中不断出现以下错误：

```
NoMethodError (undefined method `skip_confirmation!') 
```

这是我的 devise.rb 的外观：

```
config.omniauth :facebook, "API_KEY", "API_SECRET"    

{:strategy_class => OmniAuth::Strategies::Facebook,
:scope => 'email, offline_access', :client_options => {:ssl => {:ca_file => '/usr/lib/ssl/certs/ca-certificates.crt'}}} 
```

这是我的 omniauth_callbacks_controller.rb ：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
   # You need to implement the method below in your model (e.g. app/models/user.rb)
   @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

   if @user.persisted?
     sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
    set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
   else
    session["devise.facebook_data"] = request.env["omniauth.auth"]
    redirect_to new_user_registration_url
   end
  end
end 
```

这是我的 user.rb 模型：

```
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
 user = User.where(:provider => auth.provider, :uid => auth.uid).first
 unless user
       user = User.new(name:auth.extra.raw_info.name,
                    provider:auth.provider,
                    uid:auth.uid,
                    email:auth.info.email,
                    password:Devise.friendly_token[0,20],
                    )
       user.skip_confirmation!
       user.save
  end
  user
end 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T11:54:32.597

因此，如果我是对的（不是 100% 安全），您需要声明您的模型具有可确认模块，添加可确认模块：

```
 devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :confirmable 
```

并确保您的用户表上有可确认模块的字段，您应该有字段confirmation_token 和confirmed_at

如果您没有这些字段，请查看此[答案](https://stackoverflow.com/questions/6338574/how-do-i-add-columns-to-devise-after-the-initial-create-table-rake)如何添加它们。

# jquery - bxslider 在加载时计算错误的视口大小

> ID：13722282
> 
> 赞同：18
> 
> 时间：2012-12-05T11:30:07.397
> 
> 标签：jquery, css, bxslider

无论如何，我最近开始使用 bxslider 并且遇到了问题。

它似乎在页面加载时错误地计算了它的视口大小，这意味着它在移动设备、平板电脑等上无法正常工作。

奇怪的是，当我调整浏览器窗口的大小（甚至只是一个像素）时，视口高度得到正确计算，一切看起来都很好。但是，如果我刷新具有相同高度和宽度的页面，bx-viewport 将无法正确计算。

知道为什么会这样吗？

HTML 看起来像这样（是的，我知道它可能与它没有任何关系，但仍然如此）：

```
<ul class="seminars-slider">
    <li>
        <article class="education-article">
            <h3><a href="#"> Sit tincidunt eros massa, lundium ultrices, sit in aliquet velit</a></h3>
            <p>LOL1</p>
            <div class="buttons">
                <a href="#" class="book-button"><span>Book now</span></a>
                <a href="#" class="read-more"><span>Read more</span></a>
            </div>
            <div class="clearall"></div>

        </article>
    <div class="clearall"></div>
    </li>

    // same li
    <li>
        <article class="education-article">
            <h3><a href="#"> Sit tincidunt eros massa, lundium ultrices, sit in aliquet velit</a></h3>
            <p>LOL1</p>
            <div class="buttons">
                <a href="#" class="book-button"><span>Book now</span></a>
                <a href="#" class="read-more"><span>Read more</span></a>
            </div>
            <div class="clearall"></div>

        </article>
    <div class="clearall"></div>
    </li>
</ul> 
```

js 调用看起来像：

```
slider=jQuery('.seminars-slider').bxSlider({
    mode: 'vertical',
    controls:false,
    pager:false,
    minSlides:2,
    maxSlides:2,
    moveSlides:1
});

jQuery('.up-control').click(function() {
    slider.goToNextSlide();
});
jQuery('.down-control').click(function() {
    slider.goToPrevSlide();
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-13T08:21:07.243

可能是您过早地调用 bxSlider 函数。如果你从

`$(document).ready(function() { ... });`

考虑改为使用

`$(window).load(function() { ... });`

使用这两个函数的区别在于 (document).ready 等到 DOM 以其初始状态显示给用户，而 (window).load 实际上等到所有资源都加载到 DOM 上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-06T11:26:51.203

您可以使用

```
slider=jQuery('.seminars-slider').bxSlider({
    mode: 'vertical',
    controls:false,
    pager:false,
    minSlides:2,
    maxSlides:2,
    moveSlides:1
});
setTimeout(function(){
            slider.redrawSlider();
        },100); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-25T16:08:52.410

bxslider github 页面上的“romemelederos”建议；

* * *

“BxSlider v4.1 - 滑块的渲染出现问题，因为我在移动响应式网站中使用高度百分比。

所以我不得不做出改变：slider.viewport.css('height', getViewportHeight()); 对此：slider.viewport.css('height', '');

我在我的副本中用一个选项更改了插件，但最快的更改方法是修改上面的行“

* * *

我在第 1290 行编辑了我的 jquery.bxslider.js；这对我来说效果很好，并且似乎比 window.load 更好，（使用 window.load 滑块被破坏，直到所有内容都加载。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-04T07:42:05.577

如果您`<ul>`使用 ajax 加载元素并且它包含图像，`slider.reloadSlider();`请在加载后尝试。首先我用

```
setTimeout('slider.reloadSlider()',1000); 
```

等待图像加载，但最终我切换到漂亮的库[ImagesLoaded](http://imagesloaded.desandro.com/)将等待图像加载：

```
imagesLoaded('.seminars-slider', function() {
   slider.reloadSlider();
}); 
```

（更改了变量名称以匹配问题的名称）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T12:58:57.463

找到了这个 safari bug 的解决方案。您必须将滑块的模式设置为水平（不确定垂直是否也可以，但淡入淡出根本不起作用）。然后你必须得到第一张图像的高度并将其传递给“.bx-viewport”。这是我的脚本的样子：

```
$( "img.Banner" ).attr( "id", "first-slide" );
$('.bxslider').bxSlider({
  adaptiveHeight: true,
  mode: 'horizontal',
  auto: true
  });
$("#first-slide").load(function(){
  var height = $(this).height();
   $( ".bx-viewport" ).css( "height", height );
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-30T17:43:44.833

Matthew Watson 给了我一个好主意，我进入插件并更新了实际的 getViewPortHeight() 函数，如下所示：

```
var getViewportHeight = function(){
    var height = 0;
    children = slider.children;
    height = jQuery(slider.children[0]).height();;
    return height;
} 
```

所以现在它正在获取那里第一张图像的高度（希望它们都相同......）并使用它来确定滑块的高度。请注意，您的控件仍将位于滑块下方，但这可以通过 css 定位等进行修复。

希望这可以帮助一些迷路的人。

# java - 使用 jdbctemplet 选择一个值

> ID：13722283
> 
> 赞同：0
> 
> 时间：2012-12-05T11:30:09.800
> 
> 标签：java, sql, spring-jdbc

我是 Spring-jdbc 的新手

我的查询是这样的：

```
select status from myTable where id = 10; 
```

我想使用`JdbcTemplet`spring jdbc 中可用的执行此查询并获取重新运行值并将其存储在变量中；

```
public class myClass extends JdbcDaoSupport
{
  public void getstatus()
  {
   String sql = "select status from myTable where id = 10";
   String Status = this.getJdbcTemplet().executeQuery(sql);
  }
} 
```

请使用 JdbcDaoSupport 建议正确的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:37:35.197

你可以`queryForObject`用来取回一个`String`.

```
String status = this.getJdbcTemplate().queryForObject(
"SELECT status FROM myTable WHERE id = ?", String.class, Integer.valueOf(10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:33:03.683

检查[spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html#jdbc-core)，它有类似的例子。

```
String lastName = this.jdbcTemplate.queryForObject(
    "select last_name from t_actor where id = ?", 
    new Object[]{1212L}, String.class); 
```

# android - 图像未在 Imageview 中设置为 fill_parent

> ID：13722287
> 
> 赞同：0
> 
> 时间：2012-12-05T11:30:25.557
> 
> 标签：android, android-layout, android-imageview

即使我将 (android:layout_width="fill_parent") 给我的 Imageview 类，图像也没有全宽显示

```
<ImageView android:id="@+id/img"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:layout_above="@+id/button_layout"
    android:layout_below="@+id/middle1"
      /> 
```

在这里我得到了我的位图

```
 if (orientation != 0) {
                        Matrix matrix = new Matrix();
                        matrix.postRotate(orientation);
                        bMapRotate = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(),
                                bmp.getHeight(), matrix, true);
                    } else
                        bMapRotate = Bitmap.createScaledBitmap(bmp, bmp.getWidth(),
                                bmp.getHeight(), true);
                    findViewById(R.id.img).setVisibility(View.VISIBLE);
//Here I set the bitmap                 ((ImageView)findViewById(R.id.img)).setImageBitmap(bMapRotate);
                    findViewById(R.id.preview).setVisibility(View.GONE); 
```

我无法理解为什么它没有占据整个屏幕长度，即使我在我的 xml 中将 fill_parent 给 imageview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:33:46.290

看一下 ImageView 的[scaleType](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3ascaleType)元素。你可能想要 fitXY 我想...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:36:13.337

```
 setScaleType(ImageView.ScaleType.MATRIX); 
```

试试这个你的 ImageView 并确保你的位图在创建后返回相同的宽度到 ScreenWidth

# javascript - 排除来自谷歌分析的内部流量

> ID：13722289
> 
> 赞同：2
> 
> 时间：2012-12-05T11:30:28.607
> 
> 标签：javascript, cookies, google-analytics

在工作中，我们有一个动态 IP 地址，因此通过 IP 排除内部流量对我们不起作用，我们必须在用户浏览器中设置一个 cookie，告诉 Google Analytics 排除来自安装此 cookie 的用户的任何流量。

我们使用的cookie是：

`<body onLoad="javascript:_gaq.push(['_setVar','me_exclude']);">`

此 cookie 位于未链接到的页面 /ex 上，因此唯一会访问它的人将是那些知道将自己排除在 Google Analytics 之外的人。

我一直在徘徊的是，您是否还需要在此页面上包含跟踪代码才能使排除 cookie 起作用，或者是否需要上述行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T19:27:00.317

我几乎放弃了寻找答案，但后来发现： [https ://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#optout](https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#optout)

1）让自己成为您网站上的虚拟页面。例如：www.yourdomain.com/exclude-traffic.html

2）在head中添加<meta name="robots" content="noindex, nofollow">，这样页面就不会被索引了。

3) 在 head 标签内的跟踪代码上方添加脚本。确保更新 UA-XXXXXXXX-Y 值。您可以在管理员 -> 跟踪信息 -> 跟踪代码中查看您的 GA 代码

4）在body标签内添加链接。

5) 打开页面并点击链接。

最后结果：

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
        <title>Remove My Internal Traffic from Google Analytics</title>
        <meta name="robots" content="noindex, nofollow">
        <script>
            // Set to the same value as the web property used on the site
            var gaProperty = 'UA-XXXXXXXX-Y';

            // Disable tracking if the opt-out cookie exists.
            var disableStr = 'ga-disable-' + gaProperty;
            if (document.cookie.indexOf(disableStr + '=true') > -1) {
                window[disableStr] = true;
            }

            // Opt-out function
            function gaOptout() {
                document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
                window[disableStr] = true;
            }
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-XXXXXXXX-Y', 'domainname.com'); //now its changed to auto
            ga('send', 'pageview');
        </script>
    </head>
    <body>

    <h1>Remove My Internal Traffic from Google Analytics</h1>
    <p><a href="javascript:gaOptout()">Click here to opt-out of Google Analytics</a></p>

    </body>
    </html> 
```

# .net - .NET 正则表达式替换组内的字符

> ID：13722297
> 
> 赞同：3
> 
> 时间：2012-12-05T11:30:48.723
> 
> 标签：.net, regex, replace

我正在使用正则表达式替换（在 .Net 应用程序中）从条形码创建项目 ID。这是我正在使用的正则表达式：

```
^(?<Bestellnr>\w{6})(?<Pos>\d{3})M(?<Menge>\d{5})P(?<Lfd>\d{3})$ 
```

替换字符串是（它有前导空格，但这在这里并不重要）：

```
${Bestellnr}${Pos} ${Lfd} 
```

一个示例输入是：

```
685774010M00555P002 
```

上述替换的当前结果是：

```
685774010 002 
```

但是现在我的客户希望我从“Pos”和“Lfd”组中删除前导零，因此结果应该更改为：

```
685774 10   2 
```

编辑：请注意，“lfd”组中的*两个*零被*两个*空格替换！

我已经尝试了几个小时，但我似乎无法让它工作。我能找到的最佳方法是为前导零创建额外的组，例如：

```
^(?<Bestellnr>\w{6})(?<PosNull>0*)(?<Pos>\d{1,})M(?<Menge>\d{5})P(?<LfdNull>0*)(?<Lfd>\d{1,})$ 
```

但我不知道如何用正确数量的空白替换“空组”。这可能吗？（直到现在，我认为 Regex 没有什么是不可能的 ;-)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:46:31.837

试试这个：

```
string input = "685774010M00555P002";

input = Regex.Replace(input, 
    @"^(?<Bestellnr>\w{6})0*(?<Pos>\d{1,3})M(?<Menge>\d{5})P0*(?<Lfd>\d{1,3})$", 
    m => m.Groups["Bestellnr"].Value + 
         m.Groups["Pos"].Value.PadLeft(3, ' ') + 
         m.Groups["Lfd"].Value.PadLeft(4, ' ')); 
```

结果：

```
input = "685774 10   2" 
```

**编辑：** 保持与以前相同的正则表达式，但更改了替换

**另一个编辑：**

您可以完全删除组名并按编号引用它们：

```
input = Regex.Replace(input, 
@"^(\w{6})0*(\d{1,3})M(\d{5})P0*(\d{1,3})$", 
m => m.Groups[1].Value + 
     m.Groups[2].Value.PadLeft(3, ' ') + 
     m.Groups[4].Value.PadLeft(4, ' ')); 
```

注：`m.Groups[0]`指整场比赛

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:56:20.213

您可以通过使用空格替换 0 来做到这一点`matchevaluator`！

```
Regex.Replace("685774010M00555P002",
@"^(?<Bestellnr>\w{6})(?<Pos>\d{3})M(?<Menge>\d{5})P(?<Lfd>\d{3})$",
m=>m.Groups["Bestellnr"].Value+""+
   Regex.Replace(m.Groups["Pos"].Value,"(?<=^0*)0"," ")+
   " "+
   Regex.Replace(m.Groups["Lfd"].Value,"(?<=^0*)0"," ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:48:50.153

好的，找到了适合我需求的解决方案。它是通过一个简单的 String.Format 完成的，将 Regex 的 Groups 传递给它转换为 int。组通过索引访问，但由于它是在格式字符串中完成的，因此不需要硬编码。

这是代码：

```
// both from app.config
Regex regex = new Regex(@"(?<Bestellnr>\w{6})(?<Pos>\d{3})M(?<Menge>\d{5})P(?<Lfd>\d{3})");
string format = "   {0,6:d}{1,3:d} {3,3:d}";    

string barcode = "685774010M00555P002";

Match match = regex.Match(barcode);
if (match.Success)
{
    var groups = (from Group grp in match.Groups select grp.Value).Skip(1).Select(x => (object)int.Parse(x)).ToArray();
    string s = string.Format(format, groups);
    Console.WriteLine(s);
} 
```

评论：

*   Skip(1) 是必要的，因为集合中的第一组是完整匹配本身。
*   强制转换为 object 是必需的，因为 string.format 需要一个 params object[] 数组并且不能与 int[] 一起使用

# c# - 在 DataTable 的 DataColumn 中用另一个替换字符串

> ID：13722299
> 
> 赞同：4
> 
> 时间：2012-12-05T11:31:06.790
> 
> 标签：c#

我有`DataTable`它检索多个列和行。它的一列（“评论”）包含数据`*`。我想用`\n`.

```
dtOutput = Generix.getTickets(DateTime.Parse("1-1-1900"), DateTime.Now,"",iTicket, "", "", "", "","",iDispatched,uCode);
string sOutput = "";
foreach (DataRow drOutput in dtOutput.Rows)
{
   sOutput += ((sOutput == "") ? "" : "~");
   foreach (DataColumn dcOutput in dtOutput.Columns)
   {                                    
      sOutput += ((sOutput == "") ? "" : "|") + Convert.ToString(drOutput[dcOutput]);
   }
} 
```

我能够将所有列合并到一个字符串中。但是如何将字符替换为另一个字符以将其存储在与 相同的字符串中`"sOutput"`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:33:34.377

在 foreach 循环中，您可以通过访问列索引（“评论”）来修改行并使用 string.Replace 替换`"*"`为`"\n"`

```
foreach (DataRow drOutput in dtOutput.Rows)
{
     drOutput["Comments"] = drOutPut["Comments"].ToString().Replace('*','\n');
     //your remaining code
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:35:27.767

```
foreach (DataRow row in dt.Rows)
    row.SetField<string>("Comment", 
       row.Field<string>("Comment").Replace("*", @"\n")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:37:36.777

```
foreach (DataColumn dcOutput in dtOutput.Columns)
{                    
    sOutput += ((sOutput == "") ? "" : "|") + Convert.ToString((dcOutput.ColumnName=="Comments") ? drOutput[dcOutput].ToString().Replace("*","\n") : drOutput[dcOutput]);
} 
```

# java - 等待超时

> ID：13722300
> 
> 赞同：1
> 
> 时间：2012-12-05T11:31:09.593
> 
> 标签：java

如果我做

```
synchronization (someobject) {  
    while (someobject.need2wait()) {  
      someobject.wait(timeout);  
    }  
} 
```

超时到期时会发生什么？如果另一个线程已锁定`someobject`，它会被中断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:36:11.333

请参阅对象的 Javadocs

> 然后将线程 T 从该对象的等待集中移除，并重新启用线程调度。然后它以通常的方式与其他线程竞争对象同步的权利；一旦它获得了对象的控制权，它对对象的所有同步声明都会恢复到之前的状态——即，恢复到调用等待方法时的状态。线程 T 然后从调用等待方法返回。因此，从等待方法返回时，对象和线程 T 的同步状态与调用等待方法时完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:40:35.067

答案在文档中。您可以使用以下代码自己尝试一下 - 您会注意到没有线程被中断：

```
public class TestWait {
    private static volatile boolean ready = false;

    public static void main(String[] args) throws Exception {
        final Object lock = new Object();
        Runnable waitingTask = new Runnable() {

            @Override
            public void run() {
                synchronized(lock) {
                    while(!ready) {
                        try {
                            System.out.println("Going to wait here");
                            lock.wait(1000);
                        } catch (InterruptedException ex) {
                            System.out.println("Thread interrupted");
                        }
                    }
                    System.out.println("I'm done waiting");
                }
            }
        };
        new Thread(waitingTask).start();
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            System.out.println("main interrupted");
        }
        ready = true;
        System.out.println("ready");
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            System.out.println("main interrupted");
        }
    }
} 
```

# ruby-on-rails - DatePicker jquery 和 simple_form_for

> ID：13722301
> 
> 赞同：1
> 
> 时间：2012-12-05T11:31:13.287
> 
> 标签：ruby-on-rails, simple-form

我正在尝试在我的 simple_form 中使用 Jquery 日期选择器。

我有一个领域

```
<%= simple_form_for @customer, :html => { :class => 'form-horizontal' } do |f| %>
<%= render "shared/error_messages", :target => @customer %>
  <%= f.input :start_lease_date, :as => :text %>
<% end %> 
```

我已经安装了 Jquery-ui gem，我在 application.js 中添加了 require 选项

```
//= require jquery.ui.datepicker 
```

我还在 application.css 中添加了要求

```
 *= require jquery.ui.datepicker 
```

我还添加了 customer.js.coffee 文件，其中包含以下内容

```
jQuery ->
$('#customer_start_lease_date').datepicker
dateFormat: 'yy-mm-dd' 
```

但是，我的 Start_lease_date 字段仍然没有显示日期选择器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:20:12.930

我想以下将起作用

```
<%= f.input :start_lease_date, :as => :text, 
            :input_html => { :class => 'date_picker' }  %> 
```

或者

```
 <%= f.input :start_lease_date, :as => :date_picker %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:03:32.477

我会大胆猜测并说你没有运行/安装 Jquery。Jquery-UI 依赖于 Jquery 才能工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:25:56.833

尝试将此添加到您的 gem 文件中...

```
group :assets do
  # ...
  gem 'jquery-ui-rails'
end 
```

...这就是你的 app/assets/javascripts/application.js

```
//= require jquery.ui.datepicker 
```

# c - RTOS 数据记录器示例

> ID：13722303
> 
> 赞同：4
> 
> 时间：2012-12-05T11:31:17.550
> 
> 标签：c, sensors, freertos, lpc, cortex-m

我正在尝试在 Cortex M0 (LPC11U14) 上开发数据记录器，我正在考虑使用像 FreeRTOS 这样的实时操作系统，这样我就可以有一个将数据写入 SD 的低优先级任务，以及多个更高优先级的任务- 获取传感器数据的优先级计时器。

有谁知道任何可以作为参考设计的代码示例？我知道如何创建任务/计时器，但我对将数据从计时器传递到写入任务的有效方法感兴趣。如果已经存在一个可以用作代码库的好的数据记录器项目，我对重新发明轮子犹豫不决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T03:25:20.730

我建议您使用队列来序列化数据记录。

有一个低优先级的任务在队列上等待并在有东西到达时写入 sdcard，而其他一些将传感器数据写入队列的任务将优雅地完成你想要的。

看一看：[FreeRTOS 队列管理](http://www.freertos.org/a00018.html)

特别：

1.  [xQueueCreate](http://www.freertos.org/a00116.html)
2.  [xQueueSend](http://www.freertos.org/a00117.html)或[xQueueSendFromISR](http://www.freertos.org/a00119.html)
3.  [xQueueReceive](http://www.freertos.org/a00118.html)

# flash - FLASH AS2 - 电子邮件验证的小问题

> ID：13722304
> 
> 赞同：0
> 
> 时间：2012-12-05T11:31:28.083
> 
> 标签：flash, email, validation, actionscript-2

我是 FLASH 新手，我需要在表单中验证电子邮件地址。我的代码是：

```
validate_btn.onRelease = function() { 
     indexOfAt = email.text.indexOf("@"); 
     lastIndexOfDot = email.text.lastIndexOf("."); 
     if (indexOfAt !=-1 && lastIndexOfDot !=-1){ 
          if (lastIndexOfDot <indexOfAt) { 
               message.text="please verify your email."; 
          }else { 
               message.text="Your email seems okay"; 
          } 
     } else { 
          message.text="please enter correct email address"; 
     } 
} 
```

似乎工作正常，唯一的问题是接受了关注电子邮件：`myEmail@domain.`有人`@domain.com`可以帮我解决它吗？考虑到它是 AS2，所以我不能使用 RegExp。

感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:42:35.643

您还必须测试

```
indexOfAt>0 
```

和

```
lastIndexOfDot<email.text.length-2 
```

请注意，这是一个试用版，代码**未经测试**

```
validate_btn.onRelease = function() { 
     indexOfAt = email.text.indexOf("@"); 
     lastIndexOfDot = email.text.lastIndexOf("."); 
     if (indexOfAt>0 && lastIndexOfDot !=-1 && lastIndexOfDot<email.text.length-2){ 
          if (lastIndexOfDot <indexOfAt) { 
               message.text="please verify your email."; 
          }else { 
               message.text="Your email seems okay"; 
          } 
     } else { 
          message.text="please enter correct email address"; 
     } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:28:05.463

[http://www.actionscript.org/forums/showthread.php3?t=77605](http://www.actionscript.org/forums/showthread.php3?t=77605)据说有一种解决方案可以让正则表达式在 AS2 中工作

否则你可以试试

```
if (
    (emailString.indexOf("@") > 0) &&
    (emailString.lastIndexOf(".") > (emailString.indexOf("@") + 1)) &&
    (emailString.lastIndexOf(".")
){
    //valid(ish)
} 
```

# coding-style - Android游戏“好奇” - 如何...？

> ID：13722306
> 
> 赞同：0
> 
> 时间：2012-12-05T11:31:33.793
> 
> 标签：coding-style

安卓市场上有一款游戏叫《好奇》。

对于那些不知道的人来说，它是关于一个由许多（数十万个）较小的立方体组成的巨大立方体。通过点击一个立方体，它会被移除。

当所有的立方体都被移除时，游戏结束。

问题是，游戏完全在线，即时。所有玩家一起移除立方体。

作者是如何做到这一点的？或者实际上，如何以最高效的方式实现这一点（出于好奇）？到目前为止，我认为服务器端*可以*使用 redis 作为数据库来存储立方体数据（位置等），并使用 node.js+socket.io 的组合来发出被破坏的立方体的数据。

但是放大并获得特定区域中的所有立方体呢？我们正在谈论大量的数据。

另外，多维数据集以什么方式存储在数据库中？乍一看，这似乎是一个非常简单的项目，但它可能比看起来更难。

这是所述立方体的图像；绿色“区域”是需要在[http://www.yourlocalguardian.co.uk/resources/images/2219589/?type=articleLandscape上点击的较小立方体](http://www.yourlocalguardian.co.uk/resources/images/2219589/?type=articleLandscape)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:36:06.820

您需要为每个多维数据集发送一个布尔值：多维数据集存在或多维数据集不存在。然后在每次更新时，您只发送已更改状态的多维数据集。在这方面它有点与我的世界相媲美。它可能是一个基本的套接字，我认为它根本没有存储，它只是从 RAM 运行，可能是一个大的 3d 数组。

这听起来比它可能更容易。

# oracle - ORA-00900: 无效的 SQL 语句 - 在 oracle 10g 中运行过程时

> ID：13722307
> 
> 赞同：21
> 
> 时间：2012-12-05T11:31:34.803
> 
> 标签：oracle, stored-procedures, plsql, ide, procedure

我正在使用 Oracle 10g 数据库并尝试使用 SQL 命令运行一个过程。

```
create or replace procedure "exam" is
begin
  DBMS_OUTPUT.PUT_LINE('Test');
end; 
```

然后点击运行按钮。它显示：“程序已创建”。

当我尝试使用以下命令执行它时：

```
execute exam; 
```

然后点击运行按钮，它显示：

```
ORA-00900: invalid SQL statement 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-05T12:51:58.777

刚刚注意到你问题中的一个细节。你按下`run`按钮。因此，您必须使用 IDE。

您不能`execute`在 IDE 中使用 - 它是一个`sql*plus`命令。虽然它*可能*在 Oracle SQL Developer 中工作，但我不会在那里使用它；

尝试

```
begin
  exam;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:36:33.343

去掉名称周围的双引号。它们在 Oracle 中是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T11:26:30.350

请参阅：[尝试在 C# 中使用 ODBC 调用 Oracle 包时出现语法错误](https://stackoverflow.com/questions/18837539/syntax-error-while-trying-to-call-an-oracle-package-using-odbc-in-c-sharp)

您必须在命令前加上“{”和“}”。例子：

```
 processListCmd.CommandType = CommandType.StoredProcedure;
    processListCmd.CommandText = "{ call rep_invnr_proclist }";
    processListCmd.ExecuteNonQuery(); 
```

# graph - 加权有向无环图的最长路径

> ID：13722309
> 
> 赞同：0
> 
> 时间：2012-12-05T11:31:37.000
> 
> 标签：graph, directed-acyclic-graphs, longest-path

我正在尝试将这个问题概念化，然后为它编写 Java 代码。我知道这里有一些讨论，但我没有看到很多回答者，所以我想通过写下我的想法来重申这个问题，我希望得到你们的一些反馈。谢谢！

我的想法：对于每个叶节点找到从根节点到它的最长路径对于所有路径找到最大路径长度

然而，这不就是简单的蛮力吗？有没有更优雅的解决方案？

我听说过使用负权重的 Djikstra 算法，但在某些地方它说这仅适用于特定情况？我也看到了 Bellman Ford 算法的建议，但这不是用来找到最短路径的吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:04:01.350

I think what you should do is to calculate all shortest paths of a root to a leaf and then take the longest of the calculated paths. In general this would be a hard problem but fortunately you are using a directed acyclic graph. In practice the algorithm will perform very well due to this restriction. The following code may help you, it was developed with yWorks and taken from this [site](http://kb.yworks.com/article55.html):

```
// To hold an edge list for every path. 
YList allShortestPaths = new YList();

// The actual number of proper shortest paths is unknown, so we start with a really great value for 'k'. 
YCursor pathCursor = ShortestPaths.kShortestPathsCursor(graph, edgeCostsDP, startNode, endNode, Integer.MAX_VALUE);
if (pathCursor.ok())
{
  // The first path between the two nodes having least costs. 
  final EdgeList firstPath = (EdgeList)pathCursor.current();
  final double costsOfFirstPath = calculateCostsForPath(firstPath, edgeCostsDP);

  allShortestPaths.add(firstPath);
  pathCursor.next();

  // Look further. 
  while (pathCursor.ok())
  {
    EdgeList currPath = (EdgeList)pathCursor.current();
    double currCosts = calculateCostsForPath(currPath, edgeCostsDP);
    // If the current path is also a proper shortest path with costs equal to those 
    // of the first path, then add it to the list. 
    if (!(currCosts > costsOfFirstPath))
    {
      allShortestPaths.add(currPath);
      pathCursor.next();
    }
    else
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T08:24:15.110

我们可以进行拓扑排序来获得有向无环图（DAG）顶点的排序。一旦我们有了拓扑排序，我们就可以应用动态规划来获得 DAG 中的最长路径。

令toposort后顶点的索引为0,1,2,....,n-1（图中总共n个顶点）

令 F[i] 为在顶点 i 处结束的最长路径的值。

然后对于从 i 到所有 j 的每个出边，我们可以将 F[j] 更新为 F[j]=max(F[j],F[i]+1)

我们可以首先将所有 F[i] 初始化为零然后从 i=1 循环到 n-1

最终答案是 max{F[i]} 0<=i<=n-1

# c++ - ShellExecute 可以在活动会话中运行吗？

> ID：13722310
> 
> 赞同：0
> 
> 时间：2012-12-05T11:31:43.037
> 
> 标签：c++, sessionid, shellexecute

当我的程序发生某些事情时，我有一个需要由 cmd.exe 运行的命令。假设命令是“calc.exe”。当我使用 ShellExecute 时：

```
HWND win = GetActiveWindow();
ShellExecute(win,L"open",L"calc.exe",L"",L"", SW_SHOWNORMAL ); 
```

calc.exe 进程从会话 0 开始，所以我看不到它。有没有办法将它设置为在活动用户窗口中启动？我不想使用 CreateProcess，因为我一直有权限问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:40:45.940

`ShellExecute`不能。不能在另一个会话中运行程序。您将需要使用`CreateProcessAsUser`. 这里有很多问题讨论如何做到这一点。

# c# - 阅读列表 包含单条记录

> ID：13722315
> 
> 赞同：1
> 
> 时间：2012-12-05T11:31:50.457
> 
> 标签：c#, linq, collections

我有一个列表，其中包含一条记录，即与特定 ID 匹配。

现在我想使用这个列表的属性（***即单个记录的列***）而不使用 FOREACH 循环，因为它只会给服务器带来负担，因为我的程序已经有很多循环......可以完成吗？

我正在根据 ID 过滤从 ViewState 带来的记录..

```
var selectedPracticeInfo = 
          (List<PropPractice>) ViewState["dicPracticesInGrupWithTimeZone"];

var selectedPracticeforEncounter = 
             from selectedPractice in selectedPracticeInfo
             where 
                selectedPractice.PracticeId 
                     == Convert.ToInt32(ddlPractice.SelectedValue)
  select new PropPractice
  {
    PracticeId = selectedPractice.PracticeId,
    PracticeName = selectedPractice.PracticeName,
    TimeZoneDisplayName = selectedPractice.TimeZoneDisplayName
  }; 
```

我打算做这样的事情，这将直接拉出该单条记录的 TimeZoneDisplayName 但它说“字符串不能用作布尔值”..

```
var practiceTimeZoneName 
       = selectedPracticeforEncounter
               .Single(practice=>practice.TimeZoneDisplayName 
```

所以，我想问一下除了**FOREACH**是否可以通过某种方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:37:10.767

```
var practiceTimeZoneName=selectedPracticeforEncounter.Single().TimeZoneDisplayName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:38:42.640

这是你需要的吗？First Or Default 将确保您获得一条记录或 null

```
var result = selectedPracticeInfo
             .Where(m=> m.PracticeID == (Int32)ddlPractice.SelectedValue)
             .FirstOrDefault();

if(result != null){

var timezone = result.TimeZoneDisplayName;

} 
```

结果将是 PropPractice 的一种类型，但对于良好的实践，在您可以使用的地方强烈定义

```
PropPractice = selectedPracticeInfo
               .Where(m=> m.PracticeID == (Int32)ddlPractice.SelectedValue)
               .FirstOrDefault(); 
```

您不需要以下内容来创建新对象：

```
select new PropPractice
  {
    PracticeId = selectedPractice.PracticeId,
    PracticeName = selectedPractice.PracticeName,
    TimeZoneDisplayName = selectedPractice.TimeZoneDisplayName
  }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:41:51.917

如果您只想要一个，请尝试将 .SingleOrDefualt 添加到 LINQ 查询的末尾

```
var selectedPracticeforEncounter = (from selectedPractice in selectedPracticeInfo
                                         where selectedPractice.PracticeId == Convert.ToInt32(ddlPractice.SelectedValue)
 select new PropPractice
{
PracticeId = selectedPractice.PracticeId,
PracticeName = selectedPractice.PracticeName,
TimeZoneDisplayName = selectedPractice.TimeZoneDisplayName
}).SingleOrDefault(); 
```

[LINQ：何时使用 SingleOrDefault 与 FirstOrDefault() 与过滤条件](https://stackoverflow.com/questions/1745691/linq-when-to-use-singleordefault-vs-firstordefault-with-filtering-criteria)

# java - Java SSLEngine 示例

> ID：13722317
> 
> 赞同：3
> 
> 时间：2012-12-05T11:31:53.900
> 
> 标签：java, sslengine

[我在这里](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#OperationStatus)找到了一个如何实现 Java SSLEngine 的示例。不幸的是，服务器的源代码并不完整。你知道我在哪里可以找到教程中的完整源代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-09-06T14:57:08.440

在自己搜索 SSLEngine 实现时，我开始编写自己的实现，并在[Github](https://github.com/alex-travelling-with-code/sslengine.implementation)上分享。它涉及一个 SSL/TLS 服务器和客户端，以及一个包含运行示例的 Demo 类。如果您提供有关可能的错误或更好实施的反馈，我会很高兴。

也可以随意查看我在我的（真的是新创建的！）博客上上传的一篇[文章](https://alkarn.github.io/2015-07-29-a-case-study-on-SSL-TLS/)，在那里我收集了有关 SSL/TLS 的各种信息。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-15T23:38:40.037

实际上，Oracle 提供了一些 JSSE 类的示例，可以在[此处](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/index.html)找到。特别是他们的 SSLEngine 的“简单”演示可以在[这里](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/sslengine/SSLEngineSimpleDemo.java)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T17:58:14.250

可以在[此处](http://www.cs.lafayette.edu/docs/java/guide/security/jsse/samples/)找到 SSLEngine 实现的类似但更完整的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T12:52:09.343

几年前我遇到了同样的问题，最终编写了自己的库。那里有一些示例，当然还有像 Netty 等项目中的代码。但是这两个选项都不是健壮的或易于重用的。

[TLS 通道](https://github.com/marianobarrios/tls-channel)将 SSLEngine 包装在 ByteBuffer 中，并允许像普通的 SocketChannel 一样使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-21T16:28:34.737

webpieces 使用一个 jar ( [https://mvnrepository.com/artifact/org.webpieces/core-ssl](https://mvnrepository.com/artifact/org.webpieces/core-ssl) ) 来包装 SSLEngine 并使在任何上下文中使用它变得更加容易。

当然项目/子项目在这里 [https://github.com/deanhiller/webpieces/tree/master/core/core-ssl](https://github.com/deanhiller/webpieces/tree/master/core/core-ssl)

或者你可以启动整个 webpieces 服务器。（它被称为 webpieces 因为每个部分都是一个片段，包括那个 ssl 片段、一个异步 http1.1 解析器、http2 解析器等......所有你可以窃取和使用的片段）。碰巧所有部分也用于创建网络服务器。

后来，迪恩

# jquery - 简单的 JQuery .css() 命令不起作用

> ID：13722320
> 
> 赞同：0
> 
> 时间：2012-12-05T11:32:09.800
> 
> 标签：jquery, html, css

自从我使用 JQuery 以来已经有一段时间了，所以这可能是非常明显的事情。

我正在尝试使用 JQuery 来设置标签内所有文本的颜色，这些`<span>`标签具有包含某个关键字的类（在本例中，类标签内的单词是“var”）。

然后我将这段 jQuery 代码放入文档的正文中：

```
$("class*='var'").css("color", "#FF00DC"); 
```

但这没有任何区别。

我在这里犯了一个简单的语法错误还是有点深？我制作了一个[jsFiddle](http://jsfiddle.net/vw4Qj/25/ "jsFiddle")来尝试说明问题。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T11:34:08.500

尝试：

```
$("[class*='var']").css("color", "#FF00DC"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T11:34:06.027

您的选择器语法错误，应该是`$("[class*='var']")`（请参阅[属性包含选择器](http://api.jquery.com/attribute-contains-selector/)）。

# java - java地理空间二维内核密度估计

> ID：13722324
> 
> 赞同：0
> 
> 时间：2012-12-05T11:32:20.757
> 
> 标签：java, math, geospatial, geo

我需要在 java 中开发一个 2d 内核密度估计来给出一些空间点。它将计算离散的 2d kde 并在地理地图上绘制密度。为此，我建议使用高斯核或四次核。我已经阅读了一些关于此的论文，可以在[http://geog.ucsb.edu/~chris/Lecture4_210C_Spring2011_PointPatternIntensity.pdf](http://geog.ucsb.edu/~chris/Lecture4_210C_Spring2011_PointPatternIntensity.pdf)找到 。但我无法理解程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:05:35.947

查看下面的链接，了解用于`ArcGIS`使用 KDE 计算点密度的方程的简单描述。他们使用四次函数。

[http://forums.esri.com/Thread.asp?c=93&f=995&t=98735](http://forums.esri.com/Thread.asp?c=93&f=995&t=98735)

这是该函数的 Java 代码，其中`Distance`是应计算密度的栅格网格点的中心与点对象之间的距离：-

```
private Double densitycalc(Double Distance, int BandWidth){
        double K;
        double DensityValue = 0;
        K = 3/(Math.PI*Math.pow(BandWidth, 2));
        DensityValue = K*Math.pow(1-Math.pow(Distance/BandWidth, 2), 2);
        return DensityValue;            
    } 
```

希望能帮助到你。

# javascript - VS2010 JavaScript XML 文档

> ID：13722325
> 
> 赞同：0
> 
> 时间：2012-12-05T11:32:22.987
> 
> 标签：javascript, visual-studio-2010, comments

有什么方法可以让 Visual Studio 在您键入 /// 时自动为函数/方法添加 XML 注释块，就像对 C# 所做的那样？如果没有，是否有任何（最好是免费的）扩展可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:44:51.993

请在此处查看类似的问题[Visual Studio 2010 Javascript comments stop working](https://stackoverflow.com/questions/9519037/visual-studio-2010-javascript-comments-stopped-working)

基本上，最好的办法是重新锐化。单击该链接以了解无需重新锐化的解决方法。

# imagemagick - GraphicsMagick 网络摄像头，带有印章和私人区域

> ID：13722326
> 
> 赞同：0
> 
> 时间：2012-12-05T11:32:23.720
> 
> 标签：imagemagick, graphicsmagick

我使用以下代码处理网络摄像头图片（in.jpg），对某些区域进行锐化（在灰度文件 unsharpmask.png 中定义）并添加图章。

*   载入.jpg
*   模糊这个文件
*   加载 in.jpg 作为单独的图层
*   应用透明蒙版
*   撰写
*   添加邮票
*   再次撰写并写入 out.jpg

我使用以下命令对 ImageMagick 执行此操作：

> 转换 in.jpg -blur 0x8 -compose over in.jpg unsharpmask.png -composite -compose over stamp.png -gravity SouthWest -composite -quality 90 out.jpg

但是在 GraphicsMagick 上它失败了，因为缺少“-composite”选项，..

我怎样才能用 GraphicsMagick 做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:19:56.903

您的“私人”区域有多复杂，我认为它们总是在同一个地方？

您可以在 graphicsmagick 中使用区域并尝试模糊这些区域吗？

这是一些将指定区域更改为灰度的代码，我假设您可以通过将 -colorspace Gray 替换为 -blur 15 或类似内容来模糊该区域。

```
<?php  
$cmd = "$input -region 140x120+50+20 -colorspace Gray";  
exec("convert $cmd region_gray.jpg"); 
?> 
```

# android - 如何检测防火墙已阻止对某些应用程序的 Internet 访问？

> ID：13722332
> 
> 赞同：1
> 
> 时间：2012-12-05T11:32:42.323
> 
> 标签：android, firewall

如果没有有效的 Internet 连接，此应用程序将无法运行。但是，如果防火墙应用程序拒绝访问 Internet（防火墙规则） ，则通过检查 Internet 连接`ConnectivityManager`并`NetworkInfo`不起作用。`DroidWall`

如何检测某些防火墙应用程序已阻止对我的应用程序的 Internet 访问？

例如，如果我启动 Google Play Store 应用程序，它会明确指出“没有互联网连接”。如果我启动我的应用程序，它会挂起（尝试下载内容）然后崩溃并出现错误。

**编辑**

这是 Logcat 捕获的错误。

```
12-05 12:44:51.417: E/AndroidRuntime(18922): java.lang.RuntimeException: An error occured while executing doInBackground()
12-05 12:44:51.417: E/AndroidRuntime(18922):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.lang.Thread.run(Thread.java:856)
12-05 12:44:51.417: E/AndroidRuntime(18922): Caused by: java.lang.NullPointerException
12-05 12:44:51.417: E/AndroidRuntime(18922):    at com.app.android.MainActivity$ParserAsyncTask.doInBackground(MainActivity.java:345)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at com.app.android.MainActivity$ParserAsyncTask.doInBackground(MainActivity.java:367)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-05 12:44:51.417: E/AndroidRuntime(18922):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-05 12:44:51.417: E/AndroidRuntime(18922):    ... 5 more 
```

如您所见，当应用程序启动并且解析器开始下载远程内容时，检测互联网连接（wifi 或移动数据）是否存在的机制失败了。

我需要实现附加功能，允许 Internet 连接机制检查某些应用程序是否被某些防火墙规则阻止（例如 Play Store 应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:40:37.097

如果您的应用程序崩溃，那么它会引发您没有捕获的异常。

尝试在您的连接代码周围加上`try/catch and pop a toast notification`没有**可用的互联网连接**。另外，从调试工具中发布异常？我很好奇你得到了什么异常，因为你没有发布任何代码......

# c# - 在某些机器上从 STA 线程调用 COM 对象会导致 TYPE_E_LIBNOTREGISTERED

> ID：13722345
> 
> 赞同：3
> 
> 时间：2012-12-05T11:33:26.087
> 
> 标签：c#, multithreading, com, add-in, office-interop

我正在使用 COM shim 向导开发 Word 共享加载项。 [http://blogs.msdn.com/b/mshneer/archive/2010/03/19/com-shim-wizards-for-vs-2010.aspx](http://blogs.msdn.com/b/mshneer/archive/2010/03/19/com-shim-wizards-for-vs-2010.aspx)

一切正常，直到我尝试使用一些线程。它在某些机器上失败，主线程中创建的 COM 对象的 TYPE_E_LIBNOTREGISTERED 异常。

我有一个来自某个 Word 事件的 Word 文档对象 (_doc)，并尝试从 STA 线程中使用，如下所示：

```
Word.Document _doc;
void Start()
{
    _mainLoopThread = new Thread(MainLoop);
    _mainLoopThread.SetApartmentState(ApartmentState.STA);
    _mainLoopThread.IsBackground = true;
    _mainLoopThread.Start();
}
void MainLoop()
{
    // some code...
    Word.Range r = _doc.StoryRanges[Word.WdStoryType.wdMainTextStory];
    // some code...
} 
```

在我的开发机器、测试机器和大多数用户上一切正常。但是，对于某些用户，它会失败并出现异常：无法将类型为“Microsoft.Office.Interop.Word.DocumentClass”的 COM 对象转换为接口类型“Microsoft.Office.Interop.Word._Document”。此操作失败，因为 IID 为“{0002096B-0000-0000-C000-000000000046}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：库未注册。（来自 HRESULT 的异常：0x8002801D (TYPE_E_LIBNOTREGISTERED)）。

我们能够重现它的唯一方法是安装 Office 2013，然后将其删除并安装 Office 2007。我检查了注册表，但没有发现此 guid 的任何注册问题。我尝试了 MS 的工具，它应该可以清除 Office 2013 的残留物， [http://support.microsoft.com/kb/2739501](http://support.microsoft.com/kb/2739501) ， 但它没有帮助。

这不是注册问题，因为我可以在主线程中使用相同的 _doc 对象而不会出现任何错误。在 COM-shim 的 rgs 文件中，我使用 STA 模型 InprocServer32 = s '%MODULE%' { val ThreadingModel = s 'Apartment' } 我还在 Properties-Linker-Advanced 中将 CLR 模式设置为 STA，但这没有帮助。

我尝试使用 CoMarshalInterThreadInterfaceInStream，如此处所建议的， [无法从其他 STA 线程调用从 STAThread 创建的 COM 对象，](https://stackoverflow.com/questions/2175419/cannot-call-com-object-created-from-stathread-from-oher-sta-threads) 但即使在我的开发机器上也无法使其工作。这是代码： [DllImport("ole32.dll")] static extern int CoMarshalInterThreadInterfaceInStream([In] ref Guid riid, [MarshalAs(UnmanagedType.IUnknown)] object pUnk, out IStream ppStm);

```
 IStream _docForThreadStream = null;

    Guid _docInterfaceGuid;

    void InitDocForThread()
    {            
        object[] attr = _doc.GetType().GetCustomAttributes(typeof(GuidAttribute), false);
        GuidAttribute g = (GuidAttribute)attr[0];
        _docInterfaceGuid = new Guid(g.Value);

        CoMarshalInterThreadInterfaceInStream(ref _docInterfaceGuid, Marshal.GetIUnknownForObject(_doc), out _docForThreadStream);
    }

    [DllImport("ole32.dll")]
    static extern int CoGetInterfaceAndReleaseStream(IStream pStm, [In] ref Guid riid, out object ppv);

    Word.Document _docForThread = null;

    void MainLoop()
    {
            object pDoc;
            int hr = CoGetInterfaceAndReleaseStream(_docForThreadStream, ref _docInterfaceGuid, out pDoc);
            // _docForThreadStream != null, hr == E_NOINTERFACE
     } 
```

当我尝试从 IStream 获取对象时，CoGetInterfaceAndReleaseStream 给了我 E_NOINTERFACE。任何人都可以向我发送 C# 工作示例的链接吗？我用谷歌搜索，但只找到了一些 C++ 的例子。

似乎 Office COM 注册被破坏，以至于它适用于同一个线程（加载项与 office 在同一个线程中运行），但未能编组到另一个 STA 线程......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T14:38:27.860

就在最近，我们看到了同样的案例：在线程中调用 Word 对象模型时使用 TYPE_E_LIBNOTREGISTERED。您只能在主线程中使用任何 Office 对象模型。[请在http://www.add-in-express.com/creating-addins-blog/2010/11/04/threads-managed-office-extensions/](http://www.add-in-express.com/creating-addins-blog/2010/11/04/threads-managed-office-extensions/)找到一些信息和更多链接。

# php - 我如何在 php 中获取 facebook 好友的用户名？

> ID：13722346
> 
> 赞同：0
> 
> 时间：2012-12-05T11:33:26.713
> 
> 标签：php, facebook, facebook-graph-api

我想得到唯一的fb用户名是怎么回事？这是我的代码

```
$user = $this->facebook->user();
$fbfriends = $this->facebook->call('get', 'me/friends');
$friends=$fbfriends->data; 
```

这里它返回名称和id。但是名称不是用户名。有没有什么解决方案可以只从上面的函数中获取用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:39:18.053

试试这个：

```
$user = $this->facebook->user();
$fbfriends = $this->facebook->call('get', 'me/friends?fields=id,username,name');
$friends=$fbfriends->data; 
```

这将获取用户`username`的`id`和`name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:39:29.907

试试这个

```
 https://graph.facebook.com/id 
```

你会得到一个 json 结果，包括名字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:47:15.877

获取您的用户名

```
http://graph.facebook.com/id?fields=username 
```

和朋友的用户名

```
http://graph.facebook.com/id/friends?fields=username&access_token=XXXXXXXXXXXXXXXXXXXX 
```

有关更多信息[Facebook Graph Api 字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)

# java - 从父目录编译时，如何在清单文件中指定主类？

> ID：13722351
> 
> 赞同：1
> 
> 时间：2012-12-05T11:33:46.650
> 
> 标签：java, jar, manifest, javac

我的目录结构是这样的：

```
> makefile
> app.jar
> src
    > Main.java
    > Main.class
    > some other classes
    > manifest.txt 
```

我使用以下命令从 makefile 编译：

```
javac src/*.java
jar cvfm app.jar src/manifest.txt src/*.class 
```

`manifest.txt`包含这个：

```
Main-Class: Main 
```

当我`java -jar app.jar`从顶层目录运行时，出现此错误：

```
$ java -jar app.jar 
Exception in thread "main" java.lang.NoClassDefFoundError: Main
Caused by: java.lang.ClassNotFoundException: Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Main. Program will exit. 
```

我尝试将清单更改为说`Main-Class: src.Main`，但这也不起作用。这可能很简单，但我发现 Google 没有提供任何简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:47:19.427

请从 Oracle 中找到答案

[http://docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

请找到示例代码：-

```
package oata
public class HelloWorld {
 public static void main(String[] args) {
    System.out.println("Hello World");
 }
 } 
```

创建一个文件夹来放置 .class 文件然后编译并运行该文件。

```
 `md build\classes
   javac -sourcepath src -d build\classes src\oata\HelloWorld.java
  java -cp build\classes oata.HelloWorld`

  `echo Main-Class: oata.HelloWorld>myManifest
     md build\jar
    jar cfm build\jar\HelloWorld.jar myManifest -C build\classes .
    java -jar build\jar\HelloWorld.jar` 
```

谢谢帕万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:38:07.680

您收到 NoClassDefFoundError 异常，可能是类路径设置不正确。

谢谢，帕万

# c# - 用于从 JPG 图像中的 EXIF 数据中提取镜头品牌/型号的 C# 库

> ID：13722353
> 
> 赞同：6
> 
> 时间：2012-12-05T11:33:48.927
> 
> 标签：c#, image, jpeg, exif

我需要从上传到网站的任何 jpg 文件中提取以下信息：

*   光圈
*   焦距
*   ISO设置
*   相机品牌/型号
*   **镜头品牌/型号**

我不担心图像中包含的所有其他 EXIF 数据。我过去使用过一个旧图书馆，它可以毫无问题地获得该列表中的前 4 个项目，但我还没有找到一个可以获取镜头制造商和型号的图书馆。

有谁知道我可以在处理上述所有内容的 ASP.NET MVC C# 项目中使用的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:40:12.567

我现在找到了[Phil Harvey 的 EXIFTOOL](http://www.sno.phy.queensu.ca/~phil/exiftool/)的 C# 包装器，它提取了我需要的所有信息（然后是一些信息！）。由 Willem Semmelink 编写的 C# 包装器[在这里](http://owl.phy.queensu.ca/~phil/exiftool/ExifToolWrapper_cs.zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T11:44:23.187

Exiftool 很棒。但是，如果您想要一个简单的原生 C# 解决方案，请尝试我的[MetadataExtractor](https://github.com/drewnoakes/metadata-extractor-dotnet)。

# yii - Yii 夹具对象在尝试访问它们时为空

> ID：13722356
> 
> 赞同：0
> 
> 时间：2012-12-05T11:33:54.237
> 
> 标签：yii

我有以下测试文件

```
<?php

class DisplayAlbumTest extends CDbTestCase
{

  public $fixtures = array(
    'displayalbums' => 'DisplayAlbum',
    'displayphotos' => 'DisplayPhoto',
  );

  /**
   * Get title
   * 
   * @group v1.0
   * @group now
   */
  public function testGetTitle()
  {
    $oAlbum = $this->displayalbums('get_title');

    var_dump($oAlbum);

    die('nope!');

    $this->assertEquals('Get title test', $oAlbum->getTitle());
  }

} 
```

及其相关的夹具文件

```
<?php
return array(
  'get_title' => array(
    'title' => 'Get title test'
  )
); 
```

和以下配置

```
<?php
Yii::setPathOfAlias('api', '../api/');

return CMap::mergeArray(
  require(dirname(__FILE__).'/main.php'),
  array(
    'components'=>array(
      'fixture'=>array(
        'class'=>'system.test.CDbFixtureManager',
      ),
      /* uncomment the following to provide test database connection
      'db'=>array(
        'connectionString'=>'DSN for test database',
      ),
      */
      'db'=>$TEST_DB_SETTINGS,
    ),
  )
); 
```

`var_dump`运行测试但打印时，数据被插入到数据库中`NULL`。如果我尝试访问模型上的任何方法，我会收到以下错误（因为我试图访问 NULL 上的方法） PHP 致命错误：调用非对象上的成员函数 getTitle()

使用不同夹具的其他模型的其他测试没有任何问题，但使用与此模型测试用例相同的夹具的测试失败。

如果我`var_dump($this->displayalbums)`在测试中这样做，这就是我得到的结果：

```
array(1) {
  ["get_title"]=>
  array(2) {
    ["title"]=>
    string(14) "Get title test"
    ["displayalbumid"]=>
    string(1) "1"
  }
} 
```

我可以使用数组中的数据创建新对象并测试方法，但这意味着我必须重写我的所有测试（此文件中的其他测试因此而失败），这很奇怪，因为我在其他不失败的测试。

我查看了 MySQL 日志，最后运行的查询是选择我想要的专辑的查询

```
SELECT * FROM `DisplayAlbum` `t` WHERE `t`.`displayalbumid`=60 LIMIT 1 
```

如果我运行查询，它会返回正确的结果，所以问题不在于数据库。

当我尝试从夹具访问项目时，为什么值为 NULL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:15:54.300

我遇到了同样的问题，解决方案是默认范围“阻止”了它。

在 mysql 中，我将属性的默认属性设置为零，但默认范围条件是`$t.'attribute' = 1`. 可能你有一个类似的问题......

# windows - 在单个图块上显示 2 张图像以及一些不断变化的文本

> ID：13722361
> 
> 赞同：1
> 
> 时间：2012-12-05T11:34:27.140
> 
> 标签：windows, silverlight, windows-8

我正在使用适用于 Windows 8 的 Telerik RAD 工具。我想使用平铺类型界面，实际上我想在单个平铺上显示 2 个图像以及一些不断变化的文本。我很困惑为此使用哪个瓷砖，因为有很多选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:37:16.163

以下教程将为您提供帮助。

[http://www.kunal-chowdhury.com/2012/09/introduction-to-telerik-radslidehubtile-control-for-windows-8-store-application.html](http://www.kunal-chowdhury.com/2012/09/introduction-to-telerik-radslidehubtile-control-for-windows-8-store-application.html)

这将为您提供如何使用 RadSlideHubTile 控件

# javascript - 无法使用 twitter-bootstrap typeahead 在文本输入字段中显示所选项目

> ID：13722364
> 
> 赞同：2
> 
> 时间：2012-12-05T11:34:39.303
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用引导程序的 typeahead 来自动完成

我可以成功地从服务器获取项目列表，并使用以下代码查看建议词的下拉列表：

```
 $('.search-field').typeahead({
        source: function( query, process ){
            var queryParameters = form_params(document.getElementById("search"));
            var inputid = this.$element.attr('id');
            $.getJSON(
                "GET DATA From SERVER"
                    }));    
                });                 
        },
        minLength: 1,         
        updater:function(item){
            var id = this.$element.attr('id');
            $('#'+id).val(item);
            $('#'+id).text(item);
            console.log($('#'+id));
            instantSearch();                
        }  
   }); 
```

问题出在更新程序中。当我在下拉列表中选择一项时，item 参数是我选择的正确字符串。我想在输入文本字段中显示所选项目，但是没有任何反应。两个都

```
 $('#'+id).val(item); 
```

和

```
 document.getElementById('id').value = item; 
```

失败的。

有谁知道如何在引导程序的预输入更新程序中设置文本输入字段的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:43:30.697

动态设置选择器很困难，我不确定你能做到但值得一试：试试：

```
var itemSelect = "'#" + id + "'";
$(itemSelect).val(item); 
```

或者

```
var itemSelect = document.getElementById(id);
itemSelect.value(item); 
```

# android - 删除动态创建的表行android

> ID：13722372
> 
> 赞同：0
> 
> 时间：2012-12-05T11:35:06.417
> 
> 标签：android, cursor

我正在尝试删除动态创建的表行，但我无法获得正确的表行 id，我所有的表行都有相同的 id，我创建的更多，我的计数器设置了更高的 id，所有行都得到它......我会很感激任何帮助，我坚持了几天。我的方法很大，但我认为只有开始很重要。

```
 public void getRow(String klik, int brojkica)
{
    //db=openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
    db = INF.getReadableDatabase();
    int count = 0;
    Cursor cursor3 = db.rawQuery("select id,Artikl, CIJENA from Artikli where");
    System.out.println(counterko);
    counterko++;
    tr = new TableRow(this);
    tr.setClickable(true);
    tr.setBackgroundColor(Color.GRAY);

    tr.setId(500 + counterko);

    cursor3.moveToFirst();
    final TextView sifracolumn = new TextView(this);
    sifracolumn.setId(1000 + counterko);

    sifracolumn.setPadding(5, 5, 5, 5);
    sifracolumn.setText(String.valueOf(cursor3.getInt(0)));
    sifracolumn.setGravity(Gravity.CENTER | Gravity.BOTTOM);
    sifracolumn.setTextColor(Color.BLACK);
    tr.addView(sifracolumn);
    allIDs.add(sifracolumn);//////////////////////////////////////

    final TextView artiklcolumn = new TextView(this);
    artiklcolumn.setPadding(5, 5, 5, 5);
    artiklcolumn.setId(2000 + counterko);
    artiklcolumn.setClickable(true);
    artiklcolumn.setWidth(400);
    artiklcolumn.setText(cursor3.getString(1));
    artiklcolumn.setGravity(Gravity.CENTER | Gravity.BOTTOM);
    artiklcolumn.setTextColor(Color.BLACK);
    tr.addView(artiklcolumn);
    artiklcolumn.setOnClickListener(new View.OnClickListener()
    {

        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            //alert(tr.getId());
            alert(artiklcolumn.getId());
        }
    });
    final TextView cijenacolumn = new TextView(this);
    cijenacolumn.setId(3000 + count);
    cijenacolumn.setText(cursor3.getString(2));
    cijenacolumn.setWidth(120);
    cijenacolumn.setGravity(Gravity.CENTER | Gravity.BOTTOM);
    cijenacolumn.setTextColor(Color.BLACK);

    tr.addView(cijenacolumn);

    final EditText kolicinacolumn = new EditText(this);
    kolicinacolumn.setId(4000 + counterko);
    kolicinacolumn.setText("1");
    kolicinacolumn.setGravity(Gravity.CENTER | Gravity.BOTTOM);
    kolicinacolumn.setTextColor(Color.BLACK);

    allEds.add(kolicinacolumn);
    tr.addView(kolicinacolumn);

    final TextView iznoscolumn = new TextView(this);
    iznoscolumn.setId(5000 + counterko);
    iznoscolumn.setWidth(120);
    iznoscolumn.setText("");
    iznoscolumn.setTextColor(Color.BLACK);
    iznoscolumn.setGravity(Gravity.CENTER | Gravity.BOTTOM);
    tr.addView(iznoscolumn);
    allTexts.add(iznoscolumn);

    if (kolicinacolumn.getText().toString() == "1")
    {

        System.out.println("kme");
        iznoscolumn.setText(cijenacolumn.getText().toString());
    }
    zaplatiti();
    tl = (TableLayout) findViewById(R.id.tableLayout1);
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    count++;
    kolicinacolumn.addTextChangedListener(new TextWatcher()
    {

        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            String kol = kolicinacolumn.getText().toString();
            if (TextUtils.isEmpty(kol))
            {
                try
                {
                    System.out.print("Stop it");
                } catch (NumberFormatException e)
                {
                    System.out.println("This is not a number");
                    System.out.println(e.getMessage());
                }
            } else
            {
                Float racunam = Float.valueOf(kol);
                Float racunam2 = Float.valueOf(cijenacolumn.getText().toString());
                Float reza = racunam * racunam2;
                iznoscolumn.setText(String.valueOf(reza));
            }
            zaplatiti();
        }

        public void afterTextChanged(Editable s)
        {
            // TODO Auto-generated method stub      
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
            //TODO 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:42:42.367

使用该`.removeView()`方法并作为参数使用要删除的表格行的索引，或向表格行添加唯一标签，稍后根据此标签将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:17:09.350

还将 id 设置为每一行中的标签。删除唯一行时，然后使用 .removeView(view.getTag());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:49:05.550

```
for(int i = 0, j < table.getChildCount(); i < j; i++){
    TableRow row = (TableRow) getChildAt(i);
    if(you can check something here) {
        removeViewAt(i);
        // or...
        removeView(row);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:59:53.747

好的，我解决了我的问题..第一个问题是

```
tr = new TableRow(this); 
```

我无法将 id 分配给我的表格行，因为 id 没有在我的方法中实例化它，所以首先要做的是

```
final TableRow tr = new TableRow(this); 
```

然后我将 onclicklistener 放在我想要响应的列上并将其放入..

```
 artiklcolumn.setOnClickListener(new View.OnClickListener(){
public void onClick(View v) {
TableRow km= (TableRow)findViewById(tr.getId());                
alert(km);

} 
```

我在其中获取我的对象，将其发送到警报对话框，然后从那里删除它。

```
 public void delete(TableRow tr2){

 tl.removeView(tr2);       

 } 
```

# jquery - jQuery $.proxy 范围

> ID：13722376
> 
> 赞同：1
> 
> 时间：2012-12-05T11:35:23.463
> 
> 标签：jquery, oop, scope

我有以下代码：

```
bindEvents: function() {
    $('#weight').click($.proxy(function(){
        this.changeWeight($('#weight').is(':checked'));
    },this));
    $('#produce').change($.proxy(function(){
        this.changeProduce();
    },this));
    $('.help-gtin').click($.proxy(function(){
        if ($('#help-gtin').is(':hidden')) {
            $('#help-gtin').slideDown();
        } else {
            $('#help-gtin').slideUp();
        }
        this.refreshGtin();
    },this);

    $('[name="order_production"]').click($.proxy(function(){
        this.changeProduction();
    },this));

}, 
```

如何减少此重复代码***$.proxy 调用***，因为内部的所有方法`bindEvents`都需要在`this`范围内调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:37:48.860

利用它们已经是[闭包](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)的事实，通过设置一个等于`this`然后使用它的变量：

```
bindEvents: function() {
    var self = this; // <==== Set the variable

    $('#weight').click(function(){
        // v--- Use it (throughout)
        self.changeWeight($('#weight').is(':checked'));
    });
    $('#produce').change(function(){
        self.changeProduce();
    });
    $('.help-gtin').click(function(){
        if ($('#help-gtin').is(':hidden')) {
            $('#help-gtin').slideDown();
        } else {
            $('#help-gtin').slideUp();
        }
        self.refreshGtin();
    });

    $('[name="order_production"]').click(function(){
        self.changeProduction();
    });

}, 
```

`bindEvents`您在“关闭”调用上下文中定义的所有函数`bindEvents`，并且可以访问与该调用关联的局部变量。与 不同`this`的是，这些变量不会根据函数的调用方式而改变。

This also has the advantage that you can use `this` within the event handlers with its jQuery meaning, the element on which you hooked the event (this saves your looking it up again, for instance within your `click` handler on `#weight`).

# wix - 创建 WIX 对话框的自定义库

> ID：13722386
> 
> 赞同：3
> 
> 时间：2012-12-05T11:35:59.740
> 
> 标签：wix

我已经使用我自己的自定义对话框创建了一个安装程序，但是我现在正在继续创建更多设置，这些设置将使用我已经创建的许多对话框。我的问题是有人知道任何教程或任何可以帮助我创建对话框库的东西。

理想情况下，我希望有一个可供多个安装程序使用的自定义对话框库，但每个安装程序都可以选择它需要的对话框。像 WIX 这样的东西使用你可以使用的地方，`<UIRef Id="CustomDialogs" />`并且在每个 WIX 设置中我都可以自定义它，以便我只选择该特定设置所需的对话框。

目前我只是将对话框复制到新的 WIX 设置项目中，但理想情况下我希望更有效地完成它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:19:09.407

您需要做的就是将自定义对话框添加到 .wixlib 项目中，然后您可以在安装项目中引用该项目。

# objective-c - ARC 中的内存管理

> ID：13722394
> 
> 赞同：1
> 
> 时间：2012-12-05T11:36:13.733
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我不明白这些对象是如何在 ARC 中释放的，这对我来说仍然是一个困惑。

假设我在方法中使用 alloc 创建了一个视图控制器或任何其他控制器

```
 -(void) displayView
    {
       RegViewController *sampleView = [[RegViewController alloc] init];
       [sampleView setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
       [sampleView setModalPresentationStyle:UIModalPresentationFormSheet];
       [self presentModalViewController:sampleView animated:YES];
    } 
```

它是释放方法块完成时创建的对象，还是我们应该通过给 nil 引用来显式释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:42:47.030

在这种情况下**sampleView**将在模态视图被解除时被释放。在这种情况下，不需要做任何其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:35:53.323

```
Does it release the object created when the method block completes or we should explicitly release by giving nil to reference? 
```

答案是**否定**的。

在上述情况下，`sampleView`保留计数未达到 0，因为您将其作为参数传递给`self`类。一旦所有强引用都将被清除，它的保留计数将下降到 0，只有在那之后它才会被释放。

您可以简单地将您的代码想象为`RegViewController *sampleView = [[[RegViewController alloc] init] autorelease];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:40:47.307

视图控制器在块结束时自动释放。但是，这并不**意味着**它已被释放 - 它仍然由`presentModalViewController:animated:`方法保留，并且在它被解除时将被释放（和释放）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:42:18.243

ARC 代表自动引用计数。它接管了用户维护对象引用计数的责任。这就是为什么你不能打电话`[obj retain]`或`[obj release]`不再打电话的原因。一旦引用计数器达到 0，它就会为您释放它。请记住，它不是垃圾收集器。在某些情况下，如果您不小心，这种机制可能会导致内存泄漏。但总的来说，它工作得很好。

# asp.net - 想要根据 Gridview 字段中的值启用图像按钮

> ID：13722395
> 
> 赞同：-2
> 
> 时间：2012-12-05T11:36:14.553
> 
> 标签：asp.net, c#-4.0

在 Gridview 中，我正在使用想要根据字段中的值启用的图像按钮。我的部分代码是..

```
<asp:ImageButton ID="btn_delete" **Enabled='<%# Eval("fld_status").ToString()=="1" ?    "False" : "True" %>**' runat="server" ToolTip="Delete" OnClientClick="return confirm('Important Alert : Do you delete this item ?')" CommandName="del" CommandArgument='<%#Bind("fld_id") %>' /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:44:49.250

通过`RowDataBound`（我更喜欢）：

```
protected void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRowView row = (DataRowView)e.Row.DataItem;
        int status = (int)row["fld_status"];
        Button btn_delete = (Button) e.Row.FindControl("btn_delete");
        btn_delete.Enabled = status != 1; 
    }
} 
```

从aspx：

```
<asp:ImageButton ID="btn_delete" runat="server"
    Enabled='<%# ((int)Eval("fld_status") !=1) ? true : false  %>' 
    ToolTip="Delete" OnClientClick="return confirm('Important Alert : Do you delete this item ?')" CommandName="del" CommandArgument='<%#Bind("fld_id") %>' 
/> 
```

# android - svg 图像文件 android

> ID：13722402
> 
> 赞同：2
> 
> 时间：2012-12-05T11:36:38.417
> 
> 标签：android, svg, svg-android

我正在使用下面的代码将 svg 图像渲染到我的 android 应用程序中的 imageview

```
 ImageView imageView = new ImageView(this);  
    final SVG svg = SVGParser.getSVGFromAsset(getAssets(), "start_4_480.svg");
   imageView.setImageDrawable(svg.createPictureDrawable()); 
```

链接：[http](http://code.google.com/p/svg-android/wiki/Tutorial) ://code.google.com/p/svg-android/wiki/Tutorial 它工作正常。但是图像的大小是 2 MB（相同的图像在 png 格式中只有几 kbs）。我有很多这样的图像。这增加了我的应用程序的内存。

所以我想考虑使用 svgz 格式的图像（压缩 svg）。谁能告诉我如何将 svgz 图像直接渲染到 android 中的图像视图。请帮忙。还建议我使用其他方法使图像适应不同的屏幕尺寸和不同的文件格式，而不是 svn，这很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:14:19.347

[他](https://stackoverflow.com/users/643141/his)是对的。如果您将其作为 APK 的一部分进行分发，就像您现在看到的那样，它无论如何都会被压缩，因此无需再次压缩它。

如果要从远程资源加载它，可以在调用解析器之前将 InputStream 包装在 GZIPInputStream 中。

```
public static SVG getSVGZFromInputStream(InputStream is) throws SVGParseException {
   SVG svg = null;

   try {
      GZIPInputStream gis = new GZIPInputStream(is);     
      svg = SVGParser.getSVGFromInputStream(gis);
   } catch (IOException e) {
      //handle IO error
   }

   return svg;
} 
```

为了解决您的第二个问题，在您放弃 SVG 以使用另一种文件格式之前，值得研究一下您的 SVG 是否可以优化以使其成为更可接受的大小。有关 SVG 优化的想法，请参阅[此问题的答案](https://stackoverflow.com/questions/9009305/what-are-some-options-for-optimizing-svg) 如果您的 SVG 仍然很大，通常的做法是为每个分辨率使用多个 PNG。

# javascript - 在 rails 项目中动态插入样式表

> ID：13722410
> 
> 赞同：0
> 
> 时间：2012-12-05T11:37:22.530
> 
> 标签：javascript, ruby-on-rails, ruby, backbone.js, underscore.js

我已经为我们正在为学校开发的 CMS 构建了一个实时主题选择器。CMS 是使用 Ruby on Rails 构建的，我（个人）没有任何使用 Ruby on Rails 的经验（其他人在做后端的工作，我是前端的人）。

现在我想要我的主题选择器，它是用 javascript（Backbone、Underscore 和 jQuery）编写的，可以与 Rails 一起使用，但是我找不到在 Rails 中包含样式表的正确方法。目前我正在给出一个静态路径：

```
// Insert a new stylesheet
var stylesheet = $("<link />", {
    href: "stylesheets/themes/theme-" + this.themeID + "/theme-color-" + colorset + ".css",
    rel: "stylesheet",
    id: "js-theme-colorset"
});

// Append the stylesheet to the iframe
$('head', $('#js-theme-iframe')[0].contentWindow.document ).append( stylesheet ); 
```

但是 CMS 是动态的，所以我想从资产管道中获取样式表，但我不确定如何解决这个问题。试过这个：

```
// Insert a new stylesheet
var stylesheet = '<%= stylesheet_link_tag "themes/theme-1/theme-color1.css", :id => "js-theme-colorset" %>';

// Append the stylesheet to the iframe
$('head', $('#js-theme-iframe')[0].contentWindow.document ).append( stylesheet ); 
```

但这并没有成功..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:29:31.613

找到了，当你想通过javascript链接到你的样式表时，你需要指向：assets。

我正在寻找的链接是： assets/themes/theme-0/theme-color-1.css

你不需要指定样式表，Rails 知道（显然）。只需链接到资产管道。无论如何感谢您的回答:)！

# php - 用php脚本压缩rar格式的txt文件

> ID：13722411
> 
> 赞同：0
> 
> 时间：2012-12-05T11:37:23.853
> 
> 标签：php, file, compression, rar

我在 PHP 函数中使用 exec() 创建 .rar 文件。

下面是脚本

```
exec('C:\Program Files\WinRAR\WinRAR.exe a carchivo.rar Details.txt'); 
```

这个脚本运行没有任何错误，但没有创建 rar 文件。

请帮我解决这个问题。有没有其他方法可以创建 .rar 压缩文件？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:43:12.790

可能有错误，但您没有检查它们。尝试以下操作：

```
$errors = array();
exec('C:\Program Files\WinRAR\WinRAR.exe a carchivo.rar Details.txt', $errors);

var_dump($errors); 
```

这应该为您提供结果的简单响应`exec()`。

如果没有进一步的信息，很难确定您当前问题的可能原因。

# maven - maven可以打开vpn连接吗？

> ID：13722418
> 
> 赞同：0
> 
> 时间：2012-12-05T11:37:38.657
> 
> 标签：maven, vpn

我有一个使用 WSDL2Java 创建 webService 客户端的 maven 项目。在开发环境中，我可以直接访问 WSDL 的 url，但对于生产环境，我需要连接到 VPN 才能访问 WSDL url。

我可以使用 maven 创建 VPN 连接以访问这些网址吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:17:41.040

您可以尝试使用[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/)启动选择的本地工具来打开您的 vpn 连接。

但请注意，这会使构建依赖于您的本地环境，因此您至少应该使用 maven 配置文件来添加此步骤。

# widget - Zend 2 小部件内容

> ID：13722425
> 
> 赞同：0
> 
> 时间：2012-12-05T11:38:03.047
> 
> 标签：widget, action, zend-framework2, dispatch

我正在尝试创建一个小部件内容.. 基本上我想在我的布局中有块从不同的模块/控制器/动作填充...

我尝试`$this->action`在视图中使用，但似乎 ZF2 中的操作已被删除（或没有？）服务管理器找不到它：

```
Fatal error: Uncaught exception 'Zend\ServiceManager\Exception\ServiceNotFoundException' with message 'Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for action 
```

我也尝试过`forward action helper`在模块的`'Zend\Mvc\Application::dispatch'`事件中，但由于没有控制器而无法向前调用????

那么如何在我的布局中加载块（不同的模块/控制器/操作）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T07:47:21.233

好的，这就是我所做的：

*   为每个块创建了一个视图助手
*   在模块配置文件中创建了一个索引来保存可阻塞视图助手的列表
*   创建了一个表来保存块列表及其配置
*   创建了一个“新阻止操作”，女巫加载可阻止助手列表
    *   用户选择一个帮助类型并被重定向到另一个页面
    *   这里加载了帮助程序特定的配置
        *   此页面中的表单会触发一个收集助手配置的事件
        *   模块可以处理此事件并创建配置字段集并将其提供给表单
    *   我还从我的模板 ini 配置文件中加载了一个块位置列表
*   创建了一个“块”视图助手，女巫接受一个参数“块位置”，然后在块表中搜索该位置的匹配项
    *   如果找到：每个项目关联的视图助手被执行，输出被收集并返回到视图

# c++ - 为什么编译器可以比普通函数更好地优化 lambda？

> ID：13722426
> 
> 赞同：188
> 
> 时间：2012-12-05T11:38:03.083
> 
> 标签：c++, optimization, c++11, lambda, compiler-optimization

Nicolai Josuttis在他的书中`The C++ Standard Library (Second Edition)`指出，编译器可以比普通函数更好地优化 lambda。

> 此外，C++ 编译器比普通函数更能优化 lambda。（第 213 页）

这是为什么？

我认为在内联方面应该不再有任何区别。我能想到的唯一原因是编译器可能有更好的本地上下文与 lambda，这样可以做出更多假设并执行更多优化。

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-12-05T11:43:10.513

原因是 lambda 是*函数对象*，因此将它们传递给函数模板将专门为该对象实例化一个新函数。因此，编译器可以简单地内联 lambda 调用。

另一方面，对于函数，旧的警告适用：函数*指针*被传递给函数模板，编译器传统上通过函数指针内联调用存在很多问题。它们*理论上*可以内联，但前提是周围的函数也内联。

例如，考虑以下函数模板：

```
template <typename Iter, typename F>
void map(Iter begin, Iter end, F f) {
    for (; begin != end; ++begin)
        *begin = f(*begin);
} 
```

用这样的 lambda 调用它：

```
int a[] = { 1, 2, 3, 4 };
map(begin(a), end(a), [](int n) { return n * 2; }); 
```

此实例化的结果（由编译器创建）：

```
template <>
void map<int*, _some_lambda_type>(int* begin, int* end, _some_lambda_type f) {
    for (; begin != end; ++begin)
        *begin = f.operator()(*begin);
} 
```

…编译器知道`_some_lambda_type::operator ()`并且可以简单地内联对它的调用。`map`（并且使用*任何*其他 lambda调用该函数将创建一个新的实例化 ，`map`因为每个 lambda 都有不同的类型。）

但是当使用函数指针调用时，实例化如下所示：

```
template <>
void map<int*, int (*)(int)>(int* begin, int* end, int (*f)(int)) {
    for (; begin != end; ++begin)
        *begin = f(*begin);
} 
```

…这里`f`为每个调用指向一个不同的地址，`map`因此编译器不能内联调用，`f`除非周围的调用`map`也被内联，以便编译器可以解析`f`到一个特定的函数。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-05T11:44:26.997

因为当您将“函数”传递给算法时，您实际上是在传递指向函数的指针，因此它必须通过指向函数的指针进行间接调用。当您使用 lambda 时，您将一个对象传递给专门为该类型实例化的模板实例，并且对 lambda 函数的调用是直接调用，而不是通过函数指针的调用，因此更有可能是内联的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-12-23T15:47:25.657

Lambda 并不比通常的函数快或慢。如有错误请指正。

首先，lambda和普通函数有什么区别：

1.  Lambda 可以进行捕获。
2.  由于它具有内部链接，因此很有可能在编译期间从目标文件中简单地删除 Lambda。

让我们谈谈捕获。它不会给函数带来任何性能，因为编译器必须传递额外的对象以及处理捕获所需的数据。无论如何，如果您只使用 lambda 函数，它将很容易优化。此外，如果 lambda 不使用捕获，您可以将 lambda 转换为函数指针。为什么？因为如果它没有捕获它只是一个普通的功能。

```
void (*a1)() = []() {
    // ...
};
void _tmp() {
    // ...
}
void (*a2)() = _tmp; 
```

上面的两个例子都是有效的。

谈到从目标文件中删除功能。你可以简单地将你的函数放到匿名命名空间中，它就会达成交易。内联函数会更高兴一点，因为除了您的文件之外，它不会在任何地方使用。

```
auto a1 = []() {
    // ...
};

namespace {
    auto a2() {
        // ...
    }
} 
```

上述功能将与性能相同。

我还注意到比较了函数指针和 lambda。这不是一件好事，因为它们是不同的。当你有一个指向函数的指针时，它可以指向各种不同的函数，并且它可以在运行时改变，因为它只是一个指向内存的指针。Lambda 无法做到这一点。它总是只使用一个函数，因为调用哪个函数的信息存储在类型本身中。

您可以使用这样的函数指针编写代码：

```
void f1() {
    // ...
}
void f2() {
    // ...
}
int main() {
    void (*a)();
    a = f1;
    a = f2;
} 
```

绝对没问题。而且您不能以这种方式使用 lambdas 编写代码：

```
int main() {
    auto f1 = []() {
        // ...
    };
    auto f2 = []() {
        // ...
    };
    f2 = f1; // error: no viable overloaded '='
} 
```

如果某些库接受函数指针，这并不意味着编译器可以比普通函数更好地优化 lambda，因为问题不在于通用库和函数指针。

# android - GridView ，这条“线”为什么以及如何处理整个数组

> ID：13722427
> 
> 赞同：0
> 
> 时间：2012-12-05T11:38:11.560
> 
> 标签：android

为什么以及如何，这一行正在处理整个数组**label.setText(items[position]);** 没有任何循环条件！

这是我的，正在访问 array_adapter 类的类。对于资源....

```
class FunnyLookingAdapter extends ArrayAdapter 
{
    Context ctxt;

    FunnyLookingAdapter(Context ctxt, int resource,String[] items) 
    {
        super(ctxt, resource, items);
        this.ctxt=ctxt;
    }

    public View getView(int position, View convertView,ViewGroup parent) 
    {
        TextView label=(TextView)convertView;

        if (convertView==null) 
        {
            convertView=new TextView(ctxt);
            label=(TextView)convertView;
        }

        label.setText(items[position]); //------------------ this is the line !
        return(convertView);
    }
} 
```

而这一阶段的代码使用的是前一个类。所以代码是::

```
 GridView grd = ( GridView ) findViewById ( R.id.gd_v );

    grd.setAdapter(new FunnyLookingAdapter(this,
            android.R.layout.simple_list_item_1,
            items)); 
```

并且字符串资源数组是：

```
String[] items={"lorem", "ipsum", "dolor", "sit", "amet",
        "consectetuer", "adipiscing", "elit", "morbi", "vel",
        "ligula", "vitae", "arcu", "aliquet", "mollis",
        "etiam", "vel", "erat", "placerat", "ante",
        "porttitor", "sodales", "pellentesque", "augue", "purus"}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:49:13.830

试试这个代码：

```
Context ctxt;
String[] mItems;

FunnyLookingAdapter(Context ctxt, int resource,String[] items) 
{
    super(ctxt, resource, items);
    this.ctxt=ctxt;
    this.mItems = items;
}

public View getView(int position, View convertView,ViewGroup parent) 
{
    TextView label=(TextView)convertView;

    if (convertView==null) 
    {
        convertView=new TextView(ctxt);
        label=(TextView)convertView;
    }

    label.setText(mItems[position]); //------------------ this is the line !
    return(convertView);
} 
```

这样您就可以访问您的项目数组。在您的代码中，字符串数组只能通过构造函数方法访问，因此该`getView()`函数实际上看不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:19:48.497

适配器的设计方式是，它将计算项目的数量并创建许多视图以供列表显示。

简而言之，循环（您正在考虑的）是在[Super 类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/ArrayAdapter.java)中编写的，因此您不必再次编写它，它只需处理整个数组。

您可以参考许多很好的链接来了解适配器。

1.  [了解 BaseAdapter 以及如何使用它们](https://stackoverflow.com/questions/4799380/understanding-baseadapters-and-how-to-use-them)

2.  [了解 Android SDK 中的适配器](http://mcondev.wordpress.com/2011/05/02/understanding-the-adapter-in-the-android-sdk/)

3.  [专业版 - 安卓](http://books.google.co.in/books?id=eyHZ0-wRGQAC&pg=PA159&lpg=PA159&dq=android+understanding+adapters&source=bl&ots=026XIZbX-k&sig=QNs9RPocEPYdyb4QKB06mP5bmHg&hl=en&sa=X&ei=3zq_UOr_J8urrAfI7YHABQ&ved=0CD8Q6AEwAg#v=onepage&q=android%20understanding%20adapters&f=false)

4.  [学习安卓](http://ofps.oreilly.com/titles/9781449390501/Android_Adapters.html)

# c++ - 在 NDK 的稳定 API 之外使用原生 Android 系统库

> ID：13722428
> 
> 赞同：1
> 
> 时间：2012-12-05T11:38:11.933
> 
> 标签：c++, linker, android-ndk, native, android-library

我想知道是否可以在本机代码中使用未直接作为 NDK 的 API 公开的 Android 系统库。特别是如何将它们包含在我的本机应用程序代码中，以便它们可以与之链接。我知道这是不鼓励的，但我的项目在不同 Android 版本之间的兼容性不是问题。

我想要实现的是跳过 Android 提供的一些服务并尝试更靠近内核。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:57:22.717

[我希望你明白，除了稳定的 API](https://android.googlesource.com/platform/ndk/+/master/docs/STABLE-APIS.html)之外，不建议对系统库有任何依赖。但 Android 的开放性允许（无论是在技术上还是在许可方面）引入这种依赖关系。从本质上讲，这意味着在非特许水域航行，并且不仅准备在平台的下一版本中进行 API 更改，而且还准备在相同平台级别的供应商提供（即非 AOSP）设置中进行 API 更改。

确保前向（和供应商）兼容性的最安全方法是对未记录的系统功能使用[动态链接](https://groups.google.com/d/topic/android-ndk/sOGz0nyLbg4/discussion)，并在此过程中执行仔细的错误检查。

但在很多情况下，系统无文档的 API 实际上是相当稳定的，而且 Google 的 Android 团队中的好人不会经常进行重大更改。因此，如果您链​​接到 4.0 版本的**skia** ，您的代码很可能只会在 4.1.2 及更高版本上运行。

从技术上讲，您需要编译头文件和链接的**.so文件。**后者您可以简单地从您自己的设备或模拟器图像中获取任何`adb pull /system/lib/lib`*内容。*`.so`您可以从[https://android.googlesource.com/](https://android.googlesource.com/) git 存储库下载标头。确保您的标头与库版本匹配。

# java - 在 android 4.1.1 的 Galaxy S3 中未调用 onLocationChanged

> ID：13722430
> 
> 赞同：3
> 
> 时间：2012-12-05T11:38:17.903
> 
> 标签：java, android

这段代码在其他手机上运行良好，在三星 Galaxy s3 和 android 4.0.3 上也能正常运行，但在三星 Galaxy S3 和 android 4.1.1 上运行不正常，知道吗？

问题是永远不会调用 onLocationChanged 方法。

返回的提供者是“网络”

```
/**
* @see android.app.Application#onCreate()
*/
@Override
public void onCreate() {
    locationManager = (LocationManager) this.getSystemService(getApplicationContext().LOCATION_SERVICE);
    String provider = getLocationProvider();
    locationManager.requestLocationUpdates(provider, 0, 20, locationListener);
}

/**
* @see android.location.LocationListener
*/
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
       currentLocationUser = location;
       if (onLocationListener != null) {
            onLocationListener.onLocationChanged(location);
       }
    }

   public void onStatusChanged(String provider, int status, Bundle extras) {

   } 

   public void onProviderEnabled(String provider) {

   }

    public void onProviderDisabled(String provider) {

    }
 };

public String getLocationProvider() {
    Criteria locationCriteria = new Criteria();
    locationCriteria.setAccuracy();
    return locationManager.getBestProvider(locationCriteria, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:06:50.423

我想建议`LocationManager.removeUpdates()`在请求更新之前使用新的时间。**在 JELLYBEAN(4.1) 之后，更新之间的最短时间不再只是一个提示。**

有关这方面的更多信息，请参阅[位置管理器。](http://developer.android.com/reference/android/location/LocationManager.html)

正如以下文档所述

> **在 Jellybean 之前**， minTime 参数只是一个提示，一些位置提供程序实现忽略了它。**从 Jellybean 及以后，Android 兼容设备必须遵守 minTime 和 minDistance 参数。**

# android - 调用需要 API 级别 9（当前为 8 => 错误），与 android.media.audiofx.Visualizer 相关。（内图）

> ID：13722432
> 
> 赞同：0
> 
> 时间：2012-12-05T11:38:22.590
> 
> 标签：android, api, audio, media, visualizer

抱歉，我无法使标题更清楚，所以这是我的问题：我正在使用该项目的源代码（[https://github.com/felixpalmer/android-visualizer](https://github.com/felixpalmer/android-visualizer)）并且遇到了一个非常奇怪的问题。当我在不做任何修改的情况下使用代码时，它可以正常工作，我可以在我的 android 设备上运行该程序。

但是当我在自己的程序中添加此代码（并调整所有内容）时，我收到此错误消息： **Class requires API level 9 (current min is 8): android.media.audiofx.Visualizer**

鉴于我已经用这个修改了我的清单，我不知道出了什么问题：

> > ```
> >  < uses-sdk
> >     android:minSdkVersion="9" 
> >     android:targetSdkVersion="15" /> 
> > ```

我读过类似的帖子，但到目前为止没有任何效果，而且我对原始程序完美运行的事实感到非常沮丧，而麻烦始于我自己的版本。

如果您有任何想法，请提前致谢！

再见![图片来自我的问题框](../Images/1e11f45b3b428850580bd06de2dd5d60.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:07.567

您需要更新您的 Android SDK。在 Android SDK Manager 中，您会在最后找到 Extras。您需要将**Android 支持库**更新到修订版 11。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:45:53.893

我认为也许你应该清理你的项目，然后再试一次。有时 Eclipse 会做一些愚蠢的事情，即使一切都很好。

# javascript - 如何使用循环生成 15 个输入并只运行一次？

> ID：13722440
> 
> 赞同：-5
> 
> 时间：2012-12-05T11:39:03.993
> 
> 标签：javascript

如何使用循环生成 15 个输入，每个输入都有自己的“id”并且只运行一次？

```
<input type="button" onclick="generate()">
<script>
function generate(){
for(var i=0; i < 15; i++) {
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:45:04.923

那是你要找的吗？

```
for(var i=0 ; i<15;i++)
{
     var input = document.createElement('input');
     input .setAttribute('id',"input"+i);
     document.getElementById("formName").appendChild(input);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:45:26.620

如果您有一个 ID 为 的表单`myForm`：

```
window.onload = function(){

    var form = document.getElementById("myForm");

    for(var i=0; i<15; i++)
    {
        var input = document.createElement('input');
        input.type = 'text';
        input.name = 'myInput_' + i;
        input.id = 'myInput_' + i;
        form.appendChild(input);
    }

}; 
```

这将为您提供 15 个文本输入，每个输入具有唯一的名称和 ID，格式为 0-14`myInput_i`之间`i`的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:44:26.873

```
<div id='elements'></div>
<script>
for(var i=0;i<15;i++){
document.getElementById('elements').innerHTML=document.getElementById('elements').innerHTML+"<input type='text' id='type"+i+"'>";
}
</script> 
```

给出你想要的 id 和输入类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:57:50.177

该函数采用您要放置字段的 div 的 ID，第二个参数是您想要的字段数。

您可以这样做，但如果您的项目将使用大多数 javascript DOM 操作，您可能应该使用 jQuery。

```
<!DOCTYPE html>
<html lang="en">
    <head>

    </head>

    <body>
        <form>
            <div id="divForPlacement">

            </div>
        </form>

        <script>
            function putInputFields(div, number) {
                var oDivForPlacement = document.getElementById(div);
                if(oDivForPlacement === undefined || oDivForPlacement === null) return;
                var currentField = null;

                for(i = 0; i < number; i++) {
                    currentField = document.createElement("input");
                    currentField.setAttribute("id", div + "-field" + i);
                    currentField.setAttribute("type", "text");
                    oDivForPlacement.appendChild(currentField);
                }

            }
            putInputFields("divForPlacement", 15);
        </script>
    </body>
</html> 
```

# php - 在没有等号的 if 语句中，int 算术结果如何等于真？

> ID：13722445
> 
> 赞同：0
> 
> 时间：2012-12-05T11:39:19.270
> 
> 标签：php, if-statement

我主要是 ac# 程序员，我目前正在尝试在没有 php 知识的情况下转换一些 php 代码。我已经成功地转换了我需要的东西，除了这个 if 语句。

它似乎与我在 java、c++ 或 c# 中使用的任何 if 语句都不相似，而且我的谷歌搜索没有结果。

这实际上在做什么？

```
if ($var1["string1"][$var2]["string2"] - $var3["string2"]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:58:37.033

这`$var1["string1"][$var2]["string2"]` 是一个类似于 Java 的三维关联数组`var1[0][1][2]`，但这里的索引是字符串而不是整数，就像关联数组的情况一样。

并且`$var2`（`$var2`必须来自其他地方的值）用作数组第二维的索引，就像`"string1"`用作第一维的索引一样。

休息很简单，你减去两个元素，如果结果为 0，那么它将是假的，否则它将是真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:43:34.767

算术表达式将导致要么是要么`0`不是的东西`0`。`0`评估为`false`，其他一切都不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:48:53.727

检查此页面的（摘要），它显示了 php.ini 中什么是真/假的概述。

[http://11heavens.com/true-or-false-in-php](http://11heavens.com/true-or-false-in-php)

在您的情况下，它将返回一个数字，并且 PHP 中的任何数字都是真的，除了 0 和 0.0

# magento - 报价未正确转换为订单：sales_flat_order_item - parent_item_id 问题

> ID：13722449
> 
> 赞同：1
> 
> 时间：2012-12-05T11:39:33.203
> 
> 标签：magento

当我将可配置产品放入购物篮时，可配置产品和他的简单子项将被放入带有正确 parent_item_id 的 sales_flat_quote_item 表中。

转换为订单后，项目保存在 sales_flat_order_item 表中 - 但简单产品的 parent_item_id 为“null”，因此它不指向可配置产品。

仅当一种产品已从购物篮中取出并在此之后添加另一种（或相同）时才会发生这种情况。如果添加了产品并以“一种方式”购买了产品，则一切正常。

我今天所做的：我禁用了所有本地模块。我禁用了所有社区模块。我使用默认主题。

有没有人有时有同样的问题和/或可以给我一个方法？

（Magento CE 1.6.0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:23:26.633

我有同样的问题，但对我来说，问题是`parent_item_id`产品 ID 错误。如果您想对订单进行任何更改，这种情况就会生效。当我尝试更改订单状态或制作发票/发货时，我遇到了致命错误。

```
Fatal error Call to a member function getId() on a non-object in app/code/core/Mage/Catalog/Rule/Model/Rule/Condition/Product.php on line 441 
```

要解决此问题（以便我可以更新订单），我手动编辑表格`sales_flat_order_item` 并从订单中清空`parent_item_id`有问题。

这个临时修复......我希望它可以帮助一些人......

# android - 当文本超过一行时包装 TextView

> ID：13722450
> 
> 赞同：1
> 
> 时间：2012-12-05T11:39:52.583
> 
> 标签：android, xml, android-layout, layout, layout-gravity

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal"
   android:gravity="center"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">

<ProgressBar android:id="@+android:id/progress_small"
    style="?android:attr/progressBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:textSize="15sp"
   android:gravity="center"
   android:text="LOREM IPSUM BAB BABALOREM IPSUM BAB BABALOREM"
   />

</LinearLayout> 
```

![在此处输入图像描述](../Images/e5f47024538e469b449cbf4f410a95d9.png)

如何消除 Lorem 的 L 和进度条之间的差距？我希望文本仅居中对齐。

textview 宽度是换行内容。但是两边都有差距。如何摆脱它？

我也不希望单行它。因为我不想错过它显示的任何单词。

我也不想让它左对齐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:41:54.317

在您的 textView 中进行此更改::

```
<TextView android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="15sp"
          android:gravity="center"
          android:singleLine="True"  
          android:text="LOREM IPSUM BAB BABALOREM IPSUM BAB BABALOREM"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:56:10.043

尝试

```
android:gravity="center|left" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:05:37.443

```
style="?android:attr/progressBarStyleSmall"
android:layout_width="0dp"
android:layout_weight="1" 
```

将 progressBar 的权重设置为 1 并将宽度设置为 0dp 您可以获得所需的结果，但不能保证它适用于所有屏幕尺寸

编辑：

通过上述更改，我能够获得所需的输出。

![上述变化的结果](../Images/f4412c00924ad2ed62a249204be6f602.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:45:32.430

尝试使用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:gravity="center"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<ProgressBar android:id="@+id/ProgressDisplay"
style="?android:attr/progressBarStyleSmall"
android:layout_width="wrap_content"
android:layout_height="wrap_content" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/ProgressDisplay"
    android:gravity="left"
    android:text="LOREM IPSUM BAB BABALOREM IPSUM BAB BABALOREM"
    android:textSize="15sp" />

</RelativeLayout> 
```

# debugging - 如何捕获gdb中函数返回的随机值

> ID：13722451
> 
> 赞同：0
> 
> 时间：2012-12-05T11:40:07.800
> 
> 标签：debugging, gdb

在 C 中，如果您有一个返回“始终”相同结果的函数，您可以执行以下操作：

```
(gdb) p foo() 
```

但是如果这个函数总是返回一个随机结果，如何在不使用变量的情况下打印那个值。其他细节，如果你没有函数的调试信息，它来自一个剥离的库。

`(gdb) p myRandom()`不能使用，它会导致与应用程序使用的值不同的东西。

您可能会问：“为什么要使用随机函数而不使用其结果”，可以说返回只是该函数所做的额外事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:05:37.403

> (gdb) p myRandom()
> 不能使用，它会导致与应用程序使用的值不同的东西。

大概您想在应用程序调用的特定位置检查返回给应用程序的值`myRandom()`。

您需要在紧跟在 之后的指令上设置断点`CALL`，然后检查返回值的寄存器。例如， on `i*86`，值在`eax`寄存器中返回，所以你会做`print $eax`.

或者，在 上设置断点`myRandom()`，然后执行`finish`命令（您不需要调试信息来执行此操作），然后检查返回寄存器。

# asp.net - MVC4实体框架和种子混淆

> ID：13722453
> 
> 赞同：0
> 
> 时间：2012-12-05T11:40:15.433
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我希望有人可以帮助我，我创建了一个 Code First EF MVC4 项目。有了这个，我使用了 Seed 方法和使用 DropCreateDatabaseAlways 的 DbInitializer 将数据插入到数据库中。然而，根据 Asp.Net 网站，您必须在发布时删除所有为数据库提供种子的代码。

我的问题是，如果我不能使用 Seed 方法而不每次都添加它，即一次性添加，我该如何将数据添加到数据库中（通过与 Seed 方法中相同的过程）。除了通过 Database Explorer 或 SQL Server Management Studio 添加到数据库之外，我别无选择？

另外是否值得创建第二个 DbInitializer 以便我有一个用于测试和一个用于发布，因为我不想删除所有种子代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:30:39.990

我们的方法是将您的开发环境连接到空的实时数据库，运行 create 和 seed 方法，然后编辑您的代码以删除它们，然后再推送到应用服务器，并适当地减少数据库权限。

如果您不能这样做，因为您的 DBA 不允许这样做，另一种方法是在开发服务器上创建一个完整的原始数据库，其中包含种子数据，然后让 DBA 备份并将数据库恢复到实时环境。

本质上，是的，将创建和种子代码留在您的实时应用程序中并不是一个好主意，但仍有一些方法可以使用代码优先方法来制作和种子您的实时数据库。

我也会考虑使用迁移。这些提供与代码优先方法相同的所有功能，但具有更精细的控制和更少的权限要求。

# winforms - 在桌面应用程序中存储和编辑应用程序、用户和自定义设置

> ID：13722464
> 
> 赞同：7
> 
> 时间：2012-12-05T11:40:38.767
> 
> 标签：winforms, app-config, application-settings, settings.settings, settings

我正在构建一个新版本的 Windows 窗体应用程序，该应用程序正在安装在各种不同的 pc 上。该应用程序正在由技术人员安装，他们在安装过程中配置不同的应用程序、用户和其他设置。到目前为止，我一直将这些设置存储在注册表中，并且在每次启动应用程序时，它都会读取注册表以获取不同的值。如果我们需要更改注册表中的任何设置，我们可以直接在 reg（经验丰富的技术人员）中或通过重新安装（新手技术人员）应用程序来进行。

当我现在正在构建一个新版本时，我想知道处理这些类型设置的最佳实践是什么。我想将它从注册表中移出并移到某种 og 设置、资源、xml 文件中，我可以在安装过程中直接操作，然后也可以在应用程序中/或通过为技术人员设计的帮助应用程序进行操作。

那么，为 Windows 窗体应用程序存储和编辑应用程序和用户特定设置的首选方式是什么？

Applicin 是一个 Win 32 位 VB.Net 桌面表单应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:44:46.317

就个人而言，我会使用后端。创建一个用户表并存储您想要的任何首选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:12:11.187

我想下面的问题与您正在寻找的问题相似。

[在 .NET Winforms 应用程序中保存设置](https://stackoverflow.com/questions/3032492/save-settings-in-a-net-winforms-application)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:34:30.340

> 那么，为 > windows 窗体应用程序存储和编辑应用程序和用户特定设置的首选方式是什么？

存储和编辑 .NET 应用程序的应用程序和用户特定设置的首选方法是使用 .NET 内置配置支持 - 位于 System.Configuration 命名空间中的类和接口。您可以使用自定义操作（安装程序类）对内置 .NET 安装项目做任何您想做的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:06:40.163

拥有用户设置的最佳方式是**XML**。Visual Studio 安装程序（安装项目）对此类操作的选项有限。如果您使用 install shield 那么您可能有更多权限从 xml 文件中获取设置。

# apache - 多语言环境的 apache 重定向

> ID：13722466
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:40:43.147
> 
> 标签：apache, mod-rewrite, mod-jk

我们是多语言环境站点，并且都使用相同的 js 和 css。

那么如何将所有 JS、CSS 文件重定向到同一个文件夹。

我的网址就像

```
server.com/uk/_ui/folder/1.js  
server.com/uk/_ui/folder2/1.js
server.com/fr/_ui/folder/1.js  
server.com/fr/_ui/folder2/1.js 
```

我如何编写重定向规则，以便如果 url 包含 _ui 检查 docroot 排除国家标签（fr，uk）

我的虚拟主机是

```
<VirtualHost *:80>  
ServerName server1.com  
AliasMatch ^/[a-z]+/_ui/(.*)$ /var/www/html/$1  
JkMount /jkstatus status  
JkMount /* loadbalancer  
JkUnMount /*/_ui/* loadbalancer  
</VirtualHost> 
```

提前致谢

斯里尼瓦斯 A.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:35:48.223

[AliasMatch](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#aliasmatch)完全符合您的要求。它将基于正则表达式的目录映射到文件系统上的不同文件夹。

```
AliasMatch ^/[a-z]+/_ui/(.*)$ /full/path/to/your/docroot/$1 
```

这比进行重定向要好得多，因为它只涉及来自服务器的单个请求。

# redis - 获取 Redis 中列条目的总和

> ID：13722469
> 
> 赞同：1
> 
> 时间：2012-12-05T11:40:52.680
> 
> 标签：redis, servicestack

我们如何获得 NO-SQL 数据库 Redis 中列条目的总和？

我的意思类似于：

```
 Select sum(salary) from Account; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:01:35.400

简短的回答是，你不能。这并不是 redis 的本意。稍长一点的答案是，您可以使用 redis lua 脚本和[EVAL](http://redis.io/commands/eval)命令来完成此操作。

使用 redis 列表，例如：

```
LPUSH mylist 1 2 3 4 5 6 7 
```

还有一个脚本*sum.lua*：

```
local list = redis.call('lrange', KEYS[1], 0, -1)
local sum = 0
for i, val in ipairs(list) do
  sum = sum + val
end

return sum 
```

您可以从命令行调用它，如下所示：

```
$ redis-cli EVAL "$(cat sum.lua)" 1 mylist
(integer) 28 
```

**编辑：**第三个答案是@DidierSpezia 的评论，关于在排列数据时计算它。通常在使用 redis 时，您将根据您想要查询的方式来构造数据，而不是相反。也许你会做类似的事情：

```
# Paying out salary
redis> LPUSH employee:17:salaries 10000
redis> HINCRBY total_salaries 17 10000

# Fetching total salary to employee 17

redis> HGET total_salaries 17
"10000" 
```

# actionscript-3 - 从 ActionScript 类查询 httpservice

> ID：13722471
> 
> 赞同：1
> 
> 时间：2012-12-05T11:40:52.557
> 
> 标签：actionscript-3, apache-flex, mxml

我正在尝试将我的 httpservice（在 AS 类中定义）的结果返回到我的 mxml 应用程序。当我将所有内容都放在主 mxml 中时，代码本身工作正常，但我似乎无法从我的 AS 类中让它工作。

当我在获取 httpresult (myWatchedList = new XMLListCollection(myData.movi​​e);) 的行上放置断点时，我可以确认 myWatchedList 具有所需的值。但是，当我调用 getWatchedList() 方法时，myWatchedList 始终为空。

我确定我在这里遗漏了一些非常明显的东西......

我的 AS 课：

```
package components
{

import mx.collections.XMLListCollection;
import mx.rpc.events.ResultEvent;
import mx.rpc.http.HTTPService;

public class WatchList
{
    [Bindable]
    public var myToWatchList:XMLListCollection;
    public var myWatchedList:XMLListCollection;

    public function WatchList()
    {
        //httpservice for watched movies
        var watchedList_service:HTTPService = new HTTPService();
        watchedList_service.url= "http://*****/phpscripts/selectWatchedlist.php";
        watchedList_service.showBusyCursor=true;
        watchedList_service.resultFormat="e4x";
        watchedList_service.method="POST";  

        //httpservice for not yet watched movies
        var toWatchList_service:HTTPService = new HTTPService();
        toWatchList_service.url= "http://*****/phpscripts/selectToWatchlist.php";
        toWatchList_service.showBusyCursor=true;
        toWatchList_service.resultFormat="e4x";
        toWatchList_service.method="POST";

        //listen for result
        watchedList_service.addEventListener(ResultEvent.RESULT, watchedList_result);
        toWatchList_service.addEventListener(ResultEvent.RESULT, toWatchList_result);

        //send request to httpservice
        toWatchList_service.send();
        watchedList_service.send();     

    }

    public function toWatchList_result(event:ResultEvent):void
    {
        //result is xml
        var myData:XML = XML(event.result);
        myWatchedList = new XMLListCollection(myData.movie);
    }

    public function watchedList_result(event:ResultEvent):void
    {
        var myData:XML = XML(event.result);
        myToWatchList = new XMLListCollection(myData.movie);
    }

    public function getWatchedList():XMLListCollection {
        return this.myWatchedList;
    }

    public function getToWatchList():XMLListCollection {
        return this.myToWatchList;
    }
}
} 
```

mxml中的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
           xmlns:components="components.*"
           initialize="doSend()">
<s:layout>
    <s:VerticalLayout paddingBottom="20" paddingLeft="20"
                      paddingRight="20" paddingTop="20"/>
</s:layout>
<fx:Script> 
    <![CDATA[
        import components.WatchList;
        import mx.collections.XMLListCollection;

        [Bindable]
        private var myToWatchList:XMLListCollection;
        private var myWatchedList:XMLListCollection;
        private var watchList:components.WatchList;
        protected function doSend():void 
        {
            watchList= new components.WatchList();
            //fetch the watchlists
            myToWatchList = watchList.getToWatchList();
            myWatchedList = watchList.getWatchedList();

            //bind the watchlists to the tilelist
            myToWatchList_tile.dataProvider = myToWatchList;
            myWatchedList_tile.dataProvider = myWatchedList;
        }

    ]]>

</fx:Script>
<fx:Declarations>
</fx:Declarations>
<s:Panel id="panel"  width="100%" height="100%" title="Watchlist">
    <s:layout>
        <s:VerticalLayout paddingBottom="5" paddingLeft="20"
                          paddingRight="20" paddingTop="5"/>
    </s:layout>
    <s:Label width="20%" fontSize="17" fontWeight="bold" text="Your watched movies"/>
    <mx:TileList id="myWatchedList_tile" height="360" borderVisible="false"
                 columnCount="6" columnWidth="200"
                 itemRenderer="components.TileListItemRenderer" rowCount="1" rowHeight="360"/>
    <s:Label width="20%" fontSize="17" fontWeight="bold" text="Your to watch movies"/>
    <mx:TileList id="myToWatchList_tile"  height="360" borderVisible="false" 
                 columnCount="6" columnWidth="200"
                 itemRenderer="components.TileListItemRenderer" rowCount="1" rowHeight="360" />

</s:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:53:07.283

首先，您在发出请求的地方调用构造函数：

```
watchList= new components.WatchList(); 
```

之后立即调用结果：

```
myToWatchList = watchList.getToWatchList(); 
```

...您应该等到请求完成，例如：获取结果时抛出一个事件，并创建一个等待事件的处理程序

# ruby-on-rails - Rails 回形针 gem - 从私人文件夹中获取文件

> ID：13722472
> 
> 赞同：3
> 
> 时间：2012-12-05T11:40:53.977
> 
> 标签：ruby-on-rails, download, paperclip, private

我正在使用回形针将文件上传到我的服务器。如果我不指定路径，回形针将文件保存到公用文件夹，然后我可以通过`<%= @user.file.url %>`在视图中访问来下载它。但是，如果我指定非公共文件夹的路径，显然不可能从视图中获取文件。

我想知道一些从网络和 ruby​​ 脚本下载私人文件夹中保存文件的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:09:01.933

我们需要做的第一件事是向 routes.rb 添加路由以访问文件。

编辑 routes.rb 并以粗体添加 :member 参数：

资源 :users, **:member => { :avatars => :get }**

现在要获取用户 7 的头像，例如，我们可以发出这样的 URL：

```
 localhost:3000/users/7/avatars 
```

…并且请求将被路由到控制器`avatars`中的操作`users`（复数，因为用户可能拥有不止一种风格的头像）。

所以现在让我们继续实现 avatars 方法并添加一些代码以将文件下载到客户端。这样做的方法是使用[ActionController::Streaming::send_file](http://api.rubyonrails.org/classes/ActionController/Streaming.html)。这很简单；我们只需要将文件的路径传递给 send_file 以及客户端使用的 MIME 内容类型作为决定如何显示文件的线索，就是这样！让我们对这些值进行硬编码以便更好地理解（在此处为您的机器更新路径）：

```
 class UsersController < ApplicationController
      def avatars
       send_file '/path/to/non-public/system/avatars/7/original/mickey-mouse.jpg',
       :type => 'image/jpeg'
      end
    end 
```

现在，如果您`localhost:3000/users/7/avatars`在浏览器中输入内容，您应该会看到米奇图像。

我们显然需要能够处理对任何用户记录的任何头像文件附件的请求，而不是在 avatars 方法中硬编码路径。为此，请配置 Paperclip 并告诉它文件现在存储在文件系统的哪个位置，以及我们配置了要使用的 routes.rb 文件的 URL。

为此，我们需要在用户模型（user.rb）中对 has_attached_file 的调用中添加几个参数，

```
 has_attached_file :avatar,
    :styles => { :thumb => "75x75>", :small => "150x150>" },
    :path => 
    ':rails_root/non-public/system/:attachment/:id/:style/:basename.:extension',
    :url => '/:class/:id/:attachment' 
```

但是现在我们可以在 UserController 中泛化我们的代码来处理任何用户，就像这样：

```
 def avatars
      user = User.find(params[:id])
      send_file user.avatar.path, :type => user.avatar_content_type
    end 
```

现在我们可以`localhost:3000/users/7/avatars`再次测试以确保我们没有破坏任何东西。

干杯!

# javascript - 在 window.onresize 中调用一个函数。（范围）

> ID：13722473
> 
> 赞同：0
> 
> 时间：2012-12-05T11:40:55.223
> 
> 标签：javascript, oop

我有一个构造函数对象。在这个构造函数里面我有两个函数。一种称为**window.onresize**，另一种称为**onBrowserResize**。现在我想在**window.onresize**函数中调用**onBrowserResize 。**我该怎么做呢？

 **```
function MyObject() {
    window.onresize = function(event) {
        this.onBrowserResize();
    }

    this.onBrowserResize = function() {
    }
} 
```

我想让函数公开，所以我可以这样称呼它：`object.onBrowserResize();`

如果我像这样将函数设为私有：`var onBrowserResize = function()`那么我无法在范围之外访问它。

有人知道怎么做吗？我可能只是对对象的范围有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:00:00.917

在 JavaScript 中， 的值`this`取决于函数的调用方式。有关详细信息，请参阅[MDN 文章`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

您的问题缺少一些细节。我的回答是假设你有这样的事情：

```
var MyObj = function() {
    window.onresize = function(event) {
        this.onBrowserResize();
    }

    this.onBrowserResize = function() {}
} 
```

这是这样的实例：

```
var myObj = new MyObj(); 
```

以下是实现这一目标的一些方法。

**1\. 只需将 this.onBrowserResize**作为事件处理程序传递（最简单的方法，如果您的所有 onresize 处理程序都是调用`onBrowserResize`）：

```
var MyObj = function() {
    window.onresize = this.onBrowserResize;
    this.onBrowserResize = function() {
        // caution: "this" here won't be your object.
        // use option 3 below if you need this to be your object
    }
} 
```

**2.缓存对本地的引用`this`**：

```
var MyObj = function() {
    var that = this;
    window.onresize = function(event) {
        that.onBrowserResize();
    }

    this.onBrowserResize = function() {}
} 
```

**3\. 固定`this`with[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)**的值：

```
var MyObj = function() {
    window.onresize = this.onBrowserResize.bind(this);

    this.onBrowserResize = function() {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:43:18.593

```
//Constructor Object
function MyObject(){

};

MyObject.prototype.onWindowResize = function(){
  this.onBrowserResize();
}

MyObject.prototype.onBrowserResize = function(){

}

   //Implementation
   var myObject = new MyObject();
   myObject.onWindowResize();
   myObject.onBrowserResize(); 
```**

# crash - 如何在 Windows 7、2008 中获取内存使用的阈值限制

> ID：13722474
> 
> 赞同：2
> 
> 时间：2012-12-05T11:40:56.557
> 
> 标签：crash, operating-system, threshold

一旦有可能发生应用程序崩溃/挂起/Windows崩溃，我需要开始记录某些繁重应用程序、Windows事件、任务、服务和硬件信息等的详细信息。在这种情况下，我想从 Windows API 获取数据，以便给我应用程序可以接收的通知或警报，以了解操作系统将由于某些参数而变得不稳定。

例如 1\. 由于物理和虚拟内存不可用，操作系统可能会瘫痪。2.写入的内存具有传染性，并且看起来非常碎片化，可能会导致一些内存处理问题。3\. 任何其他内存处理问题。

Windows 是否支持获取有关不稳定应用程序/操作系统状况的此类通知或信息？

注意：我所指的应用程序适用于 .Net framework 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:07:54.563

You would have to use a memory performance counter. Such as one found on TechNet. [http://technet.microsoft.com/en-us/library/cc768048.aspx](http://technet.microsoft.com/en-us/library/cc768048.aspx)

# java - 自定义摆动组件的图像缓冲区？

> ID：13722480
> 
> 赞同：2
> 
> 时间：2012-12-05T11:41:37.327
> 
> 标签：java, image, swing, buffer

我应该自己实现`Image`后台缓冲区还是已经制作了激活后台缓冲区的组件或选项？

我的目标是在窗口移动和隐藏/显示时保留图纸......

**更新**

我曾尝试使用 JPanel，因此我认为如果它有缓冲区，它应该可以工作，但失败了：

```
final JPanel panel = new JPanel();

            panel.addMouseListener(new MouseListener() {

                @Override
                public void mouseReleased(MouseEvent e) {
                }

                @Override
                public void mousePressed(MouseEvent e) {
                }

                @Override
                public void mouseExited(MouseEvent e) {
                }

                @Override
                public void mouseEntered(MouseEvent e) {
                }

                @Override
                public void mouseClicked(MouseEvent e) {
                    Graphics2D g2d = (Graphics2D) panel.getGraphics();
                    g2d.drawOval(e.getX()-50, e.getY()-50, 100, 100);
                }
            });

            JFrame frame = new JFrame("JPanel Buffer Test");
            frame.add(panel, BorderLayout.CENTER);
            frame.pack();
            frame.setBounds(100,100, 800, 600);
            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            frame.setVisible(true); 
```

这里的圆圈是在鼠标点击时绘制的，但如果窗口调整大小就会消失。因此，显然不存在缓冲区。

如果组件有缓冲区，我将能够在其上绘制一些东西，并且它会在调整大小时持续存在。

可能有一些方法可以访问`JPanel`的缓冲区，除此之外`getGraphics`？

**更新 2**

下面是我手动缓冲的方法。我的问题是它不是已经在图书馆完成了吗？示例在调整大小时重新采样缓冲区，这不是强制性的。

```
 private BufferedImage bufferedImage = null;

@Override
protected void paintComponent(Graphics g) {
    if( bufferedImage != null ) {
        g.drawImage(bufferedImage, 0, 0, null);
    }
}

@Override
public void setBounds(int x, int y, int width, int height) {

    if( bufferedImage == null ) {
        bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    }
    else {
        if( bufferedImage.getWidth() != width || bufferedImage.getHeight() != height ) {
            BufferedImage scaledImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);

            AffineTransform at = new AffineTransform();
            at.scale((double)width/bufferedImage.getWidth(), (double)height/bufferedImage.getHeight());

            AffineTransformOp scaleOp = 
                   new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);

            bufferedImage = scaleOp.filter(bufferedImage, scaledImage);
        }
    }
    super.setBounds(x, y, width, height);
}

public Graphics2D createImageGraphics() {
    if( bufferedImage != null ) {
        return bufferedImage.createGraphics();
    }
    else {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:09:50.823

您只需要一个`JPanel`，默认情况下它会自动被*双缓冲*（请参阅[此处](http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html)了解更多信息），您可以简单地覆盖`paintComponent(..)`并在那里进行所有绘图，然后`JPanel`将`JFrame`.

在这里查看更多信息：

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

你可能还想完全控制你的重绘周期`JPanel`，这可以通过调用来完成`setIgnoreRepaint(true)`。

或者，您可能想查看[BufferStrategy 和 BufferCapabilities](http://docs.oracle.com/javase/tutorial/extra/fullscreen/bufferstrategy.html)（这将允许您使用一些高级功能，但对于所有密集目的`JPanel`，具有覆盖`paintComponent`和自动*双缓冲*并且`setIgnoreRepaint(true)`是等效的），这通常是用`Canvas`这样的方式实现的：

```
BufferStrategy myStrategy;

while (!done) {
    Graphics g = myStrategy.getDrawGraphics();
    render(g);//draw the frame/graphics
    g.dispose();
    myStrategy.show();
} 
```

# java - 覆盖java中的构造函数

> ID：13722488
> 
> 赞同：2
> 
> 时间：2012-12-05T11:42:04.333
> 
> 标签：java, swing, constructor

你好，我有一个类在 Java 中画了一颗星，它就像一个魅力。在此之后，我扩展了 Star 类以创建另一个具有扩展可能性的星星（在这种情况下，颜色必须不同）

出于某种原因，当我调用类并使用构造函数提供参数时，我的面板中只有子类颜色似乎有效。

这是我的代码

```
 public class Star {

    protected int radius;
    protected int xmiddelpunt;
    protected int ymiddelpunt;
    protected static Color color;

    public Star(int radius, int x, int y, Color color) {
        xmiddelpunt = x;
        ymiddelpunt = y;
        this.radius = radius;

        this.color = color;
    }

} 
```

和扩展类

```
 public class StarRed extends Star {

    protected int x, y;
    protected static Color color;

    Random red = new Random();

    public StarRed(int radius, int x, int y, Color color) {
        super(radius, x, y, color);

        this.radius = radius;
        this.x = x;
        this.y = y;
        this.color = color;
    }
} 
```

我的面板类的构造函数如下：

```
 ArrayList<Star> stars = new ArrayList<Star>();
ArrayList<StarRed> rs = new ArrayList<StarRed>();

public HeavenPanel() {

    setBackground(Color.blue); // geef het paneel een blauwe kleur

    this.addMouseWheelListener(this); // set de mouselistener

    for(int i = 0; i < 10; i++) {
        stars.add(new Star (r.nextInt(30 + 50), r.nextInt(10 + 701), r.nextInt(10 + 701), Color.yellow));
    }

    for(int k = 0; k < 10; k++) {
        rs.add(new StarRed(40, r.nextInt(30 + 50), r.nextInt(30 + 50), Color.red));
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T11:47:07.830

第一个问题：

```
protected static Color color; 
```

这意味着该字段（您有两个......）在整个类型中共享。我原以为这是一个*实例*字段，所以不同的星星可以是不同的颜色。相反，所有星星都是相同的颜色，除非你有一些`StarRed`使用该`color`字段的代码，在这种情况下你可能有*两种*颜色的星星......但它仍然不正确。

第二个问题：您的类为、和`StarRed`声明了自己的字段，尽管它们也在超类中声明。然后，您将设置超类字段的值，尽管已经在超类构造函数中设置了该值。`x``y``color``radius`

基本上，目前这一切都有些混乱。您应该弄清楚哪些信息与类型相关联，而不是任何特定实例（在这种情况下应该是静态字段）以及哪些信息与各个实例相关联（在这种情况下应该是实例字段）。您几乎*不*应该在子类和超类中使用相同的字段名称 - 我个人建议将所有字段设为私有（可能除了常量）。

最后，为什么`StarRed`构造函数要使用 a`Color`呢？它不应该一直是红色的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T11:46:41.133

您正在覆盖静态变量颜色。

static 关键字意味着类的所有实例都具有相同的颜色。

所以父母和孩子指的是同一个静态变量。

因此，由于您稍后设置子颜色，因此只有子颜色有效。

更改代码并删除静态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:06:59.500

正如其他答案所说，首先从`public static Color color`. 此外，您不需要重新声明类`Star`中的字段`StarRed`。从您的`Random red = new Random()`陈述中，我假设您想要进行一些计算`StarRed`以确定红色的色调，因此您添加了另一个受保护的 Star 构造函数，它省略了设置颜色。您将其用于`StarRed`. 的公共构造函数也`Star`将使用它，但另外设置了星星的颜色。

您的代码如下所示：

```
public class Star {

    protected int radius;
    protected int xmiddelpunt;
    protected int ymiddelpunt;
    protected Color color;

    public Star(int radius, int x, int y, Color color) {         
        this(x,y,radius)
        this.color = color;
    }

    protected Star(int radius, int x, int y) {
        xmiddelpunt = x;
        ymiddelpunt = y;
        this.radius = radius;

        this.color = color;
    }

} 
```

和扩展类

```
public class StarRed extends Star {

    Random red = new Random();

    // Overrides Star constructor
    public StarRed(int radius, int x, int y, Color color) {
        super(radius, x, y); // Call protected superconstructor (radius, x,y)
        // Now we set the color, so the star is red (example code!)
        this.color = Color.RED;
        // You can still use color e.g. to define blue and green components of this.color

    }
} 
```

顺便说一句：如果你例如从 StarRed 构造函数中删除颜色变量，那么你只会*重载*`Star`构造函数。

我希望它有帮助:)

# java - 获取维基百科类别链接

> ID：13722492
> 
> 赞同：0
> 
> 时间：2012-12-05T11:42:10.917
> 
> 标签：java, jquery, wikipedia, jodd

我想要做的是获取分配给某个维基百科文章的类别和分配类别的 href 值。

*例子：*

> 鉴于[这篇文章](http://en.wikipedia.org/wiki/Toast)：
> 
> “面包”和“早餐食品”是类别名称，“http://en.wikipedia.org/wiki/Category:Breads”和“http://en.wikipedia.org/wiki/Category:Breakfast_foods”是类别名称类别链接

我正在使用 Jodd 库中的“Jerry”在 Java 中执行此操作，以便在 Java 中使用 JQuery。

到目前为止，我已经使用以下代码来获取类别名称：

```
File file = new File(SystemUtil.getTempDir(), "temp");
NetUtil.downloadFile(url, file);
Jerry doc = Jerry.jerry(FileUtil.readString(file));
String category=doc.$("div#mw-normal-catlinks").text(); 
```

它返回 catlinks div 内的纯文本。由于这个 div 包含一个 ul，其中的 li 元素代表一个类别，因此迭代 list-item-elements 以获取类别名称和链接似乎更复杂。

为此，我尝试了以下方法：

```
doc.$("div#mw-normal-catlinks").children().each(new CategoryFinder()); 
```

这里的想法是使用[JerryFunction](http://jodd.org/api/jodd/jerry/JerryFunction.html)对象来获取每个孩子的名称和链接（每个都需要一个 JerryFunction 作为参数）。您可能会注意到，我在 div 而不是 ul 元素上调用 children() - 这是因为缺乏如何做到这一点的线索。

我怎样才能使这种方法起作用？另外，还有其他方法可以获取类别名称和链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:57:27.597

您可能应该使用 Wikipedia API，但无论如何，这里是 Jodd Jerry 的方法：

```
 File file = FileUtil.createTempFile();
    NetUtil.downloadFile("http://en.wikipedia.org/wiki/Toast", file);
    Jerry doc = Jerry.jerry(FileUtil.readString(file));
    Jerry category = doc.$("div#mw-normal-catlinks");
    category.$("ul li").each(
        new JerryFunction() {
            public boolean onNode(Jerry $this, int index) {
                System.out.println($this.text());
                return true;
            }
        }); 
```

这将打印出：

```
Breads
Breakfast foods 
```

# java - 如何在Spring ibatis的DAO类中编写事务

> ID：13722495
> 
> 赞同：0
> 
> 时间：2012-12-05T11:42:18.170
> 
> 标签：java, mysql, performance, ibatis

如何在 Spring Ibatis DAO 实现类中编写事务。

我正在使用以下代码进行批量更新。但是更新 200 条记录需要 10 多秒。当我在谷歌中搜索时，我发现如果我们在此批量更新中实现事务，它会更快地工作。

我的批量更新代码是这样的（在SensorValueLastBeanDAOImpl类中）

```
public int processBatchUpdate(
        final List<SensorValueLastBean> sensorValueLast) {

    Integer updateCount = 0;
    try {

        updateCount = (Integer) getSqlMapClientTemplate().execute(
                new SqlMapClientCallback<Object>() {
                    public Object doInSqlMapClient(SqlMapExecutor executor)
                            throws SQLException {                                           
                        executor.startBatch();
                        Iterator<SensorValueLastBean> iter = sensorValueLast
                                .iterator();
                        while (iter.hasNext()) {
                            executor.update(
                                    "sensor_values_last.ibatorgenerated_updateByPrimaryKeySelective",
                                    iter.next());
                        }
                                                                                    executor.executeBatch();
                        return new Integer(executor.executeBatch());

                    }
                });
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

当我在此函数中使用 getSqlMapClient().startTransaction() 时，它显示如下错误

> java.lang.NullPointerException 在 com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.startTransaction(SqlMapExecutorDelegate.java:684)
> 在 com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.startTransaction(SqlMapSessionImpl.java:164)
> 在 com. ibatis.sqlmap.engine.impl.SqlMapClientImpl.startTransaction(SqlMapClientImpl.java:140)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:45:53.837

出现第二个错误是因为没有ibatis的事务管理器。您可以进行如下配置。

```
<!DOCTYPE sqlMapConfig
PUBLIC "-//ibatis.apache.org//DTD SQL Map Config 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-config-2.dtd">

<sqlMapConfig>
  <settings useStatementNamespaces="true"/>
    <transactionManager type="JDBC">
      <dataSource type="SIMPLE">
      <property name="JDBC.Driver" value="com.mysql.jdbc.Driver"/>
      <property name="JDBC.ConnectionURL"
      value="jdbc:mysql://localhost:3306/mydb"/>
      <property name="JDBC.Username" value="root"/>
      <property name="JDBC.Password" value="root"/>
    </dataSource>
 </transactionManager>
<sqlMap resource="Contact.xml"/> 
```

# javascript - 如何用js获取字符串前面的数字？

> ID：13722496
> 
> 赞同：0
> 
> 时间：2012-12-05T11:42:20.730
> 
> 标签：javascript

我需要有关 javascript 函数的帮助。

我有这样的字符串：`124text`或`12hello`

我需要一个实现以下功能的功能：

```
foo('124text') -> 123 
```

和

```
foo('12hello') -> 12 
```

换句话说：我给它一个输入字符串，函数返回一个整数，它是这个字符串前面的数字

如何用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:45:00.240

`parseInt`会这样做

```
parseInt('123abc',10) //returns 123 as a number 
```

现场示例：http: [//jsfiddle.net/eAe4v/](http://jsfiddle.net/eAe4v/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:43:31.837

这是[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)的一个简单应用：

```
var str, num;
str = "124text";
num = str.replace(/\D/g, ''); 
```

或者，如果字符串后面可能有您不想要的其他数字：

```
var str, num, m;
str = "124text";
m = /^(\d+)/.exec(str);
if (m) {
    num = m[1];
} 
```

在这两种情况下，`num`上面仍然是一个字符串（只是一个只有数字的字符串）。如果`num = parseInt(num, 10)`要将其解析为 base-10（十进制）字符串，请使用。

# css - 如何使 div 的高度适应其中的绝对 div 的高度？

> ID：13722498
> 
> 赞同：1
> 
> 时间：2012-12-05T11:42:23.440
> 
> 标签：css, height, css-position

我最近在这些 div 上苦苦挣扎。例如，看看下面的这段代码：

```
<div class="container">
{
    width: auto;
    height: auto;
}
    <div class="content">
    {
        width: auto;
        height: auto;
    }
        <div class="upload">
        {
            width: 400px;
            margin-left: 600px;
            position: absolute;
        }
        </div>
    </div>

    <div class="footer>

    </div>
</div> 
```

首先是屏幕上实际内容的一小幅画（不能画得更好）：

```
--------------------------------------
|               CONTAINER            |
|   _____________________________    |
|   [       CONTENT   = = = =  =]    |
|   [                 = UPLOAD =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 =        =]    |
|   [                 = = = = = ]    |
|   [                           ]    |
|   [                           ]    |
|   [                           ]    |
|   [                           ]    |
|   [                           ]    |
|   [                           ]    |
|   [                           ]    |
|   [___________________________]    |
|   _____________________________    |
|   [          FOOTER           ]    |
|   [___________________________]    |
-------------------------------------- 
```

当类`upload`的高度变大时，由于绝对定位，它会漂浮在`container`和div 之外。`content`

我需要找到一种方法将 this`container`或`content`' 的大小调整为`upload`div。

当我像这样设置上传类的样式时：

```
position: relative;
float: right;
padding-right: 500px; 
```

它有效，但仅在此分辨率下有效。如果放大，此填充会弄乱`content`（左侧）和`upload`（右侧）。保持 margin-left 现在的样子是好的，因为`upload`div 剩下的东西在任何分辨率上都需要这个最小的空间。

所以任何人......有什么想法吗？

**编辑**

有那么一瞬间，我虽然拥有它。

如果你在我的例子中给出`upload`属性，问题`position: relative`是它将所有内容都推到了`upload`div 的内容中......

所以我替换了`.upload`with`position: relative;`并在里面的任何东西周围添加了一个新的 div `content`（除了`upload`当然）

```
.insidecontent
{
float: left;
position: absolute;
top: 170px;
} 
```

但是现在`content`高度等于 's 的高度，`upload`当它小于`content`'s 或`.insidecontent`'s 时，它会被切断。

很抱歉，我无法在 jsfiddle 中给出一个好的代码示例，它并没有真正显示我在网页上看到的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:36:16.497

您可以使用相对定位，这对您有很大帮助。使用以下详细信息更新您的代码

```
.upload{
    width: 25%;
    position: relative;
    top: -24%;
    left: 69%;    
} 
```

[示例代码](http://jsfiddle.net/yhsaA/)

# macos - 以编程方式更改 Mac 上的主显示器

> ID：13722508
> 
> 赞同：2
> 
> 时间：2012-12-05T11:42:52.240
> 
> 标签：macos, monitor

我想禁用 Mac 上的主显示器，然后以编程方式将辅助显示器更改为主显示器。关于我如何做到这一点的任何帮助？不知道从哪里开始我的研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:01:05.820

将辅助显示器更改为主屏幕非常简单。需要将原点 0,0 设置为使用`CGConfigureDisplayOrigin()`.

完整的样本可以在[这里找到](http://www.hamsoftengineering.com/codeSharing/hmscreens/hmscreens.html)

对于如何禁用显示器的问题，不幸的是我没有答案。我试图弄清楚它是如何完成的，因为有一些像`SwitchResX`这样的应用程序能够禁用显示器，所以它一定是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-05T17:02:22.820

hmscreens 很好用：

[http://www.hamsoftengineering.com/codeSharing/hmscreens/hmscreens.html](http://www.hamsoftengineering.com/codeSharing/hmscreens/hmscreens.html)

这是交换显示器的示例命令行：

```
hmscreens -setMainID `hmscreens -info | grep "Screen ID:" | head -2 | tail -1 | sed 's/[^0-9]*//g'` 
```

# asp.net-mvc - 使用 EF 4 为空的 ASP.NET MVC 4 项目引用的基本要素（程序集）

> ID：13722511
> 
> 赞同：0
> 
> 时间：2012-12-05T11:43:01.773
> 
> 标签：asp.net-mvc, entity-framework-4, asp.net-mvc-4, ado.net-entity-data-model

ASP.NET MVC 4 项目模板中有大量的 DLL 和 javascript 文件。向其中添加 EDM，您将获得更多。

其中哪些构成了需要 Entity Framework 4 生成的 EDM 的空 ASP.NET MVC 项目所需的最低要求？

我想删除无关的 DLL 引用和 javascript 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:21:31.943

摆脱不需要的东西的一种有用方法是打开 Nuget 包管理器屏幕，调出已安装包的列表，然后删除您不感兴趣的包。好处是您可以阅读在删除之前对您要删除的内容进行了很好的描述。

# php - iCalendar 不会发送更改的时间或接收与会者回复

> ID：13722514
> 
> 赞同：1
> 
> 时间：2012-12-05T11:43:05.783
> 
> 标签：php, email, icalendar

我正在尝试发送带有 RSVP 要求的 iCalendar 邀请，我已经让它发送格式正确的 icalendar，我可以选择一个响应（是，否，也许），问题是当它被发送时，它只是一封发给组织者地址的电子邮件，上面写着“我点击了‘选项’”，而不是作为回复被接收。

这对于在其日历视图中有与会者列表并显示其状态的 Outlook 来说尤其理想。

我还注意到，当组织者更改时间或日期时，这只是一个本地编辑（如果与会者尝试更改时间，提案不会发送给组织者），我不确定这是为什么，我m 使用以下格式：

```
BEGIN:VCALENDAR\n
PRODID:Microsoft CDO for Microsoft Exchange\n
VERSION:2.0\n
METHOD:REQUEST\n
BEGIN:VEVENT\n
DTSTART:" . $dtstart . "\n
DTEND:" . $dtend . "\n
LOCATION:" . $meeting_location . "\n
SUMMARY:" . $meeting_name . "\n
DESCRIPTION;ENCODING=quoted-printable:" . $meeting_description . "\n
PRIORITY:5\n
ORGANIZER;CN=\"" . $from_name . "\":MAILTO:" . $from_address . "\n
ATTENDEE;ROLE=CHAIR:MAILTO:" . $from_address . "\n
ATTENDEE;RSVP=TRUE;ROLE=REQ-PARTICIPATION:MAILTO:" . $email . "\n
UID:" . $dtstart . "-" . RAND() . "@domain.tld\n
END:VEVENT\n
END:VCALENDAR 
```

我正在使用 PHP 执行所有这些操作。

这`ATTENDEE;ROLE=CHAIR`条线路是作为一个测试来实施的，试图将组织者的更改发送给与会者，并且最初并不是日历主体的一部分。

# eclipse - Eclipse 代码编辑器配色方案

> ID：13722526
> 
> 赞同：0
> 
> 时间：2012-12-05T11:43:52.520
> 
> 标签：eclipse

是否有相当于[http://studiostyl.es/](http://studiostyl.es/)的 Eclipse或其他方式来设置代码编辑器配色方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:46:17.927

谷歌上的第一个答案：http: [//eclipsecolorthemes.org/](http://eclipsecolorthemes.org/)

所以我想答案是肯定的。

# c++ - 获取 stl 向量 C++ 的地址

> ID：13722527
> 
> 赞同：0
> 
> 时间：2012-12-05T11:43:57.903
> 
> 标签：c++, vector, casting

我正在尝试将地址分配`std::vector<char>`到 a`char*`并遇到一些问题。

**代码**：

```
void GGG:foo(std::vector<char>& MyVct)  
{  
      char* p = &MyVct[0];   
} 
```

但我没有得到地址。如何获取地址并将其转换为 char* ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:50:05.933

似乎您想要的是内部元素的地址，`MyVct`而不是向量本身。
您可以[`vector::data`](http://www.cplusplus.com/reference/vector/vector/data/)为此目的使用：

```
char* p = MyVct.data(); 
```

**编辑**：如果要修改向量的元素，则不必真正获取它的指针。您可以使用[std::vector](http://www.cplusplus.com/reference/vector/vector/)提供的可用接口。例如，不要这样做：

```
char *p = MyVct.data(); // or char *p = &MyVct[0];
*p = 'a'; 
```

只需这样做：

```
MyVct[0] = 'a'; // Use C++ way! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:49:52.563

`MyVct`假设有第一个元素，您的代码确实会获得第一个元素的地址。在 C++11 中，`std::vector`提供了`data`访问底层数据的成员函数：

```
char* p = MyVct.data(); 
```

如果你尝试用 打印这个地址`std::cout << p`，你会发现它会给你一些奇怪的输出。那是因为它期望 a`char*`是 C 风格的字符串。如果要打印地址，请执行以下操作：

```
std::cout << static_cast<void*>(p) << std::endl; 
```

如您所说，如果您只想修改向量中的数据，则只需执行以下操作，将第一个元素设置为`'a'`：

```
MyVct[0] = 'a'; 
```

相反，如果您想要 的地址，则`vector`需要：

```
std::vector<char>* p = &MyVct; 
```

# html - 选择框选项样式以删除边框

> ID：13722528
> 
> 赞同：0
> 
> 时间：2012-12-05T11:44:02.833
> 
> 标签：html, css

我正在尝试从选择框中的选项中删除边框，但放入`border:0px;`选项不起作用。选择元素本身在所有浏览器中看起来都一样，但是当单击打开时，下面的选项看起来带有边框，并且宽度和填充因浏览器而异。

有什么方法可以从选项中删除边框并使其在所有使用 CSS 的浏览器中看起来都一样？

谢谢

**HTML**

```
<div class="field_element">
   <select name="select_administrator">
    <option value="NO">NO</option>
    <option value="YES">YES</option>
   </select>
</div> 
```

**CSS**

```
.field_element select
{
    font-family: Arial,'DejaVu Sans','Liberation Sans',Freesans,sans-serif;
    font-size: 12px;
    color: #5d5d5d;
    outline: none;
    background-color: #ffffff;
    border: 1px solid #DDDDDD;
    padding: 3px;
    border-top-right-radius: 3px;
    -moz-border-radius-topright: 3px;
    -webkit-border-top-right-radius: 3px;
    border-top-left-radius: 3px;
    -moz-border-radius-topleft: 3px;
    -webkit-border-top-left-radius: 3px;
    border-bottom-right-radius: 3px;
    -moz-border-radius-bottomright: 3px;
    -webkit-border-bottom-right-radius: 3px;
    border-bottom-left-radius: 3px;
    -moz-border-radius-bottomleft: 3px;
    -webkit-border-bottom-left-radius: 3px;
}
.field_element option
{
    padding: 0px 3px 0px 3px;
} 
```

# xcode - UITableView 适用于 ios6 但不适用于 ios 5.1（数组计数问题）

> ID：13722531
> 
> 赞同：0
> 
> 时间：2012-12-05T11:44:14.797
> 
> 标签：xcode, uitableview, row

这是我填充 UITableView 的代码，非常非常简单：

文件.h

```
@interface ViewController: UIViewController {
    IBOutlet UITableView *table;
    NSMutableArray *array1;
    NSString *string1
} 
```

文件.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    array1 = [[NSMutableArray alloc] initWithObjects: @"1", @"2", @"3", @"4", nil];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return array1.count; // <------- here there is the problem with iOS 5.1, also [array1 count]
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 20;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                 UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];

    cell.textLabel.text = [NSString stringWithFormat:@" %@",[array1 objectAtIndex:indexPath.row]];
    cell.textLabel.font = [UIFont systemFontOfSize:13];
    cell.textLabel.textColor = [UIColor blackColor];

    return cell;
} 
```

好吧，在 iOS 6（模拟器和真实设备）中没关系， UITableView 加载并显示 array1 对象的所有行；在 iOS 5.1（模拟器和真实设备）中它不会崩溃，但 UITableView 是空的，没有显示行（附有页眉和页脚），我注意到这可能是 numberOfRowsInSection: array1.count 方法的问题，我认为iOS 5.1 它不能识别正确的行数。请问，编写与 iOS 5.1 和 iOS6 兼容的代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:03:12.990

填充 array1 后执行

```
[self.tableView reloadData]; 
```

因为我认为加载 tableview 时数据不可用。这在 iOS 5 和 6 之间可能有所不同。

# cakephp-2.1 - 如何在控制器中获取 book_id 值

> ID：13722532
> 
> 赞同：0
> 
> 时间：2012-12-05T11:44:20.787
> 
> 标签：cakephp-2.1

文件`add.tcp`

```
<?php echo $this->Form->input('Issue.book_id',array('label'=>false,'class'=>'','type'=>'text','div'=>false,'value'=>$book_id)); ?>
IssuesController.php
function add()
{
if($this->request->data)
{
$data = $this->Issue->find('first', array('conditions' => array('Issue.book_id' => $book_id)));
$this->set('data',$data);
} 
```

文件`return.ctp`：

```
<?php echo $this->Form->create('issue',array ('action'=>'add')); ?>
<div class="rows">
    <div class="cols col3">
    BOOK ID
    </div>
    <div class="cols col3">
    <?php echo $this->Form->input('Issue.book_id',array('label'=>false,'div'=>false,'error'=>false,'class'=>'c','type'=>'text','size'=>20)); ?>
    </div>
</div>
<br />
<?php echo $this->Form->submit('RETURN',array('class'=>'but')); ?>
<?php echo $this->Form->end(); ?>
<?php ?> 
```

如何在控制器中获取 book_id 值。实际上我从返回值传递值，我在 add.ctp 中获取该值，但在控制器中没有得到该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:46:53.153

在控制器中创建变量

```
 $a=$this->request->data('Issue.book_id');
 then use $this->set('bookid',$a); 
```

然后你可以在视图中使用它

# jquery - jQuery 表情符号脚本只找到第一次出现的笑脸

> ID：13722537
> 
> 赞同：1
> 
> 时间：2012-12-05T11:44:48.133
> 
> 标签：jquery, repeat, emoticons

我正在运行一个非常基本的 jQuery 表情符号脚本来将笑脸文本更改为图像。这很好用，但似乎只适用于第一次出现的笑脸。因此，如果我写了 2 个相同的笑脸，它只会将一个变成图像。

见小提琴：http: [//jsfiddle.net/t6vaH/](http://jsfiddle.net/t6vaH/)

这是JS

```
jQuery.fn.emoticons = function(icon_folder) {
/* emoticons is the folder where the emoticons are stored*/
var icon_folder = icon_folder || "../../../../images/forum/emoticons";
//var settings = jQuery.extend({emoticons: "emoticons"}, options);
/* keys are the emoticons
 * values are the ways of writing the emoticon
 *
 * for each emoticons should be an image with filename
 * 'face-emoticon.png'
 * so for example, if we want to add a cow emoticon
 * we add "cow" : Array("(C)") to emotes
 * and an image called 'face-cow.png' under the emoticons folder   
 */
var emotes = {"smile": Array(":-)",":)","=]","=)"),
              "sad": Array(":-(","=(",":[",":&lt;"),
              "wink": Array(";-)",";)",";]","*)"),
              "grin": Array(":D","=D","XD","BD","8D","xD"),
              "surprise": Array(":O","=O",":-O","=-O"),
              "devilish": Array("(6)"),
              "angel": Array("(A)"),
              "crying": Array(":'(",":'-("),
              "plain": Array(":|"),
              "smile-big": Array(":o)"),
              "glasses": Array("8)","8-)"),
              "kiss": Array("(K)",":-*"),
              "monkey": Array("(M)")};

/* Replaces all ocurrences of emoticons in the given html with images
 */
function emoticons(html){
    for(var emoticon in emotes){
        for(var i = 0; i < emotes[emoticon].length; i++){
            /* css class of images is emoticonimg for styling them*/
            html = html.replace(emotes[emoticon][i],"<img src=\""+icon_folder+"/face-"+emoticon+".png\" class=\"emoticonimg\" alt=\""+emotes[emoticon][i]+"\"/>","g");
        }
    }
    return html;
}
return this.each(function(){
    $(this).html(emoticons($(this).html()));
});
}; 
```

修复此功能以适用于每次出现的笑脸的最佳方法是什么，以便我可以重复它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:48:44.887

*Javascript 替换以仅替换第一次*出现的子字符串而闻名。您将需要使用正则表达式来实现您想要的。

```
var emotes = {
                "angel": Array(/\(A\)/g)
             }; 
```

正`g`则表达式选项中的 指定您要匹配模式的所有出现。

# java - 如何在 Java 中连接二维数组

> ID：13722538
> 
> 赞同：6
> 
> 时间：2012-12-05T11:44:48.877
> 
> 标签：java, arrays, concatenation

我有一种情况，我需要连接两个二维数组。

```
Object[][] getMergedResults() {
    Object[][] a1 = getDataFromSource1();
    Object[][] a2 = getDataFromSource2();
    // I can guarantee that the second dimension of a1 and a2 are the same
    // as I have some control over the two getDataFromSourceX() methods

    // concat the two arrays
    List<Object[]> result = new ArrayList<Object[]>();
    for(Object[] entry: a1) {
        result.add(entry);
    }
    for(Object[] entry: a2) {
        result.add(entry);
    }
    Object[][] resultType = {};

    return result.toArray(resultType);
} 
```

[我在这篇文章](https://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java)中查看了一维数组连接的解决方案，但无法使其适用于我的二维数组。

到目前为止，我想出的解决方案是遍历两个数组并将每个成员添加到 ArrayList，然后返回该数组列表的 toArray()。我确信一定有一个更简单的解决方案，但到目前为止还没有一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T11:58:25.623

你可以试试

```
Object[][] result = new Object[a1.length + a2.length][];

System.arraycopy(a1, 0, result, 0, a1.length);
System.arraycopy(a2, 0, result, a1.length, a2.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:51:32.163

您可以使用 Apache Commons Library - [ArrayUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#addAll-boolean:A-boolean...-)。仅更改第二维的索引并合并整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T01:29:50.610

这是我用于二维数组连接的方法。它部分使用了 Sergio Nakanishi 的答案，但增加了双向连接的能力。

```
/*
 * Define directions for array concatenation
 */
public static final byte ARRAY_CONCAT_HORIZ = 0, ARRAY_CONCAT_VERT = 1;

/*
 * Concatenates 2 2D arrays
 */
public static Object[][] arrayConcat(Object[][] a, Object[][] b, byte concatDirection)
{
    if(concatDirection == ARRAY_CONCAT_HORIZ && a[0].length == b[0].length)
    {
        return Arrays.stream(arrayConcat(a, b)).map(Object[].class::cast)
                    .toArray(Object[][]::new);
    }
    else if(concatDirection == ARRAY_CONCAT_VERT && a.length == b.length)
    {
        Object[][] arr = new Object[a.length][a[0].length + b[0].length];
        for(int i=0; i<a.length; i++)
        {
            arr[i] = arrayConcat(a[i], b[i]);
        }
        return arr;
    }
    else
        throw new RuntimeException("Attempted to concatenate arrays of incompatible sizes.");
}

/*
 * Concatenates 2 1D arrays
 */
public static Object[] arrayConcat(Object[] a, Object[] b)
{
    Object[] arr = new Object[a.length + b.length];
    System.arraycopy(a, 0, arr, 0, a.length);
    System.arraycopy(b, 0, arr, a.length, b.length);
    return arr;
} 
```

# ruby-on-rails - 消除辅助模块中的重复代码

> ID：13722540
> 
> 赞同：0
> 
> 时间：2012-12-05T11:44:52.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经建立了两种`exams_helper.rb`在视图中使用的方法：

```
<% @topic_questions.each do |topic_question| %>
<tr>
  <td><%= topic_question.topic.name %></td>
  <td><%= correct_questions(@exam_result.exam_id, topic_question.topic_id) %></td>
  <td><%= number_to_percentage(ratio(@exam_result.exam_id, topic_question.topic_id), precision: 0) %></td>
</tr>
<% end %> 
```

题目正确题数计算方法：

```
 def correct_questions(exam_id, topic_id)
    total = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id).count
    correct = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id, correct: true).count
    correct.to_s + '/' + total.to_s
  end 
```

计算正确率百分比的方法

```
 def ratio(exam_id, topic_id)
    total = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id).count
    correct = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id, correct: true).count
    ratio = (correct.to_f/total).round(2)*100
    if ratio.nan?
      ratio = 0
    else
      ratio
    end
  end 
```

重复这些代码：

```
total = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id).count
correct = ExamQuestion.where(exam_id: exam_id, topic_id: topic_id, correct: true).count 
```

我怎样才能更好地编写这些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:42:04.590

在我看来，这些方法应该依赖于您的模型，因为它们的目的是从数据库中计算数据。此外，通过在模型层中编写这些方法，您可以避免控制器、视图或视图助手中的重复。

视图助手应该只用于“视图逻辑”方法，在视图上下文之外没有多大意义。

**正确的问题和**比率**似乎与 ExamResult 对象密切相关，我们可以想象以下实现**：****

 **```
class ExamResult
  has_many :exam_questions

  def correct_questions_ratio(topic)
    ratio = (correct_questions(topic).to_f/total_questions(topic)).round(2)*100

    if ratio.nan?
      ratio = 0
    else
      ratio
    end
  end

  def total_questions(topic)
    #To avoid recomputing the result from db we memoize it for each topic.
    @total_questions ||= {}
    @total_questions[topic] ||= exam_questions.where(:topic_id => topic.id).count
  end

 def correct_questions(topic)
   #To avoid recomputing the result from db we memoize it for each topic.
   @correct_questions ||= {}
   @correct_questions[topic] ||= exam_questions.where(:topic_id => topic.id, :correct => true).count
 end
end 
```

记忆是一种“缓存”形式，以避免多次重新计算相同的结果。你可以找到很多关于它的文章。这是一个很好的：[http ://www.railway.at/articles/2008/09/20/a-guide-to-memoization/](http://www.railway.at/articles/2008/09/20/a-guide-to-memoization/)

最后，您将在视图中看到以下代码。帮助器不再是必需的，但您仍然可以编写一个帮助器方法来构造“正确/总计”部分，将 ExamResult 实例 - @exam_result - 作为参数。

```
<% @topic_questions.each do |topic_question| %>
  <tr>
    <td><%= topic_question.topic.name %></td>
    <td><%= @exam_result.correct_questions(topic_question.topic) %>/<%= @exam_result.total_questions(topic_question.topic)%></td>
    <td><%= number_to_percentage(@exam_result.correct_questions_ratio(topic_question.topic)), precision: 0) %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:00:50.837

在您的模型中：

```
scope :exam,  lambda { |exam_id|  where(exam_id:  exam_id) }
scope :topic, lambda { |topic_id| where(topic_id: topic_id) }
scope :correct, lambda { where(correct: true) } 
```

在你的助手中：

```
def get_total_and_correct_count_for(exam_id, topic_id)
  [
   ExamQuestion.exam(exam_id).topic(topic_id).count,
   ExamQuestion.exam(exam_id).topic(topic_id).correct.count
   ]
end

def correct_questions(exam_id, topic_id)
  total, correct = get_total_and_correct_count_for(exam_id, topic_id)
  correct.to_s + '/' + total.to_s
end

def ratio(exam_id, topic_id)
  total, correct = get_total_and_correct_count_for(exam_id, topic_id)
  ratio = (correct.to_f/total).round(2)*100
  if ratio.nan?
    ratio = 0
  else
    ratio
  end
end 
```

* * *

旁注：

*   在助手中执行这种数据库交互感觉很奇怪。

*   我首先考虑过记忆，但 ActiveRecord 提供了内置缓存

*   如果它处于循环中，请考虑缓存结果以使它们在请求中持久存在，因为它会伤害数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:00:54.627

首先，为什么不在`ExamQuestion`模型上创建几个方法，而不是`where`每次都使用？

```
class ExamQuestion
    #...
    def self.total_count(exam_id, topic_id)
        where(exam_id: exam_id, topic_id: topic_id).count
    end

    # create similar method for "correct" count
 end 
```

然后，我会将这些数据库调用完全排除在视图之外。我不喜欢在视图中调用模型的数据库方法，因为它只是在模板文件中编写 SQL 的一种更好的方式！如果可以，请将它们放在控制器操作中并将它们传递给视图：

```
# Your controller action
@total_count = ExamQuestion.total_count(exam_id, topic_id)
@correct_count = ExamQuestion.correct_count(exam_id,topic_id)
#... 
```

最后，不要将exam_id 和topic_id 传递给您的助手，只需传递`@total_count`and `@correct_count`。现在好小帮手:)**

# c - 使用 GSL 计算矩阵 Kronecker 积的有效方法

> ID：13722543
> 
> 赞同：1
> 
> 时间：2012-12-05T11:44:59.653
> 
> 标签：c, algorithm, matrix, product, gsl

我算法的瓶颈是我的函数 Kronecker Product，称为 KPro：

```
gsl_matrix *KPro(gsl_matrix *a, gsl_matrix *b) {
    int i, j, k, l;
    int m, p, n, q;
    m = a->size1;
    p = a->size2;
    n = b->size1;
    q = b->size2;

    gsl_matrix *c = gsl_matrix_alloc(m*n, p*q);
    double da, db;

     for (i = 0; i < m; i++)    {
          for (j = 0; j < p; j++)   {
              da = gsl_matrix_get (a, i, j);
              for (k = 0; k < n; k++)   {
                  for (l = 0; l < q; l++)   {
                      db = gsl_matrix_get (b, k, l);
                      gsl_matrix_set (c, n*i+k, q*j+l, da * db);                
                  }
              }
          }
      }

    return c;
} 
```

你知道使用 GSL 的高效实现吗？我找不到合适的例程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:33:08.340

您可以通过“阻塞”和更有效地利用高速缓存显着提高性能。

看看这篇[论文](http://suif.stanford.edu/papers/lam-asplos91.pdf)。Is 具有伪代码，我认为您可以轻松地将其转换为 C 代码。它还有一种算法可以在给定高速缓存大小和矩阵参数的情况下计算出最佳块大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:20:36.710

仅从表面上看，我可以在您的日常工作中看到很多可能的瓶颈：

1.  重用矩阵 c 而不是每次都重新分配它，即从函数堆栈变量提升到类成员或静态到文件。将其分配一次并分配到最大可能的问题大小。
2.  调用所有这些 gsl_matrix_get 和 gsl_matrix_set 肯定会阻止编译器自动向量化您的代码，请考虑使用基于模板的矩阵实现，并使用重载或内联运算符和直接内存访问。
3.  想想你正在使用的矩阵排序：它是行主要的吗？还是专栏专业？缓存未命中比您在那里所做的任何其他事情都更昂贵。您想利用空间局部性和重用，通过以最内层循环（计算发生的地方）访问已预取的相邻矩阵元素的方式对循环进行重新排序。
4.  做对齐的内存分配，使向量化更容易和更有效。
5.  考虑使用循环展开和阻塞

# oracle - Oracle 对撇号的需求

> ID：13722546
> 
> 赞同：0
> 
> 时间：2012-12-05T11:45:03.567
> 
> 标签：oracle, plsql

我正在使用 Oracle 11g 和 Oracle SQL Developer 3.2.20.09。我正在创建一个程序。

为什么我`PL/SQL: ORA-00942: table or view does not exist`在编写这样的查询时会出错：

```
select * from TableExample; 
```

但是如果我这样写查询：

```
select * from "TableExample"; 
```

它工作正常吗？

有没有办法使用第一个选项而不会出错？请注意，它`table`是使用执行上述查询的同一用户创建的。

编辑：我还注意到我必须为每个字段使用撇号，除了主键`ID`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:03:21.273

原因是表是用双引号括起来的表名创建的。通常，表名和列名是不区分大小写的，但是如果你在它们周围加上双引号，它们就会变得区分大小写，除非它们完全是大写的（疯狂，但真实的 :-( ）。

要找到正确的表名和列名，可以查询数据字典：

```
select * from dba_tab_cols where upper(table_name) = upper('TableExample') 
```

（如果您没有必要的权限，请使用 user_tab_cols 而不是 dba_tab_cols）。对于此查询返回的每个表名和列名，如果它包含除大写字符或下划线以外的任何内容，则必须将其引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:48:33.223

因为 'table' 是保留字，所以 oracle 会将其视为语法错误，例如：

```
select * from from ; 
```

您可以使用双引号对其进行转义，但您必须记住每次查询此表时都使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:57:58.850

这取决于您如何创建表。如果表也被创建为“TableExample”（带引号），则表名区分大小写，您需要在选择表时使用引号。

# asp.net - 如何在asp.net的锚标记中编码或隐藏查询字符串

> ID：13722548
> 
> 赞同：2
> 
> 时间：2012-12-05T11:45:13.550
> 
> 标签：asp.net, url, encoding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:48:28.070

```
<a href='<%# Eval("Default2.aspx?id={0}","scid")'><asp:Image .../></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:00:27.840

使用 javascript..

```
<input type = "hidden" id = "hid" value = "101" />
<a id = "lnk" href = "Mypage.aspx">Click</a> 
```

```
<script type = "text/javascript">
$("#lnk").live("click", function () {
window.location =  $(this).href +'?Id=' + $("#hid").val();
});
</script> 
```

# java - 什么是依赖注入？

> ID：13722549
> 
> 赞同：2
> 
> 时间：2012-12-05T11:45:19.200
> 
> 标签：java, dependency-injection, import, jar

> **可能重复：**
> [什么是控制反转？](https://stackoverflow.com/questions/3058/what-is-inversion-of-control)

我真的对依赖注入的概念感到困惑。

我对软件领域很陌生，我对以下情况有疑问。假设`Json`我的 java 代码需要一个解析器类，所以我在使用参数`Json`执行 java 程序时添加了 jar 。`classpath`我的程序依赖于`Json`jar，所以这意味着我在这里进行*依赖注入*？

另一个例子是，using`import`语句确实解决了用户类依赖于其他类的问题（比如`Date`在 java 中）所以所有这些都是*依赖注入*的概念吗？

我在哪里提出这个概念。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T11:47:43.013

这更多地与您如何将组件链接在一起。例如，在上面，我希望您将解析器注入需要它的类中。例如

代替：

```
public class MyParserUsingClass {
   ...
   public MyParserUsingClass() {
      this.parser = new Parser();
   }
} 
```

你会这样做：

```
public class MyParserUsingClass {
   ...
   public MyParserUsingClass(Parser injectedParser) {
      this.parser = injectedParser;
   }
} 
```

为什么要这样做？您使用解析器的类并不真正关心解析器的来源，并且应该真正使用接口而不是具体实例。通过注入解析器，您可以根据情况提供不同的实例，将其模拟出来进行测试等。否则该类只会在内部创建它，而您将无法控制它。这对于可配置组件、跨网络通信的组件、重量级组件等尤其重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:47:55.377

在您的具体示例中，依赖注入看起来像：

```
public class MyParser {
     private final JsonParser parser;

     public MyParser(JsonParser parser) {
         this.parser = parser;
     }

     public Result parse(JsonInput input) {
         Result = parser.parse(input);
     }
} 
```

假设这`JsonParser`是一个接口，您现在可以提供该接口的任何实现，`MyParser`而不依赖于您选择使用的特定实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:52:42.087

假设您有一个名为 daes 的类`MyCustomParser`。现在您希望允许在该类中注入解析器以获得针对您将注入的解析器类型的不同行为（json 可能会更改，您想使用另一种解析方式等）。因此，您应该使用（通过实例）调用的方法创建一个`Interface`- 现在您可以根据您想要进行解析的方式对该方法进行不同的实现。您需要做的就是将此接口传递给将使用它的类（您可以将其作为构造函数中的参数传递）。在这种情况下，您将在类中注入 Parser`IParser``ParseIt``MyCustomParser``MyCustomParser`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T11:53:32.083

严格意义上的依赖注入与导入类或将 jar 文件添加到类路径无关。它旨在支持对接口原理的编程，它是一种控制反转的形式。

它带来的主要好处是你的代码不依赖于显式的依赖实现，而是使用抽象。您依赖于一个接口，并且该接口的实现类的某个实例将在运行时“注入”到您的类中（作为构造函数参数、某个 setter 或 - 在我看来是错误的选择 - 实例字段）。

因此，例如，您可以更改持久层而不接触服务组件中的代码，因为您的服务类只关心一些 DAO/Repository 接口，并且您将为它们提供不同的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T11:46:27.920

依赖注入更多的是关于减少一个类必须创建它自己依赖的事物的实例的实例。

依赖注入旨在通过某种外部机制将这些依赖“给予”给消费类。常用方法包括通过构造函数传入依赖项，或将它们设置为类的公开“可设置”属性。

例如，通过构造函数进行的依赖注入可能如下所示：

```
public class Parser
{
     private IJsonParser parser;

     public Parser(IJsonParser parser) {
         this.parser = parser;
     }
} 
```

这消除了 Parser 类执行以下操作的需要：

```
public class Parser
{
     private IJsonParser parser;

     public Parser() {
         this.parser = new JsonParser();
     }
} 
```

这遵循单一职责的原则——Parser 类不需要负责创建 JsonParser，也不应该关心它使用什么特定的 JsonParser——它的关注点只是它需要完成 IJsonParser 指定的工作的东西接口，并将其留给一些更高的控制代码来确定最适合完成这项工作的适当具体类型。

# java - idl2java 不适用于 64 位 JVM？加载 jre\bin\server\jvm.dll 时出错

> ID：13722552
> 
> 赞同：2
> 
> 时间：2012-12-05T11:45:33.743
> 
> 标签：java, jvm, corba, idl

**vbroker52\bin\idl2java.exe -verbose -VBJdebug -VBJjavavm**

```
D:\tools\java\jdk1.6.0_37_32\jre\bin\java.exe  
JVM:  
    Loaded JVM dll D:\tools\java\jdk1.6.0_37_32\jre\bin\client\jvm.dll  
JavaVMInitArgs:  
... 
```

**vbroker52\bin\idl2java.exe -verbose -VBJdebug -VBJjavavm**

```
D:\tools\java\jdk1.6.0_37_64\jre\bin\java.exe  
Error loading: D:\tools\java\jdk1.6.0_37_64\jre\bin\server\jvm.dll  
Unable to load any JVM, exiting!!! 
```

我尝试了多个版本的 JVM - 只有使用 64 位 JVM 时才会出现问题。
它是已知的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:32:34.857

旧的 visibroker idl 编译器无法处理 64 位 Java 运行时。这行不通。但是您可以尝试使用 32 位 JVM 创建 java 代码（使用 idl2java）并使用 64 位 JDK 进行编译。

# database - 即将到来的生日oracle plsql列表

> ID：13722556
> 
> 赞同：0
> 
> 时间：2012-12-05T11:45:45.913
> 
> 标签：database, oracle, plsql, date-arithmetic

我手上有问题。我正在开发一个应用程序，用户希望将愿望卡发送给其生日在用户提供的 FROM 和 TO date 之内的客户，无论年份如何。即搜索结果应仅基于月份和日期。例如，我的输入参数来自日期：“12/05”（12 月 5 日）和截止日期：“01/04”（1 月 4 日）。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:49:58.573

您可以使用 PLSQL 的提取功能：

```
extract(MONTH FROM DATE '2003-08-22') would return 8
extract(DAY FROM DATE '2003-08-22') would return 22 
```

[http://www.techonthenet.com/oracle/functions/extract.php](http://www.techonthenet.com/oracle/functions/extract.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:01:33.163

您应该使用此查询条件。它选择`birthdate`从现在起是否在一个月的间隔内。生日可以是任何年份：

```
where
TO_DATE(TO_CHAR(birthdate,'dd.mm')||'.1900','DD.MM.YYYY') ,
between
TO_DATE(TO_CHAR(sysdate,'dd.mm')||'.1900','DD.MM.YYYY') 
and ADD_MONTHS(TO_DATE(TO_CHAR(sysdate,'dd.mm')||'.1900','DD.MM.YYYY'),1) 
```

如果用户输入日期范围，例如“02/03”和“23/06”（此查询中的“P1”和“P2”），则使用以下条件。

```
where
(
TO_DATE(TO_CHAR(birthdate,'dd.mm')||'.1900','DD.MM.YYYY') ,
between
TO_DATE('P1'||'.1900','DD.MM.YYYY') 
and
TO_DATE('P2'||'.1900','DD.MM.YYYY') 
)

OR
(
    (TO_DATE('P1'||'.1900','DD.MM.YYYY') 
        > TO_DATE('P2'||'.1900','DD.MM.YYYY') )
    and 

    (
     TO_DATE(TO_CHAR(birthdate,'dd.mm')||'.1900','DD.MM.YYYY') ,
     between
     TO_DATE('P1'||'.1900','DD.MM.YYYY') 
     and
     TO_DATE('31.12.1900','DD.MM.YYYY') 
     OR
     TO_DATE(TO_CHAR(birthdate,'dd.mm')||'.1901','DD.MM.YYYY') ,
     between
     TO_DATE('01.01.1901','DD.MM.YYYY') 
     and
     TO_DATE('P2'||'.1901','DD.MM.YYYY') 

    )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:11:44.070

假设您已将 DOB 存储为 DATE，可以在表 PPL 中说 column = "DOB"。

即对于原始集：

```
FIRSTNAME                        LASTNAME                         DOB
-------------------------------- -------------------------------- ---------
Joe                              Bloggs                           03-JAN-90
Jane                             Doe                              05-JAN-40
Adam                             West                             05-DEC-76 
```

我们得到

```
SQL> select firstname, lastname,  dob, next_bday
 2    from (select firstname, lastname, dob,
 3                  case when to_date(to_char(dob, 'mmdd'), 'mmdd') < trunc(sysdate)
 4                    then add_months(to_date(to_char(dob, 'mmdd'), 'mmdd'), 12)
 5                    else to_date(to_char(dob, 'mmdd'), 'mmdd')
 6                  end next_bday
 7            from ppl)
 8   where next_bday < add_months(trunc(sysdate), 1);

FIRS LASTNA DOB       NEXT_BDAY
---- ------ --------- ---------
Joe  Bloggs 03-JAN-90 03-JAN-13
Adam West   05-DEC-76 05-DEC-12 
```

# android - 编译 ffmpeg 仅用于将图像转换为视频（带声音）

> ID：13722561
> 
> 赞同：1
> 
> 时间：2012-12-05T11:45:58.130
> 
> 标签：android, build, ffmpeg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:47:07.463

关于项目的规模，我不知道你能做什么。

关于将图像转换为视频，您可以执行以下操作：

公共静态字符串转换（文件文件）{

```
 FFmpegFrameGrabber frameGrabber =
            new FFmpegFrameGrabber(file.getAbsolutePath());

    String newName = file.getName();
    newName =
            newName.replace("." + FileManager.getExtension(file),
                    "_RECODED.mp4");
    String newFilePath = file.getParent() + "/" + newName;
    FFmpegFrameRecorder recorder;
    Frame frame = new Frame();
    recorder = new FFmpegFrameRecorder(newFilePath, 250, 250);
    recorder.setFrameRate(20);
    recorder.setFormat("mp4");
    recorder.setAudioChannels(2);
    recorder.setPreset("veryfast");
    try {
        long startTime = System.currentTimeMillis();
        System.out.println("" + startTime);
        Log.d("Tempo", "" + startTime);
        frameGrabber.start();
        recorder.start();
        while (true) {
            try {
                frame = frameGrabber.grabFrame();
                if (frame == null) {
                    System.out.println("!!! Failed cvQueryFrame");
                    break;
                }
                recorder.record(frame);
            } catch (Exception e) {
                Log.e("converter", e.getMessage());
            }
        }
        frameGrabber.stop();
        frameGrabber.release();
        recorder.stop();
        recorder.release();
        long stopTime = System.currentTimeMillis();
        System.out.println(""+stopTime);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return newFilePath;
} 
```

这实际上从输入视频中获取每一帧并创建另一个 .mp4 视频。您可以将其重写为文件夹中每一帧的代码（或类似的东西）。

# excel - Excel 中是否存在有关日期的错误？

> ID：13722566
> 
> 赞同：8
> 
> 时间：2012-12-05T11:46:18.643
> 
> 标签：excel, date

请不要问我是如何偶然发现这一点的，但请尝试以下操作：

1.  在 Excel 的单元格中键入“60”。
2.  将数据类型设置为日期格式
3.  显示的日期（至少在我的情况下）是 1900 年 2 月 29 日。

然而，1900 年 2 月 29 日从未发生过，因为 1900 年不是闰年（参见[Wikipedia](http://en.wikipedia.org/wiki/February_29)）。

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:48:58.330

不，这不是 Excel 中的错误，是的，您遗漏了一些东西。

Excel 实现了与当时需要兼容性的 Lotus 1-2-3 匹配的日期，因此被设计为出现此错误。Lotus 1-2-3 有错误认为 1900 年是闰年。

有关不修复它的原因，请参阅 Microsoft 的[文档。](http://support.microsoft.com/kb/214326)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-24T17:12:36.817

请。这是一个错误。它从未记录在原始 Excel for Windows 规范中。Mac 上的原始 Excel 早于它在任何 Windows 平台上使用的是基于 1904 年的日期系统。最初的 Excel 作者确实认识到了这个问题。

> “严格来说，这不是 Excel 1.0 的问题，它只在 Mac 上运行。Mac（和 Excel）的原始版本支持从 1904 年开始的日期，部分原因是为了避免 1900 年不是闰年的问题。它直到将 Excel 移植到 Windows (Excel 2.0) 才引入了 1900 日期系统，因此您不能将决定归咎于 Excel 1.0 团队中的任何人（因此，当然，我们不会发表评论在采访中提到）。” [https://www.geekwire.com/2015/recalc-or-die-30-years-later-microsoft-excel-1-0-vets-recount-a-project-that-defied-the-odds/](https://www.geekwire.com/2015/recalc-or-die-30-years-later-microsoft-excel-1-0-vets-recount-a-project-that-defied-the-odds/)

该错误也出现在 MS-BASIC 和 Multiplan 上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T11:50:20.897

这不是错误 - Excel 接受 1900 年 2 月 29 日作为有效日期。这是一个历史问题。

您的 60 被视为“自 1900 年 1 月 1 日以来的天数”。

更多信息：

[http://polymathprogrammer.com/2009/10/26/the-leap-year-1900-bug-in-excel/](http://polymathprogrammer.com/2009/10/26/the-leap-year-1900-bug-in-excel/)

# oracle - 如何在 Toad 中调试存储过程？

> ID：13722570
> 
> 赞同：23
> 
> 时间：2012-12-05T11:46:30.683
> 
> 标签：oracle, debugging, stored-procedures, toad

我安装了 Oracle 10g，并且有一个包含许多游标和过程的包，我如何调试这些过程或游标之一。你能提供一下步骤吗？我运行了 Google 搜索，但没有找到任何指定如何从包中调试特定过程的内容。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-05T13:01:28.040

在 Toad 中调试过程的基本步骤

1.  在 Toad 编辑器中加载您的程序。
2.  将调试点放在要调试的行上。参见第一个屏幕截图。
3.  右键单击编辑器 Execute->Execute PLSQL(Debugger)。查看第二个截图。
4.  将打开一个窗口，您需要从左侧选择过程并为该过程传递参数，然后单击执行。参见第三个屏幕截图。
5.  现在开始您的调试检查 Debug-->Step Over...Add Watch 等。

*参考：*[Toad 调试器](http://www.quest.com/toad/pdfs/how_to_use_toad_pl_sql_debugger.pdf)

![调试](../Images/577ae89509826ea05f6fd61951b67a67.png)

![在调试中执行](../Images/b3496f02d26d2ce8d25b07d4fcf36464.png)

![范围](../Images/f9f380ef463fccde34b0b5349d23d05e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T15:19:11.710

在编辑器中打开一个 PL/SQL 对象。

单击主工具栏或选择会话 | 切换使用调试编译。这将启用调试。

编译数据库上的对象。

在 Execute 工具栏上选择以下选项之一开始调试： Execute PL/SQL with debugger () Step over Step into Run to cursor

# magento - 需要更新购物车页面中的自定义选项值

> ID：13722574
> 
> 赞同：2
> 
> 时间：2012-12-05T11:46:40.247
> 
> 标签：magento

我的购物车页面有一个小问题。

在我的购物车中有这些字段。

*   数量

*   产品描述。（如**1 件产品 $27**）

我的问题是，

如果，我更新我的购物车项目的数量。例如，我将 1 个数量更新为 3 个数量。并且还需要更改产品描述。从**1 个产品 $27**到**3 个产品 $81**。

**这是我的示例代码：**

```
<?php foreach ($_options as $_option) : ?>

            <?php $_formatedOptionValue = $this->getFormatedOptionValue($_option) ?>            

            <?php //if($ii > 2) { ?>

            <dt><?php echo $this->htmlEscape($_option['label']) ?></dt>

            <dd style="padding-left:0px;" <?php if (isset($_formatedOptionValue['full_view'])): ?> class="truncated"<?php endif; ?>>

            <?php $license_val = $_formatedOptionValue['value']; ?> 
```

我使用此**$_formatedOptionValue['full_view']**从后端获取选项值。所以只是，我很困惑。

现在，我使用自定义选项作为产品描述。我需要更新自定义选项值。有没有可能？请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:08:54.363

检索数量和小计并在翻译字符串中回显这些值不是很简单吗，您已经拥有更新项目后的数据。

```
$this->__('%s product %s', $qty, $subtotal) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T05:09:22.950

它非常简单，只需覆盖您的结帐控制器，然后编辑 updateCheckoutPost 函数以更新自定义选项值和价格。

```
Add this code only in updateCheckoutPost function 100% working.

you need cart items id's, item's product id, qty or options array of particular product.

foreach($_POST['item_ids'] as $update_product_id){
                $product = Mage::getModel('catalog/product')->load($_POST['product_ids'][$update_product_id][0]); 
                $cart = Mage::getModel('checkout/cart');
                $cart->init();
                $params = array(
                'product' => $_POST['product_ids'][$update_product_id][0],
                'qty' => $_POST['cart'][$update_product_id]['qty'],
                'options' => $_POST['option'][$update_product_id]);
                $cart->updateItem($update_product_id,$params);
                $cart->save();
           } 
```

# php - 向具有 130,000 行的表添加索引会导致 PHPMyAdmin 中的 FastCGI 超时

> ID：13722575
> 
> 赞同：0
> 
> 时间：2012-12-05T11:46:41.783
> 
> 标签：php, mysql, iis, phpmyadmin

我正在尝试向表中的`Datetime`字段添加索引`transactions`。

我通过 PHPMyAdmin 执行此操作，因为我没有 SSH 访问权限。

`transactions`不幸的是，当我在当前有约 130,000 行的上尝试此操作时，我收到了 FastCGI 超时错误。

如果我在较小的表上创建索引，则不会发生问题。

我相信在脚本超时后一段时间**会**添加索引，但某些`OPTIMIZE`命令似乎也会出现同样的问题，所以我真的很想解决它并让 PHPMyAdmin 正常工作。

我需要查看哪些设置 - 在 IIS、PHPMyAdmin、FastCGI 和 PHP 中 - 以允许 PHPMyAdmin 完整地运行此请求？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:13:30.837

尝试安装 MySQL 查询浏览器，从[http://dev.mysql.com/downloads/gui-tools/5.0.html免费](http://dev.mysql.com/downloads/gui-tools/5.0.html)

它已被新的 MySQL Workbench 软件取代，但您仍然可以下载它。

您可以以与 phpMyAdmin 的“SQL”选项卡完全相同的方式运行查询，但没有 PHP 内存或时间限制。

# javascript - 我应该避免创建这个 JavaScript 闭包吗？

> ID：13722581
> 
> 赞同：0
> 
> 时间：2012-12-05T11:47:12.853
> 
> 标签：javascript, jquery, closures, performance

这可能有点抽象，但我正在尝试了解 JavaScript 闭包等。请使用以下代码：

```
function MyObj() {
    var me = this;

    this.foo = function(bar) {
        // Do something with 'bar'
    }

    // Set up lots of local variables etc.
    // ....

    $(window).load(function() {
        // Add a delegated click handler to specific <input> elements
        $(document).on('click.myobj', 'input.special', function() {
            // Do something with the <input> that triggered the click event
            me.foo(this);
        });
    });
}

var myObj = new MyObj(); 
```

传递给它的匿名函数绑定到 click 事件创建一个引用的闭包`me`。我想知道的是做这样的事情是否更好（以避免关闭）：

```
$(window).load(function() {
    // Add a delegated click handler to specific <input> elements
    (function(localMe) {
        $(document).on('click.myobj', 'input.special', function() {
            // Do something with the <input> that triggered the click event
            localMe.foo(this);
        });
    })(me);
}); 
```

这是更好的方法，还是我对创建闭包过于偏执？或者，是否有“第三种方式”？

* * *

**编辑**

此外，做这样的事情会更好吗：

```
$(window).load(function() {
    // Add a delegated click handler to specific <input> elements
    $(document).on('click.myobj', 'input.special', {localMe : me}, function(event) {
        // Do something with the <input> that triggered the click event
        event.data.localMe.foo(this);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:49:15.710

如果您从构造函数绑定事件，您将*始终*创建一个闭包。事实上，您甚至需要闭包来保留对您的实例的引用。但是，您可能会执行以下操作：

```
function MyObj() {
    this.foo = function(bar) {
        // Do something with 'bar'
    }

    // Set up lots of local variables etc.
    // ....
}

var myObj = new MyObj();
$(function() {
    $(document).on('click.myobj', 'input.special', function() {
        myObj.foo(this);
    });
}); 
```

如果您只创建构造函数的单例实例，那么无论如何都没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:58:21.663

匿名函数现在在 javascript 中大量使用（作为参数和作用域/闭包的直接函数）。没有性能问题。

但是您可能会遇到代码阅读问题。因为当你看到一个变量时，你必须检查变量来自哪里。但这里没什么大不了的。

在您的第二个示例中，您仍然有一个闭包“中断”。因为在你的匿名函数中`click`，你使用了`localMe`变量。并且`localMe`是您的功能之外的功能的参数。

```
// Here, 'me' is a direct local variable.
$(window).load(function() {
    // Here, we are in an anonymous fonction, so 'me' is not a direct variable anymore. But you still can access it.

    // Add a delegated click handler to specific <input> elements
    (function(localMe) {
        // Here, 'localMe' is a direct local variable.
        $(document).on('click.myobj', 'input.special', function() {
            // We are in an anonymous function, so 'localMe' is not a direct variable anymore.

            // Do something with the <input> that triggered the click event
            localMe.foo(this);
        });
    })(me);
}); 
```

如果你真的想避免闭包“中断”，你应该将你的函数绑定到你的对象。但请注意，并非每个浏览器都支持`bind`函数上的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:04:25.630

后者（AFAIK）效率更高，但除非在紧密循环中使用，否则可能无法测量。

原因是所有变量解引用都必须遵循作用域链。在后一种情况下，`localMe`可以在匿名函数的参数列表中找到该变量。

在前一种情况下，变量不是在那里找到的，而是在外部范围内。这种向上遍历作用域链需要额外的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:16:24.737

我可能会这样做：

```
var bind = function( fn, me ) { return function() { return fn.apply(me, arguments); }; },
    Object = (function() {
        function Object() {
            this.handler = bind(this.handler, this);
            // Add a delegated click handler to specific <input> elements.
            $(document).on("click.myobj", "input.special", this.handler);
        }

        Object.prototype.foo = function( bar ) {
            // Do something with "bar".
        };

        Object.prototype.handler = function( event ) {
            // Do something with the <input> that triggered the click even.
            return this.foo(event.currentTarget);
        };

        return Object;
    })();

var obj = new Object(); 
```

这跳过了闭包和 iifes 的使用，而是使用**[.apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)**。不确定它是否更有效，但这是另一种选择。

# html - 页脚中的一个 div 干扰另一个

> ID：13722582
> 
> 赞同：4
> 
> 时间：2012-12-05T11:47:12.853
> 
> 标签：html, css, radio-button, footer

我在页脚中有以下代码，出于某种原因这部分：

```
<!-- save -->
        <div id="saveWrapper">  
            <div id="save">  
                <img src="img/save.png" alt="Save Image" width="32" height="32" id="saveButton" title="Save Image" />  
            </div>  
            <div id="textdownload">   
                <img src="img/cancel.png" alt="Cancel" width="32" height="32" id="resetButton" title="Continue Drawing" /> 
                Right click the image to download.  
            </div>  
        </div> 
```

它正在干扰它正下方的这部分。

```
 <!-- brush colour options -->
        <input type="radio" name="colour" id="red" value="red" />
        <label for="red"><img src="img/red.png" alt="Red"></label>
        <input type="radio" name="colour" id="green" value="#00ff00" />
        <label for="green"><img src="img/green.png" alt="Green" /></label>
        <input type="radio" name="colour" id="blue" value="blue" />
        <label for="blue"><img src="img/blue.png" alt="Blue" /></label>
        <input type="radio" name="colour" id="black" value="black" />
        <label for="black"><img src="img/black.png" alt="Black" /></label>
        <input type="radio" name="colour" id="white" value="white" />
        <label for="white"><img src="img/white.png" alt="White" /></label>
        <input type="radio" name="colour" id="random" value="random" />
        <label for="random"><img src="img/random.png" alt="Random" /></label>

        <img src="img/spacer.png" width="32" height="32">

        <!-- brush size options -->
        <input type="radio" name="size" id="1" value="1" />
        <label for="1"><img src="img/1p.png" alt="1 Point"></label>
        <input type="radio" name="size" id="2" value="2" />
        <label for="2"><img src="img/2p.png" alt="2 Point" /></label>
        <input type="radio" name="size" id="3" value="3" />
        <label for="3"><img src="img/3p.png" alt="3 Point" /></label>
        <input type="radio" name="size" id="4" value="4" />
        <label for="4"><img src="img/4p.png" alt="4 Point" /></label>
        <input type="radio" name="size" id="10" value="10" />
        <label for="10"><img src="img/10p.png" alt="10 Point" /></label>

        <img src="img/spacer.png" width="32" height="32">

        <!-- clear canvas -->
        <input type="image" id="clear" value="Clear" src="img/clear.png">
        </div> 
```

问题是上面的单选按钮不可点击或选择，我不知道为什么。

这是这两个项目的随附 css：

```
/* Styling for radio buttons */
.input_hidden {
position: absolute;
left: -9999px;
}

.selected {
background-color: #ccc;
}

#colour label {
display: inline-block;
cursor: pointer;
}

#colour label:hover {
background-color: #efefef;
}

#colour label img {
padding: 3px;

}

/* Footer styling */
footer{
background-color: #323232;
bottom: 0;
box-shadow: 0 -1px 20px rgba(0,0,0,0.4);
height: 42px;
left: 0;
position: fixed;
width: 100%;
z-index: 100000;
}

#saveWrapper { 
position: absolute;
 }  

#saveButton {  
float: right;  
margin-left: 590px;
margin-top: 5px;  
position: relative;  
z-index: 9999;  
cursor: pointer;  
overflow: hidden;  
}  

#textdownload {  
display: none;  
position: absolute;  
font-family: Verdana, Geneva, sans-serif;  
color: #FFFFFF;  
font-size: 12px;  
float: right;  
margin-top: 5px;  
margin-left: 630px;  
width: 300px;  
overflow: hidden;  
} 
```

如果我删除页脚外的第一个代码片段，单选按钮可以正常工作吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:53:05.627

**试试这个添加** `z-index:-1;`

```
#saveWrapper { 
  z-index:-1;
 } 
```

***[现场演示](http://tinkerbin.com/6LK4nV6q)***

## ------------

**或者** **第二个选项是**

在按钮中添加一个**div**

并定义`z-index`为这样

**CSS**

```
#saveWrapper { 
      z-index:1;
     }
    .form_bt{
    position:relative;
      z-index:2;
    } 
```

**HTML**

```
<!-- save -->
        <div id="saveWrapper">  
            <div id="save">  
                <img src="img/save.png" alt="Save Image" width="32" height="32" id="saveButton" title="Save Image" />  
            </div>  
            <div id="textdownload">   
                <img src="img/cancel.png" alt="Cancel" width="32" height="32" id="resetButton" title="Continue Drawing" /> 
                Right click the image to download.  
            </div>  
        </div>

<div class="form_bt"> <!-- brush colour options -->
        <input type="radio" name="colour" id="red" value="red" />
        <label for="red"><img src="img/red.png" alt="Red"></label>
        <input type="radio" name="colour" id="green" value="#00ff00" />
        <label for="green"><img src="img/green.png" alt="Green" /></label>
        <input type="radio" name="colour" id="blue" value="blue" />
        <label for="blue"><img src="img/blue.png" alt="Blue" /></label>
        <input type="radio" name="colour" id="black" value="black" />
        <label for="black"><img src="img/black.png" alt="Black" /></label>
        <input type="radio" name="colour" id="white" value="white" />
        <label for="white"><img src="img/white.png" alt="White" /></label>
        <input type="radio" name="colour" id="random" value="random" />
        <label for="random"><img src="img/random.png" alt="Random" /></label>

        <img src="img/spacer.png" width="32" height="32">

        <!-- brush size options -->
        <input type="radio" name="size" id="1" value="1" />
        <label for="1"><img src="img/1p.png" alt="1 Point"></label>
        <input type="radio" name="size" id="2" value="2" />
        <label for="2"><img src="img/2p.png" alt="2 Point" /></label>
        <input type="radio" name="size" id="3" value="3" />
        <label for="3"><img src="img/3p.png" alt="3 Point" /></label>
        <input type="radio" name="size" id="4" value="4" />
        <label for="4"><img src="img/4p.png" alt="4 Point" /></label>
        <input type="radio" name="size" id="10" value="10" />
        <label for="10"><img src="img/10p.png" alt="10 Point" /></label>

        <img src="img/spacer.png" width="32" height="32">

        <!-- clear canvas -->
        <input type="image" id="clear" value="Clear" src="img/clear.png">

          </div> 
```

***[演示](http://tinkerbin.com/1lu7PDN9)***

# java - 避免服务器调用不存在的松散资源

> ID：13722584
> 
> 赞同：1
> 
> 时间：2012-12-05T11:47:18.627
> 
> 标签：java, applet, http-status-code-404

我正在开发一个在 Java 1.5（与 1.5+ 兼容）上编译的小程序应用程序。它包含一些资源属性文件，这些文件捆绑在同一个 jar 中，与 Java 包平行。

每当我通过小程序访问该资源文件时，它都会向下载小程序的服务器发出请求。之后，它从 jar 中读取文件并像以前一样工作，但我不希望它对这些文件发出服务器请求。

这就是我的 java 代码访问资源文件的方式。

```
ResourceBundle messages = ResourceBundle.getBundle("resources/properties/Messages", locale); 
```

我尝试了两种方式的访问：

```
ResourceBundle messages = ResourceBundle.getBundle("resources.properties.Messages", locale); 
```

两者都有相同的行为。

注意：这些资源在我的 Web 应用程序中不能作为松散资源使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T03:56:19.367

> 我从服务器日志中获得了这些详细信息。我正在分析我的服务器日志中的 404 和 500 响应。

可能会出现[404](http://en.wikipedia.org/wiki/HTTP_404)（未找到）和[500](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)（服务器错误）消息，因为插件正在尝试检查缓存的资源是否是最新的。为此，它需要检查资源服务器版本的最后更新时间。

复杂的因素是资源可能位于`archive`小程序属性中提到的 Jar 中，***或者***它可能是与指定路径相同的“松散文件” `codebase`。因此，如果资源位于 Jar 的以下路径中：

```
/resources/properties/Messages_en_US.properties 
```

JVM 也会检查

```
${codebase}/resources/properties/Messages_en_US.properties 
```

以及每个罐子。

要修复它们，请参阅[`codebase_lookup`](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/special_attributes.html#codebase)参数。这个用例需要：

```
<param name='codebase_lookup' value='false' > 
```

这告诉 JVM在类路径上***没有存储为松散文件的资源，只有 Jars 将被搜索。***它应该停止经常报告`404`/`500`消息（对于了解该参数的较新 JRE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:32:18.697

我不太了解 Java 插件缓存小程序的内部细节，但如果您的小程序使用 .jnlp 描述符，我会尝试添加`download="eager"`到描述符的`<jar>`元素中。

您还可以尝试将 ResourceBundles 定义为类而不是 .properties 文件。例如：

```
package resources.properties;

import java.util.ListResourceBundle;

public class Messages
extends ListResourceBundle  {
    protected Object[][] getContents() {
        return new Object[][] {
            {"entry1", "Some message text"},
            {"entry2", "A different message"},
            // etc.
        };
    }
} 
```

就像属性文件一样，您可以根据需要为任意数量的语言环境定义它们：

```
package resources.properties;

import java.util.ListResourceBundle;

public class Messages_es
extends ListResourceBundle  {
    protected Object[][] getContents() {
        return new Object[][] {
            {"entry1", "Some message text in Spanish"},
            {"entry2", "A different message in Spanish"},
            // etc.
        };
    }
} 
```

如果您定义 ResourceBundle 子类，最好删除相应的 .properties 文件。

# javascript - 鼠标悬停文本然后更改图像在 IE8 下不起作用

> ID：13722588
> 
> 赞同：0
> 
> 时间：2012-12-05T11:47:38.460
> 
> 标签：javascript, jquery, html, css

我有一个由 JavaScript 制成的横幅，其中当您悬停特定文本时，横幅中的图像会发生变化。

我想知道如何使它在ie8中兼容..

我使用本教程提出了 js：

[http://www.javascriptkit.com/script/script2/rolldifferent.shtml](http://www.javascriptkit.com/script/script2/rolldifferent.shtml)

我也试图将鼠标移出然后图像会改变。

下面是js代码：

```
<script type="text/javascript">function changeimage(towhat,url){if (document.images){document.images.targetimage.src=towhat.src gotolink=url}}functionwarp({window.location=gotolink}</script>

<script>var myimages=new Array()var gotolink="#"function preloadimages(){for (i=0;i<preloadimages.arguments.length;i++){myimages[i]=newImage()myimages[i].src=preloadimages.arguments[i]}}preloadimages("map_wm_hover.gif", "map_wm_hover2.gif","map_wm.gif")</script> 
```

这是CSS：

```
<div id="base"><div id="mapcontainer"><a href="javascript:warp()"><img src="map_wm.gif" name="targetimage" border=0></a></div>

<div id="textcontainer"><div class="textboxinner1"><a href="index.html"onMouseover="changeimage(myimages[2],this.href)">8CCC REQUESTS/TALKBACK</a></div>

<div class="textboxinner2"><a href="index.html"onMouseover="changeimage(myimages[1],this.href)">Alice Springs  8952 7771</a></div>

<div class="textboxinner2"><a href="index.html"onMouseover="changeimage(myimages[0],this.href)">Tenant Creek 8952 7182</a></div>

<div class="textboxinner3"><span class="t3nonelink">...other contact details <a href="index.html" onMouseover="changeimage(myimages[2],this.href)">here</a></span></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:16:50.900

我相信这是 IE 的一个问题，其中动画 gif 无法在 javascript 中正确加载。一种解决方法是将图像放在 HTML 代码中的隐藏 div 中，而不是在脚本中加载它们。一个积极的副作用是这大大简化了 javascript。见[http://jsfiddle.net/5pZLT/7](http://jsfiddle.net/5pZLT/7)

HTML：

```
<DIV id=base>
    <DIV id=mapcontainer><A href="javascript:warp()"><IMG border=0 name=targetimage src ="http://www.keencloudmedia.com/skybluekangaroo/map_wm.gif"></A> </DIV>
<DIV id=textcontainer>
<DIV class=textboxinner1><A onmouseover=changeimage(2,this.href) 
href="index.html">8CCC REQUESTS/TALKBACK</A> </DIV>
<DIV class=textboxinner2><A onmouseover=changeimage(1,this.href) 
href="index.html">Alice Springs 8952 7771</A> </DIV>
<DIV class=textboxinner2><A onmouseover=changeimage(0,this.href) 
href="index.html">Tenant Creek 8952 7182</A> </DIV>
<DIV class=textboxinner3><SPAN class=t3nonelink>...other contact details <A 
onmouseover=changeimage(2,this.href) href="index.html">here</A></SPAN> 
    </DIV></DIV></DIV><div id="hiddenImages" style="display: none">
<img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm_hover.gif" name="hoverImage" />
<img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm_hover2.gif" name="hoverImage2" />
<img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm.gif" name="originalImage" />
</div>​ 
```

Javascript：

```
var gotolink = "#";
function changeimage(imageNumber, url) {
    if (document.images) {
        document.images.targetimage.src = 
            document.getElementById('hiddenImages').children[imageNumber].src;
        gotolink = url;
    }
} 
```

顺便说一句，您的原始代码中缺少很多 ;s，这往往会阻止它工作。

# android - 多点触控问题：同时按下两个按钮时，它检测到好像我只用手指触摸了一个，为什么？

> ID：13722595
> 
> 赞同：1
> 
> 时间：2012-12-05T11:47:46.290
> 
> 标签：android, button, multi-touch

所以我有两个按钮，想同时按下。如果我按下第一个它会记录一个“C”（作为钢琴音符），另一个记录一个 D。

至今：

```
@Override
     public boolean onTouch(View v, MotionEvent event) {

        int action = event.getActionMasked();

        switch (event.getAction() & MotionEvent.ACTION_MASK){

        case MotionEvent.ACTION_DOWN:
             switch (v.getId()) { 
                case R.id.cnotebutton: 
                    Log.i("C", "C1");
                    return true;
                case R.id.c2notebutton: 
                      Log.i("D", "D1");
                      return true;
                default:
                }

                break;
            case MotionEvent.ACTION_UP:

                break;  
            case MotionEvent.ACTION_POINTER_DOWN:

                break;
            case MotionEvent.ACTION_POINTER_UP:

                switch (v.getId()) { 
                    case R.id.cnotebutton:
                        Log.i("C", "C2");
                        return true;
                    case R.id.c2notebutton: 
                          Log.i("D", "D2");
                          return true;
                    default:
                    }
                break;
            case MotionEvent.ACTION_MOVE:

                break;
            default:

        }
        return true;
    } 
```

我记录 C1 和 C2 以区分情况，但每次按下按钮时，我只得到 C1、C2 或 D1、D2，就好像我用两根手指触摸了相同的按钮一样。我应该得到 C1,D2 或 D1,C2 取决于哪个手指先指向。有什么建议么？无论如何，我还没有找到一个钢琴样本项目，但是如果这不起作用或者我的方法完全错误，那肯定会帮助我。有没有？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:48:48.693

我想`public boolean onInterceptTouchEvent (MotionEvent ev)`这就是你要找的。看看[这个。](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)

# apache - Codeigniter 不会在 netbeans 中重定向

> ID：13722597
> 
> 赞同：1
> 
> 时间：2012-12-05T11:47:52.647
> 
> 标签：apache, codeigniter, url-rewriting

我有这个网址：

```
http://localhost:85/WebCamClone/Home 
```

但它只会像这样加载：

```
http://localhost:85/WebCamClone/index.php/Home 
```

我试图将 htaccess 规则放在这样的一个：

```
 RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

但它没有用。我还应该尝试什么？

这是我的 apache 配置文件中的内容：

```
 <Directory />
    Options FollowSymLinks
    AllowOverride all
    Order deny,allow
    Deny from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:51:27.077

您是否已从中`application/config/config.php`删除，使其看起来像：`index.php``$config['index_page']`

```
$config['index_page'] = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:52:52.927

`.htaccess`在您的文件中尝试使用此代码一次

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:51:12.303

问题出在 apaches 配置文件中。我必须转到它的文件并替换 allowoveride none 以允许覆盖所有

# c# - C# HttpSelfHostServer 我可以重新获得对控制器构造的控制权吗？

> ID：13722599
> 
> 赞同：0
> 
> 时间：2012-12-05T11:47:53.807
> 
> 标签：c#, web, self-hosting

由于服务器端的限制，我需要在 .NET 中构建一个自托管 Web 服务......

我目前正在查看 HttpSelfHostServer 但我对它的控制器的神奇构造**非常**不感冒，这似乎是仅基于名称并且仅使用默认构造函数。

对于我的测试，我需要将一个值注入控制器并使用 IoC 框架来实现这一用途，其中香草依赖注入就足够了。

有什么办法可以用 HttpSelfHostServer 做到这一点？或者是否有其他不弃用的自托管替代方案可以让我控制我的控制器构造函数调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:57:53.310

`HttpSelfHostConfiguration`您需要提供给构造函数的实例从类`HttpSelfHostServer`继承`DependencyResolver`属性。[因此，例如，您可以提供此处](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)`HttpConfiguration`概述的自定义依赖关系解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:25:31.250

我能够`IHttpControllerActivator`在单元测试中覆盖，我认为这与您尝试做的类似。

例如

```
httpConfiguration.Services.Replace(typeof(IHttpControllerActivator), 
 Mock<IHttpControllerActivator>()); 
```

[（这里](http://www.asp.net/web-api/overview/extensibility/configuring-aspnet-web-api)有更多信息。关于服务）

# javascript - 使用 javascript blackberry app 启动默认/本机浏览器

> ID：13722602
> 
> 赞同：2
> 
> 时间：2012-12-05T11:48:10.873
> 
> 标签：javascript, blackberry

```
<?xml version="1.0" encoding="utf-8"?><widget xmlns="http://www.w3.org/ns/widgets" xmlns:rim="http://www.blackberry.com/ns/widgets" version="1.0.0" rim:header="ipaidabribenaija.com Breaking News and News Updates">
<name>ipaidabribenaija.com</name>
<description>First for Breaking News and News Updates</description>
<content src="index.html" rim:allowInvokeParams="true"/>
<author href="http://www.centurymegasystem.com" rim:copyright="Copyright 2012 wwww.ipaidabribenaija.com" email="josiahaccounts@gmail.com" xml:lang="en" its:dir="rtl" >Josiah Gerald</author>
<feature id="blackberry.invoke.BrowserArguments" />
<rim:connection timeout="25000">
    <id>TCP_WIFI</id>
    <id>MDS</id>
    <id>BIS-B</id>
    <id>TCP_CELLULAR</id>
    <id>WAP2</id>
    <id>WAP</id>
    </rim:connection>
<license>Copyright (c) 2012 ipaidabribenaija.com.</license>
<icon src="images/icon.png" /></widget>

<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Breaking News and News Updates</title>
<script type="text/javascript">
    var args = new blackberry.invoke.BrowserArguments('http://www.ipaidabribenaija.com');
    blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args);
    /*function openWebLinkInBrowser() {
    // open web link in browser
        blackberry.invoke.invoke({target: "sys.browser",uri: "http://www.ipaidabribenaija.com"});
    }
    openWebLinkInBrowser();*/
</script> 
```

我是这个编程的新手。我的任务是为 BlackBerry 开发应用程序。

启动应用程序后，浏览器将打开特定的 URL。

我有一个执行此操作的 java 代码。如何使用 BlackBerry Webwork API 实现相同的功能。上面的代码是我到目前为止所实现的。但是，该应用程序不会在加载时启动浏览器。

提前感谢您的时间和想法。

```
<?xml version="1.0" encoding="utf-8"?><widget xmlns="http://www.w3.org/ns/widgets" xmlns:rim="http://www.blackberry.com/ns/widgets" version="1.0.0" rim:header="ipaidabribenaija.com Breaking News and News Updates">
<name>ipaidabribenaija.com</name>
<description>First for Breaking News and News Updates</description>
<content src="index.html" rim:allowInvokeParams="true"/>
<author href="http://www.centurymegasystem.com" rim:copyright="Copyright 2012 wwww.ipaidabribenaija.com" email="josiahaccounts@gmail.com" xml:lang="en" its:dir="rtl" >Josiah Gerald</author>
<feature id="blackberry.invoke.BrowserArguments" />
<feature id="blackberry.identity" />
<feature id="blackberry.invoke" />
<rim:connection timeout="25000">
    <id>TCP_WIFI</id>
    <id>MDS</id>
    <id>BIS-B</id>
    <id>TCP_CELLULAR</id>
    <id>WAP2</id>
    <id>WAP</id>
    </rim:connection>
<license>(c) 2012 ipaidabribenaija.com.</license>
<icon src="images/icon.png" /></widget>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Breaking News and News Updates</title>
<script type="text/javascript">
    var args = new blackberry.invoke.BrowserArguments('http://www.ipaidabribenaija.com');
    blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args);
    blackberry.app.exit();
</script> 
```

上面的代码运行良好，我在 BB 模拟器 9930 上对其进行了测试。感谢@HelpMeToHelpYou 的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:19:30.280

```
<script type="text/javascript">
  var args = new blackberry.invoke.BrowserArguments('http://www.blackberry.com');
  blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args);
</script> 
```

您必须在配置文档中声明以下功能元素：根据下图![在此处输入图像描述](../Images/f2bd1d8c7857eea56b9a5e93076f9e25.png)

更多信息请访问

[https://developer.blackberry.com/html5/apis/blackberry.invoke.browserarguments.html](https://developer.blackberry.com/html5/apis/blackberry.invoke.browserarguments.html)

示例代码：请确保配置文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets"
   xmlns:rim="http://www.blackberry.com/ns/widgets"
   version="1.0" rim:header="WebWorks Sample">
  <feature id="blackberry.invoke" />
  <feature id="blackberry.invoke.BrowserArguments" />
   <feature id="blackberry.identity" />
   <name>Hello World</name>
   <description>This is HelloWorld.</description>
   <content src="index.html"/>

</widget> 
```

和 index.html 作为

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, 
            initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, 
            user-scalable=no">
        <title>Hello World</title>
        <script type="text/javascript">
        function myFunction()
        {
              var args = new blackberry.invoke.BrowserArguments('http://www.blackberry.com');
   blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args);
        }

</script>
    </head>
    <body onload="myFunction()">
        <p>Hello World!</p>
    </body>
</html> 
```

试试这个

# php - 对 MySQL join 真的很困惑

> ID：13722603
> 
> 赞同：1
> 
> 时间：2012-12-05T11:48:23.620
> 
> 标签：php, mysql, join

我真的一直在尝试自己弄清楚这一点，但是互联网上的所有教程要么不起作用，要么写了一半……没有人解释您如何回显内容。

现在我正在拉一个热门搜索表......我想显示名称，然后是它下面的类别名称。但问题是，搜索表将类别存储为 ID 而不是名称。

所以我需要使用一个连接，它将“popular_search”表中的“category_id”列链接到“categories”表中的“id”列......然后显示“categories”中的“name”列" 表以显示类别名称。

没有人提供有关如何回显内容的信息，因为两个表都有同名的列，我该怎么做？我不明白...

这是我当前的查询：

```
SELECT * FROM popular_search ORDER BY `hits` DESC LIMIT 9 
```

这是我当前的回声，但我需要用另一个表中的类别名称替换 id 字段：

```
<?php echo $item['name']; ?>
<?php echo $item['category_id']; ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:52:08.670

使用`AS`应该适合你：

```
SELECT
    ps.*,
    ca.name as `category_name`
FROM
    `popular_search` as `ps`
INNER JOIN
    `categories` as `ca`
ON
    ps.category_id = ca.id
ORDER BY
    ps.hits DESC
LIMIT 9 
```

现在它将在您的数组中作为`category_name`.

你可以在这里阅读更多：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:51:54.483

在 SELECT 中指定列名（而不是 SELECT *）。

给 coumn 名称别名（即*SELECT a.Column1 AS **Fred***， Fred 是别名）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:50:18.353

试试这个：：

```
SELECT 
* 
FROM 
popular_search ps
inner join categories c on (ps.category_id = c.id)

ORDER BY `hits` DESC LIMIT 9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T11:56:09.880

我想，你需要知道表别名。因此，您可以对两个表使用两个别名[新名称]，并在选择查询中分别引用它们。例子很多，这里就不重复了。请看这里： [http ://www.w3schools.com/sql/sql_alias.asp](http://www.w3schools.com/sql/sql_alias.asp) [表别名](http://www.w3schools.com/sql/sql_alias.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T11:53:28.510

这正是您正在寻找的东西 [http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

试试看 ..

# python - SQLAlchemy 过滤器，substr，大小写

> ID：13722606
> 
> 赞同：3
> 
> 时间：2012-12-05T11:48:39.253
> 
> 标签：python, sqlalchemy

我可以在and中使用`CASE`语句吗？`substr``filter`

这是我的要求：

```
>> value = '00021050430' #here value is a database column
>> query.filter((func.substr(value,case([(func.length(value) > 7,func.length(varying_value)-7+1))],else_=1),7)=='1050430') 
```

我期待的输出是：

```
>> query.filter(func.substr(value,6,7)) 
```

上面抛出一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T11:54:51.177

您不需要`CASE()`在此处使用语句。只需使用 Python：

```
query.filter(func.substr(value, 1 if len(value) > 7 else 1, 7) == '1050430') 
```

这称为条件表达式；它的构造为`true_expr if test_expr else false_expr`，`true_expr`如果`test_expr`计算结果为 True，则使用 where ，否则`false_expr`使用该部分。

如果`value`不是常量*而是*列引用，那么您*确实*需要使用`CASE()`语句。用于[`sqlalchemy.sql.expression.case()`](http://docs.sqlalchemy.org/en/latest/core/expression_api.html#sqlalchemy.sql.expression.case)：

```
from sqlalchemy.sql.expression import case

query.filter(func.substr(value, case([(func.length(column) > 7, func.length(column) - 7 + 1)], else_=1), 7) == '1050430') 
```

但你需要确保你的`(`和`)`括号是平衡的（你有一个太多）。

# mysql - 在 CakePHP 中保存文件路径

> ID：13722610
> 
> 赞同：0
> 
> 时间：2012-12-05T11:48:43.997
> 
> 标签：mysql, cakephp, path

CakePHP 不保存我提供的文件路径。该记录有 3 列（id、路径、描述），但每次我尝试添加路径时，“路径”列都是空的。

```
$this->UpdateFile->saveAll($this->request->data) 
```

这些文件是动态生成的，因此它们的结构如下：

```
data[UpdateFile][n][path]
data[UpdateFile][n][description] 
```

如何保存路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:28:35.717

```
$this->request->data['UpdateFile']['path'] = $this->request->data['UpdateFile']['n']['path'];
$this->UpdateFile->saveAll($this->request->data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:52:40.407

当输入字段设置为 'disabled="disabled"' 时，浏览器不会传输这些值。我已经删除了这个属性并且它起作用了。

# asp.net-mvc - 为 MVC 邮件程序伪造 HTTPContext

> ID：13722611
> 
> 赞同：3
> 
> 时间：2012-12-05T11:48:46.400
> 
> 标签：asp.net-mvc, httpcontext, mvcmailer

我需要从 asp.net MVC 应用程序发送电子邮件，我正在使用 MVC 邮件程序来完成这项工作。只要有一个 HTTPContext 它就可以正常工作。不幸的是，我还需要在没有上下文的情况下发送电子邮件。

较新版本的 MVC Mailer 具有 CurrentHttpContext 的虚拟属性，当我使用“假”上下文设置它时，它似乎在本地工作。一旦它到达服务器，它将不再工作并失败并出现以下堆栈跟踪

```
System.ArgumentNullException: Value cannot be null.
Parameter name: httpContext
  at System.Web.HttpContextWrapper..ctor(HttpContext httpContext)
  at Glimpse.Core.Extensibility.GlimpseTimer.get_TimerMetadata()
  at Glimpse.Mvc3.Plumbing.GlimpseViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
  at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__a(IViewEngine e)
  at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
  at System.Web.Mvc.ViewEngineCollection.Find(Func`2 cacheLocator, Func`2 locator)
  at Mvc.Mailer.MailerBase.ViewExists(String viewName, String masterName)
  at Mvc.Mailer.MailerBase.PopulateBody(MailMessage mailMessage, String viewName, String masterName, Dictionary`2 linkedResources)
  at Mvc.Mailer.MailerBase.Populate(Action`1 action) 
```

我已经进行了一些研究，问题似乎在于 ViewEngineCollection 无法找到，因为它正在 HTTPContext 中寻找某些东西。我返回的“假”上下文很简单

```
 public static HttpContextBase GetHttpContext(string baseUrl)
  {
      if (HttpContext.Current == null)
     {
    Log.InfoFormat("Creating a fake HTTPContext using URL: {0}", baseUrl);
    var request = new HttpRequest("/", baseUrl, "");
    var response = new HttpResponse(new StringWriter());
    return new HttpContextWrapper(new HttpContext(request, response));
      }

   return new HttpContextWrapper(HttpContext.Current);
  } 
```

我是否从我的“假”上下文中遗漏了什么？我该如何添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:45:40.267

您想要模拟或伪造 HttpContextBase 以及请求/响应。

如果您使用的是 RhinoMocks，可以按如下方式完成：

```
var httpResponse = MockRepository.GenerateMock<HttpResponseBase>();
var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
// you may need to stub specific methods of request/response
var context = MockRepository.GenerateMock<HttpContextBase>();
            context.Stub(r => r.Request).Return(httpRequest);
            context.Stub(r => r.Response).Return(httpResponse); 
```

或者，如果您从**基**类继承，您可以伪造。您在问题中传递给包装器的 HttpContext 将不起作用。

# linux - 检查文件是否是 Freepascal 中的符号链接

> ID：13722613
> 
> 赞同：1
> 
> 时间：2012-12-05T11:48:54.937
> 
> 标签：linux, pascal, freepascal

我正在使用[此处](http://www.freepascal.org/docs-html/rtl/sysutils/findfirst.html)所述的 FindFirst/FindNext 函数读取各种文件和目录。

我唯一的问题是我无法确定文件是否是符号链接。在文件属性中没有常量或标志，我找不到用于测试符号链接的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:33:56.930

Your original idea of using findfirst is best, since it is a portable solution (windows has symlinks too nowadays). The only thing to adapt is to request symlink checking in the attributes you pass to findfirst:

```
uses sysutils;

var info : TSearchrec;

begin
  // the or fasymlink in the next file is necessary so that findfirst
  //     uses (fp)lstat instead of (fp)stat
  If FindFirst ('../*',faAnyFile or fasymlink ,Info)=0 then
     begin
    Repeat
      With Info do
        begin
        If (Attr and fasymlink) = fasymlink then
           Writeln('found symlink: ', info.name)
        else
           writeln('not a symlink: ', info.name,' ',attr);
        end;
    Until FindNext(info)<>0;
    end;
  FindClose(Info);
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:20:17.380

您可以使用 BaseUnix 中的 fpstat：

像这样的东西

```
uses baseUnix;
var s: stat;
fpstat(filname, s);
if s.st_mode = S_IFLNK then
  writeln('is link'); 
```

这也为您提供了有关文件的许多其他信息（时间、大小......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:12:53.233

函数 fpLStat 就是答案：

```
var
  fileStat: stat;

begin 
  if fpLStat('path/to/file', fileStat) = 0 then
  begin
    if fpS_ISLNK(fileStat.st_mode) then
      Writeln ('File is a link');
    if fpS_ISREG(fileStat.st_mode) then
      Writeln ('File is a regular file');
    if fpS_ISDIR(fileStat.st_mode) then
      Writeln ('File is a directory');
    if fpS_ISCHR(fileStat.st_mode) then
      Writeln ('File is a character device file');
    if fpS_ISBLK(fileStat.st_mode) then
      Writeln ('File is a block device file');
    if fpS_ISFIFO(fileStat.st_mode) then
      Writeln ('File is a named pipe (FIFO)');
    if fpS_ISSOCK(fileStat.st_mode) then
      Writeln ('File is a socket');
  end;
end. 
```

打印出来：

```
test_symlink
File is a link
test
File is a directory 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:57:33.533

Thanks for the hint using fpstat. But it does not seem to work. I have two files, a directory and a symlink to a directory:

```
drwxrwxr-x   2 marc marc   4096 Okt  1 09:40 test
lrwxrwxrwx   1 marc marc     11 Dez  5 13:49 test_symlink -> /home/marc/ 
```

If I use fpstat on these to files I get:

```
Result of fstat on file test
Inode   : 23855105
Mode    : 16877
nlink   : 92
uid     : 1000
gid     : 1000
rdev    : 0
Size    : 12288
Blksize : 4096
Blocks  : 24
atime   : 1354711751
mtime   : 1354711747
ctime   : 1354711747

Result of fstat on file test_symlink
Inode   : 23855105
Mode    : 16877
nlink   : 92
uid     : 1000
gid     : 1000
rdev    : 0
Size    : 12288
Blksize : 4096
Blocks  : 24
atime   : 1354711751
mtime   : 1354711747
ctime   : 1354711747 
```

No difference in Attribute st_mode. I think that fpstat gets the stats of the link destination, which indeed is a directory...

# sql-server - 如何使用 SQL Server 关键字处理 JPA / JPQL

> ID：13722615
> 
> 赞同：0
> 
> 时间：2012-12-05T11:49:02.047
> 
> 标签：sql-server, jpa, keyword, jpql

我的实体类

```
@Entity
class MasterStccycode{
   private static final long serialVersionUID = 1L;
   @Id
   @Basic(optional = false)
   @NotNull
   @Size(min = 1, max = 3)
   @Column(name = "CODE")
   private String code;

   @Size(max = 100)
   @Column(name = "DESC")
   private String desc;
} 
```

我的 JPA 查询 `SELECT t.code, t.desc FROM MasterStccycode t`

然后我有以下异常

> 异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
> 
> 内部异常：com.microsoft.sqlserver.jdbc.SQLServerException：关键字“DESC”附近的语法不正确。
> 
> 错误代码：156
> 
> 调用：SELECT CODE, DESC FROM master_stccycode 查询：ReportQuery(referenceClass=MasterStccycode sql="SELECT CODE, DESC FROM master_stccycode")

我知道解决方案是用into包装`DESC`关键字，但我怎样才能在 JPA QL 上做到这一点？`[]``[DESC]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:41:40.150

DESC 是大多数数据库的保留字。您应该重命名该字段。

您也可以引用该字段，但最好重命名它。

```
@Column(name = "\"DESC\"") 
```

# c++ - 字符串替换和奇怪的字符

> ID：13722618
> 
> 赞同：1
> 
> 时间：2012-12-05T11:49:11.887
> 
> 标签：c++, linux, string, strtok

我在 a 中有一个 HTML 数据，`char*`我想逐行获取它，进行一些替换，然后将它们全部添加到一个字符串中。这是我使用的代码

```
std::string to, finalData;
finalData = ""; 
char* char_array = strtok(data, "\n");
while(char_array){
    finalData += std::string(char_array);
    char_array = strtok(NULL, "\n");
} 
```

问题是我在这个（）末尾得到的数据`finalData`有很多`^M`字符，我无法搜索它，因为它有一个特殊字符。有什么办法可以彻底消除角色？我猜测它与从 c 数组到 c++ 字符串的转换有关，并且与`\n`tab 表示为`^I`和 cntrl 表示为有关`^`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:53:31.867

您似乎在 Windows 系统上，或者数据源自 Windows 系统。在 Windows 系统上，换行符实际上是两个字符：`"\r\n"`. 您所看到的`^M`是该换行符序列的回车符 ( `'\r'`)。

删除这些额外字符的一种方法是在循环中使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)and 。[`std::string::erase`](http://en.cppreference.com/w/cpp/string/basic_string/erase)

另一种方法是手动逐个字符地复制到一个新的`std::string`，除非字符是`'\r'`.

# r - ggplot2 中的第二层移动了一个

> ID：13722622
> 
> 赞同：1
> 
> 时间：2012-12-05T11:49:23.720
> 
> 标签：r, layer, ggplot2

我正在尝试绘制具有两层的散点图。原因是我想用答案的数量来表示点的大小。然后我需要在它上面铺一条平滑曲线。所以我使用两个数据集来实现这一点。问题是，当我使用原始数据集使用平滑器放置第二层时，平滑器会在 x 尺度上向左移动一个点。

有谁知道，如何在 R 代码中纠正这个问题？它可能有什么问题吗？我想将 1 添加到 x 变量，但我不想走这么远。

```
library(ggplot2)

q.tab <- xtabs(~x + y, mydata)
q.df <- as.data.frame(q.tab)
pointsize <- q.df$Freq
qplot(x, y, data=q.df) + geom_point(aes(size=as.factor(pointsize)))
+ geom_smooth(data=mydata, method="loess", span=1)) 
```

![在此处输入图像描述](../Images/ed68be8067a3953f8927e7732b5be826.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:04:52.490

With ggplot2 , when you think in terms of layer it is better to use ggplot function and not qplot.

I generate your data (sample function is very convenient to generate data)

```
mydata$x <- sample(1:10,100,replace=TRUE)
mydata$y <- sample(1:10,100,replace=TRUE)
q.tab <- xtabs(~x + y, mydata)
q.df <- as.data.frame(q.tab) 
```

ggplot version:

```
 library(ggplot2)
 ggplot(data=mydata,aes(x,y,size=Freq)) +
      geom_point() + 
      geom_smooth( method="loess", span=1) 
```

qplot version:

```
qplot(data=mydata,x=x,y=y,size=Freq,geom='point')+
  geom_smooth( method="loess", span=1) 
```

![enter image description here](../Images/b00e4d36028e762c13abe2e1f5d50df8.png)

# bash - 如果存在特定字符，则 bash

> ID：13722623
> 
> 赞同：1
> 
> 时间：2012-12-05T11:49:32.490
> 
> 标签：bash

我正在创建一个脚本来自动对硬盘进行分区。

现在我遇到了以下问题：

我需要检查是否有“。” 存在于文本文件中。（所以只是点）。实现这一目标的最佳方法是什么？

例子：

```
hdhelft=`cat /sometextfile`
if grep "." $hdhelft    
then    
hdhelf2=something    
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:51:59.290

无需将文件读入变量，除非那是您真正想要的。从您的代码中并不完全清楚您想要什么，但这是我的解释。使用`-F`标志来`grep`让它解释 . 作为文字，`-q`因此它不提供任何输出（只是是或否）。此外，如果您真的想`$hdhelft`包含文件的内容，请使用它`$(<filename)`来获取。

```
hdhelft=$(</sometextfile)
if grep -qF '.' /sometextfile; then
    hdhelf2=something
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:58:09.283

您需要转义`.`字符，因为 grep 将其解释为“任何字符”。所以使用：

```
grep '\.' yourfile 
```

# magento-1.7 - 信用卡货到付款

> ID：13722625
> 
> 赞同：1
> 
> 时间：2012-12-05T11:49:36.660
> 
> 标签：magento-1.7, magento

在**magento 结帐页面**中，我想要`Credit card payment on delivery`喜欢`the cash on delivery`

是否有人实施此**信用卡货到付款，**请帮助我

也请提供参考链接

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:02:38.197

只是代码，是的，有可能做到这一点。

基本上你只需要这样的模型：支付模块的基本结构是（我将展示带有1个附加信息字段的基本支付示例：

```
Module
------->Block
------------->Form
------------------->Pay.php
------------->Info
------------------->Pay.php
------->etc
------------->config.xml
------------->system.xml
------->Model
------------->Paymentmethodmodel.php 
```

关于这个模块的重要事项：

```
Yourpaymentmodule_Block_Form_Pay 
```

此块制作前端视图。编码：

```
<?php
class YourPaymentModule_Block_Form_Pay extends Mage_Payment_Block_Form
{
protected function _construct(){
    parent::_construct();
    $this->setTemplate('yourpaymentmodule/form/pay.phtml');
}
} 
```

另一个是 Yourpaymentmodule_Block_Info_Pay，这个是从 Admin Order Details 中查看的。

```
<?php
class YourPaymentModule_Block_Info_Pay extends Mage_Payment_Block_Info
{
protected function _construct(){
    parent::_construct();
    $this->setTemplate('yourpaymentmodule/form/pay.phtml');
}

protected function _prepareSpecificInformation($transport = null)
{
    if (null !== $this->_paymentSpecificInformation) {
        return $this->_paymentSpecificInformation;
    }
    $info = $this->getInfo();
    $transport = new Varien_Object();
    $transport = parent::_prepareSpecificInformation($transport);
    $transport->addData(array(
        Mage::helper('payment')->__('Additional Information') => $info->getAdditional(),
    ));
    return $transport;
}
} 
```

最后在你的模型上：

```
<?php 
class PPaymentModuleName_Model_PaymentModuleName extends Mage_Payment_Model_Method_Abstract
{
    protected $_code = 'custompaymentmodule';
    protected $_formBlockType = 'custompaymentmodule/form_pay';
    protected $_infoBlockType = 'custompaymentmodule/info_pay';
    protected $_canUseInternal              = true;
    protected $_canOrder                    = true;

public function assignData($data)
{
    if (!($data instanceof Varien_Object)) {
        $data = new Varien_Object($data);
    }
    $info = $this->getInfoInstance();
    $info->setAdditionalINformation($data->getAdditionalINformation());
    return $this;
}

public function canUseForCountry($country)
{
    return true;
}

public function canUseForCurrency($currencyCode){
    return true;
}
}
    ?> 
```

在您的 phtml 文件上，您进行设计，只是简单的字段或其他东西。

其他重要的事情在您的 etc/modules/CustomPaymentModule.xml 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
<modules>
    <CustomPaymentModule>
        <active>true</active>
        <codePool>community</codePool>
        <depends> 
            <Mage_Payment /> 
        </depends> 
    </CustomPaymentModule>
</modules>
</config> 
```

就是这样。

# intellij-idea - 如何将 IDEA 中的收藏夹从一个已安装版本移动到另一个版本？

> ID：13722629
> 
> 赞同：0
> 
> 时间：2012-12-05T11:49:51.963
> 
> 标签：intellij-idea

我已经下载了 IntelliJ IDEA IDE 的新 RC3，从以前的版本导出设置，导入到新版本，但我的项目缺少我的收藏夹。有没有办法轻松地将它们移动到新安装的版本？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:24:10.867

收藏夹存储在项目中（`.idea/workspace.xml`默认使用文件），请参见`<component name="FavoritesManager">`XML 中的节点下。

您不需要手动移动收藏夹，当您在新的 IDEA 版本中打开同一个项目时，它们会自动可用。

我已经通过在 IDEA 11 中创建一个新项目，将几个项目项添加到收藏夹，然后关闭项目并在 IDEA 12 中打开它来验证它是否有效。完全相同的文件和文件夹列表可以在新版本`Favorites`工具窗口。

# android - 内存不足错误 Nexus 7 android 4.2.1

> ID：13722639
> 
> 赞同：-3
> 
> 时间：2012-12-05T11:50:12.550
> 
> 标签：android, memory, out-of-memory, nexus-7

我正在为所有 android 设备开发一个应用程序。它在所有设备上运行良好，我在三星 Galaxy S1、Galaxy Nexus、摩托罗拉 Xoom、HTC One 以及亚马逊 Kindle Fire 上进行了测试。它在所有设备上都能完美运行，但是当我尝试在 Nexus 7 上使用它时，它崩溃了，并且在日志中显示内存不足错误。我尝试`System.gc();`在 Activity#onPause() 方法中使用，但徒劳无功。应用程序中存在替代的可绘制对象和布局。请帮我解决这个问题。此问题仅特定于 Nexus 7。下面是堆栈跟踪：

```
 12-05 16:42:45.625: E/AndroidRuntime(8759): FATAL EXCEPTION: main
12-05 16:42:45.625: E/AndroidRuntime(8759): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.app/com.android.app.activity.MyListActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.os.Looper.loop(Looper.java:137)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at java.lang.reflect.Method.invokeNative(Native Method)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at java.lang.reflect.Method.invoke(Method.java:511)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at dalvik.system.NativeStart.main(Native Method)
12-05 16:42:45.625: E/AndroidRuntime(8759): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.Activity.setContentView(Activity.java:1881)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at com.android.app.activity.MyListActivity.onCreate(MyListActivity.java:39)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.Activity.performCreate(Activity.java:5104)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-05 16:42:45.625: E/AndroidRuntime(8759):     ... 11 more
12-05 16:42:45.625: E/AndroidRuntime(8759): Caused by: java.lang.reflect.InvocationTargetException
12-05 16:42:45.625: E/AndroidRuntime(8759):     at java.lang.reflect.Constructor.constructNative(Native Method)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
12-05 16:42:45.625: E/AndroidRuntime(8759):     ... 23 more
12-05 16:42:45.625: E/AndroidRuntime(8759): Caused by: java.lang.OutOfMemoryError
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.content.res.Resources.loadDrawable(Resources.java:1965)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.View.<init>(View.java:3328)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.view.ViewGroup.<init>(ViewGroup.java:431)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.widget.LinearLayout.<init>(LinearLayout.java:176)
12-05 16:42:45.625: E/AndroidRuntime(8759):     at android.widget.LinearLayout.<init>(LinearLayout.java:172)
12-05 16:42:45.625: E/AndroidRuntime(8759):     ... 26 more 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:55:01.583

是的，我也遇到过这个问题，但没有找到有效的解决方案，但您可以尝试`android:largeHeap="true"`在应用程序级别的清单中使用

# php - 使用 htacess 重写 url

> ID：13722648
> 
> 赞同：0
> 
> 时间：2012-12-05T11:50:53.937
> 
> 标签：php, .htaccess

我有一个名为“prj”的测试项目文件夹。在那，我有一个名为 test.php 的文件。我想要类似的东西

```
http://localhost/prj/test.php?t=123 
```

应该像这样重写

```
http://localhost/prj/test.php 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:52:48.993

创建一个 .htaccess 文件：

```
RewriteEngine on
RewriteRule ^prj\/test.php$ prj/test.php?t=123 [NC] 
```

**编辑**

如果您的 htaccess 文件位于 prj 文件夹中：

```
RewriteEngine on
RewriteRule ^test.php$ test.php?t=123 [NC] 
```

# java - 将 long 和 bytearray 连接到另一个 bytearray

> ID：13722649
> 
> 赞同：0
> 
> 时间：2012-12-05T11:51:04.687
> 
> 标签：java, bytearray, byte, long-integer

我正在尝试将 long 和 bytearray 连接到另一个 bytearray。

我试过这样：

```
byte[] value1= new byte[16];
byte[] value2= new byte[16];
byte[] finalvalue = new byte[value1.length + value2.length];
long ts = System.currentTimeMillis();
int val = 100;

ByteBuffer.wrap(value1).order(ByteOrder.LITTLE_ENDIAN).asLongBuffer().put(ts);
ByteBuffer.wrap(value2).order(ByteOrder.LITTLE_ENDIAN).asIntBuffer().put(val);

System.arraycopy(value1, 0, finalvalue, 0, value1.length);
System.arraycopy(value2, 0, finalvalue, value1.length,value2.length); 
```

当我试图打印这个时，我没有得到正确的值。它像这样打印

```
BYTEVALUE -95-15-4410659100000000002000000000000000 
```

它应该像这样打印

```
- BYTEVALUE- 1354707038625,100 
```

谁能帮我解决我哪里出错了。

帮助将不胜感激。

**更新：**

****使用StringBuffer****打印**值，如下所示：**

 **```
StringBuffer sb = new StringBuffer(finalvalue.length);
for (int i = 0; i < finalvalue.length; i++) {
  sb.append(finalvalue[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:28:23.707

您的代码没有按照您的想法执行。考虑以下独立的应用程序：

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;

public class ByteArrayTest {

  public static void main(String[] args) {
    byte[] value1 = new byte[16];
    byte[] value2 = new byte[16];
    byte[] finalvalue = new byte[value1.length + value2.length];
    long ts = System.currentTimeMillis();
    int val = 100;

    ByteBuffer.wrap(value1).order(ByteOrder.LITTLE_ENDIAN).asLongBuffer()
        .put(ts);
    ByteBuffer.wrap(value2).order(ByteOrder.LITTLE_ENDIAN).asIntBuffer()
        .put(val);

    System.arraycopy(value1, 0, finalvalue, 0, value1.length);
    System.arraycopy(value2, 0, finalvalue, value1.length, value2.length);

    printByteArray(finalvalue);
  }

  private static void printByteArray(final byte[] array) {
    StringBuilder sb = new StringBuilder(array.length);
    for (byte b : array) {
      sb.append(String.format("%02X", b));
    }
    System.out.println(sb.toString());
  }
} 
```

这个的输出是：

```
BE26086B3B010000000000000000000064000000000000000000000000000000 
```

将其拆分为组件，我们可以看到原因：

*   前 16 个字节是`BE26086B3B0100000000000000000000`. 这是您按小端顺序排列的时间戳。如果忽略零字节，这将转换为`1,354,710,394,558`十进制，这是正确的。

*   后 16 个字节是`64000000000000000000000000000000`，这是您的硬编码值`100`。

零表示您未使用的字节数组中的空间。**

# python - 是否可以在 doctest 文件中使用 py.test 固定装置？

> ID：13722650
> 
> 赞同：2
> 
> 时间：2012-12-05T11:51:05.097
> 
> 标签：python, pytest

我们在项目中使用 py.test 并在大多数测试用例中使用fixture。但我认为不可能在 doctest 文件中使用固定装置。

举一个带有一些代码片段的示例：我在 conftest.py 中有一个浏览器夹具，例如：

```
@fixture
def browser(request):
    from wsgi_intercept import zope_testbrowser
    browser = zope_testbrowser.WSGI_Browser()
    [...]
    return browser 
```

并在文件 test_browser.txt 中使用它，例如：

```
>>> browser.open('some_url')
>>> browser.url == 'some_url'
True 
```

但我看不到将夹具放入 doctest 文件的方法。py.test 有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:11:07.963

目前不支持。pytest 需要在收集时知道将在 doctest 中使用哪些固定装置。如果我们能想出一种方法来声明将要使用哪些夹具，那么添加对它的支持应该不难，`_pytest/doctest.py` 也许还可以自动找出 doctest 需要哪些夹具，不确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:31:04.430

有一个[拉取请求](https://bitbucket.org/hpk42/pytest/pull-request/25)试图在[pytest 存储库](https://bitbucket.org/hpk42/pytest)中实现这一点。它为 doctest 文件提供了两个全局变量，即`fixture_request`和`get_fixture`（它是 的便捷快捷方式`fixture_request.getfuncargvalue`）。预期用途是：

```
>>> browser = get_fixture('browser')
>>> browser.open('some_url') 
```

这与上面 Holger 建议的线路不同`.. pytest-fixtures: ...`，但更容易实现...... :) 不用说，当然可以讨论！

# redirect - Spring MVC GET/重定向/POST

> ID：13722654
> 
> 赞同：7
> 
> 时间：2012-12-05T11:51:15.670
> 
> 标签：redirect, spring-mvc

假设我有 2 个 Spring MVC 服务：

```
@RequestMapping(value = "/firstMethod/{param}", method = RequestMethod.GET)
public String firstMethod(@PathVariable String param) {
    // ...
    // somehow add a POST param
    return "redirect:/secondMethod";
}

@RequestMapping(value = "/secondMethod", method = RequestMethod.POST)
public String secondMethod(@RequestParam String param) {
    // ...
    return "mypage";
} 
```

可以将第一个方法调用重定向到第二个（POST）方法吗？使用第二种方法作为 GET 或使用会话是不可取的。

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T09:22:47.157

您不应将 HTTP GET 重定向到 HTTP POST。HTTP GET 和 HTTP POST 是两个不同的东西。预计它们的行为会非常不同（GET 是安全的、幂等的和可缓存的。POST 是幂等的）。有关更多信息，请参见[HTTP GET 和 POST 语义和限制](https://stackoverflow.com/questions/10966519/http-get-and-post-semantics-and-limitations)或[http://www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)。

您可以这样做：也使用 RequestMethod.GET 注释 secondMethod。然后您应该能够进行所需的重定向。

```
@RequestMapping(value = "/secondMethod", method = {RequestMethod.GET, RequestMethod.POST})
public String secondMethod(@RequestParam String param) {
...
} 
```

但请注意，可以通过 HTTP GET 请求调用 secondMethod。

# python - 如何使用python将数字的工程符号转换为科学的方程式

> ID：13722658
> 
> 赞同：1
> 
> 时间：2012-12-05T11:51:33.470
> 
> 标签：python, equations

我有方程式字符串，其中所有工程符号中的数字都非常好，例如：

```
"(10u*myvar1)+(2.5f*myvar2)/myvar3" 
```

我需要将此方程式字符串中的所有数字转换为科学记数法，以便结果如下：

```
"(10e-6*myvar1)+(2.5e-15*myvar2)/myvar3" 
```

有谁知道如何使这个简单？

我认为将其与 re.findall 拆分为数字和其他东西的艰难方法，而不是修复数字并重新加入字符串。像：

```
vals=re.findall('[\d.\w]+',param_value) #all numbers
operators=re.findall('[^\d.\w]+',param_value) #all not numbers 
```

而不是在这两个列表上工作。但这似乎太复杂了。我看不到将这两个列表加入字符串的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:02:48.247

你可以做一个简单的正则表达式替换：

```
>>> units = 'munpf'
>>> def f(match):
    num = match.group(0)
    exp = -3 * (units.index(num[-1]) + 1)
    return num[:-1] + '10e' + str(exp)

>>> expr = "(10u*myvar1)+(2.5f*myvar2)/myvar3"

>>> re.sub(r'\b\d+(\.\d*)?' + '[%s]' % units + r'\b', f, expr)
'(10e-6*myvar1)+(2.5e-15*myvar2)/myvar3' 
```

如果你愿意，它很容易扩展。

# android - 裁剪的动画图像

> ID：13722659
> 
> 赞同：6
> 
> 时间：2012-12-05T11:51:35.967
> 
> 标签：android, android-layout, android-animation, android-ui

我在使用 Android 动画 API 时遇到了很多麻烦。

我需要在屏幕（600px * 1024px）上从左下角到顶部动画图像（400px * 600px）。此外，动画开始时，大部分图像应位于屏幕之外。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/common_background">

<ImageView android:id="@+id/hand"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:scaleType="matrix"
           android:src="@drawable/howto_throw_hand" />

</RelativeLayout> 
```

活动逻辑：

```
public class MyActivity extends Activity
{
    ImageView hand;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        hand = (ImageView)findViewById(R.id.hand);
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {

        //initial positioning
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                new ViewGroup.MarginLayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT
                )
        );
        layoutParams.setMargins(400, 600, 0, 0);
        hand.setLayoutParams(layoutParams);

        //making animation
        TranslateAnimation animation = new TranslateAnimation(
            Animation.RELATIVE_TO_SELF, 0, Animation.ABSOLUTE, -100,
            Animation.RELATIVE_TO_SELF, 0, Animation.ABSOLUTE, -1000
        );

        animation.setInterpolator(new LinearInterpolator());
        animation.setDuration(3000);

        //applying animation
        hand.startAnimation(animation);
    }
} 
```

并带有初始状态的屏幕截图： ![在此处输入图像描述](../Images/e946dd8a690f4408789fac1659708b81.png)

问题是在动画图像的过程中像这个视频一样被裁剪：[video with animation](http://www.youtube.com/watch?edit=vd&v=Cib5FtSP0Fk)

我错过了很多时间，但一直未能解决问题 =(

可以做些什么来解决问题？

先感谢您！

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

正如 ben75 所说的“......问题是初始位置。当你做一个 TranslateAnimation 时：图像不要移动：它用不同的翻译重绘”和“动画只是翻译这个第一个裁剪的图像。”

我是如何解决这个问题的：

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/common_background">

<ImageView android:id="@+id/hand"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:visibility="invisible"
           android:src="@drawable/howto_throw_hand" />

</RelativeLayout> 
```

活动逻辑：

```
public class MyActivity extends Activity
{
    ImageView hand;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        hand = (ImageView)findViewById(R.id.hand);
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {

        //initial positioning — removed

        //making animation
        TranslateAnimation animation = new TranslateAnimation(400, 300, 600, 0);

        animation.setInterpolator(new LinearInterpolator());
        animation.setDuration(3000);

        //applying animation
        hand.startAnimation(animation);
    }
} 
```

答对了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:54:34.340

我认为问题在于初始位置。当您执行 TranslateAnimation 时：图像不会移动：它会用不同的翻译重绘。您的代码中指定的边距使得图像最初部分超出屏幕，因此图像最初被裁剪。动画只是翻译第一个裁剪的图像。

所以我会建议这样的事情：

```
 layoutParams.setMargins(0, 0, 0, 0); //left, top are the final position of the image
    hand.setLayoutParams(layoutParams);

    //making animation
    TranslateAnimation animation = new TranslateAnimation(
        Animation.RELATIVE_TO_SELF, 400, Animation.ABSOLUTE, 0,
        Animation.RELATIVE_TO_SELF, 600, Animation.ABSOLUTE, 0
    ); 
```

# java - Primefaces 3.5 + OmniFaces 1.3 SelectItemsIndexConverter 问题与 SelectOneMenu

> ID：13722661
> 
> 赞同：3
> 
> 时间：2012-12-05T11:51:40.523
> 
> 标签：java, jsf, primefaces, omnifaces

我正在使用 Primefaces 3.5 2012 年 12 月 5 日的快照，以及 Mojarra 2.1.14 和 Tomcat 7.0.33。

当对 POJO 对象使用单元内编辑模式（非行内）时，无论何时单击对象然后单击通过单击其他对象，前一个对象将显示其值而不是其标签。这只是“装饰”，因为当您重新加载页面时，它将显示标签值。

```
<p:dataTable id="insurancepolicyTable" var="insurancepolicy" widgetVar="insurancepolicyList" value="#{insurancepolicybean.objectList}" paginator="true" rows="15" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" currentPageReportTemplate="#{text['table.insurancepolicy.filter.count']}" rowsPerPageTemplate="15,25,50,100" emptyMessage="#{text['table.insurancepolicy.filter.notfound']}" filteredValue="#{insurancepolicybean.filteredObject}" editable="true" editMode="cell" cellEditEvent="click" draggableColumns="true" rowKey="#{insurancepolicy.id}" > 

               <p:column id="branchColumn" headerText="#{text['label.branch']}" sortBy="#{insurancepolicy.branch.name}" filterBy="#{insurancepolicy.branch.name}" filterMatchMode="contains">  
                <p:cellEditor>  
                    <f:facet name="output">  
                        <h:outputText value="#{insurancepolicy.branch.name}" />  
                    </f:facet> 
                    <f:facet name="input">  
                        <div  class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all">
                            <p:selectOneMenu id="branchselectinsurancepolicylist" value="#{insurancepolicy.branch}" styleClass="customSelect" converter="omnifaces.SelectItemsIndexConverter">                      
                                <f:selectItems value="#{insurancepolicybean.branchList}" var="branch" itemLabel="#{branch.name}" itemValue="#{branch}" />                    
                            </p:selectOneMenu>    
                        </div>
                    </f:facet> 
                </p:cellEditor>    
            </p:column>   
            <p:ajax event="cellEdit" listener="#{insurancepolicybean.onEdit}" update="@form" />
            <pe:resetInput event="cellEdit" for="@form" />

        </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:25:56.483

我可以重现它。这是 PrimeFaces 中的一个错误。此问题与转换器无关。该问题只是由 PrimeFaces 特定的 JavaScript 代码引起的，该代码在“取消编辑”后错误地重新显示所选选项的值而不是所选选项的标签。

这更容易复制如下：

```
<p:selectOneMenu value="#{insurancepolicy.branchAsString}">                      
    <f:selectItems value="#{insurancepolicybean.branchMap}" />
</p:selectOneMenu> 
```

和

```
private Map<String, String> branchMap;

@PostConstruct
public void init() {
    branchMap = new LinkedHashMap<String, String>();
    branchMap.put("branch label 1", "branch value 1");
    branchMap.put("branch label 2", "branch value 2");
    branchMap.put("branch label 3", "branch value 3");
} 
```

我建议将其[报告](http://code.google.com/p/primefaces/issues/list)给 PrimeFaces 家伙。

# java - 如何使用 Eclipse 从相同的代码自动构建不同的 JAR？

> ID：13722662
> 
> 赞同：2
> 
> 时间：2012-12-05T11:51:41.463
> 
> 标签：java, eclipse, maven, inheritance, ant

我在项目中有更多类，但现在请只考虑 A、B 和 C 类。

```
abstract public class A {...}

public class B extends A {...}

public class C extends A {...} 
```

然后稍后我有一个代码，比如在 D 类中，就像这样

```
A a = new B();
//A a = new C();

//use a's methods 
```

**所以我现在的问题是如何在 Eclipse 构建中轻松配置两个单独的 JAR。**第一个应该`B.class`包含和`C.class`排除并且编码为`A a = new B();`第二个应该`C.class`包含和`B.class`排除并且编码为`A a = new C();`

我对 Ant 和 Maven 知之甚少。在这种情况下我需要使用它们吗？

也许，我的设计有问题，如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:14:23.907

您想要的主要是代码加载问题，而不是 Ant 问题。

只是您为创建新类实例而提出的两个语句：

```
A a = new B(); 
A a = new C(); 
```

使用静态代码调用构造函数。Ant 无法更改代码，因此我看到的唯一使用 Ant 的方法是使用 Ant 生成 Factory 类作为构建过程的一部分，具体取决于JAR 中是否包含`A`或包含`C`

但这会导致项目不能再直接在 Eclipse 中使用，因为 Eclipse 项目中的原始源代码缺少因子类。

恕我直言，更好的方法是动态类加载（可以与反射结合使用）。您可以自动搜索扩展的类，`A`或者将配置文件/信息添加到 JAR 中，指定要创建的类（例如属性文件）。将属性文件与 Java 文件放在 src 文件夹中，然后通过`this.getClass().getResource("myclass.config");`

配置文件可以包含应该用于创建新实例的类名。以下代码片段假定`B`并且`C`两者都有一个不带任何参数的公共构造函数：

```
String classNameToLoad = ... // loaded from config file example "mypackage.B"
final Class<?> c = Class.forName(classNameToLoad);
final Class<? extends A> ac = c.asSubclass(A.class);
final Constructor<? extends A> a_ctor =  ac.getConstructor();
final A a = a_ctor.newInstance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:55:01.223

在你的eclipse中，如果你右键单击你的项目，你将有一个选项`Export` 单击它，然后选择jar，然后命名jar，选择你想要的类。对另一个罐子重复此操作。

检查这个[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-33.htm](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-33.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:55:25.680

最简单的方法是在 Eclipse 中拥有 3 个独立的 Java 项目。根据您的示例，那将是

*   B码项目
*   C代码项目
*   通用代码

Eclipse 允许您从构建路径中的项目中引用另一个项目的 bin 目录。

然后，您可以将 B 和 C 项目导出（或使用 Ant）作为单独的项目。

# c# - 从另一个 powershell cmdlet 调用 C# powershell cmdlet

> ID：13722666
> 
> 赞同：0
> 
> 时间：2012-12-05T11:51:53.143
> 
> 标签：c#, powershell-2.0

这是我的场景：我有 add-data 和 add-bulkdata cmdlet，它们都是用派生自 C# 编写的`pscmdlet`，add-bulkdata 需要一个 csv 文件，并且每一行都输入到 add-data cmdlet。Add-data cmdlet 可能会引发终止异常，如果它确实我不知道如何在 add-bulkdata cmdlet 中接收它，在 bulkdata cmdlet 中我得到一个`commandinvocationexception`但它没有`ErrorRecord`基础 add-data 设置的那个。此外，如果我查询 pipeline.errors 它没有给我任何信息。

处理这种情况的最佳方法是什么？

我的 Add-Bulkdata`ProcessRecord()`函数看起来像这样：

```
InitialSessionState initial = InitialSessionState.CreateDefault();
initial.ImportPSModule(new[] { @"C:\mybinary.dll" });
Runspace runspace = RunspaceFactory.CreateRunspace(initial);
runspace.Open();

Pipeline pipeline = runspace.CreatePipeline();
pipeline.Commands.Add(cmd); //cmd is add-data cmdlet
pipeline.Commands.Add("out-string"); // I have tried with and without this

Collection<PSObject> results = pipeline.Invoke();
Collection<object> errors = pipeline.Error.ReadToEnd(); 
```

# drupal - 基本页面内容未显示

> ID：13722678
> 
> 赞同：1
> 
> 时间：2012-12-05T11:52:30.477
> 
> 标签：drupal, drupal-7

我添加了一个包含标题和正文的基本页面。但是当我去看它时，没有正文内容。但如果我去编辑它，它就在那里！

任何想法为什么？抱歉，我是 Drupal 的新手...

Drupal 版本：7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:14:25.923

请确保您在正确的模板 node.tpl.php/page.tpl.php 中打印出节点/页面内容

# android - 当我对图像产生影响时，android应用程序中的内存泄漏

> ID：13722679
> 
> 赞同：1
> 
> 时间：2012-12-05T11:52:37.887
> 
> 标签：android, android-camera, effects

我是相机内功能的新手。当我启动相机并单击图像视图上设置的图像后，然后单击效果按钮。现在应用程序已关闭。错误是内存。这个应用程序是在 2.2 以下版本上制作的。当我曾经在 4.4 版本中运行此应用程序时，该应用程序被弯腰显示应用程序中的内存泄漏

```
12-05 17:10:53.898: E/dalvikvm-heap(21667): Out of memory on a 31961104-byte allocation.
12-05 17:10:53.938: E/dalvikvm(21667): Out of memory: Heap Size=42403KB, Allocated=34174KB, Limit=49152KB
12-05 17:10:53.938: E/dalvikvm(21667): Extra info: Footprint=42403KB, Allowed Footprint=42403KB, Trimmed=0KB
12-05 17:10:53.948: E/AndroidRuntime(21667): FATAL EXCEPTION: main
12-05 17:10:53.948: E/AndroidRuntime(21667): java.lang.OutOfMemoryError: (Heap Size=42403KB, Allocated=34174KB)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.graphics.Bitmap.nativeCreate(Native Method)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.graphics.Bitmap.createBitmap(Bitmap.java:917)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.graphics.Bitmap.createBitmap(Bitmap.java:897)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at com.photomarging.PhotoMargingActivity.createSepiaToningEffect(PhotoMargingActivity.java:577)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at com.photomarging.PhotoMargingActivity.applyEffect(PhotoMargingActivity.java:472)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at com.photomarging.PhotoMargingActivity$5.onClick(PhotoMargingActivity.java:199)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.view.View.performClick(View.java:3549)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.view.View$PerformClick.run(View.java:14393)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.os.Handler.handleCallback(Handler.java:605)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.os.Looper.loop(Looper.java:154)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at android.app.ActivityThread.main(ActivityThread.java:4945)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at java.lang.reflect.Method.invoke(Method.java:511)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-05 17:10:53.948: E/AndroidRuntime(21667):    at dalvik.system.NativeStart.main(Native Method) 
```

主要课程在这里[http://pastebin.com/sR5FPG22](http://pastebin.com/sR5FPG22)另一个课程在这里[http://pastebin.com/GY3xzPBW](http://pastebin.com/GY3xzPBW)（照片合并），我不明白如何解决问题帮助我和预览课程在这里

```
 @TargetApi(8)
  class Preview extends SurfaceView implements SurfaceHolder.Callback {
private static final String TAG = "Preview";

SurfaceHolder mHolder;
public Camera camera;

Preview(Context context) {
    super(context);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    if(camera==null){
    camera = Camera.open();
    }
    else{
        try {
            camera.reconnect();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    try {
        camera.setPreviewDisplay(holder);

        camera.setPreviewCallback(new PreviewCallback() {

            public void onPreviewFrame(byte[] data, Camera arg1) {
                FileOutputStream outStream = null;
                try {

                    ByteArrayInputStream imagestream=new     
  ByteArrayInputStream(data);
                    Bitmap     
      icon=BitmapFactory.decodeStream(imagestream);

    PhotoMargingActivity.img.setImageBitmap(icon);
                    outStream = new 
       FileOutputStream(String.format("/sdcard/%d.jpg",    
  System.currentTimeMillis())); 
                    outStream.write(data);
                    outStream.close();
                    Log.d(TAG, "onPreviewFrame - wrote bytes: 
         " + data.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                }
                    Preview.this.invalidate();
                    //
            }
        });
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    camera.stopPreview();

    camera.release();
    camera = null;
}
     ///////////////////// change in the preve class /////////////////////////////
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Now that the size is known, set up the camera parameters and begin
    // the preview.
     //        Camera.Parameters parameters = camera.getParameters();
      //        parameters.setPreviewSize(w, h);
      //        camera.setParameters(parameters);
      //        camera.startPreview();

    // Now that the size is known, set up the camera parameters and begin
    // the preview.
    //        Camera.Parameters parameters = camera.getParameters();
     //        parameters.setPreviewSize(w, h);
     //        camera.setParameters(parameters);
      //        camera.startPreview();

     Camera.Parameters parameters = camera.getParameters();
        List<Camera.Size> previewSizes = parameters.getSupportedPreviewSizes();

        // You need to choose the most appropriate previewSize for your app
        Camera.Size previewSize;//= // .... select one of previewSizes here
                 if(previewSizes.size() > 1){
                        previewSize =previewSizes.get(1);  // .... select one of    
           previewSizes here
                    }else{
                        previewSize =previewSizes.get(0);
                    }
        parameters.setPreviewSize(previewSize.width, previewSize.height);
        camera.setParameters(parameters);
        camera.startPreview();

}

@Override
public void draw(Canvas canvas) {
        super.draw(canvas);
        Paint p= new Paint(Color.RED);
        Log.d(TAG,"draw");
        canvas.drawText("PREVIEW", canvas.getWidth()/2, canvas.getHeight()/2, p );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:35:44.827

在您处理使用中的主要变量的特定位置，在您的代码中使用以下代码。

```
Runtime.getRuntime().gc(); 
```

另外，请继续练习，通过以下方式回收不需要的位图对象。

```
if (bitmap != null){
  bitmap.recycle();
  bitmap = null;
} 
```

希望这对您有所帮助。

谢谢。

# objective-c - 标签文本中的中文字符串

> ID：13722682
> 
> 赞同：0
> 
> 时间：2012-12-05T11:52:43.097
> 
> 标签：objective-c, ios, nsstring

我有一个标签，我必须在其中放置从数据库中提取的中文字符串，但没有任何结果。我注意到字符串没有从数据库中提取，而所有其他工作正常。我能做些什么？

```
 char *subTitle= (char*)sqlite3_column_text(statement,13);
  NSLog(@" The sutitle is %s", subTitle);
      //The sutitle is
  rowTable.sottotitolo = [[NSString alloc]initWithUTF8String: subTitle];
  NSLog(@"The subtitle is %@", rowTable.sottotitolo);
      //The subtitle is 
```

使用西方字母以外的方法？

```
 NSLog(@"The string in chinese is %@", self.chinaTable.subtitle);
         //The string in chinese is 
         //is not printed to the screen,but the database is written correctly

   self.labelTitle.text = self.chinaTable.subtitle;
        //empty out 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:57:34.760

尝试`CFStringConvertEncodingToNSStringEncoding`和`kCFStringEncodingBig5_E`。

另见[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html)和[国际](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171i) 或创建自己的编码[见](https://stackoverflow.com/questions/6053197/ios-stringwithcontentsofurl-with-encoding) 和[这个](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/uid/20001211-CH2g-BCIHAEFA)

```
unichar ellipsis = 0x2026;
NSString *theString = [NSString stringWithFormat:@"To be continued%C", ellipsis];

// custom encoding

NSStringEncoding encoding = CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingDOSChineseTrad);

NSData *asciiData = [theString dataUsingEncoding:encoding 
                            allowLossyConversion:YES];

NSString *asciiString = [[NSString alloc] initWithData:asciiData 
                                              encoding:encoding]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:40:16.163

从 sqlite 检索数据时，不要指定编码模式，而是使用以下命令：

```
NSString *myChineseText = [NSString stringWithFormat:@"%s",(const char*)sqlite3_column_text(statement, index)];

NSLog(@"%@",myChineseText); 
```

希望，它会解决你的问题。:)

# android - 如何找到带有网站的 android 设备并与安装在其上的应用程序进行通信

> ID：13722684
> 
> 赞同：2
> 
> 时间：2012-12-05T11:52:44.210
> 
> 标签：android, content-management-system, android-notifications

android 能够定位设备，然后通信和更新这些设备。这是我想要实现的基础。我创建了一个内容管理系统，它是一个需要登录详细信息的网页。该 CMS 将包含我所有的 android 设备、这些设备的用户以及这些设备可用的所有应用程序的记录。CMS 是使用 html 构建的，它还使用 javascript、php 和 mysql。每个 android 设备都将安装我的一个应用程序，并且将是一个仅启用 wifi 的设备（这就是它与世界通信的方式）。场景是，伦敦的用户将使用存储在我的 cms 上的设备，他们将能够通过 wifi 访问互联网。我想使用 cms 向设备发送通知，而我的位置是。我登录到我在苏格兰的 cms。1、

2，我如何确保它被发送到正确的设备和该设备上的正确应用程序？（即，如果我想联系有手机的人，我使用他们的电话号码，在这种情况下，设备没有 SIM 卡，只能连接到 wifi。）

请为我提供一个明确的答案以及如何实现这一点的链接，如果答案是直截了当的，请原谅我的无知我是新手。再次说明一下，我想将通知从我的 cms 网页发送到我在 android 中使用 eclipse 和 java 在特定的 android 设备上制作的特定应用程序，该设备唯一的互联网连接是通过 wifi。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:55:52.427

我认为 Google Cloud Messaging 适合您的问题。

这是链接：http: [//developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

# facebook - facebook wall feeds 输出 - access_token 问题

> ID：13722687
> 
> 赞同：1
> 
> 时间：2012-12-05T11:52:48.993
> 
> 标签：facebook, access-token, facebook-wall

我有一个明显简单的问题正在杀死我。我读了很多关于这个主题的书，但我找不到任何解决方案。

当我使用此网址访问我的墙时：

个人资料提要（墙）：[https:](https://graph.facebook.com/me/feed?access_token=(ACCESS_TOKEN) //graph.facebook.com/me/feed?access_token=( ACCESS_TOKEN GENERATED_BY_FACEBOOK)，

我收到了我发布的所有状态提要，但如果我使用由（我拥有的）应用程序生成的访问令牌，我会收到我发布的提要和我发布到同一级别其他帖子的评论。

如何生成应用访问令牌以获得与 facebook 生成的结果相同的结果？

# android - 具有相同数据库名称的 Android 多个 ContentProvider 会引发“没有这样的表”异常

> ID：13722690
> 
> 赞同：1
> 
> 时间：2012-12-05T11:53:04.393
> 
> 标签：android, sqlite, sqliteopenhelper

当为多个 ContentProviders 使用相同的数据库名称时，查询失败并抛出异常为“没有这样的表”。

我研究了参考资料，书籍，互联网讨论，但找不到解决方案。

我注意到除了清单中第一个声明的 ContentProvider 之外，所有 ContentProvider 都失败了。所以我给了唯一的数据库名称，异常就消失了。它可以工作，但是拥有多个单表数据库很奇怪。

如果可能的话，我想弄清楚为什么会出现问题。下面是我的实质实现。

所有 ContentProvider 都有单独的 SQLiteOpenHelper 定义为内部私有类。DATABASE_NAME 和 DATABASE_VERSION 都是一样的。

```
public class TheFirstProvider extends ContentProvider {

    private static final String DATABASE_NAME = "dbname.db";
    private static final int DATABASE_VERSION = 1;

    private SQLiteOpenHelper dbHelper;

    @Override
    public boolean onCreate(){
        mContext = getContext();
        dbHelper = new FirstDbHelper(mContext, DATABASE_NAME, null, DATABASE_VERSION);
    }

    private class FirstDbHelper extends SQLiteOpenHelper {
         ...
        private static final String DATABASE_CREATE_FIRST = ... ;

        @Override
        public void onCreate(SQLiteDatabase db){
            db.execSQL(DATABASE_CREATE_FIRST);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:27:46.277

检查您的 Create table 语句并验证它是否正确执行，并查看您在查询中使用的表是否与创建的表具有完全相同的名称。有时 DDL（创建语句）上的一个小错误会导致这样的问题静默发生。

我还建议你安装这个[eclipse 插件](http://www.tylerfrankenstein.com/browse-android-emulator-sqlite-database-eclipse)来可视化你的模拟器上的数据库，这样你就可以看到你创建的表并检查它是否是你所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:59:26.093

```
 private class FirstDbHelper extends SQLiteOpenHelper{      
     public FirstDbHelper(Context context) {
        super(context,DATABASE_NAME,null,DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        String query="Your Query";
        db.execSQL(query);
    } 
```

如下设置您的代码。它将工作。

# mysql - 如何比较两个不同提供商的两个不同数据库之间的数据？

> ID：13722694
> 
> 赞同：0
> 
> 时间：2012-12-05T11:53:13.937
> 
> 标签：mysql, sql, comparison, migration

我们计划进行从 MySql Server 到 MSSQL Server 的数据库迁移；我们有一些外部工具和一些内部工具来完成此任务。现在我们需要有一个流程来验证迁移后 MySql 和 MSSQL 服务器之间的数据。我们进行了搜索，发现了 tablediff.exe。但它似乎只能在 MSSQL 数据库之间进行比较。不确定我们是否可以通过为 MySql 数据库创建链接服务器来使用此工具（如果可以，请告诉我如何操作）。如果有任何其他工具，请建议我。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:27:07.263

我使用 mssql 服务器的链接服务器选项实现了这一点。我已经为我的 mysql 数据库创建了链接服务器，并使用以下查询来实现这一点

```
(select * from a 
except select * openquery(LINKEDSERVER,'select * from a'))
Union
(select * openquery(LINKEDSERVER,'select * from a')
except 
select * from a) 
```

我不确定这是否是正确的做法。但它确实对我们有用。

# groovy - 从字符串中获取 IP 地址（Groovy）

> ID：13722697
> 
> 赞同：8
> 
> 时间：2012-12-05T11:53:27.730
> 
> 标签：groovy, ip-address

我想提取IP并返回它。就像是

```
def getIPfromString ( myString ) {

  ..
  return IP 
}

IP = getIPfromString("ftp://192.168.13.108/720_prev")
print " IP Address : " + IP 
```

输出 ：

```
IP Address : 192.168.13.108 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:55:56.230

您可以使用带有一点 Groovy 魔法的 Java 的 URL 类；-)

```
String getAddressFromString( String url ) {
  url.toURL().host
}

String ip = getAddressFromString( 'ftp://192.168.13.108/720_prev' )

println "IP Address : $ip" 
```

其中（根据要求）输出：

```
IP Address : 192.168.13.108 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:33:45.923

如果 URL 已经有 IP 地址，则转换为 URL 可以提取 IP，但如果在 URL 主机组件中找到域主机名（例如 www.stackoverflow.com），则需要执行解析为地址。这需要在 Java API 中调用*InetAddress.getByName() 。*

如果 URL 已经有地址，则*InetAddress.getByName()*将简单地按原样返回地址。此外，如果无法将主机名解析为地址，则需要处理异常。

```
 String getAddressFromString( String url ) 
         throws MalformedURLException, UnknownHostException
        {
          String host = url.toURL().host
          // this would be equivalent to calling new URL(url).getHost()
          return InetAddress.getByName(host).getHostAddress()
        }

        String ip = getAddressFromString( "http://stackoverflow.com/" )
        println "IP Address : $ip" 
```

输出：

```
IP Address : 69.59.197.21 
```

# php - 如果写入文件失败，文件会发生什么？

> ID：13722698
> 
> 赞同：0
> 
> 时间：2012-12-05T11:53:29.803
> 
> 标签：php, file-processing

该文件是否仍具有正确的先前内容？

1)当使用file_put_contents函数发生错误时

2)当使用复制函数发生错误时

我问是因为我想实现半动态页面，我想知道这个过程中的错误是否会导致网页出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:20:29.027

如果您正在做简单的事情，例如`file_put_contents("index.html")`，可能会出现多个问题：

*   如果写入失败，则会留下不需要的 HTML 或空白页面；
*   如果服务器繁忙，访问者可以在 PHP 进程写入文件时看到空白页面或部分内容。

你应该做的是使用临时文件：

```
if (false !== file_put_contents("index.html.tmp", $data)) {
   rename("index.html.tmp", "index.html");
} 
```

使用临时文件和重命名将避免上述两个问题。适用于各种文件类型和用例。如果重命名失败，您仍将拥有旧版本。这很好，因为即使无法执行所有文件操作，它也不会削弱您的站点。

要增加安全性，请将 tmp 文件写入 Web 浏览器无法访问的路径。

# c# - 如何在 Facebook 页面中获取 HTML 隐藏代码

> ID：13722699
> 
> 赞同：0
> 
> 时间：2012-12-05T11:53:29.510
> 
> 标签：c#, facebook, html-parsing

我注意到在 HTML Facebook 代码页中，一些帖子是隐藏的，它们仅在您滚动页面时显示。

是否可以获取 Facebook 页面中的所有文本帖子，甚至是被滚动功能隐藏的文本？（我尝试使用经典的 WebRequest、WebResponse 和 ReadStream 响应，但没有可滚动代码）我应该为此任务下载特定库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:18:35.027

你不能这样做，因为当你滚动它时，你会得到数据来查看。

# python - 如何在 Python 中获取 disutils 设置的错误日志？

> ID：13722706
> 
> 赞同：10
> 
> 时间：2012-12-05T11:54:03.057
> 
> 标签：python, distutils

我是 Python 新手。我已经为 Python 创建了一些 C/C++ 扩展，并且能够在 Python disutils 安装脚本的帮助下构建这些扩展。但是，我必须将此设置脚本集成到现有的构建系统中。因此，我编写了另一个脚本来使用 run_setup() 方法调用此设置脚本。

```
distributionObj = run_setup("setup.py",["build_ext"]) 
```

现在，如果在构建扩展（编译器、链接器或任何东西）期间发生任何错误，我必须能够从调用者脚本中获取信息以及错误字符串以通知构建过程。

请给我一些建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T15:56:51.097

在环境中设置 DISTUTILS_DEBUG=1 将导致调试日志记录。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-31T10:36:27.183

**distutils1**（第一个版本）也使用了内部版本的日志记录（有点硬编码，它没有使用标准的日志记录模块）。我认为可以将*详细级别*编码设置为：

```
import distutils.log
distutils.log.set_verbosity(-1) # Disable logging in disutils
distutils.log.set_verbosity(distutils.log.DEBUG) # Set DEBUG level 
```

所有 distutils 的日志级别可用：

```
DEBUG = 1
INFO = 2
WARN = 3
ERROR = 4
FATAL = 5 
```

您可以查看 distutils 的“Log”类的源代码以供参考。通常用于*/usr/lib/python2.7/distutils/log.py中的 Python 2.7*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T11:59:38.357

`-v`将参数传递`python setup.py build`给以增加详细程度通常可以得到更详细的错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-10T16:32:21.530

详细选项不是附加的，它转换为布尔值。因此，无论您调用多少次详细选项，它始终为 1，并且 1 始终将级别设置为 INFO，无论如何这都是默认设置。

# xtext - 使用 xtext 不是作为插件

> ID：13722707
> 
> 赞同：0
> 
> 时间：2012-12-05T11:54:05.017
> 
> 标签：xtext

一般来说，我有我的 dsl 作为插件，我想创建一个使用我的 dsl 的新应用程序

所以我试着写这段代码：

```
JsonParser p = new JsonParser();
IParseResult r = p.parse(new StringReader("{}")); 
//once that work it will be the file data instead of {} 
```

但是当我进行解析时，节点模型构建器为空，并且以下行有异常： return doParse(ruleName, in, nodeModelBuilder.get(), 0);

而且我不确定如何初始化 nodeModelBuilder

我确定我错过了一些步骤，但我对 xtext 过程不太熟悉。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:21.590

您已经在 Eclipse 论坛上阅读了以下答案。您需要通过注入来创建一个 IParser 实例。所有依赖项也被注入。您的 JsonRuntimeModule 中描述了必要的绑定。Xtext 使用 Guice 和这些模块将所有内容粘合在一起。这种模式称为依赖注入。

> ...我想创建一个使用我的 dsl 的新应用程序

所以你想在独立模式下使用你的 Json DSL。

我的建议：

*   使用 CLI 创建一个最小的 Eclipse IApplication 来读取和解析输入文件。Eclipse IApplication 的优点是您可以轻松部署 DSL 运行时的无头版本。[1]
*   查看您的 JsonInjectorProvider 和来自 Xtext 的 JUnit 支持的 ParseHelper [2] 以获取如何在独立模式下使用您的 DSL 和 Xtext 运行时的示例。

[1] [http://www.eclipsezone.com/eclipse/forums/t99762.html](http://www.eclipsezone.com/eclipse/forums/t99762.html) [2] org.eclipse.xtext.junit.util.ParseHelper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T02:22:10.220

您需要使用`StandaloneSetup`以在独立模式下运行。

[请参阅本教程以获取帮助](http://davehofmann.de/blog/?p=101)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:52:33.780

您不应该直接调用解析器。请参阅： [http ://wiki.eclipse.org/Xtext/FAQ#How_do_I_load_my_model_in_a_standalone_Java_application.C2.A0.3F](http://wiki.eclipse.org/Xtext/FAQ#How_do_I_load_my_model_in_a_standalone_Java_application.C2.A0.3F)

代码应如下所示：

```
Injector injector = new MyDslStandaloneSetup().createInjectorAndDoEMFRegistration();
XtextResourceSet resourceSet = injector.getInstance(XtextResourceSet.class);
resourceSet.addLoadOption(XtextResource.OPTION_RESOLVE_ALL, Boolean.TRUE);
Resource resource = resourceSet.getResource(new File("/../../some.json").toURI(), true);
Model modelRootElement = (Model) resource.getContents().get(0); 
```

将 MyDsl 替换为“JsonParser”或“Json”或任何您的 DSL 名称。在您的 DSL 源代码中查找类 JsonStandaloneSetup 或 JsonParserStandaloneSetup。此类是在您启动 Xtext 项目时生成的（或者当您第一次运行工作流时，现在不确定）。替换`Model`为您的根元素类型。它必须是 EObject 子类。

解析/验证/构建 AST 已完成`resource.getContents()`命令。不是很直观，我知道。这是因为您必须初始化上下文，事实上，各种上下文，Guice 上下文，EMF 上下文，也许还有其他，都封装在 StandaloneSetup（和 RuntimeModule）中。上下文类似于 Spring 应用程序上下文。

# macos - 设置当前目录 - 苹果脚本

> ID：13722709
> 
> 赞同：2
> 
> 时间：2012-12-05T11:54:09.307
> 
> 标签：macos, applescript

我有一个应用程序和一个`.sh`文件。我需要一个苹果脚本，当双击时，设置该`.sh`文件的权限并运行它。下面是我的代码：

```
set app_directory to POSIX path of ((container of (path to me)) as text)

tell application "Terminal" to do shell script "chmod 777 " & app_directory & " start.sh"
tell application "Terminal" to do shell script app_direcory & "start.sh" 
```

但我收到以下错误：

> 错误“无法将别名容器 \"Macintosh HD:Users:santhosh:Desktop:EPPFN ver1:Barcode Application_mac:test_app.app:\" 输入文本。” 编号 -1700 从别名“Macintosh HD:Users:santhosh:Desktop:EPPFN ver1:Barcode Application_mac:test_app.app:”的容器到文本

如何设置当前路径，然后使用相对路径运行脚本。

编辑：我将代码修改为：

```
set x to POSIX file ((POSIX path of (path to me)) & "/..") as text
set thescript to ("chmod 777 " & x & "start.sh") as text
tell application "Terminal" to do shell script (thescript) 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:12:06.360

尝试：

```
tell application "System Events" to set app_directory to POSIX path of (container of (path to me))
set thescript to ("chmod 777 " & quoted form of (app_directory & "/start.sh"))
do shell script thescript 
```

# javascript - javascript 键码参考

> ID：13722711
> 
> 赞同：1
> 
> 时间：2012-12-05T11:54:15.313
> 
> 标签：javascript, keycode

> **可能重复：**
> [JavaScript 键码的完整列表](https://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes)

我在哪里可以找到javascript中关键代码的**官方参考？**

谷歌只发现有间隙的表格。

特别是我正在寻找双引号的关键代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:55:55.667

我个人使用这个列表： http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes) 这是 JS 键盘事件的一种参考：http: [//unixpapa.com/js /key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:56:44.627

关键代码`doube quote`是~~34~~ 222 (Mozzila, firefox, IE) 类似的问题已经在这里问过：[什么是 JavaScript KeyCodes？](https://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:51:17.327

如果您正在测试键入的字符（而不是检测不可打印的击键），那么您不需要查找表。使用该`keypress`事件，您可以在任何主要浏览器中从事件中获取字符代码并因此键入字符：

```
document.onkeypress = function(evt) {
    evt = evt || window.event;
    var charCode = (typeof evt.which == "number") ? evt.which : evt.keyCode;
    if (String.fromCharCode(charCode) == '"') {
        alert("Double quote typed");
    }
}; 
```

# ruby-on-rails - 使用带有 nginx 的 phusion 乘客 3.0.17 运行多个 Rails 网站

> ID：13722718
> 
> 赞同：4
> 
> 时间：2012-12-05T11:54:40.913
> 
> 标签：ruby-on-rails, nginx, virtualhost, passenger, ruby-on-rails-2

我在 google 上搜索了使用 phusion 乘客 3.0.17 和 nginx 部署多个 Rails 网站，但没有得到相关结果。我如何通过运行passenger-install-nginx-module 命令完成乘客nginx 设置。

**问题 1）**我正在寻找合适的初学者教程，用于使用 phusion 乘客 3.0.17 和 nginx 运行多个 Rails 网站

**问题 2）**我正在寻找用于启动、停止、重新启动（所有网站的全乘客 nginx 服务器（即））以及（个别 Rails 网站）的命令

**注意：**我*不是在寻找乘客独立*解决方案。我正在使用 REE 1.8.7 和 rails 2.3.14

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T12:10:34.663

根据Passenger 的文档，您为要部署的每个应用程序创建一个新的虚拟主机。并将站点指向`root`您的应用程序公共目录，并添加`passenger_enabled`指令。与使用 Apache 部署完全相同。

```
http {
    ...

    server {
        listen 80;
        server_name www.mycook.com;
        root /webapps/mycook/public;
        passenger_enabled on;
    }

    ...
} 
```

更多信息：[http ://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_a_ror_app](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_a_ror_app)

关于问题 2。重新启动取决于您要执行的操作。我将假设您使用的发行版使用`init.d`

这些是您执行不同类型的“重新启动”的 3 种情况。

您在 Nginx 上的某些配置存在问题。或者它的行为很奇怪。因此，您将像这样重新启动 Nginx 服务：`/etc/init.d/nginx restart`

下一个案例是你在 Nginx 上部署了一个 rails 或 sinatra 应用程序，带有乘客模块。并且您想让它重新加载您刚刚推送到服务器的一些更改。乘客在您的应用程序中观看`tmp/restart.txt`文件。所以通过简单地运行`touch tmp/restart.txt`。虽然 cd'd 进入应用程序的文件夹会告诉乘客重新加载应用程序。

最后一种重启/重新加载的情况是为 Nginx 重新加载。您在添加或更改 VHOST 时使用它。 `/etc/init.d/nginx reload`. 这允许您重新加载您的虚拟主机和其他配置而不会断开连接。

看看乘客文件，它非常彻底。[nginx 乘客文档](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:27:55.440

这是为多个虚拟主机配置 Nginx 的分步教程：http: [//articles.slicehost.com/2007/12/7/ubuntu-gutsy-installing-nginx-via-aptitude](http://articles.slicehost.com/2007/12/7/ubuntu-gutsy-installing-nginx-via-aptitude)

注意：

1.  如 stuartc 所述，如果您更改 Nginx conf 中的某些配置，则无法重新启动单个网站/虚拟主机。您必须重新启动 Nginx 才能使更改生效。但是`$ touch current/tmp/restart.txt`，如果您想直接应用生产修复程序，则可以在推送文件后在服务器应用程序目录中执行操作。
2.  我在 Ubuntu 上遇到了 Nginx 重启问题；显式停止和启动似乎可以提供更可靠的结果。使用`<NGINX_HOME>/bin/nginx stop`停止然后`<NGINX_HOME/bin/nginx`启动。

为了帮助你，这是我的配置文件。

nginx.conf：

```
#user  nobody;
worker_processes  4;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /rails/common/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/passenger-3.0.17;
    passenger_ruby /rails/common/ruby-1.9.2-p290/bin/ruby_with_env;

    passenger_max_pool_size 30;
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    gzip  on;

    include /rails/common/nginx/conf/sites-enabled/*.conf;
} 
```

启用站点的文件夹中的示例 site.conf：

```
server {
    listen       80;
    server_name  domainname1.com;
    root /rails/myapp1/current/public;
    passenger_enabled on;

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }

    if (-f $document_root/system/maintenance.html) {
        return 503;
    }
    error_page 503 @maintenance;
    location @maintenance {
        rewrite ^(.*)$ /system/maintenance.html break;
    }
} 
```

启用站点的新文件是添加新站点所需的全部内容。

# c# - COM互操作工作奇怪

> ID：13722720
> 
> 赞同：2
> 
> 时间：2012-12-05T11:54:47.497
> 
> 标签：c#, com, interop

我正在使用 C# 为黑盒本机 Win32 应用程序编写扩展。在运行时，应用程序将在扩展中调用一个名为 Register 的导出函数并传递给我一个 COM 对象。然后我可以通过该 COM 对象为应用程序做一些工作。

问题是这种方法很奇怪。COM 接口有一些方法：

```
[ComImport, Guid("75C46594-F6D6-4138-AC11-603C061ECC75")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IService
{
    [return:MarshalAs(UnmanagedType.U4)]
    uint GetVersion();

    [return: MarshalAs(UnmanagedType.U4)]
    uint GetLocale();

    [return: MarshalAs(UnmanagedType.Bool)]
    bool CheckVersion([In, MarshalAs(UnmanagedType.I4)]int version);

    [return: MarshalAs(UnmanagedType.SysInt)]
    IntPtr GetMainWindow();
} 
```

主机应用程序要调用的注册函数：

```
 [return: MarshalAs(UnmanagedType.Bool)]
    public static bool Register([In, MarshalAs(UnmanagedType.Interface)]IService service)
    {
        Log("Executing Register");
        try
        {
            Log(service.GetVersion());
        }
        catch (Exception e)
        {
            Log(e.ToString());
        }
        Log("Exiting Register");
        return true;
    } 
```

当我在我的代码中调用这些方法时，它们有时会返回不期望的值（GetLocale 返回 0 或不是区域设置 ID 的随机值，CheckVersion 有时返回 true 有时返回 false 等），有时甚至会导致主应用程序崩溃（实际上不是崩溃，用户界面仍在响应，但只是停止工作。）。在我重建代码或重新启动应用程序后，它可能会工作。

所以我尝试了另一种方法。我创建了一个本地库，将那个 COM 接口的功能公开，作为代理，扩展可以通过 P/Invoking 本地库来操作应用程序。它工作正常，所以我想我的 C# 中的 COM 互操作可能存在一些问题。有人可以帮我解决问题吗？

更新：

宿主应用程序通过 COM 公开了几个接口，其中一些确实具有多重继承，但 IService 确实是从 IUnknown 继承的，尽管它的某些方法将其他 COM 对象返回给我。我不知道方法的顺序很重要。也许我可以修改 C# 中的定义，然后再试一次。

并且宿主应用程序的作者没有提供任何 IDL 文件给我，只是一个 Pascal 头文件：

```
type IService = interface(IUnknown)
    ['{75C46594-F6D6-4138-AC11-603C061ECC75}']
    function CheckVersion(Version: Integer): BOOL;
    function GetVersion: Longword; 
    function GetLocaleID: Longword;

    //These functions return other COM objects.
    function GetQueryManager: IQueryManager;
    function GetLogManager: ILogManager;
    //......

    function GetMainWindow: HWND;

    function ExecuteCommand(Cmd: Integer; Param: Pointer): BOOL;

    property LocaleID: Longword read GetLocaleID;

    //These are properties encapsulate some functions above.
    property QueryManager: IQueryManager read GetQueryManager;
    property LogManager: ILogManager read GetLogManager;
    property MainWindow: HWND read GetMainWindow;
    //......
  end; 
```

# c# - C++ 等价于 C# 的内部

> ID：13722723
> 
> 赞同：25
> 
> 时间：2012-12-05T11:54:58.803
> 
> 标签：c#, c++, .net, visual-c++

我正在尝试将一些代码从 C# 反向移植到 C++ 以解决一个烦人的问题，并且想问是否有人知道 C# 的“内部”在 C++ 中的等价物是什么。

这是一个使用它的例子：

```
internal int InternalArray__ICollection_get_Count ()
        {
            return Length;
        } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-05T11:56:51.703

`internal`在 C++中没有直接的等价物。除了`public`//唯一的其他访问控制机制是`protected`，一种可以允许特定类访问您自己类的*所有*成员的机制。`private``friend`

 *因此，它可以用作类似的`internal`访问控制机制，最大的区别在于：

*   您必须`friend`一个一个显式声明类
*   `friend`类无一例外地可以访问所有成员；这是一个极高级别的访问，并且可以引入紧密耦合（这就是为什么习惯性的反射反应`friend`是“你真的需要那个吗？”）

另请参阅[何时应该在 C++ 中使用“朋友”？](https://stackoverflow.com/questions/17434/when-should-you-use-friend-in-c)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T12:27:52.160

如果您的想法是将整个模块彼此隔离，您可以尝试保留两组头文件——一组使用“公共”方法，另一组使用“内部”方法。目前我不确定如何避免重复；AFAIK一个类只能在编译单元中声明一次，公共和内部头都需要一个完整的类定义。一种，公认的非常笨拙的方法是让部分文件像`_Foo.public.h`并且`_Foo.internal.h`只包含方法声明，而“真正的”头文件将其中一个或两个包含在类声明主体中：

### Foo.public.h

```
class Foo {
    #include "_foo.public.h"
} 
```

### Foo.internal.h

```
class Foo {
    #include "_foo.internal.h"
} 
```

源文件将引用它们自己模块的内部头文件，但指向其依赖项的公共头文件。应该可以调整项目布局并构建脚本以使其合理透明。（例如，为每个模块设置正确目录的包含路径。）

这只是隐藏了“内部”成员，而不是实现实际的访问控制，因此假设模块是单独编译的并被视为二进制依赖项。如果您通过将依赖项包含在源代码树中并一次编译所有内容来处理依赖项，那么无论如何您都需要能够构建它们，并且内部方法声明可能仍然存在于构建中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T19:57:47.623

对于任何仍然感兴趣的人，我认为有一个宏观解决方案。通常在创建 API 时，我会在 API 项目的设置中定义一个“BUILDDLL”宏，用于定义 DLL 导出/导入，如下所示：

```
#ifdef BUILDDLL
    #define DLL __declspec(dllexport)
#else
    #define DLL __declspec(dllimport)
#endif 
```

所以我也用它来定义一个 INTERNAL 宏：

```
#ifdef BUILDDLL
    #define INTERNAL public
#else
    #define INTERNAL private
#endif 
```

BUILDDLL 在 DLL 项目的设置中定义（在 VS 中，属性->C\C++->预处理器->预处理器定义），而不是使用者项目的设置。所以对于消费者来说，宏被替换为“私有”，但它在 DLL 项目中是“公共的”。您可以像使用任何其他访问修饰符一样使用它：

```
class DLL Foo
{
public:
    int public_thing;
INTERNAL:
    int internal_thing;
}; 
```

这不是一个完美的解决方案（例如，您不能将其与定义出现在头文件中的成员函数一起使用，并且没有什么可以阻止最终用户覆盖它），但它似乎可以正常工作。我认为它适合作为宏的“好”用途之一，对于查看代码的局外人（熟悉 C# 关键字）来说，它的含义非常清楚。*

# ms-access - 如何对具有不同列名的不同表使用“选择”

> ID：13722724
> 
> 赞同：1
> 
> 时间：2012-12-05T11:54:56.110
> 
> 标签：ms-access, select

我需要将 MS-Access 中的行（如果与条件匹配）添加到现有表中，但列名不匹配。

例如：

源表：

```
name      hardware    age
----------  
john      pc          42 
peter     notebook    23 
carl      console     34 
```

目标表：

```
User      tool        age
----------  
george    tablet      25
john      pc          42 
peter     notebook    23 
carl      console     34 
```

我需要在目标表的末尾添加新行。但是，列名不同。请有人帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:22:40.210

您可以使用`INSERT INTO.. SELECT .. FROM`

```
INSERT INTO yourDestinationTable (User, tool, age)
SELECT name, hardware, age
FROM yourSourceTable 
```

# android - Google Map Api ServiceNotAvailable

> ID：13722728
> 
> 赞同：0
> 
> 时间：2012-12-05T11:55:05.030
> 
> 标签：android, maps

我在这个网站上阅读了更多关于这个问题的文章，但我的问题仍然存在。我的清单包含以下权限：

```
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/> 
```

但是当我调用我的 MapsActivity 的这个函数时：

```
private String getAddress(double latitudine, double longitudine) throws IOException{

    Geocoder geocoder;
    List<Address> addresses;
    geocoder = new Geocoder(getApplicationContext(), Locale.ITALIAN);
    addresses = geocoder.getFromLocation(latitudine, longitudine, 10);

    String address = addresses.get(0).getAddressLine(0);
    String city = addresses.get(0).getAddressLine(1);
    String country = addresses.get(0).getAddressLine(2);

    return address + ", " + city+ ", "+ country;
} 
```

我收到此异常：12-05 12:49:01.500: W/System.err(26206): java.io.IOException: Service not Available

我不使用模拟器....

请帮助我很重要...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:24.473

您是否使用了从 google map api 提供的 mapid？还要检查您的设备中是否启用了 WiFi 和 GPS。此外，权限应该在清单文件中的标记之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:44:08.710

问题解决了....当您尝试检索没有地址的坐标（例如私人区域）时，它返回一个 IOException.... 为什么？？？？这是一个错误？

# jquery - 单击特定元素时，如何触发单击 n 次？

> ID：13722730
> 
> 赞同：0
> 
> 时间：2012-12-05T11:55:06.077
> 
> 标签：jquery, triggers, click, slider

我使用 SequenceJS(www.sequencejs.com) 创建了一个网站

我的网站可以水平左右导航。

单击 .prev 或 .next 后，它将滑动并显示内容。

我想在单击特定元素时进行事件，.prev 或 .next 将单击 n 次。

只需单击 1 次即可正常工作。

```
//IF USER CLICK WHY MENU...
$('#why').click(function(){
    if ($(this).parent().hasClass('current')) {
      //Do nothing
    };
    if ($('#detail').parent().hasClass('current')) {
      $('.prev').click(); // Go back 1 slide
      $('#why').parent().addClass('current');
      $('#detail').parent().removeClass('current');
    };
    if ($('#progress').parent().hasClass('current')) {
      $('.prev').click(); // Go back 2 slides.
      $('.prev').click(); // Here, it make it to click 2 times but it doesn't work.
      $('#why').parent().addClass('current');
      $('#progress').parent().removeClass('current');
    };
    if ($('#news').parent().hasClass('current')) {
      $('.prev').click(); //Go back 3 slides
      $('.prev').click(); 
      $('.prev').click(); // This one is not work too.
      $('#why').parent().addClass('current');
      $('#news').parent().removeClass('current');
    };  
}); 
```

谢谢 ！！！

# web-services - wsdl 合约的版本控制

> ID：13722731
> 
> 赞同：1
> 
> 时间：2012-12-05T11:55:09.660
> 
> 标签：web-services

谁能告诉我主要和次要版本的版本 Wsdl 合同（wsdl 第一服务）的方法。任何运行的示例都会非常有帮助。

我遵循版本我的 wsdl 的方式是这样。我遵循 Iona webservices 版本控制指南

```
 <?xml version="1.0" encoding="UTF-8"?>
   <wsdl:definitions name="ProductServiceImplServicev2"
   targetNamespace="http://service.dtechtalkcenter.com/servicev2"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
   xmlns:tns="http://service.dtechtalkcenter.com/servicev2"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema" `enter code here`
   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
   xmlns:v2_0="http://service.dtechtalkcenter.com/servicev2.0"
   xmlns:v2_1="http://service.dtechtalkcenter.com/servicev2.1">
  <wsdl:types>
    <xsd:schema elementFormDefault="unqualified" targetNamespace="http://service.dtechtalkcenter.com/servicev2.0">
    <xsd:element name="addProduct" type="v2_0:addProduct"/>
   <xsd:element name="addProductResponse" type="v2_0:addProductResponse"/>
    <xsd:element name="getProducts" type="v2_0:getProducts"/>
    <xsd:element name="getProductsResponse" type="v2_0:getProductsResponse"/>
    <xsd:complexType name="getProducts">
    <xsd:sequence/>
    </xsd:complexType>
    <xsd:complexType name="getProductsResponse">
    <xsd:sequence>
      <xsd:element maxOccurs="unbounded" minOccurs="0" name="return" type="v2_0:product"/>
    </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="product">
    <xsd:sequence>
      <xsd:element name="cast" type="xsd:double"/>
      <xsd:element minOccurs="0" name="productCategory" type="xsd:string"/>
      <xsd:element minOccurs="0" name="productDetails" type="xsd:string"/>
    </xsd:sequence>
     </xsd:complexType>
    <xsd:complexType name="addProduct">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="product" type="v2_0:product"/>
    </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="addProductResponse">
    <xsd:sequence/>
    </xsd:complexType>

    </xsd:schema>
    </wsdl:types>
    <wsdl:message name="addProductResponse">
    <wsdl:part name="parameters" element="v2_0:addProductResponse">
     </wsdl:part>
    </wsdl:message>
   <wsdl:message name="getProducts">
    <wsdl:part name="parameters" element="v2_0:getProducts">
    </wsdl:part>
    </wsdl:message>
    <wsdl:message name="addProduct">
    <wsdl:part name="parameters" element="v2_0:addProduct">
    </wsdl:part>
    </wsdl:message>
    <wsdl:message name="getProductsResponse">
    <wsdl:part name="parameters" element="v2_0:getProductsResponse">
    </wsdl:part>
    </wsdl:message>
    <wsdl:portType name="ProductService_v2_0">
    <wsdl:operation name="getProducts">
      <wsdl:input name="getProducts" message="tns:getProducts">
    </wsdl:input>
      <wsdl:output name="getProductsResponse" message="tns:getProductsResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="addProduct">
      <wsdl:input name="addProduct" message="tns:addProduct">
    </wsdl:input>
      <wsdl:output name="addProductResponse" message="tns:addProductResponse">
    </wsdl:output>
    </wsdl:operation>
     </wsdl:portType>
    <wsdl:binding name="ProductServiceImplService_v2_0_SoapBinding" type="tns:ProductService_v2_0">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getProducts">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getProducts">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getProductsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="addProduct">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="addProduct">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="addProductResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="ProductServiceImplService_v2_0">
    <wsdl:port name="ProductServiceImplPort" binding="tns:ProductServiceImplService_v2_0_SoapBinding">
      <soap:address location="http://localhost:8088/VersionService/services/ProductServiceImplPort"/>
     </wsdl:port>
    </wsdl:service>
  </wsdl:definitions> 
```

# sql - 减去时将大括号添加到负值

> ID：13722732
> 
> 赞同：0
> 
> 时间：2012-12-05T11:55:09.270
> 
> 标签：sql

如何将花括号添加到负值，这将是两列相减的结果，

假设我有三列

```
 A      B           result(B-A)
-----------------------------------------
        1      4             3

        2      1            -1 [should be displayed as (1) not -1]

        9      3            (6)
-----------------------------------------
total   3      5            (4) 
```

如何在选择查询中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:19:37.320

如果你使用 sql server 试试这个：

```
select case  
       when (b-a) < 0 then  '{ ' + substring(CONVERT(NVARCHAR,(b-a)),2,2 ) +  '}' 
       else   CONVERT(nvarchar(max),(b -a)) END as result
from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:35:39.930

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!3/e879c/4)**

```
SELECT
t1.A,
t1.B,
CASE WHEN t1.B-t1.A<0 
      THEN '('+CAST( (t1.B-t1.A)*-1 as varchar(5))+')'
      ELSE CAST( t1.B-t1.A as varchar(5))  END AS result
FROM tbl t1 
```

结果：

```
| A | B | RESULT |
------------------
| 1 | 4 |      3 |
| 2 | 1 |    (1) |
| 9 | 3 |    (6) | 
```

# c# - Kinect RGB 转 AVI 文件

> ID：13722735
> 
> 赞同：2
> 
> 时间：2012-12-05T11:55:46.860
> 
> 标签：c#, video, kinect, kinect-sdk

我正在尝试从 Kinect 的 RGB 流中保存视频文件（例如，.AVI 文件）。

我正在使用最新的 Kinect SDK (1.5)

我尝试使用 e2e 的 DirectShow 过滤器，但它不起作用，必须有更直接的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:58:30.827

我尝试了将每个帧写入 .png 文件的 colorBasics 方法。但是，随后速度从 30fps 降低到 6fps。我想，多线程可能有助于提高性能。我不知道如何多线程它，是否有任何在线资源。我搜索了很多，但还没有运气。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:12:10.693

Kinect 不直接支持直接从视频流中录制。您可以通过访问每个帧，当它进来，并在代码中创建一个 AVI（或其他视频格式）来完成它。

[Kinect Toolbox](http://kinecttoolbox.codeplex.com/)有一个录像机，你可以看看源代码作为起点。

您可以轻松地`WriteableBitmap`从 Kinect RGB 相机中提取对象。从那里您可以找到很多关于创建静止图像以生成 AVI 或直接生成 AVI 的信息。

Google 搜索：[从静止图像创建 AVI](https://www.google.com/search?q=create%20AVI%20from%20still%20images&oq=create%20AVI%20from%20still%20images&aqs=chrome.0.57j62l3.4851&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)

Google 搜索：[从 WPF WriteableBitmap 创建 AVI](https://www.google.com/search?q=create%20AVI%20from%20still%20images&oq=create%20AVI%20from%20still%20images&aqs=chrome.0.57j62l3.4851&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&sclient=psy-ab&q=Create%20AVI%20from%20WPF%20WriteableBitmap&oq=Create%20AVI%20from%20WPF%20WriteableBitmap&gs_l=serp.3...340207.340207.0.340967.1.1.0.0.0.0.219.219.2-1.1.0.les;..0.0...1c.1.f8oVwe_KjsQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=ce986f8e8e81dbe8&bpcl=39468505&biw=1538&bih=1027)

查看 Kinect for Windows Developer Toolkit 中的“颜色基础”示例，了解如何访问相机并将数据提取到`WritableBitmap`对象。

# objective-c - 是否可以将 NSAttributedString 应用于 CPTTextLayer 的文本

> ID：13722736
> 
> 赞同：0
> 
> 时间：2012-12-05T11:55:49.240
> 
> 标签：objective-c, ios, core-plot

我想为每个索引显示一个“自定义标签” `CPTScatterPlot`。从属性中`CPTTextLayer`获取文本颜色、字体大小等。`textStyle`我想显示`CPTTextLayer`以不同颜色显示的字符串的每个字符。我知道可以使用`NSAttributedString`，但是当我将此参数传递给 时`[[CPTTextLayer alloc] initWithText:attributedStr]`，我的应用程序崩溃了。是否可以将 a`NSAttributedString`应用于`CPTTextLayer's`文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T13:15:57.537

从 1.3 版开始，CorePlot 允许基于 NSAttributedString 创建 CPTTextLayer。这是示例：

```
NSString *smallTextPart = @"Small part ";
NSString *bigTextPart = @"and the bigger one";

NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"%@%@", smallTextPart, bigTextPart]];

[str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue" size:12.0] range:NSMakeRange(0, smallTextPart.length)];
[str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue-Bold" size:18.0] range:NSMakeRange(smallTextPart.length, bigTextPart.length)];

CPTTextLayer *txtLayer = [[CPTTextLayer alloc] initWithAttributedText:str]; 
```

它也适用于多行 CPTTextLayer 标签（您可以使用 '\n' 字符将 CPTTextLayer 拆分为单独的行）。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:15:56.943

Core Plot 目前不支持属性文本。[您可以向Core Plot 问题跟踪器](http://code.google.com/p/core-plot/issues/list)添加增强请求，以便考虑将此功能包含在未来版本中。

# android - 在 android 中实现谷歌地图以在黑莓上工作

> ID：13722738
> 
> 赞同：2
> 
> 时间：2012-12-05T11:55:53.330
> 
> 标签：android, google-maps, blackberry

嗨，我需要将 android 应用程序转换为黑莓 (apk2bar)。问题是，当我尝试转换时，我收到“部署失败”错误，因为我的应用程序包含黑莓不支持的谷歌地图库。

谁能指导我实现从 apk2bar 转换后将在黑莓上运行的谷歌地图。

编辑：我的应用程序包含 GeoPoint 类以从“com.google.android.maps”获取当前纬度，这是谷歌地图使用但不支持 BB 的库。所以请指导我在 android 应用程序中替换 GeoPoint 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:12:50.407

您可以使用基于 Web 的方法解决此问题。请在此处阅读：http:
[//developer.blackberry.com/android/apisupport/apisupport_mapping_support.html](http://developer.blackberry.com/android/apisupport/apisupport_mapping_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:23:34.217

您可以通过以下方式在您的应用程序中创建谷歌地图”

```
String initial = "<!DOCTYPE html>\r\n" + 
    "<html> \r\n" + 
    "<head> \r\n" + 
    " <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\" /> \r\n" + 
    " <title>Google Maps Multiple Markers</title> \r\n" + 
    " <script src=\"http://maps.google.com/maps/api/js?sensor=false\" \r\n" + 
    " type=\"text/javascript\"></script>\r\n" + 
    "</head> \r\n" + 
    "<body>\r\n" + 
    " <div id=\"map\" style=\"width: 360px; height: 390px;\"></div>\r\n" + 
    "\r\n" + 
    " <script type=\"text/javascript\">\r\n" + 
    " var locations = ["; 
    String second= " ];\r\n" + 
    "\r\n" + 
    " var map = new google.maps.Map(document.getElementById('map'), {\r\n" + 
    " zoom: 8,"; 
    String centerPoint =""; 
    String finalpart = " mapTypeId: google.maps.MapTypeId.ROADMAP\r\n" + 
    " });\r\n" + 
    "\r\n" + 
    " var infowindow = new google.maps.InfoWindow();\r\n" + 
    "\r\n" + 
    " var marker, i;\r\n" + 
    "\r\n" + 
    " for (i = 0; i < locations.length; i++) { \r\n" + 
    " marker = new google.maps.Marker({\r\n" + 
    " position: new google.maps.LatLng(locations[i][1], locations[i][2]),\r\n" + 
    " map: map\r\n" + 
    " });\r\n" + 
    "\r\n" + 
    " google.maps.event.addListener(marker, 'click', (function(marker, i) {\r\n" + 
    " return function() {\r\n" + 
    " infowindow.setContent(locations[i][0]);\r\n" + 
    " infowindow.open(map, marker);\r\n" + 
    " }\r\n" + 
    " })(marker, i));\r\n" + 
    " }\r\n" + 
    " </script>\r\n" + 
    "</body>\r\n" + 
    "</html>"; 
```

然后在您的构造函数中执行以下操作：

```
String[] lt={x}; 
                   String[] lon={y};
                   String[] name={"CurrentLocation"};
                StringBuffer html=new StringBuffer(); 
                html.append(initial); 
                for(int i=0 ; i<lt.length; i++){ 
                //LocationObj source = (LocationObj)waypoints.elementAt(i); 
                //String point = "['"+source.getLabel()+"',"+source.getLatitude()+","+ source.getLongitude()+","+i+"],"; 
                String point = "['"+name[i]+"',"+lt[i]+","+ lon[i]+","+i+"],"; 
                //System.out.println("Point is"+point); 
                html.append(point); 
                } 
                html.append(second); 
                centerPoint = " center: new google.maps.LatLng("+lt[0]+","+lon[0]+"),"; 
                html.append(centerPoint); 
                html.append(finalpart); 
                //System.out.println("Plot is"+html.toString()); 
                BrowserFieldConfig _bfConfig = new BrowserFieldConfig(); 
                _bfConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER); 
                _bfConfig.setProperty( BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE ); 
                _bfConfig.setProperty(BrowserFieldConfig.USER_AGENT, "MyApplication 1.0"); 

                BrowserField myBrowserField = new BrowserField(_bfConfig); 

                myBrowserField.displayContent(html.toString(), ""); 
```

在 vfm 或 hfm 中添加 myBrowserField 以显示在屏幕上。x & y 是纬度和经度值（分别）。希望这可以帮助！

# gradle - 使用 gradle 为每个主类构建 jar

> ID：13722743
> 
> 赞同：3
> 
> 时间：2012-12-05T11:56:00.630
> 
> 标签：gradle

1.  1.我的项目有两个主类，我想使用 gradle 为每个主类构建 jar。我的源有 2 个文件 ValidationRule.java SupportValidator.java 两个文件都有一个主类，每个我想为每个主类构建 jar 我可以从 eclipse 中实现相同的工作正常 2.我想为我的项目加载源文件来自 2 个不同的文件夹，一部分在一个文件夹中，其余部分在另一个文件夹中，即项目/src snd 项目外部的另一个文件夹（../../../SharedClass）

    我的脚本如下

    ```
    apply plugin: 'eclipse'
    apply plugin: 'java'

    sourceCompatibility = 1.6
    archivesBaseName = 'Process_XY'

    configurations {
        configurations.compile.transitive = false
    }

    dependencies {
        compile fileTree(dir:'/trunk/Solutions/project/Source/Binaries/CommonFunctions/build/libs', include: '*.jar')
        compile fileTree(dir:'/trunk/Solutions/project/lib/GeoTools/geotools-2.7.4-bin/geotools-2.7.4', include: '*.jar')
        compile "org.apache.hadoop:hadoop-core:1.0.3"
        compile "commons-collections:commons-collections:3.2.1"
        compile "commons-configuration:commons-configuration:1.6"
        compile "commons-discovery:commons-discovery:0.2"
        compile "commons-lang:commons-lang:2.4"
        compile "commons-logging:commons-logging:1.1.1"
        compile "commons-logging:commons-logging:1.0.4"
        compile "log4j:log4j:1.2.16"
        compile "com.vividsolutions:jts:1.8"
        compile "commons-net:commons-net:1.4.1"
        compile "org.apache.hadoop:hadoop-core:1.0.3"
        compile "commons-httpclient:commons-httpclient:3.0.1"
        compile "org.mortbay.jetty:servlet-api:2.5-20081211"
        compile "org.apache.hbase:hbase:0.94.0"
        compile "org.apache.zookeeper:zookeeper:3.4.3"
    }

    repositories {
        mavenCentral()
        maven { url "https://repository.cloudera.com/artifactory/cloudera-repos/" }
        maven { url "http://repo.springsource.org/libs-release" }
        maven { url "http://repo.springsource.org/libs-milestone" }
        maven { url "http://repo.springsource.org/libs-snapshot" }
        maven { url "http://www.datanucleus.org/downloads/maven2/" }
        maven { url "http://oss.sonatype.org/content/repositories/snapshots" }
        maven { url "http://people.apache.org/~rawson/repo" }
    }

    jar {
        from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
        manifest.attributes("Main-Class":"org.project.seismic.Process_XY")
    }   

    sourceSets {
        main {
            java {
                 source = ['src/org', '../../../SharedClass/org']
            }
        }
    } 
    ```

    以上在 sourceSets 方法中，我尝试从 2 个文件夹加载源代码，但没有成功

    提前致谢..！！如何使用gradle实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T13:32:34.703

好的，首先，`source`on a`SourceDirectorySet`需要另一个`SourceDirectorySet`。然而，该`srcDirs`方法需要路径。将该块更改为以下内容：

```
sourceSets {
  main {
    java {
      srcDirs ['src/org', '../../../SharedClass/org']
    }
  }
} 
```

您可以轻松添加第二个 jar 任务，如下所示：

```
task secondJar(type: Jar) {
  name = other-main-jar
  from ...
  manifest.attributes(...)
}

assemble.dependsOn(secondJar) 
```

这将注册一个名为的新 Jar 任务`secondJar`，并确保在组装项目时也会创建此 jar。

# jsf-2 - 如何将参数添加到资源边界

> ID：13722746
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:56:16.060
> 
> 标签：jsf-2, myfaces, trinidad

我正在尝试这个（有效）：

```
 message = Any value {0}

   <h:outputFormat id="myMessage" value="#{bundle.message}">  
       <f:param value="#{mybena.value}"/> 
   </h:outputFormat> 
```

特立尼达：

```
 <tr:outputText id="myMessage" value="#{bundle.message}">  
       <f:param value="#{mybena.value}"/>
   </tr:outputText> 
```

这没用。我正在使用 TRINIDAD 组件，我想使用 JSF 中的参数

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:22.997

不使用特立尼达，但可能的解决方法可能是：

```
<tr:outputText id="myMessage"> 
   <h:outputFormat value="#{bundle.message}" > 
     <f:param value="#{mybena.value}"/>
   </h:outputFormat> 
</tr:outputText> 
```

# c# - 如何在创建产品和照片的同时为照片分配产品 ID？

> ID：13722747
> 
> 赞同：0
> 
> 时间：2012-12-05T11:56:16.823
> 
> 标签：c#, asp.net-mvc, database

现在我正在使用实体框架在 ASP.NET MVC 4 中开发一个简单的网站，并希望能够在创建视图中上传照片。我有一个用于存储照片数据的表，包括 ProductID。

为上传的照片分配 ProductID 的方法是什么，在照片上传时，产品尚未创建，因此我不知道它的 ID？

谢谢！

编辑：澄清一下 - 我在上传照片后立即保存有关照片的内容，然后我保存产品，然后我需要将 ProductID 添加到每张照片中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:02:47.700

假设您使用的是实体框架（您没有提到），这里有一些伪代码：

```
Product product = new Product();
// product.Name = ""; etc.
db.Products.Add(product);
db.SaveChanges();
Photo.ProductId = product.Id; 
```

产品保存到数据库后，它有一个可用于照片的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:59:21.060

> 为上传的照片分配 ProductID 的方法是什么，在照片上传时，产品尚未创建，因此我不知道它的 ID？

在 SQL Server 中执行此操作的标准方法是使 ID 字段成为一个[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)字段 - 当您插入行时它会自动增加。您可以使用从数据库中返回新的 id [`SCOPE_IDENTITY`](https://stackoverflow.com/questions/42648/best-way-to-get-identity-of-inserted-row)。

其他关系数据库也有类似的方案。

# maven - maven：父版本

> ID：13722752
> 
> 赞同：1
> 
> 时间：2012-12-05T11:56:48.353
> 
> 标签：maven

我不明白什么是父版本以及它应该是什么？

我们在团队中使用 svn，当我上次更新项目时，我注意到父版本已更改：

本地 pom.xml

```
<parent>
        <artifactId>foo</artifactId>
        <groupId>bar</groupId>
        <version>0.42-SNAPSHOT</version>
 </parent> 
```

svn pom.xml

```
<parent>
        <artifactId>foo</artifactId>
        <groupId>bar</groupId>
        <version>0.45-SNAPSHOT</version>
</parent> 
```

父版本何时更改以及它应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:38:48.323

如果您有一个多模块项目，那么父 pom 和子 pom 就会出现。例如像下面这样

```
/myapp
 |- pom.xml       --> parent pom
 |+ module1/      
     | - pom.xml  --> child pom
     | - src/
 |- module2/ 
```

可以有几个这样的层次结构。有两种方法来定义这种继承

1.  在父 pom 中添加一个 xml 块来告诉它哪些是依赖模块。或者
2.  在模块中添加一个 xml 块来告诉谁是它的父级。（这是你的情况）

这意味着，子 pom 依赖于父级，并将尝试使用`0.45-SNAPSHOT`版本找到相关的工件。此版本已更改可能是由于更新的父版本已替换该版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:07:12.183

A parent POM contain settings that apply to all child modules. This may include declaring plugin settings or choosing dependency versions.

A parent POM is no different to any other Maven artifact. It can change and when it does the version number must increment. Typically you want to always be using the latest available version of your parent.

You can use the [Maven versions plugin](http://mojo.codehaus.org/versions-maven-plugin/update-parent-mojo.html) to help manage versions, including forcing an update to the latest available parent version.

# ubuntu - 在 ubuntu 中安装 Jpcap

> ID：13722759
> 
> 赞同：0
> 
> 时间：2012-12-05T11:57:11.277
> 
> 标签：ubuntu, jpcap

我正在尝试在 ubuntu 上安装 jpcap，但这给我带来了一些麻烦。我正在使用 debian 软件包，但是当我尝试安装它时，它给了我以下错误消息；

```
Error: Dependency is not satisfiable: sun-java6-jdk 
```

我有来自 oracle 的 java 7u9 作为我的运行时环境，所以我认为这应该可以工作。

任何帮助，将不胜感激！

这是带有说明的[网站。](https://sites.google.com/site/sipinspectorsite/download/jpcap)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:16:33.347

@Shanee

您可以从以下链接下载。

[https://sites.google.com/site/sipinspectorsite/download/jpcap](https://sites.google.com/site/sipinspectorsite/download/jpcap)

[https://sites.google.com/site/sipinspectorsite/download/jpcap/jpcap-0.7.deb?attredirects=0&d=1](https://sites.google.com/site/sipinspectorsite/download/jpcap/jpcap-0.7.deb?attredirects=0&d=1) https://sites.google.com/site/sipinspectorsite/download/jpcap/jpcap-0.7 .tar.gz?attredirects=0&d=1

# python - 如何减少python等动态语言的错误，提高我的代码质量？

> ID：13722760
> 
> 赞同：0
> 
> 时间：2012-12-05T11:57:12.377
> 
> 标签：python

我一直在使用 Python 等动态语言时遇到问题。

**几个烦恼**：

1.  打字错误，我可以使用 pylint 来减少其中一些错误。但是仍然有一些 pylint 无法弄清楚的错误。
2.  对象类型错误，经常忘记参数是什么类型，int？字符串？一些对象？另外，忘记了我的代码中某些对象的类型。

单元测试有时可能会对我有所帮助，但我并不总是有足够的时间来做 UT。当我需要一个脚本做一个小工作时，代码行是100-200行，不大，但我没有时间做单元测试，因为我需要尽快使用脚本。所以，出现了很多错误。

那么，关于如何减少这些麻烦的数量的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:59:45.200

单元测试*是*处理这个问题的最好方法。如果您认为测试花费了太多时间，请问问自己在发布代码后，您在缺陷上浪费了多少时间——识别、诊断和纠正。

实际上，您是在生产环境中进行测试，并且有大量证据表明，在开发周期后期发现的缺陷的修复成本可能要高出几个数量级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:13:52.197

除了单元测试（参见 chamila_c 的回答）之外，坚持良好的约定和编码风格也会有所帮助。我想我知道您正在谈论的那种一次性脚本（假设这就是您正在谈论的内容），并且经常为它们编写完整的测试套件似乎有点矫枉过正。其他一些可能会有所帮助的提示：

*   将您的代码分解为函数。如果您正在处理一小段独立的代码，则通常更容易识别问题，尤其是命名问题。为小功能编写单元测试也容易得多。我发现使用这种方法意味着您不需要完整的测试套件来测试和隔离已识别的问题。
*   坚持一致且富有表现力的命名约定。例如，使用`min_value = min(all_values)`而不是像`a = min(b)`. 函数名称也是如此，使用`def calculate_mean(sequence)`而不是`def f(s)`
*   阅读并应用[PEP8](http://www.python.org/dev/peps/pep-0008/)。
*   用注释记录您的代码。这在编写代码时只需要几秒钟，并且当你回到它时更容易弄清楚发生了什么。令人惊叹的细节，你可以在一天内忘记！

# java - 为什么Android有自己的URI实现，不使用默认的Java实现？

> ID：13722763
> 
> 赞同：5
> 
> 时间：2012-12-05T11:57:31.947
> 
> 标签：java, android, uri

在使用 Android 应用程序时，我经常遇到在 Android`Uri`类和 Java`URI`类之间转换的问题？

我一直不明白为什么Android需要自己的实现并且没有使用`URI`Java附带的默认类？

也许我在使用 URI 时只是在摸索表面，还没有弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:01:10.107

[Javadoc 说](http://developer.android.com/reference/android/net/Uri.html)

> 出于性能的考虑，这个类几乎不执行验证。无效输入的行为未定义。这个类非常宽容——面对无效输入，除非另有说明，否则它将返回垃圾而不是抛出异常。

这绝对不同于 JDK。也许这就是为什么？

# android - 如何在从 android calllog db 检索数据时排除发送和接收的消息日志

> ID：13722766
> 
> 赞同：1
> 
> 时间：2012-12-05T11:57:36.720
> 
> 标签：android

从数据库中检索通话记录的代码：

```
String[] strFields = { android.provider.CallLog.Calls.NUMBER, 
android.provider.CallLog.Calls.TYPE,android.provider.CallLog.Calls.CACHED_NAME, 
android.provider.CallLog.Calls.DATE, android.provider.CallLog.Calls.DURATION };

String strOrder = android.provider.CallLog.Calls.DATE + " DESC";

Cursor mCallCursor = context.getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI, strFields,null, null, strOrder); 
```

它正在检索所有日志，包括最近发送的电话号码和时间。

但我想从通话记录中排除最近发过消息的项目。

谁能帮我？

# android - 谷歌 GCM 和通过电子邮件部署发布构建 APK

> ID：13722769
> 
> 赞同：0
> 
> 时间：2012-12-05T11:57:51.150
> 
> 标签：android, mono, google-cloud-messaging

我正处于准备去 Play 商店的第一个 android 应用程序的最后阶段。为了测试我最终签署的发布版本，我将 APK 通过电子邮件发送到我的手机并安装为“未知应用程序”。

除了我的 GCM 推送注册过程之外，一切看起来都运行良好。当我尝试注册时，我似乎没有得到谷歌的回复。如果我将相同的构建从我的 IDE 部署到手机，一切正常，根本没有代码更改..

他们对 GCM 注册有任何限制吗？是否必须从 Play 商店部署应用程序才能使此过程正常工作？

任何指导都会很棒！

# tsql - T-SQL 查看 where 语句顺序

> ID：13722773
> 
> 赞同：0
> 
> 时间：2012-12-05T11:58:02.247
> 
> 标签：tsql, sql-view

我有以下问题：我有一个 SQL 表，它在一列中包含文本和数字。我创建了两个视图来处理文本和数字。

如果我选择整个视图，它们会按预期工作，但是如果我在 select 语句中添加 where 语句，则会收到以下错误：

`Conversion failed when converting the varchar value 'Thomas' to data type int.`

我可以以某种方式告诉服务器在外部选择之前申请内部视图的 where 语句吗？

请使用以下 SQL 代码重现错误：

```
create schema tst
go
create table tst.tbl(strValue varchar(10))
insert tst.tbl(strValue)
    values ('Thomas'), ('1991'), ('Reto'), ('21'), ('Strub')
go
create view tst.tblStr as
    select strValue
    from tst.tbl
    where isnumeric(strValue)=0
go
create view tst.tblInt as
    select cast(strValue as int) intValue
    from tst.tbl
    where isnumeric(strValue)=1

go

select * from tst.tblStr order by strValue --ok
select * from tst.tblInt order by intValue --ok

go

select * from tst.tblInt where intValue<100 --not ok

go

select * from tst.tbl where isnumeric(strValue)=1 and cast(strValue as int) < 100 --ok

go

drop view tst.tblInt
drop view tst.tblStr
drop table tst.tbl
drop schema tst 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:07:20.997

对视图 tst.tblInt 使用“case when”。

```
 create view tst.tblInt as
    select 
            case when isnumeric(strValue)=1 
                then cast(strValue as int)
                else 0 
            end  intValue

    from tst.tbl
    where isnumeric(strValue)=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:10:04.303

我相信你已经发布的答案，只是修改了一行，请检查

```
CREATE SCHEMA TST
GO
CREATE TABLE TST.TBL(STRVALUE VARCHAR(10))
INSERT TST.TBL(STRVALUE)
VALUES ('THOMAS'), ('1991'), ('RETO'), ('21'),('24'),('212'), ('STRUB')
GO
CREATE VIEW TST.TBLSTR AS
SELECT STRVALUE
FROM TST.TBL
WHERE ISNUMERIC(STRVALUE)=0
GO
CREATE VIEW TST.TBLINT AS
SELECT CAST(STRVALUE AS INT) INTVALUE
FROM TST.TBL
WHERE ISNUMERIC(STRVALUE)=1

GO

SELECT * FROM TST.TBLSTR ORDER BY STRVALUE --OK
SELECT * FROM TST.TBLINT ORDER BY INTVALUE --OK

GO

**SELECT * FROM TST.TBLINT WHERE ISNUMERIC(INTVALUE)<100 --NOW OK ;)**

GO

SELECT * FROM TST.TBL WHERE ISNUMERIC(STRVALUE)=1 AND CAST(STRVALUE AS INT) < 100 --OK

GO

DROP VIEW TST.TBLINT
DROP VIEW TST.TBLSTR
DROP TABLE TST.TBL
DROP SCHEMA TST 
```

# inheritance - 如何避免实体框架 TPT 继承中的多态行为以便有效地查询基类型

> ID：13722780
> 
> 赞同：4
> 
> 时间：2012-12-05T11:58:22.543
> 
> 标签：inheritance, entity-framework-4, ef-code-first

**概述**

我首先使用实体​​框架 4.3 代码和流利的界面来设置我的 DbContext。我有一个基*Item*类，其中包含其他类型，例如*Event*、*BlogPost*、*ForumThread*、*WikiPage*等。

这些继承的类型与我认为实体框架称为 TPT 继承的映射。这在查询诸如“事件”或“博客文章”之类的单一类型时效果很好，但在尝试跨所有类型查询时构造非常复杂的查询，但由于实现 EF 开箱即用的多态行为所需的连接，因此性能非常糟糕.

**问题背景**

我想构建一个全局搜索功能，我只需要访问基本的“项目”实体而不是继承的实例。我希望能够通过名称、标签等查询基础项目类。执行任何类型的 LINQ 查询，即使在请求基本项目类型时仍会导致多态行为，从而降低性能。

**代码优先模型**

```
public class Item
{
    public int Id { get; set; }

    public string Name { get; set; }

    public string Body { get; set; }

    public DateTime Created { get; set; }

    public int? CreatedBy { get; set; }

    public int? LastModifiedBy { get; set; }

    public DateTime? LastModified { get; set; }

    public virtual User Author { get; set; }

    public bool IsDeleted { get; set; }

    public string ImageUri { get; set; }

    public virtual ICollection<Tag> Tags { get; set; }
}

public class Event : Item
{
    // Additional properties
}

public class BlogPost : Item
{
    // Additional properties
} 
```

我想做的是将另一个 POCO 映射到同一个基表，这样当我在其上构造查询时，它就不会涉及继承问题。EF 似乎并不喜欢这样。目前我手头没有错误，但我尝试简单映射失败了。

**替代解决方案？**

*   我曾考虑过实现一个类似于“Item”表的“index”表，并在创建新项目类型时将记录插入其中。但是，每当事件、博客文章数据发生变化等时，也需要更新此索引数据。这会因标签等外键而变得更加复杂。每当标记上的事件发生更改时，我都必须确保这些更改也在匹配的索引表上同步。在考虑所有不同的项目类型时，这将成为管理的一场噩梦，坦率地说，这似乎不是一个非常优雅的解决方案。

*   数据库触发器

我在这里首选的解决方案是代码而不是数据库触发器/存储过程。

有没有办法构造一个查询来强制 EF 只返回基类型而不是多态类型，这会导致过多的连接和可怕的性能？或者还有其他聪明的方法吗？

**更新**

通过 Nuget（针对 .Net 4.0）更新到 EntityFramework 5 后，我已经能够通过它们的标签查询项目并投影到一个新的*SearchItem*中，这会产生相当干净的 SQL，而无需连接到 TPT 类型。

```
 var x = from item in repository.FindAll<Item>()
                where item.Tags.Any(t => t.Name == "test")
                select new SearchItem
                {
                    Id = item.Id,
                    Name = item.Name,
                    Body = item.Body,
                    Created = item.Created,
                    CreatedBy = item.CreatedBy,
                    IsDeleted = item.IsDeleted,
                    ImageUri = item.ImageUri,
                    MembershipEntityId = item.MembershipEntityId,
                    //Tags = (from t in item.Tags
                    //       select new Tag
                    //       {
                    //           Id = t.Id,
                    //           Name = t.Name,
                    //           MembershipEntityId = t.MembershipEntityId
                    //       })
                }; 
```

**SQL**

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[Body] AS [Body], 
[Extent1].[Created] AS [Created], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[IsDeleted] AS [IsDeleted], 
[Extent1].[ImageUri] AS [ImageUri], 
[Extent1].[MembershipEntityId] AS [MembershipEntityId]
FROM [dbo].[Item] AS [Extent1]
WHERE  EXISTS (SELECT 
1 AS [C1]
FROM  [dbo].[ItemTag] AS [Extent2]
INNER JOIN [dbo].[Tag] AS [Extent3] ON [Extent3].[Id] = [Extent2].[Tag_Id]
WHERE ([Extent1].[Id] = [Extent2].[Item_Id]) AND (N'test' = [Extent3].[Name])
) 
```

这解决了我的一半问题，因为我现在可以按标签搜索基本类型。但是，我希望能够使用新投影返回标签。包含注释掉的代码会导致 EF 无法翻译的查询。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:10:07.340

> 有没有办法构造一个查询来强制 EF 只返回基类型而不是多态类型，这会导致过多的连接和可怕的性能？

一般没有。您已经映射了继承，如果您想返回 的实例`Item`，EF 必须始终返回正确的类型 => 它需要这些连接。EF 也不允许多次映射同一个表，因此您不能在同一个`Item`映射中再次映射为另一个 POCO。

从理论上讲，您应该能够仅从基类中查询`Items`和投影到您的**非映射**POCO 类的属性。不幸的是，这在 .NET 4.0 中不起作用 - [EF 仍然执行 joins](http://blogs.msdn.com/b/adonet/archive/2010/08/17/performance-considerations-when-using-tpt-table-per-type-inheritance-in-the-entity-framework.aspx)。您可以尝试使用 .NET 4.5 和 EF 5.0[来解决](http://thedatafarm.com/blog/data-access/entity-framework-june-2011-ctp-tpt-inheritance-query-improvements/)此问题。

# html - 从 HTML 生成列表 Sencha Touch 2

> ID：13722784
> 
> 赞同：1
> 
> 时间：2012-12-05T11:58:39.717
> 
> 标签：html, sencha-touch-2

我正在做一个项目，我们创建了一个 Sencha Touch 2 版本的网站，我们获得的所有资源都是网站本身。

我的问题是我有一个 HTML 中的搜索结果列表，并希望将它们动态添加到列表中（例如，将所有元素映射到列表中的元素）

你对如何处理这个有什么想法吗？

列表中一个元素的 HTML 如下所示：

```
<li>
    <p><input type="checkbox" name="chk" value="FF032A" />
        <a href="/files/documentPage.html">Title</a>
    </p>
    <div class="long">
        <p>CATEGORY DESCRIPTION</p>
        <p>3/12/2012</p>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:25:51.377

使用 Ext.DomQuery 系统地提取相关数据（使用元素选择器），然后将其构建到 JSON 数组中。然后，您可以使用原始数据（JSON 格式）导入存储，这将提供列表。

例如，我采用了您的示例代码，并将其复制了三次（因此您有三个要提取的列表项）。然后我将 Ext.DomQuery 与匹配的选择器一起使用，如下所示：

```
var listItems = Ext.DomQuery.select('li > div[class="long"]'); 
```

所以现在我们有了一个包含三个列表元素的数组，接下来我们需要从每个列表元素的内部元素构建一个对象。我们可以通过在新数组上使用本机 map 函数来做到这一点。这将获取数组中的每个项目，然后返回数据对象。数据对象是从

使用 item 元素下的子编号的元素。确保相应地更新您的键名。

```
var finalArray = listItems.map(function(item){
    var itemEl = Ext.get(item);
    return {
        description: itemEl.child('p:nth-child(1)').getHtml(),
        date: itemEl.child('p:nth-child(2)').getHtml()
    };
}); 
```

然后可以将这个新数组简单地转换为 JSON 字符串，例如：

```
var finalString = JSON.stringify(finalArray); 
```

如果您需要静态数据，您可以将其复制并粘贴到您的 Sencha Touch 代码中，或者使用 JSON 数据执行任何其他操作。

# ruby-on-rails-3 - 如何使用 content_tag 呈现嵌套消息

> ID：13722785
> 
> 赞同：0
> 
> 时间：2012-12-05T11:58:40.223
> 
> 标签：ruby-on-rails-3, content-tag

我想使用 content_tag 来呈现嵌套的 ul li 列表

```
<ul>   <li>
    <div>Message1</div>    </li>    <li>
     <div>Message 2</div>
    </li> </ul> 
```

我有这样的辅助方法

```
def nested_messages(messages)
    messages.map do |message, sub_messages|
      content_tag :ul do
        content_tag :li do
          render(message) + nested_messages(sub_messages)
        end
      end 
    end.join.html_safe
end 
```

我没有得到嵌套列表。我的输出看起来像这样

```
<ul>
  <li>
    <div>Message 1</div>
   </li>
</ul> 
<ul>
  <li>
    <div>Message 2</div>
  </li>
</ul> 
```

我在哪里做错了？如何获得正确的嵌套列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:03:00.577

将`messages.map`块嵌套在`ul`内容标记块内：

```
def nested_messages(messages)
  content_tag :ul do
    messages.map do |message, sub_messages|
      content_tag :li do
        render(message) + nested_messages(sub_messages)
      end
    end.join
  end.html_safe
end 
```

# bash - 从 jmx 目录中的 jmeter 启动 shell 脚本

> ID：13722786
> 
> 赞同：0
> 
> 时间：2012-12-05T11:58:43.277
> 
> 标签：bash, jmeter

我有一个 jmeter 测试，需要先运行一个 shell 脚本才能启动。shell 脚本位于 jmx 文件的目录中。我使用 OS Process Sampler 来调用脚本，但工作目录设置为 apache jmeter 的 bin/ 文件夹，从而导致错误。

我的 jmx 测试计划所在的当前目录是否有属性？

ubuntu 12.04 上的 apache jmeter 2.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:41:25.147

方法：

*   添加一个名为 shellDir 的用户定义变量，其值为 ${__P(shellDir,default folder)}

*   在你的路径中使用它作为 ${shellDir}/

*   在启动时使用 -JshellDir= 定义此属性

看：

*   [http://jmeter.apache.org/usermanual/get-started.html](http://jmeter.apache.org/usermanual/get-started.html)

# reference - 将工作表从一个工作簿移动到另一个工作簿并更新公式（链接）

> ID：13722789
> 
> 赞同：0
> 
> 时间：2012-12-05T11:59:09.297
> 
> 标签：reference, move, formula, worksheet, excel

我已经解决了这个问题，稍微调整了代码，现在它工作正常。我不会尝试发布新代码，因为每次我尝试都会在代码块上方和下方得到一些代码。

* * *

我们遇到了共享工作簿的主要问题，因此作为快速修复，我编写了一些代码以将多个工作表从共享工作簿移到单个工作簿，每个用户都可以独占打开这些工作簿。

当我移动它们（如上所述）时，它会从主工作簿中删除工作表，使用一个（相同的）工作表创建一个新工作簿并更新所有公式（链接成为新工作簿的外部）。

当我尝试将它们移回时，它将工作表“复制”回主工作簿，但将工作表留在单个工作簿中，并且不更新公式（实际上它似乎破坏了它们，很多 #REF 在过程）。

我想做的是从单个工作簿中删除工作表，将其移回主工作簿并更新链接。

这是我的代码：

```
Public Sub ResourceMerge()

'-- Rich Head, 5/12/2012
'-- Merges the separated resource worksheets into the main workbook (sledge hammer to fix
'-- shared workbooks issue) which has arisen since XP rollout

    'Handle errors
    On Error GoTo Err

    'Variables
    Dim wbResourceNames(1 To 20), cv, myName As String, _
        ws As Worksheet, _
        wb, targetwb As Workbook, _
        x, i As Integer

    'Before any changes made, backup the master workbook
    myName = ActiveWorkbook.Name                                        'Get current workbook name
    myName = Mid(myName, 1, Len(myName) - 4)                            'Remove the .xls"
    myName = myName & "_backup2_" & Format(Date, "d mmm yyyy") & ".xls" 'Add "_backup current date.xls"
    ActiveWorkbook.SaveCopyAs myName                                    'Save a copy with the new name
    Set targetwb = Application.ActiveWorkbook                           'Store the main workbook

    'Make the people control panel sheet active and select cell B8 (row above first name)
    Set ws = Sheets("People Control Panel")
    ws.Activate
    ActiveSheet.Range("B8").Activate

    'Loop down through the names (ignoring any Spare) to get all the resource names
    x = 0
    Do Until x = 20                                         'Assumes maximum 20 resources
        x = x + 1
        Debug.Print x
        ActiveCell.Offset(Rowoffset:=1).Activate            'Move down one cell
        If Left(ActiveCell.Value, 5) = "Spare" Then         'Ignore 'spare' rows
            GoTo Loopy
        End If
        wbResourceNames(x) = ActiveCell.Value               'Get the resource name
        Set wb = Workbooks.Open(wbResourceNames(x))         'Open the individual resource worksheet
        'Move sheet back into main workbook
        wb.Sheets(1).Move _
        after:=targetwb.Sheets(targetwb.Sheets("OFF SHORE"))
        wb.Close                                            'Close new workbook
Loopy:
    Loop                                                    'Do next resource

'    ActiveWorkbook.Save                                     'Save the reduced master

GoTo Endy                                                   'All done

Err:
    If Err = 9 Then                                         'Incorrect worksheet name?
        MsgBox "The VBA code has trapped an error ('subscript out of range'), this is likely to be " & _
            "because a resource name from the 'People Control Panel' (a hidden worksheet) does not " & _
            "match the name of the worksheet; please delete this spreadsheet and any individual " & _
            "spreadsheets created and start again (change the name of the backup sheet created - by " & _
            "removing the '_backup2 and date' from the filename, correct the worksheet name error, save " & _
            "the workbook and run the macro again)."
        GoTo Endy
    End If
    MsgBox "Oops... VBA code error, number: " & Err & ", with a description of: " & Error(Err)
Endy:
End Sub 
```

# java - 简单的 JPA 到 Postgresql 9.1 HibernateEx

> ID：13722791
> 
> 赞同：1
> 
> 时间：2012-12-05T11:59:16.950
> 
> 标签：java, jpa-2.0, postgresql-9.1, hibernate-4.x

似乎是一件足够简单的事情。我过去在 MySQL 和 Oracle 中使用过 Hibernate 序列，但现在在 Postgresql 9.1 中使用 JPA2/Hibernate4 并不断收到异常。有任何想法吗？我尝试了不同风格的 GenerationType.SEQUENCE 和 GenerationType.AUTO，但没有任何效果。我绝对需要帮助。

[1] Postgresql 9.1 DDL

```
 -- removed  CACHE 100
create sequence my_seq INCREMENT 1 MINVALUE 1 MAXVALUE 2147483647 START 1;
create table my_table (
  id              integer NOT NULL DEFAULT nextval('my_seq'),
  ident           text NOT NULL CONSTRAINT ident_uniq UNIQUE,
  cname           text NOT NULL,
  created         timestamp WITH TIME ZONE NOT NULL DEFAULT ('now'::text)::timestamp(6) with time zone,
  lastmodified    timestamp WITH TIME ZONE NOT NULL DEFAULT ('now'::text)::timestamp(6) with time zone,

  CONSTRAINT my_table_pkey PRIMARY KEY(id)
);

insert into my_table (ident, cname) values ('test001', 'Test 001'); 
```

[2] 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" >

    <persistence-unit name="MyPersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <description>Persistence unit</description>

        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://localhost:5432/mydb" />
            <property name="javax.persistence.jdbc.user" value="user" />
            <property name="javax.persistence.jdbc.password" value="password" />

            <property name="hibernate.hbm2ddl.auto" value="validate"/>
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.format_sql" value="false" />
            <property name="prefer_sequence_per_entity" value="true" />

        </properties>
    </persistence-unit>
</persistence> 
```

[3] 实体代码

```
package com.mypackage;

import java.sql.Timestamp;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;
import javax.persistence.Transient;

@Entity(name="my_table")
public class MyTable {

    @SequenceGenerator(name="foo", sequenceName="my_seq", allocationSize=1, initialValue=1)
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "foo")
    @Id
    @Column(name = "id")
    private long id;

    private String ident;   
    private Timestamp created;
    private Timestamp lastmodified; 
} 
```

[5] JUnit

```
public class Test_MyTable {

    @Test
    public void test_1() {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("MyPersistenceUnit");
        EntityManager em = emf.createEntityManager();

        List<MyTable> list = em.createQuery("from my_table", MyTable.class).getResultList();
        int size = ( (list == null) || (list.size() <= 0) ) ? 0 : list.size();

        if (size == 0) {
            System.out.println("Didn't find any MY_TABLE records");
        } else {
            System.out.println("Found [" + size + "] MY_TABLE records");
        }

        em.close();
        emf.close();
    }
} 
```

[3] 例外

```
javax.persistence.PersistenceException: [PersistenceUnit: MyPersistenceUnit] Unable to build EntityManagerFactory
Caused by: org.hibernate.HibernateException: Wrong column type in public.my_table for column id. Found: serial, expected: int8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:56:01.550

改变

```
@GeneratedValue(strategy = GenerationType.IDENTITY, generator = "foo") 
```

至

```
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "foo") 
```

否则它不会使用序列策略，而是使用身份策略。

并尝试删除 PK 列的默认值，并将该列定义为 bigint，因为 int 只有 4 个字节，而 Java long 有 8 个字节。

# http - 流式 A/V 馈送协议

> ID：13722793
> 
> 赞同：1
> 
> 时间：2012-12-05T11:59:23.097
> 
> 标签：http, encoding, tcp, video-streaming, webcam

网络摄像头使用哪些协议在 Internet 上传输音频/视频源？HTTP？TCP？协议中的每一帧是如何发送的？例如，如果他们使用 HTTP，网络摄像头软件是否对每一帧进行编码并将其添加为查询字符串参数，例如：

```
http://www.some-url.com?encoded-frame=WJDJ84FU84F85594DK3DK 
```

或者，编码帧是否设置为 HTTP 请求的正文？TCP 或使用的任何其他协议的类似问题。

我问是因为我想将网络摄像头流式传输到网络服务器，并拥有接收每个编码帧、对其进行解码并对其进行处理的软件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:32:34.463

那么OP中的问题是开放式的，因为它不像在这种应用程序中使用“一组固定的协议（TCP / UDP）”，而且它的范围很大，由于这种端到端涉及的各种技术 - Camera capturem 编码、流式传输、解码/处理的最终解决方案。在您提到的情况下，如果网络摄像头和 Web 服务器很可能在同一个 LAN 上，那么您也可以使用 TCP/IP，然后服务器可以处理它。因为在 LAN 上的延迟不会很高，所以 TCP 会很好用。否则，如果在 WAN 上，那么 UDP/IP 会有所帮助。网上有很多教程可以了解使用 TCP/IP 或 UDP/IP 套接字及其编程概念的基础知识。然后是关于视频数据的流式传输、打包等的教程。

我看不出这里如何使用 HTTP 从网络摄像头发送到服务器。

对于初学者

[http://streaminglearningcenter.com/streaming-video-consulting.html](http://streaminglearningcenter.com/streaming-video-consulting.html)

希望这对您有所帮助。

# jquery - twitter bootstrap scroll-spy 的问题

> ID：13722796
> 
> 赞同：1
> 
> 时间：2012-12-05T11:59:39.587
> 
> 标签：jquery, html, twitter-bootstrap

这段代码 [jsFiddle](http://jsfiddle.net/Jaa6S/)有什么问题。

我已经完成了示例中所说的一切，尝试了`$('#navbar').scrollspy()`但仍然没有成功。

请解释我的问题并指出解决方案。

谢谢！

[更新的小提琴](http://jsfiddle.net/Jaa6S/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:41:55.197

ScrollSpy 对象需要附加到触发**滚动**事件的元素。在您当前的标记中，该元素实际上`<body>`不是该`<table>`元素。

尝试`data-spy="scroll" data-target=".nav"`从表中删除属性，然后将它们添加到表中`<body>`。

否则，如果您希望`<table>`发起**滚动**事件，它需要有一个滚动条，即固定`height`和`overflow: auto`（这就是[Bootstrap 文档 Scrollspy 示例](http://twitter.github.com/bootstrap/javascript.html#scrollspy)的方式）。

* * *

### 更新

如果您将表单放置在模式中，则具有类的元素将`modal-body`是触发滚动事件的元素。将 Scrollspy 对象附加到它。

# python - python lambda 打印空间

> ID：13722798
> 
> 赞同：3
> 
> 时间：2012-12-05T11:59:40.030
> 
> 标签：python, lambda

在 python 中，我想要一个返回等于输入的空格字符的 lambda。例如。

```
x=lambda x: return space x times
print "my message",x(10),"my message 2" 
```

输出：

> 我的留言<10空格>我的留言2

这将满足我在特定情况下的需要。我可以为此编写一个函数，但如果可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:02:22.483

就像是：

```
x = lambda times:' '*times
print "my message{0}my message 2".format(x(10))         
my message          my message 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:15:32.007

@mux 的答案是正确的，但我认为实现完全相同的事情的更简单、更 Pythonic 的方法不需要 lambda：

```
def spacetimes(x): return x * ' ' 
```

然后：

```
print "my message",spacetimes(10),"my message 2" 
```

当你想传递一个函数时，你通常需要一个 lambda。例如，我将通过将代码包装在一个名为的函数中来修改您的代码`msg`：

```
def msg(spacefunc):
    print "my message",spacefunc(10),"my message 2" 
```

然后你可以使用 lambda 调用它：

```
msg(lambda x: x * ' ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:09:14.337

讨厌成为那个人，但如果它不必是 la​​mbda ......如果你真正想要的只是空间那么为什么不

```
print "my message", ' '*6 ,"my message 2" 
```

其中“6”可以由您更改。

# eclipse - Tycho 构建的产品中的 Eclipse“已安装软件”功能层次结构

> ID：13722799
> 
> 赞同：2
> 
> 时间：2012-12-05T11:59:41.980
> 
> 标签：eclipse, eclipse-rcp, tycho

我正在使用 Tycho 构建基于功能的产品。构建通过并且产品工作正常。现在我想通过我的 p2 更新站点更新一个功能，但这不起作用。

我注意到的是，当我单击*Help -> About -> Installation Details*时，我将产品名称视为根元素，并将我的所有功能视为子元素。所以我无法卸载任何功能和/或更新它们。只能卸载根元素。我显然不想这样做，因为这是整个产品。

当我在 Eclipse IDE 中打开安装详细信息对话框时，我将所有已安装的功能都视为根元素。所以我可以卸载或更新个别功能（例如 EMF、Subversive、EGit）。

那么，为什么 Tycho 打造的产品会有所不同呢？为什么我的功能不是安装中的顶级元素？

* * *

我已尝试激活复选框*此功能需要独占安装*我想要更新的功能，但这没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:38:38.013

实际上，并非 Eclipse IDE 中的所有功能都安装在根级别。还有一个产品元素（例如“Eclipse SDK”），该产品包含不能独立于产品更新或卸载的功能。

不过，您有一个正确的观点：如何将功能安装为 Tycho 的根元素，以便可以独立于产品卸载或更新它们？

[从 Tycho 0.20.0 开始](http://wiki.eclipse.org/Tycho/Release_Notes/0.20)这是可能的：您可以在产品文件中指定是否要将某个功能安装为产品的子元素，或者该功能是否应作为根元素安装。对于后者，您需要添加一个属性`installMode="root"`。

*.product 文件的示例片段：

```
<features>
   <feature id="product-child-element-feature"/>
   <feature id="root-element-feature" installMode="root"/>
</features> 
```

# php - 从 Lat/Lng 确定位置以匹配第二个表

> ID：13722801
> 
> 赞同：0
> 
> 时间：2012-12-05T11:59:44.700
> 
> 标签：php, mysql, geolocation

到目前为止，我已经做了一些阅读，我正处于十字路口。

我的情况是这样的：

*   带有 lat/lng 值列表的表格（我们可以将它们视为“城市”），半径为
*   包含运动值列表的表格，包括 lat/lng

我的要求是我返回移动列表并包括最近的城市（如果它在半径内）。到目前为止，我已经使用 PHP 中的半正弦公式为我返回的每条记录执行此操作，但它并不是特别有效。

我发现的两个选项是：
1/在 MySQL 中创建一个存储过程来执行 Haversine 的那一侧（类似于：[Proximity Search](https://stackoverflow.com/questions/260335/proximity-search/260347#260347)）
2/使用“边界框”方法来定位城市而不是圆形. 这不是一个大问题，并且可以简化 sql。

但是，在某些情况下，如果 lat 和 lng 为负数，则确定点是否位于左上角和右下角之间的典型逻辑将不起作用。在 PHP 中，为了解决这个问题，我会做一个快速的“如果”，我会检查左上角的 lat/lng 是否大于右下角，并根据结果使用 AND/OR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:31:01.737

经过一些额外的阅读后，我在 SO 上发现了这个问题。

[https://stackoverflow.com/a/5548877/1749630](https://stackoverflow.com/a/5548877/1749630)

这个答案正是我需要指出的正确方向。通过这种方式，我现在使用子选择来查找城市。

如果有人发布比这个更好的答案，我会标记它而不是这个:)

# django - 在 Django 中异步发送带有附件的电子邮件

> ID：13722802
> 
> 赞同：5
> 
> 时间：2012-12-05T11:59:51.360
> 
> 标签：django, email

我正在使用以下代码发送带有 pdf 附件的电子邮件。但是，这是一个错误 - “断言没有内容”。我不确定为什么会这样。我可以同步发送带有 pdf 的电子邮件，也可以异步发送不带 pdf 的电子邮件。（使用 Django 1.3）

```
from django.core.mail import EmailMultiAlternatives
import threading
from django.core.mail import send_mail

class EmailThread(threading.Thread):
    def __init__(self, subject, body, from_email, recipient_list, fail_silently, html,pdf):
        self.subject = subject
        self.body = body
        self.recipient_list = recipient_list
        self.from_email = from_email
        self.fail_silently = fail_silently
        self.html = html
        self.pdf = pdf
        threading.Thread.__init__(self)

    def run(self):
        msg = EmailMultiAlternatives(self.subject, self.body, self.from_email, self.recipient_list)
        msg.attach('ticket.pdf',self.pdf,'application/pdf')
        if self.html:
            msg.attach_alternative(self.html, "text/html")
        msg.send(self.fail_silently)

def send_mail(subject, body, from_email, recipient_list, fail_silently=True, html=None,pdf=None, *args, **kwargs):
    EmailThread(subject, body, from_email, recipient_list, fail_silently, html, pdf).start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:24:31.263

想一想当您尝试发送不带附件的电子邮件时，您的代码会发生什么，这与`send_mail`.

```
 def run(self):
        msg = EmailMultiAlternatives(self.subject, self.body, self.from_email, self.recipient_list)
        msg.attach('ticket.pdf',self.pdf,'application/pdf')
        #                       ^^^^^^^^ is None. 
        if self.html:
            msg.attach_alternative(self.html, "text/html")
        msg.send(self.fail_silently) 
```

是的，您最终会尝试附加一个没有内容的文件。您需要确保仅在有要附加的东西时才附加。无论如何，这有什么意义？有些`ticket.pdf`是空字符串？

另外，我赞同使用`django-mailer`.

# java - 干扰器：门控序列

> ID：13722809
> 
> 赞同：3
> 
> 时间：2012-12-05T12:00:35.723
> 
> 标签：java, disruptor-pattern

我正在学习 Java 中的 Disruptor。我不明白门控序列的含义。我知道它的核心部分是环形缓冲区，每个缓冲区都与一个序列号相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:54:15.997

门控序列的目的是对发布者进行门控以防止`RingBuffer`包装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:46:05.167

实际上，LMAX 实现的核心部分是 the`Sequencer`和 its `Sequence`s。所以`ringBuffer`实施那些。您所指的`gatingSequences`充当每个`Sequencer`“订阅”到目标`ringBuffer`（或其他`Sequencer`）的光标。这就是 a`Sequencer`可以为其连接的多个游标的方式`Sequencers`（并让它们`sequence`通过调用来触摸下一个`tryNext()`）。

干杯!

# java - 从 Liferay 中移除 Alloy UI

> ID：13722810
> 
> 赞同：6
> 
> 时间：2012-12-05T12:00:45.930
> 
> 标签：java, jquery-ui, liferay, portlet, alloy-ui

Liferay CMS 带有 Alloy UI 来执行几个 javascript 功能（可拖动、可排序等）。问题是我们还使用了几个使用 jQuery UI 的 jQuery 插件。Alloy UI 加载速度也很慢，并且开销很大，导致网页大量滞后，所以我们想删除它并使用 jQuery UI 来做事。

Liferay 默认在 DOM 中加载 Alloy UI 文件，我们需要在服务器/portlet 文件中删除任何内容（声明等）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:39:01.493

简短的回答是我不会费心去尝试！这是因为 Alloy UI 是 Liferay UI 不可或缺的一部分，如果没有它，您将需要做很多工作来用 jQuery 替换。

Alloy UI 不仅仅是可拖动的 portlet 和排序。它还控制弹出窗口、AJAX 调用以及我还没有遇到的许多其他内容。

**但是**，如果您真的想通过它，那么我建议您首先创建一个自定义主题并从主题中删除对 Alloy UI 的任何引用，然后加载 jQuery。

然后，您还需要创建一个或多个钩子（并且可能使用 EXT 插件）来替换所有引用 Alloy UI 的 JSP 文件，并使用使用 jQuery 来执行相同功能的副本。

**或者**另一种方法是获取 GitHub 上的 Liferay 源代码，并从源代码中创建您自己的版本，删除 Alloy UI。

**但**我仍然强烈建议您不要浪费时间。爱它或恨它，Alloy UI 被烘烤干燥成 Liferay。如果您遵循我的任何建议，您将有效地阻止自己在未来升级 Liferay。

更好的建议是向 Liferay 提出改进 Alloy UI 的方法，或者为[GitHub 上的 Alloy UI 存储库](https://github.com/liferay/alloy-ui)做出贡献并帮助社区。

~~编辑~~

要仅为未经身份验证的用户禁用 Alloy UI，那么修改 portal-web\docroot\html\common\themes\ 中的文件的 HOOK 可能会起到作用。特别是看top_js.jspf。如果您在那里检查并说只有在您登录后才加载 Alloy UI，那么它可能是您之后的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:28:36.727

It should be done by using the barebone/everything.js configuration, see: [http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/javascri-3](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/javascri-3)

> The default logic is coded in com.liferay.portal.events.ServicePreAction in such a way that unauthenticated users get the list of barebone JavaScript files whereas authenticated users get both the list of barebone JavaScript files and the list of everything JavaScript files.

i think, that's what you want to do. No hook or something else needed.

# ember.js - Ember.js - Ember.lookup 的用途是什么

> ID：13722817
> 
> 赞同：5
> 
> 时间：2012-12-05T12:01:10.237
> 
> 标签：ember.js

谁能告诉我 Ember.lookup 的用途是什么？

它用于查找字符串键。

它在 ember 源中的使用示例是：

```
if(typeof modelType === "string"){
  return Ember.get(Ember.lookup, modelType);
} else {
  return modelType;
} 
```

我可以看到它从字符串返回一个类型，但我看不到它的设置位置或更大的使用情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T13:35:53.413

`Ember.lookup`与`Ember.imports`和`Ember.exports`作为消除对`window`.

如果您在浏览器中运行 Ember，所有三个值都将引用`window`，但是如果您在没有浏览器的情况下运行，例如，通过 NodeJS 或 AMD，您将需要自己提供值。

有关更多信息，请参阅[提交消息](https://github.com/emberjs/ember.js/commit/305202fa51aca55ce1ff935aa9fb8ebe3da4a0d4)。

# unit-testing - 从 JSCover/JSCoverage coverage.xml 或 jscoverage.json 获取 LCOV 兼容输出

> ID：13722824
> 
> 赞同：0
> 
> 时间：2012-12-05T12:01:31.963
> 
> 标签：unit-testing, gcov, js-test-driver, lcov, jscoverage

**概括**

我最近从使用[Google 的 JsTestDriver](http://code.google.com/p/js-test-driver/)切换到了[Testem](http://github.com/airportyh/testem)但错过了[LCOV HTML Code Coverage Reports](http://ltp.sourceforge.net/coverage/lcov.php)，有没有办法将[JSCover](http://tntim96.github.com/JSCover/)输出转换为 LCOV 格式，所以我可以[使用 genhtml 创建这样的报告](http://ltp.sourceforge.net/coverage/lcov/output/index.html)。

**细节**

我正在[使用 Testem、Jasmine 和 PhantomJS 从一个 JSCoverage 示例中](https://github.com/richardbutler/testem-coverage-sandbox)工作，它生成以下 2 种覆盖输出格式；

覆盖率.xml

```
<report>
  <stats>
    <packages value="1"/>
    <classes value="1"/>
    <methods value="1"/>
    <srcfiles value="1"/>
    <srclines value="3"/>
  </stats>
  <data>
    <all name="all classes">
      <coverage type="class, %" value="100% (1/1)"/>
      <coverage type="method, %" value="100% (1/1)"/>
      <coverage type="block, %" value="100% (1/1)"/>
      <coverage type="line, %" value="100% (3/3)"/>
    </all>
  </data>
</report> 
```

jscoverage.json

```
{
  "hello.js": {
    "coverage": [null, 1, 1, 1],
    "source": ["(function(exports) {", "    exports.hello = function(){", "        return \"hello world\";", "    }", "})(typeof(module) !== \"undefined\" ? module.exports : this);"]
  }
} 
```

有没有办法将上述内容覆盖到 js-test-driver 输出的 jstestdriver.conf-coverage.dat 格式中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:27:24.890

> 有没有办法将 JSCover 输出转换为 LCOV 格式

是的，请参阅：[http ://tntim96.github.com/JSCover/manual/manual.xml#reportConversion](http://tntim96.github.com/JSCover/manual/manual.xml#reportConversion)

总之

```
java -cp JSCover-all.jar jscover.report.Main --format=LCOV REPORT-DIR SRC-DIRECTORY 
```

# c# - ControllerDescriptor FindAction 返回 null

> ID：13722826
> 
> 赞同：8
> 
> 时间：2012-12-05T12:01:40.233
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

控制器：

```
[HttpDelete]
public ActionResult Delete(int id)
{
} 
```

方法：

```
ControllerBase controllerToLinkTo = string.IsNullOrEmpty(controllerName)
                                        ? htmlHelper.ViewContext.Controller
                                        : GetControllerByName(htmlHelper, controllerName);

var controllerContext = new ControllerContext(htmlHelper.ViewContext.RequestContext, controllerToLinkTo);
var controllerDescriptor = new ReflectedControllerDescriptor(controllerToLinkTo.GetType());
ActionDescriptor actionDescriptor = controllerDescriptor.FindAction(controllerContext, actionName); 
```

当动作具有 [Delete] 属性时，ActionDescriptor 为空。有没有办法从控制器上下文中获取动作名称？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T19:23:21.173

我在 .net 4.5 中遇到了同样的问题，因为 FindAction 方法只搜索 get 属性。我解决了使用 GetCanonicalActions 方法添加第二次搜索的问题。

```
ControllerBase controllerToLinkTo = string.IsNullOrEmpty(controllerName)
                                                        ? htmlHelper.ViewContext.Controller
                                                        : GetControllerByName(htmlHelper, controllerName);

var controllerContext = new ControllerContext(htmlHelper.ViewContext.RequestContext, controllerToLinkTo);
var controllerDescriptor = new ReflectedControllerDescriptor(controllerToLinkTo.GetType());
var actionDescriptor = controllerDescriptor.FindAction(controllerContext, actionName);

//add the following lines
if (actionDescriptor == null)
{
    actionDescriptor = controllerDescriptor.GetCanonicalActions().FirstOrDefault(a => a.ActionName == actionName);
} 
```

注意：我使用的是 linq 方法 FirstOrDefault，所以请记住 add `using System.Linq`;

# javascript - Javascript 禁用用户的替代导航菜单

> ID：13722829
> 
> 赞同：0
> 
> 时间：2012-12-05T12:01:54.893
> 
> 标签：javascript, html

假设我有一个导航菜单，它使用 Javascript 隐藏或显示相应的 div。

```
<ul>
<li><a href="#home">Home</a></li>
<li><a href="#contact">Contact Me</a></li>
</ul>

<script>

$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).attr('href');
    $(toShow).show();
});

</script> 
```

我知道我应该使用`<noscript></noscript>`标签来方便没有启用 Javascript 的用户。

**问题**

我该怎么做呢？

对于禁用 javascript 的用户，我希望允许他们单击“主页”或“联系我”并分别转到“home.php”或“contact.php”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:08:51.763

这应该有效：

```
<ul>
<li><a data-target="#home" href="home.php">Home</a></li>
<li><a data-target="#contact" href="contact.php">Contact Me</a></li>
</ul>

<script>

$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).data('target');
    $(toShow).show();
});

</script> 
```

使用 noscript，您可以添加另一个菜单，但不能更改可用的菜单。像上面这样，没有js的人不会触发click handler，默认get会被执行。如果启用了 js，则会执行 click 函数并`e.preventDefault`阻止浏览器重定向到另一个页面。

该解决方案也不需要重复的菜单。一旦您需要以某种方式更改它，您实际上将需要更改两个菜单的 HTML，而不是一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:05:12.247

像这样：

```
<ul id="scriptMenu" style="display:none">
    <li><a href="#home">Home</a></li>
    <li><a href="#contact">Contact Me</a></li>
</ul>

<noscript>
    <ul>
        <li><a href="home.php">Home</a></li>
        <li><a href="contact.php">Contact Me</a></li>
    </ul>
</noscript>

<script>
    $(function(){
        $("#scriptMenu").show()
    });
</script> 
```

`scriptMenu`将在不支持 JavaScript 的浏览器上隐藏。
支持 JavaScript 的浏览器不会渲染标签中的元素，而是显示`scriptMenu`列表。

[工作示例](http://fiddle.jshell.net/zqQPr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:06:10.613

请注意，这是一个快速试用，代码**未经测试**

将指向完整页面的链接保留在锚点中，并以编程方式删除“.php”

```
<ul>
<li><a href="home.php">Home</a></li>
<li><a href="contact.php">Contact Me</a></li>
</ul>

<script>

$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).attr('href');
    toShow=toShow.split(".");
    toShow=toShow[0];
    $("#"+toShow).show();
});

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:07:56.210

将实际链接添加为“a”标记中的 href 怎么样，然后在 jQuery 中添加 return false 最后。如果触发了 Javascript，这将停止浏览器执行 href 元素中指定的链接。如果未启用 Javascript，它们只会链接到 href 元素。不需要noscript。

```
<ul>
<li><a href="home.php">Home</a></li>
<li><a href="contact.php">Contact Me</a></li>
</ul>

<script>
$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).attr('href');
    $(toShow).show();
    return false;
});    
</script> 
```

# macos - Restkit：迁移到 0.20

> ID：13722830
> 
> 赞同：4
> 
> 时间：2012-12-05T12:02:09.797
> 
> 标签：macos, restkit, restkit-0.20

我正在尝试迁移到 RestKit 0.20-pre2。

目前我设法迁移了我的映射（至少编译器不再抱怨），但是我在创建请求时遇到了问题（以前我使用了不再存在的 RKObjectLoader。

我之前的代码如下：

```
- (RKObjectLoader*)objectLoaderWithResourcePath: (NSString*)resourcePath
                                     method: (RKRequestMethod)httpMethod
                                 parameters: (NSDictionary*)parameters
                              mappableClass: (Class)objectClass
{
RKObjectMapping *mapping = [self.objectManager.mappingProvider     objectMappingForClass:objectClass];

NSString *path = resourcePath;
if (httpMethod == RKRequestMethodGET) {
    path = [resourcePath stringByAppendingQueryParameters:parameters];
}
RKObjectLoader *request = [self.objectManager loaderWithResourcePath:path];
request.method = httpMethod;
request.delegate = self;
request.objectMapping = mapping;
if (httpMethod != RKRequestMethodGET) {
    request.params = parameters;
}

return request;
} 
```

我使用上述方法创建了一个通用请求，然后同步或异步发送它。现在......我看到了新方法`getObjectsAtPath: parameters: success: failure:`，但是......我需要同样的POST（而且我没有任何要发布的对象......它只是接受POST登录请求的服务器......）

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:20:00.637

我和你有同样的问题，我在这里得到了很好的答案：

[尝试使用 RestKit 发出 POST 请求并将响应映射到 Core Data](https://stackoverflow.com/questions/13962109/trying-to-make-a-post-request-with-restkit-and-map-the-response-to-core-data)

基本上，

这就是你需要的：

```
 NSDictionary *dictionary = @{ @"firstParam": @(12345), @"secondParam": @"whatever"};
 NSMutableURLRequest *request = [objectManager requestWithObject:nil     method:RKRequestMethodPOST path:@"/whatever" parameters:parameters];

 RKObjectRequestOperation *operation = [objectManager  objectRequestOperationWithRequest:request ^(RKObjectRequestOperation *operation,     RKMappingResult *result) {
NSLog(@"Loading mapping result: %@", result);
  } failure:nil]; 
```

在自述文件部分托管对象请求中有一个示例可以帮助您：

[https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:23:45.663

您可以使用 RK HTTPClient 子类直接使用 AFNetworking，如下所示：

```
[[RKObjectManager sharedManager].HTTPClient postPath:@"/auth" parameters:params success:^(AFHTTPRequestOperation *operation, id JSON)
 {
     // Success
 } failure:^(AFHTTPRequestOperation *operation, NSError *error)
 {
     // Error
 }]; 
```

从 RestKit v0.20.x 开始，RK 现在在底层使用 AFNetworking 而不是 RKClient，因此您可以直接参考 AFNetworking 文档：

[http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/postPath:parameters:success:failure](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/postPath:parameters:success:failure)：

**编辑**

在我的项目中，对于身份验证，我只是创建了一个名为 User 的 NSObject，带有一个单例，并自己管理映射。我（个人）不需要在我的核心数据堆栈中拥有我的 auth 用户。如果您需要使用 RK Core 数据映射功能，请查看带有[postObject:path:parameters:success:failure:](http://restkit.org/api/0.20.0/Classes/RKObjectManager.html#//api/name/postObject%3apath%3aparameters%3asuccess%3afailure%3a)方法的 RKObjectManager。

# android - 从墙纸服务启动活动（与偏好无关...）

> ID：13722832
> 
> 赞同：2
> 
> 时间：2012-12-05T12:02:12.930
> 
> 标签：android, live-wallpaper

我有一个动态壁纸。这个动态壁纸有一个从 PreferenceActivity 实现的设置页面。一切都按预期工作。到目前为止，一切都很好。

从我的墙纸设置页面..我想开始另一个活动（详细信息活动......包含信息、位图、链接等......）。当我开始此活动时，我收到一个安全异常错误：

```
java.lang.SecurityException: Permission Denial: starting Intent {... } from ProcessRecord ... requires android.permission.BIND_WALLPAPER 
```

清单具有所需的权限。我试过把这个权限放在任何地方......甚至在多个位置（不仅仅是在清单中的服务标签中）。我正在以新的意图从壁纸设置页面启动 Activity，然后调用 startActivity。

有谁知道为什么即使包含权限，我也会被拒绝？有人可以告诉我如何在不强制关闭的情况下正确开始活动吗？

非常感激。

# mysql - Mysql子查询限制或使用多个查询

> ID：13722833
> 
> 赞同：0
> 
> 时间：2012-12-05T12:02:14.193
> 
> 标签：mysql

是否可以每个状态仅选择 2 个问题。我知道 mysql 不支持对子查询的限制，但我已经看到了我无法弄清楚如何用于此查询的解决方法。这是一个查询问题还是我必须使用额外的查询？我正在尝试为每个状态选择 2 行。

没有`LIMIT 2`下面的查询可以工作，但它有太多的结果，因此需要限制它。

```
SELECT id FROM questions WHERE status_id = c.status_id LIMIT 2 
```

询问：

```
 ...
    FROM questions q, users u, users lu, tags t, question_tags tt, connection c
   WHERE q.user_id = u.id
     AND tt.tag_id = t.id
     AND tt.question_id = q.id
     AND c.user_id = 100
     AND q.last_user = lu.id
     AND q.id IN (SELECT id FROM questions WHERE status_id = c.status_id LIMIT 2)
GROUP BY q.id
ORDER BY q.date DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:47:55.917

```
...
    FROM questions q, users u, users lu, tags t, question_tags tt, connection c
   WHERE q.user_id = u.id
     AND tt.tag_id = t.id
     AND tt.question_id = q.id
     AND c.user_id = 100
     AND q.last_user = lu.id
     AND q.id IN (SELECT MAX(id) FROM questions WHERE status_id = c.status_id, 
                  SELECT MAX(id) FROM questions WHERE status_id = c.status_id AND id < 
                        (SELECT MAX(id) FROM questions WHERE status_id = c.status_id))
GROUP BY q.id
ORDER BY q.date DESC 
```

丑陋，我知道，但它应该工作。

# java - 如何编写 Jemmy 单元测试？

> ID：13722834
> 
> 赞同：2
> 
> 时间：2012-12-05T12:02:15.550
> 
> 标签：java, swing, unit-testing, jemmy

我正在寻找一个为我们的 Java Swing GUI 编写回归测试的好工具。我找到[了jemmy2](http://jemmy.java.net/)，我真的很满意。

但是有一个小缺点：正如 jemmy 示例所示，我必须将每个测试类编写为`org.netbeans.jemmy.Scenario`：测试代码转到`public int runIt()`方法。我更喜欢使用通常的 given-when-then 结构和有意义的断言进行更传统的单元测试。我真的很想将 jemmy 与 junit 或 testng 等单元测试框架集成。

所以，问题是：我该怎么做？我知道这是可能的，因为[JellyTools](http://wiki.netbeans.org/JellyTools)以特定于 NetBeans 的方式做到了。

或者，如何从我的 jemmy 场景中获得有意义的错误报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:12:30.290

Jemmy 可以与任何测试工具一起使用，例如 JUnit、TestNG，你有什么。

你不需要做任何特别的事情——直接从测试方法中使用 Jemmy API。使用 JUnit 和 TestNG，您还可以使用 @Before 来运行经过测试的应用程序。

修罗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:37:01.457

同时我了解到这很容易：

```
@Test
public void testSomething() throws Exception {
            //GIVEN
        ClassReference cr = new ClassReference("components.TableFilterDemo");
    cr.startApplication();
    frame = new JFrameOperator("TableFilterDemo");

            //WHEN
            //doing more steps

            //THEN
            //do TestNG assertions
} 
```

最大的不同是，这种方式测试可以抛出 Jemmy 相关的异常。但是，它们是有意义的测试消息，所以没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:16:52.167

至于“有意义的错误报告”....

一个体面的测试工具将创建一份报告，说明哪些测试失败了。

如果您想了解更多问题所在，可以从过多的 Jemmy 日志中获取。您必须提供自己的日志记录才能在应用程序级别获得一些有意义的跟踪。

修罗

# java - 在构造函数参数中引用 bean 时是否可以使用 Spring EL？

> ID：13722838
> 
> 赞同：0
> 
> 时间：2012-12-05T12:02:35.447
> 
> 标签：java, spring, spring-el

```
<bean id="foo" class="com.bla.Foo" />
<bean id="bar" class="com.bla.Bar" />
<bean id="channel" class="com.bla.Channel">
    <constructor-arg ref="#{(config.isFooEnabled()) ? foo : bar}"/>
</bean> 
```

我收到以下错误：

> 无法解析对 bean '#{(config.isFooEnabled()) 的引用？富：酒吧}'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:45:29.263

`ref`属性值必须是字符串，而不是引用本身，因此，我会尝试返回或`foo`作为`bar`字符串，如：

```
<constructor-arg ref="#{(config.isFooEnabled()) ? 'foo' : 'bar'}"/> 
```

spring bean 引擎将获取表达式返回的字符串，并解析引用。

# java - 无法打开文件

> ID：13722840
> 
> 赞同：0
> 
> 时间：2012-12-05T12:02:43.803
> 
> 标签：java, php, php-java-bridge

我有一台使用 phpJavaBrigde 的服务器，我在添加 jar 文件时遇到问题：

```
require_once('Java.inc');
java_require("tciphone.jar"); 
```

它有一个错误：

```
[[o:Exception]:"java.lang.Exception: Invoke failed: [[o:JavaBridge]]->updateJarLibraryPath((o:String)[o:String], (o:String)[o:String], (o:String)[o:String], (o:String)[o:String]). 
Cause: java.io.IOException: Could not open jar file /var/www/iphone/trescantos/tciphone.jar, reason: error in opening zip file VM: 1.6.0_20@http://java.sun.com/"
at: #-29 php.java.bridge.DynamicJavaBridgeClassLoader.checkJarFile(DynamicJavaBridgeClassLoader.java:108) #-28 php.java.bridge.JarLibraryPath.createUrls(JarLibraryPath.java:193)
#-27 php.java.bridge.JarLibraryPath.checkURLs(JarLibraryPath.java:118) #0 /usr/share/php/Java.inc(265): 
java_ThrowExceptionProxyFactory->getProxy(1, NULL, true) #1 /usr/share/php/Java.inc(417): 
java_Arg->getResult(true) #2 /usr/share/php/Java.inc(423):        
java_Client->getWrappedResult(true) #3 /usr/share/php/Java.inc(627): 
java_Client->getResult() #4 /usr/share/php/Java.inc(1631): 
java_Client->invokeMethod(0, 'updateJarLibrar...', Array)
#5 /var/www/iphone/trescantos/newIncidenceReg.php(6): java_require('tciphone.jar') 
#6 {main}] 
```

该文件存在我照常检查权限644。

会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:54:16.943

我找到了，jar 文件由于某种原因损坏了，我照常创建它，但已损坏。

# java - t:commandLink 没有响应

> ID：13722847
> 
> 赞同：-1
> 
> 时间：2012-12-05T12:03:16.553
> 
> 标签：java, jsf

我写了以下代码

```
<t:commandLink id="parameterYSubmit" action="#{parameters.updateParameterY}" onclick="if(!confirmit()) return false;">
    <h:outputText value="#{msgs['button.save']}" />
</t:commandLink> 
```

我按下命令链接，弹出窗口打开，我点击确定，没有任何结果。我拥有所有正确的 bean 和功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:50:33.707

`t:commandLink`它是 myFaces 标签的内部标签。所以也许这个标签不在 MyFaces 标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:36:11.750

问题是我写的

```
<form... 
```

并不是

```
<h:form... 
```

# facebook - Facebook 页面选项卡：191 API 错误或无限循环

> ID：13722851
> 
> 赞同：1
> 
> 时间：2012-12-05T12:03:40.140
> 
> 标签：facebook, facebook-oauth, facebook-canvas

自上周四 (28-11-2012) 以来，我的 Facebook 页面选项卡无法正常工作。在developers.facebook.com 中，我设置了“Facebook 上的应用”和“页面标签”。

来源：

```
 $app_id = "XXXXXXXXXXXXXXX";
    //$canvas_page = "https://facebook.com/my_facebook_page?sk=app_XXXXXXXXXXXXXXX";
    $canvas_page = "http://my-promotion.domain.com";
    $application_secret = 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX';

    $facebook = new Facebook(array(
        'appId'  => $app_id,
        'secret' => $application_secret,
        'cookie' => true, 
    ));

    $auth_url = "https://www.facebook.com/dialog/oauth?client_id=".$app_id."&redirect_uri=".urlencode($canvas_page)."&scope=user_likes,publish_actions";
    $signed_request = $_REQUEST["signed_request"];
    list($encoded_sig, $payload) = explode('.', $signed_request, 2); 
    $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true); 
```

**1.**如果我将 $canvas_page 设置为[https://facebook.com/my_facebook_page?sk=app_XXXXXXXXXXXXXXX](https://facebook.com/my_facebook_page?sk=app_XXXXXXXXXXXXXXX)当我单击页面选项卡（在 Facebook 页面上）时会收到错误消息：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: De opgegeven URL wordt niet toegestaan door de configuratie van de applicatie. 
```

**2.**如果我将 $canvas_page 设置为 Canvas URL（在我的开发者.facebook.com 上的应用程序中声明） - [http://my-promotion.domain.com/](http://my-promotion.domain.com/) - 我将获得身份验证对话框。但在给予许可后，我得到一个无限循环，如：

=">http://my-promotion.domain.com/?code=AQC_wreWvGJuZQC07I5Kyps79JIeuRv718wWoWYb94A_RlxagWWRQOBQp0xQUAjG6rWAHDrVWEo851udcTC9jWHor980h2ipQ67LLKgYEfvKN71bjMO3y9SzHjiGtpIiCZHd3L6gHgM3Vmzpw3NvpMxXCXIUQtYOsEeOJAOws5rY3IaTCMo5Al-cO5zFPd2K0sHnbXbDo2JAyYTNm5skW-0i# *=* (the value of ?code changes continuous)

在 28-11-2012 之前，如果我像选项 1 一样设置 $canvas_page，我的页面选项卡一直在工作。

# javascript - 如何使用 jquery 从 iframe 获取表单字段

> ID：13722852
> 
> 赞同：0
> 
> 时间：2012-12-05T12:03:41.230
> 
> 标签：javascript, jquery, fancybox-2

我正在使用 fancybox 2 打开一个 iframe，将一些输入显示为复选框，例如：

```
<input type="checkbox" id="contact" name="sector" value="cellular"> 
```

现在我希望当用户单击花式框标题时，将使用所有复选框值调用父函数。

这是我的花式框标题：

```
'<li onclick="parent.sendIframeDataToParent(document.getElementByType("checkbox"), "sector_hook");">Submit</li>' 
```

我收到了这个错误： Uncaught SyntaxError: Unexpected token }

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:05:50.403

您的`"`JavaScript 中的 终止您用 分隔的 HTML 属性`"`。给你：

```
onclick="parent.sendIframeDataToParent(document.getElementByType(" 
```

当您`"`在用 分隔的属性值中具有数据时，将`"`它们表示为`&quot;`。

# asp.net - 如果已删除，则禁用网格删除按钮

> ID：13722853
> 
> 赞同：-1
> 
> 时间：2012-12-05T12:03:45.727
> 
> 标签：asp.net, c#-4.0, c#-3.0

> **可能重复：**
> [想要根据 Gridview 字段中的值启用图像按钮](https://stackoverflow.com/questions/13722395/want-to-enable-image-button-based-on-the-value-in-the-gridview-field)

如果状态 = 1，我想禁用 gridview 删除按钮。1 表示已删除。我正在使用以下代码禁用删除按钮，它返回错误消息“服务器标签格式不正确。”。

```
 <asp:TemplateField ItemStyle-Width="20px" HeaderImageUrl="~/images/icn_trash.png" >
  <ItemTemplate>
     <asp:ImageButton ID="btn_delete" runat="server" Enabled="<%# (Eval("fld_status").ToString()=="0") ? "true" : "false" %>" ToolTip="Delete" OnClientClick="return confirm('Important Alert : Do you delete this item ?')" CommandName="del" CommandArgument='<%#Bind("fld_val_id") %>' ImageUrl="~/images/icn_trash.png" />
   </ItemTemplate>
  <ItemStyle Width="20px"></ItemStyle>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:07:27.270

Try escaping the quotes

```
Enabled="<%# (Eval(\"fld_status\").ToString()=="0") ? "true" : "false" %>" 
```

you could also use single quotes like you did here

```
CommandArgument='<%#Bind("fld_val_id") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:07:53.963

I assume you should use `'` here:

```
Enabled='<%# (Eval("fld_status").ToString()=="0") ? "true" : "false" %>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:08:12.917

Replace the `"` with `'` and remove the `""` around the booleans:

```
Enabled='<%# (Eval("fld_status").ToString()=="0") ? true : false %>' 
```

# performance - 二进制码长对CUDA程序性能的影响

> ID：13722854
> 
> 赞同：4
> 
> 时间：2012-12-05T12:03:47.747
> 
> 标签：performance, cuda

我编写了一个包含多个子程序的 CUDA 程序。当我禁用子例程 A 时，运行时间会提高 a 量。当我禁用子例程 B 时，运行时间会提高 b 量。当我禁用子例程 A 和 B 时，运行时间会提高 c > a + b。两个子程序完全相互独立。

下一部分可能是一种天真的方法来分析它，但这是我所做的：我编译了每个版本的代码并为每个二进制文件运行*cuobjdump --dump-sass*。结果输出是完整的二进制文件大约 1350 行，每个二进制文件大约 1100 行，其中一个子程序被禁用。如果我禁用这两个子程序，我会得到 850 行。看来我需要前三行每行 3.1 us，禁用两个子例程需要 2.4 us。

由于 A 和 B 不包含任何复杂的内容或比其他代码更密集地使用内存，我不认为这是由于注释掉所有时间密集型操作并让简单的操作保持活动状态造成的。我的猜测是，禁用 A 和 B 的程序代码仍然适合流式多处理器的指令缓存，而其他版本太大。这可能会导致全局内存访问，以便可以加载更多程序代码，而延迟会导致这种差异。不幸的是，我找不到有关指令缓存大小的任何信息。

谁能帮我解释这些结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:20:21.877

可能有几件事会导致您的结果。有些可能包括：

*   缺少 A & B 会导致对剩余代码进行一些额外的优化。生成的代码可能不会*更短*，但仍可能执行得更快。

*   优化器发现 A 中的某些代码也存在于 B 中（A 和 B 可能仍然是独立的）。因此，同时拥有 A 和 B 比拥有单独的 A 和单独的 B 减慢程序的速度。

*   在读取*剩余*代码中的数据时，只有 A 或 B（或两者都没有）会导致更好的内存访问模式或更多的缓存命中。（我说的是数据，不是程序代码）

*   缺少 A 和 B 可能会导致更好的占用率，从而允许更多线程同时运行。

我非常怀疑指令缓存可能是问题所在。即使需要全局内存读取，它也永远不会“错位”，因为 warp 总是只需要一条指令。我的猜测是他们使用一些专用的硬件来执行指令。

# javascript - 在重复模式之间退出的子字符串

> ID：13722858
> 
> 赞同：0
> 
> 时间：2012-12-05T12:04:04.157
> 
> 标签：javascript, jquery, string

我的字符串是：`<div>2</div><div>3</div><div>4</div><div>5</div><div><br></div>`

我需要
使用Javascript ie.anything 在数组中获取2、3、4、5`<div></div>`

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:06:45.303

匹配和之间的**任何东西**`<div>``</div>`

```
var a, r=[];
while((s=str.indexOf("<div>"))!=-1){
    e=str.indexOf("</div>"); 
    a=str.substring(s+5, e); 
    if(a) r.push(a);
    str=str.substr(e+6);
} 
```

另一种更简单的方法

```
 var r = str.match(/<div>.*?<\/div>/gi).map(function(i){
     return i.replace(/<div>(.*?)<\/div>/gi, "$1");
 }); 
```

如果它只是数字（就像你最初的问题一样）使用这个

```
var str = "<div>2</div><div>3</div><div>4</div><div>5</div><div><br></div>";
var num = str.match(/\d+/g) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:12:39.980

试试下面的代码

```
var obj = $("div").map(function(index,value){
return $(this).html();

})    
alert( "hi" +obj[0]); 
```

[http://jsfiddle.net/F9MQr/12/](http://jsfiddle.net/F9MQr/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:16:05.580

对于任何可能的价值；

```
var s = "<div>2</div><div>3</div><div>4</div><div>5</div><div><br></div>";
var a = [];
$.each($(s).filter("div"), function() {
       $(this).text() !== "" && a.push($(this).text());
});
alert(a);
​ 
```

（这将忽略空 div 并返回`X`for `<div>X<br/></div>`）

# sql - 将文本添加到 SOLR 数据库值的开头

> ID：13722863
> 
> 赞同：0
> 
> 时间：2012-12-05T12:04:31.507
> 
> 标签：sql, database, solr, field

我将此代码用于我的 SOLR DIH：

```
<dataConfig>
    <dataSource name="app" driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/wikipedia" user="wikipedia" password="secret" />
    <dataSource name="data" driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/wikipedia" user="wikipedia" password="secret" />
    <document> 
        <entity dataSource="app-ds" name="item" query="SELECT id, title, description, date, link, location_id, source_id, company_id from item"> 
            <field column="id" name="id" /> 
            <field column="title" name="title" /> 
            <field column="description" name="description" />   
            <field column="date" name="date" /> 
            <field column="link" name="link" />
        <entity dataSource="app-ds" name="location" query="SELECT name, coordinate from location where location_id=${item.location_id}"> 
            <field column="name" name="location_name" /> 
            <field column="coordinate" name="location_coordinates" /> 
                        </entity> 
        <entity dataSource="app-ds" name="source" query="SELECT name from source where source_id=${item.source_id}"> 
                <field column="name" name="source_name" /> 
                        </entity> 
                   <entity dataSource="app-ds" name="company" query="SELECT name from company where company_id=${item.company_id}"> 
                <field column="name" name="company_name" /> 
                </entity> 
        </entity> 
    </document> 
</dataConfig> 
```

由于我正在合并两个数据库，因此我希望 SOLR 中的每个条目都有一个唯一 ID。在我的情况下，最好的方法是为第一个数据库 ID 设置 app* *ID* *，为第二个数据库 ID 设置 data* *ID* *。

使用我上面的代码，如何将单词“app”添加到存储在 SOLR ID 字段中的 ID 前面，以便我的数据库 ID=123 和 Solr ID = app123

编辑：我猜它可能是这样的（但我不擅长 SQL）

```
query="SELECT app_(id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:19:13.023

您可以尝试将 SQL 查询修改为 -

> 选择“表 1”|| ID 作为 PRIMARY_ID ........

PRIMARY_ID 现在可以配置为 solr 中的唯一 ID。

```
<field column="primary_id" name="primary_id" /> 
```

即使您使用 Delta 导入执行增量更新，更新的 SQL ID 仍将生成与上述查询相同的 Solr ID 并将被更新。因此，请务必在 Delta 查询中也使用上述内容。

# sql - 这个查询可以简化吗

> ID：13722864
> 
> 赞同：0
> 
> 时间：2012-12-05T12:04:31.793
> 
> 标签：sql, sql-server, sql-server-2008-r2

**编辑**

这是我的数据示例：

```
 create TABLE #Table 
(
    [Market] VARCHAR(100),
    [Operator] VARCHAR(100),
    [Date] DATE,
    [Num Registrations] INT,
    [Num Active] INT,
    [Num Accepted Purchases] INT
)

INSERT INTO #Table VALUES
('Market1','Operator1','2012-12-01',2,4,7),
('Market1','Operator2','2012-12-01',3,5,7),
('Market1','Operator3','2012-12-01',1,2,7),
('Market2','Operator4','2012-12-01',2,1,7),
('Market2','Operator5','2012-12-01',0,4,7),
('Market3','Operator6','2012-12-01',2,44,7) 
```

我有以下脚本：

```
SELECT 
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Num Registrations],
    a.[Num Active],
    a.[Num Accepted Purchases],
    [rnk] = b.rnk
FROM 
    #Table a
    INNER JOIN 
        (
        SELECT 
            [Market],
            [rnk] = RANK() OVER (ORDER BY SUM([Num Registrations] + [Num Active]))
        FROM #Table
        GROUP BY [Market]
        ) b
        ON 
          a.[Market] = b.[Market]
GROUP BY
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Num Registrations],
    a.[Num Active],
    a.[Num Accepted Purchases],
    b.rnk 
```

以上工作正常，但我是否过于复杂了`sub-query`; 我可以`RANK`直接在主查询的`SELECT`子句中使用该函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:42:46.543

这是使用 cte 时的样子。

```
 DECLARE @Table TABLE
(
    [Market] VARCHAR(100),
    [Operator] VARCHAR(100),
    [Date] DATE,
    [Num Registrations] INT,
    [Num Active] INT,
    [Num Accepted Purchases] INT
)

INSERT INTO @Table VALUES
('Market1','Operator1','2012-12-01',2,4,7),
('Market2','Operator2','2012-12-01',3,5,7),
('Market3','Operator3','2012-12-01',1,2,7),
('Market4','Operator4','2012-12-01',2,1,7),
('Market5','Operator5','2012-12-01',0,4,7),
('Market6','Operator6','2012-12-01',2,44,7)

--with cte
    ;WITH Cte_Rank AS
    (
        SELECT 
             a.[Market],
             RANK() OVER (ORDER BY SUM(a.[Num Registrations] + a.[Num Active])) [Rnk]
        FROM @Table a GROUP BY a.Market 
    )
    SELECT 
        a.[Market],
        a.[Operator],
        a.[Date],
        a.[Num Registrations],
        a.[Num Active],
        a.[Num Accepted Purchases],
        c.Rnk
    FROM @Table a
    INNER JOIN Cte_Rank c ON c.Market = a.Market

--The only way to avoid subquery is to get rid of the "SUM" aggregate       
    SELECT 
        a.[Market],
        a.[Operator],
        a.[Date],
        a.[Num Registrations],
        a.[Num Active],
        a.[Num Accepted Purchases],
         RANK() OVER (ORDER BY a.[Num Registrations] + a.[Num Active]) [Rnk]
    FROM @Table a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:57:56.217

是的，您根本不需要进行显式连接：

```
SELECT distinct
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Num Registrations],
    a.[Num Active],
    a.[Num Accepted Purchases],
    [rnk] = dense_rank() over (order by tot, market)
FROM (select a.*,
             sum(a.[Num Registrations] + a.[Num Active]) over (partition by market) as tot
      from xxx.dbo.tb_r12044dxx_yyyy a
     ) a 
```

如果您没有重复项，则可以`distinct`从`select`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:24:18.910

我认为最后的 group by 是多余的，但我看不到避免子查询的方法..

我不确定以下是否更有效，您必须使用您的数据尝试它，但它更容易阅读有争议：

```
SELECT 
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Num Registrations],
    a.[Num Active],
    a.[Num Accepted Purchases],
    [rnk] = DENSE_RANK() OVER (ORDER BY NumToRankOver)
FROM xxx.dbo.tb_r12044dxx_yyyy a
INNER 
JOIN 
(
    SELECT 
    [Market],
    SUM([Num Registrations] + [Num Active]) AS NumToRankOver
    FROM xxx.dbo.tb_r12044dxx_yyyy
    GROUP BY [Market]
) b
    ON  a.[Market] = b.[Market] 
```

# php - 使用索引对多维数组进行排序

> ID：13722865
> 
> 赞同：0
> 
> 时间：2012-12-05T12:04:36.953
> 
> 标签：php, sorting

我有以下数组，我想按降序对所有记录进行排序。谁能告诉我这样做的php代码或伪代码。

```
Array
(
    [reg_id] => Array
        (
            [0] => 5
            [1] => 7
            [2] => 17
            [3] => 18
            [4] => 19
            [5] => 20
            [6] => 34
        )

    [name] => Array
        (
            [0] => employee1
            [1] => employee6
            [2] => employee3
            [3] => employee4
            [4] => employee2
            [5] => empoyee5
            [6] => employee9
        )

    [test_w] => Array
        (
            [0] => 21/30
            [1] => 15/30
            [2] => 27/30
            [3] => 16.5/30
            [4] => 21/30
            [5] => 18/30
            [6] => 12/30
        )

    [intr_w] => Array
        (
            [0] => 8/10
            [1] => 6/10
            [2] => 9/10
            [3] => 9/10
            [4] => 3.3/10
            [5] => 7/10
            [6] => 0/10
        )

    [exp_w] => Array
        (
            [0] => 2.5/5
            [1] => 4/5
            [2] => 4.35/5
            [3] => 4.5/5
            [4] => 4.8/5
            [5] => 4.5/5
            [6] => 0/5
        )

    [educ_w] => Array
        (
            [0] => 37.41/55
            [1] => 44.14/55
            [2] => 33.27/55
            [3] => 38.43/55
            [4] => 34.52/55
            [5] => 46.11/55
            [6] => 43.66/55
        )

    [total] => Array
        (
            [0] => 68.91
            [1] => 69.14
            [2] => 73.62
            [3] => 68.43
            [4] => 63.62
            [5] => 75.61
            [6] => 55.66
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:14:56.747

使用这个功能应该可以解决问题

```
function multisort($array, $key, $sort_flags = SORT_REGULAR) {
        if (is_array($array) && count($array) > 0) {
            if (!empty($key)) {
                $mapping = array();
                foreach ($array as $k => $v) {
                    $sort_key = '';
                    if (!is_array($key)) {
                        $sort_key = $v[$key];
                    } else {
                        // @TODO This should be fixed, now it will be sorted as string
                        foreach ($key as $key_key) {
                            $sort_key .= $v[$key_key];
                        }
                        $sort_flags = SORT_STRING;
                    }
                    $mapping[$k] = $sort_key;
                }
                asort($mapping, $sort_flags);
                $sorted = array();
                foreach ($mapping as $k => $v) {
                    $sorted[] = $array[$k];
                }
                return $sorted;
            }
        }
        return $array;     

} 
```

**例如：**

```
$result=multisort($array,$sort_flags = DESC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:16:17.907

最简单（但效率最低）将是简单的冒泡排序

伪代码

```
 for( $i from 0 to count($arr[total])):
       for( $j from 0 to count(...)):
            if($arr[total][$i] < $arr[total][$j]):
                   //SWAP VALUES AT i AND j
                   $this->swap($arr[total][$i],$arr[total][$j]);
                   $this->swap($arr[name][$i],$arr[name][$j]);
                   $this->swap($arr[reg_id][$i],$arr[reg_id][$j]);
                   // etc for all required fields
           endif;
       endfor;
 endfor; 
```

交换功能（通过引用传递值，因此它们将得到更改）

```
 function swap(&$i, &$j){
    $t=$i;
    $i=$j;
    $j=$t;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:37:03.270

我有具有以下功能的排序数组。

```
 function msort($array, $key_s) {
    $arraynew = $array;
    foreach($array as $key=>$val){
        if($key == $key_s){

            for($i=0; $i<count($val); $i++){
                for($j=0; $j<count($val); $j++){
                    if($val[$i] > $val[$j]){
                        $temp = $val[$i];
                        $val[$i] = $val[$j];
                        $val[$j] = $temp;

                        // swap all values
                        foreach($arraynew as $arrKey=>$arrVal){
                            $temp = $arraynew[$arrKey][$i];
                            $arraynew[$arrKey][$i] = $arraynew[$arrKey][$j];
                            $arraynew[$arrKey][$j] = $temp;
                        }
                    }
                }
            }
        }

    }
    return $arraynew;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:19:51.047

由于这些似乎是与实体相关的字段，因此我能给您的最佳答案是构建更好的数据结构。例如，您应该构建一个包含这些字段的 Employee（或您在那里表示的任何实体）类：

```
class Employee
{
 public $reg_id;
 public $name;
 public $test_w;
 public $intr_w;
 public $exp_w;
 public $educ_w;
 public $total;
} 
```

然后保留一个员工的数组。如果你有另一个字段又是一个数组怎么办？我知道我的回答并没有解决实际的排序问题，我只是说你保存数据的方式很快就会变得非常脏。

# java - Android Master/Detail 流程 - 在 Activity 中操作 Detail 片段视图

> ID：13722867
> 
> 赞同：0
> 
> 时间：2012-12-05T12:04:48.920
> 
> 标签：java, android, android-fragments, master-detail

所以我是 Android 开发的新手，并试图围绕主/细节流程设计。因此，我使用 Eclipse 为您创建的默认类 - so `ScreenDetailActivity`、`ScreenDetailFragment`、`ScreenListActivity`和`ScreenListFragment`. 我的一个细节片段使用了一个布局，其中包含一系列用于输入数据的检查和字段，以及一个按钮，该按钮应该使使用片段的 Activity 类将该数据传递给计算器类，然后使用数据。例如，在`calculation_layout.xml`有问题的 Detail 片段之一使用的文件中找到：

```
<EditText android:id="@+id/edit_value"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:inputType="numberDecimal|numberSigned"
      android:hint="@string/background_value" />

<Button android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_singleCalc"
    android:onClick="calculate" /> 
```

我认为我的 Button`calculate`功能正常工作（即当计算为空或做一些琐碎的事情时应用程序不会崩溃）；它在 和 中都实现了`ScreenListActivity`，`ScreenDetailActivity`因为两者都可以使用片段。

但是，每当我尝试访问 Detail 片段中的 EditText 对象时，应用程序就会崩溃。我正在尝试这样的事情：

```
public void calculate(View view){
    //Retrieve all the information, and set the values in the Calculator
    EditText editText = (EditText) findViewById(R.id.edit_value);
    String number = editText.getText().toString();
    double angle = Double.parseDouble(number);

    Calculator.longCalc();
} 
```

并像这样在我的 ScreenDetailFragment 中扩展布局，与 Eclipse 生成的默认方法的工作方式不同（其中 mItem 基本上是一个小类的实例，其中包含有关应该显示哪个片段的信息）：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // The returned view
        View rootView;
        // If mItem is non-null...
        if (mItem != null) {
            if (mItem.title == "Calculation") {
                // If the title is Calculation, use the calculation layout
                rootView = inflater.inflate(R.layout.calculation_layout, container, false);
            } else {
                // Otherwise, show the dummy content as text in a TextView
                rootView = inflater.inflate(R.layout.fragment_screen_detail, container, false);
                ((TextView) rootView.findViewById(R.id.screen_detail)).setText(mItem.title);
            }
        } else {
            rootView = inflater.inflate(R.layout.fragment_screen_detail, container, false);
        }

        return rootView;
    } 
```

如前所述，结果是崩溃。

我认为我应该做的是以某种方式`rootView`从 Activity 访问，但我真的不知道如何安全有效地做到这一点。

有人可以在这里给我一些指示吗？

更新：

我尝试实现 OnClickListener，在特定布局膨胀时将其设置为：

```
((Button)rootView.findViewById(R.id.button_calc)).setOnClickListener(this); 
```

并像这样实现 onClick(View) 函数：

```
public void onClick(View view) {
        //Retrieve all the information, and set the values in the Calculator
        view = (View) view.getParent();
        EditText editText = (EditText) layout.findViewById(R.id.edit_phiD);
        String number = editText.getText().toString();

        Calculator.angle = Double.parseDouble(number) * 2.0 * Math.PI/360.0;

        Calculator.longCalc();
    } 
```

但是，错误仍然存​​在。如果我将 a重铸`ViewParent`为 a `LinearLayout`， a`ViewGroup`或者如果我`view`按原样使用直接，它也会持续存在。需要明确的是，我试图获取被单击按钮的父布局，以便我可以返回到该布局的另一个子布局`Views`并访问它们的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:15:26.920

你不需要通过你的活动来实现这一点。删除 onclick 行并为布局中的按钮添加一个 id：

```
<Button android:id="@+id/calc_button"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:text="@string/button_singleCalc" /> 
```

然后，只需将 OnClickListener 添加到 Fragment 中的按钮即可。像这样的东西：

```
private View mRootView;
private  EditText mEditText;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // If mItem is non-null...
    if (mItem != null) {
        if (mItem.title == "Calculation") {
            // If the title is Calculation, use the calculation layout
            mRootView = inflater.inflate(R.layout.calculation_layout, container, false);
            mEditText = (EditText) mRootView.findViewById(R.id.edit_phiD);    
            ((Button)mRootView.findViewById(R.id.calc_button)).setOnClickListener(this);         
        } else {
            // Otherwise, show the dummy content as text in a TextView
            mRootView = inflater.inflate(R.layout.fragment_screen_detail, container, false);
            ((TextView) mRootView .findViewById(R.id.screen_detail)).setText(mItem.title);
        }
    } else {
        mRootView = inflater.inflate(R.layout.fragment_screen_detail, container, false);
    }

    return mRootView;
} 
```

（您的片段需要为此实现 OnClickListener）。然后你会在你的 Fragment 上得到一个回调，这就是你在那里所做的：

```
public void onClick(View v){
    //Retrieve all the information, and set the values in the Calculator
    String number = mEditText.getText().toString();
    double angle = Double.parseDouble(number);

    Calculator.longCalc();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T16:45:15.723

[https://developer.android.com/training/basics/fragments/index.html](https://developer.android.com/training/basics/fragments/index.html)

这是最好的例子，有两个fragments headersfragment 和articlefragment 具有动态UI，按照它们在articlefragment 上的接口来选择哪个标题。正确遵循教程。你应该很好理解。

# c# - 批量处理已更改的文件

> ID：13722868
> 
> 赞同：1
> 
> 时间：2012-12-05T12:04:51.547
> 
> 标签：c#, .net, thread-safety

例如，我有一个应用程序，其中包含 a`Timer`和 a`FileSystemWatcher`用于每 5 分钟对更改的文件进行批处理。

仅在检查文件是否已存在于队列中之后，才会在`FileSystemWatcher`更改文件并将文件路径添加到 a 时引发事件。`Queue`

当`Timer`滴答声遍历队列时，弹出每个项目并处理它；直到队列为空。

我的问题是：

*   我是否正在尝试正确解决此问题并使用正确的数据类型？
*   我需要担心并发访问`Queue`吗？如果是这样，我应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:22:24.063

**已编辑：** 问题 1：我认为您用于批量处理文件的方法和对象在我看来是合适的。注意：处理更改的时间间隔应该足够公平，这样您就不会遇到任何文件锁定问题或类似问题。

问题 2：如果从同一个实例访问队列，那么我看不到任何问题。如果您从不同的线程访问它，您通常会遇到集合锁定问题，这里不是这种情况。

再说一次，如果您遇到该问题或担心队列访问和线程安全，我建议您使用 -[并发集合类型](http://msdn.microsoft.com/en-us/library/dd287108%28v=vs.100%29.aspx)

您的问题：“如果计时器在 FileSystemWatcher 添加更改的文件的同时滴答作响，会发生什么？” - 这个问题的答案是 - “您不会得到任何异常或错误，并且文件更改添加项目将在下一个计时器滴答时出现以进行处理。”

# android - 如何在 Google Map API v2 中处理地图的 onTouch 事件？

> ID：13722869
> 
> 赞同：32
> 
> 时间：2012-12-05T12:04:56.160
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2

默认情况下，GoogleMap 不提供地图拖动开始和拖动停止的事件。[我已经在这里报告了这个问题](https://stackoverflow.com/questions/13702117/how-can-i-handle-map-move-end-using-google-maps-for-android-v2)。

我想**定制** `handler`将使用普通`onTouch`事件并将其与`setOnCameraChangeListener`.

但是我找不到如何访问对象`onTouch`的事件`GoogleMap`。它不提供这样的**回调**。

我想知道如何在**Google Map API v2**中处理地图的 onTouch 事件？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-05T16:39:34.297

这是确定拖动开始和拖动结束事件的可能解决方法：

你必须扩展`SupportMapFragment`或`MapFragment`。在`onCreateView()`您必须将您`MapView`的自定义包装`FrameLayout`（在下面的示例中是 class `TouchableWrapper`），您可以在其中拦截触摸事件并识别地图是否被点击。如果您`onCameraChange`被调用，只需检查是否按下了地图视图（在下面的示例中，这是变量`mMapIsTouched`）。

示例代码：

更新 1：

*   返回原始创建的视图`getView()`
*   使用`dispatchTouchEvent()`而不是`onInterceptTouchEvent()`

自定义框架布局：

```
private class TouchableWrapper extends FrameLayout {
    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
        mMapIsTouched = true;
        break;

    case MotionEvent.ACTION_UP:
        mMapIsTouched = false;
        break;
        }

        return super.dispatchTouchEvent(ev);
    }
    } 
```

在您自定义的 MapFragment 中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
    mOriginalContentView = super.onCreateView(inflater, parent, savedInstanceState);

    mTouchView = new TouchableWrapper(getActivity());
    mTouchView.addView(mOriginalContentView);

    return mTouchView;
}

@Override
public View getView() {
    return mOriginalContentView;
} 
```

在您的相机更改回调方法中：

```
private final OnCameraChangeListener mOnCameraChangeListener = new OnCameraChangeListener() {
    @Override
    public void onCameraChange(CameraPosition cameraPosition) {
        if (!mMapIsTouched) {
            refreshClustering(false);
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-22T09:45:19.530

有一种更简单的方法可以做到这一点，`onCameraMoveStarted`像这样处理你的监听器案例

在代码片段下方

```
@Override
public void onCameraMoveStarted(int reason) {
    if (reason == OnCameraMoveStartedListener.REASON_GESTURE) {
        Toast.makeText(this, "The user gestured on the map.",
                       Toast.LENGTH_SHORT).show();
    } else if (reason == OnCameraMoveStartedListener
                            .REASON_API_ANIMATION) {
        Toast.makeText(this, "The user tapped something on the map.",
                       Toast.LENGTH_SHORT).show();
    } else if (reason == OnCameraMoveStartedListener
                            .REASON_DEVELOPER_ANIMATION) {
        Toast.makeText(this, "The app moved the camera.",
                       Toast.LENGTH_SHORT).show();
    }
} 
```

# c - 在 C 编程中经过一段时间的延迟后，如何写入 4 个字节并读取第 2 个字节？

> ID：13722871
> 
> 赞同：1
> 
> 时间：2012-12-05T12:04:56.840
> 
> 标签：c

我有一个嵌入式 SBC（主）和从属一个基于 8051 的射频模块，它具有 32kbs 的内部 ROM。我有 SPI 总线来访问该内部 ROM。当我使用 SPI 总线从我的主设备向从设备发送一些数据时，我可以在 MOSI 线上看到一些数据，在这些数据之后，我需要从从设备获得一些响应。我不确定数据是否正确写入闪存 ROM 的 00,01,02,03 地址。我也期待 MISO 线上的一些数据，但我什么也没得到。我怀疑这四个字节是否正确写入我的闪存 ROM 是否以 4 个地址开头？？我已经添加了代码供您参考，请让我知道我在做什么错。

```
 typedef unsigned char uint8;

    void run_test(int fd)
    {
        int i;
        uint8 buffer[20];
        //int size,l,size1;
        uint8 *value[4] = {0xAC,0x53,0xAA,0x55};
        uint8 address=0x0000;

        /*Writing 4 bytes*/

        for(i=0;i<4;i++)
        {
             printf("address:%.4x \t value : %2X\n",address,value[i]);
         write(fd,&value,4);
         address++;
        }
   /*Reading the 2nd byte*/

    read (fd, buffer, sizeof (buffer));
    printf("%2X\n",);   
    } 
```

我想从缓冲区中读取我的第二个字节。请让我知道我在做什么错？而且我需要让我的地址不断变化，我想在第零个地址上写第一个字节等等。

问候，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:17:19.303

我不太熟悉您的特定应用程序，所以我真的不知道当您在设备库中调用“写入”和“读取”时会发生什么。但是，从纯 C/C++ 的角度来看，我注意到一些可能需要也可能不需要注意的事情。据我了解，您想通过 SPI 总线将 4 个字节的数据写入内存的前 4 个字节。在您的写入循环中，我看到了几件事。

首先，您循环 4 次，每次写入 4 个字节。总共是 16 个。另外，当您写作时，我根本看不到“地址”在哪里发挥作用。我注意到您正在传递 uint* 数组的地址的“值”数组。write 函数需要一个 void*，而您实际上是在传递一个 void***。这意味着您绝对没有写入您声明的值数组中的字节。

所以在我看来，你可以像这样写 4 个字节，一次一个字节或一次 4 个字节。

```
 int i;
   uint8 value[4] = { 0xAC, 0x53, 0xAA, 0x55 };
   uint8 address = 0;

   // Writing 4 bytes METHOD 1
   for (i = 0; i < 4; ++i)
   {
      write(fd, &(value[i]), 1);
   }

   // Writing 4 bytes METHOD 2
   write(fd, value, 4); 
```

您可以像这样从缓冲区中打印第二个字节。

```
 uint8 buffer[20];
   read(fd, buffer, sizeof(buffer));
   printf("%2X\n", buffer[1]); 
```

我曾使用过一些微控制器，并且之前没有使用文件描述符在 SPI 总线上读/写。所以我希望这会有所帮助。

# c# - Mac 上单声道没有 log4net 输出

> ID：13722874
> 
> 赞同：1
> 
> 时间：2012-12-05T12:05:11.637
> 
> 标签：c#, mono, log4net, monodevelop, monomac

我正在尝试将 log4net 添加到我们的 MonoMac 解决方案中。构建良好，但没有生成日志文件。

我有一个在 Windows 应用程序中运行良好的 log4net 配置。我们引用了 CLI 构建 log4net（用于 mono v2）。Windows 对此很满意，并且我们按预期获得了日志。

现在在 Mac 中，我尝试了一个单独的 log4net.config 文件（首选） - 它已正确构建并出现在 Mac 的输出区域中，名称在 app.config 中引用。

还是没有输出。

我已经尝试将所有配置放在 app.config 中。没有不同。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:06:40.790

好消息！我们的 log4net 工作得很好。与以往一样，它依赖于配置。我们正在使用我们通常的附加程序，一切似乎都很好。我们正在使用单独的配置文件。我们使用的是手动配置调用，而不是程序集属性。

都好。请记住在 MonoDevelop 中添加一个配置文件，并记住将其复制到输出目录。

约伯确实是个好人。

如果其他人被卡住了，或者如果它有价值，我可以在这里添加我们的配置。

# php - strtotime() DateTime 类模拟方法

> ID：13722878
> 
> 赞同：24
> 
> 时间：2012-12-05T12:05:25.770
> 
> 标签：php

有没有`DateTime`像`strtotime()`核心 PHP 函数一样的类方法？

例如`strtotime('last monday');`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-05T12:08:09.410

那将是`DateTime::__construct`：

```
$date = new DateTime('Sunday'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T12:09:44.773

作为`strtotime()`返回长 UNIX 时间戳，DateTime 具有方法`getTimestamp()`。

```
$date = new DateTime('2012-01-25 19:44:49.123');
echo $date->getTimestamp(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T12:08:02.340

我想你正在寻找`DateTime.createFromFormat()`

[http://php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

# android - 安卓：自动完成文本视图

> ID：13722879
> 
> 赞同：1
> 
> 时间：2012-12-05T12:05:25.380
> 
> 标签：android

我是Android的初学者。当我尝试将 SQLite 数据库中的值填充到 AutoCompleteTextView 时出现问题。我通过函数**getAllFnames()** [**如下所示**] 从数据库获取值到字符串数组。但是 AutoCompleteTextView 在运行时没有显示任何建议..任何人都可以帮助我..下面给出了代码..请检查..谢谢..（Log Cat 显示一些过滤问题！）

```
 public String[] getAllFnames() {

     database=open();
     Fname=new String[1000];
     int i=0;
Cursor cursor = database.query(DbCreation.PATIENT_TABLE,Columns, null, null, null, null, null);
          cursor.moveToFirst();
          while (!cursor.isAfterLast()) {
          Fname[i]=cursor.getString(1).toString();
          Log.v("DataBaseValues...", Fname[i]);
          cursor.moveToNext();
          i++;
        }

        // Make sure to close the cursor
        cursor.close();
        return Fname;
} 
```

在文本视图侧

```
 Fname=ss.getAllFnames();//here Fname is a string array
             //"ss" is the object of class where method getAllFname()  is placed.
ArrayAdapter<String> fnameAdapter=new ArrayAdapter<String>(this,R.layout.list,Fname);

     fnameSearch.setThreshold(1);//fnameSearch is the AutoCompleteTextView

     fnameSearch.setAdapter(fnameAdapter);

     fnameSearch.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:00:04.313

我通过以下方式更改了方法 getAllFnames()

```
 public String[] getAllFnames() {

     database=open();

         Cursor cursor = database.query(DbCreation.PATIENT_TABLE,Columns, null, null, null, null, null);
         if(cursor.getCount() >0){
             String []  Fname=new String[cursor.getCount()];
             int i=0;
            while (cursor.moveToNext()) {

           Fname[i]=cursor.getString(0).toString();//+" "+cursor.getString(1).toString();
          Log.v("DataBaseValues...", Fname[i]);

          i++;
        }
        // Make sure to close the cursor
        cursor.close();
        return Fname;
         }
         else return new String[] {};
  } 
```

和

```
 String [] Fname=ss.getAllFnames();

      int i=0;
      Log.v("insidichSearchAct..", Fname[i]);

     ArrayAdapter<String> fnameAdapter=new ArrayAdapter<String>(this,R.layout.fname_search_list,Fname);
     fnameSearch.setThreshold(1);
     fnameSearch.setAdapter(fnameAdapter); 
```

然后我得到了 AutoCompleteTextView 的建议值 感谢所有专家...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:17:36.347

试试这个代码。使用您的数据数组代替 Months 数组。而是使用 arraylist 代替大小为 1000 的数组。它更有效。

公共类自动完成扩展了 Activity {

```
 static final String[] Months = new String[]{
    "January","February","March","April","May","June","July","August",
    "September","October","November","December"
    };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.autocomplete);

    ArrayAdapter<String> monthArray = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, Months);

    final AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.testAutoComplete);
            textView.setAdapter(monthArray);

   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:17:49.163

你用这个

```
ArrayAdapter<String> fnameAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, Fname); 
```

尝试这个。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:20:48.027

我在这里看到的唯一问题是（假设您从数据库中获取值）

```
ArrayAdapter<String> fnameAdapter=new ArrayAdapter<String>(this,R.layout.list,Fname); 
```

将其替换为

```
myAutoComplete.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, Fname)); 
```

# c# - 发送消息的最佳做法是什么

> ID：13722885
> 
> 赞同：0
> 
> 时间：2012-12-05T12:05:48.027
> 
> 标签：c#, ajax, asp.net-mvc-3

**目标：**

调用一个动作并显示一条消息以显示结果“成功/错误”，

**问题：**

实际上，我知道如何使用 JQuery 来做到这一点，但我不知道这是否是最好的方法，

**??** 我想知道从服务器端做所有这些是否会更好，我的意思是只调用一个 ActionLink 然后执行一个 javascript 或从服务器返回一条消息。

**代码：** MVC3 C#

看法：

```
 $('#btnValidate')
        .click(function(e) {
         $.ajax({
            url: "/Valoration/ValidateHvm" ,
            type: "POST",
            success: function(data, status, xhr) {
                           if(data.success){
                                 alert('success');
                           }else{ 
                                 alert('error');
                      },
            error: function(xhr, status, err) {
                alert('error');
            }
        });

     }); 
```

控制器：

```
[HttpPost]
    public ActionResult ValidateHvm()
    {
        var result = HvmService.ValidateProject;
        return Json(new { success = result});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:11:08.433

您的实现没有任何问题，这对我来说似乎是最好的方法，但另一种方法是您可以使用 ModelState.AddModelError() 如果您愿意，但您的操作结果将需要使用模型重新显示视图

所以你发帖会接受模型

```
[HttpPost]
public ActionResult ValidateHvm(ValidateModel model)
{
    var result = HvmService.ValidateProject(model);

    if(result == false){ //or whatever

       ModelState.AddModelError("","Error");

    }

        return View("MyView", model)
} 
```

# css - 基于 jQuery 的下拉菜单显示 Firefox 之外的差距

> ID：13722887
> 
> 赞同：0
> 
> 时间：2012-12-05T12:05:52.497
> 
> 标签：css, cross-browser

我在 jQuery 中创建了一个非常简单的自动完成下拉小部件，您可以将其应用于`input`元素。`input`它工作得很好，但由于某种原因，下拉列表在 Firefox 以外的浏览器中显示了 和列表之间的差距（在 IE、Safari 和 Chrome 中测试）。

我在[jsFiddle](http://jsfiddle.net/BMCzJ/3/)中对此进行了模拟，以演示问题，却发现它在所有浏览器中都能正常工作......直到我取消了“标准化 CSS”选项。然后在IE等中再次出现差距，但在Firefox中仍然可以正常工作。这是一个屏幕截图：

![在此处输入图像描述](../Images/47f0a7fab0475a41a7fbf084e23650b6.png)

因此，这显然是一个 CSS 问题。但是，我无法终生找出问题所在。我已经查看了 jsFiddle`normalize.css`并从那里尝试了一些东西（主要将各种选择器的填充和边距设置为 0px），但我无法让它工作！关于如何更改我的 CSS 以使所有浏览器中的差距消失的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:13:14.487

只需将 div.popup ul 上的上边距设置为 0px，我就能够摆脱差距。

```
div.popup ul {
list-style: none;
background: red;
padding: 0px;
margin-top: 0px;
} 
```

# java - javaFX 2.2 - 无法从控制器填充表

> ID：13722892
> 
> 赞同：4
> 
> 时间：2012-12-05T12:06:08.050
> 
> 标签：java, javafx-2

我有以下代码。当我尝试运行时，表格不会在 GUI 上显示记录。你能建议吗？

fxml_tableview.fxml - 描述表结构的 fxml。

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.*?> 
<?import javafx.geometry.Insets?>
<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>
<?import fxmltableview.*?> 

<Scene width="400" height="550" fx:controller="fxmltableview.FXMLTableViewController" 
       xmlns:fx="http://javafx.com/fxml">

    <GridPane alignment="center" hgap="10" vgap="10">
        <TableView fx:id="tableView" GridPane.columnIndex="0" GridPane.rowIndex="1">
            <columns>
                <TableColumn fx:id="tradeId" text="Trade ID" prefWidth="200"/>
            </columns>    
        </TableView>
    </GridPane>
</Scene> 
```

FXMLTableViewController.java //我试图填充表格列的控制器。

```
 package fxmltableview;

    import java.net.URL;
    import java.util.ResourceBundle;

    import javafx.collections.FXCollections;
    import javafx.collections.ObservableList;
    import javafx.fxml.FXML;
    import javafx.fxml.Initializable;
    import javafx.scene.control.TableView;

    public class FXMLTableViewController implements Initializable{
        @FXML private TableView<Trade> tableView;
        ObservableList<Trade> data = FXCollections.observableArrayList(new Trade("1"));

    @Override
    public void initialize(URL arg0, ResourceBundle arg1) {
        tableView.setItems (data);
    }
} 
```

FXMLTableView.java //Java主类

```
 package fxmltableview;

    import javafx.application.Application;
    import javafx.fxml.FXMLLoader;
    import javafx.scene.Scene;
    import javafx.stage.Stage;

    public class FXMLTableView extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {
        primaryStage.setTitle("FXML TableView Example");
        primaryStage.setScene((Scene)FXMLLoader.load(getClass().getResource("fxml_tableview.fxml")));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

Trade.java //表格的数据模型

```
 package fxmltableview;

    import javafx.beans.property.SimpleStringProperty;

    public class Trade {

    private SimpleStringProperty tradeId = new SimpleStringProperty("");

    public Trade(String tradeId) {
        setTradeId(tradeId);
    }

    public String getTradeId() {
        return tradeId.get();
    }

    public void setTradeId(String a) {
        tradeId.set(a);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:42:34.600

快速猜测是您忘记设置表格列的单元格值工厂。

```
@FXML private TableColumn<Trade, String> tradeId; 
```

然后在初始化：

```
tradeId.setCellValueFactory(new PropertyValueFactory<Trade, String>("tradeId")); 
```

# javascript - ZURB Foundation，以编程方式切换选项卡

> ID：13722893
> 
> 赞同：10
> 
> 时间：2012-12-05T12:06:08.970
> 
> 标签：javascript, asp-classic, zurb-foundation

我使用带有基础的 asp，有没有使用 JS 或 ASP 在一个选项卡之间切换到另一个选项卡？

[链接](http://foundation.zurb.com/docs/tabs.php)（简单选项卡）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T05:43:01.307

一种可能的解决方案是为选项卡链接分配一个 id 并使用 jQuery 单击它。

鉴于以下代码摘录，请注意分配给锚链接的 id...

```
<dd><a href="#simple2" id="tabId">Simple Tab 2</a></dd> 
```

您可以使用这行 jQuery 激活此链接。

```
$("#tabId").click(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-01T11:04:19.897

如果您在 HTML 中默认提供第一个选项卡和第一个 LI .active，

```
<div id="#TheTabs" class="twelve columns">

    <dl class="nice contained tabs">
        <dd><a href="#FirstTab" class="active">First Tab</a></dd>
        <dd><a href="#SecondTab">Second Tab</a></dd>
    </dl>

    <ul class="nice contained tabs-content">
        <li id="FirstTabLI" class="active">
            <div class="row">
                <div class="twelve columns">
                </div>
            </div>
        </li>
        <li id="SecondTabLI">
            <div class="row">
                <div class="twelve columns">
                </div>
            </div>
        </li>
    </ul>

</div> 
```

然后你可以在javascript中更改标签，

```
if ( activeTab == 2 ) {

    // Clear tab 1
    $('#TheTabs dl dd a[href="#FirstTab"]').removeClass("active");
    $('#FirstTabLI').removeClass("active");

    // Select tab 2
    $('#TheTabs dl dd a[href="#SecondTab"]').addClass("active");
    $('#SecondTabLI').addClass("active");

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T10:49:43.110

您可以在不向每个列表项添加 ID 并将哈希值保存在 URL 位置的情况下执行此操作。

假设您有以下代码：

```
 <div id="my-menu" class="menu">
    <ul class="vertical tabs">
      <li class="active"><a href="#overview">Overview</a></li>
      <li><a href="#feedback">Feedback</a></li>
    </ul>
  </div> 
```

然后您可以在页面的任何位置执行此操作：

```
<a href="#feedback" onclick="$('#my-menu a[href=\'#feedback\']').click()">Feedback</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T20:48:26.730

`active`在 3.0 版中，您可以在选项卡上设置一个类`dl.tabs dd`并`ul.tabs-content li`切换它们。您可以在代码或 JavaScript 中执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T09:04:43.160

尝试这个：

```
$('#yourTabsContainer').on('click', '.yourNextButton', function(event) {
       event.preventDefault();
       $('.active').removeClass('active').next().addClass('active');
}); 
```

和上一个按钮（如果需要）

```
$('#yourTabsContainer').on('click', '.yourPreviousButton', function(event) {
       event.preventDefault();
       $('.active').removeClass('active').prev().addClass('active');
}); 
```

它对我有用...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-12T18:46:39.597

在基础 v5 中，您可以使用 toggle_active_tab 功能：

```
var $secondTab = $('ul.tabs > li:nth-child(2)');

Foundation.libs.tab.toggle_active_tab($secondTab, 'optional_location_hash')
```

# windows-phone - 从 WP 上的 Image 读取 Exif 数据

> ID：13722898
> 
> 赞同：1
> 
> 时间：2012-12-05T12:06:25.553
> 
> 标签：windows-phone, windows-phone-8

如何从 Image 中读取 Exif 数据。有 ExifLib，但 Lumia 设备和数据采集字段有问题。有没有其他方法可以在 Windows Phone (7./8) 上读取 Exif 数据。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:15:00.003

我使用本文[http://igrali.com/2011/11/01/reading-and-displaying-exif-photo-data-on-windows-phone/](http://igrali.com/2011/11/01/reading-and-displaying-exif-photo-data-on-windows-phone/)中的 ExifLib在 Lumia 800 和 710 上没有任何问题。试试看. 如果您想获取照片的位置，请确保您已在设置中启用将 gps 信息添加到照片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:32:50.917

您应该为此使用 ExifLib。不幸的是，它需要更多的工作，因为它不是 100% 适应 WP。

1) 下载[ExifLib ZIP 文件](http://JustinAngel.net/Storage/ExifLib.zip)，解压缩，解除对 DLL 的阻止（右键单击 --> 属性 --> 解除阻止）并从您的项目中添加对它的引用。同时，我在我的服务器上托管了 ZIP @ [http://JustinAngel.net/Storage/ExifLib.zip](http://JustinAngel.net/Storage/ExifLib.zip)

2) 接下来，您必须创建一个可从 windows phone 使用的入口函数。这是我使用的一个：

```
public class ExifReaderEx : ExifReader
{
    protected ExifReaderEx(Stream stream)
        : base(stream)
    {
    }

    public static JpegInfo ReadJpeg(Picture picture)
    {
        Stream FileStream = null;
        try
        {
            FileStream = picture.GetImage();
        }
        catch
        {
            return null;
        }

        DateTime now = DateTime.Now;
        ExifReaderEx reader = new ExifReaderEx(FileStream);
        reader.info.FileSize = (int)FileStream.Length;
        reader.info.FileName = string.Format("{0}.jpg", "fileName");
        reader.info.LoadTime = (TimeSpan)(DateTime.Now - now);
        return reader.info;
    }
} 
```

3) 通过调用来调用代码`ExifReaderEx.ReadJpeg(myPicture)`。例如，以下代码片段将返回包含所有元数据的 Exif 项目列表：

```
 var items = 
                new MediaLibrary().Pictures
                    .Select(picture => ExifReaderEx.ReadJpeg(picture))
                    .Where(exif => exif != null)
                    .ToList(); 
```

# c# - 在 Control.Invoke() 之后无法获得异常回调

> ID：13722901
> 
> 赞同：0
> 
> 时间：2012-12-05T12:06:33.687
> 
> 标签：c#, .net, multithreading, exception-handling

我有 2 个线程。具有 UserControl 的 Thread-1 和具有委托方法的 Thread-2。在线程 2 中，

i) 我需要在 Thread-1 上调用委托。

ii) 根据是否发生任何异常，执行一些额外的逻辑

这就是我正在做的事情。在 Thread-1 中，在控件创建之前，我已经注册了一个回调

```
Application.ThreadException += MyUIExceptionHandler(); 
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException); 
```

**问题 1：** 现在，在 Thread-2 中，当我调用时， 我确实会在发生异常时`thread1Control.BeginInvoke(myDelegateMethod, args)`得到回调，但由于是异步的，我不知道在执行上述步骤 ii) 之前要等待多长时间。一个简单的调用后为我完成了这项工作，它应该以我知道的方式完成。但是我实现这一目标的其他选择是什么？ *PS：我无法从 UserControl 端做任何通知，因为我无法控制该代码！*`MyUIExceptionHandler()``Control.BeginInvoke``Thread.Sleep(5000)``BeginInvoke()`

 ***问题 2：** 如果我使用`thread1Control.Invoke(myDelegateMethod, args)`which is a synchronous call 似乎完全符合要求，但是当出现异常时，我不会回调到`MyUIExceptionHandler()`. 为什么在这种情况下我没有收到回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:43:14.057

Control.BeginInvoke() 是一种即发即弃的方法。由于您的线程已经转移到其他地方，甚至可能不再运行，因此目标引发的任何异常都会在 UI 线程上引发。

Control.Invoke() 是一种触发并等待直到完成的方法。您的工作线程被阻塞，直到目标完成执行。由于您仅在对结果感兴趣时才使用该方法，因此目标引发的任何异常都会在您的工作线程上重新引发。如果你想保持程序运行，你必须抓住它。*

# spring - Spring + Hibernate, how to close a StatelessSession?

> ID：13722910
> 
> 赞同：2
> 
> 时间：2012-12-05T12:07:00.170
> 
> 标签：spring, hibernate, stateless-session

Normally, we use Spring + Atomikos to manage the JTA sessions and set hibernate.auto_close_session to true. Now, if we manually open a stateless session (for some async job) as:

`StatelessSession sl = sessionFactory.openStatelessSession();`

How do we close the StatelessSession? If we call

`sl.close()`

then the "currentSession" will rollback. If we annotate

`@Transactional(propagation = Propagation.NOT_SUPPORTED)`

on the method that use the StatelessSession, the commit hangs, the Atomikos log shows that it keep spawning new transactions and never stops.

Full code:

```
 public Vendor findByCode(String code) {

            StatelessSession slsession = null;
            Transaction tx = null;
            try {
                    slsession = getStatelessSession();
                    tx = slsession.beginTransaction();
                    return (Vendor) slsession.createQuery("from Vendor"
                                    + " where code = :code")
                                    .setParameter("code", code)
                                    .uniqueResult();
            } catch (HibernateException e) {
                    e.printStackTrace();
                    return null;
            } finally {
                    if (slsession != null && tx != null) {
                            tx.commit();
                            slsession.close();
                    }
            }
    } 
```

There is already a Spring managed session, and this method was called.

Could you suggest what is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T23:43:37.440

非常古老的未回答问题，但这里可能是一个答案：您必须回滚您的事务，但您无需关闭会话。除非你真的想。

有一些工具可以防止你在代码中使用它，但它更像是这样的：

```
 tx.commit();
    } catch (HibernateException e) {
        tx.rollback();
        logger.error(e);
    } 
```

# jquery - Mobile Client browser aborting an ajax call after certain timeout

> ID：13722917
> 
> 赞同：3
> 
> 时间：2012-12-05T12:07:34.340
> 
> 标签：jquery, cordova, jquery-mobile

I've been working on an Android mobile application which is a cross platform browser based application developed using HTML5, javascript, jQuery and PhoenGap.

Application being a client-server based, we make frequent asynchronous web service calls to fetch data from the server. In this scenario, we are facing problem while fetching data which involves huge amount of data. Here, in this case there are so many database queries that will run at the background to get the data.

We are testing the application using a 2G connection which is resulting in a status 0 error message after few mins.

My question here is, will there be an option for the mobile browser to abort a web service call after few mins before receiving the response?

We are making an ajax call to fetch the data. Sample code for your reference. We have tested with various timeout options but there is no positive result. The same is working fine on a 3G network.

```
$.ajax({
            type: "POST",
            url: wsUrl,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest,
            async: true,
            timeout:300000,
            tryCount:0,
            retryLimit:3,
            success: processSuccess,
            error: processError
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:15:20.017

是的，您可以在 ajax 调用中使用超时。例如，这是：

```
 $.ajax({
            url: syncURL,
            data: {},
            dataType:"jsonp",
            timeout: 10000,
            jsonpCallback: 'jsonpxchange',
            success:function (data) {
                console.log("OK!!");
            },
            error: function(jqXHR, exception) {
                if (jqXHR.status === 0) {
                    alert('No network');
                } else if (jqXHR.status == 404) {
                    alert('Not fount [Error: 400].');
                } else if (jqXHR.status == 500) {
                    alert('[Error: 500].');
                }
                if (exception === 'parsererror') {
                    alert('parser error');
                } else if (exception === 'timeout') {
                    alert('timeout');
                } else if (exception === 'abort') {
                    alert('abort');
                } else {
                    alert('Undefined');
                }
        }
        }); 
```

如您所见，我使用`timeout`（以毫秒为单位），例如`10secs`. 然后开枪`exception===timeout`

# css - 为什么移动浏览器在放大输入字段时会忽略我的媒体查询？

> ID：13722924
> 
> 赞同：1
> 
> 时间：2012-12-05T12:07:56.100
> 
> 标签：css, mobile, zooming, textfield, viewport

我正在将我们所做的网站转换为移动网站。到目前为止，一切都很好，在阅读了一些关于像素密度和所有元标记的信息之后，我已经建立了一个非常漂亮的网站，该网站在移动屏幕周围设计得非常好，但到目前为止我只有一个问题。

无论我尝试什么，浏览器在获得焦点时都会放大到文本字段。这通常不是问题，但是当它发生时，它似乎忽略了我的媒体查询 css 。我插入了我的 Galaxy s3我的桌面 chrome 来调试页面，我可以看到在放大文本框时显示页脚（在我的媒体查询中不显示）。（当然还有其他 css 更改伴随着忽略我的媒体查询）。

所以我正在寻找一种方法来删除缩放功能（在这里阅读很多关于它的文章，没有一个适用于移动 chrome 和股票 Galaxy s3 浏览器，还不知道 iphone 或 windows），或者让我的样式表工作放大时。甚至更好的是，放大时可以添加其他样式，这样我就可以删除除文本字段之外的所有内容！

我当前的视口设置是：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:15:41.837

我刚刚解决了。我的媒体查询包括“and (orientation:portrait)”，因此要考虑纵向方向，但没有为土地空间指定相同或其他样式。因此，当由于文本字段获得焦点而出现键盘时，它本质上会从视口中删除可用空间，使其成为陆地空间，让页面回到桌面 css。所以，如果你有同样的问题，看看你的代码！:)

# mysql - foreign key constraint error 1005

> ID：13722925
> 
> 赞同：2
> 
> 时间：2012-12-05T12:07:57.130
> 
> 标签：mysql, database

I have following 2 tables in my database:

```
CREATE TABLE `address` (
  `id` bigint(20) NOT NULL auto_increment,
  `entity_creation_timestamp` datetime default NULL,
  `entity_version` bigint(20) default NULL,
  `city` varchar(255) default NULL,
  `country` varchar(255) NOT NULL,
  `county` varchar(255) default NULL,
  `label` varchar(255) default NULL,
  `line1` varchar(255) default NULL,
  `line2` varchar(255) default NULL,
  `line3` varchar(255) default NULL,
  `state` varchar(255) NOT NULL,
  `zip` varchar(255) NOT NULL,
  `zip_extension` varchar(255) default NULL,
  `party_id` bigint(20) default NULL,
  `list_index` int(11) default NULL,
  `last_updated_timestamp` datetime default NULL,
  PRIMARY KEY  (`id`),
  KEY `fk_party_postaladdress_id` (`party_id`),
  CONSTRAINT `fk_party_postaladdress_id` FOREIGN KEY (`party_id`) REFERENCES `sims_party` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

the other one :

```
CREATE TABLE `state` (
  `state` varchar(255) NOT NULL,
  `name` varchar(255) default NULL,
  PRIMARY KEY  (`state`),
  KEY `pk_state` (`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

I am trying to apply a foreign key constraint on 'state' column in 'address' table to 'name' column in the 'state' table..

the command i am using for the same is :

```
ALTER TABLE address
  ADD CONSTRAINT FK_address_state FOREIGN KEY (state)
    REFERENCES state(state) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

But each time I run this command, I get the following error:

```
ERROR 1005 (HY000): Can't create table 'db.#sql-75c_da' (errno: 150) 
```

Any idea where its going wrong...???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:44:29.030

如果 MySQL 从 CREATE TABLE 语句中报告错误号 1005，并且错误消息引用错误 150，则表创建失败，因为未正确形成外键约束。类似地，如果 ALTER TABLE 失败并且它引用错误 150，这意味着为更改的表将错误地形成外键定义。要显示服务器中最近的 InnoDB 外键错误的详细说明，请发出`SHOW ENGINE INNODB STATUS`

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# html - 李没有身高

> ID：13722931
> 
> 赞同：0
> 
> 时间：2012-12-05T12:08:14.833
> 
> 标签：html, css

为什么首先`li`没有高度？我需要为每个设置背景颜色`li`：

```
 <section>
        <header>
            <h1>Title...</h1>
        </header>
        <ul style="list-style-type:none;padding:0; margin:0;width:100%">
            <li>
                <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
                    <li><label for="">Long descriptionaaaaaaaaaaaaaaaaaaa</label></li>
                    <li><label for="">Short decriptiona</label></li>
                </ul>
                <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
                    <li><input type="text"></li>
                </ul>
                <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
                    <li style="display:inline"><label for="">left</label></li>
                    <li style="display:inline"><label for="">right</label></li>
                </ul>
                <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
                    <li><input type="text"></li>
                </ul>
                <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
                    <li><input type="checkbox"></li>
                </ul>
            </li>

            <br style="clear:both;" />
           <li>
           </li>
            <br style="clear:both;" />
            <li>
            </li>
        </ul>
        <footer>
            <label>footer content...</label>
        </footer>
    </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:12:17.423

因为 li 的所有内容都具有 float 属性。您需要明确设置 li 高度或清除浮动：

```
<li>
    <ul style="list-style-type:none;padding:0; margin:0;width:20%;float:left">
        <li><label for="">Long descriptionaaaaaaaaaaaaaaaaaaa</label></li>
        <li><label for="">Short decriptiona</label></li>
    </ul>
    <!-- ... -->
    <div style="clear:both;"></div>
</li> 
```

或者，您可以尝试 display: inline-block 而不是 float 在内部 uls 上。

# android - 在 Android 上，是否可以使用意图中指定的自定义标记图像向 Google 地图应用程序发送意图？

> ID：13722932
> 
> 赞同：0
> 
> 时间：2012-12-05T12:08:15.630
> 
> 标签：android, google-maps, android-intent, google-maps-markers

默认的 Google 地图标记是红色大头针。是否可以通过意图将默认​​标记图像替换为自定义图像？

编辑：这是在发送 geouri 意图以启动外部地图应用程序时。在使用 MapActivity 子类的应用程序中执行此操作时不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:53:01.463

您可以发送一个带有数组中图像位置的整数：

```
Intent i = new Intent (yourClass.this, MapActivity.class)
i.putExtra("pinPosition",2);
startActivity(i); 
```

在您的地图活动中：

```
 public class MyMapActivity extends MapActivity {
    private int drawables[] = { R.drawable.pin1, R.drawable.pin2, R.drawable.tutorial_pin3 };
    int position;

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            if (getIntent().getSerializableExtra("pinPosition")!=null) {
        position = getIntent().getSerializableExtra("pinPosition");
            }

            setContentView(R.layout.publish_map_activity);
            map = (MapView) findViewById(R.id.mapview);
            ImageView pin = (ImageView) findViewById(R.id.drag);
            pin.setImageResource(drawables[position]);
    ....

    }

    } 
```

如果你使用类似的谷歌代码，你的 xml 应该是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="@string/googlemaps_key"
        android:clickable="true" />

    <ImageView
        android:id="@+id/drag"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/contentDescription"
        android:src="@drawable/mapitempng"
        android:visibility="gone" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:39:39.127

是的。我只是希望我能正确地回答你的问题：你可以通过 Overlay Items 来做到这一点。只需查看Google 本身的**[这个](https://developers.google.com/maps/documentation/android/v1/hello-mapview)**示例：您可以通过指定可绘制对象来自定义任何标记。

# x86 - 返回堆栈缓冲区？

> ID：13722935
> 
> 赞同：10
> 
> 时间：2012-12-05T12:08:28.847
> 
> 标签：x86, cpu, cpu-architecture, branch-prediction, micro-architecture

据我了解，返回堆栈缓冲区仅支持 4 到 16 个条目（来自 wiki：[http](http://en.wikipedia.org/wiki/Branch_predictor#Prediction_of_function_returns) ://en.wikipedia.org/wiki/Branch_predictor#Prediction_of_function_returns ）并且不是键值对（基于 ret 指令的位置索引）。这是真的吗？当上下文切换发生时 RSB 会发生什么？

假设我们在返回堆栈缓冲区长度为 16 的 CPU 中处理了 50 个未返回的函数，之后会发生什么？这是否意味着所有预测都失败了？你能举例说明吗？这种情况在递归函数调用中是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-06T12:01:13.087

BPU 可以包含自己的 RAS 预测器，当它预测 BTB 中的调用类型时，它将假定的调用 NLIP（以下指令的 IP）推送到 RAS 堆栈。它在 BTB 中预测的下一次返回将使用 RAS 的顶部作为预测地址（就像当它预测常规间接分支时，ITA 中的并行命中将超过 BTB 中的目标地址）。

BAC 将在解码时通过将每个调用指令的 NLIP 推送到其自己的 RSB 来验证/覆盖这些返回目标预测，下一个返回地址的预测将与该地址进行比较。如果不正确，BAC 将发出 BAclear 并在管道开始处将下一个 IP 逻辑重新引导到正确的返回地址（如果 RSB 损坏，这可能会被证明是错误的）。它可能会用 BAC RSB 状态覆盖 RAS 预测器堆栈。

在一种实现方式中，BAC 向 TOS 指针提供它验证的每个分支预测，以及落入地址。一旦执行了分支并且知道了实际结果，如果发生错误预测，则恢复 RSB TOS。我认为更有效的是在退休时拥有一个架构 RSB，它在管道刷新/错误预测时被复制到 BAC RSB 和 RAS 预测器中。这可以防止恢复到损坏的 RSB。

RAS 预测器可能是一个循环堆栈，它可能有也可能没有上溢和下溢检查和保证，具体取决于实现。当堆栈已满时，新的预测可能会覆盖最旧的预测，以便它始终是最新的（而不是阻止它在已满时添加，这意味着保留一个计数器来确定有多少调用/返回它无法进行预测为了）。至于下溢，它可能拒绝进行预测，而是使用 ITA 进行预测。如果 RSB 下溢，它可能不会覆盖 RAS 预测器所做的预测。

上下文切换的硬件中断会导致在执行宏操作的最终微指令时清除流水线。RSB 很可能恢复到架构状态以在中断后继续。预测器 RAS / BAC RSB 很可能在微码中被刷新，如果它被损坏，它最终会自行恢复。

# algorithm - Scala 堆大小异常中的 Euler 23

> ID：13722939
> 
> 赞同：3
> 
> 时间：2012-12-05T12:08:39.983
> 
> 标签：algorithm, scala, stream

我想在 Scala中解决[这个问题。](http://projecteuler.net/problem=23)我的代码：

```
def dividers(n: Int) =
  (1 until n) filter (x => n%x == 0)

def sumOfDividers(n: Int) = dividers(n).sum

val abNumbers = (1 to 28123) filter (x => sumOfDividers(x) > x) 
```

我的解决方案的下一步是制作一些序列，其中包含序列中所有可能的丰富数字`abNumbers`。我尝试使用增强的 for 循环来做到这一点，但它在运行时抛出 Java Heap Exception。如何将所有这些总和放入 Stream 结构中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:27:33.670

对范围使用 toStream 方法：

```
val abNumbers = ((1 to 28123) toStream).filter (x => sumOfDividers(x) > x)

abNumbers: scala.collection.immutable.Stream[Int] = Stream(12, ?) 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:33:51.297

流很好地与*无限序列*一起工作。但是，在这里您知道自己的界限；您只想避免所有可能作为函数式编程的副产品出现的中间集合。*（旁注：即使在适度的硬件上，欧拉 23 也应该可以在挥霍的蛮力中使用；只是你的堆可能太小了吗？）*

如果您主要关心的是内存，请考虑使用*views*。与 Streams 一样，Scala 中的视图是惰性的。但语义不同。考虑一下：

```
(1 to 100000) map (_+1) filter (x => x % 2 == 0) map (x => x*x) 
```

这里的意图是函数组合，但这会在途中创建几个中间集合：每个`map`和`filter`将返回一个新的、可能大小相当的集合。**视图**是获得性能（通过内存效率）和组合性的一种解决方案：您只需将“开始”集合创建为视图：

```
(1 to 100000 view) map (_+1) filter (x => x % 2 == 0) map (x => x*x) 
```

这将很快返回 a`SeqView`而不是通常的`Seq`- 当视图实际上是强制的时，你的转换（in`map`和`filter`）实际上是作为一个而不是在不同的中间集合上完成的。将它们视为类似于 SQL 中表的视图。根据您计划如何解决欧拉问题 23，视图可能会有所帮助。它们只是在 Scala 中利用惰性的一种方式 - 请参阅这篇文章了解视图、流和迭代器之间的区别：[Stream vs Views vs Iterators](https://stackoverflow.com/questions/5159000/stream-vs-views-vs-iterators)

# c++ - 在修复模板参数的同时扩展模板类

> ID：13722941
> 
> 赞同：1
> 
> 时间：2012-12-05T12:08:41.030
> 
> 标签：c++, oop, templates, inheritance

我已经定义了一个类

```
template <class T> class NodeMap {

NodeMap(int n, T defaultEntry = NULL);

virtual ~NodeMap();

T& operator[](const node& u);

...

} 
```

它将一个类型的对象映射`node`到一个参数类型的对象`T`。

现在我想要一个类`Matching`，它本质上是一个`NodeMap<node>`. 为方便起见，我想添加`isProperMatching(Graph& G)`和之类的方法`match(node u, node v)`。可以`Matching`继承自`NodeMap<node>`？是否可以（如果可以，这是一个好主意）扩展具有固定模板参数的模板类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:20:25.103

就您显示的代码而言，您有以下可能性告诉我您在做什么：

1.  专门`Nodemap`用于`T=node`, 以包含您想要的其他方法。为方便起见，您可以随后 typedef`Nodemap<node>`到`Matching`. 但是，这可能会添加您在非专业模板中的方法的一些代码重复。
2.  `Nodemap<node>`按照您的建议派生。这是一种有效的方法，如果您`Nodemap`以一种使其成为适当的基类的方式进行设计。虚拟析构函数建议您已经这样做了，尽管可能根本不需要将方法设为虚拟。
3.  如果可能，将附加功能作为免费功能提供，因此无需派生或专门化`Nodemap<node>`

`NodeMapBase`我会考虑前两种的混合方法：制作一个包含`NodeMap`s 和的通用功能的基类模板（我称之为） `Matching`，然后`NodeMap`从相应的基类模板派生模板（可能不添加太多功能）和源自. `Matching`_ `NodeMapBase<node>`如果您查看 MSVC 的标准库实现，您会看到很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:15:22.950

是的，它很常用。

```
class Matching : public NodeMap<node> {
    ...
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T12:22:30.593

这取决于界面的`Matching`外观。如果你想提供完全相同的方法加上一些方便的方法，你可以继承它

```
class Matching : public NodeMap<node> {...}; 
```

但是如果`Matching`is not a `NodeMap<node>`, ie 提供不同的接口，你应该只使用它作为一个聚合

```
class Matching {
private:
    NodeMap<node> matchingNodes;
public:
    // public interface of Matching
    bool isProperMatching(Graph& G);
    bool match(node u, node v);
    ...
}; 
```

顺便说一句，此建议与`NodeMap`是否为模板无关。

# wpf - WPF 画布和放置项目

> ID：13722942
> 
> 赞同：2
> 
> 时间：2012-12-05T12:08:43.993
> 
> 标签：wpf, canvas

我想要一个可以均匀拉伸的图像作为背景。然后我希望我的画布的大小等于均匀拉伸的图像。（我发现的一种解决方法是将图像和画布放在网格内，并将画布宽度/高度绑定到图像的实际高度/宽度）。

然后我想在画布内放置绝对定位的项目。但这是问题所在。如果项目 X 为 50 且图像宽度为 200 像素，则可以。但如果图像宽度为 100 像素，项目 X 应该是 25。我也想要一个小比例的变换。有没有办法通过绑定来实现这一点？我是否必须实现我的自定义面板用户控件，因为我看不到其他干净的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:47:56.113

您当然可以通过绑定来实现这一切，但我想创建一个派生面板会更容易和更清晰，该面板将子项安排在相对于面板的实际宽度和实际高度的位置。

派生的 Panel 类可以定义子位置的附加属性，类似于 Canvas.Left 和 Canvas.Top，但小数值范围为 0 到 1。

它还可以将背景图像维护为依赖属性。您将覆盖[OnRender](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.onrender.aspx)方法以直接绘制此图像。

面板还可以通过将其实际宽度除以图像宽度来计算当前比例因子。适当的[ScaleTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)属性可以很容易地附加到每个孩子的 RenderTransform。

编辑：除了面板尺寸相对于背景图像的一致性之外，以下内容可能会让您了解如何实现该面板：

```
public class ImagePanel : Panel
{
    public static readonly DependencyProperty LeftProperty = DependencyProperty.RegisterAttached(
        "Left", typeof(double), typeof(ImagePanel),
        new FrameworkPropertyMetadata(PositionChanged));

    public static readonly DependencyProperty TopProperty = DependencyProperty.RegisterAttached(
        "Top", typeof(double), typeof(ImagePanel),
        new FrameworkPropertyMetadata(PositionChanged));

    public static readonly DependencyProperty ImageProperty = DependencyProperty.Register(
        "Image", typeof(ImageSource), typeof(ImagePanel),
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender));

    private ScaleTransform scaleTransform = new ScaleTransform();

    public static double GetLeft(DependencyObject obj)
    {
        return (double)obj.GetValue(LeftProperty);
    }

    public static void SetLeft(DependencyObject obj, double value)
    {
        obj.SetValue(LeftProperty, value);
    }

    public static double GetTop(DependencyObject obj)
    {
        return (double)obj.GetValue(TopProperty);
    }

    public static void SetTop(DependencyObject obj, double value)
    {
        obj.SetValue(TopProperty, value);
    }

    public ImageSource Image
    {
        get { return (ImageSource)GetValue(ImageProperty); }
        set { SetValue(ImageProperty, value); }
    }

    protected override void OnRender(DrawingContext dc)
    {
        if (Image != null)
        {
            dc.DrawImage(Image, new Rect(0d, 0d, ActualWidth, ActualHeight));
        }

        base.OnRender(dc);
    }

    protected override void OnRenderSizeChanged(SizeChangedInfo sizeInfo)
    {
        base.OnRenderSizeChanged(sizeInfo);

        if (Image != null)
        {
            scaleTransform.ScaleX = sizeInfo.NewSize.Width / Image.Width;
            scaleTransform.ScaleY = sizeInfo.NewSize.Height / Image.Height;
        }
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        foreach (UIElement element in InternalChildren)
        {
            element.Measure(availableSize);
        }

        return new Size();
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        foreach (UIElement element in InternalChildren)
        {
            element.RenderTransform = scaleTransform;
            ArrangeElement(element, finalSize.Width, finalSize.Height);
        }

        return finalSize;
    }

    private static void PositionChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var element = obj as UIElement;
        var panel = VisualTreeHelper.GetParent(obj) as ImagePanel;

        if (element != null && panel != null)
        {
            ArrangeElement(element, panel.ActualWidth, panel.ActualHeight);
        }
    }

    private static void ArrangeElement(UIElement element, double width, double height)
    {
        var left = GetLeft(element);
        var top = GetLeft(element);
        var rect = new Rect(new Point(left * width, top * height), element.DesiredSize);

        element.Arrange(rect);
    }
} 
```

# javascript - 使用ajax jquery设置原型属性

> ID：13722944
> 
> 赞同：1
> 
> 时间：2012-12-05T12:08:44.193
> 
> 标签：javascript, jquery

我在使用 ajax 的 setter 中使用 Class 时遇到问题。这是条件。

```
var MyClass = Class.create();
MyClass.prototype = {
    myAttr:0,
    setMyAttr: function(){
        jQuery.ajax({
            url:'data.php',
            success:function(data) {
                //set myAttr here
            }
        });
    }
} 
```

我想在`myAttr`里面设置成功函数，怎么做呢？谢谢。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:11:27.127

你还没有说什么`Class.create`是（JavaScript 本身没有），但我认为这对这个问题并不重要。

我假设您要设置**实例**，而不是原型（但如果我错了，请参见下文）`myAttr`。最简单的方法是利用您的回调已经是调用上下文的闭包这一事实，因此您将变量设置为（因为在回调中会有所不同）并使用它：**`success``setMyAttr``this``this``success`**

 **```
var MyClass = Class.create();
MyClass.prototype = {
    myAttr:0,
    setMyAttr: function(){
        var self = this;            // <== Set the variable
        jQuery.ajax({
            url:'data.php',
            success:function(data) {
                self.myAttr = data; // <== Use it
            }
        });
    }
}; 
```

更多关于闭包：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

但是，如果我错了，而您确实想更新原型：

```
var MyClass = Class.create();
MyClass.prototype = {
    myAttr:0,
    setMyAttr: function(){
        jQuery.ajax({
            url:'data.php',
            success:function(data) {
                MyClass.prototype.myAttr = data;
            }
        });
    }
}; 
```

*（注意`;`原型分配的末尾。我强烈主张不要依赖自动分号插入的恐怖。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:12:05.540

您可以执行以下操作：

```
 success:function(data) {
            //set myAttr here
            MyClass.prototype.myAttr = data;
        } 
```**

# java - 将 InputStream 对象附加到 String 对象

> ID：13722945
> 
> 赞同：9
> 
> 时间：2012-12-05T12:08:47.253
> 
> 标签：java

> **可能重复：**
> [将 InputStream 读取/转换为字符串](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)

我正在尝试将 InputStream 对象中的数据附加到字符串中，如下所示：

```
byte[] buffer = new byte[8192];
InputStream stdout;
String s = "";      
while(IsMoreInputDataAvailable()) {
    int length = this.stdout.read(buffer);
    s += new String(this.buffer, 0, length, "ASCII"); 
```

有没有更简单的方法可以在不使用 Apache 或此类库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:11:35.077

从 an 读取字符数据的常用方法`InputStream`是将其包装在[`Reader`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html). InputStreams 用于二进制数据，Readers 用于字符数据。`Reader`从 an 中读取的适当`InputStream`名称是[`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)：

```
Reader r = new InputStreamReader(stdout, "ASCII");
char buf = new char[4096];
int length;
StringBuilder s = new StringBuilder();
while ((length = r.read(buf)) != -1) {
    s.append(buf, 0, length);
}
String str = s.toString(); 
```

请注意，`String`在循环内重复附加 a 通常是一个坏主意（因为每次您都需要复制整个字符串），所以我在`StringBuilder`这里使用 a 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:14:53.180

这是几个方法[的链接](http://javarevisited.blogspot.ro/2012/08/convert-inputstream-to-string-java-example-tutorial.html)（有和没有外部库）。一种方法（从上面的链接中提取）是使用 Java Scanner（从 Java 5 开始）：

```
public class InputStreamTest {

    public static void main(String args[]) throws FileNotFoundException {
        FileInputStream fis = new FileInputStream("c:/sample.txt");
        String inputStreamString = new Scanner(fis,"UTF-8").useDelimiter("\\A").next();
        System.out.println(inputStreamString);
    }
} 
```

# c# - 布尔列在 datagrdiview 中显示为是/否

> ID：13722949
> 
> 赞同：0
> 
> 时间：2012-12-05T12:09:03.837
> 
> 标签：c#, winforms, datagridview

> **可能重复：**
> [绑定的 DataGridView 可以将文本单元格用于布尔值吗？](https://stackoverflow.com/questions/1033282/can-a-bound-datagridview-use-text-cell-for-boolean-values)

在 windows 中`DataGridView`，我确实绑定了对象数组列表。在这里，布尔属性在网格上显示为 CheckBox。

我想在 DataGridView 中显示“是”/“否”而不是 CheckBox 控件。

我尝试使用`CellFormatting`事件，它显示我的错误为

> 格式异常：，否/是不是一个有效的布尔值。

我无权访问数据库查询来处理这个问题。

我只需要在 DataGridView 中处理这个。（不在数据库端）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:16:41.807

您可以执行以下操作：

`dgv.AutoGenerateColumns = false;`

手动输入 datagridView 可以映射到的 dataProperty 名称并执行

```
dgv.DataSource = mysource.Select(m=> new{Col1 = m.Property1, 
                                         Col2 = m.property2, 
                                         Col3 = ((m.property3) ? "Yes":"No")})
                                         .ToList(); 
```

然后，您 DataGridView 上的 Col3 将需要是文本而不是复选框。

# c# - Orchard CMS - 为什么 IUpdateModel 不从 IDependency 继承？以及如何在控制器之外使用 IUpdateModel？

> ID：13722953
> 
> 赞同：0
> 
> 时间：2012-12-05T12:09:37.910
> 
> 标签：c#, dependency-injection, orchardcms

我已将站点设置添加为此处定义的一部分：http: [//msdn.microsoft.com/en-us/magazine/hh708754.aspx](http://msdn.microsoft.com/en-us/magazine/hh708754.aspx)。我还创建了管理 UI 屏幕来更新这些设置，以及使用它们的服务。

我现在需要做的是扩展命令行界面（http://docs.orchardproject.net/Documentation/Using-the-command-line-interface），以便可以在配方中定义这些设置。但是，我不知道如何将 IUpdateModel 注入到继承自 DefaultOrchardCommandHandler 的类中。

我是否需要在我的 AutoFacRegistraions 文件中为此接口添加注册？或者还有其他方法可以更新零件吗？

# python - 检查列表中的数字？

> ID：13722954
> 
> 赞同：0
> 
> 时间：2012-12-05T12:09:39.770
> 
> 标签：python

这是我在 python 3.2.3 IDLE 上的代码：我基本上是让用户输入一堆数字，然后将其转换为列表。之后，我想检查是否有任何小于 10 或大于 100 的数字。

```
n = input("(Enter a empty string to quit) Enter a number: ")
while n != "":
    numbers.append(int(n))
    n = input("(Enter a empty string to quit) Enter a number; ")

print ("The list is", numbers)

if numbers < 10:
    print ("your list has numbers less than 10.")
if numbers > 100:
    print ("your list has numbers more than 100") 
```

列表出来没问题，但是当我尝试检查是否有任何值小于 10 或大于 100 时，它有一个错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:11:19.803

使用[任何](http://docs.python.org/2/library/functions.html#any)：

```
if any(number < 10 for number in numbers):
    print ("your list has numbers less than 10.")
if any(number > 100 for number in numbers):
    print ("your list has numbers more than 100") 
```

此外，python 中也有一个[all](http://docs.python.org/2/library/functions.html#all)函数。

顺便说一句，您可以加入两条线：

```
if all(10 < number < 100 for number in numbers):
    #correct code goes here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T19:57:28.123

如果要检查列表中的元素，请执行

```
a = ["Hello world","Basic comments","Basic outputs"]
g = []
for i in a:
    g.extend(i)
print("Nice?")
#This is actually the way of transferring characters in a list to the other! 
```

# oracle11g - 在 Impromptu 7.5 中连接到 Oracle DB 的 OCI.DLL 错误

> ID：13722965
> 
> 赞同：0
> 
> 时间：2012-12-05T12:10:06.920
> 
> 标签：oracle11g, business-intelligence, cognos, impromptu

我正在尝试在 Impromptu 7.5 中连接到 Oracle 11 数据库，但出现以下错误。这是在尝试打开目录和选择“连接到数据库”选项时生成的：

> 错误号 -45：DMS-E-DBDLL_NOTFOUND，动态链接库 'OCI.DLL' 无法位于搜索路径中或其依赖的动态链接库之一未能加载

我在尝试连接到 Oracle 11g 数据库的 Windows 7 64 位机器上使用 Impromptu 7.5 版。我的机器上安装了 Oracle 11g 客户端，并在 Net8 Assistant 中为我的数据库配置了正确的服务名称。

我还检查了 C:\oracle\product\11.2.0\client_1\BIN 目录和 OCI.DLL 存在那里。这个目录也在我的 PATH 变量中被引用。

我可以使用 Aqua Data Studio v12 毫无问题地连接到数据库，但它似乎是 Impromptu 7.5 不喜欢它。

有什么想法吗？会不会只是兼容性问题？谢谢

# matlab - 在 Matlab 中替代 B = A ( : )

> ID：13722968
> 
> 赞同：-2
> 
> 时间：2012-12-05T12:10:20.920
> 
> 标签：matlab, vector, matrix

> **可能重复：**
> [如何在 MATLAB 中将矩阵的行连接成向量？](https://stackoverflow.com/questions/2724020/how-do-you-concatenate-the-rows-of-a-matrix-into-a-vector-in-matlab)

如何将 MxN 矩阵转换为列，即代替使用

```
B = A ( : ) 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:15:10.293

[你试过什么？](https://stackoverflow.com/questions/2724020/how-do-you-concatenate-the-rows-of-a-matrix-into-a-vector-in-matlab)

`B = reshape(A, [], 1);`

# mysql - 是否可以将视图的结果与 MySQL 中的查询结果连接起来？

> ID：13722972
> 
> 赞同：0
> 
> 时间：2012-12-05T12:10:30.077
> 
> 标签：mysql, sql, join

因此，感谢用户 bonCodigo[在](https://stackoverflow.com/questions/13671230/how-to-calculate-percentage-increase-from-previous-row-day-after-complex-group-b)他回答我的上一个问题中，我有了这个精彩的查询：

```
SELECT 
    ticker, 
    `Date` as date, 
    `Daily Open`, 
    `Daily High`,
    `Daily Low`,
    `Daily Close`,
    concat(round(pxpct*100,2),'%') `Percent change`

FROM 
    (select case when ticker <> @pxticker then @pxclose := null end, 
    p.*, 
    (`Daily Close`-@pxclose) as pxchange,
    (`Daily Close`-@pxclose)/@pxclose as pxpct, 
    (@pxclose := `Daily Close`),
    (@pxticker := ticker) from viewDailyOHLCPrices p
JOIN
    (select @pxclose := null, @pxticker := ticker from viewDailyOHLCPrices order by     ticker, date limit 1)  as a
    order by ticker, date ) as b
order by ticker, date asc 
```

它返回给我这样的结果：

```
TICKER  DATE        OPEN    HIGH    LOW     CLOSE   PXCHANGE  PXPCT
AAAE    11-26-2012  0.01    0.01    0.01    0.01    (null)    (null)
AAAE    11-27-2012  0.013   0.014   0.0083  0.014   0.004     40.0000%
AAAE    11-28-2012  0.014   0.0175  0.014   0.0165  0.0025    17.8571%
AAAE    11-29-2012  0.0175  0.0175  0.0137  0.0137  -0.0028   -16.9697%
AAMRQ   11-26-2012  0.4411  0.53    0.4411  0.529   (null)    (null)
AAMRQ   11-27-2012  0.51    0.511   0.461   0.495   -0.034    -6.4272%
AAMRQ   11-28-2012  0.482   0.49    0.43    0.464   -0.031    -6.2626%
AAMRQ   11-29-2012  0.4505  0.459   0.4411  0.459   -0.005    -1.0776%
AAMRQ   11-30-2012  0.45    0.457   0.4455  0.4568  -0.0022   -0.4793% 
```

现在我有一个视图，为了简单起见，我们称之为它，`myview`假设它有字段：`date, ticker, v1, v2`

有没有办法可以将 view1 的结果与上面的查询结果结合起来，所以我最终得到这样的结果？

```
DATE          TICKER    v1    v2    DATE        OPEN    HIGH    LOW     CLOSE   PXCHANGE  PXPCT
11-25-2012    AAAE      117   287   11-26-2012  0.01    0.01    0.01    0.01    (null)    (null)
11-26-2012    AAAE      339   159   11-27-2012  0.013   0.014   0.0083  0.014   0.004     40.0000%
11-27-2012    AAAE      219   937   11-28-2012  0.014   0.0175  0.014   0.0165  0.0025    17.8571%
11-28-2012    AAAE      821   403   11-29-2012  0.0175  0.0175  0.0137  0.0137  -0.0028   -16.9697%
11-25-2012    AAMRQ     263   721   11-26-2012  0.4411  0.53    0.4411  0.529   (null)    (null)
11-26-2012    AAMRQ     173   932   11-27-2012  0.51    0.511   0.461   0.495   -0.034    -6.4272%
11-27-2012    AAMRQ     218   364   11-28-2012  0.482   0.49    0.43    0.464   -0.031    -6.2626%
11-28-2012    AAMRQ     234   844   11-29-2012  0.4505  0.459   0.4411  0.459   -0.005    -1.0776%
11-29-2012    AAMRQ     821   472   11-30-2012  0.45    0.457   0.4455  0.4568  -0.0022   -0.4793% 
```

如您所见，我想通过和字段加入`myview`查询（如果是第二个日期列，**则为下一个交易日的日期）。**这很重要，因为从一个表中查询我每天都有数据，包括周六和周日，但是视图查询我只有开放交易日数据的表（通常是周一至周五......但周六和周日没有数据）星期天也不是平日假期）。所以第二个日期列必须是下一个交易日（视图中有数据的第二天）。`ticker``date`**`myview``viewDailyOHLCPrices``viewDailyOHLCPrices`**

 **因此，在我硬编码的示例结果中，在第一行中，我确实想要（星期日）的值`v1`& `v2`， ​​（星期一）的价格，以及（星期一）和（星期五）之间的价格变化......等等。`11-25-2012``open``high``low``close``11-26-2012``11-26-2012``11-23-2012`

我在开头发布的查询已经处理了从一天到有价格数据的前一天的百分比增加/减少（PXPT）（对于那个`ticker`）

（在这种情况下，第一行的 PXPCT 为“（空）”，只是因为我没有“2012 年 11 月 25 日”之前的数据）

我知道我可以加入 2 个或更多表，或者 2 个或更多视图，但我不确定你是否可以加入一个视图和一个查询（就像我的问题一样）。

我真的希望我没有让我的问题过于复杂或混乱。请不要犹豫，询问您可能需要的任何说明；-)

谢谢！，博加。**

# php - 输入字段内的多维数组

> ID：13722975
> 
> 赞同：2
> 
> 时间：2012-12-05T12:10:40.697
> 
> 标签：php

我的表单上有一个隐藏字段，我想在一个数组中整理和发布与价格相关的日期，以便我可以在另一个页面上使用它们。目前，我在下面定义了以下输入字段。

```
<input name="arrayDatesPrices[]" type="hidden" 
value="<?php echo PrintDateTime($recordsCourseWeeks->getField('Start_date'),"d/m/Y"); ?>"> 
```

当我在下一页上执行 print_r(arrayDatesPrices) 时，它会列出数组中的所有日期。这完全符合预期。我有另一个名为 $Price_per_week 的字段，我想将价格与日期相关联。因此，我尝试了以下方法。

```
<input name="arrayDatesPrices[]" type="hidden" 
value="<?php echo array(PrintDateTime    ($recordsCourseWeeks->getField('Start_date'),"d/m/Y"), array( $Price_per_week) ); ?>"> 
```

当我在后续页面上执行 print_r(arrayDatesPrices) 时 - 我得到一个空白数组。我的格式是否不正确，或者你可以做多维数组输入字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:20:11.097

您可以使用`json_*`或`serialize`finctions 来存储结构。
例如：

```
<input name="arrayDatesPrices[]" type="hidden" 
value="<?php echo json_encode(PrintDateTime($recordsCourseWeeks->getField('Start_date'),"d/m/Y")); ?>"> 
```

在 php 代码中你必须调用：

```
$val = json_decode($_REQUEST['arrayDatesPrices'][$i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:16:25.423

也许你可以把这两个值放在字段上用 ; 分隔符并在提交后与您的服务器代码一起爆炸？

或者以其他方式思考您的领域，例如：

```
<input name="arrayDatesPrices[0][start_date]" type="hidden" value="<?php  echo PrintDateTime($recordsCourseWeeks->getField('Start_date'),"d/m/Y"); ?>" />
<input name="arrayDatesPrices[0][price_per_week]" type="hidden" value="<?php  echo $Price_per_week ?>" /> 
```

并为每对值增加第一个参数

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T14:37:37.323

```
Try like this..

<input name="arrayDatesPrices[]" type="hidden" 
value="<?php echo PrintDateTime($recordsCourseWeeks->getField('Start_date'),
"d/m/Y").':'.$Price_per_week ; ?>"> 

After submit...
$i = 0;
foreach( $arrayDatesPrices as $arr )
{
 list($stat,$wk) = explode(':',$arr);
 $new_arr[$i]['start_date'] = $stat;
 $new_arr[$i++]['wek'] = $wk;
} 
```

# php - PHP SimpleXML 将两个元素添加到字符串中，如果它们不包含

> ID：13722981
> 
> 赞同：0
> 
> 时间：2012-12-05T12:11:04.967
> 
> 标签：php, foreach, simplexml

我正在尝试熟悉 PHP`SimpleXML`函数，希望能得到一些帮助。我正在获取呼叫中心接听电话的更新，并将当前日期的新接听电话添加到组合字符串中。我需要通过 cronjob 每 10 分钟运行一次，让组合字符串在一天中增长。

这是`XML`我正在使用的：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<received>
  <call>
    <countryCode>46</countryCode>
    <phoneNumber>4386541313</phoneNumber>
    <name>Unavailable</name>
    <time>2012-12-05T08:41:29.863Z</time>
  </call>
  ...
</received> 
```

我想做的是用循环提取所有元素`phoneNumber`并将它们作为字符串添加到组合的逗号分隔字符串中。`time``foreach`

字符串如下所示：

```
From the above xml example 4386541313-2012-12-05T08:41:29.863Z
Or phoneNumber-time 
```

逗号分隔的字符串如下所示：

```
4386541313-2012-12-05T08:41:29.863Z,1186111311-2012-12-03T08:11:21.561Z,... 
```

**但**我只想将字符串添加到当前日期的逗号分隔列表`IF`中。`timestamp`

这是我所拥有的，但并不多，我不确定这是否是做我想做的最好的方法：

```
$date_today = date('Y-m-d');
$combined_string = "4386541313-2012-12-05T08:41:29.863Z,1186111311-2012-12-03T08:11:21.561Z";

$received = simplexml_load_file('thexmlfile.xml');

foreach ($received->call->phoneNumber as $phoneNumber) { 
    foreach ($received->call->time as $time) {

        $new_call = $phoneNumber."-".$time;

        if(strpos($new_call,$date_today) !== false)
                    {
            $combined_string = $new_call.",".$combined_string;
        } 
    }
} 
```

以上返回一个没有错误的空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:19:17.217

可能想尝试类似的东西：

```
 ```
foreach ($received->call as $call) { 
    $new_call = $call->phoneNumber . "-" . $call->time;
    if(strpos($new_call,$date_today) !== false) {
        $combined_string = $new_call.",".$combined_string;
    } 
} 
``` 
```

# c# - 如何在 ASP.NET 中使用图像作为我的 html 邮件的背景

> ID：13722987
> 
> 赞同：1
> 
> 时间：2012-12-05T12:11:25.217
> 
> 标签：c#, asp.net, email, smtp, attachment

我有一个问题要发送带有 html 和附件作为嵌入图像的邮件。我不知道如何将图像文件夹中的图片用作 div 的背景。

这是我的代码：

```
SmtpMail oMail = new SmtpMail("TryIt");
            SmtpClient oSmtp = new SmtpClient();

            oMail.From = "test@emailarchitect.net";

            oMail.To = "<my email>";

            oMail.Subject = "test";

            SmtpServer oServer = new SmtpServer("<smtp server>");

            try
            {
               // Attachment header = oMail.AddAttachment("d:\\mail_header.jpg");
                Attachment header = oMail.AddAttachment("images/mail_header.jpg"); // this don't work
                Attachment oAttachment = oMail.AddAttachment("d:\\bg_content.jpg");
                Attachment Footer = oMail.AddAttachment("d:\\mail_footer.jpg");

                string contentID_header = "header";
                header.ContentID = contentID_header; 

                string contentID = "test001@host";
                oAttachment.ContentID = contentID;

                string contentID_footer = "footer";
                Footer.ContentID = contentID_footer; 

//how I can use a pic as background

                oMail.HtmlBody = "<html><body>"+
                                    "<div style='background-image:url(" + contentID_header + ");width: 800px;height: 50px'></div>" +
                                    "<div><img src=\"cid:" + contentID + "\"></div>" +
                                    "<div><img src=\"cid:" + contentID_footer + "\"></div>" +
                                    "</body></html>";

                oSmtp.SendMail(oServer, oMail); 

            }
            catch (Exception ep)
            {
                txtSimulate.Text = ep.Message; 
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:17:39.670

我使用此代码，使用**LinkedResources**和**Alternateviews**效果很好。比硬编码 CIDS 好多了。

核实：

```
System.Net.Mail.MailMessage Mensaje = new System.Net.Mail.MailMessage("mail@host.com",DireccionCorreo);

System.Net.Mail.AlternateView htmlView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(Body, null, "text/html");

System.Net.Mail.LinkedResource logo = new System.Net.Mail.LinkedResource("logoimage.jpg");
logo.ContentId = "logoimage";
htmlView.LinkedResources.Add(logo);

System.Net.Mail.LinkedResource logoExchange = new System.Net.Mail.LinkedResource("logoexchange.png");
logoExchange.ContentId = "logoexchange";
htmlView.LinkedResources.Add(logoExchange);

System.Net.Mail.LinkedResource tut1 = new System.Net.Mail.LinkedResource(Application.StartupPath + "/OutlookGuide/tut1.jpg");
tut1 .ContentId = "tut1";
htmlView.LinkedResources.Add(tut1 );

System.Net.Mail.LinkedResource tut2 = new   System.Net.Mail.LinkedResource(Application.StartupPath + "/OutlookGuide/tut2.jpg");
tut2.ContentId = "tut2";
htmlView.LinkedResources.Add(tut2);

Mensaje.AlternateViews.Add(htmlView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:14:27.653

我不知道 asp.net 但使用 PHP 我们通过将图像转换为 Base64 编码然后使用

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA..." /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:16:52.477

您必须提供图像的完整路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T12:18:27.883

首先，我找到了这个[项目](http://www.codeproject.com/KB/aspnet/inkrajesh.aspx)。

但基本上，将图像“嵌入”到电子邮件本身中，您需要将其添加为[链接资源](http://www.systemnetmail.com/faq/4.4.aspx)并在电子邮件的 HTML 中引用附加资源。

# c++ - Apple 的 SpeakHere 演示，混合 ObjC 和 C++，以及翻译单元

> ID：13722990
> 
> 赞同：2
> 
> 时间：2012-12-05T12:11:32.587
> 
> 标签：c++, objective-c, ios

使用 Apple 的 SpeakHere 演示作为起点，我想实现一个声音波形而不是电平表。我在 GLLevelMeter 旁边添加了另一个视图 SoundWaveView，它是一个 ObjC 类，并在 AQLevelMeter.mm 类上对其实现进行了建模。

在发现文件应该命名为“.mm”后，代码编译，但在执行时，它在 MeterTable 对象上出现 EXC_BAD_ACCESS 崩溃。在调试器中打印此对象会得到以下结果：

```
error: instance method 'setMeterTable:' has a different number of parameters in different translation units (0 vs. 1)
error: instance method 'setMeterTable:' has a different number of parameters in different translation units (0 vs. 1)
note: instance method 'setMeterTable:' also declared here
note: instance method 'setMeterTable:' also declared here
error: 2 errors parsing expression 
```

现在我怀疑在 AQLevelMeter.mm （Apple）和 SoundWaveView.mm （我的）中包含 MeterTable.h 会给我重复，但是如何在不导入 .h 的情况下从我的班级访问 MeterTable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:48:47.347

一定要初始化所有讨厌的指针东西。或者选择另一种语言来减少担忧（对不起，我无法抗拒）。

# iphone - 如何获取 viewAtLocation:(CGPoint) 位置？

> ID：13722998
> 
> 赞同：0
> 
> 时间：2012-12-05T12:12:13.520
> 
> 标签：iphone, objective-c, ios, ios4, uiview

现在，在我的几个 iOS 应用程序中，我需要递归地获取相邻视图。我想知道我们有没有类似的东西`viewAtLocation:(CGPoint)location`？或者我们有任何方法可以实现它。

我使用了几种方法，例如 C 数组`id matrix[row][col]`，位置由大小决定作为索引值，然后检索所有方法，然后在循环中一一`subview`检查等。虽然这些方法对我有用，但这些方法似乎不太好，或者说不适合我。`location`那么我们还能拥有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:52:17.267

最好使用标准[`hitTest:withEvent`](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest%3awithEvent%3a)，如果它的不透明度为 0.0，它将处理诸如忽略视图之类的事情。`nil`文档说在手动调用它时传递事件。

对于使用`pointInside:withEvent:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:46:02.560

下面的代码会为你做的，兄弟

```
UIView *view = <Your View>;
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[view addGestureRecognizer:recognizer];
[recognizer release];

- (void)handleSingleTap:(UITapGestureRecognizer*)recognizer{

    CGPoint p = [recognizer locationInView:recognizer.view];
    for (UIView *v in recognizer.view.subviews) {
        if (CGRectContainsPoint(v.frame, p)) {
            NSLog(@"view Found with frame %@",NSStringFromCGRect(v.frame));
            //If your views doesn't overlap then break from here
            break;
        }
    }
} 
```