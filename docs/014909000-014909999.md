# StackOverflow 问答 14909000-14909999

# python - 如何使用 Numpy 制作随机 N 维？

> ID：14909004
> 
> 赞同：4
> 
> 时间：2013-02-16T09:52:47.123
> 
> 标签：python, random, numpy

我目前正在尝试制作 N 维矩阵。

```
import numpy as np
fitness_landscape = np.random.uniform (0, 1, size = (N, 2., 2., 2., 2.)) 
```

在这段代码中，我想减少递归二维。例如，像下面的数组（虽然它不起作用）：

```
import numpy as np
K = 4
fitness_landscape = np.random.uniform (0, 1, size = (N, 2\. * K)) 
```

有什么方法可以满足我的需求吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:54:49.790

```
In [9]: K = 5

In [10]: fitness_landscape = np.random.uniform (0, 1, size = (N,) + (2,) * K)

In [11]: fitness_landscape.shape
Out[11]: (3, 2, 2, 2, 2, 2) 
```

# zend-framework - tcpdf 中的多种语言

> ID：14909006
> 
> 赞同：2
> 
> 时间：2013-02-16T09:53:12.353
> 
> 标签：zend-framework, tcpdf

我遇到了 tcpdf 中的一个问题。现在我正在使用 tcpdf 创建一个 pdf 文档。这里我有一个从 pgsql 数据库动态生成的字段。它包含阿拉伯语和英语。但是当它们与阿拉伯语混合时，英语单词会被还原。请帮忙我有任何教程或示例代码链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:45:23.080

请在此处实施以下解决方案：-

1）`ARIALUNI.ttf`在tcpdf安装下的fonts文件夹中放置一个副本（我从**windows\fonts**文件夹中获取了我的副本）。

2）在 tcpdf 的示例文件夹中创建一个临时脚本并使用以下行执行它：

```
$fontname = $pdf->addTTFfont('../fonts/ARIALUNI.ttf', 'TrueTypeUnicode', '', 32); 
```

3) 在您的 pdf 生成器脚本中设置新字体：

```
$pdf->SetFont('arialuni', '', 20); 
```

另请参阅链接[如何在 PHP 中生成多语言内容 Pdf](https://stackoverflow.com/questions/14379119/how-to-generate-multilingual-content-pdf-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T16:49:42.753

一段时间以来，这种字体在新的 Windows/Office 中不存在。详情见：[https](https://docs.microsoft.com/en-us/typography/font-list/arial-unicode-ms) ://docs.microsoft.com/en-us/typography/font-list/arial-unicode-ms 所以你必须从另一个地方得到它......

新版本的 TCPDF 有自己的对象来创建字体文件，因为它们后来被 TCPDF 使用：`TCPDF_FONTS`

有关更多详细信息和示例，请参见： [https ://stackoverflow.com/a/70337995/2320007](https://stackoverflow.com/a/70337995/2320007)

# ruby-on-rails - 是否可以获得轨道中可用布局的列表（包括来自引擎的布局）？

> ID：14909009
> 
> 赞同：2
> 
> 时间：2013-02-16T09:53:25.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, layout, ruby-on-rails-3.2, actionview

我允许管理员为其页面选择不同的布局。现在它只是一个文本输入，他们输入名字。这意味着他们必须提前知道名字。

如果他们打错了它会引发异常，所以我通过在控制器中执行以下操作来检查布局是否存在，如果它不存在，则默认为“应用程序”。

```
lookup_context.template_exists?(@page.layout, "layouts") 
```

如果我能得到一个布局列表，我就不需要再检查控制器了。

我浏览了actionview，没有发现任何东西。我可以使用 Dir 获取布局文件列表，但我需要包含引擎中的所有布局。

所以我想知道是否有人知道一种方法来生成所有可用布局的列表，包括来自引擎的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:32:50.103

按照惯例，所有布局都存在于`app/views/layouts`目录中。默认情况下，您可用的布局是此目录中存在的文件。要获取布局列表，请尝试以下操作：

```
@layouts = Dir.glob('app/views/layouts/*')
for layout in @layouts
    puts layout
end 
```

如果您已按照[此处](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)所述为应用程序中的引擎定义了自定义路径，则必须显式添加这些布局：

```
@layouts << Dir.glob('custom_engine_path/*') 
```

# linux - 尝试使用 gcc 在 linux 上编译模块

> ID：14909017
> 
> 赞同：0
> 
> 时间：2013-02-16T09:54:25.373
> 
> 标签：linux, gcc, ubuntu, compilation

这是我在编译时遇到的错误：

**b-spec/BS_Linux_Dynamic.cpp:57:11: 错误: '(' token make[1]: * [Release/b-spec/BS_Linux_Dynamic.o] 错误 1 ​​make[1]**之前的预期构造函数、析构函数或类型转换**: 离开目录 `/home/mm/Плот/metamod-1.19/src' make: *** [all] Error 2

这里是来源： http: [//pastebin.com/rhpPrmHv](http://pastebin.com/rhpPrmHv)

感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:58:01.647

问题在这里：

```
__declspec(naked) void CheckProtocol_AsmHelper_LDyn() { 
```

这不会编译，因为`__declspec(naked)`它是一个不受`gcc`.

请参阅[gcc/g++ 中 __declspec(naked) 的等效项](https://stackoverflow.com/questions/7937536/equivalent-of-declspec-naked-in-gcc-g)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:02:46.180

你为什么不使用`asm()`而不是`__asm{}`？既然linux内核也是这样做的，你为什么不呢。另外，为什么要使用 c++ 编写内核模块？

哦！并使用`__attribute__((naked))`.

编辑：

您需要以`asm()`分号结束每次调用。此外，`asm()`将字符串作为参数，因此您需要引用包装您的汇编代码。您还需要使用`\n`and`\t`来指示这些字符串中的制表符和换行符。

# javascript - 使用布尔值切换

> ID：14909020
> 
> 赞同：1
> 
> 时间：2013-02-16T09:54:31.223
> 
> 标签：javascript, boolean

我正在尝试设置元素的样式。我已经设置了一个布尔值，并使用它在两个函数之间切换。但是，它不会运行，所以我不确定我的脚本是否正确。

```
var dfault = false

function rand() {
        return~~ (Math.random() * 255);
    }

function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
}

function randFrame(){
    vid = document.getElementById("video_container");

    if(!dfault){
        vid.style.backgroundColor  = get_random_color();

    }else{
        vid.style.border = ('5px solid rgba(54,57, 62, .3)');

    }

    dfault = !dfault
} 
```

基本上，我喜欢将边框从正常颜色更改为随机颜色，然后来回更改。

HTML：

```
<div id="sideMenu">
    <ul>
        <li onclick="wideScreen()">Wide Screen</li> <!--turn sidebar on/off-->
        <li onclick="randVidframe()">Random Border</li> <!--randomize vidcontain border-->
        <li>Control Bar</li>
    </ul>
</div> 
```

CSS：

```
#video_container{
    -webkit-box-flex: 1; 
    -moz-box-flex: 1;
    border:5px solid rgba(54,57, 62, 1);
    margin: 20px;
    /*padding: 5px;*/
    height: 100%;
    position: relative;
    /*background-color:red;*/
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; 
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:08:26.063

你的脚本应该看起来更像这样

```
var dfault = false

function rand() {
        return~~ (Math.random() * 255);
    }
function randVidframe(){

    if(!dfault){
        elem.style.border = ('5px solid rgb(' + [rand(), rand(), rand()] + ')');

    }else{
        elem.style.border = ('5px solid rgba(54,57, 62, .3)');

    }

    dfault = !dfault
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:34:05.143

1.  每次调用函数时都会重新初始化局部变量 - 您需要使用函数范围之外的变量，但是：

2.  不要使用全局变量，它们很糟糕 - 好吗？

3.  确保在 DOM 准备好之前不会调用您的脚本。如果您过早地运行它，那么您的元素将无法用于您的脚本。

IE：

```
// don't do anything until the DOM is ready
window.onload = function() {

    // local variables
    var dfault;
    var elem = document.getElementById('myelem');

    // local function, not global
    function rand() {
        return ~~(Math.random() * 255);
    }

    // despite above warning, this function has to be global
    // because you're using DOM level 0 inline event handlers :(
    window.randVidframe = function() {
        dfault = !dfault;

        if (dfault) {  // put "true" test first
            elem.style.border = ('5px solid rgba(54,57, 62, .3)');
        } else {
            elem.style.border = ('5px solid rgb(' + [rand(), rand(), rand()] + ')');
        }
    };

    window.wideScreen = function() {
        ...
    };
}; 
```

# ios - AFHTTPClient 在 (200-299) 中的预期状态码，得到 409

> ID：14909025
> 
> 赞同：0
> 
> 时间：2013-02-16T09:54:56.577
> 
> 标签：ios, ios5, ios6

我对 AFHTTPClient 有奇怪的问题，我正在发送 POST 请求，例如

```
NSURL *u = [NSURL URLWithString:HTTP_SERVER];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL: u];
[httpClient setParameterEncoding:AFJSONParameterEncoding];
[httpClient postPath:REGISTER
          parameters:params
             success:^(AFHTTPRequestOperation *operation, id JSON) {
                 int statusCode = [operation.response statusCode];
                 if(statusCode == 201){
                     [self performSegueWithIdentifier:@"register" sender:self];
                 }
             } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                 NSLog(@"[HTTPClient Error]: %@", error.localizedDescription);
             }]; 
```

服务器工作正常（在某些情况下服务器需要用代码 409 回答我，API 就是这样制作的），但是我在 XCode 中遇到错误，例如 `Expected status code in (200-299), got 409` 如何解决这个问题（我的双手被束缚，我无法更改 API 和错误代码) ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:02:54.373

基于[此](https://stackoverflow.com/questions/11334274/afnetworking-and-network-errors)：

你有两个选择：

*   将状态码 409 添加到可接受的状态码列表中，并在成功块中接收它**（坏）**

*   处理故障块中的状态码 409 **（好）**

对于后者，如果您`[operation.response statusCode]`是 409，您将使用`responseData`from `AFURLConnectionOperation`（的超类`AFHTTPRequestOperation`，您需要导入其标头才能使其工作）。

# django - 解释 django 语言

> ID：14909032
> 
> 赞同：0
> 
> 时间：2013-02-16T09:55:55.367
> 
> 标签：django

我正在使用本教程[http://lightbird.net/dbe/blog.html](http://lightbird.net/dbe/blog.html)创建一个简单的博客。我是 django 新手，按照本教程中的一些步骤操作时遇到问题。我尽力去理解，有时我就是不明白。我尝试获取源代码，但文件已损坏。

我需要解释的步骤是：

> 发布页面
> 
> 对于每个帖子，我们还需要一个单独的页面，其中包含访问者的评论和完整的帖子文本（如果我们稍后决定限制在首页上显示帖子正文）。这是我计划设置的方式： url 将是 `/blog/post/{pk}/`post`pk`对象的主键；模板将被调用`post.html`，视图函数将是 `post()`.
> 
> 主列表将显示一个简单的链接：
> 
> ```
> <div class="commentlink">
>     <a href="{% url blog.views.post post.pk %}">Comments</a>
> </div> 
> ```

如果这不是一个合适的问题，我很抱歉。

我已经到了发布页面的步骤，我只是不知道该怎么做！

我的意见.py

```
 from django.core.paginator import Paginator, InvalidPage, EmptyPage
 from django.core.urlresolvers import reverse
 from django.shortcuts import render_to_response
 from blog.models import *
 from django.core.context_processors import csrf
 from django.http import Http404, HttpResponseRedirect
 from django.core.urlresolvers import reverse

 def main(request):
     """Main listing."""
     posts = Post.objects.all().order_by("-created")
     paginator = Paginator(posts, 2)

     try: page = int(request.GET.get("page", '1'))
     except ValueError: page = 1

     try:
         posts = paginator.page(page)
     except (InvalidPage, EmptyPage):
         posts = paginator.page(paginator.num_pages)

     return render_to_response("list.html", dict(posts=posts, user=request.user))

 def post(request, pk):
     """Single post with comments and a comment form."""
     post = Post.objects.get(pk=int(pk))
     comments = Comment.objects.filter(post=post)
     d = dict(post=post, comments=comments, form=CommentForm(), user=request.user)
     d.update(csrf(request))
     return render_to_response("post.html", d)
 def add_comment(request, pk):
     """Add a new comment."""
     p = request.POST

     if p.has_key("body") and p["body"]:
         author = "Anonymous"
         if p["author"]: author = p["author"]

         comment = Comment(post=Post.objects.get(pk=pk))
         cf = CommentForm(p, instance=comment)
         cf.fields["author"].required = False

         comment = cf.save(commit=False)
         comment.author = author
         comment.save()
     return HttpResponseRedirect(reverse('blog:add_comment')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:35:50.777

对于模板：

```
{% url blog:add_comment id_here %} 
```

供查看

```
return HttpResponseRedirect(reverse('blog:view_name'))

def add_comment(request, pk):
    .......
    return HttpResponseRedirect(reverse("blog:post", args=[pk])) 
```

# android - 左右两侧滑动的安卓滑动菜单

> ID：14909034
> 
> 赞同：13
> 
> 时间：2013-02-16T09:56:42.363
> 
> 标签：android, android-side-navigation

我正在尝试制作类似于 Facebook 应用程序中的滑动抽屉菜单。我在这里解决了许多[像这个惊人的](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)问题。并找到了很多库，但它们都是从左到右或从右到左滑动的。我想通过顶部栏中的两个按钮使其从两侧、从左到右和从右到左滑动。谁能帮我这个。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T10:02:50.157

这是我使用的，并且完全符合您的要求：

[滑动菜单](https://github.com/jfeinstein10/SlidingMenu/)

您必须自己实现按钮功能，但应该不会太难！

编辑：

一个例子：

```
SlidingMenu menuS = new SlidingMenu(this);
menuS.setMode(SlidingMenu.LEFT_RIGHT);
menuS.setMenu(R.layout.slideout_list);
menuS.setSecondaryMenu(R.layout.slideout_list2); 
```

如代码所示，您需要将模式设置为 LEFT_RIGHT 并且必须为左侧菜单 (setMenu()) 和右侧菜单 (setSecondaryMenu()) 指定布局以及指定菜单大小和阴影等的其他选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-27T06:20:44.210

试试这个

[https://github.com/srikanthgr/FacebookSlideOutmenu](https://github.com/srikanthgr/FacebookSlideOutmenu)

将此实施到您的项目中，这正是您想要的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T10:11:19.133

[jfeinstein 的SlidingMenu 原版](https://github.com/jfeinstein10/SlidingMenu)的从右到左滑动菜单有一个分支： [https ://github.com/jfeinstein10/SlidingMenu/tree/slidingright](https://github.com/jfeinstein10/SlidingMenu/tree/slidingright)

或者，Simon 的实现具有简单的配置，可在此处**从左到右**和**从右到左进行切换：** [https](https://github.com/SimonVT/android-menudrawer) ://github.com/SimonVT/android-menudrawer 。页面上有一个简单的例子。

虽然，我不是公开发表意见的人，但我发现西蒙的图书馆更容易使用。;-)

话虽如此，但我也绝对不会从**jfeinstein****那里拿走**任何功劳。他的图书馆为我最*畅销*的应用程序之一提供动力。:-)

 **** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-23T01:16:30.493

这个问题现在很老了，但它现在已经内置在Android中。因此，如果人们正在搜索并看到这篇文章，请点击 Android 开发人员页面上的 Navigation Drawer 部分。

[http://developer.android.com/design/patterns/navigation-drawer.html](http://developer.android.com/design/patterns/navigation-drawer.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-28T10:53:13.117

使用这个，它对你有好处：

```
abstract public class BaseSlideFragmentActivity extends SlidingFragmentActivity implements IActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    Utils.log(new Exception(), "[onCreate]");
    super.onCreate(savedInstanceState);

    getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

    setBehindContentView(R.layout.menu_right);
    getSupportFragmentManager().beginTransaction().replace(R.id.menuRight, new MenuRightFragment()).commit();

    getSlidingMenu().setSecondaryMenu(R.layout.menu_left);
    getSupportFragmentManager().beginTransaction().replace(R.id.menuLeft, new MenuLeftFragment()).commit();

    getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
    getSlidingMenu().setBehindOffsetRes(R.dimen.slidingmenu_offset);
    getSlidingMenu().setFadeDegree(0.35f);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    setSlidingActionBarEnabled(false);
}

public Activity getActivity() {
    return this;
}

@Override
public MyApplication getApplicationContext() {
    return (MyApplication) super.getApplicationContext();
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Utils.log(new Exception(), "[onOptionsItemSelected]");
    switch (item.getItemId()) {
        case android.R.id.home:
            toggle();
            return true;
        case R.id.setting:
            if (getSlidingMenu().isMenuShowing()) {
                toggle();
            }
            else {
                showSecondaryMenu();
            }
            return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Utils.log(new Exception(), "[onCreateOptionsMenu]");
    getSupportMenuInflater().inflate(R.menu.menu_setting, menu);
    return true;
} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-09T16:15:01.093

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       // setTitle(R.string.attach);
        // set the content view
        setContentView(R.layout.activity_main);

      // configure the Sliding right Menu
        SlidingMenu menuR = new SlidingMenu(this);
        menuR.setMode(SlidingMenu.RIGHT);
        menuR.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);

   //     menuR.setShadowWidthRes(R.dimen.abc_action_bar_default_height);

     // menu.setShadowDrawable(R.drawable.shadow);right menu
        menuR.setBehindOffsetRes(R.dimen.abc_action_bar_default_height);
        menuR.setFadeDegree(0.35f);
        menuR.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menuR.setMenu(R.layout.right_menu_layout);

      // configure the Sliding left Menu
        SlidingMenu menuL = new SlidingMenu(this);
        menuL.setMode(SlidingMenu.LEFT);
        menuL.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);

     //       menuL.setShadowWidthRes(R.dimen.abc_action_bar_default_height);

     // menu.setShadowDrawable(R.drawable.shadow);left menu
        menuL.setBehindOffsetRes(R.dimen.abc_action_bar_default_height);
        menuL.setFadeDegree(0.35f);
        menuL.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menuL.setMenu(R.layout.left_menu_layout);

    } 
```***

# php - 受恶意软件感染的网站

> ID：14909035
> 
> 赞同：-1
> 
> 时间：2013-02-16T09:56:45.470
> 
> 标签：php, javascript, malware

我有以下问题： 我为朋友创建的网站已感染恶意软件。当我尝试清理它时，通过将我发现与我上传的文件不同的文件替换为我的原始文件，不久之后，文件再次不同。文件权限全部为 644，文件夹为 755。就好像感染文件的人有权在我更改它们时更改它们。任何人都可以帮助我，因为我对这类问题很陌生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:01:28.550

首先要做的事情：**立即向您的虚拟主机报告！**其次**更改所有相关密码！**

这样做，有几个可能的原因：

*   您的父虚拟主机已被入侵，在这种情况下，您只能移至更好的主机。
*   您的网站包含一个漏洞，该漏洞正在被孩子们使用他们的 vuln-scanner 发现。请务必审核您的代码，以确保任何用户操作都不会导致您网站的文件系统被不当访问；还要检查 SQL 注入途径。
*   您的网站使用尚未修补的广泛分布的应用程序，例如 WordPress——这是一个主要问题。
*   您自己的 PC 已被入侵，并且 ne'erdowells 使用键盘记录器或其他软件来发现您的 FTP 或 SSH 帐户详细信息，并且正在滥用您的网站。运行本地扫描并审核所有内容，以确保您的银行帐户也被搜查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:01:20.993

这不是与代码相关的问题。这不是你提问的地方。

但是：很可能某个程序正在您的服务器上运行并重新感染文件。我建议要么将其带到专业的恶意软件清除服务，要么（我的偏好）将服务器烧毁并让新服务器从灰烬中升起。然后在新服务器上安装一个 AV 套件。

# emacs - 几乎全局的 Emacs 次要模式

> ID：14909041
> 
> 赞同：2
> 
> 时间：2013-02-16T09:57:42.880
> 
> 标签：emacs, minor-mode

我正在研究 Emacs 次要模式，并且我希望它仅在主要模式是某种模式（即`js-mode`）时应用。换句话说，当我激活 my-super-mode 时，我希望它定义的键映射在所有 JS 缓冲区中都可用（就像它是全局的）但不影响非 js 缓冲区。

我知道可以通过钩子实现，但我想避免这种解决方案。理想情况下，我的次要模式仅在需要时通过 Mx 激活（激活后它应该在所有 JS 缓冲区中生效）。可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:58:34.600

想到的一种解决方案是定义实现实际功能的缓冲区本地次要模式，但不由用户直接调用，其名称以内部前缀为前缀，以防止意外触发：

```
(define-minor-mode my--mode
  "Mode implementing blah, invoke it with M-x my-super-mode."
  nil " Super" nil
  ;; mode definition goes here, including keymaps, etc.
  ) 
```

用户调用的公共模式是全局的。当打开或关闭时，它会自动在所有现有和未来的 JS 缓冲区中切换内部模式：

```
(defun my--mode-set-maybe ()
  (my--mode (if my-super-mode 1 0)))

(define-minor-mode my-super-mode
  "Super mode, only in effect in JS buffers."
  nil "" nil
  :global t
  (dolist (buf (buffer-list))
    (with-current-buffer buf
      (my--mode-set-maybe))))

(add-hook 'js-mode-hook 'my--mode-set-maybe) 
```

# java - 用于集中式数据库系统的 Rmi？

> ID：14909048
> 
> 赞同：-2
> 
> 时间：2013-02-16T09:58:39.867
> 
> 标签：java, database, rmi

我必须开发一个带有集中式数据库的 java 应用程序。RMI 适合它还是我应该使用其他方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:17:15.100

考虑使用 Java EE。Java EE 应用程序将具有服务器端逻辑并通过 EJB 管理对数据库的访问。

您可以使用基于 RMI 的远程 EJB，但通常只在 LAN 中工作。或者，您可以使用易于使用的 JAX-WS 和 JAX-RS 注释来创建 SOAP 或 RESTful Web 服务。

您可以在此处找到 Java EE 教程：http: [//docs.oracle.com/javaee/6/tutorial/doc/](http://docs.oracle.com/javaee/6/tutorial/doc/)

您将需要一个应用程序服务器。参考实现是 GlassFish： http: [//glassfish.java.net/](http://glassfish.java.net/)

最简单的入门方法是下载带有捆绑 GlassFish 的 NetBeans 版本：http: [//netbeans.org/downloads/](http://netbeans.org/downloads/)

然后只需创建一个 WAR 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:11:11.100

Puce 的回答很好，但您也可以考虑使用不同类型的应用程序服务器（没有 EJB 或 RMI），例如[Vaadin](http://www.vaadin.com/)（基于 Java）或[Real Studio Web Edition](http://www.realsoftware.com/web/)（不基于 Java）。用户在客户端与 Web 浏览器交互，而您的应用程序的业务逻辑在服务器上执行并连接到数据库服务器。

# objective-c - Objective C - 数组中的数量总是重置为零，但为什么呢？

> ID：14909052
> 
> 赞同：0
> 
> 时间：2013-02-16T09:59:07.370
> 
> 标签：objective-c, pointers, reference, nsmutablearray, zero

我正在尝试做一个程序，其中有一个`product`我希望被移动到`storehouse`.

> 例子：
> 
> *将 25 箱苹果从库存（手头）移至仓库。*

当我将产品添加到仓库`listOfProducts`然后将库存归零时，由于某种原因，仓库的产品也会受到影响，即使它不应该受到影响。

该过程应该是；

1.  找到您要入库的产品对象
2.  更新仓库数量，确保数量是添加您手头的库存
3.  将产品对象添加到仓库的 listOfProducts
4.  使库存库存为零 (0)

但它也使仓库数量为0？为什么？它似乎没有理由这样做。

它似乎在我引用的对象之间强制建立了符号链接，即使这不是要发生的事情。

我需要先制作对象的副本吗？

一些笔记。

一个。仓库是一个对象，每个城市都有一个仓库（即city.listOfStorehouses）。

湾。city.listOfStorehouses 保存在单例中，因此保存状态或在页面之间传递状态不是问题。

C。**物品被添加到仓库，但数量重置为零？但为什么？**

```
// Try to move X goods from inventory -> storehouse
 NSLog(@"Goods to move = %@, %d crates", self.product.name, self.crates);

// I add the qty to the product I want to put into the storehouse        
self.product.qty += self.crates;

// Append the array (I should check if the product already exists but this does not matter right now)
[self.storehouse.listOfProducts addObject:self.product];

// Reset crates because it should always be zero because you've moved them
// from your inventory into a storehouse
self.crates = 0; 
```

好的，所以当我在库存页面上将 25 个苹果从库存转移到仓库时，参考和数量似乎都很好。

但是，如果我刷新/重新加载页面，即使仓库中有物品，数量也会在仓库中重置为零。

我不知道是什么导致仓库项目数量设置为零。

这是一个日志输出；

```
// Log output

// Stock page
// Goods to move = Apples, 25 crates, seems to be storing fine, no problem.
2013-02-16 09:40:27.257 TestApp[1524:c07] Storehouse = (25/500)
2013-02-16 09:40:27.260 TestApp[1524:c07]    #0 storehouse item = Apples with 25 crates

// Previous page
// When I go back to the previous page, the qty is zero?? WHY?
2013-02-16 09:41:33.980 TestApp[1524:c07] Storehouse = (0/500)
2013-02-16 09:41:33.980 TestApp[1524:c07]    #0 storehouse item = Apple with 0 crates 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:59:26.347

当您将对象分配给变量时，它是对分配给变量的原始对象的*引用。*这可能就是您所说的“符号链接”。

在 Objective-C 中，变量赋值不会自动创建新对象，但是您可以将属性声明为“复制”属性，在这种情况下，该对象将被属性的自动生成的 setter 方法复制。

您需要确保您的对象实现了[`NSCopying`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)。[此处](https://stackoverflow.com/questions/4089238/implementing-nscopying)还讨论了如何为自定义对象实现该协议。

# d3.js - 使用 d3.js 缩放和平移以太平洋为中心的墨卡托地图

> ID：14909054
> 
> 赞同：12
> 
> 时间：2013-02-16T09:59:41.550
> 
> 标签：d3.js, zooming, pan

抱歉，如果这是我对显而易见的事情视而不见的简单案例，但我正在尝试整理一个页面，该页面显示以太平洋为中心的墨卡托投影中的世界地图（数据来自 TopoJSON 文件）。即左边是欧洲，右边是美国，中间是澳大利亚。有点像这样...

![以太平洋为中心的世界](../Images/4a028be1411c24e1307a0b667035d86f.png)

从这一点开始，我希望能够根据自己的心愿缩放和平移地图，但是当我向东或向西平移时，我希望地图“四处”滚动而不是来到世界尽头（我希望这能让感觉）。

我目前正在处理的代码在这里（或以下要点（[https://gist.github.com/d3noob/4966228](https://gist.github.com/d3noob/4966228)）或块（[http://bl.ocks.org/d3noob/4966228](http://bl.ocks.org/d3noob/4966228)））；

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>
body {font-size:11px;}
path {
  stroke: black;
  stroke-width: 0.25px;
}
</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v0.min.js"></script>
<script>
var width = 960,
    velocity = .005,  
    then = Date.now() 
    height = 475;

var projection = d3.geo.mercator()
    .center([0, 0 ])
    .scale(1000);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var path = d3.geo.path()
    .projection(projection);

var g = svg.append("g");

d3.json("world-110m.json", function(error, topology) {
  g.selectAll("path")
    .data(topojson.object(topology, topology.objects.countries).geometries)
  .enter()
    .append("path")
    .attr("d", path)
    .style("fill","black")

  d3.timer(function() {  
    var angle = velocity * (Date.now() - then);  
    projection.rotate([angle,0,0]);  
    svg.selectAll("path")  
      .attr("d", path.projection(projection));  
  }); 

  var zoom = d3.behavior.zoom()
  .on("zoom",function() {
    g.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")")
  });

  svg.call(zoom)

});
</script>
</body>
</html> 
```

该代码是示例的混合体，因此我可以看到一个可以自动从西向东旋转的地图，并且我可以使用鼠标进行平移和缩放，但是在平移和缩放时，据我所知，我正在影响内部“g”元素而不是“svg”元素中的地图。

有很多很好的例子可以平移和缩放以子午线为中心的地图。但在我发现的反子午线上没有。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-19T11:45:54.203

我最终解决了同样的问题。这是[一个示例](http://bl.ocks.org/patricksurry/6621971)（[参见代码](https://gist.github.com/patricksurry/6621971)），您可以向左/向右平移以旋转投影（带环绕），并向上/向下平移以平移（由最大绝对纬度限制），以及缩放。确保投影始终适合视图框。

我学到了很多关于缩放行为以及投影中心（）和旋转（）交互的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T07:49:42.127

希望这段代码可以解决你的问题

```
 var projection = d3.geo.equirectangular()
    .center([0, 5])
    .scale(90)
    .translate([width / 2, height / 2])
    .rotate([0, 0])
    .precision(9); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-18T02:17:24.760

苹果产品上的谷歌地图就是这样工作的。卷轴离开了，你会离开一个澳大利亚，然后找到一个又一个又一个

# c++ - 使用 PPL 不锁定关键部分的 C++ 并行循环

> ID：14909055
> 
> 赞同：0
> 
> 时间：2013-02-16T09:59:55.493
> 
> 标签：c++, parallel-processing, ppl, parallel-for

在下面的代码中，有使用 PPL 实现的 parallel_for 循环。主要问题在这里；当我被注释 cs.lock() 和 cs.unlock() 时，abc 向量值不正确。我正在使用 concurrency_vector 类型来随机访问数组值，但它似乎不起作用。锁定关键部分，它工作但很慢。此外，为了加快速度，我使用索引来存储值，而不是使用 2D-concurrency_vector。有什么问题，没有锁定关键部分，我错过了什么？

```
#include <iostream>
#include <ppl.h>

using namespace concurrency;
using namespace std;

int test_function()
{
    critical_section cs;

    concurrent_vector< double > abc( 300 * 400, 1000 );

    parallel_for ( 0, 1000, [ & ]( int k ) {
        for ( int y = 0; y < 300; y++ ) {
            for ( int x = 0; x < 400; x++ ) {

                /// k is using with some calculations for thr

                cs.lock();

                if ( thr < abc[ 400 * y + x ] ) {

                    abc[ 400 * y + x ] = thr;
                }

                cs.unlock();
            }
        }
    } );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:07:30.650

你为什么期望它起作用？如果它在没有锁定的情况下并行运行，`abc[400*y+x]`则可以并且将在 if 语句和赋值之间进行更改，从而破坏您的逻辑。向量类型本身是线程安全的与此无关。

# javascript - AngularJS 从资源查询访问数据

> ID：14909056
> 
> 赞同：0
> 
> 时间：2013-02-16T10:00:02.513
> 
> 标签：javascript, rest, angularjs, jersey

我有一个 Jersey Rest 应用程序，我想使用 AngularJS 应用程序访问它。

我已将资源定义如下：

服务：

```
angular.service('Wine', function ($resource) {
    return $resource('/myserver/rest/wines/:wineId', {}, {
        update: {method:'PUT'},
        'query': {method: 'GET', isArray: true}
    });
}); 
```

控制器：

```
function WineListCtrl(Wine) {
    this.wines = Wine.query();
} 
```

在 Firebug 中，我可以看到这个 GET 请求的结果：

```
{"wine":[{"country":"USA","description":"With hints of ginger and spice, this wine makes an excellent complement to light appetizer and dessert fare for a holiday gathering.","grapes":"Pinot Noir","id":"9","name":"BLOCK NINE","picture":"block_nine.jpg","region":"California","year":"2009"},{"country":"Argentina","description":"Solid notes of black currant blended with a light citrus make this wine an easy pour for varied palates.","grapes":"Pinot Gris","id":"11","name":"BODEGA LURTON","picture":"bodega_lurton.jpg","region":"Mendoza","year":"2011"},{"country":"France","description":"The aromas of fruit and spice give one a hint of the light drinkability of this lovely wine, which makes an excellent complement to fish dishes.","grapes":"Grenache / Syrah","id":"1","name":"CHATEAU DE SAINT COSME","picture":"saint_cosme.jpg","region":"Southern Rhone / Gigondas","year":"2009"},{"country":"France","description":"Though dense and chewy, this wine does not overpower with its finely balanced depth and structure. It is a truly luxurious experience for the\nsenses.","grapes":"Merlot","id":"7","name":"CHATEAU LE DOYENNE","picture":"le_doyenne.jpg","region":"Bordeaux","year":"2005"},{"country":"France","description":"The light golden color of this wine belies the bright flavor it holds. A true summer wine, it begs for a picnic lunch in a sun-soaked vineyard.","grapes":"Merlot","id":"8","name":"DOMAINE DU BOUSCAT","picture":"bouscat.jpg","region":"Bordeaux","year":"2009"},{"country":"USA","description":"Though subtle in its complexities, this wine is sure to please a wide range of enthusiasts. Notes of pomegranate will delight as the nutty finish completes the picture of a fine sipping experience.","grapes":"Pinot Noir","id":"10","name":"DOMAINE SERENE","picture":"domaine_serene.jpg","region":"Oregon","year":"2007"},{"country":"Spain","description":"A resurgence of interest in boutique vineyards has opened the door for this excellent foray into the dessert wine market. Light and bouncy, with a hint of black truffle, this wine will not fail to tickle the taste buds.","grapes":"Tempranillo","id":"2","name":"LAN RIOJA CRIANZA","picture":"lan_rioja.jpg","region":"Rioja","year":"2006"},{"country":"France","description":"Breaking the mold of the classics, this offering will surprise and undoubtedly get tongues wagging with the hints of coffee and tobacco in\nperfect alignment with more traditional notes. Breaking the mold of the classics, this offering will surprise and\nundoubtedly get tongues wagging with the hints of coffee and tobacco in\nperfect alignment with more traditional notes. Sure to please the late-night crowd with the slight jolt of adrenaline it brings.","grapes":"Chardonnay","id":"12","name":"LES MORIZOTTES","picture":"morizottes.jpg","region":"Burgundy","year":"2009"},{"country":"USA","description":"The cache of a fine Cabernet in ones wine cellar can now be replaced with a childishly playful wine bubbling over with tempting tastes of\nblack cherry and licorice. This is a taste sure to transport you back in time.","grapes":"Sauvignon Blanc","id":"3","name":"MARGERUM SYBARITE","picture":"margerum.jpg","region":"California Central Cosat","year":"2010"},{"country":"USA","description":"A one-two punch of black pepper and jalapeno will send your senses reeling, as the orange essence snaps you back to reality. Don't miss\nthis award-winning taste sensation.","grapes":"Syrah","id":"4","name":"OWEN ROE \"EX UMBRIS\"","picture":"ex_umbris.jpg","region":"Washington","year":"2009"},{"country":"USA","description":"One cannot doubt that this will be the wine served at the Hollywood award shows, because it has undeniable star power. Be the first to catch\nthe debut that everyone will be talking about tomorrow.","grapes":"Pinot Noir","id":"5","name":"REX HILL","picture":"rex_hill.jpg","region":"Oregon","year":"2009"},{"country":"Italy","description":"Though soft and rounded in texture, the body of this wine is full and rich and oh-so-appealing. This delivery is even more impressive when one takes note of the tender tannins that leave the taste buds wholly satisfied.","grapes":"Sangiovese Merlot","id":"6","name":"VITICCIO CLASSICO RISERVA","picture":"viticcio.jpg","region":"Tuscany","year":"2007"}]} 
```

在我的 html 页面中，我想访问以下内容：

```
<ul ng:controller="WineListCtrl">
    <li ng:repeat="wine in wines">
        <a href='#/wines/{{ wine.id }}'>{{ wine.name }}</a>
    </li>
</ul> 
```

遗憾的是，UI 中没有显示任何结果（尽管 JSON 结果似乎没问题，并且浏览器控制台上没有错误）。

如果我发出警报，例如

```
alert(this.wines.length) 
```

结果我得到 0。

能得到你们的帮助真是太好了……

问候马克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T10:16:50.597

您的第一个问题是您分配给`this`而不是范围。如果您不分配范围，您的数据将无法在视图中绑定。因此，将其`$scope`注入您的控制器并为其分配`wines`属性：

```
function WineListCtrl($scope, Wine) {
  $scope.wines = Wine.query();
} 
```

你还有另一个问题。该`ngResource`模块期望调用的结果`query`是一个数组，但实际上您返回的是一个对象：

```
{wine: [an array of wines]} 
```

因此，除非您从服务器端响应中删除密钥，否则您`ng-repeat`可能必须看起来像：

```
<li ng-repeat="wine in wines.wine">...</li> 
```

# java - Spring AOP示例的一些疑惑

> ID：14909058
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:00:17.737
> 
> 标签：java, spring, maven, spring-mvc, cglib

我正在学习本教程的 Spring Framework 中的 AOP：[http ://www.tutorialspoint.com/spring/schema_based_aop_appoach.htm](http://www.tutorialspoint.com/spring/schema_based_aop_appoach.htm)

与上一个教程不同，我没有手动添加所需的 jars 文件，而是使用 Maven。

最初我在我的 pom.xml 中添加了这个依赖项（除了那些与 spring-core、spring-bean、spring-context、spring-context-support Spring 模块相关的）

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency> 
```

但是，以这种方式不起作用并引发以下异常：

**引起：java.lang.ClassNotFoundException：org.aspectj.weaver.reflect.ReflectionWorld$ReflectionWorldException**

在线阅读我找到了解决方案：我必须在我的 pom.xml 中添加这两个依赖项：

```
 <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.6.2</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency> 
```

所以现在我有两个疑问：

1.  如果我还没有**org.springframework.spring-aop**，为什么我必须添加这个**org.aspectj.aspectjtools**依赖项？（另外...我注意到我可以删除org.springframework.spring-aop，这个没用）它们有什么区别？

***   为什么我必须添加**cglib**依赖项？我知道当我使用 @Configuration 和 @Bean 之类的注释时我必须使用 cglib ......但是为什么在这种情况下我需要这个没有这些注释的依赖项？** 

 **Tnx安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:24:05.143

您可以在 pom.xml 中使用`aopalliance`而不是 cglib 和依赖项。`aspectjrt & aspectjweaver`我使用和建议的是使用 Maven aspectj-maven-plugin 编译您的目标代码的团队编织。

至于您的问题，Spring AOP 本身并不检测您的目标代码。它在幕后使用 AspectJ 来做到这一点。CGLib 用于生成动态代理等。如果您需要动态生成接口，然后将其应用于您的建议，CGLib 可以提供帮助。Hibernate 大量使用 CGLib**

# php - 子菜单 div 问题

> ID：14909059
> 
> 赞同：0
> 
> 时间：2013-02-16T10:00:19.520
> 
> 标签：php, jquery, html, css, ajax

我有一个带有子菜单的菜单。这个菜单来自数据库。在主菜单的一个叮当声上打开一个子菜单..我希望当我点击子菜单的任何链接时..子菜单保持打开状态，所选子菜单应保持选中状态。但问题是当我点击任何子菜单链接时..我到达了它的相关链接..但是子菜单隐藏了。我尝试使用 J-query 来这样做..但由于加载新页面而失败...请告诉我任何方法..现在我想使用 jquery 或 ajax 解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:17:33.680

阅读您的问题后，我认为这可能会对您有所帮助。

*   使用 jQuery（包括 jQuery 库）。
*   在您要保留选定的主菜单和子菜单的页面上，执行以下操作：

    1.  获取主菜单和子菜单 ID 并使用 jQuery 进行切换。

> ```
>  $("#mainmenuid").toggle('fast');
>  $("#submenu").toggle('fast'); 
> ```

或者您可以应用任何 jQuery 事件。

***注意：***在特定页面的页眉区域添加 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:25:24.930

你可以试试这个：

```
$('#menu > li > a').click(function(){
    if($(this).siblings('ul').length > 0){
       $(this).siblings('ul').show();
       return false; // This will do what you want.
    }
}); 
```

如果有任何同级“ul”元素，这将不允许链接。否则，它将转到它的href。

在这里测试：http: [//jsfiddle.net/SXKG4/2/](http://jsfiddle.net/SXKG4/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:47:10.277

`load`如果您想要一个ajax解决方案，您可以尝试：

## 假设这是html：

```
<ul id='main-menu'>
    <li><a href='pages/home.html'>Home</a></li>
    <li><a href='pages/about.html'>About us</a>
         <ul class='sub-menu'>           /*initially hide it display:none;*/
             <li><a href='pages/subpage1.html'>sub link 1</a></li>
             <li><a href='pages/subpage2.html'>sub link 2</a></li>
         </ul>
    </li>
</ul>

<div id='content'></div> <!--here you have to put page contents--> 
```

## 然后你可以使用这个jQuery：

```
 $(function(){
    $('#main-menu li').click(function(){
       var page = $(this).find('a').attr('href');
       $('#content').load(page);
       $('.submenu',this).toggle();
    });

     $('#main-menu a').click(function(e){
         e.preventDefault(); // <-----this stops page to navigate to link href
     });

    $('.submenu li').click(function(ev){
       ev.stopPropagation(); //<----stops the event bubbling to the parent
    });
 }); 
```

# javascript - 根据传递给函数的参数更改要测试的条件

> ID：14909063
> 
> 赞同：0
> 
> 时间：2013-02-16T10:01:13.160
> 
> 标签：javascript

我从以前在这里工作的程序员那里“继承”了一个 JS 函数。我注意到在他的代码中有两个函数做同样的事情，它们只是略有不同。

第一个函数不接受任何参数，在它的主体内部，他以这种方式测试条件：

```
function parseAll() {
    for (var i = 0; i < 100; i++) {
        if (obj.flag == 0) {
            // do many other things I omit
        }
    }
} 
```

第二个功能：

```
function parseOne(stringOne) {
    for (var i = 0; i < 100; i++) {
        if (obj.flag == 0 && obj.str = stringOne) {
            // do other things I omit (same identical things as in the function parseAll
        }
    }
} 
```

现在，我想将这些函数转换为一个函数，传递`null`第一个函数所涵盖的情况何时传递，并传递一个`string`何时应该调用第二个函数。

因此，两者之间的差异只是要测试的条件。

如何根据传递给函数的参数以编程方式更改要测试的条件？我想测试`obj.flag==0`我是否通过`null`以及`obj.flag==0 && obj.str=stringOne`是否通过`string`. 这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:07:31.327

您可以通过多种方式轻松检测是否传入了参数。如果`stringOne`永远不会`""`在您真正想将它用于“一个”案例时，那么：

```
function parseOne(stringOne) {
    for (var i = 0; i < 100; i++) {
        if (obj.flag == 0 && (!stringOne || obj.str === stringOne)) {
            // do other things I omit (same identical things as in the function parseAll
        }
    }
} 
```

（我把你改成`obj.str = stringOne`了`obj.str === stringOne`。只有一个`=`，这是一个作业，我假设这是一个错字。）

然后，对于“全部”情况，您可以`parseOne`完全不带参数调用（甚至不需要传入）。`null`

请注意，上面假设`stringOne`to be永远没有意义`""`，因为`""`是假的，所以`!stringOne`是真的，我们将其视为“全部”情况。如果传入有意义`""`并且只想处理一个字符串，则必须进行一些更改：

```
function parseOne(stringOne) {
    var one = typeof stringOne !== "undefined";
    for (var i = 0; i < 100; i++) {
        if (obj.flag == 0 && (!one || obj.str === stringOne)) {
            // do other things I omit (same identical things as in the function parseAll
        }
    }
} 
```

还有第三种选择，即检查`arguments.length`实际传递给函数的参数数量（所有函数`arguments`在调用期间都有一个对象在作用域内），但在某些 JavaScript 引擎上会显着减慢调用速度（尽管通常不会在一种真正重要的方式），这里并不需要它。

# javascript - 如何使用 Jquery 检索 Sharepoint 列表数据

> ID：14909070
> 
> 赞同：4
> 
> 时间：2013-02-16T10:01:40.697
> 
> 标签：javascript, jquery, sharepoint, sharepoint-2013

我正在尝试使用 Jquery 检索列表数据。但我得到的是整个列表 Html 页面，而不是列表中的值。jQuery代码如下

```
<script src="../_layouts/15/SharePointProject1/Scripts/jquery-1.3.2.js"></script>
<script language = "javascript" type="text/javascript">
    function GetAnnouncementData() {
        var soapPacket = "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
   <soapenv:Body> \
    <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
     <listName>Temp</listName> \
     <viewFields> \
      <ViewFields> \
        <FieldRef Name='Title' /> \
      </ViewFields> \
     </viewFields> \
    </GetListItems> \
   </soapenv:Body> \
  </soapenv:Envelope>";
        jQuery.ajax({
            url: "http://serverName/Lists/Temp/listsView.aspx",
            type: "POST",
            dataType: "xml",
            data: soapPacket,
            complete: processResult,
            contentType: "text/xml; charset=\"utf-8\""
        });
    }

    function processResult(xData, status) {
        //jQuery(xData.responseXML).find("z\\:row").each(function () {
        //    $("<li>" + $(this).attr("ows_Title") + "</li>").appendTo("#AnnouncementData");
        //});
        //alert($(this).attr("ows_Title"));
        alert(xData.responseText);
        //alert(status.toString());
        document.getElementById("tarea").value = xData.responseText;
        document.getElementById("div1").innerHTML = xData.responseText;
    }
    $(document).ready(function () {
        GetAnnouncementData();
    });
</script> 
```

这段代码给了我列表页面而不是列表数据。我试图在 div 标签中获取 xml 文件，以便我可以查看它返回给我的内容。它返回我该列表的 HTML 页面。
请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T04:06:53.323

对我来说，最好的选择是使用 REST 调用以 json 形式接收数据，这样更清洁、更易于使用。

此外，好处是 SharePoint 上的 REST 调用是使用 Linq 进行的，因此在创建查询时这种方式更加灵活，例如，您可以进行更好的分页，而不是使用仅允许的 sharepoint 的蹩脚分页你要做下一个项目。

```
var ajaxCall = $.getJSON("http://SharePointSiteUrl/_vti_bin/listdata.svc/ListName");

ajaxCall.success(function (jsonData) { callbackSuccessFunction(jsonData.d.results); });
ajaxCall.error(function () { callbackErrorFunction({ status: 'error', data: 'error message.' }); }); 
```

返回的数据将以 json 格式接收，格式如下：

```
{d: {results: [arrays of items]} 
```

如果您需要知道列表的名称来进行其余调用，只需调用 url：

```
http://SharePointSiteUrl/_vti_bin/listdata.svc/ 
```

这是一些信息：http: [//msdn.microsoft.com/en-us/library/ff798339.aspx](http://msdn.microsoft.com/en-us/library/ff798339.aspx)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T07:24:50.583

您是否检查了您为访问列表而提供的 URL。

```
url: "http://serverName/Lists/Temp/listsView.aspx", 
```

在此 URL 中，如果您正在访问本地计算机，那么您必须在服务器名称中提供 localhost。

```
url: "http://localhost:80/Lists/Temp/listsView.aspx", 
```

尝试使用它，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T22:49:37.687

*一个老问题，但为了帮助其他人寻找答案......*

“使用 jQuery 检索列表数据”的最简单方法是使用 SharePoint URL 协议。它可以返回 XML 中的列表数据，并且不需要您构建 SOAP 请求。您只需要列表 GUID 和 ows_ 属性名称（使用 FireBug 检查返回的 XML）。

下面的简单示例将显示公告数据。将代码粘贴到您的 SharePoint 网站上的空 HTML 页面中，并将 siteUrl 和 listId 值替换为*您*自己*的*值。

Microsoft 参考：[URL 协议](http://msdn.microsoft.com/en-us/library/ms478653%28v=office.14%29.aspx)

如果您需要做的不仅仅是读取列表数据，请查看 Marc D Anderson 的 [jQuery.SPServices](http://spservices.codeplex.com/)。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
<script type="text/javascript">

/* Tested with WSS3,IE9,FF19 */

$(document).ready( function() {

    var siteUrl = "//london",
        listId  = "{1EC2EC89-B3DC-434D-A63E-AAEBF72E4E89}";

$.get( siteUrl + "/_vti_bin/owssvr.dll?Cmd=Display&XMLDATA=TRUE&List=" + listId, 
    function( xml ) {
        var zrow = xml.getElementsByTagName("z:row");
        for(var i=0; i<zrow.length; i++) {
            $("#table1 tbody").append( 
            "<tr><td>"
            + zrow[i].getAttribute("ows_Attachments")
            + "</td><td>"
            + zrow[i].getAttribute("ows_LinkTitle") 
            + "</td><td>" 
            + zrow[i].getAttribute("ows_Body") 
            + "</td></tr>" 
            );
        }
});
});

</script>

<table id="table1">
<caption>Announcements</caption>
<tbody></tbody>
</table>

</body>
</html> 
```

# c++ - C++ 多重继承和访问说明符：从基类及其派生类继承

> ID：14909071
> 
> 赞同：1
> 
> 时间：2013-02-16T10:01:42.543
> 
> 标签：c++, oop, inheritance, multiple-inheritance, gtkmm

这是我遇到的一个意想不到的问题。我正在编写一个 GUI 应用程序，我使用 GUI 库中的两个类：一个模型类和一个视图类。模型内容由 View 类呈现到屏幕上。在某些时候，我决定派生 Model 类，因为我需要扩展功能。图书馆的类是派生的，我发现了很多例子。这很容易而且效果很好。

现在有一个问题：Model 类提供了直接编辑模型数据的方法。我不希望这些方法公开，因为我编写了包装器，而这些包装器必须是唯一的编辑方式。我确实需要继承，因为我派生的 MyModel 覆盖了 Model 类的许多虚拟方法。所以我在想该怎么办。以下是包含所有详细信息的摘要：

*   有一个 BasicModel 类，它提供了通过模型数据进行迭代的方法
*   有一个Model类，它继承了BasicModel，并通过提供编辑数据的方法来扩展它（我认为BaseModel是抽象的，没有数据，Model定义了内部数据结构，实现了BasicModel提供的迭代接口）
*   有一个继承模型的 MyModel 类。它覆盖了许多虚拟方法，扩展了编辑机制，并希望隐藏 Model 提供的较低级别的编辑方法
*   有一个 View 类，它存储一个指向 BasicModel 对象的指针。因此视图只使用迭代接口，甚至不知道任何编辑接口。

所以我想保持 MyModel 的迭代接口公开，这样我就可以将它传递给我的 View 对象，但隐藏 Model 提供的编辑接口。

**我想到的解决方案：**

*解决方案 1：*无法避免继承，因为我必须覆盖虚拟方法，但解决方案本身不必使用继承：我可以为 MyModel 类编写一个包装器，它提供对封装 MyModel的*const 引用*的访问对象并为 MyModel 的编辑机制提供包装器。由于所有的包装器，它可能很难看，但它避免了多重继承和访问说明符的混乱。

*解决方案 2：*让 MyModel 继承 Model。没有多重继承。现在转到 MyModel.hpp 中 MyModel 的类定义，并在`protected`ir下编写所有 Model 编辑方法的方法声明`private`，以便隐藏它们。这工作得很好，但是在维护上有一个小问题：如果在未来版本的库中，模型接口发生了变化，例如添加了一个新的编辑方法，我们必须手动将它添加到 MyModel 类中作为私有/受保护的方法。当然，我可以跟踪库的更改，或者至少转到其在线 API 参考并查看模型类参考页面，以确保没有任何更改，或者在必要时更新我的​​代码，在生产/稳定版本之前我的应用程序已发布。

*解决方案3：*使用多重继承，然后我不知道应该发生什么。是否安全。行为编译器是否依赖。思路是这样的：MyModel继承自Model，又继承自basicModel：`public`继承自BasicModel（用于迭代界面）和`protected/private`继承自Model（为了隐藏Model的编辑界面）。

**笔记：**

*注1*：我的高级编辑机制*使用*Model的低级编辑方法。

*注2*：MyModel 覆盖的虚方法，其中一些是由BasicModel 定义的（因此也由Model 继承），而另一些在BasicModel 中不存在，由Model 定义（例如与拖放相关的方法）。

*注3：*我使用的GUI库是**gtkmm ，是****GTK+**的C++绑定，我说的类是Gtk::TreeModel、Gtk::TreeStore、Gtk::TreeView和我自己的MyModel类，它派生自Gtk ::树店。我忽略了这些名称，因为这个问题是一个通用的 OO 规划问题，但我在这里提到了真正的类，以便熟悉它们的人更容易理解这个问题。

我不确定这里最好的设计是什么。毫无疑问，解决方案 3 是维护成本最低的解决方案。它实际上为零，因为继承访问说明符只是自动完成所有工作。问题是，解决方案 3 是否总是按预期工作，例如对于迭代方法，编译器会将其设为公共（因为从 BasicModel 继承的公共继承）还是私有（因为从派生自 BasicModel 的 Model 的私有继承）。我从来没有像这样使用多重继承......

**伪代码**

这或多或少是图书馆的工作方式：

```
namespace GUI
{
     class BasicModel
     {
      public:
          /* iteration interface for observing the model */
          iterator get_iter();
          // but no data here, it's just an interface which calls protected virtual methods
          // which are implemented by deriving classes, e.g. Model
      protected:    
          virtual iterator get_iter_vfunc() = 0;
          virtual void handle_signal();
     };

     class Model : public BasicModel
     {
         /* inherits public iteration interface*/
         /* implements observation virtual methods from BasicModel*/
         virtual iterator get_iter_vfunc() { /*...*/ }
         /* has private data structures for the model data */
         std::vector<Row> data;
         /* has public editing interface, e.g. insert_row(), erase(), append()
         /* has protected drag-n-drop related virtual methods*/
         virtual void handle_drop();
     };
} 
```

我的代码：

```
class MyModel : public GUI::Model
{
     /* implements virtual methods from BasicModel, e.g. default signal handlers*/
     virtual void handle_signal() { /*...*/ }
     /* implements drag-n-drop virtual methods from Model*/
     virtual void handle_drop() { *...* }
     /* inherits public iteration interface*/
     /* inherits public editing interface (***which I want to hide***)
     /* implements its own editing mechanism*/
     void high_level_edit (int param);
}; 
```

**使用 GCC 进行实验**

我尝试了以下代码，编译时关闭警告（否则 GCC 会抱怨）：

```
#include <iostream>

class Base
{
public:
    void func ()
    {
        std::cout << "Base::func() called" << std::endl;
        func_vfunc ();
    }
protected:
    virtual void func_vfunc ()
    {
        std::cout << "Base::func_vfunc() called" << std::endl;
    }
};

class Derived : public Base
{
protected:
    virtual void func_vfunc ()
    {
        std::cout << "Derived::func_vfunc() called" << std::endl;
    }
};

class MyClass : public Base, private Derived
{
};

int main (int argc, char* argv[])
{
    Base base;
    Derived derived;
    MyClass myclass;

    base.func ();
    derived.func ();
    myclass.func ();
    return 0;
} 
```

出于某种原因，GCC 坚持认为该调用`myclass.func()`是模棱两可的，但是`func()`由于私有继承，其中一个我们应该是私有的，所以我不明白为什么它不能编译。底线，假设它不是一个错误，但只是我不理解事情是如何工作的——建议的多重继承解决方案是不可能的。如果我没记错的话，解决这个问题的唯一方法是虚拟继承，但我不能使用它，因为我使用的类是库类，它们不使用虚拟继承。即使那样，由于我同时使用私有和公共继承，它可能无法解决问题，仍然是一个模棱两可的电话。

编辑：我尝试让 Derived 和 MyClass 实际上从 Base 派生，它完全解决了问题。但就我而言，我无法更改库类，所以这不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:17:45.943

如果我正确理解您的问题，您可能应该混合使用继承（MyModel 派生自 BaseModel）和组合（MyModel 包含 Model 的私有实例）。

然后在 MyModel 中使用您自己的基本虚拟方法的实现，对于那些您不想重新实现的方法，只需将它们作为相应模型方法的代理即可。

无论如何，恕我直言，如果可以的话，您应该避免多重继承。否则随着时间的推移它会变得非常多毛。

* * *

编辑：现在我可以看到代码，我再试一次。

您需要做的是在 MyModelImpl 类（从 Model 派生）中重新实现您需要的任何内容，该类将隐藏在代理类 MyModel（从 BaseModel 派生）中。我的第一个想法非常相似，只是我不明白您需要重新实现 Model 的某些部分。

类似于以下内容：

```
class MyModel : public BaseModel {
public:
  void high_level_edit(int param) { m_impl.high_level_edit(param); }
protected:
  virtual iterator get_iter_vfunc() { return m_impl.get_iter_vfunc(); }
  virtual void handle_signal() { m_impl.handle_signal(); }

private:
  class MyModelImpl : public Model {
  public:
    void high_level_edit(int param);
    // reimplement whatever you need (methods present in BaseModel,
    // you need to call them from MyModel proxies)
    virtual iterator get_iter_vfunc() { /*...*/ }
  protected:
    // reimplement whatever you need (methods present only in Model,
    // you don't need to call them from MyModel proxies)
    virtual void handle_drop();
  };
  MyModelImpl m_impl;
}; 
```

我相信这应该可以正常工作，因为 BaseModel 中没有实际状态（数据），除非我*再次*误解了一些东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T12:43:13.593

你可以做类似的事情

```
class MyModel : protected Model

{

public:
    using Model::iterator;
    //it will make iterator public in MyModel
} 
```

如果我正确理解了这种情况，并且提供的 Model 不是从可迭代类私下继承的，我猜这里一定是这种情况。如果我说了一些愚蠢的话，请原谅我。我不是一个非常有经验的编码器。

# java - 从 StackOverflow 分析一些 html 页面

> ID：14909074
> 
> 赞同：-4
> 
> 时间：2013-02-16T10:02:41.343
> 
> 标签：java, eclipse, http, ip, stack-overflow

我需要一次从 500 个 stackoverflow 问题中提取答案，但突然我在 Eclipse 控制台上读到了这个错误：

> 服务器返回 HTTP 响应代码：503 用于 URL： [https ://stackoverflow.com/search?q=lucene+IndexWriter+registerMerge%28](https://stackoverflow.com/search?q=lucene+IndexWriter+registerMerge%28)

如果之后我使用浏览器，我会阅读此消息：

> 来自此 IP 地址的请求数量异常。
> 
> 为了保护我们的用户，我们现在无法处理来自该 IP 地址的更多请求。
> 
> 我们会尽快恢复访问权限，因此请尽快重试。

我这样做是为了研究工作。我是否违反了某些 SO 规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:04:47.503

消息很简单：您正在截屏 StackOverflow，而 SO 不希望您这样做。

如果您仍然想爬取该站点，那么只需对您的访问进行速率限制，也许每 100 毫秒甚至 250 毫秒发出一次请求，而不是一次 500 次（我假设您正在这样做）。

# wpf - Umbraco 如何从 winform 应用程序获取节点

> ID：14909077
> 
> 赞同：0
> 
> 时间：2013-02-16T10:02:54.713
> 
> 标签：wpf, winforms, umbraco

如何在 winforms 应用程序中将节点从 umbraco 中取出？基本上，我想使用 umbraco 作为数据输入，并让一个 winforms/wpf 应用程序可视化存储在 umbraco 中的数据。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:03:55.930

是的，您可以使用 Umbraco .NET API 来做到这一点。只需包含正确的 Umbraco dll 作为参考，然后您就可以加载内容或媒体并使用 API 对其进行操作。

在 Our Umbraco 的文档部分中查看有关 API 的更多信息：

[http://our.umbraco.org/documentation/Reference/](http://our.umbraco.org/documentation/Reference/)

# cakephp - Cakephp 2 acl 不否认任何动作

> ID：14909079
> 
> 赞同：0
> 
> 时间：2013-02-16T10:03:05.210
> 
> 标签：cakephp, acl

我按照教程进行操作，没有收到任何错误，但 acl 允许所有用户执行所有操作。我使用 aclmanager 检查了所有权限是否正确显示。我添加了 parent::beforeFilter(); 在所有控制器中。我错过了什么吗？有人可以帮我解决这个问题吗？

这是我的 initDB 函数

```
public function initDB() {
$group = $this->User->Group;

$group->id = 1;
$this->Acl->allow($group, 'controllers');

$group->id = 2;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'controllers/Employees');

 $group->id = 3;
$this->Acl->deny($group, 'controllers');
//we add an exit to avoid an ugly "missing views" error message
echo "all done";
 } 
```

这是我在 appcontroller 中的 beforefilter 功能

```
function beforeFilter(){
$this->Auth->authorize = array(
    'Controller',
    'Actions' => array('actionPath' => 'controllers')
    );
$this->Auth->authenticate = array('Form' => array('fields' => array('username' =>          'username', 'password' => 'password')));   
 $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
$this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
$this->Auth->loginRedirect = array('controller' => 'employees', 'action' =>   'employee_list');
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:17:21.773

你确定你启用了acl组件吗？

检查您`AppController`的某个时间，例如：

```
public $components = array(
        'Acl',
        'Auth' => array(
            'authorize' => array(
                'Actions' => array('actionPath' => 'controllers')
            )
        ),
        'Session'
); 
```

# java - OpenCV Android 图像路径

> ID：14909081
> 
> 赞同：0
> 
> 时间：2013-02-16T10:03:42.297
> 
> 标签：java, android, opencv

我是 android 平台的新手，我正在尝试创建一个用于图像处理的 Android 应用程序......所以我想将 openCV 与它集成。

我创建了一个事件 processImage，它应该调用一个简单的 openCV 库并执行高斯平滑。

```
 public void processImage(View v) {

try
{
IplImage image = cvLoadImage("IMG/res.jpg");
System.out.println(image.depth());//null pointer exception here

 if (image != null) 
 {
    cvSmooth(image, image, CV_GAUSSIAN, 10);
    cvSaveImage("IMG/res.jpg", image);
    cvReleaseImage(image);
  }
}
catch(Exception e)
{
    e.printStackTrace();
}

   ImageView portrait = (ImageView) findViewById(R.id.imageView1);
   portrait.setImageResource(R.drawable.abc);
} 
```

显然，一旦完成，我的意图是用 res.jpg 显示和做其他事情。

但是我在访问图像时看到了一个空指针异常。显然，Android 不允许我们像在独立应用程序中那样使用相对/绝对路径。

问题是......我如何才能访问此图像。

我想解决方案一定很简单。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:40:35.050

```
/sdcard/IMG/res.jpeg 
```

用于写入 SD 卡。您需要在 AndroidManifest.xml 上设置 sd-card 写入权限，例如

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# asp.net - 与 QuickBooks 集成的 asp.net 应用程序

> ID：14909083
> 
> 赞同：1
> 
> 时间：2013-02-16T10:04:12.097
> 
> 标签：asp.net, web, quickbooks, connector

我正在使用 QuickBooks 桌面版，我创建了一个 asp.net 应用程序来将其与 QuickBooks 集成，但现在我需要知道如何使用 Web 连接器来集成它们。我需要创建一个 asp.net webservice 应用程序吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:49:51.250

QuickBooks Web 连接器本质上是一个 SOAP Web 服务客户端，它与 QuickBooks 一起安装并轮询您的网站，询问“您有什么需要我做的？”。您向它提供 XML 请求（例如`<CustomerAdd>...</CustomerAdd>`，它中继到 QuickBooks。QuickBooks 处理这些请求并向您发送响应。

我们的[QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_web_connector)上有一个很好的概述（和一些技术细节） 。

您可能应该从下载[QuickBooks SDK](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/010_qb)开始。SDK 在此目录中包含一些对您有帮助的示例：

```
C:\Program Files (x86)\Intuit\IDN\QBSDK12.0\samples\qbdt\c-sharp\qbXML\WCWebService 
```

布局好 SOAP Web 服务的基本结构后，一切都非常简单。每当 Web 连接器连接时，您只需向其提供 qbXML 请求。以下是一些示例 qbXML 请求，供您查看： - [QuickBooks qbXML 用于添加客户](http://www.consolibyte.com/docs/index.php/QbXML_for_Adding_a_Customer) - [QuickBooks qbXML 用于添加收到的付款](http://www.consolibyte.com/docs/index.php/QbXML_for_Adding_a_Received_Payment)

[可通过QuickBooks OSR](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)指南获得所有可用 qbXML 请求的完整参考。

# windows-phone-7 - 图像放置在触摸事件 WP8 上

> ID：14909085
> 
> 赞同：0
> 
> 时间：2013-02-16T10:04:17.687
> 
> 标签：windows-phone-7, windows-phone-8, multi-touch

我想用用户触摸图像放置在该位置的图像绘制路径，并假设用户移动手指图像放置在这些位置。通常在绘图应用程序中，用户在触摸时画一条线，但我想在触摸事件中绘制图像，如果有人在 Windows Phone 开发中遇到此类问题，请给我任何建议。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:24:02.817

我找到了一个比我刚刚发布的更好的例子。

直接从 MS 瞄准具

```
TouchCollection touchCollection = TouchPanel.GetState();
foreach (TouchLocation tl in touchCollection)
{
   if ((tl.State == TouchLocationState.Pressed)
        || (tl.State == TouchLocationState.Moved))
    {

    //Here is where you add your logic to add images

    }
} 
```

[http://msdn.microsoft.com/en-us/library/ff434208.aspx](http://msdn.microsoft.com/en-us/library/ff434208.aspx)

# php - 带有关联数组的 PHP 递归（菜单结构）

> ID：14909086
> 
> 赞同：0
> 
> 时间：2013-02-16T10:04:26.463
> 
> 标签：php, arrays, recursion, associative

我今天一直在用头撞墙。我有一个 mysql 表，其中包含具有递归父/子关系的菜单项列表。我需要创建一个与之匹配的关联数组。

这是我的代码，下面是对我的问题的解释。

# MySQL 数据库

```
CREATE TABLE IF NOT EXISTS `menus` (
  `sectionid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `parentid` int(10) unsigned NOT NULL DEFAULT '0',
  `name` varchar(128) NOT NULL DEFAULT '',
  PRIMARY KEY (`sectionid`)
);

INSERT INTO `menus` (`sectionid`, `parentid`, `name`) VALUES
(1, 0,'DOWNLOADS'),(4, 1,'Player Scenarios'),
(5, 1,'Co Op Scenarios'),(9, 1,'MAPS'); 
```

# PHP代码

```
function get_db_children($parentid) {

  $mysqli = mysqli_open();
  $sqlStr = "select sectionid as childid from menus where parentid=$parentid order by sectionid";
  $result = $mysqli->query($sqlStr);
  $mysqli->close();

  return $result;

}

function get_children(&$node) {

  foreach ($node as $key=>$value) {
    $result = get_db_children($key);
    while ($row = $result->fetch_assoc()) {
       $tmp = array($row['childid'] => array());
       $node[$key][$row['childid']]= get_children($tmp);
    }
  }
  return $node;
} 
```

============================================

上述函数是从我的主脚本中调用的，如下所示：

```
$categories[0] = array ();
get_children($categories);
print "Categories=".print_r($categories);
exit; 
```

===============

我的问题。

我的问题是返回数组的结构不是我想要的。

上面的代码返回：

```
Categories=
Array ( [0] => Array 
        ( [1] => Array 
          ( [1] => Array 
            ( [4] => Array 
              ( [4] => Array ( ) )
              [5] => Array 
              ( [5] => Array ( ) )
              [9] => Array 
              ( [9] => Array ( ) )
            )
          )
        )
      ) 
```

我想要的是：

```
Categories=
Array ( [0] => Array 
          ( [1] => Array 
            (
              ( [4] => Array ( ) )
              ( [5] => Array ( ) )
              ( [9] => Array ( ) )
            )
          )
      ) 
```

空数组表示没有孩子。

我不知道如何摆脱关键值的双重影响。:(

如果有人可以提供帮助，将不胜感激。

干杯，小睡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:30:17.537

稍微改变方法解决了我的问题。我没有通过引用传递`$categories`数组，而是传递父菜单项的 ID 并返回数组。

`get_db_children($parentid)`下面的代码使用与我的 OP 中给出的相同的 SQL 数据和 SQL 访问器函数。我确信这可以改进，但至少我得到了我的结果。

@Josh，谢谢您的意见。

PHP 函数

```
function get_twigs($nodeid) {

  $result = get_db_children($nodeid);
  if ($result->num_rows != 0) {
    while ($row = $result->fetch_assoc()) {
      $node[$row['childid']] = array();
      $node[$row['childid']] = get_twigs($row['childid']);
    }
  } else {
    $node=NULL; // or any other 'no children below me indicator.
  }
  return $node;
}

function get_branch($nodeid) {

  $node[$nodeid] = array();
  $node[$nodeid] = get_twigs($nodeid);
  return $node;
} 
```

PHP 调用者

```
$categories = get_branch(0); 
```

终于搞定了。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:15:56.887

您正在通过`$node`引用传递，因此`$node[$key][$row['childid']] = get_children($tmp);`您应该真正做而不是做

`$value[$row['childid']] = get_children($tmp)`

或者

`$node[$row['childid']] = get_children($temp)`

但是如果你选择第二个选项，你将不得不`$categories[0]`在第一次调用时传递`get_children`（这是你在进行重复调用时所做的）

## 更新：

我试着解释一下原因……

如您所见，第一个条目（0）没有重复。只有在第一次重复调用之后才是您的问题开始的地方，原因是您通过引用传入子数组，因此第二次 [作为示例] 当您调用var 实际上已经引用了嵌套`get_children`部分`$node`

```
array(
   0=>array(
      1=>array(/*this is what $node actually is the second time around*/
         /*when you say $node[$key][$row['childid']] what you are actually saying is assign the value to array[0][1][1][4] = array())*/
      )
   )
); 
```

我希望这有帮助。如果我能想出一种方法来解释它，面糊生病回来更新......

# php - php mysql select只匹配列

> ID：14909090
> 
> 赞同：0
> 
> 时间：2013-02-16T10:04:45.650
> 
> 标签：php, mysql, database

```
 Mysql Database-

         id | username | folder_name |
          1 | ashly    | Folder      |
          2 | ashly    |             |
          3 | ashly    |             |
          4 | ashly    | Folder      |
          5 | ashly    | Folder      |
          6 | ashly    | Folder 1    |
          7 | ashly    | Folder 2    |

           $sql = mysql_query("SELECT `id`, `username`, `title`, LEFT(`description`, 90) as `description`, `file`, `code`, `folder_name`, `type`, `size`, `date` FROM `files` WHERE `username` = '$userfile' AND `folder_name` > '' ORDER BY `id` DESC LIMIT 1, 5");

       while ($query_row = mysql_fetch_array($sql2)) {
            $filefolder = $query_row['folder_name'];
            $filetitle = $query_row['title'];           
            $filecode = $query_row['code'];
            $filedesc = $query_row['description'];
            $filefile = $query_row['file'];
            $filesize = $query_row['size'];
            $filedate = $query_row['date'];
            $filetype = $query_row['type']; 
```

// 这里我循环结果

```
 if (empty($filefolder) === false) {
    echo "" . $filefolder . "<div id='imageshowsearch'><div id='linkstyle'><strong><a href='http://localhost/edu/1111111111111/userdownload.php?code=". $filecode . " '><img src='files/thumbs/" . $filecode . "/" . $filefile . "' alt=" . $filetitle . ">" . $filetitle . "</strong></div></a></div>";

     //here print result 
            }
             } 
```

我不能`folder_name`只显示一次。文件夹中有 5 张图像。| 当我为mysql结果循环它时。

```
 Result:   

    folder        | folder         | folder         | folder 1      | folder 2
    here is image | here is image  | here is image  | here is image | here is image

   I wonna get this result:     

   folder          |
   here is image   | here is image   | here is image |

   folder 1        |
   here is image   |

   folder 2        |
   here is image   | 
```

我没有主意。我如何只显示一次文件夹名称，并在文件夹名称下显示来自某个文件夹的最多 5 张图像。只是我不会对每张图片重复文件夹名称。我必须将文件夹名称与文件夹图像与用户图像分组。我的问题只是这些文件夹名称重复...感谢我写的支持，因为网站不允许我发布我的问题'更多代码没有解释'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:41:11.860

您可以使用以下方式。希望它对你有用。

```
$sql = mysql_query("SELECT DISTINCT `folder_name` FROM `files` WHERE `username` = '$userfile' AND `folder_name` > ''");
while ($row = mysql_fetch_array($sql)) {
 $folder== $row['folder_name'];

 $sql2 = mysql_query("SELECT `id`, `username`, `title`, LEFT(`description`, 90) as `description`, `file`, `code`, `type`, `size`, `date` FROM `files` WHERE folder_name`='$folder' ORDER BY `id` DESC LIMIT 1, 5");

//Here you can echo $folder i.e, folder name and then all its image
       while ($query_row = mysql_fetch_array($sql2)) {
            $filetitle = $query_row['title'];           
            $filecode = $query_row['code'];
            $filedesc = $query_row['description'];
            $filefile = $query_row['file'];
            $filesize = $query_row['size'];
            $filedate = $query_row['date'];
            $filetype = $query_row['type'];
}

} 
```

祝你好运。

# foursquare - 一个应用程序每小时最多可以发出 5,000 个无用户请求

> ID：14909092
> 
> 赞同：1
> 
> 时间：2013-02-16T10:04:53.147
> 
> 标签：foursquare

这是否意味着每个客户端 ID 每小时 5000 或每个 IP 每小时 5000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:01:25.160

它不是每个IP！你可以自己检查一下

从终端：

```
curl -i https://api.foursquare.com/v2/venues/search?ll=40.7,-74\&client_id=   <client_id_1>\&client_secret=<client_secret_1>\&v=<YYYYMMDD> 
```

然后使用来自同一台机器（相同 IP）的另一个 client_id/secret：

```
curl -i https://api.foursquare.com/v2/venues/search?ll=40.7,-74\&client_id=<client_id_2>\&client_secret=<client_secret_2>\&v=<YYYYMMDD> 
```

现在查看两个标题中的 X-RateLimit-Limit 和 X-RateLimit-Remaining，您会发现它们没有共享相同的限制！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:47:29.237

是的，这意味着每个应用程序 clientId 每小时可以发出 5,000 个无用户请求。如果您每小时需要更多请求，请参阅 Foursquare 的[速率限制指南](https://developer.foursquare.com/overview/ratelimits)。

# android - 从 Main Activity 将项目添加到 SlidingMenu 上的 ListView

> ID：14909094
> 
> 赞同：1
> 
> 时间：2013-02-16T10:05:06.843
> 
> 标签：android, android-listview, slidingmenu

我想在我的应用程序（如 G+ 官方应用程序）中将 ListView 添加到slidingMenu，我创建布局，并使用此代码将其添加到主活动

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // set action bar title

    // configure sliding  menu
    SlidingMenu slidingMenu = new SlidingMenu(this);
    slidingMenu.setMode(SlidingMenu.LEFT);
    slidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    slidingMenu.attachToActivity(this, slidingMenu.SLIDING_CONTENT);
    slidingMenu.setBehindOffset(120);
    slidingMenu.setMenu(R.layout.sliding_menu);

} 
```

但我不知道如何从此活动中添加 ListView 项目！有谁能够帮我 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:26:06.473

好吧，如果您在 XML（在 R.layout.activity_main 中）中定义 ListView（和 SlidingMenu），然后再使用

```
ListViev lv=(ListView)findViewbyId(R.id.mylistview) 
```

其中 mylistview 是 XML 中 ListView 的 id。

您可以通过编程方式添加 ListView：

```
LinearLayout linearLayout = new LinearLayout(this);
ListView lv=new Listview();
linearLayout.addView(lv) 
```

我建议在 XML 中使用定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T18:52:21.470

查看您需要做的是使用为您的侧边栏布局创建一个视图

```
View v = getLayoutInflater().inflate(R.layout.sliding_menu, null); 
```

然后您可以使用此视图将您的 Listview 托管为

```
Listview lv = (ListView)v.findViewById(R.id.list); 
```

现在您可以像往常一样轻松地为您的列表视图设置适配器。您需要记住的一件事是，现在您不能使用**slidingMenu.setMenu(R.layout.sliding_menu)**，因为您的列表视图由View v 托管，将这一行更改为

```
slidingMenu.setMenu(v); 
```

并希望一切都会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T01:50:37.287

有个方法叫addHeadVIew，试试

# c# - 打开 DotNetNuke 链接弹出窗口

> ID：14909095
> 
> 赞同：4
> 
> 时间：2013-02-16T10:05:20.767
> 
> 标签：c#, asp.net, dotnetnuke, dotnetnuke-module

如何在弹出窗口而不是新页面中打开模块内容？

目前，我正在使用 GridView 中的链接，如下所示：

```
<asp:GridView ID="grdStudentAttendanceList" runat="server" AutoGenerateColumns="False" EnableViewState="false">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:TemplateField HeaderText="Surname" >
            <ItemTemplate>
                <a href='<%# DotNetNuke.Common.Globals.NavigateURL("AddOrUpdateStudent","StudentID=" + Eval("StudentID").ToString(),"mid=" + ModuleId) %>' class="">
                    <%# Eval("Surname").ToString()%>
                </a>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:35:30.983

我为我的问题找到了解决方案，而且非常简单。

只是传递`NavigateURL`给`dnnModal.show`这样的：

```
<asp:TemplateField HeaderText="Surname" >
    <ItemTemplate>
        <a href="javascript:dnnModal.show('<%#DotNetNuke.Common.Globals.NavigateURL("AddOrUpdateStudent","StudentID=" + Eval("StudentID").ToString(),"mid=" + ModuleId) + "?popUp=true" %>',false,550,950,true)" class="">
            <%# Eval("Surname").ToString()%>
        </a>
    </ItemTemplate>
</asp:TemplateField> 
```

***注意：**添加了`?popUp=true`URL 查询参数。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:21:54.823

查看我关于 DNN 中模态弹出窗口的博文

[http://www.dotnetnuke.com/Resources/Blogs/EntryId/3427/Using-dnnModal-show-in-your-modules-and-content.aspx](http://www.dotnetnuke.com/Resources/Blogs/EntryId/3427/Using-dnnModal-show-in-your-modules-and-content.aspx)

# android - MapView 显示黑屏

> ID：14909097
> 
> 赞同：0
> 
> 时间：2013-02-16T10:05:51.443
> 
> 标签：android

我正在我的应用程序中集成谷歌地图。当我在模拟器上编译和朗姆我的应用程序时，它显示黑屏。我添加了所需的权限并`user-library`在清单中添加了标签，但它仍然显示黑屏。这是我的代码

```
public class ActivityLiveMap extends MapActivity {
    private LocationManager locationManager;
    private Location location;
    private List<Overlay> overlayList;
    private GeoPoint mapPoint;
    private MapController controller;
    private MapView map;

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_map);
        init();
    }

    private void init() {
        map = (MapView) findViewById(R.id.map);
        map.setBuiltInZoomControls(true);
        map.setSatellite(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.locationmeter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

    <application
        android:allowBackup="true"
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.LocationMeter" >
        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name="com.example.locationmeter.ActivitySplash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".ActivityMenu" >
        </activity>
        <activity android:name=".ActivityCurrentLocation" >
        </activity>
        <activity android:name=".ActivityLiveMap"></activity>
    </application>

</manifest> 
```

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:25:27.207

你能确保你有：

```
- debug key
- internet permission
- internet enabled 
```

# php - Symfony2（学说）：添加不存在的行与 M:M 关系

> ID：14909098
> 
> 赞同：0
> 
> 时间：2013-02-16T10:06:04.567
> 
> 标签：php, symfony, doctrine-orm

我有两个实体 E1 和 E2 与 ManyToMany 关系和它的链接表。一切都很好，直到我尝试添加不存在的 E2 的 E1 元素。例如，E2 是标签实体。用户通过表单放置几个标签。如何在 E2 中添加不存在的标签，然后再将它们持久化到 E1？

**更新：**

好的，我已经根据@Axxiss 的回答更新了我的实体。它*确实会*自动保留新标签，但它也会再次保留旧标签。我想要的是，如果我有一个名为“tag1”的标签，则不应再次将其添加到标签表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:51:40.993

您需要`cascade`在 E1 内的标签字段中添加注释。

在 E1 中，您将拥有如下内容：

```
/**
 * @ORM\ManyToMany(targetEntity="Tag", cascade={"persist"})
 * @ORM\JoinTable(name="e1_has_tags",
 *      joinColumns={@ORM\JoinColumn(name="e1_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id")}
 *      )
 **/
private $tags; 
```

检查[传递持久性/级联操作](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

如果您只想添加一次标签，您有两种选择：

1.  在持久化实体之前在控制器上执行此操作
2.  直接在实体上做

在这两种情况下，您都需要通过标签名称进行查询，如果标签已经存在，请将其替换为找到的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:00:18.133

如果你想要唯一的标签，你需要在持久化它们之前检查它们是否存在。

# c++ - FindResource 在 exe 文件上给出错误 1813

> ID：14909101
> 
> 赞同：2
> 
> 时间：2013-02-16T10:06:45.503
> 
> 标签：c++, c, winapi, embedded-resource

过去 3 天我一直在尝试这个，但我仍然无法让它工作。WINAPI`FindResource`函数抛出错误 1813：这意味着找不到资源类型。我正在使用 Eclipse，所以没有 .RC 文件或 resource.h 文件，所以我已经加载了我的 exe 文件，`LoadLibraryA`然后使用了`HANDLE`in `FindResourceA`。这是我的代码：

```
HRSRC hRsrc;
HMODULE hExe;

/** Loading resource file in the program */
if (!(hExe = LoadLibraryA(TEXT(filename)))) {
    printf("Cannot load resource error: %lu \n", GetLastError());
    return 0;
}
printf("Resource file %s is loaded to the program \n", filename);

/** Finding resource */
if (!(hRsrc = FindResourceA(hExe, MAKEINTRESOURCE(10), "EXE"))) {
    printf("Cannot find resource error: %lu \n", GetLastError());
    return 0;
}
puts("Resource found"); 
```

现在，据我了解，这`MAKEINTRESOURCE(10)`让我们定义了一个自定义资源。这是正确的还是我只是弄错了？在资源类型中，我尝试给“EXE”“BIN”“Exehead”，`RT_RCDATA`但没有任何效果，它仍然给我和以前一样的错误。网络上的所有解决方案都带有`.RC`和`resource.h`文件`Visual Studio`，有什么可以与 eclipse 一起使用的吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:49:45.890

要从二进制文件加载特定资源，您需要知道资源的类型及其 ID。

如果其中之一或两者都不知道，您可以使用该功能`EnumResourceTypes()`和/或`EnumResourceNames()`找出答案。

`EnumResourceTypes()`可以在此处找到有关如何使用的示例：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms648008%28v=vs.85%29.aspx#_win32_Creating_a_Resource_List](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648008%28v=vs.85%29.aspx#_win32_Creating_a_Resource_List)

* * *

**更新：**

如果 MS 提供的资源编辑器不可用，此**免费**工具可能会有所帮助：[http](http://www.resedit.net/) ://www.resedit.net/我曾经使用过它并可以满足我的需要。无论如何，我不知道它的当前状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:53:33.527

错误是正确的。`"EXE"`您的文件中没有类型的资源。当您说您没有`.RC`文件时，您自己也是这么说的。资源是在`.RC`文件中定义的，如果你没有，那么你就没有资源。要添加`"EXE"`资源 ID 为 10 的类型资源，您需要创建一个`.RC`文件，将其添加到您的项目中，然后说

```
10 EXE "somefile" 
```

其中“somefile”是您希望将其内容用作资源数据的某个文件。

如果您的 IDE 不支持`.RC`文件，那么您将无法通过 IDE 添加资源。您将不得不以其他方式添加它们，例如通过后处理步骤。

但关键是您收到错误“找不到资源类型”，因为您没有做任何事情来创建该类型的资源。你期待什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-12T17:13:35.250

(*

请记住：当您开始一个新项目时...... Delphi 将 {$R *.res} 添加到您的 .dpr 文件中，以将它生成的 .res 文件链接到您的应用程序中。例如，如果您将项目保存为 MyProject.dpr，Delphi 将创建一个文件 MyProject.res，其中包含您在 Delphi 的项目选项中指定的应用程序图标和版本信息。如果没有此 .res 文件，您的 .exe 将没有图标或版本信息，您将获得 1813.[EG.: from GetFileVersionInfoSize( PChar( @sFileName[ 1 ] ), 0); ]

If you get a duplicate resource warning, you probably have another {$R} compiler directive elsewhere in your code that also links in MyProject.res. It could be a duplicate {$R *.res} in your .dpr file, or a {$R MyProject.res} in another .pas file. (Just) Delete the other compiler directive instead of the one that Delphi generates automatically, and your project will compile just fine. *)

# jquery - 上一篇关于隐藏元素

> ID：14909104
> 
> 赞同：1
> 
> 时间：2013-02-16T10:07:09.117
> 
> 标签：jquery, jquery-traversing

嗨，我有一个隐藏的 div，里面有其他 div

例子

```
<div style="display:none">
    <div id="o-1">...<div>
    <div>...<div>
    <div>...<div>
    <div id="o-2">...<div>
    <div>...<div>
    <div>...<div>
    <div id="o-3">...<div>
    <div>...<div>
    <div>...<div>
   </div> 
```

我正在尝试获取 div id="o-3" 的 prevAll ，其中 id 以 o 开头-在上面的示例中，o-3 的 prevAll 是 o-2 和 o-1

问题是因为包装器 div 是隐藏的，所以我可以得到 preAll

欢迎任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:19:33.387

问题不在于父元素设置为隐藏，元素仍在您的 DOM 中。

相反，一个问题是您的 HTML 有点混乱。您没有`<div>`正确关闭元素。

从您的代码：

```
<div>...<div> 
```

应该：

```
<div>...</div> 
```

然后，您可以使用它来获取具有以开头的 id 的先前兄弟姐妹`o-`：

```
$("#o-3").prevAll("[id^='o-']") 
```

[**活生生的例子**](http://jsfiddle.net/z5nHF/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:13:15.120

选择隐藏元素似乎没有任何问题。

[http://jsfiddle.net/U2YPB/2/](http://jsfiddle.net/U2YPB/2/)

```
$.each($("#ho3").prevAll(),function(idx,div) {
    log($(div).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T10:09:58.793

试试这个

```
$('div:third').prevAll(':hidden'); 
```

或者您可以直接使用

```
$("#o-3").prevAll("div[id^='o-']"); 
```

# python - 适用于 Python 的 Github API：PyGithub - 获取特定存储库的所有提交列表

> ID：14909110
> 
> 赞同：4
> 
> 时间：2013-02-16T10:07:47.003
> 
> 标签：python, git, version-control, github, repository

我正在开发一个脚本，它要求我获取特定存储库的所有提交的列表，以及提交的日期和时间。PyGithub API 中的提交类：

[https://github.com/jacquev6/PyGithub/blob/master/doc/ReferenceOfClasses.md#class-commit](https://github.com/jacquev6/PyGithub/blob/master/doc/ReferenceOfClasses.md#class-commit)

没有提交日期和提交时间的任何成员。关于如何使用 API 获取提交的日期和时间的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-06T14:50:39.900

回答有点晚了，不过你可以从Commit 的[GitCommit](http://jacquev6.net/PyGithub/v1/github_objects/GitAuthor.html#github.GitAuthor.GitAuthor)的[GitAuthor](http://jacquev6.net/PyGithub/v1/github_objects/GitCommit.html#github.GitCommit.GitCommit)那里得到信息。这将打印所有提交的日期：

```
for commit in commits:
    if commit.commit is not None:
        print commit.commit.author.date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:25:20.370

我想你需要打电话

```
commit.getStatuses() 
```

并且在每个 satsus 中都有属性**created_at**和**updated_at**

从这里：[https ://github.com/jacquev6/PyGithub/blob/master/doc/ReferenceOfClasses.md#class-commitstatus](https://github.com/jacquev6/PyGithub/blob/master/doc/ReferenceOfClasses.md#class-commitstatus)

类提交状态

属性：

*   created_at: datetime.datetime
*   创建者：命名用户
*   描述：字符串
*   id：整数
*   状态：字符串
*   目标网址：字符串
*   更新时间：datetime.datetime

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-16T03:08:28.797

```
 from github import Github

   gh = Github(base_url="", login_or_token="")

   repo = gh.get_repo(repo_name)

   #returned commits in a paginated list
   commits = repo.get_commits() 
```

# java - Java：删除字符串中的句号

> ID：14909112
> 
> 赞同：7
> 
> 时间：2013-02-16T10:08:05.007
> 
> 标签：java, replace

我想删除字符串中的所有句号（ . ）。

因此我尝试了: `inpt = inpt.replaceAll(".", "");`，但不是只删除句号，而是删除了字符串的全部内容。

是否可以只删除句号？谢谢您的回答！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-16T10:09:23.663

[`replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)将正则表达式作为参数，`.`在正则表达式中表示“任何字符”。

您可以[`replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)改用：

```
inpt = inpt.replace(".", ""); 
```

它将删除所有出现的`.`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T10:10:05.040

不要使用`replaceAll()`，使用`replace()`：

```
inpt = inpt.replace(".", ""); 
```

这是一个常见的误解，`replace()`它不会替换所有出现的事件，因为有一种`replaceAll()`方法，但实际上*两者都会*替换所有出现的事件。这两种方法之间的区别在于`replaceAll()`匹配正则表达式（正则表达式中的点表示“任何字符”，它解释了您遇到的情况），而`replace()`匹配文字字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-16T10:10:14.303

[`String#replaceAll(String, String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)需要一个正则表达式。点是匹配任何东西的正则表达式元字符。

采用

```
inpt = inpt.replace(".", ""); 
```

它还将替换您的每个点`inpt`，但将第一个参数视为文字序列，请参阅[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)。

如果您想坚持使用正则表达式，则必须转义点：

```
inpt = inpt.replaceAll("\\.", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T10:10:41.073

我认为你必须掩盖这个点

```
inpt = inpt.replaceAll("\\.", ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T10:12:39.787

`replaceAll`使用正则表达式，请使用以下内容：

```
inpt = inpt.replaceAll("\\.", "") 
```

# c++ - 32 位数字的十六进制表示

> ID：14909113
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:08:11.617
> 
> 标签：c++, c, string, floating-point

我有一个脚本，它生成两个随机的 32 位浮点数 a 和 b，并将它们除以输出 c。

我想将所有 3 个浮点数以十六进制格式存储为包含 8 个字符的字符串。

我在网上找到了一个聪明的方法：

[http://forums.devshed.com/c-programming-42/printing-a-float-as-a-hex-number-567826.html](http://forums.devshed.com/c-programming-42/printing-a-float-as-a-hex-number-567826.html)

这是我在 C++ 中实现他们的建议

```
 fileout << hex << *(int*)&a[i] << endl;
    fileout << hex << *(int*)&b[i] << endl;
    fileout << hex << *(int*)&c[i] << endl; 
```

这适用于大多数情况。但是，在某些情况下，字符串不是 8 个字符宽。有时它们只有一点点长。这是输出的示例：

```
 af1fe786
                    ffbbff0b
                    fffbff0b
                    7fbcbf00  <-I like it, but has zeros at the end 
                    77fefe77
                    7ffcbf00
                    fdad974d
                    f2fc7fef
                    4a2fff56
                    67de7744
                    fdf7711b
                    a9662905
                    cd7adf0   <-- problem
                    5f79ffc0
                    0         <--- problem
                    6ebbc784
                    cffffb83
                    de3bcacf
                    e7b3de77
                    ec7f660b
                    3ab44ae4
                    aefdef82
                    fffa9fd6
                    fd1ff7d2
                    62f4      <--why not "62f40000"
                    ebbf0fa6
                    ddd78b8d
                    4d62ebb3
                    ff5bbceb
                    3dfc3f61
                    ff800000 <- zeros at end, but still 8 bytes?
                    df35b371
                    e0ff7bf1
                    3db6115d
                    fbbfbccc
                    ddf69e06
                    5d470843
                    a3bdae71
                    fe3fff66
                    0         <--problem
                    979e5ba1
                    febbe3b9
                    0         <-problem
                    fdf73a80
                    efcf77a7
                    4d9887fd
                    cafdfb07
                    bf7f3f35
                    4afebadd
                    bffdee35
                    efb79f7f
                    fb1028c   <--problem 
```

我想要 8 个字符的表示。至于零的情况，我想将其转换为“00000000”。

但我真的对只有 4、5、6、7 个字符长的那些感到困惑。为什么有些数字最后填充为零而其他数字被截断？如果 int 是 32 位，为什么有时只显示一位？这是由于臭名昭著的“次常”数字吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T10:12:24.817

如果我正确理解您的要求，如果位数小于 8，您希望在十六进制表示的*左侧*添加零作为填充字符。

在这种情况下，您可以简单地使用[`std::setfill()`](http://en.cppreference.com/w/cpp/io/manip/setfill)流[`std::setw()`](http://en.cppreference.com/w/cpp/io/manip/setw)操纵器：

```
#include <iomanip> // Necessary for the setw and setfill

int n = ...;
std::cout << std::hex << std::setw(8) << std::setfill('0') << n; 
```

例如`n = 1024`，输出将是：

```
00000400 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:12:40.603

使用[`std::setw()`](http://www.cplusplus.com/reference/iomanip/setw/)和[`std::setfill()`](http://www.cplusplus.com/reference/iomanip/setfill/)：

```
fileout << hex << setw(8) << setfill('0') << *(int*)&a[i] << endl;
fileout << hex << setw(8) << setfill('0') << *(int*)&b[i] << endl;
fileout << hex << setw(8) << setfill('0') << *(int*)&c[i] << endl; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-16T10:12:36.667

忘记聪明（不过如此）。签出`setw`和`setfill`。

# c# - 对排序的 ListCollectionView/ObservableCollection 应用过滤器

> ID：14909118
> 
> 赞同：1
> 
> 时间：2013-02-16T10:09:03.847
> 
> 标签：c#, wpf, sorting, filter, listcollectionview

**我有的**

我有一个`UserControl`由 a`TextBox`和 a组成的`ListBox`。正如我们将在下面看到的，它通过自定义排序和过滤器绑定`ListBox`到a `ItemsSource`in `ObservableCollection`a 。该控件的目的是在源集合中仅显示包含. 为此，我在.`DataContext``ListCollectionView``ListBox``string``TextBox``ListCollectionView`

我有两个额外的限制。1，我的原始收藏没有按字母顺序排序，但显示的项目`ListBox`使用`ListCollectionView` `CustomSort`. 2，我必须只显示与`TextBox`. 我为此应用了一个过滤器`ListCollectionView`。

**期待**

假设我的收藏在 my 中定义为`DataContext`：

```
this.AllItems = new ObservableCollection<string>
{
    "Banana", 
    "Watermelon",
    "Peach",
    "Grape",
    "Apple",
    "Pineapple",
    "Cherry",
    "Durian",
    "Rambutan",
    "Strawberry",
    "Raspberry",
    "Lemon",
    "Orange",
    "Sugar cane",
    "Guava",
    "Tomato",
    "Coconut",
    "Melon",
    "Äpple",
    "Glaçon",
    "Etape",
    "Étape"
}; 
```

在我的输入中，`TextBox`我输入了字母“e”（所有比较都是不区分大小写的）。我希望`ListBox`显示以下 5 项（`CurrentUICulture`设置为 fr-FR）：

*   苹果
*   苹果
*   樱桃
*   胶带
*   胶带

因为它们是按字母顺序排序时包含字母“e”的前 5 个项目。但是，我在我的应用程序中得到以下项目：

*   苹果
*   葡萄
*   桃
*   菠萝
*   西瓜

因为它们是我收藏中包含字母“e”的前 5 个项目，**然后**按字母顺序排序。

**我的代码**

这是了解我所拥有的和我的问题的代码。它实际上只能使用以下内容的复制/粘贴来工作（注意命名空间和`CurrentUICulture`）。我正在使用 C# 4.0。

1) 的`MainWindow`

```
<Window x:Class="MyNamespace.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:local="clr-namespace:MyNamespace">
    <Window.Resources>
        <local:FoobarViewModel x:Key="Foobar"/>
    </Window.Resources>
    <StackPanel>
        <local:Foobar DataContext="{StaticResource Foobar}" AllItems="{Binding AllItems}"/>
    </StackPanel>
</Window> 
```

2）用作类`DataContext`

```
public class FoobarViewModel : INotifyPropertyChanged
{
    private ObservableCollection<string> allItems;
    public event PropertyChangedEventHandler PropertyChanged;

    public FoobarViewModel()
    {
        this.AllItems = new ObservableCollection<string>
        {
            "Banana", 
            "Watermelon",
            "Peach",
            "Grape",
            "Apple",
            "Pineapple",
            "Cherry",
            "Durian",
            "Rambutan",
            "Strawberry",
            "Raspberry",
            "Lemon",
            "Orange",
            "Sugar cane",
            "Guava",
            "Tomato",
            "Coconut",
            "Melon",
            "Äpple",
            "Glaçon",
            "Etape",
            "Étape"
        };
    }

    public ObservableCollection<string> AllItems
    {
        get
        {
            return this.allItems;
        }
        set
        {
            this.allItems = value;
            this.OnPropertyChanged("AllItems");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

3) 我的 XAML`UserControl`

```
<UserControl x:Class="MyNamespace.Foobar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <TextBox x:Name="textbox" Grid.Row="0"/>
        <ListBox x:Name="listbox" Grid.Row="1"/>
    </Grid>
</UserControl> 
```

4）最后，最重要的是我的`UserControl` `Foobar`.

```
public partial class Foobar : UserControl
{
    #region Fields
    public static readonly DependencyProperty AllItemsProperty = DependencyProperty.Register(
        "AllItems",
        typeof(IEnumerable<string>),
        typeof(Foobar),
        new PropertyMetadata(AllItemsChangedCallback));

    private const int MaxItems = 5;
    #endregion

    #region Constructors
    public Foobar()
    {
        InitializeComponent();

        textbox.KeyUp += TextboxKeyUp;
    }
    #endregion

    #region Properties
    public IEnumerable<string> AllItems
    {
        get { return (IEnumerable<string>)this.GetValue(AllItemsProperty); }
        set { this.SetValue(AllItemsProperty, value); }
    }
    #endregion

    #region Methods
    private void TextboxKeyUp(object sender, KeyEventArgs e)
    {
        TextBox localTextBox = sender as TextBox;
        if (localTextBox != null)
        {
            var items = ((ListCollectionView)listbox.ItemsSource).SourceCollection;

            if (items.Cast<string>().Any(x => x.ToLower(CultureInfo.CurrentUICulture).Contains(localTextBox.Text.ToLower(CultureInfo.CurrentUICulture))))
            {
                this.ApplyFilter();
                listbox.Visibility = Visibility.Visible;
            }
            else
            {
                listbox.Visibility = Visibility.Collapsed;
            }
        }
    }

    private static void AllItemsChangedCallback(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        Foobar control = sender as Foobar;
        if (control != null)
        {
            List<string> source = new List<string>((IEnumerable<string>)e.NewValue);

            ListCollectionView view = (ListCollectionView)CollectionViewSource.GetDefaultView(source);
            view.CustomSort = new CustomSort();
            control.listbox.ItemsSource = view;
            control.ApplyFilter();
        }
    }

    private void ApplyFilter()
    {
        ListCollectionView view = (ListCollectionView)listbox.ItemsSource;

        int index = 0;
        view.Filter = x =>
        {
            bool result = x.ToString().ToLower(CultureInfo.CurrentUICulture).Contains(textbox.Text.ToLower(CultureInfo.CurrentUICulture));
            if (result)
            {
                index++;
            }

            return index <= MaxItems && result;
        };
    }
    #endregion

    private class CustomSort : IComparer
    {
        public int Compare(object x, object y)
        {
            return String.Compare(x.ToString(), y.ToString(), CultureInfo.CurrentUICulture, CompareOptions.IgnoreCase);
        }
    }
} 
```

整个代码按预期工作，除了在`ApplyFilter`方法中完成的过滤。基本上，这个方法只是检查集合中的每一个项目，`TextBox`如果没有超过返回的最大项目数，则该项目将包含在过滤器中。当我调试这个方法时，我可以看到项目是按集合的原始顺序浏览的，而不是按排序顺序浏览的，尽管过滤器似乎是`ListCollectionView`在`ObservableCollection<string>`.

似乎首先应用过滤器，然后是排序。我希望先应用排序，然后再应用过滤。

**我的问题**

如何将过滤器应用于已排序`ListCollectionView`而不是原始未排序集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:23:11.743

为什么不在创建集合视图之前创建一个泛型[`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)并使用扩展方法。[`Enumerable.OrderBy<TSource, TKey>(IEnumerable<TSource>, Func<TSource, TKey>, IComparer<TKey>)`](http://msdn.microsoft.com/en-us/library/bb549422.aspx)

所以你最终会得到类似的东西：

```
private static void AllItemsChangedCallback(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    Foobar control = sender as Foobar;
    if (control != null)
    {
        var newEnumerable = (IEnumerable<string>)e.NewValue;
        var sorted = newEnumerable.OrderBy(s => s, new CustomSort());
        var source = new List<string>(sorted);

        var view = (ListCollectionView)CollectionViewSource.GetDefaultView(source);
        control.listbox.ItemsSource = view;
        control.ApplyFilter();
    }
}

private class CustomSort : IComparer<string>
{
    public int Compare(string x, string y)
    {
        return String.Compare(x, y, CultureInfo.CurrentUICulture, CompareOptions.IgnoreCase);
    }
} 
```

然后您的集合视图已经排序并且可以应用过滤。

# search-engine - 如何重写 seo 的页面 url？

> ID：14909125
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:09:53.910
> 
> 标签：search-engine

如何重写 seo 的页面 url？`example.com/3`优于`example.com/?page=3`? _

我希望搜索引擎记录我的产品列表页面的更多页面，那么哪个url更好？在网址中包含产品名称是否很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:13:56.313

您需要将此文本放入`.htaccess`：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/$ /?page=$1' 
```

# javascript - JavaScript 中对象的添加是如何进行的？“引擎盖下”发生了什么？

> ID：14909127
> 
> 赞同：0
> 
> 时间：2013-02-16T10:09:55.607
> 
> 标签：javascript

最近我遇到了一段有趣的 JavaScript 片段。

```
 {} + [] = 0 
```

糟糕，结果为 0。如何添加对象？幕后发生了什么？有人有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:56:22.627

{} 等于 new Object() 并且 [] 等于 new Array() 但这是用于声明。当我添加 {} + [] 时，我得到字符串“[object object]”并且长度等于 15.Aslo 我正在使用 chrome。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:27:29.687

如果你使用chrome来执行代码，如果是，V8会在后台动态创建隐藏类[v8](https://developers.google.com/v8/design?hl=en)

# javascript - JavaScript 错误？

> ID：14909132
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:10:20.700
> 
> 标签：javascript, jsp

请告诉我以下有什么问题？

如果条件为假，我将收到一条警报消息，如果条件为真，则没有任何反应。

```
<script type="text/javascript">
    function validcheck(){
        var CCode = document.getElementsByName('CustCode')[0].value;
        var CodeLenth = 4;
        var Actual = CCode.length;
        if (Actual == CodeLenth)
        {
                         alert('Code Ok');      
                         document.getElementById('CustName').value = CCode;
        }
        else
        {
            alert('Code must be 4 Chars');
            }

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:18:29.313

```
document.getElementById('CustName').innerHTML = CCode; 
```

`.value`用于表单元素，例如输入。`.innerHTML`用于块、内联和其他元素，例如 div、span 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:12:59.817

> 如果是真的，什么都不会发生。

好吧，实际上如果条件为真，这里就是将执行的代码行：

```
document.getElementById('CustName').value = CCode; 
```

这行代码尝试在您的 DOM 中查找一个元素`id="CustName"`并尝试设置它的值。如果在您的 DOM 中找不到此类元素，`document.getElementById('CustName')`则将返回`null`，当您尝试调用`.value`它时，您将收到错误消息。因此，并非完全没有任何事情发生。你可能遇到了错误。您查看过您的 javascript 控制台吗？

# sql - 为 SQL Server 中的所有数据库添加表

> ID：14909137
> 
> 赞同：0
> 
> 时间：2013-02-16T10:10:45.940
> 
> 标签：sql, sql-server, sql-server-2008

是否可以在该实例中的所有数据库都可以访问它的地方添加一个表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:46:25.667

您可以创建“主”数据库并使用来自该 SQL Server 实例中任何其他数据库的 SQL 查询来访问它。这只是用户权限的问题。`table_or_view_name`is 的完整语法`database.schema.object_name`。

```
SELECT * FROM mytable AS t
INNER JOIN Main.dbo.SharedTable AS s ON t.Id=s.Id
.... 
```

还检查文档 - [FROM (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177634.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:46:04.700

**编辑：我添加了第二个解决方案。**

**第一个解决方案**您可以尝试使用未记录的系统过程[sp_msforeachdb](http://weblogs.sqlteam.com/joew/archive/2008/08/27/60700.aspx)：

```
EXEC sp_msforeachdb @command1=N'
USE ?;
IF ''?'' NOT IN (''master'',''model'',''tempdb'',''msdb'',''ReportServer'',''ReportServerTempDB'')
    BEGIN
    CREATE TABLE CocoJamboTable (
        ID INT IDENTITY PRIMARY KEY,
        FirstName NVARCHAR(50) NOT NULL,
        LastName NVARCHAR(50) NOT NULL
    );
END
';

EXEC sp_msforeachdb @command1=N'
USE ?;
IF ''?'' NOT IN (''master'',''model'',''tempdb'',''msdb'',''ReportServer'',''ReportServerTempDB'')
BEGIN
    SELECT  DB_NAME() AS DbName, name AS TableName, object_id FROM ?.sys.tables 
    WHERE   name=''CocoJamboTable''
END
'; 
```

**第二种解决方案**您可以生成一个包含所有语句的`T-SQL`脚本：`CREATE TABLE`

```
SET NOCOUNT ON;

PRINT 'BEGIN TRAN;'
/*
SELECT  
    'USE ' 
    + QUOTENAME(db.name) 
    + ';'
    + '
    CREATE TABLE CocoJamboTable (
        ID INT IDENTITY PRIMARY KEY,
        FirstName NVARCHAR(50) NOT NULL,
        LastName NVARCHAR(50) NOT NULL
    );'
    + CHAR(13)
*/
SELECT  
    CASE 
        WHEN db.name IN ('master','model','tempdb','msdb','ReportServer','ReportServerTempDB','ASPNETDB')
            THEN '-- Explicit skipping: '   + QUOTENAME(db.name)
        WHEN db.state <> 0 
            THEN '-- Implicit skipping (not online): '  + QUOTENAME(db.name)
        WHEN db.is_read_only=1
            THEN '-- Implicit skipping (read only): '   + QUOTENAME(db.name)                
        --WHEN other filter
        --  THEN '-- Implicit skipping (my filter): '   + QUOTENAME(db.name)                
        ELSE 
            'CREATE TABLE ' + QUOTENAME(db.name) + '.dbo.CocoJamboTable (
                ID INT IDENTITY PRIMARY KEY,
                FirstName NVARCHAR(50) NOT NULL,
                LastName NVARCHAR(50) NOT NULL
            );'
        END 
        + CHAR(13)
FROM    sys.databases db
ORDER BY db.name;

PRINT 'ROLLBACK;'
PRINT '-- COMMIT;' 
```

然后，按 Ctrl+T（文本结果）、F5（执行）、F6（跳转到文本结果面板）、Ctrl+A（全选）、Ctrl+C（复制）、Ctrl+N（新窗口）、Ctrl+ V（粘贴——粘贴上一步生成的脚本），F5（执行）。

示例`T-SQL`脚本：

```
BEGIN TRAN;

CREATE TABLE [Comisioane].dbo.CocoJamboTable (
                ID INT IDENTITY PRIMARY KEY,
                FirstName NVARCHAR(50) NOT NULL,
                LastName NVARCHAR(50) NOT NULL
            );

-- Implicit skipping (read only): [Credite]

-- Explicit skipping: [master]

-- Explicit skipping: [model]

-- Explicit skipping: [msdb]

-- Explicit skipping: [ReportServer]

-- Explicit skipping: [ReportServerTempDB]

CREATE TABLE [SIMUR4].dbo.CocoJamboTable (
                ID INT IDENTITY PRIMARY KEY,
                FirstName NVARCHAR(50) NOT NULL,
                LastName NVARCHAR(50) NOT NULL
            );

ROLLBACK;
-- COMMIT; 
```

# java - 如何使用自定义名称和信息创建 MYSQL 备份

> ID：14909138
> 
> 赞同：1
> 
> 时间：2013-02-16T10:10:47.470
> 
> 标签：java, mysql, backup

我需要做一个mysql的数据库备份，但它应该具有某些功能。备份应在 java swing 中单击按钮执行。

路径：路径应该由我声明它的保存位置（例如 c://backup），但是如果我将我的 java 的 jar 文件提供给其他一些用户，那么路径应该没有保存问题，哪个路径最好用呢？

名称：名称将由 3 个字符串组成，一个是基本字符串，另一个是日期时间格式字符串，然后是第三个字符串。（例如 FileName-2012-02-12 09:00:00-Name）。

我怎样才能做到这一点？有人可以指导我吗

我尝试使用 mysqldump 进行编码，但仍然无法完成。

```
String dbName = "dth";
        String dbUser = "root";
        String dbPass = "root";

        String executeCmd = "";
        executeCmd = "mysqldump -u " + dbUser + " -p" + dbPass + " " + dbName + " -r C:\\backup.sql";

        Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();
        if (processComplete == 0) {
            System.out.println("Backup taken successfully");
        } else {
            System.out.println("Could not take mysql backup");
        }

    } catch (Exception e) {
        System.out.println(e.getMessage());
    } 
```

我尝试了上面的代码，但我无法完成它，一直给我

> CreateProcess error=2, 系统找不到文件指定错误。

我已经通过在该位置创建一个 .sql 文件来尝试它，但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:15:11.793

我会为此使用 mysqldump 命令。也许您甚至可以从您正在编写的任何程序中调用它。语法很简单：

`mysqldump -u <user> -h <host> -p<password> <dbname> > <filename>`

这只会将整个数据库作为 sql 脚本放入该文件中。

# javascript - 使用 JS 从 icalendar 文件中读取参数

> ID：14909139
> 
> 赞同：0
> 
> 时间：2013-02-16T10:10:55.100
> 
> 标签：javascript, regex, icalendar

我想用 JavaScript 从 iCalendar 文件中读取几个参数。

文件输入如下所示：

> 开始：事件 DTSTART：20121127T190000Z DTEND：20121127T210000Z DTSTAMP：20121130T185808Z UID：q4sbrtajjol1hlpiijpho5jac0@google.com 创建：20121102T191519Z 描述：1。德甲\, 14\. Spieltag \n\nhttp://www.fussball-spielplan. 信息最后修改：20121127T211459Z 位置：德国商业银行竞技场\，法兰克福 序列：10 状态：确认摘要：法兰克福法兰克福 - 1\. FSV 美因茨 05 (1:3) 运输：透明 结束：事件

参数标签为：

```
DTSTART:
DTEND:
DTSTAMP:
UID:
CREATED:
DESCRIPTION:
LAST-MODIFIED:
LOCATION:
STATUS:
SUMMARY:
TRANSP: 
```

我想读取这些参数背后的值。值的长度主要是可变的。

使用 a`RegExp`非常困难，因为我目前不知道将什么设置为分隔符。 `"\n"`不起作用，因为所有文本部分都用空格分隔。但是如果我使用空格分隔符`"\s"`，它将在每个单词之后分开，这不是想要的结果，尤其是对于`DESCRIPTION:`包含较长文本的参数。

我的源代码目前看起来像这样：

```
file_reader.onload = function (evt) {
document.getElementById("filedrag").textContent = evt.target.result;

Output(
    "<p>File information: <strong>" + file.name +
    "</strong> type: <strong>" + file.type +
    "</strong> size: <strong>" + file.size +
    "</strong> bytes</p>");

var regexp = new RegExp("/DTSTART:(.*?)\s/", "g"); 
var file_content = evt.target.result;
var match, matches = [];

while ((match = regexp.exec(file_content)) != null) {
    matches.push(match.index);
}

alert(matches);
} 
```

任何想法，我怎样才能实现我的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:11:03.293

在您的代码中，您有

```
var regexp = new RegExp("/DTSTART:(.*?)\s/", "g"); 
```

`/`但是在将字符串传递给构造函数时不需要正则表达式分隔符`RegExp`- 它将被解释为要匹配的字符。此外，作为一个字符串，任何特殊的正则表达式字符都需要进行双重转义，所以`\s`应该是`\\s`.

这是获取每个指定标签的值的一种方法：

```
var match,
    matches = [],
    tags = 'DTSTART|DTEND|DTSTAMP|UID|CREATED|DESCRIPTION|' +
           'LAST-MODIFIED|LOCATION|STATUS|SUMMARY|TRANSP',
    regexp = new RegExp( '(?:' +  tags + '):([\\s\\S]*?)(?=\\s+(?:' +
                                  tags + '|SEQUENCE|END):)', 'g' );   

while ( match = regexp.exec( file_content ) ) {
    matches.push( match[1] );
} 
```

如果要检索每个标签：值对，请更改`match[1]`为`match[0]`.

以上假设每个标签前至少有一个空格或换行符。
它还假设空格后跟标签名称后跟 a`:`不会出现在任何标签的值中。

`[\\s\\S]`用于代替，`.`以便换行符可以包含在标记的值中。

上面没有捕获`SEQUENCE`标签的值，因为它没有在列表中指定。
如果要捕获它，只需将其添加到并`tags`从中删除即可。`regexp``'|SEQUENCE|END):)'``'|END):)'`

或者：

```
var m,
    params = {},
    rex = /([A-Z-]+):([\s\S]*?)(?=\s+[A-Z-]+:|$)/g;   

while ( m = rex.exec( file_content ) ) {
    params[ m[1] ] = m[2];
}

console.log( params["DTSTART"] );    // 20121127T190000Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:46:00.393

```
var params={};
fileContent.replace(/([\w-]+):([^:]+)\s/g,function($0,$1,$2){params[$1]=$2;}); 
```

上面的正则表达式假设：

*   您的参数是单个单词（没有空格），后跟一个冒号`([\w-]+):`
*   值不包含冒号`([^:]+)`

如果您的值（例如说明文本）可以包含冒号，那么您需要更具体地了解参数（参见@MikeM 的答案）。

现场演示：http: [//jsfiddle.net/zhsLJ/](http://jsfiddle.net/zhsLJ/)

# python - python os.path.walk 无法打开文件

> ID：14909146
> 
> 赞同：0
> 
> 时间：2013-02-16T10:12:33.607
> 
> 标签：python

```
import os
from os.path import splitext,basename
import sys
from lxml import etree

#clean out old files
def cleanBrds(args, dirname,files):
    print "checking "+dirname
    for file in files:
        if file.endswith("_pyclean.brd"):
            if os.path.exists(file):
                print "removing "+file
                os.remove(file)

#prep files
def sanBrds(args, dirname,files):
    print "checking "+dirname
    for file in files:
        if file.endswith(".brd"):
            print "found "+file
            newfile = splitext(basename(file))[0]+"_pyclean.brd"
            tree=etree.parse(file)
            for elem in tree.xpath('//signal'):
                elem.getparent().remove(elem)
            f=open(newfile,'w')
            f.write(etree.tostring(tree))
            f.close();

base_dir="."
os.path.walk(base_dir,cleanBrds,None)
os.path.walk(base_dir,sanBrds,None) 
```

> ```
> # python prepbrd.py
> checking .
> checking ./naut
> checking .
> found erct.brd
> checking ./naut
> found nautctrl.brd
> Traceback (most recent call last):
>   File "prepbrd.py", line 43, in <module>
>     os.path.walk(base_dir,sanBrds,None)
>   File "/usr/lib/python2.6/posixpath.py", line 236, in walk
>     walk(name, func, arg)
>   File "/usr/lib/python2.6/posixpath.py", line 228, in walk
>     func(arg, top, names)
>   File "prepbrd.py", line 22, in sanBrds
>     tree=etree.parse(file)
>   File "lxml.etree.pyx", line 2706, in lxml.etree.parse (src/lxml/lxml.etree.c:49958)
>   File "parser.pxi", line 1500, in lxml.etree._parseDocument (src/lxml/lxml.etree.c:71797)
>   File "parser.pxi", line 1529, in lxml.etree._parseDocumentFromURL (src/lxml/lxml.etree.c:72080)
>   File "parser.pxi", line 1429, in lxml.etree._parseDocFromFile (src/lxml/lxml.etree.c:71175)
>   File "parser.pxi", line 975, in lxml.etree._BaseParser._parseDocFromFile (src/lxml/lxml.etree.c:68173)
>   File "parser.pxi", line 539, in lxml.etree._ParserContext._handleParseResultDoc 
> ```
> 
> (src/lxml/lxml.etree.c:64257) 文件“parser.pxi”，第 625 行，在 lxml.etree._handleParseResult (src/lxml/lxml.etree.c:65178) 文件“parser.pxi”，行563，在 lxml.etree._raiseParseError (src/lxml/lxml.etree.c:64493) IOError: 读取文件 'nautctrl.brd' 时出错: 无法加载外部实体 "nautctrl.brd"

我对此很陌生，但似乎我可能没有将参数正确地从 os.path.walk 传递到其他函数。我想先删除所有以 _pyclean.brd 结尾的文件，然后对剩余的 .brd 文件（即 xml）进行操作。这些函数在平面目录中工作正常，但递归地我得到上述错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:29:00.310

中的文件名`files`是短名称。您想使用可以构建的完整路径`os.path.join`：

```
def sanBrds(args, dirname, files):
    print "checking ", dirname
    for file in files:
        fullpath = os.path.join(dirname, file)
        if fullpath.endswith(".brd"):
            print "found ", file
            newfile = splitext(basename(fullpath))[0] + "_pyclean.brd"
            tree = etree.parse(fullpath)
            # ... 
```

# json - 为什么这个有效的 JSON 字符串无效？

> ID：14909147
> 
> 赞同：1
> 
> 时间：2013-02-16T10:12:36.190
> 
> 标签：json

我的 Ajax-Request 确实返回了这个结果（通常是一个有效的 JSON 字符串）：

```
{"status":"ERROR","message":"Errore: Ti prego di inserire la domanda!"} 
```

这是响应标头：

```
Connection:Keep-Alive
Content-Length:80
Content-Type:application/json; charset=utf-8
Date:Sat, 16 Feb 2013 10:02:18 GMT
Keep-Alive:timeout=5, max=97
Server:Apache/2.2.21 (Win32) PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By:PHP/5.3.8 
```

当我直接将 JSON 字符串从浏览器控制台复制/粘贴到像[http://jsonlint.com](http://jsonlint.com)这样的 JSON 解析器时，它会导致“意外令牌”。为什么？

我还通过在文本编辑器中重写相同的字符串来测试它——当然这个结果是“有效的”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:15:08.350

正如您所说，您引用的是有效的 JSON。我希望您那里有一个或多个“不可见”字符导致问题。（它/它们不存在于您的问题中，复制和粘贴会给出“有效”结果。）当我们看到这个问题时，通常就是这样。

`Context-Length`标题证实了这一点。它说内容的长度是 80，但您的 JSON 中只有 71 个字符，在 UTF-8 中没有一个是多字节字符。所以我倾向于怀疑无效的不可见字符，可能在响应的开头或结尾。[如果将导致http://jsonlint.com](http://jsonlint.com)上出现问题的相同字符串粘贴到基本文本编辑器中，您应该能够找到它们；通常它们会显示为有趣的符号。

# python - 在 django 模型的 init 方法中访问父字段

> ID：14909152
> 
> 赞同：5
> 
> 时间：2013-02-16T10:12:50.483
> 
> 标签：python, django, inheritance, django-models

我想从该模型的 init 函数中访问模型的继承字段 -

```
class Parent(models.Model):
    parent_field = models.TextField(default="parent text")

    class Meta:
        abstract = True

class Child(Parent):

    def __init__(self, *args, **kwargs):
        super(Child, self).__init__(*args, **kwargs)
        self.parent_field.default="child text" 
```

但是，当我尝试初始化 Child 对象时`self.parent_field`（在上面的代码中），它已经是 unicode 对象而不是字段对象。

我知道我不应该[覆盖 fields](https://docs.djangoproject.com/en/1.4/topics/db/models/#field-name-hiding-is-not-permitted)。我想我需要覆盖元类中的某些内容。有没有办法做到这一点？还是我只是在找麻烦？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T15:29:36.600

您将模型数据与模型元数据混淆了。字段属于元数据。它们用于加载和保存数据。相反，模型的属性始终是数据。这就是为什么`self.parent_field`是一个 unicode 对象。要访问字段对象，您需要访问模型的元数据，即`self._meta`对象（这也是所有内容所在的地方`class Meta`）。字段位于 中`self._meta.fields`，它是`django.models.Field`为该类定义的对象列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-20T09:47:46.917

使用`_meta.get_field`如下：

```
class Child(Parent)
    def __init__(self, *args, **kwargs):
        super(Child, self).__init__(*args, **kwargs)
        self._meta.get_field('parent_field').default="child text" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T16:35:37.237

好的，我的测试和工作代码 -

```
class Parent(models.Model):
    parent_field = models.TextField(default="parent default")

    class Meta:
        abstract = True

class Child(Parent):

    def __init__(self, *args, **kwargs):
        for f in self._meta.fields:
            if f.attname == "parent_field":
                f.default = "child default"
        super(Child, self).__init__(*args, **kwargs) 
```

感谢 mderk。

# php - 基于 MVC 的 Web 应用程序中的全局日志记录方法

> ID：14909158
> 
> 赞同：1
> 
> 时间：2013-02-16T10:13:38.857
> 
> 标签：php, model-view-controller, model, controller

我正在创建一个管理/CRM 系统。

我的 libs 文件夹中有一个名为 Util 的类，其中包含一些静态函数。

我想创建一个静态函数来记录系统中任何地方的用户操作，即

```
Util::log($userId, $action) ; 
```

我想知道的一点是我应该如何将这些数据传递到我的数据库，因为我需要实例化我的数据库类，该类包含在我的 libs 文件夹中名为 Model 的类中。

最顺利的方法是什么？

简单地在我的控制器文件夹中创建一个日志类并让它与自己的 logModel 类以与我所有其他非 lib 控制器相同的方式接口会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:54:37.710

除了有一个静态方法可以让你从任何地方调用你的日志，我认为如果日志表在数据库中，它是模型的一部分，所以应用程序必须声明一个日志类，它将应用程序中的日志实例和 logModel 映射到管理这些实例。

我想静态方法必须只包含这几行代码

```
$l = new Log();
$l->setUserId($userId);
$l->setAction($action);
$lm = new logModel();
$lm->save($l); 
```

所以拥有它的用处就是不要在应用程序的所有部分重复上述代码。

# c++ - 清除范围（将范围设置为零）惰性段树修改

> ID：14909159
> 
> 赞同：0
> 
> 时间：2013-02-16T10:13:47.407
> 
> 标签：c++, algorithm, data-structures, implementation, segment-tree

我想在下面的链接中将一个函数添加到延迟传播实现中，将范围设置为 0。目前有一个 update_tree 函数可以增加一个范围，但我不知道如何修改它以便它将在 O(log(N)) 时间内将范围懒惰地设置为零。

[http://se7so.blogspot.com.au/2012/12/segment-trees-and-lazy-propagation.html](http://se7so.blogspot.com.au/2012/12/segment-trees-and-lazy-propagation.html)

我正在考虑在每个节点上使用“延迟清除”标志，但我怎么知道先清除然后延迟添加或延迟添加然后清除（这会很清楚）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:45:57.820

在每个包含要处理的操作的节点上使用队列而不是标志，只要您使用 FIFO 数据结构，您就可以确保它们以正确的顺序完成。除非我错过了这个问题的重点。

# python - 如何按照python中列表的顺序对dict进行排序

> ID：14909162
> 
> 赞同：2
> 
> 时间：2013-02-16T10:14:02.967
> 
> 标签：python, list, sorting, dictionary

例如 a 是一个 dict, `a = {1:2,2:3,3:4}`, 和`b= [3,1]`

我想排序`a`得到一个元组列表，如果键 in `a`，`b`则按 的顺序对它们进行排序`b`，否则将它们放在元组列表的末尾。

我这样做：

```
sorted(a.items(), key = lambda (k, v): b.index(k) if k in b else a.keys().index(k)) 
```

但是，我认为这是错误的。

所以我可以用python来做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:24:07.720

尝试这个：

```
import sys
sorted(a.items(), key = lambda (k, v): b.index(k) if k in b else sys.maxint) 
```

对于不在 中的键`b`，我们返回一个非常大的值，将它们放在排序结果的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:35:23.467

处理特殊情况的一个好方法是使用元组作为排序键

```
>>> a = {1: 2, 2: 3, 3: 4}
>>> b= [3, 1]
>>> sorted(a.items(), key=lambda (k,v):(0, b.index(k)) if k in b else (1,))
[(3, 4), (1, 2), (2, 3)] 
```

如果 b 很长，最好创建一个 dict 来加速索引查找

```
>>> b_dict = {k:v for v, k in enumerate(b)}
>>> sorted(a.items(), key=lambda (k,v):(k not in b_dict, b_dict.get(k)))
[(3, 4), (1, 2), (2, 3)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:33:06.407

我认为这可以满足您的要求：

```
a = {1:2,2:3,3:4}
b = [3,1]

print ([(k,a[k]) for k in b if k in a] +
       [(k,a[k]) for k in a if k not in b]) 
```

输出：

```
[(3, 4), (1, 2), (2, 3)] 
```

这也可以：

```
head, tail = [], []
any((head if k in b else tail).append((k,a[k]))
    for k in (b + [k2 for k2 in a if k2 not in b]))
print head+tail 
```

我不会称之为排序`a`——也许是排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T10:22:04.143

我不确定您想要的预期输出，但这可能会有所帮助：

```
a = {1:2,2:3,3:4}
b = [3,1]

r = [(x,a[x]) for x in b if x in a] 
```

它给出`r`了一个列表：

```
[(3, 4), (1, 2)] 
```

如果这不是预期的输出，也许它有助于作为中间步骤。

# c - 从加载的共享对象库调用主程序函数

> ID：14909164
> 
> 赞同：1
> 
> 时间：2013-02-16T10:14:52.937
> 
> 标签：c, plugins, shared-libraries, visibility

是否可以从共享对象库中的主程序调用函数？

我目前没有代码，但出于安全原因，我想为我编写的软件创建一个插件系统，并想知道这是否可行。一些伪代码：

```
/* main program */
void disturbe() {
    /*some bad stuff, just the main program should be able to call*/
}

main()
    lib = load_library("foo.so");
    lib->function();
}

/* foo.so */

void function() {
    disturbe();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:05:00.370

我会说是的：由于`function()`已加载到进程的地址空间中，它*可以*访问进程的功能，至少“以某种方式”。

为了使事物严格分开，请使用不同的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:43:38.560

这是有问题的，因为当你编译这个库时，它会有一个未解析的到 discute() 的链接。相反，如果您需要在主模块中有库调用函数，最好在库中有指向存根函数的指针，然后在运行时通过从主模块到库的初始化调用来设置这些指针。我们在商业产品中大量使用这种方法来实现“回调”功能。这是我们代码中的一个示例：

在 library.h 中：

```
typedef bool (*pbWMC)(DCwfile *, unc);

// stub functions for uninitialized pointers 
static bool StubbWMC(DCwfile *df, unc uch);

// variables set by Init()
static pbWMC WriteMacroChar; 
```

在 library.cpp 中：

```
// callback functions
pbWMC DCmacr::WriteMacroChar = StubbWMC;

// stub functions for uninitialized function pointers
bool DCmacr::StubbWMC(DCwfile *df, unc uch)
{
    return false;
}

// initializer called from main module
void DCmacr::InitMacroModule(DCwfile *df, pbWMC fwmc)
{
    if (df)
        DestFile = df;
    if (fwmc)
        WriteMacroChar = fwmc;
} 
```

在主模块.cpp 中：

```
// call to initializer
DCmacr::InitMacroModule(wf, WriteMacroChar);

// function called by library
bool HTMwr::WriteMacroChar(DCwfile *df, unc uch)
{
    HTMwfile *wf = (HTMwfile *) df;

    if (uch == 183) {  // bullet
        wf->putSpec(uch);
        return true;
    }
    return false;
} 
```

这种设计允许我们为库的每次调用指定不同的回调函数，使代码真正模块化。我们使用 C++，但与 C 中的设计相同。HTH！

# c# - 如何根据来自另一个 DropDownList 的选择填充 DropDownList？

> ID：14909167
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:15:23.863
> 
> 标签：c#, winforms, combobox

我的 Windows 表单中有两个 DropDownLists`combobox1`和`combobox2`. 我正在`combobox1`使用 MySQL 从数据库表中获取数据。我将组织的所有部门名称作为值存储到`combobox1`. 所以当我选择一个项目时，`combobox1`与该部门相关的所有员工都应该显示到`combobox2`.

例如，如果我选择“管理”，则“管理”部门中的所有员工都应显示在`combobox2`

这里的问题是，无论我选择什么，每次 中的值`combobox2`都显示整个组织的所有员工，而不是与所选部门相关的员工。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:26:07.493

您需要将您的部门传递到您的 SQL 中：

```
select * from employees where department = &selectedDepartment 
```

或者，如果您使用的是 LINQ：

```
var employees = dc.Employees.Where(e => e.Department == selectedDepartment); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:26:22.670

不确定您在做什么，但听起来您正在使用所有值重新填充组合框 2。

您能否在组合框 1 上侦听选择更改事件，然后在组合框 1 的选择更改时动态填充组合框 2。

# javascript - 使用要在 html 中调用的方法创建 javascript 共享类的最佳实践

> ID：14909170
> 
> 赞同：0
> 
> 时间：2013-02-16T10:15:45.510
> 
> 标签：javascript, html

我已经意识到，有几种方法可以创建（最好是“模拟”）一个 javascript 共享（静态）类，其中包含一堆可以从 html 调用的共享方法：

```
<html>
...
  <script>
  my_method_to_call
  </script>
...
</html> 
```

我想知道的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:26:39.070

你可以做

```
 <script>
    var my_static_methods = {
        my_method_to_call_1 : function(){

        },
        my_method_to_call_2 : function(){

        }
    };
    </script> 
```

并打电话给他们

```
my_static_methods.my_method_to_call_1(); 
```

同样的结果可以通过做

```
var My_static_methods = function(){
    this.my_method_to_call_1 = function(){

    };
    this.my_method_to_call_2 = function(){

    };
};
var my_static_methods = new My_static_methods(); 
```

# c++ - 下面的方案如何保证对象 cin、cout、...只有一个定义？

> ID：14909173
> 
> 赞同：4
> 
> 时间：2013-02-16T10:15:53.957
> 
> 标签：c++, initialization, iostream

[在这里，您会在](http://www.cs.huji.ac.il/~etsman/Docs/gcc-3.4-base/libstdc++/html/27_io/howto.html)**哪个标题**下找到以下语句？：

> 最后，`<iostream>`提供了八个标准的全局对象（cin、cout 等）。要正确执行此操作，此标头还提供`<istream>`和`<ostream>`标头的内容，但仅此而已。这个标题的内容看起来像

```
#include <ostream>
#include <istream>

namespace std
{
    extern istream cin;
    extern ostream cout;
    ....

    // this is explained below
    static ios_base::Init __foo;    // not its real name
} 
```

> 现在，前面提到的运行时惩罚：必须在您自己的任何代码使用它们之前初始化全局对象；这是由标准保证的。像任何其他全局对象一样，它们必须被初始化一次且仅一次。这通常通过类似上述的构造来完成，并且出于这个原因，标准中指定了嵌套类 ios_base::Init。
> 
> 它是如何工作的？因为标头包含在您的任何代码之前，所以 __foo 对象在您的任何对象之前构造。（全局对象按照它们声明的顺序构建，并以相反的顺序销毁。）构造函数第一次运行时，设置了八个流对象。

`<iostream>`我的问题：当我在多个文件中包含头文件时`.cpp`，上面的方案如何保证对象、等**只有一个**定义？`cin``cout`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:44:39.287

它并不能真正保证这一点。通过在作为库一部分的 .cpp 文件中简单地定义一次流对象来解决一个定义问题。问题中的代码仅包含标准流的*声明*。

可以保证的是对象在使用之前会被*初始化。*C++ 中全局对象的一个​​问题是，虽然它们在每个 .cpp 文件中按*顺序*初始化，但我们不知道链接器将对象从不同文件中放入的顺序。如果一个对象在初始化之前尝试使用另一个对象，并且我们不知道确切的顺序，这可能会导致问题 - 请参阅[静态初始化顺序惨败](https://stackoverflow.com/questions/5299095/static-initialization-order-fiasco)。

此处使用的一种解决方法是将`Init`对象放在声明流对象的标头中。因为您必须在使用流之前包含标头，所以我们知道该`Init`对象将位于文件的顶部，因此在可能使用流的其他对象之前构造。

现在，`Init`类的构造函数负责流对象的初始化。这必须尽早完成，而且只需要一次。具体如何由每个实现决定，但代码提示使用计数器来跟踪`Init`创建的对象的数量（并且可能会特别处理第一个对象）。

这只是执行此操作的一种方式，仅使用标准语言。一些实现还有其他技巧，例如[#pragma](http://msdn.microsoft.com/en-us/library/7977wcck(v=vs.110).aspx)或[init_priority](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Attributes.html)指令来说服链接器将库代码放在用户代码之前。在这种情况下，它只是通过魔法工作，而不使用`Init`类。

# android - Google Play 未显示我的平板电脑应用程序（具有“CallPhone”权限）

> ID：14909176
> 
> 赞同：0
> 
> 时间：2013-02-16T10:16:18.667
> 
> 标签：android

如何在平板电脑的 Google Play 中显示我的应用程序（有权限“CallPhone”）没有“CallPhone”选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:29:00.657

如果您使用权限 CALL_PHONE 但您的应用程序不仅仅依赖于使用它（其他一切都可以正常工作而无需使用电话功能），您还必须将其添加到您的清单中。

```
<uses-feature
    android:name="android.hardware.telephony"
    android:required="false" /> 
```

**来源：** [http ://commonsware.com/blog/2011/02/25/xoom-permissions-android-market.html](http://commonsware.com/blog/2011/02/25/xoom-permissions-android-market.html)

话虽如此，您还需要注意功能。在每个`Activity`使用`CALL_PHONE`权限的情况下，如果设备支持，您还必须签入您的 JAVA。

例子：

```
Context context;    // Some object, such as Activity, that extends Context
// ...
boolean hasTelephony = context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TELEPHONY);
if (hasTelephony) {
    // DEVICE SUPPORTS CALL_PHONE. DO YOUR BIT HERE
}
else {
    // DEVICE DOESN'T SUPPORT THE CALL_PHONE FEATURE. SHOW A TOAST OR A DIALOG OR SOMETHING HERE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:22:45.343

为 uses-feature 标签设置`android:required="false"`。[Android 指南](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)将为您提供帮助。

另请参阅[此主题](https://stackoverflow.com/questions/9299993/optional-permissions-so-an-app-can-show-on-all-devices-and-enable-optional-featu)，因为它回答了相同的问题。

# javascript - 在 JavaScript 中为动态全局变量创建和赋值

> ID：14909179
> 
> 赞同：0
> 
> 时间：2013-02-16T10:16:45.763
> 
> 标签：javascript, opera

我在我的 JavaScript 代码中有一个要求，我动态更新全局变量以根据这些变量的值执行特定操作。

例如：

```
this.decEnabled + this.properties.itemIndex = false; 
```

在这里，“this.properties.itemIndex”是有助于区分项目的整数，而 this.decEnabled 是我要创建的全局变量。但是我收到一个错误：未捕获的异常：ReferenceError：无法分配给'this.incEnabled + this.properties.itemIndex'。

我想我正在尝试做一些我不应该做的事情。我想知道怎么了。我也尝试分配一个字符串值，因为上面的变量是一个字符串。还是同样的错误。请建议。

谢谢，
斯内哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:48:39.730

你写的东西有两点看起来根本不对。

1.  JavaScript 赋值运算符 (=)。

    该运算符通过以下方式工作：

    a) 从“=”符号的右侧计算表达式。
    b) 将结果分配给左侧表达式。

    您的示例中的问题是（b），左侧的表达式不可赋值，因为您正在执行求和（涉及算术运算的表达式不可赋值）。

2.  全局变量：this.decEnabled

    全局变量是其作用域为全局作用域的变量，即任何人都可以访问该变量。您可以通过在文档顶部（或任何函数范围之外）编写以下内容来在文档的全局范围内定义全局变量：

    ```
    var global_var; 
    ```

    在您的解释中，您说您正在尝试创建全局变量“this.decEnabled”。但是，这在任何情况下都不能是全局变量，因为您将“decEnabled”绑定到一个范围（在这种情况下，您通过使用“this”运算符来引用当前范围）。

您收到的错误来自 (1)。

如果您尝试比较值，您正在寻找的相等运算符是“==”或“===”。

# iphone - Xcode Allocations Instrument - 监听内存警告

> ID：14909180
> 
> 赞同：0
> 
> 时间：2013-02-16T10:16:49.890
> 
> 标签：iphone, ios, objective-c, xcode, memory-management

我正在使用分配工具来提高我的应用程序的性能。我想注意 memoryWarnings 以确保我的应用程序不会占用太多内存或崩溃。

我希望我的整个应用程序都能收听 memoryWarings。我知道我可以用它来收听某些警告，但是下面的代码会收听所有内容吗？另外，我需要在哪里实现它？我需要把它放在每个 View Controller 中还是可以放在 App Delegate 中？

```
- (id)init {
if ((self = [super init])) 
    {
    _cache = [NSMutableDictionary new];
    [[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(memoryWarning:) 
    name:UIApplicationDidReceiveMemoryWarningNotification object:nil];
    }
return self;
} 
```

我知道我需要实现监听 memoryWarnings 的方法。这会听所有的内存警告吗？另外，我需要把它放在每个 viewController 中吗？或者我可以以某种方式将它放在 AppDelegate 中吗？

```
- (void)memoryWarning:(NSNotification*)note {
    [_cache removeAllObjects];
} 
```

任何指导都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:21:26.157

你的视图控制器已经有一个方法来监听内存警告

```
 - (void)didReceiveMemoryWarning
 {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
} 
```

# iphone - 如何从 iPhone 中的 SOAP Web 服务响应访问 XML 数据？

> ID：14909182
> 
> 赞同：0
> 
> 时间：2013-02-16T10:16:50.793
> 
> 标签：iphone, ios, objective-c, soap, nsxmlparser

我正在使用 SOAP Web 服务，如果 Web 服务返回，我可以在其中读取字符串响应。但是当 Web 服务返回一个字符串和一个 XML 时，我不知道如何访问这个 XML 响应。例如。

HTTP/1.1 200 OK 内容类型：text/xml；charset=utf-8 内容长度：长度

`

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetCountriesResponse xmlns="http://www.myurl.com/">
      <GetCountriesResult>
        <code>string</code>
        <profile>xmlxml</profile>
      </GetCountriesResult>
    </GetCountriesResponse>
  </soap:Body>
</soap:Envelope>` 
```

在其中我不知道如何从 XML 访问这些代码和配置文件标记的响应。那你能建议怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:45:29.047

[请参阅SOAP 示例](https://github.com/ilteris/SOAPExample)中的 SOAP Turorial 它可能会对您有所帮助

# java - 从 servlet 输出到 JSP

> ID：14909183
> 
> 赞同：4
> 
> 时间：2013-02-16T10:16:54.913
> 
> 标签：java, jsp, servlets

我将参数从 JSP 页面*calendar.jsp*传递到 servlet *connect.java*。在 Java 类中，我从数据库传递一个查询。它可以很好地检索数据，但我需要它将结果打印回 JSP 页面。

我尝试了以下代码，但在`out.println()`.

```
@WebServlet("/calendar")
public class Connect extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException {
        String fromDate = request.getParameter("fromDate");
        String toDate = request.getParameter("toDate");
        System.out.println("fromDate---->"+fromDate);
        System.out.println("toDate---->"+toDate);
        String query = "SELECT action_time,user_action,user_ip,user_id FROM ksdi.login_detail where (action_time, action_time) OVERLAPS (DATE '"
                    + fromDate+ "',DATE '"+ toDate+ "'+ integer '1')" +
                    " order by action_time desc";

        Connection conn = null;
        PreparedStatement statement = null;
        ResultSet resultSet = null;
        try {
            conn = ConnectionUtil.getConnection();
            statement = conn.prepareStatement(query);
            resultSet = statement.executeQuery();

            if (resultSet.next()) {
                while (resultSet.next()) {
                    String action_time=resultSet.getString("action_time");
                    String user_action=resultSet.getString("user_action");
                    String user_ip=resultSet.getString("user_ip");
                    String user_id=resultSet.getString("user_id");
                    System.out.println((action_time) + " " + (user_action) + " "+(user_ip) + " "+(user_id) + " ");

                    response.setContentType("text/html");  
                    PrintWriter out = response.getWriter();  
                    out.println("action time"+((ResultSet) request).getString("action_time")+"<br />");  
                    RequestDispatcher view = request.getRequestDispatcher("calendar.jsp");  
                    view.forward(request,response);         
                }
            } else {
                System.out.println("not found");
            }
        } catch (SQLException e) {
            throw new ServletException("DB interaction failed", e);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
            if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
            if (conn != null) try { conn.close(); } catch (SQLException ignore) {}
        }
    }

} 
```

这是我的 JSP 文件：

```
<%@ page import="java.sql.*" %>
<%  String path = request.getContextPath();%>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <script src="<%=path%>/js/calendar.js"></script>
    <link href="<%=path %>/css/calendar.css" rel="stylesheet">
</head>
<body>
<form action="calendar">
            <div class="container">
            From:<input  name="fromDate" type="text" class="calendarSelectDate" />
            To: <input   name="toDate"   type="text" class="calendarSelectDate" />
            <input type="submit" name="b1" value="Go">
        </div>          
<div id="calendarDiv"></div>

</form> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:32:41.710

1）在您的 servlet 代码中，您做错了。您应该**使用**PrintWriter 的输出`println()` **或**使用 RequestDispatcher 的`forward()`方法。但**不是都在同一个 servlet 的方法**中。

从这里引用：[**什么是请求调度程序，我如何使用它？**](http://www.avajava.com/tutorials/lessons/what-is-a-request-dispatcher-and-how-do-i-use-it.html)

> 与“包含”的情况不同，**“转发”丢弃了 Servlet 写入响应的先前输出**。

请参阅上述页面中的示例。

如果您选择使用`forward()`then 传递先前从数据库中检索的数据，您可以将该数据存储在请求范围内，即设置请求属性，例如

```
request.setAttribute("actionTime", action_time); 
```

当然，你必须**在**打电话之前做`forward()`！

然后在您的 JSP 中，您可以使用[Expression Languge](https://stackoverflow.com/tags/el/info)输出该数据，如下所示：
*test.jsp*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <h1>Testing the passed values</h1>
    <p>Action time: ${actionTime}</p>
    <!-- same way for other data -->
</body>
</html> 
```

2）另一个问题，在您的servlet代码中有一行：
`((ResultSet) request).getString("action_time")`

ServletRequest和[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)[都](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)没有方法。尽管*ResultSet*有这样的方法，但是在你的情况下，将请求转换为*ResultSet*是没有意义和错误的。`getString()`

 *** * *

PS
[不鼓励在 JSP 中使用 scriplets](https://stackoverflow.com/a/3180202/814702)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:31:15.110

可以将返回的`HttpServletRequest`请求强制转换为 a `ResultSet`，我认为它应该使用不强制转换的`ResultSet`'`getString`方法。

```
 PrintWriter out = response.getWriter();  
   out.println("action time"+ resultSet.getString("action_time") + "<br />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:50:34.627

在 servlet 中像这样**设置您获取到 httprequest 的**值

PS：我已经评论了不必要的行

```
 //response.setContentType("text/html");  
     //PrintWriter out = response.getWriter();  
    // out.println("action time"+((ResultSet) request).getString("action_time")+"<br />"); 

        request.setAttribute("action_time",action_time);
        request.setAttribute("user_action",user_action);
        request.setAttribute("user_ip",user_ip);
        request.setAttribute("user_id",user_id);

     RequestDispatcher view = request.getRequestDispatcher("calendar.jsp");  
    view.forward(request,response); 
```

在您转发到的**calendar.jsp中，通过以下方式访问值**

```
<%= request.getAttribute("action_time")%>
<%= request.getAttribute("user_action")%>
<%= request.getAttribute("user_ip")%>
<%= request.getAttribute("user_id")%> 
```**

# memory-leaks - 在断点上记录调用堆栈和值？

> ID：14909188
> 
> 赞同：3
> 
> 时间：2013-02-16T10:17:39.487
> 
> 标签：memory-leaks, windbg, breakpoints, visual-studio-debugging, callstack

### 背景

我正在尝试追踪内存泄漏问题，我知道（从 _CRT_DEBUG_MALLOC 和 MFC 以及 CRT 的泄漏检测）内存泄漏的特定行，但由于该行经常被调用，我不知道是哪个调用实际上泄漏。并且分配编号 +`__p__crtBreakAlloc()`没有帮助，因为每次运行它都是不同的分配编号。

无论如何，到目前为止的背景。如果您认为我应该使用其他工具，请发表评论。**如果答案集中在实际问题**而不是我的潜在问题上，我将不胜感激，因为我发现这比泄漏本身更有趣（我最终会通过足够的戳来发现）。

## 问题

是否有可能在 WinDbg 中（我很确定它不在 VS 中）有一个具有以下属性的断点：

*   它不会破裂。（所以它是一个“跟踪点”）
*   命中时，记录调用堆栈（达到一定深度）
*   它还应该记录一些全局状态（变量，可能只是内存地址的原始值）

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:15:31.360

您正在尝试的是一种真正的蛮力方法，在处理内存泄漏时几乎没有积极影响 - 至少需要像 UMDH 这样的东西来应对基于堆栈跟踪跟踪泄漏的复杂性。即使您成功进行了一些跟踪，手动处理也可能过于冗长。

有一个通用的调试器扩展来跟踪各种泄漏，如果你走手动路线，这会给你一些杠杆作用：[domdbg extension](http://www.denismo.name/domdbg/WebPages/MainPage.htm)

我写了一个帮助 python 脚本，如果你走 UMDH 路径，你可能会发现它很有用 - 它可以帮助你自动拍摄快照，并且在分析跟踪时可以更有效，因为它会缓存符号信息并以二进制形式存储跟踪（与 UMDH 使用的文本表示相反）：[pyumdh](https://github.com/a-palchikov/pyumdh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T14:30:03.140

还有一个[跟踪器扩展](https://github.com/goldshtn/windbg-extensions)可以跟踪任意打开和关闭操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:16:09.487

要回答您的每个问题点：

*   断点不中断：

    `bp myDll!<namespace>::myClass::myFunc "gc"`- 你可以执行用双引号分隔的命令，在这种情况下，当断点被命中时，只需继续

*   在命中断点时将调用堆栈转储到一定深度

    `.kframes 0n50; bp myDll!<namespace>::myClass::myFunc "kb;gc"`- 这将调用堆栈长度设置为 50（默认为 20），`0n`告诉它我们是基于十进制的。双引号后的命令`bp`将转储调用堆栈，然后继续

*   记录一些全局状态

    `dt myVar`- 将显示全局变量，另外将使用`d* myVar`

    `dd myGlobalVar`

    确保 pdbs 没有剥离私有符号 - 您应该检查信息，[`dt`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542772%28v=vs.85%29.aspx)因为有特定的开关来处理 unicode 字符串、深度等。此外，您可以轻松地在[WinDbg](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439485%28v=vs.85%29.aspx)的监视窗口中观察值，另外请参阅有关文档[`d*`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542790%28v=vs.85%29)

此外，WinDbg 中还有一个自动泄漏检测命令：

```
!heap -l 
```

但我发现它有时有点命中注定，更多信息[在这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563189%28v=vs.85%29.aspx)

# javascript - 从字符串 Javascript 中提取测试

> ID：14909190
> 
> 赞同：-2
> 
> 时间：2013-02-16T10:17:56.757
> 
> 标签：javascript

```
 var a = "Usd:12.34"; 
```

嗯...所以 a 是一个变量，我想要的是提取单词 Usd 并将其分配给 var b 在 Javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:18:43.370

如果总是有`:`分隔符，您可以使用以下[`.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)方法：

```
var a = "Usd:12.34";
var b = a.split(':')[0]; 
```

在这里，我们使用`:`分隔符拆分文本并获取结果数组中的第一个元素。您可以执行额外的错误检查以确保字符串格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:19:10.017

在字符上拆分字符串文字`:`并检索数组中的第一个元素。

```
var a = "Usd:1234";
var b = a.split(":")[0]; 
```

工作示例：http: [//jsfiddle.net/CXdqc/](http://jsfiddle.net/CXdqc/)

# php - Hash::make 不起作用 route.php 文件

> ID：14909192
> 
> 赞同：1
> 
> 时间：2013-02-16T10:18:28.053
> 
> 标签：php, laravel

我在我的新 laravel 4 应用程序中遇到了身份验证问题。我注意到的一件奇怪的事情，这可能就是为什么当我这样做时：

```
var_dump(Hash::check('secret', Hash::make('secret'))); 
```

在数据库播种机（我创建哈希密码的地方）中，我得到了真实的结果。

当我直接在路由中运行相同的命令时，我得到了错误。

另外，当我做一个简单的：

```
var_dump(Hash::make('secret')); 
```

直接在路线上它仍然是错误的。

这是坏了还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:34:34.540

你的安装有问题。这就是我得到的：

```
Route::get('/', function()
{
    var_dump(Hash::make('secret'));  // Gives a bcrypt string output
    var_dump(Hash::check('secret', Hash::make('secret'))); // Output true
} 
```

您是否进行了作曲家更新，却忘记更新应用程序本身？这是目前 Laravel 4 问题的最常见原因。

[该论坛帖子](http://forums.laravel.io/viewtopic.php?id=5367)详细解答了如何在作曲家更新后更新主 L4 应用程序。

编辑：我会在这里发布论坛的东西——因为你需要登录到 Laravel 论坛才能看到 beta 部分：

> 如果你运行 composer update 后遇到问题，你很可能需要从应用程序骨架中合并更改，这是 laravel/laravel 的开发分支。
> 
> 如果您最初克隆了这个存储库并且仍然与它共享 git 历史记录，您通常可以轻松地合并更改。假设您的遥控器是指向此存储库的“上游”，您可以执行以下操作：

```
git fetch upstream
git merge upstream/develop 
```

> 或者，您可以从开发分支中挑选单个提交，但我不会在这里介绍。
> 
> 如果您最初下载了 zip 发行版或删除了上游历史记录，您仍然可以手动解决问题。查看此分支上的提交并进行应用程序中不存在的任何更改。通常，重大更改是简单的配置更改。
> 
> 一旦 Laravel 4 stable 发布，这样做的频率就会大大降低，但这些变化仍然会发生。请记住，在此 beta 应用程序期间，很可能会发生重大更改。

*感谢 Kindari 的论坛帖子。*

# java - 开发可以读取几乎所有类型文档文件的阅读器程序

> ID：14909195
> 
> 赞同：-2
> 
> 时间：2013-02-16T10:18:52.710
> 
> 标签：java, android

嘿朋友们，我是一名学生，我正在尝试为我的 android 手机设计一个可以读取所有类型的文档文件（例如 .doc、.text、.pdf 等）的阅读器程序，这是我的第一个认真的项目，我不'不知道我需要做什么，还告诉我它是否可靠？请告诉我应该从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:26:32.507

说真的，不要开始。

读取*所有*类型的文档文件是不可能的。即使*只是*阅读“.doc”和“.pdf”也是一项艰巨的编程任务，可能需要数年时间才能完成……当然取决于“阅读”的含义。

为你的第一个严肃项目选择更现实的东西。

* * *

想想这个。如果您计划尝试的内容稍微简单一点，那么其他人已经为 Android 实现了它。这样的工具将非常有用，并且肯定会有其他人已经实施……如果可行的话。

# ios - 以编程方式/代码设置转换为部分卷曲

> ID：14909197
> 
> 赞同：2
> 
> 时间：2013-02-16T10:19:02.793
> 
> 标签：ios, objective-c

在 StoryBoard 中，我们可以如下进行可视化设置

![在此处输入图像描述](../Images/73dbf5dc028be6f7481aa830081dabce.png)

我们如何使用`.Xib/nib`file 做同样的事情？

```
[self presentViewController:self.infoController animated:YES completion:nil]; 
```

上面的代码只是使用模态样式，但是如何将过渡样式设置为部分卷曲。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T10:21:29.580

您可以使用以下代码执行此操作：

```
 #import "InfoController.h"

   - (IBAction)goToSecond:(id)sender { 
         InfoController *vc = [[InfoController alloc] initWithNibName:@"InfoController" bundle:nil];
         vc.modalTransitionStyle = UIModalTransitionStylePartialCurl;
         [self presentViewController:vc animated:YES completion:^{
           //completion code here
         }];
     } 
```

# php - 为什么要上传分块文件？

> ID：14909198
> 
> 赞同：2
> 
> 时间：2013-02-16T10:19:03.383
> 
> 标签：php, javascript, html, forms, file-upload

我知道如何使用 JS 或 PHP 对文件进行分块，但我的问题是在某些情况下需要分块吗？

我可以控制我的服务器配置，并且知道编写验证规则以防止人们尝试上传 Petabtyes 或其他疯狂的东西，所以我无法理解何时需要分块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:28:03.543

`I can't understand when I might need chunking.`

A. 当您的解决方案针对互联网速度非常慢的第三世界国家时，这可能是必要的。您可以接受`10MB`，但以每秒 56KB 的速度，互联网可能会在上传完成之前截断上传，然后您可以将 10MB 的文件分块为 10 个请求

B. 在开发移动应用程序，尤其是 J2ME（低端电话）时，由于某些网络的限制，需要丢弃大文件

C. 大多数上传系统不支持像下载管理器这样的恢复功能.. 卡盘可以是实现此类的一个很好的替代方案。

# python - Django 测验 - 用户生成

> ID：14909200
> 
> 赞同：0
> 
> 时间：2013-02-16T10:19:06.667
> 
> 标签：python, django

所以我有这些模型`Question`, `Answer`，然后`UserAnswer`组成一个测验。我面临的问题是制作一个使用这些模型进行验证的表单。我有一个想法如何做到这一点，但它不工作。

```
class QAForm(forms.Form):
    answers = forms.ChoiceField(label='Question is this', choices=[('Answer1','Answer1'),('Answer2','Answer2')], widget=forms.RadioSelect()) 
```

这适用于 1 种形式，而不适用于数千种形式。我将如何修改此代码，以便用户将所有用户生成的问题和答案视为表单，并可以提供自己的答案。

我有这个（它有效，但我知道这不是一个好习惯）：

```
def questions(request):
    queryset = Questions.objects.all()
    if request.method =='POST':
        a = request.POST['answer']
        answer = Answer.objects.get(answer=a)
        importance = request.POST['importance']
        q = request.POST['question']
        question = Questions.objects.get(id=q)
        try:
            user_answer = UserAnswers.objects.get(owner=request.user, question=question)
            user_answer.answer = answer
            user_answer.importance = importance
            user_answer.save()
        except:
            user_answer = UserAnswers(owner=request.user, question=question, answer=answer, importance=importance)
            user_answer.save()
    else:
        try:
            current = UserAnswers.objects.all().filter(owner=request.user)
        except:
            current = ''
return render_to_response("questions/base.html", locals(), context_instance=RequestContext(request)) 
```

我的模型：

```
class Answer(models.Model):
        answer = models.CharField(max_length=120)
        question = models.ForeignKey('Questions', null=True, blank=True)

        def __unicode__(self):
                return self.answer

IMPORTANCE = (
        ('Irrelevant', 'Irrelevant'),
        ('A Little Important', 'A Little Important'),
        ('Somewhat Important', 'Somewhat Important'),
        ('Very Important', 'Very Important'),
        ('Mandatory', 'Mandatory'),
)

class Questions(models.Model):
        owner = models.ForeignKey(User)
        question = models.CharField(max_length=300)
        importance = models.CharField(max_length=120, choices=IMPORTANCE, null=True, blank=True)
        updated = models.DateTimeField(auto_now=False, auto_now_add=True)
        timestamp = models.DateTimeField(auto_now=True)

        def __unicode__(self):
                return self.question

        class Meta:
                verbose_name            ='Question'
                verbose_name_plural     ='Questions'

class UserAnswers(models.Model):
        owner = models.ForeignKey(User)
        question = models.ForeignKey(Questions)
        answer = models.ForeignKey(Answer)
        importance = models.CharField(max_length=120, choices=IMPORTANCE)

        def __unicode__(self):
                return str(self.owner) + " " + str(self.answer) + " " + str(self.importance) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:59:57.420

这个怎么样？（还没有实际测试过，但它应该可以工作）

```
class QuestionForm(forms.ModelForm):
    answer = forms.ChoiceField(required=True, widget=forms.RadioSelect())

    def __init__(self, question=None, *args, **kwargs):
        super(QuestionForm, self).__init__(*args, **kwargs)
        self.fields['answer'].choices = [(a.text, a.value) for a in Answer.objects.filter(question=question)]

    class Meta:
        model = Question
        fields = ('text') 
```

然后像这样启动它 -

```
q = Question.objects.get(pk=1)
qform = QuestionForm(instance=q) 
```

当您只需要一种表格时，可以这样做。如果需要数千个，可以使用[FormSet 。](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)

PS：我假设 Answer 模型对 Question 模型有一个外键，并且它们已经被填满。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T07:42:17.453

满足您需求的最新代码。你可以试试这段代码：

```
class QuestionForm(forms.ModelForm):
    answer = forms.ChoiceField(required=True, widget=forms.RadioSelect())

def __init__(self, question=None, *args, **kwargs):
    super(QuestionForm, self).__init__(*args, **kwargs)
    self.fields['answer'].choices = [(a.text, a.value) for a in Answer.objects.filter(question=question)]

class Meta:
    model = Question
    fields = ('text') 
```

[基本知识](http://www.knowledgefair.net)

# html - SVG (Raphaël) 与 WebGL (THREE.js) 叠加

> ID：14909203
> 
> 赞同：0
> 
> 时间：2013-02-16T10:19:30.743
> 
> 标签：html, raphael, three.js, webgl

目前我正在使用 THREE.js 库来渲染 3D 场景，没有问题。

我想覆盖一个 SVG ，但是我有以下问题，最好在图像中展示：

![拉斐尔叠加](../Images/dced422d4ca6888e27c23f3a1e4b58cf.png)

如您所见，没有 WebGL（上图），我的 2D 元素渲染。红色条来自 Raphael (SVG)，灰色摇杆使用纯 Canvas 2D 上下文渲染。

使用 WebGL 底层（下图），纯 Canvas 2D 上下文继续正常渲染，但 Raphael (SVG) 呈现底层 WebGL 的外观。然而，3D 视图显示层和位置是正确的。

这只是两种不兼容的渲染方法的情况，还是我可能会在某处更改设置。我更喜欢使用 Raphael 的 .onTouch 功能，但如果必须的话，我愿意回退到纯 Canvas 2D 上下文进行叠加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:25:25.180

看起来像一个 zIndex 问题。当您添加三个.js domelement 时，您将其添加到什么？

svg 是否在 dom 树上更高，而您在最后附加了 webgl？

webgl 是否绝对定位但 svg 不是？ETC

# java - 使用自定义自定义适配器将项目添加到自定义 ListView

> ID：14909204
> 
> 赞同：0
> 
> 时间：2013-02-16T10:19:32.747
> 
> 标签：java, android

我有一个自定义适配器（ArrayAdapter），我想在代码中动态添加项目。

我的 ArrayAdapter 看起来像这样：

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ChatList extends ArrayAdapter<ChatListItem> {

Context context;
int layoutResourceId;
ChatListItem data[] = null;

public ChatList(Context context, int layoutResourceId, ChatListItem[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ChatHolder holder = null;
    ChatListItem entry = data[position];

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ChatHolder();
        holder.txtText = (TextView) row.findViewById(R.id.txtText);
        holder.txtUser = (TextView) row.findViewById(R.id.txtUser);
        holder.txtVersion = (TextView) row.findViewById(R.id.txtVersion);
        holder.txtZeit = (TextView) row.findViewById(R.id.txtZeit);

        row.setTag(holder);

    } else {
        holder = (ChatHolder) row.getTag();
    }

    holder.txtText.setText(entry.text);
    holder.txtUser.setText(entry.user);
    holder.txtVersion.setText(entry.v);
    holder.txtZeit.setText(entry.time);

    return row;
}

static class ChatHolder {
    TextView txtText;
    TextView txtUser;
    TextView txtVersion;
    TextView txtZeit;
}
} 
```

我想在此代码中添加项目：

```
LoadChatData bdl = new LoadChatData(new OnTaskComplete() {
                @Override
                public void onTaskCompleted(ChatListItem[] url, int id) {
                    currid = id;
                    for (ChatListItem i : url) {
                        if (chatList != null) {
                            chatList.add(i);
                        }
                    }
                }
            }); 
```

有没有办法做到这一点？问题是我收到此错误消息：

```
02-16 11:17:57.287: W/System.err(24997): java.lang.UnsupportedOperationException
02-16 11:17:57.287: W/System.err(24997):    at java.util.AbstractList.add(AbstractList.java:404)
02-16 11:17:57.287: W/System.err(24997):    at java.util.AbstractList.add(AbstractList.java:425)
02-16 11:17:57.287: W/System.err(24997):    at android.widget.ArrayAdapter.add(ArrayAdapter.java:179)
02-16 11:17:57.287: W/System.err(24997):    at de.tecfriends.vbtsplash2013.ActivityNewChat$3$1.onTaskCompleted(ActivityNewChat.java:108)
02-16 11:17:57.287: W/System.err(24997):    at de.tecfriends.vbtsplash2013.LoadChatData.doInBackground(LoadChatData.java:45)
02-16 11:17:57.287: W/System.err(24997):    at de.tecfriends.vbtsplash2013.LoadChatData.doInBackground(LoadChatData.java:1)
02-16 11:17:57.287: W/System.err(24997):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-16 11:17:57.287: W/System.err(24997):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-16 11:17:57.287: W/System.err(24997):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-16 11:17:57.287: W/System.err(24997):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-16 11:17:57.287: W/System.err(24997):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-16 11:17:57.287: W/System.err(24997):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:32:00.277

您不应该直接将您的项目添加到您的适配器。将它们添加到传递给适配器的数据数组中（当适配器创建时，您将此数组传递给构造函数），然后调用`adapter.notifyDataSetChanged()`.

# java - 类之间的关系

> ID：14909208
> 
> 赞同：1
> 
> 时间：2013-02-16T10:19:55.230
> 
> 标签：java, swing, listener, jbutton, actionlistener

我很难将行添加到位于不同类的表中。

以下是类结构：

![在此处输入图像描述](../Images/167a8757a6e1d1bf3fda1d2098468895.png) **虚线箭头是我无法拥有的所需关系**

在`AddPanel`课堂上我有一个文件和添加按钮。

单击 addButton 时，我首先创建了一个 Product 实例（位于 Logic Package 中的类）。然后我需要向表中添加行（使用`TableModel.AddRow`方法）。

以下是 GUI 外观（焦点选项卡是`AddPannel`）：

![在此处输入图像描述](../Images/23f736767604b11ba66288f6dff1897f.png)

我尝试了不同的方法，但没有一个成功。

我最后一次尝试是在`Table`类中创建以下方法：

```
public void AddRow(Product p) {
    tbmStock.addRow(new Object[] { p.getExternalId(), p.getName(),
            p.getAmount(), p.getPriceForMe(), p.getPriceForCustomer() });
} 
```

此外，在`AddPanel`课堂上我尝试添加以下方法：

```
private void AddButtonAction() {
    btnAddProduct.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
                try {
                Product p = new Product(txtName.getText(), txtExternalID
                        .getText(), Integer.parseInt(txtAmount.getText()),
                        Double.parseDouble(txtPriceForMe.getText()),
                        Double.parseDouble(txtPriceForCustomer.getText()),
                        Integer.parseInt(txtFromYear.getText()), Integer
                                .parseInt(txtToYear.getText()), Integer
                                .parseInt(txtSupplier.getText()), Integer
                                .parseInt(txtCarType.getText()));
                AddRow(p); //This call doesn't compiles 
            }
            catch (Exception e1){
                JOptionPane.showMessageDialog(null,"Error");
            }       
        }
    });

} 
```

有什么建议么 ？（实际上我什至不确定我的结构是否良好：S）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:28:15.557

提供自定义事件和事件侦听器。如果您创建新产品，则触发该事件并通知所有侦听器。MainPanel（假设您在此处创建 AddPanel 的实例）应该注册一个侦听器。在此侦听器中，您可以在 MainPanel 有权访问表时更新表。

这也称为中介者模式。

**一些指示：**

创建一个事件类，例如`ProductCreatedEvent extends EventObject`。将 Product 作为参数传递给构造函数，并使其可以通过 getter 访问。

创建一个事件侦听器类：`interface ProductCreatedEventListener extends EventListener`。提供一个方法，例如`productCreated(ProductCreatedEvent productCreatedEvent)`.

在 AddPanel 中添加如下内容：

```
private final List<ProductCreatedEventListener> productCreatedEventListeners = new ArrayList<>();
...

public void addProductCreatedEventListener(ProductCreatedEventListener productCreatedEventListener){
    productCreatedEventListeners.add(productCreatedEventListener);
}

public void removeProductCreatedEventListener(ProductCreatedEventListener productCreatedEventListener){
    productCreatedEventListeners.remove(productCreatedEventListener);
}

private void fireProductCreatedEvent(ProductCreatedEvent event){
    for (ProductCreatedEventListener productCreatedEventListener : productCreatedEventListeners){
        productCreatedEventListener.productCreated(event);
    }
} 
```

代替：

```
AddRow(p); //This isn't working 
```

和

```
 fireProductCreatedEvent(new ProductCreatedEvent(AddPanel.this, p)); 
```

# c++ - 使用 OpenCV 进行相机校准

> ID：14909209
> 
> 赞同：3
> 
> 时间：2013-02-16T10:20:03.317
> 
> 标签：c++, opencv, computer-vision

我想使用 OpenCV C++ API 执行相机校准，使用一组已知的世界来图像点匹配。

OpenCV 有一个称为[此处](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibratecamera)`cv::calibrateCamera`记录的函数。这清楚地提到该函数将推导出平面对象的固有相机矩阵，并且它希望用户为非平面 3D 环境指定矩阵。

在我的点对应中，世界坐标不是平面的。而且我对内部相机矩阵没有一个合格的猜测。

在这种情况下，我将如何校准相机？

目前，我正在使用基于 DLT 的简单方法来使用该`cv::SVD::solveZ`函数进行计算。但我想使用 OpenCV 执行的非线性估计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:41:00.667

[本页](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/FUSIELLO3/node4.html)介绍如何执行相机自动校准。这包括使用 Kruppa 方程的方法，该方法似乎可以使用您想要的非线性技术来求解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T13:38:48.320

我遇到了同样的情况：我有一个非平面 3D 目标，但是我想使用 OpenCV 的非线性 LM 优化来进行校准过程。（OpenCV 使用的张氏初始化方法只允许平面标定目标）

您可以做的是从您自己的 DLT 结果中提取相机矩阵，并将其用作`calibrateCamera`. 如果只为一对（相机点 - 对象点）完成就足够了。即使其他对可能会产生其他相机矩阵，但希望它们是相似的，并且无论如何您只需要该矩阵来进行初始化。

请注意，我确实假设，使用您自己的 DLT，您可以获得一个投影矩阵`P`，该矩阵将同质世界点映射`X`到 hom。图像点`x`通过`x = P * X`.

这将是要走的路，虽然它在 python 中，但您应该能够适应自己的需求：

```
P = YOUR_DLT(imagePoints[0], objectPoints[0])

cameraMatrix, _, _, _, _, _, _ = cv2.decomposeProjectionMatrix(P)
cameraMatrix /= cameraMatrix[2,2]            # ensure unit elem[2,2]
cameraMatrix[0,1] = 0                        # ensure no skew
cameraMatrix[0,0] = abs(cameraMatrix[0,0])   # ensure positive focal lengthes
cameraMatrix[1,1] = abs(cameraMatrix[1,1])

# ensure principal point within image:
cameraMatrix[0,2] = min(resX-1, max(0, cameraMatrix[0,2]))
cameraMatrix[1,2] = min(resY-1, max(0, cameraMatrix[1,2])) 

retval, cameraMatrix, distCoeffs, rvecs, tvecs = \
      cv2.calibrateCamera(objectPoints, imagePoints, imageSize, cameraMatrix) 
```

请注意，由于`calibrateCamera`假设`cameraMatrix[2,2]==1`并被限制为正焦距和 0 偏斜，因此可能需要校正相机矩阵，正如我在上面的代码中所示。

# vim - CTRL A 在 VIM 中给了我错误的价值，数量巨大

> ID：14909210
> 
> 赞同：1
> 
> 时间：2013-02-16T10:20:06.337
> 
> 标签：vim

假设我写了一个数字`23456`，我尝试将 2 添加到它，所以我按 2 然后`Ctrl A`将光标保持在第一个数字上，我得到正确的结果为`23458`。

但是，当涉及到一个巨大的数字时`"33333333333333333333333333399999999999999999999999932"`，然后我尝试添加 2，通过按 2 然后`CTRL A`，我得到一个垃圾（我不知道该怎么称呼它）值`"1733895256476221375"`。我不知道发生了什么。我在这里错过了什么吗？

非常感谢任何帮助，在此先感谢，我在 linux 7.3 版本上使用 GVIM。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T10:54:15.560

Vim 内部使用整数运算；它没有任意大数字的概念。因此，结果仅限于有符号的 32 位（到目前为止也在 64 位版本的 Vim 中（至少在 Windows 上））；即最大值为0x7fffffff = 2147483647。

您可能可以在脑海中执行低位加法，然后使用`r{number}`来调整数字。

# ruby-on-rails - 如何获取二维哈希作为 hstore 列的输出？

> ID：14909211
> 
> 赞同：1
> 
> 时间：2013-02-16T10:20:31.483
> 
> 标签：ruby-on-rails, ruby, postgresql, hash, hstore

在 Rails 应用程序中，我尝试在 postgreSql hstore 列中存储二维哈希，但对于输出，我得到类似

> {"6/5"=>"{\"color\"=>\"white\"}", "8/1"=>"{\"color\"=>\"white\"}", " 8/2"=>"{\"color\"=>\"white\"}", "8/3"=>"{\"color\"=>\"white\"}"}。

如何获得二维哈希作为输出，或者您可以就如何解析它提供一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T11:38:51.157

如果您需要将其转换为哈希，您可以这样做：

```
str = {"6/5"=>"{\"color\"=>\"white\"}", "8/1"=>"{\"color\"=>\"white\"}", "8/2"=>"{\"color\"=>\"white\"}", "8/3"=>"{\"color\"=>\"white\"}"}
p str.each_with_object({}){|(k,v),h| h[k] = eval(v)} 
```

结果

> {"6/5"=>{"color"=>"white"}, "8/1"=>{"color"=>"white"}, "8/2"=>{"color"=> "白色"}, "8/3"=>{"颜色"=>"白色"}}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:26:05.350

要在 sql 数据库中存储哈希，可以使用字符串列并将这一行添加到模型中：

```
serialize :my_hash_thingy 
```

它应该在后台处理每个序列化/反序列化，并且每次使用它时都会正常进行哈希处理。

# html - 带白色边框的三角形

> ID：14909212
> 
> 赞同：3
> 
> 时间：2013-02-16T10:20:37.087
> 
> 标签：html, css

如何使用 CSS 创建带白色边框的三角形？就像下图一样。

![在此处输入图像描述](../Images/0c2feabe18b8a346f2c8f1a5c3a0e7f5.png)

当我添加这个 CSS

```
.triangle {
    width:0;
    height:0;
    border-top: 20px solid transparent; 
    border-left: 20px solid white; 
    border-bottom: 20px solid transparent;
    position:relative;

}
.triangle:before {
    content:'';
    width:0;
    height:0;
    border-top: 10px solid transparent; 
    border-left: 10px solid red; 
    border-bottom: 10px solid transparent;
    position:absolute;
    top:-10px;
    left:-17px;
} 
```

结果是

![在此处输入图像描述](../Images/a0bd13b1d1fd6e0168faa53c9fde9000.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:33:50.263

CSS：

```
.triangle {
    width:0;
    height:0;
    border-top: 20px solid transparent; 
    border-left: 20px solid white; 
    border-bottom: 20px solid transparent;
    position:relative;

}
.triangle:before {
    content:'';
    width:0;
    height:0;
    border-top: 10px solid transparent; 
    border-left: 10px solid red; 
    border-bottom: 10px solid transparent;
    position:absolute;
    top:-10px;
    left:-17px;
} 
```

HTML：

```
<div class="triangle"></div> 
```

[**小提琴**](http://jsfiddle.net/dp5Cu/4/)

# java - 战争与耳内的罐子之间的交流

> ID：14909213
> 
> 赞同：0
> 
> 时间：2013-02-16T10:21:10.670
> 
> 标签：java, jakarta-ee, maven

我是在战争和罐子之间创造耳朵和交流的新手......

我有两场具有完全独立功能的战争。现在我要创建一个 Ear，其中两个应用程序必须使用相同的功能，它包含在一个 jar 中。但要求是我不能在两者的 Pom.xml 中包含该 jar，而是使用该 jar，其中所有3只在单耳下。这可能吗？我已经用 2 次独立战争测试了 Ear，现在它工作正常，如何实现上述目标我没有得到这个。
我将 Maven 与 Jboss7.1.1 一起使用。
我浏览[了 JAR/WAR/EAR 中的 MessageHandler](https://stackoverflow.com/questions/9420320/messagehandler-in-jar-war-ear)之类的链接，[https://stackoverflow.com/questions/1796255/tell-me-a-clear-difference-between-ear-war-and-jar](https://stackoverflow.com/questions/1796255/tell-me-a-clear-differnece-between-ear-war-and-jar)但对上述内容一无所知问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:01:23.317

您可以将多个战争和罐子放入耳朵中，它们可以共享同一个类加载器。这意味着所有的类都可以从所有的 jars/wars 中访问。即，就好像所有的类/资源都在一个档案中，没有子包装。

我假设这就是你所说的“战争和罐子之间的交流”。

编辑：检查[使用 Maven 制作 EAR 以](http://shrubbery.mynetgear.net/c/display/W/Making+an+EAR+with+Maven#MakinganEARwithMaven-EARModule)获取用于构建耳朵的 pom.xml 示例。在示例中，有一个罐子和一场战争，但您可以有任意数量的战争/罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:07:47.033

```
Hi got the solution >> here it is.. this is a pom.xml of ear project

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Test</groupId>
  <artifactId>Test</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>ear</packaging> 

<dependencies>
    <!--Dependency for jar-->
    <dependency>
        <groupId>com.jar</groupId>
        <artifactId>com.jar</artifactId>
        <version>1.0</version>
        <type>war</type>
    </dependency>
    <!--Dependency for war1-->
    <dependency>
        <groupId>com.war2</groupId>
        <artifactId>com.war2</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
    </dependency>       
    <!--Dependency for war2-->  
    <dependency>
        <groupId>com.war1</groupId>
        <artifactId>com.war1</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
    </dependency>
</dependencies>

<build>
    <finalName>Project</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <finalName>MyEarFile</finalName>
                <version>5</version>
                <modules>
                    <!--Webmodule for war1-->
                    <webModule>
                        <groupId>com.war1</groupId>
                        <artifactId>com.war1</artifactId>
                        <uri>war1.war</uri>
                        <bundleFileName>war1.war</bundleFileName>
                    </webModule>

                    <!--Webmodule for war2-->
                    <webModule>
                        <groupId>com.war2</groupId>
                        <artifactId>com.war2</artifactId>
                        <uri>war2.war</uri>
                        <bundleFileName>war2.war</bundleFileName>
                    </webModule>
                </modules>
            </configuration>
        </plugin>
    </plugins>
  </build>
</project>

Note:: groupId and artifactId metioned here must match with groupId and artifactId mentioned in the project's pom.xml.
Also dependency of jar must be present in this i.e. ear's pom.xml and not in both app's pom.xml.
At time of maven install it automatically refers to jar's contents.. 
```

# asp.net - ASP.NET RequiredFieldValidator：如何将值绑定到“InitialValue”属性？

> ID：14909215
> 
> 赞同：0
> 
> 时间：2013-02-16T10:21:21.103
> 
> 标签：asp.net, validation, requiredfieldvalidator, html-select

我有以下代码

```
<div>
    <asp:DropDownList ID="testDropDownList" runat="server" ValidationGroup="testValidationGroup">
        <asp:ListItem Value="Choose">[ Select Item ... ]</asp:ListItem>
        <asp:ListItem Value="True">Yes</asp:ListItem>
        <asp:ListItem Value="False">No</asp:ListItem>
    </asp:DropDownList>
    <asp:RequiredFieldValidator ID="testRequiredFieldValidator" runat="server" ValidationGroup="testValidationGroup"
        ErrorMessage="*" InitialValue="Choose" ControlToValidate="testDropDownList"></asp:RequiredFieldValidator>
    <br />
    <asp:Button ID="testButton" runat="server" OnClick="testButton_Click" Text="Button"
        ValidationGroup="testValidationGroup" />
    <br />
</div> 
```

在其中我通过RequiredFieldValidator 验证Dropdownlist

如果将属性的值更改为**`initialvalue`**从 stactic 类中的静态属性中读取 .. 但它总是在运行时给我 emtpy 字符串，除非该属性具有值“选择”...

```
<asp:DropDownList ID="testDropDownList" runat="server" ValidationGroup="testValidationGroup">
        <asp:ListItem Value="Choose">[ Select Item ... ]</asp:ListItem>
        <asp:ListItem Value="True">Yes</asp:ListItem>
        <asp:ListItem Value="False">No</asp:ListItem>
    </asp:DropDownList>
    <asp:RequiredFieldValidator ID="testRequiredFieldValidator" runat="server" ValidationGroup="testValidationGroup"
        ErrorMessage="*" InitialValue='<%# Util.ChooseValue %>' ControlToValidate="testDropDownList">
        </asp:RequiredFieldValidator>

    <br />
    <asp:Button ID="testButton" runat="server" OnClick="testButton_Click" Text="Button"
        ValidationGroup="testValidationGroup" /> 
```

**任何人都可以帮助我知道我的代码中有什么问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:20:55.397

请打电话

```
testRequiredFieldValidator.databind() 
```

在页面加载事件中，让我知道这是否仍然是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:52:22.003

在 aspx.cs 页面中的 page_load 事件上设置 RequiredFieldValidator 的 InitialValue。

# opengl - 体素锥跟踪软阴影

> ID：14909220
> 
> 赞同：14
> 
> 时间：2013-02-16T10:21:40.813
> 
> 标签：opengl, shadow, voxel

我最近在 OpenGL 4.3 中使用体素锥体跟踪实现了软阴影，方法是在光的方向上跟踪一个锥体并累积不透明度值。 ![在此处输入图像描述](../Images/2796337dbedaf88543fb142e511b93c9.png)

我试图解决或隐藏的关键是当被遮挡的表面更接近遮挡物时非常体素化的阴影效果，以及由于表面体素化而隐藏阴影中的清晰点。我正在使用 64x64x64 的低分辨率体素；然而，即使我使用了更高分辨率的体素，一些较高 mip-map 级别的低分辨率体素仍会在跟踪中捕获。

所以这是我的第一个想法：我希望能够保留最远的阴影最柔和的部分，并用阴影贴图替换更靠近遮挡物的阴影部分。阴影贴图会随着它远离每个遮挡物而褪色，我会以某种方式将它与锥形跟踪阴影混合。

![在此处输入图像描述](../Images/7b2ac9b9eb2b045e0baf84bb68241860.png)

谁能想到一种方法来根据与每个对象的距离为阴影贴图淡化阴影，然后让它平滑地融合到锥形跟踪阴影中？

我的另一个想法是以某种方式在更接近遮挡物的表面上跟踪阴影，但这可能太昂贵了。

或者，我欢迎任何其他想法来帮助改进我的软阴影算法。

我还放了一段视频来展示它的动态：

[https://www.youtube.com/watch?v=SUiUlRojBpM](https://www.youtube.com/watch?v=SUiUlRojBpM)

仍然没有找到解决阴影问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:53:21.120

我猜测“清晰点”伪影是由于大体素尺寸仅部分填充几何体而发生的：“累积不透明度值。”。从光栅化像素转换为体素时，您要采集多少个样本？如果样本体积/体素体积很小，那么正确渲染透明度可能会出现问题 - 较亮区域会显示噪声。

另外，您的体素的透明度方向是否依赖？[基于作者的原始论文](http://cis565-fall-2012.github.com/lectures/11-01-GigaVoxels-And-Sparse-Textures.pdf)。方向依赖性对于确保正确渲染半透明体素很重要。

[一张快速的图片来解释](http://postimg.org/image/on9a6l56r/)

“对于阴影贴图，然后让它平滑地融入锥形跟踪阴影中？”

这似乎是你在踢自己的脚。您会获得更大的性能影响，并获得阴影映射和体素锥跟踪的缺点。体素锥追踪很昂贵，但可以提供漂亮的柔和阴影并进行全局照明。阴影贴图更擅长制作硬阴影，并且对于较小的场景更快，但是当您添加更多几何图形时，您最终会多次重绘相同的东西，每个灯光至少一次。

顺便说一句，伟大的工作。我在为我自己的体素锥跟踪的 DirectX 实现进行初步研究时遇到了您的问题。

[编辑]

我意识到我在图片中打错了。右边的图片应该是 4/64，而不是 4/16。我忘记了Z维度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:46:19.223

好吧，在这种情况下，您可以通过添加更多灯光来做到这一点。您可以添加更多靠近原始灯光的灯光，然后将灯光的阴影与一束较近的灯光的阴影组合在一起。这就是“区域光”效应。

# node.js - 使用 heroku 从调度程序进程调用 node.js 网络服务器

> ID：14909221
> 
> 赞同：0
> 
> 时间：2013-02-16T10:21:47.873
> 
> 标签：node.js, heroku

我正在使用 Heroku 托管并设置了 node.js 网络服务器。我现在想运行另一个节点脚本，它将使用 Heroku 调度程序定期向 node.js 网络服务器发送 POST 请求。当我在自己的机器上运行时，我运行生成 POST 请求的脚本，如下所示：

```
var request = require('request');
...
request.post("http://localhost:5000/submit").form(some_json_data); 
```

但是，当我想部署到 Heroku 时，我想确保我想使用正确的 HOST 和 PORT 设置（例如，我确信网络服务器运行的端口不会是 5000）。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:52:08.943

您的调度程序工作将启动一个新的测功机，因此，如果您想发帖，则必须将其发送到`yourapp.heorkuapp.com`or `yourcustomdomain.com`。因此，您确实需要关心端口。

# python - Python转换日期时间不起作用

> ID：14909222
> 
> 赞同：0
> 
> 时间：2013-02-16T10:21:48.700
> 
> 标签：python, datetime

我正在尝试将字符串解析为 python datetime 对象，这是代码：

```
created = datetime.strptime(r.json()[x]["created_at"], "%a %b %d %H:%M:%S +0000 %Y") 
```

我得到的错误是：

```
ValueError: time data '"Wed Jan 16 22:08:18 +0000 2013"' does not match format '%a %b %d %H:%M:%S +0000 %Y' 
```

它应该是正确的，显然我做错了什么。请注意，r.json 以 unicode 格式返回文本，但我也尝试使用 str() 转换。

完整程序：

```
import requests
from datetime import datetime
from simplejson import dumps

url = 'https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name='
username = 'gtklondike'
count = '5'

url += username + "&count=" + count

r = requests.get(url)

x = 0
while x < count:
    print "<div id='tw-body'>" + r.json()[x]["text"] + "</div>"
    created = datetime.strptime(dumps(r.json()[x]["created_at"]), "%a %b %d %H:%M:%S +0000 %Y") 
    print "<div id='tw-date'>Date: " + r.json()[x]["created_at"] + "</div><br />\n" # TMP --> until I get datetime working... but at least it shows you the date
    x = x + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:29:26.127

在我看来，你的字符串中有一组额外的引号 - 一个 ' 表示它是一个字符串，一个 " 在字符串内。

尝试：

```
created = datetime.strptime((r.json()[x]["created_at"]).strip('"'), "%a %b %d %H:%M:%S +0000 %Y") 
```

`strip('"')``"`从字符串中删除s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:36:40.583

我发现了问题！@wrgrs 解决方案有效，但实际上它来自周围的 dumps() ，创建了一组额外的引号。（正是他的解决方案引发了我的想法）

```
created = datetime.strptime(r.json()[x]["created_at"], "%a %b %d %H:%M:%S +0000 %Y") 
```

工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:06:05.690

我会使用[Delorean](http://delorean.readthedocs.org/en/latest/quickstart.html)提供的解析函数来处理 strptime，例如

```
>>> from delorean import parse
>>> parse("2011/01/01 00:00:00 -0700")
Delorean(datetime=2011-01-01 07:00:00+00:00, timezone=UTC) 
```

它接受广泛的字符串输入，并考虑到不同的时区，并提供简单的转换机制，以`.datetime`在 delorean 对象上简单地检索所需的日期时间对象。

# oop - 接口和抽象方法的区别

> ID：14909224
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:21:55.157
> 
> 标签：oop

如果接口有 2 个方法 A() 和 B() 并且抽象类也有相同的 A() 和 B() 那么它们之间有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:23:21.100

接口只是提供实现该接口的类的骨架。

抽象类（也可以实现接口）可以添加一些默认功能，这些默认功能（当然）可以在派生类中被覆盖。

看一看：[接口 vs 抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:23:32.567

不同之处在于实现接口的类将被迫提供它们自己的这些方法的实现，而扩展抽象类的类将提供这些方法的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:42:14.520

差异：

**假设在抽象类`A()`中`B()`没有实现，即只有签名**。

1.  在接口的情况下，`A()`只有`B()` **签名**，即没有任何实现，实现该接口的类必须提供这样的实现（不带关键字`override`）：

    ```
    returnType AbstractClass.A()
    {
        // Code here
    } 
    ```

2.  实现抽象类的类**将必须**重写抽象方法，如下所示：

    ```
    override accessSpecifier returnType A()
    {
        // Code here
    }

    override accessSpecifier returnType B()
    {
        // Code here
    } 
    ```

# ios - 如何在 Xcode 中使用动态单元格实现多个 segue？

> ID：14909227
> 
> 赞同：2
> 
> 时间：2013-02-16T10:22:09.180
> 
> 标签：ios, objective-c, xcode

我有一个表格视图，其中动态原型单元格分为两个不同的部分，分别名为“论坛”和“线程”。当我从“论坛”部分单击一个表格视图单元格时，我想转换到具有不同数据的同一页面以显示，而如果我从“线程”部分单击一个单元格，它应该打开一个不同的场景。简而言之，两种不同类型的转换从 2 个不同的 tableview 部分开始）

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:02:36.720

1.  确保表格视图控制器嵌入在导航控制器中。
2.  将两个 push segues 连接到 table view 控制器（而不是单元格）。
3.  使用每个 segue 上的属性检查器选项卡在情节提要中为这些 segue 提供适当的标识符。
4.  `-tableView didSelectRowAtIndexPath:`添加一个`if`语句来检测被点击的行在哪个部分。
5.  在`if`语句的分支中，`-performSegueWithIdentifier`使用相应 segue 的标识符调用您的控制器。
6.  如果您需要在要从表视图中设置的视图控制器中设置任何内容，请`prepareForSegue: sender:`在表视图控制器中覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T10:00:56.863

非常有帮助，它对我有用，但我必须同时使用**didSelectRowAtIndexPath 和 prepareForSegue**，而我在其他帖子中读到这不是很好。

我读到如果我们需要设置任何东西，我们只需要使用 prepareForSegue ......

你认为我应该继续他们两个吗？

谢谢！

# java - Java切片多维数组库

> ID：14909228
> 
> 赞同：3
> 
> 时间：2013-02-16T10:22:21.623
> 
> 标签：java, arrays, slice

是否有支持切片的 Java 数组库？我只需要常规**的 nx n' x n'' x ...**数组，并从给定维度或整个维度取一个切片（即不需要范围）。

注释（阅读对潜在评论的回复）：

*   我知道常规的 Java 数组不支持它，我也不愿意编写自己的切片库。
*   使用`Collection`（建议在对[其他问题](https://stackoverflow.com/questions/13898504/how-to-slice-a-2-d-java-array)的评论中）转移问题
*   使用[System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)对高维没有帮助，因为它不会显着降低循环的嵌套
*   这是（有点长篇大论）数值问题，因此内部代码的 OO 方法不一定是最好的方法——无论如何，最有用的抽象归结为切片
*   我更喜欢切片的 R/W 视图（如果它只是 R/O 副本，我不会抱怨）

**编辑：**不幸的是，我需要将对象存储在数组中 - 不仅是`double`'s.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T12:09:48.953

[Vectorz](https://github.com/mikera/vectorz)是一个支持切片的向量/矩阵库，如果您正在处理值数组的数值工作，它是一个不错的选择`double`。它专为 3D 建模、增益、模拟或机器学习环境中的矢量/矩阵数学而设计。

优点：

*   非常快（由原始`double`s 和`double[]`数组支持的一切）
*   100% 纯 Java
*   支持任意切片和切块，主要作为`O(1)`操作（即不需要数据复制）
*   切片完全支持读/写，即您可以使用它们来修改原始结构
*   您还可以将向量连接在一起，获取子向量视图等。
*   数值工作的专门课程，例如对角矩阵等。

它目前支持 0、1 和 2 维数组，更高维数组已计划但尚未实现。

# c - 应该选择什么数据类型来表示具有固定数量值的变量？

> ID：14909229
> 
> 赞同：1
> 
> 时间：2013-02-16T10:22:31.503
> 
> 标签：c, types

我有一个可以取任意 3 个值的变量。如果它只能取 2 个值，我会分配一个 bool 类型。但我的变量可以取 3 个值。如果我分配一个 int8_t 类型，我会浪费 6 位。虽然这看起来像是抢先优化，但我有数百万个这种类型的实例，这将对内存使用产生巨大影响。

我应该将变量分配给什么数据类型，以便总体使用最少的内存。

如果我用枚举来做，那会确保使用更少的内存吗？

特别是我应该在 C、Java、Python 和 MySQL 中使用什么数据类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:33:59.920

这里有一点数学：天真地，您可以用两位来描述每个元素，因此您可以将四个元素打包到一个字节中并获得不错的随机访问。四个元素有 3 ⁴  = 81 个状态，因此使用率为 81 / 256 ≈ 32%。如果您想停留在字节边界上，您可以寻找适合 2 ⁸的最接近的 3 次幂，即 3 ⁵  = 243。换句话说，如果您用一个字节来枚举五个连续元素的所有可能状态，您的空间效率为 243 / 256 ≈ 95%。

*除非您正在处理大量*数据并且无法将所有内容都放入物理内存*并且*无法将您的算法分区以一次在较小的块上运行，否则在内存中进行这种打包是没有意义的。为了高效计算，您至少应该使用一个字节 ( `uint8_t`)，甚至是一个机器字 ( `uint8fast_t`) 来存储您的数据。只有当您将数据序列化到磁盘并发现您的 TB 数据对于您的 RAID-50 存储来说过于昂贵时，您才可能希望考虑使用复杂的打包方案。（虽然你可以再次通过管道传输你的数据`gzip`，这基本上可以为你完成所有这些。）

* * *

这是一个基本的解码算法，用于从一个字节中获取五个元素：

```
unsigned int get_tristate(unsigned char const n, size_t const i)
{
  /* Conditions:   n in [0, 243)
                   i in [0, 5)

     Returns: the i^th trivalent element encoded in n, in [0, 2).
  */

    static unsigned int const powers[] = { 1, 3, 9, 27, 81, 243 };

    return (n / powers[i]) % powers[i + 1];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T10:28:12.250

如果你*真的*（虽然我不确定是不是这样）需要这种数据类型，你可以使用位域。但是，这可能会受到限制，因为您无法定义指向此类类型的指针。浪费一点：

```
struct s
{
  int n:2; /* 4 states instead of 3 */
}; 
```

# android - glReadPixels 颜色序列

> ID：14909231
> 
> 赞同：1
> 
> 时间：2013-02-16T10:22:52.747
> 
> 标签：android, opengl-es

我在 Android 平台上使用 glReadPixels 时遇到了问题。

当我将 internalformat 指定为 GL_RGBA 时，如果我将 internalformat 指定为 GL_ARGB，它会用 BGRA 填充缓冲区，它会用 RGBA 填充缓冲区。

它发生在我的一台索尼爱立信设备中，但在其他设备中，glReadPixels 工作正常。我可以从设备获得任何其他参数来控制像素字节序列吗？

# php - 移动到 SSL 后页面加载后丢失会话

> ID：14909233
> 
> 赞同：2
> 
> 时间：2013-02-16T10:23:05.743
> 
> 标签：php, apache, ssl

更新：

该网站现在可以在所有浏览器上运行，*但*现在 Chrome 除外。我认为这很奇怪——这一切都是在服务器切换到 SSL 后出现的。

作为建议，我已将其放入应用程序中：

```
ini_set('session.use_trans_sid', true);
ini_set('session.use_cookies', true);
ini_set('session.use_only_cookies', true);

$https = false;

if(isset($_SERVER['HTTPS']) and $_SERVER['HTTPS'] != 'off') {
    $https = true;
}

$dirname = rtrim(dirname($_SERVER['PHP_SELF']), '/') . '/';

session_name('money');
session_set_cookie_params(0, '/', $_SERVER['HTTP'], $https, true);
session_start(); 
```

但是我仍然无法设置会话 - 该应用程序基于 MVC，因此根据 URL 中加载的页面需要控制器。

通过所需/包含的文件传递会话是否存在问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T16:13:21.750

与 chrome 请求的 Favicon.ico 有关 - 我永远不会猜到。

非常感谢所有帮助过的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:20:20.870

`HTTP`当您在同一服务器上的和服务`HTTPS`之间切换时，会话 ID 不会传递给会话。您可以通过将会话 ID 从 HTTP 传递到 HTTPS 来设置它。`HTTP``HTTPS`

您可以管理 HTTP 到 HTTPS 或 HTTPS 到 HTTP 之间的会话：

1.  使用 GET 在页面之间传输会话 ID
2.  通过 POST POST 会话 ID
3.  使用文件保存会话
4.  使用 Cookie 进行会话
5.  使用数据库保存会话

# javascript - 在tiptip中创建和提交表单

> ID：14909237
> 
> 赞同：0
> 
> 时间：2013-02-16T10:23:28.033
> 
> 标签：javascript, jquery, jquery-ui, tooltip

我刚刚实现了tiptip，发现它非常好用。现在我想制作一个表格并在tiptip工具提示中使用它，以便用户可以填写并提交它。

我创建了tiptip作为

```
 $('.div').tipTip({
    maxWidth: 1000,
    defaultPosition: 'right',
    content: function (e) {
      $.ajax({
        url: 'tets.php', 
        datatype: JSON,
        success: function (response) {
        $('#tiptip_content').html(response);
        $('body').append(response).fadeIn('1000');// the var e is the callback function data (see above)
        }
      });
      return 'Please wait...'; // We temporary show a Please wait text until the ajax success callback is called.
    }
  }); 
```

我的工具提示中有一个表格。现在，只要我将鼠标放入其中，它就会消失（显然，它最后是一个工具提示）。有什么办法可以做我想要实现的目标吗？

我的html

```
<div class="div">Hover on Me</div> 
```

tets.php

```
<form id = "testForm" method="post" action="newEmptyPHP.php">
  <table width="400" border="0" align="center" cellpadding="5" cellspacing="0">
    <tr>
      <td width="150">Username</td>
      <td width="250"><input name="username" type="text" class="textfield" /></td>
    </tr>
    <tr>
      <td>Password</td>
      <td><input name="password" type="password" class="textfield" /></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input name="remember" type="checkbox" value="d"> Remember me</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input type="submit" name="login" value="Login" /></td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:34:37.823

[http://code.drewwilson.com/entry/tiptip-jquery-plugin](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

“keepAlive: true of false（默认为 false）- 当设置为 true 时，TipTip 只会在您将鼠标悬停在实际的 TipTip 上然后将鼠标悬停在它上面时淡出。”

尝试添加此属性并将其设置为 true

**更新：**

这里的例子：http: [//jsbin.com/imeqes/2/](http://jsbin.com/imeqes/2/)

当您将鼠标悬停在图像上时似乎可以正常工作，然后将鼠标悬停在提示上，它会停留在那里。

# android - 如何从 BroadcastReceiver 更新 ListView？

> ID：14909239
> 
> 赞同：1
> 
> 时间：2013-02-16T10:23:34.697
> 
> 标签：android, broadcastreceiver

只更新 a 完全没问题`TextView`，但是当我尝试更新 a `ListView`from`onReceive`时，我一直`NullPointerException`从`getView`方法 ( `BaseAdapter`) 获取。我都尝试过 `handler.post`，`runOnUiThread`但问题仍然存在。我错过了什么？

```
public class MainActivity extends Activity {

    private SimpleBroadcastReceiver receiver;
    private List<User> users;
    private UserItemAdapter adapter;
    private ListView listview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_service);
        setup();
        setupControls();
        setupViews();
    }

    private void setupViews() {
        users = new ArrayList<User>();
        User chan = new User();
        chan.setUsername("Username");
        users.add(chan);
        adapter = new UserItemAdapter(this, users);
        listview = (ListView) findViewById(R.id.listview);
        listview.setAdapter(adapter);
    }

    private void setupControls() {
        Button b = (Button) findViewById(R.id.button);
        b.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(MainActivity.this, SimpleIntentService.class);
                Toast.makeText(MainActivity.this, "Start Service", Toast.LENGTH_SHORT).show();
                startService(intent);
            }
        });
    }

    private void setup() {
        IntentFilter filter = new IntentFilter(SimpleBroadcastReceiver.ACTION_RESPONSE);
        filter.addCategory(Intent.CATEGORY_DEFAULT);
        receiver = new SimpleBroadcastReceiver(new Handler());
        registerReceiver(receiver, filter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void updateUi(final List<User> data) {
        this.runOnUiThread(new Runnable() {
            public void run() {
                for (User u : data) {
                    users.add(u);
                }
                adapter.notifyDataSetChanged();
            }
        });

    }

    public class SimpleBroadcastReceiver extends BroadcastReceiver {
        public static final String ACTION_RESPONSE = "com.csun.intent.action.MESSAGE_PROCESSED";
        private Handler handler;

        public SimpleBroadcastReceiver(Handler handler) {
            this.handler = handler;
        }

        @Override
        public void onReceive(Context context, Intent intent) {
            TextView t = (TextView) findViewById(com.csun.tutorplus.R.id.textview);
            t.setText("Hello");
            final ArrayList<User> data = (ArrayList<User>) intent.getSerializableExtra("users");
            updateUi(data);
        }
    }

} 
```

**用户项适配器**

```
public class UserItemAdapter extends BaseAdapter {
    private static final String TAG = UserItemAdapter.class.getSimpleName();
    private List<User> users;
    private Context context;
    private LayoutInflater inflater;

    static class ViewHolder {
        ImageView photo;
        TextView username;
    }

    public UserItemAdapter(Context context, List<User> users) {
        this.context = context;
        this.users = users;
        this.inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return users.size();
    }

    public Object getItem(int position) {
        return users.get(position);
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.item_user, null);
            holder = new ViewHolder();
            holder.photo = (ImageView) convertView.findViewById(R.id.item_user_XML_imageview_userphoto);
            holder.username = (TextView) convertView.findViewById(R.id.item_user_XML_textview_username);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.username.setText(users.get(position).getUsername());
        return convertView;
    }

} 
```

**错误日志**

```
02-16 02:18:27.994: E/AndroidRuntime(26343): FATAL EXCEPTION: main
02-16 02:18:27.994: E/AndroidRuntime(26343): java.lang.NullPointerException
02-16 02:18:27.994: E/AndroidRuntime(26343):    at com.csun.tutorplus.UserItemAdapter.getView(UserItemAdapter.java:54)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.AbsListView.obtainView(AbsListView.java:1409)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.ListView.makeAndAddView(ListView.java:1793)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.ListView.fillSpecific(ListView.java:1338)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.ListView.layoutChildren(ListView.java:1624)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.AbsListView.onLayout(AbsListView.java:1260)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.View.layout(View.java:7277)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.View.layout(View.java:7277)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.View.layout(View.java:7277)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.View.layout(View.java:7277)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.View.layout(View.java:7277)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1203)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.os.Looper.loop(Looper.java:150)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at android.app.ActivityThread.main(ActivityThread.java:4369)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at java.lang.reflect.Method.invoke(Method.java:507)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:846)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:604)
02-16 02:18:27.994: E/AndroidRuntime(26343):    at dalvik.system.NativeStart.main(Native Method) 
```

# mod-rewrite - Ubuntu 12.04 Laravel 和 mod 重写

> ID：14909240
> 
> 赞同：1
> 
> 时间：2013-02-16T10:23:38.417
> 
> 标签：mod-rewrite, apache2, laravel, laravel-4

localhost/mysite/public - 工作 localhost/mysite/public/index.php/tasks - 工作 localhost/mysite/public/tasks - 不工作 错误 404

我几乎尝试了所有方法，但仍然有问题。我有 mod rewrite on - 我用过：sudo a2enmod vhost_alias rewrite 并重新启动服务器

我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我的 etc/apache2/sites-avaliable/default 类似：

```
 <VirtualHost *:80>
ServerAdmin webmaster@localhost

DocumentRoot /var/www/
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>

</VirtualHost> 
```

当我将 AllowOverride 更改为 All 时 - 只有“localhost/”在工作，但我无法运行任何网站，如“localhost/mysite”。

我试图将下一个虚拟主机添加到默认文件中，例如：

```
 <VirtualHost *:80>
  DocumentRoot /var/www/mysite/public/
  <Directory /var/www/mysite/public/>
  AllowOverride All
 </Directory>
 </VirtualHost> 
```

但它根本不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:39:55.603

首先，如果您使用的是 Laravel 3，请确保您已更新 /application/config/application.php 并将“应用程序索引”变量设置为空值，例如“”。[https://github.com/laravel/laravel/blob/master/application/config/application.php#L42](https://github.com/laravel/laravel/blob/master/application/config/application.php#L42)

如果您已经这样做了，请尝试设置虚拟主机。听起来您正在使用 Apache 2。

首先创建一个额外的 vhosts 文件，例如 /etc/apache2/sites-available/laravel

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName laravel.dev
    ServerAlias *.laravel.dev
    DocumentRoot /home/kriss/projects/laravel/public
</VirtualHost> 
```

然后更新您的 /etc/hosts 文件并添加

```
127.0.0.1 laravel.dev 
```

然后（这可能是您之前错过的步骤）

```
sudo a2ensite laravel 
```

这将在 /etc/apache2/sites-enabled 中创建一个指向您的 vhost 配置文件的 sim 链接。最后重启你的服务器：

```
sudo service apache2 restart 
```

您应该能够连接到 URL [http://laravel.dev](http://laravel.dev)，并且您的重写应该可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T22:17:14.547

在终端中运行以下命令以启用`mod_rewrite`.

```
sudo a2enmod rewrite 
```

现在重新启动 Apache。

```
sudo service apache2 restart 
```

# cuda - CUDA中的warp和bank的机制是什么？

> ID：14909241
> 
> 赞同：1
> 
> 时间：2013-02-16T10:23:43.617
> 
> 标签：cuda, bank-conflict

我是学习CUDA并行编程的菜鸟。现在我对设备的全局内存访问感到困惑。这是关于翘曲模型和合并的。

有几点：

1.  据说一个块中的线程被分成经线。在每个经纱中最多有 32 个线程。这意味着同一个warp的所有这些线程将在同一个处理器上同时执行。那么半曲折的意义是什么？

2.  当涉及到一个块的共享内存时，它会被分成16个bank。为了避免银行冲突，多个线程可以同时读取一个银行，而不是写入同一个银行。这是一个正确的解释吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T00:03:12.980

1.  “half-warp”的主要用法是在 Fermi 一代之前应用于 CUDA 处理器（例如“Tesla”或 GT200 一代，以及最初的 G80/G92 一代）。 [这些 GPU 采用 SM（流式多处理器 - GPU 内部的一个硬件块）构建而成，具有少于 32 个线程处理器](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#architecture-1-x)。经线的定义仍然相同，但实际的硬件执行一次发生在“半经线”中。实际上，粒度细节比这更复杂，但只要说执行模型导致内存请求根据半扭曲的需要发出就足够了，即扭曲内的 16 个线程。因此，命中内存事务的完整 warp 将为该事务生成总共 2 个请求。

    [Fermi 和更新的 GPU 每个 SM 至少有 32 个线程处理器](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#compute-capability-2-x)。因此，内存事务在整个 warp 中是立即可见的。因此，内存请求是在 per-warp 级别发出的，而不是 per-half-warp。但是，一个完整的内存请求一次只能检索 128 个字节。因此，对于每个事务的每个线程大于 32 位的数据大小，内存控制器仍可能将请求分解为半扭曲大小。

    我的观点是，特别是对于初学者来说，没有必要对半翘曲有详细的了解。通常理解它是指一组 16 个线程一起执行就足够了，它对内存请求有影响。

2.  例如，[费米级 GPU](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared-memory-2-x)上的共享内存 分为 32 个组。在[以前的 GPU 上](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared-memory-1-x) ，它被分成 16 个组。在同一内存请求中（即源自同一代码指令）中，只要一个单独的银行被多个线程访问，就会发生银行冲突。为了避免银行冲突，基本策略与合并内存请求的策略非常相似，例如。用于全局内存。在 Fermi 和更新的 GPU 上，多个线程可以读取同一个*地址*而不会导致 bank 冲突，但一般来说，bank 冲突的*定义*是多个线程从同一个 bank 中读取。为了进一步了解共享内存以及如何避免银行冲突，我建议关于[此主题的](http://developer.download.nvidia.com/CUDA/training/sharedmemoryusage_july2011.mp4)[NVIDIA 网络研讨会](https://developer.nvidia.com/gpu-computing-webinars)。

# macos - GWT中苹果的关键代码

> ID：14909245
> 
> 赞同：0
> 
> 时间：2013-02-16T10:24:47.597
> 
> 标签：macos, gwt

我需要捕捉`Apple + C`GWT中的组合`NativePreviewHandler`

这是用于捕获的代码，`CTRL + C`它可以工作：

```
nativeEventsHandlerRegistration = Event.addNativePreviewHandler(new Event.NativePreviewHandler() {

    @Override
    public void onPreviewNativeEvent(Event.NativePreviewEvent event) {

        NativeEvent nativeEvent = event.getNativeEvent();

        if (Event.getTypeInt(nativeEvent.getType()) == Event.ONKEYDOWN) {
            if (nativeEvent.getCtrlKey() && 'C' == nativeEvent.getKeyCode()) {      
                // do something
            }
        }

    }

}); 
```

我需要同样的东西，但对于 MAC，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:39:10.063

在stackoverflow上已经有一个与你非常相似的讨论去看看：

[如何通过 JavaScript 捕获 Mac 的命令键？](https://stackoverflow.com/questions/3902635/how-does-one-capture-a-macs-command-key-via-javascript)

# php - 如何在 php 中用 out \n \t \r 回显？

> ID：14909246
> 
> 赞同：-3
> 
> 时间：2013-02-16T10:24:47.927
> 
> 标签：php, html, mysql

在我的代码中，这个选择：

```
<select name="TutorName">
        <?php
        while ($tutor = mysql_fetch_array($resultTutor, MYSQL_ASSOC)) {
        ?>
        <option value="<?php echo $tutor['TutorPrefix'];?> 
                        <?php echo $tutor['TutorFirstName'];?> 
                        <?php echo $tutor['TutorLastName'];?>">
                        <?php echo $tutor['TutorPrefix'];?> 
                        <?php echo $tutor['TutorFirstName'];?> 
                        <?php echo $tutor['TutorLastName'];?> </option>

        <?php
        }
        ?>
        </select> 
```

问题是我在 html 中得到了这个结果

```
"TutorName":"Dr. \r\n\t\t\t\t\t\tSafaa \r\n\t\t\t\t\t\tNassar", 
```

我怎样才能在没有 \r\n\t 的情况下将它们加入一行

我试过这个但它不起作用

```
<?php echo $tutor['TutorPrefix']$tutor['TutorFirstName']$tutor['TutorLastName'];?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:28:25.820

```
<?php echo "$tutor[TutorPrefix]$tutor[TutorFirstName]$tutor[TutorLastName]";?> 
```

注意引号。

或者，您可以使用这种方法：

```
while ($tutor = mysql_fetch_array($resultTutor, MYSQL_ASSOC)) {
    $input = "<option value='$tutor[TutorPrefix] 
                    $tutor[TutorFirstName] 
                    $tutor[TutorLastName]'>
                    $tutor[TutorPrefix] 
                    $tutor[TutorFirstName] 
                    $tutor[TutorLastName]'
              </option>";
    //Do some processing according to the other answers
    echo removeunwantedcharcters($input);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:26:21.837

```
echo $tutor['TutorPrefix'].$tutor['TutorFirstName'].$tutor['TutorLastName']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T10:30:39.637

您可以使用

```
$cleanString = trim($strname, "\t"); 
```

从字符串中删除不需要的字符。

[在此处](http://php.net/manual/en/function.trim.php)查看 php 文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T10:29:08.497

试试这个

```
$output = str_replace(array("\r","\n","\t"), "", $input); 
```

也试试这个

```
$regex = '/(\s|\\\\[rntv]{1})/';
$output = preg_replace($regex, '', $input); 
```

# ruby-on-rails - 在 url 路径中包含 url 参数

> ID：14909247
> 
> 赞同：2
> 
> 时间：2013-02-16T10:24:59.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`products_path(page: 1)`生成 url `/products?page=1`。

怎么生成`/products/page/1`呢？

假设我有

```
resources :products 
```

在`routes.rb`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:50:34.063

将此添加到 routes.rb：

```
match "/products/page/:page" => "products#index" 
```

它将在 params 哈希中设置页面参数。

# android - 如何更改微调器文本和背景颜色？

> ID：14909249
> 
> 赞同：0
> 
> 时间：2013-02-16T10:25:20.947
> 
> 标签：android, colors, textview, background-color, android-spinner

我放了一个微调器，`AlertDialog`由于某种原因，那里的颜色显示与正常活动不同。这让我想到了这个问题：

![安卓微调器](../Images/d1fd3b067878e3bcd63e9b6c3d49ce7e.png)

当我在正常活动中使用该微调器时，文本颜色为黑色，下拉列表的背景颜色为灰色。相反，下拉列表的背景颜色为黑色，文本颜色为白色。这也可以，但问题是，正如您在该图像上看到的那样，白色文本在该灰色背景上几乎不可见。

我试图定义新的 TextView 并应用新的适配器，但这只会影响下拉列表的颜色。选择项目后，文本仍为白色。

spinner_text.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView  
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:gravity="left"  
  android:textColor="@android:color/black"        
/> 
```

适配器

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spinner_text, values);
spinner.setAdapter(adapter); 
```

如果我在布局中放置了一个由活动使用的微调器，我想要的只是看起来一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:42:53.293

因为这是因为您为您的应用程序设置了主题。您需要为此实现自定义适配器类并实现 SpinnerAdapter。

这是这个的例子

```
public class CusSpinnerAdapter extends ArrayAdapter<String> 
    implements SpinnerAdapter{
    private LayoutInflater inflate;
    private int resourceId;
    private String[] options;
    private int selIndex;
    private Context context;

    public CusSpinnerAdapter(Context context, int textViewResourceId,
            String[] objects) {
        super(context, textViewResourceId, objects);
        this.context = context;
        this.inflate = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.resourceId = textViewResourceId;
        this.options = objects;
    }
    public void setSelectedIndex(int selIndex){
        this.selIndex = selIndex;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView==null){
            convertView = inflate.inflate(resourceId, null);
            Holder holder = new Holder();
            holder.textView = (TextView)convertView.findViewById(R.id.spinner_item);
            convertView.setTag(holder);
        }
        Holder holder = (Holder)convertView.getTag();
        holder.textView.setText(options[position]);

        return convertView;
    }
    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        if(convertView==null){
            convertView = inflate.inflate(resourceId, null);
            Holder holder = new Holder();
            holder.textView = (TextView)convertView.findViewById(R.id.spinner_item);
            convertView.setTag(holder);
        }
        Holder holder = (Holder)convertView.getTag();
        holder.textView.setText(options[position]);
        if(position==selIndex){
            holder.textView.setBackgroundColor(context.getResources().getColor(R.color.spinner_item_selected));
        }else
            holder.textView.setBackgroundColor(context.getResources().getColor(R.color.spinner_item_default));

        return convertView;
    }
    private class Holder{
        TextView textView;
    }
} 
```

在这个 selIndex 中被选中的索引项。当您确定选择了哪个项目并为您的项目设置选定的可绘制对象时，您需要实现这一点。只需在微调器控件的选定项目上实现，并从中设置此适配器类的索引值。

这也是另一种方式

[https://stackoverflow.com/a/4662939/760489](https://stackoverflow.com/a/4662939/760489)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T10:52:33.913

把这些线条放在你的风格中

```
<style name="mytheme" parent="@android:style/Theme.Dialog">
    <item name="android:textColor">#000000</item>
</style> 
```

然后在你的清单文件中包含这种风格，如下所示

```
 <activity
        android:name="com.agencymodel.views.TempOrderActivity"          
        android:theme="@style/mytheme" >
    </activity> 
```

# sql-server - 如何在 SQL 中创建移动平均法？

> ID：14909253
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:25:49.757
> 
> 标签：sql-server, sql-server-2008, moving-average

如何在 SQL 中创建移动平均法？

订单表：

```
id_order id_staff date_order
O0001   S0003   12/12/2555
O0002   S0003   12/12/2555
O0003   S0003   12/12/2555
O0004   S0003   13/12/2555
O0005   S0003   13/12/2555
O0006   S0003   13/12/2555
O0007   S0003   13/12/2555
O0008   S0003   13/12/2555 
```

detail_order 表：

```
idde_order id_order id_material count
M0004   O0003   S0002   3   
M0005   O0003   S0003   5   
M0009   O0003   S0002   3   
M0010   O0003   S0003   5   
M0011   O0003   S0001   3 
```

所需的表连接或输出：

```
Date         count  3 day Moving Average
2012-05-01       2
2012-05-02       3
2012-05-03       5          4
2012-05-04       1          3
2012-05-05       2          3
2012-05-06       3          3
2012-05-07       2          3 
```

理论

```
Month count   3-Month Moving Average     4-Month Moving Average
January 10       
February12       
March   13       
April   16  (10+12+13)/3=11.67   
May     19  (12+13+16)/3=13.67   (10+12+13+16)/4=12.75 
June    23  (13+16+19)/3=16      (12+13+16+19)/4=15
July    26  (16+19+23)/3=19.33   (13+16+19+23)/4=17.75
August      (19+23+26)/3=22.67   (16+19+23+26)/4=21 
```

谢谢你亲爱的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:24:27.107

```
create table tmp (
  order_date datetime,
  [count] int
)

insert into tmp
  values ('2012-05-01', 2),
         ('2012-05-02', 3),
         ('2012-05-03', 5),
         ('2012-05-04', 1),
         ('2012-05-05', 2),
         ('2012-05-06', 3),
         ('2012-05-07', 2) 
GO

select t.order_date, t.[count], ceiling((t.[count] + t2.[count] + t3.[count]) / 3.0) as moving_average_3day
from (
  select order_date, dateadd(day, -1, order_date) as prev, dateadd(day, -2, order_date) as prev2, [count]
  from tmp
) t
left outer join tmp t2 on t.prev = t2.order_date
left outer join tmp t3 on t.prev2 = t3.order_date
order by 1 
```

# php - 使用学说处理文件集合的上传

> ID：14909257
> 
> 赞同：0
> 
> 时间：2013-02-16T10:26:07.500
> 
> 标签：php, symfony

我已经阅读了 symfony2 文档的这一部分：http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html[并使](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)它对我有用。但是，如果我有一个带有“allow_add”属性的“文件”字段的集合，所以我不知道用户将通过表单发布多少文件？如何以同样的方式处理它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:47:58.107

您需要告诉您的表单接受这样的多个文件

```
{{ form_widget(form.file, { 'attr': { 'multiple': 'multiple' } }) }} 
```

或这个

```
{{ form_widget(yourForm.file, { 'full_name':
                                 yourForm.file.get('full_name') ~ '[]' }) }} 
```

在这里阅读[https://github.com/symfony/symfony/issues/1400](https://github.com/symfony/symfony/issues/1400)

这样，您可以一次选择并上传多个文件。

# jsp - 在jsp中单击按钮时如何调用方法？

> ID：14909262
> 
> 赞同：0
> 
> 时间：2013-02-16T10:26:24.210
> 
> 标签：jsp, jsp-tags

```
<%!  
 public void display()  
 {  
     System.out.println("Hai");  
 }
 %>

<input type="submit" value="touch me" method="display()"/> 
```

> > 我有一个像上面这样的jsp页面。用户单击按钮时如何调用方法。上面的代码不起作用。没有javascript我怎么做...

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-16T10:43:28.467

您混淆了服务器端和客户端。代码在服务器端生成，您的用户在客户端单击。如果要从客户端调用服务器端代码，则需要查看[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。
如果要在客户端执行事件，则需要使用 javascript

```
<script type="text/javascript>
 function alert() {
  alert("Hai");
 }
</script
<input type="submit" value="touch me" onClick="alert();"/> 
```

# mysql - 性能方面：使用内部联接还是打开新连接/另一个查询更好

> ID：14909263
> 
> 赞同：-4
> 
> 时间：2013-02-16T10:26:28.160
> 
> 标签：mysql, sql, jdbc

我有 2 个这样的表：

表 A：

```
article_id | attribute_id
1          | 5
2          | 6 
```

表 B：

```
attribute_id | attribute_name
5            | foo
6            | bar 
```

我想得到结果：

```
article_id | attribute_id | attribute_name
1          | 5            | foo 
```

我有 2 个解决方案： 解决方案 A：要么像这样使用内部联接：

```
SELECT TableA.article_id, TableB.*
FROM TableA
INNER JOIN TableB ON TableA.attribute_id = TableB.attribute_id
WHERE TableA.article_id = 1 
```

或解决方案 B，在我的 Java 程序中：

*   首先在表 A 中查询。
*   打开新连接，并使用第一次查询中的“article_id”在表 B 中查询。

我想知道性能方面，哪种解决方案更好。请注意，表 A 和 B 将获得大量点击。另外，请注意，我正在使用 mysql 和 tomcat。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:28:49.497

这几乎总是“用你的真实数据尝试一下，看看哪个效果更好”的事情。

一般来说*，*我希望加入更有效（更多）。*但是，您*必须再次尝试使用*您的*数据和设置。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:28:18.597

连接速度要快很多，因为新连接有相当多的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:31:10.137

简短的回答：加入。

长答案：如果您**非常**关心性能，我会说基于连接创建一个索引视图，然后选择它。*

# javafx - JavaFX - 用鼠标拖动边框时，BorderPane 调整底部、顶部、左侧、右侧、中心的大小

> ID：14909269
> 
> 赞同：1
> 
> 时间：2013-02-16T10:27:30.967
> 
> 标签：javafx, pane

是否可以通过鼠标移动边框来调整 BorderPane 中的窗格大小？我想将左窗格设置为 200，但是当我将中心部分设置为更大尺寸时，左窗格的部分重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:17:45.743

我宁愿在左窗格中添加一个组件，并设置该组件的首选宽度。如果您使用的是 SceneBuilder，则添加一个组件并拖动它的边框即可。

# sql - Hibernate：从嵌入式地图中删除 HQL

> ID：14909271
> 
> 赞同：2
> 
> 时间：2013-02-16T10:28:05.833
> 
> 标签：sql, hibernate, hql, hibernate-4.x, hql-delete

我想从嵌入式地图中删除条目。如果对象`CategoryTag`被删除，我想在拦截器中执行 HQL 查询，该查询会从地图中删除条目：

**“产品”型号：**

```
@NotNull
@ElementCollection
@CollectionTable(name = "producttag", joinColumns=@JoinColumn(name="id"))
protected Map<CategoryTag, String> tags = new HashMap<CategoryTag, String>(); 
```

我有点空白如何编写 HQL 查询。它从问题开始，我不知道如何在删除查询中引用地图。`delete Product.tags t where t.key = :tag`失败但有`Product.tags is not mapped`异常。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:34:59.363

标签不是实体。

```
A delete operation only applies to entities of the specified class and its subclasses. It does not cascade to related entities. 
```

这就是您收到错误的原因。正确的方法是加载Entity，更新它的集合，然后保存这个对象。

```
Product p = session.load(Product.class, id);
p.removeTags(tag);
session.flush(); 
```

# java - 重新验证 JPanel 时闪烁

> ID：14909274
> 
> 赞同：1
> 
> 时间：2013-02-16T10:28:16.863
> 
> 标签：java, swing, jframe, jpanel, jlabel

我环顾四周，似乎没有人能回答我。我有一个`JPanel`在它运行时添加/删除标签的地方。问题是每次我添加一个新标签时，我都必须添加新标签才能`revalidate()`显示出来。每次我`revalidate()`，我都会得到一个非常烦人的闪烁，我所有的标签都会在我的窗口顶部出现一毫秒，然后返回它们正在做的事情。我唯一一次打电话`revalidate()`是在我添加标签之后；我不改变绘画方法或任何东西只做了

```
public void paintComponent(Graphics page)
{
    super.paintComponent(page);
} 
```

这样我的页面就不会看起来很糟糕。我真的可以在这方面使用一些帮助。我用`JFrame`,`Jlabel`和游戏制作了一个小行星`Jpanel`游戏；它工作得很好，但是这种闪烁和组件“快速重影到面板顶部”令人无法忍受，而且我知道事实上这是`revalidate()`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:18:07.560

使用标签（或通常是 GUI 组件）来表示快速动画、动态创建/移动的对象是不切实际的。就像开车从客厅开到厨房一样。

Swing 组件有很多不错的特性，例如它们可以确定它们需要的空间，并且布局管理器可以使用它来自动放置它们。不幸的是，对于一款游戏来说，你既不需要所有的好东西，也不想支付与之相关的处理开销。swing 多平台功能使事情变得更加复杂，这些功能要求每个组件都有一个对等组件（对等组件负责将组件呈现为活动外观）。

为了解决这个问题，您不要将单个游戏对象表示为挥杆组件。相反，您使用单个摆动组件（通常是 JPanel）作为画布来绘制您的游戏对象。您只需定期调用该 JPanel 的 repaint()（例如每秒 30 或 60 次）。当然，您将覆盖 JPanel 上的 paintComponent() 以使用您自己的代码绘制所有游戏对象。

编辑：概述您如何进行自己的渲染

您需要决定如何组织与游戏相关的对象。一个非常简单的骨架可能看起来像这样（省略了 getter/setter）：

```
public class GameObject {
    public int x;
    public int y;
    public Image image;
} 
```

实际上，此类将具有其他成员（例如控制对象如何移动的行为，可能还有一些动画状态/计数器）。它也可以是抽象的，每个可能的行为（如船、小行星和子弹）都有一个具体的子类。GameObject 的所有实例都在某种集合中进行管理，我假设您使用列表。

在实现 paintComponent 时，它归结为遍历列表并渲染每个对象的图像：

```
public void paintComponent(Graphics g) {
    List<GameObject> list = ... // however you obtain it in your game
    for (GameObject gobject : list) {
        g.drawImage(gobject.image, gobject.x, gobject.y, (ImageObserver) null);
    }
} 
```

更复杂的游戏可能会命令游戏对象控制游戏对象如何相互重叠。但原则上它非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:37:37.790

您是否考虑过重用它们——即`setVisible(false)`在不需要它们时使用它们？

不确定添加和删除标签是否是实现游戏所需的最佳方式。我个人很想自己管理这幅画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T14:17:51.707

作为一个具体的例子，[`Asteroids`](http://rabbitbrush.frazmtn.com/asteroids.html)根本不闪烁。这里有几个原因：

*   它在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上运行。

*   它使用`JPanel`，默认情况下是双缓冲的。

*   它使用 来调整动画`javax.swing.Timer`，更新游戏的模型`actionPerformed()`。

*   它会覆盖`paintComponent()`，但可以安全地省略`super.paintComponent()`，因为动作侦听器会重新绘制整个面板。

*   侦听器调用`paintImmediately()`以避免任何潜在的延迟；替代`repaint()`以查看您的平台是否有任何差异。

附录：如本[反例所示](https://stackoverflow.com/a/3078354/230513)，`revalidate()`不会引起闪烁。不要*替换*标签，而是*更新标签的图标，如此*[处](https://stackoverflow.com/a/12228640/230513)所示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T10:51:24.503

当我在过滤 Swing 组件时遇到问题时，结果证明是并发问题。既然你在做游戏，这意味着你在做动画，这里可能就是这种情况。

注意仅从`AWT-EVENT thread`. 使用`SwingUtilities.invokeLater`或使用`javax.swing.Timer`.

# c - 将 GTK Window 放在屏幕的一角

> ID：14909279
> 
> 赞同：2
> 
> 时间：2013-02-16T10:28:32.967
> 
> 标签：c, window, positioning, gtk2

我正在用 GTK 用 C 语言编写一个相对简单的消息传递程序，并且想将我的消息查看窗口放在屏幕的特定角落，所以它不碍事。

文档列出了一个函数[`gtk_window_set_gravity`](http://developer.gnome.org/gtk2/stable/GtkWindow.html#gtk-window-set-gravity)，指定其坐标相对于窗口的哪个角，并通过跟踪其他信息[`gtk_window_move`](http://developer.gnome.org/gtk2/stable/GtkWindow.html#gtk-window-move)，发现以下代码会将窗口定位在屏幕的右下角，*忽略多头场景*。

```
gtk_window_set_gravity(GTK_WINDOW(win), GDK_GRAVITY_SOUTH_EAST);
gtk_window_move(GTK_WINDOW(win), gdk_screen_width() - window_width, gdk_screen_height() - window_height); 
```

我几乎是使用 GTK 的新手，甚至更多的是直接使用 GTK 界面的新手（一直在使用 PyGTK），所以我什至不知道现在从哪里开始寻找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:07:51.683

原来这个问题的答案可以在 GDK 中找到，而不是在 GTK 中。

以下代码是我设法弄清楚的：

```
GdkDisplay *display = gdk_display_get_default();
// 0 for the first screen, as we're only concerned about the first one
GdkScreen *screen = gdk_display_get_screen(display, 0);
screen_width = gdk_screen_get_width(screen);
screen_height = gdk_screen_get_height(screen); 
```

`gdk_display_get_n_screens(display)`请注意，如果您对除第一个屏幕之外的任何屏幕感兴趣，则需要使用函数调用来确定屏幕数量。

作为参考，请查看[GdkDisplay](http://developer.gnome.org/gdk/unstable/GdkDisplay.html)、[GdkScreen](http://developer.gnome.org/gdk/unstable/GdkScreen.html)和[multi-heading](http://developer.gnome.org/gdk/stable/multihead.html)的文档。

# python - “global”和“import __main__”之间的区别

> ID：14909285
> 
> 赞同：7
> 
> 时间：2013-02-16T10:29:35.210
> 
> 标签：python

我定义了三个应该改变全局变量的函数`x`。

```
def changeXto1():
    global x
    x = 1

def changeXto2():
    from __main__ import x
    x = 2

def changeXto3():
    import __main__
    __main__.x = 3

x = 0
print x
changeXto1()
print x
changeXto2()
print x
changeXto3()
print x 
```

它给出了结果：

```
0
1
1
3 
```

`changeXto1`使用正常的全局语句。结果如预期`x`== 1.`changeXto2`用于`from __main__ import`寻址`x`。这行不通。之后`x`还是 1.`changeXto3`使用via`import main`来寻址。之后的结果是预期的 3。`x``__main__.x`

为什么不`from __main__ import`工作`changeXto2`，而`import __main__`工作`changeXto3`？如果我们也可以使用模块处理全局变量，为什么我们需要 Python 中的全局语句`__main__`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T11:11:36.077

这与 Python 如何将您的代码转换为字节码（编译步骤）有关。

在编译函数时，Python 将所有分配的变量视为局部变量并执行优化以减少它必须执行的名称查找次数。每个局部变量都被分配一个索引，当函数被调用时，它们的值将存储在一个由索引寻址的堆栈局部数组中。编译器将发出`LOAD_FAST`和`STORE_FAST`操作码来访问变量。

相反，该`global`语法向编译器表明，即使为变量赋值，也不应将其视为局部变量，也不应为其分配索引。它将改为使用`LOAD_GLOBAL`和`STORE_GLOBAL`操作码来访问变量。这些操作码较慢，因为它们使用名称在可能的许多字典（本地、全局）中进行查找。

如果仅访问变量以读取该值，则编译器总是发出，`LOAD_GLOBAL`因为它不知道它应该是局部变量还是全局变量，因此假定它是全局变量。

因此，在您的第一个函数中， using`global x`通知编译器您希望它将写入访问`x`视为对全局变量而不是局部变量的写入。该函数的操作码清楚地表明：

```
>>> dis.dis(changeXto1)
  3           0 LOAD_CONST               1 (1)
              3 STORE_GLOBAL             0 (x)
              6 LOAD_CONST               0 (None)
              9 RETURN_VALUE 
```

在您的第三个示例中，您将`__main__`模块导入到名为的局部变量`__main__`中，然后分配给它的`x`字段。由于模块是将所有顶级映射存储为字段的对象，因此您正在分配给模块`x`中的变量。`__main__`正如您所发现的，`__main__`模块字段直接映射到`globals()`字典中的值，因为您的代码是在`__main__`模块中定义的。操作码表明您不能`x`直接访问：

```
>>> dis.dis(changeXto3)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               0 (None)
              6 IMPORT_NAME              0 (__main__)
              9 STORE_FAST               0 (__main__)

  3          12 LOAD_CONST               2 (3)
             15 LOAD_FAST                0 (__main__)
             18 STORE_ATTR               1 (x)
             21 LOAD_CONST               0 (None)
             24 RETURN_VALUE 
```

第二个例子很有趣。由于您为`x`变量分配了一个值，因此编译器假定它是一个局部变量并进行优化。然后，`from __main__ import x`确实导入模块`__main__`并创建一个新的绑定`x`模块中的值`__main__`到名为的局部变量`x`。总是这样，`from ${module} import ${name}`只需创建一个新的绑定当前命名空间。当您为变量分配新值时，`x`您只需更改当前绑定，而不是模块`__main__`中不相关的绑定（尽管如果该值是可变的，并且您对其进行了变异，则更改将通过所有绑定可见）。以下是操作码：

```
>>> dis.dis(f2)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               2 (('x',))
              6 IMPORT_NAME              0 (__main__)
              9 IMPORT_FROM              1 (x)
             12 STORE_FAST               0 (x)
             15 POP_TOP             

  3          16 LOAD_CONST               3 (2)
             19 STORE_FAST               0 (x)
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

考虑这一点的一个好方法是，在 Python 中，所有赋值都是将名称绑定到字典中的值，而取消引用只是进行字典查找（这是一个粗略的近似，但非常接近概念模型）。这样做时`obj.field`，您正在查找`obj`(accessible via `obj.__dict__`)的隐藏字典以获取`"field"`密钥。

当你有一个裸变量名时，然后在字典中查找它`locals()`，然后在`globals()`字典中查找它是否不同（在模块级别执行代码时它们是相同的）。对于赋值，它总是将绑定放在`locals()`字典中，除非你声明你想要一个全局访问`global ${name}`（这种语法也适用于顶层）。

所以翻译你的函数，这几乎就像你写的那样：

```
# NOTE: this is valid Python code, but is less optimal than
# the original code. It is here only for demonstration.

def changeXto1():
    globals()['x'] = 1

def changeXto2():
    locals()['x'] = __import__('__main__').__dict__['x']
    locals()['x'] = 2

def changeXto3():
    locals()['__main__'] = __import__('__main__')
    locals()['__main__'].__dict__['x'] = 3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T10:35:11.737

> 为什么不`from __main__ import`工作`changeXto2`，而`import __main__`工作`changeXto3`？

它工作正常，只是没有做你想做的事。它将名称和值复制到本地命名空间，而不是让代码访问`__main__`的命名空间。

> 如果我们也可以使用模块处理全局变量，为什么我们需要 Python 中的全局语句`__main__`？

因为它们仅*在您的代码在`__main__`*. 如果你正在运行，比如说，`othermodule`在导入它之后，那么`__main__`将引用主脚本而*不是* `othermodule`.

# javascript - javascript事件回调中的e参数

> ID：14909288
> 
> 赞同：0
> 
> 时间：2013-02-16T10:30:30.343
> 
> 标签：javascript

很长时间以来，我想了解更多关于`e`我们可以在事件回调中捕获的参数的信息，大部分时间都是调用`e.preventDefault()`.

我想知道我们可以用这个变量访问什么，直接获取事件关注的元素会很有趣，例如：

```
<button class="active" onclick="callback()">Click me</button>

<script>
  function callback(e) {
    if (e.className == "active") {
      //proocess...
    }
  }
</script> 
```

是否可以 ？我们可以对这个`e`参数使用什么功能？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:02:21.573

抓住`e`您的控制台并亲自检查一下！

```
function callback(e) {

    console.log(e);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T10:36:20.630

您可以从事件对象中获取相关元素，只需调用：

```
e.target 
```

我认为微软处理它的方式不同，所以：

```
e.srcElement 
```

会在他们的情况下工作

# c++ - c++ strage解决编译错误

> ID：14909290
> 
> 赞同：2
> 
> 时间：2013-02-16T10:30:42.283
> 
> 标签：c++, reference, compiler-errors, operators, pass-by-reference

看看下面的代码：

```
struct s
{
    s&  operator+() {return*this;}
};

void foo(s &)   {}

s bar() {}

int main()
{
    foo(bar());     //comp error
    foo(+bar());    //ok
} 
```

我认为 main() 中的两行应该是等价的，因为编译器优化掉了 operator+()，对吧？接受一个而不接受另一个有什么意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T10:35:53.573

该行`foo(bar())`试图将类型的右值`s`（由 临时返回）绑定到对（的参数）`bar()`的非`const`左值引用。这是非法的，因此编译错误。右值只能绑定到右值引用或左值引用。`s``foo()``const`

`+bar()`另一方面，表达式返回一个左值引用（即 的返回类型`operator + ()`），它*可以*绑定到 的左值引用参数`foo()`。

但请注意：您将在此处返回对*临时*对象的左值引用。虽然在内部使用它`foo()`仍然是安全的（当创建它的完整表达式被完全评估时，临时将被销毁，因此在返回之后），如果您将该引用存储在某处并稍后取消引用`foo()`，您将获得**未定义的行为。**

因此，与其将其视为“编译错误的*解决方案*”，不如将其视为一种蒙住编译器的方法，这样您就可以自由地潜入**大**麻烦。

# ruby-on-rails - Rspec NameError，如何重构此代码并正确使用路由助手？

> ID：14909292
> 
> 赞同：1
> 
> 时间：2013-02-16T10:30:57.047
> 
> 标签：ruby-on-rails, testing, rspec, refactoring, ruby-on-rails-3.2

我正在尝试使以下工作：

```
#spec/features/senseis_spec.rb
require 'spec_helper'

describe "Senseis" do
  subject { page }
  @paths = [senseis_path, new_sensei_path, edit_sensei_path(1), sensei_path(1)]

  describe "sensei can not access" do
    before { login_as_sensei }

    @paths.each do |path|
      describe "#{path}" do
        before { visit path }
        it { should have_selector(error, text: "You are not authorized") }
      end
    end
  end

end 
```

但这给了我一个错误`NameError: undefined local variable or method 'senseis_path'`

我尝试添加`config.include Rails.application.routes.url_helpers`到规范助手，但没有帮助。

很长的路要走：

```
describe "sensei can not access" do
  before { login_as_sensei }

  describe "senseis#index" do
    before { visit senseis_path }
    it { should have_selector(error, text: "You are not authorized") }
  end
end 
```

理想情况下，我想在另一个文件中定义它，然后调用`deny_access_to(path_one, path_two, ...)`

PS`error`在别处定义。

路线：

```
 root        /                             dashboard#index
               senseis GET    /senseis(.:format)            senseis#index
                       POST   /senseis(.:format)            senseis#create
            new_sensei GET    /senseis/new(.:format)        senseis#new
           edit_sensei GET    /senseis/:id/edit(.:format)   senseis#edit
                sensei GET    /senseis/:id(.:format)        senseis#show
                       PUT    /senseis/:id(.:format)        senseis#update
                       DELETE /senseis/:id(.:format)        senseis#destroy
    new_sensei_session GET    /user/sign_in(.:format)       devise/sessions#new
        sensei_session POST   /user/sign_in(.:format)       devise/sessions#create
destroy_sensei_session DELETE /user/sign_out(.:format)      devise/sessions#destroy
       sensei_password POST   /user/password(.:format)      devise/passwords#create
   new_sensei_password GET    /user/password/new(.:format)  devise/passwords#new
  edit_sensei_password GET    /user/password/edit(.:format) devise/passwords#edit
                       PUT    /user/password(.:format)      devise/passwords#update 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:41:03.190

尝试类似的东西

```
require 'spec_helper'

describe "Senseis" do

  def should_deny_access_to(paths)
    paths.each do |path|
      login_as_sensei
      visit path
      page.should have_selector(error, text: "You are not authorized")
    end
  end

  it { should_deny_access_to [senseis_path, new_sensei_path, edit_sensei_path(1), sensei_path(1)] }

end 
```

或使用共享示例组。

# c# - 无法更改文本框属性

> ID：14909295
> 
> 赞同：2
> 
> 时间：2013-02-16T10:31:12.350
> 
> 标签：c#, asp.net

我正在创建一个网页。我`textbox`在设计时添加了一个并将其`textmode`属性更改为最新。

在浏览器中查看时出现以下错误：（*如果我将文本框属性更改为“单行”，我不会收到错误消息）*

> 解析器错误
> 
> 说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：无法创建类型的对象
> 
> 'System.Web.UI.WebControls.TextBoxMode' 来自其字符串表示'Date' 的'TextMode' 属性。

```
Source Error:

Line 20:             <tr>
Line 21:                 <td>
Line 22:                     <asp:TextBox ID="TextBox1" runat="server" TextMode="Date"></asp:TextBox>
Line 23:                 </td>
Line 24:                 <td>&nbsp;</td> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T10:58:25.260

看来您还没有安装 .Net Framework 4.5。.Net Framework 4.5以下的TextMode只有三种模式，即SingleLine、Multiline和password。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T08:37:35.590

如果您不想安装 .NET FRK 4.5，这是一个替代答案：

除了使用属性“TextMode”，您可以将其替换为“type”，这是生成的“HTML Input”中两种情况下的属性名称

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T12:22:59.443

请安装 .Net Framework 4.5，它可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T00:29:37.500

在 Visual Studio IDE 中启动新项目时，请确保选择 .Net Framework 4.5 或更高版本。这样，项目在运行时将支持这些附加功能。

# ruby-on-rails - 从 PostgreSQL bytea escape 下载文件

> ID：14909303
> 
> 赞同：0
> 
> 时间：2013-02-16T10:31:50.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, encoding

我有一些问题允许用户下载文件，该文件存储在 PostgreSQL 字节转义字段（[http://www.postgresql.org/docs/current/interactive/datatype-binary.html](http://www.postgresql.org/docs/current/interactive/datatype-binary.html)）中。

```
1.9.3p385 :023 > data = PG::Connection.unescape_bytea(m[:data])
 => "JVBERi0xLjMKJcTl8uXrp/Og0MTGCjQgMCBvYmoKPDwgL0xlbmd0aCA1IDAg\r\nUiAvRmlsdGVyIC9GbGF0ZURlY29kZSA+Pgpzd..."
1.9.3p385 :023 > data.encoding.name
 => "ASCII-8BIT" 
1.9.3p385 :023 > data.bytesize
 => 3878164 
```

但是当我将“send_data”或“send_file”与 tempfile 一起使用时，我得到的文件格式无效（这是 pdf 文件）。它比原始文件大得多，而且 pdf 阅读器无法打开。

该字段中的数据是电子邮件的 mime 部分。如果我从所有这些部分构建原始电子邮件（使用边界作为分隔符），这封电子邮件将包含有效的 pdf 附件。

我应该如何将此数据转换为字节以允许用户单独下载此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:48:59.350

请参阅以下内容：[http ://rubyforge.org/tracker/index.php?func=detail&aid=27845&group_id=234&atid=967](http://rubyforge.org/tracker/index.php?func=detail&aid=27845&group_id=234&atid=967)

语法类似于 PGConn.unescape_bytea($field);

根据您的 pg 版本，您可能需要升级该 gem

# asp.net-mvc - 在 asp.net mvc 中重新调整弹出窗口的大小

> ID：14909305
> 
> 赞同：0
> 
> 时间：2013-02-16T10:32:03.737
> 
> 标签：asp.net-mvc

我需要调整弹出窗口的大小

我编写了以下代码以及如何调整窗口。

```
 onclick="openAccountPickerDialog(window, document.forms[0].FDOPAC, '@Url.Content("~/")AccountLookup/_LookupIndex/')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:35:02.750

在不知道您的 openAccountPickerDialog 实现的情况下，很难回答这个问题。但是，您确实可以控制通过 JavaScript 打开的窗口。例如：

```
window.open ("http://yoursite.com", "yourwindow","width=100,height=100"); 
```

一个很好的演练位于这里：

[http://www.javascript-coder.com/window-popup/javascript-window-open.phtml](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

干杯。

# jquery - .ajaxComplete 带有日期选择器更改功能：无法进入 ajaxComplete

> ID：14909306
> 
> 赞同：1
> 
> 时间：2013-02-16T10:32:26.607
> 
> 标签：jquery, ajax

我有一个日期选择器，我想在选择日期后立即计算查询。我正在尝试使用 .ajaxComplete，但我无法进入其中。任何想法 ？

```
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
                $( "#datepicker" ).datepicker();
             });
</script>
</head>
<body>  
<div>Date: <input type="text" id="datepicker"/></div>
<div id="result"> Turnover: </div>  
<script>
    $("#datepicker").change(function(){
        var currentDate = $( "#datepicker" ).datepicker( "getDate" );
        $("result").ajaxComplete(function(){
            $(this).html("<p>Result here : </p>");  
        });             
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:23:06.283

你需要添加`#`到`result`这样的

```
$("#result").ajaxComplete(function(){
            $(this).html("<p>Result here : </p>");  
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:06:34.317

我找到了（让我们说至少一个:-)）答案：我什么都没完成！我添加了一个按钮来完成一个事件。

```
 <button class="trigger">Calculate</button>

<script>
        $( ".trigger" ).click(function() {
        $( ".result2" ).load( "ajax/test.html" );
    });
</script> 
```

# c#-4.0 - Facebook 事件给出错误“参数 eid 必须是有效的事件 id”

> ID：14909309
> 
> 赞同：0
> 
> 时间：2013-02-16T10:32:50.463
> 
> 标签：c#-4.0, facebook-graph-api, facebook-c#-sdk

我正在通过 Facebook C# SDK 在 facebook 上发布事件。我可以通过它登录并生成访问令牌。但是当我发布活动时出现错误：

```
Facebook.FacebookOAuthException: (OAuthException - #100) (#100) Param eid must be a valid event id
   at Facebook.FacebookClient.ProcessResponse(HttpHelper httpHelper, String responseString, Type resultType, Boolean containsEtag, IList`1 batchEtags)
   at Facebook.FacebookClient.Api(HttpMethod httpMethod, String path, Object parameters, Type resultType)
   at Facebook.FacebookClient.Post(String path, Object parameters)
   at FacebookSDK.Facebook.CreateEvent(FBEvent fbEvent) 
```

我的代码是

```
public void CreateEvent(FBEvent fbEvent)
        {
            var fb = new FacebookClient(this.AccessToken);

            dynamic parameters = new ExpandoObject();
            parameters.eid = "524654568165461";
            parameters.owner = "me";
            parameters.description = fbEvent.Description;
            parameters.name = fbEvent.Title;
            parameters.start_time = fbEvent.StartTime.ToString("yyyy-MM-dd hh:mm:ss");
            parameters.end_time = fbEvent.EndTime.ToString("yyyy-MM-dd hh:mm:ss");
            parameters.privacy = fbEvent.PrivacyInfo;
            parameters.access_token = this.AccessToken;

            dynamic result = fb.Post("me/event", parameters);
        } 
```

我该如何解决它....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:37:44.193

经过大量搜索，我找到了解决方案....

您必须考虑以下链接

[asp.net + facebook 创建事件](https://stackoverflow.com/questions/13247460/asp-net-facebook-create-event)

在我的情况下，我试图获取动态数据但更改为 JsonObject，它对我有用，例如，

JsonObject 结果 = facebookClient.Post("/me/events", createEventParameters) as JsonObject;

我正在使用 facebook sdk v 6.0.20

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:45:29.757

您正在创建一个新事件吗？如果是这样，请从您的代码中删除此行：

```
 parameters.eid = "524654568165461"; 
```

如果您尝试编辑事件，则此 eid 是错误的。

# clojure - 在clojure中，为什么空列表的类型与非空列表的类型不同？

> ID：14909312
> 
> 赞同：4
> 
> 时间：2013-02-16T10:33:04.067
> 
> 标签：clojure

我想判断两个值是否属于同一类型，但我发现空列表的类型是`clojure.lang.PersistentList$EmptyList`而不是`clojure.lang.PersistentList`.

```
user=> (def la '())
#'user/la
user=> (def lb '(1 2))
#'user/lb
user=> (def t (map type [la lb]))
#'user/t
user=> t
(clojure.lang.PersistentList$EmptyList clojure.lang.PersistentList)
user=> (apply = t)
false
user=> 
```

所以，我想知道为什么空列表的类型与非空列表的类型不同，以及判断两个事物是否属于同一类型的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T13:16:33.723

**不要**依赖 Clojure 数据结构的具体类型。它们是未记录的实现细节，您无法保证它们在 Clojure 的未来版本中不会发生变化。

依赖抽象（例如由or接口定义的）要**安全得多。**这些不太可能以可能破坏您的代码的方式发生变化（我的理解是 Rich Hickey 在抽象方面非常注重向后兼容性。如果您依赖具体的实现，我相信他会说这是您自己的错如果事情破裂）`IPersistentList``ISeq`

但**更好**的是，您应该使用或`clojure.core`等函数，具体取决于您要检测的内容。这些不仅可能长期保持向后兼容性，而且有机会在非 JVM 版本的 Clojure（例如 ClojureScript）上正常工作。`seq?``list?`

# javascript - 如何禁止javascript执行？

> ID：14909314
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:33:09.743
> 
> 标签：javascript, asp.net, .net, ajax, asp.net-mvc

我有一个站点，其中包含来自远程服务器的 AJAX 加载代码。如何禁止执行可能来自远程服务器的代码？“noscript”标签真的足够了吗？

我认为我们不应该关注`</noscript><script>...</script>`即将到来的案例。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:38:46.617

> 如何禁止执行可能来自远程服务器的代码？

向您自己的服务器发出 Ajax 请求。从您的远程服务器请求数据。通过 HTML 解析器和白名单（XSS 过滤器）运行它。然后返回给客户。

> “noscript”标签真的足够了吗？

`noscript`*如果浏览器*不支持 JS ，则提供浏览器应该忽略的内容。它不提供任何类型的沙盒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:28:10.703

您可以针对要通过 ajax 加载的特定元素（使用选择器）。例如（希望这不会令人困惑，但这里有）：

[http://jsbin.com/efazun/2](http://jsbin.com/efazun/2) - (第1页)有一个警报，在页面加载时显示“hello world”。

[http://jsbin.com/ezewep/4/edit](http://jsbin.com/ezewep/4/edit)（第2页）-使用jquery load来加载**第1页**，显示hello world（加载时执行脚本-不好）

[http://jsbin.com/ezewep/2/edit](http://jsbin.com/ezewep/2/edit)（第 3 页） - 使用 jquery load 加载**Page 1**，但仅针对文本，不执行任何脚本（没有 hello world 消息）。

欲了解更多信息：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

# javascript - 用 javascript 播放声音

> ID：14909316
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:33:28.283
> 
> 标签：javascript, jquery, audio, wav

我的 html 中有一个链接。像这样：

```
<a href="#" class="sound">Click</a> 
```

当您单击此按钮时。然后会播放声音。但是我怎么能用 javascript/jquery 做到这一点。这是声音：

[声音](http://staging.newdayatwork.com/wp-content/themes/roots/static/wav/Bliep%20Hoog%201%20rev%20k.wav)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:56:28.707

跨浏览器的最佳实践可能是使用 Flash。但是，如果你想使用漂亮的 HTML5 解决方案，你可以看看这个地方：

[http://code.coneybeare.net/getting-html5-audio-tag-and-flash-fallback-to](http://code.coneybeare.net/getting-html5-audio-tag-and-flash-fallback-to)

# c# - C#进程不会停止执行

> ID：14909319
> 
> 赞同：1
> 
> 时间：2013-02-16T10:33:58.450
> 
> 标签：c#, process

我遇到了一个 C# 2008 Windows 应用程序未完成执行的问题，我正在尝试确定如何解决该问题。最初，C# 2010 控制台应用程序被编写为调用 C# 2008 控制台应用程序，后者又调用 Web 服务。我将这两个应用程序都更改为 windows 应用程序，因为我不希望 dos 弹出窗口。

问题是被调用的 C# 2008 windows 应用程序永远不会完成执行。该过程保留在内存中。

下面列出的代码是 C# 2010 应用程序代码的一部分。

```
private static Logger logger = LogManager.GetCurrentClassLogger(); 
try
{
    Process eProcess = new Process();
    strConsoleAppLocation = ConfigurationManager.AppSettings["client_location"];
    String Process_Arguments = null;
    eRPT_Process.StartInfo.UseShellExecute = false;
    eRPT_Process.StartInfo.FileName = strConsoleAppLocation;
    Process_Arguments = " 1 CLI";
    eProcess.StartInfo.Arguments = Process_Arguments;
    eProcess.Start();
    eProcess.WaitForExit(1800);
    Process_Arguments = null;
    eProcess.StartInfo.UseShellExecute = false;
    Process_Arguments = " 2 TIM";
    eProcess.StartInfo.Arguments = Process_Arguments;
    eProcess.Start();
    eProcess.WaitForExit(1800);
    eProcess.Dispose();
    Process_Arguments = null;
}
catch (Exception e)
{
    logger.Error(e.Message + "\n" + e.StackTrace);
} 
```

我知道 C# 2008 应用程序永远不会通过查看内存中的进程来完成。此外，如果我将代码行更改为以下：`eProcess.WaitForExit();`，应用程序永远不会返回到被调用的程序。

在 C# 2008 调用的应用程序中，执行的最后一行代码如下：

```
Environment.Exit(1); 
```

因此，为了解决这个问题，我有以下问题：

1.  如果您对如何更改我上面列出的代码有建议，请告诉我您的建议是什么？

2.  由于这两个程序现在正在生产中，我想知道您是否有关于如何解决此问题以进行“创可贴”修复的建议？有没有办法让我在 C# 2010 程序完成执行时停止正在运行的 C# 2008 进程？有没有办法让 C# 2008 应用程序在完成执行后杀死自己的进程？如果是这样，你能告诉我如何解决这个问题的代码吗？

3.  对于长期修复，您能告诉我如何确定为什么 C# 2008 进程不会停止以及如何修复它？我会使用分析器，但是我的公司只有 Visual Studio 2010 的专业版。所以你能告诉我你的建议是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:04:21.093

`WaitForExit()`，即无限期地等待它等待结束的进程，而`WaitForExit(int milliseconds)`等待指定的持续时间然后超时。

根据您编写的内容，您从 C# 2010 程序启动的 C# 2008 程序永远不会终止。这可能是由于几个原因。

*   它可能正在等待用户输入。

*   它可能会陷入无限循环。

*   如果它是多线程的，则其中一个线程可能尚未完成执行，这会使进程保持活动状态（以防线程未设置为后台线程）。

尝试直接从命令行运行它，看看它在做什么。

如果从命令行执行时 C# 2008 程序的行为是正确的/符合预期，但从 C# 2010 程序执行时行为不同，则验证两种情况下的参数是否匹配。

您可以使用[pskill](http://technet.microsoft.com/en-us/sysinternals/bb896683)杀死正在运行的进程。您可以执行以下操作：

```
if (!process.WaitForExit(1800))
{
    // launch a process for pskill to kill the C# 2008 program
} 
```

最后，您可以通过打开 C# 解决方案/项目然后使用`Attach to Process`命令来调试正在运行的程序，您可以`Debug`在 Visual Studio 的菜单栏项下找到该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:13:29.237

1.  不，您不能直接在代码中键入 pskill。您将不得不启动一个进程，就像您目前使用 System.Diagnostics.Process 类为 C# 2008 程序所做的那样。

2.  您是对的，您将使用 Visual Studio 附加到该过程，无论项目是在哪个版本中创建的。打开程序的解决方案后，单击`Debug\Attach to Process`。它将显示您机器上正在运行的进程的列表。其中一列（通常是第一列）显示可执行文件的名称，它将与您的 C# 2008 应用程序的名称相匹配。`Attach`在列表中选择 C# 2008 程序，然后在可疑代码行上放置断点后单击按钮。

3.  我不确定你的意思。

4.  调试几乎是您能够弄清楚发生了什么的唯一方法。

我刚刚在重新阅读您的问题时注意到的最后一件事。您已将 C# 2008 应用程序转换为 Windows 应用程序，对吗？那不是你想要的。Windows 应用程序必须以某种方式终止并需要交互。您应该将这两个应用程序转换回控制台应用程序，并确保在创建`Process`对象以启动 C# 2008 应用程序时，将构造函数的参数`CreateNoWindow`属性设置为 true。`ProcessStartInfo``Process`

所以，像：

```
public class Processor
{
    private static Logger logger = LogManager.GetCurrentClassLogger();

    private ProcessStartInfo MakeProcessStartInfo(string fileName, string arguments)
    {
        return new ProcessStartInfo
        {
            CreateNoWindow = true,
            UseShellExecute = false,
            FileName = fileName,
            Arguments = appArguments
        };
    }

    public void CallExternalApplications()
    {
        try
        {
            var fileName = ConfigurationManager.AppSettings["client_location"];

            using (var process = new Process { StartInfo = MakeProcessStartInfo(fileName, " 1 CLI") })
            {
                process.Start();

                if (!process.WaitForExit(1800))
                {
                    // create a Process here for pskill to kill the "process" using process.Id.
                }
            }

            using (var process = new Process { StartInfo = MakeProcessStartInfo(fileName, " 2 TIM") })
            {
                process.Start();

                if (!process.WaitForExit(1800))
                {
                    // create a Process here for pskill to kill the "process" using process.Id.
                }
            }
        }
        catch (Exception e)
        {
            // you really should be using logger.ErrorException(e.Message, e) here
            // and be using the ${exception} layoutrenderer in the layout in the NLog.config file
            logger.Error(e.Message + "\n" + e.StackTrace);
        }
    }
} 
```

您可能可以进一步重构此代码，因为我正在重复创建`process`对象的代码。我使用了一个`using`块来隐式调用`Dispose`对象`process`；这使代码更清晰，更具可读性。

关键是设置对象的`CreateNoWindow`属性`ProcessStartInfo`，一旦您将应用程序从 Windows 应用程序转换回控制台应用程序，这将阻止控制台窗口弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-12T22:54:03.760

这是我将 ctrl-c 发送到进程的解决方案。仅供参考，我从来没有`process.WaitForExit`工作过。

不是使用 GenerateConsoleCtrlEvent，而是我发现将 CTRL-C 发送到进程的方法。仅供参考，在这种情况下，我不需要找到组进程 ID。

```
using System;
using System.Diagnostics;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

public class ConsoleAppManager
{
    private readonly string appName;
    private readonly Process process = new Process();
    private readonly object theLock = new object();
    private SynchronizationContext context;
    private string pendingWriteData;

    public ConsoleAppManager(string appName)
    {
        this.appName = appName;

        this.process.StartInfo.FileName = this.appName;
        this.process.StartInfo.RedirectStandardError = true;
        this.process.StartInfo.StandardErrorEncoding = Encoding.UTF8;

        this.process.StartInfo.RedirectStandardInput = true;
        this.process.StartInfo.RedirectStandardOutput = true;
        this.process.EnableRaisingEvents = true;
        this.process.StartInfo.CreateNoWindow = true;

        this.process.StartInfo.UseShellExecute = false;

        this.process.StartInfo.StandardOutputEncoding = Encoding.UTF8;

        this.process.Exited += this.ProcessOnExited;
    }

    public event EventHandler<string> ErrorTextReceived;
    public event EventHandler ProcessExited;
    public event EventHandler<string> StandartTextReceived;

    public int ExitCode
    {
        get { return this.process.ExitCode; }
    }

    public bool Running
    {
        get; private set;
    }

    public void ExecuteAsync(params string[] args)
    {
        if (this.Running)
        {
            throw new InvalidOperationException(
                "Process is still Running. Please wait for the process to complete.");
        }

        string arguments = string.Join(" ", args);

        this.process.StartInfo.Arguments = arguments;

        this.context = SynchronizationContext.Current;

        this.process.Start();
        this.Running = true;

        new Task(this.ReadOutputAsync).Start();
        new Task(this.WriteInputTask).Start();
        new Task(this.ReadOutputErrorAsync).Start();
    }

    public void Write(string data)
    {
        if (data == null)
        {
            return;
        }

        lock (this.theLock)
        {
            this.pendingWriteData = data;
        }
    }

    public void WriteLine(string data)
    {
        this.Write(data + Environment.NewLine);
    }

    protected virtual void OnErrorTextReceived(string e)
    {
        EventHandler<string> handler = this.ErrorTextReceived;

        if (handler != null)
        {
            if (this.context != null)
            {
                this.context.Post(delegate { handler(this, e); }, null);
            }
            else
            {
                handler(this, e);
            }
        }
    }

    protected virtual void OnProcessExited()
    {
        EventHandler handler = this.ProcessExited;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }

    protected virtual void OnStandartTextReceived(string e)
    {
        EventHandler<string> handler = this.StandartTextReceived;

        if (handler != null)
        {
            if (this.context != null)
            {
                this.context.Post(delegate { handler(this, e); }, null);
            }
            else
            {
                handler(this, e);
            }
        }
    }

    private void ProcessOnExited(object sender, EventArgs eventArgs)
    {
        this.OnProcessExited();
    }

    private async void ReadOutputAsync()
    {
        var standart = new StringBuilder();
        var buff = new char[1024];
        int length;

        while (this.process.HasExited == false)
        {
            standart.Clear();

            length = await this.process.StandardOutput.ReadAsync(buff, 0, buff.Length);
            standart.Append(buff.SubArray(0, length));
            this.OnStandartTextReceived(standart.ToString());
            Thread.Sleep(1);
        }

        this.Running = false;
    }

    private async void ReadOutputErrorAsync()
    {
        var sb = new StringBuilder();

        do
        {
            sb.Clear();
            var buff = new char[1024];
            int length = await this.process.StandardError.ReadAsync(buff, 0, buff.Length);
            sb.Append(buff.SubArray(0, length));
            this.OnErrorTextReceived(sb.ToString());
            Thread.Sleep(1);
        }
        while (this.process.HasExited == false);
    }

    private async void WriteInputTask()
    {
        while (this.process.HasExited == false)
        {
            Thread.Sleep(1);

            if (this.pendingWriteData != null)
            {
                await this.process.StandardInput.WriteLineAsync(this.pendingWriteData);
                await this.process.StandardInput.FlushAsync();

                lock (this.theLock)
                {
                    this.pendingWriteData = null;
                }
            }
        }
    }
} 
```

然后，在我的主应用程序中实际运行进程并发送 CTRL-C：

```
 DateTime maxStartDateTime = //... some date time;
            DateTime maxEndDateTime = //... some later date time
            var duration = maxEndDateTime.Subtract(maxStartDateTime);
            ConsoleAppManager appManager = new ConsoleAppManager("myapp.exe");
            string[] args = new string[] { "args here" };
            appManager.ExecuteAsync(args);
            await Task.Delay(Convert.ToInt32(duration.TotalSeconds * 1000) + 20000);

            if (appManager.Running)
            {
                // If stilll running, send CTRL-C
                appManager.Write("\x3");
            } 
```

详情请参见[重定向控制台应用程序的标准输入](https://stackoverflow.com/questions/21848271/redirecting-standard-input-of-console-application?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)和[Windows如何获取已经在运行的进程的进程组？](https://stackoverflow.com/questions/30249101/windows-how-to-get-the-process-group-of-a-process-that-is-already-running/50311226#50311226)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-27T00:53:07.607

## 这就像一个魅力

而不是`process.WaitForExit()`我使用这种方法：

```
while (!process.StandardOutput.EndOfStream)
{
    Console.WriteLine(process.StandardOutput.ReadLine());
} 
```

# r - 使用 R2winBUGS 从 R 获取 WinBUGS Leuk 示例

> ID：14909323
> 
> 赞同：1
> 
> 时间：2013-02-16T10:34:06.197
> 
> 标签：r

我正在尝试学习使用 R 中的 winBUGS，我有使用 R 的经验。我已经成功地从 R 中成功运行了一个简单的示例，没有任何问题。我一直在尝试运行 Leuk：WinBUGS 示例第 1 卷中的生存。我已经成功地从 winBUGS GUI 运行它，没有任何问题。我的问题是尽我所能（我一直在尝试和搜索几天）我无法使用 R2winBUGS 运行它。我相信这很简单。

如果我尝试在脚本中设置 inits，我收到的错误消息是

```
Error in bugs(data = L, inits = inits, 
      parameters.to.save = params, model.file "model.txt",  : 
      Number of initialized chains (length(inits)) != n.chains 
```

我知道这意味着我没有初始化一些链，但是我正在粘贴 winbugs 示例手册中的 inits 代码，所有其他设置在我看来与在 winBUGS GUI 上运行时相同。

如果我尝试 inits=NULL 我会收到另一条错误消息

```
 display(log)
check(C:/BUGS/model.txt)
model is syntactically correct
data(C:/BUGS/data.txt)
data loaded
compile(1)
model compiled
gen.inits()
shape parameter (r) of gamma dL0[1] too small -- cannot sample
thin.updater(1)
update(500)
command #Bugs:update cannot be executed (is greyed out)
set(beta) 
```

这表明我在解决第一个问题后仍然会遇到问题！我即将放弃使用winBUGS，请有人救救我吗？我知道我可能会看起来很愚蠢，但每个人都必须学习:-)

我在 Windows XP 2002 SP3 上使用 winBUGS 1.4.3

我的 R 代码如下，非常感谢您至少阅读到这里。

```
 rm(list = ls())

L<-list(N = 42, T = 17, eps = 1.0E-10,
        obs.t = c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23, 6, 
        6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35),
        fail = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0),
        Z = c(0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
               -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5),
        t = c(1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 22, 23, 35))

### 5.4\. Analysis using WinBUGS
library(R2WinBUGS)      # Load the R2WinBUGS library CHOOSE to use WinBUGS
    #library(R2OpenBUGS)        # Load the R2OpenBUGS library CHOOSE to use OpenBUGS
setwd("C://BUGS") 

# Save BUGS description of the model to working directory
sink("model.txt")
cat("

model
{
# Set up data
for(i in 1:N) {
for(j in 1:T) {

# risk set = 1 if obs.t >= t
Y[i,j] <- step(obs.t[i] - t[j] + eps)
# counting process jump = 1 if obs.t in [ t[j], t[j+1] )
# i.e. if t[j] <= obs.t < t[j+1]
dN[i, j] <- Y[i, j] * step(t[j + 1] - obs.t[i] - eps) * fail[i]
}
}
# Model
for(j in 1:T) {
for(i in 1:N) {
dN[i, j] ~ dpois(Idt[i, j]) # Likelihood
Idt[i, j] <- Y[i, j] * exp(beta * Z[i]) * dL0[j] # Intensity
}
dL0[j] ~ dgamma(mu[j], c)
mu[j] <- dL0.star[j] * c # prior mean hazard
# Survivor function = exp(-Integral{l0(u)du})^exp(beta*z)
S.treat[j] <- pow(exp(-sum(dL0[1 : j])), exp(beta * -0.5));
S.placebo[j] <- pow(exp(-sum(dL0[1 : j])), exp(beta * 0.5));
}
c <- 0.001
r <- 0.1
for (j in 1 : T) {
dL0.star[j] <- r * (t[j + 1] - t[j])
}
beta ~ dnorm(0.0,0.000001)
}

",fill=TRUE)
sink()

params<- c("beta","S.placebo","S.treat")

inits<-list( beta = 0.0, 
     dL0 = c(1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,
             1.0,1.0,1.0,1.0,1.0,1.0, 1.0,1.0))

# MCMC settings
nc <-1                  # Number of chains
ni <- 1000              # Number of draws from posterior (for each chain)
ns<-1000 #Number of sims (n.sims)
nb <- floor(ni/2)                   # Number of draws to discard as burn-in
nt <- max(1, floor(nc * (ni - nb) / ns))# Thinning rate
Lout<-list()

# Start Gibbs sampler: Run model in WinBUGS and save results in object called out
out <- bugs(data = L, inits =inits, parameters.to.save = params, model.file = "model.txt", 
n.thin = nt, n.chains = nc, n.burnin = nb, n.iter = ni, debug = T, DIC = TRUE,digits=5,
codaPkg=FALSE, working.directory = getwd()) 
```

当我设置 nc<-2 我认为只是设置每个样本节点的 MCMC 链数时，我得到以下信息

```
display(log)
check(C:/BUGS/model.txt)
model is syntactically correct
data(C:/BUGS/data.txt)
data loaded
compile(2)
model compiled
inits(1,C:/BUGS/inits1.txt)
this chain contains uninitialized variables
inits(2,C:/BUGS/inits2.txt)
this chain contains uninitialized variables
gen.inits()
shape parameter (r) of gamma dL0[1] too small -- cannot sample
thin.updater(1)
update(500)
command #Bugs:update cannot be executed (is greyed out) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:30:45.190

好的，我自己解决了这个问题

我改变的第一件事是我不喜欢许多变量的名称与 r 函数 't' 相同的事实，例如，我将所有内容都更改为具有唯一的变量名。

其次，我没有为每条链提供唯一的起始值列表

所以 inits 被改为

inits <- function()list(list (beta1 = rnorm(1), dL0 = runif(17, 0, 1)),list (beta1 = rnorm(1), dL0 = runif(17, 0, 1)))

现在它可以工作了。

# ios - NSJSON序列化错误？

> ID：14909324
> 
> 赞同：13
> 
> 时间：2013-02-16T10:34:09.660
> 
> 标签：ios, objective-c, cocoa-touch, nsjsonserialization

过去 10 个小时一直在尝试调试崩溃，最后，我将其简化为以下代码：

```
NSError *error = nil;
NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"payload" ofType:@"txt"]];
id obj = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error]; 
```

使用 NSZombieEnabled，这会使应用程序在第三行（解析发生的位置）崩溃并记录：

```
*** -[CFString retain]: message sent to deallocated instance 0x758afa0 
```

的内容`payload.txt`是：

```
[
   {
      "created_at":"2013-02-15T23:46:02-05:00",
      "description":"Take out the Big Gun sounded simple enough, except the Strogg were waiting. You, and a few marines like you, are the lucky ones. You've made it down in one piece and are still able to contact the fleet. The Gravity Well, the Strogg's newest weapon in its arsenal against mankind, is operational. With the fleet around Stroggos, 5% of ground forces surviving, and that number dwindling by the second, your orders have changed: free your comrades. Destroy the Gravity Well.Minimum: A 100% Windows XP/Vista-compatible computer system",
      "developer":"id Software",
      "external_id":"2340",
      "id":745,
      "image":"http://cdn.steampowered.com/v/gfx/apps/2340/header_292x136.jpg",
      "is_subscribed":0,
      "link":"http://store.steampowered.com/app/2340/",
      "price":"4.99",
      "seller_id":2,
      "thumb":"http://media.steampowered.com/steamcommunity/public/images/apps/2340/5bd6e22ffdf72fdfb5ce2092fa50150de5fbb56f.jpg",
      "title":"Quake II: Ground Zero",
      "updated_at":"2013-02-15T23:46:02-05:00",
      "is_subscribed":0
   },
   {
      "created_at":"2013-02-15T23:45:59-05:00",
      "description":"Rage through 32 single player levels and 6 deathmatch levels of sheer terror and fully immersive sound and lighting. Arm yourself against the cannibalistic Ogre, fiendish Vore and indestructible Schambler using lethal nails, fierce Thunderbolts and abominable Rocket and Grenade Launchers.Minimum: A 100% Windows XP/Vista-compatible computer system",
      "developer":"id Software",
      "external_id":"2310",
      "id":742,
      "image":"http://cdn.steampowered.com/v/gfx/apps/2310/header_292x136.jpg",
      "is_subscribed":0,
      "link":"http://store.steampowered.com/app/2310/",
      "price":"9.99",
      "seller_id":2,
      "thumb":"http://media.steampowered.com/steamcommunity/public/images/apps/2310/e5bdf8dc7759c573fe525d45b69011f6a173a984.jpg",
      "title":"Quake",
      "updated_at":"2013-02-15T23:45:59-05:00",
      "is_subscribed":0
   }
] 
```

它只是一个包含 2 个字典的数组。我不确定是什么导致了这个崩溃/这个 JSON 有什么问题。

**更新**删除`"is_subscribed":0`数组中的第一个对象可以消除崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:15:12.343

看起来 Apple 在他们的课程中处理此类情况的错误处理方面做得不好，因为你得到了崩溃而不是正常的 nil 结果和错误变量填充。您的 json 数据和简约代码是 Apple 通常需要的正确错误报告。通过以下链接报告错误 - [https://developer.apple.com/bugreporter/](https://developer.apple.com/bugreporter/)不要忘记在 zip 中附加项目作为它崩溃的证明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T21:08:15.713

我遇到了这个问题，对我来说，问题是 JSON 中的重复键。我的密钥被命名为不同的 - 不是像你的情况那样的“is_subscribed”，而是“food_nutrients”。我敢打赌，iOS 6 会在任何重复的键上崩溃，而两者之间还有另一个键——而不仅仅是一些评论所暗示的“is_subscribed”键。

我已经确认任何名称的重复键都是问题所在。相关：[https ://stackoverflow.com/a/21148319/2030](https://stackoverflow.com/a/21148319/2030)

# c# - When does IEnumerable.GetEnumerator get called instead of IEnumerable .GetEnumerator?

> ID：14909326
> 
> 赞同：9
> 
> 时间：2013-02-16T10:34:33.217
> 
> 标签：c#, .net, ienumerable, ienumerator

Looking at this code :

```
public class myWords : IEnumerable<string>
{
    string[] f = "I love you".Split(new string[]{"lo"},StringSplitOptions.RemoveEmptyEntries);

    public IEnumerator<string> GetEnumerator()
    {
        return f.Select(s => s + "2").GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return f.Select(s => s + "3").GetEnumerator();
    }
} 
```

Running :

```
 myWords m = new myWords();
 foreach (var s in m)
 {
     Console.WriteLine(s);
 } 
```

Yields

```
I 2
ve you2    // notice "2", so the generic Ienumerator has executed. 
```

I understand that the non-generic `IEnumerator` version is for compatibility.

**Question:**

1.  In what scenario will the non-generic be invoked?
2.  How can I *force* my code to be run with the non-generic `IEnumerator`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T10:38:46.790

每当代码将类转换为非泛型接口时，都会执行非泛型 IEnumerator：

```
((IEnumerable)myWords).GetEnumerator(); // this calls the non-generic one 
```

如果您将类传递给需要非泛型 IEnumerator 的一些遗留函数，这主要是相关的。

因此，如果您有一些包含函数的库并将您的类传递给该函数，它将使用非泛型 IEnumerator

```
DoSomeStuffWithAnIEnumerable(IEnumerable x)
{
   var foo = x.GetEnumerator();

   // or, as stackx said, an example with foreach:
   foreach (var foo2 in x)
   Console.WriteLine(foo2);
}

DoSomeStuffWithAnIEnumerable(new myWords()); 
```

请注意，使用泛型简单地实现非泛型 IEnumerator 是完全有效的：

```
public class myWords : IEnumerable<string>
{
    ....    
    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

这样您就可以确定它们都具有相同的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-02T19:20:36.373

其他答案有点错过了重点。

`foreach`如果 beeing 的（编译时）类型有一个`public`调用的非泛型非静态方法`GetEnumerator`，该方法接受零参数，则接口根本不重要。（此方法的返回类型可以是任何东西，泛型或非泛型：接口无关紧要。）

所以调用第一个方法的原因是，这就是`public`方法。

你可以改变它：

```
public class myWords : IEnumerable<string>
{
    string[] f = "I love you".Split(new string[]{"lo"},StringSplitOptions.RemoveEmptyEntries);

    IEnumerator<string> IEnumerable<string>.GetEnumerator()
    {
        return f.Select(s => s + "2").GetEnumerator();
    }

    public IEnumerator GetEnumerator()
    {
        return f.Select(s => s + "3").GetEnumerator();
    }
} 
```

要证明不需要接口，请尝试以下操作：

```
public class myWords // no interfaces!
{
    string[] f = "I love you".Split(new string[]{"lo"},StringSplitOptions.RemoveEmptyEntries);

    public IEnumerator GetEnumerator()
    {
        return f.Select(s => s + "3").GetEnumerator();
    }
} 
```

但是，明智的做法是实施`IEnumerable<>`. 然后您的类型可以与 Linq 一起使用（扩展方法 on `IEnumerable<>`），并且可以用作其他只需要`IEnumerable<>`.

此外，明智的做法是让返回非泛型`IEnumerator`的方法（或显式接口实现）直接调用返回的方法（或显式接口实现）`IEnumerator<>`。让两个返回不同的序列真的很令人困惑（但很适合询问和回答有关事物如何工作的问题）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T10:47:04.093

的非通用版本`IEnumerable`是通过显式接口实现来实现的。这意味着您只能通过转换为接口来调用显式实现的函数。

显式实现的原因`IEnumerable`是方法签名是相同的，除了返回类型。

显`myWords`式转换为`IEnumerable`允许您像这样调用非泛型版本：`(IEnumerable)myWords`.

C# 指南解释了它是如何工作的：[显式接口实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)。

# .htaccess - HTACCESS 基于服务器 URL 和 TLD 的自定义重定向

> ID：14909329
> 
> 赞同：0
> 
> 时间：2013-02-16T10:34:45.820
> 
> 标签：.htaccess, redirect, url-routing

我得到了以下设置

我的网站位于此服务器 jdbartist.bplaced.net/gkn

我买了一个 TLD (gamekeynexus.com) 并将其设置为重定向到 gkn 目录，所以当我在浏览器窗口中输入我的 tld 时，我会在我的服务器上访问我的网站，它在浏览器中显示 gamekeynexus.com = 真棒！现在唯一困扰我的是

**如果**有人**知道**旧地址，他就可以通过这个旧地址访问该站点（即输入 jdbartist.bplaced.net/gkn）

*我的问题是，如何将对旧 URL 的调用重定向到新 URL？*

我想 htaccess 重定向可以完成这项工作，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:48:36.347

也许这个 PHP 片段可能会有所帮助

```
<? 
if($_SERVER['HTTP_HOST'] == 'jdbartist.bplaced.net') { 
header("Location: http://gamekeynexus.com/");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:43:02.260

您可以使用简单的重写：

```
RewriteCond !%{HTTP_HOST}  newdomain
RewriteRule (.*) http://newdomain/$1 [L] 
```

看看文档：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# .net - 在 .NET 中正确处理数据库中的重复行

> ID：14909336
> 
> 赞同：0
> 
> 时间：2013-02-16T10:35:58.800
> 
> 标签：.net, sql, duplicates

假设我在一个文本文件中有数十万条记录，我想每天将其插入数据库。其中大约一半已经存在于数据库中。此外，使用 6 列定义唯一行。

在这种特殊情况下，在 .NET 中编写插入代码的正确方法是什么？我想知道的两个是：

我是否立即进行 SQL 插入并捕获重复条目的 SQLException？在这种情况下，我将打破例外情况应仅用于例外情况而不用于常见情况的概念。

或者

在进行插入之前，我是否先进行 SQL 选择以检查行？在这种情况下，尽管刚刚完成了选择，但数据库似乎会自动执行第二次插入并检查唯一性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:10:38.113

使用 sql 语句在插入之前检查该行。这是一个名为 person 的表的简单示例，该表有两列，名字和姓氏，它们被检查唯一性：

```
/// <summary>
/// Insert a row into the person table
/// </summary>
/// <param name="connection">An open sql connection</param>
/// <param name="forename">The forename which will be inserted</param>
/// <param name="surname">The surname which will be inserted</param>
/// <returns>True if a new row was added, False otherwise</returns>
public static bool InsertPerson(SqlConnection connection, string forename, string surname)
{
    using (SqlCommand command = connection.CreateCommand())
    {
        command.CommandText =
            @"Insert into person (forename, surname)
                Select @forename, @surname
                Where not exists 
                    (
                        select 'X' 
                        from person 
                        where 
                            forename = @forename 
                            and surname=@surname
                    )";
        command.Parameters.AddWithValue("@forename", forename);
        command.Parameters.AddWithValue("@surname", surname);

        int rowsInserted = command.ExecuteNonQuery();

        // rowsInserted will be 0 if the row is already in the database
        return rowsInserted == 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:03:42.187

忽略重复项的一种简单方法是使用选项 IGNORE_DUP_KEY=ON 创建唯一索引。这样您就不会产生重复测试或捕获异常的开销。

例如

```
CREATE UNIQUE NONCLUSTERED INDEX [IX_IgnoreDuplicates] ON [dbo].[Test]
(
    [Id] ASC,
    [Col1] ASC,
    [Col2] ASC
)
WITH (IGNORE_DUP_KEY = ON) 
```

然后，您还可以使用[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)通过自动重复删除有效地加载所有数据。

请参阅[创建索引](http://msdn.microsoft.com/en-gb/library/ms188783.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:43:21.207

我认为你应该选择异常方式。做这样的事情：

```
foreach(var elem in elemntsFromFile)
{
    try
    {
       context.sometable.Add(elem);
       context.SaveChanges();
    }
    catch
    {
    }
} 
```

一瞬间。我不喜欢 db.saveChanges 在每次迭代中运行，但它会在 100% 上具有比“选择优先的方式”更好的性能。它也将工作和工作。

# c - C中是否有任何称为crypt的函数？还是我必须自己构建该功能？

> ID：14909340
> 
> 赞同：0
> 
> 时间：2013-02-16T10:36:24.077
> 
> 标签：c, function, encryption, passwords

crypt (const char *key, const char *salt)

我在代码中看到了它，但我找不到这个函数的实现。它是C的一些约定吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:37:32.937

它由[`POSIX`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/crypt.html)C 标准的任何版本指定，但不是由任何版本指定。不过要小心：

> crypt() 函数是一个字符串编码函数。**该算法是实现定义的**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:40:33.573

```
#include <unistd.h> 
```

不要忘记编译

> -lcrypt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:40:43.357

不是 C，但有一个免费的库：

这是手册页以及一些源代码：

享受

[http://linux.die.net/man/3/crypt](http://linux.die.net/man/3/crypt)

[http://saa.dyndns.org/stewart/Software/my_crypt.c.html](http://saa.dyndns.org/stewart/Software/my_crypt.c.html)

# c# - 按多列排序的目的是什么？

> ID：14909341
> 
> 赞同：1
> 
> 时间：2013-02-16T10:36:24.203
> 
> 标签：c#, java, mysql, sql, sql-server

我正在用 C# 和 Java 实现一个应用程序，并且希望具有类似于 SQL 中的 ORDER BY 函数的功能。但是，要做到这一点，我必须了解对多列进行排序的概念。

我曾尝试编写简单的 SQL 语句，例如

`SELECT * FROM TABLE ORDER BY Field1,Field2`.

这样做时，只有`Field1`被订购。指定多个列实际上有什么用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:38:04.353

考虑一下：如果`Field1`行值相等怎么办？

基本上，在您的示例中，您首先按`Field1`排序，如果值相等，则按`Field2`

例子：

```
Field1 | Field2
A        4
B        1
A        3 
```

`order by Field1, Field2`：

```
Field1 | Field2
A        3
A        4
B        1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:40:09.073

> 这样做时，仅订购 Field1。

否。当第一列值相等时，第二列用于排序。

让我们考虑您创建一个这样的表；

```
CREATE TABLE tbl
    ([Field1] varchar(1), [Field2] int)
;

INSERT INTO tbl
    ([Field1], [Field2])
VALUES
    ('A', 1),
    ('A', 2),
    ('B', 1),
    ('B', 2),
    ('C', 4),
    ('C', 2),
    ('C', 1)
; 
```

当你运行这个**[`query`](http://www.sqlfiddle.com/#!3/724d4/1/0)**;

```
Select *
From tbl
Order by Field1 
```

结果它给了你

```
FIELD1  FIELD2
A   1
A   2
B   1
B   2
C   4
C   2
C   1 
```

这是正常的，因为我们仅根据`Field1`. 它不关心其他列。

但是当你运行它时**[`query`](http://www.sqlfiddle.com/#!3/724d4/2/0)**；

```
Select *
From tbl
Order by Field1, Field2 
```

这给了你结果

```
FIELD1  FIELD2
A   1
A   2
B   1
B   2
C   1
C   2
C   4 
```

这很正常，因为我们说要查询；首先，根据`Field1`列值对结果进行排序，如果某些`Field1`值相等，则根据`Field2`列对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:40:25.913

如果有多个具有相同值的行`Field1`，它们将在内部排序`Field2`：

```
Field1 | Field2
-------+--------
 1     | 243
 2     | 23
 2     | 42
 2     | 278
 3     | 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T10:46:59.317

假设表是“person”，Field1 是“last_name”（姓氏），Field2 是“first_name”（名字），那么三个共享姓氏“Smith”的人将应用第二类名字。

```
Smith Tim
Picard Bernard
Smith Alice
Smith Bob 
```

变成……</p>

```
Picard Bernard
Smith Alice
Smith Bob
Smith Tim 
```

正如其他人所说，当先前的排序字段遇到重复值时，连续的排序字段就会发挥作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T10:50:55.643

如果您在 ORDER 子句中指定多个列，它会按第一个、然后是第二个、然后是第三个......等等。例如，如果您按 Forename, Surname 排序，则结果将首先按 Forename 排序，即所有 A 在第一个，然后按 Surname，因此每个 A 将按其姓氏排序，因此如果您有两个 Albert's数据，按照阿尔伯特爱因斯坦和阿尔伯特戴维斯的顺序出现在您的未排序表中，它们将按姓氏的顺序出现在列表中，即

```
Forename   |   Surname
Albert     |   Davies
Albert     |   Einstein
Arthur     |   Dent 
```

如果您只是按名字订购，您将获得以下信息（当然，前提是爱因斯坦出现在您未排序表中的戴维斯上方）：

```
Forename   |   Surname
Albert     |   Einstein
Albert     |   Davies
Arthur     |   Dent 
```

# php - PHP Javascript 谷歌地图 API

> ID：14909347
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:36:49.003
> 
> 标签：php, javascript, jquery, google-maps

嗨，我有一个网络应用程序，其中 php 从 mysql db 获得的结果包括谷歌地图 api 的坐标。以下是我在 php 上的代码

```
$businessMapper = new Application_Model_Mapper_BusinessMapper();
$biz = $businessMapper->searchBusinessByCityAndName($searchtext,$city);
$this->view->biz = $biz; 
```

结果数组如下：

```
[0] => Array
                    (
                        [business_name] => Madam Kwan's Restaurant KLCC
                        [business_url] => Madam-Kwan-s-Restaurant-KLCC
                        [reviews_num] => 2
                        [business_id] => 134
                        [rating] => 3
                        [business_phone] => 03-2026 2297
                        [business_add1] => Suria Klcc 
                        [business_add2] => Jalan Ampang
                        [x] => 101.74357729999997
                        [y] => 3.1597723
                        [photo_url] => 201302051423582
                        [cat_name] => Restaurants
                    )

                [1] => Array
                    (
                        [business_name] => Spring Garden Restaurant
                        [business_url] => Spring-Garden-Restaurant
                        [reviews_num] => 2
                        [business_id] => 135
                        [rating] => 4
                        [business_phone] => 03-2166 9881
                        [business_add1] => Lot 413-414, Level 4
                        [business_add2] => Kuala Lumpur City Centre
                        [x] => 101.71465799999999
                        [y] => 3.1567893
                        [photo_url] => 201302011217282
                        [cat_name] => Restaurants
                    )

                [2] => Array
                    (
                        [business_name] => Hard Rock's Cafe Kuala Lumpur
                        [business_url] => Hard-Rock-s-Cafe-Kuala-Lumpur
                        [reviews_num] => 1
                        [business_id] => 137
                        [rating] => 2
                        [business_phone] => 03-2715 5555
                        [business_add1] => Ground Floor, Wisma Concorde
                        [business_add2] => Jalan Sultan Ismail
                        [x] => 101.70525199999997
                        [y] => 3.155552
                        [photo_url] => 201302011203172
                        [cat_name] => Restaurants
                    )

                [3] => Array
                    (
                        [business_name] => Sao Nam
                        [business_url] => Sao-Nam
                        [reviews_num] => 1
                        [business_id] => 141
                        [rating] => 4
                        [business_phone] => 03-2144 1225
                        [business_add1] => Anggun Boutique Hotel 7 & 9
                        [business_add2] => Tengkat Tong Shin
                        [x] => 101.70798279999997
                        [y] => 3.1463384
                        [photo_url] => 201302011122322
                        [cat_name] => Restaurants
                    )

                [4] => Array
                    (
                        [business_name] => Palate Palette
                        [business_url] => Palate-Palette
                        [reviews_num] => 1
                        [business_id] => 150
                        [rating] => 3
                        [business_phone] => 03-2142 2148
                        [business_add1] => 21 Jalan Mesui
                        [business_add2] => 
                        [x] => 101.70791299999996
                        [y] => 3.149042
                        [photo_url] => 201302011031132
                        [cat_name] => Restaurants
                    ) 
```

x 和 y 值用于在 google map api 上映射地图。在视图模板中，谷歌地图 api javascripts 如下：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
 <script type="text/javascript">

    var locations = [
     {business_name1},{x1},{y1}
     {business_name2},{x2},{y2}
     etc...
    ];

    var map = new google.maps.Map(document.getElementById('map-container'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script> 
```

现在的问题是，我如何将结果数组从 php 传递到 javascripts，以便它可以遍历 x、y 和企业名称并绘制地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:01:31.027

我想粗略的方法是使用您的 JS 脚本标签将变量输出到正确的位置。

```
<script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
 <script type="text/javascript">

    var locations = [    
<?php

foreach($results as $biz){
     echo '{' . $biz['business_name'] . '},{ ' . $bix['x'] . '},{ ' . $biz['y'] . '}';
}
?> 

    ]; 
```

这将复制您在示例中显示的内容，但您可能需要注意 JS 如何处理数组（即 JS 不允许尾随逗号 AFAIK）

比如说，首先在页面上运行 2 个硬编码的 JS 结果，然后使用我展示的 echo 方法来复制真正起作用的方法。

如果您想要它的 JSON，您可以使用 PHP json_encode() 函数通过选择结果的子集或删除您不想要的结果（url、评级等）来输出

根据您的情况，您可以将结果数组或 json 存储在外部 .js 文件中，这样您也可以缓存结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:26:40.360

用这个，

```
 var locations = [
    <?php
    foreach($resultarray as $row){
    echo "{".$row['business_name']."},{".$row['x']."},{".$row['y']."}";
    }
    ?>
    ]; 
```

# java - 在eclipse启动tomcat报错

> ID：14909348
> 
> 赞同：0
> 
> 时间：2013-02-16T10:37:01.443
> 
> 标签：java, eclipse, tomcat

相关配置：Fedora and Tomcat 7.0.35 <用浏览器打开开始页面显示空白> Eclipse最新版Firefox 17 jdk 1.7 javaee5

在fedora用tomcat（用终端可以启动，打开浏览器看到是空白页），用eclipse启动报错：

错误如下：

```
February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. AprLifecycleListener init

INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on The Java. Library. Path: / usr/Java/jdk1.7.0 _13 / jre/lib/i386 / client: / usr/Java/jdk1.7.0 _13 / jre/lib/i386: : / usr/Java/packages/lib/i386: / lib/usr/lib

February 16, 2013 in the afternoon. 4:45:01 org apache. Tomcat. Util. Digester. SetPropertiesRule begin

WARNING: [SetPropertiesRule] {Server/Service/Engine/Host/Context} Setting property 'source' to 'org. Eclipse. JST. Jee. Server: Test' did not find a matching property.

February 16, 2013 in the afternoon. 4:45:01 org apache. Coyote. AbstractProtocol init

INFO: Initializing ProtocolHandler [" HTTP - bio - 9090 "]

February 16, 2013 in the afternoon. 4:45:01 org apache. Coyote. AbstractProtocol init

INFO: Initializing ProtocolHandler [" ajp - bio - 9009 "]

February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Startup. Catalina load

INFO: Initialization processed in 1051 ms

February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. StandardService startInternal

INFO: Starting service Catalina

February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. StandardEngine startInternal

INFO: Starting Servlet Engine: Apache Tomcat / 7.0.35

February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. ContainerBase startInternal

SEVERE: A child container failed during start

java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        ... 7 more

Caused by: java.lang.NoClassDefFoundError: org/apache/tomcat/JarScanner
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:30
        at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at org.apache.catalina.core.StandardContext.getJarScanner(StandardContext.java:1031)
        at org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1915)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:126
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:87
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more

Caused by: java.lang.ClassNotFoundException: org.apache.tomcat.JarScanner
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 30 more

February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. ContainerBase startInternal

SEVERE: A child container failed during start

java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Test]]
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Test]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        ... 7 more

Caused by: java.lang.NoClassDefFoundError: org/apache/tomcat/util/scan/StandardJarScanner
        at org.apache.catalina.core.StandardContext.getJarScanner(StandardContext.java:1031)
        at org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1915)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:126
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:87
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more

    February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Core. ContainerBase startInternal

    SEVERE: A child container failed during start

    Java. Util. Concurrent. ExecutionException: apache. Org. Catalina. LifecycleException: Failed to start component [StandardEngine [catalina]. StandardHost [localhost]]

    At Java. Util. Concurrent. FutureTask $Sync. InnerGet (FutureTask. Java: 252)

    At Java. Util. Concurrent. FutureTask. Get (FutureTask. Java: 111)

    At org. Apache. Catalina. Core. ContainerBase. StartInternal (ContainerBase. Java: 1123)

    At org. Apache. Catalina. Core. StandardEngine. StartInternal (StandardEngine. Java: 302)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    At org. Apache. Catalina. Core. StandardService. StartInternal (StandardService. Java: 443)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    At org. Apache. Catalina. Core. StandardServer. StartInternal (StandardServer. Java: 732)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    At org. Apache. Catalina. Startup. Catalina. Start (catalina. Java: 684)

    At sun. NativeMethodAccessorImpl reflect. Invoke0 (Native Method).

    At sun. Reflect. NativeMethodAccessorImpl. Invoke (NativeMethodAccessorImpl. Java: 57)

    At sun. Reflect. DelegatingMethodAccessorImpl. Invoke (DelegatingMethodAccessorImpl. Java: 43)

    At Java. Lang. Reflect. Invoke Method. (Method. Java: 601)

    At org. Apache. Catalina. Startup. Bootstrap. Start (Bootstrap. Java: 322)

    At org. Apache. Catalina. Startup. Bootstrap. Main (Bootstrap. Java: 456)

    Caused by: apache. Org. Catalina. LifecycleException: Failed to start component [StandardEngine [catalina]. StandardHost [localhost]]

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 154)

    At org. Apache. Catalina. Core. ContainerBase $StartChild. Call (ContainerBase. Java: 1559)

    At org. Apache. Catalina. Core. ContainerBase $StartChild. Call (ContainerBase. Java: 1549)

    At Java. Util. Concurrent. FutureTask $Sync. InnerRun (FutureTask. Java: 334)

    At Java. Util. Concurrent. FutureTask. Run (FutureTask. Java: 166)

    At Java. Util. Concurrent. ThreadPoolExecutor. RunWorker (ThreadPoolExecutor. Java: 1145)

    At Java. Util. Concurrent. ThreadPoolExecutor $Worker. Run (ThreadPoolExecutor. Java: 615)

    At Java. Lang. Thread. Run (Thread. Java: 722)

    Caused by: apache. Org. Catalina. LifecycleException: A child container failed during start

    At org. Apache. Catalina. Core. ContainerBase. StartInternal (ContainerBase. Java: 1131)

    At org. Apache. Catalina. Core. StandardHost. StartInternal (StandardHost. Java: 800)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    ... 7 more

  February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Startup. Catalina start

    SEVERE: Catalina. Start:

    Org. Apache. Catalina. LifecycleException: Failed to start component [StandardServer [9005]]

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 154)

    At org. Apache. Catalina. Startup. Catalina. Start (catalina. Java: 684)

    At sun. NativeMethodAccessorImpl reflect. Invoke0 (Native Method).

    At sun. Reflect. NativeMethodAccessorImpl. Invoke (NativeMethodAccessorImpl. Java: 57)

    At sun. Reflect. DelegatingMethodAccessorImpl. Invoke (DelegatingMethodAccessorImpl. Java: 43)

    At Java. Lang. Reflect. Invoke Method. (Method. Java: 601)

    At org. Apache. Catalina. Startup. Bootstrap. Start (Bootstrap. Java: 322)

    At org. Apache. Catalina. Startup. Bootstrap. Main (Bootstrap. Java: 456)

    Caused by: apache. Org. Catalina. LifecycleException: Failed to start component [StandardService [catalina]]

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 154)

    At org. Apache. Catalina. Core. StandardServer. StartInternal (StandardServer. Java: 732)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    ... 7 more

    Caused by: apache. Org. Catalina. LifecycleException: Failed to start component [StandardEngine [catalina]]

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 154)

    At org. Apache. Catalina. Core. StandardService. StartInternal (StandardService. Java: 443)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    ... And more

    Caused by: apache. Org. Catalina. LifecycleException: A child container failed during start

    At org. Apache. Catalina. Core. ContainerBase. StartInternal (ContainerBase. Java: 1131)

    At org. Apache. Catalina. Core. StandardEngine. StartInternal (StandardEngine. Java: 302)

    At org. Apache. Catalina. Util. LifecycleBase. Start (LifecycleBase. Java: 150)

    ... 11 more

    February 16, 2013 in the afternoon. 4:45:01 org apache. Catalina. Startup. Catalina start

    INFO: Server startup in 279 ms 
```

我在看教程自学，请问用myeclipse可以学JSP吗？

JDK是刚安装jdk1.7，原来是在ext里（把第三方的jar包放在里面）。放很多tomcat包，然后复制到JDK里面的client文件夹里面还是不行

# ios - 活动指示器和警报

> ID：14909353
> 
> 赞同：0
> 
> 时间：2013-02-16T10:37:37.507
> 
> 标签：ios, android-activity, alert, indicator

在您将数据传输到服务器指示器活动时，我的应用程序在您 knomki 之后将数据发送到服务器。当指示器隐藏时，我试图显示数据已成功发送的警报。但是当我试图撤销警报时，应用程序就会失败。可能是什么问题？谢谢！

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    activityIndicator = [[UIActivityIndicatorView alloc] init];
    activityIndicator.frame = CGRectMake(140, 190, 37, 37);
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    [self.view addSubview:activityIndicator];

}

- (IBAction)sendForm:(id)sender {
 [self performSelectorInBackground:@selector(loadData) withObject:activityIndicator];
    [activityIndicator startAnimating];
}

-(void)loadData {
    NSURL *scriptUrl = [NSURL URLWithString:@"http://zav333.ru/"];
    NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
    if (data)
    {
        NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://zav333.ru/sushi.php"]
                                                               cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                           timeoutInterval:15.0];
        request.HTTPMethod = @"POST";
        // указываем параметры POST запроса
        NSString* params = [NSString stringWithFormat:@"name=%@&phone=%@&date=%@&howmuchperson=%@&smoke=%@ ", self.name.text, self.phone.text, self.date.text, self.howmuchperson.text, self.smoke];
      *howMuchPerson, *smoke;
        request.HTTPBody =[params dataUsingEncoding:NSUTF8StringEncoding];

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        [activityIndicator stopAnimating];

            UIAlertView* ahtung = [[UIAlertView alloc] initWithTitle:@"Спасибо" message:@"Ваша заявка принята!\nВ течение часа, Вам поступит звонок для подтверждения заказа" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [ahtung show];
    }
} 
```

![在此处输入图像描述](../Images/9cd44e38f419f24def0bb0a49d2485b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:04:32.460

您的应用程序崩溃的原因是因为您正在尝试处理您的 GUI 元素，即`UIAlertView`在后台线程中，您需要在主线程上运行它或尝试使用调度队列

使用调度队列

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{

     //show your GUI stuff here...

    }); 
```

或者您可以像这样在主线程上显示 GUI 元素

`[alertView performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES];`

您可以在此[链接上了解有关在线程上使用 GUI 元素的更多详细信息](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/AboutThreads/AboutThreads.html#//apple_ref/doc/uid/10000057i-CH6-SW21)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:07:47.077

发生崩溃是因为您试图`UIAlertView`从后台线程显示。

永远不要这样做，所有 UI 更改都应该从主线程处理。

代替：

```
UIAlertView* ahtung = [[UIAlertView alloc] initWithTitle:@"Спасибо" message:@"Ваша заявка принята!\nВ течение часа, Вам поступит звонок для подтверждения заказа" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [ahtung show]; 
```

和：

```
dispatch_async(dispatch_get_main_queue(),^{
            UIAlertView* ahtung = [[UIAlertView alloc] initWithTitle:@"Спасибо" message:@"Ваша заявка принята!\nВ течение часа, Вам поступит звонок для подтверждения заказа" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [ahtung show];
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T11:08:12.923

尝试

```
- (IBAction)sendForm:(id)sender {
 [self performSelectorInBackground:@selector(loadData) withObject:activityIndicator];
 [activityIndicator startAnimating];
 UIAlertView* ahtung = [[UIAlertView alloc] initWithTitle:@"Спасибо" message:@"Ваша заявка принята!\nВ течение часа, Вам поступит звонок для подтверждения заказа" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
 [ahtung show];
} 
```

# android - 在android中清除最近的应用程序列表

> ID：14909354
> 
> 赞同：0
> 
> 时间：2013-02-16T10:37:43.080
> 
> 标签：android, android-intent, android-widget

我正在制作一个创建锁定屏幕的应用程序。问题是最近的应用程序按钮有一种方法，我可以从那里进入设备而无需在锁定屏幕中输入密码。我已通过 ACTION_CLOSE_SYSTEM_DIALOGS 关闭了最近的应用程序对话框。但是关闭它并不太快，我可以单击此对话框上的任何最近的应用程序。有什么解决办法呢？我正在尝试清除最近的应用程序列表，我该怎么做？或者有没有更好的方法来处理这个问题。

提前致谢。

# android - 为 imageview 添加水平和垂直滚动视图

> ID：14909356
> 
> 赞同：0
> 
> 时间：2013-02-16T10:37:49.397
> 
> 标签：android, xml, imageview, scrollview, horizontalscrollview

在我的应用程序中。我使用了RelativeLayout。我想将水平和垂直滚动视图添加到 imageview。我试过但不工作。图像视图大小应为 800*800。是否需要LinearLayout。我该怎么做？请帮帮我。

xml 文件 -

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/Beige"
android:focusable="true"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    style="@color/Bisque"
    android:layout_width="250dp"
    android:layout_height="fill_parent"
    android:background="@color/Plum"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="60dp"
        android:layout_height="50dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="30dp"
        android:background="@color/Thistle"
        android:onClick="importFile"
        android:text="@string/Import" />

    <LinearLayout
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="50dp"
        android:background="@color/Thistle"
        android:orientation="vertical" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="200dp"
        android:layout_height="210dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="50dp"
        android:background="@color/Thistle"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="180dp"
            android:layout_height="50dp"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/yes"
                android:layout_width="wrap_content"
                android:layout_height="40dp"
                android:layout_weight="0.15"
                android:background="@color/Thistle"
                android:focusable="false"
                android:text="@string/X"
                android:textColor="@color/PaleVioletRed"
                android:textColorHint="@color/PaleVioletRed"
                android:textSize="35sp"
                android:textStyle="bold"
                android:typeface="normal"
                android:width="4dp" />

            <Button
                android:id="@+id/no"
                android:layout_width="30dp"
                android:layout_height="40dp"
                android:layout_marginLeft="60dp"
                android:background="@drawable/cor" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="180dp"
            android:layout_height="50dp"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/back"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_marginTop="5dp"
                android:background="@color/Thistle"
                android:text="@string/l"
                android:textColor="@color/PaleVioletRed"
                android:textColorHint="@color/PaleVioletRed"
                android:textSize="30sp"
                android:textStyle="bold"
                android:typeface="sans" />

            <TextView
                android:id="@+id/color"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_marginLeft="10dp"
                android:background="@color/Black" />

            <Button
                android:id="@+id/next"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="6dp"
                android:background="@color/Thistle"
                android:text="@string/r"
                android:textColor="@color/PaleVioletRed"
                android:textSize="30sp"
                android:textStyle="bold"
                android:typeface="sans" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="180dp"
            android:layout_height="50dp"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/sub"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:background="@drawable/plus"
                android:textSize="40sp" />

            <Button
                android:id="@+id/add"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_marginLeft="60dp"
                android:background="@drawable/minus" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/linearLayout1"
    android:background="@color/Thistle"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/save"
        android:layout_width="80dp"
        android:layout_height="50dp"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="30dp"
        android:background="@color/MistyRose"
        android:text="@string/Save" />

    <Button
        android:id="@+id/send"
        android:layout_width="80dp"
        android:layout_height="50dp"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="30dp"
        android:background="@color/MistyRose"
        android:text="@string/Send" />
</LinearLayout>

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="800dp"
    android:layout_height="800dp"

    android:layout_alignLeft="@+id/linearLayout2"
    android:layout_below="@+id/linearLayout2" >

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
        >

       <HorizontalScrollView 
       android:id="@+id/hv"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
       >
             <ImageView 
           android:id="@+id/imv"
           android:background="@drawable/blu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

           />
   </HorizontalScrollView>
      </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:46:22.830

而不是尝试在 ScrollView 和 Horizo​​ntalScrollView 中安装图像以启用图像平移，我什至不确定是否可以实现，如果可以，可能会被证明是一项艰巨的任务。

您可以考虑使用[PhotoView](https://github.com/chrisbanes/PhotoView)库。它的实现非常简单，并且像开箱即用的魅力一样工作。另外，作为奖励，它支持缩放、使用多点触控和双击。

在该页面上是如何实现它的简单示例。它所需要的只是`ImageView`在您的 XML 中进行设置。没有`ScrollViews`或`HorizontalScrollViews`需要让它工作：

```
ImageView mImageView;
PhotoViewAttacher mAttacher;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Any implementation of ImageView can be used!
    mImageView = (ImageView) findViewById(R.id.iv_photo);

    // Set the Drawable displayed
    Drawable bitmap = getResources().getDrawable(R.drawable.wallpaper);
    mImageView.setImageDrawable(bitmap);

    // Attach a PhotoViewAttacher, which takes care of all of the zooming functionality.
    mAttacher = new PhotoViewAttacher(mImageView);
}

// If you later call mImageView.setImageDrawable/setImageBitmap/setImageResource/etc then you just need to call
attacher.update(); 
```

# visual-studio - Visual Studio 头文件错误

> ID：14909357
> 
> 赞同：1
> 
> 时间：2013-02-16T10:37:50.430
> 
> 标签：visual-studio, header-files

我正在尝试在 Visual Studio 2010 Professional 中创建 C++ 项目。我选择了包含 ATL 和 MFC 文件的 Windows 控制台项目。当我尝试构建项目时，会生成大量错误。如何解决问题？

我在 64 位机器上使用 Windows 7，VS 2010 Professional。

```
1>------ Build started: Project: test, Configuration: Debug Win32 ------
1>Build started 16.02.2013 16:33:55.
1>InitializeBuildStatus:
1>  Touching "Debug\test.unsuccessfulbuild".
1>ClCompile:
1>  stdafx.cpp
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(697): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(697): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(709): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(709): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(718): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(718): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(730): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(730): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(746): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(746): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(756): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(756): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(767): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(767): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(779): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(779): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(795): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(795): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1219): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1219): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1228): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1228): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1334): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1334): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1347): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1347): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1355): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1355): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1363): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1363): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1387): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1387): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1556): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1556): error C2143: syntax error : missing ';' before '*'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1556): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1556): error C3861: 'AtlGetStringResourceImage': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1557): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1559): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1559): error C2227: left of '->achString' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1559): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1559): error C2227: left of '->nLength' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1576): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1576): error C2143: syntax error : missing ';' before '*'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1576): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1576): error C3861: 'AtlGetStringResourceImage': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1577): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1579): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1579): error C2227: left of '->achString' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1579): error C2065: 'pImage' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(1579): error C2227: left of '->nLength' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2142): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2142): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2170): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2170): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2193): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2193): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2260): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2260): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2277): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2277): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2286): error C2039: 'AtlSafeArrayGetActualVartype' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2286): error C3861: 'AtlSafeArrayGetActualVartype': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2297): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2297): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2301): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2301): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2338): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2338): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2357): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2357): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2377): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2377): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2701): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2701): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2710): error C2039: 'AtlSafeArrayGetActualVartype' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2710): error C3861: 'AtlSafeArrayGetActualVartype': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2721): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2721): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2725): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2725): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2904): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2904): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2919): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2919): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2933): error C2039: 'AtlThrowImpl' : is not a member of 'ATL'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlcomcli.h(2933): error C3861: 'AtlThrowImpl': identifier not found
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(343): error C2146: syntax error : missing ';' before identifier 'AutoCriticalSection'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(343): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(343): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(360): error C2146: syntax error : missing ';' before identifier 'AutoCriticalSection'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(360): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(360): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(361): error C2146: syntax error : missing ';' before identifier 'AutoDeleteCriticalSection'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(361): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(361): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(362): error C2146: syntax error : missing ';' before identifier 'CriticalSection'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(362): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(362): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(377): error C2146: syntax error : missing ';' before identifier 'AutoCriticalSection'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(377): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(377): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(425): error C2146: syntax error : missing ';' before identifier 'm_csObjMap'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(425): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(425): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(434): error C2146: syntax error : missing ';' before identifier 'm_csWindowCreate'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(434): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(434): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(446): error C2146: syntax error : missing ';' before identifier 'm_csStaticDataInitAndTypeInfo'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(446): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(446): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2375): error C2065: 'm_csObjMap' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2375): error C2228: left of '.Init' must have class/struct/union
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2379): error C2653: 'CAtlBaseModule' : is not a class or namespace name
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2379): error C2065: 'm_bInitFailed' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2407): error C2065: 'm_csObjMap' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2407): error C2228: left of '.Term' must have class/struct/union
1>          type is ''unknown-type''
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2712): error C2653: 'CAtlBaseModule' : is not a class or namespace name
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2712): error C2065: 'm_bInitFailed' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2725): error C2065: '_AtlBaseModule' : undeclared identifier
1>c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlbase.h(2725): fatal error C1003: error count exceeds 100; stopping compilation
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.73
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

# c# - 在某个工具的事件上使用断点时计算机冻结

> ID：14909359
> 
> 赞同：2
> 
> 时间：2013-02-15T16:56:54.217
> 
> 标签：c#, winforms, visual-studio-2010

当我对我的事件使用断点时`combobox.SelectedIndexChanged`，我的整个计算机停止工作。`Ctrl`当我按+ `Alt`+时，它会冻结然后恢复正常`Del`。会是什么呢？这只发生在`ComboBox.SelectedIndexChanged`事件中。

此外，有时我必须重新启动 MySql 服务才能查看插入和更新查询的结果。这可能是什么原因造成的？

# python - 客户端服务器通信网络编程python

> ID：14909365
> 
> 赞同：1
> 
> 时间：2013-02-16T10:38:23.247
> 
> 标签：python, network-programming, client

我计划用一个服务器和多个客户端构建一个应用程序。当客户端第一次连接到服务器时，必须给它一个 id。每次客户端发送请求时，服务器都会向客户端发送一组字符串。客户端然后处理这些字符串，一旦完成，它再次向服务器发送另一组字符串的请求。这些字符串存在于服务器上的数据库中。

我已经实现了处理字符串的客户端程序的一部分，但我不知道如何实现服务器和客户端之间的通信。

我正在使用 python 开发这个应用程序。我不知道网络编程，因此我不知道如何让它工作。

我遇到了套接字编程和面向消息的中间件、消息队列、消息代理，但不确定这是否是我需要的。谁能告诉我我需要使用什么以及我需要学习哪些主题才能使其正常工作。我希望我听起来并不含糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:42:39.543

我认为你应该看看 XML-RPC 协议，它允许你使用代理对象而不是编写低级套接字的东西。

Python 在实现它的标准库中带有两个模块，一个[`xmlprclib`](http://docs.python.org/2/library/xmlrpclib.html)实现客户端，一个[`SimpleXMLRPCServer`](http://docs.python.org/2/library/simplexmlrpcserver.html)实现服务器。在 python3 中，它们被重命名为`xmlrpc.client`and `xmlrpc.server`。

这两个模块都附带了[一些](http://docs.python.org/2/library/xmlrpclib.html#example-of-client-usage) [示例](http://docs.python.org/2/library/simplexmlrpcserver.html#simplexmlrpcserver-example)用法，可能会让您了解如何使它们为您工作。

特别是，您的服务器将公开一个函数来注册该客户端，该函数返回一个新的客户端 ID，以及一个处理字符串并返回结果的函数，客户端将简单地在代理对象中调用该方法。实现起来应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:07:01.383

我可以建议使用类似[beanstalkd](https://github.com/earl/beanstalkc/)的东西吗？

这样，您可以创建一个将“字符串”推送到队列的服务器，并且一个或多个客户端可以从该队列中提取一个“字符串”处理它，然后在完成后获取另一个“字符串”。

我相信以这种方式使用队列比创建套接字等更容易。

只是把例子从他们的网站上拿下来。

服务器？

```
>>> import beanstalkc
>>> beanstalk = beanstalkc.Connection(host='localhost', port=14711)
>>> beanstalk.put('hey!')
1 
```

客户？

```
>>> job = beanstalk.reserve()
>>> job.body
'hey!'
>>> job.delete() 
```

使用起来非常简单，能够创建“请求”、“结果”、“错误”队列（管）。

它可能不适合您的目的，但需要牢记。

# github - 错误：blob 太大 - 从 github repo 下载单个 zip 文件

> ID：14909369
> 
> 赞同：10
> 
> 时间：2013-02-16T10:38:58.117
> 
> 标签：github

从我的 github（免费）存储库下载 10 MB zip 文件时，我收到此错误：

错误：blob 太大

... 10 MB 对于二进制下载来说似乎并不大... 但是无论哪种情况，您如何从 github 下载单个较大的二进制文件或如何设置 github 以便项目中的某些二进制文件可以下载了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T12:21:53.377

Github 有意这样做，以防止项目所有者通过 Github 分发编译好的二进制文件。

他们希望 Github 成为共享源代码的平台，而不是共享文件的平台。
这也是[一种防止滥用](http://developers.slashdot.org/comments.pl?sid=3779397&cid=43806415)（分发非公开电影/等）的方法。

不幸的是，谷歌代码正在效仿他们的做法，并将阻止项目所有者在几个月内上传新文件。

一种解决方案是在[SourceForge](http://sourceforge.net)或[类似服务](https://webapps.stackexchange.com/questions/44562/google-code-downloads-discontinued-what-to-use-instead)上托管文件。

# validation - @Valid 注释可以在 spring mvc 中递归地检查字段吗？

> ID：14909370
> 
> 赞同：8
> 
> 时间：2013-02-16T10:39:10.270
> 
> 标签：validation, spring-mvc, bean-validation, hibernate-validator

我用一些 JSR-303 验证器注释制作了一个模型对象：

```
public class UserInfoBasicModel  implements Serializable{
    @NotNull(message="cannot be null")
    @NotEmpty(message="cannot be empty")
    private String name;
    //getter and setter
    //..ignored..
} 
```

在控制器中自动绑定数据：

```
@Controller
@RequestMapping("/user")
public class UserController  {
    @RequestMapping(method = RequestMethod.POST, value = "/registry/")
    public String registry(HttpServletRequest request,
            ModelMap modelMap,
            @Valid UserInfoBasicModel userInfoBasicModel,
            BindingResult result)    {
        //...some code here...
    }
} 
```

在上述情况下，它可以很好地进行验证。但是当我将模型封装到另一个对象中时，如下所示，UserInfoBasicModel 上的验证不再起作用：

封装 UserInfoBasicModel 对象的 Object：

```
public static class UserUpdateFormTransmitter       {
    @Valid
    private UserInfoBasicModel userInfoBasicModel;
    //getter and setter
    //..ignored..
} 
```

控制器：

```
@Controller
@RequestMapping("/user")
public class UserController  {
    @RequestMapping(method = RequestMethod.POST, value = "/registry/")
    public String registry(HttpServletRequest request,
            ModelMap modelMap,
            @Valid UserUpdateFormTransmitter userUpdateFormTransmitter,
            BindingResult result)    {
        //...some code here...
    }
} 
```

我想知道为什么 @valid 注释不像[JSR 303：Bean Validation](http://beanvalidation.org/1.0/spec/#constraintdeclarationvalidationprocess-validationroutine-graphvalidation)所说的那样递归地工作。谁能给我一个解决方案，以便我可以递归地验证我的对象，非常感谢！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:52:57.100

我从来没有做过递归验证，但根据[这个](http://www.packtpub.com/article/bean-validation-jsr-303-annotations-apache-myfaces-1.2)，只需用@Valid 标记子对象就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T10:17:48.857

我的两分钱：

1.尝试使用 ModelAttribute，如下所示：

Java 文件：

```
@RequestMapping(method = RequestMethod.POST, value = "/registry/")
public String registry(HttpServletRequest request,
            ModelMap modelMap,
            @ModelAttribute("userupdate") @Valid UserUpdateFormTransmitter userUpdateFormTransmitter,
            BindingResult result) 
```

JSP：

```
<form:form method="POST" name="form1" action="/registry" modelAttribute="userupdate"> 
```

2.确保您使用的是路径属性，例如

```
//for recursive access
<form:input type="text" id="name" path="userInfoBasicModel.name" /> 
```

代替

```
<form:input type="text" id="name" value="${userInfoBasicModel.name}" /> 
```

# ruby-on-rails-3 - 使用 delay_job 发送电子邮件两次

> ID：14909382
> 
> 赞同：2
> 
> 时间：2013-02-16T10:40:59.010
> 
> 标签：ruby-on-rails-3, actionmailer, delayed-job

我已经看到有关此的其他问题，但我检查了，并且我没有两次调用交付。

这是我的邮件

```
class Suggestion < ActionMailer::Base
  default from: "me@myapp.com"

  def send_suggest(subject, body, sender, ref)

    @sender = sender
    @body = body
    @ref =ref

    mail(:to => "mail@myapp.com", :subject => "#{subject} from #{sender}" )
  end
end 
```

这是从建议控制器发送的

```
def create 

        if (!current_user.nil?)

            sender = current_user.email

        end
        subject = params[:subject]
        body = params[:description]
        Suggestion.delay.send_suggest(subject, body, sender, request.referer)
        respond_to do |format|
            format.js { render :nothing => true }  
        end
    end 
```

如您所见，`delay`被调用一次。我可以看到工头，工人处理电子邮件。

进一步调查这个..我`delay`改为`delay(queue: "Suggestions", priority: 20, run_at: 5.minutes.from_now)`

5 分钟后，我会收到 2 封电子邮件。所以发送电子邮件会延迟。但随后发送两次电子邮件被发送两次。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:12:17.447

之前有同样的问题，发现了这个问题。这是解决方案（对于我的问题）。

检查您正在运行的延迟作业工人的数量。

ps -ef | grep 延迟作业

```
root     18848     1  0 Aug27 ?        00:23:24 delayed_job
root     20104     1  0 Aug26 ?        00:23:54 delayed_job
root     21805     1  0 Aug27 ?        00:23:15 delayed_job 
```

然后停止具体进程（如果调用 script/delayed_job stop 失败）

杀死-9 18848

# c# - 在运行时创建数组类型

> ID：14909389
> 
> 赞同：4
> 
> 时间：2013-02-16T10:42:25.333
> 
> 标签：c#, arrays, reflection, types, reflection.emit

我想在运行时获取一种类型的“数组类型”。我不需要数组的实例，只需要Type。我目前使用以下方法。

```
 private Type GetArrayType(Type elementType)
    {
        return Array.CreateInstance(elementType, 0).GetType();
    } 
```

在不创建数组实例的情况下有没有更好的解决方案？

注意：我不能使用`Type.GetType(elementType.FullName + "[]")`，因为我在运行时通过`Reflection.Emit`. 根据[MSDN](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)，它需要将动态程序集保存在我不想做的磁盘上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T10:45:18.173

是的，您可以使用[`Type.MakeArrayType`](http://msdn.microsoft.com/en-us/library/hc2e4ft8.aspx).

> 返回一个 Type 对象，表示当前类型的一维数组，下限为零。

```
private Type GetArrayType(Type elementType)
{
    return elementType.MakeArrayType();
} 
```

# javascript - couchDB designDoc 开发工作流程和版本控制

> ID：14909392
> 
> 赞同：1
> 
> 时间：2013-02-16T10:42:48.577
> 
> 标签：javascript, node.js, couchdb, couchapp

对于开发，我想将构成 couchDB 设计文档的各种组件 ( `views`, `lists`, `shows`) 作为单独的文件与我的其他开发代码一起保存在名为 couchDB 的目录中。当我对更改感到满意时，我想使用 couchapp.push 发送到数据库，同时还能够对设计文档组件文件进行版本控制。

我在想也许使用节点模块“couchapp”和节点来扫描目录及其子目录中的 .js 文件，然后使用它们来构建设计文档并上传到 couchDB。也许子目录的结构如下：

```
designDocsJs
  |-- views
  |     |--view1.js
  |     |--view2.js
  |-- shows
  |-- lists 
```

是否可以将 map 和 reduce 放在同一个文件中，例如。`'view1.js'`或者他们需要在单独的文件中`'view1-map.js'`吗`'view1-reduce.js'`？

目前我正在使用以下内容，但我不确定如何使用节点读取 .js 文件并将它们动态添加到 ddoc.views{} ？任何指导将不胜感激，特别是使用 javascript/node 解决方案。

```
var couchapp = require('couchapp')
    , path = require('path');

  ddoc = {
      _id: '_design/entitiesNew'
    , views: {}
    , lists: {}
    , shows: {} 
  }

  // node module exports
  module.exports = ddoc;

  // REPLACE ME WITH SOME WAY OF READING A
  // STRUCTURED DIR OF .JS FILES AND COMBINING
  // AS NECESSARY
  ddoc.views.byType = {
    map: function(doc) {
      emit(doc.type, null);
    },
    reduce: '_count'
  }

  couchapp.loadAttachments(ddoc, path.join(__dirname, '_attachments')); 
```

进而：

```
$ cd path/to/here
$ mkdir _attachments
$ couchapp push updateCouchDbDesigndocs.js http://localhost:5984/databaseName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:12:29.457

couchapp工具就是这样做[的。](http://couchapp.org/page/index)我使用 couchapp 而没有其他脚本推送。

这是目录结构：

```
mycouchappdir
|-- views/
    |-- myview1/
       |-- map.js
       |-- reduce.js
|-- shows/
    |-- myshow1.js
    |-- myshow2.js
|-- _attachments/
    |-- myattachment.png 
```

您的 map.js 文件将如下所示：

```
function(doc) {
   emit(doc.type, null);
} 
```

然后`couchapp push`从`mycouchappdir`.

* * *

您可能还希望考虑将您的 couchapps 放在他们自己的存储库中。运行`couchapp push`始终会为设计文档创建一个新修订。因此，如果您的 couchapp 有不同的存储库，那么当您对存储库进行更改时，它就是对 couchapp 的更改，您可以在知道新修订版与旧修订版不同的情况下推送它。

# java - 调用 JButton actionperformed 事件时返回一个值

> ID：14909401
> 
> 赞同：2
> 
> 时间：2013-02-16T10:43:23.787
> 
> 标签：java, swing, jbutton, actionevent

我对动作事件有一些问题`JButton`，我已经声明了一个全局变量 ( `boolean tc1`) 和一个`JButton t1`. 当我按下 JButton 时，我需要将布尔变量的值更改为“真”。谁能帮我吗？我的代码在这里。

```
class Tracker extends JPanel {
    public static void main(String[] args) {
        new Tracker();    
   }

    public Tracker() {

        JButton tr=new JButton("TRACKER APPLET");
        JButton rf=new JButton("REFRESH");

        boolean tc1=false,tc2=false,tc3=false,tc4=false;
        JButton t1=new JButton(" ");

        t1.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                tc1=true;
            }
        });
        System.out.println(tc1);
        //remaining part of the code...
        // here i need to use the value of tc1 for further process..

    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:20:49.980

`tc1`必须是实例变量。
您可以在方法内定义的另一个类中使用局部变量，除非局部变量是`final`变量。
取出`tc1`从`constructor`整体到可见性的声明`class`

```
 class Tracker extends JPanel {
  boolean tc1=false,tc2=false,tc3=false,tc4=false;
  public static void main(String[] args) {
    new Tracker();    
  }

public Tracker() {

    JButton tr=new JButton("TRACKER APPLET");
    JButton rf=new JButton("REFRESH");

    JButton t1=new JButton(" ");

    t1.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            tc1=true;
        }
    });
    System.out.println(tc1);
    //remaining part of the code...
    // here i need to use the value of tc1 for further process..

   }
} 
```

我也遇到过这个问题，幸运的是我找到了解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:00:01.980

您不能更改匿名内部类（动作侦听器）中的局部方法变量的值。但是，您可以更改外部类的实例变量......所以您可以将 tc1 移动到 Tracker。

```
class Tracker extends JPanel {
    public static void main(String[] args) {
        new Tracker();
    }

    private boolean tc1; // <=== class level instead...

    public Tracker() {

        JButton t1 = new JButton(" ");

        t1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                tc1 = true;
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T11:00:19.190

首先你说`i have declared a global variable(boolean tc1)`，这里 tc1 不是全局变量，如果你想要一个全局变量，那么你必须将该变量声明为`static`.

然后，如果您想访问该变量，`button click event`则可以编写以下代码：

```
class Tracker extends JPanel
{
    boolean tc1=false,tc2=false,tc3=false,tc4=false;
    public static void main(String[] args) {
        new Tracker();    
    }
    public Tracker()
    {
        JButton tr=new JButton("TRACKER APPLET");
        JButton rf=new JButton("REFRESH");

        JButton t1=new JButton(" ");

        t1.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            tc1=true;
            getValue();
        }
        });
    }
    public void getValue()
    {
        System.out.println("values is: "+ tc1);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T10:48:51.770

定义点击处理程序：

```
public void onClick(Boolean tc1){
  System.out.println(tc1) ;
  //Write some logic here and use your updated variable
} 
```

接着：

```
public Tracker()
{

JButton tr=new JButton("TRACKER APPLET");
JButton rf=new JButton("REFRESH");

boolean tc1=false,tc2=false,tc3=false,tc4=false;
JButton t1=new JButton(" ");

     t1.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent e){
          tc1 = true ;
          onClick(tc1) ;
      }
}); 
```

# jquery - 带有提示的Jquery ajax调用不起作用

> ID：14909402
> 
> 赞同：1
> 
> 时间：2013-02-16T10:43:25.507
> 
> 标签：jquery, prompt

我在我的登录表单中放置了一个“丢失密码”链接。

表单中的链接位于 id**为 pwdforget的 div 中**

我不想提交表单，只是提示输入电子邮件地址，查看数据库以验证该地址是否存在，发送电子邮件或返回错误以防电子邮件不存在

我的 jquery 脚本非常基本（我使用**impromptu**作为提示符，但我对任何其他例程都有同样的问题，即使是基本的 javascript 提示符）

```
$('#pwdforget').click(function() {
  $.Prompt("Insert your email address","", "", function(r) {
    $.ajax({
      url: 'pwdforget.php?email='+r,
      success: function(res){
        result = $.trim(res);
        if(result=="ok") {
          alert("Thank you");
        } else {
          alert("Bad address");
        }
      }
    });
  });
}); 
```

查看控制台，我可以验证地址是否已发送到 php 文件，但我没有从文件中得到任何答案，也没有任何操作发生。我创建了一个空的 php 文件，它只是回显“ok”，但在 ajax 调用的**成功**部分，我注意到**res**变量始终为空，无论从 php 文件中回显什么。

我还注意到 php 文件中没有任何反应（我尝试使用 firephp 放置一些变量，并且控制台回显）

我每天都使用 $.ajax，但这是我第一次在 javascript 提示符下使用它。

有什么线索吗？谢谢阿尔法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:07:38.473

你可以试试.done()。

```
$.ajax({}).done(function ( data ) { alert(data); }) 
```

这是有效的。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){
  var  r=prompt("enter your email");
  if(r){
    $.ajax({
      url: 'pwdforget.php?email='+r,
      success: function(res){
      $('body').html(res);
      }
  });} });
</script> 
```

# c# - 没有为我在 json.net 中的场景正确创建 JSON 数组

> ID：14909404
> 
> 赞同：0
> 
> 时间：2013-02-16T10:43:32.230
> 
> 标签：c#, asp.net, json, json.net

我想在 C# 中使用 json.net 创建一个 json 字符串。但是 json 数组没有像我预期的那样创建。这是我的代码：

```
 markInfo[] MarkUpdate1=new markInfo[2];
            string jsonString = JsonConvert.SerializeObject(new { MarkUpdate =MarkUpdate1 }, Formatting.Indented);
            return jsonString;

public class markInfo
        {
            List<string> FinalMarks = new List<string>();
            List<string> EvalMarks = new List<string>();
        } 
```

我的预期输出是：

```
{
    "MarkUpdate":[
        {
        "FinalMarks":[
            {
            }
         ]  
        },
        {               
        "EvalMarks":[
            {

            }
            ]
    }
    ]
} 
```

但它产生了以下输出：

```
{
  "MarkUpdate": [
    null,
    null
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:49:18.663

您正在创建一个匿名类型，该类型具有一个`MarkUpdate`属性，该属性分配了不包含对象实例的数组的值。

您是否要输出 a 的一个实例`MarkUpdate`？在这种情况下，删除您的数组，实例化您的 markInfo 类并将其序列化。

您还应该使您的`FinalMarks`和`EvalMarks`属性，它们也没有标记为公开。

```
string jsonString = 
    JsonConvert.SerializeObject(new MarkInfo(), Formatting.Indented);
return jsonString;

public class MarkInfo
{  
    private List<string> finalMarks;
    private List<string> evalMarks;

    public List<string> FinalMarks
    { 
       get { return this.finalMarks ?? (this.finalMarks = new List<string>()); }
       set { this.finalMarks = value; }        
    }

    public List<string> EvalMarks
    { 
       get { return this.evalMarks ?? (this.evalMarks = new List<string>()); }
       set { this.evalMarks = value; }        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:47:47.940

这一行：

> `markInfo[] MarkUpdate1=new markInfo[2];`

...创建一个数组`markInfo`但不创建实例；两个数组*槽*都是空的。所以至少你需要创建它们：

```
markInfo[] MarkUpdate1=new markInfo[2];
markInfo[0] = new markInfo();
markInfo[1] = new markInfo(); 
```

但是，这仍然不会为您提供“预期输出”，因为您的预期输出只有一个条目，但您的代码定义了两个条目。

# facebook - 应用程序被错误配置为 Android 中的 Facebook 登录

> ID：14909406
> 
> 赞同：1
> 
> 时间：2013-02-16T10:43:45.207
> 
> 标签：facebook, android-facebook

我正在编写一个应用程序，我*允许用户在 fb 上登录*，但是每当我在移动设备上测试我的应用程序时： **应用程序被错误配置为 Facebook 登录**

我不知道*为什么我会得到这个以及如何解决这个问题*？

我已经生成**了 hashkey**并在我的仪表板中给出了，我也在使用**App ID** ，但我不知道我需要在我的应用程序中的哪里使用**App Secret**

请帮助我......解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:46:33.940

这是一个非常大的问题，在使用 Facebook SDK 时，这意味着您生成的 keyhash 是错误的：

请按照以下步骤操作：

1.  项目（右键单击）> Android 工具 > 导出签名的应用程序包
2.  导出 Android 应用程序：选择项目 > 下一步
3.  创建新密钥库 > 选择要保存的位置并命名为 Project.keystore > 输入密码 | 确认密码
4.  密钥创建 - 输入别名、密码、有效性、组织名称 > 下一步
5.  选择保存apk文件的路径，命名为Project.apk > Finish

现在按照以下步骤操作：

1.  下载 OpenSSL 并将其保存到 C:/
2.  从 OpenSSL 文件夹中复制所有 DLL 文件
3.  浏览 Java bin 文件夹并将这些 DLL 与密钥库 (Project.keystore) 一起粘贴到此处
4.  现在打开命令提示符并按照本教程链接进行操作：

www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1

# c# - 使用变亮混合模式播放 mpeg 视频

> ID：14909408
> 
> 赞同：0
> 
> 时间：2013-02-16T10:44:01.433
> 
> 标签：c#, .net, xna, xna-4.0

对于存储在 mpeg 视频文件中的游戏，我有各种效果，每隔几秒钟。视频的示例帧如下所示：
![](../Images/b471cff2dc11d9ac5d21d91ebcc813fe.png)

我想用变亮混合模式显示它（用视频替换较暗的像素，不要触摸比视频更亮的像素），这对于 C# 和 XNA 是否可行，或者如果我选择不同的方式来存储动画会更好有声音？

# java - JPA 2.0 EntityManager 是否尊重 Google App Engine 中的当前命名空间？

> ID：14909409
> 
> 赞同：0
> 
> 时间：2013-02-16T10:44:25.013
> 
> 标签：java, google-app-engine, namespaces, jpa-2.0, entitymanager

## 如何让 JPA 在生成密钥时尊重我设置的命名空间？

我正在使用以下代码获取当前用户并将`Namespace`其设置为`UserId`：

```
final OAuthService oauth = OAuthServiceFactory.getOAuthService();
final User user = oauth.getCurrentUser();
NamespaceManager.set(user.getUserId()); 
```

当我执行以下操作时，我会在日志中获得正确的信息：

```
System.out.println("user.getUserId() = " + user.getUserId());
System.out.println("user.toString() = " + user.toString()); 
```

这是我在 my`Key`的构造函数内部创建的方法`Entity`：

```
@Entity
public class ImageHandle
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @JsonSerialize(using = com.vertigrated.gae.cms.jackson.KeySerializer.class)
    @JsonDeserialize(using = com.vertigrated.gae.cms.jackson.KeyDeserializer.class)
    private Key key;
 .... 
```

我在构造函数中做的第一件事是：

```
this.key = KeyFactory.createKey(ImageHandle.class.getSimpleName(), uuid.toString()); 
```

Google App Engine 文档说`KeyFactory`应该使用当前`NamespaceManager.get()`返回的任何内容，但事实并非如此。

当我执行以下代码并将`Namespace`设置设置`""`为输出时，即使我已`user.getUserId()`在上面的代码中将其设置为：

```
final ImageHandle ir = new ImageHandle(fs.getBlobKey(aef), uuid, url, name, w, h, s);
ENTITY_MANAGER.persist(ir);
System.out.println("ir.getKey().getNamespace() = " + ir.getKey().getNamespace()); 
```

输出结果：`ir.getKey().getNamespace() =`

也没有`Namespaces`出现在`DataStore Viewer`管理控制台中。

### Google App Engine 中的 JPA EntityManager 是否尊重当前`Namespace`设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:01:05.417

### 解决方案

我弄清楚问题出在哪里，我正在调用另一个方法，该方法将`Namespace`finally 块中的设置为我的默认值`Namespace`，一旦我移动了`NamespaceManager.set(user.getUserId());`该方法调用的下方，它就修复了它。

### 学过的知识

我应该得到 current `Namespace`，存储它并像示例一样将其设置回来。

# wpf - 如果我使用 EntityFramework，是否必须在 ViewModel 中引发 PropertyChanged？

> ID：14909411
> 
> 赞同：0
> 
> 时间：2013-02-16T10:44:26.313
> 
> 标签：wpf, entity-framework, mvvm

我想使用 MVVM 模式来开发 WPF 应用程序，模型是一个实体框架模型。由于 entityframwork 在每个属性设置器中实现`INotifyPropertyChanged`并引发`PropertyChanged`事件，我是否必须在 viewmodel 属性（模型属性的包装器）中引发此事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:48:14.267

是的你是。

UI 组件绑定到您的属性，并且您的属性使用 EF 实体对象。所以你可以捕捉到实体属性的变化，但是 UI 现在应该如何看待变化呢？答：您的视图模型实现`INotifyPropertyChanged`并引发`PropertyChanged`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:48:37.740

您需要为`PropertyChanged`您在视图 (XAML) 中绑定的所有属性引发事件，否则他们将不知道何时应该更新。

因此，如果您将模型属性包装在视图模型中，则需要引发事件。

但是，您可以直接绑定到模型属性：

```
<TextBox Text="{Binding Model.Property}" /> 
```

并且随着这些属性的实现`INotifyChanged`，UI 将得到通知，因此也会更新。因此，您根本不需要包装它们。

# mysql - sql 命令删除了我所有的 post_content 并将其替换为 url

> ID：14909415
> 
> 赞同：0
> 
> 时间：2013-02-16T10:45:02.830
> 
> 标签：mysql, wordpress, phpmyadmin

我运行了这个 sql 命令，试图在 domain.com 之后添加一个斜杠，因此在域之间移动 wordpress 网站时图像 url 起作用，现在所有 post_content 字段都只是 url？

像这样

[http://domain.com?page_id=7](http://domain.com?page_id=7)

有什么想法为什么会发生这种情况或有什么方法可以将其改回来？

```
UPDATE wp_posts SET post_content = replace(post_content, "domain.comwp-content", "domain.com/wp-content"); 
```

# blackberry - 将边距设置为 VerticalFieldManager 时会发生奇怪的事情

> ID：14909419
> 
> 赞同：2
> 
> 时间：2013-02-16T10:45:34.503
> 
> 标签：blackberry

我想生成`VerticalFieldManager`具有非零边距的 a ，所以我创建 a `VerticalFieldManager`，然后使用 vfm.setMargin(10, 10, 10, 10); 之后，将一些字段（`buttonField`，`ObjectChoiceField`）放入其中。

这似乎太简单了，对吧？但奇怪的事情发生了。当我专注于最后一个`ObjectChoiceField`并按空格键切换它的选择时，`ObjectChoiceField`消失了。

怎么可能？这里是demo代码，有大佬能找到bug吗？

```
final class HelloWorldScreen extends MainScreen{
  HelloWorldScreen() {
    // just a demo to show the strange thing
    String [] arr = {"a","b"};
    for(int i = 0; i < 10; i++){

        VerticalFieldManager vfm = new VerticalFieldManager(); // Field.USE_ALL_WIDTH
        vfm.setMargin(10, 10, 10, 10);
        ButtonField btn = new ButtonField(String.valueOf(i));
        ObjectChoiceField ch = new ObjectChoiceField(String.valueOf(i), arr);

        vfm.add(btn);
        vfm.add(ch);

        add(vfm);
    }
  }
} 
```

**编辑：**所需 UI 边距的屏幕截图：

![在此处输入图像描述](../Images/af70111d5a7c1a633ac46ef9d26246bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:53:49.097

这很奇怪。

为了那些不运行您的代码的人的利益，正在发生的事情是，当您单击对象选择字段时，整个屏幕会垂直滚动一点。每次垂直滚动后，屏幕将无法一直滚动到底部。经过多次这样的操作，最终该屏幕的大部分下部不再可访问。

**我不知道为什么会这样。**（对我来说看起来像一个黑莓错误）

我观察到的是，如果您拨打

```
 vfm.setMargin(10, 10, 10, 10); 
```

问题消失了。

我可以建议您使用的解决方法吗

```
 vfm.setPadding(10, 10, 10, 10); 
```

反而？

我知道*边距*和*填充*不是一回事。但是，根据您的完整 UI 设计（我看不到），*在这种情况下*，设置 10 像素填充可能足以完成您想要做的事情。

* * *

**更新：**根据您所需 UI 的屏幕截图，我能够使用此解决方法生成它。同样，它*不应该*做这么多的工作，但这个额外的代码对我有用：

```
public class BugScreen extends MainScreen {

   private static final int BG_COLOR = Color.LIGHTGRAY;
   private static final int FG_COLOR = Color.WHITE;
   private static final int BORDER_LINE_COLOR = Color.GRAY;
   private static final int PAD = 10;

   public BugScreen() {
      super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR);

      getMainManager().setBackground(BackgroundFactory.createSolidBackground(BG_COLOR));
      // this additional call ensures that when scrolling bounces, the area "behind"
      // the normal visible area is ALSO of BG_COLOR
      setBackground(BackgroundFactory.createSolidBackground(BG_COLOR));

      // this will establish a thin gray padding on the screen's left/right sides
      // NOTE: I seem to get drawing artifacts if I try to use this for ALL sides!
      getMainManager().setPadding(0, PAD, 0, PAD);

      String [] arr = {"a","b"};
      for(int i = 0; i < 10; i++){

         VerticalFieldManager vfm = new VerticalFieldManager(Field.USE_ALL_WIDTH) {
            public int getPreferredWidth() {
               return Display.getWidth() - 2 * PAD;
            }
            public void paint(Graphics graphics) {
               int oldColor = graphics.getColor();
               super.paint(graphics);
               graphics.setColor(BORDER_LINE_COLOR);
               // draw the (1-pixel wide) border size you would like.
               graphics.drawRect(0, 0, getPreferredWidth(), getHeight());
               graphics.setColor(oldColor);
            }
         };

         vfm.setBackground(BackgroundFactory.createSolidBackground(FG_COLOR));
         ButtonField btn = new ButtonField(String.valueOf(i));
         ObjectChoiceField ch = new ObjectChoiceField(String.valueOf(i), arr);

         vfm.add(btn);
         vfm.add(ch);

         // add a separator field to get thin gray margin between (vfm) fields         
         add(new MarginField());

         add(vfm);
      }

      // add one last margin field at the bottom
      add(new MarginField());
   }

   private class MarginField extends Field {
      public MarginField() {
         super(Field.USE_ALL_WIDTH);
      }
      public int getPreferredHeight() { return PAD; }
      protected void paint(Graphics g) {
         int oldColor = g.getColor();
         g.setColor(BG_COLOR);
         g.fillRect(0, 0, getWidth(), getPreferredHeight());
         g.setColor(oldColor);
      }
      protected void layout(int width, int height) {
         setExtent(width, getPreferredHeight());               
      }     
   }
} 
```

# backbone.js - 路由器功能未触发

> ID：14909420
> 
> 赞同：0
> 
> 时间：2013-02-16T10:46:01.320
> 
> 标签：backbone.js, backbone-routing

在我的主干函数中，我正在将 id 导航到路由器，但该函数没有调用......我也给了不同的示例导航 url 到我的链接，那些没有调用函数..

我的代码：

```
 (function($){

        var myRouter = Backbone.Router.extend({
            routes:{
                "":"defaultRoute", //onload it works
                '#/name/:id':"nameData", 
                             // i am calling this function on default Router
                '#/project/:id':"projectData"
            },
            defaultRoute:function(){
                console.log('default')
                startRoute.navigate("#/name/3"); // i am redirecting
            },
            nameData:function(id){
                console.log(id); // id not consoling not called this func.
            },
            projectData:function(project){
                console.log(project);
            }
        });

    var startRoute = new myRouter();
    Backbone.history.start();
    })(jQuery); 
```

我的网址：`http://localhost:85/router/web/#/name/3`

我的 html ：

```
<ul class="name">
                <li><a href="#/name/1">name1</a></li>
                <li><a href="#/name/2">name2</a></li>
                <li><a href="#/name/3">name3</a></li>
                <li><a href="#/name/4">name4</a></li>
                <li><a href="#/name/5">name5</a></li>
            </ul> 
```

任何人都认为我错了，这是我在这里所做的……请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:41:07.013

我所有的功能都是正确的，错误地我在路线婴儿车上添加了哈希。

更新功能在这里：

```
(function($){

    var myRouter = Backbone.Router.extend({
        routes:{
            "":"defaultRoute",
            'name/:id':"nameData",
            'product/:id':"projectData"
        },
        defaultRoute:function(){
            console.log('i am default');
        },
        nameData:function(e,id){
            console.log(id);
        },
        projectData:function(project){
            console.log(project);
        }
    });

var startRoute = new myRouter();
Backbone.history.start();
})(jQuery); 
```

# c# - 在 ListView 的 ItemTemplate 中使用的 AvalonEdit 中的连接命令不起作用

> ID：14909421
> 
> 赞同：4
> 
> 时间：2013-02-16T10:46:07.327
> 
> 标签：c#, .net, wpf, binding, avalonedit

我在我的项目中使用了 AvalonEdit 控件。当我使用 Ctrl+C 或 Ctrl+V 等快捷键时，相关的复制/粘贴命令可以正常工作。我决定在上下文菜单中使用这些命令以提高可用性，因为有些用户习惯于右键单击而不是快捷方式。我使用以下 XAML 代码进行控制：

```
<avalonedit:TextEditor.ContextMenu>
    <ContextMenu>
         <MenuItem Command="Undo" />
         <MenuItem Command="Redo" />
         <Separator/>
         <MenuItem Command="Cut" />
         <MenuItem Command="Copy" />
         <MenuItem Command="Paste" />
     </ContextMenu>
</avalonedit:TextEditor.ContextMenu> 
```

但是当我运行程序时，这些命令总是在上下文菜单中显示为禁用，如下所示：

![上下文菜单的屏幕截图](../Images/544efa327a425735acfdeb990c700faf.png)

当我第一次遇到这个问题时，我发布了一个不同的问题，但在[MD.Unicorn](https://stackoverflow.com/users/1174942/mohammad-dehghan)的帮助下（正如您在下面的评论中看到的那样），我意识到当您将 AvalonEdit 放在 ListBox 的 ItemTemplate 或 ListView 命令中时不起作用。

在 MD.unicorn 的帮助下，我创建了以下测试代码来重现结果：

**ViewModel 类和一个简单的数据模板类**

```
public class MyViewModel : INotifyPropertyChanged
{
    public MyViewModel()
    {
        collection = new ObservableCollection<myClass>();
        mc = new myClass();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propName)
    {
        var h = PropertyChanged;
        if (h != null)
            h(this, new PropertyChangedEventArgs(propName));
    }

    public ObservableCollection<myClass> collection { get; set; }
    public myClass mc { get; set; }
}

public class myClass
{
    public string text { get; set; }
}

public partial class MainWindow : Window
{
    MyViewModel _viewModel = new MyViewModel();

    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = _viewModel;
    }
 } 
```

和**MainWindow 的 XAML 代码**

```
<Window.Resources>
    <DataTemplate DataType="{x:Type local:myClass}">
        <StackPanel>
        <avalonedit:TextEditor x:Name="xmlMessage" 
        SyntaxHighlighting="XML" ShowLineNumbers="True"  >
            <avalonedit:TextEditor.ContextMenu>
                <ContextMenu>
                    <MenuItem Command="Undo" />
                    <MenuItem Command="Redo" />
                    <Separator/>
                    <MenuItem Command="Cut" />
                    <MenuItem Command="Copy" />
                    <MenuItem Command="Paste" />
                </ContextMenu>
            </avalonedit:TextEditor.ContextMenu>
        </avalonedit:TextEditor>
        <TextBox Text="test" />
        </StackPanel>
    </DataTemplate>
</Window.Resources>
<DockPanel>
    <ListView ItemsSource="{Binding collection}" />
    <ContentControl Content="{Binding mc}" />
</DockPanel> 
```

如果您尝试此测试，您会看到如果在内容控件上使用 DataTemplate，则它在上下文菜单中的命令绑定工作正常，但在 ListViewItem 中它们被禁用。另请注意，DataTemplate 中的上下文菜单适用于 TextBox，并表明 ListView 本身不会破坏命令链。

如何修复上下文菜单并连接到 listView 项中的控制命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T18:30:10.070

这就是我过去解决类似问题的方法 - 我希望它对人们有用（这种一般逻辑可以应用于广泛的 Avalon 编辑器相关问题）......

实际发生的情况可能是 Avalon 的错误（结合`ListItem`等）。它弄乱了鼠标处理，我猜测焦点（应该在`TextArea`for 命令和`CanExecute`工作上。

> 这`mouse handling`就是问题所在 - 就好像你只是按下`windows context menu`键它会弹出一个带有启用命令的常规菜单。Avalon 编辑器有一个复杂的鼠标/键处理（很难做一个好的编辑器）——在键盘上它`focus`在 TextArea 上做了一个明确的''。您还可以通过在 实际 `CanCutOrCopy`处理. 对于“键盘”菜单，它首先进入那里，然后弹出。对于“鼠标”，它会弹出 - 然后在退出时检查（进入该方法）。那**都是错的！**`Editing/EditingCommandHandler.cs``ApplicationCommands.Copy``CanExecute`

 **还有勘误表...

您自己的命令没有问题，只需正常公开您的命令，一切都应该工作。

对于`ApplicationCommands`（即`RoutedCommand`）它没有正确连接 - 并且`Execute`，`CanExecute`不要去它应该去的地方，即`TextArea`. 要更正您需要`rewire`将命令放入自己的包装器中 - 并且基本上调用 TextArea 处理 - 这只是几行代码，但这是必要的步骤（我认为没有更“漂亮”的解决方案，没有修复 Avalon 代码——这可能很痛苦，我从来没有想过）。

（全部基于您的示例 - 填写我遗漏的空白）您的 XAML：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type my:myClass}">
        <StackPanel>
            <my:AvalonTextEditor x:Name="xmlMessage" SyntaxHighlighting="XML" ShowLineNumbers="True" EditText="{Binding text}" >
                <my:AvalonTextEditor.ContextMenu>
                    <ContextMenu x:Name="mymenu1">
                        <ContextMenu.Resources>
                            <Style TargetType="MenuItem">
                                <Setter Property="CommandParameter" Value="{Binding Path=., RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"/>
                            </Style>
                        </ContextMenu.Resources>
                        <MenuItem Header="My Copy" Command="{Binding CopyCommand}" />
                        <MenuItem Header="My Paste" Command="{Binding PasteCommand}" />
                        <MenuItem Header="My Cut" Command="{Binding CutCommand}" />
                        <MenuItem Header="My Undo" Command="{Binding UndoCommand}" />
                        <MenuItem Header="My Redo" Command="{Binding RedoCommand}" />
                        <Separator />
                        <MenuItem Command="Undo" />
                        <MenuItem Command="Redo" />
                        <Separator/>
                        <MenuItem Command="Cut" />
                        <MenuItem Command="Copy" />
                        <MenuItem Command="Paste" />
                    </ContextMenu>
                </my:AvalonTextEditor.ContextMenu>
            </my:AvalonTextEditor>
        </StackPanel>
    </DataTemplate>
</Window.Resources>
<StackPanel>
    <DockPanel>
        <ListView ItemsSource="{Binding collection}" />
        <ContentControl Content="{Binding mc}" />
    </DockPanel>
</StackPanel> 
```

背后的代码 - 视图模型：（
注意：我留下了你所说的命名 - 但**请**不要使用小型大写字母作为道具 :)

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public MyViewModel()
    {
        collection = new ObservableCollection<myClass>(new[]
        {
            new myClass{ text = "some more test - some more test - some more test - some more test - some more test - some more test - some more test - some more test - some more test - " },
            new myClass{ text = "test me test me = test me test me = test me test me = test me test me = test me test me = test me test me = " },
            new myClass{ text = "test again - test again - test again - test again - test again - " },
            new myClass{ text = "test again - test again - " },
            new myClass{ text = "test again - " },
            new myClass{ text = "test" },
        });
        mc = new myClass();
    }
    public ObservableCollection<myClass> collection { get; set; }
    public myClass mc { get; set; }
}

public class myClass
{
    public string text { get; set; }

    AvalonRelayCommand _copyCommand;
    public AvalonRelayCommand CopyCommand
    { get { return _copyCommand ?? (_copyCommand = new AvalonRelayCommand(ApplicationCommands.Copy) { Text = "My Copy" }); } }

    AvalonRelayCommand _pasteCommand;
    public AvalonRelayCommand PasteCommand
    { get { return _pasteCommand ?? (_pasteCommand = new AvalonRelayCommand(ApplicationCommands.Paste) { Text = "My Paste" }); } }

    AvalonRelayCommand _cutCommand;
    public AvalonRelayCommand CutCommand
    { get { return _cutCommand ?? (_cutCommand = new AvalonRelayCommand(ApplicationCommands.Cut) { Text = "My Cut" }); } }

    AvalonRelayCommand _undoCommand;
    public AvalonRelayCommand UndoCommand
    { get { return _undoCommand ?? (_undoCommand = new AvalonRelayCommand(ApplicationCommands.Undo) { Text = "My Undo" }); } }

    AvalonRelayCommand _redoCommand;
    public AvalonRelayCommand RedoCommand
    { get { return _redoCommand ?? (_redoCommand = new AvalonRelayCommand(ApplicationCommands.Redo) { Text = "My Redo" }); } }
} 
```

（注意：只需连接`Window.DataContext`到视图模型，就像你做的那样）

包装需要两个自定义类。

```
public class AvalonTextEditor : TextEditor
{
    #region EditText Dependency Property

    public static readonly DependencyProperty EditTextProperty =
        DependencyProperty.Register(
        "EditText",
        typeof(string),
        typeof(AvalonTextEditor),
        new UIPropertyMetadata(string.Empty, EditTextPropertyChanged));
    private static void EditTextPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        AvalonTextEditor editor = (AvalonTextEditor)sender;
        editor.Text = (string)e.NewValue;
    }
    public string EditText
    {
        get { return (string)GetValue(EditTextProperty); }
        set { SetValue(EditTextProperty, value); }
    }

    #endregion

    #region TextEditor Property

    public static TextEditor GetTextEditor(ContextMenu menu) { return (TextEditor)menu.GetValue(TextEditorProperty); }
    public static void SetTextEditor(ContextMenu menu, TextEditor value) { menu.SetValue(TextEditorProperty, value); }
    public static readonly DependencyProperty TextEditorProperty =
        DependencyProperty.RegisterAttached("TextEditor", typeof(TextEditor), typeof(AvalonTextEditor), new UIPropertyMetadata(null, OnTextEditorChanged));
    static void OnTextEditorChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        ContextMenu menu = depObj as ContextMenu;
        if (menu == null || e.NewValue is DependencyObject == false)
            return;
        TextEditor editor = (TextEditor)e.NewValue;
        NameScope.SetNameScope(menu, NameScope.GetNameScope(editor));
    }

    #endregion

    public AvalonTextEditor()
    {
        this.Loaded += new RoutedEventHandler(AvalonTextEditor_Loaded);
    }

    void AvalonTextEditor_Loaded(object sender, RoutedEventArgs e)
    {
        this.ContextMenu.SetValue(AvalonTextEditor.TextEditorProperty, this);
    }
}

public class AvalonRelayCommand : ICommand
{
    readonly RoutedCommand _routedCommand;
    public string Text { get; set; }
    public AvalonRelayCommand(RoutedCommand routedCommand) { _routedCommand = routedCommand; }
    public event EventHandler CanExecuteChanged { add { CommandManager.RequerySuggested += value; } remove { CommandManager.RequerySuggested -= value; } }
    public bool CanExecute(object parameter) { return _routedCommand.CanExecute(parameter, GetTextArea(GetEditor(parameter))); }
    public void Execute(object parameter) { _routedCommand.Execute(parameter, GetTextArea(GetEditor(parameter))); }
    private AvalonTextEditor GetEditor(object param)
    {
        var contextMenu = param as ContextMenu;
        if (contextMenu == null) return null;
        var editor = contextMenu.GetValue(AvalonTextEditor.TextEditorProperty) as AvalonTextEditor;
        return editor;
    }
    private static TextArea GetTextArea(AvalonTextEditor editor)
    {
        return editor == null ? null : editor.TextArea;
    }
} 
```

**笔记：**

`EditText`只是一个依赖属性 - 能够`bind`文本（你的`text`） - 这是阿瓦隆的缺点。这里只是为了好玩，但你可能需要它，所以我把它留在了。

用于`AvalonRelayCommand`重新连接应用程序路由命令 - 对于其他内容，请使用您自己的命令实现。这两个类是核心。

您需要使用`AvalonTextEditor`TextEditor 而不是 TextEditor - 它只是一个小包装器 - 来连接`ContextMenu`（`TextEditor`除了其他问题，菜单项`suffering`缺乏`visual tree`- 而且您无法轻松地从中获得任何控件）。我们需要`TextEditor`从`CommandParameter`（设置为 a `ContextMenu`）获取 ref。这可以只使用一些附件属性（不覆盖 TextEditor）来完成，但这样看起来更干净。

在 XAML 方面 - 只需进行一些小的更改 - 使用包装编辑器 - 并且您拥有每个命令的正确参数的`MenuItem`样式`injects`（您可以通过其他方式做到这一点，这更好）。

> 这不是`hack`- 我们只是通过手动调用`TextArea`命令处理来缩短鼠标处理的缺点。差不多就是这样。

享受！**

# iphone - 什么时候最好使用 Storaryboard iPhone？

> ID：14909424
> 
> 赞同：0
> 
> 时间：2013-02-16T10:46:27.253
> 
> 标签：iphone, ios, ipad, storyboard

我想开发一个新的 iPhone 应用程序，我之前开发了一个应用程序并被应用程序商店拒绝，因为我使用的 StoryBoard 在之前的 iOS 4.3 中不起作用，所以我改用 XIB。

现在最低版本是 iOS 4.3，我想知道现在是使用 StoaryBoard 还是在我的新应用中继续使用 XIB 的最佳时机？

希望有人明白我的意思。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:19:26.973

`Storyboards are unavailable on iOS 4.3 and prior`. 故事板仅适用于运行 iOS 5 以上的设备。由于您的`deployment target`（支持的最低操作系统）是 4.3，您必须坚持使用 Xib 文件

# javascript - 使用 ng-repeat 为字符串数组中的每个值创建一个输入

> ID：14909425
> 
> 赞同：0
> 
> 时间：2013-02-16T10:46:38.570
> 
> 标签：javascript, angularjs, bootstrap-typeahead

我的模型中有一个字符串数组，我想为每个字符串创建一个文本输入并将它们绑定到数组，使用 Twitter Bootstrap typeahead 和它们。这是我尝试过的：

```
<div class="control-group inline" ng-repeat="offer in userinfoadd.offers">
    <label class="control-label" for="offer">Offer </label>
    <div class="controls">
            <input type="text" bs-typeahead="typeahead" value="{{offer}}">
    </div>
</div> 
```

这是我的控制器中的代码：

```
 $scope.userinfoadd = {
     offers: ['one','two','three','four','five']
  };

  //get the typeahead
  $http.get('data/activities.json').success(function(data) { //TODO: Stub, replace for an API call!
    $scope.typeahead = data;
  }); 
```

现在输入渲染但它们不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:11:35.223

您需要将模型绑定到输入，如下所示，然后它应该可以工作：

```
<input type="text" bs-typeahead="typeahead" ng-model="userinfoadd.offers[$index]" /> 
```

在这里看一个简单的例子：http: [//jsfiddle.net/flek/hwpuT/](http://jsfiddle.net/flek/hwpuT/)

**更新**

不幸的是，这似乎不是一个优雅的想法，因为一旦您遇到数组条目，Angular 就会重新呈现您的列表，这会在您每次遇到 1 个字符时模糊您的输入。

# mysql - MySql - x列中时间'hhh：mm：ss'的格式错误

> ID：14909430
> 
> 赞同：2
> 
> 时间：2013-02-16T10:47:08.220
> 
> 标签：mysql

在 MySQL 中，我试图获取两个时间戳值之间的差异并将结果存储在时间列中。但有时结果以 'hhh:mm:ss' 格式出现。尝试使用 Result.getTime() 在 Java 中访问该列时，它会抛出错误，提示“**列 x 中时间的格式**错误”。

为了更好地理解，请将以下查询的结果存储在时间列中，并尝试在 Java 中访问该值。

```
SELECT SEC_TO_TIME(ABS(TIMESTAMPDIFF(SECOND,'2013-01-26 19:03:48','2013-02-15 06:59:36'))) as 'RESULT'; 
```

即使它具有'hhh：mm：ss'格式（没有任何错误），我应该怎么做才能获得结果？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:29:09.473

我假设您运行查询并且结果集包含结果

```
String hourMinSec=resultset.getString("RESULT");
String[]result=hourMinSec.split(":");
int hour=Integer.parseInt(result[0]);
int min=Integer.parseInt(result[1]);
int second=Integer.parseInt(result[2]); 
```

我认为将两个日期之间的差异表示为日期是没有意义的。只是为了回答你的问题，如果你想创造时间，你可以使用以下

```
 Time time =new Time(hour, min, second); 
```

但我觉得它毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:14:48.860

您不能将两个日期之间的差异表示为另一个日期。例如，如果您将获得 31 天的差异，您不能说它是 1 个月还是 1 个月零 1 天。

您应该创建自己的对象来存储这些数据。

# ruby-on-rails - 按钮“添加”行为很奇怪

> ID：14909435
> 
> 赞同：0
> 
> 时间：2013-02-16T10:48:03.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3

应用程序有`Add to Cart`按钮，可以创建新的`@line_item`（代码基于 Rails 的敏捷开发）。我添加了一个 Ajax 功能，因此`Add to Cart`不会重新加载页面，并添加了`@line_item to @cart`.

但是 Rails 每次按下按钮都会执行 3 次！

我按“添加到购物车”，它添加了 3 个项目。

另外，当我清空购物车时，它会问我三遍“你确定吗？” 不知道，什么可能导致这些，任何想法？

```
def create
@cart = current_cart
product = Product.find(params[:product_id]) 
@line_item = @cart.add_product(product.id)
respond_to do |format|
if @line_item.save
format.html { redirect_to(store_url) }
format.js
format.xml { render :xml => @line_item,
:status => :created, :location => @line_item }
else
format.html { render :action => "new" }
format.xml { render :xml => @line_item.errors,
:status => :unprocessable_entity }
end
end
end 
```

按钮：

```
<%= button_to 'Add to Cart' , line_items_path(:product_id => product),:remote => true %> 
```

创建.js.erb：

```
$('#cart').html("<%= escape_javascript(render(@cart)) %>"); 
```

_cart.html.erb 模板：

```
<div class="cart_title" >Your Cart</div>
<table>
<%= render(cart.line_items) %>
<tr class="total_line" >
<td colspan="2" >Total</td>
<td class="total_cell" ><%= number_to_currency(cart.total_price) %></td>
</tr>
</table>
<%= button_to 'Empty cart' , cart, :method => :delete,
:confirm => 'Are you sure?' %> 
```

_line_item.html.erb 模板：

```
<tr>
<td><%= line_item.quantity %>&times;</td>
<td><%= line_item.product.title %></td>
<td class="item_price" ><%= number_to_currency(line_item.total_price) %></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:33:44.593

问题解决了。

在我的视图应用程序布局中，我认为这样做是正确的

```
<!DOCTYPE html>
<html>
<head>
  <title>Store</title>
  <%= stylesheet_link_tag "store" %>
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
  <title>Cart</title>
  <%= stylesheet_link_tag "carts" %>
  <%= javascript_include_tag 'cart' %> #this
  <%= csrf_meta_tags %> 
```

实际上，我想一旦您在主页上使用了“应用程序”，#this 就会重复执行 JS 代码

# asp.net-mvc - MVC3 URL路由问题

> ID：14909436
> 
> 赞同：0
> 
> 时间：2013-02-16T10:48:11.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在尝试按如下方式注册路线：

```
routes.MapRoute(
            "SaleReport", // Route name
            "SaleReport/GetDataConsolidated/{type}",
            new { controller = "SaleReport", 
                  action = "GetDataConsolidated",
                  type =   UrlParameter.Optional}); 
```

并在控制器中

```
public ActionResult GetDataConsolidated(string type)

    {
      return Content("Report Type = " + type);
    } 
```

我这样称呼它：localhost:56674/SaleReport/GetDataConsolidated/Sale

但问题是类型的值始终为空。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:54:52.437

这可能只是`.MapRoute(...)`调用顺序。

将您的“SaleReport”`.MapRoute(...)`电话放在“默认”电话之前`{controller}/{action}` `.MapRoute(...)`，因为它更具体。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "SaleReport",
        url: "SaleReport/GetDataConsolidated/{type}",
        defaults: new { controller = "SaleReport", action = "GetDataConsolidated", type = UrlParameter.Optional });

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:54:18.760

是否需要定义另一条地图路线？

它应该与默认路由一起使用，

```
routes.MapRoute(
        "SaleReport", // Route name
        "SaleReport/GetDataConsolidated/{type}",
        new { controller = "SaleReport", 
              action = "GetDataConsolidated",
              type =   UrlParameter.Optional}); 
```

删除上述路线，只需更改如下操作方法

```
public ActionResult GetDataConsolidated(string id)

{
  return Content("Report Type = " + id);
} 
```

这将工作，谢谢。

# javascript - 如何在页面加载时突出显示 JQuery 表的第一行？

> ID：14909438
> 
> 赞同：0
> 
> 时间：2013-02-16T10:48:16.763
> 
> 标签：javascript, jquery, html, syntax-highlighting, highlight

如果单击任何行，我的以下代码可以正常工作：

```
$(document).ready(function() {  
$('#currentloc_table tr').click(function(event) {
    $("#"+$(this).attr('id')+" input:checkbox")[0].checked = !  ($("#"+$(this).attr('id')+" input:checkbox")[0].checked);
    if($("#"+$(this).attr('id')+" input:checkbox")[0].checked == true)
        $(this).addClass('selected');
    else if($("#"+$(this).attr('id')+" input:checkbox")[0].checked == false)
        $(this).removeClass('selected');    
});
}); 
```

这是CSS：

```
.selected td {
background: yellow;
} 
```

在页面加载时我需要的是，该表的第一行应该突出显示。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:55:52.840

尝试这个

```
$(document).ready(function () {
    $('#currentloc_table tr').click(function (event) {
            $("#" + $(this).attr('id') + " input:checkbox")[0].checked = !($("#" + $(this).attr('id') + " input:checkbox")[0].checked);
            if ($("#" + $(this).attr('id') + " input:checkbox")[0].checked == true)
               $(this).addClass('selected');
            else if ($("#" + $(this).attr('id') + " input:checkbox")[0].checked == false)
                $(this).removeClass('selected');
    });
    // Add these lines
    var firstTr = $('#currentloc_table tr:first');
    firstTr.addClass('selected');
    firstTr.find("input:checkbox")[0].checked = true;
}); 
```

工作**[演示](http://jsfiddle.net/pdHyK/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:53:40.710

您可以尝试这种用法`.first()`或`:first()`选择目标：

```
$(document).ready(function() {  
   $('#currentloc_table tr').first().addClass('selected');
   .... 
```

或者：

```
$(document).ready(function() {  
   $('#currentloc_table tr:first').addClass('selected');
   .... 
```

你可以看看这些：

1.  `.eq()`和`:eq()`
2.  `nth-child()`
3.  `:first-child`

[阅读文档](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:59:37.967

似乎您的代码可以稍微改进：

```
$('#currentloc_table tr').click(function (event) {
    var check = $("input:checkbox", this)[0];
    check.checked = !check.checked;
    $(this)[check.checked ? 'addClass' : 'removeClass']('selected');
}); 
```

要选择第一行：

```
$('#currentloc_table tr:first').click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T10:53:25.680

加载后触发函数

```
$('#currentloc_table tr:first-child').trigger('click'); 
```

为此，您应该在绑定 click 事件后添加：

```
 #currentloc_table tr 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T10:54:29.597

试试这个

```
$(document).ready(function(){
     $("#currentloc_table tr:first"):css('background','yellow');
}) 
```

或者尝试

```
$("#currentloc_table tr").eq(0):css('background','yellow'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T12:27:10.163

尝试这个 ，

```
$(document).ready(function() {  
$('#currentloc_table tr').first().addClass('selected_f');
  // rest of your stuff .... 
```

和CSS

```
.selected_f {
     background: yellow;
} 
```

您的 CSS 类作为所选类的默认值，因此它不添加该类，并且无法看到效果

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T11:12:31.790

```
 $(document).ready(function () {
     $('#currentloc_table').find('tr:first').addClass('selected');
});
```

# sql - 空间数据查询

> ID：14909440
> 
> 赞同：2
> 
> 时间：2013-02-16T10:48:24.437
> 
> 标签：sql, postgresql, geospatial, postgis, spatial-query

我有以下查询，它与表进行自连接并输出线之间的所有交点。

```
insert into road_intersection
select nextval('road_intersection_id_seq'), a.road_id, b.road_id, st_intersection(a.road, b.road), st_centroid(st_intersection(a.road, b.road))
from polygon_road a, polygon_road b
where st_intersects(a.road, b.road) AND a.road_id!=b.road_id 
```

但是它会为每个交叉点输出重复值，因为它会计算每条道路的交叉点。例如：

```
70;71;POINT_OF_INTERSECTION

71;70;POINT_OF_INTERSECTION 
```

`70`AND`71`都是`id`两条不同道路的值。如您所见，对于相同的两条道路，交叉点已计算了两次。

有什么建议可以解决这个问题并且只计算一个交点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:19:43.090

尝试类似：

```
select nextval('road_intersection_id_seq'), 
       a.road_id, 
       b.road_id, 
       st_intersection(a.road, b.road), 
       st_centroid(st_intersection(a.road, b.road))
from polygon_road a, polygon_road b
where st_intersects(a.road, b.road) 
  --AND a.road_id!=b.road_id --not needed any more

  AND a.road_id < b.road_id 
```

它将只留下一个十字路口（第一条道路ID较小的十字路口）

# android - 空 EditText 上的 trim() 返回 false android

> ID：14909446
> 
> 赞同：0
> 
> 时间：2013-02-16T10:48:52.237
> 
> 标签：android, android-edittext

我有以下

```
String newWord = (String) addNewWordEdTxt.getText().toString();
Log.d(TAG_WORD, "A:"+ String.valueOf(newWord.trim() == "" ));
Log.d(TAG_WORD, "B:" + String.valueOf( TextUtils.isEmpty(addNewWordEdTxt.getText().toString().trim() ))); 
```

任何人都知道为什么 A 为假而 B 为空的 EditText 为真

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:54:14.860

> 任何人都知道为什么 A 为假而 B 为空的 EditText 为真

因为在**A**案例中，您是在比较参考而不是质量，所以您必须这样做：

```
Log.d(TAG_WORD, "A:"+ String.valueOf(newWord.trim().equals(""))); 
```

**注意：**有一个黄金法则：如果你想比较`Strings`，总是使用`equals()`方法！

这是很好的解释：

*   [`How do I compare strings in Java?`](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:56:29.860

我认为java字符串与任何字符串比较使用.equals（）方法未使用==

这就像

```
String.valueOf(newWord.trim().equals("")); 
```

# matlab - 从文本文件生成一个 libsvm 格式的数据

> ID：14909450
> 
> 赞同：0
> 
> 时间：2013-02-16T10:49:26.050
> 
> 标签：matlab, weka, libsvm

首先，我在数据预处理方面很差。我正在寻找 libsvm 格式的 WebKB 数据。后来在互联网上搜索了很多之后，我发现了这个在词干和停用词删除后获得的数据。格式如下，
每一行代表一个向量，每个文件中的第一个单词包含类名，后跟一些单词列表，形成由空格分隔的特征。
如何将这样的文本文件转换为 lib-svm 格式？是否有任何 Weka 或 Matlab 工具来构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T12:46:47.630

libshorttext1.1 是一个 python 模块，具有为此目的的实用程序，具有许多额外的功能。试试看，或者我认为 scikit learn 包也有这个功能

# python - 使用 python 在 12 x 12 矩阵上使用 numpy.linalg.svd

> ID：14909459
> 
> 赞同：2
> 
> 时间：2013-02-16T10:50:45.587
> 
> 标签：python, numpy, camera, svd

我想在 12*12 矩阵上执行 SVD。`numpy.linalg.svd`作品很好。但是当我尝试通过执行 u*s*v 来取回 12*12 矩阵 A 时，我没有取回它。

```
import cv2

import numpy as np

import scipy as sp

from scipy import linalg, matrix

a_matrix=np.zeros((12,12))

with open('/home/koustav/Documents/ComputerVision/A2/codes/Points0.txt','r') as f:

    for (j,line) in enumerate(f):
         i=2*j
         if(i%2==0):
        values=np.array(map(np.double,line.strip('\n').split(' ')))
        a_matrix[i,4]=-values[2]
        a_matrix[i,5]=-values[3]
        a_matrix[i,6]=-values[4]
        a_matrix[i,7]=-1
        a_matrix[i,8]=values[1]*values[2]
        a_matrix[i,9]=values[1]*values[3]
        a_matrix[i,10]=values[1]*values[4]
        a_matrix[i,11]=values[1]*1

        a_matrix[i+1,0]=values[2]
        a_matrix[i+1,1]=values[3]
        a_matrix[i+1,2]=values[4]
        a_matrix[i+1,3]=1
        a_matrix[i+1,8]=-values[0]*values[2]
        a_matrix[i+1,9]=-values[0]*values[3]
        a_matrix[i+1,10]=-values[0]*values[4]
        a_matrix[i+1,11]=-values[0]*1

s_matrix=np.zeros((12,12))

u, s, v = np.linalg.svd(a_matrix,full_matrices=1)

k=0

while (k<12):

    s_matrix[k,k]=s[k]

    k+=1
print u

print '\n'

print s_matrix

print '\n'

print (u*s_matrix*v) 
```

这些是我使用的要点：

```
285.12 14.91 2.06655 -0.807071 -6.06083

243.92 100.51 2.23268 -0.100774 -5.63975

234.7 176.3 2.40898 0.230613 -5.10977

-126.59 -152.59 -1.72487 4.96296 -10.4564

-173.32 -164.64 -2.51852 4.95202 -10.3569

264.81 28.03 2.07303 -0.554853 -6.05747 
```

请提出一些建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:17:25.057

除了通过使用像这样的内置函数来节省一些代码和时间之外`numpy.diag`，您的问题似乎是`*`操作员。在 numpy 中，您必须`numpy.dot`用于矩阵乘法。请参阅下面的代码以获取工作示例...

```
In [16]: import numpy as np

In [17]: A = np.arange(15).reshape(5,3)

In [18]: A
Out[18]: 
array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14]])

In [19]: u, s, v = np.linalg.svd(A)

In [20]: S = np.diag(s)

In [21]: S = np.vstack([S, np.zeros((2,3)) ])

In [22]: #fill in zeros to get the right shape

In [23]: np.allclose(A, np.dot(u, np.dot(S,v)))
Out[23]: True 
```

`numpy.allclose`检查两个数组在数值上是否接近...

# sencha-touch-2 - 具有复杂 UI 的 Ext.dataview.component.DataItem 后代

> ID：14909461
> 
> 赞同：2
> 
> 时间：2013-02-16T10:51:00.540
> 
> 标签：sencha-touch-2

我正在创建一个自定义 DataItem，它会在点击时引发事件。

[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2)页面上的示例非常好，但我找不到为该项目。该示例具有 hbox 布局并在其中创建控件。我的数据项也有一个 hbox 布局，但在最右边我必须在 vbox 布局中放置三个按钮。我是否必须为 vbox 和其中的按钮创建另一个控件？

我不想捕捉 DOM 事件，我想用 Sencha Touch 的方式来做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:09:59.207

我在 sencha fiddle 中添加了一个演示。它可能会给你一个关于如何进行的想法。这是[链接](http://www.senchafiddle.com/#HWu1K)。

# regex - Pre-routing with querystrings with Express in Node JS

> ID：14909465
> 
> 赞同：8
> 
> 时间：2013-02-16T10:51:34.273
> 
> 标签：regex, node.js, routing, express

I'm trying to use express to parse the querystring in case certain parameters are set and execute a little piece of code, before the actual routing is happening. The use-case is to grab a certain value, that could be set, independant of what link is being used. I use express' functionality to pass the stuff to the next possible rule using next().

So far, I tried - at the very top of all the app.get/post-rule-block:

```
app.get('[?&]something=([^&#]*)', function(req, res, next) {
  var somethingID = req.params.something;
  // Below line is just there to illustrate that it's working. Actual code will do something real, of course.
  console.log("Something: "+somethingID);
  next();
})

app.get('/', site.index); 
```

and also:

```
app.param('something', function(req, res, next) {
  var somethingID = req.params.something;
  console.log("Something: "+somethingID);
  next();
})

app.get('/', site.index); 
```

Example of what should be triggered:

```
URL: www.example.com/?something=10239
URL: www.example.com/superpage/?something=10239
URL: www.example.com/minisite/?anything=10&something=10239 
```

Unfortunately, none of my solutions actually worked, and all that happens is, that the next matching rule is triggered, but the little function above is never executed. Anybody have an idea, of how this can be done?

EDIT: I do understand, that the param-example wasn't working, as I'm not using said parameter within any other routing-rule afterwards, and it would only be triggered then.

I also do understand, that logic implies, that Express ignores the querystring and it is *normally* parsed within a function after the routing already happened. But as mentioned, I need this to be "route-agnostic" and work with any of the URL's that are processed within this application.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-16T11:48:40.567

`express` does not allow you to route based on query strings. You could add some middleware which performs some operation if the relevant parameter is present;

```
app.use(function (req, res, next) {
    if (req.query.something) {
        // Do something; call next() when done.
    } else {
        next();
    }
});

app.get('/someroute', function (req, res, next) {
    // Assume your query params have been processed
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T11:47:46.257

Ok, there is quite a logical flaw in here. Routing only uses the URL, and ignores the querystring.

The (or better "A") solution is actually this:

```
app.get('*', function(req, res, next) {
  if (req.query.something) {
    console.log("Something: "+req.query.something);
  };
  next();
}) 
```

Explanation: As Express is ignoring the querystring for the routing, the only regular expression matching all URL's is "*". Once that is triggered, I can check if said querystring is existing, do my logic and continue the routing matching the next rule by using "next()".

And yes: *facepalm*

# android - 为 Android 应用程序实施单点登录

> ID：14909468
> 
> 赞同：7
> 
> 时间：2013-02-16T10:51:56.980
> 
> 标签：android

我有 4-5 个 Android 应用程序，我想为所有这些应用程序实现单点登录。因此，如果用户已登录其中任何一个应用程序，他将不会被要求再次登录其他应用程序。我怎样才能在Android中完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T11:05:33.853

实施 SSO 需要有一个保存用户凭证信息的通用数据库。一种方法是实现您自己的身份验证服务器，该服务器公开登录、注册、重置和忘记密码 API，您的每个应用程序都将使用这些 API 登录应用程序。

假设您正在使用 JWT 来维护无状态性，这意味着身份验证服务器会在每次通过任何 Android 应用程序成功登录时使用 JWT 进行响应。

因此，您在每个应用程序中的启动器活动不应该是登录，而是仪表板或用户在登录后看到的任何内容。在仪表板的 on_create 中，检查共享首选项中是否存在可用的现有 jwt。如果有，请继续使用仪表板。但如果没有，请转到登录活动并让用户先登录。登录后，将 jwt 保留在共享首选项中，以供其他应用程序使用。您需要确保所有共享首选项都使用相同的命名空间来访问 jwt。

为了使其更有效，您可以实现一个用于登录、注册和忘记密码的库模块，以包含在每个应用程序中，您将为所有应用程序准备好该部分。三个活动的 XML 文件可以包含在 lib 本身中，如果在应用程序可绘制对象中找不到它，应用程序将从 lib 文件中加载它们。

现在来到服务器部分，实现您的自定义身份验证服务器，例如使用 OAuth2 是一种方法，但为了使其更容易，有像 Stormpath 或 CAS 这样的 3rd 方解决方案可以提供这样的服务。也许你也可以找到一个免费的。

除了 JWT，您可以使用 userId（用户数据库中的主键）来识别用户是否已登录。

要考虑的另一点是，这些应用程序中的每一个的应用程序服务器（如果有的话）是否使用 JWT 或 userId 来响应应用程序请求，并且应该根据该身份验证服务器通信令牌来决定。不用说，应用服务器和认证服务器也应该在它们之间进行通信，以同步应用程序的用户信息。即使您使用的是第 3 方身份验证服务器，该服务器将与保存整个用户信息的单个数据库通信，但您可能需要将应用程序服务器与第 3 方身份验证服务器同步

但是，棘手的部分是注销并重置密码和更改密码。我不是在谈论使用 JWT 时的注销过程，它有自己的挑战要解决，但我是在谈论使用 SSO 时的注销。如果用户从其中一个应用程序中注销，您需要决定用户是否必须从其余应用程序中注销。虽然两者都可以处理，但通常它会是一个单一的注销，以便于实施，它也会提供一个很好的用户体验。

此外，如果这些应用程序中的任何一个具有网站版本并且用户从网站更改或重置密码，则您需要确保用户在更改后首次使用该应用程序时再次在设备上登录。然而，这个逻辑必须完全在身份验证服务器内的服务器端进行管理。

尽管您的问题仅与 android 应用程序有关，但您可能必须为此实现一个服务器并为每个应用程序修改 appl 服务器。这可能不是您的问题本质，但您的实际要求可能会帮助我帮助您实现这一点。

# angularjs - AngularJS 中的“命名空间”服务

> ID：14909474
> 
> 赞同：38
> 
> 时间：2013-02-16T10:53:01.117
> 
> 标签：angularjs

AngularJS 如何处理服务名称之间的冲突？例如，如果我声明了两个模块，每个模块都包含一个名为“foo”的服务。如果我想创建一个可重用的模块或想避免与其他第三方模块发生冲突，那么“命名空间”服务的好方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-16T11:00:06.520

**到今天为止，AngularJS 不处理服务的命名空间冲突，**所以如果你有 2 个不同的模块，服务的命名方式相同，并且你在应用程序中包含这两个模块，那么只有一个服务可用。

目前最好的选择是使用自定义前缀为服务名称添加前缀，例如：

`angular.module('myprefix_mymodule',['dep1', 'dep2']).factory('myprefix_MyService', ...)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-23T17:54:26.360

正如 pkozlowski 所指出的，他们没有。您可以手动为所有服务添加前缀（这有点烦人），或者，我编写了一个 hack 来为您命名它。 [https://github.com/callmehiphop/angular-namespacer](https://github.com/callmehiphop/angular-namespacer)

# css - 在 Internet Explorer 中显示左侧和底部的边框如何删除该边框？

> ID：14909483
> 
> 赞同：0
> 
> 时间：2013-02-16T10:53:54.767
> 
> 标签：css, html

```
body {
    background:#f2f3f4 url(images/ringbackbg.jpg) repeat-x;
    font-size:14px;
    color:#fff;
    font-family: MyCustomFont, Verdana, Arial, sans-serif;
    margin:0;
    background-position:center 0;
    outline: none;
} 
```

在 Internet Explorer 中显示左侧和底部边框如何删除该边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:56:24.423

尝试添加：

```
padding: 0;
width: 100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:05:16.720

盒子模型由宽度/高度、内边距、边框、边距、轮廓组成。

`Width`/`height`指定显示内容的框的大小。

内边距决定了内容和边框之间的距离——背景颜色/图像也出现在内边距上。

`Border`s 围绕宽度/高度+填充，可以设置不同的样式。它们也有一些特殊性：

*   它们可以单独设置样式（上/右/下/左），包括图像；
*   当用单独的样式声明大边框时，您会注意到它们的角对角线相交；
*   边框可以有圆角；

`Margin`s 环绕宽度/高度+填充+边框并且不能设置样式 - 它们只能用作元素周围的间距。

`Outline`s 围绕宽度/高度+填充+边框+边距，它们可以使用自己的一些特殊性进行样式设置。

因此使用类似的东西：

```
body {
    width: 100%;
    height: 100%;
    padding: 0;
    border: 0;
    margin: 0;
    outline: none;
} 
```

在任何重置样式表中都很常见。

# sqlite - SQLite：如何选择字符串的一部分？

> ID：14909492
> 
> 赞同：4
> 
> 时间：2013-02-16T10:54:55.553
> 
> 标签：sqlite, position, substring

有包含文件名的表列：image1.jpg，image12.png，script.php，.htaccess，...

我只需要选择文件扩展名。我宁愿这样做：

```
SELECT DISTINCT SUBSTR(column,INSTR('.',column)+1) FROM table 
```

但我的 SQLite 版本不支持 INSTR。

有没有办法在不使用 INSTR 函数的情况下实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-11T11:15:22.807

以下是仅用于选择文件扩展名的查询（经过测试和验证）。您的文件名可以包含任意数量的`.`字符 - 仍然可以工作

> 从表名中选择不同的替换（列名，rtrim（列名，替换（列名，'.'，''）），''）；

`column_name`是您拥有文件名的列的名称（文件名可以有`.`多个

`table_name`是你的桌子的名字

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T11:20:27.737

试试这个`ltrim(X, Y)`功能，这就是[文档](http://www.sqlite.org/lang_corefunc.html)所说的：

> ltrim(X,Y) 函数返回一个字符串，该字符串是通过从 X 的左侧删除 Y 中出现的任何和所有字符而形成的。

列出所有字母作为第二个参数，例如

```
SELECT ltrim(column, "abcd...xyz1234567890") From T 
```

这应该从左边删除所有字符，直到`.`. 如果您需要不带点的扩展名，请使用`SUBSTR`它。当然，这意味着文件名不能包含多个点。

但我认为在执行查询的代码中提取扩展名更容易、更安全。

# ruby-on-rails-3 - 引发异常时，Rails 呈现 html 而不是 json

> ID：14909494
> 
> 赞同：4
> 
> 时间：2013-02-16T10:55:14.593
> 
> 标签：ruby-on-rails-3, json, exception

我希望有人可以帮助解决这个问题。

我有一个正在用 Rails 编写的 Web 服务应用程序。我使用[RocketPants](https://github.com/filtersquad/rocket_pants)提供服务，使用[授权](https://github.com/nathanl/authority)进行授权。

我遇到了异常处理的问题，其中“现在允许的”权威异常 (Authority::SecurityViolation) 呈现为 HTML，而不是 JSON。

我已经在[这个 gist](https://gist.github.com/jasonelston/4721540)和[这个 issue](https://github.com/nathanl/authority/issues/20)中记录了这个故事。

我可以通过在我的 ApiController 中引发异常来复制`raise "blah"`，我得到一个 html 错误页面。我试过在[这个问题](https://stackoverflow.com/questions/11489416/rails-renders-html-when-json-is-requested-when-there-is-an-error)`rescue_from`中使用like ，但结果同样不成功。

我不知道从这里到哪里。任何人都知道导致此问题的 Rails 异常处理堆栈中的任何内容吗？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:48:17.573

你在你的 ApiController 类中试过这个吗？

```
rescue_from StandardError, with: :render_unknown_error

def render_unknown_error(error)
  render(json: error.inspect, status: 500)
end 
```

# css - 删除 CSS 中的图像

> ID：14909496
> 
> 赞同：1
> 
> 时间：2013-02-16T10:55:42.237
> 
> 标签：css, background

我在 style.css 中为 H1 定义了一个背景图像：

```
h1 {
    padding:10px 10px 5px 43px;
    margin: 0px 0px 0px 0px;
    overflow:hidden;
    background:url('../images/marker2.png') 17px 5px no-repeat; 
    color:#7c7960; 
    font-size: 1.40em; 
    line-height:18px; 
    font-weight:bold; 
    text-transform:uppercase;
} 
```

但在某些 H1 标题中，我不希望出现此背景图像？如何在下面的代码中出现异常以使背景图像不显示？

```
<h1 itemprop="name" ><?php echo $products_name; ?></h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:57:35.353

像这样写：

```
h1[itemprop="name"]{
 background-image:none;
} 
```

例如检查这个[http://jsfiddle.net/X2Aef/](http://jsfiddle.net/X2Aef/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:03:51.367

这将起作用。

```
<h1 itemprop="name" style="background-image: none;" ><?php echo $products_name; ?></h1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:01:14.727

尝试这个：

```
<h1 itemprop="name" style="background:none;"><?php echo $products_name; ?></h1> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:44:19.310

这应该工作

```
<h1 itemprop="name" style="background:none !important;"><?php echo $products_name; ?></h1> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T12:18:23.173

您可以添加类`h1.noBg{background:none}`并将其传递给不需要背景的元素。其他选项是使用内联样式元素，例如

```
<h1 itemprop="name" style="background:none;"> 
```

但这不是一个好习惯。使用类来覆盖规则会更好。

# android - android中使用了哪些版本的SQLite？

> ID：14909502
> 
> 赞同：0
> 
> 时间：2013-02-16T10:56:19.833
> 
> 标签：android, sqlite, android-sqlite, android-2.2-froyo, android-4.2-jelly-bean

**我正在为平板电脑和手机** 开发一个 android 应用程序
该应用程序执行一些 DB 操作（在 DB 中保存、删除等）
我的配置详细信息是**最小 sdk 为 8，目标 sdk 为 17**
这里我不知道android 中使用的是什么**sqllite 版本**从**版本 8 到最新版本。**
在我的项目中对数据库兼容性非常有用
所以请提供我从哪里获得这些细节的细节
所以欢迎大家提出他们的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:28:05.453

`SQLite 3.6.22:`

*   API 8 - 2.2 - 弗罗约

`SQLite 3.7.11:`

*   API 17 - 4.2 - 果冻豆

您可以在这里找到完整的文章：

*   [`Version of SQLite used in Android?`](https://stackoverflow.com/questions/2421189/version-of-sqlite-used-in-android)

# iphone - Flash AS3 交互式 iPhone

> ID：14909506
> 
> 赞同：-1
> 
> 时间：2013-02-16T10:56:23.647
> 
> 标签：iphone, actionscript-3, flash, interactive

对于一个大学项目，我正在尝试制作一款半交互式 iphone。不过，我被困在消息传递应用程序上，使用 AS3 有谁知道我如何能够让用户发送消息，然后这条消息出现在发送框中？基本上需要存储消息，然后在发送的消息中再次显示联系人姓名和消息？我认为它与存储变量有关，但不完全确定！

任何帮助将非常感激！！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:17:05.287

您可以使用 xml 来存储它，然后将其取回。要将其写入框中，输入文本或动态文本可以为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:35:15.187

最简单的方法是使用 SharedObjects。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

# android - 如何从表格中获取计数并在android中的textview上设置为文本

> ID：14909510
> 
> 赞同：0
> 
> 时间：2013-02-16T10:56:55.223
> 
> 标签：android, sqlite

嗨，我是 android 新手，从 SQlite 表中获取总行数并将其设置为 textview 的文本。我已经搜索了很多阅读许多相关的帖子，但不幸的是无法成功任何人帮助我plzzz ...

这是我的查询

```
Cursor cur = mDb.rawQuery(" SELECT Count(*) FROM  Tasks ", null);
         int x = cur.getCount();
            cur.close();
            return x; 
```

我的java代码是

```
TextView count = (TextView) findViewById(R.id.txtcount);
       count.setText(String.valueOf(myAdapter.GetTasksCount())); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:34:51.263

SQL 方法（尚未检查） -

```
Cursor cur = mDb.rawQuery(" SELECT Count(*) FROM  Tasks ", null);
int x = 0;
if (cur.moveToFirst())
{
    x = cur.getInt(0);
}
cur.close();
return x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:04:49.713

试试这个：

```
 myAdapter.openToRead();
    int i = myAdapter.GetTasksCount();
    TextView count = (TextView) findViewById(R.id.txtcount);
   count.setText(Integer.toString(i)); 
```

# sql - 如何在 SQL 中实现这种双重联接？

> ID：14909512
> 
> 赞同：1
> 
> 时间：2013-02-16T10:56:58.993
> 
> 标签：sql, join, sqlite, inner-join

我有这个查询，它连接了存储在缓存表中的事件的名称。

```
SELECT OccurrenceCache.occurrence_date, CalendarItem.summary FROM OccurrenceCache
    INNER JOIN CalendarItem ON CalendarItem.ROWID = OccurrenceCache.event_id
    WHERE OccurrenceCache.occurrence_date >= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day')) AND OccurrenceCache.occurrence_end_date <= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day') + 24 * 60 * 60); 
```

现在我也想包含事件的位置数据，这些数据存储在名为*Location*的表中。位置条目由 CalendarItem.location_id 引用（0 表示未指定位置）。我尝试了另一个 JOIN 语句，但它不起作用：

```
SELECT OccurrenceCache.occurrence_date, CalendarItem.summary, Location.title FROM OccurrenceCache
    INNER JOIN CalendarItem ON CalendarItem.ROWID = OccurrenceCache.event_id
    INNER JOIN Location ON Location.ROWID = CalendarItem.location_id
    WHERE OccurrenceCache.occurrence_date >= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day')) AND OccurrenceCache.occurrence_end_date <= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day') + 24 * 60 * 60); 
```

它返回 0 个结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T11:04:01.433

如果表中的所有条目都与`Location`表不匹配`calenderitem`，则使用`LEFT JOIN`代替将是解决方案。

```
SELECT OccurrenceCache.occurrence_date, CalendarItem.summary, Location.title FROM OccurrenceCache
    INNER JOIN CalendarItem ON CalendarItem.ROWID = OccurrenceCache.event_id
    LEFT JOIN Location ON Location.ROWID = CalendarItem.location_id
    WHERE OccurrenceCache.occurrence_date >= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day')) AND OccurrenceCache.occurrence_end_date <= (strftime('%s', 'now', 'localtime', 'start of day') - strftime('%s', '2001-01-01', 'start of day') + 24 * 60 * 60); 
```

[在 SQL 中使用外部联接](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)

# java - 线程优先级会影响同步块访问吗？

> ID：14909515
> 
> 赞同：0
> 
> 时间：2013-02-16T10:57:05.323
> 
> 标签：java, multithreading, synchronized, thread-priority

我有一个 FileScanner 线程，它在列表中添加新文件和多个 FileParser 线程，它们获取新文件并每个解析自己的文件。为了同步，我将添加到列表中并从同步资源块中的列表中读取。问题是有时 FileScanner 线程似乎饿死并且没有进入同步块等待其他 FileParser 线程释放资源（列表）。我的问题是，如果我将最大优先级设置为 FileScanner，将最小优先级设置为其他 FileParser 线程，它会解决问题吗？换句话说，线程优先级是否会影响 JVM 在线程中进行选择以授予对同步块的访问权限？谢谢。

更新：

```
private List<ScannerFile> scannedFiles = Collections.synchronizedList(new LinkedList<ScannerFile>()) ; 
```

这在我的 FileScanner 线程中调用：

```
 synchronized(scannedFiles){
        for(ScannerFile f: newList)
            try{
                scannedFiles.add(f);
            }
            catch(ConcurrentModificationException e){
                logger.error(e);
            }
    } 
```

这在我的 FileParser 线程中调用：

```
synchronized(scannedFiles){
    try{
        for(ScannerFile f: scannedFiles){
            if(parserName.equals(f.getParserName()) && f.isNew() == true){
                listNewFiles.add(f);
            }           
        }
        return listNewFiles;
    }
    catch(ConcurrentModificationException e){
        logger.trace(e);
        return new ArrayList<ScannerFile>();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:04:31.320

线程优先级是一个提示或建议，可能会或可能不会产生影响。因此，依赖优先级设置来保证并发程序的正确性是很危险的。

来自“实践中的 Java 并发”（Goetz 等人）：

> 避免使用线程优先级的诱惑，因为它们会增加平台依赖性并可能导致活性问题。[...]

如果你的程序遇到死锁，说明并发逻辑有问题。更改线程优先级将（在不太可能的最佳情况下）掩盖该问题或（在可能的情况下）引入未确定的硬件特定行为。

您的问题的描述看起来像是[ReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)的主要示例。但是如果没有简洁的代码示例，就很难给出合理的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:14:13.040

线程优先级不应建立或中断同步。听起来像是您的阻塞集合中的一个问题，无论如何您都不应该自己实现。看看 java.util.concurrent 中的 LinkendBlockingQueue 和朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T06:56:09.690

存在逻辑错误。这应该可以工作（我没有要重新确认的 IDE）：

```
LinkedBlockingQueue<ScannerFile> newList = new LinkedBlockingQueue<>();
LinkedBlockingQueue<ScannerFile> scannedFiles = new LinkedBlockingQueue<>();
for(;;){

try{
ScannerFile f = newList.get();
scannedFiles.add(f);
}
catch(InterruptedException ex{
Thread.currentThread.interrupt();
//log
break;
}
} 
```

`ThreadParser`会这样：

```
for(;;){
try{
ScannedFile f= scannedFiles.get();
//other logic goes here
}catch(InterruptedException ex{
Thread.currentThread.interrupt();
//log
break;
}
} 
```

# ruby-on-rails - 绘制 Highcharts 时 ruby 代码中的“TypeError”或“预期数字”错误

> ID：14909518
> 
> 赞同：2
> 
> 时间：2013-02-16T10:57:16.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用**Highcharts**显示来自数据库的**嵌入式真实数据。**我的数据的代码如下。

```
............
............
 series: [{
      pointInterval: <%= 3.day * 1000 %>,
      pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
      data: <%= (3.weeks.ago.to_date..Date.today).map { |date| Linkclick.total_clicks(@link,date)}.inspect %>
    }]
.............
........... 
```

问题是它给了我一个在线错误

```
 data: <%= (3.weeks.ago.to_date..Date.today).map { |date| Linkclick.total_clicks(@link,date)}.inspect %> 
```

说...

```
expected numeric

Extracted source (around line #110):

107:     series: [{
108:       pointInterval: <%= 3.day * 1000 %>,
109:       pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
110:       data: <%= (3.weeks.ago.to_date..Date.today).map { |date| Linkclick.total_clicks(@link,date)}.inspect %>
111:     }]
112:   });
113:     }); 
```

正在调用的模型方法如下： -

```
def self.total_clicks(link,date)
    linkclick=Linkclick.where("link=? AND created_at LIKE ?", link, date + "%")
    logger.info "===ssssssssssssssssssssssssssssssssss=================#{linkclick.inspect}"
    logger.info "===sssssssssaaaaaaaaaaaaaaaaaaaaaaaaa=================#{linkclick.class}"
    logger.info "===sssssssssbbbbbbbbbbbbbbbbbbbbbbbbb=================#{linkclick.count.inspect}" 
    return linkclick.count
  end 
```

模型中的 logger.info 准确显示了数据应该如何流动。但由于问题图表未显示。那么，我的代码有什么问题...在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:16:54.570

请尝试`self.total_clicks(link, date)`使用此更改更新您的方法：

```
linkclick = Linkclick.where('link = ? AND DATE(created_at) = ?', link, date) 
```

# php - 将 Æ Ø Å 转换为 AE OE AA

> ID：14909522
> 
> 赞同：1
> 
> 时间：2013-02-16T10:57:39.870
> 
> 标签：php, preg-replace, special-characters, str-replace

我在将`æ`,`ø`和`å`转换为`ae`, `oe`and时遇到问题`aa`。

我正在尝试使用此功能创建一个对 seo 友好的 url，但它只是删除了`æøå`标志。

我的功能是：

```
function seo_friendly_url($string, $cid) {
    //Unwanted:  {UPPERCASE} ; / ? : @ & = + $ , . ! ~ * ' ( )
    $string = strtolower($string);
    //Convert ÆØÅ
    $string = str_replace(chr(230), 'ae', $string); 
    $string = str_replace(chr(248), 'oe', $string); 
    $string = str_replace(chr(229), 'aa', $string); 
    //Strip any unwanted characters
    $string = preg_replace("/[^a-z0-9_\s-]/", "", $string);
    //Clean multiple dashes or whitespaces
    $string = preg_replace("/[\s-]+/", " ", $string);
    //Convert whitespaces and underscore to dash
    $string = preg_replace("/[\s_]/", "-", $string);
    return $string;
} 
```

有没有人对如何解决这个问题有任何想法。我尝试了很多在网上找到的不同的东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:09:58.800

看看这个手​​册页上的评论：http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

也许是这样的：

```
function seo_friendly_url($url) {
    $url = strtolower($url);
    $url=str_replace('æ','ae',$url);
    $url=str_replace('ø','oe',$url);
    $url=str_replace('å','aa',$url);    
    return urlencode($url);
} 
```

会做吗？

# javascript - 在服务器端发布数据并在提交表单时执行 javascript 代码

> ID：14909524
> 
> 赞同：0
> 
> 时间：2013-02-16T10:57:52.677
> 
> 标签：javascript, forms, post

我的目标是将一些图像上传到服务器并为它们提供描述。

单击上传按钮时，这就是我想要发生的事情：

> 1）一个javascript函数动态添加一个表单来获取图像的描述。
> 
> 2) 提交表格时：
> 
> ```
>  a) the description entered in the form must be available $_POST['description'] at server side.
>  b) the images are sent to the server using an XMLHttpRequest 
> ```

在我编写的代码中，描述不可用`$_POST['description']`。当我删除检查`if(!isset($_POST['description']))`时，图像文件已完美上传。这是我的代码：

javascript代码

```
upload.onclick = uploadPrompt;

// dynamically add a form
function uploadPrompt () {
    // fileQueue is an array containing all images that need to be uploaded
    if (fileQueue.length < 1) {
        alert("There are no images available for uploading.");
    } else {
        var inputDescription = document.createElement("input");
        inputDescription.className = "promptInput";
        inputDescription.type = "text";
        inputDescription.name = "description";

        var inputButton = document.createElement("button");
        inputButton.id = "promptInputButton";
        inputButton.type = "submit";
        inputButton.innerHTML = "Start uploading";

        var promptForm = document.createElement("form");
        promptForm.method = "post";
        promptForm.action = "upload.php";
        promptForm.onsubmit = uploadQueue;
        promptForm.id = "promptForm";
        promptForm.appendChild(inputDescription);
        promptForm.appendChild(inputButton);

        document.body.appendChild(promptForm);
    }
}

function uploadQueue(ev) {
    ev.preventDefault();

    elementToBeRemoved = document.getElementById("promptForm");
    elementToBeRemoved.parentElement.removeChild(elementToBeRemoved);

    while (fileQueue.length > 0) {
        var item = fileQueue.pop();
        // item.file is the actual image data
        uploadFile(item.file);
    }
}

function uploadFile (file) {
    if (file) {
        var xhr = new XMLHttpRequest();

        var fd = new FormData();
        fd.append('image',file);

        xhr.upload.addEventListener("error", function (ev) {
            console.log(ev);
        }, false);

        xhr.open("POST", "upload.php");

        xhr.setRequestHeader("Cache-Control", "no-cache");
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
        xhr.setRequestHeader("X-File-Name", file.name);

        xhr.send(fd);
    }
} 
```

php代码上传.php

```
<?php

session_start();

if (!isset($_POST['description'])) {
    echo "upload:fail\n";
    echo "message:No scene was specified";
    exit();
}

if (isset($_FILES['image'])) {
    if(!move_uploaded_file($_FILES['image']['tmp_name'], "uploads/" . $_POST['description'] . "/" . $_FILES['image']['name'])) {
        echo "upload:fail\n";
        }
    else {
        echo "upload:succes\n";
    }
    exit();
}

exit();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:04:44.593

当有大量开发人员已经更好地编写了相同的东西时，我真的建议不要创建自己的异步文件上传功能。查看这些选项：

*   [Blueimp 的 jQuery 文件上传器](https://github.com/blueimp/jQuery-File-Upload)
*   [Uploadifive](http://www.uploadify.com/documentation/uploadifive/implementing-uploadifive/)（Uploadify 的 HTML5 实现）

我以前用过这两个，它们工作得很好。对于 BlueImp，您可以使用此选项发送额外的表单数据：

```
$('#fileupload').fileupload({
   formData: $('.some_form').serialize()
}); 
```

上面捕获了一个表单并序列化了它的输入。或者，您可以使用特定值（即来自 DOM 中的特定元素）填充数组或对象：

```
var array = new Array();
$('.description').each(function() {
   array[this.id] = this.value;
}); 
```

您将使用 ID 来链接您的文件和描述。

# c++ - SDL_HWSURFACE 和 SDL_SWSURFACE 在速度和性能方面有什么区别吗？

> ID：14909528
> 
> 赞同：5
> 
> 时间：2013-02-16T10:58:43.620
> 
> 标签：c++, video, sdl

SDL_HWSURFACE 与 SDL_SWSURFACE 甚至 SDL_FULLSCREEN ？

这里有什么优点和缺点？我认为硬件要快得多。

[http://www.libsdl.org/docs/html/sdlsetvideomode.html](http://www.libsdl.org/docs/html/sdlsetvideomode.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T11:45:27.313

SDL Wiki 说得最好：

SDL_SWSURFACE
SDL 将在系统内存中创建表面。这提高了像素级访问的性能，但是您可能无法利用某些类型的硬件 blitting。

SDL_HWSURFACE
SDL 将尝试在视频内存中创建表面。这将使 SDL 能够利用 Video->Video blits（通常是加速的）。

我的想法：

SDL_HWSURFACE 不会比 SDL_SWSURFACE 快多少，并且可能无论如何都不会启动。如果你想要真正的速度，你应该使用 [SDL 和 openGL](http://lazyfoo.net/SDL_tutorials/lesson36/index.php)。

SDL_FULLSCREEN 对速度没有影响，它只会让 SDL 尝试全屏。

# princexml - 如何增加使用 Prince 程序创建的 PDF 中页面的尺寸？

> ID：14909530
> 
> 赞同：0
> 
> 时间：2013-02-16T10:58:57.420
> 
> 标签：princexml

Prince 使用 CSS 文件来设置它生成的 PDF 的属性。我尝试将命令添加`body {height: 1536; width: 1024}`到收到王子错误的 CSS 文件中：

```
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/15\. drug therapy of depression and anxiety disorders.htm:32: error: Unexpected end tag : table
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/15\. drug therapy of depression and anxiety disorders.htm:33: error: Unexpected end tag : td
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/15\. drug therapy of depression and anxiety disorders.htm:35: error: Unexpected end tag : tr
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/15\. drug therapy of depression and anxiety disorders.htm:36: error: Unexpected end tag : tbody
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/15\. drug therapy of depression and anxiety disorders.htm:36: error: Unexpected end tag : table
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:32: error: Unexpected end tag : table
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:33: error: Unexpected end tag : td
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:35: error: Unexpected end tag : tr
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:36: error: Unexpected end tag : tbody
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:36: error: Unexpected end tag : table
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:380: error: ID popup already defined
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:578: error: error parsing attribute name
prince: /home/brentonhorne/Drugs/CHM/Goodman and gillman_html/ii. neuropharmacology/16\. pharmacotherapy of psychosis and mania.htm:774: error: ID popup already defined 
```

没有这一行，文本不适合 PDF。

![在此处输入图像描述](../Images/9c65fa8baa4e3e7054a9c55056de3046.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:45:39.773

用于`@page { size: A4 }`设置纸张尺寸。如果您需要更大的纸张，请尝试 A3 或 A4 横向。但是，将纸张做得很大会使其难以打印出来。

# javascript - 从父页面调用 iframe 中的 javascript - 搜索框

> ID：14909532
> 
> 赞同：0
> 
> 时间：2013-02-16T10:59:29.430
> 
> 标签：javascript, invoke

我在父页面上有 2 个搜索框，我需要使用它们在 iframe 搜索引擎上进行搜索。所以实际上我在 iframe 中有一个看起来非常糟糕的搜索引擎，因为它在安装脚本中构建 php 很难重新设计。我创建了包含搜索框的 html 标题页，因为人们将在 2 个框中输入文本并推送搜索我需要在 iframe 搜索引擎中获得结果。

# asp.net-mvc - Mvc4 捆绑、缩小和 AngularJS 服务

> ID：14909541
> 
> 赞同：27
> 
> 时间：2013-02-16T11:00:38.937
> 
> 标签：asp.net-mvc, asp.net-mvc-4, angularjs, bundling-and-minification

有没有办法自定义 Asp.Net MVC4 捆绑和缩小功能缩小 js 文件的方式？

意思是，我不想完全关闭缩小，但“按原样”它只会破坏 AngularJs。

由于 AngularJs 使用 DI 和 IoC 方法在控制器中注入服务，因此如下：

```
function MyController($scope) { } 
```

缩小后，变为：

```
function MyController(n) { } 
```

通常这不是问题，但 AngularJs 使用参数名称来了解要注入的服务。所以 $scope 应该保持 $scope 以及角度控制器中的任何其他参数。其他所有内容，如局部变量等，都应该正常缩小。

我找不到任何关于如何配置 Mvc4 缩小的明确文档，而且“全有或全无”似乎相当愚蠢，所以我认为我遗漏了一些东西。

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-16T11:07:04.630

实际上，您可以（并且应该！）编写 AngularJS 代码，因此它是“缩小安全的”。[详细信息在http://docs.angularjs.org/guide/di](http://docs.angularjs.org/guide/di)的“依赖注释”部分中进行了描述，但简而言之，对于全局定义的控制器，您可以编写：

`MyController.$inject = ['$scope'];`

请注意，全局定义的控制器正在污染全局命名空间（有关详细信息，请参阅[此](https://stackoverflow.com/a/13363482/1418796)内容），应避免使用。如果你在模块级别声明一个控制器，你也可以使其缩小安全：

```
angular.module('mymodule', []).controller('MyController', ['$scope', function($scope){
//controller code goes here
}]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:34:20.570

如果您仍想控制要缩小的内容和不缩小的内容（或者如果您想包含插件供应商已经缩小的版本），只需声明两个捆绑包，并且只在您的 BundleConfig.cs 中缩小其中一个：

```
var dontMinify = new Bundle("~/bundles/toNotMinify").Include(
                        "~/Scripts/xxxxx.js");
bundles.Add(dontMinify);

var minify = new Bundle("~/bundles/toNotMinify").Include(
                        "~/Scripts/yyyyyy.js");
minify.Transforms.Add(new JsMinify());
bundles.Add(minify); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T09:53:27.233

对于那些不想/不能编写“缩小安全”的 angular-DI 语法并且不关心变量名被混淆的人，我使用了 BundleTransfomer 和 Yui Js 缩小器 - 可通过核桃：

```
 Install-Package BundleTransformer.Core
 Install-Package BundleTransformer.Yui 
```

对缩小/混淆提供非常细粒度的控制。在 Angular 世界中，只需将 yui web.config 部分中的 obfuscateJavascript 设置为 false。

# jsf - 如何根据条件显示 h:message？

> ID：14909542
> 
> 赞同：1
> 
> 时间：2013-02-16T11:00:47.630
> 
> 标签：jsf, jsf-2, validation, multilingual

我正在制作多语言网站，我在一个字段中使用 Validator。

验证后，我收到响应，`err002, err003`并且基于此错误，我将以消息格式显示相应的错误。所以我的计划如下。

我所拥有的是`<h:message for="password">`

我想做的是如下。

```
if (message is err002) {
    show message of err002 from the properties file.
    #{msg['err002']}
}
if (message is err003) {
    show message of err003 from the properties file.
    #{msg['err003']}
} 
```

知道如何完成这项工作吗？

实际上我想要做的是用两种语言显示错误消息。我拥有的是会话 bean 中的语言代码，但我无法检查验证器中的语言代码。

任何想法/建议如何做到这一点都会很棒。

* * *

## 编辑 1

**面孔-config.xml**

```
<application>
    <locale-config>
        <default-locale>zh_CN</default-locale>
    </locale-config>
    <resource-bundle>
        <base-name>resources.welcome</base-name>
        <var>msg</var>
    </resource-bundle>
</application> 
```

**LanguageBean.java**

```
@ManagedBean(name = "language")
@SessionScoped
public class LanguageBean implements Serializable { 
```

我拥有的属性文件是

****Welcome.properties**和**welcome_zh_CN.properties****

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:28:01.740

您可以在验证器方法中轻松实现它。像这样使用它

```
@FacesValidator("passwordValidator")
public class PasswordValidator implements Validator {

    String err1, err2, err3;

    public PasswordValidator() {
        ResourceBundle bundle = ResourceBundle.getBundle("msg", FacesContext.getCurrentInstance().getViewRoot().getLocale());
        err1 = bundle.getString("err1");
        err2 = bundle.getString("err2");
        err3 = bundle.getString("err3");
    }

    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        String pass = (String) value;
        FacesMessage msg;
        if(/*some condition*/) {
            msg = new FacesMessage(err1);
        } else if(/*other condition*/) {
            msg = new FacesMessage(err2);
        } else {
            msg = new FacesMessage(err3);
        }
        if(msg != null) {
            throw new ValidatorException(msg);
        }
    }    
} 
```

并在视图中使用它

```
<h:inputText id="password" validator="passwordValidator" .../>
<h:message for=password .../> 
```****

# iphone - self.layer renderInContext:context in drawRect 方法在 ipad 中提供了 Bad Access 但在模拟器中没有

> ID：14909543
> 
> 赞同：0
> 
> 时间：2013-02-16T11:00:55.273
> 
> 标签：iphone, ios, objective-c, xcode

我正在一个应用程序中工作，并在其中进行视频录制。现在我要做的是捕获图像然后创建视频代码如下

```
- (void) drawRect:(CGRect)rect {
    NSDate* start = [NSDate date];

    CGContextRef context = [self createBitmapContextOfSize:self.frame.size];
    NSLog(@"context value %@",context);

    [self.layer renderInContext:context];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage* background = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);
    self.currentScreen = background;

    if (_recording) {
        float millisElapsed = [[NSDate date] timeIntervalSinceDate:startedAt] * 1000.0;
        [self writeVideoFrameAtTime:CMTimeMake((int)millisElapsed, 1000)];

    }

      float processingSeconds = [[NSDate date] timeIntervalSinceDate:start];
      delayRemaining = (1.0 / self.frameRate) - processingSeconds;

      [self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil];

} 
```

现在的问题是该方法是递归调用的，当停止录制时，它会给我 Exc_Bad_Access。

它在设备中的模拟器机器人崩溃中运行良好，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:00:28.390

你不应该这样做`drawRect:`，覆盖的唯一原因`drawRect:`是做一些自定义绘图（你不是）。你也不应该`setNeedsDisplay`在后台线程上调用，这是一个只能从主线程调用的 GUI 方法。还取决于您的`createBitmapContextOfSize:`方法和环境，您可能需要释放位图上下文对象。

# variables - 在内核调用之前从 CPU 初始化 GPU 的单个变量

> ID：14909548
> 
> 赞同：2
> 
> 时间：2013-02-16T11:01:43.133
> 
> 标签：variables, cuda, initialization, cpu, gpu

在我的应用程序中，我在 GPU 的内存 ( `bool isBoardReady`) 中有 bool 类型的变量，我需要在`kernel` 调用之前对其进行初始化，然后在内核完成后取回值，所以我的问题是

1.  如何`int, bool , double`从 CPU 初始化 GPU 内存中的单个变量（等）？

2.  内核调用结束后如何获取此变量的值

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T11:32:02.180

函数`cudaMemcpyToSymbol`和`cudaMemcpyFromSymbol`用于从主机访问全局设备变量。以下是如何实现此目的的示例：

```
#include <iostream>
#include <cuda_runtime.h>

__device__ bool isBoardReady;

__global__ void kernel()
{
    isBoardReady = true;
}

int main()
{
    bool isBoardReady_Host = false;

    std::cout<<"Before = "<<isBoardReady_Host<<std::endl;

    cudaMemcpyToSymbol(isBoardReady,&isBoardReady_Host,sizeof(bool),0,cudaMemcpyHostToDevice);

    kernel<<<1,1>>>();

    cudaMemcpyFromSymbol(&isBoardReady_Host,isBoardReady,sizeof(bool),0,cudaMemcpyDeviceToHost);

    std::cout<<"After = "<<isBoardReady_Host<<std::endl;

    return 0;

} 
```

# java - MySQL 聚合函数返回值到 JAVA POJO 类

> ID：14909551
> 
> 赞同：0
> 
> 时间：2013-02-16T11:02:07.817
> 
> 标签：java, mysql, hibernate

我正在使用 MySQL 并想触发类似的查询`select count(*) from table`。然后我想将返回值存储在`JAVA Pojo`.

MySQL 查询返回有符号或无符号整数，但 Java 只支持有符号整数，那么我该如何处理这个错误？

ProjectListModel 类是一个简单的 bean，而不是休眠实体。它更像是：

```
query.setResultTransformer(Transformers.aliasToBean(ProjectListModel.class)); 
```

ProjectListModel 包含一个`public int rowCount`我要存储返回值的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:11:18.207

处理 try catch 块中的值，该块处理`NumberFormatException`，如果它捕获则使用 sth。像[这样](https://stackoverflow.com/questions/3935304/how-to-perform-unsigned-to-signed-conversion-in-java)

# javascript - 使用 Javascript 在 Imacros 中循环

> ID：14909553
> 
> 赞同：4
> 
> 时间：2013-02-16T11:02:27.970
> 
> 标签：javascript, imacros

我如何使用 javascript 循环 imm(imacros) 脚本

我搜索了一下，发现了这个：

```
for (i = 0; i < n; i++)
{
iimPlay(marconame.iim);
} 
```

但是当我使用它时，我的浏览器（Firefox 18）挂起：\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:04:32.203

```
for (i = 0; i < n; i++)
{
iimPlay("macroname.iim");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:25:32.233

也有这个选项。

```
var macro;

macro ="CODE:";
macro +="TAG POS=1 TYPE=DIV ATTR=CLASS:some_class"

var n=10;

for(var i=0;i<n;i++)
{
iimPlay(macro)
} 
```

在上面的代码中 n 没有定义，所以它会返回一个错误。

# actionscript-3 - flv 电影收听者的结尾

> ID：14909555
> 
> 赞同：1
> 
> 时间：2013-02-16T11:02:40.793
> 
> 标签：actionscript-3, flash, flv, flvplayer

我期待有一个事件监听器，它让我有可能在 FLV 电影播放完毕后开始我的动作脚本。

在 AS2 中，我有函数 VideoEvent.COMPLETE，但在 AS3 中不起作用。

我正在使用 Flash Action Player：11.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:35:47.183

检查是否添加了以下语句，

```
 import fl.video.VideoEvent; 
```

如果还是不行，那就检查 Flash 版本（必须在 10 以上）

然而没有解决方案然后尝试跟随，

检查它是否是“事件”而不是“视频事件”，

yourFLVPlayer.addEventListener(Event.COMPLETE, onFLVPplayingCompleted);

```
 function onFLVPlayingCompleted(e:Event):void
 {
      trace("Finished playing FLV");
 } 
```

如果 event.complete 不工作，我只是再试一次。试试下面的代码。检查播放头时间。

```
 yourFLVPlayer.addEventListener(VideoEvent.STATE_CHANGE, flvPlayerStateChanged);     

 function flvPlayerStateChanged(e:VideoEvent):void
 {
      if (yourFLVPlayer.getVideoPlayer(0).state != "playing")
      {     
          trace("Stopped playing FLV"); 

          //You might check for playhead time
          trace(yourFLVPlayer.playheadTime);

          //if playheadtime is equal to total time of flv then you call it as end of FLV

      }
 } 
```

# android - 如何在基于移动或平板浏览器的网页中增加复选框大小？

> ID：14909556
> 
> 赞同：14
> 
> 时间：2013-02-16T11:02:43.180
> 
> 标签：android, css, mobile, user-interface

我为手机/平板电脑设计了一个网页。当我在手机/平板电脑浏览器中打开它时，复选框看起来很小，很难识别它是否被选中。我试过用css。但没有用。

我们如何增加移动/平板电脑浏览器网页的复选框大小？否则有什么解决方案吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-19T00:19:52.563

尝试：

```
<input type="checkbox" style="min-height:80px;min-width:80px;"> 
```

“min-”声明是你的朋友;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-16T11:17:09.580

```
input[type=checkbox] {
  /* All browsers except webkit*/
  transform: scale(2);
  /* Webkit browsers*/
  -webkit-transform: scale(2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T11:37:55.963

```
input[type=checkbox]:checked {
   background: url("data:image/png,%89PNG[...]") no-repeat center center;
   -webkit-background-size: 28px 28px; /* shrink high resolution background */
 } 
```

检查此链接 [http://37signals.com/svn/posts/2609-customizing-web-forms-with-css3-and-webkit](http://37signals.com/svn/posts/2609-customizing-web-forms-with-css3-and-webkit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:14:06.950

或者您可以使用[uniform](http://uniformjs.com/)或[jQuery Mobile](http://jquerymobile.com/)进行尝试。

# asp.net-mvc - 如何在javascript中使用mvc中devexpress gridview的复选框选择获取所有选定的行键值

> ID：14909559
> 
> 赞同：0
> 
> 时间：2013-02-16T11:03:15.640
> 
> 标签：asp.net-mvc, devexpress

我在 mvc 中使用带有复选框的 devexpress gridview。当我在gridview中选择一些带有分页的复选框时，我希望gridview的所有选定复选框键值到控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:35:48.560

使用[How to get all GridView selected keys 中的建议并将它们传递给 Controller](http://www.devexpress.com/Support/Center/Example/Details/E20065)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:49:43.797

可以通过使用简单循环逐一迭代gridview的所有行并检查复选框是否被选中来检索gridview中所有选定复选框的键值。如果是，您可以使用内置函数检索该行的键值（对不起，我不记得函数名称，您需要自己查看）并将检索到的值保存在数组中。然后可以将这些值传递给控制器​​。请记住，每次您选中/取消选中一个框时，您仍然需要再次迭代所有行。希望它能解决你的问题。

# jira - 可以在 jira 中更改或禁用日期验证器

> ID：14909560
> 
> 赞同：1
> 
> 时间：2013-02-16T11:03:31.227
> 
> 标签：jira

我将日历 javascript 更改为 Hijri，但出现了另一个问题。似乎一个类（DueDateValidator.class）尝试验证输入日期，而月份的天数与格鲁吉亚日历不同。例如，我们在一年的第二个月有 31 天，但在格鲁吉亚（二月）是 28 或 29。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:36:04.260

我认为没有开箱即用的选项可以取消 Jira 的日期验证。您可以覆盖 Jira 的日期验证，但我认为使用`Free Text Field`将日期保存为字符串的自定义字段会更容易。然后，添加将隐藏该字段并将其日期复制到该字段的字段 js 代码`date`。

要在搜索问题时保持正确的顺序，您可以使用日期映射来使格鲁吉亚日历保持最新，或者以可排序的方式存储日期（例如`YYYY/MM/DD/HH/MM`- 201302161334）并根据此字段对结果进行排序。

**更新**

Jira 版本 5.2.6 的简单示例，这会将文本从字段 id 复制`customfield_10001`到`created`字段：

```
AJS.$("#create-date").text(AJS.$("#customfield_10001-val").text().trim()) 
```

要轻松搜索，请保留另一个文本字段并将日期保存为以下格式：

```
year month day hour minute 
```

都是数字。例如，今天的公历日期将是：

```
2013 02 267 10 26 
```

比，在搜索问题时，例如查找在今天日期之后创建的问题：

```
custom_filed  > "2013 02 267 10 26" 
```

该排序将起作用，因为它将首先按年，而不是按月，日，小时，分钟对问题进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T13:54:43.643

我通过在 system-customfieldtypes-plugin.xml 文件中创建新的自定义字段来将日期存储在文本字段中，但在搜索中它只接受确切的文本而不是 > 或 <

```
custom_filed  ~ "2013 02 267 10 26" It is acceptable but

custom_filed  > "2013 02 267 10 26" shows jQL error. 
```

# jquery - 是否有任何适用于 isotope.js 的 jQuery 自定义滚动条？

> ID：14909564
> 
> 赞同：0
> 
> 时间：2013-02-16T11:04:01.633
> 
> 标签：jquery, scrollbar, jquery-isotope

我想在同位素中实现自定义滚动条，我使用了 slickcustomscrollbar 插件，但是用同位素实现时存在问题。

是否有任何适用于同位素的自定义滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:36:45.443

将您的同位素容器包装到一个具有固定高度的新 div 中，这应该可以与任何滚动插件一起使用。为创建的包装器初始化滚动条。

# mysql - 如何在 Django 和 MySQL 之间使用压缩连接？

> ID：14909565
> 
> 赞同：1
> 
> 时间：2013-02-16T11:04:11.023
> 
> 标签：mysql, django, compression, database-connection

我在我的 MySQL 服务器上进行了压缩，我想确保 Django 正在建立压缩连接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T11:30:08.327

试验、错误和推理表明解决方案是在字典中使用`compress`设置为的字段：`True``OPTIONS`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        ...
        'OPTIONS': {
            'compress': True
        }        
    }
} 
```

我无法确认连接实际上是压缩的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:49:30.807

`/django/db/backends/mysql/base.py`对 Django 1.3的粗略（无双关语）检查：

```
298     def _cursor(self):                                                          
299         if not self._valid_connection():                                        
300             kwargs = {                                                          
301                 'conv': django_conversions,                                     
302                 'charset': 'utf8',                                              
303                 'use_unicode': True,                                            
304             }                                                                   
305             settings_dict = self.settings_dict                                  
306             if settings_dict['USER']:                                           
307                 kwargs['user'] = settings_dict['USER']                          
308             if settings_dict['NAME']:                                           
309                 kwargs['db'] = settings_dict['NAME']                            
310             if settings_dict['PASSWORD']:                                       
311                 kwargs['passwd'] = settings_dict['PASSWORD']                    
312             if settings_dict['HOST'].startswith('/'):                           
313                 kwargs['unix_socket'] = settings_dict['HOST']                   
314             elif settings_dict['HOST']:                                         
315                 kwargs['host'] = settings_dict['HOST']                          
316             if settings_dict['PORT']:                                           
317                 kwargs['port'] = int(settings_dict['PORT'])                     
318             # We need the number of potentially affected rows after an          
319             # "UPDATE", not the number of changed rows.                         
320             kwargs['client_flag'] = CLIENT.FOUND_ROWS                           
321             kwargs.update(settings_dict['OPTIONS'])                             
322             self.connection = Database.connect(**kwargs)                        
323             self.connection.encoders[SafeUnicode] = self.connection.encoders[unicode]
324             self.connection.encoders[SafeString] = self.connection.encoders[str]
325             connection_created.send(sender=self.__class__, connection=self)     
326         cursor = CursorWrapper(self.connection.cursor())                        
327         return cursor 
```

在第 322 行创建连接时，代码似乎没有在 kwargs 中传递[compress](http://mysql-python.sourceforge.net/MySQLdb.html#functions-and-attributes)参数，无论如何默认情况下都没有。

传递应该让您`'compress': True`在`OPTIONS`可用时创建压缩连接，该字典在第 321 行合并到 kwargs。

在后端的其余部分似乎没有对 MySQLdb.connect() 方法的任何其他调用。请注意，MySQLdb 被导入为：`import MySQLdb as Database`在该文件中。

# api - Paymill API：如何更新订阅的信用卡？

> ID：14909570
> 
> 赞同：3
> 
> 时间：2013-02-16T11:04:33.237
> 
> 标签：api, node.js, payment-gateway, payment-processing, paymill

我可以创建订阅，但我不知道如何更新订阅以便它使用新的信用卡。

这是我尝试过的：（假设已经有一个现有的客户、付款和订阅）

1.  在 ui 中创建令牌
2.  在服务器中创建支付对象
3.  像这样更新客户端：

    `paymill.clients.update(clientId, { payment: payment.id }, callback);`

我收到此错误：

```
Error: Identifier,payment
Exception: Api_Exception_InvalidParameter 
```

我需要打哪些电话才能实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:19:26.700

Paymill 已更新 api，您现在可以发出此请求，该请求可用于更新订阅的 cc 详细信息。

首先创建付款，然后使用新的付款 ID 更新订阅。

```
curl -X PUT https://api.paymill.com/v2/subscriptions/<SubscriptionId> -u <ApiKey>: -d payment=<PaymentId> 
```

# mysql - MYSql 加载 URL 的内容 INTO 表

> ID：14909576
> 
> 赞同：1
> 
> 时间：2013-02-16T11:05:03.740
> 
> 标签：mysql

我想知道是否有一种方法可以将来自 url 的返回值插入到表中

就像是

加载数据 ' [http://www.google.com](http://www.google.com) ' INTO TABLE test_table

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:19:05.757

试试这个，它可以帮助您从[http://google.com](http://google.com)网站获取数据

```
 http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D'http://google.com'&format=xml&callback=callback 
```

# cakephp-2.1 - 如何在 cakephp 中为管理控制器创建一个单独的目录

> ID：14909579
> 
> 赞同：1
> 
> 时间：2013-02-16T11:05:32.787
> 
> 标签：cakephp-2.1

我是 cakephp 开发的新手。我已经创建了用户控制器来在用户表中注册、登录和更新自己的个人资料。我可以使用`http://local-host/my_project/user/login`.

我在数据库中还有一个管理表，以便管理员可以登录和管理我的项目中的用户。我想在控制器目录中创建一个单独的文件夹（例如：admin），以便我可以使用`http://local-host/my_project/admin/controller/login`&访问控制器文件`http://local-host/my_project/admin/controller/manage`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:15:21.500

您应该查看手册中的“前缀路由”，这似乎就是您要查找的内容：

[http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)

使用前缀路由，您将能够添加一个操作 admin_overview() 到您的用户控制器，然后可以通过 URL /admin/users/overview 访问该操作。'admin' 前缀操作*不会*与非管理员操作重叠（例如，'overview()'），可以通过 'regular' URL 访问；/用户/概述/

当然，您可以为此创建单独的管理控制器，但您可能需要创建自定义路由。有关路由的更多高级选项，值得您花时间阅读整章（或者，甚至更好）阅读整本蛋糕食谱，它也可以作为电子书供离线阅读； [http://book.cakephp.org/2.0/en/index.html](http://book.cakephp.org/2.0/en/index.html)

另一种解决方案是将应用程序的“管理”部分开发为插件。这将使您的前端和后端控制器/模型/视图分开。作为奖励，后端也可以重新用于其他项目（当然取决于它的设计）

[http://book.cakephp.org/2.0/en/plugins.html#creating-your-own-plugins](http://book.cakephp.org/2.0/en/plugins.html#creating-your-own-plugins)

# css - 单击后如何增加和调整css doc菜单面板图像的大小..？

> ID：14909585
> 
> 赞同：0
> 
> 时间：2013-02-16T11:06:23.097
> 
> 标签：css

我有包含 8 个图像的 css3 停靠菜单面板。如果单击特定图像，我想增加它的大小/更改背景颜色，反之亦然，同时单击另一个图像之前的图像应该重新调整大小或背景颜色删除.. ..我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:39:57.333

试试这个 -[**演示**](http://jsfiddle.net/ShEdE/)

***HTML***

```
<a href="#zoom1"><img id="zoom1" src="http://lorempixel.com/100/100" alt="" /></a>
<a href="#zoom2"><img id="zoom2" src="http://lorempixel.com/100/100" alt="" /></a>
<a href="#zoom3"><img id="zoom3" src="http://lorempixel.com/100/100" alt="" /></a> 
```

***CSS***

```
#zoom1,
#zoom2,
#zoom3 {
    background: #e3e3e3; 
    display: block; 
    float: left;
    padding: 20px;
    margin-right: 5px;
    width: 100px; 
    -webkit-transition: all 1s;
}

#zoom1:target,
#zoom2:target,
#zoom3:target {
    background: #555;
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:20:32.267

可以的话试试js

```
<script>
document.getElementById("wantedelement").attribute_size="newvalue"; 
</script> 
```

[http://www.w3schools.com/js/js_htmldom_css.asp](http://www.w3schools.com/js/js_htmldom_css.asp)

# android - 如何在水平和垂直的直线上或仅在 android surfaceview 中以倾斜的方式移动对象

> ID：14909587
> 
> 赞同：1
> 
> 时间：2013-02-16T11:06:29.310
> 
> 标签：android, canvas, bitmap, surfaceview

我的应用程序中有一个球，它随着触摸而移动。我只是想让它只水平、垂直或倾斜*移动不要移动它曲折*我厌倦了按照代码和它的工作正常。

```
public class MainActivity extends Activity implements OnTouchListener {

Ourview v;
Bitmap ball;
float x,y;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    v = new Ourview(this);
    v.setOnTouchListener(this);
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.circle_green);
    x = y = 0;
    setContentView(v);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    v.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    v.resume();
}

public class Ourview extends SurfaceView implements Runnable{

    Thread t = null;
    SurfaceHolder holder;
    boolean isItOk = false;

    public Ourview(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        holder = getHolder();
    }

    public void run() {
        // TODO Auto-generated method stub
        while (isItOk == true){
            //perfom convas drawing
            if (!holder.getSurface().isValid()){
                continue;
            }
            Canvas c = holder.lockCanvas();
            c.drawARGB(250, 10, 50, 100);
            c.drawBitmap(ball, x - (ball.getWidth()/2), y - (ball.getHeight()/2), null);
            holder.unlockCanvasAndPost(c);
        }

    }

    public void pause(){
        isItOk = false;
        while(true){
            try{
                t.join();
            }catch (InterruptedException e){
                e.printStackTrace();
            }
            break;
        }
        t = null;

    }

    public void resume(){
        isItOk = true;
        t = new Thread(this);
        t.start();

    }

}

public boolean onTouch(View v, MotionEvent me) {
    // TODO Auto-generated method stub

    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    switch(me.getAction()){
    case MotionEvent.ACTION_DOWN:
        x = me.getX();
        y = me.getY();
        break;
    case MotionEvent.ACTION_UP:
        x = me.getX();
        y = me.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        x = me.getX();
        y = me.getY();
        break;
    }

    return true;
}

} 
```

我的球随着触球向任何方向移动。我只是想限制我的球只能在水平或垂直或倾斜方向移动，它不应该以之字形移动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:28:39.537

你可以做一个测试，看看球应该朝哪个方向移动。首先，设定一定的阈值`t`。`t`如果用户在 x 或 y 方向上移动更多，则移动被注册。所以计算`deltaX = x - me.getX()`和`deltaY = y - me.getY()`。

如果只是`deltaX > t`，水平移动球。如果只有`deltaY > t`，请垂直移动球。

如果两者都足够大，将球在 x 和 y 方向移动相同的量。这将使球在对角线上移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T07:05:16.367

在此处添加一些更改：

```
case MotionEvent.ACTION_DOWN:
        xStart = me.getX();
        yStart = me.getY();
        break;
    case MotionEvent.ACTION_UP:
        xEnd = me.getX();
        yEnd = me.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        x = me.getX();
        y = me.getY();
        break; 
```

然后在画布上画一条线：

```
c.drawLine(xStart,yStart,xEnd,YEnd,paint); 
```

**这将从开始触摸到结束触摸**画一条直线希望这会对你有所帮助。

# spring - JSR-303 Bean Validation 序列化结果

> ID：14909589
> 
> 赞同：0
> 
> 时间：2013-02-16T11:06:38.713
> 
> 标签：spring, serialization, rpc, bean-validation

我正在寻找一种获取`JSR-303 Bean Validation`结果服务器端的方法，然后获取带有违规属性映射的序列化表单及其错误消息，并通过 RPC 将其发送给客户端。

我正在使用`Spring`服务器端和`GWT RPC`.

Spring 的使用`BindingResult`不像`ConstraintViolation`. 我希望能够以某种方式序列化这个 BindingResult。

注意：我没有使用`Spring MVC`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:06:41.993

根据规范*ConstraintViolation*不可序列化。事实上，无论如何都很难强制执行它，因为违规包含例如经过验证的对象本身，它可能是可序列化的，也可能不是可序列化的。*ConstraintViolation*的Hibernate Validators 实现是可序列化的，但它仅在所有已验证的对象也是可序列化的情况下才有效。

我个人不会尝试序列化_ConstraintViolation_s。捕获验证异常服务器端并返回一些自定义对象。

# java - 我可以使用字符串作为 ID 吗？

> ID：14909592
> 
> 赞同：1
> 
> 时间：2013-02-16T11:06:49.163
> 
> 标签：java, android

仍然是 Android 开发的菜鸟。所以这是我的代码

```
for(int i=1;i<=6;i++){
    for(int j=startat;j<=7;j++){
        String constring = "r" + i + "c" + j;
        //TextView dtv = (TextView) findViewById(R.id.constring); #commented this out
    }
} 
```

有没有办法可以将字符串变量 constring 用作 Id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:20:54.150

> 有没有办法可以将字符串变量 constring 用作 Id？

我有点困惑想要做什么？！

这个：`TextView dtv = (TextView) findViewById(R.id.constring);`

尤其是`R.id.constring`你不应该，不应该以你的方式去做。每一个`id`都是从资源自动生成的`XML`，你应该尊重它！

此外**R.id.costring**不是`int`自动生成的，因此您的方法将不起作用`R.java`。`String`

从您的代码中可以感受到“意大利面条代码”。

```
<TextView 
   android:id=@+id/constring"
   ... next attributes
/> 
```

如果你写这个，`id`命名为**constring**将自动生成，然后你只需调用`R.id`constring**即可**自动填充。

如果您不想创建`XML`，那么您只需这样做：

```
TextView t = new TextView();
t.setText("Hello World");
setContentView(t); 
```

我建议您阅读一些面向初学者的 Android 教程。在这里你可以开始：

*   [`Android - A beginner's guide`](http://www.codeproject.com/Articles/102065/Android-A-beginner-s-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:11:46.653

您可以使用[getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法从名称中获取资源 id。

# debugging - 如何在 Meteor 应用程序中调试服务器端代码

> ID：14909610
> 
> 赞同：9
> 
> 时间：2013-02-16T11:08:30.823
> 
> 标签：debugging, meteor, remote-debugging

我一直在努力调试我的应用程序中的服务器端代码。对于客户端，chrome 或 firefox 中的浏览器调试器就像一个魅力，但对于服务器来说更复杂

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T11:09:38.410

所以这就是我为流星 0.5.6 管理它的方法

不再需要修补 run.js

安装节点检查器[https://github.com/dannycoates/node-inspector](https://github.com/dannycoates/node-inspector)

创建环境变量`export NODE_OPTIONS='--debug'`

运行`meteor`或`mrt`命令。它应该告诉你调试器监听端口 5858 之类的信息

一旦调试器正在侦听，您可以启动节点检查器并将浏览器指向`Visit http://127.0.0.1:8080/debug?port=5858`

我玩得很开心:-)

对于流星 1.2.x 及更高版本，所有内容都打包在其中。只需运行`meteor debug`并连接到提供的 url

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-29T07:56:16.047

在[这段视频](https://www.youtube.com/watch?v=VrmdbEvoAPg)中，Slava Kim 解释了如何在服务器端调试 Meteor 应用程序。首先你必须安装节点检查器

```
npm install -g node-inspector 
```

然后使用特定变量运行 Meteor 应用程序

```
env NODE_OPTIONS="--debug" meteor 
```

在新的终端选项卡中，通过运行命令打开节点检查器

```
node-inspector 
```

在 Chrome 上从 node-inspector 复制并粘贴 url，您将找到所有服务器端代码来设置断点以进行调试。 **重要提示**：在（无域）文件夹中的项目文件上设置断点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T18:51:35.183

我使用 Node-inspector 和[Loggly](http://loggly.com)来调试我的 Meteor 服务器。

Node-inspector 很棒，但是如果我有测试人员告诉我生产中发生的问题或问题，它并没有告诉我他们到底做了什么或他们所处的硬件/网络条件。但是，日志记录可以告诉您导致问题的步骤和条件，从而使您可以使用更好的信息进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-11T08:12:33.150

从 Meteor 1.1.0.2 开始，`meteor debug`在 Meteor 1.1.0.2 上可以做到这一点。

[在此处](https://stackoverflow.com/a/15021835/435605)查看更多信息。

# google-api - Oracle ADF 应用程序的 Google 身份验证

> ID：14909612
> 
> 赞同：2
> 
> 时间：2013-02-16T11:08:43.117
> 
> 标签：google-api, glassfish-3, oracle-adf, google-openid, google-oauth

我将 Oracle ADF Essentials 与 Glassfish 服务器一起使用。如何授权用户使用他们的谷歌账户。我遇到了[Google OAuth API](https://code.google.com/p/google-api-java-client/wiki/OAuth2)。如何使用 Oracle ADF 使用 Google 的 OAuth2。身份验证后，我还需要访问用户的 youtube 个人资料（比如在他的个人资料下上传视频，让用户上传 youtube 视频），稍后，我需要先进行身份验证；）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:13:44.413

如果您只需要身份验证，请参阅[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

那是在 REST 级别；Google APIs java 库在更高级别上处理此问题：[http ://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

# mysql - Ruby on rails 和 mysql 2 on mac

> ID：14909613
> 
> 赞同：0
> 
> 时间：2013-02-16T11:08:55.670
> 
> 标签：mysql, ruby, ruby-on-rails-3, macos, gem

我在macosx v10.6.8中工作，我有： - ruby​​ v 1.9.3p385 - rails v 3.2.12 - gem 1.8.25 - mysql Ver 14.14 Distrib 5.6.10，使用EditLine包装器的osx10.6（i386）

在尝试 gem builde 安装时，我看到此消息错误：/Users/admin/.rvm/rubies/ruby-1.9.3-p385/bin/gem:4: warning: Insecure world writable dir /usr/local/mysql/ PATH 中的 bin，模式 040777 错误：执行 gem 时 ...（RuntimeError）未知命令构建

我录制了 chmod -R 777 但同样的错误。

当我尝试 gem install mysql2 时，我看到这条消息错误：/Users/admin/.rvm/rubies/ruby-1.9.3-p385/bin/gem:4: warning: Insecure world writable dir /usr/local/mysql PATH 中的 /bin，模式 040777 错误：执行 gem 时...（Errno::EACCES）权限被拒绝 - /Users/admin/.rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/ .gitignore

我用 chmod -R 777 清理了它，但又出现了同样的错误！

我需要帮助，tnx 每个人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:33:03.423

好吧，错误告诉您 777 权限是一个问题，它不应该是世界可写的。我假设您仅将其用于本地测试，请在 755 或 775 权限下尝试。

# graphics - 树莓派 bcm_host 包含目录

> ID：14909615
> 
> 赞同：0
> 
> 时间：2013-02-16T11:09:37.073
> 
> 标签：graphics, raspberry-pi, egl

我正在尝试编写一个使用 EGL 的简单程序，但是当我包含 bcm_host.h 时，gcc 说它不存在，所以我将 /opt/vc/include 添加到 makefile 中，它说缺少另一个标头，我添加了另一个目录，现在，在 6 个文件夹之后，我真的不想再这样做了，但 gcc 想要更多。我查看了 /opt/vc/src/hello_pi/Makefile.include 文件，它只添加了 3 个文件夹。所以问题是：我做错了什么？

这是生成文件：

```
LIB_DIR = -L/opt/vc/lib
INCLUDE_DIRS = -I/opt/vc/include -I/opt/vc/include/interface/vcos/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmc_host/linux -I/opt/vc/include/interface/vmcs_host -I/opt/vc/include/interface/vchi -I/usr/include/SDL -I-

LIBS = -lSDL

bin:
    gcc $(LIB_DIRS) $(INCLUDE_DIRS) $(LIBS)  main.c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T18:40:36.397

我将 bcm_host.h 包含在我使用 dispmax 示例中的代码的项目中。我有非常相似的 makefile 设置，除了我将 -lbcm_host 添加为库：

```
# Include the Broadcom hardware interface library
XINCDIR += /opt/vc/include
XINCDIR += /opt/vc/include/interface/vcos/pthreads
XLIBS += -L/opt/vc/lib/ -lbcm_host 
```

这对我有用，尽管我并没有尝试专门使用 EGL。您可能需要 -lEGL 代替或另外。

# javascript - 添加/删除 单击按钮时要列出的项目 - Twitter Bootstrap

> ID：14909620
> 
> 赞同：0
> 
> 时间：2013-02-16T11:10:26.637
> 
> 标签：javascript, jquery, list, twitter-bootstrap

我目前正在尝试在我的项目中为条件规则创建选项。我正在尝试设置一个智能过滤系统（类似于电子邮件），用户可以在下拉列表中选择不同的选项，并确定如何动态填充文件夹。

我见过许多具有这种条件功能的程序，我想在我的 Twitter Bootstrap 项目中重新创建它，但我无法弄清楚如何让 Add(+) 和 Minus (-) 功能在前端工作。

1.  我想知道是否已经存在具有此类功能的插件？

2.  如果不是，我希望通过 JavaScript / jQuery 实现获得一些帮助。

我已经把基本的 HTML 和 CSS 放在这里，所以你可以看到我想要做什么

**演示**：http: [//jsfiddle.net/y7CwE/1/](http://jsfiddle.net/y7CwE/1/)

注意：默认情况下总是有 1 行（并且第一行没有减号来删除它，只有后续行具有菜单功能）

```
<p>Please Create the following rules for your group</p>
<ul id="conditionRow-1">
<li>
    <select>
        <option>Client</option>
        <option>Resource</option>
        <option>Site</option>
        <option>Options</option>
        <option>Meals</option>
    </select>
</li>
<li>
    <select>
        <option>is</option>
        <option>is not</option>
    </select>
</li>
<li>
    <select>
        <option>X</option>
        <option>y</option>
        <option>Z</option>
        <option>A</option>
        <option>B</option>
    </select>
</li>
<a href="#" data-toggle="tooltip" title="Add Another Rule"><i class="icon-plus"></i></a>
</ul>

<ul id="conditionRow-2">
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<a href="#" data-toggle="tooltip" title="Add Another Rule"><i class="icon-plus"></i></a>
<a href="#" data-toggle="tooltip" title="Remove Rule"><i class="icon-minus"></i></a>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:18:40.313

我建议使用[jQuery 的 load](http://api.jquery.com/load/)方法来加载动态内容，而不是将其全部放在字符串声明中（这是更新的噩梦）：

```
$('.add').on('click', function() {
   var new_id = parseInt($('ul[id*=conditionRow').length) + 1;
   var selector = 'conditionRow-' + new_id;
   $(this).before('<ul id="' + selector + '"></ul>');
   $(selector).load('/path/to/load/script');
});

$('.remove').on('click', function() {
   if (confirm("Are you sure?")) {
      $(this).parents('ul').remove();
   }
}); 
```

在您的加载脚本中，您只需输出一个 HTML 文件：

```
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<li>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
    </select>
</li>
<a href="#" data-toggle="tooltip" title="Add Another Rule"><i class="icon-plus"></i></a>
<a href="#" data-toggle="tooltip" title="Remove Rule"><i class="icon-minus"></i></a> 
```

您还可以在加载调用中传递参数，以使您的 HTML 更具动态性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:29:15.063

`Little amends`链接不应放置在`li`：

```
<p>Please Create the following rules for your group</p>
<ul>
<li>
    <select>
        <option>Client</option>
        <option>Resource</option>
        <option>Site</option>
        <option>Options</option>
        <option>Meals</option>
    </select>
</li>
<li>
    <select>
        <option>is</option>
        <option>is not</option>
    </select>
</li>
<li>
    <select>
        <option>X</option>
        <option>y</option>
        <option>Z</option>
        <option>A</option>
        <option>B</option>
    </select>
</li>
<li> 
    <a href="#" data-toggle="tooltip" title="Add Another Rule"><i class="icon-plus"></i></a>
</li>
</ul> 
```

## jQuery：

```
$(document).ready(function () {
    $("a").tooltip();
    var add = true;
    $(document).on('click', '.icon-plus', function () {
        var $clone = $(this).closest('ul').clone();
        $clone.insertAfter($(this).closest('ul'));
        if(add==true){
            $clone.last('li').append('<a href="#" data-toggle="tooltip" title="remove this"><i class="icon-minus"></i></a>');
            add=false;
        }
    });
    $(document).on('click', '.icon-minus', function () {
       $(this).closest('ul').remove();
    });
}); 
```

## [在这里查看更新的第四小提琴](http://jsfiddle.net/y7CwE/4/)

# asp.net - ASP.NET 上传文件超过 300KB~ 导致浏览器失去连接

> ID：14909626
> 
> 赞同：0
> 
> 时间：2013-02-16T11:11:33.573
> 
> 标签：asp.net, file, upload, web-config, connection

我已经运行我的图片上传网站大约一个月了。我最近没有接触过脚本，现在发生的这个问题以前从未发生过，甚至更大的上传。 **上传大小超过 300 KB 区域的文件时，您的浏览器将失去连接。任何低于此值的内容都会立即上传，您会立即点击上传按钮，您将被重定向到图像页面。**

网址是[http://img.kfirprods.com/Upload.aspx](http://img.kfirprods.com/Upload.aspx)

至于我的 web.config，我尝试了所有这些建议来更改执行时间和 maxRequestLength，但这些建议都没有帮助，无论是适度的大小还是不适度的大小。requestLength 的默认设置约为 4MB，并且在此之前用户-服务器连接丢失了。这是我的 web.config

```
 <configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <httpRuntime requestValidationMode="2.0" />
    <customErrors mode="Off"/>
  <machineKey
    validationKey="EEF33150A048D162D22CB36E1CB9956B148C7A4E6999D0F05B53D416D7A16F83823DD626F501DD3549D3E5DCB473634739D0AD9A07F71560946498C943A7586D"
    decryptionKey="0E95F75864047EB6322EA7D5246F2C1175D77A1B016F293C3BAAD000299A3DC8"
    validation="SHA1"
    decryption="AES" />

  </system.web>

</configuration> 
```

还有其他 httpRuntime 设置，但即使是默认设置，也应该有效 - 不要。**然而，究竟发生了什么是服务器表现得好像它已经关闭了，但它只会取决于超过上传的小尺寸并在一两分钟后返回的用户。请任何甚至有点专家的人 - 尝试上传一些“重”图片，看看你是否认识到问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:43:37.560

ASP.NET FileUploader 的上传限制为 4MB。但是您可以通过在 web.config 中添加以下代码来增加上传文件的长度限制：

```
<configuration>
      <system.web>
        <httpRuntime maxRequestLength="4096" />
      </system.web>
</configuration> 
```

**ADD executiontimeout**也是一个好主意

 **```
<configuration>
      <system.web>
        <httpRuntime maxRequestLength="4096" executiontimeout="700" />
      </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:14:56.297

将以下内容放入您的 web.config 文件中

```
 <configuration>
      <system.web>
        <httpRuntime maxRequestLength="4096" />
      </system.web>
    </configuration> 
```

默认值为 4096 = 4mb。但是，在共享主机上，单个主机可能会配置不同的值，并且它会限制您可以上传的文件大小。

此外，您可以/不能根据主机授予的权限修改这些设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:42:22.960

请将 Server.ScriptTimeout 设置为更长的值，例如

```
 Server.ScriptTimeout=36000 
```

添加

```
<httpRuntime maxRequestLength="9999" /> 
```

在 webconfig 中设置。如果这不起作用，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T15:40:44.733

我会再次询问主机提供商（HostGator）他们是否对此有所了解（第一个客户支持人员似乎根本不知道多少）。如果不行，我还不如放弃，这不是网络上没有足够的图片上传网站。感谢那些试图提供帮助的人！**

# javascript - Parsley.js 在 Safari 中的奇怪行为

> ID：14909629
> 
> 赞同：2
> 
> 时间：2013-02-16T11:11:58.773
> 
> 标签：javascript, safari, mobile-safari, parsley.js

所以我们正在使用 parsley.js。问题是，我认为它不能与 Safari 一起使用跨浏览器。

**第一个错误：** 我有这个`input`，你只能输入数字。它看起来像这样：

```
input#mtlbeitrag.pull-right(data-type="number", name="vb", value="#{calc.vb}", required="required", min="0") 
```

当我现在输入“1000”时，欧芹所做的就是让这个数字也变成“1.000”。显然这是一个问题，因为我们将该数字解析为整数。所以你的算法解析“1.000”，应该是“1000”到“1.0”。

**第二个错误：** Parsley 忽略了`require`标签。不仅弹出消息不起作用，而且仅显示为列表元素。不，它还允许用户提交输入错误的表单。 ![在 Safari 上](../Images/71e68c4f740bab356fc2e797f0b45390.png) ![在 Chrome 上](../Images/847e1fda5f0677400ace57c4634a11de.png)

我的问题是：这些众所周知的错误还是我们刚刚实施的方法是错误的？任何人都可以用 safari 确认这个错误吗？

在 Google Chrome 上，不会发生这些错误。

此外，是否有更好的跨浏览器库可以做到这一点？

PS：当我在 Safari 上做这个[测试时，什么也没有发生。](http://parsleyjs.org/tests/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T02:06:44.973

您是否可能正在使用 HTML5 表单验证并忘记添加`novalidate`到封闭的表单标签？如果`novalidate`未找到，则 HTML5 表单验证将接管并覆盖欧芹所做的任何事情......

我相信后备，所以我包括这个：

```
$("form.js-validate").attr("novalidate","novalidate").parsley();
                       ^ 
```

这样，如果由于某种原因没有加载 JS，HTML5 验证将是后备。（请注意，在这种情况下，您必须`data-validate="parsley"`从表单中删除，或者您只是`$("form.js-validate").attr("novalidate","novalidate")`在加载时使用）

仅供参考：Safari 失败的原因是它的 HTML5 验证“滞后”。

老问题，但也许一些大胡子的互联网旅行者会得到帮助

# image-processing - 需要有关 sift 功能的建议 - 有没有好的功能？

> ID：14909630
> 
> 赞同：0
> 
> 时间：2013-02-16T11:12:14.920
> 
> 标签：image-processing, computer-vision, sift, vlfeat

我正在尝试 vlfeat，从图像数据库中获取大量特征，并且我正在使用基本事实测试平均精度 (MAp)。总的来说，我得到了大约 40%。我看到一些论文得到了更高的 MAp，同时使用了与我非常相似的技术；标准的词袋。

我目前正在寻找为标准词袋技术获得更高 MAp 的答案。虽然我看到还有其他实现，例如 SURF 等等，但让我们在这个问题中坚持标准的 Lowe's SIFT 和标准的词袋。

所以事情是这样的，我看到 vl_sift 得到了阈值，让你对特征选择更加严格。目前，我知道追求更高的阈值可能会使您获得更小、更有意义的“好”功能列表，并可能减少一些嘈杂的功能。**“好”特征意味着，给定具有不同变化的相同图像，在其他图像上也会检测到非常相似的特征**。

但是，我们应该为这个阈值设置多高？有时，我看到图像根本没有返回具有更高阈值的特征。起初，我想继续调整阈值，直到我得到更好的 MAp。但同样，我认为继续调整只是为了找到各自数据库的最佳 MAp 是一个坏主意。所以我的问题是：

1.  虽然调整阈值可能会减少特征数量，但增加阈值是否总是会返回更少但更好的特征？

2.  有没有更好的方法来获得好的特征？

3.  还有哪些其他因素可以提高获得良好特征的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:01:09.220

看看近年来针对 Pascal 挑战而发表的一些论文。他们似乎给我的印象是标准的“特征检测”方法不适用于词袋技术。仔细想想，这是有道理的——BoW 的工作原理是将许多弱的、通常不相关的特征组合在一起。它不是检测特定对象，而是识别对象和场景的类别。因此，过分强调正常的“关键功能”可能弊大于利。

因此，我们看到人们使用*密集网格*甚至随机点作为他们的特征。根据经验，在 Harris 角、LoG、SIFT、MSER 或任何类似方法上使用其中一种方法对性能有很大的积极影响。

直接回答您的问题：

1.  是的。来自[SIFT api](http://www.vlfeat.org/api/sift.html)：

    > 通过消除可能不稳定的关键点来进一步细化关键点，因为它们是在图像边缘附近而不是图像块附近选择的，或者是在低对比度的图像结构上找到的。过滤由以下控制：
    > **峰值阈值。**这是接受关键点的最小对比度。它是通过 vl_sift_set_peak_thresh() 配置 SIFT 过滤器对象来设置的。
    > **边缘阈值。**这是边缘拒绝阈值。它是通过 vl_sift_set_edge_thresh() 配置 SIFT 过滤器对象来设置的。

    [您可以在此处](http://www.vlfeat.org/overview/sift.html)的“检测器参数”部分中查看这两个阈值的示例。

2.  研究表明，从场景中密集选择的特征比使用更“智能”方法（例如：SIFT、Harris、MSER）选择的特征产生更多的描述性“词”。[使用 vl_feat 的DSIFT 或 PHOW](http://www.vlfeat.org/overview/dsift.html)实现尝试您的 Bag of Words 管道。您应该会看到性能有了很大的改进（假设您的“单词”选择和分类步骤调整得很好）。

3.  在一组密集的特征点之后，该领域最大的突破似乎是“空间金字塔”方法。这增加了为图像生成的单词数量，但为特征提供了位置方面——这在 Bag of Words 中固有地缺乏。在那之后，确保你的参数得到了很好的调整（你正在使用哪个特征描述符（SIFT、HOG、SURF 等），你的词汇表中有多少单词，你正在使用什么分类器等等。）然后......你是在活跃的研究领域。享受 =)

# objective-c - 我可以以编程方式打开和关闭 WiFi 并更改网络吗？(Mac SDK)

> ID：14909643
> 
> 赞同：4
> 
> 时间：2013-02-16T11:15:29.363
> 
> 标签：objective-c, xcode, macos, cocoa

如何以编程方式打开和关闭 WiFi 并在 Mac SDK 中更改网络 (WiFi)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T13:20:05.580

[CoreWLAN 框架](http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)似乎符合您的需求。甚至还有一个名为[CoreWLANWirelessManager的示例代码](http://developer.apple.com/library/mac/#samplecode/CoreWLANWirelessManager/Introduction/Intro.html)

> CoreWLANWirelessManager 应用程序利用 CoreWLAN 框架，它是用于 Mac OS X IEEE 802.11 无线接口的 Objective-C 公共 API。它为开发人员提供了如何使用 CoreWLAN API 的示例，并练习了框架提供的功能。此功能包括扫描网络、查询无线接口的静态和动态参数、切换接口功率、更改通道、关联和访问给定接口的相应系统配置首选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:46:59.903

[`networksetup(8)`](https://web.archive.org/web/20150428043154/https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/networksetup.8.html)您可以使用命令更改大多数 WiFi 设置（请参阅`-setairportpower`和`-setairportnetwork`选项）。

至于用于调整 WiFi 设置的编程 API，有[Antoine 提到](https://stackoverflow.com/a/14910764/596219)`CoreWLAN`的框架。

# r - R中三角形区域的双重积分

> ID：14909644
> 
> 赞同：3
> 
> 时间：2013-02-16T11:15:29.410
> 
> 标签：r, geometry, integrate

我对编程很陌生，基本上是通过反复试验来学习的，但是遇到了一个我不知道如何解决的问题。我需要在 R 中的三角形区域上进行双重积分。由于通常的积分函数似乎无法处理这个问题，我尝试使用`cubature package`(*edited - 完整代码见下文)。

**更新/编辑：** 我一直在努力解决这个问题，但仍然遇到同样的问题。我知道我必须确保值在关于 asin 计算的适当范围内。然而，这仍然没有解决三角形区域的根本问题。如果我在下面发布我的完整代码，也许会更清楚：

```
L <- 25
n <- -4
area <- 30
distances <- L*seq(0.005, 100, 0.05)

cond <- area*pi
d <- 5

fun <- function(x=1,r=0)
{
  if (x<cond) {
    return(0)
  } else {
    return((-1)*((n+2)/(2*pi*(L^2)))*(1+((x/L)^2))^(n/2)*(1/pi)*(1/pi)*acos(d/x))*asin(sqrt((pi*area)/d+r))
  }
}
fun(5)
fun(300)

library(cubature)
integrationone <- function()
{
  integrand <- adaptIntegrate(fun, lowerLimit=c(d,0), upperLimit=c(80,80))
  return(integrand$integral)
}
integrationone()
warnings() 
```

通过查看警告消息，R 似乎无法在对 x*进行*积分时执行条件参数的评估，因此我仍然无法仅获得我想要积分的确切区域的值。有没有人有任何想法或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:09:57.837

我不认为后面的代码`adaptIntegrate`会帮助你发生什么。您可以在控制台中输入`adaptIntegrate`，您将获得代码。它本质上是对 C 算法的调用。

1.  为了了解它发生了什么，我认为您需要先了解您集成的内容。尽量简化你的功能，看看他的定义域。

    ```
     INV_PI <- 1/pi
     fun <- function(X){  
        scale <- -1*((n+2)/(2*pi*(L^2)))*INV_PI^2 *acos(d/(d+r))
        res <- scale*asin(sqrt((pi*area)/X))* (1+((X/L)^2))^(n/2)
        sqrt(prod(res))
     } 
    ```

    这里是 X 上的 2 个术语，但只有一个会产生问题。

    ```
    asin(sqrt((pi*area)/X)) 
    ```

`asin`仅在 [-1,1] 之间`sqrt`定义，仅针对正数定义。

所以这里 fun 是定义在 之间`[pi*area,INF]`的，你必须融入这个领域。

例如 ：

```
low.Lim <- pi*area
doubleintegration <- function()  
{  
  integrand <- adaptIntegrate(fun, lowerLimit=c(low.Lim,low.Lim), 
                                   upperLimit=c(200*low.Lim,200*low.Lim))  
  return(integrand$integral)  
}  

doubleintegration()
[1] 0.1331089 
```

# ios - 图层在 x/y 轴而不是 z 轴上旋转

> ID：14909645
> 
> 赞同：3
> 
> 时间：2013-02-16T11:15:47.207
> 
> 标签：ios, rotation, calayer

在创建了一个测试项目以帮助获得~~我最近在 SO~~（已删除）上提出的相关问题的一些答案后，在自定义子类中旋转图层时，我遇到了一个不同但类似的问题`UIView`。

可以在[这里](http://www.youtube.com/watch?v=qzgwBJFKWw8)看到 iPhone 模拟器会话的视频。

该图层看起来像是在 x/y 轴上以对角线旋转，而不是根据需要围绕 z 轴旋转。

执行旋转的代码在一个视图设置方法中，调用`setAngle:`如下：

```
_imageLayer.transform = CATransform3DMakeRotation(angle / 180.0 * M_PI, 0.0, 0.0, 1.0); 
```

（`angle`度数在哪里）。

完整的 Xcode 项目可[在此处](http://dl.dropbox.com/u/18450868/LayerRotate.zip)获得。

最初的 SO 问题仅在更改设备方向后才显示此行为，因此我的理解似乎比我最初想象的要多（来自 OSX 背景，并且多次使用图层，我预计不会出现此类问题）。

所以我的问题是：为什么图层没有按需要围绕 z 轴旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:31:40.710

我正要回答却被你抢先了！无论如何，这就是我*要说*的（它确实解决了你的最后一点）

不可预知行为的主要原因是您在变换的对象上设置了 frame 属性。这是你不能做的 - Apple 警告它^*：在应用转换后，frame 属性将返回未定义的结果。

所以你不应该这样做：

```
 //_imageLayer.frame = layerFrame; 
```

但设置`bounds`和`center`属性（`position`在 CALayers 的情况下）继续按预期工作，因此您可以执行以下操作：

```
 _imageLayer.bounds = (CGRect){0,0,min,min};
   _imageLayer.position = self.center; 
```

* * *

* 请参阅UIView 中 frame 属性的[文档：](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

> *警告：如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:14:14.573

好的，这个问题现在已经解决了。更新的项目在[这里](http://dl.dropbox.com/u/18450868/LayerRotate2.zip)。

学到的问题是：

*   不要从视图控制器的`viewWillLayoutSubviews`. ~~这可能是问题的根本原因。~~ 您不需要在自定义`[ViewController _currentRect]`方法中执行任何计算，只要将自动调整大小掩码设置为将视图拉伸到窗口边界即可。

*   不要`[UIView layoutSubviews]`像旋转图层时所说的那样排列图层（!!），这是低效的。相反，我过去常常`[UIView setBounds:]`布置图层。 `setBounds:`在设备方向更改后调用，但由于某种奇怪的原因，它没有在新创建的视图上调用，所以我重写`[UIView didMoveToSuperview]`为显式调用它（`self.bounds = self.bounds;`）。越来越好奇。

*   我设置了图层`bounds`，`position`而不是`frame`在布置图层时设置图层，~~我认为这是根本原因（在我这样做之后事情开始起作用），但是我看不出这有什么不同，我认为这已经治愈作为第一个要点中提到的错误的副作用~~。 **更新**：正如@He Was 的回答所指出的那样；这**是**根本原因。

我不会将此答案标记为正确，因为我仍然有一种痛苦的感觉，即我的解决方案不是 100%“正确”。

# json - 如何在 JSON 文件中存储一个大布尔列表？

> ID：14909646
> 
> 赞同：2
> 
> 时间：2013-02-16T11:16:09.717
> 
> 标签：json, serialization, boolean

我在内存中使用一个布尔数组来存储这个大小的碰撞图：16*16*14*16 = 57344 个布尔值。我必须将它存储在一个 json 文件中，用于 50 个不同的地图。我一直在寻找将它存储在我的 json 文件中的最佳方法：

*   以base64或其他编码压缩所有json文档
*   尝试以更好的可读方式压缩collisionMap 最重要的部分是什么

在我尝试这样做（但也许我正在重新发明轮子）中，我做了这个例子：

> 000111101111111111100000000001111000
> 
> 0_3_4_1_11_10_4_3
> 
> 第一个以0开头的数字点，下一个数字表示有3个零，嵌套4个1，1个零...

也许有了这个你看不到太多问题，但是 57344 布尔值仍然很大，有很多变化。

但我不知道是否有另一种更好的方法来存储它。

知道是否有好的解决方案吗？

# c# - 'System.Reactive.Concurrency.Scheduler.NewThread' 已过时

> ID：14909648
> 
> 赞同：0
> 
> 时间：2013-02-16T11:16:17.957
> 
> 标签：c#, .net, wpf, entity-framework, system.reactive

我正在尝试使用 Entity-Framework 5.0 Code fast 和 Reactive Extensions (Rx) 从数据库中检索数据。我正在为此编写以下代码。

```
var obs = DataContext.GetDataContext().BreakdownCauses.OrderBy(x => x.Cause).ToObservable(Scheduler.NewThread);
obs.SubscribeOnDispatcher().Subscribe(x => ItemCollection.Add(slow(x))); 

BreakdownCause slow(BreakdownCause cs)
    {
        System.Threading.Thread.Sleep(500);
        return cs;
    } 
```

但它向我显示了这个警告：

```
'System.Reactive.Concurrency.Scheduler.NewThread' is obsolete: 'This property is no longer supported due to refactoring of the API surface and elimination of platform-specific dependencies. Please add a reference to the System.Reactive.PlatformServices assembly for your target platform and use NewThreadScheduler.Default to obtain an instance of this scheduler type. See http://go.microsoft.com/fwlink/?LinkID=260866 for more information.' 
```

在运行时我得到一个异常：

```
The calling thread cannot access this object because a different thread owns it. 
```

请建议我如何在我的 WPF 应用程序中快速正确地在 EF5.0 代码中使用 Reactive Extensions (Rx) 或任何异步调用数据库的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:10:19.823

您需要调用 ObserveOnDispatcher 而不是 SubscribeOnDispatcher。见[这里](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/7bc192cc-6a81-4607-908f-041c1306394f/)。

# language-design - 有没有更高阶条件的语言？

> ID：14909650
> 
> 赞同：1
> 
> 时间：2013-02-16T11:16:35.723
> 
> 标签：language-design, control-structure

有时，我有一个控制结构（if、for、...），并且根据条件我想使用控制结构，或者只执行主体。作为一个简单的例子，我可以在 C 中执行以下操作，但它非常难看：

```
#ifdef APPLY_FILTER
if (filter()) {
#endif
    // do something
#ifdef APPLY_FILTER
}
#endif 
```

如果我只在运行时知道 apply_filter，它也不起作用。当然，在这种情况下，我可以将代码更改为：

```
if (apply_filter && filter()) 
```

但这在任意控制结构的一般情况下不起作用。（我手头没有一个很好的例子，但最近我有一些代码可以从这样的功能中受益匪浅。）

**是否有任何语言可以将条件应用于控制结构，即具有高阶条件？**在伪代码中，上面的示例将是：

```
<if apply_filter>
if (filter()) {
    //  ...
} 
```

或者一个更复杂的例子，如果一个变量被设置在一个函数中包装代码并将它作为一个线程启动：

```
<if (run_on_thread)>
  void thread() {
<endif>

  for (int i = 0; i < 10; i++) {
      printf("%d\n", i);
      sleep(1);
  }

<if (run_on_thread)>
  }
  start_thread(&thread);
<endif> 
```

（实际上，在这个例子中，我可以想象给元条件命名甚至会很有用，以确保 top 和 bottom 同步。）

我可以想象这样的事情是 LISP 中的一个功能，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T03:17:23.033

任何具有一流功能的语言都可以做到这一点。实际上，您对“高阶”的使用是有说服力的；必要的抽象确实是一个高阶函数。这个想法是编写一个函数`applyIf`，它接受一个布尔值（启用/禁用）、一个控制流运算符（实际上只是一个函数）和一个代码块（函数域中的任何值）；然后，如果布尔值为真，则将运算符/函数应用于块/值，否则块/值只是运行/返回。这在代码中会更加清晰。

例如，在 Haskell 中，这种模式在没有显式 的情况下会`applyIf`写成：

```
example1 = (if applyFilter then when someFilter else id) body
example2 = (if runOnThread then (void . forkIO) else id) . forM_ [1..10] $ \i ->
             print i >> threadDelay 1000000 -- threadDelay takes microseconds 
```

这里，`id`只是恒等函数`\x -> x`；它总是返回它的论点。因此，`(if cond then f else id) x`与`f x`if相同`cond == True`，并且与 else 相同`id x`；当然，`id x`是一样的`x`。

然后你可以把这个模式分解到我们的`applyIf`组合器中：

```
applyIf :: Bool -> (a -> a) -> a -> a
applyIf True  f x = f x
applyIf False _ x = x
-- Or, how I'd probably actually write it:
--     applyIf True  = id
--     applyIf False = flip const
-- Note that `flip f a b = f b a` and `const a _ = a`, so
-- `flip const = \_ a -> a` returns its second argument.

example1' = applyIf applyFilter (when someFilter) body
example2' = applyIf runOnThread (void . forkIO) . forM_ [1..10] $ \i ->
              print i >> threadDelay 1000000 
```

然后，当然，如果某些特定用途`applyIf`是您的应用程序中的常见模式，您可以对其进行抽象：

```
-- Runs its argument on a separate thread if the application is configured to
-- run on more than one thread.
possiblyThreaded action = do
  multithreaded <- (> 1) . numberOfThreads <$> getConfig
  applyIf multithreaded (void . forkIO) action

example2'' = possiblyThreaded . forM_ [1..10] $ \i ->
               print i >> threadDelay 1000000 
```

如上所述，Haskell 肯定不是唯一能够表达这种想法的人。例如，这里是 Ruby 的翻译，需要注意的是我的 Ruby 非常生锈，所以这很可能是单调的。（我欢迎有关如何改进它的建议。）

```
def apply_if(use_function, f, &block)
  use_function ? f.call(&block) : yield
end

def example1a
  do_when = lambda { |&block| if some_filter then block.call() end }
  apply_if(apply_filter, do_when) { puts "Hello, world!" }
end

def example2a
  apply_if(run_on_thread, Thread.method(:new)) do
    (1..10).each { |i| puts i; sleep 1 }
  end
end

def possibly_threaded(&block)
  apply_if(app_config.number_of_threads > 1, Thread.method(:new), &block)
end

def example2b
  possibly_threaded do
    (1..10).each { |i| puts i; sleep 1 }
  end
end 
```

要点是一样的——我们将可能做这件事的逻辑包装在它自己的函数中，然后将其应用于相关的代码块。

请注意，此函数实际上比仅处理代码块更通用（正如 Haskell 类型签名所表达的那样）；例如，您还可以编写`abs n = applyIf (n < 0) negate n`实现绝对值函数。关键是要意识到代码块*本身*可以被抽象出来，所以 if 语句和 for 循环之类的东西可以只是函数。我们已经知道如何组合函数了！

此外，上面的所有代码都可以编译和/或运行，但您需要一些导入和定义。对于 Haskell 示例，您将需要 impots

```
import Control.Applicative -- for (<$>)
import Control.Monad       -- for when, void, and forM_
import Control.Concurrent  -- for forkIO and threadDelay 
```

以及`applyFilter`, `someFilter`, `body`, `runOnThread`, `numberOfThreads`, 和的一些虚假定义`getConfig`：

```
applyFilter     = False
someFilter      = False
body            = putStrLn "Hello, world!"
runOnThread     = True
getConfig       = return 4 :: IO Int
numberOfThreads = id 
```

对于 Ruby 示例，您不需要导入和以下类似的虚假定义：

```
def apply_filter;  false; end
def some_filter;   false; end
def run_on_thread; true;  end
class AppConfig
  attr_accessor :number_of_threads
  def initialize(n)
    @number_of_threads = n
  end
end
def app_config; AppConfig.new(4); end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T11:22:34.473

Common Lisp 不会让你重新定义`if`. 但是，您可以在 Lisp 中将自己的控制结构发明为宏并使用它。

# android - Android 加速度计精度

> ID：14909657
> 
> 赞同：0
> 
> 时间：2013-02-16T11:18:00.437
> 
> 标签：android

Android Sensor Listener 正在读取最多 6 或 7 个小数点的浮点加速度计数据。我不需要那种精度。有没有办法读取到 1 或 2 个小数点并减少开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:28:28.720

你可以试试这个...如果该值从不低于小数点第 6 位....它会将值返回到小数点的第 2 位

```
(float)Math.Round(value * 10000) / 10000 
```

# database - 合并 2 个数据库字段

> ID：14909658
> 
> 赞同：1
> 
> 时间：2013-02-16T11:18:17.393
> 
> 标签：database, ip, field

好吧，这是我的问题。

我有 1 个数据库字段 posts_content ，其中包含来自具有这种结构的数百人的帖子：

*   ID
*   创建
*   文本
*   ip

另一个带有 ip 的数据库字段 posts_block 是我想要阻止的方式

*   ID
*   ip

如何从字段 1 创建选择查询以选择没有块的正确帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:30:00.527

```
SELECT *
FROM table1
INNER JOIN table2
ON table1.ip=table2.ip 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:50:44.037

```
select * from posts_content WHERE ip <> (select ip from posts_block); 
```

# mysql - 向 SQL 查询添加额外条件

> ID：14909659
> 
> 赞同：1
> 
> 时间：2013-02-16T11:18:28.580
> 
> 标签：mysql

我正在尝试向我的 SQL 查询添加一个额外的层，如下所示：

```
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.id
      AND day_id = 1 
      AND period_id = 1
    WHERE 
      ts_room.id = ts_roompref.room_id) 
```

我想做的是检查匹配 request.id 的行在名为 ts_allocation 的表中是否不存在。到目前为止，这是我尝试过的，但似乎没有用：

```
SELECT 
  COUNT(*) totalCount 

FROM 
  ts_room 

WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.id
      AND day_id = 1 
      AND period_id = 1
    WHERE 
      ts_room.id = ts_roompref.room_id)

AND NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_allocation
      ON ts_roompref.request_id = ts_allocation.request_id
      AND ts_allocation.status = "Allocated" 
    WHERE 
      ts_room.id = ts_roompref.room_id)
  ) 
```

有任何想法吗？我在这里包含了我的 SQL Fiddle：[http ://sqlfiddle.com/#!2/4540d/2](http://sqlfiddle.com/#!2/4540d/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:29:17.043

我认为问题与别名的使用有关：一旦我将别名添加到查询表中，查询就会运行并返回一些值（[链接到您修改的 sqlfiddle](http://sqlfiddle.com/#!2/4540d/13)）：

```
SELECT COUNT(*) totalCount 
FROM ts_room rm
WHERE 
NOT EXISTS (
    SELECT 1
    FROM ts_roompref rp
    JOIN ts_request rq ON rp.request_id = rq.id AND day_id = 1 AND period_id = 1
    WHERE rm.id = rp.room_id)
AND NOT EXISTS (
    SELECT 1
    FROM ts_roompref rp
    JOIN ts_allocation a ON rp.request_id = a.request_id AND a.status = "Allocated" 
    WHERE  rm.id = rp.room_id) 
```

# r - 条形图不起作用

> ID：14909665
> 
> 赞同：1
> 
> 时间：2013-02-15T21:35:28.257
> 
> 标签：r

```
bars <- list(v=1:10, a=2:11)
barplot(bars, col=c("green", "black")) 
```

我不明白为什么这段代码不起作用，我收到这个错误：

```
Error in -0.01 * height : non-numeric argument to binary operator 
```

**更新：** 我需要一个分组的条形图，每组有 10 个组和两个条形图

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T22:53:57.270

可能你想要这个：

```
bars <- cbind(1:10, 2:11)
barplot(bars, beside = TRUE, col = c("green", "black")) 
```

出现错误是因为`bars`是一个列表，而高度必须是描述条形的向量或值矩阵。

*编辑*：

为了获得 10 组 2 条，您需要转置`bars`矩阵

```
barplot(t(bars), beside = TRUE, col = c("green", "black")) 
```

![在此处输入图像描述](../Images/b581f0df4221f2191c0963a7e02bd05d.png)

# jquery - jQuery Datepicker 标记范围

> ID：14909671
> 
> 赞同：2
> 
> 时间：2013-02-16T11:19:45.993
> 
> 标签：jquery, datepicker

我有两个日期选择器应用于我网站上的 div 以实现日期范围。现在我想突出显示日历中的所有日期，这些日期在所选范围内（例如在它们上应用 css 类）。

我发现了这个： [在 jQuery Datepicker 中选择日期范围并突出显示](https://stackoverflow.com/questions/11918071/select-a-range-of-dates-and-highlight-in-jquery-datepicker)

但是如何在数组中插入所有选定的日期？还是有更好的解决方案？

我该如何管理？我找不到 datepicker 插件的内置解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T14:57:33.443

这是一个旧的，但我需要相同的功能，所以这就是我如何做到的，以防有人需要它。

```
jQuery(document).ready(function(){

jQuery( "#start_date" ).datepicker({
    dateFormat:'yy-mm-dd',
    changeMonth: true,
    numberOfMonths: 3,
    rangeSelect:true,
    beforeShowDay: customRange,
    onClose: function( selectedDate ) {
        jQuery( "#end_date" ).datepicker( "option", "minDate", selectedDate );
    }
});
jQuery( "#end_date" ).datepicker({
    dateFormat:'yy-mm-dd',
    changeMonth: true,
    numberOfMonths: 3,
    rangeSelect:true,
    beforeShowDay: customRange,
    onClose: function( selectedDate ) {
        jQuery( "#start_date" ).datepicker( "option", "maxDate", selectedDate );
    }
});
});
function customRange(date) {
    if(date >= jQuery('#start_date').datepicker('getDate') && date <= jQuery('#end_date').datepicker('getDate')) {
        return [true, 'highlight'];
    } else {
        return [true, ''];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:24:38.527

尝试这个

```
<input type="text" id="from">
<input type="text" id="to">
<script type="text/javascript">
$(function(){
    $("#to").datepicker();
    $("#from").datepicker().bind("change",function(){
        var minValue = $(this).val();
        minValue = $.datepicker.parseDate("mm/dd/yy", minValue);
        minValue.setDate(minValue.getDate()+1);
        $("#to").datepicker( "option", "minDate", minValue );
    })
});
</script> 
```

示例：http: [//jsfiddle.net/dW4n8/2/](http://jsfiddle.net/dW4n8/2/)

```
$("#input-service_date_leave, #input-service_date_return").datepicker({
        rangeSelect: true,
        beforeShow: customRange,
        onSelect: customRange,
    });

function customRange(input) {
    if (input.id == "input-service_date_leave") {

        $("#ui-datepicker-div td").die();

        if (selectedDate != null) {
            $('#input-service_date_return').datepicker('option', 'minDate', selectedDate).datepicker('refresh');
        }
    }
    if (input.id == "input-service_date_return") {

        $("#ui-datepicker-div td").live({
            mouseenter: function() {
                $(this).parent().addClass("finalRow");
                $(".finalRow").prevAll().find("td:not(.ui-datepicker-unselectable)").addClass("highlight");
                $(this).prevAll("td:not(.ui-datepicker-unselectable)").addClass("highlight");
           },
            mouseleave: function() {
                $(this).parent().removeClass("finalRow");
                $("#ui-datepicker-div td").removeClass("highlight");
            }
        });

        var selectedDate = $("#input-service_date_leave").datepicker("getDate");                
        if (selectedDate != null) {
            $('#input-service_date_return').datepicker('option', 'minDate', selectedDate).datepicker('refresh');
        }
    }
} 
```

# c - 如何在c中创建原子部分

> ID：14909672
> 
> 赞同：0
> 
> 时间：2013-02-16T11:19:53.200
> 
> 标签：c, atomic

我需要以原子方式执行部分代码。我试图搜索信息，但没有得到具体的答案。

假设代码是：

```
//ATOMIC
unlock A
lock B
//ATOMIC END 
```

*   是否可以在 c 中使此操作成为原子操作？
*   这取决于我的处理器吗？
*   有没有什么简单的功能可以做到这一点？
*   （这些说明在用户端）

谢谢

# mysql - MySQL：更新一条记录，在重复键上留下 NEWER 一个，并删除 OLDER 一个？看里面

> ID：14909674
> 
> 赞同：0
> 
> 时间：2013-02-16T11:19:58.553
> 
> 标签：mysql, sql-update, on-duplicate-key

这里有张桌子：

```
CREATE TABLE `mytable` (
`user_id` INT(10) UNSIGNED NOT NULL,
`thing_id` VARCHAR(100) NOT NULL DEFAULT '',
`lock_date` DATETIME NOT NULL,
`lock_id` VARCHAR(36) NOT NULL,
PRIMARY KEY (`user_id`,`thing_id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8; 
```

以及那里的一些价值观：

```
INSERT INTO mytable(user_id,thing_id,lock_date,lock_id)
VALUES
(51082,'299ac9ff-2b2b-102d-8ff6-f64c971398c3','2012-03-16 00:39:12','ec7b2008-6ede-11e1-aac2-5924aae99221'),
(108325,'299ac9ff-2b2b-102d-8ff6-f64c971398c3','2013-02-05 19:30:03','7c6de986-6edd-11e1-aac2-5924aae99221'),
(108325,'d90b354d-4b5f-11e0-9959-47117d41cf4b','2012-03-16 00:47:41','1c243032-6ee0-11e1-aac2-5924aae99221'); 
```

我想将 user_id = 108325 的所有记录委托给 user_id = 51082，如果两个用户的 thing_id 字段相同，则只保留较新的字段（lock_date1 > lock_date2），这样我就有以下结果：

```
51082,'299ac9ff-2b2b-102d-8ff6-f64c971398c3','2013-02-05 19:30:03','7c6de986-6edd-11e1-aac2-5924aae99221'
108325,'d90b354d-4b5f-11e0-9959-47117d41cf4b','2012-03-16 00:47:41','1c243032-6ee0-11e1-aac2-5924aae99221' 
```

请注意，51082 现在有一个更新的记录：lock_date = '2013-02-05 19:30:03' 而不是 '2012-03-16 00:39:12'。

**那么，我怎样才能更新一行，并在重复键上留下较新的键（通过某个特定字段）？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:23:32.763

```
INSERT INTO
  mytable(user_id,thing_id,lock_date,lock_id)
VALUES
  (51082,'299ac9ff-2b2b-102d-8ff6-f64c971398c3','2012-03-16 00:39:12','ec7b2008-6ede-11e1-aac2-5924aae99221'),
  (108325,'299ac9ff-2b2b-102d-8ff6-f64c971398c3','2013-02-05 19:30:03','7c6de986-6edd-11e1-aac2-5924aae99221'),
  (108325,'d90b354d-4b5f-11e0-9959-47117d41cf4b','2012-03-16 00:47:41','1c243032-6ee0-11e1-aac2-5924aae99221')
ON DUPLICATE KEY UPDATE SET
  user_id = VALUES(user_id),
  lock_date = VALUES(lock_date),
  lock_id = VALUES(lock_id) 
```

# asp.net - DevExpress：客户端事件上的 ASPxGridView 单元格编辑

> ID：14909677
> 
> 赞同：0
> 
> 时间：2013-02-16T11:20:44.117
> 
> 标签：asp.net, devexpress, aspxgridview

我想使用客户端事件编辑 ASPxGridView 中的特定列。

只是我得到这样的索引值：

```
function onRowclick(s,e)
{
    e.VisibleIndex;
    ...

} 
```

我不确定如何在编辑模式下打开网格列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:35:20.960

这将开始编辑单击的行：

```
<dxwgv:ASPxGridView ID="ASPxGridView1" ...>
    <ClientSideEvents RowClick="function(s, e) {
        s.StartEditRow(e.visibleIndex);
    }" />
... 
```

如果您只想编辑一列，请将其他列设为只读。

文档：
[ASPxClientGridView.RowClick 事件](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_RowClicktopic)
[ASPxClientGridView.StartEditRow 方法](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_StartEditRowtopic)
[GridViewColumn.ReadOnly 属性](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewDataColumn_ReadOnlytopic)

# wpf - wpf 数据网格不可编辑

> ID：14909679
> 
> 赞同：0
> 
> 时间：2013-02-16T11:20:51.013
> 
> 标签：wpf, datagrid

我有一个问题`WpfDataGrid`。我创建了一个控件，这个控件打开一个窗口

```
var wb = new DataEntry(b, Connectionstring);
wb.Show(); 
```

该窗口`DataEntry`包含`TextBox`和`DataGrid`显示为不可编辑的一个。

我读了一篇建议插入的帖子：

`ElementHost.EnableModelessKeyboardInterop(wb);`前`wb.Show();`

我试过了，现在`TextBox`运行良好，但`DataGrid`仍然不可编辑。

谢谢你的支持。

我添加了我使用的代码

```
DataEntry class 

private ObservableCollection<RigaBarcode> _righeBarcode = new ObservableCollection<RigaBarcode>();

//so I create the customer object

  private class RigaBarcode : INotifyPropertyChanged 
        {
            public RigaBarcode(string barcode, string coordinate)
            {
                Barcode = barcode;
                Coordinate = coordinate;

            }

            private string _barcode;
            private string _coordinate; 
```

.... whit setter 和 getter

```
 public event PropertyChangedEventHandler PropertyChanged;

            protected virtual void OnPropertyChanged(string propertyName)
            {
                PropertyChangedEventHandler handler = PropertyChanged;
                if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
            } 
```

我在这个集合中添加和元素

```
_righeBarcode.Add(new RigaBarcode("1", "2"); 
```

在我插入的xml中

```
DataGrid ItemsSource="{Binding .}" Name="Fustelle" Margin="10,23,10,10" Grid.Row="8" Grid.ColumnSpan="2" IsReadOnly="False" AutoGenerateColumns="False">
            DataGrid.Columns>
                    DataGridTextColumn  Header="BarCode" Width="90" Binding="{Binding Barcode}"/>
                    DataGridTextColumn  Header="Posizione" Width="90" Binding="{Binding Coordinate}"/>
                /DataGrid.Columns>
            /DataGrid> 
```

所以我希望在初始化窗口时，datagrid 有 1 行可编辑，但 datagrid 不显示这一行，我无法添加其他行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:56:15.010

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid%28v=VS.100%29.aspx)

> 默认情况下，您可以直接在 DataGrid 中编辑项目。为了保证可以正确提交和取消编辑，DataGrid 中的对象必须实现 IEditableObject 接口。或者，您可以将 IsReadOnly 属性设置为 true 以禁用在 DataGrid 中的编辑。

您没有说明您正在使用哪个版本的框架以及您的数据对象是否实现了[IEditableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)接口。据我所知，这仅在 .Net 4.0 及更高版本中受支持。

# android - ScrollView 中的 Fragment 使黑色背景闪烁

> ID：14909686
> 
> 赞同：7
> 
> 时间：2013-02-16T11:21:17.613
> 
> 标签：android, android-layout, android-fragments, android-scrollview

我在其中一个活动中有一个 LinearLayout 作为主要布局。我使用 Scrollview 来封装 LinearLayout。布局包含一个显示谷歌地图的片段，但在滚动时它给出了黑色背景。我通过在 FrameLayout 中使用透明背景解决了这个问题。黑色背景已经消失，但在滚动过程中，我在地图周围出现闪烁的黑色边缘。如何删除这个？我尝试将 Scrollview 的背景设置为白色，但没有可见的变化。

活动的 XML 是——

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroll"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF"
>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:baselineAligned="false"
android:orientation="vertical"
android:overScrollMode="ifContentScrolls"
android:scrollbarStyle="insideOverlay"
android:scrollbars="vertical"
android:showDividers="none" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:background="#ec4d1d" >

    <TextView
        android:id="@+id/friend_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="7dp"
        android:background="@drawable/near_you_bg"
        android:gravity="center_horizontal|center_vertical"
        android:padding="6dp"

        android:textColor="#FFFFFF"
        android:textSize="15sp"
        android:textStyle="bold"
        android:typeface="sans" />

    <Button
        android:id="@+id/btnInviteFriends"
        android:layout_width="30dp"
        android:layout_height="25dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="7dp"
        android:background="@drawable/menu_bg"
        android:onClick="inviteFriends" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="81dp"
    android:background="@drawable/list_bg"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:shrinkColumns="*"
        android:stretchColumns="*" >

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_marginTop="4dp"
            android:gravity="center_vertical|center_horizontal" >

            <RelativeLayout
                android:layout_width="65dp"
                android:layout_height="70dp" >

                <ImageView
                    android:id="@+id/user_image"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignWithParentIfMissing="false"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:layout_marginTop="7dp"
                    android:src="@drawable/d_bg" />

            </RelativeLayout>

            <RelativeLayout
                android:layout_width="140dp"
                android:layout_height="70dp" >

                <TextView
                    android:id="@+id/name"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="0dp"
                    android:layout_toRightOf="@id/user_image"
                    android:paddingBottom="2dip"
                    android:text="Amrinder"
                    android:textColor="#000000"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/distance"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/name"
                    android:layout_marginTop="2dp"
                    android:layout_toRightOf="@id/user_image"
                    android:text="description"
                    android:textColor="#000000"
                    android:textSize="10sp" >

                </TextView>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/distance"
                    android:layout_marginTop="7dp"
                    android:orientation="horizontal" >

                    <ImageView
                        android:id="@+id/common_icon"
                        android:layout_width="26dp"
                        android:layout_height="19dp"
                        android:background="@drawable/common_icon" />

                    <TextView
                        android:id="@+id/common_number"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="3dp"
                        android:text="4"
                        android:textColor="#000000"
                        android:textStyle="bold" />

                    <ImageView
                        android:id="@+id/friends_icon"
                        android:layout_width="26dp"
                        android:layout_height="19dp"
                        android:layout_marginLeft="7dp"
                        android:background="@drawable/friends_icon" />

                    <TextView
                        android:id="@+id/friends_number"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="3dp"
                        android:text="5"
                        android:textColor="#000000"
                        android:textStyle="bold" />
                </LinearLayout>

                <TextView
                    android:id="@+id/nearUserInfo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:visibility="invisible" >
                </TextView>
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <TextView
                    android:id="@+id/time_ago"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"

                    android:text="10 min ago" 
                    />

                <ImageView
                    android:id="@+id/dir_img"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/time_ago"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="23dp"
                    android:background="@drawable/say_hi_button" />

            </RelativeLayout>
        </TableRow>
    </TableLayout>
</RelativeLayout>

<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp"
>

<ImageView
    android:id="@+id/map_bar"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:layout_centerInParent="false"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/map_box_bg" />

<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="25dp" >

    <TextView
        android:id="@+id/distance_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="1dp"
        android:text="X is 4 km north-east of you now"
        android:textColor="#ffffff"
        android:textStyle="bold" />

</RelativeLayout>
<FrameLayout
    android:id="@+id/frame_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="fill_parent"
    android:layout_height="150dp"
    android:layout_below="@id/map_bar"

    />
<View
        android:id="@+id/trans_img"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/trans" />         
</FrameLayout>

</RelativeLayout>

<RelativeLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp" >

<ImageView
    android:id="@+id/like_bar"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/map_box_bg" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="25dp" >

    <ImageView
        android:id="@+id/like_button"
        android:layout_width="24dp"
        android:layout_height="23dp"

        android:layout_centerVertical="true"
        android:layout_marginLeft="1dp"
        android:background="@drawable/common_detail_icon" />

    <TextView
        android:id="@+id/likes_in_common"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@id/like_button"
        android:gravity="center_vertical"
        android:text=" 3 likes in common"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    </RelativeLayout>

<ImageView
    android:id="@+id/like_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/like_bar"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/list_bg" />

</RelativeLayout>

<RelativeLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp" >

<ImageView
    android:id="@+id/friends_bar"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/map_box_bg" />

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="25dp"
    android:layout_alignParentRight="true" >

    <ImageView
        android:id="@+id/friends_button"
        android:layout_width="24dp"
        android:layout_height="23dp"

        android:layout_centerVertical="true"
        android:layout_marginLeft="1dp"
        android:background="@drawable/common_friends_icon" />

    <TextView
        android:id="@+id/friends_in_common"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@id/friends_button"
        android:gravity="center_vertical"
        android:text=" 9 friends in common"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    </RelativeLayout>

<ImageView
    android:id="@+id/friends_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/friends_bar"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/list_bg" />

</RelativeLayout>

<RelativeLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp" >

<ImageView
    android:id="@+id/friends_bar"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/map_box_bg" />

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="25dp"
    android:layout_alignParentRight="true" >

    <ImageView
        android:id="@+id/friends_button"
        android:layout_width="24dp"
        android:layout_height="23dp"

        android:layout_centerVertical="true"
        android:layout_marginLeft="1dp"
        android:background="@drawable/common_friends_icon" />

    <TextView
        android:id="@+id/friends_in_common"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@id/friends_button"
        android:gravity="center_vertical"
        android:text=" 9 friends in common"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    </RelativeLayout>

<ImageView
    android:id="@+id/friends_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/friends_bar"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/list_bg" />

</RelativeLayout>

<RelativeLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp" >

<ImageView
    android:id="@+id/friends_bar"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/map_box_bg" />

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="25dp"
    android:layout_alignParentRight="true" >

    <ImageView
        android:id="@+id/friends_button"
        android:layout_width="24dp"
        android:layout_height="23dp"

        android:layout_centerVertical="true"
        android:layout_marginLeft="1dp"
        android:background="@drawable/common_friends_icon" />

    <TextView
        android:id="@+id/friends_in_common"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@id/friends_button"
        android:gravity="center_vertical"
        android:text=" 9 friends in common"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    </RelativeLayout>

<ImageView
    android:id="@+id/friends_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/friends_bar"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/list_bg" />
</RelativeLayout>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:44:09.470

而不是在地图片段上方使用透明图像，而是尝试使用透明颜色，因为我也面临同样的问题，我使用这种方法解决了。

```
android:background="@android:color/transparent" 
```

但从技术上讲，正如 Android 所建议的那样，您不应该在另一个滚动元素中使用滚动元素。相反，您可以使用谷歌地图静态地图 API 在滚动视图中显示静态地图，当您点击滚动视图时，您可以打开可滚动的谷歌地图在新窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T10:42:32.023

这背后的原因是 Map 使用 SurfaceView，当应用程序创建此视图时，它会在您的 Activity 后面创建一个窗口并打一个洞，这意味着您的 Activity 窗口中的东西在 SurfaceView 的原始位置下方看不到。

对我来说，这就像魅力一样，你可以使用这个库

[https://github.com/NyxDigital/NiceSupportMapFragment/](https://github.com/NyxDigital/NiceSupportMapFragment/)

# android - 屏幕关闭时继续接收数据包

> ID：14909688
> 
> 赞同：0
> 
> 时间：2013-02-16T11:21:27.407
> 
> 标签：android

我正在连接到本地 Wifi 接入点的 Android 手机之间编写本地通信系统。在我的系统设计中，Android 手机一旦收到来自 Windows 服务器的 UDP 广播数据包，就应该通知所有者。

当手机屏幕打开时，系统工作正常。但是发现，一旦安卓手机屏幕关闭，手机就直接忽略了这个数据包，就像没有收到消息一样。

我已经尝试了很多次谷歌，但仍然没有运气。其实我真的不知道我应该使用什么关键字来进行搜索。

有人知道我该怎么做吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:31:47.037

你会需要：

*   [一个`WakeLock`](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)
*   [一个`WifiLock`](http://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html)
*   一套盔甲，以更好地保护自己免受不喜欢您保持设备唤醒和 WiFi 无线电通电的用户的伤害

# meteor - 为流星添加 RESTfull 功能

> ID：14909693
> 
> 赞同：2
> 
> 时间：2013-02-16T11:21:46.933
> 
> 标签：meteor

无论在浏览器中输入什么路径，meteor 应用程序总是返回一个模板。如何添加路由以在流星应用程序中启用 RESTfull 功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:21:46.933

在为我的流星应用程序添加 RESTfull 功能的过程中，我使用了meter-router，这是一个很棒的流星智能包。

以下是关于如何获取它以及如何访问 POST 的正文部分的简短说明：

流星将在 1.0 版本之前添加 RESTfull 功能。同时，您必须使用meter-router。这篇文章解释了如何做到这一点。

按照[流星路由器中的说明进行操作](https://github.com/tmeasday/meteor-router)

在服务端路由部分，没有说明如何获取请求体中的参数。这花了我一些时间来弄清楚所以这里是：

假设您使用以下形式：

```
<form action="http://localhost:3000/test" method="POST">
    <input value="titi" name="testme"/>
    <input type="submit" />
</form> 
```

该`testme`字段的内容将位于`this.request.body.testme`. 这是一个示例，它将返回一些包含字段内容的文本

```
if (Meteor.isServer) {
    Meteor.startup(function () {
       Meteor.Router.add('/test', 'POST', function () {
           return "called with "+ this.request.body.testme + "\n";
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:08:43.057

[meteor-collectionapi](https://github.com/crazytoad/meteor-collectionapi)可能会满足您的需求。它为您的集合添加了一个包装器，以便通过 REST 公开它们。

# exception-handling - 如何处理 yii 中的错误

> ID：14909695
> 
> 赞同：0
> 
> 时间：2013-02-16T11:21:54.507
> 
> 标签：exception-handling, yii, yii-extensions, yii-components

我正在使用 yii 开发一个应用程序。我有一个动作让`acmanageappointments/index`。我已将其规则定义如下

```
array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('index','create','update','delete','updatestatus'),
                'users'=>array('@'), 
```

其作用如下：

```
public function actionIndex()
    {

        $user_id = Yii::app()->user->getId();   
        $criteria = new CDbCriteria();
        $criteria->condition = 'user_id='.$user_id;
        $count=AcAppointments::model()->count($criteria);
        $pages=new CPagination($count);

        //results per page 
        $pages->pageSize=10;
        $pages->applyLimit($criteria);
        $AllAppointments = AcAppointments::model()->findAll($criteria);

        // Applying Global Date Time Format 
        $condition = array('user_id' => $user_id);
        $DTFormat = CalendarSettings::model()->findByAttributes($condition);

        $this->render('index',array(
                'AllAppointments' => $AllAppointments,
                'pages' => $pages,
                'DTFormat' => $DTFormat,
        ));

    } 
```

此操作只能由经过身份验证的人员访问。当我登录时，此功能正常工作。但是当我注销并执行此操作时，它会给出`CDbException`. 我该如何处理这个异常，当用户退出时，如果他试图访问这个 url，那么他应该被重定向到 login page 。我怎样才能做到这一点 ？

**更新**：这是我的访问规则：

```
public function accessRules()
    {
        return array(
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('index','create','update','delete','updatestatus'),
                'users'=>array('@'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    } 
```

这是错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:33:29.677

您需要定义另一个规则，以确保拒绝未经身份验证的用户访问。这必须是最后一条规则。

```
array('allow', // allow authenticated user to perform 'create' and 'update' actions
    'actions'=>array('index','create','update','delete','updatestatus'),
    'users'=>array('@'),
),
array('deny',
    'users'=>array('*'),
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T16:27:29.573

正如评论中提到的topher，您需要一个`filters`方法。

确保你的控制器中有这个，否则你的访问规则不会做任何事情：

```
public function filters()
{
    return array(
        'accessControl', 
    );
} 
```

如果它有效，请在他使用此代码段更新它时给予他的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T17:19:32.437

您可以在配置文件“main.php”中设置 errorHandler

```
'components'=>array(
    ...............
    ...............
    'errorHandler'=>array(
    // use 'site/error' action to display errors
    'errorAction'=>'site/error',
    ),
    ...............
    ...............
) 
```

在这种情况下，这会将所有异常重定向到提供的 URL 站点/错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T06:33:18.567

检查值 $user_id。如果你没有登录，你会得到空的 $user_id

```
$user_id = Yii::app()->user->getId();   
$criteria = new CDbCriteria();
$criteria->condition = 'user_id='.$user_id; 
```

当您使用此条件执行时，您会收到 SQL 错误

# android - 应用内计费：在现有已发布应用上添加计费

> ID：14909696
> 
> 赞同：5
> 
> 时间：2013-02-16T11:22:17.690
> 
> 标签：android, in-app-purchase, in-app-billing

我们在 Google Play 中发布了一个现有的应用程序 (apk v282)。此应用没有应用内商品，也没有 BILLING 权限。

我们开发了包含应用内产品和 BILLING 权限的升级版本 (v292)。

我们在 Google Play 控制台中创建应用内产品时遇到问题：当我们将 v292 apk 作为草稿上传到 Google Play 控制台时，草稿中列出了两个 APK：旧的和新的： ![在此处输入图像描述](../Images/01e11ddbb59d5cc1776f49d112f956f0.png)

在此页面中，我们有两种选择：

1-我们点击左侧列表中的“应用内产品”来创建我们的产品，我们看到一个页面说：

> 要添加应用内商品，您需要将 BILLING 权限添加到您的 APK。

所以我们无法创建应用内产品，可能是因为 v282 仍处于草稿配置中。

2- 或者，我们删除旧的 v282 APK（没有 BILLING 权限），以便在草稿配置中只保留新的 v292。但是当点击“应用内产品”时，我们会收到一个关于配置未保存的弹出警告。但是没有保存按钮，只有发布。当然，我们不想发布它，因为它正在测试中。

**总结一下：如何在之前发布的应用程序中测试应用内购买？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-24T12:34:27.600

对于寻找解决方案的每个人：将 apk 上传到 alpha 就可以了。因此，您应该向您的 android manifest 添加计费权限，构建签名版本并将 apk 加载到 alpha。之后，您可以在应用程序中配置购买产品，而无需将 apk 上传到生产环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:38:13.857

我有同样的问题。我最终做的是上传具有新权限的新版本，但没有可见的应用内计费选项。我的很容易，因为它只是删除容易不显示的广告的偏好选项。网站发布后，我可以创建应用内产品，我可以使用新的 apk 文件进行测试，并在不久后发布该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:34:02.457

您必须临时更改包名称并在市场上上传新的应用程序（不需要发布）临时。

只需签入应用程序购买，`don't choose any package name which you want to use in feature.`因为**每个包名称都是唯一的，而且 Google 会记住所有包名称，因此您可以使用此提醒**

然后在其中进行测试，当您在该临时构建应用程序中成功完全运行时，您可以再次更改您想要上传下一个 apk 的先前包名称，您必须从中删除旧版本，然后您可以立即在应用产品中创建。

现在，如果您想签入应用程序购买，那么您必须从不同的帐户购买该产品`except this account in which you are uploading your apk`不要担心您可以在检查此功能后回滚您的钱。

我最近遇到了这个问题，我就这样跟着所以我希望你能从我的经验中得到一些帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:30:47.593

我认为这里的问题是 Google Play 控制台认为您正在尝试发布多个 apk。仅当 apk 针对不同的设备配置时才支持此功能：

[发布多个 apk](http://developer.android.com/google/play/publishing/multiple-apks.html)

我认为一旦您删除了以前的版本，您将能够通过应用内计费激活较新的版本。如果我了解更多信息，我将尽快尝试并更新此答案。

# python - Django Rest Framework / Django 性能问题

> ID：14909700
> 
> 赞同：6
> 
> 时间：2013-02-16T11:22:55.007
> 
> 标签：python, django, profiling, mysql-python, django-rest-framework

我目前正在我的 EC2 小型实例服务器上部署带有 Django-Rest-Framework 的 Django，以为几个 Android 应用程序提供一组 API。

问题是我面临着一个我必须分析的严重性能问题。我发现单个请求的大部分时间都花在了 DRF 的核心中。

很抱歉让这篇文章变得很长，但我认为我必须展示所有内容，以便我能得到正确的答案。让我继续：

我的设置是 nginx / uwsgi。这是我使用 upstart 运行 uwsgi 的方式：

```
description "pycms"
start on [2345]
stop on [06]

respawn

# start from virtualenv path
chdir /www/python/apps/pycms/

exec uwsgi -b 25000 --chdir=/www/python/apps/pycms --module=wsgi:application --env DJANGO_SETTINGS_MODULE=settings --socket=127.0.0.1:8081 --processes=5  --harakiri=20  --max-requests=5000  --vacuum --master --pidfile=/tmp/pycms-master.pid 
```

假设我请求以下 API：

```
http://IP_ADDRESS/api/nodes/mostviewed/9/ 
```

符合以下规则：

```
url(r'^nodes/mostviewed/(?P<category>\d+)/$', MostViewedNodesList.as_view(), name='mostviewed-nodes-list'), 
```

这是基于类的视图：

```
class MostViewedNodesList(generics.ListAPIView):
    """
    API endpoint that lists featured nodes
    """
    model = ObjectStats
    serializer_class = NodeSerializer
    permission_classes = (permissions.AllowAny,)

    def get_queryset(self):
        if(self.kwargs.has_key('category')):
            category_id = self.kwargs.get('category')
            return ObjectStats.get_most_viewed(category_id)
        else:
            return [] 
```

序列化程序类：

```
class NodeSerializer(serializers.ModelSerializer):
    images = ImageSerializer()
    favorite = ObjectField(source='is_favorite')
    rating = ObjectField(source='get_rating')
    meta = ObjectField(source='get_meta')
    url = ObjectField(source='get_absolute_url')
    channel_title = ObjectField(source='channel_title')

    class Meta:
        model = Node
        fields = ('id', 'title', 'body', 'images', 'parent', 'type', 'rating', 'meta', 'favorite', 'url', 'channel_title') 
```

最后是类方法'get_most_viewed'（我知道使用类方法而不是管理器方法是错误的）

```
@classmethod
    def get_most_viewed(cls, category_id):
        return list(Node.objects.extra(
            where=['objects.id=content_api_objectviewsstats.node_id', 'content_api_objectviewsstats.term_id=%s'],
            params=[category_id],
            tables=['content_api_objectviewsstats'],
            order_by=['-content_api_objectviewsstats.num_views']
        ).prefetch_related('images', 'objectmeta_set').select_related('parent__parent')) 
```

从这一切可以看出，这是一个正常的请求，被重定向到指定的视图，从 MySQL 获取数据，然后返回序列化结果。没有任何异常或任何复杂的处理。

执行：

```
ab -c 500 -n 5000 http://IP_HERE/api/nodes/mostviewed/9/ 
```

请注意，这是没有缓存的。经常记录以下内容：

```
HARAKIRI: --- uWSGI worker 5 (pid: 31015) WAS managing request /api/nodes/mostviewed/9/ since Sat Feb 16 13:07:21 2013 ---
DAMN ! worker 2 (pid: 31006) died, killed by signal 9 :( trying respawn ...
Respawned uWSGI worker 2 (new pid: 31040) 
```

测试期间的平均负载上升到 ~ 5。这是 ab 结果：

```
Concurrency Level:      500
Time taken for tests:   251.810 seconds
Complete requests:      1969
Failed requests:        1771
   (Connect: 0, Receive: 0, Length: 1771, Exceptions: 0)
Write errors:           0
Non-2xx responses:      1967
Total transferred:      702612 bytes
HTML transferred:       396412 bytes
Requests per second:    7.82 [#/sec] (mean)
Time per request:       63943.511 [ms] (mean)
Time per request:       127.887 [ms] (mean, across all concurrent requests)
Transfer rate:          2.72 [Kbytes/sec] received 
```

首先，每秒 7 个请求是非常令人失望的。~ 1700 由于超时错误而失败的请求也是因为我在这里面临的性能滞后。

说实话。我预计每秒约 60 - 70 个请求而无需缓存。我知道缓存加速了这个过程，但它也隐藏了我遇到的性能问题，这就是为什么我在缓存东西之前寻求解决这个问题的原因。

然后我决定使用 django-profiling 在 vmware CentOS 机器上对此进行分析，通过在请求中添加 ?prof 来显示调用堆栈：

```
Instance wide RAM usage

Partition of a set of 373497 objects. Total size = 65340232 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0   2270   1  7609040  12   7609040  12 dict of django.db.models.sql.query.Query
     1  19503   5  6263400  10  13872440  21 dict (no owner)
     2  63952  17  5739672   9  19612112  30 str
     3  51413  14  5090344   8  24702456  38 list
     4  58435  16  4991160   8  29693616  45 tuple
     5  24518   7  4434112   7  34127728  52 unicode
     6   8517   2  2384760   4  36512488  56 dict of django.db.models.base.ModelState
     7   2270   1  2378960   4  38891448  60 dict of django.db.models.query.QuerySet
     8   2268   1  2376864   4  41268312  63 dict of 0x14d6920
     9   6998   2  2088304   3  43356616  66 django.utils.datastructures.SortedDict
<619 more rows. Type e.g. '_.more' to view.>

CPU Time for this request

         663425 function calls (618735 primitive calls) in 2.037 CPU seconds

   Ordered by: cumulative time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    2.037    2.037 /usr/lib/python2.6/site-packages/django/views/generic/base.py:44(view)
        1    0.000    0.000    2.037    2.037 /usr/lib/python2.6/site-packages/django/views/decorators/csrf.py:76(wrapped_view)
        1    0.000    0.000    2.037    2.037 /usr/lib/python2.6/site-packages/rest_framework/views.py:359(dispatch)
        1    0.000    0.000    2.036    2.036 /usr/lib/python2.6/site-packages/rest_framework/generics.py:144(get)
        1    0.000    0.000    2.036    2.036 /usr/lib/python2.6/site-packages/rest_framework/mixins.py:46(list)
        1    0.000    0.000    2.029    2.029 apps/content_api/views.py:504(get_queryset)
        1    0.000    0.000    2.029    2.029 apps/objects_stats/models.py:11(get_most_viewed)
    23/21    0.000    0.000    2.028    0.097 /usr/lib/python2.6/site-packages/django/db/models/query.py:92(__iter__)
      4/2    0.003    0.001    2.028    1.014 /usr/lib/python2.6/site-packages/django/db/models/query.py:77(__len__)
        1    0.000    0.000    1.645    1.645 /usr/lib/python2.6/site-packages/django/db/models/query.py:568(_prefetch_related_objects)
        1    0.002    0.002    1.645    1.645 /usr/lib/python2.6/site-packages/django/db/models/query.py:1596(prefetch_related_objects)
        2    0.024    0.012    1.643    0.822 /usr/lib/python2.6/site-packages/django/db/models/query.py:1748(prefetch_one_level)
     2288    0.007    0.000    1.156    0.001 /usr/lib/python2.6/site-packages/django/db/models/manager.py:115(all)
     6252    0.019    0.000    0.762    0.000 /usr/lib/python2.6/site-packages/django/db/models/query.py:231(iterator)
     4544    0.025    0.000    0.727    0.000 /usr/lib/python2.6/site-packages/django/db/models/query.py:870(_clone)
     4544    0.109    0.000    0.694    0.000 /usr/lib/python2.6/site-packages/django/db/models/sql/query.py:235(clone)
     2270    0.004    0.000    0.619    0.000 /usr/lib/python2.6/site-packages/django/db/models/query.py:619(filter)
     2270    0.013    0.000    0.615    0.000 /usr/lib/python2.6/site-packages/django/db/models/query.py:633(_filter_or_exclude)
     1144    0.019    0.000    0.581    0.001 /usr/lib/python2.6/site-packages/django/db/models/fields/related.py:456(get_query_set)
     1144    0.019    0.000    0.568    0.000 /usr/lib/python2.6/site-packages/django/db/models/fields/related.py:560(get_query_set)
55917/18180    0.192    0.000    0.500    0.000 /usr/lib64/python2.6/copy.py:144(deepcopy)
     2270    0.003    0.000    0.401    0.000 /usr/lib/python2.6/site-packages/django/db/models/query.py:820(using) 
```

正如你所看到的，大部分时间都花在了 django 视图和 DRF 视图上。

有人可以指出我在这里做错了什么吗？为什么请求这么慢？python / Django 可以扩展吗？我读到它确实可以，但是对于一个简单的数据库读取和渲染操作，例如我正在做的那个，我应该期望多少个请求/秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:26:48.883

> python / django是否缩放

Django 支持一些相当庞大的服务，例如 Disqus 和 Instagram，所以是的，它可以很好地扩展。

> 然后我决定介绍这个

正如您所看到的，几乎所有时间都花在 .get_most_viewed() 方法中，所以这看起来像是您遇到的问题。（那里可能是错误的，但您的个人资料表明，有 2.028 时间中有 2.037 时间花在了那里，所以大约 99.6% 的时间）

我的 ORM 技能并不能准确地弄清楚你应该如何处理那个相当复杂的查询，并且无论如何都需要查看模型定义，但你需要研究调试和简化该查询，而不是查看视图的其他部分。

您可能希望使用 manage.py shell 进入 Django shell，以便您可以分析该特定查询以排除其余视图。

也可以尝试在此处或在 Django IRC 频道或 django 邮件列表上获得一些关于如何简化查询的帮助（如果您*专门*询问该查询，而不是更通用的 Django/REST 框架，您可能会更幸运这里的措辞问题，其中大部分实际上似乎与您看到的问题无关。

希望这有助于为您指明解决此问题的正确方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:42:05.203

您使用早期评估（如列表（查询集））。当许多并发工作人员为您的请求提供服务时，您可能只是内存不足？所以你必须决定：更快的结果还是更多的内存使用（每个请求 65MB？这可能会在几秒钟内吃掉所有内存）

探查器说您的代码使用 QuerySet.all() ：

> 返回当前 QuerySet（或 QuerySet 子类）的副本。

这调用了需要大量时间的 deepcopy。

所以找到调用 all() 的地方，不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:17:01.537

对话继续在 DRF 的邮件列表 [https://groups.google.com/forum/?fromgroups=#!topic/django-rest-framework/AkLKdfxCrcU](https://groups.google.com/forum/?fromgroups=#!topic/django-rest-framework/AkLKdfxCrcU)

# java - Swing 中使用 MVC 的多种表单

> ID：14909701
> 
> 赞同：1
> 
> 时间：2013-02-16T11:23:02.483
> 
> 标签：java, swing, model-view-controller

第一次在这里发帖，所以请温柔！我已经广泛搜索了我的问题的答案，但一无所获。

我正在尝试学习和应用 MVC 架构来创建 Java Swing 应用程序。我想我理解模型、视图和控制器的不同角色。

但是，我的应用程序有一个 JMenuBar（文件、编辑等...）。

我想要做的是在单击一个菜单项后，一个要弹出的表单（它从 DVSDesk 类委托给控制器）​​。

我遇到的困难是如何显示接受控制器和模型的表单——根据我的阅读，每个 JFrame 都需要它自己的线程，这就是我感到困惑的地方。由于`invokeLater`它在自己独特的线程中，我似乎无法传递模型或控制器。

抱歉，如果这是一个愚蠢的问题，但我一直在四处寻找，似乎无处可去！

**编辑**——我真正的问题—— showImporterForm() 是创建和显示新表单的正确方法吗？

下面是主线程的代码（DVSMain.java）

```
public static void main(String[] args) {
    TopLevelController TLC;
    TopLevelModel TLM;

     java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            TopLevelModel TLM = new TopLevelModel();
            TopLevelController TLC = new TopLevelController(TLM);
        }
    });
} 
```

下面是控制器的代码（TopLevelController.java）

```
public class TopLevelController {    
// Initialise model and view
TopLevelModel TLM;
DVSDesk TLV;

public TopLevelController(TopLevelModel model) {
    // Get a reference to the view and model
    TLM = model;
    TLV = new DVSDesk(this,model);
    TLV.setVisible(true);
}

public void showImporter() {
    ImportForm importFm = new ImportForm(this,TLM);
    importFm.setVisible(true);
}

/*public void showForm(final Form fm) {        
    // Show the form which has been passed in

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {                
            fm.show();
        }
    });
}*/

public void quit() {System.exit(0);};
} 
```

下面是来自 DVSDesk.java 的代码（基于菜单的 GUI）......

```
public class DVSDesk extends javax.swing.JFrame {

/**
 * Creates new form DVSDesk
 */

TopLevelController TLC;
TopLevelModel TLM;

public DVSDesk(TopLevelController controller, TopLevelModel model) {
    initComponents();
    TLC = controller;
    TLM = model;
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jLayeredPane1 = new javax.swing.JLayeredPane();
    jSeparator1 = new javax.swing.JSeparator();
    jMenuBar1 = new javax.swing.JMenuBar();
    jMenu1 = new javax.swing.JMenu();
    fImportDiags = new javax.swing.JMenuItem();
    jSeparator2 = new javax.swing.JPopupMenu.Separator();
    fQuit = new javax.swing.JMenuItem();
    jMenu2 = new javax.swing.JMenu();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jMenu1.setText("File");

    fImportDiags.setText("Import Diagrams...");
    fImportDiags.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            fImportDiagsActionPerformed(evt);
        }
    });
    jMenu1.add(fImportDiags);
    jMenu1.add(jSeparator2);

    fQuit.setText("Quit...");
    fQuit.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            fQuitActionPerformed(evt);
        }
    });
    jMenu1.add(fQuit);

    jMenuBar1.add(jMenu1);

    jMenu2.setText("Edit");
    jMenuBar1.add(jMenu2);

    setJMenuBar(jMenuBar1);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 800, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 579, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>                        

private void fQuitActionPerformed(java.awt.event.ActionEvent evt) {                                      
    TLC.quit();
}                                     

private void fImportDiagsActionPerformed(java.awt.event.ActionEvent evt) {                                             
    TLC.showImporter();
}                                            

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(DVSDesk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(DVSDesk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(DVSDesk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(DVSDesk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>
}
// Variables declaration - do not modify                     
private javax.swing.JMenuItem fImportDiags;
private javax.swing.JMenuItem fQuit;
private javax.swing.JLayeredPane jLayeredPane1;
private javax.swing.JMenu jMenu1;
private javax.swing.JMenu jMenu2;
private javax.swing.JMenuBar jMenuBar1;
private javax.swing.JSeparator jSeparator1;
private javax.swing.JPopupMenu.Separator jSeparator2;
// End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:24:41.183

所有 Swing 组件共享一个公共[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，尽管应用程序通常使用[一个](https://stackoverflow.com/q/9554636/230513) `JFrame`. [您可以在此处](https://stackoverflow.com/a/3072979/230513)了解有关 MVC 和 Swing的更多信息。

附录：顺便说一句，不要让 GUI 设计师决定你的 GUI 设计。您需要了解如何手动使用 Swing，以便了解使用设计器时遇到的问题。[如此处](https://stackoverflow.com/a/2561540/230513)所示，您可以将内容添加到您选择[的顶级容器中](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，并限制对需要它的组件使用设计器。

# jquery - plone portlet ajax 更新机制

> ID：14909703
> 
> 赞同：1
> 
> 时间：2013-02-16T11:23:13.923
> 
> 标签：jquery, plone

我正在开发一个 plone portlet，它提供了一些用户界面来更改反映在不同 portlet 显示中的参数，类似于日历 portlet。即，portlet 提供链接来更新所显示的portlet 内容。

plone 开发人员手册[http://plone.org/documentation/manual/developer-manual/client-side-functionality-javascript/kss](http://plone.org/documentation/manual/developer-manual/client-side-functionality-javascript/kss)声明不推荐使用 kss。

> KSS 是 Plones 将行为绑定到文档节点的标准机制，但它正在逐渐被 jQuery 取代。从 Plone 4.1 开始，不推荐使用 KSS。请不要创建新的 KSS 相关功能。制定替换现有功能的计划。

在 plone.portlets README.txt 中有关于 portlet 基础设施功能的很好的信息，关于 portlet 管理、分配等（谢谢，我认为它来自 optilude！）。

在 plone.app.portlets 中是 calendar-portlet 的相关代码，我认为这可以为我开发的 portlet 提供一些建议。生成的 portlet-html 包含一个带有与 portlet 相关的 dict 编码的散列值，服务器机器在 ajax 请求进入时使用它。但是“注册”我自己的 portlet 以参与那个很好的部分的过程如何的克隆提供了基础设施？

在 plone.app.kss 中有一个名为 calendar.py 的文件，

```
# --
# Calendar in-place refreshment
# --

implements(IPloneKSSView)

@kssaction
def refreshCalendar(self, month, year, portlethash):
    'In-place refreshment of the calendar.'
    month, year = int(month), int(year)
    self.getCommandSet('plone').refreshPortlet(portlethash, year=year, month=month) 
```

被开发手册中的声明吓倒了，我必须决定以下几点：

我应该使用 kss 方式来更新我的 portlet 吗？如果是这样，我如何告诉克隆机器我的参数集进行更新？我知道将参数放入`href`链接的标签中，但是plone怎么知道如何处理呢？所提供功能的客户端、开箱即用的已安装 js 文件等是否准备好处理我的特定 portlet 的 ajax 响应？

干净且唯一的 js-ajax 提议的更新 portlet 的方法如何工作，尤其是在客户端？

作为后备解决方案，有没有办法在没有 javascript 和/或 kss 的情况下更新 portlet？

我正在使用一个干净的 Plone 4.2.4 安装并在 centos 平台 python 2.7.3 上构建。

也许一些建议，特别是关于 Portlet 更新功能的客户端发生了什么以及如何准确地帮助像我这样知识水平相似的人。服务器端与 portlet 相关的代码已记录在案，足以了解 portlet 机器的工作原理，但我找不到足够的信息来了解 portlet 更新刷新往返中到底发生了什么，以及如何“插入”提供的使用我自己的 portlet 命令集的机器。

# mysql - 如果使用 where 子句，外连接给出与内连接相同的结果

> ID：14909706
> 
> 赞同：1
> 
> 时间：2013-02-16T11:23:19.697
> 
> 标签：mysql, sql, join, left-join, inner-join

以下 SQL 语句：

```
select * from employees e   
left join departments d on e.deptid = d.deptid   
where ( d.deptname = 'HR' or d.deptname  = 'HR & Accounts') 
```

产生与以下内连接相同的结果：

```
select * from employees e  
   inner join departments d on e.deptid = d.deptid and d.deptname like '%HR%'; 
```

它们以何种方式产生相同的结果。

我的意思是第一个查询等价于：

1.  从员工中选择 * 并使用 where 过滤
2.  左加入吗？

第一个查询的步骤是什么使其与内部连接相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:41:19.783

对于不符合外连接条件的行，连接表中任何一列的值为NULL。Where 子句（从概念上讲）*在*处理连接之后发生，因此测试这些列的任何条件都将是错误的（或者，严格来说，NULL）。

如果要包含一个表中的所有行，但只匹配第二个表中满足条件的行，则必须将该条件添加到外部联接的 ON 子句中。

另外，请注意，由于内部联接会丢弃不匹配的行，因此内部联接的 ON 子句中的条件与 Where 子句中的条件具有相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:42:06.323

使用第二个查询，您可以过滤连接条件。

剩下的第一个查询使用 deptid 将员工连接到部门。它返回所有可能的结果，然后使用您的 where 子句进行过滤。此过滤后本质上会更改查询以返回类似于内部连接查询的结果。

您可以更改第一个查询以显示由于您的 where 子句而无法返回的内容，如下所示：

```
select *, CASE WHEN d.deptname = 'HR' or d.deptname  = 'HR & Accounts' THEN 1 ELSE 0 END as HR
from employees e 
left join departments d on e.deptid = d.deptid; 
```

# mysql - 查询2个表

> ID：14909710
> 
> 赞同：0
> 
> 时间：2013-02-16T11:24:08.917
> 
> 标签：mysql, sql

美好的一天，我在查询 2 个 mysql 表时遇到问题。

表格1

```
c_id     c_name
**-----------------**
 1      blah,blah
 2      hey 
```

表 2

```
m_id    c_id    m_name
-----------------------
 1       1     some_name
 2       1     some-name
 3       1     some/name
 4       1     some.name
 5       2     name.some
 6       2     name-some 
```

我希望显示是这样的：

```
c_id     c_name       m_name
-----------------------------
 1     blah,blah     some_name
                     some-name
                     some/name
                     some.name
 2     hey           name.some
                     name-some 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T16:34:03.067

```
Select a.c_id, a.c_name, 
group_concat(b.m_name SEPARATOR '<br/>') as m_name from table1 a 
left join table2 b on a.c_id = b.c_id
group by a.c_id; 
```

***[小提琴](http://sqlfiddle.com/#!2/4bab3/4)***

使用 m_name 绑定到标签。它将带有换行符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T17:06:14.147

此查询将准确输出您想要的内容：

```
select case when first.m_id is null then ' ' else t1.c_id end c_id, 
       case when first.m_id is null then ' ' else t1.c_name end c_name, 
       m_name
from Table1 t1
inner join Table2 t2 on t1.c_id = t2.c_id
left outer join (
    select m_id,t1.c_id, t1.c_name, min(m_name)
    from Table1 t1
    inner join Table2 t2 on t1.c_id = t2.c_id
    group by t1.c_id, t1.c_name) first on t2.m_id = first.m_id  
order by t1.c_id, t2.m_id 
```

请参阅 SQLFIDDLE：[http ://www.sqlfiddle.com/#!2/4bab3/16/0](http://www.sqlfiddle.com/#!2/4bab3/16/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:29:01.937

```
Select a.c_id, a.c_name, b.m_name from  table1 a left join table2 b on a.c_id  = b.c_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:29:43.387

您可以使用 join 将两个表的结果放在一起：

```
select c_id, c_name, m_name from table1 as x left outer join table2 as y on x.c_id = y.c_id; 
```

# python - Python余弦函数精度

> ID：14909711
> 
> 赞同：4
> 
> 时间：2013-02-16T11:24:16.610
> 
> 标签：python, decimal, trigonometry

从数学中我们知道 90 度角的余弦为 0，但 Python 说它不止于此。

```
import math
math.cos(math.radians(90))
6.123233995736766e-17 
```

Python和数字“0”之间有什么关系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T11:30:17.273

跟着我重复：

> 计算机无法处理实数。

Python 使用双精度 IEEE 浮点数，它四舍五入到 53 位二进制精度并且对范围有限制。由于 π/2 是一个无理数，计算机将其四舍五入为最接近的可表示数字（或接近的可表示数字——一些运算具有精确舍入，一些运算具有大于 1/2 ULP 的误差）。

因此，您从未要求计算机计算`cos(π/2)`，而是真正要求计算机计算`cos(π/2+ε)`，其中 ε 是计算 π/2 的舍入误差。然后将结果再次四舍五入。

## 为什么 Excel（或其他程序）显示正确的结果？

**可能性 1：**程序进行符号计算，而不是数字计算。这适用于 Mathematica 和 Maxima 等程序，而不适用于 Excel。

**可能性 2：**程序隐藏了数据（很可能）。Excel 只会显示您要求的数字，例如，

```
>>> '%.10f' % math.cos(math.radians(90))
'0.0000000000' 
```

Python 有一个经过微调的函数来打印浮点数，以便它们在往返文本和返回的过程中幸存下来。这意味着 Python 默认打印的数字比例如`printf`.

**可能性 3：**您正在使用的程序有两个取消的舍入错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-28T20:16:45.043

正如 Dietrich 指出的那样，包含的 Math 包使用*数值近似值*来计算三角函数 - pi 具有通过浮点数表示的某种程度的精度。但是也有很多很好的 python 包可以进行*符号计算*——如果你愿意的话，**Sympy是一种进行更精确计算的简单方法。**

考虑：

```
import math
math.cos( 3*math.pi/2 )
# Outputs -1.8369701987210297e-16 
```

相对于

```
import sympy
sympy.cos( 3*sympy.pi/2 ) 
# Outputs 0 
```

在很多情况下这会有所不同，并且 sympy 的速度要慢得多。我用 math 和 sympy 测试了我的计算机可以在 5 秒内完成多少次余弦计算，它**用 math 做了 38 倍的计算**。这取决于你在寻找什么。

# uitableview - 如何根据点击的uibuttons加载具有不同NSArrays的相同tableview？

> ID：14909713
> 
> 赞同：1
> 
> 时间：2013-02-16T11:24:23.990
> 
> 标签：uitableview, ios5, uibutton, tableview, subview

在我的应用程序中，我将滚动视图和表格视图添加为子视图，在此滚动视图上，我将多个菜单按钮（UI 按钮）作为子视图添加到滚动视图中。我想加载根据各自的菜单按钮，具有不同数组的表视图被点击。任何想法？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self PutButtoninScrollView:7];

}
-(void)PutButtoninScrollView:(int)numberOfbuttons
{
    myButton1=[[UIButton alloc]init];
    myButton1= [UIButton buttonWithType:UIButtonTypeCustom];
    myButton1.frame=CGRectMake(5, 5, 70, 30);
    [myButton1 setTitle:@"दुनिया" forState:UIControlStateNormal];
    [myButton1 setTag:1];
    myButton1.backgroundColor=[UIColor blackColor];
    [myButton1 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.myScrollView addSubview:myButton1];

    myButton2=[[UIButton alloc]init];
    myButton2= [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton2.frame=CGRectMake(80, 5, 70, 30);
    [myButton2 setTitle:@"India" forState:UIControlStateNormal];
    [myButton2 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.myScrollView addSubview:myButton2];
    [self.myScrollView setContentSize:CGSizeMake(160, 35)];
    _myScrollView.backgroundColor=[UIColor redColor];
    [self.view addSubview:self.myScrollView];
}

-(void)ListViewAction:(id)sender
{
    NSLog(@"sucessful");        

    if ([myButton.currentTitle isEqualToString:@"दुनिया"])
    {
        NSLog(@"successful again 1");
    }
    else if ([myButton.currentTitle isEqualToString:@"भारत"])
    {
        NSLog(@"successful again 2");
    }        
} 
```

问题是当我执行代码时显示“成功”。这意味着 ListViewAction 方法被调用，但我的 if 语句从未执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:05:58.120

试试这个

```
 -(void)PutButtoninScrollView:(int)numberOfbuttons
{
xPosition=5;
for(int i=0;i<numberOfbuttons;i++)
{

    myButton= [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame=CGRectMake(xPosition, 5, 70, 30);
    myButton.backgroundColor=[UIColor redColor];
   [myButton setTitle:[NSString stringWithFormat:@"%d",i] forState:UIControlStateNormal];
    [myButton setTag:i];
    [myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.myScrollView addSubview:myButton];
    xPosition+=75;
}
[self.myScrollView setContentSize:CGSizeMake(xPosition,35)];
_myScrollView.backgroundColor=[UIColor redColor];
[self.view addSubview:self.myScrollView];
}

  - (void) buttonClicked:(id) sender
{
   NSString *strTitle = [sender currentTitle];
 // arrItem have list of array items
   NextView  *detailViewController = [[NextView alloc] initWithNibName:@"NextView" bundle:nil];
   detailViewController.arrTableView =[arrItem objectAtIndex:[strTitle integerValue]];
  [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:22:23.313

-(void)ListViewAction:(id)sender { NSLog(@"成功");

```
if ([[sender currentTitle] isEqualToString:@"दुनिया"])
{
    NSLog(@"successful again 1");
}
else if ([[sender currentTitle] isEqualToString:@"भारत"])
{
    NSLog(@"successful again 2");
} 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T12:21:00.167

试试这个

```
[myButton1 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside];
[myButton2 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

# github - 将github与godaddy账号同步

> ID：14909714
> 
> 赞同：5
> 
> 时间：2013-02-16T11:24:25.887
> 
> 标签：github, synchronization, shared-hosting

我开发了许多托管在 godaddy 上的网站的前端和后端。我正在寻找一种方法来将 godaddy 文件管理器与我的本地存储库同步，以防止我每次都上传编辑过的文件。我直接将代码推送到github，但是有没有办法直接将代码推送到godaddy帐户而不使用其文件管理器？

此外，有时，对于其他系统，如果代码出现问题，我会直接在服务器上编辑代码，这样就很难在我的本地系统上获取它。

不用每次都使用文件管理器直接推送会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T14:22:55.510

最好是：

*   [在Godaddy](http://iamchuka.com/technology/installing-git-on-godaddy/)上安装 Git（如本文所述）
*   在上游端设置一个裸仓库（即 GoDady 端，您将推送代码的地方）
*   在该上游 repo 上添加一个 post-receive 挂钩，以便非裸 repo 自行更新：请参阅“选项[是否`--bare`等于`core.bare`Git 中的配置？](https://stackoverflow.com/a/14901796/6309) ”答案中的链接。

# android - Android中ID的命名约定

> ID：14909719
> 
> 赞同：4
> 
> 时间：2013-02-16T11:24:46.607
> 
> 标签：android, naming-conventions

安卓 2.3.3。

我有一个关于在 Android 中命名 ID 的问题。

假设我在 Activity1 中有两个按钮（保存和取消）。我将它们（ID）命名为 btnSave 和 btnCancel。现在我有了 Activity2，其中还有保存和取消按钮。两者都具有相同的功能。如果我将 ID 指定为 btnSave 和 btnCancel 会发生什么。

我在编译时会遇到问题吗？当我按下时，R.id。和 ctrl+space，我会有两个 btnSave 和 btnCancel(s) 可供选择吗？

最重要的是，如果我应该给它们起不同的名字，我为什么要给它们起不同的名字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T11:29:42.277

如果它只是用简单的方式编写代码，那么

您可以尝试类似**的方法（使用带有前缀或后缀的活动或布局 xml 文件编写按钮名称）**

```
button_save_<activity_or_layout_name>
button_cancel_<activity_or_layout_name> 
```

但在运行时，您的按钮 ID 始终由布局视图引用。您将其设置为 Activity 的`setContentView()`.

**更新：**

假设在 Activity2 中您使用的是 Activity1 布局的 id 按钮，那么您可以获得**NullPointerException**，因为当前 Activity2 中没有引用您的按钮。（因为你的 Activity2 有不同的布局）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T11:30:03.167

在我看来，当你命名 ID 时，你应该先写下将使用它们的活动的名称，然后是小部件的首字母，最后是它的功能，例如 loginBSave、loginBCancel、activity2BSave、activity2BCancel 无论如何这完全取决于你程序员以一种可以区分它们的方式命名它们

例如：

```
<activity_or_layout_name>_button_save
<activity_or_layout_name>_button_cancel 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:17:18.327

在多个活动之间共享相同的 ID 没有任何影响，事实上，您甚至可以在同一个活动中多次使用相同的 ID，而不会出现任何问题。在这种情况下，对 getViewById() 的调用将简单地返回当同一层次结构中有许多具有相同 ID 的视图时它将找到的第一个视图。

This kind of situation usually happens when the same layout need to be inflated multiple times from its XML file. If you need to find all the View sharing the same ID, you have to change the ID of each View with a setId() one after the other after each find or give a different starting point.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:49:42.447

对于布局特定的元素，我使用带有布局名称首字母的前缀。因此，如果我有名为的布局`show_task_layout.xml`，它的元素将具有名称`stl_button_ok`等。

对于可能复制或出现在许多活动中的特定元素，我更喜欢使用一个不带前缀的名称。但是如果在每个布局中都遵循这种方式，那么调试会很头疼如果你什么时候不会通过 id 找到元素

# c# - 使用几个不同的参数减少非常长的构造函数重载的数量

> ID：14909720
> 
> 赞同：1
> 
> 时间：2013-02-16T11:25:09.790
> 
> 标签：c#, parameters, constructor

我制作了自定义界面系统，它使用基本的 UI 控件，如按钮、标签等。有些控件有很多选项，所以它们使用长构造函数，它们只有一两个参数不同。这是正在进行的工作，所以我对可选参数进行了很多更改，并且将更改应用于所有构造函数需要相当长的时间。

```
public Button(string Text, Rectangle Rect, Texture2D Texture, bool moreStuff)
public Button(string Text, Point Position, Texture2D Texture, bool moreStuff)
public Button(string Text, Vector2 Position, Texture2D Texture, bool moreStuff) 
```

我尝试使用`dynamic`关键字而不是`Rectangle`,`Point`并`Vector2`减少构造函数的数量，它可以编译、工作并且目前看起来还可以。但也许我错过了一些可能会在以后破坏这种方法的东西？

要找出在`dynamic Position`我检查时传递了什么，请使用开关并在它不是可识别的类型`.GetType().Name`时抛出异常。`default:`

这样做可以吗，还是有更好（更安全或更合适）的方法？

* * *

目前可以创建一个完全自定义的`Button`内联实例，我不想失去这种能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:34:38.003

如果你觉得它很乏味，你不需要定义构造函数参数。您可以很好地使用对象初始化程序：

```
SomeButton button = new SomeButton()
{
    Text = "",
    MoreStuff = false
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:32:01.350

这需要一个[参数对象](http://c2.com/cgi/wiki?ParameterObject)。这是一个每个参数都有一个属性的类。你的`Button`构造函数现在只需要一个参数：那个参数对象。

使用`dynamic`来减少重载的数量绝对不是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:32:10.250

在您的场景中使用`dynamic`不合适。拥有不同的构造函数重载并不是一件坏事（不值得滥用`dynamic`关键字）。.NET Framework BCL 中的许多类具有多个构造函数重载（例如，[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)类具有 15 个构造函数），并且某些方法具有多个用于不同用途的重载（[`MessageBox.Show`](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show.aspx)例如）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:35:25.973

另一种方法是自己输入：

```
class YourPositioningType {
    public int X { get; set; }
    public int Y { get; set; }

    public static YourPositioningType FromVector(Vector2 vector) {
        return new YourPositioningType() { X = vector.X, Y = vector.Y };
    }

    public static YourPositioningType FromRectangle(Rectangle rect) {
        // etc..
    }
} 
```

从上述每种类型转换的静态方法。然后你会称它为：

```
Button b = new Button("Blah", YourPositioningType.FromVector(new Vector2() { /* etc */)); 
```

然后，您只需在单个构造函数中使用上述类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T11:48:48.043

如果您使用对象初始化器，那么您可以单独设置您需要的每个单独的属性。您只需要注意可以独立初始化各种属性。

例如：

```
public class Button
{
    public int Width
    {
        get
        {
            return Rectangle.Width;
        }
        set
        {
            Rectangle.Width = value;
        }
    }

    public int Height
    {
        get
        {
            return Rectangle.Height;
        }
        set
        {
            Rectangle.Height = value;
        }
    }

    public int X
    {
        get
        {
            return Rectangle.Left;
        }
        set
        {
            Rectangle.Left = value;
        }
    }

    public int Y
    {
        get
        {
            return Rectangle.Top;
        }
        set
        {
            Rectangle.Top = value;
        }
    }

    public Rectangle Rectangle
    {
        get;
        set;
    }
} 
```

如果您有类似上述的课程，您可以执行以下任一操作：

```
var button = new Button
{
    Rectangle = new Rectangle(...)
} 
```

或者：

```
var button = new Button
{
    Left = 0,
    Top = 0,
    Width = 100,
    Height = 20
} 
```

对象初始化符号非常适合通过其属性初始化对象，您可以在其中设置多个需要设置的属性组合。

# mysql - 将数据类型指定为MEDIUMTEXT，即使数据较少也会占用更多空间

> ID：14909724
> 
> 赞同：0
> 
> 时间：2013-02-16T11:25:40.583
> 
> 标签：mysql, sqldatatypes

我`MEDIUMTEXT`在mysql中有一个列类型。

怀疑是->由于不是所有`TEXT`类型都存储在表中，因此指定任何列`MEDIUMTEXT`将占用`16 MB`或将取决于存储在其中的数据大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:57:56.047

MEDIUMTEXT 将比 TEXT 多占用一个字节。但他只会使用数据的大小。

见[存储](http://dev.mysql.com/doc/refman/5.1/en/storage-requirements.html)

# wpf - WPF-MVVM：视图模型中的 TabItem 标头单击事件处理

> ID：14909729
> 
> 赞同：1
> 
> 时间：2013-02-16T11:26:13.853
> 
> 标签：wpf, mvvm

我在后面的代码中找到了很多关于处理 TabItem 标题单击事件的答案，但我需要在视图模型中处理该事件。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:35:00.373

将属性绑定到选项卡控件 SelectedIndex。

**你的 XAML：**

```
<TabControl x:Name="tabControl" SelectedIndex="{Binding tabControlSelectedIndex}"> 
```

**您的视图模型：**

```
Private _tabControlSelectedIndex As Integer
Public Property tabControlSelectedIndex As Integer
    Get
        Return _tabControlSelectedIndex
    End Get
    Set(value As Integer)
        If _tabControlSelectedIndex <> value Then
            _tabControlSelectedIndex = value
             OnPropertyChanged("tabControlSelectedIndex")

             '
             ' Whatever you want to handle here
             '

        End If
    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:40:13.367

您可以使用 MVVM light 的`EventToCommand`方法：

1.  添加对`System.Windows.Interactivity.dll`项目的引用。

2.  添加`xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"`

3.  添加 xml 例如：

    `<Button> <i:Interaction.Triggers> <i:EventTrigger EventName="MouseEnter" > <i:InvokeCommandAction Command="{Binding FooCommand}" /> </i:EventTrigger> </i:Interaction.Triggers> </Button>`

你可以在这里看到代码： [http ://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/](http://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/)

# jquery - jQuery remove() 不起作用

> ID：14909730
> 
> 赞同：0
> 
> 时间：2013-02-16T11:26:19.990
> 
> 标签：jquery, xml, ajax

这里是来源：

```
function updateMsg() {
    $.post("AjaxChatServer.jsp",{ time: timestamp }, function(xml) {
        alert("1");
        $("#loading").remove();
        addMessages(xml);
    });
    setTimeout('updateMsg()', 4000);
} 
```

该`alert`功能不起作用，但在 , 之外`function(xml)`起作用`alert`。
jQuery源码有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:30:35.113

改变：

```
setTimeout('updateMsg()', 4000); 
```

至：

```
setTimeout(updateMsg, 4000); 
```

另请注意，在发布的代码`timestamp`中，`undefined`您应该将`setTimeout`其放在函数范围之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T11:29:28.643

如果您的成功回调没有触发，很可能是因为请求不成功。请参阅[.post()](http://api.jquery.com/jQuery.post/)文档。我建议使用功能更全面的[.ajax()](http://api.jquery.com/jQuery.ajax/)来更好地控制情况。

```
function updateMsg() {
    // You must define timestamp
    var timestamp = $.now();
    $.ajax({
        url: "AjaxChatServer.jsp",
        type: "POST",
        data: {
            time: timestamp
        },
        success: function (xml, textStatus, jqXHR) {
            $("#loading").remove();
            addMessages(xml);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            // Handle error
            alert(textStatus);
        }
    });
}

setTimeout(updateMsg, 4000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:31:23.247

我认为您可能对 ajax - 某个地方的错误有疑问。尝试在 post 函数的末尾添加`.error`and`.success`以查看错误。

> > ```
> > function updateMsg() {
> > 
> > $.post("AjaxChatServer.jsp",{ time: timestamp }, function(xml) {
> >   alert("1");
> >   $("#loading").remove();
> > 
> >  addMessages(xml);
> > })  .error(function(){
> >         alert("error");
> >      })  .success (function(){
> >         alert("error");
> >      ); 
> > ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:38:36.777

您的变量“时间戳”已声明？

尝试 ：

```
function updateMsg() {
    var date = new Date(), timestamp = date.getTime();

    $.post("AjaxChatServer.jsp",{ time: timestamp }, function(xml) {
       alert("1");
       $("#loading").remove();

       addMessages(xml);
    });
} 
```

# meteor - 卸载流星

> ID：14909733
> 
> 赞同：6
> 
> 时间：2013-02-16T11:26:52.437
> 
> 标签：meteor, osx-mountain-lion, uninstallation

我很久以前安装了 Meteor 来玩现在我不再使用它了，我将如何在 Mountain Lion 上卸载它？

我`meteor -v`在终端中找到了一个`/usr/local/`名为 meteor 的文件夹，因此可以确认它仍然安装在我的系统上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T11:59:02.180

你是对的，meteor 位于`/usr/local/meteor`目录中。要卸载它，请在终端中键入以下内容：

```
rm -fR /usr/local/meteor 
```

# ruby-on-rails - 当我在 Amazon Elastic Beanstalk 上更新我的应用程序时出现代理错误

> ID：14909738
> 
> 赞同：1
> 
> 时间：2013-02-16T11:27:34.327
> 
> 标签：ruby-on-rails, amazon-ec2, amazon-elastic-beanstalk

我有一个使用 Elastic BeanStalk 在 Amazon 上托管的 Ruby on Rails 应用程序。当我进行更新并进行一些更改以运行我的应用程序时，我在网站页面上出现此错误：

> 代理错误
> 
> 代理服务器收到来自上游服务器的无效响应。代理服务器无法处理请求 GET [http://commentmyprojects-env-vpusz2adwc.elasticbeanstalk.com/](http://commentmyprojects-env-vpusz2adwc.elasticbeanstalk.com/)。
> 
> 原因：从远程服务器读取错误
> 
> Apache 服务器在 commentmyprojects-env-vpusz2adwc.elasticbeanstalk.com 端口 3128

当我通过 Beanstalk 的控制台重新启动应用程序时，它会在一段时间后一遍又一遍地工作。

我该怎么做才能解决这个问题？

谢谢！

# fortran - DIST=AMAX1(0.,DI-DJ) 在 Fortran 中是什么意思？

> ID：14909742
> 
> 赞同：0
> 
> 时间：2013-02-16T11:28:18.613
> 
> 标签：fortran

我正在尝试理解 fortran 语言的代码，但我不明白是什么

DIST=AMAX1(0.,DI-DJ) 表示。

我真的对 0 旁边的点 (.) 感到困惑。

任何帮助，将不胜感激。

在此先感谢玛丽亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:33:08.443

`AMAX1`是用于获得两个或多个（单精度）浮点值的最大值的函数。`.`那里表示参数是浮点值而不是整数。`0.`是 的缩写`0.0`，FORTRAN 允许您省略小数点零。

Internet 上有很多 FORTRAN 参考资料。[例如，这里](http://www.amath.unc.edu/sysadmin/DOC4.0/fortran/f77rm/6_intrinsics.doc.html)是内在函数的快速列表。

# c - 数据结构的基本应用

> ID：14909745
> 
> 赞同：-3
> 
> 时间：2013-02-16T11:28:37.527
> 
> 标签：c, data-structures

我必须使用 c 为我的大学数据结构课程做一个项目，并且想知道是否有人可以告诉我数据结构在现实生活中的任何用途，以便我可以将我的项目基于它。请记住，这只是我使用 c 编程的第一年，所以我目前不具备编写非常高级代码的技能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:39:20.290

好吧，数据结构改善了数据操作的逻辑或性能。要查看后者，您可以尝试以下操作。生成一百万个或更多随机数的列表，并尝试特别找到其中一个。

尝试比较以下两种表示的性能：数组和排序[二叉树](http://en.wikipedia.org/wiki/Binary_tree)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:40:58.803

数据结构有很多实际用途，无论是在您的操作系统中，还是在数据库中等等。想想（不仅）MySQL 使用 B-Trees 来管理记录的案例（[http://dev.mysql.com/ doc/refman/5.5/en/index-btree-hash.html](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:42:09.620

查看[来自 wikipedia 的数据结构列表](http://en.wikipedia.org/wiki/List_of_data_structures)。大多数数据结构在它们自己的描述页面上都有真实世界的示例或应用程序部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:45:29.867

由于这是你上大学的第一年，我不会深入研究数据结构及其用途。

最简单的数据结构使用：英英词典，可以使用哈希表构建。

从这里，你可以深入DS

1.  OS设计中的数据结构，例如内存管理器（Linked List + Hash-Map），
2.  数据库设计中的 B 树
3.  文件系统中的树
4.  电子电路仿真、人工智能等中的图表

很多很多。

# javascript - 对类使用 switch 语句

> ID：14909748
> 
> 赞同：0
> 
> 时间：2013-02-16T11:28:43.740
> 
> 标签：javascript, switch-statement

我是 javascript 的 switch 语句的新手。

我有一个很大的列表项。每个项目都有自己的类。对于每个列表项，应该做其他事情。

我制作了这个开关代码：

```
$('.nav-main li').click(function() {
    var item = this;

    switch (item) {
    case '.menu-intro':
        alert("test");
        break;

    case '.menu-intro-second':
        alert("test2");
        break;
    }
}); 
```

但问题是：如何检查类名？当 nav-main li 项目具有类 'menu-intro' 时。那么一定会发生一些事情。当 li 项目具有类“menu-intro-second”时。必须发生另一件事。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:37:29.110

像这样使用它：

```
$('.nav-main li').click(function() {
    var item = this;

    switch ($(item).attr('class')) {
      // in case the the class of the element is only menu-intro
      case 'menu-intro':
        alert("test");
        break;
      // in case the the class of the element is only menu-intro-second
      // or in case the class is menu-intro-third
      case 'menu-intro-second':
      case 'menu-intro-third':
        alert("test3");
        break;
      // in case the the classes of the element is menu-intro and active
      case 'menu-intro active':
        alert("test4");
        break;
      // in all other cases...
      default:
        alert("default");
        break;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:35:38.610

只需这样做

```
 var item = this;
    switch($(item).attr('class')) {

    } 
```

# permissions - 谷歌脚本电子表格 - 拒绝使用修改功能的权限

> ID：14909763
> 
> 赞同：2
> 
> 时间：2013-02-16T11:30:06.913
> 
> 标签：permissions, google-apps-script, google-sheets

我是谷歌脚本实现的新手。我阅读了所有教程，以及从电子表格中获取值的所有函数，但用于修改的函数返回错误。每次我使用像 setvalue 这样的函数时，我都会收到消息“permission denied to use setvalue”。创建等也是一样的……

即使我从教程中复制粘贴。

例如，runExample 函数的这一部分返回给我一个权限错误。

```
for (var i = 0; i < departments.length; ++i) 
{
    var sheet = ss.getSheetByName(departments[i]) || ss.insertSheet(departments[i], ss.getSheets().length);
    sheet.clear();
    var headersRange = sheet.getRange(1, 1, 1, columnNames.length);
    headersRange.setValues([columnNames]);
    headersRange.setBackgroundColor(headerBackgroundColor);
    setRowsData(sheet, dataByDepartment[departments[i]]);
} 
```

我能做些什么？有什么地方可以设置权限吗？

谢谢你。伊曼纽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:53:01.827

消息是说您的脚本没有编辑电子表格的权限。要对这个问题进行排序，您可以：

1.  转到电子表格并单击“共享”按钮（在右上角）并将编辑权限授予运行脚本的人员。

2.  如果您不想授予其他人权限，您可以使用以下配置部署您的脚本： Execute App As: me (your_email@domain.com) 谁有权访问该 App：任何人

如果您不确定如何部署 Webb 应用程序，请按照本[教程进行操作](https://developers.google.com/apps-script/execution_web_apps)

# python - 摆脱列表python中的逗号

> ID：14909765
> 
> 赞同：0
> 
> 时间：2013-02-16T11:30:10.953
> 
> 标签：python, list

我有一个列表`[1,2,4,7,5,2]`，我想去掉逗号以使其成为`[1 2 4 7 5 2]` 可能，我该怎么做？

np.random.randint(0,4,12) 会像这样打印出来`[0 3 4 1 3 4 2 1 2 4 3 4]`，这就是我想要的东西:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:38:52.663

你可以这样做：

```
out = '[' + ' '.join(str(item) for item in numbers)+ ']'
print out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T11:40:21.150

```
In [7]: data = [1,2,4,7,5,2]
In [11]: '[{}]'.format(' '.join(map(str, data)))
Out[11]: '[1 2 4 7 5 2]' 
```

或者，

```
In [14]: str(data).replace(',','')
Out[14]: '[1 2 4 7 5 2]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:39:54.440

如果你想要一个 numpy ndarray，请使用：

```
np.array([1, 2, 4, 7, 5, 2]) 
```

# node.js - Mongoose：如何将 .where 与 $elemMatch 结合使用？

> ID：14909772
> 
> 赞同：0
> 
> 时间：2013-02-16T11:31:09.883
> 
> 标签：node.js, mongodb, mongoose

这是代码：

```
start = 0; end = 24
var updateQuery = schema.find({ account: accountID });
updateQuery.where( 'hour' ).gt( start ).lt( end );
updateQuery.exec( ... 
```

`hour`如果是一个数字，这很好用。实际上，它是一个数组，其中包含一个值和一个 updatedBy 键的对象： `[{ value: 23, updatedBy: 'o45h43o8' }, ...]`

现在，我想结合 where-query`$elemMatch`来找出 if`hour[0].value`是 between `start`and `end`。这是可行的吗？

更新：澄清了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:29:42.267

你不需要使用`$elemMatch`它，你可以使用这样的点符号来做到这一点：

```
updateQuery.where( 'hour.0.value' ).gt( start ).lt( end ); 
```

# c - 布尔 - 优化的布尔

> ID：14909774
> 
> 赞同：0
> 
> 时间：2013-02-16T11:31:18.193
> 
> 标签：c, gcc, cross-platform, boolean, visual-c++-6

传统上，C 直到 C99 才定义布尔值。因此，搜索头文件以了解创建布尔值的优化方法是：

```
Windows.h [Microsoft C++]
---------
typedef int                 BOOL;

//false
#ifndef FALSE
    #define FALSE               0
#endif

//true
#ifndef TRUE
   #define TRUE                1
#endif 
```

在 Tipo Booleano C 中定义

```
#if (__BORLANDC__ <= 0x460) || !defined(__cplusplus)
    typedef enum { false, true } bool;
#endif 
```

由 c-faq.com 第 9 节提供

```
typedef enum {false, true} bool; 
```

在 objc.h 中，布尔定义为：

```
typedef signed char     BOOL; 
// BOOL is explicitly signed so @encode(BOOL) == "c" rather than "C" 
// even if -funsigned-char is used.
#define OBJC_BOOL_DEFINED

#define YES             (BOOL)1
#define NO              (BOOL)0 
```

回答 stackoverflow.com 上的一些问题

```
typedef enum { False = 0, True = 1 } Bool;
#define bool Bool
#define true True
#define false False 
```

哪一种是最优化的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:36:59.623

如果您使用 C89，我将使用以下定义：

```
#define true 1
#define false 0
typedef unsigned char bool; 
```

出于内存原因，`_Bool`通常是 1 字节宽的类型。而在 C99`_Bool`中是无符号类型。

我个人不喜欢作为枚举的定义，`bool`因为枚举是实现定义的类型，而枚举常量始终是`int`.

现在，如果您希望速度胜过内存，您应该考虑使用与您的处理器字长相匹配的类型。

# math - 如何在php中计算星级系统的平均值

> ID：14909775
> 
> 赞同：0
> 
> 时间：2013-02-16T11:31:20.063
> 
> 标签：math

这是我的输入，我如何计算平均值？

```
5 star - 252
4 star - 124
3 star - 40
2 star - 29
1 star - 33

totally 478 
```

谁能告诉我。。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-16T11:37:31.173

```
(252*5 + 124*4 + 40*3 + 29*2 + 33*1) / (252 + 124 + 40 + 29 + 33) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T11:35:44.043

像在简单数学中一样简单地取平均值。

```
(252*5 + 124*4 + 40*3 + 29*2 + 33*1)/478 
```

# python - match.group(1) 中的 1 是什么意思？

> ID：14909777
> 
> 赞同：1
> 
> 时间：2013-02-16T11:31:20.843
> 
> 标签：python

我在这里遇到了代码：

```
>>> import urllib, re
>>> prefix = "http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing="
>>> findnothing = re.compile(r"nothing is (\d+)").search
>>> nothing = '12345'
>>> while True:
...     text = urllib.urlopen(prefix + nothing).read()
...     print text
...     match = findnothing(text)
...     if match:
...         nothing = match.group(1)
...         print "   going to", nothing
...     else:
...         break 
```

`1`in是什么`match.group(1)`意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T11:34:17.143

`1`in`match.group(1)`代表第一个带括号的子组。在你的情况下，第一个。

这在[官方文档](http://docs.python.org/2/)中有很好的描述，[**`re.MatchObject.group()`**](http://docs.python.org/2/library/re.html#re.MatchObject.group)并通过一个示例进行了最佳说明：

```
>>> m = re.match(r"(\w+) (\w+)", "Isaac Newton, physicist")
>>> m.group(0)       # The entire match
'Isaac Newton'
>>> m.group(1)       # The first parenthesized subgroup.
'Isaac'
>>> m.group(2)       # The second parenthesized subgroup.
'Newton'
>>> m.group(1, 2)    # Multiple arguments give us a tuple.
('Isaac', 'Newton') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T11:32:49.323

1 是表达式中组的编号（由括号对表示）。您的表达式只有一组，但想象匹配: will be , will be`"123 456"`并且始终是整个匹配项，因此.`r"(\d+) (\d+)"``group(1)``"123"``group(2)``"456"``group(0)``"123 456"`

# android - 列表视图不显示

> ID：14909779
> 
> 赞同：0
> 
> 时间：2013-02-16T11:31:26.920
> 
> 标签：android, listview

我正在使用 android 这是我的代码：

```
public void done(List<ParseObject> colList, ParseException e) {
       if (e == null) {
          dataList = new ArrayList<String>();   
          for(int counter = 0; counter < colList.size(); counter++)
          {
           String data =  colList.get(counter).getString("name");
           dataList.add(data);
          }
          listAdapter = new ArrayAdapter<String>(WardRobeActivity.this, 
                            android.R.layout.simple_list_item_1,dataList);
          ListView listview = (ListView)findViewById(R.id.listView);
          listview.setAdapter(listAdapter);
       } else {
          Log.d("score", "Error: " + e.getMessage());
       } 
```

我正在从云端获取数据。colList 有来自云的数据列表，我将它添加到 arrayList 然后将其设置为 listView 适配器我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:27:29.983

首先创建 listAdapter 并添加`data`.

```
[...]
listAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1);
ListView listview = (ListView)findViewById(R.id.listView);
listview.setAdapter(listAdapter);

public void done(List<ParseObject> objects, ParseException e) {
       if (e == null) {
           listAdapter.add(String.valueOf(colList.size())); //only a Test 
           for(int counter = 0; counter < colList.size(); counter++)
              {
                String data =  colList.get(counter).getString("name");
                if (data == "") 
                  {
                    listAdapter.add("no name");
                  } else {
                    listAdapter.add(data);
                  }
              }
       listAdapter.notifyDataSetChanged(); 
       [...] 
```

# security - AngularJS 和 Java Jersey Rest 之间的 CORS

> ID：14909788
> 
> 赞同：0
> 
> 时间：2013-02-16T11:32:20.953
> 
> 标签：security, rest, angularjs, jersey

我有一个使用 jersey rest 的 Java Web 应用程序，它部署在本地 tomcat 服务器上。此应用程序是在 eclipse IDE 中开发和测试的。

现在在 aptana IDE 中，我有一个 AngularJS 网络应用程序，它应该（使用 REST）连接到球衣网络应用程序。

我必须采取哪些步骤来建立连接？开箱即用，由于上下文不同，它没有运行。

我当前的 angularJS 调用：

```
WinesApp.factory('Wine', function ($resource) {
    return $resource('/WinesApp/rest/wines/:wineId', {}, {
        update: {method:'PUT'},
        query: {method:'GET', isArray:false}
    });
}); 
```

应该变成这样的东西：

```
WinesApp.factory('Wine', function ($resource) {
    return $resource('http://localhost:port/WinesApp/rest/wines/:wineId', {port:':8080'}, {
        update: {method:'PUT'},
        query: {method:'GET', isArray:false}
    });
}); 
```

问候马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:35:36.577

为了使 CORS 工作，您需要从服务器发送适当的标头：对于泽西岛，请参阅示例[Java/Jersey: A CORS-Compliant REST API](http://blog.kdecherf.com/2011/06/19/java-jersey-a-cors-compliant-rest-api/)。然后你只需像你写的那样从 JavaScript 调用它（虽然不是严格的 RESTful，但更容易限制你的 API 只使用 GET 和 POST 请求，没有 PUT 和 DELETE）。最后，`curl`命令行实用程序可以方便地测试服务器。

# java - NTLM v.2 身份验证与 AXIS2 1.4

> ID：14909792
> 
> 赞同：0
> 
> 时间：2013-02-16T11:32:58.670
> 
> 标签：java, axis2, ntlm, apache-commons-httpclient

我正在使用 AXIS2 (1.4.2) 和相关的通用 httpclient 3.1 创建 web 服务。现在我需要使用 NTLM v1&2 auth 创建 WebService。我在 AXIS2 的 jira ( [https://issues.apache.org/jira/browse/AXIS2-4318](https://issues.apache.org/jira/browse/AXIS2-4318) ) 上找到了一张票，但无法正确理解。我可以使用 axis2 1.4.2 和 http-client 4.0 进行 NTLM 身份验证吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T20:21:16.883

答案是不。新的 Axis2 1.7 将强烈依赖 HttpClient 4.0。要使用 NTLMv2 身份验证，您需要创建一个身份验证方案： [http ://devsac.blogspot.ru/2010/10/supoprt-for-ntlmv2-with-apache.html](http://devsac.blogspot.ru/2010/10/supoprt-for-ntlmv2-with-apache.html)

# glsl - 具有法线和颜色的简单直通几何着色器

> ID：14909796
> 
> 赞同：4
> 
> 时间：2013-02-16T11:33:19.050
> 
> 标签：glsl, geometry-shader

我编写了一个非常简单的直通几何着色器。我的输入原语是点，输出原语也是点。我还想通过几何着色器将颜色和法线从顶点着色器转发到片段着色器。着色器被完美地编译和链接，但最终的颜色非常奇怪。我认为这个转发有问题。谁能指出问题？这是我的着色器：

顶点着色器：

```
#version 330 compatibility

struct vData
{
    vec3 normal;
    vec4 color;
};

out vData vertex;

void main()
{
    vertex.normal = gl_NormalMatrix * gl_Normal;
    vertex.color = gl_Color;
    gl_Position = ftransform();
} 
```

几何着色器：

```
#version 330

layout (points) in;
layout (points) out;
layout (max_vertices = 1) out;

struct vData
{
    vec3 normal;
    vec4 color;
};

in vData vertices[];
out vData frag;

void main()
{
    int i;
    for(i = 0;i < gl_in.length();i++)
    {
        frag.normal = vertices[i].normal;
        frag.color = vertices[i].color;
        gl_Position = gl_in[i].gl_Position;
        EmitVertex();
    }
    EndPrimitive();
} 
```

片段着色器：

```
#version 330

struct vData
{
    vec3 normal;
    vec4 color;
};

in vData frag;

void main()
{
    gl_FragColor = frag.color;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T04:28:24.880

我想通了！输入/输出变量必须具有相同的名称，即`vertices[]`在几何着色器中应该是`vertex[]`. 而已！

我的改进和工作代码如下：

**顶点着色器：**

```
#version 330 compatibility

out vData
{
    vec3 normal;
    vec4 color;
}vertex;

void main()
{
    vertex.normal = normalize(gl_NormalMatrix * gl_Normal);
    vertex.color = gl_Color;
    gl_Position = ftransform();
} 
```

**几何着色器：**

```
#version 330

layout (points) in;
layout (points) out;
layout (max_vertices = 1) out;

in vData
{
    vec3 normal;
    vec4 color;
}vertices[];

out fData
{
    vec3 normal;
    vec4 color;
}frag;    

void main()
{
    int i;
    for(i = 0;i < gl_in.length();i++)// gl_in.length() = 1 though!
    {
        frag.normal = vertices[i].normal;
        frag.color = vertices[i].color;
        gl_Position = gl_in[i].gl_Position;
        EmitVertex();
    }
    EndPrimitive();
} 
```

**片段着色器：**

```
#version 330 compatibility

in fData
{
    vec3 normal;
    vec4 color;
};

void main()
{
    gl_FragColor = frag.color;
} 
```

快乐编码！

# javascript - 如何停止移动背景图像位置

> ID：14909799
> 
> 赞同：0
> 
> 时间：2013-02-16T11:33:36.037
> 
> 标签：javascript

我有背景图片，通过使用小的 javascript 代码，它从右向左移动。

HTML 代码

```
<div id="clouds_image"></div> 
```

Javascript代码

```
var g=0;
var speed=30;
function rollClouds() {
document.getElementById('clouds_image').style.backgroundPosition=g+'px 0';
g--;
scroller=setTimeout(function(){rollClouds()},speed);
}
window.addEventListener?
window.addEventListener('load',rollClouds,false):
window.attachEvent('onload',rollClouds); 
```

但我注意到，随着时间的推移，我的 PC CPU 内存使用量增加了！导致我的电脑过载，如果我禁用了那个javascript代码，它就会恢复正常。

**我的问题**

所以我想我需要修改这个 javascript 代码，让它**不能**永远工作，我的意思是，我想让它只重复那个动作 5 次然后停止，也许我需要定义值，`g`但我不擅长 javascript所以任何帮助〜谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:40:37.440

一个更干净的解决方案可能是使用 jQuery 来移动背景：

```
function moveClouds() {
    $("#clouds_image").css({left:"-2000px"});
    $("#clouds_image").animate({left:"2000px"},10000);
} 
```

然后您可以设置一个间隔以每 x 毫秒触发一次。

```
setInterval(moveClouds,10000) 
```

JSFiddle 在这里：http: [//jsfiddle.net/qXpVX/](http://jsfiddle.net/qXpVX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:46:16.940

您需要使用一个变量来计算该函数执行了多少次，并使用 setInterval 而不是 setTimeout：参见示例

[http://jsfiddle.net/EQDjx/206/](http://jsfiddle.net/EQDjx/206/) （我的计数器从 100 开始下降到 0）

为了获得更好的效果，我建议您使用 jquery。见动画功能 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
var g = 1000;
var speed=300;
var counter = 100;
function rollClouds() {
document.getElementById('clouds_image').style.backgroundPosition=g+'px 0';
g--;
if (counter < 1) clearInterval(interval);
}
interval = setInterval(function(){rollClouds()}, speed) 
```

# asp.net-mvc - asp.net mvc 和共享点

> ID：14909800
> 
> 赞同：2
> 
> 时间：2013-02-16T11:33:47.267
> 
> 标签：asp.net-mvc, sharepoint

我正在使用 asp.net mvc。我讨厌 asp.net 网络表单。Sharepoint 仅适用于 asp.net 网络表单。您是否有任何关于 Sharepoint 将在哪里使用 asp.net MVC 编写的版本的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:38:27.367

是的，看起来可以将两者放在一起[http://www.ilovesharepoint.com/2012/07/building-aspnet-mvc-based-sharepoint.html](http://www.ilovesharepoint.com/2012/07/building-aspnet-mvc-based-sharepoint.html)

# qt - 访问 QLabel 的文本时出现分段错误

> ID：14909809
> 
> 赞同：-1
> 
> 时间：2013-02-16T11:34:43.577
> 
> 标签：qt, qlabel

我遇到了 QLabel 的问题。我有一个 QtWidget，里面有一个 QLabel。现在我想用以下代码更改标签的文本：

```
QLabel* safetyLabel = this->findChild<QLabel *>("safety_bits");

safetyLabel->setText(QString("test"));
printf("%i", (safetyLabel->text()).length()); 
```

但我总是遇到“分段错误”。我认为这很简单，但我只是看不到它...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:58:37.340

如果您`safetyLabel`在`NULL`调用构造函数之前使用 QtCreators 的设计器来构建您的 UI 并执行您的代码，那么您`ui->setupUi(this);`可以`MainWindow`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T12:17:46.500

这是代码。

```
QLabel *safetyLabel = NULL;
safetyLabel = (QLabel *) this->findChild("safety_bits");
if(!safetyLabel)
{
    qDebug() << "Failed to find safety_bits label!";
    return 1;
}
safetyLabel->setText(QString("safety_bits is here")); 
```

# iphone - 如何在 ios5 的 UIViewController 中显示 UIView？

> ID：14909825
> 
> 赞同：1
> 
> 时间：2013-02-16T11:36:06.990
> 
> 标签：iphone, ios, uiview, uiviewcontroller

我有一个`UIView`设计的`XIB`文件。基本上带有一个导航栏和一个按钮来关闭`UIVIew`. 我想`UIView`在`UIViewControllers`整个应用程序中展示这个。下面是我到目前为止所使用的代码[emnted。**但是`UIView`没有出现**。

我`ViewControllers`的设计是在`storyboard`但是我需要一个简单的 UIView，这就是为什么我创建了一个新的 UIView 自定义子类以及一个同名的 xib 文件。文件的所有者也设置为自定义子类。这里还需要什么？

```
@interface BottomSlidingView : UIView   //this is my UIView
{

}

@implementation BottomSlidingView          

 - (id)initWithFrame:(CGRect)frame
 {
   self = [super initWithFrame:frame];
   if (self) {
   [self setUserInteractionEnabled:YES];
   NSLog(@"Bottom View Loaded");   //I get this log entry but the view doesn't showup.

}
    return self;
  }

- (BOOL)loadMyNibFile {
if (![[NSBundle mainBundle] loadNibNamed:@"BottomSlidingView" owner:self options:nil]) {
    return NO;
}
    return YES;
} 
```

这就是我`UIView`在`UIViewController`.

```
 -(void)shareButton:(UIBarButtonItem *)button
 {
   NSLog(@"share button clicked");
   BottomSlidingView *bsv = [[BottomSlidingView alloc] initWithFrame:CGRectMake(20, 480, 280, 420)];
   [bsv loadMyNibFile];
   [self.view insertSubview:bsv belowSubview:self.optionsToolBar]; //this toolbar is a subview that I am adding to this view controller.

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:25:15.373

我发现您的方法存在一些问题：

1.  从 nib 文件创建视图实例，而不是使用`initWithFrame:`. 例如（如果自定义视图是 nib 文件中唯一的根级对象）：

    ```
    + (instancetype)bottomSlidingView
    {
        return [[[UINib nibWithNibName:@"BottomSlidingView" bundle:nil] instantiateWithOwner:nil options:nil] lastObject];
    } 
    ```

2.  在子类中实现[awakeFromNib](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSObject_UIKitAdditions/Introduction/Introduction.html)或[initWithCoder:](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSCoding/initWithCoder%3a)而不是`initWithFrame:`（从 nib 加载时不调用）`UIView`。

在您的视图控制器中，您将使用类似以下内容来创建视图：

```
- (void)shareButtonPressed:(id)sender
{
    BottomSlidingView *slidingView = [BottomSlidingView bottomSlidingView];
    [slidingView setFrame:CGRectMake(20, 480, 280, 420)];
    [[self view] insertSubview:slidingView belowSubview:[self optionsToolBar]];
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:31:14.390

你想在另一个视图控制器中重用 UIViewController 的 UIView 时，你需要使用它......

```
YourViewController * child = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];//View controller of view , you want to reuse
[self.view addSubView:child.YourView]; //YourView = Name of view, you want to reuse
[self addChildViewController:child];
[child release]; 
```

添加 childViewController 后，所有 IBActions 都将在 child 中工作。

删除此视图后，您必须从 parentViewController 中删除 YourViewController 否则会出现内存问题.......

# bash - 直接从 curl 执行二进制文件

> ID：14909827
> 
> 赞同：9
> 
> 时间：2013-02-16T11:36:10.517
> 
> 标签：bash, curl, binary, executable

是否有执行二进制“流”的 bash 命令？有一种直接从 Internet 加载和运行 shell 脚本的好方法。

例如：

```
curl http://j.mp/spf13-vim3 -L -o - | sh 
```

是否可以在不保存文件、chmod 等的情况下运行二进制文件？

就像是：

```
curl http://example.com/compiled_file | exec_binary 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T11:46:58.920

我知道的 Unix 内核期望二进制可执行文件存储在磁盘上。这是必需的，因此他们可以对任意偏移执行查找操作，并将文件内容映射到内存中。因此，直接从标准输入执行二进制流是不可能的。

您可以做的最好的事情是编写一个脚本，通过将数据保存到一个临时文件中来间接完成您想要的事情。

```
#!/bin/sh

# Arrange for the temporary file to be deleted when the script terminates
trap 'rm -f "/tmp/exec.$$"' 0
trap 'exit $?' 1 2 3 15

# Create temporary file from the standard input
cat >/tmp/exec.$$

# Make the temporary file executable
chmod +x /tmp/exec.$$

# Execute the temporary file
/tmp/exec.$$ 
```

# java - Android：无法从另一个类访问公共静态函数或公共变量

> ID：14909835
> 
> 赞同：0
> 
> 时间：2013-02-16T11:36:53.480
> 
> 标签：java, android, broadcastreceiver

这是“MainActivity.java”中的声明

```
private static String competition = null; 
```

我创建了一个 setter 函数来增加它的价值。

```
public static void setCompetition(String competition1) {
    competition = competition1;
} 
```

我创建了一个 getter 函数来从同一个包中获取另一个类中的值：

```
public static String getCompetition() {
    return competition;
} 
```

但是它返回null。

这是我尝试在函数 public void onReceive(Context context, Intent intent) {

在扩展 BroadcastReceiver 的类 AlarmNotify 中：

```
 final String competition = MainActivity.getCompetition(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T03:47:58.023

这是我犯的错误：我正在调用基于网络的异步任务，这需要几秒钟来检索数据。它在后台工作。

我正在调用另一个试图访问这些值的函数。甚至在异步任务运行之前，它就被立即触发了。这就是它返回 null 的原因。

异步任务没有返回这些值。

最终，我将调用放在异步的 postExecute 方法中的另一个函数。

希望对和我犯同样错误的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:43:48.903

我认为您没有`setCompetition`在任何地方调用。要验证这一点，请尝试使用这段代码 -

```
public static void setCompetition(String competition1) {
    System.out.println("Set competition to "+competition1);
    competition = competition1;
} 
```

如果您没有看到任何打印的消息，则`setCompetition`没有被调用。确保正在调用它。

# javascript - 使用 excel activeX 保存而不是另存为

> ID：14909840
> 
> 赞同：0
> 
> 时间：2013-02-16T11:37:21.373
> 
> 标签：javascript, excel, activex

我正在使用`javascript`and`activeX`来保存和编辑 Excel 文档的数据。到目前为止一切正常。但现在我想编写一个新版本，我可以在其中更新特定单元格并将其他单元格保留在原处。

这是我正在使用的代码：

```
function Write() {
    var Excel, Book; // Declare the variables
    Excel = new ActiveXObject("Excel.Application"); // Create the Excel application object.
    Excel.Visible = false; // Make Excel invisible.
    Book = Excel.Workbooks.Add() // Create a new work book.

    Book.ActiveSheet.Cells(1,1).Value = document.A1.value;

    Book.SaveAs("G:/whiteboard.xls");  
    Excel.Quit(); // Close Excel with the Quit method on the Application object.
    alert("Uppgifter sparade");
   } 
```

我想保存，而不是 saveAs。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-14T10:49:51.090

以防有人还在寻找这个。用于`excelObj.ActiveWorkbook.Save();`保存 Excel 文件。这是一个例子。

```
function saveExcel() {

  var excel = new ActiveXObject("Excel.Application");  
  excel.Visible = false;
  var fso = new ActiveXObject("Scripting.FileSystemObject");

  var path = "file:\\\\C:\\Users\\User\\Desktop\\TestFile.xls";
  var excel_file = excel.Workbooks.Open(path); 
  var excel_sheet = excel_file.Worksheets(1); 

  //Editing all cells from Row 6 to 10 and Column 1 to 5
  for (var row = 6; row <=10; row++) {
    for (var col = 1; col <=5 ; col++) {
        excel_sheet.Cells(row,col).Value = "Setting New Cell Data"; 
      };
  };
  //Save Excel    
  excel.ActiveWorkbook.Save();

  alert("Excel Saved!");
  //showing excel are editing is done.
  excel.Visible = true;
  excel = null;
  excel_file = null;

}; 
```

# yii-extensions - 将表单数据提交到外部站点 YII

> ID：14909846
> 
> 赞同：0
> 
> 时间：2013-02-16T11:38:16.017
> 
> 标签：yii-extensions, yii, yii-components, yii-events

我是 YII 的新手，才 2 周，我已经掌握了它，但我必须做一个集成，其中包括将表单数据提交到一个内部站点，以及将所述数据保存在我的数据库中，之后我我会自动重定向到上述站点，在执行一些操作后，它们会发回一些数据，这些数据也应该显示并保存在我的数据库中。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:25:01.733

远程请求需要 cURL：[http](http://www.php.net/manual/en/curl.examples-basic.php) ://www.php.net/manual/en/curl.examples-basic.php 。Yii 默认没有这个功能，但是你可以为它创建一个组件，它使用 cURL 向远程站点发出一个 post 请求。

根据返回数据的格式，您需要对其进行解码/反序列化。您可以创建[CDbCommand](http://www.yiiframework.com/doc/api/1.1/CDbCommand)将其直接存储到数据库中，或者将值分配给 Active Record 模型并将其存储到数据库中。

# c# - SortedDictionary 是红黑树吗？

> ID：14909853
> 
> 赞同：17
> 
> 时间：2013-02-16T11:39:15.707
> 
> 标签：c#, .net, binary-tree, sorteddictionary

我在互联网上看到了一些关于此的引用，但没有官方文档？谁能告诉我在哪里可以得到这方面的信息？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-16T12:47:25.190

这不应该被记录，因为它是一个**实现细节**。

例如，有不止一种实现`SortedDictionary`：有微软的，也有 Mono 的实现。

事实上，Mono 实现在其当前版本 (2.10.9) 中确实使用了红黑树。当前的 .NET 版本也是如此（您可以通过反编译代码来发现这一点，例如使用*Reflector或**MonoDevelop*`ildasm.exe`中的内置 IL 查看器）。

 *但是，这*可能*会在未来发生变化，因为[实际上有更有效的实现](http://google-opensource.blogspot.co.uk/2013/01/c-containers-that-save-memory-and-time.html)（如[B 树](http://en.wikipedia.org/wiki/B_tree)）。

所以，再说一遍：这个信息没有用，它是一个实现细节，它*很可能*会改变。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T11:45:11.383

这是**[`MSDN`](http://msdn.microsoft.com/en-us/library/f7fta44c%28v=vs.80%29.aspx)**页面上的官方文档；

> SortedDictionary 泛型类是具有 O(log n) 检索的二叉搜索树，其中 n 是字典中的元素数

* * *

> SortedDictionery 是红黑树吗？

*好吧*，我不太熟悉，[`red-black tree`](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)但我只是用（免费）反编译`SortedDictionary`了类，[`dotPeek`](http://www.jetbrains.com/decompiler/)但红黑树的删除算法和 SortedDictionary 的 Remove() 方法的代码似乎并不相似。所以，我的钱是用于**No**。

`SortedDictionary`始终保持其键排序。它使您可以避免自己对键进行排序。它的查找性能比`Dictionary`. 如果您需要在内存中排序查找表，它具有优势。

![在此处输入图像描述](../Images/aebc22e114276f1fceb8450d1682b9e4.png)

```
Dictionary lookup time:       Close to O(1)
SortedDictionary lookup time: O(log n) 
```

从 中查看更多详细信息**[`here`](http://www.dotnetperls.com/sorteddictionary)**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-23T17:24:27.383

文档似乎确实保证了从 BST 检索的 O(log n)。如果他们针对可能的树报告“平均”，那么即使是非平衡实现也可以声称这一点。即使这是一个更坏的情况保证，这与作为 BST 一起也不足以说明它是否被实现为红黑树而不诉诸反编译。它也可以是 AVL、splay 或其他一些平衡变体。

我拔出了点窥视。在 4.0.0.0 系统组件上。OrderedDictionary 使用 Treeset，它是 SortedSet 的子类。这看起来很可能是一棵红黑树。但是，它并不是典型的例子，类似于网络上的许多例子，这些例子实现了插入或删除后的平衡。该实现主要是迭代的，并且插入似乎在向下而不是在插入之后修复颜色（自上而下 - 有几篇关于这种方法的论文）。删除时出现了类似的情况，但没有时间验证它。当然不是直接可比的东西。

至少，我的猜测是它应该具有类似的运行时特性。当它到达插入/删除点时，它并没有做太多事情，因为这一切都是在下降的过程中完成的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T11:41:24.670

从其 MSDN 页面：

> SortedDictionary 泛型类是具有 O(log n) 检索的二叉搜索树，其中 n 是字典中的元素数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T11:42:16.970

您可以对其进行反编译（例如使用 Reflector）...但是因为这是一个“实现细节”，我不会依赖它，它可以随时通过任何更新进行更改。

不确定这样的实现细节有多相关，但如果你真的需要一棵红黑树，那么明确地实现它......其他任何事情都是“技术债务”/“等待发生的灾难”恕我直言。*

# iphone - 当推送通知进入目标c时，如何在没有用户交互的情况下将iphone应用程序从后台带到前台？

> ID：14909856
> 
> 赞同：0
> 
> 时间：2013-02-16T11:39:20.490
> 
> 标签：iphone, ios, objective-c, xcode, push-notification

请建议我客观的 ​​c 代码，以便在推送通知到来时将应用程序从后台带到前台，而无需任何用户交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:04:39.490

不幸的是，这是不可能的，因为通知来了，即使没有用户交互，您的应用程序也会自动启动。

随着推送通知的到来，它由操作系统处理。

如果在应用程序未运行时收到应用程序的通知，则设备会提醒用户该应用程序有数据等待它。

那么这意味着用户必须与设备交互。

来自苹果文档。

`When the operating system delivers push notification (iOS or OS X) and the target application is not running in the foreground, it presents the notification (alert, icon badge number, sound). If there is a notification alert and the user taps or clicks the action button (or moves the action slider), the application launches and calls a method to pass in the local-notification object or remote-notification payload. If the application is running in the foreground when the notification is delivered, the application delegate receives a local or push notification.`

就这样。

我希望它清楚你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:53:38.263

我不认为它可能。一旦推送通知到来，操作系统本身会处理并显示通知，如果它为您的应用程序启用。然后从通知中，如果您要访问应用程序，则会触发 didReceiveRemotenotification 回调。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:53:58.967

这是可能的，但需要越狱的 iPhone 并挂钩推送通知接收器以在收到通知时启动您的应用程序。

如果你的目标是 App Store，你就做不到。

# c# - MS.Internal.WrappedException 在 .itemsSource

> ID：14909860
> 
> 赞同：0
> 
> 时间：2013-02-16T11:39:55.037
> 
> 标签：c#, xaml, windows-phone-8

我正在尝试使用枢轴查看图像。
但是当我运行代码时，调试器会在这一行中断：

```
MainViewer.ItemsSource = QueueingImages; 
```

并抛出了这个奇怪的异常：

```
An exception of type 'MS.Internal.WrappedException' occurred in System.Windows.ni.dll and wasn't handled before a managed/native boundary 
```

这是我使用的 xaml：

```
<phone:Pivot Grid.Row="1" Name="MainViewer">
    <phone:Pivot.HeaderTemplate>
        <DataTemplate>
            <TextBlock Text="" FontSize="0" />
        </DataTemplate>
    </phone:Pivot.HeaderTemplate>
    <phone:Pivot.ItemTemplate>
        <DataTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="10" />
                    </Grid.RowDefinitions>
                    <Image Source="{Binding IMGSource}" Stretch="Uniform" Grid.Row="0">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener Flick="{Binding ImageFlick}"
                                                 DragDelta="{Binding ImagePan}"
                                                 PinchDelta="{Binding ImageZoom}"
                                                 Tap="{Binding ImageTap}"
                                                 DoubleTap="{Binding ImageDoubleTap}"
                                                 />
                        </toolkit:GestureService.GestureListener>
                    </Image>
                    <ProgressBar Grid.Row="1" Value="{Binding DownloadPercentage}" Maximum="100" Minimum="0" SmallChange="1" Visibility="{Binding IsCompleted}"/>
                </Grid>
        </DataTemplate>
    </phone:Pivot.ItemTemplate>
</phone:Pivot> 
```

“排队图像”是：

```
private ObservableCollection<ImageView> QueueingImages 
```

这是 ImageView 类：

```
class ImageView
{

    public ImageView(String id)
    {
        Id = id;
    }

    public String Id { get; private set; }
    public ImageSource IMGSource { get; private set; }
    public int DownloadPercentage { get; set; }
    public Visibility IsCompleted { get; set; }

    public event EventHandler Flicked;

    /*
    Flick="{Binding ImageFlick}"
    DragDelta="{Binding ImagePan}"
    PinchDelta="{Binding ImageZoom}"
    Tap="{Binding ImageTap}"
    DoubleTap="{Binding ImageDoubleTap}"
    */

    public void SetSource(System.IO.Stream s)
    {
        BitmapImage bi = new BitmapImage();
        bi.SetSource(s);
        IMGSource = bi;
    }

    public void ProgressHandler(object sender, DownloadProgressChangedEventArgs e)
    {
        DownloadPercentage = e.ProgressPercentage;
    }

    /////// Image Controls
    public void ImageFlick(object sender, FlickGestureEventArgs e)
    {
        // Pass out Event
        if (Flicked != null)
            Flicked(sender, e);
    }

    public void ImagePan(object sender, DragDeltaGestureEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Panning");
    }

    public void ImageZoom(object sender, PinchGestureEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Zooming");
    }

    public void ImageTap(object sender, GestureEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Tapped");
    }

    public void ImageDoubleTap(object sender, GestureEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Double Tapped");
    }

} 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:51:41.877

好吧，我想通了。
该错误是由以下代码引起的。

```
<toolkit:GestureService.GestureListener>
     <toolkit:GestureListener Flick="{Binding ImageFlick}"
         DragDelta="{Binding ImagePan}"
         PinchDelta="{Binding ImageZoom}"
         Tap="{Binding ImageTap}"
         DoubleTap="{Binding ImageDoubleTap}"
     />
</toolkit:GestureService.GestureListener> 
```

看来我不能在`toolkit:GestureListener`.
我删除了绑定，一切正常:)

# php - htaccess修改后出现codeigniter的index.php

> ID：14909867
> 
> 赞同：0
> 
> 时间：2013-02-16T11:40:36.910
> 
> 标签：php, codeigniter

所以事情是这样的，我已经完成了关于 CI 的教程，我已经在 .htaccess 中进行了一些修改以删除 URL 中的 index.php，在这种情况下，查看记录时 index.php 不会出现，但是当我尝试创建一个新记录，index.php 突然出现，我很困惑它为什么会出现，我已经对 .htaccess 做了一些这样的事情，

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

这里有一些屏幕截图，

**查看记录：** ![在此处输入图像描述](../Images/a51c3cc69fdf4129f9cba7d104d63893.png)

**创建新记录：** ![在此处输入图像描述](../Images/d4b28a593ce93d3fb1cb33a60b0c7b8c.png)

**创建后：** ![在此处输入图像描述](../Images/2a09664ad72c4f3e3ea0d57ea5df733d.png)

我对 index.php 突然出现的原因感到困惑，我已经对 .htaccess 进行了一些更改。我错过了什么吗？请分享您的意见

**编辑** 我只是按照他们要求我在他们的用户指南上做的事情。

## 创建新闻项目

```
<?php echo validation_errors(); ?>

<?php echo form_open('sample_controller/sample_create') ?>

    <label for="title">Title</label> 
    <input type="input" name="title" /><br />

    <label for="text">Text</label>  <textarea name="text"></textarea><br/>
    <input type="submit" name="submit" value="Create news item" /> 

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:50:24.287

更改`sample_controller/sample_create`为`/sample_controller/sample_create`

## 更新：

或@cballou 回答更新配置将首先避免该问题。

（在 config/config.php 中设置`$config['index_page'] = ''`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:47:17.507

尝试`RewriteRule ^(.*)$ index.php?/$1 [PT,L]`代替

`RewriteRule .* index.php/$0 [PT,L]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:48:41.197

我认为表单操作属性包含 index.php 段。Htaccess 还不够，还要编辑您的 CodeIgniter 配置文件以删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T11:48:59.917

CodeIgniter 还要求您还对`config/config.php`文件进行调整以删除默认的 URL 后缀`index.php`。在讨论 .htaccess 时，他们的指南中并未将其作为必需品进行高度提及。

[请参阅此处的文档](http://ellislab.com/codeigniter/user-guide/general/urls.html)。

# ios - MapBox 示例引发错误 - mbtiles

> ID：14909869
> 
> 赞同：0
> 
> 时间：2013-02-16T11:40:38.000
> 
> 标签：ios, map, offline, mapbox

我正在使用 MapBox 示例，并且我已经导入了自己的 mbtiles 文件。我收到此错误：“MB Example[8517:c07] *** 由于未捕获的异常 'NSInvalidArgumentException' 而终止应用程序，原因：'*** -[NSURL initFileURLWithPath:]: nil string parameter'。默认的 mbtiles 文件工作正常。什么我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T22:31:28.267

您可能没有正确地将 MBTiles 文件与您的应用程序捆绑在一起。确保它已添加到您的应用程序目标，并且是*Copy Bundle Resources*构建阶段的一部分，以便将其复制到应用程序中。比较默认值作为参考。

# javascript - CSS 过渡 - 在固定和绝对定位之间切换

> ID：14909870
> 
> 赞同：0
> 
> 时间：2013-02-16T11:40:38.293
> 
> 标签：javascript, jquery, css, css-transitions, transition

我会试着解释一个让我难过的大问题。

基本上，我有一个在绝对定位（靠近页面顶部时）和固定定位（向下滚动页面时到窗口顶部）之间的#menu。我正在使用 jquery 来完成此操作。

当它得到修复时，我给它一个“.fixed”类。这给了它“顶部：0px；位置：相对；”。#menu 有一个过渡，但 #menu.fixed 删除了过渡。这在开始时效果很好，向下滚动然后将其附加到窗口顶部时。切换位置是完美的，因为新类删除了转换。

但是，当我向上滚动并删除“.fixed”类时，它会将（现在）绝对定位的#menu 从 0px 设置为 615px。这意味着它会跳到页面顶部，然后向下滚动，因为它不再固定。

这是代码：

```
$('#menu').css({ top: '615px'}); // top was 0px before this. It is still fixed, so it should NOT animated.
$('#menu').removeClass('fixed'); // Now the transition kicks in
//As it's at 615px, it should stay where it is, not start animating to 615px from 0px as it does. 
```

我认为这是因为在“.fixed”类被删除时元素实际上并没有被重新定位，因此它会随着它的新定位而动画化......我可以做一个间隔或类似的事情来触发这个类删除，但它看起来很傻。

我也知道我可以让它定位：绝对一直。当我滚动时，只需重新定位最高值。但这似乎是多余的...

有谁知道如何解决我的问题？

# android - 在 viewpager 的片段中显示地图

> ID：14909873
> 
> 赞同：0
> 
> 时间：2013-02-16T11:40:52.930
> 
> 标签：android

我想在其中一个片段中显示地图，`Fragment`我正在使用 4 个片段，其中一个片段显示地图，但我不想用来`LocalActivityManager`在片段中托管 Activity。这是一个已弃用的类，但它提供了最简单的解决方案。

通过使用`MapActivity`它正在开始一个新的`Activity`，我不想在其中显示它`viewpager`并且`MapView`不工作`Fragment`。请建议我如何获得它。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:54:45.613

由于[Maps V1（`MapActivity`和 kin）已弃用](https://developers.google.com/maps/documentation/android/v1/mapkey)，您可以考虑迁移到[新的 Maps V2](https://developers.google.com/maps/documentation/android/)，它具有`MapFragment`（用于原生 API 级别 11 片段）和`SupportMapFragment`（用于 Android 支持库的片段的反向移植）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:57:22.823

我没有找到其他方法，然后是以下方式中提到的方法......

[https://stackoverflow.com/a/8126287](https://stackoverflow.com/a/8126287)

# java - 为什么在 Java 7 中使用菱形运算符进行类型推断？

> ID：14909875
> 
> 赞同：13
> 
> 时间：2013-02-16T11:40:59.917
> 
> 标签：java, java-7, type-inference, diamond-operator

`List<String> list = new ArrayList();`将导致编译器警告。

但是，以下示例编译时没有任何警告：`List<String> list = new ArrayList<>();`

我很好奇为什么需要引入钻石运算符。如果类型参数不存在，为什么不只对构造函数进行类型推断（因为它已经为 java 中的静态方法完成并被 google guava 等集合库利用）

***编辑***：使用毫驼答案作为起点，我查看了实际上是什么类型的擦除，而不仅仅是删除所有类型信息。编译器实际上做了更多（从[官方文档](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)复制）：

*   如果类型参数是无界的，则将泛型类型中的所有类型参数替换为其边界或 Object。因此，生成的字节码只包含普通的类、接口和方法。
*   必要时插入类型转换以保持类型安全。
*   生成桥方法以保留扩展泛型类型中的多态性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T11:46:57.460

Java 开发人员非常努力地避免改变现有程序的行为。`List<String> list = new ArrayList();`确实编译，并创建一个原始的 ArrayList。如果对其应用类型推断，结果将是`ArrayList<String>`，改变其行为并可能导致程序中其他地方的运行时错误。

==================================================== ===========================

经过进一步考虑和@millimoose 的评论，我发现行为的变化将是初始化程序的本地更改，并在编译时检测到。考虑以下程序：

```
import java.util.ArrayList;
import java.util.List;

public class Test {
  public static void main(String[] args) throws Exception {
    List<Integer> integers = new ArrayList<Integer>();
    integers.add(Integer.valueOf(3));
    integers.add(Integer.valueOf(4));
    List<String> list = new ArrayList(integers);
    System.out.println(list);
  }
} 
```

没有类型推断，它会运行并打印，尽管包含 Integer 引用`[3, 4]`的 a 存在不良情况。`List<String>`

`ArrayList(Collection<? extends E> c)`使用类型推断，它不会编译，因为`List<Integer>`在创建`ArrayList<String>`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T11:48:36.763

明确的答案必须来自设计该功能的人，但我假设这是为了将其与使用原始类型区分开来，这使得编译器为了兼容性而完全不同。带有原始类型的表达式的处理方式与涉及泛型的表达式的处理方式[略有](https://stackoverflow.com/questions/14882003/generic-screws-up-non-related-collection)*不同*，在这个 SO 问题中可以找到一个示例：

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T11:47:05.697

java 5 和 6 的编译器所需的完整语法是：

`List<String> list = new ArrayList<String>();`

他们决定为我们简化语法，并允许不要在赋值运算符的两侧编写相同的类型参数。但是，`<>`仍然需要操作员确保您了解自己在做什么。通过写`new ArrayList<>()`你说“我知道我正在创建泛型类型的实例，并且泛型参数是我在赋值左侧声明的参数。”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-16T11:46:24.917

这是Java 7 中对[Java 泛型](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)
的改进的一部分。 在您必须编写之前

```
final List<String> list = new ArrayList<String>(); 
```

现在你可以写

```
final List<String> list = new ArrayList<>(); 
```

这是等效的-编译器将为您解决。这不一样

```
final List list = new ArrayList(); 
```

这是一个无类型的`List`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-24T09:33:29.063

有趣的情况是使用菱形调用构造函数并作为 rawtype**成功编译**但产生不同的代码。当与方法重载特性混合时，这样的例子是可能的。IIRC，在 OpenJDK 硬币邮件列表的某处有一个示例（不，我不会尝试找到它）。

完全相同的代码在 Java SE 6 和 Java SE 7 上成功运行但产生不同的结果是不可接受的。

为了我的钱，如果在 7 中选择的推理算法会产生不同的代码（与 J2SE 5.0 中的方法泛型类型推理基本相同），我会省略菱形并给出警告（视为错误）。如果您编写了这样的代码，那么确定它是否可编译可能并不明显。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-03T10:20:09.350

如果您的项目是在 maven 上构建的，请在 pom.xml 的 tag 下添加以下内容。它完美地工作.. `<plugins>` `<plugin>` `<groupId>org.apache.maven.plugins</groupId>` `<artifactId>maven-compiler-plugin</artifactId>` `<version>3.7.0</version>` `<configuration>` `<source>1.8</source>` `<target>1.8</target>` `</configuration>` `</plugin>` `</plugins>`

# c - 以编程方式或来自 procfs 的 netstat 进程名称信息

> ID：14909876
> 
> 赞同：1
> 
> 时间：2013-02-16T11:41:04.363
> 
> 标签：c, linux, network-programming

我需要获取特定程序正在侦听的所有端口号。该程序本身是一个通用的服务器类型程序（让我们称之为`myserverd`）。可以配置为侦听任何 TCP 端口，并且可以在一台机器上运行`myserverd`多个实例。`myserverd`

`myserverd`我可以通过`grep`'ing for `myserverd`in `netstat -natp`(`p`显示程序名称的选项`netstat`) 运行实例来获取正在使用的端口

我试图在 procfs ( `/proc/net/tcp`) 中查看此信息，但它没有显示任何进程名称...我的问题是：是否有一个好的/可靠的 API 可用于以编程方式确定哪些进程正在侦听特定端口（或将所有进程名称绑定到所有侦听端口）...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:30:31.483

您可以在此处找到 netstat 的源代码：[https](https://github.com/mirror/busybox/blob/master/networking/netstat.c) ://github.com/mirror/busybox/blob/master/networking/netstat.c 。如果您仔细查看，您应该会看到 netstat 如何获取绑定进程的 pids/名称。

具体来说，看一下`prg_cache_load()`函数，`netstat`就像民意调查一样`/proc/net/tcp`。

# schema.org - 是否有用于在 HTML 中描述测试问题的模式？

> ID：14909884
> 
> 赞同：1
> 
> 时间：2013-02-16T11:41:58.403
> 
> 标签：schema.org

我正在建立一个网站，让用户进行练习测试，我想知道......是否有一些模式来定义问题和答案，这将使搜索引擎更容易理解我的内容。

我正在尽一切可能使网站在搜索引擎中排名靠前，我被告知架构是一个很好的方法。

我查看了 schema.org 上的那些，但找不到类似的东西。还有其他我可以使用的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T12:56:25.530

我认为最接近的类型是[`Question`](http://schema.org/Question)and [`Answer`](http://schema.org/Answer)。虽然它们可能主要用于问答网站（如 Stack Overflow）或常见问题解答，但它们的描述似乎并未排除测验。

您可以使用该[`suggestedAnswer`属性](http://schema.org/suggestedAnswer)将问题链接到每个可能的答案。

# javascript - 如何通过 jQuery 或 JavaScript 中的选中复选框获取数组？

> ID：14909885
> 
> 赞同：-2
> 
> 时间：2013-02-16T11:42:01.240
> 
> 标签：javascript, ajax, jquery, cakephp

我想获取用户选择的复选框数组，例如，如果用户选择 product1 并且在 product1 中，电子邮件是 a@acom 这样的，如果用户选择了许多复选框，我想要他针对产品选择的数组中的所有电子邮件数据。数据将代表 id，我被困在这里，努力解决该问题 2 天但没有成功：

```
 <?php v_start($this);?>
    <style>
    .highlight{ font-wieght:bold;   color:#F00;}
    .amounts{}
    .tick{ float:left; margin-top:-5px;}    
    .highlight .amount{ display : inline;}
    .tick img{  display:none;   width   : 25px; height  : 25px; margin-right: 10px; float   : left;}
    .highlight .tick img{   display : block;}
    </style>

    <script>
    jQuery(document).ready(function (){

        jQuery('.amounts').click(function (){
            var pname = jQuery(this).attr('product_name');
            if(!jQuery(this).hasClass('highlight')){
                jQuery('.amount-'+pname).removeClass('highlight');
                jQuery(this).addClass('highlight');
            }
            else {
                jQuery(this).removeClass('highlight');
                }           
        });

    });
    </script>
    <h1><?php echo __l('Step 1 ')?>-> <span style="color:red"><?php echo __l('Step 2')?></span></h1>

    <?php echo $this->FormManager->create('User',array_merge($form_options,array('default'=>true)));?>

        <table>
            <thead>
                <tr cellpadding="0" cellspacing="0" width="100%" >
                    <?php    foreach($name as $product) { foreach ($product as $key) { 
         for($i=0;$i<sizeof($key['ProductPlan']);$i++) {
                        ?>
                    <th>
                        <?php echo $key['Product']['name']?>
                        <?php echo $this->FormManager->input($key['Product']['name'],array('type'=>'hidden','id'=>$key['Product']['name'],'class'=>'hid'))?> 
                    </th>
                    <?php  }}?>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <?php 
                        foreach($name as $product) {
                            $c = 0;
                    ?>

                        <?php 
                            foreach ($product as $key) {
                                $c++;
                        ?>
                            <td>
                          <?                                                                                                        for($i=0;$i<sizeof($key['ProductPlan']);$i++)    { ?>
                                <div 
                                     class   = 'packages'
                                     id      = "<?php echo $key['Product']['name'],$key['ProductPlan'][$i]['product_plan_id']?>" 
                                     onclick = "document.getElementById('<?php echo $key['Product']['name']?>').value='<?php echo $key['ProductPlan'][$i]['product_plan_id']?>';"
                                >

                                    <div product_name='<?php echo $key['Product']['slug']?>' class='amounts amount-<?php echo $key['Product']['slug']?>'>
                                        <div class='tick'>
                                            <?php echo $this->Html->image('tick.png', array('width'=>'25', 'height'=>'25'));?>
                                        </div>

                                        <div class='amount'>
                                            <?php echo $key['ProductPlan'][$i]['name'];?> 
                                            </br></br>
                                        </div>
                                        <div>Create Up To:<?php echo $key['ProductPlan'][$i]['limit'];?></div></br>
                                        <div>Product Plan Amount:<?php echo $key['ProductPlan'][$i]['product_plan_amount'];?>.$</div></br>
                                    </div>
                                </div>
                                <?php }?>

                        <?php } ?>
                    <?php } ?>

                            </td>
                </tr>
<tr>        
</tr>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:52:48.913

如果您可以提供 HTML 输出而不是 PHP 源，它将更容易为您提供帮助。

如果您想定位所有选中的复选框，也许还有它们的相关电子邮件输入字段，您可以使用如下内容：

```
var email_arr = new Array();
$('input:checkbox:checked').each(function() { //goes through each checked input box
    email_arr.push($(this).siblings("input.email").val()); //Gets the value of an email input field
}); 
```

重要的是如何放置电子邮件输入字段。如果它与复选框不在同一个元素中，您可能需要使用 .parent 或 .parents 遍历一个或两个节点。

希望有帮助，

//翻筋斗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:00:32.507

我不确定我是否理解您的要求，这个解决方案有帮助吗？

[http://jsfiddle.net/rG6bF/1/](http://jsfiddle.net/rG6bF/1/)

```
$(":checkbox").click(function(e) {
    $.each($(":checked"),function(idx,chkbox) {
        log($(chkbox).attr('id'));
    });
}); 
```

# android - android textview如何在按住时编码

> ID：14909892
> 
> 赞同：0
> 
> 时间：2013-02-16T11:42:23.527
> 
> 标签：android, textview

我有一个带有图像的文本视图，我想更改该图像，只要用户按住文本视图并且当他完成单击时我想返回旧图像，请问如何？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rl_simple_list_item_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
    android:focusable="true"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_food_profile_favorite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="50dip"
        android:drawableTop="@drawable/favorite"
        android:text="@string/favorite"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/tv_food_profile_addToBasket"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="50dip"
        android:drawableTop="@drawable/add_to_basket"
        android:text="@string/tv_addToBasket"
        android:textColor="#000000" />

</RelativeLayout> 
```

### 爪哇

```
TextView tv_addToBasket;
tv_addToBasket = (TextView)findViewById(R.id.tv_food_profile_addToBasket); 
```

### 笔记：

我可以更改图像，我只是在询问我应该使用哪个监听器（或其他东西），

非常感谢你

### 编辑

```
tv_addToBasket.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:50:23.990

> 我有一个带有图像的文本视图，我想更改该图像，只要用户按住文本视图并且当他完成单击时我想返回旧图像，请问如何？

所以第一个想法是使用`OnTouchListener()`，当你触摸时，`TextView`只需调用`setPressed()`方法并将其设置为**true**并且 while 为 true 以便更改背景。

当您触摸时，请再次调用`setPressed()`方法并将其设置为**false**并更改背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:54:25.273

您的问题有两种可能的解决方案。首先设置您的`android:clickable="true"`属性，然后使用选择器或按代码处理

1）为您想要更改的drawable使用选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/your_drawable_here" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/your_drawable_here" /> <!-- focused -->
    <item android:drawable="@android:color/transparent" /> <!-- default -->
</selector> 
```

2）为您的文本视图使用处理程序

```
TextView tv = (TextView)findViewById(R.id.tv_food_profile_addToBasket);
tv.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // change image per code
    }
}) 
```

# java - 如何从android应用程序将登录凭据传递给asp服务器

> ID：14909894
> 
> 赞同：0
> 
> 时间：2013-02-16T11:42:46.233
> 
> 标签：java, android

通过研究我发现，我可以使用 HttpPost 将信息发送到服务器，所以我有。

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("https://portal.sibt.nsw.edu.au/Default.asp"); 
```

我有两个 EditText 字段来保存用户 ID 和密码，以及一个用于登录的按钮。

```
EditText id ;
EditText pword ;
Button logIn ;

List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
            nameValuePair.add(new BasicNameValuePair("UserID", id.getText().toString()));
            nameValuePair.add(new BasicNameValuePair("Password", pword.getText().toString()));

post.setEntity(new UrlEncodedFormEntity(nameValuePair));//already inside a try/catch() block

new getResponse().execute()     

 // in AsyncTask
 public abstract class getResponse extends AsyncTask<Void, Void, Void>{

     public String doInBackground(){
         try {
             HttpResonse response = client.execute(post);
         String responseContent = EntityUtils.toString(response.getEntity());
     Log.d("response to string", responseContent);
         }/... 
```

现在在 LogCat 我看到这个“ [https://portal.sibt.nsw.edu.au/Default.asp](https://portal.sibt.nsw.edu.au/Default.asp) ”的html，但是，当使用 System.out.println(post.getEntity()); 检查实体时 我得到“org.apache.http.client.entity.UrlEncodedFormEntity@41237c10”但是我没有得到我应该得到的页面，这是登录后的页面，而是得到“post”的HTML。我究竟做错了什么。

注意：在 4.1.2 中编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:49:23.383

您需要获取内容以使用消息：

```
InputStream in = entity.getContent(); 
```

然后你可以阅读你的 InputStream

# knockout.js - 淘汰赛，如何绑定可观察对象以选择

> ID：14909895
> 
> 赞同：-2
> 
> 时间：2013-02-16T11:42:53.150
> 
> 标签：knockout.js

请参阅 jsfiddle.net/SimonYong/qS3Qa/ 如何将我的选择绑定到选择框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:50:15.873

您不应该将`ko.observable()`'推到`ko.observableArray()`. 这是一个固定版本：http: [//jsfiddle.net/qS3Qa/1/](http://jsfiddle.net/qS3Qa/1/)

# tycho - 如何防止 tycho-p2-repository-plugin 包含目标平台依赖项？

> ID：14909896
> 
> 赞同：2
> 
> 时间：2013-02-16T11:43:21.400
> 
> 标签：tycho

我正在尝试使用 Tycho 为扩展 Eclipse 环境的插件创建 P2 存储库。当我尝试进行 mvn 安装时，它创建的 zip 文件添加了来自 org.eclipse 的插件，我不想包含这些插件。

我已经定义插件不包含依赖项（即使默认值已经是错误的）

```
 <plugin>
          <groupId>org.eclipse.tycho</groupId>
          <artifactId>tycho-p2-repository-plugin</artifactId>
          <configuration>
                  <includeAllDependencies>false</includeAllDependencies>
          </configuration>
  </plugin> 
```

目前它会创建一个至少 48MB 的 zip 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:21:44.580

由 eclipse-repository 打包类型构建的 p2 存储库仅包含模块`category.xml`和`*.product`文件的（传递）包含。“传递包含”是这些文件中列出的所有内容，以及包含的功能中包含的所有内容。默认情况下，*不*包括仅被引用的工件（例如，在捆绑清单中）。

因此，如果 p2 存储库包含太多工件，请不要包含工件或包含工件的功能。

如果您想要构建一个必须包含某些不应进入 p2 存储库的内容的 RCP，请将产品定义移动到单独的`eclipse-repository`模块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:19:23.797

尝试这个

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.6</version>
            <executions>
                <execution>
                    <id>prepare-feature-distribution</id>
                    <phase>package</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <mkdir
                                dir="${basedir}/target/${project.parent.artifactId}/${feature.version}" />
                            <!-- Copy core and targetPlatform jars -->
                            <copy
                                todir="${basedir}/target/${project.parent.artifactId}/${feature.version}">
                                <fileset dir="${basedir}/target/repository/plugins">
                                    <exclude name="ch.qos.logback.slf4j*.jar" />
                                    <exclude name="javax.xml.bind*.jar" />
                                    <exclude name="org.apache.xerces*.jar" />
                                    <exclude name="org.apache.xml.resolver*.jar" />
                                    <exclude name="org.apache.xml.serializer*.jar" />
                                    <exclude name="org.eclipse.equinox.common*.jar" />
                                    <exclude name="org.eclipse.equinox.ds*.jar" />
                                    <exclude name="org.eclipse.equinox.launcher.win32.win32.x86*.jar" />
                                    <exclude name="org.eclipse.equinox.launcher*.jar" />
                                    <exclude name="org.eclipse.equinox.util*.jar" />
                                    <exclude name="org.eclipse.net4j.jms.api*.jar" />
                                    <exclude name="org.eclipse.osgi.services*.jar" />
                                    <exclude name="org.eclipse.osgi*.jar" />
                                </fileset>
                            </copy>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# mysql - MySQL：如何用“-”分割文本和数字

> ID：14909897
> 
> 赞同：1
> 
> 时间：2013-02-16T11:43:22.613
> 
> 标签：mysql, sql

我想重写一些在文本和数字之间用“-”分隔的用户 ID。例如：

*   KT-12345
*   BA-98765
*   CC-98765
*   ITA-87987

来自与文本和数字混合的大量数据。例如：

*   KT98798
*   CC94788
*   BB87600

所以问题是：我想将第二个示例中的用户 id 变成第一个。如何在 MySQL 中实现它。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:53:09.863

```
SELECT
CASE
WHEN floor(substr(name, 3,1)) > 0
THEN CONCAT_WS('-', SUBSTRING(name, 1, 2), SUBSTRING(name, 3, LENGTH(name)))
ELSE CONCAT_WS('-', SUBSTRING(name, 1, 3), SUBSTRING(name, 4, LENGTH(name)))
END AS new_name
FROM test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:51:35.953

没有“选择”数据，但更新：

```
UPDATE `table` SET field = REPLACE(field, '-', ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:41:00.740

这是一个如何在 php 中使用它的示例

```
$str = 'abc123';
preg_match('#([a-z]*)(\d*)#', $str, $match);
echo 'alpha: ' . $match[1];
echo 'num: ' . $match[2];?> 
```

# java - GWT 中的动态属性

> ID：14909902
> 
> 赞同：2
> 
> 时间：2013-02-16T11:43:50.787
> 
> 标签：java, gwt, properties, internationalization, gxt

有没有办法在运行时从*.properties*文件加载数据？

使用`Constants`接口，数据是硬编码的，我需要重新编译以更新我的属性。我想在不重新编译的情况下做到这一点。

我阅读了有关该类的信息`Dictionary`，但我的数据将显示在 HTML 主机页面中。它安全吗？

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:15:21.757

我们使用 RequestBuilder 来获取带有 i18n 字符串键/值对的 .js 文件，然后使用 GWT Dictionary 类对其进行解析。

GWT I18n 指南 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n)

使用 GWT 字典 - [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Dictionary.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Dictionary.html)

笔记 -

1) 我们只使用它来处理需要 I18N 的标签值。

2) 我们将它与 GWT 中启用的 htpps、XSS 和 XSRF 功能一起使用。

# iphone - iOS iPhone：为什么我的图像旋转会歪斜图像？

> ID：14909904
> 
> 赞同：3
> 
> 时间：2013-02-16T11:44:14.127
> 
> 标签：iphone, ios, image, rotation, constraints

我在互联网上搜索了如何在 UIImageView 中旋转图像而不会使图像倾斜。我测试过的例子都没有奏效。所以我必须在这里发布一个具体的问题。

我的旋转代码如下所示。结果显示在我链接到的图像中（对于 5 岁以下的代表，我无法在帖子中附加图像）。我在其中输入了角度值，图像显示了图像在旋转后是如何结束的。

旋转适用于 0、90、180 和 270 度。其他一切都会扭曲图像。

```
self rotateImage:_compassScale duration:1 curve:UIViewAnimationCurveEaseIn degrees:(CGFloat)bearing]; 
```

.

```
- (void)rotateImage:(UIImageView *)image duration:(NSTimeInterval)duration curve:(int)curve degrees:(CGFloat)degrees
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    CGAffineTransform transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(-degrees));
    image.transform = transform;

    [UIView commitAnimations];
} 
```

[90度](http://jfg.se/iPhone/Im2.png) [120度和歪斜](http://jfg.se/iPhone/Im3.png)

如果您将 URL 更改为 Im1、Im4 和 Im5，则还有 3 个图像。代表不允许发布超过 2 个链接。

经过大量工作，我发现约束与倾斜有关。NESW 环（罗盘玫瑰？）是我以另一幅图像为中心的图像，即罗盘框架。与这些图像一起的是同样以图像为中心的文本字段。

如果我将 NESW 环拖到屏幕上的另一个位置，图像不会倾斜。但它会在屏幕上四处移动。

我移动了所有 3 个项目，然后将它们拖回屏幕上的原始坐标。不再有任何倾斜。但是，当我更改文本字段中的角度时，两个图像的位置都会发生一些变化，并且变化似乎并未表明环的位置变化与框架的位置通道相连。奇怪的是我没有移动指南针框架的代码！

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:34:32.097

关闭自动布局。选择 xib 或故事板，在文件检查器（右侧窗格的第一个）中有一个“使用自动布局”复选框。取消选中它（默认情况下它是打开的）。

然后你应该得到预期的结果。

除非您有理由使用它，否则您应该始终关闭自动布局。

# zend-framework - 默认布局的 Zend 异常

> ID：14909907
> 
> 赞同：1
> 
> 时间：2013-02-16T11:44:23.410
> 
> 标签：zend-framework

我正在为我的应用程序使用 zend 框架，我已经创建了所有控制器和 phtml 文件。现在我需要保留一个登录页面。如何在不显示 default.phtml 内容的情况下创建登录页面。

有人请帮帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:39:19.507

而不是禁用布局，您可能希望让登录操作使用不同的布局。在您的控制器中：

```
$this->getHelper('layout')->setLayout('login'); 
```

# visual-c++ - VC++ 2010 C2061 错误

> ID：14909916
> 
> 赞同：1
> 
> 时间：2013-02-16T11:45:32.813
> 
> 标签：visual-c++

我在线收到 VC++ 2010 C2061 错误：

```
#include "queryevaluator_p.h"

class QueryEvaluator {
public:
    vector<AttrValue>* getCandidateList(QueryClause cl, int pos, ResultSet *computedRes);
... 
```

> `Error 41 error C2061: syntax error : identifier 'ResultSet' h:\dropbox\sch\cs3202\code\source\includes\queryevaluator.h 40`

`ResultSet`是在“queryevaluator_p.h”中定义的结构

```
struct ResultSet{ //a set of result
    bool valid;
    vector<ResultRow> rows;
}; 
```

这里有什么问题？ResultSet 可以在其他地方使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:54:52.383

也许您有循环包含（`queryevaluator_p.h`再次包含主标题）导致混淆。根据确切的设置，这可能会导致这种效果，因为必须首先编译其中一个文件。

解决方案是通过在一个地方使用前向声明而不是包含来解决循环依赖。例如，您可以转发声明`struct ResultSet`而不是包含`queryevaluator_p.h`标题。

# java - 在谷歌地图 V2 ... fragment.getMap() 返回 null

> ID：14909917
> 
> 赞同：9
> 
> 时间：2013-02-16T11:45:41.880
> 
> 标签：java, android, google-maps

我拿不到地图！我能得到的都是空的。

这是代码。

```
 public class MainActivity extends FragmentActivity {

     @Override
     protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();

       GoogleMap map;
        map = fragment.getMap();
             //here i cant access this snippet because map = null 
        if(map!=null){
        UiSettings mm = map.getUiSettings();
        map.setMyLocationEnabled(true);
          } }
           } 
```

清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.anywhere_reminder"
android:versionCode="1"
android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
    <uses-feature
    android:glEsVersion="0x00020000"
     android:required="true"/>

   <permission
    android:name="com.example.anywhere_reminder.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

 <uses-permission android:name="com.example.anywhere_reminder.permission.MAPS_RECEIVE" />
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission   android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"     />

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name="com.google.android.gms.BuildConfig" />
    <activity
        android:name="com.example.anywhere_reminder.MainActivity"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

    <meta-data
     android:name="com.google.android.maps.v2.API_KEY"
   android:value=" my key "/> 

    </application>
    </manifest> 
```

这是xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".MainActivity" >

 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.MapFragment"/>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

  </RelativeLayout> 
```

我试图像这个解决方案一样解决它[Google Maps Android API v2 throws GooglePlayServicesNotAvailableException, out of date, SupportMapFragment.getMap() 返回 null](https://stackoverflow.com/questions/13722192/google-maps-android-api-v2-throws-googleplayservicesnotavailableexception-out-o) .. 但仍然没有工作

更新：

我的地图现在可以工作了..这是编辑后的工作版本

```
 public class MainActivity extends FragmentActivity {
 private GoogleMap myMap;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

          android.support.v4.app.FragmentManager myFragmentManager = getSupportFragmentManager();
          SupportMapFragment mySupportMapFragment 
           = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);

             myMap = mySupportMapFragment.getMap();
             if(myMap!=null)
            myMap.setMyLocationEnabled(true);

        } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-16T11:52:48.313

您正在通过`FragmentTransaction`. 当你调用`commit()`时，片段还*没有*被添加到屏幕上，因为`FragmentTransaction`它只是被安排发生——它还没有发生。因此，`SupportMapFragment`还没有被调用`onCreateView()`，所以没有`GoogleMap`。

要么切换到静态片段（`<fragment>`布局中的标记），要么延迟使用，`GoogleMap`直到事务处理完毕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T01:30:13.087

FragmentManager 类中的 executePendingTransactions() 旨在修复此延迟。来自文档：在使用 FragmentTransaction.commit() 提交 FragmentTransaction 后，它被安排在进程的主线程上异步执行。**如果您想立即执行任何此类挂起的操作**，您可以调用此函数（仅从主线程）来执行此操作。请注意，所有回调和其他相关行为都将在此调用中完成，因此请注意从何处调用它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-07T16:45:01.620

我扩展了 MapFragment 类并添加了一个监听器。关于 getMap() 的文档说：

> ... 如果片段的视图尚未准备好，则为 Null。如果片段生命周期尚未通过 onCreateView(LayoutInflater, ViewGroup, Bundle) ，则可能会发生这种情况......

然后我在 onCreateView 之后调用监听器。我添加类

```
public class MySupportMapFragment extends SupportMapFragment{

private MySupportMapFragmentListener listener;

public interface MySupportMapFragmentListener{
    public void onMapCreated(GoogleMap googleMap);
}

// value taken from source code
private static final String MAP_OPTIONS = "MapOptions";

public static MySupportMapFragment newInstance() {
        MySupportMapFragment f = new MySupportMapFragment();
        return f;
}

public static MySupportMapFragment newInstance(GoogleMapOptions options) {
        MySupportMapFragment f = new MySupportMapFragment();
        Bundle args = new Bundle();
        args.putParcelable(MAP_OPTIONS, options);
        f.setArguments(args);
        return f;
}

// other newInstance methods ...

/* (non-Javadoc)
 * @see android.support.v4.app.Fragment#onViewCreated(android.view.View, android.os.Bundle)
 */
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onViewCreated(view, savedInstanceState);
    // here, as doc say, the map can be initialized, or the service is not available
    if(listener!=null){
        listener.onMapCreated(getMap());
    }

}
/**
 * @return the listener
 */
public MySupportMapFragmentListener getListener() {
    return listener;
}
/**
 * @param listener the listener to set
 */
public void setListener(MySupportMapFragmentListener listener) {
    this.listener = listener;
} 
```

}

在调用活动或片段之后......

```
 mapFragment = MySupportMapFragment.newInstance();
    mapFragment.setListener(new MySupportMapFragmentListener() {
        @Override
        public void onMapCreated(GoogleMap googleMap) {
            // TODO Auto-generated method stub          
            if(googleMap!=null){
                  // service is unaviable
            }               
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-28T04:38:05.273

移动代码片段：

谷歌地图；地图 = 片段.getMap();

//这里地图不为空

如果（地图！=空）{

```
UiSettings mm = map.getUiSettings();
map.setMyLocationEnabled(true); 
```

}

到 onResume() 方法，这将解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-06T10:23:35.350

另一种解决方法。在 MapFragment 中实现一个接口，以便在活动准备好创建 GoogleMap 时与活动通信。

```
 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    listener.onGoogleMapCreattion();

} 
```

然后你只需要在activtiy中实现监听器：

```
 @Override
public void onGoogleMapCreation() {
    setUpMapIfNeeded();

}

    private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
         mMap = mMapFragment.getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
          // The Map is verified. It is now safe to manipulate the map.
            setUpMap();

        }
    }
  } 
```

# jquery - Jquery Ajax XML 不工作

> ID：14909919
> 
> 赞同：0
> 
> 时间：2013-02-16T11:46:14.933
> 
> 标签：jquery, xml, ajax

我有一个创建 xml 列表的 php 文件，在浏览器中查看时看起来像这样

```
<results>
 <login>
  <name>Mick Smith</name>
  <pass>Micks Password</pass>
 </login>
 <login>
  <name>John Brown</name>
  <pass>Johns Password</pass>
</login>
</results> 
```

我正在尝试使用 Jquery 学习 ajax 并拥有以下脚本，问题是我希望 colsole 日志显示我的结果，但它除了“返回”之外什么都不返回。我已经将 DATA 添加到 ajax 语句中，因为最终我想将数据传递给创建 xml 的文件，我真的很坚持这个，你能提供任何指针吗？

```
 $.ajax({
    type: "POST",
    url: "pgGeneral_login/validate.php",
    data: { user:user, pass:pass },
    dataType: "xml",
    success: loginval()       });  

  function loginval(data){
        console.log("Returned")

        $(data).find('login').each(function(){

        name = $(this).find('name').text();
        pass = $(this).find('pass').text();
        console.log("Name :" + name) 
        console.log("Pass :" + pass) 
        }); // find loop
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:11:18.603

问题是这样的：

```
success: loginval()       });
//               ^^ remove 
```

当您将函数分配给成功属性时，您使用的是括号。这会导致函数在分配时执行，而不是在成功事件触发时执行。在您的代码中实际发生的事情`loginval()`将被执行，并且它的返回值将被分配给`success`. 删除括号，使其变为：

```
success: loginval       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:19:28.590

此外，对于这一行：

```
data: { user:user, pass:pass }, 
```

我不确定您是否已经预定义了这两个变量 user 并在此 ajax 调用之前传递。

在 loginval 函数中，最好将变量设为本地：

```
name = $(this).find('name').text();
pass = $(this).find('pass').text(); 
```

到

```
var name = $(this).find('name').text();
var pass = $(this).find('pass').text(); 
```

# c# - 反射与 T4 获取程序集

> ID：14909922
> 
> 赞同：18
> 
> 时间：2013-02-16T11:46:27.620
> 
> 标签：c#, reflection, t4

我想获得特定程序集中的所有课程这是我的代码

```
 var assembly=Assembly.GetExecutingAssembly();

 var assemblies = assembly.GetTypes().Where(t => String.Equals(t.Namespace, "RepoLib.Rts.Web.Plugins.Profiler.Models", StringComparison.Ordinal)).ToArray(); 
```

当 c# 代码一切正常时，我得到了我的程序集，但是当写入`t4`文件时，我没有任何错误，但我的程序集计数是。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-16T11:53:07.647

在 T4 模板中，执行的程序集不是您的，而是来自 T4 引擎的程序集。

要从您的程序集中访问类型，您必须执行以下步骤：

1.  将对您的程序集的引用添加到模板中。把它放在它的顶部：

    ```
    <#@ assembly name="$(SolutionDir)<Project>\bin\Debug\<Project>.dll" #> 
    ```

2.  导入程序集的命名空间。把它放在上一行下面的某个地方：

    ```
    <#@ import namespace="<Project>.<Namespace>" #> 
    ```

3.  要访问此程序集中的类型，请选择其中一个并从中获取程序集：

    ```
    var assembly = typeof(<Type in assembly>).Assembly;
    var types = assembly.GetTypes()
                        .Where(t => String.Equals(
                            t.Namespace,
                            "RepoLib.Rts.Web.Plugins.Profiler.Models",
                            StringComparison.Ordinal))
                        .ToArray(); 
    ```

# asp.net-mvc - 仅重新加载网站的特定部分

> ID：14909924
> 
> 赞同：0
> 
> 时间：2013-02-16T11:46:44.967
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我目前有一个产品列表，其中包含来自用户的评论，您可以使用下一个和上一个按钮浏览评论。但目前它进入了一个新的页面 url，如 pageid=2，我想要一个不需要进入新 url 的脚本，只需在当前页面中加载新的评论页面。有人可以为此分享代码片段吗？因为我不知道如何做到这一点，因为我没有使用 javascript/jquery 的经验。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:07:22.513

创建一个名为评论的局部视图，在您的控制器中向您的操作发出 Ajax 发布/获取请求，返回您的局部视图，在您的 jquery Ajax 请求的成功方法中，您需要将呈现的 HTML 放入一个 div 容器中，即, $('#mydiv').html(数据)。

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:45:19.630

假设您有锚标签，其类设置为 "paging" 1 2 。.

```
$(".paging").click(function(){
  var PageID=$(this).text();
  $.get("Review/GetReview/"+ PageID ,function(data,status){
    $("#ReviewContainer").html(data);
  });
}); 
```

这将从控制器“Review”调用您的操作方法“GetReview”，参数为 ID。并设置html内容。

希望对你有帮助！谢谢。

# python - Networkx 有向图 Python

> ID：14909930
> 
> 赞同：2
> 
> 时间：2013-02-16T11:47:11.320
> 
> 标签：python, graph, label, draw, networkx

我想用 Python 库 Networkx 绘制一个有向图，问题是当我有从 Node1 到 Node1 的连接以及从 Node2 到 Node2 的连接时，它们的标签被覆盖。

有没有一种从一个节点到另一个节点绘制曲线的方法，或者一种配置标签位置的方法？

![](../Images/dffe6d41b5a5212e288b43886a26a0b7.png)

在屏幕截图中，您可以看到我有两条有向线，但只有一个标签，第二个标签首先结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-22T22:31:46.477

它已通过 label_pos=0.2 解决

# php - IE8奇怪的问题背景不加载

> ID：14909933
> 
> 赞同：1
> 
> 时间：2013-02-16T11:47:23.470
> 
> 标签：php, css, joomla

我最近做了一个网站，它有一个非常奇怪的问题让我大吃一惊。

如果有人可以测试两个 url 并告诉我如何调试这个问题？

我有两个托管服务器

托管在 server1 上的网站：

[http://test.ici.com.pk/](http://test.ici.com.pk/)

托管在 server2 上的网站：

[http://ici.com.pk/](http://ici.com.pk/)

我在两台服务器上复制了相同的网站 + 数据库（上传 3 次验证）

奇怪的问题是 IE8 没有在 SERVER2 中加载蓝色背景

无法调试是服务器端设置或 css 代码的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:01:54.543

在我看来，这两个网站的来源完全不同，如果您在浏览器上查看页面来源，您会看到自己。

而且我猜 IE 的问题在于 IE 可笑的 32 个样式表限制。 [http://drupal.org/node/228818](http://drupal.org/node/228818)

首先你应该找出为什么页面源不同（错误的模板？）然后你可能需要合并你的一些样式表并将它们的数量保持在 IE 的 32 以下（例如[http://drupal.org/node/510442](http://drupal.org/node/510442)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:48:47.723

我认为这是虚拟主机的问题....尝试为 SERVER2 正确配置虚拟主机，这不会导致您发生冲突

# php - 我可以做些什么来优化以下功能或其他一些事情以减少内存消耗？

> ID：14909945
> 
> 赞同：0
> 
> 时间：2013-02-16T11:48:48.947
> 
> 标签：php, mysql, memory-management, recursion, query-optimization

我正在处理业务目录之类的事情，并且需要在类别列表中显示类别的递归父级。

我为此使用以下功能：

```
 public function get_recursive_parents($category_id){
        $categories = array();
        $res = $this->db->from('categories')->where('cat_id',$category_id)->get()->row_array();
        $cat_id = $res['parent_id'];
        $categories[] = $res;
        while($cat_id){
            $res = $this->db->from('categories')->where('cat_id',$cat_id)->get()->row_array();
            $categories[] = $res;
            $cat_id = $res['parent_id'];
        }
        return $categories;
    } 
```

我正在使用此功能，因为它在管理站点上并且在管理站点上有点慢也可以，并且管理员将只有一个，所以我可以给它更多内存。但我认为一次调用的限制内存超过 300M 是太多了，仍然得到这个：

```
Fatal error: Allowed memory size of 367001600 bytes exhausted (tried to allocate 72 bytes) in /var/www/usmanproject/salesfinder/system/database/DB_active_rec.php on line 2007 
```

那么有没有办法让我可以优化上述功能？或者我需要做某种特定类型的索引或算法优化，或任何其他可能的方式？或者我只是停止显示类别的所有父母和超级父母（即客户要求查看层次结构）？或者需要增加内存，因为我已经在一个目录上工作了，而且在管理站点上也很慢，所以我猜他们只是在使用更多的内存？

任何建议将被认真考虑。

* * *

这是那个表模式，它有 parent_id 所以它作为递归关系工作。

```
 CREATE TABLE IF NOT EXISTS `categories` (
  `cat_id` int(11) NOT NULL AUTO_INCREMENT,
  `cat_name` varchar(255) DEFAULT NULL,
  `cat_title` varchar(255) DEFAULT NULL,
  `cat_desc` varchar(255) DEFAULT NULL,
  `cat_text` text,
  `parent_id` int(11) NOT NULL,
  `cat_img` varchar(255) DEFAULT NULL,
  `sort_id` int(11) NOT NULL DEFAULT '1',
  `last_level` tinyint(4) NOT NULL,
  PRIMARY KEY (`cat_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=221 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:15:57.357

尝试使用下面的代码

```
public function get_recursive_parents($category_id,$categories=array())
{
    if($category_id!="")
    {
        $new_ar1=array();
        $fe = $this->db->from('categories')->where('cat_id',$category_id)->get()->row_array();
        array_push($new_ar1,$fe["parent_id"]);
        return $new_ar1;
    }
    else
    {
        $res = $this->db->from('categories')->get()->row_array();
        array_push($categories,$res['parent_id']);
        $categories[$res['parent_id']]=array();

        array_push($categories[$res['cat_id']],get_recursive_parents($res['parent_id'],$categories));
    }

    return $new_ar;
} 
```

调用函数

```
get_recursive_parents($category_id); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:07:01.340

问题解决了，实际上有一条记录`parent_id`指向它自己`cat_id`的主键。所以这是指向它自己，在那种情况下，递归根本就没有结束。我使用了while循环，在这种情况下它变成了无限的。

然而，在调试过程中，我发现这篇文章很有帮助， [http](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/) ://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/ 它提供了更好的方法来处理同样的事情。如本文所述，在我的场景中，自我加入很有用。

# objective-c - 对类实例的全局访问 - 最佳设计方法？

> ID：14909946
> 
> 赞同：1
> 
> 时间：2013-02-16T11:48:50.930
> 
> 标签：objective-c, xcode, cocoa, class, global-variables

好的，这是我的情况，我真的不确定使用哪种设计方法。因此，我很高兴阅读有关我的特定案例的一些输入...

**场景：**

*   我有一个基于标签的应用程序
*   最初，我们创建一个`NSWindowController`(eg `MyDocumentManager`) 的实例，它负责选项卡的创建/操作
*   每个选项卡包含（= 附加到）一个实例`MyDocument`

现在，我将要实现菜单操作。

*   每个菜单都有一个单独的菜单控制器（实际上是`NSObject`所有相关功能分组的子类），例如`MyFileMenuController`
*   文件菜单的动作`MyFileMenuController`通过 Interface Builder 链接到对象中的动作

**问题：**

*   怎么可能`MyFileMenuController` *“知道”*（`MyDocumentManager`在 my 中创建`AppDelegate.m`），以便我们可以访问当前文档详细信息并执行所有相关操作？有任何想法吗？哪种方法更可取？

* * *

**我的想法：**

*   将对象从一个类传递到另一个类（听起来不太好）
*   单身人士（尽管老实说我从未使用过它们，也不知道它是否/如何是我的特殊情况）
*   通知和通知监听器
*   （从对面看，虽然不确定）委托方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:38:46.890

我会创建一个链接到 appDelegate.rootViewController 的初始 UIViewController。

在这个新的视图控制器（就叫它“mainViewController”）中，我会放置我的 tabBar 和 menuController。

我了解您的界面类似于带有 leftBarbutton 的 facebook，它可以进行水平滚动并发现菜单。所以在这个 leftBarButton 的选择器中，我会调用如下方法：

```
- (void)discoverMenuForDocument:(MyDocument*)document {
    // Set menu configuration for specific document
    // Make animation to discover menu
} 
```

其中文件可能是这样的：

```
self.selectedViewController (<-- You cand make this in several ways depending on your code...) 
```

意识到 (MyDocument*) 不是一个对象，而只是一个引用，所以在我看来这样做没有任何问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:20:42.123

好的（不确定这是否是最好的方法），但这是我决定做的：

```
[[[NSApplication sharedApplication] delegate] MyDocumentManager] 
```

所以，只要一个对象是我的 AppDelegate 的一部分，我就可以从任何地方访问它。

# powershell - 设置要在 PowerShell export-csv 中使用的日期格式？

> ID：14909954
> 
> 赞同：2
> 
> 时间：2013-02-16T11:49:41.990
> 
> 标签：powershell

我正在尝试将数据库表导出为文本（CSV-ish）以供以后批量插入。使用 ISO 格式 yyyy-mm-dd 的日期会少很多麻烦。我相信，我最终说服了 SQL Server Express 在其导入中使用英国格式*（尽管无论我做什么，灰色的服务器属性都卡在“英语（美国）”中）*。我将用户帐户更改为 British，这与我的 PowerShell CSV 导出格式相对应。但我宁愿使用 ISO 格式来解决问题。

目前，从 a 填充了一个表变量`SELECT * FROM Table`并将其通过管道传输到 Export-CSV 中，日期以`dd/mm/yyyy`格式在生成的文本文件中出现。

如何强制 PowerShell 脚本`ISO`在所有语句中使用格式日期*（即在每个单独的命令中不指定格式）*，以便 Export-CSV 将根据需要编写它们？我已经在圈子里转了几个小时，看“文化”之类的东西，但我完全糊涂了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T13:17:13.540

尝试格式化您的文化：

```
PS C:\> $(get-date).ToShortDateString()
2/16/2013
PS C:\> $(Get-Culture).DateTimeFormat.ShortDatePattern = 'yyyy-MM-dd'
PS C:\> $(get-date).ToShortDateString()
2013-02-16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:28:23.117

仅供参考，我已经使用 PowerShell 对 SQL 进行批量插入，我发现解决该问题的最简单方法是：

1.  使用 Export-Csv -Delimited "`t" 将数据导出到 CSV - 这是一个制表符分隔的文件。
2.  批量插入时，插入到所有列都设置为 NVARCHAR(MAX) 数据类型的临时表中。
3.  创建具有正确数据类型集的第二个临时表。
4.  将 Temp Table 1 中的记录选择到 Temp Table 2 中，使用 SQL 中的 REPLACE 命令将所有引号替换为空。

只有当我遇到一个在其自己的数据中包含一个选项卡的列时，这才真正让我崩溃，这很痛苦，但如果我遇到这些列中的空格，我只会用空格替换这些选项卡。

当我处理包含数千行的 CSV 文件时，这是我能做到的最简单的方法，而且速度最快，因为它都是基于设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:22:51.137

非常感谢 jbockle 的帮助，我现在可以将数据从办公室（SQL Server 2005）带回家，并将其导入到我家运行 SQL Server 2008 Express 的 Win XP 机器上的相同表中（来自 CREATE .sql 脚本）。

在第一个示例中，表直接导出为 CSV，然后进行清理。Convert-Line 函数删除 " 引号，因为 BULK INSERT 不喜欢它们，并且还在每行的开头和结尾添加额外的反引号分隔符，以便它可以替换 any `True`with`1`和 any `False`with `0`(行上的任何地方)，因为布尔值很棘手 :)
（相邻的布尔值似乎有问题，因此此通道运行两次以将它们全部清除！）
最后一行从每行的开头和结尾修剪不需要的 `。

```
##  PowerShell newbies : for scripts to run, you must first execute:  Set-ExecutionPolicy RemoteSigned
##  and then all scripts will work (it's a global setting, remembered once run)

$SQLDT = New-Object "System.Data.DataTable"
$path = "C:"
(Get-Culture).DateTimeFormat.ShortDatePattern="yyyy-MM-dd"   # temp setting, for dates in ISO format

function Convert-Line
{  param( [string]$line=$(throw 'a CSV line is required.'))
  ## add ` to start and end, combined with removing quotes
   $line = "``" + $line + "``" -replace "`"", ""
  ## swap Boolean True/False to 1 or 0
  ##  !! Need to do it twice, as it has trouble with adjacent ones!!
   $line = $line -replace "``True``","``1``" -replace "``False``","``0``"
   $line = $line -replace "``True``","``1``" -replace "``False``","``0``"
  ## return with trimmed off start/end delimiters
   $line.TrimStart("``").TrimEnd("``")
}

function Table-Export
{   param( [string]$table=$(throw 'table is required.'))

   ## Get whole SQL table into $SQLDT datatable
    $sqldt.reset()
    $connString = "Server=.\SQLEXPRESS;Database=Test1;Integrated Security=SSPI;"
    $da = New-Object "System.Data.SqlClient.SqlDataAdapter" ("select * from $table",$connString)
    [void]$da.fill($SQLDT)

   ## Export to CSV with ` delimiter
    $sqldt | Export-Csv $path\$table.CSV -NoTypeInformation -delimiter "``"

   ## read entire file, parse line by line, process line, write back out again
    (gc $path\$table.CSV) | Foreach-Object { Convert-Line -line $_ } | Set-Content $path\$table.CSV
}

# main...
Table-Export -table "Table1"
Table-Export -table "Table2"
Table-Export -table "Table3etc" 
```

这很好地使用 SQL 导入

```
DELETE FROM table1;
BULK INSERT table1 FROM 'C:\table1.csv' WITH (KEEPIDENTITY, FIELDTERMINATOR = '`');
DELETE FROM table2;
BULK INSERT table2 FROM 'C:\table2.csv' WITH (KEEPIDENTITY, FIELDTERMINATOR = '`');
-- etc, all tables 
```

保留原始身份字段以使表连接仍然有效。

适用于字段类型：数字、文本、布尔值、日期。

BULK INSERT 会抱怨包含字段名称的第一行，但这是一个可忽略的警告（不要费心尝试 FIRSTROW = 2，因为它不起作用）。

在第二个示例中，采用了另一种方法——这一次将 DataTable 复制到一个新的数据表中，其中每一列都是字符串类型，以便可以调整每个字段而不会出现类型问题。然后将复制数据表导出为 CSV，然后我们需要做的就是处理它以删除不需要的双引号。

这次我们有机会在任何字符串字段中替换 "，因此双引号或逗号都不会破坏它们，例如，像 John "JJ" Smith 这样的名字最终会变成 John 'JJ' Smith，希望这是可以接受的。

```
$SQLDT = New-Object "System.Data.DataTable"
$path = "C:"
(Get-Culture).DateTimeFormat.ShortDatePattern="yyyy-MM-dd"   # temp setting, for dates in ISO format

function Table-Export
{   param( [string]$table=$(throw 'table is required.'))

   ## Get whole SQL table into $SQLDT datatable
    $sqldt.reset()
    $connString = "Server=.\SQLEXPRESS;Database=Test1;Integrated Security=SSPI;"
    $da = New-Object "System.Data.SqlClient.SqlDataAdapter" ("select * from $table",$connString)
    [void]$da.fill($SQLDT)

   ## Copy $SqlDt DataTable to a new $DT2 copy, with all columns now String type
    $DT2 = New-Object "System.Data.DataTable"
    $sqldt.columns | Foreach-Object { $DT2.Columns.Add($_.Caption) > $null }

   ## copy all $SqlDt rows to the new $DT2
   ## and change any " double quote in any field to a ' single quote, to preserve meaning in text fields
   ##  ( or you could use an odd char and replace in SQL database later, to return to " )
    For($i=0;$i -lt $sqldt.Rows.Count;$i++)
    { $DT2.Rows.Add() > $null
      For($i2=0;$i2 -lt $sqldt.Columns.Count;$i2++)
      { $DT2.Rows[$i][$i2] = $SQLDT.Rows[$i][$i2] -replace "`"","'" }
    }

  ## If any $SqlDt column was Boolean...
  ## use column name.. and for all rows in the new $DT2 : convert True/False to 1/0
   $sqldt.columns | Foreach-Object {
     If ($_.DataType.Name -EQ "Boolean")
     { $ColName = $_.Caption
       For($i=0;$i -lt $sqldt.Rows.Count;$i++)
       { If ($DT2.Rows[$i][$ColName] -EQ "True") { $DT2.Rows[$i][$ColName]="1" }
         If ($DT2.Rows[$i][$ColName] -EQ "False") { $DT2.Rows[$i][$ColName]="0" }
       }
     }
   }

   ## Export to CSV with ` delimiter
    $DT2 | Export-Csv $path\$table.CSV -NoTypeInformation -delimiter "``"

   ## read entire file, parse line by line, remove all ", write back out again
   (gc $path\$table.CSV) | Foreach-Object {$_ -replace "`"", "" } | Set-Content $path\$table.CSV
}

# main...
Table-Export -table "Table1"
Table-Export -table "Table2"
Table-Export -table "Table3etc" 
```

空表不会破坏这个脚本，你只会得到一个零字节的 CSV 文件。

# r - 在R中创建一个计算auc的函数

> ID：14909961
> 
> 赞同：0
> 
> 时间：2013-02-16T04:09:18.677
> 
> 标签：r, distribution

我对 R 非常陌生，我正在处理一项我遇到很多麻烦的任务。我定义了一个离散概率分布：

```
s   P(s)
0   1/9
1   4/9
2   1/9
3   0/9
4   1/9
5   0/9
6   0/9
7   1/9
8   0/9
9   1/9 
```

现在我必须解决这个问题：

与 R 中可用的其他分布一致，为您的概率分布创建一系列支持函数：

```
f  =  dsidp(d)      # pmf - the height of the curve/bar for digit d
p  =  psidp(d)      # cdf - the probability of a value being d or less
d  =  qsidp(p)      # icdf - the digit corresponding to the given 
                    # cumulative probability p
d[]  =  rsidp(n)    # generate n random digits based on your probability distribution. 
```

如果有人可以帮助我开始编写这些函数，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:36:51.890

首先，读取数据：

```
dat <- read.table(text = "s   P(s)
0   1/9
1   4/9
2   1/9
3   0/9
4   1/9
5   0/9
6   0/9
7   1/9
8   0/9
9   1/9", header = TRUE, stringsAsFactors = FALSE)

names(dat) <- c("s", "P") 
```

将分数（表示为字符串）转换为数值：

```
dat$P <- sapply(strsplit(dat$P, "/"), function(x) as.numeric(x[1]) / as.numeric(x[2])) 
```

功能：

```
# pmf - the height of the curve/bar for digit d
dsidp <- function(d) {
  with(dat, P[s == d])
}

# cdf - the probability of a value being d or less
psidp <- function(d) {
  with(dat, cumsum(P)[s == d])
}    

# icdf - the digit corresponding to the given cumulative probability p
qsidp <- function(p)  {
  with(dat, s[sapply(cumsum(P), all.equal, p) == "TRUE"][1])
} 
```

笔记。由于某些概率为零，因此某些数字具有相同的累积概率。在这些情况下，函数返回最低位`qsidp`。

```
# generate n random digits based on your probability distribution.
rsidp <- function(n) {
  with(dat, sample(s, n, TRUE, P))
} 
```

# c# - 如何自动生成 WPF Event 的扩展方法库 -> IObservable

> ID：14909963
> 
> 赞同：4
> 
> 时间：2013-02-16T11:50:48.943
> 
> 标签：c#, .net, wpf, events, system.reactive

这些天来，我几乎只在我的 C# WPF 应用程序中使用 Reactive Extensions。添加和删​​除事件处理程序是一种反模式，我完全嫉妒 F# 事件实现 IObservable 的事实。

为了帮助 C# 开发人员，RX 人员提供了以下方法（以及其他一些不同类型的安全性）

```
public static 
IObservable<EventPattern<TEventArgs>> 
FromEventPattern<TDelegate, TEventArgs>
    ( Action<TDelegate> addHandler
    , Action<TDelegate> removeHandler
)
where TEventArgs : EventArgs 
```

[http://msdn.microsoft.com/en-us/library/hh211731(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh211731(v=vs.103).aspx)

我会这样使用它

```
var movingEvents = Observable.FromEventPattern<MouseEventHandler, 
    MouseEventArgs>(h => this.MouseMove += h, h => this.MouseMove -= h); 
```

然而，这很乏味。我想做的是

```
var movingEvents = h.MouseMoveObserver(); 
```

并完成它。这种扩展方法看起来像

```
IObservable<MouseEventArgs> MouseMoveObserver(this Canvas This){
    return Observable.FromEventPattern<MouseEventHandler, 
    MouseEventArgs>(h => This.MouseMove += h, h => This.MouseMove -= h); 
} 
```

这不是火箭科学，我一直在考虑建立一个库，在我需要时一次添加这些扩展方法。但是我确信一些智能 cookie 可以编写一个 T4 模板，通过反射处理 WPF 库中的所有控件并生成我需要的所有扩展方法。我的问题是...

有没有人写过这样的代码生成器来将事件映射到上面的可观察对象，如果没有，有人会对如何做到这一点有任何建议吗？我对 .Net 反射不是很好，但一些种子代码可能会让我开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T14:58:51.117

要获取从 FrameworkElement 派生的所有类型，您可以使用

```
var typesToDo = from t in Assembly.GetAssembly(typeof(FrameworkElement)).GetTypes()
                where t.IsSubclassOf(typeof(FrameworkElement)) 
                        && t.IsPublic 
                        && t.GetEvents().Any()
                select t; 
```

然后您可以使用`type.GetEvents()`来获取每种类型的事件。您返回的 EventInfo 将让您查看名称、类型、参数等内容。

您需要做一些额外的工作来应对通用事件，但这并不是一个巨大的数量。

我[在 GitHub 上放了一个示例程序](https://github.com/WilkaH/EventToObservableReflection)以及一个[输出示例](https://github.com/WilkaH/EventToObservableReflection/tree/master/ExampleOutput)。

存在某些输出无法正常工作的风险，我还没有全部尝试过 :) 我确实确保它们都可以构建，并且至少其中一些可以正常工作。

# python - python中的谷歌应用引擎应用程序架构

> ID：14909964
> 
> 赞同：0
> 
> 时间：2013-02-16T11:51:02.977
> 
> 标签：python, google-app-engine, webapp2

我对谷歌应用引擎和 python 很陌生。成功上传应用程序后，我遇到了一个基本问题。

```
app = webapp2.WSGIApplication([
    ('/.*',IndexHandler)
], debug=True) 
```

这是通常用于将请求与处理它的类映射的代码块。但是 app.yaml 中有一个部分允许为单个 url 指定处理程序。

我的问题是谷歌应用引擎上的 python 应用程序的正确架构是什么。如果我的应用程序有数百个用于处理不同请求的类怎么办？我是否必须在此代码中指定所有这些类？

我用谷歌搜索但找不到满意的答案。链接到一个好的教程或文档将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:24:36.807

基本上，您在 app.yaml 中定义要使用的应用程序。例如，如果您有多个应用程序，则可以在此处指定要使用的应用程序。

是的，您必须在此处（在 main.py 中）指定所有允许的 URL。否则请求将得到 404。但是，您可以使用正则表达式使某些类型的地址与给定的处理程序匹配。

查看教程：[https ://developers.google.com/appengine/docs/python/gettingstartedpython27/usingwebapp](https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingwebapp)

URI 路由文档：[http ://webapp-improved.appspot.com/guide/routing.html?highlight=url](http://webapp-improved.appspot.com/guide/routing.html?highlight=url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:13:51.220

你可以这样做。

在 app.yaml

```
- url: /service/.*
  script: service.app

- url: .*
  script: main.app 
```

在服务.py

```
url_map = [
    ('.*/user.*', 'service.UserHandler'),   
    ('.*/data/show/', 'appname.service.DataShowHandler'),
    ('.*/data.*', 'appname.service.DataHandler'),
]

app = webapp2.WSGIApplication(url_map) 
```

当您尝试访问[http://your-appid.com/service/user](http://your-appid.com/service/user)时，appengine 将在位于根文件夹的 service.py 中执行 UserHandler 类的 GET 功能。

当您尝试访问[http://your-appid.com/service/data/show](http://your-appid.com/service/data/show)时，appengine 将在 Root/appname 文件夹中的 service.py 中执行 DataShowHandler 类的 GET 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T12:26:04.030

我有两个答案：

1）您可以使用 webapp2 路由来处理请求和 uri 路由。这是非常强大的。您可以使用 url 模板和/或编写自己的自定义调度程序。

2) 对于很多请求，您可以使用单个 URL 并使用会话/状态来了解如何在发布后继续。这意味着：您不必为每个请求都使用请求处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:01:47.153

app.yaml 可用于设置诸如安全和登录选项，虽然我个人不使用它们。
我使用 main.py 将所有 url 映射到正确的处理程序。

# windows-phone-7 - 我无法在我的系统中获取 LongLister Toolkit

> ID：14909968
> 
> 赞同：0
> 
> 时间：2013-02-16T11:52:15.137
> 
> 标签：windows-phone-7, longlistselector

嗨，我收到以下错误，我从 phone.controls.assembly.toolkit 添加了参考，但它不起作用

```
The tag 'LongListSelector' does not exist in XML namespac 'clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:45:14.297

当您向您的库或在本例中为您的工具包添加一个新引用时，您还必须在您的 XAML 代码中添加一个引用。例如：

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
```

因此，在您的 XAML 页面中，直接到顶部，您将看到几行类似上面的行。输入 xmlns:toolkit="链接到您的工具包"

当您键入 xmlns 时，intellisense 将自动提示您进入可用参考列表。您可以向下滚动以找到它。

确保在 xmlns 之后添加一个唯一的名称，例如“toolkit”或“tool”。因此，要访问 LongListSelector，您只需键入

```
<toolkit:LongListSelector /> 
```

# c# - 键值对协方差

> ID：14909973
> 
> 赞同：12
> 
> 时间：2013-02-16T11:52:59.270
> 
> 标签：c#, c#-4.0, covariance, keyvaluepair

在这个例子中是否有更好的方法来模拟协方差？理想情况下，我想做：

```
private IDictionary<string, ICollection<string>> foos;

public IEnumerable<KeyValuePair<string, IEnumerable<string>> Foos
{
    get
    {
        return foos;
    }
} 
```

但`KeyValuePair<TKey, TValue>`不是协变的。

相反，我必须这样做：

```
public IEnumerable<KeyValuePair<string, IEnumerable<string>>> Foos
{
    get
    {
        return foos.Select(x => 
            new KeyValuePair<string, IEnumerable<string>>(x.Key, x.Value));
    }
} 
```

有没有更好/更清洁的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T14:52:04.287

不幸的是，`KeyValuePair<TKey, TValue>`是一个结构；并且结构在 .NET 中不会表现出差异。

您当然可以通过编写自己的协变`Pair`接口和一些简单的助手来解决这个问题，以便在序列`KeyValuePair`和自定义`Pair`接口之间进行转换。这将使您可以：

```
var dict = new Dictionary<string, ICollection<string>>();

var view = dict.GetCovariantView(); // IEnumerable< IPair<string, ICollection<string> > >

// Notice that you can _widen_ both the key and the value types:
var dictView = view.CastPairs<object, IEnumerable<string>>(); // IEnumerable< IPair< object, IEnumerable<String> > >

// The `CastPairs` call is actually unnecessary provided you don't use `var` for the left-hand-side assignment.
// ...this is due to the implicit (and identity-preserving) variant interface conversion in C#, e.g.:
IEnumerable< IPair< Object, IEnumerable<String> > > dictView2 = view;

Console.WriteLine( Object.ReferenceEquals( view, dictView2 ) ); // --> True 
```

这是一些示例代码，可让您实现此目的：

```
// `out TKey` is for demonstration purposes. In production-quality code you probably should be using invariant key types.
public interface IPair<out TKey, out TValue>
    where TKey : notnull
{
    TKey   Key   { get; }
    TValue Value { get; }
}

public class Pair<TKey, TValue> : IPair<TKey, TValue>
    where TKey : notnull
{
    public TKey   Key   { get; }
    public TValue Value { get; }

    public Pair(TKey key, TValue value)
    {
        this.Key   = key;
        this.Value = value;
    }

    public Pair(KeyValuePair<TKey, TValue> pair)
        : this(pair.Key, pair.Value)
    {}
}

public static class PairSequenceExtensions
{
    public static IEnumerable<IPair<TKey, TValue>> GetCovariantView<TKey, TValue>(this IEnumerable<KeyValuePair<TKey, TValue>> source)
        where TKey : notnull
    {
        if (source is null) throw new ArgumentNullException(nameof(source));

        return source.Select(kvp => new Pair<TKey, TValue>(kvp));
    }

    public static IEnumerable<IPair<TKey, TValue>> CastPairs<TKey, TValue>(this IEnumerable<IPair<TKey, TValue>> source)
        where TKey : notnull
    {
        if (source is null) throw new ArgumentNullException(nameof(source));

        return source;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:39:45.023

几乎不。KVP 是一个结构：不是 itnerface，是 ValueType。

有趣的关于方差[的帖子。](https://stackoverflow.com/questions/2208043/generic-variance-in-c-sharp-4-0)

我认为演员表的性能更高，所以我更喜欢这样的代码：

```
private IDictionary<string, IEnumerable<string>> foos;

public IEnumerable<KeyValuePair<string, IEnumerable<string>> Foos
{
    get
    {
        return foos;
    }
} 
```

并投射`KeyValuePair.Value`到`ICollection`我真正需要的地方。坦率地说，这取决于 foos 的使用方式。

# c++ - 是否有自动将标头转换为 cpp 和 hpp 文件的工具？

> ID：14909974
> 
> 赞同：3
> 
> 时间：2013-02-16T11:53:04.527
> 
> 标签：c++, ide

在尝试想法时，我有一个（可能是坏的）习惯，将所有内容编码到一个单一的头文件中，将所有实现代码与类定义一起放置。随着代码的扩展，导航文件变得困难。因此，我将代码重构为单独的文件，并将实现细节（cpp 文件）从接口（hpp 文件）中分离出来。

所涉及的费力复制/粘贴似乎是机器的工作。是否有任何简单的工具可用于此任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T11:58:20.513

[如this question](https://stackoverflow.com/questions/8852502/tool-to-parse-c-source-and-move-in-header-inline-methods-to-the-cpp-source-fi)所述，您可以尝试[Lazy C++](http://www.lazycplusplus.com/)。

您还可以使用标准 IDE，并将每个函数从标头移动到源（对于 Visual Studio，您可以使用 Visual Assist，我认为 Eclipse 可以直接完成），通常就像右键单击 > 重构 > 移动到源或类似的东西.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:52:44.407

这种事情很常见。我的方法是只剪切和粘贴一次：复制原始文件，然后从头文件中删除内容并从源文件中删除其他内容。

# mysql - Sql 通配符，大写字母导致问题

> ID：14909979
> 
> 赞同：1
> 
> 时间：2013-02-16T11:53:31.060
> 
> 标签：mysql, sql, wildcard

进行非常简单的通配符搜索：

```
"SELECT firstname, lastname, email, text FROM members WHERE firstname LIKE '%$word%' OR lastname LIKE '%$word%' OR email LIKE '%$word%' OR text LIKE '%$word%'" 
```

如果我搜索“test”，它会找到“test”而不是“Test”，我该如何解决这个问题？奇怪的是，在另一个数据库中，它找到了“Test”和“test”这两个词，它们正在运行“latin1_swedish_ci”。

我认为“整理”语句会有所帮助，但我无法让它工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:20:01.207

```
"SELECT firstname, lastname, email, text FROM members WHERE UPPER(firstname) LIKE UPPER('%$word%') OR UPPER(lastname) LIKE UPPER('%$word%') OR UPPER(email) LIKE UPPER('%$word%') OR UPPER(text) LIKE UPPER('%$word%')" 
```

尝试这样做它会在将每个文本转换为大写后进行搜索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:59:29.557

```
"SELECT firstname, lastname, email, text 
FROM members 
WHERE upper(firstname) LIKE upper('%$word%') 
OR upper(lastname) LIKE upper('%$word%') 
OR upper(email) LIKE upper('%$word%') 
OR upper(text) LIKE upper('%$word%')"

"SELECT firstname, lastname, email, text 
FROM members 
WHERE lower(firstname) LIKE lower('%$word%') 
OR lower(lastname) LIKE lower('%$word%') 
OR lower(email) LIKE lower('%$word%') 
OR lower(text) LIKE lower('%$word%')" 
```

这应该工作:)

# content-management-system - Umbraco 是否提供内置功能或界面来创建类别、菜单或产品库？

> ID：14909981
> 
> 赞同：0
> 
> 时间：2013-02-16T11:53:35.180
> 
> 标签：content-management-system, umbraco, development-environment

Umbraco 是否提供内置功能或界面来创建类别、菜单或产品库？

我一直在为我的客户寻找一种最简单的方法。

希望，我能找到一个聪明的答案来回答我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:01:41.153

另一个可以尝试的地方是查看一些电子商务入门工具包如何像 uWebShop 或 TeaCommerce 包一样工作。他们在内容中有一个类别/产品结构，你可以看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:14:10.507

Umbraco 附带数量有限的入门套件、皮肤和宏模板。您可以随意使用其中的任何一个，但由于它们相当简单，通常您最终会构建您想要的东西。Umbraco 的一大优势就是这种灵活性。Umbraco 面向具有 .Net 背景的开发人员，如果您有 .Net 经验，这将非常容易。如果不是，则有一点学习曲线，但有大量可用资源以及一个活跃的社区来帮助学习过程。

Umbraco 有大约 4 个内置的入门套件，我们的 Umbraco 有[更多](http://our.umbraco.org/projects/starter-kits)其他用户贡献的。

# html - 两个浮动 div 未完全包含在父 div 中

> ID：14909987
> 
> 赞同：0
> 
> 时间：2013-02-16T11:54:34.767
> 
> 标签：html, css

我的小提琴：

[http://jsfiddle.net/yJdbF/17/](http://jsfiddle.net/yJdbF/17/)

HTML：

```
<div class="container">
    <div class="content">
        <div class="span70">
            DDDDD
        </div>
        <div class="span30">
            FFFFFFFFFF
        </div>
    </div>
</div> 
```

CSS：

```
.container {
  margin-top : 65px;
}

.content {
  border : 10px solid green;
}

.span30 {
  width: 40%;
  background-color : red;
  float : left;
}
.span70 {
  width: 60%;
  background-color : blue;
  float : left;

} 
```

div.span70 和 div.span30 没有完全包含在 div.content 中。span* div 是浮动的 div（这很棘手）。

我怎样才能将它们完全包含在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:59:43.650

如果你把

溢出：隐藏；

在您的 .content 类上，然后它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:59:09.250

你需要清除你的浮动。例如，使用 Nicolas Gallagher [micro clear-fix](http://nicolasgallagher.com/micro-clearfix-hack/)或简单地使用`overlow: hidden`

```
.content {
    border : 10px solid green;
    overflow: hidden;
} 
```

[**演示**](http://jsfiddle.net/yJdbF/22/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:59:11.527

您应该添加一个 clearfix 查看更新的[fiddle](http://jsfiddle.net/soyuka/yJdbF/21/)。

**CSS**

```
.clear {
  clear:both;
} 
```

**html**

```
<div class="container">
    <div class="content">
        <div class="span70">
            DDDDD
        </div>
        <div class="span30">
            FFFFFFFFFF
        </div>
    </div>
    <div class="clear"></div>
</div> 
```

# android - 自定义相机应用程序偶尔会在某些设备中崩溃

> ID：14909993
> 
> 赞同：2
> 
> 时间：2013-02-16T11:55:01.747
> 
> 标签：android, crash, camera

我制作了一个自定义相机应用程序，它在相机预览中有一个矩形，单击它会将图像保存在矩形内。

我已经能够使它在我的设备上运行良好，该设备是在 android 2.3 中运行的 Sony Xperia X8 以及 eclipse 模拟器 4.0.3、4.1.2。

问题是它在三星 Galaxy S3 果冻豆 (4.1) 上崩溃。

相机正在显示预览，但点击它偶尔会崩溃。

有时它工作得很好，有时它会崩溃。

就像我说的，它在某些设备上运行良好。

我没有手机，所以我无法调试它。

它与相机配置有什么关系吗？我的意思是三星有不同的相机配置。我不知道的？

它只是偶尔崩溃，这似乎很神秘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T04:39:04.380

我不知道你遇到的相机问题。但是这里有一个库，也许它可以帮助您检查来自不同设备的崩溃日志：**[Acra](https://code.google.com/p/acra/)**

希望能帮助到你：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T05:21:33.490

我认为由于**OutOfMemoryException**，您的应用程序有时会在**Galaxy S3**中崩溃。因为那手机的**摄像头分辨率**非常**高**。

 ******尝试将此代码与您的代码一起添加。

```
PictureCallback myPictureCallback_JPG = new PictureCallback()
{

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {

        BitmapFactory.Options opt;

        opt = new BitmapFactory.Options();
        opt.inTempStorage = new byte[16 * 1024];
        Parameters parameters = arg1.getParameters();
        Size size = parameters.getPictureSize();

        int height11 = size.height;
        int width11 = size.width;
        float mb = (width11 * height11) / 1024000;

        if (mb > 4f)
            opt.inSampleSize = 4;
        else if (mb > 3f)
            opt.inSampleSize = 2;

        bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length,opt);

    }
} 
```******

# connection - Indy、TidNotify 和关闭 TidTCPServer

> ID：14909996
> 
> 赞同：2
> 
> 时间：2013-02-16T11:55:13.997
> 
> 标签：connection, indy

我有一个 TidTCPServer，它在 onExcecute 事件中使用数据库操作（通过使用 TidNotify）。一切都很好，而不是可能关闭应用程序。在关闭应用程序期间，我不知道所有通知实例是否都完成了工作，通常我得到运行时错误 216（我想我在“通知”工作结束之前关闭了数据库）。有什么方法可以检查 - 是否有等待旧的通知帖子或不确定我可以关闭应用程序。另一个问题是如何保护 TidTCPServer 在关闭服务器过程中不接受新连接。我使用下面的代码，但我仍然得到错误。

```
type
  TShutdownThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TShutdownThread.Execute;
begin
  IdTCPServer.Active := false;
end;

//closing...
  if IdTCPServer.Active then
  begin
    with TShutdownThread.Create(false) do
      try
        WaitFor; // internally processes sync requests...
      finally
        Free;
      end;
  end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:16:40.417

**有什么方法可以检查 - 是否有等待旧的通知帖子或不确定我可以关闭应用程序。**

`TIdNotify`是异步的，它将请求发布到主线程消息队列以供稍后执行。`TShutdownThread.WaitFor()`退出后，待处理的请求可能仍在队列中。您可以调用 RTL 的`CheckSynchronize()`函数来处理任何剩余的请求，例如：

```
if IdTCPServer.Active then
begin
  with TShutdownThread.Create(false) do
  try
    WaitFor;
  finally
    Free;
  end;
  CheckSynchronize;
end; 
```

**如何保护 TidTCPServer 在关闭服务器过程中不接受新连接。**

在`TIdTCPServer`停用期间，它会为您关闭其侦听端口。但是，在服务器关闭端口之前可以接受新客户端的机会窗口非常小。服务器将关闭这些连接作为其关闭的一部分，但如果您不希望`OnExecute`为这些连接调用事件，那么您可以在停用服务器之前在代码中的某处设置一个标志，然后在`OnConnect`事件中检查该标志，如果已设置，则立即断开客户端连接，例如：

```
var
  ShuttingDown: boolean = False;

procedure TForm1.IdTCPServer1Connect(AContext: TIdContext);
begin
  if ShuttingDown then
  begin
    AContext.Connection.Disconnect;
    Exit;
  end;
  ...
end;

...

if IdTCPServer.Active then
begin
  ShuttingDown := True;
  try
    with TShutdownThread.Create(false) do
    try
      WaitFor;
    finally
      Free;
    end;
    CheckSynchronize;
  finally
    ShuttingDown := False;
  end;
end; 
```

# c++ - 为什么我的包含保护不能防止递归包含和多个符号定义？

> ID：14909997
> 
> 赞同：76
> 
> 时间：2013-02-16T11:55:19.683
> 
> 标签：c++, header-files, c++-faq, include-guards

[关于include 守卫的](http://en.wikipedia.org/wiki/Include_guard)两个常见问题：

1.  **第一个问题：**

    为什么不包含保护我的头文件免受**相互递归包含**的保护？每次我写如下内容时，我都会不断收到关于不存在符号的错误，这些错误显然存在，甚至更奇怪的语法错误：

    “啊”

    ```
    #ifndef A_H
    #define A_H

    #include "b.h"

    ...

    #endif // A_H 
    ```

    “嗯”

    ```
    #ifndef B_H
    #define B_H

    #include "a.h"

    ...

    #endif // B_H 
    ```

    “主.cpp”

    ```
    #include "a.h"
    int main()
    {
        ...
    } 
    ```

    为什么我在编译“main.cpp”时会出错？我需要做什么来解决我的问题？

* * *

2.  **第二个问题：**

    为什么不包括防止**多个定义**的警卫？例如，当我的项目包含两个包含相同标头的文件时，有时链接器会抱怨某些符号被多次定义。例如：

    “标题.h”

    ```
    #ifndef HEADER_H
    #define HEADER_H

    int f()
    {
        return 0;
    }

    #endif // HEADER_H 
    ```

    “source1.cpp”

    ```
    #include "header.h"
    ... 
    ```

    “source2.cpp”

    ```
    #include "header.h"
    ... 
    ```

    为什么会这样？我需要做什么来解决我的问题？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-16T11:55:19.683

> **第一个问题：**
> 
> 为什么不包含保护我的头文件免受**相互递归包含**的保护？

**他们是**。

他们没有帮助的是*相互包含的标头中数据结构定义之间的依赖关系*。要了解这意味着什么，让我们从一个基本场景开始，看看为什么包含守卫确实有助于相互包含。

假设您的相互包含文件`a.h`和`b.h`头文件具有琐碎的内容，即问题文本中代码部分中的省略号被替换为空字符串。在这种情况下，您`main.cpp`将愉快地编译。这仅归功于您的包含警卫！

如果您不相信，请尝试删除它们：

```
//================================================
// a.h

#include "b.h"

//================================================
// b.h

#include "a.h"

//================================================
// main.cpp
//
// Good luck getting this to compile...

#include "a.h"
int main()
{
    ...
} 
```

您会注意到编译器在达到包含深度限制时会报告失败。此限制是特定于实现的。根据 C++11 标准的第 16.2/6 段：

> #include 预处理指令可能出现在由于另一个文件中的#include 指令而被读取的源文件中，**直到实现定义的嵌套限制**。

**那么这是怎么回事**？

1.  解析`main.cpp`时，预处理器将满足指令`#include "a.h"`。该指令告诉预处理器处理头文件`a.h`，获取该处理的结果，并`#include "a.h"`用该结果替换字符串；
2.  在处理`a.h`时，预处理器将满足指令`#include "b.h"`，并且适用相同的机制：预处理器应处理头文件`b.h`，获取其处理结果，并`#include`用该结果替换指令；
3.  处理时`b.h`，该指令`#include "a.h"`将告诉预处理器处理`a.h`并用结果替换该指令；
4.  预处理器将再次开始解析`a.h`，再次遇到`#include "b.h"`指令，这将建立一个潜在的无限递归过程。当达到临界嵌套级别时，编译器会报错。

**但是，当存在包含保护**时，步骤 4 中不会设置无限递归。让我们看看为什么：

1.  （*同之前*）解析`main.cpp`时，预处理器会满足指令`#include "a.h"`。这告诉预处理器处理头文件`a.h`，获取该处理的结果，并`#include "a.h"`用该结果替换字符串；
2.  在处理过程`a.h`中，预处理器会满足指令`#ifndef A_H`。由于`A_H`尚未定义宏，它将继续处理以下文本。随后的指令 ( `#defines A_H`) 定义宏`A_H`。然后，预处理器将满足指令`#include "b.h"`：预处理器现在将处理头文件`b.h`，获取其处理结果，并`#include`用该结果替换指令；
3.  处理`b.h`时，预处理器会满足指令`#ifndef B_H`。由于`B_H`尚未定义宏，它将继续处理以下文本。随后的指令 ( `#defines B_H`) 定义宏`B_H`。然后，该指令`#include "a.h"`将告诉预处理器处理`a.h`并将`#include`指令替换`b.h`为预处理的结果`a.h`；
4.  编译器将再次开始预处理`a.h`，并再次满足`#ifndef A_H`指令。但是，在之前的预处理过程中，`A_H`已经定义了宏。因此，编译器这次会跳过后面的文本，直到`#endif`找到匹配的指令，并且这个处理的输出是空字符串（`#endif`当然假设指令后面没有任何内容）。因此，预处理器将用空字符串替换`#include "a.h"`in 指令`b.h`，并将追溯执行，直到它替换 .in 中的原始`#include`指令`main.cpp`。

因此，**包含守卫确实可以防止相互包含**。但是，它们无法帮助解决相互包含文件*中类定义之间的依赖关系：*

```
//================================================
// a.h

#ifndef A_H
#define A_H

#include "b.h"

struct A
{
};

#endif // A_H

//================================================
// b.h

#ifndef B_H
#define B_H

#include "a.h"

struct B
{
    A* pA;
};

#endif // B_H

//================================================
// main.cpp
//
// Good luck getting this to compile...

#include "a.h"
int main()
{
    ...
} 
```

鉴于上述标头，`main.cpp`将无法编译。

> 为什么会这样？

要查看发生了什么，再次执行步骤 1-4 就足够了。

很容易看出，前三个步骤和第四步的大部分内容都不受此更改的影响（只需通读它们即可确信）。但是，在第 4 步结束时发生了一些不同的事情：在用空字符串替换`#include "a.h"`指令后，预处理器将开始解析 的内容，特别是. 不幸的是，提到了 class的定义，这完全是*因为*包含保护！`b.h``b.h``B``B``A`

 *声明一个之前没有声明过的类型的成员变量当然是一个错误，编译器会礼貌地指出这一点。

> 我需要做什么来解决我的问题？

您需要[**前向声明**](http://en.wikipedia.org/wiki/Forward_declaration)。

实际上，*定义*class`A`不需要定义 class `B`，因为指向的指针*被*`A`声明为成员变量，而不是 type 的对象`A`。由于指针的大小是固定的，编译器不需要知道确切的布局，`A`也不需要计算它的大小来正确定义 class `B`。**因此，向前声明**类`A`并`b.h`让编译器知道它的存在就足够了：

```
//================================================
// b.h

#ifndef B_H
#define B_H

// Forward declaration of A: no need to #include "a.h"
struct A;

struct B
{
    A* pA;
};

#endif // B_H 
```

你`main.cpp`现在肯定会编译。几点说明：

1.  不仅通过用`#include`前向声明替换指令来打破相互包含`b.h`足以有效地表达 on 的依赖关系`B`：`A`尽可能/实用地使用前向声明也被认为是一种**良好的编程习惯**，因为它有助于避免不必要的包含，因此减少整体编译时间。然而，在消除相互包含之后，`main.cpp`将不得不修改为`#include`两者`a.h`和`b.h`（如果需要后者），因为`b.h`不再`#include`通过`a.h`;
2.  虽然类的前向声明`A`足以让编译器声明指向该类的指针（或在可接受不完整类型的任何其他上下文中使用它），但取消引用指针`A`（例如调用成员函数）或计算其大小是对不完整类型的*非法*操作：如果需要，`A`编译器需要获得完整的定义，这意味着必须包含定义它的头文件。这就是为什么类定义及其成员函数的实现通常被拆分为该类的头文件和实现文件（类*模板*是此规则的例外）：实现文件，`#include`项目中的其他文件永远不会, 可以安全`#include`使定义可见的所有必要标题。另一方面，头文件不会`#include`其他头文件*，除非*它们确实需要这样做（例如，使*基类*的定义可见），并且将尽可能/实用地使用前向声明。

> **第二个问题：**
> 
> 为什么不包括防止**多个定义**的警卫？

**他们是**。

他们没有保护您免受*不同翻译单元中的多个定义的影响*。这在 StackOverflow 上的[**问答**](https://stackoverflow.com/questions/14425262/why-include-guards-do-not-prevent-multiple-function-definitions/14425299#14425299)中也有解释。

太看到了，尝试删除包含防护并编译以下修改版本`source1.cpp`（或`source2.cpp`，重要的是）：

```
//================================================
// source1.cpp
//
// Good luck getting this to compile...

#include "header.h"
#include "header.h"

int main()
{
    ...
} 
```

编译器肯定会在这里抱怨`f()`被重新定义。这很明显：它的定义被包含了两次！但是，当**包含正确的 include guards时，上面的**`source1.cpp` **代码将毫无问题地编译`header.h`**。这是预期的。

尽管如此，即使存在包含保护并且编译器将不再用错误消息打扰您，*链接器*`source1.cpp`仍会坚持在合并从and的编译中获得的目标代码时会找到多个定义`source2.cpp`，并且会拒绝生成您的可执行。

> 为什么会这样？

基本上，项目中的每个`.cpp`文件（这里的技术术语是*翻译单元）都是单独**独立*编译的。解析`.cpp`文件时，预处理器将处理所有`#include`指令并展开它遇到的所有宏调用，并且这种纯文本处理的输出将作为输入提供给编译器，以将其翻译成目标代码。一旦编译器完成了为一个翻译单元生成目标代码，它将继续执行下一个翻译单元，并且在处理前一个翻译单元时遇到的所有宏定义都将被遗忘。

实际上，使用`n`翻译单元（`.cpp`文件）编译项目就像执行相同的程序（编译器）`n`多次，每次使用不同的输入：相同程序的不同执行**不会共享先前程序执行的状态（s )** . 因此，每个翻译都是独立执行的，编译一个翻译单元时遇到的预处理器符号在编译其他翻译单元时不会被记住（如果你想一想，你会很容易意识到这实际上是一种可取的行为）。

因此，即使包含保护可以帮助您防止在一个翻译单元中递归相互包含和*冗余*包含相同的标头，它们也无法检测相同的定义是否包含在*不同*的翻译单元中。

`.cpp`然而，当合并项目所有文件编译生成的目标代码时，链接器*将*看到同一个符号被多次定义，因为这违反了[**一个定义规则**](http://en.wikipedia.org/wiki/One_Definition_Rule)。根据 C++11 标准的第 3.2/3 段：

> **每个程序都应包含该程序中 odr 使用的每个非内联**函数或变量的准确定义；无需诊断。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。**内联函数应在使用它的每个翻译单元中定义**。

因此，链接器将发出错误并拒绝生成程序的可执行文件。

> 我需要做什么来解决我的问题？

*如果*你想将你的函数定义保存在一个`#include`由*多个*`#include`翻译单元组成的头文件中（注意，如果你的头文件只由*一个*翻译单元组成，不会出现问题），你需要使用`inline`关键字。

否则，您只需将函数的*声明*`header.h`保留在 中，将其定义（主体）仅放入*一个*单独`.cpp`的文件中（这是经典方法）。

该`inline`关键字表示对编译器的非绑定请求，以直接在调用站点内联函数的主体，而不是为常规函数调用设置堆栈框架。尽管编译器不必满足您的请求，但`inline`关键字确实成功地告诉链接器容忍多个符号定义。根据 C++11 标准的第 3.2/5 段：

> **类类型（第 9 条）、枚举类型（7.2）、**带外部链接的内联函数**（7.1.2）、类模板（第 14 条）、非静态函数模板（14.5.6）**可以有多个定义**、类模板的静态数据成员 (14.5.1.3)、类模板的成员函数 (14.5.1.1) 或在程序中未指定某些模板参数的模板特化 (14.7、14.5.5)，前提是每个定义出现在不同的翻译单元中，并且只要定义满足以下要求 [...]**

 ****上一段基本上列出了所有通常放在头文件中的定义**，因为它们可以安全地包含在多个翻译单元中。相反，所有其他具有外部链接的定义都属于源文件。

使用`static`关键字而不是`inline`关键字还可以通过为您的函数提供[**内部链接**](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)来抑制链接器错误，从而使每个翻译单元都拥有该函数（及其局部静态变量）的私有*副本。*但是，这最终会导致更大的可执行文件，并且`inline`通常应该首选使用 。

实现与`static`关键字相同结果的另一种方法是将函数`f()`放在未命名的*命名空间*中。根据 C++11 标准的第 3.5/4 段：

> 未命名的命名空间或在未命名的命名空间中直接或间接声明的命名空间具有内部链接。所有其他命名空间都有外部链接。具有命名空间范围但未在上面给出内部链接的名称具有与封闭命名空间相同的链接，如果它是以下名称：
> 
> - 一个变量; 或者
> 
> —**一个函数**；或者
> 
> — 命名类（第 9 条），或在 typedef 声明中定义的未命名类，其中该类具有用于链接目的的 typedef 名称（7.1.3）；或者
> 
> — 命名枚举 (7.2)，或在 typedef 声明中定义的未命名枚举，其中枚举具有用于链接目的的 typedef 名称 (7.1.3)；或者
> 
> — 属于具有链接的枚举的枚举数；或者
> 
> ——一个模板。

出于与上述相同的原因，`inline`应首选关键字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-10-13T16:42:37.050

[fiorentinoing](https://stackoverflow.com/users/2794395/fiorentinoing)的答案在 Git 2.24（2019 年第四季度）中得到了回应，其中 Git 代码库中正在进行类似的代码清理。

请参阅[René Scharfe ( ) 的](https://github.com/rscharfe)[提交 2fe4439](https://github.com/git/git/commit/2fe44394c8852f7b2625c3d63e9f5d5ad9e9baa9)（2019 年 10 月 3 日[）](https://github.com/rscharfe)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a4c5d9f](https://github.com/git/git/commit/a4c5d9f66eaab94c874cd59584c0ede44b6e80bc))^(中，2019 年 10 月 11 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

> ## treewide：删除重复的`#include`指令
> 
> 发现：
> 
> ```
> git grep '^#include ' '*.c' | sort | uniq -d 
> ```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-11-21T13:34:32.840

首先，您应该 100% 确定您在“包含警卫”中没有重复项。

用这个命令

```
grep -rh "#ifndef" * 2>&1 | uniq -c | sort -rn | awk '{print $1 " " $3}' | grep -v "^1\ " 
```

您将 1) 突出显示所有包含守卫，获取每个包含名称的计数器的唯一行，对结果进行排序，仅打印计数器并包含名称并删除真正唯一的那些。

*提示：*这相当于获取重复包含名称的列表***

# c# - 如何在选定索引的列表框中使用鼠标右键单击按钮？

> ID：14909998
> 
> 赞同：1
> 
> 时间：2013-02-16T11:55:20.060
> 
> 标签：c#

我有这个选定的索引事件 a `ListBox`：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{    
    if (listBox1.SelectedItem != null)
    {
        label4.Text = listBox1.SelectedItem.ToString();
        string startTag = "Url: ";
        string endTag = " ---";
        int startTagWidth = startTag.Length;
        int endTagWidth = endTag.Length;
        int index = 0;
        index = label4.Text.IndexOf(startTag, index);
        int start = index + startTagWidth;
        index = label4.Text.IndexOf(endTag, start + 1);
        string g = label4.Text.Substring(start, index - start);
        label4.Text = g;
        mainUrl = g;
    }
} 
```

我希望在我选择一个索引（项目）之后`ListBox`，我现在用鼠标右键单击这个索引，它会做一些事情。但是，如果我在表单上的任何其他区域上单击鼠标右键，`ListBox`它不会做任何事情。仅当鼠标位于所选索引上时。

我需要做的是，用户将能够从`ListBox`. 我只是不知道当用户单击鼠标右键时如何做到这一点的最佳逻辑是什么。

显示我在用户第一次选择一个项目时并且仅当鼠标在该选定项目上方/上时才成功？显示我这样做，如果用户在任何项目上单击鼠标右键，它将自动选择它并执行某些操作？

我不确定哪种方式更好，逻辑以及如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:11:47.670

只需订阅Listbox的MouseDown，`IndexFromPoint`用于检查当前点击的项是否为选中项。

这是一个例子：

```
private void listBox1_MouseDown(object sender, MouseEventArgs e)
{
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            int index = listBox1.IndexFromPoint(e.Location);
            {
                if (index == listBox1.SelectedIndex)
                {
                    MessageBox.Show("Selected item clicked");
                }
            }
        }
} 
```