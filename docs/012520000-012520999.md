# StackOverflow 问答 12520000-12520999

# sql - SQL 表返回带有评论编号 ID 的项目数

> ID：12520001
> 
> 赞同：0
> 
> 时间：2012-09-20T19:58:42.630
> 
> 标签：sql

我有一个 SQL 表，其中保存了这样的评论....

![SQL 数据库示例](../Images/acb1a6171e7f0dccd79117678a1db144.png)

我希望返回为某个 ID 号列出的评论数量。该表本身称为 gg_reviews

我知道这很简单，但由于某种原因它让我感到困惑，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:00:37.863

除非我遗漏了什么，否则你只需要`COUNT()`and `GROUP BY`。该`GROUP BY`字段应该是每个页面的唯一值。

```
SELECT count(*) as TotalReview, ID  -- change ID to the unique id for the page
FROM gg_reviews
GROUP BY ID  -- change ID to the unique id for the page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:01:26.043

您没有说要计算评论的 ID，但前提是它是 page_id：

```
SELECT page_id, COUNT(*) as totalReviews
FROM gg_reviews
GROUP BY page_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:03:03.517

kk .. 找不到一种方法来查看您存储 id 的位置.. 但我会“建议”以下内容：

```
SELECT ID, COUNT(ID) as views FROM gg_reviews GROUP BY ID 
```

# c# - 表示查找的三元绘图数据

> ID：12520003
> 
> 赞同：6
> 
> 时间：2012-09-20T19:58:54.360
> 
> 标签：c#, data-structures

![土壤类型](../Images/a57917543c47671c0c641a073e164193.png)

我试图在这个三元图上表示数据以进行查找。我希望能够将所有三个值都输入一个函数并返回这些值属于哪个区域类别。我正在研究的方法是使用笛卡尔坐标将每个区域转换为多边形。然后将提供的值转换为一个点并检查该点是否位于哪个多边形内。我很确定这会起作用，但对于简单的查找来说似乎有点过头了？

我在问是否有一种方法可以在数组或对象中表示此图上的数据，以便简单的查找就足够了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:14:47.753

您*可以*将上述内容转换为笛卡尔坐标系，但我认为您错过了实际执行此操作所需的重要方面。

在上图中，您将多边形视为二维结构，但您有一个*三维*点。这不是不可能的，毕竟我们在上面的二维平面上看到了三角形，但是转换到笛卡尔空间并不是很简单。

相反，这看起来*非常*像[决策树](http://en.wikipedia.org/wiki/Decision_tree)的图形表示。看起来粘土、淤泥和沙子的数量的读数被用来开发这种表示。

基本上，您有一个包含三个值的元组，并且您希望根据这些值获得分类。

在上述情况下，您可以将分类“淤泥”的决策树建模为：

```
// These are approximate based on above.  Each branch of the
// tree is evaluated on one value out of all the values.
if (silt >= .8)
{
    // True case.  Check sand content.
    if (sand >= .20)
    {
        // Something else, other branches.
    }
    else
    {
        // False case, can possibly be silt.
        if (clay >= .125)
        {
            // Something else, other branches.
        }
        else
        {
            // Leaf, this is a classification.
            // Can return more strongly typed classification if you want.
            return "silt";
        }            
    }

}
else
{
    // Something else, other branches.
} 
```

每个`if`/`else`语句代表决策树中的一个分支。在每个分支上，您需要评估*该分支中该点*为您提供最多[信息增益](http://en.wikipedia.org/wiki/Information_gain_in_decision_trees)的变量的值（几乎听起来像，您可以从该拆分中进行多少分类？）这是基于对该变量做出决定的[熵（或不确定性）。](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)

树可以自动生成，也可以自己手动编码。虽然后者是可能的，但我强烈建议使用自动化/基于代码的方法来开发它。我强烈建议看一下[Accord.NET](http://code.google.com/p/accord/)（需要[AForge.NET](http://code.google.com/p/aforge/)，两者都*很棒*）。为了让您开始，您应该查看这篇[博客文章，展示如何使用 Accord.NET 创建决策树](http://crsouza.blogspot.com/2012/01/decision-trees-in-c.html)。

无论您采用哪种方式，最终都会得到一个函数，该函数采用三个值（粘土、淤泥和沙子）并返回您的分类，根据每个值遍历树。

请注意，您不一定要有一组映射到每个分类的一对一标准（分支）（如第一个代码示例中所示）。根据上面示例中多边形上的顶点数量，您将需要额外的分支来处理这些情况。

如果您有原始样本数据，那么您只需通过决策树构建器运行样本数据，它应该会创建一个与上述类似的决策树。

如果您*没有*原始样本数据，您可以使用上面的顶点*创建它并对其进行分类。*例如：

```
silt    sand    clay    classification
----    ----    ----    --------------
   0      50     100    clay (top point)
 100       0      50    silt (right bottom point)
  50     100       0    sand (left bottom point)
  15      45      40    sandy clay OR clay cloam OR clay (depending on splits)
... 
```

关于最后一行（和后续行），决策树将根据这些值设置边界，并且由于它是[连续](http://en.wikipedia.org/wiki/Continuous_probability_distribution#Continuous_probability_distribution)的，它通常会根据大于或等于该值的所有值做出决策。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T00:51:20.420

The way to do this is as you have suggested, using the 'point in polygon approach', I mean, when you do this visually, that is exactly what you are doing in your head. The problem with the accepted answer, is that whilst in this case (and simple cases) you might be able to build a decision tree, for a situation where there are many more categories, this process would become inextricably more complicated IMHO. Perhaps categories overlap, perhaps categories are only a single point, the process that I propose here, these artefacts would have no consequence to the result.

I have already covered [HERE](http://www.ggtern.com/2014/01/15/usda-textural-soil-classification/), the production of the USDA soil classification diagram, the result I attach below, based off the dataset provided in the [ggtern](http://www.ggtern.com) package.

![enter image description here](../Images/a3e6e6b70621831f63e746bc5acccfc2.png)

But what may not be so clear, is that the [ggtern](http://www.ggtern.com) package has some functions that make this a little less cumbersome than it has to be. Specifically, there are some internal functions in the ggtern package (routinely used in the backend) to make the transformations necessary in order to evaluate the point in polygon truth table for each point against the reference categories.

Such approach is fairly straight forward with the **ddply** function from the **plyr** package, and, the **point.in.polygon** function, from the **sp** package.

First let us load the necessary packages, and load the USDA data from ggtern. Let us also create some sample data, testing this process for a point lying on a vertice, and a point lying in the centre of a classification region!.

```
library(ggtern)
library(sp)
library(plyr)

#The Main Data to lookup against
data(USDA)

#The sample Data (Try a point at a vertice, and a point in the middle...)
testData = rbind(data.frame(Clay=.4,Sand=.2,Silt=.4), #Vertice point
                 data.frame(Clay=1,Sand=1,Silt=1)/3)  #Simple middle point 
```

I then suggest to use the internal function, `transform_tern_to_cart(...)`, to convert both datasets to cartesian coordinates.

```
#Do the transformation to cartesian
USDA[,c("x","y")]     = transform_tern_to_cart(USDA$Clay,USDA$Sand,USDA$Silt)
testData[,c("x","y")] = transform_tern_to_cart(testData$Clay,testData$Sand,testData$Silt) 
```

By using a combination of `ddply(...)` and `apply(...)`, we can then test each point in the test set, against each category in the reference set via use of the `point.in.polygon(...)` function.

```
#Create a function to do the lookup
lookup <- function(data=testData,lookupdata=USDA,groupedby="Label"){  
  if(!groupedby %in% colnames(lookupdata))
    stop("Groupedby value is not a column of the lookupdata")

  #For each row in the data
  outer = apply(data[,c("x","y")],1,function(row){

    #for each groupedby in the lookupdata
    inner = ddply(lookupdata,groupedby,function(df){
      if(point.in.polygon(row[1],row[2],df$x,df$y) > 0) #Is in polygon?
        return(df) #Return a valid dataframe
      else
        return(NULL) #Return nothing
    })

    #Extract the groupedby data from the table
    inner = unique(inner[,which(colnames(inner) == groupedby)])

    #Join together in csv string and return to 'outer'
    return(paste(as.character(inner),collapse=","))
  })

  #Combine with the original data and return
  return(cbind(data,Lookups=outer))
} 
```

Which can then be called in the following manner:

```
#Execute
lookup() 
```

You will notice that the first point satisfies four (4) categories, and the second, only one (1), as to be expected.

# security - PowerShell 的 ConvertFrom-SecureString -key 的安全性如何

> ID：12520006
> 
> 赞同：3
> 
> 时间：2012-09-20T19:59:27.120
> 
> 标签：security, powershell, securestring

我有一个模块，其中包含一些带有一些私有数据的字符串，这些数据应该很难获得，但经常更改。我需要将此脚本放在可以访问它的各种机器上，并且代码由不应该拥有用于派生输出的信息的人读取。

我真的很担心不时更改的字符串，因此我正在考虑创建一个脚本，该脚本提示输入这些值作为安全字符串，并使用密钥对其进行加密并将它们转储到 xml 文件中。然后使用 XML 文件提供字符串。任何从该模块运行需要该数据的命令的人都必须提供密钥，以便可以解密字符串。

这基本上是我期望做的，但我将处理对象

```
$secure = Read-Host -AsSecureString
$encrypted =  ConvertFrom-SecureString -securestring $secure -key somekey
$encrypted | Export-Clixml testing.xml
$imported = Import-Clixml testing.xml
$value = ConvertTo-SecureString -string $imported -key somekey 
```

我了解该字符串将使用 Rijndael 加密算法进行加密，我相信该算法也称为 AES。

如果可以访问脚本，需要多少努力才能破解它位于 xml 文件中的加密密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:53:59.397

然后加密的秘密字符串*本身*是安全的，但它可能无法以这种形式使用。 `ConvertTo-SecureString`会将其从加密的标准字符串转换为`SecureString`，但为了做到这一点，您需要密钥。如果您的用户或脚本拥有密钥，那么他们可以做任何事情。

您甚至可以将它传递`SecureString`给您正在使用的任何应用程序，还是需要将其转换回常规字符串？如果秘密数据在任何时候都是明文形式，那么您的用户可以看到它。

即使您的应用程序支持`SecureString`，您仍然会感到沮丧，因为`SecureString`它很容易破解：

```
[System.Runtime.InteropServices.Marshal]::PtrToStringAuto(
  [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($securestring)
 ) 
```

用一些密钥加密秘密数据但允许低权限用户拥有密钥的方法被打破了。相当于“我不想让我的朋友拿到我家的钥匙，所以我把钥匙锁在一个盒子里，把盒子的钥匙给他”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:22:38.920

如果运行脚本的系统不可靠，则无需付出任何努力。由于`SecureString`处理需要密钥，脚本运行者必须知道它 - 如果它不可靠，则您的系统已经受到威胁。

这个问题已经[讨论](https://stackoverflow.com/questions/3041322/securely-store-a-password-in-program-code?rq=1 "所以讨论")过好几次了。

`SecureString`使用 Windows 的数据保护 API。它可能足够坚固，在实际情况下牢不可破——除了[橡胶软管](http://en.wikipedia.org/wiki/Rubber-hose_cryptanalysis "维基百科")密码分析。

如果您更详细地解释您要实现的目标，则可能有保护数据的方法。

保护敏感数据的一种方法是将其保存在安全系统中。给客户一些预先生成的令牌，比如 GUID。每次客户端需要数据时，它都会向安全的远程系统发送一个令牌。令牌会根据 IP/日期/其他内容进行检查，并且所有处理都在远程系统上完成。结果数据返回给客户端。如果结果数据是机密部分，这显然是行不通的，但你为什么要把这样的信息发送到不可靠的系统呢？

# mysql - 使用“特殊”WHERE 子句在一个 sql 查询中从表中选择数据

> ID：12520019
> 
> 赞同：0
> 
> 时间：2012-09-20T19:59:59.957
> 
> 标签：mysql, sql

我在使用一个查询从表中选择正确数据时遇到问题。我不确定是否可以做到。

```
properties:
- id
- name

facilities:
- id
- name

property_facilities:
- property_id
- facility_id 
```

正如您在上面的架构中看到的，每个属性都可以有一个或多个设施。在我的代码中的某个时刻，我需要有一个具有一些设施的属性 ID 列表。

伪 SQL：

```
SELECT property_id
FROM property_facilities
WHERE
  facility_id IN (8, 12) 
```

显然这是行不通的，因为我需要一个具有设施 8 和 12 的属性 ID 列表，而不仅仅是其中一个。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:03:33.827

添加具有预期数量的匹配 id 的 HAVING 子句将执行此操作：

```
SELECT property_id
FROM property_facilities
WHERE facility_id IN (8, 12)
GROUP BY property_id
HAVING count(facility_id) = 2 
```

但是，这确实假设您的`property_facilities`表中没有重复的条目。如果这样做，您可以在子查询中使用 DISTINCT 来解决此问题，或者只需添加约束以首先不允许重复。

这是带有 DISTINCT 子查询的相同查询：

```
SELECT property_id
FROM (SELECT DISTINCT property_id, facility_id FROM property_facilities) distinct_rows
WHERE facility_id IN (8, 12)
GROUP BY property_id
HAVING count(facility_id) = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:05:21.757

怎么样

> 从property_id 所在的属性中选择property_id（从property_facilities 中选择property_id）

这将生成具有任何设施的所有属性 ID 的列表，而不仅仅是 8 或 12

编辑：如果您尝试获取具有设施 8 和 12 的属性列表，您可以执行以下操作：

```
select property_id from properties where property_id in 
(select property_id from property_facilities where facility_id = 8) and property_id in
(select property_id from property_facilities where facility_id = 12) 
```

# apache-flex - Flex AdvancedDataGrid (mx) 如何在 mouseWheel 事件中获取 dataGrid 项目

> ID：12520028
> 
> 赞同：1
> 
> 时间：2012-09-20T20:00:40.287
> 
> 标签：apache-flex, events, mousewheel, advanceddatagrid

我有一个（mx）**AdvancedDataGrid**，当我使用鼠标上的滚轮时，我想捕获我使用鼠标滚轮悬停的dataGrid中的项目。

我补充说：`mouseWheel="doMouseWheel(event)"`在这种情况下，我需要能够在我的 dataGrid 中找到我使用鼠标滚轮悬停的项目。

我知道你可以得到`event.delta`，但不知道从那里去哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:44:03.077

我想通了......数据在：event.target.data

# ios - 如何在 iOS 6 中强制 UIViewController 为纵向

> ID：12520030
> 
> 赞同：85
> 
> 时间：2012-09-20T20:00:46.917
> 
> 标签：ios, xcode, ios6, xamarin.ios

由于`ShouldAutorotateToInterfaceOrientation`在 iOS 6 中已弃用，我用它来强制特定视图**仅显示纵向**，在 iOS 6 中执行此操作的正确方法是什么？这仅适用于我的应用程序的一个区域，所有其他视图都可以旋转。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-09-22T00:49:55.323

如果您希望我们所有的导航控制器都尊重顶部视图控制器，您可以使用一个类别，这样您就不必经历并更改一堆类名。

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

正如一些评论指出的那样，这是解决问题的快速方法。更好的解决方案是子类 UINavigationController 并将这些方法放在那里。子类也有助于支持 6 和 7。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-12-21T00:12:26.207

Ray Wenderlich 团队在“iOS6 By Tutorials”中特别提到了 iOS6 的最佳方法 - [http://www.raywenderlich.com/](http://www.raywenderlich.com/)`UINavigationController` ，并且在大多数情况下比子类化更好。

我将 iOS6 与`UINavigationController`包含一组作为初始视图控制器的情节提要一起使用。

//AppDelegate.m - 不幸的是，此方法在 iOS6 之前不可用

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

if(self.window.rootViewController){
    UIViewController *presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
    orientations = [presentedViewController supportedInterfaceOrientations];
}

return orientations;
} 
```

//MyViewController.m - 返回你想要支持的任何方向`UIViewController`

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-02-24T22:39:20.403

该答案与OP帖子评论中提出的问题有关：

要强制视图以给定方向显示，请在 viewWillAppear 中添加以下内容：

```
UIApplication* application = [UIApplication sharedApplication];
if (application.statusBarOrientation != UIInterfaceOrientationPortrait)
{
    UIViewController *c = [[UIViewController alloc]init];
    [self presentModalViewController:c animated:NO];
    [self dismissModalViewControllerAnimated:NO];
} 
```

这有点像黑客，但这会强制`UIViewController`以纵向呈现，即使之前的控制器是横向的

**iOS7 更新**

上述方法现已弃用，因此对于 iOS 7，请使用以下方法：

```
UIApplication* application = [UIApplication sharedApplication];
if (application.statusBarOrientation != UIInterfaceOrientationPortrait)
{
     UIViewController *c = [[UIViewController alloc]init];
     [c.view setBackgroundColor:[UIColor redColor]];
     [self.navigationController presentViewController:c animated:NO completion:^{
            [self.navigationController dismissViewControllerAnimated:YES completion:^{
            }];
     }];
} 
```

有趣的是，在撰写本文时，现在*或*解雇都必须是动画的。如果两者都不是，那么您将得到一个白屏。不知道为什么这使它起作用，但确实如此！视觉效果因动画而异。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-09-20T22:59:16.770

所以我在只显示纵向模式视图时遇到了同样的问题。通常，我会创建一个`UINavigationController`，将 设置`viewController`为`rootViewController`，然后将 显示`UINavigationController`为模态视图。但在 iOS 6 中，`viewController`现在将向 navigationController 询问其支持的界面方向（默认情况下，现在全部适用于 iPad，除了颠倒的 iPhone 之外的一切）。

**解决方案**：我必须`UINavigationController`继承并覆盖自动旋转方法。有点蹩脚。

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}
// pre-iOS 6 support 
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-10-10T07:05:49.473

IOS 5

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{

    return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

IOS 6

```
-(BOOL)shouldAutorotate{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations{

    //    UIInterfaceOrientationMaskLandscape;
    //    24
    //
    //    UIInterfaceOrientationMaskLandscapeLeft;
    //    16
    //
    //    UIInterfaceOrientationMaskLandscapeRight;
    //    8
    //
    //    UIInterfaceOrientationMaskPortrait;
    //    2

    //    return UIInterfaceOrientationMaskPortrait; 
    //    or
          return 2;
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-01-21T19:34:47.227

我不同意@aprato 的回答，因为 UIViewController 旋转方法是在类别本身中声明的，因此如果您在另一个类别中覆盖然后会导致未定义的行为。在 UINavigationController（或 UITabBarController）子类中覆盖它们更安全

此外，这不包括您从横向视图推送/呈现/弹出到仅纵向 VC 或反之亦然的场景。要解决这个棘手的问题（Apple 从未解决过），您应该：

**在 iOS <= 4 和 iOS >= 6 中：**

```
UIViewController *vc = [[UIViewController alloc]init];
[self presentModalViewController:vc animated:NO];
[self dismissModalViewControllerAnimated:NO];
[vc release]; 
```

**在 iOS 5 中：**

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
UIView *view = [window.subviews objectAtIndex:0];
[view removeFromSuperview];
[window addSubview:view]; 
```

这些真的会迫使 UIKit 重新评估你所有的 shouldAutorotate 、supportedInterfaceOrientations 等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-05T12:33:38.003

我有一个很好的方法混合[https://stackoverflow.com/a/13982508/2516436](https://stackoverflow.com/a/13982508/2516436)和[https://stackoverflow.com/a/17578272/2516436](https://stackoverflow.com/a/17578272/2516436)

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

    if(self.window.rootViewController){
        UIViewController *presentedViewController = [self topViewControllerWithRootViewController:self.window.rootViewController];
        orientations = [presentedViewController supportedInterfaceOrientations];
    }

    return orientations;
}

- (UIViewController*)topViewControllerWithRootViewController:(UIViewController*)rootViewController {
    if ([rootViewController isKindOfClass:[UITabBarController class]]) {
        UITabBarController* tabBarController = (UITabBarController*)rootViewController;
        return [self topViewControllerWithRootViewController:tabBarController.selectedViewController];
    } else if ([rootViewController isKindOfClass:[UINavigationController class]]) {
        UINavigationController* navigationController = (UINavigationController*)rootViewController;
        return [self topViewControllerWithRootViewController:navigationController.visibleViewController];
    } else if (rootViewController.presentedViewController) {
        UIViewController* presentedViewController = rootViewController.presentedViewController;
        return [self topViewControllerWithRootViewController:presentedViewController];
    } else {
        return rootViewController;
    }
} 
```

并为每个 UIViewController 返回您想要支持的任何方向

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-20T23:59:27.267

不要在这里沉闷，但你会这么好心分享你的子类吗？谢谢你。

编辑：好吧，我终于做到了，子类做起来很简单。我只需要`navigationController`在`AppDelegate`as`UINavigationControllerSubclass`而不是 default中声明`UINavigationController`，然后修改您的子类：

```
- (BOOL)shouldAutorotate {
    return _shouldRotate;
} 
```

所以我可以通过调用来设置我想要旋转的任何视图`viewDidLoad`

```
_navController = (UINavigationController *)self.navigationController;
[_navController setShouldRotate : YES / NO] 
```

希望这个调整也能帮助其他人，谢谢你的提示！

提示：利用

```
- (NSUInteger)supportedInterfaceOrientations 
```

在您的视图控制器中，因此您最终不会在横向中获得纵向所需的视图，反之亦然。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-09T12:49:18.200

我有一个使用 UISplitViewController 和 UISegmentedController 的相对复杂的通用应用程序，并且有一些视图必须使用`presentViewController`. 使用上面建议的方法，我能够让 iPhone ios 5 和 6 正常工作，但出于某种原因，iPad 只是拒绝显示为横向。最后，我找到了一个适用于设备和 ios 5 和 6 的简单解决方案（经过数小时的阅读和反复试验后实施）。

步骤 1) 在控制器上，指定所需的方向（或多或少如上所述）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    NSInteger mask = UIInterfaceOrientationMaskLandscape;
    return mask;

} 
```

Step 2) 创建一个简单的 UINavigationController 子类并实现以下方法

```
-(BOOL)shouldAutorotate {
        return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
        return UIInterfaceOrientationMaskLandscape;
} 
```

步骤 3) 展示您的 viewController

```
vc = [[MyViewController alloc]init];
MyLandscapeNavigationController *myNavigationController = [[MyLandscapeNavigationController alloc] initWithRootViewController:vc];
[self myNavigationController animated:YES completion:nil]; 
```

希望这对某人有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-20T20:26:09.383

我自己没有对其进行测试，但文档指出您现在可以覆盖这些方法：`supportedInterfaceOrientations`和`preferredInterfaceOrientationForPresentation`.

您可能可以实现您想要的 y 在这些方法中仅设置您想要的方向。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-14T11:38:39.767

使用子类或类别来允许 UINavigationController 和 UITabBarController 类中的 VC 的答案运行良好。从横向选项卡栏控制器启动仅纵向模式失败。如果您需要这样做，请使用显示和隐藏非动画模式视图的技巧，但**在 viewDidAppear 方法中进行**。它在 viewDidLoad 或 viewWillAppear 中对我不起作用。

除此之外，上述解决方案工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-12T20:44:41.863

对于 Monotouch，您可以这样做：

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
    {
    return UIInterfaceOrientationMask.LandscapeRight;
}

public override UIInterfaceOrientation PreferredInterfaceOrientationForPresentation()
    {
    return UIInterfaceOrientation.LandscapeRight;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-13T06:30:09.433

我看到了很多答案，但没有得到关于方向的特定想法和答案，但看到链接很好地理解了方向并删除了 ios6 的强制旋转。

[http://www.disalvotech.com/blog/app-development/iphone/ios-6-rotation-solution/](http://www.disalvotech.com/blog/app-development/iphone/ios-6-rotation-solution/)

我认为这是完全的帮助。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-01-13T10:15:30.657

只需转到 project.plist 然后添加支持的界面方向，然后仅添加 Portrait（底部主页按钮）和 Portrait（顶部主页按钮）。

您可以根据您的项目要求添加或删除那里的方向。

谢谢

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2013-01-09T08:17:52.493

1) 检查您的项目设置和 info.plist 并确保只选择了您想要的方向。

2）将以下方法添加到最顶层的视图控制器（导航控制器/标签栏控制器）

```
- (NSUInteger) supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;

} 
```

3）将以下方法添加到您的应用委托

```
- (NSUInteger) supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;

}

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;

} 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2013-06-23T21:22:26.297

`ViewController`把它放在每个你不想旋转的 .m 文件中：

```
- (NSUInteger)supportedInterfaceOrientations
{
    //return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;
    return UIInterfaceOrientationMaskPortrait;
} 
```

请参阅[此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)了解更多信息。

# javascript - 如何自定义 express.js url 查询参数解析

> ID：12520031
> 
> 赞同：2
> 
> 时间：2012-09-20T20:00:47.520
> 
> 标签：javascript, node.js, express

因此，[req.query](http://expressjs.com/api.html#req.query)返回查询参数的哈希值。更好的是，如果一个参数实际上是一个 json 对象，那么它会将其解析为相应的 json，这很棒。

但是，如何自定义此解析？例如，我希望将某个值解析为数字，而不是字符串。当然，我可以事后进行并修改返回的对象。但是，我很想知道这个过程是否可以定制。

**编辑**

例如，考虑以下请求：

```
GET http://localhost:8000/admin/api/inventory?rowsPerPage=25&page=0&q%5Bqty%5D%5B%24lt%5D=100 
```

解码它我们得到：

```
GET http://localhost:8000/admin/api/inventory?rowsPerPage=25&page=0&q[qty][$lt]=100 
```

现在，express 将这些查询参数转换为

```
req.query = {rowsPerPage: "25", page: "0", q: {qty: {$lt: "100"}} 
```

我的问题是“25”、“0”和“100”——我希望它们是数字。因此，我可以更改`req.query`事后或干扰解析过程。我想学后者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T03:27:18.083

这就是我的做法（使用 CoffeeScript 和 Lodash）：

```
app.use (req, res, next) ->
  # Ensure all integer parameters are parsed correctly.
  _.each req.query, (value, key) ->
    unless isNaN value
      req.query[key] = _.parseInt value
  next() 
```

使用 JavaScript 并且无需扩展也可以轻松实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:11:49.037

你应该看看[connect提供的](http://www.senchalabs.org/connect/)[req.query](http://www.senchalabs.org/connect/query.html)中间件。它基于[node-querystring](https://github.com/visionmedia/node-querystring)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:44:15.387

查询字符串在此处解析[connect-query.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/query.js)，它基于 tj 的查询字符串解析器[节点查询字符串](http://github.com/visionmedia/node-querystring)，您可能想要查看它或节点查询字符串解析器。AFAIK 如果不分叉 express 并在其中更改某些内容，您就无法更改 qs 解析。无论如何，在中间件中或稍后在您的应用程序中处理这种情况，您需要将字符串作为数字，而不是在每个请求中检查数字，性能会更好。

# javascript - Javascript 来捕捉错过的按键事件

> ID：12520032
> 
> 赞同：1
> 
> 时间：2012-09-20T20:00:56.903
> 
> 标签：javascript, php, jquery, jquery-events, onkeydown

免责声明：我不是真正的开发人员，所以我可能在这里有一些代码意大利面......现在我需要使用我所拥有的，这意味着我最终可能会得到一个胶带类型的修复. ;-)

我正在使用 Javascript 和 PHP 执行以下操作：

*   在屏幕上闪烁一对图像
*   “监听”并捕获按键（用于指示左侧或右侧图像的特定键）
*   重复 10 对图像

我通过让 Javascript 使用图像对更改 div 的可见性并调用事件侦听器来完成它，所有这些都精确计时。“捕获”部分是通过“写入”`L`或`R`使用 innerHTML 到页面的表单区域来完成的。

这就是问题所在，我没有办法注意到是否有人在机会窗口期间错过了按键。因此，在流程结束时提交表单之前，我不计算记录的响应。

我希望它在 10 个图像对结束时注意到，然后让用户重做会话，或者注意哪些图像对丢失并自动重新显示该对（或多对）。

这是我得到的代码，它可以使图像对闪烁并捕获按键。

```
<script type="text/javascript">
var randomPairList = <?php echo $_POST['topicNumber']-1; ?>;
function imgChoice(imgPair)
{
  var imgDataR = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="r" />';
  var imgDataL = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="l" />';
  var noData = '<?php $noData = 1; ?>';
  $(document).on('keydown', function(event)
  {
    if (event.keyCode == 67 || event.keyCode == 37)
    {
      document.getElementById(imgPair+'Data').innerHTML = imgDataL;
      $(document).unbind('keydown');
    }
    if (event.keyCode == 77 || event.keyCode == 39)
    {
      document.getElementById(imgPair+'Data').innerHTML = imgDataR;
      $(document).unbind('keydown');
    }
  });
  //div = document.getElementById(imgPair);
}

function stopChoice(imgPair)
{
  $(document).unbind('keydown');
}

function flashImages()
{
  i=500;
  //$('#startTopic').fadeOut(500);
  setTimeout("document.getElementById('fullpd').style.cursor='none';",50);
  setTimeout("document.getElementById('fullpd').style.background='#464646';",500);
  for(x=1;x<imgPairs.length;x++)
  {
    setTimeout("document.getElementById('clickSound').play();",i+2000);
    setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="block";',i+3500)
    setTimeout('imgChoice("'+imgPairs[x]+'");',i+3495)
    setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="none";',i+4000)
    setTimeout('stopChoice("'+imgPairs[x]+'");',i+6000)
    i=i+4000;
  }
  setTimeout("document.getElementById('fullpd').style.background='#eaeaea';",i+1000)
  setTimeout("document.getElementById('fullpd').style.cursor='default';",i)
  setTimeout(function() {$('#endTopic').fadeIn(1000);},i+1000);
}
</script> 
```

所以，我想知道是否有一种方法可以保持简单的计数，`event.keyCode`以便在最后调用另一个函数以确保它总共记录了 10 个事件，如果没有重新启动......或者有一种方法来具体跟踪哪个`imagePair`错过了，然后自动重新运行这些对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:14:20.850

我找到了一种方法来实现我所需要的......

我在记录关键事件的函数内部添加了一个计数器：

```
var randomPairList = <?php echo $_POST['topicNumber']-1; ?>;
var choicesMade = 0;
function imgChoice(imgPair)
    {
        var imgDataR = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="r" />';
        var imgDataL = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="l" />';
        var noData = '<?php $noData = 1; ?>';
        $(document).on('keyup', function(event) {
            if (event.keyCode == 67 || event.keyCode == 37) {
                document.getElementById(imgPair+'Data').innerHTML = imgDataL;
                $(document).unbind('keyup');
                choicesMade+=1;
                document.getElementById('choicesMade').innerHTML = choicesMade;
                }
            if (event.keyCode == 77 || event.keyCode == 39) {
                document.getElementById(imgPair+'Data').innerHTML = imgDataR;
                $(document).unbind('keyup');
                choicesMade+=1;
                document.getElementById('choicesMade').innerHTML = choicesMade;
            }
        });
}

function stopChoice(imgPair)
    {
        $(document).unbind('keyup');
    } 
```

然后，我更改了显示“endTopic”div 的代码，如果未达到所需的选择数量，则让它选择一个不同的 div 来显示：

```
function flashImages(){
    i=500;
    //$('#startTopic').fadeOut(500);
    setTimeout("document.getElementById('fullpd').style.cursor='none';",50);
    setTimeout("document.getElementById('fullpd').style.background='#464646';",500);

    for(x=1;x<=imgPairs.length-1;x++){
        setTimeout("document.getElementById('clickSound').play();",i+2000);
        setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="block";',i+3500)
        setTimeout('imgChoice("'+imgPairs[x]+'");',i+3495)
        setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="none";',i+4000)
        setTimeout('stopChoice("'+imgPairs[x]+'");',i+6005)
        i=i+4000;
        }
    setTimeout("document.getElementById('fullpd').style.background='#eaeaea';",i+1000)
    setTimeout("document.getElementById('fullpd').style.cursor='default';",i)
    setTimeout(function() {if(choicesMade < 10){$('#missedChoices').fadeIn(1000);} else {$('#endTopic').fadeIn(1000);}},i+1000);
    //setTimeout(function() {$('#endTopic').fadeIn(1000);},i+1000);
} 
```

然后，在“missedChoices”div 中，用户会收到他们错过了一些响应的消息，并且可以使用按钮“返回”。

到目前为止，它似乎工作正常！:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T20:07:35.800

使用 keyup 而不是 keydown。

它将捕获所有击键，并且不会像您所描述的那样错过任何击键。

# android - MediaPlayer 错误：在状态 64 中调用暂停

> ID：12520036
> 
> 赞同：15
> 
> 时间：2012-09-20T20:01:12.713
> 
> 标签：android, media-player

我`MediaPlayer`在我的`Activity`.

当我点击后退按钮时，我收到此错误：

```
09-20 19:44:16.540: E/MediaPlayer(1822): pause called in state 64
09-20 19:44:16.540: E/MediaPlayer(1822): error (-38, 0) 
```

**代码**

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        if (mp!= null && mp.isPlaying()) {
            mp.stop(); 
        }

        Intent intentstart = new Intent(X.this, Y.class);
        intentstart.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentstart);
    }

    return super.onKeyDown(keyCode, event);
} 
```

如果我使用`mp.pause()`，它工作正常。为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-22T18:54:13.980

我使用了 pause 和 seekto 方法来重置播放器。

```
player.pause();
player.seekTo(0); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T20:10:01.120

暂停 stop 是非法的`MediaPlayer`，并且根据该错误消息听起来与您正在做的完全一样。

我建议更改您的`onPause`内容，使其不会尝试暂停已停止的`MediaPlayer`.

也许：

```
 ~~如果（mp！= null）{
       if(mp.isPlaying()) mp.pause();
    }~~ 
```

~~实际上不要这样做，我只是在文档中找到了这个：~~

 ~~> 请注意，从 Started 状态到 Paused 状态的转换（反之亦然）在播放器引擎中异步发生。在对 isPlaying() 的调用中更新状态可能需要一些时间，

您应该在本地维护一个变量以检查您是否已经停止了`MediaPlayer`，然后测试是否应该调用`pause()`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-23T11:42:22.877

我来这里寻找答案，虽然上面的回答在其他方面很有用，但它们并没有解决我的问题......

但是......我设法解决了这个问题：

改变 `mediaPlayer.stop();`

到

`mediaPlayer.reset();`

帮我摆脱了`error( -38 , 0 )`

再次感谢您指出问题:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-13T14:04:01.480

在停止媒体播放器后遇到启动问题后，我遇到了一个异常并且 mp 能够再次启动，然后用它替换`mp.stop()`它`mp.reset()` 时效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-22T04:13:00.657

即使我遇到了同样错误的类似问题。

我用`mplayer.pause()`而不是`mplayer.stop()`~~

# php - php在缓冲时输出内容

> ID：12520037
> 
> 赞同：0
> 
> 时间：2012-09-20T20:01:22.677
> 
> 标签：php, iis, buffering

我有一个在我的本地服务器（wamp，apache v2.22.2，php 5.4.3）和测试 unix 服务器（apache，php 5.3）上运行良好的应用程序。
但由于其他一些要求，它不适用于在 Windows 上运行的生产服务器。
代码如下：

```
function renderFile()
...
ob_start();
ob_implicit_flush(false);
require($_viewFile_);
return ob_get_clean(); 
```

问题是包含的文件的内容会立即输出，而不是从函数返回。
问题是它适用于本地和测试服务器，但不适用于 Windows 上的新生产服务器。是因为 apache/iis 还是 php 配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:06:17.560

```
function renderFile() {
  ob_start();
  include($_viewFile_);
  $view = ob_get_contents();
  ob_end_clean();
  return $view;
} 
```

现在就做你想做的事`$view`。

```
echo renderFile(); 
```

# c# - 检测光标是否在控件的范围内

> ID：12520043
> 
> 赞同：21
> 
> 时间：2012-09-20T20:02:00.613
> 
> 标签：c#, winforms

我有一个用户控件

```
public partial class UserControl1 : UserControl, IMessageFilter
{
    public UserControl1()
    {
        InitializeComponent();
        Application.AddMessageFilter(this);
    }

    public bool PreFilterMessage(ref Message m)
    {
        var mouseLocation = Cursor.Position;

        if (Bounds.Contains(PointToClient(mouseLocation)))
        {
            bool aBool = true;//breakpoint
            bool two = aBool;//just assignment so compiler doesn't optimize my bool out
        }
        if (m.Msg != 0x20a) // Scrolling Message
        {
            return false;//ignore message
        }
        return false;
    }
} 
```

当我漂浮在包含在父窗体中的用户控件上时，没有命中断点。断点在附近被击中，但我可以在用户控件内的实际文本框中而不被击中。如何准确确定我是否在此用户控件的范围内？

FWIW，我有两台显示器。我使用的显示器似乎没有什么区别。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-20T20:22:08.237

尝试针对[`Control.ClientRectangle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientrectangle.aspx)而不是进行命中测试`Control.Bounds`：

```
if (ClientRectangle.Contains(PointToClient(Control.MousePosition))) {
    bool aBool = true;//breakpoint 
    bool two = aBool;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-20T20:20:34.683

只是为了快速技巧，您可以通过一个事件触发所有 userconrol 的控件并处理鼠标悬停事件。例如，如果您的用户控件中有两个文本框

```
 textBox1.MouseMove += new MouseEventHandler(controls_MouseMove);
    textBox2.MouseMove += new MouseEventHandler(controls_MouseMove);
    ...

    void controls_MouseMove(object sender, MouseEventArgs e)
    {
        Control subc=sender as Control;
        int mouseX = MousePosition.X;
        ....
    } 
```

# sql - 更新整个表，其中值为 NULL [不单独指示每列]

> ID：12520044
> 
> 赞同：0
> 
> 时间：2012-09-20T20:02:03.043
> 
> 标签：sql, sql-server

我需要帮助将整个表更新为 0[零]，其中值为 NULL。没有单独说明每一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:43:41.847

可以这样做，您只需首先从 INFORMATION_SCHEMA 或其他地方提取所有列名，将 SQL 构建为字符串，然后执行它：

```
USE MyDatabase
DECLARE @TableName NVARCHAR(100)
SELECT @TableName = 'MyTable'

DECLARE @Sql NVARCHAR(4000) 
    SELECT @Sql = COALESCE(@Sql + '; ', '')
        + 'UPDATE dbo.'
        + @TableName
        + ' SET '
        + COLUMN_NAME
        + ' = 0 WHERE '
        + COLUMN_NAME
        + ' IS NULL'
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE TABLE_NAME = @TableName
        AND IS_NULLABLE = 'YES'
        AND DATA_TYPE NOT IN ('text','ntext','image')

SELECT @Sql
EXEC(@Sql) 
```

请务必设置`MyDatabase`并`MyTable`相应地

# c++ - 复数.. Arghh

> ID：12520046
> 
> 赞同：0
> 
> 时间：2012-09-20T20:02:12.487
> 
> 标签：c++, signal-processing, dft

我正在做一个项目，该项目需要我进行输入，执行 DFT（离散傅立叶变换），然后从这些值中获取零交叉的数量。

我编写了一个算法，但是，它使用复数，我不知道如何对它们进行操作/执行计算。这是代码：

```
#include <iostream>
#include <complex>
#include <vector>

using namespace std;

const double PI = 3.14159265358979323846;

vector< complex<double> > DFT(vector< complex<double> >& theData)
{
    // Define the Size of the read in vector
    const int S = theData.size();

    // Initalise new vector with size of S
    vector< complex<double> > out(S, 0);
    for(unsigned i=0; (i < S); i++)
    {
        out[i] = complex<double>(0.0, 0.0);
        for(unsigned j=0; (j < S); j++)
        {
            out[i] += theData[j] * polar<double>(2, (-2 * PI * i * j / S));
        }
    }

    return out;
}

int main(int argc, char *argv[]) {
    vector< complex<double> > numbers;

    numbers.push_back(128);
    numbers.push_back(127);

    vector< complex<double> > testing = DFT(numbers);

    for(unsigned i=0; (i < testing.size()); i++)
    {
        cout << testing[i] << endl;
    }
} 
```

现在，如果我想执行例如：

```
if(testing[i] >= 0)
{
    // blah blah
} 
```

然后它会返回一个错误。有什么想法或建议吗？是否可以在不使用复数的情况下创建 DFT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:00:04.633

给你指示的人并没有告诉你在 DFT/FFT 的结果上计算零交叉。那将毫无意义。（如果他们告诉你这样做，他们是无能为力的。我允许你嘲笑他们给你如此荒谬的指示）。相反，他们告诉您计算原始数据的零交叉，并查看数据的 FFT。

然而，

*   过零率是语音识别的一个非常糟糕的起点。也许你可以得到它的某个地方。稍微夸张一点，我可以说过零是你能做的最不稳健的 DSP 分析。不过也很简单，而且语音识别的研究已经进行了很长时间，所以说不定也有一些研究。更新/更正：这有点夸张。实际上我相信很多语音识别技术确实使用过零，但是你应该首先知道你在做什么，因为它不是很健壮并且对诸如倍频程错误等多种错误不敏感。当您使用过零时，最好先低通（可能是激进地）。一定要考虑其他因素。

*   了解 FFT 的输出是这里经常被问到的问题，所以我写了一篇博客文章。通常人们会尝试跟踪音高，实际上您也应该这样做，但是您可以从 FFT 中获得其他信息，例如频率质心，以及在语音中很重要的不同频率的相对强度。从这里开始：http: [//blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)

*   您可能还想考虑简单地过滤重要的语音频率（要找出这些是什么，请从[“发音方式”的](http://en.wikipedia.org/wiki/Manner_of_articulation)维基百科条目开始。例如，通过点击 Sibilant 的链接，您将了解到“[s] 有大约 8,000 Hz 的最大声学强度。Neeto！）您可以从 FFT 或通过过滤获得该信息。每个都有优点和缺点。您可能想查看语音识别文献以了解它们的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:05:55.943

[傅里叶变换](http://en.wikipedia.org/wiki/Fourier_transform)（例如[DFT](http://en.wikipedia.org/wiki/Discrete_Fourier_transform) ）返回[复数](http://en.wikipedia.org/wiki/Complex_number)，因此您无法真正绕过它们。

根据您的应用程序，您*可以*安全地忽略复数的虚部，并将 DFT 的输出视为实数序列。

您可以对复数执行大量操作。有些可能与您的应用程序相关，有些则不相关。花一些时间来更好地理解复数是值得的。

最后，**不**，不使用复数是不可能创建 DFT 的。您可以将 DFT 的复数输出转换为实数，但在此过程中您会丢失信息。您需要了解复数以及 DFT 在您的应用程序中的使用方式，以便能够确定是否适合执行任何此类转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:09:56.460

我有一个类似的问题，我放弃了对 C++ 复数双精度数使用向量容器，因为 FFT 库不能很好地支持它，最终使用了一个普通的旧数组。您会发现您尝试做的大部分事情都可以正常工作。

```
 std::complex<double>*  in=new std::complex<double> [N]; 
```

例如，所有算法都可以像使用任何其他数组一样工作，`abs(in[i])`或者`in[i] *pi` 只是确保使用数学库的 C++ 版本

对于您的具体问题，您必须检查[C++ 参考](http://www.cplusplus.com/reference/std/complex/)，您可以使用 real 和 imag 函数来查看它是否大于零

然后确保（如果您使用 fftw）

对所有复数使用重新解释转换（如果它们是复数，则输入和输出）

```
 p = fftw_plan_dft_c2r_1d(N, reinterpret_cast<fftw_complex*>(in), out,FFTW_ESTIMATE);  

   fftw_execute(p); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:11:32.240

DFT 将始终使用复数，至少对于其输出而言。如果输入描述了一段时间内的一些信号，那么输出描述了根据频率的信号。每个复数可以写成[极坐标形式](http://en.wikipedia.org/wiki/Complex_number#Polar_form)，然后分成表示幅度的绝对值和表示相位的角度。也许是您感兴趣的幅度；如果是这样，您将需要计算绝对值，但它们也都是非负的。

DFT有多种适用于实数的[变体。](http://en.wikipedia.org/wiki/List_of_Fourier-related_transforms#Discrete_transforms)在这方面，我想到了[离散余弦变换。](http://en.wikipedia.org/wiki/Discrete_cosine_transform)不确定这在您的应用程序中是否有用。

*请注意*，像[FFTW](http://en.wikipedia.org/wiki/FFTW)这样的库可能会比您的代码更快地计算 DFT。只要您的输入大小是 2 的幂，即使是自写的[FFT也可能值得考虑。](http://en.wikipedia.org/wiki/Fast_Fourier_transform)但所有这些都与您的实际问题无关。

# android - Android JavaCV 人脸识别器 - 训练人脸识别器时的致命信号 11？

> ID：12520047
> 
> 赞同：2
> 
> 时间：2012-09-20T20:02:12.860
> 
> 标签：android, opencv, face-recognition, javacv

所以我的项目是为Android制作一个人脸识别（不是检测）应用程序。我的计划是将 JavaCV 与 contrib 库 facerecognizer 一起使用。但是，在训练识别器时，应用程序会因以下错误而崩溃：

致命信号 11 (SIGSEGV) 0xdeadbaad (code=1)。错误日志可以在这里找到：

[错误日志](https://docs.google.com/drawings/d/18ooMFc46DdTKetgM-jRJHte-eFJPMIACt2O86aIG18g/edit)

我用来执行此操作的代码如下：

```
 MatVector images;
 CvArr labelsCV;

 final int numberOfImages = 20;
 File faceDir = new File("/sdcard/FaceDB");

 images = new MatVector(numberOfImages);

 ArrayList<Integer> labels = new ArrayList<Integer>();
 IntPointer iPoint = new IntPointer();

 CvArr image;
 // Load an image:
 image = cvLoadImage(faceDir + "/s1/1.pgm");
 // And put it into the MatVector:
 images.put(0, image); 
 // and put the label in
 labels.add(0);

  for (Integer i: labels){
         iPoint.put(i);
  }

  labelsCV = new CvArr(iPoint);

  FaceRecognizerPtr model = createFisherFaceRecognizer(0,1000);
  // Then train it. See how I call get(), to get the FaceRecognizer inside the FaceRecognizerPtr:
  model.get().train(images, labelsCV); 
```

我不确定，但这可能与我的 labelsCV 变量和指针有关，我不确定该怎么做。

任何帮助都会非常感谢

# iphone - 我有一个应用程序需要使用自定义 URL 方案打开另一个应用程序。我可以找出我需要以某种方式打开的应用程序的版本号吗？

> ID：12520050
> 
> 赞同：1
> 
> 时间：2012-09-20T20:02:27.910
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个应用程序需要使用自定义 URL 方案打开另一个应用程序。我可以找出我需要以某种方式打开的应用程序的版本号吗？

制作该应用程序的公司已经更改了他们的 URL 方案，因此我打电话给的公司需要他们的应用程序的 2.7 版。有没有办法检测用户安装了哪个版本的应用程序，然后如果版本号太低（在这种情况下<2.7）提示他们更新应用程序（在我们调用它之前）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:55:59.133

您应该使用`UIApplication -(BOOL)canOpenURL:(NSURL *)url`来查看您使用的 URL 方案是否受支持。然后，您可以继续测试第二个方案，依此类推。

# php - php exec() 或安全模式下的相同功能

> ID：12520053
> 
> 赞同：0
> 
> 时间：2012-09-20T20:02:56.760
> 
> 标签：php, safe-mode

> **可能重复：**
> [安全模式下的 PHP 后台进程](https://stackoverflow.com/questions/12449104/php-background-process-in-safe-mode)

我的项目在共享主机上运行，​​因此启用了安全模式。我想使用**exec()**函数，但这是不可能的。在这种情况下我该怎么办？
在安全模式下是否有相同的功能或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:47:52.917

这个功能结合了我所知道的所有可能性。试试看。我希望，它有帮助。

```
<?php
function _exec($cmd) {
    $disablefunc = array();
    $disablefunc = explode(",", str_replace(" ", "", @ini_get("disable_functions")));
    if(is_callable("exec") && !in_array("exec", $disablefunc)) {
        exec($cmd, $result);
        $result = join("\n", $result)."\n";
    } elseif(is_callable("system") && !in_array("system", $disablefunc)) { 
        $src = @ob_get_contents();
        @ob_clean();
        system($cmd);
        $result = @ob_get_contents();
        @ob_clean();
        echo $src;
    } elseif(is_callable("passthru") && !in_array("passthru", $disablefunc)) {
        $src = @ob_get_contents();
        @ob_clean();
        passthru($cmd);
        $result = @ob_get_contents();
        @ob_clean();
        echo $src;
    } elseif(is_callable("popen") && !in_array("popen", $disablefunc) && is_resource($h = popen($cmd, "r"))) {
        $result = "";
        if(is_callable("fread") && !in_array("fread", $disablefunc)) {
            while(!feof($h)) {
                $result .= fread($h, 1024);
            }
        } else {
            while(!feof($h)) {
                $result .= fgets($h, 1024);
            }
        }
        pclose($h);
    } else {
        trigger_error("Cannot execute the command due to server restrictions.", E_USER_WARNING);
        return false;
    }
    return $result;
}

echo "<pre>"._exec("ls")."</pre>";
?> 
```

# css - CSS 属性 box-shadow 不适用于白色

> ID：12520058
> 
> 赞同：1
> 
> 时间：2012-09-20T20:03:08.303
> 
> 标签：css

这是我在鼠标悬停时应用于图像标签的 css 类：

```
div#simpleSearch button#searchButton > img:hover {
    /* Box-shadow */
-moz-box-shadow: 0px 0px 13px #AFAFAF; 
     box-shadow: 0px 0px 13px #AFAFAF;

    /* Border-Radius */
-moz-border-radius: 100px; /* Firefox */
  -o-border-radius: 100px;
     border-radius: 100px; /* CSS3 */
} 
```

它工作正常。但是，如果我替换`#AFAFAF`为`white`or `#FFFFFF`，则不会对我的图像应用边框。我应该补充一点，网站背景是灰色的，因此可以看到白色阴影。

正如任何人已经经历过的那样？任何解决方法建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:08:25.103

尝试

```
-moz-box-shadow: 13px 13px 0px 0px #FFFFFF;
-webkit-box-shadow: 13px 13px 0px 0px #FFFFFF;
 box-shadow: 13px 13px 0px 0px  #FFFFFF; 
```

最后 2 个值是可选[的，如此处所示](http://css-tricks.com/snippets/css/css-box-shadow/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-12T10:33:58.317

`box-shadow`如果您需要在`div`元素上添加一些白色顶部和底部，例如，您可以在这里提出这样的解决方案：

```
div:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  box-shadow: inset 0 60px 50px -30px #ffffff, inset 0px -60px 50px -30px #ffffff;
  z-index: 1;
} 
```

不要忘记添加**z-index**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:23:38.510

我做了快速的jsfiddle，但将css简化为只使用一个ID，它工作正常，它在悬停时显示白色。

确保您的 CSS 真正应用于您的内容

[http://jsfiddle.net/fc9dJ/17/](http://jsfiddle.net/fc9dJ/17/)

# backbone.js - Backbone 中 d3.select(this.el) 的命名约定

> ID：12520061
> 
> 赞同：2
> 
> 时间：2012-09-20T20:03:21.630
> 
> 标签：backbone.js, naming-conventions, d3.js

其中 a`Backbone.View` `this.el`通常指的是视图所基于的节点元素，并且`this.$el`指的是 jquery 版本`$(this.el)`。

我正在将 Backbone 与 d3 库一起使用，并且想知道 d3 版本是否有标准命名约定`d3.select(this.el)`？也许`this.d3el`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:19:21.390

不`d3`定义为`window.d3`？因此，它在全球范围内可用，因此不需要在视图中对其进行范围限定。除非我在这里遗漏了什么！

# php - PHP中多维关联数组的自动完成工具

> ID：12520064
> 
> 赞同：0
> 
> 时间：2012-09-20T20:03:28.127
> 
> 标签：php, arrays, autocomplete

我正在寻找插件。下面我在 php.ini 中得到了我的代码。如您所见，它是一个多维数组。

```
$multi = array(
            '1' => array(
                    'who' => array(
                            'name' => 'John',
                            'surname' => 'Bar',
                            'date' => array(
                                    'day' => 1,
                                    'month' => 2,
                                    'year' => 1990
                                    ),
                            ),
                    ),
            '2' => array(
                    'who' => array(
                            'name' => 'Joanna',
                            'surname' => 'Lu',
                            'date' => array(
                                    'day' => 11,
                                    'month' => 12,
                                    'year' => 1992
                            ),
                    ),
            ),
            '3' => array(
                    'who' => array(
                            'name' => 'Mark',
                            'surname' => 'Bock',
                            'date' => array(
                                    'day' => 5,
                                    'month' => 2,
                                    'year' => 1980
                            ),
                    ),
            ),
        ); 
```

当我深入访问时，插件应该自动完成代码或给出一些建议：

```
$year = $multi['1']['who']['date']['year']; 
```

我的意思是我可能不知道 $multi['1'] 中有什么，我需要代码帮助。这样的工具存在吗？插件应该在 eclipse 或 netbeans 中工作，因为我在休闲工作日使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:06:04.280

只要数组不是动态生成的，[PhpStorm就会这样做。](http://www.jetbrains.com/phpstorm/)这只能在运行时计算。

# windows-phone-7 - 如何让 Windows Phone 7 变成 RFID 阅读器？

> ID：12520072
> 
> 赞同：1
> 
> 时间：2012-09-20T20:03:52.277
> 
> 标签：windows-phone-7, biztalk, rfid, biztalk-2010

我目前正在开发一个在 Unitech 的 PA690 RFID 阅读器设备上运行的 Windows CE 6.5 应用程序，该设备承载 BizTalk RFID Mobile 2010 以与位于 POS 的 BizTalk RFID 2010 服务器连接。

这是[PA690 RFID 设备](http://www.ute.com/products_info.php?rbu=5&pc1=50&pc2=83&pid=986)的 URL ：

我现在要求将应用程序移植到 Windows Phone 7。

我的第一个障碍是使用某种无源蓝牙/NFC 适配器将 Windows Phone 7 转换为 RFID 阅读器设备，或者使用与 Windows Phone 7 [The 7 series] 运行相同操作系统的有源 RFID 阅读器设备

是否有可以插入 Windows Phone 7 以将其变成 RFID 阅读器的适配器/硬件设备，或者市场上是否有运行 Windows Phone OS ver. 的 RFID 阅读器。7.X ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:11:53.260

要回答您的问题，您无法使用可用的库存硬件/SDK 资源来做到这一点，因为：

*   没有公开支持的蓝牙通道 API

*   Windows Phone 7 没有 NFC 功能。

# jquery - zclip 不能在 chrome 上本地工作

> ID：12520073
> 
> 赞同：1
> 
> 时间：2012-09-20T20:04:00.110
> 
> 标签：jquery, google-chrome, zeroclipboard, zclip

我有这个[jsfiddle](http://jsfiddle.net/rival95/8QfnA/5/)。zclip 似乎可以在 FireFox 和 Chrome 中使用。但是一旦我将此代码放在本地，它就不再适用于 Chrome。它仍然可以在 FireFox 上运行；所以我知道它不是 Flash 播放器设置，因为我已经为我的本地 ZeroClipboard.swf 设置了设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:13:07.423

根据我的阅读，由于 Flash 的某些安全原因，这在本地不起作用。它必须上传到网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:52:36.857

我让它工作了。我唯一做的就是实例化它，像这样：例如我有一个这样的链接

```
<a href="#" class="song-widget"> 
```

所以对于 javascript...

```
$('body').on("click", ".share.to-click", function(){
 $('a.song-widget').zclip({
   path: "/assets/ZeroClipboard.swf",
   copy: "<iframe src='http://localhost:5000/songs/1/widget'style=' width: 470px; height: 87px;'></iframe>"
 });
}); 
```

就是这样

# spss - 在 SPSS 中指定多个变量的快捷方式

> ID：12520075
> 
> 赞同：1
> 
> 时间：2012-09-20T15:34:22.523
> 
> 标签：spss

SPSS中是否有用于列出多个变量的快捷方式代码？说类似于`v1-v3`而不是`v1 v2 v3`在 SAS 数据步骤中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:47:55.960

TO 始终基于文件顺序。IMO 很少需要按字母顺序按间隔选择列表。接受变量列表的命令几乎都遵循 TO。

您可以使用 MATCH FILES 的 KEEP 子命令更改变量顺序。

您还可以为变量列表定义宏，并在需要列表的地方引用它。

最后，如果您从 SPSS 社区网站 (www.ibm.com/developerworks/spssdevcentral) 和 SPSSINC SELECT VARIABLES 扩展命令安装 Python Essentials，则该对话框可以轻松定义基于文件顺序、alpha 顺序或测量水平，以及其他标准。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:25:57.943

某些命令允许您使用`TO`修饰符（但不是全部）。这取决于变量在数据矩阵中的正确顺序。还有多个响应集，并定义了对特定变量集的宏调用。

下面我给出`TO`了通过宏使用和定义一组变量的例子。诚然，我从不使用多个响应集，所以我只能说它是一个选项（我认为对于一组二分项比连续变量更有用）。

```
set seed = 10.
input program.
loop #i = 1 to 100.
compute id = #i.
compute V1 = RV.NORM(0,1).
compute V2 = RV.UNIFORM(0,1).
compute V3 = RV.POISSON(3).
compute V4 = RV.BERNOULLI(.5).
compute V5 = RV.BINOM(5,.8).
end case.
end loop.
end file.
end input program.
dataset name sim.
execute.

freq var V1 to V5 /format = notable /statistics = mean.

DEFINE !myvars () V1 V2 V3 V4 V5.
!ENDDEFINE.

set mprint on.
freq var !myvars /format = notable /statistics = mean. 
```

# ruby-on-rails - Ruby on Rails：通过控制器操作观察模型变化

> ID：12520079
> 
> 赞同：4
> 
> 时间：2012-09-20T20:04:19.770
> 
> 标签：ruby-on-rails, ruby, events, enumerable, observable

`update`每当调用控制器中的操作（或每当更新我的模型时），我都想发出服务器发送的事件。我目前`watch`在带有虚拟发射器的同一个控制器中有一个工作动作：

```
def watch
    self.response.headers["Content-Type"] = "text/event-stream"
    self.response.headers["Last-Modified"] = Time.now.ctime.to_json
    self.response_body = Enumerator.new do |y|
        100.times do |i|
            sleep 5
            y << ["event: message", "data: #{i}\n\n"].join("\n")
        end
    end
    # TODO catch IO error when client disconnects
end 
```

**如何获得一个在`update`被调用时产生/返回值的可枚举对象？**（注意：它不一定是一个 Enumerable；但它必须响应`#each`这种流技术才能工作。）从某种意义上说，我想我正在尝试在 Rails 中实现一个事件驱动的架构。

我知道[Observable](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/observer/rdoc/Observable.html)但我不知道如何让我的观察者可以根据需要进行枚举......或者如何在没有循环和睡眠计时器的情况下将观察者放入枚举器（如上）。

这样做的目的是将对数据库所做的更改发送给当前登录的所有其他用户，以便每个用户始终拥有数据库的当前反映。

谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:23:37.747

这不一定是最好的解决方案，但我最终创建了一个消息队列，如下所示：我在我的数据库中创建了一个新表（“SSE”），在我想要观察的模型中，我添加了回调：

```
class MyModel < ActiveRecord::Base
  after_save :queue_sse
  after_delete :queue_sse
  # ...
  private
    def queue_sse
      connected_users.each do |user|
        SSE.create(:changed_record_id => this.id, :user_id => user)
      end
    end
end 
```

然后在`watch`动作中：

```
def watch
  connected_users << current_user # pseudo for a mutex-synched accessor
  self.response.headers["Content-Type"] = "text/event-stream"
  self.response.headers["Last-Modified"] = Time.now.ctime.to_json
  self.response_body = Enumerator.new do |y|
    loop do
      sleep 5
      ActiveRecord::Base.uncached do
        updates = SSE.find_all_by_user_id(current_user)
        updates.each do |update|
          puts "update found: #{update.id}\n"
          y << ["event: message", "data: #{update.id}\n\n"].join("\n")
          update.destroy
        end
      end
    end
  end
  # TODO add error catching, and on IOError, remove the current_user
end 
```

不过，这会对数据库造成很大影响。它可能应该建立在 memcached、互斥类变量或类似的基础上。

（注意——当然需要线程，例如`config.threadsafe!`和线程服务器。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:14:06.067

我创建了一个 gem，它允许您使用 SSE“广播”事件。它允许您从更新操作将数据推送到连接的客户端。它被称为 R4S ( [https://github.com/biggihs/r4s](https://github.com/biggihs/r4s) )

### 例子

```
def update
  #do some updating
  R4S.push_data("key",{data:"data"},:event=>"SomeJsEvent")     
end 
```

这会将数据推送到连接到 sse 流“key”的所有浏览器

# ios - 核心图像过滤器将曲线分别应用于每个 RGB 通道

> ID：12520081
> 
> 赞同：4
> 
> 时间：2012-09-20T20:04:25.573
> 
> 标签：ios, core-image, instagram, cifilter

我正在尝试像在 Photoshop 中那样将色调曲线应用于图像。您可以为每个 RGB 通道创建单独的曲线，但在 Core Image Framework 上，您可以使用 CIToneCurve 为整个图像选择一个色调。

有没有人想出一种方法将这些事件链接在一起以便能够为每个通道应用不同的曲线？

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:07:04.537

在研究了很多之后，我发现的最佳解决方案是 CSSmith 在评论中所说的......将我的应用程序转换为使用 Brad Larson 的 GPUImage 框架。它比 CIFilters 工作得更快，功能也更多。

# ruby-on-rails - 是否可以在不更改阶段的情况下将 Rails 应用程序部署到 Heroku？

> ID：12520085
> 
> 赞同：0
> 
> 时间：2012-09-20T20:04:36.820
> 
> 标签：ruby-on-rails, ruby

我一直在将代码推送到 Heroku 时遇到问题，并且阶段更改会破坏我的应用程序。它在本地工作，但是当我推送到 Heroku 时，我注意到应用程序切换到生产阶段并中断。

有没有办法只使用一个阶段，即在我的生产阶段本地开发？我不需要版本历史。或者，我可以简单地将我的开发阶段推到 Heroku 吗？

在本地，我正在运行 OSX 10.8.1、Ruby 1.9.3p194 和 Rails 3.2.8。

该应用程序是一个基于我一直在学习和拼凑的东西的最小博客。它利用 SQLite 进行存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:15:42.063

只使用一个环境是个坏主意。不要这样做。

您的本地/开发和生产环境可能存在差异，这就是您使用 2 个不同环境的原因，因此您可以在配置文件中捕获它们。许多缓存、编译资产和调试只发生在 dev 或 prod 中，并且您希望它们的行为不同。

相反，您需要调试 prod 和 dev（heroku 和本地）中的不同之处，并更改您的应用程序以解决这些差异。

例如，Heroku 不支持 sqlite - 它默认使用 postgres。

因此，您需要在 Gemfile 中使用 sqlite 进行开发，并将 pg gem 用于生产，或者（我强烈建议）在开发中也使用 postgres（https://devcenter.heroku.com/articles/how-do- i-use-sqlite3-for-development）。

如果您选择继续使用 sqlite 进行开发，您的 Gemfile 应如下所示：

```
group :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:26:38.577

如果您想在本地机器上尝试生产模式，请像这样启动服务器：

```
rails server -e production 
```

希望这能让你在推向 Heroku 之前抓住一些问题。

安德鲁的回答是关键。为了您的方便，开发模式下的缓存较少。生产模式运行效率更高，但将是开发的主要痛苦。（例如，您将经常需要重新加载缓存和重新编译资产。）您不想在生产中运行开发模式，因为您的应用程序运行速度非常缓慢。

希望这能让您了解运行一个环境而不是另一个环境之间的权衡。权衡的因素主要是开发便利性与性能的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:44:26.940

没有看到为什么你的应用程序在推送到 Heroku 时会中断，我猜这是几个问题之一。

*   首先，您必须为您的数据库使用 Postgres，即：至少`gem 'pg'`在您的组中。`Gemfile``:production`

*   其次，必须预编译资产或必须更改配置设置以允许在不初始化应用程序的情况下编译资产：

    `rake assets:precompile`

    或者

    添加`config.assets.initialize_on_precompile = false`到您的`config/environments/production.rb`文件中。

我通常使用`rake assets:precompile`然后将资产添加到我的 git 存储库中，尽管许多人会争辩（我同意）将这些文件添加到您的存储库通常不是最好的主意。

# php - 格式正确的 json 字符串的问题

> ID：12520090
> 
> 赞同：0
> 
> 时间：2012-09-20T20:05:34.963
> 
> 标签：php, json

我相信格式正确的 json 字符串有问题。我想知道这是否是由于查询字符串的构造造成的，但它看起来对我来说是正确的，除非下面编码的 json 字符串中的双括号有问题。寻找一双额外的眼睛。

在 json 编码之前， var_dump($considerationCodes) 看起来像：

```
array (size=2)
  8 => 
    array (size=13)
      67 => 
        array (size=1)
          0 => 
            array (size=3)
              ...
      41 => 
        array (size=1)
          0 => 
            array (size=3)
              ...
      42 => 
        array (size=1)
          0 => 
            array (size=3)
              ... 
```

打印 json_encode($considerationCodes); 好像：

```
$considerationCodes = 
{"8": {"67":  [[  {"id":"64","description":"string description..."},{"id":"65","description":"string description..., "},{"id":"66","description":"string description..."}  ]]  , "41":  [[  {"id":"64","description":"string description..."},{"id":"65","description":"string description..., "},{"id":"66","description":"string description..."}  ]] }} 
```

Json 构造它是如何被预期/接受的（测试并使用原始数据）：

```
['8']['67']['64'] = "string description...";
['8']['67']['65'] = "string description...";
['8']['67']['66'] = "string description...";
['8']['41']['64'] = "string description...";
['8']['41’]['65'] = "string description...";
['8']['41']['66'] = "string description...";
...etc 
```

这就是我提交 json 编码的方式（经过测试并使用原始数据）：

```
return $this->renderText(json_encode( $considerationCodes[$appCode][$reasonCode] ) ); 
```

当我查看这个 json 提交的结果（多选选择输入）时，它看起来像：

```
[Object][object][Object][object][Object][object][Object][object] 
```

我错过了什么？

编辑：

这就是我构建数组的方式：

```
$reason_codes_ids = array();
        foreach($all_reason_codes as $key => $values) {
            $reason_codes_ids[] = $values['id'];
        }
        //wrap the consideration_info into each reason_id:        
        $codes_with_reasons = array();
        foreach($reason_codes_ids as $value){
            foreach($consideration_info as $key => $value1){
                $codes_with_reasons[$value][$key] = $value1;
            }
        }
        //the above results in: ['reason-code-id']['consideration-code-id'] = "consideration-code-answer":
        //next, get the declined_app_status:
        $declinedAppStatus = 8;
        //then wrap the above results in a wraper for the declined application-code
        $declinedConsiderationCodes = array();
        foreach($codes_with_reasons as $key => $value)
        {
            $declinedConsiderationCodes[$declinedAppStatus][$key]=[$value];
        }
        $considerationCodes = $declinedConsiderationCodes; 
```

和：

```
$consideration_info =

array (size=3)
  0 => 
    array (size=2)
      'id' => string '64' (length=2)
      'description' => string 'string...' (length=35)
  1 => 
    array (size=2)
      'id' => string '65' (length=2)
      'description' => string ''string...' (length=143)
  2 => 
    array (size=2)
      'id' => string '66' (length=2)
      'description' => string ''string...' (length=143)

$reason_codes_ids =

array (size=13)
  0 => string '67' (length=2)
  1 => string '41' (length=2)
  2 => string '42' (length=2)
  3 => string '43' (length=2)
  4 => string '44' (length=2)
  5 => string '45' (length=2)
  6 => string '46' (length=2)
  7 => string '47' (length=2)
  8 => string '48' (length=2)
  9 => string '49' (length=2)
  10 => string '50' (length=2)
  11 => string '51' (length=2)
  12 => string '68' (length=2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:17:56.977

使用正确的格式和缩进，您的 JSON 字符串如下所示：

```
{
    "8": {
        "67": [
            [
                {
                    "id":"64",
                    "description":"string description..."
                },
                {
                    "id":"65",
                    "description":"string description..., "
                },
                {
                    "id":"66",
                    "description":"string description..."
                }
            ]
        ],
        "41": [
            [
                {
                    "id":"64",
                    "description":"string description..."
                },
                {
                    "id":"65",
                    "description":"string description..., "
                },
                {
                    "id":"66",
                    "description":"string description..."
                }
            ]
        ]
    }
} 
```

请注意，这`['8']['67']`是一个带有数字索引的数组。要执行您想要执行的操作，您的 JSON 字符串应该看起来更像这样：（[示例](http://codepad.org/TVtWd7NK)）

```
{
    "8": {
        "67": {
            "64":"string description...",
            "65":"string description..., ",
            "66":"string description..."
        },
        "41": {
            "64":"string description...",
            "65":"string description..., ",
            "66":"string description..."
        }
    }
} 
```

所以你的 PHP 数组应该看起来更像这样：

```
$considerationCodes = array(
    "8" => array(
        "67" => array(
            "64" => "string description...",
            "65" => "string description..., ",
            "66" => "string description..."
        ),
        "41" => array(
            "64" => "string description...",
            "65" => "string description..., ",
            "66" => "string description..."
        )
    )
); 
```

# java - 构建器设计模式 - 没有抽象类/接口

> ID：12520093
> 
> 赞同：5
> 
> 时间：2012-09-20T20:05:44.633
> 
> 标签：java, design-patterns, builder

我想知道我是否可以实现 Builder 设计模式，但没有从中派生具体构建器的接口/抽象类？我可以只有一个 builder 吗？

如果我只有一个concretebuilder和一个director，它仍然是builder设计模式吗？

更加具体：

我有一些对象想“组合”成一个复杂的对象。更准确地说，我有以下课程：

门墙房

我想从这些类中构建一个“世界”，即所有这些类组合起来给我一个世界。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:45:55.670

是的，您绝对可以拥有一个简单的 WorldBuilder，其工作是创建一个由门、墙和房间组成的完全配置的世界。当您不想暴露部分构建且可能无效的 World 对象时，这非常有用。

假设构建器的用法是这样的：

```
WorldBuilder builder = new WorldBuilder();

// read the definition of a room from an XML file or other source.
// this is vastily simplified, you'd probably be iteration 
// something like this:
//
//   for each Room in file
//      for each wall in room
//         for each door in wall
//
roomId = readRoomId();
wallId = readWallId();
doorId = readDoorId();
destRoomId = readDestinationRoomId();

builder.AddRoom(roomId);
builder.AddWallToRoom(roomId, wallId, SIDE.NORTH);
builder.AddDoorToWall(wallId, DOORSTYLE.WOODEN | DOORSTYLE.LOCKED, destRoomId);

// etc, etc

World world = builder.makeWorld(); 
```

非构建器方法可能想要做这样的事情来连接两个房间对象：

```
Door door = new Door(roomOne, roomTwo); 
```

但是，如果您像以前一样从文件中迭代每个房间，那么您将不会引用第二个房间，因为它甚至可能还没有到达。

另一种方法是只为每个对象提供其邻居或父对象的 ID，以便您获得此 ID，这允许您引用尚未加载的对象：

```
Door door = new Door(roomOneId, roomTwoId); 
```

但是如果文件中有错误并且房间 2 从未定义过，那么 World 将是无效的。

Builder 可以处理正确构造、连接和验证 World 创建过程的所有细节，为想要创建世界的客户端代码提供灵活性，并释放复杂构造逻辑的 World 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:13:28.070

您可以将构建器模式与[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)结合起来：将某种数据树传递给构建器，每个构建器都实现一个`accept(Visitor v)`方法，并让构建器遍历树，通过接受方法将每个节点传递回访问者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T21:33:15.813

> 如果我只有一个concretebuilder和一个director，它仍然是builder设计模式吗？

我不会在一开始就挂断这个问题。如果您的项目只需要构建一种类型的“世界”，并且您确实不需要多个构建器子类，那么使用导向器和单个具体构建器是一种有效的方法。而是专注于模式的精神——即将你的导演与世界应该如何构建的细节隔离开来。

一旦您的代码正常工作并且您对结果感到满意，请返回并查看您的主管和构建器的实际交互方式。然后考虑重构构建器以提取一个通用接口，以真正确定主管和构建器之间的合同。

我发现从工作的具体类中提取一个合理的接口要容易得多，然后尝试预先猜测这个接口可能是什么，并尝试同时开发接口和类。

# ruby-on-rails - 向 Rails 模型实例对象动态添加哈希属性？

> ID：12520095
> 
> 赞同：8
> 
> 时间：2012-09-20T20:05:45.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

有一个型号

```
class PlaylistModel < ActiveRecord::Base
    /* code */
end 
```

然后在控制器动作中有这样的代码

```
PlaylistController < ActionController::Base
  def a_action
    @item = Playlist.find(10)
    @item[:visited] = true     
  end
end 
```

但是，在（或在播放列表表的架构中）没有`visited`定义属性！`PlaylistModel`看起来一个新属性正在动态添加到对象中。这是正在发生的事情吗？所有这些功能在哪里定义/我在哪里可以阅读更多关于它的信息。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T20:11:13.777

这是[这里](http://ar.rubyonrails.org/classes/ActiveRecord/Base.html#M000411)解释的属性设置器快捷方式。它几乎等同于：

```
@item.attributes[:visited] = true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:20:50.200

我认为您正在寻找的是虚拟属性......可以在模型中定义[http://railscasts.com/episodes/16-virtual-attributes](http://railscasts.com/episodes/16-virtual-attributes)

# c# - C# 窗口在创建后立即关闭

> ID：12520096
> 
> 赞同：2
> 
> 时间：2012-09-20T20:05:47.437
> 
> 标签：c#, winforms

```
Form1 browser = new Form1(textBoxUserName.Text.Trim(), textBoxOldPassword.Text.Trim(), textBoxNewPassword.Text.Trim());
browser.Shown += (o, t) => { this.Close(); }; 
browser.Show(); 
```

我希望新窗口出现并关闭旧窗口。

发生的事情是应用程序在调用 this.Close() 时自动关闭

我正在使用 WinForms

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:22:58.010

我假设您的代码来自您的主表单`ParentForm`，并且消息泵由

```
Application.Run(new ParentForm()); 
```

关闭时`ParentForm`结束。为了实现你想要做的事情，你可以写：

```
[STAThread]
static void Main()
{
    Form form = new ParentForm();
    form.Show();

    Application.Run(); // starts the message pump
} 
```

在这种情况下，您必须显式调用`Application.Exit()`以结束您的程序，例如

```
public class Form1 : Form
{
    protected override void OnClosed(EventArgs e)
    {
        base.OnClosed();

        Application.Exit();
    }
} 
```

更干净的方法将使用[`ApplicationContext`](http://msdn.microsoft.com/en-us/library/system.windows.forms.applicationcontext.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:11:47.777

如果这是您的应用程序加载的第一个表单，并且如果您关闭它，则应用程序将关闭。

而不是 this.Close()

把它写成 this.Hide()。

# dataset - 检查数据集是否有任何行

> ID：12520105
> 
> 赞同：0
> 
> 时间：2012-09-20T20:06:28.887
> 
> 标签：dataset, report-viewer2010

在我当前的reportviewer 中，我有一个从存储过程返回信息行的数据集。我想在我的报告中添加一个参数，以在报告的标题区域显示报告中的行数。如果没有信息可以返回给reportviewer，显然行数将为0。有没有一种方法可以尝试计算数据集/表中有多少行，并在文本框的标题区域中返回该数字没有将其链接到任何数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:32:05.770

您可以以一种形式计算行数（例如 Form1）...将其保存在一个整数变量中...

例如。公共静态 int cnt=ds.Tables[0].Rows.Count;

将此整数值作为参数传递给数据集（Form1.cnt）...

请记住，在这种情况下，将变量声明为 public static 很重要......

在此之后，您可以将值插入该表并将其放在报告文本框中...

或者

您可以通过为该文本框提供直接公式来简单地计算数据集中的字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:45:35.653

不是`myDataSet.Tables[0].Rows.Count`吗？

# javascript - 链接时在jQuery中定位添加的元素？

> ID：12520109
> 
> 赞同：0
> 
> 时间：2012-09-20T20:06:36.617
> 
> 标签：javascript, jquery, animation, jquery-animate

[http://jsfiddle.net/Greg_J/R5ZHk/](http://jsfiddle.net/Greg_J/R5ZHk/)

我将一个 div 附加到一个容器，然后为高度设置动画。正在选择的 div 的高度是动画，正如您所期望的那样。

我想做的事：我想附加 div，然后为附加的 div 设置动画，所有这些都在同一个链中。

我想知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:10:05.813

您可以使用稍微不同（并且可以说更具可读性）的语法：

```
$('<div>', {'class': 'inner'}).appendTo('#container').animate({ height: '25%'}); 
```

此外，它不起作用的原因是您`height`在 CSS 中拼错了属性：

```
#container{
    width: 100px;
    heigh: 200px;
         ^ 
```

这是一个固定版本：http: [//jsfiddle.net/Blender/R5ZHk/3/](http://jsfiddle.net/Blender/R5ZHk/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:07:40.487

您可以将 find() 与对象的选择器一起使用，然后继续链接... [http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:15:39.693

.find() 应该为你工作..

在小提琴中，您在高度上打错了

```
#container{
    width: 100px;
    heigh: 200px;
    background: rgba(0, 0, 255, .25);
} 
```

修复它，它应该可以正常工作..

# javascript - 使 Require.JS 与 Knockout 一起工作

> ID：12520110
> 
> 赞同：2
> 
> 时间：2012-09-20T20:06:49.667
> 
> 标签：javascript, knockout.js, requirejs, amd

我在 AMD 环境中工作，并为此使用 Require.js。它还使用 KnockOut 作为框架。这里的问题是我刚刚下载了一个高度依赖knockOut的knockout插件。

现在，由于我的应用程序的 AMD 特性我并不完全了解的一些问题，我的插件无法正常工作，并在加载我的插件时抛出 Ko 未定义的错误。

那些曾经遇到过类似问题的人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:06:07.133

如果您引用的插件是 Mapping 插件，您将需要执行以下操作之一

1.  将您的淘汰脚本文件命名为“knockout.js”

2.  手动更改映射脚本中的定义方法，使其与您的名称匹配，即 define([" **knockout-2.1.0** ", "exports"], factory); 这是调试映射脚本中的第 12 行。

如果是其他插件，请说明是哪个，以便我可以提供更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:11:03.697

真棒里德，我昨晚迷失了大约 3 个小时，所以这是交易：发生的事情是映射插件（例如）定义了一个硬编码的依赖项来淘汰，对于 node、commonjs 或 amd，对于你需要的 requirejs指定您的淘汰赛插件“路由”或“路径”，例如我的淘汰赛文件重命名为 ko.js 并映射到 ko.mapping.js 并且它们位于我在路径配置中重命名为“lib”的文件夹插件中

```
require.config({
    baseUrl: "js/",
    paths: {
        "lib" : "plugins"
    }
}); 
```

在这种情况下，必须在映射插件中重命名的行是相同的，但与版本号不同，您只需输入 ko 文件的位置。

```
if (typeof require === "function" && typeof exports === "object" && typeof module === "object") {
    // CommonJS or Node: hard-coded dependency on "knockout"
    factory(require("knockout"), exports);
} else if (typeof define === "function" && define["amd"]) {
    // AMD anonymous module with hard-coded dependency on "knockout"
    define(["lib/ko", "exports"], factory);
} else {
    // <script> tag: use the global `ko` object, attaching a `mapping` property
    factory(ko, ko.mapping = {});
} 
```

根据我的经验，我的 ko 文件位于 lib 下并重命名为 ko，因此如果您的文件位于“js/knockout/”文件夹下并重命名为 knockout-debbug-last-2.2.0.js，则需要更改同一行到

```
define( [ 'js/knockout/knockout-debbug-last-2.2.0' ] , factory ); 
```

那条硬编码的行是插件加载失败的原因。

注意：我将其写为答案而不是评论，因为评论中的代码看起来非常糟糕。

# c# - 给定两个证书，我如何验证一个是用另一个的私钥签名的？

> ID：12520112
> 
> 赞同：6
> 
> 时间：2012-09-20T20:07:01.613
> 
> 标签：c#, certificate, x509certificate, x509certificate2

我有两个`X509Certificate2`s。打电话给他们`toCheck`和`checkWith`。

如何检查是否`toCheck`由 的私钥签名`checkWith`？

基本上，我想要 Java 的 C# 等价物

```
toCheck.verify(checkWith.getPublicKey()); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:12:09.257

我不确定那会有什么价值。如果用于签名 (checkWith) 的证书被吊销怎么办？听起来你会有一种错误的确认感。

如果要*验证*证书，可以使用[X509Certificate2.Verify](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.verify.aspx)方法

# ruby-on-rails - 用 activeadmin 画一行颜色

> ID：12520114
> 
> 赞同：7
> 
> 时间：2012-09-20T20:07:03.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

如果模型具有：updated = true，我想在索引页面上显示一行红色。我怎样才能使用activeadmin做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-06-27T19:19:55.110

从 Active Admin 1.0.0pre1 开始，可以根据该行中记录的属性指定行类。要将类分配给具有更新记录的行，您可以编写以下内容，假设您有一些更新检查功能`was_updated?`：

**应用程序/管理员/my_model.rb**

```
ActiveAdmin.register MyModel do

    ...

    index(:row_class => -> record { 'my-class' if record.was_updated? }) do

      # whatever columns you want:
      # selectable_column
      # id_column
      # column :attribute
      # actions
    end

    ...

end 
```

在源代码中对这个新选项进行了注释，用于[作为表进行索引。](https://github.com/activeadmin/activeadmin/blob/9c46b14ea0d9b3aaaa3d7520555c9959d06ce7f3/lib/active_admin/views/index_as_table.rb)

但是，Active Admin 的 SCSS 在规定表格行（或者更确切地说，表格数据）颜色时使用了很多[特殊性](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)`.my-class { background-color: red; }`，因此无法通过仅在样式表中编写自定义颜色来覆盖它们。不过，我发现以下方法可行：

**应用程序/资产/样式表/active_admin.css.scss**

```
...

tr.odd, tr.even {
    &.my-class {
        td.col {
            background-color: red;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T22:06:45.517

Active Admin 的表格呈现硬核`ActiveAdmin::Views::TableFor`如下：

```
 def build_table_body
    @tbody = tbody do
      # Build enough rows for our collection
      @collection.each{|_| tr(:class => cycle('odd', 'even'), :id => dom_id(_)) }
    end
  end 
```

所以可能最简单的方法是对该方法进行monkeypatch。我不知道子类化是否有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-22T15:39:44.907

如果你只是想要一些快速的东西，并且不需要猴子补丁 Activeadmin，你不能把 div 贴在你的桌子上吗？喜欢前任

```
table_for invoice.ccpayment do
  column 'Payments and payments attempts on this invoice: ' do |p|
    if p.paymentcomplete > 0
      div :class => 'green' do
        'Payment # '+p.id.to_s+' of '+p.currency.iso+' '+p.amount.to_s+' on '+p.created_at.to_s
      end
    else
      div :class => 'red' do
        'FAILED Payment # '+p.id.to_s+' of '+p.currency.iso+' '+p.amount.to_s+' on '+p.created_at.to_s
      end
    end
  end
end 
```

您可以在“activeadmin.css.scss”中轻松定义这些类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T15:50:06.650

我也想这样做，我发现最简单的方法是使用 JavaScript 当然这不是一个好的解决方案，因为我在标签 \ 类 \ ids 上进行中继，并且 ActiveAdmin 渲染可以在下一个版本中完全改变......但如果您将添加几个测试用例可能就足够了

例如，我想通过评级列为每一行着色

所以我把这段代码放在文件中：**A.js**（当然在 app\assets\javascripts 下）

```
// A.js

$(document).ready(function() {

    $('td.rating').each(function(i,obj) {
        var rating = parseInt(obj.innerHTML);
        if (!isNaN(rating))
        {
            var rowcolor = ""
            if (rating<5)
            {
                rowcolor = "#FF0000"; //red
            }
            else
            {
                var red = Math.round(255-(rating-5)*51);
                var green = 255; 
                rowcolor = "#"+decimalToHex(red,2)+decimalToHex(green)+"00";
            }
            obj.parentElement.className = "";               
            obj.parentElement.setAttribute('style', '');
            obj.parentElement.style.background = rowcolor;
        }
    });

});

function decimalToHex(d, padding) {
    var hex = Number(d).toString(16);
    padding = typeof (padding) === "undefined" || padding === null ? padding = 2 : padding;

    while (hex.length < padding) {
        hex = "0" + hex;
    }

    return hex;
}; 
```

**在我的 ActiveAdmin 模型中**

```
ActiveAdmin.register Bla do

  index do
    selectable_column
    column :rating
    <my other columns>
    default_actions
    script :src => javascript_path('A.js'), :type => "text/javascript"
  end
end 
```

因此，在呈现索引后，我的 JS 函数会根据评级列值对所有行进行着色（红色代表 0..4 - 黄色..绿色代表 5..10）

![着色 ActiveAdmin 行的示例](../Images/74f0ba14c622cd9c1de1e8b5acd069d9.png)

希望这可以帮助

# msbuild - MSBuild 目标和 Visual Studio 2012 问题

> ID：12520115
> 
> 赞同：7
> 
> 时间：2012-09-20T20:07:09.330
> 
> 标签：msbuild, visual-studio-2012, msbuild-task, webdeploy, msbuild-target

我很难使用 Visual Studio 2012 UI 通过 Webdeploy 部署我的第三方非参考程序集。我有一个名为“库”的文件夹，其中包含一些程序集。通过我的 *.csproj 文件中的以下内容，我可以将*Build Action*设置为“ *ThirdPartyAssemblies* ”：

```
<ItemGroup>
  <AvailableItemName Include="ThirdPartyAssemblies">
    <Visible>false</Visible>
  </AvailableItemName>
</ItemGroup>
<Target Name="AfterBuild">
  <Message Text="Build | Third party assemblies" Importance="high" />
  <Copy DestinationFolder="$(OutputPath)" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target> 
```

这很好用；当我构建时，程序集被复制到 bin 文件夹的根目录:-) 现在我遇到了一个问题：我无法通过 Webdeploy 将这些文件发布到服务器。我已经尝试了很多东西，似乎我找不到适合此任务的 MSBuild 目标......使用 Visual Studio 2010，我可以使用它：

```
<Target Name="MyTargetName">
  <Message Text="Deploy | Third party assemblies" Importance="high" />
  <Copy DestinationFolder="$(OutputPath)" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target>
<PropertyGroup>
  <OnAfterCopyAllFilesToSingleFolderForPackage>
    MyTargetName
  </OnAfterCopyAllFilesToSingleFolderForPackage>
</PropertyGroup> 
```

问题是; `OnAfterCopyAllFilesToSingleFolderForPackage`不再调用目标：- /

在深入研究之后`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets' file, I've also tried 'OnAfterCopyAllFilesToSingleFolderForMsdeploy`，但我无法让它工作。

谁能告诉我可以使用什么目标将这些程序集复制到带有 Webdeploy 的 Package 文件夹/服务器？

为什么 Visual Studio 2012 不将完整的 bin 文件夹复制到 Package 文件夹中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:04:43.320

感谢 Alexey，我找到了解决问题的方法，这就是我现在在我的 .csproj 文件中使用的内容，以支持为 Filesystem- 和 Webdeploy 复制第三方程序集：

```
<ItemGroup>
    <AvailableItemName Include="ThirdPartyAssemblies">
        <Visible>false</Visible>
    </AvailableItemName>
</ItemGroup>
<Target Name="AfterBuild">
    <Message Text="Build | Copying third party assemblies to output folder ($(OutputPath))" Importance="high" />
    <Copy DestinationFolder="$(OutputPath)" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target>
<Target Name="CopyBinFiles" AfterTargets="CopyAllFilesToSingleFolderForPackage" BeforeTargets="MSDeployPublish">
    <Message Text="Deploy | Copying third party assemblies to output folder ($(_PackageTempDir)\bin\)" Importance="high" />
    <Copy DestinationFolder="$(_PackageTempDir)\bin\" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:48:57.347

您正在使用 vs2012，这意味着您拥有闪亮的新 msbuild 4.0 =)。*使用新的AfterTargets*属性挂钩目标调用要简单得多。您可以查看[我对这个问题的回答以](https://stackoverflow.com/questions/12424047/slowcheetah-executes-after-post-build-events/12430000#12430000)获取使用示例。

# wpf - 是否可以让一个逻辑控件添加多个根级可视控件？

> ID：12520116
> 
> 赞同：1
> 
> 时间：2012-09-20T20:07:11.387
> 
> 标签：wpf, layout, custom-controls, children

简单的问题。`LabeledValue`假设我创建了一个名为“Label”和“Value”字符串属性的自定义控件。我想知道是否可以让该控件将两个根级视觉效果（例如两个 TextBlocks）输出到视觉树，或者它们是否必须共享父控件？

考虑将此控件逻辑地放置在网格上的情况。我希望网格有两个 TextBlock 类型的可视子项，它们分别预先配置为 Grid.Row 设置为“0”和“1”。

```
// For this *LOGICAL* tree (i.e. what I type in XAML)...
<Grid>
    <LabeledValue Label="FooText" Value="FooValue" Grid.Row="0" />
    <LabeledValue Label="LaaText" Value="LaaValue" Grid.Row="1" />
</Grid>

// ...I want it to generate this *VISUAL* tree (XAML for hierarchical illustration only here)...
<Grid>
    <TextBlock Text="FooText"  Grid.Row="0" Grid.Column="0" />
    <TextBlock Text="FooValue" Grid.Row="0" Grid.Column="1" />
    <TextBlock Text="LaaText"  Grid.Row="1" Grid.Column="0" />
    <TextBlock Text="LaaValue" Grid.Row="1" Grid.Column="1" />
</Grid>

// ...and NOT this *VISUAL* tree. (XAML for hierarchical illustration only here)...
<Grid>
    <LabeledValue>
        <TextBlock Text="FooText"  Grid.Row="0" Grid.Column="0" />
        <TextBlock Text="FooValue" Grid.Row="0" Grid.Column="1" />
    </LabeledValue>
    <LabeledValue>
        <TextBlock Text="LaaText"  Grid.Row="1" Grid.Column="0" />
        <TextBlock Text="LaaValue" Grid.Row="1" Grid.Column="1" />
    </LabeledValue>
</Grid> 
```

希望这是有道理的。

注意：这是对我们实际所做工作的完全过度简化，但如果可以回答/实现，那么它将向我展示我需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:18:17.643

不是直接的。您必须编写一个 MarkupExtension（或者可能只是一个普通的 DependencyObject）来查找其父 Panel 并根据其在逻辑树中的位置插入新元素。也许那时您甚至将自己从视觉/逻辑树中删除。

# actionscript-3 - AS3 发送和接收 OSC 消息

> ID：12520118
> 
> 赞同：0
> 
> 时间：2012-09-20T20:07:18.623
> 
> 标签：actionscript-3, udp, osc

有没有人从同一个应用程序成功发送和接收 OSC 消息？我正在使用 as3/tuio 库：[http](http://bubblebird.at/tuioflash/guides/sending-osc/) ://bubblebird.at/tuioflash/guides/sending-osc/当你尝试双向时，它似乎有点混乱......

我现在正在接收...并且基于一系列比较，需要使用 osc msg ping 另一个系统。我现在正在Mac上构建它。

# javascript - 使用 javascript 解析 URL # 片段

> ID：12520124
> 
> 赞同：3
> 
> 时间：2012-09-20T20:07:37.040
> 
> 标签：javascript, ajax, url, jquery, hash

我想将哈希片段解析为 javascript 中的关联数组，就像 PHP 中的 $_GET 超全局一样。这是网址：

```
www.mysite.com/randompage#name=donald&lastname=mclotsoquestions&age=25 
```

到目前为止，我有这个：

```
var hashfragment = location.hash;
var hashfragment_array = hashfragment.split('&'); 
```

Hashfragment_array 是 ["#name=donald","lastname=mclotsoquestions","age=25"]

如何从中创建键值对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:11:20.890

用这个：

```
var hash_array = location.hash.substring(1).split('&');
var hash_key_val = new Array(hash_array.length);

for (var i = 0; i < hash_array.length; i++) {
    hash_key_val[i] = hash_array[i].split('=');
} 
```

现在`hash_key_val[index]`是一个双元素数组，其中第一个元素是键 - 参数名称，第二个是它的对应值。

**编辑：**

在研究了这个案例一段时间后，我觉得我需要重写它——返回一个对象而不是数组数组。我看到balafi以前做过，但我不能忍受我的回答是如此违反直觉和臃肿的用法。[小提琴](http://jsfiddle.net/MBFuE/3/)中的完整示例。函数源在这里：

```
function getParameters(location) {
    if (typeof location === 'undefined') {
        location = window.location;
    }
    var hashParams = new (function Params() {})();
    if (location.hash.length === 0) {
        return hashParams;
    };
    var hashArray = location.hash.substring(1).split('&');
    for (var i in hashArray) {
        var keyValPair = hashArray[i].split('=');
        hashParams[keyValPair[0]] = keyValPair[1];
    }
    return hashParams;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T20:24:01.490

```
var str = www.mysite.com/randompage#name=donald&lastname=mclotsoquestions&age=25

var vars = str.substring(1).split('&');
var key = {};
for (i=0; i<vars.length; i++) {
  var tmp = vars[i].split('=');
  key[tmp[0]] = tmp[1];
} 

// key['name'] = "donald"  <--
// key['lastname'] = "mclotsoquestions"  <--
// key['age'] = "25"  <-- 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T20:12:19.587

使用[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)，这是一个久经考验的处理状态管理的库。

```
$(window).on('hashchange', function(e) { // event fired when the fragment changes
    var frag = $.deparam.fragment();
}); 
```

它还使添加或更改片段变得容易：

```
$.bbq.pushState({ someParam: 'value' }); 
```

# ruby - 读取特定的时间格式并从中减去

> ID：12520132
> 
> 赞同：0
> 
> 时间：2012-09-20T20:08:25.923
> 
> 标签：ruby

我正在解决我在互联网上发现的一个问题：

> 人体在夜间会经历 90 分钟的睡眠周期，如果您在睡眠周期结束时醒来，您会比在睡眠周期中醒来时感觉更神清气爽。挑战在于制作一个程序，该程序需要唤醒时间并输出入睡的可能时间，以便您在睡眠周期结束时醒来。*

`DateTime`我解决这个问题的方法是在将其解析为并将其存储到数组中之后从时间中减去 90m 。但是，我是 Rails 的新手，不太确定如何执行此操作。如何以原始格式显示我的时间？

这是我到目前为止所拥有的：

```
require 'date'

def sleep_time time
  a = []

  5.times do |i|
    multiple = i * 90 * 60
    a << time - multiple
  end

  puts a
end

puts "Enter wake-up time: "
time = DateTime.strptime(gets, '%I:%M %p').to_time

puts time
sleep_time(time) 
```

编辑：我想出了如何减去 90m（使用秒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:29:07.277

时间支持`strftime`，它采用与 一致的格式字符串`strptime`。利用：

```
time.strftime('%I:%M %p') 
```

例如：

```
Time.now.strftime('%I:%M %p')
=> "01:29 PM" 
```

此外，不要将其解析为 DateTime 对象，然后使用`to_time`. 而是直接解析为 Time 对象。时间`strptime`还支持：

```
require 'time'
Time.strptime('01:29 PM', '%I:%M %p')
=> 2012-09-20 13:29:00 -0700 
```

* * *

如果要从给定格式解析，然后再次以该格式输出，定义一个常量并在`strptime`and`strftime`方法中使用它：

```
TIME_FORMAT = '%I:%M %p'
Time.strptime('01:29 PM', TIME_FORMAT)
time.strftime(TIME_FORMAT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:15:10.847

如果您使用 ActiveSupport Extensions，您可以使用`1.day + 90.minutes - 10.seconds`. 你在[这里](http://guides.rubyonrails.org/active_support_core_extensions.html)找到。

```
# ActiveSupport Extensions will us allow to use 90.minutes
require 'active_support/all'

def go_to_sleep_at(end_time, sleep_cycles = 5)
  # Parse input into time object
  end_time = Time.parse(end_time)
  # Add one day
  end_time += 1.day if end_time.past?

  # Calculate start times
  start_times = []
  (1..sleep_cycles).each {|i| start_times << end_time - (90.minutes * i)}

  # Define output format
  time_format = '%H:%M %p'

  # Format times
  end_time = end_time.strftime(time_format)
  start_times.map!{|t| t.strftime(time_format)}.reverse!

  # Return output
  return "If you want to wake up at #{ end_time } you can go to sleep at #{start_times[0..-2].join(', ')} or #{start_times.last}."
end

p go_to_sleep_at('06:00')
# => "If you want to wake up at 06:00 AM you can go to sleep at 22:30 PM, 00:00 AM, 01:30 AM, 03:00 AM or 04:30 AM." 
```

只是无数解决方案之一:-D

# c# - 从 C# 中的列表视图中选择一个项目

> ID：12520133
> 
> 赞同：1
> 
> 时间：2012-09-20T20:08:30.213
> 
> 标签：c#, .net, c#-4.0, listview, listbox

我正在尝试在消息框中的列表视图中显示所选项目，因此使用以下代码

```
 private void lstMovie_SelectedIndexChanged(object sender, EventArgs e)
    { MessageBox.Show(lstMovie.FocusedItem.Text);} 
```

它第一次工作正常，但第二次我尝试选择另一个项目它会引发异常。你调用的对象是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:11:53.270

尝试这个：

```
private void lstMovie_SelectedIndexChanged(object sender, EventArgs e)
{
  if(lstMovie.SelectedItems.Count > 0)
  MessageBox.Show(lstMovie.SelectedItems[0]); //Will select first selected item.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:13:30.303

也许您应该使用[ListView.SelectedItems 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems.aspx)而不是[ListView.FocusedItem 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.focuseditem.aspx)

> ListView.FocusedItem 属性
> 
> 尽管某个项目可能是显示焦点标线的项目，但它实际上可能不是 ListView 中的选定项目。使用SelectedItems或SelectedIndices属性获取ListView控件中的选中项，FocusedItem属性不一定选中。

# mongodb - MongoDB $all/$elemMatch 问题

> ID：12520135
> 
> 赞同：0
> 
> 时间：2012-09-20T20:08:35.223
> 
> 标签：mongodb

我想知道是否有人在 MongoDB 中遇到过这个问题。

我正在尝试在另一个数组中搜索一个数组`$elemMatch`，然后查看该文档中的嵌套值是否在我提供的值数组中。

下面有一个简单的例子：

```
db.p.insert({v: [{o: [{s: {e: ["M"] }} ]} ]});
db.p.findOne({"v.o": {"$all": [{"$elemMatch": {"s.e": {"$in": ["M"]}}}]}});
null 
```

请注意，该`$all`语句的原因是我希望能够匹配几个不同的字段，其中每个字段不一定存在于数组中的文档上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:11:55.713

[`$all`](http://docs.mongodb.org/manual/reference/operator/all/)用于将数组属性与离散值列表进行匹配，而不是使用诸如 . 等运算符的条件列表进行匹配`$elemMatch`。如果您删除`$all`它，它的工作原理：

```
db.p.findOne({"v.o": { $elemMatch: { "s.e": {"$in": ["M"]}}}}); 
```

# java - java - GSON.fromJson 给出“找不到符号”

> ID：12520138
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:08:43.413
> 
> 标签：java, json, gson

我编写了一个简单的函数来从我的服务器获取 JSON 编码的字符串并将其解析为一个对象。
我以为我像 Google GSON 用户指南那样做，但显然我做错了什么。我的代码：

```
Gson gson = new Gson();
PlayerData data = gson.fromJson(response, PlayerData.class); 
```

它在第二行给出“找不到符号”。为什么？我正在一台稍旧的 Mac 上构建它，但我认为这不会有任何区别。

PlayerData 不会导致错误，因为那是一个内部类。但是我突然想到我在 try/catch 块中声明了“响应”，所以这可能会导致问题。我会检查它并在今天回帖（对我来说是早上）！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T07:54:38.623

好的，我自己解决了。问题是响应变量，它是在这两行之前的 try/catch 块中声明的。我希望我没有过多地打扰你，因为我肯定会回来问一些愚蠢的事情。Accely，我现在已经有了一个：同样的两行给出“不兼容的类型”，现在它可以找到符号`response`。但在我作为一个单独的问题提出这个问题之前，我会做一些研究。（所以我可以回答令人恐惧的“你试过什么？”；））

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-08-04T15:40:32.567

似乎下面缺少 import gson... import com.google.gson.Gson;

# wordpress - 将 git repo 部署到 Wordpress SVN 的正确方法是什么？

> ID：12520140
> 
> 赞同：1
> 
> 时间：2012-09-20T20:08:46.983
> 
> 标签：wordpress, git, svn, deployment, git-svn

我见过一百种不同的过时的临时脚本，它们要么使用 git-svn，要么在幕后完成所有艰苦的工作，但我仍然觉得我没有找到正确的方法来做到这一点。

我有一个本地 git 存储库，我想将它部署到我的 Wordpress 托管的 SVN 存储库。理想的功能是我在本地开发，准备好后推送到 github，然后将我所做的所有更改发送到 wordpress 存储库。

我的远程 wordpress 存储库将相应更新，删除由于重构和相应标记分支而可能不再存在的文件和文件夹。我的 github repo 应该像往常一样，标记传入的版本。

[https://github.com/deanc/wordpress-plugin-git-svn](https://github.com/deanc/wordpress-plugin-git-svn)

[http://danielbachhuber.com/2010/09/29/how-to-properly-use-git-with-wordpress-org-subversion/](http://danielbachhuber.com/2010/09/29/how-to-properly-use-git-with-wordpress-org-subversion/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:26:34.147

好吧，没有一种好的方法可以做到这一点。但是，这里有一个建议。

您可以做的是在公共目录之外的服务器上创建一个裸存储库。此存储库会将更改推送到您的 SVN 存储库，并且就像您的 SVN 存储库的看门人一样。您的网站已经运行了一个 SVN 存储库。

```
$ cd; mkdir site_bare.git; cd site_bare.git
$ git --bare init 
```

您可以在这个裸存储库的 post-commit 挂钩上使用 shell 脚本，例如[https://github.com/deanc/wordpress-plugin-git-svn 。](https://github.com/deanc/wordpress-plugin-git-svn)

```
#!/bin/sh

echo
echo "**** Pulling changes into the SVN repository [Hub's post-update hook]"
echo

cd $HOME/www || exit
unset GIT_DIR

# Change to SVN dir and commit changes
echo "Changing directory to SVN and committing to trunk"
cd $SVNPATH/trunk
svn commit --username=$SVNUSER -m "$COMMITMSG"

# Create a new tag and commit it :)
echo "Creating new SVN tag"
cd $SVNPATH
svn copy trunk/ tags/$NEWVERSION1
svn commit --username=$SVNUSER -m "Updating tag to $NEWVERSION1"

# Update the version number
echo "Updating version number for future executions"
cd $CURRENTDIR
echo $NEWVERSION1 > version.txt

exec git-update-server-info 
```

我从[https://github.com/deanc/wordpress-plugin-git-svn/blob/master/deploy.sh](https://github.com/deanc/wordpress-plugin-git-svn/blob/master/deploy.sh)获取了这个，但是你可以直接获取 git commit 消息而不是要求一个。

在您的本地计算机上，将裸存储库添加为远程并将更改推送到它：

```
git remote add bare <bare-repository-url> 
```

它的工作原理是，您编写一些代码并将其推送到裸存储库，该存储库使用其更新后挂钩将更改推送到 SVN 存储库。

您必须修改上面的代码才能推送更改。我刚刚给出了一个参考。

# c# - 如何使快捷上下文菜单读取和打开 zip 文件？

> ID：12520144
> 
> 赞同：0
> 
> 时间：2012-09-20T20:09:37.070
> 
> 标签：c#, zip, contextmenu, windows-explorer

我正在创建一个快捷上下文菜单以自动将 zip 文件读取到我的应用程序中，就像在其中一个 WinRar 应用程序中一样。你能给我一些关于如何做到这一点的想法或资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:15:25.980

您指的是*Shell Extension*。这是有关该主题的[一些谷歌搜索结果](https://www.google.com/search?q=explorer%20shell%20extension&aq=0&oq=explorer%20shell&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8)。

另一个来源：[The Complete Idiot's Guide to Writing Shell Extensions](http://www.codeproject.com/Articles/441/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

# php - 两个日期之间的分钟数

> ID：12520145
> 
> 赞同：10
> 
> 时间：2012-09-20T20:09:38.863
> 
> 标签：php, html

说我有一个日期

```
$future_time_ending = "2012-09-21 12:12:22" 
```

我如何计算当前时间和当前时间之间的分钟数`$future_time_ending`？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-20T20:12:54.260

一种方法：

```
$minutes = (strtotime("2012-09-21 12:12:22") - time()) / 60; 
```

`strtotime`将日期转换为 Unix 时间戳 - 自 Unix 纪元以来的秒数。减去当前时间戳，您就有了当前时间和未来时间之间的秒数。除以 60，结果以分钟为单位。

如果您不确定要比较的时间是将来，请取绝对值以获得正数：

```
$minutes = abs(strtotime("2012-09-21 12:12:22") - time()) / 60; 
```

为了让我的回答更完整，PHP 中提供了一种更精细的 OO 方法：

```
$time = new DateTime("2012-09-21 12:12:22");
$diff = $time->diff(new DateTime());
$minutes = ($diff->days * 24 * 60) +
           ($diff->h * 60) + $diff->i; 
```

如果输入时间来自服务器以外的时区，这将特别有用。

# php - PHP for() 循环与链接

> ID：12520146
> 
> 赞同：4
> 
> 时间：2012-09-20T20:09:43.397
> 
> 标签：php, for-loop

**我正在尝试做的事情：**创建一个编号的图片列表，其中包含指向每张图片的链接。列表编号不连续。

**变量：**

*   `$image->number`- 给出第一个数字；
*   `$image->next_pid`- 给出“下一个链接”；
*   `$image->total`- 给出最后一个数字；

**代码：**

```
<?php 
$list_first = $image->number;
$list_last = $image->total;
for ($list_first = 1; $list_first <= $list_last; $list_first++) {
    echo($list_first);
}
?> 
```

**问题：**此代码列出了我需要的图片编号列表。我不知道如何将“下一个链接”变量包含到循环中。

示例：`number`= 1；`next_pid`= 链接 ID2；`total`= 7。所以列表看起来像这样：1（没有链接）2（有链接ID2）3（链接ID3）等等，直到7。第一张图片没有链接，因为它已经显示了。抱歉不够明确。

[你可以在这里](http://www.noahd.net/demo-upwall/residential/rooftop-garden/)查看我正在尝试做的事情。我已经列出了该画廊中的其他图片，但没有链接。这是一个 wordpress 网站和一个插件，我用来在每个画廊中显示图片。您可以在[PasteBin](http://pastebin.com/2b6jmS8s)上查看该插件的 functions.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:21:38.067

编辑：这应该可以解决问题。

```
<?php 

$list_last = $image->total;
for ($i = 1; $i <= $list_last; $i++)
  {
  if ($_GET['pid'] != $i) echo "<a href='http://www.noahd.net/demo-upwall/residential/rooftop-garden/15/?pid=".$i."'> ".$i." </a>";
  else echo $i;
  }
?> 
```

该位`$list_first = $image->number;`没有用，因为您在 for 循环后不久将其覆盖。

添加了一个额外的行以不显示当前图像的链接。

# c++ - c++ / openframeworks - 如何在开放框架程序之间切换

> ID：12520148
> 
> 赞同：1
> 
> 时间：2012-09-20T20:09:50.297
> 
> 标签：c++, loading, openframeworks

我正在为需要通过 openFrameworks 运行各种程序的背景的表演艺术家开发一个程序。他需要一种能够以某种方式在它们之间轻松切换的方法。是否有某种方法可以创建加载或卸载其他 openframeworks 文件的主 shell？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:15:27.600

如果您有办法从客户端终止 RunApp()（通过退出按钮），您可以通过 tcl 或 python 将调用包装在脚本语言中。您最终将获得一个交互式外壳，您可以在其中运行不同的应用程序并设置参数。

为了简单起见，我将省略一些细节并假设我们使用 boost::python 进行语言绑定。[这篇文章](http://www.boostpro.com/writing/bpl.html)有更详细的阅读，boost::python 文档在[这里](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/index.html)。

主要思想是为 OF 创建一个领域特定的语言/一组包装器，可用于创建 OF 对象并*通过 shell*或*脚本*以交互方式访问它们的方法。

Boost 对象绑定大致像这样工作（引自[1](http://www.boostpro.com/writing/bpl.html)）：

首先在C++中定义类

```
struct World
{
    void set(std::string msg) { this->msg = msg; }
    std::string greet() { return msg; }
    std::string msg;
}; 
```

然后，将其公开为 python-module

```
#include <boost/python.hpp>
BOOST_PYTHON_MODULE(hello)
{
    class_<World>("World")
      .def("greet", &World::greet)
      .def("set", &World::set)
    ;
} 
```

在交互式 python 会话中使用如下所示：

```
>>> import hello
>>> planet = hello.World()
>>> planet.set('howdy')
>>> planet.greet()
'howdy' 
```

现在，由于可以包装任何类或方法，因此在如何实际利用 OF 方面有很多可能性。我在这个答案中指的是有两个应用程序，`App1`用`App2`C++/OF 实现，然后在 python 中链接到该实现。

交互式会话看起来像这样：

```
>>> import myofapps
>>> a1 = myofapps.App1()
>>> a2 = myofapps.App2()
>>> a1.run() # blocked here, until the app terminates
>>> a2.run() # then start next app .. and so forth
>>> a1.run() 
```

我不是 OF 黑客，但另一种（更简单）的可能性可能是交互式更改`ofApp::draw()`应用程序中 fe 的内容（在线程中运行）。这可以通过在 python 解释器中嵌入一个可参数化的自定义对象来完成：

```
/// custom configurator class

class MyObj {
   private int colorRed;

   // getter
   int getRed () {
      return colorRed;
   }

   // setter
   void setRed(int r) {
      colorRed = r;
   }

   /// more getters/setters code
   ...
};

/// the boost wrapping code (see top of post)
...

/// OF code here

void testApp::draw() {

    // grab a reference to MyObj (there are multiple ways to do that)
    // let's assume there's a singleton which holds the reference to it
    MyObj o = singleton.getMyObj();

    // grab values
    int red = o.getRed ();

    // configure color
    ofSetColor(red,0,0,100);

    // other OF drawing code here...
} 
```

一旦 OF 应用程序运行，可用于在解释器中以交互方式更改颜色：

```
>>> import myofapps
>>> a1 = myofapps.App1()
>>> c1 = myofapps.MyObj();
>>> a1.run() # this call would have to be made non-blocking by running the 
>>>          # app in a thread and returning right away
>>> c1.setRed(100);

... after a minute set color to a different value

>>>> c1.setRed(200); 
```

# matlab - 在 MATLAB 中调整 3D 矩阵（图像）的大小

> ID：12520152
> 
> 赞同：16
> 
> 时间：2012-09-20T20:09:58.077
> 
> 标签：matlab, image-processing, signal-processing, 3d-modelling, multidimensional-array

我有一个 3D 矩阵 (MxNxK) 并想将其调整为 (M'xN'xK') （如 matlab 中的 imresize）。我正在使用图像金字塔，但它的结果不是很准确，需要一个更好的。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T22:11:46.007

您可以使用`interp3`（因为您想插入 3D 数据）：

```
im=rand(2,3,4); %% input image
ny=3;nx=3;nz=5; %% desired output dimensions
[y x z]=...
   ndgrid(linspace(1,size(im,1),ny),...
          linspace(1,size(im,2),nx),...
          linspace(1,size(im,3),nz));
imOut=interp3(im,x,y,z); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-09T09:54:01.677

查看图像处理工具箱中的[Exploring Slices from a 3-Dimensional MRI Data Set示例。](http://www.mathworks.ch/ch/help/images/examples/exploring-slices-from-a-3-dimensional-mri-data-set.html)它看起来比实际上更复杂。当按照这个例子工作时，你也可以很容易地选择插值方法。要通过 调整体积各向同性`x`，您必须使用类似的东西（我没有测试它）：

```
T = maketform('affine',[x 0 0; 0 x 0; 0 0 x; 0 0 0;]);
R = makeresampler({'cubic','cubic','cubic'},'fill');
ImageScaled = tformarray(Image,T,R,[1 2 3],[1 2 3], round(size(Image)*x),[],0); 
```

如果您正在使用二进制图像/体积，最好将“三次”插值更改为“最近”。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T21:54:20.483

这是`resize`我们在[kWave](http://www.k-wave.org/)工具箱中使用的函数。

```
function mat_rs = resize(varargin)
%RESIZE     Resize a matrix.

% DESCRIPTION:
%       Resize a matrix to a given size using interp2 (2D) or interp3
%       (3D).
%       Use interpolation to redivide the [0,1] interval into Nx, Ny, Nz 
%       voxels, where 0 is the center of first voxel, and 1 is the center 
%       of the last one.
%
% USAGE:
%       mat_rs = resize(mat, new_size)
%       mat_rs = resize(mat, new_size, interp_mode)
%
% INPUTS:
%       mat         - matrix to resize
%       new_size    - desired matrix size in elements given by [Nx, Ny] in
%                     2D and [Nx, Ny, Nz] in 3D. Here Nx is the number of
%                     elements in the row direction, Ny is the number of
%                     elements in the column direction, and Nz is the
%                     number of elements in the depth direction.
%
% OPTIONAL INPUTS:
%       interp_mode - interpolation mode used by interp2 and interp3 
%                     (default = '*linear')
%
% OUTPUTS:
%       mat_rs      - resized matrix

% check the inputs for release B.0.2 compatability
if length(varargin{2}) == 1 && nargin >= 3 && length(varargin{3}) == 1

% display warning message
disp('WARNING: input usage deprecated, please see documentation.');
disp('In future releases this usage will no longer be functional.');    

% recursively call resize with the correct inputs
if nargin == 3
    mat_rs = resize(varargin{1}, [varargin{2}, varargin{3}]);
else
    mat_rs = resize(varargin{1}, [varargin{2}, varargin{3}], varargin{4});
end
return

end

% update command line status
disp('Resizing matrix...');

% assign the matrix input
mat = varargin{1};

% check for interpolation mode input
if nargin == 2
    interp_mode = '*linear';
elseif nargin ~= 3
    error('incorrect number of inputs');
else
    interp_mode = varargin{3};
end

% check inputs
if numDim(mat) ~= length(varargin{2})
    error('resolution input must have the same number of elements as data dimensions');
end

switch numDim(mat)
case 2
    % extract the original number of pixels from the size of the matrix
    [Nx_input, Ny_input] = size(mat);

    % extract the desired number of pixels
    Nx_output = varargin{2}(1);
    Ny_output = varargin{2}(2);

    % update command line status
    disp(['  input grid size: ' num2str(Nx_input) ' by ' num2str(Ny_input) ' elements']);
    disp(['  output grid size: ' num2str(Nx_output) ' by ' num2str(Ny_output) ' elements']);         

    % check the size is different to the input size
    if Nx_input ~= Nx_output || Ny_input ~= Ny_output 

        % resize the input matrix to the desired number of pixels
        mat_rs = interp2(0:1/(Ny_input - 1):1, (0:1/(Nx_input - 1):1)', mat, 0:1/(Ny_output - 1):1, (0:1/(Nx_output - 1):1)', interp_mode);

    else
        mat_rs = mat;
    end
case 3

    % extract the original number of pixels from the size of the matrix
    [Nx_input, Ny_input, Nz_input] = size(mat);

    % extract the desired number of pixels
    Nx_output = varargin{2}(1);
    Ny_output = varargin{2}(2); 
    Nz_output = varargin{2}(3);        

    % update command line status
    disp(['  input grid size: ' num2str(Nx_input) ' by ' num2str(Ny_input) ' by ' num2str(Nz_input) ' elements']);
    disp(['  output grid size: ' num2str(Nx_output) ' by ' num2str(Ny_output) ' by ' num2str(Nz_output) ' elements']); 

    % create normalised plaid grids of current discretisation
    [x_mat, y_mat, z_mat] = ndgrid((0:Nx_input-1)/(Nx_input-1), (0:Ny_input-1)/(Ny_input-1), (0:Nz_input-1)/(Nz_input-1));       

    % create plaid grids of desired discretisation
    [x_mat_interp, y_mat_interp, z_mat_interp] = ndgrid((0:Nx_output-1)/(Nx_output-1), (0:Ny_output-1)/(Ny_output-1), (0:Nz_output-1)/(Nz_output-1));

    % compute interpolation; for a matrix indexed as [M, N, P], the
    % axis variables must be given in the order N, M, P
    mat_rs = interp3(y_mat, x_mat, z_mat, mat, y_mat_interp, x_mat_interp, z_mat_interp, interp_mode);        

otherwise
    error('input matrix must be 2 or 3 dimensional');
end 
```

# java - 无法启动模拟器

> ID：12520159
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:10:18.630
> 
> 标签：java, android, error-handling

我无法启动我的模拟器，我不知道是什么问题我尝试删除它并创建新的但错误仍然相同

这是我在控制台框中遇到的错误

[2012-09-20 22:56:55 - SDK 管理器] AVD 'GPSTest' 删除错误。请参阅上面的错误。[2012-09-20 22:57:23 - SDK Manager] 删除文件 C:\Users\GGE.android\avd\maptest.ini [2012-09-20 22:57:23 - SDK Manager] 删除文件夹 C: \Users\GGE.android\avd\maptest.avd [2012-09-20 22:57:23 - SDK Manager] AVD 'maptest' 已删除。[2012-09-20 22:57:44 - MyAndroidApp1] 发现新模拟器：emulator-5554 [2012-09-20 22:57:44 - MyAndroidApp1] 等待 HOME ('android.process.acore') 启动... [2012-09-20 22:59:02 - MyAndroidApp1] emulator-5554 已断开连接！取消“com.mkyong.android.MainActivity 活动启动”！

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:14:49.227

首先，查看 logcat，尤其是在警告处（也许你的 Manifest 文件有问题，我有过这样的经验）。

然后，试试这个。在 CMD 中键入以下内容：

```
 adb kill-server
 adb start-server 
```

# c# - 为什么 DateTimeOffset.Now.Offset 和 TimeZoneInfo.Local.BaseUtcOffset 返回不同的值？

> ID：12520161
> 
> 赞同：5
> 
> 时间：2012-09-20T20:10:28.147
> 
> 标签：c#, datetime

我目前在 UTC -6 中央时区。TimeZoneInfo.Local.BaseUtcOffset 返回 -6，但 DateTimeOffset.Now.Offset 返回 -5。我不知道为什么这些会有所不同，而且我找不到可以解释这一点的文档。一个尊重夏令时而另一个不尊重夏令时吗？如果我执行 someDateTimeOffset.UtcDateTime.ToLocalTme()，我也会得到一个 DateTime 偏移量 -6 小时。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T20:19:32.157

根据[以下文档`TimeZoneInfo.BaseUtcOffset`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.baseutcoffset.aspx)：

> 指示当前时区标准时间与协调世界时 (UTC) 之间时差的对象。

和

> 因为 BaseUtcOffset 是 TimeZoneInfo 对象而不是 TimeZoneInfo.AdjustmentRule 对象的属性，所以 TimeZoneInfo 类将单个 UTC 偏移应用于所有时区的调整。

而返回*本地时区的当前时间*与 UTC`DateTimeOffset.Now.Offset`之间的差异。不是当前时区的*标准*时间。中央时间目前正在观察夏令时，因此存在差异。

 **如果您想在任何特定时间从 a 获取偏移量，该文档还为您提供了有关使用什么的指导`TimeZoneInfo`：

> 该`BaseUtcOffset`属性返回 UTC 与时区标准时间之间的差异；该[`GetUtcOffset`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.getutcoffset.aspx)方法返回 UTC 与特定时间点的时区时间之间的差异。
> 
> 如果我执行 someDateTimeOffset.UtcDateTime.ToLocalTme()，我也会得到一个 DateTime 偏移量 -6 小时。

那么这将取决于究竟有什么价值`someDateTimeOffset`。例如，如果是在冬季，您肯定会看到 6 小时的偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:15:39.697

我可能是错的，但我认为

```
DateTimeOffset.Now.Offset 
```

考虑到夏令时，而另一个则不考虑。**

# java - 屏幕上的java搜索图像

> ID：12520163
> 
> 赞同：0
> 
> 时间：2012-09-20T20:10:40.173
> 
> 标签：java, image, search, screen, awtrobot

有没有一种快速的方法可以在屏幕上找到图像？

我确实喜欢这样：（在那之前我用 Robot.createScreenCapture(...) 捕获了屏幕）

```
public static Point search(BufferedImage big, BufferedImage small) {
    Robot robot = null;
    try {
        robot = new Robot();
    } catch (AWTException e) {
        e.printStackTrace();
    }
    long time=System.currentTimeMillis();
    for (int x = 0; x < big.getWidth() - small.getWidth(); x++) {
        for (int y = 0; y < big.getHeight() - small.getHeight(); y++) {
            if (compare(x, y, big, small)) {
                return new Point(x, y);
            }
        }
    }
    System.out.println(System.currentTimeMillis()-time);
    return null;
}

private static boolean compare(int xs, int ys, BufferedImage img1, BufferedImage img2) {
    for (int x = 0; x < img2.getWidth(); x++) {
        for (int y = 0; y < img2.getHeight(); y++) {
            if (img1.getRGB(x + xs, y + ys) != img2.getRGB(x, y)) {
                return false;
            }
        }
    }
    return true;
} 
```

但有时只需要 200 毫秒，但有时需要 10000 毫秒！:(

编辑：如果有人知道 Autohotkey，它是另一种编程语言，并且有一个名为“ImageSearch”的函数可以在几毫秒内找到这些图像......（我认为基于 C++）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:19:02.407

两种可能的情况：

1.  您使用的算法并不是很快：它是一个 O(mn) 算法，因此您可能应该寻找[更好的](http://en.wikipedia.org/wiki/String_searching_algorithm)算法，例如 KMP 算法。

2.  在搜索图像之前，可能先压缩它们然后搜索，并使用另一个检查来确保压缩不会影响算法。一个简单的“删除每隔一行”应该可以大大加快程序的速度。

# objective-c - 如何找到 - plist 数组中的所有值？

> ID：12520166
> 
> 赞同：0
> 
> 时间：2012-09-20T20:10:50.853
> 
> 标签：objective-c, ios, for-loop

我希望这很清楚，并提前感谢，

我想将以下代码行从仅获取索引 0 处的值更改为获取所有现有索引处的值。我必须从我的 Plist 中的一个数组对象移动到许多数组对象 ps 这行代码在 cellForRowAtIndexPath

```
 NSArray *myIndexList = [[inPlist objectAtIndex:0] objectForKey:@"myIndex"];
    NSLog( @"data from INDEX !!!!!!!! %@", myIndexList); 
```

我一直在玩 for 循环 ....没有运气。-谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:15:38.097

枚举数组。

例如 - (void)enumerateObjectsUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL *stop))block;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:24:27.360

如果你的数组是一个字典数组，这似乎是因为你使用了 objectForKey，你可以只使用 valueForKey：

```
NSArray *myIndexList = [inPlist valueForKey:@"myIndex"]; 
```

这将为您提供数组中键“myIndex”的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:41:05.703

如果我理解正确，[快速枚举](http://developer.apple.com/library/ios/ipad/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)将是一种简单的策略。user846262 推荐的基于块的方法更高级，但起初这更容易一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:14:48.617

快速枚举很棒，但当您需要知道项目的索引时就不行了。

```
for(element *foo in array)
{
  // do stuff
} 
```

对比

```
[array enumerateObjectUsingBlock:^(element *foo, NSUInteger i, BOOL *stop){
// here you got access to both foo and i, and it is working exactly the same way for loop does

}]; 
```

高温高压

# c - 如何从具有 char、int 和 float 类型的指针值构造 char 数组（C）

> ID：12520170
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:11:01.960
> 
> 标签：c

我是 c 新手，可以使用一些帮助。

我正在尝试使用 fputs 命令输出一个文本文件，但是我需要向我没有的 fputs 函数输入一个完整的字符串。我有大约 6 个数组，我想将每个数组的第 [i] 个条目放入 fputs 函数中使用的字符串中。

有一组字符和多个整数和浮点数组。

目前我有我的各种数组，我正在尝试将所有 [i]th 放入一个数组中，我可以将其发送到 fputs 函数

例如我需要的字符串有：{array1[i] array2[i] array3[i] etc...}

任何帮助将不胜感激。

编辑：清晰度

编译器错误：来自不兼容指针类型的赋值，传递来自不兼容指针类型的 fput 参数之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:29:31.287

您正在寻找`sprintf()`.

```
char buf[256];
sprintf (buffer, "%d %d %d", array1[i], array2[i], array3[i]); 
```

如果你有太多`array[]`，你可以使用一个 for 循环然后使用`strcpy`and来制作你可以使用`strcat`的 final 。`buf``fputs`

# asp.net-web-api - WebAPI 存储库不刷新

> ID：12520171
> 
> 赞同：0
> 
> 时间：2012-09-20T20:11:04.260
> 
> 标签：asp.net-web-api

有没有人注意到为什么每次发出 Get 请求时新 WebAPI 中的存储库都不会刷新？我没有看到任何引用缓存之类的东西，但是，我没有看到每次都刷新数据。这是非常不一致的。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-25T16:04:53.667

我遇到了类似的问题，发生的事情是在查询之后没有处理数据库上下文。检查您是否在连接后[处理](https://stackoverflow.com/a/27896181/2986652)您的对象。

[这个示例](https://stackoverflow.com/a/13551144/2986652)帮助我处理和创建每个请求的上下文，这同样适用于 WebAPI，因此它们不会保留内存并为每个请求刷新。

# java - 参考问题

> ID：12520174
> 
> 赞同：1
> 
> 时间：2012-09-20T20:11:19.020
> 
> 标签：java, pointers

我正在编写一个程序，该程序创建一个对象，该对象保存来自用户的输入并将其存储在*ArraySortedList*中。要求之一是检查特定对象是否已在列表中。我遇到的麻烦是每当我输入第二组信息时都会出错。

```
 //Global variables at the top
    ListInterface <Golfer> golfers = new ArraySortedList < Golfer > (20);
    Golfer golfer;

    //Function Variables
    Scanner add = new Scanner(System.in);
    Golfer tempGolfer;
    String name = ".";
    int score;

    while(!name.equals("")) //Continues until you hit enter
    {
        System.out.print("\nGolfer's name (press Enter to end): ");
        name = add.next();
        System.out.print("Golfer's score (press Enter to end): ");
        score = add.nextInt();
        tempGolfer = new Golfer(name,score);

        if(this.golfers.contains(tempGolfer))
            System.out.println("The list already contains this golfer");
        else
        {
            this.golfers.add(this.golfer);
            System.out.println("\nYou added \'Golfer(" + name + "," + score + ")\' to the list!");
        }
    } 
```

错误信息：

```
Exception in thread "main" java.lang.NullPointerException
at ArrayUnsortedList.find(ArrayUnsortedList.java:67)
at ArrayUnsortedList.contains(ArrayUnsortedList.java:110)
at GolfApp.addGolfer(GolfApp.java:90)
at GolfApp.mainMenu(GolfApp.java:52)
at GolfApp.main(GolfApp.java:24) 
```

我几乎可以肯定这与变量的引用方式有关，但我不确定如何修复它，变量引用有很多麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:14:38.423

您的 golfer 变量未初始化。尝试：

```
this.golfers.add(tempGolfer); 
```

问候。

# iphone - 如何在未越狱的 iOS 设备上测试我签名的应用程序

> ID：12520181
> 
> 赞同：0
> 
> 时间：2012-09-20T20:11:54.993
> 
> 标签：iphone, ios, xcode, testing, itunes

作为我们软件开发生命周期的一部分，我们希望确保我们在推送到 iTunes 之前在内部测试的二进制文件与我们推送到 iTunes 的二进制文件相同。我知道这听起来很傻，但这是中型公司的制衡问题，因此测试人员可以确定编码人员在测试发生后没有添加任何内容。

那么有没有办法在没有越狱的设备上运行签名/认证的应用程序？或者有没有办法验证 IPW 是否与推送到 iTunes 的 zip 中的代码完全相同？

或者可能以不同的方式实现我的目标？

我们有一个有效的开发者帐户和大约 15 种未越狱的不同设备。宁愿用他们留下的股票进行测试，而不是越狱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:17:05.510

一个被签名到 App Store 的二进制文件不能通过正常的方式在设备上运行。您可以通过让开发人员创建 Ad Hoc 构建来测试代码。这将具有与 App Store 版本相同的功能，但您可以对其进行测试。

不幸的是，当为 App Store 重新编译应用程序时，可以添加更多代码。

您无权访问要测试的代码吗？如果必须，您可以让他们在您面前创建一个 adhoc，对其进行测试，然后在您面前为应用商店重新编译。然而，似乎有点矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:24:10.663

还有一个技巧：

首先以正常方式测试您的功能代码和错误。

将代码推送到 AppStore，但将发布日期设置为 3 周，而您的测试人员正在验证它是否是他们上次测试的内容。在这里的某个地方，我读到了那种可能性，忘记了在哪里。没试过！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:56:41.923

如果您使用临时配置文件编译您的应用程序以进行分发，您可以稍后获取该存档并使用应用商店配置文件将其退出并上传。

但是，您不能上传使用开发证书编译的应用程序。

# java - VLCJ/libvlc 跨平台库路径

> ID：12520183
> 
> 赞同：3
> 
> 时间：2012-09-20T20:11:59.923
> 
> 标签：java, cross-platform, libvlc, vlcj

我正在尝试在 Java 中创建一个跨平台应用程序，使用 libvlc 播放视频。我一直在网上搜索很多，但我没有找到任何代码可以在所使用的平台（Mac、Win、Linux – 32 或 64 位）上独立加载 libvlc。我使用 JNA 库来加载 libvlc。

例如，这是从 Mac 上的默认安装路径加载 libvlc 的代码：

```
NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "/Applications/VLC.app/Contents/MacOS/lib/");
Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); 
```

但是如果用户改变了VLC.app的安装路径呢？！

所以我需要创建一个独立于路径的跨平台加载代码。通常我只是不知道从哪里获得包含 libvlc 库的文件夹的路径。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:21:19.967

我通常搜索常见的位置，例如`/Applications/VLC.app/Contents/MacOS/lib/`或`Program Files/VideoLan/VLC/sdk/lib`。

如果您无法通过搜索众所周知的位置找到库，您将被迫要求用户为您提供位置...

我还在使用[vlcj](http://code.google.com/p/vlcj/)，它能够捆绑二进制文件并在运行时导出/安装它们（这可能有点令人望而却步，因为它会大大增加应用程序的大小）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:35:01.537

感谢您的帮助，但我找到了更好的解决方案。在阅读了 VLCJ 的 javadoc 几个小时后，我注意到 NativeDiscovery 类，它已经保存了所有这些常用路径。

```
private void setupLibVLC() throws LibraryNotFoundException {

    new NativeDiscovery().discover();

    // discovery()'s method return value is WRONG on Linux
    try {
        LibVlcVersion.getVersion();
    } catch (Exception e) {
        throw new LibraryNotFoundException();
    }
} 
```

该解决方案的唯一缺点是，如果用户已将 VLC 安装到自定义位置，您仍然不得不询问他库在哪里。

# gdb - 在路径中带有逗号的文件中向 GDB 添加断点

> ID：12520185
> 
> 赞同：3
> 
> 时间：2012-09-20T20:12:09.860
> 
> 标签：gdb, comma, dev-c++, breakpoints

使用 GDB 7.4 或 7.5（尚未测试旧版本）时，是否可以向包含逗号的文件夹路径中的文件添加断点？我一直试图让它工作（在开发 Dev-C++ 的调试器接口上工作时），但是 GDB 错误地插入了我的命令。

我使用以下命令向 GDB 发送断点命令：

```
// sets break at line 13 in mentioned file using filename:linenum
break "C:/Foo,Bar/main.c":13 
```

换句话说，\ 被替换为 / 以避免意外转义，并且为了额外的安全性，在文件名周围添加了“”。应该可以正常工作吗？

嗯，不。出于某种原因，GDB 剪辑文件路径并尝试执行：

```
break "C:/Foo":13 
```

...它会引发一个通用错误：

```
"Error in re-setting breakpoint 1: Function "C:/Foo" not defined. 
```

有什么想法可以解决这个问题吗？我在这里和 Google 上都找不到关于逗号和 GDB 文件名的任何有用信息。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-30T14:04:20.280

你不能这样做，因为`gdb`使用逗号分隔多个表达式，所以它会在你给它两条路径时做出反应。

# php - 当没有通过 MYSQL 的数据时，PHP 中的错误消息？

> ID：12520187
> 
> 赞同：0
> 
> 时间：2012-09-20T20:12:13.683
> 
> 标签：php, mysql

我有一个 php 文件从 MYSQL 数据库中获取一些数据。到目前为止，这是我的代码：

```
<?php
    include 'DB.php';
    $connection=mysql_connect(DB_SERVER,DB_USER,PASS);
    $db=mysql_select_db(DB_Name);
    $sql="select * from lookup where id = ".$_GET['id'];
    $res=mysql_query($sql) or die(mysql_error());
    while($row=mysql_fetch_array($res))
        {
        echo $row['message'];
        }
?> 
```

我必须添加什么，以便如果没有数据，就会出现错误消息？我在猜测 If/else 语句，但我不确定如何将其与 while 语法相匹配。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:13:24.637

```
$res = mysql_query(...) ...;
if (mysql_num_rows($res) == 0) {
   die("Hey, nothing here!");
} 
```

除此之外：

a) 你完全容易受到[SQL 注入攻击](http://bobby-tables.com)。在你继续之前停止你的编码项目并了解它们。

b) 停止使用 mysql_*() 函数。它们已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:14:02.673

您可以使用`$count = mysql_num_rows($res);`来获取返回的行数。然后，您可以使用 if 语句来显示任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:27:27.657

我做了上面提到的：

```
$query = "select * from lookup where id = ".$_GET['id'];
$result = mysql_query($query) or die ("Error in query: $query " . mysql_error());
$num_results = mysql_num_rows($result);
if ($num_results == 0){
echo "nothing here</br>";
}
else{
echo "<b> $num_results </b> result(s) match your query</br>";
while($row=mysql_fetch_array($res))
    {
    echo $row['message'];
    } 
```

您当然可以不使用“echo $num_results...”，但是您可以在此处给出结果的数量，这有时非常有用。

# c++ - GCC 4.x/C++11 中是否对 std::string 进行了引用计数？

> ID：12520192
> 
> 赞同：35
> 
> 时间：2012-09-20T20:12:25.870
> 
> 标签：c++, gcc, c++11, stdstring

将 gcc 4 与or一起使用时是否`std::string`计入引用？`-std=c++0x``-std=c++11`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-20T20:43:50.593

查看我发现的[libstdc++ 文档](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01016_source.html#l00114)（有关更多信息，请参阅链接）：

一个字符串如下所示：

```
 [_Rep]
                       _M_length
[basic_string<char>]   _M_capacity
_M_dataplus            _M_refcount
_M_p ----------------> unnamed array of char_type 
```

所以，是的，它是参考计数的。另外，从[这里](http://gcc.gnu.org/ml/gcc/2011-10/msg00115.html)的讨论：

> 是的，std::string 将在某些时候进行非引用计数，但由于非引用计数字符串在 C++98 中也是有效的，一种选择是切换到非引用计数字符串对于 -std=c++98 和 -std=c++11 模式。我不是说这会发生，但它可能会发生。

因此，似乎有计划将其更改为符合要求（但我不知道进展如何）。

**更新** 正如 emsr 在评论中指出的那样，目前有一个名为 的非引用计数扩展`vstring.h`，似乎它没有被替换的唯一原因`std::string`是因为 ABI 兼容性。这里有一个关于它的[问题](https://stackoverflow.com/questions/10463851/what-is-gccs-vstring)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-20T20:20:22.853

C++11 添加了***禁止*** `std::string`被引用计数的特定语言。因此，如果是这样，那么它在 GCC 的 C++11 标准库中是一个非常重大的失败。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-05T06:09:38.773

*添加一些有用的信息来发布这个问题。*

`std::string`随着 GCC 5 的发布，将**不再**对引用计数，以解决此 C++11 要求。

来自[https://gcc.gnu.org/gcc-5/changes.html](https://gcc.gnu.org/gcc-5/changes.html)

> 默认情况下启用 std::string 的新实现，使用小字符串优化而不是写时复制引用计数。

# vba - Powerpoint VBA - ExtractAssociatedIcon - 错误 424。需要对象

> ID：12520195
> 
> 赞同：1
> 
> 时间：2012-09-20T20:12:36.343
> 
> 标签：vba

我在幻灯片（在 Powerpoint 上）中插入了一个列表视图控件。

我尝试使用以下代码显示所有文件和文件夹+图标：

```
Dim fso, objFolder, objFile, strTemp
Set fso = CreateObject("Scripting.FileSystemObject")
Set objFolder = fso.GetFolder("c:\")
For Each objFile in objFolder.Files
    ImageList21.Images.Add Icon.ExtractAssociatedIcon(objFile.Name)
    ListView31.Items.Add objFile.Name, ImageList21.Images.Count - 1
Next 
```

我为我的项目添加了正确的引用，但是，发生了这个错误： `Run-time error 424\. Object required.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T21:23:22.743

“ExtractAssociatedIcon 是一种 .NET 方法，并且您使用的是 VBA，因此您需要找到一种可用于 VBA 的替代方法。” [蒂姆·威廉姆斯](https://stackoverflow.com/users/478884/tim-williams)

# bash - 在 bash 中解析文件

> ID：12520203
> 
> 赞同：1
> 
> 时间：2012-09-20T20:13:29.130
> 
> 标签：bash, parsing, awk, grep

我在文件中有一个输出，我想逐行解析文件，以便将带有“ip地址（10.113.193.70）”和“版本：47.80.99.08”的行发送到标准输出。使用 grep/awk 或 bash 进行解析的最佳方法是什么？

```
10.113.193.70

Executing (0,0,0,0,0,0,0,0,0,0):
==== product information ====
Product: e10
Package: default
Version: 47.80.99.08
Type:    customer
Builder: symsm
Project: RAID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:23:19.850

一切`awk` `sed` `grep` `bash`都会奏效

这是假设带有 IP 的行位于该行的开头，并且没有其他行以数字开头。
否则，您可以改进 IP 模式。

重击：

```
#!/usr/bin/env bash
while read -r
do [[ $REPLY =~ ^(Version|[[:digit:]]) ]] && echo "$REPLY"
done < file 
```

grep：

```
$ grep "^\(Version\|[[:digit:]]\)" file
10.113.193.70
Version: 47.80.99.08 
```

awk：

```
$ awk '$1 ~ /^(Version|[0-9])/ { print }' file
10.113.193.70
Version: 47.80.99.08 
```

赛德：

```
$ sed -n '/^\(Version\|[[:digit:]]\)/p' file
10.113.193.70
Version: 47.80.99.08 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:16:41.463

一种方法：

```
grep '[0-9][.][0-9]*[.][0-9]*[.][0-9]' filename 
```

# asp.net - ASP.NET Windows 身份验证不起作用/不接受凭据

> ID：12520206
> 
> 赞同：6
> 
> 时间：2012-09-20T20:14:00.203
> 
> 标签：asp.net, windows-authentication

几周以来，我一直在尝试通过`Google`阅读 SO 来解决这个问题，但运气不佳，所以我想我最终会尝试问自己。

我正在我们的 Intranet 上建立一个非常非常简单的`ASP.NET`站点，以便为内部用户生成一些信息。我使用的是 Windows 身份验证，而不是匿名访问，因为根据用户访问网站的内容，我将生成不同的信息。

长话短说，这`Windows 7`在我开发应用程序的本地机器上测试时非常有效。但是，从`Windows 2008 R2 server`我希望它驻留的地方，当我点击该站点时，我会弹出一个询问我的凭据的弹出窗口，即使我输入它们，它也会一次又一次地要求我提供它们。无论我是远程还是本地访问该站点，都会发生这种情况。如果我尝试使用匿名访问，我可以通过两种方式访问​​该站点，但由于我无法识别用户，我无法生成我想提供的信息。

笔记：

1.  在 IIS 中，我为站点启用了 Windows 身份验证和 ASP.NET 模拟。其他一切都被禁用。

2.  为了弄清楚，我目前将 web.config 设置为允许所有用户并且不拒绝任何用户。

3.  我使用的主机/URL 是 toolName.organization.local

4.  我担心这是 2008 R2 服务器管理员用户驻留在不同域中的问题，然后是我正在测试的远程用户，但它在本地也无法正常工作。

5.  在 AppHost 文件中，我目前启用了 windowsAuthentication。

    ```
     <windowsAuthentication enabled="true">
                <providers>
                    <add value="Negotiate" />
                    <add value="NTLM" />
                </providers>
                </windowsAuthentication> 
    ```

诚然，我通常在此服务器上为我们所有其他内部站点使用表单身份验证，所以我对 Windows 身份验证和这个问题有点陌生。在这一点上，我只是不确定接下来要尝试或检查什么，所以任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T17:47:37.763

我知道这是一个有点老的话题，但我遇到了同样的问题。原来我有使用身份的 AppPool：ApplicationPoolIdentity 而不是 NetworkService。一旦我切换它（在 IIS7.5 的高级设置下），我不再让服务器提示输入其他凭据，并且传递工作完美。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T18:15:26.147

首先，您应该意识到 Windows 直通身份验证仅适用于 Internet Explorer，并且仅当站点位于受信任站点或 Intranet 站点安全组中时。Firefox、Chrome 等会始终提示输入凭据。

话虽如此，你有几个问题。

您的 web.config 中应该有一个`<authentication mode="Windows" />`元素

您应该决定是否希望应用程序在用户的上下文中运行，在这种情况下，您还需要一个`<identity impersonate="true"/>`标签。如果不是，它应该是假的（尽管这是默认值）。

如果站点本身完全由 Windows 身份验证保护，则不需要在 web.config 中包含任何授权规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T01:21:21.767

以防万一它有帮助，对我来说问题是我已经将我的应用程序池留在经典模式下，以便尝试使用 NTFS 权限。我从来没有让它工作，但是一旦我把它切换回集成模式，我就可以使用`<allow>`和`<deny>`标签来配置特定用户的访问权限。

# python - python找不到easy_install，怎么解决？

> ID：12520208
> 
> 赞同：0
> 
> 时间：2012-09-20T20:14:04.563
> 
> 标签：python, easy-install

Python 2.6 找不到 easy_install。我已经尝试使用 2.6 版的 egg 以多种方式安装它，但它总是抛出这个错误。

```
 Running easy_install:
/usr/bin/python "-S" "-c" "import sys,os;p = sys.path[:];import site;sys.path[:] = p;[sys.modules.pop(k) for k, v in sys.modules.items() if hasattr(v, '__path__') and len(v.__path__)==1 and not os.path.exists(os.path.join(v.__path__[0],'__init__.py'))];from setuptools.command.easy_install import main;main()" "-mUNxd" "/Applications/Plone/src/collective.xmpp.chat/eggs/tmpgMHzeC" "-q" "/tmp/tmpKqLBFPget_dist/buildout.dumppickedversions-0.5.tar.gz"
path=/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python

Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named setuptools.command.easy_install
An error occurred when trying to install buildout.dumppickedversions 0.5\. Look above this message for any errors that were output by easy_install.
While:
  Installing.
  Loading extensions.
  Getting distribution for 'buildout.dumppickedversions==0.5'.
Error: Couldn't install: buildout.dumppickedversions 0.5 
```

我在网上广泛搜索，但找不到解决方案。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:18:27.693

我认为在 OsX 上，您应该在 /usr/bin/ 或 /usr/local/bin/ 中有一个 easy_install-2.6 可执行文件

您是否尝试过直接使用它，即

/usr/bin/easy_install-2.6 install some-package

你也可以尝试设置这个环境变量：

setenv VERSIONER_PYTHON_VERSION 2.6

或者

导出 VERSIONER_PYTHON_VERSION=2.6

对于重击

# jquery - 为什么这个 jQuery 可以在 jsfiddle.net 上运行，而不能在我的网站上运行？

> ID：12520210
> 
> 赞同：-6
> 
> 时间：2012-09-20T20:14:07.010
> 
> 标签：jquery, css, menu, fade, jsfiddle

> **可能重复：**
> [为什么我的 jsfiddle 可以工作，但我的网站却不行？](https://stackoverflow.com/questions/11551088/why-does-my-jsfiddle-work-but-not-my-web-site)

你好。抱歉，我对另一个问题的答案有疑问；我的意思是：http: [//jsfiddle.net/Mb6Nd/](http://jsfiddle.net/Mb6Nd/)

我试图在我的网站上这样使用它：side.js 是[http://jsfiddle.net/Mb6Nd/](http://jsfiddle.net/Mb6Nd/)上的 jQuery 代码，它对我不起作用。请帮我。

谢谢

```
 <header>
    <script type="text/javascript" src="side.js"></script>
 </header>
    <style>
    ul li {background-color: #cecece;}
    </style>

    <ul id="mainmenu">
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ul>
    ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:17:27.147

您的标记*无效*，样式标签应该在头标签内而不是在*头*标签之后，您还应该首先加载 jQuery 以便使用 jQuery 方法和属性。

```
<html>
   <head>
       <script type="text/javascript" src='http://code.jquery.com/jquery-latest.js'></script>
       <script type="text/javascript" src="side.js"></script>
       <style>
         ul li {background-color: #cecece;}
       </style>
   </head>
   <body>
       <ul id="mainmenu">
          <li>item 1</li>
          <li>item 2</li>
          <li>item 3</li>
       </ul>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:18:07.990

可能是文件引用错误

您没有在任何地方包含 jQuery 文件

包括

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

上面的side.js

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:26:57.670

你有错误的 html 标签，加上 jsfiddle 包含 jquery，但你似乎没有包含它。包含 jquery 脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T21:14:13.387

这是否说**$ 未定义**？如果是，则您的 jquery 尚未加载，还请查看您的脚本是否已加载。请在您的系统上安装 firebug，或者如果您有 google chrome，只需按 F12 即可查看控制台，您将获得更清晰的画面。

# c# - HRESULT 异常：0x80131047

> ID：12520212
> 
> 赞同：28
> 
> 时间：2012-09-20T20:14:10.780
> 
> 标签：c#, c, hresult

每当我尝试调试我的项目时，我都会遇到这个问题：

![Visual Studio 错误对话框](../Images/c08984baf3d6559b0f5d57a9a4c17d15.png)

这是法语，这是我的翻译：

> “尝试运行项目时出错：加载程序集“DBZ buu 的 Fury 文本编辑器”或其依赖项之一失败。给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2016-11-25T03:26:09.907

如果您`Assembly.Load()`用于加载文件，请尝试更改它`Assembly.LoadFile()`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-21T10:08:34.840

项目>项目属性>名称>从名称中删除撇号（“ `'`”），它将起作用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-30T16:41:30.563

它可能不一定与我的情况有关......

首先，我想说这是一个非常困难的问题故障排除，因为可能有许多变量导致与程序集相关的实际问题。

因此，我正在开发针对 32 位版本 Office 的 Outlook 加载项 2010。一切正常，直到有一天突然出现，加载项不再加载，并且出现错误“ **HRESULT：0x80131047** ”。搜索了将近半天，发现一篇不错的文章：

[http://blogs.msdn.com/b/astebner/archive/2007/05/06/2457576.aspx](http://blogs.msdn.com/b/astebner/archive/2007/05/06/2457576.aspx)

我尝试将程序集添加到全局缓存但无法。幸运的是，我有一个几乎相同的项目，它运行得很好，我已经进行了比较检查，一切看起来都一样，但是在这个过程中，我发现了一些不同的东西......因为它原来的平台目标 CPU 设置为**64 位**所以我把它改成了“**任何**”，瞧！- 这解决了它！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-11T13:25:00.063

我有一个导致此问题的无效 .\Properties\licences.licx 文件。该文件由 DevExpress 组件自动生成。

我刚刚删除了这个文件，瞧：构建成功。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-06T09:15:45.710

[这个 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/02be3d7e-cff5-47a7-a00a-1c5ebfcb47a7/hresult-0x80131047-while-trying-to-debug-an-application?forum=Vsexpressvbosting%20Process%22%20in%20the%20Debug%20tab.)说您需要从程序集名称中取出“特殊”字符，例如斜杠、逗号或撇号，以避免该错误。

如果这不能解决它，另一个建议是取消选中“调试”选项卡中的“启用 Visual Studio 托管进程”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-16T15:03:24.993

我有一个导致此问题的无效 App.Config 文件。

不知何故，我错过了主要元素的最后一个结束标签。

```
</Configuration> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-04T17:05:13.577

对于其他偶然发现本文并确定其命名约定是正确的并且他们正在使用 LoadFile 方法的人...

这是我想出的解决方案：

```
byte[] data = System.IO.File.ReadAllBytes(filename);
Assembly assembly = Assembly.Load(data); 
```

# sublimetext2 - 使用 SublimeText2 选择所有和多个光标

> ID：12520214
> 
> 赞同：58
> 
> 时间：2012-09-20T20:14:12.517
> 
> 标签：sublimetext2, sublimetext

我有一个包含 100 篇新闻文章的文本文件。我需要全选 > 将光标移到每行的开头并打开“多个光标”，以便添加一些数据。

由于新文章没有相同的乞讨字符，我不能使用CTRL+F3。

有没有办法 [CTRL] + [A] （全选）然后 > 在“多个光标”打开的情况下转到每行的乞讨？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-09-20T21:37:00.377

您应该使用`ctrl`+选择所有`A`。

`ctrl`然后使用++`shift`将选择分成每行一个选择`L`。

然后按左箭头键。

现在您应该能够在每行的开头键入数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-13T10:16:14.997

让我添加一些答案，（在 sublime 2 / sublime 3 中工作）

我尝试使用**@Riccardo Marotti** step ，但是当文章有标签时，它将导致很远的第一行

所以我做了一些修复，在每一行或每一行末尾制作光标：

> 1.  `ctrl`+ `A`// 全选
>     
>     
> 2.  `ctrl`+ `Shift`+ `L`// 将光标添加到所有行
>     
>     
> 3.  `Shift`+ `Home`// 将光标放在该行的第一个单词

如果您在第一行，则无需再次执行第一步，只需执行以下操作即可：

> `Shift`+ `End`// 将光标移到行尾，然后单击“右箭头”删除拖动

或者你可以试试这个（**真的是一个实验作品**）

> 只需使用您的鼠标中心，单击它（鼠标的中心滚动），然后拖动，这将导致添加更多光标，然后只需按左/右

或尝试在这里寻求更多：

> [崇高文本多光标快捷方式](https://stackoverflow.com/questions/25827388/sublime-text-multiple-cursor-shortcut)
> 
> [覆盖多个光标的快捷方式](https://stackoverflow.com/questions/26900984/how-to-override-shortcut-for-multiple-cursors-sublime-text-3)

希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:18:53.423

我认为当您的光标位于行首时 ++ （或 ）可能就是您要查找`ctrl`的内容`alt`。它会将光标放在多行上，并且您键入的内容将在每行上重复。`down``up`

# struct - 将 C 中的嵌套结构编组到 C#

> ID：12520216
> 
> 赞同：1
> 
> 时间：2012-09-20T20:14:26.070
> 
> 标签：struct, marshalling

我再次坚持将 C 结构编组到 C# 中。这是我要编组到 C# 的内容。

## C函数签名如下

```
 int GetParametersDescription(unsigned int *numParams,
                             OP_PARAMETER_INFO **parameterInfo,
                             unsigned int *numVars,
                             OP_VARIABLE_INFO **variableInfo); 
```

## 输出参数

**numParams：**模型参数的数量。
**parameterInfo：**返回的参数结构列表。列表的大小为 numParams。
**numVars：**模型变量的数量。
**variableInfo：**返回的变量结构列表。列表的大小为 numVars。

## C中的OP_PARAMETER_INFO结构签名

```
typedef struct OP_PARAMETER_INFO {
    unsigned id;             // Parameter Id
    char *path;              // Parameter's path in the model
    char *name;              // Parameter's label if any
    char *alias;             // Parameter's alias if any.
    struct OP_VARIABLE_INFO *varInfo; // Pointer on OP_VARIABLE_INFO if variable exist
    unsigned nbRows;         // Number of rows for this parameter
    unsigned nbCols;         // Number of cols for this parameter
    double *values;          // List of values, nbValue = nbRows * nbCols
    OP_SEARCH_RESULTS exist; // This is an enum
    unsigned newParamId;     // ID of the estimated parameter if does not exist
} OP_PARAMETER_INFO; 
```

## C中的OP_VARIABLE_INFO结构签名

```
typedef struct OP_VARIABLE_INFO {
    unsigned id;                      // Variable Id
    char *name;                       // Variable name
    unsigned int nbParams;            // Number of parameters associated with the variable
    struct OP_PARAMETER_INFO** param; // List of pointers of OP_PARAMETER_INFO structure
} OP_VARIABLE_INFO; 
```

## OP_SEARCH_RESULTS 是一个枚举，签名如下所示

```
typedef enum {
    OP_SEARCH_NOT_FOUND,
    OP_SEARCH_FOUND_EXACT,
    OP_SEARCH_FOUND_DIFFERENT,
    OP_SEARCH_FOUND_ESTIMATION
} OP_SEARCH_RESULTS; 
```

我确实尝试过在 C# 中制作结构，但它们似乎都不起作用。您能否帮我在 C# 中定义这些结构并在 P/invoke 方法中调用它们并提取结构信息.....

# r - R仅检索变量的值

> ID：12520218
> 
> 赞同：4
> 
> 时间：2012-09-20T20:14:30.023
> 
> 标签：r, variables

这可能是一个超级愚蠢的问题，我觉得我应该知道答案。

我正在使用一个名为 maxstat 的包，当我运行测试时，我得到如下输出：

```
Maximally selected Wilcoxon statistics using none

data:  x and scores 
M = 8.3107, p-value = NA
sample estimates:
estimated cutpoint 
            0.6421 
```

我将此输出称为“x”，我只想检索估计的截止点的值。所以我尝试：

```
> x$estimate
estimated cutpoint 
        0.6421 
```

如何在没有附加名称“估计切割点”的情况下获得值 0.6421？

我想把这个值放在一个表中，当我使用 cbind 或 rbind 附加值时，名称也会附加。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T20:15:57.300

见`?unname`，例如

```
unname(x$estimate) 
```

尽管所有这些都是删除`"names"`属性。如果您有其中几个要取消命名，则将它们全部绑定在一起可能会更容易，然后通过以下方式之一删除行或列名：

```
rownames(obj) <- NULL
colnames(obj) <- NULL 
```

或者

```
dimnames(obj) <- list(NULL, NULL) 
```

where `obj` is the object containing the data you wish to un-name.

# ios - 我的标签栏是否违反了人机界面指南？

> ID：12520219
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:14:30.927
> 
> 标签：ios, human-interface

我目前正在为使用标签栏的客户开发一个应用程序，但我担心我可能违反了人机界面指南。

我的应用程序从一个主视图控制器开始，它通向其他几个视图控制器。其中一个视图控制器有一个标签栏。标签栏上的第一项是主页按钮。单击该按钮会将用户发送回主视图控制器。主视图控制器没有标签栏。

小时的问题......这是否违反了人机界面指南？

我知道建议的路线是使用导航控制器，我的客户肯定会同意，但我担心当前配置是否可行。

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:57:08.837

首先，我会说它违反了 HIG，因为这是 iOS 用户的意外行为。在 HIG 中，它声明你应该接受 IOS UI 范式，这意味着你不应该模仿内置应用程序，而是遵循这些应用程序的设计模式。您要达到的目标是用户不期望的（因为这不是正常行为），因此并不是真正正确的方法。

它还可能在以下方面违反 HIG：

> **通常，使用选项卡栏在应用程序级别组织信息。**选项卡栏非常适合在主应用程序视图中使用，因为它是一种扁平化信息层次结构并同时提供对多个对等信息类别或模式的访问的好方法。

您的应用程序在应用程序内部而不是在应用程序级别放置了一个标签栏。但正如文中所说，您**通常**应该坚持这一点。

但是，我认为这样做并不是特别好的 UI，因为它会让用户感到困惑。有一刻有一个标签栏，然后当按下一个标签时，标签栏就消失了。我肯定会重新考虑您遇到的 UI 问题并为此使用另一种机制（例如 UINavigationController），或者尝试通过在应用程序级别使用它来以不同的方式使用标签栏。

# api - Eventbrite API - 使用经典 ASP 获取事件

> ID：12520223
> 
> 赞同：2
> 
> 时间：2012-09-20T20:14:39.767
> 
> 标签：api, asp-classic, eventbrite

我仅限于经典 ASP 并尝试使用以下代码从 Eventbrite 上的用户获取事件列表：

```
Dim req
Set req = Server.CreateObject("MSXML2.ServerXMLHTTP")

response.ContentType="text/xml"
req.open "GET", "https://www.eventbrite.com/xml/user_list_events?app_key=XXXX&user_key=XXXX&user=XXXX", False
req.send
Response.Write(req.responseText) 
```

这已与其他 API 一起使用，但无法与 Eventbrite 一起使用。当我测试 URL 时，它可以在 RESTClient 和我的浏览器中运行。我错过了什么吗？

非常感谢任何帮助！

谢谢！约翰

# c++ - 如何将 NDEF 中的 NFC 标签转换为非 NDEF

> ID：12520229
> 
> 赞同：1
> 
> 时间：2012-09-20T20:14:52.230
> 
> 标签：c++, c, nfc, mifare, ndef

有没有办法将 NDEF 格式的 NFC 标签再次转换为原始格式，即使其成为非 NDEF。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:23:12.643

在某些情况下，这是可能的。NFC 论坛有 4 种标准化的 NFC 标签，可以包含 NDEF，和（至少）2 种专有标签。

NFC 论坛标签：

1.  类型 1 标签：您可以删除所有与 NDEF 相关的数据，但内存块可能会被锁定（变为 R/O），这是无法撤消的，AFAICT。
2.  类型 2 标记：一些基本字节存储在一次写入内存中。这不能被撤消。内存块可能被锁定（变为 R/O），这是无法撤消的。
3.  类型 3 标签：格式化程序是专有的，所以一般来说，这是无法撤消的（这需要制造商索尼的合作）。
4.  类型 4 标签：这可以实现为智能卡上的小程序。如果您有该卡的开发人员工具，您可能会卸载该小程序。它也可以是像 NXP 的 DESFire 这样的卡（如果您有所需的访问控制密钥，您可以在这种情况下删除 NDEF 存储的文件）。

专有的恩智浦标签：

1.  类型 MIFARE 标签：基于 MIFARE Classic。可以删除所有内容（如果您有所需的访问控制密钥）。
2.  类型 ICODE 标签：基于 ICODE SLI 系列（符合 ISO 15693）。可以删除所有内容，但可以锁定内存块 (R/O)，这是无法撤消的。

如果您有 Android NFC 设备，NXP TagWriter 应用程序可以选择完全擦除其中一些标签（在应用程序设置中选择专业版的 UI 模式以访问此功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-20T05:07:06.160

NDEF 是用十六进制写的。您可以使用十六进制到 ASCII 转换器来解码大部分内容，但我认为它并不能全部完成。

# c++ - 处理数组队列

> ID：12520232
> 
> 赞同：0
> 
> 时间：2012-09-20T20:15:08.550
> 
> 标签：c++, stl, queue, std

```
#ifndef UNICODE
#define UNICODE
#endif

#include <iostream>
#include <Windows.h>
#include <queue>

using namespace std;

void addSomeContent(queue<TCHAR*> &s)
{
    static int counter=0;
    TCHAR buffer[30];

    wsprintf(buffer,TEXT("foo%d"),counter);

    s.push(buffer);
    counter++;

    if(counter < 10)
    addSomeContent(s);
}

int main (void)
{
    queue<TCHAR*> strings; 

    addSomeContent(strings);

    while(!strings.empty()) 
    {   
        wcout<<strings.front()<<endl;
        strings.pop();
    }

    system("pause");
    return (0);
} 
```

输出：

> foo0
> ♦</p>

期望：

> foo0
> foo1
> 。
> .
> .
> foo9

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:32:21.550

原因是您`buffer`是堆栈上的本地变量。一旦你离开这个功能，它就会过期。

如果您真的想这样做，请在 heap 上创建它`TCHAR *buffer = new TCHAR[30];`。并且您可能需要`delete[]`在某个时间点之后使用它。

但是，我认为使用一些内置类型或 stl 容器而不是操作指针将使您的代码更具可读性和可管理性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:29:44.890

当你这样做时

```
s.push(buffer); 
```

您将指向`buffer`队列的指针多次添加（在最好的情况下，您将获得最后一个字符串的相同副本），但是一旦到达末尾，该指针将无效`addSomeContent`（如果不是分段违规，则为您提供随机内容） . 您应该将字符串的副本添加到队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:38:46.433

问题是 TCHAR 指针在堆栈中。为了将指针传递出函数，您应该在堆中分配它（使用 new ）。

但是你为什么使用 TCHAR 而不是 std::string？

# php - 另一个功能先于那个

> ID：12520233
> 
> 赞同：0
> 
> 时间：2012-09-20T20:15:17.670
> 
> 标签：php, class

好的，所以我有一堂课，每当我调用一两个函数时，它都会跳过它们，为什么会发生这种情况？

这是我的代码：

```
$name = $this->name("Matt"); //returns "Hello Matt";
$welcome = $this->wel();
echo $name."\n";
echo $welcome;
echo "End.";

function name($name){
return "Hello ".$name;
}
function wel(){
return "Good morning";
} 
```

但它一直跳到' echo "end"; ' 我设置了一个变量，当我再次尝试时它起作用了。但它就像它跳过行然后回到他们那里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:17:50.313

`$this`仅在作为对象类成员并在对象上下文中调用的函数中可用。“外部”，$this 将是未定义的，而不是对象。由于您没有提及任何错误/警告，因此您可能已关闭 display_errors 和 error_reporting。您应该打开它们，尤其是在您测试/开发学习时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:22:37.440

当我将所有代码放入一个类时，它按预期工作：

```
class Person {
    function __construct() {
        $name = $this->name("Matt"); //returns "Hello Matt";
        $welcome = $this->wel();
        echo $name."\n";
        echo $welcome;
        echo "End.";
    }

    function name($name){
        return "Hello ".$name;
    }
    function wel(){
        return "Good morning";
    }
}

$matt = new Person(); 
```

有这个输出：

```
Hello Matt
Good morningEnd. 
```

但我认为这可能是你想要的更多：

```
class Person {
    var $name;

    function __construct($name = '') {
        if ($name) $this->name = $name;
    }

    function name(){
        return "Hello " . $this->name;
    }
    function wel(){
        return "Good morning " . $this->name;
    }
}

$person = new Person('Matt');
print $person->name();
print $person->wel(); 
```

有这个输出：

```
Hello MattGood morning Matt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:19:41.000

您需要将您的方法/函数包含在类声明中：

`$this`仅在班级内可用

```
<?php

class yourclass{

    function name($name){
        return "Hello ".$name;
    }

    function wel(){
        return "Good morning";
    }

}

$your_object = new yourclass();

$name = $your_object->name("Matt"); //returns "Hello Matt";

$welcome = $your_object->wel();

echo $name."\n";
echo $welcome;
echo "End.";

?> 
```

使用示例`$this`

```
<?php
class yourclass{

    function set_name($name){
        $this->name = $name;
        return $this;
    }

    private function welcome(){
        return "Good morning";
    }

    /*example Using $this*/
    function output(){
        echo 'Hello, '.$this->name . PHP_EOL,
              $this->welcome() . PHP_EOL,
             'End.';
    }
}

$your_object = new yourclass();

$your_object->set_name("Matt")->output();
/*
Hello, Matt
Good morning
End.
*/
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:20:38.047

除非这只是您的代码片段，否则它不是类的实现。您不需要使用 $this 来调用函数：

```
$name = name("Matt"); //returns "Hello Matt";
$welcome = wel(); 
```

# haskell - 为什么反应香蕉中没有从非事件中构建事件的函数？

> ID：12520242
> 
> 赞同：7
> 
> 时间：2012-09-20T20:15:39.883
> 
> 标签：haskell, frp, reactive-banana

我正在自学 FRP 和 Reactive-banana，同时编写我希望对跟随我的人更有用的教程。[你可以在这里](http://www.haskell.org/haskellwiki/User%3aEcho_Nolan/Reactive_Banana_Straight_to_the_Point)查看我的教程进度。

我一直在尝试使用事件来实现简单的哔哔声示例。我知道我需要做这样的事情：

```
reactimate $ fmap (uncurry playNote) myEvent 
```

在我的`NetworkDescription`，但我不知道如何让网络重复做同样的事情，或者做一次。理想情况下，我正在寻找这样的东西：

```
once :: a -> Event t a
repeatWithDelay :: Event t a -> Time -> Event t a
concatWithDelay :: Event t a -> Event t a -> Time -> Event t a 
```

上面的`Time`类型只是我们最终使用的任何时间测量的替代品。我是否需要将系统时间作为行为来驱动“延迟”功能？这似乎比必要的复杂。

提前致谢，

回声诺兰

编辑：好的，repeatWithDelay 和 concatWithDelay 的类型没有意义。这就是我真正的意思。

```
repeatWithDelay :: a -> Time -> Event t a
concatWithDelay :: a -> a -> Time -> Event t a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:57:19.703

我暂时选择不在核心模型中包含这些功能，因为*时间对**一致性*提出了各种挑战。例如，如果两个事件计划在 5 秒后发生，它们应该同时发生吗？如果不是，应该先来哪一个？我认为核心模型应该可以得到正式证明，但这不适用于实际的物理时间测量。

也就是说，我计划以“它们有效，但不能保证”的方式包含这些功能。我还没有这样做的主要原因是*时间测量没有规范的选择*。不同的应用程序有不同的需求，有时您想要纳秒级分辨率，有时您想要使用 GUI 框架中的计时器，有时您想要同步到外部 MIDI 时钟。换句话说，您希望基于时间的函数能够与许多计时器实现通用地工作，并且只有在 reactive-banana-0.7.0 的情况下，我才找到了一个很好的 API 设计。

当然，已经可以通过使用定时器来实现自己的基于时间的功能。Wave.hs示例演示了如何做到这一点[。](http://www.haskell.org/haskellwiki/Reactive-banana/Examples#wave)另一个例子是 Henning Thielemann 的[reactive-balsa 库](http://hackage.haskell.org/package/reactive-balsa)，它实现了各种基于时间的组合器来实时处理 MIDI 数据。

# jqgrid - jqGrid 单元格格式化程序属性

> ID：12520246
> 
> 赞同：1
> 
> 时间：2012-09-20T20:15:57.277
> 
> 标签：jqgrid

有没有办法动态更新列的单个单元格上的格式化程序。我可以使用更改整个列的格式化程序

> $(jQuery('#grid').jqGrid('setColProp', 'colName', {formatter: ''})).trigger('reloadGrid')

但是，当我使用网格下方的代码时，会刷新但没有任何变化。

> $(jQuery('#grid').jqGrid('setCell', j, 'colName', '','',{formatter: ''})).trigger('reloadGrid')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:01:05.967

不，格式化程序适用于整个列，而不是单个单元格。如果您需要这种级别的粒度，您将需要使用具有逻辑的自定义格式化程序函数，该函数可以以某种方式检测您在该特定单元格中 - 例如通过使用行对象来获取行 ID。

# sql - SQL RANDOM ORDER BY ON JOINED TABLE

> ID：12520248
> 
> 赞同：3
> 
> 时间：2012-09-20T20:16:16.117
> 
> 标签：sql, sql-server, linq, sql-server-2008, linq-to-sql

我有 2 张桌子：`Persons(idPerson INT)` 和`Questions(idQuestion INT)`.

我想将数据插入到第三个表中：`OrderedQuestions(idPerson INT, idQuestion INT, questionRank INT)`

我想以随机顺序将所有问题分配给所有人。

我想过做一个 CROSS JOIN 但后来，我得到了每个人的相同顺序的问题。

```
INSERT INTO OrderedQuestions
    SELECT idPerson, idQuestion, questionRank FROM Persons 
    CROSS JOIN
    (SELECT idQuestion,ROW_NUMBER() OVER (ORDER BY NEWID()) as questionRank
    FROM Questions) as t 
```

我怎样才能为每个人实现这样一个随机的、不同的排序？

显然，我希望解决方案尽可能快。（可以使用 TSQL 或 Linq to SQL 来完成）

* * *

3 个人和 5 个问题的预期结果：

```
 idPerson         idQuestion         questionRank
1\.  1                18                  1
2\.  1                14                  2
3\.  1                25                  3
4\.  1                31                  4
5\.  1                2                   5
6\.  2                2                   1
7\.  2                25                  2
8\.  2                31                  3
9\.  2                18                  4
10\. 2                14                  5
11\. 3                31                  1
12\. 3                18                  2
13\. 3                14                  3
14\. 3                25                  4
15\. 3                2                   5 
```

我刚刚编辑了结果（由于 ID 是自动生成的，它们不能用于对问题进行排序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:58:42.477

这可能会写得更有效，但它满足所有要求。

```
SELECT 
    idperson, 
    idQuestion,
    ROW_NUMBER() OVER (PARTITION BY personid ORDER BY ordering) as questionRank 
FROM (
    SELECT idperson, idQuestion, ordering 
    FROM person
    CROSS JOIN 
    (
        SELECT idQuestion, NewID() as ordering FROM Question
    ) as t
) as a
order by personid, QuestionRank 
```

# python - 从源代码安装 matplotlib 时使用本地目录

> ID：12520251
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:16:27.473
> 
> 标签：python, matplotlib, makefile

我将 freetype-2.4.10、libpng-1.5.12 和 zlib-1.2.7 安装到本地目录中。现在，在 matplotlib 我想做：

```
python setup.py install 
```

当我为 lxml 这样做时，我做了类似的事情：

```
python setup.py install --with-xml2-config=/home/test/libxml2/bin/xml2-config --with-xslt-config=/home/test/libxslt/bin/xslt-config 
```

如何将 matplotlib 指向正确的 freetype、libpng 和 zlib 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:59:02.483

从`INSTALL`文件中：

> 如果您已将先决条件安装到非标准位置并且需要通知 matplotlib 它们在哪里，请编辑`setupext.py`基本目录并将其添加到`basedir`您的 `sys.platform`. 例如，如果某些所需库的标题位于 中 `/some/path/include/someheader.h`，则将其放入您平台`/some/path`的 列表中。`basedir`

# magento - Onclick Magento PHP

> ID：12520253
> 
> 赞同：0
> 
> 时间：2012-09-20T20:16:37.167
> 
> 标签：magento

我需要单击一个按钮并更改订单状态。到目前为止，我已经这样做了：

```
<?php $_order = $this->getOrder() ?>
<div class="buttons-set">
<p class="btn"><a href="<?php $this->saveState($_order);?>">Button</a></p>
</div> 
```

在我的 php 中，我有：

```
public function saveState($order)
{
   return $order->setState(Mage_Sales_Model_Order::STATE_NEW, true);
} 
```

问题是每次phtml加载它都会执行saveState函数，每次都改变订单状态，不知道为什么。我需要在单击按钮的地方执行 saveState 函数。请帮我解决这个问题，我真的被卡住了！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:34:02.253

`<a href="<?php $this->saveState($_order);?>">Button</a>`不链接到`saveState()`方法。它只是立即执行该`saveState()`方法，并链接到 的返回值`saveState()`，在这种情况下，我猜这只是一个`sales/order`对象的字符串表示形式。

您需要做的是[创建一个控制器](http://blog.baobaz.com/en/blog/magento-module-create-your-own-controller)，您可以通过类似的方式链接到其操作

```
<a href="<?php
    echo Mage::getUrl('YourModule/YourController/YourAction')
?>">Button</a> 
```

另请注意，在简单链接中包含“操作”通常被认为是不好的做法：它不是[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)。

# mysql - 将 OHLC-Stockmarket 数据分组到多个时间范围 - Mysql

> ID：12520257
> 
> 赞同：7
> 
> 时间：2012-09-20T20:16:47.833
> 
> 标签：mysql, sql, stockquotes, group-by

我需要将具有 {Name, DateTime, Open, High, Low, Close, Volume} 的股票市场“1min”数据分组到不同的时间范围内，即。MYSQL 上的“5 分钟/15 分钟/60 分钟”。基于 sqlfiddle 构建的架构 - [http://sqlfiddle.com/#!2/91433](http://sqlfiddle.com/#!2/91433)。

我找到了一个链接 -[使用 T-SQL 将 OHLC-Stockmarket 数据分组到多个时间范围内，](https://stackoverflow.com/questions/9340602/group-ohlc-stockmarket-data-into-multiple-timeframes-with-t-sql)对 MSSQL 有类似的要求。

我试图按照链接 - [http://briansteffens.com/2011/07/19/row_number-partition-and-over-in-mysql/](http://briansteffens.com/2011/07/19/row_number-partition-and-over-in-mysql/)，在mysql中获取row_number()，over，partition来解决问题。

我是 sql 的新手，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-15T09:09:41.293

我知道这是一个老问题，但看看这个“更简单”的解决方案。开盘价和收盘价有一个技巧。你可能会喜欢。

```
SELECT
  FLOOR(MIN(`timestamp`)/"+period+")*"+period+" AS timestamp,
  SUM(amount) AS volume,
  SUM(price*amount)/sum(amount) AS wavg_price,
  SUBSTRING_INDEX(MIN(CONCAT(`timestamp`, '_', price)), '_', -1) AS `open`,
  MAX(price) AS high,
  MIN(price) AS low,
  SUBSTRING_INDEX(MAX(CONCAT(`timestamp`, '_', price)), '_', -1) AS `close`
FROM transactions_history -- this table has 3 columns (timestamp, amount, price)
GROUP BY FLOOR(`timestamp`/"+period+")
ORDER BY timestamp 
```

周期以秒为单位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:28:07.180

最后用下面的mysql查询解决了这个问题：

```
select min(a.mydate),max(a.myhigh) as high,min(a.mylow) as low, 
min(case when rn_asc = 1 then a.myopen end) as open,
min(case when rn_desc = 1 then b.myclose end) as close

from( 

select 
@i := if((@lastdate) != (Floor(unix_timestamp(mydate)/300 )), 1, @i + 1) as rn_asc,
          mydate, myhigh, mylow, myopen, myclose,
          @lastdate := (Floor(unix_timestamp(mydate)/300 ))

from
  onemindata_1,
  (select @i := 0) vt1,
  (select @lastdate := null) vt2 order by mydate

) a

inner join(

select 
@j := if((@lastdate1) != (Floor(unix_timestamp(mydate)/300 )), 1, @j + 1) as rn_desc,
          mydate,myclose,
          @lastdate1 := (Floor(unix_timestamp(mydate)/300 ))

from
  onemindata_1,
  (select @j := 0) vt1,
  (select @lastdate1 := null) vt2 order by mydate desc

)b
on a.mydate=b.mydate
group by (Floor(unix_timestamp(a.mydate)/300 )) 
```

最困难的部分是获得“特定时间间隔”的打开和关闭。我正在对“日期”进行“高、低、开”和“关闭”的内部连接。我可以通过更改 (Floor(unix_timestamp(mydate)/300)) 中的分母来切换时间间隔。目前不担心性能，只要它有效:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T09:10:53.263

查询有错误，将收盘价的 MIN 更改为 MAX：

```
SELECT
  FLOOR(MIN(`timestamp`)/"+period+")*"+period+" AS timestamp,
  SUM(amount) AS volume,
  SUM(price*amount)/sum(amount) AS wavg_price,
  SUBSTRING_INDEX(MIN(CONCAT(`timestamp`, '_', price)), '_', -1) AS `open`,
  MAX(price) AS high,
  MIN(price) AS low,
  SUBSTRING_INDEX(MAX(CONCAT(`timestamp`, '_', price)), '_', -1) AS `close`
FROM transactions_history -- this table has 3 columns (timestamp, amount, price)
GROUP BY FLOOR(`timestamp`/"+period+")
ORDER BY timestamp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T14:22:34.563

我发现@Ruslan 的解决方案在最新版本的 MySQL 中不起作用，因此发布了一个有效的版本：

```
select 
date_add(str_to_date(date_format(ev.startdatetime, '%Y-%m-%d'),'%Y-%m-%d'), interval 
 hour(ev.startdatetime)*60 + floor(minute(ev.startdatetime)/5)*5 minute) timeframe
 , sum(ev.volume) volume
 , min(ev.startdatetime) mintime
 , substring_index(group_concat(open),',',1) open
 , max(high) as high 
 , min(low) as low
 , substring_index(group_concat(close),',',-1) close
from es1min_v ev
group by 
date_add(str_to_date(date_format(ev.startdatetime, '%Y-%m-%d'),'%Y-%m-%d'), interval 
 hour(ev.startdatetime)*60 + floor(minute(ev.startdatetime)/5)*5 minute) 
```

# javascript - 在弹出窗口中打开 ajax jstree 结果

> ID：12520259
> 
> 赞同：1
> 
> 时间：2012-09-20T20:16:57.263
> 
> 标签：javascript, ajax, popup, jstree

好的，所以我花了很多时间让 jstree 在成功的 ajax 调用后在对话框中打开。现在他们想要一个弹出窗口。似乎应该很容易，但我的窗口给出了 404 错误。顺便说一句，我正在使用 Grails。这是当前代码（重新键入，因此请原谅任何语法错误）：

```
$.ajax({
    type: 'POST',
    url: 'resultsView/viewAsdf'
    traditional: true,
    data: {
        documentID: contentID
    },
    success: function (data) {
        var data1 = {'data':data}
        var $genericDialog = $("#genericDialog");
        $genericDialog.jstree({
            "html_data": data1
            [snip]
        }),
        $genericDialog.dialog({
            title: "ASDF"
            modal: true,
            height: 700,
            width: 450,
            buttons: {
                "OK": function() {$genericDialog.dialog("close");}
            }
        });
    }
}); 
```

所以现在我的问题是如何用一个窗口代替当前的对话框？因为我已经在 ajax 方法中调用了 url，所以窗口的 url 会是什么？

# jquery - 移动鼠标时，jQuery Hover Slider 再次启动

> ID：12520260
> 
> 赞同：0
> 
> 时间：2012-09-20T20:16:59.820
> 
> 标签：jquery, hover, slider

我想在我的网站上放一张图片，当你将鼠标悬停在它上面时，图片会向下滑动并显示其背后的文字。

我已经让它工作了，但是如果我在图像上稍微移动鼠标，它会再次移动。

这是jQuery代码：

```
$(document).ready(function(){
$('.show').hover(function(){
    $(this).animate({top:'400px'});
},function(){
    $(this).animate({top:'0px'});
    });
}); 
```

这是CSS：

```
.hover {
width: 300px;
height: 400px;
background: black;
margin-top: 10px;
overflow: hidden;
position: relative;
 }

.show {
width: 300px;
height: 400px;
background: red;
position: absolute;
 } 
```

有没有办法让它在悬停状态下停止，直到鼠标完全移出 div？

这是请求的[JSFiddle JSFIDDLE](http://jsfiddle.net/HPSFQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:22:26.080

尝试添加`.stop(true,true)`：

```
$('.show').hover(function() {
    $(this).stop(true,true).animate({
        top: '400px'
    });
}, function() {
    $(this).stop(true,true).animate({
        top: '0px'
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:39:05.850

问题是您正在移动图像，因此有一个`mouseout`事件会导致调用悬停关闭功能。您想要做的是使用单独的`mouseover`/`mouseout`事件，如下所示：

```
$('.show').mouseover( function() {
    $(this).animate( {top: '300px'} );
});

$('.hover').mouseout( function() {
    $('.show').animate( {top: '0px'} );
}); 
```

在这里查看我的解决方案：http: [//jsfiddle.net/zRn5w/](http://jsfiddle.net/zRn5w/)

此解决方案的唯一问题是，如果您将鼠标向下移动到图像上，它会暂时向上滑动，因为`mouseout`事件被调用 on `.hover`。这将是一个稍微棘手的问题要解决......我可能会`.hover`在移动图像的同时扩大高度，以便该`mouseout`区域是正确的。

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:46:20.607

您应该使用委托模型...

```
$(function(){
$('#combo').on('mouseover',function(e){
   var $t = $(e.target);
    if( $t.is('img') ){
       $t.animate({top:'89px'});  
       return false;
    }
}).on('mouseout',function(e){
   var $t = $(e.target), $img = $(this).children('img');
    if( e.target == this && e.relatedTarget != $img.get(0) ){
        $img.clearQueue().animate({top:'10px'});
       return false;        
    }
})
}); 
```

小提琴[-这里-](http://jsfiddle.net/59d59/)

# python - 递归变更算法

> ID：12520263
> 
> 赞同：6
> 
> 时间：2012-09-20T20:17:07.803
> 
> 标签：python, algorithm, recursion, dynamic-programming, coin-change

给定目标金额和硬币面额列表，我的代码应该找到达到目标金额所需的最少硬币。

例子：

*   `C(78, [1, 5, 10, 25, 50]) = 6`

    *   我们可以从 3x `25`+ 3x得到 78 `1`，所以需要 6 个硬币
*   `C(48, [1, 7, 24, 42]) = 2`

    *   48 = 2x `24`，所以 2 个硬币就足够了
*   `C(35, [1, 3, 16, 30, 50]) = 3`

    *   我们可以从 2x `16`+ 1x得到 35 `3`，所以 3 个硬币就足够了

我用 for 循环编写了代码，但是如何让它递归呢？

```
def C(i, coins, cdict = None):
    if cdict == None:
        cdict = {}
    if i <= 0:
        cdict[i] = 0
        return cdict[i]
    elif i in cdict:
        return cdict[i]
    elif i in coins:
        cdict[i] = 1
        return cdict[i]
    else:
        min = 0
        for cj in coins:
            result = C(i - cj, coins)
            if result != 0:
                if min == 0 or (result + 1) < min:
                    min = 1 + result
        cdict[i] = min
        return cdict[i] 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T20:29:56.733

这是[改变的](https://en.wikipedia.org/wiki/Change-making_problem)问题。这是标准的递归解决方案，`V`是硬币列表和`C`目标金额：

```
def min_change(V, C):
    def min_coins(i, aC):
        if aC == 0:
            return 0
        elif i == -1 or aC < 0:
            return float('inf')
        else:
            return min(min_coins(i-1, aC), 1 + min_coins(i, aC-V[i]))
    return min_coins(len(V)-1, C) 
```

这是一个优化版本，使用[动态编程](https://en.wikipedia.org/wiki/Dynamic_programming)：

```
def min_change(V, C):
    m, n = len(V)+1, C+1
    table = [[0] * n for x in xrange(m)]
    for j in xrange(1, n):
        table[0][j] = float('inf')
    for i in xrange(1, m):
        for j in xrange(1, n):
            aC = table[i][j - V[i-1]] if j - V[i-1] >= 0 else float('inf')
            table[i][j] = min(table[i-1][j], 1 + aC)
    return table[m-1][n-1] 
```

两种实现都将始终返回最佳解决方案，但对于大输入，第二种实现会快得多。请注意，其他答案中建议的贪心算法仅针对某些货币组合给出了最佳解决方案 - 例如，它适用于美国硬币。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:23:41.243

尝试使用贪心算法（最大的硬币优先）。应用到总数后从列表中删除硬币并从内部再次调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T12:17:08.190

所以寻找动态编程实现的最佳去处是：[interactive python](http://interactivepython.org/runestone/static/pythonds/Recursion/DynamicProgramming.html)

但是，经过一番测试后，我发现这不是最快的解决方案。这样做的好处是，一次运行就足以找到所需数量的所有更改值的值。

我最喜欢的仍然是使用带有缓存的递归：

```
from collections import defaultdict
from functools import lru_cache

@lru_cache(maxsize=1024)
def greedy(coin_list, change):
    if change in coin_list:
        return defaultdict(int, [(change, 1)])
    else:
        min_coins = change
        for c in [coin for coin in coin_list if coin < change]:
            result_min1 = greedy(coin_list, change - c)
            num_coins = 1 + sum(result_min1.values())
            if num_coins <= min_coins:
                min_coins = num_coins
                result = defaultdict(int, [(c, 1)])
                for c1, n in result_min1.items():
                    result[c1] += n
        return result 
```

# c# - UDP 始终在后台通过 LAN 侦听

> ID：12520265
> 
> 赞同：1
> 
> 时间：2012-09-20T20:17:17.823
> 
> 标签：c#, udp, lan

我正在尝试通过 LAN 使用 UDP，正如您在此处看到的那样，我将一个包与一台 pc 发送到另一台，但是是否可以在您仍在列表时发送数据包，因为当我开始接收时进程停止响应。我知道这与线程有关，但我需要一点帮助。感谢所有帮助，在此先感谢。

```
UdpClient client = new UdpClient();

public void SendPacket()
{
    byte[] packet = Encoding.ASCII.GetBytes(DateTime.Now.ToString("HH:mm:ss:ff"));
    client.Send(packet, packet.Length, tbIP.Text, 444);
    dgvSend.Rows.Add(DateTime.Now.ToString("HH:mm:ss:ff"));
}

public void ReceivePacket()
{
    client = new UdpClient(444);
    IPEndPoint server = new IPEndPoint(IPAddress.Any, 0);
    byte[] packet = client.Receive(ref server);
    dgvReceiv.Rows.Add(Encoding.ASCII.GetString(packet), DateTime.Now.ToString("HH:mm:ss:ff"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:21:52.590

一旦你有`Receive`东西，你就需要开始另一个`Receive`东西，以便从别人那里接收东西。

如果要接收多个连接，通常会使用异步 IO。例如：

```
var client = new UdpClient(endPoint);
AsyncCallback callback = null;
callback = ar =>
            {
            IPEndPoint newIncomingEndPoint = endPoint;
            byte[] data = client.EndReceive(ar, ref newIncomingEndPoint);
            client.BeginReceive(callback, null);
                        // TODO: do something with data
            };
client.BeginReceive(callback, null); 
```

或者，如果您更喜欢不使用匿名方法的东西（来自[http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.beginreceive.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.beginreceive.aspx)）：

```
public static bool messageReceived = false;

public static void ReceiveCallback(IAsyncResult ar)
{
  UdpClient u = (UdpClient)((UdpState)(ar.AsyncState)).u;
  IPEndPoint e = (IPEndPoint)((UdpState)(ar.AsyncState)).e;

  Byte[] receiveBytes = u.EndReceive(ar, ref e);
  string receiveString = Encoding.ASCII.GetString(receiveBytes);

  Console.WriteLine("Received: {0}", receiveString);
  messageReceived = true;
}

public static void ReceiveMessages()
{
  // Receive a message and write it to the console.
  IPEndPoint e = new IPEndPoint(IPAddress.Any, listenPort);
  UdpClient u = new UdpClient(e);

  UdpState s = new UdpState();
  s.e = e;
  s.u = u;

  Console.WriteLine("listening for messages");
  u.BeginReceive(new AsyncCallback(ReceiveCallback), s);

  // Do some work while we wait for a message. For this example, 
  // we'll just sleep 
  while (!messageReceived)
  {
    Thread.Sleep(100);
  }
} 
```

如果您不使用异步 IO，则在处理现有连接时将无法接收另一个连接`Receive`- 因此您有一个巨大的时间差距，想要连接的东西可能会被拒绝。

# c# - 如何检查网站在 asp.net mvc (c#) 或 jquery 中是否存在

> ID：12520271
> 
> 赞同：0
> 
> 时间：2012-09-20T20:17:33.280
> 
> 标签：c#, jquery, asp.net-mvc-3

我在 Facebook、twitter、googleplus 等
网站中使用社交插件 在使用社交插件代码之前如何检查这些社交网站是否存在。

实际上，当任何社交网站离线时，我都会遇到问题，然后网站页面有更多时间加载我使用这些社交插件的地方。

我使用了这段代码，但如果网站离线，它会抛出异常并消耗大量时间

```
HttpWebRequest httpReq = (HttpWebRequest)WebRequest.Create("http://www.stackoverflow.com");
httpReq.AllowAutoRedirect = false;

HttpWebResponse httpRes = (HttpWebResponse)httpReq.GetResponse();

if (httpRes.StatusCode==HttpStatusCode.NotFound) 
{
   // Code for NotFound resources goes here.
} 
```

知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:28:28.810

如果他们在线，您具体想做什么？如果是这样，您可以在客户端使用 window.load()，触发事件，然后从它们中提取您需要的任何数据（如果可用）。一个想法是在 window.load 上检查您的代码

```
 $(window).load(function () {
  // run code to check if live
});

```

有关查看站点是否已启动的实际代码本身，请参阅这篇文章 [Javascript：检查服务器是否在线？](https://stackoverflow.com/questions/5224197/javascript-check-if-server-is-online)

# php - 在 PHP 中非对称组合 2 个数组的优雅方式

> ID：12520272
> 
> 赞同：5
> 
> 时间：2012-09-20T20:17:41.897
> 
> 标签：php, arrays

什么是合并两个数组的优雅方法，使得结果数组具有来自第一个数组的两个项目，然后是来自第二个数组的单个项目，以这种方式重复？

数组 1 = A1、A2、A3、A4、A5 等。

数组 2 = B1、B2、B3、B4、B5 等。

结果 = A1、A2、B1、A3、A4、B2、A5、A6、B3 等。

我正在尝试使用带有多个计数器的 for 循环来做到这一点，但我不知道数组长度将始终根据需要长或短。我很好奇：有没有更好的方法？

这是我目前正在做的简化版本：

```
$x = 0, $y = 0;
for($i=0; $i<$total_num_blocks; $i++) {
    if ($i % 3) {   // if there's a remainder, it's not an 'every 3rd' item
        $result[$i] = $projects[$x++];
    } else {
        $result[$i] = $posts[$y++];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:45:29.323

无论 $a 和 $b 数组大小如何，此示例都将起作用。

```
<?php 

$a = ['A1', 'A2', 'A3', 'A4', 'A5'];
$b = ['BB1', 'BB2', 'BB3', 'BB4', 'BB5'];

for ($i = 0; $i < count($b); $i++) {
    array_splice($a, ($i+1)*2+$i, 0, $b[$i]);
}

echo "<pre>" . print_r($a, true) . "</pre>"; 
```

这个例子的输出是：

```
Array
(
    [0] => A1
    [1] => A2
    [2] => BB1
    [3] => A3
    [4] => A4
    [5] => BB2
    [6] => A5
    [7] => BB3
    [8] => BB4
    [9] => BB5
) 
```

**警告**：不保留密钥！

*这是 PHP 5.4.x 的代码，如果没有，请将 $a 和 $b 变量中的 [] 替换为 array()。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:28:41.630

```
while( sizeof($posts) >= 2 && sizeof($projects) >= 1){
    array_push($result,
            array_shift($posts),
            array_shift($posts),
            array_shift($projects)
        );
}
# you will need to handle the case if $posts doesn't have an even number of elements 
```

注意：这会破坏 $posts 和 $projects。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:40:23.200

```
 $array1 = array('A1','A2','A3','A4','A5','A6');
   $array2 = array('B1','B2','B3','B4','B5','B6');

   $resultArray = array();

   //Reverse Second Array
   $array2R = array_reverse($array2);

   for ($i = 0; $i < count($array1); $i++){
       $resultArray[] = $array1[$i];
       if (($i) % 2)
           $resultArray[] = array_pop($array2R);
   }

   var_dump($resultArray); 
```

结果与

```
array(9) { [0]=> string(2) "A1" [1]=> string(2) "A2" [2]=> string(2) "B1" [3]=> string(2) "A3" [4]=> string(2) "A4" [5]=> string(2) "B2" [6]=> string(2) "A5" [7]=> string(2) "A6" [8]=> string(2) "B3"} 
```

您可以反转第二个数组，然后 array_pop 它，而不是跟踪第二个数组。 [http://php.net/manual/en/function.array-pop.php](http://php.net/manual/en/function.array-pop.php)

array_pop() 弹出并返回数组的最后一个值，将数组缩短一个元素。如果数组为空（或不是数组），则返回 NULL。在非数组上调用时还会产生警告。

您可能希望通过将 array2 中的所有剩余项添加到结果数组的末尾来完成 Resultant 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:08:20.863

我不知道它是优雅还是高效，您必须自己运行一些基准测试，但是有一种有趣的方法可以在没有循环的情况下合并这些数组：

```
$a = array("a1","a2","a3","a4","a5","a6","a7","a8"); 
$b = array("b1","b2","b3","b4","b5","b6","b7","b8"); 

function asymmetricInterleave($a, $aCount, $b, $bCount) { 
    $ax = array_chunk($a, $aCount); 
    $bx = array_chunk($b, $bCount); 

    $diff = count($ax) - count($bx); 

    $remainder = array(); 
    if ($diff > 0) { 
        list($ax, $remainder) = array_chunk($ax, count($bx)); 
    } else if ($diff < 0) { 
        list($bx, $remainder) = array_chunk($bx, count($ax)); 
    } 

    $result = array_merge(array_map('array_merge', $ax, $bx), $remainder); 
    return call_user_func_array('array_merge', $result); 
} 

$result = asymmetricInterleave($a, 2, $b, 1); 
var_export($result); 
```

# java - JtextArea 的问题。JAVA

> ID：12520273
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:17:49.713
> 
> 标签：java, swing, jbutton, actionlistener, jtextarea

我有一个带有按钮的 GUI 设置和一个`JTextArea`.

我还有一个大小为 3 的字符串数组。

我想要做的是使用动作监听器，当按下名为“next”的按钮时，`JTextArea`将显示数组中的下一个单元格。唯一的问题是它同时显示数组。我需要它在按下按钮时显示下一个单元格

谁能帮我写代码？谢谢，麻烦您了。

```
 final ActionListener m2 = new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) 
    { 
        arr = new String[3];
        arr[0]= "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";      
        arr[1]= "sssssssssssssssssssssss";
        arr[2]= "xxxxxxxxxxxxxxxxxxxxx";

        for (int i = 0; i<arr.length; i++){
        text.append(arr[i]);
        }
    }
};

next.addActionListener(m2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:27:01.703

所以基本概念是。您需要一个索引值来维护正在显示的数组的当前索引。

从那里，每次用户单击下一步时，您将增加索引并在`String`

```
public void actionPerformed(ActionEvent e) {

    currentIndex++;
    // You need to decide what to do when we reach the end of the array...

    String value = myStrings[currentIndex];
    textArea.setText(value);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T20:22:48.623

要创建按钮，请使用[`JButton`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)类。要响应事件，请使用该`JButton#addActionListener()`方法。如果您遇到问题，请发布您尝试过的内容。祝你好运！

# asp.net-mvc-3 - 使用模型绑定查询绑定集合

> ID：12520275
> 
> 赞同：0
> 
> 时间：2012-09-20T20:17:52.007
> 
> 标签：asp.net-mvc-3, model

我有一个对象列表作为模型。我有服务器、数据库、用户等属性。

我想要的是一个下拉列表，其中包含绑定到它的对象列表，并且在更改下拉项时，我必须在 2 个不同的标签中填充数据库和用户信息。

我如何使用模型绑定来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:43:39.350

在询问“使用模型绑定”时，我无法理解您的意思。但它可以用 jquery/javascript 来完成。您在页面上创建下拉列表，并在更改事件时将所选项目发送到服务器并接收“数据库和用户信息”。使用 Ajax 助手的示例：[使用带有下拉列表 mvc3 的 ajax](https://stackoverflow.com/questions/8986795/using-ajax-with-dropdownlist-mvc3/8986889#8986889)

# python - 将字典中的一堆默认值传递到模板中的问题

> ID：12520278
> 
> 赞同：0
> 
> 时间：2012-09-20T20:18:09.380
> 
> 标签：python, django

对于我的一堆视图，我每次都传递了很多字典值（以及 context_instance），所以我尝试创建一个快捷方式：

```
def render_with_context(request, *args, **kwargs):
    kwargs['context_instance'] = RequestContext(request)
    kwargs['dict']['dare_count'] = Dare.objects.all().count()
    kwargs['dict']['proof_count'] = Proof.objects.all().count()
    kwargs['dict']['user_count'] = User.objects.all().count()
    return render_to_response(*args, **kwargs) 
```

但它不起作用，因为 django 不接受模板中的命名字典，它只需要一个匿名 {} 字典。我应该如何解决这个问题，如何从值中删除名称？

谢谢

编辑修复：（使用韩的**解包字典的建议）

# 显着变化：['dict'] 消失了，我们只是将 context_instance 作为参数传递，字典没有解包。

```
def render_with_context(request, args, kwargs):
   kwargs['dare_count'] = Dare.objects.all().count()
   kwargs['proof_count'] = Proof.objects.all().count()
   kwargs['user_count'] = User.objects.all().count()
   return render_to_response(args, kwargs, context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:22:23.500

试试`render_to_response(template_name, kwargs)`。Render to response 将实际字典作为其参数，因此您可以重用字典`kwargs`。`**kwargs`将字典解包为关键字样式参数，因此它不再是字典。

# bash - shell脚本中文件中的行替换

> ID：12520281
> 
> 赞同：0
> 
> 时间：2012-09-20T20:18:22.923
> 
> 标签：bash, shell, ksh

我想搜索整行并用 1 行或更多行替换该行。

例如，嗨，我在那儿。

我必须用这两条线替换它

你好我在那儿

阿伦来了

基本上我要做的是在匹配行之后插入一个新行。因为我不确定行号，我想我会搜索应该放置它的行，然后用 2 行替换这一行。是吗可能吗？我使用 var1 和 var 的代码是从 csv 文件中提取的，f 是文件名

```
"s@$Var1@$Var2@g" "$f" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:24:31.603

```
 echo -e "Hi Im here\nLinetwo\nLine3" \
 | sed '/Hi Im here/a\
      Arun is here 

 ' 
```

**输出**

```
 Hi Im here
 Arun is here
 Linetwo
 Line3 
```

这是老式的 sed 语法。它应该适用于其中任何一个。

请注意，在 之后不允许使用空格或制表符`a\`，并且“a”追加输入以空行终止，因此

```
 Arun is here
 (this is a blank line here, followed by the closing single quote for sed)
 ' 
```

IHTH

# css - “重叠”字符的字母间距问题

> ID：12520287
> 
> 赞同：1
> 
> 时间：2012-09-20T20:19:19.453
> 
> 标签：css, fonts, cross-browser, letter-spacing

我在使用[Google Web Fonts](http://www.google.com/webfonts/specimen/Marck+Script)上找到的字体时遇到了一些问题。

正如您在下面发布的图片中看到的那样，当我使用 Firefox 时，“Versus”中的大写 V 与“e”重叠。虽然当我使用 Chrome（或 IE）时，它不会重叠，并在两个字符之间留下难看的空间。

有没有办法解决这个问题，让它看起来像 Firefox 中的一样？还是我应该开始寻找另一种字体？

![Chrome/IE 和 Firefox 比较](../Images/c6ec3e450f491394861daed0891ead90.png)

我的 HTML：

```
<html>
<head>
    <meta charset="utf-8">
    <title>Versus</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link href='http://fonts.googleapis.com/css?family=Marck+Script' rel='stylesheet' type='text/css'>
</head>
<body>
    <div>
        <h1>Versus</h1>
    </div>
</body> 
```

我的 CSS：

```
h1 {
font-family: 'Marck Script', cursive;
font-size: 100px;
color:#444;
text-align:center;
padding:0 50px;
text-shadow: 2px 2px 3px #777; 
```

}

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:25:44.483

为了修复字体中的间距，您应该使用：

```
letter-spacing: 10px /* How ever much you need */ 
```

在不知道您已经拥有的 HTML 和 CSS 的细节的情况下，您可以使用以下方法修复问题区域：

风格

```
span { letter-spacing: -4px } 
```

html

```
<span>V</span>ersus 
```

这是 hokie，但它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:57:26.563

Firefox 现在在使用带有字距调整对的字体时支持字距调整。其他浏览器还没有赶上。有几个提议的 CSS 功能会影响字距调整，Firefox 对它们有一些支持，但其他浏览器不支持。

所以你应该寻找另一种字体。`letter-spacing`通过或`margin`属性手动调整间距既麻烦又冒险；你很容易在 Firefox 上搞砸了。

如果您继续使用 Marck Script 字体，最好下载它并将其安装在您的服务器上并从那里使用它。在 Google 服务器上使用时，许多 Google 字体存在问题。在这种情况下，标准模式下的 IE 9 不使用该字体；错误代码 CSS3117 出现在控制台中，因此 Google 设置中显然有问题。

# permissions - 使用 rpmbuild 构建时如何更改 umask？

> ID：12520293
> 
> 赞同：3
> 
> 时间：2012-09-20T20:20:07.253
> 
> 标签：permissions, rpm, umask

我在 shell 中尝试了“umask 77”，然后使用以下命令构建它：

```
[non-root-user@machine SPECS]$ rpmbuild -bb SPECFILE.spec 
```

但我仍然从输出中得到这个：

```
+ umask 022 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:15:29.020

您无法从 shell 更改 umask，因为 rpmbuild 将始终`0022`在运行`%prep`脚本之前设置一个固定的 umask。

因此，根据您要实现的目标，您可以尝试更改规范文件中的 umask，在该`%prep`部分的开头：

```
%prep
umask 077 
```

但是，如果您只是尝试为 RPM 中的文件设置文件权限，则标准方法是使用`%defattr`和部分`%attr`中的指令`%files`：

*   `%defattr`设置文件和文件夹的默认属性：

    ```
    %defattr(<file mode>, <user>, <group>, <dir mode>) 
    ```

可以通过用破折号替换某些属性来省略它们（因为安装文件时已正确设置了这些属性）

*   `%attr`设置单个文件或文件夹的属性：

    ```
    %attr(<mode>, <user>, <group>) file/folder 
    ```

与`%defattr`不需要指定特定属性一样，您可以将其替换为破折号（例如，您可以使用它`%defattr`来保留该属性的默认值）

一个完整的例子：

```
%files
# set default attributes for all files and folders:
%defattr(644, root, root, 755)
# make a file executable:
%attr(755, -, -) /usr/bin/myexec
# set a different owner for a file:
%attr(-, myuser, -) /var/log/mylog.log
# set different permissions, owner and group for a file:
%attr(600, myuser, mygroup) /home/myfile 
```

有关更多详细信息和示例，您可以查看：
[http](http://www.rpm.org/max-rpm-snapshot/s1-rpm-specref-files-list-directives.html) ://www.rpm.org/max-rpm-snapshot/s1-rpm-specref-files-list-directives.html和
[http://www.rpm。 org/max-rpm/s1-rpm-anywhere-specifying-file-attributes.html](http://www.rpm.org/max-rpm/s1-rpm-anywhere-specifying-file-attributes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:18:17.650

我不认为改变 umask 是你应该做的。我假设您对来自 RPM 的文件的权限不满意。为此，您应该在您的部分中使用`%attr()`和。`%defattr()``%files`

# asp.net-mvc-4 - 如何显示从 MVC4 Web API 返回的图像

> ID：12520295
> 
> 赞同：0
> 
> 时间：2012-09-20T20:20:15.863
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我们有一个从数据库返回图像的 Web API (MVC4) 应用程序。我已经验证了对 Web API 的调用确实产生了有效的图像。

这是 Fiddler 结果显示图像已正确返回![Fiddler API 调用](../Images/eeb5c4bc4f150cc33d5afbf9e6fd14ed.png)：：

我尝试使用与调用相同的源设置图像元素，但这不起作用：

```
<img id="img" src="http://localhost/Seek/api/artifactcontent/?userName=XXXXX&password=XXXXXX&id=15-00931-27" /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:22:29.590

您在 Fiddler 中的请求是一个 POST 请求；`<img>`标签发送 GET 请求。如果您想使用`<img>`标签显示图像，您需要让您的操作接受 GET 请求，而不是（或除了）POST。

# git - Git cherry-从文件中挑选一批提交

> ID：12520296
> 
> 赞同：4
> 
> 时间：2012-09-20T20:20:17.550
> 
> 标签：git

我正在尝试从我的主分支中挑选一批提交并将它们放入自己的分支中。我将所有提交哈希都放在一个文件（称为 output.txt）中，我正在尝试将其通过管道传输到 git cherry-pick。这是我想出的命令：

尾 -r ~/outfile.txt | git cherry-pick -n --stdin

但是，如果存在合并冲突，此字符串将失败，我宁愿在遇到合并冲突时挂起一些东西，以便我可以修复它并继续

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:00:09.963

基于 knittl 的回答：

```
while read line; do
    git cherry-pick -n "$line" || exit 1
done < outfile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:18:11.520

循环呢？

```
while read line; do
  git cherry-pick -n "$line"
done < outfile.txt 
```

# java - 我的 Android 应用程序中的 Google Drive 返回错误 400

> ID：12520302
> 
> 赞同：1
> 
> 时间：2012-09-20T20:20:43.190
> 
> 标签：java, android, xml, google-drive-api

我在developers.google.com 中关注有关Drive v2 的所有信息，以便在Android API 15 中构建一个简单的应用程序，只是为了上传一个txt 文件。在围绕它花费了很多时间之后，比如库的正确 java 构建路径（在我的例子中是 1.11.0），启用和设置 Drive SDK、客户端 ID 的 API 访问等。我在这篇文章中找到了一个很好的例子[Google Drive 将错误 400 或 403 返回到我的 Android 应用程序？](https://stackoverflow.com/questions/12304535/google-drive-returning-error-400-or-403-to-my-android-app)在那里我发现了与现在我的应用程序相同的错误描述。这是我的完整代码（希望对其他人有用）：

```
public class DrivexampleActivity extends Activity { 

Context activity = null;
boolean alreadyTriedAgain;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    AccountManager am = AccountManager.get(this);
    activity = this.getApplicationContext();
    Bundle options = new Bundle();
    Account[] acc = am.getAccounts();
    am.getAuthToken(
        (am.getAccounts())[8], // #8 just in my phone case. you can debugg the acc variable to find your @gmail account index.
        "oauth2:" + DriveScopes.DRIVE,
        options,
        true, 
        new OnTokenAcquired(),
        null); 
}

private class OnTokenAcquired implements AccountManagerCallback<Bundle> {
    @Override
    public void run(AccountManagerFuture<Bundle> result) {

        try {
            final String token = result.getResult().getString(AccountManager.KEY_AUTHTOKEN);

            HttpTransport httpTransport = new NetHttpTransport();
            JacksonFactory jsonFactory = new JacksonFactory();  

            Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
            b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
            // TODO Auto-generated method stub
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);                              
                driveRequest.setKey("xxxxxxxxxxxx.apps.googleusercontent.com"); // I replaced the number with x's. for your Client ID from Google API Console
                driveRequest.setOauthToken(token);                      
                }
            }); 

                final Drive drive = b.build();

                final com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
                body.setTitle("My Test File");
                body.setDescription("A Test File");
                body.setMimeType("text/plain");

                java.io.File fileContent = new java.io.File("document.txt");
                final FileContent mediaContent = new FileContent("text/plain",fileContent);

                new Thread(new Runnable() {
                    public void run() {

                        com.google.api.services.drive.model.File file;
                        try {                           
                            file = drive.files().insert(body, mediaContent).execute();
                            Log.i("Hi", "File ID: " + file.getId());
                            alreadyTriedAgain = false; // Global boolean to make sure you don't repeatedly try too many times when the server is down or your code is faulty... they'll block requests until the next day if you make 10 bad requests, I found.
                        } catch (IOException e) {
                            if(!alreadyTriedAgain){
                                alreadyTriedAgain = true;
                                Log.i("Hi", "The upload/insert was caught, which suggests it wasn't successful...");
                                e.printStackTrace();    
                            }    
                        }
                    }
                }).start();

                Intent launch = null;
                launch = (Intent)result.getResult().get(AccountManager.KEY_INTENT);

                if (launch != null) {
                    Log.i("Hi", "Something came back as a KEY_INTENT");
                    startActivityForResult(launch, 3025);
                    return; 
                }
        } catch (OperationCanceledException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (AuthenticatorException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }        
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 3025) {
        switch (resultCode) {
            case RESULT_OK:
                AccountManager am = AccountManager.get(activity);
                Bundle options = new Bundle();
                am.getAuthToken(
                        (am.getAccounts())[8], // #8 just in my phone case. you can debugg the acc variable to find your @gmail account index.
                        "oauth2:" + DriveScopes.DRIVE,
                        options,
                        true, 
                        new OnTokenAcquired(),
                        null); 
                break;
            case RESULT_CANCELED:
                // This probably means the user refused to log in. Explain to them why they need to log in.
                break;
            default:
                // This isn't expected... maybe just log whatever code was returned.
                break;
        }
    } else {
        // Your application has other intents that it fires off besides the one for Drive's log in if it ever reaches this spot. Handle it here however you'd like.
    }
} 
```

还体现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.drivexample"
android:versionCode="1"
android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".DrivexampleActivity"
            android:label="@string/app_name" 
            android:exported="true">
            <meta-data android:name="com.google.android.apps.drive.APP_ID" android:value="id=xxxxxxxxxxxx"/>

            <intent-filter>
                <action android:name="com.google.android.apps.drive.DRIVE_OPEN" />
                <data android:mimeType="application/vnd.test.type"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

但总是得到以下错误：

```
com.google.api.client.http.HttpResponseException: 400 Bad Request
{
  "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "keyInvalid",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

就我而言，DRIVE SDK 和 Drive API 似乎没有错误。有什么建议吗？？请！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:51:59.133

您将从 API 控制台获得的客户端 ID 传递给 driveRequest.setKey，但是该方法用于设置 API 密钥而不是客户端 ID。检查您提到的其他问题的第一个答案以获取更多详细信息。

# clojure - 如何将 :arglists 修改为 Clojure fn 或宏？

> ID：12520307
> 
> 赞同：5
> 
> 时间：2012-09-20T20:21:09.677
> 
> 标签：clojure, macros, arguments, lisp-macros, defn

如何修改 clojure fn 或宏的 :arglist 属性？

```
(defn tripler ^{:arglists ([b])} [a] (* 3 a))

(defn ^{:arglists ([b])} quadrupler [a] (* 4 a))

% (meta #'tripler) => 
  {:arglists ([a]), :ns #<Namespace silly.testing>, :name tripler, :line 1, :file "NO_SOURCE_PATH"}

% (meta #'quadrupler) => 
  {:arglists ([a]), :ns #<Namespace silly.testing>, :name quadrupler, :line 1, :file "NO_SOURCE_PATH"} 
```

好的，那里没有运气，所以我尝试执行以下操作。

```
(def tripler
  (with-meta trippler
    (assoc (meta #'tripler) :arglists '([c]))))

% (with-meta #'tripler) => 
  {:ns #<Namespace silly.testing>, :name tripler, :line 1, :file "NO_SOURCE_PATH"} 
```

嗯，所以现在 :arglists 键不见了？好吧，我放弃了，我该怎么做？我只想修改 :arglists 的值。上面的示例使用了 defn，但我也想知道如何使用宏 (defmacro) 设置 :arglists。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:56:03.910

到目前为止，您不需要做任何像建议那样丑陋的事情。如果你看看`defn`'s own arglists...</p>

```
user=> (:arglists (meta #'clojure.core/defn))
([name doc-string? attr-map? [params*] prepost-map? body]
 [name doc-string? attr-map? ([params*] prepost-map? body) + attr-map?]) 
```

你正在寻找`attr-map`. 这是一个例子。

```
user=> (defn foo
         "does many great things"
         {:arglists '([a b c] [d e f g])}
         [arg] arg)
#'user/foo
user=> (doc foo)
-------------------------
user/foo
([a b c] [d e f g])
  does many great things
nil 
```

（在这种情况下，arglists 完全是一个谎言。不要那样做！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:09:38.133

[改变元！](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/alter-meta!)更改 var 上的元数据。函数上的元数据不相关，只有 var。

```
(alter-meta! #'tripler assoc :arglists '([b])) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T20:49:27.213

defn 没有留下空间来破坏元数据，这是可以的，因为它只是一个包装`def`. 可以直接使用 def 而不是 defn：

```
core> (def  ^{:arglists '([b])} tripler (fn [a] (* 3 a)))
#'core/tripler                                                                                 
core> (meta #'tripler)
{:arglists ([b]), :ns #<Namespace autotestbed.core>, :name tripler, :line 1, :file "NO_SOURCE_FILE"} 
```

或者你用 defn 定义 var 三元组：

```
core> (defn tripler [a] (* 3 a))
#'autotestbed.core/tripler 
```

然后用相同的内容和不同的元数据重新定义 var：

```
core> (def ^{:arglists '([b])} tripler  tripler)
#'autotestbed.core/tripler                                                                                 
autotestbed.core> (meta #'tripler)
{:arglists ([b]), :ns #<Namespace autotestbed.core>, :name tripler, :line 1, :file "NO_SOURCE_FILE"} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T21:39:23.307

扩展 amalloy 的答案（请给他信用）：

```
user=> (defn foo "prints bar" [] (println "bar"))
#'user/foo

user=> (doc foo)
-------------------------
user/foo
([])
  prints bar
nil

user=> (meta #'foo)
{:arglists ([]), :ns #<Namespace user>, :name foo, :doc "prints bar", :line 1, :file "NO_SOURCE_PATH"}

user=> (alter-meta! #'foo assoc :arglists '([blah]))
{:arglists ([blah]), :ns #<Namespace user>, :name foo, :doc "prints bar", :line 1, :file "NO_SOURCE_PATH"}

user=> (doc foo)
-------------------------
user/foo
([blah])
  prints bar
nil

user=> (meta #'foo)
{:arglists ([blah]), :ns #<Namespace user>, :name foo, :doc "prints bar", :line 1, :file "NO_SOURCE_PATH"}

user=> (foo)
bar
nil 
```

偷偷摸摸！

# css - “#id li{...}”和“#id > li{...}”之间的区别

> ID：12520310
> 
> 赞同：0
> 
> 时间：2012-09-20T20:21:16.590
> 
> 标签：css

我遇到了这两个有点相似的事情。在我的一个应用程序中，这两者之间存在差异，尤其是在使用`IE7`. 我想知道：这两者之间的最大区别是什么。随意详细说明和站点链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:23:49.200

这将适用于#id 元素下的**所有元素** `li`

```
#id li 
```

这将仅适用于#id`li`元素**正**下方的元素

```
#id > li 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T20:25:51.277

`X Y`与标准的区别在于`X > Y`后者只会选择直接子代。例如，考虑以下标记。

```
<div id="container">  
   <ul>  
      <li> List Item  
        <ul>  
           <li> Child </li>  
        </ul>  
      </li>  
      <li> List Item </li>  
      <li> List Item </li>  
      <li> List Item </li>  
   </ul>  
</div> 
```

的选择器`#container > ul`将仅针对作为 id 为容器的 div 的直接子级的 uls。例如，它不会针对作为第一个 li 的孩子的 ul。

出于这个原因，**使用子组合器有性能优势**。事实上，特别推荐在使用基于 JavaScript 的 CSS 选择器引擎时。

来源： http: [//net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T20:23:26.763

该空间选择*所有*后代。`>`仅选择*直接*后代（“子”元素）。

有关所有选择器的详细概述，请参阅[此 w3 页面](http://www.w3.org/TR/css3-selectors/#selectors)。从该页面：

> E > F ... E 元素的 F 元素子元素 ...[子组合子](http://www.w3.org/TR/css3-selectors/#child-combinators)

和：

> EF ... E 元素的 F 元素后代 ...[后代组合子](http://www.w3.org/TR/css3-selectors/#descendant-combinators)

请注意，这种差异并不是 IE7 所特有的。所有体面的现代浏览器都支持这两种语法。[CSS2](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)中也存在相同的选择器。在[quirksmode](http://www.quirksmode.org/css/contents.html)上，我只看到 IE6 及更低版本 (*shudder*) 与子选择器有问题。

# php - 如何使用 PHP 将联系人从 Gmail 添加到 Infusionsoft？

> ID：12520311
> 
> 赞同：1
> 
> 时间：2012-09-20T20:21:16.553
> 
> 标签：php, gmail

我需要在 Infusionsoft 中为 GMail 帐户中收到的每封新电子邮件创建一个新联系人。我已经设置了以下内容来对 Infusionsoft 进行 API 调用：

```
public function addCon($cMap, $optReason = "") {

    $carray = array(
            php_xmlrpc_encode($this->key),
            php_xmlrpc_encode($cMap,array('auto_dates')));
    $conID = $this->methodCaller("ContactService.add",$carray);
    if (!empty($cMap['Email'])) {
        if ($optReason == "") { $this->optIn($cMap['Email']); } else { $this->optIn($cMap['Email'],$optReason); }
    }
    return $conID;
} 
```

如何查询 GMail 以获取电子邮件地址和姓名列表，并使用 PHP 将它们插入到我的 InfusionSoft 联系人记录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:09:53.237

为什么不使用 infusionsoft 的 PHP SDK？这将使在 Infusionsoft 中创建联系人更容易。 [http://developers.infusionsoft.com/devkits/iSDK.zip](http://developers.infusionsoft.com/devkits/iSDK.zip)

至于从 gmail 中提取电子邮件，请尝试以下操作： http: [//davidwalsh.name/gmail-php-imap](http://davidwalsh.name/gmail-php-imap)

# ruby-on-rails - Rails 3.2.3 中使用 Google Oauth2 客户端访问 API 时出现 SSL 错误

> ID：12520314
> 
> 赞同：3
> 
> 时间：2012-09-20T20:21:21.063
> 
> 标签：ruby-on-rails, ruby, oauth-2.0, ssl-certificate, google-api-client

我对 OAuth2 相当陌生，我正在尝试通过带有 Omniauth 的 Google API 和 Google API 客户端访问用户的 Blogger 帐户。我正在使用以下内容：

*   导轨 3.2.3
*   红宝石 1.9.3
*   oauth2 (0.8.0)
*   全域认证 (1.1.1)
*   omn​​iauth-google-oauth2 (0.1.13)
*   谷歌 api 客户端 (0.4.6)

当我第一次尝试使用 Google 凭据对用户进行身份验证时，我收到以下错误：

```
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

但是，当我在初始化程序中将特定路径添加到我的 CA 证书时，错误就消失了：

```
provider :google_oauth2, ENV['GOOGLE_APP_ID'], ENV['GOOGLE_SECRET'], {
  access_type: "offline",
  approval_prompt: "",
  scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/blogger',
  client_options: { ssl: { ca_file: cert_path } }
} 
```

所以，现在我的用户可以毫无问题地使用他们的 Google 凭据登录。我现在看到的问题是，当我尝试使用访问令牌（在用户身份验证期间从 Google 收到）访问 Blogger API 时，我再次收到 SSL 错误。这是我用来访问 API 的代码：

```
token = auth.first.oauth_token.access_token   # access token received during authentication

client = Google::APIClient.new
client.authorization.access_token = token
service = client.discovered_api('blogger', 'v3')
result = client.execute(
     :api_method => service.blog_list.list,
     :parameters => {},
     :headers => {'Content-Type' => 'application/json'}) 
```

该行中正在生成错误`service = client.discovered_api('blogger', 'v3')`

我一直在用头撞墙有一段时间了，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:24:33.137

休息一下，再用谷歌搜索，再敲敲头，我在[https://gist.github.com/867550](https://gist.github.com/867550)发现了一个非常优雅的解决方案。设置 SSL_CERT_FILE 环境变量并重新启动我的机器解决了这个问题。哦，是的，我忘了提到我正在 Windows 机器上开发吗？美好时光。

# ruby-on-rails-3 - 未初始化的常量 CallsHelper::Active

> ID：12520315
> 
> 赞同：0
> 
> 时间：2012-09-20T20:21:29.903
> 
> 标签：ruby-on-rails-3, constants, view-helpers

我正在调用视图中编写一个助手，它根据对日期的评估来更改跨度的文本。当我在视图中编写 if/else 时，我可以让它工作，但是当我尝试从我的助手访问它时，我得到错误“未初始化的常量 CallsHelper::Active”。

```
view code:
 <%= status_indicator(call)%>

helper code:
 def status_indicator(call)
    if call.transfer_date > Time.zone.now
      Scheduled
    else
      Active
    end
  end 
```

除了不起作用之外，我不确定错误试图告诉我什么。有人可以帮我一把，让我知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:39:32.120

我想返回字符串而不是 Ruby 类。把“”放在字符串周围解决了这个问题。

# authorization - 我仍然可以在不使用 OAuth 的情况下使用 YouTube v3 API 授权请求吗？

> ID：12520316
> 
> 赞同：3
> 
> 时间：2012-09-20T20:21:30.650
> 
> 标签：authorization, youtube-api

*[Google 建议我在这里询问有关他们的 API 的问题。](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)*

我一直在测试 YouTube API v3。本周某个时候，似乎已经做出了尚未记录的行为改变。以前，我可以在我的 URL 中加入“key=$foo”来对它们进行身份验证，这就是我在简单的服务器端使用所需要的。该文档包括使用此授权方法的示例 URL，如下所示：

[https://www.googleapis.com/youtube/v3alpha/videos?id=7lCDEYXw3mM&key=API_KEY&part=id,snippet,contentDetails,statistics,status](https://www.googleapis.com/youtube/v3alpha/videos?id=7lCDEYXw3mM&key=API_KEY&part=id,snippet,contentDetails,statistics,status)

（*从[这里开始](https://developers.google.com/youtube/v3/getting-started)*。）

现在，当我尝试这种方法时，我得到的不是成功的响应，而是：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

如果当前记录的语法不再适用，那么基于下一个的简单授权选项是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:05:04.387

`key=API_KEY URL`每当您发出未经身份验证的请求时，该参数通常仍适用于 v3。

不过，工程团队正在对后端服务进行一些重大更改，同时他们破坏了此功能。我希望它会很快得到修复——目前使用 v3 很难做任何事情。

# coldfusion - 在 ColdFusion 中将 XML 对象转换回字符串

> ID：12520319
> 
> 赞同：2
> 
> 时间：2012-09-20T20:21:39.843
> 
> 标签：coldfusion, xml-parsing

在 ColdFusion 中，我可以使用`xmlParse()`. 如何将其转换回字符串？

当我尝试使用`toString()`它时，会抛出“它无法将复杂对象转换为简单对象......”的错误，这很讽刺，因为这是它应该做的。

我需要使用`XMLTransform()`它*要求*第一个参数是一个 xml 字符串。但是我还需要使用`xmlSearch()`来获取一个节点以传递给我的转换，并且 xmlSearch 返回一个 xmlObject。所以现在我需要将该对象重新转换为 xml 字符串格式以传递给 xmlTransform。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:09:27.750

谢谢你们;

我的问题的原因是由于这个特定 XML 的结构，我的 XMLSearch 返回了一个包含多个项目的数组。因此，尝试`toString()`在该结果上使用会导致错误。

**代码：**

```
 pXML = xmlParse( _xml );
    myElements = XmlSearch( pXML, "//data" );   
    writeoutput( toString( myElements ) ); 
```

**结果/错误：**

```
 Error Occurred While Processing Request
    Complex object types cannot be converted to simple values. 
```

**解决方案**

```
 writeOutput( toString( myElements[1] ) ); 
```

XML 有多个名为“data”的嵌套节点，并且`XMLSearch()`遍历并返回每个节点。

再次感谢您的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:39:52.467

尝试在 cfxml 中输出 XML 文本，然后改回字符串格式，如下所示：

```
<cfxml variable="xmlObject" casesensitive="yes">
<rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0">
</rss>
</cfxml>
<cfoutput>#ToString(xmlObject)#</cfoutput> 
```

或者

```
<cffile action="write" file="#ExpandPath('RSS.xml')#" output="#ToString(xmlObject)#"> 
```

有关`toString()` [http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f9e.html的详细信息](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f9e.html)

如果这不是你需要的，你能澄清一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:36:27.840

我会将 XML 包装在 cfsavecontent 中。并将变量用作字符串

# android - 如何从 Webview 中的页面显示中删除 HTML 标签？

> ID：12520320
> 
> 赞同：0
> 
> 时间：2012-09-20T20:21:46.237
> 
> 标签：android, html, webview, rss, plaintext

我是 android 开发的菜鸟，我正在尝试在 webview 中显示 rss 提要。它们显示为纯文本并显示 html 标记以及提要详细信息。我试过切换用户代理无济于事。是否可以使用正则表达式以干净/正确的 html 格式显示提要？任何帮助是极大的赞赏。

我如何加载我的 webview

```
try{                
            newsfeed.loadUrl("http://feeds.feedburner.com/GoldMoneyGoldResearch");              
            }catch (Exception e){
                e.printStackTrace();
            } 
```

这样的事情可能吗？我如何达到这个效果？

```
try{                
            newsfeed.loadUrl("http://feeds.feedburner.com/GoldMoneyGoldResearch").replaceAll("<[^>]*>", "");                
            }catch (Exception e){
                e.printStackTrace();
            } 
```

编辑

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_darn);

    newsfeed = (WebView) findViewById(R.id.webView1);
    try{                
        String content = newsfeed.loadUrl("http://feeds.feedburner.com/GoldMoneyGoldResearch").toString();//<--trying to parse rss feed to string
        newsfeed.loadData("<html>" + content + "</html>", "text/html", "utf-8");            
        }catch (Exception e){
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:30:39.177

我之前已经解析了一个 RSS 提要，我所做的就是在解析它之后将它加载到这样的 webview 中。您是否已将其解析为 listview 或其他？

```
newsfeed.loadData("<html>" + CurrentPodcastContent + "</html>", "text/html", "utf-8"); 
```

# php - 匹配以 9 位数字开头并可能以字符串结尾的字符串

> ID：12520325
> 
> 赞同：2
> 
> 时间：2012-09-20T20:22:05.723
> 
> 标签：php, regex

我基本上是在尝试匹配 10 个字符的 ISBN，到目前为止，我能够匹配任何 10 个字符长的字符串，但在将字符串识别为 ISBN 时并不准确

10 个字符长的 isbn 可以有 9 个起始数字并以字母结尾或有 10 个数字，例如

0273737025

027373702X

如果最后一个字符是一个字母，它将永远是`X`

**到目前为止我所拥有的**

```
[a-zA-Z0-9]{10,10} 
```

这个正则表达式将能够从类似的字符串中提取 isbn

```
"asjdh - asd a -  dsa- 0273737025"  = 0273737025 
```

但也会提取任何其他长度为 10 个或更多字符的内容

```
"asjdh - asd a -  dsa- myveryearly"  = myveryearl 
```

有没有可以满足这些要求的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:25:18.260

```
\d{9}(?:\d|X) 
```

这是 9 位数字，后跟一个数字或“X”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:25:59.513

这应该有效：

```
[0-9]{9}[xX0-9] 
```

或者更简洁的形式：

```
\d{9}[xX\d] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:38:24.563

您将不得不使用后向查找来防止找到前面有更多数字的 9 位数字。

```
(?<!\d)\d{9}[\dxX] 
```

# python - Python 作用域和类/实例/继承命名空间

> ID：12520326
> 
> 赞同：-4
> 
> 时间：2012-09-20T20:22:06.840
> 
> 标签：python

给定

```
class A:
    x = 'Ac'
    def f(self):
        return self.x

class B(A):
    x = 'Bc'
    def f(self):
        return self.x

class C(A):
    x = 'Cc'
    def f(self):
        return self.x

class D(B, C):
    x = 'Dc'
    def __init__(self):
        self.x = 'Di'
    def f(self):
        return self.x

d = D() 
```

1.  什么是名称解析顺序`d.x`？例如`Di, Dc, Bc, Cc, Ac`

2.  什么是名称解析顺序`super(D, d).x`？

3.  nro 是什么`self.x`意思`super(D, d).f()`？和 for 一样`d.f()`吗？

4.  nro 是干什么用的`D.x`？

5.  如果我分配到`d.x`并且`Di`不在那里，它会去哪里？例如`Di`或`Dc`

6.  如果我分配到`D.x`并且`Dc`不在那里，它会去哪里？

7.  如果我分配到`super(D, d).x`并且`Bc`不在那里，它会去哪里？例如`Di`或`Dc`或`Bc`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:32:09.600

如果您的对象是新样式对象（继承自），您可以通过使用属性或方法`object`打印出方法解析顺序来获取答案。`__mro__``mro`

将 A 类修改为如下所示：

```
class A(object):
    ... 
```

然后可以打印出每个类的方法解析顺序：

```
>>> A.__mro__
(<class 'junk.A'>, <type 'object'>)
>>> B.__mro__
(<class 'junk.B'>, <class 'junk.A'>, <type 'object'>)
>>> C.__mro__
(<class 'junk.C'>, <class 'junk.A'>, <type 'object'>)
>>> D.__mro__
(<class 'junk.D'>, <class 'junk.B'>, <class 'junk.C'>, <class 'junk.A'>, <type 'object'>) 
```

新样式 Python 类中的 stackoverflow 问题[Method Resolution Order (MRO)](https://stackoverflow.com/q/1848474/7432)有一些有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:18:32.607

首先，如果您在每个点分配不同的值而不是到处都分配无，这将使事情变得容易得多。但我会尽力回答你的问题。

首先要注意的是，该`d`实例实际上只有 1 个副本`x`，而不是 4 个。您可以很容易地对此进行测试：

```
>>> d.x = 3
>>> B.f(d)
3 
```

在像 C++ 这样的语言中，输出将是 None，因为 D 具有单独的 B::x、C::x 和 D::x 数据成员。（我在这里假装 A 不存在，因为它使讨论变得更加复杂，并且实际上与问题无关。）

或者，更容易：

```
>>> dir(d)
['__doc__', '__init__', '__module__', 'f', 'x'] 
```

这就是所有的成员；您已分配给同一个 self.x 四次。

另一方面，每个班级都有自己的副本。如果没有实例变量，则按照与 mro 相同的顺序搜索这些变量。您可以再次轻松测试：

```
>>> del d.x
>>> B.x = 4
>>> C.x = 5
>>> D.x = 6
>>> d.f()
6
>>> C.f(d)
6
>>> del D.x
>>> d.f()
4 
```

至于设置，这很容易：设置`d.x`总是设置实例变量（记住，只有 1 个，而不是 4 个），或者如果不存在则创建它。同时，设置`D.x`或`B.x`设置或创建该类的类变量。因此，继承层次结构无关紧要。

# php - PHP/ldap_bind Active Directory 无法验证 OU，但可以使用默认用户组进行验证

> ID：12520328
> 
> 赞同：3
> 
> 时间：2012-09-20T20:22:11.380
> 
> 标签：php, ldap

使用以下代码，我可以对属于域默认用户组的任何用户进行身份验证。例如，我创建了一个用户 CN=test，如下所示。

CN=测试,CN=用户,DC=公司,DC=lcl

有效的代码是..

```
$ldap_resource = ldap_connect( 'company-dc' );
ldap_set_option($ldap_resource, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldap_resource, LDAP_OPT_REFERRALS, 0);

if( $bind = ldap_bind( $ldap_resource, 'domain\\test', '*******' ) ) {
    die('connected');
}
else {
    die('No connection');
} 
```

当我尝试对 OU=Office Users,OU=Company,DC=company,DC=lcl 中的用户进行身份验证时，它失败并出现错误***Unable to bind to server: Invalid credentials***。我已经验证了多个用户的用户名和密码是否正确。

我使用与上面完全相同的代码，唯一的区别是用户名和密码，域是相同的。

**可以在以下位置进行身份验证：**

公司.lcl

-- 用户

**无法在 :**

公司.lcl

- 公司

----办公用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:13:53.227

如果 OU 改变了行为，那么您可能有一个组策略绑定到一个 OU 而不是另一个。我不完全确定，但我可以想象 GPO 强制使用安全通道进行身份验证，您需要使用 LDAP over SSL。您能否将一个用户帐户从用户 OU 移动到公司/办公室用户 OU 并查看它是否停止工作（或相反）？

# vb.net - 带有路径/文件名变量的 vb.net LinkedResource

> ID：12520331
> 
> 赞同：0
> 
> 时间：2012-09-20T20:22:20.100
> 
> 标签：vb.net

我正在尝试引用图像位置。这有效：

```
Dim r1img3 As New LinkedResource("\\raws01\nacha$\achSystemItems\emailImages\r1img3.jpg") 
```

但我试图让路径部分作为预设变量被拉入，并将其与文件名连接起来，但我无法让它工作。

我基本上是在尝试做这样的事情：

```
Dim emailImages As String = CStr(Dts.Variables("emailImages").Value)
Dim r1img3 As New LinkedResource(emailImages + "r1img3.jpg") 
```

请问有什么帮助吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:48:44.863

Can't tell without knowing what `CStr(Dts.Variables("emailImages").Value)` produces. Give this a try, may be you are just overlooking a `\`.

```
Dim r1img3 As New LinkedResource(Path.Combine(emailImages,"r1img3.jpg")) 
```

# c# - 在属性中使用 switch 来检索值时，我应该将变量用于 switch 语句还是 return 语句？

> ID：12520335
> 
> 赞同：0
> 
> 时间：2012-09-20T20:22:29.523
> 
> 标签：c#, coding-style, switch-statement

我应该在返回之前保存 switch 语句的结果吗？或者当我得到它时我应该返回开关中的值吗？有没有一种方法比另一种更好的风格？

使用临时变量：

```
 public double xMax {
      get {
           double val = 0.00f;
           switch(x_option) {
                case 0:
                     val = priMax;
                     break;
                case 1:
                     val = rfMax;
                     break;
                case 2:
                     val = pwMax;
                     break;
           }

           return val;
      }
 } 
```

带有返回语句：

```
 public double xMax {
      get {
           double val = 0.00f;
           switch(x_option) {
                case 0:
                     return priMax;
                case 1:
                     return rfMax;
                case 2:
                     return pwMax;
           }
      }
 } 
```

是否存在性能差异和/或清理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:25:22.417

我个人更喜欢第二种形式。它*立即*清楚地表明，一旦您到达 return 声明，您就完成了。使用额外的变量版本，您必须查看其余代码以查看是否会发生其他任何事情。

围绕单点返回的教条在 C 语言中是有意义的，在 C 语言中，您希望确保完成所有手动清理等工作 - 但在一个*无论如何*都必须考虑异常可能性以及垃圾收集器的世界中处理大部分清理工作，`try/finally`处理其余部分，我发现在*很多*情况下，坚持使用单个退出点会使代码显着难以阅读 - 特别是在您可以在方法开始时确定结果的情况下（例如“如果输入字符串为空，则结果始终为 0 - 所以只需将其返回）。

编辑：为了清楚起见，在您的情况下，我认为这没有太大区别。但这是一种单点返回变得混乱的代码：

```
 public int DoSomething(string input1, string input2)
 {
     // First simple case
     if (input1 == null || input2 == null)
     {
         return -1;
     }

     // Second simple case
     int totalLength = input1.Length + input2.Length;
     if (totalLength < 10)
     {
         return totalLength;
     }

     // Imagine lots of lines here, using input1, input2 and totalLength
     // ...
     return someComplicatedResult;
 } 
```

使用单点返回，这将变为：

```
 public int DoSomething(string input1, string input2)
 {
     int ret;

     // First simple case
     if (input1 == null || input2 == null)
     {

         ret = -1;
     }
     else
     {
         // Second simple case
         int totalLength = input1.Length + input2.Length;
         if (totalLength < 10)
         {
             ret = totalLength;
         }
         else
         {
             // Imagine lots of lines here, using input1, input2 and totalLength
             // ...
             ret = someComplicatedResult;
         }
     }
     return ret;
 } 
```

我*肯定*宁愿阅读第一种形式而不是第二种形式：

*   更多的嵌套*通常*会使代码更难理解。很难记住你要去哪里
*   在第一种形式中，您可以*清楚地*告诉 - 无需阅读更多代码 - 如果您了解基本情况，您就完成了。复杂的代码之后不会有任何副作用；我们只是要回来。在第二个代码中，您必须在精神上跳过“其他”块才能弄清楚发生了什么。您正在查看更多代码以找出路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:52:18.530

嗯，最重要的是不要混合它们。

第一种形式的一个动机是它有一个从 getter 退出的点。如果代码比示例中的更复杂，那可能很有用，但在像这样的简单示例中，这并不重要。

只要代码像示例中那样简单，第二种形式的简单性就是一个很好的论据。

* * *

您的第二个示例没有像现在这样编译，因为代码可能会到达属性的末尾而不返回任何内容。在第一种情况下，您可以在切换之前将变量设置为默认值，对于第二种情况，您应该在切换中使用默认选项，并且您根本不需要该变量：

```
public double xMax {
  get {
    switch(x_option) {
      case 0:
        return priMax;
      case 1:
        return rfMax;
      case 2:
        return pwMax;
      default:
        return 0d;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:23:44.867

这是一个品味问题，但我更喜欢在可能的情况下获得[单点退货](http://discuss.joelonsoftware.com/default.asp?joel.3.325456.34)。更容易调试，让你在使用代码契约时更清楚地检查 pre 和 post。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-23T06:21:11.613

这个问题是两代人的。但我会回答这个问题，因为这个问题曾经也困扰着我。

* * *

这是您正在查看的内容：*语法 A*和*语法 B*。

你应该看什么：**整个代码中的语法一致性。**

选择一种风格并坚持下去。这可以由个人选择、团队选择、老板选择等决定。在遇到瓶颈之前担心性能是本末倒置。

* * *

作为代码和复杂性积累的一般后果，如果您面临 switch 语句，那么有人在某处编写了错误的代码并试图在一个代码的一个毛线球中处理很多事情。

恰当的例子：一个返回 JSON 的 API 调用，它在一个数组中发回 5 个不同的值，您需要弄清楚如何处理它或根据需要选择哪些数据。

* * *

大多数时候，只要有多个返回或 if 的可能性，您就应该将代码分成小块。

以 Jon Skeet 的代码为例：

```
public int DoSomething(string input1, string input2)
 {
     int ret;

     // First simple case
     if (input1 == null || input2 == null)
     {

         ret = -1;
     }
     else
     {
         // Second simple case
         int totalLength = input1.Length + input2.Length;
         if (totalLength < 10)
         {
             ret = totalLength;
         }
         else
         {
             // Imagine lots of lines here, using input1, input2 and totalLength
             // ...
             ret = someComplicatedResult;
         }
     }
     return ret;
 } 
```

* * *

让我们先看看能否让代码更具可读性。

```
private int someComplicatedTask(string input1, string input2){
    // Second simple case
    int ret = 0;
    int totalLength = input1.Length + input2.Length;
    if (totalLength < 10)
    {
        ret = totalLength;
    }
    else
    {
       // Imagine lots of lines here, using input1, input2 and totalLength
       // ...
       ret = someComplicatedResult;
    }
    return ret;
}

public int DoSomething(string input1, string input2)
 {
     return input1 == null || input2 == null ? -1 : someComplecatedTask(...);
 } 
```

这应该让您想知道，“当输入可能为空时，您为什么要调用 DoSomething？”。

请注意问题尚未解决。我所做的只是让代码看起来更好。

以下是我在 if 条件下的处理方式：

空输入的条件将移出到清理功能。或者只有当输入不为空时才会调用。

```
...
if(input1 != null && input2 != null){
    output = DoSomething(input1, input2);
}
...

public int DoSomething(string input1, string input2)
{
    int len = input1.Length + input2.Length;
    return len < 10 ? len : someComplecatedTask(input1, input2);
}

private int someComplicatedTask(string input1, string input2){
    // Imagine lots of lines here, using input1, input2
    // ...
    return someComplicatedResult;
} 
```

因此，代码现在看起来更易于管理。代码只有两条路可以走，一切都很好。

* * *

现在让我们看看您的第一个代码片段。

```
public double xMax {
      get {
           double val = 0.00f;
           switch(x_option) {
                case 0:
                     val = priMax;
                     break;
                case 1:
                     val = rfMax;
                     break;
                case 2:
                     val = pwMax;
                     break;
           }

           return val;
      }
 } 
```

在我看来，这很糟糕，原因有两个：
1\. 将来某个时候，x_option 会获得另一个值，您将在每次 get {} 下寻找适当的更改。
2\. 获取 {} 应该是直截了当的。Set {} 应包含设置适当值的条件。

所以代码应该看起来像这样：

```
public double xMax {
      set {
           double val = 0.00f;
           switch(value) {
                case 0:
                     val = priMax;
                     break;
                case 1:
                     val = rfMax;
                     break;
                case 2:
                     val = pwMax;
                     break;
           }
           xmax = value * val; // say // This makes break better in switch.
      }
      get { return xmax; }
 } 
```

因为，在你的情况下，你可以做更多的（所有情况下通用的）操作，那么这比返回要好。这个例子相对于 get one 更好，因为在设置时你不知道值，所以你需要一个决策树。

但是在获取时，您的对象确切地知道它包含什么，并兴高采烈地返回所询问的内容。

现在，您的第二个代码示例根本没有意义。决定返回什么不是对象的职责。它应该返回它所拥有的东西。

在设置时，无论如何你都不应该强行返回。

我希望这能消除一些疑虑并提出更多问题，因为还有很多东西要学。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T20:30:22.660

在我在华沙军事科技大学的第一堂编程课上，Eng 博士。Zbigniew Wesołowski 表示，该函数只能有一个返回点。这是对 ANSI-C 编程的介绍，但他也告诉我们，我们永远不应该忘记这一点，因为这是一个普遍的规则，无论我们必须使用哪种语言进行开发。更重要的是，就像一个暴君一样，他表示如果他尝试使用 goto 语句、在函数中间返回或在 for 循环中修改迭代器，他永远不会通过考试。

中途返回，还是不返回，是个老年难题。一些人声称它使代码更清晰，但它并不优雅，应该避免。根据我的经验，我注意到，java 代码中最常出现多个返回，而 c、c++ 和 c# 程序员则避免这种情况。这不是规则，只是观察。

另一个观察结果是 java 语言鼓励紧凑的语法。Java IDE（例如eclipse）通常将默认格式化程序设置为将左大括号放在同一行（只是一个简单的例子）。多个返回与该方法一致，允许进一步压缩代码。

相反的 Visual Studio 将新行上的左大括号作为唯一字符。它鼓励清晰、粗体的语法、长文件、许多空白或单个字符行。我不知道哪个更好，如果有的话。

基本上我在大学和家里的课堂上编写 C#。然后我更喜欢带有空行的长文件。

在我的公司，我编写 java 代码，然后我更喜欢更紧凑的风格，我已经习惯了。在公司中，我们使用 checkstyle 通过统一的样式来保持良好的代码质量。在公司存在多年的情况下，checkstyle 一直存在规则，根本不允许多次退货。

我在 stackoverflow 上看到过一篇帖子，有人发布说它会对性能产生影响。在一个答案中，他得到了一个简单的基准检查结果。事实上并没有太大的区别。

在我的编码实践中，我宁愿避免多次返回。但你的整体决定将取决于你的个人品味、经验、习惯、信仰，也许还有质量要求。

# javascript - HTML5 拖放到 ActionScript 文件参考

> ID：12520347
> 
> 赞同：3
> 
> 时间：2012-09-20T20:23:16.127
> 
> 标签：javascript, actionscript-3, html, apache-flex, drag-and-drop

是否可以让**HTML5 FileAPI 将文件拖放到 ActionScript FileReference 对象中？**

我认为 GMail 做到了：它允许在 Google Chrome 中拖放。但随后 ActionScript 对象负责将文件上传到服务器。ActionScript 也负责 ProgressBar。

如果我能分析 GMail 代码，也许我能找到答案。有谁知道这是否可能？我试过了，但我得到了一堆没有空格的 JavaScript。以这种形式阅读是不可能的。

任何建议都会有所帮助。如果我自己得到一些答案，我会在这里发布，以便他们为他人服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:05:55.667

我相信 Gmail 使用 HTML5 拖放事件，而不是 Flash。

查找 html5 数据传输。

# sql - 如何根据多个条件删除重复项？

> ID：12520349
> 
> 赞同：0
> 
> 时间：2012-09-20T20:23:19.430
> 
> 标签：sql, duplicates, foxpro

我有一个包含 4 列的表：**customerid**、**purchaseate**、**purchasenumber**和**operationid**。此表作为另一个查询的结果返回。

我想消除任何重复的客户，但日期最近的客户除外。

例如：如果我有 4 个条目具有不同的购买日期但相同的操作 ID 和相同的客户 ID，那么我想保留最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:46:09.297

```
DELETE FROM YourTable ;
  WHERE PurchaseDate < ;
    (SELECT MAX(PurchaseDate) ;
       FROM YourTable YT2 ;
       WHERE YT2.CustomerID = YourTable.CustomerID ;
         AND YT2.OperationID = YourTable.OperationID) 
```

应该这样做，但如果您在最近的日期有相同 customerID 和 operationID 的多条记录，您将保留所有记录。

这是未经测试的，因此请确保在尝试之前备份您的数据。

# android - Android，关于surfaecview和view

> ID：12520353
> 
> 赞同：1
> 
> 时间：2012-09-20T20:23:27.753
> 
> 标签：android, view, render, surfaceview

我在该表面视图周围有红色，渲染速度更快，但比视图占用更多资源。

从我的测试中，我尝试了这段代码：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.drawColor(Color.WHITE);
    Log.i("OnDraw","ping");
    invalidate();
} 
```

一个是表面视图类渲染，另一个是视图类渲染，两者都有相同的代码。从日志聊天中，我可以看到来自 Log.i 方法的消息在视图类中刷新得更快——每个之间大约有 70 毫秒的延迟，而在 SurfaceView 的情况下，它刷新得更慢——大约 100 毫秒每个人之间的延迟。

所以......什么给了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:33:33.503

SurfaceView 的主要优点是可以从不同的线程对其进行绘图。因此，对于实时游戏，您肯定会需要 SurfaceView 甚至 GLSurfaceView。对于纸牌和多米诺骨牌等游戏，视图可能与非游戏应用程序相同

关于绘图机制，我相信没有什么能让 SurfaceView 更快，尽管因为普通视图只能从 UI 线程更新 SurfaceView 通常是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:52:58.820

在真实手机上调试相同的代码后，我可以说视图和表面视图的刷新速度没有明显的明显差异，虽然比模拟器有很大的改进，但它们都刷新了大约 20 毫秒.

# java - Java StringBuffer 工作正常，reverse() 添加换行符

> ID：12520360
> 
> 赞同：2
> 
> 时间：2012-09-20T20:23:57.153
> 
> 标签：java, stream, buffer, stringbuffer

在下面的代码中，案例 2 以正常顺序打印文本文件，它工作正常。但在案例 3 中，完全相同，但使用 .reverse() 方法，它突然添加了换行符。（我知道我可以减少很多重复，我正在努力让它先发挥作用。）

例子：

> 马库斯
> 1244

好像

> 4421
> 
> scuram

使用 \r 或 \n 而不是 line.separator 给了我同样的东西。把它拿走，当然会给我一个砸在一起的线。

```
import java.lang.*;
import java.util.*;
import java.io.*;

public class H5 {
public static void main(String args[]) {
    Scanner stdin = new Scanner(System.in);
    Scanner stdin2 = new Scanner(System.in);
    String filePath = null;
    int selection;
    boolean repeat = true;
    FileInputStream f = null;

    do {  
        System.out.println("\n0 - Exit\n1 - Select file\n2 - Display\n3 - Reverse\nSelect option: ");
        selection = stdin.nextInt();
        switch (selection) {
        case 0:  System.out.println("\nThank you. Goodbye.");
                 repeat = false;
                 break;
        case 1:  System.out.println("\nFile path: ");
                 filePath = stdin2.nextLine();

                 try {f = new FileInputStream(filePath);}
                 catch (Exception d) { System.out.println(d);}

                 break;
        case 2:  try {
                    f = new FileInputStream(filePath);
                    DataInputStream d = new DataInputStream(f);
                    BufferedReader b = new BufferedReader(new InputStreamReader(d));
                    StringBuffer strbuf = new StringBuffer(200000);

                    String strLine;
                    while ((strLine = b.readLine()) != null) {
                         strbuf.append(strLine).append(System.getProperty("line.separator"));
                     }
                    System.out.println(strbuf);
                 }
                 catch(NullPointerException npe) {
                    System.out.println("\nPlease select a file first.");
                 }
                 catch(Exception e) {
                    System.out.println(e);
                 }
                 break;
       case 3:  try {
                    f = new FileInputStream(filePath);
                    DataInputStream d = new DataInputStream(f);
                    BufferedReader b = new BufferedReader(new InputStreamReader(d));
                    StringBuffer strbuf = new StringBuffer(200000);

                    String strLine;
                    while ((strLine = b.readLine()) != null) {
                         strbuf.append(strLine).append(System.getProperty("line.separator"));
                     }
                    strbuf.reverse();
                    System.out.println(strbuf);
                 }
                 catch(Exception k) {
                     System.out.println(k);
                 }
                 break;
        default: System.out.println("\nInvalid input. Please select from the following: ");
                 break;
        }
    } while(repeat);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:28:23.990

那是因为`\r\n`是一条新线，而是`\n\r`两条新线。

# html - iOS 6 Safari 背景缺失

> ID：12520364
> 
> 赞同：4
> 
> 时间：2012-09-20T20:24:08.813
> 
> 标签：html, google-chrome, mobile-safari, ios6

我一直在研究问题和搜索引擎，但可能现在要索引或找到答案还为时过早。

无论如何，当我在处理我的一个项目时，突然间许多背景图像停止显示。这发生在 iPad 上升级到 iOS 6 之后。

举个例子：

```
<td style="background-image:url(https://mysite.com/_itemg_ver1.png); background-repeat:repeat-x; height:24px; width:100px;">Some content</td> 
```

这可能是一些愚蠢的事情，因为并非所有背景图像都受到影响，这只会让人更加沮丧。我很困惑。工作代码示例：

```
<td style="width:925px; height:44px; background-color:#ffffff; background-image:url(https://mysite.com/ll_corner_ver1.png); background-repeat: no-repeat; background-position:bottom left;">Some content</td> 
```

我已经尝试使代码“相同”，但仍然是同样的问题。我目前正在研究图像以某种方式存在问题，但这并没有任何意义。

提前感谢您的想法/帮助等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:04:06.240

由于我自己解决了这个问题，我做了很多测试。

问题与大小、宽度、透明度或repeat-x 无关，它是INTERLACING。将图像加载到图像编辑器中并在隔行扫描*关闭*的情况下保存，它应该可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T13:32:29.533

从测试和学习，以及使用photoshop。

我在使用用于背景图像的 png 文件时看到的问题会变黑。我遇到问题的所有文件都是 1 像素宽 x 某个高度（20 到 700 像素之间）。这些文件还在 Photoshop 中进行了标记，以支持透明度。

根据早期的海报推荐和经验，测试了所有尺寸的宽度。然而，这并没有解决我看到的问题。

在测试之后，我注意到（因为在那之前我没有）所有有问题的文件都被设置为支持透明度。我测试了禁用它，这一切都不同了。

因此，从我所做的来看，所有文件的尺寸都与之前尺寸相同，但禁用了对透明度的支持。

这并不是说 iOS 6 和 png 图像的尺寸没有相关问题，但这不是我解决所看到问题的方法。

另请注意，这不仅在 Safari 上。这也出现在 iOS 6 中的 Chrome 上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T11:48:42.143

我也遇到过这个令人沮丧的问题。

我发现原因似乎源于图像宽度为 10 像素或更小的 repeat-x PNG 背景。将每个受影响图像的宽度增加到至少 50px 为我解决了这个问题。

# java - Java中“==”和“等于”的区别

> ID：12520367
> 
> 赞同：3
> 
> 时间：2012-09-20T20:24:19.880
> 
> 标签：java, equals

> **可能重复：**
> [为什么这些 == 但不是`equals()`？](https://stackoverflow.com/questions/1259693/why-are-these-but-not-equals)

我知道在Java中，“==”用于比较引用而不是值，而“等于”用于比较值。

那么如果

```
int a=100;
int b=100;
boolean c=(a==b); 
```

那么c会是假的吗？但是我记得在我之前的项目中，好像是真的....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T20:25:30.697

c 是正确的，因为您正在比较原语，而不是引用。== 按值比较基元（因为值就是你所拥有的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T20:27:40.337

Using`==`适用于所有[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)来比较值，因为原始数据不包含引用。相反，对象包含对象引用，因此 using 会`==`比较它们。

100 的 int 值*确实*等于 100，所以`c`是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:26:10.917

c 将是`true`因为`a`和`b`是原语并且它们的值是相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T20:26:41.983

`Integers`是`value types`。所以在这种情况下，它只是比较值，所以`c`将是`true`.

# ibm-midrange - AS400 Telnet 仿真器自动登录

> ID：12520369
> 
> 赞同：2
> 
> 时间：2012-09-20T20:24:26.423
> 
> 标签：ibm-midrange

我有一个来自 sourceforge 的 TN5250 模拟器：http://sourceforge.net/projects/tn5250/[我](http://sourceforge.net/projects/tn5250/)正在尝试通过我在此处找到的说明启用自动登录：http: [//www.faqs.org/rfcs/rfc2877.html](http://www.faqs.org/rfcs/rfc2877.html)

我发送的字符串基本上如下（我知道这是作为明文传递的，我不确定是否需要加密传递）："\u0000USER\u0001"+user+"\u0003IBMRSEED\u0001\u0003IBMSUBSPW\ u0001"+通过

我调用的方法用以下十六进制字符填充字符串的开头：FF FA 27 00 00

上面提到的相同方法还使用以下十六进制字符填充字符串的末尾：FF F0

仅供参考：我没有收到来自服务器的回复说 WONT NEW-ENVIRON

不幸的是，我没有自动登录到 AS400，而且我对 AS400 的了解也不够多，不知道为什么。因此，我想问的第一个问题是如何确定这种方法失败/有效？

下一个问题是：我做错了什么吗？

感谢您提出任何其他批评和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:10:28.227

[HOWTO](http://www.chowhouse.com/~james/tn5250-HOWTO.pdf)中的第 4.7 节解释了自动登录的方法。

**编辑：**断开的链接，文本粘贴在这里。

```
4.7 Automatic login
You can configure tn5250 to automatically log in to the iSeries using the env.USER, env.IBMSUBSPW,
env.IBMPROGRAM, env.IBMIMENU, and env.IBMCURLIB arguments. If you wanted to automatically log in as
user MYUSER with password MYPASSWORD you would set these arguments like this:
env.USER = MYUSER
and
env.IBMSUBSPW = MYPASSWORD
The env.IBMPROGRAM, env.IBMIMENU, and env.IBMCURLIB arguments refer to the respective signon fields for
program, menu, and current library. These have the same syntax as env.USER and env.IBMSUBSPW. Adding
these to our .tn5250rc file results in:
as400 {
host = as400.mydomain.com
env.TERM = IBM-3477-FC
env.DEVNAME = MYDISPLAY
+underscores
map = 37
env.USER = MYUSER
env.IBMSUBSPW = MYPASSWORD
env.IBMPROGRAM = MYPROGRAM
env.IBMMENU = MYMENU
env.IBMCURLIB = MYLIBRARY
} 
```

**编辑 2在**[Midrange wiki](http://wiki.midrange.com/index.php/Tn5250)上粘贴全文。

# postgresql - 如何在 PostgreSQL hstore 中使用通配符查询值

> ID：12520375
> 
> 赞同：21
> 
> 时间：2012-09-20T20:24:52.847
> 
> 标签：postgresql, hstore

我正在尝试在 hstore 中查询与搜索条件匹配的某个键的所有值。

我可以像这样获取某个键的所有值：

```
SELECT DISTINCT
svals(slice(data, ARRAY['Supplier']))
FROM "products" 
```

我还可以获得一个特定的值：

```
SELECT DISTINCT
svals(slice(data, ARRAY['Supplier'])) AS sup
FROM "products"
WHERE data @> 'Supplier => Toshiba' 
```

我真正想要的是（这不起作用）：

```
SELECT DISTINCT
svals(slice(data, ARRAY['Supplier'])) AS sup
FROM "products"
WHERE data @> 'Supplier => %tosh%' 
```

或者：

```
SELECT DISTINCT
svals(slice(data, ARRAY['Supplier'])) AS sup
FROM "products"
WHERE lower(sup)
LIKE '%tosh%' 
```

用于不区分大小写的搜索。这是怎么做到的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-20T20:35:46.760

[您可以使用operator](http://www.postgresql.org/docs/9.2/static/hstore.html#HSTORE-OP-TABLE)键从`hstore`列中提取值。[`->`](http://www.postgresql.org/docs/9.2/static/hstore.html#HSTORE-OP-TABLE)

```
SELECT data->'Supplier' AS sup
FROM products
WHERE lower(data->'Supplier') LIKE '%tosh%'; 
```

此外，像 PostgreSQL 中的大多数表达式（除了类似的东西`random()`），你可以索引这个值：

```
CREATE INDEX products_supplier_key ON products ((data->'Supplier'));
CREATE INDEX products_supplier_lowercase_key ON products ((lower(data->'Supplier'))); 
```

这将允许 PostgreSQL 使用索引来回答许多此类查询，而不是获取每一行并扫描`hstore`列。[请参阅关于索引类型](http://www.postgresql.org/docs/9.2/static/indexes-types.html)的注释，了解与 LIKE 的索引用法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T17:35:54.770

对于将来看到此问题的任何人，willglynn 的回答有一个警告——原始查询和新查询的行为略有不同。即，

```
SELECT data->'Supplier' AS sup
FROM products; 
```

将包含一个 NULL 值，假设至少有一行没有分配给供应商。

```
SELECT DISTINCT
svals(slice(data, ARRAY['Supplier']))
FROM "products" 
```

不会返回 NULL 值。

# xslt - 当两个元素可能有也可能没有父子关系时处理它们

> ID：12520378
> 
> 赞同：2
> 
> 时间：2012-09-20T20:24:57.157
> 
> 标签：xslt

这似乎是一个非常基本的问题，但最近几天我一直在寻找答案并尝试无济于事。我试图把这个：

```
<bold> bang </bold> 
<line> I was walking down the street </line> 
<line> when I heard a <bold> bang </bold></line> 
```

进入：

```
<strong> bang </strong> 
<textline> I was walking down the street </textline> 
<textline> when I heard a <strong> bang </strong></textline> 
```

使用这个：

```
<xsl:template name="first" match="//line">
    <textline>
        <xsl:value-of select="."/>
    </textline>
</xsl:template>

<xsl:template name="second" match="//bold">
    <strong>
        <xsl:value-of select="."/>
    </strong>
</xsl:template>

<xsl:template match="@*|node()|line|bold">
    <xsl:copy>

        <xsl:apply-templates select="@*|node()|line|bold"
        />
    </xsl:copy>
</xsl:template> 
```

我的问题是它要么命中`<bold>`OR`<line>`标签，但不是两者兼而有之。例如：

```
<strong> bang </strong> 
<textline> I was walking down the street </textline> 
<textline> when I heard a bang </textline> 
```

如果`<bold>`标签总是在里面`<line>`，或者从不在里面，那将是直截了当的。

我尝试添加一个我认为会优先考虑的更具体的模板：

```
<xsl:template name="third" match="//l/bold">
    <strong>
        <xsl:value-of select="."/>
    </strong>
</xsl:template> 
```

但它仍然没有给出预期的结果。我强烈怀疑我的错误是由于对该语言的基本知识有误解，但是四处搜索我找不到任何解决方案任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:55:46.493

**这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="bold">
     <strong><xsl:apply-templates/></strong>
 </xsl:template>

 <xsl:template match="line">
     <textline><xsl:apply-templates/></textline>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档**（提供的 XML 片段，包装到单个顶部元素中以成为格式良好的 XML 文档）时：

```
<t>
    <bold> bang </bold>
    <line> I was walking down the street </line>
    <line> when I heard a <bold> bang </bold></line>
</t> 
```

**产生想要的正确结果**：

```
<strong> bang </strong>
<textline> I was walking down the street </textline>
<textline> when I heard a <strong> bang </strong></textline> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:45:11.503

而不是`value-of`在特定模板中，使用`apply-templates`. 您希望在匹配一组后继续对标签进行递归处理。

# asp.net - 果园视图更改未保存和模块未安装

> ID：12520383
> 
> 赞同：1
> 
> 时间：2012-09-20T20:25:12.737
> 
> 标签：asp.net, razor, orchardcms

**我们的设置：**

Orchard v1.5.1
Microsoft Azure托管
相关模块：主题编辑器1.4.1、系统编辑器

**问题：**

在尝试使用系统编辑器工具编辑几个页面的内容时，我们发现我们的任何更改都没有显示在前端。我们可以离开主题编辑页面，回来，我们的更改被保留，但它们不会显示在前端。网站上的所有页面都会发生这种情况。

我们一直在使用主题编辑器模块来更改主题，但它已经被禁用了一段时间。但是因为我们在编辑视图时遇到问题，我们禁用了系统编辑器并启用了主题编辑器，希望它能解决问题。但是现在，如果我们尝试编辑主题，我们只会看到服务器错误（进入主题区域并单击 CSS 或 HTML 选项卡会引发错误）。这是错误：

> “/”应用程序中的服务器错误。

现在为了解决这个问题，我们禁用了主题编辑器模块并尝试安装它的更新版本（1.4.2），但收到了这个错误：

> 'bin\Orchard.Core.dll' 已经存在。跳过...
> 
> 'bin\Orchard.Framework.dll' 已经存在。跳过...
> 
> 包安装失败：安装请求的包时出错。如果服务器没有对网站的“~/Modules”或“~/Themes”文件夹的写入权限，就会发生这种情况。如果站点在共享托管环境中运行，有时需要通过 Hoster 控制面板手动添加对这些文件夹的写入权限。安装主题和模块后，建议删除对这些文件夹的写入权限。

我们不确定如何继续，因为本周服务器端没有任何更改，而且我们今天对主题的所有更改都是 HTML 的小部分，所以为什么系统会抛出所有这些错误是很奇怪的。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:46:39.680

I don't know System Editor (and I don't see a module by that name on the gallery) but Theme Editor is editing files on disk. That's a big no-no for Azure, unless you are on the new Azure Web Sites (which doesn't seem to be the case from what you're saying). On an Azure instance, you don't install new modules, and you don't modify the file system (your instances may get restarted at any point, and the file system is not getting replicated across servers). Your options are to move to Azure Web Sites, or to not edit your themes or install modules online, but to deploy new images with the new theme and modules when you want to make changes.

# java - 如何从另一个 jar 运行 jar 文件

> ID：12520395
> 
> 赞同：3
> 
> 时间：2012-09-20T20:25:41.820
> 
> 标签：java, deployment, appdata

我有一个使用 L4J 转换为 .exe 的 jar 文件，以及 appdata 中的另一个 jar 文件。有两个文件的原因是我需要一个更新机制。

我的问题：如何在桌面上运行 .exe 文件，然后从中加载 appdata 中的 jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:30:58.460

您可以使用 a[`URLClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)在运行时加载第二个 Jar。

根据您的需要，您可能需要一个桥接接口（两个 Jar 中都存在一个），您可以从“exe”调用该接口以运行第二个 Jar……或者您可以简单地使用第二个 Jar 的`main`方法；）

您的另一个选择是运行另一个 JVM。

**更新**

为了物理分离应用程序的两个元素。您有一个包装在 EXE（又名启动器）中的 Jar 和另一个作为您的应用程序（又名应用程序）的 Jar（我假设）。

所以。您的启动器应该完全不了解您的应用程序（几乎没有编译时间依赖性）。

不知何故，我们需要从启动器动态加载应用程序。为此，我们需要做一些事情。

我们需要能够将应用程序加载到启动器类加载器上下文中（以便我们可以看到它），并且我们需要能够加载应用程序。

**动态类加载**

这可以通过使用简单地实现`URLClassLoader`

```
URLClassLoader loader = new URLClassLoader(new URL[]{new File("path/to/your/jar/Application.jar").toURI().toURL()}); 
```

**应用程序加载**

这可以通过以下两种方式之一来实现。您可以简单地使用`URLClassLoader`来查找启动应用程序`main`类...

```
// This is essentially the same as saying 
// the.package.name.to.you.main.class.Main.main(new String[]{});
Class<?> mainClass = loader.loadClass("the.package.name.to.you.main.class.Main");
Method mainMethod = mainClass.getMethod("main", String[].class);
mainMethod.invoke(null, new String[]{}); 
```

现在，如果您的应用程序 Jar 没有`main`方法，您可以使用上面的示例来启动您想要的任何类...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:28:46.300

您需要通过 at 添加一个 jar 到类路径，例如：“c:\mypath\myjar.jar”，而不是更新 myjar.jar

# iphone - 在 UITableView 的子类中覆盖 UITableViewDatasource

> ID：12520408
> 
> 赞同：0
> 
> 时间：2012-09-20T20:26:23.440
> 
> 标签：iphone, ios, uikit, uitableview

我有一个 UITableView 子类，它有时需要提供自己的内部实现来计算部分的数量。因此，有时我需要它从数据源中获取部分的数量，有时我需要忽略数据源并自己计算它。

我尝试覆盖 UITableView 的 numberOfRowsInSection: （注意这是表格视图的版本，而不是数据源的 tableView:numberOfRowsInSection:)，如下所示：

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section
    {
    NSInteger numberOfRows = 0 ;
    if( ![self sectionIsCollapsed:section] ) // is the section expanded?
        {
        numberOfRows = [super numberOfRowsInSection:section] ;
        }
    return numberOfRows ;
    } 
```

但是，UITableView 的 -endUpdate 并没有真正调用这个方法，而是直接进入数据源。有没有办法覆盖对数据源的调用，或者我只是 SOL？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T23:14:08.820

我在自己的项目中实现了上述方案，效果很好。我已经将委托和数据源完全包装在一个包装对象中，该对象使用现有的委托和数据源进行初始化。然后我操纵通过我的包装对象流入和流出的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T23:06:12.467

你的问题与我正在做的事情有些相关。
如果我理解正确，您想在自定义 UITableView 实现中覆盖 UITableviewDataSource 的一些方法，而不是其他方法。

在您的情况下，您要求 UITableView 成为它自己的数据源。也许您可以在适当的时候在嵌入式数据源和“真实”数据源之间来回切换？

tableview、datasource和delegate之间没有继承关系。表格视图只有指向其他两个的指针。我能看到这个工作的唯一方法是，如果你在你的 tableview 中实现完整的 UITableviewDataSource 协议（坦率地说闻起来很糟糕），然后将委托指针打乱，这似乎有风险。

我认为一种更简洁、风险更低的方法是创建一个符合 UITableviewDataSource 协议的*类，该协议将框架用户现有 UITableviewDataSource 的**实例*作为 init 参数，并一直环绕它，通过和/或当你需要它的行为时修改对它的调用，当你不需要它时将它隐藏起来。然后你使用你的包装类作为 tableview 上的委托。

你怎么看？

我不记得这个设计模式的名字了，所以我称它为矩阵模式。客户的数据源/委托在黑暗中，在一个盒子里，不知道它不在“真实”世界中。

我怀疑您需要为 UITableviewDataSource 和 UITableViewDelegate 实现类以使这项工作顺利进行。

# java - Java示例中的单例是不合逻辑的

> ID：12520413
> 
> 赞同：1
> 
> 时间：2012-09-20T20:26:50.913
> 
> 标签：java, singleton

这是一个例子：

[http://www.tutorialspoint.com/java/java_using_singleton.htm](http://www.tutorialspoint.com/java/java_using_singleton.htm)

在查看第一个示例时，当用户编写 : 时`Singleton.getInstance()`，它会调用 :

`new Singleton()`

我不明白，当它每次创建一个新的单例对象时，它是如何单例的？

我理解第二个例子。如果`singleton`为null，则创建新对象，但在第一个示例中，它总是创建新对象？？

那是怎么回事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T20:28:46.873

不，在第一个示例中，唯一的调用`new Singleton()`是在这里（在 内`Singleton`）：

```
private static Singleton singleton = new Singleton( ); 
```

那是一个*静态*变量初始化器。它执行*一次*，并且仅在需要时执行。（如果你从不接触这个`Singleton`类，初始化器就不会被执行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:00:18.977

在第二个例子中，正如有人提到的，它不是线程安全的。以下是使 getInstance() 方法线程安全的两个选项：

```
 public static synchronized Singleton getInstance() {
     if (singleton == null) {
         singleton = new Singleton();
     }
     return singleton;
 }

 public static Singleton getInstance() {
     if (singleton == null) {
         synchronized(Singleton.class) {
             if (singleton == null) {
                 singleton = new Singleton();
             }
         }
     }
     return singleton;
 } 
```

该方法的第二个版本允许您在没有任何同步开销的情况下获取已经构建的单例实例。但是，当它为空时，您将输入一个同步块。您再次检查 null 以防万一发生线程上下文切换，并且第二个线程实际上在您之前进入了同步块。这样可以确保只构建一个实例。

任何一种方法都应该是完全线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:29:15.483

仅在`new Singleton()`加载类时才被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:29:38.823

该成员`singleton`被声明为静态的，因此`new Singleton()`只被调用一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T20:35:19.910

该行：

```
private static Singleton singleton = new Singleton( ); 
```

仅在加载类时执行一次——它是一个类字段初始值设定项。

看看这个问题：[最佳实践：在构造函数或声明时初始化类字段？](https://stackoverflow.com/questions/24551/best-practice-initialize-class-fields-in-constructor-or-at-declaration)- 与那个问题中的想法相同`new Random()`。

编辑：我突然进入 Stack Overflow 一会儿，看看我是否可以回答一个未回答的问题，在我提交回复之前，看起来其他三个人已经回答了它。我喜欢堆栈溢出！

# wcf-data-services - 更新在 wcf 数据服务工具包中不起作用

> ID：12520415
> 
> 赞同：0
> 
> 时间：2012-09-20T20:26:58.373
> 
> 标签：wcf-data-services, odata

我正在使用“wcf 数据服务工具包”进行 CURD 操作。获取/添加/删除工作正常，但更新失败。

在更新的情况下，我看到“GetOne()”方法被调用，但 Save() 没有被调用。

服务代码：

```
public class UserService : ODataService<UserContext>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("*", EntitySetRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }
} 
```

存储库代码：

```
public User GetOne(string id)
{
    return _session.Query<User>().Where(a => a.Id == int.Parse(id)).SingleOrDefault();
}
public void Save(User u)
{
    _session.Store(u);
    _session.SaveChanges();
} 
```

数据上下文代码：

```
public class UserContext : ODataContext
{
    public IQueryable<User> Users
    {
        get { return base.CreateQuery<User>(); }
    }

    public override object RepositoryFor(string fullTypeName)
    {
        return new UserRepository();
    }
} 
```

型号代码：

```
[DataServiceKey("Id")]
public class User
{
    public int Id { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string UserEmailAddress { get; set; }
} 
```

这是我的测试用例：

```
[TestMethod]
public void TestUpdateUser()
{
    var context = new UserService.UserContext(new Uri("http://localhost:59050/UserService.svc"));
    var user = context.Users.Where(a => a.Id == 385).SingleOrDefault();
    user.UserEmailAddress = "updated@email.com";
    context.UpdateObject(user);
    context.SaveChanges();  

    var context2 = new UserService.UserContext(new Uri("http://localhost:59050/UserService.svc"));
    var updated = context.Users.Where(a => a.Id == 385).SingleOrDefault();
    Assert.AreEqual("updated@email.com", updated.UserEmailAddress)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:27:02.797

如果您使用的是 WCF Dataservice 工具包，则需要为您的服务实现 ODataService。

ODataService 继承自 DataService 并为您提供我猜您正在尝试实现的自定义。

我会冒险猜测您使用 ODataService 时遇到的问题实际上在于您要公开的实体。

该工具包对如何设置课程有点挑剔。

确保您已在 User 类上指定以下内容

```
[DataServiceKey("Id")] 
```

其中 Id 是实体的键。

此外，任何对象/集合都应该被初始化，如果它是一个外来属性，那么用属性标记它。

```
[ForeignProperty()] 
```

我还将在服务上设置日志记录，这将帮助您进一步调试问题

```
<system.serviceModel>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="10000" maxSizeOfMessageToLog="99140000" />
    </diagnostics>
</system.serviceModel>

<system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information,ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="Log" />
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="MessageLog" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="Log" initializeData="{path to log}" type="{wcf listener}" />
      <add name="MessageLog" initializeData="{path to log}" type="{wcf listener}" />
    </sharedListeners>
    <trace autoflush="true" />

  </system.diagnostics> 
```

希望有些帮助

# sharepoint-2010 - 如何在 Sharepoint 2010 中为每个讨论板设置警报？

> ID：12520416
> 
> 赞同：0
> 
> 时间：2012-09-20T20:27:00.663
> 
> 标签：sharepoint-2010

在 Sharepoint 2010 站点中，我有一个讨论板列表。现在，每个讨论板可能有不同的参与者。如何设置特定于每个讨论板而不是整个列表的警报？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T17:41:51.650

1.  打开讨论区主页并单击菜单栏中的“列表”菜单项。
2.  接下来单击“提醒我”按钮以自定义您的提醒选项。在这里，您可以添加要提醒的联系人、通知类型、频率等。

# jquery - 如果选中了 MAX，则 jquery 禁用无线电组

> ID：12520418
> 
> 赞同：0
> 
> 时间：2012-09-20T20:27:06.700
> 
> 标签：jquery, html

如果检查了 MAX 值，如何禁用一组单选按钮？在我的示例中，我希望允许检查 MAX 的 2 个单选按钮，并在检查 2 个时禁用其余的。

```
<script type="text/javascript">
    $(document).ready(function()
    {
        var MAX=2;              
    });
</script>

<form>
<div>
<ul>
    <li><input type="radio" class="rbutton"  name="radio[]" value="1" /></li>
    <li><input type="radio" class="rbutton"  name="radio[]" value="2" /></li>
    <li><input type="radio" class="rbutton"  name="radio[]" value="3"/></li>
    <li><input type="radio" class="rbutton"  name="radio[]" value="4" /></li>
</ul>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:45:56.617

您应该改用复选框

HTML

```
<ul>
    <li><input type="checkbox" class="rbutton"  name="radio[]" value="1" /></li>
    <li><input type="checkbox" class="rbutton"  name="radio[]" value="2" /></li>
    <li><input type="checkbox" class="rbutton"  name="radio[]" value="3"/></li>
    <li><input type="checkbox" class="rbutton"  name="radio[]" value="4" /></li>
</ul>​ 
```

脚本

```
$(function() {
    var $inputs = $('input.rbutton');
    $inputs.change(function() {
        if ($('input.rbutton:checked').length == 2) {
            $inputs.not(':checked').prop('disabled', true);
        } else {
            $inputs.prop('disabled', false);
        }
    });
});​ 
```

[http://jsfiddle.net/D2QgX/](http://jsfiddle.net/D2QgX/)

实际上这里是你如何在没有 if/else 语句的情况下做到这一点

```
$(function() {
    var $inputs = $('input.rbutton');
    $inputs.change(function() {       
           $inputs.not(':checked').prop('disabled', $('input.rbutton:checked').length == 2);       
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:45:17.627

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/sMz97/1/)**

```
var MAX = 2;
$('input.rbutton').click(function() {
    ($('input.rbutton:checked').length == MAX) ? $('input.rbutton').not(':checked').attr('disabled',true):$('input.rbutton').not(':checked').attr('disabled',false);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:40:47.803

确保将类型更改为`type="checkbox"`要禁用按钮，只需将 disabled 属性添加到元素。这段代码可以解决问题。

```
MAX = 2;

$('.rbutton').click(function(){
  var checked = [];
  $('.rbutton').each(function(){
    $(this).removeAttr('disabled');
    if($(this).is(':checked'))
      checked.push(this);
    });
  if(checked.length == MAX)
    $('.rbutton').each(function(){
      if($.inArray(this, checked) == -1)
          $(this).attr({disabled:'disabled'});
      });
});​ 
```

任何时候选中一个复选框，它都会计算所有选中的复选框，如果该计数等于最大值，它将禁用所有复选框。它还允许您取消选中并重新启用它们。[看到它在这里工作。](http://jsfiddle.net/mydGf/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:34:55.950

您将需要复选框，而不是单选按钮。但是，一旦您拥有名为“checkbox[]”的复选框，这应该会有所帮助：

```
var $inputs = $('form input[type="checkbox"][name="checkbox\\[\\]"]');
$inputs.click(function()
{
    if ($inputs.filter('*:checked').length >= MAX)
    {   $inputs.attr('disabled','disabled'); }
    else
    {   $inputs.removeAttr('disabled');      }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T20:37:59.143

提供相同的名称实际上会搞砸它，因为您不能选择多个具有相同名称的单选按钮..尝试为您的单选按钮提供不同的名称..或者完全使用复选框..

```
 <li><input type="radio" class="rbutton"  name="radio[1]" value="1" /></li>
    <li><input type="radio" class="rbutton"  name="radio[2]" value="2" /></li>
    <li><input type="radio" class="rbutton"  name="radio[3]" value="3"/></li>
    <li><input type="radio" class="rbutton"  name="radio[4]" value="4" /></li> 
```

# size - fpdf 打印前文本的大小

> ID：12520420
> 
> 赞同：2
> 
> 时间：2012-09-20T20:27:16.030
> 
> 标签：size, footer, fpdf

您好，我正在使用 FPDF，我需要帮助。我需要在发票底部打印新闻，问题是，我需要先知道新闻（文本）的大小（因为人们可以选择哪些新闻会出现在发票中），然后将新闻放到发票上，但靠近底部/页脚...

我的想法是获取文本的大小并保存在 $theSizeOfNew 中，然后使用：

```
//move pointer to the bottom of the page 
$this->SetY(-$theSizeOfNew); 
```

然后打印新闻。

如何在打印前获得新闻的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T11:25:24.030

我不确定您所说的“新”是什么意思。据我了解，您的问题是计算必须到达页面底部的字符串的大小。正确的？

有一种方法`GetStringWidth(string s)`可以为您提供字符串的宽度。这可以帮助您计算它是否比页面的宽度更宽，并且您可以找出字符串必须占用多少行以及您必须多久从 y 值中减去行高（底部页）。

最后，用于`MultiCell(float w, float h, string txt [, mixed border [, string align [, boolean fill]]])`添加字符串。

[http://www.fpdf.org/](http://www.fpdf.org/)上的手册页将为您提供有关这些方法的更多信息。

PS：我认为，“获取”和“新闻”标签具有误导性。

# css - 如何让文本换行以不使用 CSS 开箱即用？

> ID：12520423
> 
> 赞同：1
> 
> 时间：2012-09-20T20:27:20.803
> 
> 标签：css, html

我有这样的 HTML 元素：

```
<li class="store-display-item">
    <div class="store-display-item">
        <img class="store-display-image" src="/Images/ToughBook.jpg">
        <p>QuickTrav Carbon Footprint</p>
    </div>
</li> 
```

风格是这样的：

```
.store-display-item
{
    display: inline;
    width: 100px;
    max-width: 100px;
    word-wrap: break-word;
    margin-right: 10px;
}

.store-display-image
{
    max-width: 100px;
    max-height: 70px;
} 
```

然而`<p>QuickTrav Carbon Footprint</p>`渲染接近 140 像素，导致我预期的相邻块流到下一行。如何让文本换行并且不超过其容器的最大宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:18:41.370

试试这个

```
.store-display-item p {
    width:100px;
    word-wrap:break-word;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
} 
```

希望它能解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:33:32.160

该内联导致它。从内部 div 中删除类，并添加以下内容：

```
.store-display-item div { width: 100px; }

<li class="store-display-item">
    <div>
        <img class="store-display-image" src="/Images/ToughBook.jpg">
        <p>QuickTrav Carbon Footprint</p>
    </div>
</li>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:31:33.560

Chris Carew 和 Mani 都是对的。是 display: inline 导致了你的宽度问题（内联元素忽略了 width 属性，如 Pumbaa80 所述）。如果你想保持 li 的内联行为，你的 css 应该是这样的：

```
.store-display-item
{
    width: 100px;
    max-width: 100px;
    word-wrap: break-word;
    margin-right: 10px;
}

li.store-display-item {
    display: inline-block;        
}

.store-display-image
{
    max-width: 100px;
    max-height: 70px;
}​ 
```

显示：内联块；将保持 li 的宽度不变（其计算宽度为 0，显示：内联）。

进一步阅读：

[http://www.webdesignfromscratch.com/html-css/css-block-and-inline/](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)

[http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-20T20:35:08.700

我认为这是因为您的 html 不正确，您没有以 /> 结束 img 试试这个

```
<li class="store-display-item">
    <div class="store-display-item">
        <img class="store-display-image" src="/Images/ToughBook.jpg" />
        <p>QuickTrav Carbon Footprint</p>
    </div>
</li> 
```

# android - 从 Kindle 上的 AIR 应用程序启动原生 Android 应用程序

> ID：12520426
> 
> 赞同：1
> 
> 时间：2012-09-20T20:27:31.910
> 
> 标签：android, android-intent, air, adobe, navigatetourl

我有一组在 Kindle Fire 上运行的应用程序：一个用 Java 编写的主应用程序，其他应用程序是用 Flash (AS3) 编写的 AIR。通过意图机制，我能够从主应用程序启动 AIR 应用程序。当用户单击特定按钮时，我希望 AIR 应用程序返回到主应用程序。

强制要求它必须在 Kindle Fire 上运行，而且我已经确定 Kindle Fire 不会运行 AIR 3.0 版或更高版本。这排除了一个有希望的链接，该链接表明 AIR 在 3.0 中支持意图，但在早期版本中不支持。

目前，我一直在玩`navigateToURL(new URLRequest( < app url > ))`，但这会导致安全沙箱错误，而且我读过的许多网站都表明没有办法让它工作。

那么，有没有办法让我的 AIR 应用程序调用原生 Android 应用程序？您能提供的任何见解将不胜感激。谢谢你。

# ios - 如果有的话，配套应用程序如何生成带有不同徽标和徽标文本的通行证？

> ID：12520427
> 
> 赞同：3
> 
> 时间：2012-09-20T20:27:32.070
> 
> 标签：ios, ios6, passbook

我正在开发一个应用程序，它将为不同的商店（例如公司 A、公司 B、公司 C 等）分发优惠券通行证。由于通行证将用于不同的商店/公司，因此理想情况下，每个通行证都将使用各自商店的徽标和徽标文本，而不是我的应用程序的徽标和徽标文本。

**如果有的话，我的应用程序如何分发带有不同徽标和徽标文本的通行证？**

另外，我可以通过应用程序分发多少个不同的通行证是否有限制？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:16:08.953

The logo and text used on a Passbook pass are not related to the certificate supplied by Apple used to sign the pass, or the `passTypeIdentifier` registered with Apple. For each different company, just use a different `logo.png`, `icon.png`, `logo@2x.png`, and so forth.

The only parts of the coupon visible to the user are specified in the content of the pass as you create it.

We've used a single Passbook type for order statuses for a white-label tee shirt website, and the appropriate label branding is inserted depending on which site the product was ordered through.

You could also use localization, although it would be a slight abuse of the feature. Each company could have a different `.lproj` with their own strings and images. Check the PassKit Programming Guide ("Localizing a Pass" section) for details.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:22:47.067

您的通行证不应在应用程序本身内生成，而应在服务器上生成然后下载到应用程序（或直接下载到 Passbook，然后从应用程序访问）。

这是因为为了在设备上生成和签署通行证，passTypeIdentifier 证书和私钥需要嵌入到应用程序中，这会带来安全风险。

[此应用程序](http://lowrxcard.com)使用第三方[Pass Creation 服务](http://create.passkit.com)从设备生成 Pass，然后通过 API 将其拉入。使用此服务，您理论上可以使用任意数量的通行证设计和生成任意数量的通行证，前提是您已授予您的应用访问每个证书的权限。

我看不出@gid 建议的本地化黑客如何不起作用，因为 .lproj 内容只会在用户的设备区域设置与 .lproj 区域设置匹配时覆盖通行证默认值。

免责声明：我与人共同创立了 PassKit，但是需要生成和签署设备传递（并展示可以完成的示例）是我想在这个答案中表达的要点

# c# - 如何创建自己的模型并将它们映射到桌子上

> ID：12520428
> 
> 赞同：0
> 
> 时间：2012-09-20T20:27:34.970
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2012

我已经从我的数据库中创建了图表。我刚刚通过 Visual Studio 连接到我的数据库并创建了 .edmx 模型。比我自动生成的上下文，所以我有我的数据模型的类。

自动生成工作正常。但是我可以（如果可以的话）手动创建文件并将它们映射到表上，这样当我使用 linq 查询我的数据库时，我的应用程序将根据行自动创建对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:50:45.287

您正在寻找的内容被称为`code first`，您可以[在此处获得介绍](http://msdn.microsoft.com/en-us/data/jj200620)。

# jakarta-ee - 从其他方法抛出异常后，EJB 计时器停止

> ID：12520431
> 
> 赞同：0
> 
> 时间：2012-09-20T20:27:54.640
> 
> 标签：jakarta-ee, timer, ejb

我了解如果计时器遇到异常，它将停止运行。但这是我的代码：

```
@Startup
@Singleton
public class TimerBean
{
    private HashMap myMap;    

    @EJB
    private MyBean myBean;

    @Schedule (minute="*/1" ....)
    public void myTimer()
    {  
       myMap.clear();
       myMap = myBean.createData(); //this takes a few seconds to finish

    }
...
} 
```

因此计时器每 1 分钟触发一次，并调用 myBean 从数据库中获取数据并填充哈希图。

现在在另一个类中，客户端调用 restFul Web 服务来获取哈希图，代码如下：

```
@EJB
private TimerBean timerBean;

@GET
@Path("query")
@Produces(MediaType.APPLICATION_JSON)
public MyObject getData()
{
    timerBean.getMyMap(); //call timerBean to get the hashmap
    //in case the hashmap returned is empty, meaning it's not ready yet
     //(it's still in the process of populating)
     //throw an WebApplicationException 
    //so that from the user's end, I can show a different web page
    //and ask the user to wait.

} 
```

发生的情况是，有时，当它抛出异常时，它也会导致计时器再次停止工作。为什么？计时器 itelt 没有遇到任何异常。

我意识到潜在的问题是当用户尝试获取哈希图时，计时器可能正在填充哈希图。我应该怎么做才能防止这种情况发生？就像阻止 Web 服务调用直到它准备好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:54:54.703

我不明白为什么计时器会停止，但是您可以这样做以防止在填充地图之前调用该方法：

```
@PostConstruct
public void atStartup() {
  myMap = myBean.createData(); 
} 
```

`@Startup`保证此方法将在调用任何其他方法之前执行。

# http - OpenLayers 不加载 WFS

> ID：12520432
> 
> 赞同：1
> 
> 时间：2012-09-20T20:28:01.367
> 
> 标签：http, cross-domain, openlayers

我尝试使用 OpenLayers (v2.12) 加载 WFS 层，但不幸的是，在向我的 wfs 服务器发出 HTTP OPTIONS 请求后加载中断。FireBug 显示我的服务器发送了一个空响应。未检测到错误。在较旧的 OpenLayers 版本（v2.8）中，我在另一个应用程序中使用的是没有 OPTIONS 请求。这段旧代码发送一个纯 HTTP GET，如下所示：

```
http://myWfsServer/wfs?typename=someName&SERVICE=WFS&VERSION=1.0.0&REQUEST=GetFeature&SRS=EPSG%3A4326&BBOX=... 
```

这是当前代码

```
map = new OpenLayers.Map( 'map',{
    maxExtent:OpenLayers.Bounds.fromArray([7,47,10,49]),
    units: 'm'});

layer = new OpenLayers.Layer.OSM( "Simple OSM Map","http://myWfsServer/tiles/${z}/${x}/${y}.png");
map.addLayer(layer);
wfsLayer = new OpenLayers.Layer.Vector("WFS", {
    projection: "EPSG:4326",
    maxExtent: OpenLayers.Bounds.fromArray([7,47,10,49]),
        strategies : [new OpenLayers.Strategy.BBOX()],
        protocol : new OpenLayers.Protocol.WFS.v1_0_0({
        url : "http://myWfsServer/wfs",
        featureType : "ms:lsaId",
        featureNS : "http://mapserver.gis.umn.edu/mapserver",
    format: new OpenLayers.Format.WFST.v1_0_0({
        featureType: "ms:lsaId",
        featureNS: "http://mapserver.gis.umn.edu/mapserver"})
        })
});
map.addLayer(wfsLayer);
map.setCenter(new OpenLayers.LonLat(9,48).transform(
      new OpenLayers.Projection("EPSG:4326"),
      map.getProjectionObject()), 16); 
```

**问题 1**：有没有办法跳过这个请求并像早期的 OpenLayers 版本一样继续使用标准的 GET 请求？

**问题 2**：OpenLayers 期望什么响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:50:53.073

问题解决了。OPTIONS 请求来自浏览器而不是来自 OpenLayers。原因是 WFS 服务器不是服务器提供我的 Web 应用程序。这个请求与允许跨域访问有关。

问题1：让应用程序主机提供WFS数据。例如，将 Apache 配置为原始 WFS 的代理。

问题2：没有想法:-D

# javascript - 使用响应式设计时，呈现适合其容器的最大广告位的最佳方式是什么？

> ID：12520435
> 
> 赞同：12
> 
> 时间：2012-09-20T20:28:04.970
> 
> 标签：javascript, jquery, adsense

我希望将 Google AdSense 广告融入[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)（特别是使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#responsive)）。

挑战在于，通过响应式设计，容器的宽度可能会根据浏览器窗口的宽度而变化。虽然这是响应式设计的主要优势之一，但很难适应固定宽度的内容，例如广告。例如，对于使用至少 1200 像素宽的浏览器查看页面的用户，给定的容器可能是 300 像素宽。但是在一个 768px 宽的浏览器窗口中，同一个容器可能只有 180px 宽。

我正在寻找 JavaScript (jQuery?) 解决方案来加载适合容器宽度的最大广告格式。

假设我有以下广告位（广告格式）：

```
name      width x height   slot_id
slot_180    180 x 160      1234567890
slot_250    250 x 250      2345678901
slot_300    300 x 250      3456789012
slot_336    336 x 280      4567890123
slot_728    728 x  90      5678901234 
```

这是我需要包含的脚本：

```
<script type="text/javascript"><!--
    google_ad_client   =  "ca-ABCDEFGH";
    google_ad_slot     =  "[###slot_id###]";
    google_ad_width    =   [###width###];
    google_ad_height   =   [###height###];
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>'; 
```

这是一些示例html：

```
<body>
    <div class="row">
        <div class="span3"><p>Lorem ipsum</p></div>
        <div class="span3" id="adSlot1"><!-- [### INSERT AD 1 HERE ###] --></div>
        <div class="span3"><p>Lorem ipsum</p></div>
        <div class="span3"><p>Lorem ipsum</p></div>
    </div>
    <div class="row">
        <div class="span4" id="adSlot2"><!-- [### INSERT AD 2 HERE ###] --></div>
        <div class="span4"><p>Lorem ipsum</p></div>
        <div class="span4" id="adSlot3"><!-- [### INSERT AD 3 HERE ###] --></div>
    </div>
</body> 
```

我想显示适合给定容器的最大广告位。

例如：

如果#adSlot1 是 300 像素宽，让我们显示`slot_300`（或者更确切地说是 id:`3456789012`及其在 AdSense JavaScript 中的宽度和高度）。

现在假设您在另一台设备上查看页面，#adSlot1 现在是 480 像素宽。现在让我们使用`slot_336`. 1000px 宽的元素？使用`slot_728`. 得到它？

请注意，渲染所有不同的插槽并且仅`.show()`/`.hide()`取决于宽度是违反 Google 的 TOS 的。相反，如果调用了广告 JavaScript，则它必须在页面上可见。（想象一下，如果将隐藏广告计入展示次数，这将如何搞砸每个人的报告！）

我也不太关心人们在浏览页面时会拉伸和缩小浏览器窗口。但是，如果对此有精明的答案，则可以加分。在那之前，这可以在每个页面加载时加载一次。

你认为最好、最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T20:34:01.083

AdSense 不支持可变宽度（我不知道），但您可以使用 JavaScript 根据实际容器大小提供不同的大小。

看看这个：

[http://james.cridland.net/code/dynamic_google_adsense.html](http://james.cridland.net/code/dynamic_google_adsense.html)

**编辑**

如果您解释了如何使用上述链接中的示例，将会很有帮助。

这是一个更详细的示例，作为理论上应该可以工作的 jQuery 插件。

```
var google_ad_slot, google_ad_width, google_ad_height;
(function( $ ){
    $.fn.google_ads = function(slots) {
        /* Sort slots by width descending */
        slots.sort(function(a, b){
            var a1 = a[0], b1 = b[0];
            if(a1 == b1) return 0;
            return a1 > b1? -1: 1;
        });
        return this.each(function(){
            /* Get slot container width */
            var width = $(this).width();

            /* Find fitting slot */
            var slot = null;
            $.each(slots, function(){
                slot = this;
                if(width >= slot[0]){
                    return false;
                }
            });

            if( slot !== null ){
                /* Set global variables for external script */
                google_ad_slot = slot[2];
                google_ad_width = slot[0];
                google_ad_height = slot[1];

                /* Append script to slot container */
                var script_el = $('<script>', {
                    'type': 'text/javascript',
                    'src': 'http://pagead2.googlesyndication.com/pagead/show_ads.js'
                }).on('load', function() {
                    /* May need to wait with next slot until script is loaded */
                    console.log('loaded');
                });
                $(this).append(script_el);
            }

        });
    };
})( jQuery ); 
```

示例用法[宽度、高度、插槽]

```
<h2>Slot 1</h2>
<div id="slot-1" class="slot" style="width:300px;"></div>
<h2>Slot 2</h2>
<div id="slot-2" class="slot" style="width:400px;"></div>
<script type="text/javascript">

var google_ad_client = "ca-pub-527527527527527";
$('.slot').google_ads([
    [180, 160, 1234567890],
    [250, 250, 2345678901],
    [300, 250, 3456789012],
    [336, 280, 4567890123],
    [728, 90, 5678901234]
]);

</script> 
```

一种更有可能（也更丑陋）的成功方式是：

```
<script type="text/javascript">
var get_google_ad_params = function(width, slots){

    /* Sort slots by width descending */
    slots.sort(function(a, b){
        var a1 = a[0], b1 = b[0];
        if(a1 == b1) return 0;
        return a1 > b1? -1: 1;
    });

    /* Find fitting slot */
    var slot = null;
    $.each(slots, function(){
        slot = this;
        if(width >= slot[0]){
            return false;
        }
    });
    return slot;
};

var slots = [
    [180, 160, 1234567890],
    [250, 250, 2345678901],
    [300, 250, 3456789012],
    [336, 280, 4567890123],
    [728, 90, 5678901234]
];
</script>

<h2>Slot 1</h2>
<div id="slot-1" class="slot" style="width:300px;">
    <script type="text/javascript">
    var params = get_google_ad_params($('#slot-1').width(), slots);
    var google_ad_slot = params[2];
    var google_ad_width = params[0];
    var google_ad_height = params[1];
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
<h2>Slot 2</h2>
<div id="slot-2" class="slot" style="width:400px;">
    <script type="text/javascript">
    var params = get_google_ad_params($('#slot-2').width(), slots);
    var google_ad_slot = params[2];
    var google_ad_width = params[0];
    var google_ad_height = params[1];
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T23:35:12.137

这可能看起来有点初级，特别是与 Sunn0 的答案相比，但是像这样简单的事情呢？

```
function findAd(){
$('.adSlot').each(function(){
    var adSlotWidth = $(this).width();
    if(adSlotWidth >= 728){
        $(this).html(/* GOOGLE AD */);  
    } else if(adSlotWidth >= 336 && adSlotWidth <= 727){
        $(this).html(/* GOOGLE AD */);
    } else if(adSlotWidth >= 300 && adSlotWidth <= 335){
        $(this).html(/* GOOGLE AD */);
    } else if(adSlotWidth >= 250 && adSlotWidth <= 299){
        $(this).html(/* GOOGLE AD */);
    } else{
        $(this).html(/* GOOGLE AD */);
    }
});
}

$(document).ready(function(){

    findAd();
    $(window).resize(function(){
        findAd();   
    });

}); 
```

编辑以包含代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:40:25.747

您应该能够在调整窗口大小时调用 sunn0 的插件，并使其也可以响应。不过，您应该考虑限制调整大小事件。这是一篇很好的文章。

[http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)

# android - 通过互联网（不是 LAN）的 Android TCP 通信。

> ID：12520437
> 
> 赞同：2
> 
> 时间：2012-09-20T20:28:14.417
> 
> 标签：android, sockets, tcp, android-emulator, router

我正在创建一个应用程序来`mobiles`使用 TCP 套接字通过互联网在两个 android 之间建立通信。因此，我将主要使用两者的 ip 地址`mobiles`和我喜欢的应用程序端口号。

**这可能吗？创建自定义 TCP 端口并像在 LAN 中一样通过 Internet 进行通信？**

到目前为止，我能够成功地在 LAN 中的两个仿真器之间进行通信。但是在 emultors 的情况下，不可能通过互联网做同样的事情，因为主机通常`behind a router`只允许数据到端口`8080`，或者`80`我不确定。当然有可以完成的端口转发，但我不想弄脏它。
那么，
**局域网中的模拟器连接是否保证`mobile`互联网中的连接？**因为`mobile with direct net connectivity`只有一个 IP 地址（没有私有和外部 IP）并且没有路由器来阻止流量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:53:31.280

你听说过打孔技术吗？阅读此内容-也许会有所帮助。[我认为这是 Skype 的工作方式。该技术需要另一个通信](http://en.wikipedia.org/wiki/UDP_hole_punching)节点 - 一个可供两个客户端访问的服务器，即使其中一个客户端位于 NAT 之后，它也有助于在两个客户端之间建立直接连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:43:23.857

我 99.8% 确信您将无法在移动网络上执行此操作。如果我没记错的话，每个蜂窝塔都有自己的 IP，连接到它的每个设备都有一个私有的内部 IP。但是，我相信你可以让它在 Wifi 上工作。

# haskell - 构造函数通配符上的模式匹配？

> ID：12520438
> 
> 赞同：0
> 
> 时间：2012-09-20T20:28:23.410
> 
> 标签：haskell, pattern-matching

如果我有一个构造函数，它是：

```
data Garage = Gar String 
```

如果我想测试一个类型是否等于我的车库类型，我会这样做：

```
(==(Gar _)) (Gar "g") 
```

但是，编译器抱怨下划线。如果我用它替换`"g"`它返回`True`. 有没有办法可以与通配符进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:44:51.290

**为什么你的代码不起作用？**

看起来您想要进行模式匹配，但实际上您正在`==`使用参数`Gar _`和`Gar "g"`. 因此 Haskell 感到困惑并说出类似“表达式上下文中的模式语法：_”之类的话。

**如何修复？**

你可以：

1.  添加`deriving Eq`到数据声明的末尾，或

2.  自己实现`Eq`：

    ```
    instance Eq Garage where
        (Gar l) == (Gar r) = l == r 
    ```

**是否可以对构造函数通配符进行模式匹配？**（为了完整性）

是的，这是一个废话功能：

```
f :: Garage -> Int
f (Gar "abc") = 12
f (Gar _) = 4 
```

不过，这对于具有多个构造函数的数据类型可能会更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:33:01.500

你想做模式匹配，像这样：

```
case x of
   Gar _ -> True
   _     -> False 
```

如果你想要它作为函数，然后添加类似的东西

```
isGarage (Gar _) = True
isGarage _       = False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:23:34.860

也许您的问题假设您需要在 Haskell 中进行运行时类型检查，但这不是必需的。`Garage`Haskell 将确保您的所有类型在编译时都是正确的，因此不需要检查数据是否属于您的数据类型的函数，并且该函数不起作用：

```
justPrintGarages (Gar x) = print x -- if the argument is a Garage, print its content
justPrintGarages _ = return ()     -- if it's anything else, do nothing. 
```

如果我们问 ghci 有什么类型`justPrintGarages`，它会告诉我们

```
printGarages :: Garage -> IO () 
```

哎呀！我们应该告诉我们是否有车库的功能只适用于车库？？？是的。那是因为 Haskell 故意阻止你混合类型，因为它是运行时错误的泥潭。静态类型是你的朋友。静态类型带走了一个痛苦的世界。因为静态类型，你不能定义

```
printGaragesAndShebangs (Gar x) = print x
printGaragesAndShebangs ('#':'!':xs) = putStr xs
printGaragesAndShebangs _ = return () 
```

你会得到一个类型错误。你不能只是对待`String`s 和`Garage`s 一样。

如果你想混合车库和字符串，这里是这样做的方法，保持类型安全：

```
data GarageStringInt = GsiG Garage | GsiS String | GsiI Int 
```

（`GarageStringInt`这是一个可怕的名字，`GisG`等等，但如果你在你的代码中需要这个，它会代表一些明智的东西（我希望），你可以给它一个描述它代表什么的名字。）

现在我们可以写

```
printGaragesAndShebangs :: GarageStringInt -> IO ()
printGaragesAndShebangs (GsiG (Gar x)) = print x
printGaragesAndShebangs (GsiS ('#':'!':xs)) = putStr xs
printGaragesAndShebangs _ = return () 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:48:19.357

像这样的功能

```
isGarage (Gar _) = True
isGarage _       = False 
```

非常没用，因为它有 type `Garage -> Bool`。所以它总是会返回类型`True`，`Garage`并且任何其他类型都会发生类型检查失败。

我认为模式匹配足以满足您的要求。但只是为了表明如果你知道你将要作用的类型，你可以使用类型类来拥有这种功能。因此，如果您知道您将从给定的一组类型中获取值，那么您可以执行类似的操作

```
{-# LANGUAGE FlexibleInstances #-}
data Garage = Gar String

class IsGarage a where
    isGarage :: a -> Bool
    isGarage _ = False

instance IsGarage Garage where
    isGarage _ = True

instance IsGarage [Char] 
```

在 ghci

```
*Main> :t isGarage 
isGarage :: IsGarage a => a -> Bool
*Main> isGarage "3"
False
*Main> isGarage (Gar "2")
True 
```

# java-me - Java无线工具包与Net beans 7.2

> ID：12520446
> 
> 赞同：2
> 
> 时间：2012-09-20T20:28:50.033
> 
> 标签：java-me, netbeans-7, java-wireless-toolkit

我正在使用 Java ME 开发移动应用程序，并想知道使用 Java Wireless Toolkit 和 Netbeans 之间的区别。

据我所知，它们都用于通过 Java ME 开发移动应用程序，
哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:30:28.213

Netbeans 不仅是 JAVA ME 应用程序的 IDE，它还支持许多其他编程语言。虽然 Wireless-Toolkit 仅用于 Java ME 开发目的。

但是，即使您使用的是 NetBeans，您也必须安装 Wireless-tool kit 才能使用来自 Netbeans 的 Java ME Emulator。

Netbeans 提供了自动编译和语法高亮功能，而 Wireless-tool kit 没有这些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:11:04.713

我个人的偏好是：
。WTK 2.5.2
。蚂蚁
。天线
。保卫
。日食 JDT

但我不使用 LWUIT 也不使用波兰语。

# java - Spring表单标签在jsp页面中抛出错误

> ID：12520447
> 
> 赞同：0
> 
> 时间：2012-09-20T20:29:02.800
> 
> 标签：java, spring, spring-mvc

我是 spring mvc 的新手，并且很努力地使用 spring 表单标签来实现表单。在没有什么帮助的情况下，我得到了从[这里工作的弹簧标签库](https://stackoverflow.com/questions/12516801/spring-form-taglib-is-not-working#comment16851432_12516801)

我现在遇到的问题有点奇怪，我不明白。

```
 <form:form>
     <table id="<portlet:namespace />AddEquipmentTable" cellpadding="3">
      <tr><td colspan="2"><label class="required">
           <fmt:message key="requiredFieldsTxt" /></label></td>
      </tr>
      <tr><td><%-- <form:label path="assetIdLabel"> --%><fmt:message key="assetIdTxt" /><%-- </form:label> --%></td>
          <td><input type="text" id="assetId" name="assetId" size="30" /></td>
          <td>&nbsp;</td>
       </tr> 
        .......
        .........

     </table>
   </form:form> 
```

我已经评论了标签，因为当我取消评论时它在萤火虫中显示错误

> 语法错误：缺少；before 语句错误 500：java.lang.IllegalStateException：Bean 名称“命令”的 BindingResult 和普通目标对象都不能用作请求属性。

谁能帮我这个。我是新手，我还在尝试了解 spring mvc 的工作原理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:01:43.280

采用

```
<form:form method="POST" commandName="customerForm"> 
```

见[http://www.mkyong.com/spring-mvc/spring-mvc-neither-bindingresult-nor-plain-target-object-for-bean-name-xxx-available-as-request-attribute/](http://www.mkyong.com/spring-mvc/spring-mvc-neither-bindingresult-nor-plain-target-object-for-bean-name-xxx-available-as-request-attribute/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:58:13.347

试试下面

```
<form:form method="POST" modelAttribute="command">
</form:form> 
```

command 是必须添加到 modelandview 的对象。

# android - 是否可以将 HTML 文件加载到 Android 中的 TextView 中？

> ID：12520450
> 
> 赞同：1
> 
> 时间：2012-09-20T20:29:07.130
> 
> 标签：android, html, webview, textview

在我的应用程序中，我正在将一个 html 文档（包含：显示方程的代码、对库的引用）加载到 webview 中。

问题是加载仍然需要一些时间，而且感觉不是很流畅。我已经连接了一个进度条，让它更活泼一些。

我只是想知道，是否可以将该 html 文件加载到 textview 中？或者我可以将该html代码嵌入到文本视图中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T20:31:02.567

是的，这是可能的：

```
textView.setText(Html.fromHtml(myHTMLString)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-08T09:30:56.160

是的，有可能实现这一点，您需要从本地存储文件路径转换输入流并创建一个字符串生成器来读取输入流中的每一行 -

```
 // "string" is a your html file path
    File file = new File(string);
    try {
        FileInputStream fileInputStream = new FileInputStream(file);
        BufferedReader r = new BufferedReader(new 
        InputStreamReader(fileInputStream));
        StringBuilder strBuilder = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            strBuilder.append(line).append("\n");
        }
        //"total" is your converted html you can show this on textview
        areTextView.fromHtml(String.valueOf(strBuilder));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# xml - 始终使用 XPath 从当前节点返回元素值

> ID：12520451
> 
> 赞同：0
> 
> 时间：2012-09-20T20:29:07.840
> 
> 标签：xml, xpath, infopath

**编辑：**这个问题应该是“我如何指向上下文节点中的一个元素？” 在这种情况下，答案很简单。从拉什的回应： `"my:Line_Item_Mod_0 = 'true'"`

另外，如果这是一个非常明显的问题，请原谅我；我不知道“上下文节点”的术语，这可能就是为什么 google 和 StackOverflow 搜索没有太大帮助的原因。

阅读问题的其余部分以了解上下文。

我需要一个 XPath 表达式，它返回每个节点中的当前`Line_Item_Mod_0`值，以便有条件地格式化 MS InfoPath 表单。我对 XPath 很陌生，我不知道这种行为（由表达式显示）的适当术语是什么。这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.504" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\c37482678ae440c9\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?><?mso-infoPath-file-attachment-present?>
<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2011-05-05T19:56:08" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
<my:MasterSection>
    <my:Project_Information>
        <my:Line_Items>
            <my:Counter>1</my:Counter>
            <my:Authorized_Number>4</my:Authorized_Number>
            <my:XPathLINCounter>Line Item 1</my:XPathLINCounter>
            <my:Line_Item_Mod_0>false</my:Line_Item_Mod_0>
        </my:Line_Items>
        <my:Line_Items>
            <my:Counter>2</my:Counter>
            <my:Authorized_Number>7</my:Authorized_Number>
            <my:XPathLINCounter>Line Item 2</my:XPathLINCounter>
            <my:Line_Item_Mod_0>true</my:Line_Item_Mod_0>
        </my:Line_Items>
        <my:Line_Items>
            <my:Counter>3</my:Counter>
            <my:Authorized_Number>2</my:Authorized_Number>
            <my:XPathLINCounter>Line Item 3</my:XPathLINCounter>
            <my:Line_Item_Mod_0>false</my:Line_Item_Mod_0>
        </my:Line_Items>
    </my:Project_Information>
</my:MasterSection>
</my:myFields> 
```

我正在尝试评估当前节点的“mod”值是 1 还是 0。我已经有一个执行此操作的表达式，但由于某种原因 InfoPath 条件格式不喜欢它。`Line_Item_Mod_0`您可以在元素中看到此 mod 表达式的结果。

我需要做的就是定位每个节点中的`Line_Item_Mod_0`元素。`Line_Items`我似乎无法创建一个表达式来返回`Line_Item_Mod_0`其父节点的值（或者“当前”可能是正确的术语）。

IE节点 1 中将有一个表达式，`Line_Items`该表达式总是返回`false`.`Line_Item_Mod_0`

我意识到这应该很简单，但我似乎无法让我的表情停留在其当前节点内。

该表达式`(count(preceding-sibling::my:*) + 1) mod 2 > 0`生成`Line_Item_Mod_0`节点，但如果我将其作为规则应用，则它不能很好地处理条件格式。我说不出为什么。

我想尝试绕过它并直接评估“真”或“假”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:43:41.233

只要当前节点（上下文节点）是一个`<my:Line_Items>`元素，以下 XPath 表达式将返回其`<my:Line_Item_Mod_0>`子元素的值：

```
"my:Line_Item_Mod_0" 
```

这个 XPath 表达式实际上会选择一个元素节点；如果在字符串上下文中评估该元素节点，则其值将是其子文本节点的字符串内容，`false`或`true`. 如果您需要将其转换为布尔值，请使用

```
"my:Line_Item_Mod_0 = 'true'" 
```

但是请注意，此 XPath 表达式使用**名称空间前缀**。为了使该用法有效，您必须在 XPath 处理器的上下文中声明该名称空间前缀。您没有展示任何有关如何调用 XPath 的上下文，但如果您确实展示了这一点，我们应该能够帮助验证该部分是否正确完成。

您还多次提到“条件格式”，但没有足够的细节来做任何事情。我现在认为它不重要，但如果它很重要，请编辑您的答案以发布示例，以便我们为您提供帮助。

# javascript - jQuery .text() 问题

> ID：12520455
> 
> 赞同：0
> 
> 时间：2012-09-20T20:29:41.740
> 
> 标签：javascript, jquery, html, css

我正在学习 HTML/CSS/JS/jQuery，所以决定做一个计算器看看我是否可以。我已经完成了大部分 HTML/CSS 设计（嗯，足够基本的 CSS 以使其可用，并且 HTML 可能会发生变化），并转移到 Javascript 上。我首先要做的是使它，因此当您单击一个数字时，它会将其附加到结果文本的末尾（除非它的 0 并且结果为 0）。如果您查看我放在此问题底部的 jsFiddle 链接中的 Javascript 部分，您可以看到我尝试过的内容。我运行 JSLint 并得到以下错误，但不理解它们：

> 错误：第 4 行字符 9 处的问题：需要赋值或函数调用，但看到的是表达式。val text = $(this).text(); 第 4 行字符 12 处的问题：缺少分号。val text = $(this).text(); 隐含全局：$ 1,2,4,5,6，警报 3，val 4，文本 4,5,6

[jsFiddle 链接到正在进行中的计算器](http://jsfiddle.net/amx3m/5/)

编辑：另外，如果有人想对计算器的 HTML 提出不同的方法，请这样做（我认为当前的方法看起来很难看）。

编辑 2： val 而不是 var**已经说过。**更正我的代码后，结果仍然没有附加点击的数字。**这是现在的问题。**

编辑 3：当我进行编辑时，我发现已编辑答案以纠正此问题。 **谢谢回答！:)**

此外，[这里是工作 jsFiddle](http://jsfiddle.net/amx3m/11/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T20:31:07.857

使用`var`而不是`val`..这搞砸了..

代替

```
val text = $(this).text(); 
```

采用

```
var text = $(this).text(); 
```

你也在用这个`$('#result').text().append(text);`

您需要附加到选择器而不是文本..

```
$('#result').append(text); 
```

检查这个[更新的小提琴](http://jsfiddle.net/sushanth009/amx3m/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:31:20.617

在 JavaScript 中，您使用`var`，而不是分配变量`val`：

```
 val text = $(this).text();
    ^^^ 
```

更改`val`以`var`解决问题：http: [//jsfiddle.net/Blender/amx3m/6/](http://jsfiddle.net/Blender/amx3m/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:31:13.637

那应该是 var，而不是 val

```
var text = $(this).text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T20:33:22.127

var text = $(this).text();

不是 val

# javascript - Windows 上的 ExecJS::RuntimeError 试图遵循 ruby tutorial

> ID：12520456
> 
> 赞同：104
> 
> 时间：2012-09-20T20:29:43.503
> 
> 标签：javascript, ruby-on-rails, ruby, windows, asset-pipeline

**更新：** [Colin](https://stackoverflow.com/users/1017768/colin-r)建议删除行 //= require_tree 。已解决问题。

我浪费了 2 天多的时间来尝试遵循那里的每一个建议并解决我的问题。我正在尝试遵循 Windows 机器上的[http://ruby.railstutorial.org](http://ruby.railstutorial.org)书籍，但我终生无法克服以下令人讨厌的错误。

```
ExecJS::RuntimeError in Static_pages#home

Showing C:/Users/.../bootcamp-sample-app/app/views/layouts/application.html.erb where line #6 raised:

["ok","(function() {\n\n\n\n}).call(this);\n"]
(in C:/Users/.../bootcamp-sample-app/app/assets/javascripts/sessions.js.coffee)
Extracted source (around line #6):

3: <head>
4:   <title><%= full_title(yield(:title)) %></title>
5:   <%= stylesheet_link_tag    "application", media: "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8:   <%= render 'layouts/shim' %>
9: </head>
Rails.root: C:/Users/.../bootcamp-sample-app

Application Trace | Framework Trace | Full Trace
app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___487732698_30422172'
Request 
```

我已经尝试了所有建议，包括使用 msi 安装 nodejs、使用 execjs 1.3.0 以及其他我什至不记得的东西。这是**gem文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard-cucumber'
end

group :development do
  gem 'annotate', '2.5.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'coffee-script'
  gem 'uglifier'
end

gem 'jquery-rails', '2.0.2'

gem 'execjs'

# Gems on Linus/Mac
#gem 'therubyracer'

group :test do
  gem 'capybara', '1.1.2'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'factory_girl_rails', '1.4.0'
  gem 'cucumber-rails', '1.2.1', require: false
  gem 'database_cleaner', '0.7.0'

# Test gems on Linux
#  gem 'rb-inotify', '0.8.8'
#  gem 'libnotify', '0.5.9'

# Test gems on Macintosh OS X
#  gem 'selenium-webdriver', '~> 2.22.0'
#  gem 'rb-fsevent', '0.9.1', :require => false
#  gem 'growl', '1.0.3'

# Test gems on Windows
# gem 'rb-fchange', '0.0.5'
# gem 'rb-notifu', '0.0.4'
# gem 'win32console', '1.3.0'
end

group :production do
#  gem 'therubyracer'
  gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
#gem 'debugger'' 
```

这是**session.js.coffee**

```
# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/ 
```

**应用程序.js**

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require bootstrap 
```

**应用程序.html.erb**

```
<!DOCTYPE html>
 <html>
 <head>
   <title><%= full_title(yield(:title)) %></title>
   <%= stylesheet_link_tag    "application", media: "all" %>
   <%= javascript_include_tag "application" %>
   <%= csrf_meta_tags %>
   <%= render 'layouts/shim' %>
 </head>
 <body>
 <%= render 'layouts/header' %>
 <div class="container">
   <%= yield %>
   <%= render 'layouts/footer' %>
 </div>
 </body>
 </html> 
```

这是**控制台内容**

```
Processing by StaticPagesController#home as HTML
  Rendered static_pages/home.html.erb within layouts/application (45.0ms)
Completed 500 Internal Server Error in 1136ms

ActionView::Template::Error (["ok","(function() {\n\n\n\n}).call(this);\n"]
  (in C:/Users/.../bootcamp-sample-app/app/assets/javascripts/sessions.js.coffee)):
    3: <head>
    4:   <title><%= full_title(yield(:title)) %></title>
    5:   <%= stylesheet_link_tag    "application", media: "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8:   <%= render 'layouts/shim' %>
    9: </head>
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___487732698_30422172'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (34.0ms) 
```

我已经安装了 Devkit 并尝试了各种 gem，但请提出可以帮助我在 Windows 上开发的更改。我使用 ruby​​installer 完成所有工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-01-02T08:27:21.697

几个月前，我的朋友在尝试关于 Win 8 RTM 的 Rails 教程并遇到了这个错误。不确定 Windows 7 中是否也存在此问题，但这可能会有所帮助。

**选项：**

**1）删除 `//= require_tree .`/忽略问题 -**正如 ColinR 上面所说，这条线不应该首先引起问题。ExecJS 与您系统上的 JavaScript 运行时正常工作存在实际问题，删除此行只是忽略了这一事实。

**2) 安装 Node.js / 逃跑 -** 许多人似乎只是最终安装 Node.js 并使用它，而不是他们系统上已经存在的 JavaScript 运行时。虽然这是一个有效的选项，但它还需要额外的软件，并且只能避免最初的问题，即 ExecJS 无法与系统上已有的 JavaScript 运行时一起正常工作。如果您系统上现有的 JavaScript 运行时应该工作，为什么不让它工作而不是安装更多软件呢？根据 ExecJS 创建者的说法，Windows 中已经内置的运行时实际上是受支持的......

> ExecJS 允许您从 Ruby 运行 JavaScript 代码。它会自动选择可用于评估 JavaScript 程序的最佳运行时，然后将结果作为 Ruby 对象返回给您。
> 
> ExecJS 支持这些运行时：
> 
> *   therubyracer - 嵌入在 Ruby 中的 Google V8
> *   therubyrhino - 嵌入在 JRuby 中的 Mozilla Rhino
> *   节点.js
> *   Apple JavaScriptCore - 包含在 Mac OS X 中
> *   **Microsoft Windows 脚本宿主 (JScript)**
> 
> （来自 github.com/sstephenson/execjs#execjs ）

**3) 实际解决问题/学习 -**使用选项 1 和 2 的知识来寻找其他解决方案。在实际找到有关我们遇到的根本问题的信息之前，我无法告诉您在看到选项 1 或 2 时关闭了多少网页是公认的解决方案。我们一直在寻找的唯一原因是我们无法相信 Rails 团队会 (1) 在每个引起问题的脚手架生成的项目中插入一行代码，或者 (2) 要求我们安装额外的软件来运行该默认值行代码。因此，我们最终解决了我们的根本问题（您的里程可能会有所不同）。

**对我们有用的修复：** 在有问题的系统上，找到 ExecJS 的**runtimes.rb**文件。看起来像[这样](https://github.com/sstephenson/execjs/blob/master/lib/execjs/runtimes.rb)。复制找到的文件以进行备份。打开原始 runtimes.rb 进行编辑。找到以行开头的部分`JScript = ExternalRuntime.new(`。在该部分中，包含`:command => "cscript //E:jscript //Nologo //U",`- 删除`//U`唯一的行。然后在包含的行上`:encoding => 'UTF-16LE' # CScript with //U returns UTF-16LE`- 将 UTF-16LE 更改为`UTF-8`. 保存对文件的更改。文件的这一部分现在应该是：

```
JScript = ExternalRuntime.new(
    :name        => "JScript",
    :command     => "cscript //E:jscript //Nologo",
    :runner_path => ExecJS.root + "/support/jscript_runner.js",
    :encoding    => 'UTF-8' # CScript with //U returns UTF-16LE
) 
```

接下来，停止然后重新启动 Rails 服务器并在浏览器中刷新产生原始错误的页面。希望页面现在加载没有错误。这是我们最初发布结果的 ExecJS 问题线程：[https ://github.com/sstephenson/execjs/issues/81#issuecomment-9892952](https://github.com/sstephenson/execjs/issues/81#issuecomment-9892952)

如果这不能解决问题，您总是可以用您（希望）制作的备份副本覆盖修改后的 runtimes.rb，一切都会回到原点。在这种情况下，请考虑选项 3 并继续搜索。让我们知道最终对您有用的东西.. 除非它删除了 require_tree 或安装 node.js，否则已经有很多这样的事情发生了。:)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-19T23:49:02.770

有同样的问题 OS-Windows 8 错误-'ExecJS::RuntimeError...' 解决方案-缺少 Node.js

1.  [从http://www.nodejs.org/download/](http://www.nodejs.org/download/)安装 Node.js
2.  重新启动计算机

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-04T07:56:34.510

我遇到了这个问题并且正在上网我正在使用这个 rails gem 文件运行 Windows 8

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do gem 'sqlite3', '1.3.5' 
end

# Gems used only for assets and not required # in production environments by default. 

group :assets do 
    gem 'sass-rails', '3.2.5' 
    gem 'coffee-rails', '3.2.2'

gem 'uglifier', '1.2.3' 
end

gem 'jquery-rails', '2.0.2'

group :production do 
    gem 'pg', '0.12.2' 
end 
```

去[http://nodejs.org/download/](http://nodejs.org/download/) 安装 - 重新启动机器，一切正常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-29T00:01:38.147

我喜欢**学习**路线。看来问题出在

```
IO.popen(command, options) { |f| output = f.read } 
```

`execjs\external_runtine.rb`在（版本 1.4.0 中的第 173 行）中返回一个空字符串。这就是错误消息不包含文本的原因。建议的更改对我不起作用。我改为`UTF-16LE`，`UTF-8`但它仍然返回一个空字符串。我`\\U`从`command`- 这至少返回了文本，但它的编码错误 - 在浏览器中显示为中文字符。

根据[此 MSDN 博客文章](http://blogs.msdn.com/b/ericlippert/archive/2004/02/11/71472.aspx)，使用`//U`标志并重定向到文件会`cscript`导致使用`UTF-16`.

然后，神奇地，它使用as和as起作用了（ *@#%$&^@* $%!!!?!?!）。那好吧。`command``"cscript //E:jscript //Nologo"``encoding``"UTF-8"`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-22T22:05:35.490

我必须将我的 nodejs 文件夹添加到我的 Windows Path 环境变量中。在 Windows 8 中打开控制面板，转到系统，高级系统设置（左侧），单击左侧的环境变量，然后编辑路径变量以将目录包含到您的 nodejs 文件夹（可能在程序文件中）。

当然，您必须安装 Node.js（使用[Windows 安装程序](http://nodejs.org/download/)）并通过 NPM 安装 CoffeeScript。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-20T23:43:57.190

我知道这是这个问题的一个非常晚的答案，但我得到了类似的东西并沿着完整的路径去了解真正导致问题的原因。

原来，默认的 windows jscript 引擎仍在 es3 上，许多 gem 正在利用 es5 或 es6 的特性。不幸的是，如果发生这种情况（您正在使用利用 es5 或 es6 功能的 gem 或一段代码），则无法让它在具有本机 js 引擎的 Windows 上工作。

这就是安装node.js解决问题的原因（node至少是es5）。

希望这可以帮助一些在 jsexec 运行时错误中苦苦挣扎的人。

我的 2 美分建议是安装节点（非常简单）或安装 v8，而不是删除 //=require_tree。

注意如果检测到 execjs 将自动使用节点。否则强制使用它，在引导中添加如下内容：

```
ENV['EXECJS_RUNTIME'] = 'Node' 
```

将环境设置为节点。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-18T01:09:19.083

对于 Windows 用户，这可能有效。在 windows 上运行的 coffee-script-source >1.9.0 存在问题。

看来您必须将其添加到您的 gemfile 中：

宝石'咖啡脚本源'，'1.8.0'

然后做

捆绑更新咖啡脚本源

我尝试了上述所有选项，还混合了它们的一些组合，直到我[在 Pages#welcome 中找到了这个 Rails-4, ExecJS::ProgramError](https://stackoverflow.com/questions/28241981/rails-4-execjsprogramerror-in-pageswelcome)并完成了多个系统 gem 更新以及捆绑安装和更新。

我恢复了所有的试验并降级了我的咖啡脚本源并且它有效。在此处发布以帮助其他可能遇到类似问题的人。

更新供应商/缓存中的文件

coffee-script-source-1.8.0.gem 从供应商/缓存中删除过时的 .gem 文件 coffee-script-source-1.9.1.1.gem 更新包！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-23T23:11:21.620

对于像我这样的初学者：

1.  导航到 \app\views\layouts\application.html.erb
2.  将第 6 行从：

    '<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>'

至

```
<%= javascript_include_tag 'defaults', 'data-turbolinks-track' => true %> 
```

[来自教程的源代码在此处修复](http://mech.xyz/how-to-fix-ruby-on-rails-turbolinks-js-coffee-error-windows/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-29T16:54:56.187

快速而肮脏的解决方案：`//= require_tree .`从`application.js`.

正如我在问题的评论中解释的那样，这实际上并没有解决导致错误的根本问题，而只是回避了它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-13T20:31:07.070

我使用了解决方案 2，因为以前我有这个错误，但是在这个位置不起作用，然后我添加了

`gem 'coffee-script-source', '1.8.0'`

并运行

```
bundle install 
```

我的问题得到了解决

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-04T01:09:36.833

对于初学者，这是一个不太复杂的解决方案：

如果您只是在学习本教程，您可能正在使用默认的 Gemfile（或非常接近）。您可以在文本编辑器中打开它，然后从该行前面删除井号：

```
# gem 'therubyracer', :platforms => :ruby 
```

您将需要重新运行`bundle install`，这可能会下载一些东西。但是一旦这样做，您应该能够毫无问题地启动服务器。

至少，这对我有用。

顺便说一句，这也适用于 Ubuntu 12.04。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-15T03:40:56.597

**您是否从C:\Users\this-user\yo-app**更改了代码的位置？

当我在 Rails 中年轻时，我创建了一个应用程序，我的应用程序的默认位置是**C:\Users\Duncan\my-app**，然后，当我更改 my-app 并将其放在 D:\All-my-Apps -文件夹我有那个错误....

我挠了挠头，尝试了 1,2,3 和更多......没有！直到我将所有代码都返回到默认文件夹位置并令我惊讶的是，我再次滚动:)

万一有人发现这很有用（我无法解释为什么会这样，也许有人可能没有猜测）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-18T09:22:26.940

运行 Win 8 64 位 rails 4.2.5 ruby​​ 2.1.7

[这个对我有用](https://stackoverflow.com/questions/28421547/rails-execjsprogramerror-in-pageshome/28436913#28436913)

# macros - Mutt 将文件擦除添加到 rc 命令

> ID：12520458
> 
> 赞同：0
> 
> 时间：2012-09-20T20:29:47.980
> 
> 标签：macros, mutt

我目前在我的`muttrc`文件中有这一行，可以将任何地址添加到我的谷歌联系人中。

```
macro index,pager a "<pipe-message>goobook add<return>" "Add sender's address to your Google contacts" 
```

问题是，当它这样做时，我必须手动进入并删除 goobook 缓存文件，以便它重新下载我刚刚添加的新地址。

上面的那个命令有没有办法在命令末尾添加`goobook add`一个文件擦除命令来删除 goobook 缓存文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:29:23.360

刚刚想通了，花了很多很多的搜索，但我终于找到了。我必须使用`<shell-escape>`命令。

非常简单，最终的命令如下所示：

```
macro index,pager a "<pipe-message>goobook add<return><shell-escape>rm -f ~/.goobook_cache<enter>" "Add sender's address to your Google contacts" 
```

实际上效果很好，它将电子邮件添加到我的 Google 通讯录中，然后删除旧的缓存文件。因此，在添加地址后，我可以立即在我的 mutt 程序中找到它。

# perl - perl 从四进制快速切换到十进制

> ID：12520462
> 
> 赞同：-2
> 
> 时间：2012-09-20T20:30:17.497
> 
> 标签：perl, pack, unpack

我将核苷酸 A、C、G、T 表示为 0、1、2、3，然后我需要将表示为四进制的序列转换为十进制。有没有办法在 perl 中实现这一点？我不确定打包/解包是否可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:44:34.163

我从未使用过它，但看起来 Convert::BaseN 模块是一个不错的选择。 [Convert::BaseN - base{2,4,8,16,32,64} 字符串的编码和解码](http://search.cpan.org/~dankogai/Convert-BaseN-0.01/lib/Convert/BaseN.pm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:07:25.183

通过处理循环中的每个数字来将 base-4 字符串计算为十进制非常简单

请注意，在 32 位机器上，您将无法表示长度超过 16 个碱基的序列

这段代码显示了这个想法

```
use strict;
use warnings;

print seq2dec('ACGTACGTACGTACGT');

sub seq2dec{
  my ($sequence) = @_;
  my $n = 0;
  for (map {index 'ACGT', $_} split //, $sequence) {
    $n = $n * 4 + $_;
  }
  return $n;
} 
```

**输出**

```
454761243 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:14:40.237

Base 4 正好需要 2 位，因此很容易有效地处理。

```
my $uvsize = length(pack('J>', 0)) * 8;
my %base4to2 = map { $_ => sprintf('%2b', $_) } 0..3;

sub base4to10 {
   my ($s) = @_;
   $s =~ s/(.)/$base4to2{$1}/sg;
   $s = substr(("0" x $uvsize) . $s, -$uvsize);
   return unpack('J>', pack('B*', $s));
} 
```

这允许在支持 32 位整数的版本上输入 16 位数字，在支持 64 位整数的版本上允许输入 32 位数字。

使用浮点数支持稍大的数字是可能的：使用 IEEE doubles 构建时为 26，使用 IEEE quads 构建时为 56。这将需要不同的实现。

比这更大的将需要一个诸如[Math::BigInt](http://search.cpan.org/perldoc?Math%3a%3aBigInt)之类的模块来让 Perl 存储它们。

* * *

更快更简单：

```
my %base4to16 = (
   '0' => '0',   '00' => '0',   '20' => '8',
   '1' => '1',   '01' => '1',   '21' => '9',
   '2' => '2',   '02' => '2',   '22' => 'A',
   '3' => '3',   '03' => '3',   '23' => 'B',
                 '10' => '4',   '30' => 'C',
                 '11' => '5',   '31' => 'D',
                 '12' => '6',   '32' => 'E',
                 '13' => '7',   '33' => 'F',
);

sub base4to10 {
   (my $s = $_[0]) =~ s/(..?)/$base4to16{$1}/sg;
   return hex($s);
} 
```

# text - 根据开头的数据将文本文件拆分为多个文件

> ID：12520465
> 
> 赞同：0
> 
> 时间：2012-09-20T20:30:23.597
> 
> 标签：text, vbscript, batch-file

我正在寻找通过Windows批处理文件或vbscript将文件A分成两个（文件B和文件C）的方法。如果您能提供示例代码，我将不胜感激！

```
File A
------------------------------
'H',123,'1st'
'D',123,'1st'
'D',123,'2nd'
'D',123,'3rd'
'H',456,'2nd'
'D',456,'1st'
'D',456,'2nd'
'D',456,'3rd'
------------------------------

File B
------------------------------
'H',123,'1st'
'H',456,'2nd'
------------------------------

File C
------------------------------
'D',123,'1st'
'D',123,'2nd'
'D',123,'3rd'
'D',456,'1st'
'D',456,'2nd'
'D',456,'3rd'
------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:40:24.120

```
findstr /bl "'H'" a.txt >b.txt
findstr /bl "'D'" a.txt >c.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:30:27.090

出于完整性或教育目的，VBS 解决方案。
每个找到的字母的输出流对象作为值保存在字典中。

```
Option Explicit
Dim fso, dic, ts_in, ts_out, s, key, INFILE, OUTDIR
Set fso = WScript.CreateObject("Scripting.Filesystemobject")
Set dic = CreateObject("scripting.dictionary")

INFILE = "c:\temp\infile.txt"
OUTDIR = Left (INFILE, InstrRev (INFILE, "\"))  'same folder as INFILE's

Set ts_in = fso.OpenTextFile (INFILE)
Do Until ts_in.AtEndOfStream
    s = ts_in.ReadLine
    key = Replace (Left (s, InStr (s, ",")-1), "'", "")
    If Not dic.Exists (key) Then
        Set ts_out = fso.CreateTextFile (OUTDIR & key & ".txt")
        dic.Add key, ts_out
    End If
    Set ts_out = dic(key)
    ts_out.writeLine s
Loop
ts_in.Close

For Each ts_out In dic.Items
    ts_out.Close
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T02:35:50.280

您也可以像这样以编程方式执行此操作：

```
for /f "tokens=1-3 delims=," %%a in (File_A) do (
  if "%%a"=="'H'" echo %%a,%%b,%%c>>File_B
  if "%%a"=="'D'" echo %%a,%%b,%%c>>File_C
) 
```

我相信这种方法可能会更慢，但它可以让您更精细地调整您的条件或操作数据，而无需学习 REGEX（`FINDSTR`实现很差）。

# c++ - C++ list.erase(it, it) 会删除一些东西吗？在哪里可以找到好的参考？

> ID：12520471
> 
> 赞同：0
> 
> 时间：2012-09-20T20:31:01.147
> 
> 标签：c++, list, web, erase

我的意思是在迭代器指向同一个元素的情况下。

在[http://www.cplusplus.com/reference/stl/list/erase/](http://www.cplusplus.com/reference/stl/list/erase/)上说“从列表容器中删除单个元素（位置）或一系列元素（[first，last））。” 和“第一个，最后一个迭代器，指定要删除的列表容器内的范围：[first,last)。即，该范围包括第一个和最后一个之间的所有元素，包括第一个指向的元素，但不包括最后一个指向的元素。 "

我完全不知道我是否做错了所有事情，但是对于我的代码的每一部分，我在任何地方都找不到所需的信息，当我想自己测试它时，我会遇到一种情况，当我不知道发生了什么时在这里询问并争论了很长时间后，我发现了“未定义的行为”之类的东西。那么有人可以更快地帮助我，现在是什么？

而且我想成为更好的程序员并找到比 cplusplus.com 和 cppreference.com 更好的源代码，因为它们都很烂，还有更好的吗？我每天都在用这个 C++ 变得更疯狂（但我仍然认为它比 Java 或 C 更适合快速的大型程序），请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T20:46:53.417

标准自己的范围定义（24.2.1p7，强调我的）：

> 对数据结构进行操作的大多数库算法模板都有使用范围的接口。*范围*是一对指定计算开始和结束的迭代器。**范围`[i,i)`是一个空范围**；一般来说，范围`[i,j)`是指数据结构中的元素，从 指向的元素开始，`i`直到但不包括 指向的元素`j`。

因此，假设`it`是一个有效的迭代器`lst`，则该调用`lst.erase(it,it)`会从 中删除一组空元素`lst`。也就是说，它什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:42:40.440

我认为要最好地回答您的问题，您应该考虑迭代器的工作原理以及为什么所有内容都作为 [first, last) 而不是其他东西传入。

您需要牢记关于迭代器的两个核心规则。您始终可以递增一个（即 first++），并且指向同一元素的两个迭代器将始终相等。知道了这一点，您可以使用以下逻辑遍历任何范围的迭代器：

```
for(; first != last; first++)
{
} 
```

因此，如果第一个和最后一个相等，则不会发生任何事情。所以如果你调用 list.erase(it, it) 什么都不会被删除。

把它放在更一般的形式。STL 中 first == last 的任何范围实际上都是空的。

# javascript - jQuery 回调无法识别 jQuery 函数调用

> ID：12520485
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:32:14.283
> 
> 标签：javascript, jquery, ajax

我有一个 javascript 函数发出 AJAX 获取请求和回调设置以更新 div 的内容。唯一的问题是在回调函数中我收到错误*Uncaught TypeError: Object #HTMLDivElement has no method 'html'*

由于某种原因，jquery $("selector") 只返回 div 而不是 jquery 对象。

这是代码

```
//HTML
<select id="dimensions" name="dimensions" onchange="getDimention()">
    <option value="default">Select One</option>
....
</select>
 <div id="dim" > No Dimentions added yet</div>

//JS
function getDimention() {
   var eSelect = document.getElementById('dimensions');
  server.Dimention(eSelect.value, onGetDimentionSuccess); //make AJAX call
}
function onGetDimentionSuccess(response) {
   $('dim').html(response);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:33:43.737

您需要使用正确的类似 CSS 的选择器：

```
$('#dim').html(response); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:33:27.433

我想你的意思是 - 你忘记了`#`id 选择器

```
$('#dim').html(response); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:34:25.387

ID 必须附加**#**

试试这个

```
$('#dim').html(response); 
```

带有**.**

```
 $('.dim').html(response); // Id dim was a class name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:35:39.277

您是否有原型或任何其他 javascript 框架正在运行？

尝试 jQuery.noConflict() 然后使用 jQuery('#dim').html

# python - 使用引用同一应用程序中的模型的自定义 ModelField 导入问题

> ID：12520490
> 
> 赞同：0
> 
> 时间：2012-09-20T20:32:46.747
> 
> 标签：python

我创建了一系列自定义 ModelFields，它们只是受限制的 ForeignKeys。您会在下面找到 CompanyField。实例化时，您可以提供一个类型（例如，客户、供应商）。提供类型后，该字段可确保仅允许具有适当类型的值。

定义自定义字段的 crm 应用程序可以正常编译和运行。最终，我使用“从 crm 导入字段”将字段引用添加到不同的应用程序（事件）。现在我看到一大堆这样的错误：

> events.incident：“组”与模型公司有关系，该模型尚未安装或抽象。

这是所有血腥的细节。请让我知道我是否可以提供更多信息，这可能会有所帮助。

```
## crm/fields.py

import models as crmmods

class CompanyField(models.ForeignKey):
    def __init__(self, *args, **kwargs):
        # This is a hack to get South working. In either case, we just need to
        # make sure the FK refers to Company.
        try:
            # kwargs['to'] == crmmods.company doesn't work for some reason I
            # still haven't figured out
            if str(kwargs['to']) != str(crmmods.Company):
                raise AttributeError("Only crm.models.Company is accepted " + \
                    "for keyword argument 'to'")
        except:
            kwargs['to'] = 'Company'

        # See if a CompanyType was provided and, if so, store it as self.type
        if len(args) > 0:
            company_type = args[0]
            # Type is expected to be a string or CompanyType
            if isinstance(company_type, str):
                company_type = company_type.upper()
                if hasattr(crmmods.CompanyType, company_type):
                    company_type = getattr(crmmods.CompanyType, company_type)
                else:
                    raise AttributeError(
                        "%s is not a valid CompanyType." % company_type)
            elif not isinstance(company_type, crmmods.CompanyType):
                raise AttributeError(
                    "Expected str or CompanyType for first argument.")

            self.type = company_type
        else:
            self.type = None

        super(CompanyField, self).__init__(**kwargs)

    def formfield(self, **kwargs):
        # Restrict the formfield so it only displays Companies with the correct
        # type.
        if self.type:
            kwargs['queryset'] = \
                crmmods.Company.objects.filter(companytype__role=self.type)
        return super(CompanyField, self).formfield(**kwargs)

    def validate(self, value, model_instance):
        super(CompanyField, self).validate(value, model_instance)

        # No type set, nothing to check.
        if not value or not self.type:
            return

        # Ensure that value is correct type.
        if not \
        value.companytype_set.filter(role=self.type).exists():
            raise ValidationError("Company does not have the " + \
                "required roles.")

## crm/models.py

import fields

class CompanyType(models.Model):
    name = models.CharField(max_length=25)

class Company(models.Model):
    type = models.ForeignKey(CompanyType)

class Person(models.Model):
    name = models.CharField(max_length=50)
    company = fields.CompanyField("Client")

## incidents/models.py

from crm import fields as crmfields

class Incident(models.Model):
    company = crmfields.CompanyField("Client") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:52:55.163

你有一个循环包依赖。`fields`进口`models`哪个进口`fields`哪个进口`models`哪个进口`fields`。. .

循环包依赖是一个坏主意（tm）。尽管它在某些情况下*可能*有效，但它不适用于您的情况，原因是涉及元类的复杂原因，我将不遗余力。

**编辑**

原因是 Django ORM 模块使用元类将其类变量（模型的字段）转换为对象上的属性描述符。这是由元类在类定义时完成的。加载模块时定义一个类。由于这个原因，它的属性也必须在类加载时定义。这与方法的代码不同，方法的代码在执行类的那一刻就解析了对名称的引用。

`field`现在，由于您在类定义中来回引用一个对象`models`，因此这将不起作用。

如果您将所有三个放在同一个包中，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:36:59.950

经过大量的努力，它被修复了，只是通过改变

```
kwargs['to'] = 'Company' 
```

到

```
kwargs['to'] = 'crm.Company' 
```

似乎当在 crm 应用程序之外评估“to”参数时，它是在事件应用程序的上下文中评估它。也就是说，它正在寻找“incidents.Company”，正如错误消息所暗示的那样，它不存在。

# git - 多平台项目存储库设计策略

> ID：12520497
> 
> 赞同：7
> 
> 时间：2012-09-20T20:33:10.583
> 
> 标签：git, version-control, mercurial, project-organization, multiplatform

在处理多平台项目时，我正在寻找有关存储库布局/设计的策略。通常依赖项是：

*   项目有单一名称/品牌
*   每个平台都有单独的源代码
*   平台代码共享公共资源
*   设计文档和其他文档在平台之间共享

我已经尝试过（使用git）以下：

**解决方案 A：**

*   每个平台项目都驻留在自己的目录中
*   提交`master`适用于所有平台

*优点*：

*   干净的代码开发
*   没有合并

*缺点*：

*   日志是一团糟，您通常需要在所有提交日志前加上平台
*   有时撤销提交是..不可能或非常困难/混乱

**解决方案 B：**

*   每个平台都有自己的分支
*   释放时对每个分支执行rebase，然后合并到`master`+标签

*优点*：

*   清理日志:)
*   清洁分离发展进度
*   减少冲突

*缺点*：

*   需要合并到`master`
*   当所有平台同时变基时 - 合并到主是**地狱**

我对创建每个平台的存储库犹豫不决，因为共享资源可能很困难，或者需要额外的、可能容易出错的任务。

期待你们的专业知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:59:06.610

这似乎是一个扩大规模的问题。存储库通常包含一个项目。一个项目的几个部分可能共享一个实用模块，但对于小型项目，规模不够大，无法考虑将实用模块分离出来作为自己的实体。但是，一旦实用程序模块变得“大”，或者如果需要将共享它的几个独立实体分离出来，它就需要成为自己的（版本化）模块。

我的方法*是*使用单独的存储库，具体取决于涉及多少代码。我不确定您所说的添加任务是什么意思，尽管它是一个主要的重构。我要做的第一件事是将共享资源制作成一个独立的存储库，并将其发布作为（特定于版本的）依赖项合并到每个平台构建中。这将每个平台上的开发与单个共享资源版本分离。无论如何，对共享项目的每次更改都需要测试每个平台，现在您有了清晰的分界线。然后，您可以一次使每个项目都有自己的存储库。

如果你想在多个平台上拥有一个项目的“共享发布”，你需要一个作为构建代码根目录的“项目”。您也可以考虑为该代码使用共享存储库，但这会将共享代码的发布与项目的发布结合起来。如果您的代码已经达到这种复杂程度，您可能想要的是另一个存储库，仅用于存放您的构建代码的“元项目”。除非您有一大堆项目要处理，否则多个项目的构建都可以驻留在一个存储库中，从而允许它们共享通用代码。再次出现同样的问题，但是对于小规模，单个存储库可以工作。请注意，所有这些都假设某种程度的自动化测试:)

我对多模块项目的经验来自使用 perl 和 java。在 perl 中，使用来自 CPAN 的许多独立共享模块是常态。在 java 中，可以使用 Apache Ivy 或 Maven 处理模块化依赖关系。我在一个环境中使用 Maven，该环境具有公司的顶级元项目和每个产品的单独项目（取决于公司元项目）。每个项目都可以自由地做它需要做的事情。从一个项目升级到两个或多个项目之间共享的代码将成为它自己的项目。一个特别大的项目最终被分解为几个项目，这些项目都继承自它自己的“元项目”。处理这种分层依赖是 Maven 和 Ivy 构建的目的。我们使用 Jenkins/Hudson 作为集成服务器，每晚自动检查跨项目构建（假设没有人逃避编写测试......）。曾经我们需要为整个公司更改网站。没问题，在公司元项目中改过一次，在每个项目的新版本中自动拾取！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:46:51.757

可能是另一种解决方案：

分成三个（或更多）存储库：

```
platform1 specific
platform2 specific
common for all platforms 
```

然后，您可以通过[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)将公共存储库添加到其他存储库中。

此外，Google 通过开发自定义工具解决了 Android 存储库中的类似问题：[repo](http://code.google.com/p/git-repo/)。Repo 使用自定义 git 存储库（清单），其中包含一个 XML 文件（manifest.xml 或 default.xml，请参阅内部 .repo/manifests）列出应该签出的 Git 存储库。这样，您还可以创建如上所述的三个存储库和另一个包含 XML 文件的存储库以一起使用它们，甚至可以在此清单 git 中为每个平台创建分支。

尽管我应该警告说 repo 非常专注于[Gerrit 。](http://code.google.com/p/gerrit/)

# linux - LINUX：如何锁定内存中进程的页面

> ID：12520499
> 
> 赞同：21
> 
> 时间：2012-09-20T20:33:16.560
> 
> 标签：linux, swap

我有一个 LINUX 服务器运行一个内存占用很大的进程（某种数据库引擎）。此进程分配的内存非常大，需要将其中的一部分换出（分页）。

我想做的是将所有其他进程（或正在运行的进程的子集）的内存页面锁定在内存中，以便只有数据库进程的页面被换出。例如，我想确保我可以继续远程连接并监控机器，而不会受到交换的影响。即，我希望 sshd、X、top、vmstat 等所有页面都驻留在内存中。

在 linux 上有 mlock()、mlockall() 系统调用，它们似乎提供了正确的旋钮来进行固定。不幸的是，在我看来，我需要在每个进程中进行显式调用，并且不能从不同的进程或父进程调用 mlock()（mlock() 不是在 fork() 或 evecve() 之后继承的）。

任何帮助是极大的赞赏。提供虚拟披萨和啤酒:-)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T20:42:12.047

自从我这样做以来已经有一段时间了，所以我可能错过了几个步骤。

制作一个包含如下内容的 GDB 命令文件：

```
call mlockall(3)
detach 
```

然后在命令行中，找到你要mlock的进程的PID。类型：
`gdb --pid [PID] --batch -x [command file]`

如果你喜欢`pgrep`它可能是：
`gdb --pid $(pgrep sshd) --batch -x [command file]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T20:58:21.837

实际上锁定系统上大多数内容的页面似乎有点粗鲁/激烈，更不用说这种机制的滥用似乎必然会导致一些其他意想不到的问题。

理想情况下，您可能真正想要的是控制进程组的“交换性”，以便数据库首先被交换，而基本的系统管理工具是最后一个，并且[有一种方法可以做到这一点](https://unix.stackexchange.com/a/10227/5094)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T20:49:58.627

在搜索`mlockall`信息时，我遇到了这个工具。您也许可以为您的发行版找到它。我只找到了手册页。

[http://linux.die.net/man/8/memlockd](http://linux.die.net/man/8/memlockd)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-26T03:59:31.917

如今，解决这个问题的简单而正确的方法是 cgroup。

只需限制数据库进程的内存使用：

```
1\. create a memory cgroup
    sudo cgcreate -g memory:$test_db -t $User:$User -a $User:$User

2\. limit the group's RAM usage to 1G. 
    echo 1000M > /sys/fs/cgroup/memory/$test_db/memory.limit_in_bytes
    or 
    echo 1000M > /sys/fs/cgroup/memory/$test_db/memory.soft_limit_in_bytes

3\. run the database program in the $test_db cgroup
   cgexec -g memory:$test_db $db_program_name 
```

# google-apps - 需要知道 Google 群组是在 Google Apps 域中由管理员管理还是由用户管理？

> ID：12520506
> 
> 赞同：1
> 
> 时间：2012-09-20T20:33:55.060
> 
> 标签：google-apps, google-groups, google-groups-api, google-apps-for-education

我正在使用 Google Apps Provisioning API 来使用 Google Apps 域组设置。我已经获得了域中所有组的列表，但我需要知道特定组是用户管理的还是管理员管理的。

我看不到任何获取该信息的方法。如果有人知道这一点，我会在这里需要一些帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:38:21.740

使用 Google Apps 脚本，您可以使用 getAllOwners() 获取所有者列表，并检查该组的所有者是否为管理员。就像是：

```
function isAdminManaged(groupName){
  var groupOwners = GroupsManager.getGroup(groupName).getAllOwners();
  for (var owner in groupOwners){
    var userName = groupOwners[owner];
    if(UserManager.getUser(userName).getIsAdmin()){
      return true;
    }
  }
return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T03:55:38.023

供应 API 有一个未记录的标志，您可以在使用此调用检索所有组时指定：

[https://developers.google.com/google-apps/provisioning/#retrieving_all_groups_in_a_domain](https://developers.google.com/google-apps/provisioning/#retrieving_all_groups_in_a_domain)

如果将 ?skipUserCreatedGroups=True 附加到 URI，如下所示：

[https://apps-apis.google.com/a/feeds/group/2.0/example.com?skipUserCreatedGroups=True](https://apps-apis.google.com/a/feeds/group/2.0/example.com?skipUserCreatedGroups=True)

那么只会返回管理员创建的组。如果此 API 调用未返回您的组，则您知道它是用户管理的。

仅检查一组效率不高，但可以完成工作。

# javascript - 为 jQuery UI 对话框创建可选的多个按钮

> ID：12520507
> 
> 赞同：0
> 
> 时间：2012-09-20T20:33:56.467
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

所以我知道用 jQuery UI 创建多个按钮，你只需这样做：

```
buttons : [{
    text  : settings.buttonText,
    click : function () { settings.buttonFunction(); }
},
{
    text  : button2Text,
    click : function () { settings.button2Function(); }
}
}] 
```

我创建了一个插件来处理和制作类似站点范围内的对话框，并且最近需要添加传递多个按钮的选项，而不仅仅是 1。

现在通常这整个部分甚至不会运行，除非甚至需要一个按钮。我有一个快速`if (settings.buttonText) { }`包裹它。但问题是即使我没有传入 button2Text 等，按钮仍然出现。除了做一些新的事情，比如`.hide()`......

我的问题是：如果 settings.button2Text 被传递到插件中**，我怎样才能让第二个`{ text ... click ... }`区域是动态的并且只出现在对象中**？这甚至可能吗？

我觉得解决方案很简单，我现在只是脑残:) 感谢您的任何意见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:37:16.777

您可以在实际设置之前执行逻辑。像这样的东西：

```
var myButtons = [{
  text  : settings.buttonText,
  click : function () { settings.buttonFunction(); }
}];

if (addSecondButton) {
  myButtons.push({
    text  : button2Text,
    click : function () { settings.button2Function(); }
  });
} 
```

然后你可以像这样启动对话框：

```
$(foo).dialog({buttons: myButtons}) 
```

# for-loop - 在批处理文件中使用 for 循环将命令应用于子目录的第一级

> ID：12520510
> 
> 赞同：2
> 
> 时间：2012-09-20T20:34:05.797
> 
> 标签：for-loop, batch-file, dos

我有一个包含大量子目录的目录，我想对它们中的每一个应用一个命令（一个在其中创建更多子目录的命令）我的问题是我将如何制定一个 FOR 循环以便它应用该命令到这些目录中的每一个，而不将其进一步应用到子目录的子目录中。

我对此很陌生，我已经尝试了很多不同的组合，我要做的就是在当前工作目录而不是子目录上运行命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:30:00.327

我不清楚您是要处理子文件夹还是孙子文件夹。无论哪种方式，您都将要使用 FOR /D 。

要处理子文件夹：

```
@echo off
setlocal

::The following sets the root to the current directory.
::But root could be set to any path you choose
set "root=."

pushd "%root%"
for /d %%F in (*) do (
  rem %%F now contains a child folder.
  rem You could make a subdirectory easily enough
  md "%%F\newFolder"
) 
```

要处理孙文件夹：

```
@echo off
setlocal

::The following sets the root to the current directory.
::But root could be set to any path you choose
set "root=."

pushd "%root%"
for /d %%A in (*) do (
  rem %%A now contains a child folder.
  pushd "%%A"
  for /d %%B in (*) do (
    rem %%B now contains a grandchild folder
    rem You can easily create a new folder
    md "%%B\newFolder"
  )
  popd
) 
```

# sql - 在地点列表中选择唯一的员工随机发布/招聘地点

> ID：12520515
> 
> 赞同：3
> 
> 时间：2012-09-20T20:34:39.680
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在地点列表中选择员工的唯一随机发布/招聘地点，所有员工都已在这些地点发布，我正在尝试为他们生成一个新的随机发布地点，其“位置”条件为“员工新随机位置将不等于他们的家”员工表是：

```
EmpNo   Empname           CurrentPosting    Home        Designation RandomPosting
1       Satish Kumar      Samastipur        Gazi        Manager     
2       Anil Kumar Singh  Vaishali          Patna       Manager     
3       Rajdev Prasad     Nawada            Gaya        PO      
4       Rajesh Kumar      Sheikhpura        Muzaffarpur PO      
5       Jitendra Kumar    Banka             Bhagalpur   Clerk 
```

等等...

并且 Places 表是

```
PlaceID  PlaceName      Manager     PO    Clerk
1        Araria            2        0     1
2        Arwal             1        1     1
3        Aurangabad        1        0     2
4        Banka             2        1     1
5        Begusarai         1        1     1
6        Bhagalpur         1        1     2
7        Bhojpur           0        2     0 
```

等等...

我尝试使用 rand() 和 newid() 如下所示，

```
select Employee.*, Place.PlaceName As RandomPosting  from Employee 
inner join Place on Place.PlaceID=Employee.EmpNo order by newid() 
```

但无法选择所需的内容......即为每个员工随机分配一个 PlaceName（来自 Place），它不等于 CurrentPosting 和 Home（在员工中）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:40:45.217

```
WITH cteCrossJoin AS (
    SELECT e.*, p.PlaceName,
           ROW_NUMBER() OVER(PARTITION BY e.EmpNo ORDER BY NEWID()) AS RowNum
        FROM Employee e
            CROSS JOIN  Place p
        WHERE e.Home <> p.PlaceName
)
SELECT *
    FROM cteCrossJoin
    WHERE RowNum = 1; 
```

# java - 从 Eclipse 下载应用程序

> ID：12520516
> 
> 赞同：0
> 
> 时间：2012-09-20T20:34:39.460
> 
> 标签：java, android, eclipse, download

我是新手，所以我不确定它是否可能。我正在尝试查找一些有关将应用程序下载到我的设备的文献，这些应用程序是我直接从我的 Eclipse 中创建的。仅用于测试目的。有没有人有一些链接或说明？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:41:14.680

我想您是在问如何将您在 Eclipse 中制作的应用程序直接安装到您的设备上，对吗？

如果是这样的话...

1.  确保您在计算机上安装了正确的设备驱动程序
2.  转到设置 > 应用程序 > 开发并检查 USB 调试。这也可以在“设置”>“开发人员选项”下找到
3.  将您的设备插入计算机，它应该会自动连接到您的 Eclipse adt 插件

如果您不想安装驱动程序，您可以...

转到您的应用项目所在的文件夹，然后打开名为 bin 的文件夹。在那里你应该找到 [YourAppName].apk 。然后，您可以通过电子邮件将其发送给自己，或将其传输到设备的 SD 卡上。从那里您需要使用文件管理应用程序打开文件并安装它。

第一个选项一开始可能需要更长的时间，但从长远来看会使开发更容易和更快。第二个选项只是完成它的最基本方式。

# php - 从重复行中只返回一行

> ID：12520517
> 
> 赞同：2
> 
> 时间：2012-09-20T20:34:40.100
> 
> 标签：php, mysql

我正在访问一个名称与公司相关的数据库。名称在表中是唯一的。可以有多个人拥有同一家公司。如果重复，我只需要返回公司的ONCE实例，以便我可以根据公司显示信息。我的代码如下：

```
$result = $pdo->query('SELECT * FROM vendoreducation WHERE company LIKE "TestCompany" GROUP BY company'); 
```

那显然行不通，我不想指定个别公司。我只想能够返回数据库中所有公司的列表。如果有多个条目具有相同的公司名称，只需返回其中一个。

**编辑** 我选择的答案是正确的，但我最终选择的答案是`m.buettner`'s answer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:50:50.513

我会在评论中要求澄清，但我缺少代表，对不起。如果每家公司只需要一行，那么其他列是什么甚至重要吗？或者你真的只是想找出所有公司的名单吗？

对于后者，这应该这样做：

```
$result = $pdo->query('SELECT DISTINCT company FROM vendoreducation;'); 
```

当然，您还可以包含对于同一公司的所有行都相同的任何列。但是，由于某些列可能具有不同的值（例如您提到的名称），使用`DISTINCT`with`*`可能只会再次为您提供所有行。

**编辑：**如果您确实希望每家公司有一整行，您可以简单地使用上面一行检索到的所有公司的列表，然后依次对每家公司使用解决方案，为每家公司查询一行`LIMIT 1`。但也许你应该考虑[规范化](http://en.wikipedia.org/wiki/Database_normalization)，如果这是一个选项（即如果你可以改变数据库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:41:47.163

`$result = $pdo->query('SELECT * FROM vendoreducation WHERE company LIKE "TestCompany" GROUP BY company LIMIT 1');`

或者

`$result = $pdo->query('SELECT distinct * FROM vendoreducation WHERE company LIKE "TestCompany" GROUP BY company');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:36:26.093

利用`DISTINCT`

```
$result = $pdo->query('SELECT DISTINCT * FROM vendoreducation WHERE company LIKE "TestCompany"'); 
```

# cordova - 键盘phonegap

> ID：12520524
> 
> 赞同：2
> 
> 时间：2012-09-20T20:35:09.367
> 
> 标签：cordova, keyboard

我正在使用phonegap（js + css + html）使用移动应用程序。当我打开一个页面时，有没有办法打开键盘？我寻找它，但我无法找到任何东西。
谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:21:02.840

在 Github 上查看这个[Phonegap 插件。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SoftKeyboard)文档不是很冗长，但似乎您可以从 javascript 打开软件键盘。您可以在 deviceReady() 函数中触发它。

# objective-c - 使用单例在视图之间传递数据

> ID：12520526
> 
> 赞同：0
> 
> 时间：2012-09-20T20:35:20.463
> 
> 标签：objective-c, singleton

我有一个删除注释的 mapView，并且注释具有将新视图推送到堆栈的标注。在第二个视图中，用户输入文本并拍摄出现在视图上的照片，我希望在按下保存按钮后将其保存。但是地图上会有多个注释，我希望第二个视图上的数据对于每个注释都不同。有人告诉我使用单例来执行此操作，并且我知道如何制作，但我不知道如何使其传递或存储数据。谁能给我一些指示？

# c# - 为什么 Type.GetInterfaces() 有时不返回有效列表？

> ID：12520527
> 
> 赞同：6
> 
> 时间：2012-09-20T20:35:35.170
> 
> 标签：c#, wcf, reflection

我们继承了我们想要改进的设计不佳的 WCF 服务。它的一个问题是它有一百多个方法（在两个不同的接口上），我们怀疑其中大部分没有使用。我们决定对每个方法进行一些日志记录，以跟踪它们何时以及如何被调用。为了使跟踪代码易于重构和防错字，我们这样实现它：

```
public void LogUsage()
{
    try
    {
        MethodBase callingMethod = new StackTrace().GetFrame(1).GetMethod();
        string interfaceName = callingMethod.DeclaringType.GetInterfaces()[0].Name;
        _loggingDao.LogUsage(interfaceName, callingMethod.Name, GetClientAddress(), GetCallingUrl());
    }
    catch (Exception exception)
    {
        _legacyLogger.Error("Error in usage tracking", exception);
    }
} 
```

`LogUsage()`然后在我们要跟踪的每个方法的开头调用。

该服务的流量非常高，每天大约有 500,000 多个呼叫。99.95% 的时间里，这段代码执行得很漂亮。但另外 0.05% 的时间，`GetInterfaces()`返回一个空（但不是`null`）数组。

**为什么`GetInterfaces()`偶尔会返回不一致的结果？**

这似乎微不足道——0.05% 的错误率是我们通常只能梦想的。但关键是要识别**所有**的服务接触点，如果这个错误总是来自一个（或几个）方法调用，那么我们的跟踪是不完整的。我试图通过调用服务上的每个方法来在我的开发环境中重现此错误，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:46:30.990

`StackTrace`是出了名的不可靠，尤其是在多线程环境中。或者更确切地说，它非常可靠，但有时不是很实用。询问“最后调用的方法”可能会产生意想不到的结果。尝试记录 DeclaringType。你可能会对在那里发现的东西感到惊讶。请注意，虽然现在这是 0.05% 的故障率，但它可能会随着应用程序的复杂性而增加。

为了正确实现可重用的跟踪代码，您需要依赖 .NET 4.5 功能[Caller Information](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx)，通过使用动态代理（例如[Castle Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)）或使用 AOP 框架（例如[PostSharp](http://www.sharpcrafters.com/)）。或者，您可以手动编写跟踪代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:33:21.600

来自 Erik Lippert（在 MS 的 C# 编译器团队工作）响应[从 StackFrame 获取类型 T](https://stackoverflow.com/questions/7586140/getting-type-t-from-a-stackframe)：

> 堆栈帧实际上并没有告诉您谁调用了您的方法。堆栈帧告诉您控制权将返回到哪里。栈帧是延续的具体化。调用该方法的人以及控制权返回的位置几乎总是相同的事实是您感到困惑的根源，但我向您保证，它们不必相同。

整篇文章值得一读……

# jquery - On 函数在 live 函数执行的地方不起作用

> ID：12520531
> 
> 赞同：0
> 
> 时间：2012-09-20T20:35:55.637
> 
> 标签：jquery

我读过 live 功能已被弃用，应该使用 on 方法。

所以我编辑了我的代码

```
$('form').live('submit', function (event) {}) 
```

至

```
$('form').on('submit', function (event) {}) 
```

它不再起作用了:-)我想知道为什么？

顺便说一句，表单元素是动态添加的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:37:22.653

改用这个

```
$('body').on('submit', 'form', function (event) {}) 
```

检查jquery 文档上的**直接和委托事件**[`on`](http://api.jquery.com/on/)部分以获取方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:37:53.703

您需要在页面加载时将事件处理程序附加到 DOM 中存在的元素：

```
$('body').on('submit', 'form', function(event) {
 ...
}); 
```

您应该替换`body`更接近 的元素`form`，这样事件只需冒泡一级，从而提高性能，例如：-

```
<div id="container">
  <form>
    ...
  </form>
</div> 
```

然后你会使用：

```
$('#container').on('submit', 'form', function(event) {
  ...
}); 
```

所有这些信息都可以在[文档中找到](http://api.jquery.com/on/)

# c# - 将数据写入文本文件

> ID：12520532
> 
> 赞同：2
> 
> 时间：2012-09-20T20:36:01.360
> 
> 标签：c#, serial-port

我正在使用 COM 端口（串行）发送和接收数据。我已经编写了以下代码。这实际上是我的第一个`C#`项目，因为我对它有点陌生。我正在尝试将接收到的数据写入桌面上的文本文件，程序实际上创建了该文件，但没有在其中写入任何内容。同样，我可以在控制台上看到接收到的数据，但它没有被写入文本文件。对我做错的任何帮助将不胜感激。

谢谢你。代码如下。

```
class Program
{
    SerialPort p = new SerialPort("COM7", 300, Parity.None, 8, StopBits.One);
    string sbuffer = string.Empty;
    byte i = 0;
    static void Main(string[] args)
    {
        new Program();
    }

    Program()
    {
        string[] names = SerialPort.GetPortNames();
        Console.WriteLine("Serial ports:");
        foreach (string name in names)
        {
            Console.WriteLine(name);
        }
        Console.WriteLine("Using COM7");

        p.Open();

        string data_ = "$1RB\r";
        Console.WriteLine("Writing data: {0}",data_);
        p.Write(data_);
        p.DataReceived += new SerialDataReceivedEventHandler(p_DataReceived);
        Console.ReadKey();
        p.Close();
    }

    void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        Thread.Sleep(5);
        sbuffer += (sender as SerialPort).ReadExisting();
        i++;
        if (i > 9)
        {
            Console.WriteLine(sbuffer);
          System.IO.File.WriteAllText(@"C:\Users\myname\Desktop\WriteText.txt", sbuffer);
            sbuffer = string.Empty;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:40:59.633

您可以使用事件，或者简单地使用此方法并将您的数据字符串传递给它。只要文件存在，它就会简单地附加到文件中，如果不存在则创建一个新文件。写入的数据应该与控制台屏幕中出现的任何输出相同。

```
 static void WriteOutputToTextFile(string _data)
    {
        string FolderName = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);   //set destination as your desktop
        using (StreamWriter SW = new StreamWriter(FolderName + "\\test.txt", true))   //true makes it append to the file instead of overwrite
        {
            SW.WriteLine(_data);
            SW.Close();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:41:15.640

您一次又一次地打开和覆盖同一个文件。改用 FileStream（甚至更好，StreamWriter）类，保持流与串行端口一起打开，并在完成后关闭它。

此外，如果您通过串行端口传输文本，您可能需要考虑更易于使用的 SerialPort.ReadLine() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:24:15.270

扩展@Alan 的答案，您可以使用`File.AppendAllText`而不是`File.WriteAllText`一次又一次地覆盖文件。因此，如果您在检查文件之前收到空文本，则该文件将被空文本覆盖。

# ios - iOS中的多级树UITableView

> ID：12520533
> 
> 赞同：10
> 
> 时间：2012-09-20T20:36:10.227
> 
> 标签：ios, uitableview, expandablelistview

我需要创建一个类似 facebook 的菜单。但不同的是，我的表必须是多级树结构。

请参考该图以了解我提到的树结构。

我尝试将标头用作 0 级，将单元格用作 1 级和 2 级。但最后总代码变得很挑剔。请提供建议。

![在此处输入图像描述](../Images/ce0a142d18cf8d5243c0a0d912373186.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T06:27:48.643

这将对您有所帮助：[KOTree](https://github.com/adamhoracek/KOTree)

表格视图将如下所示。

![http://i.stack.imgur.com/PUjDx.png](../Images/7d62f44b1d0cee8c84470451546a8fb6.png)

# django - 如何更改我的管理员 url 动态指向的视图？

> ID：12520534
> 
> 赞同：1
> 
> 时间：2012-09-20T20:36:09.553
> 
> 标签：django, django-urls

我有一些长时间运行的进程，在此期间我想将我的所有管理 url 指向一些“进程正在运行，请稍后再回来”模板。

在我的 urls.py 中，我有：

```
url(r'^admin/', include(admin_site.urls)), 
```

我知道我可以创建一个视图，我可以在其中检查我的进程是否正在运行，但我不知道如何`include(admin_site.urls)`在我的视图中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:19:30.810

您不需要在视图中使用“include(admin_site.urls)”。在您的 urls.py 文件中，检查您的进程是否正在运行，然后添加正确的管理 url。像这样 ：

```
from myapp import CheckIfProcessRunning

process = CheckIfProcessRunning()

if process :
    urlpatterns += patterns('',
        url(r'^admin/', include('myapp.comebacklater')),
    )

else :
    urlpatterns += patterns('',
        url(r'^admin/', include('myapp.myadminurl')),
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:14:26.740

我会写一个中间件。就像是：

```
from django.http import HttpResponseRedirect

class LongProcessMiddleware(object):

    def process_request(self, request):
        running_long_process = True # some logic
        if running_long_process and request.get_full_path().startswith('/admin'):
            return HttpResponseRedirect('/temporary-disabled-message')
        return None 
```

在 settings.py

```
MIDDLEWARE_CLASSES = (
    ...
    'myproject.middleware.LongProcessMiddleware',
) 
```

# jquery - 居中这个 CarouFredSel Carousel

> ID：12520535
> 
> 赞同：1
> 
> 时间：2012-09-20T20:36:15.027
> 
> 标签：jquery, html, css, carousel, caroufredsel

我正在为我的轮播使用 jQuery CarouFredSel 插件，我正在尝试将其居中。我试图申请`margin:0 auto;`头部轮播标签`#c-carousel`，但什么也没发生。我认为这可能是因为我没有指定宽度，但是当我指定宽度时，轮播的一部分会被切断。

我试图用我的轮播做的类似于位于[暴雪主页](http://us.blizzard.com/en-us/)上的轮播，轮播将在一堆带有链接的图像中旋转，但如果浏览器比轮播更窄，则不会导致水平滚动条出现内容。

代码：

```
<div id="c-carousel">
    <div id="wrapper">
        <div class="caroufredsel_wrapper">
            <div id="carousel">
                <div class="slide">
                    <img src="http://www.placehold.it/1200x650/ff0000/999999">
                    <div class="content"><a href="">link</a></div>
                </div>
                <div class="slide">
                    <img src="http://www.placehold.it/1200x650/00ff00/999999">
                    <div class="content"><a href="">link</a></div>
                </div>
                <div class="slide">
                    <img src="http://www.placehold.it/1200x650/0000ff/999999">
                    <div class="content"><a href="">link</a></div>
                </div>
                <div class="slide">
                    <img src="http://www.placehold.it/1200x650/f0f0ff/999999">
                    <div class="content"><a href="">link</a></div>
                </div>
            </div>
        </div>
    </div>
    <div id="pager">
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class="selected"><span>1</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>2</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>3</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>4</span></a>
    </div>
</div>
<div id="content">
    content
</div>

$(function() {
    $('#carousel').carouFredSel({
        scroll: {
            fx: 'crossfade',
            duration: 1000
        },
        pagination: {
            container: '#pager',
            duration: 500
        }
    });
});

#c-carousel {
    height: 100%;
    padding: 0;
    margin: 0 auto;
    min-height: 600px;
    min-width: 960px;
    text-align: center;
}
#wrapper {
    width: 100%;
    height: 100%;
    position: relative;
}
.caroufredsel_wrapper {
    width: 100% !important;
    height: 100% !important;
}
#carousel .slide {
    width:1200px;
    height:650px;
    overflow: hidden;
    float: left;
    padding-right: 10000px;
}
#carousel .slide .content {
    font-size: 55pt;
    position: relative;
    top: -300px;
    left: 100px;
    z-index: 5;
}
#carousel .slide img {
    width: auto;
    height: auto;
    min-width: 100%;
    min-height: 100%;
}

#pager {
    position: relative;
    top: -250px;
    z-index: 10;
    display: block;
}
#pager a {
    background-color: #356;
    display: inline-block;
    width: 15px;
    height: 15px;
    margin-right: 6px;
    border-radius: 10px;
    box-shadow: 0 1px 1px #cef;
}
#pager a.selected {
    background-color: #134;
}
#pager a span {
    display: none;
}

#content {
    background: yellow;
    width: 960px;
    height: 500px;
    position: relative;
    margin: 0 auto;
    z-index: 20px;
    top: -200px;
    font-size: 80pt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:16:05.277

检查您在此处调整的代码：http: [//jsfiddle.net/7Esrm/](http://jsfiddle.net/7Esrm/)

将属性添加到#c-carousel：

```
width:960px; 
```

并删除最小宽度。这将使保证金工作。

添加这个CSS：

```
body {overflow-x:hidden} 
```

如果 x 轴上的内容大于视口，这将使页面忽略，并且不会显示水平滚动条。

# php - 带有自定义永久链接的wordpress分页

> ID：12520536
> 
> 赞同：0
> 
> 时间：2012-09-20T20:36:15.970
> 
> 标签：php, wordpress

我将这个“自定义”分页脚本用于我的 wordpress 模板：

```
$temp = $wp_query;
$wp_query= null;
$wp_query = new WP_Query();
$wp_query->query('showposts='.get_option( 'posts_per_page' ).'&paged='.$paged);

while ($wp_query->have_posts()) : $wp_query->the_post();
    echo '<a class="current";
    echo '" href="';
    the_permalink();
    echo '">';
    the_title();
    echo '</a>';
endwhile;
next_posts_link('Load more articles...'); 
$wp_query = null; $wp_query = $temp; 
```

所以最后，它创建了一个“加载更多”按钮，该按钮转到[http://blog.com](http://blog.com) **/page/2** 现在的问题是自定义永久链接的 url 类似于： http: [//blog.com](http://blog.com) **/custom/ stuff** /page/2 破坏了脚本并且不显示下一个结果，而是显示原件。

你们中可能有人知道我该如何解决这个问题吗？或者也许在functions.php中强制[http://blog.com/page/2](http://blog.com) **？**

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:05:09.247

我多年来一直遇到同样的问题，然后尝试在我的自定义永久链接设置中进行设置，这对我有用：/%postname%/。

最后一个 / 之后的点对于使其正常工作至关重要。也许不是那么漂亮，但它对我有用:-)

# python - python 如何从数据框制作树状图

> ID：12520537
> 
> 赞同：3
> 
> 时间：2012-09-20T20:36:23.927
> 
> 标签：python, pandas, dendrogram, multidimensional-array

我正在尝试在 python 中查找使用 PANDAS 包创建的数据框的树状图。示例数据如下所示。

```
import numpy as np
from pandas import *
import matplotlib.pyplot as plt
from hcluster import pdist, linkage, dendrogram
from numpy.random import rand

Index= ['aaa','bbb','ccc','ddd','eee']
Cols = ['A', 'B', 'C','D']
df = DataFrame(abs(np.random.randn(5, 4)), index= Index, columns=Cols)

>>> df
            A         B         C         D
aaa  0.987415  0.192240  0.709559  0.317106
bbb  0.856932  0.252441  1.183127  0.712855
ccc  1.687198  0.462673  1.046469  0.159287
ddd  0.977152  2.657582  0.491975  0.027280
eee  0.120464  0.945034  0.142658  0.537024
>>> 

X = df.T.values #Transpose values 
Y = pdist(X)
Z = linkage(Y)
dendrogram(Z) 
```

上面的代码生成树状图但错过了列名。我怎样才能跟踪相同的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:00:17.717

正如@Wouter Overmiere 所建议的，以下内容对我有用。

```
X = df.T.values #Transpose values 
Y = pdist(X)
Z = linkage(Y)
dendrogram(Z, labels = df.columns) 
```

# multi-touch - 多点触控 GTK3 示例

> ID：12520540
> 
> 赞同：9
> 
> 时间：2012-09-20T20:36:32.053
> 
> 标签：multi-touch, gtk3

据我了解，从 3.4 版开始，GTK+ 添加了多点触控支持。我不清楚的是这是否仅适用于手机/平板电脑等触摸屏，或者它是否扩展到 Apple 风格的触摸板（Ubuntu/Unity 和 OS X 在触摸板上使用多点触控手势的方式）。

我也很难找到如何实现手势以及如何跟踪多点触控事件的示例。

有没有关于如何使用 GTK（或类似 Clutter 之类的相关工具）实现多点触控的好例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-09T12:42:48.637

我也找不到例子，所以这是我对它的了解：

## 鼠标事件（介绍）：

当使用鼠标 Gdk 传播事件`GDK_BUTTON_PRESS`时，`GDK_BUTTON_RELEASE`（和[其他一些](https://developer.gnome.org/gdk3/3.24/gdk3-Events.html#GdkEventType)）。这将被转换为[按钮按下事件](https://developer.gnome.org/gtk3/3.24/GtkWidget.html#GtkWidget-button-press-event)`GtkWidget`等信号，然后转换为更高级别的信号，如's [clicked](https://developer.gnome.org/gtk3/3.24/GtkButton.html#GtkButton-clicked)如果适用。将回调连接到信号允许访问[GdkEventButton 结构](https://developer.gnome.org/gdk3/3.24/gdk3-Event-Structures.html#GdkEventButton)。但是，使用可以让您无需跟踪它是单击（按下和释放）还是仅释放（例如在动态滚动期间）。`GtkButton``button-press-event``clicked`

## 触摸事件：

触摸的工作方式有点不同。有[4 个触摸事件](https://developer.gnome.org/gdk3/3.24/gdk3-Events.html#GDK-TOUCH-BEGIN:CAPS)：

> GDK_TOUCH_BEGIN
> 一个新的触摸事件序列刚刚开始。此事件类型是在 3.4 中添加的。
> 
> GDK_TOUCH_UPDATE
> 触摸事件序列已更新。此事件类型是在 3.4 中添加的。
> 
> GDK_TOUCH_END
> 一个触摸事件序列已经完成。此事件类型是在 3.4 中添加的。
> 
> GDK_TOUCH_CANCEL
> 触摸事件序列已被取消。此事件类型是在 3.4 中添加的。

GdkEventTouch[结构](https://developer.gnome.org/gdk3/3.24/gdk3-Event-Structures.html#GdkEventTouch)使用[GdkEventSequence](https://developer.gnome.org/gdk3/3.24/gdk3-Events.html#GdkEventSequence)来区分手指。在我看来，它只是一个值（在源代码中找不到定义），但我可能在这里弄错了。`GtkWidget`具有类似于etc 的[触摸事件](https://developer.gnome.org/gtk3/3.24/GtkWidget.html#GtkWidget-touch-event)`button-press-event`信号，也可以转换为`clicked`.

## 示例代码（使用 gtkmm 但核心方面相同）：

```
#include <gtkmm.h>
#include <iostream>

int main()
{
    auto app = Gtk::Application::create();
    Gtk::Window window;
    window.set_default_size(1024, 768);
    app->signal_startup().connect([&]
    {
        app->add_window(window);
    });

    window.show();

    //code works for me without adding events mask but let's be thorough
    window.add_events(Gdk::TOUCH_MASK);
    window.signal_touch_event().connect([&](GdkEventTouch* event)->bool
    {
        std::cout<<"TOUCH EVENT: ";
        switch(event->type)
        {
        case GDK_TOUCH_BEGIN:
            std::cout<<"begin ";
            break;
        case GDK_TOUCH_UPDATE:
            std::cout<<"update ";
            break;
        case GDK_TOUCH_END:
            std::cout<<"end ";
            break;
        case GDK_TOUCH_CANCEL:
            std::cout<<"cancel ";
            break;
        default:
            std::cout<<"something else ";
        }
        std::cout<<event->sequence<<" "
                 <<gdk_event_get_event_sequence((GdkEvent*)event)<<" "
                 <<std::endl;
        return GDK_EVENT_PROPAGATE;
    });
    window.signal_event().connect([&](GdkEvent* event)->bool
    {
        std::cout<<"EVENT: "<<event->type<<std::endl;
        return GDK_EVENT_PROPAGATE;
    });

    app->run();
    return 0;
} 
```

## 触摸板事件：

还有[触摸板和垫事件](https://developer.gnome.org/gdk3/3.24/gdk3-Events.html#GDK-TOUCHPAD-SWIPE:CAPS)和[结构](https://developer.gnome.org/gdk3/3.24/gdk3-Event-Structures.html#GdkEventTouchpadSwipe)，但似乎没有在`Gtk`级别上明确处理这些事件。它必须在[事件](https://developer.gnome.org/gtk3/3.24/GtkWidget.html#GtkWidget-event)信号的回调中完成，检查[GdkEventType](https://developer.gnome.org/gdk3/3.24/gdk3-Event-Structures.html#GdkEvent)并将其转换为适当的结构。

# r - 如何让我的 Emacs 中的 R 缓冲区占用更多水平空间？

> ID：12520543
> 
> 赞同：7
> 
> 时间：2012-09-20T20:36:43.900
> 
> 标签：r, emacs, ess

在我启动 ESS 缓冲区（使用 Mx R）时，我发现我的命令输出在列宽中仅占用大约 60 个字符（特别是在显示具有长列名的数据帧时）。我想知道是否有一种简单的方法来调整这个限制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T20:40:51.857

Ben Bolker 的评论是正确的： `options("width"=200)`是我在具有宽显示器的机器上使用的东西。

我不知道有环境变量会将此情况报告回 ESS 以进行自动调整。这将是一个有用的补充。

就像`options("width")`，有些东西在启动时通常很有用，所以我目前在另一台机器上拥有它

```
edd@max:~$ cat .Rprofile
## Example of .Rprofile
options(width=155, digits=6, digits.secs=6)
## AER page vii
options(prompt="R> ")
## Default repo
local({r <- getOption("repos")
       r["CRAN"] <- "http://cran.r-project.org"
       options(repos=r)
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T01:19:45.917

以下将 R 的选项“宽度”设置为 R 启动时缓冲区的宽度：

```
(add-hook 'ess-R-post-run-hook 'ess-execute-screen-options) 
```

请注意，这适用于最新的 ESS 12.09，旧版本使用`ess-post-run-hook`.

同样在最新的 ESS 中，您可以使用`C-c h`w执行此操作`RET`，或者将其绑定到一个方便的键：

```
(define-key inferior-ess-mode-map "\C-cw" 'ess-execute-screen-options) 
```

它可以设置为在每次窗口改变它的大小时执行，但我的猜测是它需要相当多的 lisping。

# asp.net - 从字符串“00-25-2011”到类型“日期”的转换无效

> ID：12520547
> 
> 赞同：0
> 
> 时间：2012-09-20T20:37:12.407
> 
> 标签：asp.net, vb.net

为什么以下代码会引发异常：“从字符串“00-25-2011”到类型“日期”的转换无效。”？

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim Test As Date
        Test = "2012-01-25"
        MsgBox(Test)
        Test = Format(DateAdd("d", -31, Test), "mm-dd-yyyy")
        MsgBox(Test)
    End Sub 
```

相同的代码在 VB6 应用程序中成功运行。我不明白为什么月份部分是：00。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T20:42:00.767

使用“MM”表示月份，而不是表示分钟的“mm”。

此外，我建议使用 DateTime.ParseExact，因为它可以让您获得更多控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:43:30.990

您正在应用的 Format 函数返回一个字符串，但您正试图将其分配回日期。

# python - 霍尔分区陷入无限循环

> ID：12520555
> 
> 赞同：2
> 
> 时间：2012-09-20T20:37:43.053
> 
> 标签：python, partitioning, quicksort, hoare-logic

我正在尝试编写一个 Hoare 分区函数，该函数将数组作为输入，并将第一个元素作为枢轴进行分区（我知道这不是一个好主意，我应该使用随机枢轴，就像这种`median-of-medians`方法一样）。问题是当第一个元素最高时，这个函数会陷入无限循环，就像数组一样`[14,6,8,1,4,9,2,1,7,10,5]`。我可以看到错误，在外部的第一次迭代之后`while`，两者都`i`等于`j`10，因此循环永远继续。我应该修补哪个部分以获得预期的效果？这是代码：

```
def hoare(arr):
    pivot = arr[0]
    i,j = 1,len(arr)-1
    while i <= j:
        while i < j and arr[i] < pivot:
            i += 1
        while j >= i and arr[j] >= pivot:
            j -= 1
        if i < j:
            arr[i],arr[j] = arr[j],arr[i]
    if j != 0:
        arr[0],arr[j] = arr[j],arr[0]
        return j 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:06:21.770

我相信问题在于您已经将 do-while （或重复直到，用 Hoare 的术语）循环转换为 while 循环，因此它永远不会执行第一个 j -= 1。

Python 中最简单的转换应该是像这样更改两个内部 while 循环：

```
while True:
    i += 1
    if not (i < j and arr[i] < pivot): break
while True:
    j -= 1
    if not (j >= i and arr[j] >= pivot): break 
```

（我在这里假设`if i < j:`应该在第二个while循环之外，并且所有其他初始缩进都是正确的。）

我还没有完全推理出这一点，也没有进行各种测试，但您的翻译中可能不仅仅是这个错误。您可能还需要将外部循环转换为 do-while （Hoare 实际上通过最后的检查使其显式`while TRUE`），但我不确定。无论如何，对于您的示例输入，修改后的版本返回`9`, 和`arr`is `[10, 6, 8, 1, 4, 9, 2, 1, 7, 14, 5]`，这是不正确的，但它解决了您的无限循环问题。

下一个问题是一个错误。如果您要在内部循环中执行`+= 1`and `-= 1`first，则必须从 开始`-1`，`len(arr)`而不是`0, len(arr)-1`（或者，如您所做的那样，`1, len(arr)-1`）。

可能还有其他问题。但我不想深入研究你的代码，找出所有可能的错误并解释它们。如果您需要，请告诉我们我们的来源是什么，并解释您从该来源进行的每个转换，这样解释您哪里出错会容易得多。如果没有，直接将 Hoare 的算法翻译成 Python 会简单得多，然后希望你能弄明白。

这是我在网上找到的 Hoare 伪代码的副本（只是将所有制表符替换为两个空格）：

```
Hoare-Partition (A, p, r)
  x ← A[p]
  i ← p − 1
  j ← r + 1
  while  TRUE
    repeat  j ←  j − 1
      until  A[j] ≤ x
    repeat  i ←  i + 1
      until  A[i] ≥ x
    if  i < j
      exchange  A[i] ↔ A[j]
    else
      return  j 
```

这是对 Python 的简单翻译；唯一的变化是较小的语法（包括“交换”的拼写方式）和将每个重复/直到变成一段时间 True/break。

```
def hoare(a, p, r):
  x = a[p]
  i, j = p-1, r+1
  while True:
    while True:
      j -= 1
      if a[j] <= x:
        break
    while True:
      i += 1
      if a[i] >= x:
        break
    if i < j:
      a[i], a[j] = a[j], a[i]
    else:
      return j 
```

对于与您的签名相同的函数：

```
def hoare0(arr):
  return hoare(arr, 0, len(arr)-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-03T04:35:04.300

这一行有一个错误：

```
while i < j and arr[i] < pivot: 
```

它应该是：

```
while i <= j and arr[i] < pivot: 
```

分区的整个代码如下所示：

```
def partition(a, l, r):
    pivot = a[r]
    i = l - 1
    j = r
    while i <= j:
        if i <= j and a[i] < pivot:
            i += 1
        if i <= j and a[j] >= pivot:
            j -= 1
        if i < j:
            a[i], a[j] = a[j], a[i]
    a[l], a[j] = a[j], a[l]
    return j 
```

**为什么会出现无限循环？**

这里`pivot`选择的是 14。

因此，在执行此代码后：

```
while i < j and arr[i] < pivot:
    i += 1 
```

`i`是 10 和`j`10。

现在，当这个块被执行时：

```
while i <= j and arr[j] >= pivot:
    j -= 1 
```

作为`a[10] < 14`，什么都没有发生。因为，`i`等于`j`，没有交换发生。现在，由于最外面的循环有条件`i <= j`，循环不断重复。

**修正会发生什么？**

因此，在执行此代码后：

```
while i <= j and arr[i] < pivot:
    i += 1 
```

`i``i`是 11（因为当equals时条件仍然为真`j`）并且`j`是 10。

现在，当这个块被执行时：

```
while i <= j and arr[j] >= pivot:
    j -= 1 
```

作为`a[10] < 14`，什么都没有发生。

现在，`i`是 11 和`j`10，所以不会发生交换。但是，最外面的循环被破坏并`a[j]`与`pivot`.

你的数组变成：

`[5, 6, 8, 1, 4, 9, 2, 1, 7, 10, 14]`

你可以在[这里](https://onlinegdb.com/S1IX1FrUP)玩。它包含带有正确和错误分区方案的调试打印的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-19T08:59:45.690

这也有效：

```
key = arr[0]
i = 0
j = n-1
while i >= j:
    while arr[i] < key:
        i += 1

    while arr[j] > key:
        j -= 1
arr[j], arr[0] = arr[0], arr[j] 
```

# .htaccess - 使用 htaccess 将一个域链接到另一个域

> ID：12520556
> 
> 赞同：1
> 
> 时间：2012-09-20T20:37:45.120
> 
> 标签：.htaccess

在这种情况下，我坚持使用 htaccess 重定向：

我有 myapp.com 域，我的主要网站和服务在该域上运行。我的客户在 myapp.com 上登录他们的帐户并使用。现在，我将在一个单独的域上提供其中一项功能，让我们假设“goto.com”。但是，我不想在 goto.com 上构建一个单独的应用程序。我只想将所有即将到来的请求重定向到 goto.com 到 myapp.com 下的 php 脚本，但这个重定向应该在后端（屏蔽），而不是 301 重定向。

让我澄清一下：

myapp.com - /var/www/vhosts/myapp.com/httpdocs/index.php

goto.com --> 屏蔽重定向 --> myapp.com/goto.php?$1

我怎样才能用 htaccess 做到这一点？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:53:49.250

> 刚刚发现可以用redirect [P](proxy)方法来完成：`RewriteRule ^(.*)$ http://myapp.com/public_view/$1 [P]`你觉得呢？这是一个好的和稳定的方法吗？

该方法很好，它利用了[mod_proxy 模块](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)。我唯一可以建议的是添加`L`标志，以防您的 htaccess 文件中有其他规则。

在 htaccess 文件中使用`P`标志的一个限制是，如果页面或请求`http://myapp.com/`重定向，那么您的 URL 地址栏将`http://myapp.com/`显示而不是您的其他域。解决这个问题的唯一方法是使用`ProxyPassReverse`，但它在 htaccess 文件中不起作用。您需要访问虚拟主机配置：

```
ProxyPass / http://myapp.com/public_view/
ProxyPassReverse / http://myapp.com/public_view/ 
```

此外，如果`http://myapp.com/`设置 cookie，您将需要使用`ProxyPassReverseCookieDomain`和`ProxyPassReverseCookiePath`指令来重写它们。

# java - 将整数数组更改为一系列字符串

> ID：12520564
> 
> 赞同：3
> 
> 时间：2012-09-20T20:38:17.280
> 
> 标签：java

我正在尝试从以下输入实现以下输出：

```
Sample input:
3 4
2 1
4 5
-1

Sample output:
7
3
9 
```

到目前为止，我的程序完成了所有的数学运算，当用户输入负数时，我让它终止。我的问题是我无法让它以上述格式打印。我的输入/输出示例如下：

```
9 9
8 8
9 -8
[18, 16] 
```

到目前为止，这是我的代码：

```
import java.util.ArrayList;
import java.util.Scanner;
    public class sums{
     public static void main(String[]args){
         int addition = 0;
         int previous = 0;
         ArrayList<String> sums = new ArrayList<String>();
         String sumsy = new String("");
         for (int i=0; i<=i;){
             Scanner in = new Scanner(System.in);
             previous = in.nextInt();
             if (previous<0){
                 break;
             }
             else {
                 addition = in.nextInt();
                 if (addition<0) {
                     break;
                 }
                 else {
                     addition += previous;
                     sums.add(addition+"");
                 }
             }
         } System.out.println(sums);
     }
} 
```

*我相信答案在于以某种方式在某处*使用分隔符（“/n”），并让我的整数数组像字符串一样打印出来。

对不起，这些小事完全让我望而却步。谁能指出我正确的方向？

谢谢！-海伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:40:50.303

```
for (String sum : sums) System.out.println(sum) 
```

用这个代替

```
System.out.println(sums) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:24:46.683

`System.out`是一个`PrintStream`对象，它的`println`方法针对各种不同的类型进行了重载。

在这种情况下，因为 sums 是一个`ArrayList`，所以您正在调用[`println(Object x)`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#println%28java.lang.Object%29)，它通过调用`String.valueOf(x)`传递的对象（反过来调用`x.toString()`if`x`不等于`null`）并打印结果来工作`String`。

本质上，当您将除 a`String`或原语之外的其他内容传递给 时`println`，您就是将其打印方式的详细信息委托给对象的类。在这种情况下，由于`ArrayList`是一个库类，因此您无法控制它。

为了使其按您想要的方式工作，您需要迭代总和中的值，例如：

```
for (String someSum : sums) {
    System.out.println(someSum);
} 
```

如果您不熟悉该循环语法，请参阅本页的后半部分：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:47:12.000

sums 是字符串列表，而不是字符串，因此打印它不会给您想要的东西。你有两个选择，你可以做 `for(String i : sums){ System.out.println(i); }`

或者你可以计算一个字符串生成器然后`sums.append(addition)`做 `System.out.println(sums.toString())`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:48:40.387

你真的必须使用 ArrayList 吗？IMO，这使它变得比必要的复杂得多。从您的示例输入中，您似乎只想对每对数字求和。这似乎不需要数组。您可以将两个数字相加并立即打印出结果。

# iphone - 我们什么时候可以发布使用 Google SDK for iOS 的应用程序？

> ID：12520566
> 
> 赞同：1
> 
> 时间：2012-09-20T20:38:27.103
> 
> 标签：iphone, ios, app-store, google-plus

我已成功将适用于 iOS 的 Google+ SDK 集成到我的应用程序中，从此处下载：

[https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)

但是，SDK 在开发人员预览中被列为开始，如下所示：

“注意：iOS 版 Google+ 平台目前处于开发者预览阶段。”

有谁知道我是否可以在此模式下提交/发布我的应用程序，或者我是否需要等待 Google 从预览版中发布它（可能需要几个月的时间！）。

谢谢，

史蒂夫·H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:45:51.363

不应将依赖[Google+ 历史 API的应用程序发布到生产环境中。](https://developers.google.com/+/mobile/ios/#write_moments_to_google_history)这是因为 Google+ 历史记录仅供[开发人员](https://developers.google.com/+/history/preview/)使用。

适用于 iOS 的 Google+ 平台的其他用途可以发布到生产环境中。

# php - PHP + MySQL：查询期间与 MySQL 服务器的连接丢失

> ID：12520567
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:38:43.513
> 
> 标签：php, mysql, database-connection

到目前为止，我在 DB 表中有大约 7500 条记录。今天晚上我又导入了 4000 条记录（总共 10500 条记录），当我运行应用程序时，我收到 MySQL 错误消息

```
Lost connection to MySQL server during query 
```

我认为这将是我的应用程序中的一个问题，但后来我尝试通过 PhpMyAdmin 运行查询，我得到了同样的错误

```
#2013 - Lost connection to MySQL server during query 
```

我第一次面对这个错误。我环顾四周，看起来问题是由于大查询引起的。这可能是可能的，但是根据表中的当前记录数（7500），查询执行大约需要 1.2 秒。那么，为什么还有 4000 条记录会导致此错误？任何想法，如何解决？

此外，该应用程序正在 Hostgator 服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:50:11.293

可能是因为你用尽了db session的一种资源，比如内存，mysql关闭了连接。

引自[dev.mysql](http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html)

> “可以传入或传出 MySQL 5.1 服务器或客户端的最大可能数据包为 1GB。
> 
> 当 MySQL 客户端或 mysqld 服务器接收到大于 max_allowed_pa​​cket 字节的数据包时，它会发出 Packet too large 错误并关闭连接。对于某些客户端，如果通信数据包太大，您可能还会在查询错误期间丢失与 MySQL 服务器的连接。”

**可能的修复：**

将 sql 转储分成几部分，一次做一点。

如果表损坏，运行“优化表#tablename”命令应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T20:42:46.097

您是否尝试过删除额外的 4000 条记录并测试您是否仍然可以查询数据库？

# jquery - 清除联系表 7 (Wordpress) 中的字段

> ID：12520571
> 
> 赞同：2
> 
> 时间：2012-09-20T20:39:01.383
> 
> 标签：jquery, wordpress, forms, field

我在我的 Wordpress 网站上使用联系表 7。不幸的是，该插件默认没有内置“点击时清除字段”，这很不利于可用性。

我已经创建了一个主题函数来让它工作，并且快到了，但需要有更好的 jQuery 技能的人来让一切按预期工作。这是我的代码：

```
// Clear Formfields
function clearfield() {
?>
<script type="text/javascript">
    jQuery(document).ready(function($) {
         $(".clearfields").click(function () {
            var text = $(this).text();
                $(".clearfields").val("");
            });                             
    });
</script>
<?php
}
add_action( 'wp_footer', 'clearfield', 100 ); 
```

我无法在不修改插件的情况下操作输入字段，但我可以添加类。目前我有：

```
<input class="clearfields" type="text" value="enter name etc"> 
```

目前，这将清除任何具有 .clearfields 类的字段，这很好，但我只想清除用户单击的字段。目前它会清除所有内容（姓名、电子邮件、公司等），因为所有字段都应用了该类.

其次，在我当前的设置下，即使在单击提交按钮后表单似乎正在发送，但电子邮件没有到达，所以我的代码有些问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:59:41.060

联系表格 7 确实具有明确的价值……只需使用：水印

```
[text* txtName watermark   "Name: "] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-20T12:44:33.550

在最新版本的 cf7 for wordpress 上，您可以通过添加以下代码来添加重置/清除字段按钮：

```
<input type="reset" class='btn btn-primary' /> 
```

默认情况下，重置按钮不会继承任何样式，因此它只会像普通的无样式按钮一样显示。您仍然可以应用任何 CSS 样式，如上所示。

这是示例表单代码，以相同的样式显示“提交”按钮和“重置”按钮。

```
[submit class:btn class:btn-primary]<input type="reset" class='btn btn-primary' /> 
```

现场预览：[http ://www.ewallzsolutions.com/free-quote/](http://www.ewallzsolutions.com/free-quote/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-06T09:25:49.327

我也面临同样的问题，所以我只是通过创建[隐藏](https://stackoverflow.com/a/19758620/2724173)的输入重置按钮并使用 jquery 触发来解决这个问题

html

```
<input type="reset" id="reset" class="sr-only"> 
```

jQuery

```
$("#reset").trigger('click'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:18:31.490

这是关于如何在contactform7中单击时清除文本框值的完美答案。看看 [http://www.bloggerseed.com/2011/07/clear-text-box-click-contactform-7/](http://www.bloggerseed.com/2011/07/clear-text-box-click-contactform-7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T21:00:53.537

这是一个工作示例：http: [//jsfiddle.net/cyVyZ/](http://jsfiddle.net/cyVyZ/)

HTML 代码：

```
<input type="text" id="field1" class="clearfields" value="field 1" />
<input type="text" id="field2" class="clearfields" value="field 2" />
<input type="text" id="field3" class="clearfields" value="field 1" /> 
```

jQuery代码：

```
(function($) {
  $('.clearfields').bind('focus', function() {
    $(this).val('');
  });
})(jQuery); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T21:06:02.903

您可以清除焦点默认值和模糊取回该值。

示例在这里：[jsfiddle](http://jsfiddle.net/3Cas8/4/)

jQuery代码：

```
$.fn.defaultValue = function(){              
         return this.each(function(){ 
            var default_value = $(this).val(); 
            var $this = $(this);        

            $this.focus( function() {    
                if ($this.val() == default_value) $(this).val("");
                });
            $this.blur( function() {
                if ($this.val().length == 0){
                    $this.val(default_value); 
                }
            })            
         }); 
         }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-08T12:32:59.700

只需在联系表 7 中添加即可

```
<input type="reset" id="form-Cancel" class="wpcf7-form-control wpcf7-submit button"/> 
```

# c# - 将数组的内容放入消息框

> ID：12520575
> 
> 赞同：0
> 
> 时间：2012-09-20T20:39:24.137
> 
> 标签：c#, arrays

单击按钮时，我需要获取数组的内容并将它们放到消息框中。当用户点击添加按钮时，数字被加载到数组中，并且它可以很好地执行其他功能。但是，当点击显示按钮时，它会弹出一个消息框，但它只是显示为 0。下面是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Testscores.UI
{
    public partial class frmTestscores : Form
    {
        //creates the variables needed for the calculations
        int scores;
        double total = 0;
        int count = 0;
        int counts = 0;
        double average = 0;
        int[] sArray;

        public frmTestscores()
        {
            InitializeComponent();
        }
        //creates the exit button click event
        private void btnExit_Click(object sender, EventArgs e)
        {
            //exits the application
            Application.Exit();
        }
        //creates the clear button click event
        private void btnClear_Click(object sender, EventArgs e)
        {
            //clears all text fields and variables
            txtAverage.Text = "";
            txtCount.Text = "";
            txtScore.Text = "";
            txtTotal.Text = "";
            scores = 0;
            total = 0;
            counts = 0;
            average = 0;

        }
        //creates the add button click event
        private void btnAdd_Click(object sender, EventArgs e)
        {
            //creates the try and catch statements
            try
            {
                //does the calculations and outputs it into the text fields
                scores = int.Parse(txtScore.Text);

                counts += 1;
                total = total + scores;

                average = total / counts;
                    txtAverage.Text = average.ToString();
                    txtTotal.Text = total.ToString();
                txtCount.Text = counts.ToString();
                //initializes the array(this is where i get confused)
                int SIZE = counts;
                Array.Resize(ref sArray, SIZE);
                for (int count = 1; count > SIZE; count++)
                {

                   sArray[count] = scores;
                    //outputs the count to the text box
                    txtCount.Text = count.ToString();

                }
            }
                //catch statement
            catch (Exception ex)
            {
                //outsputs a message to the user
                MessageBox.Show("Please enter a valid number,");

            }
        }
        //creates the display button click event
        private void btnDisplay_Click(object sender, EventArgs e)
        {
            //supposed to output the array to a message box
            MessageBox.Show(sArray[].ToString());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:43:13.293

您可以将数组中的单个字符串组合成单个字符串（例如使用 string.Join 方法），然后显示连接的字符串：

```
string toDisplay = string.Join(Environment.NewLine, sArray); 
MessageBox.Show(toDisplay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:44:19.800

将您的显示点击事件处理程序更改为：

```
private void btnDisplay_Click(object sender, EventArgs e)
{
    string output = string.Empty;
    foreach (var item in sArray)
    {
        output += item + " ";
    }

    //supposed to output the array to a message box
    MessageBox.Show(output);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:44:38.690

是的，这不会输出整个数组。阅读有关 ToString() 的文档。它通常输出对象的类型名，除非它在子类中被覆盖。

这样做的蛮力很简单：

```
string output = new string();

for(int i = 0; i < sArray.Length; i++)
{
   output += sArray[i] // plus any delimiters or formating.
}

MessageBox.Show(output); 
```

# android - 将对象保存到二进制文件到外部存储？（安卓）

> ID：12520577
> 
> 赞同：1
> 
> 时间：2012-09-20T20:39:33.877
> 
> 标签：android, bitmap, storage, external

这是我创建的代码，用于将图像“库”保存到外部存储，以便在另一个应用程序中使用该文件。这是一个包含对象 ArrayList 的二进制文件。

这是主要工作的方法。

```
public void createLib()
{       
    File fl = new File("/mnt/sdcard/imgs");

    File[] rawLib = fl.listFiles();

    TextView text = (TextView) findViewById(R.id.txt1);

    ArrayList<Block> myList = new ArrayList<Block>();

    try{    
        for (int i = 0; i < rawLib.length; i++)
        {
            FileInputStream fis = new FileInputStream(rawLib[i]);

            Bitmap bmp = BitmapFactory.decodeStream(fis);

            Block tmpBlock = new Block();

            tmpBlock.bmp = bmp;
            tmpBlock.mozColor = findMidColor(bmp);

            myList.add(tmpBlock);
        }           
       }
        catch(Exception exc)
        {
            exc.printStackTrace();
        }

        try
        {           
            String root = Environment.getExternalStorageDirectory().toString();
            File myDir = new File(root + "/saved_images");    
            myDir.mkdirs();

            File file = new File (myDir, "library.lib");

            FileOutputStream fos = new FileOutputStream(file);

            ObjectOutputStream save = new ObjectOutputStream(fos);

            save.writeObject(myList);

            save.close();
        }

        catch (Exception exc)
        {
             exc.printStackTrace();
        } 
```

这是我正在使用的课程

```
class Block
{
    Bitmap bmp;
    int mozColor;
} 
```

findMidColor() 是我的方法，它工作得很好，所以没有问题。

当我从模拟器外部存储中提取创建的文件时，我看到该文件的大小约为 2.5 KB，但带有图像的原始文件夹约为 2-3 MB。结论是该程序仅保存指向该 bmp 的指针。有没有办法创建包含图像和整数的对象的二进制文件，并在另一个应用程序（如 ArrayList 或任何其他数组）中重用该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:53:32.330

是 Bitmap 的数据（像素）不保存在 Bitmap 对象中。他们住在堆的某个地方。您现在只保存对错误位置的引用。

`Bitmap`在您的 Block 类中，您可以拥有指向 的路径和来自该路径的`Bitmap`方法，而不是拥有对象。`returns``Bitmap`

```
class Block{
   String bitmapPath;
   int mozColor;
   Bitmap bmp(){
      //do something here to encode bitmap from file
   }
} 
```

您必须将位图保存到特定路径并将其存储到`Block.bitmapPath`每次

您可以轻松找到如何将 a 保存`Bitmap`到 a`File`并从中检索`File`

# php - 当且仅当数组中的所有值都为真时才返回真？

> ID：12520583
> 
> 赞同：2
> 
> 时间：2012-09-20T20:40:05.780
> 
> 标签：php, forms, validation

所以我有一个数组，其中包含所有用于检查表单输入的函数调用。然后，我在数组中进行了一个 foreach 循环，以查看验证函数的返回值是真还是假。根据该结果，foreach 所在的函数返回真或假。我试图弄清楚的问题是，如果所有验证函数都返回 true，如何只返回一次 true。

这是我的代码：

```
public function valInputs()
{
    $valArray = array(
        valName($firstName),
        valName($lastName),
        valPhone($phone),
        valEmail($email)
    ); // these functions return true/false depending on validation

    foreach($valArray as $value)
    {
        if(!$value)
        {
            return false;
            break;
        }
        else
        {
           return true; // the problem is, true gets returned X number of times
        }
    }
} 
```

关于如何避免多次返回的任何想法？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T20:45:14.677

返回调用停止 foreach 循环和函数。实际上，您可以在循环下方返回 true：

```
foreach($valArray as $value)
{
    if(!$value)
    {
        return false;
        // break is not needed, and should NOT be used in this case,
        // as it stops the foreach loop.
        // It will never be reached anyways, seeing how you return false just above.
    }
}
return true; 
```

如果它到达循环的末尾，则意味着它没有返回 false。因此它应该返回 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T20:57:57.890

一个有趣的方法是

```
public function valInputs()
{
    $valArray = array(
        valName($firstName),
        valName($lastName),
        valPhone($phone),
        valEmail($email)
    ); // these functions return true/false depending on validation

return array_product( $valArray ) === 1; 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T21:03:01.700

为什么不只是：

```
public function valInputs() {
    return (valName($firstName) && valName($lastName) && valPhone($phone) && valEmail($email));
} 
```

如果它们都为真，这将返回真，如果其中至少一个为假，则返回假。坦率地说，我不确定你为什么需要一个 foreach 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:43:03.380

根据定义，return 结束函数。您不能多次返回。

查看 pst 的评论，检查您是否多次调用该函数。

# ios - 如何在 iOS 6 中向分组样式 UITableViewController 添加背景图像？

> ID：12520585
> 
> 赞同：4
> 
> 时间：2012-09-20T20:40:17.833
> 
> 标签：ios, ios6

```
self.navigationController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"fullscreen-bg.png"]];
self.tableView.backgroundColor = [UIColor clearColor]; 
```

该代码在 iOS 5 中运行良好，但在 iOS 6 中不起作用。在 iOS 6 中，它只显示默认的细条纹背景。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:09:50.067

```
// FOR iOS 5
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]];
self.tableView.backgroundColor = [UIColor clearColor];
self.tableView.opaque = NO;

// FOR iOS 6
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]];
self.tableView.backgroundView = nil; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T22:04:58.453

您可以将图像添加为背景视图

```
[tableView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]]]; 
```

就是这样

# http - HTTP HEAD 分块编码

> ID：12520586
> 
> 赞同：0
> 
> 时间：2012-09-20T20:40:22.890
> 
> 标签：http, embedded, embeddedwebserver

我已经实现了一个 HTTP 1.1 服务器。它是一个嵌入式服务器，所以我只支持 RFC 的强制性功能。所有响应均以分块编码方式发送。由于 HEAD 是强制性的，因此也支持它。

HEAD 是没有正文的 GET。因此，服务器正在发送如下响应以响应 HEAD 请求：

```
HTTP/1.1 200 OK
Server: testServer
Connection: keep-alive
Transfer-Encoding: chunked 
```

我想知道的是必须添加一个“0\r\n”，因为它需要发出块结束的信号：

```
 HTTP/1.1 200 OK
 Server: testServer
 Connection: keep-alive
 Transfer-Encoding: chunked

 0 
```

我试图收集 RFC 中的相关部分：

“HEAD 方法与 GET 相同，只是服务器不得在响应中返回消息体。”

“对 HEAD 请求方法的所有响应都不得包含消息正文，即使实体标头字段的存在可能会让人们相信它们确实如此。”

“1\. 任何“不得”包含消息体的响应消息（例如 1xx、204 和 304 响应以及对 HEAD 请求的任何响应）总是以标头字段之后的第一个空行终止，无论消息中存在的实体头字段。”

到目前为止，我知道我的第一个解决方案（没有 0）是正确的。但是使用 Transfer-encoding: chunked 发送消息似乎很奇怪，它不会以块样式 0\r\n 终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-02T04:05:40.187

我猜这个问题已经解决了，因为它已经很老了，

最近我开发了一个用于流媒体视频的测试 http 服务器，我想提出我的学习，以便它可以帮助其他人。首先，“0\r\n”不是块结束的标记，分块的预告片是“0\r\n\r\n”。

对于标题，字符串应该如下所示

```
"HTTP/1.1 200 OK\r\n" \
"Server: testServer\r\n" \
"Connection: keep-alive\r\n" \
"Transfer-Encoding: chunked\r\n" \
"\r\n" 
```

注意最后一个 CRLF，它表示标题的结尾。

希望这有帮助。

# google-app-engine - 如何在特定域中的 API 项目上授权 Google 应用

> ID：12520588
> 
> 赞同：2
> 
> 时间：2012-09-20T20:40:22.197
> 
> 标签：google-app-engine, google-bigquery

我正在尝试使用 GAE 应用程序并将其以 CSV 格式将日志记录数据上传到 Google Storage，然后再上传到 Big Query（通过上传作业）。该文档说，授权 GAE 应用程序在 API 项目中具有写入权限的正确方法是将 GAE 应用程序添加为 API 项目中的团队成员。

但是，API 团队面板中有一个域限制，这使得我们无法添加文档中说我们需要的“@appspot.gserviceaccount.com”地址。我与我们的 IT 部门（他们设置了 API 项目）进行了交谈，他们不确定如何规避该限制。

我一定是遗漏了一些东西，但是当我们无法以这种方式添加帐户时，我们应该如何授权我们的 GAE 应用程序将数据推送到我们的 API 项目中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T00:22:22.343

1.  在您的域上创建一个 Google 群组。
2.  将该组电子邮件地址添加到您的 Google Developers 项目中的团队编辑。
3.  然后将 Google App Engine 应用程序电子邮件地址添加到该组。

在权限启动之前，您可能需要等待一小段时间。

# ruby-on-rails - 如何在属于rails中选择标签的选项标签上添加一个类？

> ID：12520590
> 
> 赞同：0
> 
> 时间：2012-09-20T20:40:23.873
> 
> 标签：ruby-on-rails, ruby, class

我正在尝试将一个类添加到由以下代码生成的选项标记中：

```
=f.datetime_select :clock_out, {class: 'option-large'} 
```

我不知道如何让它工作。这个助手是否提供了一种将类分配给生成的选项标签的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:56:50.393

怎么样[`options_for_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)？您还需要自己生成选项，但您也可以设置 html 属性。

所以它会像

```
select_options = options.map do |option|
                   [option.display_value,   # <option>this</option>
                    option.value,           # <option value="this"></option>
                    option.html_attributes] # a hash here <option class="option"></option>
                 end
=f.datetime_select :clock_out,
                   options_for_select(select_options,
                                      :selected => _your_default_value_)
                   {class: 'option-large'} 
```

生成 HTML 代码后，您可以使用 Ruby/Javascript 添加一个类。
在 Ruby（服务器端）中，您可以存储 datetime_select 的结果并 gsub 它。
在Javascript（客户端）中，您选择您的选项并将类添加到您想要的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:00:41.637

来自红宝石 api：

```
datetime_select(object_name, method, options = {}, html_options = {}) 
```

所以：

html_options = {:class => "option-large"}

# c# - C#鼠标钩入特定进程

> ID：12520599
> 
> 赞同：0
> 
> 时间：2012-09-20T20:40:56.153
> 
> 标签：c#, hook

我正在运行一个应用程序，我希望在按住鼠标左键的同时重复单击鼠标左键（因此基本上无需继续单击）。我编写了一个小型测试应用程序，它连接到鼠标事件并监听 lb 向下/向上事件。但是，该应用程序会监听我桌面上任何位置的鼠标点击。有没有办法让它只听一个特定的过程？

这是我用来监听鼠标点击的测试应用程序：

```
class Program
{
        private delegate IntPtr LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam);
        private static LowLevelMouseProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;
        private static bool _leftButtonDown;

        public static void Main()
        {
            _hookID = SetHook(_proc);
            Application.Run();
            UnhookWindowsHookEx(_hookID);
        }

        private static IntPtr SetHook(LowLevelMouseProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_MOUSE_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private static IntPtr HookCallback(
            int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 &&
                MouseMessages.WM_LBUTTONUP == (MouseMessages)wParam)
            {
                _leftButtonDown = false;
                Console.WriteLine(_leftButtonDown);
            }

            if (nCode >= 0 &&
                MouseMessages.WM_LBUTTONDOWN == (MouseMessages)wParam)
            {
                _leftButtonDown = true;
                Console.WriteLine(_leftButtonDown);
                StartTest();
            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        private static void StartTest()
        {
            Task.Factory.StartNew(() =>
                {
                    while (_leftButtonDown)
                    {
                        Console.WriteLine("SENDING");
                    }
                });
        }

        private const int WH_MOUSE_LL = 14;

        private enum MouseMessages
        {
            WM_LBUTTONDOWN = 0x0201,
            WM_LBUTTONUP = 0x0202
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelMouseProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

        [DllImport("User32.dll")]
        public static extern uint SendInput(uint numberOfInputs, [MarshalAs(UnmanagedType.LPArray, SizeConst = 1)] INPUT[] input, int structSize);

        [StructLayout(LayoutKind.Sequential)]
        public struct MOUSEINPUT
        {
            public int dx;
            public int dy;
            public uint mouseData;
            public uint dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct KEYBDINPUT
        {
            public ushort wVk;
            public ushort wScan;
            public uint dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct HARDWAREINPUT
        {
            uint uMsg;
            ushort wParamL;
            ushort wParamH;
        }

        [StructLayout(LayoutKind.Explicit)]
        public struct INPUT
        {
            [FieldOffset(0)]
            public int type;
            [FieldOffset(4)] //*
            public MOUSEINPUT mi;
            [FieldOffset(4)] //*
            public KEYBDINPUT ki;
            [FieldOffset(4)] //*
            public HARDWAREINPUT hi;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:18:01.980

您可以使用 的第 4 个参数`SetWindowsHookEx()`，即`dwThreadId`参数，进行选择性。您需要传递要监视的进程的 GUI 线程的线程 ID。例如，`GetWindowThreadProcessId()`如果您拥有进程拥有的窗口之一的句柄，则获取该值。如果是您自己的进程，则使用`GetCurrentThreadId()`. 如果它是一个 Winforms 应用程序，那么喜欢`IMessageFilter`而不是钩子。

# javascript - Node.js 和 instagram API，“无法将文本帧解码为 UTF-8”

> ID：12520603
> 
> 赞同：1
> 
> 时间：2012-09-20T20:41:11.207
> 
> 标签：javascript, node.js, instagram

我正在使用 http node.js 模块进行简单的 instagram API 调用。只是这样一个简单的请求：

```
getJSON : function(options, on_result, on_error) {

    var req = http.request(options, function(res) {

        var output = '';
        res.setEncoding('utf8');

        res.on('data', function (chunk) {
            console.log(chunk);
            return output += chunk;
        });

        return res.on('end', function() {
            var obj = JSON.parse(output);
            on_result(res.statusCode, obj);
        });
    });

    req.on('error', function(err) {
        on_error(err);
    });

    return req.end();
} 
```

on_result 函数只是使用 JSON.stringify 对其进行字符串化，并使用此函数将其通过 Web 套接字发送：

```
var connection = request.accept(null, request.origin);
connection.sendUTF(JSON.stringify(obj)); 
```

当我启动节点服务器并将浏览器指向我的 url 时，我从 chrome 和 firefox 得到这个：

> 无法将文本帧解码为 UTF-8。

我昨天运行这个绝对没有问题。

在 http 'on data' 函数中，我将数据注销到控制台，我在屏幕上看到的内容看起来不错，除了某些转义字符，例如：

```
"text":"\ud83d\ude1d\ud83d\ude02\ud83d\udc4f\ud83d\udc8b"
"full_name":"\ud83c\uddee\ud83c\uddf9\u21e8\u261eSara\u261c\u21e6\ud83c\uddee\ud83c\uddf9" 
```

然后，当它被 JSON 字符串化时，这些转义序列变成这样：

```
"text":"<d83d><de1d><d83d><de02><d83d><dc4f><d83d><dc8b>"
"full_name":"<d83c><ddee><d83c><ddf9>â¨âSaraââ¦<d83c><ddee><d83c><ddf9>" 
```

这就解释了为什么浏览器抱怨 UTF-8。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:03:54.560

您可以尝试逃避 \u 如下：

```
 return res.on('end', function() {
        var escaped_output = output.replace(/\\u/g, "\\\\u");  //<--
        var obj = JSON.parse(escape_output);
    }); 
```

另外，为什么要将“输出”转换为对象，然后再转换回字符串，而不是将其传递给响应时收到的 websocket。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:19:35.957

我已经确定数据来自这样的 instagram，除了尝试转义或删除非 utf-8 字符外，没有什么可以做的。由于只有某些字段是这样的，而我的应用程序不需要这些字段，我可以绕过它。

# c# - 尝试读取结果集加载 CSV 文件时遇到 MySQL 致命错误

> ID：12520609
> 
> 赞同：2
> 
> 时间：2012-09-20T20:41:31.600
> 
> 标签：c#, mysql

尝试将 CSV 文件加载到 MySQL 数据库中，我得到了运行时间

```
Fatal error encountered attempting to read the resultset. 
```

类似的问题在四月份被问到这里。我没有看到任何回复，但希望其他人已经看到了。这是来自调试器的命令：

```
"LOAD DATA LOCAL INFILE 'D:\\SANCentral\\Customer Files\\ibm\\70738\\0918\\Switch 
Port.csv' INTO TABLE By_Switch FIELDS TERMINATED BY ',' LINES TERMINATED BY '\\\r\\n' IGNORE 1 LINES" 
```

这是 C# 代码：

```
string ConnectionString =  String.Format(@"server={0};userid={1};
        password={2};database={3}", server, user, passwd, database);
        MySqlConnection sqlconnect = new MySqlConnection(ConnectionString);
        sqlconnect.Open();
        IEnumerable<FileInfo> files = this.InputFileListView.Items.Cast<FileInfo>();
        string commandstring = String.Format(@"LOAD DATA LOCAL INFILE '{0}' INTO TABLE {1} FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' IGNORE 1 LINES", 
                                                files.FirstOrDefault().ToString(), "By_Switch");
        MySqlCommand cmd = new MySqlCommand(commandstring,sqlconnect);
        cmd.ExecuteNonQuery(); 
```

我已验证数据库中的列名与传入 CSV 文件中的列名匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:08:29.393

所以我想通了。我使用 MySQL Workbench 运行相同的加载命令。MySQL 更能描述这些问题。首先，我在表中的列上有一个不正确的数据类型。接下来，显然如果你说一行以 \n 结尾，但它以 \r\n 结尾，那就是一个问题。在这个文件中，似乎有 \r\n 和 \n 的混合。所以我想我必须在加载文件之前规范化行尾。最后，缺少一些实际数据值，因此您会得到带有 , 的行。我不知道该怎么做。

# c++ - C++11：lambda 捕获以什么顺序被破坏？

> ID：12520611
> 
> 赞同：14
> 
> 时间：2012-09-20T20:41:48.243
> 
> 标签：c++, lambda, c++11, raii

假设我有两个本地智能指针，`foo`并且`bar`.

```
shared_ptr<Foo> foo = ...
shared_ptr<Bar> bar = ... 
```

这些智能指针是围绕资源的包装器，出于某种原因必须按顺序销毁这些资源`foo`，然后`bar`。

现在我想创建一个使用`foo`and的 lambda `bar`，但在包含它们的范围内寿命更长。所以我会按价值捕获它们，如下所示：

```
auto lambda = [foo, bar]() { ... }; 
```

这会在函数对象内`foo`创建副本。`bar`当函数对象被破坏时，这些副本也将被破坏，但我关心这发生的顺序。所以我的问题是：

当一个 lambda 对象被破坏时，它的按值捕获被破坏的顺序是什么？我如何（希望）影响这个顺序？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T20:57:02.067

规范涵盖了这个......有点。从 5.1.2 第 14 段开始：

> 如果实体被隐式捕获并且捕获默认值为 =，或者如果使用不包含 & 的捕获显式捕获实体，则通过副本捕获实体。对于通过副本捕获的每个实体，在闭包类型中声明了一个未命名的非静态数据成员。**这些成员的声明顺序是未指定的。**

重点补充。由于未指定申报顺序，因此未指定构造顺序（因为构造顺序与声明顺序相同）。因此，*破坏*顺序是未指定的，因为破坏顺序与构造顺序相反。

简而言之，如果您需要关心声明顺序（以及与其相关的各种构造/销毁顺序），*则不能*使用 lambda。您需要制作自己的类型。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T21:33:27.163

正如尼科尔所说，破坏的顺序是不确定的。

但是，您不必依赖 lambda 的破坏。您应该能够`foo`在 lambda 结束时简单地重置，从而确保它之前释放其资源`bar`。您还必须将 lambda 标记为`mutable`好像。这里唯一的缺点是你不能多次调用 lambda 并期望它工作。

```
auto lambda = [foo, bar]() mutable { ...; foo.reset(); }; 
```

* * *

如果您确实需要多次调用您的 lambda，那么您需要想出一些其他方法来控制释放的顺序。一种选择是使用具有已知数据成员顺序的中间结构，例如`std::pair<>`：

```
auto p = std::make_pair(bar, foo);
auto lambda = [p]() { auto foo = p.second, bar = p.first; ... }; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T21:31:17.770

与其担心破坏的顺序是什么，不如解决这是一个问题的事实。请注意，您对两个对象都使用了共享指针，您可以通过在对象中添加一个共享指针来确保销毁顺序，该共享指针需要使另一个对象寿命更长。到那时，是否`foo`更早`bar`被销毁都无关紧要。如果顺序正确，共享指针的销毁将立即释放对象。如果顺序不正确，则附加的共享指针将保持对象处于活动状态，直到另一个对象消失。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-20T21:00:12.030

根据我拥有的 C++11 文档（即免费赠品，稍早于批准 n3242），第 5.1.2 节，第 21 节，捕获按声明顺​​序构建并以相反的声明顺序销毁。但是，未指定申报顺序（第 14 段）。所以答案是，“以未指定的顺序”和“你不能影响它”（除了，我想，通过编写编译器）。

如果 bar 真的需要在 foo 之前被破坏，那么 bar 持有一个指向 foo 的共享指针（或类似的东西）是明智的。

# jquery - 大于选择器不起作用

> ID：12520613
> 
> 赞同：1
> 
> 时间：2012-09-20T20:41:57.967
> 
> 标签：jquery, css, selector, parseint

我有一个启用滑动手势的画廊。通过向左/向右滑动，用户浏览图库。我需要限制滑动 div 的位置，使其不会偏离轨道，即一旦您到达页面，显然所有图像都在右侧，所以我不希望用户向左滑动（到空白空间） .

我尝试使用“大于”，但它不起作用。

```
var theWidth = $(window).width();

function processingRoutine() {
    var swipedElement = document.getElementById(triggerElementID);

    if ( swipeDirection == 'left' ) {
        $(".frame").animate({marginLeft: '-='+theWidth});
    } else if ( swipeDirection == 'right' ) {
        $(".frame").animate({marginLeft: '+='+theWidth});

        if ( parseInt($(".frame").css("margin-left")) > 1 ) {
            $(".frame").animate({marginLeft: "0px"});
        }
    }
} 
```

您可以在此处查看整个源代码：http: [//joinersart.co.uk/mtest](http://joinersart.co.uk/mtest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:08:10.803

改变：

```
$(".frame").animate({margin-left: "0px"}); 
```

到：

```
$(".frame").animate({marginLeft: "0px"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:59:14.363

我相信您的问题与`parseInt()`. 因为 margin-left 的值可以是 '0px'`parseInt()`我相信将使用 8 的基数。（已弃用）如果您使用`parseInt(frame.css("margin-left"), 10)`它，则应使用基数 10（十进制）将字符串解析为正确的整数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:03:38.757

我犯了一个简单的错误：

我对 margin-left 应该在哪里注册“禁止”区域感到困惑。我最初认为如果 margin-left 超过 1px 就足够了。事实上，它实际上需要减去我移动的数量。

所以而不是：

```
 if ( parseInt($(".frame").css("margin-left")) > 1 ){... 
```

它应该是：

```
 if ( parseInt($(".frame").css("margin-left")) > -theWidth ){... 
```

# c - 截断 C 中的行以继续下一行

> ID：12520616
> 
> 赞同：1
> 
> 时间：2012-09-20T20:42:06.213
> 
> 标签：c

我被困在一个我必须编写的程序上。

基本上它会询问用户一个角色，以及他们希望该角色显示多少次。每行只有 10 个字符。我不知道如何在 10 点停止然后继续下一行。

示例输出：

```
Enter a character: *
Enter the number of characters to display: 36
**********
********** 
```

我目前正在使用 For 循环。

编辑**我的代码

```
main () {
    int num = 0,i;
    char get_char;

    printf("Enter a character: ");
    scanf("%c", &get_char);

    printf("Enter the number of characters to display: ");
    scanf("%d", &num);

    for (i = 0;i < num; i++) {
        printf("%.10c",get_char);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:46:02.263

在打印字符后的当前 for 循环中，添加一个条件：

```
 for (i = 0;i < num; i++) {
      printf("%c",get_char);
      if((i+1)%10==0) 
          printf("\n");
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:45:52.133

要转到下一行，您必须打印出字符，该字符通过使用C 样式字符串中`linefeed`的转义序列来指示。`\n`当编译器看到这个序列时，它将使用换行符（其十六进制值为`0a`）。当终端看到这个字符时，它会将光标移动到下一行。

要检测行尾，您可以使用嵌套`for`循环或使用模数 ( `%`) 运算符。

使用嵌套`for`循环，您可以简单地计算要打印的字符数，并在一个将循环次数的外部循环中打印一个字符最多 10`total/10`次。

不过，模数运算符在代码中更简洁一些。它计算除操作数后的余数。例如，`4 % 2`将导致`0`(4 = 2 * 2 + **0** ) 而`5 % 2`将导致`1`(5 = 2 * 2 + **1** )。在您的示例中，您需要检查`(i % 10 == 0)`.

# php - 删除不同列mysql上的相同值行

> ID：12520617
> 
> 赞同：3
> 
> 时间：2012-09-20T20:42:09.020
> 
> 标签：php, mysql

我遇到了一个非常基本的问题，我想跳过在三列中有重复值的行。

表格提要

```
id,type,user_id,friend_id,date
1, 'friend', 4 , 5 , 5/5/2010
2, 'friend', 5 , 4 , 5/5/2010 
```

现在这就是数据的保存方式（我无法更改保存模块）

因为两者都有相同的东西，所以我只想选择它们作为 1 行而不是 2。我不想在 PHP 端验证和删除它，b/c 如果我在 PHP 上做分页会被打扰

编辑：

表结构

```
create table `feed` (
    `id` double ,
    `type` blob ,
    `user_id` double ,
    `type_id` double ,
    `date` datetime 
); 
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('78','friends','1314','1313','2012-09-03 19:48:14');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('79','friends','1313','1314','2012-09-03 19:48:14');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('80','friends','1314','1312','2012-09-03 19:49:07');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('82','friends','1313','1312','2012-09-03 19:49:09');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('84','friends','1315','1312','2012-09-03 19:49:24');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('86','friends','1315','1313','2012-09-03 19:49:33');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('87','friends','1313','1315','2012-09-03 19:49:33');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('97','friends','1317','1312','2012-09-03 19:55:06');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('99','friends','1313','1317','2012-09-03 19:56:01');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('100','friends','1317','1313','2012-09-03 19:56:01');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('101','friends','1315','1317','2012-09-03 19:56:58');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('102','friends','1317','1315','2012-09-03 19:56:58');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('104','following','1313','1193','2012-09-03 19:59:39');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('105','following','1313','1308','2012-09-03 19:59:51');
insert into `feed` (`id`, `type`, `user_id`, `type_id`, `date`) values('106','following','1313','1098','2012-09-03 19:59:58'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:45:37.983

您正在寻找的函数是 DISTINCT()。这允许您按该列对表进行分组并删除重复项。

只需确保在您的选择语句中也选择其他字段列：

> SELECT `id`, DISTINCT( `type`), `user_id`, `friend_id`,`date`从表名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:51:03.640

您可以`JOIN`在桌子上执行 a ，这应该可以满足您的需求。这样的事情可能会奏效：

```
SELECT * FROM tableName a
JOIN tableName b ON a.user_id = b.friend_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:26:20.487

这是最终的解决方案！如果存在相同的友谊对（反向），则只需要 user_id>friend_id 的那个。

```
SELECT DISTINCT type, user_id, friend_id, date 
FROM table t1 
WHERE t1.user_id > t1.friend_id 
    OR NOT EXISTS (
        SELECT * FROM table t2 
            WHERE t1.type=t2.type AND t1.date=t2.date 
            AND t2.user_id = t1.friend_id AND t2.friend_id = t1.user_id 
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T21:20:03.107

您应该通过运行来摆脱那些重复的记录：

```
DELETE FROM table t1 WHERE
  EXISTS (
    SELECT * FROM table t2 
    WHERE t1.type=t2.type AND t1.date=t2.date 
      AND t2.user_id = t1.friend_id AND t2.friend_id = t1.user_id 
      AND t1.user_id > t2.user_id 
  ) 
```

然后，您可以通过以下方式获得不同的友谊记录：

```
SELECT DISTINCT type, user_id, friend_id, date FROM table 
```

此外，您可以编写一个在 INSERT 上触发的数据库触发器，它检查是否已经存在重复项（具有反转的 user_id 和friend_id）。如果存在，它会 ROLLBACK，否则允许 INSERT。

# optimization - 如何消除汇编程序可执行文件膨胀？

> ID：12520618
> 
> 赞同：3
> 
> 时间：2012-09-20T20:42:10.663
> 
> 标签：optimization, assembly, filesize

我在[Gas](https://github.com/mcandre/mcandre/tree/master/gas/hello)、[NASM](https://github.com/mcandre/mcandre/tree/master/nasm/hello)和[YASM](https://github.com/mcandre/mcandre/tree/master/yasm/hello)中有工作的多平台 Hello World 代码，我想将它们相应的可执行文件从 76KB 缩小到对于 Hello World 汇编程序更合理的东西，将其视为基本的 Hello World C 程序会导致一个 80KB 的可执行文件，并且程序集应该小得多。我相信大部分可执行文件都充满了来自链接器选项的垃圾。

痕迹：

```
LIBS=c:/strawberry/c/i686-w64-mingw32/lib/crt2.o -Lc:/strawberry/c/i686-w64-mingw32/lib -lmingw32 -lmingwex -lmsvcrt

ld ld -o $(EXECUTABLE) hello.o $(LIBS)

hello.exe
Hello World! 
```

代码：

```
.data

msg: .ascii "Hello World!\0"

.text

.global _main

_main:

pushl $msg
call _puts

leave
movl $0, %eax
ret 
```

如果我删除 LIBS 中的任何选项，链接过程会失败，或者生成的可执行文件在运行时会引发 Windows 错误。所以合乎逻辑的做法是将`puts`调用替换为更简单的调用，例如 sys_write，**但我不知道如何执行这个 multiplatform**。网上的小文档说用于`int 0x80`执行对内核的调用，但这仅适用于 Linux，不适用于 Windows，我希望我的汇编代码是多平台的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:41:54.900

您的程序膨胀主要来自 C 运行时库。在 Windows 中，如果您编写自己的“微型”CRT，一个简单的 hello world 程序可以小于 5K。这是一个项目的链接，它解释了有关如何将 EXE 缩小到尽可能小的尺寸的所有细节：

[http://www.codeproject.com/Articles/15156/Tiny-C-Runtime-Library](http://www.codeproject.com/Articles/15156/Tiny-C-Runtime-Library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:46:59.970

对于 Windows，您可以调用本机 Win32 API 函数，例如[`GetStdHandle()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx)直接[`WriteFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)写入 stdout。

对于类 Unix 系统，您可以`write()`使用文件描述符 1 为 stdout 调用系统调用。

具体如何执行这些操作的详细信息将取决于您使用的汇编程序和操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:50:08.710

You should be able to link dynamically to the C runtime library instead of including it statically. I don't know how to do it in Linux, but in Windows you can use `msvcrt.dll`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T00:39:09.493

汇编器膨胀很可能来自 C lib 依赖项，尤其是对于`puts`. 重构代码以在不使用 C 调用的情况下打印 Hello World 很可能需要特定于操作系统的汇编代码，因为 Unix 标准涉及调用内核的中断，而 Windows 有自己的类似 VB 的 API 用于此类任务。

我确实设法找到了一个解决方案，可以创建小型可执行文件，同时仍然保持平台不可知论。通常，C 预处理器指令可以解决问题，但我不确定哪些汇编语言甚至具有预处理器语法。但是可以通过使用受控的、包含的汇编代码文件来实现类似的效果。包装代码文件的集合可以处理特定于操作系统的汇编代码，而包含的汇编文件则负责其余的工作。一个简单的 Makefile 可以运行相应的构建控制台命令来引用所需平台上的相应包装器代码。

例如，我能够快速构建以这种方式工作的[FASM代码。](https://github.com/mcandre/mcandre/tree/master/fasm/hello)（虽然我还没有通知它实际上绕过`puts`一些不那么臃肿的东西。）无论如何，这是进步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T20:52:21.457

因为几乎所有 C 函数都使用 CDECL 调用约定，调用者调整堆栈而不是被调用者（函数）。

如果你现在不学习如何正确地做事，你会遇到麻烦，更努力地阅读以追踪错误。

尝试这个：

```
 push    szLF
    push    esp
    push    fmtint2
    call    printf
    add     esp, 4 * 3

    push msg
    call puts 

    push    szLF
    push    esp
    push    fmtint2
    call    printf
    add     esp, 4 * 3 
```

运行它并注意调用看跌期权之前和之后的数字。他们不一样不是吗？嗯，他们应该是一样的。现在添加：

```
 add     esp, 4 
```

在你打电话给 puts 并再次运行它之后.. 现在数字是一样的吗？这意味着您有一个平衡的堆栈指针，并且该函数使用 CDECL 调用约定。

# javascript - 检查javascript中的文件夹中是否缺少图像

> ID：12520620
> 
> 赞同：0
> 
> 时间：2012-09-20T20:42:11.827
> 
> 标签：javascript

我正在制作一个小型幻灯片应用程序来显示 html 中的图像。

图像的名称类似于：

*   “MOD01_001.jpg”
*   “MOD01_002.jpg”
*   “MOD01_004.jpg”等等...

有时缺少一个或多个图像，而以前的图像仍在缓存中，因此我无法检查是否已加载新图像以检查宽度/高度属性。

我该怎么做才能检查列表中是否缺少图像（我知道我无法从客户端浏览器内部访问文件信息）。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:57:10.027

这会将它们全部加载，因此可能非常糟糕：

```
var images = ['MOD01_001.jpg','MOD01_002.jpg','MOD01_003.jpg'];

for (i in images) {
  checkIfImageExists(images[i]);
}

function checkIfImageExists(image_path) {
  var img = new Image();

  img.onerror = function(){
    console.log('Could not load image: ' + img.src);
  }
  img.onload = function(){
    console.log('Loaded image: ' + img.src);
  }

  img.src = image_path;
} 
```

# css - 如何在使用 flexie.js 的同时在 IE8 中格式化 3 列？

> ID：12520621
> 
> 赞同：1
> 
> 时间：2012-09-20T20:42:27.337
> 
> 标签：css, internet-explorer-8

我有 3 列，每列都有单独的选项。我希望它们从左到右显示，他们这样做，除了在 IE8 中。我们正在使用一个名为[Flexie.js 的插件。](http://flexiejs.com/)目前，在 IE8 中渲染页面时，右侧的第 3 列最终位于中间列之下。所有三列都具有相同的属性：

```
min-width:210px;
max-width:290px;
margin-right:20px;
-webkit-box-flex: 1;
-moz-box-flex: 1;
box-flex: 1; 
```

有任何想法吗？

# foreign-keys - 我可以避免为一对一关系创建外键约束吗？

> ID：12520623
> 
> 赞同：0
> 
> 时间：2012-09-20T20:42:38.413
> 
> 标签：foreign-keys, jpa-2.0, eclipselink, database-partitioning

我想使用 eclipselink 对我的数据库进行分区。出于性能原因，我将一张表（实体 A）复制到所有节点，一张表（实体 B）在所有节点上进行哈希分区。

由于每个 A 都与 B 实体具有一对一的关系，因此 eclipseLink 在“A”表的列上创建了一个外键约束。由于不同的分区机制，对于 A 中的许多条目，此约束将失败。

目前实体的属性可以每天更改，所以我不想错过用于测试和开发的 ddl-generation。

是否可以告诉 eclipse 链接不要创建这个特定的外键？所有外键？

当前的测试数据库是内存中的 hsqldb。是否可以告诉数据库忽略外键约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:13:16.817

您可以使用自己的 DDL 脚本来创建表，或者使用自己的脚本或本机 SQL 查询删除约束。

您可以通过子类化您的数据库平台类（并将“eclipselink.target-database”与您的子类一起使用）来禁用所有约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:50:48.617

如果没有外键，就没有关系。

`b`或者，您可以在类`A`中标记该属性，`transient`使其不受 JPA 管理。这意味着您必须自己检索适当的`b`值。

此外，您可以尝试使字段可为`b`空（如果 JPA 支持关系，我不确定）并检查会发生什么。`null=true``One-to-One`

# google-app-engine - GAE 邮件 API 回复功能

> ID：12520627
> 
> 赞同：1
> 
> 时间：2012-09-20T20:42:48.803
> 
> 标签：google-app-engine, gmail

我有一个反馈表，用户可以在其中发表评论。这些评论将通过电子邮件发送给我，用户的电子邮件地址将在标题中显示为 reply_to，这意味着如果我单击 GMAIL 中的“回复”按钮，我可以处理这些评论。但是，“回复”标题似乎不起作用。每次我点击“回复”时，我都是在给自己写信。有什么建议么？

基本功能定义如下：

代码

```
<!-- The contact form-->    
<form method="POST" action=contactus_output.html>
    <table align="center" cellpadding="15" cellspacing="15">
        <tr><th colspan="2" align="left"><h1>Contact Form</h1></th></tr> 
        <tr><th>Name:</th><td><input type="text" name="nm.name" id="id.name" required="required" /></td></tr>
        <tr><th>Email:</th><td><input type="email" name="nm.email" id="id.email" required="required" /></td></tr>
        <tr><th>Subject:</th><td><select id="sub" name="nm.sub" required="required"/><option value="" selected="selected">Select one of the subjects</option><option value="1" >Suggestion</option><option value="Bug report" >Bug report</option><option value="Other" >Other</option></select></td></tr>
        <tr><th>Message:</th></tr>
        <tr><th></th><td><textarea id="msg" rows="10" cols="40" name="nm.msg" required="required"></textarea></td></tr>
        <tr><td colspan="2"><input type="submit" value=" Let us know! "></td></tr>
    </table>
 </form> 
```

Python代码

```
#define the function
def sendanemail(name,subj, rply, msg):
    message = mail.EmailMessage(sender="Support <myapp@gmail.com>")
    message.subject = subj
    message.to = "Ubertool Support <myapp@gmail.com>" 
    message.reply_to= rply
    message.cc = rply   
    message.body = '''A message submitted by %s, %s \n''' %(name, rply)
    message.body = message.body+msg
    message.send()

def post(self):        
    form = cgi.FieldStorage()
    name = form.getvalue('nm.name')
    rply = form.getvalue('nm.email')
    subj = form.getvalue('nm.sub')
    msg = form.getvalue('nm.msg')
    sendanemail(name,subj, rply, msg) 
```

电子邮件标题

```
from:    Support myapp@gmail.com via 2uix4h7xygsz66weerlq.apphosting.bounces.google.com 
reply-to:    abc@gmail.com
to:  Support <myapp@gmail.com>
cc:  abc@gmail.com
date:    Thu, Sep 20, 2012 at 5:20 PM
subject:     Other
mailed-by:   2uix4h7xygsz66weerlq.apphosting.bounces.google.com 
```

问题是我点击“回复”，我的 GMAIL 回复到“myapp@gmail.com”，而不是“abc@gmail.com”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:49:17.050

以下是评论的摘要。

这个问题似乎与Gmail有关，因为实际上发送了Reply-To标头，并且是因为发送者和接收者是相同的。

一种解决方法是使用不同的发件人和收件人地址，以实现`<app-id>@<app-id>.appspotmail.com`可以使用电子邮件地址。

# bit-manipulation - 位运算符的实际应用

> ID：12520628
> 
> 赞同：0
> 
> 时间：2012-09-20T20:42:52.343
> 
> 标签：bit-manipulation, operator-keyword

> **可能的重复：**
> [按位运算的实际应用](https://stackoverflow.com/questions/3883384/practical-applications-of-bitwise-operations)

我已经编程好几年了，我一直想知道按位运算符的实际应用。
在我的编程经验中，我不必使用按位运算符。它们最常在什么时候使用？在我的编程生涯中，我有必要学习这些吗？谢谢你。友好地，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:18:41.623

我最近不需要它，但是在编码帕斯卡时，只要除数或乘法是 2 的幂，我就用它来乘法或除法。

颜色存储在一个字节中，文本颜色在低 4 位，背景颜色在高 4 位。

使用 c << 4 代替 if c * 16 和 c >> 4 代替 c / 16 来保存或检索背景要快很多倍。

出于某种原因，使用 c <<4 >> 4 检索 textcolor 也比 c & 15 (bitvize and) 更快。可能注册相关;）但那是我头上的方式：D

但除非您正在执行校验和计算、压缩或加密，否则您可能无需这样做。

即使您可以多次将位存储在 int 中，驱动程序也可以以任何方式为您优化事物，并且在 c# 中，您可以使用 Flag 枚举自动将位标志打包成字节、字或整数值。

所以我猜想，既然你还没有找到用途，你可能没有在他们有意义的领域工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:46:40.123

位运算经常在硬件附近使用——在打包数据、进行压缩或将多个布尔值打包成一个字节时。按位运算直接映射到处理器指令，并且通常非常快。

如果您正在使用 I/O 或设备接口，则按位操作变得非常必要 - 将位域的各个部分分离为重要数据。

或者您可以将其用作快速乘以二。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:00:37.850

二进制和位旋转的另一个有趣用法。

将摩尔斯电码打包成一个字节。A`.`是`0`，a`-`是 1。

```
A = .- 
A = 00000001xB
// Add a 'start bit'

A = 00000101xB 
```

将位移动 8 次左右，找到起始位后开始播放声音。

```
 +------- Monitor this position
    V
A = 00000101 // Starting off
A = 00001010 // Nothing yet
A = 00010100 // Still nothing
A = 00101000 // WOw, a lot of nothing
A = 01010000 // Our boring life, we do nothing
A = 10100000 // Wow! A start bit! Prep to play sound.
A = 01000000 // Play a short
A = 10000000 // And play a long. 
```

# haml - HAML 文件中的自动折叠

> ID：12520629
> 
> 赞同：1
> 
> 时间：2012-09-20T20:42:56.163
> 
> 标签：haml, vim

我正在寻找自动折叠我正在使用的几种类型的文件的解决方案，主要是、 、`*.rb`和`*.scss`其他一些常用语言。`*.css``*.html`

但是我找不到自动折叠`haml`文件的解决方案。我找到了这两个主题，但我不太确定这些示例中的 vimrc 行是什么意思。

*   [scss 的 vim 折叠语法](https://stackoverflow.com/questions/8671046/vim-folding-syntax-for-scss)
*   [如何在 Vim 中启用自动折叠？](https://stackoverflow.com/questions/4789605/how-do-i-enable-automatic-folds-in-vim)

你知道我怎么能做到这一点吗？任何帮助，将不胜感激：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:38:16.563

您可以通过手动编辑语法文件的副本来根据自己的喜好自定义它

1.  将 $VIMRUNTIME/syntax/haml.vim 复制到 $HOME/.vim/syntax/ 或 vimfiles/syntax/ 文件夹以自定义其行为

2.  根据修改`:help syn-fold` （基本上在要折叠的语法区域末尾添加单词“fold”）

3.  将它放在您的 .vimrc 中，以便在编辑 haml 文件时使用 foldmethod=syntax

    `autocmd BufRead,BufNewFile *.haml setlocal foldmethod=syntax`

# ruby - RoR：我怎样才能让我的微博出现？

> ID：12520635
> 
> 赞同：0
> 
> 时间：2012-09-20T20:43:40.200
> 
> 标签：ruby, ruby-on-rails-3

这是用户显示他们应该显示的视图。..

```
<section>
  <div id= "purchases">
    <%= render 'shared/micropost_form_purchase' %>
  </div>
  <div id="sales">
    <%= render 'shared/micropost_form_sale' %>
  </div>
</section>

<%= @sales %>  <%# This is just to see if it outputs anything. It doesn't :( %>
<div id="purchases list">
  <ol class="microposts">
    <%= render @purchases unless @purchases.nil? %>
  </ol>
</div>

<div id="sales list">
  <ol class="microposts">
    <%= render @sales unless @sales.nil? %>
  </ol>
</div> 
```

所以表格（部分）加载得很好，但是当我发帖时，无论是购买清单还是销售清单都没有出现。我检查了数据库，它们正在与列中指示种类（销售或购买）的条目一起创建。

以下是表格：

```
<%= form_for (@micropost) do |f| %>

  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

和

```
<%= form_for (@micropost) do |f| %>

  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "sale" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

另外，这里是 users_controller.rb 的显示部分

```
 def show
    @user = User.find(params[:id])
    @micropost=Micropost.new
    @microposts = @user.microposts.paginate(page: params[:page])
  end 
```

这是 microposts_controller.rb 的显示部分

```
def show

    @micropost = Micropost.find(params[:id])
    @microposts = Micropost.where(:user_id => @user.id)
    @purchases= @microposts.collect{ |m| m if m.kind == "purchase"}.compact
    @sales = @microposts.collect{ |m| m if m.kind == "sale"}.compact

  end 
```

此外，借助这篇文章 (http://stackoverflow.com/questions/12505845/ruby-error-wrong-number-of-arguments-0-for-1#12505865) 变量@microposts、@purchases 和@sales 都在控制台中正确输出。

谁能帮我吗？

编辑：使用控制台中给出的答案所建议的范围（它正确输出所有内容，但它们仍然没有显示在视图中。这是否意味着我的用户显示页面的语法有问题？

编辑2：

这是视图/microposts/_micropost.html.erb 代码

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:13:15.873

我在没有看到更多代码的情况下做出一些假设，但看起来你可以编写你所展示的内容略有不同。我假设您的数据库正在迁移并且具有所需的列，例如 Micropost#kind、Micropost#user_id 等。您可以使用范围来更富有表现力地改进微博集合。阅读有关 ActiveRecord 范围的信息可能会有所帮助：http: [//guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)。

```
class Micropost < ActiveRecord::Base
  belongs_to :user

  scope :purchases, where(:kind => "purchase")
  scope :sales, where(:kind => "sale")

  # your code
end 
```

我还假设您的用户有很多微博：

```
class User < ActiveRecord::Base
  has_many :microposts

  # your code
end 
```

对于您的表单，我建议将您的隐藏字段附加到表单对象（f.hidden_​​field），这样您就不必将名称指定为“micropost [kind]”。

```
<%= form_for(@micropost) do |f| %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= f.hidden_field :kind, :value => "sale" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

在 MicropostsController#show 中，您可以使用新的范围：

```
def show
  @micropost = Micropost.find(params[:id])
  @microposts = @user.microposts
  @purchases = @microposts.purchases
  @sales = @microposts.sales
end 
```

您还应该确认您的 MicropostsController#create 操作实际上是将微帖子添加到发送表单的用户（我假设当前用户方法）。

```
def create
  @micropost = current_user.microposts.create(params[:micropost])
  # yada
end 
```

您还可以在创建购买或销售微博后在 Rails 控制台上确认预期结果：

```
Micropost.purchases
Micropost.sales 
```

同样，如果没有看到更多的代码库，我可能会遗漏一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:09:41.193

检查`Micropost.count`, `@purchases.count`, `@sales.count`（通过在控制器或视图的某些部分中打印它们）以查看记录是否确实存在。

此外，如果您想渲染集合 like`@sales`和`@purchases`，您需要确保模型部分存在（`_micropost.html.erb`在您的情况下）。这可能是您需要查找视图错误的地方。如您所知，该文件可能是空的，因此根本不会出现任何错误。

问题也可能在于您的 microposts#create（或您保存微帖子的任何操作），微帖子应与 current_user 相关联：

```
@micropost = current_user.microposts.build(params[:micropost]) 
```

考虑到这个问题和您之前的问题，我建议您在拆开之前再次查看 RoR 教程的原始代码（并验证所有测试是否通过）。你总是可以为你的实验添加新的测试，它们将有助于找出你出错的地方。

# iphone - 如何从 RootController 过渡到 DetailController UITableview iphone sdk

> ID：12520640
> 
> 赞同：1
> 
> 时间：2012-09-20T20:44:03.147
> 
> 标签：iphone, sdk, tableview, uimodaltransitionstyle

我有一个带有一些单元格的 UITableView。我不使用 NavigationController，所以我想使用 UIModalTransition 从 RootController、我的 TableViewcell 切换到我的 DetailView，但想添加一个导航栏来属性一些操作，比如 Backbutton。我不想使用 seguesTransition，我只使用了 XIB 文件和任何 Storyboard。

我真的不知道如何在 TableView 中使用模态转换，有人知道我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:19:06.363

你有没有尝试过

```
 [self presentModalViewController:yourViewController animated:YES]; 
```

然后您可以为其中的过渡设置某些样式。

在另一个视图上添加一个导航栏并放置一个 backbarbuttonitem 并向其添加一个操作以返回到您以前的视图。

虽然你为什么要这样做，但我不清楚。如果您不想在第一个视图上使用导航控制器，则可以将其设置为隐藏。

```
 self.navigationController.navigationBar.hidden = YES; 
```

然后在其他视图的viewDidLoad中你可以做相反的事情，即

```
 self.navigationController.navigationBar.hidden = NO; 
```

这是用相对较少的代码实现您想要的非常简单的方法！

# c++ - 将属性传递给子规则以增强精神

> ID：12520649
> 
> 赞同：2
> 
> 时间：2012-09-20T20:44:21.983
> 
> 标签：c++, boost, boost-spirit

我有两个具有相同属性的规则。

是否可以将 matrix_ 规则的属性传递给 matrixBlock_ 子规则？我想阻止重复指令创建表单向量<>的属性。相反，它应该继续写入 matrix_ 的属性（numBlocks 的时间）。我试图将属性作为继承属性传递给子规则并编译（见下文）。但是我的向量中有几个“幽灵”条目不是来自 phoenix::push_back。此外，这似乎不是我的最佳方式。我们是否可以在 matrixBlock_ 中自动传播属性而不是语义动作？

```
typedef vector<columnT> Matrix;
matrix_ = repeat(numBlocks)[ matrixBlock_(_val) ];
matrixBlock_ = *column[phoenix::push_back(_r1, _1)];

qi::rule<Iterator, Matrix(), ascii::space_type> matrix_;
qi::rule<Iterator, void(Matrix&), ascii::space_type> matrixBlock_; 
```

* * *

## 更新

澄清问题：

如果我编写没有语义动作的规则，matrix_ 的综合属性将是

```
vector< vector< columnT > > 
```

-

```
typedef vector<columnT> Matrix;
matrix_ = repeat(numBlocks)[ matrixBlock_ ];
matrixBlock_ = *column;

qi::rule<Iterator, Matrix(), ascii::space_type> matrix_;
qi::rule<Iterator, Matrix(), ascii::space_type> matrixBlock_; 
```

我希望它具有与一维数组 matrixBlock_ 相同的属性类型。

* * *

我的实际解决方案是只使用一个规则。（看起来很容易:-)）

```
typedef vector<columnT> Matrix;
matrix_ = repeat(numBlocks)[ *column_[ phoenix::push_back(_val, _1) ] ];
//matrixBlock_ = *column;

qi::rule<Iterator, Matrix(), ascii::space_type> matrix_;
//qi::rule<Iterator, Matrix(), ascii::space_type> matrixBlock_; 
```

* * *

## 更新

我能够在 vs2010 中使用此代码重现幻影条目并提升 1.46.1

[http://liveworkspace.org/code/505091dc4631a379763567168a728e0c](http://liveworkspace.org/code/505091dc4631a379763567168a728e0c)

> 输出为：42、45、-9、3、2、1、12、34、56、0、0、0

我的错误是使用旧的 Boost 版本。1.5 没有 phontoms。

现在我有两个工作版本的语法。是否可以在不使用 push_back 语义动作的情况下重新设计语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:38:28.070

# 更新

回答您编辑的问题：是的，您可以在没有语义操作的情况下执行此操作，只需：

```
template<typename It>
struct Parser : qi::grammar<It, Matrix(), qi::space_type>
{
    Parser() : Parser::base_type(matrix_)
    {
        matrixBlock_ = qi::lit(";") >> *qi::int_;
        matrix_      = qi::repeat(3)[ matrixBlock_ ];
    }
    qi::rule<It, Matrix(), qi::space_type> matrixBlock_, matrix_;
}; 
```

请注意，您*可能*想要验证行数/列数。**[请参阅我的扩展示例](http://liveworkspace.org/code/d4b5c68b584b4ce494e4c2b91c1fbcb2)**，它使用额外的语义操作来检查（注意从`*int_`to的细微变化`+int_`以避免空行）：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

typedef std::vector<int> Matrix;

template<typename It>
struct Parser : qi::grammar<It, Matrix(), qi::space_type>
{
    Parser() : Parser::base_type(matrix_)
    {
        using namespace qi;
        matrixBlock_ = lit(";") >> +int_ >> eps( 0 == (phx::size(_val) % 3));
        matrix_      = repeat(3)[ matrixBlock_ ];
    }
    qi::rule<It, Matrix(), qi::space_type> matrixBlock_, matrix_;
};

int main()
{
    std::string test = ";42 45 -9; 3 2 1; 12 34 56";

    std::string::const_iterator f(test.begin()), l(test.end());

    Parser<std::string::const_iterator> parser;
    Matrix m;

    if (qi::phrase_parse(f,l,parser,qi::space, m))
        std::cout << "Wokay\n";
    else
        std::cerr << "Uhoh\n";

    std::cout << karma::format(karma::auto_ % ", ", m) << "\n";
} 
```

* * *

*旧答案*：

是的，您可以使用 Spirit 的*自定义点将*您的用户定义类型视为容器。我建议的文档条目在这里：

*   [http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/advanced/customize/is_container.html](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/advanced/customize/is_container.html)

这是一个简单的例子，展示了如何使用它，现场：

*   **[http://liveworkspace.org/code/2d708ecb64ad6fbf9708c203f26965ce](http://liveworkspace.org/code/2d708ecb64ad6fbf9708c203f26965ce)**

> **关于“幻像条目”的旁注**，一般来说：
> 
> 请注意，有一些与回溯语法和容器属性相关的常见问题解答。问题是，出于性能原因，解析器在回溯时不会撤消（“回滚”）对其底层容器的更改。您可以使用强制此行为，[`qi::hold`](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/qi/reference/directive/hold.html)但可能值得努力将语法重新设计为
> 
> *   避免回溯或
> *   在稍后阶段提交属性（使用语义操作）

完整代码示例：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi = boost::spirit::qi;
namespace karma = boost::spirit::karma;

struct Matrix
{
   std::vector<int> data;
};

namespace boost { namespace spirit { namespace traits {
   template <>
      struct is_container<Matrix>
      {
      };

   template <typename Attrib>
      struct push_back_container<Matrix, Attrib>
      {
         static bool call(Matrix& c, Attrib const& val)
         {
            c.data.push_back(val);
            return true;
         }
      };

   template <>
      struct container_value<Matrix>
      {
         typedef int type;
      };
} } }

template<typename It>
struct Parser : qi::grammar<It, Matrix(), qi::space_type>
{
   Parser() : Parser::base_type(start)
   {
      start = *qi::int_;
   }
   qi::rule<It, Matrix(), qi::space_type> start;
};

int main()
{
   std::string test = "42 45 -9";

   std::string::const_iterator f(test.begin()),
      l(test.end());

   Parser<std::string::const_iterator> parser;
   Matrix m;

    if (qi::phrase_parse(f,l,parser,qi::space, m))
      std::cout << "Wokay\n";
   else
      std::cerr << "Uhoh\n";

   std::cout << karma::format(karma::auto_ % ", ", m.data) << "\n";
} 
```

输出：

```
Wokay
42, 45, -9 
```

* * *

### 更新

多一点背景：

当然，对于这样一个简单的例子，它只是包装了一个标准支持的容器类型，使用融合*适配*会相当容易：（[http://liveworkspace.org/code/56aea8619867451a21cd49fddb1e93bd](http://liveworkspace.org/code/56aea8619867451a21cd49fddb1e93bd)）

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/fusion/adapted/struct.hpp>

namespace qi = boost::spirit::qi;
namespace karma = boost::spirit::karma;

struct Matrix { std::vector<int> data; }; 
BOOST_FUSION_ADAPT_STRUCT(Matrix, (std::vector<int>, data));

int main()
{
    std::string test = "42 45 -9";
    std::string::const_iterator f(test.begin()), l(test.end());

    Matrix m;
    if (qi::phrase_parse(f,l, qi::eps >> *qi::int_, qi::space, m))
        std::cout << karma::format(karma::auto_ % ", ", m.data) << "\n";
} 
```

*请注意，`qi::eps`由于结构中仅包含一个数据元素的错误（AFAICT），这是必要的。请参阅[此处的讨论](http://boost.2283326.n4.nabble.com/BOOST-FUSION-ADAPT-STRUCT-with-single-entry-td2675332.html#a2675334)（以及其他一些提及）*

# java - Java 全屏模式在 Ubuntu 上不起作用

> ID：12520658
> 
> 赞同：7
> 
> 时间：2012-09-20T20:45:02.967
> 
> 标签：java, swing, ubuntu, jframe, fullscreen

所以我使用的是 Ubuntu，当我想在 Java 中进入全屏模式时，会出现一个具有最大屏幕尺寸的普通窗口，而不是没有标题栏等的全屏窗口。我承认，我什至不确定全屏模式应该是什么看起来像在 Java 中，因为我没有在任何其他操作系统上尝试过。但我认为它应该是一个没有标题栏的屏幕。还有其他人有这个问题吗？

这是我使用的代码。; 很直接。

```
public static void main(String[] args) {
    GraphicsEnvironment env = GraphicsEnvironment
            .getLocalGraphicsEnvironment();
    GraphicsDevice vc = env.getDefaultScreenDevice();
    JFrame window = new JFrame();
    window.setUndecorated(false);
    window.setResizable(false);
    vc.setFullScreenWindow(window);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:39:28.807

在 Ubuntu（可能还有其他 Linux 发行版）上它不起作用。Java 中的全屏模式不覆盖全屏。它将工具栏排除在外。永远，无论你做什么。

我尝试了上面的两个示例以及官方 FSEM[教程](http://docs.oracle.com/javase/tutorial/extra/fullscreen/example.html)中的示例以及我知道的一些应用程序正在使用 Java/Swing 和全屏模式（FreeCol 和 TripleX）并且没有人能够覆盖屏幕的任务/工具栏区域。

我的配置是带有 OpenJDK 或 SUN-JRE 1.7.0_09 以及 Unity 或 Gnome 的 Ubuntu 12.10。有趣的是，对 isFullScreenSupported() 的 java 调用返回 true。因此，虽然 Java JRE 说它支持全屏独占，但它不支持。

[在另一个问题](https://stackoverflow.com/questions/8837719/java-in-full-screen-on-linux-how-to-cover-task-bar)中可能会给出一些可能的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:41:45.973

在 win7 上，使用此代码（我按照@Gilberto 的建议将 undecorated 标志设置为 true 并添加了一个 RED 面板）似乎可以正常工作。如果它在 Ubuntu 上不起作用，则可能意味着不支持全屏模式：

```
import java.awt.Color;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main {
    public static void main(String[] args) {
        GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice vc = env.getDefaultScreenDevice();
        JFrame window = new JFrame();
        JPanel comp = new JPanel();
        comp.setBackground(Color.RED);
        window.add(comp);
        window.setUndecorated(true);
        window.setResizable(false);
        vc.setFullScreenWindow(window);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-17T12:22:48.580

该线程非常古老，但仍然出现在实际搜索结果中，但答案错误。所以我会发布实际的真正解决方案。

Swing 全屏将使用**setExtendedState()**函数设置，而不是使用**setFullScreenWindow()**函数！

```
JFrame myFrame = new JFrame();
....
myFrame.setExtendedState(MAXIMIZED_BOTH); 
```

然后，您将拥有一个装饰精美的全屏窗口，其中包含所有按钮和一个正确的工具栏光学元件，它可以在 Ubuntu 和任何其他操作系统上正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:20:10.443

虽然这在大多数情况下可能不适用，但我想分享我对这个问题的解决方案。

就我而言，我经常需要为我们的大学机构开发 Java/Scala 应用程序（心理测试）。为了绕过这个问题，我们决定在我们的实验电脑上安装锯鱼。

如果此解决方案适用于您的需求，您可以通过 Ubuntu 设施（软件中心、Aptitute、apt-get）安装（非常过时的）锯鱼，或者 - 我更喜欢 - 手动安装或编译最新的锯鱼。

其他窗口和/或桌面管理器可能会提供类似的功能，但是当我们尝试使用禁用/删除面板的 XFCE 或 LXDE 时，我们遇到了伪像。

# css - IE8/9 - CSS 文件的最大字节数

> ID：12520666
> 
> 赞同：8
> 
> 时间：2012-09-20T20:45:30.907
> 
> 标签：css, internet-explorer, browser

我目前正在处理的应用程序有过多的 CSS 样式，我们似乎已经达到了 IE8/9 的某种限制以及它可以加载多少 CSS。在某些时候，它会停止解释 CSS，从而破坏某些页面的样式。我们正在使用 Combres 压缩/缩小导致如此大的 CSS 文件的文件。这似乎发生在 400KB-450KB 范围内（是的，我知道这对于任何 CSS 来说都太多了）。

所以我的问题是：IE 中单个 CSS 文件的最大大小是多少？

启用 GZIP 压缩也有帮助吗？IIS 启用了动态/静态压缩，它似乎可以在 Chrome 中工作，但不能在 IE 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:40:25.623

问题是文件大小是对的（尽管 IE 也将解析最大数量的选择器）。除了您已经在做的缩小之外，压缩将无济于事，但是将 CSS 拆分为两个文件将解决您的问题。

所有限制都基于每个文件。考虑按功能集分离 CSS 并仅在需要时加载 CSS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-23T10:28:43.267

对于高达 IE9 的 IE，css 文件大小最大为 288kb

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T04:18:51.883

我遇到了这个问题，然后想，真的吗？无论如何，解决方案看似简单，请使用 Paul Young [http://blesscss.com/](http://blesscss.com/)
的 blessc， 谢谢 Paul！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-28T22:32:10.790

我使用 Gulp-sakugawa，但您仍然必须构建一个 css 文件来 @import 刚刚生成的其他文件。 [https://www.npmjs.com/package/gulp-sakugawa](https://www.npmjs.com/package/gulp-sakugawa)

我对 Bless 的问题是它仍然将文件拆分为 300k，而且仍然太大。

# java - 在舞台模式下使用资产播放框架 404 错误

> ID：12520668
> 
> 赞同：2
> 
> 时间：2012-09-20T20:45:34.060
> 
> 标签：java, playframework, playframework-2.0

我在舞台模式下运行 Play 框架应用程序时遇到问题。

如果我在开发模式下运行应用程序，`play run`例如，一切正常。如果我使用 编译应用程序`play compile clean stage`，然后使用`start`，我的所有资产都无法访问（我收到 404 错误）。

我知道有关空文件的错误/功能，但实际上并非如此。

我的路线与文档相同：

```
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

有谁能够帮助我 ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:08:00.710

实际上听起来 Play Framework 能够`//`在开发模式下获取路径中的文件，但不是在阶段。

所以这应该适用于开发模式：

```
assets//images/image.png 
```

但不是在舞台模式下。要更正此问题，只需替换`//`为`/`

# android - [Android动态壁纸]当用户点击“设置壁纸”按钮时如何启动Activity？

> ID：12520675
> 
> 赞同：1
> 
> 时间：2012-09-20T20:45:57.333
> 
> 标签：android, live-wallpaper

我刚刚下载了这个动态壁纸：

[https://play.google.com/store/apps/details?id=eu.krisskringle.wallpaper.snowadfree](https://play.google.com/store/apps/details?id=eu.krisskringle.wallpaper.snowadfree)

然后我浏览动态壁纸库，选择我刚刚从上面的链接下载的雪地壁纸，然后按“设置壁纸”。

此时，“免责声明”页面出现。你知道这个应用程序的作者是怎么做到的吗？当用户单击“设置壁纸”按钮时，他如何启动 Activity？

谢谢！

# google-closure-compiler - Google Closure 中的部分课程？

> ID：12520677
> 
> 赞同：2
> 
> 时间：2012-09-20T20:46:06.023
> 
> 标签：google-closure-compiler, google-closure

是否可以使用 Google Closure 编译器在两个文件中定义一个类？例如，如果我自动生成一个类并希望为用户输入的代码保留另一个类：

在 MyClass.AutoGenerated.js

```
goog.provide("MyClass");
MyClass = function() {
}
MyClass.prototype.SomeMember = 15; 
```

然后在 MyClass.js 中，继续声明成员和函数：

```
MyClass.prototype.AnotherMember = 15;
MyClass.prototype.SomeAwesomeFunction = function() {}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:56:29.103

只要文件排序正确，这不是问题。但是，如果可以在填写原型之前实例化类，则排序可能会很棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:07:41.970

我发现接近这一点的唯一方法，而不依赖于构建顺序是这样的：

在 MyClass.js 中

```
goog.provide("MyClass");
MyClass = function() {
}
MyClass.prototype.SomeMember = 15; 
```

然后在 MyClass.Partial.js 中，继续声明成员和函数**，并提供一个带有 .Partial 的命名空间**（例如）：

```
goog.require("MyClass");
goog.provide("MyClass.Partial");

MyClass.prototype.AnotherMember = 15;
MyClass.prototype.SomeAwesomeFunction = function() {}; 
```

然后调用代码必须调用：

```
goog.require("MyClass");
goog.require("MyClass.Partial"); 
```

为了以正确的顺序包含两个文件。*MyClass.Partial*类不需要以任何方式存在；它只是 goog.require 和 goog.provide 方法使用的标识符。

# java - 构建器模式与依赖注入（例如通过 Guice）

> ID：12520678
> 
> 赞同：12
> 
> 时间：2012-09-20T20:46:07.130
> 
> 标签：java, dependency-injection, guice

我正在开发一个简单的树结构数据库，我通常通过 Builder（Builder 模式）设置依赖项或可选设置。现在我不确定何时使用 Guice，何时使用 Builder 模式以及何时使用静态工厂方法而不是构造函数本身。我已经多次阅读 Effective Java，我认为它至少提到了不暴露构造函数的很多优点。是时候重读了 ;-)

那么，您知道哪些案例可以清晰区分吗？我不应该公开构造函数吗？因此，例如在每种情况下都写`public static Foo getInstance(...) { return new Foo(...)}`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T21:05:34.283

我坚信您不需要对*所有内容都*使用依赖注入。

*   对于 a`LookupService`来说，很自然地**注入**a`Dictionary`这样它的实现可以通过配置换出。

*   `Firewall`另一方面。它会很自然地创建自己的`FireWallRules`，也许是通过提供的`Factory`或`Builder`.

作为指导，注入您需要*配置*的内容，不要自动注入其他所有内容。

* * *

考虑一下什么**`static factory (*)`**时候

*   需要命名构造逻辑。例如，`Lists.newArrayList()`
*   结构如此复杂，它不属于类本身
*   无需工厂配置，工厂**无**副作用

考虑**`instance factories`**什么时候

*   有复杂的实例化逻辑
*   需要工厂配置
*   使用`AbstractFactory`设计模式
*   在整个程序生命周期中需要创建额外的对象

考虑一下什么**`builder`**时候

*   有复杂的参数选择。例如，5 个参数，其中一些是可选的。

* * *

**`(*)`** *静态方法并不总是可测试的，在我看来，静态方法的存在应该总是有动机的*。工厂的一个典型用例是减少**耦合**。通过使用`static factory`那个能力是完全失去的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-20T21:23:50.200

> 构建器模式与依赖注入

这两个在你心目中如何*接近可比性？*
当您需要处理其构造函数将具有大量参数（可能是可选的）的类时，使用 **构建器模式，并且此模式使您的代码更易于阅读和编写。**

**依赖注入**是一种促进松散耦合的方法，它消除了较高级别类与较低级别类的依赖关系。例如，需要连接到数据库的类不会直接创建连接，而是“注入”连接，并且可以将该连接交换到不同的数据库而不影响使用它的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T20:10:09.787

我已经开始在我的大部分项目中使用构建器，事实证明我可以并且已经用构建器和单例替换了我所有的 DI。

IE：

```
AppContext appContext = new AppContext.Builder()
.setProperties(testProps)
.setDB（测试数据库）
。建造（）;

// 运行测试

```

在没有 DI 的情况下，我的代码变得更易于管理。

# android - Android：AudioTrack 与多线程

> ID：12520680
> 
> 赞同：1
> 
> 时间：2012-09-20T20:46:09.283
> 
> 标签：android, multithreading, audiotrack

我遇到了一个问题，我想在静态模式下反复播放半秒`AudioTrack`，但声音断断续续。但是，我注意到在 a`TransitionDrawable`并行运行时声音非常清晰。

我的代码的简化骨架是：

```
thread = new Thread(new Runnable() {

  public void run() {
    createTransition();

    try {
      createAudioTrack();

      while (true) {
        if (audio) {
          playSoundClip();
        }

        if (display) {
          playScreenTransition();
        }

        Thread.sleep(getDelayBetweenBeats());
      }
    } catch (InterruptedException e) {
    } finally {
      resetScreenTransition();
      stopSoundClip();
    }
  }

  private void createAudioTrack() {
    short[] samples = generateSamples();
    track = new AudioTrack(AudioManager.STREAM_MUSIC, SAMPLERATE, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, samples.length * 2, AudioTrack.MODE_STATIC);
    if (track.getState() != AudioTrack.STATE_UNINITIALIZED) {
      track.write(samples, 0, samples.length);
    }
  }

  private void playSoundClip() {
    if (track != null && track.getState() != AudioTrack.STATE_UNINITIALIZED) {
      track.stop();
      track.reloadStaticData();
      track.play();
    }
  }

  private void playScreenTransition() {
    view.post(new Runnable() {

      public void run() {
        view.setBackgroundDrawable(transition);
        transition.startTransition(DURATION);
      }

    });
  }

});
thread.start(); 
```

正如你所看到`thread`的，不是在 UI 线程上执行的，所以我假设它`track`面临着多线程问题。我不认为播放转换的 UI 线程会消耗整个 CPU，因为我的音频是并行播放的。似乎该活动以某种方式消耗了 CPU，并且没有执行任何其他操作。

我也尝试过使用`view.post(new Runnable() {...});`in `playSoundClip()`，但这并没有帮助。

我考虑将所有内容更改为`AsyncTask`，但恕我直言，这不会改变任何内容，因为它仍然是后台任务。由于我不需要使用声音更新 UI 元素，并且过渡仍然必须并行播放，我什至没有尝试过。

一个解决方案可能是总是让一些过渡并行运行（实际的或虚拟的），但这对我来说听起来很糟糕（双关语？）。

有谁知道另一种方法可以让我`track`始终保持清晰？

* * *

编辑：
在这个问题上做了更多工作并扩展了我的程序后，我注意到我必须使用上面列出的线程方法，因为那里的逻辑需要一些时间才能完成，我无法在 UI 上完成所有操作-线程了。目前，我在播放音频时播放了一个虚拟过渡，这对我来说仍然听起来很糟糕。因此，如果您仍然可以对该主题提供一些见解，欢迎您在此处发布/回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:52:25.070

您可能想看一下`SoundPool`，它可以让您将短音频样本静态加载到内存中一次，然后以低得多的延迟按需播放。您使用的方式`AudioTrack`是很好地使用重放音频而不重新加载，但对于如此短且经常重复的声音字节，它可能仍然有点重。

您也可以考虑根本不使用后台线程。从您的代码段中看起来您实际上只是将`Thread`用作计时器，并且您可能会通过使用 a在定时间隔上`Handler`发布您的结果来获得更好的性能`Runnable`（这也将允许您在主线程上调用您的音频/转换方法） 反而。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:39:51.097

我有更大的音频块，但我很幸运在我创建的服务中播放它们。

PS很好的双关语

# asp.net-mvc-3 - MVC3 Razor Ajax.ActionLink 不会使用 POST 方法

> ID：12520694
> 
> 赞同：3
> 
> 时间：2012-09-20T20:47:14.150
> 
> 标签：asp.net-mvc-3, jquery, razor

我有一个包含多个链接的页面。这些链接应该做一个 ajax 发布和回调。但是，该链接正在执行 Get 而不是 Post。这会导致 404 错误，因为我没有操作方法来处理请求 URL 的获取。

如果我从我的 Action 方法中删除 HTTPPost 属性，则链接有效，但回调失败并且我返回的 Json 呈现在新页面中。

这是我在我看来使用的代码。

```
<td id="action-@item.ItemID">@Ajax.ActionLink("Add", "AddToOrder", new { itemID = item.ItemID }, new AjaxOptions { HttpMethod = "POST", OnSuccess = "actionCompleted" }, new { id = "add-" + item.ItemID })</td> 
```

这最终添加了这个 HTML：

```
 <td id="action-012679"><a data-ajax="true" data-ajax-method="POST" data-ajax-success="actionCompleted" href="/mysite/neworder/AddToOrder?itemID=012679" id="add-012679">Add to Order</a></td> 
```

我的控制器具有以下操作方法。

```
[HttpPost]
public JsonResult AddToOrder(string itemID) {
    return Json(new { id = itemID, Action = "Added", "Just getting this working"});
} 
```

我在 Success 上调用的回调方法如下所示：

```
<script language="javascript" type="text/javascript">        
    function actionCompleted(response, status, data) {
        alert("We have returned");
    }

</script> 
```

如果我将操作方法​​上的 [HTTPPost] 属性更改为 [HTTPGet]，我会收到 Json 错误。我可以通过将 JsonRequestBehavior.AllowGet 添加到我的返回值来解决此问题，但这不使用页面上定义的回调函数并且失败。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:10:59.600

可能您没有将 jquery.unobtrusive-ajax.js 脚本附加到页面并且链接优雅地降级为常规锚点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:16:19.753

为了让它正常工作。您需要在页面上添加对这些脚本的引用：

MicrosoftAjax.js MicrosoftMvcAjax.js

# php - 使用 AJAX 将多个输入表单字段 POST INTO mySQL db

> ID：12520699
> 
> 赞同：0
> 
> 时间：2012-09-20T20:48:31.870
> 
> 标签：php, mysql, ajax

我正在尝试通过 AJAX 请求使用 Java 脚本将 HTML 中的多个表单项提交到 mySQL 中。我可以更新一个字段，但不能更新其他 2 个字段。我已经注释掉了我认为会对此有所帮助但不起作用的其他代码。

```
 HTML part: 
<!DOCTYPE HTML PUBLIC “-//W3C//DTD HTML 4.01 Transitional//EN”
“http://www.w3.org/TR/html4/loose.dtd”&gt;
<head>

<script type="text/javascript">

function insert()  {

      if (window.XMLHttpRequest) {
      xmlhttp = new XMLHttpRequest();
   } else {
       xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
   }
   xmlhttp.onreadystatechange = function(){
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    document.getElementById('message').innerHTML = xmlhttp.responseText;
  }
  }

 parameters = 'fname='+document.getElementById('fname').value;

   xmlhttp.open("POST", "update.php", true);
   xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
   xmlhttp.send(parameters);

} ;

 </script>

 </head>

 <body>

          First Name: <input class="work" type="text" id="fname" ><br>
          Middle Name: <input class="work" id="mname" type="text"><br>
          Last Name: <input class="work" id="lname" type="text"><br>
          <input type="button" value="Submit" onclick="insert();">

          <div id="message"></div>

  </body>
  </html>

 PHP part:
<?php
       //require 'connect.midasproject.php';
   $conn_error = 'could not connect.';

        $dbhost = "localhost";
        $dbname = "mastergolddb";
        $dbuser = "root";
        $dbpass = "";

 if (!@mysql_connect("$dbhost", "$dbuser", "$dbpass")||!@mysql_select_db ("$dbname")) {
   die($conn_error);
 } else {
   echo 'connected.';
   }

$fname = $_POST['fname'];
//$mname = $_POST['mname'] ;
//$lname = $_POST['lname'];

 if (!empty($fname))  {

$query = "INSERT INTO `customers` VALUES ('','$fname','joe','blow')";
    if  ($query_run = mysql_query($query)) {
       echo 'data inserted.' ;
    } else {
  echo 'Query failed.';
    }
   }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:52:21.993

您需要将所有 3 个值传递给 ajax 函数。你好像就`fname`在这里 路过`parameters = 'fname='+document.getElementById('fname').value;`

# magento - Magento中多个选择属性中的最大选定选项？

> ID：12520702
> 
> 赞同：2
> 
> 时间：2012-09-20T20:48:52.620
> 
> 标签：magento, select, attributes, magento-1.6

我正在用 Magento 存储墨盒。

我已经将所有打印机作为一个选项进行了多项选择属性。似乎不能选择超过 51 台打印机，如果我这样做并保存产品，则没有错误，但如果我再次打开产品。51以上的选中项不被选中。

我怎么解决这个问题？

请帮助我，它让我发疯..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T22:24:22.190

所以问题是，属性的​​后端类型设置为“varchar”，需要为“text”

如果您查找 db 表 eav_attribute，并搜索您的属性（通过 attribute_code），您会注意到后端设置为 varchar，将其更改为“text”，然后您可以保存超过 51 台打印机。

但是，这可能会清除该属性的所有当前保存的值，因为它会将 eav 表从 _varchar 更改为 _text，因此请先在开发环境中执行此操作。

# c++ - 原子成本 ::fetch_add 诗句 __sync_fetch_and_add

> ID：12520705
> 
> 赞同：2
> 
> 时间：2012-09-20T20:48:59.193
> 
> 标签：c++, gcc, c++11

我正在对与原子相关的 Linux 上的 g++ 4.4.6 进行一些研究。我有一个简单的循环，我用它来估计在原子上执行 fetch_add(1) 所需的时间。

```
atomic<int> ia;
ia.store(0);
timespec start,stop;
clock_gettime(CLOCK_REALTIME, &start);
while (ia < THE_MAX)
{
    //++ia;
    ia.fetch_add(1);
}
clock_gettime(CLOCK_REALTIME, &stop); 
```

我惊讶地发现以下运行了大约一半的时间：

```
volatile int ia=0;
timespec start,stop;
clock_gettime(CLOCK_REALTIME, &start);
while (ia < THE_MAX)
{
    __sync_fetch_and_add( &ia, 1 );
}
clock_gettime(CLOCK_REALTIME, &stop); 
```

我拆开了它——并不是说我非常擅长 x86 汇编器——我看到了这个主要区别。生成的 C++11 原子调用

```
call    _ZNVSt9__atomic213__atomic_baseIiE9fetch_addEiSt12memory_order 
```

而 gcc atomic 给出了

```
lock addl   $1, (%eax) 
```

我希望 g++ 能给我最好的选择，所以我认为我对正在发生的事情的理解有一些严重的辍学。任何人都清楚为什么 C++ 调用的生成不如 gcc 原子调用吗？（也许这只是 g++ 4.4 不太成熟的问题......）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:57:14.587

这只是 GCC 版本和优化的问题。例如，使用 gcc 4.6.3 和 -O3，我得到一个`lock add`for `atomic<int>::fetch_add`。

```
#include <atomic>
void j(std::atomic<int>& ia)
{
        ia.fetch_add(1);
} 
```

产量（对于带有 -O3 和 gcc-4.6.3 的 x86_64）：

```
.LFB382:
    .cfi_startproc
    lock addl       $1, (%rdi)
    ret
    .cfi_endproc 
```

# android - ActionBarSherlock Action Item 的自定义下拉菜单

> ID：12520706
> 
> 赞同：1
> 
> 时间：2012-09-20T20:49:01.830
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在创建一个与 Froyo 向上兼容的通用应用程序，因此我使用了出色的[ActionBarSherlock](http://actionbarsherlock.com/)。我希望从 ActionBar 中的 Action Items 创建子菜单下拉菜单，其中包括行中的图标和文本。有一些线程会提出类似的问题，但我无法尝试实现它们。我已经尝试过 Spinners，但我需要 API 8 兼容性，所以我在 Sherlock 库中尝试了 IcsSpinner，但 Jake 建议其他人不要依赖它，以防库更改。我尝试了一个自定义 ActionProvider 来模仿 ShareActionProvider 但我发现它太复杂了：

![在此处输入图像描述](../Images/e7400bd2a93249984a4e5cd47223fdcc.png) 这张图片准确地显示了我想要的东西，但我无法让它与我的应用程序一起使用。我的代码如下：

```
public class AddDocActionProvider extends ActionProvider {
private Context mContext;

public AddDocActionProvider(Context context) {
    super(context);
    mContext = context;
}

@Override
public View onCreateActionView() {
    LayoutInflater layoutInflater = LayoutInflater.from(mContext);
    View view = layoutInflater.inflate(
            R.layout.actionbar_new_doc_action_provider, null);
    return view;
}

@Override
public boolean hasSubMenu() {
    return true;
}

@Override
public void onPrepareSubMenu(SubMenu subMenu) {

    // loop was here calling
    subMenu.add(0, id, 0, "Type 1")
                .setIcon(R.drawable.type_1)
                .setOnMenuItemClickListener(mOnMenuItemClickListener);
        // added type 2, 3, etc

}

@Override
public boolean onPerformDefaultAction() {
    // This is called if the host menu item placed in the overflow menu of the
    // action bar is clicked and the host activity did not handle the click.
    return true;
} 
```

我的 SherlockFragmentActivity 有这个代码：

```
 @Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {  

    MenuItem newDoc = menu.add(0, MENU_ADD_DOC, 0, "New Document");     
    newDoc.setVisible(!isPhoneShowingStorageList);
    newDoc.setIcon(R.drawable.dark_content_new);
    newDoc.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    mNewDocActionProvider = new AddDocActionProvider(getSupportActionBar().getThemedContext());
    newDoc.setActionProvider(mNewDocActionProvider);
} 
```

我没有看到子菜单，当操作栏无效时，它也会在 froyo 手机上崩溃。

我看过的其他线程：

[如何在 Honeycomb ActionBar 中创建自定义 Pulldown？](https://stackoverflow.com/questions/5312631/how-to-create-a-custom-pulldown-in-the-honeycomb-actionbar)

[如何在操作栏上添加下拉项](https://stackoverflow.com/questions/8312344/how-to-add-a-dropdown-item-on-the-action-bar)

[操作项的自定义下拉列表 (actionbarsherlock)](https://stackoverflow.com/questions/12223283/custom-drop-down-from-action-item-actionbarsherlock)

虽然这不一定是 ActionBarSherlock 特定的问题，但坦率地说，我不敢相信这么简单的东西竟然在标准的 Action Bar 中实现起来如此复杂。任何帮助将不胜感激。

**更新**：使用 XML 而不是代码为我添加了图标：

```
 <item
        android:id="@+id/menu_new_doc"
        android:icon="@drawable/dark_content_new"
        android:showAsAction="always"
        android:title="New Document">
        <menu>
            <item
                android:id="@+id/word2010"
                android:icon="@drawable/doc"
                android:title="Word 2010"/>
            <item
                android:id="@+id/excel2010"
                android:icon="@drawable/excel"
                android:title="Excel 2010"/>
        </menu>
    </item> 
```

所以为了动态地拥有子菜单，我必须这样做：

```
MenuItem newDoc = menu.findItem(R.id.menu_new_doc);
    SubMenu subMenu = newDoc.getSubMenu();
    subMenu.clear();
    for (/* loop */) {
        MenuItem subMenuItem = subMenu.add(0, hash, 0, fileType.GetDescription());
            subMenuItem.setIcon(R.drawable.doc);            
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:57:20.227

我认为您应该将图标设置为新添加到子菜单的项目。例子 ：

```
public boolean onCreateOptionsMenu(Menu menu) {

SubMenu subMenu = menu.addSubMenu("Add");

subMenu.add("Add Subitem 1").setIcon(R.drawable.ic_action_add1);
subMenu.add("Add Subitem 2").setIcon(R.drawable.ic_action_add2);

MenuItem subMenu1Item = subMenu.getItem();
subMenu1Item.setIcon(R.drawable.ic_action_add);
subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

return super.onCreateOptionsMenu(menu);

} 
```

# xcode - 将自定义 iOS 插件从 Cordoba 1.7 升级到 2.1，我怎样才能找出为什么它们从未加载？

> ID：12520708
> 
> 赞同：0
> 
> 时间：2012-09-20T20:49:20.623
> 
> 标签：xcode, cordova, phonegap-plugins, ios6

我已经转换了我的插件，或者我认为是这样，并在 Cordova.plist 中注册。根据[本指南](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md)，方法签名是正确的。js 方面没有任何改变，但它们没有加载，只是默默地失败。Cordova 本身正在工作，onDeviceReady 正在触发，但我的插件永远不会被执行。1.7 一切正常...

我需要一些帮助来开始弄清楚它们应该在哪里加载和/或从 obj-c 端的 js 调用。我在哪里可以在 Cordova 源代码中设置断点以查看它为什么不执行我的插件？

我应该从哪里开始看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:55:01.070

自 Cordova 2.0 以来，框架发生了很大变化。

使用 2.0 规则再次实现可能会更好，之后只覆盖选择器签名。因此，您将了解如何在新版本中使用插件，更新您的 Cordova 技能。:)

2.0 和 2.1 之间的单一重大变化（针对插件）

> 支持新的插件方法签名（旧签名已弃用）：
> 
> 新签名是：
> - (void) myMethod:(CDVInvokedUrlCommand*)command;
> 
> 旧的（已弃用）签名是：
> - (void) myMethod:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:23:43.373

我刚刚完成了这个迁移。我只能说，如果您按照这些步骤操作，它对我有用。您还需要按照 1.9>2.0 迁移中的步骤进行操作。

# apache - 使用 mod_rewrite 在 .htaccess 中进行 https 重定向

> ID：12520709
> 
> 赞同：0
> 
> 时间：2012-09-20T20:49:23.087
> 
> 标签：apache, .htaccess, mod-rewrite

这对我来说很棒，因为它将 www.domain.com 和 domain.com 重定向到[https://www.domain.com](https://www.domain.com)

我的问题是像 sub.domain.com 这样的子域现在也被重定向到那里。如何保留现有功能但不影响子域？

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.domain.com/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:25:24.940

添加限制：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteRule ^(.*)$ https://www.domain.com/$1 [R,L] 
```

该`%{HTTP_HOST}`行将确保只有主机`domain.com`并被`www.domain.com`重定向。

# ruby-on-rails - 是否可以有条件地允许嵌套属性？

> ID：12520710
> 
> 赞同：1
> 
> 时间：2012-09-20T20:49:24.397
> 
> 标签：ruby-on-rails, activerecord

我有一个大表格，最终创建了一个用户帐户，并完成了部分个人资料。所以，`User belongs_to Profile`。问题是，我想将配置文件设置为嵌套属性，但仅适用于此表单。User 模型的所有其他形式不应允许发送配置文件的嵌套属性。这可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:32:45.720

您可以通过将*块*`:reject_if`传递给`accepts_nested_attributes_for`.

对于您要实现的目标，我根本不接受嵌套属性，而是`update_attributes`在作为新用户表单目标的控制器操作中同时调用用户和配置文件。

# android - 三星 Galaxy S3 上的小部件问题

> ID：12520712
> 
> 赞同：1
> 
> 时间：2012-09-20T20:49:24.610
> 
> 标签：android, widget, galaxy

我们发布了一个带有小部件的新应用程序。到目前为止，这在所有设备上都可以正常工作，但是在三星 Galaxy S3 上，我们收到报告称它在某些情况下会停止工作。

不幸的是，我没有这样的设备来检查自己——因此我想知道是否有人有类似的经历。

屏幕重绘自身后，小部件停止工作（这似乎在 S3 上定期且随机地发生）。另一位用户报告说，在调用任务管理器并“清除内存”后，小部件停止工作。没有崩溃 - 在这种情况下不幸的是。

该应用程序已在具有不同 Android 版本的许多设备上进行了测试 - 到目前为止，我们从未见过如此随机的屏幕更新导致小部件停止工作。

我很感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:02:43.973

......事实上，这被证明是三星 Android 实现中的一个错误——他们承诺在即将发布的版本中修复它。感谢三星惊人的支持，我们终于可以确认这个问题了！

# javascript - Sencha Touch 2 过滤列表存储

> ID：12520719
> 
> 赞同：0
> 
> 时间：2012-09-20T20:49:56.777
> 
> 标签：javascript, filter, sencha-touch, extjs, store

我有以下代码作为我的主要 javascript 文件，用于显示列表 + 按钮。这一切都正确显示，并且像向商店添加商品这样的一切都很好，但是有没有一种简单的方法可以让列表只显示名称等于某个值的值？

```
Ext.define("MyProject.view.Main", {
extend: 'Ext.NavigationView',
requires: ['Ext.NavigationView', 'Ext.dataview.List'],
xtype: 'myproject-main',

config: {
items: [
{
  title: 'List of Data',
  layout: 'fit',
  xtype: 'container',
  itemId: 'listContainer',
  items: [
  {
    xtype: 'list',
    store: 'DataStuff',
    itemTpl: '{name}',
    emptyText: 'No data added yet'
  },
  {
    xtype: 'container',
    docked: 'bottom',
    padding: '5px',
    layout: 'hbox',
    items: [{ xtype: 'button', itemId: 'addBtn', text: 'Add Data', ui: 'confirm', width: '50%', align: 'left' }, { xtype: 'button', itemId: 'updateBtn', text: 'Update Data', ui: 'action', width: '50%', align: 'right' }]
  }
  ]
}
]
}
}); 
```

我原以为有一个简单的过滤器：我可以在商店下添加类别，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:28:21.977

列表显示商店提供的项目。对于控制列表过滤器，您应该控制他的商店过滤器。例子

```
var store = list.getStore();
store.filter('category', 'first');
//or
var customFilter = function(record){
     return soAnyCheckForRecods(record);
}
store.filterBy(customFilter); 
```

有关过滤器的更多信息请看这里[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store)

# php - 简单的 Ajax 表单提交错误

> ID：12520721
> 
> 赞同：3
> 
> 时间：2012-09-20T20:50:07.893
> 
> 标签：php, mysql, ajax, forms

我正在尝试实现 Ajax jQuery 表单提交。我在下面粘贴的代码不起作用。我得到一个未定义的索引错误`day` `month`和`year`

**jQuery 阿贾克斯**

```
<script>
 $(document).ready(function() {
    $('#cal_submit').click(function(event) { 
      if ($('select[name="day"]').val() == '') {
            event.preventDefault();
            alert('Please enter a day');
        }
        else {
            event.preventDefault();
            new_day = $('select[name="day"]').val();
            new_month = $('select[name="month"]').val();
            new_year = $('select[name="year"]').val();
            $.get('function.php', { day: new_day, month: new_month, year:new_year} );
            $('select[name="day"]').val('');
            $('select[name="month"]').val('');
            $('select[name="year"]').val('');
        }
    }); 
});
</script> 
```

处理php所在的函数。

```
function calendar()
{ 

        $j = mysql_real_escape_string($_GET['day']);
        $F = ucwords(mysql_real_escape_string($_GET['month']));
        $Y = mysql_real_escape_string($_GET['year']);
        $date =" ".$F." ".$j.", ".$Y." ";

   $query = "SELECT * 
              FROM calendar 
              WHERE event_day = '".$j."'
              AND   event_month = '".$F."'
              AND   event_year  = '".$Y."'" ; 
            $run = mysql_query($query);
            $norows = mysql_numrows($run);

            if ($norows < 1){
                echo "<div class=\"indexnoresult\">No TAP Event(s) for $date</div>" ;
            }  else {
            while($row = mysql_fetch_array($run)) {

                  echo "<div class=\"indexnoresult\">Event(s) for $date<br>
                   Name :   $row[event_name]  <br>
                   Time :   $row[event_time]   <br> 
                   Venue :  $row[event_venue]  <br>
                  </div> 
                 " ;

            }

            } ?> 
```

**HTML 表单**

```
 <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" >

                Pick Date To View Events     

             <select name="day">
                    <option value ="">    </option>
                    <option value ="1">1</option>
                    <option value ="2">2</option>   
             </select> 

    Month
                <select name="month">
                    <option value ="">    </option>
                    <option value ="january">January</option>
                    <option value ="february"> february </option>
                    <option value ="march">March</option>
                 </select>

    Year:
                 <select name="year">
                    <option value ="">    </option>
                    <option value ="2005">2005</option>
                    <option value ="2006">2006</option>             
               </select>

    <input type='submit' name='cal_submit' id='cal_submit'>
    </form>
    </div> 
```

请问我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:56:05.963

更改以下块

```
 day = $('select[name="day"]').val();
        month = $('select[name="month"]').val();
        year = $('select[name="year"]').val(); 
```

到以下

```
 new_day = $('select[name="day"]').val();
        new_month = $('select[name="month"]').val();
        new_year = $('select[name="year"]').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:59:40.540

你需要在你的 ajax 对象/数据中有相同的变量。

```
 day = $('select[name="day"]').val();
        month = $('select[name="month"]').val();
        year = $('select[name="year"]').val();
        $.get('function.php', { day: day, month: month, year:year} ); 
```

第一个选择选项（调用 ajax 时的默认值，没有从选择列表中进行选择）是空白的，这就是错误的原因。

此外，表单显示 POST 方法，而您的 ajax 是 GET。

# google-apps-script - 时钟触发器更新电子表格，可安装触发器 onEdit 未运行

> ID：12520723
> 
> 赞同：0
> 
> 时间：2012-09-20T20:50:14.307
> 
> 标签：google-apps-script

我在玩触发器。

在电子表格中，我有一个在新行中插入日期的函数。每分钟作为时钟触发器运行。如果电子表格打开或关闭（喜欢该部分），则工作正常。

在一个独立的脚本中，我在上面的电子表格中为 onEdit 设置了一个触发器。它所做的只是通过电子邮件将 e.value 发送给我。

如果我在电子表格中并且只需在单元格中输入一些字符，它就可以工作。

我“期望”的是，每次第一个触发器插入日期时，它都会触发 onEdit。唉，事实并非如此。即使我在触发器之外运行插入日期功能，我的电子邮件 onEdit 触发器也不会触发。

有什么想法吗？

我问，因为我的目标是让脚本更新启动 onEdit 事件的工作表。

吉姆

更新＃1：

也许这个代码示例有帮助？

我将其简化为电子表格容器内的一个脚本。如果我对电子表格进行任何交互式更改，每个函数都可以正常工作，第二个函数可以正常工作。

这只是探索，所以请忽略配额或我在这里测试的完全废话:-)

insertClockTrigger：每分钟运行一次，工作正常

installableOnEdit：当 insertClockTrigger 触发时，永远不会作为可安装的 onEdit 触发

我很好奇为什么看起来由 insertClockTrigger 完成的编辑没有触发 onEdit 触发器。触发器不会触发触发器（无法帮助自己！）？

```
function insertClockTrigger() {
  var sheet = SpreadsheetApp.openById('spreadsheet-ID').getSheets()[0];
  var nDate = new Date();
  sheet.getRange(sheet.getLastRow()+1,1,1,1).setValue(nDate).flush;
}

function installableOnEdit(e) {
  GmailApp.sendEmail("some@email.com", "Test trig2", "FISH: "+e.value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:47:15.637

想我找到了答案。

恩里克·阿布雷乌 (Henrique Abreu)​​ 发布：

[http://productforums.google.com/d/msg/apps-script/HmBg0p7dOZ8/xMb6wfcfvVQJ](http://productforums.google.com/d/msg/apps-script/HmBg0p7dOZ8/xMb6wfcfvVQJ)

> 是的，从代码进行更改时不会调用“编辑时”事件，仅在手动更改时调用它们。此行为是设计使然，以避免不必要的递归问题。此外，直接从代码中调用所需的编辑功能太容易了。即，当您编写插入新票的脚本时，它可以简单地调用您的“fundEmail”函数，不需要另一个触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:39:39.810

从时钟触发函数调用 onEdit 函数。

此外，每分钟运行一次这样的触发器可能会遇到配额问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-17T19:12:39.120

onEdit 应该重命名为 onUserEdit。它不接收系统更改，只接收直接用户编辑。我没有测试过这个，但`onChange`可以做你想做的。

# c++ - 如何在 Visual Studio 2008（C++ 项目）中仅运行项目后构建规则而不进行重建

> ID：12520726
> 
> 赞同：0
> 
> 时间：2012-09-20T20:50:19.453
> 
> 标签：c++, visual-studio-2008

我的解决方案中有几个项目，其中一个有一些测试脚本作为后期构建规则的一部分被复制，有没有一种方法可以运行后期构建规则，而无需在我想要的时候为该项目执行“仅重建”他们跑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:47:47.497

您可以使用[自定义构建步骤](http://msdn.microsoft.com/en-us/library/hefydhhy%28v=vs.90%29.aspx)而不是构建后事件并指定一些虚拟的不存在的**输出**文件。在这种情况下，即使项目本身是最新的，自定义构建步骤也会在每个构建上运行。

引用 MSDN：

> 在输出中，指定输出文件的名称。这是必填项；如果没有此属性的值，自定义构建步骤将不会运行。如果自定义构建步骤有多个输出，请使用分号分隔文件名。输出文件的名称应该是在命令行属性中指定的名称。项目构建系统将查找文件并检查其日期。如果该文件比输入文件新或找不到该文件，则将运行自定义构建步骤。

# python - 将功能限制为唯一日期 - 多索引

> ID：12520727
> 
> 赞同：1
> 
> 时间：2012-09-20T20:50:22.953
> 
> 标签：python, dataframe, pandas

我有一个 csv 列中的日期和时间列表。我正在尝试在每个唯一日期执行一个功能 - 对于与该日期相关的每个时间。*该功能应在每个*新日期的第一次（上午 930 点）开始。每个日期重复 42 次。有 62,035 行。我说：

我的问题：像下面的“for”循环这样的循环会在逻辑上实现这一目标吗？*即，仅*在该日期的所有时间在每个新日期“做某事” 。然后移动到下一个日期...

```
data=read_csv(file)  
idf= data.set_index(['date', 'time'])  
for ((date, time), data) in idf:
# (I also tried - for (i in idf):)

 --do something here-- 
```

现在，我得到了 IndexError: 'list index out of range'。
任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:16:38.110

```
In [1]: df = pd.DataFrame({'duty': {('11/12/2012', '10:00'): 0, ('12/12/2012', '10:00'): 0, ('12/12/2012', '11:00'): 1}, 'prices': {('11/12/2012', '10:00'): 1, ('12/12/2012', '10:00'): 2, ('12/12/2012', '11:00'): 3}})

In [2]: df.index = pd.MultiIndex.from_tuples(df1.index)

In [3]: df
Out[3]: 
                  duty  prices
11/12/2012 10:00     0       1
12/12/2012 10:00     0       2
           11:00     1       3

In [4]: g = df.groupby(level=0) 
```

[您可以执行一些标准的 groupby 操作，或者使用转换](http://pandas.pydata.org/pandas-docs/stable/groupby.html#transformation)或[聚合](http://pandas.pydata.org/pandas-docs/dev/groupby.html#aggregation)编写自己的操作：

```
In [5]: g.sum()
Out[5]: 
            duty  prices
11/12/2012     0       1
12/12/2012     1       5

In [6]: g.transform(lambda x: x - x.mean())
Out[6]: 
                  duty  prices
11/12/2012 10:00   0.0     0.0
12/12/2012 10:00  -0.5    -0.5
           11:00   0.5     0.5

In [7]: g.agg({'prices': np.mean, 'duty': len})
Out[7]: 
            duty  prices
11/12/2012     1     1.0
12/12/2012     2     2.5 
```

*[文档](http://pandas.pydata.org/pandas-docs/stable/groupby.html)中有更多示例。*

# sql - 从连接表上的连接返回继承的值？

> ID：12520728
> 
> 赞同：2
> 
> 时间：2012-09-20T20:50:22.907
> 
> 标签：sql, sql-server, inheritance, join, common-table-expression

为简单起见，假设我有以下表格：

```
role

id  name        inherits
----------------------------------
1   Base        null
2   Role2       1
3   Role3       1
4   Role3Child  3

item

id  name            org_id      
----------------------------------
1   item1            4210
2   item2            4210
3   item3            4210
4   item4            4210
5   item5            4210
6   item6            4210

role_item_junction

id  role_id     item_id      item_value
----------------------------------
1   1       1            true
2   1       2            false
3   2       3            D
4   3       3            F
5   4       4            12 
```

这里的 role_id 4 继承了从 role_id 1 继承的 role_id 3 继承了所有项目。

当我查询与 role_id 4 相关的所有项目时，我想返回：

1.  分配给 role_id 4 和 item_value 的所有项目
2.  role_id 4 继承的所有项目及其 item_values
3.  某个 org_id 中的所有其他项目

如何编写一个查询来返回 role_id 4 应该有权访问的所有项目？当我查询 role_id 4 时，我希望输出类似于以下内容：

```
id(item.id) org_id      name(item.name)     item_value
------------------------------------------------------------------
1       4210        item1           true
2       4210        item2           false
3       4210        item3           F
4       4210        item4           12
5       4210        item5           NULL <--not in the junction table
6       4210        item6           NULL <--not in the junction table 
```

不知道如何从我的左连接返回连接表中继承的项目值：

```
@orgid varchar(5) = '4210',
@roleid int = 4

SELECT item.*, ri.item_value AS selected_item_value
--SNIP LOTS OF OTHER COLUMNS RETURNED

FROM item
LEFT JOIN role_item AS ri ON item.id = ri.item_id 
AND ri.role_id = @roleid
???? how do I return the ri.item_value of items that roleid 4 inherits from?
--SNIP LOTS OF OTHER IRRELEVANT JOINS

WHERE 
((@orgid IS NULL or @orgid = '') or item.org_id = @orgid) AND
item.date_archived IS NULL 
AND ri.date_archived IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:10:51.050

如果没有递归 CTE，我想不出一种简单的方法来解决它，但这应该可行：

```
;WITH roleCascaded AS
(SELECT id, id as inherits
FROM role
UNION ALL
SELECT r2.id, r1.inherits
FROM role r1 
INNER JOIN roleCascaded r2 on r1.id = r2.inherits AND r1.inherits IS NOT NULL
)
SELECT item.*, ri.item_value AS selected_item_value
FROM item
LEFT OUTER JOIN role_item AS ri ON item.id = ri.item_id 
LEFT OUTER JOIN roleCascaded AS rc ON rc.inherits = ri.role_id AND rc.id = @roleid
WHERE 
((@orgid IS NULL or @orgid = '') or item.org_id = @orgid) AND
item.date_archived IS NULL 
AND ri.date_archived IS NULL 
```

# java - Spring Web Flow + Jquery ajax + JSON

> ID：12520730
> 
> 赞同：1
> 
> 时间：2012-09-20T20:50:36.817
> 
> 标签：java, ajax, json, jquery, spring-webflow

我正在尝试通过 jquery get 或 post 调用控制器内部的方法。然而，在成功数据中，我得到了完整的 html。我期望返回的 JSON 对象应该可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T03:48:34.497

有一些选择：其中之一是使用 Jettison 进行编组，如以下文章所述：http: [//blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)。

另一种方法是使用 JSON Marshaller 将您的返回序列化为 JSON：[https ://code.google.com/p/jsonmarshaller/](https://code.google.com/p/jsonmarshaller/)

# facebook - Facebook 应用程序可以更改个人资料安全设置吗？

> ID：12520735
> 
> 赞同：1
> 
> 时间：2012-09-20T20:50:54.437
> 
> 标签：facebook, security, privacy

我对创建一个 Facebook 应用程序感到好奇，它可以用来帮助用户锁定他们的隐私和安全设置，但我不确定它是否可能。任何人都可以让我知道它是否可能？

感谢您的任何意见或建议！

# html - 在 CSS 中使用 Sprite 在水平 UL LI 中显示图像

> ID：12520737
> 
> 赞同：0
> 
> 时间：2012-09-20T20:50:57.623
> 
> 标签：html, css, css-sprites

[Image Sprites](http://www.w3schools.com/css/css_image_sprites.asp)本身并不邪恶。然而，试图让这些在[无序列表](http://www.w3.org/MarkUp/html3/bulletlists.html)中工作是困难的。更进一步并试图让它**水平**`unordered list`显示（工作示例[>> HERE <<](http://www.w3schools.com/css/tryit.asp?filename=trycss_navbar_horizontal)）当然是一个谜。

 **这是我的 jsFiddle 项目：[jsFiddle: hNJmD](http://jsfiddle.net/jp2code/hNJmD/)

似乎每次我得到一些工作时，我都会进行最小的编辑来为我的应用程序定制它并且它会中断。

*   **声明 CSS 文件中的哪些订单项是否重要？**
*   是否必须在标签`<ul>`之前定义`<li>`标签？
*   `height:`之前需要指定吗`width:`？（我通常会尝试按字母顺序列出内容，以免意外重复）

这是我用作 Sprite 的图像：

![雪碧](../Images/176c83fa6c145e40ef66f28032dc1519.png)

**我的目标：**

*   将菜单水平居中页面
*   拥有完整的图像显示（全部 50 像素）
*   禁用**活动**项目的`a.hover`效果（*链接 1*）

 ***CSS是：

```
#nav {
  text-shadow: 4px 4px 8px #696969;
  white-space:nowrap;
  vertical-align: middle;
}
#nav ul {
  list-style-type:none; /* removes the bullet from the list */
}
#nav li {
  display: inline-block;
  text-align: center;
  height: 50px;
  width: 192px;    
}
#nav a {
  background: url('http://i.imgur.com/Sp7jc.gif') 0 -100px no-repeat;
  display: block;
  color:Blue;
}
#nav a:hover {
  background-position: 0 -50px;
  color:Red;
}
#nav .active, a:hover {
  background-position: 0 0;        
  color:Black;
}
#nav span {
  top: 15px;
  padding-left: 5px;
}
​ 
```

jsFiddle 中使用的 HTML 也在这里重复：

```
<body>
  <div>
    <ul id="nav">
      <li>
        <a class="active" href="#">
          <span>Link 1</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span>Link 2</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span>Link 3</span>
        </a>
      </li>
    </ul>
  </div>
<br/>
<br/>
<br/>
<br/>
<div style="text-align:center;">
  <p>REFERENCE: Sprite (Width: 192, Height: 150):</p>
  <img src="http://i.imgur.com/Sp7jc.gif">
</div>
</body>​ 
```

**有人可以告诉我如何让这个疯狂的东西发挥作用吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:05:06.547

如果您希望它看起来像这样：**[jsFiddle example](http://jsfiddle.net/j08691/hNJmD/1)**，那么这就是我所做的：

*   结合你的`#nav`和`#nav ul`规则，因为它们指的是同一件事。
*   我添加的那个规则`margin:0 auto;`和`width:600px;`哪个居中的项目
*   然后`#nav a`我添加了它`display: block;`，`height:50px;`它允许链接占据适当的高度。
*   最后我添加了一条规则，`#nav .active:hover`它只影响活动元素，因此它似乎不会改变。

要回答您关于 CSS 规则的顺序是否重要的​​问题之一，答案是肯定的和否定的。关于规则中的宽度和高度，顺序无关紧要，但规则出现的顺序很重要，规则的特殊性也很重要。*****

# javascript - 通过javascript附加子节点

> ID：12520740
> 
> 赞同：1
> 
> 时间：2012-09-20T20:51:04.507
> 
> 标签：javascript, html, jquery, dom

当页面加载时，我通过 ajax 动态生成了 html，就像这样，

### 动态插入，

```
<p class="Hello">
  <span id='click lvl1'>1</span>
  <span>2</span>
</p> 
```

现在，我正在尝试将另一个节点添加到我的`<p>`元素中。再次，通过ajax动态。

### 服务器响应类似于，

```
<p class="Hello lvl2">
  <span id='click'>1</span>
  <span>2</span>
</p> 
```

我想将其插入到我第一次获得的元素中。

### 最后结果，

```
<p class="Hello">
  <span id='click'>1</span>
  <span>2</span>
  <p class="Hello lvl2">
   <span id='click'>1</span>
   <span>2</span>
  </p>
</p> 
```

在进行***第二次***ajax 调用时，我得到了对 element.xml 的引用`<span id='click lvl1'>1</span>`。

* * *

### 到目前为止我尝试了什么？

一切，我可以尝试我已经尝试过，但我无法插入节点。我假设我做错了什么。我的尝试是，

### p元素是`<span id='click'>1</span>`

1.  `pElement.parent().appendChild(data.expandTreeVal);`
2.  `pElement.parent().append(data.expandTreeVal);`
3.  `pElement.parent().after(data.expandTreeVal);`
4.  `pElement.parentNode().appendChild(data.expandTreeVal);`

## 调试

我真的从服务器得到任何东西吗？

是的，当我这样做`alert(data.expandTreeVal);`时，它会显示我想要的 HTML。

任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:04:36.450

您只能将 DOM 元素附加到元素，不能将 HTML 代码附加到字符串中。

创建一个元素，使用该`innerHTML`方法将HTML代码放入其中，然后从中获取第一个子节点以将该`p`元素作为DOM元素。

```
var div = document.createElement('DIV');
div.innerHTML = data.expandTreeVal;
var p = div.childNodes[0]; 
```

`parentNode`然后您可以使用和方法将其添加到文档中`appendChild`：

```
pElement.parentNode.appendChild(p); 
```

演示：http: [//jsfiddle.net/AfVfE/](http://jsfiddle.net/AfVfE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:06:27.653

您可能需要发布一个完整的用例让我完全理解，但我认为整个问题是您引用了不存在的方法。

我的用例像这样工作得很好：

```
<p class="Hello">
  <span id='click'>1</span>
  <span>2</span>
  <p class="Hello lvl2">
   <span id='click'>1</span>
   <span>2</span>
  </p>
</p> 
```

有了这个 JS：

```
​var pElement = document.getElementById('click');
alert(pElement.parentNode);​​​ 
```

​</p>

# mobile - 如何使用 jqMobi 加载插件？

> ID：12520741
> 
> 赞同：0
> 
> 时间：2012-09-20T20:51:09.670
> 
> 标签：mobile, jqmobi

我正在尝试将操作表插件与 jqMobi 一起使用，并且覆盖面板加载并将 html 添加到 DOM，但动画没有运行，我实际上看不到操作表。

我已经包含了 javascript 文件和样式表的脚本和链接标签，并确认浏览器正在加载这两者。

当我从 api 文档运行代码时，仅显示覆盖：s

```
$.ui.actionsheet("<a href='javascript:;' class='button'>Settings</a> <a href='javascript:;' class='button red'>Logout</a>") 
```

我是否需要添加 javascript 和 css 文件，或者它们是否默认包含在 jqMobi UI 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:26:43.830

如果您不使用 jqUi，插件通常由 $(selector)._function(params) 访问

```
$(document.body).actionsheet("<a href='javascript:;' class='button'>Settings</a> <a   href='javascript:;' class='button red'>Logout</a>") 
```

# django - 指定端口时Django runserver错误

> ID：12520743
> 
> 赞同：17
> 
> 时间：2012-09-20T20:51:17.360
> 
> 标签：django

我最近习惯于在我的 django 项目中执行以下操作，以便我可以在各种操作系统（即非 linux）上测试 bowser 兼容性：

```
$ sudo ./manage.py runserver 0.0.0.0:80 
```

这使我可以通过网络上的任何机器访问该项目。

但是，我只是设置了一台新机器，此命令发出以下错误：

```
Traceback (most recent call last):
   File "manage.py", line 8, in <module>
     from django.core.management import execute_from_command_line
ImportError: No module named django.core.management 
```

我知道 django 无法找到模块，我不明白的是那个普通的旧：

```
$ sudo ./manage.py runserver 
```

运行良好。我在这里所做的只是改变端口，确定吗？而且，当然，它在过去工作得很好。

**注意**
1\. 我使用的是 Django 1.4
2\. 我在 virtualenv 和系统上尝试过，我得到了相同的结果。
3\. 我没有在系统范围内安装 django（仅在 virtualenvs 中）

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-21T00:07:19.267

我猜 sudo 命令将在超级用户上下文中运行该进程，而超级用户上下文缺少 virtualenv 设置。

您可以尝试在您的 virtualenv 中显式调用 python 二进制文件，例如：

```
sudo $(which python) manage.py runserver 0.0.0.0:80 
```

制作一个 shell 脚本来设置 virtualenv 和 call `manage.py runserver`，然后 sudo 这个脚本。

```
#!/bin/bash
source /home/darwin/.virtualenvs/foo/bin/activate
cd /path/to/project/foo
python manage.py runserver 0.0.0.0:80 
```

替换`/home/darwin/.virtualenvs/foo`为实际 virtualenv`/path/to/project/foo`的根目录和项目的根目录。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-31T12:13:34.913

这是另一个解决方案，而不是创建 shell 脚本，只需在命令中指定要使用的 python 可执行文件：

假设您的 virtualenv 容器被调用`.virtualenvs`并且其中有一个 env 被调用`myproject`，这是您必须编写的命令：

```
$ sudo ~/.virtualenvs/myproject/bin/python manage.py runserver 0.0.0.0:80 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-25T23:31:00.720

以@Paulo_Scardine 的回答为基础：

如果要保留 virtualenv 环境变量，可以将`-E`选项添加到`sudo`命令中：

```
sudo -E $(which python) manage.py runserver 0.0.0.0:80 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T12:43:15.527

Here's another solution, instead of creating shell script, just specify which python executable you want to use in the command:

Assuming that your virtualenv container is called venv in your project home directory, this is command you have to write:

```
sudo /home/mahome/PycharmProjects/sampleproject/venv/bin/python manage.py runserver 127.0.1.1:80 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-13T09:20:49.760

运行
manage.py runserver 0.0.0.0:8000
即。
在访问 url 时使用不同的端口而不是默认端口 80 运行服务器使用端口号

# c# - 将图像添加到 GridView

> ID：12520744
> 
> 赞同：2
> 
> 时间：2012-09-20T20:51:24.460
> 
> 标签：c#, windows-8, microsoft-metro, windows-store

我正在尝试将图像添加到 GridView，但图像从未真正显示。相反，我只是在缩略图外观布局中显示类名。

这是我一直在调整的代码

```
public async void setImage(string url) {

    Byte[] imageBytes = await httpClient.GetByteArrayAsync(url);

    MemoryStream stream = new MemoryStream(imageBytes);
    var randomAccessStream = new MemoryRandomAccessStream(stream);

    BitmapImage image = new BitmapImage();
    await image.SetSourceAsync(randomAccessStream);

    imagesGrid.Items.Add(image);           
} 
```

谢谢您的帮助。我最终得到了以下有效的块。

```
public void setImage(string url) {
    Image img = new Image();
    img.Source = new BitmapImage(new Uri(url));

    imagesGrid.Items.Add(img);           
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T20:58:06.610

这是因为您将`BitmapImage`s 添加到您的可视化树中。 `BitmapImage`s 不是视觉元素。您需要做的是创建一个[Image](http://msdn.microsoft.com/library/windows/apps/BR242752)并将[Source](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.image.source.aspx)属性设置为您的图像文件的 URI。在 xaml 中有很多这样的例子，在我的博客上也有[代码](http://windows8applicationdevelopment.blogspot.com/2012/09/loading-resources.html)。

我没有对此进行测试，但它应该是这样的：

```
Image img = new Image();
img.Source = new BitmapImage(new Uri(url));
imagesGrid.Items.Add(img); 
```

# ruby-on-rails - GC.stat 在 Heroku 的 Cedar 堆栈上未定义

> ID：12520745
> 
> 赞同：0
> 
> 时间：2012-09-20T20:51:28.297
> 
> 标签：ruby-on-rails, ruby, heroku, garbage-collection

这目前在我的游乐场应用程序上进行了演示，访问它会~~导致 500~~，*现在已经部署了答案中给出的修复程序*。

错误~~是~~ ：*_*

```
Processing by GcController#show as HTML
Completed 500 Internal Server Error in 0ms
NoMethodError (undefined method `stat' for GC:Module):
app/controllers/gc_controller.rb:4:in `show' 
```

* * *

相反，如果您[从 Github 获取 Rails 应用程序](https://github.com/dukedave/playground)。

然后`RAILS_ENV=production rails server`去`/`。

你会得到：

```
{:count=>131, :heap_used=>193, :heap_length=>345, :heap_increment=>152, :heap_live_num=>127915, :heap_free_num=>29930, :heap_final_num=>0} 
```

* * *

假设 Heroku 正在使用 patched 是否安全`GC`？

有人遇到过这种情况么？似乎没有任何关于它的文档。

我在本地和 Heroku 上看到了一些冲突的内存使用行为，这就是我尝试`GC.stat`. 我想知道这些差异是否可以通过 patched 来解释`GC`。

* * *

我还为此打开了[Heroku 问题](https://help.heroku.com/tickets/62763)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:03:12.737

[Heroku 的 JD](https://help.heroku.com/tickets/62763)慷慨地窃取了答案：

> Cedar 默认使用 1.9.2-p290。我不确定 GC.stat 是否在 1.9.2 中，但它似乎肯定不在 Heroku 上。我们不修补我们运行的 Ruby 版本。
> 
> 我可以确认，如果您`ruby '1.9.3'`在 Gemfile 中指定，`GC.stat`它将正常工作。

# android - 如何删除 webview 中的白色背景？

> ID：12520746
> 
> 赞同：5
> 
> 时间：2012-09-20T20:51:39.417
> 
> 标签：android, html, xml, webview

我有以下问题：我正在将一个 html 文件加载到 webview 中。我的 html 文件和我的活动的背景颜色是黑色。发生的情况是，由于 webview 的背景颜色是白色，所以在完成加载时开始时会出现短暂的白色闪烁。

我可以去掉那个闪光灯吗？或者将该 webview 颜色设置为黑色？我已经尝试将 webview xml 中的背景颜色设置为黑色，但是没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T22:05:47.900

是的你可以。尝试：

```
webview.setBackgroundResource(Color.Black); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T20:10:28.253

我遇到了同样的问题，这为我解决了：

就在现有的下方

```
mWebView = (WebView) findViewById(R.id.activity_main_webview); 
```

我添加了行

```
mWebView.setBackgroundColor(Color.BLACK); 
```

做任何好事必须先于

```
mWebView.loadUrl(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T14:59:28.600

设置背景（xml 或以编程方式）对我不起作用，只是使用`CustomTabs`它更快，所以这个问题似乎并不重要。特别是如果您使用此处详述 的优化（`warmup`和）： [https ://www.captechconsulting.com/blogs/an-introduction-to-chrome-custom-tabs-for-android](https://www.captechconsulting.com/blogs/an-introduction-to-chrome-custom-tabs-for-android)`mayLaunchUrl`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T15:55:15.393

完全移除背景（透明）：

```
WebView webView = findViewById(R.id.webView);
webView.setBackgroundColor(Color.TRANSPARENT); 
```

# wordpress - 标记列表下拉菜单

> ID：12520749
> 
> 赞同：0
> 
> 时间：2012-09-20T20:51:50.300
> 
> 标签：wordpress

我想知道如何在不重写 WP 核心功能的情况下创建一个简单的标签下拉菜单（所有标签包括 DESC）。它必须在任何循环之外工作。

**wp_tag_cloud()**带有 'format=array' 属性似乎是最好的选择，因为它可以在任何循环/模板之外工作，并返回所有可用的按 AZ 排序的标签（我需要），但数组值包含 HTML 格式（而不仅仅是一个普通的字符串值）并且不适合创建下拉菜单。

IE：

```
<?php $tag = wp_tag_cloud('format=array');  // 'format=array' contains <a>link</> !!!

foreach($tag as $tagkey => $tagvalue)       // ...need to be somehow filtered out !!
{
echo "<option value='".$tagvalue."'>".$tagvalue."</option>";
}
?> 
```

get_the_tag_list **()**函数效果很好，但它在模板（循环）之外不起作用。

有没有一种简单的方法来获取所有标签的列表，以便我可以将它们放入下拉列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:30:10.793

...我的天啊！我不敢相信我居然公开问了这个问题！

当然代码是...

```
<?php $tag = wp_tag_cloud('format=array' );

foreach($tag as $tagkey => $tagvalue)
{
$cleanedup = strip_tags($tagvalue);
echo "<option value='".$cleanedup."'>".$cleanedup."</option>";
}

?> 
```

# jquery - 动画引导列

> ID：12520751
> 
> 赞同：34
> 
> 时间：2012-09-20T20:52:04.520
> 
> 标签：jquery, html, animation, twitter-bootstrap, jquery-animate

这是我想做的：

### 初始显示

```
---------------------------------------------
|                                           |
|                                           |
|                                           |
|              .span12 #col1                |
|                                           |
|                                           |
|                                           |
|                               [#button]   |
|                                           |
|                                           |
--------------------------------------------- 
```

然后，当#button 被点击时，#col1 内容被动画滑到右侧进入 .span3 和 #col2 .span9 从左到右（从屏幕外）动画：

### 按钮单击/动画后

```
-------------------------------------------------
|                                |              |
|                                |              |
|                                |              |
|              .span9  #col2     | .span3 #col1 |
|                                |              |
|                                |              |
|                                |              |
|                                | [#button]    |
|                                |              |
|                                |              |
------------------------------------------------- 
```

然后逆向可能碰巧到达原始状态。

谢谢！

# 问题是

我正在使用 Twitter Bootstrap 网格系统。谷歌搜索`Twitter Bootstrap column transtions animation`和变化没有出现任何东西。我不是 jquery 动画大师，所以我想我会恳求堆栈溢出的*好心人*。

希望这里有人可能比我更了解这类事情会用一些代码来回答，这些代码显示了它是如何实现的。抱歉，我以为只是在网站上发布就暗示了这一点。

# 这是我尝试过的

[http://jsfiddle.net/KdhAB/3/](http://jsfiddle.net/KdhAB/3/)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-20T22:48:35.873

This could be done with CSS3 transitions, which would be consistent with the way Bootstrap JS plugins accomplish their animations.

## HTML

```
<div class="container">
  <div class="row">
    <div id="col2" class="span0"></div>
    <div id="col1" class="span12">
      <a id="trig" class="btn btn-inverse">Reflow Me</a>
    </div>
  </div>
</div>​ 
```

## JS

```
$('#trig').on('click', function () {
  $('#col1').toggleClass('span12 span3');
  $('#col2').toggleClass('span0 span9');
});​ 
```

## CSS

```
.row div {
    -webkit-transition: width 0.3s ease, margin 0.3s ease;
    -moz-transition: width 0.3s ease, margin 0.3s ease;
    -o-transition: width 0.3s ease, margin 0.3s ease;
    transition: width 0.3s ease, margin 0.3s ease;
}

.span0 {
    width: 0;
    margin-left: 0;
} 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/9F62B/)

## [JSFiddle (Fluid)](http://jsfiddle.net/mmfansler/274NN/5/)

[**Note**: The animation is a still a bit imprecise, but I figure that can all be worked out separately. This answer provides the basic outline of how to go about it.]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:24:39.510

这个是建立在响应式小提琴之上的：http: [//fiddle.jshell.net/274NN/74/](http://fiddle.jshell.net/274NN/74/)

它是一种编辑流程，例如，假设您想在单击按钮时显示滑动菜单：

1) 将左栏滑出窗口 2) 将菜单从右侧滑出

菜单宽度以 % 为单位，您可以根据需要更改它

# exception - 在 Mono 下设置 System.Console.WindowHeight 会引发 System.NotSupportedException

> ID：12520753
> 
> 赞同：1
> 
> 时间：2012-09-20T20:52:14.020
> 
> 标签：exception, mono, console, c#-3.0, window

我得到一个`Unhandled Exception: System.NotSupportedException: Operation is not supported.`使用 Ubuntu 11.10 在 Mono 下引发的异常。

**阅读**财产**作品**。[文档](http://buttle.shangorilla.com/1.1/handlers/monodoc.ashx?link=P%3aSystem.Console.WindowHeight)可能建议该方法不会造成问题。

关于如何最好地处理或解决这种情况的任何想法？

我**目前的解决方案**比较尴尬，并没有解决通过 System.Console-API 设置窗口大小的问题：

```
 const int defaultConsoleWindowWidth = 80;
        const int defaultConsoleWindowHeight = 25;

        if (pid != PlatformID.Unix && pid != (PlatformID)128) {
            System.Console.WindowHeight = lastConsoleWindowHeight;
            System.Console.WindowWidth = defaultConsoleWindowWidth;
        }else{
            //assume *NIX system
            try {
                var p = new Process();
                p.StartInfo = new ProcessStartInfo(@"stty cols " + defaultConsoleWindowWidth + " rows " + lastConsoleWindowHeight, "-n")
                {
                    UseShellExecute = false
                };

                p.Start();
                p.WaitForExit();
            }
            catch (Exception e) { /*...*/}

        } 
```

我的**单声道版本**：

```
lo@lo-VirtualBox:~/Desktop$ mono --version
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
TLS:           __thread
SIGSEGV:       altstack
Notifications: epoll
Architecture:  x86
Disabled:      none
Misc:          softdebug 
LLVM:          supported, not enabled.
GC:            Included Boehm (with typed GC and Parallel Mark) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:02:15.727

来自[Github Console.cs 上 mono 的 master 分支](https://github.com/mono/mono/blob/master/mcs/class/corlib/System/Console.cs)：

```
[MonoLimitation ("Only works on windows")]
public static int WindowHeight {
    get { return ConsoleDriver.WindowHeight; }
        set { ConsoleDriver.WindowHeight = value; }
} 
```

注意 MonoLimitation 属性

# python - Windows - 在 startupinfo 中使用 wShowWindow 打开不影响显示

> ID：12520754
> 
> 赞同：4
> 
> 时间：2012-09-20T20:52:15.117
> 
> 标签：python, windows, popen, subprocess, win32gui

我正在尝试做一些简单的事情，比如让 calc.exe 开始最小化，但它没有发生。

```
import subprocess
import win32gui
import win32con

info = subprocess.STARTUPINFO()
info.dwFlags |= subprocess.STARTF_USESHOWWINDOW
info.wShowWindow = win32con.SW_SHOWMINIMIZED
x = subprocess.Popen("calc.exe", startupinfo = info) 
```

无论我提供什么，它都会像往常一样弹出`wShowWindow`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:37:37.197

我想你已经想通了，但为了其他读者的利益，这是我的看法：

问题与`calc.exe`程序有关，与 Python 或您的代码无关。为了证明这一点，请尝试启动“notepad.exe”（或“wordpad.exe”），它会起作用——还请注意，您可能需要`.exe`根据目标文件的位置提供目标文件的完整路径。

具体是什么问题，根据`STARTUPINFO`结构，`wShowWindow`成员：

> 对于 GUI 进程，第一次调用 ShowWindow 时，它的 nCmdShow 参数被忽略 wShowWindow 指定默认值。在随后对 ShowWindow 的调用中，如果 ShowWindow 的 nCmdShow 参数设置为 SW_SHOWDEFAULT，则使用 wShowWindow 成员。

所以这意味着，程序第一次启动并调用`ShowWindow()`时，它会完全忽略你`wShowWindow`在`STARTUPINFO`结构中传入的任何内容。然后，在再次调用 时，如果程序调用其参数设置为`ShowWindow()`，它**只会**使用您为 wShowWindow 提供的值。`ShowWindow()``nCmdShow``SW_SHOWDEFAULT`

`nCmdShow`因此，如果程序本身为in提供了自己的值，似乎不可能隐藏 GUI 窗口`ShowWindow()`，因此查看哪些程序执行此操作似乎是反复试验，例如 notepad.exe 允许您隐藏它，而calc.exe 你不能。

# git - 设置在线 GitHub 存储库时遇到问题

> ID：12520755
> 
> 赞同：0
> 
> 时间：2012-09-20T20:52:17.593
> 
> 标签：git, github, repository

我是一个完整的 Git 新手，我正在尝试安装和设置一个 repo（文本分析器），这样我就可以和其他人一起做一个项目。我在我的桌面上设置了 repo，这样如果我打开 Git GUI 或 GitHub，我就有完整的功能。我的问题是我无法让 repo 以任何方式连接到 github.com。该网站声称我根本没有回购。

我不知道在这里问什么，因为我不完全清楚 GitHub 是如何工作的。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:55:56.470

您需要在 GitHub 上创建一个存储库并将其作为远程添加到您现有的本地存储库。

```
git remote add origin git@github.com:your-username/name-of-your-repo.git 
```

然后您只需要将本地更改推送到远程（假设您在本地提交）。

```
git push -u origin master 
```

# macos - Mac OS X Mountain Lion 无法识别插入 USB 串行端口的设备

> ID：12520757
> 
> 赞同：17
> 
> 时间：2012-09-20T20:52:20.240
> 
> 标签：macos, serial-port, arduino, osx-mountain-lion, ftdi

自从我迁移到 Mountain Lion 后，Arduino 应用程序菜单（工具 -> 串行端口）不再看到连接 Arduino 的 USB 串行端口。它只是通过蓝牙显示接口。

我的 Mac 上出现的串行端口：

![Mac Arduino 串口菜单](../Images/b1708639a5742d58f2849ee092743480.png)

我尝试安装[VCP 驱动程序](http://www.ftdichip.com/Drivers/VCP.htm)并重新安装了 Arduino。我尝试运行旧版本的 Arduino IDE，甚至从头开始重新安装 Mac OS X。

这些都没有解决问题......我真的需要与我的 Arduino 沟通，我该如何解决这个问题？

# c# - 标有 TestInitialize 和 TestCleanup 的类未执行

> ID：12520759
> 
> 赞同：43
> 
> 时间：2012-09-20T20:52:27.947
> 
> 标签：c#, mstest, vs-unit-testing-framework

我一直在努力解决这个问题，希望它可以帮助别人。

在使用 MsTest 创建单元测试时，我发现我在每个测试中都重复了相同的代码，并发现了一些方便的属性（`TestInitialize`、`TestCleanup`、`ClassInitialize`和`ClassCleanup`）。

假设，当您使用这些属性之一标记方法时，它应该自动执行（分别在每个测试之前、每个测试之后、所有测试之前和所有测试之后）。令人沮丧的是，这并没有发生，我的测试也失败了。`TestMethod`如果直接从带有属性标记的类中调用这些方法，则测试成功。很明显他们不是自己执行的。

这是我使用的一些示例代码：

```
[TestInitialize()]
private void Setup()
{
    _factory = new Factory();
    _factory.Start();
} 
```

那么为什么这没有执行呢？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-09-20T20:52:27.947

诀窍是制作这些方法`public`：

```
[TestInitialize()]
public void Setup()
{
    _factory = new Factory();
    _factory.Start();
} 
```

当它们存在时，`private`它们不会执行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-21T00:59:37.547

> TestInitialize 和 TestCleanup 在所有测试之前和之后运行，而不是在每个测试之前和之后运行。

这是错误的，例如，请参阅此链接： [http ://social.msdn.microsoft.com/Forums/en-US/vststest/thread/85fb6549-cbaa-4dbf-bc3c-ddf1e4651bcf](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/85fb6549-cbaa-4dbf-bc3c-ddf1e4651bcf)

另请参阅 MSDN

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute.aspx)

示例代码展示了如何使用 TestInitialize、ClassInitialize 和 AssemblyInitialize。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-25T21:55:16.597

我也遇到了这个问题，并且 - 由于我对如何调用方法的误解 - 解决了这个问题：让你的测试继承自包含 TestInitialize 和 TestCleanup 方法的类。

# c - OpenGL glcolor for 循环

> ID：12520762
> 
> 赞同：0
> 
> 时间：2012-09-20T20:52:41.447
> 
> 标签：c, opengl, for-loop

我正在尝试绘制一个洛伦兹吸引子，其中整个吸引子的颜色都会发生变化。我编写了以下计算吸引点的 for 循环。

```
 float x = 1, y = 1, z = 1;
    glBegin(GL_LINE_STRIP);

    int i;    
    for (i=0; i < initialIterations; i++) {
        glColor3d(0,i/50000,1);
        // compute a new point using the lorenz attractor equations
        float dx = sigma*(y-x);
        float dy = x*(r-z) - y;
        float dz = x*y - b*z;

        // save the new point
        x = x + dx*dt;
        y = y + dy*dt;
        z = z + dz*dt;        

        glVertex3f(x/50,y/50,z/50);
    }
    glEnd(); 
```

我正在使用`glcolor`代码顶部的 将颜色更改为`i`. 但是我没有看到我想要的结果，我得到的只是一种纯色。我知道颜色像状态机一样工作，但我需要找到一种方法来改变整个颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:59:57.303

你正在做整数除法 : `i/50000`，所以它总是 0。

尝试`i/50000.0`

# php - 使用 php 在 twitter 中访问 GET account/verify_credentials 中的数据

> ID：12520763
> 
> 赞同：0
> 
> 时间：2012-09-20T20:52:52.500
> 
> 标签：php, json, twitter, twitter-oauth

当我在 twitter API 中使用该方法时

```
$content =  $connection->get('account/verify_credentials'); 
```

它返回一个包含用户所有数据的 json

我知道我可以访问例如这样的屏幕名称：

```
$content->screen_name 
```

但是我怎样才能访问国家和国家代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:17:12.880

您可以使用该`location`字段访问用户的位置。您将不得不从中猜测国家（及其代码）。

有关更多文档，请参阅相应的 Twitter 开发人员页面：[https](https://dev.twitter.com/docs/platform-objects/users) ://dev.twitter.com/docs/platform-objects/users 。

# wordpress - 在 wordpress 主题中使用 javascripts 对象

> ID：12520765
> 
> 赞同：0
> 
> 时间：2012-09-20T20:52:54.403
> 
> 标签：wordpress, wordpress-theming

我保存了一个 html 页面，该页面有一个使用 javascript 工作的图像旋转器，保存后它可以正常工作。我将此 html 页面转换为 wordpress 主题，但旋转器不再工作。

有什么问题？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:36:46.387

[Wordpress 使用wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)插入嵌入的 jquery 脚本。检查 jQuery 是否在您的主题中只插入了一次！**您可以通过在function.php**文件中添加以下代码来禁用自动插入：

```
wp_deregister_script('jquery'); 
```

看看[这个](https://stackoverflow.com/questions/6597034/wp-unregister-and-wp-enqueue)。

# asp.net-mvc - 将 ClientTemplate 添加到剑道网格 UI 中的自定义命令

> ID：12520768
> 
> 赞同：3
> 
> 时间：2012-09-20T20:52:58.470
> 
> 标签：asp.net-mvc, razor, telerik-grid

这是我的剑道网格代码：

```
@(Html.Kendo().Grid(Model)
    .Name("paymentGrid")
    .Columns(columns =>
    {
      columns.Bound(p => p.AccountName).Title("Account Name");
      columns.Bound(p => p.Active).Title("Active").ClientTemplate("<div>#=Active ? 'Active' : 'Inactive'#</div>");
      columns.Command(command => command.Custom("DeActivate").Click("deActivatePaymentAccount").Text("DeActivate")).Title("DeActivate");
    })
    .Filterable()
    .Sortable()
    .Pageable(paging => paging.Enabled(true).PageSizes(true).Messages(messages => messages.Empty("No accounts found")))
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .DataSource(dataSource => dataSource
      .Ajax()
      .ServerOperation(false)
      .Model(model =>
      {
        model.Id(p => p.AccountId);
      })
      .Update(update => update.Action("EditAccount", "Account"))
    )
  ) 
```

问题：如何将客户端模板添加到我的自定义命令（停用），以便我可以根据帐户是否处于活动状态来切换按钮上的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:38:21.857

我认为更改按钮文本的最佳方法是在绑定到 click 事件的 javascript 函数中执行此操作：

```
 function deActivatePaymentAccount(e) {
        var $btn = $(e.target);
        $btn.text() === "DeActivate" ? $btn.text("Activate") : $btn.text("DeActivate");
        // some other code here
    } 
```

# javascript - prettyDate() javascript 函数在 Firefox 或 Internet Explorer 中不起作用

> ID：12520769
> 
> 赞同：1
> 
> 时间：2012-09-20T20:52:58.620
> 
> 标签：javascript, datetime

[John Resig 的 prettyDate()](http://ejohn.org/blog/javascript-pretty-date/)函数在 Chrome 和 Safari 中运行良好，但在 Firefox 和 Internet Explorer 中返回“未定义”。

自己看看：http: [//jsfiddle.net/A3DAe/](http://jsfiddle.net/A3DAe/)

这是为什么？

（注意：请注意，时间字符串是由 Twitter api 提供的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:56:50.963

这是因为那个“修复”时间的正则表达式是错误的。

```
var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")), 
```

应该

```
var date = new Date((time || "").replace(/-/g,"/").replace(/TZ/g," ")), 
```

破版中的字符类`[TZ]`正在将“Thu”变成“hu”。我猜 Firefox 对 RFC 2822 日期更加挑剔。

*编辑*-我不确定这是要删除时区（“TZ”）分隔符，但我认为它是。

# css - *仅使用 min-width* 隐藏 div 元素

> ID：12520771
> 
> 赞同：3
> 
> 时间：2012-09-20T20:53:14.427
> 
> 标签：css, media-queries

***仅使用 min-width***我想隐藏`challange-target`408px 以下的元素并显示 `challange-target`高达`408px`.

我尝试了这段代码，但它不起作用：

```
@media only screen and (min-width: 408px) {
    .challange-target {
        display: block;
    }
} 
```

有任何想法吗？

这是[jsfiddle链接](http://jsfiddle.net/yyQ5u/31/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:59:12.533

你的意思是当屏幕宽度< 408时要隐藏`.challenge-target`，当屏幕宽度> = 408px时显示为408px？

最小的优先；隐藏那个元素

```
.challange-target {
    display: none;
}

@media only screen and (min-width: 408px) {
    .challange-target {
        display: block;
        width:408px;
    }
} 
```

# iphone - 需要 UIAlertView 条件语句添加或删除 subView

> ID：12520772
> 
> 赞同：2
> 
> 时间：2012-09-20T20:53:21.793
> 
> 标签：iphone, objective-c, ipad

我想使用警报菜单条件按钮来添加或删除通过单击手势添加的子视图。另外，我希望条件仅适用于刚刚添加的子视图（imgView），而不适用于之前添加的任何其他子视图。我是开发新手，可以使用一些帮助。提前致谢。以下代码是我的 ViewController.m 文件。

```
#import "ViewController.h"
@interface ViewController ()
@end
@implementation ViewController
-(IBAction)controlPan:(UIPanGestureRecognizer *)recognizer {
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x +translation.x,recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0,0) inView:self.view];
}
# pragma mark - View Lifecycle
- (void)viewDidLoad
{
[super viewDidLoad];
UITapGestureRecognizer *doubleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                      initWithTarget:self
                                                      action:@selector(handleDoubleTap:)];
[doubleTapGestureRecognizer setNumberOfTapsRequired:2];
[self.view addGestureRecognizer:doubleTapGestureRecognizer];

UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                      initWithTarget:self
                                                      action:@selector(handleSingleTap:)];
[singleTapGestureRecognizer setNumberOfTapsRequired:1];
// Wait for failed doubleTapGestureRecognizer
[singleTapGestureRecognizer requireGestureRecognizerToFail:doubleTapGestureRecognizer];
[self.view addGestureRecognizer:singleTapGestureRecognizer];
}
# pragma mark - Tap Gestures
- (void)handleDoubleTap:(UITapGestureRecognizer *)recognizer {
// Inserts picture xx.png at double-tapped location
CGPoint location = [recognizer locationInView:[self view]];
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(location.x,location.y, 20, 20)];
UIImage *image = [UIImage imageNamed:@"xx.png"];
[imgView setImage:image];
[self.view addSubview:imgView];
}
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
// Inserts picture x.png at single tapped location if user selects "yes" on alert popup
// If user selects "cancle" from alert popup nothing happens
CGPoint location = [recognizer locationInView:[self view]];
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(location.x,location.y, 20, 20)];
UIImage *img = [UIImage imageNamed:@"x.png"];
[imgView setImage:img];
[self.view addSubview:imgView];
NSString *msg = @"Add Hold Here?";
//sends alert popup to ask if hold location is correct
UIAlertView *alert;
alert = [[UIAlertView alloc] initWithTitle:@"" message:msg delegate:self   cancelButtonTitle:@"Cancel" otherButtonTitles:@"Yes",nil];
[alert show]; 
}
#pragma mark - Alerts
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex:(UIImageView *)imgView
{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
if([title isEqualToString:@"Cancel"])
{
    //Will remove the imgView subview that was just created location
    NSLog(@"Button 1 was selected.");

}
else if([title isEqualToString:@"Yes"])
{
    //Will keep the imgView subview that was just created at location
    NSLog(@"Button 2 was selected.");

}
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:32:21.450

在你的头文件中声明你的 imgView。

```
 @property(nonatomic,strong)UIImageView *imgView; 
```

所以你可以从你类中的其他方法访问它。然后你可以用它做任何你想做的事情（addSubview、removeFromSuperView、imgView.hidden=YES 等...）

# php - php 变量转换为 html 超链接

> ID：12520775
> 
> 赞同：0
> 
> 时间：2012-09-20T20:53:26.473
> 
> 标签：php, html, hyperlink

我查看了所有我能找到的帖子，但他们似乎并不完全这样做！

任何帮助表示赞赏。

在这里插入了相关的php代码：

之前已经完成搜索并将匹配的数量放在变量 $num_rows 中，然后我将相关数据转换为变量 $displayurl 和 $displaytitle，然后将它们放在表格单元格中。我想将 $displayurl 中的数据显示为超链接。

```
$i = 0;

while ($i < $num_rows) {
$displayurl=mysql_result($result,$i,"url");
$displaytitle = mysql_result($result, $i, "pagetitle");
echo "<tr>";    
echo "<td align = left>"  .$displayurl. " </td>"; 
echo "<td align = left> " .$displaytitle. " </td>";
echo "</tr>";

$i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:55:54.347

`echo "<td align = left><a href='" .$displayurl. "'>link1</a></td>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:59:34.293

你也可以这样做

```
echo "<td align = left><a href='$displayurl'>Click here</a></td>"; 
```

或者

```
echo "<td align = left><a href=\"$displayurl\">Click here</a></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:59:47.837

在 HTML 中，锚标记或链接写为 <a href="url go here">获取下划线的文本</a>

```
<?php

$i = 0;

while ($i < $num_rows) {
    $displayurl   = mysql_result($result, $i, 'url');
    $displaytitle = mysql_result($result, $i, 'pagetitle');
    echo '<tr>';
    echo '<td align="left"> <a href="' . $displayurl . '">'  . $displayurl . '</a> </td>';
    echo '<td align="left"> ' . $displaytitle . ' </td>';
    echo '</tr>';

    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:55:24.047

`<A>`用标签包围它

```
$i = 0;

while ($i < $num_rows) {
$displayurl=mysql_result($result,$i,"url");
$displaytitle = mysql_result($result, $i, "pagetitle");
echo "<tr>";    
echo "<td align = left><a href='"  .$displayurl. "'>link1</a> </td>"; 
echo "<td align = left> " .$displaytitle. " </td>";
echo "</tr>";

$i++;
} 
```

# ruby - 红宝石中的递归小胡子部分

> ID：12520783
> 
> 赞同：4
> 
> 时间：2012-09-20T20:54:16.393
> 
> 标签：ruby, recursion, mustache

我试图渲染一个在其中引用自身的小胡子模板。但它给出了“堆栈级别太深”的错误。

这是我的红宝石代码。

# 以下代码片段位于 person.rb 文件中

```
require 'mustache'
require 'active_support'

str = File.read("person.json")
j = ActiveSupport::JSON.decode(str)
Mustache.template_file = "person.mustache"
puts Mustache.render(j) 
```

# 以下json内容在person.json中

```
{
    "name":"Jason",
    "rels":[
        {"type":"friend",
        "ref":{
            "name":"John",
            "rels":[
                {"type":"friend",
                "ref":{"name":"Chrissy"}}
            ]
        }},
        {"type":"family",
        "ref":{"name":"Owen"}}
    ]
} 
```

# 以下内容在文件 person.mustache 文件中

```
{{#rels}}
<ul>
  <li>Type: {{type}}</li>
  {{#ref}} {{> person}} {{/ref}}
</ul>
{{/rels}} 
```

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:46:54.443

来自[精美手册](http://mustache.github.com/mustache.5.html)：

> **Partials**
> [...]
> 它们也继承了调用上下文。而在 ERB 中，您可能会遇到以下情况：
> 
> ```
> <%= partial :next_more, :start => start, :size => size %> 
> ```
> 
> 小胡子只需要这个：
> 
> ```
> {{> next_more}} 
> ```
> 
> 为什么？因为**next_more.mustache**文件会从调用上下文继承**size**和**start方法。**

因此，如果`rels`当前上下文中没有：

```
 "ref": { "name": "Chrissy" } 
```

然后你将从`rels`父母那里继承。这为您提供了来自父级的部分引用，该部分引用`rels`再次激活了来自父级的部分引用，该部分引用`rels`一直持续到您用完堆栈。

如果您要构建这样的递归模板：

```
{{#rels}}
<ul>
  <li>Type: {{type}}</li>
  {{#ref}} {{> person}} {{/ref}}
</ul>
{{/rels}} 
```

那么你需要在每个级别都有完整的对象：

```
{
    "name":"Jason",
    "rels":[
        {"type":"friend",
        "ref":{
            "name":"John",
            "rels":[
                {"type":"friend",
                "ref":{"name":"Chrissy","rels":[]}} // <--- rels here
            ]
        }},
        {"type":"family",
        "ref":{"name":"Owen","rels":[]}} // <-------------- and here
    ]
} 
```

您可以在 JSON 中充实您的数据，或者在解析它之后，我建议您在解析后充实它。

# javascript - 如何使用视图中的复选框过滤 Ember.js 中 ArrayController 的内容集合？

> ID：12520785
> 
> 赞同：2
> 
> 时间：2012-09-20T20:54:24.647
> 
> 标签：javascript, ember.js, ember-data

我正在使用 Ember 和 Ember-Data 的最新代码。我有rails作为我的后端提供JSON，它工作正常。我希望能够使用视图中的复选框过滤 Ember 模型的“活动”属性。如果我选中复选框，我希望复选框仅显示 active=true 的数据。我不想从数组中删除数据，只隐藏数据。这是我目前拥有的，但它不起作用。

模型：

```
App.Org = DS.Model.extend({
    code: DS.attr('string', { defaultValue: 'N/A' }),
    name: DS.attr('string', { defaultValue: 'N/A' }),
    source: DS.attr('string', { defaultValue: 'N/A' }),
    status: DS.attr('string', { defaultValue: 'N/A' }),
    type: DS.attr('string', { defaultValue: 'N/A' }),
    note: DS.attr('string', { defaultValue: 'N/A' }),
    financial_Flag: DS.attr('string', { defaultValue: 'N/A' }),
    expense_Flag: DS.attr('string', { defaultValue: 'N/A' }),
    revenue_Flag: DS.attr('string', { defaultValue: 'N/A' }),
    created_At: DS.attr('string', { defaultValue: 'N/A' }),
    updated_At: DS.attr('string', { defaultValue: 'N/A' }),

    active: function() {
        var status = this.get('status');
        var active = (status === 0) ? false : true;
        console.log("status: " + status + " | active: " + active);
        return active;
    }.property('status')

}).reopenClass({
    collectionUrl: '/orgs',
    resourceUrl: '/orgs/%@',
    resourceName: 'org'
}); 
```

阵列控制器：

```
App.OrgsController = Em.ArrayController.extend({

    isEmpty: function() {
        console.log("############ App.OrgsController.isEmpty called");
        return this.get('length') === 0;
    }.property('length'),

    toggleActive: function(){
        console.log("############ App.OrgsController.isActive called");
        return this.filterProperty('active', value).forEach(this.removeObject, this);
    }.property('@each.active'),

    init: function() {
        this.set('content', App.store.findAll(App.Org));
    },

    refreshOrgs: function() {
        this.set('content', App.store.findAll(App.Org));
    },

    getInactiveOrgs: function(){
        this.set('content', App.store.find(App.Org, {status: "0"}));
    }
}); 
```

在我看来，我有：

```
<label>
    isActive
    {{view Ember.Checkbox checkedBinding="App.OrgsController.toggleActive" disabledBinding="App.OrgsController.isEmpty" }}
</label> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T00:59:05.893

这可以通过创建一个计算属性来实现，该属性基于绑定到复选框的布尔值返回整个集合或仅返回项目的子集。例如，

```
App.Post = DS.Model.extend({
    text: DS.attr('string'),
    active: DS.attr('boolean')
});

App.IndexRoute = Ember.Route.extend({
    model: function() {
        return App.Post.find();
    }
});

App.IndexController = Ember.ArrayController.extend({
    hideInactive: false,

    filteredContent: function() {
        var content = this.get('content');

        if (!content || !this.get('hideInactive'))
            return content;

        return content.filter(function(item) {
            return item.get('active');
        });
    }.property('content.isLoaded', 'hideInactive')
}); 
```

您的模板应如下所示：

```
<script type="text/x-handlebars" data-template-name="index">
    <p>{{view Ember.Checkbox checkedBinding="hideInactive"}} Hide Inactive Posts</p>
    <br/>

    {{#each filteredContent}}
        <p>{{text}}</p>
    {{/each}}
</script> 
```

如果`active`定义为计算属性，这也将起作用，如您的示例中所示。

# java - 文件对象到字节数组 - android开发

> ID：12520787
> 
> 赞同：0
> 
> 时间：2012-09-20T20:54:32.377
> 
> 标签：java, android, file

我需要将此 File 对象转换为字节数组：

```
File directory=new File(Environment.getExternalStorageDirectory() + ""); 
```

（我只需要 SD 卡上的文件夹和文件的名称。）

我已经尝试过这个：

```
 byte[] send=null;
            FileInputStream fis;
            try {
                fis = new FileInputStream(directory);

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            byte[] buffer = new byte[1024];
            int readBytes = 0;
            while(readBytes != -1)
            {

                    readBytes = fis.read(buffer);

                if(readBytes > 0)
                {
                    bos.write(buffer, 0, readBytes);
                }
                else 
                    break;
            }
            byte[] fileData = bos.toByteArray();
            send=fileData; 
```

但它返回此错误： java.io.FileNotFoundException: /mnt/sdcard (Is a directory)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:58:04.227

您正在尝试加载*目录*，就好像它是一个文件一样。它不是。您希望字节数组的内容是什么？

如果要查找目录中的文件列表，请使用[`File.listFiles()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29).

# python - Urllib2 中的代理身份验证错误（Python 2.7）

> ID：12520790
> 
> 赞同：5
> 
> 时间：2012-09-20T20:54:51.900
> 
> 标签：python, windows, proxy, urllib2

*[Windows 7 64 位；Python 2.7]*

如果我尝试使用 Urllib2，我会收到此错误

```
Traceback (most recent call last):
  File "C:\Users\cYanide\Documents\Python Challenge\1\1.py", line 7, in <module>
    response = urllib2.urlopen('http://python.org/')
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = meth(req, response)
  File "C:\Python27\lib\urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python27\lib\urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
**urllib2.HTTPError: HTTP Error 407: Proxy Authentication Required** 
```

现在，我支持一个需要身份验证的大学代理，所以这可能就是发生这种情况的原因。但是 Urllib2 不应该从系统设置中提取身份验证和代理信息吗？

我知道我可以在我的程序中插入一些额外的代码来“硬编码”程序中的代理信息，但我真的不想这样做，除非这是最后的手段。这将阻碍程序在大学中具有不同身份验证 ID 和密码的计算机之间的可移植性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:59:09.267

您的程序应该会看到在 Windows 中设置的环境变量。所以在你的 Windows 中有这两个环境变量。

`HTTP_PROXY = http://username:password@proxyserver.domain.com`

`HTTPS_PROXY = https://username:password@proxyserver.domain.com`

继续执行你的脚本。它应该选择正确的身份验证器并继续连接。

# php - 带有动态行的jQuery自动完成

> ID：12520791
> 
> 赞同：0
> 
> 时间：2012-09-20T20:54:54.653
> 
> 标签：php, javascript, jquery, autocomplete, jquery-autocomplete

我有以下 jQuery 代码：

```
$(document).ready(function(){
var ac_config = {
    source: "autocomplete-delta.php",
    select: function(event, ui){
        $("#del_item").val(ui.item.SKU);
        if ((ui.item.CASE_PRICE) != "N/A"){
            $("#del_price").val(ui.item.CASE_PRICE);
        } else {
            $("#del_price").val(ui.item.UNIT_PRICE);
        }
    },
    minLength:1
};
$("#del_item").autocomplete(ac_config);
}); 
```

这适用于一个行项目，基本上行项目需要一个项目名称，这是您为自动完成输入的字段，然后在选择它后用我的数据库中的单价或案例价格填充价格字段。现在我想要通过 php 设置的 18 行作为 del_item1、del_item2 等，当我尝试以下代码时，自动完成工作并且它可以很好地填写项目，但价格字段没有填写，有任何想法吗...？

```
$(document).ready(function(){
for (var i = 1; i < 19; i++) {  
    var ac_config = {
    source: "autocomplete-delta.php",
    select: function(event, ui){
        $("#del_item" + i).val(ui.item.SKU);
        if ((ui.item.CASE_PRICE) != "N/A"){
            $("#del_price" + i).val(ui.item.CASE_PRICE);
        } else {
            $("#del_price" + i).val(ui.item.UNIT_PRICE);
        }
    },
    minLength:1
};
$("#del_item" + i).autocomplete(ac_config);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:10:10.810

这是JS引用的php文件：

```
<?php
require_once "/home/default/support/default.php";
$dbh = showDB ();
$cities = array();
$sth = $dbh->prepare("SELECT * FROM purchase_items");
$sth->execute();

 while($row = $sth->fetch(PDO::FETCH_ASSOC)) {
$cities[]=$row;
 }

$term = trim(strip_tags($_GET['term']));

$matches = array();
foreach($cities as $city){
if((stripos($city['SKU'], $term) !== false) || (stripos($city['FAMILY'], $term) !== false) || (stripos($city['DESCRIPTION'], $term) !== false)){
    // Add the necessary "value" and "label" fields and append to result set
    $city['value1'] = $city['SKU'];
    $city['value2'] = $city['FAMILY'];
    $city['value3'] = $city['DESCRIPTION'];
    $city['label'] = "{$city['FAMILY']} - {$city['DESCRIPTION']} ({$city['SKU']})";
    $matches[] = $city;
}
}
$matches = array_slice($matches, 0, 100);
print json_encode($matches); 
```

这是上面要求的 html 端，这些是我正在使用的 16 个行项目，在 for 循环内，循环中的计数器是 $d：

```
if($d&1) { ?>
<div id="trow">
<? } else { ?>
<div id="trow" class="none">
    <? } ?>
        <div id="thirds" style="text-indent:5px;">
    <input type="text" name="del_item<? echo("$d");?>" id="del_item<? echo("$d");?>" class="salesinput"
    placeholder="Start typing item SKU, family, description..." style="text-align:left; width:95%;" />
    </div>
    <div id="dollar"><span class="tdblackbigger">$ </span></div>
    <div id="lfamt" style="width:15%;"><input type="text" name="del_price<? echo("$d");?>" id="del_price<? echo("$d");?>" class="salesinput" style="text-align:right; padding-right:5px;" /></div>
    <div id="lfsold" style="width:15%;"><input type="text" name="del_retail<? echo("$d");?>" id="del_retail<? echo("$d");?>" class="salesinput" /></div>
    <div id="dollar"><span class="tdblackbigger">$ </span></div>
    <div id="lfamt" style="width:15%;"><input type="text" name="del_line<? echo("$d");?>" id="del_line<? echo("$d");?>" class="salesinput" style="text-align:right; padding-right:5px;" /></div>
       </div> 
```

# java - 安卓; 应用程序已停止。简单的动画错误

> ID：12520792
> 
> 赞同：0
> 
> 时间：2012-09-20T20:54:54.910
> 
> 标签：java, android

我的应用程序初始屏幕设置为让一个图像淡入，然后是另一个，然后在第二个完成后，它被设置为启动我的主要活动。

当我的第二张图像快要淡入时，它就会崩溃。

这是我的 SplashScreen 活动；

```
package com.example.gymbuddy;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

public class SplashScreen extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_splashscreen);

    ImageView gym = (ImageView) findViewById(R.id.imageView1);
    Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.gym);
    gym.startAnimation(fade1);

    ImageView buddy = (ImageView) findViewById(R.id.imageView2);
    Animation fade2 = AnimationUtils.loadAnimation(this, R.anim.buddy);
    buddy.startAnimation(fade2);
        fade2.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {

            }

            public void onAnimationEnd(Animation animation) {
                Intent intent = new Intent(SplashScreen.this, Main.class);
                SplashScreen.this.startActivity(intent);
                SplashScreen.this.finish();
            }

            public void onAnimationRepeat(Animation animation) {

            }
        });
}

@Override
public void onPause() {
    ImageView gym = (ImageView) findViewById(R.id.imageView1);
    gym.clearAnimation();

    ImageView buddy = (ImageView) findViewById(R.id.imageView2);
    buddy.clearAnimation();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:13:13.670

我敢打赌这是两件事之一。

Main.class 不存在

或者

Main.class 未在您的清单中声明为 Activity。

你的清单中应该有这样的东西：

```
<activity android:name=".Main" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
</activity> 
```

# objective-c - 用于 IMAP 响应的 Objective C Mime Parser

> ID：12520793
> 
> 赞同：3
> 
> 时间：2012-09-20T20:54:59.613
> 
> 标签：objective-c, ios, nsdata, mime

我想解析一个包含 IMAP 响应的 NSDATA，例如

```
Date: Tue, 18 Sep 2012 02:50:54 +0000 (GMT)
From: xx@xx.com
To: yy@yy.com
Message-ID: 7034025
Content-Type: multipart/mixed; 
    boundary="----=_Part_16_9157073.1347936657899"
Message-Source: IMAP

------=_Part_16_9157073.1347936657899
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-ID: text.txt
Content-Location: text.txt
X-Section-ID: Text-Section

Test Message
------=_Part_16_9157073.1347936657899
Content-Type: image/jpeg
Content-Transfer-Encoding: binary
Content-ID: attachment_1
Content-Location: image_1347936646.jpg
X-Section-ID: Thumbnail-Section

ˇÿˇ‡ ...........

------=_Part_16_9157073.1347936657899-- 
```

从这里我想提取两个部分（文本和图像）。任何人都可以建议我一个 Objective-c mime 解析器。

注意：图像部分为二进制，未使用 base64 编码。

# solr - Solr bf 参数

> ID：12520800
> 
> 赞同：1
> 
> 时间：2012-09-20T20:55:29.803
> 
> 标签：solr

我正在阅读 apache solr 模块并注意到这一点：

bf = recip(rord(created),4,90785,90785)^200.0

有人可以解释这是做什么的吗？看起来它为创建的字段添加了自夸，但我不确定所有功能是什么（recip，rord）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:07:11.480

solr 函数查询方法记录在 Solr Wiki 上：

*   [收据](http://wiki.apache.org/solr/FunctionQuery#recip)
*   [棒](http://wiki.apache.org/solr/FunctionQuery#rord)

因此，您提供的 boost 查询为较新的文档提供了提升，使用如下所示的函数：

> (90785/(4*rord(创建) + 90785))^200

最新文件：

> (90785/(4*1 + 90785))^200 => 0.9912

最旧的文档（假设有 1000 个文档）：

> (90785/(4*1000 + 90785))^200 => 0.0001798

# joomla - JOOMLA，为文章制作替代布局的最佳方法？

> ID：12520801
> 
> 赞同：3
> 
> 时间：2012-09-20T20:55:37.803
> 
> 标签：joomla, content-management-system

我找不到答案，我想知道在 Joomla 中为文章提供替代布局的最佳方式是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:05:33.557

如果我对您的理解正确，您正在寻找一种为文章创建其他替代布局的方法。在参数选项卡*“文章选项”*下： ![Joomla 文章替代布局](../Images/85f6f5d9e217ebc11f9e747bc8b5db86.png)

如果是这种情况，它与此处提供的其他答案非常接近。只是您必须将复制的 default.php 文件重命名为其他名称。如果您将其重命名为 custom.php，它将以文本“custom”结束，如上图所示。

这是我一步一步的拍摄：

1.  查找默认布局文件。您可以使用*com_content*组件提供的那些。它们可以在**components/com_content/views/article/tmpl 找到**。复制*default.php*和*default_links.php*。

2.  现在您需要重命名文件并将其复制到模板中。目标模板可以是任何已安装的模板。使用 beez_20 复制文件的新路径应该是**templates/beez_20/html/com_content/article/ *custom* .php**和**templates/beez_20/html/com_content/article/ *custom* _links.php**。

3.  转到使用后端编辑文章。展开*文章选项选项*卡并找到*替代布局*。选择您的新布局。

您的模板可能已经提供了文章覆盖。如果是这样，您可能希望改用该模板的文件（而不是步骤 1 中的文件）。所以如果你使用 beez_20，你可以复制**templates/beez_20/html/com_content/article/default.php**和**templates/beez_20/html/com_content/article/default_links.php**。

有用的网址：

*   [使用 Joomla 的模板和布局覆盖](http://writenowdesign.com/joomla-tutorials/joomla-core-features/using-joomlas-template-and-layout-override/)
*   [Joomla 1.6 中的布局覆盖](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:43:54.873

最好的方法是安装另一个内容组件 - 例如高度可定制的[k2 。](http://getk2.org/)[或JED](http://extensions.joomla.org/extensions/authoring-a-content/content-construction)上的任何其他内容组件。

[或者，您可以在现有的Joomla 模板](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)上创建模板覆盖。这比直接在 com_content 组件中编辑文件更可取，因为模板覆盖永远不会被覆盖，而核心文件将在任何 Joomla 更新中。我应该补充一点，希望这不需要 Joomla 1.5、1.6、1.7、2.5 或 3.0（尽管目前仍处于测试阶段）。因此，请确保您没有使用 1.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:38:35.390

要为内置文章组件创建替代布局，最好的方法可能是创建模板覆盖。

请参阅[docs.joomla.org](http://docs.joomla.org/)上的这篇文章“[如何覆盖 Joomla! 核心的输出](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T02:26:55.923

为文章布局创建替代方案非常简单。您可以通过将核心布局覆盖与已发布的模板一起使用来实现此目的。

首先要获取/复制核心文章布局文件：
**components/com_content/views/article/tmpl/default.php**

然后将其放入您发布的模板中：
**templates/YOURTEMPLATE/html/com_content/article/default.php**

如果您使用的模板没有**html**文件夹，那么您必须创建该文件夹和每个文件夹以使该路径正确。

一旦你有了这个，你需要做的就是对你刚刚放在模板中的**default.php文件进行更改，就是这样！**

# c++ - ASIO 库 - 未调用处理程序

> ID：12520802
> 
> 赞同：0
> 
> 时间：2012-09-20T20:55:42.087
> 
> 标签：c++, unix, boost, boost-asio

我对 ASIO boost 库有疑问。问题是异步函数。

这是简单的服务器代码。

```
void handle_accept( const boost::system::error_code& error )
{
    std::cout << "Someone connected" << std::endl;
}

void handle_read( const boost::system::error_code& error )
{
    printf( "Message: %s \n", somedata);
}

int main()
{

std::cout << "Starting server ....\n" << std::endl;

try
{
    boost::asio::io_service io_service;
    tcp::socket  mysocket(io_service);
    tcp::acceptor myacceptor(io_service, tcp::endpoint(tcp::v4(), 5000));

    myacceptor.async_accept( mysocket, boost::bind( &handle_accept, boost::asio::placeholders::error));
    mysocket.async_receive(  boost::asio::buffer(somedata, 1024)  , boost::bind( &handle_read, boost::asio::placeholders::error) );
    io_service.run();

    std::cout << "END. \n" << std::endl;
    sleep(5);

}  catch (std::exception& e)
{
  std::cerr << "Exception: " << e.what() << "\n";
}
return 0; 
```

}

和这里的客户代码

```
int main()
{
std::cout << "Starting client ....\n" << std::endl;

try
{
boost::asio::io_service io_service;

tcp::resolver resolver(io_service);
tcp::resolver::query query(tcp::v4(), "localhost", "5000");
tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
tcp::socket mysocket(io_service);

boost::asio::connect(mysocket, endpoint_iterator);

sleep(5);
sprintf( somedata, "This is a message i sent.");
mysocket.send( boost::asio::buffer(somedata, 1024)  );

}  catch (std::exception& e)
{
  std::cerr << "Exception: " << e.what() << "\n";
}
return 0;
} 
```

那么，它应该如何工作。服务器应该等待来自客户端的连接，当客户端连接时，它应该调用handle_accept。当客户端连接时，确实调用了handle_accept，但即使没有收到数据，它也会调用handle_read !!! 为什么 ？客户端在建立连接后 5 秒后发送数据。

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:00:39.530

接收立即完成，因为它无法等待，因为它没有什么可等待的。在 TCP 侦听套接字上永远不会收到任何数据。仅调用`async_receive`您连接的套接字。

# android - Android 获取应用程序上下文

> ID：12520804
> 
> 赞同：-1
> 
> 时间：2012-09-20T20:55:49.390
> 
> 标签：android

我正在编写一个android应用程序。

我有一个扩展名为 ApplicationContext 的应用程序的类

当我打这个电话时，它会因类强制执行而爆炸

ApplicationContext appContext = (ApplicationContext) getApplicationContext();

有谁知道为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:03:23.097

你有一个名为的类`ApplicationContext`？坏主意，因为 SDK 中已经有一个同名的类。重命名你的班级。

但无论如何，`getApplicationContext()`是一种`Context`返回`android.content.Context`对象的方法。

如果在队列中，

```
ApplicationContext appContext = (ApplicationContext) getApplicationContext(); 
```

`ApplicationContext`引用 YOUR class `ApplicationContext`，那么你会得到一个类转换异常，因为`getApplicationContext()`它不返回 YOUR 类，它返回一个`android.context.Context`. 在这种情况下，将行更改为，

```
android.content.ApplicationContext appContext = getApplicationContext(); 
```

因为我看不到你的进口，问题实际上可能是相反的。`ApplicationContext`指的是`android.content.ApplicationContext`，并且`getApplicationContext()`是您的方法，它返回一个`your.package.ApplicationContext`. 在这种情况下，将行更改为，

```
your.package.ApplicationContext appContext = getApplicationContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:59:50.690

我不相信 Android 的`ApplicationContext`类是公开的，我相信它是 Android SDK 类私有的抽象类。

此外，您将无法将 Context 分配给扩展的 Application 类。你必须扩展`Context`.

# java - EJB、JPA业务方法转化为实体

> ID：12520813
> 
> 赞同：1
> 
> 时间：2012-09-20T20:56:40.907
> 
> 标签：java, jakarta-ee, jpa, entity

我从投影仪得到了 uml 图并进入了实体我有方法 getTotalPrice()

所以这是我的课：

```
public class UOrder {

   @OneToMany
   private List<Product> products;

   ....
   public BigDecimal getTotalPrice(){
   BigDecimal b = new BigDecimal(0.0);
   for(Product p : products){
   b.add(p.getPrice());
   }
   return b;

 }

} 
```

**这样做是个好主意吗？将逻辑业务转化为实体？** 我在 uml 图中只有函数而不是字段 totalPrice 或类似的东西，所以我发现它一定是这样的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:20:25.077

这更像是一个品味问题。例如，如果您喜欢[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)理念，这是一个非常好的主意，因为总价格属于`UOrder`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:19:47.380

我认为还不错，但我更喜欢（伪代码）：

```
public class UOrder {
    ...
    public BigDecimal getTotalPrice() {
        return PriceUtil.getTotalPrice(products);
    }
}

public class PriceUtil {
    public static BigDecimal getTotalPrice(List<Product> products) {
        return sum-of-products;
    }
    ... other userful and fancy price functions ...
} 
```

因为你通常需要：

*   计算增值税或
*   其他类别的价格作为产品或
*   其他类别的价格为 UOrder
*   等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T23:06:30.747

作为另一种观点（活动记录样式数据映射对象只是方便形式的持久数据 - 值对象），这是我的想法：

鉴于您已经说过该方法*是*业务逻辑，并且考虑到@Anton 谈到的众所周知的领域 - 这是一个坏主意。如果您*没有*说这是业务逻辑，我会质疑您为什么关心应用程序中的总数。

作为一个实验，考虑重新命名您的映射类 UOrderData，将其视为一个值对象，并拥有一个在应用程序级别实现业务逻辑的 UOrder 类。

# ms-access - MS Access 中的无效数字签名

> ID：12520823
> 
> 赞同：1
> 
> 时间：2012-09-20T20:57:38.113
> 
> 标签：ms-access, vba

我碰巧 MS Access 拒绝了我的证书并在保存期间拒绝签署文件并显示一条消息：

> “对数据库或项目的修改使相关的数字签名无效”

如何强制 MS Access 对文件进行签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:57:38.113

解决方案是：

1.  从命令提示符反编译文件（应该欢迎在反编译之前制作副本）

    "C:\Program Files\Microsoft Office\Office\MSACCESS.EXE" "d:\My Documents\access\mayapp.mdb" /反编译

2.  在 VBA 编辑器中再次编译代码

3.  压缩/修复文件

# css - margin-left 到文本（ text-align: center）

> ID：12520825
> 
> 赞同：0
> 
> 时间：2012-09-20T20:57:43.870
> 
> 标签：css, internet-explorer

我有一个带有跨度和一些文本的 H2 元素：

```
<h2><span.../> Some text</h2> 
```

文本居中，我需要将跨度放在其左侧。我在用：

```
span {
  margin-left: -60px;
} 
```

哪个适用于 Firefox 和 Chrome，但不适用于 Internet Explorer 9。如何使其适用于 IE9 和 IE8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:01:38.530

SPAN 是一个内联元素。这些不能采用水平边距或填充。您需要制作 SPAN `display: inline-block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:08:13.237

如果文本居中，您可以`float: left;`在跨度上使用 a。这将始终确保跨度位于 h2 的最左侧。

如果您只是希望跨度也居中但在行的开头，则无需执行任何操作，因为跨度是内联元素。

看我的例子：

[http://jsfiddle.net/kkesk/2/](http://jsfiddle.net/kkesk/2/)

示例 1 使用 float: left; 示例 2 使用填充。

# ruby-on-rails - Rails Server 未在终端内完成

> ID：12520834
> 
> 赞同：0
> 
> 时间：2012-09-20T20:58:24.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 新手，正在学习 RonR3 教程。除了第 59 页，一切都运行良好

```
$ rails generate scaffold Micropost content: String user_id:integer. 
```

当我尝试运行 rails s 或 rails server 时，我的终端应用程序似乎永远不会结束。当我在 10 多个小时后按 ctrl-c 关闭服务器时，在 localHost 上找不到该站点。任何帮助将非常感激。

一切似乎都停止了：

```
Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2012-09-20 13:33:54 -0400
Served asset /users.js - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-09-20 13:33:54 -0400
Served asset /jquery_ujs.js - 304 Not Modified (0ms) 
```

在此之后，终端只是坐在那里无所事事......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:08:28.437

从终端运行程序，除非它们停止或有守护程序选项，否则它们将在那里运行。当您按下 ctrl-c 时，rails webbrick 服务器停止，因此 localhost 当然不会显示任何内容。

当服务器坐在那里时，它正在等待用户访问该站点。例如，它不会渲染视图，除非有渲染视图的请求。

如果您想在仍然使用相同终端窗口的同时运行网络服务器，则需要`rails s`作为守护进程（后台进程）运行。相反，运行`rails s -d`将“分离”服务器进程的命令。

附带说明一下，如果您的操作系统有 GUI/窗口管理器，为什么不打开多个终端窗口。我通常会打开三个终端窗口来运行服务器、进行 git 提交、检查`rake routes`等。

相关问题：[在后台运行 Webrick 服务器？](https://stackoverflow.com/questions/3381561/running-webrick-server-in-background)

# scheme - '（报价单）在方案中

> ID：12520835
> 
> 赞同：3
> 
> 时间：2012-09-20T20:58:29.927
> 
> 标签：scheme, racket, quote

我正在尝试自己学习计划。谁能告诉我为什么`'(quote quote)`会输出`'quote`，`'(quote 'quote)`会输出`''quote`吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:04:00.977

这个表达式：

```
'(quote quote) 
```

... 展开后`'<something>`等于`(quote <something>)`，`(quote (quote quote))`注意符号`quote`被*引用*了两次，这个表达式被计算并打印为`''quote`。

另一方面，这个表达式：

```
'(quote 'quote) 
```

... 等价于`(quote (quote (quote quote)))`，请注意该符号`quote`被*引用*了 3 次，并且该表达式被计算并打印为`'''quote`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:28:53.007

看看（免费，在线）[如何设计程序，intermezzo 2](http://www.ccs.neu.edu/home/matthias/HtDP2e/i2-3.html)。它根据列表和缺点解释报价。如果该解释中的任何内容没有意义，请在教科书中稍作备份。

# iphone - 我们如何在 iOS6 中运行 kml 文件？

> ID：12520837
> 
> 赞同：1
> 
> 时间：2012-09-20T20:58:34.727
> 
> 标签：iphone, objective-c, ios, ios6-maps

众所周知，iOS6 已经启动，任何人都可以告诉我们如何在 iOS6 的地图上显示 kml 文件。之前我在谷歌地图上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:39:53.867

我的理解是显示 KML 文件应该没有什么不同。我当前的 mapkit 项目无缝升级到 iOS6。我会尝试上传 Apple 的示例代码 KMLViewer，编译它并下载到您的设备。它对我有用。

# c++ - C++ - 模板函数调用运算符重载 - 错误 C2064

> ID：12520843
> 
> 赞同：1
> 
> 时间：2012-09-20T20:59:20.550
> 
> 标签：c++, templates, operator-overloading, function-call-operator

我正在尝试在 c++ 中重载函数调用运算符，但我遇到了无法解决的编译错误（Visual Studio 2010）。

错误在行`act(4);`

```
#include <stdio.h>
#include <iostream>

void Test(int i);
template <class T> class Action
{
    private:
        void (*action)(T);
    public:
        Action(void (*action)(T))
        {
            this->action = action;
        }
        void Invoke(T arg)
        {
            this->action(arg);
        }
        void operator()(T arg)
        {
            this->action(arg);
        }
};

int main()
{
    Action<int> *act = new Action<int>(Test);
    act->Invoke(5);
    act(4);     //error C2064: term does not evaluate to a function taking 1 arguments overload
    char c;
    std::cin >> c;

    return 0;
}

void Test(int i)
{
    std::cout << i;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T21:01:30.797

act 仍然是一个指针，您必须首先取消引用它，如下所示：

```
(*act)(4); 
```

# properties - Semantic mediawiki - 将属性设置为值范围

> ID：12520844
> 
> 赞同：1
> 
> 时间：2012-09-20T20:59:28.453
> 
> 标签：properties, mediawiki, semantics

我正在尝试将特定属性设置为非精确值，例如说我想将松树的高度定义为通常在 3-80 m 之间（根据维基百科）。然后我想设置类似 [[Has height::3-80]] 的东西（当然这不起作用）并使用“自定义单位”将单位定义为米。然后我希望能够查询例如“可以达到 70 米高度的树木”并且松树将被包括在内。几个小时以来，我一直在寻找和尝试不同的角度，但我无法弄清楚。尝试使用 #set_recurring_event 但这似乎仅适用于日期/时间。还了解如何使用#arraymap 为属性设置多个值，但这似乎对我没有帮助。真的很感激这方面的帮助（它' s 可能很容易，就在我面前）谢谢！重心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:37:21.397

没有这样的事情。但是您可以使用所需的参数创建模板。你只是使用代码有点`{{range|min|max|units}}`。例如，您的高度范围看起来像`{{range|3|80|m}}`。

# html - 如何测试是否为 Selenium 的必填字段触发了 HTML5 验证？

> ID：12520852
> 
> 赞同：4
> 
> 时间：2012-09-20T20:59:54.363
> 
> 标签：html, selenium, validation

假设我有以下 HTML5 片段：

```
<form method="get" action="logginValidation.php">
    <input type="text" required="" name="username">
    <button class="btn" type="submit">Se connecter</button>
</form> 
```

使用 Selenium，我将字段留空并按下按钮。该表单未按我的预期进行验证，但我如何验证**该**字段是否无效以及该字段是否存在关联**消息**。

现在我没有调查的一件事是我正在使用加载了 JavaScript 库的 Twitter Bootstrap。我必须仔细检查这些库是否没有欺骗我，以及验证是否真的来自 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:55:24.973

来自 Selenium 文档：

> 目前 css 选择器定位器支持所有 css1、css2 和 css3 选择器，除了 css3 中的命名空间，一些伪类(:nth-of-type, :nth-last-of-type, :first-of-type, :last-of- type, :only-of-type, :visited, :hover, :active, :focus, :indeterminate) 和伪元素(::first-line, ::first-letter, ::selection, ::before, ::后）。

这意味着 :required、:invalid 和 :valid 不是您可以选择与之交互的伪元素。

我通过对下一页上的文本执行 VerifyNotText 来解决此限制。不理想，但工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:31:43.720

目前我正在用硒测试覆盖公司内部项目（比如员工管理系统）。所以表格上有很多强制性的输入。如果任何一个为空，则整个表单都会得到验证。输入附近的文本标签变为（变为）红色，并出现相应的验证器消息。所以我检查验证器是否正常工作的方法非常简单：-我编写了获取颜色文本方法来获取输入附近标签的颜色（如果它是红色，那么验证器已经在提交表单）

```
public String jsGetColor(String css){
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;
    }
// the way i use this method:

String defaultTimeOffLabelColor=(String)jsGetColor(propertyKeysLoader("rms.home.timeoffsportlet.addnewtimeoff.typetimeofflabel"));

        driverClickByCssSelector("rms.home.timeoffsportlet.addnewtimeoff.submitbutton");

        String validationTimeOffLabelColor=(String)jsGetColor(propertyKeysLoader("rms.home.timeoffsportlet.addnewtimeoff.typetimeofflabel"));

        //verifying validation works properly using Assert mechanism
 Assert.assertFalse("validation is invalid", validationTimeOffLabelColor.equals(defaultTimeOffLabelColor)); 
```

另外我应该补充一点，如果验证器有效，则会出现错误消息。因此，您可以找到此消息的定位器并比较适当的文本。在其他情况下，当验证器没有工作时，例如提交表单，验证器消息的样式将类似于“display:none”。因此，要了解一切正常，您只需检查消息是否可见：

```
driver.findElement(By.cssSelector(...blabla...)).isDisplayed() 
```

最后一点。如果您想验证验证器的消息。

```
public void addNewTimeOffValidatorsMessagesCheck(String expectedValidationMsg)  {
        Assert.assertTrue(driver.findElement(By.cssSelector(propertyKeysLoader("rms.home.timeoffsportlet.addnewtimeoff.validationmessage"))).getText().trim().equals(expectedValidationMsg));
    }
 addNewTimeOffValidatorsMessagesCheck("Timeoff type was not selected!"); 
```

希望现在它对你来说变得更清楚了）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T10:45:11.900

我认为这可以通过检查元素是否在 HTML 中具有“必需”属性来测试。示例代码是：- usernameField.getAttribute("required")

如果它不为空，那么我们可以确定验证已被触发。

# web-applications - 如何 ::: 创建一个“照相亭”网络应用程序/网站？

> ID：12520860
> 
> 赞同：0
> 
> 时间：2012-09-20T21:00:44.483
> 
> 标签：web-applications

最近有人问我是否可以设计一个“照相亭”网络应用程序，让某人可以访问一个网站，如果他们的电脑上有摄像头/或者他们的手机上有摄像头，它会拉起相机并允许拍摄照片并在屏幕上显示。然后他们将被允许将照片通过电子邮件发送给自己。那将是它的基本功能。

我对 HTML5、CSS3 和 jQuery 很满意……我可以用它们来创建这个软件吗？

或者...

他们的“现成”软件/插件是否允许我获取代码并相应地对其进行编辑以适应项目规范？

如果有人有一些建议，我将不胜感激！

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:02:59.340

如果您只想支持 HTML5 浏览器，请查看 HTML5 Webcam Toy [http://neave.com/webcam/html5/](http://neave.com/webcam/html5/)

我相信如果您想支持旧版浏览器，Adobe Flash 也可以利用用户的相机。

# android - 布鲁克斯通漫游者安卓

> ID：12520863
> 
> 赞同：0
> 
> 时间：2012-09-20T21:01:10.870
> 
> 标签：android, adhoc

好的，请不要对我大喊大叫，因为这可能是一个编程问题。这种情况与一个问题非常相似，因为它过于硬件特定或其他原因而被删除。无论如何，我有一辆布鲁克斯通漫游者。我正在尝试使用我下载的应用程序来控制它。问题是 Android 不支持 Rover 正在广播的那种 ad-hoc 网络。所以...如果用PC的无线网卡连接到Rover，然后通过有线连接到无线路由器，我可以编写一些软件，使计算机充当计算机两个接口之间的“路由器”（有线到路由器和无线到流动站）

我是否必须编写一个有两个套接字的 Java 程序？如果是这样，在 Java 中，您如何选择希望数据包在哪个网络接口上发出？（套接字编程）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:11:20.970

是的，听起来您会编写一个具有两个套接字的*代理*程序，一个连接到您的 Rover，另一个连接到您的 Android。这不是网络意义上的“路由器”（您不是直接处理 IP 数据包），而是一个有两个套接字连接到两个不同网络的程序。该程序的工作是读取套接字 A 上的任何内容并将其发送到套接字 B，反之亦然。

您不必“选择”您的数据包在哪个网络接口上发出，因为操作系统会为您执行此操作。但是，您必须连接到正确的 IP 地址，并且操作系统会处理数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:40:32.013

我是那个应用程序的开发者，我的问题是太针对硬件了。Windows 上有软件解决方案，例如 Connectify。我的理想方案是（改编的）路由器上的 DD-WRT 固件。请注意，每个代理都会引入延迟，这对于远程控制机器人来说并不好。

# cocoa-touch - iOS6 向后兼容

> ID：12520864
> 
> 赞同：1
> 
> 时间：2012-09-20T21:01:17.747
> 
> 标签：cocoa-touch, deprecated, backwards-compatibility, ios6

我想同时支持运行 iOS5 和 iOS6 的用户。但是例如`UIViewController`'s 方法`-viewDidUnload`在 iOS6 中已被弃用。那么我如何将它用于运行 iOS5 的用户，而不是运行 iOS6 的用户呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:07:28.193

您可以继续在代码中使用此方法，只是不会调用它。如果你真的希望调用它，你可以在`didReceiveMemoryWarning`. 事实上，也可以将旧 iOS 的代码移到那里。

您可能感兴趣的其他更改与轮换有关。您可以实现新的 iOS6 方法，也可以保留旧的方法，它们不会相互干扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:23:18.493

虽然确实可以继续打电话给`viewDidUnload`……</p>

来自 WWDC 讨论的信息是，您不仅不应该拥有`viewWillUnload`iOS6`viewDidUnload`的情况，而且应该继续将其删除以用于将用于 iOS 5 和 iOS 6 的代码。

讲述 W​​WDC 幻灯片演示的苹果花花公子给出的理由是，苹果做了一些研究，并得出结论，它解决了一整类可以避免的崩溃问题，并且只处理了少量内存。

建议是，当前其中之一对您的应用程序绝对必要的任何内容都可能出现在 viewDidDisappear:animated: 或 dealloc 中（对于需要回馈内存的大型共享内容），并且会有很多情况两者都不是必需的。

（不是倡导者，只是转发我从 WWDC 材料中学到的关于该主题的知识……）

# php - 将 mysql 结果集转换为 (name, data) 对象以输入 HighCharts

> ID：12520865
> 
> 赞同：0
> 
> 时间：2012-09-20T21:01:20.120
> 
> 标签：php, jquery, mysql, json, highcharts

我正在使用[HighCharts 条形图](http://www.highcharts.com/demo/bar-basic)将 mysql 结果集中的数据绘制成条形图。

现在我的查询结果如下：

```
Name       Expense
-----------------
July       700.0000
August     450.0000  
September  1700.0000 
```

HighCharts的`series`属性需要以下格式的数据来绘制图形

```
[
 {name:"July",data:[700.0000]},
 {name:"August",data:[450.0000]},
 {name:"September",data:[1700.0000]}
] 
```

所以我想将我的结果集转换为 JSON 对象，使用`json_encode($row)`. 但我得到以下输出：

```
[{"name":"July","data":"700.0000"},
 {"name":"August","data":"450.0000"},
 {"name":"September","data":"1700.0000"}] 
```

**疑点：**

1.  有没有办法以与 HighCharts 的系列属性所要求的格式完全相同的格式获取/转换结果集？
2.  我也可以使用在 php 块中创建的对象，直接进入 javascript 吗？假设我从结果集中创建了一个对象`$jsonNameData`。然后我可以在javascript中使用它吗

    `series: <? echo $jsonNameData ?>`

**编辑：**

我能够通过执行以下操作来解决 Q1：

```
$count = 0;
$strSeries = "[";
while($r = mysql_fetch_assoc($result)) {

   if($count == 0){
       $strSeries .= "{name:'" . $r['name'] . "',";
       $strSeries .= "data:[" . $r['data'] . ']}';
       $count = 1;
   }
   else {
       $strSeries .= ",{name:'" . $r['name'] . "',";
       $strSeries .= "data:[" . $r['data'] . ']}';
   }
 $rows[] = $r;
}
$strSeries .= "]"; 
```

将所需的字符串放入`$strSeries`.

现在的问题是第二个问题。我将值分配给`$strSeries`javascript 中的一个变量，但是当我将该变量用作

```
series: variableName 
```

即使变量具有正确的值（通过警报检查），它也没有正确绘制图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:18:58.163

没有机会运行下面的代码，但这应该可以工作或与此非常相似

```
$series=array();
while($item = mysql_fetch_assoc($result)) {
  $serie=array(
     "name" => $item['name'],
     "data" => array(floatval($item['data']))
  );
  array_push($series,$serie);
}
echo json_encode($series); 
```

一个建议是始终坚持进行[`json_encode()`](http://www.php.net/manual/en/function.json-encode.php)jsonification。您可能想通过参考页面上的[这个示例](http://www.php.net/manual/en/function.json-encode.php#example-3493)来了解 json_encode 如何与数组一起工作

**编辑：**回答你的第二个问题。您可能在 javascript 控制台中收到 highchart 错误 #14？看看这个问题[Highcharts 返回错误 14](https://stackoverflow.com/questions/12485560/highcharts-returning-error-14)

*PS请不要将多个问题混为一谈，分开发布，也可以更有效地使用javascript控制台和SO搜索等工具*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:20:47.153

我会试试这个：

```
$jsonObj = '[';
foreach($mysqlResul as $item){
    $jsonObj .= '{"name":"'.$item['name'].'","data":['.$item['data'].']},';
}
// strip off last comma
$jsonObj = substr(0,strlen($jsonObj)-1,$jsonObj);
$jsonObj .= ']'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:31:54.503

```
select concat('{name:"', name, '",data:[', expense, ']}') as foo
from bar 
```

# c# - Monotouch SplitView 更改详细信息视图

> ID：12520871
> 
> 赞同：2
> 
> 时间：2012-09-20T21:01:52.370
> 
> 标签：c#, ipad, xamarin.ios, uikit

请原谅我将展示的新奇水平。

`UISplitViewController`我在 Monotouch 中创建了一个新的 iPad Master/Detail ( ) 应用程序。左侧的主控制器是`UITableViewController`. 右边的细节只是一个`UIViewConroller`。这些默认情况下在 AppDelegate 代码中加载。

然后在主控制器中，我将一些项目添加到表中并覆盖了`RowSelected()`事件，效果很好，所以我可以选择项目。我添加了一个额外的`UIViewController`( `DetailViewController2`)，当在表格中选择一个项目时，我想在屏幕右侧显示它。哪个item都无所谓，我只想把右边DetailViewController所在的内容改成`DetailViewController2`. 我已经尝试了很多东西，但没有任何效果——我知道这应该很明显，但我迷路了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:55:27.983

If you are using `UISplitViewController`, the way to change the master and detail controller is to update the ViewControllers property. It always wants both, the master and the detail controller. If you want to update the detail only, your code would be something like this:

```
var masterController = splitController.ViewControllers[0];
var newDetailController = new DetailViewController2();
splitController.ViewControllers = new UIViewController[] { masterController, newDetailController }; 
```

For Documentation see here: [http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)

# c# - 如何让这个程序更好地进行代码重用？

> ID：12520873
> 
> 赞同：0
> 
> 时间：2012-09-20T21:02:06.047
> 
> 标签：c#, .net, mysql, redmine

我有一个程序可以从与 Redmine 一起使用的 SQL 中提取数据。该程序适用于普通的 AR 提取，但现在我们想要提取到其他类型。所以我们会有 AR 提取，ICN 提取......我怎样才能让这段代码更通用？我考虑创建一个名为“TypeLinker”的新命名空间，它将确定传递的类型，然后为它们分配不同的模板。这是一个好主意吗？

**主要代码**

```
private static void Main(string[] args)
{
    try
    {
        if (args[0] == "ALL" || args[0] == "*" || args[0] == "all")
        {
            PrintARs();
            Console.Read();
        }
        else
        {
            CreateARDocument(args[0]);
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
        Console.Read();
    }
}

public static void PrintARs()
{
}

public static void CreateARDocument(string arg)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:08:06.917

您需要阅读有关工厂模式的信息。

[http://www.codeproject.com/Articles/9319/Creating-a-Class-Factory-with-C-and-NET](http://www.codeproject.com/Articles/9319/Creating-a-Class-Factory-with-C-and-NET)

也可以用抽象基类来完成。

最好的祝福。

# c# - 如何在 C# 中引用泛型类型的内部泛型类型

> ID：12520887
> 
> 赞同：0
> 
> 时间：2012-09-20T21:03:06.407
> 
> 标签：c#, generics

考虑这个通用类：

```
class TList<T> : System.Collections.Generic.List<T> {
} 
```

*我有另一个包含*这些列表的通用列表类，可能需要处理它们的成员：

```
class TListList<U, T> : System.Collections.Generic.List<U> where U : TList<T>
{
   public void Foo() {
      foreach(U list in this) {
        T bar = list[0];
      }
   }
} 
```

这是一个具体的实现：

```
class FooList : TList<Foo> {}
class FooListList : TListList<FooList, Foo> {} 
```

我想做*的*是在规范中删除 T 类型参数，`TListList`并让编译器在子句中注意到它，`where`并使其对 的成员可用`TListList`：

```
class TListList<U> where U : TList<T> { ...same Foo() as above... }

class FooList : TList<Foo> {}
class FooListList : TListList<FooList> {} 
```

这可能吗，我只是走错了路，还是语言无法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:06:50.367

不，这是不可能的。每个不同的泛型类型必须提前声明——你不能`T`在 list 中省略`<U, T>`，因为 then`T`是一个未声明的标识符。

(Also, I'm sure you know this, but inheriting from `List<>` is a very bad thing to do. Implement `IList<>` instead, and delegate to an implementation.)

# android - 如何在 UI 设置时获取 ActionBar 菜单？

> ID：12520894
> 
> 赞同：6
> 
> 时间：2012-09-20T21:04:26.997
> 
> 标签：android, android-actionbar

出于某种原因，在我的应用程序中`onCreateOptionsMenu()`被调用`onResume()`...因此，我在设置 UI 时无法控制菜单（介于`onCreate()`和之间`onResume()`），这导致无法设置相应的操作我的 ActionBar 的项目...

到目前为止，我发现的唯一解决方法是在返回`invalidateOptionsMenu()`之前手动调用`onCreate()`；这种方式`onCreateOptionsMenu()`会立即被调用，我抓住菜单，然后我终于可以添加所需的操作项。

有没有人遇到过这个问题？你应该如何以编程方式设置你给定的操作项`onCreateOptionsMenu()`被调用后`onResume()`？

我的应用程序在 JellyBean 上运行，它使用内置的 ActionBar（没有 ActionBarSherlock），`android:minSdkVersion="14"`并且`android:targetSdkVersion="16"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:51:09.920

首先考虑也许你不应该这样做。听起来您的想法可能与 Android 的典型设计模式背道而驰。例如，如果您的菜单响应用户选择而改变，您应该使用上下文操作模式。

*   来自[操作栏 API 指南](http://developer.android.com/guide/topics/ui/actionbar.html#ChoosingActionItems)：

    > 作为一般规则，选项菜单中的所有项目（更不用说操作项目）都应该对应用程序产生全局影响，而不是只影响界面的一小部分。[...] 因此，即使在决定菜单项是否应作为操作项出现之前，请确保该项具有当前活动的全局范围。

*   从[菜单 API 指南](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)：

    > `View`您永远不应该根据当前焦点更改选项菜单中的项目。在触摸模式下（当用户不使用轨迹球或方向键时），视图无法获得焦点，因此您永远不应将焦点用作修改选项菜单中的项目的基础。如果要提供对 a 上下文敏感的菜单项`View`，请使用[Context Menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)。

* * *

除此之外，如果您确实想按照您所描述的那样更改菜单项，您应该**在`onPrepareOptionsMenu()`**. 当发生需要更改菜单项的事件时，将相关信息放入字段并调用`invalidateOptionsMenu()`. 覆盖`onPrepareOptionsMenu()`并检查字段的值以确定要添加/删除的菜单项。

（它也可以调用`invalidateOptionsMenu()`和覆盖`onCreateOptionsMenu()`来修改应该显示的菜单项，尽管不推荐这种方法。）

更多来自[菜单 API 指南](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)：

> 您应该`onCreateOptionsMenu()`仅用于创建初始菜单状态，而不应在活动生命周期中进行更改。如果要根据活动生命周期中发生的事件修改选项菜单，可以在 `onPrepareOptionsMenu()`方法中进行。
> 
> 此方法将`Menu`当前存在的对象传递给您，以便您可以修改它，例如添加、删除或禁用项目。（片段也提供`onPrepareOptionsMenu()`回调。）
> 
> *   在 Android 2.3.x 及更低版本上，`onPrepareOptionsMenu()` 每次用户打开选项菜单（按下菜单按钮）时系统都会调用。
>     
>     
> *   在 Android 3.0 及更高版本上，当菜单项出现在操作栏中时，选项菜单被认为始终处于打开状态。当事件发生并且您想要执行菜单更新时，您必须调用 `invalidateOptionsMenu()`系统调用来请求 `onPrepareOptionsMenu()`。

# cluster-computing - 如何在 Jgroups 中使用 FD_PING 和 tcp

> ID：12520898
> 
> 赞同：0
> 
> 时间：2012-09-20T21:04:50.353
> 
> 标签：cluster-computing, jgroups

我正在尝试将 FD_PING 与 jgroups 一起使用，但它失败了。我在 jg-protocol-id.xml 的协议列表中添加了 FD_PING，之后它开始识别 FD_PING，但是当它在 FD_PING 中调用命令时，它发送节点的名称而不是要验证的 ip/主机名。以下是配置。另外请让我知道我是否可以通过某种方式稳定故障检测。目前我们收到很多误报（因为我正在尝试使用 FD_PING）。

```
<config xmlns="urn:org:jgroups"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/JGroups-3.0.xsd">
<TCP bind_port="7800"
     loopback="true"
     recv_buf_size="${tcp.recv_buf_size:20M}"
     send_buf_size="${tcp.send_buf_size:640K}"
     discard_incompatible_packets="true"
     max_bundle_size="64K"
     max_bundle_timeout="30"
     enable_bundling="true"
     use_send_queues="true"
     sock_conn_timeout="300"

     timer_type="new"
     timer.min_threads="4"
     timer.max_threads="10"
     timer.keep_alive_time="3000"
     timer.queue_max_size="500"

     thread_pool.enabled="true"
     thread_pool.min_threads="10"
     thread_pool.max_threads="100"
     thread_pool.keep_alive_time="5000"
     thread_pool.queue_enabled="true"
     thread_pool.queue_max_size="100"
     thread_pool.rejection_policy="discard"

     oob_thread_pool.enabled="true"
     oob_thread_pool.min_threads="1"
     oob_thread_pool.max_threads="8"
     oob_thread_pool.keep_alive_time="5000"
     oob_thread_pool.queue_enabled="true"
     oob_thread_pool.queue_max_size="100"
     oob_thread_pool.rejection_policy="discard"/>

<TCPPING timeout="1000"
         initial_hosts="${jgroups.tcpping.initial_hosts:localhost[7800]}"
         port_range="20"
         num_initial_members="20"/>
<MERGE2  min_interval="3000"
         max_interval="10000"/>
<FD_PING timeout="3000" max_tries="3" cmd="/tmp/test.sh"/>
<VERIFY_SUSPECT timeout="1500"  />
<BARRIER />
<SCOPE  thread_pool.min_threads="25"
        thread_pool.max_threads="100"
        thread_pool.keep_alive_time="20000"
        expiration_time="60000"/>
<pbcast.NAKACK
               use_mcast_xmit="false"
               retransmit_timeout="300,600,1200,2400,4800"
               discard_delivered_msgs="true"/>
<pbcast.STABLE stability_delay="1000" desired_avg_gossip="50000"
               max_bytes="4M"/>
<pbcast.GMS print_local_addr="true" join_timeout="3000"
            view_bundling="true"/>
<UFC max_credits="2M"
     min_threshold="0.4"/>
<MFC max_credits="2M"
     min_threshold="0.4"/>
<FRAG2 frag_size="60K"  />
<pbcast.STATE_TRANSFER/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:54:46.723

我已经用我自己的协议封装了 FD_PING 来解决这个问题。

```
import org.jgroups.Address;
import org.jgroups.Event;
import org.jgroups.PhysicalAddress;
import org.jgroups.protocols.FD_PING;

public class FD_TEST extends FD_PING {

    public FD_ILABS() {
        super();
        updatePingDestination();
    }

    @Override
    public Object up(Event evt) {
        // TODO Auto-generated method stub
        Object up = super.up(evt);
        updatePingDestination();
        return up;
    }

    @Override
    public Object down(Event evt) {
        // TODO Auto-generated method stub
        Object down = super.down(evt);
        updatePingDestination();
        return down;
    }

    private void updatePingDestination() {
        if(ping_dest!=null && !(ping_dest instanceof PhysicalAddress)) {
            Address p = ping_dest;
            ping_dest = (PhysicalAddress)down_prot.down(new Event(87, p));
        }
    }

} 
```

所有协议都是堆叠的，因此您最终可以访问 TCP。顺便说一句，jgroups 具有链式协议。

# c# - 如何在 for 循环之后运行 for 循环？

> ID：12520899
> 
> 赞同：1
> 
> 时间：2012-09-20T21:04:55.453
> 
> 标签：c#

我有一个变量“start”，它的初始化值为 0。

当 1 个参数为真时，我如何切换到不同的循环。

所以这就是我想要完成的

当我点击按钮

第一个循环从包含“XXXX”的文本块 1 开始，每次单击/触摸时，变量“开始”递增 1 直到达到 34 。所以当计数器达到 34 时，文本变为 'YYYY'

第二个循环是计数器重置并再次从 0 开始，但这次它只需要上升到 33 。一旦达到 33，文本就会变为“ZZZZ”。

Last Loop: 计数器再次重置，直到 33 。但这一次，当它完成时。它回到循环 1。

这是我现在拥有的代码，我似乎无法弄清楚如何进行最后一个循环。

```
public partial class MainPage : PhoneApplicationPage
{
    private int start = 0;
    private bool sw = false;
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        int start = 0;

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        tasbih();            
    }
    public void tasbih()
    {
        if (sw == false)
        {
            textBlock1.Text = "TEXTBX 1";
        }
        start++;
        String text1 = Convert.ToString(start);
        textBlock2.Text = text1;

        if (start >= 35)
        {
            textBlock1.Text = "TEXTBX 2";
            start = 0;
            String text2 = Convert.ToString(start);
            textBlock2.Text = text2;
            sw = true;                
        }

    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {

        textBlock1.Text = "Reset";
        tasbih();

    } 
```

我还有一个重置按钮，无论您在柜台的哪个位置，一切都将重新开始。关于我如何做到这一点的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:25:42.780

我建议你有一个更明确的状态变量，并为你的所有逻辑关闭它。您目前`start`只为过渡到关闭，`sw = true`如果您有明确的状态会更容易。

```
enum MyState { Part1, Part2, Part3 }

MyState currentState = Part1;
int clickCount = 0;

public void tasbih()
{
    clickCount++;

    // First, do state transitions.
    switch(currentState)
    {
        case MyState.Part1:
            if(clickCount >= 34) { currentState = MyState.Part2; clickCount = 0; } 
            break;
        case MyState.Part2:
            if(clickCount >= 33) { currentState = MyState.Part3; clickCount = 0; } 
            break;
        case MyState.Part3:
            if(clickCount >= 33) { currentState = MyState.Part1; clickCount = 0; } 
            break;
    }

    // Now, act on the current (or new) state.
    switch(currentState)
    {
        case MyState.Part1:
            textBlock1.Text = "TEXTBX 1";
            textBlock2.Text = clickCount.ToString();
            break;
        case MyState.Part2:
            textBlock1.Text = "TEXTBX 2";
            textBlock2.Text = clickCount.ToString();
            break;
        case MyState.Part3:
            textBlock1.Text = "ZZZZ";
            textBlock2.Text = clickCount.ToString();
            break;
    }
}

private void button2_Click(object sender, RoutedEventArgs e)
{
    currentState = MyState.Part1;
    clickCount = 0;
    tasbih();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:54:20.123

```
// these have to be member variables, or you'll never be able to reset
// or even remember the counter between calls
private int clicks = 0;  // the number of clicks in the current loop
private int state = 0;   // which loop we're in

// these are just so we don't have to repeat ourselves.
// each element corresponds to a possible value of `state`.
// both arrays should have the same number of elements.
// alternatively, you could have a type containing the label and max together,
// and just have an array of those.
private string[] labels = { "TEXTBX 1", "TEXTBX 2", "ZZZZ" };
private int[] max = { 34, 33, 33 };

public void reset() {
    clicks = 0;
    state = 0;
    // probably reset text boxes here too.  If you don't want to, then delete
    updateTextBoxes();
}

public void bump()
{
    // bump the counter, and if it's high enough, switch to the next state
    // and reset the counter
    // (the "% max.Length" causes 3 to be 0, so states wrap around)
    if (++clicks > max[state])
    {
         state = (state + 1) % max.Length;
         clicks = 0;
    }

    updateTextBoxes();
}

private void updateTextBoxes() {
    textBlock1.Text = labels[state];
    textBlock2.Text = clicks.ToString();
} 
```

# apache - 服务器执行内部重定向后使用 htaccess 执行外部重定向的问题

> ID：12520902
> 
> 赞同：0
> 
> 时间：2012-09-20T21:05:04.810
> 
> 标签：apache, mod-rewrite, redirect

我在让 mod_rewrite 在我帮助整理的网站上工作时遇到问题。这是我在学校参与的一个组织。

目前我们的组织通过 GoDaddy 拥有一个域名，该域名重定向到我们学校托管的服务器。不幸的是，这有时会在 url 中留下双反斜杠。这些双反斜杠会导致我们设置 cookie 出现问题，因为带有单反斜杠的 url 与带有双反斜杠的 url 被识别为不同的域。

我知道使用 htaccess 文件删除双反斜杠通常是一件简单的事情；然而，学校已经在我们目录上方的某个地方有一个 htaccess 文件，它执行内部重定向，从请求 uri 中删除双反斜杠。这意味着我们的 docroot 中的 htaccess 无法判断 url 中是否有双反斜杠。同时，由于重定向是内部的，浏览器不知道执行 301 重定向到没有双反斜杠的 url。

解决此问题的最佳方法是什么？

谢谢！

# asp.net - 什么协议 XDocument.Load 用户

> ID：12520904
> 
> 赞同：0
> 
> 时间：2012-09-20T21:05:10.883
> 
> 标签：asp.net, asp.net-mvc-2, iis-7, linq-to-xml

我正在使用 url 从 url 加载 XML `XDocument.Load`。它似乎在本地工作，但在服务器中失败。我有 IIS 7、ASP.NET MVC 2 应用程序。上述函数使用什么具体协议？我需要检查哪些 IIS 设置？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:15:27.087

请发布您的代码：

```
Dim doc As XDocument 
doc = XDocument.Load("http://dl.dropbox.com/u/8842115/sample.xml") 

For Each node In doc.Descendants("first") 

  Console.WriteLine(CType(node.Element("no"), String)) 

Next 
```

# php - 使用目录/文件夹内容填充 HTML 表

> ID：12520908
> 
> 赞同：-3
> 
> 时间：2012-09-20T21:05:22.653
> 
> 标签：php, html, html-table, directory

在网站 HTML 表中，我需要使用位于网站特定目录中的 PDF 文件的名称填充该表。

例子：

表格左侧的年份：2010、2011、2012
表格顶部的月份：1、2、3 月

数据记录需要从站点根目录的结构化文件夹设置中提取：

html_public/uploadedfiles/files_type_a/2010/01jan html_public/uploadedfiles/files_type_a/2010/02feb html_public/uploadedfiles/files_type_a/2010/03mar

因此，已上传到 /01jan 文件夹的 PDF 文档将在 HTML 表的相应单元格中显示该 PDF 文件的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:18:40.797

此 PHP 代码将遍历您指定的目录，并将找到的所有 PDF 文件放入一个名为`$files`. 您可能需要调整`$dir`.

```
$dir = 'html_public/uploadedfiles/files_type_a/2010/'; //directory to pull from
$skip = array('.','..'); //a few directories to ignore

$dp = opendir($dir); //open a connection to the directory
$files = array();

if ($dp) {
    while ($file = readdir($dp)) {
        if (in_array($file, $skip)) continue;

        if (is_dir("$dir$file")) {
            $innerdp = opendir("$dir$file");

            if ($innerdp) {
                while ($innerfile = readdir($innerdp)) {
                    if (in_array($innerfile, $skip)) continue;

                    $arr = explode('.', $innerfile);
                    if (strtolower($arr[count($arr) - 1]) == 'pdf') {
                        $files[$file][] = $innerfile;
                    }
                }
            }
        }
    }
} 
```

这部分将制作一个 HTML 表格并显示所有适用的文件：

```
<table>
    <? foreach ($files as $directory => $inner_files) { ?>
    <tr>
        <td>Folder: <?= $directory ?></td>
    </tr>

        <? foreach ($inner_files as $file) { ?>
        <tr>
            <td>File: <?= $directory ?>/<?= $file ?></td>
        </tr>
        <? } ?>
    <? } ?>
</table> 
```

# requirejs - RequireJS 模块是否“继承”依赖项？

> ID：12520914
> 
> 赞同：3
> 
> 时间：2012-09-20T21:05:59.300
> 
> 标签：requirejs

如果我有一个需要应用程序命名空间的模块，例如：

```
define(["app"], function(App){
    [...]
}); 
```

...并且命名空间需要我所有模块使用的库，例如：

```
define(["jquery", "underscore", "backbone"], function($, _, Backbone){
    [...]
}); 
```

...然后我的所有模块都可以访问命名空间所需的库，即我可以使用`$`、`_`和`Backbone`.

我喜欢这种行为，因为我可以避免重复，但我怀疑我在作弊，并且我应该在每个模块中都需要库。

任何人都可以让我直接在这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:11:26.793

是的，这有点骇人听闻。您只能访问 jQuery、下划线和主干，因为它们也被定义在全局范围内。Backbone 和 undersocre 不是真正的 AMD 模块，它们必须使用 shim 配置。jQuery 在全局范围内声明自己并作为 AMD 模块，因此它可以在任何地方工作。

所以，是的，它就是这样工作的，但它不是最佳的。真正的 AMD 模块（非垫片）不会以这种方式工作，因为它们需要在定义函数参数中传递，并且您将无法仅拉出一个模块以在单独的环境中对其进行测试，等等。这种方式，您不能加载不同版本的脚本来处理不同的模块/应用程序部分/页面。

AMD 的目标是为您的代码带来模块化，因此每个模块都声明它自己的依赖项，并且将在不依赖全局范围的情况下开箱即用（这是防止名称冲突和与第三方/其他开发人员冲突的一件好事从事同一个项目）。

如果您发现每次都重新声明基本依赖项是多余的，请创建一个样板文件，您只需在创建另一个模块时复制/粘贴该文件（总比没有好）。而且，也许一些命令行工具可以为您构建 AMD 模块包装器。

太好了，是的，它可以工作，但是如果您的项目变得更大或需要逐个更新，它将无法扩展。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T17:06:33.637

上述答案的好消息：下划线 1.6.0 现在被包装为 amd 模块:)

请参阅“lib.chartjs”以在未包装的“垫片”javascript 库中导出全局变量

```
requirejs.config({
    paths: {
        "moment": "PATH_TO/js/moment/2.5.0/moment.min",
        "underscore": "PATH_TO/js/underscore/1.6.0/underscore",
        "jquery": "PATH_TO/js/jquery/1.10.2/jquery.min",
        "lib.jssignals": "PATH_TO/js/jssignals/1.0.0-268/signals.min",

        // WORKAROUND : jQuery plugins + shims
        "lib.jquery.address": "PATH_TO/js/jqueryaddress/1.6/jquery-address"
        "lib.jquery.bootstrap":"PATH_TO/js/bootstrap/3.0.3/bootstrap",
        "lib.chartjs": "PATH_TO/js/chartjs/0.2/Chart.min",
    },
    shim: {
        "lib.jquery.address": {deps: ["jquery"]},
        "lib.jquery.bootstrap": {deps: ["jquery"]},
        "lib.chartjs": {deps: ["jquery"], exports: "Chart"},
    }
}); 
```

# python - 显性与 DRY - 哪种方式更 Pythonic？

> ID：12520919
> 
> 赞同：4
> 
> 时间：2012-09-20T21:06:19.787
> 
> 标签：python, coding-style, dry

我需要废字典，主要是典型值的映射，以及一些独特的值。获得它的第一种方法是定义一个扁平的“显式”字典文字：

```
musicians = {
    'ABBA': 'pop',
    'Avril Lavigne': 'pop',
    ...
    'Mikhail Krug': 'russian chanson',
    'The Rolling Stones': 'rock',
    ...
    'Zaz': 'jazz',
} 
```

第二 - “干”一堆典型列表和特价词典：

```
pop_musicians = [
    'ABBA',
    'Avril Lavigne',
    ...
]

rock_musicians = [...]

unusual_musicians = {
    'Mikhail Krug': 'russian chanson',
    'Zaz': 'jazz',
}

musicians = dict(
    [(m, 'pop') for m in pop_musicians] +
    [(m, 'rock') for m in rock_musicians] +
    unusual_musicians.items()
) 
```

假设在我的例子中，键值关系比在这个例子中更易变（某些键的值可能会改变）。

您更喜欢哪种方式，为什么？在你看来，哪一个更pythonic？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T21:09:12.470

我的答案是分层你的数据结构：

```
genres = {
    "rock": [
        "some rock band",
        "some other rock band",
    ],
    "pop": [
        "some pop star",
        "some pop group",
    ],
} 
```

如果你必须使用第一种格式，[字典理解](http://www.youtube.com/watch?v=t85uBptTDYY&list=UUAuqj5Bs5mTTl1mIVDmuAlw&index=1&feature=plcp)会很好地完成这项工作：

```
musicians = {musician: genre for genre, musicians in genres.items() for musician in musicians} 
```

将产生：

```
{'some other rock band': 'rock', 'some pop group': 'pop', 'some rock band': 'rock', 'some pop star': 'pop'} 
```

或者，如果你发现自己不得不做很多复杂的操作，也许可以开设一个音乐家课程来给自己更多的自由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:18:56.337

对于简短的音乐家名单，第一个选择可能是最好的。如果您有相当大的列表，我会选择第二种选择。没有什么不清楚的，它减少了拼写错误的风险（如果字典变大，很可能会出现这种情况），它还将音乐家组织成视觉上不同的列表。

# c - 涉及多个 .c 文件时如何处理全局变量

> ID：12520924
> 
> 赞同：0
> 
> 时间：2012-09-20T21:06:37.870
> 
> 标签：c, parallel-processing

我有两个 .c 文件（main.c 和 support.c）。先编译support.c，然后编译main.c并与support.o链接。我在 support.c 中有几个非静态全局变量。

这些来自 support.c 的全局变量是如何存储的？如果 main.c 是多线程的，并且有两个线程调用 support.c 中的函数，它们是共享这些全局变量，还是每个都有自己的副本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:08:25.063

全局变量是一个全局变量，而且总是只有一个，无论你编译和链接程序有多少片段。如果多个线程同时访问全局数据，您需要自己确保正确同步。

获得全局或块静态变量的单独副本的唯一方法是声明它`_Thread_local`，这是在 C11 中引入的。线程局部全局变量在线程启动时初始化，并在线程加入时释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:14:54.560

我认为您可能会混淆`static`关键字的用法，当它应用于 C 源代码中存在的顶级变量时（即在任何函数或方法之外），而不是`static`在函数或关键字内的变量上使用时。

在源代码中在任何函数之外声明的顶级变量将是全局的*，除非*您将其声明为`static`. 如果是`static`，它将*仅*在该文件本地。它控制变量的*范围*。

如果`static`在函数中声明它，它会控制变量的*生命周期*。在这种情况下，即使在函数调用退出后，变量也会将自身保留在内存中，从而导致其值在多个函数调用中保持不变。

如果您声明一个全局变量（即它不是`static`并且在源文件中处于顶层），那么在内存中将始终只有一个它的实例。在其他源文件中，您必须将其声明为，`extern`以便链接器知道查找其在目标文件中为您的其他文件定义的内存位置，但内存中只有一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:53:02.747

不要忘记将全局变量声明为 volatile，否则编译器可能没有意识到它们可以被另一个线程修改并进行不安全的优化。

易失性int g_example；

# c# - 程序运行时读取控制台输出c#

> ID：12520930
> 
> 赞同：3
> 
> 时间：2012-09-20T21:06:52.660
> 
> 标签：c#, networking

我有一个 C# 程序，我想运行一个外部程序，当程序运行时，它需要读取控制台输出并将其以 JSON 格式发送到服务器。这就是我的想法。它会起作用吗？

```
ProcessStartInfo psi = new ProcessStartInfo("app.exe");
psi.RedirectStandardOutput = true;
psi.WindowStyle = ProcessWindowStyle.Hidden;
psi.UseShellExecute = false;
Process app = Process.Start(psi);

while (true)// what do I loop on?
{
    string line = "{ \"message\": \"" + app.StandardOutput.ReadLine() + "\" }";

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url + "/results/:" + runId + "/logs");
    request.ContentType = "text/json";
    request.Method = "POST";
    using (TextWriter tw = new StreamWriter(request.GetRequestStream()))
    {
        tw.WriteLine(line);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:12:06.790

最好使用类的[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件`Process`，不要阻塞程序的执行，不要在`while(true)`循环中运行代码！

如果主程序只需要站立并等待该进程退出，可以这样做

```
Process app = Process.Start(psi);
//  read code, subscription to event described above, 
// and processing it inside event handler

app.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:16:04.307

尝试这样的事情：

```
ProcessStartInfo psi = new ProcessStartInfo("app.exe");
psi.RedirectStandardOutput = true;
psi.WindowStyle = ProcessWindowStyle.Hidden;
psi.UseShellExecute = false;
Process app = Process.Start(psi);

StreamReader reader = app.StandardOutput;

do
{
   string line = "{ \"message\": \"" + reader.ReadLine() + "\" }";

   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url + "/results/:" + runId + "/logs");
   request.ContentType = "text/json";
   request.Method = "POST";
   using (TextWriter tw = new StreamWriter(request.GetRequestStream()))
   {
       tw.WriteLine(line);
   }

}while(!reader.EndOfStream);

app.WaitForExit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:11:21.003

相反，我会考虑将输出窗口的重定向更改为事件日志甚至文本文件之类的东西。然后，让您的 Web 应用程序定期检查事件日志或文本文件，同时跟踪它停止的位置，然后仅发送新结果。

# android - 将 zbar 扫描仪集成到 Android 应用程序中

> ID：12520931
> 
> 赞同：0
> 
> 时间：2012-09-20T21:06:58.310
> 
> 标签：android, android-intent, qr-code

在我的 onCreate 方法中，我创建了一个 webView，然后加载了一个保存在我的资产文件夹中的 HTML 文件。这一切都很好。当按下按钮时，它会使用 javascript 向此方法发送调用以打开 qr 码扫描仪。

```
webView.setWebViewClient(new WebViewClient()        
    {  
        /* On Android 1.1 shouldOverrideUrlLoading() will be called every time the user clicks a link, 
         * but on Android 1.5 it will be called for every page load, even if it was caused by calling loadUrl()! */  
        @Override  
        public boolean shouldOverrideUrlLoading(WebView view, String url)  
        {               
            System.out.println(url);                

            if (url.equals("fake://qr_scan")) 
            {
                launchQRScanner(view);
            }
            return false;  
        }  
    }); 
```

这是方法launchQRScanner()

```
 public void launchQRScanner(View v) {
    if (isCameraAvailable()) {
        Intent intent = new Intent(this, ZBarScannerActivity.class);
        intent.putExtra(ZBarConstants.SCAN_MODES, new int[]{Symbol.QRCODE});
        startActivityForResult(intent, ZBAR_SCANNER_REQUEST);

    } else {
        Toast.makeText(this, "Rear Facing Camera Unavailable", Toast.LENGTH_SHORT).show();
    }
} 
```

所以这适用于第一次按下按钮。二维码阅读器作为意图打开，它会扫描、消失并正确返回值。但是对于每次按下按钮时，shouldOverrideUrlLoading() 方法都不会被调用。可能与离开应用程序并返回有关？似乎无法弄清楚。

顺便说一句，这是我用来实现二维码阅读器的项目 [https://github.com/DushyanthMaguluru/ZBarScanner](https://github.com/DushyanthMaguluru/ZBarScanner)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:19:27.743

已修复，只需在扫描条码后重新加载 webView。简单的修复。

# awk - 如何将每两行汇总为一行，缺失数据显示且未更改？

> ID：12520936
> 
> 赞同：4
> 
> 时间：2012-09-20T21:07:32.050
> 
> 标签：awk

我有一个包含 2N 行的多列文件，它由 0s、1s 和缺失数据（编码为“？”）组成。它看起来像这样：

```
1 0 0 ? 1 ?
1 ? 1 ? 1 1
1 0 1 ? 1 1
0 ? 0 1 0 ?
0 0 1 ? 0 0
0 0 0 ? 0 ?
0 ? 0 0 1 1
1 1 1 1 1 1 
```

我想对每两行求和并输出一个 N 行文件。如果有“？” 连续然后输出应该是“？” 对于该特定字段 (?+0=?+1=?+? = ?)。因此，我的示例的输出将如下所示：

```
2 ? 1 ? 2 ?
1 ? 1 ? 1 ?
0 0 1 ? 0 ?
1 ? 1 1 2 2 
```

我尝试了这段代码，但在计算时似乎将丢失的数据视为“0”。有没有办法将丢失的数据保留为“？” ?

```
cat <input_file> |awk -F ' ' '{if (NR%2==1){for(j=1;j<=NF;j++)array[j]=$j;}else{result="";for(i=1;i<=NF;i++){tmp=array[i]+$i;result=sprintf("%s%d ",result,tmp);}print result;}}' > <output_file> 
```

请帮忙。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:48:43.523

I'm afraid you will have to compare each field to `"?"`:

```
< input_file  awk '
NR%2 { split($0,saved,FS) }      # save odd line fields
NR%2 == 0 {                      # on even lines:
  for(i=1; i<=NF; i++){
    $i = $i=="?"       ? "?" :   #  "?" if this line field is "?"
         saved[i]=="?" ? "?" :   #  "?" if the previous line field was "?"
         saved[i]+$i             #  the sum otherwise
  }
  print
}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T01:00:57.907

可以在一个（bash）shell中完成：

```
while read line; do 
    set -- $line
    read line
    ary=( $line )
    i=0
    for arg; do     
        if [ "$arg" = "?" -o "${ary[i]}" = "?" ]; then          
            printf "? "     
        else
            printf "%d " $(( $arg + ${ary[i]} ))     
        fi     
        ((i++)) 
    done 
    printf "\n"
done < file 
```

使用 awk，我会写一些类似的东西

```
awk '{ 
    getline nextline
    split(nextline, ary)
    for (i=1; i<=NF; i++) {
        if ($i == "?" || ary[i] == "?")
            printf("? ")
        else
            printf("%d ", $i + ary[i])
    }
    print ""
}' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:04:02.743

```
> cat temp.awk
{
if(NR%2==1)
 {
  split($0,a," ");
 }
 else
 {
 line="";
 for(i=1;i<=NF;i++)
 {
  a[i]=="?"||$i=="?" ? sum="?":sum=a[i]+$i;
  line=line" "sum;
 }
 print line; 
 }
} 
```

创建以上 awk 脚本后，使用以下命令：

```
awk -f temp.awk your_file 
```

测试如下：

```
> awk -f temp.awk temp
 2 ? 1 ? 2 ?
 1 ? 1 ? 1 ?
 0 0 1 ? 0 ?
 1 ? 1 1 2 2 
```

# mongodb - 位掩码比较 Mongo 查询

> ID：12520937
> 
> 赞同：1
> 
> 时间：2012-09-20T21:07:34.720
> 
> 标签：mongodb, bit-manipulation, bit-masks

对于博客网络应用程序，我试图在 mongo 中对一组用户、博客和资源操作进行建模。用户可以对博客文章的“赞”、“星”、“特征”资源（例如“博客文章”、“链接”、“图片”等）执行不限次数的操作。

模型看起来像

用户（user_id：long）资源（resource_id：long）资源/操作（int）

前 16 位用于存储操作，接下来的 15 位用于识别资源的类型。

所以给定一个查询， - 找到喜欢博客文章的用户列表。

在 mongo 中建模和查询它的最佳方法是什么？

我想到了类似的东西

```
User(user_id: long) Resource(resource_id: long) Resource/Action(int)
2421423                 4325235234                 17
4223545                 3454235432                 18
4235234                 4343453425                 17 
```

并对查询参数和 Resource/Action 字段使用位掩码 AND 操作来过滤正确的记录。但看起来 mongo 不支持按位运算。我读了 $where javascript 函数可用于此目的 - 但我担心使用 js 函数调用进行查询的性能。

实现这个用例的好方法是什么？

谢谢！

# javascript - 填充隐藏的表单域

> ID：12520939
> 
> 赞同：0
> 
> 时间：2012-09-20T21:07:39.103
> 
> 标签：javascript, jquery, backbone.js, handlebars.js, mustache

我的应用程序上的 GET 操作返回数组中的数据：

```
Value":[{"Id":"6b7","Notes":"testing","CreatedBy":"User1"},{"Id":"6b7","Notes":"Testing 1","CreatedBy":"User2"}] 
```

我使用上面的来填充模板：

```
<div class="create-note">
    <form>
        **<input type="hidden" id="Id" name="Id" value="{{this.Value.Id}}" />**       

        <textarea id="Notes" name="Notes"></textarea>       
        <button for="" type="submit" class="btn btn-primary ">Add Note</button>
        <button type="reset" class="btn">Cancel</button>
    </form>
            {{#unless this.Value.length}}
    <div class="alert alert-info">Notes do not exist.</div>
{{else}}
<table class="table">
    <thead>
        <tr>                        
            <th style="text-align:left">Note</th>
            <th style="text-align:left">Created By</th>
        </tr>
    </thead>
    <tbody>
        {{#each this.Value}}
            <tr>                
                <td>
                    {{this.Notes}}
                </td>
                <td>
                    {{this.CreatedBy}}
                </td>
            </tr>
        {{/each}}
    </tbody>
</table>
{{/unless}}
</div> 
```

如何填充隐藏的表单字段 (Id)。value={{this.Value.Id}} 不起作用，因为我们有一个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:39:50.247

拉出`Id`JavaScript 并将其放在您想要的位置：

```
var data = {
    "Value": [
        {"Id": "6b7", "Notes": "testing", "CreatedBy": "User1"},
        {"Id": "6b7", "Notes": "Testing 1", "CreatedBy": "User2"}
    ]
};
data.Id = data.Value[0].Id;

var tmpl = Handlebars.compile($('#template').html());
var html = tmpl(data); 
```

然后在您的模板中引用`{{this.Id}}`（或仅引用）。`{{Id}}`

演示：http: [//jsfiddle.net/ambiguous/WSAxn/](http://jsfiddle.net/ambiguous/WSAxn/)

或者，添加一个可以挖掘价值的助手，但这似乎是不必要的复杂性。

如果您要使用 Handlebars，您必须习惯于将数据按摩成对 Handlebars 友好的形式。Handlebars 的简单性既有优点也有缺点。

# powershell - 使用 PowerShell 确定文本文件中行的长度

> ID：12520942
> 
> 赞同：2
> 
> 时间：2012-09-20T21:07:56.497
> 
> 标签：powershell, for-loop

我是 PowerShell 的新手，但我想使用它，因为没有一种简单的方法可以在 Windows 批处理中获取字符串的长度。

我需要在 PowerShell 中编写一段代码，遍历 .txt 文件中的每一行并确定该行的字符长度。如果字符长度超过 250 则....等等。

....etc 部分目前并不重要:)

在 Windows 批处理中，我会这样写：

```
FOR /F %%A IN ("C:\TestFile.txt") DO (
    SET LINE=%%A
    If LINE > 250 characters then (        ' This line is made up
    ....etc
    ) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:19:14.927

以下将做你想要的：

```
$data = Get-Content "C:\TestFile.txt"
foreach($line in $data)
{
   if ($line.Length -gt 250) {
       Write-Host "A match"
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:04:09.330

试试这个：

```
:: Not fully tested:
for /f "delims=" %%s in (C:\TestFile.txt) do (
   set "x=%%s" & set /A y+=1
   setlocal enabledelayedexpansion
   for /f "skip=1 delims=:" %%i in ('"(set x&echo()|findstr /o ".*""') do set/a n=%%i-4
   if !n! gtr 250 echo Line !y! Length !n!
   endlocal
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-17T09:39:55.840

今天正在寻找这个并在这里找到了一个优雅的解决方案：[https ://softwarerecs.stackexchange.com/questions/38934/finding-the-longest-line-of-a-document/38936](https://softwarerecs.stackexchange.com/questions/38934/finding-the-longest-line-of-a-document/38936)

```
GC "c:\folder\file.txt" | Measure -Property length -Maximum | Select Maximum 
GC "c:\folder\file.txt" | Sort -Property length | Select -last 1 
```

重要提示：来自上面链接的 Pimp Juice IT 归功于 Pimp Juice IT，我只是复制/粘贴 :)

# java - 如何将托管在 app-engine 上的 gwt 应用程序转换为可安装的移动应用程序？

> ID：12520946
> 
> 赞同：0
> 
> 时间：2012-09-20T21:08:06.040
> 
> 标签：java, iphone, google-app-engine, gwt, html5-appcache

目前我的应用程序是在 Eclipse 中使用 GWT 创建并用 Java 编码的。我将应用程序托管在 app-engine 上，并且我的所有数据都使用 html5 存储保存在浏览器中。我想让这个应用程序可以安装在 iPhone 上，所以我在我的 html 文件中包含了“\<\meta name="apple-mobile-web-app-capable" content="yes" />\ ”，甚至还包含了一个自定义iPhone的图标等。

在我的 iPhone 上安装该应用程序后，在线上一切正常，但离线该应用程序甚至无法加载。我一直在阅读清单和 yaml，但我无法清楚地了解如何将我的应用程序设置为移动设备，并让它在手机上本地保存数据（应用程序缓存）。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:53:45.530

您需要开始阅读有关适用于 iPhone 的 HTML 离线应用程序。网上有很多关于这个的资源，例如[this](http://sixrevisions.com/web-development/html5-iphone-app/)和[this](http://ofps.oreilly.com/titles/9780596805784/chapOfflineApplicationCache.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:36:16.127

mgwt - 移动 GWT 具有 HTML5 清单链接器，请参阅：[http ://code.google.com/p/mgwt/wiki/HTML5Manifest](http://code.google.com/p/mgwt/wiki/HTML5Manifest)

这可以很容易地用于在本地存储您的应用程序。

还可以查看 mgwt 设置类：[http ://code.google.com/p/mgwt/source/browse/src/main/java/com/googlecode/mgwt/ui/client/MGWTSettings.java](http://code.google.com/p/mgwt/source/browse/src/main/java/com/googlecode/mgwt/ui/client/MGWTSettings.java)

在那里，您可以找到 Peter Knego 描述的教程中描述的所有属性。

# css - 边框底部为 标签在 Firefox 中不起作用，但在所有其他浏览器中都起作用

> ID：12520953
> 
> 赞同：0
> 
> 时间：2012-09-20T21:08:44.200
> 
> 标签：css

我做错了什么还是 Firefox 不支持`border-bottom`属性？我正在尝试为标签提供`1px dotted`底部边框，`<li>`该标签适用于除 Firefox 之外的所有浏览器。

我正在将 CSS 类用于推荐页面。`list-style-image: url(../images/quote-left.png);`用于打开块引用，并且在段落结束后具有引用权以关闭引号。

**HTML：**

```
<div class="testimonial">
<ul>
    <li>testimonial 1\. <img src="images/quote-right.png" /><br />
    <cite>-xxx</cite>
    </li></ul>
    <ul>
    <li>testimonial 2\. <img src="images/quote-right.png" /><br />
    <cite>-xxx</cite>
    </li></ul>
    <ul>
    <li>testimonial 3\. <img src="images/quote-right.png" /><br />
    <cite>-xxx</cite>
    </li></ul>
    <ul>
    <li>testimonial 4\. <img src="images/quote-right.png" /><br />
    <cite>-xxx</cite>
    </li></ul>
</div> 
```

**CSS：**

```
div .testimonial ul li {
    list-style-type: none;
    list-style-image: url(../images/quote-left.png);
    list-style-position: 0 0;
    font-family: Calibri, Arial, Helvetica, sans-serif;
    text-align: left;
    font-size: 1em;
    line-height: 1.4em;
    font-weight: normal;
    color: #000;
    border-bottom: 1 dotted #C0C0C0;
    padding: 0 0 20px 0;
    margin: 20px 0 0 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:11:20.707

如果这是一个菜单，您可以通过将样式放在`A`-tag 上（使用`display:block`）而不是`LI`. 另外，使用 CSS 背景，而不是 list-style-image。

```
.testimonial ul, li {
    list-style-type: none;
    margin:0;
    padding:0;
}

.testimonial a {
background-image: url(../images/quote-left.png);
background-repeat:no-repeat;
font-family: Calibri, Arial, Helvetica, sans-serif;
text-align: left;
font-size: 1em;
line-height: 1.4em;
font-weight: normal;
color: #000;
border-bottom: 1 dotted #C0C0C0;
padding: 0 0 20px 0;
margin: 20px 0 0 0;
} 
```

请参阅我的教程： http: [//preview.moveable.com/jm/ilovelists/](http://preview.moveable.com/jm/ilovelists/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:14:39.240

起初让我感到惊讶的是，Firefox 无法确定 CSS 规则的默认单位，因为您没有在边框宽度上指定它。但是，正如评论中提到的（强调我的）：

> 如果那里不允许使用无单位值，则*应该将该属性视为无效。*如果其他浏览器使用 px，则该页面处于 quirks 模式。

尝试使用它来解决您的问题：

```
border-bottom: 1px dotted #C0C0C0; 
```

注意添加的`px`位。现在border-bottom 也可以在Firefox 中使用。请参阅[此小提琴](http://jsfiddle.net/h2qUY/3/)以进行现场演示。

# mysql - 有没有更好的方法来优化这个查询？

> ID：12520955
> 
> 赞同：0
> 
> 时间：2012-09-20T21:09:05.480
> 
> 标签：mysql, join, left-join

如何优化此查询？如果您需要表格结构，请告诉我，但这是作为 Vanilla 论坛的自定义插件完成的

```
SELECT
    G.*
FROM
    (
        SELECT
            D.DiscussionID,
            A. NAME AS Category,
            D. NAME,
            U. NAME AS USER,
            D.CountComments,
            IFNULL(
                MAX(C.DateInserted),
                D.DateInserted
            ) AS Updated
        FROM
            GDN_Discussion AS D
        LEFT OUTER JOIN GDN_Comment AS C ON D.DiscussionID = C.DiscussionID
        INNER JOIN GDN_Category AS A ON A.CategoryID = D.CategoryID
        LEFT OUTER JOIN GDN_User AS U ON U.UserID = D.InsertUserID
        WHERE
            A.CategoryID = '626'
        GROUP BY
            D.DiscussionID
    ) AS G
ORDER BY
    G.Updated DESC
LIMIT 0, 10 
```

# asp.net-mvc-3 - Asp.Net MVC 3 - 通过不同的视图保留列表

> ID：12520958
> 
> 赞同：0
> 
> 时间：2012-09-20T21:09:27.993
> 
> 标签：asp.net-mvc-3, razor

我是这个技术的新手，我在传递我导入到我的应用程序的 excel 列表时遇到了一些麻烦，这里是代码：

问题是创建控制器中的模型为空，因此我无法保存到数据库中。

我之前无法在uploadcomplete 操作中保存它，因为我打算在保存到数据库之前编辑这些值。

```
 [HttpPost]
  public ActionResult Index(HttpPostedFileBase excelFile)
    {
        if (excelFile != null)
        {
            //Save the uploaded file to the disc.
            string savedFileName = Server.MapPath("~/UploadedExcelDocuments/" +   excelFile.FileName);
            excelFileHandler.ImportExcel(savedFileName, excelFile); 
            return RedirecToAction("UploadComplete",excelFileHandler.DataToEdit);        
        }
        else { return RedirectToAction("Error", "Upload"); }
    }

    public ActionResult UploadComplete(List<Persona> DataToEdit) // This comes out null so i cant render the view now
    {
        return View();
    }

    [HttpPost]
    public ActionResult UploadComplete(IEnumerable<ExcelImport.Persona> model)
    {
        return View();
    }

    public ActionResult Create(IEnumerable<ExcelImport.Models.Person> model) 
    {
        using (ExcelimportDBTestEntities context = new ExcelimportDBTestEntities())
        {
            foreach (ExcelImport.Models.Person person in model)
            {
                Persona newPerson = new Person();
                newPersona.Id = person.Id;
                newPersona.Birthday= persona.Birthday;
                newPersona.LastName= persona.LastName;
                newPersona.Name = persona.Name;
                context.Persons.AddObject(newPersona);
                context.SaveChanges();
            }
            return View();
        }
    } 
```

这是我的观点，这里一定有问题

```
@model IEnumerable<ExcelImport.Models.Person>

@{
   ViewBag.Title = "UploadComplete";
}
<h2>UploadComplete</h2>
@Html.BeginForm(){
<table>
    <tr>
        <th>
            ID
        </th>
        <th>
            Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Birthday
        </th>
        <th>
            Options
        </th>
    </tr>
  @foreach (var item in Model) {   
    @Html.HiddenFor(model => item)
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Id)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Birthday)
        </td>
        <td>

        </td>
    </tr>
    }

    </table>
   <input type="submit" value="Upload!"/>
  } 
```

编辑：我昨天很累，所以我放了一些......让我做错了“测试”，现在这就是我真正想做的。我有一个上传文件并发送到帖子索引控制器的索引视图，从那里我想将列表发送到我的 UploadComplete 控制器，所以我可以渲染 UploadComplete 视图（列表为空），并在帖子中我想将我在 UploadComplete 视图中渲染的模型发送到我的创建控制器，这样我就可以将我的数据存储到数据库中。正如我之前所说，我无法在索引操作中将其保存到数据库中，因为我打算在 uploadcomplete 视图中编辑这些数据。

预先感谢，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:26:21.593

正如我在您的代码中看到的：

*   没有 [HttpPost] 属性
*   表单动作是 GET
*   页面渲染不正确（隐藏元素）

看看这个[例子](https://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0)。它显示了如何在 POST 上绑定列表。

# python - 函数添加两个列表

> ID：12520965
> 
> 赞同：0
> 
> 时间：2012-09-20T21:10:10.567
> 
> 标签：python

编辑：感谢您的回复，这些回复很有帮助，但我不确定他们是否解决了我的问题的核心。在某些情况下，简单地选择列表中较低的值然后相应地添加值会很好，但在这种情况下，我实际上希望将不均匀列表视为较短的列表对于它缺失的值具有零值。所以我希望 [1, 2, 3] + [1, 2] 起到 [1, 2, 3] + [1, 2, 0] 的作用。我不认为 zip 或反转我的运营商会实现这一点。

我正在尝试创建一个函数，该函数添加两个列表的相应值并返回一个新列表，其中包含两个原始列表的每个索引的总和：

```
def addVectors(v1, v2):
    print(v1[0], v1[1], v2[0])
    newVector = []
    if len(v1) > len(v2):
        for index in range(len(v1)):
            print(index)
            newVector[index] += v1[index] + v2[index]
    else:
        for index in range(len(v2)):
            print(index)
            newVector[index] += v2[index] + v1[index]
    return newVector

addVectors([1, 2, 3], [1, 2]) 
```

但是我收到一个错误，指出列表索引超出范围？不知道我在这个看似简单的程序中做错了什么......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T21:12:14.733

您可能打算更改线路：

```
if len(v1) > len(v2): 
```

到：

```
if len(v1) < len(v2): 
```

这样，*当 v1 较短时*，您将迭代到 v1 中的元素数量，这可以防止您越过边缘。

请注意，这*也会*引发错误，因为`newVector`它是一个长度为 0 的列表，并且您正在访问其范围之外。你必须改变

```
newVector[index] += v1[index] + v2[index] 
```

到

```
newVector.append(v1[index] + v2[index]) 
```

但是，请注意，这可以更简单地完成*，*如下所示：

```
def addVectors(v1, v2):
    return map(sum, zip(v1, v2)) 
```

ETA：要用零填充列表，请执行以下操作：

```
import itertools
def addVectors(v1, v2):
    return map(sum, itertools.izip_longest(v1, v2, fillvalue=0)) 
```

例如：

```
addVectors([1, 2, 3, 4, 5], [1, 2])
# [2, 4, 3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T21:12:44.670

为什么不直接使用这个？

```
def sum_lists(a, b):
    return [x[0] + x[1] for x in zip(a, b)]

sum_lists([1, 2, 3], [4, 5, 6])    # -> [5, 7, 9] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T21:13:15.293

您比较列表的长度，这是正确的。但是随后您更改了所需的操作。即当 list1 比 list2 长时，您应该只循环遍历*list2*长度的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T21:29:04.037

要填充长度不等的列表，您可以使用[`itertools`](http://docs.python.org/library/itertools.html#itertools.izip_longest)：

```
>>> import itertools
>>> map(sum, itertools.izip_longest([1,2,3], [1,2], fillvalue = 0))
[2, 4, 3] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T21:14:19.210

你的问题出在这里：

```
if len(v1) > len(v2):
    for index in range(len(v1)):
        print(index)
        newVector[index] += v1[index] + v2[index] 
```

您确保`len(v1) > len(v2)`，但随后迭代`range(len(v1))`。

在您的示例中，您尝试访问`v2[2]`不存在的 。

更新：

作为对您的编辑的回应，您可以使用以下内容：

```
def addVectors(v1, v2):
    if len(v1) > len(v2):
        map(sum, zip(v1, v2)).extend(v1[len(v2):])
    else:
        map(sum, zip(v1, v2)).extend(v2[len(v1):]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T22:00:57.050

您的 IndexError 是因为当 newVector 是一个空列表时您正在尝试写入 newVector[index] 。您需要将其初始化为一堆零，或者使用 append 代替。

```
>>> first = [1,2,3]
>>> second = [1,2]
>>> output = []
>>> for i, item in enumerate(first):
...   additional = second[i] if i < len(second) else 0
...   output.append(item + additional)
...
>>> output
[2, 4, 3] 
```

为了确保 len(first) > len(second)，您可以执行以下操作：

```
first, second = first, second if len(first) > len(second) else second, first 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-14T06:09:14.373

或者你可以试试

```
def add_vector(vector1, vector2):
index = len(vector1) - 1
new = []
while index >= 0:
    result = vector1[index] + vector2[index]
    new.append(result)
    index -=1
new.reverse()
return new 
```

# jquery - jQuery条件函数依赖于一个div是否存在

> ID：12520969
> 
> 赞同：-1
> 
> 时间：2012-09-20T21:10:38.383
> 
> 标签：jquery

我有一个用 php 编写的注册表单。每组问题都在一个字段集中。页面加载时显示为打开的字段集是#are_you，它会关闭该字段集并在收到响应后移至下一组问题。

我想控制页面加载时打开的字段集。如果我的字段集#additional_login（在 div #advertise_form 内）存在，我希望该字段集显示为打开而不是 #are_you。如果未设置#additional_login，我希望#are_you 显示为打开状态。#additional_login 对用户的外观由 PHP if(isset()) 条件控制。

我不熟悉 jQuery（对不起！）所以当我尝试应用其他 SO 问题的 if 条件时我很挣扎。使 #are_you 显示为打开的代码行是使用以下语法编写的，在 .js 文件中：

```
jQuery('#advertise_form fieldset#are_you').fadeTo(250, 1, 0).removeClass('close'); 
```

请有人建议我将如何实现这一目标？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:15:36.567

您可以使用以下方法测试元素是否存在`length`：

```
if (jQuery('#additional_login').length) { 
  jQuery('#additional_login').addClass('open');
  jQuery('#are_you').addClass('close');
} else {
  jQuery('#are_you').addClass('open');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:15:10.813

```
if ($('#additional_login').length) {
    $('#additional_login').fadeIn();
} else {
    $('#are_you').fadeIn();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:15:08.083

我使用这个公式：

```
$(document).ready(function(e){ //on page ready
    if ($(element).length) { //object contains elements
    //Do what you need to do when element exists
    }
}); 
```

.length 返回 jQuery 对象中元素的数量，因此它将是一个数字（真）或 0（假）

# ios - 逻辑缓冲区加载 - 缓慢的帧缓冲区加载 - ios

> ID：12520972
> 
> 赞同：13
> 
> 时间：2012-09-20T21:11:15.150
> 
> 标签：ios, opengl-es, opengl-es-2.0, framebuffer

我们试图弄清楚为什么我们在 iphone 4 和 ipad 1 上的 FPS 相对较慢。我们在我们的开放式 GL 分析：逻辑缓冲区负载中看到了这种警告类别。摘要是“缓慢的帧缓冲区加载”。建议说帧缓冲区必须在渲染之前由 GPU 加载。它建议我们在每一帧的开头都没有执行全屏清除操作。但是，我们使用 glClear 来执行此操作。

```
[EAGLContext setCurrentContext:_context];

glBindFramebuffer(GL_FRAMEBUFFER, _defaultFramebuffer);
glClear(GL_COLOR_BUFFER_BIT);

// Our OpenGL Drawing Occurs here 
```

…………

```
// hint to opengl to not bother with this buffer
const GLenum discards[]  = {GL_DEPTH_ATTACHMENT};
glBindFramebuffer(GL_FRAMEBUFFER, _defaultFramebuffer);
glDiscardFramebufferEXT(GL_FRAMEBUFFER, 1, discards);

// present render
[_context presentRenderbuffer:GL_RENDERBUFFER]; 
```

我们实际上并没有使用深度或模板缓冲区。

当我们将纹理渲染为瓦片时会发生这种情况，并且每次加载新瓦片时都会发生这种情况。它指向我们的 glDrawArrays 命令。

关于我们如何摆脱这个警告的任何建议？

如果它有帮助，这就是我们设置图层的方式：

```
eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithBool:NO], kEAGLDrawablePropertyRetainedBacking,
                                kEAGLColorFormatRGB565, kEAGLDrawablePropertyColorFormat,
                                nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T10:00:09.447

经过大量的工作和深思熟虑，我最终设法弄清楚了这一点。

好的，我正在使用一个名为 GLESuperman 的开源库。它是一个很棒的库，可以帮助调试这些问题，并且可以用于绘制图形 - 它非常快。是的，我不知道它为什么这么叫......但它是免费的，而且它有效。只需在 Github 上搜索即可。它会经常更新并支持 iOS 7 及更高版本。

好的，要实现它，请执行以下操作：

```
// Import the framework into your Xcode project.
#import <GLESuperman/GLESuperman.h>

// Also you will need to import Core Graphics.
#import <CoreGraphics/CoreGraphics.h>

// In order to run it in debug mode and get 
// a live detailed report about things like FPS, do the following.
GLESuperman *debugData = [[GLESuperman alloc] init];
[debugData runGraphicDebug withRepeat:YES inBackground:YES];

// In order to draw graphics, do the following.
GLESuperman *graphicView = [[GLESuperman alloc] init];
[graphicView drawView:CGRectMake(0, 0, 50, 50];

// You can do other things too like add images/etc..
// Just look at the library documentation, it has everything.

[graphicView setAlpha:1.0];
[graphicView showGraphic]; 
```

# python - 如何将 UNIX 查找输出作为 Python 脚本的参数传递？

> ID：12520975
> 
> 赞同：3
> 
> 时间：2012-09-20T21:11:15.217
> 
> 标签：python, unix, find, argparse

我有一个可以使用 UNIX 'find' 命令获取的文件列表，例如：

```
$ find . -name "*.txt"
foo/foo.txt
bar/bar.txt 
```

如何将此输出传递到 hello.py 之类的 Python 脚本中，以便使用 Python 的 argparse 库对其进行解析？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T21:17:13.090

使用`xargs`：

```
find . -name "*.txt" | xargs python -c 'import sys; print sys.argv[1:]' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T21:17:45.947

如果您只想要 的文本输出`find(1)`，请使用管道：

```
~$ find . -name "*.txt" | python hello.py 
```

如果您希望将文件列表作为参数传递给脚本，请使用`xargs(1)`：

```
~$ find . -name "*.txt" -print0 | xargs -0 python hello.py 
```

或`-exec`使用`find(1)`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T21:17:31.673

来自`man find`：

```
-exec command ;
      Execute  command;  true  if 0 status is returned.  All following
      arguments to find are taken to be arguments to the command until
      an  argument  consisting of `;' is encountered.  The string `{}'
      is replaced by the current file name being processed  everywhere
      it occurs in the arguments to the command, not just in arguments
      where it is alone, as in some versions of find.  Both  of  these
      constructions might need to be escaped (with a `\') or quoted to
      protect them from expansion by the shell.  See the EXAMPLES sec‐
      tion for examples of the use of the -exec option.  The specified
      command is run once for each matched file.  The command is  exe‐
      cuted  in  the starting directory.   There are unavoidable secu‐
      rity problems surrounding use of the -exec  action;  you  should
      use the -execdir option instead.

-exec command {} +
      This  variant  of the -exec action runs the specified command on
      the selected files, but the command line is built  by  appending
      each  selected file name at the end; the total number of invoca‐
      tions of the command will  be  much  less  than  the  number  of
      matched  files.   The command line is built in much the same way
      that xargs builds its command lines.  Only one instance of  `{}'
      is  allowed  within the command.  The command is executed in the
      starting directory. 
```

所以你可以做

```
 find . -name "*.txt" -exec python myscript.py {} + 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T22:01:10.870

如果您需要在 find 输出的参数列表之后传递参数，这会有所帮助：

`$ python hello.py `find . -name "*.txt"``

我用它将pdf文件连接到另一个文件中：

`$ pdfunite `find . -name "*.pdf" | sort` all.pdf`

# vim - 允许 vim 映射将命令转发到封闭应用程序（例如 tmux）

> ID：12520980
> 
> 赞同：0
> 
> 时间：2012-09-20T21:11:25.217
> 
> 标签：vim, tmux

我有一个映射（例如，ctrl-m），在某些情况下（例如，打开多个缓冲区），我希望 vim 遵循。在其他情况下，我希望 vim 忽略它。这可以相对容易地编码成一个函数。

下一个约束是，如果我决定忽略键命令，我希望封闭的应用程序处理它。例如， ctrl-m 将级联到封闭的 tmux 会话。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:13:26.677

一旦 Vim 接收并使用了击键，从 tmux 的角度来看，它们就消失了。您的 Vim 函数，当它意识到接收到的键应该在 tmux 中执行操作时，必须以某种方式将其传达回 tmux（但可能不是通过发出击键，而是通过以连接到现有实例的方式调用 tmux， like `vim --remove-send`; 我对 tmux 知之甚少，但有一些与 tmux 集成的 Vim 插件，可能会做类似的事情）。

一般来说，我会尽量避免跨应用程序的这种键重载，而是选择单独的键组合。

# linux - Linux 到 Windows 存储库的拉取和推送

> ID：12520982
> 
> 赞同：0
> 
> 时间：2012-09-20T21:11:45.167
> 
> 标签：linux, git, repository, git-push, git-pull

我们工作中的整个代码库都位于 IIS Windows 环境中。我的任务是将代码复制到我们新的 Linux Ubuntu 服务器上，并通过代码进行必要的更改，使其在 Linux 机器上运行。花了几个月的时间，但它有效。与此同时，另一位开发人员在生产 Windows 服务器上对代码库进行了代码更新。现在我的任务是将更改推送到 Linux 机器，这样我们就可以扣动扳机并在新环境中实时运行它。

问题：

当我执行 a 时，`git push origin master`我被抛出一个错误，指出我必须执行`pull`第一个。在发散并运行 a`git status`时，它说我分别有 11 和 3 次提交。问题是在 2 个月的过程中，我不记得所做的所有更改，并且可能会在 Windows 环境中崩溃，即使很短的时间也不会发生。我只是需要一些建议。

我想知道是否可以创建一个克隆`origin master`然后将更改从 prod 推送到我的本地，合并文件然后上传到 Linux 框，因为由于需要拉，我现在无法推送到 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:15:57.867

当您这样做`git pull`时，远程`origin`分支中的更改将合并到您的本地`origin`分支中。可以这么说，那是您的“本地原产地/主人克隆”。检查您自己的 master 分支的状态，如果一切正常，则推送您的更改。

在拉取之前和之后运行`gitk --all`，您会看到合并发生了，但仅在*您的*系统上。

# javascript - 用javascript替换两个字段中的特殊字符

> ID：12520993
> 
> 赞同：0
> 
> 时间：2012-09-20T21:12:38.723
> 
> 标签：javascript, jquery, bind, keyup

我有一个表单来添加一个带有新闻标题的字段，并且想使用这个字段添加到 url 的标题中。
我想在另一个字段中重写标题，如下所示：

[http://jsfiddle.net/atmoner/5sPZa/1/](http://jsfiddle.net/atmoner/5sPZa/1/)

但我会替换特殊字符（空格，询问，感叹号......）
即使它们应该用简单的方式写出来，我也不会打扰，但我不明白如何

示例：

```
new article,like this ! 
```

到：

```
new-article-like-this 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:17:21.793

你可以改变这个：

```
$("#label2").val(this.value); 
```

对此：

```
var value = this.value;
value = value.replace(/[^a-zA-Z0-9]+/g, '-');  // special char(s) -> hyphen
value = value.replace(/^-|-$/g, ''); // remove leading/trailing hyphen
$("#label2").val(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:16:40.110

试试下面的代码..这只是一个起点..根据需要进行自定义。

```
$("#label1").bind("keyup", changed).bind("change", changed);

function changed() {
    $("#label2").val(this.value
         .replace(/\s|,/g, '_')       /* replace with _ */
         .replace(/!/g, ''));         /* simply remove */
} 
```

**演示：http:** [//jsfiddle.net/5sPZa/3/](http://jsfiddle.net/5sPZa/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:19:48.583

根据你的jsfiddle，你应该`changed`这样写函数：

```
function changed() {
    var v = this.value.replace(/\W+/g, '-')
        .replace(/-+$/, '')
        .replace(/^-+/, '');

    $("#label2").val(v);
}
​ 
```

# php - PHP imagecopyresampled + 如何获得最佳结果

> ID：12520994
> 
> 赞同：0
> 
> 时间：2012-09-20T21:12:40.953
> 
> 标签：php, jquery, html, css

我有以下工作正常：

1.  用户上传图像并使用 imagecopyresampled 和 imagejpeg（保持比例）调整图像大小，使其适合裁剪 DIV。

2.  然后用户使用 JCrop 裁剪图像，然后使用 imagecopyresampled 和 imagejpeg 将调整大小的上述图像切割成 5 种所需的裁剪尺寸。

* * *

我发现的问题是从调整大小的图像中裁剪并没有利用通常更大、质量更好的原始图像。

所以我想显示一个适合 DIV 的图像，但从原始图像中裁剪以获得最佳质量。

当我只是将裁剪更改为原始图像时，裁剪是图像的错误部分，因为尺寸不同。我认为这很明显。不同大小的图像。

* * *

如何显示适合 Jcrop 的 DIV 的图像，然后实际裁剪掉通常较大的原始图像？

我正在测试的想法：

*   在 DIV 中显示原始图像（不是由 php 调整大小，而是由 CSS 调整大小）。我不确定这是否会有所作为。

*   尝试使用一些基于数学的方程来获得正确的作物。不确定我目前将如何执行此操作。

想法会很棒...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:41:39.400

如果您必须使用全尺寸图像服务器端，我个人会选择基于数学的解决方案。直接在浏览器中或通过 CSS 重新缩放不是理想的 IMO，并且在浏览器之间存在很大差异。如果您使用基于数学的选项，您可以计算较小图像裁剪的坐标并将其放大以获得原始图像的正确部分。

在旁注中，您可能会发现（取决于您允许上传的图像大小和图像类型）在 PHP 端复制和调整大小非常占用 CPU 和内存。例如，高分辨率的大约 1024 x 768 的 png 文件可能需要 60MB 到 80MB 的 RAM 来调整大小（由于 png 文件的压缩，每个图像重新采样），这与 PHP 图像处理模块（[ImageMagick](http://php.net/manual/en/book.imagick.php)等）你使用。没有完美的方法来处理从 PHP 服务器端上传的图像（除了在任务中投入大量内存和 CPU）。有一些很好的 jQuery 解决方案，但是可以在上传之前在客户端调整大小（例如[Plupload](http://www.plupload.com/)等），这意味着您将只能在服务器端使用缩小尺寸的图像。还有一些很好的 JQuery 客户端裁剪脚本。无论哪种方式，PHP 和 jQuery 的组合都是最好的 IMO。

# reporting-services - 在 SSRS 中将 #Error 或 NAN 替换为 -（连字符）

> ID：12520997
> 
> 赞同：1
> 
> 时间：2012-09-20T21:12:58.163
> 
> 标签：reporting-services, ssrs-2008

当我在文本框中输入一个值（比如“NAN”或“#Err”）时，我想用-（连字符）替换它。如何在 SSRS 报告中实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:17:13.247

您需要编写一个表达式来处理它。理想情况下，您的报告中应该有一些自定义代码功能（即 Code.SafeDivision()）

```
=iif(Fields!denominator.Value = 0, "-", Numerator / Denominator) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T01:55:18.770

要详细说明 cmotley 的答案，请将以下代码作为自定义代码添加到您的报告中（为此，请转到报告属性，然后编码，然后将其粘贴）：

```
Function SafeDivide(value1 As Decimal, value2 As Decimal) As Decimal

        If (value1 <> 0.0 And value2 <> 0.0) Then
            Return value1 / value2
        Else
            Return 0
        End If

End Function 
```

然后你可以在你的文本框中使用它来划分而不收到数字和/或错误，例如，添加以下作为表达式（根据需要更改文本框名称）：

```
=Code.SafeDivide(ReportItems!Textbox186.Value, ReportItems!Textbox184.Value) 
```

使用我们的函数划分两个文本框。

要显示破折号，您只需将文本框的格式更改为“数字”，然后勾选表示您想将“0”替换为“-”的框。

或者，如果由于某种原因“NaN”是从数据源显式通过（在 SharePoint 中引用加载的表时很少但并非不可能），您可以使用以下内容：

```
Function evalutator(value as String) as String

    Select Case value
        Case "NaN"
            Return "-"
        Case "NAN"
            Return "-"

    End Select

    Return value

End Function 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-21T09:20:41.083

关于什么：

```
=IIF(Fields!yourcolumnname.Value = 0, "-", Fields!yourcolumnname.Value*1) 
```

或者，如果您想要零，`NAN/#ERROR`那么您可以使用：

```
=IIF(Fields!yourcolumnname.Value = 0, Fields!yourcolumnname.Value*1, Fields!yourcolumnname.Value) 
```

# tcp - 如何在局域网中找到我的服务器？

> ID：12520998
> 
> 赞同：2
> 
> 时间：2012-09-20T21:13:00.863
> 
> 标签：tcp, network-programming, ip, lan

我在 C++ 和 Java 上有两个自己的应用程序：服务器和客户端。它既可以在一个局域网中，也可以通过指定的端口传输数据。我想让它成为可能，客户端可以找到服务器的 IP。但是怎么做？使用地址掩码枚举所有可能的 IP - 坏主意，这将花费大量时间。可能以某种方式存在，我可以在哪里从客户端向局域网发送广播并在服务器中接收它？或者另一种方式......我找不到有关此的信息，但我认为这是可能的，因为我在 android 上的 MyPhoneExplorer 中看到它，例如。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:39:07.257

为什么不使用UDP广播？客户端可以 UDP 广播“我在 xxxx”，服务器可以（在 UDP 中）回答客户端“我在 yyyy”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:47:02.253

也许您可以使用[广播地址](http://en.wikipedia.org/wiki/Broadcast_address)找到您的服务器。