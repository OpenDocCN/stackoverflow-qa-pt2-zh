# StackOverflow 问答 15763000-15763999

# entity-framework - EF 迁移问题

> ID：15763000
> 
> 赞同：2
> 
> 时间：2013-04-02T11:31:53.767
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我们在一个具有 3 个状态的项目中与 EF Migrations 合作：

*   开发：每个开发者都有自己的数据库
*   暂存：与生产相同的数据库
*   生产：与登台相同的数据库

我们在开发中没有问题：我们更改了 DbContext 并且 EF 迁移更改了我们的数据库。每个开发人员都有正确的代码和正确的数据库。

当我们将项目上传到暂存时，问题就来了。我们需要更新暂存数据库，因为

> 自创建数据库以来，支持“XXX”上下文的模型已更改

但是如果我们更新数据库（使用迁移），Production 会抛出相同的消息（因为 Production 和 Staging 具有相同的数据库）。

数据库更改很少，因此如果我们不使用 EF 迁移，那将没有问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:30:14.370

我知道这已经得到了回答 - 但只是为了“历史目的”和其他可能看到这个的人......

从迁移的角度来看，您所拥有的场景 - 支持两者`Production`并`Staging`支持同一个数据库 - 有点问题。

您可以取消迁移-删除迁移表（`__MigrationHistory`）-并同步事物（有关更多信息，请参见下面的帖子）-但是有两个指向相同 Db`one migration table`的代码库意味着-除非代码相同（迁移方面）它行不通。因此，唯一的解决方案是关闭迁移。

然而，隧道尽头似乎有一盏灯。

> 来自 EF（EF6 预发行版）的新版本具有[Code First Migrations History Table Customization](http://entityframework.codeplex.com/wikipage?title=Migrations%20History%20Table%20Customization)。

我还没有时间玩这个，但是......
这意味着 - 简单地说你可以自定义你的`Configuration`并覆盖`IHistoryContextFactory`. **这反过来又允许您重命名迁移表**。

对于更复杂的场景 - 就像你一样 - 这可能是一个解决方案

> 请注意，它尚未得到证实-但我认为他们正是出于这些原因将其放在那里。

“伪解决方案”看起来像这样......

*   建立两个工厂——用于暂存和生产——每个都创建不同的“迁移表”，
*   每个部署 - 都有自己的迁移（在代码中） - 以及数据库中的迁移历史，
*   您可以手动调整特定的“迁移表”，例如分期 - 如果需要 - 不影响另一个，
*   确保您的数据库“足够相似”，以便两个代码/迁移可以并行运行

这可能行得通，我想...

* * *

[如何同步数据库 / 代码 - 总结](https://stackoverflow.com/a/15397640/417747)
[如何同步数据库 / 代码 - 长版](https://stackoverflow.com/a/10255051/417747)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:36:30.750

在 Stagig 和生产中使用相同的数据库可能是您的设计问题。

但

> 数据库更改很小

已经不是同一个数据库了。**当然，即使经过微小**的更改，您也无法计算相同的哈希值=)

我认为这是它应该工作的方式。

我们还为每个开发人员本地测试数据库提供某种开发数据库 - 用于测试目的和生产力数据库。

而且这三个都是不同的实例。

# android - 使用 aSmack 为 XMPP 群聊创建 MUC 房间时出现 ClassCastException

> ID：15763001
> 
> 赞同：3
> 
> 时间：2013-04-02T11:32:02.163
> 
> 标签：android, xmpp, chatroom

我`aSmack`用于创建聊天应用程序。当我`groupchat`使用它创建时，`aSmack`它会出错。这是用于创建的代码`GroupChat`。

```
MultiUserChat muc = new MultiUserChat(connection, "xyz@abc.com");           

try {
    muc.create(u_name);              
    Form form = muc.getConfigurationForm();              
    Form submitForm = form.createAnswerForm();               
    for (Iterator<FormField> fields = form.getFields(); fields.hasNext();) {
        FormField field = (FormField) fields.next();
        if (!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable() != null) {                 
            submitForm.setDefaultAnswer(field.getVariable());
        }
    }
    List<String> owners = new ArrayList<String>();
    Log.i(TAG, "list of owners=====" +owners.toString());
    owners.add(PmUser_name);
    submitForm.setAnswer("muc#roomconfig_roomowners", owners);               
    muc.sendConfigurationForm(submitForm);
} catch (XMPPException e) {          
    e.printStackTrace();
} 
```

这是我用于 aSmack 的罐子`asmack-2010.05.07.jar`。它支持 facebook xmpp、Gtalk xmpp 和我自己的服务器 xmpp 聊天。现在我想为我自己的服务器创建群聊，但它给出了这个错误。

```
E/AndroidRuntime(31002): Caused by: java.lang.ClassCastException:   
org.jivesoftware.smack.packet.DefaultPacketExtension
E/AndroidRuntime(31002):    at  
org.jivesoftware.smackx.muc.MultiUserChat.getMUCUserExtension(MultiUserChat.java:2000)
E/AndroidRuntime(31002):    at    
org.jivesoftware.smackx.muc.MultiUserChat.create(MultiUserChat.java:364) 
```

我进行了很多搜索，但仍然不知道如何解决这个问题。

在我拔掉头发之前，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:28:47.893

Smack 的数据包提供商未注册。你得到一个`ClassCastException`因为 Smack 无法为 MUC 创建正确的 Packet 类实例。我建议您使用[较新版本的 aSmack](https://github.com/flowdalic/asmack)并按照[README](https://github.com/Flowdalic/asmack/blob/master/README.asmack)中的说明进行操作，它应该会为您初始化和注册 Providers。

# windows - 在 Azure 中设置 Windows 身份验证

> ID：15763003
> 
> 赞同：0
> 
> 时间：2013-04-02T11:32:04.877
> 
> 标签：windows, authentication, azure

我们的 azure 网站有一个管理文件夹。要登录管理部分，我们使用 Windows 身份验证。要在虚拟机中设置 windows 身份验证，我们应该在 applicationHost.config 文件中设置 overrideModeDefault="Allow" () 并创建 windows 用户。我的问题是如何在部署包（ServiceDefinition 文件）中指定这些操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:53:09.510

首先，你真的需要windows身份验证吗？我建议使用任何其他身份验证机制。

如果需要，那么您将必须在您的 azure web 角色中设置启动任务，并且在该启动任务中，您可以编写脚本来更新 applicationhost 文件并创建 windows 用户。

[此](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)链接将帮助您创建启动任务。对于更新 applicationhost 文件和创建 windows 用户，您可能可以使用 powershell。

# javascript - 使用 jQuery 包装 html 的某些部分

> ID：15763007
> 
> 赞同：5
> 
> 时间：2013-04-02T11:32:06.803
> 
> 标签：javascript, jquery

我有类似的东西：

```
<div class="the_notice">
    <span class="time"> | 3:48pm</span>
    To <strong>2013-03-16_10-56-33</strong> By <strong>XYX</strong>
</div> 
```

结果我想要类似的东西：

```
<div class="the_notice">
    <span class="time"> | 3:48pm</span>
    <div class="wrap">
      To <strong>2013-03-16_10-56-33</strong> By <strong>XYX</strong>
    </div>
</div> 
```

如何使用 jQuery 实现这一点？请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:51:06.903

好吧，如果内容始终相同，您可以执行以下操作

```
$('.the_notice').contents().slice(2).wrapAll('<div class="wrap"/>'); 
```

[http://jsfiddle.net/Ysq48/](http://jsfiddle.net/Ysq48/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:48:14.610

# [演示](http://jsfiddle.net/mohammadAdil/64DBd/3/)

```
 var temp = $('.time');
   $('.time').remove();
   $(".the_notice").contents().wrapAll('<div class="wrap" />');
   $(".the_notice").prepend(temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:58:40.470

阅读此链接它可能会对您有所帮助：[What is the Most effcient way to create html elements using jquery](https://stackoverflow.com/questions/327047/what-is-the-most-efficient-way-to-create-html-elements-using-jquery)

我的答案是这样的：

```
var myTimeIsHere = //calculate your time here;
var x = //calculate x here.;
var y = //calculate y here.;

var newHTML = "<span class='time'>" |+ myTimeIsHere+"</span>"+
              "<div class='wrap'>To <strong> "+x+" </strong>"+
              "by "+y+"</div>";
$(".the_notice").html(newHTML); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:03:08.457

一行（或为清楚起见为 3 行）：

```
$('.the_notice')
     .wrapInner($('<div class="wrap">'))
     .prepend($('.the_notice .time').detach()); 
```

[JSFIDDLE](http://jsfiddle.net/Pj4KA/)

# mysql - 选择除一列之外的所有列

> ID：15763018
> 
> 赞同：0
> 
> 时间：2013-04-02T11:32:46.833
> 
> 标签：mysql, stored-procedures, prepared-statement

我需要从表“ticket”中选择除一列“depname”之外的所有列 以下准备好的语句无法按预期工作。

```
PREPARE stmt1 FROM 'SELECT ? from magon.ticket limit 2';

select GROUP_CONCAT(COLUMN_NAME) into @clm from COLUMNS  where TABLE_SCHEMA = 'magon' and TABLE_NAME = 'ticket' and COLUMN_NAME NOT IN ('depname')  GROUP BY TABLE_SCHEMA, TABLE_NAME;

execute stmt1 using @clm; 
```

它返回列列表两次（由于限制 2），但不返回实际数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:34:40.870

不幸的是，您不能参数化列名和表名，因为它们是标识符。但是您可以连接字符串中的值，

```
SET @colName = (SELECT  GROUP_CONCAT(COLUMN_NAME) 
                FROM    COLUMNS  
                WHERE   TABLE_SCHEMA = 'magon' AND 
                        TABLE_NAME = 'ticket' AND 
                        COLUMN_NAME NOT IN ('depname')  
                GROUP   BY TABLE_SCHEMA, TABLE_NAME);
PREPARE stmt1 FROM CONCAT('SELECT ', @colName ,' FROM magon.ticket LIMIT 2');
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

*   [MySQL 准备语法](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

# android - 按钮点击检测

> ID：15763019
> 
> 赞同：0
> 
> 时间：2013-04-02T11:32:48.333
> 
> 标签：android

我正在研究这个计算出租车费用的 android 项目。它有一个按钮`calculate`和一个菜单选项`night-mode`。此`calculate`方法确定两点之间的距离，以及随之而来的出租车费用。

`night-mode`根据我们在这里的夜间出租车工作的不同费率计算出租车费用。的基本要求是只有当且仅当进入 onClick 事件/如果方法被执行时`night-mode`，它才能运行。`calculate`

在我的菜单选项中......我如何检查按钮是否真的被点击/或触发了 onClick 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:36:50.680

从您的计算方法中创建一个在 OnClick 之后更改的状态变量，并在单击夜间模式时检查您的变量是否具有特定值（均作为按钮版本）

例子：

```
 int integer=0;

    public void onClick(View v) {
            if (v == calculate){
                    if (integer == 0)
                            integer =1; //this makes your integer variable 1 if calculate is pressed the first time

                    else if (integer == 1)
                            integer=0;//this makes your integer variable 0 if calculate is pressed the second time(at the end of the drive)
    //do calculate things
    }
    else if (v == nightmode){
            if(integer == 1){
            //do nightmode things
            }
            else{}
    } 
```

# android - Listview 不显示来自 json 的所有项目

> ID：15763026
> 
> 赞同：1
> 
> 时间：2013-04-02T11:33:06.200
> 
> 标签：android, json, android-listview, android-asynctask, android-parser

我正在用 Json 中的项目填充延迟加载的列表视图，它只显示第一个项目，没有图像，不显示其余项目。我正在使用 AsyncTask 将我的项目加载到我的列表视图中。有人可以帮我解决这个问题。

这是我的 LatesAlbums 课程：

```
public class LatestAlbums extends FragmentActivity {

    // widgets
    private ListView list;
    private ImageView back, clear;
    private EditText find;

    private static String url = "jsonURL";

    // JSON Node names
    private static final String TAG_ALBUMS = "albums";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_SINGER = "singer";
    private static final String TAG_GENRE = "genre";
    private static final String TAG_MIX = "mix";
    private static final String TAG_THUMB = "thumb";
    private static final String TAG_SONGS = "songs";
    private static final String TAG_SONG_TITLE = "song";
    private static final String TAG_SONG_ARTIST = "artist";
    private static final String TAG_SONG_MP3 = "mp3";
    private static final String TAG_SONG_MP4 = "mp4";
    private static final String TAG_SONG_THUMB = "thumb";
    private ProgressDialog pdialog;

    // albums JSONArray
    private JSONArray albums;
    private JSONArray sngs;

    private ArrayList<Albums> albumsArray;
    private ArrayList<Songs> songsArray;
    private AlbumLazyAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.latest_albums);
        albumsArray = new ArrayList<Albums>();
        songsArray = new ArrayList<Songs>();

        try {
            loadJSON();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // initWidgets();
    }

    private void initWidgets() {
        list = (ListView) findViewById(R.id.listView1);
        back = (ImageView) findViewById(R.id.latest_back_img);
        clear = (ImageView) findViewById(R.id.latest_search_clear);
        clear.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                find.setText("");
                find.clearFocus();
                find.clearComposingText();
                clear.setVisibility(View.INVISIBLE);
            }
        });
        find = (EditText) findViewById(R.id.latest_search_et);
        back.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

        adapter = new AlbumLazyAdapter(this, albumsArray, this);

        // set list view adapter
        list.setAdapter(adapter);

        // setting find edit text searching method
        find.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                clear.setVisibility(View.VISIBLE);

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
                for (int i = 0; i < albumsArray.size(); i++) {
                    if (albumsArray.get(i).getTAG_NAME().toLowerCase()
                            .indexOf(find.getText().toString().toLowerCase()) != -1) {
                        Log.v("--", albumsArray.get(i).getTAG_NAME());
                    } else {
                        Log.v("--", "no results..");
                    }
                }

            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        initWidgets();
    }

    // load json from server via asyncTask
    public void loadJSON() throws JSONException {
        AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                initWidgets();
                pdialog = new ProgressDialog(LatestAlbums.this);
                pdialog.setMessage("Loading ....");
                pdialog.show();
            }

            @Override
            protected Void doInBackground(Void... params) {
                JSONParser jParser = new JSONParser();
                JSONObject json = jParser.getJSONFromUrl(url);
                JSONObject theJSON;
                try {

                    // Getting Array of albums
                    theJSON = json.getJSONObject("json");
                    albums = theJSON.getJSONArray(TAG_ALBUMS);
                    // looping through All albums
                    for (int i = 0; i < albums.length(); i++) {
                        JSONObject c = albums.getJSONObject(i);
                        String album_id = c.getString(TAG_ID);
                        String album_name = c.getString(TAG_NAME);
                        String album_singer = c.getString(TAG_SINGER);
                        String album_mix = c.getString(TAG_MIX);
                        String album_genre = c.getString(TAG_GENRE);
                        String album_thumb = c.getString(TAG_THUMB);
                        albumsArray.add(new Albums(album_id, album_name,
                                album_singer, album_genre, album_mix,
                                album_thumb, songsArray));
                        sngs = c.getJSONArray(TAG_SONGS);
                        // getting songs for the album
                        if (!sngs.isNull(0)) {
                            for (int j = 0; j < sngs.length(); j++) {
                                JSONObject songs = sngs.getJSONObject(j);
                                String song_artist = songs
                                        .getString("artist");
                                String song_mp3 = songs.getString(TAG_SONG_MP3);
                                String song_mp4 = songs.getString(TAG_SONG_MP4);
                                String song_thumb = songs
                                        .getString(TAG_SONG_THUMB);
                                String song_title = songs
                                        .getString(TAG_SONG_TITLE);
                                songsArray.add(new Songs(song_title,
                                        song_artist, song_mp3, song_mp4,
                                        song_thumb));
                            }
                        }

                        albumsArray.get(i).setSongs(songsArray);
                    }

                } catch (JSONException e) {
                    e.printStackTrace();
                }
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View v,
                            int position, long arg3) {
                        Intent i = new Intent(getBaseContext(),
                                AlbumDetails.class);
                        i.putExtra("songs", albumsArray.get(position)
                                .getSongs());
                        startActivity(i);
                    }
                });
                // setting the slider
                ViewPager pager = (ViewPager) findViewById(R.id.my_slider);
                FragmentManager fm = getSupportFragmentManager();
                MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(
                        fm, albumsArray);
                pager.setAdapter(pagerAdapter);
                pdialog.dismiss();
                adapter.notifyDataSetChanged();
            }
        };
        task.execute();
    }
} 
```

我的 Json 输出：

```
{

    "json":{

        "albums":[{"id":"1","name":"Best Sumer colections","singer":"Dj Tiresto","genre":"Trance","mix":"yes","thumb":"alb1.png","songs":
                                            [
                                             {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                                                                                                                                 ]
                  },
                  {"id":"2","name":"Best Sumer colections","singer":"Dj Tiresto","genre":"Trance","mix":"yes","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"3","name":"O viatza","singer":"Maria Bieshu","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"4","name":"De petrecere","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"5","name":"De petrecere","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"6","name":"De petrecere 2013","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  }

        ]

    }

} 
```

LogCat 输出：

```
04-02 13:35:12.109: W/System.err(12798): org.json.JSONException: Value at 6 is null.
04-02 13:35:12.119: W/System.err(12798):    at org.json.JSONArray.get(JSONArray.java:259)
04-02 13:35:12.119: W/System.err(12798):    at org.json.JSONArray.getJSONObject(JSONArray.java:480)
04-02 13:35:12.119: W/System.err(12798):    at com.outsourcefarm.musicagratis.activities.LatestAlbums$4.doInBackground(LatestAlbums.java:188)
04-02 13:35:12.119: W/System.err(12798):    at com.outsourcefarm.musicagratis.activities.LatestAlbums$4.doInBackground(LatestAlbums.java:1)
04-02 13:35:12.119: W/System.err(12798):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-02 13:35:12.119: W/System.err(12798):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-02 13:35:12.119: W/System.err(12798):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-02 13:35:12.129: W/System.err(12798):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-02 13:35:12.129: W/System.err(12798):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-02 13:35:12.129: W/System.err(12798):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-02 13:35:12.129: W/System.err(12798):    at java.lang.Thread.run(Thread.java:856) 
```

第 188 行是`JSONObject songs = sngs.getJSONObject(j);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:37:02.240

似乎一切都很好，对于那些会有类似问题但确保在 json 类中，或者更多解释看这个[问题的人](https://stackoverflow.com/questions/10267910/jsonexception-value-of-type-java-lang-string-cannot-be-converted-to-jsonobject)

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8); 
```

设置如下：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8); 
```

# css - 绝对位置影响宽度？

> ID：15763027
> 
> 赞同：22
> 
> 时间：2013-04-02T11:33:10.717
> 
> 标签：css, position, width, absolute

我是 CSS 新手。我想知道为什么当我将div元素的定位更改为绝对时，div元素的宽度会发生变化？在 Chrome v25.0.1364.172m 和 IE9 中试用，结果相同。

简单的例子：

```
<!doctype html/>
<html>
<head>
    <title>test</title>
    <style>
        div {
            position:relative;
            border-width: 1px;
            border-style: solid;
            border-color: black;
        }
    </style>
</head>
<body>
    <div>test</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-02T11:40:47.520

> 因为绝对定位的元素不像块级元素那样表现，也不会像正常的 a`<div>`那样在彼此之后流动。

您需要为绝对定位的 div 设置宽度和高度，具体取决于它包含的内容。

您的绝对定位元素将相对于它所在的第一个父元素定位。所以，一个简单的例子：

一个简单的“陷阱”没有将父元素设置为`position: relative;`

```
<!-- I'm a parent element -->
<div style="width: 500px; height: 500px; position: relative; border: 1px solid blue;">

    <!-- I'm a child of the above parent element -->
    <div style="width: 150px; height: 150px; position: absolute; left: 10px; top: 10px; border: 1px solid red;">
         I'm positioned absolutely to my parent. 
    </div>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T08:40:21.343

就像 SMacFadyen 所说，最可能的原因是`container`. 但是，如果`container`在相对位置且宽度较小且`inner`内容为绝对值，则当您使用左或右定位内部内容时，其内容可能会分成多行。在这种情况下，您需要将[`white-space`属性](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)更改为`nowrap`更适合您需求的其他选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T20:20:31.567

因为你给定绝对位置的元素从他的父元素中获取宽度并且没有表现得像块元素。

# c# - 来自gridview的ImageButton不适用于带有gridview的RowCommand的onClick事件

> ID：15763031
> 
> 赞同：-2
> 
> 时间：2013-04-02T11:33:19.833
> 
> 标签：c#, javascript, jquery

我在 GridView 中使用图像按钮，例如

```
<asp:ImageButton ToolTip="<%$ Resources:Captions,lbledit%>" ID="imgbtnPopup" runat="server" ImageUrl="<%$ Resources:Paths,imgbtnEdit%>"   CommandName="callPopup" CommandArgument='<%# Eval("WOID")  %>' CssClass="imgActions" OnClientClick="Popup.show('simplediv');return false;" /> 
```

在`OnClientClick`我写的事件中返回 false 它不是`RowCommand`GridView 的触发事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:45:49.217

删除返回false；那么它应该可以正常工作。

# c++ - QString 到常量字符 *

> ID：15763033
> 
> 赞同：1
> 
> 时间：2013-04-02T11:33:21.927
> 
> 标签：c++, constants, qstring

我正在尝试使用函数中的数据，该函数在使用 Const Char* 的 Const 函数中返回 QString。问题基本上如下：

```
int myObject::listChildProcesses([...]) const {
    // getProcessName called from : QString myObject::getProcessName() { [...] }
    const char* name = getProcessName().toLocal8Bit();
    [...]
} 
```

哪个返回：

```
passing 'const myObject' as 'this' argument of 'QString myObject::getProcessName()' discards qualifiers 
```

所以......我认为这里有一个常量问题。但是，我确实需要在 listChildProcess 中保持我的常量。你碰巧知道我如何通过保留它来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:38:58.393

似乎`myObject::getProcessName()`没有`const` 限定符，但需要一个常量对象。因此，您应该将其签名更改为`QString myObject::getProcessName() const`.

# css - 媒体查询不起作用

> ID：15763041
> 
> 赞同：0
> 
> 时间：2013-04-02T11:33:38.780
> 
> 标签：css, media-queries

我使用媒体查询的 CSS 无法正确检测设备...我的代码：

```
@media  screen and (min-width: 240px) and (max-width: 320px) {
    #test{
        width:50px;
        height:50px;
        background-color:blue;
    }
}
@media screen and (min-width: 640px) {
    #test{
        width:50px;
        height:50px;
        background-color:red;
    }
} 
```

我希望 div 在 HTC Wildfire 等小型手机上为蓝色，在 iPad Mini 等平板电脑上为红色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:07:11.203

从评论扩展：

小型设备上的浏览器倾向于稍微扩展网页。要获得媒体查询的“真实”维度，请添加

```
<meta name="viewport" content="initial-scale=1.0" /> 
```

到文档的开头。

要检查“渲染”维度，请使用以下内容：

```
<script type="text/javascript">
window.addEventListener("load",function(){
    var box=document.body.getBoundingClientRect();
    document.getElementById("whatever").value=box.width+" x "+box.height;
},false);
</script> 
```

这可能会或可能不会阻止浏览器本身的缩放设置，但至少会阻止“自动”缩放。

以我自己的经验，某些情况，例如`<p>`长句子，可能会导致浏览器缩小，使其更像是“句子”。通过指定`initial-scale=1.0`，Opera Mobile 仍会缩放到其设置（默认为 125%），但仅此而已，长句将自动换行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:37:32.607

尝试在查询中添加屏幕。

```
@media screen and (min-width: 240px) {
    #test{
        width:50px;
        height:50px;
        background-color:blue;
    }
}
@media screen and (min-width: 640px) {
    #test{
        width:50px;
        height:50px;
        background-color:red;
    }
} 
```

# javascript - 节点和 crontab 无法正常工作

> ID：15763043
> 
> 赞同：5
> 
> 时间：2013-04-02T11:33:41.113
> 
> 标签：javascript, node.js, cron, crontab

我正在尝试使用 crontab 运行节点脚本，但它没有按预期工作（Ubuntu 12.04）。在我的 crontab 文件中，我得到了

`*/1 * * * * node /home/me/path/to/script.js > /home/me/path/to/output`

这会产生**空字符串输出**，而它不应该。

但是，当我`node /home/me/path/to/script.js > /home/me/path/to/output`手动运行时，一切正常。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:58:30.780

更改`node`为来自`which node`. 也就是放二进制执行过程的全路径。

```
*/1 * * * * /path/to/node /home/me/path/to/script.js > /home/me/path/to/output
#           ^^^^^^^^^^^^^ 
```

该值通常类似于`/usr/bin/node`.

# bash - 为什么我不能将目录作为参数传递给 bash 中的 for 循环？

> ID：15763044
> 
> 赞同：11
> 
> 时间：2013-04-02T11:33:41.243
> 
> 标签：bash, directory

我有一个简单的 bash 脚本 simple.sh，如下：

```
#/usr/local/bin/bash
for i in $1
   do
       echo The current file is $i
   done 
```

当我使用以下参数运行它时：

```
./simple.sh /home/test/* 
```

它只会打印并列出目录中的第一个文件。

但是，如果我将 simple.sh 更改为：

```
#/usr/local/bin/bash
DIR=/home/test/*
for i in $DIR
   do
       echo The current file is $i
   done 
```

它会正确打印出目录中的文件。有人可以帮助解释为什么传递的参数没有显示相同的结果吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T11:37:36.217

如果你取“$1”，它是第一个文件/目录，这是可能的！你应该这样做：

```
for i in "$@"
do
  echo The current file is ${i}
done 
```

如果你执行它：

```
./simple.sh * 
```

他们列出了实际字典的所有文件

"$1" 是当前目录的第一个文件/目录的字母顺序，在 for 循环中，"i" 的值将是例如 a1.sh，然后它们将退出 for 循环！如果你这样做：

```
DIR=/home/<s.th.>/* 
```

您将所有文件/目录的值保存在 DIR 中！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:50:56.697

这是可移植的，没有无用的 ls 分支，并且以最少的 CPU 周期浪费运行：

```
#!/bin/sh
cd $1
for i in *; do
   echo The current file is "$i"
done 
```

运行方式`./simple.sh /home/test`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:39:03.687

您的脚本没有收到“/home/test/*”作为参数；shell 将模式扩展为匹配的文件列表，并且您的 shell 接收多个参数，每个匹配文件一个。引用论点将起作用：

```
./simple.sh "/home/test/*" 
```

您对 using 的更改`DIR=/home/test/*`符合您的预期，因为文件名生成不是在变量赋值的 RHS 上执行的。当您`$DIR`在循环中不加引号时`for`，模式被扩展为匹配文件的列表。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-02T11:39:23.310

如何手动列出文件而不是使用 *：

```
 #/usr/local/bin/bash
  for i in $(ls $1)
  do
      echo The current file is $i
  done 
```

并输入

```
 ./simple.sh /home/test/ 
```

# haskell - Haskell 测量函数性能

> ID：15763050
> 
> 赞同：11
> 
> 时间：2013-04-02T11:33:57.380
> 
> 标签：haskell, profiling, benchmarking

在 Haskell 中，我如何“简单地”衡量函数的性能。例如，运行需要多长时间，或者需要多少内存？我知道分析，但是，是否有一种更简单的方法不需要我过多地更改我的代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T13:13:09.213

测量运行需要多长时间和需要多少内存是两个独立的问题，即：基准测试和分析。Haskell 为这两者提供了一套定义明确的工具。解决这两个问题都不需要您对实际应用程序的代码进行任何更改。

## 基准测试

这是使用库完成的。Niklas 在评论中提出了该领域的最终赢家，即[**Criterion**](http://hackage.haskell.org/package/criterion)。该库设计得非常好，使用起来不难，并且产生了[非常详细的数据](http://bos.github.com/criterion/)。

工作流程如下：您创建一个包含基准设置的单独模块，编译它并使用选项运行它。要获得可用选项的参考，请使用`--help`修饰符运行它。

[您可以在此处](https://github.com/bos/criterion/tree/master/examples)找到设置模块的示例。

## 剖析

已经有足够多的好材料了，所以我将参考它们：

*   [概要分析的一般参考](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/profiling.html)
*   [真实世界的 Haskell 教程](http://book.realworldhaskell.org/read/profiling-and-optimization.html)
*   [使用 Cabal 进行分析的教程](http://www.haskell.org/haskellwiki/How_to_profile_a_Haskell_program)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T14:26:15.410

有关各个函数之间的性能比较的极其粗略的信息，您可以使用 ghci

```
Prelude> :set +s
Prelude> last [1..100000000]
100000000
(1.65 secs, 4000685276 bytes) 
```

您需要注意 ghci 不编译代码，因此运行速度比 ghc 慢*得多*，时间和内存使用数据是近似的，并且绝对没有执行任何优化。

这意味着它只能让您大致了解代码的效率（效率低下），并且不能替代对编译和优化的代码进行适当的基准测试和分析，如[Nikita Volkov 的回答](https://stackoverflow.com/a/15765060/1598537)中所述。

# ext4 - xtype treecolumn 不会选择树的第一个节点

> ID：15763051
> 
> 赞同：0
> 
> 时间：2013-04-02T11:33:59.263
> 
> 标签：ext4

我通过将 xtype 指定为 treecolumn 创建了一个树面板。我想选择树的第一片叶子。在这个例子中，我注册了 boxready 事件，详情如下：

```
boxready : function( treePanel, width, height, eOpts ){

    treePanel.getSelectionModel().select( 0 );
    //treePanel.select( treePanel.getRootNode().getChildAt(0) );
    treePanel.getSelectionModel().selected = 0;
},
treePanel.getSelectionModel() 
```

这个例子给了我 SINGLE 类型的 selectionmodel。谁能解释为什么我的例子没有选择第一片叶子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:22.153

这是一个小“图”：

如果您从一开始就需要叶子：

*   选择了一个节点：

    var nodeData = treePanel.getSelectionModel().getSelection();

*   从一开始：

    var node = treePanel.getRootNode(); -- 父亲（第一个节点）；

    **findLeaf：函数（节点）** {

    ```
    if(node.isLeaf()){
    // this is the node that u want
    }else{
        // bucle to find it
        node.eachChild(function(nodeChild,array){
            if(nodeChild.isLeaf()){
               // this is the node that u want
            }else{
               // get childs of this node
               if(nodeChild.hasChildNodes()){
                    //find the childs from this node.
                    this.findLeaf(nodeChild);
               }
            }
        });
    } 
    ```

    };

# android - 从广播接收器接收到意图后未反映更改

> ID：15763052
> 
> 赞同：0
> 
> 时间：2013-04-02T11:34:01.920
> 
> 标签：android, android-fragments, broadcastreceiver

我正在做`adapter.notifyDataSetChanged()`，`listView.invalidateViews()`如果条件说“blabla”为真，我接到接听电话后。但是我的用户界面仍然没有更新。

```
public class UserFragment extends Fragment{

public class FragmentReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(getSetting("CurrentView","").equalsIgnoreCase("blabla")){
                adapter.notifyDataSetChanged();
                listView.invalidateViews(); //this is not updating the UI.

}
} 
```

**注意：**我尝试`UserFragment.java`通过再次替换相同的片段来调用相同的方法来更新更改，但这虽然更新了 UI，但给出了例外 -`IllegalStateException: Can not perform this action after onSaveInstanceState`

我在方法中的其余代码`onReceive`-

```
UserFragment firstFragment = new UserFragment ();
getSupportFragmentManager().beginTransaction()
                    .replace(R.id.headlines_fragment, firstFragment)
                    .addToBackStack(null).commit(); //IllegalStateException: Can not perform this action after onSaveInstanceState 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:46:06.657

尝试这个

```
public class UserFragment extends Fragment{
public class FragmentReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(getSetting("CurrentView","").equalsIgnoreCase("blabla")){
                adapter.notifyDataSetChanged();
                listView.invalidateViews(); //this is not updating the UI.
                UserFragment.this.onCreate(savedInstanceState);

}
} 
```

# javascript - 页面访问/重新加载之间是否保留了 JavaScript 执行上下文？

> ID：15763054
> 
> 赞同：1
> 
> 时间：2013-04-02T11:34:04.057
> 
> 标签：javascript, execution

页面访问/重新加载之间是否保留了 JavaScript 执行上下文？

我加载数据并想缓存它，但用户可能会关注链接或提交表单。所以我在加载新页面后丢失了任何 JS 对象？

# javascript - 使用 fabric.js 在画布中保存 JSON

> ID：15763057
> 
> 赞同：1
> 
> 时间：2013-04-02T11:34:12.247
> 
> 标签：javascript, json, html, canvas, fabricjs

我正在尝试导入多个 svg 文件并在修改后将 json 保存到数据库。我试过用

```
 canvas.item(0).sourcePath = '/URL/FILE.svg';
    JSON.stringify(canvas.toDatalessJSON()); 
```

但这不适用于多个文件，它仅适用于第一个文件。我正在尝试指定每个文件的 url，但无法理解如何做到这一点。请问有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T20:21:55.247

canvas.item(0) - 获取第一个对象。canvas.item(1) - 获取第二个对象，依此类推....

如果您不知道对象的总量，可以使用 canvas.forEachObject 选项。

```
 canvas.forEachObject(function(obj){
        obj.sourcePath = '/URL/FILE.svg';
        console.log(obj.sourcePath)
     });

     JSON.stringify(canvas.toDatalessJSON()); 
```

当你像这样加载 svg 时，你也可以设置 obj.sourcePath 。

```
 fabric.loadSVGFromString(svg, function(objects, options) {
      var obj = fabric.util.groupSVGElements(objects, options);
      obj.sourcePath = '/URL/FILE.svg';
      canvas.add(obj);
      canvas.renderAll();
    }); 
```

希望有帮助！

# git - GitHub：什么是“wip”分支？

> ID：15763059
> 
> 赞同：113
> 
> 时间：2013-04-02T11:34:18.217
> 
> 标签：git, github, branch, git-branch

当我浏览 GitHub 存储库时，我经常看到“wip”分支（例如`3.1.0-wip`）。“擦”是什么意思？

我在任何地方都找不到答案——无论是在谷歌还是在 GitHub:help 上。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-04-02T11:35:14.560

按照惯例，“wip”代表“进行中的工作”。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2016-09-28T08:23:03.483

在 GitHub 上，拉取请求的前缀`[WIP]`为 表示拉取请求者

1.  还没有完成他的代码工作（因此，**工作****在****进步**），但是
*****   寻找有一些初始反馈（[早期拉动策略](https://github.blog/2012-05-02-how-we-use-pull-requests-to-build-github/)），并且*   想使用项目的持续集成基础设施。例如，[GitHub Actions](https://github.com/features/actions)、[TravisCI](https://github.com/travis-ci/travis-ci)、[CodeCov](https://github.com/integrations/codecov)和[codacy](https://github.com/integrations/codacy)。****

 ****WIP 拉取请求的更多动机由[@ben straub](https://stackoverflow.com/users/1319/ben-straub)在[https://ben.straub.cc/2015/04/02/wip-pull-request/](https://ben.straub.cc/2015/04/02/wip-pull-request/)编写。

**自 2019 年 2 月以来的**新功能，GitHub 提供***草稿拉取请求*，这使得 WIP 更加明确：[https ://github.blog/2019-02-14-introducing-draft-pull-requests/](https://github.blog/2019-02-14-introducing-draft-pull-requests/)**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-27T13:31:14.643

从字面上看，这意味着**前面****的**答案正确指出的工作**进度**（WIP **） 。**但是，它**不仅仅**发生在 GitHub 上，还可以发生在任何其他竞争平台上，例如 Bitbucket、GitLab 等。

 ******本地机器上的 Git（VCS，不是 GitHub、GitLab 等 - 不一样）也可能是这种情况。在您希望将进度保存在当前分支并移至另一个分支的情况下，这可能会有所帮助，以免丢失未提交的更改。您想以这种方式使用 use `git stash`。然后你会看到它`WIP...`是 Git Bash/GUI 中的一个分支。

如果您要提交此分支，那么您当然也可以在 Bitbucket/GitHub/GitLab 上的项目中看到它。因此，它不仅适用于推送请求 (PR)，而且也可能被意外/故意推送。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-04-27T10:11:59.287

当客户说时我很困惑**`checkout wip`**

```
wip = work in progress 
```

这意味着有一个名为的分支`wip`

所以，你需要`checkout`通过命中命令到那个分支

```
git checkout wip 
```************

# .htaccess - htaccess 在文件夹末尾添加 index.htm

> ID：15763063
> 
> 赞同：1
> 
> 时间：2013-04-02T11:34:30.283
> 
> 标签：.htaccess

我需要一种在 url 末尾添加 index.htm 的方法。
例如：
www.example.com/folder1/folder2 AND
www.example.com/folder1/folder2/
必须在内部重定向到 www.example.com/folder1/folder2/index.htm（这必须适用于任意数量的文件夹/subfolders）
到目前为止，我的 htaccess（在根目录下）看起来像：

> ```
> Options +FollowSymLinks
> RewriteEngine on
> RewriteOptions inherit
> RewriteBase /
> 
> #
> # some 301 REDIRECTS here
> #
> 
> # rewrite non-www into www
> # after all redirection rule AND before any rewrite rule
> RewriteCond %{HTTP_HOST} !^www\.
> RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
> 
> #
> # rewrite rules below here
> # 
> ```

有任何解决这个问题的方法吗？
谢谢你。

**编辑：**
- 所有网址都来自重写规则 - 站点中没有实际的文件夹。
- 在我的浏览器中键入 www.example.com/folder1/folder2，只得到一个 404 页面未找到。我需要它重定向到 www.example.com/folder1/folder2/index.htm （有一个规则创建这个 url）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:41:29.573

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.htm$ [NC]
RewriteRule ^(.*?)/?$ /$1/index.htm [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:03:55.330

你的意思是你想 REDIRECT `/folder1`and `/folder1/`into `/folder1/index.htm`, and `/folder1/folder2`and `/folder1/folder2/`to `/folder1/folder2/index.htm`, and `/folder1/folder2/folder3`and `/folder1/folder2/folder3/`to`/folder1/folder2/folder3/index.htm`

```
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /%1/index.htm [R]

RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /%1/%2/index.htm [R]

RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /%1/%2/%3/index.htm [R] 
```

# c# - 从 TableAdapter 中删除行？

> ID：15763070
> 
> 赞同：2
> 
> 时间：2013-04-02T11:34:52.277
> 
> 标签：c#, .net, ado.net

我必须从连接到数据库 SQL 的 datagridview 中删除一行，但我不知道如何调用`Button_click(Delete)`.(ex. `this.nameTableAdapter.DeleteQuery()`) 中的方法。 ![在此处输入图像描述](https://i.stack.imgur.com/mChji.png)

错误显示：_ID，_KlID 现在确实存在？？而 Sql 查询是：

从 Artikulli 中删除 (ID = @_ID) AND (KlID = @_KlID) OR (ID = @_ID) AND (KlID = @_KlID)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:37:04.563

在您的`DataSet`右键单击`TableAdapter`then`AddQuery`并定义您的删除查询。然后你可以通过你的表适配器调用删除方法。

![在此处输入图像描述](https://i.stack.imgur.com/NQlRe.jpg)

然后

![在此处输入图像描述](https://i.stack.imgur.com/6MJBT.jpg)

现在编写您的查询，（**如果它很复杂，请使用查询生成器**）。

**注意：**您的参数名称以 . 为前缀`@`。这里我有一个名为的参数`@Id`

![在此处输入图像描述](https://i.stack.imgur.com/0LoQa.jpg)

# svn - 查找 SVN 版本之间的不同行数

> ID：15763073
> 
> 赞同：0
> 
> 时间：2013-04-02T11:34:55.703
> 
> 标签：svn, tortoisesvn

如何找到两个 SVN 提交之间不同的行数？

喜欢修改，评论添加等。

有没有直接的命令可以做到这一点？

例如，版本 1 有 500 行，版本 2 有 650 行。然后输出将是：`Difference: 150`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:06:08.710

diffstat 做你想做的事：

```
svn diff -r[oldrev]:[newrev] | diffstat 
```

例子：

```
 $ svn diff | diffstat
 some_file.py |   17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-) 
```

# .net - PrintForm 适合一页（横向）

> ID：15763074
> 
> 赞同：2
> 
> 时间：2013-04-02T11:34:59.887
> 
> 标签：.net, vb.net, winforms, visual-studio-2010

我有一个表单，它使用放置在按钮上的 PrintForm 方法。

以下是确保表单是横向打印的代码，但它会从左侧切掉一大块。

```
Me.PrintForm1.PrinterSettings.DefaultPageSettings.Landscape = True
PrintForm1.Print() 
```

我想知道是否有一种简单的方法可以适应一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:36:34.557

检查这个[msdn 链接](http://support.microsoft.com/default.aspx?scid=kb;en-us;230502)

[在](http://www.vbdotnetforums.com/reporting-printing/17607-scaling-form-fit-page.html)这里

另外，我更建议使用打印预览，因为它可以调整边距。这是有关打印预览的[链接。](http://www.vb-helper.com/howto_net_print_and_preview.html)但是在这些链接之间，我最建议使用此代码..

## 打印比屏幕大的表格

1.  在 Visual Basic 中启动一个新的标准 EXE 项目。默认情况下创建 Form1。

2.  将两个图片框添加到 Form1。

    避免在第一个 PictureBox 内绘制第二个 PictureBox，因为这样做会使第二个 PictureBox 成为第一个的成员。而是将第二个 PictureBox 的原点放在第一个 PictureBox 的原点的左侧。

3.  右键单击**Picture2**并选择**Send to Back**。

4.  向 Picture1 添加两个标签，将 Picture2 留空。

5.  将以下代码添加到 Form1 的 General Declarations 部分：

    ```
    Private Const twipFactor = 1440
    Private Const WM_PAINT = &HF
    Private Const WM_PRINT = &H317
    Private Const PRF_CLIENT = &H4&    ' Draw the window's client area.
    Private Const PRF_CHILDREN = &H10& ' Draw all visible child windows.
    Private Const PRF_OWNED = &H20&    ' Draw all owned windows.

    Private Declare Function SendMessage Lib "user32" Alias _
       "SendMessageA" (ByVal hwnd As Long, ByVal wMsg As Long, _
       ByVal wParam As Long, ByVal lParam As Long) As Long

    Private Sub Form_Load()
       Dim sWide As Single, sTall As Single
       Dim rv As Long

       Me.ScaleMode = vbTwips   ' default
       sWide = 8.5
       stall = 11   ' or 14, etc.
       Me.Width = twipFactor * sWide
       Me.Height = twipFactor * stall
       With Picture1
          .Top = 0
          .Left = 0
          .Width = twipFactor * sWide
          .Height = twipFactor * stall
       End With
       With Picture2
          .Top = 0
          .Left = 0
          .Width = twipFactor * sWide
          .Height = twipFactor * stall
       End With
       With Label1
          .Caption = "Top"
          .Left = Me.Width / 2
          .Top = 0
       End With
       With Label2
          .Caption = "Bottom"
          .Top = (twipFactor * stall) - .Height * 2
          .Left = Me.Width / 2
       End With
       Me.Visible = True
       DoEvents

       Picture1.SetFocus
       Picture2.AutoRedraw = True
       rv = SendMessage(Picture1.hwnd, WM_PAINT, Picture2.hDC, 0)
       rv = SendMessage(Picture1.hwnd, WM_PRINT, Picture2.hDC, _
       PRF_CHILDREN + PRF_CLIENT + PRF_OWNED)
       Picture2.Picture = Picture2.Image
       Picture2.AutoRedraw = False

       Printer.Print ""
       Printer.PaintPicture Picture2.Picture, 0, 0
       Printer.EndDoc
    End Sub 
    ```

6.  运行项目。

7.  无论表单是否完全显示，顶部和底部标签都应出现在各自**的**位置**。**

这段代码可以让我们调整表单快照的宽度和高度，所以稍后我们想打印它，它会按照我们设置的方式自行设置。

# android - 安卓应用的模糊算法

> ID：15763076
> 
> 赞同：1
> 
> 时间：2013-04-02T11:35:03.607
> 
> 标签：android

我正在为安卓应用寻找模糊算法。我在这里找到的[用于 Android SDK 的快速位图模糊](https://stackoverflow.com/questions/2067955/fast-bitmap-blur-for-android-sdk)算法在 AsyncTask 中不起作用。我长时间（一到两小时）从传感器接收数据。根据数据，图像必须或多或少地模糊。我发现的所有纯 Java 代码都不够快，因此我想通过 jni 访问本机 C 代码。有没有人可以给个提示？

谢谢安科

# sencha-touch - Sencha Touch 2 - 加速度计值

> ID：15763077
> 
> 赞同：0
> 
> 时间：2013-04-02T11:35:09.773
> 
> 标签：sencha-touch, accelerometer

是否可以使用 Sencha Touch 2 在手机设备的加速度计中获取值？谷歌了一下，找到了一个有人做过的项目，AccelerometerTabs。我猜这与我正在搜索的内容相似，但我只想获取 x、y 和 z 值。经过一番研究，我没有找到任何说它确实有效的材料，所以现在我问你更有经验的 Sencha Touch 用户 - 这可能吗？我该怎么做？

提前致谢！

# php - 回显后JavaScript引号更改

> ID：15763081
> 
> 赞同：0
> 
> 时间：2013-04-02T11:35:15.753
> 
> 标签：php, javascript, html

```
$t="<table>
      <tr>
        <td >
           <a  href='#' onClick='alert('some text!');'  >
        </td>

      </tr>
      <table>";

echo $t; 
```

任何内联 javascript 都不起作用，所以我检查了浏览器中的 a 元素，结果如下：

```
<a  href="#" onClick="alert("some text');'> 
```

我用引号做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:38:21.007

采用：

```
$t=<<<EOT
<table>
      <tr>
        <td >
           <a  href='#' onClick='alert("some text!");'  >
        </td>

      </tr>
<table>
EOT; 
```

或者

```
$t="
<table>
      <tr>
        <td >
           <a  href='#' onClick='alert(\"some text!\");'  >
        </td>

      </tr>
<table>
"; 
```

回声$t;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:43:22.413

```
<?php 
$t="<table>
      <tr>
        <td >
           <a  href='#' onClick=\"alert('some text!');\"  >test</a>
        </td>

      </tr>
      <table>";

echo $t;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:38:27.543

你得到了错误的报价。试试这个：

```
<a href='#' onclick=\"alert('some text!');\"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:38:42.663

```
<a  href='#' onClick=\"alert('some text!');\"> 
```

使用此代码可以正常工作。

# security - Bcrypt 用于密码散列，因为它很慢？

> ID：15763086
> 
> 赞同：11
> 
> 时间：2013-04-02T11:35:29.300
> 
> 标签：security, hash

我今天在[not-implemented.com](http://www.not-implemented.com/comparing-hash-algorithms-md5-sha1-sha2/)上阅读：

> 在大多数需要高速散列函数的情况下，应选择 Sha-256。它被认为是安全的，没有已知的理论漏洞，并且它具有 32 字节的合理摘要大小。不过，对于像散列用户密码这样的事情，设计慢的函数是首选：一个很棒的函数是 bcrypt。

有人可以解释最后一句话：

> 不过，对于像散列用户密码这样的事情，设计慢的函数是首选：一个很棒的函数是 bcrypt。

我不是说这不正确，我的问题很简单：

为什么散列用户密码首选使用慢速函数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T11:43:56.580

在您这边，密码哈希很少需要计算。但是，试图从被盗散列中暴力破解密码的攻击者依赖于计算尽可能多的散列。

因此，如果您的登录现在需要 100 毫秒而不是 0.1 毫秒（可能更少），那对您来说并不是问题。但是，如果攻击者需要 2000 天而不是 2 天来破解密码，这对攻击者来说意义重大。

bcrypt 的设计速度很慢，不允许任何捷径。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-02T11:44:25.940

[因为如果哈希值需要更多时间，那么暴力破解](http://en.wikipedia.org/wiki/Brute-force_attack)密码也需要更长的时间。

请记住，慢意味着它需要更多的计算能力。当潜在的黑客试图暴力破解密码时也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:44:51.493

暴力破解密码需要更多的努力。算法越慢，每秒的猜测就越少。系统用户不会注意到额外的时间，但会使密码更难破解。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-20T15:08:48.843

暴力破解哈希密码？说起来容易做起来难。

如果密码没有使用 SALT，那么无论采用何种加密方式，都可以破解它（因为我们可以使用字典/预先计算的哈希攻击）。

**算法的速度没有任何意义**，这只是一些人出于错误原因传播的神话。

例如下一个例子：

我们的哈希是用下一个公式生成的：

```
 MD5(SALT+MD5(SALT+VALUE)) 
```

即使我们可以在一秒钟内生成所有可能的 md5 组合，**我们如何知道我们是否找到了正确的值？**. 答案是否定的，这是不可能的。MD5（或sha）不检查值是否正确，它只是生成一个值序列，仅此而已。

**当且仅当我们有办法确定我们生成的哈希值是否符合某些标准时，我们才能尝试强制暴力攻击**。这些标准可以是一个字典，它也意味着一个缓慢的过程，只有当我们能找到一些标准时。

# c++ - QObject 真的有多重？

> ID：15763088
> 
> 赞同：16
> 
> 时间：2013-04-02T11:35:34.187
> 
> 标签：c++, qt, size, sizeof, qobject

我最近发布了一个关于 QObject 在典型使用场景中的开销的问题，但不幸的是，这个问题作为另一个在技术上没有回答该问题的问题的副本而被关闭。

更糟糕的是，匆忙匆忙结束我的问题的“撒玛利亚人”打断了我在运行几个测试后刚刚完成输入的答案。由于我不能再在我的原始问题中发布我的发现，我将其发布在这里，以便其他可能需要该信息的人可以使用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T11:36:05.720

很多人暗示 QObject 很重，但不清楚它到底有多重。所以我做了一些测量，不是很准确，所有值都是近似值。

*   未使用的 QObject ~160 字节
*   无参数的单个自动连接 ~235 字节
*   2 个不带参数的自动连接 ~315 字节
*   3 个自动连接，1 个带 3 个参数 ~400 字节
*   2 个自动连接，1 个排队，有 3 个参数 ~432 字节

这些数字应该考虑到我使用的是 64 位 Qt 构建。

所以，总而言之，QObject 的开销确实相当大。没有什么可以打喷嚏或过度使用的。

# windows - 如何使用windbg分析Chrome Aw Snap后的异常

> ID：15763089
> 
> 赞同：2
> 
> 时间：2013-04-02T11:35:41.073
> 
> 标签：windows, debugging, google-chrome, windbg, crash-dumps

我的网络应用程序中一直有“Aw Snap”。使用 windbg 并借助[How do I debug a tab crash in Google Chrome](https://stackoverflow.com/questions/10896281/how-do-i-debug-a-tab-crash-in-google-chrome)我试图找出问题所在。

到目前为止我已经完成的步骤：

1.  从崩溃目录得到一个 .dmp 文件
2.  加载到windbg
3.  设法查看堆栈（使用“k”）
4.  尝试 !analyze 时没有显示任何有意义的内容

我需要什么才能看到导致崩溃的模块如何从这里取得进展？

编辑：有一个错字。**"!analyze -v"**所做的工作类似于：kb、dd、.exr、.cxr、kv 对于所有 Chrome AwSnappers - !analyze -v 就是您要寻找的

以下资料...

```
0:000> !analyze

*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

GetPageUrlData failed, server returned HTTP status 404
URL requested: http://watson.microsoft.com/StageOne/chrome_exe/27_0_1446_3/5148bbf0/unknown/0_0_0_0/bbbbbbb4/c0000005/24430fba.htm?Retriage=1
Probably caused by : chrome.dll ( chrome!v8::internal::Invoke+14a )

Followup: MachineOwner
---------

0:000> analyze -v
*** WARNING: Unable to verify timestamp for pdf.dll
*** ERROR: Module load completed but symbols could not be loaded for pdf.dll
*** WARNING: Unable to verify timestamp for icudt.dll
*** ERROR: Module load completed but symbols could not be loaded for icudt.dll
*** WARNING: Unable to verify timestamp for ppGoogleNaClPluginChrome.dll 
```

堆栈显示了这一点：

```
0:000> k
ChildEBP RetAddr  
0039e438 76ea15e9 ntdll!ZwWaitForMultipleObjects+0x15
0039e4d4 75dc1a2c KERNELBASE!WaitForMultipleObjectsEx+0x100
0039e51c 75dc4220 kernel32!WaitForMultipleObjectsExImplementation+0xe0
0039e538 012d0572 kernel32!WaitForMultipleObjects+0x18
0039e55c 012d0688 chrome!google_breakpad::CrashGenerationClient::SignalCrashEventAndWait+0x45 [c:\b\build\slave\win\build\src\breakpad\src\client\windows\crash_generation\crash_generation_client.cc @ 369]
0039e56c 012cfb89 chrome!google_breakpad::CrashGenerationClient::RequestDump+0x4f [c:\b\build\slave\win\build\src\breakpad\src\client\windows\crash_generation\crash_generation_client.cc @ 333]
0039e588 012cff6a chrome!google_breakpad::ExceptionHandler::WriteMinidumpWithException+0x30 [c:\b\build\slave\win\build\src\breakpad\src\client\windows\handler\exception_handler.cc @ 817]
0039e5ac 75e0003f chrome!google_breakpad::ExceptionHandler::HandleException+0x46 [c:\b\build\slave\win\build\src\breakpad\src\client\windows\handler\exception_handler.cc @ 476]
0039e634 779774df kernel32!UnhandledExceptionFilter+0x127
0039e63c 779773bc ntdll!__RtlUserThreadStart+0x62
0039e650 77977261 ntdll!_EH4_CallFilterFunc+0x12
0039e678 7795b459 ntdll!_except_handler4+0x8e
0039e69c 7795b42b ntdll!ExecuteHandler2+0x26
0039e6c0 7795b3ce ntdll!ExecuteHandler+0x24
0039e74c 77910133 ntdll!RtlDispatchException+0x127
0039e74c 00000000 ntdll!KiUserExceptionDispatcher+0xf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:21:48.313

```
0039e634 779774df kernel32!UnhandledExceptionFilter+0x127 
```

当没有定义异常处理程序来处理引发的异常时，将调用 UnhandledExceptionFilter 函数。

[如何：在堆栈跟踪中收到 UnhandledExceptionFilter 调用时查找问题异常堆栈](http://support.microsoft.com/kb/313109)

# c++ - 这些成员是否有未指定的顺序？

> ID：15763091
> 
> 赞同：29
> 
> 时间：2013-04-02T11:35:44.370
> 
> 标签：c++, c++11, c++03

一位同事告诉我，在以下类型中，所有成员在内存中都有未指定的顺序（相对于彼此）。

我对此表示怀疑，因为它们都具有相同的访问级别。

谁是正确的？

```
struct foo { public: int x; public: int y; public: int z; }; 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-02T11:35:44.370

您的同事对 C++03 是正确的：

> `[C++03: 9.2/12]:`**分配没有中间访问说明符**的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。由访问说明符分隔的非静态数据成员的分配顺序未指定 (11.1)。*[..]*

但是你对 C++11 是正确的：

> `[C++11: 9.2/14]:`**分配具有相同访问控制**（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。未指定具有不同访问控制的非静态数据成员的分配顺序 (11)。*[..]*

（指出不同。）

# php - 教义多重复合外键

> ID：15763093
> 
> 赞同：1
> 
> 时间：2013-04-02T11:35:44.703
> 
> 标签：php, doctrine-orm

我试图用两个指向同一个对象的复合外键构造一个对象，但它们似乎具有相同的数据，比如只在一个列 product_id 上进行连接。

```
class PostpaidProduct extends Product {
    /**
     * @ManyToOne(targetEntity="Bundle", fetch="EAGER", cascade={"persist"})
     * @JoinColumn(name="bundle_voice_id", referencedColumnName="id")
     */
    private $bundleVoice;

    /**
     * @ManyToOne(targetEntity="Bundle", fetch="EAGER", cascade={"persist"})
     * @JoinColumn(name="bundle_data_id", referencedColumnName="id")
     */
    private $bundleData;

    /**
     * @OneToMany(targetEntity="BundlePromo", mappedBy="product", fetch="EAGER", cascade={"persist"})
     * @JoinColumns({
     *   @JoinColumn(name="id", referencedColumnName="product_id"),
     *   @JoinColumn(name="bundle_voice_id", referencedColumnName="bundle_id")
     * })
     */
    private $bundleVoicePromos;

    /**
     * @OneToMany(targetEntity="BundlePromo", mappedBy="product", fetch="EAGER", cascade={"persist"})
     * @JoinColumns({
     *   @JoinColumn(name="id", referencedColumnName="product_id"),
     *   @JoinColumn(name="bundle_data_id", referencedColumnName="bundle_id")
     * })
     */
    private $bundleDataPromos; 
```

}

我的映射有什么问题？是否可以有复合外键但不是主键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:37:43.253

我与 Doctrine 的一位开发人员交谈过，他说 @OneToMany 关系中的 @JoinColumns 字段被忽略。另一种方法是只有一个外键并在实体方法中使用匹配标准，根据另一个键过滤所需的条目。另一种解决方案是使用特定于获取这些值的存储库方法。

此外，在 OneToMany 关系中，渴望获取不起作用，因此它对所有子项进行单独的查询。因此，如果您的产品具有多个价格，则在获取产品时，它将执行单独的查询以获取价格。

# excel - 如何防止 Excel 将包含冒号的字符串作为公式处理

> ID：15763097
> 
> 赞同：2
> 
> 时间：2013-04-02T11:35:53.537
> 
> 标签：excel, csv, ms-office

我正在生成 csv 文件，有些单元格的格式为`nn:nnnn`，即用冒号分隔的数字。它既不是时间格式也不是日期格式，它只是文本单元格，我根本不希望它们被重新格式化。

我在我的代码中添加了一些逻辑，以识别它是否看起来像合法的时间格式或日期，如果是，我像这样包装该字符串`="nn:nnnn"`。但我对将这些字符添加到所有单元格不感兴趣。

它几乎解决了我的问题，但仍有一些情况，例如`07:1155`MS Excel 坚持将其翻译为**1.09375**。其他细胞如`68:0062`保持完整。有没有办法识别要计算或翻译的字符串？

是否有任何解决方法，例如 MS Excel 中的任何设置，告诉它不要对这类文本执行任何翻译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:53:31.597

除了在 Excel 中打开 CSV，您还可以尝试执行（菜单）数据/获取外部数据/从文本。或者，如果您使用的是 VBA，则类似于：

```
With ActiveSheet.QueryTables.Add(Connection:="TEXT;H:\csvtest.csv" _
    , Destination:=Range("$A$3"))
    .Name = "csvtest_1"
    .FieldNames = True
   etc
End With 
```

您可能需要将 Text 指定为传入的列格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:06:54.483

我在[Microsoft 社区论坛上从 JP Ronse 先生那里得到了以下回答](http://answers.microsoft.com/en-us/office/forum/office_2007-excel/how-to-prevent-excel-from-converting-strings/c4533885-88a2-4fdb-babf-02f4ebf1cf9a)

尝试在像 07:1155 这样的字符串前面加上一个单引号。单引号可防止 Excel 解释该值。

出于某种原因，Excel 将像 07:1155 这样的字符串解释为时间并将其转换为值。Excel 将 07:1155 视为 7 小时 1155 分钟，转换为值：

07:00 => 0.291666666666667 1155 分钟 => (1155/60)/24 => 0.802083333333333

总和是 1.09375

看起来像 n:00nn 或像 n:0nnnnn 这样的值没有翻译

检查冒号后的 2 n（不是 00）可能是一种解决方法。

# asp.net - 在混合架构解决方案中访问 Webforms Site.Master 中的 MVC ViewData

> ID：15763105
> 
> 赞同：1
> 
> 时间：2013-04-02T11:36:04.550
> 
> 标签：asp.net, asp.net-mvc-3

我们正在开发一个 ASP MVC3 项目，其中包含旧版 ASPX 网络表单。所以我们的解决方案是基于这里建议的混合架构：[http ://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx](http://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx)

我们使用 Site.Master webforms 作为 webforms 和 MVC 页面的主页面。

现在我们需要将 ViewData 从 MVC 视图传递给 Site.Master。

由于 ViewData 不能直接在网络表单中使用，任何人都可以建议如何使其工作。

谢谢

# asp.net-mvc-4 - 表单发布通过空模型 - .NET MVC 4

> ID：15763109
> 
> 赞同：0
> 
> 时间：2013-04-02T11:36:19.313
> 
> 标签：asp.net-mvc-4

我用[这篇文章作为参考](https://stackoverflow.com/questions/7968768/mvc3-input-submit)

我试图让我传递给视图的模型在单击输入时发回控制器的 HttpPost 方法。**但是，在本例中只是 List 的模型在回发时为空。**

我已包含我的代码以供参考。这只是一个测试随机东西的项目，所以我为糟糕的代码道歉。

我有以下查看代码：（显示完整的整个代码）

```
@{
    ViewBag.Title = "Home Page";
}
@using TestApp.MyObjects
@model List<Contact>
@Ajax.ActionLink("Show About", "About", new { id = "1" }, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "contentDiv" })
@Ajax.ActionLink("Show Contact", "Contact", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "contentDiv" })
<div id="contentDiv"></div>
@using (Html.BeginForm())
{

    <table>
        @foreach (Contact c in Model)
        {
            <tr>
                <td>
                    <button aboutnum0 = "@c.someValues[0]" aboutnum1 = "@c.someValues[1]" aboutnum2 = "@c.someValues[2]" class="nameButton">@c.name</button>
                </td>
            </tr>
        }
    </table>
    <input value="@Model[0].name" />
    <input value="@Model[0].name" />
    <div id ="aboutContentDiv"></div>
    <input type="submit" />
    @ViewBag.myCoolValue
}
<script type="text/javascript">
    $("button").click(function () {
        $("#aboutContentDiv").empty();
        $("#aboutContentDiv").append($("<div></div>").load("Home/About/" + $(this).attr("aboutnum0")));
        $("#aboutContentDiv").append($("<div></div>").load("Home/About/" + $(this).attr("aboutnum1")));
        $("#aboutContentDiv").append($("<div></div>").load("Home/About/" + $(this).attr("aboutnum2")));
    });

</script> 
```

以下是我的控制器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using TestApp.MyObjects;

namespace TestApp.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";
            Contact c = new Contact();
            c.name = "Some Name";
            c.someValues = new List<string>();
            c.someValues.Add("1");
            c.someValues.Add("2");
            c.someValues.Add("3");
            Contact c1 = new Contact();
            c1.name = "Some Name1";
            c1.someValues = new List<string>();
            c1.someValues.Add("4");
            c1.someValues.Add("5");
            c1.someValues.Add("6");
            Contact c2 = new Contact();
            c2.name = "Some Name2";
            c2.someValues = new List<string>();
            c2.someValues.Add("7");
            c2.someValues.Add("8");
            c2.someValues.Add("9");
            List<Contact> clist = new List<Contact>();
            clist.Add(c);
            clist.Add(c1);
            clist.Add(c2);
            Session["myCoolValue"] = "Cool1";
            TempData["myCoolValue"] = "Cool2";
            return View(clist);
        }
        [HttpPost]
        public ActionResult Index(List<Contact> contacts)
        {
            string name = contacts[0].name;
            return View("Index",contacts);
        }
        public PartialViewResult About(string id = "")
        {
            ViewBag.Message = "Your app description page.";
            About a = new About();
            a.someValue = id + " _ modified by contoller";
            ViewBag.myCoolValue = "Cool";
            return PartialView("About",a);
        }

        public PartialViewResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return PartialView("Contact");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:24:38.223

根据您对我的评论的回复，您需要这样的东西：

```
 // you can use foreach and have a counter variable or this
  for (int i = 0; i < Model.Count; i++)
  {
    // you do not want to use a partial view so let's do it this way
    // put this in an appropriate place in your code
    // like inside a tr or div, it's up to you
    @Html.TextboxFor(m => m[i].name)

  } 
```

# ios - 在回调中更改时未保留的变量

> ID：15763118
> 
> 赞同：0
> 
> 时间：2013-04-02T11:36:46.020
> 
> 标签：ios, objective-c++

我正在制作一个用 C++ 制作的游戏，它在某些时候想要打开使用相机。为此，它与一个提供模态视图控制器的 Objective C 类接口：

```
UIImagePickerController* cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
cameraUI.mediaTypes = [[NSArray alloc] initWithObjects:(NSString*)kUTTypeImage, nil];
cameraUI.allowsEditing = YES;
cameraUI.delegate = self;

[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:cameraUI animated:YES]; 
```

此类公开一个 State 变量以允许游戏观察模态视图控制器的进度。它被初始化：

```
State = CAMERA_ACTIVITY_WORKING; 
```

并由 UIImageControllerDelegate 函数更新：

```
- (void)imagePickerControllerDidCancel: (UIImagePickerController*) picker
{
  State = CAMERA_ACTIVITY_CANCELED;

  [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES];
  [picker release];
}

- (void)imagePickerController: (UIImagePickerController*) picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  State = CAMERA_ACTIVITY_IMAGECAPTURED;

  [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES];
  [picker release];
} 
```

模态视图控制器按应有的方式打开和关闭，并且代表肯定会被调用。但是，当游戏轮询 State 变量时，它似乎没有更新并返回 CAMERA_ACTIVITY_WORKING。我曾尝试使变量 volatile 但这没有效果。

有人可以帮忙吗？

编辑：全类源代码

。H

```
@interface Camera : UIViewController<UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    volatile State State;
    UIImage* CapturedImage;
}

- (void)imagePickerControllerDidCancel: (UIImagePickerController*) picker;

- (void)imagePickerController: (UIImagePickerController*) picker didFinishPickingMediaWithInfo:(NSDictionary *)info;

- (bool) IsAvailable;

- (bool) Show;

- (State) GetState;

@end 
```

.m

```
@implementation Camera

- (id)init
{
    self = [super init];
    if(!self) return self;

    State = CAMERA_ACTIVITY_WORKING;
    CapturedImage = NULL;

    return self;
}

- (void)imagePickerControllerDidCancel: (UIImagePickerController*) picker
{
    DEBUG_LOG("imagePickerControllerDidCancel");
    State = Poppet::ICameraActivity::CAMERA_ACTIVITY_CANCELED;
    DEBUG_LOG("State: " + STRING_CAST(State));

    [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES];
    [picker release];
}

- (void)imagePickerController: (UIImagePickerController*) picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    State = CAMERA_ACTIVITY_IMAGECAPTURED;

    [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES];
    [picker release];
}

- (bool) IsAvailable
{
    return [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == YES;
}

- (bool) Show
{
    if(![self IsAvailable]) return false;

    State = CAMERA_ACTIVITY_WORKING;

    UIImagePickerController* cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera; //Get Image From Camera
    cameraUI.mediaTypes = [[NSArray alloc] initWithObjects:(NSString*)kUTTypeImage, nil];
    cameraUI.allowsEditing = YES;
    cameraUI.delegate = self;

    [[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:cameraUI animated:YES];
    return true;
}

- (State) GetState
{ return State; }

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:16:17.717

看起来您没有使用自定义`Camera`类。

你创建一个类

```
UIImagePickerController* cameraUI = [[UIImagePickerController alloc] init]; 
```

设置委托和其他一些项目并将其显示给用户。但这不是`Camera`类的实例，它是`UIImagePickerController`. 我相信你想做

```
Camera* cameraUI = [[Camera alloc] init]; 
```

这将为您提供自定义的实施，`UIViewController`但是还有另一个问题。你的`Camera`类不是 的子类`UIImagePickerController`，它是 的子类，`UIViewController`所以它不会是`UIImagePickerController`。我想你打算这样做

```
@interface Camera : UIImagePickerController<UIImagePickerControllerDelegate, UINavigationControllerDelegate> 
```

附带说明一下，命名约定说只有类名应该以大写字母开头。方法名称和变量应以小写字母开头。

从评论编辑：

您的`Show`方法似乎没有从任何地方调用，所以我不确定它会如何使用。不仅如此，看着方法，我不确定它会如何使用。`-`开头表示它是一个实例方法，只能在 的实例上调用，`Camera`但它用于创建和显示的实例，`Camera`因此该方法需要对象的实例来创建和显示新创建的对象实例. 可能不是预期的。您可以使用 a`+`使其成为类方法并使用 调用它`[Camera Show]`，但是您将无法访问实例变量，因为它们不存在。

目前，我在任何地方都看不到 a`Camera`被创建（外部`Show`）并且可能成为活动视图控制器，因此看起来您只是在显示一个通用`UIImagePickerController`类而不是您的自定义类。

# c++ - 为什么在没有返回变量的情况下调用 MessageBox[etc]() 会导致程序崩溃？

> ID：15763120
> 
> 赞同：2
> 
> 时间：2013-04-02T11:36:52.307
> 
> 标签：c++, winapi, messagebox, access-violation, crash

因此，如果我编写以下代码：

```
MessageBoxA(0, "Yo, wazzup!", "A Greeting From Earth", 0); 
```

程序在退出时因访问冲突而崩溃。当我编写这样的代码时：

```
int a;
a = MessageBoxA(0, "Yo, wazzup!", "A Greeting From Earth", 0); 
```

它不会崩溃。现在我知道为什么它在崩溃*时*崩溃了，这要归功于我问的另一个问题，也是关于参数不匹配的问题，但我不知道它*为什么*会崩溃。

**那么为什么这会导致 APPCRASH 呢？**我一直认为调用具有返回类型的函数而不实际给出返回类型是安全的，例如：

```
int SomeFunction (void) {
   std::cout << "Hello ya'll!\n";
   return 42;
}

int main (void) {
   int a;

   // "Correct" ?
   a = SomeFunction();
   a = MessageBoxA(0, "Yo, wazzup!", "A Greeting From Earth", 0);

   // "Incorrect" ?
   SomeFunction();
   MessageBoxA(0, "Yo, wazzup!", "A Greeting From Earth", 0);

} 
```

当我运行这种“干净”的测试（在新文件中）时，我没有收到任何错误。**在我的程序中运行时，它似乎只给出了 MessageBox/MessageBoxA 的错误**。了解可能的原因将帮助我查明错误，因为项目代码太大而无法发布（无论如何我都需要我朋友的许可才能发布他的代码）。

**附加信息：**
编译器 = GCC
平台 = Windows

# 编辑：

**更新**
感谢大家迄今为止的反馈。所以我决定通过调试器运行它......现在 Code::Blocks 不会调试项目，除非它是从项目文件 (*.cbp) 加载的 - AFAIK。所以我创建了一个实际项目并将我们项目的主文件复制粘贴到项目中。然后我在调试模式下运行，并没有收到警告。然后我在构建模式下编译并且运行良好。
接下来，我决定在 Dev-C++ 中打开一个新文件并通过调试运行它，然后是最终构建过程，我再次没有遇到任何构建或调试错误。我无法在 Dev-C++ 中重现此错误，即使使用我们的主文件（如在 Code::Blocks 中导致错误的那个）。

**结论**
故障一定出在 Code::Blocks 上。AFAIK，他们都使用 GCC，所以我很困惑。我唯一能想到的是版本差异或者我的编译器设置或同样模糊的东西。优化器设置或任何其他编译器设置会以某种方式导致这种错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:01:07.237

具有返回值的版本不会崩溃，因为它在堆栈上多了一个 int。您的错误代码读取了堆栈的边界，然后遇到访问冲突。但是如果你有更多的堆栈，你将不会点击保护页面，因为这只是足够的额外堆栈。如果错误的代码只读取它是可以的，但仍然损坏。

我们有一点 WTF 诱导代码，如下所示：

```
char dummy[52];
some_function(); 
```

值得庆幸的是，有一条长长的评论解释说删除假人会`some_function`导致崩溃。它在一个非常古老的应用程序中，所以没有人敢碰它，而且`some_function`是完全不同的模块，我们无法控制。哦，是的，该应用程序在工业装置（如炼油厂或核电站）中的现场运行平稳超过 20 年...... ^_^

# ios - 如何强制单向对多关系持续存在

> ID：15763125
> 
> 赞同：3
> 
> 时间：2013-04-02T11:37:15.847
> 
> 标签：ios, core-data

当一对多关系没有逆时，核心数据就会出现问题。对相关属性所做的更改不会持续存在。这是我们许多人都面临的问题，因为它可以通过谷歌搜索找到。

这是为了询问你们中的一些人是否找到了实现持久性的技巧/解决方法，除了明显的答案或添加反向关系。

**背景**：

*   即使在文档中不鼓励单向关系，它们也不是被禁止的。文档仅坚持在没有反向时产生的责任。
*   核心数据文档中概述了不想要反向的原因：当您有大量项目链接到一个实体时，反向关系每次添加项目时都会加载一个大型 NSSet。消耗内存，可能无缘无故超出允许范围。

**例子**

在员工/部门典型范例中，如果您有大量员工可以属于多个部门，那么您需要从员工到部门的一对多关系。您**不**希望反过来，因为每次将员工链接到部门时，都必须加载、更新和保存一个（非常）大的 NSSet。此外，如果从不删除部门实体，则图的完整性很容易维护。

请不要回答这是 core-data 的一个特性，反向关系是强制性的。这不是这样说明的，更像是一个错误而不是一个功能。发布错误报告并不能解决当前部署系统的问题。

**编辑：加入实体解决方案** 此编辑旨在为 Dan Shelly 在下面的回答建议提供更多亮点和讨论。

首先，回答您的第一个问题，我不是要尝试多对多，而是要真正的单向多对多。您链接的同一页面的此文本略低于您引用的文本：

> **单向关系**
> 
> 不一定要在两个方向上对关系进行建模。在某些情况下，不这样做可能很有用，例如，当一对多关系可能具有大量目标对象并且您很少可能遍历该关系时（您可能希望确保不会在关系目的地的大量对象）。但是，不对两个方向的关系进行建模会给您带来大量责任，以确保对象图的一致性、更改跟踪和撤消管理。

也就是说，如果没有强制核心数据自动生成和更新它的解决方案，那么您提出的添加连接实体的解决方案是一种可行的方法。

IMO，对于我的用例，加入实体甚至不需要与 Department 有关系。这种一对一是无用的，并且可以由保持相关部门信息的连接实体的属性代替，例如它的 objectID 或其他索引属性来到达它。

即：
DepartmentEmployee：
属性：Dept_ix（整数）
关系：员工（一对一，无效）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:30:18.783

首先回复您的评论：

> > IMO，对于我的用例，加入实体甚至不需要与 Department 有关系。这种一对一是无用的，并且可以由保持相关部门信息的连接实体的属性代替，例如它的 objectID 或其他索引属性来到达它。

这正是部门属性在联接关系中所做的事情。
如果您查看生成的 SQLite 结构，您将看到 Employee 实体和 Department 实体之间的附加映射表，其中仅包含它们的`int64`id。

现在，给定的示例是：

> > 例子
> > 
> > 在员工/部门典型范例中，如果您有大量员工可以属于多个部门，那么您需要从员工到部门的一对多关系。您不希望反过来，因为每次将员工链接到部门时，都必须加载、更新和保存一个（非常）大的 NSSet。此外，如果从不删除部门实体，则图的完整性很容易维护。可以很容易地实现一个简单的没有逆的一对多关系。
> > 您可以将其视为关系“多”端中对象的另一个属性。

这个例子请求一个一对多的关系：
Employee-->>Department（一个Employee可能属于许多部门）
反之是：
Department-->Employee
因为我们不能实现一个多对多的关系如果没有逆，我们必须实现关系的 to-ONE 端，只是为了确保我们遵守框架的实现。

重申：
根据文档，我们知道如果没有定义反向关系，任何多对多关系都不会持续存在。
==>
因为我们喜欢在没有逆关系的情况下对关系建模，所以我们只将其建模为耦合的 to-ONE 部分（将其建模为对多将违反框架承诺的持久性）
认为它对定义文件夹中的文件（一个文件不能属于多个文件夹），或父子关系。
==>
我们必须将关系定义为：
部门-->员工（这没有多大意义，因为只能容纳一名员工的部门并不是真正的部门）

从另一个角度来看它（否定证明）：
假设我们想违背框架并定义一个没有逆的多对多关系。
==>
这意味着我们只会在一个方向上实现它，留下一个 ... 对多关系或 ... MANY-to 关系
==>
这是同一件事不是吗（一对多关系from and entity1 to entity2)
==>
现在，如果我们有一个一对多的关系并且我们选择不实现它的逆，我们可以选择实现对多的部分吗？**不，我们不能**，这看起来只是多对多关系的一半==>
我们**必须**实现它的一对多部分。

为了更有意义，我将显示更合乎逻辑的：
Department-->>Employee 所以我们对这种一对多关系的实现将是：
Department<--Employee

这将产生以下 SQLite DB 结构：
ZDEPARTMENT:
Z_PK
Z_ENT
Z_OPT
ZNAME

ZEMPLOYEE:
Z_PK
Z_ENT
Z_OPT
ZDEPARTMENT (int)
ZNAME

我们现在可以在 Department 上定义一个 fetched 属性来获取属于它的所有员工：
`employees`谓词：`department == $FETCH_SOURCE`

您可以在 Department 的方法中强制执行此关系`prepareForDeletion`（未测试）：（
您将首先`userInfo`在 Department 上设置字典以保存强制执行的类型）
（我将“拒绝”规则的实现留给读者：D）

```
- (void) prepareForDeletion
{
    [super prepareForDeletion];
    NSEntityDescription* entity = [self entity];
    NSDictionary* dict = [entity userInfo] ;
    if ([dict count]) {
        [dict enumerateKeysAndObjectsUsingBlock:^(NSString* key, NSString* value, BOOL *stop) {
            NSArray* arr = [self valueForKey:key];
            if( [value isEqualToString:@"cascade"]) {
                for (NSManagedObject* obj in arr) {
                    [[self managedObjectContext] deleteObject:obj];
                }
            } else if ( [value isEqualToString:@"nullify"] ) {
                NSArray* arr = [self valueForKey:key];
                for (NSManagedObject* obj in arr) {
                    [obj setValue:nil forKey:@"department"];
                }

            }
        }];
    }
} 
```

正如我所看到的，这就是你对逆向关系所能做的一切。如果您仍然认为您需要多对多关系，请参考我的另一个答案。

问候，
丹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:51:43.570

这是一个很好的问题。

但首先要做的是：它在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)
中明确说明：

> > “重要：你必须在两个方向上定义多对多关系——也就是说，你必须指定两个关系，每一个都是另一个的逆。你不能只在一个方向上定义一个多对多关系并试图将其用作多对多。如果这样做，最终会遇到参照完整性问题。

尽管如此，让我们描述一下问题（生成的数据库）
在定义一对多关系时，生成的数据库不会添加额外的表来映射关系。
它只在多对多关系一端的实体上设置一个属性，该属性等于引用它的最后一项。

例子：

模型：
实体：部门
关系：无
属性：名称（字符串）

实体：员工
关系：部门（对多，无操作）
属性：名称

结果数据库：
ZDEPARTMENT：
Z_PK
Z_ENT
Z_OPT
Z2DEPARTMENTS (int)
ZNAME

ZEMPLOYEE：
Z_PK
Z_ENT
Z_OPT
ZNAME

这种结构显然会导致数据不一致。

解决方案是持有一个实体：`DepartmentEmployee`在两个方向上建模一对多关系，但其中一个是单向的（Department -> DepartmentEmployee）：

DepartmentEmployee：
关系：部门（对一，无操作），员工（对一，无效）

并且您必须在删除部门对象时维护该表。

希望这有点道理:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:54:11.817

您是否考虑过完全取消这种关系并以编程方式管理员工的外键？

如果您有一个从现有部门列表（选择列表等）设置属性的 UI，您可以简单地从该列表中获取主键并将其分配为`departmentID`您的 Employee 的属性。

然后，您应该能够`validateDepartmentID:error`在您的 Employee 对象上实现一个方法，该方法检查给定`departmentID`是否有效（即在获取的部门列表中）和/或不为空，以便您维护 Employee 和 Department 之间的引用完整性。

在获取部门中的员工列表时，您可以使用获取的属性或向部门添加实例方法，该方法返回`NSFetchedResultsController`包含部门员工列表的实例。

您唯一需要做的另一件事是在您的 Department 类（可能在 上`-prepareForDeletion`）中注入一些删除逻辑，以更新`departmentID`任何受影响的子记录。那取决于您的业务逻辑。

[Apple docs on property validation](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/doc/uid/TP40003607) cover如果你`-prepareForDeletion`不`-validateValue:forKey:error`熟悉它们。

# iphone - UITableView 垂直滚动问题

> ID：15763127
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:37:22.130
> 
> 标签：iphone, uitableview, ios6

我对 UITableView 垂直滚动有一个令人沮丧的问题。我有一个（显然）功能正常的 UITableView（表格行正确显示，我可以选择行并执行正确的操作等）。

但是，我无法完全滚动到视图的底部。我意识到这个问题已经被问过很多次，并且我试图实施之前答案中给出的建议，但无济于事。我怀疑我存在根本性的误解。

我意识到框架大小需要大于 contentSize 才能使 tableView 正确滚动，并且我已尝试确保这一点。请注意，我刚刚选择了一个小的水平 contentSize 用于调试目的。我敢肯定这很简单......

这是一个代码片段，显示了我在做什么。

```
 self.testTable= [[UITableView alloc] initWithFrame:self.view.frame 
style:UITableViewStyleGrouped];

    self.testTable.delegate=self;
    self.testTable.dataSource=self;
    self.view = self.testTable;
    NSLog(@"table: Width: %f  height %f ",self.testTable.contentSize.width,self.testTable.contentSize.height);
    self.testTable.contentSize=CGSizeMake(320,200);
    NSLog(@"table: Width: %f  height %f ",self.testTable.contentSize.width,self.testTable.contentSize.height); 
```

我的 NSLog 调用返回：

```
2013-04-02 13:23:53.332 TestSet[32358:907] table: Width: 0.000000  height 0.000000 
2013-04-02 13:23:53.333 TestSet[32358:907] table: Width: 320.000000  height 200.000000 
```

对于它的价值：

```
@property(nonatomic,strong)UITableView *testTable; 
```

感激地收到任何建议。

更新 - 我正在横向尝试这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:41:48.103

它不取决于内容大小，但这是因为您的框架不正确。检查 tableview 的框架是否正确。问题将出现在 tableview 的高度将超出视图并且当表格滚动到达底部时滚动会反弹

使用`[tableview setFrame : CGRectMake(x,y,width,height)];`

制作

消除

```
 self.view = self.testTable;
  self.testTable.contentSize=CGSizeMake(320,200); 
```

添加

```
 [self.view addSubview:self.testTable]; 
```

**用这个**

```
 self.testTable= [[UITableView alloc] initWithFrame:self.view.frame style:UITableViewStyleGrouped];
 self.testTable.delegate=self;
 self.testTable.dataSource=self;
 [self.view addSubview:self.testTable]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:15:12.463

我解决了我自己的问题。以上所有操作都是在视图控制器 initWithNibName 中完成的，而不是 viewDidLoad。一个愚蠢的错误。

不过，我感谢大家的善意帮助。

# php - Eclipse：查找分布在多行中的查询字符串

> ID：15763134
> 
> 赞同：2
> 
> 时间：2013-04-02T11:37:42.497
> 
> 标签：php, regex, eclipse, search

假设在 Eclipse 中打开的文件具有以下字符串

```
$stmt = "select addr from 
         student
         where id=123";

$stmtA = "alter table tablename";

$stmtB = " delete from student
    where school=ABC";

$var1 = "This is not a query.
         Just a string"; 
```

我需要找到影响学生表和学校列的所有查询语句。搜索：

```
(?s)"(.*?)" 
```

给我所有被引用并分布在多行的字符串。现在我如何增强上述正则表达式来过滤结果，以确保结果具有

1）选择或更改或插入或删除MySQL的关键字，以及2）学生和学校的关键字。

我认为满足以上两个条件，我将能够提取命中学生表和学校列的字符串。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:41:40.603

```
(?s)".*?(?:select|alter|insert|delete).*?(?:student|school).*?" 
```

虽然使用`[^"]*?`而不是`.*?`可能会更好。

**编辑：**
让我们切换到[前瞻](http://www.regular-expressions.info/lookaround.html)，因为它们在确保某些条件（如字符串长度，具有特殊字符或 smthg）时是非常酷的工具：

```
(?s)".*?(?:select|alter|insert|delete)(?=[^"]*?student)(?=[^"]*?school).*?" 
```

好的，如果您对正则表达式不感兴趣，您可以在这里停下来，否则，作为前瞻的示例（注意：这比较慢）：

```
(?s)"(?=[^"]*?(?:select|alter|insert|delete)(?=[^"]*?student)(?=[^"]*?school).*?" 
```

如果您可以访问原子组，最好这样做（[原子分组](http://www.regular-expressions.info/atomic.html)）：

```
(?>select|alter|insert|delete) 
```

好像一个单词在第一个字母之后无法匹配，它会跳过其余的单词（它们都有不同的第一个字母）。

最后，我想你可以使用[if/then/else](http://www.regular-expressions.info/conditional.html)：

```
(?s)".*?(?:select|alter|insert|delete).*?(?:(student)|school)(?(1).*?school|.*?student).*?" 
```

或类似的东西。

# .htaccess - 301 从所有 index.asp 重定向？对主页的查询

> ID：15763137
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:37:54.170
> 
> 标签：.htaccess, redirect

我需要使用`.htaccess`重定向所有包含的页面`index.asp`？到主页查询。

例如：

```
index.asp?currentPage=1411&cat2=seating 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:17:03.343

`.htaccess`在文件中试试这个：

```
Redirect 301 /index.asp http://example.com 
```

# git - 从 ming 中取消删除文件

> ID：15763139
> 
> 赞同：0
> 
> 时间：2013-04-02T11:37:58.960
> 
> 标签：git, rm

我正在 Windows 7 机器上编写一个 php 应用程序，我正在使用来自`mingw32`. 问题是我刚刚错误地删除了我项目的一个非常重要的文件。

这是我没有注意的命令，灾难现在就在我身上：
`rm git diff include/class/ReportBuilder.php`

如果我这样做，`git status`我会看到它：`Changes to be commited`但我再也找不到它了。

您是否知道如何取消删除`rm`从 mingw32 中删除的文件。我的文件不在存储库中，但我已经为此工作了 2 周 :(((

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:48:44.827

如果文件没有被跟踪，那么这与 git 无关。`rm`只是像往常一样删除文件，因此您只能依靠备份。

如果文件已添加到索引中，您可以尝试`git checkout include/class/ReportBuilder.php`，但这不会让您获得最新版本，只会获得最新版本的版本`git add`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:22:05.187

我正在使用 netbeans，幸运的是，ntbeans 内置了取消删除程序。谢谢 Netbeans。谢谢stackoverflow有这个答案：[https ://stackoverflow.com/a/8179717/86112](https://stackoverflow.com/a/8179717/86112)

因此，解决方案是：右键单击 Project->History->Revert Deleted

# ruby-on-rails - redmine 捆绑器错误

> ID：15763140
> 
> 赞同：1
> 
> 时间：2013-04-02T11:38:00.460
> 
> 标签：ruby-on-rails, bundler, redmine

我正在使用交钥匙 redmine 设备 12.0 设置 redmine。之后我收到以下错误

执行命令`bundle install -v 1.0.0`

```
root@redmine www/redmine# bundle update 
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
Updating git://github.com/rails/prototype_legacy_helper.git
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://rubygems.org/..
Fetching gem metadata from http://rubygems.org/..
Fetching gem metadata from http://rubygems.org/..
Resolving dependencies...
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.0) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.3.4)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

# android - 将活动传递给我的自定义适配器类时，活动为空

> ID：15763141
> 
> 赞同：0
> 
> 时间：2013-04-02T11:38:01.683
> 
> 标签：android

`Acvitity`当我传递给我的自定义适配器时为空。当我将方向从纵向更改为横向或反之亦然时，就会发生这种情况。

我进行了调试，但无法弄清楚为什么传递给我的 Adapter 类的 Activity 为空。

贝娄是完整的片段类。

```
public class FragmentClass extends SherlockListFragment implements AsyncListner {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
        AsyncTaskClass task = new AsyncTaskClass (Object, getSherlockActivity());
        task.setListener(this);
        task.execute();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.documents, container, false);
    }

    @Override
    public void onLoadComplete(List < Response > data) {
        AdapterClass adapter = new AdapterClass (getSherlockActivity(),
            android.R.id.list, data);
        setListAdapter(adapter);
    }

} 
```

以下是日志：

```
>     E / AndroidRuntime(1142): FATAL EXCEPTION: main E / AndroidRuntime(1142): java.lang.NullPointerException E /
> AndroidRuntime(1142): at
> android.widget.ArrayAdapter.init(ArrayAdapter.java: 310) E /
> AndroidRuntime(1142): at android.widget.ArrayAdapter. < init >
> (ArrayAdapter.java: 153) E / AndroidRuntime(1142): at
> com.example.test.DocumentsAdapter. < init > (DocumentsAdapter.java:
> 22) E / AndroidRuntime(1142): at
> com.example.test.DocumentsFragment.onLoadComplete(DocumentsFragment.java:
> 121) E / AndroidRuntime(1142): at
> com.example.test.DocumentsAsyncTask.onPostExecute(DocumentsAsyncTask.java:
> 101) E / AndroidRuntime(1142): at
> com.example.test.DocumentsAsyncTask.onPostExecute(DocumentsAsyncTask.java:
> 1) E / AndroidRuntime(1142): at
> android.os.AsyncTask.finish(AsyncTask.java: 631) E /
> AndroidRuntime(1142): at
> android.os.AsyncTask.access$600(AsyncTask.java: 177) E /
> AndroidRuntime(1142): at
> android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:
> 644) E / AndroidRuntime(1142): at
> android.os.Handler.dispatchMessage(Handler.java: 99) E /
> AndroidRuntime(1142): at android.os.Looper.loop(Looper.java: 137) E /
> AndroidRuntime(1142): at
> android.app.ActivityThread.main(ActivityThread.java: 4745) E /
> AndroidRuntime(1142): at java.lang.reflect.Method.invokeNative(Native
> Method) E / AndroidRuntime(1142): at
> java.lang.reflect.Method.invoke(Method.java: 511) E /
> AndroidRuntime(1142): at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:
> 786) E / AndroidRuntime(1142): at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 553) E /
> AndroidRuntime(1142): at dalvik.system.NativeStart.main(Native Method) 
```

DocumentsAdapter 适配器 = new DocumentsAdapter(getSherlockActivity(), android.R.id.list, data);

当我`getSherlockActivity() = null`将它作为参数传递给我的适配器类时，我得到了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:41:46.887

当片段与活动分离时，它将其活动引用设置为`null`。因此，您应该在片段的`onAttach()`方法中保存对活动的引用：

```
private SherlockActivity mActivity;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    mActivity = getSherlockActivity();
}

@Override
public void onLoadComplete(List<DocumentResponse> data) {
    DocumentsAdapter adapter =
            new DocumentsAdapter(mActivity, android.R.id.list, data);
    setListAdapter(adapter);
} 
```

`null`或在实际访问之前检查活动是否不在：

```
@Override
public void onLoadComplete(List<DocumentResponse> data) {
    SherlockActivity activity = getSherlockActivity();
    if (activity != null) {
        DocumentsAdapter adapter =
                new DocumentsAdapter(activity, android.R.id.list, data);
        setListAdapter(adapter);
    }
} 
```

# devexpress - 在 DevExpress 的 gridView 中将图像显示到 RepositoryPictureEdit ...？

> ID：15763145
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:38:05.867
> 
> 标签：devexpress, xtragrid

我在 DevExpress Gridview Concepts 工作。我的网格字段中需要一个用户图像。我在winforms平台工作。

我的数据表只有图像路径。我不知道如何将图像绑定到存储库PictureEdit 控件

请提供任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:07:42.863

您可以使用 ImageEdit。这是图像的下拉列表。因此，您首先通过以下方式生成图像：

```
Image.FromFile(Path); 
```

将它们添加到 List 或 ImageList 并用它填充下拉列表。然后，您只需将图片的索引绑定到您的列。

我希望这能够在你的情况下工作。

编辑：或

首先，您必须在 Grid 中创建一个 UnboundColumn。只需创建一个列并将属性“UnboundType”设置为对象。然后将 RepositoryPictureEdit 设置为 ColumnEdit。现在你有一个列，每行都有一个图片编辑。要填充图像，您可以处理 CustomUnboundColumnData 事件。您可以在 GridView 上找到此事件。

要完成此任务，请执行以下操作：

*   运行 GridView Designer -> 更改为左侧的列
*   添加列
*   在属性窗口中 ->

*   将 Columnedit 设置为 repositorypictureedit

*   将 UnboundType 设置为对象

*   激活 CustomUnboundColumnData 事件（您可以在 GridView 中找到）-> 此事件在为每个单元格加载 Grid 时触发。

通过`e.ListSourceRowIndex`您可以获得附加到 unboundcolumn 的数据源行。因此，您可以执行以下操作：

```
 private void gridView1_CustomUnboundColumnData(object sender, DevExpress.XtraGrid.Views.Base.CustomColumnDataEventArgs e)
            {
                if (e.Column.Name == "MyColumn")
                {
                    clsTest test = myListAsDataSource[e.ListSourceRowIndex];
                    e.Value = test.Bild;
                }
            } 
```

我希望这可以帮助你。

# c++ - 确保单个实例并为 Windows c++ 控制台应用程序传递参数的正确方法

> ID：15763149
> 
> 赞同：1
> 
> 时间：2013-04-02T11:38:21.217
> 
> 标签：c++, winapi, console-application

我正在编写一个简单的 Windows 控制台 C++ 应用程序。如果应用程序第二次启动（在同一台计算机上），它不应该跨越一个新实例，而是将命令行参数传递给已经运行的实例。

我已经通过使用互斥锁确保应用程序仅在一个实例中运行，但我无法通知第一个应用程序它已作为第二次启动并传递命令行参数。

用例：
`listener.exe -start`// 启动监听
`listener.exe -stop`器 // 停止监听器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:46:05.480

如果您只想传达一个简单的布尔值（例如开始/停止），那么您可能需要一个[Event 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx)。

如果你想在进程之间交换更复杂的数据，你可以使用[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)或者共享内存块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:42:22.183

第一个侦听器应等待要关闭的事件对象。当您启动时`listener.exe -stop`，它只会将全局事件设置为关闭，如果第一个实例正在运行，那么它将退出。需要命名事件对象才能让其他进程引用它。此外，当您第二次触发命令时，它将启动另一个进程，没有带有命令解释器的隐式 IPC。

listener.exe -开始：

1.  创建命名事件 (CreateEvent)

2.  在主线程或任何合适的线程中等待事件。（等待单个对象）

3.  事件启动关闭

listener.exe -停止

1.  获取命名事件的句柄。
2.  设置事件，使第一个进程的线程知道触发了关闭事件并退出

一些参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686915 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T13:11:10.120

有许多类型的 IPC。在 Windows 上对我来说效果很好的一种技术是使用单独的线程来处理仅消息窗口的消息。一旦您确定您是程序的主要实例，或者侦听器（通过在您的场景中创建互斥锁）创建仅消息窗口并启动一个线程来处理消息。对于辅助实例，如果命令尾部有内容，则使用 WM_COPYDATA 消息将其作为字符串传递给仅消息窗口。侦听器程序忽略所有其他消息，除了可能告诉它退出的令牌。一旦辅助实例将消息传递到仅消息窗口，它就会退出。

这对于您可能有几十个辅助实例打开的情况非常有效。一个例子是用户在资源管理器文件夹中选择 50 个文件，右键单击并运行程序。侦听器在专用线程中处理仅消息窗口并将字符串（在本例中为文件名）排队以进行处理。

# css - epub中的css3 webkit keuframe规则

> ID：15763155
> 
> 赞同：0
> 
> 时间：2013-04-02T11:38:35.283
> 
> 标签：css, webkit, epub3

我在使用 EpubCheck 3.0 验证 CSS3 动画时遇到问题。我收到以下警告消息。您能否通过提供一些链接来帮助我。

警告：SimpleSample3_css3-keyframes.epub/EPUB/Style/style.css(5)：令牌'0%'不允许在这里警告：SimpleSample3_css3-keyframes.epub/EPUB/Style/style.css(6)：令牌'50% ' 此处不允许 警告：SimpleSample3_css3-keyframes.epub/EPUB/Style/style.css(7)：此处不允许令牌 '100%'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:55:25.043

看起来这是 EPubCheck 3.0 的一个已知错误。请参阅此错误报告：[http](http://code.google.com/p/epubcheck/issues/detail?id=241) ://code.google.com/p/epubcheck/issues/detail?id=241 。尝试更新到最新版本（错误已在 r449 中更正，于 2013 年 3 月 26 日发布）。

# regex - 正则表达式替换为

> ID：15763158
> 
> 赞同：0
> 
> 时间：2013-04-02T11:38:46.120
> 
> 标签：regex

我需要替换为`&nbsp`但`&nbsp;`我 的正则表达式是`&nbsp;``&nbsp;``&nbsp([^;])`

我的替代品是`&nbsp;`

我的代码正在替换

```
<pre><code>
<ul><b> </b>&nbsp</ul>
<tr valign="top"><td width="144">&nbsp;United Kingdom</td><td width="144">&nbsp;Pound</td><td width="144">&nbsp;Pence</td></tr></pre></code> 
```

和

```
<pre><code>
<ul><b> </b>&nbsp;/ul>
<tr valign="top"><td width="144">&nbsp;United Kingdom</td><td width="144">&nbsp;Pound</td><td width="144">&nbsp;Pence</td></tr> 
```

它正在删除 < 标签`</ul></pre></code>`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:42:41.173

提前尝试正则表达式

```
(&nbsp)(?!;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:42:39.223

捕获 non 可能会更好；字符和添加；在它面前。

搜索字符串：

```
(&nbsp)([^;]) 
```

替换字符串：

```
\1;\2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:41:46.140

使用环视

```
(?<=&nbsp)(?=[^;]) 
```

**或者**

```
(?<=&nbsp)(?!;) 
```

将其替换为`;`

# android - 检测 USB 设备何时在 Android 上分离

> ID：15763159
> 
> 赞同：12
> 
> 时间：2013-04-02T11:38:46.087
> 
> 标签：android, android-intent

我有一个 Android 应用程序需要检测 USB 外围设备何时连接或分离。首次连接外围设备时它工作正常，但随后分离时我没有收到任何通知（即，我没有收到`Intent`who 的操作是）。`ACTION_USB_DEVICE_DETACHED`

这是我的相关部分`AndroidManifest.xml`：

```
<activity android:name=".LauncherActivity">
    <intent-filter>
        <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
    </intent-filter>
    <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" android:resource="@xml/device_filter" />
    <meta-data android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" android:resource="@xml/device_filter" />
</activity> 
```

还可能值得注意的是，`LauncherActivity`仅`Service`在连接设备时启动服务，并在设备分离时停止服务。在任何一种情况下，`LauncherActivity`总是`finish`立即 es 本身。所有这些都发生在`LauncherActivity.onCreate`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-06T12:17:12.123

USB_DEVICE_DETACHED 是一个**广播**意图，因此您可能希望使用适当的意图过滤器在清单中声明 BroadcastReceiver 以进行分离操作，并附加元数据。对于感兴趣的人，USB_ACCESSORY_DETACHED 也是如此。

总结：
**USB_XXX_ATTACHED**是一个活动意图
**USB_XXX_DETACHED**是一个广播意图

（其中 XXX = 设备 | 附件）

请参阅：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

“这些消息传递系统之间没有重叠：广播意图仅传递给广播接收者，从不传递给活动或服务”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-11T10:31:05.033

尝试使用 USB_STATE 如下。

它将触发附加和分离到同一个接收器，并且在接收器中，您可以识别是附加还是分离事件。

```
IntentFilter filter = new IntentFilter();
filter.addAction("android.hardware.usb.action.USB_STATE"); 
```

接收者：

```
public class USBReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        if (intent.getExtras().getBoolean("connected")) { 
             //do your stuff
        }
    }  
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-02T19:38:47.680

所以，我从来没有`ACTION_USB_DEVICE_DETACHED` `Intent`去`LauncherActivity`；我不知道那里有什么交易，可能是我对意图过滤器或`Activity`生命周期回调没有正确理解的东西。

我最终使用的解决方案来自 Pratik 链接的帖子。我基本上把一切都`USB_DEVICE_DETACHED`拿出来了`AndroidManifest.xml`。然后，在 的`onCreate`方法中`Service`，我注册了一个`BroadcastReceiver`这样的：

```
@Override
public void onCreate() {
    detachReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals(UsbManager.ACTION_USB_DEVICE_DETACHED))
                stopSelf();
        }
    };

    IntentFilter filter = new IntentFilter();
    filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
    registerReceiver(detachReceiver, filter);
} 
```

有点笨拙，我仍然很好奇为什么只是添加`USB_DEVICE_DETACHED`到`<intent-filter>`of`LauncherActivity`不起作用，但它可以满足我的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-13T12:50:32.187

对于它的价值，我遇到了同样的问题，因为活动被暂停，然后在设备断开连接时恢复。由于接收者在接收 之前
未在方法中注册，因此您的应用程序永远不会收到通知。`OnPause()``ACTION_USB_DEVICE_DETACHED`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-14T01:21:41.370

对我有用的修复是取消注册`onPause()`并再次注册`onResume()`：

```
@Override
public void onPause()
{
    super.onPause();
    stopIOManager();
    if(m_UsbReceiver!=null) unregisterReceiver(m_UsbReceiver);
}

@Override
public void onResume()
{
    super.onResume();
    startIOManager();
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);
    filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
    registerReceiver(m_UsbReceiver, filter);
} 
```

然而，尽管应用程序似乎总是收到 DETACH 事件，但有时它不会收到 ATTACHED 事件。然后我需要插拔 USB 连接器，通常尝试一两次后它就可以工作。我不确定将这种奇怪行为归咎于操作系统。

# nokia - 诺基亚表单不显示文本

> ID：15763160
> 
> 赞同：0
> 
> 时间：2013-04-02T11:38:50.660
> 
> 标签：nokia, nokia-s40

我只希望诺基亚文档更有帮助。它对开发人员文档的搜索完全糟糕。

```
public class UpdateJourney extends Form implements CommandListener, Runnable {
    private LocationProvider myLocation;
    private Criteria myCriteria;
    private Location myCurrentLocation;

    private HomeScreen helloScreen;
    private Command exitCommand;

    private Thread getLocationThread = new Thread(this);;

    public UpdateJourney(HomeScreen helloScreen) {
        super("Taxeeta");
        this.helloScreen = helloScreen;
        getLocationThread.start();
    }

    public void run() {
        myCriteria = new Criteria();
        myCriteria.setHorizontalAccuracy(500);
        try {
            myLocation = LocationProvider.getInstance(myCriteria);
            myCurrentLocation = myLocation.getLocation(60);
        } catch (LocationException e) {
            e.printStackTrace();
            System.out
                    .println("Error : Unable to initialize location provider");
            return;
        } catch (InterruptedException e) {
            e.printStackTrace();
            System.out.println("Error: Waited enough for location to return");
            return;
        }
        System.out.println("Location returned Lat:"
                + myCurrentLocation.getQualifiedCoordinates().getLatitude()
                + " Lng:"
                + myCurrentLocation.getQualifiedCoordinates().getLongitude());
        String helloText = new String("Location returned Lat:"
                + myCurrentLocation.getQualifiedCoordinates().getLatitude()
                + " Lng:"
                + myCurrentLocation.getQualifiedCoordinates().getLongitude());
        super.append(helloText);

        exitCommand = new Command("Location returned Lat:"
                + myCurrentLocation.getQualifiedCoordinates().getLatitude()
                + " Lng:"
                + myCurrentLocation.getQualifiedCoordinates().getLongitude(),
                Command.EXIT, 1);
        addCommand(exitCommand);
        setCommandListener(this);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T20:07:08.310

你的意思是不显示从这个命令？：

```
System.out.println("Location returned Lat:"
+ myCurrentLocation.getQualifiedCoordinates().getLatitude()
+ " Lng:"
+ myCurrentLocation.getQualifiedCoordinates().getLongitude()); 
```

它没有显示在手机屏幕上。相反，它将显示在控制台（IDE / 调试）上。

要在 Form.. 上显示文本，您需要使用以下内容：

> ```
> form.addComponent(new Label("hi..."); 
> ```

希望能帮助到你。

# iphone - 模拟器 iOS 中的 UITextField 选择错误

> ID：15763161
> 
> 赞同：0
> 
> 时间：2013-04-02T11:38:55.253
> 
> 标签：iphone, uitextfield, response

我有一个新的愚蠢问题，我用**三个文本字段创建了****子视图**，我连接得很好，现在当我**点击**任何**文本字段**时，它的工作直到第三次尝试之后它不起作用，现在我很困惑到底发生了什么，我通过添加**textfild****西布**。

 ******```
 - (IBAction)weightMethod:(id)sender
   {

    centimeterTextField.placeholder = @"  Centimeters";
    self.centimeterTextField.delegate=self;
    self.centimeterTextField.tag=3;
    self.centimeterTextField.borderStyle = UITextBorderStyleRoundedRect;
    self.centimeterTextField.clearsOnBeginEditing=YES;
    [ self.centimeterTextField setBackgroundColor:[UIColor whiteColor]];
    ptextfield.placeholder = @"   Feet";
    self.ptextfield.delegate=self;
    self.ptextfield.tag=4;
    self.ptextfield.borderStyle = UITextBorderStyleRoundedRect;
    self.ptextfield.clearsOnBeginEditing=YES;
    [self.ptextfield setBackgroundColor:[UIColor whiteColor]];

    ptextfieldInches.placeholder = @"   Inches";
    self.ptextfieldInches.delegate=self;
    self.ptextfieldInches.tag=5;
    self.ptextfieldInches.borderStyle = UITextBorderStyleRoundedRect;
    [ptextfieldInches setBackgroundColor:[UIColor whiteColor]];
    self.ptextfieldInches.clearsOnBeginEditing=YES;
    [self.centimeterTextField setKeyboardType:UIKeyboardTypeNumberPad];
    [self.ptextfieldInches setKeyboardType:UIKeyboardTypeNumberPad];
   [self.ptextfield setKeyboardType:UIKeyboardTypeNumberPad];

 } 
```

令人惊奇的事实是，当我没有将插座连接到任何文本字段时，它会一直工作，直到您做出响应。******

# asp.net - ajax文本框水印

> ID：15763166
> 
> 赞同：0
> 
> 时间：2013-04-02T11:39:16.403
> 
> 标签：asp.net, html, css, ajax

我已经开发了一个页面，我需要在其中输入电子邮件和密码，并且在输入之前应该在一个文本框中显示“输入您的电子邮件”文本，并在另一个文本框中显示“输入您的密码”文本。

下面是执行上述操作的代码。

```
<html>
<head>
<title>lksdjflk</title>
<style>
    .unwatermarked { 
        height:18px;
        width:148px;
 }

     .watermarked { 
        height:20px;
        width:150px;
        padding:2px 0 0 2px;
        border:1px solid #BEBEBE;
        background-color:#F0F8FF;
        color:Gray;
}
</style>
</head>
</html>

<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:TextBox ID="TextBox1" runat="server" CssClass="unwatermarked"></asp:TextBox>
<asp:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server"  
    Enabled="true" TargetControlID="TextBox1"  WatermarkCssClass="watermarked"    
    WatermarkText="email-Id">
</asp:TextBoxWatermarkExtender>
</asp:Content> 
```

如果有人知道任何解决方案，请尽快让我知道。

谢谢， 阿文尼什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:44:14.680

试试这个。

```
<asp:TextBox ID="passwordId" runat="server"
  placeholder="Please enter UserName"></asp:TextBox>

<asp:TextBox ID="usernameId" runat="server"
  placeholder="Please enter password"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:45:24.970

您可以为此使用占位符，请注意并非所有浏览器（早期浏览器）都支持它，但它适用于大多数常见浏览器。Visual Studio 也会在代码中将其报告为错误 lol。

```
<asp:TextBox ID="TextBox1" runat="server" Placeholder="enter some text here" CssClass="unwatermarked"></asp:TextBox> 
```

您也可以输入文本作为实际值，然后使用 jQuery 将其全部选中

```
 <asp:TextBox ID="TextBox1" runat="server" value="enter some text here" CssClass="unwatermarked"></asp:TextBox>

$("#TextBox1").on("click",function() {
    $(this).select();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:53:42.997

为了使用`AjaxControlToolkit`，您首先需要在 web.config 或单个页面中注册程序集。为您添加

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="act" %> 
```

到您的页面顶部以下`Page`指令并`TextBoxWatermarkExtender`用作：

```
<asp:TextBox ID="TextBox1" runat="server" CssClass="unwatermarked"></asp:TextBox>
        <act:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server"
            Enabled="true" TargetControlID="TextBox1" WatermarkCssClass="watermarked" WatermarkText="Enter your email id">
        </act:TextBoxWatermarkExtender>
        <br />
        <br />
        <asp:TextBox ID="TextBox2" runat="server" CssClass="unwatermarked"></asp:TextBox>
        <act:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender2" runat="server"
            Enabled="true" TargetControlID="TextBox2" WatermarkCssClass="watermarked" WatermarkText="Enter your password">
        </act:TextBoxWatermarkExtender> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-17T16:11:31.900

你的代码很完美，唯一的错误就在这里：

“asp:TextBoxWatermarkExtender”应该是：“ajaxToolkit:TextBoxWatermarkExtender”

当然，您必须打开 Nuget 包管理器并在您的项目中安装 AjaxControllToolkit。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TextBoxWatermark.aspx.cs" Inherits="ControlesAjax2.TextBoxWatermark" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style>
        .unwatermarked {
            height: 18px;
            width: 148px;
        }

        .watermarked {
            height: 20px;
            width: 150px;
            padding: 2px 0 0 2px;
            border: 1px solid #BEBEBE;
            background-color: #F0F8FF;
            color: Gray;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender2" runat="server"
                Enabled="true" TargetControlID="TextBox1" WatermarkCssClass="watermarked"
                WatermarkText="email-Id"></ajaxToolkit:TextBoxWatermarkExtender>
        </div>
    </form>
</body>
</html> 
```

来源：[http ://www.ajaxcontroltoolkit.net/TextBoxWatermark/TextBoxWatermark.aspx](http://www.ajaxcontroltoolkit.net/TextBoxWatermark/TextBoxWatermark.aspx)

# java - 在 Spring MVC 应用程序中使用 bean 范围的最佳实践

> ID：15763173
> 
> 赞同：7
> 
> 时间：2013-04-02T11:39:41.420
> 
> 标签：java, spring, model-view-controller, scope, javabeans

我在很多地方都看到过，Spring 应用程序的 DAO 和服务类应该是**单例**范围的。
在我的应用程序中，我有以下服务类

```
@Service
public class CustomerServiceImpl implements CustomerService {

    @Autowired
    private CustomerDAO customerDAO;

    .......
    parameterised methods only....
} 
```

和一个 DAO 类

```
@Repository
public class CustomerDAOImpl implements CustomerDAO {

@Autowired
private SessionFactory sessionFactory;

...............
parameterised methods only....
} 
```

因为我没有定义任何范围，所以默认范围是单例的。所以 CustomerService 和 CustomerDAO 将只在每个容器中实例化一次。此外，DAO 类将在开始时仅自动连接到服务类一次。因为它是这将是一个***请求繁重***的Web 应用程序，这意味着（**或者**这是否意味着**？**）*数百个线程将使用这两个类的相同实例。*

那么在这种情况下如何保证**线程安全呢？**
那么xml中定义的hibernate sessionfactory bean的范围呢？

我对 spring mvc 应用程序中的 bean 范围和线程安全感到非常困惑。Springsource 文档没有为 Web 应用程序清楚地解释这些。

任何人都可以向我解释使用 bean 范围（用于 DAO、Service、Controller 和其他 bean）来处理重请求 Web 应用程序的最佳实践吗？
任何解释这些的链接都会感谢我。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:49:06.787

只要您的服务和 DAO 单例不保持状态（不保持实例变量 - 其他 bean 除外 - 在方法内部操作），线程安全就没有问题。

关于会话工厂，spring web-app 中默认的休眠会话范围基于“每个请求一个休眠会话”模式，这意味着您将为每个 http 请求（线程）拥有一个会话，因此无需担心并发性两者都不。

# iphone - Phonegap：强制应用退出而不是在后台运行

> ID：15763177
> 
> 赞同：3
> 
> 时间：2013-04-02T11:40:04.363
> 
> 标签：iphone, ipad, cordova, quit

我正在通过 Phonegap 开发 iPhone/iPad 应用程序，有没有办法实现一种“单击此处退出应用程序”？我的意思是真正退出，而不是“将其置于后台并转到主屏幕”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:53:01.537

您可以使用以下代码在点击时调整您的应用程序，

```
device.exitApp() 
```

或者

```
navigator.app.exitApp() 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:49:31.090

> 有没有办法实现一种“单击此处退出应用程序”？

是的，有一种方法可以真正退出应用程序并终止其进程。

***但永远不要那样做。***不仅因为如果您这样做，Apple 会拒绝您的应用程序。这样做的问题是糟糕的用户体验。iOS 不是桌面操作系统。您有一个用于离开应用程序的主页按钮（同样，应用程序无法完全退出是有原因的）。

从概念上讲，窗口大小不足以维持一个无关紧要的 44x44 像素框架（根据 Apple 的人机界面指南，44 像素是可以舒适触摸的最小尺寸），仅用于退出。

但是，如果您在本次讲座结束后仍想退出，有几种方法：

```
exit(0);
pthread_kill(pthread_self()); // on the main thread
[[UIApplication sharedApplication] terminateWithSuccess]; 
```

等等。其中一些可能在PhoneGap中有一个绑定（如果没有，你自己写一个很容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:52:58.190

您不应该这样做，因为这可能会被视为违反 iOS 人机界面指南，导致您的应用被拒绝。

```
Always Be Prepared to Stop

**Save the current state when stopping at the finest level of detail possible so that people don’t
lose their context when they start the app again.** For example, if your app displays scrolling data,
save the current scroll position. To learn more about efficient ways to preserve and restore your
app’s state, see “State Preservation and Restoration”. 
```

苹果指南链接：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T14:00:40.003

在应用程序的 plist 中

```
 UIApplicationExitsOnSuspend = TRUE 
```

当用户点击主页按钮时，应用程序将退出。不需要按钮，不需要 exit()。

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW23](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW23)

# c++ - 窗体头文件中的“错误 C2653：系统不是类或命名空间名称”，Visual C++

> ID：15763179
> 
> 赞同：4
> 
> 时间：2013-04-02T11:40:11.333
> 
> 标签：c++, visual-studio-2010, visual-c++

我之前关于同一个项目的问题：[一](https://stackoverflow.com/questions/15758851/unresolved-external-sybol-in-referenced-library-visual-c)和[二](https://stackoverflow.com/questions/15761567/how-reference-a-lib-file-native-c-in-a-visual-c-project)。没有必要阅读它们；只知道我正在尝试在 Visual C++ 项目中使用本机 C++ SDK。这比我最初想象的要棘手得多，但是这个关于[使用托管代码扩展本机 C++ 项目的](http://msmvps.com/blogs/vandooren/archive/2008/09/03/extending-a-native-c-project-with-managed-code.aspx)网站已经对我有很大帮助。

根据最后一个链接的说明，我已将一个表单添加到我的本机 C++ 项目中，该项目已自动将项目转换为 CLR 项目。不过，只有`MainForm.cpp`and `Interface.cpp`（允许本地 C++ 代码创建和显示 MainForm 的文件）是用`/clr`标志编译的；其他文件保持原生。

我现在遇到的问题是 Visual Studio 似乎无法识别`MainForm.h`. 因此，在以下几行中：

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing; 
```

这个词`System`总是用红色下划线，有相应的错误：

```
error C2653: 'System' is not a class or a namespace name 
```

对于每一行。

它也不识别单词`gcnew`和其他应该在 CLR 中毫不费力地工作的东西。

谁能告诉我我可能做错了什么？我的猜测是它非常小。一些我忘记更改的标志，缺少参考或类似的东西，但我就是不知道它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:05:23.147

你在哪里包括`MainForm.h`- 直接和间接？
如果您包含`MainForm.h`in `Interface.h`，则您也将其间接包含在您包含的任何位置`Interface.h`。这意味着，如果您随后在`Interface.h`任何未使用.`/clr``namespace System``gcnew`

因此，您应该`MainForm.h`只在.in 中包含`Interface.cpp`和使用前向声明`Interface.h`。

# c# - 从后面的 ascx 页面代码调用 Javascript 函数

> ID：15763183
> 
> 赞同：3
> 
> 时间：2013-04-02T11:40:20.063
> 
> 标签：c#, javascript, asp.net

我正在使用下面的客户端脚本将值传递给 javascript 函数。它在 aspx 页面中工作正常，但在 ascx 页面中，它不起作用。请帮我解决这个问题。

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "tabmvng", "<script language='javascript'>SetActiveTab(3); </script>", false); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-24T09:52:10.970

试试这个，都是因为UserControl，你不再和一个Page打交道了。

```
 ScriptManager.RegisterClientScriptBlock(this.Page, typeof(UpdatePanel), UniqueID, "myFunction('" + parameter + "');", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:45:57.890

尝试以下

```
<script type='text/javascript'>
function SetActiveTab(a){
alert(a);
}
</script>

ScriptManager.RegisterStartupScript(this, this.GetType(), "tabmvng", "SetActiveTab(3);", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:10:33.297

```
Control Caller = this; //user control
string MyScript= "SetActiveTab(3);";
ScriptManager.RegisterStartupScript(Caller, typeof(Caller), "Script Name", MyScript), true); 
```

通过脚本管理器在从该用户控件向 Page 对象添加脚本时遇到问题，请使用对调用用户控件的引用。此外，它将为您包装脚本，因此无需添加脚本标签。

编辑注意：我假设这个函数存在于你的脚本中的某个地方：`SetActiveTab(3);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T06:57:10.360

```
ScriptManager.RegisterStartupScript(this.Page, typeof(System.Web.UI.Page), "javascript", "YourScript", true); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-11-23T21:44:32.823

我遇到了同样的问题，即 Javascript 不在 html 输出中。事实证明，如果您是从 ascx （控件）执行此操作，则必须传递对控件的引用，例如**Me**。

```
ScriptManager.RegisterStartupScript(Me, GetType(Page), Guid.NewGuid().ToString(), jscript, True) 
```

在那之后，一切都开始工作了！谢谢马克舒尔泰斯！

# jquery - jQuery ScrollTo 活动按钮

> ID：15763198
> 
> 赞同：1
> 
> 时间：2013-04-02T11:41:42.963
> 
> 标签：jquery, web, scrollto

我的网站[http://www.iancockram.com](http://www.iancockram.com)是一个单页作品集。我要解决的问题是我希望突出显示处于活动状态的菜单按钮。

我试图配置它，但永远无法让它工作..

```
 **JQUERY**
    //scrollTo
    $(document).ready(function(){
    $('nav ul li a').click(function(){
    var el = $(this).attr('href');
    var elWrapped = $(el);
    scrollToDiv(elWrapped, 86);
    return false;
    });

    function scrollToDiv(element,navheight){
    var offset = element.offset();
    var offsetTop = offset.top;
    var totalScroll = offsetTop-navheight;
    $('body,html').animate({
            scrollTop: totalScroll
    }, 500);
    }
    });//scrollTo end

    **HTML**
    <nav>
    <ul id="top-menu">
      <div id="logo"><img src="furniture/logo.png" width="242" height="90" alt="iancockram.com" title="iancockram.com"></div>
      <li class="button"> <span class="menutext"><a href="#contact">Contact</a></span></li>
      <li class="button"> <span class="menutext"><a href="#extra">Extra</a></span></li>
      <li class="button"> <span class="menutext"><a href="#portfolio">Portfolio</a></span></li>
      <li class="button"> <span class="menutext"><a href="#about">About</a></span></li>
    </ul> 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:47:47.477

在链接的 onclick 事件上添加一些 CSS 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:47:01.753

首先，您需要为单击的元素添加相同的样式，用于 :hover。

如果您还想在滚动时突出显示菜单项，您需要设置 $(window).scroll() 事件，以检查高度是否在其中一个 div 的顶部和底部之间，并应用与之前描述的相同的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:48:40.637

添加 Css 类以单击像这样：-

```
$(document).ready(function(){
    $('nav ul li a').click(function(){
    $('nav ul li a').removeClass();
    $(this).addClass('active');
    return false;
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:27:08.457

我已经设法让 onclick 事件正常工作！！！

现在基于使用 window.scroll 函数突出显示菜单项的想法。

当我通过一个 div 时，我设法进行了警报显示。但是当传递多个 div 以影响样式时，我将如何对其进行编码？

```
$(function(){
  $(window).scroll(function(){
    var aPortfolio = $('.portfoliowrapper').height();
    if($(this).scrollTop()>=aPortfolio){
        alert('portfolio just passed.');
    }
  });
}); 
```

# objective-c - 选择后如何将选定的段文本颜色更改为突出显示状态

> ID：15763203
> 
> 赞同：0
> 
> 时间：2013-04-02T11:41:50.603
> 
> 标签：objective-c, uisegmentedcontrol

我想将选定的段文本颜色设置为白色，它将处于突出显示状态。如果我选​​择另一个段，那么选定的段文本颜色应该突出显示，它应该处于突出显示状态，直到我选择不同的段。是可能吗？我不想突出显示选定的段，但我想突出显示文本颜色，直到我取消选择或选择另一个段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:17:38.697

The answer in the below link fixed the problem.[How to change font color of UISegmentedControl](https://stackoverflow.com/questions/9029760/how-to-change-font-color-of-uisegmentedcontrol?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:45:42.917

利用`segment.tintColor = [uicolor whitecolor];`

我会帮你的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:54:16.193

使用它，其中 objectAtIndex:0 是您选择的索引。

```
for (UIView *v in [[[segment subviews] objectAtIndex:0] subviews]) {
   if ([v isKindOfClass:[UILabel class]]) {
      UILabel *lable=(UILabel *)[v retain];
      lable.textColor=[UIColor blackColor];
   }
} 
```

# python - 在python中将实例存储在变量中

> ID：15763204
> 
> 赞同：0
> 
> 时间：2013-04-02T11:41:54.687
> 
> 标签：python, input, pyqt4, instances

在我的 Pyqt4 程序中，我想更改某些按钮的快捷方式。因为我有很多我想通过用户输入访问按钮。我复制了相关的代码片段。

```
 self.btn3 = QtGui.QPushButton(self)

    b, ok = QtGui.QInputDialog.getText(self, 'Keyboard Mapping', 
            "Enter button number: ") 
```

所以用户会，比如说，输入“btn3”，然后在另一个输入对话框中，他会指定新的快捷方式。最后，我想像这样更改按钮快捷方式：

```
 self.b.setShortcut(newkey) 
```

我收到一个错误，我的 QMainWindow 类没有属性“b”。

有没有办法将实例存储在变量中？或者也许读取变量或什么？如果你能帮助我，我会很高兴...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:52:41.400

`b`这里的问题是，当您执行查找时，python 不会从中获取值`self.b.setShortcut(newkey)`，而是仅查找名称`b`。

你可以做你想做的事[`getattr()`](http://docs.python.org/3.3/library/functions.html#getattr)：

```
getattr(self, b).setShortcut(newkey) 
```

然而，这是一种糟糕的风格，通常会不安全并导致问题。相反，创建一个适合您需要的数据结构 - 在这里创建一个字典是有意义的，例如：

```
self.widgets = {"btn3": QtGui.QPushButton(self)}
...
self.widgets[b].setShortcut(newkey) 
```

# php - 导入 XML Google 电子表格 - 帮助我编写 PHP 代码

> ID：15763208
> 
> 赞同：1
> 
> 时间：2013-04-02T11:42:08.637
> 
> 标签：php, mysql, import, phpmyadmin

我遇到了将我的 DB-Users 导入谷歌电子表格的要求。

我在下面的指令的帮助下做了一个代码。 [http://www.distilled.net/blog/distilled/guide-to-google-docs-importxml/#chapter4](http://www.distilled.net/blog/distilled/guide-to-google-docs-importxml/#chapter4)

现在我可以使用下面的代码获取我所有的 DB-Users。

```
=importxml("http://mydomain.com/v5/admin/export_google.php","//tr") 
```

如果我将上面的代码粘贴到谷歌电子表格中，我可以在我的电子表格中看到我所有的 DB-Users。

现在，就安全而言

[http://mydomain.com/v5/admin/export_google.php](http://mydomain.com/v5/admin/export_google.php) -> 如果我在浏览器中输入这个 url，那么我可以看到所有的 db 用户。

我需要这个文件受密码保护。只有拥有导入 db-users 代码的客户才能查看我的 db-users。

有没有办法保护文件密码（export_google.php）。我知道，我可以在我的 php 文件顶部设置用户名和密码，但如果我将代码粘贴到谷歌电子表格中，这样做将不起作用。

有人可以帮帮我。

换句话说 - 我的客户拥有代码 ie =importxml(" [http://mydomain.com/v5/admin/export_google.php](http://mydomain.com/v5/admin/export_google.php) ","//tr") 可以在 google-spreadsheet 中获取 db-users。其他人不应该使用 php 文件获取我的 db-users 的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T08:49:40.773

你只需要在你的请求中添加一些 GET var 并在你的脚本中检查它。像这样：

```
=importxml("http://example.com/v5/admin/export_google.php?pass=mypass","//tr") 
```

在 PHP 脚本中：

```
if (isset($_REQUEST['pass']) && $_REQUEST['pass'] == 'mypass') {
  // your code here
} 
```

# jquery - jquery用另一个替换一个div

> ID：15763209
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:11.777
> 
> 标签：jquery

在下文中，我想删除类“item1”并将类 item2 添加到 maindiv。下面的代码不起作用。代码有什么问题，如何在 maindiv 中包含 item2？

HTML：

```
<div class="item2"><a href="#" id="item2">item2</a></div>
<div class="maindiv">
    <div class="item1"> <a href="#" id="item1">item1</a></div>
</div> 
```

jQuery：

```
if (selection) {
    if ($('.maindiv').hasClass('item1')) {
        $('.maindiv').removeClass('item1').addClass('item2');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:44:04.240

在您的示例中，`.maindiv`没有名为 的类`item1`，它有一个 具有该类的*子* 类。你正在测试*它*是否有它。

您可能需要修改为：

```
if($('.maindiv > div').hasClass('item1')) {
    $('.maindiv > div')
        .removeClass('item1')
        .addClass('item2');
} 
```

或者

```
if($('.maindiv .item1').length > 0) {
    $('.maindiv .item1')
        .removeClass('item1')
        .addClass('item2');
} 
```

...无论您发现哪个更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:48:03.697

您必须像定位内部 div

```
 $(document).ready(function() {
       if(selection) {
           $('.maindiv .item1').removeClass('item1').addClass('item2');
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:45:25.807

该`.hasClass()`函数检查它被调用的元素是否具有该类（在您的情况下它没有）。它不检查这些元素是否包含具有该类的元素。

`<div class="item1">`并且`<div class="item2">`是*元素*，而不是类；`item1`并且`item2`是这些元素的类。您似乎对什么是类以及`.hasClass()`,`.addClass()`和`.removeClass()`函数的作用感到困惑，因此我建议您返回并涵盖基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:47:24.160

`$('#maindiv').find('item1')`而不是你可以链接它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T11:51:43.493

使用 id 比较器获得更好的解决方案，例如

项目1

```
<div class = "maindiv"> 
<div id="test" class = "item1" >  <a href="#" id="item1">item1</a> </div>
</div>

if(selection)
            {             
                if ( $('#test').hasClass('item1') ) {
                            $('#test').removeClass('item1').addClass('item2');

                }

            } 
```

# c++ - MurmurHash 函数的行为不是确定性的

> ID：15763213
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:34.397
> 
> 标签：c++, c, hash

我在 C/C++ 中使用 murmurhash 函数，就像这里提出的那样：[https](https://sites.google.com/site/murmurhash/) ://sites.google.com/site/murmurhash/ (MurmurHash2.cpp)。我在不同的键上多次调用此方法。但是，这种行为不是确定性的。有时对于相同的键，我会得到不同的结果（相同的键，相同的长度，相同的种子，不同的返回值）。我对其进行了调试，似乎与以下行有所不同：

```
line 33: unsigned int k = *(unsigned int *)data; 
```

在该行之后，该方法的相同输入有不同的 k 值，这也会导致返回的最终 h 不同。

我是不是误会了什么？导致这种行为的问题可能是什么？提前致谢！

有关调用的更多详细信息：

调用来自 Lua 代码，Lua 代码调用具有以下签名的 C 函数：

```
int preparehash(lua_State *L) 
```

然后，该函数从 Lua 堆栈中读取参数并调用以下使用 MurmurHash2 的函数：

```
unsigned int hashing(const char *a, unsigned int seed) {
        int len = (int)sizeof(a);
        unsigned int b = MurmurHash2(a,len,seed);
        return b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:52:26.357

您没有向我们展示 的类型`data`，但那行

```
unsigned int k = *(unsigned int *)data; 
```

看起来从根本上是错误的，并且可以解释为什么您会看到不同的值。如果`data`与 的宽度不同`unsigned int`或对齐方式不同，则某些字节`k`可能会收到一些垃圾，这些垃圾恰好位于 的高位字中`*data`。

# jquery - 使用jQuery自动清除x div后的浮点数？- 例如可变高度打破设计

> ID：15763217
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:42.013
> 
> 标签：jquery, css

好的，对于我的内部内容，例如 4 x 列布局 - 向左浮动，设置宽度......所以它们彼此相邻......

麻烦的是您在该集合中添加了更多元素，例如第 5 或第 6 个元素（例如新行）-...如果前 4 列的高度不同，则第二行全部未对齐，如您所料...所以我'我写信问，是否有 jQuery 方式（或者可能是其他方式） - 这将允许您在一个 div 内的 x 个 div 之后添加一个“clear:both”（在这种情况下，在 4 个 div 之后清除该行）。 .. 很多内容将从数据库中自动提取，所以我没有手动添加 clear:both 的选项。

希望这是有道理的，这是我的第一篇文章，所以请告知我是否做错了什么，或者可以更好地解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:51:03.383

```
$('div:nth-of-type(4n)').append('<div style="clear:both;"></div>'); 
```

那是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:02:04.480

您可以通过切换到使用`display: inline-block`而不是浮动来响应地执行此操作而无需 JS。

[http://codepen.io/cimmanon/pen/dwbHi](http://codepen.io/cimmanon/pen/dwbHi)

```
.gallery {
  margin: -10px 0 0 -10px;
  overflow: hidden;
}

.gallery img {
  margin: 10px 0 0 10px;
  display: inline-block;
  vertical-align: text-top;
}

  <div class="gallery">
    <img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x120" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x140" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x130" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/180x100" /><!--
    --><img src="http://placehold.it/200x90" />
  </div> 
```

# html - 精美的上传器 - 自由格式 - 表达引擎

> ID：15763218
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:44.283
> 
> 标签：html, expressionengine, fine-uploader, freeform

我有一个在“自由格式”中创建的表单，它使用“文件浏览”输入来允许人们上传图像文件。事情是我们想向用户提供一些关于文件上传了多少的反馈，所以我认为使用“精细上传器”将是一个好的开始。我们还使用“表达引擎”作为我们的 CMS。

问题是我不知道如何使用“EE”或“自由格式”来实现“精细上传器”。有没有人有任何提示？我可以在“输入文件”标签周围加上精美的上传器吗？以及如何将“精细上传器”引导到我们的“自由格式”ee 扩展？

任何帮助，将不胜感激！:D

谢谢！

* * *

我们目前工作的一个例子..

```
{exp:freeform:form                                
form:name="photocomp"
form_name="photo_contest_2013"
form:id="2"
ajax="no"
error_page="forms/submit_errors" 
matching_fields="email"
return="forms/submit_success"
}
<input class="required" type="text" class="input_large" name="first_name" id="first_name" placeholder="First Name">

<input type="file" name="upload_photo_1[0]" id="upload_photo_10" size="40">

<button class="altButton" value="donate" type="submit" name="submit" title="submit">Let's do this!</button>

{/exp:freeform:form} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:14:56.023

我不确定 Fine Uploader 能否在这里为您提供帮助，因为它不清楚如何或即使它可以与 FreeForm 集成。您可能需要与 FreeForm 的人员讨论您的要求。Fine Uploader 需要将文件发送到 FreeForm 的服务器（我假设），并且 FreeForm 必须根据 Fine Uploader 定义的响应约定进行响应（例如 {success: true}）。

# python - SimpleCV 未正确导入

> ID：15763219
> 
> 赞同：2
> 
> 时间：2013-04-02T11:42:44.767
> 
> 标签：python, opencv, simplecv

我刚刚完成了 SimpleCV 及其所有依赖项的安装，但在运行它时遇到了问题。如果我只是使用这个：

```
import SimpleCV 
```

我没有收到任何错误，但是当我尝试时：

```
from SimpleCV import Camera 
```

我得到错误：

```
ImportError: cannot import name Camera 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:31:26.293

如果您尝试使用 Eclipse 中的 SimpleCV 并且遇到这些错误，也许您可​​以尝试我在此问题的答案中发布的说明：[SimpleCV Code Completion with Eclipse](https://stackoverflow.com/questions/11272914/simplecv-code-completion-with-eclipse/15843153#15843153)我将在此处为您粘贴相同的信息：

我修复他们的导入的尝试是从他们的 init.py 文件中删除所有这些 import *，这有助于解决它在 eclipse 中出现的代码完成延迟。然后将SimpleCV egg 目录（C:\Python27\Lib\site-packages\simplecv-1.3-py2.7.egg）作为外部库导入eclipse。在那之后，我能够运行这个：

```
from SimpleCV.ImageClass import Image 
```

导入颜色也是如此：

```
from SimpleCV.Color import Color 
```

有周期性进口，所以要小心那些，因为它们可能会咬你。在导入 SimpleCV.ImageClass 之前尝试导入 SimpleCV.Color 时，我自己也有过一个。请注意，通过上述说明，我似乎能够从 Eclipse 获得代码完成。

# android - 如何从传递字符串值的适配器类调用 AsyncTask？

> ID：15763220
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:45.803
> 
> 标签：android, android-asynctask

使用适配器类在我的列表视图中的文本视图和按钮。当我单击该按钮时，我必须调用 AsyncTask 传递参数，即适配器类 getview 方法中该特定位置的字符串。这里创建了我的 Asynctask 是另一个类，即活动类。请提供一些例子。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:46:43.883

你`AsycnTask`需要`Array`某种类型的 -`Strings`例如，所以当你实例化 时，你只需像这样`AsyncTask`传递它：`Array`

```
String[] arr = new String[] {"A string to pass..."};
MyAsyncTask task = new MyAsyncTask();
task.execute(arr); 
```

有关如何使用它的完整示例：

[http://www.android-ever.com/2012/10/android-asynctask-example.html](http://www.android-ever.com/2012/10/android-asynctask-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:47:51.940

在不同的文件或您的活动中创建公共课程。如果您在 Activity 中创建，那么像这样定义

```
public class static MyAsync extends AsyncTask<String, Void, String>{
} 
```

然后像这样在任何地方使用

```
YourActivity.MyAsync myAsync = new YourActivity.MyAsync(); 
```

将值传递给您的 Async 类使用这种方式

```
myAsync.execute(yourstring); 
```

像这样访问 doInBackground

```
public String doInBackground(String... param){
    String s = param[0]; // here you can access  you string like this way
} 
```

# c# - C# Outlook 与收件箱和已发送项目相关

> ID：15763221
> 
> 赞同：3
> 
> 时间：2013-04-02T11:42:49.487
> 
> 标签：c#, outlook-2007

我正在开发一个软件，我可以在其中检索收件箱并从 Outlook 发送项目。我想要做的是将收件箱电子邮件与回复联系起来（如果有人回复了该电子邮件）。列表应按此顺序显示

Sender@abc.com 接收主题接收时间 sender@abc.com 回复主题 发送时间

我打算做的是检索一个数据表中的收件箱项目和另一个数据表中的已发送项目。它根据发件人电子邮件和主题逐一读取电子邮件，然后在已发送项目中搜索该发件人和电子邮件，如果匹配，则将其合并到第三个数据表中。

还有其他更好的方法吗？

这是代码：

```
 private DataTable GetInboxItems()

    {
        DataTable inboxTable;
        //try
        //{
        filter = "[ReceivedTime] >= '" + dtpStartDate.Value.ToString("dd/MM/yyyy 12:00 AM") + "' and [ReceivedTime] <= '" + dtpEndDate.Value.ToString("dd/MM/yyyy  11:59 PM") + "'";
        Outlook.Application outlookApp = GetApplicationObject();
        Outlook.Folder root = outlookApp.Session.DefaultStore.GetRootFolder() as Outlook.Folder;
        EnumerateFolders(root);
        //string filter = "[ReceivedTime] > '" + dtpStartDate.Value.ToString("dd/MM/yyyy") + "'";

        //inbox
        Outlook.MAPIFolder inboxFolder = outlookApp.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox);
        inboxTable = CreateTable();
        int count = 0;

        if (inboxFolder.Items.Count > 0)
        {

            var restrictedItems = inboxFolder.Items.Restrict(filter);
            restrictedItems.Sort("[ReceivedTime]", true); //descending
            //foreach (var item in inboxFolder.Items)
            foreach (var item in restrictedItems)
            {
                var mail = item as Outlook.MailItem;
                if (mail != null)
                {
                    //try
                    //{
                    DataRow row = inboxTable.NewRow();
                    //row["sn"] = (++count).ToString();
                    row["sn"] = mail.EntryID + " " + mail.ReceivedByEntryID;
                    row["MailType"] = "Inbox";
                    row["SenderName"] = mail.SenderName;
                    row["SenderEmail"] = mail.SenderEmailAddress;
                    row["ReceivedDate"] = mail.ReceivedTime;
                    row["Subject"] = mail.Subject;
                    row["Body"] = mail.Body != null ? (mail.Body.Length > 25 ? mail.Body.Substring(0, 25) : mail.Body) : null;
                    //row["Body"] = mail.Body != null ? mail.Body : "";
                    row["MailSize"] = mail.Size.ToString();
                    string attachments = null;
                    if (mail.Attachments.Count > 0)
                    {
                        foreach (var attachment in mail.Attachments)
                        {
                            if (((Outlook.Attachment)attachment) != null)
                                //attachments = ((Outlook.Attachment)attachment).FileName + " " + ((Outlook.Attachment)attachment).Size.ToString() + ", ";
                                attachments += (((Outlook.Attachment)attachment).Size / 1024).ToString() + " KB, ";
                        }
                    }

                    row["AttachmentCount"] = mail.Attachments.Count;
                    if (attachments != null)
                        row["AttachmentSize"] = attachments.Substring(0, attachments.Length - 2);

                    inboxTable.Rows.Add(row);
                }
                //catch (Exception ex)
                //{

                //    return null;
                //}

            }
        }

        return inboxTable;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:30:57.423

我在 Outlook 加载项中制作了这种东西

没有 100% 的方法可以做到……
问题是对话 ID 并不总是由其他软件保存。因此，您需要使用一组数据将电子邮件链接到他们的答案：
- Message-ID：这在电子邮件标题中可用。已发送的项目没有这个：/
- In-Reply-To：这也在电子邮件标题中
- 主题 ID

对于主题 ID，我按以下顺序检索值（我取第一个可用的值）：
- MailItem.ConversationIndex：每个回复都将字节添加到对话索引
- 参考标头

然后，我使用 topicID 将电子邮件链接到他们的回复，电子邮件的前 X 个字符与回复相同。示例原始电子邮件主题 id = abc，回复 = abcdef 对于无法使用对话 id 链接的所有邮件，我尝试使用 Message-ID 和 In-Reply-To ID 进行链接

问题尤其来自 Outlook 发送的电子邮件（没有 Message-ID），然后用户回复没有 Reference/ConversationIndex 标头......您将无法将两封邮件链接在一起。

希望能帮助到你

**编辑**：这是一些代码。我已经从不同的类/方法复制/粘贴代码来创建一个方法，所以它可能无法编译。将其更多地视为伪代码。

```
public SimpleTree<MailData> CreateTree(List<MailData> mails)
{
    mails.Sort((m1, m2) => m1.TopicId == m2.TopicId ? m2.CreationDate.CompareTo(m1.CreationDate) : m1.TopicId.CompareTo(m2.TopicId));

    var tree = new SimpleTree<MailData>();

    var i = 0;
    while (i < mails.Count)
    {
        var node = tree.Children.Add(mails[i]);
        var topicId = mails[i].TopicId;
        var start = i + 1;
        while (start < mails.Count 
            && !string.IsNullOrEmpty(topicId) 
            && !string.IsNullOrEmpty(mails[start].TopicId) 
            && mails[start].TopicId.StartsWith(topicId))
        {
            node.Children.Add(mails[start]);
            start++;
        }
        i = start;
    }

    // Handle email where TopicId are different, but ParentId is filled with correct value
    for (int j = tree.Children.Count - 1; j >= 0; j--)
    {
        var child = tree.Children[j];
        if (child.Children.Count == 0 && !string.IsNullOrEmpty(child.Value.ParentId))
        {
            var parentNode = tree.FindNode(s => s != null && s.MessageId == child.Value.ParentId);
            if (parentNode != null && parentNode != child)
                parentNode.Children.Add(child);
        }
    }

    return tree;
} 
```

MailData 是一个包含 3 个字段的类，如前所述：

*   MessageID（来自 Message-ID 标头）
*   ParentId（来自 In-Reply-To 标头）
*   TopicId（来自 ConversationIndex 或 Reference 标头）

SimpleTree<> 是一个创建树的类，它实际上是一个带有子节点的节点。这里没有什么特别的或与电子邮件相关的。.Value 属性指的是与节点关联的数据（此处为 MailData）

目标是对 TopicId 进行排序，以便我们可以在 1 个循环中构建树然后我检查树根中的所有邮件，以检查是否可以使用 MessageId/ParentId 将它们移动到另一个邮件下

请记住，它创建了一个单级树，例如：

*   邮件 A
    *   回复 AA
    *   回复 AAA
*   邮件 B
    *   回复 BB
    *   回复 BBB

但是你需要这样的东西：

*   邮件 A
    *   回复 AA
        *   回复 AAA
*   邮件 B
    *   回复 BB
        *   回复 BBB

# java - 如何在不知道类的情况下使用反射将值设置为一个设置器方法？

> ID：15763223
> 
> 赞同：0
> 
> 时间：2013-04-02T11:42:57.843
> 
> 标签：java, jakarta-ee, reflection

我是java反射的新手。我将直接提出这个问题。

这是我的课

```
public class RequestClass{

@XmlElement(name="Request")
private Request mRequest;

public Request getRequest() {
    return mRequest;
}

public void setRequest(Request request) {
    this.mRequest= request;
} 
```

这是我的另一个类我在这里传递 RequestClass 对象

```
//The supplied requestObject is of type RequestClass
Object initialize(Object requestObject) { 
    //requestObject
} 
```

在这段代码中，我想动态地操作`request`. `RequestClass`我不知道如何进一步进行，所以如果有人可以提供一些指导，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:45:06.090

尝试这个`requestObject.getClass().getMethod(method_name).invoke(requestObject);`

此外，还有一个`getMethod`&的重载`invoke`，通过它您可以将参数传递给该方法（如在 setter 中）

# hadoop - Hadoop分布式缓存：找不到文件异常

> ID：15763227
> 
> 赞同：2
> 
> 时间：2013-04-02T11:43:18.970
> 
> 标签：hadoop, mapreduce, distributed-cache

我正在尝试在 MapReduce 上实现 K-means。我已将初始质心文件上传到分布式缓存

在司机班

```
DistributedCache.addCacheFile(new URI("GlobalCentroidFile"),conf); 
```

在我的映射器类

```
Path[] localFiles = DistributedCache.getLocalCacheFiles(job);
File file = new File(localFiles[0].getName());
System.out.println(" File read is "+localFiles[0].getName());
BufferedReader bufferedReader = new BufferedReader(new FileReader(file));       
System.out.println("Goin in while loop");
    ....
   // some code omitted
    ....
    } catch (IOException e) {
        System.out.println("\n"+e);
    } 
```

$HADOOP_HOME/logs/ 中的输出是

```
File read is localhostGlobalCentroidFile
java.io.FileNotFoundException: localhostGlobalCentroidFile (No such file or directory) 
```

当我做

```
ganesh@ganesh-PC:~/Desktop$ hadoop fs -ls

Warning: $HADOOP_HOME is deprecated.

Found 4 items

-rw-r--r--   1 ganesh supergroup         26 2013-04-02 16:15 /user/ganesh
/GlobalCentroidFile

-rw-r--r--   1 ganesh supergroup         18 2013-04-02 16:16 /user/ganesh
/GlobalCentroidFile1

-rw-r--r--   1 ganesh supergroup        672 2013-04-02 16:15 /user/ganesh/input

drwxr-xr-x   - ganesh supergroup          0 2013-04-02 16:16 /user/ganesh/output

ganesh@ganesh-PC:~/Desktop$ hadoop fs -cat GlobalCentroidFile

Warning: $HADOOP_HOME is deprecated.

2.3    4.3

34.4    33.3

45.5    34 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:00:24.367

以下应该是您的代码。您正在尝试使用不起作用的普通 java 文件读取结构读取 HDFS 中可用的文件。

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(conf);
int bytesRead = 0;
byte[] buffer = new byte[2048];
Path inFile = new Path(argv[0]);
if (fs.exists(inFile)) {
    FSDataInputStream in = fs.open(inFile);
    while ((bytesRead = in.read(buffer)) > 0) {
        // Read Logic
    }
    in.close();
} 
```

# actionscript-3 - 移动应用程序中的 TabbedViewNavigator

> ID：15763228
> 
> 赞同：0
> 
> 时间：2013-04-02T11:43:19.233
> 
> 标签：actionscript-3, air, tabbed-view

我有一个移动应用程序并尝试设置一个包含 TabbedViewNavigator 的主视图。此导航器包括两个 ViewNavigator 项，即登录和设置。

这是我想在页面导航到第三个视图时删除此导航器的主要问题（例如登录导航到主视图）。我只想在一个简单的视图中使用导航器，而不是应用程序的两个视图。

我创建了一个 MasterView 实例并尝试`navigator.enabled=false`在登录视图中但是，这将返回导航器的空实例

> 是否有任何解决方案可以在某些 spark 视图中删除此导航器？我必须在两个视图中都使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:06:48.917

任何 spark View 都有 tabBarVisible 属性，并且设置`tabBarVisible = false;`简单。

也可以使用`TabbedViewNavigator.hideTabBar()`和`TabbedViewNavigator.showTabBar()`方法来控制可见性。

# c# - caliburn.micro、Bootstrapper 和 CompositionRoot

> ID：15763230
> 
> 赞同：0
> 
> 时间：2013-04-02T11:43:29.440
> 
> 标签：c#, caliburn, compositionroot

我试图了解 CompositionRoot 的含义。

到目前为止，我从未找到关于它是什么的深入描述，只是对不应该做什么的简短陈述。

使用 caliburn.micro 时出现的 Bootstrapper 是否已经意味着“CompositionRoot”？

或者它更接近于 servicelocator 反模式，因为它只能提供程序集内部的任何内容及其依赖项。

如果有人对 CompositionRoot 有很好的描述，请分享。我已经知道 ploeh 博客了。

如果我看到 CompositionRoot 带来更好的架构和/或帮助我解决问题，我仍然愿意购买这本书。但是我知道周围没有足够的信息让我看看它会有什么帮助。

**更新**

假设我所有的 ViewModel 都注入了​​ EventAggregator（构造函数注入）。现在我想在需要时动态创建这些 ViewModel。我可以预先注册类型（在 CompositionRoot 中），但以后如何解决依赖关系？据我了解，在组合根之后不应该触及容器。毫无疑问，我不想在需要它们之前创建所有实例（这会使应用程序启动缓慢）。“注册-解决-发布”是这里的意思吗？（这种模式也是在 ploeh 博客中创造的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:51:00.833

我假设您已经在[http://blog.ploeh.dk/2011/07/28/CompositionRoot](http://blog.ploeh.dk/2011/07/28/CompositionRoot)上看到过 Mark 的文章。

正如它所说：

> 组合根是模块组合在一起的应用程序中的（最好）唯一位置。

这应该是：

> 尽可能靠近应用程序的入口点。

对于 Caliburn.Micro，`Bootstrapper`该类`ConfigureContainer`为您提供了一种方法来覆盖和组合您的模块。

理想情况下，只有您的组合根会引用您的 IoC 容器。

`Bootstrapper`Caliburn.Micro 将通过您的容器解析您的 shell 视图模型（如果您使用 的通用版本）。

`IoC`如果您确实需要引用组合根之外的容器，它还提供了一个静态类，该类是服务定位器（反）模式的实现。

**更新**

如果您希望在组合根之后在运行时通过容器解析类型（例如，如果您有复杂的依赖链），请使用工厂类型。

这些工厂类型也将引用您的 IoC 容器。您可以：

1.  将对容器的引用作为对工厂类型的依赖项传递
2.  在您的工厂中使用服务定位器模式（例如 Caliburn.Micro`IoC`类）
3.  一些 IoC 容器，例如 Castle Windsor 和（使用扩展）Ninject 将根据工厂接口和约定为您生成工厂类型（这是最好的选择）

# php - 如何告诉 MAMP 使用哪个版本的 PHP？

> ID：15763234
> 
> 赞同：5
> 
> 时间：2013-04-02T11:43:36.583
> 
> 标签：php, version, mamp, pecl

我已经在 MAMP 上为 PHP 安装了 PECL。不幸的是，它使用的是 php 5.3.6，这与最新版本的 PHP（今天是 5.4.10）不同。在查看 phpinfo 时，我看到它没有加载我想要的 php.ini 文件（5.3.6），它正在加载最新的文件（这是正常的）

如何告诉 MAMP 使用哪个版本的 PHP？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T11:46:38.030

检查您的首选项窗格。如果您需要特定版本，则需要手动安装它们或[查看此线程](http://forum.mamp.info/viewtopic.php?f=6&t=16801)。

![在此处输入图像描述](https://i.stack.imgur.com/OYu0G.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T14:53:59.567

**1** -[在此处下载所需版本的 PHP（列在右侧）](https://www.mamp.info/en/downloads/)。

**2** - 两种情况：

要么你有**Mamp pro**，你可以通过用户界面更改它，或者你有**Mamp 的免费版本，**并且可以实现这一点，例如`.DIS`在末尾重命名每个文件夹，`/Applications/MAMP/bin/php/`而不是重命名任何版本的 php，加上那个您将要导入并因此复制粘贴。这是因为**Mamp 的免费版本**只允许您通过用户界面查看两个最高版本的 php（[有关更多信息，请观看此视频教程，它将为您提供有关要遵循的过程的更多详细信息](https://www.youtube.com/watch?v=lHXwUXnq3Zw)）。

# android - Android：SplashScreen 背景图像不清晰

> ID：15763239
> 
> 赞同：0
> 
> 时间：2013-04-02T11:43:48.690
> 
> 标签：android, splash-screen

我做了一个带有splashscreen的android应用程序：

飞溅.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/splashnine">

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="15dp"
        android:textSize="16sp"
        android:text="test" />

</RelativeLayout> 
```

1333x2000 的 splashnine.png 非常清晰，但启动应用时图片不清晰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:54:44.037

首先，您应该将该图像的不同版本放到不同的`drawable`文件夹中，例如`drawable-hdpi`,`drawable-xhdpi`等。如果您只是将图像放入`drawable`文件夹中，它会作为`mdpi`图像加载，然后按比例放大。

其次，当您将图像设置为背景时，它会根据视图的大小放大或缩小。这意味着图像的质量会因为调整大小而变差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:52:45.250

也许，由于您使用带有布局大小参数的“fill_parent”，图像将根据您的设备屏幕尺寸调整大小。尝试将 fill_parent 更改为 wrap_content 或提供 DP 值。

# maven - 詹金斯和maven-compiler-plugin？

> ID：15763241
> 
> 赞同：0
> 
> 时间：2013-04-02T11:43:51.253
> 
> 标签：maven, tomcat, jenkins, maven-compiler-plugin

我在配置 Jenkins 时遇到问题，我正在从 tomcat7 [在 ubuntu 上] [从 apache 下载，未通过 apt-get 安装] 运行 jenkins。我已经从 Oracle 安装了 java。当我想构建一个项目时，maven 说 maven-compiler-plugin 导致问题：

```
 org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project npa: Compilation failure
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 
```

关键是我没有在这个版本中使用 maven-compiler-plugin，我什至没有在任何 POM 中声明这个插件！我自己不能在 pom 中添加任何东西[不要问为什么]

编辑：全栈 [ maven 中的 -X 选项]

```
14:02:37    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
14:02:37    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
14:02:37    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
14:02:37    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
14:02:37    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
14:02:37    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
14:02:37    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
14:02:37    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
14:02:37    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
14:02:37    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
14:02:37    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
14:02:37    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
14:02:37    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
14:02:37    at java.lang.reflect.Method.invoke(Method.java:597)
14:02:37    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
14:02:37    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
14:02:37    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
14:02:37    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
14:02:37    at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
14:02:37    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
14:02:37    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
14:02:37    at hudson.remoting.Request$2.run(Request.java:326)
14:02:37    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
14:02:37    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
14:02:37    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
14:02:37    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
14:02:37    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
14:02:37    at java.lang.Thread.run(Thread.java:662)
14:02:37 Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
14:02:37    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:516)
14:02:37    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:114)
14:02:37    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
14:02:37    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:54:22.223

代码无法编译。Maven 默认包含编译器插件。查看错误消息的其余部分以找出代码未编译的原因。可能与不兼容的 Java 版本有关。

编辑：您正在使用默认为 Java 1.3 选项的旧版本的编译器插件，这就是它无法编译的原因。

我怀疑 Jenkins 可能指向 Maven 2（请参阅这个问题[Maven : error: generics are not supported in -source 1.3 ，我正在使用 1.6](https://stackoverflow.com/q/7597950/116509)）。确保 Jenkins 使用正确的 Maven 3 安装。

# javascript - 是否可以仅使用客户端 Web 技术编写社交网络？

> ID：15763242
> 
> 赞同：0
> 
> 时间：2013-04-02T11:43:53.773
> 
> 标签：javascript, architecture, social-networking

我知道社交网络应用程序通常与它们存储信息和内容的服务器进行通信，但是是否有可能制作一个仅使用客户端代码开发的社交网络，基本上是前端脚本和内容？

我想我在这里没有使用正确的术语，但我希望你们中的一些人能明白我想说的话。

谢谢！>)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:05:28.127

社交网络的核心特征是将一个用户与另一个用户联系起来的数据。如果您想在没有服务器端代码的情况下进行操作来处理它，那么您需要将该逻辑移动到客户端并与其他客户端共享。

[DOM 存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)将允许您在客户端存储大量（但不是很大，因此您可以存储的数据量受到限制）的数据量。

（尽管浏览器的用户可以自由编辑它，因此可以将其安全地排除在窗口之外）

然后，您需要在客户端之间共享该数据。这意味着[点对点](https://stackoverflow.com/questions/7022383/how-to-make-a-browser-to-browser-peer-to-peer-connection)。即便如此，我认为您需要某种方式来执行浏览器发现，以便浏览器可以相互通信，我怀疑这将迫使您拥有一个中央目录服务器。

如果你能处理所有这些，那么你可能会实现一个类似 Napster 的系统来搜索社交网络中的数据。

那么可能吗？几乎。实际的？可能不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:52:38.287

理论上？它可能是。

使用现代框架，如：[AngularJS](http://angularjs.org/) 和云存储，如：[MongoDB-as-a-Service](https://mongolab.com/welcome/)

但是我对安全性有第二个想法（没有会话，...）。让我们知道:)

# sql-server - 部署一个 asp.net mvc 应用程序的数据库

> ID：15763245
> 
> 赞同：0
> 
> 时间：2013-04-02T11:44:02.147
> 
> 标签：sql-server, asp.net-mvc-4

我是一个 php/mysql 开发者，现在我使用 asp.net mvc 和 sql server。我曾经将数据库导入脚本文件并将文件导出到我不喜欢的服务器。现在我在asp.net mvc 的网站上工作。我会告诉你我是如何想象事情的，如果有什么问题，我会告诉我：

*   使用 sql server management studio 创建数据库模型。
*   使用 Visual Studio 和实体框架导入数据库文件以创建映射类。
*   将所有文件上传到服务器，包括数据库文件，这是我项目文件夹中的本地文件。

这个步骤会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:01:50.960

我觉得你的问题太模糊了。尽量具体，包括代码和细节。

总的来说，是的，你在正确的轨道上。您正在描述一种数据库优先的方法，您首先创建数据库，然后使用实体框架生成代码。

我唯一的建议是您应该尝试将数据库抽象化——不要强迫您的应用程序只接受本地存储​​的数据库，也不要让您的应用程序只接受 SQL 数据库等。它会更容易从本地/开发数据库转移到企业级。

# asp.net-mvc - 查看不将数据传递给控制器

> ID：15763248
> 
> 赞同：0
> 
> 时间：2013-04-02T11:44:06.473
> 
> 标签：asp.net-mvc, razor, editorfor

我一直在寻找 SO 和 google 一个多星期了，但仍然无法找到有效的答案。希望有人可以帮助我。

我正在使用 asp.net (Entity Framework + Razor) 开发一个项目，我正在尝试将两个模型添加到视图中。使用 editorFor() 显示完美。现在的问题是某些部分没有将信息传递给控制器​​。

在这种情况下，每个练习都有一些答案。这是我的运动模型：

```
Table("Exercise")]
public class ExerciseModel
{

    [Key]
    public int ExerciseId { get; set; }

    [Required]
    public string Question { get; set; }

    [Required]
    public List<AnswerModel> Answers { get; set; } 
```

这是答案模型：

```
[Table("Answer")]
public class AnswerModel
{
    [Key]
    public int AnswerId { get; set; }

    [Required]
    public string Answer { get; set; }
} 
```

视图由两部分组成，练习部分（工作部分）和答案部分。我想在练习模型的列表中添加更多答案。我尝试过不同的方法。编辑器模板、部分视图等。

这是视图：您可以使用 Jquery 随时随地创建新问题并添加答案。我想要创建的是我可以将答案发布到练习模型中的该列表中。

```
@using (Html.BeginForm("CreateQuestion", "Admin", FormMethod.Post))
{
@Html.ValidationSummary(true)

//will be changed
@Html.Partial("_PartialCreateExercise")

//this shows the answers form
<div style="display: none;" id="new">
    <div class="editor-field">
            @Html.EditorFor(m => m.Answers);
    </div>
</div>

<p>
    <input name="command" type="button" id="add" value="add new answers" />
</p>
<p>
    <input name="command" type="submit" value="Create" />
</p>
} 
```

这可行，但是当我提交页面时，练习模型（类型为 AnswerModel）中的列表保持为空。最后是答案的编辑器模板：

```
@model Academy.Models.AnswerModel
@{
Layout = null;
}

<h2>Answer</h2>
<p>
    @Html.LabelFor(model => model.Answer)
    @Html.EditorFor(model => model.Answer)
</p>

The jQuery:
$(document).ready(function () {
    $("#add").click(function () {
        $('#add').after($("#new").html());
        $('#new').css("Display", "block");
    });
}); 
```

它并没有做太多，并且在那里尝试了很多，所以它变得一团糟。但是当使用调试模式时，ExerciseModel 中的 List 和 AnswerModel 都是空的。

同样，问题是在发布表单时，ExerciseModel 中的列表仍然为空。由于某种原因，我无法通过编辑器模板访问练习模型中的列表。（不包括控制器，因为它现在做的不多而且列表总是空的）

这已经让我忙了一个星期了，希望有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:19:13.063

我怀疑罪魁祸首在于您的 jQuery 代码，该代码应该动态添加新答案。你还没有展示它，所以很难说它可能有什么问题。

您应该注意的是输入字段的命名约定。Phil Haack 在[`his blog post`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)本公约中进行了说明。

基本上有两种方法可以动态添加新元素（单击时`#btnadd`）：

1.  向控制器操作发送 AJAX 调用，该操作将返回包含空模板的局部视图。应该再次尊重命名约定。这里的困难来自于索引。由于命名约定允许您使用非顺序索引（再次阅读 Phil Haack 博客文章），因此这里最简单的方法是使用 Guid 作为索引。Steven Sanderson 说明了这个概念[`his blog post`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，甚至展示了一个自定义`Html.BeginCollectionItem`助手，它就是这样做的。

2.  纯粹在客户端进行。例如，您可以使用诸如 knockoutjs 之类的框架。Steven Sanderson 再次在[`his blog post`](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/).

所以所以基本上由你来选择你喜欢的方法。但是，无论您在提交表单时选择哪种方法，如果您没有遵守 Answers 输入字段的命名约定，您在控制器操作中得到的所有内容都是空的。

# git - TFS首次签入的问题（原为git项目）

> ID：15763249
> 
> 赞同：2
> 
> 时间：2013-04-02T11:44:14.377
> 
> 标签：git, file, visual-studio-2012, tfs, service-reference

我遇到了 TFS 的一些问题。基本上我正在尝试签入最初的 VS2010 项目 (WP7)，但从那时起我们就开始使用 VS2012。我们使用 git 进行版本控制，现在想要迁移到 TFS。

现在发生的事情是服务引用以某种方式出现错误。系统正在尝试签入不再存在的文件。在开发过程中，引用被删除和替换了几次。现在，它正在尝试添加诸如 service141.xsd 之类的不存在的文件。此外，它似乎没有找到实际包含服务参考信息的文件。

它也没有找到项目中不再存在的一些 .gitignore 文件。TFS 是否以某种方式浏览 git 引用或这些幻像文件从哪里出现。因为我的迁移方法很简单，所以这对我来说很特别。1) 打开解决方案 2) 选择添加到源代码管理。

TL；DR：1）当我尝试将我的解决方案添加到 TFS（最初是一个 git 项目）时，会出现幻像文件。为什么？2）我如何摆脱这些并添加实际的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:19:26.273

TFS 查看 .csproj 文件和不同的服务参考文件，以查看在执行“将解决方案添加到 Sourcecontrol”步骤时需要将哪些文件添加到源代码管理。

我通常做的是映射解决方案所在的文件夹，然后在 Source Control 窗口中使用`Add files and folders`按钮手动将文件添加到 sourcecontrol。

然后通过直接在源代码管理资源管理器中双击`sln`文件来打开解决方案，然后在出现提示时，同意 Visual Studio 为您更新源代码管理绑定。

# objective-c - 在 NSTableView Objective-c 中拖放音频文件

> ID：15763251
> 
> 赞同：0
> 
> 时间：2013-04-02T11:44:18.783
> 
> 标签：objective-c, macos, cocoa, nstableview

我想将音频歌曲从桌面拖放到 nstableview，我尝试了以下方法，我想知道如何检查文件类型是音频以及如何将这些新文件附加到 Library.xml

```
- (NSDragOperation) tableView: (NSTableView *)tv validateDrop: (id <NSDraggingInfo>)info proposedRow: (NSInteger)row proposedDropOperation: (NSTableViewDropOperation)op
{
[tv setDropRow:[tv numberOfRows] dropOperation:NSTableViewDropAbove];
return NSTableViewDropAbove;
}

- (BOOL)tableView:(NSTableView *)tableView acceptDrop:(id <NSDraggingInfo>)info row:(NSInteger)row dropOperation:(NSTableViewDropOperation)dropOperation
{
NSPasteboard *myPasteboard=[info draggingPasteboard];
NSArray *typeArray=[NSArray arrayWithObjects:NSFilenamesPboardType,nil];
NSString *filePath,*availableType,*lastPathOfFileName;
NSArray *filesList;
int i;
availableType=[myPasteboard availableTypeFromArray:typeArray];
filesList=[myPasteboard propertyListForType:availableType];
for (i=0;i<[filesList count];i++)
{
    filePath=[filesList objectAtIndex:i];
    lastPathOfFileName=[filePath lastPathComponent];
    NSUInteger No = 1;

    [mySongsArray insertObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%ld",No],@"No",
                                @"testName",@"Name",
                                @"5.0",@"Time",
                                @"Ar.rahman",@"Artist",
                                @"hariharan",@"Album",
                                @"English",@"Genre",nil]  atArrangedObjectIndex:row];
}
testArray = [mySongsArray arrangedObjects];
NSLog(@"testArray===%@",[testArray description]);
return YES;
} 
```

# gnuplot - gnuplot 脚本和较小的乳胶符号

> ID：15763252
> 
> 赞同：2
> 
> 时间：2013-04-02T11:44:19.900
> 
> 标签：gnuplot

我通常使用 eps 乳胶终端并传递被包围的 LaTeX 符号`$$ $$`（我使用下面的脚本，我一直在编辑）。

如果我想让符号更小，使用`{\tiny ... }`它不会让步。所以我的问题是：“我如何使乳胶符号更小？”

```
set terminal epslatex color colortext size 9cm,5cm
set size 1.5,1.0
set output "potencialna_jama_6.tex"

set xtics ("$0$" 0, "$\\frac{d}{2}$" 0.5, "$-\\frac{d}{2}$" -0.5)
set ytics ("$0$" 0)

set xlabel "$x$"

set style line 1 linetype 1 linewidth 3 linecolor rgb "#FF0055"
set style line 2 linetype 2 linewidth 1 linecolor rgb "#FF0055"
set style line 3 linetype 1 linewidth 3 linecolor rgb "#2C397D"
set style line 4 linetype 2 linewidth 1 linecolor rgb "#2C397D"
set style line 5 linetype 1 linewidth 3 linecolor rgb "#793715"
set style line 6 linetype 2 linewidth 1 linecolor rgb "#793715"
set style line 7 linetype 1 linewidth 3 linecolor rgb "#b1b1b1"
set style line 8 linetype 3 linewidth 1 linecolor rgb "#b1b1b1"

set grid

set samples 7000

set key at graph .70, 0.4
set key samplen 2
set key spacing 0.8

K=1
L=1
A=1

f(x) = A*exp(K*x)
g(x) = -( A*exp(-L*0.5) )/( sin(L*0.5) )*sin(L*x)
h(x) = -A*exp(-K*x)

set xrange [-1:1]
set yrange [-3:3]

plot [-1:1] f(x) ls 1 title "$\\psi_{I}$", g(x) ls 3 title "$\\psi_{II}$", h(x) ls 5 title "$\\psi_{III}$" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:37:25.913

作为免责声明，我几乎没有使用 gnuplot 的 LaTeX 终端的经验。但是，经过一些试验和错误，我做了这样的事情：

```
set xtics ("$0$" 0, "{\\tiny $\\frac{d}{2}$}" 0.5, "$-\\frac{d}{2}$" -0.5) 
```

我使用了以下 TeX：

```
\documentclass{article}
\usepackage{graphicx}
\begin{document}
\begin {figure} 
  \begin{center} 
    \input{potencialna_jama_6} 
  \end{center} 
\end {figure}     
\end{document} 
```

瞧，我得到了一些看起来像的东西：

![在此处输入图像描述](https://i.stack.imgur.com/N03lf.png)

注意一个 x-tic 标签是如何明显小于其他标签的？显然`{\\tiny ...}`奏效了。请注意，为了 gnuplot 的利益，我需要避免领先`\`（正如您在许多其他地方所做的那样）。我也没有使用颜色，因为我的 TeX 抱怨不知道如何处理颜色，但我怀疑这有什么真正的区别。

# c - Unix 时间戳到 FAT 时间戳

> ID：15763259
> 
> 赞同：5
> 
> 时间：2013-04-02T11:44:45.803
> 
> 标签：c, datetime, time, timestamp, fat32

我试图将时间结构转换为 FAT 时间戳。我的代码如下所示：

```
unsigned long Fat(tm_struct pTime)
{
    unsigned long FatTime = 0;

    FatTime |= (pTime.seconds / 2) >> 1;
    FatTime |= (pTime.minutes) << 5;
    FatTime |= (pTime.hours) << 11;
    FatTime |= (pTime.days) << 16;
    FatTime |= (pTime.months) << 21;
    FatTime |= (pTime.years + 20) << 25;

    return FatTime;
} 
```

有人有正确的代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T11:57:56.133

```
The DOS date/time format is a bitmask:

               24                16                 8                 0
+-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+
|Y|Y|Y|Y|Y|Y|Y|M| |M|M|M|D|D|D|D|D| |h|h|h|h|h|m|m|m| |m|m|m|s|s|s|s|s|
+-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+
 \___________/\________/\_________/ \________/\____________/\_________/
    year        month       day      hour       minute        second

The year is stored as an offset from 1980\. 
Seconds are stored in two-second increments. 
(So if the "second" value is 15, it actually represents 30 seconds.) 
```

我不知道您正在使用的 tm_struct 但如果它是[http://www.cplusplus.com/reference/ctime/tm/](http://www.cplusplus.com/reference/ctime/tm/)那么

```
unsigned long FatTime = ((pTime.tm_year - 80) << 25) | 
                        ((pTime.tm_mon + 1) << 21) |
                        (pTime.tm_mday << 16) |
                        (pTime.tm_hour << 11) |
                        (pTime.tm_min << 5) |
                        (pTime.tm_sec >> 1); 
```

*编辑：*如评论中所述，我在月份添加了 +1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-08T15:52:45.060

Lefteris E 给出了几乎正确的答案，但这里有一个小错误

您应该将 1 添加到 tm_mon，因为 tm 结构将月份保持为从 0 到 11 的数字（[struct tm](http://www.cplusplus.com/reference/ctime/tm/)），但 DOS 日期/时间从 1 到 12 （[FileTimeToDosDateTime](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724274(v=vs.85).aspx)）。所以正确的是

```
unsigned long FatTime = ((pTime.tm_year - 80) << 25) | 
    ((pTime.tm_mon+1) << 21) |
    (pTime.tm_mday << 16) |
    (pTime.tm_hour << 11) |
    (pTime.tm_min << 5) |
    (pTime.tm_sec >> 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-09T15:15:00.593

您也可以使用位域和库`time.h`。在我的项目中，我将 UNIX 时间戳转换为 FatFs 时间。

```
 #include <time.h>

        #pragma pack (push,1)
        typedef struct{
            unsigned Sec :5;
            unsigned Min :6;
            unsigned Hour :5;
            unsigned Day :5;
            unsigned Month :4;
            unsigned Year :7;
        }FatDate_t;
        #pragma pack (pop)

        DWORD get_fattime(void){ 
            time_t ts=GetDateTimeNow();
            struct tm * tmInfo = gmtime( &ts );
            uint32_t Result=0;
            FatDate_t *fatDate;
            fatDate=(FatDate_t *)&Result;
            fatDate->Year=tmInfo->tm_year-80;
            fatDate->Month=tmInfo->tm_mon+1;
            fatDate->Day=tmInfo->tm_mday;

            fatDate->Hour=tmInfo->tm_hour;
            fatDate->Min=tmInfo->tm_min;
            fatDate->Sec=tmInfo->tm_sec>>1;

            return Result;
        } 
```

# data-binding - 将 Lightswitch 属性加载到 Silverlight 控件

> ID：15763263
> 
> 赞同：1
> 
> 时间：2013-04-02T11:45:03.497
> 
> 标签：data-binding, controls, silverlight-5.0, lightswitch-2012

```
 I have control like this

<UserControl x:Class="VideoControl.VideoControl" Loaded="getProperty"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
</UserControl> 
```

我有这样的方法

```
private void getProperty(object sender, RoutedEventArgs e) {
  var objContext = (IContentItem)this.DataContext;
  var Scrn = (Microsoft.LightSwitch.Client.IScreenObject)objContext.Screen;
  var anonObject = Scrn.Details.Properties["VidContentItemRessourcesItem"].Value;

    string result= anonObject.GetType().GetProperty("AssetPubLocator").GetValue(anonObject, null).ToString();

} 
```

但是当我运行它时，对象结果为空，因为在加载 lightswitch 屏幕之前调用了预定义的 Loaded silverlight 函数，当我在按钮单击结果上调用方法获取属性时，因为加载了 lightswitch 屏幕，所以结果不是 null。所以我的问题是如何在屏幕以某种方式加载后调用此方法（没有按钮单击）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:34:44.900

好的，我这样解决了

```
 // My control property
public MyControlType MyControl;

    partial void MyEntity_Loaded(bool succeeded) {

      this.SetDisplayNameFromEntity(this.MyEntity);
      // Open in new Thread
      Microsoft.LightSwitch.Threading.Dispatchers.Main.BeginInvoke(() => {
        this.FindControl("VideoControler").ControlAvailable += (s, e) => {
          // Loading Control
          MyControl = (e.Control as MyControlNamespace.MyControlType);
        };

        // Calling method in Control and sending property there :-)
        MyControl.PropertiesLoaded(this.MyEntity.SomeString);
      });
    } 
```

# java - Swing 文本框中的 Unicode 字符 (ரு)

> ID：15763265
> 
> 赞同：1
> 
> 时间：2013-04-02T11:45:06.357
> 
> 标签：java, swing, character-encoding, fonts

在浏览器中，Unicode 字符 (ரு) 正确显示。如果我将其复制粘贴到摆动文本字段中，它会出现错误。

PS：是两个字符的组合。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:59:17.310

对于此类字符，系统必须支持字体和 uni 编码。

# c++ - C++ ASCII 感知吗？

> ID：15763267
> 
> 赞同：2
> 
> 时间：2013-04-02T11:45:19.057
> 
> 标签：c++, language-lawyer

一位同事告诉我：

> C++ 不支持 ASCII。

C++程序的*源字符集*是实现定义的，那么我的同事在多大程度上是不正确的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:57:09.673

当 c++ 编译器将数值链接`48`到`'0'`. 所以是的，它需要能够识别 ASCII。

但它总是需要吗？假设您使用[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC#Codepage_layout) ( `'0' => 240`)。那么编译器可能不关心ASCII。也许这就是你同事的意思。

一般来说，C++ 并不真正关心 ASCII。这是一个实现细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T11:45:19.057

C++ 标准文本“意识到” ASCII，因为它在脚注中进行了非规范性提及：

> `[C++11: Footnote 14]:`基本源字符集成员的字形旨在识别对应于 ASCII 字符集的 ISO/IEC 10646 子集中的字符。然而，因为从源文件字符到源字符集的映射（在翻译阶段 1 中描述）被指定为实现定义，所以需要一个实现来记录基本源字符在源文件中是如何表示的。

在这样做时，它声明标准化语言本身*不*支持 ASCII。

*“对我来说，这似乎是对 ASCII 的认识！”* 你可能会说。嗯，不。在语言定义中仅仅提到“ASCII”并没有使*语言*能够识别 ASCII。这与您可以编程机器人说出“我没有自我意识”这句话的方式相同，而无需机器人意识到自己。

# bash - Bash：除了更新语言环境之外，通过导出设置的语言环境有什么不同吗？

> ID：15763270
> 
> 赞同：0
> 
> 时间：2013-04-02T11:45:24.940
> 
> 标签：bash, ubuntu, export, locale

我发现在 Ubuntu 中有两种设置语言环境的方法。

一种是通过导出：

```
export LANG=en_US.utf-8 
```

另一种是通过更新语言环境：

```
update-locale en_US.utf-8 
```

设置语言环境有什么显着不同吗？

如果是，在 Ubuntu 和 CentOS 中设置语言环境的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:02:08.653

```
update-locale en_US.utf-8 
```

将修改全局语言环境设置。

```
export LANG=en_US.utf-8 
```

只会为当前的 shell 修改它。

# node.js - 投掷者；event.js http.get 与代理

> ID：15763277
> 
> 赞同：0
> 
> 时间：2013-04-02T11:45:37.737
> 
> 标签：node.js, http

```
 var tabProxy = new Array(
    '122.72.76.122'
    ,'124.240.187.79'
     );
 http.get ({
            host: tabProxy[selectorProxy],
            port: 80,
            path: baseurl + counter
        }, function (response) {
            try{
                var statusCode = response.statusCode;
                console.log (statusCode);
             }catch(e){
            console.log(e);
        }
    }) 
```

选择器代理=0；它可以工作，但 selectorProxy = 1; 应用程序崩溃：

```
events.js:72
    throw er; // Unhandled 'error' event
          ^
Error: socket hang up
    at createHangUpError (http.js:1417:15)
    at Socket.socketOnEnd [as onend] (http.js:1513:23)
    at Socket.g (events.js:175:14)
    at Socket.EventEmitter.emit (events.js:117:20)
    at _stream_readable.js:870:14
    at process._tickCallback (node.js:415:13) 
```

如何弥补这个错误（提取我的数组的这个 ip）？尝试捕获不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:10:34.193

您的 try/catch 不涵盖任何会引发错误的内容。更重要的是，您需要根据您的请求监听`'error'`事件。

```
var req = http.get(options, function (res) { ... });
req.on('error', function (err) {
    //handle error here
}); 
```

# c# - 在调试模式下抛出异常，但在哪里？

> ID：15763279
> 
> 赞同：2
> 
> 时间：2013-04-02T11:45:40.827
> 
> 标签：c#, xna, windows-phone-8

> > 类型为“System.IO.IsolatedStorage.IsolatedStorageException”的第一次机会异常发生在 mscorlib.ni.dll 中，IsolatedStorageFileStream 上不允许操作。

它向我显示了此通知，但我不知道它在哪里生成。如何找出生成此异常的代码在哪里？

PS。

我正在使用调试模式。（C＃）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T12:16:53.177

This is a first-chance exception, i.e. one that has a try-catch block that will take care of it. By default, Visual Studio doesn't break on first-chance exceptions.

To make Visual Studio break when that exception is thrown do the following:

*   Open the "Debug" menu and click "Exceptions..."
*   Select the checkbox in the "Thrown" column for the exception you want. ![exceptions dialog](https://i.stack.imgur.com/3Wv4e.png)
*   Click OK

Henceforth, the Visual Studio debugger will always break on that particular exception, whenever it's thrown. To go back to the original behavior, clear the checkbox in the "Thrown" column.

# java - 在 JSP 中按“Delete”键时从服务器端删除 ArrayList 条目

> ID：15763282
> 
> 赞同：0
> 
> 时间：2013-04-02T11:45:47.510
> 
> 标签：java, html, spring, jsp, spring-mvc

我目前正在使用 Spring MVC，其中我需要添加和删除我的元素`<form:select>`：

```
<form:select path="listElements">
    <form:options items="${myList}" />
</form:select> 
```

截至目前，我正在从不同的弹出页面中填充元素并从中删除元素，并使用 AJAX 更新父页面`ArrayList`。`myList`

我现在想更改删除，以便当我单击填充选项并按`Del`时，它会被删除（从服务器端）。

我已经在这个问题上停留了几天了；任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:54:49.603

1 您必须使用 JS 捕获 Delete 事件。

2 捕获事件后获取下拉或多选窗口的选定索引值。

3 将此值/值发送到服务器，该服务器将删除数据库中的这些字段/您使用的任何来源。

4 作为响应发送一个 json，它将发送下拉列表的新记录。

5 将这些值填充到下拉列表中。

对于下拉人口和删除内容，请参阅其他一些教程。

# c# - ServerManager 在多个线程中的行为不同

> ID：15763293
> 
> 赞同：1
> 
> 时间：2013-04-02T11:46:28.187
> 
> 标签：c#, iis, servermanager

我在我的静态助手类中创建了这些属性。

```
private static ServerManager IISServerManager
    {
        get
        {
            if (mIISServerManager== null)
            {
                mIISServerManager= new ServerManager();
            }

            return mIISServerManager;
        }
     }

private static SiteCollection Sites
    {
        get
        {
            try
            {
                return IISServerManager.Sites;
            }
            catch (Exception)
            {
                return null;
            }
        }
    } 
```

当我调用 Helper 方法时

```
 public static bool VirtualDirectoryExists(string dirName, string siteName)
    {
        if (!String.IsNullOrEmpty(dirName) && (Sites != null))
        {
            Site site = Sites[siteName];
            ... 
```

在使用此帮助程序的代码中（在主线程中），它会正确检索所有站点及其属性。

另一方面，当我在使用此帮助程序的代码中调用它时（在后台工作线程中）检索 SitesCollection，但代码在使用索引器 [siteName] 获取站点时冻结

```
Site site = Sites[siteName]; 
```

（看起来像死锁，但我这边没有锁定）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:33:31.553

该类`ServerManager`记录为

> “不保证任何实例成员都是线程安全的”。

这通常意味着您不能从后台线程调用它们，因为无法进行任何锁定以确保 IIS 不会同时在主线程中访问数据。

只需在主线程中获取您需要的内容，缓存它，然后在后台线程中使用它。

# android - 我在哪里可以找到 Android 主屏幕小部件布局的来源？

> ID：15763301
> 
> 赞同：2
> 
> 时间：2013-04-02T11:46:54.330
> 
> 标签：android, layout, rectangles, android-4.2-jelly-bean, bin-packing

今天我第一次使用 Android 4.2，我注意到主屏幕如何在您拖动小部件时自动重新定位它们：

![](https://i.stack.imgur.com/uWqzH.jpg)

![](https://i.stack.imgur.com/oYcxA.jpg)

我最近为我们的项目编写了一个类似的代码，我不得不承认它的性能要差得多。我的算法真的很愚蠢，我正在寻找更好的替代方案。这是[我找到的最接近的一个](http://code.google.com/p/widget-evacuate-algorithm/)，但我还没有测试过。

据我了解，这与装箱有关，但装箱算法侧重于将矩形彼此尽可能靠近，而 Android 实现侧重于*对初始配置进行尽可能少的更改*，因此美观。

因为 Android 是开源的，所以我希望从他们的代码中学习，但是我找不到任何与在[**`android.appwidget`**](http://code.metager.de/source/xref/android/4.0.3/frameworks-base/core/java/android/appwidget/). 看什么地方合适？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:40:33.770

[`CellLayout.java`](https://github.com/cscott/android-launcher2/blob/master/src/com/android/launcher2/CellLayout.java)我不是 100% 确定，但看起来[Launcher2](https://android.googlesource.com/platform/packages/apps/Launcher2/)对此负责。

# intellij-idea - IntelliJ：如何在列模式下水平导航

> ID：15763303
> 
> 赞同：1
> 
> 时间：2013-04-02T11:47:05.297
> 
> 标签：intellij-idea, editing

在某些情况下，列编辑模式效果很好。不过，我现在发现有点烦人的一件事是，在列模式下，我不知道如何在不编辑的情况下向左或向右跳。检查所附图片。

![编辑一些预先格式化的文本，使其适合 SQL 插入语句](https://i.stack.imgur.com/W6qR7.png)

所以我在矩阵中有一些值（从 DBVisualizer 中的选择复制），我想添加引号和逗号等东西，以便它作为 SQL 脚本工作。目前，我的细长光标位于“value2”列的开头，我想跳到末尾添加一个引号、一个逗号和另一个引号，然后跳到 value3 的末尾，依此类推。

我知道我可以用另一种方式做到这一点——使用正则表达式或更好地提取文本。但是现在我在我所在的位置，我认为应该有一种方法可以水平导航而不会丢失我所做的垂直选择。如果我按左或右，选择会折叠成一行，如果我尝试 ctrl-right（跳过单词），同样的事情。

在 IntelliJ 中是否有一个键组合可以满足我的要求？如果没有，我可以使用其他工具吗（我在 Ubuntu 上，但如果 Windows 中的某些东西也可以工作）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:15:09.317

IJ 目前不支持。然而，下一个版本（v.13，ETA 是 2013 年底）计划进行巨大的多行编辑改进。随时跟踪[IDEA-80056](http://youtrack.jetbrains.com/issue/IDEA-80056)进度。

# html - 修复了 Internet Explorer 9 中元素消失的问题

> ID：15763304
> 
> 赞同：1
> 
> 时间：2013-04-02T11:47:05.747
> 
> 标签：html, css, internet-explorer-9, css-position

我有一个在 ASP.NET MVC 中构建的网页，它使用固定定位来允许用户在滚动时始终看到行标题。

使用 Internet Explorer 9 时，固定元素会在滚动时从视图中消失并重新出现。我已经在 Chrome 中进行了测试，它在那里可以正常工作。我还确保 IE 使用的是标准模式而不是怪癖。

这个 jsfiddle 演示了我的问题：http: [//jsfiddle.net/zache/43zCf/](http://jsfiddle.net/zache/43zCf/)

```
 Doesn't fit the character limit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:39:06.277

z 索引元素的父级未定位。您必须添加到表中`position: inherit;` ，以便表的 css 将是：

```
table {
    position: inherit;
    white-space: nowrap;
    border-collapse: collapse;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T14:22:35.097

这对我有用。

解决方案1：

在页面加载时添加滚动条，然后在短时间内将其删除。

```
Sys.Application.add_load(function(){
if ($.browser.version == 9 && $.browser.msie) {
    $('html').css('overflow-y','scroll');

    setTimeout(function () {
        $('html').css('overflow-y','auto');
    }, 10);
} 
```

})();

解决方案 2

在 web.config 中将文档模式设置为 ie8：

```
<add name="X-UA-Compatible" value="IE=8"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T23:05:30.863

我遇到了同样的问题，我可以通过将以下转换代码添加到固定位置元素 ( `transform: translateZ(0);-webkit-transform: translateZ(0);`) 来解决它，这会强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞起来。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用-webkit-transform: translate3d(0,0,0); 将为 CSS 过渡启动 GPU，使它们更平滑（更高的 FPS）。

**注意：** translate3d(0,0,0) 对您看到的内容没有任何作用。它在 x、y 和 z 轴上将对象移动 0px。这只是一种强制硬件加速的技术。

```
#element {
    position: fixed;
    /* MAGIC HAPPENS HERE */
    transform: translateZ(0);
    -moz-transform: translatez(0);
    -ms-transform: translatez(0);
    -o-transform: translatez(0);
    -webkit-transform: translateZ(0);
    -webkit-font-smoothing: antialiased; /* seems to do the same in Safari Family of Browsers*/
} 
```

# javascript - javascript 无法正常工作

> ID：15763306
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:47:08.830
> 
> 标签：javascript, jquery, html, jsp

我有一个包含旧、新和确认三个字段的表单。我设计了一个 javascript 来检查是否输入了所有字段，但不幸的是这没有按预期工作。请告诉我我在哪里做错了。我是新手javascript

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style type="text/css">
    html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl,
    dt, dd, ol, ul, li, table, tr, td, form, object, embed,
    article, aside, command, details, fieldset,
    figcaption, figure, footer, group, header, hgroup, legend{
        margin: 0;
        padding: 0;
        border: 0;
    }
    html {
        font: 82.5% verdana, helvetica, sans-serif;
        background: #fff;
        color: #333;
        line-height: 1;
        direction: ltr;
    }
    html, body {
        position: absolute;
        height: 100%;
        min-width: 100%;
    }   
    table {
        border-collapse: collapse;
        border-spacing: 0;
    }
    .button {
        min-width: 46px;
        text-align: center;
        color: #444;
        font-size: 11px;
        font-weight: bold;
        height: 27px;
        padding: 0 8px;
        line-height: 27px;
        border-radius: 2px;
        transition: all 0.218s;
        border: 1px solid #dcdcdc;
        background-color: #f5f5f5;
        cursor: default;
    }
    *+html .button {
        min-width: 70px;
    }
    button.button,
    input[type=submit].button {
        height: f1f1f1px;
        line-height: 29px;
        vertical-align: bottom;
        margin: 0;
    }
    .button:hover {
        border: 1px solid #c6c6c6;
        color: #333;
        text-decoration: none;
        transition: all 0.0s;
        background-color: #f8f8f8;
        box-shadow: 0 1px 1px rgba(0,0,0,0.1);
    }
    .button:active {
        background-color: #f6f6f6;
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    }
    .button:visited {
        color: #666;
    }  
    .button-submit {
        border: 1px solid #3079ed;
        color: #fff;
        text-shadow: 0 1px rgba(0,0,0,0.1);
        background-color: #4d90fe;
    }
    .button-submit:hover {
        border: 1px solid #2f5bb7;
        color: #fff;
        text-shadow: 0 1px rgba(0,0,0,0.3);
        background-color: #357ae8;
    }
    button-submit:active {
        background-color: #357ae8;
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
    }
    .footer-bar {
        bottom: 0;
        height: 35px;
        width: 100%;
        overflow: hidden;
    }
    .content {
        padding: 0 44px;
    }
    .table{
        padding: 0 55px
    }
    .header {
        padding: 10px 20px 5px;
        background:#00AAFF;
        border: 1px solid #e5e5e5;
        height:20px;
    }
</style>
<script type="text/javascript">
function ccheck()
{
old=document.f1.old.value;
confirm=document.f1.confirm.value;

if(old=="" || old==null)
{
alert("Plz. Enter Your City");
document.f1.old.focus();
return false;
}
if(confirm=="" || confirm==null)
{
alert("Plz. Enter Your State");
document.f1.confirm.focus();
return false;
}
return true;
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body bgcolor="">
    <form action="checkPassword.jsp" onSubmit="return ccheck()">
        <div align="center" style="padding-top: 30px">
            <table  cellspacing="10" cellpadding="10">
                <tr>
                    <td width="200" height="30"><h5>Old Password</h5></td>
                    <td  height="30"><input name="old"></td>
                </tr>
                <tr>
                    <td  height="30"><h5>New Password</h5></td>
                    <td  height="30"><input name="NewPsw"></td>
                </tr>
                <tr>
                    <td height="30"><h5>Confirm Password</h5></td>
                    <td  height="30"><input name="confirm"></td>
                </tr>
            </table>
        </div>
        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div>
    </form>
</body>
</html> 
```

相同的 jsfiddle [http://jsfiddle.net/YCWu4/](http://jsfiddle.net/YCWu4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:52:09.000

尝试使用它来获取您的元素

```
old = document.getElementById('old').value;
confirm = document.getElementById('confirm').value; 
```

并给他们`id`s 参考而不是名字：

```
<input id="old" name="old"> 
```

和

```
<input id="confirm" name="confirm"> 
```

[**工作演示**](http://jsfiddle.net/Tyriar/ezRSU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:52:51.580

如果您想通过名称引用它，您需要命名您的表单`document.f1`

```
<form name="f1" id="f1" action="checkPassword.jsp" onsubmit="return ccheck()"> 
```

[工作小提琴](http://jsfiddle.net/markcoleman/q4F6H/)

其他一些指针：

1.  您的输入格式不正确。`<input/>`
2.  不要污染全局命名空间添加`var`到`old`和`confirm`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:55:04.437

您错过`name="f1"`了表单标签。

# javascript - Backbone.js：同类型的嵌套模型和集合

> ID：15763307
> 
> 赞同：1
> 
> 时间：2013-04-02T11:47:09.990
> 
> 标签：javascript, backbone.js

我是 Backbone 的新手，我正在努力将我的头缠在一些东西上。让我试着解释一下我想要做什么：我正在制作一个包含 SVG 元素的应用程序，其中包含 SVG 组。这些组将相互嵌套，如下所示：

[http://i.stack.imgur.com/yAkTE.png](http://i.stack.imgur.com/yAkTE.png)

我试图使用 Backbone 为每个组创建一个模型和一个视图。并使用集合将子组嵌套在这些组中。

到目前为止，我只使用 div 而不是任何 SVG 编写了以下内容，以便在我实现这方面的事情之前让逻辑正常工作。但我想我的想法可能只是在某个地方完全靠不住，任何帮助都将不胜感激。

我知道在 Backbone 中有关于嵌套等的类似线程，但我无法在其中找到任何帮助。

你可以在这里看到我到目前为止写的 JSFiddle：http: [//jsfiddle.net/ZqMeV/](http://jsfiddle.net/ZqMeV/) 这是到目前为止的代码：

```
(function ($) {

var Cell = Backbone.Model.extend({

    initialize: function(){
        this.children = new CellCollection();
    }

});

var CellCollection = Backbone.Collection.extend({
    model: Cell
});

var CellView = Backbone.View.extend({
    tagName: "div",

    initialize: function(){
        if(this.model.children.models.length > 0){
            _.each(this.model.children.models, function(child){
                console.log(child);
                var cell = new CellView({
                    model: child
                });
                $(this.el).append(cell.el);
            });
        } else {
            $(this.el).html('cell');
        }
    }

});

var Canvas = Backbone.Model.extend({
    initialize: function(){
                    //below is just for testing purposes
        this.content = new Cell();
        var c = new Cell();
        var d = new Cell();
        var e = new Cell();
        this.content.children.add(c);
        this.content.children.add(d);
        d.children.add(e);
    }
});

var CanvasView = Backbone.View.extend({
    el: $("#canvas"),
    tagName: "div",
    initialize: function(){
        this.cellView = new CellView({
            model: this.model.content
        });
        $(this.el).append(this.cellView.el);
    }
});

var canvas = new Canvas();
var canvasView = new CanvasView({
    model: canvas
});

} (jQuery)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:27:07.093

你有一个很大的上下文问题：

```
_.each(this.model.children.models, function(child){
  console.log(child);
  var cell = new CellView({
    model: child
  });
  $(this.el).append(cell.el);
}); 
```

在这里，你`this`的每一个都发生了变化。您可以将其替换为：

```
var self = this;
this.model.children.each(function(child) {
  var cell = new CellView({
    model: child
  });
  $(self.el).append(cell.el);
}); 
```

哦，顺便说一下，Backbone 的 Collections 代理了很多下划线方法，所以我冒昧地改变了你的每一个。您也可以替换`this.model.children.models.length`为`this.model.children.length`。学会使用集合，而不仅仅是里面的数组：）

# php - 向用ckeditor编写的html数据添加基于jquery的简单查看/隐藏更多操作

> ID：15763323
> 
> 赞同：0
> 
> 时间：2013-04-02T11:47:54.390
> 
> 标签：php, jquery, html, css, ckeditor

我在这里有点麻烦。解决方案很简单，但直到现在才知道点击。我有一个文本区域要由用户使用 ckeditor 填充。如果文本太长，我会在渲染之前使用 php 拆分内容，我会使用 jquery 切换效果添加查看/隐藏更多操作。一个小的解决方法可能是：

如果文本是

```
Appropriate length text here.Other hidden texts here. 
```

这将是

```
<div class="show always">Appropriate length text here.</div>
<div class="togglehidden1">See more</div>
<div class="hidefirst" style="display:none">Other hidden texts here.</div>
<div class="togglehidden2" style="display:none">Hide more</div> 
```

但这里的交易是 ckeditor 实际上在这里放了很多 html 的东西，实际上我们收到的字符串是完全不可想象的。例如：

```
<div><p><b>Appropriate</b> length text here.</p></div><div>Other hidden texts here.</div> 
```

使用相同的方法拆分并插入一些查看更多操作

```
<div class="show always"><div><p><b>Appropriate</b> length</div>
<div class="togglehidden1">See more</div>
<div class="hidefirst" style="display:none">here.</p></div><div>Other hidden texts here.</div></div>
<div class="togglehidden2" style="display:none">Hide more</div> 
```

所以，只有这个 div 是隐藏的

```
<div class="hidefirst" style="display:none">here.</p></div> 
```

并且这里的这一部分被留下了。

```
<div>Other hidden texts here.</div></div> 
```

请建议。我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:50:15.897

这是一个[工作小提琴](http://jsfiddle.net/B6Wgv/)。

**HTML**代码_

```
<div class="show always">
    <div><p><b>Appropriate</b> length here.</p>
        <div class="togglehidden">See more</div>
    </div>
</div>
<div class="hidefirst">
    <div>Other hidden texts here.</div>
</div> 
```

**jQuery**代码（使用slideToggle **()**创建动画）

```
$(document).ready(function() {
    //hide the content when the document is ready
    $('.hidefirst').hide();
    //on clicking the See more/Hide More toggle the visible state of element
    $('.togglehidden').bind('click', function() {
        $('.hidefirst').slideToggle(function() {
            // if element is visible change the text to Hide more
            if ($(this).is(':visible'))
                $('.togglehidden').html('Hide more');
            // else change the text do See more
            else
                $('.togglehidden').html('See more'); 
        });
    });
}); 
```

1.  将点击事件绑定到**.togglehidden**类
2.  使用 slideToggle() 显示/隐藏**.hidefirst的内容**
3.  在 slideToogle 回调中检查内容是否可见并设置适当的消息。

希望能帮助到你。

# javascript - 一键弹出多个弹出窗口，如 kayak Javascript

> ID：15763324
> 
> 赞同：1
> 
> 时间：2013-04-02T11:47:56.220
> 
> 标签：javascript, popup, click

我必须为客户开发一个功能，只需单击一下即可打开多个信息弹出窗口。

我创建了一个这样的函数：

```
<script>
var index = 0 ;
function openWindows()
{
    var url = new Array() ;
    url[0] = "http://www.marca.com" ;
    url[1] = "http://www.google.es" ;
    for(i=0; i < url.length ; i++)
    {
        window.open(url[index],"ident_"+index) ;
        index = index + 1 ;
    }
    index = 0 ;
}
</script> 
```

我用下一个代码调用这个函数

```
<a href="javascript:openWindows()">Open Popups</a> 
```

此功能在 Firefox 上完美运行，但在 Chrome 和 Internet Explorer 上，我阻止了第二个弹出窗口（第一个完美打开）

我不知道该怎么做。起初，我认为这是不可能的，但后来，我看到一个网站（[http://www.kayak.es/](http://www.kayak.es/)），您可以在其中选择要比较的网站数量皮划艇，他一键打开弹出窗口中所有选定的站点。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:54:31.593

代码是正确的。尝试检查您在 Chrome 和 IE 中的安全设置，它们以某种方式阻止了多个弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T16:40:23.410

尝试向第二个弹出窗口传递一个参数，告诉他打开下一个弹出窗口，依此类推。也许浏览器会检查打开器窗口以阻止多个弹出窗口。或者尝试在每个开口之间放置一些微时间睡眠。

# powershell - 使用了哪个参数集？

> ID：15763325
> 
> 赞同：62
> 
> 时间：2013-04-02T11:47:59.007
> 
> 标签：powershell, parameters, optional-parameters

我使用高级参数处理来支持多个参数集。是否有任何预定义的变量或方法来确定已使用哪个参数集来调用脚本？

例如类似的东西

```
if($parameterSet -eq "set1") { ... } elseif ($parameterSet -eq "set2") { ... } 
```

?

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-02T11:58:57.873

检查 $PSCmdlet 变量：

```
$PSCmdlet.ParameterSetName 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-02T11:59:58.940

您可以签入您的脚本：

```
$PsCmdlet.ParameterSetName 
```

# cmake - 强制 cmake FIND_LIBRARY 查看自定义目录

> ID：15763328
> 
> 赞同：21
> 
> 时间：2013-04-02T11:48:04.297
> 
> 标签：cmake

cmake 版本 2.8.4

我有以下我自己编译并希望我的应用程序链接的 apache 可移植运行时库。

我的 apr 库所在的项目目录：

```
gw_proj/tools/apr/libs 
```

在我的 CMakeLists.txt 我有以下内容：

```
FIND_LIBRARY(APRUTIL NAMES "aprutil-1"
  PATHS ${PROJECT_SOURCE_DIR}/tools/apr/libs) 
```

我的问题是在已经安装了 apache 便携式运行时的机器上，它将在此文件夹中查找它：

```
/usr/lib 
```

所以总是会忽略我的自定义路径。

如何强制`FIND_LIBRARY`始终查看我的自定义目录：

```
gw_proj/tools/apr/libs 
```

非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T20:10:27.003

`NO_DEFAULT_PATH`您可以使用、`NO_CMAKE_ENVIRONMENT_PATH` 、`NO_CMAKE_PATH`、`NO_SYSTEM_ENVIRONMENT_PATH`、`NO_CMAKE_SYSTEM_PATH`、`CMAKE_FIND_ROOT_PATH_BOTH`、`ONLY_CMAKE_FIND_ROOT_PATH`或中的一个或多个来指定搜索顺序`NO_CMAKE_FIND_ROOT_PATH`。

从文档中[`find_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:find_library "CMake v2.8.10 文档")：

> 默认搜索顺序旨在针对常见用例从最具体到最不具体。项目可以通过简单地多次调用命令并使用 NO_* 选项来覆盖顺序：
> 
> ```
> find_library(<VAR> NAMES name PATHS paths... NO_DEFAULT_PATH)
> find_library(<VAR> NAMES name) 
> ```
> 
> 一旦其中一个调用成功，结果变量将被设置并存储在缓存中，这样就不会再次搜索调用。

所以在你的情况下，你可以做

```
FIND_LIBRARY(APRUTIL NAMES "aprutil-1"
  PATHS ${PROJECT_SOURCE_DIR}/tools/apr/libs NO_DEFAULT_PATH) 
```

# c# - 利用 CLR20R3 信息将 IL 转储映射回源代码

> ID：15763336
> 
> 赞同：0
> 
> 时间：2013-04-02T11:48:42.217
> 
> 标签：c#, asp.net, .net, exception

我`CLR20R3`在运行的 ASP.NET 应用程序中遇到错误。我知道最后我需要捕捉到这个错误 - 很明显 - 但这是我在 PROD 中解决这个问题后要完成的维护任务。我不能直接进入维护任务的原因是，要在所有较低的环境中测试和批准这些更改，然后最终到 PROD，需要大量的工作和时间。

该错误表明该`P7`值为，因此在从有问题的程序集**（这不是我的程序集）**`4dd`获得 IL 转储后，我找到了该代码。我也在方法标记之后显示了几行，因为**我认为**那些引用了被调用方法中的违规行：

 ****```
IL_0040:  callvirt   instance int32 IBM.WMQ.MQTCPConnection/*02000072*/::SendData(uint8[],
                                                                                  int32,
                                                                                  int32) /* 060004DD */
IL_0045:  stloc.0
IL_0046:  leave.s    IL_0055 
```

现在，考虑到这一点，这是一个很好的问题，因为我试图将其映射回有问题的程序集的反编译代码。

**`IL_0046: leave.s IL_0055`该行是否指被调用方法中失败的行？**

因为如果是这样，下面是匹配的行，以及前面的一些似乎相关的代码：

```
IL_0044:  callvirt   instance int32 [System/*23000002*/]System.Net.Sockets.Socket/*0100000E*/::Send(uint8[],
                                                                                                    int32,
                                                                                                    int32,
                                                                                                    valuetype [System/*23000002*/]System.Net.Sockets.SocketFlags/*01000060*/) /* 0A0000F9 */
IL_0049:  stloc.0
IL_004a:  ldarg.0
IL_004b:  ldc.i4     0x92
IL_0050:  ldstr      "Send returned " /* 700028D5 */
IL_0055:  ldloc.0 
```

但是，我很难证明这就是它所指的东西，因为汉斯[在这篇文章](https://stackoverflow.com/questions/4052770/deciphering-the-net-clr20r3-exception-parameters-p1-p10)中说该`P8`值是偏移量或违规行，除此之外不会有任何问题。异常表示该`P8`值为`7d`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:09:06.380

`leave.s IL_0055`没有引用被*调用*的方法。该`P7`值表明错误发生在 内`IBM.WMQ.MQTCPConnection.SendData`，因此您需要在那里查看（而不是在调用它的方法中）。

由于`P8`is `7d`，您应该在`IL_007d`内部查看`IBM.WMQ.MQTCPConnection.SendData`- 与您从中获取第二个片段的方法相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:10:07.067

P7 指的是发生异常的方法的方法标记。因此，崩溃在 内`IBM.WMQ.MQTCPConnection::SendData`，因为显然，这是对应于 4DD 令牌的方法。您发现的只是对该方法的调用（可能与问题无关），而不是方法本身。

要验证这一点，您可以在 ILDASM 中打开程序集，然后单击 View->MetaInfo->Show！搜索`060004DD`和类似的东西`Method #123 (060004DD)`会出现在元数据中。该方法是此 appdomain 中第一个看到异常的方法。

P8 是该方法中失败指令的偏移量。****

# android - 屏幕定向后碎片删除代码不起作用

> ID：15763339
> 
> 赞同：0
> 
> 时间：2013-04-02T11:48:46.720
> 
> 标签：android, android-fragments

我是 Android 编程的初学者...我正在使用以下代码将片段添加到布局中

```
 Fragment f=new Jobcat();
    FragmentManager fm=getSupportFragmentManager();
    FragmentTransaction ft =fm.beginTransaction();
    ft.add(R.id.jobcategoryfragment, f,"A");
    ft.commit();
                ft.add(R.id.jobcategoryfragment, f,"C");
    ft.commit();
    ft.add(R.id.jobcategoryfragment, f,"B");
    ft.commit(); 
```

并且我正在使用以下代码删除片段..

```
Fragment f = getSupportFragmentManager().findFragmentByTag("B");
   FragmentTransaction ft=getSupportFragmentManager().beginTransaction();
   ft.remove(f);
   ft.commit(); 
```

如果屏幕方向没有改变，它运行良好......如果我改变了屏幕方向，或者即使我在收到运行时错误后将方向恢复到原始状态

> 04-02 17:02:23.051: W/dalvikvm(8937): threadid=1: 线程退出未捕获异常 (group=0x41082930) 04-02 17:02:23.051: E/AndroidRuntime(8937): 致命异常: main 04-02 17:02:23.051: E/AndroidRuntime(8937): java.lang.NullPointerException 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.support.v4.app.BackStackRecord.run( BackStackRecord.java:651) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.os.Handler。 handleCallback(Handler.java:725) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.os.Handler.dispatchMessage(Handler.java:92) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 android.os.Looper.loop(Looper.java:137) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在android.app.ActivityThread.main(ActivityThread.java:5041) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-02 17:02 :23.051: E/AndroidRuntime(8937): at java.lang.reflect.Method.invoke(Method.java:511) 04-02 17:02:23.051: E/AndroidRuntime(8937): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-02 17:02:23.051: E/AndroidRuntime(8937): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04 -02 17:02:23.051：E/AndroidRuntime（8937）：在 dalvik.system.NativeStart.main（本机方法）02:23.051: E/AndroidRuntime(8937): 在 android.app.ActivityThread.main(ActivityThread.java:5041) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 java.lang.reflect.Method .invokeNative(Native Method) 04-02 17:02:23.051: E/AndroidRuntime(8937): at java.lang.reflect.Method.invoke(Method.java:511) 04-02 17:02:23.051: E/ AndroidRuntime(8937): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 com.android.internal.os .ZygoteInit.main(ZygoteInit.java:560) 04-02 17:02:23.051: E/AndroidRuntime(8937): at dalvik.system.NativeStart.main(Native Method)02:23.051: E/AndroidRuntime(8937): 在 android.app.ActivityThread.main(ActivityThread.java:5041) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 java.lang.reflect.Method .invokeNative(Native Method) 04-02 17:02:23.051: E/AndroidRuntime(8937): at java.lang.reflect.Method.invoke(Method.java:511) 04-02 17:02:23.051: E/ AndroidRuntime(8937): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 com.android.internal.os .ZygoteInit.main(ZygoteInit.java:560) 04-02 17:02:23.051: E/AndroidRuntime(8937): at dalvik.system.NativeStart.main(Native Method)invokeNative（本机方法）04-02 17:02:23.051：E/AndroidRuntime（8937）：在 java.lang.reflect.Method.invoke（Method.java:511）04-02 17:02:23.051：E/AndroidRuntime (8937): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:560) 04-02 17:02:23.051: E/AndroidRuntime(8937): at dalvik.system.NativeStart.main(Native Method)invokeNative（本机方法）04-02 17:02:23.051：E/AndroidRuntime（8937）：在 java.lang.reflect.Method.invoke（Method.java:511）04-02 17:02:23.051：E/AndroidRuntime (8937): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-02 17:02:23.051: E/AndroidRuntime(8937): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:560) 04-02 17:02:23.051: E/AndroidRuntime(8937): at dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(8937): 在 dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(8937): 在 dalvik.system.NativeStart.main(Native Method)

谁能帮我找到解决这个问题的方法...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T09:59:34.873

NullPointerException 发生是因为在配置更改后片段可能不再添加到您的活动中。如果在配置更改期间未保留 Fragment，则会发生这种情况。

你有两个选择：

1.  在你的 Jobcat-Fragment 添加 setRetained(true); 到您的 onCreate() 方法。有了这个，您的片段将在方向更改中幸存下来，并使用与以前相同的 TAG 被读取到您的活动中。不建议对具有 GUI 的片段执行此操作以避免泄漏，但有时我发现没有其他方便的方法可以实现此目的。

2.  检查是否

    片段 f = getSupportFragmentManager().findFragmentByTag("B") -> null

如果是这样，则无需从您的活动中删除该片段，因为它已经不存在了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T13:36:26.313

请加

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

在描述当前活动的 androidmanifest.xml 中...

# c# - 在 WinForms 应用程序中取消 MouseDown 事件

> ID：15763343
> 
> 赞同：0
> 
> 时间：2013-04-02T11:48:51.643
> 
> 标签：c#, winforms, mousedown

我有几个具有最小值和最大值的计数变量。当我按下相应的按钮时，计数器会上升或下降。

当按下 lmb 并且计数器超过例如 100（最大值）时，它不会自然停止计数。

有没有办法检查我的计数器并强制结束鼠标事件而不手动监视它？

```
private void button_RunXPositive_MouseDown(object sender, MouseEventArgs e)
{
    if (X < 100) {
      StartInMode(0, true); // a motor 
      ((Button_Triangle)sender).BackColor = ((Button_Triangle)sender).EdgeColor;
      return;
    }  
    else {
      ((Button_Triangle)sender).BackColor = Color.Black;
      this.MotorStop((UInt32)0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:51:01.973

如果您的项目是**WPF**项目，那么您可以在事件处理程序中编写：

```
if(counter < min || counter > max)
{
    e.Handled = true;
}
//your code 
```

**编辑**如果您使用的是**Windows 窗体**，那么您可以这样做：

```
private void Form1_MouseDown(object sender, MouseEventArgs e)
{
    if(counter < min || counter > max)
    {
        return;
    }

    //your code
} 
```

# javascript - AngularJS 将数据从控制器传递到另一个控制器

> ID：15763345
> 
> 赞同：5
> 
> 时间：2013-04-02T11:49:02.233
> 
> 标签：javascript, angularjs

我做了什么。我在具有特定指令的控制器A 中使用 json 从 youtube api 检索视频列表。json 包含视频列表和视频本身的详细信息。

我想做的事。单击视频时，我希望使用我之前请求的 json 数据将视频的详细信息与其他控制器 B 一起显示在另一个 ng-view 中。

所以我的问题是如何将数据从控制器A传递到控制器B

*注意*- $http 服务在 controllerA 中使用

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T12:07:30.180

这是开始使用 AngularJS 时常见的疑问之一。根据您的要求，我相信您最好的选择是[创建一个](http://docs.angularjs.org/guide/dev_guide.services.creating_services)检索电影列表的服务，然后在`controllerA`和`controllerB`.

```
module.factory('youtube', function() {
  var movieListCache;

  function getMovies(ignoreCache) {
    if (ignoreCache || !movieListCache) {
      movieListCache = $http...;
    }

    return movieListCache;
  }

  return {
    get: getMovies
  };
}); 
```

然后你只需在两个控制器中注入这个服务。

```
module.controller('controllerA', ['youtube', function(youtube) {
  youtube.get().then(function doSomethingAfterRetrievingTheMovies() {
  });
}]);

module.controller('controllerB', ['youtube', function(youtube) {
  youtube.get().then(function doAnotherThingAfterRetrievingTheMovies() {
  });
}]); 
```

如果您需要 controllerA 在 B 中使用信息之前对其进行操作，那么您可以在服务中创建更多方法。像这样的东西：

```
module.factory('youtube', function($q) {
  var movieListCache,
      deferred = $q.defer();

  function getMovies(ignoreCache) {
    if (ignoreCache || !movieListCache) {
      movieListCache = $http...;
    }

    return movieListCache;
  }

  function getChangedMovies() {
    return deferred.promise;
  }

  function setChangedMovies(movies) {
    deferred.resolve(movies);
  }

  return {
    get: getMovies,
    getChanged: getChangedMovies,
    setChanged: setChangedMovies
  };
}); 
```

如果您不知道是什么`$q`，[请查看文档](http://docs.angularjs.org/api/ng.$q)。这是处理异步操作所必需的。

无论如何，还有其他一些方法可以完成此任务：

1.  您可以将视频保存在`$rootScope`
2.  如果控制器是父子，您可以使用 require 来检索彼此的控制器

恕我直言，#1 是通用解决方案；只有在没有其他选择的情况下，我才会使用它。如果您有在这些控制器之间进行通信的内在需求，例如配置或让一个知道另一个的存在，那么 #2 很有用。这里有一个[例子](http://angularjs.org/#create-components)。

您要做的是共享有状态的单例信息；因此，服务是要走的路。

# java - 如何从流中的特定位置开始通过输入流读取字节？

> ID：15763350
> 
> 赞同：1
> 
> 时间：2013-04-02T11:49:16.670
> 
> 标签：java

我在 java 中使用 URL 类，我想通过输入流从流中的特定字节位置读取字节，而不是使用需要大量时间才能到达该特定位置的 skip() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:52:54.513

流的性质意味着您需要通读所有数据才能到达要开始的特定位置。你不会比`skip()`不幸的更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:53:07.393

我想这是不可能的，原因如下：当您发送 GET 请求时，远程服务器不知道您对 100 到 200 的字节感兴趣 - 他向您发送完整的文档/文件。所以你需要阅读它们，但不需要处理它们——这就是为什么跳过很慢。
但是：我确信您可以告诉服务器（其中一些支持它，一些不支持）您想要 100 多个字节的文件。
另外：请参阅此以深入了解跳过机制：[InputStream 中的 skip() 方法如何工作？](https://stackoverflow.com/questions/9077055/how-does-the-skip-method-in-inputstream-work#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:08:30.847

简单的答案是你不能。

如果您执行请求整个文件的 GET，则必须使用它`skip()`来获取所需的部分。（事实上​​，速度很慢很可能是因为服务器必须将所有被跳过的数据发送给客户端。这就是 TCP/IP 的工作原理......）

但是，有一个可能的替代方案。HTTP 1.1 规范支持使用[`Range`header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)部分获取文档。如果您的服务器支持这一点，那么您可以请求服务器仅向您发送您感兴趣的文档范围。但是，您可能需要处理服务器忽略 Range 标头并发送整个文档的情况.

# matlab - 如何在不使用循环的情况下在 CVX 中编写约束

> ID：15763354
> 
> 赞同：0
> 
> 时间：2013-04-02T11:49:41.403
> 
> 标签：matlab, optimization, cvx

我正在使用 matlab 包“CVX”来解决优化问题。目前我正在使用for循环来添加约束，但是我发现在初始化问题时它非常慢。

```
for i=1:n
    norm(Nout(i,:)-Nin(i,:))<=tau;
end 
```

**Nout**和**Nin**是大小为 n*3 的两个矩阵，我需要矩阵**Nout-Nin**每一行的范数小于阈值，我怎么能在没有循环的情况下写这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:53:59.153

您可以手动计算范数：

```
result = sqrt(sum((Nout - Nin) .^ 2, 2)) <= tau 
```

# ckeditor - 在 ckeditor 源代码视图中，所有字符都更改为 HTML 代码

> ID：15763356
> 
> 赞同：0
> 
> 时间：2013-04-02T11:50:00.440
> 
> 标签：ckeditor

出于某种原因，在我的应用程序中，当我单击 ckeditor 的“查看源代码”按钮时，所有字符都更改为 HTML 代码，例如“Lorem ipsum dolor sit amet”更改为`"&#76;&#111;&#114;&#101;&#109; &#105;&#112;&#115;&#117;&#109; &#100;&#111;&#108;&#111;&#114; &#115;&#105;&#116; &#97;&#109;&#101;&#116;"`

这样就无法通过编辑 HTML 代码来修改内容，而且有些符号在保存后会消失。

有谁知道为什么？

# javascript - HTMLCollection、NodeLists 和对象数组之间的区别

> ID：15763358
> 
> 赞同：109
> 
> 时间：2013-04-02T11:50:12.957
> 
> 标签：javascript, jquery, dom

在谈到 DOM 时，我一直对 HTMLCollections、对象和数组感到困惑。例如...

1.  `document.getElementsByTagName("td")`和 和有什么不一样`$("td")`？
2.  `$("#myTable")`并且`$("td")`是对象（jQuery 对象）。为什么console.log 还显示它们旁边的DOM 元素数组，它们不是对象也不是数组？
3.  什么是难以捉摸的“NodeLists”，我该如何选择？

还请提供对以下脚本的任何解释。

```
[123,"abc",321,"cba"]=[123,"abc",321,"cba"]
{123:123,abc:"abc",321:321,cba:"cba"}=Object { 123=123, abc="abc", 321=321, more...}
Node= Node { ELEMENT_NODE=1, ATTRIBUTE_NODE=2, TEXT_NODE=3, more...}
document.links= HTMLCollection[a #, a #]
document.getElementById("myTable")= <table id="myTable">
document.getElementsByClassName("myRow")= HTMLCollection[tr.myRow, tr.myRow]
document.getElementsByTagName("td")= HTMLCollection[td, td, td, td]
$("#myTable")= Object[table#myTable]
$("td")= Object[td, td, td, td]

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
        <title>Collections?</title>  
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
        <script type="text/javascript">
            $(function(){
                console.log('[123,"abc",321,"cba"]=',[123,"abc",321,"cba"]);
                console.log('{123:123,abc:"abc",321:321,cba:"cba"}=',{123:123,abc:"abc",321:321,cba:"cba"});
                console.log('Node=',Node);
                console.log('document.links=',document.links);
                console.log('document.getElementById("myTable")=',document.getElementById("myTable"));
                console.log('document.getElementsByClassName("myRow")=',document.getElementsByClassName("myRow"))
                console.log('document.getElementsByTagName("td")=',document.getElementsByTagName("td"));
                console.log('$("#myTable")=',$("#myTable"));
                console.log('$("td")=',$("td"));
            });
        </script>
    </head>

    <body>
        <a href="#">Link1</a>
        <a href="#">Link2</a>
        <table id="myTable">
            <tr class="myRow"><td>td11</td><td>td12</td></tr>
            <tr class="myRow"><td>td21</td><td>td22</td></tr>
        </table>
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-02T12:06:42.847

`NodeList`首先，我将解释和之间的区别`HTMLCollection`。

这两个接口都是DOM 节点的*集合*。它们在提供的方法和可以包含的节点类型上有所不同。虽然 a`NodeList`可以包含任何节点类型，但 an`HTMLCollection`应该只包含 Element 节点。
An`HTMLCollection`提供了与 a 相同的方法`NodeList`，另外还提供了一个名为 的方法`namedItem`。

当必须为多个节点提供访问权限时，总是使用集合，例如大多数选择器方法（例如`getElementsByTagName`）返回多个节点或获取对所有子节点的引用（`element.childNodes`）。

有关更多信息，请查看[DOM4 规范 - 集合](http://www.w3.org/TR/domcore/#concept-collection)。

> `document.getElementsByTagName("td")`和 和有什么不一样`$("td")`？

`getElementsByTagName`是 DOM 接口的方法。它接受一个标签名称作为输入并返回一个`HTMLCollection`（参见[DOM4 规范](https://www.w3.org/TR/2015/REC-dom-20151119/#interface-document)）。

`$("td")`大概是jQuery。它接受任何有效的 CSS/jQuery 选择器并返回一个 jQuery 对象。

标准 DOM 集合和 jQuery 选择之间的最大区别在于 DOM 集合*通常是*实时的（尽管并非所有方法都返回实时集合），即如果对 DOM 的任何更改受到影响，它们都会反映在集合中。它们就像 DOM 树上的*视图*，而 jQuery 选择是调用函数时 DOM 树的快照。

> 为什么console.log 还显示它们旁边的DOM 元素数组，它们不是对象也不是数组？

jQuery 对象是类*数组*对象，即它们具有数字属性和一个`length`属性（请记住，数组只是对象本身）。浏览器倾向于以一种特殊的方式显示数组和类似数组的对象，例如`[ ... , ... , ... ]`.

> 什么是难以捉摸的“NodeLists”，我该如何选择？

请参阅我的答案的第一部分。您不能*选择* `NodeList`s，它们是选择的*结果*。

据我所知，甚至没有一种以`NodeList`编程方式创建 s 的方法（即创建一个空的并稍后添加节点），它们仅由某些 DOM 方法/属性返回。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-02T12:07:31.623

## 0\. **an`HTMLCollection`和 a 和有什么不一样`NodeList`？**

这里有一些定义给你。

[DOM 1 级规范 - 杂项对象定义](http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-535378264)：

> 接口 HTMLCollection
> 
> HTMLCollection 是一个节点列表。可以通过序号索引或节点的名称或 id 属性访问单个节点。注意：假定 HTML DOM 中的集合是实时的，这意味着当基础文档更改时它们会自动更新。

[DOM 3 级规范 - 节点列表](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)

> 接口节点列表
> 
> NodeList 接口提供了节点有序集合的抽象，而无需定义或限制该集合的实现方式。DOM 中的 NodeList 对象是活动的。
> 
> NodeList 中的项目可通过从 0 开始的整数索引访问。

因此它们都可以包含实时数据，这意味着 DOM 将在它们的值发生时更新。它们还包含一组不同的功能。

如果您在运行脚本时检查控制台，您会注意到`table`DOM 元素同时包含 a`childNodes` `NodeList[2]`和 a `children` `HTMLCollection[1]`。为什么它们不同？因为`HTMLCollection`只能包含元素节点，所以 NodeList 还包含一个文本节点。

![在此处输入图像描述](https://i.stack.imgur.com/CmCu3.png)

## `document.getElementsByTagName("td")`1.和有什么区别`$("td")`？

`document.getElementsByTagName("td")`返回一个 DOM 元素数组 (a `NodeList`)，`$("td")`称为 jQuery 对象，其中包含来自`document.getElementsByTagName("td")`其属性`0`、`1`、`2`等的元素。主要区别在于 jQuery 对象检索速度稍慢，但可以访问所有方便的jQuery 函数。

## 2.`$("#myTable")`并且`$("td")`是对象（`jQuery`objects）。为什么`console.log`还要在它们旁边显示 DOM 元素的数组，它们不是对象而不是数组吗？

它们是其属性`0`、`1`、`2`等设置为 DOM 元素的对象。这是一个简单的例子：它是如何工作的：

[jsFiddle](http://jsfiddle.net/Tyriar/B6das/)

```
 var a = {
        1: "first",
        2: "second"
    }
    alert(a[1]); 
```

## 3\. 什么是难以捉摸的“NodeLists”，我该如何选择？

您一直在代码中检索它们，`getElementsByClassName`并且`getElementsByTagName`都返回`NodeList`s

![节点列表](https://i.stack.imgur.com/t2ph3.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-06-01T10:55:03.897

### 附加说明

## HTMLCollection 和 NodeList 有什么区别？

HTMLCollection**仅**包含元素节点（*标签*），而**NodeList**包含所有**节点**。

最重要的节点类型：

1.  元素节点
2.  属性节点
3.  文本节点
4.  评论节点

[节点类型](https://www.w3schools.com/jsref/prop_node_nodetype.asp)

元素内的空白被视为文本，文本被视为节点。

考虑以下：

```
<ul id="myList">
  <!-- List items -->
  <li>List item 1</li> 
  <li>List item 2</li>
  <li>List item 3</li>
  <li>List item 4</li>
  <li>List item 5</li>
</ul> 
```

空格：`<ul id="myList"> <li>List item</li></ul>`

没有空格：`<ul id="myList"><li>List item</li></ul>`

[![HTMLCollection 和 NodeList 之间的区别](https://i.stack.imgur.com/2v1ED.png)](https://i.stack.imgur.com/2v1ED.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-06-01T20:31:56.920

已经讲了这么多，但想了一个更概括的答案版本，并举个例子来解释和之间的区别`HTMLCollection`，`NodeList`这会有所帮助。

## DOM 中的节点类型

*   有 12 种不同的节点类型，它们可能有各种节点类型的子节点：

[![在此处输入图像描述](https://i.stack.imgur.com/RpuJs.png)](https://i.stack.imgur.com/RpuJs.png)

*   我们可以使用以下三个属性来检查和查询 DOM 中的节点：

    *   `nodeType`财产
    *   `nodeName`财产
    *   `nodeValue`财产
*   该`nodeType`属性以数字形式返回指定节点的节点类型。

    *   如果节点是元素节点，则该`nodeType`属性将返回**1**。
    *   如果节点是属性节点，则`nodeType`属性将返回**2**。
    *   如果节点是文本节点，则该`nodeType`属性将返回**3**。
    *   如果节点是评论节点，则该`nodeType`属性将返回**8**。
    *   该属性是只读的。

## HTMLCollection 与 NodeList

[![在此处输入图像描述](https://i.stack.imgur.com/Resdv.png)](https://i.stack.imgur.com/Resdv.png)

通过以下示例，我们可以更清楚地`HTMLCollection`理解它们之间的区别。`NodeList`请尝试在您自己的浏览器控制台中检查输出以更好地理解。

```
<ul>
  <li>foo</li>
  <li>bar</li>
  <li>bar</li>
</ul> 
```

```
// retrieve element using querySelectorAll
const listItems_querySelector = document.querySelectorAll('li');
console.log('querySelector', listItems_querySelector);

// retrieve element using childNodes
const list  = document.querySelector('ul')
const listItems_childNodes = list.childNodes;
console.log('childNodes', listItems_childNodes);
const listItems_children = list.children;
console.log('children', listItems_children);

const listItems_getElementsByTagName = document.getElementsByTagName('li');
console.log('getElementsByTagName', listItems_getElementsByTagName);

console.log('*************************');
console.log('add one list item');
console.log('*************************');
list.appendChild(document.createElement('li'));

console.log('querySelector', listItems_querySelector);
console.log('childNodes', listItems_childNodes);
console.log('children', listItems_children);
console.log('getElementsByTagName', listItems_getElementsByTagName);

console.log('*************************');
console.log('add one more list item');
console.log('*************************');
listItems_getElementsByTagName[0].parentNode.appendChild(document.createElement('li'));

console.log('querySelector', listItems_querySelector);
console.log('childNodes', listItems_childNodes);
console.log('children', listItems_children);
console.log('getElementsByTagName', listItems_getElementsByTagName); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T12:02:41.317

`$("td")`是扩展的 jQuery 对象，它具有 jQuery 方法，它返回包含 html 对象数组的 jquery 对象。`document.getElementsByTagName("td")`是原始 js 方法并返回 NodeList。[看这篇文章](http://alebelcor.blogspot.com/2011/03/htmlcollections-nodelists.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-02T06:28:34.880

[**NodeList**](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)对象是 Node的集合，例如由 x 返回。[childNodes](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)属性或[document.querySelectorAll()](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)方法。在某些情况下，NodeList 是**live**的，这意味着 DOM 中的更改会自动更新集合！例如，Node.childNodes 是实时的：

```
var c = parent.childNodes; //assume c.length is 2
parent.appendChild(document.createElement('div'));
//now c.length is 3, despite the `c` variable is assigned before appendChild()!!
//so, do not cache the list's length in a loop. 
```

但在其他一些情况下，NodeList 是**静态**的，DOM 中的任何更改都不会影响集合的内容。[querySelectorAll()](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)返回一个静态 NodeList。

HTMLCollection是一个**实时且有序的元素****[集合](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection)**（当基础文档更改时它会自动更新）。它可以是子属性或 document.getElementsByTagName() 等方法的结果[，](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children)并且[只能](https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName)将**HTMLElement****[作为](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement)**其项目。

 **HTMLCollection 还通过名称和索引将其成员直接公开为属性：

```
var f = document.forms; // this is an HTMLCollection
f[0] === f.item(0) === f.myForm //assume first form id is 'myForm' 
```

HTMLElement 只是节点的一种类型：

[![节点 << HTMLElement 继承](https://i.stack.imgur.com/jPfQP.png)](https://i.stack.imgur.com/jPfQP.png)

节点可以是[多种类型](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)。最重要的如下：

*   element (1)：一个 Element 节点，例如`<p>`或`<div>`。
*   属性 (2)：元素的属性。元素属性不再实现 DOM4 规范中的 Node 接口！
*   text (3)：元素或属性的实际文本。
*   评论（8）：评论节点。
*   文档（9）：文档节点。

所以，一个很大的区别是 HTMLCollection 只包含 HTMLElements 但 NodeList 还包含注释、空白文本（回车符、空格..）等。检查它，如下面的片段：

```
function printList(x, title) {
  console.log("\r\nprinting "+title+" (length="+x.length+"):");
  for(var i=0; i<x.length; i++) {
    console.log("  "+i+":"+x[i]);
  }
}

var elems = document.body.children; //HTMLCollection
var nodes = document.body.childNodes; //NodeList

printList(elems, "children [HTMLCollection]");
printList(nodes, "childNodes [NodeList]");
```

```
<div>para 1</div><!-- MyComment -->
<div>para 2</div>
```

HTMLCollection 和 NodeList 都包含可以用来**遍历**它们的项目的**长度属性。**不要使用 for...in 或 for each...in 来枚举 NodeLists 中的项目，因为如果您的脚本假定它只需要处理元素对象，它们也会枚举其长度和项目属性并导致错误。此外，for..in 不保证以任何特定顺序访问属性。

 **```
for (var i = 0; i < myNodeList.length; i++) {
  var item = myNodeList[i];
} 
```****

# css - 以小分辨率查看时响应式站点上的额外水平宽度

> ID：15763368
> 
> 赞同：0
> 
> 时间：2013-04-02T11:50:58.803
> 
> 标签：css, twitter-bootstrap

我已经使用 Twitter Bootstrap 创建了一个响应式网站，但是当我以 320x480 的屏幕分辨率查看该网站时，会出现一个水平滚动条，因为该网站似乎有额外的 20px-30px 宽度。您可以通过水平向右滚动来看到这一点。

我检查了构成页面的元素，但是我无法弄清楚是什么导致了这个额外的宽度——理想情况下，我不希望在 320x480 分辨率下进行任何水平滚动。

检查元素后，您可以通过在 Google Chrome 中将分辨率更改为 320x480 来查看问题。

这是网站：

[http://www.bestcastleintown.co.uk/wp/](http://www.bestcastleintown.co.uk/wp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:08:30.593

这是导致问题的`.jumbotron`和`.footer`css 规则`margin-right: -20px;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:55:38.143

您是否启用了 Bootstrap 的响应功能？

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

请注意 bootstrap-responsive.css 必须包含并在您的网站上引用

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:04:32.110

您可以尝试将页眉和页脚标签的横向边距从 -20px 重置为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:31:31.297

试试这个：

```
.footer{
     width: 85%;
     margin: 0 auto;
     /* other css properties */
} 
```

# gwt - GWT CAS Tomcat 部署失败

> ID：15763374
> 
> 赞同：0
> 
> 时间：2013-04-02T11:51:08.700
> 
> 标签：gwt, tomcat, cas

我用 CAS 升级了我的 GWT 项目。当我在开发模式下测试它时，它工作正常。现在我想将我的项目部署到tomcat。当我运行它时，我可以访问 CAS 服务器。但是当 CAS 服务器将我引导回我的 webapp 时，我收到了这个错误。

> > HTTP 状态 500 - javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径
> 
> 类型异常报告
> 
> 消息 javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径
> 
> 描述 服务器遇到一个内部错误，阻止它完成这个请求。
> 
> 例外
> 
> java.lang.RuntimeException：javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到到请求的目标 org.jasig 的有效证书路径。 cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:295) org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate( AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig。卡斯。client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
> 
> 根本原因
> 
> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径 sun.security.ssl.Alerts.getSSLException（ Alerts.java:192) sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1902) sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276) sun.security.ssl.Handshaker.fatalSE(Handshaker. java:270) sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1338) sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154) sun.security.ssl.Handshaker.processLoop(Handshaker.java: 868）sun.security.ssl.Handshaker.process_record（Handshaker.java:804）sun.security.ssl.SSLSocketImpl.readRecord（SSLSocketImpl.java:1032）太阳。security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1328) sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355) sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339) sun.net。 www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:515) sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185) sun.net.www.protocol.http.HttpURLConnection.getInputStream( HttpURLConnection.java:1299) sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254) org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:281) org.jasig。 cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client。 authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java: 110)doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
> 
> 根本原因
> 
> sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到到请求的目标 sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:385) sun.的有效证书路径。 security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292) sun.security.validator.Validator.validate(Validator.java:260) sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:326) sun.security。 ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231) sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126) sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1320) sun.security.ssl。 ClientHandshaker.processMessage(ClientHandshaker.java:154) sun.security.ssl。Handshaker.processLoop(Handshaker.java:868) sun.security.ssl.Handshaker.process_record(Handshaker.java:804) sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1032) sun.security.ssl.SSLSocketImpl。 performInitialHandshake(SSLSocketImpl.java:1328) sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355) sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339) sun.net.www.protocol.https。 HttpsClient.afterConnect(HttpsClient.java:515) sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185) sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1299) sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254) org.jasig.cas.client.util.CommonUtils。getResponseFromServer(CommonUtils.java:281) org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java: jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter。 doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org. jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter。 doFilter(SingleSignOutFilter.java:110)retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org. jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter。 doFilter(SingleSignOutFilter.java:110)AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
> 
> 根本原因
> 
> sun.security.provider.certpath.SunCertPathBuilderException: 无法找到到请求的目标 sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196) java.security.cert.CertPathBuilder.build(CertPathBuilder.java) 的有效证书路径:268) sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380) sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292) sun.security.validator.Validator.validate(Validator.java:260 ) sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:326) sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231) sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126) sun .security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1320) 太阳。security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154) sun.security.ssl.Handshaker.processLoop(Handshaker.java:868) sun.security.ssl.Handshaker.process_record(Handshaker.java:804) sun.security。 ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1032) sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1328) sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355) sun.security.ssl。 SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339) sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:515) sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185) sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1299) sun.net.www.protocol.https.HttpsURLConnectionImpl。getInputStream(HttpsURLConnectionImpl.java:254) org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:281) org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org. jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter。 doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)110)110)client.util.CommonUtils.getResponseFromServer(CommonUtils.java:281) org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator. java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas。 client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)client.util.CommonUtils.getResponseFromServer(CommonUtils.java:281) org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator. java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas。 client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validationFilter(AbstractTicketValidationFilter.do 132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client。 session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:33) org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validationFilter(AbstractTicketValidationFilter.do 132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client。 session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:178) org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:132) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:102) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
> 
> note Apache Tomcat/7.0.37 日志中提供了根本原因的完整堆栈跟踪。Apache Tomcat/7.0.37

无法弄清楚如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:13:03.930

我假设您启用`https=true`了`deployDescriptor.xml`. 为了使 CAS 与您一起工作，`HTTPS` 您必须创建一个[密钥库](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html)文件

[创建密钥库文件](http://docs.oracle.com/cd/E19636-01/819-1655/fapsf/index.html)

# sql - 错误：服务器意外关闭连接

> ID：15763378
> 
> 赞同：1
> 
> 时间：2013-04-02T11:51:31.953
> 
> 标签：sql, postgresql

当我连接到服务器时，`PostgreSQL`我收到此错误：

```
Server closed the connection unexpectedly. 
This probably means the server termitate abnormally before or 
while processing the request 
```

如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:07:29.297

在win2k本地运行postgres时出现这个问题

[看这里](http://www.postgresql.org/message-id/KHEIKOKBEDHELABAIIMOAEDECDAA.carla@future-web-solutions.net)

# c++ - std::ostream tellp() 在 VS2010 中给出错误的输出

> ID：15763379
> 
> 赞同：0
> 
> 时间：2013-04-02T11:51:34.857
> 
> 标签：c++, visual-c++

下面是我正在运行的代码和相应的输出。

```
 #include<iostream>
    #include <sstream>
    #include <strstream>
    #include <streambuf>

    template <typename char_type>
struct ostreambuf : public std::basic_streambuf<char_type,std::char_traits<char_type> >
{
 ostreambuf(char_type* buffer, std::streamsize bufferLength)
{
    // set the "put" pointer the start of the buffer and record it's length.
    setp(buffer, buffer + bufferLength);
}
};

int main()            
{
 char strArr[]    = "Before-1";
 char stringArr[] = "Before-2";

 std::strstream strStream(strArr,sizeof(strArr));

 ostreambuf<char> ostreamBuffer(stringArr, sizeof(stringArr));
 std::ostream stringStream(&ostreamBuffer);

  const std::streampos posStringBefore = stringStream.tellp();

   std::cout << "Before: "
                                    << "strArr = " 
                                    << strArr 
                                    << " & "
                                    << "stringArr = "
                                    << stringArr
                                    << std::endl;

            std::cout << "Before: " << "posStringBefore = "
                                    << posStringBefore
                                    << std::endl;

            // -------------------------
            strStream << "After-1";
            stringStream << "After-2";
            const std::streampos posStringAfter = stringStream.tellp(); 

            std::cout << "After : "
                                    << "strArr = " 
                                    << strArr 
                                    << " & "
                                    << "stringArr = "
                                    << stringArr
                                    << std::endl;

            std::cout << "After : " << "posStringAfter = "
                                    << posStringAfter
                                    << std::endl;

            return 0;
} 
```

这是 VS2010 上的 o/p ：

```
 Before: strArr = Before-1 & stringArr = Before-2
 Before: posStringBefore = -1
 After : strArr = After-11 & stringArr = After-22
 After : posStringAfter = -1 
```

参考链接 [设置标准流使用的内部缓冲区（pubsetbuf）](https://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf)

如何获取创建的 std::ostream 对象的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:22:24.483

它不会给你一个“错误的”输出/价值。`tellp`使用`rdbuf()->pubseekoff`which 将呼叫中继到`virtual seekoff`. `basic_streambuf`实现只是按照 C++ 标准中的`-1`定义返回。你需要在你的`ostreambuf`类中为这个方法提供一个自己的实现。

参见[cppreference：`basic_streambuf::pubseekof`](http://en.cppreference.com/w/cpp/io/basic_streambuf/pubseekoff)

# css - 需要对 em 和 rem 单位进行故障排除以实现响应式布局

> ID：15763383
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:51:53.377
> 
> 标签：css

大家好，

我正在为我的公司开发一个网站，建议布局应该响应智能手机上的显示，我知道使用基于像素的布局对于响应式布局来说不是一个好主意，所以我决定坚持使用相对/弹性单元但是我感到困惑的是，我应该服用 EM 还是 REM，然后有几个问题是：

*   如果我使用 EM 单元，我必须面对复合问题。
*   如果我使用 REM 单元，我必须面对跨浏览器问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:59:15.487

在我的布局中，我使用组合。这需要更多的工作，但似乎做得很好。

这样做的基础是，如果一个值无效，浏览器将不会使用它。另外，CSS 是级联的，所以它总是使用最新的指定属性（如果选择器路径完全相同）。

如果我设置边距，我会这样做：

```
margin-left:1.25em;
margin-left:1rem; 
```

以这种格式进行操作可以两全其美。关于如何处理这种情况，有一些很棒的文章：

*   [http://css-tricks.com/font-sizing-with-rem/](http://css-tricks.com/font-sizing-with-rem/)
*   [http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

# ios - 获取 NSString 并将其修改为另一个 NSString？

> ID：15763384
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:51:57.813
> 
> 标签：ios, objective-c

我有一个`NSString`在控件上给出输入值的。

我想获取这些值并将它们转换为用户显示。又名，**值 0.7 是 1**，**值 1.3 是 5**。等等

我试过写一个 if 语句，比如

```
if self.label.text = 0.7
   self.labelone.text = 1 
```

但我不知道应该在哪里写或者我应该使用什么代码。
我只需要 6 个值，所以即使实现它的方式很混乱，我也不介意。

我搜索了很多资源，但我找不到任何东西或任何人试图尝试类似的东西，这让我相信它要么非常简单，要么我错过了一些非常简单的东西。

这是`UILabel`我正在尝试转换和修改的代码

```
- (IBAction)rotaryKnobDidChange
{
    self.label.text = [NSString stringWithFormat:@"%.3f", self.rotaryKnob.value];
    self.slider.value = self.rotaryKnob.value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:11:07.103

要比较两个变量，您应该使用`==`而不是`=`. 而您正试图`CGFloats`与`NSStrings`.

使用这样的东西：

```
if([yourLable.text isEqualToString: @"0.7"]){
     [otherLable setText: @"1"];
} else {
    if ([yourLable.text isEqualToString: @"1.3"]){
        [otherLable setText: @"5"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:56:39.070

您的问题的简单答案：

```
if ([self.label.text isEqualToString:@"0.7"])
    self.labelone.text = @"1";
else if ([self.label.text isEqualToString:@"1.3"])
    self.labelone.text = @"5"; 
```

但我不认为这真的是你想要的代码。

# vhdl - 基本元素的 VHDL 库

> ID：15763386
> 
> 赞同：1
> 
> 时间：2013-04-02T11:52:11.643
> 
> 标签：vhdl

我从 VHDL 开始，在尝试实现一个电路时，我发现我需要像`leading one/zero detectors`or之类的基本元素`leading one/zero counters`。因为我认为这些是基本的，所以我想知道是否有一个*库*可以包含。

如果我必须将自己的实现放在一起，是否有一个可以从中复制的集合，或者我是否需要重新发明轮子？

（我可以一一谷歌它们并在论坛中找到实现，但是其中一些看起来很糟糕/实现不够通用（[即这个多路复用器](http://www.openhdl.com/vhdl/780-simple-vhdl-multiplexer.html)））。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:29:18.500

您建议的方法（一个简单的可重用元素库）没有流行的一个原因是：没有它们，您通常会过得更好。

您链接到的示例多路复用器很好地说明了这一点：

```
ENTITY multiplexer IS
PORT (
   a, b, c, d, e, f, g, h : IN STD_LOGIC;
   sel : IN STD_LOGIC_VECTOR(2 DOWNTO 0);
   y : OUT STD_LOGIC
);
END ENTITY multiplexer; 
```

给定更好的设计，使用您可以编写的类型系统（也许在可重用的包中）

```
subtype sel_type is natural range 0 to 7; 
```

然后在你的设计中，给定信号声明

```
signal sel_inputs : std_logic_vector(sel_type);
signal sel        : sel_type;
signal y          : std_logic; 
```

你可以简单地写

```
sel_inputs <= a & b & c & d & e & f & g & h;
y          <= sel_inputs(sel); 
```

比实际实例化多路复用器组件要少得多。

前导零检测器乍一看更难：它们通常实现为时钟进程，或作为更大时钟进程的一部分。

VHDL 的最新趋势正在朝着可综合 VHDL 的半行为风格发展，其中很多内容是在单个时钟进程中以顺序风格编写的。这在“单进程状态机”中表现得最好；比仍然普遍教授的“两个过程”风格更小，更容易理解并且绝对更可靠*。

（* 除非您的工具支持组合过程的 VHDL-2008 的“过程（全部）”敏感性列表。）

在时钟进程内（即假设以下是在`if rising_edge(clk) then`简单任务内，例如计算数组中的前导零可以使用`for`循环表示；例如：

```
 for i in sel_type loop
      if sel_inputs(i) = '1' then
         zero_count <= sel_type'high - i;
      end if;
   end loop; 
```

最后一个任务将获胜；如果 h = '1' 计数将为 0，否则如果 g = '1' 计数将为 1，依此类推。

现在它不是单行的，除非你为它编写一个程序（也可以用大多数工具综合！）但是将它与实体实例化（和互连）的大小进行比较。

当然，程序库和函数库会很有用。并且（对于不那么琐碎的任务）实体也是如此，但在我看来，使它们足够通用以对所有人有用，而不使它们变得重量级，将是一项相当大的成就。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:40:09.897

一些 IDE 直接带有示例库。例如，Xilinx ISE 有“语言模板”部分，其中包含基本综合结构、编码示例……

# silverlight - Silverlight 编码标准

> ID：15763390
> 
> 赞同：2
> 
> 时间：2013-04-02T11:52:20.440
> 
> 标签：silverlight

我们为遵循 MVVM 模式的标准 Silverlight 应用程序使用的编码标准是什么？Microsoft 有什么可用的吗？标准指南适用于 C#，我正在寻找针对 Silverlight 的特定内容。

谢谢
索尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:19:32.977

MS 有一些关于它的文档，但看起来不像 CLS-Compliance

微软模式与实践 [http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx)

我不认为设计模式有我们应该遵守的严格规则。关键是解决问题，但知道它是如何在我们之前解决的......

如果你有一个大项目，你可以制定自己的规则。

# php - 删除数组php中的空格

> ID：15763393
> 
> 赞同：1
> 
> 时间：2013-04-02T11:52:26.220
> 
> 标签：php, arrays

对于这个数组，

```
Array ( 
  [0] => 'HOST:' 
  [1] => 'killbill' 
  [2] =>  
  [3] =>  
  [4] =>  
  [5] =>  
  [6] =>  
  [7] => 
  [8] => 
  [9] => 
  [10] => 
  [11] => 'Loss%' 
  [12] => 
  [13] => 
  [14] => 'Snt' 
  [15] => 
  [16] => 
  [17] => 'Last' 
  [18] => 
  [19] => 
  [20] =>'id'
) 
```

它有空值。通过使用它给出的这段代码

```
foreach($array as $key => $subarray) {
    $array[$key] = preg_grep('/^$/', $subarray, PREG_GREP_INVERT);
}

array ( 
  [0] => HOST: 
  [1] => killbill 
  [11] => Loss% 
  [14] => Snt 
  [17] => Last 
  [20] =>id
) 
```

这意味着它会删除所有空格。但它具有原始键值。（比较上面一个和下面一个。然后可以清楚地知道我在说什么）。但我想要这样。

```
array ( 
  [0] => 'HOST:' 
  [1] => 'killbill' 
  [2] => 'Loss%'
  [3] => 'Snt' 
  [4] => 'Last' 
  [5] => 'id'
) 
```

键值为 1,2,3,4.... 所以我怎么能得到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:55:32.430

只需使用它而不是`Foreach`

```
array_values(array_filter($array)); 
```

这将删除空间并重新排列您的阵列。

看：[http ://codepad.org/howl3Opj](http://codepad.org/howl3Opj)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:58:00.317

只需使用[`array_filter()`](http://php.net/manual/en/function.array-filter.php).

```
$array = array_filter($array); 
```

这将删除所有空值——即空白、、、`null`零`false`。

如果您只想删除空字符串的值并保留其他空值（例如零），您可以为 指定第二个参数`array_filter()`，它允许您定义一个函数来指定应过滤哪些元素。

```
$array = array_filter($array, function($val) {return $val!=='';}); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:54:24.137

试试这个功能，它将帮助您解决问题

```
$arr = array_map('array_values', $arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T11:54:45.583

使用[array_diff](http://www.php.net/manual/en/function.array-diff.php)函数

```
<?php

   $array_space = array(0,3,4,45,12,"",54,23);

   $remove = array("");

   print_r(array_diff($array_space,$remove));

?> 
```

[请参阅此处的输出](http://codepad.org/f1ibRrWO)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-01T11:00:03.613

一开始你需要取我给他一个名字 $arrWords 的数组

```
$arrWords = array_filter($arrWords, 'trim'); 
```

在我清理所有空白空间后，我将制作新的数组键

```
$arrWords = array_values($arrWords); 
```

# python - 用补丁模拟两个函数以进行单元测试

> ID：15763394
> 
> 赞同：94
> 
> 时间：2013-04-02T11:52:29.120
> 
> 标签：python, unit-testing, testing, mocking, nose

我有一个要单元测试的函数包含调用其他两个函数。我不确定如何使用补丁正确地同时模拟这两个函数。我在下面提供了一个例子来说明我的意思。当我运行鼻子测试时，测试通过了，但我觉得必须有一种更清洁的方法来做到这一点，我并不真正理解关于 f.close() 的文章......

目录结构如下所示：

```
program/
  program/
    data.py
  tests/
    data_test.py 
```

数据.py：

```
import cPickle

def write_out(file_path, data):
    f = open(file_path, 'wb')
    cPickle.dump(data, f)
    f.close() 
```

数据测试.py：

```
from mock import MagicMock, patch

def test_write_out():
    path = '~/collection'
    mock_open = MagicMock()
    mock_pickle = MagicMock()
    f_mock = MagicMock()
    with patch('__builtin__.open', mock_open):
        f = mock_open.return_value
        f.method.return_value = path
        with patch('cPickle.dump', mock_pickle):
            write_out(path, 'data')
            mock_open.assert_called_once_with('~/collection', 'wb')
            f.close.assert_any_call()
            mock_pickle.assert_called_once_with('data', f) 
```

结果：

```
$ nosetests
.
----------------------------------------------------------------------
Ran 1 test in 0.008s
OK 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-04-10T09:47:39.613

您可以通过使用补丁装饰器并像这样嵌套它们来简化测试（默认情况下它们是`MagicMock`对象）：

```
from unittest.mock import patch

@patch('cPickle.dump')
@patch('__builtin__.open')
def test_write_out(mock_open, mock_pickle):
    path = '~/collection'
    f = mock_open.return_value
    f.method.return_value = path

    write_out(path, 'data')

    mock_open.assert_called_once_with('~/collection', 'wb')
    mock_pickle.assert_called_once_with('data', f)
    f.close.assert_any_call() 
```

对实例的调用会`MagicMock`返回一个新`MagicMock`实例，因此您可以检查返回的值是否像任何其他模拟对象一样被调用。在这种情况下`f`是一个`MagicMock`命名`'open()'`（尝试打印`f`）。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-06-12T08:55:13.420

除了响应@Matti John，您还可以使用`patch`内部函数`test_write_out`：

```
from mock import MagicMock, patch

def test_write_out():
    path = '~/collection'
    with patch('__builtin__.open') as mock_open, \
            patch('cPickle.dump') as mock_pickle:

        f = mock_open.return_value
        ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T19:13:38.227

这是一个关于如何使用模拟测试函数提升`ConflictError`的简单示例：`create_collection`

```
import os
from unittest import TestCase
from mock import patch
from ..program.data import ConflictError, create_collection

class TestCreateCollection(TestCase):
    def test_path_exists(self):
        with patch.object(os.path, 'exists') as mock_method:
            mock_method.return_value = True

            self.assertRaises(ConflictError, create_collection, 'test') 
```

请参阅[mock 文档](http://www.voidspace.org.uk/python/mock/)和 Michael Foord[对 mock 的精彩介绍](http://www.youtube.com/watch?v=d3_LdLzWSXQ)。

# android - 在 ProviderTestCase2 中找不到 Android 资源

> ID：15763399
> 
> 赞同：3
> 
> 时间：2013-04-02T11:52:38.270
> 
> 标签：android, android-contentprovider, android-resources, android-testing

我目前正在为我的应用程序编写一个 csv-file-importer，但我很难为它编写测试。我要做的是导入一个示例 csv 文件并将结果与​​数据库进行比较。

```
public class CSVImportTest extends ProviderTestCase2<MyProvider> {

    @Override
    protected void setUp() throws Exception {
        super.setUp();

        mContentResolver = getMockContentResolver();
        setContext(new IsolatedContext(mContentResolver, getContext()));
        mContext = getContext();
        mCSVImport = new CSVImportParker(mContext);

    }

    public void read() {
        try {
            // Fails here with "File not found."
            InputStream input = mContext.getResources()
                 .openRawResource(my.package.R.raw.file);

            ...
        } catch (Exception e) {
            e.printStackTrace();
            fail();
        }

        ...
    }

} 
```

永远找不到测试文件，尽管它位于正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T00:07:37.967

问题是原始目录中的资源被压缩，除非它们具有 ogg 或 mp3 文件扩展名。请参阅此说明：

[Proguard 破坏资产或原始音频文件](https://stackoverflow.com/questions/21440572/proguard-breaking-audio-file-in-assets-or-raw)

并从[文档](http://developer.android.com/reference/android/content/res/Resources.html#openRawResourceFd(int))

```
This function only works for resources that are stored in the package as uncompressed data, which typically includes things like mp3 files and png images. 
```

因此，解决此问题的最简单方法是将 mp3 或 ogg 文件扩展名添加到您的原始资产中。它不干净也不漂亮，但它确实有效。

# android - Android ViewPager 滞后

> ID：15763407
> 
> 赞同：12
> 
> 时间：2013-04-02T11:52:51.803
> 
> 标签：android, android-viewpager

您好，我有一个带有多个页面的视图分页器（使用片段状态分页器），还有一些 png 作为这些页面的背景。我已经遵循了 Ui 中的显示位图（[http://developer.android.com/training/displaying-bitmaps/display-bitmap.html](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)），所以我已经在后台线程中缓存和设置可绘制的图像。但是在切换寻呼机页面时我仍然会遇到一些滞后。在每个片段上，我只对 onCreateView() 方法的视图进行膨胀，所以我不知道是什么导致了这种滞后。我能做些什么来消除这种滞后/断断续续的影响？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-15T03:27:53.817

我有类似的问题。

我正在显示类似教程的页面。每页都是全屏jpg。

起初，我把图片放在`res/drawables`文件夹里。浏览器在滑动时非常滞后。

> 然后我将这些 jpg文件移到`res/drawable-hdpi`文件夹中，延迟消失了。

我认为根据文件夹对图片进行了不同的优化。所以我们不能把所有东西都放在`res/drawable`文件夹里

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-27T23:35:14.600

您可能想尝试将 viewPager.setOffScreenLimit(size) 设置为您的页面数。这将加载所有片段一次，并防止在滑动时重新加载它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-12T04:25:06.290

为了消除滞后：

1）如果图像是静态的，则将图像放在 res/drawable-hdpi 中。如果是从 URL 下载的，则使用后台线程加载图像。

**2) 通过此方法viewPager.setOffScreenLimit(size)**设置页面关闭屏幕限制 。在该视图寻呼机缓存的帮助下，您在此方法中设置的最小屏幕数默认为 1。

3）您可以使用**FragmentPagerAdapter**和**FragmentStatePagerAdapter**以获得更好的性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-15T12:34:00.243

我按照[Coderek](https://stackoverflow.com/users/1074622/coderek)的回答，在不同的

**res/drawable-hdpi 文件夹**

drawable-xxxhdpi 最适合我的项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-06T20:51:31.513

我通过将图像移动到 drawable-nodpi 来解决这个问题，因为这会禁用所有 DPI 的缩放。只有当用户在具有该屏幕密度的设备上时，移动到 hdpi/xhdpi 才会禁用缩放。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-20T21:23:29.263

我在切换页面时避免这种滞后的解决方案是：预加载图像

```
final Drawable[] images = new Drawable[3];
for(int i=0; i<3; i++){
    int position = i+1;
    images[i] = getResources().getDrawable(getResources().getIdentifier("image"+position, "drawable", getPackageName()));
 } 
```

接着：

```
mViewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {
            imageSwitcher.setImageDrawable(images[position]);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }
    }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-18T19:40:29.497

我知道这是一个老问题，但我最近遇到了这个问题并发现了一个不同的问题。所以只是分享，以防有人遇到这篇文章。

我的片段基本上都是大的 Imageview 持有者，并滚动浏览 UX/UI 团队给我的图像。然而，任何时候下一个或上一个图像的尺寸不同，例如，(1200 x 1200) 过渡到 (1200 x 1300)，滑动就会滞后，但其余的都可以。

解决方案位于正确的文件夹中。我进行了实验，发现如果我将所有图像裁剪为相同大小，我就没有滞后问题。但是，这不符合我的需要，因为我想要不同尺寸的图像。

所以我改用 Glide 将图像加载到位，而不是直接设置可绘制对象，这样可以很好地清理它。因此，如果其他人遇到此问题，您可能只需要切换到使用 glide 异步加载，而不是直接设置图像。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-31T18:31:01.797

在@coderek 回答的基础上，我似乎已经通过获取位图而不将它们缩放为特定密度来解决这个问题：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inScaled = false;
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), resource, opts);

((ImageView) view).setImageBitmap(bitmap); 
```

使用设备中`drawable`文件夹中的图像`xxhdpi`可分配多达 8 倍的内存！

PS：

如果分辨率太大，您还可以对可绘制对象进行下采样：

```
opts.inSampleSize = 2; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-02T13:45:53.227

我也有类似的问题，在我的情况下，滞后是由太大的布局背景图片引起的。我刚刚调整了图片的大小，滑动延迟消失了

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-27T13:31:38.477

以上解决方案均不适用于我的情况！

我找到了一个可以解决这个问题的库，并且还包含一些更有趣的功能。[看看这里！](https://github.com/ToxicBakery/ViewPagerTransforms)

尝试这个：

**在毕业**

```
compile 'com.ToxicBakery.viewpager.transforms:view-pager-transforms:1.2.32@aar' 
```

**创建**

```
viewPager.setPageTransformer(true, new DefaultTransformer()); 
```

您可以通过更改第二个参数来获得一些非标准效果，但并非所有效果都能正常工作。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-07-10T12:23:49.317

我没有移动到 res/drawable-hdpi，而是将图像移动到 res/drawable-xxxhdpi。这立即解决了问题。

# asp.net - 在 ASP.NET 中验证年龄限制

> ID：15763414
> 
> 赞同：0
> 
> 时间：2013-04-02T11:53:07.020
> 
> 标签：asp.net, validation

我是 ASP.NET 的新手，我想设置`RangeValidator`18 岁以上的出生日期。我已经设置了，但它不起作用。

我该如何解决？

```
<asp:RangeValidator ID="RangeValidator1" runat="server" ControlToValidate="txtDOB"
                    ErrorMessage="less than 18 " MaximumValue="01/01/1995" MinimumValue="01/01/1888"
                    SetFocusOnError="True" Type="Date" Style="color: #FF0000;"></asp:RangeValidator> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:22:29.427

我建议您使用`asp:CustomValidator`带有客户端 javascript 函数的 an 。

[自定义验证器](http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.100%29.aspx)

你可以做这样的事情（注意，这是**未经测试**的，就在我的脑海中）：

```
<asp:CustomValidator ID="CustomValidator1" runat="server" 
    EnableClientScript="true"
    ErrorMessage="less than 18"
    ClientValidationFunction="checkDate" 
    ControlToValidate="txtDOB">
</asp:CustomValidator> 
```

假设日期以这种格式写入“dd/MM/yyyy”

```
function checkDate() {
   var enteredDate=document.getElementById('<%=txtDOB.ClientID%>').value;
   var dateValues=enteredDate.split("/");
   var dateToCheck = new Date(dateValues[2], dateValues[1]-1, dateValues[0]);
   var today = new Date();
   var dateValid = new Date(today.getFullYear()-18, today.getMonth()-1, today.getDate());
   if (dateToCheck < dateValid) {
     args.IsValid = false;
   }
   else {
     args.IsValid = true;
   }
} 
```

**笔记**

1.  javascript 在 1 月使用 0，因此在当月使用 -1。
2.  您应该在自定义验证器中添加一个 ServerValidation 函数，以防 javascript 被禁用。

# c++ - 使用 const_cast<> 时出现意外输出

> ID：15763416
> 
> 赞同：1
> 
> 时间：2013-04-02T11:53:08.147
> 
> 标签：c++, const-cast

我在下面编写了我的机器（devcpp）和codepad.org的代码，但我的匹配工作正常，并且在codepad.org（[http://codepad.org/XfW5a8en](http://codepad.org/XfW5a8en)）上输出是一个垃圾字符。

> ```
>  #include <iostream>
>     #include<cstring>
>     using namespace std;
>     int main () {
>         char *str1 =const_cast<char*>(string("Hello ").c_str());
>         char *str2 = const_cast<char*>(string("World!").c_str());
>         char *ptr = str1;
>         char *&rptr = str1;
>         rptr = str2;
>         std::cout << ptr << str1 << std::endl;
>     } 
> ```

我期待输出为 Hello World！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T11:55:42.113

当您说不`string("Hello ")`将其存储在任何地方时，该字符串可以在创建它的表达式的末尾被销毁。

您正在获取一个指向该已破坏字符串所拥有的内存的指针，该内存可能会或可能不会在`"Hello "`之后的一段时间内保持 的值，但不确定是否会发生这种情况或持续多长时间。

它只在你的机器上工作，因为有时“未定义的行为”意味着“看起来它有效”。:-)

# android - 如何对android中的本地数据库进行语音识别检查？

> ID：15763419
> 
> 赞同：3
> 
> 时间：2013-04-02T11:53:13.187
> 
> 标签：android, voice-recognition

你还记得在旧手机中，你可以制作一个语音快捷方式来打电话给一个人。

我正在尝试使用该功能在android中制作应用程序。用户录制想要控制应用程序的单词或声音，语音识别器只会检查它听到的声音是否等于之前录制的声音。

有谁知道如何制作或知道指南？我一直在寻找几个月没有找到令人满意的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:17:52.577

您需要将参考声音和录制的声音都转换为特征。为此，您需要在帧上拆分声音并提取 FFT 或直接 mel-cepstrum。为此，您可以使用任何 MFCC 库。

获得特征后，您可以将它们与 DTW 算法进行比较。你可以在这里找到一些细节

[http://en.wikipedia.org/wiki/Dynamic_time_warping](http://en.wikipedia.org/wiki/Dynamic_time_warping)

DTW 将返回您可以用来选择合适的人来呼叫的阈值。

类似的问题是

[测量两个短音频相似度的最简单算法](https://stackoverflow.com/questions/15653466/simplest-algorithm-of-measuring-how-similar-of-two-short-audio)

# jquery - jquery滑块任务

> ID：15763422
> 
> 赞同：0
> 
> 时间：2013-04-02T11:53:18.490
> 
> 标签：jquery, slider

我这里有滑块。当它是 2 张或更多照片时，效果很好。但是当只有一张照片时，它仍然在滑动。如何使滑块不隐藏和显示一张图像？

```
 (function($){
        $.fn.MySlider = function(interval) {
            var slides;
            var cnt;
            var amount;
            var i;

            function run() {
                // hiding previous image and showing next
                $(slides[i]).fadeOut(1000);
                i++;
                if (i >= amount) i = 0;
                $(slides[i]).fadeIn(1000);

                // updating counter
                cnt.text(i+1+' / '+amount);

                // loop
                setTimeout(run, interval);
            }

            slides = $('#my_slider').children();
            cnt = $('#counter');
            amount = slides.length;
            i=0;

            // updating counter
            cnt.text(i+1+' / '+amount);

            setTimeout(run, interval);
        };
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:57:43.590

你为什么不通过替换来检查数量是否大于一

```
setTimeout(run, interval); 
```

和

```
if (amount > 1) {
    setTimeout(run, interval);
} 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:57:50.737

简单的答案是当数量大于 1 时不运行 setTimeout 部分。我相信还有更多。也许你可以在 jsFiddle 中加载它

```
if(amount > 1)
setTimeout(run, interval); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:57:52.420

您应该在开始幻灯片之前检查图像计数。

将代码更改为：

```
if (amount>1){
setTimeout(run, interval)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T11:59:03.877

将整个函数包装在 if 语句中以检查是否有多个图像。

```
if ( $('#my_slider').children().length > 1 ){
    //run function
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T11:59:36.840

我要做的是检查图像的数量是否为 1 或更多，并在此基础上运行您的 Slider 方法或仅将单个图像绑定到 div 元素。

# mysql - 按周计算所有类型的设备

> ID：15763423
> 
> 赞同：0
> 
> 时间：2013-04-02T11:53:23.200
> 
> 标签：mysql, symfony, doctrine-orm

我有一张桌子：

```
idint(11) NOT NULL
type varchar(64) NOT NULL
created_on datetime NOT NULL 
```

使用doctrine2时，我可以在一个查询中按周计算所有类型的设备（iSO、Android ...）吗？

样本输出：

```
Week iOS Android Other
1     4    5       6
2     3    5       9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:18:46.320

这是完全可能的，使用类似于[一年中某些列的输出总和中详述的方法，以周为间隔，周日期与日期一致，](https://stackoverflow.com/questions/15539719/output-sum-of-some-column-in-week-intervals-throughout-a-year-week-dates-consis/15569190#15569190)但在您描述的输出中并不容易。处理此问题的最佳方法是执行 SELECT，按 WEEK 和 TYPE 分组。IE

```
SELECT

    -- Get the week and month of each row
    YEAR(created_on) AS Year,
    WEEK(created_on) AS Week,
    type

    -- Count how many rows are in this group
    COUNT(*) AS frequency

FROM yourTable AS yt

-- Order by month and then week, so that week 4 in Jan comes before week 4 in Feb
GROUP BY
    Year ASC,
    Week ASC,
    type ASC 
```

这将给出输出，例如

```
Year    Week    Type       frequency
2013    1       'iOS'      4
2013    1       'Android'  5
2013    1       'Other'    6
2013    2       'iOS'      3
2013    2       'Android'  5
2013    2       'Other'    9 
```

# hibernate - 使用 a4j:commandButton 提交第二次 ajax 后 jsf 验证阶段的 LazyLoadingException

> ID：15763426
> 
> 赞同：1
> 
> 时间：2013-04-02T11:53:43.323
> 
> 标签：hibernate, jsf, richfaces, lifecycle

当我尝试使用 a4j:commandButton 第二次提交表单时遇到问题

我的看法是：

```
<h:form id="myform">      
    <a4j:region renderRegionOnly="true">
        <h:panelGroup>
            <h:inputText size="4" maxlength="2"
                id="input1"
                value="#{departementController.departement.name}">
            </h:inputText>
            <h:inputText size="4" maxlength="2"
                id="input1"
                value="#{departementController.departement.subdepartement.name}">
            </h:inputText>
        </h:panelGroup>
    </a4j:region>

    <h:panelGrid columns="1">
        <a4j:commandButton
            value="save"
            action="#{departementController.validateDepartement}"/>
    </h:panelGrid>
</h:form> 
```

当我第一次点击保存时，一切正常，更改已保存。但是当我第二次点击保存时，我得到了这个：

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session 
```

我检查了，第二次根本没有调用 validateDepartement() 方法，我只是得到了这个异常，并且保存失败。只是说我正在使用视图中的打开会话（视图中的事务）来处理视图中的延迟加载。

提前致谢，

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:01:03.230

我猜你在这里得到了 LazyInitializationException：

```
<h:inputText size="4" maxlength="2"
            id="input1"
            value="#{departementController.departement.subdepartement.name}"> 
```

`action`没有调用，因为异常发生在 INVOKE_APPLICATION 阶段之前。bean 属性`subdepartment`可能设置为 LAZY 获取类型，这意味着在给定事务中，根据`subdepartment`属性请求，Hibernate 代理将为您获取适当的 bean。但是，这仅在该事务的范围内有效。

第二个请求发生，前一个`department`bean 存在于 ViewScope 中，但是第二个请求最终会创建一个新的 Transaction。该`department`bean 未附加到第二个事务，这对于数据类型和 EAGER 获取的 bean 属性来说不是问题，但对于 LAZY 属性它将是一个 LazyInitializationException。

这可以通过[将 bean 重新附加到会话来解决](https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate)......或者您可以设置`subdepartment`为 EAGER 获取类型，或者您可以在此托管 bean`subdepartment`中单独加载。`departmentController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:12:08.733

我找到了答案，我只是在搜索时没有找到正确的方向。这是链接：

[带有 CDI 托管 Bean 和有状态会话 Bean 的 LazyInitializationException](https://stackoverflow.com/questions/8802854/lazyinitializationexception-with-cdi-managed-bean-and-stateful-session-bean)

无论如何，我将它添加到 h:inputText，现在它可以工作了：

```
<f:attribute name="collectionType" value="java.util.ArrayList" /> 
```

但是，尽管它有效，但我不确定这是否是最好的方法。

# shell - 如何使用 awk/shell 脚本执行 SQL Where 子句和 SQL 连接，如过滤和合并行和列？

> ID：15763436
> 
> 赞同：2
> 
> 时间：2013-04-02T11:54:22.317
> 
> 标签：shell, awk, gawk

我有一个巨大的数据集，比如 15 - 20 GB，它是一个制表符分隔的文件。虽然我可以在 Python 或 SQL 中执行此操作，但在 Shell 脚本中执行此操作以避免移动 csv 文件会更容易和简单

说，例如，采用管道分隔的文件输入：

```
----------------------------------------
Col1 | Col2 | Col3 | Col4 | Col5 | Col6
----------------------------------------
 A   |  H1  | 123  | abcd | a1   | b1   
----------------------------------------
 B   |  H1  | 124  | abcd | a2   | b1   
----------------------------------------
 C   |  H2  | 127  | abd  | a3   | b1   
----------------------------------------
 D   |  H1  | 128  | acd  | a4   | b1   
---------------------------------------- 
```

SQL 查询看起来像

从其中 col2='H1' 选择 Col1、Col4、Col5、Col6

输出：

```
--------------------------
Col1 | Col4 | Col5 | Col6
--------------------------
 A   | abcd | a1   | b1   
--------------------------
 B   | abcd | a2   | b1   
--------------------------
 D   | acd  | a4   | b1   
-------------------------- 
```

然后，我只需要取其中的 Col4 来做一些字符串解析并在 OutputFile1 下输出：

```
--------------------------------
Col1 | Col4 | Col5 | Col6 | New1
--------------------------------
 A   | abcd | a1   | b1   | a,b,c,d
--------------------------------
 B   | abcd | a2   | b1   | a,b,c,d
--------------------------------
 D   | acd  | a4   | b1   | a,c,d
-------------------------------- 
```

Col4 是一个 URL。我需要解析 URL 参数。参考问题 -[如何在 shell 脚本中解析 URL 参数](https://stackoverflow.com/questions/15743870/how-to-parse-url-params-in-shell-script/15744767)

我想知道我是否还有另一个文件

文件2：

```
--------------
ColA | ColB | 
--------------
 A   | abcd | 
--------------
 B   | abcd | 
--------------
 D   | qst  | 
-------------- 
```

我需要为 ColB 生成类似的解析输出。

输出文件2：

```
--------------
ColA | ColB | New1
--------------
 A   | abcd | a,b,c,d
--------------
 B   | abcd | a,b,c,d
--------------
 D   | qst  | q,s,t
-------------- 
```

用于合并 OutputFile1 和 OutputFile2 的 SQL 查询将对

OutputFile1.Col1 = OutputFile2.ColA 和 OutputFile1.New1 = OutputFile2.New1

最终输出：

```
--------------------------------
Col1 | Col4 | Col5 | Col6 | New1
--------------------------------
 A   | abcd | a1   | b1   | a,b,c,d
--------------------------------
 B   | abcd | a2   | b1   | a,b,c,d
-------------------------------- 
```

请分享实施相同的建议。

主要限制是文件的大小。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:32:51.093

[在http://open-innovation.alcatel-lucent.com/projects/unity/](http://open-innovation.alcatel-lucent.com/projects/unity/)上有一个非常简单的数据库管理程序，名为“unity”，适用于 UNIX 。在统一中，您有 2 个主要文件：

1.  一个你喜欢的数据文件，例如“foo”，和
2.  一个描述符文件，与数据文件具有相同的基本名称，但前缀为“D”表示描述符，例如“Dfoo”

这些都是简单的文本文件，您可以使用您喜欢的任何编辑器进行编辑（或者它有自己的名为 uedit 的数据库感知编辑器）。

Dfoo 将在 foo 中的每一列都有一行，描述出现在 foo 中该列中的数据的属性，并且它是与下一列的分隔符。

foo 会有数据。

自从我在 raw 中使用 unity 已经有一段时间了（我有在幕后使用它的脚本）但是对于上面显示的第一个表：

```
----------------------------------------
Col1 | Col2 | Col3 | Col4 | Col5 | Col6
----------------------------------------
 A   |  H1  | 123  | abcd | a1   | b1   
----------------------------------------
 B   |  H1  | 124  | abcd | a2   | b1   
----------------------------------------
 C   |  H2  | 127  | abd  | a3   | b1   
----------------------------------------
 D   |  H1  | 128  | acd  | a4   | b1   
---------------------------------------- 
```

描述符文件（Dfoo）将类似于：

```
Col1 | 5c
Col2 | 6c
Col3 | 6c
Col4 | 6c
Col5 | 6c
Col6 \n 6c 
```

并且数据文件（foo）将是：

```
A|H1|123|abcd|a1|b1
B|H1|124|abcd|a2|b1
C|H2|127|abd|a3|b1
D|H1|128|acd|a4|b1 
```

然后，您可以运行统一命令，例如：

```
uprint -d- foo 
```

打印表格，其中的行由下划线和在描述符文件中指定的宽度的单元格分隔（例如 6c = 6 个字符居中，而 6r = 6 个字符右对齐）。

```
uselect Col2 from foo where Col3 leq abd 
```

从列 Col2 中选择值，其中 Col3 中的对应值在词法上等于字符串“abd”。

有统一的命令可以让您执行连接、合并、插入、删除等操作 - 基本上是您希望能够对关系数据库执行的任何操作，但这一切都只是基于简单的文本文件。

统一起来，您可以在每列之间指定不同的分隔符，但如果所有分隔符都相同（除了最后一个分隔符将是 '\n'），那么您也可以在文件上运行 awk 脚本，只需使用 awk -F 和分隔器。

您可以查看的其他几个工具集可能更容易安装，但可能没有统一（自 1970 年代以来一直存在！）那么多的功能，将是 recutils（来自 GNU）和 csvDB，所以你的完整作业/研究清单是：

*   统一： http: [//open-innovation.alcatel-lucent.com/projects/unity](http://open-innovation.alcatel-lucent.com/projects/unity)
*   recutils：[http ://www.gnu.org/software/recutils](http://www.gnu.org/software/recutils)
*   csvDB：[http ://freecode.com/projects/csvdb](http://freecode.com/projects/csvdb)

请注意，recutils 具有用于在 recutils 和 CSV 格式之间进行转换的 rec2csv 和 csv2rec 工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:05:45.600

对于管道分隔文件：

```
awk '$2=="H1"{y="";x=$4;for(i=1;i<=length($4);i++)y=y?y","substr(x,i,1):substr(x,i,1);print $1,$4,$5,$6,y;}' FS="|" OFS="|" file 
```

对于制表符分隔的文件，将 FS 留空：

```
awk '$2=="H1"{y="";x=$4;for(i=1;i<=length($4);i++)y=y?y","substr(x,i,1):substr(x,i,1);print $1,$4,$5,$6,y;}'  OFS="\t" file 
```

# asp.net - ASP.NET - 从 iframe 返回值到主页

> ID：15763437
> 
> 赞同：0
> 
> 时间：2013-04-02T11:54:23.503
> 
> 标签：asp.net, iframe, printing, dialog, return

我在用户控件上有一个 iframe。我需要打印动态加载到 iframe 上的网页。我能够做到这一点。但我无法确定用户是否实际打印过。
我在 iframe 的网页中调用了 javascript 函数 print()。
当显示打印对话框时，我需要知道用户是否选择了确定（打印）或取消并将其传递回用户控件。
关于如何做到这一点的任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:23:38.223

这是不可能的。如果打印已完成或取消，浏览器将不会通知您。

您可以`onafterprint`在一定程度上使用事件，但这仅在 FF 和 IE 上受支持。例如，在 IE 10 上，甚至在打开打印对话框之前触发事件。

[https://developer.mozilla.org/en-US/docs/Printing](https://developer.mozilla.org/en-US/docs/Printing)

# sql-server-2008 - 如果没有从第一个表插入行，则通过从第二个表中选择插入临时表

> ID：15763444
> 
> 赞同：0
> 
> 时间：2013-04-02T11:54:35.387
> 
> 标签：sql-server-2008, sql-insert

我有如下代码，当然，我的真实代码又长又丑，没人愿意看。逻辑很简单，如果table_1插入了任何行，则忽略table_2。

（table_1 和 table_2 中都存在**long_common_column_list** 和**long_common_where_list ）**

```
insert into tmp_table
  select id, long_common_column_list from table_1 where long_common_where_list = 1 and
  column_only_in_table_1 = @param1

if @@rowcount=0
  insert into tmp_table
    select id, long_common_column_list from table_2 where long_common_where_list = 1 and
   column_only_in_table_2 = @param2 
```

如何结合这两个插入并重用长长的列表？我的代码中的插入脚本要长得多，每个脚本有近 2000 个字符。

我搜索但没有运气。任何帮助或提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:22:03.293

您可以使用动态 sql - 将常见的 Sql 文本放入变量中，然后通过连接不常见的 sql 文本来构建两个查询。

像这样的东西

```
Declare @sql nvarchar(max),@sql1 nvarchar(max),@sql2 nvarchar(max)

set @sql =  ' select id, long_common_column_list from '
SEt @sql1 = ' where long_common_where_list = 1 and '

SEt @sql2 = @sql + '  table_1 '+@sql1 +' column_only_in_table_1 = @param1' + char(13)+
        ' if @@rowcount=0 ' +  char(13) +
        @sql + ' table_2 ' +  @sql1 + ' column_only_in_table_2 = @param2'

--print @sql2
exec sp_executesql @SQl2 
```

# c# - 自定义更新 gridview 和 ObjectDataSource

> ID：15763448
> 
> 赞同：0
> 
> 时间：2013-04-02T11:54:40.537
> 
> 标签：c#, asp.net, vb.net, objectdatasource

我`gridview`通过使用`Obejct Data Source`连接到业务层的显示数据。

显示/检索的数据来自两个具有连接的表。

是否有可能有一个自定义更新方法，当用户单击该行的编辑时，它只会更新显示数据所需的两个表中的一个（但是，如果它可以更新整个记录也可以） ? 如果是，我如何绑定 ODS 和我的 BL？任何信息都将不胜感激，因为我的研究到目前为止还没有给出任何例子。

举个例子，一张表是用户，另一张表是结果。结果表通过 a 连接到用户表，`UserID (foreign key)`但是`gridview`当两个表连接时显示更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:55:02.177

您可以在模板字段中放置一个链接按钮并给出它`CommandName="MyUpdate"`。然后，您可以在 gridview 事件中检查 commandName 并在`rowCommand`那里处理您的自定义更新。

```
if(e.CommandName =="MyUpdate")
{
      // Perform your update
} 
```

# asp.net-mvc - 设计领域模型

> ID：15763452
> 
> 赞同：1
> 
> 时间：2013-04-02T11:54:49.357
> 
> 标签：asp.net-mvc, entity-framework, domain-driven-design, domain-model

根据域模型模式，我们必须对域实体也有行为。我正在使用实体框架进行数据访问。我已提取所有实体并作为部分类移至域层。现在我在域层中有另一组部分类，其行为与存储库通信。问题是存储库也引用域模型中的实体导致循环引用。

任何人都可以为此提供设计解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:20:05.267

很难用抽象的术语来谈论，所以这里有一个例子可能会有所帮助。想象一下，我们有一项服务可以让我们`Car`旅行。在此行程中，`Car`s 可能会用完气，需要换油。

```
class Car {
    private GasTank gasTank;
    private OilPan oilPan;

    double MPG = 25.0;

    void drive( int distance ) {
        gasTank.consume( distance / MPG );
        oilPan.dirty( distance / OilDirtyRate ); // Making up a term here...but Oil gets dirty
    }

    void fillUp() {
        gasTank.fillUp();
    }

    void changeOil() {
        oilPan.empty();
        oilPan.add( new Oil() );
    }
}

// These are value objects, there's no identity here
class GasTank { }  // Imagine above methods defined
class OilPan { } // more methods

class CarRepository {
    Car findByVIN( String vin ) {
        // Search Car collection or database
        return car;
    }
    boolean register( Car car ) {
        carDao.insert( car.toDTO() );
    }
    boolean update( Car car ) {
        // write to persistence, etc.
    }
}

class TripService {
    private CarRepository carRepo;

    void takeTrip( String carVin, int milesToGo ) {
        Car car = carRepo.findByVIN( carVin );
        // calculate distance
        while ( milesToGo > 0 ) {
            car.drive( 200 );
            milesToGo -= 200;
            if ( car.isOutOfGas() ) {
                car.fillUp();
            }
            if ( car.needsOilChange() ) {
                car.changeOil();
            }
        }
        carRepo.update( car );
    }
} 
```

我很抱歉使用了另一个汽车示例（和 Java，因为您说的是 C#），但是您可以看到 Car 仍然具有逻辑，但是 TripService 可以将 Car 作为一个整体进行操作。Car 负责处理它的内部逻辑，例如消耗气体和弄脏油。`drive`如果油箱中没有足够的气体，可能会返回实际覆盖的距离。如果不是正常发生，它可能会引发异常。该`drive`方法还可以检查汽车是否已启动、是否有油、是否有气以及是否扣好座椅节拍。启动汽车可能会以不同的速度消耗汽油。您可以看到 TripService（“应用程序”）与 对话`CarRepository`和操作`Car`，但对 却`Car`一无所知`CarRepository`，但仍有逻辑。

处理汽油和机油的更换可能不是`TripService`现实生活中的责任，但在模拟汽车磨损的应用程序中，它可能会承担这些责任。

回到抽象术语，您的服务与存储库和工厂交互以获取域对象。然后他们在需要的地方编排域对象之间的交互。毕竟，有些东西必须告诉您的域对象该做什么。这就是服务发挥作用的地方。域对象对存储库一无所知，因为它们是**持久性无知**的。知道自己是如何持久化的不会影响业务逻辑，因此您无需在域对象中处理它。他们只处理业务逻辑和维护不变量。存储库必须了解域对象，因为它们正在持久化和检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:00:46.760

将具有与存储库对话的行为的域层中的部分类移动到适当的服务中。

您的模型不应该对存储库有任何了解。您的存储库获取模型并将其保存到您的数据库中。

然后，您在模型之上有一个层，无论是 ASP.NET MVC 中的 WCF 服务或控制器，还是位于顶部的控制台应用程序中的 Main 方法，它组织域模型交互，然后通过存储库持久保存到数据库。

您的模型不是放置所有应用程序的地方。

# c# - 将 WP7 应用程序升级到 WP8。线程 0xb6c 已退出，代码为 259 (0x103)

> ID：15763458
> 
> 赞同：3
> 
> 时间：2013-04-02T11:55:07.373
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

将我们的 WP7 应用程序升级到 WP8 后，该应用程序几乎在闪屏后立即停止工作（就像只是停止并且没有任何 ui 元素工作）。

唯一的输出似乎是：“线程 0xb6c 已退出，代码为 259 (0x103)。”。

我该如何调试这个问题？该应用程序在 WP7 上完美运行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:13.267

听起来您的配置中可能存在一些错误。确保`Navigation page`您的`WMAppManifest`文件中有一个。

如果你这样做了，那么检查你的命名空间是否正确并且你的项目目录名称没有被修改，以便文件中的所有资源（文件路径、应用程序名称等）都`csproj`指向有效的路径。如果您已重命名解决方案或任何命名空间，则必须确保这些更改反映在整个项目文件中。

如果这些都不起作用，请尝试创建一个新的解决方案并导入您的项目（首先创建任何相关的备份），看看是否能解决问题。

# c# - C# WinForms - 向文本框中的每一行添加文本

> ID：15763459
> 
> 赞同：0
> 
> 时间：2013-04-02T11:55:08.653
> 
> 标签：c#, winforms

我很陌生`C#`。我通过实验学得最好，但当然，有时我会完全被难住。我会尽量用我目前掌握的编程语言知识来解释我的问题。

我一直在尝试创建一个简单的工具来将文本行编辑/添加到`text file`. 我做了很多研究，尤其是在这个网站上，所有的信息都非常有帮助。不过，我的问题是将文本两边添加到`multi-line textbox`.

因此，可以说我有`textbox`2 条现有线路；我想在其中一行的两侧添加一些文本，并对下一行执行相同的操作。以下是点击按钮前后文本的示例：

> **前**
> 
> 不一样 不一样
> 
> **后**
> 
> A 不一样 BA 不一样 B

“Before”中的两行将位于 textBox1（多行）中，并将作为“After”插入到richTextBox1。

希望我已经解释得足够清楚了，我不知道从哪里开始。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:11:12.133

如果您知道`index`必须更新哪些文本，那么您应该能够使用类`insert`公开的函数直接插入值`string`

***例子：***

```
 //Get the text box value
        var formatedTextboxString = this.textbox1.Text;

        formatedTextboxString = formatedTextboxString.Insert(0, "A ");

        formatedTextboxString = formatedTextboxString.Insert(21, "B");

        //Place the formated text back to the richTextBox 
        this.richTextBox1.Text = formatedTextboxString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:59:03.077

尝试

```
"{0} is not the same as {1} {2} is different than {3}" 
```

在文本框1。然后使用：

```
textbox2.Text = String.Format(textbox1.Text, A, B, A, B); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:01:56.390

如果您有多行文本框：

```
var list = new List<string>(textBox1.Lines);

for (int i = 0; i < list.Count; ++i)
{
  list[i] = "A" + list[i] + "B";
}

textBox1.Lines = list.ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:02:49.823

```
string[] arr = textBox1.Text.Split(Environment.Newline);
//then loop over each line and add whatever you want :-

        foreach (string s in arr)
    {
        //add here 
    } 
```

我想这是一个足够好的提示开始:)

# c++ - 编译器是否提供地址运算符？

> ID：15763460
> 
> 赞同：1
> 
> 时间：2013-04-02T11:55:11.140
> 
> 标签：c++, compilation

“如果我们不定义一个，编译器会为我们实现多少个函数？”，我认为只有`4`：

*   默认 ctor

*   复制者

*   赋值运算符

*   默认析构函数

但是有人说还有一个或多个默认功能：`address operator`而且`address operator for const object`，是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:07:46.390

不，地址运算符不会为类类型隐式重载。如果您不重载它，那么内置运算符可以应用于该类型的对象，就像它可以应用于任何对象或函数一样。

请注意，在现代 C++ 中，您可以将“移动构造函数”和“移动赋值运算符”添加到列表中。

# java - AsyncTasks 对于几个同时进行的网络操作来说太慢了

> ID：15763464
> 
> 赞同：1
> 
> 时间：2013-04-02T11:55:27.077
> 
> 标签：java, android, android-asynctask

我正在开发一个必须与服务器进行大量交互的应用程序。

因此，用户输入名称和密码，授权后必须执行下一个任务：

1.  该应用程序必须为该用户获取所有传入和传出消息并将它们加载到 SQLite 数据库。
2.  获取所有用户朋友（带有 id、names、contact_data 的 JSON）并将其加载到应用程序的数据库中
3.  跳转到下一个活动并显示来自本地数据库的收入消息。

    这个操作太慢的问题，当应用程序开始新的活动时，它什么都不能从数据库中获取：AsyncTasks 还没有完成。我被迫使用 AsyncTask.get() 以便等待它们全部完成，但这需要等待超过 16 秒！

    那么我应该怎么做：使用线程，或者在将获取的数据加载到数据库之前将其保存在内存中并在新的活动中显示它而不是从数据库中获取它？但是即使没有数据库任务，其他获取任务也需要将近 10 秒的等待时间！所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:23:05.040

好吧，这里有几件事很不对劲。

1.  不要将 AsyncTasks 用于网络。使用服务。简而言之，这是因为您的 AsyncTask 将停止，只要启动它的 Activity 就会停止。这意味着网络请求很容易中止，数据丢失，并且在再次打开 Activity 时必须重新启动。

2.  不要在 AsyncTasks 上使用 .get()。这使得 UI 线程等待任务完成，使得整个 AsyncTask 的想法有点没用。换句话说：这会阻止您的 UI。

你应该做什么：

1.  阅读使用服务。您还可以查看一个名为 RoboSpice 的优秀开源库来帮助您解决这个问题。

2.  停止在 AsyncTasks 上使用 .get()，如果你想知道它何时完成，只需使用监听器。

3.  尽可能在线程池（ myTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); ）上执行 AsyncTasks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:59:03.430

您应该使用服务。这样它总是可以完成它正在做的任务，你可以完成所有的任务。除此之外，您应该初始化应用程序一次，然后只更新数据..这不会花费 10 秒..而不是您遇到其他问题.. 但是该服务的好处是它可以运行的背景。请参阅：[Android 教程中的服务](http://www.vogella.com/articles/AndroidServices/article.html)

== 编辑

还可以看看[GreenDao](http://greendao-orm.com)这个库安排了快速的 SqlLite 操作。没有大型设置！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:13:20.620

AsyncTasks 并不意味着同时运行几个小任务。引用[文档](http://developer.android.com/reference/android/os/AsyncTask.html)

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

当您想同时运行多个任务时，请在 a 中使用`Thread`s 。`ThreadPool`

你想如何处理这种情况取决于你。当后台任务花费太长时间时，您始终可以向用户显示一个警报对话框，然后在填充数据后将它们带到活动中。发生这种情况时，许多应用程序会显示“正在加载”屏幕。`Spinner`如果还没有可用数据，您还可以显示“加载”控件。永远不要显示空白屏幕。

如果服务器端调用在您的控制之下，请使用某种缓存来加快时间。任何持续超过一秒的 API 调用都会让用户不耐烦。如果不使用上一段中提到的技术之一。@Perception 的技术也是一种可以考虑的技术。

# macos - osx上的linphone编译问题

> ID：15763472
> 
> 赞同：0
> 
> 时间：2013-04-02T11:55:45.140
> 
> 标签：macos, linphone

我正在尝试在山狮上编译 linphone。我已经下载了源代码并按照 README.macos 文件中的所有说明进行操作。第一次，当我进入“$ port install ige-mac-integration”时出现错误。它说 gtk2 必须安装 x11，但是，说明说安装它与石英和 no_x11。我尝试再次安装 gtk2，这次是 x11，但是当我进入编译过程时，它告诉我需要石英。两个都装不了，因为gtk2安装会报错，看来我需要两个都完成安装和编译linphone的全过程。

我已经使用可下载的源以及 git 源尝试了这些步骤，它们都给了我同样的问题。Linphone 没有论坛，所以我无法在他们的网站上提问。

我只需要获取源代码并开始使用它们，因此任何关于如何打开 linphone 源代码、编辑它以及编译/运行它的建议都将非常受欢迎。理想的情况是我可以打开一个 xcode 项目文件。

这是自述文件：

```
**********************************
* Compiling linphone on macos X  *
**********************************

You need:
 - Xcode (download from apple or using appstore application)
 - Macports: http://www.macports.org/
   Download and install macports using its user friendly installer.

- Install build time dependencies
 $ port install automake autoconf libtool intltool

- Install some linphone dependencies with macports
 $ port install speex
 $ port install libosip2 # WARNING: currently outdated in macport
 $ port install libeXosip2 #WARNING: currently outdated in macport
 $ port install ffmpeg-devel
 $ port install libvpx

- Install srtp (optional) for call encryption
 $ port install srtp
 If that fails, get from source:
 $ git clone git://git.linphone.org/srtp.git
 $ cd srtp && autoconf && ./configure --prefix=/opt/local && make libsrtp.a
 $ sudo make install

- Install zrtpcpp (optional), for unbreakable call encryption
 $ port install cmake
 $ git clone git://git.linphone.org/zrtpcpp.git
 $ cd zrtpcpp && cmake -Denable_ccrtp=false . && make
 $ sudo make install

- Install gtk. It is recommended to use the quartz backend for better integration.
 $ port install gtk2 +quartz +no_x11
 $ port install hicolor-icon-theme

- Compile and install the tunnelsu

If you got the source code from git, run ./autogen.sh first

Then or otherwise, do:

 $ ./configure --prefix=/opt/local && make && sudo make install

- Compile linphone

If you got the source code from git, run ./autogen.sh first.

Then or otherwise, do:

 $ ./configure --prefix=/opt/local --with-readline=/opt/local --disable-strict --disable-x11 --with-srtp=/opt/local --with-gsm=/opt/local --enable-zrtp && make

Install to /opt/local

 $ sudo make install 

Done.

If you want to generate a portable bundle, then install gtk-mac-bundler.
Use git:
 $ git clone https://github.com/jralls/gtk-mac-bundler.git 
 $ cd gtk-mac-bundler && make install
 $ export PATH=$PATH:~/.local/bin
 #make this dummy charset.alias file for the bundler to be happy:
 $ sudo touch touch /opt/local/lib/charset.alias

Then run, inside linphone source tree:
 1\. Run configure as told before but with "--enable-relativeprefix" appended.

 $ make
 $ make bundle

The resulting bundle is located in linphone build directory, together with a zipped version.

For a better appearance, you can install the gtk-quartz-engine (a gtk theme) that make gtk application more similar to other mac applications (but not perfect).

 $ git clone https://github.com/jralls/gtk-quartz-engine.git
 $ cd gtk-quartz-engine
 $ autoreconf -i 
 $ ./configure --prefix=/opt/local && make 
 $ sudo make install

Generate a new bundle to have it included. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T06:30:55.447

以下是配置依赖项和构建 linphone 的详细信息。

==================================================== =============

**步骤：1：- 依赖配置：**

我只是按照“README.macos”中提供的说明进行了 sqlite3 配置。我在依赖项配置方面遇到了一些问题。

1.  由于macport版本，srtp配置失败。所以我下载了“MacPorts-2.1.3-10.8-MountainLion.pkg”并手动安装。

2.  由于 GTK 版本，libsoup 失败。所以我下载了“GTK_2.18.5-X11.pkg”并手动安装。

手动安装后，我再次按照“README.macos”进行重新配置。

```
注意：有时终端无法识别“wget”。
  --> 解决方案：只需执行以下命令。
    echo 'alias wget="curl -O"' >> ~/.bash_profile
```

**步骤：2：- 编译和安装：**

`intltool`我在编译时 遇到了一些问题。
**解决方案：**只是我通过执行以下命令来设置路径

```
 export PATH=$PATH:/opt/local/bin
    export MANPATH=$MANPATH:/opt/local/share/man
    export INFOPATH=$INFOPATH:/opt/local/share/info
```

*现在它已成功编译和安装。*

**步骤：3：- 创建包以运行应用程序：**

只是我按照以下命令进行构建。

* * *

```
If you want to generate a portable bundle, then install gtk-mac-bundler.
Use git:
 $ git clone https://github.com/jralls/gtk-mac-bundler.git 
 $ cd gtk-mac-bundler && make install
 $ export PATH=$PATH:~/.local/bin
 #make this dummy charset.alias file for the bundler to be happy:
 $ sudo touch touch /opt/local/lib/charset.alias

Then run, inside linphone source tree:
 1\. Run configure as told before but with "--enable-relativeprefix" appended.

 $ make
 $ make bundle
```

* * *

它将`linphone.app`在当前 linphone 目录中创建 " " 文件。它将仅支持“ `Mountain Lion`”。

**步骤：4：- 支持低版本：（例如：`Lion, Snow Leopard`...）**

我们必须配置“ `libiconv hack`”来支持低版本

我想它会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T15:19:50.713

我在[这里写了一个答案](https://stackoverflow.com/questions/18081140/integrate-linphone-app-to-my-ios-app/31458185#31458185)。它有点长，但我真诚地希望它足够清楚并且会对你有所帮助。它包含您需要包含的构建设置和其他库。很酷的东西我不需要运行`make`:)

最好的，

# java - 无法在 Spring MVC 中初始化类 org.hibernate.validator.engine.ConfigurationImpl？

> ID：15763473
> 
> 赞同：1
> 
> 时间：2013-04-02T11:55:45.407
> 
> 标签：java, spring, hibernate, exception, spring-mvc

当我将 hibernate-validator-4.0.2.GA.jar 放到 WEB-INF/lib 并启动我的应用程序时，我收到一个奇怪的错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1488)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:651)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:599)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:665)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:518)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:459)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4364)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.hibernate.validator.util.LoggerFactory.make(LoggerFactory.java:29)
    at org.hibernate.validator.util.Version.<clinit>(Version.java:30)
    at org.hibernate.validator.engine.ConfigurationImpl.<clinit>(ConfigurationImpl.java:52)
    at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:43)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:182)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1547)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1485)
    ... 33 more 
```

任何人都可以帮助解决这个问题。

好的答案绝对值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:06.117

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory 
```

您需要在项目中添加 SLF4j 日志记录实现。

# php - 在 Magento 的 _productCollection->AddAttributeToSort() 中添加 CASE 或类似语句

> ID：15763475
> 
> 赞同：2
> 
> 时间：2013-04-02T11:55:48.477
> 
> 标签：php, sql, magento

一旦用户选择了价格下拉菜单以首先显示最便宜的，我正在尝试编辑我的产品在 Magento 产品列表中的排序方式。这显示了列出时顶部为 0 的价格，如下所示：

```
Product 4 £0
Product 5 £0
Product 1 £50
Product 2 £65
Product 3 £80 
```

目前它会显示为：

```
Product 1 £50
Product 2 £65
Product 3 £80
Product 4 £0
Product 5 £0 
```

我已经设法编辑了`_getProductCollection()`文件中的方法`/app/code/core/Mage/Catalog/Block/Product/List.php`（不用担心我已经复制到本地）并添加了以下几行：

```
$orderFilterType = $this->getRequest()->getParam('order');
$dirFilterType = $this->getRequest()->getParam('dir');

if( isset( $orderFilterType ) && $orderFilterType == 'price' && isset( $dirFilterType ) && $dirFilterType == 'asc' ) {

$this->_productCollection = $layer->getProductCollection();

$order_field = 'new_price_for_sort';

$this->_productCollection->getSelect()->joinLeft( array('a' => 'catalog_product_entity_price'), 'a.product_id=e.entity_id AND a.attibute_id=PRICE or SPECIAL PRICE ATTRIBUTE ID', array('new_price_for_sort' => new Zend_Db_Expr('IF(a.value > 0,1, 0)') ) );

$this->_productCollection->getSelect()->reset(Zend_Db_Select::ORDER);

$dir = 'DESC'; 

if ( !$this->_productCollection->isEnabledFlat() ) { 

$this->_productCollection->setOrder($order_field, $dir); 

} else {

$this->_productCollection->getSelect()->order($order_field . ' ' . $dir); 

}

$this->_productCollection->setOrder('price', $dir);

} else { $this->_productCollection = $layer->getProductCollection(); } 
```

这意味着任何时候有人选择价格，从下拉列表中选择 asc 过滤器，然后它会添加价格排序，使用`addAttributeToSort`它可以正常工作，但我不知道如何使用它让 0 定价的产品降到底部。

在 SQL 中，我通常会使用 CASE 语句，例如：

```
SELECT * FROM table ORDER BY CASE price WHEN 0 then 1 ELSE 0 END, price 
```

但是我不知道如何在上面的代码中实现这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:11:58.030

就像我之前说过的：

```
 $order_field = 'new_price_for_sort';
 $collection->getSelect()->joinLeft(array('a' => 'catalog_product_entity_price'), // or here you will need Price Index Table Name if you have Groupped or configurable products. But need to remember that non-simple products always have 0 price and MAX_PRICE/MIN_PRICE should be used then 
 'a.product_id=e.entity_id AND a.attibute_id=PRICE or SPECIAL PRICE ATTRIBUTE ID', // or here you will not require attribute_id condition if you are using INDEX TABLE
 array('new_price_for_sort' => new Zend_Db_Expr('IF(a.value > 0,1, 0)'), // which mean that in new field we will have price if it's not 0, and will have big integer is real price is zero. 
                    ));
            }
// now we are reseting current order by
            $collection->getSelect()->reset(Zend_Db_Select::ORDER);

// and creating new order by new field, but with saving direction of order
$dir = 'DESC'; // as we need to have products WITH price first, and after that WITHOUT price
            if (!$collection->isEnabledFlat()) {
                $collection->setOrder($order_field, $dir);
            } else {
                $collection->getSelect()->order($order_field . ' ' . $dir);
            }
//and now add Order by price with keeping direction that user have choosed 
$collection->setOrder('price', $arr['dir']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:09:25.480

这是您的代码与我的合并

```
$orderFilterType = $this->getRequest()->getParam('order');
$dirFilterType = $this->getRequest()->getParam('dir');

if( isset( $orderFilterType ) && $orderFilterType == 'price' && isset( $dirFilterType ) && $dirFilterType == 'asc' ) {

$this->_productCollection = $layer->getProductCollection();
$order_field = 'new_price_for_sort';
$this->_productCollection->getSelect()->joinLeft(array('a' => 'catalog_product_entity_price'), // or here you will need Price Index Table Name if you have Groupped or configurable products. But need to remember that non-simple products always have 0 price and MAX_PRICE/MIN_PRICE should be used then 
'a.product_id=e.entity_id AND a.attibute_id=PRICE or SPECIAL PRICE ATTRIBUTE ID', // or here you will not require attribute_id condition if you are using INDEX TABLE
array('new_price_for_sort' => new Zend_Db_Expr('IF(a.value > 0,1, 0)'), // which mean that in new field we will have price if it's not 0, and will have big integer is real price is zero.
));
    }
// now we are reseting current order by
$this->_productCollection->getSelect()->reset(Zend_Db_Select::ORDER);
// and creating new order by new field, but with saving direction of order
$dir = 'DESC'; // as we need to have products WITH price first, and after that WITHOUT price
if (!$this->_productCollection->isEnabledFlat()) {
    $this->_productCollection->setOrder($order_field, $dir);
  } else {
    $this->_productCollection->getSelect()->order($order_field . ' ' . $dir);
 }
//and now add Order by price with keeping direction that user have choosed 
$this->_productCollection->setOrder('price', $arr['dir']);
} else { 
    $this->_productCollection = $layer->getProductCollection();
} 
```

# scala - 内在特质打破隐含参数

> ID：15763478
> 
> 赞同：2
> 
> 时间：2013-04-02T11:55:52.410
> 
> 标签：scala, implicit

```
object Test {

  trait Foo

  trait TC[A]

  object TC {
    implicit def tc1[F <: Foo] = new TC[F] {}
    implicit def tc2[F1 <: Foo, F2 <: Foo] = new TC[(F1, F2)] {}
  }   

  object Bar {
    trait X
    val c = new Foo with X
    def bar[A](a: this.type => A)(implicit tc: TC[A]) = 1
  }

  Bar bar (_.c)

  Bar bar (b => (b.c, b.c))
} 
```

最后一行给出编译器错误“找不到参数 tc 的隐式值...”。

现在：移到`trait X`外面`object Bar`使它工作。

倒数第二行适用于这两种情况。

这有什么好的理由，和/或是否可以在不将特征移出对象的情况下使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:26:05.323

这不会是一个完整的答案（并且包含大量猜测），但是鉴于您直到现在都没有得到任何答案，我想这总比没有好。

似乎问题在于编译器将`X`in`new Foo with X`视为路径依赖类型，即使我们处于对象定义而不是类中。因此，编译器会`A = (Test.Foo with b.X, Test.Foo with b.X) forSome { val b: Test.Bar.type }`在第二次调用中推断`bar`. 这要求编译器找到 type 的隐式值`TC[(Test.Foo with b.X, Test.Foo with b.X) forSome { val b: Test.Bar.type }]`，并且显然`tc2`不合适（我对 scala 类型系统的极端情况不够熟悉，无法确定是否存在真正的不兼容，或者编译器是否没有线索）

【炒作模式】

路径相关类型处理的问题对我来说就像一个错误（或者至少是一个未指定的奇怪）。我认为罪魁祸首是对象的主体被编译为与类没有什么不同，**然后**以某种方式被制成单例对象，这意味着它`new Foo with X`实际上被视为`new Foo with this.X`而不是`new Foo with Bar.X`，因此被视为路径依赖类型（甚至虽然他们应该恕我直言在这种情况下表示完全相同的东西）。

[/推测模式]

现在对于奇怪的部分（这也是您要求的解决方法）：转动这个：

```
val c = new Foo with X 
```

进入这个：

```
val c = new Foo with Bar.X 
```

实际上修复了编译。据我了解，这是因为通过显式指定`Bar`我们强制编译器识别这`Bar.X`是一个稳定的路径，这解决了路径依赖类型的问题。

现在，真正的解决办法当然是按照你的建议真正搬到`X`外面去。`Bar`它有效且无痛，那么为什么不这样做呢？

# ios - 创建一个可扩展的 UITableView

> ID：15763482
> 
> 赞同：1
> 
> 时间：2013-04-02T11:56:08.150
> 
> 标签：ios, uitableview

这就像组合框，但它不是。我不知道它是怎么调用的。如果您点击它，将显示其他信息：

**关闭视图**

![关闭视图](https://i.stack.imgur.com/CqAuA.png)

**扩展视图**

![展开视图](https://i.stack.imgur.com/TX2E8.png)

我无法在 google 中搜索有效，因为我不知道我搜索什么，我只能显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:17:11.873

您可以尝试将 UITableView 与自定义单元格一起使用。您使用带有披露按钮的普通表格视图。然后，当用户点击显示按钮（或选择行，如果需要）时，您将自定义单元格应用于所选行。

尝试搜索：

*   UITableView
*   UITableViewCell
*   附件ButtonTappedForRowWithIndexPath（用于处理泄露事件）
*   didSelectRowAtIndexPath（用于处理行选择）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:17:31.310

这是一个定制的`UITableView`。
为此，您需要自定义`UITableView`and `UITableViewCell`。

有一些第三方控件可用于执行此操作。

1.  [嵌套表](http://www.cocoacontrols.com/controls/sdnestedtable)
2.  [组合框 iOS](http://www.cocoacontrols.com/controls/combobox-for-uitableview)
3.  [折叠点击](http://www.cocoacontrols.com/controls/collapseclick)

# java - JAVA HSSF 读取 if ( String == String )

> ID：15763487
> 
> 赞同：-4
> 
> 时间：2013-04-02T11:56:22.450
> 
> 标签：java, if-statement, hssf

我一直有这个问题..我用 HSSF xls 单元格读取（哪个值可以这样说“turbox”值：

```
 String hssfstanskup = sheet.getRow(p).getCell(3).getStringCellValue(); 
```

然后，我在我的 JTablel 中创建一行，如下所示：

```
 model.addRow(new Object[] { hssfstanskup } ); 
```

但是如果我创建这样的 if 语句：

```
 if((String) tprojekty.getValueAt(0,1) == "xxx"){ 
```

这没用...

额外信息：tprojekty = new JTable(model); 谁能帮我这个？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:58:38.917

如果我没有错，你必须使用`.equals()`代替`==`

```
if((String) tprojekty.getValueAt(0,1).equals("xxx")) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:03:21.183

为了比较 java 中的字符串，您使用`.equals()`方法而不是`==`.

请试试：

`if((String) tprojekty.getValueAt(0,1).equals("xxx"))`

这应该可以解决您的问题！可以通过简单的 Google 搜索或查看 StackOverflow 上的先前帖子找到答案！因此，将来在发布问题之前，请先四处寻找解决方案。

# php - 如何从多维数组中复制单个数组？

> ID：15763488
> 
> 赞同：0
> 
> 时间：2013-04-02T11:56:27.147
> 
> 标签：php, arrays

我有一个多维数组，如下所示（PHP）：

```
Array
(
    [144320] => Array
        (
            [3568728] => Array
                (
                    [30832] => 30832
                )

            [3568884] => Array
                (
                    [30827] => 30827
                    [30828] => 30828
                    [30830] => 30830
                    [30831] => 30831
                    [30832] => 30832
                    [30837] => 30837
                    [30838] => 30838
                    [30839] => 30839
                    [30826] => 30826
                    [30808] => 30808
                    [30806] => 30806
                    [30807] => 30807
                    [30698] => 30698
                    [30601] => 30601
                    [30697] => 30697
                )

        )

    [144330] => Array
        (
            [3568731] => Array
                (
                    [30827] => 30827
                    [30839] => 30839
                    [30838] => 30838
                    [30837] => 30837
                    [30832] => 30832
                    [30831] => 30831
                    [30828] => 30828
                    [30830] => 30830
                    [30826] => 30826
                    [30806] => 30806
                    [30808] => 30808
                    [30807] => 30807
                    [30698] => 30698
                    [30697] => 30697
                    [30601] => 30601
                )

        )

    [144218] => Array
        (
            [3568753] => Array
                (
                    [30808] => 30808
                )

        )

    [144216] => Array
        (
            [3568732] => Array
                (
                    [30808] => 30808
                )

        )

) 
```

该数组由以下代码填充：

```
$sql = "SELECT * FROM `bf_alert_stack` WHERE `type` = 'immediately'  order by created desc";

$q   = db_query($sql);

$user_alerts = array();

  while ($row  = db_fetch_array($q)) 
{   
   $user_alerts [$row['uid']]    [$row['alert_id']]  [$row['nid']] = $row['nid'];
} 
```

从上面的 user_alerts 数组中，我想重新排列 [$row['nid']] 数组，对于重新排列，我想捕获 [$row['nid']] 数组，然后将其捕获到另一个数组中，我想重新排列 $ row['nid'] 数组我想将此 $row['nid'] 数组更新为原始 user_alerts 数组。

我怎么能做到这一点？我没有在谷歌上搜索到这个，所以把它放在适当的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:07:35.190

您可以做的最好的事情是从查询中对其进行排序，例如：

```
SELECT * FROM `bf_alert_stack` WHERE `type` = 'immediately' 
ORDER BY created desc, nid 
```

但是，如果您没有访问权限，或者由于其他原因需要原始排序，则需要递归地遍历数组并使用 PHP ksort 方法将最后一个排序级别重新分配给原始数组：

[http://www.php.net/manual/en/function.ksort.php](http://www.php.net/manual/en/function.ksort.php)

```
foreach($user_alerts as $uid=>$user_alert) {
    foreach($alert as $alert_id=>$nids) {
        $user_alerts[$uid][$alert_id] = ksort($nids); 
    }   
} 
```

希望能帮助到你！

# opencv - 在 JavaCV 中为 cvContourArea 创建输入

> ID：15763492
> 
> 赞同：1
> 
> 时间：2013-04-02T11:56:42.523
> 
> 标签：opencv, javacv, javacpp

如何创建轮廓以传递给 cvContourArea？我有四个 2D 点，但不知道创建 CvSeq。

```
int[] myPolygon = new int[] { point1.x, point1.y, point2.x, point2.y, ... };
cvCountourArea(???, null, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:25:57.120

我找到了解决方案：

```
int[] myPolygon = new int[] { point1.x, point1.y, point2.x, point2.y, ... };
Mat rectMat = cvCreateMat(1, myPolygon.length/2, CV_32SC2);
rectMat.getIntBuffer().put(myPolygon);
cvCountourArea(rectMat, CV_WHOLE_SEQ, 0);
cvReleaseMat(rectMat); 
```

# php - 如何在特定的 div 中显示 mysql 表？

> ID：15763493
> 
> 赞同：0
> 
> 时间：2013-04-02T11:56:48.330
> 
> 标签：php, mysql, html-table

我有一个页面，用户在其中搜索 pdf，结果显示在该页面中，但显示在特定的 div 中。显示了表格，但页面的整个设计被破坏了......有人能指出我是什么吗在这里做错了吗？

```
 <div id="content">
   <div class="post">
        <div class="entry">
        <form name="search" action="" method="post">
        <input type="text" class="search" name="searchbox" id="searchbox" />
        <input type="submit" name="search" id="search" value="Search" />
        </form>

        </div>
    </div>

    <div class="post">
         <div class="entry">
         <?php
              if(isset($_REQUEST['search'])){
                  $searchterm = $_REQUEST['searchbox'];
                  $sql = "select name,size from ebooks where name like '%$searchterm%'";
                  $result=mysql_query($sql);
                  if(!($result)){
                     die("Query to show fields from table failed");
                  }
                  $fields_num = mysql_num_fields($result);
                  echo "<table border='1'><tr>";
                  // printing table headers
                  for($i=0; $i<$fields_num; $i++){
                      $field = mysql_fetch_field($result);
                      echo "<td>{$field->name}</td>";
                  }
                  echo "</tr>\n";
                  // printing table rows
                  while($row = mysql_fetch_row($result)){
                  echo "<tr>";
                  // $row is array... foreach( .. ) puts every element
                  // of $row to $cell variable
                  foreach($row as $cell)
                  echo "<td>$cell</td>";
                  echo "</tr>\n";
                  }
                  mysql_free_result($result);

              }
         ?>
         </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:19:17.377

你的桌子不关门`</table>`吗？

这里是正确的代码：

```
<?php
if (isset($_REQUEST['search'])) {

    $searchterm = $_REQUEST['searchbox'];
    $sql = "SELECT `name`, `size` FROM `ebooks` WHERE `name` LIKE '%$searchterm%'";
    $result = mysql_query($sql);

    if (!($result)){
        die("Query to show fields from table failed");
    }

    $fields_num = mysql_num_fields($result);
    echo "<table border=\"1\">\n<tr>";

    for ($i=0; $i<$fields_num; $i++) {
        $field = mysql_fetch_field($result);
        echo "<td>{$field->name}</td>";
    }

    echo "</tr>\n";

    while ($row = mysql_fetch_row($result)) {
        echo "<tr>";
        foreach($row as $cell) {
            echo "<td>$cell</td>";
        }
        echo "</tr>\n";
    }

    echo "</table>\n";

    mysql_free_result($result);
}
?> 
```

# python-2.7 - ImportError：导入 urllib2 时无法导入名称数组

> ID：15763497
> 
> 赞同：4
> 
> 时间：2013-04-02T11:57:08.150
> 
> 标签：python-2.7, importerror

尝试导入 urllib2 时出现以下错误：

```
>>> import urllib2

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib64/python2.7/urllib2.py", line 94, in <module>
import httplib
File "/usr/lib64/python2.7/httplib.py", line 69, in <module>
from array import array

ImportError: cannot import name array` 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T17:11:47.620

您当前的工作目录中似乎有一个名为“array.py”的 python 程序。如果是，则重命名该 python 程序或将其移动到其他目录。

# backbone.js - 如何从主干事件中的单击元素获取属性？

> ID：15763500
> 
> 赞同：14
> 
> 时间：2013-04-02T11:57:20.433
> 
> 标签：backbone.js, backbone-views, backbone-events

这是我更改路线的基本主干视图。我想获得点击链接的 href 属性。怎么做？下面是一段代码：

```
var Menu = Backbone.View.extend({   
        el: '.nav', 
        events: {
            'click a' : 'changeRoute'
        },  
        changeRoute: function(e) {
            e.preventDefault();
            //var href = $(this).attr("href");
            router.navigate(href, true);
        }
 }); 
```

我是骨干新手，所以请怜悯:)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-02T12:22:53.267

您可以使用：`var element = $(e.currentTarget);`

那么任何属性都可以这样调用：`element.attr('id')`

所以在你上面的代码中：

```
changeRoute: function(e) {
   e.preventDefault();
   var href = $(e.currentTarget).attr("href");
   router.navigate(href, true);
} 
```

# android - 如何在整个应用程序中禁用通知栏？

> ID：15763501
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:57:23.253
> 
> 标签：android, notifications, handle, notification-bar

用户可以从我的应用程序启动其他已安装的应用程序，并在退出启动的应用程序时返回到我的活动。我想禁用通知栏（显示 wifi、gps、蓝牙等的状态）或在整个应用程序中拉下通知栏。设置时它适用于我的应用程序`requestWindowFeature(Window.FEATURE_NO_TITLE);`但是当从我的应用程序启动其他应用程序时，可能会下拉通知栏。

有没有办法处理这个？

是否可以在我的应用程序运行时从通知栏中删除所有通知？

如何使我的应用程序无法访问通知栏（在整个应用程序中运行的服务用于检查当前正在运行的应用程序）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:02:47.447

不，这是不可能的，为此感谢主。

如果一个流氓应用程序会在系统的所有其他部分和其他应用程序中阻止我的通知栏，那将是非常可怕的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:02:16.807

您可以在**AndroidManifest.xml**中使用主题：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

或使用以下代码片段：

```
public class Activity
    extends android.app.Activity
{
    @Override
    public void onCreate(android.os.Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);
    }
} 
```

# php - Symfony2 用额外的权限扩展 ACL

> ID：15763502
> 
> 赞同：2
> 
> 时间：2013-04-02T11:57:23.877
> 
> 标签：php, symfony

我想在我的项目中实现 Symfony2 ACL。然而，基本权限（查看、编辑...）对我来说还不够。我至少需要两个额外的权限，即 COPY 和 REVIEW。

经过一番挖掘，我发现我很可能不得不覆盖/扩展`Symfony/Component/Security/Acl/Permission/BasicPermissionMap.php`和`Symfony/Component/Security/Acl/Permission/MaskBuilder.php`.

在`Symfony/Bundle/SecurityBundle/Resources/config/security_acl.xml`我发现引用权限映射的行：

```
<parameter key="security.acl.permission.map.class">Symfony\Component\Security\Acl\Permission\BasicPermissionMap</parameter> 
```

我尝试在 中覆盖它`app/config/config.yml`，但这不起作用（我收到一个错误，即权限配置密钥未知，或类似的东西）。

我也一直在查看服务，使用`app/console container:debug`，但我也找不到任何相关的服务来覆盖那里。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-13T08:50:50.090

这是我解决它的方法（在我提交 PR 后，这在 Symfony 2.3 中变得更容易了）：

使用您自己的掩码扩展现有的 MaskBuilder：

```
namespace Acme\DemoBundle\Security\Acl\Permission;

use Symfony\Component\Security\Acl\Permission\MaskBuilder as BaseMaskBuilder;

class MaskBuilder extends BaseMaskBuilder
{
    const MASK_COPY         = 256;        // 1 << 8
    const MASK_REVIEW       = 512;        // 1 << 9

    const CODE_COPY         = 'X';
    const CODE_REVIEW       = 'R';
} 
```

扩展现有的 PermissionMap（您过去必须完全覆盖它，因为所有内容都设置为私有）。

```
namespace Acme\DemoBundle\Security\Acl\Permission;

use Symfony\Component\Security\Acl\Permission\BasicPermissionMap;

class PermissionMap extends BasicPermissionMap
{
    const PERMISSION_COPY        = 'COPY';
    const PERMISSION_REVIEW      = 'REVIEW';

    public function __construct()
    {
        parent::__construct();

        // This basically says "If you have VIEW, REVIEW, EDIT..., OWNER, 
        // you have VIEW".
        $this->map[self::PERMISSION_VIEW] = array(
            MaskBuilder::MASK_VIEW,
            MaskBuilder::MASK_REVIEW,
            MaskBuilder::MASK_EDIT,
            MaskBuilder::MASK_COPY,
            MaskBuilder::MASK_OPERATOR,
            MaskBuilder::MASK_MASTER,
            MaskBuilder::MASK_OWNER,
        );
        $this->map[self::PERMISSION_COPY] = array(
            MaskBuilder::MASK_COPY,
            MaskBuilder::MASK_OPERATOR,
            MaskBuilder::MASK_MASTER,
            MaskBuilder::MASK_OWNER,
        );
        $this->map[self::PERMISSION_REVIEW] = array(
            MaskBuilder::MASK_REVIEW,
            MaskBuilder::MASK_OPERATOR,
            MaskBuilder::MASK_MASTER,
            MaskBuilder::MASK_OWNER,
        );
    }
} 
```

不要问我为什么必须包含相同的权限。

最后，您需要告诉 Symfony 在以下位置使用您的 PermissionMap `config.yml`：

```
parameters:
    security.acl.permission.map.class: Acme\DemoBundle\Security\Acl\Permission\PermissionMap 
```

那是为我做的。

# php - mysql总工作时间

> ID：15763504
> 
> 赞同：3
> 
> 时间：2013-04-02T11:57:31.043
> 
> 标签：php, mysql

```
id 标题 开始 结束
1 为这个项目做编码。2013-04-02 02:00:00 2013-04-02 04:00:00
2 为这个项目做编码。2013-04-02 04:00:00 2013-04-02 06:00:00
3 为这个项目做编码。2013-04-02 06:00:00 2013-04-02 06:30:00
```

我有上面的`MySQL`数据库表记录。现在我想得到总数`hours.`

我正在开发`TimeSheet Management Application`，**我们需要用员工的分钟和秒来显示总工作时间。（即根据我分享的数据04:30:00）**

**我试过什么？**

`SELECT HOUR(TIMEDIFF(end,start)) AS 'totalHour'`但仅适用于每一行而不是所有记录。

我也试过了`TIMESTAMPDIFF`。

这可能吗？

**编辑**

从我从人们那里得到的答案中，我已经尝试过他们中的每一个，但每次我只是得到`4`或者`4.5000`但它应该返回`06:30:00`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:11:03.500

[`HOUR()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_hour)函数的范围是`0 to 23`这样的，所以在 diff 中使用它的总小时数是不正确的。

对于单个值，您可以使用[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timestampdiff)如下：

```
SELECT TIMESTAMPDIFF(HOUR, start, end) AS `totalHour` FROM ... 
```

如果你想为整个项目计算它，你必须总结所有的时间差异，然后他们打印它可能用函数格式化，比如[`TIME_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_time-format)打印大于 24 的小时：

> > > 如果时间值包含大于 23 的小时部分，则 %H 和 %k 小时格式说明符会生成一个大于通常范围 0..23 的值。其他小时格式说明符产生模 12 的小时值。

所以你可以使用：

```
 SELECT TIME_FORMAT( SEC_TO_TIME( SUM( TIME_TO_SEC(end) - TIME_TO_SEC(start))), "%H")
            AS `totalHour`
 FROM ...
 GROUP BY sort_of_project_id 
```

如果您也需要秒/分钟（如评论中所建议），请使用：

*   `time_to_sec( <left side of select>)/3600` 这将返回值`4.84 hours`
*   `TIME_FORMAT( ..., "%H:%m:%s")`这将显示`4:38:24`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:43:42.253

试试这个查询

```
SELECT
 id, 
 title, 
 TIME_FORMAT(SEC_TO_TIME(sum(TIME_TO_SEC(TIMEDIFF( end, start)))), "%h:%i") AS diff
FROM 
 tbl1
GROUP BY  
 title 
```

根据你给出的数据，答案应该是4:30。请交叉检查你的记录。

**[小提琴](http://sqlfiddle.com/#!2/260ca/15)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:17:24.633

像这样尝试，它会给你总小时数：

**例如：**

```
SELECT sum(time_to_sec(timediff(end, start ))/ 3600) AS 'totalHour' from test; 
```

如果您对给定的上表运行此查询，它会显示输出`4.5`小时数。

希望它会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-15T12:22:43.740

我已经在其他线程中回答了[https://stackoverflow.com/questions/44560345/query-is-not-working/44567322#44567322](https://stackoverflow.com/questions/44560345/query-is-not-working/44567322#44567322)

我刚刚创建了一个名为 dataimport 的临时表

[表格格式][1]

并写了一个查询，

```
SELECT `EnNo`, work_dt,
        SEC_TO_TIME(sum(TIMESTAMPDIFF(SECOND,login,logout))) as time_worked 
from (
    SELECT `EnNo`, date(`DateTime`) as work_dt, `DateTime` as login
        , coalesce(
              (SELECT MIN(`DateTime`) 
               FROM `dataimport` as b 
               WHERE a.EnNo = b.EnNo 
                 and date(a.`DateTime`) = date(b.`DateTime`)
                 and b.`DateTime` >= a.`DateTime` 
                 and b.`INOUT` = 'E'
              ), now()) AS logout
    FROM `dataimport` AS a 
    WHERE a.`INOUT` = 'S'
) as t
GROUP BY `EnNo`, work_dt 
```

最后得到的输出为，

[输出][2]

希望这是你正在寻找的。[1]：[https](https://i.stack.imgur.com/OEEMe.png) ://i.stack.imgur.com/OEEMe.png [2]：[https ://i.stack.imgur.com/g6ivm.png](https://i.stack.imgur.com/g6ivm.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T12:18:47.953

改变你的

```
SELECT HOUR(TIMEDIFF(end,start)) AS 'totalHour' 
```

到

```
SELECT sum(TIMESTAMPDIFF(HOUR, end, start)) AS 'totalHour' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-09T08:39:56.577

`SELECT IF(DATE(datetime_end) = DATE(datetime_start), TIMEDIFF(datetime_end,datetime_start), IF(DATEDIFF(datetime_start,datetime_end) > 1, ADDTIME( TIME_FORMAT(CONCAT((DATEDIFF(datetime_start,datetime_end) - 1) * 8,':00:00'), "%H:%i:%s"), ADDTIME( TIMEDIFF(datetime_end,CONCAT(DATE(datetime_end),' 08:00:00')), TIMEDIFF(CONCAT(DATE(datetime_start),' 17:00:00'),datetime_start) ) ) , ADDTIME( TIMEDIFF(datetime_end,CONCAT(DATE(datetime_end),' 08:00:00')), TIMEDIFF(CONCAT(DATE(datetime_start),' 17:00:00'),datetime_start) ) ) ) AS total_working_hrs FROM table`

# iphone - 如何在单击按钮时打开其他页面

> ID：15763506
> 
> 赞同：0
> 
> 时间：2013-04-02T11:57:39.893
> 
> 标签：iphone, ios, ipad, xcode4.5

我正在为 IOS 开发一个应用程序。我制作了一个包含按钮的菜单栏，菜单栏应该在应用程序的每个页面上。我做了很多**视图控制器场景**，我想要这样的功能：当我点击任何按钮时，它应该打开一个**视图控制器场景**。

如何在单击按钮时打开**视图控制器场景？**我不想在我当前的视图控制器场景中添加其他现有的**视图****控制器场景**作为子视图。我想独立打开其他现有场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:39:14.517

您需要查看 UINavigationController 或 UITabBarController。还有其他方法。导航控制器是最简单的。Apple 文档拥有您需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:15:10.927

**1）插入视图：**

```
ButtonView *buttonView = [[ButtonView alloc] initWithNibName:@"ButtonView" bundle:[NSBundle mainBundle]];
buttonView.view.frame = CGRectMake(yourFrame);
[self.view addSubview:buttonView.view]; 
```

**2）删除视图：**

```
[buttonView removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:36:06.627

您必须查看以下内容

*   导航控制器
*   标签栏控制器自定义实现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:36:25.800

您是否尝试过，只需将 YourViewController 替换为您要加载的 .xib 的名称。

```
YourViewController *yvc = [[YourViewController alloc] init];
[self presentViewController:yvc animated:YES completion:nil]; 
```

这进入您`IBaction`的导航按钮，仅供参考。

# javascript - 获取jQuery中的顶部元素

> ID：15763511
> 
> 赞同：3
> 
> 时间：2013-04-02T11:57:54.447
> 
> 标签：javascript, jquery

*我已经构建了高级验证插件，它以特定方式显示错误。*

但是，当用户输入无效时，我会将页面*滚动*到验证失败的**第一个元素。**

这是它的[样子](https://i.stack.imgur.com/9HE20.jpg)：

![在此处输入图像描述](https://i.stack.imgur.com/9HE20.jpg)

那么问题出在哪里？

我`TD's`用黑色加粗了。

所以你可以看到它`Currency textbox`在第一个 TD 上，`Owner Name textbox`而在第二个 TD 上

所以**首先**`Currency textbox`验证 ，所以页面滚动到 Currency 位置，而不是 OwnerName 文本框位置。（如我所愿）

 **问题 ：

我怎样才能找到最顶层的元素（让我们假设所有失败的元素都有`.failed`类 - 只是为了简单起见）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:01:24.493

只需遍历每个元素：

```
var $failed = $('.failed');
var top = null;    // current "smallest" value
var found = null;  // current "topmost" element

$failed.each(function() {
    var $this = $(this);
    var cur = $this.offset().top;
    if (top === null || cur < top) {
        found = this;
        top = cur;
    }
}); 
```

或者，如果您实际上并不关心它是哪个元素，而只是想要滚动位置：

```
var tops = $failed.map(function() {
    return $(this).offset().top;
}).get();

var top = Math.min.apply(null, tops); 
```

注意：代码更正为使用`.offset`而不是`.scrollTop`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:00:14.220

jQuery 中没有任何东西可以提供你想要的东西。您必须遍历所有元素并使用[`offset()`](http://api.jquery.com/offset/)来查看哪个元素的顶部和左侧最小。

```
var failed = $(".failed");
var firstElem = failed.eq(0);
var firstPos = firstElem.offset();
failed.splice(0,1);
failed.each( function() {
    var elem = $(this);
    var pos = elem.offset();
    if (pos.top < firstPos.top || (pos.top===firstPos.top && pos.left<firstPos.left) {
        firstElem = elem;
        firstPos = pos;
    }    
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:01:59.727

试试这个：

```
var el;

$.each($(".failed"), function () {
    if (!el || el.offset().top > $(this).offset().top) {
        el = $(this);
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T12:03:33.697

您可以使用`sort`按位置排序：

```
var topElement = $('.invalid-elements')
    .sort(function(a, b) { return $(a).offset().top - $(b).offset().top })[0]; 
```

[演示](http://jsfiddle.net/QPfDr/)**

# c# - 有时图像按钮单击事件未触发

> ID：15763514
> 
> 赞同：0
> 
> 时间：2013-04-02T11:58:02.150
> 
> 标签：c#, asp.net

我有一个方法可以添加一个 onclick 事件和一个 imagebutton。但有时您必须在“弹出”窗口打开之前多次按下按钮。知道为什么会这样吗？

这是我的代码，如果我将事件添加到我的图像按钮：

```
private void AddProjectDetails()
    {
        ImageButton imgBtn;
        HiddenField hfld;
        String ProjectNumber;
        for (int i = 0; i < GridViewProperties.Rows.Count; i++)
        {
            hfld = GridViewProperties.Rows[i].FindControl("HiddenProjId") as HiddenField;
            imgBtn = GridViewProperties.Rows[i].FindControl("ibtnShowExtra") as ImageButton;
            ProjectNumber = hfld.Value;
            imgBtn.Attributes.Add("onclick", "window.open('ProjectDetails.aspx?ProjectNumber=" + Server.UrlEncode(ProjectNumber) + "','Graph','height=590,width=600,left=50,top=50,scrollbars=yes'); return true;");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:02:35.133

尝试从 javascript 返回 false 。这将防止回发。有时回发可能比 windows.open 更快，在这种情况下，我认为您不需要它。

另一种解决方案是使用 an`<a href='...' >image</a>`而不是 imagebutton

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:22:06.087

你为什么`return true`在你的java脚本函数中使用。
您是否需要在您的页面上回发。
如果不使用`return false`.

我还建议你编写一个javascript函数并按如下方式调用它

```
function OpenPopUp(projectNumber) 
{
      window.open("ProjectDetails.aspx?ProjectNumber="+ projectNumber 
                      ,'Graph','height=590,width=600,left=50,top=50,scrollbars=yes'); 
      return false;
}; 
```

并在您的 c# 代码中调用它

```
imgBtn.Attributes.Add("onclick", "return OpenPopUp('"+Server.UrlEncode(ProjectNumber)+"');"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:08:57.563

就像 Stefano 和 Shekhar 所说的那样，您不能对 LinkBut​​tons、Imagebuttons 使用 return true，除非您希望页面回发。

你也可以这样使用：

```
<asp:ImageButton ID="ButtonOpenProject" runat="server" ImageUrl="~/Images/OpenProject.png"  OnClientClick="return OpenProject('"<%# ProjectNumber %>"');" /> 
```

在您的 JavaScript 脚本中，您可以执行以下操作：

```
function OpenProject(ProjectNumber){
    window.open('ProjectDetails.aspx?ProjectNumber=' + ProjectNumber + ','Graph','height=590,width=600,left=50,top=50,scrollbars=yes');
    return false;
} 
```

希望这有帮助。

# javascript - 如何从 Meteor 的列表集合中删除项目？

> ID：15763518
> 
> 赞同：6
> 
> 时间：2013-04-02T11:58:21.333
> 
> 标签：javascript, mongodb, meteor

我正在关注有关 Meteor 的书籍示例，并且正在尝试删除一个项目，如下所示：

`lists.remove({Category:"Fraggles"})`

但是，这在 Meteor 的最新版本中不再起作用，并且我收到以下控制台错误：403 原因：“不允许。不受信任的代码只能通过 ID 删除文档。”

我找到了这样的id：

```
lists.findOne({Category:"Fraggles"})
Object {_id: "T88C6tx4G9YJpLzn5", Category: "Fraggles"} 
```

但我不知道如何使用正确的语法来实际删除它。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T12:06:55.833

lists.remove('T88C6tx4G9YJpLzn5') 将删除 _id 为 T88C6tx4G9YJpLzn5 的文档。

[http://docs.meteor.com/#remove](http://docs.meteor.com/#remove)

如果要删除多个文档，可以定义一种在服务器上运行并从客户端调用的方法。

[http://docs.meteor.com/#meteor_methods](http://docs.meteor.com/#meteor_methods)

# session - PHP页面会话错误

> ID：15763519
> 
> 赞同：0
> 
> 时间：2013-04-02T11:58:21.103
> 
> 标签：session

我有一个带有会话的页面。当我从同一会话中的另一个页面访问该页面时，它会引发此错误：

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 /home/cooperat/public_html/admin 中发送（输出开始于 /home/cooperat/public_html/admin/applyforloan.php:4） /applyforloan.php 在第 7 行

下面是页面的代码：

```
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
}

// ** Logout the current user. **
$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";
if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){
  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){
  //to fully log out a visitor we need to clear the session varialbles
  $_SESSION['MM_Username'] = NULL;
  $_SESSION['MM_UserGroup'] = NULL;
  $_SESSION['PrevUrl'] = NULL;
  unset($_SESSION['MM_Username']);
  unset($_SESSION['MM_UserGroup']);
  unset($_SESSION['PrevUrl']);

  $logoutGoTo = "appbye.php";
  if ($logoutGoTo) {
    header("Location: $logoutGoTo");
    exit;
  }
}
?>
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "101";
$MM_donotCheckaccess = "false";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && false) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "apploginfail.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$currentPage = $_SERVER["PHP_SELF"];

mysql_select_db($database_moneymanager, $moneymanager);
$query_members = "SELECT * FROM members";
$members = mysql_query($query_members, $moneymanager) or die(mysql_error());
$row_members = mysql_fetch_assoc($members);
$colname_members = "-1";
if (isset($_SESSION['MM_Username'])) {
  $colname_members = $_SESSION['MM_Username'];
}
$username = $_SESSION['MM_Username'];
mysql_select_db($database_moneymanager, $moneymanager);
$query_members = sprintf("SELECT * FROM members WHERE username = %s", GetSQLValueString($colname_members, "text"));
$members = mysql_query($query_members, $moneymanager) or die(mysql_error());
$row_members = mysql_fetch_assoc($members);
$totalRows_members = mysql_num_rows($members);

mysql_select_db($database_moneymanager, $moneymanager);
$query_names = "SELECT First_name, last_name, memberid FROM members WHERE memberid != '2' AND username != '$username' ORDER BY memberid ASC";
$names = mysql_query($query_names, $moneymanager) or die(mysql_error());
$row_names = mysql_fetch_assoc($names);
$totalRows_names = mysql_num_rows($names);

$colname_loanername = "-1";
if (isset($_SESSION['MM_Username'])) {
  $colname_loanername = $_SESSION['MM_Username'];
}
mysql_select_db($database_moneymanager, $moneymanager);
$query_loanername = sprintf("SELECT * FROM members WHERE username = %s", GetSQLValueString($colname_loanername, "text"));
$loanername = mysql_query($query_loanername, $moneymanager) or die(mysql_error());
$row_loanername = mysql_fetch_assoc($loanername);
$totalRows_loanername = mysql_num_rows($loanername);

mysql_select_db($database_moneymanager, $moneymanager);
$query_client = "SELECT * FROM customize";
$client = mysql_query($query_client, $moneymanager) or die(mysql_error());
$row_client = mysql_fetch_assoc($client);
$totalRows_client = mysql_num_rows($client);

$maxRows_contributions = 10;
$pageNum_contributions = 0;
if (isset($_GET['pageNum_contributions'])) {
  $pageNum_contributions = $_GET['pageNum_contributions'];
}
$startRow_contributions = $pageNum_contributions * $maxRows_contributions;
$name = $_POST ['membername'];
$maxRows_contributions = 10;
$pageNum_contributions = 0;
if (isset($_GET['pageNum_contributions'])) {
  $pageNum_contributions = $_GET['pageNum_contributions'];
}
$startRow_contributions = $pageNum_contributions * $maxRows_contributions;

$colname_contributions = "-1";
if (isset($_GET['year'])) {
  $colname_contributions = $_GET['year'];
}
$colname2_contributions = "-1";
if (isset($_GET['memberid'])) {
  $colname2_contributions = $_GET['memberid'];
}
$mid = $_POST['memberid'];
$year2 = $_POST['year2'];
$month2 = $_POST['month'];

$queryString_contributions = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_contributions") == false && 
        stristr($param, "totalRows_contributions") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_contributions = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_contributions = sprintf("&totalRows_contributions=%d%s", $totalRows_contributions, $queryString_contributions);
$row = $startRow_contributions + 1;
?> 
```

我正在与 Dreamweaver 合作。请问你觉得哪里出了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:05:52.187

似乎您已经在其他地方开始了一个会话，请确保`session_start();`在您的页面上调用一次，包括包含的 php 文件。

我假设 applyforloan.php 被包括在内。

# sql - 为两个字段选择具有不同值的行

> ID：15763523
> 
> 赞同：2
> 
> 时间：2013-04-02T11:58:34.083
> 
> 标签：sql, sql-server, sql-server-2008, join

请原谅我的标题。我有一张这样的桌子：

![在此处输入图像描述](https://i.stack.imgur.com/UxYBs.png)

将有数千行，现在我想选择具有相同 group_id 但 vr_debit 和 vr_credit 值不能相等的行：即；在显示的图像中，没有行满足此条件。如果有两行，例如 (6,500.000,0) 和 (6,0,600.000)，我希望它们作为结果。希望你能明白。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:01:02.300

使用聚合函数计算每个组并使用子句`SUM()`过滤它们。`HAVING`

```
SELECT  GROUP_ID, SUM(vr_debit) totalDebit, SUM(vr_credit) totalCredit
FROM    TableName
GROUP   BY GROUP_ID
HAVING  SUM(vr_debit) <> SUM(vr_credit) 
```

如果要获取未计算的行，可以将其加入子查询。

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  GROUP_ID
            FROM    TableName
            GROUP   BY GROUP_ID
            HAVING  SUM(vr_debit) <> SUM(vr_credit)
        ) b ON  a.GROUP_ID = b.GROUP_ID 
```

*   [SQLFiddle 演示（*用于两个查询*）](http://www.sqlfiddle.com/#!3/f7e24/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:05:33.507

也许：

```
SELECT group_ID,
       vr_debit,
       vr_credit
FROM 
   dbo.TableName T1
WHERE
   EXISTS(
      SELECT 1 FROM dbo.TableName T2
      WHERE T1.group_ID = T2.group_ID
      AND   T1.vr_debit <> T2.vr_debit
      AND   T1.vr_credit<> T2.vr_credit
      AND   T1.vr_debit <> T2.vr_credit
   ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:20:55.847

您也可以使用此选项

```
SELECT *
FROM dbo.test64 t
WHERE EXISTS (
              SELECT 1
              FROM dbo.test64 t2
              WHERE t.group_id = t2.group_id
              HAVING SUM(t2.vr_debit) - SUM(t2.vr_credit) != 0
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/55de2c/1)上的演示[](http://sqlfiddle.com/#!3/55de2c/1)

# java - 自动完成文本字段中的异常

> ID：15763533
> 
> 赞同：-3
> 
> 时间：2013-04-02T11:59:00.337
> 
> 标签：java, mysql, swing, autocomplete, jtextfield

运行此应用程序时出现错误..get 异常并且没有在 jtextfield 上显示任何内容..所以给我那个片段..问题出在哪里？我在写入 jtextfield 时什么都得不到。。不从 mysql 数据库中获取记录。

跑：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at com.mylogin.CustomFocusListener.focusLost(CustomFocusListener.java:39)
at java.awt.AWTEventMulticaster.focusLost(AWTEventMulticaster.java:230)
at java.awt.Component.processFocusEvent(Component.java:6281)
at java.awt.Component.processEvent(Component.java:6145)
at java.awt.Container.processEvent(Container.java:2045)
at java.awt.Component.dispatchEventImpl(Component.java:4750)
at java.awt.Container.dispatchEventImpl(Container.java:2103)
at java.awt.Component.dispatchEvent(Component.java:4576)
at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895)
at                                                              java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:96        5)
at   java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:627)
at java.awt.Component.dispatchEventImpl(Component.java:4620)
at java.awt.Container.dispatchEventImpl(Container.java:2103)
at java.awt.Component.dispatchEvent(Component.java:4576)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
at java.awt.EventQueue.access$400(EventQueue.java:96)
at java.awt.EventQueue$2.run(EventQueue.java:631)
at java.awt.EventQueue$2.run(EventQueue.java:629)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
at java.awt.EventQueue$3.run(EventQueue.java:645)
at java.awt.EventQueue$3.run(EventQueue.java:643)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

## Example.java

```
 package com.mylogin;

    import com.mylogin.CustomFocusListener;
    import java.awt.event.FocusListener;

import java.awt.event.*;
import javax.swing.*;

public class Example extends Box
{

JLabel txtName = new JLabel("Nothing Entered");

public Example(){
    super(BoxLayout.Y_AXIS);
    // Add FocusListener to first field
    final JTextField txtNo = new JTextField(20);
    txtNo.addFocusListener(new CustomFocusListener(txtNo));
    add(txtNo);

    // Add TextListener to first field
    final JTextField txtNo2 = new JTextField(20);
    txtNo2.addFocusListener(new CustomFocusListener(txtNo2));
    add(txtNo2);

    // Add TextListener to first field
    final JTextField txtNo3 = new JTextField(20);
    txtNo3.addFocusListener(new CustomFocusListener(txtNo3));
    add(txtNo3);

    add(new JButton("Do Something"));

    add(txtName);

}

public static void main(String[] args){
    final JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(new Example());
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}
} 
```

## CustomFocusListener.java

```
package com.mylogin;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;
import java.awt.Component;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.sql.DriverManager;
import java.sql.ResultSet;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class CustomFocusListener extends FocusAdapter
{

 JTextField field;
// private final Component add;

CustomFocusListener(JTextField txtNo)
{
     this.field = field;
}

public void focusLost(FocusEvent e)
{

    JLabel txtName = new JLabel();
   // JTextField field = new JTextField();
    txtName.setText(this.field.getText());       
    try 
    {

        Class.forName("com.mysql.jdbc.Driver");
        java.sql.Connection con = (java.sql.Connection)                                                                                   DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "ubuntu123");
        Statement st = (Statement) con.createStatement();
        String load = "Select * from supplierinfo where companyname = '" +            field.getText() + "'";
        ResultSet rs = st.executeQuery(load);
        while (rs.next()) 
        {
            txtName.setText(rs.getString("companyname"));

        }

                        con.close();

    }
    catch (Exception ae) 
    {
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:00:25.767

那行不通：

```
JLabel txtName = null;
JTextField field = null;
txtName.setText(field.getText()); 
```

你正在使用`txtName`with `null`。这就是你的 NPE 的原因。顺便说一句`field`也为空！

将其更改为此，它将运行：

```
JLabel txtName = new JLabel();
txtName.setText(this.field.getText()); 
```

和

```
CustomFocusListener(JTextField txtNo)
{
     this.field = txtNo;
} 
```

# sorting - 使用随机字段进行排序和分区，而不仅仅是前 k 个字段

> ID：15763538
> 
> 赞同：0
> 
> 时间：2013-04-02T11:59:03.547
> 
> 标签：sorting, hadoop, partitioning

我正在使用hadoop`streaming`做一些工作，我遇到了一个问题，就是这样。

输入文件`mapper`在每行中有 3 个字段。我知道`mapper`在将数据提供给之前，输出将被排序和分区`reducer`，我的问题是

**1.我可以使用第三个**字段对这些数据进行排序/分区吗？2.我可以使用整行对数据进行排序吗？

PS：

AFAIK，排序键或分区键应该是每行的前 k 个字段，对吧？如果是这样，这是否意味着我应该将这些字段移到行的最前面`mapper`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:17:20.177

Mapper 的输出仅根据键进行排序。

所以，假设你有输入记录：**field1**，**field2**，**field3**

1）如果您不想将第一个字段作为您的关键并且可以管理您的*第三个*字段是否是关键，那么您不需要做任何其他事情，所以您可以执行以下操作：

```
output.collect(new Text(field3), new Text(field1 + ","+field2)); //Old API
context.write(new Text(field3), new Text(field1 + ","+field2)); //New API 
```

2) 同样，您可以将所有内容作为键并将 null 作为值，这将导致按整行排序，可以执行以下操作：

```
output.collect(new Text(field1 + ","+field2 + "," + field3), null); // Old API
context.write(new Text(field1 + ","+field2 + "," + field3), null); // New API 
```

不，就排序而言，字段在输入文件中的顺序并不重要，它只取决于您从映射器发出的映射器输出的内容。

但是，如果您需要将**field1**作为映射器输出中的键，但又想对**field3**进行二次排序，请阅读：[如何对值进行二次排序？](http://bigdataspeak.wordpress.com/2013/02/25/hadoop-how-to-do-a-secondary-sort-on-values/)

# math - 如何通过在第一点添加距离来找到第二点？

> ID：15763540
> 
> 赞同：-3
> 
> 时间：2013-04-02T11:59:09.433
> 
> 标签：math, 2d, discrete-mathematics

在二维。我从坐标计算了距离 7.071068：

1.  (10, 10)
2.  (15, 15)

但现在的问题是我想通过在第一点添加距离来找到第二点。这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:06:02.210

在给定另一个点的情况下，仅拥有 2 个点之间的距离是不够的。你有一个完整的圈子来满足这个需求（距离）。

您还需要两点之间的角度（我们称之为 phi）

如果我们调用距离 d，从 P1 中找到 P2：

X2 = X1 + d*cos(phi)

Y2 = Y1 + d*sin(phi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:29:35.233

基本上，您正在寻找以下整数解决方案：

dx*dx + dy*dy = 7.071068*7.071068

d2 = 7.071068*7.071068 = 50

整数根是 7 和 1 (49 + 1 = 50)。

找到整数根的最简单方法是蛮力。请注意，d2 必须是整数，并且 d2 的某些值有多个解。d2=25 有解（5 和 0）和（3 和 4）。d2 的其他值没有整数解，例如 d2=3。

蛮力求解器的一些伪代码：

```
d2=50;
for (i=1; i*i < d2; i++) {
  if (is_square(d2 - i*i)) {
    // integer solution found, but there may be more than one solution, so keep checking
  }
} 
```

# java - 将图像添加到菜单项

> ID：15763546
> 
> 赞同：10
> 
> 时间：2013-04-02T11:59:28.033
> 
> 标签：java, android, xml

我有 .png 图像，我`res/drawable-hdpi/delete.png`想将它作为图标添加到我的菜单`item`中。

我用了：

**删除.xml**

```
<bitmap
xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/deletebutton">
</bitmap> 
```

菜单**activity_main.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/create"
    android:showAsAction="always"
    android:title="@string/createTask"/>
<item
    android:id="@+id/delete"
    android:showAsAction="always"
    android:icon="@drawable/delete"
    android:title="@string/deleteTask" />
</menu> 
```

但它不起作用。

我删除了xml文件并尝试直接加载图像这里是日志文件。

```
04-02 17:46:50.887: E/AndroidRuntime(11957): FATAL EXCEPTION: main
04-02 17:46:50.887: E/AndroidRuntime(11957): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.devicecontrolpanel/com.example.devicecontrolpanel.Main}: android.content.res.Resources$NotFoundException: Resource ID #0x7f020008
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.os.Looper.loop(Looper.java:156)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread.main(ActivityThread.java:4987)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at java.lang.reflect.Method.invoke(Method.java:511)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at dalvik.system.NativeStart.main(Native Method)
04-02 17:46:50.887: E/AndroidRuntime(11957): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f020008
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.content.res.Resources.getValue(Resources.java:1105)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.content.res.Resources.getDrawable(Resources.java:674)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.widget.CompoundButton.setButtonDrawable(CompoundButton.java:189)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at com.example.devicecontrolpanel.Main.listAllAlarms(Main.java:69)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at com.example.devicecontrolpanel.Main.onCreate(Main.java:25)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.Activity.performCreate(Activity.java:4538)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
04-02 17:46:50.887: E/AndroidRuntime(11957):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
04-02 17:46:50.887: E/AndroidRuntime(11957):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T12:01:41.310

起初你真的不需要`delete.xml`你的情况。

```
<item
    android:id="@+id/delete"
    android:showAsAction="always"
    android:icon="@drawable/deletebutton"
    android:title="@string
/> 
```

而且我认为你在这里有问题：

```
android:title="@string 
```

在这里，您缺少正确的撇号和值。如果您不想在其中显示标题，`MenuItem`只需删除此属性。

## 更新：

```
java.lang.StackOverflowError 
```

你有**`SO`**在 loadDrawable() 这意味着你`Drawable`太大而无法加载（你的堆栈完全填满了）。尝试使用另一个（较小的）或修剪实际的。并确保您的图像在所有可绘制文件夹中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-06T08:30:55.107

它已经过期了，但我会给出一个答案以供其他人将来参考，您可以像这样以编程方式进行进一步的样式设置：

```
public class MyClass {
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

        // Do your other stuff here

        MenuItem item = menu.getItem(0);

        if (item.getItemId() == R.id.action_example) {
            ImageView imageView = new ImageView(getActivity());
            imageView.setMaxHeight(18);
            imageView.setMaxWidth(18);
            imageView.setImageResource(R.drawable.barchart32);

            item.setActionView(imageView);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:01:09.833

看看这个：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/open" android:icon="@drawable/openicon"
        android:title="Open the file" />

    <item
        android:id="@+id/save"
        android:icon="@drawable/saveicon"
        android:title="Save the file" />
</menu> 
```

无需设置位图文件，只需单独使用以上几行即可。希望这会帮助你。

遵循本教程[Android 中的菜单](http://buildmobile.com/menus-in-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:02:03.260

`android:background="@drawable/ic_play" />`是我在做什么，

# windows - 运行时最小化批处理文件和Firefox

> ID：15763548
> 
> 赞同：0
> 
> 时间：2013-04-02T11:59:31.463
> 
> 标签：windows, firefox, batch-file, scheduled-tasks

我正在尝试创建一个将由 Windows 任务调度程序调度的批处理文件。这是我的代码

```
start /min test.bat
"C:\Program Files\Mozilla Firefox\firefox.exe"  -tray
TASKKILL /F /IM cmd.exe 
```

但是在任务调度程序中运行它会导致一个不确定地运行的错误，这是不可取的。我的目标是运行 Firefox 并将 cmd 最小化。将此代码与任务计划程序一起使用

```
"C:\Program Files\Mozilla Firefox\firefox.exe"  -tray
 TASKKILL /F /IM cmd.exe 
```

很好，但是 firefox 和 cmd 没有最小化。我做错了什么？周围有 tweek 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:08:46.607

简短版：你不能那样做。

长版：当有人提出申请时，即。firefox，程序的入口点是`Winmain()`它有几个 Windows 给它的参数。第四个参数是唯一对此重要的参数。它告诉程序 Windows 希望它如何打开。（你如何告诉 Windows 打开它） 稍后在程序中，当窗口与`showWindow()`函数一起实际显示时，第二个参数告诉程序员希望窗口如何显示。然后，程序员可以向它发送`Winmain()`函数中为我们填充的第四个参数窗口（您希望它如何显示），或者他可以明确告诉它他希望它如何打开（例如最大化）。如果程序员这样做了，你如何告诉程序打开都没有关系，因为它从不使用这个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:10:38.137

您可以通过使用外部命令行工具来实际执行此操作。它被称为 nircmd 在它的工作方式就像魅力一样。这是我是如何做到的`"nircmd.exe" win hide process "firefox.exe"`这里是关于其用法的完整文档 [nircmd doc](http://www.nirsoft.net/utils/nircmd.html)

# jquery - 关闭并重新打开 jQuery 插件

> ID：15763554
> 
> 赞同：2
> 
> 时间：2013-04-02T11:59:57.160
> 
> 标签：jquery, plugins, jquery-plugins, gallery

我制作了一个画廊插件，它在插件自身附加的 div 上有一些`.on ('mouseenter'`,`.on ('mouseleave`和事件（用于图形效果）。`.on ('click`我需要多次关闭并重新打开此插件而不刷新。关闭时，需要删除整个插件 html，以便我可以像第一次调用它一样调用它：

```
$('#triggerButton').on ('click', function () {    
    $('#Gallery').galleryPlugin();
}); 
```

那么，当单击关闭按钮以擦除所有内容（html 和事件）并防止留下痕迹等时，我需要在插件的脚本中放置什么？

```
$('#CloseGallery').on ('click', function () { 
   // erase everything 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:03:20.070

请参阅 jquery 取消绑定功能。这将删除事件。

根据您要删除的 html，您可以使用空的 jquery

[http://api.jquery.com/empty/](http://api.jquery.com/empty/)

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

# c# - 捕获 SSIS 运行时变量

> ID：15763558
> 
> 赞同：0
> 
> 时间：2013-04-02T12:00:09.303
> 
> 标签：c#, ssis, bids

我有一个 SSIS 包，在 User:: 命名空间中有几个变量。我在 C# 编程中绝望可悲。我想收集（循环）每个变量及其值，以便在 For Each 容器中使用，该容器将使用 SQL 任务将变量名称和值写入数据库表。我不希望通过使用监视窗口等来中断包。我搜索了互联网并没有找到可行的解决方案。请协助，是的，由于管理层的要求，它必须在 C# 中，但这是另一个论点。TIA

# c# - 动态深度的锯齿状字典？

> ID：15763561
> 
> 赞同：2
> 
> 时间：2013-04-02T12:00:13.560
> 
> 标签：c#, recursion, jagged-arrays, recursive-datastructures

我正在尝试从一系列代表深度的字符串中提取，例如：

```
'foo/bar/x'
'foo/bar/baz/x'
'foo/bar/baz/x'
'foo/bar/lol/x' 
```

`x`我不关心的数字在哪里。我已经完成了拆分`/`和循环，此时在PHP中我会做一些事情，比如检查我在循环中的位置（使用`for (i=0; etc)`），然后用它来确定我的深度来构建一个输出数组，如：

```
output['foo']['bar'] = 1
output['foo']['bar']['baz'] = 2
output['foo']['bar']['lol'] = 1 
```

问题是“深度”是动态的，可能只有 3/4 深（我可以通过对它们的值进行大量检查`i`并单独处理它们来解释）或者说 10 或更深，在这种情况下某种递归函数可能是最好的。

我遇到了将字符串作为数组索引的问题，我需要使用字典，但您必须指定字典中的类型，这意味着您需要了解高级的深度（如果我是，请纠正我错误）在实例化字典对象时。

我猜攻击可能类似于调用递归函数，这样每次调用它时你传递`i`指示深度，然后函数调用自身`i`每次递减，直到它从输入字符串构建树的一部分，但它是什么存储我在 C# 中使用的我不确定的结构。

最终输出将是一个 CSV，我可以将其作为电子表格打开，如下所示：

```
Foo        0
|__Bar     1
   |__Baz  2
   |__Lol  1 
```

也许解决方案的一个方向是使用纯 C# 数组并简单地将标题（例如`foo`）存储在其中，将信息保留在数组索引之外，无论如何这可能是最佳实践。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:02:58.533

您可以使用以下成员创建自己的类：

```
class Directory
{
    public int Value { get; set; }
    public Dictionary<string, Directory> SubDirectories { get; set; }
} 
```

使用它存储您的数据，然后递归地将其导出为 CSV。

要获得`output["foo"]["bar"]`可能的语法，请在您的类中实现索引器：

```
public Directory this[string name]
{
    get { return SubDirectories.ContainsKey("name") ? SubDirectories[key] : null; }
    set { SubDirectories.Add(name, value); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:41:11.617

虽然 Marcin Juraszek 的解决方案很棒，但我只想用`dynamic`糖来扩展他的答案。事实并非如此，该解决方案将满足您的需求，而只是将其视为示例。我将`Directory<T>`通用，因此您可以使用任何类型`value`（请注意，由于动态性质，我在实现中有一个演员`(T)value`）

```
class Directory<T> : DynamicObject
{
    private T Value;
    private Dictionary<string, Directory<T>> SubDirectories;

    public Directory()
    {
        SubDirectories = new Dictionary<string, Directory<T>>();
    }

    public override bool TryGetMember(GetMemberBinder binder, out Object result)
    {
        if (!SubDirectories.ContainsKey(binder.Name))
            SubDirectories[binder.Name] = new Directory<T>();

        result = SubDirectories[binder.Name];   
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, Object value)
    {
        if (!SubDirectories.ContainsKey(binder.Name))
            SubDirectories[binder.Name] = new Directory<T>();

        SubDirectories[binder.Name].Value = (T)value;
        return true;
    }

    public override string ToString()
    {
        return Value.ToString();
    }
} 
```

现在您可以使用**C# 4.0**`dynamic`中提供的功能

 **```
dynamic dir = new Directory<string>();

dir.foo = "Foo Value";
dir.foo.bar = "Bar Value";
dir.foo.bar.baz = "baz value";
dir.foo.bar.Lol = "Lol value";

Console.WriteLine(dir.foo.bar.Lol); //will print Lol value
Console.WriteLine(dir.foo.bar.baz); //will print baz value 
```

这是：

```
Foo        Foo Value
|__Bar     Bar Value
   |__Baz  baz value
   |__Lol  Lol value 
```

您还可以覆盖[TryGetIndex](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.trygetindex.aspx)和[TrySetIndex](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.trysetindex.aspx)以便您可以传递复杂的字符串，这些字符串不能用作 C# 中的属性**

# php - 字符串中的结果很奇怪

> ID：15763566
> 
> 赞同：0
> 
> 时间：2013-04-02T12:00:25.247
> 
> 标签：php

我有一个问题，我做了一些程序并在输出中生成这两个字符串

```
string(46) "202cb962ac59075b964b07152d234b70"
string(32) "202cb962ac59075b964b07152d234b70" 
```

如您所见，字符串长度`32`和`var_dump`函数应该使字符串长度相等，但它不像上面那样。

这是转储到十六进制后的结果

```
string(92) "32303263623936326163353930373562393634623037313532643233346237300000000000000000000000000000"
string(64) "3230326362393632616335393037356239363462303731353264323334623730" 
```

你知道这两个字符串如何像上面那样不同吗？我怎样才能使上述一个正常化为另一个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:11:48.463

尝试

```
 $myString = rtrim($myString); 
```

它会杀死空格空选项卡等...

# perl - 如何在 perl 中创建 zip 文件？

> ID：15763570
> 
> 赞同：2
> 
> 时间：2013-04-02T12:00:30.197
> 
> 标签：perl, zip

嗨朋友我可以使用当前运行脚本的目录中的文件创建一个 zip 文件现在我想从各种目录创建 zip 文件有人可以帮助我吗？我的代码是；

```
use IO::Compress::Zip qw(:all);

  zip [ glob("inventory_report_for_neus.xls") ] => "my.zip"
    or die "Cannot create zip file: $ZipError" ; 
```

这将生成带有特定文件的 zip 文件，但是

```
use IO::Compress::Zip qw(:all);

      zip [ glob("..\\inventory_report_for_neus.xls") ] => "my.zip"
        or die "Cannot create zip file: $ZipError" ; 
```

这也是生成 zip 文件，但里面没有文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:33:23.803

**更新**

`IO::Compress::Zip`根据当前目录中文件的原始位置创建具有层次结构的 zip 文件。

但是，这样做的结果是它不能正确处理当前工作目录未包含的文件。

最简单的解决方案可能是在压缩之前将目录更改为父目录。如果这不是一个选项，请在压缩之前将文件复制到临时位置，或者可能使用[`IO::Compress::Zip`更高级的功能](http://search.cpan.org/~pmqs/IO-Compress-2.027/lib/IO/Compress/Zip.pm)，例如从文件句柄写入 zip 文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T18:59:35.220

朋友们，我终于找到了解决这种情况的方法。只是我在 perl 中使用了 shell 命令，所以我将使用适当的文件创建 zip 文件...代码如下。

```
use strict;
use warnings;
use MIME::Lite;
use  Net::SMTP;
my $msg = MIME::Lite->new (
  From => 'xyz@gmail.com',
  To => 'thiyagu040@gmail.com',
  Subject => 'with inline images',
  Type =>'multipart/mixed'
) or die "Error creating mult;$!\n";
system("zip test.zip '../test_dir/report.xls'");
.
.
.
.
 $msg ->(     filename     => test.zip,
              content_type => 'application/zip',
              disposition  => 'attachment',
              name         => $filename,
          );
MIME::Lite->send('smtp', 'smtp.gmail.com', Timeout=>60,AuthUser=>'xyz', AuthPass=>'remotecontrol');
$msg->send(); 
```

# unit-testing - gtest codegen的'function to class'与'class to class'之间的区别？

> ID：15763571
> 
> 赞同：1
> 
> 时间：2013-04-02T12:00:34.127
> 
> 标签：unit-testing, testing, googletest

'function to class'为目标代码中的每个函数生成类的单元测试代码，而'class to class'为目标代码中的每个类生成类的单元测试代码。
我只是想知道有什么区别？以及何时在现实世界中单独使用它们？

# google-apps-script - UrlFetchApp.fetch 与 API

> ID：15763574
> 
> 赞同：0
> 
> 时间：2013-04-02T12:00:47.843
> 
> 标签：google-apps-script, zoho

我想执行一个 Zoho CRM API 并写入我的 GAS

```
 var result=UrlFetchApp.fetch('https://crm.zoho.com/crm/private/xml/Leads/insertRecords?authtoken=XXXXX&scope=crmapi&newFormat=1&xmlData=<Leads><row no="1"><FL val="Company">Your Company</FL><FL val="First Name">Hannah</FL><FL val="Last Name">Smith</FL><FL val="Email">testing@testing.com</FL></row></Leads>'); 
```

我有一个错误

```
Argument non valide : https://crm.zoho.com/crm/private/xml/Leads/insertRecords?authtoken=XXXXXX&scope=crmapi&newFormat=1&xmlData=<Leads><row%20no="1"><FL%20val="Company">Your%20Company</FL><FL%20val="First%20Name">Hannah</FL><FL%20val="Last%20Name">Smith</FL><FL%20val="Email">testing@testing.com</FL></row></Leads> (ligne 35, fichier "MySQLtoZohoCRM") 
```

但如果我将此 URL 粘贴到我的 Chrome 或 FF 中，它就会运行！！！

[文档 API](http://www.zoho.com/crm/help/api/insertrecords.htm)

你知道为什么我在 GAS 中而不是在 Chrome 中出现此错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:39:51.947

有两种形式`UrlFetchApp.fetch()`：

*   [fetch(url)](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app#fetch%28String%29)和
*   [获取（网址，参数）](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app#fetch%28String,Object%29)

您使用的是第一个表单，但您提供的参数验证失败，因为它不仅仅是一个 URL。您应该使用第二种形式，将值放在“？”之后 作为选项。

尝试这个：

```
var url = 'https://crm.zoho.com/crm/private/xml/Leads/insertRecords';
var xmlData = '<Leads><row no="1"><FL val="Company">Your Company</FL><FL val="First Name">Hannah</FL><FL val="Last Name">Smith</FL><FL val="Email">testing@testing.com</FL></row></Leads>';
var options =
  {
     'authtoken' : 'XXXXX',
     'scope' : 'crmapi',
     'newFormat' : '1',
     'xmlData' : encodeURIComponent(xmlData)
  }
var result=UrlFetchApp.fetch(url,options);

var output = Utilities.jsonParse(result.getContentText());
Logger.log(output); 
```

# xamarin.ios - Xamarin 如何获得原生外观？

> ID：15763579
> 
> 赞同：10
> 
> 时间：2013-04-02T12:00:56.993
> 
> 标签：xamarin.ios, xamarin.android, xamarin, xamarin-studio

我是 Xamarin 的新手。我在这里没有什么困惑。

**问题：**

1.  Xamarin 如何获得 UI 组件的本机外观？
2.  Xamarin 是否提供自己的小部件 [如按钮、布局、..]。

**这是我的理解如果我错了请纠正我？**

1) 通过原生 SDK 开发 UI [按钮、布局...]。例如 iOS 使用 Xcode。安卓版？

2）考虑按钮，当按下按钮时，将要执行的代码在整个平台上是通用的。

3) 因此，由于 UI 直接来自各自的 SDK，因此我们获得了 Native Look and Feel。

请纠正我在哪里误解了？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T12:28:14.197

我觉得你离题了。

Xamarin 在 iOS 和 Android 上提供 C# 和 .Net (Mono) 运行时。同时，它们将每个平台上的本机 API 暴露给 C#。因此他们为 C# 构建了一种调用 Objective-C 和 Java 的方法（反之亦然）。

这意味着您可以在每个平台上开发原生 UI，并且可以在平台之间共享后端业务逻辑。Xamarin 应用程序可以跨平台共享其代码的 50-75%。没有跨平台的 UI 通用共享，因为这会抽象出原生 API。

分解它：

安卓

*   使用 Xamarin Studio 或 Visual Studio 开发 C# 后端代码
*   使用 Xamarin 的 Android 设计器来布局原生 Android XML 布局

iOS

*   使用 Xamarin Studio 或 Visual Studio* 开发 C# 后端代码
*   在 Mac 上使用 XCode 为原生 iOS UI 布局布局故事板或 XIB 文件

这两个选项都可以通过代码创建 UI，但每个平台的原生 API 会有所不同。

*需要一个mac来编译iOS

# mongoose - Mongoose - 填充其他 id

> ID：15763586
> 
> 赞同：3
> 
> 时间：2013-04-02T12:01:23.880
> 
> 标签：mongoose

我有这两个简化的架构，我想根据 IP 地址“加入”。

```
var personSchema = Schema({
  name: String,
  ip: String
});

var logSchema = Schema({
  message: String,
  ip: String
}); 
```

如果 person._id 是 IP 地址，它会起作用。但这不是我的选择。

目前我已经解决了保存新日志时的问题，我搜索人员并添加对日志的引用。然后架构是这样的：

```
var logSchema = Schema({
  message: String,
  ip: String,
  person: { type: Schema.Types.ObjectId, ref: 'Person' }
}); 
```

我已经阅读了猫鼬[填充](http://mongoosejs.com/docs/populate.html)文档[Document#populated](http://mongoosejs.com/docs/api.html#document_Document-populated)和[Model.populate()](http://mongoosejs.com/docs/api.html#model_Model.populate)。我仍然不确定这是否可能。这个例子非常简单，我在日志收集上使用 mapReduce 和分组，因此人口对我来说非常棒。

我还阅读了[数据库引用](http://docs.mongodb.org/manual/applications/database-references/#DatabaseReferences-SimpleDirect/ManualLinking&gsc.tab=0)，在我看来，唯一的选择是基于 _id 进行填充。但它是纯 mongodb，也许还有另一种使用猫鼬的可能性？

是否可以填充不基于 _id 字段的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:58:27.870

MongoDB 不支持连接。所以`.populate`只需进行另一个查询，因此对您来说最好的解决方案是手动进行另一个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T20:53:03.707

MongoDB 3.2 引入了 $lookup 聚合。您也可以将它与猫鼬一起使用。这是一个如何将它与条件一起使用的示例`find`：

```
 Log.aggregate(
      { $match: {log_property: 'value'}},
      { $lookup: {from: 'person', localField: 'ip', foreignField: 'ip', as: 'user'} }
    ).exec( function (err, logs) {
      if (err) {
        next(err);
      }

      res.json(logs);
    }
  ); 
```

在上面的示例中，`user`每个日志上的属性将使用匹配的 Person 模型文档中的人员填充

# php - 尝试使用 MySQLi 时内存大小耗尽

> ID：15763588
> 
> 赞同：1
> 
> 时间：2013-04-02T12:01:26.420
> 
> 标签：php, mysqli

我从那里使用 MysqliDb 类。

[https://github.com/ajillion/PHP-MySQLi-Database-Class/blob/master/MysqliDb.php](https://github.com/ajillion/PHP-MySQLi-Database-Class/blob/master/MysqliDb.php)

当我在本地电脑上使用时，我没有任何问题。但我昨天买了主机。我大约 5 分钟前上传了我的文件，但没有用。我检查了我的主机并创建了 error_log 文件和这个..

```
PHP Fatal error:  Allowed memory size of 75497472 bytes exhausted (tried to allocate 4294967296 bytes) in /home/(..)/MysqliDb.php on line 417 
```

这是什么问题？

我在我的配置文件中使用了这段代码。但同样没有用。

```
ini_set('memory_limit', '192M'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:02:57.873

我认为那是您在数据库中使用 LongText 。

请阅读此消息：[https ://bugs.php.net/bug.php?id=51386](https://bugs.php.net/bug.php?id=51386)

所以在bind_result之前尝试[mysqli::](http://php.net/manual/mysqli.store-result.php) store_result。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T12:12:34.397

`ini_set`影响服务器限制的命令往往会被阻止（因此，您可能只能使用与显示错误相关的命令）。

请记住，您正在尝试分配 4.2 Gb，这对于网站来说是相当大的信息量。

## 建议：

*   检查您是否正在创建一个无限循环，该循环试图加载大量信息（不仅在该类中，而且在您自己的代码中调用之前）。
*   使用较轻的`mysqli`类（您是否尝试[过 PHP 5 默认提供的](http://php.net/manual/en/book.mysqli.php)类）？
*   检查您的问题是否可以通过另一种方式（可能是异步的？对于网站来说内存量太大），更轻松的方式解决，可能使用另一种语言（如 C 或 C++）来释放 Apache 的负载。
*   与您的托管服务提供商交谈并尝试说服他们让您加载 4.2 Gb 的数据。

# php - 将 html 表格转换为 phpexcel

> ID：15763589
> 
> 赞同：2
> 
> 时间：2013-04-02T12:01:30.997
> 
> 标签：php, html, phpexcel

```
require_once 'data.php';
echo '<table cellspacing="3" cellpadding="2" border="1">';
reset($mas);
$header = current($mas);
$header = array_merge(array('tankla'=>'tankla'), $header);
foreach ($header as $key=>$val) {
    echo '<th>'.$key.'</th>';
}
echo '</tr>';
foreach ($mas as $tankla=>$data) {
    echo '<tr>';
    echo '<td>'.utf8_decode($tankla).'</td>';
    foreach ($data as $day=>$value) {
        echo '<td style="text-align: right;">'.$value.'</td>';
    }
    echo '</tr>';
}
echo '</table>'; 
```

我需要这个东西在phpexcel里面。有关如何制作此代码的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:06:04.413

你可以看看[PHPEXCEL](http://phpexcel.codeplex.com/)库

示例用法：

```
$objPHPExcel = new PHPExcel();
$objPHPExcel->setActiveSheetIndex(0);

//foreach loop{
    $objPHPExcel->getActiveSheet()->SetCellValue('A', <your_column_val>);
    $objPHPExcel->getActiveSheet()->SetCellValue('B', <your_column_val>);

//}
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
$objWriter->save('your_file_name.xlsx'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:38:03.257

```
$row = 1;
$column = 'A';
foreach ($header as $key=>$val) {
    $objPHPExcel->getActiveSheet()->setCellValue(
        $column . $row,
        $key
    );
    $column++;
}
$row++;
foreach ($mas as $tankla=>$data) {
    $column = 'A';
    $objPHPExcel->getActiveSheet()->setCellValue(
        $column . $row,
        utf8_decode($tankla)
    );
    foreach ($data as $day=>$value) {
        $column++;
        $objPHPExcel->getActiveSheet()->setCellValue(
            $column . $row,
            $value
        );
    }
    $row++;
} 
```

# java - 错误：不是java中的语句

> ID：15763590
> 
> 赞同：0
> 
> 时间：2013-04-02T12:01:34.797
> 
> 标签：java

这是代码片段：

```
public class luas{
    public static void main (String [] args){
        Data_lingkaran k = new Data_lingkaran();
        k.pi=3.14;
        k.jari1=12;
        k.jari2=12;
        k.luas;
        k.luas = k.pi * k.jari1 * k.jari2;
        System.out.println("Luas Lingkaran = " +k.luas);
    }
} 
```

错误说：

```
 luas.java:7: error: not a statement
 k.luas;
 1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:02:50.737

`k.luas;`它的声明无效，它应该是声明或赋值。如果`luas`是 中的一个字段`k`，则删除`k.luas;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:02:50.853

Remove `k.luas;`，它是您班级中的一个字段，它不是有效的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:03:35.123

`k.luas;`它的分配无效。检查一次。删除`k.luas;`

# javascript - Jquery Jplayer 动态播放列表

> ID：15763592
> 
> 赞同：3
> 
> 时间：2013-04-02T12:01:35.917
> 
> 标签：javascript, jquery, asp.net

我无法弄清楚如何强制 Jplayer 从动态的 asp.net 自由列表中读取歌曲？

目前我有这个用于从数据库中获取歌曲列表：

```
<div class="jp-playlist">
<ul><asp:Literal ID="ltRadio" runat="server" /></ul>
</div> 
```

以下来自[JPlayer](http://jplayer.org/)的代码演示了如何将硬编码的歌曲添加到播放列表：

```
$(document).ready(function () {

new jPlayerPlaylist({
     jPlayer: "#jquery_jplayer",
     cssSelectorAncestor: "#jp_container_1"
}, [
{
   title: "Cro Magnon Man",
   mp3: "http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
   oga: "http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg"
}
], {
     swfPath: "js",
     supplied: "oga, mp3",
     wmode: "window"
});
}); 
```

问题是如何将“文字”列表中的歌曲添加到播放列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:31:31.027

好在终于解决了问题。我正在将 JSON 转换为不需要的字符串。

相反，我循环遍历 JSon Object 数组并将其添加到播放列表中。

```
/*Create an empty JSon array*/ 
var jsonobj = [];

/*Loop through a given list and push it into a JSon array*/
jQuery('ul.RadioList li a').each(function (index) {
       var mp3 = jsonobj.push({ 'mp3': jQuery(this).attr('href') });
       var title = [];
       title.push(jQuery(this).text());
       jsonobj[mp3 - 1]['title'] = title;
});

var cssSelector = {
       jPlayer: "#jquery_jplayer",
       cssSelectorAncestor: "#jp_container_1"
};
/*An Empty Playlist*/
var playlist = []; 
   var options = {
       swfPath: "./js",
       supplied: "mp3"
};
var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);
/*Loop through the JSon array and add it to the playlist*/ 
for (i = 0; i < jsonobj.length; i++) {
      myPlaylist.add(jsonobj[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T14:46:04.747

你可以简单地做

```
myPlaylist = new jPlayerPlaylist({
        jPlayer: "#mediaPlayer",
        cssSelectorAncestor: "#jp_container"
    }, playList //JSON object
    , {
        swfPath: "dist/jplayer",
        supplied: "webmv, ogv, m4v, oga, mp3",
        useStateClassSkin: true
    }); 
```

你的 JSON 对象可以是以下元素的集合

```
playList.push(
          {
            'm4v': fileURL,
             'title': "File Title,
          }
); 
```

# javascript - KineticJS JavaScript 另存为文件系统选项

> ID：15763596
> 
> 赞同：1
> 
> 时间：2013-04-02T12:01:48.917
> 
> 标签：javascript, html, canvas, filesystems, kineticjs

我正在使用 KineticJS 创建一个 Web 应用程序，它是一个使用 html5、css 和 javascript 的独立应用程序。

我有以下代码将当前画布转换为 imageURI。

```
function save()
{
    stage.toDataURL({
        callback: function(imageURL) {
            window.open(imageURL);
        },
        mimeType: 'image/png',
        quality: 1,
        height: 480,
        width: 640

    });
 } 
```

save() 使用按钮的 onclick 属性触发。

我有两个问题要解决：-

2.  当我点击这个保存按钮时，我希望能够打开一个“另存为”对话框。
3.  重命名文件，而不是“download.png”以将日期时间显示为文件名。例如，“020420130306PM.png”（日期 02/04/2013 时间 0306）
4.  我的舞台尺寸是 958 X 598，我想将文件保存为 640 X 480。toDataURL 函数中的高度和宽度属性仅裁剪画布的顶部 640 X 480 像素。如何将整个舞台 ( 958 X 598 ) 压缩成 ( 640 X 480 ) 并保存。

我目前的解决方案是 KineticJS 教程中所述的解决方案，即单击保存按钮，打开带有画布图像的新页面，右键单击图像，另存为图像，将文件从 download.png 重命名为 020420130306PM.png 并单击保存。

我使用 setScale 方法解决了第三部分，它工作得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:34:05.613

我解决了重命名文件的第二部分，但是，我仅限于 chrome 浏览器，并且无法将其保存在默认下载文件夹以外的任何其他位置。

标签中存在一个`download`属性。`<a>`如果`download = "myfilename.png"`那么文件将被下载为`myfilename.png`

首先，要强制浏览器下载文件，你应该修改imageURI。

`var newImageURL = imageURL.replace("data:image/png;base64","data:image/octet-stream;base64");`

现在，要添加和修改属性，只需使用 jQuery`attr()`函数和`click()`. 例如，

```
$('#saveAnchor').attr('download',filename);
$('#saveAnchor').attr('href',newImageURL); 
```

现在触发对锚链接的虚假点击`$('#saveAnchor')[0].click();`

所以基本上当`save()`被调用时，以上所有都发生在回调函数中。

但我仍然想知道是否有任何可能的方法可以在不使用 PHP 或 AJAX 的情况下使用“另存为”对话框保存图像。

# facebook - Facebook 的 OpenGraph 是否支持仅语言区域设置？

> ID：15763606
> 
> 赞同：2
> 
> 时间：2013-04-02T12:02:11.560
> 
> 标签：facebook, internationalization, facebook-opengraph

[http://developers.facebook.com/docs/internationalization/](http://developers.facebook.com/docs/internationalization/)说“Facebook 语言环境分别遵循 ISO 语言和国家代码，并用下划线连接。”。

那么它会接受“en”还是必须包含“en-us”“en-gb”等？

（我有一些自动检测到的语言，其中只有语言而不是区域是已知的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:00:06.273

是的，您必须使用 ll_CC 格式。如果您无法弄清楚该语言属于哪个地区，您可以做出有根据的猜测。查看[Translation XML 文件](https://www.facebook.com/translations/FacebookLocales.xml)，了解该语言的可用区域。如果这适用于您的应用程序，您甚至可以在运行时解析它。

# mysql - SELECT ... INTO 了解其行为

> ID：15763607
> 
> 赞同：0
> 
> 时间：2013-04-02T12:02:11.360
> 
> 标签：mysql, sql, phpmyadmin

有人告诉我，我可以检查 SELECT 语句是否找到具有以下语法的列

```
$rows = query( "SELECT * FROM tbl WHERE id = idx");
if ( $rows == false ) 
```

它似乎工作。

无论如何，如果我检查`if ( $rows == 0 )`它不会返回相同的值。

不应该`0`和`false`相同（当然除了类型）？

当查询没有找到行时，查询返回的实际值是多少？我问是因为它似乎不是假的，因为声明`var_dump( $rows === false )` 打印了`false`..

***编辑：对不起，伙计们，query() 是其他人编写的库中的一个函数，我不知道（我现在从 sql 开始......）。它只是执行一条 SQL 语句，返回结果集中所有行的数组，或者在（非致命）错误（如未找到行）时返回 false。

不过，我还有一个小问题。该函数在找不到任何行时返回 false，所以我不应该能够用 捕捉它`if ( $rows === false )`吗？

为什么`var_dump(false)`不打印出任何东西，而`var_dump(true)`打印出我`1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:10:27.493

我不太确定您是否使用简单的`mysql_*`函数、MySQLi 或 PDO，但无论如何`$rows`都不会返回结果行数。它是一个返回/创建的布尔值/对象，具体取决于您的查询是否成功。

```
$sql = $mysqli->query("SELECT * FROM tbl WHERE id='1'");
if(!$sql->error)
  $number_of_rows = $sql->num_rows; // for sure it will output 1 
```

# scala - 如何在对象初始化的后期将主体分配给defs？

> ID：15763612
> 
> 赞同：2
> 
> 时间：2013-04-02T12:02:32.490
> 
> 标签：scala

由于函数是 Scala 中的对象，我想通过类参数初始化类方法，例如：

```
class myClass(functionsMap: Map[methodNameString,Function]){
      def method1;
      def method2;
} 
```

我想通过 this 初始化这个方法`functionsMap`。

伪代码可能如下：

```
Map(
  "method1" -> { x => x.size },
  "method2" -> { () => println("hello") }
) 
```

然后我想遍历这个映射并通过类中的这个参数化函数初始化方法，如下所示：

```
class myClass(functionsMap: Map[methodNameString,Function]) {
      def method1 = functionsMap("method1")
      def method2 = functionsMap("method2")
} 
```

有谁知道如何实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:09:38.637

[动态特征](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.Dynamic)是可能的：

```
import scala.language.dynamics

class myClass(functionsMap: Map[ String, Function0[Unit]]) extends Dynamic {
  def selectDynamic(methodName: String) = { 
   println("I'm calling " + methodName) 
   functionsMap(methodName).apply()
  } 
}

scala> val funcs = Map("foo" -> (() => {println("I'm method passed outside")}))
// funcs: scala.collection.immutable.Map[String,() => Unit] = Map(foo -> <function0>)

scala> new myClass(funcs)
// res12: myClass = myClass@2d298123

scala> res12.foo
I'm calling foo
I'm method passed outside 
```

# windows - 如何在 Windows 上的“Git bash”中分离“git gui”？

> ID：15763615
> 
> 赞同：8
> 
> 时间：2013-04-02T12:02:37.353
> 
> 标签：windows, git, git-bash, msys, git-gui

例如，

1.  我开始“git bash”；
2.  我导航到某些目录；
3.  我开始`git gui&`；
4.  我关闭控制台窗口或按 Ctrl+C。

Git-gui 的窗口消失了。即使我用过`git gui&disown`. 即使当我按下 Ctrl+C 时它不在前台。

如何正确脱离`git gui`Windows 控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-30T16:26:27.267

为了其他人的利益，我将给出与 [git bash](http://code.google.com/p/msysgit/)和[msys bash](http://www.mingw.org/wiki/MSYS)相关的更一般的答案。

## 解决方案 1：不使用标准输出分离

假设您要分离应用程序：

```
"C:\Program Files\MyApp\MyApp.exe" 
```

它不会将您要检索的任何信息输出到标准输出（或标准错误）。
在您的 Windows bash shell 中使用：

```
cmd //c start //D "C:\\Program Files\\MyApp"  MyApp.exe arg1 arg2 
```

MyApp 将在一个单独的窗口中运行，关闭调用 bash shell 不会影响它（基本上就像 Linux 守护程序一样）。

如前所述，您无法阅读应用程序消息，除非它们是对话消息，因此此解决方案适用于 GUI 应用程序。无论如何，如果`MyApp.exe`它是一个 Windows 批处理文件，例如`MyApp.cmd`，它将调用它的 cmd.exe 主机并在那里记录：简而言之，您将读取 .cmd/.bat 案例的输出。

**类似 Mac 的用户**

`cmd.exe`窗口会瞬间闪出。如果这对您（r 用户）来说不是那么酷，请在上面的行中替换`cmd`为 [cmdow](http://www.commandline.co.uk/cmdow)、[NirCmd](http://www.nirsoft.net/utils/nircmd.html)或类似的东西。

## 解决方案 2：使用标准输出分离

如果要将日志读取到 stdout 和 stderr，请使用：

```
cmd //c start cmd //k  "C:\\Program Files\\MyApp\\MyApp" arg1 arg2 
```

如果 MyApp 是控制台应用程序，则通常建议使用此替代方法。现在你得到一个带有“家”的守护进程。MyApp 将由第二个托管运行`cmd.exe`，您将在此处看到它的输出。
对于 GUI 应用程序，您最终会得到两个窗口：MyApp 窗口和调用 cmd 窗口。

在这两种情况下，退出 MyApp 并不意味着关闭 cmd 窗口；而关闭 cmd 窗口只会关闭 MyApp 控制台。

如果闪烁的一拳击中你，这里你只需要更换第一个`cmd`，第二个是你的守护进程的可见家。

## 解决方案 3：分离以文档为中心的应用程序

一些文档与一些处理应用程序密切相关，通过类似于 Linux shebang 语法的机制，但基于 Windows 的注册表；因此您无需调用相关应用程序即可打开文档。

这种行为可以在 bash 中进行模拟，甚至可以以分离的方式进行模拟。

至于不需要输出到 stdout 和 stderr 的应用程序，打开 MyApp.doc ：

```
cmd //c start //D "C:\\Program Files\\MyApp"  MyApp.exe  "Path\\to\\MyApp.doc" 
```

可以简化为：

```
cmd //c start //D "Path\\to" MyApp.doc 
```

至于需要 stdout 和 stderr 输出的应用程序，

```
cmd //c start cmd //k  "C:\\Program Files\\MyApp\\MyApp" "Path\\to\\MyApp.doc" 
```

可以简化为：

```
cmd //c start cmd //k  "Path\\to\\MyApp.doc" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-30T13:27:16.457

以下命令适用于“git bash”：

```
git gui </dev/null >/dev/null 2>&1 & 
```

我试过`Ctrl`+ `C`，`Ctrl`+`D`并简单地关闭控制台窗口。`git gui`在所有情况下都保持开放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-18T19:41:35.007

根据安东尼奥的回答，我想出了以下食谱：

```
cmd //c start //D "C:\Program Files\Git\bin" "wish.exe" "C:\Program Files\Git\libexec\git-core\git-gui" 
```

它可以工作，可以通过在 shell 中按 Ctrl-D 来测试。shell 正确关闭， git gui 继续工作。

缺点：该方案忽略当前目录，在该`C:\Program Files\Git\bin`目录中打开 git gui，而不是在当前目录中。

有人可能会争辩说，Windows 上的 git gui 会记住最近的存储库，因此只需单击一下即可。没错，但问题是：如何`git gui`在当前目录中分离...

我已经尝试了一些变体来解决这个缺点，但没有一个真正令人满意的。

下面的人总是问`git gui`用什么打开。在文件选择器中选择“C:\Program Files\Git\bin\wish.exe”可以，但每次都必须这样做。

```
cmd //c start //D "E:\\escapedwindowsstyle\\path\\to\\my\\git\\repo\\" "C:\\Program Files\\Git\\bin\\wish.exe" "C:\\Program Files\\Git\\libexec\\git-core\\git-gui"

cmd //c start "C:\\Program Files\\Git\\bin\\wish.exe" "C:\\Program Files\\Git\\libexec\\git-core\\git-gui" 
```

任何人都可以理解会发生什么和/或改进吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T12:05:27.707

如果 gitgui 已经启动，您可以`disown`使用该作业使其不会以控制台结束：

```
disown -h <jobid> 
```

如果您想在启动 Git GUI 时执行此操作（因此您只需启动并忘记），`nohup`但由于未知原因，它不在 MsysGit 分发的二进制文件中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-11T01:18:51.287

在 Git for Windows 2.25 中，只需键入

```
git-gui 
```

打开当前工作目录的 GUI，完全分离。（注意连字符）。

# ios - 设置div的高度小于屏幕高度时的空白带

> ID：15763632
> 
> 赞同：0
> 
> 时间：2013-04-02T12:03:13.417
> 
> 标签：ios, cordova

我最近正在与 phonegap 合作一个新项目。在我的应用程序中，我想保留状态栏，并且应用程序的其余部分不滚动。我无法停用触摸，因为我需要它用于应该可滚动的 div。这个可滚动的 div 只是应用程序的一部分。我试图将主体和根 div 的高度设置为 548px。但这并不能阻止应用程序滚动，并且在我定义的高度之外的区域出现白色条纹。这是一个屏幕截图。 ![底部有一条白色带](https://i.stack.imgur.com/AfhFW.png)

关于如何定义根 div 的高度以使其高度完全对应于屏幕的其余高度（也就是说，在 iphone 5 上为 568px-20px=548px）的任何想法，因此它不会滚动。提前致谢！

# ios - 以编程方式旋转键盘

> ID：15763634
> 
> 赞同：0
> 
> 时间：2013-04-02T12:03:19.983
> 
> 标签：ios, objective-c

我正在使用这条线来改变我的视图方向，它可以工作。

```
self.view.transform = CGAffineTransformMakeRotation(rotation); 
```

但是，我的键盘仍然保持原样，没有跟随我的视图旋转。我的问题是，我如何一起改变我的键盘方向，比如在线路之后？我的界面只支持肖像，我只想以编程方式进行。谢谢。

P/S：部署目标 6.1

# ms-access - 在查询中设置列过滤器/条件会弹出访问“输入参数”对话框

> ID：15763653
> 
> 赞同：2
> 
> 时间：2013-04-02T12:04:08.250
> 
> 标签：ms-access, ms-access-2010

我编写了一个包含一些计算字段的查询（这些值是财务的，每个字段都与一年中的一个月相关）例如：

```
Period 1 ALS: [Period 1]-[Period 1 Retention]
Period 2 ALS: [Period 2]-[Period 2 Retention]
Period 3 ALS: [Period 3]-[Period 3 Retention] 
```

...依此类推，直到第 12 期。

然后我有一个最后一列，它将所有这些“Period X ALS”列加起来形成一个“TotalALS”列。[期间 1 ALS]+[期间 2 ALS]+[期间 3 ALS] ...等等。

我的想法是，我会将“>0”放在“TotalALS”列的条件中，因此最终会得到一个查询，该查询会过滤掉所有没有计算出钱的记录。

问题是，只要我将条件 >0 放在“TotalALS”字段中，Access 就会要求我在查询运行之前创建的每个“Period X ALS”列的参数值。

据我了解，Access 在找不到查询中引用的内容时会要求提供参数。我不确定这是怎么回事，因为当我没有指定任何条件时查询运行良好。

我还读到这可能与 Access 误读字段格式有关。所有源字段都是数字（即[Period 1] 和[Period 1 Retention]），所以我假设计算的字段将遵循相同的数字格式。

我在这个查询上运行了 Database Documenter，有趣的是，它在报告的 Query Paramenters 组下列出了我的计算字段，每个字段的类型为“Text”。不确定它如何认为这些字段是文本。

为了看看这是否是我试图明确声明我所谓的“参数”的问题，即将它放在 SQL 的顶部：

```
PARAMETERS [Period 1 ALS] IEEEDouble, [Period 2 ALS] IEEEDouble, etc... 
```

尽管 Database Dcoumenter 报告将这些字段中的每一个都显示为我现在指定的数字格式，但当我实际尝试运行查询时，我仍然收到“输入参数值”弹出窗口。

略简写的 SQL：

```
SELECT 
[T_FM45_PeriodConversion03-ALS].[Period 1], 
[Period 1]*[Partner Rate]) AS [Period 1 Retention], 
[Period 1]-[Period 1 Retention] AS [Period 1 ALS], 
```

上述 3 个字段在一年的 2 至 12 期间重复。然后我的 TotalALS 字段：

```
[Period 1 ALS]+[Period 2 ALS]+[Period 3 ALS]+[Period 4 ALS]+[Period 5 ALS]+[Period 6 ALS]+[Period 7 ALS]+[Period 8 ALS]+[Period 9 ALS]+[Period 10 ALS]+[Period 11 ALS]+[Period 12 ALS] AS TotalALS, 
```

```
INTO [T_FM45_PeriodConversion04-ALS] 
```

```
FROM [T_FM45_PeriodConversion03-ALS] LEFT JOIN Partners ON [T_FM45_PeriodConversion03-ALS].PartnerAbbr = Partners.Abbreviation 
```

```
WHERE ((([Period 1 ALS]+[Period 2 ALS]+[Period 3 ALS]+[Period 4 ALS]+[Period 5 ALS]+[Period 6 ALS]+[Period 7 ALS]+[Period 8 ALS]+[Period 9 ALS]+[Period 10 ALS]+[Period 11 ALS]+[Period 12 ALS])>0)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:14:55.483

我的猜测是您的查询将别名分配给字段表达式，然后尝试在`WHERE`子句中使用这些别名。`WHERE`在子句中使用非别名字段表达式。

而不是这样的东西......

```
SELECT (fld2 - fld1) AS difference
FROM MyTable
WHERE difference > 0; 
```

用这个 ...

```
SELECT (fld2 - fld1) AS difference
FROM MyTable
WHERE (fld2 - fld1) > 0; 
```

该模式存在于您的查询中。在您的`SELECT`列表中，您有...

```
SELECT ..., [Period 1]-[Period 1 Retention] AS [Period 1 ALS], ... 
```

然后在`WHERE`子句中，您有...

```
WHERE ((([Period 1 ALS]+ ... 
```

问题是这`[Period 1 ALS]`是一个别名，所以在数据库引擎评估`WHERE`子句时，它不识别别名。因此它假定`[Period 1 ALS]`必须是一个参数并要求您为该参数提供一个值。

# php - PHP If/ELSE 或 Switch/Case 语句

> ID：15763654
> 
> 赞同：14
> 
> 时间：2013-04-02T12:04:12.610
> 
> 标签：php, algorithm, switch-statement

我给出的输入可以是 1 或 0

```
$no_required
$on_arrival
$schengen_visa
$uk_visa
$usa_visa 
```

我有以下案例，我想为每个案例向用户显示唯一的消息

```
a b c d e
1 0 0 0 0   No Visa Required
0 1 0 0 0   Visa can be obtained on Arrival
0 0 1 0 0   You need Schengen Visa
0 0 0 1 0   You need UK visa
0 0 0 0 1   You need US visa
0 0 1 1 1   You need Either of the Visas
0 0 1 1 0   You need Schengen/UK visa
0 0 1 0 1   You need Schengen/US visa
0 0 0 1 1   You need USA/UK visa 
```

其中 ABCDEF 是上述变量。这是显示结果的最佳和优化方式。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T12:11:14.353

您显示的条件可以通过位掩码很好地建模：

```
$messages = [
    16 => 'No Visa Required',
    8  => 'Visa can be obtained ...',
    4  => ...
]; 
```

然后，您只需将单独的变量格式化为位掩码：

```
$bitmask = ($no_required ? 16 : 0)
         | ($on_arrival  ? 8  : 0)
         | ...; 
```

然后只需选择正确的消息：

```
echo $messages[$bitmask]; 
```

* * *

注意：这里也必须使用常量而不是幻数，所以它看起来像这样：

```
define('VISA_NONE',       1);
define('VISA_ON_ARRIVAL', 2);
...

$messages = [
    VISA_NONE         => 'No Visa Required',
    ...,
    VISA_US | VISA_UK => 'You need USA/UK visa'
];

// using multiplication instead of conditionals, as mentioned in the comments
$bitmask = $no_required * VISA_NONE
         | $on_arrival  * VISA_ON_ARRIVAL
         | ...;

echo $messages[$bitmask]; 
```

* * *

将整个事情包装在一个适当的类中，你就拥有了一个很好的、可读的、可维护的、可重用的业务逻辑：

```
class Visa {

    const NONE       = 1;
    const ON_ARRIVAL = 2;
    ...

    protected $messages = [];

    protected $visa;

    public function __construct() {
        $this->messages = [
            static::NONE            => 'No Visa Required',
            ...,
            static::US | static::UK => 'You need USA/UK visa'
        ];
    }

    /**
     * @param int  $type    One of the class constants.
     * @param bool $enabled Whether this type of visa is required.
     */
    public function set($type, $enabled) {
        $this->visa = $this->visa | $type * (int)(bool)$enabled;
    }

    public function getMessage() {
        return $this->messages[$this->visa];
    }

}

$visa = new Visa;
$visa->set($visa::NONE,       $no_required);
$visa->set($visa::ON_ARRIVAL, $on_arrival);

echo $visa->getMessage(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-02T12:11:18.187

```
<?php
$messages = array('10000' => 'No Visa Required', '01000' => 'Visa can be obtained on Arrival');
$no_required = '0';
$on_arrival = '1';
$schengen_visa = '0';
$uk_visa = '0';
$usa_visa = '0';

$result = "$no_required$on_arrival$schengen_visa$uk_visa$usa_visa";
if(array_key_exists($result, $messages)){
 echo $messages[$result]; //Visa can be obtained on Arrival
}

?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T12:11:10.547

我认为 switch 将是一个不错的选择：

```
$val=$no_required.$on_arrival.$schengen_visa.$uk_visa.$usa_visa;

switch($val)
{
    case "10000":
        echo "No Visa Required";
        break;
    case "01000"   
        echo "Visa can be obtained on Arrival.";
        break;
    case "00100":
        echo "You need Schengen Visa";
        break;
         .
         .   //Continue to add cases .
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T12:11:59.223

一个小提示：

为什么不将所有这些二进制数转换为整数值，然后通过 switch 语句传递它们？

```
<?php

    $integer_value = convert_binary_to_integer(a,b,c,d,e);

    // I'm not sure PHP provdies a function to convert binary numbers to integers number:
    // But you can write it yourself. It's pretty easy

    switch($integer_value) {
        case 16: // As the first combination of a,b,c,d,e corresponds to number 16 
             // do the appropriate action
        break;
            // ... and so on
    }
?> 
```

# playframework-2.1 - 使用 Scala 模板的动态 Javascript

> ID：15763655
> 
> 赞同：3
> 
> 时间：2013-04-02T12:04:13.487
> 
> 标签：playframework-2.1

我正在尝试本地化我的 Javascript 文件。例如，我会：

```
var count = 0;
$('#choices .choice').each(function(i) {
    $('input', this).each(function() {
        count++
        $(this).attr('placeholder', '@Message("placeholder.choice") ' + count)
    })
}) 
```

如果 Javascript 文件位于 Scala HTML 模板中，这显然会起作用，但我更愿意将它放在专用文件中。

首先，我想知道这是否是一个好主意：如果文件的内容可能发生变化，那么缓存文件怎么办？在这种情况下，只有一个参数：在 URL 中包含它会解决这个问题吗？例如：`/assets/javascripts/:lang/my-file.js`。

真正的问题是：使用 Play 是否可以做到这一点！框架？似乎不支持 Javascript 模板（或者我错过了一些东西）。有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:30:14.590

实际上你不需要动态地翻译你的 JavaScript，这会浪费资源，而是准备静态的 JS 文件，如等`messages.en.js`，`messages.de.js`并将基于用户语言的所需文件直接包含到视图中。

[Here你有一些描述如何让它变得简单](http://www.no-margin-for-errors.com/blog/2010/12/01/javascript-string-localization-done-right/)（JavaScript方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T05:49:34.977

有一个模块允许使用与 Play 模板中相同的机制进行 javascript 国际化，请查看： [https ://github.com/julienrf/play-jsmessages](https://github.com/julienrf/play-jsmessages)

这绝对符合您的需求。我用了一段时间就知道成功了。您可以通过 javascript 文件公开您的翻译，然后使用具有适当指纹配置的浏览器缓存。

# java - 在被拦截的方法上配置拦截器（代理）

> ID：15763656
> 
> 赞同：0
> 
> 时间：2013-04-02T12:04:14.250
> 
> 标签：java, spring, aop

据我所知，在 Spring AOP 中，当我们想要拦截某个方法调用时，我们配置了一个具有匹配所需方法调用的切入点配置的 Aspect。换句话说，我们在 Aspect 端配置拦截。

有没有办法完全从另一端配置它，即在要拦截调用的方法上？我希望这样的事情是可能的：

```
@Component
class MyClass {
    @Intercept(interctptor="myInterceptor", method="invoke")
    Object methodThatWillBeIntercepted(Object arg) {
        // ..
    }
}

@Component(value="myInterceptor")
class MyInterceptor {
   Object invoke(MethodInvocation mi) {
      // ...
      if (someCondition) {
         return mi.proceed();
      } else {
         return someOtherValue;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:15:27.563

你可以，至少如果你将它与 AspectJ 一起使用的话。您可以使用`@annotation(com.mycompany.MyAnnotation)`切入点声明中的语法来定位使用您的注释进行注释的元素。您可以[在 Spring 参考文档的第 9.2.3 节中阅读更多相关信息](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html)

如果您不使用 AspectJ，而是使用基于通用代理的拦截器，则“蛮力”方法是代理您要检查的所有对象，然后检查方法调用参数以查看该方法是否使用您的注释进行了注释，像这样的东西：

```
class MyInterceptor {
    public Object invoke(MethodInvocation mi) {
        if(mi.getMethod().getAnnotation(MyAnnotationClass.class) != null) {
            // Do the interception
        }
        else {
            return mi.proceed();
        }
    }
} 
```

不记得 MethodInvocation 的确切 API，但类似的东西。

# c++ - C++：在优化结束时计数零

> ID：15763658
> 
> 赞同：2
> 
> 时间：2013-04-02T12:04:20.320
> 
> 标签：c++, algorithm, optimization

我正在尝试解决在任何自然数的阶乘末尾计算 0 的标准问题。我的代码工作正常，但在线判断给出“超出时间限制”错误。决定在这里询问我如何优化我的代码。

```
#include <iostream>

using namespace std;

int count (int n)
{
    int result = 0;
    for (unsigned int i = 5; i <= n; i += 5)
    {
        int temp = i;
        while (!(temp % 5))
        {
            ++result;
            temp /= 5;
        }
    }
    return result;
}

int main()
{
    int N;
    cin >> N;
    cin.get();
    for (unsigned int i = 0; i < N; ++i)
    {
        int n;
        cin >> n;
        cin.get();
        cout << count (n) << endl;
    }
    return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:13:44.327

试试这个：

```
int count (int n)
{
    int result = 0;
    for (unsigned int i = 5; i <= n; i *= 5)
        result += n / i;
    return result;
} 
```

在`1*2*..*N`中，有可`N/5`被 整除的因数`5`。`N/25`其中也可以除以`25`, ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:19:46.317

您不必检查可被 5 整除的每个数字。相反，您可以用简单的系列数 5：

```
count =  n div 5 + n div 25 + n div 125... 
```

# ant - 具有排除模式的蚂蚁副本似乎不起作用

> ID：15763659
> 
> 赞同：0
> 
> 时间：2013-04-02T12:04:29.563
> 
> 标签：ant, copy

以下 Ant 代码段应该可以工作：

```
 ...
    <mkdir dir="${web.build.war.dir}/WEB-INF/classes"/>
    <copy todir="${web.build.war.dir}/WEB-INF/classes">
        <fileset dir="${web.build.classes.dir}">
            <exclude name="**/pos/**" />
        </fileset>
    </copy>
    ... 
```

它应该将每个文件复制`${web.build.classes.dir}`到除了路径中的`${web.build.war.dir}/WEB-INF/classes`那些文件之外。`/pos/`

但由于某种原因，当我`find build`在项目上做时，我得到的输出看起来像这样：

```
...
build/war/WEB-INF/classes/my/path/to/pos
build/war/WEB-INF/classes/my/path/to/pos/Class1.class
build/war/WEB-INF/classes/my/path/to/pos/Class2.class
build/war/WEB-INF/classes/my/path/to/pos/Class3.class
build/war/WEB-INF/classes/my/path/to/pos/Class4.class
build/war/WEB-INF/classes/my/path/to/pos/Class5.class
build/war/WEB-INF/classes/my/path/to/pos/Class6.class
... 
```

其他所有类似的复制操作似乎都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:14:27.860

嗯，最后回想起来，答案还是很明显的。

在最初的问题中，为了简洁起见，我省略了目标中的一些任务。看来，我应该没有。

更完整的片段应该是这样的：

```
 ...
    <mkdir dir="${web.build.war.dir}"/>
    <copy todir="${web.build.war.dir}">
        <fileset dir="${web.src.web.dir}">
            <exclude name="**/pos/**"/>
            <exclude name="security/**"/>
        </fileset>
    </copy>

    <mkdir dir="${web.build.war.dir}/WEB-INF/classes"/>
    <copy todir="${web.build.war.dir}/WEB-INF/classes">
        <fileset dir="${web.build.classes.dir}">
            <exclude name="**/pos/**" />
        </fileset>
    </copy>
    ... 
```

第一个复制任务会将所有资源从 Web 资源的开发副本复制到*war-to-be*文件夹。

我使用的是 Eclipse IDE，并且由于项目配置为将 java 类构建到`${web.src.web.dir}/WEB-INF/classes`文件夹中，因此第一个任务只是将所有类复制到 war 文件夹中，因此下一个复制任务中的排除过滤器无效。

# android - Python Google App Engine 接收字符串而不是 JSON 对象

> ID：15763660
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:04:30.780
> 
> 标签：android, python, json, google-app-engine, http-post

我正在使用下面的脚本将 HTTP POST 请求从 android 发送到服务器

```
 URI website = new URI("http://venkygcm.appspot.com");

            HttpClient client = new DefaultHttpClient();
            HttpPost request = new HttpPost(website);

            request.setHeader("Content-Type", "application/json");

            String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());

            JSONObject obj = new JSONObject();
            obj.put("reg_id","Registration ID sent to the server"); 
            obj.put("datetime",currentDateTimeString);

            StringEntity se = new StringEntity(obj.toString());
            request.setEntity(se);
            HttpResponse response = client.execute(request);

            String out = EntityUtils.toString(response.getEntity()); 
```

由于我发送了一个 JSON 对象，我必须在服务器中接收一个 JSON 对象。相反，我得到一个包含正文数据的字符串。服务器是用 Python Google App Engine 制作的。

```
 import webapp2

class MainPage(webapp2.RequestHandler):
    def post(self):
        self.response.out.write(" This is a POST Request \n")
        req = self.request
        a = req.get('body')
        self.response.out.write(type(a))

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

我尝试了 AK09 的建议，但我仍然得到一个字符串类型的对象。我的下一步应该是什么？

```
import webapp2
import json

class MainPage(webapp2.RequestHandler):
    def post(self):
        self.response.out.write("This is a POST Request \n")
        req = self.request
        a = req.get('body')
        b = json.dumps(a)

        self.response.out.write(type(a))
        self.response.out.write(type(b))

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:48:14.403

最后这段代码起作用了

```
import webapp2
import json

class MainPage(webapp2.RequestHandler):
    def post(self):
        self.response.out.write("This is a POST Request \n")
        req = self.request
        a = req.body
        b = json.loads(a)

        self.response.out.write(b)
        self.response.out.write(b['reg_id'])
        self.response.out.write(b['datetime'])
        self.response.out.write(type(b))

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

b 根据需要是 List 类型。

# c++ - C++11 移动和重新分配

> ID：15763666
> 
> 赞同：4
> 
> 时间：2013-04-02T12:04:48.277
> 
> 标签：c++, c++11

这段代码可以编译，但我刚刚开始学习 C++11，我不明白幕后发生了什么。

```
void func(int&& var)
{
    int var2(var);
}

void main()
{

    int var1 = 22;
    func(move(var1));
} 
```

我的猜测：move(var1) 返回 var1 的 r 值（可能是它的数据），并且 func 函数正在使用 var1 的 r 值初始化 var2。但是为什么 func 调用后 var1 仍然有效？它不应该具有无效值，因为它的临时值已重新分配给 var2 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T12:11:00.607

这里有几个问题。

一个是您正在使用`int`. 而对于`int`副本来说，速度与移动一样快。因此，将移动作为副本实施是完全合理的。

不要求移动构造（或赋值）改变被移动事物的值。在您的代码中继续将其视为具有有用值是一个逻辑错误，但并不要求该值变得无用。

第二个是您编写的代码实际上并没有移动任何东西。简单地使用`::std::move`不会导致某些东西被移动。*这只是将左值转换为右值*以便移动某些东西的好方法。在你的情况下，`var`有一个名字，所以它是一个左值。`var2`您对in的初始化`func`实际上是一个副本，而不是移动。如果您已经编写了它`int var2(move(var));`，那么它将是一个移动，并且`var1`在那时`main`可能会失效。

重申一下，该`::std::move`函数只是向阅读您的代码的人发出信号，表明可能会发生移动，并且之后的变量值无法计算。它实际上并没有移动任何东西。

这是您的代码的标记版本：

```
// func requires a temporary argument, something that can be moved from
void func(int&& var)
{
    int var2(var); // Doesn't actually call int(int &&), calls int(int &)
    // int var2(move(var));  // Would actually call int(int &&) and a move would
                             // happen then at this point and potentially alter the
                             // value of what var is referencing (which is var1
                             // in this code).
}

void main()
{
    int var1 = 22;
    func(move(var1)); // Tell people that var1's value may be unspecified after
                      // Also, turn var1 into a temporary to satisfy func's
                      // signature.
} 
```

由于您编写的代码不会导致发生任何移动，因此这里有一个版本肯定会在某处移动某些东西：

```
#include <vector>
#include <utility>

using ::std;

// Still require an rvalue (aka a temporary) argument.
void func(vector<int>&& var)
{
   // But, of course, inside the function var has a name, and is thus an lvalue.
   // So use ::std::move again to turn it into an rvalue.
   vector<int> var2(move(var));
   // Poof, now whetever var was referencing no longer has the value it used to.
   // Whatever value it had has been moved into var2.
}

int main()
{
   vector<int> var1 = { 32, 23, 66, 12 };
   func(move(var1)); // After this call, var1's value may no longer be useful.
   // And, in fact, with this code, it will likely end up being an empty
   // vector<int>.
} 
```

而且，当然，这种写法很愚蠢。有时有理由指定参数是临时的。这通常是如果您有一个版本的函数采用引用，而另一个版本采用右值引用。但一般你不会那样做。因此，这是编写此代码的惯用方式：

```
#include <vector>
#include <utility>

using ::std;

// You just want a local variable that you can mess with without altering the
// value in the caller. If the caller wants to move, that should be the caller's
// choice, not yours.
void func(vector<int> var)
{
   // You could create var2 here and move var into it, but since var is a
   // local variable already, why bother?
}

int main()
{
   vector<int> var1 = { 32, 23, 66, 12 };
   func(move(var1));  // The move now does actually happen right here when
                      // constructing the argument to func and var1's value
                      // will change.
} 
```

当然，`var1`在该代码中命名有点愚蠢。真的，它应该这样写：

```
 func(vector<int>{ {32, 23, 66, 12} }); 
```

然后你只是在那里构建一个临时向量并将其传递给`func`. 没有明确使用`move`required。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:08:55.440

没有什么可以从 int 移动，因此创建了一个副本。对于具有移动构造函数或移动赋值运算符的类型具有移动底层资源的特定目的，则存在更改，否则它是副本。

std::move 会将左值转换为右值，以便可以将一些资源（堆或文件句柄上的对象）移出到其他对象，但实际移动发生在移动构造函数或移动赋值运算符中。

例如，考虑标准库中的向量，它具有移动复制构造函数和移动赋值运算符，它们执行一些显式工作来移动资源。

话虽如此，我相信类型在函数内部移动的`func`方式不是尝试移动的正确方式。`int&& var`是对右值的引用（用 std::move 强制转换）但是`var` （按名称）就像一个左值，`int var2(var);`无论如何都不会将 var 移动到 var2 并且它将是 COPY。尝试移动的正确方法是`int var2(std::move(var));`我的意思是，如果一个类型具有移动构造函数，它可以移动你必须使用的资源。

```
void func(int&& var) //2\. Var is a reference to rvalue however the by name the var is a lvalue and if passed as it would invoke copy constructor.
{
    int var2(std::move(var)); // 3\. hence to invoke move constructor if it exists the correct attempt would be to case it to rvalue again as move constructors take rvalue. If the move constructor does not exists then copy is called. 
}

void main()
{

    int var1 = 22;
    func(move(var1)); //1\. Cast the type to rvalue so that it can be passed to a move copy contructor or move assigment operator. 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:12:59.097

表达式`var1`是一个左值。Applying`std::move(var1)`为您提供了一个指向同一对象的右值。然后将此右值绑定到被`int&&`调用的`var`.

该表达式`var`也是一个左值。这是因为任何作为命名变量的表达式都是左值（即使它的类型是右值引用）。`var2`然后使用 的值进行初始化`var`。

因此，您所做的只是将值从`var1`to复制到`var2`. 什么都没有被移动。事实上，你甚至不能从像`int`. 尝试从临时初始化或分配`int`只会复制其值而不移动任何内容。

即使您使用具有`T`移动构造函数和赋值运算符的类型，您的代码也不会移动任何内容。那是因为您所做的唯一非引用初始化是 line `int var2(var);`，但这里`var`是一个左值。这意味着将使用复制构造函数。

`var1`从to移动的最简单方法`var2`是这样做：

```
void func(T var)
{
    T var2(move(var));
}

void main()
{

    T var1(22);
    func(move(var1));
} 
```

这将从`var1`创建移动`var`，然后从`var`创建移动`var2`。

您*可以*以几乎相同的方式执行此操作，除了更改`var`回右值引用，但我不推荐它。您必须记录所传递的右值将因内部移动而失效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:17:54.497

> move(var1) 返回 var1 的 r 值（可能是它的数据）

不，`move(var1)`返回一个右值引用，引用`var1`.

> 并且 func 函数正在使用 var1 的 r 值初始化 var2

`func`复制`var1`到`var2`. 如果`var1`是具有移动构造函数的类型，则将调用移动构造函数来初始化`var2`。但事实并非如此。

> 但是为什么 func 调用后 var1 仍然有效？

因为复制 an`int`不会使其无效。

> 它不应该有一个无效的值吗？

没有特殊的“无效值” `int`。使用未初始化的对象具有未定义的行为，但该对象不是未初始化的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T12:18:14.267

正如其他人所说，您的示例使用原始类型，它本质上调用了一个副本，因为这里根本不会发生移动。但是，我创建了一个可以发生移动的示例，使用`std::string`. 它的内脏可以从下面移出，你可以在这个例子中看到发生了什么。

```
#include<iostream>
#include<string>
#include<utility>

void func(std::string&& var)
{
    // var is an lvalue, so call std::move on it to make it an rvalue to invoke move ctor
    std::string var2(std::move(var));
    std::cout << "var2: " << var2 << std::endl;
}

int main()
{

    std::string var1 = "Tony";
    std::cout << "before call: " << var1 << std::endl;
    func(std::move(var1));
    std::cout << "after call: "  << var1 << std::endl;
} 
```

输出：

```
before call: Tony
var2: Tony
after call: 
```

您可以看到它`var1`确实已被移出，并且不再包含任何数据，但是根据标准它仅处于*未指定*状态并且仍然可以重用。

[现场示例](http://liveworkspace.org/code/QHaXl%2410)

# javascript - 使用 jasmine-node 进行测试

> ID：15763668
> 
> 赞同：0
> 
> 时间：2013-04-02T12:04:53.567
> 
> 标签：javascript, express, jasmine, jasmine-node

这是我要测试的场景：

登录用户修改“模块”属性“desc”。我没有使用任何数据库来存储“模块”，它是在我需要的文件中定义的。

这是不起作用的测试代码：

首先我有一个助手登录功能：//app.spec.js

```
var login = function(done) {
    var options = {
          uri: 'http://localhost:3000/login'
        , method: 'POST'
        , form: {
              username: 'user'
            , password: 'ffff'
        }
    }
    request(options, function() {
        done();
    });
}; 
```

和测试：

```
it('should be able to change desription of a module', function(done){
    login(done);
    var options = {
          uri: 'http://localhost:3000/module/1'
        , method: 'POST'
        , form: {
            desc: 'test'
        }
    }

    request(options, function(err, res, body){              
        var modules = require('../Model/module').modules;
        console.log(modules);
            expect(modules[0].desc).toBe('test');
            done();
    });
}); 
```

最后，

//app.js

```
app.post('/module/:module_id', ensureAuthenticated, function(req, res) {    
    var desc = req.body['desc'];
    if(req.module_id){
        findModuleById(req.module_id, function(err, module) {
            module.desc = desc;
            console.log('changed module');
            console.log(module);
        });
    }

    res.redirect('/');
}); 
```

问题是当我从 app.post 执行 console.log(modules) 时，它显示 desc 现在是“测试”，但我的测试失败了，因为它仍然显示默认值。

我是 express/node 的新手，不知道如何正确编写这些类型的测试。任何提示将不胜感激。

PS模块：

//模型/module.js

```
 var modules = [
      {id: 1, desc: 'Default description for module 1'}
    , {id: 2, desc: 'Default description for module 2'}
    , {id: 3, desc: 'Default description for module 3'}
    ];

module.exports.modules = modules; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:09:18.923

我不认为你应该传递给`login`jasmine-node 提供的`done`回调，而是一个调用其余测试的函数

```
it('should be able to change desription of a module', function(done){

    var onDoneLoggingOn = function(){
        var options = ...
        request(options, function(err, res, body){              
           ...
           done();
        });
    };
    login(onDoneLoggingOn);
}); 
```

# ektron - 在 Ektron 中命名智能桌面小部件

> ID：15763671
> 
> 赞同：3
> 
> 时间：2013-04-02T12:05:11.383
> 
> 标签：ektron

我在 Workarea\Widget 中创建了 ans Ektron Smart Desktop 小部件。但我无法更改该小部件的标题。如何为 Ektron Smart Desktop 小部件指定标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:05:56.043

确保您的自定义智能桌面小部件继承自“WorkareaWidgetBaseControl”类。您可以使用 WorkareaWidgetBaseControl 类中的以下功能，

```
SetTitle("Your widget Title"); 
```

# database - 在具有 ERROR13 类型不匹配的 vb 中插入命令（连接到 .mdb 数据库）

> ID：15763672
> 
> 赞同：0
> 
> 时间：2013-04-02T12:05:12.887
> 
> 标签：database, vb.net

当我运行程序时，我想知道我的代码有什么问题，代码中没有错误，但变量类型有问题接受，也许？我的数据库有 3 列，第一列是主键，自动递增，我不需要输入任何内容，但是当我插入 2 列时，我在 vb 中得到了 TYPE MISMATCH ERROR ...

PS：我在做数据库编程...

在这里，让我向您展示我的代码：

```
Private Sub Command2_Click()
Set rsAdd = New ADODB.Recordset
s = "insert into SongReq(SongTitle,Singer) values('" & Text1.Text & "', '" & Text2.Text & "')"
rsAdd.Open s, connect, adOpenDynamic, adLockOptimistic
MsgBox "Song Added, Thank you for sending your request!"
Text1.Text = ""
Text2.Text = ""
End Sub 
```

# javascript - 这个 js.js?version=1364903356 在网页中是什么意思？

> ID：15763682
> 
> 赞同：6
> 
> 时间：2013-04-02T12:05:32.120
> 
> 标签：javascript, jquery

每次我刷新站点并查看其页面源时，javascript src ie `js.js?version=1364903356`；版本号总是变化的。

我的问题是：这个数字是什么意思；如果我把`js.js`每一页都放进去，网站就不能工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T12:06:42.503

该版本通常被附加用于缓存目的，或者更确切地说，用于使缓存无效（通过更改版本号，因此，请求的 URL），因此它被视为新资源并重新下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:07:01.853

这个数字可能毫无意义。几乎可以肯定它只是被附加到 URL 中，以便 URL 发生更改，因此 JS 不会从缓存中获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:11:13.577

这是一种常用技术，用于防止或管理浏览器通常会缓存的 javascript 和其他文件的缓存。

如果版本号总是变化，那么这意味着有问题的页面正在阻止您的浏览器缓存文件；每个请求都将加载文件的新副本，无论它是否已更改。

这是不好的做法，很可能是由于相关站点的配置错误。

更常见的是，版本号将保持不变，但可以由站点本身触发更改。这意味着对于大多数请求，浏览器的缓存将起作用，但站点所有者可以控制是否刷新缓存，例如当他更新脚本文件时。

如果没有这种技术，已经缓存了文件旧版本的浏览器可能不知道文件已经更新，并且可能无法获取更新的版本。这可能会导致页面上脚本文件之间的版本冲突。

事实上，有一些技术上更正确的方法可以做到这一点，而不涉及在 URL 的末尾添加随机值。HTTP 标准规定浏览器应该查询 URL，并告诉站点它缓存了哪个版本。然后该站点可以响应“未更改”消息，并且浏览器可以使用缓存的版本。这应该意味着问题中使用的技术不是必需的。

但是，在某些情况下，该技术是必要的，因为某些浏览器和/或 Web 服务器配置可能无法使用标准方法正常工作，并且浏览器最终可能仍会错误地使用缓存版本。

因此，这种技术可以被视为一种解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:08:43.800

这只是为了`avoid Caching purposes and request new each time`。每当您访问相同的内容时。如果您在 IIS 中设置启用静态内容缓存，则浏览器将向`HTTP 304`资源发出未修改状态。

您可以在 chrome 中查看。打开开发人员工具 ( `f12`)，然后转到网络选项卡。您将在这样的请求标头中看到。

```
Request Method:GET
Status Code:304 Not Modified 
```

IIS/任何 Web 服务器将确定内容是更改还是相同的内容。如果内容与缓存中的内容相同，则不会发起新请求。

通过附加版本号，文件名/url/资源将被更改。所以浏览器会发出一个新`GET`的资源请求。

# model-view-controller - 向信号器注册 JavaScriptSerializer

> ID：15763686
> 
> 赞同：0
> 
> 时间：2013-04-02T12:05:37.723
> 
> 标签：model-view-controller, signalr, javascriptserializer

我们可以使用 JavaScriptSerializer 作为信号器的默认序列化器吗？如果是这样，我们将如何注册到信号器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:06:21.923

没有。尽管有一个可插入的接口 SignalR 绑定到 JSON.NET

# amazon-web-services - AWS ElasticBean WSGIPath

> ID：15763693
> 
> 赞同：3
> 
> 时间：2013-04-02T12:05:56.910
> 
> 标签：amazon-web-services, wsgi, amazon-elastic-beanstalk

我在使用 Python 的 AWS ElasticBean 上的 WSGIPath 有问题。当我设置：

```
option_settings:
  - namespace: aws:elasticbeanstalk:container:python
    option_name: WSGIPath
    value: wsgi.py 
```

我得到一个`WSGIPath not found`错误。当我简单地将我的 wsgi.py 重命名为 application.py 并将我的 WSGIPath 配置更改`.ebextensions/myconfig.config`为以下内容时，一切都会再次运行。

```
option_settings:
  - namespace: aws:elasticbeanstalk:container:python
    option_name: WSGIPath
    value: application.py 
```

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:15:36.523

我建议在部署您的配置文件后，使用重命名的 wigipath 登录到 ec2，由 beanstalk 创建并检查 wsgi.py 是否真的存在于服务器上。您还可以分析服务器日志。

# javascript - javascript选择与图像下方的文本没有出现

> ID：15763695
> 
> 赞同：1
> 
> 时间：2013-04-02T12:06:03.683
> 
> 标签：javascript

我遇到了一些代码和旧 js 的问题。我复制了网页并更改了代码，但是在新文件中选择了相应的缩略图时，大图像下没有出现文本：http: [//jsfiddle.net/dEW75/](http://jsfiddle.net/dEW75/)

```
 <script type="text/javascript">
    function swapImage(imgID)
    {
        var itemImage   = document.getElementById('itemImage');
        var itemText    = document.getElementById('itemText');
        var itemCaption = document.getElementById('itemCaption');

        itemImage.src =              "images/finishing_touches/color_stain/textured/textured" + imgID + "_sm.jpg";

            if(imgID == 1)
            {
                itemText.innerHTML    = 'Latitude East';
                itemCaption.innerHTML = ''};

            if(imgID == 2)
            {
                itemText.innerHTML    = 'Summer Breeze';
                itemCaption.innerHTML = ''};

            if(imgID == 3)
            {
                itemText.innerHTML    = 'Winter Cherry';
                itemCaption.innerHTML = ''};

            if(imgID == 4)
            {
                itemText.innerHTML    = 'Autumn Leaves';
                itemCaption.innerHTML = ''};

            if(imgID == 5)
            {
                itemText.innerHTML    = 'Boardwalk';
                itemCaption.innerHTML = ''};

            if(imgID == 6)
            {
                itemText.innerHTML    = 'Driftwood';
                itemCaption.innerHTML = ''};

            if(imgID == 7)
            {
                itemText.innerHTML    = 'Canvas Linen';
                itemCaption.innerHTML = ''};

            if(imgID == 8)
            {
                itemText.innerHTML    = 'Linen Flaxseed';
                itemCaption.innerHTML = ''};

            if(imgID == 9)
            {
                itemText.innerHTML    = 'Silver Flannel';
                itemCaption.innerHTML = ''};

            if(imgID == 10)
            {
                itemText.innerHTML    = 'Onyx';
                itemCaption.innerHTML = ''};

                            if(imgID == 11)
            {
                itemText.innerHTML    = 'East Indian Laurel';
                itemCaption.innerHTML = ''};

                              if(imgID == 12)
            {
                itemText.innerHTML    = 'Sandalwood';
                itemCaption.innerHTML = ''};

                              if(imgID == 13)
            {
                itemText.innerHTML    = 'Nora Creek Oak';
                itemCaption.innerHTML = ''};

                                 if(imgID == 14)
            {
                itemText.innerHTML    = 'Midnight Espresso';
                itemCaption.innerHTML = ''};
                    }
    </script>
                            <h1 class="galleryTitle">Color &amp; Stain</h1>
                            <div class="subMenu">
                            <ul>
                                <li><a href="color_stain1.htm">solid color melamine</a> </li>
                                <li><a href="color_stain3.htm">wood tone melamine</a></li>
                                <li><a class="active" href="color_stain_textured_1.htm">textured melamine</a></li>
                                <li><a href="color_stain.htm">wood veneer</a></li>
                            </ul>
                            </div>
                            <div class="galleryContainer2">
                            <div class="galleryNavContainer2">
                            <div class="subtitle">
                            <p>Textured Color</p>
                            </div>
                            <div class="thumbs">
                            <div class="pageDetail1">
                            <p>page 1 of 3</p>
                            </div>
                            <div class="img">
                            <a href="javascript:swapImage(&quot;1&quot;)">
                            <img src="images/finishing_touches/color_stain/textured/textured1_th.jpg" alt="Latitude East" title="Latitude East" />
                            <span class="imgText">Latitude East</span>
                            </a>
                            </div>
                            <div class="img">
                            <a href="javascript:swapImage(&quot;11&quot;)">
                            <img src="images/finishing_touches/color_stain/textured/textured11_th.jpg" alt="Summer Breeze" title="East Indian Laurel" />
                            <span class="imgText">East Indian Laurel</span>
                            </a>
                            </div>
                            <div class="img">
                            <a href="javascript:swapImage(&quot;12&quot;)">
                            <img src="images/finishing_touches/color_stain/textured/textured12_th.jpg" alt="Sandalwood" title="Sandalwood" />
                            <span class="imgText">Sandalwood</span>
                            </a>
                            </div>
                            <div class="img">
                            <a href="javascript:swapImage(&quot;13&quot;)">
                            <img src="images/finishing_touches/color_stain/textured/textured13_th.jpg" alt="Nora Creek Oak" title="Nora Creek Oak" />
                            <span class="imgText">Nora Creek Oak</span>
                            </a>
                            </div>
                            <div class="img">
                            <a href="javascript:swapImage(&quot;14&quot;)">
                            <img src="images/finishing_touches/color_stain/textured/textured14_th.jpg" alt="Midnight Espresso" title="Midnight Espresso" />
                            <span class="imgText">Midnight Espresso</span>
                            </a>
                            </div>
                            </div>
                            <div class="page">
                            <ul style="margin: 0px auto; padding: 0px; text-align: center;">
                                <li class="previous"></li>
                                <li class="next"><a href="color_stain_textured.htm">page</a>
                                </li>
                            </ul>
                            </div>
                            </div>
                            <div class="imgContainer2">
                            <div class="img"><img alt="" id="itemImage" name="IMG1" /></div>
                            <div class="text" style="margin-top: 13px; padding: 2px 0px 0px;">
                            </div>
                            </div>
                            </div>
                            <script type="text/javascript">
<!--
    var imgID = "1";
    swapImage(imgID);
//-->
                            </script>
                            </div>
                            <p style="margin-right: 15px;">
                            <strong>PLEASE NOTE</strong>: Items in our gallery are selected to show the variety of
                            our products. If you don't see exactly what you have in mind, most likely we have it
                            or can order it for you.
                            </p>
                            <div style="float: right; text-align: right;">
                            <p>
                            <a href="index.htm">View our other galleries</a> &raquo;<br />
                            <a href="http://www.marketingresponse.com/closetos/contact.asp">Schedule a complimentary in-home design consultation</a> &raquo;<br />
                            <a href="../locations.htm">Visit our Chicago area showrooms</a> &raquo;
                            </p>
                            </div>
                            <script language="JavaScript"><!--
     ThisPage = Gallery;
     GroupChange("on",ThisPage);
    //-->
                            </script> 
```

当在此页面上选择缩略图时，我需要文本显示在大图像下方：http: [//jsfiddle.net/qVGFV/](http://jsfiddle.net/qVGFV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:11:55.740

您缺少在 html 中显示文本的元素。由于它不存在，因此尝试添加文本什么也不做。使用 class="imgContainer2" 将其添加到您的 div

```
<p id="itemText" style="padding-bottom: 0px;"></p> 
```

# android - 在android中隐藏媒体控制器的播放暂停按钮

> ID：15763699
> 
> 赞同：4
> 
> 时间：2013-04-02T12:06:12.743
> 
> 标签：android, android-videoview

我的活动中有视频视图，也有 MediaController，但我想从媒体控制器隐藏播放暂停按钮。

这是我的代码：

```
MediaController mediaController =  new MediaController(this,false);
videoHolder.setMediaController(mediaController);
mediaController.setAnchorView(videoHolder); 
```

请建议我解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-01T16:41:51.327

我设法实现了同样的目标。默认情况下，媒体控制器不公开任何隐藏播放/暂停控件的方法。因此，我们必须遍历 Media Controller 的子视图，获取所需的视图并对该视图做任何你想做的事情。

就我而言，我是按照以下方式进行的->

```
videoPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mediaPlayer) {
              LinearLayout viewGroupLevel1 = (LinearLayout)  media_Controller.getChildAt(0);
            LinearLayout viewGroupLevel2 = (LinearLayout) viewGroupLevel1.getChildAt(0);
            View view = viewGroupLevel2.getChildAt(2);
            view.setVisibility(View.GONE);
            videoPlayer.start();
        }
    }); ` 
```

为了解释我的代码，基本上媒体控制器是 FrameLayout 的子类，它有一个 LinearLayout 作为位置 0 的子视图组 (viewGroupLevel1)，viewGroupLevel1 再次包含两个子视图组，从中获取视图组 (viewGroupLevel2) 从 viewGroupLevel1 位置0\. 现在在 viewGroupLevel2 中获取位置 2 的视图，它实际上是一个图像按钮（播放/暂停按钮）。现在您可以轻松隐藏它。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-26T03:32:59.930

你可以看到 [http://www.phonesdevelopers.com/1765331/](http://www.phonesdevelopers.com/1765331/)

```
 MediaController mc = new MediaController(this);  
    mc.setVisibility(View.INVISIBLE);  
    videoView.setMediaController(mc); 
```

成功了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:12:37.970

试试看（不确定）

使用 OnPreparedListener 并在回调 onPrepared 中不正确地隐藏，例如：

```
@Override
public void onPrepared (MediaPlayer mp) 
{
    int childs = mediaController.getChildCount();
    for (int i = 0; i < childs; i++)
    {
        View child = mediaController.getChildAt (i);
        child.setVisibility (View.GONE);
    }
} 
```

# android - 实现 HoloEverywhere 和 SherlockActionBar 后将 Buttons 和 EditText 主题设置为 Holo？

> ID：15763701
> 
> 赞同：1
> 
> 时间：2013-04-02T12:06:22.333
> 
> 标签：android, actionbarsherlock, android-holo-everywhere

最后，我能够成功实现库`Sherlock`和`Holo`. 现在在创建我自己的项目并在清单文件中将主题设置为：
`android:theme="@style/Theme.Sherlock.Light"`
我尝试在我的`Android 2.3.6`;上运行应用程序 the`Button`和`EditText`do 仍然有旧的主题。经过这么累人的实施后，如何将这些主题更改为 Holo？

我看到了我应该设置的地方，`android:theme="@style/Holo.Theme.Sherlock.Light"`但我什么都看不到。设置清单后，清单中就会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:41:57.693

仅使用主题 @style/Holo.Theme、@style/Holo.Theme.Light、@style/Holo.Theme.Light.DarkActionBar。它已经有了夏洛克依赖。

ps：你没有完全集成的holoeverywhere。如果你不使用 HE 主题，org.holoeverywhere.app.Activity 会抛出异常。

# php - 如何在php中将数据插入到excel表格中

> ID：15763702
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:06:23.190
> 
> 标签：php, phpmyadmin

我是 php 新手，我有一项任务首先从 mysql 检索数据并将这些数据插入 excel 表中的相应字段。我确实检索了数据，但我不知道如何在 excel 表中插入这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:11:22.080

看看这个。[PHPExcel](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T12:13:25.317

首先设置Excel标题：

```
header("Content-type: application/vnd.ms-excel; charset=utf-8");
header("Content-disposition: attachment; filename=xls_file_".date("Ymd").".xls"); 
```

然后只需输出一个普通的 HTML 表格`<table><tr><td>some_data_01</td><td>some_data_02</td>... ...</table>`- 您在 Excel 中需要的任何内容。

结果将是一个 Excel 文件。

# java - 针对 Active Directory 的 LDAP 身份验证可接受的 SECURITY_PRINCIPAL 格式是什么？

> ID：15763708
> 
> 赞同：25
> 
> 时间：2013-04-02T12:06:47.333
> 
> 标签：java, authentication, active-directory, ldap

我正在尝试通过 LDAP 针对 Active Directory 对用户进行身份验证。以下是我使用的代码片段：

```
private DirContext bindAsUser(String bindPrincipal, String password) {
    Hashtable<String,String> env = new Hashtable<String,String>();
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.SECURITY_PRINCIPAL, bindPrincipal);
    env.put(Context.PROVIDER_URL, bindUrl);
    env.put(Context.SECURITY_CREDENTIALS, password);
    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.REFERRAL, "follow");

    try {
        return new InitialLdapContext(env, null);
    } catch (NamingException e) {
        e.printStackTrace()
    }
} 
```

如果我提供，则绑定代码有效：

*   下级登录名，即`NetBIOSDomainName\sAMAccountName`（例如域\用户名），或
*   `userPrincipalName`（例如用户名@abc.com），或
*   `distinguishedName`（例如 CN=username,OU=xxx,DC=abc,DC=com），或
*   `objectSid`（例如 S-1-5-21-3623811015-3361044348-30300820-1013）

作为`SECURITY_PRINCIPAL`，虽然如果`sAMAccountName`使用（例如用户名）失败（我猜只有在森林中唯一的名称是有效的）。

那么接受的模式是`SECURITY_PRINCIPAL`什么？我搜索了一些类似的问题，但没有一个提供对官方 AD/LDAP 文档的参考。还是我可以在某处查找的配置？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-11-15T19:23:13.803

来自 [MS-ADTS: Active Directory Technical Specification]，我猜是 AD 的官方文档。

[http://msdn.microsoft.com/en-us/library/cc223499.aspx](http://msdn.microsoft.com/en-us/library/cc223499.aspx)

“5.1.1.1.1 简单认证”一节列出了简单认证支持的所有名称形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-27T13:00:23.453

我认为您需要检查 LDAP 主体模板。它指定 LDAP 服务器所需的主体身份验证模板。主体身份验证模板是安全主体（正在登录的人）的身份验证信息必须传递给 LDAP 服务器的格式。默认值为 ${email}，这是 Microsoft Active Directory 所需的格式。其他 LDAP 服务器需要不同的身份验证模板。请咨询您的网络管理员以了解有关 LDAP 服务器的更多信息。

# php - 在单个查询中检查某些用户 ID 是否是登录用户的朋友

> ID：15763712
> 
> 赞同：2
> 
> 时间：2013-04-02T12:06:59.807
> 
> 标签：php, mysql, sql

我的网站上有一个简单的朋友系统。现在我正在尝试创建一个多用户群消息系统，但仅限于朋友之间。我的消息系统的“收件人”值是逗号值，我想检查它们是否都是发送消息的人的朋友。

例如，我可以通过以下查询获取用户的所有朋友：

```
SELECT relation_setter user_id
FROM users_relationships
WHERE relation_getter = {$logged_in_user}
AND active = 1
UNION
SELECT relation_getter user_id
FROM users_relationships
WHERE relation_setter = {$logged_in_user}
AND active = 1 
```

我的消息表单中有`natasha, reeta`一个 $_POST['to'] 值，然后我将其转换为用户 ID 并得到类似`126152, 112238`

现在我如何在一个查询中检查这些 id 是否都是登录用户的朋友。我不想在循环中运行我的 is_friend 函数，该函数会检查单个用户 ID 是否是登录用户的朋友。

**关系模式：**

**用户关系**

```
id PK
relation_setter FK user_id
relation_getter FK user_id
active smallint(1) 
```

`relation_setter`是发送好友请求的人。为了得到我所有的朋友，我得到了我的 ID 为 或 的所有`relation_setter`ID `relation_getter`。

**用户**

```
user_id PK
name
username
password
etc etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:40:51.743

您的帖子对架构提供了模糊的见解，因此我将使用一些假设

您可以通过 IN 语句找到与其朋友匹配的所有 id。由于您已经将它们作为带有逗号的数值，您可以这样做：

```
SELECT user_id
FROM users_relationships
WHERE relation_getter IN (126152,112238,123456)
AND active = 1 
```

这将只返回匹配的朋友的记录。然后，您可以将行数与查询中的元素数进行匹配，以确定他们是否是朋友。您也可以只发送给匹配的人。

编辑

```
SELECT user_id
FROM users_relationships
WHERE relation_getter IN (126152,112238,123456)
OR relation_setter IN (126152,112238,123456)
AND active = 1 
```

这将返回此人朋友的所有用户 ID，无论他们是 getter 还是 setter，并且它是活动的。

编辑 2

*新表*

```
relationships_members

id FK (from users_relationships; not unique)
user_id 
```

关系成员的样本将是

```
 id  |  user_id  |   relation_setter
--------------------------------------
  1      12345               1  
--------------------------------------
  1      98765               0
-------------------------------------- 
```

然后，如果您查询，您只会收到有效的 users_relationships ID

```
select distinct a.id, b.user_id as friend
from (
    select distinct id as friend
    from relationships_members
    where user_id = {$logged_in_user}
) a, relationships_members b
WHERE a.id = b.id
and user_id IN (126152,112238,123456) 
```

# jquery - Jquery在文档准备好和浏览器调整大小时滑动切换

> ID：15763715
> 
> 赞同：1
> 
> 时间：2013-04-02T12:07:10.780
> 
> 标签：jquery, slidetoggle, window-resize

我有以下代码，除了在我调整浏览器大小时效果很好。该代码基本上检查文档准备好的浏览器大小和浏览器调整大小以确定是否应显示菜单。但是，在调整大小时，单击时菜单会上下滑动多次。我假设它多次注册为调整大小，因此多次激活滑动切换。请参阅问题示例：http: [//jsfiddle.net/8mLvp/2/](http://jsfiddle.net/8mLvp/2/)

```
function doMenu() {

    $('.menu').slideToggle();

    if ($('.menu2').is(":visible")) {
        $('.menu2').hide();
    } else {
        $('.menu2').show();
    }
    return false;
   }

}
$(document).ready(doMenu);
$(window).resize(doMenu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:25:13.860

有多种方法可以实现这一点，但使用超时是最简单的。这将检查用户是否已完成调整大小

```
function doMenu() {
 //your stuff to happen here
}

var TO = false;
$(window).resize(function(){
 if(TO !== false)
    clearTimeout(TO);
 TO = setTimeout(doMenu, 200); //200 milisecond check
}); 
```

在这里查看我的示例[http://jsfiddle.net/8mLvp/](http://jsfiddle.net/8mLvp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:23:13.460

问题是，每当您调整浏览器的大小时，都会触发回调并绑定 click 事件。因此，如果您多次调整大小，click 事件会被多次绑定，因此回调会被多次调用。只需检查单击处理程序本身的宽度并仅分配一次单击处理程序：

```
$('.icon-menu-2').click(function () {      
    var width = $(window).width();

    if (width < 530) {
        $('.menu').slideToggle();

        if ($('.menu2').is(":visible")) {
            $('.menu2').hide();
        } else {
            $('.menu2').show();
        }
        return false;
    }
}); 
```

# django - Django 泛型关系的 SQL 索引

> ID：15763716
> 
> 赞同：3
> 
> 时间：2013-04-02T12:07:14.747
> 
> 标签：django, django-models, indexing, django-postgresql

在 Django 模型中的 GenericForeignKey 上创建 SQL 索引是否可能/明智？

我想在我的 postgreSQL 数据库中查找大量（约 100 万）个对象。我的查找基于相关模型上的 GenericForeignkey，它实际上存储为两个字段：object_id（被链接到的对象的 pk）和 content_type（代表被链接对象类型的 Django ContentType 模型的 FK至）。

在 SQL 术语中，这本质上是：

```
WHERE ("my_model"."content_type_id" = x AND "my_model"."object_id" = y) 
```

`object_id`是一个非唯一字段 - 由于通用 FK 可以链接到多个模型，因此不同类型的对象可能具有相同的`pk`.

我想知道是否可以通过在`my_model.object_id`. 我对索引的了解是有限的，所以我可能没有正确理解它们的使用，但我知道 Django 会自动在正常的 ForeignKey 关系上创建索引，所以我假设有一个相关的加速。

有没有人有过为 GenericForeignKeys 创建索引的经验？您是否发现由此带来的性能提升？非常感谢任何帮助或见解。

# jquery - Internet Explorer 和 ajaxStart/ajaxStop

> ID：15763718
> 
> 赞同：2
> 
> 时间：2013-04-02T12:07:20.740
> 
> 标签：jquery, ajax, internet-explorer, internet-explorer-8

当我发送 jQuery 时，我想通过`ajaxStart()`. 完成后，使用 .gif 应该会消失`ajaxStop()`。

```
$( document ).ajaxStart( function () {
 $('#info').show();

}).ajaxStop( function () {
 $('#info').hide();
}); 
```

它在 Firefox 上运行良好，但在 IE 中不行（我使用的是版本 8）。似乎 IE`ajaxStart()`在查询结束时执行`ajaxStop()`. 如果我注释掉该`$('#info').hide();`部分，我会在获得数据后看到 gif。

我可以通过设置来解决它`async=true`，但我不想这样做。还有其他方法吗？

我读了一些文章，表明很多人都有这个问题，但我找不到答案。

**编辑：**

我认识到这`ajaxStart`是正确执行的，但是该请求导致浏览器冻结，直到我得到响应。这种情况发生得如此之快，以至于无法显示加载 gif。`alert()`在之后尝试了它，`ajaxStart`然后出现了gif。之后`alert`弹出并发送请求，导致浏览器和 gif 冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T10:08:44.087

尝试使用该`display`属性显示/隐藏您的 DIV。

**HTML**

```
<div id="loading">&nbsp;</div> 
```

**CSS**

```
#loading {
    display: none;
    background: rgba(255, 255, 255, .6) 
            url(../img/loading.gif) 
            50% 50% 
            no-repeat;
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
} 
```

**jQuery**

```
$(document).on({
    ajaxStart: function() {
        $('#loading').css('display', 'block')
    },
    ajaxStop: function() {
        $('#loading').css('display', 'none')
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T04:24:31.183

我也有同样的问题。加载 div 在 Firefox 中显示，但在 ie8 和 ie9 中不显示。我所做的只是添加了一个 setTimeout 间隔及其工作原理。

首先检查浏览器是IE8还是IE9。在您的 html 中添加以下内容：

```
<!--[if IE 8]><html lang="en-us" class="ie ie8"><![endif]-->
<!--[if IE 9]><html lang="en-us" class="ie ie9"><![endif]-->
<!--[if gt IE 9]><!--> <html lang="en-us"><!--<![endif]-->
<head> 
```

如果是 ie8 或 ie9，则添加一个间隔，如果不是，则不要。

```
$(document).ready(function() {
    var ie8or9 = $('html').hasClass('ie8') || $('html').hasClass('ie9');
    $(document).ajaxStart(function() {
        setTimeout(function(){
            $('#loading').show();
        }, ie8or9 ? 50 : 0);
    }).ajaxStop(function() {
        setTimeout(function(){
            $('#loading').hide();
        }, ie8or9 ? 100 : 0);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:01:10.657

请先尝试在本网站上浏览类似问题的答案。

[JQuery Internet Explorer 和 ajaxstop](https://stackoverflow.com/questions/6800570/jquery-internet-explorer-and-ajaxstop)

你想要ajaxComplete

```
$(document).ajaxComplete(function() {loading.hide()}); 
```

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

# c - 使用 execl 在 xterm 中执行 bash 命令的 C 程序

> ID：15763719
> 
> 赞同：1
> 
> 时间：2013-04-02T12:07:21.313
> 
> 标签：c, linux, exec, system-calls

我有一个在 Linux 上的普通终端中执行良好的命令：

```
xterm -e bash -c "some commands" 
```

我想使用 c 程序 execXX 系统调用来执行上述命令。我尝试使用以下代码，但它给了我一个正常的 xterm 窗口。

```
execl("/usr/bin/xterm", "/usr/bin/xterm -e bash -c \"some commands\"", NULL); 
```

有什么方法可以使用 execXX 系统调用执行上述命令？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:11:07.733

你需要这样称呼它：

```
execl("/usr/bin/xterm", "/usr/bin/xterm", "-e", "bash", "-c", "some commands", (void*)NULL); 
```

约定是让第一个参数与程序的路径相同。如果参数中有空格，则与调用`xterm 'something with spaces'`而不是`xterm something with spaces`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:14:04.537

一个可能的切线：你有什么理由需要这些在 内运行`xterm`？如果您只想运行一些 shell 命令，那么在`/bin/sh`or中运行它们`/bin/bash`会更自然，并且可能更可靠。

# ios - IOS prev/next按钮意外关闭键盘

> ID：15763724
> 
> 赞同：1
> 
> 时间：2013-04-02T12:07:36.913
> 
> 标签：ios, cordova, input, keyboard

我目前正在使用 PhoneGap (Cordova) 在 iPad/iPhone 上构建应用程序。

我在应用程序中的一个页面（在 html/css/js 中）有 100 多个输入类型 Number。当我用手指瞄准他们每个人时，它就像一个魅力。但是，当我使用 IOS 键盘上的上一个/下一个按钮时，有时，我不知道为什么，键盘会向下滑动，当我尝试再次打开它并用手指键盘瞄准输入时，它只会闪烁......无法修复它无需滚动即可释放所有事件。

我已经清理了我的代码，重构了一些部分，如果有人遇到同样的问题，请查看谷歌和 stackoverflow，但我什么也没找到......

有人知道这是否是 UIWebView 问题吗？还是phoneGap？或者是其他东西？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:54:23.910

如果您乐于从您的应用程序中完全删除下一个/上一个按钮，那么新的 Phonegap/Cordova 2.6.0rc1 让这变得非常简单。

在您的**config.xml**文件中，只需将`HideKeyboardFormAccessoryBar`首选项设置为`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:52:41.830

为了使这两个按钮起作用，您需要指定它们的行为，但似乎没有指定。做了一些研究，我认为你有两个选择。[要么像这里](https://stackoverflow.com/questions/10746998/phonegap-completely-removing-the-black-bar-from-the-iphone-keyboard/10796550#10796550)解释的那样完全摆脱下一个/上一个按钮，要么覆盖 textFieldShouldReturn: 以类似于本文中描述的[方式](https://stackoverflow.com/a/1351090/1845303)。

# vba - 使用 VBA 将多个 PDF 合并为单个 PDF

> ID：15763728
> 
> 赞同：0
> 
> 时间：2013-04-02T12:07:55.513
> 
> 标签：vba, ms-access, pdf, ms-access-2010

我正在处理将 14 个单独的 PDF 合并到单个 PDF 文件的要求。我还想在合并后为每个页面添加页码。

任何人都知道如何使用 VBA 在 PDF 文件中添加页码？

我正在使用 MS-Access 2010 VBA 进行编码并生成 PDF，我使用的是 Adob​​e Acrobat Standard。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:03:25.867

```
Path = "F:\Target.pdf"
'Path = Wscript.Arguments.Item(0)

Set App = CreateObject("Acroexch.app") 
app.show
Set AVDoc = CreateObject("AcroExch.AVDoc") 
Set AForm = CreateObject("AFormAut.App") 'from AFormAPI

If AVDoc.Open(Path,"") Then 
  '//write JS-Code on a variable
  Ex = "  // Set Footer PageNo centered  "&vbLF _
  & "  var Box2Width = 50  "&vbLF _
  & "  for (var p = 0; p < this.numPages; p++)   "&vbLF _
  & "   {   "&vbLF _
  & "    var aRect = this.getPageBox(""Crop"",p);  "&vbLF _
  & "    var TotWidth = aRect[2] - aRect[0]  "&vbLF _
  & "     {  var bStart=((TotWidth/2)-(Box2Width/2)) " & vbLf _
  & "         var bEnd=((TotWidth/2)+(Box2Width/2)) + 5  "&vbLF _
  & "         var fp = this.addField(String(""xftPage""+p+1), ""text"", p, [bStart,45,bEnd,15]);   "&vbLF _
  & "         fp.value = ""Page: "" + String(p+1)+ ""/"" + this.numPages;  "&vbLF _
  & "         fp.textSize=9;  fp.readonly = true;  "&vbLF _
  & "         fp.alignment=""right"";  "&vbLF _
  & "     } "&vbLF _
  & "   }  "

'//Execute JS-Code
AForm.Fields.ExecuteThisJavaScript Ex

App.Exit

end if 
```

# node.js - 如何在Node js中发布数据

> ID：15763732
> 
> 赞同：0
> 
> 时间：2013-04-02T12:08:09.077
> 
> 标签：node.js

在我的应用程序中，我需要将动态数据发布到我的主页中（mani 页面意味着如果我在浏览器中运行我的 url（localhost:3456）意味着将在该页面上显示一个页面）。我如何发布该数据。我有试过这个，但我无法发布数据。谁能帮我解决这个问题。

应用程序.js

```
 var http = require('http');
     var server = http.createServer(function(req, res){
                  res.writeHead(200, ['Content-Type', 'text/plain']);
                  res.write('Hello ');
                  res.end('World');
                   });
     server.listen(3456); 
```

postdata.js

```
 var data={"errorMsg":{"errno":34,"code":"ENOENT","path":"missingFile.txt"},"date":"2013-0402T11:50:22.167Z"}
 var options = {
                host: 'localhost',
                port: 3456,
                path: '/',
                method: 'POST',
                data:data,
                header: {
                           'content-type': 'application/json', 
                           'content-length': data.length       
                         }
                 };

 var http=require('http');
 var req;
 req = http.request(options, function(res) {
    var body;
    body = '';
    res.on('data', function(chunk) {
    body += chunk;
  });
 return res.on('end', function() {
    console.log('body is '+body);
  });
  });
 req.on('error', function(err) {
    console.log(err);

});

 req.write(data);
 req.end(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T14:22:12.990

```
//this is a string
var jsonString = '{"errorMsg":{"errno":34,"code":"ENOENT","path":"missingFile.txt"},"date":"2013-04-03T05:29:15.521Z"}';

//this is an object
var jsonObj = {"errorMsg":{"errno":34,"code":"ENOENT","path":"missingFile.txt"},"date":"2013-04-03T05:29:15.521Z"}; 
```

*注意字符串中的单引号*

`request.write(chunk, [encoding])`要求块是缓冲区或字符串（参见：[http](http://nodejs.org/api/http.html#http_request_write_chunk_encoding) ://nodejs.org/api/http.html#http_request_write_chunk_encoding ）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T12:14:27.000

你是否已经随 Node 一起安装了 express，如果是这样，你可以设置 Rest Api，你可以在 jQuery 中使用它们并动态绑定数据。请尝试查看 [http://expressjs.com/](http://expressjs.com/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T12:49:18.830

两件事情。第一的：

```
var data={"errorMsg:{"errno":34,"code":"ENOENT","path":"missingFile.txt"},"date":"2013-0402T11:50:22.167Z"} 
```

缺少双引号，所以它是无效的语法......因此语法突出显示有问题。

第二：

```
req.write(data); 
```

应该：

```
req.write(JSON.stringify(data)); 
```

**编辑：**

根据您的评论，我认为您可能会问如何从 HTTP POST 请求的正文中读取（您的问题措辞非常含糊）。如果是这样，这已经在 Node.js API 中有很好的记录。类似于以下内容：

```
var server = http.createServer(requestHandler);
server.listen(3456);

function requestHandler (req, res) {
    req.setEncoding('utf8');
    var body = '';
    req.on('data', function (chunk) { body += chunk; });
    req.on('end', function () {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end('The body of your request was: ' + body);
    });
} 
```

如果这不是你要问的，你需要澄清你的问题。除非您明确定义它们是什么以及预期结果是什么，否则像“主页”这样的术语没有任何意义。

# javascript - 检查仅出现在 Hover 或 Focus 上的 HTML 元素

> ID：15763734
> 
> 赞同：4
> 
> 时间：2013-04-02T12:08:14.800
> 
> 标签：javascript, html, firebug, web-inspector

我只想检查一个 html 代码块（例如：工具提示），它仅在我专注于输入文本框时出现。我无法使用 Web 检查器或萤火虫查看工具提示代码块的属性。请帮助我检查那些仅在悬停或关注其他元素时出现的 html。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T12:12:21.833

在 Chrome 上你可以这样做

![铬检查](https://i.stack.imgur.com/g1ksL.png)

见右下角，您可以根据需要切换元素状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:17:48.760

只需在 Chrome 中打开它，然后按 ctrl+shift+C .. 从浏览器默认窗口取消停靠，然后单击搜索图标！

![在此处输入图像描述](https://i.stack.imgur.com/x6E9O.jpg)

# java - java编码标准

> ID：15763738
> 
> 赞同：0
> 
> 时间：2013-04-02T12:08:21.903
> 
> 标签：java

我找到了如下所示的代码

```
public static final Object[][] TABLE_COLUMNS = {
            { "HistoryDate", new Integer(Types.TIMESTAMP) }, //java.sql.Type

            { "id", new Integer(Types.VARCHAR) },                 

            { "SessionId", new Integer(Types.VARCHAR) }}; 
```

上面的代码有效吗？如何？可能是我对上面的代码有误解
`Type.VARCHAR=12`。我们不能写吗`Integer.valueOf(12);`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:12:03.563

是的，您可以只使用 12 的值，但这将是一个神奇的数字，通常被认为是不好的做法。

[什么是幻数，为什么它不好？](https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:13:47.793

这个数组似乎存储了列名和它们的数据类型（使用 Object[][] 是有问题但有效的）：

您可以编写 Integer.valueOf(12) 但可读性将完全消失。（严格来说你可以写

```
{ "HistoryDate", Types.TIMESTAMP } 
```

让自动装箱完成其余的工作。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:13:05.883

当然你可以写 new Integer(12)，但这会大大降低可读性。如果其他人掌握了这个代码，他将不知道这意味着什么。在这种情况下，你知道它引用了 MySQL 类型中 VARCHAR 类型的常量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T12:25:36.807

为什么你的提议是一个改进？我认为使用 Types 是更好的文档。它以“12”永远无法做到的方式清楚地说明了正在发生的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T12:11:52.033

是的，你可以，但这就是常量的目的，对吧？如果有人决定更改 to 的值`VARCHAR`，`1337`您将不必更改代码...

# html - 重新加载网站的 HTML 代码，直到找到某个短语

> ID：15763739
> 
> 赞同：-6
> 
> 时间：2013-04-02T12:08:28.563
> 
> 标签：html, reload

我对 HTML 几乎一无所知，但我需要 HTML 代码来重新加载某个网站，直到找到某个短语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:09:46.837

HTML 没有可以让您执行此操作的功能。你需要一门编程语言。几乎任何编程语言都可以完成这项工作。

例如，在[Perl](http://learn.perl.org/)中：

```
#!/usr/bin/env perl

use v5.16;
use strict;
use warnings;
use WWW::Mechanize;

my $mech = WWW::Mechanize->new();

my $not_found = 1;

while ($not_found) {
    sleep 60*5; # Every 5 minutes
    say "Trying…";
    $mech->get('http://example.com/test.html');
    my $text = $mech->text();
    $not_found = 0 if ($text =~ /some text/);
}

say "Found"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:41:04.960

如果我是你，我会使用 Javascript 或一些基于 javascript 的框架，如 jQuery。您可以在 HTML 文件中创建一个简单的嵌入式脚本，并在如下函数中声明：

```
<script type="text/javascript">

   $(document).ready(function(){//jQuery function
        //wait 5 seconds before searching
        window.setTimeout(function(){
            var element = $('#phraseContainer');
            var content = element.text();
            if (content.indexOf('your desired phrase') != -1){
                alert('Phrase appears!!!');
            }
            else {
                location.reload();
            }
        },5000);
    });

</script> 
```

请注意，您的 HTML 代码中需要一些 div 元素，其短语容器 id 如下：

```
<div id="phraseContainer">some text in wich you want to search for</div> 
```

当然，这不是完美的解决方案（如果页面的文本没有动态变化，您可能会陷入无限循环），但它可以让您了解前进的方向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:13:17.957

您可以使用 javascript 在 html 中搜索某个短语，并在需要时让 javascript 重新加载页面。

# windows-phone-8 - XMLserializer 不会在 WP8 中存储对象的所有属性

> ID：15763743
> 
> 赞同：1
> 
> 时间：2013-04-02T12:08:35.163
> 
> 标签：windows-phone-8, xmlserializer

基本上有 DrinkCategories 持有一个可观察的 DrinkCategory 集合。这个嵌套的 ObservableCollection 用于为 WP8 中的 LongListSelector 提供数据。

```
this.DrinkCategories = new ObservableCollection<DrinkCategory>(); 
```

DrinkCategory 本身实现了 ObservableCollection 并添加了一个“名称”属性。

```
public class DrinkCategory : System.Collections.ObjectModel.ObservableCollection<DrinkViewModel>
{
    public string Name { get;  set; }

    public void AddDrink(DrinkViewModel drinkItem)
    {
        this.Items.Add(drinkItem);
    }
} 
```

我的 XMLserializer 将“项目”存储在 DrinkCategory 中，但不存储“名称”。

```
using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("AvailableDrinks.xml", FileMode.Create))
{
    XmlSerializer serializer = new XmlSerializer(typeof(ObservableCollection<DrinkCategory>));
    using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
    {
        serializer.Serialize(xmlWriter, DrinkCategories);
    }
} 
```

这是输出：

```
 <?xml version="1.0" encoding="utf-8"?>
  <ArrayOfArrayOfDrinkViewModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <ArrayOfDrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
   </ArrayOfDrinkViewModel>
   <ArrayOfDrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
    <DrinkViewModel>
      Properties of DVM
    </DrinkViewModel>
   </ArrayOfDrinkViewModel>
</ArrayOfArrayOfDrinkViewModel> 
```

我的错误在哪里？

编辑：问题似乎来自“DrinkCategory”类的实现，因为“DrinkCategory”的单个序列化对象包含它的饮料，但不是它的名称。`XmlSerializer serializer = new XmlSerializer(typeof(DrinkCategory));`

# linq - 最有效的实体框架代码第一方法展平/投影具有特定子实体的父实体

> ID：15763744
> 
> 赞同：2
> 
> 时间：2013-04-02T12:08:38.893
> 
> 标签：linq, ef-code-first, entity-framework-5, code-first

我有一个`Widget`具有核心成员的父实体和多个`WidgetTranslation`具有语言翻译成员的子实体，即`Description`提供英语、法语、德语等文本。

例如

```
public class Widget
{
  public int Id { get; set; }
  public string Code { get; set; }
  public virtual ICollection<WidgetTranslation> WidgetTranslations { get; set; }
}

public class WidgetTranslation
{
  public int WidgetId { get; set; } 
  public virtual Widget Widget { get; set; }

  public int LanguageId { get; set; }
  public virtual Language Language { get; set; }

  public string Name { get; set; }
  public string Description { get; set; }
  public string Summary { get; set; }
} 
```

查询小部件集合的最有效方法是什么，为给定展平`LanguageId`并投影到`TranslatedWidget`DTO

```
public class TranslatedWidget
{
  public int Id { get; set; }
  public string Code { get; set; }
  public int LanguageId { get; set; }
  public virtual Language Language { get; set; }
  public string Name { get; set; }
  public string Description { get; set; }
  public string Summary { get; set; }
} 
```

鉴于`languageId`我已经开始

```
DbSet.Select(w => new TranslatedWidget
  {
    Id = w.Id,
    Code = w.Code,
    LanguageId = w.LanguageId,
    Name = w.WidgetTranslations.First(wt=>wt.LanguageId == languageId).Name,
    Description = w.WidgetTranslations.First(wt=>wt.LanguageId == languageId).Description,
    Summary = w.WidgetTranslations.First(wt=>wt.LanguageId == languageId).Summary
  }); 
```

但我觉得这是低效的，并且不会在`WidgetTranslation`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:03:33.633

使用 SelectMany 通过单个连接来展平结构：

```
var widgetQuery = from w in dbSet.Widgets
                  from wt in w.WidgetTranslations
                  where wt.Language == languageId
                  select new TranslatedWidget
                  {
                     Id = w.Id,
                     Code = w.Code,
                     LanguageId = w.LanguageId,
                     Name = wt.Name,
                     Description = wt.Description,
                     Summary = wt.Summary
                  }); 
```

我在这里假设您对给定语言的每个小部件只有一个翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:21:17.920

我会移动`Name`，`Description`并`Summary`进入你的 DTO 的嵌套类......

```
public class TranslatedWidgetTranslation
{
    public string Name { get; set; }
    public string Description { get; set; }
    public string Summary { get; set; }
}

public class TranslatedWidget
{
    public int Id { get; set; }
    public string Code { get; set; }
    public int LanguageId { get; set; }
    public TranslatedWidgetTranslation Translation { get; set; }
} 
```

然后您可以投影到该类中，并且`First`只需要一次，这将导致`TOP(1)`SQL 中只有一个子查询，而不是三个：

```
DbSet.Select(w => new TranslatedWidget
{
    Id = w.Id,
    Code = w.Code,
    LanguageId = languageId,
    Translation = w.WidgetTranslations
        .Where(wt => wt.LanguageId == languageId)
        .Select(wt => new TranslatedWidgetTranslation
        {
            Name = wt.Name,
            Description = wt.Description,
            Summary = wt.Summary
        })
        .FirstOrDefault()
}); 
```

您必须`FirstOrDefault`在此处使用，`First`在 LINQ-to-Entities 投影中不受支持。

如果你不想要那种嵌套类型，你可以先投影成匿名类型，然后再转换成你的最终类，但代码会更长一点：

```
DbSet.Select(w => new
{
    Id = w.Id,
    Code = w.Code,
    LanguageId = languageId,
    Translation = w.WidgetTranslations
        .Where(wt => wt.LanguageId == languageId)
        .Select(wt => new
        {
            Name = wt.Name,
            Description = wt.Description,
            Summary = wt.Summary
        })
        .FirstOrDefault()
})
.AsEnumerable()
.Select(x => new TranslatedWidget
{
    Id = x.Id,
    Code = x.Code,
    LanguageId = x.LanguageId,
    Name = x.Translation != null ? x.Translation.Name : null,
    Description = x.Translation != null ? x.Translation.Description : null,
    Summary = x.Translation != null ? x.Translation.Summary : null
}); 
```

# tfs - 从 Visual Studio 为 Team Foundation 服务生成服务代理

> ID：15763748
> 
> 赞同：1
> 
> 时间：2013-04-02T12:08:51.407
> 
> 标签：tfs, azure-devops

我正在尝试与[Visual Studio Team Foundation Service](http://tfs.visualstudio.com/)进行一些自定义集成。请注意，这不是本地版本。我已经弄清楚如何通过 OData 查询服务。我也找到[了这个样本](http://www.microsoft.com/en-us/download/details.aspx?id=36230)。不过，对于我的生活，我无法弄清楚他们是如何创建 TFS 的服务代理的。此代理包含帮助程序类，使开发更容易。

如何将服务代理添加到 Visual Studio Team Foundation Service？通常，我只会使用 URL。但是，我似乎无法弄清楚要使用哪个 URL。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:00:47.543

您是否查看了 tfs odata api 文档。此外，这里是一个为 TFS 工作项浏览器创建 Web 代理的示例代码的链接。

希望这可以帮助。

[Windows 应用商店 (WinRT) TFS 工作项浏览器](http://ajryan.github.com/blog/2013/02/04/a-windows-store-winrt-tfs-work-item-browser/)

[Team Foundation Server OData API](https://tfsodata.visualstudio.com/)

# iphone - 使用另一个库（openssl）创建库时出错

> ID：15763751
> 
> 赞同：0
> 
> 时间：2013-04-02T12:08:55.987
> 
> 标签：iphone, ios, openssl, static-libraries

我**使用 openssl 库创建了一个库来生成 DiffieHellman 密钥**并使用户变得简单。我能够为 iPhone 模拟器和设备成功创建库。但是在设备上测试我的库时，我在设备中使用 OpenSSL 库函数时遇到错误。

例如

```
Undefined symbols for architecture armv7:
  "_CRYPTO_dbg_malloc", referenced from:
  -[MyLib methodName] in libMyLib.a(MyLib.o) 
```

（注意：创建的库是针对 armv7 和 armv7s 的）

如果我使用为 iossimulator 创建的库，它在模拟器中可以正常工作。

# javascript - 重新创建或更改 twitter 按钮的参数

> ID：15763752
> 
> 赞同：2
> 
> 时间：2013-04-02T12:08:58.520
> 
> 标签：javascript, jquery, twitter

我有一个带有 twitter 按钮的页面。在那个 twitter 按钮之前，我有一个输入字段和一个表单，可以轻松添加该页面的相关主题标签。目的是将输入字段的文本带到 twitter。所以它在 twitter 对话框的输入字段中。

所以我有以下代码来显示按钮，取自 twitter 文档：

```
<a  href="https://twitter.com/share" 
    class="twitter-share-button" data-lang="en"
data-size="large" 
    data-count="none"
data-text="BLA"
id="tweetbutton">Tweet</a>

    <script>!function(d,s,id){
        var js,fjs=d.getElementsByTagName(s)[0];
        if(!d.getElementById(id)){
                js=d.createElement(s);
                js.id=id;
                js.src="https://platform.twitter.com/widgets.js";                               
                fjs.parentNode.insertBefore(js,fjs);
            }
    }
    (document,"script","twitter-wjs");
    </script> 
```

（我输入“BLA”作为文本，只是作为测试）

因此，当我的输入字段的值发生变化时，我会执行以下操作：

```
<script language="javascript" type="text/javascript">
   function appendTag(tag) {    
   var newValue = $('#bericht').val() + tag;        
   $('#tweetbutton').attr('data-text', newValue);

   twttr.widgets.load();                
}
</script> 
```

在文档中我读到“twttr.widgets.load();” 应该重新创建按钮。但它不会那样做。我还尝试添加行“（document，”script“，”twitter-wjs“）;” 在我的功能之下，但它并没有改变行为。

在正确的方向上的任何点？也许有更好的方法可以随时随地更改按钮的文本属性？

更新：我发现在 ted.com 上他们使用 addthis api 做了一些类似的事情。但我想在没有 api 的情况下做到这一点。因此，如果您需要可视化我想要做什么，请查看[http://www.ted.com/talks/dan_phillips_creative_houses_from_reclaimed_stuff.html](http://www.ted.com/talks/dan_phillips_creative_houses_from_reclaimed_stuff.html)。他们有一个以某种方式链接到推文按钮的输入字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:23:43.893

您可以使用具有所有必需属性的自定义按钮代替 API 按钮，并放置 onclick 事件 url：

```
window.open('https://twitter.com/share?url=<url>&text=<text>', 'sharer', 'toolbar=0,status=0,width=620,height=280'); 
```

这将类似于 twitter 消息的弹出窗口。

# database-design - 描述数据库设计中外键的用途

> ID：15763753
> 
> 赞同：2
> 
> 时间：2013-04-02T12:09:02.910
> 
> 标签：database-design, foreign-keys, naming-conventions

我正在使用 MySQL Workbench 设计数据库并定义许多外键。

我很好奇是否有描述这种关系目的的最佳实践。

目前，所有外键列都命名为 %table%_%col%。我喜欢这个，因为它几乎告诉你如何加入表格。虽然这描述了两个表之间的链接，但它没有描述关系的目的是什么。

例如，外键可能表示父关系或子关系、所有者、目标或源。

我可以用索引的名称而不是列或索引的注释来描述目的。但是，例如，如果我坚持使用 %table%_%col% 作为列名，我不能两次链接到同一个表（即一个 FK 可能是谁创建了资源，另一个 FK 是谁编辑了它） .

那么列名是否应该始终描述目的而不是链接？

有最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:20:11.233

使用外键只表示被引用的表描述了不同的对象，不同的概念。外键只是一个指针，使用外键的目的不止于此。这类似于在类中有一个指针类型字段，而不是直接包含所有引用的其他对象的字段。如果每一行（每个实体）只有一个父项和一个子项，则不必包括每个实体的两个方向，而是决定是否存储对父项或子项的引用。

在一对多关系的情况下（例如，多个子实体到一个父级）甚至更简单，因为每个子级都有对其父级的引用，但是由于 SQL 中未定义复合列和列表类型，因此父级不能包含其子项的列表。

# php - µTorrent - 抓取

> ID：15763755
> 
> 赞同：0
> 
> 时间：2013-04-02T12:09:10.487
> 
> 标签：php, utorrent

我对**µTorrent**进行了一些故障排除，我认为您可以帮助我。

我的**µTorrent**没有收到任何有关*种子*和*水蛭的***数据**

 **![在此处输入图像描述](https://i.stack.imgur.com/jIDLZ.png)

这是我的**抓取**代码：

```
<?php
class scrapement extends Core {
        public function renderPage() {
                if (!isset($_GET['info_hash']) || (strlen($_GET['info_hash']) != 20))
                        $this->error('Invalid hash');

                $query = $this->query("SELECT `info_hash`, `seeders`, `leechers`, `times_completed` FROM `torrents` WHERE `info_hash` = '".$this->checkValues($_GET['info_hash'], 0)."'");

                if(!mysql_num_rows($query)) {
                        $this->error('No torrent with that hash found');
                }

                $benc = "d5:files";
                while ($row = $this->fetch($query))
                {
                        $benc .= "d20:".str_pad($row["info_hash"], 20)."d8:completei".$row['seeders']."e10:downloadedi".$row['times_completed']."e10:incompletei".$row['leechers']."eee";
                }
                $benc .= 'ed5:flagsd20:min_request_intervali1800eee';

                $this->getLog($benc);

                header("Content-Type: text/plain");
                header("Pragma: no-cache");
                echo $benc;
        }

        private function error($err) {
                header('Content-Type: text/plain; charset=UTF-8');
                header('Pragma: no-cache');
                exit("d14:failure reason".strlen($err).":{$err}ed5:flagsd20:min_request_intervali1800eeee");
        }
}
?> 
```

**抓取**脚本的日志：( **$this->getLog($benc);** )

```
d5:filesd20:êzo¦G{9…NÑ´ò43d8:completei1e10:downloadedi21e10:incompletei0eeeed5:flagsd20:min_request_intervali1800eee 
```

由于**µTorrent**没有任何日志可供查看，我尝试使用**Ratio Master** ...并且...它正在工作的抓取

```
[02:49:10] GET /scrapement?passkey=fe4d2xxxxxx&info_hash=B%c3%2c%e7%be%ec%2a%5c%a1%c4c%f8%c4M35%3f%f3%c6%e8 HTTP/1.1
Host: 
User-Agent: uTorrent/1800
Accept-Encoding: gzip 
```

![在此处输入图像描述](https://i.stack.imgur.com/6KHuO.png)

那么为什么 uTorrent 没有收到任何数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:43:41.480

您的编码数据格式有误。我建议您使用适当的编码例程将数据结构转换为编码格式，而不是通过连接手动构造字符串。这是一个处理编码和解码的类：

```
/**
 * Encodes and decodes bencode formatted strings
 */
class BEncoder
{
    /**
     * Encode a value using the bencode format
     *
     * @param mixed $data The value to encode
     *
     * @return string The encoded value
     *
     * @throws \InvalidArgumentException When an unencodable value is encountered
     */
    public function encode($data)
    {
        if (is_resource($data)) {
            throw new \InvalidArgumentException('Resources cannot be bencoded');
        }

        // convert objects to arrays of public properties
        // this makes it possible to sort dictionaries as required
        if (is_object($data)) {
            $data = get_object_vars($data);
        }

        if (is_string($data)) {
            // byte sequence
            $result = strlen($data) . ':' . $data;
        } else if (is_int($data) || is_float($data) || is_bool($data)) {
            // integer
            $result = 'i' . round($data, 0) . 'e';
        } else if (is_array($data)) {
            if (array_values($data) === $data) {
                // list
                $result = 'l';
                foreach ($data as $value) {
                    $result .= $this->encode($value);
                }
            } else if (is_array($data)) {
                // dictionary
                ksort($data);
                $result = 'd';
                foreach ($data as $key => $value) {
                    $result .= $this->encode((string) $key) . $this->encode($value);
                }
            }
            $result .= 'e';
        }

        return $result;
    }

    /**
     * Decode a value using the bencode format
     *
     * @param string $data The value to decode
     *
     * @return mixed The decoded value
     *
     * @throws \InvalidArgumentException When an undecodable value is encountered
     */
    public function decode($data)
    {
        if (!is_string($data)) {
            throw new \InvalidArgumentException('Data is not a valid bencoded string');
        }
        $data = trim($data);

        try {
            $result = $this->decodeComponent($data, $position);

            if ($data !== '') {
                throw new \InvalidArgumentException('Data found after end of value');
            }
        } catch (\InvalidArgumentException $e) {
            $err = 'Syntax error at character ' . $position . ' "' . substr($data, 0, 7) . '..."): ' . $e->getMessage();
            throw new \InvalidArgumentException($err);
        }

        return $result;
    }

    /**
     * Move the pointer in the data currently being decoded
     *
     * @param string $data     The data being decoded
     * @param int    $position The position pointer
     * @param int    $count    The number of bytes to move the pointer
     */
    private function movePointer(&$data, &$position, $count)
    {
        $data = (string) substr($data, $count);
        $position += $count;
    }

    /**
     * Recursively decode a structure from a data string
     *
     * @param string $data     The data being decoded
     * @param int    $position The position pointer
     *
     * @return mixed The decoded value
     *
     * @throws \InvalidArgumentException When an undecodable value is encountered
     */
    private function decodeComponent(&$data, &$position = 0)
    {
        switch ($data[0]) {
            case 'i':
                if (!preg_match('/^i(-?\d+)e/', $data, $matches)) {
                    throw new \InvalidArgumentException('Invalid integer');
                }

                $this->movePointer($data, $position, strlen($matches[0]));
                return (int) $matches[1];

            case 'l':
                $this->movePointer($data, $position, 1);
                if ($data === '') {
                    throw new \InvalidArgumentException('Unexpected end of list');
                }

                $result = array();
                while ($data[0] !== 'e') {
                    $value = $this->decodeComponent($data, $position);
                    if ($data === '') {
                        throw new \InvalidArgumentException('Unexpected end of list');
                    }

                    $result[] = $value;
                }

                $this->movePointer($data, $position, 1);
                return $result;

            case 'd':
                $this->movePointer($data, $position, 1);
                if ($data === '') {
                    throw new \InvalidArgumentException('Unexpected end of dictionary');
                }

                $result = array();
                while ($data[0] !== 'e') {
                    $key = $this->decodeComponent($data, $position);
                    if ($data === '') {
                        throw new \InvalidArgumentException('Unexpected end of dictionary');
                    }
                    $value = $this->decodeComponent($data, $position);
                    if ($data === '') {
                        throw new \InvalidArgumentException('Unexpected end of dictionary');
                    }

                    $result[$key] = $value;
                }

                $this->movePointer($data, $position, 1);
                return $result;

            default:
                if (!preg_match('/^(\d+):/', $data, $matches)) {
                    throw new \InvalidArgumentException('Unknown data type');
                }

                $this->movePointer($data, $position, strlen($matches[0]));
                if (strlen($data) < $matches[1]) {
                    $this->movePointer($data, $position, strlen($data));
                    throw new \InvalidArgumentException('Unexpected end of byte string');
                }

                $result = substr($data, 0, $matches[1]);
                $this->movePointer($data, $position, $matches[1]);

                return $result;
        }
    }
} 
```

要将它与您的代码一起使用，您可以执行以下操作：

```
class scrapement extends Core
{
    private $bencoder;

    public function __construct($bencoder)
    {
        // inject an instance of the BEncoder class into this object
        $this->bencoder = $bencoder;
    }

    public function renderPage()
    {
        if (!isset($_GET['info_hash']) || (strlen($_GET['info_hash']) != 20)) {
            $this->error('Invalid hash');
        }

        $query = $this->query("
            SELECT `info_hash`, `seeders`, `leechers`, `times_completed`
            FROM `torrents`
            WHERE `info_hash` = '" . $this->checkValues($_GET['info_hash'], 0) . "'
        ");
        if (!mysql_num_rows($query)) {
            $this->error('No torrent with that hash found');
        }

        $data = array(
            'flags' => array(
                'min_request_interval' => 1800
            ),
            'files' => array()
        );

        while ($row = $this->fetch($query)) {
            $hash = str_pad($row["info_hash"], 20);
            $data['files'][$hash] = array(
                'complete'   => $row['seeders'],
                'incomplete' => $row['leechers'],
                'downloaded' => $row['times_completed']
            );
        }

        $data = $this->bencoder->encode($data);
        $this->getLog($data);

        header("Content-Type: text/plain");
        header("Pragma: no-cache");
        echo $data;
    }

    private function error($err)
    {
        $data = array(
            'flags' => array(
                'min_request_interval' => 1800
            ),
            'failure reason' => $err
        );

        $data = $this->bencoder->encode($data);
        $this->getLog($data);

        header('Content-Type: text/plain; charset=UTF-8');
        header('Pragma: no-cache');
        echo $data;
    }
} 
```**

# javascript - jQuery自定义滑块上一个下一个导航跳跃多步

> ID：15763756
> 
> 赞同：4
> 
> 时间：2013-04-02T12:09:10.747
> 
> 标签：javascript, jquery

我是一个 jQuery（和一般编程）学习者，而不是使用插件，我正在尝试构建自己的图像滑块/循环，以保持代码小，并帮助学习。

我的函数循环遍历`li`添加`'.show'`类的项目，然后在延迟后删除类并添加到下一张幻灯片。这似乎工作正常。

几天来，我一直在努力添加导航，该导航将移动上一个或下一个并停止计时器。

就目前而言，如果我在脚本启动时立即单击导航，导航将按预期工作，但是一旦显示另一张幻灯片的自动功能启动，导航将跳转多个步骤，我不知道这是为什么。我以某种方式成像 jQuery 正在缓存以前的 div 可能有一个`'.show'`类？

我已经简化了我的代码和演示文稿，以在 CodePen 中说明这一点：codepen.io/MattyBalaam/pen/vuhyJ

这是完整的脚本：

```
function gallery(galleryContainer) {

    $.fn.nextOrFirst = function(selector) {
      var next = this.next(selector);
      return (next.length) ? next : this.prevAll(selector).last();  
    };

    $.fn.prevOrLast = function(selector) {
        var prev = this.prev(selector);
        return (prev.length) ? prev : this.nextAll(selector).last();

    };

    galleryContainer.parent().prepend('<div class="previous">previous</div><div class="next">next</div>');

    var crossFade = function (){

        var slideTimeout;

        function slideWait() {
            galleryContainer.find('.show').removeClass('show').nextOrFirst().addClass('show');
            slideTimeout = setTimeout(crossFade, 800);
         }   

    function checkForClicks() {

        $('div.previous').on('click', function(){
            galleryContainer.find('.show').removeClass('show').prevOrLast().addClass('show');
            window.clearTimeout(slideTimeout);
        });

        $('div.next').on('click', function(){
            galleryContainer.find('.show').removeClass('show').nextOrFirst().addClass('show');
            window.clearTimeout(slideTimeout);
         });
    }

    checkForClicks();
    slideWait();

};

galleryContainer.children(':first-child').addClass('show');
setTimeout(crossFade, 800);
}

gallery($('ul')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:20:15.703

问题是，您多次调用函数 checkForClicks（在每次动画迭代中）并且事件侦听器被多次添加到按钮中，因此每次单击时，您不仅向前/向后移动一次，而且对于每个动画步骤一次，即已经显示了。将 checkForClicks 移到 crossFade 函数之外就可以了。

查看代码： [http ://codepen.io/anon/pen/ptkea](http://codepen.io/anon/pen/ptkea)

工作代码：

```
function gallery(galleryContainer) {

$.fn.nextOrFirst = function(selector) {
    var next = this.next(selector);
    return (next.length) ? next : this.prevAll(selector).last();
};

$.fn.prevOrLast = function(selector) {
    var prev = this.prev(selector);
    return (prev.length) ? prev : this.nextAll(selector).last();
};

    galleryContainer.parent().prepend('<div class="previous">previous</div><div class="next">next</div>');

    var slideTimeout;
    var crossFade = function (){
        function slideWait() {
              galleryContainer.find('.show').removeClass('show').nextOrFirst().addClass('show');
              slideTimeout = setTimeout(crossFade, 800);
        }   
        slideWait();
    };

    galleryContainer.children(':first-child').addClass('show');
    setTimeout(crossFade, 800);

    function initButtonEvents() {

            $('div.previous').on('click', function(){
                galleryContainer.find('.show').removeClass('show').prevOrLast().addClass('show');
            window.clearTimeout(slideTimeout);
            });

            $('div.next').on('click', function(){
                galleryContainer.find('.show').removeClass('show').nextOrFirst().addClass('show');
            window.clearTimeout(slideTimeout);

            });
    }
    initButtonEvents();

}

gallery($('ul')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:17:32.253

看我的脚本： [http ://codepen.io/anon/pen/asvGc](http://codepen.io/anon/pen/asvGc)

如果您在函数之外声明 var，则它可以正常工作。

# perl - Perl 中的关键字驱动的测试自动化框架

> ID：15763759
> 
> 赞同：1
> 
> 时间：2013-04-02T12:09:15.513
> 
> 标签：perl, frameworks

我正在寻找 Perl 中的关键字驱动的测试自动化框架。

我们有一个带有 GUI 的嵌入式设备（类似于智能手机，但没有那么复杂）。用户可以触摸 UI 上的任何位置并执行一些操作。根据用户点击，我们需要验证相应的屏幕是否显示。这是最简单的场景之一。

我计划使用关键字驱动的方法开发这个框架，其中关键是这些操作和验证。

我在 Perl 中寻找类似[http://fitnesse.org/的东西。](http://fitnesse.org/)

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:38:15.073

一些人似乎已经开始朝这个方向发展：

[`Test::FITesque`](http://search.cpan.org/~konobi/Test-FITesque-0.03/lib/Test/FITesque.pm)

[`Test::FIT`](http://search.cpan.org/~ingy/Test-FIT-0.11/lib/Test/FIT.pm)

[perl-苗条](https://github.com/knuthaug/perl-slim)

它们看起来都不成熟，但如果你想自己写的话，它们应该会给你一些可以使用的东西。

不过，在走这条路之前，我会停下来想一想你是否*真的*想在 Perl 中重新创建类似的东西。已经有许多开发人员使用的[优秀、成熟](http://search.cpan.org/~ovid/Test-Harness-3.26/lib/TAP/Harness.pm)的 Perl 测试工具。以一种更 Perlesque 的方式做你想做的事可能会更好。您不必重新发明轮子。

# jakarta-ee - 多个安全约束：最后一个不包括前面的 url 模式

> ID：15763763
> 
> 赞同：4
> 
> 时间：2013-04-02T12:09:30.823
> 
> 标签：jakarta-ee, https, security-constraint

我需要为我的 web 应用程序的三个不同部分定义安全约束。一个`/admin/*`，一个，`/account/*`一个棘手的。最后一个应该匹配除前面的 url 模式（`/*`不包括`/admin/*`and `/account/*`）之外的所有内容。如何创建此约束？

```
 <security-constraint>
    <web-resource-collection>
        <web-resource-name>AdminPanel</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>      
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
    <user-data-constraint>      
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
  </security-constraint>

  <security-constraint>
    <web-resource-collection>
        <web-resource-name>AccountPanel</web-resource-name>
        <url-pattern>/account/*</url-pattern>
    </web-resource-collection>      
    <auth-constraint>
        <role-name>account</role-name>
    </auth-constraint>
    <user-data-constraint>      
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
  </security-constraint>

  <security-constraint>
    <web-resource-collection>
        <web-resource-name>HTTPSOnly</web-resource-name>
        <url-pattern>`/* excluding /admin/*, /account/*`</url-pattern>
    </web-resource-collection>      
    <auth-constraint>
        <role-name>visitor</role-name>
    </auth-constraint>
    <user-data-constraint>      
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
  </security-constraint> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:57:35.740

您定义了三个不同的角色，即。管理员、帐户和访客。

您的第一个约束表明只有管理员角色可以访问 /admin/* 中的资源

您的第二个约束说只有帐户可以访问 /account/* 中的资源

此时（没有第三个约束）想象一个访问者角色（或任何其他角色）试图访问管理员和帐户目录中的任何内容。由于前两条规则，它将无法访问它。它只能访问 admin 和 account 目录之外的资源。

所以你想要的已经通过前两个约束实现了，在我看来你不需要第三个约束。

# javascript - 将模态表单中的数据注入AngularJS中的父表单？

> ID：15763765
> 
> 赞同：4
> 
> 时间：2013-04-02T12:09:32.303
> 
> 标签：javascript, forms, angularjs

我有一个带有以模式显示的附加数据字段的表单：

```
<form class="form-horizontal" name="newForm" ng-controller="FormCtrl" ng-submit="submit()">
  <label>Test</label>
  <div ng-controller="ModalCtrl">
    <a class="btn btn-link" ng-click="open()">Open</a>
    <ng-include src="'partials/modal.html'"></ng-include>
  </div>
</form> 
```

包括：

```
<div modal="shouldBeOpen" close="close()" options="opts">
    <div class="modal-header">
        <h4>I'm a modal!</h4>
    </div>
    <div class="modal-body">
        <ul>
            <input type="text" tabindex="16" ng-model="someinput" name="someinput" size="32" class="validate[someinput]" />
        </ul>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning cancel" ng-click="close()">Cancel</button>
    </div>
</div> 
```

JS：

```
var ModalCtrl = function ($scope) {

  $scope.open = function () {
    $scope.shouldBeOpen = true;
  };

  $scope.close = function () {
    $scope.shouldBeOpen = false;
  };

  $scope.opts = {
    backdropFade: true,
    dialogFade:true
  };

}; 
```

如何将用户输入从模态表单读取/注入/传输到主表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:46:26.617

您需要的是在两个控制器之间进行通信，这可以通过创建服务来实现。

以此为[参考](https://stackoverflow.com/a/12009408/2104976])。

您可以按如下方式创建服务：

```
angular.module('myApp', [])
    .service('sharedInput', function () {
        var modalInput = "";

        return {
            getModalInput:function () {
                return modalInput;
            },
            setModalInput:function (value) {
                modalInput = value;
            }
        };
    }); 
```

接下来，在您的`ModalCtrl()`函数中，我假设您将有一个按钮来提交输入。假设单击此按钮会调用 ModalCtrl 范围内的“submitInput”函数。你将把这个函数写成：

```
$scope.submitInput = function() {
    sharedInput.setMOdalInput($scope.someinput);
} 
```

...在您的程序中`FormCtrl()`，您将编写以下代码来读取模态输入：

```
var input = sharedInput.getModalInput() 
```

您还需要将参数“sharedInput”传递给 ModalCtrl 和 FormCtrl，就像传递 $scope 一样。现在你的两个控制器正在通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:52:48.237

我[在 GitHub 上发现了一个问题的评论，](https://github.com/angular-ui/bootstrap/issues/277#issuecomment-15572458)其中一个 plunker 解释了问题和使用 angular-ui 的解决方案，没有共享服务。奇迹般有效。

[http://plnkr.co/edit/ktfq0Y?p=preview](http://plnkr.co/edit/ktfq0Y?p=preview)

# ubuntu - IPython 笔记本错误

> ID：15763777
> 
> 赞同：1
> 
> 时间：2013-04-02T12:10:22.837
> 
> 标签：ubuntu, ipython-notebook

尝试运行 IPython Notebook 时出现以下错误：

> [2071:2098:0402/080647:ERROR:object_proxy.cc(624)] 无法获取名称所有者。得到 org.freedesktop.DBus.Error.NameHasNoOwner：无法获得名称“org.chromium.Mtpd”的所有者：没有这样的名称

而且我无法打开笔记本。

有人有想法么？

# xml - docx4j 检查复选框

> ID：15763778
> 
> 赞同：1
> 
> 时间：2013-04-02T12:10:24.007
> 
> 标签：xml, xpath, checkbox, ms-word, docx4j

不幸的是，我对 docx4j 相当陌生，我正在尝试弄清楚如何检查我拥有的模板中的复选框。我尝试使用 Xpaths 并以这种方式获取节点，但我不确定我是否做对了，即使我设法获得正确的节点我也不太确定如何正确更改值，替换我设法弄清楚但我没有的文本想出改变一个属性值呢。

检查 document.xml 我找到了 Checkbox 的名称及其具有的属性

```
<w:fldChar w:fldCharType="begin">
<w:ffData><w:name w:val="Kontrollkästchen1"/>
<w:enabled/>
<w:calcOnExit w:val="0"/>
<w:checkBox>
<w:sizeAuto/>
<w:default w:val="0"/>
</w:checkBox> 
```

我尝试了 Xpaths 的不同 premutations，例如： //ffData[@name='Kontrollkästchen1']/checkBox

这会找到我想要的节点吗？如果没有，我怎样才能获取节点并正确更改属性？

谢谢马格纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:54:43.233

如果您使用 XPath，则需要考虑命名空间。

使用 XPathQuery 示例，您可以提供它：

```
String xpath = "//w:fldChar[./w:ffData/w:checkBox]"; 
```

（或变体，取决于您要选择这三个节点中的哪一个）

另一种方法是遍历文档，其中有 TraversalUtils。

这两种方法都在 docx4j 的入门文档中进行了说明。

如上所述，如果您修改了对象，则不能依赖 Sun/Oracle JAXB XPath。

因此，手动遍历通常会更好。

这是一个如何做到这一点的例子。

```
package org.docx4j.samples;

import java.util.ArrayList;
import java.util.List;

import org.docx4j.TraversalUtil;
import org.docx4j.XmlUtils;
import org.docx4j.TraversalUtil.CallbackImpl;
import org.docx4j.openpackaging.packages.WordprocessingMLPackage;
import org.docx4j.openpackaging.parts.WordprocessingML.MainDocumentPart;
import org.docx4j.wml.FldChar;

public class TraverseFind {

    /**
     * Example of how to find an object in document.xml
     * via traversal (as opposed to XPath)
     *  
     */
    public static void main(String[] args) throws Exception {

        String inputfilepath = System.getProperty("user.dir") + "/checkbox.docx";

        WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new java.io.File(inputfilepath));      
        MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart();

        Finder finder = new Finder(FldChar.class);
        new TraversalUtil(documentPart.getContent(), finder);

        System.out.println("got " + finder.results.size() + " of type " +  finder.typeToFind.getName() );

        for (Object o : finder.results) {

            Object o2 = XmlUtils.unwrap(o);
            // this is ok, provided the results of the Callback
            // won't be marshalled          

            if (o2 instanceof org.docx4j.wml.Text) {

                org.docx4j.wml.Text txt = (org.docx4j.wml.Text)o2;

                System.out.println( txt.getValue() );

            } else {
                System.out.println( XmlUtils.marshaltoString(o, true, true));
            }

        }

    }

      public static class Finder extends CallbackImpl {

          protected Class<?> typeToFind;

          protected Finder(Class<?> typeToFind) {
              this.typeToFind = typeToFind;
          }

            public List<Object> results = new ArrayList<Object>(); 

            @Override
            public List<Object> apply(Object o) {

                // Adapt as required
                if (o.getClass().equals(typeToFind)) {
                    results.add(o);
                }
                return null;
            }
      }

} 
```

按照我完成这些示例的方式，它们都为您提供了 org.docx4j.wml.FldChar 对象。

从那里，您将在 getFfData().getNameOrEnabledOrCalcOnExit() 中找到您的 CTFFCheckBox

如果您想要的只是复选框，那么您可以调整任一示例来获取它。那会更简单。

# html - 将 XHTML 过渡 1.0 与 HTML 4.0 混合

> ID：15763785
> 
> 赞同：1
> 
> 时间：2013-04-02T12:10:41.090
> 
> 标签：html, browser, xhtml

我们有一些旧的 HTML 代码，我们希望将它们包含在内容 div 中的新 XHTML 过渡网页中。我的问题是在发出与 HTML 4.0 混合的标准 XHTML 时是否存在任何已知问题，其中页面的 DOCTYPE 设置为“-//W3C//DTD XHTML 1.0 Transitional//EN”？

我在一些浏览器上测试过（甚至在 IE10 上），输出看起来不错。但那里是否隐藏着任何潜在的问题？当然，没有人知道未来的浏览器会做什么，但一般来说这是什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:17:14.910

Assuming you are serving the XHTML page as `text/html`, then no matter what your doctype says, you're really using HTML, not XHTML anyway, so there should be no problem embedding more HTML into it.

See [http://www.hixie.ch/advocacy/xhtml](http://www.hixie.ch/advocacy/xhtml) and [HTML 4, HTML 5, XHTML, MIME types - the definitive resource](https://stackoverflow.com/questions/2662508/html-4-html-5-xhtml-mime-types-the-definitive-resource/2664082#2664082) for more info.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:28:31.357

唯一的实际问题是验证。如果一个页面包含 HTML 4.0 和 XHTML 的混合，当您使用标记验证器检查它时，它将创建大量错误消息。这使得查找和修复可能存在的*实际*错误变得更加困难，例如元素未关闭或基本元素嵌套错误。

因此，最好将标记转换为统一的东西。有一些工具可以修复遗留的 HTML 标记以满足 XHTML 要求。

# javascript - 解析 TextArea 中的文本并根据路径显示图像

> ID：15763789
> 
> 赞同：3
> 
> 时间：2013-04-02T12:10:48.813
> 
> 标签：javascript, html, image

我有一个 HTML5 网页。其中我`TextArea`有一些原始数据。说这样的话。

```
Image1:
C:\Images\image1.jpg
Image2:
C:\Images\image2.jpg
Image3:
C:\Images\image3.jpg 
```

我需要解析该文本区域并在文本区域下方的路径中显示图像。我需要将该路径传递给`img src="path"`标签，并且我应该根据 textarea 中的路径显示图像。任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:42:57.957

使用 jQuery 可以是这样的：

```
var sText = jQuery('textarea_selector').text(),
    aStrings = sText.split('\n');

for(i = aStrings.length - 1; i>=0; i--) {
    if( aStrings[i].indexOf('\\') != -1 ) {
        jQuery('body').append('<img src="'+aStrings[i]+'">');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:28:51.113

我整理了一个 JSFiddle ( [http://jsfiddle.net/jt5yg/6](http://jsfiddle.net/jt5yg/6) ) 来做到这一点。HTML 和 Javascript 相当简单：

```
<textarea id="rawdata" rows="10" style="width: 100%" onchange="processimages();">
</textarea>
<div id="images"></div> 
```

和

```
var allfiles = /[a-z]\:\\[\w\\_-]+?\.jpg/gi;
function processimages(){
    var textarea = document.getElementById('rawdata');
    var imagecontainer = document.getElementById('images');
    var file;
    imagecontainer.innerHTML = '';
    while(file = allfiles.exec(textarea.value)){
        imagecontainer.innerHTML += '<img src="file:///'+file+'" />';
    }
} 
```

不幸的是，当我运行脚本时，添加了图像标签，但浏览器拒绝显示它们。安全限制阻止浏览器在没有明确用户操作的情况下访问本地文件系统。

当然，这是有道理的。如果我们能做到这一点，黑客就可以以同样的方式访问您 PC 上隐藏的系统文件的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:43:48.210

```
var srcs = $('textarea').val().replace(/\\/g, "||");
srcs = srcs.split(/Image\d:/).map(function(el) {
   return el.replace("||", "\\");
});

srcs[0] // C:\Images\image1.jpg 
```

您现在可以遍历数组并将 src 应用于每个 Img。

# bash - 包含“-c”的grep

> ID：15763790
> 
> 赞同：0
> 
> 时间：2013-04-02T12:10:50.337
> 
> 标签：bash, shell, ksh

我想搜索`-c`使用`grep`

例如：

```
$>ls -al | grep '-c' 
```

但`grep`认为这是一种选择。

```
$>Usage: grep -hblcnsviw pattern file . . . 
```

如何`-c`以字符串形式搜索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T12:17:08.800

Tell grep where your options end:

```
grep -- -c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:12:33.180

您可以：

1.  转义连字符。

    ```
    grep '\-c' 
    ```

2.  使用`-e`( `--regexp=`) 标志

    ```
    grep -e -c
    grep --regexp=-c    # Not in POSIX, but supported at least in Linux and OS X. 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:14:00.593

您使用以下`-e`选项：

```
$ ls -a1 | grep -e -c 
```

这当然[在文档](http://linux.die.net/man/1/grep)中提到，因此：

> -e 模式，--regexp=模式
> 
> 使用 PATTERN 作为模式。这可用于指定多个搜索模式，或保护以连字符 (-) 开头的模式。（-e 由 POSIX 指定。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:30:04.543

为了保持话题，您最初问题的答案是使用要么`--`表示要处理的选项结束，要么使用`-e`明确标记选项。

`ls`但是，如果任何文件名包含新行，则解析 的输出将产生不正确的结果。改用`find`：

```
find . -depth 1 -name "-c" 
```

# google-maps - 存储地图，如谷歌地图或 OpenLayers

> ID：15763791
> 
> 赞同：2
> 
> 时间：2013-04-02T12:10:53.983
> 
> 标签：google-maps, map, openlayers

他们是否像存储的地图一样，我可以从地址获取纬度/经度，反之亦然。像数据库文件或基于 Web 的服务以外的其他东西，这样我在计算纬度/经度和反方向的地址时就不必通过 Internet 连接。
谢谢你

**编辑**：只是为了清楚。我们使用 Google API 来找出两个地理位置之间的路线我需要相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:52:10.157

提名？[1] 它是 OSM 主页的来源之一。
源代码在 github [2] 上。

1：[http](http://wiki.openstreetmap.org/wiki/Nominatim)
://wiki.openstreetmap.org/wiki/Nominatim 2：[https ://github.com/twain47/Nominatim](https://github.com/twain47/Nominatim)

**编辑**：我没有正确理解。您可以查看 OSRM：[http ://project-osrm.org/](http://project-osrm.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:46:24.013

也许您可以查看[Navit](http://www.navit-project.org/)，它是一个开源的离线路由和导航应用程序。他们在[这里](http://wiki.navit-project.org/index.php/Main_Page)有一个 wiki，它也解释了一些关于[路由](http://wiki.navit-project.org/index.php/Routing)的信息。

我还没有尝试过该应用程序，但 wiki 中提到的功能之一是“地址和 POI 搜索”。

如果您想询问他们的工作方式，他们的 wiki 中也提到了几种[联系方式。](http://wiki.navit-project.org/index.php/Contacts)

您可能还想查看此列表以查找其他有趣的应用程序，这些应用程序提供离线地图存储、路由和/或离线地址搜索[http://wiki.openstreetmap.org/wiki/Software/Desktop](http://wiki.openstreetmap.org/wiki/Software/Desktop)

这看起来也很有趣：[OSM 自动导航方向](http://code.google.com/p/osmand/)。

# ajax - 从 AJAX 操作，返回 JSON 或 HTML 是首选？

> ID：15763803
> 
> 赞同：2
> 
> 时间：2013-04-02T12:11:23.347
> 
> 标签：ajax, json

在我的网站登陆页面上，我正在调用各种 AJAX 操作。但到目前为止性能很差。这些操作是

1.  获取最新文章
2.  获取最新消息
3.  获取最新职位
4.  获取最近添加的用户等。

我在仪表板中为每个 AJAX 操作显示所有这些信息。

我的问题是，

从我的 AJAX 操作中，我应该返回 HTML 还是 JSON？从性能和维护的角度来看，哪一个会更好？

我对这些方法有以下几点-

**HTML**

优点- 1\. 易于编码 2\. 易于维护。如果仪表板中有任何 UI 更改，使用 HTML 很容易做到。

缺点 1\. 完整的 HTML 将在客户端发送，性能受到影响。

**JSON- Pros-** 1\. 性能好，因为数据传输大小会更小。

缺点 1\. 仪表板中的 UI 更改会比较困难，因为我需要更改 JS 代码呈现逻辑。

我想了解我的假设是否正确。这些方法中是否还有其他要点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:33:59.773

在性能方面，直接加载和嵌入 HTML 与仅发送数据并将其传输到 DOM 结构客户端相比应该没有太大的不同。

通常，HTML 页面环境中最大的性能“杀手”是 HTTP 请求——与您在客户端执行的所有其他操作相比，它们几乎是“永远”的。因此，如果您必须为多个此类小部件提取数据，最好将这些数据传输封装到*一个*HTTP 请求中，并让不同的小部件在加载后从那里读取它们的数据。为此，像 JSON 这样的数据格式可能比 HTML 更可取。

# c# - c#中ms访问数据库2010的连接字符串，用于dns less

> ID：15763804
> 
> 赞同：3
> 
> 时间：2013-04-02T12:11:28.497
> 
> 标签：c#, ms-access-2010

朋友们……因为，

```
 OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;
 Data Source=C:\Users\Tushar\Documents\db.accdb"); 
```

此字符串在 c# 中用于 ms 访问数据库连接..查看已知的数据库位置并且它可以工作..

但是，我想在数据库位于任何位置时运行应用程序......（即）它应该从任何位置自动获取数据库位置（当用户将项目保存在任何位置时）

有小伙伴可以帮帮我吗。。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:17:17.450

I suggest creating the logic in C# to *determine* where the DB is. Once you know, it's as simple as string concatenation:

```
var dbLocation = GetDbLocation();
OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;
                              Data Source=" + dbLocation "); 
```

`GetDbLocation()` could pull the information from a config file, or determine it in some other way (you haven't given us enough information to determine where the DB is located).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:19:31.190

将您的数据库复制到 App_Data

并使用此代码：

```
string path = Server.MapPath("~/App_Data") + "\\" + "db.accdb";

OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;
                               Data Source="+path +""); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:20:51.933

试试下面的方法，它会帮助你...

```
string path = Environment.CurrentDirectory;
            path = path + "\\db.accdb";
            OleDbConnection vcon = new 
OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + path); 
```

将您的应用程序和数据库的 EXE 放在同一位置并使用上述代码...

如果您将数据库放在数据库文件夹中，请尝试如下...

```
string path = Environment.CurrentDirectory;
            path = path + "\\DataBase\\db.accdb";
            OleDbConnection vcon = new 
OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + path); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:23:05.880

您必须通过连接字符串提供数据库位置。OleDbConnection 没有其他方法可以知道数据库文件的位置。

现在，您可以做的是在运行时以这两种方式中的任何一种指定您的连接字符串。

1.  有一系列连接字符串供您使用，所有这些都指向预定位置，动态指定/选择其中一个。IE

    ```
     OleDbConnection cn = new OleDbConnection();
        cn.ConnectionString = variable; 
    ```

2.  单个连接字符串的简单字符串连接。

无论哪种方式，您都必须预先确定位置。没有神奇的代码可以`.accdb`自动搜索整个系统的文件并将其插入。即使您编写了这样的代码，那也将是一个损坏的代码或非常具体的代码。

因此，最好在 web.config 中管理您的 connectionStrings（所有可能的预定位置，您将 db 文件放置（副本）的位置）。

或者，您可以创建一个数据库表来存储所有可能的连接字符串，您可以通过一个简单的用户界面向其中添加条目和删除条目。

# android - 添加自定义日历事件 – Phonegap Android 插件

> ID：15763805
> 
> 赞同：3
> 
> 时间：2013-04-02T12:11:32.017
> 
> 标签：android, cordova, phonegap-plugins, android-calendar

下面是我的 CalendarEventPlugin.js 文件：

```
window.addcalendareventplugin = function(startDate, endDate, allDay, successCallback){     
//call the Plugin execute method()
console.log(successCallback,function(err){
callback('Error: ' + err);      
},"CalendarEventPlugin","addCalendarEvent",[startDate, endDate, allDay]); 
} 
```

我使用的是 cordova-2.5.0 和 Android 2.2 及更高版本。

下面是我的 CalendarEventPlugin.java 文件：

```
package org.apache.cordova.plugin;

import java.util.Calendar;
import org.json.JSONArray;
import org.json.JSONException;
import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;

import android.content.Intent;
import android.provider.CalendarContract;
import android.provider.CalendarContract.Events;

public class CalendarEventPlugin extends CordovaPlugin {        
    @Override       
    public boolean execute(String action, JSONArray data, CallbackContext callbackContext) throws JSONException {           
            if (action.equals("addCalendarEvent")) {
                    if(data.length() > 0)
                    {
                            //if you are passing some data eg. start,end date, all day and parameters for the Calendar
                            //from plugin's javascript interface then you can retrieve and parse the data from data[] here. 
                           String startDate = data.getString(0);
                    String endDate = data.getString(1);
                    boolean allDay = data.getBoolean(2);                                                        
                            if(this.addCalendarEvent())
                            {
                                    callbackContext.success("Done!!");
                            }
                            else
                            {
                                    callbackContext.error("Error!!");
                            }
                    }                       
                    return true;
            }
            return false;
    }       

    private boolean addCalendarEvent(){     
            Boolean ret = false;
            try{
                    Calendar beginTime = Calendar.getInstance(); //the begin time and end time can come from javascript if user enters this values in a form
            beginTime.set(2013, 1, 20, 7, 30);
            Calendar endTime = Calendar.getInstance();
            endTime.set(2013, 1, 20, 8, 30); //set your own time here and above as well or you can get the current time.

            Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.setAction(Intent.ACTION_INSERT);
            intent.putExtra(Events.TITLE, "A new event"); //can come from javascript.
            intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);
            intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis());
            intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis());

            this.cordova.startActivityForResult(this, intent, 0);

            ret = true;
            }
            catch(Exception e){
                    e.printStackTrace();
                    ret = false;
            }
            return ret;
    }       
   } 
```

下面是我的索引文件：

```
 <!DOCTYPE HTML>
     <html>
     <head>
     <title>Cordova</title>
     <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
     <script type="text/javascript" charset="utf-8" src="CalenderEventPlugin.js">           </script>
     <script type="text/javascript" charset="utf-8" src="app.js"></script>
     </head>
     <body>
     <h4>Custom Plugin Development</h4>
     <button onclick="test5()">Calendar Event Plugin</button>

     <br/>
     </body>
     </html> 
```

下面是我的 app.js 文件：

```
 function test5(){
//alert("call of app js file");
    window.addcalendareventplugin("2015-09-09T16:00:00-06:00", "2015-09-09T18:00:00-06:00","true",function(val){
    alert(val);   //once success message come and you have tested it, you can remove this alert.
    });
  } 
```

我无法调用 addCalenderEvent 。我收到 Json 错误 ..任何人都可以帮忙。提前致谢..：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:25:18.833

JS 应如下所示：

```
window.addcalendareventplugin = function(startDate, endDate, allDay, successCallback){     
    //call the Plugin execute method()
    cordova.exec(successCallback,function(err){
        console.log('Error: ' + err);      
    },"CalendarEventPlugin","addCalendarEvent",[startDate, endDate, allDay]); 
} 
```

Java应该看起来像：

```
package org.apache.cordova.plugin;

import java.util.Calendar;
import org.json.JSONArray;
import org.json.JSONException;
import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;

import android.content.Intent;
import android.provider.CalendarContract;
import android.provider.CalendarContract.Events;

public class CalendarEventPlugin extends CordovaPlugin {        
@Override       
public boolean execute(String action, JSONArray data, CallbackContext callbackContext) throws JSONException {           
        if (action.equals("addCalendarEvent")) {
                if(data.length() > 0)
                {
                        //if you are passing some data eg. start,end date, all day and parameters for the Calendar
                        //from plugin's javascript interface then you can retrieve and parse the data from data[] here.                                                         
                        String startDate = data.getString(0);
                        String endDate = data.getString(1);
                        String allDay = data.getBoolean(2);
                        if(this.addCalendarEvent())
                        {
                                callbackContext.success("Done!!");
                        }
                        else
                        {
                                callbackContext.error("Error!!");
                        }
                }                       
                return true;
        }
        return false;
}       

private boolean addCalendarEvent(){     
        Boolean ret = false;
        try{
                Calendar beginTime = Calendar.getInstance(); //the begin time and end time can come from javascript if user enters this values in a form
        beginTime.set(2013, 1, 20, 7, 30);
        Calendar endTime = Calendar.getInstance();
        endTime.set(2013, 1, 20, 8, 30); //set your own time here and above as well or you can get the current time.

        Intent intent = new Intent(Intent.ACTION_EDIT);
        intent.setType("vnd.android.cursor.item/event");
        intent.setAction(Intent.ACTION_INSERT);
        intent.putExtra(Events.TITLE, "A new event"); //can come from javascript.
        intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);
        intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis());
        intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis());

        this.cordova.startActivityForResult(this, intent, 0);

        ret = true;
        }
        catch(Exception e){
                e.printStackTrace();
                ret = false;
        }
        return ret;
}       
} 
```

# javascript - 折线图问题

> ID：15763806
> 
> 赞同：1
> 
> 时间：2013-04-02T12:11:39.970
> 
> 标签：javascript, html, google-visualization, interactive, linechart

![在此处输入图像描述](https://i.stack.imgur.com/2d5bO.png)

我已经制作了上面给出的折线图。问题是我不能让那条红线在当前时间停止。我只想在值更新时绘制。我尝试不定义该值，但在这种情况下会出错。

这是[一个链接](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Overview)！

我使用了以下代码：

```
<html>
<head>
<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>
<script type=\"text/javascript\">
google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});
google.setOnLoadCallback(drawChart);
function drawChart() {
var data = google.visualization.arrayToDataTable([
      ['Hour', 'Renewals Yesterday', 'Renewals Today']
      $ren_graph
      ]);

var options = {
      title: 'Renewals Cumulative Comparison Graph'
    };

var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>
</head>
<body>
<div id=\"chart_div\" style=\"width: 1200px; height: 300px;\"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:03:44.293

要获得“空白”值，您需要做两件事。

首先，您需要将“空白”项目的值设置为`null`

其次，您需要`interpolateNulls`在选项中设置为 false （这是默认行为）。

`interpolateNulls` [您可以在此处](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)阅读更多信息：

> 是否猜测缺失点的值。如果为真，它将根据相邻点猜测任何缺失数据的值。如果为假，它将在未知点处留下断线。

# android - 一个接一个地播放 2 个动画绘图

> ID：15763807
> 
> 赞同：1
> 
> 时间：2013-04-02T12:11:46.247
> 
> 标签：android, animation, animationdrawable

我想一个接一个地玩 2 个动画绘图。

当第一个停止时，另一个必须开始..

问题是：

AnimationListener 无法使用动画绘制

有人知道解决方案吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:18:25.247

试试这个代码

```
 final Handler handler = new Handler();
                                handler.postDelayed(new Runnable() {
                                  public void run() {
                                      //start 2nd animation
                                  }
                                }, delay);//delay is the time for how long 1st animation takes to complete 
```

# sencha-touch-2 - 在 sencha touch 2 中创建类似 Android 的网格视图

> ID：15763814
> 
> 赞同：1
> 
> 时间：2013-04-02T12:12:07.047
> 
> 标签：sencha-touch-2, android-gridview

我正在尝试在 sencha touch 2 中创建类似于网格视图的 Android。网格视图应该有 9 个按钮，3 行和 3 列。我对 sencha 很陌生，我一直在谷歌搜索，但无法获得解决方案。请指导我这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:49:57.763

基本上你有两个选择：

1.  具有布局的容器，`vbox`其中包含三个具有`hbox`布局的子项

2.  具有布局的容器，`hbox`其中包含三个具有`vbox`布局的子项

有关布局的更多信息在[这里](http://docs.sencha.com/touch/2-1/#!/guide/layouts)

我将采用第一个选项，因为它是 Kitchen Sink[演示](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/buttons)中的一个示例：

```
layout: {
    type : 'vbox',
    pack : 'center',
    align: 'stretch'
},

defaults: {
    xtype: 'container',
    flex : 1,
    layout: {
        type : 'hbox',
        align: 'middle'
    },
    defaults: {
        xtype : 'button',
        margin: 15
    }
},

items: [
    {
        items: [
            {text: 'Normal'},
            {ui: 'round', text: 'Round'},
            {ui: 'small', text: 'Small'}
        ]
    },

    {
        items: [
            {ui: 'decline', text: 'Decline'},
            {ui: 'decline-round', text: 'Round'},
            {ui: 'decline-small', text: 'Small'}
        ]
    },
    {
        items: Ext.os.deviceType.toLowerCase() == "phone" ? [
            {ui: 'confirm', text: 'Confirm'},
            {ui: 'confirm-round', text: 'Round'},
            {ui: 'confirm-small', text: 'Small'}
        ] : [
            {ui: 'confirm', text: 'Confirm'},
            {ui: 'confirm-round', text: 'Round'},
            {ui: 'confirm-small', text: 'Small'}
        ]
    }
] 
```

演示：[http ://www.senchafiddle.com/#XFHkg#sZTqH](http://www.senchafiddle.com/#XFHkg#sZTqH)

# jquery - 获取div内容然后修改

> ID：15763818
> 
> 赞同：2
> 
> 时间：2013-04-02T12:12:15.767
> 
> 标签：jquery, html

场景是，我想获取一个 div 内容，然后对其进行修改以便将其插入另一个 div。下面的代码：

```
$("#loupe").live("click",function(){
    $('#divBody').empty();
    $('#divTitle').empty();
    var title = $(this).closest('div').find('.stepTitle').text();
    var divContent = $(this).closest('div').html();
    // code to modify the content to be inserted in the modal 
    $('#divBody').append(divContent);
    $('#divTitle').append(title);
    $('#div').modal({ dynamic: true });
}); 
```

更详细地说，第一个 div 包含一个标题，我想在将内容插入新 div 之前删除它，因此新 div 必须包含没有标题的内容

```
<div>
    <h4 class="StepTitle">Planing des congés pour le service de <%=service.getNomService() %> au <%=month%> / <%=year%>   
        <span style="float: right;">
            <i class="icon-white icon-search" style="cursor: pointer;" id="loupe"> </i>  
            <i class="icon-white  icon-remove" style="cursor: pointer;" onclick="$(this).closest('div').remove();"> </i> 
        </span>  </h4>  
    <table border="1" style="border-color: gray;">
    </table> 
</div> 
```

// ***** ** *** ** *** ****** *要插入内容的div

```
<div id="div" class="modal hide fade" tabindex="-1" role="dialog"
        aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 id="divTitle">
            //here the title
        </h3>

    </div>
    <div id="divBody" class="modal-body">
        here the other content
    </div>
    <div  class="modal-footer">
        <input type="button" class="btn" class="close" data-dismiss="modal" value="fermer">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:32:12.090

jQuery 允许您处理页面的片段（以及 XML）。

使用该`.html`方法将元素的 HTML 分配给变量后，您可以像这样对 HTML 进行操作：

```
var html, withoutTitle;
html = $('#someDiv').html();
withoutTitle = $(html).remove('#title').html();
$('#someOtherDiv').html(withoutTitle); 
```

我还没有测试过这段代码，所以你可能需要稍微调整一下以适应你的目的。

# android - 按下“返回”或“主页”时，Android 应用程序为 FC

> ID：15763820
> 
> 赞同：1
> 
> 时间：2013-04-02T12:12:17.967
> 
> 标签：android, android-activity, android-mediaplayer

我创建了一个播放声音文件的 android 应用程序。当我按下主页按钮时，我注意到声音继续播放并且没有停止，所以我在我的类中添加了以下函数：

```
@Override
protected void onStop()
{
    super.onStop();
    finish(); //kill the thread
    pS.reset(); //stop the sound
}
@Override
protected void onPause()
{
    super.onPause();
    finish(); //kill the thread
    pS.reset(); //stop the sound
} 
```

当按下“返回”或“主页”时，它会完成这项工作，它会停止音乐并且应用程序不会强制关闭。唯一的问题是，必须播放声音才能使其不是 FC。如果没有声音播放，应用程序 FC。我猜这是

> pS.reset();

当声音没有播放时，功能不知道该怎么做。

如果我将其设置为：

> pS = 空；

而不是 pS.reset()，当按下“Back”或“Home”时，它会在没有 FC 的情况下做同样的事情吗？

我的 pS 初始化：

```
pS = MediaPlayer.create(iAct.this, R.drawable.sound); 
```

编辑：我注释掉了

```
pS.reset(); 
```

并添加

```
pS = null; 
```

它没有FC，但声音不会停止播放。

我更新了我的 onPause()：

```
@Override
protected void onPause()
{
    super.onPause();
    if (pS.isPlaying()) {
        pS.pause(); //stop the sound
        finish();
    }
    else
        finish();
} 
```

我的日志：

```
04-02 13:06:40.563: E/AndroidRuntime(925): FATAL EXCEPTION: main
04-02 13:06:40.563: E/AndroidRuntime(925): java.lang.RuntimeException: Unable to pause activity {com.testcom.myapp/com.testcom.myapp.MyappActivity}: java.lang.NullPointerException
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.access$1700(ActivityThread.java:117)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.os.Looper.loop(Looper.java:123)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-02 13:06:40.563: E/AndroidRuntime(925):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 13:06:40.563: E/AndroidRuntime(925):  at java.lang.reflect.Method.invoke(Method.java:507)
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-02 13:06:40.563: E/AndroidRuntime(925):  at dalvik.system.NativeStart.main(Native Method)
04-02 13:06:40.563: E/AndroidRuntime(925): Caused by: java.lang.NullPointerException
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.testcom.myapp.MyappActivity.onPause(MyappActivity.java:119)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.Activity.performPause(Activity.java:3851)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2341)
04-02 13:06:40.563: E/AndroidRuntime(925):  ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:14:27.437

你可以把 PS.stop 放在 onPause() 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:19:56.007

只需放入 onPause()，因为 onStop() / onDestroy() 之类的所有方法都是在 onPause() 之后调用的，这只是 Activity 生命周期的流程，所以只写在 onPause 中。

```
@Override
protected void onPause()
{
    if(ps.isPlaying)
       pS.stop(); //stop the sound

    super.onStop();
    finish(); //kill the thread
} 
```

好的，例如需要实现返回和主页按钮然后实现 onKeyUp/onKeyDown 并检测键并为当前播放曲目执行暂停/停止

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:30:54.197

看看这里可能会帮助您解决问题：

[如何在 onPause 和 onResumee 上静音和取消静音](https://stackoverflow.com/questions/14899395/how-to-mute-and-unmute-it-on-the-onpause-and-onresume)

有了它，您可以暂停并在它停止的地方启动它。

像这样：

全球的：

```
MediaPlayer ourSong; 
```

在你的 OnCreate

```
ourSong = MediaPlayer.create(yourActivity.this, YourSong);
        ourSong.setLooping(true);
ourSong.start(); 
```

在你暂停功能

```
 @Override
protected void onPause()
{
    super.onPause();
    if(ourSong.isPlaying)
    ourSong.pause(); //stop the sound
}

@Override
protected void onResume() 
{
    super.onResume();
    ourSong.start();
} 
```

# ios-simulator - UIActionSheet 集中旋转

> ID：15763823
> 
> 赞同：30
> 
> 时间：2013-04-02T12:12:30.800
> 
> 标签：ios-simulator, uiactionsheet, autorotate

其他一些人问过这个问题，但从未得到回答。这个问题似乎微不足道，但在 Apple 的文档或其他地方都没有解决。

我正在使用以下`showInView`方法展示我的 UIActionSheet 实例：

```
 UIActionSheet *myActionSheet = [[UIActionSheet alloc] initWithTitle:@"Test" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Destroy" otherButtonTitles:@"One", @"Two", nil];

    [myActionSheet showInView:self.view]; 
```

UIActionSheet 以它启动的任何方向呈现在中心，但是当我旋转 iPad 时，它会在`top-right`或中看到`bottom-left`（取决于方向是更改为纵向还是横向）。

如果将 Autoresizing Masks 设置为`UIViewAutoresizingFlexibleBottomMargin`and `UIViewAutoresizingFlexibleRightMargin`（这是大多数视图元素的默认 autoresizingMask 值），就会出现这种行为，因此我尝试通过调用`setAutoresizingMask`UIActionSheet 实例上的方法来重置该值。

```
[myActionSheet setAutoresizingMask:UIViewAutoresizingNone]; 
```

但是，无论是 Autoresizing Mask 的这个值还是任何其他值都没有实现任何更改。

这个问题有什么解决办法吗？我宁愿不诉诸于解除`UIActionSheet`轮换并重新显示它——原则上这种方法似乎没有必要。

# c# - 如何使用 Roslyn 阅读 XML 文档注释

> ID：15763827
> 
> 赞同：24
> 
> 时间：2013-04-02T12:12:38.257
> 
> 标签：c#, roslyn

我希望能够在使用 Roslyn 解析 C# 源代码时阅读 XML 文档注释。

```
/// <summary>
/// Documentation...
/// </summary> 
```

我尝试在 ParseOptions 中设置 ParseDocumentationComments，但它似乎没有效果？

```
var parseOptions = ParseOptions.Default.WithParseDocumentationComments(true);
SyntaxTree unit = SyntaxTree.ParseFile(file, parseOptions); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-02T15:52:37.423

您需要：

1.  查看`LeadingTrivia`包含 XML 文档注释的语法
2.  构造一个`Compilation`，找到`Symbol`具有 XML 文档注释的那个并使用`GetDocumentationComment()`它上面的方法。

一个完整的例子：

```
using Roslyn.Compilers.CSharp;
using System;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        var tree = SyntaxTree.ParseText(@"
/// <summary>This is an xml doc comment</summary>
class C
{
}");
        var classNode = (ClassDeclarationSyntax)tree.GetRoot().Members.First();
        var trivia = classNode.GetLeadingTrivia().Single(t => t.Kind == SyntaxKind.DocumentationCommentTrivia);
        var xml = trivia.GetStructure();
        Console.WriteLine(xml);

        var compilation = Compilation.Create("test", syntaxTrees: new[] { tree });
        var classSymbol = compilation.GlobalNamespace.GetTypeMembers("C").Single();
        var docComment = classSymbol.GetDocumentationComment();
        Console.WriteLine(docComment.SummaryTextOpt);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-12T14:29:56.800

只是为了更新[上面的 Kevin Pilch 答案](https://stackoverflow.com/a/15768583/2746150)：

1.  通过 nuget 添加 Microsoft.CodeAnalysis.CSharp

2.  代码如下：

    ```
    using System;
    using System.Linq;
    using Microsoft.CodeAnalysis.CSharp;
    using Microsoft.CodeAnalysis.CSharp.Syntax;

    class Program
    {
        static void Main(string[] args)
        {
            var tree = CSharpSyntaxTree.ParseText(@"
    /// <summary> This is an xml doc comment </summary>
    class C
    {
    }");
            var root = (CompilationUnitSyntax) tree.GetRoot();
            var classNode = (ClassDeclarationSyntax) (root.Members.First());

            var trivias = classNode.GetLeadingTrivia();
            var xmlCommentTrivia = trivias.FirstOrDefault(t => t.Kind() == SyntaxKind.SingleLineDocumentationCommentTrivia);
            var xml = xmlCommentTrivia.GetStructure();
            Console.WriteLine(xml);

            var compilation = CSharpCompilation.Create("test", syntaxTrees: new[] {tree});
            var classSymbol = compilation.GlobalNamespace.GetTypeMembers("C").Single();
            var docComment = classSymbol.GetDocumentationCommentXml();
            Console.WriteLine(docComment);
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-06T13:33:03.413

**更新 ：**

`FirstOrDefault`方法不再可用。所以`enumerator`改用。

**更新代码：**

```
using System;
using System.Linq;
using Microsoft.CodeAnalysis.CSharp;
using Microsoft.CodeAnalysis.CSharp.Syntax;

class Program
{
    static void Main(string[] args)
    {
        var tree = CSharpSyntaxTree.ParseText(@"
/// <summary> This is an xml doc comment </summary>
class C
{
}");
        var root = (CompilationUnitSyntax) tree.GetRoot();
        var classNode = (ClassDeclarationSyntax) (root.Members.First());

        var trivias = classNode.GetLeadingTrivia();
        var enumerator = trivias.GetEnumerator();
        while (enumerator.MoveNext())
        {
           var trivia = enumerator.Current;
           if(trivia.Kind().Equals(SyntaxKind.SingleLineDocumentationCommentTrivia))
           {
               var xml = trivia.GetStructure();
               Console.WriteLine(xml);
           }
        }
    }
} 
```

# magento - Magento 加载产品事件观察者？

> ID：15763829
> 
> 赞同：4
> 
> 时间：2013-04-02T12:12:39.783
> 
> 标签：magento, observer-pattern

我正在处理的商店有一些自定义社区和本地模块，可以处理与目录产品相关的一些自定义项目。

我需要一个事件观察器，以便在加载时向目录项实例添加一些额外的数据。

如果这是正确的方法，我应该寻找什么事件？

如果您有任何其他提示，片段，我提前感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:19:29.093

您可以使用`catalog_product_load_after`事件向任何产品添加附加信息，例如。

配置文件

```
<catalog_product_load_after>
        <observers>
            <MagentoDiary_FirstModule_Model_Observer>
                <class>MagentoDiary_FirstModule_Model_Observer</class>
                <method>updateProductName</method>
           </MagentoDiary_FirstModule_Model_Observer>
        </observers>
    </catalog_product_load_after> 
```

Observer.php 看起来像这样

```
class MagentoDiary_FirstModule_Model_Observer{

    public function updateProductName(Varien_Event_Observer $observer){
        $product = $observer->getData('product');
        $product->setName($product->getName().' Coooool !');
    }
} 
```

# facebook - 脸书点赞柜台

> ID：15763830
> 
> 赞同：2
> 
> 时间：2013-04-02T12:12:42.220
> 
> 标签：facebook, facebook-like, counter

我添加了我在开发者网站上生成的 facebook like 按钮，但问题是当我更改我的 url 时，like 按钮计数器会发生变化：

```
url : http://localhost/ci/   --> 7 likes
url : http://localhost/ci/fr/--> 0 likes 
```

开发工具包：

```
window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
          appId      : 'xxx', // App ID from the App Dashboard
          channelUrl : 'http://localhost/ci', // Channel File for x-domain communication
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to access the session?
          xfbml      : true  // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here
      };

      // Load the SDK's source Asynchronously
      // Note that the debug version is being actively developed and might 
      // contain some type checks that are overly strict. 
      // Please report such bugs using the bugs tool.
      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ false)); 
```

[喜欢来自https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)的按钮初始化：

```
<script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxx";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

我怎样才能为每个页面设置相同的计数器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:37:32.540

你还没有尝试过 HTML 标签？

```
<div class="fb-like" data-href="http://URL_SAME" data-send="true" data-width="450" data-show-faces="true"></div> 
```

在 data-href 中具有相同的 url ???

# javascript - jQuery 滑块不可拖动

> ID：15763831
> 
> 赞同：2
> 
> 时间：2013-04-02T12:12:51.213
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, jquery-slider

我在我的 ruby​​ on rails 应用程序中使用 jQuery 滑块。问题是我无法拖动滑块按钮，但如果我单击滑块内的任何位置，它会成功移动。

![在此处输入图像描述](https://i.stack.imgur.com/Yi9X9.jpg)

查看文件

```
<div id="slider"></div>
<%= text_field_tag :search_radius, params[:search_radius], placeholder: "2 miles", class: "search_radius" %> 
```

js文件

```
$(document).ready(function() {
 $("#slider").slider({
    step:1,
    range: "max",
    min: 1,
    max: 10,
    value: $('input.search_radius').val(), // needed to persist value after page reload
    slide: function(event, ui) {
      $(".search_radius").val(ui.value);
    },
  change: function() {
   $('input.search_radius').val( $( "#slider" ).slider( "value"));
    },
        create: function() {
    $('input.search_radius').val( $( "#slider" ).slider( ""));
  }
  });
$(".search_radius").val($("#slider").slider("value")); 
```

css 文件

```
#slider {
 width:100px ;
 height:11px;
 background:url(slider/slider-bg.png);
 margin-left: 10px;
 position:relative;
 padding:0 10px;
}

/*Style for the slider button*/
.ui-slider-handle {
 width:24px !important;
 height:24px !important;
 position:absolute !important;
 top:-7px !important;
 margin-left:-12px !important;
 z-index:200 !important;
 background:url("slider/slider-button.png") !important;
 border: none !important;
 display: block !important;
}

/*Result div where the slider value is displayed*/
#search_radius {
 font-size:20px;
 height:$searchInputsHeight;
 font-family:Arial, Helvetica, sans-serif;
 color:green;
 width:80px;
 text-align:center;
 text-shadow:0 1px 1px #000;
 font-weight:700;
 display:inline;
} 
```

应用程序.css

```
 *= require jquery.ui.slider 
```

应用程序.js

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery.ui.slider 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:16:52.037

您是否尝试过在 firebug 中查看控制台以查看 javascript 是否工作正常？

这听起来确实像一个 z-index 问题，但看起来您已经尝试解决这个问题。也许还可以尝试使用 firebug 'inspect element' 工具来确保滑块上方的 z-index 上没有任何内容。

如果可能的话，发送一个示例的链接，我会看看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:53:40.467

嗯，乍一看，一切都很好。您能否尝试删除 - 更改并创建如下：

```
$(document).ready(function() {
 $("#slider").slider({
    step:1,
    range: "max",
    min: 1,
    max: 10,
    value: $('input.search_radius').val(), // needed to persist value after page reload
    slide: function(event, ui) {
      $(".search_radius").val(ui.value);
    }
  });
$(".search_radius").val($("#slider").slider("value")); 
```

# actionscript-3 - 无法在 Flash CS5 (AS3) 中将 YouTube 播放器置于舞台中央

> ID：15763832
> 
> 赞同：2
> 
> 时间：2013-04-02T12:12:52.100
> 
> 标签：actionscript-3, flash, youtube, player-stage

我有一个在 Flash 中播放的 YouTube 视频，但我想把它放在舞台中央。目前它要么转到左上角，要么转到右下角。

这是我加载播放器和视频的代码。视频播放没问题，我只想集中在舞台上。

```
stop();

Security.allowDomain("www.youtube.com");

var my_player:Object;

var my_loader:Loader = new Loader();
my_loader.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));
my_loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit);

function onLoaderInit(e:Event):void{
addChild(my_loader);
my_player = my_loader.content;
my_player.addEventListener("onReady", onPlayerReady);
} 

function onPlayerReady(e:Event):void{
my_player.setSize(600,300);
my_player.cueVideoById("76BboyrEl48",0);
my_player.x = stage.stageWidth / 2;
my_player.y = stage.stageHeight / 2;
} 

play_btn.addEventListener(MouseEvent.CLICK, playVid);
function playVid(e:MouseEvent):void {
my_player.playVideo();
}
pause_btn.addEventListener(MouseEvent.CLICK, pauseVid);
function pauseVid(e:MouseEvent):void {
my_player.pauseVideo();
} 
```

如您所见，我尝试使用该`.x = stageWidth / 2;`方法，但这只会将播放器移动到右下角，没有它，它会停留在左上角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:36:19.877

试试这个：

```
my_player.x = stage.stageWidth/2 - my_player.width/2;
my_player.y = stage.stageHeight/2 - my_player.height/2; 
```

# java - 在 FF 中运行良好的脚本无法在 IE 中运行

> ID：15763833
> 
> 赞同：1
> 
> 时间：2013-04-02T12:12:55.870
> 
> 标签：java, selenium

或者任何人都知道将 IE 用于 selenium webdriver 的任何不同解决方案。我的代码如下

```
package backOffice;  
import java.io.File;  
import org.openqa.selenium.By;  
import org.openqa.selenium.WebDriver;  
import org.openqa.selenium.WebElement;  
import org.openqa.selenium.chrome.ChromeDriver;  
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;  
import org.openqa.selenium.remote.DesiredCapabilities;    
import com.gargoylesoftware.htmlunit.javascript.configuration.BrowserName;    
import bsh.ParseException;  

public class Time    
{   
   private WebDriver driver;    
   private String baseUrl= "http://www.google.co.in/";      
   public static void main(String args[]) throws InterruptedException   
  {                 
     Time tm=new Time();        
     tm.trial();    
  }     

private void trial() throws InterruptedException    
 {          
    File file = new File("C:/Documents and Settings/Administrator/Desktop/32-      bit_IEDriverServer_Win32_2.31.0/IEDriverServer.exe");        
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    DesiredCapabilities caps = DesiredCapabilities.internetExplorer();                caps.setCapability("ignoreZoomSetting", true);        
    driver=new InternetExplorerDriver(caps);        
    driver.get(baseUrl + "/");                          
    driver.findElement(By.id("gbqfq")).clear();         
    driver.findElement(By.id("gbqfq")).sendKeys("harshal kakade");          
    driver.findElement(By.id("gbqfb")).click();
    driver.findElement(By.linkText("Harshal Kakade - India | LinkedIn")).click ();      
  }  
 } 
```

谢谢，

哈沙尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T13:27:46.007

尝试查看互联网选项-> 安全性并取消选中“启用保护模式”。可能有问题。

# php - symfony 应用程序与域/子域共享登录 cookie

> ID：15763836
> 
> 赞同：1
> 
> 时间：2013-04-02T12:13:01.690
> 
> 标签：php, session, cookies, symfony1

我们用 symfony1.2 创建了一个项目，我们的主应用程序在我们的主域 www.example.com 上运行，现在我们创建了另一个应用程序，我们从子域 sd.example.com 运行，我们想共享登录这两个应用程序使用户可以从根域或子域登录，他可以使用相同的登录名访问这两个应用程序。
注意：
我们有两个应用程序相同的数据库
我们有基于文件的登录系统

我在 example.com 的 factory.yml 和 sd.example.com 中这样做了，但它似乎不起作用

```
      session_name: mysitesession
      session_path: %SF_CACHE_DIR%/sessions
      session_cookie_domain: .example.com

```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:18:31.420

要共享托管在不同子域上的两个应用程序的登录名，您需要在**“factories.yml”中更改这些设置**

*   使用相同的会话名称
*   使用相同的会话路径
*   使用与 .rootdomain 相同的 cookie 域名

**example.com**的factory.yml

 **```
贮存：
    类：sfSessionStorage
    参数：
      会话名称：我的站点
      session_path: %SF_CACHE_DIR%/sessions
      session_cookie_domain: .example.com

```

**sd.example.com**的factory.yml

 **```
贮存：
    类：sfSessionStorage
    参数：
      会话名称：我的站点
      session_path：/var/www/vhosts/example.com/subdomain/mysd/session
      session_cookie_domain: .example.com

```

如果它不工作检查其他配置文件，可能是在任何其他配置/代码文件中覆盖的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:25:22.463

两个 cookie 需要具有**相同的名称**和**相同的域**范围。在您的情况下，我认为您应该强制使用 cookie 名称：

```
 storage:
    class: sfSessionStorage
    param:
      session_name: my_site
      session_cookie_domain:  .example.com 
```****

# asp.net - IISExpress 中的 ApplicationShutdownReason.BuildManagerChange 和 ApplicationPool 重启

> ID：15763838
> 
> 赞同：6
> 
> 时间：2013-04-02T12:13:04.287
> 
> 标签：asp.net, .net, iis-7, visual-studio-2012, iis-express

我们出现了问题。我们将 IISExpress 8.0 用于 Asp.net WebForm 应用程序（.net 4.0）。计算机在 Windows 7 x64 下运行。

有时，ApplicationPool 会无故重启。我知道它会在 15 次 aspx\ascx 文件更改后重新启动。但在这种情况下，它会在没有任何更改的情况下重新启动。在 ApplicationEnd 我们找到了重新启动的原因。它是**ApplicationShutdownReason.BuildManagerChange**。

在 Internet 上搜索不会提供任何有用的详细信息。大多数情况下都建议使用 IIS 而不是 IISExpress。

你知道这可能是什么原因吗？

**更新**：

深入研究 .Net 4 源代码给出了关闭的两个原因。当有人从 Temporary Asp.net 文件夹更改 hash.web 文件时，会触发其中之一。例如 - “c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\app\a83dcad1\be4aa699\hash\hash.web”

第二个原因是当 BuildManager 构建一些对象并将 BuildResult 缓存在 HttpCache 中时。然后，如果它已过期，它会检查此 BuildResult 在缓存过期时是否需要 ShutdownAppDomainOnChange。如果需要，它会触发 BuildManagerChange 关闭。

**更新2**

在我们的案例中，重启是由 hash.web 更改引起的。似乎 IISExpress 在没有任何源代码更改的情况下对其进行了更新，但为什么呢？

**UPDATE3** 微软有一个问题 - [https://connect.microsoft.com/VisualStudio/feedback/details/783440/microsoft-visualstudio-web-host-exe-touches-hash-web-and-should-not-be-运行](https://connect.microsoft.com/VisualStudio/feedback/details/783440/microsoft-visualstudio-web-host-exe-touches-hash-web-and-should-not-be-running) 他们说他们在 Visual Studio 2012 Update 2 中修复了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:32:27.000

这不是一个完整的答案，所以你可以从中获得任何好处。

似乎发生了两件事：`hash.web`更改可能是因为 IIS 使用临时位置来存储您构建的应用程序 DLL。当这个文件发生变化时，IIS 知道你构建了一个新版本的应用程序，需要重新启动它；这可以解释应用程序池重置。

对于缓存过期，似乎 IIS 正在尝试在不同的应用程序域中卸载和重新加载某些内容。一旦加载了应用程序域（我认为），就无法（在.NET中）卸载程序集，因此这是实现此目的的“常用”方法。

也许。

# java - 使用 DSN 连接 SQL SEVER 时只允许一个 resultSet 实例

> ID：15763844
> 
> 赞同：0
> 
> 时间：2013-04-02T12:13:21.040
> 
> 标签：java, sql-server-2008-r2, dsn

我收到以下错误

```
[Microsoft][ODBC SQL Server Driver]Connection is busy with results for another hstmt 
```

我的代码

```
private static final String DRIVER = "com.microsoft.jdbc.sqlserver.SQLServerDriver";
private static final String URL = "jdbc:odbc:sql2008";
private String[] entity = {"TABLE","VIEW"};
private ResultSet tables,columns,resultSet;

public void getData() throws SQLException, ClassNotFoundException{
    Class.forName(DRIVER);
    Connection  connection=DriverManager.getConnection(URL,USERNAME,PASSWORD);
    DatabaseMetaData data = connection.getMetaData();
     resultSet =  data.getCatalogs();

     while (resultSet.next()) {
         String dbName = resultSet.getString("TABLE_CAT");
        if(dbName.toString().equals("db")){
            tables=data.getTables(dbName, "%", "%", entity);
            while (tables.next()) {
                           System.out.println(tables.getString("TABLE_NAME"));
            }
        }
    }
} 
```

URL 是 DSN 连接（使用 dsn 名称的连接），我在尝试获取再次是 ResultSet 的表时遇到此错误，但它在直接（使用地址）的无 DSN 连接中工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:19:46.503

您同时迭代两个结果集：

1.  `while (resultSet.next()) {`
2.  `while (tables.next()) {`

根据错误消息，这是不允许的。

您可以通过将第一次迭代的结果放入 a`List<String> databaseNames`然后迭代该列表以列出表来修复它。

或者，如果您使用的是 SQL Server 2005，您可能想尝试在 SQL Server 中启用一项称为“[多个活动结果集](http://msdn.microsoft.com/en-us/library/h32h3abf%28v=vs.80%29.aspx)”的功能。

# joomla - 嗨，我创建了 joomla 组件。它使用 id 加载项目。如何为该组件添加别名。

> ID：15763848
> 
> 赞同：1
> 
> 时间：2013-04-02T12:13:36.027
> 
> 标签：joomla

我创建了 joomla 组件。它使用 id 加载项目。如何为该组件添加别名。

我的网站网址 joomla/cochrane_v3/products/clearvu-%E2%80%93-critical-infrastructure/3.html

我如何用它的别名替换 3

我在网站下面创建了组件使用。 [http://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:41:15.350

鉴于您的数据库和表单中有一个别名字段，那么您通常会在数据库选择查询中生成一个“slug”，如下所示：

```
SELECT a.*, CASE WHEN CHAR_LENGTH(a.alias) THEN CONCAT_WS(":", a.id, a.alias) ELSE a.id END as slug
... 
```

这会产生类似的东西`3:youralias`，然后可以用来构建 URL 而不是 id。读取 URL 时，您只需使用 (int)$id 去除“：”后面的部分并获取干净的 id。

**一步步**

1.  `slug`从你的`id`和创建一个`alias`。最好在上面写的数据库中完成。
2.  使用`slug`代替`id`来构建 URL。
3.  当确定`id`在数据库查询中使用的正确性（对于单个页面视图）时，使用`(int)$id`剥离后面的部分`':'`并获得真实的`id`.

# backend - 作为服务提供商的后端如何提供数据完整性？

> ID：15763854
> 
> 赞同：1
> 
> 时间：2013-04-02T12:13:57.303
> 
> 标签：backend, paas

移动后端即服务提供商 (MBaaS)，例如 KiiCloud ( [http://developer.kii.com](http://developer.kii.com) )、Parse ( [http://parse.com](http://parse.com) )、Applicasa ( [http://www.applicasa.com](http://www.applicasa.com) ) 、Kinvey（[http://www.kinvey.com](http://www.kinvey.com)）等提供云端数据存储。他们如何确保存储的对象是一致的，而不是重复的等。存储的数据最终是否一致，因为它是基于云的？

最好的问候和提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:44:05.440

大多数新的 BaaS 提供商都使用一种现成的 NoSQL 解决方案，例如 MongoDB。因此，他们能够更专注于性能调整，而不是数据同步和复制的实际底层机制。

这是 Kinvey 的 CTO 在 Quora 上的帖子的链接： [http ://www.quora.com/Backend-as-a-Service/How-do-backend-as-a-service-providers-Stackmob-Parse-Kinvey- Kii-Cloud-UserGrid-维护数据完整性](http://www.quora.com/Backend-as-a-Service/How-do-backend-as-a-service-providers-Stackmob-Parse-Kinvey-Kii-Cloud-UserGrid-maintain-data-integrity)

# iphone - 使用 Test Flight App 对随机数进行 beta 测试有什么危险吗？

> ID：15763862
> 
> 赞同：1
> 
> 时间：2013-04-02T12:14:21.773
> 
> 标签：iphone, ios, cocoa-touch, testflight

最近我完成了我的应用程序的测试版，并想招募一些用户来测试它。我一直在使用 Test Flight App 将 App 发送给我的设计师，所以我可能会这样做。我只是想知道，这样做有什么危险吗？我正在考虑在一些留言板上招募测试人员，所以我显然不会亲自认识这些人。是否有人可以对 .ipa 进行逆向工程并窃取代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:21:18.257

如果你可以运行它，它可以被逆向工程

这适用于包括测试人员在内的所有用户。

你所能做的就是发布你的应用程序并希望最好。

问你自己：

*   真的有*那么*开创性，你必须被伤痕累累，有人会偷它吗？
*   如果有人确实窃取了您的代码，您是否能够证明任何声明？

如果你真的写了一些很棒的新东西，其他人会从头开始创造类似的东西，所以你*无能为力*，但保留你的日志并记录你的工作。

# html - 在 MailChimp 中仅使链接目标可编辑

> ID：15763866
> 
> 赞同：19
> 
> 时间：2013-04-02T12:14:29.230
> 
> 标签：html, html-email, mailchimp

有没有办法只允许用户使用 MailChimp 的模板语言编辑链接的目的地，而不是链接本身？[他们的文档](http://kb.mailchimp.com/article/template-language-creating-editable-content-areas)中似乎没有关于这种特定情况的任何内容。

例如：

```
<a href="link.html" target="_blank">
    <img src="button.gif" alt="Button Name" />
</a> 
```

所以我想允许用户只编辑“ `link.html`”来指向其他地方，因为链接按钮永远不会改变。

不幸的是，使事情变得更复杂的是，模板中的链接数量未知（由于使用`mc:repeatable`），因此无法将解决方案硬编码到特定链接。

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-13T16:49:05.720

我今天遇到了完全相同的问题。似乎当前无法使用 Mailchimp 中的合并标签使单个 href 属性变为动态。

我发现的最佳解决方法是在包含链接和按钮图像的可重复部分中创建一个可编辑字段（跨度）。

```
<tr mc:repeatable>  
    <td width="600px">                      
        <span mc:edit="offer_link">       
             <a href="http://www.mywebsite.com" target="_blank">
                <img src="http://www.mywebsite.com/images/button.png" width="100" height="30" alt="view offer button">
            </a>
        </span>
    </td>
</tr> 
```

当发件人从模板创建电子邮件时，他们可以单击编辑器中的“<>”图标来编辑链接的 html。他们需要一些非常基本的 HTML 知识，但它会成功的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:53:33.227

在您的 MailChimp 模板中，不要使用`<a href="link.html" target="_blank">`，而是使用合并标签。例如：

```
<a href="*|CUSTOM_URL|*" target="_blank"> 
```

请按照以下步骤完成设置：

1.  转到`Lists`>`Create Forms`并添加一个新的输入字段。
2.  选择字段后，单击`Field Settings`。
3.  标记字段`Custom Url`。
4.  设置`Field Tag`为**CUSTOM_URL**
5.  取消选中`Required Field`。
6.  设置`Field Visibility`为**隐藏**。
7.  设置`Default Merge Tag Value`为**`http://www.example.com/new-link.html`**（换句话说，这是发件人`link.html`在发送每个广告系列之前输入您希望更改为的绝对 URL 的位置。

发送活动时，它会自动为链接上`new-link.html`的属性填写此默认链接 ( )，`href`而无需 SENDER 实际修改活动。

**请确保在添加订阅者时没有人实际在此字段中输入值，否则它将覆盖 SENDER 设置的默认值。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T01:22:48.887

我在这里得出了与许多人相同的结论，在 MailChimp 或 Campaign Monitor 中没有简单的方法可以做到这一点。

在 MailChimp 中，目前唯一的方法是使用他们的具有“内容块”的样板模板，这使得编辑非常简单——你只是不能自定义代码你自己的模板。我们需要的是使用“内容块”编写自定义模板的能力，这在 MailChimp 中目前不可用。

**在此处阅读有关内容块的信息：http:**
[//kb.mailchimp.com/campaigns/content-blocks/about-content-blocks](http://kb.mailchimp.com/campaigns/content-blocks/about-content-blocks)

# php - 在另一个用户定义函数 PHP 中对用户定义函数进行排序

> ID：15763868
> 
> 赞同：-3
> 
> 时间：2013-04-02T12:14:47.603
> 
> 标签：php

我不明白在函数中使用函数时排序是如何工作的。

```
function funcChild(){
    echo "Sparta";
}

function funcMain($panic){
    echo "This is $panic";
}

funcMain(funcChild()); 
```

它输出：

```
SpartaThis is 
```

我只想让它输出“这是斯巴达”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:17:00.660

Then you need to `return` the value from the function so it can be passed to the next function, not `echo` it right there on the spot.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:17:28.210

`echo` and `return` are not equivalent. When you echo something, it gets immediately printed, rather than stored anywhere. When your code executes, `funcChild()` executes first because `funcMain()` is trying to use it as a parameter. `funcChild()` echos "Sparta" to the screen, and then returns nothing for `funcMain()` to use. That means `funcMain()` runs with no input.

Change `echo "Sparta"` to `return "Sparta"`

```
function funcChild(){
    return "Sparta";
}

function funcMain($panic){
    echo "This is $panic";
}

funcMain(funcChild()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:17:48.040

```
function funcChild(){
    return "Sparta";
}

function funcMain($panic){
    echo "This is $panic";
}

funcMain(funcChild()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:18:54.563

这就像数学，由内而外开始，你必须生成一个返回而不是直接打印

```
function funcChild(){
    return "Sparta"; // return ... not direct print!
}

function funcMain($panic){
    echo "This is $panic";
}

funcMain(funcChild()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T12:22:09.470

为什么不将您的代码更改为：

```
function funcMain($panic) {
  echo "This is $panic";
} 
```

完成了吗？我看不出您有任何理由想要或需要做您正在尝试的事情。但是，您获得结果的原因是对 funcChild 的调用是作为 funcMain 的参数发生的。因此，funcChild 先执行，然后 funcMain 执行。

如果您绝对必须做您正在尝试的事情，那么 funcChild(funcMain()) 应该是如何做到的。

# sql-server-2008-r2 - SQL查询细化

> ID：15763880
> 
> 赞同：1
> 
> 时间：2013-04-02T12:15:46.877
> 
> 标签：sql-server-2008-r2

我有一个查询通常需要大约 15 分钟才能运行，我想看看我是否遗漏了一些东西来改进它并让它运行得更快。任何帮助，将不胜感激。

企业表和 AD 表都有大约 2000 条唯一记录。在 2k8r2 服务器、8gb ram、2 vcpu、sql 2k8r2 上运行它。

```
select
    distinct dnsname,
    description,
    os,
    role,
    lastlogontimestamp
from
    [dbo].[ActiveDirectory]
    where AD_PULL_DATE = '4/2/2013'
    and role in ('DELEGATE',
                'NO_PWDREQD',
                'ENABLED',
                'NO_PWDEXP')
    and dnsname not in (select distinct dnsname from Enterprise) 
```

# c# - 根据条件获取 DataSet.Tables 行数

> ID：15763881
> 
> 赞同：2
> 
> 时间：2013-04-02T12:15:53.757
> 
> 标签：c#, datatable

下面的代码每次都返回值 0。我正在尝试过滤数据表并获取行数。为了说明此处的示例，我将条件设置为值 250，以便在表 2 的 ID 列中查找。

我该如何解决？

```
var count = (from row in MyDatabaseDataSet.Tables["Table2"].AsEnumerable() where string.Equals(row["ID"].ToString(), 250)) select row).Count();
MessageBox.Show(Convert.ToString(count)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:18:32.747

试试那个：

```
var count = (from row in MyDatabaseDataSet.Tables["Table2"].AsEnumerable()
             where row.Field<int>("ID") == 250
             select row).Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:20:04.510

使用方法语法：

```
int rowCount = MyDatabaseDataSet.Tables["Table2"].AsEnumerable()
    .Count(r => r.Field<int>("ID") == 250); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:05:31.607

好的 emmmmmmm 好吧，这……很尴尬……我完全忘记在调用代码之前用第二个表填充数据集。这是我忘记的：

```
// TODO: This line of code loads data into the 'showsDatabaseDataSet.AllEpisodes' table. You can move, or remove it, as needed.
            this.MyTableAdapter.Fill(this.MyDatabaseDataSet.Table2); 
```

它现在正在工作，谢谢大家！

# php - 网页过期IE8

> ID：15763882
> 
> 赞同：0
> 
> 时间：2013-04-02T12:15:58.123
> 
> 标签：php, javascript, browser, internet-explorer-8

我们的一些客户在我们网站的 IE8 中遇到“网页已过期”错误。我自己在 IE8 中尝试过，但没有任何问题，并且听说这可能与在 Internet 选项下选中“不将加密的页面保存到磁盘”有关。我在浏览器上启用了此功能，但仍然无法复制问题。

有问题的页面有一个表单，该表单由 javascript 自动提交，然后用 PHP 处理。然后它在处理后重定向到另一个页面。这里有什么可能是问题的根源吗？

谢谢！

```
<script language="JavaScript" type="text/JavaScript">
function doSubmit()
{
this.document.autoForm.submit();
}
//-->
</script>
</head>

<body onLoad="window.setTimeout('doSubmit()', 1000)">
<form name="autoForm" method="POST" action="process.php">
<input type="hidden" name="handlerID" value="1">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:30:45.257

当您尝试返回（通过浏览器的“返回”按钮）到您刚刚`POST`编辑数据的页面时，通常会出现“网页已过期”消息。

基本上，想象一下如果您尝试创建一个新用户。您的新用户表单获取用户名、密码并将`POST`其发送到“**创建用户**”页面。然后，此页面会将您转到“**欢迎访问站点**”页面。

如果您要回击，您的浏览器会尝试将您发送回“**创建用户**”页面。但是您的浏览器会识别出您只是`POST`在此处编辑数据。

“网页已过期”是 IE 询问用户是否愿意重新提交表单（并创建第二个用户），或者他们是否愿意在没有任何`POST`变量的情况下重新加载页面的方式。

* * *

## 你如何解决这个问题？

如果您发送的数据很小（在这种情况下它看起来只是一个数字），那么可能的解决方法是将这个值传递给`process.php`with`GET`而不是`POST`. `GET`请求传统上不会创建或删除任何内容，因此您的浏览器可以再次将您发送到那里。

# php - 我看不到通过 PHP/MySQL 创建谷歌地图的标记图标

> ID：15763886
> 
> 赞同：0
> 
> 时间：2013-04-02T12:16:11.627
> 
> 标签：php, javascript, xml, google-maps

我有一个 MySQL 表，每行都有纬度和经度坐标。按照[这些说明](https://developers.google.com/maps/articles/phpsqlajax_v3?hl=es#createmap)，我创建了一个生成此 XML 代码的 php 文件：

```
<markers>
<marker name="Altopascio" anno="b. dal 1991 al 2000" gruppi="Sinti" affollamento="da 26 a 50" lat="10.6744775772094" lng="43.8144836425781" criticita="bassa" lat2="4852647" lng2="1634697"/>
<marker name="Buggiano" anno="a. fino al 1990" gruppi="Rom istriani" affollamento="da 51 a 100" lat="10.7345352172851" lng="43.8763999938964" criticita="nessuna" lat2="4859624" lng2="1639383"/>
<marker name="Carrara - Insediamento di Lavello" anno="a. fino al 1990" gruppi="Rom Ex Iugoslavia" affollamento="da 26 a 50" lat="10.1012363433837" lng="44.0793380737304" criticita="media" lat2="4881291" lng2="1588201"/>
[...]
</markers> 
```

然后，仍然按照 Google Dev 的说明，我使用以下代码创建了地图：

```
 <script type="text/javascript">
//<![CDATA[

var customIcons = {
  nessuna: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bassa: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  media: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  alta: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_yellow.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(43.7639427185058, 11.3140087127685),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("gisajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    //alert(markers.length);
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      //alert(i);
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>";
      var icon = customIcons[criticita] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
</script> 
```

我不明白为什么我在地图上看不到标记图标。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:34:23.910

您将图标设置为，`customIcons[criticita]`但我认为应该是`customIcons[markers[i].getAttribute("criticita")]`

你也这样做`new google.maps.InfoWindow;`，但应该是`new google.maps.InfoWindow();`

# ember.js - Ember.js RC2 弃用警告：register("store", "main")

> ID：15763887
> 
> 赞同：5
> 
> 时间：2013-04-02T12:16:13.583
> 
> 标签：ember.js, ember-data

升级到 Ember.js RC2 后，我收到以下弃用警告：

`DEPRECATION: register("store", "main") is now deprecated in-favour of register("store:main");`

我必须在这个最小的应用程序中进行哪些更改才能修复它？

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:53:22.740

安装最新版本`ember-data.js`并将代码更新为：

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
}); 
```

解决了这个问题。谢谢@finn-maccool！

# c# - mvc raw 没有输出

> ID：15763889
> 
> 赞同：2
> 
> 时间：2013-04-02T12:16:19.973
> 
> 标签：c#, razor, asp.net-mvc-4

我已将问题简化为最简单的形式。为什么这不会在我的页面上输出任何内容？

```
@if(true){Html.Raw("<a>test</a>");} 
```

**编辑**

但是，这确实有效：

```
@if ( true ) { <span>@Html.Raw( "<a>test</a>" )</span>} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:40:21.237

我相信这是因为 Razor 引擎对“如果需要”或“如何处理”您编写的第一类代码感到困惑。如果你这样做，那将起作用：

```
@if(true){@Html.Raw("<a>test</a>");} 
```

注意语法`@`开头的。[Scott Guthrie 在这里对此进行了](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)`Html`解释。它的摘要是这样的：

> 但是，并非所有内容容器块都以标记元素标记开头，并且存在 Razor 解析器无法隐式检测内容块的情况。
> 
> Razor 通过使您能够使用代码块中的 @: 字符序列显式指示内容行的开头来解决此问题。@: 序列表示后面的内容行应被视为内容块。

现在我相信这适用于您的具体问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:41:38.773

```
@if(true){Html.Raw("<a>test</a>");} 
```

上面的行不会为您提供 html 输出，因为 razor Parser 通过读取开始和结束字符或 HTML 元素来推断代码结束。因为，您的代码在 if 条件中不包含任何 html 元素，所以解析器将把它评估为表达式，就像我们在控制器中所做的那样。

```
@if ( true ) { <span>@Html.Raw( "<a>test</a>" )</span>} 
```

这是有效的，因为`@Html.Raw`它被包裹在 span 元素下。

# doctrine-orm - 是否可以转换为 DQL 或 Doctrine Query Builder

> ID：15763894
> 
> 赞同：2
> 
> 时间：2013-04-02T12:16:48.007
> 
> 标签：doctrine-orm, doctrine, query-builder

我有 3 个带列的表

```
A:
    id
B:
    id
    a_id
C:
    id
    b.id 
```

使用本机查询：

```
SELECT a.id, b.id, c.id
FROM A as a 
LEFT JOIN B as b 
    INNER JOIN C as c ON b.id = c.b_id
ON a.id = b.a_id 
```

我努力了

```
SELECT a.id, b.id, c.id 
    FROM App\HomeBundle\Entity\A as a
    LEFT JOIN App\HomeBundle\Entity\B as b
        INNER JOIN App\HomeBundle\Entity\C as c
        ON c.id = c.bId
    ON a.id = b.aId 
```

我得到了错误：

```
Error: Expected Literal, got 'JOIN' 
```

是否可以将我的本机查询转换为 DQL 或查询生成器？如果可能，它会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:05:37.140

这只是一个猜测，但评论太长了。如果我完全不在基地，我会删除这个答案。

假设您的本机查询在语法上是正确的，也许 MySQL 正在将最后一个`ON`条件应用于`INNER JOIN`between `b`and的结果`c`。如果这是真的，看看这是否会给你同样的结果：

```
SELECT a.id, b.id, c.id 
FROM App\HomeBundle\Entity\A as a
LEFT JOIN (
    SELECT bx.aID
    FROM   App\HomeBundle\Entity\B as bx
    INNER JOIN App\HomeBundle\Entity\C as c
    ON    bx.id = c.bId
    ) b
ON a.id = b.aId 
```

请注意，我更正了我认为您尝试的解决方案中的错误（您所说的`ON c.id = c.bId`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T15:19:43.367

这是一个较老的问题，但我相信您需要加入关系，而不是实体。

例如，而不是

```
SELECT a
    FROM Entity\A as a
    LEFT JOIN Entity\B as b 
```

它应该是：

```
SELECT a
    FROM Entity\A as a
    LEFT JOIN a.entityB as b 
```

如果不清楚，a.entityB 是 A 实体的属性，称为“entityB”。该属性定义了 A 和 B 之间的关系。

当您只是将实体连接到实体时，Doctrine 不知道它们是如何相关的。但是，如果您基于属性进行 JOIN，Doctrine 可以使用注解（或其他映射）来确定 A 和 B 的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T02:15:26.297

在使用教义时，我总是不得不使用`WITH`关键字而不是。`ON`

# ruby-on-rails - 应该 gem allow_value 方法

> ID：15763895
> 
> 赞同：0
> 
> 时间：2013-04-02T12:16:48.503
> 
> 标签：ruby-on-rails, rspec, shoulda

**old_spec.rb**

```
it { should allow_value(:nil).for(:invoice_type) }
it { should allow_value(:customer_invoice).for(:invoice_type) }
it { should allow_value(:creative_invoice).for(:invoice_type) }
it { should_not allow_value(:other).for(:invoice_type) } 
```

我的规范文件中有这些代码，我将它们转换如下。

**new_spec.rb**

```
 it { should ensure_inclusion_of(:invoice_type).in_array(
     [:nil,:customer_invoice,:creative_invoice]) } 
```

我想知道在第二个文件（new_spec.rb）中我是否必须写下这一行。

```
it { should_not allow_value(:other).for(:invoice_type) } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:45:11.743

根据`ensure_inclusion_of`工作原理的描述，您不需要明确阻止其他值。

当然，这很容易自己检查......

# javascript - 以编程方式滑回上一页

> ID：15763903
> 
> 赞同：1
> 
> 时间：2013-04-02T12:17:07.147
> 
> 标签：javascript, android, jquery, html, jquery-mobile

我希望能够在 javascript 函数（android/HTML5 项目）中滑回上一页。我可以通过 回到上一页`history.back()`，但是，这段代码不会滑回。

是否有可能让它也做滑动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:30:15.927

# 刷卡解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/ru3D3/](http://jsfiddle.net/Gajotres/ru3D3/)

```
$(document).off('swipeleft').on('swipeleft', 'article', function(event){    
    var nextpage = $.mobile.activePage.next('article[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
        $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
    }     
});

$(document).off('swiperight').on('swiperight', 'article', function(event){      
    history.back();
    return false;
    event.handled = true;
}); 
```

此代码用于返回上一页：

```
history.back();
return false; 
```

在这一行：

```
$(document).off('swiperight').on('swiperight' 
```

**.off(..)**用于防止在页面转换期间绑定多个滑动事件。如果您有更多问题，请不要犹豫。

# 按键解决方案：

工作示例也在这里：http: [//jsfiddle.net/Gajotres/ru3D3/](http://jsfiddle.net/Gajotres/ru3D3/)

```
$(document).on('pagebeforeshow', '[ data-role="page"]', function(){  
    $(document).off('click touchStart').on('click touchStart', '#slide-back-btn', function(){       
        history.back();
        return false;       
    });    
}); 
```

# jquery-ui-dialog - jQuery UI 对话框 - 通过实例方法检查是否存在

> ID：15763909
> 
> 赞同：57
> 
> 时间：2013-04-02T12:17:16.670
> 
> 标签：jquery-ui-dialog

我想使用`instance`方法来测试 jQuery UI 对话框小部件是否已初始化。关于[API](http://api.jqueryui.com/dialog/#method-instance)，这是可能的，但它对我不起作用：

`Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'instance'`

演示：http: [//jsfiddle.net/mDbV7/](http://jsfiddle.net/mDbV7/)

**更新：**

这是文档中的错误，`instance`方法将从版本 1.11.0 开始提供，请参阅[此问题](https://github.com/jquery/api.jqueryui.com/issues/117)。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-02T12:20:25.957

最新版本的 jQuery UI 不再允许您在尚未初始化的项目上调用 UI 方法。我刚刚将它们包装在 if 语句中，例如：

```
if ($("#divToBeDialoged").hasClass('ui-dialog-content')) {
    // do whatever
} else {
    // it is not initialized yet
} 
```

编辑：更改班级名称，谢谢@dmnc

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-05T05:18:54.333

使用完对话框后，清空和销毁对话框也是一个好习惯。我通常在每个对话框的关闭事件中使用此代码

```
$("#myDialog").dialog({
    // other options
    close: function(event, ui) {
        $(this).empty().dialog('destroy');
    }
} 
```

这是我的建议，而不是每次都询问实例中是否存在对话框，请确保每个对话框都自行清理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-23T09:32:31.587

您可以使用：

```
if($('#id').is(':ui-dialog')) {
} 
```

或者

```
 var obj = $('<div>test</div>').dialog();
    if (obj.is(':ui-dialog')) {
      alert('I\'m a dialog')
    }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-29T12:51:23.980

如果您从 html 代码中的现有 id 制作该对话框，例如以下示例：

```
$('#main').dialog({}); 
```

请注意，`dialog()`将类添加到为它工作而生成`ui-dialog`的`<div>`父元素中。在`#main`元素处，添加的类`dialog()`是：`ui-dialog-content`和`ui-widget-content`（在 jquery-ui-1.9.2 中）。因此，在这种情况下，按照@jbabey 中的示例，您可以检查现有对话框的执行情况：

```
if ($('#main').hasClass('ui-dialog-content')) {
    // do whatever
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-11T07:01:43.400

```
 if ($('#update').is(':data(dialog)')) 
     {
              //#update has dialog
     }
     else
     {
              //#update does't have dialog
     } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-30T05:48:55.417

对于 jQuery UI - v1.10.3

```
if($( "#myDialog" ).is(':data(uiDialog)')){//is(':data(dialog)') does not work
    //Dialog exist
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T12:29:49.743

另一种方法是

```
$('.element').is(':data(dialog)'); 
```

# iphone - iPhone：Sharepoint GetListItemChangesSinceToken 方法递归返回项目

> ID：15763911
> 
> 赞同：4
> 
> 时间：2013-04-02T12:17:18.380
> 
> 标签：iphone, ios, sharepoint

我正在将 sharepoint Web 服务与我的 iPhone 应用程序集成。完成`GetListCollection`和`GetListItems`服务集成。在尝试使用`GetListItemChangesSinceToken`服务进行同步而不是使用`GetListItems`服务时，我在响应中获取了文档库的所有项目，这意味着它会递归地从该文档库中提取所有项目，而我只需要特定于该库的项目（不是子文件夹项目）

这是我的文件夹层次结构

测试 -> 测试 1(SF)，测试 doc1(D)，测试 doc2(D) -> 测试 2(SF)，测试 1 doc1(D)

SF - 子文件夹；D - 文件

我正在使用的肥皂消息是：

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>
                         <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-
                         instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" 
                         xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">
                         <soap:Body>
                         <GetListItemChangesSinceToken 
                         xmlns=\"http://schemas.microsoft.com/sharepoint/soap/\">
                         <listName>%@</listName>
                         <queryOptions><QueryOptions>
                         <IncludeMandatoryColumns>TRUE</IncludeMandatoryColumns>
                         <DateInUtc>TRUE</DateInUtc>
                         <Folder>%@</Folder></QueryOptions>
                         </queryOptions>
                         </GetListItemChangesSinceToken>
                         </soap:Body></soap:Envelope>",listName,pathRef]; 
```

我为获取第一级文件夹（测试）的项目而传递的参数是 `listName`：测试 `pathRef`：测试

此请求返回测试文件夹中的所有项目（测试 1（SF）、测试 doc1（D）、测试 doc2（D）、测试 2（SF）、测试 1 doc1（D）），而我只需要特定于那个的项目文件夹（测试 1(SF)、测试 doc1(D)、测试 doc2(D)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T06:06:33.397

看看这个[http://msdn.microsoft.com/en-us/library/lists.lists.getlistitemchangessincetoken(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitemchangessincetoken%28v=office.12%29.aspx)上的 MSDN 文章，特别是关于 queryOptions 和文件夹部分的部分。

您只需为根文件夹添加一个文件夹选项，这是根据此博客文章的服务器相对路径：http: [//blogs.msdn.com/b/sharepointdeveloperdocs/archive/2008/01/21/synchronizing -with-windows-sharepoint-services-part-1.aspx](http://blogs.msdn.com/b/sharepointdeveloperdocs/archive/2008/01/21/synchronizing-with-windows-sharepoint-services-part-1.aspx)

所以试试

```
<folder>site/list/</folder> 
```

# visual-studio - Editing Orchard CMS themes in Visual Studio

> ID：15763912
> 
> 赞同：3
> 
> 时间：2013-04-02T12:17:20.553
> 
> 标签：visual-studio, orchardcms

I have installed a new theme for my Orchard CMS site, but the new theme doesn't want to appear in the "Solution Explorer" window in Visual Studio 2010\. The theme works fine on the site and the folder appears when looking in "Windows Explorer". Does anyone know why this might be?

The default theme, "TheThemeMachine" shows up fine why not installed themes from the gallery.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T12:59:15.997

尝试将新主题包含在您的解决方案中。

选择 Themes 项目（TheThemeMachine 所在的位置），单击解决方案资源管理器顶部的 Show All Files，右键单击 Themes 项目下的新主题文件夹，然后选择 Include In Project。再次单击显示所有文件以取消选择该选项。

# maven - 如何在没有 Antrun 插件的情况下在 Maven 中回显？

> ID：15763915
> 
> 赞同：13
> 
> 时间：2013-04-02T12:17:25.993
> 
> 标签：maven, logging, maven-antrun-plugin

如何在执行 mvn 命令（在阶段/目标中）时打印到控制台，但不使用 Maven Antrun 插件？

为什么我拒绝 Antrun 解决方案：

*   打印单个消息的代码开销是巨大的。
*   输出没有像 maven 输出那样格式化
*   我无法为消息附加严重性（例如 DEBUG、INFO、ERROR 等）

目前，Ant-echo 看起来像这样（参见“hello world”行）：

```
[INFO] --- maven-antrun-plugin:1.7:run (default) @ ejpd-alertmanager-ear ---
[WARNING] Parameter tasks is deprecated, use target instead
[INFO] Executing tasks
main:
 [echo] hello world
[INFO] Executed tasks
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

但是，我希望它看起来像这样（参见“hello world”行）。

```
[INFO] --- maven-antrun-plugin:1.7:run (default) @ ejpd-alertmanager-ear ---
[WARNING] Parameter tasks is deprecated, use target instead
[INFO] Executing tasks
[INFO] hello world
[INFO] Executed tasks
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

我很肯定，我在这里遗漏了一些东西，因为我不能成为第一个提出这个要求的人。感谢您提供任何明智的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:10:43.547

你应该试试[Maven Echo 插件](http://khmarbaise.github.com/Maven-Echo-Plugin/)：

```
<plugin>
  <groupId>com.soebes.maven.plugins</groupId>
  <artifactId>maven-echo-plugin</artifactId>
  <version>0.1</version>
  <executions>
    <execution>
      <phase>initialize</phase>
      <goals>
        <goal>echo</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <echos>
      <echo>This is the Text which will be printed out.</echo>
    </echos>
  </configuration>
</plugin> 
```

或者进一步深入了解[插件的集成测试。](https://github.com/khmarbaise/Maven-Echo-Plugin/blob/master/src/it/basicTest/pom.xml)

可通过 Maven Central 获得。顺便说一句：如果您有进一步的要求/改进，只需提交[问题](https://github.com/khmarbaise/Maven-Echo-Plugin/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-03T05:10:45.997

您可以使用在[Maven Central](http://search.maven.org/#artifactdetails%7Ccom.github.ekryd.echo-maven-plugin%7Cecho-maven-plugin%7C1.2.0%7Cmaven-plugin)中发布的[Björn Ekryd](https://github.com/Ekryd)的[Echo Maven 插件](https://github.com/Ekryd/echo-maven-plugin)。

它具有 Maven 插件所需的正常数量的 XML，输出的格式与其他 Maven 日志行一样，并且您可以为消息分配严重性级别（默认为 INFO）。

```
<plugin>
    <groupId>com.github.ekryd.echo-maven-plugin</groupId>
    <artifactId>echo-maven-plugin</artifactId>
    <version>1.2.0</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>echo</goal>
            </goals>
            <configuration>
                <message>war has changed</message>
                <level>INFO</level>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

```
[INFO] --- maven-war-plugin:2.4:war (default-war) @ mymodule ---
[INFO] Packaging webapp
[INFO] Processing war project
[INFO]
[INFO] --- echo-maven-plugin:1.2.0:echo (default) @ mymodule ---
[INFO] war has changed
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

此外，这个插件有[95% 的代码覆盖率](https://coveralls.io/github/Ekryd/echo-maven-plugin)，这很酷。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-18T11:48:25.143

您可以为此使用[Groovy Maven 插件](http://docs.codehaus.org/display/GMAVEN/Home)。

```
<plugin>                                                         
    <groupId>org.codehaus.gmaven</groupId>                       
    <artifactId>groovy-maven-plugin</artifactId>                 
    <version>2.0</version>                                       
    <executions>                                                 
        <execution>                                              
            <phase>validate</phase>                              
            <goals>                                              
                <goal>execute</goal>                             
            </goals>                                             
            <configuration>                                      
                <source>                                         
                    log.info('Test message: {}', 'Hello, World!')
                </source>                                        
            </configuration>                                     
        </execution>                                             
    </executions>                                                
</plugin> 
```

上面的配置将产生以下输出：

```
[INFO] Test message: Hello, World! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:52:17.360

我自己没有尝试过，但这里有一个插件可能会有所帮助：

[http://code.google.com/p/maven-echo-plugin/](http://code.google.com/p/maven-echo-plugin/)

# c - 如何从对象或静态库创建共享库

> ID：15763923
> 
> 赞同：1
> 
> 时间：2013-04-02T12:17:39.873
> 
> 标签：c, linux, makefile, static-libraries

我想获得用于动态链接的共享库。

我有目标文件和静态文件，但没有共享库文件。

我可以以某种方式将它们转换为创建共享库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:22:49.927

请参阅[http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)。

基本上，您可以像这样创建一个共享库：

```
gcc -shared -Wl,-soname,libfoo.so.1 -o libfoo.so.1.0.1 file1.o file2.o file3.o ... 
```

生成的文件将命名为`libfoo.so.1.0.1`. 但是，您必须确保`*.o`文件是使用`-fPIC`位置无关代码的标志创建的，否则它将不起作用。

# c++ - c++11中未使用的参数

> ID：15763937
> 
> 赞同：86
> 
> 时间：2013-04-02T12:18:17.940
> 
> 标签：c++, c++11, unused-variables

在 c++03 及更早版本中，为了禁用关于未使用参数的编译器警告，我通常使用这样的代码：

```
#define UNUSED(expr) do { (void)(expr); } while (0) 
```

例如

```
int main(int argc, char *argv[])
{
    UNUSED(argc);
    UNUSED(argv);

    return 0;
} 
```

但是宏不是 C++ 的最佳实践，所以。c++11标准有没有更好的解决方案？我的意思是我可以摆脱宏吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-04-02T12:19:26.373

您可以省略参数名称：

```
int main(int, char *[])
{

    return 0;
} 
```

在 main 的情况下，您甚至可以完全省略参数：

```
int main()
{
    // no return implies return 0;
} 
```

请参阅 C++11 标准中的“§ 3.6 开始和终止”。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-05-27T07:59:48.100

`<tuple>`在**C++11**中有一个，其中包括准备使用[`std::ignore`](http://en.cppreference.com/w/cpp/utility/tuple/ignore)的对象，它允许我们编写（很可能不会产生运行时开销）：

```
void f(int x)
{
    std::ignore = x;
} 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-04-02T12:55:23.637

为此，我使用了一个带有空主体的函数：

```
template <typename T>
void ignore(T &&)
{ }

void f(int a, int b)
{
  ignore(a);
  ignore(b);
  return;
} 
```

我希望任何认真的编译器都能优化函数调用，并为我消除警告。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2013-04-03T11:41:10.970

要“禁用”这个警告，最好避免写参数，只写类型。

```
void function( int, int )
{
} 
```

或者，如果您愿意，请将其注释掉：

```
void function( int /*a*/, int /*b*/ )
{
} 
```

您可以混合命名和未命名的参数：

```
void function( int a, int /*b*/ )
{
} 
```

使用**C++17**你有 [[maybe_unused]] 属性说明符，比如：

```
void function( [[maybe_unused]] int a, [[maybe_unused]] int b )
{
} 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2013-04-02T12:20:12.473

**没有什么等价的，不。**

所以你坚持使用相同的旧选项。您愿意完全省略参数列表中的名称吗？

```
int main(int, char**) 
```

当然，在特定情况下`main`，您可以简单地省略参数本身：

```
int main() 
```

还有典型的特定于实现的技巧，例如 GCC 的`__attribute__((unused))`.

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-04-02T12:24:23.867

宏可能并不理想，但它们在这个特定目的上做得很好。我会说坚持使用宏。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-04-02T18:11:48.960

你有什么反对旧的和标准的方式？

```
void f(int a, int b)
{
  (void)a;
  (void)b;
  return;
} 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2014-06-19T15:47:37.870

Boost 标头[`<boost/core/ignore_unused.hpp>`](http://www.boost.org/doc/libs/master/libs/core/doc/html/core/ignore_unused.html)(Boost >= 1.56) 为此目的定义了函数 template `boost::ignore_unused()`。

```
int fun(int foo, int bar)
{
  boost::ignore_unused(bar);
#ifdef ENABLE_DEBUG_OUTPUT
  if (foo < bar)
    std::cerr << "warning! foo < bar";
#endif

  return foo + 2;
} 
```

* * *

PS C++17 具有[`[[maybe_unused]]`](https://en.cppreference.com/w/cpp/language/attributes/maybe_unused)抑制未使用实体的警告的属性。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2013-04-02T12:29:14.783

没有什么新东西可用。

最适合我的是在实现中注释掉参数名称。这样，您就可以摆脱警告，但仍然保留有关参数是什么的一些概念（因为名称可用）。

您的宏（以及所有其他强制转换为 void 的方法）的缺点是您可以在使用宏后实际使用该参数。这会使代码更难维护。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-21T10:39:03.390

我真的很喜欢为此使用宏，因为它可以让您更好地控制何时有不同的调试版本（例如，如果您想在启用断言的情况下进行构建）：

```
#if defined(ENABLE_ASSERTS)
  #define MY_ASSERT(x) assert(x)
#else
  #define MY_ASSERT(x)
#end

#define MY_UNUSED(x)

#if defined(ENABLE_ASSERTS)
  #define MY_USED_FOR_ASSERTS(x) x
#else
  #define MY_USED_FOR_ASSERTS(x) MY_UNUSED(x)
#end 
```

然后像这样使用它：

```
int myFunc(int myInt, float MY_USED_FOR_ASSERTS(myFloat), char MY_UNUSED(myChar))
{
  MY_ASSERT(myChar < 12.0f);
  return myInt;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-19T18:20:51.490

对于时间关键的代码段，我有自己的实现。我一直在研究用于减速的时间关键代码，发现这个实现消耗了我正在优化的时间关键代码的 2%：

```
#define UTILITY_UNUSED(exp) (void)(exp)
#define UTILITY_UNUSED2(e0, e1) UTILITY_UNUSED(e0); UTILITY_UNUSED(e1)
#define ASSERT_EQ(v1, v2) { UTILITY_UNUSED2(v1, v2); } (void)0 
```

时间关键代码已将`ASSERT*`定义用于调试目的，但在发布时它显然已被删除，但是......似乎这个在以下位置产生了更快的代码`Visual Studio 2015 Update 3`：

```
#define UTILITY_UNUSED(exp) (void)(false ? (false ? ((void)(exp)) : (void)0) : (void)0)
#define UTILITY_UNUSED2(e0, e1) (void)(false ? (false ? ((void)(e0), (void)(e1)) : (void)0) : (void)0) 
```

原因在于双重`false ?`表达。它以某种方式在发布时产生了更快的代码，并具有最大的优化。

我不知道为什么这更快（似乎是编译器优化中的一个错误），但对于这种代码情况，它至少是一个更好的解决方案。

**注意：这里最重要的是，****如果没有**上述断言或版本中未使用的宏，时间关键代码会变慢。换句话说，双重`false ?`表达式出人意料地有助于优化代码。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-02-04T04:52:42.950

*windows.h*定义*UNREFERENCED_PARAMETER*：

```
#define UNREFERENCED_PARAMETER(P) {(P) = (P);} 
```

所以你可以这样做：

```
#include <windows.h>
#include <stdio.h>
int main(int argc, char **argv) {
  UNREFERENCED_PARAMETER(argc);
  puts(argv[1]);
  return 0;
} 
```

或在 Windows 之外：

```
#include <stdio.h>
#define UNREFERENCED_PARAMETER(P) {(P) = (P);}
int main(int argc, char **argv) {
  UNREFERENCED_PARAMETER(argc);
  puts(argv[1]);
  return 0;
} 
```

# objective-c - How to read point coordinates from a file with Objective-C?

> ID：15763940
> 
> 赞同：0
> 
> 时间：2013-04-02T12:18:25.630
> 
> 标签：objective-c, nspoint

I have a file like this:

```
1.0 1.0
2.0 2.0
-3.0 2.0 
```

each line is the coordinate of a point.

I don't know how to write a code to do following thing: read these coordinates from the file, convert them into double and store them in an array as NSPoint.

BTW, I tried to write Objective-C++, but it seems that ifstream does not work, which is a bug of XCode.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:51:42.500

这样做：

注意：您不能将 NSPoint 存储在 NSArray 中，因为所有集合类都需要 obj-c 对象来存储并且 NSPoint 是结构。所以你需要把它转换成NSValue。

```
NSString *yourPath=[@"~/Desktop/myFile.txt" stringByExpandingTildeInPath];
NSFileHandle *inFile = [NSFileHandle fileHandleForReadingAtPath:yourPath];
NSData  *myData=[inFile readDataToEndOfFile];

NSString *myText=[[NSString alloc]initWithData:myData encoding:NSASCIIStringEncoding];

NSArray *values = [myText componentsSeparatedByString:@"\n"];

NSMutableArray *points=[NSMutableArray new];
for (NSString *string in values) {
    NSArray *lines=[string componentsSeparatedByString:@" "];
    NSPoint point=NSMakePoint([lines[0]floatValue], [lines[1]floatValue]);
    points[points.count]=[NSValue valueWithPoint:point];
}

for (NSValue *value in points) {
    NSLog(@"->%@",value);
} 
```

# javascript - 用 JavaScript 填写输入文件表单

> ID：15763941
> 
> 赞同：8
> 
> 时间：2013-04-02T12:18:29.093
> 
> 标签：javascript, html, html-input, file-io

> **笔记：**
> 
> 下面的答案反映了 2009 年旧版浏览器的状态。现在，您实际上可以在 2017 年使用 JavaScript 动态/编程地设置文件输入元素的值。
> 
> 有关详细信息以及演示，请参阅此问题中的答案：
> [如何以编程方式设置文件输入值（即：拖放文件时）？](https://stackoverflow.com/q/47515232/584192)

我需要用 JavaScript 填写 HTML 表单来设置上传文件的路径。这个表单所属的网络，已经实现了可视化上传，但是

```
<form id="mobile_fileform">
    <input type="file" style="height: 20px; width: 0px; opacity: 0; " id="mobile_fileselect1" multiple="" size="-17">
    <input type="file" style="height: 20px; width: 0px; opacity: 0; " id="mobile_fileselect2" multiple="" size="-17">
    <input type="file" style="height: 20px; width: 0px; opacity: 0; " id="mobile_fileselect3" multiple="" size="-17">
</form> 
```

如何在此表单中设置文件的路径以及如何使用 JavaScript 上传它？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T12:21:23.510

出于安全原因，的**value**属性`input:file`是**只读的。**如果要设置它，则需要在服务器端进行。

结果，您要求做的事情是**不可能的**。考虑一下含义：任何网页都可以从某人的计算机上传任何文件，只要他们知道路径。

# node.js - Express node.js error: unknown filter ":javascript"

> ID：15763943
> 
> 赞同：1
> 
> 时间：2013-04-02T12:18:31.343
> 
> 标签：node.js, express, instagram

I am following the documentation from here: **[https://github.com/Instagram/Realtime-Demo](https://github.com/Instagram/Realtime-Demo)**

Successfully installed all the libraries, however got this error on `localhost` unknown filter ":javascript"

The attached screenshot URL is the output when I hit the `localhost` in browser.

Any one has similar experience? How to fix? Very much appreciate!

screenshot: **[http://cl.ly/image/2N1M2f1p240n](http://cl.ly/image/2N1M2f1p240n)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:29:01.693

演示很旧，`:javascript`过滤器不再存在。

替换这个：

```
:javascript
  | socket.connect();
  | $(document).ready(Media.positionAll); 
```

有了这个：

```
script
  socket.connect();
  $(document).ready(Media.positionAll); 
```

（虽然我不能保证你不会遇到任何其他问题）

# angularjs - AngularJS无法读取未定义错误的属性'childNodes'

> ID：15763946
> 
> 赞同：4
> 
> 时间：2013-04-02T12:18:39.793
> 
> 标签：angularjs

现在在角度代码中的子函数中的compileNodes函数中，有以下几行：

```
} else if (childLinkFn) {
  childLinkFn(scope, node.childNodes, undefined, boundTranscludeFn);
} 
```

在我的自定义选项卡指令中，我收到错误：无法读取未定义的属性“childNodes”：尝试使用以下代码手动编译指令的模板（以便向选项卡动态添加点击功能）时：

```
nucleusAngular.directive('nagTabs', ['$timeout', '$http', '$compile', 'nagDefaults', function($timeout, $http, $compile, nagDefaults){
    return {
        restrict: 'A',
    scope: {
      options: '=nagTabs'
    },
        compile: function() {
            return {
                pre: function(scope, element, attributes) {
                    var template = $('<div />').append($(element).html());
                    scope.options = nagDefaults.getTabsOptions(scope.options);

                    template.find('.tabs .tab').each(function(key, value) {
                        template.find('.tabs .tab:nth-child(' + (key + 1) + ')').attr('ng-click', 'switchTab(\'' + $(this).data('tab') + '\')');
                    });

                    element.html($compile(template)(scope));
                    $(element).addClass('nag-tabs');
                },
                post: function(scope, element, attributes) {
                    var $element = $(element);
                    scope.switchTab = function(tab) {
                        if(angular.isNumber(tab)) {
                            //todo: this should work
                            //tab = $(element).find('.tabs li:nth-child(' + tab + ')').data('tab');
                            tab = $(element).find('.tabs .tab:nth-child(' + (tab + 1) + ')').data('tab');
                    }

                        $(element).find('.tabs .tab').removeClass('active');
                        $(element).find('.tabs .tab[data-tab="' + tab + '"]').addClass('active');

                        $(element).find('.tab-content-item').removeClass('active');
                        $(element).find('.tab-content-item[data-tab="' + tab + '"]').addClass('active');
                    }

                    //load the default tab
                    $timeout(function(){scope.switchTab(scope.options.defaultTab);}, 0);
                }
            };
        }
    }
}]); 
```

HTML：

```
<div nag-tabs="tabsOptions">
    <ul class="tabs">
        <li data-tab="html" ng-click="switchTab('html')">HTML</li>
        <li data-tab="javascript" ng-click="switchTab('javascript')">JavaScript</li>
    </ul>
    <div class="tab-content">
        <div data-tab="html" class="tab-content-item">
            html...
        </div>
        <div data-tab="javascript" class="tab-content-item">
            javascript...
        </div>
    </div>
</div> 
```

现在也许我没有正确编译模板，但是我已经尝试了我能想到的每一种方法来编译模板，我要么得到我提到的错误，要么功能不起作用。在阅读之后，似乎这个错误可能会出现一个空的文本节点。由于我在代码中尝试了所有我能想到的东西，所以我进入了角度代码并将三行修改为如下所示（我只修改了第一行）：

```
} else if (childLinkFn && node) {
  childLinkFn(scope, node.childNodes, undefined, boundTranscludeFn);
} 
```

这将验证节点是否确实存在，以查看它是否应该调用 childLinkFn（虽然我不能 100% 确定此更改的效果，但似乎如果节点不等于某个值，则不应执行 childLinkFn）。有了这个代码，我的标签代码就可以完美地工作（而且我没有注意到我的其他指令中的任何其他问题）。然后我克隆了 angular.js 存储库并应用了这个更改，构建了 angular，然后执行了单元测试并结束了 2 个最终测试，它们都通过了。

我的问题是我在如何为选项卡编译模板时是否做错了我应该将此代码更改作为拉取请求提交（注意我正在使用 1.1.3 版本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:15:20.090

最后，我切换了指令的格式。不完全确定这是如何工作的，并且使用 pre/post 返回一个对象不会，但它确实有效。指令代码现在如下所示：

```
nucleusAngular.directive('nagTabs', ['$timeout', '$http', '$compile', 'nagDefaults', function($timeout, $http, $compile, nagDefaults){
return {
    restrict: 'A',
scope: {
  options: '=nagTabs'
},
    compile: function(element, attributes, transclude) {
  $(element).find('.tabs .tab').each(function(key, value) {
    $(element).find('.tabs .tab:nth-child(' + (key + 1) + ')').attr('ng-click', 'switchTab(\'' + $(this).data('tab') + '\')');
  });

  //element.html($compile(template)(scope));
  $(element).addClass('nag-tabs');

return function(scope, element, attributes) {
    scope.options = nagDefaults.getTabsOptions(scope.options);
    var $element = $(element);
    scope.switchTab = function(tab) {
      if(angular.isNumber(tab)) {
        //todo: this should work
        //tab = $(element).find('.tabs li:nth-child(' + tab + ')').data('tab');
        tab = $(element).find('.tabs .tab:nth-child(' + (tab + 1) + ')').data('tab');
      }

      $(element).find('.tabs .tab').removeClass('active');
      $(element).find('.tabs .tab[data-tab="' + tab + '"]').addClass('active');

      $(element).find('.tab-content-item').removeClass('active');
      $(element).find('.tab-content-item[data-tab="' + tab + '"]').addClass('active');
    }

    //load the default tab
    $timeout(function(){scope.switchTab(scope.options.defaultTab);}, 0);
        }
    }
}
}]); 
```

# android - Open url in browser but do not show the url

> ID：15763947
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:18:39.753
> 
> 标签：android, android-webview

I am creating a shortcut at home screen of device to open an url in browser as

```
public void addBookmarks(MyBookMarks bookMarks) {
    Log.d(TAG, "Creating Bookmarks for " + bookMarks.getUrl()); 
    final Intent intent = new Intent();
    final Intent shortcutIntent = new Intent(Intent.ACTION_VIEW, 
            Uri.parse(bookMarks.getUrl()));
    long urlHash = bookMarks.getUrl().hashCode();
    long uniqueId = (urlHash << 32) | shortcutIntent.hashCode();
    shortcutIntent.putExtra(Browser.EXTRA_APPLICATION_ID, Long.toString(uniqueId));
    intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, bookMarks.getLabel());
    if (bookMarks.getBookMarkIcon() != null) {
        intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, 
                Bitmap.createScaledBitmap(bookMarks.getBookMarkIcon(), 128, 128, true));
    } else {
        intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, "");
    }

    //intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, bookMarks.getBookMarkIcon());
    intent.putExtra("duplicate", false);
    intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    //intent.setAction(Intent.ACTION_CREATE_SHORTCUT); 

    this.mContext.sendBroadcast(intent);
} 
```

***Problem***

When I open the shortcut it shows the url into browser, that I want to hide. How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:23:59.493

只需在应用程序中使用 WebView

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.webview);
mWebView = (WebView) findViewById(R.id.webView1);
mWebView.loadUrl("http://www.google.com");

 } 
```

# javascript - 无法在 Jquery 中定义函数：“未捕获的 ReferenceError：未定义函数 1”

> ID：15763949
> 
> 赞同：1
> 
> 时间：2013-04-02T12:18:46.133
> 
> 标签：javascript, jquery

我有：

```
<textarea class="t1" onchange="function1('1','2','3')"></textarea>

<script type="text/javascript">
    $(function() {
        var function1 = function(p1, p2, p3) {
            alert('p1:' + p1 + ' p2:' + p2 + ' p3:' + p3);
        };
    });
</script> 
```

但是，当我更改 textarea 的文本时，什么也没有发生。

我在控制台上收到此错误：

> 未捕获的 ReferenceError：未定义 function1

[**现场小提琴**](http://jsfiddle.net/GgGSs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:20:46.710

像这样试试

```
 <script type="text/javascript">
        var function1 = function(p1, p2, p3) {
            alert('p1:' + p1 + ' p2:' + p2 + ' p3:' + p3);
        };
 </script>

 <textarea class="t1" onchange="function1('1','2','3')"></textarea> 
```

首先你不需要定义（初始化）函数，然后你可以调用它......并且不要在下面定义它

```
$(function(){..HERE..}) 
```

然后它属于**全球范围**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:28:21.340

如果您使用的是 jQuery：

```
<textarea class="t1"></textarea>

<script type="text/javascript">
    $(function() {
        $('.t1').on('change', function(){
            function1('1','2','3');
        });
        var function1 = function(p1, p2, p3) {
            alert('p1:' + p1 + ' p2:' + p2 + ' p3:' + p3);
        };
    });
</script> 
```

[http://jsfiddle.net/U4sx7/](http://jsfiddle.net/U4sx7/)

这让我了解到`change`textarea 上的事件就像`blur`jQuery 一样……不确定，这就是你最终想要的。

**评论后编辑**

```
<textarea class="t1" data-pam1="1" data-pam2="2" data-pam3="3"></textarea>

<script type="text/javascript">
    $(function() {
        var function1 = function(p1, p2, p3) {
                alert('p1:' + p1 + ' p2:' + p2 + ' p3:' + p3);
        };
        $('.t1').on('change', function(){
           var param1 = $(this).data('pam1'),
               param2 = $(this).data('pam2'),
               param3 = $(this).data('pam3');
           function1(param1,param2,param3);
         });
     });
</script> 
```

[http://jsfiddle.net/U4sx7/1/](http://jsfiddle.net/U4sx7/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:29:04.047

1.  更改定义函数的位置（在小提琴中，检查 jQuery 选择框附近的第二个下拉菜单）
2.  将函数定义移到`domReady`声明之外。

* * *

目前，您的函数解析如下：

```
$(window).load(function(){
var function1 = function (p1, p2, p3) {
    alert('p1:' + p1 + ' p2:' + p2 + ' p3:' + p3);
};
}); 
```

你需要它在`head`标签内。`no wrap - in <head>`从下拉列表中选择选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:23:37.270

那是因为您的 function1 仅在传递给 jQuery 的匿名函数的范围内。
当您使用 jQuery 时，为什么不完全使用它呢？将`.change()`处理程序附加到`.t1`-

```
$(function () {
  $(".t1").change(function(){
    alert("Do your thing here");
  });
}); 
```

[更新小提琴](http://jsfiddle.net/GgGSs/1/)

# javascript - javascript cookie没有返回值

> ID：15763955
> 
> 赞同：0
> 
> 时间：2013-04-02T12:19:04.360
> 
> 标签：javascript, cookies, jquery-cookie

我有一个由这个函数设置的cookie（页面calendar.html）：

```
function bookit(id){
document.cookie='eventid' + "=" + id;
document.location.href ="/sys/account.php";
} 
```

之后，用户被重定向到 account.php，这样他就可以登录，并且在该页面上使用了 id，这就是我在 account.php 上的内容：

```
function getCookieValue(key)
{
    currentcookie = document.cookie;
    if (currentcookie.length > 0)
    {
        firstidx = currentcookie.indexOf(key + "=");
        if (firstidx != -1)
        {
            firstidx = firstidx + key.length + 1;
            lastidx = currentcookie.indexOf(";",firstidx);
            if (lastidx == -1)
            {
                lastidx = currentcookie.length;
            }
            return unescape(currentcookie.substring(firstidx, lastidx));
        }
    }
    return "";
}

alert(getCookieValue("eventid")); 
```

困境是：当我刷新 calendar.html 时，警报返回 51，例如，这是该事件的值，但是当我刷新 account.php 时，它说：NULL 我尝试了一个 jquery cookie 插件，结果相同，所以我回去了对于基本的 javascript，它让我发疯，此时我不明白如何传递该值。我认为使用 cookie 是正确的方法 - 但它不起作用。请问有什么建议吗？我有一个 javascript 调试器，我的代码没有错误。

# maven - 如何禁用“测试源外部参照”

> ID：15763960
> 
> 赞同：0
> 
> 时间：2013-04-02T12:19:28.950
> 
> 标签：maven, maven-site-plugin

我正在使用 Maven 站点插件来生成我的项目页面。我也想发布资源。所以我使用了 JXR 插件。有谁知道是否可以禁用“测试源外部参照”报告。我只找到了这个页面[http://jira.codehaus.org/browse/JXR-47](http://jira.codehaus.org/browse/JXR-47)但这个参数似乎不起作用。我在 POM 中的配置如下所示：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-site-plugin</artifactId>
<version>3.2</version>
<configuration>
<reportPlugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jxr-plugin</artifactId>
        <version>2.3</version>
        <configuration>
            <suppressTestXref>true</suppressTestXref>
        </configuration>
    </plugin>
</reportPlugins>
</configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T08:04:48.690

suppressTestXref 不再可用。这样做的方法是：

```
<project ...>
  ...
  <reporting>
     ...
     <plugins>
        <plugin>
            <artifactId>maven-jxr-plugin</artifactId>
            <version>2.3</version>
            <reportSets>
                <reportSet>
                    <reports>
                        <report>jxr</report>
                    </reports>
                </reportSet>
            </reportSets>
        </plugin> 
```

AFAIK 这在任何地方都没有记录:)

# c# - 单击时重新加载同一页面

> ID：15763964
> 
> 赞同：-5
> 
> 时间：2013-04-02T12:19:33.600
> 
> 标签：c#, asp.net

当我单击重新加载按钮时，我想重新加载同一页面。有人给出 C# 代码来实现这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T12:28:04.883

您可以使用

```
Response.Redirect(Request.RawUrl); 
```

我通过谷歌搜索你的标题找到的。

您可以在那里查看更多信息：

*   [如何在单击按钮时重新加载同一页面，使用数据库中的数据并忽略更改](https://stackoverflow.com/questions/9078728/how-to-reload-the-same-page-on-a-button-click-with-the-data-from-database-and#)

*   [如何在 ASP.NET 中刷新页面？（让它通过代码重新加载自己）](https://stackoverflow.com/questions/1206507/how-to-refresh-the-page-in-asp-net-let-it-reload-itself-by-code#)

*   [http://www.vbforums.com/showthread.php?316778-How-to-programmatically-refresh-a-page-in-asp.net](http://www.vbforums.com/showthread.php?316778-How-to-programmatically-refresh-a-page-in-asp.net)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T12:30:42.617

你可以这样使用

```
Page.Redirect(Page.Request.RawUrl,false); 
```

或者假设您正在使用`default.aspx`并且想要回到同一页面使用

```
Page.Redirect("default.aspx",false); 
```

# sqlite - 如何计算 SQLite 中值的中位数？

> ID：15763965
> 
> 赞同：33
> 
> 时间：2013-04-02T12:19:36.497
> 
> 标签：sqlite, median

我想计算数字行中的中值。我怎样才能在 SQLite 4 中做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-02T14:01:18.147

假设中位数是有序列表中间的元素。

SQLite（4 或 3）没有任何内置函数，但可以手动完成：

```
SELECT x
FROM MyTable
ORDER BY x
LIMIT 1
OFFSET (SELECT COUNT(*)
        FROM MyTable) / 2 
```

* * *

当记录数为偶数时，通常将中位数定义为中间两条记录的平均值。在这种情况下，平均值可以这样计算：

```
SELECT AVG(x)
FROM (SELECT x
      FROM MyTable
      ORDER BY x
      LIMIT 2
      OFFSET (SELECT (COUNT(*) - 1) / 2
              FROM MyTable)) 
```

结合奇数和偶数情况，结果如下：

```
SELECT AVG(x)
FROM (SELECT x
      FROM MyTable
      ORDER BY x
      LIMIT 2 - (SELECT COUNT(*) FROM MyTable) % 2    -- odd 1, even 2
      OFFSET (SELECT (COUNT(*) - 1) / 2
              FROM MyTable)) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-22T02:42:06.197

sqlite3 有一个包含各种数学函数的扩展包。它包括像中位数这样的组函数。

这将比 CL 的答案做更多的工作，但如果你认为你需要任何其他功能，这可能是值得的。

[http://www.sqlite.org/contrib/download/extension-functions.c?get=25](http://www.sqlite.org/contrib/download/extension-functions.c?get=25)

（[这里](http://www.sqlite.org/loadext.html)是如何编译和加载 SQLite 扩展的指南。）

从描述：

> 使用可加载扩展机制为 SQL 查询提供数学和字符串扩展函数。数学：acos，asin，atan，atn2，atan2，acosh，asinh，atanh，差异，度，弧度，cos，sin，tan，cot，cosh，sinh，tanh，coth，exp，log，log10，power，sign， sqrt，正方形，天花板，地板，圆周率。字符串：replicate、charindex、leftstr、rightstr、ltrim、rtrim、trim、replace、reverse、proper、padl、padr、padc、strfilter。聚合：stdev、方差、众数、中位数、lower_quartile、upper_quartile。

# 更新 2015-04-12：修复“未定义符号：sinh”

正如评论中提到的，尽管编译成功，但此扩展可能无法正常工作。

例如，编译可能会起作用，在 Linux 上，您可以将生成的 .so 文件复制到`/usr/local/lib`. 但是`.load /usr/local/lib/libsqlitefunctions`从`sqlite3`shell 可能会产生这个错误：

```
Error: /usr/local/lib/libsqlitefunctions.so: undefined symbol: sinh 
```

以这种方式编译它似乎有效：

```
gcc -fPIC -shared extension-functions.c -o libsqlitefunctions.so -lm 
```

并且将`.so`文件复制到`/usr/local/lib`没有显示类似的错误：

```
sqlite> .load /usr/local/lib/libsqlitefunctions

sqlite> select cos(pi()/4.0);
---> 0.707106781186548 
```

我不确定为什么 gcc 的选项顺序在这种特殊情况下很重要，但显然它确实如此。

注意到这一点的[功劳归功于 Ludvick Lidicky](http://www.blogger.com/profile/03311096343336247111)对[这篇博文的评论](http://kedeligdata.blogspot.com/2010/09/sqlite-with-stdev-standard-deviation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T08:45:26.710

有一个带有时间戳、标签和延迟的日志表。我们希望看到每个标签的延迟中值，按时间戳分组。将所有延迟值格式化为带有前导零的 15 个字符长度，将其连接起来，然后将定位值削减一半。有中位数。

```
select L, --V, 
       case when C % 2 = 0 then
       ( substr( V, ( C - 1 ) * 15 + 1, 15) * 1 + substr( V, C * 15 + 1, 15) * 1 ) / 2
       else
        substr( V, C * 15 + 1, 15) * 1
       end as MEDST
from (
    select L, group_concat(ST, "") as V, count(ST) / 2 as C
    from (
        select label as L, 
               substr( timeStamp, 1, 8) * 1 as T, 
               printf( '%015d',latency) as ST
        from log
        where label not like '%-%' and responseMessage = 'OK'
        order by L, T, ST ) as XX
    group by L
    ) as YY 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-04T09:42:54.647

Dixtroy 通过 group_concat() 提供了最佳解决方案。这是一个完整的示例：

```
DROP TABLE [t];
CREATE TABLE [t] (name, value INT);
INSERT INTO t VALUES ('A', 2);
INSERT INTO t VALUES ('A', 3);
INSERT INTO t VALUES ('B', 4);
INSERT INTO t VALUES ('B', 5);
INSERT INTO t VALUES ('B', 6);
INSERT INTO t VALUES ('C', 7); 
```

结果到这个表中：

```
name|value
A|2
A|3
B|4
B|5
B|6
C|7 
```

现在我们使用来自 Dextroy 的（稍作修改的）查询：

```
SELECT name, --string_list, count, middle,
    CASE WHEN count%2=0 THEN
        0.5 * substr(string_list, middle-10, 10) + 0.5 * substr(string_list, middle, 10)
    ELSE
        1.0 * substr(string_list, middle, 10)
    END AS median
FROM (
    SELECT name, 
        group_concat(value_string,"") AS string_list,
        count() AS count, 
        1 + 10*(count()/2) AS middle
    FROM (
        SELECT name, 
            printf( '%010d',value) AS value_string
        FROM [t]
        ORDER BY name,value_string
    )
    GROUP BY name
); 
```

...并得到这个结果：

```
name|median
A|2.5
B|5.0
C|7.0 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-17T05:43:51.857

SELECT AVG(x) 仅返回格式为 YYYY-MM-DD 的日期值的年份，因此我稍微调整了 CL 的解决方案以适应日期：

```
SELECT DATE(JULIANDAY(MIN(MyDate)) + (JULIANDAY(MAX(MyDate)) - JULIANDAY(MIN(MyDate)))/2) as Median_Date
FROM (
   SELECT MyDate
      FROM MyTable
      ORDER BY MyDate
      LIMIT 2 - ((SELECT COUNT(*) FROM MyTable) % 2) -- odd 1, even 2
      OFFSET (SELECT (COUNT(*) - 1) / 2 FROM MyTable)
); 
```

# jquery - 仅在重新排序节点时如何调用“更改”事件

> ID：15763973
> 
> 赞同：1
> 
> 时间：2013-04-02T12:19:56.380
> 
> 标签：jquery, events, treeview

我有一个可嵌套的树，其设计如下 [https://gist.github.com/Achaius/5291761](https://gist.github.com/Achaius/5291761)

我只想在节点重新排序时触发这个 onchange 方法。但是现在当前的功能是当我单击类“dd-handle”的元素时，触发 onchange 事件并调用服务器端脚本。

发生这种情况是因为在第 296 行附近，我们有 'this.el.trigger('change');' 仅当我重新排序列表时，我才想触发此更改事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:24:55.383

保存页面加载的初始顺序。在您的更改事件中，将新订单与旧订单进行比较。如果它们不同，则已进行了订单更改：

```
var idList = getIdList();

$('.dd').nestable();

$('.dd').on('change', function (event) {
    var newIDList = getIdList();

    if (newIDList != idList) {
        console.log("Order has been changed");
        idList = newIDList;
    }
});

function getIdList() {
    var idList = '';
    $('.dd-item').each(function () {
        idList += $(this).data('id');
    });

    return idList;
} 
```

演示：http: [//jsfiddle.net/94NNb/1/](http://jsfiddle.net/94NNb/1/)

# c# - HttpContext.Current.Request.QueryString 错误解码§

> ID：15763978
> 
> 赞同：2
> 
> 时间：2013-04-02T12:20:13.880
> 
> 标签：c#, unicode, query-string, urlencode

我有一个包含字符 § 的查询字符串，例如`/search?q=5§2`。这应该被编码为`/search?q=5%c2%a72`，但`HttpContext.Current.Request.QueryString.ToString()`给了我`q=5%u00a72`。由于某种原因`%c2`丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:22:21.500

Encoding is ok, you can read more details here [http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding) ("Non-standard implementations" part)

To not think about it you can just use `HttpUtility.UrlDecode()` to obtain real `q=5§2` string regardless used encoding.

# actionscript-3 - AS3 中的基准代码

> ID：15763983
> 
> 赞同：1
> 
> 时间：2013-04-02T12:20:24.520
> 
> 标签：actionscript-3, performance-testing

有没有人有任何提示或库链接来帮助在 AS3 中对应用程序进行基准测试？我（希望）正在寻找与[Benchmark.js](http://benchmarkjs.com/)类似的东西，但要寻找 Flash 和 AIR。欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:40:24.890

我经常使用的一种快速测量代码执行时间的方法是：

```
var start_time:int = getTimer();

someComplexCode();

trace("execution time: ", getTimer()-start_time); 
```

这将为您提供以毫秒为单位的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T17:29:49.093

这并不是真正的基准测试，但[Adob​​e Scout](http://gaming.adobe.com/technologies/scout/)是一个出色的分析器/性能测试器。从 Web 的 SWF 到 Adob​​e AIR 应用程序再到移动 AIR 应用程序，我一直在使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:30:36.497

您可以尝试使用这个：[性能测试](http://gskinner.com/blog/assets/PerformanceTest.zip)。[另外，我在这里](http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c3-315cd077124319488fd-7fff.html)找到了一些很好的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T01:20:18.520

Building on [lostPixels' answer](https://stackoverflow.com/a/15767026/1762224), I created a function that is similar to Python's [`timeit()`](http://docs.python.org/2/library/timeit.html) function. The function repeats the callback function for the number of iterations specified and returns the fastest execution time. The default is 1,000,000 iterations.

The following Test program ran in about *391ms* on my machine. Without the `trace()` statements, the test takes less than *1ms* to execute.

***TimeIt.as***

```
package {
  public class TimeIt {
    import flash.utils.getTimer;

    public static function timeIt(callback:Function, maxIterations:uint=1000000):int {
      var start_time:int, duration:int, fastest_time:int = int.MAX_VALUE;
      for (var i:int = 0; i < maxIterations; i++) {
        start_time = getTimer();
        callback();
        duration = getTimer() - start_time;
        if (duration < fastest_time) fastest_time = duration
      }
      return fastest_time;
    }
  }
} 
```

***Test.as***

```
package {
  public class Test {
    public function Test() {
      trace('Fastest Time:', TimeIt.timeIt(test, 10),'ms');
    }

    public function test():void {
      var k:int, m:int = 100;
      for (var i:int = 0; i < m; i++) {
        for (var j:int = 0; j < m; j++) {
          k = m * i + j;
          trace(k);
        }
      }
    }
  }
} 
```

***Main.mxml***

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" 
    initialize="init(event)">
    <fx:Script>
        <![CDATA[
            protected function init(event:Event):void {
                new Test();
            }
        ]]>
    </fx:Script>
</s:Application> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T00:54:57.987

您可以很容易地设置基准测试方法：

```
function test(process:Function, repeat:int = 10):void
{
    var time:Number = getTimer();
    while(--repeat >= 0) process();
    trace(getTimer() - time);
} 
```

像这样使用：

```
// See how long it takes to create 50,000 Sprites and
// add them to the DisplayList.
test(function()
{
    var sprite:Sprite = new Sprite();
    addChild(sprite);

}, 50000); 
```

# networking - 列表中的重复对象

> ID：15763988
> 
> 赞同：0
> 
> 时间：2013-04-02T12:20:41.663
> 
> 标签：networking, duplicates, nodes, rssi, xbee

我正在做一个编程项目，我想将一些对象存储在一个列表中，但是我无法摆脱重复项。

这是我的对象

nd = nodeAddress16=0x10,0x03, nodeAddress64=0x00,0x13,0xa2,0x00,0x40,0x6f,0x8d,0xfc, rssi=-47, nodeIdentifier= [0x10,0x03]

代码在线程内，所以代码是循环的。

```
private void handleAtCommandResponse(XBeeResponse response) {
    //TODO Implement your code here, to handle particular AT command responses, if desired.
    System.out.println("NetworkNode: Received AT Response:"+((AtCommandResponse)response).getCommand());

    if (response.getApiId() == ApiId.AT_RESPONSE) {
        NodeDiscover nd = NodeDiscover.parse((AtCommandResponse)response);
        System.out.println("Node discover response is: " + nd);

        nodeDiscoverList.add(nd); //add to list, but gives duplicates of nd.

        //add to list if not already in it
        //if already in list replace that object with the new object
        //duplicate objects are not allowed ==> only one object in the list can contain a specific address.
        // Only addresses are static values, other values may change over time.

        }
    else {
        log.debug("Ignoring unexpected response: " + response); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:27:36.923

如果不了解系统的其余部分来帮助确定为什么`handleAtCommandResponse`会以相同的响应多次调用，请注意，您可以使用像[HashSet这样的](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)实现而不是 List 来避免存储重复的对象。如果还没有，您可能需要 NodeDiscover 来实现。`hashCode()`

A`Set`不允许重复对象。如果您`put()`使用相同的对象（而不是`hashCode()`与集合中另一个对象的对象相同的对象）调用两次，则第一个实例将被第二个实例替换。

# java - JCR 按路径查询

> ID：15763989
> 
> 赞同：4
> 
> 时间：2013-04-02T12:20:44.133
> 
> 标签：java, jackrabbit, jcr, jcr-sql2

我正在尝试通过以下查询查询给定节点类型的子树：

```
SELECT * FROM [my:Type] AS my WHERE PATH(my) LIKE '/content/subtree/%' 
```

不知何故，它没有给出任何结果——使用 ISDESCENDANTNODE 有效——但是一旦我的元素总数超过 5k，查询性能就会很糟糕——无论是在我的子树内部还是外部。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T14:01:31.530

我认为这`PATH(my)`不是有效的[JCR SQL](http://www.day.com/specs/jcr/1.0/8.5.3_SQL_EBNF.html)或[JCR 2.0 SQL-2](http://h2database.com/jcr/grammar.html)语法。您应该使用 SQL-2：

```
select * from [my:Type] where isdescendantnode('/content/subtree') 
```

或 XPath

```
/jcr:root/content//element(*, my:Type) 
```

这可能会很慢，因为它只会使用节点类型上的索引（路径没有索引）。如果您需要它更快，您可以（例如）将路径存储为属性，然后添加相应的条件；但是，这将阻止快速移动操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T02:16:33.663

如果您使用 SQL2，只需像这样更正您的查询

```
SELECT * FROM [my:type] WHERE PATH([my:type]) LIKE '/content/subtree/%' 
```

对于 SQL，您应该使用：

```
SELECT * FROM my:Type WHERE jcr:path like '/content/subtree/%' 
```

此查询将搜索“/content/subtree/”下所有级别的所有节点，但如果您只需要在“子树”下搜索一个级别，则应在查询中添加另一个选项以提高性能：

```
SELECT * FROM my:Type WHERE jcr:path like '/content/subtree/%' and not jcr:path like 'content/subtree/%/%' 
```

您可以在此处找到更多详细信息：http: [//docs.jboss.org/exojcr/1.12.13-GA/developer/en-US/html/ch-jcr-query-usecases.html#JCR.ChildNodeConstraint](http://docs.jboss.org/exojcr/1.12.13-GA/developer/en-US/html/ch-jcr-query-usecases.html#JCR.ChildNodeConstraint)

# c# - Mvc 4 捆绑和 base64 svg 图像

> ID：15763992
> 
> 赞同：3
> 
> 时间：2013-04-02T12:20:48.883
> 
> 标签：c#, .net, css, asp.net-mvc, bundling-and-minification

在 css 中使用嵌入式 base64 svg 图像时，我遇到了 Mvc4 捆绑和缩小功能的问题。

假设我有一个这样的 CSS 规则：

```
url("data:image/svg+xml;base64,PD94...<snip>...") 
```

当禁用捆绑和缩小时，这可以正常工作。但是，启用后，该规则将被重写如下：

```
url("/content/style/data:image/svg+xml;base64,PD94...<snip>...") 
```

破坏 url，因为它不是真正的 URL，而是嵌入的 base64 图像。

除了在独立文件中移动 SVG 图像之外，任何人都知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T18:32:16.193

这只是 DotLess 上的一个错误。我们更新了 nuget 包，问题就消失了。

# java - 带有 ADO（连接和查询）的 DLL（Delphi）在 Java 中不起作用（使用 jna）

> ID：15763993
> 
> 赞同：3
> 
> 时间：2013-04-02T12:20:49.247
> 
> 标签：java, delphi, dll, jna

我有一个包含 ADOConnection 和 ADOQuery 的 dll（Delphi），但是当在 java 中运行被调用的 DLL（使用 JNA）时，控制台会出现一些错误信息（如下）：

> Java 运行时环境检测到一个致命错误：
> 
> 内部错误 (0xedfade)，pid=4400，tid=3840
> 
> JRE 版本：6.0_25-b06 Java VM：Java HotSpot(TM) 客户端 VM（20.0-b11 混合模式，共享 windows-x86） 有问题的框架：C [KERNELBASE.dll+0x812f]
> 
> 包含更多信息的错误报告文件保存为：C:\Users\Mmn1\Documents\NetBeansProjects\FLMOPDL\hs_err_pid4400.log
> 
> 如果您想提交错误报告，请访问：http:
> [//java.sun.com/webapps/bugreport/crash.jsp](http://java.sun.com/webapps/bugreport/crash.jsp) 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

这是什么bug？（我意识到只有在 ADOConnection ADOQuery 的情况下我有一个表单或作为一个组件并且如果我删除这些组件并执行一个简单的功能，它才会正常工作）。

编辑：

类似的例子如下：

```
library TESTLIB;
{$DEFINE TESTLIB}

uses
  System.SysUtils,
  System.Classes,
  TestInt in 'TestInt.pas',
  Vcl.Dialogs,
  sharemem,
  Data.DB, Data.Win.ADODB;

{$R *.res}

function MyReturn(x: Integer; Test: PTest): Boolean; stdcall;
var
  ado: TADOQuery;
begin
    Result := True;
    //ado := TADOQuery.Create(nil); <- With this i got a error!
end;

exports MyReturn;

begin
end. 
```

Java中的接口

```
public interface TestInt extends StdCallLibrary {
    TestInt INSTANCE = (TestInt)Native.loadLibrary("C:/test/Win32/Debug/TESTLIB", TestInt.class);

    class Test extends Structure {
        public String vResult;

        public Test() { }
        public Test(int x, Pointer p) {
            super(p);
            read();
        }
        protected List getFieldOrder() { return Arrays.asList(new String[] { "vResult" }); }
    }

    Boolean MyReturn(int x, Test test);
} 
```

结论：当我使用组件时，会出现此错误。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:26:24.500

根据消息，问题是

> 在 Java 虚拟机之外

在这种情况下，它可能在 Delphi 代码中。

您可能想联系 Delphi 代码的开发人员，看看他们是否可以帮助解决问题，或者自己浏览代码以查看发生了什么。该`hs_err_pid4400.log`文件将包含对他们有价值的信息。

无论哪种方式，如果没有 Delphi 源代码，就很难解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:08:30.547

重新编辑：

我得到了解决方案。问题是“如何”制作了 DLL。下面的解决方案，我希望它可以帮助更多的人：

TESTLIB (德尔福)

```
library TESTLIB;
{$DEFINE TESTLIB}

uses
  System.SysUtils,
  System.Classes,
  TestInt in 'TestInt.pas', //here's my unit (interface)
  Vcl.Dialogs,
  ADODB,
  Vcl.Forms;

  {$R *.res}

function MyReturn(Test: PTest): Boolean; stdcall;
var
  ado: TADOQuery;
  con: TADOConnection;
begin
    con := TADOConnection.Create(Application);
    ado := TADOQuery.Create(Application);

    con.ConnectionString := 'Provider=SQLOLEDB.1;Password=aaa;Persist Security Info=True;User ID=aa;Initial Catalog=aa;Data Source=127.0.0.1';
    con.LoginPrompt := False;
    con.Open();

    if con.Connected = True then
        ShowMessage('connected ok')
    else
        ShowMessage('not connected');

    ado.Active := False;
    ado.Connection := con;
    ado.SQL.Clear;
    ado.SQL.Add('select lalala from table where codlala = 1');
    try
        ado.Open();
        Test^.vResult := PAnsiChar(AnsiString(ado.FieldByName('fantasia').AsString));
        Result := True;
    except
        on E: Exception do
        begin
          ShowMessage('error to open the query' + #13 + 'Error: ' + E.Message);
          Result := False;
        end;
    end;
end;

exports MyReturn;

begin
end. 
```

接口 Ole32 (java)

```
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.WinNT.HRESULT;
import com.sun.jna.win32.StdCallLibrary;

public interface Ole32 extends StdCallLibrary {

    Ole32 INSTANCE = (Ole32) Native.loadLibrary("Ole32", Ole32.class);

    public HRESULT CoInitialize(Pointer p);

    public HRESULT CoUninitialize();

} 
```

特别感谢 kobik 和 technomage 关于`CoInitialize`

帮助我的链接：

[Delphi ISAPI App 的应用程序初始化部分中的 TADOConnection 失败：](https://stackoverflow.com/questions/7264136/tadoconnection-failing-in-application-initialization-section-of-delphi-isapi-app)

[添加 CoInitializing 常量并改进文档](https://github.com/twall/jna/issues/69)

[通过 JNA 从 Java 使用 COM](http://blog.abstractinvoke.com/2011/07/using-com-from-java-via-jna/)

# ruby-on-rails-3 - 按命名范围对 Active Admin 索引进行排序

> ID：15763995
> 
> 赞同：2
> 
> 时间：2013-04-02T12:20:54.233
> 
> 标签：ruby-on-rails-3, activeadmin

我有一个`Slider`具有命名范围的模型：

```
scope :positioned, order("CASE WHEN position = 0 THEN 0 ELSE 1 END DESC").order("position ASC").order("created_at DESC") 
```

这增加了一些复杂的排序。我希望我的 ActiveAdmin 重新使用该范围。到目前为止，我只能按列排序，如下所示：

```
ActiveAdmin.register Slider do
  config.sort_order = "position_asc"
end 
```

如何从 active-admin 索引中的命名范围导入、重用或强制排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T10:36:30.007

根据您的 ActiveAdmin 版本，尝试将其放入您的`Slider`模型中：

```
default_scope :order("CASE WHEN position = 0 THEN 0 ELSE 1 END DESC").order("position ASC").order("created_at DESC") 
```

确保您阅读此[https://github.com/gregbell/active_admin/issues/352](https://github.com/gregbell/active_admin/issues/352)

祝你好运！

# google-app-engine - 在 Google App Engine 上具有基本身份验证的 RestTemplate

> ID：15763997
> 
> 赞同：0
> 
> 时间：2013-04-02T12:20:56.227
> 
> 标签：google-app-engine, spring-mvc, spring-security, resttemplate

我已经使用 Spring Security 3.1 在 Google App Engine 上开发了 Spring MVC Rest 服务。

由于该服务仅对我的其他应用程序可用，因此我有一个带有预定义用户名和密码的基本身份验证设置。

现在，我有一个使用 RestTemplate 开发的客户端。但是我无法找到一种方法来使用通过 RestTemplate 发送的用户名和密码安全地访问我的服务。

我浏览了很多文章，但大多数都使用 Apache HttpClient（谷歌 appengine 不支持）。

那么，有没有其他方法可以在 google appengine 上获得我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:48:21.813

您可以尝试使用 URLFetch 的基本身份验证，因为谷歌支持此功能，但您希望启用 ssl 以使用基本身份验证。

您可能希望在此链接上查看，虽然不适用于 appengine，但应该很好。

[http://www.jpalace.org/docs/technotes/spring/rest-security.html](http://www.jpalace.org/docs/technotes/spring/rest-security.html)

# javascript - javascript获取输入的平均值

> ID：15763999
> 
> 赞同：0
> 
> 时间：2013-04-02T12:21:03.337
> 
> 标签：javascript, average

我有一个功能，目前可以将收到的折扣加起来。我想将输入的**总和**更改为每个输入的**平均值**。

```
function calculateAverageDiscount() {
    var avediscount = 0;
    $("table.authors-list").find('input[name^="discount"]').each(function () {
        avediscount += +$(this).val();
    });
    $("#avediscount").text(avediscount.toFixed(2));
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:22:36.827

首先获取您的元素列表：

```
var $disc = $("table.authors-list").find('input[name^="discount"]'); 
```

然后取它的长度：

```
var n = $disc.length; 
```

然后照原样取总和，但使用先前获得的列表，这样您*就不会重复自己*。

```
$disc.each(function() {
    ...
}); 
```

其余的应该很明显...... ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:27:43.923

您需要获取元素的数量，然后将总和除以该数字。

```
var avediscount = 0;
var length = $("table.authors-list").find('input[name^="discount"]').each(function () {
    avediscount += +$(this).val();
}).length;
$("#avediscount").text(avediscount.toFixed(2)/length); 
```