# StackOverflow 问答 16003000-16003999

# javascript - 如何将某些内容附加到 innerHTML？

> ID：16003000
> 
> 赞同：0
> 
> 时间：2013-04-14T18:52:52.893
> 
> 标签：javascript, html, game-engine

```
function move(where){
            var status = document.querySelector("#status");
            var img = document.querySelector("img");

            switch(where){
                case "north":
                    if(startingPos>=3){
                        startingPos -= 3;
                        status.innerHTML = messages[startingPos];
                        img.setAttribute("src",images[startingPos]);
                    }else{
                        status.innerHTML = blockedPathMsg[startingPos];
                    }
                    break;
                case "east":
                    if(startingPos%3!=2){
                        startingPos += 1;
                        status.innerHTML = messages[startingPos];
                        img.setAttribute("src",images[startingPos]);
                    }else{
                        status.innerHTML = blockedPathMsg[startingPos];
                    }
                    break;
                case "west":
                    if(startingPos%3!=0){
                        startingPos -= 1;
                        status.innerHTML = messages[startingPos];
                        img.setAttribute("src",images[startingPos]);
                    }else{
                        status.innerHTML = blockedPathMsg[startingPos];
                    }
                    break;
                case "south":
                    if(startingPos<6){
                        startingPos += 3;
                        status.innerHTML = messages[startingPos];
                        img.setAttribute("src",images[startingPos]);
                    }else{
                        status.innerHTML = blockedPathMsg[startingPos];
                    }
                    break;
                default:
                    status.innerHTML = "I do not know that";
            }
        } 
```

这是我在游戏中使用的用户可以移动的功能。现在我需要添加一个新功能，用户可以在其中挑选和丢弃物品。项目将位于地图中的某些位置，每当用户到达那里时，我想将与该项目关联的消息附加到`status.innerHTML`.

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:54:38.750

如果要追加，可以使用：

```
status.innerHTML += ' what to add'; 
```

这在语法上与使用相同：

```
status.innerHTML = status.innerHTML + ' what to add'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T18:56:50.170

如果您使用 JQuery，则使用 append() 函数可以非常简单地执行此操作。有关一些示例，请参见此链接：http: [//api.jquery.com/append/](http://api.jquery.com/append/)

# lxml - 使用 lxml 编写带有 xinclude(xi:include) 块的 XML 文件

> ID：16003002
> 
> 赞同：1
> 
> 时间：2013-04-14T18:53:06.317
> 
> 标签：lxml, xinclude

我希望使用 lxml 自动编写一个集体 XML 文件，因此我需要编写“xi:include”，例如：

```
...
<Time Type="Single" Value="2"/>
<xi:include href="elemData_2.xmf" xpointer="xpointer(//XDMF/Domain/Grid)"/>
<Time Type="Single" Value="3"/>
<xi:include href="elemData_3.xmf" xpointer="xpointer(//XDMF/Domain/Grid)"/>
<Time Type="Single" Value="4"/>
<xi:include href="elemData_4.xmf" xpointer="xpointer(//XDMF/Domain/Grid)"/>
... 
```

似乎 XInclude() 仅用于解析和尝试附加名称的子元素：'xi:include' 发出错误。因此，我将不胜感激。我使用的代码：

```
xdmfItem.append(etree.SubElement(Grid, "xiinclude", {'href': 'elemData_'+str(ii+1)+'.xmf', 'xpointer':'xpointer(//XDMF/Domain/Grid)' })) 
```

错误： `ValueError: Invalid tag name u'xi:include'`

提前感谢希沙姆

编辑：（如果我等 8 小时，我可能不会写答案）

感谢newtover，您的指针帮助我找到了解决方案：

```
xdmfItem.append(etree.SubElement(Grid, "{http://www.w3.org/2003/XInclude}include", {'href': 'elemData_'+str(ii+1)+'.xmf', 'xpointer':'xpointer(//XDMF/Domain/Grid)' })) 
```

# java - JAXB XML 解析的问题

> ID：16003005
> 
> 赞同：3
> 
> 时间：2013-04-14T18:53:23.427
> 
> 标签：java, xml, list, xml-parsing, jaxb

我正在开发一个项目，在该项目中我将使用 JAXB 解析一个 XML 文件，该文件包含以下气象站信息：名称、气象站 ID、纬度/经度和 url。现在我打算通过仅按名称打印气象站来测试所有内容。我已经调试了我的代码，但是当我尝试运行时：我收到以下错误：

线程“主”javax.xml.bind.UnmarshalException 中的异常：意外元素（uri：“”，本地：“wx_station_index”）。预期元素是（无）

有人有解释吗？任何帮助，将不胜感激。我的 XML 代码和示例发布在下面：

```
//create criteria for weather station info
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class StationTest {

/**
 * @param args
 */

@XmlElement(name = "station_id")
String station_id;

@XmlElement(name = "state")
String state;

@XmlElement(name = "station_name")
String stationName;

@XmlElement(name = "latitude")
double latitude;

@XmlElement(name = "longitude")
double longitude;

@XmlElement(name = "html_url")
String htmlUrl;

public String getStationID(){
    return station_id;
}

public void setStationId(String station_id)
{
     this.station_id = station_id;
}

public String getState(){
    return state;
}

public void setState(String state)
{
     this.state = state;
}

public String getStationName(){
    return stationName;
}

public void setStationName(String station_name)
{
     this.stationName = stationName;
}

public double getLatitude(){
    return latitude;
}

public void setLatitude(double latitude)
{
     this.latitude = latitude;
}

public double getLongitude(){
    return longitude;
}

public void setLongitude(double longitude)
{
     this.longitude = longitude;
}

public String getUrl(){
    return htmlUrl;
}

public void setUrl(String url){
    this.htmlUrl = htmlUrl;

} 
```

} 导入 java.util.ArrayList；

```
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.bind.annotation.XmlAccessType;

//create list for all weather stations

@XmlRootElement
@XmlSeeAlso(value = StationTest.class)
@XmlAccessorType(XmlAccessType.FIELD)
public class StationListTest {

/**
 * @param args
 */
@XmlElement(name = "station")
private ArrayList<StationTest> stationList;

public void setStationListTest(ArrayList<StationTest> StationList){
    this.stationList = StationList;
}

public ArrayList<StationTest> getStationListTest(){
    return stationList;
}

}

import java.util.ArrayList;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.ArrayList;

 import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

//final Test of JAXB
public class Test3 {

/**
 * @param args
 */
//read xml
private static final String STATION_XML = "src/flwxindex3.xml";

//main method
public static void main(String[] args) throws InterruptedException, JAXBException, FileNotFoundException {

    //create list object
    ArrayList<StationTest> StationList = new ArrayList<StationTest>();

    final JAXBContext jaxbc = JAXBContext.newInstance(StationListTest.class);
    final Unmarshaller unmarshaller = jaxbc.createUnmarshaller();

    //create list for iteration, then iterate printing by name only
    StationListTest stationListTest = (StationListTest) unmarshaller.unmarshal(new FileReader(STATION_XML));
    ArrayList<StationTest> list = stationListTest.getStationListTest();
    //final StationListTest stations = (StationListTest) unmarshaller.unmarshal(Thread.currentThread().getContextClassLoader().getResource("src/flwxindex3.xml"));
    for (final StationTest station : list) {
        System.out.println(station.getStationName());
    }
} 
```

}

请求的实际xml（以为我包括了它，对不起）：

```
<?xml version="1.0" encoding="UTF-8"?>
<wx_station_index>
    <credit>NOAA's National Weather Service</credit>
    <credit_URL>http://weather.gov/</credit_URL>
    <image>
            <url>http://weather.gov/images/xml_logo.gif</url>
            <title>NOAA's National Weather Service</title>
            <link>http://weather.gov</link>
    </image>
    <suggested_pickup>08:00 EST</suggested_pickup>
    <suggested_pickup_period>1140</suggested_pickup_period>

<station>
    <station_id>NFNA</station_id>
    <state>FJ</state>
    <station_name>Nausori</station_name>
    <latitude>-18.05</latitude>
    <longitude>178.567</longitude>
    <html_url>http://weather.noaa.gov/weather/current/NFNA.html</html_url>
    <rss_url>http://weather.gov/xml/current_obs/NFNA.rss</rss_url>
    <xml_url>http://weather.gov/xml/current_obs/NFNA.xml</xml_url>
</station>

<station>
    <station_id>KCEW</station_id>
    <state>FL</state>
            <station_name>Crestview, Sikes Airport</station_name>
    <latitude>30.79</latitude>
    <longitude>-86.52</longitude>
            <html_url>http://weather.noaa.gov/weather/current/KCEW.html</html_url>
            <rss_url>http://weather.gov/xml/current_obs/KCEW.rss</rss_url>
            <xml_url>http://weather.gov/xml/current_obs/KCEW.xml</xml_url>
</station> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:32:42.183

假设 wx_station_index 不是错字。

我添加了一些注释来指示 jaxb 将 xml 的哪个部分映射到代码的哪个部分。将您的 StationListTest 更改为以下内容应该会更好。

```
import java.util.ArrayList;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

//create list for all weather stations
@XmlRootElement(name="wx_station_index")
public class StationListTest {

/**
 * @param args
 */
@XmlElement(name="station")    
private ArrayList<StationTest> StationList;

public StationListTest(){
    StationList=new ArrayList<StationTest>();
}

public void setStationListTest(ArrayList<StationTest> StationList){
    this.StationList = StationList;
}

public ArrayList<StationTest> getStationListTest(){
    return StationList;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:32:52.373

`StationList`类上的命名属性与 XML 文档中`StationListTest`的隐式列表属性不匹配。`station`这需要通过显式定义`StationList`填充属性的 XML 的哪些元素来解决：

```
@XmlElement(name = "station")
private ArrayList<StationTest> StationList; 
```

其他一些快速说明：

*   对于类和变量名，您应该遵循 Java 命名模式（驼峰式）。`StationList`应该是，`stationList`例如）。
*   作为一般规则，您应该使用`@XMLRootElement`.
*   作为一般规则，您应该在定义 Java 类时使用最通用的类​​型形式（`List`，而不是`ArrayList`）。
*   您应该使用`@XmlSeeAlso`

以下类定义适用于您的 XML：

```
@XmlRootElement(name = "station")
@XmlAccessorType(XmlAccessType.FIELD)
public class StationTest {

    @XmlElement(name = "station_id")
    String stationId;

    String state;

    @XmlElement(name = "station_name")
    String stationName;

    double latitude;
    double longitude;

    @XmlElement(name = "html_url")
    String htmlUrl;

    // Constructor, getters, setters
}

@XmlRootElement(name = "wx_station_index")
@XmlSeeAlso(value = StationTest.class)
@XmlAccessorType(XmlAccessType.FIELD)
public class StationListTest {
    @XmlElement(name = "station")
    private List<StationTest> stationList;

    // Constructors, getters, setters
} 
```

# ruby - 在 Ruby 中将数组元素对组合在一起的最佳方法

> ID：16003006
> 
> 赞同：1
> 
> 时间：2013-04-14T18:53:29.223
> 
> 标签：ruby, arrays, loops

说我有以下内容：

```
a = [1,2,3,4,5,6,7,8] 
```

如何将其转换为每对的平均值？

也就是说，我怎样才能使

```
a = [1.5,3.5,5.5,7.5] 
```

我的意思是，我可以做到

我在想a.step(2)，然后......涉及each_with_index的东西？

编辑：我看到这个：

```
arr.each_with_index.map { |x,i| [x, i+2] }

arr.each_with_index.map { |x,i| (x + arr[i+1])/2 } 
```

然后过滤掉所有偶数索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:02:30.320

`each_slice(2)`并`map`会在这里做的伎俩：

```
[1,2,3,4,5,6,7,8].each_slice(2).map { |x,y| (x+y)*0.5 }
 => [1.5, 3.5, 5.5, 7.5] 
```

[`each_slice`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)一次迭代数组*n 个*元素，然后我们`map`转换生成的枚举数。

# symfony - FOSUserBundle 反序列化到用户对象抛出“你必须定义一个类型”

> ID：16003016
> 
> 赞同：3
> 
> 时间：2013-04-14T18:54:19.180
> 
> 标签：symfony, fosuserbundle, jmsserializerbundle, symfony-2.3

基本上我想将 json 反序列化为用户对象。像这样

```
$serializer = $this->get('jms_serializer');

$data = $serializer->deserialize($this->get('request')->getContent(),
                                 'My\FooBundle\Entity\User', 'json'); 
```

传递给反序列化器的请求数据：

```
{"id":2,"username":"...@gmail.com","username_canonical":"...@gmail.com", ... } 
```

抛出的错误：

> request.CRITICAL：未捕获的 PHP 异常 JMS\Serializer\Exception\RuntimeException：“您必须为 FOS\UserBundle\Model\User::$username 定义一个类型。” 在 ...\vendor\jms\serializer\src\JMS\Serializer\GenericDeserializationVisitor.php 第 170 行 [] []

我使用科幻 2.3。是否需要为 fos 用户类的反序列化设置任何内容？知道为什么我会收到此消息以及如何解决它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:28:47.503

你好我今天刚遇到同样的问题，终于找到了如何处理这个非问题，

对于您要反序列化的对象中的每个属性，捆绑包想知道您希望在转换后具有哪种类型。因此，您必须在 Entity 类中使​​用 bundle 提供的 annotation\type 并注释每个属性：http: [//jmsyst.com/libs/serializer/master/reference/annotations#type](http://jmsyst.com/libs/serializer/master/reference/annotations#type)

小心：粘贴是邪恶的！参考示例中的 use 语句是`use JMS\Serializer\Annotation\Type;`但应该是序列化程序的真实路径`use JMS\SerializerBundle\Annotation\Type;`

我的代码中的一个例子：

```
 use JMS\SerializerBundle\Annotation\Type;
    /**
    * @ORM\Entity
    * @ORM\Table(name="ecro_form")
    */
     class Form {

     /**
     * @ORM\ManyToOne(targetEntity="eCRO\Bundle\UserBundle\Entity\User", inversedBy="forms")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     * @Type("eCRO\Bundle\UserBundle\Entity\User")
     */
     protected $user; // inherits from FOSUser 
```

在 FOSUser 抽象类（位置：vendor\FOS\UserBundle\Model\User.php）上使用注解，以便序列化程序知道如何工作。

希望它会有所帮助！

# java - Spring自动装配失败，但应用程序启动

> ID：16003020
> 
> 赞同：0
> 
> 时间：2013-04-14T18:54:46.603
> 
> 标签：java, spring, nullpointerexception, autowired

最近我遇到了一种情况，即基于弹簧的应用程序在访问类（A）中的自动装配字段时抛出“NullPointerApplication”。自动装配的 bean 也用于其他类（ B 和 C ）。这些类（ B 和 C ）在访问该 bean 时工作正常。

```
applicaton-context.xml:

<bean id="myBean" class="x.y.x.MyBean">
</bean>

<context:component-scan base-package="x.y.z" />

Class MyBean{
public void m(){
}
}

@Component    
Class A{

@Autowired
MyBean theBean;

public void methodA(){
  theBean.m();                       //Getting NPE
}

}

@Component
Class B{

@Autowired
MyBean theBean;

public void methodB(){
  theBean.m();                             // No NPEs, works fine
}

}

@Component
Class C{

@Autowired
MyBean theBean;

public void methodC(){
  theBean.m();                             // No NPEs, works fine
}

} 
```

当我重新启动应用程序时，一切正常。早些时候，如果 bean 自动装配失败，则 A 类 bean 创建应该失败并且应用程序不应该启动。相反，应用程序运行良好（A 类除外），并且找不到无法自动装配的异常。所以我想知道这是否是一个罕见的随机案例，Spring 自动装配被搞砸了？？？我是对的吗？这是 Spring 的一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:25:27.480

您确定您的 A 类本身在 Spring 上下文中吗？也许您的 B 类和 C 类是自动扫描的，但不是您的 A 类（不在组件扫描的基本包中）。

在这种情况下，自动装配只是在 A 中被忽略，因此您的`theBean`实例为空。

# animation - 使用 canvas.requestFullscreen() 进入全屏时如何调整画布大小？

> ID：16003021
> 
> 赞同：4
> 
> 时间：2013-04-14T18:54:51.423
> 
> 标签：animation, canvas, resize, fullscreen, dart

好的，所以我有这个网格，我想要全屏并在分辨率的完整空间内绘制。

但我不能让它注册超过屏幕的 2/3 三分之二。

我`CanvasElement`里面有一个自制的`Grid`班。当您按下按钮时，网格应通过以下方法全屏显示：

```
void fullScreenRequest(){      
  document.onFullscreenChange.listen(grid.handleFullScreen());
  grid.requestFullscreen();      
} 
```

这会在内部触发这些方法`Grid`：

```
void requestFullscreen(){       
   canvas.requestFullscreen();       
}

void handleFullScreen(){              
   window.setImmediate(() {         
       canvas.width = (canvas.parent as Element).client.width;
       canvas.height = (canvas.parent as Element).client.height;         

       canvasWidth = canvas.width;
       canvasHeight = canvas.height;        
   });       
 } 
```

在绘制网格的内容时，我使用`canvasWidth`和`canvasHeight`作为基础。如何让这些值成为屏幕的全分辨率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T10:51:29.467

只需在回调中获取窗口大小：

```
canvas.width = window.innerWidth; // Or window.screen.available.width
canvas.height = window.innerHeight;
canvas.style.position = 'absolute'; // If you need 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T00:43:37.050

你可以试试这个

```
:-webkit-full-screen #CanvasElement {
  width: 100%;
  height: 100%;
} 
```

[按照这里](https://developer.mozilla.org/en-US/docs/Web/Guide/DOM/Using_full_screen_mode)的建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-16T13:40:43.777

我用这个：

```
original_width = canvas.width;
original_height = canvas.height;
canvas.onFullscreenChange.listen( (t){
  if( canvas == document.fullscreenElement ){
    canvas.width = window.screen.width;
    canvas.height = window.screen.height;
  }
  else{
    canvas.width = original_width;
    canvas.height = original_height;
  }
} ); 
```

**document.fullscreenElement**返回当前全屏的元素，用于在再次退出全屏时恢复大小。

**window.screen.height**返回全屏高度，而**window.screen.available.height**返回屏幕高度，不包括桌面环境中为任务栏和类似空间保留的空间。不要使用后者，也不要使用您在网络上找到的许多解决方案，如**document.body.clientHeight**、**canvas.offsetHeight**等，它们不会提供您想要的大小。

# javascript - 如何使用动态选择输入创建 dgrid 列编辑器插件？

> ID：16003023
> 
> 赞同：3
> 
> 时间：2013-04-14T18:55:03.233
> 
> 标签：javascript, dgrid, dojo

**概述**

我正在使用 dojo 和 dgrid 来构建网格。2 个相关列是**Client**和**Proposal**。双击任一列将允许您使用 dijit/form/Select 对其进行编辑。我希望提案的选项基于客户的选项。

这是用于两个列的列插件：

```
define([
    "dojo",
    "sb",
    "put-selector/put",
    "dgrid/editor",
    "dijit/form/Select"
], function(dojo, sb, put, editor, Select){
    dojo.global.starbug.grid.columns = dojo.global.starbug.grid.columns || {};
    dojo.global.starbug.grid.columns.select = function(column){

        //populate the cell with the label or value
        column.renderCell = function(object, value, cell, options, header){
            put(parent && parent.contents ? parent : cell, ".dgrid-select");
            items = column.editorInstance.getOptions();
            var label;
            for (var i in items) {
                if (value == items[i].value) value = items[i].label;
            }
            put(cell, 'span.'+value.replace(/ /g, '-').toLowerCase(), value);
        };

        column.editorArgs = {
            style:'width:100%',
            labelAttr:'label',
            store:sb.get(column.from, 'select')
        };

        column = editor(column, Select, "dblclick");

        return column;
    };
}); 
```

store相当于dojo/store/JsonRest。

**问题**

如果我了解 dgrid 和 dojo/store 的性质，我需要在用户尝试编辑列时找到一种填充/更新 dijit/form/Select 选项的方法。

**总之**

*   如何确定用户何时尝试编辑列？
*   然后如何访问 dijit/form/Select 以便更新它？
*   如何延迟显示编辑器，直到它被填充？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:11:40.147

**1\. 如何确定用户何时尝试编辑列？**

您可以使用`dgrid-editor-show`编辑器插件调度的事件。

**2\. 然后我如何访问 dijit/form/Select 以便我可以更新它？**

您将有权从事件处理程序访问 column.editorInstance

**3\. 我怎样才能延迟显示编辑器，直到它被填充？**

为此，我确实必须访问 column.editorInstance 的私有成员，但我能够通过使用`dojo/when`on来完成任务`column.editorInstance._queryRes`

一旦结果出来，我还需要它来设置编辑器的值。

这是我的解决方案：

```
define([
    "dojo",
    "dojo/when",
    "sb",
    "put-selector/put",
    "dgrid/editor",
    "dijit/form/Select"
], function(dojo, when, sb, put, editor, Select){
  dojo.global.storm.grid.columns.proposals = function(column){

    //We have to keep some cached display values since our editor
    //will only contain the display values from the last request
    var cache = {};

    //Use the init function to access the grid
    //so we can attach the event handler to `dgrid-editor-show`
    column.init = function() {
        column.grid.on('.dgrid-cell:dgrid-editor-show', function(evt) {

            //My data contains null values,
            //so I need to convert them to strings
            if (evt.cell.row.data[column.field] == null) {
                evt.cell.row.data[column.field] = "NULL";
            }

            //This is where we set the query and update the available options
            column.editorInstance.setStore(
                column.editorInstance.store,
                evt.cell.row.data[column.field],
                {query:{client:evt.cell.row.data.client_id}}
            );
            //This is where we set editor value upon receipt of the results
            when(column.editorInstance._queryRes, function() {
                column.editorInstance.set(
                    'value',
                    evt.cell.row.data[column.field]
                );
            });
        });
    };

    //Use the renderCell function to set the display value
    column.renderCell = function(object, value, cell, options, header){

        //add a class to distinguish this column
        put(parent && parent.contents ? parent : cell, ".dgrid-select");

        //for null values, we just put in an empty string
        if (value == "NULL") put(cell, 'span.proposal', "");
        else if (value) {
            //otherwise delay til we have results
            when(column.editorInstance._queryRes, function() {
                //look for the display value in the editor
                items = column.editorInstance.getOptions();
                var found = false;
                for (var i in items) {
                    //if we find the display value in the editor, cache it
                    if (value == items[i].value) {
                        found = true;
                        cache[value] = items[i].label;
                        value = items[i].label;
                    }
                }
                //if we don't find the display value in the editor,
                //look for it in the cache
                if (!found && cache[value]) value = cache[value];
                //finally, populate the cell
                put(cell, 'span.proposal', value);
            });
        }
    };

    //Set the editor args, mostly standard stuff
    column.editorArgs = {
        style:'width:100%',
        labelAttr:'label',
        sortByLabel:false,
        store:sb.get(column.from, 'select'),
        onSetStore:function(store, items) {
            //if the field is not required, put in an empty options
            //so the store doesn't have to include one
            if (!this.required) {
                this.options.unshift({label:'&nbsp;', value:'NULL'});
                this._loadChildren();
            }
        }
    };

    //create the editor
    column = editor(column, Select, "dblclick");

    //return the column
    return column;

  };
}); 
```

# scala - 反向实现Seq

> ID：16003026
> 
> 赞同：3
> 
> 时间：2013-04-14T18:55:15.430
> 
> 标签：scala

在类`SeqLike.scala`中有一个函数调用`reverse`它反转一个序列。例如它使`List(1,2,3,4)``List(4,3,2,1)

在源代码中，描述是：

```
def reverse: Repr = {
var xs: List[A] = List() //Line 1
for (x <- this)
  xs = x :: xs
val b = newBuilder ////Line 4
b.sizeHint(this)
for (x <- xs)
  b += x
b.result
} 
```

我不明白的是：第（1-3）行完成了这项工作。但是为什么它会创建一个新的builder，然后向它添加元素以返回。只需 Line[1-3] 就足够了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T18:59:39.513

第 1-3 行生成一个`List`. 但是`reverse`不应该返回任何旧`Seq`的但与它相同的类型`Seq`。因此，如果它实际上是一个列表，则不需要额外的构建器步骤；否则它会。（如果您查看 的实现`List`，它不会做额外的工作。）

```
override def reverse: List[A] = {
  var result: List[A] = Nil
  var these = this
  while (!these.isEmpty) {
    result = these.head :: result
    these = these.tail
  }
  result
} 
```

# json - 在 Highcharts 中导入 JSON 数据

> ID：16003029
> 
> 赞同：0
> 
> 时间：2013-04-14T18:55:44.747
> 
> 标签：json, highcharts

我已经阅读了很多关于同一项目的参考资料，但我仍然感到困惑。我已经添加了我的代码。

在随附的代码中，我有两个图。`plot_1`使用页面中定义的数据并且`plot_2`相同，但使用 JSON 导入数据。`plot_1`工作正常，`plot_2`但没有。在这个论坛上有很多不同版本的导入 JSON 数据，我尝试模拟其中的一些但没有成功。我在嵌入式系统上使用此代码。如果有人可以提供帮助，我将不胜感激。

```
<script>
$(function () { 
        $('#plot_1').highcharts({
        chart: {
        borderWidth: 2,
        borderRadius: 3,
        borderColor: '#a1a1a1',
                type: 'line',
        marginBottom: 30
        },
        title: {
                text: 'Battery Voltage and Current'
        },
        xAxis: {
                type: 'datetime',
        pointStart: Date.UTC(2013, 2, 26),      // Jan = 0
        pointInterval: 60 * 1000 * 15,      // 15 minutes
        labels: {
        align: 'center',
        x:  0,
        y:  16
        }
        },

        yAxis: [{               // Primary axis (left)
        startOnTick: true,
                title: {
                text: 'Volts',
        style: {
            color: '#89A54E'
        }
                },
        labels: {
        align: 'right',
        x: -3,
        y: 0,
        style: {
            color: '#89A54E'
        }
        },
        min: 6,
        max: 16

        },{                 // Secondary axis (right)
        opposite: true,
        gridLineWidth: 1,
            title: {
                text: 'Amps',
        style: {
            color: '#4572A7'
        }
                },
        labels: {
        align: 'left',
        x: 3,
        y: 0,
        style: {
            color: '#4572A7'
        }
        },
        min: -0.5,
        max:  0.5
    }],

    legend: {
        enabled: false
    },

    plotOptions: {
        series : {
        marker: {
            enabled: false
        }
        }
    },

        series: [{
            name: 'Volt',
        color: '#89A54E',
                data:  [12.4,   12.4,    12.4,    12.2,    12.0,    11.9,    11.9,    11.8,    11.6,    11.4,    11.1,    10.9,     11.4,     11.5,     11.7,     11.9,     12.2,     12.4,     12.4,     12.4]
        }, {
                name: 'Amp',
        color: '#4572A7',
        yAxis: 1,
                data: [-0.1, -0.2, -0.1, -0.2, -0.3, -0.3, -0.4, -0.3, -0.4, -0.4, -0.3, -0.3,  0.3,  0.3,  0.4,  0.5,  0.4,  0.4,  0.4,  0.1]
        }]
        });
});
    </script>   

    <script>
$(function () {

    var data1 = [], data2 = [];

    function requestData1() {
        $.ajax({
            url: "sig0.jsn",
            dataType: "json",
            success: function(data1) {
                alert (data1);
                this.series[0].setData(data1);
            },
            cache: false
        });
    }

    function requestData2() {
        $.ajax({
            url: "sig2.jsn",
            dataType: "json",
            success: function(data2) {
                alert (data2);
                this.series[0].setData(data2);
            },
            cache: false
        });
    }

        $('#plot_2').highcharts({
        chart: {
        borderWidth: 2,
        borderRadius: 3,
        borderColor: '#a1a1a1',
                type: 'line',
        marginBottom: 30,
        events: {
        load: requestData1,
        load: requestData2
        }
        },
        title: {
                text: 'Received Signal Strength'
        },
        xAxis: {
                type: 'datetime',
        pointStart: Date.UTC(2013, 2, 26),      
        pointInterval: 60 * 1000 * 15,
        labels: {
        align: 'center',
        x:  0,
        y:  16
        }
        },

        yAxis: {                // Primary axis (left)
        startOnTick: true,
                title: {
                text: 'Strength (db)'
                },
        labels: {
        align: 'right',
        x: -3,
        y: 0

        },
        min: -40,
        max: 0

    },

    legend: {
        align: 'left',
        verticalAlign: 'top',
        floating: true,
        x: 50,
        y: 45
    },

    plotOptions: {
        series : {
        marker: {
            enabled: false
        }
        }
    },

        series: [{
            name: 'Device A',
        color: '#89A54E',
                data: data1
        },{
            name: 'Device B',
        color: '#4572A7',
                data: data2
        }]

        });

});
    </script> 
```

JSON 文件数据如下所示。

```
{
"data" : [-25, -23, -15, -16, -26, -24, -26, -28, 29, -16, -22, -24, -22, -17, -21, -25, -21, -22, -23, -22]
} 
```

最后，我将 x 轴时间数据与 y 轴数据配对，因为我很可能会错过数据记录中的一些时间间隔，所以如果你能在答案中考虑这一点。总的来说，我想绘制来自 4 个传感器的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:51:37.880

您应该在 ajax 调用中移动图表 inilazize，因为在您的情况下，ajax 和 highcharts 定义是“同时”运行的。

结果应该是这样的：

```
 $.ajax({
        url: "sig2.jsn",
        dataType: "json",
        success: function(data2) {
            alert (data2);
            this.series[0].setData(data2);
            $('#plot_2').highcharts({
                            //parameters
            });
        },
        cache: false
    }); 
```

# batch-file - 如何使用 Windows CMD 在 Firefox 中运行 Selenium IDE testcase.html

> ID：16003030
> 
> 赞同：0
> 
> 时间：2013-04-14T18:55:53.263
> 
> 标签：batch-file, selenium-rc, selenium-ide, windows-7-x64

我已经阅读了如何使用 selenium-server RC 执行 selenium IDE testcase.html。这是我的设置方式...

```
C:\Selenium_Server\selenium-server.jar
C:\Scripts\Q2Nightly.html 
```

如果我打开 Firefox 并使用 Selenium IDE 打开测试用例，它将运行良好。从命令行执行它对我不起作用，我需要它作为自动批处理文件的一部分。

这是我正在使用的命令：

```
java.exe -jar C:\selenium_server\selenium-server.jar -htmlSuite "*firefox" "http://127.0.0.1" "c:\Scripts\Q2Nightly.html" "c:\Scripts\results-firefox.html" -port 5555 
```

命令输出

```
Apr 14, 2013 11:32:33 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
11:32:34.661 INFO - Java: Sun Microsystems Inc. 20.9-b04
11:32:34.662 INFO - OS: Windows 7 6.1 x86
11:32:34.667 INFO - v2.32.0, with Core v2.32.0\. Built from revision 6c40c18
11:32:34.731 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:5555/wd/hub
11:32:34.732 INFO - Version Jetty/5.1.x
11:32:34.732 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
11:32:34.733 INFO - Started HttpContext[/selenium-server,/selenium-server]
11:32:34.733 INFO - Started HttpContext[/,/]
11:32:34.755 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@1833955
11:32:34.756 INFO - Started HttpContext[/wd,/wd]
11:32:34.758 INFO - Started SocketListener on 0.0.0.0:5555
11:32:34.758 INFO - Started org.openqa.jetty.jetty.Server@e4f972
jar:file:/C:/Selenium_Server/selenium-server.jar!/customProfileDirCUSTFFCHROME
11:32:34.857 INFO - Preparing Firefox profile...
11:32:36.008 INFO - Launching Firefox...
11:32:36.967 INFO - Checking Resource aliases 
```

打开的两个 Firefox 窗口的屏幕截图：

[http://s116.photobucket.com/user/xXxghaleonxXx/media/Selenium_Automated_zps11713a8a.png.html?sort=3&o=0](http://s116.photobucket.com/user/xXxghaleonxXx/media/Selenium_Automated_zps11713a8a.png.html?sort=3&o=0)

在这之后什么也没有发生。测试用例没有执行，甚至手动运行按钮也不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:21:09.687

另存`Q2Nightly.html`为测试**套件**而不是**测试用例**。这将解决问题。

# c# - 如何修改 dijkstra 算法以找到所有可能的路径？

> ID：16003032
> 
> 赞同：11
> 
> 时间：2013-04-14T18:55:56.843
> 
> 标签：c#, algorithm, graph-algorithm, breadth-first-search, dijkstra

我知道以前可以问过，但我找不到。我需要修改以下 dijkstra 算法，该算法适用于查找 2 个节点之间的最短路径，但我还需要找到所有可能的路径。我知道这样做应该相对容易，但到目前为止我不知道如何做这种最简单的方法。我正在使用有向加权图。

```
 class Dijkstra
    {
        private List<Node> _nodes;
        private List<Edge> _edges;
        private List<Node> _basis;
        private Dictionary<string, double> _dist;
        private Dictionary<string, Node> _previous;

        public Dijkstra(List<Edge> edges, List<Node> nodes)
        {

            Edges = edges;
            Nodes = nodes;
            Basis = new List<Node>();
            Dist = new Dictionary<string, double>();
            Previous = new Dictionary<string, Node>();

            // record node 
            foreach (Node n in Nodes)
            {
                Previous.Add(n.Name, null);
                Basis.Add(n);
                Dist.Add(n.Name, double.MaxValue);
            }
        }

        /// Calculates the shortest path from the start
        ///  to all other nodes
        public void calculateDistance(Node start)
        {
            Dist[start.Name] = 0;

            while (Basis.Count > 0)
            {
                Node u = getNodeWithSmallestDistance();
                if (u == null)
                {
                    Basis.Clear();
                }
                else
                {
                    foreach (Node v in getNeighbors(u))
                    {
                        double alt = Dist[u.Name] + getDistanceBetween(u, v);
                        if (alt < Dist[v.Name])
                        {
                            Dist[v.Name] = alt;
                            Previous[v.Name] = u;
                        }
                    }
                    Basis.Remove(u);
                }
            }
        }

        public List<Node> getPathTo(Node d)
        {
            List<Node> path = new List<Node>();

            path.Insert(0, d);

            while (Previous[d.Name] != null)
            {
                d = Previous[d.Name];
                path.Insert(0, d);
            }

            return path;
        }

    public Node getNodeWithSmallestDistance()
        {
            double distance = double.MaxValue;
            Node smallest = null;

            foreach (Node n in Basis)
            {
                if (Dist[n.Name] < distance)       
                {
                    distance = Dist[n.Name];
                    smallest = n;
                }
            }

            return smallest;
        }

        public List<Node> getNeighbors(Node n)
        {
            List<Node> neighbors = new List<Node>();

            foreach (Edge e in Edges)
            {
                if (e.Origin.Equals(n) && Basis.Contains(n))
                {
                    neighbors.Add(e.Destination);
                }
            }

            return neighbors;
        }

       public double getDistanceBetween(Node o, Node d)
        {
            foreach (Edge e in Edges)
            {
                if (e.Origin.Equals(o) && e.Destination.Equals(d))
                {
                    return e.Distance;
                }
            }

            return 0;
        }

        public List<Node> Nodes
        {
            get { return _nodes; }
            set { _nodes = value; }
        }

        public List<Edge> Edges
        {
            get { return _edges; }
            set { _edges = value; }
        }

        public List<Node> Basis
        {
            get { return _basis; }
            set { _basis = value; }
        }

        public Dictionary<string, double> Dist
        {
            get { return _dist; }
            set { _dist = value; }
        }

        public Dictionary<string, Node> Previous
        {
            get { return _previous; }
            set { _previous = value; }
        }
    }
}

static void Main(string[] args)
        {
//Nodes initialisation goes here

Dijkstra d = new Dijkstra(_edges, _nodes);
d.calculateDistance(_dictNodes["A"]);
 List<Node> path = d.getPathTo(_dictNodes["C"]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T13:42:27.853

好的，我实际上已经修改了 Dijkstra 类来执行 BFS，它为我提供了所有可能的路线。我添加了这个方法：

```
public void BreadthFirst(Edge graph, LinkedList<String> visited) 
{
    LinkedList<String> nodes = graph.adjacentNodes(visited.Last());

    // Examine adjacent nodes
    foreach (String node in nodes) 
    {
        if (visited.Contains(node))
        {
            continue;
        }

        if (node.Equals(endNode))
        {
            visited.AddLast(node);

            printPath(visited);

            visited.RemoveLast();

            break;
         }
     }

    // In breadth-first, recursion needs to come after visiting adjacent nodes
    foreach (String node in nodes)
    {      
        if(visited.Contains(node) || node.Equals(endNode))
        {
            continue;
        }

        visited.AddLast(node);

        // Recursion
        BreadthFirst(graph, visited);

        visited.RemoveLast();
    }
} 
```

用法是这样的：

```
Dijkstra d = new Dijkstra(_edges, _nodes);

LinkedList<String> visited = new LinkedList<string>();  //collecting all routes
visited.AddFirst(start);

d.BreadthFirst(graph, visited); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:08:35.550

您不能轻易修改 Dijkstra 以向您显示所有可能的路径。您需要修改 BFS 或 DFS 搜索。

如果您尝试修改 Dijkstra，最终会以 BFS 或 DFS 搜索算法结束，因此最好从那里开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:40:21.160

如果您想找到所有**简单**路径，请使用修改后的[BFS](http://en.algoritmy.net/article/45489/Breadth-first-search)（您将记住使用过的顶点，以免在路径中重复它们）。甚至不可能找到所有路径（过程不会终止（即它不是算法））。想象一下带有循环的图，所有节点之间有无限的路径（包含的循环数量不同......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:24:47.080

以下是我在网上找到的几种算法，用于在图中查找所有可能的路径。他们不会修改 Dijkstra 的算法，但我认为他们应该做你想做的事。

* * *

来自[https://mathoverflow.net/questions/18603/finding-all-paths-on-undirected-graph](https://mathoverflow.net/questions/18603/finding-all-paths-on-undirected-graph)：

> Suresh 建议使用 DFS，MRA 指出目前尚不清楚是否可行。这是我在该评论线程之后尝试的解决方案。如果图有 m 条边、n 个节点和从源 s 到目标 t 的 p 条路径，那么下面的算法会在 O((np+1)(m+n)) 时间内打印所有路径。（特别是，注意到没有路径需要 O(m+n) 时间。）
> 
> 这个想法很简单：进行详尽的搜索，但如果你陷入困境，请尽早放弃。
> 
> 如果不提早放弃，MRA 的反例表明，即使 p=1，穷举搜索也会花费 Ω(n!) 时间：节点 t 只有一个相邻边，其邻居是节点 s，它是完整（子）图的一部分Kn-1。
> 
> 将 s 推入路径堆栈并调用 search(s)：

```
path // is a stack (initially empty)
seen // is a set

def stuck(x)
   if x == t
     return False
   for each neighbor y of x
     if y not in seen
       insert y in seen
       if !stuck(y)
         return False
   return True

def search(x)
  if x == t
    print path
  seen = set(path)
  if stuck(x)
    return
  for each neighbor y of x
    push y on the path
    search(y)
    pop y from the path 
```

> 这里的搜索进行了详尽的搜索，并且可以以 DFS 样式（如这里）或 BFS 样式实现卡住。

* * *

从[循环无向图中的所有可能路径](https://stackoverflow.com/questions/3058992/all-possible-paths-in-a-cyclic-undirected-graph)：

> 您可以使用 DFS 找到所有路径，如 |Vlad 所述。要查找每个路径中出现的节点，您只需维护一个布尔数组，该数组表示到目前为止每个节点是否出现在每个路径中。当您的 DFS 找到路径时，遍历不在路径中的每个顶点并将相应的数组值设置为 false。完成后，只有值为 true 的顶点才会出现在每条路径中。
> 
> 伪代码：

```
int source;
int sink;
int nVerts;
bool inAllPaths[nVerts]; // init to all true
bool visited[nVerts]; // init to all false
stack<int> path; // init empty

bool dfs(int u)
  if (visited[u])
    return;
  if (u == sink)
    for i = 0 to nVerts-1
      if !stack.contains(i)
        inAllPaths[i] = false;
    return true;
  else
    visited[u] = true;
    stack.push(u);
    foreach edge (u, v)
      dfs(v);
    stack.pop();
    visited[u] = false;
    return false;

main()
  dfs(source);
  // inAllPaths contains true at vertices that exist in all paths
  // from source to sink. 
```

> 但是，这种算法效率不高。例如，在一个包含 n 个顶点（所有顶点与所有其他顶点之间都有边）的完整图中，路径的数量将是 n！（n 阶乘）。
> 
> 更好的算法是分别检查每个顶点的每条路径中是否存在。对于每个顶点，尝试找到从源到汇的路径，而不是去那个顶点。如果找不到，那是因为顶点出现在每条路径中。
> 
> 伪代码：

```
// Using the same initialisation as above, but with a slight modification
// to dfs: change the foreach loop to
foreach edge (u, v)
  if (dfs(v))
    return true; // exit as soon as we find a path

main()
  for i = 0 to nVerts-1
    set all visited to false;
    if (inAllPaths[i])
      visited[i] = true;
      if (dfs(source))
        inAllPaths[i] = false;
      visited[i] = false; 
```

> 不幸的是，在搜索路径时，这仍然是指数级的最坏情况。您可以通过将搜索更改为广度优先搜索来解决此问题。如果我没记错的话，这应该会给你 O(VE) 性能。

* * *

其他一些讨论这个问题的文章：

[枚举所有可能路径的算法](https://stackoverflow.com/questions/3914842/algorithm-to-enumerate-all-possible-paths)
[查找两个图节点之间的所有路径](https://stackoverflow.com/questions/9535819/find-all-paths-between-two-graph-nodes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-06T09:24:14.143

以下是使用*BFS*的方法：以下 ( `python`) 函数（修改后的*BFS*在两个节点之间具有*递归寻路*函数）可用于在*非循环图*中查找两个节点之间的所有可能路径：

```
from collections import defaultdict

# modified BFS
def find_all_parents(G, s):
    Q = [s]
    parents = defaultdict(set)
    while len(Q) != 0:
        v = Q[0]
        Q.pop(0)
        for w in G.get(v, []):
            parents[w].add(v)
            Q.append(w) 
    return parents

# recursive path-finding function (assumes that there exists a path in G from a to b)   
def find_all_paths(parents, a, b): 
    return [a] if a == b else [y + b for x in list(parents[b]) for y in find_all_paths(parents, a, x)] 
```

例如，使用下图 (DAG) G 给出

```
G = {'A':['B','C'], 'B':['D'], 'C':['D', 'F'], 'D':['E', 'F'], 'E':['F']} 
```

如果我们想找到节点之间的所有路径`'A'`并且`'F'`（使用上面定义的函数 as `find_all_paths(find_all_parents(G, 'A'), 'A', 'F'))`，它将返回以下路径：

[![在此处输入图像描述](https://i.stack.imgur.com/Gb1GZ.gif)](https://i.stack.imgur.com/Gb1GZ.gif)

# git - 如何安全地镜像 git 存储库？

> ID：16003037
> 
> 赞同：2
> 
> 时间：2013-04-14T18:56:43.220
> 
> 标签：git

我想用后台作业镜像一些 git 存储库。`git clone --mirror`并且`git remote update`不会保留通过强制推送未引用的对象，但我也想保留这些对象以防万一。是否有任何工具可以执行安全的 git 镜像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:03:32.993

尽管缺少 shell 脚本会很乏味，但如果您可以访问远程存储库，那么您可以执行：

```
git fsck --lost-found 
```

这将列出未引用的提交，然后您可以为每个提交创建一个分支：

```
git branch <branch-for-commit> <commit> 
```

在这一点上，没有任何东西是未引用的，并且克隆不会 gc/丢失任何东西。之后，如果您选择，您可以像删除分支一样[删除分支](https://stackoverflow.com/a/10610669/1286639)

像这样：

```
git fsck --lost-found | \
  grep dangling | \
  awk '{ system ("git branch" " br-" $3 " " $3); }' 
```

保留悬空提交和 blob。然后，在克隆之后，

```
git branch -a | grep "br-" | xargs git branch -D 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T09:55:40.727

在重新阅读问题和提供的答案后，我确定我误解了海报的意图。

现在我认为需要在目标存储库中启用[reflog](https://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)`core.logAllRefUpdates` ，方法是将其中的 设置为`true`，并可能调整控制 reflog 过期策略的相关参数（grep 世界“reflog”的[`git-config`手册页](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)）。这将记录所有允许回滚强制推送等的“剧烈”参考重新定位。

请注意，仍然唯一真正防止（比如说您说）“黑客攻击”或任何其他类型的损失是拥有安全的*异地*备份，所以我认为我在第一个答案中提出的建议仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:50:48.200

这几乎是一个安全问题。如果您不小心推送了密码或其他内容，则可以修改您的提交并强制推送新的提交。之后 git 将不允许对第一次提交进行任何访问。

如果你真的需要这些提交，你需要访问文件系统并使用类似的东西`rsync`来获取所有内容。- 但请注意，git 有时会进行一些垃圾收集，因此旧的未引用提交实际上会丢失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T21:56:15.127

我认为您可以采用两阶段备份：

1.  `git fetch <remote> +refs/*:refs/*`更新裸镜像存储库。

    `git gc`可能“规范化”其内容。

2.  [`rdiff-backup`](http://rdiff-backup.nongnu.org/)结果到另一个目录，该目录将包含最后备份的版本以及可用于重建任何先前备份的二进制差异文件的集合。

通过这种方式，您可以获得备份快照的版本化历史记录。由于`rdiff-backups`允许丢弃旧快照，因此您可以只记录您认为合适的快照数量。

缺点是浪费磁盘空间：

*   `rdiff-backup`将制作源目录的真实副本；不会共享任何文件。
*   AFAIK，处理包文件的 Git 内部不支持程序的`--rsyncable`命令行选项之类的东西`gzip`，因此生成的增量`rdiff-backup`可能很大。另一方面，在典型的 Git 存储库中，任何包文件都应该只被附加，而不是重写，所以我可能在这里找错了树。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T19:11:54.570

如果您要获取您控制的存储库，则有一些[`gc`配置项](https://www.kernel.org/pub/software/scm/git/docs/git-config.html#_variables)可以控制删除内容和时间的各个方面；`git remote update`（以及其他所有内容）只要您愿意，*就会保留未引用的对象。*任何具有管理权限的人都可以通过标记未引用的对象来发布它们。

因此，为了安全地镜像存储库，如果您对其具有管理控制权，只需设置一个挂钩来将传入的推送转发到永不过期的备份存储库。否则，关闭提交通知的接收将确保您记住您曾经见过*的所有内容。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T15:59:22.603

我认为其中一位评论者说得对：rsync 或等效项是您唯一的朋友，尽管它不是 Github 等的选项。

看到这个（诚然旧的）线程：

[http://kerneltrap.org/mailarchive/git/2007/8/28/256180/thread](http://kerneltrap.org/mailarchive/git/2007/8/28/256180/thread)

引用其中一条消息：

> 它与 Linux 开发实践无关。我们不获取钩子的根本原因是：
> 
> *   它们*不是*存储库的一部分；只需查看 .gitattributes-in-the-index-but-not-worktree 问题即可了解原因，
>     
>     
> *   它是*私有*数据，就像配置一样。客户*无权*阅读它们，更不用说获取它们，
>     
>     
> *   如果你在不同的机器上有钩子，很可能你需要一种机制来更新钩子……这自然建议把钩子放到他们自己的分支中。
>     
>     
> 
> 可能有更多的理由不允许诸如获取钩子之类的事情。

所以......如果你想将钩子部署在多个位置，将钩子放在他们自己的仓库中是一个很好的解决方案，但除此之外，你无能为力，因为我知道仓库中的各种对象...

（该链接的学分转到：[https](https://stackoverflow.com/a/6154010/417194) ://stackoverflow.com/a/6154010/417194 ）

特别是对于 github，*可能*有 github-services 或 web hooks 的变通方法。

# c++ - 从 Visual Studio 2008 中删除调试和发布配置

> ID：16003043
> 
> 赞同：1
> 
> 时间：2013-04-14T18:57:09.853
> 
> 标签：c++, visual-studio-2008, deployment, configuration, visual-studio-debugging

我修改了默认的 Debug 配置，使输出目录类似于`$(SolutionDir)$(PlatformName)/$(ConfigurationName)`.

接下来，我创建了调试变体，`DebugStatic`并且`DebugDll`更明确地说明了正在创建的目标。我通过复制`Debug`配置来创建它们。

以类似的方式，我创建`ReleaseDLL`了`ReleaseStatic`修改后的`Release`配置。

使用*Configuration Manager*，我删除了`Debug`和`Release`配置。

和配置仍然显示在*Batch Build 窗口*`Debug`和*Property Pages*窗口的*Configuration*下拉框中（通过右键单击项目名称，然后选择*Properties*显示）。 `Release`

 ***## 如何清理、清除、擦除、删除`Debug`和`Release`配置？

*（Debug 的模棱两可导致我花了好几个星期的时间来解决问题，尤其是在 X64 项目中意外组合 Win32 调试 DLL 时）*
*（我搜索了 Web 和 StackOverflow，但没有找到任何关于完全删除这些配置的信息。）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:11:56.590

解决方案和项目调试/发布配置不同。

解决方案配置可以由配置管理器控制（活动解决方案配置），并且项目配置可以在同一个管理器中为每个项目单独控制（项目上下文）

![在此处输入图像描述](https://i.stack.imgur.com/O70ty.png)

在上图中，您可以单击项目配置，选择编辑，然后您可以删除配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-11T09:57:09.333

请注意，要从 VS Batch 构建中清除它，您必须从项目文件 XML 中手动删除 DEBUG & RELEASE 配置的属性组。

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <OutputPath>bin\Debug\</OutputPath>
    <BuildScriptName>$(MSBuildProjectName).sql</BuildScriptName>
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <DefineDebug>true</DefineDebug>
    <DefineTrace>true</DefineTrace>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T15:56:36.130

您应该清除 .SLN 文件中的配置

```
GlobalSection(SolutionConfigurationPlatforms) = preSolution
    **Undesired Debug**|Any CPU = Debug|Any CPU
    Debug|Any CPU = Debug|Any CPU
    Release|Any CPU = Release|Any CPU
EndGlobalSection
GlobalSection(ProjectConfigurationPlatforms) = postSolution
    {CE94D753-36C5-45FA-870A-4D61DAC98B71}.**Undesired Debug** .Net Native (Debug)|Any CPU.ActiveCfg = Debug|Any CPU
    {4EFA1043-8E1B-4950-8167-C77ABE626F1E}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
    {4EFA1043-8E1B-4950-8167-C77ABE626F1E}.Debug|Any CPU.Build.0 = Debug|Any CPU
    {4EFA1043-8E1B-4950-8167-C77ABE626F1E}.Release|Any CPU.ActiveCfg = Release|Any CPU
    {4EFA1043-8E1B-4950-8167-C77ABE626F1E}.Release|Any CPU.Build.0 = Release|Any CPU
    {28D34A34-6E07-4FC3-A4B3-C704C1C5C7CE}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
    {28D34A34-6E07-4FC3-A4B3-C704C1C5C7CE}.Debug|Any CPU.Build.0 = Debug|Any CPU
    {28D34A34-6E07-4FC3-A4B3-C704C1C5C7CE}.Release|Any CPU.ActiveCfg = Release|Any CPU
    {28D34A34-6E07-4FC3-A4B3-C704C1C5C7CE}.Release|Any CPU.Build.0 = Release|Any CPU
    {6B71D000-AC8D-49AF-ADA6-D96C7ECFF093}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
    {6B71D000-AC8D-49AF-ADA6-D96C7ECFF093}.Debug|Any CPU.Build.0 = Debug|Any CPU
    {6B71D000-AC8D-49AF-ADA6-D96C7ECFF093}.Release|Any CPU.ActiveCfg = Release|Any CPU
    {6B71D000-AC8D-49AF-ADA6-D96C7ECFF093}.Release|Any CPU.Build.0 = Release|Any CPU
    {CE94D753-36C5-45FA-870A-4D61DAC98B71}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
    {CE94D753-36C5-45FA-870A-4D61DAC98B71}.Debug|Any CPU.Build.0 = Debug|Any CPU
    {CE94D753-36C5-45FA-870A-4D61DAC98B71}.Release|Any CPU.ActiveCfg = Release|Any CPU
    {CE94D753-36C5-45FA-870A-4D61DAC98B71}.Release|Any CPU.Build.0 = Release|Any CPU
EndGlobalSection 
```***

# asp.net - 如何将多个表添加到gridview

> ID：16003044
> 
> 赞同：0
> 
> 时间：2013-04-14T18:57:14.673
> 
> 标签：asp.net, sql, gridview

是否可以将 3 个不同的表添加到允许我从 SQL 数据库插入、编辑、更新和删除记录的网格视图？如果是这样，如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:03:12.890

使用一个类，它具有 3 个表中的所有必需属性。使用 3 个不同的构造函数从数据库中获取数据。之后，您可以创建该类类型的列表并将其用作网格视图的数据源。如果您使用数据集从数据库中获取数据，则不能使用此方法。您可以编写一个单独的业务逻辑层并从 UI 代码隐藏文件中调用方法。您可以使用 ADO.Net 在业务逻辑层中获取数据。

# sql-server - sql server 中的完整性约束

> ID：16003047
> 
> 赞同：0
> 
> 时间：2013-04-14T18:57:52.910
> 
> 标签：sql-server

我有一个关于完整性约束的问题

这两个请求有什么区别：

```
Create table t1 (c1 foreign key references t2(c2), ...) 
```

和

```
Create table t1 (c1 references t2(c2), ...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:02:20.090

没有区别; 他们都会创建一个`FOREIGN KEY`约束。结果，底层元数据是相同的，当您为每个表编写脚本时，SQL Server 将生成一个脚本，其中包含用于添加约束`CREATE TABLE`的单独语句。`ALTER TABLE ... ADD FOREIGN KEY`

首选第一种形式，因为它是明确的；当你说`FOREIGN KEY`你知道这将是一个`FOREIGN KEY`; 如果您不了解，那么对于不了解 DDL 语法的所有细微差别和可选元素的人来说，这可能是模棱两可的。

请注意，在这两种情况下，它们都将创建一个*系统命名的* `FOREIGN KEY`约束（例如`FK__t1__c1__35BCFE0A`，或`FK__t1__c1__37A5467C`- 不必要的神秘，只是为了防止与其他约束名称发生冲突）。最佳实践建议您应该明确命名您的约束，例如

```
CREATE TABLE dbo.t1
(
   c1 ...,
   CONSTRAINT fk_t1_t2 FOREIGN KEY(c1) REFERENCES dbo.t2(c2)
); 
```

# ruby - 从没有重复的大文件中选择随机行

> ID：16003048
> 
> 赞同：4
> 
> 时间：2013-04-14T18:57:55.343
> 
> 标签：ruby, file-io

我试图从一个大文件（> 百万行）中选择一个随机行，而不是选择任何重复项。如果有骗子，那么我想继续挑选更多，直到找到非骗子。

到目前为止我得到了什么：

```
@already_picked = []

def random_line
  chosen_line = nil
  chosen_line_number = nil
  File.foreach("OSPD4.txt").each_with_index do |line, number| 
    if rand < 1.0/(number+1)
      chosen_line_number = number
      chosen_line = line
    end
  end
  chosen_line
  if @already_picked.include(chosen_line_number)?
    # what here?
  else
    @already_picked << chosen_line_number
  end
end

100.times do |t|
  random_line
end 
```

我不确定在`if`条款中该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:57:18.267

1 million lines isn't very much. if they avg 100 bytes/line, that's 100MB in memory. So do the simple thing and move on

```
File.readlines("file").sample(100) 
```

If you start talking bigger than easily fits in memory, the next step is to do one pass over the file to record line positions, then just pull samples from that.

```
class RandomLine
  def initialize(fn)
    @file = File.open(fn,'r')
    @positions = @file.lines.inject([0]) { |m,l| m << m.last + l.size }.shuffle
  end

  def pick
    @file.seek(@positions.pop)
    @file.gets
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:26:00.630

每次请求随机行时，您的方法可能会读取大量文件。更好的方法可能是读取整个文件一次并构建每行开始位置的表（这样您就不必将所有数据保存在内存中）。假设文件没有改变，那么您可以在此表中寻找一个随机位置并读取一行。快点。一种可能的实现：

```
class RandomLine
  def initialize(filename)
    @file = File.open(filename)
    @table = [0]
    @picked = []
    File.foreach(filename) do |line|
      @table << @table.last + line.size
    end
  end
  def pick
    return nil if @table.size == 0 # if no more lines, nil
    i = rand(@table.size) # random line
    @file.seek(@table[i]) # go to the line
    @table.delete_at(i)   # remove from the table
    line = @file.readline
    if @picked.include? line
      pick   # pick another line
    else
      @picked << line
      line
    end
  end
end 
```

用法：

```
random_line = RandomLine.new("OSPD4.txt")
100.times do
  puts random_line.pick
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:07:16.837

While it's very noble to go to that much work to avoid reading the file into memory, a million lines isn't all that much. An alternative is to just try a simple solution and only go complex if it's actually slow *in practice.*

```
class RandomLine
  def initialize fn
    open(fn, 'r') { |f| @i, @lines = -1, f.readlines.shuffle }
  end

  def pick
    @lines[@i += 1]
  end
end

q = o = RandomLine.new '/etc/hosts'
puts q while q = o.pick 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T20:41:34.143

As reading file returns array of lines, you can just go with #sample method.

```
File.readlines("OSPD4.txt").sample(100).map{|line| line.chomp }
# using chomp to get rid of EOL 
```

# java - 如何从 Java 中的 URL 读取 JSON 数据？

> ID：16003051
> 
> 赞同：2
> 
> 时间：2013-04-14T18:58:15.023
> 
> 标签：java, json, jackson

这是我的阿曼班：

```
import org.codehaus.jackson.annotate.JsonIgnoreProperties;

@JsonIgnoreProperties(ignoreUnknown=true)
public class  Aman
{

public static class Title
{
    private String title;

    public String getTitle(){ return title; }

    public String setTitle(String s){ return title = s; }
}

private int id;
private int year;
private int total;

public void id(int i){ id = i; }

public void year(int y){ year = y; }

public void total(int t){ total =t; }
} 
```

这是映射值的 Movie 类：

```
import java.io.File;
import java.io.IOException;
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import java.net.*;

public class Movie
{
 public static void main(String[] args) throws MalformedURLException, URISyntaxException, IOException {
 Aman a = new Aman();
 ObjectMapper mapper = new ObjectMapper();
 URL RT = new URL("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=gzscv4f8zqse75w94mmp37zz&q=Toy+Story+3&page_limit=1").toURI().toURL();
 a = mapper.readValue(RT, Aman.class);
    }

} 
```

我一遍又一遍地遇到同样的异常。

难道我做错了什么？

这是不断发生的异常：

`Exception:Exception in thread "main" org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "total" (Class Aman), not marked as ignorable at [Source: http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=gzscv4f8zqse75w94mmp37zz&q=Toy+Story+3&page_limit=1; line: 31, column: 11] (through reference chain: Aman["total"])`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:04:35.940

在`Aman`类的顶部，添加以下注释 - `@JsonIgnoreProperties(unknown=true)`。或者实际上将 JSON 中存在的所有属性映射为类中的属性。

```
@JsonIgnoreProperties(ignoreUnknown=true)
class Aman {
    // properties
} 
```

[Jackson FasterXML Wiki](http://wiki.fasterxml.com/JacksonHowToIgnoreUnknown)中描述了管理非映射属性的其他一些选项。

* * *

### 编辑：

根据您的评论，您映射 JSON 的数据类也没有任何属性。这是行不通的。我建议阅读有关 FasterXML 的[5 分钟 Jackson 教程](http://wiki.fasterxml.com/JacksonInFiveMinutes)，但映射的一般要点是：

给定 JSON 文档：

```
{
    "message" : "Hi, I am a JSON object",
    "sender" : "Bob"
} 
```

和 Java 对象：

```
@JsonIgnoreProperties(unknown=true)
class Post {
    private String message;
} 
```

您可以使用 Jackson 编写以下代码以将 JSON 映射到对象：

```
final ObjectMapper mapper = new ObjectMapper();
final Post post = mapper.readValue(json, Post.class); 
```

*假设这`json`是一个包含显示的 JSON 数据的字符串*

Jackson 会将 JSON 中的属性映射到 Java 对象中的属性。在所示示例中，JSON 中有一个名为`sender`. 通常，如果您的 Java 对象上没有同名的相应属性，则库会抛出异常，但使用`@JsonIgnoreProperties(unknown=true)`注释会覆盖此行为，反序列化会继续进行。

因此，您需要做的是定义一个`Aman`类，该类的属性与烂番茄 API 发送给您的 JSON 相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:03:23.967

您`Aman`应该从远程接收数据的类没有字段`total`，而您收到的 JSON 具有此字段。

您可以将其添加到课程中，也可以通过以下方式告诉杰克逊忽略它收到的未知事物：

```
mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

在运行之前`mapper.readValue()`。

# java - Vector 添加元素，但不久后将其删除

> ID：16003057
> 
> 赞同：-1
> 
> 时间：2013-04-14T18:59:30.393
> 
> 标签：java

首先，我的代码（缩短）：

```
import java.util.Vector;

public class GameField {

    private Vector rooms = new Vector();

    public void generateRooms() {
        for (int i = 0; i < 10; i++) {
            rooms.add(new Room(x, y, width, height));
        }
    }
} 
```

我知道 Vector 类是通用的，但我们还没有学过这些，我们应该像这样使用它。

当我调用该方法`generateRooms()`时，它不会按预期添加十个房间，而是在每个循环中添加一个房间，并在循环开始时再次删除该房间。

最后，我在 Vector 中只有一个房间，而不是十个。

为什么会这样？是因为我不使用泛型类型还是导致这种行为的其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:33:54.040

我让`generateRooms`函数返回`room`向量，它工作正常：

```
public class Room {

    int x;
    int y;
    int width;
    int height;

    public Room(int x, int y, int width, int height) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }
}
class Main {

    private Vector rooms = new Vector();

    public Vector generateRooms() {
        for (int i = 0; i < 10; i++) {
            rooms.add(new Room(1 * i, 2, 3, 4));
        }
        return rooms;
    }

    public static void main(String[] args) {
        Main m = new Main();
        Vector r = m.generateRooms();
        for (int i = 0; i < 10; i++) {
            Room room = (Room) r.get(i);
            System.out.println(room.x + "   " + room.y + "   " + room.width + "    " + room.height);
        }
    }
} 
```

# php - 在 php 中使用 xampp 发送邮件

> ID：16003058
> 
> 赞同：9
> 
> 时间：2013-04-14T18:59:31.793
> 
> 标签：php, sendmail

我看过很多视频，但不知道如何使用`send mail`php。

我已经配置了`smtp port`and`server`以及`php.ini`文件和`sendmail.ini`文件，更改了`auth_username`and `password`。但是，下面的代码仍然不起作用！

```
<?php
    mail('xyz@gmail.com','Hello','Testing Testing','From:abc@gmail.com');
?> 
```

我需要下载任何东西或更改 gmail 设置吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T07:01:18.197

配置 php.ini 以从您的服务器发送电子邮件非常容易。您只需要`php.ini and sendmail.ini`正确配置即可。

首先你必须在你的 php.ini 文件中配置 sendmail_path 它应该指向带有正确标志的可执行 sendmail 文件

例如， `;sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"`（已经在您的 php.ini 文件中，只需删除注释）和 sendmail_path 的其他分配需要注释。

配置好 php.ini 文件后，需要配置 sendmail.ini 文件，其中

第一个`smtp_server=mail.gmail.com`（因为您想使用 gmail 作为 smtp 服务器），第二个`smtp_port=465`（如果不工作，请尝试 587），第三个`auth_username= yourid@gmail.com` `auth_password=yourpassword`

在此之后重新启动您的服务器。

# distributed-computing - 为什么计算流体动力学问题在并行处理中难以解决？

> ID：16003059
> 
> 赞同：0
> 
> 时间：2013-04-14T18:59:34.513
> 
> 标签：distributed-computing, mathematical-optimization, fluid-dynamics, boinc

我在分布式计算界听说过这个。我不是机械工程师。你能说出为什么会这样吗？有什么解决方案吗？

PS：我可以使用有限元方法作为解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T23:30:40.680

获得拉普拉斯方程的解决方案存在一些基本困难，但看起来您是在专门询问将 cfd 扩展到并行。根据我的经验（航空航天硕士，开发等离子体模拟器 2 年），并行求解 CFD 的基本概念并不难。不幸的是，有源源不断的边缘情况会导致您的解决方案爆炸。我们在处理器边界遇到符号错误，在某些条件下在某些处理器上未初始化的变量，以及许多其他“我们应该想到的”。如果**困难**是指**慢**，那么这个问题有点特定于领域，但归结为 1) 处理器之间的高通信开销和 2) （显式解决方案）的短时间步长或每个时间步长的高迭代次数（隐式解决方案），这很难避免在求解椭圆 PDE 时。

许多工具使用有限元。它非常强大/灵活。

# jira - 如何在 GreenHopper 看板上的卡片上显示故事点？

> ID：16003061
> 
> 赞同：5
> 
> 时间：2013-04-14T18:59:57.200
> 
> 标签：jira, scrum, jira-plugin, kanban, jira-agile

我正在考虑在 JIRA GreenHopper 上从 scrum 切换到看板模板。

看板式工作模式上的用户故事卡不显示用户积分：

![在此处输入图像描述](https://i.stack.imgur.com/DfEIm.png)

我怎样才能把它改成这样：

![在此处输入图像描述](https://i.stack.imgur.com/JYRN1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T09:06:51.797

我创建了一个 Javascript 解决方案来在 Scrum/看板板上显示故事点。

该脚本附加[到此](https://jira.atlassian.com/browse/GHS-6755)jira 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T15:16:01.677

您不是第一个提出此要求的人 - Atlassian 有一个出色的功能要求：[https](https://jira.atlassian.com/browse/GHS-7265) ://jira.atlassian.com/browse/GHS-7265 。我建议任何偶然发现这个问题的人在请求中添加他们的投票 - 也许有一天我们会得到它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:08:41.203

没有简单的方法，尽管您可以根据故事点或其他自定义字段上的 JQL 查询来更改卡片颜色

# c# - 无法使用实体框架正确创建控制器

> ID：16003066
> 
> 赞同：-1
> 
> 时间：2013-04-14T19:00:30.260
> 
> 标签：c#, asp.net-mvc, entity-framework, poco

所以这里是一个快速的概述。我正在使用 Code First，新数据库。

![概述](https://i.stack.imgur.com/GxN0G.png)

如您所见，我创建了一个 AccountModels 模型（与默认名称相同，以防任何人感到困惑）。它如下所示：

```
public class User
{
    public int UserId { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public virtual ICollection<Stat> Stats { get; set; }
}

public class Stat
{
    public int StatId { get; set; }
    public string Age { get; set; }
    public string Height { get; set; }
    public string Weight { get; set; }
    public bool Sex { get; set; }

    public int UserId { get; set; }
    public virtual User User { get; set; }
}

public class BodylogDbContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Stat> Stats { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<BodylogDbContext>(null);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

现在，当我尝试添加控制器时，我无法选择我的模型类 AccountModel。我记得，我应该能够选择模型类，然后在下一个字段中选择我的数据上下文类 - BodylogDbContext (Bodylog.Models)，并且应该设置所有内容。但我不能，为什么？

![创建控制器](https://i.stack.imgur.com/nsTj2.png)

这是我的连接字符串。

```
 <add name="BodylogDbContext"
   connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Bodylog.mdf;Integrated Security=True"
   providerName="System.Data.SqlClient"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:25:47.833

拥有`.cs`文件不会创建“隐含”类。您只会在下拉列表中看到具有具体定义的类型。因此，如果您想要一个父类`AccountModel`（所有其他 POCO 定义该模型的属性），您将需要类似以下内容：

```
public class AccountModel
{
    public User UserModel { get; set; }
    public Stat StatModel { get; set; }
} 
```

所以你的 Razor 模型绑定看起来类似于：

`@model Your.Fully.Qualified.Namespace.AccountModel`

您可以像这样绑定到模型的 User 属性：

`@Html.EditorFor(m => m.UserModel.Email)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:13:27.113

一切都在这里按预期工作。这里的问题之一是在示例项目中，提供了一个名为 AccountModels.cs 的文件，其中包含多个模型类。约定规定这些实际上被拆分为多个文件，每个类一个文件，并以该类命名。

您的项目中没有名为 AccountModels 的类，这就是为什么它没有作为模型的选项出现的原因。

# jquery - 使用 HTML5 颜色输入类型操作文本阴影颜色

> ID：16003069
> 
> 赞同：0
> 
> 时间：2013-04-14T19:00:58.830
> 
> 标签：jquery, html, css

我正在尝试使用 HTML5 颜色输入类型更改文本阴影的颜色：

```
<script>
$('#shadowcolor').on('change', function() {
    var shadowcolor = $('#shadowcolor').val();
    $('#output').css('text-shadow', '5px 5px shadowcolor');
});
</script>

<label class="color" for="shadowcolor">Color</label><input id="shadowcolor" type="color" value="#ff0000" />

<div id="output">
    <h1>Some Text with a Shadow</h1>
</div> 
```

但是，我认为我没有正确设置“shadowcolor”变量，因为这只会破坏阴影。有谁知道我怎么能实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:02:34.400

这里的问题是您试图将颜色设置为实际上是字符串`"shadowcolor"`，而不是变量的值。要解决此问题，您需要将`shadowcolor`（变量）的值附加到字符串上`"5px 5px "`。

试试这个：

```
 $('#output').css('text-shadow', '5px 5px ' + shadowcolor); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:04:32.270

工作小提琴：http: **[//jsfiddle.net/Hm9ZK/](http://jsfiddle.net/Hm9ZK/)**

```
$('#shadowcolor').on('change', function() {
var shadowcolor = $('#shadowcolor').val();
$('#output').css('text-shadow', '5px 5px' + shadowcolor);
}); 
```

# erlang - 简单过滤器 Erlang

> ID：16003071
> 
> 赞同：1
> 
> 时间：2013-04-14T19:01:02.600
> 
> 标签：erlang

试图弄清楚这个简单的 Erlang 过滤器问题。它应该接受一个谓词和一个列表，并返回第一个列表的修改版本，其中包含为谓词返回 true 的所有元素。

```
-module(filter).
-export([filterlist/2]).

-spec filterlist(fun((T) -> boolean()), [T]) -> [T].

filterlist (P, LL) -> lists:filter(fun(X) -> X == P end, LL). 
```

我无法让它工作。它只返回和空列表[]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:30:30.653

如果您不想`lists:filter/2`以某种方式使用库函数（您的函数正是这样`lists:filter/2`做的）

```
filterlist(P, L) -> lists:filter(P, L). 
```

你可以使用列表理解

```
filterlist(P, L) -> [ X || X<-L, P(X) ]. 
```

或者自己写

```
filterlist(_, []) -> [];
filterlist(P, [H|T]) ->
  case P(H) of
    true -> [H|filterlist(P, T)];
    false -> filterlist(P, T)
  end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:12:39.257

`P`是一个谓词，这意味着一个接受一个值并返回一个布尔值的函数。

因此，与其写作`X == P`，不如写作`P(X) == true`，这就是简单的写作`P(X)`。

问题是，现在您只需调用`lists:filter`：

```
filterlist(P, LL) -> lists:filter(P, LL). 
```

如果您要过滤带有谓词的列表，请从以下内容开始：

```
filterlist(_, [])          -> [],
filterlist(P, [Elem|Rest]) ->    % ... 
```

要么`%...`保留`Elem`，要么跳过它，然后调用`filterlist(P, Rest)`

# mysql - Ace 有 MySQL 模式吗？

> ID：16003074
> 
> 赞同：2
> 
> 时间：2013-04-14T19:01:13.740
> 
> 标签：mysql, ace-editor

我刚刚在我的网站上嵌入了[ace ；](http://ajaxorg.github.io/ace/#nav=about)它有 MySQL 模式吗？

我看到了 SQL，但没有特定于 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:34:24.800

目前只有 sql 和 postegres sql 模式。为 MySQL 添加新模式应该相对容易，我建议在 github 上打开一个关于此的问题。

# ruby-on-rails - RoR：连接两个变量并传递参数？

> ID：16003076
> 
> 赞同：0
> 
> 时间：2013-04-14T19:01:27.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, concatenation

如何在 Ruby on Rails 中连接变量？

说我有这个：

```
 tags.each do |tag, index|
            @tag_index = client.tag_recent_media(tag)
        end 
```

我不知道如何把`tag`和`index`放在一起？`tag`我想将参数传递给是否有意义`tag_recent_media`？

谢谢

编辑

我应用了以下答案：

```
 @tag.concat(index.to_s) = client.tag_recent_media(tag) 
```

我收到语法错误

```
syntax error, unexpected '=', expecting keyword_end
                @tag.concat(index.to_s) = client.tag_recent_media(tag) 
```

我正在尝试做的是迭代`tags`，我试图将`index`标签的位置应用到`tag`值上，然后将其用作变量。

因此，如果它迭代的第一个值位于 0 并且值为“apple”，那么我想要变量

```
@apple_0 = client.tag_recent_media() 
```

也`tag_recent_media()`应该是我正在使用的 API 的实例方法。[文档](http://rubydoc.info/gems/instagram/0.10.0/Instagram/Client/Tags)显示它应该传递一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:06:04.553

可以使用[concat](http://ruby-doc.org/core-2.0/Array.html#method-i-concat)方法连接字符串：

例如：

在您的情况下，我假设您具有`tag`类型`string`和`index`类型`integer`。因此，您可以执行以下操作：

```
 a="tag"; b=1
 a.concat(b.to_s)  #=> "tag1" 
```

你没有清楚地表明你`tag_recent_media`在做什么。如果您提供有关您正在调用的方法的更多信息，它将很容易帮助您提供正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:09:54.837

> 我正在尝试做的是遍历标签，并尝试将标签的索引位置应用于标签值，然后将其用作变量。
> 
> 因此，如果它迭代的第一个值位于 0 并且值为“apple”，那么我想要变量

```
@apple_0 = client.tag_recent_media() 
```

* * *

这将需要定义动态方法的元编程，在这种情况下这是非常糟糕的方法。为什么数组对你来说不够用？

```
@new_tags = []
tags.each do |tag, index|
  @new_tags[index] = client.tag_recent_media(tag)
end 
```

甚至更好

```
@new_tags = []
tags.each_with_index.map {|tag, i| @new_tags[i] = client.tag_recent_media(tag) } 
```

然后你可以遍历@new_tag 数组。

# matlab - 如何在指定的用户定义函数中遍历matlab中矩阵的行和列

> ID：16003077
> 
> 赞同：2
> 
> 时间：2013-04-14T19:01:28.333
> 
> 标签：matlab

这是我的导师说的。我需要以下特定编码的帮助，其中涉及遍历先前确定的数组中的行和列。colNum = 20 和 rowNum 10。 tempToColor 函数也已定义并正在工作，它创建一个 101x3 矩阵，每行根据 0-100 度之间的温度给出不同的颜色阴影。

“这个函数有一个 finElems 参数并且不返回任何东西。它绘制了在 finElems 数组中找到的所有温度值。你可以在下面看到我的示例图。要绘制颜色，请使用如下语句：

```
plot(colNum, numRows-rowNum, 's', 'Color', color, 'MarkerFaceColor', color, 'MarkerSize', 20); 
```

为了使用这个语句，你应该创建一些变量：colNum：这是当前列号。你将遍历数组中的所有列，所以将当前列号存储在这个变量中。rowNum：与 colNum 相同，只是它是当前行号。•color：这是由函数 tempToColor 确定的当前 finElems 元素的颜色。我发现有必要使用表达式 numRows - rowNum 以便数组的底行（编号最高的行）显示为图表。否则，鳍会在图表中倒置。将此大纲用于该功能：

```
function plotFin(finElems)

hold on;

% iterate through all the rows:

% iterate through all the columns: (this is a loop within a loop)

% Use the tempToColor function to get the temperature.

% Plot the temperature color.

% end

% end

axis equal tight;

axis([0 (numCols+1) -1 numRows]);

hold off;

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T21:12:26.630

Matlab 的一些迭代“工具”是循环语句。如果您在迭代之前知道要执行多少次循环，那么`for`这就是您的事。如果您不知道，并且每次都需要决定是否继续迭代，那么您可以使用`while`. 如果你有 Matlab，打开它，在编辑器窗口中输入`for`and `while`，然后将光标移到它们上，然后按 F1。（别担心，文字会一直在这里，直到你回来）。

在您的情况下，您事先知道必须遍历多少行 (10) 和多少列 (20)。那么，你需要的是什么？...没错，你需要一个`for`. 在行的情况下，语句可能如下所示：

```
for num_rows = 1:10
        % Here add some code
end; 
```

这告诉 Matlab 执行十次内的任何内容。每次，循环体内的值`num_rows`都会不同`for`：第一次是 1，然后是 2，然后是 3，依此类推，直到 10。

现在，计划是：对于每一行，您还必须迭代槽列。为此，可以将两个循环组合在一起（我认为这个词是“巢”——对不起，不是英语母语人士。想想像电子表上的数字一样的嵌套循环：每小时迭代有 60 个分钟迭代。）此代码可能如下所示：

```
for num_rows = 1:10
        for num_cols = 1:20
                % Here some other code
        end;
end; 
```

现在，`num_cols`每次内部迭代的值在 1 时从 1 变为 20 `num_rows`，然后在 2 时再次从 1 变为 20 `num_rows`，依此类推，直到`num_rows`10 和`num_cols`20。

*随着这些东西的澄清（我希望），我建议你去按 F1 在 Matlab 中的更多东西上；它是目前写得最好的帮助文档之一，如果不利用它会很遗憾。*

# networking - 托管环境中的 Openstack

> ID：16003078
> 
> 赞同：3
> 
> 时间：2013-04-14T19:01:37.600
> 
> 标签：networking, cloud, openstack, grizzly, openstack-neutron

我正在尝试在无法访问网络设备的托管环境中配置 OpenStack。这就是为什么我想使用 GRE 隧道来创建一个内部 OpenStack 网络。

**环境**

主机是 Softlayer，其中提供的服务器可以访问两个不同的网络。一个是专用网络（绑定接口，bond0），第二个是公共网络（另一个绑定接口，bond1）。

公共接口具有可公开访问的 IP 地址。也有可能将公共可移植 IP 地址路由到公共网络（可通过 bond1 接口访问）。

专用网络基于一个客户 VLAN。此 VLAN 中有多个子网。每个子网都有一个由 Softlayer 管理的网关。

**要求**

我想实现与此[Cisco 文档](http://docwiki.cisco.com/wiki/COE_Grizzly_Release:_High-Availability_Manual_Installation_Guide)中描述的类似设置， 但使用 GRE 隧道。

我希望我的虚拟机能够访问非 openstack 资源。我希望他们根据需要分配浮动 IP。我想用来自 grizzly 版本的量子来做到这一点，以便能够拥有高可用性的网络节点（l3-agent 从 grizzly 版本开始就有这个选项）。

**问题**

1.  br-int 应该是bond0 而br-ex 应该是bond1 吗？
2.  我是否应该在 Softlayer 私有子网 (10.0.0.0/8) 之外为 VM 使用全新的子网（如 172.16.0.0/16）并将 SL 子网视为外部子网？
3.  我可以为我的虚拟机使用 SL 子网吗？我将如何实现这一目标？我应该如何配置 OpenStack 路由器以在虚拟机和真实网络之间进行路由？假设我从 Softlayer 订购网络 10.20.30.0/26。它有一个 IP 地址为 10.20.30.1 的网关。我想给我的虚拟机地址 .2、.3 等等，但是如何将它们路由到 OpenStack 并返回？
4.  你会建议我如何在这样的环境中配置网络？

# c++ - 如何用另一个结构初始化结构数组？

> ID：16003080
> 
> 赞同：-3
> 
> 时间：2013-04-14T19:01:40.780
> 
> 标签：c++, machine-learning, backpropagation

您好，我正在用 C++ 编写反向传播算法，它由 1 个输入层、1 个隐藏层和 1 个输出层组成。我很好奇如何初始化我的输入层、隐藏层和输出层。

这就是我得到的：

```
struct Neuron {
double activation;
double bias;
double *incomingWeights;
};

struct Network {
double *targetLayer;
Neuron *inputLayer;
Neuron *hiddenLayer;
Neuron *outputLayer;
};

ann.inputLayer = malloc(din * sizeof * Neuron); //ERROR
for (int i = 0; i < din; i++) {
    ann.inputLayer[i].activation = 0;
    ann.inputLayer[i].bias = 0;
    ann.inputLayer[i].incomingWeights = NULL;
}

ann.outputLayer = malloc(dout * sizeof * Neuron); //ERROR
for (int i = 0; i < dout; i++) {
    ann.outputLayer[i].activation = 0;
    ann.outputLayer[i].bias = 0;
    ann.outputLayer[i].incomingWeights = new double[dhid];
} 
```

din 表示我的输入层中的神经元数量。dhid 表示我的隐藏层中的神经元数量。dout 代表我的输出层中的神经元数量。我没有费心展示我的隐藏层的初始化，因为它不重要，谢谢

我在根据我的 IDE（netbeans）显示错误的行上写了 //ERROR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:10:03.490

首先，您永远不想在调用代码中进行默认初始化，您可以为您的结构创建一个构造函数并在那里执行：

```
struct Neuron {
   Neuron() : activation(0.0), bias(0.0), incomingWeights(0) {}
   double activation;
   double bias;
   double *incomingWeights;
}; 
```

然后（因为这是 C++）

```
for (int i = 0; i < din; i++) {
   ann.inputLayer[i] = new Neuron[din]; 
```

您应该在 C++ 中使用`new`over `malloc`，但如果您确实需要`malloc`您的语句，则需要修复：

```
ann.inputLayer = (Neuron*)malloc(din * sizeof(Neuron)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:08:47.517

[不要`malloc`在 C++ 中](https://stackoverflow.com/a/184540/16287)使用。

作为*对您所拥有的内容的最小更改*，请更改以下内容：

```
ann.inputLayer = malloc(din * sizeof * Neuron); 
```

对此：

```
ann.inputLayer = new Neuron[din]; 
```

`new`这里对您的代码的读者来说更清楚，在需要时执行构造，并返回正确的指针类型。

（与`dout`线路相同）

*编辑：*

您还可能会发现管理指针要容易`std::vector` *得多。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:17:46.857

仅作记录：您收到错误的原因是因为您正在使用 C++ 编译器编译 C 代码。 `malloc`返回一个`void*`。在 C 中， this 隐式转换为任何其他指针类型；在 C++ 中，您需要显式转换。

除此之外，正如其他人所说，您*永远不*应该在 C++ 中使用`malloc`（除非出于与 C 兼容的原因，即您将指针传递给用 C 编写的函数，该函数将调用`free`它）。事实上，在你所展示的小部分中，不应该有任何指针和动态分配：定义你的类型，添加构造函数，当你需要多个时，使用`std::vector`.

# asp.net - OleDbConnection 连接错误

> ID：16003084
> 
> 赞同：0
> 
> 时间：2013-04-14T19:02:11.617
> 
> 标签：asp.net, c#-4.0, oledbconnection, executenonquery

我写了这些代码块：

ConnectDB.getConStr();

```
 string query = "insert into users (memberName,memberSurname,memberEmail,userName,userPassword) values(@mn,@msn,@me,@un,@up)";
        OleDbCommand cmd = new OleDbCommand( query,ConnectDB.getConStr());
        cmd.Parameters.AddWithValue("@mn", txtName.Text);
        cmd.Parameters.AddWithValue("@msn", txtSurname.Text);
        cmd.Parameters.AddWithValue("@me", txtEmail.Text);
        cmd.Parameters.AddWithValue("@un", txtUsername.Text);
        cmd.Parameters.AddWithValue("@up", txtPassword.Text);

        try
        {
            ConnectDB.getConStr().Open();
            cmd.ExecuteNonQuery();
            ConnectDB.getConStr().Close();
            ltrMesaj.Text = "Record has been added";
            Response.Redirect("Login.aspx");
        }
        catch (Exception ex)
        {
            ltrMesaj.Text = ex.Message;
        } 
```

但我收到这样的错误：ExecuteNonQuery 需要一个打开且可用的连接。连接的当前状态为关闭。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:06:58.370

每次访问它时，您都在创建新`instances`的。`connection`所以只创建一个`instance`并像这样使用它

```
 OleDbConnection connection= ConnectDB.getConStr();
    string query = "insert into users (memberName,memberSurname,memberEmail,userName,userPassword) values(@mn,@msn,@me,@un,@up)";
        OleDbCommand cmd = new OleDbCommand( query,connection);
        cmd.Parameters.AddWithValue("@mn", txtName.Text);
        cmd.Parameters.AddWithValue("@msn", txtSurname.Text);
        cmd.Parameters.AddWithValue("@me", txtEmail.Text);
        cmd.Parameters.AddWithValue("@un", txtUsername.Text);
        cmd.Parameters.AddWithValue("@up", txtPassword.Text);

        try
        {
            connection.Open();
            cmd.ExecuteNonQuery();
            connection.Close();
            ltrMesaj.Text = "Record has been added";
            Response.Redirect("Login.aspx");
        }
        catch (Exception ex)
        {
            ltrMesaj.Text = ex.Message;
        } 
```

# asp.net - 无法使用 vs 2012 express 将 Web 应用程序发布到文件系统

> ID：16003088
> 
> 赞同：1
> 
> 时间：2013-04-14T19:02:33.103
> 
> 标签：asp.net, .net, visual-studio-2010, visual-studio-2012, msbuild

我尝试将 3 个不同的 Web 应用程序发布到我的文件系统，并且每次收到相同的错误消息：

**"指定的路径、文件名或两者都太长。全限定文件名必须小于 260 个字符，目录名必须小于 248 个字符。ASPNETCOMPILER"**

我已经下载了 Visual Studio 2012 30 天试用版，它运行良好，但不幸的是我买不起。

知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:09:22.653

错误说明了自己：一个或多个路径超过 260 个字符。

首先，缩短您的工作区目录（例如，从 更改`C:\SomeDir\SomeAnotherDir\Sources\YourProject`为`C:\src\YourProject`）。

还要确保在服务器上应用最新的 TFS[更新](http://www.microsoft.com/visualstudio/eng/visual-studio-update)，这[会将限制扩展到 400 个字符](http://tfs.visualstudio.com/en-us/home/news/2012/oct-8/)（在源代码控制树中，而不是工作区目录中）。

# c# - 等待n秒，然后下一行代码不冻结表格

> ID：16003090
> 
> 赞同：17
> 
> 时间：2013-04-14T19:02:38.807
> 
> 标签：c#, timer, delay, wait

嗨，我正在尝试找到一种在移动到下一行代码之前等待几毫秒的方法，

我已经查看了 Thread.Sleep 但这会冻结主窗体，我希望它保持活动状态。

我尝试了计时器和秒表，当它们应该在它们打勾时发布到控制台时，它们都会冻结主窗体。

我也找不到在我想要的等待中使用 task.delay 或后台工作人员的方法。

伪代码：

```
Wait 2 - 6 seconds
Log "waiting"
Log "waiting"
Log "waiting"
Stop Waiting - Run next line of code. 
```

我尝试过的方法只是冻结表单并随后填写日志，我只想要一个简单的等待方法，无需冻结表单，也无需处理被调用的事件，这意味着下一行不会运行。

任何帮助都会很棒，因为我还是 c# 的新手，它让我有点发疯:(

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-14T19:10:31.027

`await`关键字与 with 一起使这`Task.Delay`变得微不足道。

```
public async Task Foo()
{
    await Task.Delay(2000);
    txtConsole.AppendText("Waiting...");
    DoStuff();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:06:49.807

尝试使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)。这是一个非常方便的对象，它完成了委托给 UI 线程的所有工作。

例如：

```
private DispatcherTimer _dtTimer = null;

public Constructor1(){
  _dtTimer = new DispatcherTimer();
  _dtTimer.Tick += new System.EventHandler(HandleTick);
  _dtTimer.Interval = new TimeSpan(0, 0, 0, 2); //Timespan of 2 seconds
  _dtTimer.Start();
}

private void HandleTick(object sender, System.EventArgs e) {
  _uiTextBlock.Text = "Timer ticked!";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T19:07:45.847

在这种情况下，计时器应该可以正常工作，除非您将 Thread.Sleep 放在其处理程序中，或者处理程序本身需要太多时间才能完成。

您尚未指定您使用的 UI 框架或 .Net 版本，但对于最新的 .Net，您可以使用 async/await。这样，当您的代码等待后台任务时，UI 不会被冻结

```
void async MyMethod()
{  
    var result = await Task.Run(() => long_running_code);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-12T13:20:26.103

```
DateTime Tthen = DateTime.Now;
            do
            {
                Application.DoEvents();
            } while (Tthen.AddSeconds(5) > DateTime.Now); 
```

# java - 重定向 System.out 并附加到现有文件

> ID：16003102
> 
> 赞同：3
> 
> 时间：2013-04-14T19:03:38.933
> 
> 标签：java, file, logging, io-redirection

我有一个每 10 分钟运行一次的 Java 程序。我想捕获这个过程的日志，例如考虑（我的程序本质上是做什么的）：

```
public static void someFunction()
{
    System.setOut(new PrintStream(LOG_DIR));
    System.out.append("whatever I am appending about my program")
} 
```

在这种情况下`someFunction`，将`main`每 10 分钟调用一次。但是，它总是覆盖由`LOG_DIR`. 我认为这是因为它只是创建了一个新文件并保存了以前在 file 中的内容`LOG_DIR`。因此，我尝试追加到文件末尾是多余的。

1.  当函数每 10 分钟调用一次时，我的程序如何写入某个文件的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:11:07.580

最好的解决方案是利用几个现有的日志框架之一。但是，如果您坚持自己滚动，则需要附加到输出文件，而不是覆盖它：

```
System.setOut(new PrintStream(new FileOutputStream(LOG_DIR, true))); 
```

注意 的布尔参数`FileOutputStream`，它指定流应该以***附加***模式打开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T19:13:31.627

[只需以附加模式](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)打开您的日志文件，如下所示：

```
System.setOut(new PrintStream(new FileOutputStream(LOG_DIR, true))); 
```

> 它创建一个文件输出流以写入由指定 File 对象表示的文件。如果第二个参数为真，那么字节将被写入文件的末尾而不是开头。创建一个新的 FileDescriptor 对象来表示此文件连接。

# jquery - jQuery悬停奇怪的错误

> ID：16003104
> 
> 赞同：1
> 
> 时间：2013-04-14T19:04:06.683
> 
> 标签：jquery, html, jquery-hover

我的 jQuery 悬停几乎没有问题。我制作我的个人页面并从 AJAX 加载我的数据。所以我无法弄清楚为什么悬停是窃听。首先我很艰难，因为我的元素是 position:absolute，但后来我对其进行了编辑并使其成为正常的 div。这是我的代码：

```
<td id="project" style="background: url('img/pctutorials-bg.png');background-repeat:no-repeat;background-position:center center;vertical-align:bottom;" >
<div class="projectinfo" >
<div class="text" >PCTutorials-BG</div>
</div>
</td> 
```

jQuery

```
$(".projectinfo").hover(
  function () {
    alert("Inside");
  },
  function () {
    alert("Outside");
  }
); 
```

可以这样做，因为这是在页面加载时不在页面上的元素上。我稍后用 AJAX 加载元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:09:30.177

然后你需要试试这个：

```
$(document).on('mouseenter', '.projectinfo', function () {
    alert("Inside");
}).on('mouseleave', '.projectinfo', function () {
    alert("Outside");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:10:52.790

您可以在所有当前和未来的元素上附加功能，如下`mouseenter`所示：`mouseleave`

```
$(function() {
  $('#project').on('mouseenter', '.projectinfo', function () {
    alert("Inside");
  }).on('mouseleave', '.projectinfo', function () {
    alert("Outside");
  });
); 
```

参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

`hover`等价于`mouseenter`and `mouseleave`，所以`hover`不能直接用 with `on`。将这两个功能都添加到悬停有点繁重，因此最好单独使用`mouseenter`和`mouseleave`。

我使用的原因`$('#project').on`是为了性能。每次创建东西时，jQuery 都必须搜索*整个*DOM 树来寻找节点，所以这将使 jQuery 只在下面查找。快多了。`.projectinfo``#project`

# plone - 在 Plone 站点中显示 Google 日历

> ID：16003107
> 
> 赞同：3
> 
> 时间：2013-04-14T19:04:21.090
> 
> 标签：plone, google-calendar-api

在 Plone 站点中显示谷歌日历内容的推荐方式是什么？理想情况下，谷歌日历中的条目应该充当 Plone 中的一种*虚拟*事件。

我不喜欢像[https://pypi.python.org/pypi/p4a.plonecalendar](https://pypi.python.org/pypi/p4a.plonecalendar)那样从谷歌日历中生成事件，它更多的是使用谷歌日历中的数据。谷歌日历中的任何更改都应反映在 plone 网站上，无需任何手动交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:58:48.307

我建议在您的网站上简单地嵌入 fullcalendar.js 并在那里显示事件：

[http://arshaw.com/fullcalendar/docs/google_calendar/](http://arshaw.com/fullcalendar/docs/google_calendar/)

这不会将事件数据镜像到 Plone，只是从实时谷歌日历 JavaScript API 中提取数据并将它们显示在一个漂亮的框中。

# html - 如何将搜索信息放在首位？

> ID：16003109
> 
> 赞同：0
> 
> 时间：2013-04-14T19:04:30.817
> 
> 标签：html, tags, head

我知道有一种方法可以将搜索信息放在 HTML 文件的头部，但我只是不知道你能做到这一点。我相信它们被称为搜索标签，可以帮助浏览器找到您的网站，但我就是做不到。如果有人可以提供帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:06:06.543

```
<meta http-equiv="Content-Language" content="en-US" />
        <meta name="description" content="" />    
        <meta name="keywords" content="" /> 
        <meta name="DC.Subject" content="" />
        <meta name="dc.language" CONTENT="en"/>
        <meta name="dc.source" CONTENT="http://www.???.org/"/>
        <meta name="dc.title" CONTENT=""/>
        <meta name="dc.keywords" CONTENT=""/>
        <meta name="dc.subject" CONTENT=""/>
        <meta name="dc.description" CONTENT=""/> 
```

# c# - System.Net.Mail.SmtpException：地址的主机名无效

> ID：16003112
> 
> 赞同：0
> 
> 时间：2013-04-14T19:04:42.637
> 
> 标签：c#, email, unicode, web-config, smtp

我已经尝试了一切，但它一直在给我这个信息，而所有信息都是正确的（我认为是这样）。

这是错误：

> System.Net.Mail.SmtpException：地址的主机名无效：yakovmora1@gmail.com‏。System.ArgumentException：在索引 9 处找到无效的 Unicode 代码点。参数名称：System.Text.Normalization.Normalize 处的 strInput（String strInput，NormalizationForm normForm）

我在 ASPX.CS 中的代码是：

```
 protected void Sbutton_Click(object sender, EventArgs e)
    {     
        string Name = Request.Form["Name"];         
        string email = Request.Form["email"];
        string message = Request.Form["Message"];
        if (CheckFields(Name, email, message, ref  Label1) == true)
        {
            try
            {
                MailMessage myEmail = new MailMessage()
                {
                    Subject = "Message from website user: [" + Name + "]",
                    Body = "Email: " + email + Environment.NewLine + Environment.NewLine + message,
                    IsBodyHtml = false,
                    From = new MailAddress(email, Name),

                };

                myEmail.To.Add(new MailAddress("yakovmora1@gmail.com‏", "IsraeCoreLx‏"));

                SmtpClient server = new SmtpClient();
                server.Send(myEmail);
                Label1.Text = "Message Sent";
            }
            catch (Exception ex)
            {
                Label1.Text = "error sending message <br/><br/>" + ex.ToString();
            }
            if (Label1.Text != "Message Sent")
            {
                Label1.Text = "trying again";
                #region trying again
                try
                {
                    MailMessage myEmail = new MailMessage()
                    {
                        Subject = "Message from website user: [" + Name + "]",
                        Body = "Email: " + email + Environment.NewLine + Environment.NewLine + message,
                        IsBodyHtml = false,
                        From = new MailAddress(email, Name)

                    };

                    myEmail.To.Add(new MailAddress("yakovmora1@gmail.com‏", "IsraeCoreLx‏‏"));

                    SmtpClient server = new SmtpClient();
                    server.Port = 25;
                    server.Send(myEmail);
                    Label1.Text = "Message Sent";
                }
                catch (Exception ex)
                {
                    Label1.Text = "error sending message <br/><br/>" + ex.ToString();
                }
                #endregion
            }
            if (Label1.Text == "Message Sent")
            {
                CleanFields( Name,  email,  message ,ref Label1);
            }
        }

    }

    private void CleanFields(string Name, string email, string message, ref Label Label1)
    {

       Request.Form["Name"] = "";
        Request.Form["email"] = "";
        Request.Form["message"] = "";

    }

    private Boolean CheckFields(string Name, string email, string message, ref Label Label1)
    {
        if (Name != "")
        {

            if (IsEmailValid(email) == true)
            {
                if (message != "")
                    return true;
                else
                    Label1.Text = "Your message is empty.";
            }
            else
            {
                Label1.Text = "Your email is invalid.";
            }
        }

        else
        {
            Label1.Text = "Please fill in your Name.";
        }
        return false;
    }

    private Boolean IsEmailValid(string EmailAddr)
    {
        if (EmailAddr != null || EmailAddr != "")
        {
            Regex n = new Regex("(?<user>[^@]+)@(?<host>.+)");
            Match v = n.Match(EmailAddr);

            if (!v.Success || EmailAddr.Length != v.Length)
                return false;
            else
                return true;
        }
        else
            return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:11:03.033

该错误是不言自明的：

```
System.Net.Mail.SmtpException:
The address has an invalid host name: yakovmora1@gmail.com‏.

System.ArgumentException: Invalid Unicode code point found at index 9.
Parameter name: strInput

at System.Text.Normalization.Normalize(String strInput, NormalizationForm normForm) 
```

看看这个字符串：`yakovmora1@gmail.com`

第 9 个字符是`1`，这对我来说似乎很好，但我看到您将它直接嵌入到源代码中（这是一个非常糟糕的主意，但没关系）。您是否`*.cs`使用正确的编码保存文件？确保使用 UTF-8 或 UTF-16 (Visual Studio > `File`> `Advanced Save Options`> `Encoding`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T14:30:50.047

在发送电子邮件之前，您可能会在调试器中查看邮件消息值，或者调用“ToString”方法。在这种情况下，在 .NET 3.5 或更早版本下，有一个错误会更改邮件消息对象中的字段值，从而导致稍后出现此故障。

我也遇到了类似的bug，解决了。您可以在此处查看详细信息： [MailMessage "From" 属性分配间接导致异常](https://stackoverflow.com/questions/18558176/mailmessage-from-property-assignment-indirectly-causes-exception)

希望这会对您有所帮助！

# jquery - 单击时尝试调整 div 的大小以匹配另一个 div 的宽度

> ID：16003113
> 
> 赞同：0
> 
> 时间：2013-04-14T19:04:51.237
> 
> 标签：jquery, grid, draggable, placeholder, sortables

因此，这是我正在研究的内容以供参考：

[http://www.ryanhammond.us/ellenpaul/index.html](http://www.ryanhammond.us/ellenpaul/index.html)

如果您查看该网站，您会看到一个缩略图网格。我使用 Jquery sortables 来允许对缩略图进行重新排序。

所有的拇指都是 li 在可排序函数应用于的无序列表中

```
<script>
  $(function() {
    $( "ul" ).sortable({
      placeholder: "highlight"
    });
    $( "ul" ).disableSelection();
  });
</script> 
```

我的问题是您只为所有缩略图指定了一个占位符（占位符是拖动拇指时出现的浅蓝色方块 - 它是 .highlight），并且我有两种不同的缩略图宽度。太好了，如果我将 .highlight 设置为 300px 宽度，300px 宽度的缩略图看起来很棒，但对于更薄的 200px 缩略图来说就错了。

到目前为止，我最好的想法是编写另一个 javascript 代码，该代码在单击缩略图时检测其宽度并将占位符的大小调整为该宽度......但我是 java 新手，所以我不确定这是否是最好的修复。

有任何想法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:38:11.573

我注意到，当您拖动 Div 时，会添加一个类“ui-sortable-helper”，因此如果您选择拖动后 div 的宽度，然后调整所有具有“highlight”类的 div 的大小，它应该可以工作下面是一个示例：

```
<script>
  $(function() {
    $( "ul" ).sortable({
      placeholder: "highlight",
      start: function(event, ui) {
        setTimeout("resize()",0);
    },
    stop: function(event, ui) {
    }
    });
    $( "ul" ).disableSelection();   
  });
function resize()
{
var width = $($(".ui-sortable-helper")[0]).css("width");
$($(".highlight")[0]).attr("style","width:"+width);
}
  </script> 
```

# ruby-on-rails - RuntimeError - 找不到二进制输入

> ID：16003114
> 
> 赞同：0
> 
> 时间：2013-04-14T19:04:57.163
> 
> 标签：ruby-on-rails, devise, paperclip

所以我有一个带有 Devise 和 Paperclip 的 Ruby on Rails 设置。我设法将我的 erb 文件转换为 HAML，但当我尝试在新注册视图上输入附件时仍然遇到问题。我采取了正确的步骤来使用 Paperclip 进行迁移，用户表具有所有正确的图像列，但是当我将图像输入放在页面上时仍然出现运行时错误。

我对 Ruby on Rails 还很陌生（只学习了一个月，做了一些截屏视频和课程），我真的被困住了。我宁愿不再这样做，因为它需要一些时间来构建，但我希望在这里得到一些答案！谢谢！

```
gem 'rails', '3.2.11'
gem 'jquery-rails'
gem 'devise'
gem 'simple_form'
gem "paperclip", "~> 3.0"
gem "haml" 
```

这是错误：

```
Extracted source (around line #6):

3:   = f.error_notification
4:   = f.full_error :image_file_size, class: "alert alert-error"
5:   = f.full_error :image_content_type, class: "alert alert-error"
6:   = f.input :image, label: "Upload an image"
7:   = f.input :name, :autofocus => true
8:   = f.input :email
9:   = f.input :password

app/views/devise/registrations/new.html.haml:6:in `block in _app_views_devise_registrations_new_html_haml___1664083891059168154_70305669109760'
app/views/devise/registrations/new.html.haml:2:in `_app_views_devise_registrations_new_html_haml___1664083891059168154_70305669109760' 
```

这是 new.html.haml 视图：

```
%h2 Sign up
= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), html: {class: 'form-horizontal'}) do |f|
= f.error_notification
= f.full_error :image_file_size, class: "alert alert-error"
= f.full_error :image_content_type, class: "alert alert-error"
= f.input :image, label: "Upload an image"
= f.input :name, :autofocus => true
= f.input :email
= f.input :password
= f.input :password_confirmation
.form-actions
    = f.submit "Sign up", class: "btn btn-primary"
= render "devise/shared/links" 
```

这是模型：

```
class User < ActiveRecord::Base
    devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :omniauthable

    attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :provider, :uid, :image
    validates :description, presence: true
    validates :user_id, presence: true
    validates_attachment :image, presence: true,
        content_type: { content_type: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'] }, size: { less_than: 2.megabytes }
    has_attached_file :image, styles: { medium: "320x240>"}
end 
```

哦，这是我的数据库架构：

```
add_index "referrals", ["user_id"], :name => "index_referrals_on_user_id"

create_table "users", :force => true do |t|
    t.string   "email",                                     :default => "", :null => false
    t.string   "encrypted_password",                        :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",                             :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                                                :null => false
    t.datetime "updated_at",                                                :null => false
    t.string   "name"
    t.string   "provider"
    t.string   "uid"
    t.binary   "image",                  :limit => 1048576
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
end

    add_index "users", ["email"], :name => "index_users_on_email", :unique => true
    add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true 
```

哦，最后一件事，在安装回形针之前，我确实在我的 OSX 机器（10.8）上安装了 ImageMagick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:29:17.843

这最终修复了页面错误

```
= f.input :image, as: :file, label: "Upload an image" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:17:21.560

你能粘贴整个错误吗？错误标题是什么？您显示的代码和错误只是它发生的行，尽管我们仍然不知道它到底抛出了什么。

PS。关于视图 - 希望它只是错误的粘贴，因为如我所见，它有错误的意图块。

# php - 获取 Facebook 帖子的点赞数

> ID：16003115
> 
> 赞同：0
> 
> 时间：2013-04-14T19:04:58.687
> 
> 标签：php, facebook, facebook-graph-api

我做了以下函数来获取公共帖子的点赞数。但 facebook 似乎改变了一些东西，因为它只返回 JSON，实际上没有任何数据。

```
static function getFBPostLikes($url){
    $id = self::getFbIdFromUrl($url);
    $json = self::readJSON("https://graph.facebook.com/".$id."/likes?limit=10000000");
    return count($json['data']);
} 
```

它曾经包括我能数出来的每一个喜欢的帖子。我只是将限制参数设置得非常高，因为默认值类似于 50。

知道如何通过最近的更改来解决这个问题吗？

# php - 面向对象 PHP 中的实例配置

> ID：16003116
> 
> 赞同：4
> 
> 时间：2013-04-14T19:05:16.423
> 
> 标签：php, static-methods

我正在寻找将一组属性（配置）应用于新创建的实例的最有效方法。我的第一个目标是保持应用程序面向对象，第二个目标是使用 DI 容器的能力。这是我到目前为止提出的一个示例：

```
class ViewLogin {
  public $msgLoginGranted;
  public $msgLoginFailed;

  public function __construct(){
  }

  protected function onSuccess() {
    return $this->msgLoginGranted;
  }

  protected function onFailure() {
    return $this->msgLoginFailed;
  }
}

class ControllerLogin {
  public function __construct(ModelLogin $model, ViewLogin $view) {
  }
} 
```

为了保持 ViewLogin 干净并将配置数据与代码分开，最好的做法是：

**创建一个新类 ViewLogin1**

```
class ViewLogin1 extends ViewLogin {
  public function __construct() {
    $this->msgLoginGranted = 'Welcome!';
    $this->msgLoginFailed = 'Login Failed!';
  }
} 
```

*缺点：静态课堂内容，没有新功能，污染课堂空间*

**将配置对象传递给 ViewLogin**

```
class ViewLogin {
  public function __construct(Config1 $config) {
    $this->msgLoginGranted = $config->msgLoginGranted;
    $this->msgLoginFailed = $config->msgLoginFailed;
  }
} 
```

**为 ViewLogin 创建一个装饰器？**

**将配置移动到 XML/JSON/YAML...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:41:05.570

我不明白你为什么需要`ViewLogin1`. 如果您想在您的框架中准备它并立即在应用程序中使用它，即使不会引入新功能，我也会`ViewLoginAbstract`在框架和应用程序中使用它（请记住，您可能希望将重定向替换为或类似的东西）。`ViewLogin``die('What the hack are you trying to do?')`

另一方面，当您的应用程序中有多个登录表单时，我会采用[Zend Framework](http://framework.zend.com/manual/2.0/en/index.html)的方式。

当您查看他们如何使用[`*Controller`类](http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html#create-the-controller)时，他们为每个控制器使用一个类，为视图使用一个通用[`ViewModel`类](https://github.com/zendframework/zf2/blob/master/library/Zend/View/Model/ViewModel.php)。

更详细的默认值[`indexAction`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/AbstractActionController.php#LC33)：

```
public function indexAction()
{
    return new ViewModel(array(
        'content' => 'Placeholder page'
    ));
} 
```

所以我会重用`ViewLogin`并只传递配置，因为没有引入新功能（只要确保您将来不想添加日志记录或其他功能）。

在我看来，悬停在登录后重定向页面应该是控制器而不是视图的责任（视图应该只负责显示 html + 其他前端内容）所以我不确定你为什么要`redirect`查看。

# c++ - 如何限制“e”之前的小数位？

> ID：16003120
> 
> 赞同：0
> 
> 时间：2013-04-14T19:05:52.350
> 
> 标签：c++, printf

我想在 C++ 中以“1.00e6”格式打印一个浮点变量 x，其中我只想要 e 之前的小数点后 2 位。

阅读此内容：[http](http://www.cplusplus.com/reference/cstdio/printf/) ://www.cplusplus.com/reference/cstdio/printf/ ，我不确定要使用哪个说明符。这可以在 C++ 中完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:23:33.413

你可以在 C++ 中做同样的事情：

```
 double f = 1.00e6;
 std::cout.precision(2);
 std::cout << std::scientific;
 std::cout<<f <<std::endl;
 It will output: 1.00e+06 in this case. 
```

**编辑**：正如@user657267 所指出的，还有一个操纵器`precision`，

```
 double f = 1.00e6;
 std::cout << std::setprecision(2) << std::scientific << f << '\n'; 
```

应该有同样的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:13:11.423

如果您在任何类 Unix 系统（OS X、Linux、BSD 等）上，请阅读`printf()`with的文档。通常，您使用 指定精度，其中是所需的精度：`man 3 printf``.N``N`

```
#include <stdio.h>
int main()
{
    printf("%.2e\n", 1.0);
} 
```

输出：

```
1.00e+00 
```

我已经给出了 C 代码，因为这确实是关于 C 标准库的问题，它是 C++ 标准的一部分。

# java - setOnClickListener 导致“RuntimeException：无法启动” - NullPointerException

> ID：16003121
> 
> 赞同：0
> 
> 时间：2013-04-14T19:05:52.990
> 
> 标签：java, android

我有一个错误，我不明白是什么原因造成的。

这是生成错误的代码片段：

```
public class RssReader extends Activity {
private Button button1;
@Override
public void onCreate(Bundle savedInstanceState) {
    button1 = (Button) findViewById(R.id.b1);
    button1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            System.out.println("test");
        }
      });

    super.onCreate(savedInstanceState);
    setContentView(R.layout.rss_reader);
    }
} 
```

虽然这是我的`rss_reader.xml`文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

</LinearLayout> 
```

上面的代码导致 a **`NullPointerException`**，但我无法理解我正在访问的空指针，因为我没有使用任何不安全的构造。完整的错误如下：

```
04-14 18:50:14.305: E/AndroidRuntime(443): FATAL EXCEPTION: main
04-14 18:50:14.305: E/AndroidRuntime(443): java.lang.RuntimeException: Unable to start              activity ComponentInfo{com.cris96.rssreader/com.cris96.rssreader.RssReader}:  java.lang.NullPointerException
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.os.Looper.loop(Looper.java:123)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-14 18:50:14.305: E/AndroidRuntime(443):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 18:50:14.305: E/AndroidRuntime(443):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 18:50:14.305: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-14 18:50:14.305: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-14 18:50:14.305: E/AndroidRuntime(443):  at dalvik.system.NativeStart.main(Native Method)
04-14 18:50:14.305: E/AndroidRuntime(443): Caused by: java.lang.NullPointerException
04-14 18:50:14.305: E/AndroidRuntime(443):  at com.cris96.rssreader.RssReader.onCreate(RssReader.java:14)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-14 18:50:14.305: E/AndroidRuntime(443):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-14 18:50:14.305: E/AndroidRuntime(443):  ... 11 more 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T19:06:37.547

`setContentView(R.layout.rss_reader);`在注册您的`OnClickListeners`.

```
package com.cris96.rssreader;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;

public class RssReader extends Activity {
    private Button button1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rss_reader);

        button1 = (Button) findViewById(R.id.b1);
        button1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                System.out.println("test");

            }
        });

    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T19:07:38.590

你需要这样做：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.rss_reader);
button1 = (Button)findViewById(R.id.b1);
button1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        System.out.println("test");
    }
  });
} 
```

在将布局设置为 Activity 的内容之前，您不能设置查找视图。这就是`findViewById`返回 null 的原因。

# php - PHP反序列化jQuery FORM帖子

> ID：16003122
> 
> 赞同：1
> 
> 时间：2013-04-14T19:05:58.320
> 
> 标签：php, jquery

```
<form action="index.php" method="POST" id="form">
<input type="text" name="guest" id="guest_name" class="textbox"/><br />
<textarea name="textarea" id="text" class="textarea"></textarea/><br />
<input type="submit" id="submit" class="submit"/><br />
</form> 
```

jQuery

```
$.post("events.php?action=send", { data :  $("#form").serialize() }, function(data, error) { } 
```

***测试 post DATA 中是否包含数据：***

```
echo var_dump($_POST['data']); 
```

**我明白了：**

```
name=blabla&comment=blabla1 
```

**然后当我这样做时**

```
echo $_POST['guest']; 
```

什么都没有出现，它是一个**NULL。**

问题：

我做错了什么？为什么 POST 客人没有被填满？如果它在 DATA 中，并且表单的方法也是 POST。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T19:11:35.010

将序列化字符串作为数据参数传递给 $.post 而不是数据参数是序列化字符串的对象

```
$.post("events.php?action=send", $("#form").serialize() , function(data, error) { } 
```

现在您将能够访问`$_POST['guest']`等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:10:45.243

```
<?php
parse_str($_POST['data'], $data);
print_r($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:11:55.487

你做错了。像这样试试

```
$.post(
        "events.php?action=send", 
        $("#form").serialize() , 
        function(data, error) {}
); 
```

在 php 端访问 $_POST 数组是这样的

```
echo $_POST['guest'];
echo $_POST['textarea']; 
```

删除不需要的数据密钥。`$("#form").serialize()`将在 post 中创建一个查询字符串，您可以在通常的表单提交时轻松访问该字符串。

参考

[jQuery .serialize](http://api.jquery.com/serialize/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T19:09:26.330

从您所写的内容看来， $_POST['data']['guest'] 将包含您要查找的内容。

# python - 在用户输入后，我似乎无法让它找到平均辅音/元音

> ID：16003126
> 
> 赞同：1
> 
> 时间：2013-04-14T19:06:13.693
> 
> 标签：python, average

这是我到目前为止的代码。该程序应该询问用户一个单词并确定其中元音/辅音的数量。用户完成后，程序应该给他们元音/辅音的平均数量。一些开始的代码是不同的（在`V`and之间不同`C`），因为我试图找出哪个可以工作

```
#Okay, this is the updated version of the code where I combined @AshwiniChaudhary 's code and mine 
```

# 现在我得到一个 IndexError: tuple index out of range

# 我试着在这里和其他几个网站上查找它，但并没有真正找到答案，我不想在这里问同样的问题两次

```
print("Hello!")
import sys
import re

def VOCO():
VOCO = input("Search for VOWELS or CONSONANTS: ")

if VOCO == "VOWELS":
    VOW = input("Please input word for VOWEL counting: ")
    re.findall(r'[aeiouAEIOU]', VOW)
    V = int(len(re.findall(r'[aeiouAEIOU]', VOW)))
    print(V)

elif VOCO == "CONSONANTS":
    CON = input("Please input word for CONSONANT counting: ")
    re.findall(r'[bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ]', CON)
    C = int(len(re.findall(r'[bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ]', CON)))
    print(C)

else:
    print("Please use either VOWELS or CONSONANTS in selection.")
from string import ascii_lowercase as al
def find_vo_cons2(strs,val):
    vowels="aeiou"
    consonants=set(al)-set(vowels) #set containing only consonants   
    le=float(len(strs))

    vowel_count=0
    consonant_count=0

    for x in strs:
        if x.lower() in vowels:
            vowel_count+=1
        elif x.lower() in consonants:
            consonant_count+=1
    if val in ("V","v"):
        return vowel_count/le
    elif val in ("C","c"):
        return consonant_count/le

def CNT(): True or False
CNT = input("Would you like to continue (YES/NO)? ")

if CNT() : "YES"
condition(True)
VOCO()

else:
        strs = (VOW or CON)
        print("The average of {0} count is {1}".format(find_vo_cons2(strs,VOCO)))
        sys.exit
VOCO()
while True:
    VOCO() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:18:59.177

我认为您也可以在不使用`regex`的情况下执行此操作：

```
from string import ascii_lowercase as al
def find_vo_cons(strs,val):
    vowels="aeiou"
    consonants=set(al)-set(vowels) #set containing only consonants   
    le=float(len(strs))

    vowel_count=0
    consonant_count=0

    for x in strs:
        if x.lower() in vowels:
            vowel_count+=1
        elif x.lower() in consonants:
            consonant_count+=1

    if val in ("V","v"):
        return vowel_count/le
    elif val in ("C","c"):
        return consonant_count/le

def main():
    VOCO = input("Search for VOWELS(v) or CONSONANTS(c): ")
    dic={"v":"Vowels","c":"Consonants"}
    strs=  input("Enter the string: ")
    print ("The average of {0} count is {1}".format(dic[VOCO.lower()],find_vo_cons(strs,VOCO)))

main() 
```

**输出：**

```
~$ python3 so.py
Search for VOWELS(v) or CONSONANTS(c): v
Enter the string: foObAr
The average of Vowels count is 0.5

~$ python3 so.py
Search for VOWELS(v) or CONSONANTS(c): c
Enter the string: qwertyuiop
The average of Consonants count is 0.6 
```

# c - 简单的字符串递归

> ID：16003127
> 
> 赞同：0
> 
> 时间：2013-04-14T19:06:15.083
> 
> 标签：c, string, loops, recursion, logic

我正在尝试使用字符串，但遇到了无法调试的问题。

该脚本的目标是对一个字符串运行 5 次测试，检测每个字符串的字符串长度，同时为字符串提供一个参数（要输入的最小字符数和最大字符数），有问题的字符串是**str[]**

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define SIZE 11
#define MIN_SIZE 5

void String_Insert_Recursion(char str[]);

int main(int argc, char *argv[])
{
   char str[SIZE];
   int i, str_lenght;

   printf("Enter a string of %i to %i characters:\n", MIN_SIZE, SIZE-1);
   for (i=0; i<5 ; i++)
   {
      String_Insert_Recursion(str);  
      str_lenght = strlen(str);
      printf("This string is %i long\n", str_lenght-1);
   }

   system("PAUSE"); 
   return 0;
}

 void String_Insert_Recursion(char str[])
{
   int i=0;
   while ((str[i] = getchar()) != '\n')
      i++;

   if (i>SIZE-1 || i<MIN_SIZE)
      {
      //SIZE-1 so that there's still ONE spot on the string for a null value.
      printf("Incorrect number of characters. Please Reenter\n");
      String_Insert_Recursion(str);
      }

   str[i+1]='\0';
   //This sets the null value at the end of the string
} 
```

**如果**您不超过 Max 或 Min 设置，它可以 100% 正常工作。如果你这样做了，程序会阻止你并要求你重新输入你的字符串（应该如此），但有些**东西**会延续。

*   例如，如果您将“ **End** ”写为字符串，它会要求您重新输入，因为它只有 3 个字符。
*   如果您将下一个字符写为“ **The End** ”，它将给您 3 个字符（不正确，应该是 7 个字符；包括空格。）
*   现在再次写“ **The End** ”会给你正确的字符数。
*   测试看看是不是真的在看你之前写的《**The End**》，其实不是。所以我必须假设问题出在对递归的一些逻辑循环监督中。

感觉就像程序在递归中的**if 语句**上搞砸了（这就是我可以缩小问题的范围），我一生无法理解为什么@__@ 到目前为止，我已经尝试清除字符串输出使用

```
str[0]='\0'; 
```

并且几乎在任何地方都铺板，但无济于事:(真的很感激帮助！学习很有趣，但是当你没有任何办法知道真正出了什么问题时会令人沮丧。

感谢您的阅读！

* * *

**编辑**：移到which`str[i+1]='\0';`下`i++;`将为每次尝试在字符串前面设置一个空值。原来问题在于它会为工作和不工作的字符串设置一个空值，因为它被放置在一个不好的位置。为此感谢**戴夫**！

如果您有一些有趣的见解或要添加的其他答案，我一定会阅读它！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:34:51.200

您需要`return`在进行递归之后：

```
void String_Insert_Recursion(char str[])
{
    int i=0;
    while ((str[i] = getchar()) != '\n')
        i++;
    if (i < SIZE && i>=MIN_SIZE) {
        str[i+1]='\0';
    } else {
        printf("Incorrect number of characters. Please Reenter\n");
        String_Insert_Recursion(str);
    }   
} 
```

# nginx - 使用 Vagrant 和 Chef 设置 Nginx

> ID：16003128
> 
> 赞同：-1
> 
> 时间：2013-04-14T19:06:18.290
> 
> 标签：nginx, chef-infra, vagrant

重新开始。:P @crum2 尝试了 apt-get 更新但没有运气。:\ 虽然我和我的朋友交谈过，但他提到我正在使用他的一个不是最可靠的盒子。那么有办法保存.box 吗？是在通过厨师等提供之后吗？需要做更多的阅读......显然。所以我改为以下：

流浪文件

```
 # -*- mode: ruby -*-
  # vi: set ft=ruby :

Vagrant.configure("2") do |config|

  config.vm.box = "precise64"

  config.vm.box_url = "http://files.vagrantup.com/precise64.box"

  config.vm.network :public_network

  config.vm.provider :virtualbox do |vb|
    vb.customize ["modifyvm", :id, "--memory", "1024"]
  end

  config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = "cookbooks"
    chef.add_recipe "nginx"
  end

end 
```

我创建了自己的食谱目录，并根据以下内容仅下载了我认为需要的内容：http: [//community.opscode.com/cookbooks/nginx](http://community.opscode.com/cookbooks/nginx)

食谱

```
 |__build-essential
   |__nginx
   |__ohai
   |__runit 
```

终端输出

```
mac-mini:test admin$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] Importing base box 'precise64'...
[default] Matching MAC address for NAT networking...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Available bridged network interfaces:
1) en0: Ethernet
2) en1: Wi-Fi (AirPort)
What interface should the network bridge to? 1
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] Running any VM customizations...
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Configuring and enabling network interfaces...
[default] Mounting shared folders...
[default] -- /vagrant
[default] -- /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
stdin: is not a tty
[2013-04-15T23:42:59+00:00] INFO: *** Chef 10.14.2 ***
[2013-04-15T23:42:59+00:00] INFO: Setting the run_list to ["recipe[nginx]"] from JSON
[2013-04-15T23:42:59+00:00] INFO: Run List is [recipe[nginx]]
[2013-04-15T23:42:59+00:00] INFO: Run List expands to [nginx]
[2013-04-15T23:42:59+00:00] INFO: Starting Chef Run for precise64
[2013-04-15T23:42:59+00:00] INFO: Running start handlers
[2013-04-15T23:42:59+00:00] INFO: Start handlers complete.
[2013-04-15T23:43:00+00:00] INFO: ohai plugins will be at: /etc/chef/ohai_plugins
[2013-04-15T23:43:00+00:00] INFO: Processing remote_directory[/etc/chef/ohai_plugins] action create (ohai::default line 30)
[2013-04-15T23:43:00+00:00] INFO: Processing directory[/etc/chef/ohai_plugins] action create (dynamically defined)
[2013-04-15T23:43:00+00:00] INFO: directory[/etc/chef/ohai_plugins] created directory /etc/chef/ohai_plugins
[2013-04-15T23:43:00+00:00] INFO: directory[/etc/chef/ohai_plugins] mode changed to 755
[2013-04-15T23:43:00+00:00] INFO: Processing cookbook_file[/etc/chef/ohai_plugins/README] action create (dynamically defined)
[2013-04-15T23:43:00+00:00] INFO: cookbook_file[/etc/chef/ohai_plugins/README] mode changed to 644
[2013-04-15T23:43:00+00:00] INFO: cookbook_file[/etc/chef/ohai_plugins/README] created file /etc/chef/ohai_plugins/README
[2013-04-15T23:43:00+00:00] INFO: remote_directory[/etc/chef/ohai_plugins] created directory /etc/chef/ohai_plugins
[2013-04-15T23:43:00+00:00] INFO: remote_directory[/etc/chef/ohai_plugins] mode changed to 755
[2013-04-15T23:43:00+00:00] INFO: Processing ohai[custom_plugins] action reload (ohai::default line 44)
[2013-04-15T23:43:00+00:00] INFO: ohai[custom_plugins] reloaded
[2013-04-15T23:43:00+00:00] INFO: Processing ohai[reload_nginx] action nothing (nginx::ohai_plugin line 22)
[2013-04-15T23:43:00+00:00] INFO: Processing template[/etc/chef/ohai_plugins/nginx.rb] action create (nginx::ohai_plugin line 27)
[2013-04-15T23:43:00+00:00] INFO: template[/etc/chef/ohai_plugins/nginx.rb] updated content
[2013-04-15T23:43:00+00:00] INFO: template[/etc/chef/ohai_plugins/nginx.rb] owner changed to 0
[2013-04-15T23:43:00+00:00] INFO: template[/etc/chef/ohai_plugins/nginx.rb] group changed to 0
[2013-04-15T23:43:00+00:00] INFO: template[/etc/chef/ohai_plugins/nginx.rb] mode changed to 755
[2013-04-15T23:43:00+00:00] INFO: template[/etc/chef/ohai_plugins/nginx.rb] sending reload action to ohai[reload_nginx] (immediate)
[2013-04-15T23:43:00+00:00] INFO: Processing ohai[reload_nginx] action reload (nginx::ohai_plugin line 22)
[2013-04-15T23:43:00+00:00] INFO: ohai[reload_nginx] reloaded
[2013-04-15T23:43:00+00:00] INFO: Processing remote_directory[/etc/chef/ohai_plugins] action nothing (ohai::default line 30)
[2013-04-15T23:43:00+00:00] INFO: Processing ohai[custom_plugins] action nothing (ohai::default line 44)
[2013-04-15T23:43:00+00:00] INFO: Processing package[nginx] action install (nginx::default line 35)

================================================================================
Error executing action `install` on resource 'package[nginx]'
================================================================================

Chef::Exceptions::Exec
----------------------
apt-get -q -y install nginx=1.1.19-1 returned 100, expected 0

Resource Declaration:
---------------------
# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/nginx/recipes/default.rb

 34:   end
 35:   package node['nginx']['package_name']
 36:   service 'nginx' do

Compiled Resource:
------------------
# Declared in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/nginx/recipes/default.rb:35:in `from_file'

package("nginx") do
  retry_delay 2
  retries 0
  recipe_name "default"
  action :install
  cookbook_name :nginx
  package_name "nginx"
end

[2013-04-15T23:43:04+00:00] ERROR: Running exception handlers
[2013-04-15T23:43:04+00:00] ERROR: Exception handlers complete
[2013-04-15T23:43:04+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-04-15T23:43:04+00:00] FATAL: Chef::Exceptions::Exec: package[nginx] (nginx::default line 35) had an error: Chef::Exceptions::Exec: apt-get -q -y install nginx=1.1.19-1 returned 100, expected 0
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

厨师堆栈跟踪

```
Generated at Mon Apr 15 23:43:04 +0000 2013
Chef::Exceptions::Exec: package[nginx] (nginx::default line 35) had an error: Chef::Exceptions::Exec: apt-get -q -y install nginx=1.1.19-1 returned 100, expected 0
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/command.rb:128:in `handle_command_failures'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/command.rb:75:in `run_command'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/command.rb:143:in `run_command_with_systems_locale'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/apt.rb:97:in `install_package'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package.rb:81:in `action_install'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:63:in `call'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:63:in `converge!'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:61:in `each'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:61:in `converge!'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider.rb:136:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider.rb:125:in `run_action'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource.rb:593:in `run_action'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/runner.rb:49:in `run_action'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/runner.rb:81:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/runner.rb:81:in `each'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/runner.rb:81:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection.rb:94:in `execute_each_resource'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call_iterator_block'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection/stepable_iterator.rb:85:in `step'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection/stepable_iterator.rb:104:in `iterate'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection/stepable_iterator.rb:55:in `each_with_index'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource_collection.rb:92:in `execute_each_resource'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/runner.rb:80:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:378:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:420:in `do_run'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:176:in `run'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:230:in `run_application'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `loop'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `run_application'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application.rb:70:in `run'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/chef-solo:25
/opt/vagrant_ruby/bin/chef-solo:19:in `load'
/opt/vagrant_ruby/bin/chef-solo:19 
```

那么我在这里错过了什么？随时向我指出好的阅读材料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:17:29.740

不知何故，APT 无法在 1.1.19-1 版本中安装 nginx 包 - 您是否手动指定了该版本？也许运行一个`apt-get update`内部框以刷新包索引并重试（可能由于更新，旧的 nginx 包不可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T00:45:28.190

所以事实证明，在添加 apt 之后，我的问题全部解决了，这个家伙现在似乎已经弄清楚了。这有帮助：[ubuntu 12.04 上的 Chef build-essential cookbook 出错](https://stackoverflow.com/questions/12555096/error-with-chef-build-essential-cookbook-on-ubuntu-12-04)。删除或离开它。:P

# android - 使用 apache cordova for android 时如何覆盖 jquery mobile css

> ID：16003130
> 
> 赞同：0
> 
> 时间：2013-04-14T19:06:29.270
> 
> 标签：android, css, cordova, jquery-mobile

我正在使用 Apache Cordova (PhoneGap) 构建一个 Android 应用程序。我刚刚制作了应用程序的主页（从网站获取内容并加载到手机中），并看到此手机页面的页脚位置有两个文本*“正在加载”*。

我从这个[stackoverflow帖子](https://stackoverflow.com/questions/8245360/jquerymobile-loading-message-theme)中读到这是因为我没有在应用程序中链接jquery mobile css。所以我从他们的网站下载了 jquery mobile css，然后通过链接这个 css，解决了加载文本问题。它不再显示。

但是，我的所有 css 和移动页面的格式都被这个 jquery mobile css 覆盖了，现在页面看起来很糟糕。

我只想知道如何覆盖 jquery 移动 css 设置，让应用程序只使用我的自定义 css，但同时，我不希望`"Loading"`文本在那里。

这是我拥有的代码 -

```
<!DOCTYPE html>
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/jquery.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />

</head>
<body>
...
--- my code goes here ---
...

<script src="js/jquery.js"></script> // this is jquery mobile
</body>
</html>
<body> 
```

我该怎么做呢？基本上，我不想要任何装载机。

# android - 仅在平板电脑上的 Android 操作栏

> ID：16003136
> 
> 赞同：1
> 
> 时间：2013-04-14T19:06:54.837
> 
> 标签：android, android-actionbar

我有以下问题：

我创建了一个应用程序，它应该在手机和平​​板电脑上运行（同一个应用程序）。现在，当我在小屏幕上时，我想使用硬“设置按钮”来弹出菜单，但是在平板电脑上（没有设置按钮）时，我想显示一个操作栏？

我不想要小屏幕上的操作栏，因为它占用空间

当活动开始时，我使用以下代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:10:41.360

> 现在，当我在小屏幕上时，我想使用硬“设置按钮”来弹出菜单

Android 设备上没有“设置按钮”。某些设备上*可能*有 MENU 按钮，但不是全部，包括并非所有手机。事实上，大多数 Android 4.x 设备型号都没有 MENU 按钮——三星是少数仍在使用它们的制造商之一。

> 我不想要小屏幕上的操作栏，因为它占用空间

数以百万计的“小屏幕”设备没有菜单按钮。您想要的将阻止这些设备使用您的应用程序，因为它们将无法访问您的菜单。

因此，不要在任何 Android 设备上使用操作栏，并显示使用您自己的小部件编写的您自己的菜单，由您自己选择的方式（例如，触发按钮、手势）触发。

# magento - magento 安装期间文件的权限

> ID：16003140
> 
> 赞同：3
> 
> 时间：2013-04-14T19:07:28.480
> 
> 标签：magento, permissions

我在服务器上安装 magento。在安装过程中需要给这些文件权限

> “public_html/magento/app/etc”。
> 
> “public_html/magento/var”。
> 
> “public_html/magento/媒体”。

只有在我给予 777 许可的情况下，我才能继续安装。我知道给予 777 许可不是一个好习惯。我该怎么办？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:13:15.023

制作这些目录 777 通常不是问题，因为其中不应该有 PHP 文件。如果有疑问，请将以下代码放在这些文件夹中的 .htaccess 文件中，它将拒绝所有 PHP 文件在这些目录和子目录中运行。

```
<FilesMatch "\.php$">
    Order Allow,Deny
    Deny from all
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:58:20.097

如果您查看 Magento 以下的 .htaccess 文件夹，您会发现

/var/.htaccess

命令拒绝，允许拒绝所有人

/app/.htaccess 命令拒绝，允许拒绝所有

此规则将适用于所有带有 /app 的文件夹

对于 /media/.htaccess Options All -Indexes php_flag engine 0

AddHandler cgi-script .php .pl .py .jsp .asp .htm .shtml .sh .cgi 选项-ExecCGI

#

## 启用重写

```
Options +FollowSymLinks
RewriteEngine on 
```

#

## 从不重写现有文件

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

#

## 将其他所有内容重写为 index.php

```
RewriteRule .* ../get.php [L] 
```

由于这些 .htaccess 已经存在于 Magento 中，因此您无需担心。

* * *

一些解释：拥有 777 权限的人可能会丢弃一些 .php 或其他可执行文件。这些 .htaccess 规则将不允许执行这些文件，因此即使黑客成功放置了可执行文件，它也不会被执行。

# matlab - 检测网格方向和属性

> ID：16003142
> 
> 赞同：1
> 
> 时间：2013-04-14T19:07:31.937
> 
> 标签：matlab, opencv, computer-vision, curve-fitting, data-fitting

我有许多点的集合，以统一的网格状方式排列。鉴于这些点，我如何检测该网格的属性，例如它的旋转、行间距等？如果有一些算法可以为这些数据拟合许多平行和垂直的线，那么我可以平均线之间的距离、角度等等。做这个的最好方式是什么？

**更新：** 我正在使用的数据大致如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/y2MHr.jpg)

将来它会更干净，但我只需要一些方法来插入和分析类似网格的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:33:11.493

如果将这些点放在一个网格上，那么 2 个点之间的平方距离为*d²* ×( *m* ² +  *n* ²) 其中*d*是网格常数（假设它是一个在两个主要方向上具有相同常数的二维矩形网格), 和*m* , *n*是定义两点之间的（仿射）差异的整数（或者，更简单地说，沿着“x”和“y”轴的两点之间的网格间隔数）所以：

*   计算一个点与所有其他点之间的平方距离；
*   通过将它们除以最小值，您将得到有理数，这些有理数可以为您提供有关网格常数*d*和相对“坐标” *m*、*n*的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:46:59.133

如果您只有网格的图像，您可以尝试`radon`“图像处理工具箱”中的功能。它将为您提供角度，并且从氡变换您可以重新计算图像上点线之间的距离。

这是`radon`函数的代码示例

```
% First we generate a grid of points on image
ImgW        = 400;
ImgH        = 300;
DIdx                    = ImgH + round(rand(1)*ImgH/10);
ImgGrid                 = zeros(ImgH,ImgW);
ImgGrid(1:DIdx:end)     = 1;

% Then we calculate radon transform
theta                   = 0:0.1:180;
[R,xp]                  = radon(ImgGrid,theta);

% Then we calculate standard deviation for each angle of R
Rstd                    = std(R);
% and find maximal value of std(R) columnwise
[RstdMax,RstdIdx]       = max(Rstd);
ThMax                   = theta(RstdIdx);

% Now we show results
figure('Color','w');
subplot(2,2,1);     imshow( ImgGrid );
                    axis on;
                    colormap(hot(255));
                    title('Grid image');
                    line( ImgW/2+[-1 +1]*min(ImgW,ImgH)/2*cosd(-ThMax), ...
                          ImgH/2+[-1 +1]*min(ImgW,ImgH)/2*sind(-ThMax), 'Color','y' );
subplot(2,2,3);     plot(xp,R(:,RstdIdx),'.-');
                    title(sprintf('Profile at %.2f deg (the yellow line)',ThMax));

subplot(2,2,2);     imagesc( log10(R+1), 'Xdata',theta, 'Ydata',xp );
                    axis on;
                    colormap(hot(255));
                    xlabel('\theta (degrees)');
                    ylabel('x''');

subplot(2,2,4);     plot(theta,Rstd,'.-');
                    title('std(R)'); 
```

**但**在一般情况下，这不会为您提供网格的晶格向量！这只会给你点线之间的距离。如果您需要晶格向量，则必须重新计算它们。但是如果你足够幸运并且你的格子是矩形的......希望你明白了;o）

如果你有你的点的 (x,y) 坐标，你会更加幸运。***CST-Link***提出的方法有点“太蛮力”了。我宁愿为您的观点计算“结构因子”（参见[http://en.wikipedia.org/wiki/Structure_factor](http://en.wikipedia.org/wiki/Structure_factor)和文章末尾的教程链接）并分析其最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T05:40:20.223

如果你有每个点的坐标，事情可能不会那么复杂。

在这些坐标上进行[PCA](https://en.wikipedia.org/wiki/Principal_component_analysis)可能是个好主意。第一个主成分将是沿网格较长边的轴，第二个主成分将是较短边的轴。

使用这些新轴，您可以沿主轴运行[扫描线算法](https://en.wikipedia.org/wiki/Sweep_line_algorithm)，这将允许您为每个点分配一个行号。沿第二个轴的另一次扫描将允许您分配列号。

# windows - Cmake 似乎指向 MinGW 的旧目录

> ID：16003145
> 
> 赞同：0
> 
> 时间：2013-04-14T19:07:53.923
> 
> 标签：windows, cmake, mingw, qt-creator

在 Windows 上运行 QT Creator。我有一个包警告我 g++ 4.7 中的一个错误，所以我下载了 mingw g++ 4.6.2 版。问题是当我通过 QT creator 运行 cmake 时，它​​似乎仍然指向旧目录（我现在已经删除了）。这是我运行 cmake 时的控制台输出：

```
CMake Error: your RC compiler: "C:/MinGW-4.7.1/bin/windres.exe" was not found.   Please     set CMAKE_RC_COMPILER to a valid compiler path or name.
CMake Error: your C compiler: "C:/MinGW-4.7.1/bin/gcc.exe" was not found.   Please set     CMAKE_C_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: "C:/MinGW-4.7.1/bin/g++.exe" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name. 
```

我不确定问题出在 QT Creator 或 Cmake 中还是什么。我在 Windows 上运行这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:13:53.287

您可能忘记删除 CMake 在配置项目时创建的输出目录。该目录包含大量缓存的配置信息，包括工具链的路径（编译器、链接器等）。只需删除它并重新配置项目，CMake 就会找到新安装的 MinGW 工具链发行版。

# labview - 创建 NI labview 警报

> ID：16003152
> 
> 赞同：1
> 
> 时间：2013-04-14T19:08:18.627
> 
> 标签：labview

我正在尝试构建一个应用程序，询问医院的患者他或她的感受，如果患者反应“好”，我想创建一个警报，在两个小时后重复相同的问题，或者如果那不可能打开 LED 或警报器，提醒患者记录其健康状况（健康/不适）。

到目前为止，我已经使用了一个案例结构和一个 while 循环，但我对如何创建警报/让它工作感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:55:27.180

您将需要创建一个状态机来处理这个问题。我将创建以下状态：

*   在里面
*   提示病人
*   发出警报
*   清除警报
*   闲置的

大的是空闲的，在那里检查时间与上次发出警报的时间。在这里您需要比较时间，看看它们是否相差超过 2 小时。

提高警报将重置此“保存的时间”并将其存储在移位寄存器中。

这里有一个建议：编辑您的原始帖子，并附上您目前所拥有的截图。你不会得到你需要的答案，因为没有人会为你编写代码。

# ios - 适用于 iPad 和 iOS 的响应式设计

> ID：16003153
> 
> 赞同：2
> 
> 时间：2013-04-14T19:08:26.487
> 
> 标签：ios, ipad, responsive-design

新设计的移动设备。我怎样才能确保，尤其是对于 iOS，浏览器真的在使用我内置的 CSS 媒体查询，而不是简单地重新调整页面大小？

例如，我正在尝试设置媒体查询，以便在 iPad 上的纵向和横向视图中具有不同的布局，但看起来 Safari 只是重新调整大小或缩放而不是加载媒体查询。

任何链接，教程也将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:17:21.303

我使用这些媒体查询来制作 iPad 特定的 CSS

```
@media only screen
  and (min-device-width : 768px)
  and (max-device-width : 1024px)
  and (orientation:landscape) 
{
    /* iPad landscape style here */
}
@media only screen
  and (min-device-width : 768px)
  and (max-device-width : 1024px)
  and (orientation:portrait) 
{
    /* iPad portrait style here */
} 
```

以及具有不同值的 iPhone 类似的。

如果在真实设备上测试很麻烦，您可以在 iOS 模拟器中检查设计（如果您在安装了 iOS 开发工具的 Mac 上）。您甚至可以使用 Safari 中的 Web Inspector 来检查模拟器中的 HTML、CSS、JavaScript。

![在此处输入图像描述](https://i.stack.imgur.com/ZBREc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T22:07:24.227

一个链接就够了！

[http://bricss.net/post/22198838298/easy-checking-in-javascript-if-a-css-media-query-has](http://bricss.net/post/22198838298/easily-checking-in-javascript-if-a-css-media-query-has)

JS 通过在每个媒体查询触发时弹出警报来拯救您。你应该知道一些 JS 来使这些警报发生......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:05:12.623

我们必须针对特定的媒体查询来处理这种情况。我建议你阅读[这篇文章](http://stephen.io/mediaqueries/)。

# c - 使用 MPI 实现树总和

> ID：16003161
> 
> 赞同：1
> 
> 时间：2013-04-14T19:09:17.083
> 
> 标签：c, mpi

我正在尝试使用 MPI 实现树总和。我为每个进程创建了一个新的等级编号。在每次迭代中，每个具有奇数 new_rank 的进程将其值发送到具有较低 new_rank 的进程并返回。

这是代码：

```
void tree_sum(int rank,int size,int *value){
 int new_rank = rank;
 int remaining_processes = size/2 ;
 MPI_Status status;
 int local_value;

 while(remaining_processes > 0){

    if(is_odd_number(new_rank)){
        // Todos os processos de new_rank impar enviam
        MPI_Send(&value,1,MPI_INT,new_rank-1,0,MPI_COMM_WORLD);
        return;
    }else{
        // Todos os processos de new_rank par recebem
        MPI_Recv(&local_value,1,MPI_INT,new_rank+1,0,MPI_COMM_WORLD,&status);
        *value += local_value;

        new_rank = new_rank / 2;

        remaining_processes--;
    }
 }  
 return;
} 
```

它在最后一次迭代中失败了。new_rank=1 的进程将其值发送到 new_rank=0 但未收到。进程 0 卡在 MPI_Recv。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:40:48.110

您的代码没有达到您的预期。

对于rank为1的进程，他向进程0发送消息，并通过return存在函数。

对于 rank 0 的进程，它首先从进程 1 接收消息，然后对`new_rank`(`new_rank / 2 = 0 / 2 = 0) 进行无用更新，在接下来的迭代中，它将阻塞接收因为它期望来自排名为 1 的进程的消息，但该进程已经停止发送。

# algorithm - 什么是找到两组之间重复的有效方法？

> ID：16003168
> 
> 赞同：0
> 
> 时间：2013-04-14T19:09:46.223
> 
> 标签：algorithm, set

我已经设置了 A 和 B

集合A有1亿个数字（每个数字是64bit）

set B有1亿个数字（每个数字是64位）

两组大小相同。

数据都是随机的，没有排序。

你会推荐什么算法来找到两组之间的重复数字？

（我可以使用大约 4G 内存和 100~200 Gb 的磁盘空间）

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:40:16.843

假设第一个 arr 是 arr1，第二个是 arr2；

```
sort arr1//max O(n*log_n)
for(int i = 0; i < arr2.length; i++){ //n
    binarySearch(arr1, arr2[i]) //log_n
} 
```

总共 O(n logn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T00:09:59.907

就执行时间（但不幸的是，编程时间）而言，可能最便宜的是将 A 中的元素放入一个[开放寻址的哈希表中](http://en.wikipedia.org/wiki/Open_addressing)，然后在哈希表中查找 B 的每个元素。如果你能想出一个合理的散列函数（更多见下文），那么你可以使用负载因子约为 60% 的简单线性散列，这意味着你的表将占用 10 ⁸ * (1/.6) * 8 字节，或者大约 1.3 GB。（我不知道在标准库中提供开放地址哈希表的语言；C++ 的 unordered_sets 是用存储桶链实现的，如果单个元素不是单独的存储分配，这只会稍微多一点开销。一个好的分配器可能会使这变得可行。）

幸运的是，开放寻址的线性探测哈希表很容易编写，尤其是在您不需要处理删除元素的情况下。你只有两个问题：

1.  您需要保留一些值，这意味着“未占用”。

2.  你需要一个好的散列函数。或者至少是一个合理的。

如果您的数据真正随机分布在 64 位空间中，那么散列很简单；您只需要将数据减少到所需的大小。一种简单的方法是使用模运算符，即使数据不是完全随机分布的，只要您安排将表大小设为素数（166666783 大约是 60% 负载的正确大小）具有 1 亿个元素的因子）。

找到一个意味着“未占用”的值可能会更棘手。您可能已经知道一个值是不可能的（可能是 value `0`）。如果没有，您可以选择一个随机的 64 位数字；很有可能它不存在于您的数据集中，但如果它存在，您有一个简单的备份：不要将它放入哈希表中，并`B`对照它检查每个值。

伪 C++ 代码，基于上述描述，包括提到的“无价值”hack：

```
class HundredMillionSet {
  std::vector<uint64_t> h_;
  const size_t size_
  const uint64_t no_value_;
  bool has_no_value_;
  HundredMillionSet(size_t size, uint64_t no_value)
      : h_(size, no_value), size_(size), no_value_(no_value), has_no_value_(false) {}

  void insert(uint64_t v) {
    if (v == no_value_) { has_no_value_ = true; }
    else {
      size_t i = v % size_;
      while (h_[i] != no_value_) {
        if (++i == size_) i = 0;
      }
      h_[i] = v;
    }
  }

  bool check(uint64_t v) {
    if (v == no_value_) return has_no_value_;
    size_t i = v % size_;
    while (h_[i] != v && h_[i] != no_value_) {
      if (++i == size_) i = 0;
    }
    return h_[i] == v;
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:26:03.760

64 位 = 8 字节。2*8*100,000,000byte = 1.6GB => 您可以将数字保存在 RAM 中（对于节点结构，您可能需要两倍...）。我会选择平衡二叉树（只需在 wiki 中搜索 AVL、AB ......树）。只需将数字从一组添加到一棵树，从另一组添加到另一棵树并进行交集。

您可能只想对两个数组进行排序并将它们相交。这应该是最简单的解决方案。

如果您无法处理内存中的所有数字，请使用数据库（MySQL、PostgreSQL...）。两个排序表和交叉点。它应该非常快，最重要的是易于实施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:36:10.527

由于您的整个数据集将（轻松）放入您的 RAM，因此您无需对它进行任何巧妙的排序，也无需使用磁盘空间（除了首先加载数据）。

我假设每个元素在每个列表中最多可以存在一次。

哑（蛮力）方法，O（n ^ 2）：

```
foreach a in A (this could be as you read it from disk)
    foreach b in B
        if a is b
            increase count
            break out of inner loop 
```

预排序方法：(2*n*log(n)+n)，所以 O(n*log(n))

```
sort A
sort B
B_ind = 0
foreach a in A
    foreach b in B from B_ind
        if a is b
            increase count
            B_ind = current b index + 1
            break out of inner loop
        else if b > a
            B_ind = current b index
            break out of inner loop 
```

我推荐前者，但需要并行处理。很容易将外部循环分解成块以在处理器/工作站之间分割。后者也可以在一定程度上并行化（同时执行两种类型），但远没有那么多。

同样在前者的情况下，您可以通过将 b 循环拆分为缓存大小的块来获得一些性能提升。即检查 A[0] 与 B[0...1023] （如果您的缓存可以容纳 1024 个项目），然后检查 A[1]，... A[final]，然后检查 A[0] 与 B[1024 ...2047] 等。

# sql - 使用 SUBSTRING 和 CHARINDEX 从三个单词名称中显示中间名

> ID：16003176
> 
> 赞同：2
> 
> 时间：2013-04-14T19:10:35.273
> 
> 标签：sql, sql-server, select, substring

我有一个表`MsStaff`由几列组成。其中一列是`StaffName`。`StaffName`数据包含两个词的名字（如' **Edy Harsono'**）和三个词的名字（如**'Dian Felita Tanoto'**）。作为结果，我希望有一列显示我员工的 3 个单词名称（即**'Felita'**）的中间名。

我想通过仅使用`substring`and输入查询来显示结果`charindex`。

我试过这个：

```
select [middlename]=SUBSTRING(staffname,charindex(' ',staffname),charindex(' ',staffname))
from MsStaff 
```

但它只显示**“Feli”**作为结果。出了什么问题，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:23:46.397

我觉得要求很特别。一：讲师会要求一种解决方案，忽略名称中的许多常见元素和规则的例外情况（我有两个中间名，我认识很多没有中间名的人，我知道最后有两个或三个单词的人名称）。二：他们会限制你`CHARINDEX`和`SUBSTRING`。三：他们会在没有向您充分解释（或给您时间和资源以自行学习）您应该如何解决问题的情况下要求您解决此问题。

说了这么多：

```
DECLARE @t TABLE(StaffName NVARCHAR(255));

INSERT @t 
SELECT 'Edy Harsono'
UNION ALL SELECT 'Dian Felita Tanoto'
UNION ALL SELECT 'Lisa Van der Hosen';

SELECT 
  SUBSTRING
  (
    StaffName,  
    CHARINDEX(' ', StaffName)+1, 
    CHARINDEX(' ', SUBSTRING(StaffName, CHARINDEX(' ', StaffName)+2, 255))
  ) FROM @t
  WHERE LEN(RTRIM(StaffName)) - LEN(REPLACE(RTRIM(StaffName), ' ', '')) = 2; 
```

结果：

```
Felita

1 row(s) affected. 
```

如果您可以删除`CHARINDEX`/`SUBSTRING`要求，则稍微更聪明的方法是：

```
SELECT PARSENAME(REPLACE(StaffName, ' ', '.'), 2)
FROM @t
WHERE LEN(RTRIM(StaffName)) - LEN(REPLACE(RTRIM(StaffName), ' ', '')) = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:26:38.943

您的第二个`charindex(' ',staffname)`返回第一个空格的位置，并且您使用此位置作为要获取的子字符串的长度。我想问题就在附近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:24:02.493

尝试这个：

```
Select @middleName =
   case When charindex(' ', staffname,  1 + charindex(' ', staffname)) > 0 Then
   Substring(staffname, charindex(' ',staffname), 
              charindex(' ', staffname,  1 + charindex(' ', staffname)) -
                (charindex(' ', staffname))) Else null End 
```

# css - css隐藏滚动条？

> ID：16003177
> 
> 赞同：5
> 
> 时间：2013-04-14T19:10:40.243
> 
> 标签：css

我想在我的页面上有一个可滚动的 div 区域，并将我的 div CSS 上的溢出设置为可滚动，但现在我想在所有浏览器中隐藏滚动条，因此 div 可以在不显示滚动条/面板的情况下滚动，包括隐藏它Firefox 中糟糕的滚动面板，我知道如何在 chrome 中隐藏滚动条，但这在 Firefox 中不起作用，任何人都可以提出任何建议，谢谢？

这是我用来隐藏 chrome 和其他 webkit 浏览器中的滚动条的方法：

```
#element::-webkit-scrollbar { 
    display: none; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:29:22.537

不是纯 CSS（因为你必须添加一个额外的元素），但是如何让你的 div 更宽一些，然后用 将它包装在另一个 div 中`overflow:hidden`？

内部 div 仍会滚动，但滚动条将位于外部 div 的边缘之外，因此它们将不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T09:04:42.010

我发现有人给出了这个答案：

```
.noscrollbar{
  -ms-overflow-style:none;
  overflow:-moz-scrollbars-none;// but it seems to not work...
}
.noscrollbar::-webkit-scrollbar{width:0px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-08T13:22:58.783

这对我有用

```
::-webkit-scrollbar {
      width: 0 !important;
   }
-ms-overflow-style: none; 
```

# ruby-on-rails - 使用带有omniauth 的Facebook 登录时，最低权限是多少？

> ID：16003179
> 
> 赞同：0
> 
> 时间：2013-04-14T19:10:42.757
> 
> 标签：ruby-on-rails, facebook, omniauth

我正在使用`omniauth-facebook` `1.4.1`Ruby on Rails`3.2.8`

我希望用户能够使用他们的 Facebook 帐户进行身份验证。我只需要他们的电子邮件地址或名字。

如何配置omniauth，以便我只收到电子邮件或名字？

指定`'email'`为`:scope`返回的数据远不止电子邮件。

```
config.omniauth :facebook, "appid", "appkey", :strategy_class => OmniAuth::Strategies::Facebook, :scope => 'email' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T10:15:10.237

此处相同，但不可能，因为基本信息包括好友列表。

来自[官方文档](https://developers.facebook.com/docs/facebook-login/permissions)：

> 参考基本信息（默认）
> 
> 基本信息是每个权限请求的一部分。它包括一个人的公开资料**和他们的朋友列表中的**几个元素。
> 
> 在 Web 上，`basic_info`每个请求都隐含，并且不是必需的，尽管最佳实践是包含它。**在 iOS 和 Android 上，每个权限请求**`basic_info`都需要通过。
> 
>  **默认情况下，一个人的公共配置文件引用用户对象的以下属性：
> 
> *   `id`
> *   `name`
> *   `first_name`
> *   `last_name`
> *   `link`
> *   `username`
> *   `gender`
> *   `locale`
> *   `age_range`
> *   其他公开信息
> 
> 好友列表是用户对象上的好友列表节点。
> 
> 用户权限说明
> 
> `basic_info`
> 
> 允许访问某个人的公开个人资料和朋友列表的子集。在 iOS 和 Android 上请求权限时需要。**

# forms - 我可以从控制器触发表单提交吗？

> ID：16003188
> 
> 赞同：32
> 
> 时间：2013-04-14T19:11:38.323
> 
> 标签：forms, angularjs, submit

我想从控制器中提交传统的表单。场景是我想在我的网络服务器上点击一个路由并重定向到它的响应，我可以使用 HTML 中的常规表单来完成，但我还想在按下提交按钮时对其字段进行一些验证，并且如果验证失败，我不想做路线。

我知道 ng-valid，但我只希望在按下按钮时进行验证。

有没有办法从控制器内有条件地提交表单？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-08-03T08:04:16.600

您可以将提交方法添加到 FormController。我这样做了：

```
<form ng-form-commit action="/" name='payForm' method="post" target="_top">
    <input type="hidden" name="currency_code" value="USD">
    <button type='button' ng-click='save(payForm)'>buy</button>
</form>

.directive("ngFormCommit", [function(){
    return {
        require:"form",
        link: function($scope, $el, $attr, $form) {
            $form.commit = function() {
                $el[0].submit();
            };
        }
    };
}])

.controller("AwesomeCtrl", ["$scope", function($scope){
   $scope.save = function($form) {
     if ($form.$valid) {
         $form.commit();
     }
   };
}]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-14T19:57:00.387

您是否尝试在表单上使用 ng-submit 指令？您可以在验证后返回真/假。

控制器

```
app.controller('MainCtrl', ['$location', function($scope, $location) {
  $scope.submit = function(user) {
    var isvalid = true;
    // validation 
    if (isvalid) {
        $http.get('api/check_something', {}).then(function(result) {
            $location.path(result.data);
        });
        return true;
    }
    return false; //failed
  }
}); 
```

Html（你不能有一个动作属性）

```
<form name="formuser" ng-submit="submit(user)">
    <input type="text" ng-model="user.firstname" />
    <input type="text" ng-model="user.lastname" />
    <button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-14T14:26:48.910

这不是 Angular 的方式，但您可以使用 vanilla javascript 提交表单。例如，您可以给表单一个 id 并执行以下操作：

`document.getElementById('myForm').submit()`

或者如果你有一个提交按钮，你可以点击它：

`document.getElementById('myForm-submit').click()`

我发现第一个没有保留数据绑定（我在一个没有 Angular 替代品的带有 JQuery 小部件的项目上使用它），但第二个保留了绑定。我认为这与 JQuery 小部件的编写方式有关。

您可以在此处查看有关使用 vanilla JS 触发表单的更多信息：

[如何使用javascript提交表单？](https://stackoverflow.com/questions/9855656/how-to-submit-a-form-using-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-23T12:58:03.497

```
$scope.payForm.$setSubmitted(); 
```

将表单设置为 $submitted 状态。这还将在表单的所有子表单和父表单上设置 $submitted

[https://docs.angularjs.org/api/ng/type/form.FormController#$setSubmitted](https://docs.angularjs.org/api/ng/type/form.FormController#$setSubmitted)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T16:41:48.420

在表单有效之前完全禁用提交按钮怎么样：

```
<button type="submit" ng-disabled="form.$invalid">Submit</button> 
```

看看我遇到的类似问题： [AngularJS Form Validation with Directives - “myform.$valid” 不太适合我](https://stackoverflow.com/questions/14543437/angularjs-form-validation-with-directives-myform-valid-not-quite-right-for)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-08T19:24:53.563

从@ReklatsMasters's answer扩展，如果您**想在提交表单之前更改值**，您可以这样做......

```
<form ng-form-commit action="/" name='payForm' method="post" target="_top">
    <input type="hidden" id="currency_code" name="currency_code" value="USD">
    <button type='button' ng-click='save('GBP', payForm)'>buy</button>
</form>

.directive("ngFormCommit", [function(){
    return {
        require:"form",
        link: function($scope, $el, $attr, $form) {
            $form.commit = function($newCurrency) {
                $el[0].querySelector('#currency_code').value = $newCurrency;
                $el[0].submit();
            };
        }
    };
}])

.controller("AwesomeCtrl", ["$scope", function($scope){
   $scope.save = function($newCurrency, $form) {
     if ($form.$valid) {
         $form.commit($newCurrency);
     }
   };
}]) 
```

# java - 如何使用java连接到autosys box

> ID：16003189
> 
> 赞同：0
> 
> 时间：2013-04-14T19:11:39.090
> 
> 标签：java, autosys

我在 autosys 框中安排了几组作业。我想制作一个 java 代码来连接到执行 autosys 作业的主机。并且能够执行 autosys 命令。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:07:05.077

使用 Autosys Java API。请联系您的 Autosys SA，让他从 ca.com 为您下载 API 参考指南。

# php - PHP 评论数

> ID：16003190
> 
> 赞同：-6
> 
> 时间：2013-04-14T19:11:48.297
> 
> 标签：php, if-statement, count

我想要它是否显示 0 条评论：“0 条评论”，当有 2 条评论时，它显示“2 条评论”。但是当有在线 1 条评论时，它会在结尾显示“1 条评论”而没有 S。

我怎样才能做到这一点？

```
$counting = mysql_num_rows(mysql_query("SELECT * FROM `news` WHERE `postid`='".$data['id']."'")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:13:44.867

```
<?php
if ($counting>1)
    echo $counting . ' comments';
else
    echo $counting . ' comment'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:14:47.480

```
echo ($counting == 1 ? $counting . " comment" : $counting . " comments") 
```

# angularjs - angularjs没有更新自动绑定

> ID：16003191
> 
> 赞同：1
> 
> 时间：2013-04-14T19:11:53.607
> 
> 标签：angularjs

我正在尝试编写 anuglarjs UI，我无法让它从文本框中自动更新 data.message 的绑定。有什么问题吗？

```
<!DOCTYPE html>
<html>
  <head>

  </head>

<body>
<center>

<div ng-app="">
<input type="text" ng-model="data.message">
<h1>{{data.message + "world"}} </h1>
</div>

<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script type='text/javascript' src='init.js'></script>

<script src="http://code.angularjs.org/angular-0.9.19.js" ng:autobind></script>
<script type="text/javascript">
</script> 
```

它不会自动更新它，我只是得到“0world”作为回报，感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:21:41.903

您使用的是相当旧的 AngularJS 版本。我拿了你的代码，将版本更改为 1.0.6，它就可以工作了：

[http://jsbin.com/ayahip/2/edit](http://jsbin.com/ayahip/2/edit)

# javascript - 创建 Microsoft.Maps.Search.Address 的实例

> ID：16003198
> 
> 赞同：1
> 
> 时间：2013-04-14T19:12:09.247
> 
> 标签：javascript, bing-maps

如何在 Javascript 中创建 Address 类的实例？

为什么这段代码不起作用？

```
var Map;

var MapOptions =
{
    credentials: "my-key",
    center: new Microsoft.Maps.Location(49.767649, 15.584697),
    mapTypeId: Microsoft.Maps.MapTypeId.road,
    zoom: 7,
    showScalebar: false,
    showDashboard: false
};

$(function () {
    Map = new Microsoft.Maps.Map($("#AddressMap"), MapOptions);
    Microsoft.Maps.loadModule('Microsoft.Maps.Search');

    var tmp = new Microsoft.Maps.Search.Address(); // <-- error code
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:35:52.660

loadModule 调用是异步的，因为它可能需要下载模块脚本（如果还没有的话）。要在 loadModule 完成时收到通知，请将回调方法作为选项对象的一部分传递，如[http://msdn.microsoft.com/en-us/library/hh125837.aspx中的示例](http://msdn.microsoft.com/en-us/library/hh125837.aspx)

# django - 当主表单不验证时验证 inline_formsets

> ID：16003199
> 
> 赞同：0
> 
> 时间：2013-04-14T19:12:11.677
> 
> 标签：django, django-validation

我有一个估计，其中包含有关潜在客户的详细信息。名字，地址等东西。简单的东西。然后，我有一些`inlineformset`与主要估算相关的产品、劳动力等。

我遇到的问题有点像 22。我的想法是我会以这种方式进行验证：

1.  跑`mainForm.is_valid()`
2.  如果主表单验证，则将其保存并移至“子”表单（`inlineformset`s）
3.  跑`my_inlineformset.is_valid()`
4.  如果`my_inlineformset`验证通过，则也将其保存 - 并`mainForm`通过`mainForm`ID 将其“附加”到 。

这里有一个问题：如果主表单没有验证，那么它就不会保存。如果它不保存，我没有什么可以“附加”`inlineformset`到的。因此，当`mainForm`不验证并且我被踢回表单以修复错误时，`inlineformset`将是空白的。因此，如果用户在表单上填写了一堆东西，`inlineformset`但是`mainForm`当他们被踢回表单以修复他们的错误时，他们的所有数据`inlineformset`都消失了。

我试图通过首先保存`inlineformset`并仅在主表单验证后将其附加到主表单来规避此问题。这样做的问题是，我可以白白保存一堆 s——`inlineformset`它们永远不会附加到估计值上。我不想要一整套没有附加到任何东西的记录，基本上，它们只会在数据库中不必要地漂浮。

这是我的视图代码：

```
 if main.is_valid():
        tmp = main.save(commit=False)
        if estID != 'new':
            tmp.routeNum = est.routeNum
            tmp.estMap = est.estMap
            tmp.estSketch = est.estSketch
        if estID == 'new':
            tmp.proposalID = newEstID('R')
            tmp.sysType = 'R'
        if estID == 'new':
            pform = pFormSet(request.POST, instance=tmp, prefix="product_form")
            lform = lFormSet(request.POST, instance=tmp, prefix="labour_form")
            oform = oFormSet(request.POST, instance=tmp, prefix="other_form")
        else:
            pform = pFormSet(request.POST, instance=est, prefix="product_form")
            lform = lFormSet(request.POST, instance=est, prefix="labour_form")
            oform = oFormSet(request.POST, instance=est, prefix="other_form")

        if pform.is_valid():
            pform.save() 
```

所以你可以看到，如果 main 没有验证，那么我`FormSet`的 s 将永远不会被检查验证（然后它会抛出一个`pform`在启动之前调用的错误）。但是，如果我`pform`在 main 之前验证，那么我如何“附加”`pform`到`main`if`main`本身不验证（因此不保存）？

那么，如果同一页面上的另一个表单没有验证，如何保持内联表单集数据呢？

* * *

**编辑**

我想知道是否将这个页面（有 4 个表单——一个主表单和 3 个内联表单）拆分为 4 个步骤。用户必须分别填写每个表格。这样我就可以安全地验证，而不必担心我上面提到的问题。当然，这似乎让用户做的工作比必要的多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:38:03.523

我不明白为什么在实例化表单集之前需要验证并保存主表单。通常要做的事情是先实例化所有表单，然后在保存任何内容之前验证它们。这样，您可以保证只有在所有表单都验证时才会保存表单，并且如果其中任何一个失败，您只需重新显示所有相关错误的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:41:03.657

我认为您的方法还可以，在一页上显示所有这些表单，但也许您不需要表单集？..我不完全确定，但如果您只需要页面中每个表单的 1 个实例，也许您根本不需要表单集。

关于验证，只需处理 3 个不同的表单，然后在保存过程中，手动执行所有保存管理，然后在保存主表单 (commit=False) 之前分配多个关系。

假设 M 用于主模型，A、B 用于 M 具有外键的相关模型，那么您可以这样做：

```
# views.py ...

def my_display_forms_view(request):
    if request.method == 'POST':
        m = M()
        a = A()
        b = B()

        a_form = AForm(request.POST, instance=a)
        b_form = BForm(request.POST, instance=b)
        m_form = MForm(request.POST, instance=m)

        if a_form.is_valid() and b_form.is_valid() and m_form.is_valid():
            a = a_form.save()
            b = b_form.save()
            m = m_form.save(commit=False); # don't save it to db still
            m.a = na
            m.b = nb
            m.save()
            # eventually do some more stuff
    else:
       # generate new unbound forms here
       a_form = AForm()
       b_form = BForm()
       m_form = MForm()
    return render_to_response('template.html', {'m_form': m_form, 'a_form': a_form, 'b_form': b_form}, context_instance=RequestContext(request)) 
```

然后在您的模板上：

```
{% if m_form and a_form and b_form %}
<form ... >
<!-- show main form here -->
<fieldset>
<!-- here the other forms -->
</fieldset>
</form>
{% endif %} 
```

应该就是这样。

# excel - 初始化电子表格，计算顺序

> ID：16003202
> 
> 赞同：2
> 
> 时间：2013-04-14T19:13:05.580
> 
> 标签：excel, vba

我编写了一个 VBA 代码来解决一组代数方程，其系数矩阵是三对角（称为 Thomas 算法）。方程具有形式

A(i)X(i-1)+B(i)X(i)+C(i)X(i+1)=R(i)

A、B、C 和 R 的值被传递给返回 X 值的函数。VBA 代码如下。

```
Option Base 1
Function TRIDI(ByVal Ac As Range, ByVal Bc As Range, ByVal Cc As Range, _
ByVal Rc As Range) As Variant
Dim BN As Single
Dim i As Integer
Dim II As Integer
Dim A() As Single, B() As Single, C() As Single, R() As Single, X() As Single
N = Ac.Rows.Count
ReDim A(N), B(N), C(N), R(N), X(N)
For i = 1 To N
A(i) = Ac.Parent.Cells(Ac.Row + i - 1, Ac.Column)
B(i) = Bc.Parent.Cells(Bc.Row + i - 1, Bc.Column)
C(i) = Cc.Parent.Cells(Cc.Row + i - 1, Cc.Column)
R(i) = Rc.Parent.Cells(Rc.Row + i - 1, Rc.Column)
Next i
A(N) = A(N) / B(N)
R(N) = R(N) / B(N)
For i = 2 To N
II = -i + N + 2
BN = 1 / (B(II - 1) - A(II) * C(II - 1))
A(II - 1) = A(II - 1) * BN
R(II - 1) = (R(II - 1) - C(II - 1) * R(II)) * BN
Next i
X(1) = R(1)
For i = 2 To N
X(i) = R(i) - A(i) * X(i - 1)
Next i
TRIDI = Application.WorksheetFunction.Transpose(X)
End Function 
```

该函数适用于线性方程。如果方程是非线性的，例如对于下面的三个方程

X(1)=1

X(1)-2X(2)+X(3)=3+ X(1)^2

X(1)+X(3)=2

解是利用Excel的迭代功能迭代得到的，如下图。（我还不能发布图片，因为这是我的第一篇文章。如果你给我发电子邮件，bumedoc@gmail.com，我也可以把电子表格发给你）

```
 A    B    C     D                  E

1    A    B    C     R                  X

2    0    1    0     =1          =TRIDI(A2:A4,B2:B4,C2:C4,D2:D4)

3    1   -2    1     =3+E2^2     =TRIDI(A2:A4,B2:B4,C2:C4,D2:D4)

4    1    1    0     =2          =TRIDI(A2:A4,B2:B4,C2:C4,D2:D4) 
```

但是，保存电子表格并再次打开后，我得到了#value！E2:E4 和 D3 中的错误。我假设在打开电子表格时，Excel 会尝试初始化具有循环引用的单元格并感到困惑。有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:23:17.357

替换为我`=3+E2^2`的`=IFERROR(3+E2^2,0)`作品。

# java - Android 检查服务器响应是否“是”JSON

> ID：16003205
> 
> 赞同：3
> 
> 时间：2013-04-14T19:13:20.777
> 
> 标签：java, php, javascript, android, json

如您所知，如果查询不成功，`mysql_query()`则会返回一个 php 请求。`false`随着时间的推移，我养成了一种习惯（你应该告诉我这是否是一个坏习惯）来制作类似的东西

```
$res = mysql_query(...);

if($res == false){
    echo json_encode("notOK");
}else{
    $return = array();
    // process query result into that array
    echo json_encode($return);
} 
```

通过执行类似的操作，响应的处理在 JavaScript 中运行良好

```
// (...)
success : function(response){
    var res = JSON.parse(resonse);
    if(res == "notOK"){
        // error handling
    }else{
        // proceed 
    }
}
// (...) 
```

但是，在 Android 中，这似乎不起作用。我处理服务器请求的标准流程是

```
HttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(url);
HttpResponse response;
Vector<JSONObject> vector = new Vector<JSONObject>();

try{
    response = client.execute(get);         
    HttpEntity entity = response.getEntity();

    if(entity != null){
        InputStream in = entity.getContent();
        String result = convertStreamtoString(in);

        JSONArray resultArray = new JSONArray(result);

        int len = resultArray.length();

        for(int i=0; i<len; i++){
            vector.add(resultArray.getJSONObject(i));
        }

        in.close();
    }
} catch (//... 
```

这导致`JSONException`读取

```
04-14 17:13:23.011: W/System.err(433): org.json.JSONException: Value true of type java.lang.String cannot be converted to JSONArray
04-14 17:13:23.022: W/System.err(433):  at org.json.JSON.typeMismatch(JSON.java:107)
04-14 17:13:23.022: W/System.err(433):  at org.json.JSONArray.<init>(JSONArray.java:91)
04-14 17:13:23.022: W/System.err(433):  at org.json.JSONArray.<init>(JSONArray.java:103)
04-14 17:13:23.022: W/System.err(433):  at imhotapp.schlettibusiness.rest.RestHandler.login(RestHandler.java:52)
04-14 17:13:23.022: W/System.err(433):  at imhotapp.schlettibusiness.LoginActivity.tryLogin(LoginActivity.java:48)
04-14 17:13:23.030: W/System.err(433):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 17:13:23.030: W/System.err(433):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 17:13:23.030: W/System.err(433):  at android.view.View$1.onClick(View.java:2139)
04-14 17:13:23.030: W/System.err(433):  at android.view.View.performClick(View.java:2485)
04-14 17:13:23.030: W/System.err(433):  at android.view.View$PerformClick.run(View.java:9080)
04-14 17:13:23.030: W/System.err(433):  at android.os.Handler.handleCallback(Handler.java:587)
04-14 17:13:23.030: W/System.err(433):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 17:13:23.030: W/System.err(433):  at android.os.Looper.loop(Looper.java:123)
04-14 17:13:23.030: W/System.err(433):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-14 17:13:23.030: W/System.err(433):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 17:13:23.030: W/System.err(433):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 17:13:23.030: W/System.err(433):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-14 17:13:23.030: W/System.err(433):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-14 17:13:23.030: W/System.err(433):  at dalvik.system.NativeStart.main(Native Method) 
```

有没有办法像在 Javascript 中那样处理？我在做一些根本错误的事情吗？

PS：我在这里找到[了这个问题](https://stackoverflow.com/questions/14685777/how-to-check-if-response-from-server-is-jsonaobject-or-jsonarray)，但我不认为它是重复的，因为这里是关于检查一个对象是否甚至是“JSON-familiar”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:21:54.473

好的，问题是有时您返回的数据代表一个 JSON 对象，而有时它代表一个 JSON 数组。您的 Android 代码在所有情况下都将数据视为数组。您***可以***处理这个问题，但不能使用您现在使用的 JSON.org 库。由于您正在为 Android 开发，因此您已经内置了对 Gson 库的访问权限 - 使用它您可以执行以下操作：

```
JSONElement jsonElem = new JsonParser().parse(result);
if(jsonElem.isJsonArray()) {
    // Normal data
} else {
    // 'Error' data'
} 
```

很简单。但是请注意，您确实应该使用适当的 HTTP 状态代码（50x 代码之一）来指示错误情况，而不是仅仅依赖返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:27:01.963

根据：[http](http://www.ietf.org/rfc/rfc4627.txt) ://www.ietf.org/rfc/rfc4627.txt 应该是“application/json”。

boolean isJSON = "application/json".equalsIgnoreCase(entity.getContentType());

# jquery - 灯箱仅显示黑色背景而不是 IE8 和 IE7 中的顶部图像

> ID：16003209
> 
> 赞同：0
> 
> 时间：2013-04-14T19:13:38.873
> 
> 标签：jquery, html, css

链接： http: [//madaxedesign.co.uk/dev/portfolio.html](http://madaxedesign.co.uk/dev/portfolio.html)

我正在尝试让这个灯箱在 IE7 和 8 中工作。它似乎在任何其他浏览器中都可以正常工作。我在网上读到这可能是 html5 的问题，我必须去掉我所有的 html5 标签来解决这个问题，我显然不想这样做。

灯箱只显示一个黑屏，图像将位于顶部

我想知道是否有人知道解决此问题的方法？

谢谢

# uml - 在序列图中表示多态性

> ID：16003213
> 
> 赞同：3
> 
> 时间：2013-04-14T19:13:45.857
> 
> 标签：uml, sequence-diagram

我有一个抽象父类`Server`和 3 个子类`InternalServer`，`ExternalServer`并且`LoggableInternalServer`. `Server`有公共抽象方法`receiveClient()`。

该应用程序有一个列表，`Server`其中包含上述三种类型的许多对象。该列表被迭代，并且`receiveClient()`在每次迭代中调用该方法。的实现`receiveClient()`因子类而异。

有没有办法使用序列图来表示这种多态行为？如果不是，我可以用什么其他图表来记录这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T04:00:49.947

有一种方法可以使用序列图来表示这种多态行为。多态调用由保护条件控制的多个场景建模。因此，对于每个多态场景，动态绑定（多态调用）都表示为一个“场景框”。因此，这是一个显示您的问题的多态调用的单一图表。

![在此处输入图像描述](https://i.stack.imgur.com/2CT8c.png)

所以，即使这个模型回答了你的问题，它也不是一个明确的解决方案，因为在序列图中表示多态性并非易事。最后，类似的讨论是关于[如何在单个图中可视化多态调用的问题？](https://stackoverflow.com/questions/25099461/how-to-visualize-polymorphic-invocations-in-a-single-diagram/25130687#25130687).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:18:26.003

您可以在对象创建点启动生命线，显示来自创建分类器实例的发送者的消息。您可以将其与 ALT 片段混合以显示不同的实现。

# c - 有人可以解释一下 exynos ARM 中的电源控制寄存器吗？

> ID：16003215
> 
> 赞同：2
> 
> 时间：2013-04-14T19:14:09.233
> 
> 标签：c, assembly, linux-kernel, arm

在 Linux 内核中，更准确地说是 3.9- [rc6](https://github.com/torvalds/linux/blob/master/arch/arm/mach-exynos/cpuidle.c#72)上的 /arch/arm/mach-exynos/cpuidle.c，这些行读取

```
static unsigned int g_pwr_ctrl, g_diag_reg;

static void save_cpu_arch_register(void)
{
    /*read power control register*/
    asm("mrc p15, 0, %0, c15, c0, 0" : "=r"(g_pwr_ctrl) : : "cc");
    /*read diagnostic register*/
    asm("mrc p15, 0, %0, c15, c0, 1" : "=r"(g_diag_reg) : : "cc");
    return;
} 
```

在研究了这个问题之后，这似乎是*gcc 内联*汇编。考虑到它是一个关键组件，因此`asm`正在阅读它，因为它要么

1.  更快，因此更高效
2.  在 C 中不可用

我在学习汇编时查看了[ARM 手册](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihfifej.html)，但由于它的三个字母长度`MCR`，我可以判断它是协处理器。`MCR`内联汇编似乎访问[电源控制寄存器](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihfifej.html)并将结果（来自寄存器）保存到第一行的无符号整数中（我希望在某个时候调用）。

关于电源控制寄存器，arm手册列出，

*   实现 Cortex-A9 处理器的时钟延迟
*   动态时钟门控。

我无法理解为什么需要这样做，这可以在函数中动态访问。

最后，ARM 手册列出了 32 位宽寄存器的设计。基本时钟似乎设置在那里，我们是在从空闲上下文进程启动时读取这个吗？

我也发现了一个[类似的问题](https://stackoverflow.com/questions/12179872/what-does-the-given-line-do-in-arm-assembly-and-what-is-the-purpose-of-each-vari)——这也可能对你有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:05:12.280

您的问题确实缺乏重点，请考虑更新它。我假设您正在尝试了解 Linux 内核中的**exynos**挂起/恢复机制。

## 为什么选择内联汇编

> ...这似乎是**gcc 内联**汇编。考虑到它是一个关键组件，asm 正在读取它，因为它要么
> a) 更快，因此更高效；
> b) 在 C 中不可用

我们选择选项**b**，没有办法在*C*`mcr`中表达/ 。`mrc`

 *## 内联破坏者列表

> 第二， ...`: : "cc");`

这是一个`gcc`破坏列表。它表示*条件代码*将被指令更改。这可能只是为了确保`gcc`决定不丢弃该指令。您可以在[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.3/gcc/Extended-Asm.html)中阅读更多内容。

## 这是在做什么

> 我无法理解为什么需要这样做，这可以在函数中动态访问。

您需要查看的部分是`exynos4_enter_core0_aftr()`. 这同时使用`save_cpu_arch_register()`和`restore_cpu_arch_register()`。因此，有一组双重函数，我们注意到这些值存储在*globals*中。另一个需要注意的是`cpu_suspend(0, idle_finisher);`. 这个函数告诉 Linux **cpu**被挂起，然后调用`cpu_do_idle();`通常是 ARM [**WFI**](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0311d/Chdggbei.html)（[等待中断](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0360e/CHDEEIJB.html)）指令。这会使 CPU在该指令处**冻结**，直到触发启用的中断。全速暂停 CPU 时钟的问题是，这会浪费一些电流/功率。通常，在此模式下，SDRAM 和平台时钟可能会自动进入低功耗状态。

您必须查阅 CPU/SOC 上的数据表以了解更多信息。然而，回到问题。这种低功耗模式很可能会破坏/更改这些协处理器寄存器，因此`save_cpu_arch_register()`需要`restore_cpu_arch_register()`确保它们保持调用前的状态。该代码可能会在`exynos4_enter_core0_aftr()`. 它们确实需要保存和恢复，否则 CPU 可能会以奇怪的电源/电压/时钟恢复。也可能`cpu_do_idle()`是您的机器覆盖了它，并且它正在更改这些寄存器。

简单地说，这个函数是保存一些状态，当 CPU 进入**挂起**或*等待中断*模式时会被破坏。*

# python - numpy 中 itertools.combinations 的 ND 版本

> ID：16003217
> 
> 赞同：25
> 
> 时间：2013-04-14T19:14:17.130
> 
> 标签：python, numpy, combinatorics, itertools

我想为 numpy 实现[itertools.combinations](http://docs.python.org/2/library/itertools.html#itertools.combinations)。基于[这个讨论](http://numpy-discussion.10968.n7.nabble.com/itertools-combinations-to-numpy-td16635.html)，我有一个适用于一维输入的函数：

```
def combs(a, r):
    """
    Return successive r-length combinations of elements in the array a.
    Should produce the same output as array(list(combinations(a, r))), but 
    faster.
    """
    a = asarray(a)
    dt = dtype([('', a.dtype)]*r)
    b = fromiter(combinations(a, r), dt)
    return b.view(a.dtype).reshape(-1, r) 
```

并且输出是有意义的：

```
In [1]: list(combinations([1,2,3], 2))
Out[1]: [(1, 2), (1, 3), (2, 3)]

In [2]: array(list(combinations([1,2,3], 2)))
Out[2]: 
array([[1, 2],
       [1, 3],
       [2, 3]])

In [3]: combs([1,2,3], 2)
Out[3]: 
array([[1, 2],
       [1, 3],
       [2, 3]]) 
```

但是，如果我可以将其扩展到 ND 输入，那将是最好的，其中额外的维度只是让您可以一次快速地进行多个调用。因此，从概念上讲，如果`combs([1, 2, 3], 2)`产生`[1, 2], [1, 3], [2, 3]`和 `combs([4, 5, 6], 2)`产生`[4, 5], [4, 6], [5, 6]`，那么`combs((1,2,3) and (4,5,6), 2)`应该产生`[1, 2], [1, 3], [2, 3] and [4, 5], [4, 6], [5, 6]`其中“和”只代表平行行或列（以有意义的为准）。（同样适用于其他尺寸）

我不确定：

1.  如何使维度以与其他函数的工作方式一致的逻辑方式工作（比如一些 numpy 函数如何具有`axis=`参数，以及轴 0 的默认值。所以可能轴 0 应该是我正在组合的轴，以及所有其他轴只代表并行计算？）
2.  如何让上面的代码与 ND 一起工作（现在我得到了`ValueError: setting an array element with a sequence.`）
3.  有更好的方法`dt = dtype([('', a.dtype)]*r)`吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T06:03:56.273

您可以使用`itertools.combinations()`创建索引数组，然后使用 NumPy 的精美索引：

```
import numpy as np
from itertools import combinations, chain
from scipy.special import comb

def comb_index(n, k):
    count = comb(n, k, exact=True)
    index = np.fromiter(chain.from_iterable(combinations(range(n), k)), 
                        int, count=count*k)
    return index.reshape(-1, k)

data = np.array([[1,2,3,4,5],[10,11,12,13,14]])

idx = comb_index(5, 3)
print(data[:, idx]) 
```

输出：

```
[[[ 1  2  3]
  [ 1  2  4]
  [ 1  2  5]
  [ 1  3  4]
  [ 1  3  5]
  [ 1  4  5]
  [ 2  3  4]
  [ 2  3  5]
  [ 2  4  5]
  [ 3  4  5]]

 [[10 11 12]
  [10 11 13]
  [10 11 14]
  [10 12 13]
  [10 12 14]
  [10 13 14]
  [11 12 13]
  [11 12 14]
  [11 13 14]
  [12 13 14]]] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-22T15:10:36.420

当 时`r = k = 2`，您还可以使用`numpy.triu_indices(n, 1)`哪些索引矩阵的上三角形。

```
idx = comb_index(5, 2) 
```

来自[HYRY的回答](https://stackoverflow.com/a/16008578/125507)相当于

```
idx = np.transpose(np.triu_indices(5, 1)) 
```

但是是内置的，并且 N 高于 ~20 时要快几倍：

```
timeit comb_index(1000, 2)
32.3 ms ± 443 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

timeit np.transpose(np.triu_indices(1000, 1))
10.2 ms ± 25.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-01T20:01:25.010

### 案例 k = 2：`np.triu_indices`

我已经`k = 2`使用上述功能的许多变体测试了案例[`perfplot`](https://pypi.org/project/perfplot/)。毫无疑问，赢家是，`np.triu_indices`我现在看到，`np.dtype([('', np.intp)] * 2)`即使对于像`igraph.EdgeList`.

```
from itertools import combinations, chain
from scipy.special import comb
import igraph as ig #graph library build on C
import networkx as nx #graph library, pure Python

def _combs(n):
    return np.array(list(combinations(range(n),2)))

def _combs_fromiter(n): #@Jaime
    indices = np.arange(n)
    dt = np.dtype([('', np.intp)]*2)
    indices = np.fromiter(combinations(indices, 2), dt)
    indices = indices.view(np.intp).reshape(-1, 2)
    return indices

def _combs_fromiterplus(n):
    dt = np.dtype([('', np.intp)]*2)
    indices = np.fromiter(combinations(range(n), 2), dt)
    indices = indices.view(np.intp).reshape(-1, 2)
    return indices

def _numpy(n): #@endolith
    return np.transpose(np.triu_indices(n,1))

def _igraph(n):
    return np.array(ig.Graph(n).complementer(False).get_edgelist())

def _igraph_fromiter(n):
    dt = np.dtype([('', np.intp)]*2)
    indices = np.fromiter(ig.Graph(n).complementer(False).get_edgelist(), dt)
    indices = indices.view(np.intp).reshape(-1, 2)
    return indices

def _nx(n):
    G = nx.Graph()
    G.add_nodes_from(range(n))
    return np.array(list(nx.complement(G).edges))

def _nx_fromiter(n):
    G = nx.Graph()
    G.add_nodes_from(range(n))
    dt = np.dtype([('', np.intp)]*2)
    indices = np.fromiter(nx.complement(G).edges, dt)
    indices = indices.view(np.intp).reshape(-1, 2)
    return indices

def _comb_index(n): #@HYRY
    count = comb(n, 2, exact=True)
    index = np.fromiter(chain.from_iterable(combinations(range(n), 2)), 
                        int, count=count*2)
    return index.reshape(-1, 2)

fig = plt.figure(figsize=(15, 10))
plt.grid(True, which="both")
out = perfplot.bench(
        setup = lambda x: x,
        kernels = [_numpy, _combs, _combs_fromiter, _combs_fromiterplus, 
                   _comb_index, _igraph, _igraph_fromiter, _nx, _nx_fromiter],
        n_range = [2 ** k for k in range(12)],
        xlabel = 'combinations(n, 2)',
        title = 'testing combinations',
        show_progress = False,
        equality_check = False)
out.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/IIwtg.png)](https://i.stack.imgur.com/IIwtg.png)

想知道为什么`np.triu_indices`不能扩展到更多维度？

### 情况 2 ≤ k ≤ 4：（`triu_indices`在此处实现）= 最高 2 倍加速

`np.triu_indices` ***实际上可能***是案例的赢家`k = 3`，即使`k = 4`我们实现了一个通用的方法。此方法的当前版本等效于：

```
def triu_indices(n, k):
    x = np.less.outer(np.arange(n), np.arange(-k+1, n-k+1))
    return np.nonzero(x) 
```

*它为两个序列 0,1,...,n-1 构建关系x < y*的矩阵表示，并找到它们不为零的单元格的位置。对于 3D 情况，我们需要添加额外的维度和相交关系*x < y*和*y < z*。对于下一维过程是相同的，但这会导致巨大的**内存过载**，因为需要 n^k 个二进制单元，并且其中只有 C(n, k) 达到 True 值。内存使用量和性能增长了 O(n!)，因此该算法`itertools.combinations`仅在 k 值较小时表现出色。这最好实际用于案例`k=2`和`k=3`

```
def C(n, k): #huge memory overload...
    if k==0:
        return np.array([])
    if k==1:
        return np.arange(1,n+1)
    elif k==2:
        return np.less.outer(np.arange(n), np.arange(n))
    else:
        x = C(n, k-1)
        X = np.repeat(x[None, :, :], len(x), axis=0)
        Y = np.repeat(x[:, :, None], len(x), axis=2)
        return X&Y

def C_indices(n, k):
    return np.transpose(np.nonzero(C(n,k))) 
```

让我们用[perfplot](https://pypi.org/project/perfplot/)结帐：

```
import matplotlib.pyplot as plt
import numpy as np
import perfplot
from itertools import chain, combinations
from scipy.special import comb

def C(n, k):  # huge memory overload...
    if k == 0:
        return np.array([])
    if k == 1:
        return np.arange(1, n + 1)
    elif k == 2:
        return np.less.outer(np.arange(n), np.arange(n))
    else:
        x = C(n, k - 1)
        X = np.repeat(x[None, :, :], len(x), axis=0)
        Y = np.repeat(x[:, :, None], len(x), axis=2)
        return X & Y

def C_indices(data):
    n, k = data
    return np.transpose(np.nonzero(C(n, k)))

def comb_index(data):
    n, k = data
    count = comb(n, k, exact=True)
    index = np.fromiter(chain.from_iterable(combinations(range(n), k)),
                        int, count=count * k)
    return index.reshape(-1, k)

def build_args(k):
    return {'setup': lambda x: (x, k),
            'kernels': [comb_index, C_indices],
            'n_range': [2 ** x for x in range(2, {2: 10, 3:10, 4:7, 5:6}[k])],
            'xlabel': f'N',
            'title': f'test of case C(N,{k})',
            'show_progress': True,
            'equality_check': lambda x, y: np.array_equal(x, y)}

outs = [perfplot.bench(**build_args(n)) for n in (2, 3, 4, 5)]
fig = plt.figure(figsize=(20, 20))
for i in range(len(outs)):
    ax = fig.add_subplot(2, 2, i + 1)
    ax.grid(True, which="both")
    outs[i].plot()
plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/IEOZF.png)](https://i.stack.imgur.com/IEOZF.png)

`k=2`因此，对于(相当于k=3` ) 实现了最佳性能提升，`np.triu_indices) and for` 它几乎快了两倍。

### 案例 k > 3：（`numpy_combinations`在此处实现）= 高达 2.5 倍的加速

在[这个问题](https://stackoverflow.com/q/63751096/3044825)之后（感谢@Divakar），我设法找到了一种基于前一列和帕斯卡三角形计算特定列值的方法。它还没有尽可能地优化，但结果确实很有希望。开始了：

```
from scipy.linalg import pascal

def stretch(a, k):
    l = a.sum()+len(a)*(-k)
    out = np.full(l, -1, dtype=int)
    out[0] = a[0]-1
    idx = (a-k).cumsum()[:-1]
    out[idx] = a[1:]-1-k
    return out.cumsum()

def numpy_combinations(n, k):
    #n, k = data #benchmark version
    n, k = data
    x = np.array([n])
    P = pascal(n).astype(int)
    C = []
    for b in range(k-1,-1,-1):
        x = stretch(x, b)
        r = P[b][x - b]
        C.append(np.repeat(x, r))
    return n - 1 - np.array(C).T 
```

基准测试结果是：

```
# script is the same as in previous example except this part
def build_args(k):
return {'setup': lambda x: (k, x),
        'kernels': [comb_index, numpy_combinations],
        'n_range': [x for x in range(1, k)],
        'xlabel': f'N',
        'title': f'test of case C({k}, k)',
        'show_progress': True,
        'equality_check': False}
outs = [perfplot.bench(**build_args(n)) for n in (12, 15, 17, 23, 25, 28)]
fig = plt.figure(figsize=(20, 20))
for i in range(len(outs)):
    ax = fig.add_subplot(2, 3, i + 1)
    ax.grid(True, which="both")
    outs[i].plot()
plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/jc59f.png)](https://i.stack.imgur.com/jc59f.png)

尽管它仍然无法与之抗争，`itertools.combinations`但`n < 15`在其他情况下它是一个新的赢家。最后但并非最不重要的一点是，`numpy`当组合数量变得非常大时，展示它的力量。它能够在处理大约 40'000'000 个大小为 14 的项目的 C(28, 14) 组合时存活下来

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-15T05:52:26.757

不确定它在性能方面的表现如何，但您可以在索引数组上进行组合，然后使用以下命令提取实际的数组切片`np.take`：

```
def combs_nd(a, r, axis=0):
    a = np.asarray(a)
    if axis < 0:
        axis += a.ndim
    indices = np.arange(a.shape[axis])
    dt = np.dtype([('', np.intp)]*r)
    indices = np.fromiter(combinations(indices, r), dt)
    indices = indices.view(np.intp).reshape(-1, r)
    return np.take(a, indices, axis=axis)

>>> combs_nd([1,2,3], 2)
array([[1, 2],
       [1, 3],
       [2, 3]])
>>> combs_nd([[1,2,3],[4,5,6]], 2, axis=1)
array([[[1, 2],
        [1, 3],
        [2, 3]],

       [[4, 5],
        [4, 6],
        [5, 6]]]) 
```

# javascript - 理解 Sinon.js 的 yield()、yield() 和 callArg()

> ID：16003218
> 
> 赞同：33
> 
> 时间：2013-04-14T19:14:21.440
> 
> 标签：javascript, sinon

和有什么区别

*   `stub.yield([arg1, arg2, ...])`
*   `spy.yields([arg1, arg2, ...])`
*   `stub.callsArg(index)`

在[Sinon.js](http://sinonjs.org/docs/#stubs)存根库中？

`stub.yield()`是我能够掌握的唯一一个：

```
 stub = sinon.stub(API, 'call_remote');
  callback = sinon.spy();
  API.call_remote('help', callback);
  @stub.yield( "solution!" );
  @stub.calledOnce.should.be.true;
  @callback.calledOnce.should.be.true;
  @callback.args[0][0].should.eql( "solution!" ); 
```

正如用 should.js 测试的那样，所有断言都会通过。

`stub.yields()`和是否有类似的测试模式`stub.callsArg(index)`？

该文档没有提供任何示例来阐明这两种方法，但我对它们很好奇。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-15T13:34:41.070

我相信文档中概述的方法如下：

*   `spy.yield`
*   `stub.yields`
*   `stub.callsArg`

`yields`和之间的主要区别`callsArg`可以在 sinon 的产量文档中找到：

> 如果一个方法接受多个回调，则需要使用 callsArg 让存根调用除第一个回调之外的其他回调。

`yields`将使用您提供给它的任何可选参数调用它遇到的*第一个函数参数。*`callsArg`将尝试 在该调用的对象内的*给定索引*`arguments`处调用函数参数，并且不会将任何参数传递给它（您可以`callArgWith`用于该行为）。

`spy.yield`非常相似，`stub.yields`只是它是 spy API 的一部分，并且它调用传递给它的所有回调。

这是一些展示差异的示例（如果示例有点做作，请原谅我）：

产量：

```
var fn = sinon.expectation.create().withArgs(1, 2);
var stub = sinon.stub().yields(1, 2);
stub(fn);
fn.verify(); 
```

调用参数：

```
var f1 = sinon.expectation.create().never();
var f2 = sinon.expectation.create().once();
var stub = sinon.stub().callsArg(1);
stub(f1, f2);
f1.verify();
f2.verify(); 
```

屈服：

```
var f1 = sinon.expectation.create().once();
var f2 = sinon.expectation.create().once();
var stub = sinon.stub().yield();
stub(f1, f2);
f1.verify();
f2.verify(); 
```

# delphi - TMEMO 中的多行添加

> ID：16003220
> 
> 赞同：5
> 
> 时间：2013-04-14T19:14:46.113
> 
> 标签：delphi

我有一个带有 2 个按钮（Button1、Button2）和 1 个备忘录（Memo1）的 Delphi XE2 项目。

我的要求是在 Button1 上单击 Some Text 将在第一行（Line1）中写入 Memo1。如果我再次单击 Button1 一些新文本将写入新行 (Line2)。

如果我单击 Button2，另一个新文本将附加在 Memo1 中（在最后一行之后将创建一个新行）。所以我写了以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Lines.Text :='Line1';
  Memo1.Lines.Text :='Line2';
end;
....
....
....
....
procedure TForm1.Button2Click(Sender: TObject);
begin
  Memo1.Lines.Text :='Line3';
  Memo1.Lines.Text :='Line4';
end; 
```

但问题是只有一行在 Button1FirstClick 上显示为“Line1”，在 Button1SecondClick 上显示为“Line2”，在 Button2Click 上显示为“Line4”。请帮我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T19:16:50.400

要向备忘录控件添加更多文本，请调用`Append`或`Add`，如下所示：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Lines.Add('Line1');
  Memo1.Lines.Add('Line2');
end;
....
....
....
....
procedure TForm1.Button2Click(Sender: TObject);
begin
  Memo1.Lines.Add('Line3');
  Memo1.Lines.Add('Line4');
end; 
```

如果您需要清除内容...

```
Memo1.Lines.Clear; 
```

如果您希望替换一行（仅当索引已经存在时）：

```
Memo1.Lines[2]:= 'Replacement Text'; 
```

要删除其中一行...

```
Memo1.Lines.Delete(2); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-14T19:54:54.610

`TMemo.Lines`是一个[`TStrings`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStrings)具有许多字符串处理能力的类型的对象。分配`Text`属性会重写它包含的所有字符串。

您可以在所有其他已经存在的行之后添加一行：

```
Memo.Lines.Add('Text'); 
```

您可以插入一行（在第四个位置）：

```
Memo.Lines.Insert(3, 'Text'); 
```

您可以添加多行：

```
Memo.Lines.Add('Line1'#13#10'Line2');
Memo.Lines.AddStrings(ListBox.Lines); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:45:43.317

在 Delphi 中有 Memo1.Lines.Text

但在 C builder 中有 Memo1.Text 或 Memo1->Text

要让多行进入 TMemo，您可以将其分配为 memo1->text = tstringlist->text;

作为 tstringlist 你可以使用 tsringlist->CommaText="line1,line2,line3,line4"; // , 作为新行

然后 memo1->text = tstringlist->text;

或 memo1->lines->add(tstringlist->text); //在最后一行停止的memo1之后插入

或 memo1->lines->add("第 1 行，\x0d\x0a 第 2 行，\x0d\x0a 第 3 行");

或 memo1->lines->add("Line 1, \r\n aline 2, \r\n aline 3");

否则使用 memo1->lines->add(""); //对于每个新的空行

祝你好运

# python - 安装 bsddb 包 - python

> ID：16003224
> 
> 赞同：22
> 
> 时间：2013-04-14T19:15:01.923
> 
> 标签：python, macos, installation, package

我对 python 完全陌生，当我尝试导入 bsdddb 时出现此消息

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/bsddb/__init__.py", line 67, in <module>
    import _bsddb
ImportError: No module named _bsddb 
```

所以我跟着[这个](http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/)和[这个](https://stackoverflow.com/questions/814041/how-to-fix-the-broken-bsddb-install-in-the-default-python-package-on-mac-os-x-10)，所以我下载了这个包`bsddb3-4.5.0.tar.gz`。我想用它做什么，我尝试在正确的目录中运行 python install setup.py int bsddb3-4.5.0（我使用的是 osx）。然后我得到

```
Can't find a local BerkeleyDB installation.
(suggestion: try the --berkeley-db=/path/to/bsddb option) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-20T12:10:57.423

bsddb[自 2.6 起已弃用](http://docs.python.org/2/library/bsddb.html#module-bsddb)。理想的是使用[bsddb3 模块](http://www.jcea.es/programacion/pybsddb.htm)。

我的建议，也是迄今为止最简单的选择，是安装[Homebrew](http://mxcl.github.io/homebrew/)并使用它在您的系统上获取 BerkeleyDB：

```
brew install berkeley-db 
```

[在此之后使用pip](http://www.virtualenv.org/en/latest/)安装 bsddb3

```
pip install bsddb3 
```

或者下载[源代码](https://pypi.python.org/packages/source/b/bsddb3/bsddb3-5.3.0.tar.gz#md5=d5aa4f293c4ea755e84383537f74be82)并正常安装。

```
python setup.py install 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-02T11:34:21.367

我遇到了类似的问题，但没有一个建议对我有用，因为我无法使用 AGPL 许可证或 Oracle 的商业伯克利许可证。

```
BERKELEYDB_DIR=$(brew --cellar)/berkeley-db/6.1.26 pip install bsddb3
Collecting bsddb3
Using cached bsddb3-6.1.1.tar.gz
Complete output from command python setup.py egg_info:
Trying to use the Berkeley DB you specified...
Detected Berkeley DB version 6.1 from db.h

******* COMPILATION ABORTED *******

You are linking a Berkeley DB version licensed under AGPL3 or have a commercial license.

AGPL3 is a strong copyleft license and derivative works must be equivalently licensed.

You have two choices:

  1\. If your code is AGPL3 or you have a commercial Berkeley DB license from Oracle, please, define the environment variable 'YES_I_HAVE_THE_RIGHT_TO_USE_THIS_BERKELEY_DB_VERSION' to any value, and try to install this python library again.

  2\. In any other case, you have to link to a previous version of Berkeley DB. Remove Berlekey DB version 6.x and let this python library try to locate an older version of the Berkeley DB library in your system. Alternatively, you can define the environment variable 'BERKELEYDB_DIR', or 'BERKELEYDB_INCDIR' and 'BERKELEYDB_LIBDIR', with the path of the Berkeley DB you want to use and try to install this python library again.

Sorry for the inconvenience. I am trying to protect you.

More details:

    https://forums.oracle.com/message/11184885
    http://lists.debian.org/debian-legal/2013/07/

******* COMPILATION ABORTED ******* 
```

然而，恢复到旧版本修复了它。

使用 brew 安装旧版本的 berkeley-db

`brew install berkeley-db4`

然后按照建议使用 pip 安装 bsddb3

`pip install bsddb3`

然后

`BERKELEYDB_DIR=$(brew --cellar)/berkeley-db4/4.8.30 pip install bsddb3`

（根据 Stefan Schmidt 的评论修改以引用较旧的 berkeley-db[版本](http://brewformulas.org/Berkeley-db4)目录）

最后将补丁应用到 dbhash.py，如此处[所述](http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-19T17:45:49.447

@bamdan 的答案使用旧版本的 Berkeley DB，如果您仍想使用最新的 Berkeley DB，

*   首先，安装最新的 Berkeley DB

    ```
    pip install berkeley-db 
    ```

*   二、设置环境变量`YES_I_HAVE_THE_RIGHT_TO_USE_THIS_BERKELEY_DB_VERSION`表明你有license

    ```
    BERKELEYDB_DIR=$(brew --cellar)/berkeley-db4/6.1.26 YES_I_HAVE_THE_RIGHT_TO_USE_THIS_BERKELEY_DB_VERSION=yes pip install bsddb3 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T16:00:55.243

我只是想添加一些目前缺少的东西，我是 Linux Ubuntu/Debian 用户，但我必须让我的 python 脚本在 macOS 系统上工作。我遇到了与 user1611830 遇到的相同问题。

我按照上面弗朗西斯科·罗克和肖恩解释的步骤进行操作。但是，我遇到了同样的初始问题。我看到了 Bamdan 的回答，想看看他提到的补丁，使用他提供的链接修改 dbhash.py [source](http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/)。但是“补丁”链接不再起作用。

我发现为了按照 source 中的说明修改 dbhash.py [，](http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/)需要禁用系统完整性保护，因此请按照此答案[disablingSIP](https://apple.stackexchange.com/questions/294609/cannot-change-permissions-on-system-library)的说明进行操作。之后，我可以修改 dbhash.py 并且新的 bsddb3 工作，我可以使用 shelve 读取之前保存的工作空间。

# ruby - 挤！不工作

> ID：16003226
> 
> 赞同：0
> 
> 时间：2013-04-14T19:15:17.903
> 
> 标签：ruby, string

我有一个文本文件，我正在打开并从中创建对象。它看起来像这样：

```
/home/music/Accident Murderer.mp3|4:37|    Nas       |    Accident Murderer
/home/music/Bitch Bad.mp3        |4:49| Lupe   Fiasco|    Bitch Bad
/home/music/ITAL.mp3             |4:24| Lupe   Fiasco|    ITAL(Roses)
/home/music/The Coolest.mp3      |5:13| Lupe   Fiasco|    The Coolest 
```

然后我使用以下代码创建歌曲对象：

```
songs = SongList.new
songFile = File.open('./songs.txt')
songFile.each do |line|
  file, length, name, title = line.chomp.split(/\s*\|\s*/)
  name.squeeze!(" ")
  mins, secs = length.scan(/\d+/)
  songs.append Karaoke::Song.new(title, name, mins.to_i*60+secs.to_i)
end 
```

但是我收到以下错误消息：

```
songlist.rb:40:in `block in <class:SongList>': undefined method `squeeze!' for nil:NilClass (NoMethodError). 
```

有人可以帮忙吗。我不明白为什么要“挤”！是一个未定义的方法。这是一个字符串类方法对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:51:36.273

您是否有可能正在处理一个空白行？也许在文件的末尾？那会分裂成`["",nil,nil,nil]`, so`name`会`nil`导致你看到的错误。. .

对此的修复将如下所示：

```
songs = SongList.new
songFile = File.open('./songs.txt')
songFile.each do |line|
  next if line.chomp.empty?
  file, length, name, title = line.chomp.split(/\s*\|\s*/)
  raise "Got less than four columns, line '#{line.chomp}'" if title == nil 
  name.squeeze!(" ")
  mins, secs = length.scan(/\d+/)
  songs.append Karaoke::Song.new(title, name, mins.to_i*60+secs.to_i)
end 
```

应该跳过任何简单的`next`空行，但您可以更改它以跳过任何您想视为“在输入文件中正常，但不包含我的脚本的数据”的内容。

我还添加了一个简单的验证，如果一行最初看起来不错，但会意外丢失最后一列，则会引发错误。我通常会推荐这种方法，至少在处理来自代码外部的数据的某个阶段，您应该检查它是否真的是您期望或需要的。

什么是可以跳过的，什么是输入文件中的错误取决于您。这种修改至少应该给你一些关于哪里出了问题的更多线索。

# ios - 如果我将 UIPanGestureRecognizer 附加到视图，我可以随时使用 touchesBegan 等吗？

> ID：16003227
> 
> 赞同：0
> 
> 时间：2013-04-14T19:15:18.617
> 
> 标签：ios, objective-c, uiview, uigesturerecognizer, uipangesturerecognizer

我有一种`handlePan:`用户平移的方法，但我想知道他们什么时候开始平移，所以最好使用`touchesBegan`？我什至可以吗？有冲突吗？

无论如何，它`touchesMoved`与 UIPanGestureRecognizer 有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:36:58.660

您的手势识别器处理程序以不同的状态调用。确保查看识别器的状态。这使您可以知道它何时开始、更新（多次调用）和结束。不需要也实现该`touchesBegan`方法来知道平底锅何时开始。

```
- (void)handlePan:(UIPanGestureRecognizer *)gestureRecognizer {
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        // handle start of gesture
    } else if ([gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        // handle updated position
    }
} 
```

您可能希望处理其他状态。请参阅`UIGestureRecognizer`.

# python-2.7 - Pocketsphinx 解码器添加了自己的单词

> ID：16003228
> 
> 赞同：0
> 
> 时间：2013-04-14T19:15:24.863
> 
> 标签：python-2.7, speech-recognition, speech-to-text, cmusphinx

我正在使用`Ubuntu 12.04`, `Python 2.7`& `PocketSphinx`。

我做了一个定制`dictionary`，`language model`使用在线`LM tool`。使用`pocketsphinx_continous`解码口语给了我 100% 的准确率。但是`PyAudio`用于录制声音会`Python`识别文本，但会在主要上下文中添加“A”和“AND”，如下图所示 ![PocketSphinx_Continuous](https://i.stack.imgur.com/mzk8U.jpg) ![Python中的PocketSphinx](https://i.stack.imgur.com/ngSnR.png) 如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:56:47.227

准确性降低的原因是您在话语周围添加了一个人为的零静音区域，这会破坏频谱并降低准确性。别那样做。相反，只需识别您录制的声音。

如果您仍然需要解码零静音区域，则需要添加

```
 dither="yes" 
```

解码器参数中的选项，以便让解码器解决它们。添加此选项后，结果将是准确的。

# database - QT中的空sqlite数据库

> ID：16003231
> 
> 赞同：3
> 
> 时间：2013-04-14T19:15:49.387
> 
> 标签：database, sqlite, qt

我在 QT 中访问我的 sqlite 数据库时遇到问题。我已将我的数据库存储在我的项目文件夹中并执行了以下操作：

```
.pro file

RESOURCES += \

sqfiles.SOURCES = db.sqlite
sqfiles.path = .

DEPLOYMENT += sqfiles 
```

我可以打开我的数据库并声明它有效但没有表，因此我无法执行任何搜索命令并在运行此代码后收到以下错误：

```
QSqlQuery query("SELECT * FROM shifts", db);
if(!query.exec())
{
    qDebug() << query.lastError().text();
    qDebug() << "ERROR" << endl;
    return;
}
while(query.next())
{
    QString name = query.value(1).toString();
    qDebug() << name << endl;
} 
```

> 消息：“无查询无法获取行”

当我在我的 QT 项目之外打开这个数据库时，我有多个表并且可以运行查询。

关于出了什么问题的任何建议或想法？为什么它认为我的数据库是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:36:10.133

这是我创建表的查询（使用 SQLITE 数据库浏览器程序）。

```
CREATE TABLE shifts (ID INTEGER PRIMARY KEY, NUMBER NUMERIC, TEXT TEXT);
INSERT INTO shifts VALUES(1,123,'ABC');
INSERT INTO shifts VALUES(2,456,'DEF'); 
```

这是我的 Qt 代码。

```
#include <QApplication>
#include <QSqlDatabase>
#include <QSqlQuery>
#include <QSqlRecord>
#include <QDebug>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("database.db");
    db.open();
    QSqlQuery query;
    query.exec("SELECT * from shifts");
    while (query.next())
    {
        qDebug() << "NUMBER" << query.value(0).toString()
                    << "TEXT" << query.value(1).toString();
    }
    return a.exec();
} 
```

输出

```
NUMBER "1" TEXT "123" 
NUMBER "2" TEXT "456" 
```

我没有在项目文件中添加 SQLite 信息。相反，我使用`QSqlDatabase`并添加了`QT += sql`. 哦，是的，确保你有 SQLITE 驱动程序。像这样测试。

```
qDebug() << QSqlDatabase::drivers(); 
```

这是我的输出。

```
("QSQLITE", "QMYSQL3", "QMYSQL") 
```

去做

*   检查您是否使用 Qt 安装了 SQLite 驱动程序
*   检查数据库文件的名称是否正确。使用绝对路径而不是相对路径。

# nextpeer - 下一个同行问题

> ID：16003235
> 
> 赞同：0
> 
> 时间：2013-04-14T19:16:16.827
> 
> 标签：nextpeer

我想知道是否有人可以帮助解决将 nextpeer 集成到我的游戏中的一些问题。

1.  首先，它会在游戏完成并且应该出现 nextpeer 窗口时出现，会有一点延迟，可能会持续 3-7 秒。当这种情况发生时，游戏处于某种冻结状态，用户无法做任何事情。我在其他游戏中看到过这种情况，所以我想知道是否有人对该怎么做有任何建议。

2.  我有玩家 2 玩家集成设置，您可以在其中看到游戏中的其他玩家角色。基本上你知道他们的位置相对于你的位置。我的问题是，我只看到其他玩家，如果它是与你对抗的机器人或假玩家之一相对的真正的其他玩家。根据 nextpeer 的说法，您还应该看到机器人，而不仅仅是真正的玩家。

其他玩家也移动缓慢，这意味着除了一开始你真的看不到他们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:33:19.040

布莱恩，

首先，确保您使用的是最新的 SDK [1.4.5](http://developers.nextpeer.com/downloads/sdk)

您应该发送小尺寸消息并降低消息频率：

来自[Nextpeer 常见问题解答](http://developers.nextpeer.com/faq/faq#PlayertoPlayer)：

问：我应该多久发送一次更新？我应该寄多少？推荐的文件容量是多少？

**答：我们建议您每秒发送的更新不要超过 10 次，并且不要超过大约 500 字节。**

# jquery - json 响应中的字符会破坏 jquery text()

> ID：16003236
> 
> 赞同：2
> 
> 时间：2013-04-14T19:16:20.993
> 
> 标签：jquery

我正在使用 . 我一直在从这些字符串中剥离 html，如下所示：

```
var comb = $(qu1[i].title + qu1[i].content).text() 
```

我遇到了这样的字符串问题：`San Diego Zoo&#39;s Animal Bytes:`，它返回语法错误。我不确定为什么 jquery 对这个字符串有问题。

知道我该如何处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:18:59.360

因为它不是选择器，并且较新版本的 jQuery（1.9+）不再解析不以`<`. 尝试：

```
var comb = $('<div>').append($.parseHTML(qu1[i].title + qu1[i].content)).text(); 
```

[`$.parseHTML`](http://api.jquery.com/jQuery.parseHTML/)在 jQuery 1.8+ 中可用并有助于防止 XSS（这不会剥离所有 JS，只有脚本标签。`onevent`保留属性）。不过，如果来源值得信赖，您可以直接附加 html。我更愿意站在更安全的一边。`=]`

基本上，代码会动态创建一个元素 ( `div`) 并附加干净解析的标记，然后检索其文本表示。我不能声称原创性，类似的方法显示在[如何使用 jQuery 解码 HTML 实体？](https://stackoverflow.com/a/2419664/1331430)和许多其他线程。

由于没有保留对`div`元素及其包装 jQuery 对象的引用，因此 GC 将非常快地收集这些引用。

参考：

[jQuery Core 1.9 升级指南 -`jQuery(htmlString)`对比`jQuery(selectorString)`](http://jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring)

# java - 在 Hadoop 的 WordCount 程序中获取异常

> ID：16003237
> 
> 赞同：0
> 
> 时间：2013-04-14T19:16:22.680
> 
> 标签：java, hadoop, mapreduce, word-count, mapper

尝试在 hadoop 上运行第一个程序时，我遇到了这个异常。（我在 0.20.2 版本上使用 hadoop 新 API）。我在网上搜索，似乎大多数人在配置逻辑中没有设置MapperClass和ReducerClass时都会遇到这个问题。但我检查了一下，看起来代码没问题。如果有人可以帮助我，我将不胜感激。

java.io.IOException：映射中的键类型不匹配：预期的 org.apache.hadoop.io.Text，在 org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect 处收到 org.apache.hadoop.io.LongWritable（MapTask .java:871)

```
package com.test.wc;
import java.io.IOException;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper;

public class WordCountMapper extends Mapper<LongWritable,Text,Text,IntWritable> {

public void Map(LongWritable key,Text value,Context ctx) throws IOException , InterruptedException {
    String line = value.toString();
    for(String word:line.split("\\W+")) {
        if(word.length()> 0){
            ctx.write(new Text(word), new IntWritable(1));
        }
    }
}
}

package com.test.wc;
import java.io.IOException;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Reducer;
public class WordCountReducer extends Reducer<Text,IntWritable,Text,IntWritable> {

public void reduce(Text key, Iterable<IntWritable> values, Context ctx) throws IOException,InterruptedException {
 int wordCount = 0;
    for(IntWritable value:values)
    {
        wordCount+=value.get();
    }
    ctx.write(key,new IntWritable(wordCount));
}

}

package com.test.wc;
import java.io.IOException;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
public class WordCountJob {
public static void main(String args[]) throws IOException, InterruptedException, ClassNotFoundException{
    if(args.length!=2){
        System.out.println("invalid usage");
        System.exit(-1);
    }

    Job job = new Job();
    job.setJarByClass(WordCountJob.class);
    job.setJobName("WordCountJob");

    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    job.setMapperClass(WordCountMapper.class);
    job.setReducerClass(WordCountReducer.class);

    //job.setCombinerClass(WordCountReducer.class);

    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(IntWritable.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    System.exit(job.waitForCompletion(true) ? 0:1);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:18:01.377

只需编辑您的映射器功能

公共无效***映射***（LongWritable 键、文本值、上下文 ctx）

至

公共无效***映射***（LongWritable 键、文本值、上下文 ctx）

它对我有用。

Hadoop版本：- Hadoop 1.0.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:52:53.350

由于您使用大写字母 M 代替小写字母 m，您的`Map()`方法无法覆盖`Mapper`的方法。`map()`

因此，正在使用默认的身份映射方法，这导致用作输入的相同键和值对也用作输出。由于您的映射器已指定`extends Mapper<LongWritable,Text,Text,IntWritable>`，您尝试输出的`LongWritable, Text`而不是`Text, IntWritable`导致异常。

`Map()`将您的方法更改为`map()`并添加`@Override`注释应该可以解决问题 - 如果您使用的是 IDE，我强烈建议您使用它内置的方法覆盖功能来避免此类错误。

# javascript - 选择所有 iframe 并使用 javascript 检查它们

> ID：16003238
> 
> 赞同：2
> 
> 时间：2013-04-14T19:16:28.417
> 
> 标签：javascript, html, iframe

我的代码在这里：-

```
<iframe src="http://www.website.com/abc.ext" width="600px" height="400px"></iframe><br />
<iframe src="http://www.anotherwebsite.com/link.py" width="600px" height="400px"></iframe> 
```

现在，我想用 javascript 选择两个 iframe 并检查它们的 src。我只想允许 iframe 使用 www.website.com。我想构建一个 javascript 代码，它只显示包含 www.website.com 的 iframe，而其他 iframe 将被隐藏。

请让我知道这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:19:52.037

```
var frames = document.getElementsByTagName('iframe');
for (var i in frames)
    if (!frames[i].src.match(/^http:\/\/www\.website\.com/))
        document.body.removeChild(frames[i]); 
```

像这样的东西。您可以更换条件并根据需要做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:19:40.323

如果您使用的是 jquery：

```
$('iframe:not([src*="www.website.com"])').hide(); 
```

# c# - 使用 bindingSource3.AddNew() 时无法在 '<>f__AnonymousType1`2 上调用错误 AddNew；

> ID：16003242
> 
> 赞同：0
> 
> 时间：2013-04-14T19:16:37.260
> 
> 标签：c#, linq, entity-framework

当我使用以下代码时，会发生错误

```
testtelContext db = new testtelContext();
        var qry = (from p in db.firstlasts
                              join i in db.firstnames
                                  on p.Idfname equals i.Idfname
                              select new 
                              {
                                  id = p.idfl,
                                  name = i.fname

                              }).ToList();
        bindingSource3.DataSource = qry;

        dataGridView5.DataSource = bindingSource3;
        bindingSource3.AddNew(); 
```

使用 bindingSource3.AddNew() 时出错；

错误：无法在 '<>f__AnonymousType1 `2[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' type. This type does not have a public default constructor. You can call AddNew on the '<>f__AnonymousType1`2[[System.Int32，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089]，[System.String，mscorlib，Version=4.0.0.0，Culture =neutral, PublicKeyToken=b77a5c561934e089]]' 如果您设置 AllowNew=true 并处理AddingNew 事件，请输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:00:39.340

`AddNew`当您`DataSource`是匿名类型对象的集合时，您不能调用。

所以你必须声明你的自定义类：

```
public class BindingItem
{
    public int id { get; set;}
    public string name { get; set; }
} 
```

并更改您的查询以返回该对象的集合而不是匿名对象：

```
var qry = (from p in db.firstlasts
           join i in db.firstnames on p.Idfname equals i.Idfname
           select new BindingItem 
           {
               id = p.idfl,
               name = i.fname
           }).ToList(); 
```

# facebook-fql - 使用 FQL 比较education_history

> ID：16003243
> 
> 赞同：0
> 
> 时间：2013-04-14T19:16:49.570
> 
> 标签：facebook-fql

我试图根据他们参加的大学/学校列出朋友。假设这个人在大学 XYZ

我正在尝试这个：

```
SELECT uid, name, education_history.name FROM user WHERE uid IN (SELECT uid2 from friend where uid1=me())  AND strpos(education_history.name,'XYZ') >0 
```

但遗憾的是，它没有返回任何数据。你能纠正我吗。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T05:04:55.260

如评论中所述，您无法查询`education_history`需要后处理数据的子字段。

# android - 谷歌地图 v2 无法加载片段

> ID：16003245
> 
> 赞同：0
> 
> 时间：2013-04-14T19:16:52.693
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在尝试使用 Google maps v2 运行应用程序，但 Logcat 显示错误：

致命异常：主要 java.lang.RuntimeException：无法启动活动 ComponentInfo{com.app.mapa/com.app.MapaLugares}：android.view.InflatException：java.lang.NullPointerException

这是代码：

activity_mapa_lugares.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

 <fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/>

 </LinearLayout> 
```

MapaLugares.java

```
package com.app.mapa;

import android.os.Bundle;
import android.app.Activity; 
import android.graphics.Point;
import android.view.Menu;
import android.widget.Toast;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.Projection;
import com.google.android.gms.maps.model.LatLng;

public class MapaLugares extends FragmentActivity {

private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_mapa_lugares);

 mMap = ((MapFragment) getFragmentManager().findFragmentById (R.id.mapa)).
     getMap();

 mMap.setOnMapClickListener(new OnMapClickListener() {

    @Override
    public void onMapClick(LatLng point) {
      Projection proj = mMap.getProjection();
      Point coord = proj.toScreenLocation(point);

              Toast.makeText(MapaLugares.this, "Click\n" + "Lat: " + 
              point.latitude + "\n" + "Lng: "+ point.longitude+ "\n" + "X: "    
              + coord.x + " - Y: "+ coord.y, Toast.LENGTH_SHORT)
              .show();
        }

    });

}   

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
  getMenuInflater().inflate(R.menu.mapa_lugares, menu);
  return true;
} 
```

}

怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:49:07.660

您正在将 XML 文件中的地图设置为以下类型`SupportMapFragment`：

```
android:name="com.google.android.gms.maps.SupportMapFragment" 
```

但是在您的 java 代码中，您试图获取另一个对象：

```
 mMap = ((MapFragment) getFragmentManager().findFragmentById (R.id.mapa)).
 getMap(); 
```

**2 这里的问题：**

**1.**您需要获取`SupportMapFragment`and not `MapFragment`，如下所示：

```
mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

**2.**你试图得到错误的 id：在 XML 中你给了地图：`android:id="@+id/map"

在您尝试获取的代码中：`(R.id.mapa)`这是错误的ID。

解决这些问题并告诉我们结果如何。

您还可以阅读我在 Google Map API V2 上写的这篇博文，以更好地了解如何构建使用 Google Map API V2 的应用程序：

[谷歌地图 API V2 指南](http://blog-emildesign.rhcloud.com/?p=435)

# grammar - 我将如何规范化以下 ANTLR 语法规则以消除左递归？

> ID：16003248
> 
> 赞同：0
> 
> 时间：2013-04-14T19:17:07.793
> 
> 标签：grammar, ebnf

我希望能够治疗：

```
int(int, int) 
```

作为函数类型。我如何规范这个（精简的）语法？

```
type : classOrInterfaceType | primitiveType | functionType;
functionType : type '(' (type (',' type)*)? ')';

classOrInterfaceType : ;
primitiveType : ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:08:18.173

有一种消除左递归的算法。[http://web.cs.wpi.edu/~kal/PLT/PLT4.1.2.html](http://web.cs.wpi.edu/~kal/PLT/PLT4.1.2.html)

# macos - 如何在 OS X 上使用用于 *nix 的“补丁”命令？

> ID：16003251
> 
> 赞同：1
> 
> 时间：2013-04-14T19:17:12.450
> 
> 标签：macos, patch

为了构建适用于 Mac OS X 的 Utah Raster Toolkit，我需要将补丁文件`urt-3.0.patch1`应用于源代码。说明说要使用：

```
patch -p -N <urt-3.0.patch1 
```

但这似乎不是 OS X 版本的正确语法`patch`；我得到错误：

```
patch: **** strip count -N is not a number 
```

为了完成指令的意图，正确的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:33:13.697

您需要在 -p 选项之后提供一个数字，或者按照 Ken 的建议，省略它。如果您想保留它，请尝试 -p0。在 OSX 命令行中使用`man patch`以获取这些选项的作用的描述。

# mysql - 选择和乘法

> ID：16003253
> 
> 赞同：1
> 
> 时间：2013-04-14T19:17:42.297
> 
> 标签：mysql

我是 MySQL 新手，正在努力学习。

我有两个表（我只显示我们应该使用的列）

```
Orderdetails (ordernumber, quantityOrdered, priceEach) 
```

和

```
Orders (ordernumber) 
```

我想将一个订单号的数量和价格相乘。然后我得到一行显示列 orderNumber 和 Total。

这是我尝试过的，但我无法弄清楚。我应该加入吗？

```
SELECT orderNumber, SUM((quantityOrdered * priceEach)) AS Total 
      GROUP BY orderNumber       <<=Here it says syntax error?
      FROM orderdetails 
```

加入我的订单和订单详情表怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:21:36.623

您应该能够使用：

```
SELECT `ordernumber`, (`quantityOrdered` * `priceEach`) AS `total` FROM `orderdetails`; 
```

这将返回一个名为的`total`列，该列具有两列的乘积以及`ordernumber`返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:30:06.283

根据您对@Michael Wright 的回答的评论，我认为您想要这个：

```
SELECT `ordernumber`, SUM((`quantityOrdered` * `priceEach`)) AS `total` 
    FROM `orderdetails`
    GROUP BY `ordernumber`; 
```

那应该给你订单号和所有数量的总和 * priceEach。

如果您想要一个特定的订单号，您可以尝试：

```
SELECT `ordernumber`, SUM((`quantityOrdered` * `priceEach`)) AS `total` 
    FROM `orderdetails`
    WHERE `ordernumber` = 'X'
    GROUP BY `ordernumber`; 
```

# mongodb - 更新 Mongodb 中的多嵌套数组

> ID：16003258
> 
> 赞同：16
> 
> 时间：2013-04-14T19:18:34.553
> 
> 标签：mongodb

我在 Mongodb 中有一个文档模式，如下所示：

```
{
    _id: 1
    tags: [{
        tag: 'foo'
        links: [{
            link: 'http:www.google.com'
            date: '123'
        }] 
    }]
} 
```

我正在尝试将链接推送到文档独有的“链接”数组中。

我的第一个查询...

```
db.userlinks.update (
    {_id: 1, tags: {$nin: [{tag:'foo'}]}}, 
    {$push: {'tags': {tag:'foo'}}}, 
    {upsert: true}
) 
```

给我这个（如果标签不存在，则创建它）

```
{ "_id" : 1, "tags" : [ { "tag" : "foo" } ] } 
```

然后我用这个查询跟进......

```
db.userlinks.update (
    {_id: 1, tags: {tag: 'foo', links: {$nin: [{link: 'http://www.google.com'}]}}}, 
    {$push: {tags: {tag: 'foo', links: {link: 'http://www.google.com', date: '123'}}}}, 
    {upsert: true}
) 
```

但我收到此错误：“无法将 $push/$pushAll 修饰符应用于非数组”

我很确定问题出在我的第二个查询的“更新”组件中，但我不确定如何解决它。任何帮助，将不胜感激。

# 编辑

我的第一个查询现在是......（感谢乔）

```
db.userlinks.update (
    {_id: 1, tags: {$nin: [{tag:'foo'}]}}, 
    {$push: {'tags': {tag:'foo', links:[]}}}, 
    {upsert: true}
) 
```

我的第二个查询现在是...

```
db.userlinks.update (
    {_id: 1, 'tags.tag': 'foo'}, 
    {$push: {'tags.$.links': {link: 'http://www.google.com', date: '123'} } }
) 
```

它成功地将链接推送到“链接”数组中，但它也允许重复。我不能允许重复的链接。$addToSet 可以工作，但是如果日期发生变化，它仍然会插入一个重复的链接。

有没有办法检查我的第二个查询的“查询”部分中是否存在链接，或者如果某些字段匹配，则仅 addToSet ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T18:52:34.720

我终于明白了......虽然如果有人能看到更好的方法来做到这一点，请将其添加为答案。

```
// create the userlinks collection if it doesn't exist
// also add a tag 'foo' into it, but only if the tag doesn't exist
db.userlinks.update (
    {_id: '1', 'tags.tag': {$nin: ['foo']}}, 
    {$push: {'tags': {tag:'foo', links:[]}}},
    {upsert: true}
)

// add a link into the 'foo' tag, but only if the link doesn't exist
db.userlinks.update(
    {_id: '1', 'tags.tag': 'foo', 'tags.links.link': {$nin: ['http://foobar.com']}},
    {$push: {'tags.$.links': {link: 'http://foobar.com', date: '15'} } }
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:28:10.870

也许将您的第一个查询更改为：

```
db.userlinks.update (
    {_id: 1, tags: {$nin: [{tag:'foo'}]}}, 
    {$push: {'tags': {tag:'foo', links:[]}}}, 
    {upsert: true}
) 
```

$push 操作应该只影响链接，而不是标签。

```
{$push: {'tags.links': {link: 'http://www.google.com', date: '123'} } }, 
```

# matplotlib - matplotlib 修改自动缩放规则

> ID：16003263
> 
> 赞同：1
> 
> 时间：2013-04-14T19:19:21.597
> 
> 标签：matplotlib

绘图时，matplotlib 自动设置正在绘制的数据内容的比例。但似乎两个轴上的限制总是等于要绘制的数据的最大值。它使达到最大值的数据标记被复制。我想更改此行为，以便无论标记大小如何，它都会在绘图的四个侧面留下一些空间。至少，有没有办法简单地设置一个静态的、用户定义的边距？

一个例子：

```
import matplotlib.pyplot as plt
import matplotlib as mpl
import numpy as np
fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(np.arange(10) ** 2, 's', ms = 20) 
```

这个例子清楚地显示了被裁剪的 3 个数据点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:22:50.830

（几乎直接从[如何在 matplotlib 中自动缩放 y 轴？](https://stackoverflow.com/questions/15375791/how-to-autoscale-y-axis-in-matplotlib/15376411#15376411)）

你想要`margins` [医生](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.margins)

前任

```
ax.margins(y=.1, x=.1) 
```

另请参阅[当图在图形边缘运行时添加边距](https://stackoverflow.com/questions/14493334/add-margin-when-plots-run-against-the-edge-of-the-graph/14498142#14498142)

# javascript - 功能的执行顺序不能正常工作

> ID：16003265
> 
> 赞同：0
> 
> 时间：2013-04-14T19:19:34.070
> 
> 标签：javascript, function

我有以下问题：函数的执行顺序不能正常工作。我想在另一个函数中检索一个函数（一个表）的返回值。看起来很简单，但对我来说变得很复杂，因为指令执行顺序没有正确完成，然后我无法获得第一个函数的返回值。

var tabImage = 新数组；

```
function remplissageDynamiqueImagesParId(idImag) {
    alert("1");

    var ajax = new XMLHttpRequest();

    ajax.open("GET", "http://localhost/jsonrecuperImagesParId.php?id=" + idImag, true);

    alert("2");

    ajax.send();

    alert("3");

    ajax.onreadystatechange = function () {
        alert("4");

        if (ajax.readyState == 4 && (ajax.status == 200 || ajax.status == 0)) {
            eval('var data = ' + ajax.responseText + ';');`enter code here`

            var theResults = data.results;

            alert("5");

            for (var i = 0; i < theResults.length; i++) {
                tabImage[i] = new imageFromBase(theResults[i].idImage, theResults[i].url);

            }

            alert("taille tableau:" + tabImage.length);

            return tabImage;
        }
    }
} //fin methode

function test() {
    alert("dans test");

    var tab = new Array();

    tab = remplissageDynamiqueImagesParId(10);

    alert("fin test");

    alert("taille tableau dans test: " + tab.length);
} 
```

运行后我得到这个：

*   丹斯测试
*   1
*   2
*   3
*   鳍测试
*   4
*   4
*   5
*   尾巴画面：5
*   4
*   5
*   尾巴画面：5

为什么是这个命令？
我怎样才能拿到桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:03:08.937

我找到了解决方案，只需将函数 open 的最后一个参数更改为 false （使其成为同步函数）并删除可能会使执行繁重的警报

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:30:55.280

原因是“Ajax”中的“A”代表异步。执行异步命令的函数不会等待命令完成。相反，当操作完成时，放置一个回调例程来触发（在这种情况下，它被放置到“onreadystatechanged”处理程序中，当某个“就绪状态”发生变化时调用该处理程序。

尤其是形式语句`a=function(params) { ... }`不调用函数，但它声明或定义函数。

我无法测试该功能，因为我的本地主机上没有相同的内容，但我可以建议一些必要的更改。

*   切换 和 的顺序`ajax.onreadystatechange = function () { ... }`如果`ajax.send();` 没有这个，发送命令也可以在它有任何机会执行`onreadystatechange`函数之前完成。

*   使用 ajax.onreadystatechange = function () { ... result.xxx = tabImage; 声明函数 remplissageDynamiqueImagesParId(idImag, result) { ... } }

*   打电话给`var result={}; tab = remplissageDynamiqueImagesParId(10, result);`

同样，由于这是异步的，因此在第一个调用函数返回后结果不会立即更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:08:34.690

我试试这个：

```
var tabImage=new Array;
function remplissageDynamiqueImagesParId(idImag,tabImage)
{

    var ajax = new XMLHttpRequest();   
    ajax.onreadystatechange=function(){
    alert("4");
     if(ajax.readyState==4 && (ajax.status==200||ajax.status==0)){
     eval('var data = ' + ajax.responseText + ';');  
     var theResults = data.results;
    alert("5");
     for(var i=0;i<theResults.length;i++)
     {
         tabImage[i]=new imageFromBase(theResults[i].idImage,theResults[i].url);

     }
     alert("taille tableau "+tabImage.length);
     return tabImage;

 }

}
    ajax.open("GET","http://localhost/jsonrecuperImagesParId.php?id="+idImag,true);
    ajax.send();
    alert("fin remplissageDynamiqueImagesParId");
}//fin methode
function test() 
{
    alert("dans test");
remplissageDynamiqueImagesParId(10,tabImage);
alert("fin test");
alert("taille tableau dans test: "+tabImage.length);    
} 
```

但不幸的是，我无法从第一次执行中获得我的表，它从第二次开始正常工作。但不幸的是，这并不能解决我的问题。有谁知道我如何阻止执行，直到 ajax.onreadystatechange 完成执行。谢谢您的帮助。

# python - 使用 XMLHtttpRequest 将照片上传到 Flask 网络服务器

> ID：16003266
> 
> 赞同：2
> 
> 时间：2013-04-14T19:19:38.177
> 
> 标签：python, ajax, http, flask, winjs

我正在创建一个 WinJS 应用程序并使用 XMLHttpRequest 将照片作为 blob 发送到 Flask 网络服务器。

```
openPicker.pickSingleFileAsync().then(function (file) {
        file.openAsync(Windows.Storage.FileAccessMode.read).done(function (stream) {
            var blob = MSApp.createBlobFromRandomAccessStream("application/octet-stream", stream);
            var fdata = new FormData();
            fdata.append("file", blob, "photo.jpg");

            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("POST", "http://127.0.0.1:5000/api/addPhoto", true);
            xmlhttp.setRequestHeader("Content-type", "multipart/form-data");
            xmlhttp.send(fdata);
        });
    }); 
```

这会产生以下 HTTP 请求：

```
POST http://127.0.0.1:5000/api/addPhoto HTTP/1.1
Accept: */*
Content-Type: application/octet-stream, multipart/form-data; boundary=---------------------------7dd2a320aa0ec0
Accept-Language: en-US,en;q=0.7,ja;q=0.3
UA-CPU: AMD64
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0; MSAppHost/1.0)
Host: 127.0.0.1:5000
Content-Length: 9471100
Connection: Keep-Alive
Pragma: no-cache

-----------------------------7dd2a320aa0ec0
Content-Disposition: form-data; name="file"; filename="photo.jpg"
Content-Type: application/octet-stream 
```

处理 Flask Web 服务器上的请求

```
UPLOAD_FOLDER = '/images'
@app.route('/api/addPhoto', methods=['POST'])
def addPhoto():
        if request.method == 'POST':
            f = request.files['file']
            if f and allowed_file(f.filename):
                    return "error" #add error response here
        else:
                    filename = secure_filename(f.filename)
                    f.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
                    f.close
                    return "ok" #add success response here 
```

我收到以下错误：

```
TypeError: 'ImmutableMultiDict' object is not callable 
```

我有几个问题找不到答案：

*   我是否以正确的格式发送数据？我是否正确地将数据附加到我的表单中？
*   我的 HTTP 内容类型是否正确？
*   我是否试图错误地从 HTTP 请求中提取文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:33:55.677

尝试替换它：

```
f = request.files('file') 
```

和：

```
f = request.files['file'] 
```

# php - 使用 .htaccess 从 URL 中删除 .php 扩展名？

> ID：16003269
> 
> 赞同：1
> 
> 时间：2013-04-14T19:20:32.900
> 
> 标签：php, .htaccess, friendly-url, clean-urls

是否可以使用**.htaccess**文件从我的所有 URL 中删除 .php 部分？

两个例子：

```
http://url.com/home.php
http://url.com/shops.php 
```

变得：

```
http://url.com/home/
http://url.com/shops/ 
```

所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:25:02.483

这应该有效：

```
RewriteEngine On
RewriteRule \/([^\/]+)\/$ $1.php 
```

它将为您提供以 url 的最后一段命名的文件：

[http://example.com/shops/shopname1/](http://example.com/shops/shopname1/) -> shopname1.php

[http://example.com/shops/](http://example.com/shops/) -> 商店.php

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T20:06:38.567

要将*/$var/*重写为*/$var.php*，然后将*/$var.php*重定向到*/$var/ ，只需在**.htaccess*文件中使用这些指令：

```
# once per htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9-_]+)/? /$1.php
RewriteRule ^([a-z0-9-_]+).php$ /$1/ [R] 
```

如果您还想将特定 URL */shops/shopName1/*重写为特定 URL */shopName1.php*，然后将*/shopName1.php*重定向到*/shops/shopName1/*，那么您应该使用下面的代码而不是上面的代码：

```
# once per htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9-_]+)/?$ /$1.php

RewriteCond %{REQUEST_URI} !^/shopName1.php$
RewriteRule ^([a-z0-9-_]+).php$ /$1/ [R]

RewriteRule ^shops/shopName1/?$ /shopName1.php
RewriteRule ^shopName1.php$ /shops/shopName1/ [R] 
```

*但是请记住/shops/shopName1/*上没有变量，如果需要，请尝试一下。

* * *

似乎有关于重定向的问题`DirectoryIndex home.php`。但我认为，这是您想要的代码，但在这一次，我们排除了任何重定向：

```
DirectoryIndex /home.php
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/shopName1/?$
RewriteCond %{REQUEST_URI} !^/shopName2/?$
RewriteCond %{REQUEST_URI} !^/shopName3/?$
RewriteCond %{REQUEST_URI} !^/shopName4/?$
RewriteCond %{REQUEST_URI} !^/shopName5/?$
RewriteRule ^([a-zA-Z0-9-_]+)/?$ /$1.php

RewriteRule ^shops/shopName1/?$ /shopName1.php
RewriteRule ^shops/shopName2/?$ /shopName2.php
RewriteRule ^shops/shopName3/?$ /shopName3.php
RewriteRule ^shops/shopName4/?$ /shopName4.php
RewriteRule ^shops/shopName5/?$ /shopName5.php 
```

只需使用您的逻辑添加更多条件和规则..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:24:27.733

我建议停止对页面使用常规的 .php 文件，而不是使用框架或请求路由器，但是如果你真的想这样做，那么为了实现这一点，`shops.php`你`shops`需要创建一个 .htaccess 文件并添加跟随它：

```
RewriteRule (.*) $1.php [L] 
```

这会将URL 栏上的所有内容重命名`something.php`为。`something`

`.htaccess`完整文件的示例是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:22:55.723

```
RewriteRule ^/(home|shops) /$1.php 
```

第二本手册

```
RewriteRule ^/shops/shopname1/ /whateveryouneed.php 
```

# c - 如何打印内部为零的数字？

> ID：16003271
> 
> 赞同：3
> 
> 时间：2013-04-14T19:20:50.783
> 
> 标签：c, division

我编写了一个程序来分隔给定数字的数字。当数字由非零组成时，它成功分离，但当里面有一个数字时，它不识别也不打印。我该怎么办？我要疯了！

```
#include <stdio.h>
#include <conio.h>

int quotient (int a, int b);
int remaindar (int a, int b);

int main(void) {

int a,b,number,temp=1,divisor=10000;

printf("Enter three integers: ");
scanf("%d %d %d",&a,&b,&number);

printf("a/b is %d , remainder is %d.\n",quotient(a,b),remaindar(a,b));

temp=number;

while (temp>=1){

        if(temp>=divisor){

            printf("%d  ", quotient(temp,divisor)); 
            temp=remaindar(temp,divisor);
            divisor=divisor/10;
        }

        else divisor=divisor/10;

}

getch();    

return 0;   
}

int quotient (int a, int b){

return a/b; 

}

int remaindar (int a, int b){

return a%b;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:51:22.353

根据您的信息：第三个数字与商和余数无关。您可以简单地将数字的数字从左到右分开，如下所示：（PS。我假设给定 6900，您希望看到 6,9,0,0）

```
 #include <iostream>
 void getDigits(int number)
{
    int div = 1;
    //find max divisor, i.e., given 6900, divisor 1000
    //this gives information about how may digits the number has
    while (number / div >= 10) {
      div *= 10;
    } 

    //extract digits from left to right
    while (div != 0) //^^pay attention to this condition, not number !=0
    {
        int currDigit = number /div;
        number %= div;  
           //^^you can change the above two lines to 
          //your quotient and remainder function calls
        div /=10;
        std::cout << currDigit << " "; 
    }
}

int main(){
    int number = 6900;
    std::cout << "test case 1 " <<std::endl;
    getDigits(number);
    int number1 = 5067;
    std::cout << "\ntest case 2 " <<std::endl;
    getDigits(number1);
    int number2 = 12345;
    std::cout << "\ntest case 3 " <<std::endl;
    std::getDigits(number2);
    return 0;
} 
```

不要使用`getch()`，已弃用。使用上面的代码，您可以看到以下输出：

```
test case 1
6 9 0 0
test case 2
5 0 6 7
test case 3
1 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:54:06.953

发生这种情况是因为您没有考虑 temp 小于数字和除数的情况，即数字是 0。例如，如果初始数字是`302`，除数是`10`并且 temp 是`2`，打印出 a `0`：

```
while (divisor > 0){
        if(temp>=divisor){
            printf("%d  ", quotient(temp,divisor));
            temp=remaindar(temp, divisor);
        } else if (temp < number) {
            printf("0 ");
        }
        divisor=divisor/10;
} 
```

# plugins - notepad++ 自动关闭引号如果是下一个字符，则不输入引号

> ID：16003272
> 
> 赞同：0
> 
> 时间：2013-04-14T19:20:54.390
> 
> 标签：plugins, notepad++, quote, auto-close

我正在使用 notepad++ 并安装了一些插件，其中一个会自动关闭引号 (', ") 以及括号 ((, {)。我一直在[codecademy.com](http://codecademy.com)上扩展我的编程知识并注意到如果您输入引号或括号，它会自动为您关闭它，但如果引号是编辑器中的下一个字符，并且您输入引号，它实际上不会输入另一个引号。它只会移动到报价的另一端。有没有记事本++插件呢？

# actionscript-3 - Copter Style Dodge Game AS3 的错误代码 #1009

> ID：16003276
> 
> 赞同：0
> 
> 时间：2013-04-14T19:21:10.517
> 
> 标签：actionscript-3

您能否查看我的代码并告诉我为什么会收到此错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Arm/update()

我**没有**像我刚刚学到的那样使用文档类，也无法让它们工作。这是我开始的教程：[http ://eyes-squared.co.uk/blog/making-a-copter-style-game-the-projects/](http://eyes-squared.co.uk/blog/making-a-copter-style-game-the-projects/)

主要代码：

```
stop();

import flash.events.Event;
import flash.events.MouseEvent;

var mouseIsDown = false; // mouse isn't held at start
var speed = 0; // no speed at the start
var score = 0; // start with no score!

// check for collisions every frame
addEventListener(Event.ENTER_FRAME, mainLoop);
// add 2 event listeners for the mouse button
stage.addEventListener(MouseEvent.MOUSE_DOWN, clicked);
stage.addEventListener(MouseEvent.MOUSE_UP, unclicked);

// explain the mouse functions
function clicked(m:MouseEvent) {
    mouseIsDown = true;
}

function unclicked(m:MouseEvent) {
    mouseIsDown = false;
}

//// explain the main game loop
function mainLoop(e:Event) {
    // update the score!
    score = score + 10;
    // update the text field
    Output.text = "Score: "+score;
    // move the player based on the mouse button
    if (mouseIsDown) {
        // take something off the speed
        speed -= 2; // accelerate upwards
    } else {
        speed += 2;
    }
    // limit the speed
    if (speed > 10) speed = 10;
    if (speed < -10) speed = -10;
    // move the player based on the speed
    firefly.y += speed;
    // loop through everything on screen
    for (var i = 0; i<numChildren; i++) {
        // check to see if this object is a block
        if (getChildAt(i) is Block || getChildAt(i) is Boundary || getChildAt(i) is Block2 || getChildAt(i) is Arm) {
            var b = getChildAt(i) as MovieClip;
            // this means the object is a block
            // check the block against the player object
            if (b.hitTestObject(firefly)) {
                // make an explosion
                for (var counter = 0; counter<12; counter++) {
                    // make a new Boom object
                    var boom = new Boom();
                    boom.x = firefly.x;
                    boom.y = firefly.y;
                    // randomly rotate boom
                    boom.rotation = Math.random()*360;
                    // randomly scale it
                    boom.scaleX = boom.scaleY = 0.5+Math.random();
                    // add the boom to the world
                    addChild(boom);
                }
                // hide the player
                firefly.visible = false;
                removeEventListener(Event.ENTER_FRAME, mainLoop);

                if(b.hitTestObject(firefly)){
                    nextFrame();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:24:04.780

作为提示，您的错误是指在`update()`名为 Arm 的类/MovieClip 中调用的函数，该函数未包含在您的初始帖子中。

假设您在类中没有任何代码，并且所有内容都在 FLA 中，请在 Flash IDE 的“库”面板中查找名为 Arm 的对象，打开它，然后在框架脚本中查找`update()`功能。

具体错误意味着您正在尝试对尚未创建或不存在的对象执行操作（或检查其属性）。例如，如果您删除或重新标记了该 Arm 符号内的命名对象，然后在更新函数中引用该对象，它将遇到空对象错误。

如果您查看代码并且仍然难以确定哪个对象为空，请尝试在更新函数的每一行之间放置以下跟踪语句：

```
trace(1);
...
trace(2);
... 
```

因为这是一个运行时错误，所以 Flash 将在每一行跟踪给定的数字，直到遇到该错误，并丢弃线程。观察输出面板，查看跟踪了哪些数字，您将知道故障线路直接位于跟踪的最高数字之后。然后你可以想一想为什么那条线上的东西可能是空的。祝你好运！

# events - GWT 的 BrowserEvent 和 NativeEvent 到底是什么？

> ID：16003277
> 
> 赞同：8
> 
> 时间：2013-04-14T19:21:21.157
> 
> 标签：events, gwt

浏览器事件到底是什么？例如，如果我有一个自定义小部件，其中包含一个覆盖 onBrowserEvent 的按钮。并且 onBrowserEvent 方法仅在您单击按钮时被调用。我认为这个事件是为所有事件调用的，例如 onMouseOver、onMouseOut、KeyPressed 等......

此外，当您添加 DomHandler 以使小部件侦听默认情况下不支持的事件时。在文档中它说“向小部件添加本机事件处理程序并接收相应的本机事件”在这种情况下，本机事件是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-14T21:48:11.360

GWT 有一个*沉没*事件的概念。所有*沉没*的事件，但只有那些，被传递给[`EventListener`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/EventListener.html)a `onBrowserEvent`。

在最低级别，您将 an 附加`EventListener`到`Element`using[`DOM.setEventListener`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/DOM.html#setEventListener%28com.google.gwt.user.client.Element,%20com.google.gwt.user.client.EventListener%29)和*sink*事件[`DOM.sinkEvents`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/DOM.html#sinkEvents%28com.google.gwt.user.client.Element,%20int%29)（或最近[`DOM.setBitlessEvents`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/DOM.html#sinkBitlessEvent%28com.google.gwt.user.client.Element,%20java.lang.String%29)）。为了避免内存泄漏（特别是——如果不仅是——在旧的 IE 中），你必须确保在页面卸载之前设置一个`Element`'s 。`EventListener``null`

A`Widget`是 an`EventListener`并为您处理其中一些事情：它自动调用`DOM.setEventListener`它的`onAttach`and `onDetach`，并跟踪*沉没*的事件：它`sinkEvents`是附加的，使其更易于使用，因此有一个`unsinkEvents`对应物。

后来，在 GWT 1.6 中，添加了事件处理程序，并且`addDomHandler`（最近`addBitlessDomHandler`）使用适当的值自动调用 `sinkEvents`（取自`DomEvent.Type`作为参数传递的）；为了完成所有这些工作，`onBrowserEvent`in 小部件的默认行为是将事件分派给已注册的处理程序。

这些*无位*变体的原因是事件最初被称为`int`位域中的常量，但是浏览器有越来越多的事件，因此 GWT 开始耗尽位。无*位*变体仅可用于*不*`onDetach`泄漏的浏览器，因为与基于位的事件相反，小部件不会跟踪已注册的事件以从其注销它们。

从 GWT 1.6 开始的所有这些新`DomEvent`s（及其处理程序）都是围绕 a 的包装器`NativeEvent`。s有两种`GwtEvent`：原生的 ( `DomEvent`s)，由浏览器分派，*逻辑*的由 GWT 自己分派，不映射到 DOM 级别的事件。`addDomHandler`只关心`DomEvent`s，也就是*原生事件*。

总结：当您退出刚刚修改的文本字段时，浏览器会调度一个`change`事件。如果`TextBox`小部件已经*接收*到该事件，`onBrowserEvent`则将使用代表该事件的`Event`（只是 的遗留子类）调用它。`NativeEvent`then的默认实现`onBrowserEvent`创建 a`ChangeEvent`并将其分派给已注册`ChangeHandler`的 s。

# html - 位置固定背景高度 100%

> ID：16003279
> 
> 赞同：0
> 
> 时间：2013-04-14T19:21:37.763
> 
> 标签：html, css

我的页面都需要背景。我该如何解决。问题是如果我的内容增长，不使用`position: fixed`背景将不可见。

```
<body>
   <div id="Bgr"></div>
   ...
</body>

#Bgr
{
  position: fixed;
  height: 100%;
  background: url('../images/content-background.png') repeat-y 0, 0;
} 
```

***更新：我在正文和我的 html 中已经有了不同的背景，正文是 100% 的高度***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:28:23.553

确保正文 CSS 是窗口大小。常见的俯瞰。

添加

```
body {
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:54:25.100

我喜欢用`absolute`这种东西：

```
#Bgr
{
    position: absolute;
    background: url('../images/content-background.png') repeat-y 0, 0;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T05:48:15.590

自 IE10 等以来，我可以将两个图像都放入正文中。这也解决了我的问题。

# jquery - 为 css 方法创建一个值

> ID：16003284
> 
> 赞同：0
> 
> 时间：2013-04-14T19:21:51.950
> 
> 标签：jquery

这行不通。我不明白为什么这行不通。$tops 变成组合然后该值用于给 css 最高值

```
var $popout = $('.popOut'),
      $currentButton,
      $win = $(window),
      $trigger = $('#leaderBottom a'),
      $closeOut = $('.xOut');

$('#leaderBottom a').on("click", function(event) {
      event.preventDefault();
        $popout.css('display','block');
        $('<div class="overlay"></div>').appendTo('#leaderBottom');

          // find the position of the link according to window
           var $tops = $(this).offset();

          // combined  that nuM plus 50
           var combin = $tops + 50;

            ///adds it all up. and it sends it to combined
           $popout.css("top",combin);

           console.log(combin);

  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:24:18.307

jQuery [offset()](http://api.jquery.com/offset/)返回一个包含坐标的对象。所以你想做：

```
var combin = $tops.top + 50; 
```

# c# - Unity C# 相机缩放脚本

> ID：16003295
> 
> 赞同：0
> 
> 时间：2013-04-14T19:23:06.570
> 
> 标签：c#, unity3d

所以在我解释我的问题之前。我将首先讲述我真正在做什么。我正在点击移动/缩放相机脚本。我的主摄像头前面有 3 架飞机。现在我正在做的是，创建一个脚本，上面写着“相机将在被点击的平面上放大。我多次尝试想出一个工作脚本，但效果不佳。每次我遇到新的错误，错误等等。：|我很沮丧并删除了错误的脚本。现在我想从头开始。我正在用C#做

由于我不是专业人士，任何人都可以详细解释我以完成它吗？我很困惑如何处理我放置的飞机。我想知道我的脚本中缺少什么。这是我如何放置这些飞机的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/WxHoC.png)

编辑。- 我设法处理它。现在我需要建议，如何瞄准我放置在镜头前的飞机。

```
using UnityEngine;
using System.Collections;

public class CameraZoom : MonoBehaviour
{
    public int zoomLevelSelected = 0;
    public float[] ZoomLevels = new float[] { 60, 40, 20 };
    void Update()
    {
        int zoomChange = 0;
        if (Input.GetMouseButtonDown(0)) { zoomChange = +1; } // back
        else if (Input.GetMouseButtonDown(1)) { zoomChange = -1; } // forward
        if (zoomChange != 0)
        {
            zoomLevelSelected = Mathf.Clamp(zoomLevelSelected + zoomChange, 0, ZoomLevels.Length - 1);
            camera.fieldOfView = ZoomLevels[zoomLevelSelected];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:12:23.403

见鬼，这是创建点击缩放的一种方法。要点是您通过鼠标光标创建从相机到场景的光线。当该射线与对象相交时，会从交点沿相交面的法线向外返回第二条射线。

```
void Update () {
    if(Input.GetMouseButtonDown(0)){
        // get ray from camera in to scene at the mouse position
        Ray ray = Camera.mainCamera.ScreenPointToRay(Input.mousePosition);
        RaycastHit hit;

        // hardcoded "zoom" distance.
        float zoomDist = 15.0f;

        // Raycast from camera to mouse cursor, if object hit, zoom.
        if (Physics.Raycast(ray,out hit,Mathf.Infinity)){       
            // Create a second ray from the hit object back out, zoom the camera along this ray.
            Ray r = new Ray(hit.point,hit.normal);
            Camera.mainCamera.transform.position = r.GetPoint(zoomDist);
        }
    }
} 
```

要记住的事情：

1.  [所写的Physics.Raycast](http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html)将为任何带有碰撞器的游戏对象返回 true。如果您只想在选择特定游戏对象时进行缩放，请使用[图层。](http://docs.unity3d.com/Documentation/Components/Layers.html)
2.  相机不会直接以您单击的游戏对象为中心。我使用确切的交点来创建相机将缩放到的位置。
3.  zoomDist 是距离对象的距离。
4.  此代码仅适用于透视相机，如果您使用正交，则需要修改`size`相机的值以进行缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T17:51:13.500

您的脚本的问题是您的 var int zoomChange 每帧都设置为零，因此将该变量移至类级别。

```
using UnityEngine;
using System.Collections;

public class CameraZoom : MonoBehaviour
{
    public int zoomLevelSelected = 0;
    public float[] ZoomLevels = new float[] { 60, 40, 20 };
    int zoomChange = 0;  //<<<<<<<<<<<<<

    void Update()
    {
        if (Input.GetMouseButtonDown(0)) { zoomChange = +1; } // back
        else if (Input.GetMouseButtonDown(1)) { zoomChange = -1; } // forward
        if (zoomChange != 0)
        {
            zoomLevelSelected = Mathf.Clamp(zoomLevelSelected + zoomChange, 0, ZoomLevels.Length - 1);
            camera.fieldOfView = ZoomLevels[zoomLevelSelected];
        }
    }
} 
```

# vb.net - 导致批处理文件在继续之前完成其操作？

> ID：16003296
> 
> 赞同：1
> 
> 时间：2013-04-14T19:23:19.333
> 
> 标签：vb.net, visual-studio-2010

以下代码将从 SourceDirectory 中提取今天修改的文件并将它们放入 FilesExtracted 文件夹，然后批处理文件将删除 sourceDirectory 中的其余文件。但是在这一切完成之后，将从 OriginalTestFiles 文件夹中复制一组全新的文件并放入 sourceDirectory，但它不会这样做。有没有人认为这可能是因为批处理文件没有停止其操作并且仍在删除 sourceDirectory 中的文件，或者还有其他问题。谢谢你们！

```
Imports System.IO

Public Class frmExtractionator

'  Dim txtFiles1 As Control
Dim sourceDirectory As String = "F:\CopierFolderforTestDriveCapstone"
Dim archiveDirectory As String = "F:\FilesExtracted"
Dim originalDirectory As String = "F:\OriginalTestFiles"

Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

    Try

        Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

        If (Not System.IO.Directory.Exists(archiveDirectory)) Then
            System.IO.Directory.CreateDirectory(archiveDirectory)
        End If

        For Each currentFileLoc As String In txtFiles

            Dim fileName = currentFileLoc.Substring(sourceDirectory.Length + 1)

            If (IO.File.GetLastWriteTime(currentFileLoc).ToString("MM/dd/yyyy") = DateTime.Now.ToString("MM/dd/yyyy")) Then
                MessageBox.Show(currentFileLoc & " moved", "Moved Succesfully")
                File.Move(currentFileLoc, Path.Combine(archiveDirectory, fileName))

            End If

        Next
    Catch eT As Exception
        Console.WriteLine(eT.Message)
    End Try

    System.Diagnostics.Process.Start("F:\poop.bat")

    Try
        Dim txtFiles2 = Directory.EnumerateFiles(originalDirectory)

        For Each currentFileLoc2 As String In txtFiles2

            Dim fileName = currentFileLoc2.Substring(originalDirectory.Length + 1)

            File.Move(currentFileLoc2, Path.Combine(sourceDirectory, fileName))

        Next
    Catch eT As Exception
        Console.WriteLine(eT.Message)
    End Try
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:31:07.210

[一旦启动它并等待它退出，](http://msdn.microsoft.com/en-gb/library/fb4aw7b8.aspx)您就可以将其`process`作为变量获取：

```
Dim theProcess As Process = Process.Start("F:\poop.bat")
theProcess.WaitForExit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:31:23.563

尝试监视完成过程...

```
'Start the process.
Dim Proc = Process.Start("F:\poop.bat")
'Wait for the window to finish loading.
Proc.WaitForInputIdle()
'Wait for the process to end.
Proc.WaitForExit()

... 
```

# c# - Windows Phone RSS Windows-1250 编码

> ID：16003297
> 
> 赞同：1
> 
> 时间：2013-04-14T19:23:20.460
> 
> 标签：c#, windows, windows-phone-7, encoding

我正在研究从 rss 读取数据的 windows phone 项目。此 RSS 在 windows-1250 中编码，当在应用程序中显示时，我得到 ??? 字符而不是š，č等...我一直在寻找解决方案...没有运气...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:17:40.497

如果您使用 a`WebClient`下载 RSS，那么您可以指定下载数据时使用的编码。在您的情况下，您可以指定`UTF8`.

```
WebClient client = new Webclient();
client.Encoding = Encoding.UTF8; 
```

# mysql - 基于未定义字段数的 CodeIgniter 搜索数据库？

> ID：16003300
> 
> 赞同：0
> 
> 时间：2013-04-14T19:23:40.990
> 
> 标签：mysql, database, codeigniter, search

长时间的搜索者在这里第一次提问。

我正在使用 codeigniter 创建一个系统，用户可以在其中使用表单中的一系列字段来搜索结果。这些字段都不是必需的，但可用于压缩结果。我让它在下面的直接 php 中工作，但经过一些认真的搜索后，我无法理解如何让该功能在 CodeIgniter 中工作。我也是这个软件的新手。任何建议将不胜感激。

索引.php

```
<form action="site/searchcharacter.php" method="post" class="form" id="searchForm">
        <legend>Search AnimeDB</legend>
        <select name="gender"><option>None</option><option>Male</option><option>Female</option></select>
        <select name="approx_age"><option>None</option><option>Baby</option><option>Todler</option><option>Child</option><option>Teen</option><option>Adult</option><option>Senior</option></select>
        <input type="text" name="hair_colour" class="input-small" placeholder="Hair Colour">
        <select name="hair_length"><option>None</option><option>Hair Above Ears</option><option>Hair Below Ears</option><option>Hair Below Shoulders</option><option>Hair Below Waist</option></select>
        <input type="text" name="eye_colour" class="ut-small" placeholder="Eye Colour">
        <select name="ear_type"><option>None</option><option>Human Ears</option><option>Cat Ears</option><option>Dog Ears</option><option>Horns</option><option>Other</option></select>
        <input type="text" name="weapons" class="input-small" placeholder="Weapons">
        <div class="form-actions">
            <button class="btn btn-primary" id="submit_button" type="submit">Search</button>
        </div>
      </form> 
```

搜索字符.php

```
$query = "SELECT * FROM characters WHERE 1=1";

    if ($gender != "None") {
        if (!empty($gender)) {
            $query = $query . " AND gender='$gender'";
        }
    }

    if ($age != "None") {
        if(!empty($age)) {
            $query = $query . " AND approx_age='$age'";
        }
    }

    if(!empty($hairColour)) {
        $query = $query . " AND hair_colour='$hairColour'";
    }

    if ($hairLength != "None") {
        if(!empty($hairLength)) {
            $query = $query . " AND hair_length='$hairLength'";
        }
    }

    if(!empty($eyeColour)) {
        $query = $query . " AND eye_colour='$eyeColour'";
    }

    if ($earType != "None") {
        if(!empty($earType)) {
            $query = $query . " AND ear_type='$earType'";
        }
    }

    if(!empty($weapons)) {
        $query = $query . " AND weapons='$weapons'";
    }

    //Prepare and Exec
    $STH = $DBH->query($query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:59:03.300

我将从 Active Records 开始 -

```
if ($gender != "None" && !empty($gender))
{
  $this->db->where('gender', $gender);
} 
```

然后，您可以对其他检查重复此操作，因为多个 where 被添加为链式 AND。

然后你打电话`$query_result = $this->db->get('characters');`

# java - 类未找到异常 com.mysql.jdbc.driver

> ID：16003302
> 
> 赞同：1
> 
> 时间：2013-04-14T19:23:46.573
> 
> 标签：java, mysql, exception, servlets, jdbc

我的项目的文件结构是：

```
 -src
            |
           -pkg
            |
             -CoreServlet.java(servlet)
             -Main.java
             -Core.java(jdbc code is here) 
```

core.java 类：

```
package com.pkg;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

public class core{
    private Connection connect = null;
    private Statement statement =null;
    private PreparedStatement preparedStatement = null;
    private ResultSet resultSet = null;
    String qwerty;

    public void readDataBase() {
        String userName = "ansh";
        String password = "12345";
        try {
            Class.forName("com.mysql.jdbc.Driver");
            connect = DriverManager.getConnection("jdbc:mysql://localhost/glbitm", userName,password);
            statement = connect.createStatement();
            resultSet = statement.executeQuery("select * from teachers");
            resultSet.next();      
            qwerty = resultSet.getString(1);

           } catch (Exception e) {
            System.out.println(e);
        }
    }

} 
```

coreServlet.java 类：

```
 package com.pkg;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class coreServlet extends HttpServlet{ 
  /**
     * 
     */
    private static final long serialVersionUID = 1L;

public void doGet(HttpServletRequest request, 
  HttpServletResponse response)
  throws ServletException,IOException{
        core dao = new core();
        dao.readDataBase();
  response.setContentType("text/html");
  PrintWriter pw = response.getWriter();
  pw.println("<html>");
  pw.println("<head><title>Hello World</title></head>");
  pw.println("<div>"+dao.qwerty+"</div>");
  pw.println("<body>");
  pw.println("<h1>Hello World</h1>");
  pw.println("</body></html>");
  }
} 
```

当我在我的 tomcat 服务器中访问`dao.qwerty`时`coreServlet.java`。我得到`class not found exception com.mysql.jdbc.driver`并且值`dao.qwerty`被打印为空。我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:28:38.467

您需要在类路径中添加 mysql 连接器。

[http://mirrors.ibiblio.org/pub/mirrors/maven2/mysql/mysql-connector-java/5.1.4/mysql-connector-java-5.1.4.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/mysql/mysql-connector-java/5.1.4/mysql-connector-java-5.1.4.jar)

此连接器 jar 充当数据库和数据流应用程序之间的中介。您可以从 jar 中提取类文件并查看详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T19:28:45.320

当您的代码尝试执行以下行 Class.forName("com.mysql.jdbc.Driver").newInstance(); 时抛出 java.lang.ClassNotFoundException

这是一个经过检查的异常，总是需要在 try/catch 中捕获，或者如果 try/catch 没有实现，则需要在方法中声明此异常。

该线程中提供了多种解决方案，但根据我的经验，如果您能够使用数据源资源管理器从 eclipse 连接到数据库，那么最可能的原因是“mysql-connector-java-5.1.28-bin.jar”不会复制到您的tomcat的lib目录中。

java的mysql连接器可以从[http://dev.mysql.com/downloads/connector/j/下载](http://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T18:13:45.273

你还没有`mysql-connector`在你的路径中设置。首先设置它，其他一切都会完成

> 是什么`JConnector`？

Java 不知道 SQL，因此您要使用 sql 驱动程序执行的每条语句都将转换为 sql 结构，并且 my mysql 返回的结果也将转换为 java 可理解的结构。

希望能帮助到你

# php - 尝试在 MySql 中的列之间传输数据

> ID：16003316
> 
> 赞同：-2
> 
> 时间：2013-04-14T19:24:58.597
> 
> 标签：php, mysql, database

我有一个带有表'testimport'的数据库。该表包含 - 日期时间格式的列 (DateOccurred) 并包含 0000-00-00 00:00:00 - 包含 varchar(255) utf8_general_ci 格式的 20/03/2013 14:17 的列 (Comments)。

我正在尝试将“评论”的内容转移到“日期发生”，它应该存储为日期/时间，但仅限于 ID 为 2 的行。

我尝试了这个（以及各种变体），但没有运气。

```
UPDATE testimport SET DateOccurred = DATE_FORMAT(STR_TO_DATE(Comments, '%d/%m/%Y %h:%m:%s'), '%Y-%m-%d %h:%m:%s') WHERE ID=2 
```

这会导致“DateOccurred”列更改为“Null”内容。

谁能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:27:43.510

改变

```
STR_TO_DATE(Comments, '%d/%m/%Y %h:%m:%s') 
```

至

```
STR_TO_DATE(Comments, '%d/%m/%Y %H:%i') 
```

因为您没有标记秒数。此外，分钟使用`%i`和小时需要`%H`。

在此处查看完整列表：[MySQL Docs](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

您的完整查询可以缩短/修改为

```
UPDATE testimport 
SET DateOccurred = STR_TO_DATE(Comments, '%d/%m/%Y %H:%i')
WHERE ID = 2 
```

# javascript - 将带有段落标签的子字符串包装在内容可编辑 div 中的字符串中

> ID：16003321
> 
> 赞同：0
> 
> 时间：2013-04-14T19:25:30.610
> 
> 标签：javascript, replace

继承人的html-：

```
<div contenteditable="true">I am a good person</div> 
```

现在我如何包装以段落标记开头的子字符串`index 7 to index 17`，以便结果如下所示 - ：`<div contenteditable="true">I am a <p>good person</p> </div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:35:47.793

像这样的东西：

```
function wrapSubstring(sourceString, subString, tag) {
    return sourceString.replace(new RegExp("(" + subString + ")", "g"), "<" + tag" + ">$1</" + tag + ">");
} 
```

以上将替换 sourceString 中 subString 的所有实例。

***重要*** 如果 subString 可以包含任意文本，则需要引用 subString。请参阅：[如何在 javascript 中转义正则表达式？](https://stackoverflow.com/questions/2593637/how-to-escape-regular-expression-in-javascript)

还有一个不太通用的实现：

```
// Wrap a subString of sourceString with the given tag
// starting at startIndex(inclusive) and going to endIndex(exclusive)
function wrapSubstring(sourceString, tag, startIndex, endIndex) {
    return sourceString.substring(0, startIndex)
        + "<" + tag + ">"
        + sourceString.substring(startIndex, endIndex)
        + "</" + tag + ">"
        + (endIndex ? sourceString.substring(endIndex) : "");
} 
```

这是使用 jquery 的示例调用：

```
var $element = $('#someId');
$element.html(wrapSubstring($element.html(), 'p', 7, 17); 
```

# php - php/mysql 更新其中 id = blah

> ID：16003323
> 
> 赞同：1
> 
> 时间：2013-04-14T19:25:56.067
> 
> 标签：php, html, mysql

我有一个站点，您可以在其中通过 php 向 mysql 服务器发送问候消息，以及一个管理员登录页面。在管理员登录页面中，它会显示所有状态为待处理、已拒绝或已接受的消息，并在每条消息旁边使用“拒绝”和“接受”按钮。目前，每当我点击“接受”或“拒绝”时，所有消息都会在数据库中被拒绝或接受。我想让按钮使用参数调用脚本，该参数是它们接受/拒绝的消息的 id，但老实说，我不知道正确的语法。任何帮助将不胜感激。

```
$query = "SELECT name, location, message, status FROM messages ORDER by status ";
if ($query_run = mysql_query($query)) 
{
    while ($query_row = mysql_fetch_assoc($query_run)) 
    {
        $name = $query_row['name'];
        $location = $query_row['location'];
        $message = $query_row['message'];
        $status = $query_row['status'];    

        echo '<form method="POST" action="login.php">';
        echo 'From: '.$name.'<br>Location: '.$location.'<br>Status: '.$status.'<br>Message: '.$message.'<br><br>';
?>

<input type="submit" value="Approve" name="accept">
<input type="submit" value="Reject" name="reject"></form>

<?php

if (isset($_POST['accept'])) 
{
    echo 'Accepted!';
    $updateAccept = "UPDATE messages SET status = 'a'"; 
    mysql_query($updateAccept);   
};

if (isset($_POST['reject'])) 
{
    echo 'Rejected!';
    $updateAccept = "UPDATE messages SET status = 'r'"; 
    mysql_query($updateAccept);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:28:26.357

像这样为每个提交按钮绑定一个隐藏字段

```
<form method="POST">
    <input type="submit" value="Whatever" name="trigger_update" />
    <input type="hidden" name="id_to_be_updated" value="<?php echo 'pass your id here'; ?>" />
</form>

<?php
   if(isset($_POST['trigger_update'])) {
      //Do sanitization according to your needs
      mysqli_query($connection, "UPDATE tbl_name SET column_name = 'whatever' WHERE id = {$_POST['id_to_be_updated']}");
   }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:28:47.117

您只需要`WHERE`在 UPDATE 语句中添加一个子句：

```
 $updateAccept = "UPDATE messages SET status = 'a' WHERE id = '$id'"; 
```

# mysql - Mysql2::Error: 用户'test'@'localhost'拒绝访问数据库'depot_test'

> ID：16003338
> 
> 赞同：13
> 
> 时间：2013-04-14T19:27:25.300
> 
> 标签：mysql, ruby-on-rails

我在这里有点难过。我创建了一个数据库，使用 depot_production 数据库没有问题。但是，最近每当我运行 rake 测试时，我都会收到一堆错误，例如

```
# Running tests:

EEEEEEEE

Finished tests in 0.031499s, 253.9763 tests/s, 0.0000 assertions/s.

1) Error:
test_should_create_product(ProductsControllerTest):
Mysql2::Error: Access denied for user 'test'@'localhost' to database 'depot_test' 
```

奇怪的是我认为我的 database.yml 文件很好。每次我运行 db:migrate 时，我都会得到一个空行返回给我。我还添加了一个用户测试，但我认为这只将它添加到我的开发数据库中。我有点认为我的测试、生产和数据库不存在......

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: depot_development
pool: 5
username: root
password: admin
socket: /tmp/mysql.sock

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
adapter: mysql2
encoding: utf8
reconnect: false
database: depot_test
pool: 5
username: test
password: testy
socket: /tmp/mysql.sock

production:
adapter: mysql2
encoding: utf8
reconnect: false
database: depot_production
pool: 5
username: prod
password: mypassword
socket: /tmp/mysql.sock 
```

任何建议将不胜感激，谢谢。

谢谢你在这里和我在一起。我觉得我很接近，但有些奇怪。这就是我所做的。

```
 mysql> use depot_test;
ERROR 1049 (42000): Unknown database 'depot_test'
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| depot_development  |
| development        |
| mysql              |
| performance_schema |
| test               |
+--------------------+
6 rows in set (0.01 sec)

mysql> use depot_test
ERROR 1049 (42000): Unknown database 'depot_test'
mysql> use test
Database changed
mysql> GRANT SELECT, INSERT, DELETE ON `test` TO test@'localhost' IDENTIFIED BY 'testy';
ERROR 1146 (42S02): Table 'test.test' doesn't exist
mysql> GRANT SELECT, INSERT, DELETE ON `depot_test` TO test@'localhost' IDENTIFIED BY       'testy';
ERROR 1146 (42S02): Table 'test.depot_test' doesn't exist 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-14T19:34:08.590

**因此，首先以root**身份登录或从终端调用您的 root 用户。

```
mysql -u root -p

CREATE DATABASE depot_test

CREATE USER 'test'@'localhost' IDENTIFIED BY 'mypass123';

USE depot_test 
```

登录 mysql 后，授予用户权限`test`（记得更改密码）

```
GRANT ALL privileges on depot_test.* to test@localhost identified by 'mypass123';

FLUSH PRIVILEGES; 
```

您需要在 database.yml 中将您的通行证更改为“mypass123”

# supercollider - 如何将控制率变量下采样为标量值？

> ID：16003339
> 
> 赞同：1
> 
> 时间：2013-04-14T19:27:27.913
> 
> 标签：supercollider

在 SuperCollider 中：如何将控制率变量下采样为标量值？

例如，我有一个名为 ~delay 的标量全局变量，一些函数关心该值。他们假设它是一个标量。我想在该变量上设置一个包络生成器，以便通过控制速率变量对其进行更改。或者使用 MouseX.kr，如果我可以将 MouseX.kr 的单个值转换为标量值，我会很高兴。

假设我无法重构代码以允许全局 k 速率，因此我需要从控制速率变量中采样或下采样单个值。

我不能这样做：

```
 MouseX.kr(1, 4, 1).rand.wait; 
```

但我会很高兴：

```
 downSample(MouseX.kr(1, 4, 1)).rand.wait; 
```

或者

```
 ~mousex = MouseX.kr(1, 4, 1)
    ...
    downSample(~mousex).rand.wait 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:13:48.053

这是经典的[SuperCollider**语言与服务器**](http://doc.sccode.org/Guides/ClientVsServer.html)问题。您想在语言端计算中使用 MouseX（它表示服务器对鼠标位置的了解）。（“为什么要分裂？为什么语言不能使用同一个对象知道它？” - 好吧，想象这两个进程在不同的机器上运行 - 不同的老鼠......）

要获得语言中的鼠标位置，最好使用以下之一：

```
 Platform.getMouseCoords  // SC up to 3.6
 GUI.cursorPosition // SC recent versions 
```

如果您确定要使用该语言的服务器数据，那么您自己关于通过[总线](http://doc.sccode.org/Classes/Bus.html)发送的答案是一种方法。最近版本的 SuperCollider 有方法

```
 Bus.getSynchronous
 Bus.setSynchronous 
```

它依赖于语言和服务器之间新的“共享内存接口”。如果两者在同一台机器上，那么这可能是一种很好的方法，可以避免异步请求信息的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:14:32.787

经过大量研究，我想出了一个解决方案：使用控制总线来获取值。我们将一个函数作为输入 (f)，然后将其播放到总线上。

然后，我们通过调用总线上的 get 方法并提供允许我们从抛出的函数中提取值的函数来从该总线读取数据。

```
 ~mkscalarfun = {
        arg f={ 0 };
        var last = 0.0;
        var mbus = Bus.control(s, 1);   
        var pf = f.play(s,mbus);
        var scalarf = {
            mbus.get({|v| last = v;});
            last;
        };
        scalarf; // This is a function
    };
    // Create a closure that includes the bus
    ~mousescalarf = ~mkscalarfun.({ MouseX.kr(1,  4, 1); });
    ~mousescalarf.();
    ~mousescalarf.().rand.wait; 
```

我不确定这个解决方案有多惯用，或者它是否合适，或者它的性能如何。

此解决方案的一个问题是 pf 是隐藏的，因此您无法阻止它。

一种替代方法是使用 OO 解决方案，在扩展目录中创建一个类：

```
 MakeScalarKR {
        var last;
        var mbus;
        var pf;
        var f;
        *new { arg sbase,f;
            ^super.new.init(sbase,f)
        }
        init { 
            arg sbase,myf;
            f = myf;
            last = 0.0;
            mbus = Bus.control(sbase, 1);   
            pf = f.play(sbase, mbus);
        }
        v {
            mbus.get({|x| last=x;});
            ^last
        }
        free {
            pf.free
        }
    } 
```

然后你可以像这样调用这个类：

```
 ~mkr = MakeScalarKR(s,{ MouseX.kr(10,400,1) });
    ~mkr.v() 
```

# javascript - facebook群组添加到网站

> ID：16003342
> 
> 赞同：0
> 
> 时间：2013-04-14T19:27:47.520
> 
> 标签：javascript, facebook, facebook-graph-api

js：

```
$(document).ready(function(){

  window.fbAsyncInit = function() {
        FB.init();

    FB.getLoginStatus(function(response){
            runFbInitCriticalCode(); 
            console.log(response);
        });

        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/ru_RU/all.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    };
}); 
```

html:

```
<div id="fb-root"></div> 
```

我没有看到任何错误，但我无法显示组窗口，我做错了什么？据我所知，FB.INIT 的所有参数都是可选的，但是如何查看安装和执行 FB 脚本的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:30:53.420

你的 JS 是错误的。您正在尝试将 Facebook JS 包含在 facebook 就绪回调中。

尝试这个。

```
$(document).ready(function(){

    window.fbAsyncInit = function() {
        FB.init();

            FB.getLoginStatus(function(response){
            runFbInitCriticalCode(); 
            console.log(response);
        });
    }

    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ru_RU/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

}); 
```

# c - 使用 graphviz 作为库的问题

> ID：16003343
> 
> 赞同：3
> 
> 时间：2013-04-14T19:27:56.813
> 
> 标签：c, gcc, graphviz

[我正在尝试按照此处提供的libguide](http://www.graphviz.org/doc/libguide/libguide.pdf)将 graphviz 用作 C++ 项目的库。但是，即使编译附录中的示例，我也遇到了问题。当我尝试使用 gcc 编译 demo.c 时，我得到以下输出：

```
$ gcc -I/usr/local/Cellar/graphviz/2.28.0/include/ demo.c -L/usr/local/Cellar/graphviz/2.28.0/lib/ -lgvc -lgraph -lcdt
demo.c: In function ‘main’:
demo.c:14: error: ‘Agdirected’ undeclared (first use in this function)
demo.c:14: error: (Each undeclared identifier is reported only once
demo.c:14: error: for each function it appears in.)
demo.c:15: error: too many arguments to function ‘agnode’
demo.c:16: error: too many arguments to function ‘agnode’
demo.c:17: error: too many arguments to function ‘agedge’ 
```

Agdirected 在 cgraph.h 中找到，但如果我将 demo.c 中的包含更改为

```
#include <graphviz/gvc.h>
#include <graphviz/cgraph.h> 
```

然后所有的地狱都崩溃了（两个标题之间的声明主要是冲突的）。如何在不为所有这些冲突而头疼的情况下包含必要的标题？

Mac OS X 10.8.3、Graphviz 2.28.0、GCC 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:19:24.830

It seems after some experimentation that adding the flag

```
#define WITH_CGRAPH 
```

has the effect of including cgraph.h, which gets rid of the "'Agdirected' undeclared" error.

The other errors can be fixed by changing the command line option in gcc from -lgraph to -lcgraph

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T15:49:29.873

您使用的 libguide 是 cgraph 版本，它假定 Graphviz 2.30 或更高版本。在该版本中，已经提供了#define WITH_CGRAPH。

# mysql - SQL ORDER BY 与自定义“比较器”一起使用？

> ID：16003349
> 
> 赞同：2
> 
> 时间：2013-04-14T19:28:52.243
> 
> 标签：mysql, sql, sorting, sql-order-by

为了获得表格内容的随机“排列”，一个选项是：
`ORDER BY RAND()`

我的问题是在这种情况下这是如何工作的？它要求`RAND()`用作“比较器”？`RAND`不拿任何论据来比较不重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:40:45.733

[**兰德（）**](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)

> 返回 0 <= v < 1.0 范围内的随机浮点值 v。

你可以提供一个可选的`seeding value`

在执行时，这被视为`virtual column`with `random numbers`。然后`SQL engine`将此列用于`sort`表内容，将其（动态列）视为任何普通列（具有浮点值）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:41:33.770

MySQL 中的`rand()`函数每次调用时都会返回一个随机值。

当这个过程发生时，排序例程读取一条记录，调用 rand 函数，并隐式地将一个具有随机值的列添加到记录中。此列是隐藏的——您永远看不到它，但它用于排序。

从逻辑上讲，这相当于：

```
select <columns in t>
from (select t.*, rand() as ordering
      from t
     ) t
order by ordering 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:39:33.200

[`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)返回随机浮点数，因此使用标准浮点数比较来比较这些值。就像您在表架构中有一个浮点数列并在`ORDER BY`语句中使用它。这里没有魔法。

# java - 检查下载是否处于活动状态

> ID：16003350
> 
> 赞同：2
> 
> 时间：2013-04-14T19:29:09.400
> 
> 标签：java, android, android-download-manager

所以我使用下载管理器在我的应用程序中下载多个文件。在开始某个活动之前，我需要这些文件完成下载。如何检查是否有活动下载，以便我可以告诉用户等到下载完成。然后，当它们完成后，我需要使一个按钮可见。我已经用谷歌搜索了这个，甚至自己（盲目地）尝试了一些代码，但没有任何效果。如果有人可以将我推向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T19:42:23.743

用于[`query()`](http://developer.android.com/reference/android/app/DownloadManager.html#query%28android.app.DownloadManager.Query%29)查询下载。调用[`enqueue()`](http://developer.android.com/reference/android/app/DownloadManager.html#enqueue%28android.app.DownloadManager.Request%29)时，返回值为下载的ID。您也可以按状态查询：

```
Cursor c = downloadManager.query(new DownloadManager.Query()
        .setFilterByStatus(DownloadManager.STATUS_PAUSED
                | DownloadManager.STATUS_PENDING
                | DownloadManager.STATUS_RUNNING)); 
```

要在下载完成时收到通知，请注册一个`BroadcastReceiver`for `ACTION_DOWNLOAD_COMPLETE`：

```
BroadcastReceiver onComplete = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // do something
    }
};

registerReceiver(onComplete, new IntentFilter(
        DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

请注意，您还应该收听`ACTION_NOTIFICATION_CLICKED`广播以了解用户何时单击了正在运行下载的通知。

# php - 使用 PHPexcel+Mpdf 创建 PDF 文档时出错

> ID：16003355
> 
> 赞同：0
> 
> 时间：2013-04-14T19:29:41.273
> 
> 标签：php

我正在尝试使用以下代码使用 PHPexcel 和 MPDF 库创建 PDF 文档。但我收到错误消息 - “Adobe Reader 无法打开 '01simple-6.pdf' 因为它不是受支持的文件类型或因为文件已损坏（例如，它作为电子邮件附件发送并且未正确解码）。” 我究竟做错了什么？

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);
date_default_timezone_set('Europe/London');

if (PHP_SAPI == 'cli')
    die('This example should only be run from a Web Browser');

/** Include PHPExcel */
require_once '../Classes/PHPExcel.php';
$rendererName = PHPExcel_Settings::PDF_RENDERER_MPDF;
$rendererLibrary = 'mpdf.php';
$rendererLibraryPath = dirname(__FILE__).'/../../MPDF56/' . $rendererLibrary;

// Create new PHPExcel object
$objPHPExcel = new PHPExcel();

// Set document properties
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
                             ->setLastModifiedBy("Maarten Balliauw")
                             ->setTitle("PDF Test Document")
                             ->setSubject("PDF Test Document")
                             ->setDescription("Test document for PDF, generated using PHP classes.")
                             ->setKeywords("pdf php")
                             ->setCategory("Test result file");

// Add some data
$objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A1', 'Hello')
            ->setCellValue('B2', 'world!')
            ->setCellValue('C1', 'Hello')
            ->setCellValue('D2', 'world!');

// Miscellaneous glyphs, UTF-8
$objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A4', 'Miscellaneous glyphs')
            ->setCellValue('A5', 'éàèùâêîôûëïüÿäöüç');

// Rename worksheet
$objPHPExcel->getActiveSheet()->setTitle('Simple');
$objPHPExcel->getActiveSheet()->setShowGridLines(false);

// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0);

if (!PHPExcel_Settings::setPdfRenderer(
        $rendererName,
        $rendererLibraryPath
    )) {
    die(
        'NOTICE: Please set the $rendererName and $rendererLibraryPath values' .
        '<br />' .
        'at the top of this script as appropriate for your directory structure'
    );
}

// Redirect output to a client’s web browser (PDF)
header('Content-Type: application/pdf');
header('Content-Disposition: attachment;filename="01simple.pdf"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->save('php://output');
exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T13:59:25.803

尝试关闭错误报告。我遇到了同样的错误，然后我看到了一些在文件输出之前输出的通知和警告。

所以我关闭了错误报告并开始工作。

# syntax - Ocamllex - 字符之间有什么区别？(#)

> ID：16003359
> 
> 赞同：4
> 
> 时间：2013-04-14T19:30:07.847
> 
> 标签：syntax, ocaml, ocamllex

他们有一个带有 ocamllex 的运算符，它是`#`: 两个字符或字符集之间的区别。

在这里，有一个我不明白的概念：它是字符之间的差异。字符之间的区别是什么意思？因此，如果有人可以解释我，我接受它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T21:17:40.797

`[ 'a' - 'z' ] # [ 'a' 'e' 'i' 'o' 'u' ]`表示介于`a`和`z`之间的所有字符的集合，这些字符*不是* `a`、`e`、或。更一般地说，表示在 中但不在 中的元素集。`i``o``u``foo # bar``foo``bar`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T21:19:17.210

`#`运算符指定两组字符之间的差异。为方便起见，您可以使用单个字符来表示仅包含该字符的单例集。这对于右侧的操作数比左侧的操作数有用得多。但是为了保持一致性，两个地方都接受了这个符号。

# github - github repo 按语言（和历史数据）计算？

> ID：16003361
> 
> 赞同：3
> 
> 时间：2013-04-14T19:30:13.557
> 
> 标签：github, github-api

我有兴趣获取特定语言集的 github repos 计数（如果可能，请使用历史数据。）

以下是我尝试自己开始收集统计数据的事情：

1.  屏幕抓取页面，如：

[https://github.com/search?q=language%3Aperl&type=&ref=simplesearch](https://github.com/search?q=language%3Aperl&type=&ref=simplesearch)

1.  使用 github API：

[https://api.github.com/legacy/repos/search/KEYWORD?language=perl](https://api.github.com/legacy/repos/search/KEYWORD?language=perl)

但不幸的是，这似乎需要一个 KEYWORD 才能获得任何结果。此外，我只需要计数而不是每个 repo 上的元数据。

我也对历史数据感兴趣，而且似乎这些统计数据可能已经在某处可用。

关于通过语言和/或历史数据获取回购计数的更好方法的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-12T00:07:32.563

你可以试试这个： [https ://api.github.com/search/repositories?q=language:Python](https://api.github.com/search/repositories?q=language:Python)

此外，您可以查询[github 存档](http://www.githubarchive.org/)。使用大查询接口，查询应该是：

```
bq query 'SELECT repository_language, count(repository_language) as pushes
FROM [githubarchive:github.timeline]
WHERE type="CreateEvent" and repository_fork == "false"
GROUP BY repository_language
ORDER BY pushes DESC' 
```

此查询生成每种语言的存储库数量的统计信息。

# java - Java防止返回null

> ID：16003362
> 
> 赞同：0
> 
> 时间：2013-04-14T19:30:27.417
> 
> 标签：java, performance

我对 Java 还很陌生，所以请耐心等待。基本上我有一个名为“returnPages”的类，它返回您当前所在的父页面。问题是当您处于最高级别或根时，它会引发错误，从逻辑上讲，因为根没有父级，它将引发空指针异常。当您位于根目录时，我将如何防止引发错误？我认为下面的代码可以工作，但如果我开始我的条件，我只是得到一个空指针异常。注意：我试图在 JSP 中运行它，修改 returnPages 类将导致整个站点发生多个冲突。returnPages 类也接受两个参数，第一个是父页面，然后是您所在的当前页面。

```
Page rootPage = properties.get("rootPage", "");
if(returnPages.getPath(rootPage, currentPage) != null){
  List<Page> trail = returnPages.getPath(rootPage, currentPage);
} else {
//show something here
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:32:56.113

您可以使用

```
return Collections.emptyList<Page>(); 
```

或者干脆

```
return new LinkedList<Page>(); 
```

第一个选项返回一个不可变列表，因此尝试向该列表添加任何内容都会失败并出现异常。虽然您使用更少的内存并确保列表没有被修改，这有时是一件好事。

编辑：你为什么要进行两次查找？

```
List<Page> trail = returnPages.getPath(rootPage, currentPage);
if (trail == null) {
  trail = Collections.emptyList<Page>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:34:55.063

如果 returnPages.getPath(rootPage, currentPage) 正在抛出 NPE，你必须处理它。您无法检查它是否返回 null

```
try {
   List<Page> trail = returnPages.getPath(rootPage, currentPage);
} catch (NullPointerException e){
   //show something here
} 
```

关于 java 中的未检查和检查异常存在很大的争论。NullPointer 是未经检查的异常，因此通常意味着程序员错误。有人说你不应该抓住他们。你可以做的而不是返回 null 是返回一个空列表

评论后编辑：

当您尝试访问空对象上的某些内容时，将引发空指针。（这确实是一个 NullReferenceException 但同样有很多争论）

您正在做的是检查该方法返回的对象是否为空。在里面`returnPages.getPath(rootPage, currentPage)`它抛出一个 NullPointerException - 不返回它。（实际上由于此错误条件并抛出异常而没有返回任何内容）。[什么时候抛出异常？](https://stackoverflow.com/questions/77127/when-to-throw-an-exception)给出了这方面的细节。在较旧的语言中，会返回错误代码，因此您可以像现在一样进行检查。Java 有一个异常处理框架，这就是为什么作者`getPath`决定抛出异常而不是返回 null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:22:02.397

You should paste the stacktrace of that `NullPointerException` because it is not the same thing if that exception comes from `getPath()` or if it comes from the condition `if (returnPages.getPath(...`.

This might be the same issue as in your earlier [question](https://stackoverflow.com/questions/15981798/java-getparent-returning-null).

**UPDATE:** (Moving my comment to this answer.) This **is** an old issue (see the [question](https://stackoverflow.com/questions/15981798/java-getparent-returning-null)). The sentence "*modifying the returnPages class will result in multiple conflicts across the site*" doesn't make sense at all since neither the method interface nor its functionality has changed.

# jquery - jmpress.js 的不同 z-index 值

> ID：16003364
> 
> 赞同：0
> 
> 时间：2013-04-14T19:30:37.870
> 
> 标签：jquery, css, z-index

我的测试网站如下所示：正如您（希望）可以看到（教皇的）图像在背景之上但在“绿色条纹”之下。

这是因为

```
#wrapper { position: absolute; z-index: 2;  } 
```

对于主 div。我现在想要另一个 div 里面有另一个 z-index （所以只有图像在绿色条纹上方），但是当我用例如改变它时

```
#norbert, .step, .cast, .cast_pic { position: relative; z-index: 10; } 
```

没有什么变化。这是使用脚本 jmpress.js 的问题，还是 css 不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:43:54.713

只需从#stripes 中删除 z-index 行。最后的#stripes 会像

```
#stripes {
    background: url("img/body_stripes.png") no-repeat fixed center 75% transparent;
    height: 100%;
    opacity: 0.98;
    position: absolute;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:21:32.230

我用了

```
pointer-events: none; 
```

目前。不幸的是，这在 IE 中不起作用。

# c# - 动态地向资源添加值 (C#)

> ID：16003365
> 
> 赞同：1
> 
> 时间：2013-04-14T19:30:41.383
> 
> 标签：c#, asp.net, visual-studio-2010, azure, resx

我想通过编码（C#）动态地为资源添加值。我下面的编码运行没有任何错误，但值没有被添加到资源文件中。

```
protected void Button2_Click(object sender, EventArgs e)
{
    using (ResXResourceWriter resx = new ResXResourceWriter("Resources.resx"))
    {
        resx.AddResource( "joth", "joth");
        resx.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:39:20.143

```
protected void Button2_Click(object sender, EventArgs e)
{
    using (ResXResourceWriter resx = new ResXResourceWriter("Resources.resx"))
    {   resx.AddResource( "joth", "joth");
        resx.Save();
        resx.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-18T19:56:13.103

我尝试了上面的方法，它似乎不起作用，我环顾四周，尝试像 xml 文件一样编辑 resx 文件，它对我有用。

```
<data name="v13" xml:space="preserve">
   <value>Test TEst</value>
</data> 
```

以上是nodepadd++中打开的resx文件中单个key/value对的结构

```
XDocument doc = XDocument.Load(Server.MapPath(@"~\App_GlobalResources\myResource2.resx"));

XElement data = new XElement("data");

XNamespace ns = "xml";
data.Add(new XAttribute("name", "v13"));
data.Add(new XAttribute(XNamespace.Xml + "space", "preserve"));

data.Add(new XElement("value", "Test TEst"));

doc.Element("root").Add(data);
doc.Save(Server.MapPath(@"~\App_GlobalResources\myResource2.resx")); 
```

# mysql - Bash + MySQL -d 反引号问题

> ID：16003367
> 
> 赞同：3
> 
> 时间：2013-04-14T19:30:51.683
> 
> 标签：mysql, bash

我正在帮助创建一个社区项目的解决方案，以社区精神免费监测河流水位。这项工作的最终产品将是一个从河流水位探测器获取数据并为在线社区生成图表的系统。

我是该项目的早期，并且由于我熟悉 Bash，因此我正在使用它从包含数据的探针中获取一个文本文件并将其推送到 MySQL 数据库中。一切都很顺利，直到我遇到了一个绊脚石。我的许多数据库表列都是数字，因此必须使用 MySQL 命令行工具与这些列进行交互。不幸的是，我想从 MySQL 语句中获取输出并将其放入变量中，但我认为由于两组反引号，MySQL 没有得到正确的命令。

我已经用一个令人讨厌的工作来捏造它，就像这样，它的工作效率很低：

```
mysql -N -D $targetDatabase -e "select \`"$timeSample"\` from RiverDataDays where date="$dateOfFile";" >tmpValue

dbEntry=`cat tmpValue`

echo $dbEntry 
```

但实际上，我想做的是直接将它推入这样的变量中：

```
dbEntry=`mysql -N -D $targetDatabase -e "select \`"$timeSample"\` from RiverDataDays where date="$dateOfFile";"`

echo $dbEntry 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T19:36:08.217

尝试这样做：

```
dbEntry="$(printf "SELECT \140%s\140 FROM 'RiverDataDays' WHERE date = '%s';\n" "$timeSample" "$(<tmpValue )" | mysql -N -D "$targetDatabase")"
echo "$dbEntry" 
```

或者

```
dbEntry="$(printf "SELECT \`%s\` FROM 'RiverDataDays' WHERE date = '%s';\n" "$timeSample" "$(<tmpValue )" | mysql -N -D "$targetDatabase")"
echo "$dbEntry" 
```

反引号 (`) 用于旧式命令替换，例如

```
foo=`command` 
```

这

```
foo=$(command) 
```

建议使用语法。$() 中的反斜杠处理不那么令人惊讶，并且 $()**更容易嵌套**。见[http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)

* * *

```
\140 
```

是反引号的八进制表示，请参见

```
man ascii 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:07:14.857

关注 Sputnick 的链接：- [http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)

然后相应地修改代码

dbEntry=$(mysql -N -D $targetDatabase -e "select \`"$timeSample"\` from RiverDataDays where date="$dateOfFile";")

回声 $dbEntry

精彩的论坛 - 非常感谢你:)

# javascript - onCanvasClick(event) 在 Visual Studio Ultimate 上不起作用

> ID：16003373
> 
> 赞同：2
> 
> 时间：2013-04-14T19:31:26.483
> 
> 标签：javascript, html, canvas

我正在构建一个益智游戏。它确实在浏览器中工作，但我需要让它在 Visual Studio 上工作。它显示了图片和所有内容，但是当我单击时出现此错误

**0x800a1391 - JavaScript 运行时错误：“onCanvasClick”未定义**

我有这部分代码的prb

```
 <canvas id="myCanvas" width="640" height="480" onclick="onCanvasClick(event);"> 
```

它不接受 onCanvasClick(event);

我找不到让它工作的方法。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:41:43.887

尝试这个：

```
canvas = document.getElementById("myCanvas");

// Beware, this is "click" not "onclick"
canvas.addEventListener('click', canvasClicked, false); 

function canvasClicked(e) {
    console.log("Clicked");
} 
```

看到它[`jsFiddle`](http://jsfiddle.net/sam_rad/ZTVVx/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T20:19:53.267

正如 Sam Rad 所提到的，您应该将事件侦听器添加到 <script> 标记中，而不是 HTML 中的内联标记。我认为您的函数未声明的原因是因为它是在不同的范围内声明的。当您在内联 HTML 脚本中使用它时，它会在全局范围内查找该函数。

所以如果你有这样的事情：

```
(funciton() {

    function canvasClicked( event ) {
        // ...
    }

})() 
```

您的内联 HTML 脚本将失败。

只要避免使用内联 HTML 脚本，你就会让你的生活更轻松：D

# javascript - 浏览器端 Dust.js

> ID：16003374
> 
> 赞同：2
> 
> 时间：2013-04-14T19:31:26.900
> 
> 标签：javascript, browser, dust.js

我一直在尝试在浏览器中使用 Dust.js 编写一个非常简单的示例。尽管文档非常好，但似乎没有太多关于在浏览器中配置内容的信息。

因此，基于从 Linked-In Dust 教程中获取的以下 JSON 数据：

[https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Show_me_some_Dust](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Show_me_some_Dust)

```
{
   "title": "Famous People", 
   "names" : [{ "name": "Larry" },{ "name": "Curly" },{ "name": "Moe" }]
} 
```

这个模板：

```
 {title}
 <ul>
 {#names}
 <li>{name}</li>{~n}
 {/names}
  </ul> 
```

如何发送它以在浏览器中呈现客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T04:37:36.227

我也在寻找 DustJS 的浏览器示例，因为教程并没有真正提到它。

这是我用一个例子创建的一个仓库： [https ://github.com/ericktai/dust-js-browser](https://github.com/ericktai/dust-js-browser)

我使用[duster.js](https://github.com/dmix/dusterjs)来编译模板。repo 的 README.md 应该描述基础知识。

希望能帮助到你！

埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:48:10.317

A little bit down on the page you will find a basic example how to compile a template:
[Compiling a Dust Template](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#compiling-a-dust-template)

Basically you just have to call the `compile` function to register the template.

```
var compiled = dust.compile("Hello {name}!", "intro"); 
```

To use it immediately, execute `loadSource` to write the compiled template into dust's template library:

```
dust.loadSource(compiled); 
```

Then you're able to `render` the template with your JSON-data:

```
dust.render("intro", {name: "Fred"}, function(err, out) {
    console.log(out);

    // or maybe with jquery:
    $('#container').html(out);
}); 
```

# java - 如何在文本已经存在该文件后写入文件（光标移动到文件末尾）

> ID：16003375
> 
> 赞同：0
> 
> 时间：2013-04-14T19:31:41.910
> 
> 标签：java, file, streamwriter, cursor-position

这是我读取文件和写入文件的代码；我想将字符串内容写入文本文件的末尾。我的目标是在文本文件中对光标移动/控制进行命令。

请帮帮我谢谢

```
import java.io.BufferedReader;
 import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class Filing {

public static void main(String[] args) throws IOException
{
    String content = "This is the content to write into file";

    BufferedReader br = 
     new BufferedReader(new FileReader("C:/Users/Ashad/Desktop/text.txt"));
    try {
        StringBuilder sb = new StringBuilder();
        String line = br.readLine();

        FileWriter fw = new FileWriter("C:/Users/Ashad/Desktop/text.txt");
        BufferedWriter bw = new BufferedWriter(fw); 

        while (line != null)
        {
            sb.append(line);
            sb.append("\n");
            line = br.readLine();
        }

       //** bw.write(content) ; **//

        String everything = sb.toString();

        System.out.append(everything); 
    } 
    finally 
    { br.close();} 
```

在文件中已经存在文本之后，我无法编写字符串内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:33:18.867

> 我想将字符串内容写入文本文件的末尾

然后只需使用带有标志的[构造函数的](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)[重载：`FileWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)`append`

```
FileWriter fw = new FileWriter("C:/Users/Ashad/Desktop/text.txt", true); 
```

不过，就个人而言，我更喜欢使用`FileOutputStream`和`OutputStreamWriter`- 这样您就可以指定编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:33:29.720

以附加模式创建 FileWriter：

```
FileWriter fw = new FileWriter("C:/Users/Ashad/Desktop/text.txt", true); 
```

# excel - 如何在 Excel 中使用单元格 1 中的值填充空白单元格 2？

> ID：16003378
> 
> 赞同：0
> 
> 时间：2013-04-14T19:31:48.187
> 
> 标签：excel, copy, tabbing

我需要用 NON vba 解决方案将 A2 中的值填入一个空白单元格，例如 D7。

一直试图弄清楚但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:52:08.040

所有 Worksheet.ActivateEvent 事件都由 C# 或 VB 处理。如

`Sub Worksheet1_ActivateEvent() Handles Me.ActivateEvent MsgBox(Me.Name & " was activated.") End Sub`

不幸的是，没有办法解决它。您的解决方案是否需要完全保留在 Excel 中？

# ios - UIActionSheet 和人机界面指南

> ID：16003379
> 
> 赞同：0
> 
> 时间：2013-04-14T19:31:52.627
> 
> 标签：ios

我已经开始使用 UIActionSheet 作为向用户传递严重错误消息的一种形式——例如，当尝试保存无效内容时，我可能会放置一个带有单个按钮的操作表，通知用户错误。

我的问题是这是否容易与 HIG 发生冲突或导致 App Store 接受度出现问题？它没有被过度使用，但仅在极少数情况下描述问题性质的错误消息是必不可少的。

有人知道吗？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T21:33:12.230

不管苹果决定什么，为什么要改变用户的期望？错误消息通常被本地化并显示为“UIAlertView”“消息”的一部分 - 它旨在允许一些扩展消息。'UIActionSheet' 'title' 是标题，而不是消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T21:54:37.723

第 168 页，[官方 Apple iOS 人机界面指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf)指出：

> 操作表显示一组与用户启动的任务相关的选择。

因此，您使用操作表显示错误消息是违反这些准则的。

# objective-c - Segue Unwind 回到最后一个特定的视图控制器

> ID：16003380
> 
> 赞同：3
> 
> 时间：2013-04-14T19:32:02.573
> 
> 标签：objective-c, xcode, uiviewcontroller, storyboard, segue

有没有办法让一个按钮展开回到特定的视图控制器？例如，假设我有 ViewController A 和 B。两者都以模态方式连接到 ViewController C。现在我了解如何将展开返回到以前的视图控制器之一（如此处[所述](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)）但是我如何回到特定的视图控制器提出 VC C?

总而言之，我想弄清楚的是...如果 A 与 C 相连，那么我想在选择按钮时回到 A。如果 B 连接到 C，那么我想在选择按钮时回到 B。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:38:34.617

您应该使用标准方式从模态转场返回。把它放在你的“后退”按钮...

```
[[self presentingViewController] dismissViewControllerAnimated:YES]; 
```

这不使用故事板或返回的segue，只是代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T01:38:34.127

您可以使用presentingViewController 'title' 属性将展开过程引导到所需的原始ViewController。此解决方案还允许您将数据从 ViewController C 传递到 ViewControllers A 和 B。

1) 选择 V​​iewController A 故事板画布顶部的 View Controller 按钮（黄色）。

2) 在 Attributes Inspector（View Controller 部分）中，给 ViewController A 一个标题。

3) 在 ViewController A 中包含以下代码：

```
@IBAction func returned(segue: UIStoryboardSegue) {
   // Don't need any code here 
} 
```

4) 对 ViewController B 重复步骤 1、2 和 3。

5) 重写 ViewController C 中的 prepareForSegue 函数，如下所示：

```
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {   
    if self.presentingViewController!.title! == "ViewControllerATitle" {
        let destination = segue.destinationViewController as! ViewControllerA
        destination.someFunction(someArgument)
    } 
    else if self.presentingViewController!.title! == "ViewControllerBTitle" {
        let destination = segue.destinationViewController as! ViewControllerB
        destination.someFunction(someArgument)
    }
} 
```

# c - 动态数组的重新分配？

> ID：16003381
> 
> 赞同：1
> 
> 时间：2013-04-14T19:32:04.080
> 
> 标签：c, arrays, dynamic

这是我正在使用的代码...

```
while(temp[i]!=0){
    while(temp[i]!=3){
        FrameBuffer[a]=temp[i];
        i++;
        a++;
    }
    FrameBuffer[a]=temp[i];
    printf(" Framebuffer: %s ", FrameBuffer);
    result=layer1(FrameBuffer,PacketAction);
    i++;
    a=0;
} 
```

问题是我希望 FrameBuffer 在每次通过内部 while 循环时都被重置（在循环开始时 FrameBuffer 的大小为 0）。我尝试使用 free(FrameBuffer) 但我收到错误，因为我多次释放数组。我也试过写 FrameBuffer=NULL，但是没有用。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:39:43.137

如果您只需要在每个内部循环开始之前初始化 FrameBuffer，`memset`可以使用-：

```
while(temp[i]!=0) {
    memset(FrameBuffer, 0, sizeof(FrameBuffer));

    while(temp[i]!=3) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:03:27.660

由于您没有显示声明或对输入字符串进行特别好的描述`temp`，因此很难知道您在做什么。

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>

extern int somefunc(const char *fb, int pa);
extern int layer1(const char *fb, int pa);

int somefunc(const char *temp, int PacketAction)
{
    int rc = 0;
    char *FrameBuffer = calloc(2048, sizeof(char));
    if (FrameBuffer != 0)
    {
        int i = 0;
        while (temp[i] != '\0')
        {
            int a = 0;
            while (temp[i] != 3)
                FrameBuffer[a++] = temp[i++];
            FrameBuffer[a++] = temp[i++];
            FrameBuffer[a] = '\0';
            assert(a < 2048);
            printf("Framebuffer: %.*s\n", a, FrameBuffer);
            int result = layer1(FrameBuffer, PacketAction);
            if (rc == 0)
                rc = result;
        }
    }
    return rc;
} 
```

这可能就足够了。该函数在其中`layer1`获取一个以空字符结尾的字符串`FrameBuffer`（它没有其他可见的方法来确定数据的长度）。

请注意，通过`a`在外部循环的范围内声明，我不需要在循环结束时重新初始化它。我已经使用`a++`and`i++`来增加计数器；它允许紧凑的表示法，而不会损失经验丰富的 C 程序员的可读性——尽管我承认对于新手程序员来说处理起来可能有点困难。尽管如此，这个成语还是值得学习的。

我想知道内部循环是否应该检查`'\0'`3 (aka `'\3'`or `'\003'`); 我需要知道`temp`除了最后之外是否会出现空值。显示的代码采用了一种懒惰的方式来验证`FrameBuffer`. 如果函数被告知输入的长度会更好`temp`：

```
void somefunc(const char *temp, size_t templen, int PacketAction) 
```

可以更有弹性地编写代码。它可能使用`strlen(temp)`，但从可用信息中并不完全清楚。

# c# - 在线程中创建线程可以吗？

> ID：16003383
> 
> 赞同：0
> 
> 时间：2013-04-14T19:32:17.207
> 
> 标签：c#, multithreading, thread-safety

所以我有4个对象。它们中的每一个必须同时执行多达 5 个操作，并且所有 4 个对象必须同时操作。我为每个对象创建了一个线程并在 5 个新线程中创建了？我看到一段时间后线程不再执行。问题是：线程中有线程可以吗？或者最好创建一个线程池并并发运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:38:52.023

没关系。有时您实际上需要这样做，例如在使用服务器时，您可以从正在侦听客户端的线程为每个连接的客户端创建线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:37:48.427

没有“线程中的线程”之类的东西。线程是整个过程中全局的实体。它是否在其他线程之一中创建并不重要。创建它的那一刻，它就成为全局的并且与它创建它的线程无关。

关于创建线程的更多信息，您应该担心对共享资源的访问和可能的竞争条件，当线程在不同的地方创建时，这些条件可能更难跟踪。

根据您的描述，我建议您查看 Task Parallel Library，它使问题变得轻而易举。

# ios - 如何通过 NSUserDefaults 保存 TextAlignment

> ID：16003386
> 
> 赞同：0
> 
> 时间：2013-04-14T19:32:28.720
> 
> 标签：ios, textview, nsuserdefaults

我的问题是如何通过 NSUserDefaults 保存 textView 的 textAlignment。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:34:18.343

textalignment 是一个枚举，因此您可以将其保存为 int：

```
[[NSUserDefaults standardUserDefaults] setInteger:<#(NSInteger)#> forKey:<#(NSString *)#>] 
```

# android - sqlite异常：在android中找不到表异常

> ID：16003387
> 
> 赞同：0
> 
> 时间：2013-04-14T19:32:36.023
> 
> 标签：android, android-intent, sqlite, android-sqlite

我是 android 的新手。我正在尝试读取数据库并将结果放入 List 活动中。以下是条目活动。

```
 package com.sanjay.listdemo;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.SimpleCursorAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends ListActivity {

    protected EditText searchText;
    protected SQLiteDatabase db;
    protected Cursor cursor;
    protected ListAdapter adapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        searchText = (EditText) findViewById(R.id.searchText);
        db = (new DatabaseHelper(this)).getWritableDatabase();

    }

//    public void onListItemClick(ListView parent, View view, int position, long id) {
//      Intent intent = new Intent(this, );
//      Cursor cursor = (Cursor) adapter.getItem(position);
//      intent.putExtra("EMPLOYEE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
//      startActivity(intent);
//    }

    public void search(View view) {
        // || is the concatenation operation in SQLite
        cursor = db.rawQuery("SELECT _id, firstName, lastName, title FROM employees WHERE firstName || ' ' || lastName LIKE ?", 
                        new String[]{"%" + searchText.getText().toString() + "%"});
        adapter = new SimpleCursorAdapter(
                this, 
                R.layout.simple_list_item, 
                cursor, 
                new String[] {"firstName", "lastName", "title"}, 
                new int[] {R.id.firstname, R.id.lastname, R.id.title});
        setListAdapter(adapter);
    }

} 
```

**数据库助手.java**

```
package samples.employeedirectory;

import java.io.InputStream;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.Toast;

public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "employee_directory2";

    protected Context context;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String s;
        try {
            Toast.makeText(context, "1", 2000).show();
            InputStream in = context.getResources().openRawResource(R.raw.sql);
            DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            Document doc = builder.parse(in, null);
            NodeList statements = doc.getElementsByTagName("statement");
            for (int i=0; i<statements.getLength(); i++) {
                s = statements.item(i).getChildNodes().item(0).getNodeValue();
                db.execSQL(s);
                db.close();
            }
        } catch (Throwable t) {
            Toast.makeText(context, t.toString(), 50000).show();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS employees");
        onCreate(db);
    }

} 
```

**sql.xml**

```
<sql>
<statement>
CREATE TABLE IF NOT EXISTS employees (
    _id INTEGER PRIMARY KEY AUTOINCREMENT, 
    firstName VARCHAR(50), 
    lastName VARCHAR(50), 
    title VARCHAR(50), 
    department VARCHAR(50), 
    managerId INTEGER, 
    city VARCHAR(50), 
    officePhone VARCHAR(30), 
    cellPhone VARCHAR(30), 
    email VARCHAR(30), 
    picture VARCHAR(200))
</statement>
<statement>INSERT INTO employees VALUES(1,'Ryan','Howard','Vice President, North East', 'Management', NULL, 'Scranton','570-999-8888','570-999-8887','ryan@dundermifflin.com','howard.jpg')</statement>
<statement>INSERT INTO employees VALUES(2,'Michael','Scott','Regional Manager','Management',1,'Scranton','570-888-9999','570-222-3333','michael@dundermifflin.com','scott.jpg')</statement>
<statement>INSERT INTO employees VALUES(3,'Dwight','Schrute','Assistant Regional Manager','Management',2,'Scranton','570-444-4444','570-333-3333','dwight@dundermifflin.com','schrute.jpg')</statement>
<statement>INSERT INTO employees VALUES(4,'Jim','Halpert','Assistant Regional Manager','Manage',2,'Scranton','570-222-2121','570-999-1212','jim@dundermifflin.com','halpert.jpg')</statement>
<statement>INSERT INTO employees VALUES(5,'Pamela','Beesly','Receptionist','',2,'Scranton','570-999-5555','570-999-7474','pam@dundermifflin.com','beesly.jpg')</statement>
<statement>INSERT INTO employees VALUES(6,'Angela','Martin','Senior Accountant','Accounting',2,'Scranton','570-555-9696','570-999-3232','angela@dundermifflin.com','martin.jpg')</statement>
<statement>INSERT INTO employees VALUES(7,'Kevin','Malone','Accountant','Accounting',6,'Scranton','570-777-9696','570-111-2525','kmalone@dundermifflin.com','malone.jpg')</statement>
<statement>INSERT INTO employees VALUES(8,'Oscar','Martinez','Accountant','Accounting',6,'Scranton','570-321-9999','570-585-3333','oscar@dundermifflin.com','martinez.jpg')</statement>
<statement>INSERT INTO employees VALUES(9,'Creed','Bratton','Quality Assurance','Customer Services',2,'Scranton','570-222-6666','333-8585','creed@dundermifflin.com','bratton.jpg')</statement>
<statement>INSERT INTO employees VALUES(10,'Andy','Bernard','Sales Director','Sales',2,'Scranton','570-555-0000','570-546-9999','andy@dundermifflin.com','bernard.jpg')</statement>
<statement>INSERT INTO employees VALUES(11,'Phyllis','Lapin','Sales Representative','Sales',10,'Scranton','570-141-3333','570-888-6666','phyllis@dundermifflin.com','lapin.jpg')</statement>
<statement>INSERT INTO employees VALUES(12,'Stanley','Hudson','Sales Representative','Sales',10,'Scranton','570-700-6666','570-777-6666','shudson@dundermifflin.com','hudson.jpg')</statement>
<statement>INSERT INTO employees VALUES(13,'Meredith','Palmer','Supplier Relations','Customer Services',2,'Scranton','570-555-8888','570-777-2222','meredith@dundermifflin.com','palmer.jpg')</statement>
<statement>INSERT INTO employees VALUES(14,'Kelly','Kapoor','Customer Service Rep.','Customer Services',2,'Scranton','570-123-9654','570-125-3666','kelly@dundermifflin.com','kapoor.jpg')</statement>
</sql> 
```

我收到“找不到这样的表：emplyees”。请任何人都可以建议我哪里错了。因为 48 小时我正在尝试解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:37:47.430

创建数据库时，不要在每条语句上关闭数据库：

转这个：

```
for (int i=0; i<statements.getLength(); i++) {
  s = statements.item(i).getChildNodes().item(0).getNodeValue();
  db.execSQL(s);
  db.close();
} 
```

进入这个：

```
for (int i=0; i<statements.getLength(); i++) {
  s = statements.item(i).getChildNodes().item(0).getNodeValue();
  db.execSQL(s);
} 
```

在方法中根本不应该关闭数据库`onCreate`。

尝试执行第二条语句时您没有收到错误的事实让我相信您没有正确执行这些语句。

PS：我也强烈建议你把你的`rawQuery`变成正确的 Android`SqliteDatabase`查询

PS2：你也应该关闭你的`in` `InputStream`.

# java - 重新定义 Scanner 的非数字识别？

> ID：16003391
> 
> 赞同：0
> 
> 时间：2013-04-14T19:32:47.283
> 
> 标签：java, double, java.util.scanner, nan

在 Java 中，该类`java.util.Scanner`提供了一种方便的方法来解析长字符串。在我的特殊情况下，我必须解析具有许多`double`值的字符串，为此我使用该`nextDouble()`方法。

有时，我的输入字符串包含`nan`而不是有效的浮点数。不幸的是，`Scanner`似乎只识别`NaN`非数字。

有没有办法教它也认`nan`？`Locale`也许通过设置自定义`DecimalFormatSymbols.setNaN()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:49:32.707

One option is setting a custom `Locale`. Another option is that internally the scanner uses a regular expression to retrieve a double-string and then uses `Double.parseDouble` to convert it to a `double`, so you could call `Scanner#next(Pattern pattern)` using the regular expression [defined here](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29) except using "nan" instead of "NaN" and then call `Double.parseDouble` on the returned string.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:50:59.777

这样的事情怎么样？

```
private static final Pattern nan =
        Pattern.compile("nan", Pattern.CASE_INSENSITIVE);
public static boolean hasNextDouble(Scanner scanner) {
    if(scanner == null)
        return false;
    return scanner.hasNext(nan) || scanner.hasNextDouble();
}
public static double nextDouble(Scanner scanner) {
    if(scanner.hasNext(nan)) {
        scanner.next();
        return Double.NaN;
    }
    return scanner.nextDouble();
} 
```

# android - 导入 actionbarsherlock 时无法解析 import .R

> ID：16003396
> 
> 赞同：4
> 
> 时间：2013-04-14T19:33:16.547
> 
> 标签：android, actionbarsherlock

我希望能够在我的 android 项目（2.3）中使用操作栏，所以我正在尝试导入 actionbarsherlock 库。但是，我遇到了问题......

我已经导入了库，编辑了我的 android 项目的构建路径以包含该库，还从 ABS /libs 目录中删除了 android-support-v4 jar，并将我的项目的 android-support-v4 复制到 ABS /libs解决jar不匹配的目录。但是，现在我已经完成了所有这些事情，我的项目无法在任何地方解析 myproject.R。我在几乎所有的 .java 文件中导入 myproject.R，它们都有相同的错误（“无法解析导入 com.myproject.R”）。此外，当我清理我的项目时，我在控制台窗口中收到很多错误：

它们都遵循以下原则：

> 错误：检索项目的父项时出错：找不到与给定名称“android:Theme.Holo.Light”匹配的资源。

据我所知，R 是存储所有布局信息的地方，所以我不知道为什么这甚至是一个问题......

几天来我一直在处理这个错误，我非常沮丧，最后决定把它带到堆栈溢出。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:23:30.593

**ActionBarSherlock 是一个图书馆项目**。

所以在你的eclipse中导入库项目

![在此处输入图像描述](https://i.stack.imgur.com/vh8MG.png)

它是一个图书馆项目。检查右键单击您的库项目。转到属性。

选择安卓。您将看到一个 Is Library 被选中，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/5h91q.png)

将您的库项目添加到您的 Android 项目中。

右键单击您的 Android 项目。转到属性。选择安卓。单击添加按钮将库添加到您的项目。您可以在下图中看到一个绿色勾号。

![在此处输入图像描述](https://i.stack.imgur.com/BlQMO.png)

确保您的 libs 文件夹中有一份 andorid-suuport-v4.jar 副本。

不要导入 R.*；

您将看到两个 R.java，一个用于库项目，一个用于您的 android 项目。清洁和建造。

![在此处输入图像描述](https://i.stack.imgur.com/GfIGC.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:21:11.743

> 编辑了我的 android 项目的构建路径以包含该库

**永远不要手动修改 Android 项目的构建路径**。

ActionBarSherlock 是一个 Android 库项目。您需要从主应用程序项目中[添加](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)对 ActionBarSherlock 库项目的引用，并撤消对构建路径的手动更改。

* * *

**更新**

您问题的后半部分是您的构建目标设置得太低。构建目标控制您的应用程序可用的 Android 类、资源等版本，如果您使用 ActionBarSherlock，则需要 API 级别 14 或更高。

> 如果我让我的项目构建目标为 4.0，我还能在运行 Android 2.3 的模拟器/手机上运行它吗？

是的。将您`android:minSdkVersion`的值设置为 10 或更低。如果您不小心尝试使用高于您`minSdkVersion`的 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T18:27:51.533

我发现如果项目的AndroidManifest.xml中的minSDKVersion低于库，也会使项目在构建R.java时出错

# javascript - 如何从 JavaScript 中的对象数组中找到“重叠”值？

> ID：16003399
> 
> 赞同：1
> 
> 时间：2013-04-14T19:33:35.370
> 
> 标签：javascript

给定两个对象数组，我如何找到所有包含“重叠”值的对象（例如本例中的价格）？

例如，给定数组 A 和数组 B，我如何找到“价格”完全匹配（例如 20、30）或包含在此重叠范围内（例如 20.45）的所有对象？

```
var A = [
  { "id" : 1, "price" : 50, "quantity": 2 },
  { "id" : 2, "price" : 40, "quantity": 2 },
  { "id" : 3, "price" : 30, "quantity": 2 }, // yes
  { "id" : 4, "price" : 20, "quantity": 2 }  // yes
];

var B = [
  { "id" : 5, "price" : 30, "quantity": 2 }, // yes
  { "id" : 6, "price" : 20.45, "quantity": 2 }, // yes
  { "id" : 7, "price" : 20, "quantity": 2 }, // yes
  { "id" : 8, "price" : 10, "quantity": 2 },
  { "id" : 9, "price" : 5, "quantity": 2 }
];

// Goal
var C = [
  { "id" : 3, "price" : 30, "quantity": 2 }, // yes
  { "id" : 4, "price" : 20, "quantity": 2 }  // yes
];
var D = [
  { "id" : 5, "price" : 30, "quantity": 2 }, // yes
  { "id" : 6, "price" : 20.45, "quantity": 2 }, // yes
  { "id" : 7, "price" : 20, "quantity": 2 }, // yes
]; 
```

我的目标是将它们分成自己的数组（C＆D）。但如果最终结果需要是一个组合数组，那也没关系。我可能也可以完成这项工作。任何有效的东西都会让我现在很开心。

我试过下划线的交集。如果 A 和 B 是包含整数而不是对象的简单数组，则交集可以找到精确匹配项（例如 30 和 30、20 和 20），但它仍然不包括我也需要的 20.45。而且，当然，我有一个对象数组而不是简单的数组，这也让它变得有点困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:53:25.723

似乎我们可以假设这些数组是按价格排序的（如果不是，请这样做 - 请参阅[对 JavaScript 对象数组进行排序](https://stackoverflow.com/q/979256/1048572)等），并且`A`包含比价格更高的价格`B`（如果不是，您需要反转逻辑）。然后做：

```
var i = A.length - 1,
    j = 0,
    overlapMin = A[i].price,
    overlapMax = B[j].price;
while (A[i].price <= overlapMax) i--;
while (B[j].price >= overlapMin) j++;
var C = A.slice(i+1), // to end
    D = B.slice(0, j); 
```

`i`如果您需要在一个非常大的集合上获得更好的性能，您也可以使用二进制搜索来搜索边界`j`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T19:41:15.243

```
var C = [], D = [];
for (var i in A)
    for (var j in B)
        if (A[i].price > B[j].price-1 && A[i].price < B[j].price+1) {
             C.push(A[i]);
             D.push(B[j]);
        } 
```

# c# - 使用 CodeDOM 源代码和类文件一起

> ID：16003406
> 
> 赞同：0
> 
> 时间：2013-04-14T19:34:16.347
> 
> 标签：c#, codedom, system-codedom-compiler

我为 codeDOM 编译器创建了一个表单，如果它在单个文本文件中，它可以编译我的代码，但我希望能够编译文本文件中的源代码和文本文件中的类，以便它们可以一起工作.

我不确定如何对 codeDOM 进行编码以将我的类文件添加为要编译的主要源的资源

这是我到目前为止所拥有的

codeDOM 编译器

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.CodeDom.Compiler;
using Microsoft.CSharp;

namespace CodeDOMSourceTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void btnCompile_Click(object sender, EventArgs e)
        {
            CompilerParameters Params = new CompilerParameters();
            Params.GenerateExecutable = true;
            Params.ReferencedAssemblies.Add("System.dll");
            Params.ReferencedAssemblies.Add("TextFile1.txt");

            Params.OutputAssembly = "output.exe";

            string Source = Properties.Resources.CodeDOMSource;
            Source = Source.Replace("[TEXT]", txtReplace.Text);

            CompilerResults Results = new CSharpCodeProvider().CompileAssemblyFromSource(Params, Source);

            if (Results.Errors.Count > 0)
            {
                foreach (CompilerError err in Results.Errors)
                    Console.WriteLine(err.ToString());
            }
            else Console.WriteLine("Compiled just fine!");
        }
    }
} 
```

源文件

```
namespace testingCodeDOM
{
class Program
{
static void Main()
{
System.Console.WriteLine("[TEXT]");
Console.WriteLine(Testing.textwork());
System.Console.Read();
}
}
} 
```

类文件

```
namespace testingCodeDOM
{
    class Testing
    {
        public static string textwork()
        {
            string hello = "calss worked";
            return hello;
        }enter code here
    }
} 
```

任何想法如何做到这一点，因为我已经用谷歌搜索了它并且我没有得到任何想法，或者至少我没有理解

另一方面，这不适用于源代码，但我正在尝试将其调整为使用类文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:01:12.943

[该`CompileAssemblyFromSource()`方法](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromsource.aspx)可以采用任意数量的源代码字符串（因为它是一个`params`方法）。所以，你可以这样称呼它：

```
CompileAssemblyFromSource(Params, Source, ClassFile) 
```

包含第二个文件文本的`ClassFile`a在哪里。`string`

# python - 如何将 dict.get() 与多维字典一起使用？

> ID：16003408
> 
> 赞同：26
> 
> 时间：2013-04-14T19:34:20.583
> 
> 标签：python, dictionary

我有一个多维字典，我希望能够通过键：键对检索一个值，如果第一个键不存在，则返回“NA”。所有子字典都具有相同的键。

```
d = {   'a': {'j':1,'k':2},
        'b': {'j':2,'k':3},
        'd': {'j':1,'k':3}
    } 
```

我知道`d.get('c','NA')`如果存在子字典，我可以使用它来获取它，否则返回“NA”，但我真的只需要子字典中的一个值。`d.get('c['j']','NA')`如果存在的话，我想做类似的事情。

现在我只是检查顶级键是否存在，然后将子值分配给变量（如果存在或`'NA'`不存在）。但是，我这样做了大约 500k 次，并且还从其他地方检索/生成有关每个顶级密钥的其他信息，并且我正在尝试加快速度。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-14T19:36:29.297

怎么样

```
d.get('a', {'j': 'NA'})['j'] 
```

?

如果不是所有的 subdicts 都有一个`j`键，那么

```
d.get('a', {}).get('j', 'NA') 
```

要减少创建的相同对象，您可以设计类似的东西

```
class DefaultNASubdict(dict):
    class NADict(object):
        def __getitem__(self, k):
            return 'NA'

    NA = NADict()

    def __missing__(self, k):
        return self.NA

nadict = DefaultNASubdict({
                'a': {'j':1,'k':2},
                'b': {'j':2,'k':3},
                'd': {'j':1,'k':3}
            })

print nadict['a']['j']  # 1
print nadict['b']['j']  # 2
print nadict['c']['j']  # NA 
```

相同的想法使用`defaultdict`：

```
import collections

class NADict(object):
    def __getitem__(self, k):
        return 'NA'

    @staticmethod
    def instance():
        return NADict._instance

NADict._instance = NADict()

nadict = collections.defaultdict(NADict.instance, {
                'a': {'j':1,'k':2},
                'b': {'j':2,'k':3},
                'd': {'j':1,'k':3}
            }) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T19:56:55.417

这是使用普通字典执行此操作的一种简单有效的方法，嵌套任意数量的级别。示例代码适用于 Python 2 和 3。

```
from __future__ import print_function
try:
    from functools import reduce
except ImportError:  # Assume it's built-in (Python 2.x)
    pass

def chained_get(dct, *keys):
    SENTRY = object()
    def getter(level, key):
        return 'NA' if level is SENTRY else level.get(key, SENTRY)
    return reduce(getter, keys, dct)

d = {'a': {'j': 1, 'k': 2},
     'b': {'j': 2, 'k': 3},
     'd': {'j': 1, 'k': 3},
    }

print(chained_get(d, 'a', 'j'))  # 1
print(chained_get(d, 'b', 'k'))  # 3
print(chained_get(d, 'k', 'j'))  # NA 
```

它也可以递归地完成：

```
# Recursive version.

def chained_get(dct, *keys):
    SENTRY = object()
    def getter(level, keys):
        return (level if keys[0] is SENTRY else
                    'NA' if level is SENTRY else
                        getter(level.get(keys[0], SENTRY), keys[1:]))
    return getter(dct, keys+(SENTRY,)) 
```

虽然这样做的方式不如第一种有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-20T05:02:03.637

获取多维dict示例的另一种方法（两次使用get方法）

```
d.get('a', {}).get('j') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-14T19:52:24.427

您可以使用一个字典，而不是嵌套`dict`对象的层次结构，该字典的键是表示通过层次结构的路径的元组。

```
In [34]: d2 = {(x,y):d[x][y] for x in d for y in d[x]}

In [35]: d2
Out[35]:
{('a', 'j'): 1,
 ('a', 'k'): 2,
 ('b', 'j'): 2,
 ('b', 'k'): 3,
 ('d', 'j'): 1,
 ('d', 'k'): 3}

In [36]: timeit [d[x][y] for x,y in d2.keys()]
100000 loops, best of 3: 2.37 us per loop

In [37]: timeit [d2[x] for x in d2.keys()]
100000 loops, best of 3: 2.03 us per loop 
```

以这种方式访问​​看起来要快 15% 左右。您仍然可以使用`get`具有默认值的方法：

```
In [38]: d2.get(('c','j'),'NA')
Out[38]: 'NA' 
```

# c# - 泛型继承和类型转换

> ID：16003415
> 
> 赞同：0
> 
> 时间：2013-04-14T19:35:39.247
> 
> 标签：c#, generics

所以我试图将一些 WPF 视图/视图模型抽象为分离的可重用对象。现在我被困在这样一种方式中，我什至不确定下一步该尝试什么。我希望有人可以帮助我的大脑解锁。

这是一个简化的示例和错误

```
 public interface IBasicListDto{}

    public interface IBasicListVm<T> where T : IBasicListDto
    {
        void DoSomthing();
    }  

    public class BasicListVm<T> : IBasicListVm<T> where T : IBasicListDto
    {
        public void DoSomthing()
        {
            Console.WriteLine("woohoo!!");
        }
    }

   public class MyBasicListDto : IBasicListDto{}

   public class MyBasicListVm<T> : BasicListVm<T> where T : MyBasicListDto {}

   private void Button_Click(object sender, RoutedEventArgs e)
   {
        IBasicListVm<IBasicListDto> vm = (IBasicListVm<IBasicListDto>)new MyBasicListVm<MyBasicListDto>();
        vm.DoSomthing();
    } 
```

我在 Button_Click 方法的第一行收到以下运行时错误。

System.InvalidCastException 未处理 HResult=-2147467262 消息=无法转换类型为“MyBasicListVm `1[testGenericInheritance.MainWindow+MyBasicListDto]' to type 'IBasicListVm`1[testGenericInheritance.MainWindow+IBasicListDto]”的对象。来源=testGenericInheritance StackTrace：

我见过一些类似的问题/答案，但我的大脑还没有“明白”到足以做出必要的改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:47:48.560

You can make `IBasicListVm<T>` covariant:

```
public interface IBasicListVm<out T> where T : IBasicListDto
{
    void DoSomthing();
} 
```

# java - 比较对象类型

> ID：16003416
> 
> 赞同：3
> 
> 时间：2013-04-14T19:35:39.933
> 
> 标签：java, types

我不知道如何对 newEntry 执行类型检查，我想确保它是 MyTable 类型（不创建 MyTable 对象）。

```
public static boolean add(String table, Object newEntry)
{
    boolean result; 
    if (table.equals("MyTable") && newEntry.getClass() == MyTable.getClass())
    {
         ...
    }   
} 
```

我的问题是：

```
newEntry.getClass() == MyTable.getClass(). 
```

注意：MyTable 是一个类名，而不是一个对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T19:38:21.520

基本上你想要的是：

> isAssignableFrom

看看：[http ://www.ralfebert.de/blog/java/isassignablefrom/](http://www.ralfebert.de/blog/java/isassignablefrom/)

所以，在你的情况下，你想要：

> MyTable.class.isAssignableFrom(newEntry.getClass())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T19:40:13.983

使用[**instanceof**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.2)运算符 .. 更多文档请参阅 JLS

检查这个著名的答案[instanceof 和 Class.isAssignableFrom(...) 有什么区别？](https://stackoverflow.com/questions/496928/what-is-the-difference-between-instanceof-and-class-isassignablefrom)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T19:40:01.937

`instanceof`是你的朋友：

```
if (table.equals("MyTable") && newEntry instanceof MyTable) 
```

它实际上是该`isAssignableFrom`方法的简写，但输入起来更容易:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T19:40:02.327

与 比较[`instanceof`](https://stackoverflow.com/questions/7313559/what-is-the-instanceof-operator-used-for)。

```
if (newEntry instanceof MyTable) {
    // do something
  } 
```

在此示例中，如果`newEntry`是 的实例`MyTable`，或者如果`newEntry`是 的超类的实例，则条件为真`MyTable`。

将您的语句更改为此以使其正常工作：

```
if (table.equals("MyTable") && newEntry instanceof MyTable) 
```

* * *

你也可以`isAssignableFrom()`用来比较它们。您可能想要这样做的原因是`instanceof`，在编译程序之前，您必须知道要比较的类。使用`isAssignableFrom()`，您可以在运行时更改要比较的类。

```
if (table.equals("MyTable") && MyTable.class.isAssignableFrom(newEntry.getClass())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T19:37:51.680

您可以使用`MyTable.class`来检索类名。

# java - 谷歌地图片段活动

> ID：16003419
> 
> 赞同：1
> 
> 时间：2013-04-14T19:35:50.937
> 
> 标签：java, android, google-maps

我真的很抱歉问这样一个平淡而愚蠢的问题，但我在尝试将 Google 地图项目库加载到我的项目资源中时遇到了最大的挫折。

我已经从 SDK 下载了获取 Google 地图所需的所有工具和必需品。

但是，每当我尝试加载 Google 地图库时，都会出现**2 个**错误。

首先是由于某种原因**，**

> `FragmentActivity`缺少已知的类。我不知道它是什么或在哪里可以找到它以使 Android 项目顺利进行。

第二**个**明显的问题是控制台发出以下消息：

> “google_maps] 无法解析目标‘android-16’”

虽然我对这意味着什么有一个相当强烈的想法，但我不太清楚如何排除故障，以便将库构建到所需的 API 级别。

我很抱歉，因为我是 Android 新手并且非常喜欢这个平台，但这个平台真的让我目瞪口呆。任何和所有信息和建议总是最受赞赏。

谢谢，再一次，很抱歉问了这么愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:40:48.717

那么第一个问题：

`FragmentActivity` 是`google-support-v4`库的一部分，专为`SDK < 11`为支持片段而开发的应用程序而设计。所以你没有将这个库的引用添加到你的项目中。

通过阅读我在 Google Map API V2 上写的这篇博文，您可以更好地了解需要进行的导入以及如何进行导入：

[谷歌地图 API V2 指南](http://blog-emildesign.rhcloud.com/?p=435)

关于您的第二个问题，您可能试图针对未从 下载的 API 级别运行此项目`SDK Manager`，您有两个选择：

1.  从`SDK Manager`.

2.  右键单击您的项目 -> 属性 -> Android -> 将项目构建目标更改为您已下载其 API 级别的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:44:17.657

试试这个答案，[Generate Google Map key for android - step by step](https://stackoverflow.com/questions/15398159/generate-google-map-key-for-android-step-by-step)。

或者看看这个非常有用的分步[教程](https://blog-emildesign.rhcloud.com/?p=435)。我用地图的东西挣扎了 3 天，但那个教程让我明白了。

# c# - 了解 IDisposable

> ID：16003425
> 
> 赞同：2
> 
> 时间：2013-04-14T19:36:13.363
> 
> 标签：c#, .net, idisposable

我有一个有`DbConnection`变量的类。在类构造函数中，我为其分配了一个新`DbConnection`实例。既然它是一个`IDisposable`，我应该在我班级的析构函数（或其他地方）对它做些什么吗？
我知道如果使用它是一段代码，我应该将它包装在一个`using`块中，我不知道为什么，但在这里我将它分配一次并将它用于我的班级的所有调用。

如果有什么不同，我使用的是 C# 4.0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:40:27.150

> 既然它是一个 IDisposable，我应该在我班级的析构函数（或其他地方）用它做点什么吗？

不，通常您不会*有终结器/析构函数 -*[现代 .NET 几乎不需要](http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=86c71425-57bc-4fcb-b34b-3262812f12cf)它们。

但是，您的类*应该*实现`IDisposable`并在那里处理数据库连接。这样，您基本上将处置的责任转嫁给了创建您的类的实例的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:39:28.967

所有处理非托管资源的类都实现`IDisposable`. 这样，您可以确保非托管资源在使用`using() {}`或调用- 方法后被释放`Dispose`。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable%28v=vs.110%29.aspx)

```
IDisposable Interface - Defines a method to release allocated resources. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:41:54.033

这篇文章可能会有所帮助 -[实现 Dispose 方法](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)

基本上，实现`IDisposable`的类依赖于一些资源，这些资源在不再需要时需要被炒掉。在您的情况下，这是与数据库的连接。始终保持连接打开是不明智的。如果您在块内使用它`using`- 它将在块的末尾处理对象（它是`try finally`构造的语法糖）。如果您将其作为对象字段/属性 - 最好的想法是让您的班级也实现`IDisposable`并确保您班级的用户正确处理它。

旁注 - 您可以在终结器中处理您的对象，但对于正常的工作流程，强烈建议不要这样做，所以请不要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:50:00.463

使用“使用”代码块围绕您的 dbconnection 自动处理任何打开的连接

```
using(sqlConnection conn=new SqlConnection(connectionstring)){
//rest of the code here
} 
```

# c# - Xna studio 4\. 像素绘图

> ID：16003426
> 
> 赞同：0
> 
> 时间：2013-04-14T19:36:19.937
> 
> 标签：c#, xna

1）嘿。我需要像素方面的帮助...如何在绘制功能中以更少的延迟绘制像素？当我画它们时，我的处理器使用率为 40%，这太多了。

```
protected override void Draw(GameTime gameTime)
        {
                spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
                spriteBatch.Draw(grasspixel, screenpos, Color.Red);
                GraphicsDevice.Clear(Color.CornflowerBlue);
                DrawGround(spriteBatch, 1024, 768, screenpos, grasspixel);
                spriteBatch.End();

                base.Draw(gameTime);            
        } 
```

这是 DrawGround 函数：

```
public void DrawGround(SpriteBatch spriteBatch, int screen_X, int screen_Y, Vector2 screenPosition, Texture2D texture)
        {
            Vector2 tempVector = Vector2.Zero;
            for (int i = 1; i <= screen_X; i++)
            {
                for (int j = 1; j <= screen_Y; j++)
                {
                    if (earth[i, j] == 1)
                    {
                        tempVector.X = i;
                        tempVector.Y = j;
                        spriteBatch.Draw(texture, tempVector, Color.Blue);
                    }
                }
            }
        } 
```

在 DrawGround 中，我从数组中获取像素位置，然后将它们返回给 Vector2。

2）我需要每帧都画我的地图吗？

是否有特殊的缓冲区或类似的东西来做到这一点？对不起，如果我问一些愚蠢的问题，但我是 XNA 的新手。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:14:53.537

问题是您每帧绘制**786432** (1024*768) 个精灵。每个精灵由 2 个三角形组成，需要拉伸和定位，不要忘记所有的纹理采样。SpriteBatch 很快，但没那么快。

通常你会在更大的区域上绘制你的草纹理，使用大小超过 1*1 像素的精灵。为屏幕上的每个像素绘制一个精灵确实违背了它的全部目的。

因此，将图像编辑程序中的草像素组合到纹理中，并使用一些大型精灵来绘制地面。这应该会使您的 FPS 达到合理的速度。

* * *

如果您*确实*需要基于每个像素将数据写入纹理，请使用该[`Texture2D.SetData`](http://msdn.microsoft.com/en-us//library/microsoft.xna.framework.graphics.texture2d.setdata.aspx)方法。

# java - Cassandra-Cli 拒绝连接

> ID：16003428
> 
> 赞同：0
> 
> 时间：2013-04-14T19:36:26.483
> 
> 标签：java, connection, cassandra, cassandra-0.7

我正在尝试连接到 cassandra。我安装了最新的稳定版本 apache-cassandra-1.2.4 并将其解压缩到我的桌面上。当我运行 cassandra 时，它会很好地监听 thrift 客户端并显示以下内容：

须藤卡桑德拉-f

日志 ：

```
 INFO 15:30:34,646 Cassandra version: 1.0.12
 INFO 15:30:34,646 Thrift API version: 19.20.0
 INFO 15:30:34,646 Loading persisted ring state
 INFO 15:30:34,650 Starting up server gossip
 INFO 15:30:34,661 Enqueuing flush of Memtable-LocationInfo@1117603949(29/36 serialized/live bytes, 1 ops)
 INFO 15:30:34,661 Writing Memtable-LocationInfo@1117603949(29/36 serialized/live bytes, 1 ops)
 INFO 15:30:34,877 Completed flushing /var/lib/cassandra/data/system/LocationInfo-hd-54-Data.db (80 bytes)
 INFO 15:30:34,892 Starting Messaging Service on port 7000
 INFO 15:30:34,901 Using saved token 143186062733850112297005303551620336860
 INFO 15:30:34,903 Enqueuing flush of Memtable-LocationInfo@1282534304(53/66 serialized/live bytes, 2 ops)
 INFO 15:30:34,904 Writing Memtable-LocationInfo@1282534304(53/66 serialized/live bytes, 2 ops)
 INFO 15:30:35,102 Completed flushing /var/lib/cassandra/data/system/LocationInfo-hd-55-Data.db (163 bytes)
 INFO 15:30:35,106 Node localhost/127.0.0.1 state jump to normal
 INFO 15:30:35,107 Bootstrap/Replace/Move completed! Now serving reads.
 INFO 15:30:35,108 Will not load MX4J, mx4j-tools.jar is not in the classpath
 INFO 15:30:35,150 Binding thrift service to localhost/127.0.0.1:9160
 INFO 15:30:35,155 Using TFastFramedTransport with a max frame size of 15728640 bytes.
 INFO 15:30:35,160 Using synchronous/threadpool thrift server on localhost/127.0.0.1 : 9160
 INFO 15:30:35,168 Listening for thrift clients... 
```

现在当我运行：cassandra-cli -h localhost -p 9160 时，它会抛出错误。我检查了端口是否空闲，并且 cassandra 正在监听该端口。：

**

```
org.apache.thrift.transport.TTransportException: java.net.ConnectException: Connection refused
    at org.apache.thrift.transport.TSocket.open(TSocket.java:183)
    at org.apache.thrift.transport.TFramedTransport.open(TFramedTransport.java:81)
    at org.apache.cassandra.cli.CliMain.connect(CliMain.java:80)
    at org.apache.cassandra.cli.CliMain.main(CliMain.java:256)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at org.apache.thrift.transport.TSocket.open(TSocket.java:178)
    ... 3 more
Exception connecting to localhost/9160\. Reason: Connection refused. 
```

**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-04T09:38:57.197

我有同样的错误。现在，没关系。

主要问题是配置错误。

我的配置如下：

我的视觉机器ip是192.168.11.11。我的cassandra安装到机器上。所以，我配置thar

```
listen_address: 192.168.11.11
rpc_address: 0.0.0.0
broadcast_rpc_address: 192.168.11.11 
```

没关系。</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T23:26:42.737

cassandra-stress 的文档似乎很粗略。也许在适当的时候会得到纠正。截至目前，这个命令对我有用

```
./cassandra-stress write -node <IP_OF_NODE1> 
```

一旦这工作，我们可以尝试输入其他可选参数来调整我们的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T08:37:56.957

**选项1：**

```
Run jps command under root user and kill CassandraDaemon if you will see it. After this you will start Cassandra again. 
```

**选项2：**

```
Try to connect Cassandra with CQL 
  ./cqlsh 10.234.31.232 9042 
```

**最终检查：**

```
An intermediate firewall is blocking the JVM from making the connection. 
An operating system firewall, or antivirus that is causing the problems as well. 
```

我认为您安装在 Windows 中，并且看起来防火墙阻止了您的连接。

# android - Android Activity 生命周期与进程生命周期

> ID：16003433
> 
> 赞同：0
> 
> 时间：2013-04-14T19:37:02.153
> 
> 标签：android, android-4.2-jelly-bean

在使用 NDK 将近一年之后，我开始意识到 Android 中的 Process 生命周期与 Activity 生命周期不同。

更具体地说，我的本机库是在 OnCreate 中加载的，但在 onDestroy 中并没有卸载（我什至不知道您是否可以在这里卸载本机库），但是在下一次 OnCreate 时，它​​仍然是相同的过程，所以所有我的本地库中的全局变量仍然存在，并且它们的状态被保留。Java 中的静态变量也是如此。

这对 Android 2.3 来说非常好，但我最近进入了 Android 4.2.2，我注意到一些非常奇怪的东西。现在可以杀死进程并且只调用 onRestart() 的活动（或者这是我从阅读日志中假设的），老实说这有点奇怪，因为我假设 onCreate 会在进程结束后立即被调用实例化，但他保留不同的选项卡，因为他在“活动”中思考，而不是在进程中思考。所以基本上如果我暂停我的一个应用程序很长一段时间（比如 1 个多小时）然后我返回它，它通常会导致崩溃。

设备日志摘录：

```
04-14 04:41:34.886  2376  2376 I am_on_paused_called: [0,com.re3.benchmark.AboutActivity]
04-14 05:06:26.128   386   594 I am_proc_died: [0,2376,com.re3.benchmark]
04-14 13:19:44.256   386   538 I am_proc_start:[0,4761,10062,com.re3.benchmark,activity,com.re3.benchmark/.AboutActivity]
04-14 13:19:44.295   386   595 I am_proc_bound: [0,4761,com.re3.benchmark]
04-14 13:19:44.397   386   595 I configuration_changed: 5248
04-14 13:19:44.459   386   595 I am_restart_activity: [0,1115347592,8,com.re3.benchmark/.AboutActivity]
04-14 13:19:44.701  4761  4761 I am_on_resume_called: [0,com.re3.benchmark.AboutActivity]
04-14 13:19:44.881   386   401 I am_activity_launch_time: [0,1115347592,com.re3.benchmark/.AboutActivity,631,631]
04-14 13:19:52.725   386   595 I am_crash: [4761,0,com.re3.benchmark,8961606,java.lang.NullPointerException,NULL,REFramework.java,330]
04-14 13:19:52.725   386   595 I am_finish_activity: [0,1115347592,8,com.re3.benchmark/.AboutActivity,crashed]
04-14 13:19:52.772   386   595 I am_pause_activity: [0,1115347592,com.re3.benchmark/.AboutActivity] 
```

PS：我确实意识到崩溃源于我的代码，但是我的代码并没有真正处理 onRestart 是整个过程中要调用的第一个函数（例如，它绕过了我的本机库初始化，因为我希望首先调用 onCreate ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:01:04.530

您可能应该加载本机库`Application.onCreate`而不是`Activity`.

如果您有多个 1 `Activity`，则仅创建当前可见的，并且如果您在 first 中加载 lib ，此时`Activity`您将不会加载它。

# ios - 核心数据与 NSFileManager

> ID：16003434
> 
> 赞同：9
> 
> 时间：2013-04-14T19:37:28.673
> 
> 标签：ios, objective-c, core-data, nsfilemanager

**问题：**

我已经使用我自己的缓存系统一段时间了`NSFileManager`。通常我收到的数据是 JSON，我只是将字典直接保存到缓存中（在文档文件夹中）。当我需要它时，我会去拿它。有时当我觉得更好时，我还会`NSDictionary`在根文件夹上实现一个给定资源路径的键/值。例如：

关于日内瓦 17/02/2013 天气的资源，所以我会有一个名为 GE_17_02_2013 的键和`NSDictionary`带有信息的路径的值。

通常我不需要做任何复杂的查询。但是，不知何故，根据我一直在阅读的内容，当您拥有大量数据时，您应该坚持使用 Core Data。就我而言，我通常有很多数据，但我从来没有真正感觉到应用程序出现故障，或者在性能方面受到影响。所以我的问题是：

1.  在这种情况下，有时（天气只是一个例子）我需要删除所有数据（例如 Twitter 提要）并用全新的数据流替换它，Core Data 值得吗？我认为删除所有数据并插入（填充）它比仅存储`NSDictionary`和替换旧数据要重。

2.  有时它会包含图像、文本文件等，并且 `NSFileManager`做得很完美，那么 Core Data 在这种情况下可以带来什么优势呢？

**PS：**我刚刚看到[这篇](http://biasedbit.com/filesystem-vs-coredata-image-cache/)文章，提出了这种问题，并且数字证明了哪个实际上更快。不过，我也想要一个经验性的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:01:11.073

Core Data 值得在您描述的每个场景中使用。事实上，如果一个应用程序存储的不仅仅是首选项，你可能应该使用 Core Data。以下是一些原因，其中，您会找到自己问题的答案：

*   绝对比文件系统快，即使您清除所有内容并按照您的描述重新编写它（因此您不会从缓存中受益匪浅）。这基本上是因为您可以合并您的操作并仅在需要时访问商店。所以如果你读、写、读，你只能保存一次，其余的都在内存中完成，这不用说，非常快。
*   一切都是版本化的，您可以轻松地从一个版本迁移到另一个版本（同时保留用户在设备上的内容）
*   80% 的模型操作都是免费的。就像，当某些事情发生变化时，您可以覆盖`willSave`托管对象方法并通知您的控制器。
*   using`cascade`使得删除甚至非常复杂的对象结构变得微不足道
*   虽然将图像保留在数据库中是一个坏主意，但您仍然可以将它们保留在文件系统中，并在删除代表它们的托管对象时让核心数据自动删除它们
*   是灵活的，实际上非常灵活，您可以通过编写自定义数据存储将您的项目从使用本地文件系统迁移到使用服务器而只需很少修改。
*   核心数据设计器基本上为您创建模型对象。您不需要创建自己的模型类（如果使用文件系统，则必须这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:44:49.817

> 在这种情况下...... Core Data 值得吗？

是的，在某种程度上，您需要比尝试制定自己的文件系统架构更集中管理的东西。Core Data 及其低级表亲 SQL 仍然是我们目前拥有的持久性的最佳选择。此外，使用`NSKeyed(Un)Archiver`更大的数据集一次又一次地对字典进行序列化/反序列化的性能影响变得越来越明显。

> 我认为删除所有数据并插入（填充）它比仅存储 NSDictionary 并替换旧的要重。

绝对没错。但是，您不必像那样考虑缓存周转率。如果您将 Core Data 想象为一个静态模型，您可以使用缓存层将数据传输进出存储。需要有关天气的资源吗？检查缓存层。如果它不在那里，让缓存运行一个获取请求。需要翻转整个缓存？让缓存自己清空，然后运行一个请求，用某种标志标记每个实体，以表明它们是无效的。当您看到所有新数据都已安全地保存在缓存中时，您担心的代价高昂的删除可以通过后台进程完成。

> 有时它会包含图像、文本文件等，而 NSFileManager 可以完美地做到这一点，那么 Core Data 在这种情况下可以带来什么优势呢？

不幸的是，并不多。对于数据块（Core Data 在这些情况下本质上就是这样做的），存储和从 Core Data 读取数据很快就会变得昂贵。如果它们没有被压缩，它们也会在磁盘上占用明显更大的空间（这会进一步降低性能）。如果您需要更快的替代方案，请使用更适合任务的存储，例如[Tokyo Cabinet](http://fallabs.com/tokyocabinet/)或[LevelDB](https://code.google.com/p/leveldb/)，并使用 Core Data 存储中的实体作为一种替代品，例如，将资源的密钥包含在一个那些关系数据库。

# ios - 如何创建黑色 UIImage？

> ID：16003436
> 
> 赞同：9
> 
> 时间：2013-04-14T19:37:41.517
> 
> 标签：ios, objective-c, cocoa-touch

我四处张望，但我找不到办法做到这一点。我需要创建一个具有一定宽度和高度的黑色 UIImage（宽度和高度会发生变化，所以我不能只创建一个黑盒子然后将其加载到 UIImage 中）。有什么方法可以制作 CGRect 然后将其转换为 UIImage 吗？还是有其他方法可以制作一个简单的黑匣子？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-14T19:46:42.260

根据您的情况，您可能只使用 a`UIView`并将其`backgroundColor`设置为`[UIColor blackColor]`。此外，如果图像是纯色的，则您不需要实际上是您想要显示它的尺寸的图像；您可以缩放 1x1 像素图像以填充必要的空间（例如，通过将`contentMode`a设置`UIImageView`为`UIViewContentModeScaleToFill`）。

话虽如此，看看如何实际生成这样的图像可能是有益的：

## Objective-C

```
CGSize imageSize = CGSizeMake(64, 64);
UIColor *fillColor = [UIColor blackColor];
UIGraphicsBeginImageContextWithOptions(imageSize, YES, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
[fillColor setFill];
CGContextFillRect(context, CGRectMake(0, 0, imageSize.width, imageSize.height));
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

## 迅速

```
let imageSize = CGSize(width: 420, height: 120)
let color: UIColor = .black
UIGraphicsBeginImageContextWithOptions(imageSize, true, 0)
let context = UIGraphicsGetCurrentContext()!
color.setFill()
context.fill(CGRect(x: 0, y: 0, width: imageSize.width, height: imageSize.height))
let image: UIImage = UIGraphicsGetImageFromCurrentImageContext()!
UIGraphicsEndImageContext() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T19:47:50.650

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(w,h), NO, 0);
UIBezierPath* p =
    [UIBezierPath bezierPathWithRect:CGRectMake(0,0,w,h)];
[[UIColor blackColor] setFill];
[p fill];
UIImage* im = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

现在`im`是图像。

该代码与我书中的这一部分几乎没有变化：[http ://www.aeth.com/iOSBook/ch15.html#_graphics_contexts](http://www.apeth.com/iOSBook/ch15.html#_graphics_contexts)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-13T23:00:02.930

斯威夫特 3：

```
func uiImage(from color:UIColor?, size:CGSize) -> UIImage? {

    UIGraphicsBeginImageContextWithOptions(size, true, 0)
    defer {
        UIGraphicsEndImageContext()
    }

    let context = UIGraphicsGetCurrentContext()
    color?.setFill()
    context?.fill(CGRect.init(x: 0, y: 0, width: size.width, height: size.height))
    return UIGraphicsGetImageFromCurrentImageContext()
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-21T12:55:17.793

像这样

```
let image = UIGraphicsImageRenderer(size: bounds.size).image { _ in
      UIColor.black.setFill()
      UIRectFill(bounds)
} 
```

正如[这个 WWDC 视频中所引用的那样](https://developer.apple.com/videos/play/wwdc2018/219/)

> 还有另一个较旧的功能。UIGraphicsBeginImageContext。但请不要使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T05:17:56.453

下面是一个示例，它通过从 CIImage 创建的 CGImage 创建一个 1920x1080 的黑色 UIImage：

```
let frame = CGRect(origin: CGPoint(x: 0, y: 0), size: CGSize(width: 1920, height: 1080))
let cgImage = CIContext().createCGImage(CIImage(color: .black()), from: frame)!
let uiImage = UIImage(cgImage: cgImage) 
```

# android - RTSP、RTCP 和 RTP 端口号

> ID：16003442
> 
> 赞同：4
> 
> 时间：2013-04-14T19:37:57.377
> 
> 标签：android, rtsp, rtp, portforwarding, rtcp

我试图了解 spydroid ( [https://code.google.com/p/spydroid-ipcamera/](https://code.google.com/p/spydroid-ipcamera/) ) 的工作原理，以便我可以为我的手机编写一个类似的应用程序。基于 spydroid 这里是我对 RTSP、RTCP 和 RTP 的理解。

RTSP 在指定端口上运行并设置所有内容。

RTCP 可以在任何端口上运行。有一个客户端端口和一个服务器端口。这是 RTP 的控制流程

RTP 可以在任何端口上运行。有一个客户端端口和一个服务器端口。这包含音频和视频的流。这令人困惑，因为它似乎实际上并没有在此端口上发送音频和视频。在 spydroid 中，它在端口 5006 上发送视频，在 5004 上发送音频。

Spydroid 正在通过 RTSP 发送此消息以确认端口... 传输：RTP/AVP/UDP;unicast;destination=123.456.789.00;client_port=65234-65235;server_port=44580-44581;ssrc=ba98a863;mode=play

我认为这是在说客户端（在我的情况下为 VLC）正在使用 UDP 监听 65234 用于 RTP 和 65235 用于 RTCP 消息。spydroid 也在 44580 上监听 RTP 和 44581 上 RTCP。这是正确的吗？

现在在 RTSP 的 DESCRIBE 序列中，spydroid 告诉客户端 m=video 5006 RTP/AVP 96 我认为这是说它将通过 UDP 通过端口 5006 发送视频。

我在上面的句子中所说的一切听起来正确吗？

我真正想知道的是如何将此信息转发到正确的端口。客户端端口由 VLC 自动分配。我尝试运行此命令... vlc "rtsp://192.168.1.104:8086" --rtp-client-port=58866 但 VLC 似乎忽略它并选择它自己的端口。所以我转发了 8086、5004 和 5006 端口，但我不知道要为 RTP 和 RTCP 连接转发哪个端口，因为它每次都在变化。我可以完成这项工作的唯一方法是将所有端口转发到我的计算机。（我有一个 linksys 路由器，它有一个 DMZ 选项）但这是一个糟糕的解决方案。有人可以指导我正确的方向。

另外，很高兴知道我正在这样做，因为我通过 Internet 上的外部 IP 地址发送所有内容。spydroid 旨在用于局域网。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T14:50:51.393

根据 SDP 标准...

实际上它表示源端口。

端口（范围）仅指示将发送媒体的位置。

例如，如果您的源在 5006 上发送，但它通过 10002 路由，这就是 rtsp 通过传输标头提供帮助的地方。

源端口实际上可能是 5006，但是位于 LAN 内部某处的中间路由器或防火墙接收到数据包并通过另一个端口和地址发送它。

大多数软件不会自动了解您的网络设置，因此如果不修改 sdp 以供外部网络使用，它实际上无法在您的网络地址空间之外的任何地方使用。

如果您需要端口来匹配它，您只需手动配置您的套接字和软件。（例如多播或其他原因，该端口（范围）需要与 rtsp 传输标头中的内容不同，但如果是……那么现在您了解如何以及为什么。

Live 555 和其他一些发送探测数据包，如果该数据包通过 icmp 返回，则源端口重置为 0，以便可以发现它，请注意，如果未正确完成，这可能与来自主机的现有流量冲突。

QuickTime 和 vlc 实际上搞砸了（大多数人都这样做），并且当使用 0 并且 ffmpeg 和 lav 不支持媒体端口中的正确范围时，允许从同一主机的任何端口直接注入解码器。

仔细想想，如果端口号是 1 或 65536 或 * 或 -7 会怎样？

不应该也处理吗？

如果范围是 * 或 - 或其他怎么办？

请记住，仅仅因为一个值不存在并不意味着您不能根据需要对现有信息做正确的事情，即使收到的数据不符合预期或指示一个不应使用的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T07:10:58.377

我不知道 RTSP 是如何工作的以及如何配置 VLC，但我对 RTP 有所了解。我猜客户端端口意味着 spydroid 将发送数据包的位置，而服务器端口将用作源端口。所以在 UDP 级别，RTP 数据包看起来像：

| SRC_PORT=44580 | DST_PORT=65234 | ... RTP_PACKET |

Next : m=video 5006 RTP/AVP 96 根据 SDP 标准，5006 是 spydroid 监听传入 RTP 数据包的端口（不知道为什么），RTP 有效负载类型为 96。

因此，检查是否让 VLC 监听端口 65234 并将 {44580, 65234} 数据包转发到您的 PC 工作。您提供的信息有点混乱，似乎自相矛盾。因此，不能基于此得出任何具体的结论。

# asp.net - 使用 DataFormatString 为 DBNull 值显示 $0.00

> ID：16003447
> 
> 赞同：1
> 
> 时间：2013-04-14T19:38:22.193
> 
> 标签：asp.net, string-formatting, detailsview

我正在使用 DataFormatString 将价格绑定字段转换为货币格式，方法是使用 DataFormatString="{0:c}" 作为我的详细信息视图。

但是，似乎数据库中的值为空白或 null，而不是仅在我的详细信息视图中显示空白，DataFormatString 使其显示为 0.00 美元。我试图设置 NullDisplayText="" 但它似乎不起作用。

任何想法如何做到这一点？我需要改用 ItemTemplate 吗？

这就是我在 .aspx 中获取数据的方式

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:TestString %>" 
    SelectCommand="SELECT [Price] FROM [DataBase] WHERE ([ID] = @ID)"> 
```

这是绑定数据的代码：

```
 <asp:BoundField DataField="Price" HeaderText="Price:" SortExpression="Price" 
            DataFormatString="{0:c}" NullDisplayText="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T21:18:13.033

代码隐藏中的类似内容 - 考虑为您的数据网格查找并使用 Databind 事件以使其更容易：

```
If (value is DBNull) return "" else return FormattedValue(value) 
```

这可能不是你想要的，但它正是你想要的；您只需要使用 DataGrid 的 ItemDataBound 事件即可使用它。随心所欲地返回非空值；为了清楚起见，我使用了 FormattedValue。

# driver - ndisproto 示例未读取任何流量

> ID：16003449
> 
> 赞同：0
> 
> 时间：2013-04-14T19:38:26.113
> 
> 标签：driver, windows-7-x64, ethernet, ndis

我试图熟悉 wdk 中的 ndisproto 样本。根据文档，该`-r -n 10`选项应该从接口读取 10 个数据包，但即使我 ping 到接口也没有任何结果！它读取流量的唯一时间是我们使用写入选项时。

样例是一样的，除了改成 外没有任何修改`#define NPROTO_PACKET_FILTER (NDIS_PACKET_TYPE_ALL_LOCAL|NDIS_PACKET_TYPE_PROMISCUOUS)`。

驱动程序是否真的可以读取来自其他来源的流量？

我错过了什么？知道如何使用 ndisproto 读取/嗅探流量吗？

```
C:\Users\Administrator\Desktop\ndisprot>prottest.exe -r -n 10 \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8}
 Option: NumberOfPackets = 10
Trying to access NDIS Device: \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8}
Opened device \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8} successfully!
Trying to get src mac address
GetSrcMac: IoControl success, BytesReturned = 14
Got local MAC: 00:0c:29:23:b1:09
DoReadProc

C:\Users\Administrator\Desktop\ndisprot>prottest.exe -w -n 1 \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8}
 Option: NumberOfPackets = 1
Trying to access NDIS Device: \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8}
Opened device \DEVICE\{17152850-6288-471A-9708-2889E7F55EE8} successfully!
Trying to get src mac address
GetSrcMac: IoControl success, BytesReturned = 14
Got local MAC: 00:0c:29:23:b1:09
DoWriteProc
DoWriteProc: sent 100 bytes
DoWriteProc: finished sending 1 packets of 100 bytes each
DoReadProc
DoReadProc: read pkt # 1, 100 bytes
DoReadProc finished: read 1 packets 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:04:43.837

终于得到了答案。原因是，驱动程序示例专门设计用于发送/接收`EAP over LAN`帧，而不是全部。有几个中断语句`NdisprotReceiveNetBufferLists`可以防止除帧之外的任何其他数据包`ethertype` `0x888E`到达客户端应用程序。

发送的情况也是如此。

# ios - 没有可见的可达性@interface 声明选择器 startNotifier

> ID：16003457
> 
> 赞同：0
> 
> 时间：2013-04-14T19:39:18.653
> 
> 标签：ios, reachability

我收到此错误：没有可见的@interface 可访问性声明选择器 startNotifier

我已经包含了 Reachability.h 和 .m 文件。我对 Objective-C 非常陌生，错误可能真的很小！但任何帮助都会很棒！

我的 helloworldViewController.m

```
#import "helloworldViewController.h"
#import "Reachability.h"
#import <SystemConfiguration/SystemConfiguration.h>

@interface helloworldViewController ()

@end

@implementation helloworldViewController
@synthesize networkstatus;
@synthesize reach;

#pragma mark Reachability changed

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        // Check network
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];
    self.reach = [Reachability reachabilityWithHostName:@"www.apple.com"];
    [self.reach startNotifer];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)reachabilityChanged:(NSNotification*)note
{
    Reachability* r = [note object];
    NetworkStatus ns = r.currentReachabilityStatus;

    if (ns == NotReachable)
    {
        NSString* msg = @"Network problems have rendered the iTunes store inaccessible; please try again later.";
        UIAlertView* av = [[UIAlertView alloc] initWithTitle:nil
                                                     message:msg
                                                    delegate:self
                                           cancelButtonTitle:@"Ok"
                                           otherButtonTitles:nil];
        [av show];
        //[av release];
    }
}

@end 
```

这是我的 helloworldViewController.h

```
#import <UIKit/UIKit.h>
#import "Reachability.h"

@interface helloworldViewController : UIViewController{

    Reachability* reach;
    IBOutlet UILabel *networkstatus;

}
@property(strong,nonatomic) UILabel *networkstatus;
@property (nonatomic, retain) Reachability* reach;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:43:35.527

您拼写错误的方法。更改此行：

```
[self.reach startNotifer]; 
```

至：

```
[self.reach startNotifier]; 
```

由于您是新手，这里还有一些建议：

*   `#import "Reachability.h"`在 .h 文件中替换为`@class Reachability`.
*   摆脱显式 ivars 和显式`@synthesize`行。让编译器为您生成这些。这假设您使用的是最新的编译器/Xcode。
*   你的属性不一致。一个是`strong`，另一个是`retain`。如果您使用 ARC，请同时使用`strong`两者。如果您使用的是 MRC，请同时使用`retain`两者。
*   标准约定是类名以大写字母开头，方法和变量以小写字母开头。两者都应该使用 CamelCase。将您的班级更改为`HelloWorldViewController`. 更改`networkstatus`为`networkStatus`。

# php - 删除平衡支付中的空账户

> ID：16003458
> 
> 赞同：1
> 
> 时间：2013-04-14T19:39:24.850
> 
> 标签：php, rest, balanced-payments

我正在使用 Balanced Payments PHP API 在我们的一个测试市场中工作。另一个 StackOverflow 主题已经回答了我对创建和删除 Marketplaces 的担忧（在 90 天不活动后删除），但我想知道空帐户是否有相同的行为？

在测试中，我已经创建了许多没有银行/抄送信息且没有附加交易的空账户。我希望能够删除这些以减少平衡仪表板上的混乱，但它们似乎不可删除。

这些帐户会自动删除自己还是有其他方法可以删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:57:16.167

您目前无法删除帐户，但如果您担心混乱，您可以创建任意数量的新测试市场。

[在https://github.com/balanced/balanced-api/issues/29](https://github.com/balanced/balanced-api/issues/29)有一些关于允许删除各种资源的讨论

# rotation - 了解四元数和轴角表示

> ID：16003463
> 
> 赞同：0
> 
> 时间：2013-04-14T19:39:39.790
> 
> 标签：rotation, quaternions

我有一个传感器，可以给我一个四元数。[我使用http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/)将四元数转换为轴角表示。当我将传感器放在平坦的表面上并旋转压在平坦表面上的传感器时，我预计轴是相同的并且角度会在 0-360 度之间变化 - 但这不会发生（轴变化很大）。任何想法为什么？也许我不明白轴角表示？

# jsp - 如何根据用户按下的按钮在 SpringMVC 中启用不同的“POST”页面类型？

> ID：16003465
> 
> 赞同：0
> 
> 时间：2013-04-14T19:39:43.880
> 
> 标签：jsp, spring-mvc, http-post

我的问题可能措辞不佳，所以这里有一些代码。

在我的控制器中，我有以下代码：

```
@RequestMapping(value = "addGoal", method = RequestMethod.POST)
public String updateGoal(@Valid @ModelAttribute("goal") Goal goal, BindingResult result) {

    System.out.println("result has errors: " + result.hasErrors());

    System.out.println("Goal set: " + goal.getMinutes());

    if(result.hasErrors()) {
        return "addGoal";
    } else {
        goalService.save(goal);
    }

    return "redirect:index.jsp";
} 
```

这表示（据我所知），如果用户向页面发送 HTTP`POST`请求`addGoal.jsp`：创建 Goal 对象的实例，并将它们重定向到`index.jsp`.

我的问题是，如何为给定页面设置多个 POST 方法？EG 2 个按钮 - 1 个按钮执行上述`POST`方法，页面上的不同按钮执行不同`POST`方法。

先谢谢了，如果我解释得不好，对不起，还在学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:06:37.437

```
This says (as far as I understand it), if a user sends an HTTP POST request to the addGoal.jsp page 
```

不完全是，用户将 POST 发送到`addGoal`Spring 映射的此方法（），它返回（可能）WEB-INF/jsp/addGoal.jsp 或 /index.jsp

您可以在 jsp 上有多个表单，如果您为每个表单定义不同的映射，则每个表单都发送到不同的方法，示例：

```
@RequestMapping(value = "addGoal", method = RequestMethod.POST)
//addGoal code
@RequestMapping(value = "addFoul", method = RequestMethod.POST)
//addFoul code
@RequestMapping(value = "addSelfGoal", method = RequestMethod.POST)
//addSelfGoal code 
```

并让它们全部返回到`addGoal`，尽管此时您可能希望使用更通用的名称。

# mysql - PyORMish 失去与 Flask 的 MySQL 连接

> ID：16003466
> 
> 赞同：1
> 
> 时间：2013-04-14T19:39:47.200
> 
> 标签：mysql, orm, flask

我有以下模型：

```
class Page(Model):
    _TABLE_NAME = 'page'
    _PRIMARY_FIELD = 'id'
    _SELECT_FIELDS = ('id','title','blurb')
    _COMMIT_FIELDS = ('title','blurb') 
```

在 Flask 中，我有：

```
@app.before_request
def setUp():
    global page
    Model.db_config(databaseConfigDict)
    page = Page(1) 
```

我正在使用 Flask 0.9 和 PyORMish 0.8。

我在 Apache error.log 中看到“MySQL Server Has Gone Away”的几百个请求中有一个。当我使用 SQLite 模型时，这不会发生，只有 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:54:12.893

这*是*MySQLdb 默认配置的一个[已知问题。](https://github.com/mitsuhiko/flask-sqlalchemy/issues/2)

这自[Pyormish 0.9.3](https://pypi.python.org/pypi/pyormish)以来已[修复](https://github.com/webgovernor/pyormish/commit/b3cbe26207cad7423632de253fcf112930220ad3)，我建议升级。从 0.8 开始，几乎所有内容都向后兼容，但已重命名为，因此您需要在代码中检查这些情况。`get_by_field()``get_by_fields()`

简短的回答是：

```
sudo pip install pyormish --upgrade 
```

顺便说一句，感谢您使用 PyORMish！

# html - 将引号放入值属性html

> ID：16003468
> 
> 赞同：0
> 
> 时间：2013-04-14T19:39:54.613
> 
> 标签：html, html-escape-characters

例如给定一个表单输入字段给`<input type="text" value="xxxxx" name="something">` 定一个字符串让我们说`Hello I said "Your my friend" isn't that nice?`

如何安全地输入给定的字符串作为上面输入标签中“xxxxx”的值？

直接替换会导致： `<input type="text" value="Hello I said "Your my friend" isn't that nice?">` 如您所见，最终结果不一致。值现在`Hello I said`有一堆不合适的文本，比另一个字符串，不好。

您如何安全地将未知或潜在不安全字符的字符串输入到这些类型的 HTML 属性中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:40:41.753

使用[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

```
<input type="text" value="Hello I said &quot;Your my friend&quot; isn't that nice?"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:04:46.630

有几种解决方案，您可以选择您喜欢的一种：

技巧： 1\. 您可以简单地使用 ' 字符作为外部引号，并安全地使用 " 字符作为内部文本。`<input type="text" value='this "should work"' name="something">`

正确方法：2.根据HTML字符引用对字符进行编码[HERE](http://www.alanwood.net/demos/ent4_frame.html)

"`<input type="text" value="this &quot;should work&quot;" name="something">`或`<input type="text" value="this &#34;should work&#34;" name="something">`

# android - FacebookOperationCanceledException：无效的应用程序

> ID：16003472
> 
> 赞同：3
> 
> 时间：2013-04-14T19:40:04.747
> 
> 标签：android, facebook-authentication, facebook-access-token

我正在使用 FB SDK3，我的 Android 应用需要获取访问令牌。为此，我创建了以下代码：

```
private static class FacebookConnector implements Session.StatusCallback {

        private static FacebookConnector instance = null;
        private Fragment mFragment;
        private Session session;

        public static FacebookConnector getInctance(Fragment fragment) {
            if (instance == null) {
                instance = new FacebookConnector();
            }
            instance.setFragment(fragment);

            return instance;
        }

        private FacebookConnector() {
        }

        /**
         * Set the fragment that make the fb authentication
         * 
         * @param fragment
         */
        public void setFragment(Fragment fragment) {
            mFragment = fragment;
        }

        /**
         * Connect to facebook
         */
        public void logIn() {
            Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
            session = new Session.Builder(mFragment.getActivity())
                    .setApplicationId("548056975227881")
                    .build();
            session.addCallback(this);
            Session.setActiveSession(session);

            // Login
            if (!session.isOpened() && !session.isClosed()) {
                session.openForRead(new Session.OpenRequest(mFragment).setCallback(this));
            } else {
                Session.openActiveSession(mFragment.getActivity(), true, this);
            }
        }

        /**
         * @return the access token, null if not exist
         */
        public String getToken() {
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(mFragment).setCallback(this));
            }
            String token = session.getAccessToken();
            System.out.println("TOKEN: " + token);
            return token;
        }

        /**
         * Disconnect from facebook
         */
        public void logOut() {
            Session session = Session.getActiveSession();
            if (!session.isClosed()) {
                session.closeAndClearTokenInformation();
            }
        }

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            String token = session.getAccessToken();

            Log.d(state.toString(), "Token: " + token);
            if (exception != null) {
                Log.e("FACEBOOK", exception.getMessage(), exception);
            }
            Log.d("", "-----------------------");
        }

    } 
```

它工作得很好，直到我得到那个例外：

```
4-14 18:32:14.502: E/FACEBOOK(26812): Invalid application MY_APP_ID
04-14 18:32:14.502: E/FACEBOOK(26812): com.facebook.FacebookOperationCanceledException: Invalid application MY_APP_ID
04-14 18:32:14.502: E/FACEBOOK(26812):  at com.facebook.Session.handleAuthorizationResult(Session.java:1043)
04-14 18:32:14.502: E/FACEBOOK(26812):  at com.facebook.Session.onActivityResult(Session.java:543)
04-14 18:32:14.502: E/FACEBOOK(26812):  at com.maccabi.counteat.ui.welcome.WelcomeFragment.onActivityResult(WelcomeFragment.java:121)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.support.v4.app.FragmentActivity.onActivityResult(FragmentActivity.java:161)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.Activity.dispatchActivityResult(Activity.java:3988)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2689)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2735)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.ActivityThread.access$2000(ActivityThread.java:124)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.os.Looper.loop(Looper.java:130)
04-14 18:32:14.502: E/FACEBOOK(26812):  at android.app.ActivityThread.main(ActivityThread.java:3844)
04-14 18:32:14.502: E/FACEBOOK(26812):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 18:32:14.502: E/FACEBOOK(26812):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 18:32:14.502: E/FACEBOOK(26812):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-14 18:32:14.502: E/FACEBOOK(26812):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-14 18:32:14.502: E/FACEBOOK(26812):  at dalvik.system.NativeStart.main(Native Method) 
```

我无法理解会发生什么。我所做的唯一更改是在 FB 端应用程序中添加 Facebook 评论框并使用 WebView 从其他片段访问它。在我看到下[一篇文章](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)之后。我正在我的设备（不是模拟器）上调试我的应用程序。

如果是因为FB单点登录还是其他原因？当我在我的设备上运行我的应用程序时，我如何才能实现这种变化？

# python - 从条目中检索数据

> ID：16003475
> 
> 赞同：0
> 
> 时间：2013-04-14T19:40:15.450
> 
> 标签：python, tkinter

当我点击此脚本中的按钮时，我收到一条错误消息

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1413, in __call__
    return self.func(*args)
 File "grid_layout.py", line 41, in printout
 data = [ { l1.cget("text"): (e1.get(), e2.get()) } for e1,e2,l1 in zip(E1,E2,L1) ]
AttributeError: 'NoneType' object has no attribute 'get' 
```

我在这里做错了什么？

```
from Tkinter import *
import json

root = Tk(  )

E1 = []
E2 = []
E3 = []
L1 = []

Label(root, text="Way Point").grid(row=0, column=0)
Label(root, text="x").grid(row=0, column=1)
Label(root, text="y").grid(row=0, column=2)
Label(root, text="z").grid(row=0, column=3)

for r in range(1,10):
    l1 = Label(root, text="Number%d" % (r),borderwidth=1).grid(row=r, column=0)
    e1 = Entry(root, width=10).grid(row=r, column=1)
    e2 = Entry(root, width=10).grid(row=r, column=2)
    e3 = Entry(root, width=10).grid(row=r, column=3)
    E1.append(e1)
    E2.append(e2)
    E3.append(e3)
    L1.append(l1)

Label(root, text="zone").grid(row=11, column=0)
Label(root, text="x").grid(row=11, column=1)
Label(root, text="y").grid(row=11, column=2)
Label(root, text="z").grid(row=11, column=3)

for r in range(12,22):
    l2 = Label(root, text="Number%d" % (r-11),borderwidth=1 ).grid(row=r, column=0)
    e4 = Entry(root, width=10).grid(row=r, column=1)
    e5 = Entry(root, width=10).grid(row=r, column=2)
    e6 = Entry(root, width=10).grid(row=r, column=3)

def printout():
 # Iterate over the zip of E & L (joined), building the dict using .cget('text') to get
 # the value of the Tkinter label. Add the { 'c':3.0 } to the end of the resulting list
    data = [ { l1.cget("text"): (e1.get(), e2.get()) } for e1,e2,l1 in zip(E1,E2,L1) ]
    print json.dumps(data, sort_keys=True, indent=2)
    with open('data.json', 'w') as outfile:
        json.dump(data, outfile, sort_keys=True, indent=2)

plus = Button(root,  text='Print', command=printout)
plus.grid(row=23, column=1)

root.mainloop(  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:46:58.527

看看这一行：

```
e1 = Entry(root, width=10).grid(row=r, column=1) 
```

在这种情况下，这与以下内容相同：

```
e1 = Entry(root, width=10)
e1 = e1.grid(row=r, column=1) 
```

`e1.grid(...)`返回无，所以你最终得到`e1 = None`. 当您在任何地方使用这种分配时，您的列表仅填充`None`，因此当您稍后调用`... e1.get() ...`它们时，您会收到该错误。

尝试将创建对象和调用它们的方法分开。

# ruby-on-rails-3 - Rails 索引操作总是返回 null

> ID：16003487
> 
> 赞同：1
> 
> 时间：2013-04-14T19:41:00.677
> 
> 标签：ruby-on-rails-3, controller, routes

所以我遇到了一个问题，我有这个应该返回 json 的索引操作，但是在浏览器中我总是得到一个空响应。

**控制器**

```
class Admin::Groups::UsersController < Admin::GroupsController
  def index
    @user_groups = Group.includes(:group_type, :users).where("group_types.group_type_name = ?", 'Users').order("groups.group_name ASC")

    render json: @user_groups.to_json(:include => [:group_type, :users], :methods => :enabled)
  end

  def show
    @user_group = Group.includes(:group_type, :users).where("group_types.group_type_name = ?", 'Users').find_by_id(params[:id])

    render json: @user_group.to_json(:include => [:group_type, :users], :methods => :enabled)
  end
end 
```

**路由文件**

```
namespace :admin do
  namespace :groups do
    resources :users, only: [:index, :show] do
      get 'enabled', :on => :collection
      get 'disabled', :on => :collection
    end
  end
end 
```

**rake 路由的输出**

```
admin_groups_users GET    /admin/groups/users(.:format)                   admin/groups/users#index 
```

真正让我失望的是，当我在 rails 控制台的 index 操作中运行相同的代码时，它输出的正是我所期望的。表演动作也很好。只是为了测试，我添加了一个新路由，我刚刚调用`index2`并将代码从`index`操作复制 + 粘贴到`index2`其中，我在浏览器中得到了正确的输出。

所以它必须与我的路线有关，但我不确定它是什么？

**编辑 1：添加 rake 路由的整个输出**

```
enabled_admin_accounts GET    /admin/accounts/enabled(.:format)               admin/accounts#enabled

disabled_admin_accounts GET    /admin/accounts/disabled(.:format)              admin/accounts#disabled

account_owners_admin_accounts GET    /admin/accounts/account_owners(.:format)  admin/accounts#account_owners

admin_accounts GET    /admin/accounts(.:format)                       admin/accounts#index

admin_account GET    /admin/accounts/:id(.:format)                   admin/accounts#show

enabled_admin_users GET    /admin/users/enabled(.:format)                  admin/users#enabled

disabled_admin_users GET    /admin/users/disabled(.:format)                 admin/users#disabled

admin_users GET    /admin/users(.:format)                          admin/users#index

admin_user GET    /admin/users/:id(.:format)                      admin/users#show
enabled_admin_owners GET    /admin/owners/enabled(.:format)                 admin/owners#enabled

disabled_admin_owners GET    /admin/owners/disabled(.:format)                admin/owners#disabled

currencies_admin_owner GET    /admin/owners/:id/currencies(.:format)          admin/owners#currencies

admin_owners GET    /admin/owners(.:format)                         admin/owners#index

admin_owner GET    /admin/owners/:id(.:format)                     admin/owners#show

enabled_admin_counterparties GET    /admin/counterparties/enabled(.:format)         admin/counterparties#enabled

disabled_admin_counterparties GET    /admin/counterparties/disabled(.:format)        admin/counterparties#disabled

admin_counterparties GET    /admin/counterparties(.:format)                 admin/counterparties#index

admin_counterparty GET    /admin/counterparties/:id(.:format)             admin/counterparties#show

enabled_admin_venues GET    /admin/venues/enabled(.:format)                 admin/venues#enabled

disabled_admin_venues GET    /admin/venues/disabled(.:format)                admin/venues#disabled

admin_venues GET    /admin/venues(.:format)                         admin/venues#index

admin_venue GET    /admin/venues/:id(.:format)                     admin/venues#show

enabled_admin_custody_banks GET    /admin/custody_banks/enabled(.:format)          admin/custody_banks#enabled

disabled_admin_custody_banks GET    /admin/custody_banks/disabled(.:format)         admin/custody_banks#disabled

admin_custody_banks GET    /admin/custody_banks(.:format)                  admin/custody_banks#index

admin_custody_bank GET    /admin/custody_banks/:id(.:format)              admin/custody_banks#show

enabled_admin_client_currencies GET    /admin/client_currencies/enabled(.:format)      admin/client_currencies#enabled

disabled_admin_client_currencies GET    /admin/client_currencies/disabled(.:format)     admin/client_currencies#disabled

admin_client_currencies GET    /admin/client_currencies(.:format)              admin/client_currencies#index

admin_client_currency GET    /admin/client_currencies/:id(.:format)          admin/client_currencies#show

admin_currencies        /admin/currencies(.:format)                     admin/client_currencies#index

admin_all_currencies        /admin/all_currencies(.:format)                 admin/currencies#index

enabled_admin_groups GET    /admin/groups/enabled(.:format)                 admin/groups#enabled

disabled_admin_groups GET    /admin/groups/disabled(.:format)                admin/groups#disabled

admin_groups GET    /admin/groups(.:format)                         admin/groups#index

admin_group GET    /admin/groups/:id(.:format)                     admin/groups#show

enabled_admin_groups_accounts GET    /admin/groups/accounts/enabled(.:format)        admin/groups/accounts#enabled

disabled_admin_groups_accounts GET    /admin/groups/accounts/disabled(.:format)       admin/groups/accounts#disabled

admin_groups_accounts GET    /admin/groups/accounts(.:format)                admin/groups/accounts#index

admin_groups_account GET    /admin/groups/accounts/:id(.:format)            admin/groups/accounts#show

enabled_admin_groups_account_owners GET    /admin/groups/account_owners/enabled(.:format)  admin/groups/account_owners#enabled

disabled_admin_groups_account_owners GET    /admin/groups/account_owners/disabled(.:format) admin/groups/account_owners#disabled

admin_groups_account_owners GET    /admin/groups/account_owners(.:format)          admin/groups/account_owners#index

admin_groups_account_owner GET    /admin/groups/account_owners/:id(.:format)      admin/groups/account_owners#show

enabled_admin_groups_users GET    /admin/groups/users/enabled(.:format)           admin/groups/users#enabled

disabled_admin_groups_users GET    /admin/groups/users/disabled(.:format)          admin/groups/users#disabled

admin_groups_users GET    /admin/groups/users(.:format)                   admin/groups/users#index

admin_groups_user GET    /admin/groups/users/:id(.:format)               admin/groups/users#show

enabled_admin_groups_counterparties GET    /admin/groups/counterparties/enabled(.:format)  admin/groups/counterparties#enabled

disabled_admin_groups_counterparties GET    /admin/groups/counterparties/disabled(.:format) admin/groups/counterparties#disabled

admin_groups_counterparties GET    /admin/groups/counterparties(.:format)          admin/groups/counterparties#index

admin_groups_counterparty GET    /admin/groups/counterparties/:id(.:format)      admin/groups/counterparties#show

enabled_admin_groups_currencies GET    /admin/groups/currencies/enabled(.:format)      admin/groups/currencies#enabled

disabled_admin_groups_currencies GET    /admin/groups/currencies/disabled(.:format)     admin/groups/currencies#disabled

admin_groups_currencies GET    /admin/groups/currencies(.:format)              admin/groups/currencies#index

admin_groups_currency GET    /admin/groups/currencies/:id(.:format)          admin/groups/currencies#show

root        /                                               trades#index

jasminerice        /jasmine                                        Jasminerice::Engine 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:34:13.933

您需要将此路线移到路线列表的下方。

```
admin_group GET    /admin/groups/:id(.:format)                     admin/groups#show 
```

按顺序搜索路线列表。`/admin/groups/users`与`:id`等于匹配此路线`users`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:47:27.180

`render`要么是形式

```
render :json => @user_groups 
```

它需要`to_json`你并且它不能传递参数，或者你可以这样做：

```
format.json { render @user_groups.to_json(:include => [:group_type, :users], :methods => :enabled) } 
```

如果你*总是*想返回 json 不管是什么`format`，那么就去掉这个`json:`东西：

```
render @user_groups.to_json(:include => [:group_type, :users], :methods => :enabled) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:10:25.133

请将您的路线更改为此并检查

```
namespace :admin do
        namespace :groups do
          resources :users, :only => [:index,:show],:collection => {:enabled => :get,:disabled => :get}
        end
      end 
```

# android - Android视图动画不会停留

> ID：16003489
> 
> 赞同：-2
> 
> 时间：2013-04-14T19:41:09.923
> 
> 标签：android, animation

我搜索了互联网，但没有找到我的问题的答案。我想为视图设置动画以向上滑动。但我怎样才能把它留在那里？它总是重置并回到原始位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:43:42.230

`public void setFillAfter (boolean fillAfter)`

在 API 级别 1 中添加 如果 fillAfter 为 true，则此动画执行的转换将在完成后持续存在。如果未设置，则默认为 false。请注意，这适用于单个动画以及使用 AnimationSet 链接动画时。

在此处查看更多信息：[Android 动画](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

# php - PHP 未定义索引

> ID：16003490
> 
> 赞同：0
> 
> 时间：2013-04-14T19:41:15.003
> 
> 标签：php, html, postgresql

我在这里有一个用户输入表单。这是它的代码！

```
<form id="addCommentForm" method="POST" action="#">
    <div>

        <input type="hidden" name="post_id" id="post_id" value="<?php echo $post_id; ?>"/>

        <label for="name">Your Name</label>
        <input type="text" name="name" id="name" />

        <label for="email">Your Email</label>
        <input type="text" name="email" id="email" />

        <label for="body">Comment Body</label>
        <textarea name="bodytext" id="bodytext"></textarea>

        <input type="submit" class="submit" value="Submit" />
    </div>
</form> 
```

但在提交时我收到此错误：

```
Notice: Undefined index: bodytext in /home/se212004/public_html/post-comment-mine.php on line 15 
```

它指的是这段代码：

```
if (isset($_POST))
{

   $username = $_POST['name'];
   $email = $_POST['email'];
   $content = $_POST['bodytext'];
   $post_id=$_POST['post_id'];

   $lowercase = strtolower($email);
   $image = md5( $lowercase );

   //insert these values into the db as a new comment
   //example using array syntax to insert values
   $statement = "INSERT INTO comments (name, body, dt, email) VALUES (?, ?, now(), ?)";
   $sth = $db->prepare($statement);
   $data = array($username, $content, $email);
   $sth->execute($data);
} 
```

错误指向 `$content = $_POST['bodytext'];`. 任何解决此问题的帮助将不胜感激。

这是javascript文件。

```
$(function() {

$(".submit").click(function() {

var name = $("#name").val();
var email = $("#email").val();
var comment = $("#bodytext").val();
var post_id = $("#post_id").val();
var dataString = '&name='+ name + '&email=' + email + '&comment=' + comment +   '&post_id=' + post_id;

if(name=='' || email=='' || comment=='')
 {
alert('Please Give Valid JOE Details');
 }
else
{
$("#flash").show();
$("#flash").fadeIn(400).html('<img src="ajax-loader.gif" align="absmiddle">&     nbsp;<span class="loading">Loading Comment...</span>');
$.ajax({
    type: "POST",
  url: "post-comment-mine.php",
   data: dataString,
  cache: false,
  success: function(html){

  $("ol#update").append(html);
  $("ol#update li:last").fadeIn("slow");
  document.getElementById('email').value='';
  document.getElementById('name').value='';
  document.getElementById('comment').value='';
$("#name").focus();

  $("#flash").hide();

 }
});
}
return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:53:08.933

可能是 $_POST['bodytext'] 未设置导致 php 运行时错误的情况。修复错误后替换

```
$content = $_POST['bodytext']; 
```

和

```
$content = isset($_POST['bodytext']) ? $_POST['bodytext'] : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:24:19.850

你的问题是这一行：

```
var dataString = '&name='+ name + '&email=' + email + '&comment=' + comment +   '&post_id=' + post_id; 
```

您将`comment`值设置为`bodytext`并在 php 中检查`$_POST['bodytext']`何时应该检查`$_POST['comment']`，或者将行更改为：

```
var dataString = '&name='+ name + '&email=' + email + '&bodytext=' + comment +   '&post_id=' + post_id; 
```

需要注意的是，当您以这种方式提交变量时，您也需要在此处正确编码变量。

# ajax - 在 jQuery Mobile 1.3 中的 Ajax 调用上显示页面加载器（微调器）

> ID：16003494
> 
> 赞同：0
> 
> 时间：2013-04-14T19:41:40.783
> 
> 标签：ajax, jquery-mobile

我有一个 jQuery Mobile 1.3.0 应用程序，它通过 Ajax 调用来动态加载数据。我在以前版本的 jQuery Mobile 中看到了执行此操作的各种选项（请参阅[Show Page Loading Spinner on Ajax Call in jQuery Mobile](https://stackoverflow.com/questions/7208609/show-page-loading-spinner-on-ajax-call-in-jquery-mobile)），但尚未找到 1.3 的答案。

Ajax 调用类似于：

```
$.getJSON(url, function(data) {
  console.log(JSON.stringify(data));
  $.each(data.cards, function(index, card) {
    $('#card-name').text(card.title);
  });
}); 
```

为每个 Ajax 调用显示加载微调器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T19:41:40.783

经过一些研究并尝试了几个选项，我发现这对于应用程序中的每个 Ajax 调用都很有效。我在 JavaScript 顶部添加了以下代码：

```
// Load the spinner if an ajaxStart occurs; stop when it is finished
$(document).on({
  ajaxStart: function() { 
    $.mobile.loading('show');
  },
  ajaxStop: function() {
    $.mobile.loading('hide');
  }    
}); 
```

这样，无论我通过 Ajax 加载数据的地方有多少，通过添加这段代码一次，就会显示 jQuery Mobile 加载器（微调器）。

如果有人知道更好的方法，请告诉我。

# java - Java Applet添加线程使while循环无限

> ID：16003504
> 
> 赞同：0
> 
> 时间：2013-04-14T19:42:29.587
> 
> 标签：java, multithreading, graphics, applet, awt

我正在尝试制作一个生成 25 个随机椭圆的程序，然后画一个球并让它弹跳，我完成了一些工作，我生成了椭圆，我让球移动，但是当我添加线程时，它一直重复绘制椭圆循环，我有点明白为什么会发生这种情况，但我不知道如何解决它。

基本上我的程序应该：

1.  在边界内的随机位置绘制 25 个随机大小的椭圆 -**完成**
2.  画一个球并让它移动 -**完成**
3.  让球弹起来——还没做，但我知道怎么做

但它不断重复第一步。

这是我编写的代码，哦，我现在必须使用小程序，这是课程的一部分，请不要建议我使用 swing 或其他东西：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;

public class As4B extends Applet implements Runnable 
{

    public int x, y;
    public int width = 854;
    public int height = 480;
    public int border = 20;
    public Image offscreen;
    public Graphics d;

    public void init()
    {
        setSize(width,height);
        Thread th = new Thread(this);
        th.start();
        offscreen = createImage(width,height);
        d = offscreen.getGraphics();
    }

    public void run() 
    {
        x = 100;
        y = 100;
        while(true)
        {
            x ++;
            y ++;
            repaint();
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }
    public void paint(Graphics gfx)
    {
        d.setColor(java.awt.Color.black);
        d.fillRect(0, 0, width, height);
        d.setColor(java.awt.Color.green);
        d.fillRect(0 + border, 0 + border, (width - (border * 2)), (height - (border* 2)));
        genOval(25, d);

        d.setColor(Color.gray);
        d.fillOval(x, y, 50, 50);
        gfx.drawImage(offscreen, 0, 0, this);

    }
    public int random(int low, int high)
    {
        int answer =(int)((Math.random()*(high-low))+ low);
        return answer;
    }
    public void genOval(int amount, Graphics f)
    {
        int ranWidth, ranHeight, ranX, ranY, red, blue, green;
        int i = 0;
        while(i < 25)
        {
            green = random(0,255);
            blue = random(0,255);
            red = random(0,255);

            f.setColor(new Color(red,green,blue));

            ranWidth = random(30,400);
            ranHeight = random(30,200);
            ranX = random(0 + border, ((width - border)- (ranWidth)));
            ranY = random(0 + border , ((height - border)- (ranHeight)));

            f.fillOval(ranX, ranY, ranWidth, ranHeight);
            i++;
        }   
    }

    public void update(Graphics gfx) {
        paint(gfx);
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:53:19.480

您的 genOval() 方法没有持久的支持。每次（由您的线程）调用 repaint() 时，都会调用 paint() 方法，这会为随机椭圆生成新的位置。您需要为该信息创建一个持久源，如下所示：

```
List<Rectangle> rectangles = new ArrayList<Rectangle>();
List<Color> colors = new ArrayList<Color>();
public void init() {
    ...
    for (int i = 0; i < 25; i++) {
        int green = random(0,255);
        int blue = random(0,255);
        int red = random(0,255);

        colors.add(new Color(red,green,blue));

        ranWidth = random(30,400);
        ranHeight = random(30,200);
        ranX = random(0 + border, ((width - border)- (ranWidth)));
        ranY = random(0 + border , ((height - border)- (ranHeight)));

        rectangles.add(new Rectangle(ranX, ranY, ranWidth, ranHeight));
    }
}

public void genOval(Graphics g) {
    for (int i = 0; i < 25; i++) {
        Color color = colors.get(i);
        Rectangle rectangle = rectangle.get(i);
        // Draw using color & rectangle
    }
} 
```

# php - 带有外来字符的php sprintf（）？

> ID：16003505
> 
> 赞同：26
> 
> 时间：2013-04-14T19:42:38.643
> 
> 标签：php, utf-8, printf, multibyte-functions

像 sprintf 一样的接缝有外来字符问题？还是我做错了什么？看起来它在从字符串中删除像 åäö 这样的字符时有效。这应该是必要的吗？

我希望以下行正确对齐报告：

```
2011-11-27   A1823    -Ref. Leif  -           12 873,00    18.98
2011-11-30   A1856    -Rättat xx -            6 594,00    19.18 
```

我正在使用 sprintf() 像这样：**%-12s %-8s -%-10s -%20s %8.2f**

使用：php-5.3.23-nts-Win32-VC9-x86

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T20:27:35.227

PHP 中的字符串基本上是字节数组（不是字符）。它们不能在本地使用多字节编码（例如 UTF-8）。

详情见：
[https ://www.php.net/manual/en/language.types.string.php#language.types.string.details](https://www.php.net/manual/en/language.types.string.php#language.types.string.details)

PHP 中的大多数字符串函数都具有多字节等价物（带有`mb_`前缀）。但是`sprintf`没有。

`sprintf`在 php.net 的函数文档页面上，有一个用户评论（由“viktor at textalk dot com”）与多字节实现。它可能对您有用：
[https ://www.php.net/manual/en/function.sprintf.php#89020](https://www.php.net/manual/en/function.sprintf.php#89020)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-04-30T19:02:38.510

我实际上是想知道 PHP ^7 是否最终有一个本机`mb_sprintf()`但显然没有 xD。

为了完整起见，这是我在一些旧项目中一直使用的简单解决方案。`strlen`它只是将&之间的差异添加`mb_strlen`到所需的`$targetLengh`. 为了便于比较，仅添加了非多字节示例 =)。

```
$text = "Gultigkeitsprufung ist fehlgeschlagen: %{errors}";
$mbText = "Gültigkeitsprüfung ist fehlgeschlagen: %{errors}";
$mbTextRussian = "Проверка не удалась: %{errors}";

$targetLength = 60;
$mbTargetLength = strlen($mbText) - mb_strlen($mbText) + $targetLength;
$mbRussianTargetLength = strlen($mbTextRussian) - mb_strlen($mbTextRussian) + $targetLength;

printf("%{$targetLength}s\n", $text);
printf("%{$mbTargetLength}s\n", $mbText);
printf("%{$mbRussianTargetLength}s\n", $mbTextRussian); 
```

结果

```
 Gultigkeitsprufung ist fehlgeschlagen: %{errors}
            Gültigkeitsprüfung ist fehlgeschlagen: %{errors}
                              Проверка не удалась: %{errors} 
```

* * *

**更新 2019-06-12**

* * *

@flowtron 让我再想一想。一个简单的`mb_sprintf()`可能看起来像这样。

```
function mb_sprintf($format, ...$args) {
    $params = $args;

    $callback = function ($length) use (&$params) {
        $value = array_shift($params);
        return strlen($value) - mb_strlen($value) + $length[0];
    };

    $format = preg_replace_callback('/(?<=%|%-)\d+(?=s)/', $callback, $format);

    return sprintf($format, ...$args);
}

echo mb_sprintf("%-10s %-10s %10s\n", 'thüs', 'wörks', 'ök');
echo mb_sprintf("%-10s %-10s %10s\n", 'this', 'works', 'ok'); 
```

结果

```
thüs       wörks              ök
this       works              ok 
```

我在这里只做了一些快乐的路径测试，但它适用于 PHP >=5.6，应该足以让人们了解如何封装行为。但它不适用于重复/顺序修饰符 - 例如`%1$20s`将被忽略/保持不变。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-26T07:48:20.873

如果您使用符合 ISO-8859-1 字符集的字符，您可以在格式化之前转换字符串，并在完成后将结果转换回 UTF8

```
utf8_encode(sprintf("%-12s %-8s", utf8_decode($paramOne), utf8_decode($paramTwo)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-17T15:00:14.567

### 问题

没有多字节格式功能。

### 主意

您无法转换输入字符串。您应该更改格式长度。格式`%4s`意味着 4 个*宽度*（不是*字符*- 见脚注）。但是 PHP 格式函数计算*字节*数。因此，您应该将格式长度添加到`bytes - widths`.

### 实现

来自@nimmneun

```
function mb_sprintf($format, ...$args) {
    $params = $args;
    $callback = function ($length) use (&$params) {
        $value = array_shift($params);
        return $length[0] + strlen($value) - mb_strwidth($value);
    };
    $format = preg_replace_callback('/(?<=%|%-)\d+(?=s)/', $callback, $format);
    return sprintf($format, ...$args);
} 
```

不要忘记另一个选择`str_pad($input, $length, $pad_char=' ', STR_PAD_RIGHT)`

```
function mb_str_pad(...$args) {
    $args[1] += strlen($args[0]) - mb_strwidth($args[0]);
    return str_pad(...$args);
} 
```

### 脚注

亚洲字符有 3 个字节和 2 个宽度和 1 个字符长度。如果您的格式是`%4s`并且输入是一个亚洲字符，您应该需要两个空格（填充）而不是三个。

# c# - 无法更新 Windows 窗体中图表上的现有点

> ID：16003514
> 
> 赞同：0
> 
> 时间：2013-04-14T19:43:38.993
> 
> 标签：c#, charts, point

在我的`WinForms C#`程序中，在使用轨迹栏增加和减少 X 轴值时，我需要更新已经在图表上绘制的现有 Y 轴值，`System.Windows.Forms.DataVisualization.Charting.Chart`但由于某些原因，对于大多数 X 点，图表仍然显示旧的和新的Y 值。最初我认为以下应该正确执行：

```
 private void UpdatePoint(int aIndex, float aX, float aY)
    {
        DataPoint found = null;
        if (_chart.Series[aIndex].Points.Count > 0 && 
            (found = _chart.Series[aIndex].Points.FindByValue(aX, "X")) != null)
        {
            if (found.YValues[0] != aY)
                found.SetValueXY(aX, aY);
        }
        else
        {
            _chart.Series[aIndex].Points.AddXY(aX, aY);
        }
    } 
```

首先，我认为我正在以不正确的方式进行更新并尝试删除该点并添加一个具有新 Y 值的新点，但是尽管调试器说每个 XI 只有一个具有一个 Y 值的点仍然看到两个 Y 值和这意味着图表没有正确刷新。尝试使图表无效或刷新没有帮助。如何实现正确的积分更新。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-21T09:32:02.060

```
_chart.Series[yourSeriesIndex].Points.Clear(); 
```

当我遇到问题时；这个部分示例应该可以帮助您清除您想要的系列点的旧值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T09:39:58.457

我能为您提供的最好的方法是删除它并切换到 WPF。Winforms 实在是太让人头疼了

# java - 以编程方式更新特定于语言环境的文件

> ID：16003518
> 
> 赞同：-1
> 
> 时间：2013-04-14T19:44:13.230
> 
> 标签：java, jakarta-ee, locale

我需要从文件路径中读取特定于语言环境的属性文件并需要对其进行修改，然后需要使用 Java 保存文件。

例如，我的“C”目录中有两个语言环境文件 a)LoginPage.properties 和 b)LoginPage_sv.properties。现在通过程序，我将根据程序中指定的语言环境来处理文件。如果用户选择 SV(Swedish)，则系统将读取 LoginPage_sv.properties，如果选择英语 LoginPage.properties。阅读文件后，我必须针对键更改一些值，并且需要将其保存在文件中。

我找到了很多读取文件的解决方案，但仍然不知道如何**更新文件**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:55:36.833

您的问题带有 java-ee 标记，因此如果您必须更改它们，我建议将属性保存在数据库中。

您可以使用 EJB + JPA 来访问读取和修改数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:24:23.507

LoginPage_"+Locale.GERMANY.getLanguage()+".properties 这可以解决我的问题，并且通过属性文件我也可以从文件位置读取相同的内容。

# python - 如何减少 elif 语句

> ID：16003519
> 
> 赞同：3
> 
> 时间：2013-04-14T19:44:13.607
> 
> 标签：python

我的脚本运行 C 程序 digitemp。输出在包含传感器 ID 和温度的行中。我需要将传感器 ID 与特定名称匹配，因此所有 elifs。在此示例中，我使用了第一、第二、第三作为名称来计算 ID。有什么方法可以减少所有 elif 语句，因为还有更多要添加的语句？

```
import os

# get digitemps output
cmd = "/bin/digitemp_ -c /bin/digitemp.conf -q -a"

def digitemps():
    for outline in os.popen(cmd).readlines():
        outline = outline[:-1].split()
        if outline[0] == '28F4F525030000D1':
            temp_ = outline[1]
            print 'first ' + temp_
        elif outline[0] == '28622A260300006B':
            temp_ = outline[1]
            print 'second ' + temp_
        elif outline[0] == '28622A2603000080':
            temp_ = outline[1]
            print 'third ' + temp_

digitemps() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:46:08.187

Use a dictionary to map from sensor ID to a human-readable name:

```
id_to_name = {"28F4F525030000D1": "first",
              "28622A260300006B": "second",
              "28622A2603000080", "third"}
print id_to_name.get(outline[0], outline[0]) + outline[1] 
```

The advantage of this approach is that the `get` method will return the ID without any change if there is no human-readable name assigned to it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:56:06.647

循环内的大部分逻辑都可以使用生成器表达式编写，这是等效的代码，并考虑了@DSM 在注释中的建议：

```
d = {'28F4F525030000D1':'first ',
     '28622A260300006B':'second ',
     '28622A2603000080':'third '}

def digitemps():
  for s in (d.get(x[0],x[0]) + x[1] for x in (e.split() for e in os.popen(cmd))):
    print s 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-14T19:47:39.500

Unfortunately, Python has no way of doing so. If you were using C++, you could've used the switch statement, but Python has no such equilavent. Sorry!

# matlab - 在 matlab 中读取 CSV 文件

> ID：16003522
> 
> 赞同：0
> 
> 时间：2013-04-14T19:44:38.207
> 
> 标签：matlab, csv

我有一个像这种格式的 csv 文件：

```
2.3 , 1.3 , 1.2 , 6.8 , classone
1.2 , 2.6 , 1.8 , 0.7 , classtwo 
```

我想将文件读入单独的矩阵；一个矩阵中的前 4 个数值和另一个矩阵中的字符串值

我尝试过 textscan 功能，但效果不佳

```
M= textread('training.dat','%f %f %f %f %s');

Error using dataread
Number of outputs must match the number of unskipped
input fields. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:52:37.903

尝试

 ~~```
[num, str, ~] = xlsread('training.dat'); 
```~~  ~~```
fid = fopen('training.dat');
D = textscan(                                ...
        fid,                   '%f%f%f%f%s', ...
        'Delimiter',           ' , ',        ...
        'MultipleDelimsAsOne', true          ...
);
fclose(fid);

numeric_stuff = horzcat(D{1:4});
string_stuff  = D{5}; 
```~~

# java - Stacktrace Java Eclipse 中的未知来源

> ID：16003525
> 
> 赞同：6
> 
> 时间：2013-04-14T19:44:51.190
> 
> 标签：java, eclipse, stack-trace, minecraft

我有一个非常烦人的问题，当在 eclipse 中从我的源代码中导出一个 jar 文件时，我不会在堆栈跟踪中获得有关发生错误的源代码和行号的信息。我已经检查了项目的 ecplise 中的编译器设置，并设置了部分类文件生成中的所有选项。我正在开发由服务器软件 bukkit 执行的 Minecraft 插件。我的来源在 de.celestialcraft.agentestate 包中。发生异常时，我得到这样的堆栈跟踪：

```
23:43:57 [INFO] com.sk89q.worldedit.CuboidClipboard@fb44f99
23:43:57 [SEVERE] Could not pass event BlockDamageEvent to AgentEstate v2.1alpha

org.bukkit.event.EventException
    at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.ja
va:363)
    at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.jav
a:62)
    at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.j
ava:477)
    at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.j
ava:462)
    at de.celestialcraft.AgentEstate.AgentEstateBlockListener.onBlockBreak(U
nknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.ja
va:361)
    at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.jav
a:62)
    at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.j
ava:477)
    at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.j
ava:462)
    at ir.b(ItemInWorldManager.java:393)
    at ir.a(ItemInWorldManager.java:200)
    at iv.a(NetServerHandler.java:782)
    at ei.a(Packet14BlockDig.java:67)
    at cg.b(TcpConnection.java:467)
    at iv.d(NetServerHandler.java:220)
    at iw.b(NetworkListenThread.java:57)
    at ht.b(DedicatedServerListenThread.java:34)
    at net.minecraft.server.MinecraftServer.r(MinecraftServer.java:981)
    at ho.r(DedicatedServer.java:309)
    at net.minecraft.server.MinecraftServer.q(MinecraftServer.java:857)
    at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:744)
    at fy.run(ThreadMinecraftServer.java:16)
Caused by: java.lang.NullPointerException
    at com.sk89q.worldedit.schematic.MCEditSchematicFormat.save(Unknown Sour
ce)
    at de.celestialcraft.AgentEstate.Estate.saveState(Unknown Source)
    at de.celestialcraft.AgentEstate.Estate.create(Unknown Source)
    at de.celestialcraft.AgentEstate.Estate.create(Unknown Source)
    at de.celestialcraft.AgentEstate.AgentEstateBlockListener.onBlockDamage(
Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.ja
va:361)
    ... 25 more 
```

我已将构建路径设置中的 jdk 路径设置为项目的 lib。我希望你能帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-23T22:10:17.017

由于 Bukkit 是一种 API，因此当您编写 bukkit 插件时，您正在以只有 Bukkit 知道如何处理所述代码的方式创建代码块。为了找出导致您在此处发布的错误的原因，您需要查看 StackTrace 中的“at”行的第一行，并在 Github 上的 Bukkit 源文件中找到它。例如，在这个堆栈跟踪中，您在顶部有这个：

```
org.bukkit.event.EventException
  at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:363) 
```

您可以在第 363 行看到由 JavaPluginLoader 中的错误导致的 Bukkit EventException。为了了解究竟发生了什么，您应该访问[https://github.com/Bukkit/Bukkit/releases](https://github.com/Bukkit/Bukkit/releases)并下载您正在编码的 MC 版本的适当源版本。在这个 zip 文件中，您可以在 src/main/java/ 中找到源文件夹，并按照此堆栈跟踪 (org/bukkit/plugin/java/JavaPluginLoader) 的第 2 行中的路径以及该文件的第 363 行中的路径，您将看到发生了错误。

由于我不知道您正在为哪个版本的 Bukkit 进行编码，因此我无法在此处为您提供帮助，只是说该文件中的任何方法都有第 363 行作为它的一部分，这与您的问题有关。如果您弄清楚该方法的作用，那就是 Bukkit 尝试对您的插件代码执行的操作并失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:29:10.083

您的项目应标记为启用项目特定设置，并且在 Java Compiler -> Classfile generation 上，应取消标记选项 Add line number...。

# html - 如何去除页脚之间的空间

> ID：16003528
> 
> 赞同：5
> 
> 时间：2013-04-14T19:45:07.003
> 
> 标签：html, css

我的网页上有页脚的 CSS 问题。我用过[这篇文章](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)，但页脚和页面底部之间有空白区域。由于我的页面正文中没有内容，因此空白空间仍然存在，并且在不需要时还有一个额外的滚动条。我真的不知道它为什么会在那里。我已经清理了 CSS，所以没有任何不相关的代码。

HTML：

```
<!doctype html>
<html>
    <head>
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
    <title>My Page</title>
</head>

<body>
    <div id="container">
        <div id="header">
            <p>
                Header Content
            </p>
            <hr>
        </div>
<div id="body">
    Body Content
</div>
        <div id="footer"><p id="copy">Copyright 2013</p></div>
    </div>
</body> 
```

和 CSS：

```
html, body {height: 100%}
body { 
      margin: 0px;
      padding: 0px;
     }

#copy {vertical-align: bottom;text-align:center;font-family:Century Schoolbook;color:#8B0B04;font-size:14px;}
#footer {bottom: 0;width:100%;position: absolute;height: 60px}
#container {min-height: 100%;position: relative}
#body {padding-bottom: 60px} 
```

我的浏览器是 Firefox，但在 Chrome 中这也不起作用。如果您能给我任何反馈和帮助，我将非常高兴。谢谢！

编辑：我发布了一些错误的东西恕我直言。我将在第二天发布整个页面。再次感谢您的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:01:00.963

用于`overflow:hidden`移除滚动条的容器

```
#container {
min-height: 100%;
position: relative;
overflow: hidden;
} 
```

和`padding-bottom`身体 div

```
#body{
  padding-bottom:20px;
} 
```

[演示](http://tinker.io/2b37d/2)，这是带有内容的[演示](http://tinker.io/2b37d/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:52:02.417

也许试试这个 css 而不是你在那里的：

```
html, body {
    height: 100%
}
body {
    margin: 0px;
    padding: 0px;
}
#copy {
    vertical-align: bottom;
    text-align:center;
    font-family:Century Schoolbook;
    color:#8B0B04;
    font-size:14px;
}
#footer {
    bottom: 0;
    width:100%;
    position: absolute;
}
#container {
    min-height: 100%;
    position: relative
} 
```

# sql-server - 向上或向下移动层次结构表中的某些项目的最佳方法是什么？

> ID：16003531
> 
> 赞同：0
> 
> 时间：2013-04-14T19:45:14.927
> 
> 标签：sql-server, tsql, hierarchy

想象一下，我想通过用下一个或上一个项目替换它的顺序来重新排序（更改位置或顺序）菜单中的一个项目。为此，我使用如下代码：

```
 DECLARE @SO tinyint --, @MenuID uniqueidentifier
    --SET @MenuID = (Select top 1 MenuID from MenuItems where MenuItemID = @ID)
    SET @SO = (Select top 1 SO from MenuItems where MenuItemID = @ID and MenuID = @MenuID)

    if @SO > 1
    begin
        UPDATE  dbo.MenuItems SET SO = @SO WHERE MenuItemID = (select top 1 MenuItemID from MenuItems WHERE SO = @SO - 1 and MenuID = @MenuID)
        UPDATE  dbo.MenuItems SET SO = @SO - 1 WHERE MenuItemID = @ID
    END 
```

此代码每次向上或向下移动一次都可以正常工作。我有两个问题：

1.  有没有更好的解决方案来做到这一点？
2.  如果我想同时将一些项目移动到更高或更低的一些步骤怎么办，像这样：？

从：

```
> 1
> 2
    > 1
    > 2
    > 3
> 3
> 4
    > a
    > b
> 5 
```

至：

```
> 1
> 2
    > 1
    > 2
    ? a
    ? 5
    > 3
> 3
> 4
    > b 
```

谢谢，卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:13:27.160

您可以使用这样的单个查询交换两个任意条目的顺序：

```
update dbo.MenuItems
  set SO = case
    when MenuItemId = @FirstId then ( select SO from dbo.MenuItems where MenuItemId = @SecondId )
    else ( select SO from dbo.MenuItems where MenuItemId = @FirstId ) end
  where MenuItemId in ( @Firstid, @SecondId ) 
```

id 的查找可以在查询之前执行或嵌入其中。

由于您没有在问题中包含表架构，因此查询可能需要进行一些调整。我认为这`MenuItemId`是独一无二的，但从你的帖子中肯定不清楚。

# selenium-webdriver - Selenium 如何打开 Web 浏览器来运行 selenium 脚本

> ID：16003533
> 
> 赞同：0
> 
> 时间：2013-04-14T19:45:20.060
> 
> 标签：selenium-webdriver, testng

**我从selenium IDE 1.9.0**将脚本导出为 Java/TestNG/RemoteControl。

我想在**Eclipse中使用****TestNG运行这个脚本，并且我想在****Firefox**浏览器中看到脚本回放。

 ****我在网上做了一些搜索，但我无法让它工作。我需要一些关于如何使代码工作的说明和指导。非常感谢您的帮助。

这是我的代码：

```
import java.util.List;
import org.testng.annotations.*;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import static org.testng.Assert.*;
import org.testng.annotations.Test;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.AfterTest;

public class search_donor_suzy_ng //extends SeleneseTestNgHelper {
    @BeforeTest
    public void setUp() throws Exception {
        //initizlize Firefoxbrowser: 
        WebDriver ffoxdriver = new FirefoxDriver();
        String baseUrl = "www.google.com"; //sample URL
    }
    @Test 
    public void testSearch_donor_suzy_ng() throws Exception {
        // set overall speed of the test case
        selenium.setSpeed("4000");
        selenium.open("/?html=openid");
        selenium.click("css=input[type=\"submit\"]");
        selenium.waitForPageToLoad("30000");
        Thread.sleep(4000);
        selenium.type("id=edit-name", "jeffshu");
        selenium.type("id=edit-pass", "tEgvz9xsaNjnwe4Y");
        selenium.click("id=edit-submit");
        selenium.waitForPageToLoad("30000");
        Thread.sleep(4000);
        selenium.click("id=cmp_admin");
        selenium.waitForPageToLoad("30000");
        selenium.click("id=quicksearch_anchor");
        selenium.click("css=img[alt=\"Member\"]");
        selenium.waitForPageToLoad("30000");
        selenium.type("id=search_name", "suzy");
        selenium.click("css=input[type=\"image\"]");
        selenium.click("link=Balagia, Suzy");
        selenium.waitForPageToLoad("30000");
    }
    @AfterTest
    public void tearDown() throws Exception {
        ffoxdriver.quit();  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:07:54.593

对于初学者，您确实需要参考文档@ [http://docs.seleniumhq.org/docs/03_webdriver.jsp](http://docs.seleniumhq.org/docs/03_webdriver.jsp)

在您的代码中，您正在初始化未使用的 beforetest 方法中的驱动程序对象。Driver 是 Webdriver 启动浏览器的方式，而在您的测试方法中，您使用的是 selenium 和 selenium 1 命令。作为一个快速步骤，您可以用驱动程序替换您的硒（将您的驱动程序声明放在类范围和方法范围内）。SeleneseTestngHelper 也是 selenium1。确保你的项目中有必要的 webdriver jars。

webdriver 中的某些命令与 selenium 1 不同，您在进行替换时可能会看到编译错误。查看驱动程序可用的方法。并使用相应的命令，例如。使用 webdriver 的 get() 而不是 open()。您可以参考[javadocs](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.htmle)或使用您的 ide 来了解这些。****

# php - MongoDB convert ObjectId to string in result on fly

> ID：16003542
> 
> 赞同：0
> 
> 时间：2013-04-14T19:46:15.870
> 
> 标签：php, mongodb

If document has fields with value as `MongoId` object, it will be returned to php something like [http://dl.dropbox.com/u/7017985/Screenshots/26.jpg](http://dl.dropbox.com/u/7017985/Screenshots/26.jpg), is there any way how to return it like simple strings and not as `MongoId` object.

Why I need it ? Because I need to send result to javascript browser side. I have document which has 2-3 fields which is refs to another document, and they keep as `ObjectId`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T08:38:03.053

我需要 MongoIds 对 javascript/json（客户端）友好，所以我想透明地转换多个 mongoIds。我找不到任何内置功能来实现这一点，但想出了以下解决方案：

```
<?php
function strToMongoIdObj(Array $_ids) {
    return array_map(function($id) {
            return new MongoId($id);
        }, $_ids);
}

function mongoIdToStr(MongoCursor $cursor) {
    $rs = array();
    foreach ($cursor as $doc) {
        $doc['_id'] = (string)$doc['_id'];
        $rs[] = $doc;
    }
    return $rs;
}

$_ids = array("522dbdd29076fde9057bb5ed",
              "522dbf229076fdeb053f5b7b");

$m = new MongoClient();
$cursor = $m->db->col
    ->find(array('_id' => array('$in' => strToMongoIdObj($_ids))));

print_r(mongoIdToStr($cursor)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:02:00.500

MongoID 支持`__toString`. 如果将其转换为字符串，或`__toString`直接调用，它会将值转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:39:58.880

您可以遍历查询结果并将所有 MongoId 对象转换为字符串。如果给定来自 MongoCollection::findOne() 的单个结果数组或来自 MongoCollection::find() 的 MongoCursor 结果，则以下函数将转换所有 id。

```
function convert_mongoid_to_string(& $mongo_object)
{
    foreach($mongo_object as $mongo_key=>$mongo_element)
    {
        if(is_array($mongo_element)||is_object($mongo_element))
        {
            if(get_class($mongo_element) === "MongoId")
            {
                 //cast the object to the original object passed by reference
                 $mongo_object[$mongo_key]=(string)$mongo_element;
            }
            else
            {
                //recursively dig deeper into object looking for MongoId's
                convert_mongoid_to_string($mongo_element);
            }
        }
        else
        {
            //is scalar so just continue
            continue;
        }
    }
    return $mongo_object;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:49:46.967

我不相信有。

MongoDB 以 BSON 文档的形式输入和输出，其`ObjectId`字段采用这种特定格式。

这是你无法改变的。

# asp.net - Web Deploy 3.0 在大型网站 .net MVC 网站上非常慢

> ID：16003547
> 
> 赞同：2
> 
> 时间：2013-04-14T19:46:45.430
> 
> 标签：asp.net, iis, webdeploy, microsoft-web-deploy

我正在为一个大型网站使用 Web Deploy over the web，它会在每次部署时重新部署所有图像文件，这需要相当长的时间。

我正在考虑首先将整个 Web 部署包复制到服务器进行部署，而不是通过构建服务器进行部署。

是否有 Web 部署设置，以便包不会在每次部署时覆盖图像文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:39:32.070

MSDeploy 仅部署它认为已更改的文件。默认情况下，这涉及比较文件的上次修改时间戳。如果您的源代码控制/构建过程导致这些被更新，但它们将始终被更新。

有一个替代方案。如果您传递[`-useCheckSum`](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29.aspx)到命令行，它将比较文件的*内容*（通过校验和）。

不过，我更愿意解决导致您上次修改日期发生变化的问题，因为`-useCheckSum`这显然会变慢。

# c++ - 为什么 operator>>（或 <<）重载函数需要接收 i\ostream 引用？

> ID：16003556
> 
> 赞同：2
> 
> 时间：2013-04-14T19:47:40.850
> 
> 标签：c++, overloading, operator-keyword

从 cplusplus.com，我看到`ostream`该类的成员函数`operator<<`如下所示：

```
ostream& operator<< (bool val);   ostream& operator<< (int val); 
```

.... 等等。

这确实有意义，因为当您像 `cout<<x` 激活`ostream& operator<< (int val)` 函数一样使用 Cout 对象时，您实际上是`<<`在 Cout 对象上使用运算符。这与所有其他运算符非常相似，并将`int`变量发送到函数。当我想流式传输自己的对象时，有什么区别以及究竟会发生什么？为什么语法是突然的`ostream& operator<< (**ostream &os**, object ob)`？为什么我需要添加 `ostream`var？我还在用 `cout<<ob`，这不就是 `ostream& operator<< (object obj)`为什么吗？我通过的只是我的对象。对象已经在`cout`那里了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:49:40.583

`operator<<`一般定义为自由函数；也就是说，不是成员函数。由于它是一个重载的二元运算符，这意味着它首先获取其左参数，然后获取其右参数。

传统上返回对其左参数的`operator<<`引用以启用惯用的输出链。

为了让读者明白，我倾向于使用和缩写来定义我的`operator`重载；对于某些类型， an看起来与此类似。`lhs``rhs``operator<<``T`

```
std::ostream& operator<<(std::ostream& lhs, T const& rhs)
{
    // TODO: Do something
    return lhs;
} 
```

### 作为成员函数

与其他二进制文件一样，它可以定义为成员函数。也就是说，让我们假设您定义了自己的`iostream`. 除其他外，您的类声明可能如下所示。再次，`T`是一种特殊的类型。

```
class MyIOStream : public iostream
{

public:
    MyIOStream& operator<<(T const& rhs);

} 
```

在这种情况下`operator<<`是一个成员函数。用作 时，它具有相同的语义`<<`。

### 参考

1.  [C 和 C++](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)中的运算符 - 您可以重载的所有运算符及其典型参数的一个很好的总结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:51:10.490

> 为什么我需要添加 ostream var？

我确定它在那里，以便您可以将输出链接在一起：

```
cout << foo << bar 
```

第一次调用`cout << foo`将产生一个`ostream`可用于该`<< bar`部件的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:58:47.823

一些流提取器是`basic_istream`; 因为他们是成员，所以这个`basic_istream`论点是隐含的。一些流提取器不是`basic_istream`. 因为它们不是成员，所以`basic_istream`参数必须是声明的一部分。

像这样（过于简单）：

```
class basic_istream {
public:
    basic_istream& operator>>(int& i);
}

basic_istream& operator>>(basic_istream&, std::string& str); 
```

两者都可以以相同的方式调用：

```
int i;
std::cin >> i; // calls basic_istream::operator>>(int&)
std::string str;
std::cin >> str; // calls operator>>(basic_istrea&, std::string&) 
```

# java - 从 LinkedList 创建队列

> ID：16003559
> 
> 赞同：0
> 
> 时间：2013-04-14T19:47:52.117
> 
> 标签：java, queue

我在创建 Queue 对象时遇到问题。我不知道出了什么问题。

我的代码：

```
import java.util.*;
public class Demo {
    public static void main(String[] args) {

        Queue<Integer> q = new LinkedList<Integer>();

    }
} 
```

编译器错误：

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：LinkedList 类型不是通用的；它不能用参数参数化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:50:19.863

可能是名称冲突（*查看默认包中是否有一个名为 LinkedList 的类*）

试试这个 -

```
 Queue<Integer> q = new java.util.LinkedList<Integer>(); 
```

# api - 如何使用 Pastebin API 发布

> ID：16003560
> 
> 赞同：1
> 
> 时间：2013-04-14T19:47:59.057
> 
> 标签：api, pastebin

我正在尝试使用其 API（[http://pastebin.com/api](http://pastebin.com/api)）将某些内容粘贴到 Pastebin。我想知道是否有人可以快速向我展示粘贴内容的正确格式（[http://pastebin.com/api#2](http://pastebin.com/api#2)）。我在 Java 中这样做，但这不是很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-21T18:02:55.053

自从发布问题以来，我已经弄清楚并为此创建了一个 API。[https://github.com/nrubin29/PastebinAPI](https://github.com/nrubin29/PastebinAPI)

# python - python/django buildout error while loading settings module

> ID：16003566
> 
> 赞同：0
> 
> 时间：2013-04-14T19:48:44.480
> 
> 标签：python, django, settings, buildout

I am trying to setup my project with buildout but i have problem. My **buildout.cfg**

```
[buildout]
parts = django
eggs = 
    psycopg2

[versions]
djangorecipe = 1.5

[django]
recipe = djangorecipe
project = myproject
settings = settings
wsgi = true
eggs = ${buildout:eggs} 
```

when i try to run development server with **bin/django runserver** it says:

```
Error loading the settings module 'syslog.settings': No module named settings 
```

Any idea how can i fix this problem?

# android - Why Logcat does not print the message when startCommand() is called by the android system?

> ID：16003568
> 
> 赞同：0
> 
> 时间：2013-04-14T19:49:31.903
> 
> 标签：android, android-emulator, android-service

I have written a simple code to check the use of service .

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Log.d("msg","Service Started");

    if(intent == null)
    Log.w("msg","Service Intent NULL");

    g = (GlobalVar) getApplicationContext();

    try {
        Thread thread = new Thread(new Job());
        thread.start();

    } catch (Exception ex) {
        Log.e("msg", ex.getMessage());
    }

    return START_STICKY;
} 
```

There are two buttons in my activity. One button starts the service using **startService(Intent intent)** method and other one stops it using **stopService(Intent intent)** method. 1\. I pressed the startButton and the msg **Service Started** is printed in Logcat. Intent will not be null this time. 2\. Now , I go to Emulator's **Settings>Applications>Running Services** and locate my service and stop it. The msg **Service Stopped** is printed in the Logcat which I have written in the **onDestroy()** method of the service.

## Here is the part which I don't understand.

*The Android System restarts the service itself after some seconds and this time the msg **Service Started** is not printed. The documentation states that intent will be null. BUT the msg **Service Intent NULL** is also not printed.*

## How do I know that android system restarts the service?

I have printed some messages in the Thread that my service starts . Those msgs start printing automatically in the logcat after few seconds of stopping the service from the emulator settings.

Any ideas why those LogCat messages are NOT being printed ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:00:29.840

我猜你应该对下面给出的这些东西有一些基本的了解......

Log.e：这是为了当坏事发生时。在 catch 语句内部等位置使用此标签。您知道并且发生了错误，因此您正在记录错误。

Log.w：当你怀疑有什么可疑的事情发生时使用它。你可能没有完全进入错误模式，但也许你从一些意想不到的行为中恢复过来。基本上，使用它来记录您不希望发生但不一定是错误的事情。有点像“嘿，这件事发生了，很奇怪，我们应该调查一下。”

Log.i：使用它来将有用的信息发布到日志中。例如：您已成功连接到服务器。基本上用它来报告成功。

Log.d：将其用于调试目的。如果您想打印出一堆消息以便记录程序的确切流程，请使用它。如果要保留变量值的日志，请使用它。

Log.v：当你想对你的日志完全疯狂时使用它。如果出于某种原因您决定在应用程序的特定部分记录每一件小事，请使用 Log.v 标记。并参考[这里](http://developer.android.com/reference/android/util/Log.html)

我相信这会帮助你...谢谢...

# prolog - Some problems asserting a new rule in SWI-Prolog

> ID：16003575
> 
> 赞同：3
> 
> 时间：2013-04-14T19:49:48.133
> 
> 标签：prolog

I am studying on Ivan Bratko book: "Programming for Artificial Intelligence" for an universitary exame and using SWI Prolog and I have some doubts about an example show on this book regarding the **assert** and **retract** predicates.

It simply present the following code that declare some facts as dynamic:

```
:-dynamic fast(ann).
:-dynamic slow(tom).
:-dynamic slow(pat). 
```

Then in the Prolog shell use the **assert** rule to define a new rule into the database:

```
[debug] 59 ?- assert((faster(X,Y) :- fast(X), slow(Y))).
true. 
```

Ok, so the new rule seems to be added to my database.

Now I try to perform this query and it fail:

```
[debug] 64 ?- faster(X,Y).
false. 
```

On the book say that the output should be this one:

```
A = ann
B = tom 
```

and it sound good and rational because I have consult the previous program where say that specify who is fast and who is slow and later I have add the faster rule asserting it...

Why don't work? maybe it depends by the Prolog implementation (SWI-Prolog)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:04:13.497

Prolog 中的`dynamic`指令在编译程序中很有用（通常在要编译的源文件中使用）。如果您使用`assert`或等效机制在交互式 shell 中创建事实（或规则），那么 SWI-Prolog 将假定这些谓词是动态的。

但是，`dynamic`如果您想在为谓词定义任何事实之前通过规则中的子句引用谓词，则该指令是有益的。也就是说，假设我们首先这样做：

```
?- assert((faster(X,Y) :- fast(X), slow(Y))).
true. 
```

然后尝试查询：

```
?- faster(X,Y). 
```

您可能会认为这会失败，因为 ( 还) 不存在`fast/1`or的事实`slow/1`。但实际上 SWI-Prolog 会（按设计）抛出错误异常：

```
ERROR: faster/2: Undefined procedure: fast/1 
```

为了防止这种情况，我们应该在用户输入模式下添加动态指令：

```
?- [user].
|: :-dynamic fast/1, slow/1.
|: (type Ctrl-z to exit user entry mode)
% user://1 compiled 0.00 sec, 1 clauses 
```

现在我们将得到预期的失败行为（假设先前断言的规则）：

```
?- faster(X,Y).
false. 
```

您可以使用相同的模式来创建您的事实：

```
?- [user].
|: fast(ann).
|: slow(tom).
|: slow(pat).
|: (type Ctrl-z to exit user entry mode)
% user://2 compiled 0.00 sec, 4 clauses
true. 
```

现在`faster`查询以两种不同的方式成功：

```
?- faster(X,Y).
X = ann,
Y = tom ;
X = ann,
Y = pat. 
```

# plone - wftool.doActionFor does not trigger a content rule

> ID：16003576
> 
> 赞同：1
> 
> 时间：2013-04-14T19:49:49.977
> 
> 标签：plone

I have setup a content rule that gets triggered when I change the state of a dexterity object through the web interface, but when I change the state programmatically the content rule is not triggered.

I use the typical workflow_tool.doActionFor for changing the review_state. The review_state in the catalog/object appears changed to the new state.

Any clues??

I'm using plone 4.2.5 and dexterity 1.2.1.

This is the code I use to change the state:

```
cart = brains[0].getObject()
wftool = getToolByName(self.context, 'portal_workflow')
wftool.doActionFor(cart, 'charge')
wftool.doActionFor(cart, 'pay')
modified(cart) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:04:55.273

最后我发现一次只触发一个转换，plone 会按预期触发内容规则。

因此，就我而言，我通过以下方式设置了解决方法：

状态为：**created** -> **charged** -> **paid**，当更改为状态**paid**时，内容规则会触发。有时我必须在一笔交易中将状态从已**创建**更改为已**付款**。我启用了从**创建**状态绕过中间状态**charged的****​​支付**转换。所以，我只需要触发一个转换来**支付**一个**创建**的对象，内容规则就起作用了。

# javascript - 使用 jQuery 导入 XML：在服务器上工作，而不是在本地工作

> ID：16003579
> 
> 赞同：-1
> 
> 时间：2013-04-14T19:50:11.150
> 
> 标签：javascript, xml, jquery

我正在编写一个读取 XML 文件然后输出数据的脚本。当它在我的网络服务器上运行时，它可以完美运行，但不能从我的本地机器上运行。（“542Data.xml”文件与服务器和我的计算机上的 HTML 页面存储在同一个文件夹中，我检查了所有文件版本是否相同。我在 Firefox 和 Chrome 中尝试过，结果相同.)

```
<div id="output"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
$(document).ready(function()
{
    $.ajax({
        type: "GET",
        url: "542Data.xml",
        dataType: "xml",
        success: parseXml
    });
});

function parseXml(xml)
{
    $(xml).find("point").each(function(index)
    {
        $("#output").append("Name: " + $(this).attr("name") + "<br />");
    });
}

</script> 
```

XML 的结构如下：

```
<?xml version="1.0"?>
<destinations>
    <point name="Tot Lot at Bryan Park"> 
        <lat>39.15611</lat>
        <long>-86.52664</long>
        <type>outdoors</type>
    </point>
    <point name="Playground at Cascades Park"> 
        <lat>39.19633</lat>
        <long>-86.53581</long>
        <type>outdoors</type>
    </point>
</destinations> 
```

我需要改变什么才能让它在本地工作？

**编辑：**我错了，它在 Firefox 中工作。（尴尬的！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:03:18.927

您的脚本在 Firefox 中对我来说很好。

Chrome 有一些安全功能，不允许您做您想做的事情（`file:///`用于 AJAX 请求）。您需要使用以下命令启动浏览器：

```
chrome --disable-web-security 
```

禁用安全检查。（`--allow-file-access-from-files`可能也可以，但我还没有测试过）

**警告：**禁用安全检查会影响您的浏览器安全性，只能用于*临时*开发目的。如果您计划长时间从本地计算机运行代码，请考虑在本地计算机上安装 Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:54:27.007

如果“在本地工作”是指在文件夹中有 html 和 xml 文件并通过双击打开 HTML 文件，那么就没有办法了。

为了让它在本地工作，您需要一个可以解析 http 请求的 Web 服务器。在文件系统上打开本地文件并不是这里发生的事情。 `.ajax()`正在发出服务器请求。没有服务器就不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:55:44.277

你用什么来开发？检查您使用的开发服务器是否可以提供 XML 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:56:01.523

根据给定的（小）信息。可能有一个安全原因，即从 google 的存储库导入 jquery。请提供更多代码或查看 firefox 中的错误控制台 - ctr+shift+j 并复制粘贴错误（如果有），或者只需下载 jquery 并将其包含在本地位置的路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T19:59:59.347

它在服务器上运行，但不在您的机器上。看，ajax 请求需要本地服务器运行。要使其工作，请在您的机器上启动一些本地服务器。例如，如果您在 Windows 上，则下载 WAMP，如果在 Linux 上，则安装 LAMP。将您的文件放在 www 文件夹中。然后启动本地服务器..然后使用 localhost/your_file_name 访问您的文件。这会给你你想要的结果。

# android - ActionBar 中的多个微调器

> ID：16003582
> 
> 赞同：1
> 
> 时间：2013-04-14T19:50:22.550
> 
> 标签：android, spinner, android-spinner

我使用 ActionBarSherlock，其中我将导航模式设置为“列表”

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
getSupportActionBar().setListNavigationCallbacks(adapter, this); 
```

是否可以根据选择的项目动态显示第二个微调器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:09:15.590

使用自定义操作栏布局。

```
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setCustomView(R.layout.action_bar_custom); 
```

action_bar_custom.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Spinner
        android:id="@+id/action_bar_spinner_collection"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </Spinner>

    <Spinner
        android:id="@+id/action_bar_spinner_collection_detail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </Spinner>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T12:34:59.117

使用这个..这可能有效...

代码：

```
getMenuInflater().inflate( R.menu.main, menu );
mSpinnerItem = menu.findItem( R.id.menu_spinner );
setupSpinner( mSpinnerItem ); 
```

菜单 XML：

```
 <item
    android:id="@+id/menu_spinner"
    android:actionViewClass="android.widget.Spinner"
    android:visible="false"
    android:showAsAction="always"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T22:42:28.890

**永远不要使用 NAVIGATION_MODE_LIST 和 onNavigationItemSelected 这是不值得的！**

```
 @Override
     public boolean onNavigationItemSelected(int position, long itemId)

    You also cannot use menu's to do this:

   @Override public boolean onCreateOptionsMenu(Menu menu)
  {
    getMenuInflater().inflate(R.menu.activity_main, menu);

due to inflation ordering. 
```

原因：

```
(1) 它生成一个“隐藏的”微调器，您无法获得它的 id。
(2) 你不能自定义这个微调器
(3) 节省 30 行代码，但如果要添加第二个双向微调器，则永久受限
（4）即使在“简单代码”（一个微调器）的特殊情况下，你也会失去很多。
(5) 你不能使用标签。

关键是 actionBar.setCustomView(R.layout.action_bar_custom);
和 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()...
对于每个微调器。

```

相信我，我在尝试每种解决方案时都浪费了几个小时。

# c# - EF savechanges() 不会影响我的 .mdf 数据库

> ID：16003583
> 
> 赞同：1
> 
> 时间：2013-04-14T19:50:43.880
> 
> 标签：c#, database, entity-framework, mdf

我的 .mdf DB 上有这个模型：

![在此处输入图像描述](https://i.stack.imgur.com/uMzw8.png)

这两个没有数据的表：

![在此处输入图像描述](https://i.stack.imgur.com/e3D3C.png)

PersonID 是一个外键。

这是我的 EF 模型图：

![在此处输入图像描述](https://i.stack.imgur.com/hyAqp.png)

这是添加人员的代码。

```
 namespace DBTest
{
    class Class1
    {
        MyDBEntities db;
        public Class1()
        {
            db = new MyDBEntities();
            AddPerson();
        }        

        void AddPerson()
        {
            Person p = new Person();
            p.ID=1;
            p.NAME="abcd";
            db.AddToPerson(p);
            db.SaveChanges();
        }
    }
} 
```

在我从主课上打电话后：

```
 namespace DBTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Class1 a = new Class1();
        }
    }
} 
```

我想看看我的 .mdf 数据库是否有任何变化。
我发现数据库还是空的（刷新后）：

![在此处输入图像描述](https://i.stack.imgur.com/e3rUy.png)

有谁知道我需要做什么来更新数据库？我究竟做错了什么？

编辑：

连接字符串：

```
 <connectionStrings>
    <add name="DBTest.Properties.Settings.XXXXConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\XXXX.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" />
    <add name="MyDBEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MyDB.mdf;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:57:34.890

您没有向我们展示您的**连接字符串**- 但我只是从您报告的“症状”中猜测。

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`MyDB`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=MyDB;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# sql-server - 如何使用 SQL Server 2012 计算峰谷回撤？

> ID：16003590
> 
> 赞同：1
> 
> 时间：2013-04-14T19:51:10.410
> 
> 标签：sql-server, tsql, sql-server-2012

我想知道一些新的 SQL Server 2012 函数是否有助于解决这个问题。这是我的 DDL 和示例数据

```
CREATE TABLE [dbo].[transactions]
(
    [transactionId] [int]            NOT NULL,
    [dt]            [datetime]       NOT NULL,
    [balance]       [decimal](22, 6) NULL
);    
GO

INSERT [dbo].[transactions] ([transactionId], [dt], [balance]) VALUES
 (174, CAST(0x0000A19600000000 AS DateTime), CAST(1000.000000 AS Decimal(22, 6))), 
 (178, CAST(0x0000A19700869520 AS DateTime), CAST(1100.000000 AS Decimal(22, 6))),
 (179, CAST(0x0000A19700933780 AS DateTime), CAST(1212.000000 AS Decimal(22, 6))),
 (180, CAST(0x0000A19700B4B9A0 AS DateTime), CAST(1342.000000 AS Decimal(22, 6))),
 (181, CAST(0x0000A19700BB0AD0 AS DateTime), CAST(1198.000000 AS Decimal(22, 6))),
 (182, CAST(0x0000A19700E67030 AS DateTime), CAST(1234.000000 AS Decimal(22, 6))),
 (183, CAST(0x0000A19700F358E0 AS DateTime), CAST(900.000000  AS Decimal(22, 6))),
 (184, CAST(0x0000A19700F58B60 AS DateTime), CAST(876.000000  AS Decimal(22, 6))),
 (185, CAST(0x0000A19700F9AA10 AS DateTime), CAST(889.000000  AS Decimal(22, 6))),
 (186, CAST(0x0000A19701034700 AS DateTime), CAST(1133.000000 AS Decimal(22, 6))),
 (187, CAST(0x0000A19A0089E0E0 AS DateTime), CAST(1400.000000 AS Decimal(22, 6))),
 (191, CAST(0x0000A19A009450C0 AS DateTime), CAST(1566.000000 AS Decimal(22, 6))),
 (192, CAST(0x0000A19A00A5E4C0 AS DateTime), CAST(1800.000000 AS Decimal(22, 6))),
 (188, CAST(0x0000A19A00AA49C0 AS DateTime), CAST(1900.000000 AS Decimal(22, 6))),
 (189, CAST(0x0000A19A00B54640 AS DateTime), CAST(1456.000000 AS Decimal(22, 6))),
 (190, CAST(0x0000A19A00CAB2A0 AS DateTime), CAST(1234.000000 AS Decimal(22, 6))),
 (193, CAST(0x0000A19A00F12660 AS DateTime), CAST(1400.000000 AS Decimal(22, 6))),
 (195, CAST(0x0000A19A010087E0 AS DateTime), CAST(1444.000000 AS Decimal(22, 6))),
 (196, CAST(0x0000A19E00C7F380 AS DateTime), CAST(1556.000000 AS Decimal(22, 6))),
 (197, CAST(0x0000A19E00FE5560 AS DateTime), CAST(1975.000000 AS Decimal(22, 6))); 
```

我追求的是该系列余额中最大百分比的峰谷回撤，由 dt 排序。峰谷回撤是在突破前一个高点之前，余额中的最高点到最低点的最大百分比变化。在这里更好地描述[http://www.investopedia.com/terms/p/peak-to-valley-drawdown.asp](http://www.investopedia.com/terms/p/peak-to-valley-drawdown.asp) 在这个数据集中，我们有两个回撤。

第一个是从 1342.00 到 876.00 (-34.72%)，第二个是从 1900 到 1234 (-35.05%)

因此，该组中最大的峰谷百分比回撤为 -35.05%。我需要一个可以提供此值的 SQL Server 查询。如果可能，宁愿不必使用临时表。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:12:02.573

我不知道任何 SQL Server 2012 功能会比这更简洁或更有效地获得这个值：

```
;WITH x AS
(
  SELECT [drop] = ((s.balance-e.balance)*100.0/s.balance)
    FROM dbo.transactions AS s
    INNER JOIN dbo.transactions AS e
    ON s.transactionId < e.transactionId
    AND s.balance > e.balance
)
SELECT [Largest Drawdown] = -MAX([drop]) FROM x; 
```

结果：

```
Largest Drawdown
----------------
-35.05263157894 
```

不过，我承认，这仅适用于您的样本数据，因为您的谷值便于您解决要解决的问题。如果将倒数第 4 行更改为 875，则此查询将其视为集合的一部分。换句话说，我在这里计算了整个范围的回撤，而不仅仅是再次突破高点之前的范围。

我怀疑有更好的方法可以使用间隙/孤岛技术解决此查询，当我可以充分关注它时，我会尝试返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:53:48.840

如果第一个条目是峰值，这将丢失

```
 ;with trnsCTE (ID,bal) AS
  (  -- get seqential ID
        SELECT ROW_NUMBER() OVER (ORDER BY DT) as ID, [balance] 
        from [transactions] 
  ),
  trnsCTE2 (ID,bal) AS
  ( -- any peaks
       select t2.ID, t2.bal 
       from  trnsCTE as T1
       join  trnsCTE as T2
         on  ( t2.ID = t1.ID+1  
        and  t2.bal > t1.bal )
       join  trnsCTE as T3
         on  t3.ID = t2.ID+1
        and  t3.bal < t1.bal
   )
   ,
   trnsCTE3 (ID,bal) AS
   (  --  get first peak and then bigger peaks only
       SELECT distinct T1.ID, T1.BAL
       from  trnsCTE2 as T1
       where T1.ID = (select min(ID) from trnsCTE2) 
         or T1.bal > (select max(bal) from trnsCTE2 where trnsCTE2.ID < t1.ID)
   )
   -- calculate 
   select t1.id, t1.bal, min(trnsCTE.bal), (t1.bal - min(trnsCTE.bal)) * 100 / t1.bal
   from trnsCTE
   join trnsCTE3 t1
     on t1.id < trnsCTE.id 
    and ( trnsCTE.id < (select min(id) from trnsCTE3 where id > t1.id)
          or
          t1.id = ( select max(id) from trnsCTE3 ) )
   group by t1.id, t1.bal 
   order by t1.id 
```

这直接转换为#temps OP 中没有使用#temp 表示不想使用#temp

```
insert into #trnsCTE (ID,bal)
SELECT ROW_NUMBER() OVER (ORDER BY DT) as ID, [balance] 
from [transactions] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:48:25.120

```
select peak_dt, peak_balance, trough_dt, trough_balance, (peak_balance - trough_balance) * 100.0 / peak_balance as drawdown
from (
    select dt as peak_dt, balance as peak_balance, nullif(last_value(dt) over (partition by peak_valley_group order by dt rows between unbounded preceding and unbounded following), dt) as trough_dt, nullif(last_value(balance) over (partition by peak_valley_group order by dt rows between unbounded preceding and unbounded following), balance) as trough_balance, isPeak
    from (
        select *, sum(isPeak) over (order by dt) as peak_valley_group
        from (
            select dt, balance, (case when forward_trend = -1 then 1 else 0 end) as isPeak, max(balance) over (partition by forward_trend order by dt) as current_max_balance
            from (
                -- Nulls for lead/lag here produce the desired result
                select *, (case when lead(balance, 1) over (order by dt) > balance then 1 else -1 end) as forward_trend, (case when lag(balance, 1) over (order by dt) > balance then 1 else -1 end) as backward_trend
                from transactions
            ) t
            where forward_trend = backward_trend
        ) t
        where (isPeak = 1 and balance = current_max_balance) 
        or isPeak = 0
    ) t
) t
where isPeak = 1
order by peak_dt 
```

# c# - 与通用处理程序接口

> ID：16003592
> 
> 赞同：2
> 
> 时间：2013-04-14T19:51:16.583
> 
> 标签：c#, request, response, generic-handler

我在 C# 中有这个通用处理程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace RequestResponse
{
    public class Handler : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/plain";
            string function = context.Request.QueryString["function"];

            Methods m = new Methods();

            if(function.Equals("addition"))
            {
                int num1 = Convert.ToInt32(context.Request.QueryString["num1"]);
                int num2 = Convert.ToInt32(context.Request.QueryString["num2"]);
                int answer = m.addition(num1, num2);
                context.Response.Write(answer);
            }

            if (function.Equals("subtraction"))
            {
                int num1 = Convert.ToInt32(context.Request.QueryString["num1"]);
                int num2 = Convert.ToInt32(context.Request.QueryString["num2"]);
                int answer = m.subtraction(num1, num2);
                context.Response.Write(answer);
            }

            if(function.Equals("reverseString"))
            {
                string text = context.Request.QueryString["text"];
                text = m.reverseString(text);
                context.Response.Write(text);
            }

            if (function.Equals("CalculateMD5Hash"))
            {
                string text = context.Request.QueryString["text"];
                text = m.CalculateMD5Hash(text);
                context.Response.Write(text);
            }
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

我也有这个客户端应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;

namespace Client
{
    public partial class HomePage : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (TextBox_Function.Text.Equals("addition"))
            {
                int num1 = Convert.ToInt32(TextBox_Num1.Text);
                int num2 = Convert.ToInt32(TextBox_Num2.Text);
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:4000/Handler.ashx?function=" + TextBox_Function.Text + "&num1=" + num1 + "&num2=" + num2);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                String answer = response.ToString();
                Session["answer"] = answer;
                Response.Redirect("Results.aspx");
            }

            if (TextBox_Function.Text.Equals("subtraction"))
            {
                int num1 = Convert.ToInt32(TextBox_Num1.Text);
                int num2 = Convert.ToInt32(TextBox_Num2.Text);
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:4000/Handler.ashx?function=" + TextBox_Function.Text + "&num1=" + num1 + "&num2=" + num2);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                String answer = response.ToString();
                Session["answer"] = answer;
                Response.Redirect("Results.aspx");
            }

            if (TextBox_Function.Text.Equals("reverseString"))
            {
                String text = TextBox_Text.Text;
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:4000/Handler.ashx?function=" + TextBox_Function.Text + "&text=" + text);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                String answer = response.ToString();
                Session["answer"] = answer;
                Response.Redirect("Results.aspx");
            }

            if (TextBox_Function.Text.Equals("CalculateMD5Hash"))
            {
                String text = TextBox_Text.Text;
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:4000/Handler.ashx?function=" + TextBox_Function.Text + "&text=" + text);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                String answer = response.ToString();
                Session["answer"] = answer;
                Response.Redirect("Results.aspx");
            }
        }
    }
} 
```

现在，让我们假设在我的客户端应用程序中，我提供“addition”作为函数，“3”作为 num1，“5”作为 num2。

为什么生成的答案（存储在变量答案中）是：

System.Net.HttpWebResponse

我究竟做错了什么？请多多包涵，因为我从未以这种方式在两个应用程序之间进行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:55:20.140

问题在这里：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
String answer = response.ToString(); 
```

您只是在调用`ToString()`，`HttpWebResponse`而您*真正*想要做的是获取响应正文的内容 - 您可以使用以下方法：

```
// It's important to dispose of responses...
using (var response = request.GetResponse())
{
   using (var reader = new StreamReader(response.GetResponseStream()))
   {
       string answer = reader.ReadToEnd();
   }
} 
```

# python - 如何重新向生成器抛出异常

> ID：16003595
> 
> 赞同：2
> 
> 时间：2013-04-14T19:51:23.053
> 
> 标签：python, exception, generator

似乎在生成器上调用 throw 需要一种异常。我应该如何重新抛出异常实例（我已经捕获）？

编辑：考虑

```
def g():
    try:
        yield 1
    except Exception as e:
        yield 2

def f():
   x = g()
   print x.next()
   print x.throw(Exception) 
```

但是我怎样才能抛出一个已经存在的异常实例呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:17:06.990

参数`generator.throw(...)`完全反映`raise`语句的参数。所以它不必*是*异常类；它可以是一个异常对象，就像`raise`.

这工作得很好：

```
x.throw(Exception("i'm an argument")) 
```

诚然，该文档在这方面极具误导性。 [PEP](http://www.python.org/dev/peps/pep-0342/)至少给了你一个提示：

> 引发异常的效果与语句完全相同：
> 
> ```
> raise type, value, traceback 
> ```
> 
> 在暂停点处决。

# html - CSS页脚不会自动向下移动

> ID：16003597
> 
> 赞同：0
> 
> 时间：2013-04-14T19:51:26.103
> 
> 标签：html, css

我的网站有这个 CSS 代码：

```
@charset "UTF-8";
/* CSS Document */

* {
    margin:0;
    padding:0;
}

html, body, #wrap {
    width:100%;
    height:100%;
    margin:0;
    padding:0;
    font-family:Calibri;
}
#wrap {
    min-height: 100%;
    height: auto !important; 
    height: 100%; 
    margin: 0 auto -580px; /* the bottom margin is the negative value of the footer's height */
    border:4px solid #000000;
}

.push {
    height: 580px; /* .push must be the same height as .footer */
}

/* header stuff */
#header-topbar {
    width:100%;
    height:40px;
    /* padding:10px 10px 10px 10px; */
    background-color:#666666;
}
#header-topbar2 {
    width:100%;
    height:100px;
    /* padding:10px 10px 10px 10px; */
    background-color:#eeeeee;
}
#phone-tel {
    float:right;
    margin-right:16%;
    margin-top:5px;
    font-size:20px;
}
#logo {
    position:absolute;
    float:left;
    margin-left:15%;
    margin-top:15px;
}

/* main body/content */
#body-content {
    padding-bottom:200px;
    width:80%;
    margin:120px auto 0 auto;
    padding:10px 10px 10px 10px;
    border:solid 1px #a79494;
    border-top:solid 4px #a2cd3a;
}

/* homepage-boxes */
#homepagebox {
    width:80%;
    margin:0 auto 0 auto;
}
#homepagebox .column {
    float: left;
    width: 25%;
}
#homepagebox .column div {
    margin: 5px;
    min-height: 350px;
    background: #eeeeee;
}

/* FOOTER */
#footer {
    width:100%;
    height:580px;
    border-top:4px solid #666666;
    background-color:#eeeeee;
}
#footer-inner {
    width:80%;
    margin:0 auto 0 auto;
    height:inherit;
}
#footerTop {
    width:100%;
    height:480px;
    padding-top:10px;
    border-bottom:2px #000000 solid;
}
#footerTopLeft {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    margin-top:10px;
    padding:0 15px 10px 15px;
    border-right:1px solid #000000;
}
#footerTopMid {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    margin-top:10px;
    padding:0 15px 10px 15px;
    border-right:1px solid #000000;
}
#footerTopRight {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    padding:0 15px 10px 15px;
}

#enquiryForm                    { clear:both; padding:8px 40px 0 0;  }
.enquiryField                   { clear:both; padding:5px 0; }
.enquiryField label             { clear:none; float:left; }
.enquiryField input             { clear:none; font-family:Calibri; float:right; padding:3px; width:189px; }
.enquiryField textarea          { clear:none; float:right; font-family:Calibri; padding:5px; width:189px; }

.enquiryError                   { clear:both; color:#fff; font-family:Calibri; }
#enquirySent                    { color:#fff; font-family:Calibri; } 
```

页脚显示在页面底部，但如果主页内容太长，页脚根本不会向下移动。内容仅显示在页脚上。

例如，在我的 HTML 中，我有 4 个 div 彼此相邻对齐，它们显示在页脚上

我在这里创建了一个小提琴：http: [//jsfiddle.net/rwqjH/1/](http://jsfiddle.net/rwqjH/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:55:31.867

尝试添加`overflow:auto;`到#wrap。当您浮动元素时，它们会从布局中删除，并且默认情况下 #wrap 不再调整大小以适应它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:55:34.957

您需要清除浮动元素，在之前添加以下行`<div class="push"></div>`

```
<div style="clear: both;"></div> 
```

[**演示**](http://jsfiddle.net/rwqjH/1/)

> 注意：我没有修复你的页脚对齐，它们很乱，我建议你学习 CSS 定位

# ruby-on-rails - nil:nilClass 的未定义方法“api_key”

> ID：16003598
> 
> 赞同：0
> 
> 时间：2013-04-14T19:51:27.523
> 
> 标签：ruby-on-rails

我正在开发一个应用程序，但在登录应用程序时遇到了一些问题。当我向应用程序提交用户名和密码时，我得到：

`undefined method 'api_key' for nil:NilClass`

在里面 ：

`app/controllers/user_sessions_controller.rb:51:in 'create'`

创建方法如下：

```
def create
 user = User.find_by_username(params[:username])

 if (user && user.authenticate(params[:password]))
    render json: {logged_in: true, access_token: @user.api_key.access_token}
  else 
 render json: {logged_in: false, access_token: nil}
 end
end 
```

我很确定这种语法有效，因为它在用户控制器中正确生成了访问令牌，但由于某种原因，它在这里抛出了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:57:54.543

`user`不一样`@user`。

`@user`是一个实例变量，`user`是方法的局部变量。

使用哪个取决于您的需要，但您可能想要使用其中*一个*。

```
def create
  @user = User.find_by_username(params[:username])
  if (@user && @user.authenticate(params[:password]))
    render json: {logged_in: true, access_token: @user.api_key.access_token}

 ... 
```

# windows-phone-7 - 是否可以将文本框放在 PivotItem 之外？

> ID：16003607
> 
> 赞同：0
> 
> 时间：2013-04-14T19:52:07.067
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我正在尝试构建一个 windowsphone 应用程序，并希望复制 windowsphone twitter 应用程序的一些 UI 功能，并在我的枢轴标题上方而不是下方有一个文本框。

![在此处输入图像描述](https://i.stack.imgur.com/ro5yX.jpg) ..................................................... ..................................................... ..................................................... .

我尝试将我的文本框包装在 Pivot 控件中

```
 <controls:Pivot>
            <TextBox Height="78" TextWrapping="Wrap" Width="412" Name="searchTB" InputScope="Search" KeyDown="searchTB_KeyDown"/>
        </controls:Pivot> 
```

但这不起作用，任何人都可以分享我如何让它发挥作用的任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:27:24.073

我只是想澄清 Marcin 所说的（他提供了正确的答案，我只是添加了图像和更多代码）。这是你想要达到的目标吗？看看下面 - 并注意 Pivot 控件上方的控件即使在您滑动到下一个数据透视项时也会出现。

图片： ![在此处输入图像描述](https://i.stack.imgur.com/f3eSB.jpg)

编码：

```
<phone:PhoneApplicationPage
x:Class="Temp_deleteme.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">
<StackPanel>
    <TextBlock Foreground="Yellow" FontSize="35">Control above Pivot</TextBlock>
 <phone:Pivot>
    <phone:PivotItem Header="First">
            <TextBlock Foreground="Green" >Content in First</TextBlock>
    </phone:PivotItem>
        <phone:PivotItem Header="Second">
            <TextBlock Foreground="Red">Content in Second</TextBlock>
        </phone:PivotItem>
    </phone:Pivot>       
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:55:29.470

你应该把它放在枢轴之外：

```
<StackPanel>
    <TextBox Height="78" TextWrapping="Wrap" Width="412" Name="searchTB" InputScope="Search" KeyDown="searchTB_KeyDown"/>
    <controls:Pivot>
    </controls:Pivot>
</StackPanel> 
```

# ios - 我已经让 UIPanGestureRecognizer 只检测大部分垂直平底锅，我如何让它只检测真正垂直平底锅？

> ID：16003613
> 
> 赞同：1
> 
> 时间：2013-04-14T19:52:32.540
> 
> 标签：ios, objective-c, uigesturerecognizer, uipangesturerecognizer

我刚刚实现了这个：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)panGestureRecognizer {
    CGPoint translation = [panGestureRecognizer translationInView:someView];
    return fabs(translation.y) > fabs(translation.x);
} 
```

（如此[处](https://stackoverflow.com/questions/7100884/uipangesturerecognizer-only-vertical-or-horizontal)所述。）

但是，如果用户在对角线上垂直平移，它将开始。我如何使公差更加严格，因为它认为是垂直的？

基本上，下图描述了我所追求的。第一张图是它现在检测到的，该区域内的任何东西，第二张图是我想要它做的。

![在此处输入图像描述](https://i.stack.imgur.com/Xg2TK.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-17T00:00:45.423

您可以使用`atan2f`给定值`x`和`y`值来计算垂直角度。例如，如果角度与垂直方向的角度小于 4 度，则要启动手势，您可以执行以下操作：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gesture {
    CGPoint translation = [gesture translationInView:gesture.view];
    if (translation.x != 0 || translation.y != 0) {
        CGFloat angle = atan2f(fabs(translation.x), fabs(translation.y));
        return angle < (4.0 * M_PI / 180.0); // four degrees, but in radians
    }
    return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:54:58.837

检测纯垂直手势，然后我假设`translation.x == 0`。

您还应该从您引用的帖子中检查正确答案。他将先前的位置与当前位置进行比较。你可以创造感性。您可以查看我的[项目](https://github.com/RuiAAPeres/SliderController)，例如查看我使用这种敏感性定义的地方，一个动作何时有效（小于或等于敏感性）或无效（大于敏感性）。检查`MOVEMENT_SENSIBILITY`内部`RPSliderViewController.m`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:50:02.883

我曾经`UIGestureRecognizer`为此目的编写过一个子类。它只跟踪垂直平移。也许这对你有帮助。您可以将它用作任何其他手势识别器，只需设置阈值并在其目标的操作方法中跟踪翻译。

VerticalPanGestureRecognizer.h

```
#import <UIKit/UIKit.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface VerticalPanGestureRecognizer : UIGestureRecognizer

@property (assign, nonatomic)float translation;
@property (assign, nonatomic)float offsetThreshold;

@end 
```

VerticalPanGestureRecognizer.m

```
#import "VerticalPanGestureRecognizer.h"

@interface VerticalPanGestureRecognizer ()
{
    CGPoint _startPoint;
}
@end

@implementation VerticalPanGestureRecognizer

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] > 1) {
        self.state = UIGestureRecognizerStateFailed;
    }
    else
    {
        _startPoint = [[touches anyObject] locationInView:self.view];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (self.state == UIGestureRecognizerStateFailed || self.state == UIGestureRecognizerStateCancelled) {
        return;
    }
    CGPoint currentLocation = [[touches anyObject] locationInView:self.view];
    CGPoint translation;
    translation.x = currentLocation.x - _startPoint.x;
    translation.y = currentLocation.y - _startPoint.y;        

    if (self.state == UIGestureRecognizerStatePossible)
    {
        //if the x-translation is above our threshold the gesture fails 
        if (fabsf(translation.x) > self.offsetThreshold)
            self.state = UIGestureRecognizerStateFailed;
        //if the y-translation has reached the threshold the gesture is recognized and the we start sending action methods
        else if (fabsf(translation.y) > self.offsetThreshold)
            self.state = UIGestureRecognizerStateBegan;

        return;                
    }        
    //if we reached this point the gesture was succesfully recognized so we now enter changed state
    self.state = UIGestureRecognizerStateChanged;

    //we are just insterested in the vertical translation
    self.translation = translation.y;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    //if at this point the state is still 'possible' the threshold wasn't reached at all so we fail
    if (self.state == UIGestureRecognizerStatePossible)
    {
        self.state = UIGestureRecognizerStateFailed;
    }
    else
    {
        CGPoint currentLocation = [[touches anyObject] locationInView:self.view];
        CGPoint translation;
        translation.x = _startPoint.x - currentLocation.x;
        translation.y = _startPoint.y - currentLocation.y;
        self.translation = translation.y;
        self.state = UIGestureRecognizerStateEnded;
    }

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.state = UIGestureRecognizerStateCancelled;
}

- (void)reset
{
    [super reset];
    _startPoint = CGPointZero;
}

@end 
```

# ruby-on-rails-3 - 为什么 rack/test 在执行 POST 或 PUT 操作时将哈希合二为一

> ID：16003619
> 
> 赞同：1
> 
> 时间：2013-04-14T19:53:09.710
> 
> 标签：ruby-on-rails-3, rspec, rack

在我的 rspec 测试中，我定义了以下哈希数组并执行了 POST：

```
body = {:event => { :invitations_attributes => 
  [ {:recipient_id => 40}, {:email => 'a@a.com'}, {:facebook_id => 123456789} ] } }
post "#{@url}.json", body.reverse_merge(:auth_token => @token) 
```

基于上述，我希望 Rails 服务器接收“invitations_attributes”作为哈希数组。但是，developer.log 文件具有以下内容：

```
Parameters: {"auth_token"=>"RSySKfN2L8b5QPqnfGf7", "event"=>{"invitations_attributes"=>
[{"recipient_id"=>"40", "email"=>"a@a.com", "facebook_id"=>"123456789"}]}} 
```

（在上面的参数中，“invitation_attributes”数组只包含 1 个哈希。）

以下 curl 语句：

```
curl -X POST -H "Content-type: application/json" http://localhost:3000/api/v1/events.json -d '{"auth_token":"RSySKfN2L8b5QPqnfGf7","event":{"invitation_attributes":[{"recipient_id":40},{"email":"a@a.com"},{"facebook_id":123456789}]}}' 
```

导致 Rails 接收完整的哈希数组，如下面的日志文件条目所示。

```
Parameters: {"auth_token"=>"RSySKfN2L8b5QPqnfGf7", "event"=>{"invitation_attributes"=>
[{"recipient_id"=>40}, {"email"=>"a@a.com"}, {"facebook_id"=>123456789}]}} 
```

Rack/test 在 PUT 操作和 POST 中都表现出这种行为。

为什么 rack/test 将 3 个哈希合并为 1，而不是完全按照定义发送数组？是否有一个设置会导致 rack 表现出我预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:29:32.407

一种解决方法是通过插入 nil 值占位符键来确保每个哈希包含每个键，如下所示：

```
body = {:event => { :invitations_attributes => [
  {:recipient_id => 40, :recipient_email => nil, :recipient_facebook_id => nil},
  {:recipient_email => user.email, :recipient_id => nil, :recipient_facebook_id => nil}, 
  {:recipient_facebook_id => new_unused_facebook_id, :recipient_email => nil, :recipient_id => nil}  ] } } 
```

上面的哈希确实会导致服务器在数组中接收 3 个单独的哈希。但是，插入占位符键很不方便，因此不需要。此外，无法测试控制器基于此类密钥的*存在而采取不同行动的场景（尽管不常见）。*

# scala - 如何使用 Scala 2.10 反射 API 检查运行时实例是否符合某种类型？

> ID：16003620
> 
> 赞同：2
> 
> 时间：2013-04-14T19:53:12.127
> 
> 标签：scala, reflection

以下代码段按预期返回 true：

```
import scala.reflect.runtime.universe._
typeOf[Seq[Int]] <:< typeOf[Traversable[Int]] 
```

但是，此代码段不会：

```
val s = Seq[Int](1,2,3)
val m = runtimeMirror(this.getClass.getClassLoader)
val t = m.reflect(s).symbol.typeSignature
t <:< typeOf[Seq[Int]] 
```

我确定我只是遗漏了一些明显的东西，但我已经在 REPL 上待了几个小时，但还没有解决。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T20:44:03.110

1)`typeOf[...]`保留了 Java 擦除的确切 Scala 类型，但是`obj.getClass`（因此`m.reflect(obj)`，它`getClass`在幕后使用）没有。因此，最好的运行时反射可以通过在`s`没有额外编译时努力的情况下进行反射`Seq[_]`（这将导致子类型测试失败）。如果您需要在运行时记住某些东西的确切 Scala 类型，请使用类型标签（就像这样`typeOf`做）或宏（就像类型标签一样）。

2)`.symbol.typeSignature`是行不通的，因为那是`ClassInfoType`（即一种类型，它封装了一个类类型的父母和成员的列表）。类信息类型非常适用于检查成员（可能也适用于基类，也可能适用于其他一些事情，但我不确定我的头脑），但对于其他所有事情都不是很好。你会想要类似的东西`.symbol.asType.toType`，它会返回 a `TypeRef`（即在我们的例子中`scala.collection.immutable.::`- 注意这里缺少任何类型参数！）。不幸的是，由于#1 中描述的擦除，这仍然不能开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:28:26.643

您不需要反射来确定给定值是否符合给定的静态已知类型。有两种方法（至少）可以这样做：

```
if (someValue.isInstanceOf[SomeType])
  ...
else
  ... 
```

或者

```
someValue match {
  case st: SomeType => ...
  case _ =>
} 
```

# css - 在 Windows 上配置指南针

> ID：16003621
> 
> 赞同：3
> 
> 时间：2013-04-14T19:53:12.437
> 
> 标签：css, windows, sass, compass-sass

我在 Windows 上，我的项目中成功运行了 SASS。现在，我想包括指南针，这样我就可以利用预先编写的 mixins 等。

首先，我只是在我的工作 sass 文件中尝试了这个语句：`@import "compass/css3/transform";`

自然，这不起作用，因为我没有安装 compass，所以我导航到我的 Ruby 目录并成功地将 compass gem 安装在`c:/ruby193/bin`. 我现在可以在 中成功创建指南针项目`c:/ruby193/bin`，但这对我没有多大好处。

我需要在我的站点中运行 compass 命令，该站点位于：`c:/inetpub/mysite`. 但是，当我尝试这样做时，我得到了`compass is not recognized as internal or external command`

我怎样才能让指南针*在*我想要的地方工作？

**编辑**：*我的大部分问题是安装 Ruby 时没有将自身添加到 Windows 路径环境变量中，所以我只能从 C:/Ruby193/bin 目录中运行 SASS 和 Compass 命令。这给我带来了问题，因为结果，我认为那是我需要安装指南针的地方。无论如何，在弄清楚这一点之后，我仍然无法让 compass 工作，但我正计划卸载 SASS、Compass 和 Ruby，并从头开始再试一次。我将 Stooboo 的答案标记为正确，因为它是最好和最准确的，尤其是考虑到他必须使用的信息。谢谢！*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T20:02:10.107

我是这样做的

（一度）

1.  安装红宝石[http://rubyinstaller.org/](http://rubyinstaller.org/)

2.  安装指南针，在命令窗口输入

    ```
    gem install compass 
    ```

3.  要将指南针添加到 MVC 项目，请导航到项目文件夹并在命令窗口中输入

    ```
    compass create 
    ```

    你会得到默认的 config.rb ...但这是我常用的

    ```
    http_path = "/"
    css_dir = "content/css"
    sass_dir = "content/sass"
    images_dir = "images"
    javascripts_dir = "scripts" 
    ```

4.  安装引导程序（有关更多信息，请参见[https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)）添加

    ```
    require 'bootstrap-sass' 
    ```

    到你的 config.rb

    输入（在您的命令窗口中）

    ```
    gem install bootstrap-sass 
    ```

    （在此之后我必须（在您的命令窗口中）进行 gem 更新，但您可能不需要）

    输入（在您的命令窗口中）

    ```
    compass install bootstrap 
    ```

（然后......每次在 Visual Studio 中打开解决方案时）

1.  导航到项目文件夹
2.  在命令窗口中输入

    ```
    compass watch 
    ```

    （这将监视项目的保存并重新编译 scss 文件）

希望有帮助

干杯斯图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T02:33:44.397

使用此命令为了将 GEM 添加到 Windows 路径环境变量：

设置 PATH=C:\Ruby200-x64\bin;%PATH%

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:00:01.130

要安装 Compass，您应该使用 Win+R 打开 Windows 控制台，`cmd`然后运行：

```
gem update --system
gem update
gem install compass 
```

不要忘记删除你在 Ruby 安装中乱扔垃圾的所有东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T17:45:47.403

在 Ruby 命令中，您应该编写：

```
gem update --system 
```

（这段代码更新了 Ruby 中的所有 gem）

然后你像这样安装 sass：

```
gem install sass 
```

（你说你已经有了sass，所以不需要再写这段代码了。）

然后，你写下这一行：

```
gem install compass 
```

（现在，你的机器里会有指南针）

要知道安装的版本，您可以编写：

```
compass --version 
```

要在您的台式机中创建一个新项目，您可以编写这行代码：

```
compass create desktop/my-project 
```

（这将在您的计算机桌面上创建一个名为 my-project 的指南针文件夹。我希望这会有所帮助。

# actionscript - ActionScript MDIWindow 调整大小问题

> ID：16003622
> 
> 赞同：1
> 
> 时间：2013-04-14T19:53:12.800
> 
> 标签：actionscript, resize, window, mdi

我有一个 MDIWindow 用于对我正在用 ActionScript 编写的 BigBlueButton 进行辅导扩展。我是 ActionScript 的新手。每当我创建此窗口时，它都非常大。我不知道为什么它没有显示为声明的宽度和高度。下面我已经包括了我的声明。我将不胜感激您能提供的任何帮助。谢谢！

```
<MDIWindow xmlns="flexlib.mdi.containers.*"
       xmlns:mx="http://www.adobe.com/2006/mxml"
       xmlns:mate="http://mate.asfusion.com/"
       xmlns:components="org.bigbluebutton.modules.example.view.components.*"
       xmlns:views="org.bigbluebutton.modules.example.views.*"
       width="650" height="900" label="StudentInterface" creationComplete="onCreationComplete()"
       implements="org.bigbluebutton.common.IBbbModuleWindow" layout="horizontal"
       title="Student Interface!"> 
```

# css - 我正在尝试消除我的 Wordpress 头版中的“神秘回车”

> ID：16003623
> 
> 赞同：0
> 
> 时间：2013-04-14T19:53:17.390
> 
> 标签：css, wordpress, wordpress-theming

以下是事实：

*   Wordpress 主题父：Pytheas（我使用的是子主题）
*   网站： http: [//longgame.org](http://longgame.org)
*   我是初学者。我还在学习 CSS 的基础知识。

**我的问题：**

在首页上，有一组五个“亮点”，我将在其中插入文本。请注意下图（描绘了最左边的两个）：

![我不知道这个黄色区域是在哪里生成的](https://i.stack.imgur.com/cZQ6i.png)

黄色高亮表示我似乎无法删除的区域。我做了以下事情：

*   检查 HTML 元素以确认没有意外回车。
*   删除了这个东西，*下一个*项目 - “关于”简介，“滑过”并表现出相同的行为。
*   搜索我的孩子主题以确定我是否搞砸了（无疑是问题，但我找不到它）。

我不知道这是什么时候开始发生的，但在过去的几天里，我一直在尝试使用 Wordpressy 的所有东西。

正如我所提到的，我是初学者。请让我知道我是否可以提供更多数据以提高纠正此问题的几率。

提前感谢您提供的任何建议。

编辑：我不确定是什么代码，特别是罪魁祸首，尤其是因为我什至不知道*如何*编辑任何 php-ish。我从来没有尝试过。:)

无论如何，也许这来自父主题？它来自**home-highlights.php** - 如果我要离开，请告诉我。

```
 <div class="grid-container clearfix">

    <?php
    $count=0; //set counter var
    foreach($hp_highlight_posts as $post) : setup_postdata($post); //start loop
    $count++; //increase counter var with each post in loop

    //meta
    $hp_highlights_url = get_post_meta($post->ID, 'wpex_hp_highlights_url', TRUE);
    $hp_highlights_icon = get_post_meta($post->ID, 'wpex_hp_highlights_icon', TRUE);
    ?>

    <div class="hp-highlight grid-5 <?php echo $post->ID; ?>"> 
        <h3>
            <?php
            //display icon if option not set to default
            if($hp_highlights_icon !='Select') { ?>
                <span class="wpex-icon-<?php echo $hp_highlights_icon; ?>"></span>
            <?php } //highlight meta option set to "Select" ?>
            <?php
            //show the highlight title as a link
            if(!empty($hp_highlights_url)) { ?><a href="<?php echo $hp_highlights_url; ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
            <?php }
            //show plain title because link option is blank
            else { the_title(); } ?>
        </h3>
        <?php
        //show the post content
        the_content(); ?> 
```

感谢您的礼仪反馈。下次我会做得更好。:)

进一步的研究：

这有关系吗？:[为什么是 ﻿ 出现在我的 HTML 中？](https://stackoverflow.com/questions/9691771/why-is-65279-appearing-in-my-html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:59:51.737

您在 h3 标记和 p 标记之间有一些额外的空格 ..尝试在此文本之前删除这些空格`<p>This the digital notebook of Matt Warren. Thanks for stopping by.</p>`

尝试使用`Firebug`

您当前包含空格的 HTML -

```
<div class="hp-highlight grid-5 13699"> 
            <h3><span class="wpex-icon-home"></span>
                Welcome
            </h3>
            &#65279;<p>This the digital notebook of Matt Warren. Thanks for stopping by.</p>
        </div> 
```

在上面的代码中，您拥有 `&#65279;`的是`Unicode`Character ' **ZERO WIDTH NO-BREAK SPACE' (U+FEFF)**。

我相信您从一个不同的文件/位置复制了内容，该文件/位置默默地包含了这些空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:02:06.517

似乎问题出在内容部分。尝试在 php.ini 文件的最后一行用“trim(the_content())”替换“the_content()”。

如果失败，则问题出在您的 php 文件中，而不是您的内容中。尝试完全重新键入您引用的 php 代码段的最后三行左右，以消除意外的奇怪字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:18:43.147

我疯狂地尝试了*trim()* -iming。没有骰子。幸运的是，G+ Wordpress 社区中的某个人提供了一条用户友好的评论，指出了答案：

> 嗨 +Matt Warren，在我看来，额外的空间在您的小部件代码中的某个地方。我假设您已经使用自定义文本小部件在标题中创建了各种块？在那里寻找空格或换行符 -> 我相信你会在开口前面找到一个毫无戒心的空间
> 
> 标签。您所指的 index.htm 文件是为了防止可能的鼻子窥探您的网络服务器上的文件；他们本该如此。﻿</p>

虽然它*不是*一个小部件，但它*是*我的主页：我的**空**主页。因为它实际上并没有被使用。*它只是*主页上其他内容的“替身” 。

我删除了主页。然后我重新创建它，进入*阅读设置*并将其*重新*设置为我的主页。问题解决了。

# html - 谷歌图表图像替换

> ID：16003624
> 
> 赞同：25
> 
> 时间：2013-04-14T19:53:17.960
> 
> 标签：html, image, charts, google-api, google-visualization

[Google Chart Images API](https://developers.google.com/chart/image/)目前已弃用，并计划于[2015 年 4 月 20 日](https://developers.google.com/chart/terms)停用。

是否有任何其他免费服务可以替换它并允许仅通过在 URL 中提供参数来生成图表图像？

这是一个用于生成 PNG 图像的 URL 示例，它可以用作 HTML img 源，在电子邮件中尤其有用：

[http://chart.apis.google.com/chart?chxl=1:|Apr+04|Apr+05|Apr+06|Apr+07|Apr+08|Apr+09&chxp=1,0,20,40 ,60,80,100&chxr=0,0,45&chxs=1,676767,11.5,0,lt,676767&chxt=y,x&chs=550x198&cht=ls&chco=3366CC,FF9900&chds=0,45,0,45&chd=t:7,12, 11,9,13,7|11,26,45,24,22,27&chdl=访问次数++++|页面+浏览量&chdlp=t&&chdls=333333,16&chg=100,20,0,0&chls=4|2](http://chart.apis.google.com/chart?chxl=1:|Apr+04|Apr+05|Apr+06|Apr+07|Apr+08|Apr+09&chxp=1,0,20,40,60,80,100&chxr=0,0,45&chxs=1,676767,11.5,0,lt,676767&chxt=y,x&chs=550x198&cht=ls&chco=3366CC,FF9900&chds=0,45,0,45&chd=t:7,12,11,9,13,7|11,26,45,24,22,27&chdl=Visits++++|Page+Views&chdlp=t&&chdls=333333,16&chg=100,20,0,0&chls=4|2)

这将生成以下图像，可以通过`<img>`标签轻松添加该图像，并且所有浏览器和电子邮件客户端都支持该图像。

![谷歌图表 API 图片](https://i.stack.imgur.com/rfOBf.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-10-11T21:42:21.400

在此公告之后，我们**[对 Google Image Charts 进行了替换，](https://image-charts.com)** 并在其上添加了[gif 动画](https://image-charts.com/documentation#chart-gif-animation)（电子邮件中的图表动画很棒！！）。

它被称为图像图表。不再有服务器端图表渲染的痛苦，没有缩放问题，它的速度非常快，1 个 URL = 1 个图像图表。

[![在此处输入图像描述](https://image-charts.com/chart?cht=bvg&chd=t:10,15,25,30,40,80&chs=700x300&chxt=x,y&chxl=0:%7CMarch%20%2718%7CApril%20%2718%7CMay%20%2718%7CJune%20%2718%7CJuly%20%2718%7CAugust%20%2718%7C&chdl=Visitors%20(in%20thousands)&chf=b0,lg,90,05B142,1,0CE858,0.2&chxs=1N**K&chtt=Visitors%20report&chma=0,0,10,10&chl=%7C%7C%7C%7C+33%25%20!%7Cx2%20!&chof=stackoverflow-39987235)](https://image-charts.com/chart?cht=bvg&chd=t:10,15,25,30,40,80&chs=700x300&chxt=x,y&chxl=0:%7CMarch%20%2718%7CApril%20%2718%7CMay%20%2718%7CJune%20%2718%7CJuly%20%2718%7CAugust%20%2718%7C&chdl=Visitors%20(in%20thousands)&chf=b0,lg,90,05B142,1,0CE858,0.2&chxs=1N**K&chtt=Visitors%20report&chma=0,0,10,10&chl=%7C%7C%7C%7C+33%25%20!%7Cx2%20!&chof=stackoverflow-39987235)

[![在此处输入图像描述](https://image-charts.com/chart?chs=700x300&chxt=x,y&chl=2018%7C2017%7C2015&chd=t:60,40,20&cht=pa&chdl=Image%7CCharts%7CRocks&chf=ps0-0,lg,45,ffeb3b,0.2,f443367C,1%7Cps0-1,lg,45,8bc34a,0.2,0096887C,1%7Cps0-2,lg,45,EA469E,0.2,03A9F47C,1&chan&chof=stackoverflow-39987235)](https://image-charts.com/chart?chs=700x300&chxt=x,y&chl=2018%7C2017%7C2015&chd=t:60,40,20&cht=pa&chdl=Image%7CCharts%7CRocks&chf=ps0-0,lg,45,ffeb3b,0.2,f443367C,1%7Cps0-1,lg,45,8bc34a,0.2,0096887C,1%7Cps0-2,lg,45,EA469E,0.2,03A9F47C,1&chan&chof=stackoverflow-39987235)

[![在此处输入图像描述](https://image-charts.com/chart?cht=lc&chd=s:ceAELfJHHHUjueuudde&chco=76A4FB&chls=2.0,0.0,0.0&chxt=x,y&chs=700x200&chg=20,51&chan&chof=stackoverflow-39987235)](https://image-charts.com/chart?cht=lc&chd=s:ceAELfJHHHUjueuudde&chco=76A4FB&chls=2.0,0.0,0.0&chxt=x,y&chs=700x200&chg=20,51&chan&chof=stackoverflow-39987235)

[![在此处输入图像描述](https://image-charts.com/chart?chs=700x200&cht=gv&chl=digraph%20%7Ba%20-%3E%20b%5Blabel=%220.2%22,weight=%220.2%22%5D;a%20-%3E%20c%5Blabel=%220.4%22,weight=%220.4%22%5D;c%20-%3E%20b%5Blabel=%220.6%22,weight=%220.6%22%5D;c%20-%3E%20e%5Blabel=%220.6%22,weight=%220.6%22%5D;e%20-%3E%20e%5Blabel=%220.1%22,weight=%220.1%22%5D;e%20-%3E%20b%5Blabel=%220.7%22,weight=%220.7%22%5D;%7D&chof=stackoverflow-39987235)](https://image-charts.com/chart?chs=700x200&cht=gv&chl=digraph%20%7Ba%20-%3E%20b%5Blabel=%220.2%22,weight=%220.2%22%5D;a%20-%3E%20c%5Blabel=%220.4%22,weight=%220.4%22%5D;c%20-%3E%20b%5Blabel=%220.6%22,weight=%220.6%22%5D;c%20-%3E%20e%5Blabel=%220.6%22,weight=%220.6%22%5D;e%20-%3E%20e%5Blabel=%220.1%22,weight=%220.1%22%5D;e%20-%3E%20b%5Blabel=%220.7%22,weight=%220.7%22%5D;%7D&chof=stackoverflow-39987235)

...和二维码：

```
https://image-charts.com/chart?
&chs=150x150
&cht=qr
&chl=Hello world
&choe=UTF-8 
```

[![在此处输入图像描述](https://image-charts.com/chart?chs=150x150&cht=qr&chl=Hello%20world&choe=UTF-8)](https://image-charts.com/chart?chs=150x150&cht=qr&chl=Hello%20world&choe=UTF-8)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-13T17:35:34.813

[http://www.jfree.org/eastwood/](http://www.jfree.org/eastwood/)是 google chart api 的开源实现。它不是 100% 忠实的，但对我来说已经足够接近了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-18T17:33:52.140

目前我还没有找到真正“直接链接”到图表的解决方案（见下文）。但是可以将图表转换为图像/PNG，这是先决条件。通过即时转换，您可以让用户将图表作为图像保存到文件中。

现代的谷歌图表是建立在一个[`<svg>`](https://developer.mozilla.org/en-US/docs/Web/API/SVGSVGElement)标签中的。这个标签的内容可以`<canvas>`使用优秀的**[canvg](https://code.google.com/p/canvg/)**库来绘制。

完成后，您可以将画布的内容传输到`<img>`by `canvas.toDataURL`。这是一个例子：

首先，包含canvg库

```
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/StackBlur.js"></script>
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
```

一些标记 - 3 个标签，一个`<div>`用于图表，一个`<canvas>`和一个`<img>`

```
<div id="chart_div" style="width: 400px; height: 300px"></div>  
<canvas id="canvas"></canvas> 
<img id="img" width="200"> 
```

注意`"width=200"`图像，只是为了证明这实际上是有效的:)

将图表绘制为“正常”（任何人都习惯这样做），这里简约只是为了测试

```
function drawLineGraph() {
   var data = new google.visualization.DataTable(someJSON);
   chart = new google.visualization.BarChart(document.getElementById("chart_div"));
   var options = {};
   chart.draw(data, options);
} 
```

在 上绘制图表`window.load`。我使用了`setTimeout`for 效果，但在现实生活中我认为最好使用`google.visualization.events.addListener(xxx, 'ready', function`.

```
window.onload = function() {
   drawLineGraph();

   setTimeout(function() {
     //get SVG content
     var chart = document.getElementById('chart_div').getElementsByTagName('svg')[0].parentNode;
     var svg = chart.innerHTML;

     //get the canvas, adjust width / height
     var canvas = document.getElementById('canvas');
     canvas.setAttribute('width', chart.offsetWidth);
     canvas.setAttribute('height', chart.offsetHeight);

     //transfer SVG to canvas by canvg
     canvg(canvas, svg);

     //get an image source by canvas.toDataURL and add to the image
     var imgsrc = canvas.toDataURL("image/png");
     document.getElementById('img').setAttribute('src', imgsrc);
    }, 1000);
} 
```

图像的 src 看起来像：

> data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsCAYAAADtt+XCAAAdCklEQVR4Xu2dfcyWZfnHDyFwtZVz68WcJWO9UCRuD4T9KjdrJC0HI8wWbmiTGMJPiXBg8bL+IIhioxio4aaiZIPZCxi9qCtro/ZsCatZGzSiLdZcNtwSwugX8Ou8Nhji88B5f0+vPdf5fD .. ..

当然会一直在……像往常一样。我还没有尝试操作/远程链接/发送这个——只用它作为图像——**但我相信这很容易**！

* * *

## 上面代码的结果/输出：

![在此处输入图像描述](https://i.stack.imgur.com/4Yrox.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-06T20:45:29.217

我在拉面的团队最近正是建立了这个。它被称为[ChartURL](https://charturl.com)。它不像 Google Charts API 那样永远​​免费，但有一个非常慷慨的免费层。

它允许您以两种方式构建 URL。首先，您可以将数据加密到 URL 中。我们将加密用于会计目的（因为它不是永远免费的）。在这两种情况下，您都将 a 和您的数据编码`template_slug`到 URL 中。这`template_slug`是图表配置的字符串表示形式，您可以在 ChartURL.com 上修改、预览和保存在您的帐户中。因此，您可以拥有`email-bar-chart-1`和每个都有自己的样式/配置，然后只需发送您想要在该模板中绘制的数据。`email-bar-chart-2``timeseries-signups`

这是在 ruby​​ 中生成 URL 的示例：

```
# This is a working example. View fully commented version here:
# https://gist.github.com/ryana/055414a4804806263b82
require 'json'
require 'openssl'
require 'base64'
require 'cgi'

ENCRYPT_KEY = "dek-d7a46236eda961a6c3c18ffcc6b077ba87d27e9ae85f7842c6d427c265dd5f69d5131308d93332353d4a55a4b1160fcf516515a4a9f0aa50fbf2d7a2e7d0f1c5"
ENCRYPT_KEY_DIGEST = KEY_DIGEST = OpenSSL::Digest::SHA256.new(ENCRYPT_KEY).digest
PROJECT_TOKEN = "dt-RwYN"

def charturl_url(template_slug, data)
  json = {options: data}.to_json
  cipher = OpenSSL::Cipher.new 'AES-256-CBC'
  cipher.encrypt
  iv = cipher.random_iv
  cipher.key = ENCRYPT_KEY_DIGEST
  encrypted_json = cipher.update(json) + cipher.final

  iv_for_url = CGI.escape(Base64.encode64(iv))
  data_for_url = CGI.escape(Base64.encode64(encrypted_json))

  "https://charturl.com/i/#{PROJECT_TOKEN}/#{template_slug}/#{iv_for_url}/#{data_for_url}"  
end

# Call our helper
url = charturl_url("weekly-activity",
    data: {columns: [["This Week", 10,12,41,9,14,15,15], ["Last Week", 9,14,21,21,20,3,5]]})

#=> https://charturl.com/i/dt-RwYN/weekly-activity/nEPfObOZ3zTivXZqri8ZLA%3D%3D%0A/7X6WrBHEdRcnutV0fU0sN8s9mHFGkkRr%2FZYJwb43p8PDzAJvGWd37zi6ro70%0AVJd9f%2FkSIq2dmJzGe%2BW6CSlpUIrhXHXogvXd%2B%2Fk4VOS%2BTSlnMBwKOSJJNpGZ%0AVrLZd%2Fgq1mSbiXQnc%2FydiTVcGL2DaA%3D%3D%0A 
```

由于 URL 有字符限制，我们还提供了一个 API，允许您向我们发布数据，我们将返回一个短 URL：

```
# This is a working example. View fully commented version here:
# https://gist.github.com/ryana/d37fccd7af3c6c409164/
require 'json'
require 'typhoeus'

API_KEY = "dak-55045dac-bb35-40ac-80c8-874ab71c6f83"

def charturl_url(template_slug, options)
  url = "https://charturl.com/short-urls.json?api_key=#{API_KEY}"
  headers = {'Content-Type' => 'application/json'}
  body = {template: template_slug, options: options}.to_json
  surl_response = Typhoeus::Request.post(url, body: body, headers: headers)
  raise("Error creating ShortURL: #{surl_response.inspect}") if !surl_response.success?
  JSON.parse(surl_response.body)['short_url']
end

# Call our helper
url = charturl_url("weekly-activity", data: {columns: [["This week", 4,1,5,6,1,7,8], ["Last week", 1,5,3,1,6,2,6]]})
url #=> "https://charturl.com/r/J9lA" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-08T10:36:22.600

我也一直在寻找其他可以生成静态图像图表的类似服务，但到目前为止都没有成功。

然而，一个选项是在您自己的服务器上使用 php 脚本创建您自己的“服务”，您可以向其传递参数。

您可以使用 php 图表库，例如[pChart](http://www.pchart.net/)之类的东西来使用 php 生成图形，并从脚本返回 .png 图像。

基于 javascript 的图表解决方案的一些问题是，如果您还想动态生成带有图表的 PDF，或者如果您想在富文本编辑器中生成图表，或者只是在电子邮件中使用它们，则通常无法使用它们（正如你已经提到的）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-22T13:04:46.103

我也遇到过这样一个问题，我需要使用 PHP 在服务器端使用基于静态图像的图表。我找到了一种使用 PhantomJS 和 Google Chart 的 javascript api 实现此目的的方法。以下是如何执行此操作的示例...

```
var webPage = require('webpage');
var page = webPage.create();

page.includeJs("https://www.gstatic.com/charts/loader.js", function() {
var expectedContent = '<html>' +
'<head>' + 
'<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> <script type="text/javascript">' +
  'google.charts.load("current", {packages:["corechart"]});'+
  'google.charts.setOnLoadCallback(drawChart);'+
  'function drawChart() {'+
    'var data = google.visualization.arrayToDataTable(['+
      '[\'Task\', \'Hours per Day\'],'+
      '[\'Work\',     11],'+
      '[\'Eat\',      2],'+
      '[\'Commute\',  2],'+
      '[\'Watch TV\', 2],'+
      '[\'Sleep\',    7]'+
    ']);'+

    'var options = {'+
      'title: \'My Daily Activities\','+
      'is3D: true,'+
    '};'+

    'var chart = new google.visualization.PieChart(document.getElementById(\'piechart_3d\'));'+
    'chart.draw(data, options);'+
  '}'+
'</script>'+
'</head>'+
'<body>'+
'<div id="piechart_3d" style="width: 900px; height: 500px;"></div>'+
'</body>'+
'</html>';

var expectedLocation = 'http://www.phantomjs.org/';
page.setContent(expectedContent, expectedLocation);
window.setTimeout(function () {
        page.render("mypng.png");
        phantom.exit();
    }, 1000); // Change timeout as required to allow sufficient time 

}); 
```

之后，您需要在 PHP 中运行此 javascript 文件：-

```
exec(ROOT_DIRECTORY . "\phantomjs.exe processImageData.js ", $output); 
```

# c# - MVC 中 ViewModel 构建器的接口

> ID：16003625
> 
> 赞同：4
> 
> 时间：2013-04-14T19:53:34.593
> 
> 标签：c#, interface, asp.net-mvc-viewmodel

我一直在努力下定决心如何在我的 MVC 解决方案中处理 ViewModel。我认为，在阅读了不同的帖子和博客之后，最好的方法是让构建器实现接口，然后将它们注入控制器本身。

使用自动映射器，我将在每个构建器的实现中进行实体和视图模型之间的映射，并且控制器将保持非常薄。

所以我创建了这个界面

```
public interface IViewModelBuilder<TViewModel, TEntity>
{
    TViewModel Build(TEntity entity);
} 
```

目前我忽略了关于使它们成为协变和逆变的警告（不知道是否需要这样做）。

对于特定的 ViewModel，虽然我需要从两个不同的服务中获取两个实体，所以我不知道应该传递什么类型的参数。

```
public class ConcreteVMBuilder: IViewModelBuilder<concreteVM, ????> 
```

也许那个界面不正确？

我知道合并控制器中获取的两个实体不是一个干净的解决方案，对吧？

如果有人可以帮我一把，我将非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:46:07.510

让可注入类型成为 vm 的嵌套类怎么样？

例如类似的东西

```
public class SomeViewModelBuilder : IViewModelBuilder<SomeViewModelBuilderArgs>
{
    public class SomeViewModelBuilderArgs 
    {
        public SomeEntity Entity1 { get; private set; }
        public SomeOtherEntity Entity2 { get; private set; }

        public SomeViewModelBuilderArgs(Entity1 someEntity, Entity2 someOtherEntity) 
        {
            SomeEntity = someEntity;
            SomeOtherEntity = someOtherEntity;
        }
    }

    public SomeViewModel Build(SomeViewModelBuilderArgs)
    {
        // Do work
        return new SomeViewModel();
    }
} 
```

然后调用您的标准接口来注入实体：

```
builderInterface.Build(new SomeViewModelClass.SomeViewModelBuilderArgs(ent1, ent2)); 
```

这些帮助有用？

编辑：另外 - 是否需要第一个通用参数，因为接口甚至不使用它？

Edit2：哦，我的错，你要退回它 - 忽略最后一条评论！

# asp.net-mvc - 如何在 asp.net mvc 中的 302 重定向上添加标头

> ID：16003628
> 
> 赞同：2
> 
> 时间：2013-04-14T19:53:55.627
> 
> 标签：asp.net-mvc, webclient, session-cookies, http-status-code-302

基本上我正在编写一些代码来执行内部网络客户端请求，获取所有标头，然后我想`Redirect()`通过控制器将这些标头添加到调用中。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-27T08:10:46.450

不幸的是，出于上述安全原因，这是不可能的。

# c++ - 抽象工厂 - 获取 LKN2019 死亡错误消息

> ID：16003629
> 
> 赞同：-2
> 
> 时间：2013-04-14T19:54:04.500
> 
> 标签：c++, linker, factory

我知道我一定遗漏了一个你似乎无法发现的细节，然后一个月后它会击中你“Evrika！”。

基本上，我要做的是为形状实现一个抽象工厂类，但我不断收到与从我的形状工厂代码创建的 .obj 相关的 LKN2019 错误消息。

它看起来有点像这样：

形状工厂.h

```
#ifndef SHAPEFACTORY_H__
#define SHAPEFACTORY_H__

#include <iostream>
#include <map>
#include <string>
#include "shape.h"
#include "circle.h"
#include "rectangle.h"
#include "triangle.h"

using namespace std;

typedef Shape *(createShapeFunction)(void);

class ShapeFactory
{
public:
    static void registerFunction(const string &, const createShapeFunction *);
    static Shape *createShape(const string &);
    static Shape *createShape(istream &);
private:
    static map <string, createShapeFunction *> creationFunctions;
    ShapeFactory();
    static ShapeFactory *getShapeFactory();
};

#endif 
```

形状工厂.cpp

```
 #include "shapefactory.h"

void ShapeFactory::registerFunction(const string & ID, const crateShapeFunction * CR )
{
    creationFunctions[ID] = CR;
}

Shape* ShapeFactory::createShape(const string & shapeName)
{
    map <string, crateShapeFunction *>::iterator it = creationFunctions.find(shapeName);
    if( it != creationFunctions.end() )
        return it->second();
    return NULL;

}

Shape* ShapeFactory::createShape(istream & in)
{
    string shapeName;
    cout << "Desired figure: ";
    in >> shapeName;

    map <string, crateShapeFunction *>::iterator it = creationFunctions.find(shapeName);
    if( it != creationFunctions.end() )
        return it->second();

    return NULL;

}

ShapeFactory::ShapeFactory()
{

    registerFunction("circle", &Circle::Create);
    registerFunction("rectangle", &Rectangle::Create);
    registerFunction("triangle", &Triangle::Create);

}

ShapeFactory* ShapeFactory::getShapeFactory()
{
    static ShapeFactory instance;
    return &instance;
} 
```

我可能在方法的实现中搞砸了，但我根本看不到在哪里。任何形式的及时帮助将不胜感激。

编辑：错误看起来像这样

错误 4 错误 LNK2001：未解析的外部符号“私有：静态类 std::map,class std::allocator >,class Shape * (__cdecl*)(void),struct std::less,class std::allocator > >,类 std::allocator,类 std::allocator > const ,类 Shape * (__cdecl*)(void)> > > ShapeFactory::creationFunctions" (?creationFunctions@ShapeFactory@@0V?$map@V?$basic_string@DU ?$char_traits@D@std@@V?$allocator@D@2@@std@@P6APAVShape@@XZU?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@ D@2@@std@@@2@V?$allocator@U?$pair@$$CBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@ @P6APAVShape@@XZ@std@@@2@@std@@A) C:\Proj1\shapefactory.obj

在按照 alexrider 的建议在我的标题中定义地图之前。谢谢 - 现在可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:56:49.910

您缺少`static map <string, createShapeFunction *> creationFunctions;`
This 的定义可以通过添加来修复

```
map <string, createShapeFunction *> ShapeFactory::creationFunctions; 
```

进入 shapefactory.cpp
顺便说一句，粘贴您得到的实际错误消息会很有帮助。

# ios - 在dismissModalViewControllerAnimated 后iAd 横幅消失了

> ID：16003631
> 
> 赞同：6
> 
> 时间：2013-04-14T19:54:07.473
> 
> 标签：ios, iad, adbannerview, banner-ads

在我的应用委托中，我实例化了一个 iAd 横幅并将其分配给委托属性，然后加载主视图控制器。

在主视图控制器中，我将 iAd 横幅添加为子视图，并实例化一个“主菜单”视图控制器并将其视图添加为子视图。太好了，现在我的应用程序有了一个主菜单（使用`UINavigationController`其他视图从导航堆栈中推送/弹出，将广告留在顶部）。

但是，当我显示一个模式对话框（如发送电子邮件）并关闭它时，iAd 横幅消失了，主菜单视图现在占据了整个屏幕。我需要做些什么来“刷新”顶部的 iAd 视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T14:41:34.447

听起来您有 2 个 UIViewControllers，并且您试图在不使用任何容器 API 的情况下手动将一个子视图添加到另一个 - 我并不惊讶这不能正常工作。

请参阅 iOS 视图控制器编程指南中的“创建自定义容器视图控制器”，或者更简单地，创建一个始终在顶部显示广告的 UIViewController 子类。

# java - Jtree Renderer 设置自定义图标不起作用

> ID：16003633
> 
> 赞同：0
> 
> 时间：2013-04-14T19:54:11.697
> 
> 标签：java, swing, jtree, renderer

我正在尝试解析下面的 XML 文件并使用自定义图标创建一个基于它的 JTree。

```
<OBJECTS>
    <WINDOW NAME = "WINDOW 01" URL = "URL 01">
        <PAGE NAME = "PAGE 01" URL = "PAGE URL 01">
        </PAGE>
    </WINDOW>
</OBJECTS> 
```

用户定义的节点类如下所示：

```
public class DataNode extends DefaultMutableTreeNode {    
    private static final long serialVersionUID = 1L;
    public String ObjectType, ObjectName, URL, ElementType;
    public DefaultMutableTreeNode node;

    public DataNode(DefaultMutableTreeNode node, Element element) {
        this.node = node;
        this.ObjectType = element.getTagName();
        this.ObjectName = element.getAttribute("NAME");
        this.URL = element.getAttribute("URL");
        this.ElementType = element.getAttribute("TYPE");
    }

    public DataNode(Element element) {
        this.node = new DefaultMutableTreeNode("OBJECT");
        this.ObjectType = element.getTagName();
        this.ObjectName = "Object List";
        this.URL = "";
        this.ElementType = "";
    }

    @Override
    public String toString() {
        return this.ObjectName;
    }
} 
```

这是主要课程：

```
public class MyOwn {
    private JFrame contentsFrame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MyOwn window = new MyOwn();
                    window.contentsFrame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public MyOwn() {
        contentsFrame = new JFrame();
        contentsFrame.setTitle("My JTree");
        contentsFrame.setBounds(100, 100, 549, 738);
        contentsFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTree objectListTree = new JTree(convertXMLtoTree("G:/Collection.xml"));
        objectListTree.setAlignmentY(Component.TOP_ALIGNMENT);
        objectListTree.setAlignmentX(Component.LEFT_ALIGNMENT);

        contentsFrame.getContentPane().add(new JScrollPane(objectListTree));
    }

    private DefaultMutableTreeNode convertXMLtoTree(String Path) {
        NodeList nWindow, nPage;
        DefaultMutableTreeNode dRoot, dWindow, dPage;
        DataNode xRoot, xWindow, xPage;

        try {
            File fXmlFile = new File(Path);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);

            doc.getDocumentElement().normalize();
            xRoot = new DataNode(doc.getDocumentElement());
            dRoot = new DefaultMutableTreeNode(xRoot);
            nWindow = doc.getDocumentElement().getElementsByTagName("WINDOW");

            for (int i = 0; i < nWindow.getLength(); i++) {
                dWindow = new DefaultMutableTreeNode(((Element)(nWindow.item(i))).getAttribute("NAME"));
                xWindow = new DataNode(dWindow, (Element)(nWindow.item(i)));
                dRoot.add(xWindow);
                nPage = ((Element)(nWindow.item(i))).getElementsByTagName("PAGE");
                for (int j = 0; j < nPage.getLength(); j++) {
                    dPage = new DefaultMutableTreeNode(((Element)(nPage.item(j))).getAttribute("NAME"));
                    xPage = new DataNode(dPage, (Element)(nPage.item(j)));
                    xWindow.add(xPage);
                }
            }
            return dRoot;
        } catch (Exception e) {
            return null;
        }
    }
} 
```

渲染器类如下所示：（抛出 NullPointerException 的行被突出显示）

```
class MyRenderer extends DefaultTreeCellRenderer {

    private static final long serialVersionUID = 1L;

    public MyRenderer() { }

    public String toString() {
        return "NODE NAME";
    }

    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus)
    {
        ImageIcon ObjectsIcon = createImageIcon("images/Element.JPG");
        ImageIcon WindowIcon = createImageIcon("images/fig7.jpg");
        ImageIcon PageIcon = createImageIcon("images/message_icon.gif");
        ImageIcon UnknownIcon = createImageIcon("images/phone_icon.gif");

        super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);

        switch (ObjectType(value)) {
            case 1: setIcon(ObjectsIcon);
                    break;
            case 2: setIcon(WindowIcon);
                    break;
            case 3: setIcon(PageIcon);
                    break;
            case 0: setIcon(UnknownIcon);
                    break;
        }

        return this;
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = MyOwn.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }

    private int ObjectType(Object value) {
        DefaultMutableTreeNode node = (DefaultMutableTreeNode)value;
        DataNode nodeInfo = (DataNode) node.getUserObject(); //This is where the NullPointerException occurs
        String title = nodeInfo.ObjectType;

        if (title.equalsIgnoreCase("OBJECT"))
            return 1;
        else if (title.equalsIgnoreCase("WINDOW"))
            return 2;
        else if (title.equalsIgnoreCase("PAGE"))
            return 3;
        else
            return 0;
    }
} 
```

请让我知道为什么 nodeInfo 对象为空？感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:52:24.400

节点对象是`null`因为您没有为您的 custom 设置用户对象`DefaultMutableTreeNode` `DataNode`。鉴于您想要匹配您可以使用的节点文本：

```
public DataNode(DefaultMutableTreeNode node, Element element) {
   super(element.getTagName());
       ...
} 
```

然后，在`MyRenderer`：

```
if (value instanceof DataNode) { // added check for class type
   String title = (String) node.getUserObject();
   ... 
```

顺便说一句，使用 a`DefaultMutableTreeNode`作为类成员变量 in`DataNode` 是不必要的。它已经*是一个* `DefaultMutableTreeNode`并且任何可能的节点操作都可以使用从超类继承的方法来处理。

# jplayer - jplayer在IE中不播放ogg文件

> ID：16003635
> 
> 赞同：0
> 
> 时间：2013-04-14T19:54:14.453
> 
> 标签：jplayer, ogg

我一直在尝试制作 ogg 文件以在 IE10 中播放（它们在 FF 和 Chrome 中播放良好）。我的印象是，虽然 IE 没有原生支持，但 Jplayer 仍然可以通过 swf 播放 ogg 文件。但是，即使使用正确路径的 swf 文件，它似乎也无法播放。

我在 jsfiddle 中尝试过 - 也无法播放：http: [//jsfiddle.net/YAe4g/49/embedded/result/](http://jsfiddle.net/YAe4g/49/embedded/result/)

```
 $("#jquery_jplayer_1").jPlayer({
    swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
    ready: function () {
    $(this).jPlayer("setMedia", { oga: "http://www.makemyradio.com/hooks/mar2013/001.ogg" });
    },
    supplied: "oga"
    }); 
```

由于 mp3 不能在 FF 中播放，我要么需要找到 IE/ogg 的修复程序，要么必须根据浏览器从两种文件格式中动态选择。有谁知道是否有针对 IE/ogg 的修复程序？

谢谢你，

克里斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T00:33:44.647

jplayer 将播放 swf 文件，但将它们从 mp3s 转换*，*而不是 ogg。您可以使用免费软件 Audacity 快速批量转换 ogg 库。

您*确实*需要根据浏览器从两种文件格式中动态选择，但 jPlayer 会为您执行此操作。只需将它与 ogg 和 mp3（或 m4a）一起安装，jPlayer 将完成剩下的工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T14:07:29.903

IE 不支持 .ogg 文件....

# android - ActionBarSherlock 4 - 从另一个类扩展？

> ID：16003636
> 
> 赞同：0
> 
> 时间：2013-04-14T19:54:14.793
> 
> 标签：android, actionbarsherlock, pull-to-refresh

我正在尝试使用：

[https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)

使用 ActionBarSherlock 4，我陷入了 MainActivity 类扩展 SherlockActivity 而 Pull-to-Refresh 库扩展 ListActivity 的部分。

有谁知道我能做什么？

我还看到另一个旧帖子： [Android 上 EasyTracker 和 ActionBarSherlock 的使用](https://stackoverflow.com/questions/9586401/usage-of-both-easytracker-and-actionbarsherlock-on-android)

杰克在那里说“你可以创建自己的基础活动，从你想要的任何类扩展”

我怎样才能在我的 ListActivity 上做到这一点？

提前谢谢，丁...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:48:07.167

ActionBarSherlock 还包含一个`SherlockListActivity`类，它提供与`ListActivity`. 一个警告是它`SherlockListActivity`不会扩展，因此您将无法在该 Activity 中使用**s**，如[本问题](https://stackoverflow.com/questions/15837916/sherlocklistactivity-does-not-have-getsupportfragmentmanager-method)中所述。`FragmentActivity``Fragment`

如果您想使用 Fragments、ActionBarSherlock 和使用`ListView`s 的辅助类之一，我建议您使用`SherlockActivity`and a `Fragment`that extends `SherlockListFragment`。

# java - 如何使用 Selenium WebDriver 导航和单击网页上的按钮？

> ID：16003637
> 
> 赞同：0
> 
> 时间：2013-04-14T19:54:20.070
> 
> 标签：java, button, selenium

我在使用 Selenium 导航“搜索”按钮时遇到问题。我需要单击“搜索”按钮，然后返回初始页面并再次单击它。***我的代码导航此按钮并在第一次***完美点击它，然后网页返回到初始 URL。然后它应该再次导航同一个按钮，但是，它不起作用......我使用了许多不同的方式（xpath等）这里有什么问题？这是我的完整代码。可以将其复制粘贴到 eclipse 中，看看我在说什么：

```
 import java.util.concurrent.TimeUnit;
     import org.openqa.selenium.By;
     import org.openqa.selenium.WebDriver;
     import org.openqa.selenium.WebElement;
     import org.openqa.selenium.chrome.ChromeDriver;

     public class Search {

public static void main(String[] args) throws InterruptedException {

    System.setProperty("webdriver.chrome.driver",
            "chromedriver\\chromedriver.exe");
    WebDriver driver = new ChromeDriver();
    driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS);

    // Getting the initial page
    driver.get("http://pqasb.pqarchiver.com/chicagotribune/advancedsearch.html");
    driver.findElement(By.xpath("//input[@value='historic']")).click();
    WebElement element = driver.findElement(By.name("QryTxt"));
    element.sendKeys("issue");
    driver.findElement(
            By.xpath("//input[@value='Search'][@onclick='return checkinput(this.form, 0);'][@type='button']"))
            .click();

    // Getting back to the initial page
    driver.get("http://pqasb.pqarchiver.com/chicagotribune/advancedsearch.html");
    driver.findElement(
            By.xpath("//input[@value='Search'][@onclick='return checkinput(this.form, 0);'][@type='button']"))
            .click();
    /**
     * This command does not execute. It is supposed to click on the button
     * "SEARCH" It worked well in the above identical code line, however now
     * it just does not recognize the existence of this button How can I
     * overcome this issue? I tried navigating this button by all different
     * means (xpath etc...)
     */
}

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:14:51.440

有什么例外吗？重定向后 DOM 是否发生了变化？您使用的是哪个浏览器？

我注意到该按钮`<input type="button" onclick="return checkinput(this.form, 1);" value="Search"/>`在再次转到该网址后变为。

所以你需要 `driver.findElement( By.xpath("//input[@value='Search'][@onclick='return checkinput(this.form, 1);'][@type='button']")).click();`

# java - 不支持的主要次要版本 51.0，但我的 JRE 是最新的

> ID：16003638
> 
> 赞同：6
> 
> 时间：2013-04-14T19:54:25.127
> 
> 标签：java

我在 Windows 7 上的 Eclipse 中构建了一个 Java 应用程序。我在 VMWare 机器上安装了 Mac OSX 10.7.4。

我使用 JDK 1.7 构建了该应用程序。我的 Windows 上有 JRE 1.7，该应用程序运行良好。我在 Mac VM 机器上安装了 Java 1.7。

在我的 Mac VM 机器上启动应用程序时，我收到“unspported major.minor version 51.0”错误。

我知道这个错误意味着我没有正确的 JRE 来运行我的 JAR 文件，但我确实安装了 JRE 7（我今天安装了它）。

我的应用程序使用 Apache FTP 客户端库，但它们都包含在 JAR 文件中（我将 Eclipse 项目导出到一个可运行的 JAR 文件中，其中包含所有必需的库）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T10:38:58.733

这个问题的解决方案可以在这篇文章中找到：[Installed Java 7 on Mac OS X but Terminal is still using version 6](https://stackoverflow.com/questions/12757558/installed-java-7-on-mac-os-x-but-terminal-is-still-using-version-6)。

感谢大家的帮助。

# ruby-on-rails - 大礼包电子邮件不显示总价和小计价，可能是无效值？

> ID：16003644
> 
> 赞同：0
> 
> 时间：2013-04-14T19:55:02.347
> 
> 标签：ruby-on-rails, ruby, spree

Spree 不会在订单确认电子邮件中显示小计和总价。但是，它会在网站的订单列表中正确显示。

```
 => #<Spree::Order id: 5, number: "R816268161", item_total: #<BigDecimal:c1e72e0,'0.7E4',9(18)>, total: #<BigDecimal:c1e7204,'0.819E4',9(18)>, state: "complete", adjustment_total: #<BigDecimal:c1e7060,'0.119E4',9(18)>, user_id: 1, completed_at: "2013-04-14 13:23:20", bill_address_id: 3, ship_address_id: 4, payment_total: #<BigDecimal:c1e67f0,'0.0',9(18)>, shipping_method_id: 1, shipment_state: "pending", payment_state: "balance_due", email: "my email was here", special_instructions: nil, created_at: "2013-04-14 12:54:32", updated_at: "2013-04-14 13:23:20", currency: "HUF", last_ip_address: "78.92.236.239"> 
```

它总共显示一个值 "BigDecimal" ，这是应该的吗？

# delphi - Delphi Firebird UDF 只返回一个字符

> ID：16003652
> 
> 赞同：3
> 
> 时间：2013-04-14T19:55:32.173
> 
> 标签：delphi, delphi-xe2, user-defined-functions, firebird2.5

我正在使用火鸟 2.5。

我正在尝试编写一个 Delphi XE2 UDF 从一些输入参数返回一些字符串。

Delphi中的函数如下：

```
function  FormatRasaSingle(var formatRasa : PChar; var aDenumire : PChar; var aCod : PChar; var aSimbol : PChar; var aTulpina : PChar) : PChar;
var tmpString  : String;
    tmpInteger : Integer;
begin
  tmpString := formatRasa;
  tmpString := StringReplace(tmpString, '#DENUMIRE', aDenumire, [rfReplaceAll, rfIgnoreCase]);
  tmpString := StringReplace(tmpString, '#COD', aCod, [rfReplaceAll, rfIgnoreCase]);
  tmpString := StringReplace(tmpString, '#SIMBOL', aSimbol, [rfReplaceAll, rfIgnoreCase]);
  tmpString := StringReplace(tmpString, '#TULPINA', aTulpina, [rfReplaceAll, rfIgnoreCase]);
  tmpString := 'MAMA';
  tmpInteger := Length(tmpString) + 1;
  Result     := ib_util_malloc(tmpInteger);
  StrPCopy(Result, tmpString);
end; 
```

udf 声明是：

```
DECLARE EXTERNAL FUNCTION FORMATRASASINGLE
    CSTRING(255),
    CSTRING(255),
    CSTRING(255),
    CSTRING(255),
    CSTRING(255)
RETURNS CSTRING(255) FREE_IT
ENTRY_POINT 'FormatRasaSingle' MODULE_NAME 'eliteSoftFirebird'; 
```

当我试图测试函数结果时，只有第一个字母“M”。

线条

```
 tmpString := 'MAMA'; 
```

仅用于测试。真正的代码在这一行之前。

但不工作。

有人可以建议我吗？

错误在哪里？

此外，当我尝试输入一个参数时，我会收到一个大错误，例如“从连接读取数据时出错”。

Tks

拉兹万

* * *

这个函数必须如何假设双参数是数字（5、2）？

```
function  FormatRasaMultiple(const formatRasa, aDenumire, aCod, aSimbol, aTulpina : PAnsiChar; aProcent : Double) : PAnsiChar; cdecl; export; 
```

该函数与前一个完全相同，但多了一个数字参数。

到目前为止（我的旧 UDF Firebird 1.5）我将声明用作“var aProcent：Double”，但是当我返回时它没有任何价值。

UDF 声明如下：

```
DECLARE EXTERNAL FUNCTION FORMATRASAMULTIPLE
    CSTRING(255),
    CSTRING(255),
    CSTRING(255),
    CSTRING(255),
    CSTRING(255),
    NUMERIC(5, 2)
RETURNS CSTRING(255) FREE_IT
ENTRY_POINT 'FormatRasaMultiple' MODULE_NAME 'eliteSoftFirebird'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:19:26.867

您选择了错误的数据类型小丑。

`String`, `PChar`, 和`Char`不是 Delphi 中的数据类型，而是一些实际数据类型的别名。

取决于 Delphi 版本，有时取决于编译器设置，这些可能是类型的快捷方式，例如：

*   在德尔福 2009+: `UnicodeString`, `PWideChar`,`WideChar`
*   默认情况下，在 Unicode 32 位之前的 Delphi 中：`AnsiString`, `PAnsiChar`,`AnsiChar`
*   在 16 位 Delphi 中或具有兼容性设置： `ShortString`, `PAnsiChar`,`AnsiChar`

因此，在类型不安全的 DLL 项目中使用类型别名，您就认为 Delphi 编译器会为您选择合适的数据类型。这一次赌输了。

`WideChar`并`UnicodeString`使用 UTF-16 字符集，对于非 Unicode 应用程序（或对于应用程序，通过协议期望非 Unicode 数据）看起来像（在 2009 年之前的 Delphi 术语中）这样的零交错字符串，`'a'^@'b'^@'c'^@`而不是`'abc'`. 根据 ASCIIZ (C) 字符串约定，这意味着字符串在第一个字符之后结束。

因此，你应该让你的 DLL 接口在两边都匹配：你的源和 Firebird 的期望。

*   如果可能，您可以尝试说 Firebird 这些字段和结果使用 UTF-16 字符集，但我怀疑 Firebird 在`CSTRING`.
*   `AnsiString`您可以使用数据类型，根据 Firebird DLL 的期望对您的 DLL 进行编码`PAnsiChar`，`AnsiChar`

我还强烈建议您阅读 Delphi 帮助，了解 Delphi 2009+ 中的 Unicode 及其对兼容性的影响，尤其是关于 DLL 和指针数学等低级类型不安全的东西。谷歌上也很少有关于该主题的文章。

使用 DLL，您可以删除 Delphi 编译器的类型安全检查，因此您有责任确保 DLL APi 两侧的二进制数据表示相同。键入别名，如`string`,会使其非常脆弱`char`且`PChar`容易出错。

* * *

此外，我看不到您为 DLL 入口点函数选择的调用约定。`cdecl`您是否使用关键字或`stdcall`或标记了您的功能`register`？根据 cdecl 约定判断`c:\Program Files (x86)\Firebird\Firebird_2_1\include\ib_util.pas`很可能是正确的，但是您应该查看有关此主题的 Firebird 手册。

[http://en.wikipedia.org/wiki/Calling_convention#x86](http://en.wikipedia.org/wiki/Calling_convention#x86)

这是针对 32 位代码的，但是对于 64 位 UDF，可能会要求其他一些约定。

* * *

现在，更奇怪的事情是您对参数模式的选择。您的函数具有类似的参数`var xxx:pointer`，这意味着双重间接。您的函数需要指针 -> 指向指针 -> 指向字符，这似乎不正确或不合理。我已将`var`限定符更改为`const`您的函数参数定义中的。

这个样本 - 虽然它被遗弃并且质量有问题（它受到上述令人头晕的别名问题的困扰）也支持`VAR`这里限定符错误的想法：http: [//fireudflib.cvs.sourceforge.net/viewvc/fireudflib/src/ EMail.pas?view=markup](http://fireudflib.cvs.sourceforge.net/viewvc/fireudflib/src/EMail.pas?view=markup)

* * *

把这些点放在一起，我想你的功能应该是这样的

```
function FormatRasaSingle(const formatRasa, aDenumire, aCod, aSimbol, aTulpina : PAnsiChar) : PAnsiChar; cdecl; export;
var tmpString  : AnsiString;
    tmpInteger : Integer;
begin
  tmpString := 'MAMA';

  Assert( SizeOf(tmpString[1]) = SizeOf(byte) );

  tmpInteger := Length(tmpString);

  Result     := ib_util_malloc(tmpInteger + 1);
  StrPLCopy(Result, tmpString, tmpInteger);
end; 
```

[http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.StrPLCopy](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.StrPLCopy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:21:03.810

AFAIR，CSTRING 表示以空结尾的类 C 字符串，因此您不能使用 UTF16 相关的数据类型。尝试改用 ANSI 类型。

# c++ - 工厂应该负责重建序列化对象吗？

> ID：16003654
> 
> 赞同：3
> 
> 时间：2013-04-14T19:55:35.977
> 
> 标签：c++, oop, factory-pattern

我正在做一个作业，我必须在其中实现抽象工厂模式。我得到了一个工厂类的模板，我需要实现（和调整）它以使测试程序通过。

模板如下所示：

```
typedef Shape *(createShapeFunction)(void);
/* thrown when a shape cannot be read from a stream */

class WrongFormatException { };

class ShapeFactory
{
    public:
        static void registerFunction(const std::string &, const createShapeFunction *);
        static Shape *createShape(const std::string &);
        static Shape *createShape(std::istream &);

    private:
        std::map<std::string, createShapeFunction *> creationFunctions;

        ShapeFactory();
        static ShapeFactory *getShapeFactory();
}; 
```

第一次重载`createShape`方法的第一个重载是直截了当的，但是第二个重载用于要求工厂知道其产品如何序列化的场景。

更准确地说：生成一堆具有随机参数的形状，序列化为流，然后将流馈送到第二个重载，以便一个一个地重建对象。

根据我对 OOP 的了解，这似乎不正确，因为以这种方式反序列化对象意味着了解它们是如何序列化的，这不可避免地导致违反封装原则（将产品的实现细节泄露给工厂） .

这是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:26:41.813

我认为您的工厂类很好，并且没有违反任何面向对象设计的**[SOLID](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)**原则。

工厂应该知道它创建的类有什么共同点。换句话说：它知道**基类不变量**，包括表示有效对象的流标记。在输入错误的情况下抛出异常是完全有效的。由于该知识存储在注册表中，因此类本身不依赖于具体类，而仅依赖于抽象基类（[**依赖倒置原则**](http://en.wikipedia.org/wiki/Dependency_inversion_principle)）。

它在编译时不知道的是**整个类层次结构**。该知识仅在运行时通过其注册表显而易见。这有效地将静态类型切换更改为动态映射查找，这是 OO 中多态性的首选使用，并且可以轻松构造新的子类，而无需修改工厂类（所谓的**[开放/封闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)**）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:23:37.620

I have not read the assignment, but think you might have misunderstood the function of the second *createShape*. If not, I apologize, but this is what I think.

The first *createShape* gets one single key (the shape name) and then creates it. Pretty straight forward as you said.

The second *createShape* **does not** receive a bunch of shapes already created and serialized (as you described) but a bunch of keys. It gets a stream that contains a collection of keys and then **iterates** over all of them creating all the respective shapes. It is meant, I think, to create shapes in bulk.

It is probably part of the assignment so you show you know how to use **iterators**.

I would add code, but it would be cheating ; )

# jquery - jQuery 自定义插件 - 如何正确返回结果？

> ID：16003656
> 
> 赞同：0
> 
> 时间：2013-04-14T19:55:40.117
> 
> 标签：jquery, object, plugins, null, undefined

我正在创建我的第一个 jQuery 插件来轻松获取所需的数据，而无需为不同的元素重复相同的脚本。我希望我的插件可以得到如下形式的东西：宽度、高度、位置和更多指定元素和他的父级（我需要他们稍后使用），格式如下：

```
$('element').myPlugin(); // will return all
$('element').myPlugin(width); // will return only width
$('element').myPlugin(width, height); // will return width and height 
```

我不知道如何以正确的形式从插件中获取数据。我试图弄清楚但总是得到“未定义”或 [Object object] 结果。如果有人能给我举例说明我的“[[?]]”部分应该如何看，我将不胜感激：

```
(function($){
    $.fn.myPlugin = function(options) {

        var defaults = {
            width: this.width(),
            height: this.height(),
            parentWidth: this.parent().width(),
            [[more]]
        }
        var options = $.extend(defaults, options);

    return this.each(function () {

    var $this = $(this);

    [[?]]

    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:24:51.887

one way to do this is to store the data into the element 'data object'. here is the code:

```
$.fn.myPlugin = function(options) {
    var defaults = {
        width: this.width(),
        height: this.height(),
        parentWidth: this.parent().width(),
        [[more]]
    }
    var options = $.extend(defaults, options);

    return this.each(function () {
        var $this = $(this);
        var dimen = {width: width, height: height, ..}

        $this.data('dimen', diemn);
    };
}; 
```

Now apply your plugin:

```
 $('selector').myPlaugin(); 
```

Later you can get the data:

```
 $('selector').data('dimen'); //will return the dimention object 
```

There may be better ways to do this.

# python - Django中的相对导入

> ID：16003661
> 
> 赞同：0
> 
> 时间：2013-04-14T19:56:17.363
> 
> 标签：python, django, python-import, relative-path

我目前正在开发一个客户端/服务器应用程序。客户端和服务器都是 Django 项目。

我想在服务器应用程序中导入客户端模型。这是我的文件的树状结构：

```
client/
    fileapp/
        __init__.py
        models.py
        ...
    client/
        __init__.py
        ...
    manage.py

server/
    fileapp/
        __init__.py
        views.py
        ...
    server/
        __init__.py
        ...
    manage.py 
```

我想在我的服务器项目中，导入客户端/文件应用程序/模型。我尝试使用 Django shell 执行此操作，并使用该指令进行相对导入：

```
>>> from ..client.fileapp.models import *
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named client.fileapp.models 
```

我也尝试将客户端路径附加到 sys.path 但它也不起作用。如果你知道如何做那种机制，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T04:51:37.263

```
client/
    fileapp/
        __init__.py
        models.py
        ...
    client/
        __init__.py
        ...
    __init__.py
    manage.py

server/
    fileapp/
        __init__.py
        views.py
        ...
    server/
        __init__.py
        ...
    __init__.py
    manage.py
__init__.py
... 
```

# mysql - SQL MIN() & GROUP BY

> ID：16003663
> 
> 赞同：0
> 
> 时间：2013-04-14T19:56:19.593
> 
> 标签：mysql, group-by, min

我正在寻找一个更优雅的解决方案来解决与 GROUP BY 结合使用的 MySQL MIN() 问题。

我有两张桌子：

1.  产品（id，group_id）
2.  product_attributes (product_id, attribute_id, value)

我希望从某个产品组的每个金属组（attribute_id = 40）中选择最便宜的金属。

以下查询有效，但我很确定它本来可以写得更好。

```
SELECT metal.product_id, metal.value AS `metal`, `price`.value AS `price`
FROM
    product_attributes metal
INNER JOIN
    (
        SELECT metal.value AS `metal`, MIN(price.value) AS `price`
        FROM 
            product_attributes metal
        LEFT JOIN 
            product_attributes price
        ON metal.product_id = price.product_id
        INNER JOIN products p
        ON p.id = metal.product_id
        WHERE
            metal.attribute_id = 40 AND
            price.attribute_id = 37 AND
            p.group_id = 1
        GROUP BY
            metal.value
        ORDER BY metal ASC, price DESC
    ) AS d ON
    d.metal = metal.value
LEFT JOIN
    product_attributes price ON
    metal.product_id = price.product_id AND price.attribute_id = 37
INNER JOIN
    products p ON
    p.id = metal.product_id
WHERE
    metal.attribute_id = 40
    AND d.price = price.value
    AND p.group_id = 1
GROUP BY
    metal.value
ORDER BY
    metal.value ASC,
    price.value DESC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:08:16.903

解决方案终于比我简单了。我在内部查询中按价格对数据进行了排序，因此在 GROUP BY 之前强制进行排序，这样我就得到了我需要的东西（每个金属组中最便宜的产品）。

```
SELECT * FROM
            (
                SELECT metal.enum_id AS `metal`, metal.product_id FROM product_attributes metal
                LEFT JOIN product_attributes price ON metal.product_id = price.product_id AND price.attribute_id = 37
                INNER JOIN products p ON p.id = metal.product_id
                WHERE
                    metal.attribute_id = 40 AND
                    p.group_id = 1 AND
                    p.id NOT IN (SELECT DISTINCT product_id FROM product_attributes WHERE (attribute_id=162 OR attribute_id=204 OR attribute_id=205) AND `value`=1)
                ORDER BY price.value+'0' ASC 
            ) AS s
            GROUP BY metal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:43:54.330

我想你可以把它写成一个`group by`声明：

```
 SELECT metal.value AS `metal`, metal.product_id, MIN(price.value) AS `price`
  FROM product_attributes metal LEFT JOIN 
       product_attributes price
       ON metal.product_id = price.product_id
       INNER JOIN products p
       ON p.id = metal.product_id
  WHERE metal.attribute_id = 40 AND
        price.attribute_id = 37 AND
        p.group_id = 1
  GROUP BY metal
  order by metal, price 
```

这有效，假设`product_id`每个`metal.value`. 如果有多个这样的产品 id，那么您需要重新加入属性表：

```
SELECT metal.product_id, metal.value AS `metal`, d.`price`
FROM (SELECT metal.value AS `metal`, MIN(price.value) AS `price`
      FROM product_attributes metal LEFT JOIN 
           product_attributes price
           ON metal.product_id = price.product_id
           INNER JOIN products p
           ON p.id = metal.product_id
      WHERE metal.attribute_id = 40 AND
            price.attribute_id = 37 AND
            p.group_id = 1
      GROUP BY metal
    ) d join
    product_attributes metal
    ON d.metal = metal.value
ORDER BY metal.value ASC, d.price DESC 
```

您可能还需要`where`和 附加连接。这取决于您的数据结构。

# meteor - Meteor Accounts 重置密码令牌始终为空

> ID：16003665
> 
> 赞同：2
> 
> 时间：2013-04-14T19:56:51.423
> 
> 标签：meteor, token, reset-password

查看它的源代码`url_client.js`清楚地表明

```
 // reset password urls use hash fragments instead of url paths/query
    // strings so that the reset password token is not sent over the wire
    // on the http request 
```

我正在使用[迷你页面](https://github.com/cmather/meteor-mini-pages)不使用 url 中的哈希片段的

我设置了一个迷你页面路由来处理以下路径：'reset-password/:code'

```
match = window.location.hash.match(/^\#\/reset-password\/(.*)$/); 
```

哈希匹配总是返回 null，我该怎么做才能获得令牌？我认为令牌存储在数据库中，不应该在设置重置密码令牌之前对数据库进行流星验证

accounts-urls 包定义了在前面查找“#”的助手，并且由于某种原因我的 url 永远不会被捕获。

```
 Accounts.urls.resetPassword = function (token) {
  return Meteor.absoluteUrl('#/reset-password/' + token);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T19:54:56.737

对于任何想知道的人。这是由meteor-router 或mini-router 陨石包附带的html5history API 包引起的。我删除了它们，令牌不再为空

# html - div的浮动内容

> ID：16003669
> 
> 赞同：2
> 
> 时间：2013-04-14T19:57:24.200
> 
> 标签：html, css

我有一个固定宽度的 div，我想在容器的右侧显示它。在左侧，我想显示一个 div，以便在右侧 div 结束后其文本在右侧 div 下方展开。请看下图：

![在此处输入图像描述](https://i.stack.imgur.com/rAbRn.png)

这是我目前正在尝试的：

**HTML：**

```
<div class="wrapper">
    <div class="left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eu ipsum augue. </div>
     <div class="right">float right.</div>
</div> 
```

**CSS：**

```
.wrapper{
    overflow: hidden;
    border: 1px solid red;
    width: 300px;
}

.left{
    float: left;
    width: 200px;
    background: brown;
}

.right{
    float: right;
    width: 100px;
    background: green;
} 
```

**JSFiddle：http:** [//jsfiddle.net/qyrKY/](http://jsfiddle.net/qyrKY/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T19:59:21.060

将 div 的顺序更改为以下内容：

```
<div class="wrapper">
    <div class="right">float right.</div>
    <div class="left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eu ipsum augue. Nulla ac turpis sem, vitae iaculis diam. Pellentesque nisl magna, gravida tempus laoreet in, bibendum eget dolor. Morbi convallis sem faucibus turpis viverra vestibulum. Nam at urna elit, eget elementum elit. Donec pretium placerat mauris ut blandit. Phasellus sit amet est ante, quis dignissim metus. Mauris id neque ligula, sit amet convallis nunc.</div>
</div> 
```

并将您的左侧 CSS 类更改为：

```
.left {
    background: brown;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/qyrKY/1/)**

# gwt - 如何获取内容以将页脚向下推（使用 UiBinder 和 DockLayoutPanel）？

> ID：16003671
> 
> 赞同：0
> 
> 时间：2013-04-14T19:57:35.683
> 
> 标签：gwt

如何让我的内容将页脚推到屏幕下方？内容消失了，而不是将页脚进一步向下推（就像我们在 SO 主页上看到的那样）。

我正在使用 UiBinder、.`DockLayoutPanel`和 CSS 以及 GWT 2.5.1。

我的 UiBinder xml 如下（这里是[文件的链接](https://github.com/justinhrobbins/FlashCards_App/blob/8e9fa30646d296b4b8798db0e33f6d7dd069faf9/FlashCards_GWT/src/main/java/org/robbins/flashcards/client/ui/desktop/ShellViewImplDesktop.ui.xml)）

```
<g:DockLayoutPanel unit='PX' styleName="{style.shellStyles.wrap}">
<g:north size='180'>
    <g:HTMLPanel styleName='{style.shellStyles.header}'>
        <div id="login" class="{style.shellStyles.login}">
            <g:InlineLabel ui:field="loggedInUser"/>
            <g:InlineHyperlink ui:field="loginLogoutLink"/>
        </div>
        <h1><a href="/">Flash Cards Application</a></h1>
    </g:HTMLPanel>
</g:north>
<g:south size="70">
    <g:HTMLPanel styleName="{style.shellStyles.footer}">
        <g:Label>&copy; Copyright by Justin Robbins</g:Label>
    </g:HTMLPanel>
</g:south>
<g:center>
    <g:HTMLPanel styleName='{style.shellStyles.content}'>
        <g:SimplePanel styleName='{style.shellStyles.left}' ui:field="navigationPanel" />
        <g:ScrollPanel styleName='{style.shellStyles.right}' ui:field='contentPanel' alwaysShowScrollBars="false" />
        <div style="clear: both;" ></div>
    </g:HTMLPanel>
</g:center> 
```

CSS 的摘录如下（这里是[完整 CSS 的链接](https://github.com/justinhrobbins/FlashCards_App/blob/master/FlashCards_GWT/src/main/java/org/robbins/flashcards/client/ui/desktop/style/ShellStyles.css)）：

```
.wrap {
    width: 820px;
    margin: 20px auto 10px auto;
}
@sprite .header {
gwt-image: "headerImage";
background-color: #efefef;
height: 180px;
}
@sprite .content {
    gwt-image: "contentImage";
    background-color: #efefef;
    padding: 10px 40px 20px 20px;
    min-height: 500px;
}
.left {
    width: 210px;
    float: left;
}
@sprite .left h4 {
    gwt-image: "sidebarImage";
    padding: 0 0 0 10px;
    height: 50px;
    line-height: 50px;
    color: #fff;
}
.right {
    width: 530px;
    float: right;
    padding-top: 10px;
    padding-right: 60px;
}
@sprite .footer {
    gwt-image: "footerImage";
    background-color: #efefef;
    height: 70px;
    line-height: 70px;
    color: #fff;
    text-align: center;
}

*{margin:0; padding:0;}
body {
    font-family: Arial;
    font-size: 12px; 
    background: #efefef;
    color: #232323; 
    margin:0; 
    padding:0;
    line-height: 150%;
} 
```

**更新**：opowell 建议将南面板的内容移至中心有帮助。页脚现在被向下推。但是现在内容向下延伸到屏幕底部以下，但没有出现滚动条。现在有什么关于获得滚动条的建议吗？我为滚动条问题创建了一个[单独](https://stackoverflow.com/questions/16007318/why-doesnt-this-uibinder-page-have-a-vertical-scrollbar)的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:30:51.090

将南面板的内容移动到中心就那么简单吗？

```
<g:DockLayoutPanel unit='PX' styleName="{style.shellStyles.wrap}">
<g:north size='180'>
    <g:HTMLPanel styleName='{style.shellStyles.header}'>
        <div id="login" class="{style.shellStyles.login}">
            <g:InlineLabel ui:field="loggedInUser"/>
            <g:InlineHyperlink ui:field="loginLogoutLink"/>
        </div>
        <h1><a href="/">Flash Cards Application</a></h1>
    </g:HTMLPanel>
</g:north>

<g:center>
  <g:FlowPanel>
    <g:HTMLPanel styleName='{style.shellStyles.content}'>
        <g:SimplePanel styleName='{style.shellStyles.left}' ui:field="navigationPanel" />
        <g:ScrollPanel styleName='{style.shellStyles.right}' ui:field='contentPanel' alwaysShowScrollBars="false" />
        <div style="clear: both;" ></div>
    </g:HTMLPanel>
    <g:HTMLPanel styleName="{style.shellStyles.footer}" height="70">
        <g:Label>&copy; Copyright by Justin Robbins</g:Label>
    </g:HTMLPanel>
  </g:FlowPanel>
</g:center> 
```

# c++ - 找出逐级树遍历的级别

> ID：16003677
> 
> 赞同：0
> 
> 时间：2013-04-14T19:58:05.483
> 
> 标签：c++, algorithm, data-structures, tree, binary-tree

我想知道如何找出每个节点所在的级别。但我无法弄清楚。

这是代码部分的一部分，但我必须对其进行修改。

```
if(root == NULL)
return;
q.enqueue(root);
while(!queue.empty()){
 queue.dequeue(cur);
 if( cur != NULL){
   cout<<cur->data<<" ";
   if(cur->left != NULL)
   queue.enqueue(cur->left);
   if(cur->right != NULL)
   queue.enqueue(cur->right);
  }
} 
```

如何修改代码，让我知道每个节点的级别？希望你们能给我一些关于这个问题的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:06:30.637

您正在执行正确方向的水平顺序遍历。如果您需要打印您所处的级别：

```
if(root == NULL)  
   return;  
int level = 1;  
q.enqueue(root);  
q.enqueue(NULL);    
while(!queue.empty()){  
 queue.dequeue(cur);  
 if(cur == NULL){  
    //going to next level  
    level++;      
    if(queue.empty()){  
       break;  
    }  
    queue.enqueue(NULL);  
 }    
 else {  
   cout << "LEVEL is: " << level;  
   cout<<cur->data<<" ";
   if(cur->left != NULL){
      queue.enqueue(cur->left);  
   }  
   if(cur->right != NULL){  
      queue.enqueue(cur->right);  
   }  
 }    
} 
```

# mongodb - 使用 CLI 实用程序将字段添加到 mongo 集合

> ID：16003680
> 
> 赞同：0
> 
> 时间：2013-04-14T19:58:24.300
> 
> 标签：mongodb

我正在尝试将新字段添加到集合中。

我可以成功找到收藏：

```
> db.accounts.findOne({ "screen_name": "juancviotti" })
{
    "_id" : ObjectId("5169d1c93b95610a4e3bac5b"),       
    "screen_name" : "juancviotti"       
} 
```

但是，在尝试创建新字段时出现此非描述性错误：

```
> db.accounts.update({ "screen_name": "juancviotti" }, { $set : { "last_transaction" , 10.0 } })
Sun Apr 14 17:05:51 JS Error: SyntaxError: invalid object initializer (shell):0 
```

什么语法错误？我正在按照文档所说的做。

我正在关注这个例子：[http ://docs.mongodb.org/manual/core/update/#update-a-field-in-a-document](http://docs.mongodb.org/manual/core/update/#update-a-field-in-a-document)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:07:12.873

将 $set 中的 ,​​ 替换为 : （在 $last_transaction 之后）

```
db.accounts.update({ "screen_name": "juancviotti" }, { $set : { "last_transaction" : 10.0 } }) 
```

# c++ - 使用 Linux 程序 make 在 C++ 中编译错误

> ID：16003681
> 
> 赞同：-1
> 
> 时间：2013-04-14T19:58:26.017
> 
> 标签：c++

我目前正在尝试将这部分代码从 C 移植到 C++。它基本上将 snprintf 语句替换为 C++ 实现。

```
 if (len > 0)                        // If statement for 0 length buf error
    {
        localTime(tv, &etime2);

        // Printing to the supplied buffer in the main program
        char timebuf[80];               // Buffer to hold the time stamp
        oststream oss(timebuf, sizeof(timebuf));

        oss << etime2.et_year << ends;
        cout << timebuf << endl;
//      snprintf(buf, len, "%02i %s %02i %02i:%02i:%02i:%03i",
//      etime2.et_year, month[etime2.et_mon], etime2.et_day, etime2.et_hour,
//      etime2.et_min, etime2.et_sec, etime2.et_usec); 
```

我已经把原文注释掉了，`snprintf`所以我有它的参考。我需要使用`cout`、 OSS 和`oststream`. 我已经包含了正确的标题`iostream`、`strsteam`和“使用命名空间 std;”。但是，当我使用“make”运行它时，出现以下错误

```
g++ -g -Wno-deprecated -c fmttime.cc fmttime.o
fmttime.cc:14:22: error: strsteam.h: No such file or directory
fmttime.cc:15:21: error: iosteam.h: No such file or directory
fmttime.cc: In function 'char* formatTime(timeval*, char*, size_t)':
fmttime.cc:273: error: 'oststream' was not declared in this scope
fmttime.cc:273: error: expected ';' before 'oss'
fmttime.cc:275: error: 'oss' was not declared in this scope
fmttime.cc:275: error: 'ends' was not declared in this scope
fmttime.cc:276: error: 'cout' was not declared in this scope
fmttime.cc:276: error: 'endl' was not declared in this scope
make: *** [fmttime.o] Error 1 
```

这是我的制作文档供参考。

```
#Variables
PROGRAM = plot
OBJS = plot.o fmttime.o
CXXFLAGS = -g -Wno-deprecated
LIBS = -lm -lcurses

#Rules
all : ${PROGRAM}

${PROGRAM} : ${OBJS}
        g++ ${OBJS} ${LIBS} -o ${PROGRAM}

%.o : %.cc
        g++ ${CXXFLAGS} -c $< $@

clean:
        rm ${OBJS} ${PROGRAM} 
```

所以我一直在尝试一切，我在标题之后包含了 .h，但我知道在 C++ 中它不是必需的。我不明白为什么它告诉我`iostream`并且`strstream`超出范围......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:01:04.777

您正在使用已弃用（和拼写错误）的标题。

使用`<sstream>`and`<iostream>`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:01:27.930

你有错字：

```
oststream //^^typo 
```

您需要包含正确的头文件：

```
 #include <iostream>
 #include <sstream> //not strstream, deprecated 
```

使用正确的命名空间标准：

```
std::cout;
std::endl; 
```

或使用命名空间标准；

# python - Python- raw_input 不起作用

> ID：16003682
> 
> 赞同：1
> 
> 时间：2013-04-14T19:58:26.157
> 
> 标签：python, defined

好的，所以我将其更改为：

```
if input('a'):
      print ("You: Gimme a gun!")

if input('b'):
       print ("You: Fine") 
```

但是现在我没有选择，它迫使我选择a，然后又迫使我选择b，一旦我克服了这个障碍，我就把剩下的游戏放在了包里，但我真的需要帮助来解决这个问题出 PS 我是 python 的菜鸟

```
import time
Gimme=True
Fine=True

print ("James: Ah, it looks like subject 091-266 is awake")
time.sleep(4)
print ("Scarlet: Hello, do you remember anything? The crash or anything?")
time.sleep(4)
print ("You: What.... Where am I?")
time.sleep(3)
print ("Scarlet: Oh, where are my manners, this is the head quarters of the XionRepublic, Xion")                        
time.sleep(5)
print ("James: You were involved in Z-9102, code named Attack-Z")
time.sleep(4)
print ("Scarlet: We were able to pull you and three others out before we  were forced to...")                                             
print ("James: Exterminate Alpha Base 12.")
time.sleep(6)
print ("You: Exterminate?! Couldn't you just quarantine it?")
time.sleep(4)
print ("Scarlet: No, Alpha Base 12 had over 3,000 people in it, it was to risky to quarantine")      
time.sleep(5)
print ("James: Do you recognize these names, Noah, Alex or Robert?")
time.sleep(4)
print ("You: Yes Alex!? Why? Is he ok?!")
time.sleep(3)
print ("James: Yes, Yes he was one of the three.")
time.sleep(4)
print ("*ALARM! SECURITY BREACHED, SECURITY BREACHED*")
time.sleep(4)
print ("James: Scarlet lock the door!")
time.sleep(3)
print ("You: Whats going on?!")
time.sleep(3)
print ("James: Z's there here.")
time.sleep(3)
print ("*Screaming*")
time.sleep(2)
print ("You: I can fight!")
time.sleep(3)
print ("Scarlet: Trust me you are not in any condition to fight due to some of the drugs in you")   
print ("CHOICE")
print ("A.Gimme the gun!")
print ("B.Fine")

if raw_input() == Gimme:
    print ("You: Gimme a gun!")
if raw_input() == Fine:
    print ("You: Fine") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:02:00.643

如果您使用的是新版本的 python -- 3.xx -- 那么 raw_input 不再存在。改用输入（提示）。它的工作原理几乎相同。基本语法：

```
foo = input("some prompt"). 
```

输入的作用是从标准输入文件中读取一行，或者`<stdin>`. 它在 中打印提示`()`，然后等待用户输入。示例：(`>>>`是命令行提示符，`<<<`是输出

```
Command Line, interactive mode (or IDLE): 
>>> foo = input("GIMME SOME INPUT: ")  #tell it to take some input
<<<GIMME SOME INPUT: foo          # it prints out, "GIMME SOME INPUT:" user types in foo
>>> print(foo)
<<< foo 
```

回复您的编辑：

用这个：

```
print ("CHOICE")
print ("A.Gimme the gun!")
print ("B.Fine")
choice = input("What do you choose?")
if choice == 'A' or choice == 'a':
    #Some Action 
if choice == 'B' or choice == 'b': 
    #Some Other Action 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:01:15.277

您似乎正在使用 Python 3。在 Python 3 中，[`raw_input()`已重命名为`input()`](http://www.python.org/dev/peps/pep-3111/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:20:43.210

重新提出您的新问题：

> 但是现在我没有选择它迫使我选择a 然后它迫使我选择b

那是因为您调用`input()`了两次，每次*调用它时*，系统都会提示您输入一些内容。您想调用*一次*，将获得的值存储在变量中，然后将该变量与可能的选择进行比较。

# java - 使用 entitymanager 删除有时会失败

> ID：16003683
> 
> 赞同：0
> 
> 时间：2013-04-14T19:58:32.657
> 
> 标签：java, database, postgresql, eclipselink, persistent

我从数据库中删除持久对象时遇到问题。我有一些表之间存在双向关系。我有一个删除仍然被另一个对象引用的对象的测试，这有时会失败。我无法弄清楚为什么会这样。

我的人际关系是这样的：

```
@ManyToOne(cascade = CascadeType.ALL, targetEntity = Application.class, optional = false)
@JoinColumn(name = ModelConstants.ID_APPLICATION, nullable = false, insertable = true, updatable = true)
private Application application;

@OneToMany(cascade = CascadeType.ALL, targetEntity = Clazz.class, mappedBy = "pakage")
private List<Clazz> clazzes; 
```

你有什么想法，为什么我不能通过 EntityManager 删除一行？

我的测试：

```
@Test
public void testDeleteMethodReferencedByMethodCall() {
    Application application = new Application("", "testApplication");
    Pakage pakage = new Pakage("", "testPakage", application);
    Clazz clazz = new Clazz("", "testClazz", pakage);
    Method methodCaller = new Method("testFirstMethod", "testMethodFirst",
    clazz);
    Method methodCalled = new Method("testSecondMethod", "testMethodSecond",
    clazz);
    MethodCall methodCall = new MethodCall(methodCaller, methodCalled);
    DatabaseUtils.persistObject(entityManager, methodCall);

    assertEquals(2, getCountRows("m", entityMethod));
    assertEquals(1, getCountRows("mc", entityMethodCall));

    DatabaseUtils.removeObject(entityManager, methodCall);
    assertEquals(0, getCountRows("m", entityMethod));
    assertEquals(0, getCountRows("mc", entityMethodCall));
} 
```

移除对象：

```
public static void removeObject(EntityManager entityManager,
  DatabaseElement databaseElement) {
    entityManager.getTransaction().begin();
    entityManager.remove(databaseElement);
    entityManager.getTransaction().commit();
} 
```

例外：

```
javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: update or delete on table "pakage" violates foreign key constraint "fk_clazz_id_pakage" on table "clazz"
Detail: Key (id_pakage)=() is still referenced from table "clazz".
Error Code: 0
Call: DELETE FROM public.pakage WHERE (id_pakage = ?)
    bind => [1 parameter bound]
Query: DeleteObjectQuery(Pakage[id_pakage = , name_pakage = testPakage, Application[id_application = , name_application = testApplication]]) at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:24:14.780

我找到了解决方案：如果我在删除之前调用对象的刷新，那么一切正常。

像这样：

```
entityManager.refresh(databaseElement);
entityManager.remove(databaseElement); 
```

也许一些缓存在后台工作，有时我在对象中有正确的关联，有时没有，但我不确定。

# ios - 使用 AFNetworking setImageWithURL 设置 UIImageView 圆角：

> ID：16003684
> 
> 赞同：0
> 
> 时间：2013-04-14T19:58:35.983
> 
> 标签：ios, cocoa-touch, calayer, afnetworking

这在 UIImageView 上不使用 AFNetworking 的类别方法时有效，但我意识到 AF 可能会覆盖所做的任何事情，因为这是异步发生的：

这是在我的自定义 UITableViewCell 中（自己是单元格）：

```
NSURL *url = [NSURL URLWithString:video.thumbnail];    
[self.imageView setImageWithURL:url
               placeholderImage:[UIImage imageNamed:@"Logo.png"]];
// not working
CALayer *layer = [self.imageView layer];
[layer setMasksToBounds:YES];
[layer setCornerRadius:10.0]; 
```

也尝试将它放在调用 setImageWithURL 之前。

这是我现在拥有的，它不是圆角：

```
NSURL *url = [NSURL URLWithString:_video.thumbnail];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
UIImage *placeHolder = [UIImage imageNamed:@"Logo"];
__weak UIImageView *imageView = self.thumbnail;

[self.thumbnail setImageWithURLRequest:request placeholderImage:placeHolder success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

    imageView.image = image;
    // round the edges of the video thumbnail
    CALayer *layer = [imageView layer];
    [layer setMasksToBounds:YES];
    [layer setCornerRadius:8.0];

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    NSLog(@"couldn't load image: %@", [error localizedDescription]);
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T21:18:20.893

```
NSURLRequest *request = [NSURLRequest requestWithURL:url];
__weak UIImageView *imageView = self.imageView;
[self.imageView setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"Logo.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    imageView.image = image;
    CALayer *layer = imageView.layer;
    layer.masksToBounds = YES;
    layer.cornerRadius = 10.0f;
} failure:NULL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:03:44.097

我从未使用过 AFNetworking，但我看到有一个版本的`setImageWithURL`方法需要一个“成功”块。尝试使用该版本并在“成功”块中更新图像视图的图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T15:55:45.397

[可在https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)获得的 SDWebImage 库包括以下方法：

*   (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder completed:(SDWebImageCompletedBlock)completedBlock;

以下代码是我正在处理的一个项目的示例实现，带有一个相当大的圆角。我在同一个项目中同时使用了 AFNetworking 和 SDWebImage。

```
 __weak UIImageView * theImageView = self.imageView;

    [self.imageView setImageWithURL:[NSURL URLWithString:user.imgurl] placeholderImage:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
        // I only attempt to apply this if an image has been returned.
        if (image) {
            theImageView.image = image;
            CALayer * layer = theImageView.layer;
            layer.masksToBounds = YES;
            layer.cornerRadius = 20.0f;
        }

    }]; 
```

# javascript - 在淘汰赛js中调整用户数组的显示

> ID：16003688
> 
> 赞同：0
> 
> 时间：2013-04-14T19:59:00.437
> 
> 标签：javascript, knockout.js, knockout-2.0, infinite-scroll

目前我正在使用淘汰赛 js 将用户显示到页面中，并且由于用户数量可能超过 250 个用户，我不想一次加载所有 250 个用户，因为 1-它不能全部放入页面 2-它会慢慢来。我将使用滚动功能，因此当用户滚动时，我将加载更多用户来显示。

当前代码获取所有用户的长度，可能是 250 或 500，然后每页显示 20 个并分页直到结束。

**问题**我想更改代码，以便它只显示前 20 个用户，当用户滚动时，它会抓取下一个 20 - 无需在加载前计算所有用户。

**淘汰赛JS**

```
 var _rosterUsers = new Array();

$.views.Roster.RosterViewModel = function (data) {
    var self = this;
    self.RosterUsers = ko.observableArray([]);
    _rosterUsers = self.RosterUsers;
    self.currentPage = ko.observable(1);
    self.toDisplay = ko.observable(20);
    filteredRoster = ko.computed(function(){
        var init = (self.currentPage()-1)* self.toDisplay(),
            filteredList = [],
            rosterLength = self.RosterUsers().length,
            displayLimit = self.toDisplay();
        if(rosterLength == 0)
            return[];
        for(var i = init; i<(displayLimit + init) - 1 && i<rosterLength; i++)
        {
            filteredList.push(self.RosterUsers()[i]);
        }
        return filteredList;
    }),
    totalRoster = ko.computed(function () {
        return self.RosterUsers().length;
    }),
    changePage = function (data) {
        self.currentPage(data);
    },
    next = function () {
        if ((self.currentPage() * self.toDisplay()) > self.RosterUsers().length)
            return;

        self.currentPage(self.currentPage() + 1);
    },
    prev = function () {
        if (self.currentPage() === 1)
            return;

        self.currentPage(self.currentPage() - 1);
    },

    $.views.Roster.RosterViewModel.AddUsers(data);
}; 
```

**在 Knockout 文件中滚动 JS**

```
$(window).scroll(function () {
    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
        if (parseInt($.views.Roster.RosterViewModel.currentPage(), "10") * 20 < parseInt($.views.Roster.RosterViewModel.totalRoster(), "10")) {
            $.views.Roster.RosterViewModel.next();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:06:21.470

koGrid.js 是为此而构建的，但服务器必须计算项目的数量。我们将此工具用于具有超过 20K 条目并且没有性能影响的表。查询在一秒钟内执行。

# static - 在 symfony 2.2 twig 中访问静态变量

> ID：16003691
> 
> 赞同：10
> 
> 时间：2013-04-14T19:59:31.847
> 
> 标签：static, twig, symfony-2.2

我有一个包含数组形式的常量选项的类：

```
namespace MyNameSpace;

class OptionConstants
{
  /**
   * Gender options
   */
   public static $GENDER = array(
    'Male',
    'Female'
   );

  /**
   * University year levels
   */
   public static $UNVERSITY_STANDING = array(
    '--None--',
    'First Year',
    'Second Year',
    'Third Year',
    'Fourth Year',
    'Graduate Student',
    'Graduated',
    'Other'
   );
} 
```

如何在 symfony 2.2 twig 中访问 $UNVERSITY_STANDING 或 $GENDER？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T14:23:18.283

[只需调用常量函数](http://twig.sensiolabs.org/doc/functions/constant.html)

```
{{ constant('Namespace\\Classname::CONSTANT_NAME') }} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-20T00:49:33.177

您可以创建一个自定义的 Twig 函数，如下所示：

```
$staticFunc = new \Twig_SimpleFunction('static', function ($class, $property) {
        if (property_exists($class, $property)) {
            return $class::$$property;
        }
        return null;
    }); 
```

然后将其添加到 Twig

```
$twig->addFunction($staticFunc); 
```

现在您可以从视图中调用此函数

```
{{ static('YourNameSpace\\ClassName', 'VARIABLE_NAME') }} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-11T15:59:38.217

我对此类问题的解决方案是在 TwigExtention 中创建一个静态成员：

```
class TwigExtension extends \Twig_Extension
{
    private static $myStatic = 1;
    ... 
```

在扩展中创建功能：

```
public function getStatic($something)
{
    self::$myStatic += 1;
    return self::$myStatic;
} 
```

并在树枝上调用它：

```
{{"something"|getStatic}} 
```

问候

# perl - 为目录中的每个 .ly 文件运行 lilypond

> ID：16003696
> 
> 赞同：-1
> 
> 时间：2013-04-14T20:00:02.543
> 
> 标签：perl

我知道我可以通过 Perl 文档来编写这个，但我怀疑有一个简单的单行代码可以完全按照我的意愿进行操作，而这将花费我太长时间才能弄清楚。

我有一段音乐的主要 .ly 文件，以及一组较小的 .ly 文件来生成部分和指挥的分数。

所以，我想做的基本上是这样的：

```
for each file in directory
   if filename ends in ".ly"
      lilypond filename
   endif
endfor 
```

感谢 Similar Questions，我刚刚找到了 .BAT 的答案，但我想知道下次如何在 Perl 中完成。：-） 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:08:57.260

```
use autodie qw( :all );
opendir(my $dh, $dir_qfn);
while (defined( my $file = readdir($dh) )) {
   system('lilypond', "$dir_qfn\\$file")
      if $file =~ /\.ly\z/i;
} 
```

# python - 如何在 Python 中打印命令？

> ID：16003700
> 
> 赞同：2
> 
> 时间：2013-04-14T20:00:17.847
> 
> 标签：python, debugging, io, stdout, stdin

我不在编程领域，但我最近对 ​​Python 感兴趣。我正在编写一些函数，但为了调试，我需要查看正在运行的命令。例如：

```
def foo():
    for i in xrange(0,5):
        a = 1 + i 
```

是否可以使解释器输出

```
>>> for i in xrange(0,5)
>>> a = 1 + 0
>>> a = 1 + 1
>>> a = 1 + 2
>>> a = 1 + 3
>>> a = 1 + 4 
```

为了

```
>>> foo() 
```

或者至少写入文件发生了什么？我过去做过一些脚本，我记得这在 DOS 中是可能的，使用 @ECHO ON 或其他东西。我做了一些阅读，我觉得它与 Python 中的标准输入和标准输出有关，所以我尝试了

```
import sys
def foo():
    for i in xrange(0,5):
        a = 1 + i
        sys.stdin.flush()
        sys.stdout.flush() 
```

但我什么也没得到......我也试过了

```
import sys
# foo()
sys.stdin.read()
sys.stdout.read() 
```

和[https://stackoverflow.com/a/3289051/2032568](https://stackoverflow.com/a/3289051/2032568)，但它只是挂起。抱歉，如果这不是适合初学者的地方。我找不到任何可以回答我问题的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:14:42.697

要让解释器在运行时打印出表达式值，您可以使用[print](http://docs.python.org/2/reference/simple_stmts.html#print)语句。还要注意 Python 的[字符串格式化工具](https://stackoverflow.com/q/5082452/1025391)。

例子：

```
for i in xrange(0,5):
    a = 1 + i
    # print the value of a:
    print "the current value of variable 'a':", a 
```

无需显式刷新标准输出，除非您想强制打印没有终止换行符的行：

```
import sys
import time
for i in xrange(0,5):
    a = 1 + i
    # print the value of a:
    # the trailing comma prevents 'print' from adding a newline
    print "\rthe current value of variable 'a':", a, 
    sys.stdout.flush()
    # short pause for purposes of demonstration
    time.sleep(1)
# finally print a newline
print 
```

* * *

要在执行之前打印每个语句，请查看[跟踪](http://docs.python.org/2/library/trace.html)模块。

例子：

```
y = 0
for xi in range(3):
    y += xi
print y 
```

输出：

```
$ python -m trace -t tt.py
 --- modulename: tt, funcname: <module>
tt.py(2): y = 0
tt.py(3): for xi in range(3):
tt.py(4):     y += xi
tt.py(3): for xi in range(3):
tt.py(4):     y += xi
tt.py(3): for xi in range(3):
tt.py(4):     y += xi
tt.py(3): for xi in range(3):
tt.py(5): print y
3
 --- modulename: trace, funcname: _unsettrace
trace.py(80):         sys.settrace(None) 
```

* * *

您首先要寻找的也可能是调试器，例如[pdb](http://docs.python.org/2/library/pdb.html)。您将获得一个交互式会话，您可以在其中单步执行代码，并以交互方式查看数据。

例子：

```
$ python -m pdb tt.py
> /home/moooeeeep/tt.py(2)<module>()
-> y = 0
(Pdb) n
> /home/moooeeeep/tt.py(3)<module>()
-> for xi in range(3):
(Pdb) n
> /home/moooeeeep/tt.py(4)<module>()
-> y += xi
(Pdb) n
> /home/moooeeeep/tt.py(3)<module>()
-> for xi in range(3):
(Pdb) n
> /home/moooeeeep/tt.py(4)<module>()
-> y += xi
(Pdb) print y, xi
0 1
(Pdb) 
... 
```

大多数 Python IDE（例如[PyDev](http://pydev.org/)）都很好地集成了调试功能。所以我的建议：去拿一个调试器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T20:12:57.587

看看[跟踪模块](http://docs.python.org/2/library/trace.html)

```
python -m trace --count -C . somefile.py 
```

输出放置在 currebt 目录中：

```
$ cat somefile.trace
    1: def foo():
    6:     for i in xrange(5):
    5:         a = 1 + i

    1: foo() 
```

> -c, --count 在程序完成时生成一组带注释的列表文件，显示每个语句执行了多少次

如果使用该`-t`选项，您会得到：

```
$ python -m trace --count -t tr.py 
 --- modulename: tr, funcname: <module>
tr.py(1): def foo():
tr.py(5): foo()
 --- modulename: tr, funcname: foo
tr.py(2):     for i in xrange(5):
tr.py(3):         a = 1 + i
tr.py(2):     for i in xrange(5):
tr.py(3):         a = 1 + i
tr.py(2):     for i in xrange(5):
tr.py(3):         a = 1 + i
tr.py(2):     for i in xrange(5):
tr.py(3):         a = 1 + i
tr.py(2):     for i in xrange(5):
tr.py(3):         a = 1 + i
tr.py(2):     for i in xrange(5): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:04:46.760

你的意思是这样的？

```
def foo():
         for i in xrange(0,5):
                 a = 1 + i
                 print "a = 1 + {0}".format(i)

>>> foo()
a = 1 + 0
a = 1 + 1
a = 1 + 2
a = 1 + 3
a = 1 + 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T20:02:55.580

```
def foo():
    for i in xrange(0,5):
        a = 1 + i
        print a 
```

我认为这就是你要找的东西，我希望这对你有用:)

编辑：

我想我明白你想要什么：

```
def foo():
    for i in xrange(0,5):
        print "a = 1 + i" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T20:18:08.310

我了解您在这里要实现的目标，并且我检查了该链接：它也为我挂起，并且仅在终端中重复输入的文本。不幸的是，我不知道如何按照您的要求打印出脚本：对于调试，我建议只使用简单的打印命令来确定正在执行的部分。

```
def foo():
    for i in xrange(0,5):
        a = 1 + i, print "line is being executed where i = %i " % i 
```

然后只需阅读打印的文本输出即可查看程序在做什么。希望这可以帮助。

# ruby-on-rails - Ruby on Rails：遍历具有特定索引的数组？

> ID：16003702
> 
> 赞同：0
> 
> 时间：2013-04-14T20:00:20.070
> 
> 标签：ruby-on-rails, ruby, arrays, loops

如果我有特定的索引，如何遍历数组？

```
@lv = {'apple' => ['round', 'red'], 'name' => ['tags', 'more tags']}

if params[:value]
    @lv.each do |key, tags|
        if params[:value] == key
            tags.each_with_index do |tag, index|
                ... should display round and red?
            end
        end
    end
end 
```

我有一个数组`@lv`，如果有与之关联的参数，我希望能够获取这些值。例子：

`someURL.com/?value=0` 然后这应该得到 key `apple`。我想得到`apple`应该是`round`和的值`red`。我在上述代码中的逻辑是错误的，但我试图弄清楚调用正确键进行迭代的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:24:09.063

这似乎需要付出很多努力才能使其以这种方式工作。为什么不更改视图以便您可以选择键名：

`http://example.com/?value=apple`代替`http://example.com?value=0`

然后您可以将控制器代码更改为：

```
@tags = @lv[params['value']] 
```

然后只需在您的视图中迭代`@tags`，或者您尝试对标签列表执行的任何其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:08:20.707

这没有任何意义；`@lv`是地图，而不是数组。在地图上使用数字索引很奇怪。

您*可以*依赖 Ruby 1.9+ 中的插入顺序，因此`@lv[@lv.keys[params[:value].to_i]]`实际上会检索您想要的内容，但 IMO 它在语义上是粗略的。

```
@lv[@lv.keys[params[:value].to_i]].each_with_index do |tag, index|
  ...
end 
```

我还建议使用至少一个中间变量来清理该表达式。

# objective-c - 在objective-c中描述某个类的方法的约定是什么

> ID：16003703
> 
> 赞同：1
> 
> 时间：2013-04-14T20:00:20.067
> 
> 标签：objective-c, oop, syntax

在编写诸如 git commit 描述之类的内容时，是否有一个公认的约定/语法来引用给定类上的特定方法？

也许类似`(NSArray *) -count:`或类似的东西？

我一直厌倦写“yyy类的xxx方法”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:02:21.923

一个常见的符号：

```
- [NSArray count] 
```

对于类方法：

```
+ [NSMutableString stringWithCapacity:] 
```

对于协议：

```
- [id <UITableViewDataSource> tableView:cellForRowAtIndexPath:] 
```

# python - 用于颜色属性的 Pyglet、着色器和 GLSL 布局标签

> ID：16003704
> 
> 赞同：3
> 
> 时间：2013-04-14T20:00:25.553
> 
> 标签：python, opengl, python-3.x, glsl, pyglet

我正在尝试使用 pyglet 和 OpenGL 4 样式着色器（即：不使用任何矩阵运算，使用 (layout=...) 等...）

我有一个基本的顶点着色器，它是：

```
#version 400

uniform mat4 projectionMatrix;
uniform mat4 modelviewMatrix;

uniform vec2 offset;
varying vec4 vertex_color;

layout(location=0) in vec4 inVert;
layout(location=1) in vec4 inColor;

void main() {
    gl_Position = projectionMatrix * ( modelviewMatrix * ( inVert + vec4(offset.x, offset.y, 0, 0) ) );
    vertex_color = gl_Color;
} 
```

和一个基本的片段着色器：

```
#version 400

varying vec4 vertex_color;
out vec4 outColor;

void main(){
    outColor = vertex_color;
} 
```

我用

```
a = pyglet.graphics.vertex_list(num*3, ('v4f', vs), ('c4f', color)) 
```

定义我的抽奖列表并使用

```
a.draw() 
```

在 on_draw(GL_TRIANGLES) 函数中。

照原样，这工作正常，它正确地绘制顶点，偏移它们，并且它们具有正确的颜色。

但是，我想使用 layout(location=1)... 行来获取颜色，而不是使用 gl_Color。我会想如果对 glVertexAttribPointer 和 glEnableVertexAttribArray 的调用是以我可以想象的方式对颜色属性进行的，如果我手动进行调用，那么我所拥有的就会起作用。

我看到来电

```
glVertexAttribPointer(self.index, self.count, self.gl_type,
                          self.normalized, self.stride, 
                          self.offset + pointer) 
```

在 pyglet 的 vertexattribute.py 中，所以也许我以某种方式滥用了“布局”

# border - 单元格边框 0px 为少数单元格设置，但仍显示在 Opera 中

> ID：16003705
> 
> 赞同：0
> 
> 时间：2013-04-14T20:00:28.337
> 
> 标签：border, opera

这只发生在 Opera 浏览器中。我为每个单元格创建了一个带有简单边框的表格，除了少数应该是无边框的单元格之外，在除 Opera 之外的每个主要浏览器中，一切看起来都很好。我创建了显示问题的 jsFiddle。

我不知道这是我做错了什么还是错误？

html代码：

```
<table>
    <tr>
        <th>Lp.</th>
        <th>Number</th>
    <th>Number</th>
    <th>Number</th>
    <th>Number</th>
</tr>
<tr>
    <td>1</td>
    <td>1234.56</td>
    <td>1234.56</td>
    <td>1234.56</td>
    <td>1234.56</td>
</tr>
<tr>
    <td>2</td>
    <td>1234.56</td>
    <td>1234.56</td>
    <td>1234.56</td>
    <td>1234.56</td>
</tr>
<tr>
    <td class="clean" colspan=2></td>
    <td class="clean">Total:</td>
    <td>1234.56</td>
    <td>1234.56</td>
</tr>
<tr>
    <td colspan=5 class="total-clean"></td>
</tr>
<tr>
    <td colspan=3 class="total-clean"></td>
    <td>1234.56</td>
    <td>1234.56</td>
</tr> 
```

CSS 代码：

```
body {
 font-family: 'Open Sans';
 font-size: 11pt;
}
table {
 border-collapse: collapse;
 border-spacing: 0px;
 width: 100%;
}
table tr td {
 border: 1px solid #C9C9C9; 
}
table tr th {
 border: 1px solid #C9C9C9;
 background-color: #EFEFEF;
}
table tr .clean {
 border-left: 0px solid #FFFFFF !important;
 border-bottom: 0px solid #FFFFFF !important;
 border-right: 0px solid #FFFFFF !important;        
}
table tr .total-clean {
 border: 0px solid #FFFFFF !important;
} 
```

[http://jsfiddle.net/4krAQ/](http://jsfiddle.net/4krAQ/)

# bash - 如何使用 bash 在许多文件中递归地用另一个字符串替换一个字符串？

> ID：16003706
> 
> 赞同：0
> 
> 时间：2013-04-14T20:00:31.677
> 
> 标签：bash

我需要编写一个脚本，在目录及其所有子目录中的所有文件中将某个字符串的所有出现替换为“replaceWithThisNewString”。如何做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:04:18.117

```
find /path/to/dir -type f -exec sed -i 's/original/replacement/g' {} \+ 
```

或者，如果您`find`不支持`\+`：

```
find /path/to/dir -type f -exec sed -i 's/original/replacement/g' {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:03:54.710

试试这一行：

```
find /aDir -type f |xargs sed -i 's/certainString/replaceWithThisNewString/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:40:19.473

使用[bash4](/questions/tagged/bash4 "显示标记为“bash4”的问题")：

```
shopt -s globstar # if not already enabled
sed -i '/certainString/s/certainString/replaceWithThisNewString/g' ** 
```

# c# - 将字符串数组打印到 txt 文件

> ID：16003708
> 
> 赞同：2
> 
> 时间：2013-04-14T20:01:01.297
> 
> 标签：c#, arrays, string

我是编程新手，但我喜欢它，我正在尝试尽可能多地学习。我正在编写一个小应用程序，它有一个多行文本框 (txtOutput)，我可以在其中输入我的评论。然后将这些注释/行传输到字符串数组中。然后我调用一个类来传输一些变量以及数组以将其全部打印到 txt 文件中。虽然我可以从变量中获取填充数据的 txt 文件，但我无法将数组的内容获取到 txt 文件中。我会很感激一些帮助。

**从 txtOutput 到数组的文本**

```
public void button6_Click(object sender, EventArgs e)
    {
       string[] comments = txtOutput.Text.Split(' '); 
```

**将数组**和其他变量传输到 class1（我有代码来创建这些变量的内容并将数组保存到 txt 文件）。其他两个变量在文件上打印出来没有问题。

```
WriteTextFile WTR = new WriteTextFile();
        WTR.Save(temperatura, speedMotore, comments); 
```

**Class1 代码（我在其中制作 txt 文件并保存它。**

```
class WriteTextFile
{
    public void Save(int sendTem, int sendMot, string[] comments)
    {
        DateTime Now = DateTime.Now;
        string dateTime = Now.ToString("F");
        SaveFileDialog sd = new SaveFileDialog();
        sd.Filter = "Text File | *.txt";
        if (sd.ShowDialog() == DialogResult.OK)  
{  
using (StreamWriter sw = new StreamWriter(sd.FileName))  
{
    sw.Write("File diconfigurazione del programma Arduino Control " + "\r\n");
    sw.Write("\r\n");
    sw.Write(dateTime + "\r\n");
    sw.Write("\r\n");
    sw.Write("\r\n");
    sw.Write("La temperatura impostata in PWM1 è: " + sendMot + "\r\n");
    sw.Write("\r\n");
    sw.Write("La velocità del motore impostata in PWM2 è: " + sendTem + "\r\n");
    sw.Write("\r\n");
    sw.Write(comments[1] + "\r\n");
    sw.Dispose();  
    sw.Close();
}  

}}} 
```

我不确定是否将任何文本从 txtOutput 正确传输到“comments”数组。我想要实现的是从 txtOutput 中逐一打印在 txt 文件中的那些行，而我只收到一条消息，上面写着“索引超出范围......”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:02:48.563

不要`Dispose`像在`using`语句中那样调用 -`using`语句会处理这个问题。这可能是问题的原因 - 流将在刷新之前处理。

就收下吧：

```
using (StreamWriter sw = new StreamWriter(sd.FileName))  
{
    sw.Write("File diconfigurazione del programma Arduino Control " + "\r\n");
    sw.Write("\r\n");
    sw.Write(dateTime + "\r\n");
    sw.Write("\r\n");
    sw.Write("\r\n");
    sw.Write("La temperatura impostata in PWM1 è: " + sendMot + "\r\n");
    sw.Write("\r\n");
    sw.Write("La velocità del motore impostata in PWM2 è: " + sendTem + "\r\n");
    sw.Write("\r\n");
    sw.Write(comments[1] + "\r\n");
    sw.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:25:39.963

问题解决了。谢谢大家的意见。我程序中的数组是这样工作的：

```
string[] comments = textBox5.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries); 
```

然后打印内容：

```
foreach (string i in comments)
{
sw.Write(i + "\r\n");
} 
```

# windows - 每次用多个唯一值替换文本（AutoIt）

> ID：16003709
> 
> 赞同：0
> 
> 时间：2013-04-14T20:01:03.743
> 
> 标签：windows, autoit, replace, text-manipulation

有什么方法可以将 .txt 文件中多次出现的文本替换为每次唯一的值？更加具体：

这是给定的文件：

> value="something"
> 其他文本行
> value="something"
> 其他文本行
> ...

这是一个文本文件，我想从中获取值：

> 车
> 猫
> ...

我想要的是每次从另一个文本文件中获取不同的值时自动替换“某物”，因此给定的文档将变成这样：

> value="car"
> 其他文本行
> value="cat"
> 其他文本行
> ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:15:20.157

是的，这在 AutoIT 中是可能的。

我会使用 _FileReadToArray() 读取第二个文件（汽车、猫...）。然后使用函数_ReplaceStringInFile()。

下面的代码应该让您朝着正确的方向开始。仅供参考：这不是最有效的代码，因为它会多次打开文件。

```
 $replacementStrings = _FileReadToArray($fileName2)
    $ctr = 0
    While ($ctr < UBound($replacementStrings))
      _ReplaceStringInFile($fileName1,"something",$replacementStrings[$ctr],0,0) 
      ;last 0 says only to replaced the first occurrence.
      $ctr+=1
    Wend 
```

仅供参考：如果“某物”出现在主文件的其他位置，您将需要以不同的方式编写。

# java - Android-从列表活动返回数据

> ID：16003718
> 
> 赞同：0
> 
> 时间：2013-04-14T20:01:38.073
> 
> 标签：java, android, list

我的应用程序有一个主要活动，它可以产生四个列表活动之一，目标是让用户一个接一个地从列表中选择项目，然后`submit`从主要活动将这些选择推送到数据库。

**问题：我不确定如何在主要活动中返回和存储列表的结果。**

我没有为其他活动使用列表视图，因为它不允许在同一屏幕上显示“完成”按钮。

到目前为止，这就是我所拥有的

*主要的：*

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button1 = (Button) findViewById(R.id.listOneSub);
        button2 = (Button) findViewById(R.id.listTwoSub);
        button3 = (Button) findViewById(R.id.listThreeSub);
        button4 = (Button) findViewById(R.id.listFourSub);

        button1.setOnClickListener(this);
        button2.setOnClickListener(this);
        button3.setOnClickListener(this);
        button4.setOnClickListener(this);
    }

    public void onClick(View v) {
        if (v == button1) {
            startActivity(new Intent("net.learn2develop.SecondActivity"));
        } else if (v == button2) {
            startActivity(new Intent("net.learn2develop.ThirdActivity"));
        } else if (v == button3) {
            startActivity(new Intent("net.learn2develop.FourthActivity"));
        } else if (v == button4) {
            startActivity(new Intent("net.learn2develop.FifthActivity"));
        }
    } 
```

*列出活动（所有四个都是相似的，它们只是有不同的项目）：*

```
String [] lstOne;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.secondactivity);
        ListView lstView = (ListView)findViewById(R.id.android_listOne);
        lstView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        //lstView.setTextFilterEnabled(true);

        lstOne = getResources().getStringArray(R.array.one);

        lstView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, lstOne));

        }

    public void onClick(View view){
        ListView lstView = (ListView)findViewById(R.id.android_listOne);

        String itemsSelected =  "Selected items: \n";
        for(int i=0; i<lstView.getCount(); i++){
            if(lstView.isItemChecked(i)){
                itemsSelected += lstView.getItemAtPosition(i) + "\n";
            }
        }
        Toast.makeText(this, itemsSelected, Toast.LENGTH_LONG).show();
        finish();
    } 
```

列表是从`strings.xml`文件中生成的。我想更新按钮下的主视图，以在提交之前显示从每个列表中选择的内容。

![截屏](https://i.stack.imgur.com/Nb2b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:07:47.967

使用`startActivityForResult`代替`startActivity`并将`onActivityResult`在您的主服务器上调用。

我还建议将这 4 个类合并为 1 个并发送要显示的字符串数组的标识符。代码重复是非常糟糕的。

# c++ - 评估序列和 << 运算符

> ID：16003721
> 
> 赞同：0
> 
> 时间：2013-04-14T20:01:52.030
> 
> 标签：c++, iostream

为什么这个片段：

```
int i = 0;
cout << ++i << " " << ++i; 
```

产生`2 2`而不是`1 2`？

编辑：指向关于未定义评估顺序的答案的指针对我来说并不能解决这个问题。如果`cout << ++i << " " << ++i`被翻译成`f (++i, " ", ++i)`似乎只有2个相关案例：

1.  第一个参数在第三个参数之前评估：`f (0, " ", 1)`
2.  第三个参数在第一个参数之前评估：`f (1, " ", 0)`

`2 2`来自哪里？

编辑：好的，我明白了：“在前一个序列点和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:05:52.263

因为这是[未定义的行为](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)
，它也不能输出 0（严格地说，在 UB 结果的情况下可以是任何东西，包括 0 作为输出，但这真的不太可能）因为你使用预增量，这将导致 i 在被之前递增传递给运算符<<

似乎只有两个相关案例：

```
1st parameter is evaluated before 3rd one: f (0, " ", 1)
3rd parameter is evaluated before 1st one: f (1, " ", 0) 
```

首先，在UB的情况下没有相关的情况，你可以得到0,1,2,5,0xABCD，AV，等等。
其次，您使用**预**增量，因此值将在传递给函数**之前递增。**
第三个 f(++i, " ", ++i); 除了已经提到的 UB 之外，它将在调用之前评估**两个预增量，将 i 值增加到 2。**

# android - Android列表视图盒装样式

> ID：16003724
> 
> 赞同：0
> 
> 时间：2013-04-14T20:02:04.760
> 
> 标签：android, listview, styles

是否可以编辑列表视图的样式以类似于 Google Currents 应用程序？它是灰色背景上的白色小盒子。

像这里的东西：http: [//www.shiftdigitalmedia.com/newsite/assets/google-now-5.png](http://www.shiftdigitalmedia.com/newsite/assets/google-now-5.png)

你能告诉我如何设置列表单元格的背景以达到类似的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:22:06.163

这可以通过多种方式实现。看看这个例子：[http ://blog.donnfelker.com/2011/08/01/android-rounded-corners-with-a-beveldrop-shadow/](http://blog.donnfelker.com/2011/08/01/android-rounded-corners-with-a-beveldrop-shadow/)

您可以使用 XML 可绘制对象，但要小心，因为它并不总是性能方面的最佳选择，尤其是在涉及阴影的情况下。

或者你可以使用 9-patch drawables，这有点乏味（你必须为不同的分辨率准备它们），但在许多情况下提供更好的性能。

# ruby-on-rails - Rails 将嵌套关系作为 ActiveRecord 对象获取，无需收集/映射

> ID：16003732
> 
> 赞同：3
> 
> 时间：2013-04-14T20:03:01.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

举个例子：

一个`company has_many employees`

一个`employee has_many tasks`

我想按降序获得所有任务。理想情况下，我想做类似`Company.all.employees.tasks.order('created_at desc')`. 不幸的是，当我完成时`employees`，我现在有一个 ActiveRecord 对象数组。我遇到这个问题已经有一段时间了，我一直在使用`map`and `collect`，但是按降序排序会产生比我想要的更多的开销。这可以通过 SQL 查询来完成，所以我确信我可以在 ActiveRecord 中完成，但我的研究并没有太大帮助。

编辑：该解决方案应该适用于任意数量的模型。例如，如果 a`task has_many items`和 a`item has_many sub_items`无限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:09:18.007

您可以使用的一种方法是使用`through`

```
class Company < ActiveRecord::Base
   has_many :employees
   has_many :tasks, through: :employees
end 
```

然后`Company`将拥有`tasks`它的所有员工。c 另一种方法是使用连接。所以假设 a `Task` `belongs_to`a`Employee`和`Employee` `belongs_to`a a`Company`

```
c = Company.first # for a company...
tasks = Task.where(companies:{id: c.id}).joins(employee: :company) 
```

所以我要求所有任务在哪里`companies`（是的，它是在哪里）。我们使用连接来建立必须连接的表。

# ios - 如何在 iOS 中关闭通知？

> ID：16003739
> 
> 赞同：2
> 
> 时间：2013-04-14T20:03:34.113
> 
> 标签：ios, push-notification, notificationcenter

我有一个使用推送通知的 iOS 应用程序。当用户单击通知中心中的通知之一时，我已将其设置为将用户带到我的应用程序中的特定视图。单击该通知启动应用程序后，我回头查看通知中心，通知仍然存在。如何关闭此通知？

以前有人问过这个问题，但他们都说不能这样做。但是我可以看到有几个应用程序（例如邮件应用程序、日历应用程序、与朋友的单词等）都能够在您与它们交互时从通知中心删除特定项目。

# c++ - 二叉搜索树递归删除

> ID：16003745
> 
> 赞同：0
> 
> 时间：2013-04-14T20:04:05.793
> 
> 标签：c++, recursion, binary-search-tree

当我试图找到删除功能的最大值时，我的程序不断中断。我想要做的是用左树的最大值覆盖用户想要删除的内容，然后删除该节点。一旦到达第一个 Else，它就会不断断裂。递归让我心烦意乱。我的缺点在哪里？

这是具有私有递归兄弟的 remove 函数。

```
template<typename TYPE>
bool BinarySearchTree<TYPE>::remove(TYPE& data)
{
    bool found = search(dataOut);
    if(found)
        TRoot = Premove(TRoot, data);
    return found;
}

template<typename TYPE>
Node<TYPE>* BinarySearchTree<TYPE>::Premove(Node<TYPE>* root, TYPE& data)
{
    Node<TYPE>* del;
    Node<TYPE>* max;
    if(root)
    {
        if(root->data > data)
            root->left = Premove(root->left, data);
        else if(root->data < data)
            root->right = Premove(root->right, data);
        else
        {
            if(root->left && root->right)
            {
                max = root->left;
                while(max->data < max->right->data)
                    max = max->right;
                root->data = max->data;
                max = Premove(root, max->data);

            }
            else
            {
                del = root;
                root = (root->right) ? root->right : root->left;
                delete pDel;
            }
        }
    }
    return root;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:20:19.607

问题很可能在这里： `while(max->data < max->right->data) max = max->right;`

您快用完了树（`max->right`最终将变为 NULL）。实际上，由于它是二叉搜索树，因此无需比较`data`. 只要有可能，向右走就足够了：`while (max->right) max=max->right;`

还要注意这个分支的最后一个任务：还有两个额外的问题。首先，不是`max = Premove(...)`你应该做的`root->left = Premove(...)`（否则你不会修改 root->left 引用）。其次，你应该调用`Premove`而`root->left`不是调用`root`: `root->left = Premove(root->left, max->data);`（否则你只会得到一个无限递归）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:22:31.287

I think your while statement should be like this:

```
while(max && max->right && max->data < max->right->data ) 
```

In some cases in your code, `max` or `max->right` could be `NULL` and it cause run_time error.

# c - 在C中将char数组转换为字符串（包括不可打印的字符）？

> ID：16003746
> 
> 赞同：1
> 
> 时间：2013-04-14T20:04:08.153
> 
> 标签：c, non-ascii-characters

说我有以下内容：

```
static const unsigned char key[] = {
    0x00, 0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77,
    0x88, 0x99, 0xaa, 0xbb, 0xcc, 0xdd, 0xee, 0xff
}; 
```

如何在 C 中将其转换为字符串（包括不可打印的字符）？

我已经搜索了 Google 和 SO ......但只有在字符是人类 ASCII 0-9 AZ 时才设法找到如何转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:06:45.483

AC 字符串只是一个以 null 结尾的 char 数组，因此您需要做的就是将该数组复制到一个大一号的新数组，并将该数组中的最后一个元素设置为`0`.

# mysql - 即使端口设置不正确，Django也会连接到mysql

> ID：16003749
> 
> 赞同：4
> 
> 时间：2013-04-14T20:04:18.633
> 
> 标签：mysql, django

我正在尝试让 Django 在端口 3307 上连接到我的本地主机 MySQL。我注意到当我更改 settings.py 中的端口号时，它仍然连接到 3306。所以我尝试将它更改为一些无意义的值，它仍然在 3306 上保持连接。我在 Apache2 上使用 WSGI，我也尝试重新启动服务器。为了使 Django 连接到所需的端口，我还需要做些什么吗？这是我的settings.py：

```
'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'mydb',                # Or path to database file if using sqlite3.
        'TEST_NAME': 'test_mydb',
        # The following settings are not used with sqlite3:
        'USER': 'mydb',
        'PASSWORD': 'mydb',
        'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '33074',                      # Set to empty string for default.
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T20:07:36.453

您没有通过端口 3306 连接；您正在通过本地套接字进行连接。

如果您将“主机”留空，MySQL 默认行为是通过本地套接字连接（一个 UNIX 系统，用于进程之间非常快速地相互通信，根本不涉及网络堆栈）。如果要显式使用网络堆栈连接到 localhost，则必须指定“127.0.0.1”作为主机。完成此操作后，配置中选择的端口将变得相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:07:34.173

您的答案在评论中`HOST`：

```
Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP. 
```

端口号仅在您指定时`127.0.0.1`使用`HOST`- 否则使用套接字。

# c# - 具有类对象的类返回列表的最佳 OOP 实践？

> ID：16003751
> 
> 赞同：-1
> 
> 时间：2013-04-14T20:04:38.633
> 
> 标签：c#, list, oop, class, methods

也许这是一个主观问题..但我一直在试图找出最好的方法。一些示例代码：

```
class Banana
{
   private int _foo;

   public Banana()
   {
      _foo = 0;
   }
   public Banana(int whatever)
   {
      _foo = whatever;
   }

   public int Foo
   {
      ... get & set ... // get and set function
   }

   public list<Banana> MyFunction()
   {
      list myList<Banana> = new list<Banana>();

      for (int i=0; i<100; i++)
      {
         // This code?
         Banana banana = new Banana();
         banana.Foo = i;
         myList.Add(banana);

         // Or this?
         Foo = i;
         myList.Add(new Banana(Foo));
      }

      return myList;
   }
} 
```

有关系吗？我认为后者看起来更干净，但需要一个带值的构造函数。或者，还有更好的方法？提前致谢！这是 C# 代码顺便说一句:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:07:09.800

**他们不这样做！**

```
// This code?
Banana banana = new Banana();
banana.Foo = 10;
myList.Add(banana); 
```

用 来创建新`Banana`实例`Foo = 10`，**根本不影响当前对象**。

```
// Or this?
Foo = 10;
myList.Add(new Banana(Foo)); 
```

**将当前对象`Foo`属性值更改为 10**并创建`Banana`具有相同值的新实例。

我很确定您正在寻找第一个动作。

还有第三种选择：

```
myList.Add(new Banana(10)); 
```

**更新**

第四个版本，使用[对象初始化](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)语法：

```
Banana banana = new Banana() { Foo = 10 };
myList.Add(banana); 
```

和第五

```
myList.Add(new Banana() { Foo = 10 }); 
```

# java - 带有 WakeLock 的 AlarmManager 不起作用

> ID：16003757
> 
> 赞同：0
> 
> 时间：2013-04-14T20:04:59.710
> 
> 标签：java, android, alarmmanager

我正在开发一个可以在屏幕上创建警报的应用程序。每隔一小时，当我按下一个按钮。我有一个类，我在其中定义了 AlarmManager、WakeLock 和一个在触发警报时将全屏打开的窗口，并且我从 MainActivity.class 启动它。但我没有错误，警报根本不会运行。我是新手，所以请指出正确的方向。我已经完成了研究，但我根本找不到我的代码有什么问题。

MyAlarmReceiverActivity 代码：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
    mWakeLock.acquire();
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN |
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,
            WindowManager.LayoutParams.FLAG_FULLSCREEN |
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    setContentView(R.layout.alarm);

    Button stopAlarm = (Button) findViewById(R.id.btnStopAlarm);
    stopAlarm.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0)
        {
            mMediaPlayer.stop();
            finish();
        }
    });
    playSound(this, getAlarmUri());
}

private void playSound(Context context, Uri alert)
{
    mMediaPlayer = new MediaPlayer();
    try
    {
        mMediaPlayer.setDataSource(context, alert);
        final AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM)!=0)
        {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.prepare();
            mMediaPlayer.start();
        }
    }catch (IOException e)
    {
        Log.i("AlarmReceiver","No audio files are found!");
    }
}

private Uri getAlarmUri(){
    Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    if (alert == null)
    {
        alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        if (alert == null)
        {
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
        }
    }
    return alert;
}

protected void onStop()
{
    super.onStop();
    mWakeLock.release();
} 
```

在我的主要活动中，我正在使用此代码运行它

```
public void spusteniePripomienok (){
    Toast.makeText(this, "Spustil si pripomienky každých "+ interval, Toast.LENGTH_SHORT).show();

    Intent intent = new Intent(MainActivity.this, AlarmRecieverActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this, 2, intent, PendingIntent.FLAG_CANCEL_CURRENT );
    AlarmManager am = (AlarmManager) getSystemService(MainActivity.ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 5000, pendingIntent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:23:12.743

您可以尝试将您的 PowerManager 代码更改为类似这样，看看它是否有效：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
mWakelock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
            | PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_BRIGHT_WAKE_LOCK
            | PowerManager.ON_AFTER_RELEASE, "");
mWakeLock.acquire(); 
```

# asp.net-mvc - Asp mvc 4 模型绑定与 post 方法

> ID：16003760
> 
> 赞同：3
> 
> 时间：2013-04-14T20:05:23.183
> 
> 标签：asp.net-mvc, post, model, model-binding

我正在寻找一种方法（如果有的话）使模型绑定过程在 post 方法上与对象列表一起工作。我可以轻松地显示列表。但是当涉及到用户使用 post 方法上传“Bien”时，我无法使框架正确绑定每个列表元素。您可以看到我尝试制作标签和文本框的页面部分已被注释，因为我不断收到异常，所以我猜我做错了，我找不到在我的模型上上传可变数量参数的方法。

这是模型：

```
 public class BienModel
    {

        [Required]
        [Display(Name = "Nombre del Bien.")]
        public String Nombre { set; get; }

        public List<Atributo> Atributos { set; get; }

    }

    public class Atributo
    {
        [Required]
        public String nombre { set; get; }

        [Required]
        public String valor { set; get; }
        public Atributo(){}
        public Atributo(String n, String v){
            this.nombre=n;
            this.valor=v;
        }

    } 
```

这是页面：

```
@using (Html.BeginForm()) {

    <fieldset>
        <legend>Publicar bien form.</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.Nombre)
                @Html.TextBoxFor(m => m.Nombre)
                @Html.ValidationMessageFor(m => m.Nombre)
            </li>
            @*@for (int i = 0; i < Model.Atributos.Count;i++ )
            {

                @Html.Label(Model.Atributos[i].nombre)
                @Html.TextBoxFor(m => m.Atributos[i].valor)
                @Html.ValidationMessageFor(m => m.Atributos[i].valor)

            }*@

        </ol>
        <input type="submit" value="Publicar!" />
    </fieldset>

} 
```

这是控制器

```
public ActionResult PublicarBien()
    {

        //Pido a la logica los atributos

        BienModel b = new BienModel();

        b.Atributos = new List<Atributo>();
        b.Atributos.Add(new Atributo("Atributo1", ""));
        b.Atributos.Add(new Atributo("Atributo2", ""));
        b.Atributos.Add(new Atributo("Atributo3", ""));
        b.Atributos.Add(new Atributo("Atributo4", ""));

        return View(b);
    }

    [HttpPost]
    public ActionResult PublicarBien(BienModel b)
    {
        try
        {
            if (ModelState.IsValid)
            {
                //se da de alta el bien

                return RedirectToAction("Index", "Home");
            }
        }
        catch(Exception ex){
            ModelState.AddModelError("",ex.Message);
        }

        return View(b);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T20:09:04.673

你的代码看起来不错。如果您要发布的控制器操作采用`BienModel`as 操作参数，则绑定应该可以正常工作：

```
[HttpPost]
public ActionResult SomeAction(BienModel model)
{
    ...
} 
```

您还可以查看[`following article`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)关于 ASP.NET MVC 中用于绑定到列表的标准约定。

此外，目前您只有该`valor`属性的输入字段。该`nombre`属性没有相应的输入字段，因此您将永远无法取回其值。如果您希望这种情况发生，您可以使用隐藏字段：

```
@for (int i = 0; i < Model.Atributos.Count;i++ )
{
    @Html.LabelFor(x => x.Atributos[i].valor, Model.Atributos[i].nombre)
    @Html.HiddenFor(m => m.Atributos[i].nombre)
    @Html.TextBoxFor(m => m.Atributos[i].valor)
    @Html.ValidationMessageFor(m => m.Atributos[i].valor)
} 
```

# wpf - 懒惰地在 WPF 表单上创建富文本框并将插入符号设置为正确的位置

> ID：16003761
> 
> 赞同：0
> 
> 时间：2013-04-14T20:05:47.027
> 
> 标签：wpf, performance, richtextbox, textblock, clr4.0

我`RichTextBox`在 WPF 表单上遇到了令人望而却步的 WPF 性能问题。

所以我现在尝试的是用`TextBlock`s替换所有富文本控件，并在用户点击时`TextBlock`用a替换。`RichTextBox`

为了实现这一点，我做了一个`LazyRichTextBox`这样的。

```
class LazyRichTextBox : UserControl
{
    // lots of detail skipped

    protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
    {
        if (!(Content is RichTextBox))
        {
            var box = new RichTextBox { Document = FlowDocumentHtmlConverter.ReplaceDocContent(RichText) };

            Content = box;
        }            
        base.OnPreviewMouseDown(e);
    }

} 
```

好消息是这在某种程度上有效：我现在得到了一个可编辑的文本框。但不起作用的是它没有将插入符号放在正确的位置。该控件甚至没有从鼠标单击中获得焦点，用户必须再次单击才能开始键入。

现在，神奇地更换点击控件可能不是唯一的解决方案。我还可以尝试找出 上单击的字符位置`TextBlock`，然后创建`RichTextBox`并相应地设置焦点和插入符号。那可能吗？

作为记录：我知道还有更多工作要做：我需要确保 TextBlocks 看起来与稍后出现的 RichTextBox 相同，需要处理选项卡行为。我现在专注于让 Click 场景尽可能好。

**更新：** 感谢您的评论。我的富文本非常有限，所以我知道我可以用 TextBlocks 来模拟它们。性能问题是由于怀疑内存泄漏，导致使用两小时后内存占用达到 2GB。我正在使用 RichTextBox/FlowDocument，因为我不知道任何其他方式来编辑具有内联格式的文本，我会对替代方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:00:16.467

原来有一个获得插入位置的解决方案：在 MouseDown 中，我将控件转换为“RichTextBox”。我调用 UpdateLayout()，然后在其上设置 Focus，然后 WPF 可以像这样计算插入位置：

```
 rtb.CaretPosition = rtb.GetPositionFromPoint(clientPoint, true); 
```

还有一些额外的陷阱，如果有人感兴趣，我可以详细说明。

# stream - 从 Dart 中的元素清除 Stream 订阅

> ID：16003762
> 
> 赞同：1
> 
> 时间：2013-04-14T20:05:51.090
> 
> 标签：stream, dart

我在游戏中有很多可以点击或拖动的对象。在游戏的一个阶段我需要删除一些交互，我知道有 StreamSubscription.cancel() 但这需要大量代码来单独存储订阅并在需要时取消它们。有什么简单的方法可以清除“不知道”分配给元素的订阅吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:23:20.517

No. You have to keep the subscriptions around.

If it is something that you do frequently you could consider creating abstractions that do it for you.

# php - php脚本通过cpanel导出mysql db

> ID：16003767
> 
> 赞同：0
> 
> 时间：2013-04-14T20:06:03.107
> 
> 标签：php, mysql, cpanel

我发现了允许与[MYSQL 数据库](http://docs.cpanel.net/twiki/bin/view/ApiDocs/Api1/ApiMysql)进行基本通信的[Cpanel PHP API](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/WebHome) ，但是否可以使用它从数据库中导出特定的表。寻找一个例子，如果有的话。

谢谢

# javascript - 传单缩放和平移

> ID：16003782
> 
> 赞同：4
> 
> 时间：2013-04-14T20:07:38.870
> 
> 标签：javascript, map, zooming, leaflet, pan

感觉这里有点傻。。。

我在地图区域中有几个标记，需要找到一种方法来平移和缩放到该区域。目标是能够一次查看所有标记。

我使用以下代码插入标记：

```
function plotMarkers(MarkerItems) {
if (MarkerItems) {
    MarkerItems.success(function (data) {
        var len =  data.length;
        for (var i = 0; i < len; i++) {
            m = data[i];

            var XX = parseFloat(m.X.replace(",", "."));
            var YY = parseFloat(m.Y.replace(",", "."));
            var marker = L.marker(new L.LatLng(XX, YY), { icon: blueFlagIcon }).bindPopup("test");
            markers.addLayer(marker);
        }
    });// success
}
}

var markers = new L.featureGroup();
plotMarkers(myMarkers);
map.addLayer(markers); 
```

应该很简单，我只是不明白。

请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T05:36:11.710

看`L.Map.fitBounds`和`L.FeatureGroup.getBounds`。因此，您的代码可能如下所示：

```
map.fitBounds(markers.getBounds()); 
```

但是，如果您`MarkerItems.success`是异步的（ajax 等），您将在向图层添加标记后调用此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T06:28:02.603

非常简单....

只需要添加

```
map.fitBounds(markers.getBounds()); 
```

在 .success() 内部。

完整的工作代码：

```
function plotMarkers(MarkerItems) {
if (MarkerItems) {
MarkerItems.success(function (data) {
    var len =  data.length;
    for (var i = 0; i < len; i++) {
        m = data[i];

        var XX = parseFloat(m.X.replace(",", "."));
        var YY = parseFloat(m.Y.replace(",", "."));
        var marker = L.marker(new L.LatLng(XX, YY), { icon: blueFlagIcon }).bindPopup("test");
        markers.addLayer(marker);
    }

    map.addLayer(markers);
    map.fitBounds(markers.getBounds());

});// success
}} 
```

# php - 只执行多个 PDO 查询中的第一个？

> ID：16003787
> 
> 赞同：1
> 
> 时间：2013-04-14T20:07:51.743
> 
> 标签：php, mysql, pdo

我正在尝试`PDO`连续执行两个单独的查询。但是，一次只能正确执行一个。无论哪个先出现，都是唯一正确查询数据库并返回任何值的。我尝试使用 var_dump 查看它们返回的内容，第二个 PDO 查询返回“boolean false”并且不包含任何信息。

**这是我的代码：**

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

// make and execute query for client information
    $client_query = $db->prepare('SELECT * FROM clients WHERE id=:ID');
    $client_query->execute(array('ID' => $client_id));
    $client_result = $client_query->fetch(PDO::FETCH_ASSOC);

    // set client information for captcha
    $this->client_name = $client_result['name'];
    $this->client_id = $client_result['id'];

    $client_query->closeCursor();

    // make and execute query for campaign information
    $campaign_query = $db->prepare('SELECT * FROM campaigns WHERE id=:ID AND client_id=:CLIENT');
    $campaign_query->execute(array('ID' => $campaign_id, 'CLIENT' => $client_id));
    $campaign_result = $campaign_query->fetch(PDO::FETCH_OBJ);

    // set campaign information for captcha
    $this->campaign = $campaign_result; 
```

如果我从第二个查询中删除参数，它们都会成功执行。我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:10:34.387

您的 SQL 无效；改变这个：

```
SELECT * FROM campaigns WHERE id=:ID AND WHERE client_id=:CLIENT 
```

对此：

```
SELECT * FROM campaigns WHERE id=:ID AND client_id=:CLIENT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:23:45.700

正如[错误和错误处理](http://es1.php.net/manual/en/pdo.error-handling.php)一章解释的那样：

> PDO 为您提供 3 种不同的错误处理策略供您选择

...默认为`PDO::ERRMODE_SILENT`，这意味着：禁止所有错误消息，并希望开发人员不要忘记检查是否有错误。

总结一下：你需要做错误检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:23:49.400

乍一看...我会将您的代码更改为：（在数组中也使用冒号，并且在第二个 sql 语句中存在 reseverd 关键字“where”的重复项）。我会异常而不是警告-然后在必要时捕获异常。

```
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// make and execute query for client information
$client_query = $db->prepare('SELECT * FROM clients WHERE id=:ID');
$client_query->execute(array(':ID' => $client_id));
$client_result = $client_query->fetch(PDO::FETCH_ASSOC);

// set client information for captcha
$this->client_name = $client_result['name'];
$this->client_id = $client_result['id'];

$client_query->closeCursor();

// make and execute query for campaign information
$campaign_query = $db->prepare('SELECT * FROM campaigns WHERE id=:ID AND client_id=:CLIENT');
$campaign_query->execute(array(':ID' => $campaign_id, ':CLIENT' => $client_id));
$campaign_result = $campaign_query->fetch(PDO::FETCH_OBJ);

// set campaign information for captcha
$this->campaign = $campaign_result; 
```

您可以在尝试检索值时执行上述操作，但请考虑使用 JOINS 代替，如下所示：

```
SELECT * FROM clients cls
LEFT JOIN campaigns cas ON (cls.id = cas.client_id)
WHERE cas.id=:ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T22:34:13.933

令人尴尬的是，所有代码都是正确的（除了你们中的一些人发现的一个小的 SQL 语法错误）。我的问题是 for 的值`$campaign_id`大于存储在 mySQL 表中的任何值，因此查询实际上没有返回任何结果。所以实际上查询没有问题，只是没有返回第二个结果。我感谢所有答案，并为这个可悲的疏忽道歉！

# android - RadioButton 样式，也是 CheckBox 样式

> ID：16003793
> 
> 赞同：-1
> 
> 时间：2013-04-14T20:08:30.207
> 
> 标签：android, android-widget

我的应用程序使用默认的 RadioButtons 和默认的 CheckBox 样式。这意味着对于 RadioButtons，显示屏包含一个小圆形图标，当您单击它时会变为绿色，然后是它右侧的文本。对于 CheckBoxes，当您单击它时，有一个带有绿色复选图标的小方块，然后是它右侧的文本。

是否可以轻松改变这一点？我希望 RadioButtons 和 CheckBoxes 看起来像常规按钮（没有圆形或方形图标），然后在选中它们时变成不同的颜色。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:29:34.947

您可能想尝试[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)。

# symfony - Doctrine Symfony2 创建模式问题

> ID：16003795
> 
> 赞同：0
> 
> 时间：2013-04-14T20:08:39.797
> 
> 标签：symfony, doctrine, many-to-many, entity

我对 symfony2 和 Doctrine 完全陌生。

我正在尝试创建一些实体，这些实体会将持久数据保存到数据库中。我按照 Symfony 的文档创建了我的类。

我创建实体并运行`php app/console doctrine:schema:create`

我收到此错误：

```
PHP Fatal error: Cannot redeclare MyP\ProjectBundle\Entity\Alumno::__construct() in C:\wamp\www\Symfony\src\MyP\ProjectBundle\Entity\Alumno.php on line 306
PHP Stack trace:

[...] 
```

这是我的实体校友：

```
<?php

namespace MyP\ProjectBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Alumno
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="MyP\ProjectBundle\Entity\AlumnoRepository")
 */
class Alumno
{
[...]
    //Asociaciones base de datos

    /**
    * @ORM\ManyToMany(targetEntity="Asignatura", inversedBy="alumnos")
    * @ORM\JoinTable(name="Alumnos_asignaturas")
    *
    **/
    private $asignaturas;

    public function __construct() 
    {
        $this->asignaturas = new \Doctrine\Common\Collections\ArrayCollection();
    }
    public function addAsignaturas(\MyP\ProjectBundle\Entity\Asignatura $asignaturas)
    {
        $this->asignaturas[] = $asignaturas;
    }

    public function getAsignaturas()
    {
        return $this->asignaturas;
    }

    /**
    * @ORM\ManyToMany(targetEntity="Posible_respuesta", inversedBy="alumnos")
    * @ORM\JoinTable(name="Alumnos_posiblesRespuestas")
    *
    **/
    private $posibles_respuestas;

    public function __construct() //line 306
    {
        $this->posiblesRespuestas = new \Doctrine\Common\Collections\ArrayCollection();
    }
    public function addPosibles_respuestas(\MyP\ProjectBundle\Entity\Posible_respuesta $posibles_respuestas)
    {
        $this->posibles_respuestas[] = $posibles_respuestas;
    }

    public function getPosibles_respuestas()
    {
        return $this->posibles_respuestas;
    }

    /**
    * @ORM\OneToMany(targetEntity="Solucion"), mappedBy="alumno")
    **/
    private $soluciones;
    public function __construct()
    {
        $this->soluciones = new \Doctrine\Common\Collections\ArrayCollection();
    }
    public function addSoluciones(\MyP\ProjectBundle\Entity\Solucion $soluciones)
    {
        $this->soluciones[] = $soluciones;
    }
    public function getSoluciones()
    {
        return $this->soluciones;
    }
} 
```

我想我错过了一些东西。

谢谢你的帮助。

# jquery - 如何从 URl 获取特定的字符串？

> ID：16003796
> 
> 赞同：-5
> 
> 时间：2013-04-14T20:08:45.530
> 
> 标签：jquery

大家好，我有一个看起来像这样的 URl

```
 http://localhost:60255/Roles/12/Users/ 
```

我需要使用窗口中的jquery从href中获取这个，我应该得到这个字符串

```
 http://localhost:60255/Roles/ 
```

从点击事件的 url

```
 this is what i had been trying

      var windowpathname = window.location.pathname; window.location.href = windowpathname + "Roles/" + RoleID + "/" + RoleName; 
```

在这种情况下，当我第二次点击

```
 http://localhost:60255/Roles/12/Rahul/Roles/14/Kishore/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:17:54.833

对象 window.location 的一些属性：

```
hash: ""
host: "fiddle.jshell.net"
hostname: "fiddle.jshell.net"
href: "http://fiddle.jshell.net/_display/"
origin: "http://fiddle.jshell.net"
pathname: "/_display/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:41:35.593

你可以试试这个

```
window.location.href = window.location.hostname + "/Roles/" + RoleID + "/" + RoleName; 
```

# ios - 过滤 AFNetworking 响应

> ID：16003798
> 
> 赞同：0
> 
> 时间：2013-04-14T20:08:51.383
> 
> 标签：ios, uitableview, afnetworking

我的 AFNetworking API 响应包含一个 json 对象“place”，它可以是“restaurant”或“store”。仅当地点对象包含关键字“存储”时，我才想过滤响应以添加到 location_results 数组

这是我的 AFNetworking 请求

```
 [[LocationApiClient sharedInstance] getPath:@"locations.json" parameters:nil                                     success:^(AFHTTPRequestOperation *operation, id response) {
        NSLog(@"Response: %@", response);
        NSMutableArray *location_results = [NSMutableArray array];
        for (id locationDictionary in response) {
            Location *location = [[Location alloc] initWithDictionary:locationDictionary];
            [location_results addObject:location]; 
        }
        self.location_results = location_results;
        [self.tableView reloadData];
    }
                                        failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                            NSLog(@"Error fetching locations!");
                                            NSLog(@"%@", error);

                                        }];

} 
```

我试着添加这个

```
for (id locationDictionary in response) {
    Location *location = [[Location alloc] initWithDictionary:locationDictionary];
    if([[location objectForKey:@"place"] isEqualToString:@"Store"]) // Added this line
        [location_results addObject:location];

} 
```

但我收到一个错误 - 'Location' 没有可见的@interface 声明选择器'objectForKey'

之前如何过滤此响应`[location_results addObject:location];`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:18:04.950

我只能通过添加这一行来回答我的问题

```
self.location_results = [location_results filteredArrayUsingPredicate:
                                 [NSPredicate predicateWithFormat:@"(%K contains %@)",@"place" ,@"store"]]; 
```

至

```
 }
        self.location_results = location_results; //replaced this line
        [self.tableView reloadData];
    } 
```

# objective-c - 如何将适用于 UIView 的视图转换应用于 NSView？

> ID：16003803
> 
> 赞同：2
> 
> 时间：2013-04-14T20:09:17.557
> 
> 标签：objective-c, cocoa, nsview, transformation, cgaffinetransform

我有一个视图转换，可以让任何 UIView 对象跟随 cocos2d 节点。在 iOS 上运行良好，在本例中 UIButton 遵循其 Box2D 主体：

![在此处输入图像描述](https://i.stack.imgur.com/Q13A9.png)

现在对于 Mac，我首先验证了我是否正确设置了覆盖 NSWindow，以便在 cocos2d OpenGL 视图之上绘制 NSView 对象。这行得通，就像在这种情况下使用 NSButton 一样：

![在此处输入图像描述](https://i.stack.imgur.com/FJp8C.png)

但后来我了解到`[NSView setTransform:..]`NSViews 没有方法。我不确定这是否是它在 Mac 上的工作方式，但这是我所做的：

```
// sometime after initializing the view
[nsView setWantsLayer:YES];

// every time I update transform:
nsView.layer.affineTransform = transform; 
```

我验证了该层是非零的。我还重新验证了在启用 setWantsLayer 后绘制了 NSView。结果令人失望，按钮在整个窗口上无处可见，甚至似乎没有轻微偏移或镜像，它不再存在：

![在此处输入图像描述](https://i.stack.imgur.com/GtEvI.png)

这让我想到了转换代码。正如我所说，这与 iOS 的代码相同（除了在最后分配转换）。它在 iOS 上完美运行（也可以在任何方向上），但在带有 NSView 对象的 Mac OS X 上却不行，我根本看不到 NSView 对象。

我不确定这里可能出了什么问题，也许 CALayer 的工作方式不同，也许我只是犯了一个非常愚蠢和明显的错误。我只是找不到任何东西。

```
KKAppDelegate* ad = (KKAppDelegate*)[KTApplication sharedApplication].delegate;
float windowHeight = ad.window.frame.size.height;

float x = _position.x - _contentSize.width * _anchorPoint.x;
float y = windowHeight - (_position.y + _contentSize.height * _anchorPoint.y);

if (_ignoreAnchorPointForPosition)
{
    x += _anchorPointInPoints.x;
    y += _anchorPointInPoints.y;
}

float cx = 1, sx = 0, cy = 1, sy = 0;
if (_rotationX || _rotationY)
{
    float radiansX = CC_DEGREES_TO_RADIANS(_rotationX);
    float radiansY = CC_DEGREES_TO_RADIANS(_rotationY);
    cx = cosf(radiansX);
    sx = sinf(radiansX);
    cy = cosf(radiansY);
    sy = sinf(radiansY);
}

CGAffineTransform transform = 
    CGAffineTransformMake(cy * _scaleX, sy * _scaleX,
                          -sx * _scaleY, cx * _scaleY, x, y);

#if KK_PLATFORM_IOS
    _cocoaView.transform = transform;
#elif KK_PLATFORM_MAC
    _cocoaView.layer.affineTransform = transform;
#endif 
```

我验证了代码运行并且 x/y 值是可以预期的（即没有负位置或疯狂值）。甚至在第一步都没有执行旋转，但是在第一帧的变换和绘制之后我仍然看不到 NSView。

我是 CALayer 的总 n00b 并将转换应用于 NSView。如果不是解决方案，我将不胜感激，然后提供一些有关如何调试的提示。谢谢！

**更新：**

我开始尝试通过小值更改图层的变换，看看会发生什么。

```
CGAffineTransform transform = _cocoaView.layer.affineTransform;
transform = CGAffineTransformTranslate(transform, 0.1, 0.1);
_cocoaView.layer.affineTransform = transform; 
```

这样做的效果是一个缓慢移动的 NSButton。它一直向上和向右移动，但在视图框架的边界矩形处消失了：

![在此处输入图像描述](https://i.stack.imgur.com/Q8kjW.png)

所以我相信我的问题是视图没有被转换，只是图层 - 当我转换图层时，它会快速将视图的内容绘制到图层边界之外，因此不再显示任何内容。

我是否正确地假设我必须直接更改视图的属性？文档也强调了这一点。在这一点上，我只是不知道如何将转换应用到视图（即我回到第一方）。我尝试手动设置旋转和框架原点，但这样我无法将旋转中心与 cocos2d 节点的中心（anchorPoint）对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T02:00:48.647

`UIButton`和之间有一个重要的区别`NSButton`。即使 NSButton 最后是 的子类`NSView`，NSButton 的渲染也是由它的单元格来完成的`NSButtonCell`。单元被创建为 NSView 的“更轻”版本。正如 Apple 的文档所述：

> NSCell 类提供了一种在 NSView 对象中显示文本或图像的机制，而无需完整的 NSView 子类的开销。大多数 NSControl 类都大量使用它来实现它们的内部工作。

虽然这在早期的 Mac OS X 时代很有用，但现在不再是这种情况了，希望 Apple 会在某个阶段在 AppKit 中改变这一点。

发生在您身上的是单元格被旋转，但随后它被视图剪辑，在您的情况下是按钮本身。

为了解决这个问题，也让 NSButton 的 superview 层支持，我相信剪辑会消失：

```
[nsView.superview setWantsLayer:YES]; 
```

# python - 选择要写入的 .txt 文件中的行数

> ID：16003812
> 
> 赞同：1
> 
> 时间：2013-04-14T20:10:12.083
> 
> 标签：python, file-io

我有一串单词在 python shell 中以金字塔形式显示，但是当我尝试将它们移动到 .txt 文件时出现问题。

问题是程序获取每个字符并将它们写入新文件，但它只写在第一行，只是用新的替换前一行，最后文件只包含最后一行。

我尝试添加`+'\n'`到 write 函数，但结果是金字塔失去了对齐。

如果可以在文本文件中选择第一行、第二行等并写入它们，这将是解决方案，但我找不到这样的解决方案。

部分代码如下所示：

```
def pyramid(text):

    for i in text:
        line = string.center(i)
        afile = open("name.txt", "w")
        for row in text:
            afile.write(row) 
```

输入“文本”是一个包含单词的嵌套列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:22:04.543

如果我确切地知道问题出在哪里（一些代码会有所帮助），那么回答起来会更容易，但看起来你在写入文件时正在擦除代码。查看您的代码和 open() 函数的不同参数，看看是否可能是这种情况：

[python打开内置函数：模式a、a+、w、w+、r+的区别？](https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T20:31:12.943

使用`afile = open("name.txt", "a")`That 将以附加模式打开它；写入模式会覆盖文件的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T20:36:37.507

问题是您在每次迭代时都以写入模式打开文件，因此每次文件首先被截断然后您写入新行。

在循环外打开文件。

```
In [18]: text=['words words','words words words','words words words words']

def pyramid(text):
    with open("abc","w") as f:
        max_width=len(text[-1])
        for line in text: 
            f.write("{0:^{1}s}\n".format(line,max_width))  #use string formatting
   ....:             

In [20]: pyramid(text)                                                

In [21]: print open("abc").read()
      words words      
   words words words   
words words words words 
```

[字符串格式](http://docs.python.org/2/library/string.html#formatspec)：

> ^ ：强制字段在可用空间内居中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T20:33:49.687

使用`a`选项打开文件，它以附加模式打开它。在追加模式下，每次写入内容时，都会将其追加到末尾，而不是覆盖。请注意，每次运行此程序时，它总是从底部开始。每次重新开始之前，您都必须清除文件。

# android - 滚动时Android列表视图显示在自身之上

> ID：16003813
> 
> 赞同：0
> 
> 时间：2013-04-14T20:10:21.503
> 
> 标签：android, listview, scroll

我的意思是当我滚动列表视图时，屏幕上最初显示的内容现在显示为背景，列表视图在其上方滚动。所有项目在功能上都很好，但这会导致列表视图看起来像垃圾，因为您可以在它下面看到项目。

帮助将不胜感激

# java - 尝试将结果从数组显示到文本区域

> ID：16003817
> 
> 赞同：-1
> 
> 时间：2013-04-14T20:10:43.947
> 
> 标签：java, swing, jtextarea

我必须计算一个文本区域中的所有字母并将结果输出到另一个文本区域。

我可以做计数部分，但我无法将结果显示在另一个文本区域中。它只输出数组中的最后一项。

```
 String str=enterTextArea.getText();

char[]myArry = str.toCharArray();
for(int counter =0;counter<myArry.length;counter++){
    char ch= myArry[counter];
    int count=0;
    for ( int i=0; i<myArry.length; i++){
        if (ch==myArry[i])
            count++;
    }
    boolean flag=false;
    for(int j=counter-1;j>=0;j--){
        if(ch==myArry[j])
            resultTextArea.setText(ch + ":"+"\t"+count + "\n");
        flag=true;
    }
    if(!flag){

        resultTextArea.setText(ch + ":"+"\t"+count + "\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:13:53.710

你想[用`append`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)，没有`setText`。

`setText`正是这样做的：设置文本。追加...好吧，追加。

* * *

不相关，但代码本质上是不可读的。请适当缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:37:38.023

除了`textArea.append`，您的实现逻辑也有问题。即使您修复了显示部分，它也不会打印正确的结果。

既然你说这是你班上的作业，我只是不修复它们，只是指出它们：

*   for 循环`for(int i=0;...)`会更好地更改为`for(int i=counter..) or counter+1`，这取决于您将如何增加计数。否则一些字符会被计算多次。想想这个字符串： `ababab...[ab]x10..ab`正确的结果是`a:10 and b:10`. 你的逻辑不会像我想的那样打印出来。

*   该问题可以在单个 for 循环中使用类似哈希表的数据结构来解决：

你从第一个元素循环数组，如果`char`在那个哈希表中，只是`++`它的值，否则将一个新元素放入那个 HT，`char`作为键，1 作为值。这个 HT 可以在循环之外声明。遍历整个数组后，只需打印 HT 中的所有元素，它就有结果。

希望能帮助到你。

# c# - 如何将嵌套视图模型列表与自定义模型绑定器绑定？

> ID：16003819
> 
> 赞同：0
> 
> 时间：2013-04-14T20:11:31.370
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, viewmodel, asp.net-mvc-viewmodel

我正在尝试将视图模型与嵌套视图模型的动态列表绑定。我想出了如何绑定嵌套的 1 个视图模型。但是我如何绑定它们的列表呢？

我的课程：

```
public class PracticeViewModel
{
    public List<OpeningHourViewModel> OpeningHours { get; set; }
}

  public class OpeningHourViewModel
{

    public OpeningHourViewModel()
    {
        Id = Guid.NewGuid();
        From1 = DateTime.Today;
        From2 = DateTime.Today;
        From3 = DateTime.Today;
        To1 = DateTime.Today;
        To2 = DateTime.Today;
        To3 = DateTime.Today;
    }

    [HiddenInput(DisplayValue = false)]
    [Browsable(false)]
    public Guid Id { get; set; }
    public DayOfWeek DayOfWeek { get; set; }
    [Display(Name = "From", ResourceType = typeof(Resources))]
    public DateTime From1 { get; set; }
    [DateGreaterThanAttribute("From1")]
    [Display(Name = "To", ResourceType = typeof(Resources))]
    public DateTime To1 { get; set; }
    [Display(Name = "From", ResourceType = typeof(Resources))]
    public DateTime From2 { get; set; }
    [Display(Name = "To", ResourceType = typeof(Resources))]
    [DateGreaterThanAttribute("From2")]  
    public DateTime To2 { get; set; }
    [Display(Name = "From", ResourceType = typeof(Resources))]
    public DateTime From3 { get; set; }
    [Display(Name = "To", ResourceType = typeof(Resources))]
    [DateGreaterThanAttribute("From3")]
    public DateTime To3 { get; set; }
    public HourSchedule HourSchedule { get; set; }

    public bool HasMorningOpening
    {
        get
        {
            return From1.TimeOfDay != new TimeSpan() &&
            To1.TimeOfDay != new TimeSpan();

        }
    }

    public bool HasAfternoonOpening
    {
        get
        {
            return From2.TimeOfDay != new TimeSpan() &&
            To2.TimeOfDay != new TimeSpan();

        }
    }

    public bool HasEveningOpening
    {
        get
        {
            return From3.TimeOfDay != new TimeSpan() &&
            To3.TimeOfDay != new TimeSpan();

        }
    } 
```

我的模型绑定器（到目前为止）：

```
 public class PractieModelBinder : IModelBinder
{
    private readonly IPracticeService _practiceService;

    public PracticeModelBinder(IPracticeService practiceService)
    {
        _practiceService = practiceService;
    }

    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var id = (Guid)controllerContext.RouteData.Values["Id"];
        var viewModel = Map.This(_practiceService.GetPractice(id)).To<PracticeViewModel>();

        return viewModel;
    }
    private T TryGet<T>(ModelBindingContext bindingContext, string key) where T : class
    {
        if (String.IsNullOrEmpty(key))
            return null;

        ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + "." + key);
        if (valueResult == null && bindingContext.FallbackToEmptyPrefix)
            valueResult = bindingContext.ValueProvider.GetValue(key);

        bindingContext.ModelState.SetModelValue(bindingContext.ModelName, valueResult);

        if (valueResult == null)
            return null;

        try
        {
            return (Nullable<T>)valueResult.ConvertTo(typeof(T));
        }
        catch (Exception ex)
        {
            bindingContext.ModelState.AddModelError(bindingContext.ModelName, ex);
            return null;
        }
    }
} 
```

提前致谢，

编辑：

使用默认模型绑定器和客户端验证来验证我的模型需要 10 秒。我的模型比这复杂得多，但我隐藏了大部分。我读过使用自定义模型绑定器可以提高响应时间。

# php - Joomla GetUserGroups 确定徽标 URL

> ID：16003820
> 
> 赞同：1
> 
> 时间：2013-04-14T20:11:37.763
> 
> 标签：php, joomla

对于那些精通 php 的人来说，这是一个简单的方法（不幸的是，我不是其中之一）：

```
$user = JFactory::getUserGroups();
if($user == 'silver')
{
    //link to page for registered users 
    $link =  JRoute::_('/index.php/page-3');
}
else
{
    //link to page for default users 
    $link =  JRoute::_('/');   
} 
```

注意：我也尝试过启动此代码，`$user =&`但无济于事。

我试图用这段代码做的是检查用户点击网站左上角的徽标时所属的组，`page-3`如果他属于该组`silver`，则将他路由到，然后将他路由到如果不是默认页面。基本上，我将不同的页面设置为不同组的索引页面，并且我正在尝试适当地路由。

上面的代码是我根据我在其他地方看到的示例代码一起破解的，但显然有些东西不起作用，因为使用这个脚本会破坏网站:)

编辑：修复了 swapnesh 建议的语法错误。原来的问题仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:20:49.023

我还没有测试过，但根据我的记忆，JFactory::getUserGroups() 将返回整数数组，而不是组的实际名称。

考虑实现一些基本 ACL，请参阅文章[如何为您的扩展添加基本 ACL 支持。](http://www.aclmanager.net/blog/general/31-how-to-add-basic-acl-support-to-your-extension)

# ruby - 获取 Ruby 中的所有视频 MIME 类型

> ID：16003824
> 
> 赞同：2
> 
> 时间：2013-04-14T20:12:24.280
> 
> 标签：ruby, mime-types

使用`mime-types`gems 我将如何获得所有视频 mime 类型的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:27:45.580

[如源代码所示](https://github.com/halostatue/mime-types/blob/master/lib/mime/types.rb#L6280)，`[]`采用正则表达式，因此您可以尝试：

```
videos = MIME::Types[/^video/] 
```

或者，如果你已经加载了，你可以访问 Rack 的列表：

```
Rack::Mime::MIME_TYPES.select{|(k,v)| v.start_with? "video" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:27:54.883

您可以使用以下代码执行此操作：

```
require 'mime/types'
puts MIME::Types[/^video/, :complete => true] 
```

输出：

```
video/3gpp
video/3gpp2
video/x-dl
video/dl
video/x-dv
video/x-fli
video/x-flv
video/x-gl
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:38:19.347

```
video_types = []
MIME::Types[/^video/].map{|x| video_types << x.to_s } 
```

要不就

```
MIME::Types[/^video/].map{|type| type.to_s } 
```

# javascript - 用jquery比较各种类名

> ID：16003825
> 
> 赞同：2
> 
> 时间：2013-04-14T20:12:28.450
> 
> 标签：javascript, jquery, loops

我有各种 div 的类名：

```
 box blue full

 box blue border purple

 box purple full

 box white purple border

 box purple border

 box purple full

 box blue border

 box white

 box white purple border 
```

每行都是一个单独的 div，带有它的特定类名。除了蓝色、紫色和白色之外，还可能有红色和绿色。

我想要做的是：我正在遍历每个 div，并且我想检查以确保 div 的类名不超过 1 种颜色（白色和另一种颜色除外）

所以比如“box blueborder Purple”是不行的，我需要把它改成“box white”的类名

所以基本上，任何具有两种颜色的 div 都需要更改为框白色

如果你想看一个例子，我正在处理这个： http: [//k.p2digital.net/](http://k.p2digital.net/)如果你点击红色框，然后点击左上角第三列的框，您刚刚创建的红色框左侧的框变为红色......但由于它位于另一个纯色框之间，这不是它自己的颜色，它应该变成白色。

我有一个循环，在您单击运行后，我将在此处检查以确保没有具有两种不同颜色的框（意味着该框位于两个纯色框之间）并且需要更改为白色

```
 for(var i = 0; i < 36; i++){
        console.log($(".box[rel='"+[i]+"']").attr('class'));    
        class = $(".box[rel='"+[i]+"']").attr('class');

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:23:23.823

用这个

```
colArr=new Array('red','blue',...);
$('div.box').each(function(){
    var i,index;
    i=0;
    for(index in colArr){
        if($(this).hasClass(colArr[index])){
            i+=1;
        }
    }
    if(i>1){
        for(index in colArr){
            if($(this).hasClass(colArr[index])){
                $(this).removeClass(colArr[index]);
            }
        }
        $(this).addClass('white');
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T20:31:53.737

如果您想要一个有效的解决方案，您可以计算每个项目中的颜色，如果太多，请将类名设置为非颜色类名加白色：

```
// create map of all color names for fast lookup
var colors = {
    red: true,
    blue: true,
    purple: true,
    white: true
    // ...
};

$(".box").each(function() {
    // get each class name separately into an array
    var classes = this.className.split(" ");
    var colorCnt = 0, nonColors = [];
    for (var i = 0; i < classes.length; i++) {
        if (colors[classes[i]]) {
            // count the matching color
            ++colorCnt;
        } else {
            // save the non-color class name
            nonColors.push(classes[i]);
        }
    }
    // if too many colors, then set class name to all non-colors plus white
    if (colorCnt >= 2) {
        nonColors.push("white");
        this.className = nonColors.join(" ");
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T20:26:19.903

那这个呢：

```
$('.box').attr('class', function() {
    var m = this.className.match(/blue|purple|white|red/g);
    if (m.length > 1) {
        return this.className.replace(RegExp(m.join('|'), 'g'), '') + ' white';
    }
}); 
```

例如对于带有类的框`box blue border purple`：

```
"box blue border purple".match(/blue|purple|white|red/g) // ["blue", "purple"] 
```

[http://jsfiddle.net/9U3JH/2/](http://jsfiddle.net/9U3JH/2/)

# java - java对象相等不起作用

> ID：16003826
> 
> 赞同：0
> 
> 时间：2013-04-14T20:12:35.340
> 
> 标签：java, eclipse, javacc

我真的尝试在这个论坛中寻找这样一个问题的答案，但到目前为止似乎没有一个工作。

我想键入检查方法声明，例如：

```
public int stackOverFlow() {int a; a = a + 1; return 0;} 
```

返回表达式的类型必须与方法的返回类型匹配（在本例中为 true）。

我使用 Java Tree Builder，它为我的语法中的所有非终端生成语法树（以节点的形式）和默认的深度优先访问者。

我有一个实现 Node 接口的 MethodDeclaration 类。节点接口具有以下形式的接受方法：

```
public Node accept(TypeVisitor v){ return v.visit(v)); 
```

此接受方法使 TypeVisitor 可以访问 MethodDeclaration。

现在访问一个方法声明，我做一个简单的类型检查

```
public Node visit(MethodDeclaration n){

    // this visits the f10 Node, which is the return expression, 
    // and returns a specific Node object
    Node rtype =  n.f10.accept(this);

    // this also does a similar thing by visitng the f1 Node,
    // the method's return type, and returns a  specific Node Object
    Node acType = n.f1.accept(this); 

    // Now if I compare the two specific Node objects, it always fails.

    if(rtype == acType){    
        //enter here    
     }
} 
```

为什么它不进入if-body？我也试过`rtype.equals(acType)`，它返回false。

我试过`rtype.toString.equals(acType.toString())`它也返回false。

我尝试使用 eclipse 调试器进入代码，这是输出：

```
rtype   IntegerType  (id=67)    
acType  IntegerType  (id=69) 
```

从调试器输出中可以看出，rtype 和 acType 都是 IntegerType 对象。

知道为什么比较失败了吗？

如果我使用 if(rtype instanceof IntegerType) 这将返回 true 并且

如果我使用 if(acType instanceof IntegerType) 这也返回 true。

但是对象比较总是失败？

我正在使用 JavaCC（用于解析器生成）、JTB（AST 和访客创建者）、eclipse 和 java 1.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:14:41.897

在 Java 中，`==`测试*对象身份*——两个对象实际上是同一个对象。您想用来`.equals()`测试*对象是否相等*。请注意，默认实现 (in `Object`of`equals()`很简单`==`；如果您想要逻辑相等，您的类必须覆盖`equals(Object)`.

有很多关于如何做到这一点的资源。[本文](http://www.artima.com/lejava/articles/equality.html)是一个很好的起点，Oracle 的[Java 教程](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:35:40.117

我看到两个潜在的问题：

(1)`rtype == acType`很少是你想要的。使用`equals`. 但是既然你告诉过你已经使用过它并且它没有帮助，那么这是第二个问题：

(2) 要么的定义`equals`不是你想象的那样，要么价值观不是你想象的那样。首先，打印`rtype.getClass()`并`acType.getClass()`找出对象的确切类型。然后获取这些类的源代码（假设您使用的库是开源的）并查看它们的`equals`方法是如何定义的。然后继续检查该方法正在比较的字段的值`equals`。

# arrays - Minesweeper C++ - 从文件构建数组时遇到问题

> ID：16003829
> 
> 赞同：0
> 
> 时间：2013-04-14T20:12:58.973
> 
> 标签：arrays, fstream, minesweeper

对于家庭作业，我正在制作一个简单的文本扫雷程序。我需要从将随机生成的文本文件中读取数组参数，但要首先构建程序，我使用的是已知的示例文件。然而，当我读到它时，我只会得到一堆乱七八糟的文字——0xbf 后面跟着一些字母，我认为这是 Unicode。但是，我可以使用 infile 将前两个值分配给数组维度。任何帮助表示赞赏！

```
int main()
{
    //VARIABLES
    int i;
    int j;
    int arrayPos = 0;
    int rowPos;
    int colPos;

        //stream variable declaration
        ifstream infile;

        //open stream files
        infile.open("hw08in.txt");

        infile >> i;
        infile >> j;

        cout << i << " " << j; //test whether the file is being read correctly
        cout << endl;

        int minefield[i][j];
        for(int rowPos=0; rowPos<i; rowPos++)    
    {
        for(int colPos=0; colPos<j; colPos++) 
        {
            infile >> minefield[i][j]; 
        }
    }

        cout << minefield;  

    infile.close();

    return 0;
    } 
```

当我运行程序时， i 和 j 会出现正确的值。但是，该阵列似乎根本没有被构建。从文本文件构建数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:18:02.003

如果文本文件中的值是字符串（即不是二进制格式），则程序应将值读入字符串，然后将字符串转换为整数值。

# facebook - facebook按钮裁剪为跨度大小

> ID：16003830
> 
> 赞同：0
> 
> 时间：2013-04-14T20:13:01.500
> 
> 标签：facebook, overflow

我对这个完全感到困惑。我有一个 Facebook 按钮，它似乎隐藏了溢出但只在 y 轴上？？？

你可以在这里看到它：[www.new.thebespokeflorist.co.uk/blog](http://www.new.thebespokeflorist.co.uk/blog)只需向下滚动并将鼠标悬停在博客文章下方的 facebook 图标上。

facebook 按钮保存在一个 div 中：

```
<div class="share-facebook social-noshow" onclick="toggleSocial()">
    <div class="fb-like" data-href="<?php the_permalink() ?>" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="lucida grande"></div>
</div> 
```

CSS是：

```
.social-show { width: 60px; overflow: auto; }
.social-noshow { width: 0px; overflow: hidden; }
.share-facebook { background: url('http://www.new.thebespokeflorist.co.uk/wp-content/themes/V3 TBF/images/blog/fb.png') left bottom no-repeat; height: 20px; float: left; padding: 0 0 0 30px; transition: width 0.25s ease 0s; }
.share-facebook:hover { width: 90px; transition: width 0.25s ease 0s; overflow: visible; } 
```

onclick() java 是：

```
<script>function toggleSocial() {
    var noShow = document.getElementById("social-noshow");
    noShow.classList.toggle("social-show"); }</script> 
```

据我所知，按钮正在 facebook 按钮本身的跨度宽度内裁剪，即 71px。如果我增加跨度宽度，我可以看到更多的评论框。

有谁知道是什么原因造成的？

我还测试了在网站上的其他地方加载 facebook 按钮，我遇到了完全相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:13:59.850

好的，想通了。我在我的 CSS 中进一步对 Iframe 进行了“修复”，使它们具有 100% 的跨度。删除它解决了我的问题。

# python - Tkinter 画布为空

> ID：16003831
> 
> 赞同：0
> 
> 时间：2013-04-14T20:13:14.920
> 
> 标签：python, canvas, python-3.x, tkinter

我从这里的第一个示例中获取此代码[http://zetcode.com/tkinter/drawing/](http://zetcode.com/tkinter/drawing/)我对其进行了改装，以便它可以在同一文件中打印地图。没有固有的错误，它会通过循环，甚至正确地命中所有 if 语句。但最后画布/框架里面什么都没有。谁能告诉我为什么？

```
from tkinter import Tk, Canvas, Frame, BOTH, NW

    class Example(Frame):

        def __init__(self, parent):
            Frame.__init__(self, parent)   

            self.parent = parent        
            self.initUI()

        def initUI(self):

            self.parent.title("Board")        
            self.pack(fill=BOTH, expand=1)

            canvas = Canvas(self)

            #The first four parameters are the x,y coordinates of the two bounding points.
            #The top-left and the bottom-right. 
            color = ""
            for x in range(10):
                for y in range(10):
                    if type(landMass[x][y]) is Land:
                        color = "grey" 
                    if type(landMass[x][y]) is Food:
                        color = "green"
                    if type(landMass[x][y]) is Water:
                        color = "blue"
                    if type(landMass[x][y]) is Shelter:
                        color = "black"
                    rec = canvas.create_rectangle(3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x , fill=color)
                    text = canvas.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=landMass[x][y].elevation)

    def main():

        root = Tk()
        ex = Example(root)
        root.geometry("500x500+500+500")
        root.mainloop()  

    if __name__ == '__main__':
        main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:45:17.150

`canvas.pack(fill=BOTH, expand=1)`检查链接，您在函数末尾省略了对的调用。

在这里之后：

```
for x in range(10):
    for y in range(10):
        if type(landMass[x][y]) is Land:
            color = "grey" 
        if type(landMass[x][y]) is Food:
            color = "green"
        if type(landMass[x][y]) is Water:
            color = "blue"
        if type(landMass[x][y]) is Shelter:
            color = "black"
        rec = canvas.create_rectangle(3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x , fill=color)
        text = canvas.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=landMass[x][y].elevation) 
```

你应该有：

```
canvas.pack(fill=BOTH, expand=1) 
```

# android - 单击时不关闭抽屉的通知

> ID：16003835
> 
> 赞同：3
> 
> 时间：2013-04-14T20:13:42.070
> 
> 标签：android, android-notifications

在 android 中，当用户单击（或触摸）通知时，它会自动关闭通知抽屉。**有没有办法防止我的应用程序创建的通知出现这种情况？**

它可能是创建通知时设置的标志，或者可能是我可以在通知创建的活​​动中调用的方法，甚至是一些未记录的工作。

我只需要在点击我的应用程序的通知后保持抽屉打开。什么都会做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T11:19:14.843

使用 PendingIntent.getBroadcast 设置您的意图可以做到这一点......

当我发现你的帖子时，我实际上正在寻找一种使用该方法使其关闭的方法......

编辑：我可能应该注意到我的通知正在进行中，我没有根据正常的“可解雇”意图对此进行测试......

我测试了 PendingIntent.getActivity 和 PendingIntent.getService 方法，发现它们都会导致抽屉在点击时关闭......

**我正在使用的解决方法是使用 getActivity 启动一个活动......该活动将所需的意图发送到其他类或应用程序，视情况而定......**

# javascript - 从地图中删除标记（Google Maps API v3）

> ID：16003836
> 
> 赞同：2
> 
> 时间：2013-04-14T20:13:42.910
> 
> 标签：javascript, jquery, google-maps-api-3

我正在开发一个带有谷歌地图的应用程序，它应该在地图上显示几个类别。现在我想有可能从几个类别中添加标记并在必要时删除它们。

我设法弄清楚了整个事情。至少，几乎……我在删除一个类别的标记时遇到了麻烦。我在 jsfiddle 上创建了一个现场演示来说明这一点。所以这就是我尝试这样做的方法：

## 代码

首先我初始化地图等（但这与这里无关）。然后我在地图上添加标记：

```
for(i in markers){
    var marker = new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(markers[i].latitude, markers[i].longitude),
        visible: true,
        data: category
    });
    newMarkers.push(marker);
} 
```

如您所见，我在对象中有“数据：类别”。这不是 google maps api，但它没有给我任何错误，并且让我可以在我想删除标记时搜索数组。这里是 removeMarker 函数：

```
function removeMarkers(category)
{
    for(i in newMarkers) {
        if(newMarkers[i]['data'] == category){
            count ++;
            newMarkers[i].setMap(null); 
            newMarkers.splice(i, 1);
        }
    }
} 
```

它确实删除了标记，但不是全部...有没有人可以解决我的问题？

## [现场演示](http://jsfiddle.net/helenastandaert/GJUcy/)

提前致谢，

海伦娜·S。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:36:16.270

似乎问题在于您正在迭代 newMarkers 数组并同时从中删除元素。
试试这个。它仅将数组中已删除的标记值设置为 null，然后在循环之后过滤这些 null 值：

```
 for(i in newMarkers) {
        if(newMarkers[i]['data'] == category){
            count ++ 
            newMarkers[i].setMap(null); 
            newMarkers[i] = null;
        }
    }
    newMarkers = newMarkers.filter(function(val){ return !!val; }); 
```

[http://jsfiddle.net/GJUcy/](http://jsfiddle.net/GJUcy/)

# ios - SQLite 3 LEFT JOIN，其中“IN”是搜索词

> ID：16003839
> 
> 赞同：0
> 
> 时间：2013-04-14T20:13:59.463
> 
> 标签：ios, sql, sqlite

我有一个需要连接到包含国家/地区的表的数据库表。LEFT JOIN 是在国家 ISO 代码上完成的，如下所示：

```
SELECT table1.city, table2.Country, table2.Flag 
FROM table1 
LEFT JOIN table2 
ON (table2.ISO = table1.country) 
WHERE table1.id = ? 
```

不幸的是，印度的 ISO 代码是“IN”。这是未能提供国家数据的国家，我认为这是因为 IN 是 SQL 的保留字。但是我怎么能执行这个查询呢？

谢谢

罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:20:20.853

在*数据*中使用保留字根本不会影响结果。*编译*查询时保留字有问题，而不是在运行时。

如果您对印度的查询失败，那么还有其他一些问题。

# sass - 在没有 compass 项目的情况下使用 Compass (sass) 功能

> ID：16003840
> 
> 赞同：0
> 
> 时间：2013-04-14T20:13:59.747
> 
> 标签：sass, compass-sass

我的问题：我想使用一些指南针功能（主要是精灵生成和 css3 混合），但我不想为它创建一个指南针项目。我的项目结构应该比罗盘允许我创建的要复杂一些。所以我想用 sass 留在我的项目中，但是在其中导入和使用一些指南针功能。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:41:40.120

Compass 能够管理您的所有东西。试一试。

这是一个示例，这是我目前正在处理的 Compass 项目的结构：

[![在此处输入图像描述](https://i.stack.imgur.com/17w4g.jpg)](http://d.pr/i/AjNx+)

首先，您应该有一个文件夹，就像`sass`您存储非部分 SASS 文件的位置一样，例如`sass/style.sass`或`sass/screen.scss`. 你`config.rb`应该指出它。

然后创建一个名为`partials`您存储所有东西的子文件夹。

在`partials`子文件夹中，您开始创建结构：

```
sass/
  partials/
    _global.sass
    _modules.sass
  style.sass 
```

你的内容`style.sass`应该是这样的：

```
@import partials/global
@import partials/modules 
```

这种结构很容易扩展。一旦您的部分变大并且您决定拆分它，只需创建一个以部分命名的子文件夹，在那里创建较小的部分并从初始部分导入它们：

```
sass/
  partials/
    global/
      _extendables.sass
      _functions.sass
      _mixins.sass
      _variables.sass
    _global.sass
    _modules.sass
  style.sass 
```

内容`_global.sass`：

```
@import global/extendables
@import global/functions
@import global/mixins
@import global/variables 
```

这使您的项目结构易于扩展。

请注意，如果您使用的是 SCSS 语法，则导入语句中需要引号，例如`@import "global/extendables";`.

如果导入对您不起作用，请分享您的项目结构、您使用的确切代码以及您收到的错误文本。

# c# - RegEx 使一个值可选，并根据需要设置另一个值

> ID：16003842
> 
> 赞同：0
> 
> 时间：2013-04-14T20:14:38.030
> 
> 标签：c#, regex

```
string myQuery="RecordFiles/findrecords/$filter=userid eq 844427344589753 and
 recordid eq 55-278-278ac"; 
```

下面给出的是我用来验证上述查询的正则表达式。

```
string myRegexQueryPattern = @"^(RecordFiles/findrecords/\$filter=userid eq)\s(?<userid>\S+)((\s(and recordid eq)\s(?<recordid >\S+))|(\s*$))"; 
```

如何更正我的 regEx 以使我的 recordId 为可选且 userId 为必需？

```
 public static bool ValidateMyQuery(string query, Regex regex)
        {
            Match match = regex.Match(query);

            bool status = false;
            if (match.Success)
            {
                status = true;
            }
            return status;
        } 
```

现在我的 ValidateMyQuery 针对 myQuerystring 返回 true 。但是如果我不发送 recordId ，它返回 false 。我想修改我的正则表达式以便在 recordId 为空时返回 true 。

如何更正我的 regEx 以使我的 recordId 为可选且 userId 为必需？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:53:22.307

如果您只想断言用户 ID 在那里，您可以使用以下内容：

```
string myRegexQueryPattern = @"^RecordFiles/findrecords/\$filter=.*userid eq\s\S+.*"; 
```

由于 recordid 是可选的，我们不在乎它是否存在。

但是，您的正则表达式建议您要捕获这些值，如果是这种情况，我将更新我的答案。

# mysql - 通过 phpMyAdmin 连接到隧道数据库

> ID：16003846
> 
> 赞同：0
> 
> 时间：2013-04-14T20:14:51.917
> 
> 标签：mysql, database, phpmyadmin, tunnel

所以我已经通过隧道将数据库连接到 127.0.0.1 上的端口 3307 .. 我可以使用 Ubuntu 的 MySQL Workbench 连接到数据库并做任何我想做的事情，但是我真的不喜欢 GUI 的界面，所以我想使用 ol'朋友 phpMyAdmin。

我使用的连接参数是：

```
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['port'] = 3307;
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['connect_type']= 'tcp';
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'myDBuser';
$cfg['Servers'][$i]['password'] = 'myDBpass'; 
```

当我转到 时`http://localhost/phpmyadmin`，从下拉列表中选择我的服务器并单击转到，显示以下错误：

```
#1045 - Access denied for user 'myDBuser'@'localhost' (using password: YES) 

phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection. You should check the host, username and password in your configuration and make sure that they correspond to the information given by the administrator of the MySQL server. 
```

我的登录信息是正确的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:07:05.013

我设法通过删除密码并在没有密码的情况下登录来使其工作。我不知道为什么它可以在不提供密码的情况下登录，但它现在可以工作了。谢谢大家的帮助！

# regex - 将 URL 替换为域 (R)

> ID：16003852
> 
> 赞同：1
> 
> 时间：2013-04-14T20:15:27.217
> 
> 标签：regex, r

我想`http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example`用它的域（“Hello world stackoverflow.com”）替换字符串（“Hello world”）中的URL。

到目前为止，我能够用某个常量值而不是 URL 的域来识别和替换 URL：

```
x <- "Hello world http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example"

gsub("http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+", "URL", x) 
```

它高度赞赏任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:34:41.407

根据评估 url 本身的重要性，您可能会摆脱类似的情况：

```
gsub("(https?://[^/\\s]+)[^\\s]*", "\\1", x) 
```

`http://`将使用可选的`s`后跟作为后向参考组 1 进行捕获，然后（贪婪地）`one or more non whitespace and \ characters`消耗零个或多个。`non whitespace characters`然后整个匹配将被捕获的组（域）替换。

**注意：**这假设 url 不包含任何空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:32:46.727

您需要使用反向引用。

让我先说我不知道​​ R，但我假设反向引用的语法是`\N`其中 N 是匹配组。

所以如果你更换模式

```
https?://([^/\s]++)\S*+ 
```

通过字符串

```
\1 
```

您最终应该用捕获组替换匹配的模式。

我不知道转义约定是什么，但您可能需要用另一个反斜杠来转义反斜杠。

分解的模式是

*   `https?`匹配“http”后跟可选的“s”
*   `://`匹配文字“://”
*   `([^/\s]++)`匹配并抓取所有内容，直到下一个斜杠或空格（域）
*   `\S*+`匹配 URL 的其余部分 - 直到下一个空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:33:13.480

您可以使用 grep 扫描字符串并提取 http:// 和 / 之间的所有值 `grep -Po 'http://\K.*?(?=/)'` 查看[http://rfunction.com/archives/1481](http://rfunction.com/archives/1481)和此处的正则表达式指南：[http ://www.regular-expressions.info /](http://www.regular-expressions.info/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T22:54:15.313

这里的问题是（与 Stackoverflow 上的先前问题相比）字符串的非 URL 部分应保留，同时 URL 应缩短为其域。

根据我的问题中提到的帖子，我知道使用以下解决方案：

```
x <- "Hello world http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example"

y.1 <- gsub("http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+", "", x) 
y.2  <- gsub("www.", "", sapply(strsplit(x, "//|/"), "[", 2))

z <- paste( y.1, y.2, sep="")

z 
```

这不是最优雅的解决方案，但它确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T09:59:26.600

```
 library(httr)
    txt <- "hello world http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible"
    l <- lapply(unlist(strsplit(txt," ",fixed=TRUE)),function(w){
           hostname <- parse_url(w)$hostname
           if(is.null(hostname) ) hostname <- w
           hostname
          })
    paste(l,collapse=" ")
    ## hello world stackoverflow.com 
```

# java - 以编程方式将随机图像设置为 ImageButton

> ID：16003860
> 
> 赞同：1
> 
> 时间：2013-04-14T20:16:37.353
> 
> 标签：java, android, casting, drawable, imagebutton

我正在尝试`ImageButton`随机选择我使用的图片。

我认为这段代码应该可以工作，但是在将资源作为`String`.

```
 ImageButton getClickTime = (ImageButton) findViewById(R.id.clicker);

    Random generator = new Random();
    int generatedRandom = generator.nextInt(10) + 1;
    String randomImage = "R.drawable.bg" + (String.valueOf(generatedRandom)) ;
    Drawable replaceImage = getResources().getDrawable((int) randomImage);

    getClickTime.setImageDrawable((Drawable) replaceImage); 
```

`int`我似乎对s、`String`s、`drawable`s 和s 的演员阵容有点混乱`CharSequence`。

如果我手动输入随机选择的图像资源，它可以工作。但是如果我将它传递`String`给一个文本框，我可以看到它的写法与我手动输入时的写法完全相同。

谁能看到我在这里做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:53:41.467

您的问题是您误解了 Android 如何使用资源 ID。该`R`文件包含`int`映射到应用程序中包含的资源的 ID。您试图`drawable`通过将其`String`引用转换为`int`. 这是不可能的，而且没有意义。

我建议您创建一个`int[]`包含`drawable`您想要随机选择的所有 s 的 ID。

```
 int[] imageIds = { 
            R.drawable.bg1,
            R.drawable.bg2,
            R.drawable.bg3,
            R.drawable.bg4,
            R.drawable.bg5
            // etc for as many images you have
    }; 
```

然后，随机选择其中一个`drawable`id 并将其设置为`ImageButton`.

```
 ImageButton getClickTime = (ImageButton) findViewById(R.id.clicker);
    Random generator = new Random();
    int randomImageId = imageIds[generator.nextInt(imageIds.length)];
    getClickTime.setImageResource(randomImageId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:20:05.653

如果你想获取资源的 id，你应该使用这样的东西：

```
 int id = context.getResources().getIdentifier("resource_name", "drawable", context.getPackageName());
     Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:21:26.137

您可能想要使用所有图像的数组并通过随机索引获取它：

```
int[] all = {
    R.drawable.bg1,
    R.drawable.bg2,
}; 
```

# ruby-on-rails - 通过 Rails 访问存储在 Amazon S3 中的数据

> ID：16003861
> 
> 赞同：4
> 
> 时间：2013-04-14T20:16:51.283
> 
> 标签：ruby-on-rails, ruby, amazon-s3

我的目标是根据用户上传到 Amazon S3 的 excel 文件中的数据制作图表。

我已经实现了用户使用 Carrierwave 上传 excel 文件的功能，现在我需要能够访问数据并使其可与图表库 (Highcharts) 一起使用。

我坚持的任务是通过 Rails 直接访问 S3 中的数据。提取数据后，使用 Highcharts 对其进行操作应该相当简单。

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:24:50.370

You can use the [AWS SDK](http://docs.aws.amazon.com/AWSRubySDK/latest/frames.html):

```
require 'aws-sdk'

# retrieve the access key and secret key
access_key_id = ENV["ACCESS_KEY_ID"]
secret_access_key = ENV["SECRET_ACCESS_KEY"]

# create an instance of the s3 client
s3 = AWS::S3.new(access_key_id: access_key_id, secret_access_key: secret_access_key)

# get the bucket
bucket = s3.buckets['your-bucket-name']

# retrieve the objects
bucket.objects.each do |object|
  puts object.key
  puts object.read
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T11:33:13.680

```
s3 = Aws::S3::Client.new
bucket = Aws::S3::Bucket.new('AWS_BUCKET NAME HERE')
bucket.objects.each do |obj|
  File.open("#{Rails.root}/#{obj.key}", 'wb') do |file|
    s3.get_object( bucket:ENV[:AWS_BUCKET], key: obj.key , response_target: file)
  end
end 
```

或者

```
s3 = Aws::S3::Client.new
s3.list_objects(bucket: 'AWS_BUCKET NAME HERE').each do |response|
  response.contents.each do |obj|
    File.open("#{Rails.root}/#{obj.key}", 'wb') do |file|
      s3.get_object( bucket: 'AWS_BUCKET NAME HERE', key: obj.key , response_target: file)
    end
  end
end 
```

有官方[的 AWS-SDK RUBY](https://github.com/aws/aws-sdk-ruby) gem

[版本 2 的 AWS SDK ruby​​ 官方文档](http://docs.aws.amazon.com/sdkforruby/api/index.html)

对于环境变量配置，您可以[使用 figaro](https://github.com/laserlemon/figaro)或[dotenv（用于开发环境）](https://github.com/bkeepers/dotenv)或在**~/.bashrc**文件中进行设置。

**笔记：**

1.  您需要创建 S3 存储桶并获取**AWS_ACCESS_KEY_ID**和**AWS_SECRET_ACCESS_KEY**。
2.  [在开发之前，您可以使用google chrome s3 浏览器扩展](https://chrome.google.com/webstore/detail/extended-s3-browser/ddmmmnnbkhpkgnkafpflhaoohifpdkmg?utm_source=chrome-ntp-icon)测试和访问您的 s3 存储桶数据
3.  运行命令**source ~/.bashrc**或**. ~/.bashrc**文件以反映更改，如果您将 ENV 变量存储在那里。

[代码参考](https://taimoorchangaizpucitian.wordpress.com/2015/10/30/downloading-objects-from-amazon-s3-using-the-aws-sdk-api-v2-for-ruby/)

# c++ - 将构造函数传递给指针数组

> ID：16003862
> 
> 赞同：1
> 
> 时间：2013-04-14T20:16:51.510
> 
> 标签：c++

当需要列表类型容器时，我一直使用向量来存储对象。我想知道如何将构造函数传递给数组指针。如果对象 foo 没有构造函数，则以下在 C++03 中有效

```
foo* p = new foo[5]() 
```

现在，如果`foo`required 的构造`int`函数我将如何在上述语句中传递构造函数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:18:19.583

这不可能。您的`foo`实例只能是默认构造的。

**更新 1**

如果您`foo`没有默认构造函数，那么您将收到有关使用已删除函数或没有匹配 ctor 的编译器错误。

**更新 2**

我看到其他人提供 C++11 解决方案。我的回答似乎只对 C++03 或更早版本是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T20:26:07.227

从 C++11 开始，您可以使用大括号初始值设定项：

```
foo * p = new foo[5] { 1, 2, 3, 4, 5 };   // better: "auto p = ..." 
```

这假设 可以`foo`从*隐式*构造`int`。

但是你也可以使用容器：

```
std::vector<foo> v { 1, 2, 3 };
std::list<foo> w { 1, 2, 3 }; 
```

也许：

```
std::unique_ptr<foo[]> q(new foo[4] { 1, 2, 3, 4} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:22:27.333

> how would I pass the constructor in the above statement?

`new[]` does not have a form for forwarding constructor parameters.

You would instead call the constructors yourself.

```
foo* p = new foo[5]{ foo(1), foo(2), foo(3), foo(4), foo(5) }; 
```

# javascript - 单击按钮时关闭 jQuery 对话框

> ID：16003865
> 
> 赞同：6
> 
> 时间：2013-04-14T20:16:56.173
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个用作表单的 jQuery 对话框，当我单击按钮时，它会执行所需的操作，但不会关闭。我将如何在按钮单击时关闭它。

我当前的代码如下所示：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
    $('#HeatNameDiv').dialog({
        autoOpen: false
    });
});
$(document).ready(function () {
    $('#Change_Heat_Name').click(function (e) {
        e.preventDefault();
        $('#HeatNameDiv').dialog('open');
    });
});
</script> 
```

打开对话框的按钮：

```
Heat Name<input type="text" name="heat_name" value="@Html.ValueFor(x => x.heatname)" class="search-query" placeholder="Search" style ="width:100px"/>
        <button class="btn btn-success" id="Change_Heat_Name" value="Change_Heat_Name" name="action:Change_Heat_Name" type="button"> Change Heat Name</button> 
```

对话框内的表格：

```
<div id="HeatNameDiv" title="Change Heat Name">
@using (Ajax.BeginForm("ChangeHeatName", "Home", FormMethod.Post, new AjaxOptions(){UpdateTargetId = "chemDiv", InsertionMode = InsertionMode.Replace, OnSuccess = "$(document).ready(function () { $('#ChangeHeatName').click(function () { $('#HeatNameDiv').dialog('close');});});" }))
{
    <section>
        Heat Name:<input type="text" name="heatName" value="@Html.ValueFor(x => x.heatname)" style ="width:100px"/>
        Change to:<input type="text" name="updatedHeat" value="" style="width: 100px" />
        <input type="submit" name="ChangeHeatName" value="Change" />
    </section>
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-14T20:19:12.207

`close`允许您完全按照其名称进行操作：关闭对话框：

```
$('#HeatNameDiv').dialog('close'); 
```

此外，您似乎在 some 的 click 事件中调用此函数`#ChangeHeatName`。如果这是锚点或提交按钮，请确保您已取消默认操作，以避免浏览器重定向离开页面：

```
$('#ChangeHeatName').click(function () {
    $('#HeatNameDiv').dialog('close');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:22:05.707

Put all your code in one `$(document).ready()` and try this

```
$(document).ready(function () {
    $('#HeatNameDiv').dialog({
        autoOpen: false
    });

    $('#Change_Heat_Name').click(function (e) {
        e.preventDefault();

        // This will open the dialog
        $('#HeatNameDiv').dialog('open');
    });

    $('#ChangeHeatName').click(function (e) {
        e.preventDefault();

        // This will close the dialog
        $('#HeatNameDiv').dialog('close');
    });
}); 
```

[**DEMO HERE**](http://jsfiddle.net/4s7S6/)

Since the button in inside the dialog box, use the code below:

```
$('#ChangeHeatName').click(function (e) {
    e.preventDefault();
    $('.ui-icon-closethick').click();
}); 
```

[**DEMO HERE**](http://jsfiddle.net/4s7S6/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-19T00:10:38.677

以下是对话框中按钮的代码并在单击时关闭对话框

```
 jQuery(document).ready(function ($) {
                $("#dialog").dialog({
                    autoOpen: false, 
                    show: {
                        effect: "blind",
                        duration: 1000
                    },

                hide: {
                    effect: "explode",
                    duration: 1000
                }
            });

            $("#opener").click(function () {
                $("#dialog").dialog("open");
            });
            $("#Closer").click(function () {
                $("#dialog").dialog("close");
            });
        });

 <div id="dialog" title="Basic dialog">
  <p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
   <button id="Closer">Close Dialog</button>
</div> 
```

打开对话框

# javascript - 如何使用 javascript 获取 iframe 正文文本

> ID：16003866
> 
> 赞同：1
> 
> 时间：2013-04-14T20:16:57.753
> 
> 标签：javascript, iframe, innerhtml

这是02页：

**iframe_content.php**

```
Some content is here. 
```

**iframe.php**

```
<iframe id="sumon_iframe" src="iframe_content.php"></iframe>
<script language="JavaScript" type="text/javascript">
  var iframe_id=document.getElementsByTagName('iframe')[0].id; //i get it perfectly
  var content=iframe_id.body.innerHTML; //i don't get value
  alert(content);
</script> 
```

如何使用 Javascript 获取 iframe.php 页面中的`iframe`'s `innerHTML`( )？`Some content is here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:19:13.073

你必须使用

```
iframe.contentDocument 
```

或者

```
iframe.contentWindow 
```

即

# cocoa - 如何为 Outlook 格式化字符串

> ID：16003868
> 
> 赞同：0
> 
> 时间：2013-04-14T20:17:15.500
> 
> 标签：cocoa, email, outlook, format, applescript

我正在尝试为 Outlook 中的新电子邮件格式化字符串，但是当我使用“\n”时，它不会返回。

有没有办法来解决这个问题？我正在使用可可来构建这个应用程序。我需要得到回报。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:04:04.427

我有这个问题。要修复它，只需使用 html 标签
而不是 \n。Outlook 必须将该字符串转换为 html 字符串，并且
是 HTML 的中断标记。

# c# - 如何在类中异步执行代码的特定部分

> ID：16003871
> 
> 赞同：0
> 
> 时间：2013-04-14T20:17:29.203
> 
> 标签：c#, wpf, asynchronous, speech-recognition

我正在创建一个将响应用户命令的语音识别引擎。我创建了一个按钮来根据用户方便启用和禁用语音识别。我使用语音引擎的 Dispose() 来禁用语音识别。这里是代码

```
private  void button1_Click(object sender, RoutedEventArgs e)
    {
        engineOn = !engineOn;
        if (engineOn)
        {
            speechEngine = speech.createSpeechEngine();     //speech is a class that creates and returns a new speech engine.
            speechEngine.AudioLevelUpdated += new EventHandler<AudioLevelUpdatedEventArgs>(speechEngine_AudioLevelUpdated);
            // use the system's default microphone
            speechEngine.SetInputToDefaultAudioDevice();
            speechEngine.LoadGrammar(new DictationGrammar());

            // start listening
            speechEngine.RecognizeAsync(RecognizeMode.Multiple);
        }
        else
        {
             SpeechClass.myEngine.Dispose();
        }

    } 
```

但是语音对象的处理需要时间。如何异步执行？有没有其他方法可以打开和关闭语音识别？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:57:39.217

您只需使用 RecogniseAsync / RecogniseAsyncStop 将其关闭并再次打开：

[http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.aspx)

或者，您可以尝试加载一个空的语法列表，这样基本上 kinect 就没有什么可听的了。

此外，除非您不再想使用（例如，当应用程序关闭时），否则我会避免完全处置该对象。处理对象（特别是语音识别引擎），然后重新创建它会产生很大的开销。

# jison - 基本计算器中的“IF ELSE”语句

> ID：16003873
> 
> 赞同：1
> 
> 时间：2013-04-14T20:17:54.333
> 
> 标签：jison

我正在尝试使用“IF ELSE”语句实现我自己的计算器。这是基本的计算器示例：

```
 /* description: Parses end executes mathematical expressions. */

/* lexical grammar */
%lex
%%

\s+                   /* skip whitespace */
[0-9]+("."[0-9]+)?\b  return 'NUMBER'
"*"                   return '*'
"/"                   return '/'
"-"                   return '-'
"+"                   return '+'
"^"                   return '^'
"("                   return '('
")"                   return ')'
"PI"                  return 'PI'
"E"                   return 'E'
<<EOF>>               return 'EOF'
.                     return 'INVALID'

/lex

/* operator associations and precedence */

%left '+' '-'
%left '*' '/'
%left '^'
%left UMINUS

%start expressions

%% /* language grammar */

expressions
    : e EOF
        {return $1;}
    ;

e
    : e '+' e
        {$$ = $1+$3;}
    | e '-' e
        {$$ = $1-$3;}
    | e '*' e
        {$$ = $1*$3;}
    | e '/' e
        {$$ = $1/$3;}
    | e '^' e
        {$$ = Math.pow($1, $3);}
    | '-' e %prec UMINUS
        {$$ = -$2;}
    | '(' e ')'
        {$$ = $2;}
    | NUMBER
        {$$ = Number(yytext);}
    | E
        {$$ = Math.E;}
    | PI
        {$$ = Math.PI;}
    ; 
```

我不明白如果我添加这样的“IF”语句：

```
IfStatement
: "IF" "(" Expression ")" Statement
    {
        $$ = new IfStatementNode($3, $5, null, createSourceLocation(null, @1, @5));
    }
| "IF" "(" Expression ")" Statement "ELSE" Statement
    {
        $$ = new IfStatementNode($3, $5, $7, createSourceLocation(null, @1, @7));
    }
; 
```

解析器生成良好。那么我如何使用这样的语句 IF(5>2)THEN (5+2) ELSE (5*2)。计算器的功能当然很好用，但“IF”却不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:38:15.733

您似乎正在寻找两种结构：IF 语句和 IF 表达式。幸运的是，您的示例使用 THEN 关键字来区分它们。您的 IF 表达式生成将类似于：

```
IfExpression
: "IF" "(" Expression ")" "THEN" "(" Expression ")"
    {
        $$ = new IfExpressionNode(/* pass arguments as desired */);
    }
| "IF" "(" Expression ")" "THEN" "(" Expression ")" "ELSE" "(" Expression ")"
    {
        $$ = new IfExpressionNode(/* arguments */);
    }
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:43:29.997

你没有展示你的两条语法是如何结合在一起的，所以很难回答。您是否还看过其他问题，例如[改革语法以消除 if-then-else 中的 shift reduce 冲突](https://stackoverflow.com/questions/12731922/reforming-the-grammar-to-remove-shift-reduce-conflict)？

# mysql - 如何从 Delphi 7 中的表中填充 DBComboBox 控件？

> ID：16003881
> 
> 赞同：0
> 
> 时间：2013-04-14T20:18:18.647
> 
> 标签：mysql, delphi, delphi-7

编程环境是Delphi 7，DBMS是MySQL。

我有这个表定义：

```
DROP TABLE IF EXISTS language;
CREATE TABLE IF NOT EXISTS language (
    language_id   TINYINT       NOT NULL   AUTO_INCREMENT,
    language      VARCHAR(16)   NOT NULL,
    PRIMARY KEY  (language_id),
    UNIQUE       (language)
) ENGINE=InnoDB; 
```

现在，如何使用语言表中的数据填充**DBComboBox**以使用户看不到**language_id**列但它在那里并且我可以使用它？但它也可能只是一个 ComboBox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:20:44.363

您需要通过其`Items`属性填充它。所选项目用作字段值。

您可能想要的是一个查找组合框。它被称为`TDBLookupComboBox`。一旦你找到那个，你应该能够让它工作。

# html - 在 :hover 上重置 css 属性

> ID：16003887
> 
> 赞同：3
> 
> 时间：2013-04-14T20:18:30.273
> 
> 标签：html, css, svg, hover

我正在使用 svg 将堆栈溢出的徽标嵌入到我的简历中。svg xml 包含徽标的填充颜色。

这是svg内容

```
<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 64 64" id="svg3715">
<defs id="defs3717"/>
<g id="layer1">
<path d="m 9.3049611,36.847632 4.4013079,0.04316 -0.153442,19.598393 29.291259,0 0,-19.527506 4.637782,0 0,24.287331 -38.2006795,0 0.023777,-24.401371 z" id="path2830" fill="#919191" style="fill-opacity:1;stroke:none"/>
<rect width="22.944817" height="4.881876" x="16.481951" y="48.434078" id="rect3604" fill="#919191" style="fill-opacity:1;stroke:none"/>
<rect width="23.066864" height="5.0039229" x="20.749949" y="37.830307" transform="matrix(0.9953749,0.09606666,-0.09606666,0.9953749,0,0)" id="rect3606" fill="#A78B68" style="fill-opacity:1;stroke:none"/>
<rect width="23.066864" height="5.0039229" x="26.472515" y="23.401554" transform="matrix(0.96240291,0.27162592,-0.27162592,0.96240291,0,0)" id="rect3606-1" fill="#c19653" style="fill-opacity:1;stroke:none"/>
<rect width="23.066864" height="5.0039229" x="30.528769" y="3.1535864" transform="matrix(0.85597805,0.51701216,-0.51701216,0.85597805,0,0)" id="rect3606-1-3" fill="#D48C28" style="fill-opacity:1;stroke:none"/>
<rect width="23.066864" height="5.0039229" x="27.191883" y="-24.475019" transform="matrix(0.58242689,0.81288309,-0.81288309,0.58242689,0,0)" id="rect3606-1-3-7" fill="#FE8908" style="fill-opacity:1;stroke:none"/>
<rect width="23.066864" height="5.0039229" x="11.174569" y="-50.183693" transform="matrix(0.16480989,0.98632535,-0.98632535,0.16480989,0,0)" id="rect3606-1-3-7-6" fill="#FF7A15" style="fill-opacity:1;stroke:none"/>
</g>
</svg> 
```

我可以使用将徽标设置为黑色（我希望它在正常状态下的样子）

```
rect, path
{
    fill: black;
} 
```

但是现在，我该怎么做才能*删除*上的属性`:hover`，以便让徽标恢复它的亮度？

我试图查看`fill`参数[文档](http://www.w3.org/TR/SVG/painting.html#SpecifyingPaint)。但我没有发现任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:24:26.240

这是可能的 - 只需使用`:not()`CSS 中的选择器。有些浏览器可能不支持它：

```
svg:not(:hover) rect,
svg:not(:hover) path {
    fill: black;
} 
```

在这里看小提琴 - [http://jsfiddle.net/teddyrised/qvV8Q/](http://jsfiddle.net/teddyrised/qvV8Q/)

[编辑]：为了完整起见 - 如果您想为不支持`:not()`选择器的浏览器添加兼容性，您只需相应地切换`.hover`类和样式：

```
$(document).ready(function() {
    $("svg").hover(function() {
        $(this).attr("class", "hover");
    }, function() {
        $(this).attr("class", "");
    });
}); 
```

**注意**：之所以`.attr()`使用，是因为 add/removeClass 方法本身不适用于`<svg>`元素。但是，这可以通过使用这个插件来解决 - [http://keith-wood.name/svg.html#dom](http://keith-wood.name/svg.html#dom)

和CSS：

```
.hover rect, .hover path {
    fill: black;
} 
```

可以在此处查看 JS 驱动的替代方案 - [http://jsfiddle.net/teddyrised/LTRCB/](http://jsfiddle.net/teddyrised/LTRCB/)

# ocaml - 管道的ocaml实现

> ID：16003890
> 
> 赞同：0
> 
> 时间：2013-04-14T20:18:45.770
> 
> 标签：ocaml

我正在尝试实现类似`pipe`功能的东西。

**输入：**函数列表

**输出：**一个函数

**例子：**

```
# pipe [(fun y -> y+5);(fun y -> y*3)] 1 = 18
# pipe [(fun z -> z*3);(fun z -> z+5)] 1 = 8 
```

**我的问题：**

辅助函数`composite`有两个参数，一个函数`f`和一个函数列表`l`。如果列表为空，则返回函数`f`。如果不是，`f`将是 list 头部的参数`g`。但是，我遇到了语法错误。我不知道发生了什么事。有没有人发现错误？

```
let pipe l =
  let composite f l = match l with
      []->f
    | g::gs -> (fun h -> (g -> f)) in
  List.fold_left composite (fun x -> x) l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T21:11:20.657

`(fun h -> (g -> f))`在语法上不正确，我不确定它应该是什么意思。

您的函数的模式匹配`composite`看起来就像您为递归函数编写的那样，但随后您尝试以非递归方式定义它以用于`fold_left`. 无论哪种方式都很好，但你需要下定决心，因为在这里你有一个可悲的妥协，它不起作用。

# yii - Yii select2 - 返回的数据不能被选中

> ID：16003896
> 
> 赞同：1
> 
> 时间：2013-04-14T20:19:48.293
> 
> 标签：yii, jsonp, jquery-select2

我一直在研究 select2 和 yii 并设法通过 json 请求/响应加载数据。

我面临的问题是当我尝试选择返回数据的条目时，我不能。

我哪里错了？动作返回的数据是 json 格式的 CustomerCode 和 Name

表单中的小部件代码

```
$this->widget('bootstrap.widgets.TbSelect2', array(  
    'asDropDownList' => false,  
    'name' => 'CustomerCode',  
    'options' => array(     
        'placeholder' => 'Type a Customer Code',  
                'minimumInputLength' => '2',  
        'width' => '40%',  
                'ajax' => array(  
                                //'url'=> 'http://api.rottentomatoes.com/api/public/v1.0/movies.json',  
                                'url'=> Yii::app()->getBaseUrl(true).'/customer/SearchCustomer',  
                            'dataType' => 'jsonp',  
                            'data' => 'js: function (term,page) {  
                                        return {  
                                        term: term, // Add all the query string elements here seperated by ,  
                                        page_limit: 10,  
                                               };  
                                                             }',        
                            'results' => 'js: function (data,page) {return {results: data};}',  
                            ),  
            'formatResult'    => 'js:function(data){  
                                var markup = data.CustomerCode + " - ";  
                                markup += data.Name;  
                                return markup;  
                            }',
            'formatSelection' => 'js: function(data) {  
                                return data.CustomerCode;  
                            }',  

    ))); 
```

从控制器操作 SearchCustomer 中截取的代码

```
Yii::app()->clientScript->scriptMap['jquery.js'] = false;
$this->renderJSON(Customer::model()->searchByCustomer($term)); 
```

来自基本控制器类的 renderJSON 函数

```
 protected function renderJSON($data)
   {
       header('Content-type: application/json');
       echo $_GET['callback'] . "(";
       echo CJSON::encode($data);
       echo ")";

       foreach (Yii::app()->log->routes as $route) {
           if($route instanceof CWebLogRoute) {
               $route->enabled = false; // disable any weblogroutes
           }
       }
       Yii::app()->end();
   } 
```

感谢对此的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T09:12:53.533

我试试。

改变 `'dataType' => 'jsonp' to 'dataType' => 'json'`

并检查 json 格式

[https://github.com/ivaynberg/select2/issues/920](https://github.com/ivaynberg/select2/issues/920)

# oracle - 尝试创建一个触发器，以防止基于另一个表中的值进行更新

> ID：16003898
> 
> 赞同：0
> 
> 时间：2013-04-14T20:19:53.603
> 
> 标签：oracle, plsql

我试图阻止用户根据另一个表中的日期值更新一个表。

如果表 B 中的日期值早于 sysdate，则表 A 包含我希望使其不可编辑的行。

我需要以某种方式告诉触发器检查该行并使用表 A 的行中的外键来查询表 B 中的相应行，然后执行以下操作：

raise_application_error(-20000, '修改这条记录为时已晚');

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:26:36.690

假设这是一个家庭作业，你会想要这样的东西（我猜测表结构和基数，因为你没有指定）。

```
CREATE OR REPLACE TRIGGER trigger_name
  AFTER UPDATE ON a
  FOR EACH ROW
DECLARE
  l_dt_b b.dt_col%type;
BEGIN
  SELECT dt_col
    INTO l_dt_b
    FROM b
   WHERE b.b_key = :new.b_key;

  IF( l_dt_b < sysdate )
  THEN
    RAISE_APPLICATION_ERROR( -20001, 'Too late' );
  END IF;
END; 
```

但是，如果这是针对真实系统的，则基于触发器的验证是有问题的。例如，在多用户系统中它是不安全的。在会话 1 中，我可能已经修改了 B 中的行，但尚未提交更改。然后，您可以查询会话 2 中的行，查看旧值，并允许`UPDATE`. 我们都可以提交我们的更改，并且没有任何东西会检测到我们的数据处于无效状态。

# php - 在基于 PhoneGap 的应用程序中显示 PHP

> ID：16003904
> 
> 赞同：0
> 
> 时间：2013-04-14T20:20:24.120
> 
> 标签：php, cordova

我试图在我的应用程序中显示 php 的结果，当我在应用程序之外对其进行测试时，它工作正常，并且我尝试了许多解决方案来使用 js、ajax 等加载它但不能让它工作。有任何想法吗？

php从MySql数据库中获取数据

**-----select.php------**

```
<?php
$con=mysqli_connect("localhost","localhost","","test");
// Check connection
if (mysqli_connect_errno())
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM Persons");

/*while($row = mysqli_fetch_array($result))
{
    echo $row['FirstName'] . " " . $row['LastName'];
    echo "<br />";
}*/

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
</tr>";

while($row = mysqli_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . $row['FirstName'] . "</td>";
    echo "<td>" . $row['LastName'] . "</td>";
    echo "<td>" . $row['Age'] . "</td>";
    echo "</tr>";
}

echo "</table>";
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:39:51.143

Phonegap 没有任何 PHP 的概念，您无法在 PhoneGap 应用程序中运行 PHP。您需要从应用程序向服务器发出 AJAX 请求以进行交互。

它在应用程序中运行良好的原因是您可能直接在服务器上的浏览器中运行它。

如果您不熟悉 jQuery，请看一下 jQuery，尤其是 $.ajax()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:57:55.267

Phone gap 不支持 php，所以如果你想要非静态内容，那会很好……如果你有一个 API，它将为你的应用程序提供内容。[顿悟它是](https://github.com/jmathai/epiphany)[Jaisen](https://github.com/jmathai)创建的一个非常好的开源框架。这将为您创建一个好的 API 提供一个良好的开端。您还可以了解[Zend Frameworks](http://framework.zend.com/)，它对于大型应用程序更加健壮。

# c++ - 使用 C++ 替换 snprintf 和 printf

> ID：16003905
> 
> 赞同：0
> 
> 时间：2013-04-14T20:20:25.677
> 
> 标签：c++, c, ostream

我想知道我是否可以得到一些帮助。我正在尝试根据给我们的实验室任务中的要求移植一些代码。基本上我已经用 C 创建了一些程序，现在的部分要求是将 printf 和 snprintf 语句移植到 C++ 中。printf 我想我可以管理，因为使用 cout << "whatever"<< endl 似乎是标准的。问题在于 snprintf，并使用 ostream oss() 替换它。这是我要解决的代码的一个分区。

```
char* formatTime(
                struct timeval* tv,     // Pointer to timeval struct
                char* buf,              // Pointer to char buf
                size_t len              // size of buffer
                )
{
    struct ExpandedTime etime2;         // Struct object declaration

    // Array containing strings for the months

    const char* month[] =
        {
        "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul",
        "Aug", "Sep", "Oct", "Nov", "Dec"
        };

    if (len > 0)                        // If statement for 0 length buf error
    {
        localTime(tv, &etime2);

        // Printing to the supplied buffer in the main program
        char timebuf[80];               // Buffer to hold the time stamp
        ostream oss(timebuf, sizeof(timebuf));

        oss << etime2.et_year << ends;
        cout << timebuf << endl;
//      snprintf(buf, len, "%02i %s %02i %02i:%02i:%02i:%03i",
//      etime2.et_year, month[etime2.et_mon], etime2.et_day, etime2.et_hour,
//      etime2.et_min, etime2.et_sec, etime2.et_usec);
    } 
```

现在我已经注释掉了原来的 snprintf 语句。我只是测试存储在某种结构中的“年份”参数。但是我不断收到以下错误。

```
rkim@l3055serv:~/plot$ make
g++ -g -Wno-deprecated -c fmttime.cc fmttime.o
fmttime.cc: In function 'char* formatTime(timeval*, char*, size_t)':
fmttime.cc:273: error: no matching function for call to 'std::basic_ostream<char, std::char_traits<char> >::basic_ostream(char [80], unsigned int)'
/usr/include/c++/4.4/ostream:361: note: candidates are: std::basic_ostream<_CharT, _Traits>::basic_ostream() [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:82: note:                 std::basic_ostream<_CharT, _Traits>::basic_ostream(std::basic_streambuf<_CharT, _Traits>*) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/iosfwd:56: note:                 std::basic_ostream<char, std::char_traits<char> >::basic_ostream(const std::basic_ostream<char, std::char_traits<char> >&)
make: *** [fmttime.o] Error 1 
```

我确保包含 iostream 和 sstream 以及 using namespace std; 但是我仍然收到此错误并且无法解决它。老实说，我们刚刚开始学习 C++，所以部分问题在于 C++ 的整体抽象性。然而，这个使用 osream 和 oss 的代码分区是由我们的实验室讲师提供给我们的，除了他使用错误的标头“strstream 和 oststream”之外，就我对 C++ 的了解而言，这似乎是有道理的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:23:58.717

您正在寻找 std::ostringstream，而不是 ostream。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:24:17.593

我建议你`ostream`用`ostringstream`.

`ostream`是一个抽象的通用类 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:26:35.083

`ostream`没有这样的构造函数，您可能想使用 an`ostringstream`和类似的东西：

```
std::ostringstream oss;
oss << etime2.et_year << ends;

std::cout << oss.str() << endl; 
```

...但是使用它并没有多大意义，`oss`因为您不妨直接流式传输到`std::cout`.

# apache - Apache Mod Rewrite - Replace www.example.com with www/example.com

> ID：16003912
> 
> 赞同：0
> 
> 时间：2013-04-14T20:21:20.360
> 
> 标签：apache, mod-rewrite

**First what I have that already works...**

On my server I use parked domains where each domain points to the same directory and the software merely determines what the domain is before pulling from the similar named database. For files (images, scripts, etc) I currently have the following setup...

> public_html/www.example1.com/
> 
> public_html/www.example2.com/
> 
> public_html/www.example2.com/

...using the following rewrite...

```
RewriteCond %{REQUEST_URI} !\.(gif|jpg|js|mp3|png)$
RewriteRule ^[^/]*/(images|search|scripts|sounds)(.+) $1$2 [QSA] 
```

So in example if you request *image77.png* from *example2.com* Apache rewrites the (internal) request to...

> public_html/www.example2.com/images/image77.png

The external path (in your browser) would simply appear as...

```
http://www.example2.com/images/image77.png 
```

* * *

**Secondly, the problem I'm trying to solve...**

However as I add more domains this is starting to crowd my *public_html/* directory. What I'm trying to do is simply move all the domain asset directories in to a directory setup that looks like the following...

> public_html/www/

...so the www directory would have the following listing...

> public_html/www/example1.com/
> 
> public_html/www/example2.com/
> 
> public_html/www/example2.com/

* * *

**Lastly, my thoughts on how to possibly approach the problem...**

The first Apache variable `$1` is generated from `%{REQUEST_URI}`. If we can simply replace the period . between *www* and the domain name this should update the rewrite to the newer format though I'm not sure how to do that and keep what works already in tact?

In other words can we can create a rewrite condition to replace just the first period with a slash?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:40:42.727

您可以在之后捕获域部分`www.`并稍后在 RewriteRule 中将其用作`%1`

```
RewriteCond %{HTTP_HOST} ^www\.(.+)$
RewriteRule ^.*?/(.*)$ /public_html/www/%1/$1 [L] 
```

# sql-server - 使用 SQL Server 2012 Management Studio 创建表

> ID：16003915
> 
> 赞同：1
> 
> 时间：2013-04-14T20:21:33.400
> 
> 标签：sql-server

我正在尝试在 SQL Server 2012 Management Studio 中创建一个表。

我想创建一个包含列的表：`category`、`customer`、`Costume`、`Payment`和`rental`。

这是我到目前为止的SQL：

```
CREATE TABLE dbo.CATEGORY
(
    CATEGORY_ID     CHAR(5)     PRIMARY KEY,
    CATEGORY_DESC   CHAR(50)    NOT NULL
);

CREATE TABLE dbo.COSTUME
(
    Costume_ID              CHAR(5), 
    Costume_Desc            CHAR(50), 
    Costume_Size            CHAR(5),
    Costume_RentalPricE     DECIMAL(12,2),
    Category_ID             CHAR(5)
);

CREATE TABLE dbo.CUSTOMER
(
    Customer_ID         CHAR(5),
    Customer_LastName   CHAR(50),
    Customer_FirstName  CHAR(50),
    Customer_Address    CHAR(30),
    Customer_City       CHAR(50),
    Customer_State      CHAR(2),
    Customer_Zip        CHAR(10),
    Customer_Phone      CHAR(10),
    Category_ID         CHAR(5)
);

CREATE TABLE dbo.Payment
(
    Payment_ID          CHAR(5),
    Customer_ID         CHAR(5),
    Payment_Date        DATE,
    Payment_Amount      DECIMAL(12,2),
    Payment_Comment     VARCHAR,
);

CREATE TABLE dbo.Rental
(
    Rental_ID       --it says this needs to be Long integer for field size?
    Customer_ID         CHAR(5),
    Costume_ID          CHAR(5),
    Rental_Date         DATE,   
    Rental_DueDate      DATE,
    Rental_CheckIn      --YES OR NO? i'M NOT SURE HOW TO DO THIS. 
    Rental_Penalty      DECIMAL(12,2)
); 
```

如何创建布尔列和长字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:28:54.783

```
USE COSTUMERENTAL;

CREATE TABLE dbo.CATEGORY  -- should always specify schema
(
    CATEGORY_ID       CHAR(5)    PRIMARY KEY, -- can't be two data types
    CATEGORY_DESC     CHAR(50)   NOT NULL
); -- don't need to specify PRIMARY KEY twice

--USE COSTUMER RENTAL; -- is there a space in the name or not?

CREATE TABLE dbo.COSTUME
(
    Costume_ID              CHAR(5), -- need commas
    Costume_Desc            CHAR(50), 
    Costume_Size            CHAR(5),
    Costume_RentalPricE     DECIMAL(12,2), -- Number isn't a valid SQL Server data type  
    Category_ID             CHAR(5)
); -- need closing brackets; also should always use semi-colons to terminate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T19:11:54.170

**为 Server Management Studio 创建表语法：**

在`Microsoft's SQL Server`数据库中，创建如下表：

```
CREATE TABLE dbo.MYTABLE
(
    my_integer       INTEGER PRIMARY KEY, //int −2,147,483,648 to 2,147,483,647
    my_varchar       VARCHAR(100),        //strings of characters
    my_forcedwidth   CHAR(50),            //fixed width of 50 chars
    my_yes_no        BIT,                 //holds 0 or 1
    my_decimal       DECIMAL(12,2)        //precision number.
    my_bigint        Bigint               //big integer
); 
```

有关数据类型的完整列表：http: [//www.connectionstrings.com/sql-server-data-types-reference/](http://www.connectionstrings.com/sql-server-data-types-reference/)

# html - Is CSS content property SEO friendly?

> ID：16003916
> 
> 赞同：13
> 
> 时间：2013-04-14T20:21:44.927
> 
> 标签：html, css, seo

Is CSS content property bad from SEO point of view, do search engines really scan the words which are injected using `:before` and `:after` selectors?

Take this example :

Mr.A uses CSS `content` property to embed the question tag in `h1`, so my question is do search engines scan that word in my `h1` tag? am pretty much sure they don't.

[**Demo**](http://jsfiddle.net/nX9XQ/)

```
<h1 class="CSS">Pure CSS Menu</h1>
<h1 class="HTML">Structure And Symantics</h1>

.CSS:before {
    content: 'CSS : ';
}

.HTML:before {
    content: 'HTML : ';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T21:26:41.303

不，就“正面”排名而言，搜索引擎并不关心您在 css、js、alt 标签甚至元标签（关键字）中放置的内容。

但是，他们会尝试检测您是否在注入垃圾邮件、设置 h1 和隐藏关键字以显示：无、在白色文本上设置白色背景等。

所以..任何与纯内容、网址和标题无关的东西都可能对您不利，但对您不利（有些黑帽可能不同意..）。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-14T20:32:02.493

只需使用[lynx](http://lynx-win32-version.en.softonic.com/) - 这就是搜索引擎查看您网站的方式。

至于 CSS 的东西，它会忽略它，但标记为标题的位具有更高的优先级。

有关 Google SEO 的详细信息，请参阅[此 pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)。

# zend-framework - Applying decorator to specific type e.g. text or select

> ID：16003921
> 
> 赞同：0
> 
> 时间：2013-04-14T20:22:07.903
> 
> 标签：zend-framework, zend-form

I'm know how to add custom decorators and use view helpers to set decorators for named elements.

Is their a method or an attribute that would allow me to set a default decorator for all textareas or for all text inputs or all selects?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:18:41.563

是的，您可以为您的 html 对象（如 textarea 或文本框）覆盖默认的 zend 装饰器

这是创建我们自己的 decomrator [Link的好例子](http://blog.philipbrown.id.au/2009/10/overriding-zend-form-element-default-decorators-for-good/)

# java - 在播放框架2.0中将服务器上的文本文件作为字符串读取的最简单方法是什么

> ID：16003922
> 
> 赞同：0
> 
> 时间：2013-04-14T20:22:25.763
> 
> 标签：java, playframework-2.0

我在 Play 2.0.4 中找不到 VFS 或任何其他简单直接的方式来将文本文件作为字符串读取。

编辑：我正在寻找一个 java 解决方案。很抱歉错过了那条信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:39:39.423

您可以使用以下代码：

```
String content = Files.toString(new File("files/config.txt"), Charsets.UTF_8); 
```

它使用 Google Commons，默认包含在 Play 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:36:06.430

Play 2 默认导入 Google Commons 库，使用它和 Java 的`File`，您可以读取任何文件并将其流传递到任何地方。不再需要 VFS...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T20:04:13.867

当你在 Windows 中时，不要忘记在传递文件路径时添加两个 '\'。例如：

```
 File file = new File(""); // to create an empty file 
    // we suppose that the file in the public folder 
    File file_to_read = new File(file.getAbsolutePath() + "\\public\\filename.txt"); 
```

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T04:47:14.497

您在寻找 Java 或 Scala 解决方案吗？

在 Scala 中，您可以通过这种方式（没有外部依赖项）从文件中读取

`scala.io.Source.fromFile("/path/to/file.txt").getLines`

或来自 Play 资源

`scala.io.Source.fromURL(Play.resource("/resource/file/packaged/with/play.txt").get).getLines`

# ios - AFNetworking: getPath:parameters-method causes an issue

> ID：16003925
> 
> 赞同：0
> 
> 时间：2013-04-14T20:22:37.413
> 
> 标签：ios, objective-c, json, afnetworking

I´m trying to do a GET request to my web service, using AFNetworking(great framework). This is the code for the request:

```
 AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:[NSURL URLWithString:@"http://mywebservice.com/service/"]];

[httpClient setParameterEncoding:AFJSONParameterEncoding];
[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSMutableURLRequest *request = [httpClient getPath:@"http://mywebservice.com/service/contacts"
parameters:@{@"accessID":self.accessId, @"name":contactName}
success:^(AFHTTPRequestOperation *operation, id responseObject) {
    //Success code
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //Error code
}]; 
```

This causes the following issue to appear(pointing at my NSMutableURLRequest instance): **Initializing 'NSMutableURLRequest *__strong' with an expression of incompatible type 'void'**

I have no idea what causes this, so any help would be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:27:31.467

这种方法在`AFHTTPClient`：

```
-(void)getPath:parameters:success:failure: 
```

什么都不返回 ( `void`) 并且您正在尝试将其分配给变量。

```
NSMutableURLRequest *request = [httpClient getPath:.... 
```

这是我们解释您的错误消息所需的所有信息：

```
Initializing 'NSMutableURLRequest *__strong' with an expression of incompatible type 'void' 
```

您声明一个变量 ，`request`然后将其键入为`NSMutableURLRequest *`。对于内存管理，ARC 增加了内存语义`__strong`。您的变量的完整类型是``NSMutableURLRequest *__strong`. 然后，您尝试将`=`方法的结果分配`-(void)getPath:parameters:success:failure:`给该变量。该方法不返回任何内容，否则称为`void`. `void`并且`NSMutableRequest *`不是同一类型，因此编译器会抱怨上述错误消息。

当你调用它时，这个方法实际上开始执行请求。结果作为参数提供给完成或失败块，在 HTTP 请求完成时执行。这将是执行您尝试发送的 HTTP 请求的正确方法：

```
[httpClient getPath:@"contacts"
         parameters:@{@"accessID":self.accessId, @"name":contactName}
            success:^(AFHTTPRequestOperation *operation, id responseObject) {
                 //Success code
         } 
            failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                 //Error code
         }]; 
```

请注意如何将其分配给变量。此外，在使用这些路径方法时，`AFHTTPClient`我们不需要包含`baseURL`，只需要包含我们想要附加到它的路径部分。

# jquery - How to validate a field before whole form validation using ValidationEngine

> ID：16003926
> 
> 赞同：2
> 
> 时间：2013-04-14T20:22:47.837
> 
> 标签：jquery, jquery-validation-engine

I'm trying to use ValidationEngine ([https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)) I need to validate one field (for email) before the whole form will be validated:

```
$(document).on("click", "#EmailButton", function(){
    var valid=$("#Email").validationEngine('validate');
    alert(valid);
})
$("#<?=$formName?>").validationEngine({
   promptPosition:'topLeft', 
   scroll: false,
   binded: false,
   onValidationComplete: function(form, status){
if(status==true){                    
           $.ajax({
                type: "POST", ... ... ... }
} 
```

So, when I click on `#EmailButton` the `#Email` field should be validated, not whole form.

But when the `#EmailButton` is clicked, the ajax script from `$("#<?=$formName?>").validationEngine({` is run!

I need this feature because I want to make some changes in the form after the `#Email` field is filled (if email is in Database or not).

How can I validate the `#Email` field before to run the `$("#<?=$formName?>").validationEngine({})` script ?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T17:20:15.903

早先的答案是不正确的，如果仅仅是因为 jQuery 验证引擎的代码也不正确的话。由于当前版本中的错误，此代码片段的布尔值实际上是向后的。尝试将“true”更改为“false”，您应该会得到一个有效的结果。这是更正后的示例（假设相关字段的 ID 为“电子邮件”）：

```
function validateEmail() {
    var isValid = !$("#email").validationEngine('validate');

    // You may delete the following two lines after confirming that things are working:
    if (isValid) alert('valid');
    else alert('not valid');

    return isValid; // leave this line in -- it will return the result of validation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T10:40:41.320

尝试这个：

在 HTML 中：

```
<form id="emailForm">
      Email:<input type="email" id="txtEmail" class="validate[required,custom[email],maxSize[30]]"/>
            <input type="button" value="Email Verify" onclick="emailCheck()"/>  
</form> 
```

在jQuery中：

```
function emailCheck()
{
    if($("#emailForm").validationEngine('validate') == true)
    {
       alert('valid');
    }
    else
    {
       alert('not valid');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T07:41:36.100

```
$("#Email").validationEngine('validateField',$("#Email")) 
```

# php - jQuery reloading PHP results not working

> ID：16003932
> 
> 赞同：0
> 
> 时间：2013-04-14T20:23:39.113
> 
> 标签：php, jquery

**This is how I post a new comment:**

```
 if (guest.val() != '' && comment.val() != '')
        {
            $.post("events.php?action=send", $("#form").serialize() , function(data) 
            {
                $("#processing").html('');

                if ($(data).html() == 'Hello fuckign world!') 
                {
                    $("#comments").html(data);
                } 
                else 
                {
                $("#comments").html(data);
                $("#guest_name").val('');
                $("#text").val('');
                submit.fadeIn("slow");                  
                }

            });
        }
        else
        {
            $("#processing").html('');
            $(".error").fadeIn("slow");
            $(".error").html('Please fill up the fields!');

            $(".error").click(function() {
                $(".error").fadeOut("slow");
            });
            submit.fadeIn("slow");
        }
    }); 
    loadComments(); 
});

function loadComments()
{
    $.post("events.php?action=reload", { reload : 'true' } , function(callback) 
    {
        $(".comments").html('');
        $(".comments").html(callback);
    });
} 
```

Before that, of course I have document ready, and on click function.

Now, at the end I put this:

```
 loadComments(); 
```

Which is:

```
function loadComments()
{
    $.post("events.php?action=reload", { reload : 'true' } , function(callback) 
    {
        $(".comments").html(callback);
    });
} 
```

So after the jQuery finishes it's action, it will send a post again to load all results, and updatethe div that holds the data.

*But for some reason , after submiting, it doesn't reload the results. I have to do F5 to reload the results..*

**Question:**

What have I done wrong? how do I fix it? How do I reload the results using jquery/ajax?

That's how I fetch the results:

```
if (isset($_POST) && isset($_GET['action']) && $_GET['action'] == 'reload')
{
    $select = $CONNECT_TO_DATABASE->query("SELECT * FROM comments LIMIT 10");
    while($row = $select->fetch( PDO::FETCH_ASSOC )) {
        echo
            '
            Name: '.$row['client_name'].'<br />
            Message: '.$row['client_message'].' <br />
            Likes: '.$row['client_likes'].' <br /> <br /> <hr></hr>
            ';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:30:59.787

修复它，我必须将 loadComments() 函数放在 click() 函数中。因此，当您执行发表评论时，您处于 click() 函数中。因此它不会在它之外做任何事情。

# c++ - Support for Use of C++ with MPI?

> ID：16003936
> 
> 赞同：0
> 
> 时间：2013-04-14T20:24:09.697
> 
> 标签：c++, c, mpi

After spending a good amount of time and effort trying to make my C++ code work with MPI, I've been pointed to the following article (@Johnathan Dursi), [http://blogs.cisco.com/performance/the-mpi-c-bindings-what-happened-and-why/](http://blogs.cisco.com/performance/the-mpi-c-bindings-what-happened-and-why/), and have basically given up. It takes more effort and thought than simply coding in C (even if the only consideration were to translate the bindings in the code found online, in "Using MPI", and even in "Using MPI-2", supposedly more C++ friendly) and it appears that the folks working on MPI-3 have abandoned the effort to support C++ altogether. Can anyone describe any benefit whatsoever to using C++ while coding an MPI library?

# c# - c#表单集合值到Int列表

> ID：16003937
> 
> 赞同：1
> 
> 时间：2013-04-14T20:24:12.513
> 
> 标签：c#, regex, asp.net-mvc-4, formatting, formcollection

我的 C# MVC4 应用程序中有一个表单集合。在`index[0]`这个集合中，有一个字符串总是被格式化为`"10=on&13=on&15=on"`; 唯一的区别是`#=on`字符串中的数量。

我想从这个字符串中提取每个数字并将它们添加到整数列表中。这样做的最简单方法是什么？需要正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:33:18.467

> 这样做的最简单方法是什么？

我会使用自定义模型绑定器：

```
public class MyModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var request = controllerContext.RequestContext.HttpContext.Request.Params;
        var keys =
            from key in request.Keys.Cast<string>()
            where request[key] == "on"
            select key;
        var onValues = new List<int>();
        foreach (var key in keys)
        {
            int value;
            if (int.TryParse(key, out value))
            {
                onValues.Add(value);
            }
        }

        return onValues.ToArray();
    }
} 
```

然后是这样的控制器动作：

```
public ActionResult SomeAction([ModelBinder(typeof(MyModelBinder))]int[] values)
{
    return View();
} 
```

现在您可以简单地将以下请求发送到此控制器操作，自定义模型绑定器将完成这项工作：

```
/SomeAction?10=on&13=on&15=on 
```

> 需要正则表达式吗？

不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:29:30.960

```
var nums = Regex.Matches(input, @"\d+").Cast<Match>().Select(m => m.Value)
          .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:32:34.310

有问题的字符串看起来像一个查询字符串，因此一种方法是使用从字符串[`System.Web.HttpUtility.ParseQueryString()`](http://msdn.microsoft.com/en-gb/library/system.web.httputility.parsequerystring.aspx)中获取 a `NameValueCollection`。然后枚举键并解析它们以获取整数。

```
var collection = System.Web.HttpUtility.ParseQueryString("10=on&13=on&15=on");

foreach (var key in collection.Keys.Cast<string>())
{
    int i;
    if (int.TryParse(key, out i))
    {
        // add i to list of ints
    }
} 
```

# javascript - Simulating a link click in JQuery with Chrome - using both href and download

> ID：16003938
> 
> 赞同：1
> 
> 时间：2013-04-14T20:24:14.577
> 
> 标签：javascript, jquery, google-chrome-extension, download, click

I have a Chrome extension that dynamically creates links and adds them to a webpage. The links download files. They each have a `download` attribute to name the files correctly (only works in Chrome, afaik - but it only needs to), as well as `href` for the url of the file. How can I simulate clicking one of these links?

I don't need to click the version within the document necessarily, just the link object.

Basically, how can I write, in Javascript/JQuery, code to have Chrome download a file named with `download` at the `href` location?

The JQuery `click()` command didn't seem to do anything, though I can't figure out why.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-08T13:24:38.343

我知道这个帖子很旧，但它是搜索的第一个结果，所以对于其他寻求答案的人来说，这里是：

```
$(css_selector)[0].click(); 
```

而你正在这样做 $(function(){ **HERE** }); 并且在原始页面加载时将一些 js 功能添加到 css_selector，然后您可能想通过设置超时来延迟**HERE**执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:34:16.830

您可以尝试像这样模拟[点击](http://docs.jquery.com/Events/click "点击")

```
$("your_selector").trigger("click"); 
```

或者像这样

```
$("your_selector").click(); 
```

# c++ - error in passing 2-d array to function

> ID：16003945
> 
> 赞同：1
> 
> 时间：2013-04-14T20:24:47.500
> 
> 标签：c++, algorithm

The program is just for passing complete 2-d array to function.I am able to run the problem by hook or by crook but i didnt understood.I have written a program which i should have written threotically and which i have written to make it working(in comments) can anyone please explain me this issue??

```
#include<iostream>
#include<conio.h>
void print(bool *a);
using namespace std;
int main()
{
    bool arr[3][3]={1,1,1,1,0,0,0,1,1};
    print(arr[0]);//**This IS working but why  we need subscript 0 here only print(arr) should work?..**
    getch();
    return 0;
}
void print(bool *a)
{

    for(int i=0;i<3;i++)
    {
        for(int j=0;j<3;j++)
            {
                cout<<*(a+i*3+j)<<"|";//**cant we use cout<<a[i][j] here??In 1 d array it is working fine**
            }
            cout<<"--";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:29:15.933

```
void print(bool *a) 
```

应该

```
void print(bool a[][3]) 
```

编译器需要知道第二维的大小才能计算寻址偏移量。

```
void print(bool a[][3], int rowSize)
{
   for(int i=0;i<rowSize;i++)
   {
     for(int j=0;j<3;j++)
     {
        cout<<a[i][j]<<"|";
     }
     cout<<"--";
} 
```

在 C++ 中，您应该更喜欢使用`vector<vector <bool> >`2D 动态数组`arr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:28:27.037

利用：

```
 void print(bool a[][3]) 
```

如果您想调用，这是正确的原型`print(arr);`

然后您可以使用`a[i][j]`访问`print`函数体中的数组元素。

`arr`是数组的数组`3`，`bool`当传递给`print`函数调用时，`arr`表达式将转换为指向数组`3`的指针`bool`。

# php - Codeigniter HMVC 忽略子目录 cq。配置行

> ID：16003950
> 
> 赞同：2
> 
> 时间：2013-04-14T20:25:14.557
> 
> 标签：php, codeigniter, hmvc

我对[Wiredesignz的 HMVC 模块有些苦恼](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

关键是：每个人似乎都可以使用 HMVC 的子目录（例如这里：[这里](http://ellislab.com/forums/viewthread/192633/)），方法是将其添加到 /application/config/config.php 中的 config.php 文件中：

```
$config['modules_locations'] = array(
    APPPATH.'modules/' => '../modules/',
    APPPATH.'modules/' => '../modules/test',
); 
```

但是，它对我不起作用。似乎这条线被完全忽略了。

我试过的：

制作了以下文件：

```
-modules
    -- foo
    -- -- controllers
    -- -- -- test.php

    -- test
    -- -- bar
    -- -- -- controllers
    -- -- -- -- baz.php 
```

foo/test 有效，即使我删除了完整的 $config['modules_locations'] 行。但是 test/bar/baz 没有。

Wiredesignz 的联机帮助页说：

> Modules::$locations 数组可以在 application/config.php 文件中设置。

这似乎是一个错字（application/config/config.php 更合乎逻辑），但我什至尝试过（但没有运气）。

这里出了什么问题？

Tnx :)

*编辑：“它不起作用”我的意思是我得到了 404。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:12:52.873

除非有很多关于这个主题的论坛，否则只有一种正确的方法来设置 /application/config.php 文件：

```
$config['modules_locations'] = array(
    APPPATH.'modules/' => '../modules/',
    APPPATH.'modules/test/' => '../modules/test/',
); 
```

设置之后，我可以从 domain.com/index.php/baz 上的示例访​​问控制器 baz（不是 /test/baz，也可以通过为其添加路由来实现。）

# java - 将 JTable 导出到 XML 文件

> ID：16003954
> 
> 赞同：0
> 
> 时间：2013-04-14T20:26:01.143
> 
> 标签：java, xml, swing, excel, jtable

我正在尝试将 JTable 导出到 Microsoft Excel 可用的文件。

最初，我将数据写入文本文件并将扩展名设置为“.xls”

当然，这是不专业的，Excel 继续抱怨格式不正常。没错。

无论如何，现在我正在尝试将它导出到 XML 表，这样我就可以用 Excel 打开它。但是，当我尝试使用 XMLEncoder 导出它时，会打印异常，并且在 Excel 中打开时，它看起来或工作不正常。表中没有来自表的数据，而是包含有关对象和类的数据。

这是我的代码：

```
public static void saveToXML(JTable table, File location, String name) throws Exception{

    XMLEncoder encoder;
    File file = new File(location.getAbsolutePath() + "/" + name + ".xml");

    encoder = new XMLEncoder(new FileOutputStream(file));
    encoder.writeObject(table);
    encoder.close();

} 
```

打印的异常如下：

```
 java.lang.InstantiationException: fbla.evaluation.window.MainWindow$2
Continuing ...
java.lang.RuntimeException: failed to evaluate: <unbound>=Class.new();
Continuing ...
java.lang.InstantiationException: javax.swing.plaf.basic.BasicTableHeaderUI$MouseInputHandler
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement JTableHeader.removeMouseMotionListener(BasicTableHeaderUI$MouseInputHandler);
Continuing ...
java.lang.InstantiationException: fbla.evaluation.window.MainWindow$38
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement JTable.addMouseListener(MainWindow$38);
Continuing ...
java.lang.InstantiationException: javax.swing.plaf.basic.BasicTableUI$Handler
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement JTable.removeMouseMotionListener(BasicTableUI$Handler);
Continuing ... 
```

非常感谢任何帮助和见解。可能还值得一提的是，表模型是自定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:50:22.523

您可以将 导出`TableModel`到剪贴板，如此[处](https://stackoverflow.com/a/14364021/230513)和[此处](https://stackoverflow.com/a/15283824/230513)所示。

附录：*该表的模型是自定义模型。*

只要您的表的模型是`TableModel`，您就可以提取数据，如下[所示](https://stackoverflow.com/a/15731782/230513)。

如果可以接受 Office Open XML (OOXML) 格式，您可以使用[Apache POI](https://stackoverflow.com/tags/apache-poi/info)创建文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T19:29:20.437

这是我写的代码，我使用 DOMParse。就我而言，我从中获取信息的 JTable 始终具有相同的列数，因此我只需将行与 FOR 缝合。

简而言之，为了使用 DOM 解析器创建 XML 文件，必须采取的基本步骤是：

*   创建一个 DocumentBuilder 实例。
*   创建一个 DocumentBuilder 实例。
*   创建一个 DocumentBuilder 实例。
*   从上面的 DocumentBuilder 创建一个 Document。
*   使用 Element 类及其 appendChild 方法创建所需的元素。
*   使用 Element 类及其 appendChild 方法创建所需的元素。
*   创建一个新的 Transformer 实例和一个新的 DOMSource 实例。
*   为要使用的输出流创建一个新的 StreamResult。
*   使用 transform 方法将 DOM 对象写入您想要的输出流。

```
 static String getPath = "";

    public void setPath(String path) {
        getPath = getPath.concat(path);
        getPath = getPath.concat(".xml");
    }

    public void importToXML(JTable tabla) {
        try {
            DocumentBuilderFactory documentFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder documentBuilder = documentFactory.newDocumentBuilder();
            Document document = documentBuilder.newDocument();

            Element root = document.createElement("calculos");
            document.appendChild(root);

            for (int i = 0; i < tabla.getRowCount(); i++) {
                Element articulo = document.createElement("articulo");
                root.appendChild(articulo);

                Element tipo = document.createElement("name1");
                tipo.appendChild(document.createTextNode("" + tabla.getValueAt(i, 0)));
                articulo.appendChild(tipo);

                Element unidades = document.createElement("name2");
                unidades.appendChild(document.createTextNode("" + tabla.getValueAt(i, 1)));
                articulo.appendChild(unidades);

                Element costounitarioDLS = document.createElement("name3");
                costounitarioDLS.appendChild(document.createTextNode("" + tabla.getValueAt(i, 2)));
                articulo.appendChild(costounitarioDLS);

                Element costounitarioPesos = document.createElement("name4");
                costounitarioPesos.appendChild(document.createTextNode("" + tabla.getValueAt(i, 3)));
                articulo.appendChild(costounitarioPesos);

                Element porcentajeIGI = document.createElement("name5");
                porcentajeIGI.appendChild(document.createTextNode("" + tabla.getValueAt(i, 4)));
                articulo.appendChild(porcentajeIGI);

                Element montoIGI = document.createElement("name6");
                montoIGI.appendChild(document.createTextNode("" + tabla.getValueAt(i, 5)));
                articulo.appendChild(montoIGI);
            }

            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource domSource = new DOMSource(document);

            StreamResult streamResult = new StreamResult(new File(getPath));
            transformer.transform(domSource, streamResult);
        } catch (ParserConfigurationException | TransformerException pce) {
            JOptionPane.showMessageDialog(null, "Error: " + pce.toString());
        }
    } 
```

我只是让这段代码工作，所以它可以被优化。希望这可以帮助任何寻找 aswe 的人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-09T08:04:42.357

也许你应该试试这个：[Java Swing -Export JTable To Excel File](http://niravjavadeveloper.blogspot.com/2011/05/java-swing-export-jtable-to-excel-file.html)

```
void ExportToExel(JTable table, File file) {

    try {

        WritableWorkbook workbook1 = Workbook.createWorkbook(file);
        WritableSheet sheet1 = workbook1.createSheet("First Sheet", 0); 
        TableModel model = table.getModel();

        for (int i = 0; i < model.getColumnCount(); i++) {
            Label column = new Label(i, 0, model.getColumnName(i));
            sheet1.addCell(column);
        }
        int j = 0;
        for (int i = 0; i < model.getRowCount(); i++) {
            for (j = 0; j < model.getColumnCount(); j++) {
                Label row = new Label(j, i + 1, 
                        model.getValueAt(i, j).toString());
                sheet1.addCell(row);
            }
        }
        workbook1.write();
        workbook1.close();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

# android - Android AlertDialog 导致内存泄漏

> ID：16003959
> 
> 赞同：0
> 
> 时间：2013-04-14T20:26:28.633
> 
> 标签：android, android-mediaplayer, android-alertdialog, mediacontroller

再会！斯波克先生在这里。

我`ErrorListener`为我的 Android创建了一个`MediaPlayer`. 如果我尝试`AlertDialog`从我的处理程序中显示一个，当按下对话框上的“确定”按钮时，会导致发生“泄漏窗口”异常。以下是相关的代码片段：

类定义：

```
public class PlayMediaActivity extends Activity implements OnPreparedListener, OnErrorListener, MediaController.MediaPlayerControl 
```

创建`MediaPlayer`：

```
mediaPlayer = new MediaPlayer();
mediaPlayer.setOnPreparedListener(this);
mediaPlayer.setOnErrorListener(this);

mediaController = new MediaController(this);

try {
mediaPlayer.setDataSource(URL);
mediaPlayer.prepareAsync();
mediaPlayer.start();
}
catch(...) {} // Omit real code for brevity. 
```

`MediaPlayer`准备好的听众：

```
public void onPrepared(MediaPlayer mediaPlayer) {
    Log.d(TAG, "onPrepared");
    mediaController.setMediaPlayer(this);
    mediaController.setAnchorView(findViewById(R.id.main_audio_view));

    handler.post(new Runnable() {
      public void run() {
        mediaController.setEnabled(true);
        mediaController.show();
      }
    });
  } 
```

`MediaPlayer`错误监听器：

```
public boolean onError(MediaPlayer mp, int what, int extra) {

    ShowDialog("Unable to play audio. Try again later.");

    return true;
} 
```

`ShowDialog`常规：

```
private void ShowDialog(String message) {
    // Alert the user something went wrong.
    ContextThemeWrapper cw = new ContextThemeWrapper( PlayMediaActivity.this, R.style.AlertDialogTheme );
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder( cw );

    alertDialogBuilder.setTitle("Oops!");

    // set dialog message
    alertDialogBuilder
            .setMessage(message)
            .setCancelable(true) // Allow back hardkey to dismiss
            .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close current activity
                    dialog.dismiss();
                    PlayMediaActivity.this.finish();
                }
              });

    alertDialogBuilder.setOnCancelListener(new DialogInterface.OnCancelListener() {  // Catch back key press.        
        @Override
        public void onCancel(DialogInterface dialog) {
            //do whatever you want the back key to do
            dialog.dismiss();
            PlayMediaActivity.this.finish();
        }
    });

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
    alertDialog.show();
} 
```

当我`ShowDialog`从`onError`例程调用时，它会弹出，但是当我按下“确定”按钮时，活动会停止并销毁，但对话框会泄漏（根据堆栈跟踪），即使我`dismiss()`在完成活动之前调用。

关于这种主题的stackoverflow帖子有很多，但没有一个解决了我的问题。我对 Android 开发很陌生，我的猜测是我在做一些根本错误的事情，但我不能指望它。

有谁看到问题可能是什么？

编辑 1 - 包括 StackTrace：

```
04-14 14:38:08.089: E/WindowManager(2099): Activity com.lcboise.lifechurch.PlayMediaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405619f8 that was originally added here
04-14 14:38:08.089: E/WindowManager(2099): android.view.WindowLeaked: Activity com.lcboise.lifechurch.PlayMediaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405619f8 that was originally added here
04-14 14:38:08.089: E/WindowManager(2099):  at android.view.ViewRoot.<init>(ViewRoot.java:259)
04-14 14:38:08.089: E/WindowManager(2099):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-14 14:38:08.089: E/WindowManager(2099):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-14 14:38:08.089: E/WindowManager(2099):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-14 14:38:08.089: E/WindowManager(2099):  at android.app.Dialog.show(Dialog.java:241)
04-14 14:38:08.089: E/WindowManager(2099):  at com.lcboise.lifechurch.PlayMediaActivity.ShowDialog(PlayMediaActivity.java:133)
04-14 14:38:08.089: E/WindowManager(2099):  at com.lcboise.lifechurch.PlayMediaActivity.onError(PlayMediaActivity.java:237)
04-14 14:38:08.089: E/WindowManager(2099):  at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1456)
04-14 14:38:08.089: E/WindowManager(2099):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 14:38:08.089: E/WindowManager(2099):  at android.os.Looper.loop(Looper.java:123)
04-14 14:38:08.089: E/WindowManager(2099):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-14 14:38:08.089: E/WindowManager(2099):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 14:38:08.089: E/WindowManager(2099):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 14:38:08.089: E/WindowManager(2099):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-14 14:38:08.089: E/WindowManager(2099):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-14 14:38:08.089: E/WindowManager(2099):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T09:02:02.777

我建议您不要在方法内创建 AlertDialog.Builder。更推荐在Activity的onCreate方法中创建，然后在onDestroy中用dialog.dispose()释放对话框。您的方法可以做的是接收一个 AlertDialog 作为参数，并对其进行配置（positiveButton、negativeButton、title、message 等），以便在 Activity 外部正确配置对话框，并正确处理其生命周期以避免不必要的内存泄漏

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T22:29:57.660

尝试在 UI 线程上显示您的对话框：

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        ShowDialog("Unable to play audio. Try again later.");
    }
}); 
```

# php - 在 symfony2 表单中添加多个属性

> ID：16003960
> 
> 赞同：0
> 
> 时间：2013-04-14T20:26:32.087
> 
> 标签：php, symfony

我有一种表单类型，我将在其中添加一个实体并添加多个属性

```
$builder ->add('number', 'entity', array(
              'class'    => 'TelnOperatorBundle:Numberrange',
              'property' => 'De'
              'multiple' => false,)); 
```

在我想添加另一个字段的属性中，即

```
$builder ->add('number', 'entity', array(
              'class'    => 'TelnOperatorBundle:Numberrange',
              'property' => 'De','A'
              'multiple' => false,)); 
```

我怎么能做到？

```
->add('subnumbers', 'collection', array('type'         => new SubnumberType(),
                                              'allow_add'    => true,
                                              'allow_delete' => true)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:41:14.553

你不能，属性只允许 a`string`作为参数：[http ://symfony.com/doc/master/reference/forms/types/entity.html#property](http://symfony.com/doc/master/reference/forms/types/entity.html#property)

您的情况的解决方案是保留`property`空白，然后`__toString()`在您的实体中实现该方法。

首先更改定义表单类型的方式（将空白值传递给属性）：

```
$builder ->add('number', 'entity', array(
              'class'    => 'TelnOperatorBundle:Numberrange',
              'multiple' => false,)); 
```

其次，在您的实体中定义`__toString()`函数：`TelnOperatorBundle:Numberrange`

```
public function __toString()
{
    return $this->De . ' : ' . $this->A;
} 
```

# c++ - C++ 从文件的一部分加载数据

> ID：16003962
> 
> 赞同：0
> 
> 时间：2013-04-14T20:26:35.940
> 
> 标签：c++, serialization, file-io, binaryfiles, boost-serialization

我想在一个文件中保留一堆简单的结构（目前每个结构只有 3 个整数），并且能够在任何给定时间读回其中一个结构。

作为第一步，我试图将它们输出到一个文件中，然后使用 boost::serialization 将它们读回。目前我正在这样做，它崩溃了：

```
std::array<Patch, 3> outPatches;

outPatches[0].ZOrigin = 0;
outPatches[0].XOrigin = 0;
outPatches[0].Resolution = 64;

outPatches[1].ZOrigin = 1;
outPatches[1].XOrigin = 5;
outPatches[1].Resolution = 3;

outPatches[2].ZOrigin = 123;
outPatches[2].XOrigin = 546;
outPatches[2].Resolution = 6;

std::ofstream ofs("testing.sss", std::ios::binary);

for (auto const& patch : outPatches)
{
    std::cout << "start archive: " << ofs.tellp() << std::endl;
    {
    boost::archive::binary_oarchive oa(ofs);
    std::cout << "start patch: " << ofs.tellp() << std::endl;

    oa << patch;
    }
}

ofs.close();

std::array<Patch, 3> inPatches;

std::ifstream ifs("testing.sss", std::ios::binary);

for (auto& patch : inPatches)
{
    std::cout << "start archive: " << ifs.tellg() << std::endl;
    {
    boost::archive::binary_iarchive ia(ifs); // <-- crash here on second patch

    std::cout << "start patch: " << ifs.tellg() << std::endl;

    ia >> patch;
    }
}

ifs.close();

for (int i = 0; i != 3; ++i)
    std::cout << "check: " << (inPatches[i] == outPatches[i]) << std::endl; 
```

我正计划使用 tell 对每个结构的位置进行索引，并在加载时寻求跳到该结构。这是一个合理的方法吗？除了基础知识之外，我对流的了解不多。

我尝试将所有补丁放在一个 o/iarchive 中，这样可以很好地按顺序读取所有内容。但是，在流中搜索不起作用。

我找到了这个，这可能是我想要的，但我不知道它在做什么或如何使用它，或者它是否适用于 boost::serialization: [read part of a file with iostreams](https://stackoverflow.com/questions/8964325/read-part-of-a-file-with-iostreams)

如有必要，我可能愿意切换到另一种序列化方法，因为我对此还没有走得太远。

**编辑 3：**将编辑 1 和 2 移至答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:50:38.950

我曾经有过类似的情况（使用提升/序列化）。我当时所做的（如果我记得的话，它非常有效）是将文件映射到虚拟地址，编写一个在内存缓冲区而不是文件上操作的流媒体，并为我想要读取的每个部分分配适当的偏移量流媒体作为缓冲区开始/长度并使用流媒体初始化 iarchive，因此序列化库将其视为每个对象都在单独的文件中。

当然，添加到文件需要重新映射。现在回想起来，这似乎有点奇怪，但它是有效的，公平的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:32:21.973

## 提升序列化

似乎不可能在 boost 序列化存档中跳过。到目前为止，我最好的方法是在一个流上使用多个档案：

```
static const int numPatches = 5000;

std::vector<int> indices(numPatches, 0);
std::iota(indices.begin(), indices.end(), 0);

std::vector<Patch> outPatches(numPatches, Patch());

std::for_each(outPatches.begin(), outPatches.end(), 
    [] (Patch& p)
    {
        p.ZOrigin = rand();
        p.XOrigin = rand();
        p.Resolution = rand();
    });

std::vector<int64_t> offsets(numPatches, 0);

std::ofstream ofs("testing.sss", std::ios::binary);

for (auto i : indices)
{
    offsets[i] = ofs.tellp();

    boost::archive::binary_oarchive oa(ofs, 
        boost::archive::no_header | boost::archive::no_tracking);
    oa << outPatches[i];
}

ofs.close();

std::random_shuffle(indices.begin(), indices.end());

std::vector<Patch> inPatches(numPatches, Patch());

std::ifstream ifs("testing.sss", std::ios::binary);

for (auto i : indices)
{
    ifs.seekg(offsets[i]);

    boost::archive::binary_iarchive ia(ifs,
        boost::archive::no_header | boost::archive::no_tracking);
    ia >> inPatches[i];

    ifs.clear();
}

std::cout << std::all_of(indices.begin(), indices.end(), 
    [&] (int i) { return inPatches[i] == outPatches[i]; }) << std::endl; 
```

不幸的是，这很慢，所以我认为我不能使用它。接下来是测试 protobuf。

* * *

## 谷歌::protobuf

我有一些使用 protobuf 的东西。它需要一些摆弄（显然我必须使用 LimitingInputStream 类型，并存储每个对象的大小），但它比 boost::serialization 版本快得多：

```
static const int numPatches = 500;

std::vector<int> indices(numPatches, 0);
std::iota(indices.begin(), indices.end(), 0);

std::vector<Patch> outPatches(numPatches, Patch());

std::for_each(outPatches.begin(), outPatches.end(), 
    [] (Patch& p)
    {
        p.ZOrigin = rand();
        p.XOrigin = rand();
        p.Resolution = 64;
    });

std::vector<int64_t> streamOffset(numPatches, 0);
std::vector<int64_t> streamSize(numPatches, 0);

std::ofstream ofs("testing.sss", std::ios::binary);

PatchBuffer buffer;

for (auto i : indices)
{
    buffer.Clear();

    WriteToPatchBuffer(buffer, outPatches[i]);

    streamOffset[i] = ofs.tellp();
    streamSize[i] = buffer.ByteSize();

    buffer.SerializeToOstream(&ofs);
}

ofs.close();

std::random_shuffle(indices.begin(), indices.end());

std::vector<Patch> inPatches(numPatches, Patch());

std::ifstream ifs("testing.sss", std::ios::binary);

for (auto i : indices)
{
    ifs.seekg(streamOffset[i]);

    buffer.Clear();

    google::protobuf::io::IstreamInputStream iis(&ifs);
    google::protobuf::io::LimitingInputStream lis(&iis, streamSize[i]);
    buffer.ParseFromZeroCopyStream(&lis);

    ReadFromPatchBuffer(inPatches[i], buffer);

    ifs.clear();
}

std::cout << std::all_of(indices.begin(), indices.end(), 
    [&] (int i) { return inPatches[i] == outPatches[i]; }) << std::endl; 
```

# java - 令牌“;”上的错误 , { 预期的 GUI

> ID：16003966
> 
> 赞同：0
> 
> 时间：2013-04-14T20:26:51.707
> 
> 标签：java, syntax, actionlistener

我正在尝试做一个计算器，我使用一些布尔变量来检查是否已经添加了一个点，以及用户是否输入了第二个数字。

问题出在我评论的那一行。我稍后在 ActionListener 中尝试使用这些变量，但由于这些错误，它不允许我使用。（编译器没有指出任何其他错误）我不知道是否应该在其他地方声明变量，请帮助。谢谢你。

```
public class Calculadora extends Frame implements ActionListener, WindowListener

{
  Button btn1, btn2, btn3, btn4, btn5, btn6, btn7, btn8, btn9, btn0; 
  Button btnSum, btnMin, btnMult, btnDiv, btnDot, btnEq, btnAns;
  Button btnSin, btnCos, btnTan, btnSqrt, btnXpowY, btnLn, btnPi, btnE, btnAbs;
  TextField TxAns, TxOper;
  Label LblOper, LblAns;
  Panel PnlGeneral, PnlOper, PnlSimple, PnlExtras, PnlText;

    public String num1, num2;
    public double ans;
    public boolean punto= false;  
    public boolean segunda= false;  **//Error: Syntax error on token ";", { expected**
    num1="";  **//Syntax error on tokens, ConstructorHeaderName expected instead**
    num2="";

    public static void main(String[] args) throws IOException  **//Syntax error on token "(", ; expected**
    { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:28:41.667

除了声明之外，您不能在类的主体/声明中分配变量...

删除变量赋值：

```
num1="";  
num2=""; 
```

从类的身上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:29:34.593

这些陈述：

```
num1="";
num2=""; 
```

...不在方法中。唯一可以放在方法/构造函数之外的东西是*声明*和初始化块。

将值作为声明的一部分分配会更简单：

```
public String num1 = "", num2 = ""; 
```

...尽管说实话，我根本不建议使用公共变量。

# bigcommerce - 以反向日期顺序获取 bigcommerce 订单

> ID：16003968
> 
> 赞同：1
> 
> 时间：2013-04-14T20:27:09.500
> 
> 标签：bigcommerce

使用 PHP Bigcommerce 库，我想获取我所有订单的列表，最新订单位于顶部。这是我用来获取订单的：

```
$filter = ['status_id' => 11];
$orders = Bigcommerce::getOrders($filter); 
```

它列出了从最旧到最新的所有订单。在 API 文档中，它说有一个名为“date_created”的订单过滤器：

> “如果您的应用程序依赖于新订单的到来，您可能需要同时检查 date_created 和 status 字段（或 status_id）。”

我试过像这样通过过滤器传递日期：

```
$filter = ['date_created' => '01/04/2013', 'status_id' => 11]; 
```

以及其他格式，例如 01-04-13 等。但它们都没有为我返回任何订单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:13:13.143

实际上，它似乎是记录方式的一个错误。您需要使用 min_date_created 字段而不是 date_created 进行过滤。日期应为 RFC 格式“Tue, 20 Nov 2012 00:00:00 +0000”

例如 -

```
$filter = array('min_date_created' => 'Tue, 20 Nov 2012 00:00:00 +0000');
$orders = Bigcommerce::getOrders($filter);
print_r($orders); 
```

这将起作用。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T04:02:45.563

如何使用`sort`属性？

`$filter = ['sort' => 'date_created:desc'];`

[资料来源： List Orders 文档](https://developer.bigcommerce.com/api/v2/#list-orders)的分页会话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-22T07:02:02.190

```
$orders = Bigcommerce::getOrders(array('sort' => 'date_created:desc'));

print_r($orders); 
```

这将工作以降序显示顺序。

# c++ - 如何强制 std::map::find() 按值搜索

> ID：16003973
> 
> 赞同：0
> 
> 时间：2013-04-14T20:27:49.063
> 
> 标签：c++

根据我的推断， std::map::find() 方法通过比较指针地址而不是值来搜索地图。例子：

```
std::string aa = "asd";
const char* a = aa.c_str();
const char* b = "asd";
// m_options is a std::map<const char*, int )
m_options.insert( std::make_pair( a, 0 ) );
if( m_options.find( b ) != m_options.end() ) {
    // won't reach this place
} 
```

我有点惊讶（因为我使用的是原始类型而不是某些类）并且我认为我做错了什么，如果不是那么如何强制它使用值而不是地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T20:34:52.220

您正在`char *`用作地图的键类型。对于指针类型，比较是通过它们的地址来执行的（因为`map`无法知道这些指针是以 NULL 结尾的 8 位字符串）。

为了实现您的目标，您可以创建`map`带有自定义`compare`功能，例如：

```
bool MyStringCompare(const char *s1, const char *s2) { 
  return strcmp(s1, s2) < 0; 
}
...
std::map<const char*, int, MyStringCompare> m_options; 
```

或者考虑使用`std::string`作为键类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T20:31:26.193

实际上，map 使用严格排序的比较运算符来查找值，而不是相等运算符。无论如何，您可以通过传递一个比较字符串值的自定义函子来实现这一点，或者做正确的事情并`std::string`改用它。

# r - 有效地在散点图中找到线性拟合

> ID：16003974
> 
> 赞同：2
> 
> 时间：2013-04-14T20:27:50.693
> 
> 标签：r, optimization, scatter-plot

我有一个点列表

```
 n     x
   7     99.06
  12    100.45
  25     98.11
  42    106.92
  75    106.78
  94    102.34
 128    119.05
 145    116.54
 149    116.06
 167    111.49
 173    112.69
 195    120.25
 201    119.70
 217    107.62
 233    105.53
 239    107.86
 257    109.77
 287    115.71 
```

这是散点图和我想要实现的目标 ![散点图](https://i.stack.imgur.com/7twM4.png)

我想找到所有超过两点的直线。我所拥有的是蓝点 - 我想要找到的是红线。

简单的解决方案是`lm`在所有组合上运行并通过调整后的 R 平方过滤顶部的组合。但是，有很多组合，而且需要很长时间。我已经尝试通过设置部分之间的角度限制来消除，但这还不够重要。另外，当我有一条很长的线时遇到了一些问题，其中包括图中 1/2 所示的其他重要部分。

我会很感激任何新的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:58:22.457

我已经完成了，`lm`我只用了不到两秒钟的时间就找到了所有匹配项。对你来说太长了吗？如果没有，这就是我的做法。我在您的数据中创建了一个包含三个点的所有 816 个组合的向量并循环遍历它。当 r 平方高于 0.9999 时，我绘制了这条线。

有了这个标准，我在图表的左侧得到了更多的拟合，而右侧的一些则不存在。在您的图表中，某些拟合似乎不是最佳的。你可能想检查一下

```
library(zoo)
data1 <- read.table(text="
2012-01-11  99.06
2012-01-19 100.45
2012-02-07  98.11
2012-03-02 106.92
2012-04-19 106.78
2012-05-16 102.34
2012-07-05 119.05
2012-07-30 116.54
2012-08-03 116.06
2012-08-29 111.49
2012-09-07 112.69
2012-10-09 120.25
2012-10-17 119.70
2012-11-12 107.62
2012-12-05 105.53
2012-12-13 107.86
2013-01-10 109.77
2013-02-25 115.71")
data1 <-zoo(data1[,2],as.Date(data1[,1]))
plot.zoo(data1, type="p", col="blue", pch=16)

my.comb <-combn(data1, 3,simplify = FALSE)

for (i in 1:length(my.comb)){
vect <- my.comb[[i]]
reg <-lm(coredata(vect)~index(vect))
if(summary(reg)$adj.r.squared>0.9999) lines(my.comb[[i]], col="red")
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/P1kYK.png)

# erlang - Erlang接收循环 - 变量未绑定问题

> ID：16003976
> 
> 赞同：1
> 
> 时间：2013-04-14T20:27:58.430
> 
> 标签：erlang, variable-assignment

所以我需要编写这个函数来接收来自三个不同进程的数字并保存它们。我无法让它工作，我收到“变量未绑定”错误。

```
serverB2(Time, Client1, Client2, Client3) ->
    receive 
        {From, TimeClient} ->
            if 
                From == Client1 ->
                    TimeClient1 = TimeClient;
                From == Client2 ->
                    TimeClient2 = TimeClient;
                From == Client3 ->
                    TimeClient3 = TimeClient;
            end,
            serverB2(Time, Client1, Client2, Client3)
    end,
List = [Time, TimeClient1, TimeClient2, TimeClient3],
io:format("~w \n", List). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:17:37.217

您收到 variable unbound 错误，因为您的代码具有三个路径，并且在每个路径中您只会绑定一个 variables `TimeClient1`，`TimeClient2`因此`TimeClient3`您总是有两个未绑定。更糟糕的是，您的代码永远不会停止。您将收到消息，然后评估 if 语句，然后`serverB2`一次又一次地递归调用代码。收到后您的语句没有任何代码路径。

我会这样写

```
serverB2(Time, Client1, Client2, Client3) ->
  List = [ Time
      | [ receive {Client, TimeClient} -> TimeClient end
        || Client <- [Client1, Client2, Client3]]],
  io:format("~w~n", [List]). 
```

或更传统的方式

```
serverB2(Time, Client1, Client2, Client3) ->
  List = [ Time | collect_times([Client1, Client2, Client3])],
  io:format("~w~n", [List]).

collect_times([]) -> [];
collect_times([Client|Tail]) ->
  TimeClient = receive {Client, Time} -> Time end,
  [ TimeClient | collect_times(Tail) ]. 
```

这就是编译器如何翻译上面的列表理解。

我在这里使用的技巧是我按照我想要的顺序接收消息，而不是它们到达邮箱的顺序。我在那里使用选择性接收，因为`Client`在上面的两个示例中变量都绑定在接收模式中。有更复杂的方式如何接收消息，以便它们如何到达，您应该使用非常好的理由（例如性能）。

# ruby-on-rails - Rails 路由——下一步该去哪里？

> ID：16003984
> 
> 赞同：0
> 
> 时间：2013-04-14T20:28:44.387
> 
> 标签：ruby-on-rails, ruby, routing

我有一个 html 文件如下，位于`views/admin/ve_files/new.html.erb`

```
<div class="page-header">
    <h3>Hi</h3>
</div>
<%= simple_form_for @ve_file do |f| %>
<%= f.file_field :file %>
<br><br>
<%= f.submit "Upload" %>
<% end %>
<br> 
```

然后我有一个控制器，`controllers/admin/ve_files_controller.rb`它看起来像这样

```
require 'CSV'

class Admin::VeFilesController < ApplicationController

    layout 'admin'

    def new
        authorize! :create, :ve_file
        @ve_file = VeFile.new
    end

    def create
        puts "hello"
        authorize! :create, :ve_file
        #puts params
        @ve_file = VeFile.new(params[:ve_file])
        puts "okay"
        if @ve_file.save                
            CSV.foreach(@ve_file.file.path) do |row|
                puts row[0]
            end

            redirect_to admin_ve_path, :notice => 'Hi'
        else
            render :new
        end
    end
end 
```

因此，当我单击 html 文件中的上传按钮时，程序会尝试将我路由到哪里？代码在哪里指定？我收到以下错误，终端没有输出：

```
Routing Error
uninitialized constant VeFilesController 
```

因为它应该是`Admin::VeFilesController`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:36:28.010

您正在使用一个名为 的命名空间`:admin`，因此需要在调用`simple_form_for`.

你可以这样做：

```
<%= simple_form_for [:admin, @ve_file] do |f| %> 
```

# javascript - 每个间隔在元素上附加一个点

> ID：16003986
> 
> 赞同：0
> 
> 时间：2013-04-14T20:28:53.120
> 
> 标签：javascript, jquery

我有一个简单的“处理”*点等待......点等待..点等待..*当用户提交表单时。

我认为这可以很容易地用类似的东西来完成

```
<h2>Processing</h2> 
```

和

```
$(document).ready(function(){

  setTimeout($('h2').append('.'), 500);

}); 
```

然而，它得到了第一个点，然后抛出一个错误：

```
Uncaught SyntaxError: Unexpected identifier 
```

我的逻辑在哪里失败了？什么是意外标识符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T20:32:44.430

你应该将一个函数传递给`setTimoeut`你传递一个 jQuery 对象的函数，看起来你想要的是`setInterval`函数。

```
var interval = setInterval(function(){
   $('h2').append('.');
}, 500); 
```

`clearInterval`然后你可以使用函数清除间隔。

```
clearInterval(interval); 
```

# opengl - 将 HEALPIx 转换为立方体贴图

> ID：16003988
> 
> 赞同：1
> 
> 时间：2013-04-14T20:29:06.230
> 
> 标签：opengl, image-processing, idl-programming-language

我正在寻找一种使用[HEALPix](http://healpix.jpl.nasa.gov)投影将拟合文件转换为立方体贴图的方法。我对转换普朗克数据版本中的文件特别感兴趣。

我在图片中的问题：

我有：

![治愈系](https://i.stack.imgur.com/Utshf.jpg)

我想：

![立方体贴图](https://i.stack.imgur.com/ViIpd.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:55:00.230

我找到了使用 CMBView 中的函数的解决方法：[http ://code.google.com/p/cmbview/source/browse/src/Classes/CMBdata.m](http://code.google.com/p/cmbview/source/browse/src/Classes/CMBdata.m)

结果： [https ://github.com/hannorein/planck_cmb_cubemaps](https://github.com/hannorein/planck_cmb_cubemaps)

# javascript - Jade - 访问传递给它的变量

> ID：16003997
> 
> 赞同：0
> 
> 时间：2013-04-14T20:29:47.277
> 
> 标签：javascript, node.js, mongoose, pug

因此，`session`当他们登录我的 Node.js 应用程序时，我存储了一个用户。我有管理员和默认用户，如果我`#{session.user.role}`在 Jade 模板中输出，我会得到`default`或`admin`出现。在我的页面上进行测试时，`-if(session.user)`如果没有人登录，我可以隐藏页面上的项目，用于隐藏项目，但是如何为非管理员用户隐藏项目？

我试过把，`-if(session.user.role === 'default')`但我得到一个错误说`Cannot read property 'role' of undefined`。所以这行不通，关于如何做到这一点的任何想法？

这是使用 Mongoose 的用户模式：

```
var User = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'username' : { type : String, 
              validate : [validatePresenceOf, 'a Username is required'],
              set : toLower,
              index : { unique : true }
              },
  'password' : String,
  'role' : String,
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:35:47.633

```
- if (typeof session.user != 'undefined' && session.user.role === 'default') 
```

# javascript - Yeoman 生成器，grunt：正确使用 grunt-usemin 和 grunt-rev

> ID：16003999
> 
> 赞同：3
> 
> 时间：2013-04-14T20:29:57.297
> 
> 标签：javascript, gruntjs, yeoman, grunt-usemin

我有一个问题`grunt-usemin`和`grunt-rev`。

首先是设置问题环境的简单工作流程：

1.  使用生成器创建 Web 应用程序`yo webapp`（与生成器角度相同）。
2.  咕噜咕噜地跑。
3.  Grunt 成功完成构建。

好的，此时让我们导航到“dist/scripts”。`main.js`这里是（例如）文件的修订版本（`01d39df5.main.js`由于使用了 grunt-rev，这是正确的）。与`main.css`文件相同 - 在 'dist/styles' 目录中仅找到修订版本。

但问题是`index.html`包含对未修订文件的引用`main.js`和`main.css`. 据我了解，`grunt-usemin`作品或配置错误。

有人可以指点我的正确用法`grunt-rev`in addition with`grunt-usemin`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:54:06.107

Windows grunt.file.expand 模式搜索错误[已](https://github.com/yeoman/grunt-usemin/pull/82)在 grunt-usemin v0.1.11 中修复。我刚刚在 Windows 上进行了测试，`yo webapp`现在包含对 css 和 js 文件的修订名称的引用。`grunt --force``dist\index.html`