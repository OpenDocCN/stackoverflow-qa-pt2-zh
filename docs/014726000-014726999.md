# StackOverflow 问答 14726000-14726999

# r - 如何在嵌套的 for 循环中使用多个目录：

> ID：14726000
> 
> 赞同：1
> 
> 时间：2013-02-06T09:50:57.593
> 
> 标签：r, for-loop, directory, nested-loops

似乎我对嵌套 for 循环的理解不够好。我正在尝试在嵌套的 for 循环中使用多个目录，如下所示：

```
 sp_folder1<-list.files("species1/",full.names=TRUE)
    sp_folder2<-list.files("species2/",full.names=TRUE)
setwd(sp_folder1)
    for(i in 1: length(sp_folder1)){
      for(j in 1: length(sp_folder2){
         sp_i<-read.delim(list.files(sp_folder1)[i],header=T)
    sp_j<-read.delim(list.files(sp_folder2)[j],header=T)
    Do something with both files
         }
      } 
```

但是，我收到一个错误：文件错误（文件，'rt'）：无法打开连接没有这样的文件或目录：虽然，'sp_folder1'的第一个文件很好。我也尝试不设置工作目录，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:16:17.560

最简单的方法是在循环之前读取文件。我假设您有两个保存文件的子目录。

（代码未测试）

```
#create vectors of filenames
#I assume that this works for you
sp_folder1<-list.files("species1/",full.names=TRUE)
sp_folder2<-list.files("species2/",full.names=TRUE)

#set working directory
setwd('.../species1')
#loop over filenames, read all files and put the data.frames in a list
dat.list.1 <- lapply(sp_folder1,read.delim,header=TRUE)
setwd('.../species2')
dat.list.2 <- lapply(sp_folder2,read.delim,header=TRUE) 
```

现在您有两个 data.frames 列表，您可以在循环中使用例如`dat.list.1[[i]]`.

# android - Get drawable displayed size after scaling

> ID：14726004
> 
> 赞同：1
> 
> 时间：2013-02-06T09:51:11.250
> 
> 标签：android, size, imageview, drawable

here's my problem:
How can get the displayed size of the drawable inside an ImageView in pixel after scalling, assuming that the ImageView size isn't equal to the scaled drawable?

A lot of methods just return the original size of the Drawable or just the size of the ImageView.

Here is a picture describing what I want :

[http://image.noelshack.com/fichiers/2013/06/1360144144-sans-titre.png](http://image.noelshack.com/fichiers/2013/06/1360144144-sans-titre.png)

1 --> ImageView Size
2 --> The scaled image size that I want to get in px

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-16T10:58:17.280

从您发布的图像中，我假设您的 ImageView 上有 FIT_CENTER 的 scaleType（或 CENTER_INSIDE，可绘制比 imageView 大）

所以你可以像这样计算显示的大小

```
 boolean landscape = imageView.getWidth() > imageView.getHeight();

    float displayedHeight;
    float displayedWidth;

    if (landscape){
        displayedHeight = imageView.getHeight();
        displayedWidth = (float) drawableWidth * imageView.getHeight() / drawableHeight;
    } else {
        displayedHeight = (float) drawableHeight * imageView.getWidth() / drawableWidth;
        displayedWidth = imageView.getWidth();
    } 
```

注意：为了便于阅读，代码没有简化。

可以应用于所有 scaleTypes 的另一种更强大的方法是使用 imageView 用来缩放图像的矩阵

```
float[] f = new float[9];
imageView.getImageMatrix().getValues(f);
float displayedWidth = drawableWidth * f[Matrix.MSCALE_X];
float displayedHeight = drawableHeight * f[Matrix.MSCALE_Y]; 
```

# c# - 从文件设置数据库连接的替代方法

> ID：14726010
> 
> 赞同：0
> 
> 时间：2013-02-06T09:51:46.127
> 
> 标签：c#, web-services, connection-string

我有一个 Web 服务，它调用 2 种不同的 Web 方法。

其中一种方法使用`SQL`服务器连接，另一种方法使用`DB2`.

ODBC 连接可以与 DB2 数据库和 SQL 服务器通信，但是对于每种方法，SQL 的设计必须略有不同，因此可以选择切换连接。

现在我有一个解决方案，它从存储在服务器上的文本文件中读取字符串值。

因此，如果字符串是 SQL，它使用 SQL 连接字符串，而 ODBC 使用 ODBC 连接字符串。

是否有更有效的方法来执行此操作，而不必在每次调用 Web 方法时都读取文件，因为我担心在实时环境中会发送大量数据。所以我关心的是使用这种方法的速度和性能。

我如何实现这个的例子 -

```
String DBconSQL = "SQL-connection-string";
String DBconODBC = "ODBC-connection-string";       
string connection = System.IO.File.ReadAllText(@"filePath");

    [WebMethod]
    public string stringRETURN(string connection)
    {
        if(connection == "SQL")
        {
        string con = "DBconSQL";
        string sql = "SQL"

        }
        if(connection == "ODBC")
        {
            con = DBconODBC;
            sql = "ODBC SQL";

        }

              //Do stuff here
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:04:35.257

为什么不在第一个文件读取后将每个值存储在内存中，或者将它们存储在代码中。

IE

```
static class Globals
{
    public static string DB2ConnStr = String.Empty;
    public static string MSSQLStr = String.Empty;
} 
```

您可以从任何地方读取和写入它们，只要服务器启动它们就会一直存在（即应用程序在应用程序域中运行）

您还应该（希望）意识到在代码或文本文档中存储纯文本凭据的安全问题，并且（如果这是用于生产）提供某种形式的加密/安全性/减少正在使用的帐户的用户权限访问数据库；）

# php - file_get_contents() with images from a url and save them in zip

> ID：14726011
> 
> 赞同：1
> 
> 时间：2013-02-06T09:51:49.463
> 
> 标签：php, zip, file-get-contents

How can I cause file_get_contents() to get images from url and output them as a zip file. e.g

```
http://example.com/image1.jpg
http://example.com/image1.jpg
http://example.com/image1.jpg 
```

When retrieve with file_get_contents it'll store in a string, Now how can I convert this string into .zip.

it is to be cleared here that Images urls are being extracted from encoded json.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:05:18.443

你可以试试

```
copy('http://example.com/image1.jpg', '_tmp/image1.jpg')
copy('http://example.com/image2.jpg', '_tmp/image2.jpg')
...
zip( _tmp );
delete( _tmp ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:45:51.537

尝试这个

```
<?php

$files = array(
        'http://flask.pocoo.org/static/logo/flask.png',
        'http://flask.pocoo.org/static/logo/flask.pdf');

function create_zip(array $files, $destination='img.zip'){
    $zip = new ZipArchive();    
    $zip->open($destination, ZIPARCHIVE::CREATE);
    foreach($files as $file){
        print $file;
        if(copy($file, basename($file))){   
            print 'Successfully Copied ';
            if(file_exists(basename($file))){
                $zip->addFile(basename($file));
            }
        }else{
            print 'Failed to copy !!!';
        }
    }   
    $zip->close();
}

create_zip($files, 'testing.zip'); 
```

# c# - change color of a specific cell in a htmlTable

> ID：14726012
> 
> 赞同：0
> 
> 时间：2013-02-06T09:51:51.237
> 
> 标签：c#, asp.net, html-table

I have a htmltable. Each of the cell of the table is identified by an ID, for example 0001 and so on. The table has not a fixed dimension, but dynamic, so there can be 20 or more cells depending on how much values are stored in the db. I would like to change the backgorund color of the textbox of a specific cell. But don't know how to access the cell.

I know this syntax:

```
// the whole background becomes green 
myTable.BgColor = "#008000"; 
// I see no changes
myTable.Rows[x].Column[y].BgColor = "#008000";

// I need a syntax like this
myTable.Cell(Id_cell).BgColor =  "#008000"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:12:37.690

尝试这个：

.aspx：

```
<asp:Table ID="table" runat="server" /> 
```

C#代码：

```
TableRow row = new TableRow();
TableCell cell = new TableCell();
cell.Text = "Testing";
cell.BackColor = System.Drawing.Color.Red;
row.Cells.Add(cell);
table.Rows.Add(row);

table.Rows[0].Cells[0].BackColor = System.Drawing.Color.Pink; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:17:19.623

您可以像这样设置单个单元格的背景颜色：

```
myTable.Rows[0].Cells[1].BgColor = "#553322"; 
```

其中 0 是您想要的行号，在这种情况下，第一行和 1 是您想要的单元格编号，在这种情况下，第二个单元格作为索引基于 0。这必须在呈现表格之前完成，例如在页面加载时.

您可以将其概括为一种为 id 设置单元格颜色的方法，如下所示：

```
private void SetColorByCellId(HtmlTable table, string id, string color)
{
    for (int i = 0; i < table.Rows.Count; i++)
    {
        for (int j = 0; j < table.Rows[i].Cells.Count; j++)
        {
            if (table.Rows[i].Cells[j].ID == id)
            {
                table.Rows[i].Cells[j].BgColor = color;
            }
        }
    }
} 
```

然后你会这样称呼它：

```
SetColorByCellId(myTable, "0001", "#553322"); 
```

# django - AttributeError：“用户”对象在 Django 中没有属性“check_password”错误？

> ID：14726028
> 
> 赞同：3
> 
> 时间：2013-02-06T09:52:50.513
> 
> 标签：django, django-authentication

我有一个自定义模型，我正在尝试对其进行身份验证：

```
class User(models.Model):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    #last_login = models.DateTimeField()

    objects = UserManager()
    USERNAME_FIELD = 'username'
    #check_password(password)
    class Meta:
        db_table = u'galaxy_user' 
```

我在“设置”中提到了这一点。

AUTH_USER_MODEL = 'fileupload.user'

```
 #views.py
        def login_backend(request):
            if request.method == 'POST':
                username = request.POST['username']
                password = request.POST['password']
                user = authenticate(username=username, password=password)
                if user is not None:
                    login(request, user)
                    return HttpResponseRedirect('/overview/')
                else:
                    return HttpResponseRedirect('/login_backend/')
            else:
                return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

但是我收到此错误：

```
AttributeError: 'User' object has no attribute 'check_password' error 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:39:59.170

如[自定义用户文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#specifying-a-custom-user-model)中所述，您的 User 模型必须继承自`django.contrib.auth.models.AbstractBaseUser`，这会添加所有相关方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:37:05.110

在[Django 1.5 的文档中](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#django.contrib.auth.models.AbstractBaseUser)（这是第一个带有 AUTH_USER_MODEL 的文档）显示了替代用户模型必须具有的方法，其中之一是 check_password。所以，IMO，你有两种方法可以解决你的问题。

1.  正确替换 User 模型，提供所有必需的方法。
2.  忘记替换用户模型，[只需编写自定义 AUTH BACKEND](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#writing-an-authentication-backend)而不包括“AUTH_USER_MODEL”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:50:51.473

获取[Django 1.5 RC](https://www.djangoproject.com/download/)。并按照[这些说明](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#specifying-a-custom-user-model)编写自定义用户类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T20:49:49.903

在 get_user_model 之后添加 from django.contrib.auth.hasers import check_password

# javascript - 区分由鼠标单击和 Tab 键触发的 onFocus

> ID：14726031
> 
> 赞同：0
> 
> 时间：2013-02-06T09:52:55.463
> 
> 标签：javascript, html

如何区分由`Tab`-press 和鼠标点击引起的 onFocus 事件？我的目标是在选项卡上选择字段中的所有文本，但在单击时不选择。

# java - Eclipse代码完成自动停用

> ID：14726036
> 
> 赞同：0
> 
> 时间：2013-02-06T09:53:17.270
> 
> 标签：java, eclipse, code-completion

每当我运行 Eclipse 时，它​​会突然无缘无故地停用一些完成标记（但不是全部）。当我编写一些代码时，这种情况总是发生。在 Eclipse 启动时，一切正常，但过一段时间出现此问题。每次我通过重置首选项并重新启动 Eclipse 来解决这个问题。但这需要太多时间，让我很烦。是否有一个特殊的热键来（取消）激活某些完成标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:10:51.960

我敢打赌插件故障。尝试在没有任何自定义插件的情况下从头开始重新安装 Eclipse，并仅添加您需要的内容，然后一一添加，直到遇到此问题。

或者，打开 Eclipse->preferences->install/update->unintsall 或更新（链接）->configuration->查看错误日志，看看是否在任何插件上出现异常，如果发现有问题，请卸载该插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T08:42:21.483

在我的例子中，名为 Type Filters 的 Eclipse Preferences（在 Java | Appearance 下）似乎导致了这种体验。我们排除了所有常见的根包名称（com. *、org.*、sun. *），但也排除了 java.util.* 和 javax.*. 在取消激活“过滤器列表”中的这些条目后，Eclipse 的 Ctrl-Space 再次提供错过的建议。

# android - 在 Android 上加载和执行二进制文件

> ID：14726040
> 
> 赞同：0
> 
> 时间：2013-02-06T09:53:33.490
> 
> 标签：android, execute

有没有办法在 android 应用程序中执行二进制文件。没有 JNI 包装器方法。

请给我示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:08:14.307

尝试这个

```
public void pump(InputStream in, OutputStream out, int size) {
byte[] buffer = new byte[4096]; // Or whatever constant you feel like using
int done = 0;
while (done < size) {
    int read = in.read(buffer);
    if (read == -1) {
        throw new IOException("Something went horribly wrong");
    }
    out.write(buffer, 0, read);
    done += read;
}
// Maybe put cleanup code in here if you like, e.g. in.close, out.flush, out.close
     } 
```

从此链接[Read and writing binary file in Java (看到一半的文件被损坏)](https://stackoverflow.com/questions/4663224/reading-and-writing-binary-file-in-java-seeing-half-of-the-file-being-corrupted)

# resharper - Resharper - 折叠所有文档中的空标签

> ID：14726043
> 
> 赞同：3
> 
> 时间：2013-02-06T09:53:43.063
> 
> 标签：resharper

在 Resharper7.1 中有没有办法折叠所有空的 XAML 标记？

就像下面当我执行 Alt+Enter 以显示关于 .. 的建议时，我想对整个文档执行此操作。

也许是 CodeCleanup？

![在此处输入图像描述](../Images/7d7000cad14160ed5e27c98f6ea1fb90.png)

EDIT2：使用代码清理（完整）在间距方面对代码进行了很好的重新格式化。但是不会触及潜在的可折叠标签。也尝试了以下这些选项： ![在此处输入图像描述](../Images/e4474e170968e1e3dabde4986dc09545.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-15T12:34:32.910

从 ReSharper 8 开始，下面有一个`Collapse empty tags`选项
`Code Editing → Code Cleanup → XAML`：

[![代码清理](../Images/f223f9d7667f33c7bbf20f2b0d19e774.png)](https://i.stack.imgur.com/6iicW.png)

在清理配置文件上配置后，使用它调用代码清理。

# linux - su命令查询

> ID：14726045
> 
> 赞同：1
> 
> 时间：2013-02-06T09:53:49.387
> 
> 标签：linux, command

在命令行切换用户时，有人可以解释 su -p (--preserve-environment) 和 su - 之间的区别吗？

我对“su -”很熟悉，但我不清楚 su -p 有什么不同，如果有的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:06:46.943

不同之处在于，`su -p`您可以保留对原始用户所做的所有个性化设置。例如，您保留您的别名、您的 bashrc、配置文件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:04:37.840

正如您在[`su`](http://unixhelp.ed.ac.uk/CGI/man-cgi?su)手册页中看到的那样，它说“不要重置环境变量”。

Unix shell 允许您将值存储在变量中。它甚至自己使用它（即 PATH 变量保存可执行文件的位置）。如果您使用 -p ，则保留您的环境变量，而不是从新用户那里获取环境变量。（但是，它们可能仍会被用户拥有的任何 shell 启动脚本覆盖......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:09:36.570

简单来说：

```
- using "su" you get SuperUser's rights **and** environment 
- using "su -p" you get only SuperUser's rights (the environment stays your own) 
```

# everyplay - 退出 Everyplay 界面会导致分辨率或相机矩阵发生变化

> ID：14726046
> 
> 赞同：0
> 
> 时间：2013-02-06T09:53:55.857
> 
> 标签：everyplay

当我退出everyplay界面时，有时它会导致我的整个统一渲染窗口向左移动大约25%。

似乎只在第二次关闭everyplay界面时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:27:29.473

最新的 1.0.8 SDK 引入了 Unity 插件原生代码级别的更改，您可以尝试注释掉吗

```
/* Force orientation check, orientation could have changed while Unity was paused */
UIInterfaceOrientation orientIOS = UnityGetGLViewController().interfaceOrientation;
ScreenOrientation orientation = ConvertToUnityScreenOrientation(orientIOS, 0);
UnitySetScreenOrientation(orientation); 
```

从您的项目 Assets/Plugins/iOS/EveryplayUnity.mm 中，看看没有它是否能更好地工作？

# node.js - NodeJS 中的 pkgcloud 中的“支持流和管道”是什么意思

> ID：14726052
> 
> 赞同：1
> 
> 时间：2013-02-06T09:54:13.453
> 
> 标签：node.js, amazon-s3, pkgcloud

我的问题是让图像上传到亚马逊工作。我正在寻找一种不将文件保存在服务器上**然后**将其上传到亚马逊的解决方案。

谷歌搜索我找到了[pkgcloud](https://github.com/nodejitsu/pkgcloud#storage)并且在 README.md 上它说：

> 已经特别注意了方法是流和管道能力的。

有人可以解释这意味着什么，如果它是我要找的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:05:12.127

是的，这意味着你找到了正确的`s3`图书馆。

这意味着这个库公开了“流”。这是定义流的 API：[http ://nodejs.org/api/stream.html](http://nodejs.org/api/stream.html)

使用节点的流接口，您可以将任何可读流（在本例中为 POST 的主体）通过管道传输到任何可写流（在本例中为 S3 上传）。

以下是如何将文件上传直接通过管道传输到另一种支持流的库的示例：[如何在 Express.js 中处理 POSTed 文件而不进行磁盘写入](https://stackoverflow.com/questions/11832884/how-to-handle-posted-files-in-express-js-without-doing-a-disk-write)

编辑：这是一个例子

```
var pkgcloud = require('pkgcloud'),
      fs = require('fs');

var s3client = pkgcloud.storage.createClient({ /* ... */ });

app.post('/upload', function(req, res) {
  var s3upload = s3client.upload({
    container: 'a-container',
    remote: 'remote-file-name.txt'
  })

  // pipe the image data directly to S3
  req.pipe(s3upload);      
}); 
```

编辑：完成回答聊天中出现的问题：

`req.end()``s3upload.end()`由于流魔术，会自动调用。如果 OP 想在 req 结束时做任何其他事情，他可以很容易地做到：`req.on('end', res.send("done!"))`

# android - Android google play 应用，允许访问统计信息

> ID：14726053
> 
> 赞同：0
> 
> 时间：2013-02-06T09:54:14.090
> 
> 标签：android, statistics, google-play

有什么方法可以让第三个人访问我的 google play 开发者帐户中特定应用的统计信息？

我有各种应用程序，其中一个是为客户开发的，他要求访问下载和休息统计信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T02:53:36.097

就我而言，除了向他提供您的帐户信息外，现在还有办法只向第三个人提供访问统计信息。对于我个人的使用，我开发了一个小部件来跟踪我的应用程序的一些统计数据，最终我将它发布到市场上。所以我认为它也会对您有所帮助[Applications Tracker Widget](https://play.google.com/store/apps/details?id=com.realex.howismyapp)是一款可以帮助您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:24:58.210

目前，Google Play 不提供单独访问特定应用程序的机制，尽管您可以授予对整个开发者控制台的访问权限。您唯一可以限制的是财务信息。我希望这不是你想要的。

在您的情况下，如果可以接受，您可以提供屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:07:17.857

我最终使用谷歌 api 来检索统计数据并创建我的网络前端以将它们展示给我的客户。

您可以在[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)找到后端的 php 版本。

这篇文章也值得称赞：[是否有 API 可以在 Google Play 开发者控制台上获取静态信息？](https://stackoverflow.com/questions/11362412/is-there-an-api-to-get-statictics-on-google-play-developer-console)

# struts2 - 单个 Web 应用程序中的 Struts2 和 Jersey 产生 http 500 错误

> ID：14726056
> 
> 赞同：0
> 
> 时间：2013-02-06T09:54:26.767
> 
> 标签：struts2, jersey

它显示带有碧玉错误的 http 500，在启动应用程序时，我在同一个项目中使用 jersey 和 struts2。需要任何特定的配置。尽管包含所有 jar 文件，但它显示错误。

Web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
       <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>RestExample</display-name>
    <welcome-file-list>
        <welcome-file>/jsp/login.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.src.matchmaker.services</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>*.action</url-pattern>
    </filter-mapping>
</web-app> 
```

struts.xml

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
<constant name="struts.action.excludePattern" value="/rest/.*" />

    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">

    </package>
</struts> 
```

登录.jsp

```
 <%-- 
    Document   : register
    Created on : Jan 31, 2013, 11:18:43 AM
    Author     : wifin
![enter image description here][1]--%>

<%@page language="java" contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>

<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="<%=request.getContextPath()%>/css/match_login_style.css" type="text/css">
        <link rel="icon" type="image/jpg" href="<%=request.getContextPath()%>/images/logo.jpg"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Login</title>
        <script type="text/javascript" src="<%=request.getContextPath()%>/js/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="<%=request.getContextPath()%>/js/jquery.validation.js"></script>
        <script type="text/javascript" src="<%=request.getContextPath()%>/js/login_validation.js"></script>
    </head>

    <body>

        <div class="wrap">
            <div class="back" align="center">
                <form id="login" name="login" action="login.action" method="post">
                    <div align="center" class="header">Login</div>
                    <div id="err"><s:actionerror/></div>
                    <div class="tit">
                        Email Id: <input type="text" name="emailId" id="emailId"/>
                        <div class="clr"></div>
                    </div>
                    <div class="tit">
                        Password: <input type="password" name="password" id="password"/>
                        <div class="clr"></div>
                    </div>
                    <div> 
                        <input class="btn" type="submit" name="reg" value="Login" id="reg" />
                        <input class="btn" type="reset" value="Cancel" id="cancel" />
                    </div>
                </form>
                <div><a class="link" href="<%=request.getContextPath()%>/jsp/register.jsp">New User?</a></div>
            </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:10:34.363

您的页面正在显示而无需通过 Struts2 过滤器。您需要调用 Struts2 操作，结果将显示您的页面。

自 Struts 2.1.3 以来也`org.apache.struts2.dispatcher.FilterDispatcher`已弃用，因此如果您使用的版本高于 2.1.3，请将 FilterDispatcher 更改为`org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter`.

另外，为什么不使用此过滤器拦截所有 url 模式？将此过滤器更改`<url-pattern>`为`<url-pattern>/*</url-pattern>`.

顺便说一句，在 JSP 中使用 scriptlet 是一种不好的做法，请改用 Struts2 标记。

# php - 处理 PHP 并打印到字符串

> ID：14726060
> 
> 赞同：0
> 
> 时间：2013-02-06T09:54:38.263
> 
> 标签：php, html

我有一个 PHP 页面 (content.php)，其中包含由 PHP 变量传递的纯 HTML 和内容

```
<html>
     <head>
     </head>
     <body>
          <h1><?php echo $title; ?></h1>
     </body>
</html> 
```

然后是另一个 PHP 页面，我需要在字符串中包含 content.php 的内容，但已经由 PHP 解析器处理。我已经尝试了 file_get_contents() 函数，但这给出了原始输出（未处理 PHP）。我正在寻找的是：

`$var contents = somefunction('contents.php')`内容：

```
<html>
     <head>
     </head>
     <body>
          <h1>Title</h1>
     </body>
</html> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:56:27.590

尝试：

```
ob_start();
include ('contents.php');
$html = ob_get_clean();
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:56:52.117

你试过[`include`](http://php.net/include)吗？或者，如果您需要从“外部”获取它（例如在浏览器中加载它），请使用`file_get_contents`完整的`http://example.com/filename.php`URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:05:34.780

要么我在这里严重遗漏了一些东西，要么在您的第二页中不使用函数，为什么不直接将内容分配给这样的字符串：

```
$my_String = "<html>
     <head>
     </head>
     <body>
          <h1>". $title ."</h1>
     </body>
</html>"; 
```

# vbscript - VDProj 安装项目在提交时添加自定义操作脚本

> ID：14726061
> 
> 赞同：0
> 
> 时间：2013-02-06T09:54:39.963
> 
> 标签：vbscript, windows-installer

我收到了一个安装项目（.VDProject / Deployment 项目），它需要一个 dll 并提取到某个位置。
我的目标是在将文件复制到正确的位置后，在安装/卸载结束时重新启动某个 Windows 服务。

这样做的正确方法是什么？通过 VBS 在“自定义操作”的“提交”和“卸载”部分？

此脚本不起作用：

```
Set oshell = createobject("Wscript.Shell")
oshell.run"cmd.exe"
wscript.sleep 500
oshell.sendkeys "net stop ""MyService"""+("{Enter}")
wscript.sleep 5000
oshell.sendkeys "net start ""MyService"""+("{Enter}")
wscript.sleep 5000
oshell.sendkeys "exit"+("{Enter}")

set oshell = nothing

WScript.Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:52:26.403

您与 VDPROJ 的婚姻如何？它在 VS2012 中被微软杀死，因为坦率地说它很糟糕。

停止和启动服务的正确方法是使用 ServiceControl 表。可悲的是，VDPROJ 没有公开这张表（让我数一数它的糟糕之处）。

VBScript/JScript 自定义动作是出了名的脆弱。他们也脱离了流程并重新发明了轮子（ServiceControl）。

如果为安装或策略禁用回滚，则不会运行提交自定义操作。

延迟自定义操作是您需要的地方，但是是的，您猜对了，VDPROJ 没有给您那种控制。

一种技术是创建一个 WiX 合并模块来封装 ServiceControl 元素并将其合并到您的 VDPROJ 中。这是我[在博客中介绍](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows.html)的一种技术。在示例中，您将使用 ServiceControl 元素而不是 ServiceInstall 元素。

也可以使用 ORCA 创建一个包含您的 ServiceControl 表的静态转换，并将其作为构建后事件的一部分应用于 VDPROJ 构建的 MSI。

无论如何，就像我说的……你和 VDPROJ 的婚姻如何？这些都是绕过该工具可怕性的技巧。改为完全使用 WiX 可能更有意义。

# android - 如何在 Android 中使用闹钟管理器进行生日提醒？从 SQLite 数据库中读取日期

> ID：14726065
> 
> 赞同：4
> 
> 时间：2013-02-06T09:54:44.947
> 
> 标签：android, alarm

用什么设置每年重复的闹钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:14:30.900

嘿，这是如何将 android AlarmManager 上的警报设置为特定日期（android alarmmanager 设置警报日期）我一直在寻找这个。注意月值！！

```
Calendar cal = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
//cal.add(Calendar.SECOND, 10);

cal.set(Calendar.DATE,19);  //1-31
cal.set(Calendar.MONTH,Calendar.DECEMBER);  //first month is 0!!! January is zero!!!
cal.set(Calendar.YEAR,2012);//year...

cal.set(Calendar.HOUR_OF_DAY, 16);  //HOUR
cal.set(Calendar.MINUTE, 39);       //MIN
cal.set(Calendar.SECOND, 10);       //SEC

// Create a new PendingIntent and add it to the AlarmManager
Intent intent = new Intent(MainActivity.this, alarmAct.class);
PendingIntent pendingIntent = PendingIntent.getService(MainActivity.this, 0,intent, 0);

//or if you start an Activity
//PendingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this, 0,intent, 0);

AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:01:39.957

使用警报管理器的 setRepeating 方法和

添加您从 db 获取的确切日期的一年

```
Calendar today_plus_year = Calendar.getInstance();  
today_plus_year.add( Calendar.YEAR, 1 ); 
```

之后将其转换为毫秒并传递给警报管理器 setRepeat 方法

```
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:00:36.893

```
 Intent myIntent = new Intent(Main.this, MyAlarmService.class);
 pendingIntent = PendingIntent.getService(Main.this, 0, myIntent, 0);

    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

    Calendar cal = Calendar.getInstance();

    cal.setTimeInMillis(System.currentTimeMillis());
    cal.clear();
    cal.set(2012,5,20,18,40);

    alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:09:14.463

```
 if (cDate.equals(dbDate)) {
    Log.i("TODAY", "Dates Matched");
    Log.i("TIME MATCHED", "Currently in AM");
    cal.set(Calendar.HOUR_OF_DAY, hour);
    cal.set(Calendar.MINUTE, minutes);
    cal.set(Calendar.SECOND, 0);
    Intent intent = new Intent(this, AlarmReciever.class);
    PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), 0,intent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    // am.setRepeating(AlarmManager.RTC_WAKEUP,c.getTimeInMillis(),
        AlarmManager.INTERVAL_FIFTEEN_MINUTES, operation);

    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pi);
    } 
   else {

   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:10:45.140

这是我在项目中所做的

```
> package com.myco.android.birthdayreminder;
> 
> import java.text.SimpleDateFormat; import java.util.ArrayList; import
> java.util.Calendar; import java.util.Date; import java.util.List;
> 
> import android.app.ListActivity; import android.content.Context;
> import android.content.Intent; import android.os.Bundle; import
> android.view.View; import android.view.ViewGroup; import
> android.widget.AdapterView; import
> android.widget.AdapterView.OnItemClickListener; import
> android.widget.ArrayAdapter; import android.widget.ImageView; import
> android.widget.ListView;
> 
> public class BirthdayReminderActivity extends ListActivity {
> 
>   private List<BContact> contactsList;
>      /** Called when the activity is first created. */   @Override   public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
> 
>     // Schedule notification
>     CheckEventsService.schedule(this);
> 
>     // TODO change presentation
>     ContactsReader reader = new ContactsReader(this);
>     try {
>       // Update list
>       contactsList = reader.upcomingEvents();
>       setListAdapter(new IconicAdapter(this));
> 
>       ListView lv = getListView();
>       lv.setTextFilterEnabled(true);
> 
>       // Add it

em click handler
      lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
          showContactInfo(position);
        }
      });

    } catch (Exception e) {
      // TODO Error handling
      e.printStackTrace();
    }
  }

  /**
   * @param position
   */
  protected void showContactInfo(int position) {
    Intent intent = new Intent(this, ContactInfoActivity.class);
    BContact con = this.contactsList.get(position);
    intent.putExtra(ContactInfoActivity.DATA_KEY__CONTACT_ID, con.getLookup_Key());
    startActivity(intent);
  }

  private List<String> getContactNameArray() {
    ArrayList<String> strlist = new ArrayList<String>();
    for (BContact con : this.contactsList) {
      strlist.add(getDisplayMessage(con));
    }

    return strlist;
  }

  private String getDisplayMessage(BContact con) {
    String message;
    switch (con.getEventType()) {
      case BContact.BIRTHDAY_EVENT:
        // Check for valid age...
        if (con.getEvent_num_year_old() != -1) {
          message = con.getName() + " turns " + con.getEvent_num_year_old() + " " + getDayOfMonth(con);
        } else {
          message = con.getName() + "'s Birthday " + getDayOfMonth(con);
        }
        break;
      case BContact.ANNIVERSARY_EVENT:
        // Check for valid age...
        if (con.getEvent_num_year_old() != -1) {
          message = con.getName() + "'s " + getNumberText(con.getEvent_num_year_old()) + " Anniversary " + getDayOfMonth(con);
        } else {
          message = con.getName() + "'s Anniversary " + getDayOfMonth(con);
        }
        break;
      default:
        message = con.getName() + ", " + getDayOfMonth(con);
    }

    return message;
  }

  private String getNumberText(int number) {
    // Get unit digit
    int unit_digit = number % 10;

    // Add text
    if (unit_digit == 0 || unit_digit >= 4) {
      return Integer.toString(number) + "th";
    }
    if (unit_digit == 2) {
      return Integer.toString(number) + "nd";
    }
    if (unit_digit == 3) {
      return Integer.toString(number) + "rd";
    }

    // This will never hit
    return null;
  }

  public String getDayOfMonth(BContact con) {
    Calendar today = Calendar.getInstance();

    if (today.get(Calendar.DAY_OF_MONTH) == con.getEvent_date_day() 
      && today.get(Calendar.MONTH) == con.getEvent_date_month()) {
      return "today";
    }

    SimpleDateFormat dateFormatter = new SimpleDateFormat("MMM-d");

    // Check for invalid year
    int year = con.getEvent_date_year();
    if (year == 0) {
      // Need a valid year here...
      year = 1900;
    } 

    return "on " + dateFormatter.format(new Date(year, con.getEvent_date_month(), con.getEvent_date_day()));
  }

  private int getEventType(int position) {
    return this.contactsList.get(position).getEventType();
  }

  class IconicAdapter extends ArrayAdapter<String> {

    /**
     * @param context
     * @param textViewResourceId
     */
    public IconicAdapter(Context context) {
      super(context, R.layout.list_icon_text_item, R.id.label, getContactNameArray());
    }

    /* (non-Javadoc)
     * @see android.widget.ArrayAdapter#getView(int, android.view.View, android.view.ViewGroup)
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

      // Optimize using recycled rows - may not help since we need to regenerate display message
      View row = super.getView(position, convertView, parent);
      ImageView icon = (ImageView) row.findViewById(R.id.icon);

      // Select icon image
      switch (getEventType(position)) {
        case BContact.BIRTHDAY_EVENT:
          icon.setImageResource(R.drawable.ic_birthday);
          break;
        case BContact.ANNIVERSARY_EVENT:
          icon.setImageResource(R.drawable.ic_anniversary);
          break;
        default:
          // TODO change to generic event icon
          icon.setImageResource(R.drawable.icon);
      }

      return row;
    }
  }
} 
```

# asp.net-mvc - jqGrid：添加了一个额外的组用于分组

> ID：14726066
> 
> 赞同：0
> 
> 时间：2013-02-06T09:54:48.677
> 
> 标签：asp.net-mvc, jqgrid, lib.web.mvc

我想将分组添加到我的 jqGrid。我有一个简单的模型：

```
public class ViolationViewModel
{       
    [JqGridColumnFormatter(JqGridColumnPredefinedFormatters.Date, SourceFormat = "d.m.Y H:i:s", OutputFormat = "d.m.Y H:i")]
    public DateTime FixationTime { get; set; }       
    public string OrderNumber { get; set; }
    public string ViolationType { get; set; }
} 
```

这是视图中的代码：

```
@{
      var grid = new JqGridHelper<ViolationViewModel>("myGrid",
      dataType: JqGridDataTypes.Json,
      methodType: JqGridMethodTypes.Post,
      pager: true,
      sortingName: "ViolationType",
      sortingOrder: JqGridSortingOrders.Asc,
      url: Url.Action("Violation", "Cabinet"),
      viewRecords: true,
      rowsList: new List<int>() { 10, 20, 30, 50, 100 },
      loadOnce: true,
      multiSelect: true,
      autoWidth: true,
      groupingEnabled: true,
      groupingView: new JqGridGroupingView { ColumnShow = new[] { false }, Fields = new[] { "ViolationType" }, DataSorted = true},         
    ).FilterToolbar(new JqGridFilterToolbarOptions() { StringResult = true })
    .Navigator(new JqGridNavigatorOptions() { Add = false, Delete = false, Edit = false, View = false, Refresh = false, Search = false });

} 
```

我有 16 条记录，15 条记录相同`ViolationType`，1 条记录有其他值。

jqGrid 创建三个（必须是两个）组的问题，但是有两个组具有相同的标题。但是，当我单击任何列（更改排序）时，一切正常，我有两个组。

哪里有问题？

还有一个问题：在`rowList`选项中，我的第一个值为`10`. 但是当我的网格被加载时，默认值为`20`. 如何将其设置为第一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:41:39.663

您已设置`DataSorted`为`true`. 在这种情况下，来自初始请求的数据应该已经在服务器端正确排序（按“ViolationType”）并以正确的顺序返回。

对于您问题的第二部分，只需设置`rowsNumber`为`10`初始值：

```
@{
    var grid = new JqGridHelper<ViolationViewModel>("myGrid",
        dataType: JqGridDataTypes.Json,
        methodType: JqGridMethodTypes.Post,
        pager: true,
        sortingName: "ViolationType",
        sortingOrder: JqGridSortingOrders.Asc,
        url: Url.Action("Violation", "Cabinet"),
        viewRecords: true,
        rowsList: new List<int>() { 10, 20, 30, 50, 100 },
        rowsNumber: 10,
        loadOnce: true,
        multiSelect: true,
        autoWidth: true,
        groupingEnabled: true,
        groupingView: new JqGridGroupingView { ColumnShow = new[] { false }, Fields = new[] { "ViolationType" }, DataSorted = true},         
    )
    .FilterToolbar(new JqGridFilterToolbarOptions() { StringResult = true })
    .Navigator(new JqGridNavigatorOptions() { Add = false, Delete = false, Edit = false, View = false, Refresh = false, Search = false });
} 
```

# textarea - JavaFX / ScalaFX - 更改禁用 TextArea 的文本颜色？

> ID：14726070
> 
> 赞同：3
> 
> 时间：2013-02-06T09:55:10.760
> 
> 标签：textarea, javafx, scalafx

我有一个带有一些 TextArea 元素的 GUI 来显示信息。由于 GUI 将对 keyevents 做出反应，因此我在场景元素中添加了一个 EventHandler。因为我不想为每个文本区域添加一个 EventHandler，所以我禁用了它们以防止它们被聚焦，因为这样场景的事件处理程序就不再工作了。现在我遇到了问题，文本显示为灰色，而不是黑色，即使我在 css 文件中更改了它。你有什么想法为什么文字不是黑色的，我该如何解决？

这是一些代码：

```
private val scene =
  new Scene {
    stylesheets.add("css/style.css")
    onKeyTyped = (new EventHandler[KeyEvent] {
      def handle(event: KeyEvent) {
        ...
      }
    })
  ...
}

private val description = new TextArea{    
  text = "some text"
  wrapText = true
  disable = true 
  styleClass.add("txtarea")      
  maxHeight = 400
}

.txtarea:disabled{  
  -fx-font-size: 18pt;
  -fx-text-fill: #000000;
  -fx-prompt-text-fill: #000000;
  -fx-opacity: 1.0;
  -fx-background-color: white;  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T19:25:57.210

您还需要为嵌入在 TextArea 中的滚动窗格提供样式：

```
.txtarea .scroll-pane:disabled{
  -fx-opacity: 1.0;
} 
```

# ruby - 使用 Ruby 的 RSS 类来解析 Atom 和 RSS

> ID：14726072
> 
> 赞同：0
> 
> 时间：2013-02-06T09:55:14.260
> 
> 标签：ruby, rss, atom-feed

我想使用 Ruby 的[RSS 类](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/rss/rdoc/RSS.html)来解析 Atom 和 RSS 提要，所以我可以从中提取链接。如何区分代码中的两种类型？

我已经准备好了解析器响应。

```
response = RSS::Parser.parse(rss_url, false) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:55:14.260

我找到了`.feed_type`feed 对象的方法，并像这样使用它：

```
if response.feed_type == "rss"
  puts "hey rss"
  response.channel.items.each{ |item| links += "'#{item.link}'," }
elsif response.feed_type == "atom"
  puts "hey atom"
  response.entries.each{ |entry| links += "'#{entry.link.href}'," }
else
  puts "something went wrong"
end 
```

# c - 虚拟端口在 atmega MCU 中运行，可能吗？

> ID：14726077
> 
> 赞同：0
> 
> 时间：2013-02-06T09:55:24.863
> 
> 标签：c, atmega

因为我在我的设计中找不到整个端口，但我希望我的程序变得统一（当我更改引脚时，我只需要更改这个数组），所以我想通过在数组中定义它们来创建一个虚拟端口。操作时，我想将每个虚拟引脚设置为循环。这就像下面的那些宏代码（当然我可以为端口和引脚分别定义 2 个数组）。数组（引脚）的长度在编译之前是可变的（可能是 2/3/4 引脚），但这并不重要。

```
unsigned char bitorder[]={PORTC,6,PORTD,2};
    foreach i,j in (bitorder){
        asm SBI i,j
        // some delay or operation here
        asm CBI i,j
    } 
```

如果这可能？使用函数还是宏？还是指向指针操作的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:57:09.280

这是可能的，但只能通过获取端口地址，如以下代码所示：

```
#define PINS_COUNT  2
volatile uint8_t *  ports[PINS_COUNT] = {&PORTB, &PORTD};
uint8_t pins[PINS_COUNT] = {1, 2};
int i;
for (i=0; i<PINS_COUNT; i++) {
    *ports[i] |= pins[i];  //
    /* do something */
    *ports[i] &= ~pins[i];
} 
```

您可以将端口指针和引脚填充到同一个数组中，但请记住 ATmega 指针是 16 位宽的。我确信在汇编中也有这样做的方法，但是由于问题被标记为“C”，我假设您正在寻找 C 解决方案。

# r - 使用 grid.arrange 更改多图 ggplot2 中的标题

> ID：14726078
> 
> 赞同：56
> 
> 时间：2013-02-06T09:55:27.030
> 
> 标签：r, ggplot2, gridextra

我已经设法使用 grid.arrange 制作了一个 2x2 绘图：

```
library(gridExtra)
grid.arrange(p1,p3,p2,p4, ncol=2, nrow=2, top = "Daily QC: Blue") 
```

这个多情节的主标题非常小。有没有办法改变标题文字大小和字体。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-06T10:08:48.383

```
main=textGrob("Daily QC: Blue",gp=gpar(fontsize=20,font=3)) 
```

*使用gridExtra*的 v>=2.0.0 进行编辑，`main`已变为`top`（为了与`bottom`,`left`和保持一致`right`）。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2018-04-11T06:18:50.690

由于包`grid`和`gridExtra`的更改，当前答案已过时。库包`grid`也需要使用`textGrob`和`gpar`.

新代码应包括两个包：

```
library(grid)
library(gridExtra)
grid.arrange(p1,p3,p2,p4, ncol=2, nrow=2,
     top = textGrob("Daily QC: Blue",gp=gpar(fontsize=20,font=3))) 
```

# java - spring mvc rest服务重定向/转发/代理

> ID：14726082
> 
> 赞同：72
> 
> 时间：2013-02-06T09:55:35.837
> 
> 标签：java, spring-mvc, spring-boot, resttemplate

我已经使用 spring mvc 框架构建了一个 Web 应用程序来发布 REST 服务。例如：

```
@Controller
@RequestMapping("/movie")
public class MovieController {

@RequestMapping(value = "/{id}", method = RequestMethod.GET)
public @ResponseBody Movie getMovie(@PathVariable String id, @RequestBody user) {

    return dataProvider.getMovieById(user,id);

} 
```

现在我需要部署我的应用程序，但我有以下问题： 客户端无法直接访问应用程序所在的计算机（有防火墙）。因此，我需要在调用实际休息服务的代理机器（可由客户端访问）上的重定向层。

我尝试使用 RestTemplate 拨打新电话：例如：

```
@Controller
@RequestMapping("/movieProxy")
public class MovieProxyController {

    private String address= "http://xxx.xxx.xxx.xxx:xx/MyApp";

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public @ResponseBody Movie getMovie(@PathVariable String id,@RequestBody user,final HttpServletResponse response,final HttpServletRequest request) {

        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        RestTemplate restTemplate = new RestTemplate();
        return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), new HttpEntity<T>(user, headers), Movie.class);

} 
```

这没关系，但我需要重写控制器中的每个方法以使用 resttemplate。此外，这会导致代理机器上的冗余序列化/反序列化。

我尝试使用 restemplate 编写一个通用函数，但没有成功：

```
@Controller
@RequestMapping("/movieProxy")
public class MovieProxyController {

    private String address= "http://xxx.xxx.xxx.xxx:xx/MyApp";

    @RequestMapping(value = "/**")
    public ? redirect(final HttpServletResponse response,final HttpServletRequest request) {        
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        RestTemplate restTemplate = new RestTemplate();
        return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), ? , ?);

} 
```

我找不到适用于请求和响应对象的 resttemplate 方法。

我还尝试了弹簧重定向和转发。但是重定向不会更改请求的客户端 IP 地址，所以我认为在这种情况下它是无用的。我也无法转发到另一个 URL。

有没有更合适的方法来实现这一目标？提前致谢。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-05-19T11:25:26.360

您可以使用以下方式镜像/代理所有请求：

```
private String server = "localhost";
private int port = 8080;

@RequestMapping("/**")
@ResponseBody
public String mirrorRest(@RequestBody String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException
{
    URI uri = new URI("http", null, server, port, request.getRequestURI(), request.getQueryString(), null);

    ResponseEntity<String> responseEntity =
        restTemplate.exchange(uri, method, new HttpEntity<String>(body), String.class);

    return responseEntity.getBody();
} 
```

这不会反映任何标题。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-03-22T13:13:29.723

这是我对原始答案的修改版本，有四点不同：

1.  它不会强制请求正文，因此不会让 GET 请求失败。
2.  它复制原始请求中存在的所有标头。如果您使用另一个代理/Web 服务器，这可能会由于内容长度/gzip 压缩而导致问题。将标题限制为您真正需要的标题。
3.  它不会*重新*编码查询参数或路径。我们希望它们无论如何都会被编码。请注意，您的 URL 的其他部分也可能被编码。如果您遇到这种情况，请充分利用`UriComponentsBuilder`.
4.  它确实从服务器正确返回错误代码。

```
@RequestMapping("/**")
public ResponseEntity mirrorRest(@RequestBody(required = false) String body, 
    HttpMethod method, HttpServletRequest request, HttpServletResponse response) 
    throws URISyntaxException {
    String requestUrl = request.getRequestURI();

    URI uri = new URI("http", null, server, port, null, null, null);
    uri = UriComponentsBuilder.fromUri(uri)
                              .path(requestUrl)
                              .query(request.getQueryString())
                              .build(true).toUri();

    HttpHeaders headers = new HttpHeaders();
    Enumeration<String> headerNames = request.getHeaderNames();
    while (headerNames.hasMoreElements()) {
        String headerName = headerNames.nextElement();
        headers.set(headerName, request.getHeader(headerName));
    }

    HttpEntity<String> httpEntity = new HttpEntity<>(body, headers);
    RestTemplate restTemplate = new RestTemplate();
    try {
        return restTemplate.exchange(uri, method, httpEntity, String.class);
    } catch(HttpStatusCodeException e) {
        return ResponseEntity.status(e.getRawStatusCode())
                             .headers(e.getResponseHeaders())
                             .body(e.getResponseBodyAsString());
    }
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-03-13T09:31:27.477

您可以使用 Netflix Zuul 将来自 Spring 应用程序的请求路由到另一个 Spring 应用程序。

假设您有两个应用程序：1.songs-app，2.api-gateway

在 api-gateway 应用中，首先添加 zuul 依赖，然后你可以在 application.yml 中简单地定义你的路由规则如下：

pom.xml

```
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-zuul</artifactId>
    <version>LATEST</version>
</dependency> 
```

应用程序.yml

```
server:
  port: 8080
zuul:
  routes:
    foos:
      path: /api/songs/**
      url: http://localhost:8081/songs/ 
```

最后运行 api-gateway 应用程序，如：

```
@EnableZuulProxy
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
} 
```

现在，网关会将所有`/api/songs/`请求路由到`http://localhost:8081/songs/`.

一个工作示例在这里：[https ://github.com/muatik/spring-playground/tree/master/spring-api-gateway](https://github.com/muatik/spring-playground/tree/master/spring-api-gateway)

另一个资源：[http ://www.baeldung.com/spring-rest-with-zuul-proxy](http://www.baeldung.com/spring-rest-with-zuul-proxy)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-22T07:22:44.943

带有 oauth2 的代理控制器

```
@RequestMapping("v9")
@RestController
@EnableConfigurationProperties
public class ProxyRestController {
    Logger logger = LoggerFactory.getLogger(this.getClass());

    @Autowired
    OAuth2ProtectedResourceDetails oAuth2ProtectedResourceDetails;

    @Autowired
    private ClientCredentialsResourceDetails clientCredentialsResourceDetails;

    @Autowired
    OAuth2RestTemplate oAuth2RestTemplate;

    @Value("${gateway.url:http://gateway/}")
    String gatewayUrl;

    @RequestMapping(value = "/proxy/**")
    public String proxy(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request, HttpServletResponse response,
                        @RequestHeader HttpHeaders headers) throws ServletException, IOException, URISyntaxException {

        body = body == null ? "" : body;
        String path = request.getRequestURI();
        String query = request.getQueryString();
        path = path.replaceAll(".*/v9/proxy", "");
        StringBuffer urlBuilder = new StringBuffer(gatewayUrl);
        if (path != null) {
            urlBuilder.append(path);
        }
        if (query != null) {
            urlBuilder.append('?');
            urlBuilder.append(query);
        }
        URI url = new URI(urlBuilder.toString());
        if (logger.isInfoEnabled()) {
            logger.info("url: {} ", url);
            logger.info("method: {} ", method);
            logger.info("body: {} ", body);
            logger.info("headers: {} ", headers);
        }
        ResponseEntity<String> responseEntity
                = oAuth2RestTemplate.exchange(url, method, new HttpEntity<String>(body, headers), String.class);
        return responseEntity.getBody();
    }

    @Bean
    @ConfigurationProperties("security.oauth2.client")
    @ConditionalOnMissingBean(ClientCredentialsResourceDetails.class)
    public ClientCredentialsResourceDetails clientCredentialsResourceDetails() {
        return new ClientCredentialsResourceDetails();
    }

    @Bean
    @ConditionalOnMissingBean
    public OAuth2RestTemplate oAuth2RestTemplate() {
        return new OAuth2RestTemplate(clientCredentialsResourceDetails);
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-13T15:32:41.063

@derkoe 发布了一个很好的答案，对我有很大帮助！

在 2021 年尝试这个，我能够稍微改进一下：

1.  如果您的课程是 @RestController，则不需要 @ResponseBody
2.  @RequestBody(required = false) 允许没有正文的请求（例如 GET）
3.  https 和端口 443 用于那些 ssl 加密端点（如果您的服务器在端口 443 上提供 https）
4.  如果您返回整个 responseEntity 而不仅仅是正文，您还将获得标头和响应代码。
5.  添加（可选）标题的示例，例如`headers.put("Authorization", Arrays.asList(String[] { "Bearer 234asdf234"})`
6.  异常处理（捕获并转发 404 之类的 HttpStatuse，而不是抛出 500 服务器错误）

* * *

```
private String server = "localhost";
private int port = 443;

@Autowired
MultiValueMap<String, String> headers;

@Autowired
RestTemplate restTemplate;

@RequestMapping("/**")
public ResponseEntity<String> mirrorRest(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException
{
    URI uri = new URI("https", null, server, port, request.getRequestURI(), request.getQueryString(), null);

    HttpEntity<String> entity = new HttpEntity<>(body, headers);    

    try {
        ResponseEntity<String> responseEntity =
            restTemplate.exchange(uri, method, entity, String.class);
            return responseEntity;
    } catch (HttpClientErrorException ex) {
        return ResponseEntity
            .status(ex.getStatusCode())
            .headers(ex.getResponseHeaders())
            .body(ex.getResponseBodyAsString());
    }

    return responseEntity;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-03T23:09:04.857

如果您可以使用像 mod_proxy 这样的较低级别的解决方案，那将是更简单的方法，但如果您需要更多控制（例如安全性、翻译、业务逻辑），您可能想看看 Apache Camel：[http ://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html](http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-27T13:26:01.003

我受到 Veluria 解决方案的启发，但我遇到了从目标资源发送的 gzip 压缩问题。

目标是省略`Accept-Encoding`标题：

```
@RequestMapping("/**")
public ResponseEntity mirrorRest(@RequestBody(required = false) String body, 
    HttpMethod method, HttpServletRequest request, HttpServletResponse response) 
    throws URISyntaxException {
    String requestUrl = request.getRequestURI();

    URI uri = new URI("http", null, server, port, null, null, null);
    uri = UriComponentsBuilder.fromUri(uri)
                              .path(requestUrl)
                              .query(request.getQueryString())
                              .build(true).toUri();

    HttpHeaders headers = new HttpHeaders();
    Enumeration<String> headerNames = request.getHeaderNames();
    while (headerNames.hasMoreElements()) {
        String headerName = headerNames.nextElement();
        if (!headerName.equals("Accept-Encoding")) {
            headers.set(headerName, request.getHeader(headerName));
        }
    }

    HttpEntity<String> httpEntity = new HttpEntity<>(body, headers);
    RestTemplate restTemplate = new RestTemplate();
    try {
        return restTemplate.exchange(uri, method, httpEntity, String.class);
    } catch(HttpStatusCodeException e) {
        return ResponseEntity.status(e.getRawStatusCode())
                             .headers(e.getResponseHeaders())
                             .body(e.getResponseBodyAsString());
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-17T11:39:52.433

你需要类似的东西`jetty transparent proxy`，它实际上会重定向你的电话，如果你需要，你有机会覆盖请求。[您可以在http://reanimatter.com/2016/01/25/embedded-jetty-as-http-proxy/](http://reanimatter.com/2016/01/25/embedded-jetty-as-http-proxy/)获得详细信息

# php - CodeIgniter 致命错误：允许的字节内存大小已用尽

> ID：14726085
> 
> 赞同：1
> 
> 时间：2013-02-06T09:55:53.957
> 
> 标签：php, codeigniter, fatal-error, php-ini

我在我的 codeIgniter 中收到此致命错误消息，我已经尝试了一些具有相同问题的答案。

我已经设置了我的 php.ini

```
    max_execution_time = 300
    最大输入时间 = 600
    memory_limit = 128M

```

但是我仍然收到相同的致命错误消息，我不知道问题出在我的代码中还是在 php 设置中。

以下是我在控制器中的一些代码：

```
public function blog(){
    $this->load->model("blog_model");
    $data["title"] = "CodeIgniter Projects - Blog";
    if($this->getLastUrl() == 'blog'){
        $data["result"] = $this->blog_model->getBlogs();
        $this->load->view("view_blog", $data);  
    }else{
        $blog_name = $this->getLastUrl();
        $data["result"] = $this->blog_model->getBlogDetails($blog_name);
        $data["comment"] = $this->blog_model->getBlogComments($blog_name);
        $this->load->view("view_blog_details", $data);
        //check for reply
        $url =$_SERVER['REQUEST_URI'];
        $getLast = explode("/", $url);
        $last = end($getLast);
        if($last == 'reply'){
            $this->load->library('form_validation');
            $this->form_validation->set_rules('name', 'Name', 
                'trim|required|min_length[4]|xss_clean');
            $this->form_validation->set_rules('message', 'Comment', 
                'trim|required|min_length[4]|xss_clean');
            $this->form_validation->set_rules('email', 'Email Address', 
                'trim|required|valid_email');

            if($this->form_validation->run() == FALSE)
            {
                $this->blog();
            }
            else
            {
                $msg = 'Message sent.';
                $this->blog_model->addBlogComment();
                $this->blog();
            }
        }

    }
} 
```

我的主要功能是在博客中添加新评论，它可以工作，但它会插入重复的数据，我无法摆脱致命的错误消息。

addBlogComment 函数

```
    函数 addBlogComment(){
    $数据=数组（
    'blog_id'=> $this->input->post('blog_id'),
    'name' => $this->input->post('name'),
    'email' => $this->input->post('email'),
    '消息' => $this->input->post('消息'),
    '创建' => 日期（'Ymd H:i:s'）
    );

    $this->db->insert('comment',$data);
    }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:50:32.160

我刚刚在我的代码中发现了错误的循环。循环将没有出口，它将再次返回。

```
if($this->form_validation->run() == FALSE)
{
      $this->blog();
}
else
{
      $msg = 'Message sent.';
      $this->blog_model->addBlogComment();
      $this->blog();
} 
```

它总是会返回一个 false 值，因此它将执行并且不执行循环结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:39:46.237

尝试像这样构建您的控制器：

```
public function blog( $blog_name = '', $action = '' ){

    $this->load->model("blog_model");

    // What if there is no blog name in the url
    if ( empty( $blog_name ) ) {

        // Load the list of blogs
        $data["result"] = $this->blog_model->getBlogs();
        $this->load->view("view_blog", $data);

    } else {

        // If the blog name in url exists and there is no action display the blog
        if ( !empty( $blog_name ) && empty( $action ) ) {

            $blog_name = $this->getLastUrl();
            $data["result"] = $this->blog_model->getBlogDetails( $blog_name );
            $data["comment"] = $this->blog_model->getBlogComments( $blog_name );
            $this->load->view("view_blog_details", $data);

        }
        // else If there is the action "reply" check if there is some post
        else if ( $action == 'reply' && $this->input->post( 'Comment' ) ) {

            $this->load->library( 'form_validation' );
            $this->form_validation->set_rules( 'name', 'Name', 'trim|required|min_length[4]|xss_clean' );
            $this->form_validation->set_rules( 'message', 'Comment', 'trim|required|min_length[4]|xss_clean' );
            $this->form_validation->set_rules( 'email', 'Email Address', 'trim|required|valid_email' );

            if($this->form_validation->run() == FALSE) {

                redirect( site_url( $blog_name ) );

            } else {

                $msg = 'Message sent.';
                $this->blog_model->addBlogComment();

                // Redirect to prevent F5 submitting duplicate data
                redirect( site_url( $blog_name ) );
            }
        }
    }
} 
```

# iphone - 从 UIEvent 对象识别触摸手势的类型

> ID：14726087
> 
> 赞同：11
> 
> 时间：2013-02-06T09:55:58.430
> 
> 标签：iphone, ios, hittest, uievent

有没有办法获得触发 UIEvent 的触摸手势类型？所以，假设我用 hitTest:withEvent: 拦截了一个手势。如何识别触发此方法的触摸（捏合、点击、滑动等）？

我可以从 UIEvent 子类型中获取远程事件的类型，即使设备被晃动，但没有触摸事件的参数......

你如何识别那些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T10:16:38.843

您必须自己进行触摸分析。

这并不难，但它不是为你完成的。这是我实际使用的一些代码的示例。它并不意味着作为一个全面的解决方案。它只在非常具体的上下文（我的应用程序）中检测基本的点击/滑动/捏手势，并使用一种相当不酷的机制来传递手势（通知）。因此，它可能适用于您的情况，也可能不适用，但我希望它能让您了解所需的内容。

```
NSSet* allTouches = [event allTouches];
UITouch* touch = [allTouches anyObject];
UIView* touchView = [touch view];

        if (touch.phase == UITouchPhaseBegan) {

            _initialView = touchView;
            startTouchPosition1 = [touch locationInView:self];
            startTouchTime = touch.timestamp;

            if ([allTouches count] > 1) {
                startTouchPosition2 = [[[allTouches allObjects] objectAtIndex:1] locationInView:self];
                previousTouchPosition1 = startTouchPosition1;
                previousTouchPosition2 = startTouchPosition2;
            }
        }

        if (touch.phase == UITouchPhaseMoved) {

            if ([allTouches count] > 1) {
                CGPoint currentTouchPosition1 = [[[allTouches allObjects] objectAtIndex:0] locationInView:self];
                CGPoint currentTouchPosition2 = [[[allTouches allObjects] objectAtIndex:1] locationInView:self];

                CGFloat currentFingerDistance = CGPointDist(currentTouchPosition1, currentTouchPosition2);
                CGFloat previousFingerDistance = CGPointDist(previousTouchPosition1, previousTouchPosition2);
                if (fabs(currentFingerDistance - previousFingerDistance) > ZOOM_DRAG_MIN) {
                    NSNumber* movedDistance = [NSNumber numberWithFloat:currentFingerDistance - previousFingerDistance];
                    if (currentFingerDistance > previousFingerDistance) {
//                          NSLog(@"zoom in");
                        [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_ZOOM_IN object:movedDistance];
                    } else {
//                          NSLog(@"zoom out");
                        [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_ZOOM_OUT object:movedDistance];
                    }
                }
            }
        }

        if (touch.phase == UITouchPhaseEnded) {
            CGPoint currentTouchPosition = [touch locationInView:self];

            // Check if it's a swipe
            if (fabsf(startTouchPosition1.x - currentTouchPosition.x) >= SWIPE_DRAG_HORIZ_MIN &&
                fabsf(startTouchPosition1.x - currentTouchPosition.x) > fabsf(startTouchPosition1.y - currentTouchPosition.y) &&
                touch.timestamp - startTouchTime < 0.7) 
            {
                // It appears to be a swipe.
                if (startTouchPosition1.x < currentTouchPosition.x) {
                        NSLog(@"swipe right");
                    [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_SWIPE_RIGHT object:self];
                } else {
                        NSLog(@"swipe left");
                    [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_SWIPE_LEFT object:self];
                }
            } else {
                //-- else, check if it's a single touch
                if (touch.tapCount == 1) {
                    NSDictionary* uInfo = [NSDictionary dictionaryWithObject:touch forKey:@"touch"];
                    [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_TAP object:self userInfo:uInfo];                        
                }/* else if (touch.tapCount > 1) {
                    handle multi-touch
                }
                */
            }

            startTouchPosition1 = CGPointMake(-1, -1);
            _initialView = nil;
        }

        if (touch.phase == UITouchPhaseCancelled) {
            _initialView = nil;
//          NSLog(@"TOUCH CANCEL");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:04:16.827

您需要自己分析触摸（触摸次数和位置）。另一种更简单的方法是添加对应的手势识别器来获取对应的类型。所有触摸事件的事件类型都是`UIEventSubtypeNone`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-31T15:07:59.943

从 iOS 7 开始，有一个委托方法可以让您了解 URL 交互，称为`textView(_:shouldInteractWith:in:interaction:)`.

[https://developer.apple.com/documentation/uikit/uitextviewdelegate/1649337-textview](https://developer.apple.com/documentation/uikit/uitextviewdelegate/1649337-textview)

# javascript - 单击链接时显示和隐藏 div

> ID：14726088
> 
> 赞同：0
> 
> 时间：2013-02-06T09:56:01.373
> 
> 标签：javascript, html, show-hide

当我点击一个链接时，我希望一个 div 变得可见。但是，我需要通过检查它具有哪个 id 来知道单击了哪个链接来做到这一点。内容是隐藏的，但是当我单击链接时不会变得可见。我不允许使用 jquery。有什么解决办法吗？

Javascript

```
function show() {
    var a = document.getElementsByTagName("a");
    if (a.id == "link1") {
        document.getElementByID("content1").style.visibility = 'visible';
    } else if (a.id == "link2") {
        document.getElementByID("content2").style.visibility = 'visible';
    } else if (a.id == "link3") {
        document.getElementByID("content3").style.visibility = 'visible';
    } else if (a.id == "link4") {
        document.getElementByID("content4").style.visibility = 'visible';
    }
}

function init() {

    var divs = document.getElementsByTagName("div");
    for (i = 0; i < divs.length; i++) {
        if (divs[i].className == "div") {
            divs[i].style.visibility = 'hidden';
        }
    }
    var a = document.getElementsByTagName("a");
    a.onclick = show;
}

window.onload = init; 
```

HTML

```
<head>
    <title>Inl1-1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="style-1.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="Uppg1.js"></script>
</head>
<body>
    <ul class="meny" id="menu">
        <li><a href="#" id="link1">Utvärdering/Feedback</a>
        </li>
        <li><a href="#" id="link2">Kontakt</a>
        </li>
        <li><a href="#" id="link3">Öppettider</a>
        </li>
        <li><a href="#" id="link4">Om Asperöd</a>
        </li>
    </ul>
    <div class="div" id="content1">
        <p>Du kan kontakta oss på följande nummer:
            <br/>040-123456</p>
        <p>Du kan även mejla oss:
            <br/>aperöd@hotmail.com</p>
    </div>
    <div class="div" id="content2">
        <p><b>Asperåd Äventyrsland</b>
        </p>
        <p>Växel: 0200-123456999 (kl.08:30-15)</p>
        <p>Stora Vägen 140</p>
        <p>289 22 Aperöd</p>
        <p>Skicka oss din <a href="Inl1-3.html">fråga</a>
        </p>
    </div>
    <div class="div" id="content3">
        <p>Vi har följande öppettider:</p>
        <p>Mån-Fre: 10:00 - 20:00</p>
        <p>Lör: 10:00 - 18:00</p>
    </div>
    <div class="div" id="content4">
        <p>Asperöd är en fin park för alla möjliga personer. Vi erbjuder en massa,
            <br/>men det kostar 500kr för att delta för en dag.</p>
        <p>Asperöd är fylld med turister som besöker platsen minst en gång per månad.</p>
        <p>Asperöd är bland de största nöjesparkerna i Scandinavien.</p>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:24:12.407

```
function show(a) {
var divs = document.getElementsByTagName("div");
for (i = 0; i < divs.length; i++) {
    if (divs[i].className == "div") {
        divs[i].style.visibility = 'hidden';
    }
}
if (a.id == "link1") {
    document.getElementById("content1").style.visibility = 'visible';
}
else if (a.id == "link2") {
    document.getElementById("content2").style.visibility = 'visible';
}
else if (a.id == "link3") {
    document.getElementById("content3").style.visibility = 'visible';
}
else if (a.id == "link4") {
    document.getElementById("content4").style.visibility = 'visible';
} 
```

}

```
function init() {
var divs = document.getElementsByTagName("div");
for (i = 0; i < divs.length; i++) {
    if (divs[i].className == "div") {
        divs[i].style.visibility = 'hidden';
    }
}
var a = document.getElementsByTagName("a");
for (i = 0; i < a.length; i++) {
    a[i].setAttribute("onclick", "show(this);");
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:00:37.863

创建一个提供映射的链接对象。从事件中获取目标元素并存储其 id。然后使用 id 从 links 对象中获取正确元素的 id。

```
function show(event){
var links = {
    link1: "content1",
    link2: "content2",
    link3: "content3",
    link4: "content4"
};

for(var x = 0; x < links.length; x++){
   document.getElementById(links[id]).style.visibility = "hidden";
}

var id = event.target.id;
var a = document.getElementsByTagName("a");
document.getElementById(links[id]).style.visibility = 'visible';
} 
```

init 函数也存在问题。由于`a`是一个元素数组，因此您必须迭代此数组并将 show 函数绑定到`onclick`事件。

```
function init() {

    var divs = document.getElementsByTagName("div");
    for (i = 0; i < divs.length; i++) {
        if (divs[i].className == "div") {
            divs[i].style.visibility = 'hidden';
        }
    }
    var a = document.getElementsByTagName("a");
    for(var x = 0; x < a.length; x++){
       a[x].onclick = show;
    }
} 
```

工作示例：http: [//jsfiddle.net/538s2/](http://jsfiddle.net/538s2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:01:17.677

使用 div.style.display = 'block'; div.style.display = '无';

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:11:49.280

你需要以不同的方式来做。我做了一些改变。你可以复制并尝试这个

```
 <head>
<title>Inl1-1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style-1.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="Uppg1.js"></script>

<script type="text/javascript">
function show(id){

if(id == 'link1'){
document.getElementById("content1").style.visibility = 'visible';
}
else if(id == 'link2'){
document.getElementById("content2").style.visibility = 'visible';
}
else if(id == 'link3'){
document.getElementById("content3").style.visibility = 'visible';
}
else if(id == 'link4'){
document.getElementById("content4").style.visibility = 'visible';
}
}

function init(){

var divs = document.getElementsByTagName("div");
for(i=0; i<divs.length; i++){
  if(divs[i].className == "div"){
    divs[i].style.visibility = 'hidden';
  }
}
var a = document.getElementsByTagName("a");
a.onclick = show;
}

window.onload = init;
</script>
</head>

<body>

<ul class="meny" id="menu">
<li><a href="javascript:show('link1')" id="link1" >Utvärdering/Feedback</a></li>
<li><a href="javascript:show('link2')" id="link2">Kontakt</a></li>
<li><a href="javascript:show('link3')" id="link3">Öppettider</a></li>
<li><a href="javascript:show('link4')" id="link4">Om Asperöd</a></li>
</ul>

<div class="div" id="content1">
<p>Du kan kontakta oss på följande nummer: 
<br> 040-123456
</p>
<p> Du kan även mejla oss:
<br> aperöd@hotmail.com
</p>
</div>

<div class="div" id="content2">
<p><b>Asperåd Äventyrsland</b></p> 
<p>Växel: 0200-123456999 (kl.08:30-15)</p>
<p>Stora Vägen 140</p>
<p>289 22 Aperöd</p>
<p>Skicka oss din <a href="Inl1-3.html">fråga</a></p>
</div>

<div class="div" id="content3">
<p>Vi har följande öppettider:</p>
<p> Mån-Fre: 10:00 - 20:00 </p>
<p> Lör: 10:00 - 18:00 </p>
</div>

<div class="div" id="content4">
<p>Asperöd är en fin park för alla möjliga personer. Vi erbjuder en massa, 
<br> men det kostar 500kr för att delta för en dag.
</p>
<p> Asperöd är fylld med turister som besöker platsen minst en gång per månad. </p>
<p> Asperöd är bland de största nöjesparkerna i Scandinavien. </p>
</div>

</body> 
```

# regex - 字符串替换在 perl 中不起作用

> ID：14726089
> 
> 赞同：0
> 
> 时间：2013-02-06T09:56:17.677
> 
> 标签：regex, perl

给定文本是“C”样式结构 -

```
 struct mystruct {
        int a[100];
        int b[10*10];
        int c[10*5+(25*2)];
        int d[10^2];
    } 
```

逐行阅读文本并评估每个数组中的元素数量，并使用元素计数重新声明数组。

结果应打印如下：-

```
 struct mystruct {
        int a[100];
        int b[100];
        int c[100];
        int d[100];
    } 
```

以下字符串替换对我不起作用 -

```
 if ($line =~ m/.*?\[(.*?)\]/) {
        $answer = eval ($1);
        $line =~ s/$1/$answer/g;
    } 
```

替换不起作用，并且 $line 对于所有评估的元素计数保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:21:43.653

直接在替换中进行评估：

```
$line =~ s/(?<=\[)   # assert a square bracket behind
           ([^]]*)   # capture string of non-brackets
           (?=\])    # assert square bracket after
          /$1/eex;   # double evaluate the variable 
```

双重评估是必要的，因为第一次评估将变量转换为字符串，然后评估字符串。

虽然你会遇到麻烦`10^2`，就像`^`二进制 XOR 运算符一样，而不是指数运算符`**`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:07:56.017

试试这个方法：`$line =~ s/.*?\[(.*?)\]/$1/ge`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:47:48.113

用于`quotemeta`清理替换字符串：

```
if ( $line =~ m/.*?\[(.*?)\]/ ) {
    my $expr = quotemeta($1);
    my $answer = eval ($1);
    $line =~ s/$expr/$answer/;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:49:52.347

看起来米格尔是对的：

```
my $string =
q|int a[100];
int b[10*10];
int c[10*5+(25*2)];
int d[10^2];|;

foreach my $line (split(/\n/,$string)) {
        if ($line =~ m/\[([^\]]+)\]/) {
                my $equation = $1;
                my $val = eval($equation);
                # escape out the special characters.
                $equation =~ s/\*/\\\*/g;
                $equation =~ s/\,/\\\,/g;
                $equation =~ s/\+/\\\+/g;
                $equation =~ s/\)/\\\)/g;
                $equation =~ s/\(/\\\(/g;
                $equation =~ s/\^/\\\^/g;

                $line =~ s/\[$equation\]/\[$val\]/;
        }
        print "$line\n";
} 
```

这将返回：

```
int a[100];
int b[100];
int c[100];
int d[8]; 
```

所以你看到你还需要改变“power of”的特殊字符。但我认为这为您指明了正确的方向。

# c# - Windows 商店应用程序中是否有 AppDomain.AssemblyResolve 的等效项？

> ID：14726095
> 
> 赞同：3
> 
> 时间：2013-02-06T09:56:30.297
> 
> 标签：c#, .net, windows-store-apps, appdomain, .net-assembly

我想附加到“Windows Store”应用程序中的[AppDomain.AssemblyResolve 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx) 。但是 AppDomain 不存在。

是否有其他方法可以获得相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:12:07.290

不，也没有等价物。`AppDomain.AssemblyResolve`允许您加载任意代码，这在 Windows 应用商店应用程序中是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:17:01.307

DLL 分布在不可预测的地方的概念是一个不确定的概念。当然，AssemblyResolve 可以解决这个问题，但事故总是会发生。毫无疑问，它们是最糟糕的一种，DLL Hell 是一个可用性噩梦，让受害者无法获得解决问题的好机会。

WinRT 旨在从根本上消除此类长期存在的 Windows 可用性问题。必须*打包*Windows 应用商店应用程序，应用程序所需的所有可执行文件必须一起从应用商店下载到单个可下载文件中。因此，在运行时尝试查找 DLL 毫无意义，它始终是包的一部分并位于可预测的位置。因此，AssemblyResolve 事件*已从*参考程序集中删除，它不再有任何用途。

# php - 如何使用其中一个字段在 PHP 中对数组进行排序

> ID：14726098
> 
> 赞同：-5
> 
> 时间：2013-02-06T09:56:34.617
> 
> 标签：php, arrays, sorting

我正在尝试在 PHP 中对数组进行排序。请看我的数组：

```
Array
(
    [0] => Array
        (
            [id] => 8
            [date_start_month_name] => January
            [approved] => Accepted: yes
        )

    [1] => Array
        (
            [id] => 3
            [date_start_month_name] => January
            [approved] => Accepted: yes
        )

    [2] => Array
        (
            [id] => 2
            [date_start_month_name] => March
            [approved] => Accepted: yes
        )

    [3] => Array
        (
            [id] => 5
            [date_start_month_name] => April
            [approved] => Accepted: yes
        )

) 
```

我想使用月份名称对数组进行排序，例如：**一月**并得到如下内容：

```
Array
(
    [0] => Array
        (
            [id] => 8
            [date_start_month_name] => January
            [approved] => Accepted: yes
        )

    [1] => Array
        (
            [id] => 3
            [date_start_month_name] => January
            [approved] => Accepted: yes
        )
) 
```

我怎样才能做到这一点？提前感谢您的帮助。最好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:59:48.520

您可以使用[usort](http://www.php.net/manual/en/function.usort.php)函数来实现这一点，如下所示：

```
<?php
     // Sort the multidimensional array
     usort($results, "custom_sort");
     // Define the custom sort function
     function custom_sort($a,$b) {
          return $a['some_sub_var']>$b['some_sub_var'];
     }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:59:08.243

利用`usort`

```
usort($array, function($a, $b) {
    return $a['date_start_month_name'] > $b['date_start_month_name']
}); 
```

# groovy - 获取 Jenkins 上游工作

> ID：14726109
> 
> 赞同：4
> 
> 时间：2013-02-06T09:56:57.150
> 
> 标签：groovy, jenkins

我想获得所有上游作业，就像在控制台输出中一样：

```
Started by upstream project "allocate" build number 31
originally caused by: 
Started by upstream project "start" build number 12
originally caused by: 
```

我已经尝试了以下的 groovy postbuild：

```
def build = Thread.currentThread().executable
def causes= manager.build.getCauses()
for (cause in causes)
{
manager.listener.logger.println "upstream build: " + cause.getShortDescription()

} 
```

但后来我只得到“分配”，而不是“开始”工作。

我也试过

```
def build = Thread.currentThread().executable
def test = build.getUpstreamBuilds()
for (up in test)
{
manager.listener.logger.println "test build project: " + up
} 
```

但这是空的......

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T11:51:37.763

你很接近你的第一个解决方案。

`Cause`实际上，您需要做的是根据它的类型迭代它的祖先。

这是一个可以帮助您入门的示例代码片段：

```
def printCausesRecursively(cause) {
     if (cause.class.toString().contains("UpstreamCause")) {
         println "This job was caused by " + cause.toString()
         for (upCause in cause.upstreamCauses) {
             printCausesRecursively(upCause)
         }
     } else {
         println "Root cause : " + cause.toString()
     }
}

for (cause in manager.build.causes)
{
    printCausesRecursively(cause)
} 
```

您可能需要参考文档来处理所有`Cause`类型：http: [//javadoc.jenkins-ci.org/hudson/model/Cause.html](http://javadoc.jenkins-ci.org/hudson/model/Cause.html)

希望能帮助到你，

最好的

# entity-framework - 实体框架代码优先与现有数据库

> ID：14726110
> 
> 赞同：0
> 
> 时间：2013-02-06T09:56:56.530
> 
> 标签：entity-framework

我必须创建一个新项目，并且（像往常一样）使用现有的 SQL Server 数据库。

我曾经使用 EF Code First 连接我的数据库，打开我的 EDMX 模型设计器，然后右键单击 --> 添加代码生成项。（[http://weblogs.asp.net/jgalloway/archive/2011/02/24/generating-ef-code-first-model-classes-from-an-existing-database.aspx](http://weblogs.asp.net/jgalloway/archive/2011/02/24/generating-ef-code-first-model-classes-from-an-existing-database.aspx)）很容易。

但现在我发现有一种叫做 EF Power Tools 的东西可以让我先做逆向工程师代码（很酷的名字！）并得到同样的结果（[http://msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620)）

你知道这两种选择的区别吗？哪一个更好？

提前致谢。

（抱歉，如果之前有人问过这个问题，但我没有找到。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:49:58.920

不同之处在于 edmx 方法不是代码优先，而是使用`DbContext`API 的数据库优先。您将始终使用数据库作为模型更改的来源。

EF Power Tools 产生一个真正的代码优先模型`DbContext`：从那时起，您将首先更改类模型并相应地修改数据库（例如通过 EF 迁移）。

两者都不是“更好”。`DbContext`API 比 更容易使用`ObjectContext`，但两种方法都使用前者。您可以选择是先使用数据库还是先使用代码。这是个人喜好问题，可能取决于谁维护数据库结构。使用数据库优先，可以更轻松地响应其他人对数据库结构施加的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T17:23:01.443

就数据库的工作流程而言，添加到@Gert-Arnold 所说的内容：

> 使用数据库优先，可以更轻松地响应其他人对数据库结构施加的更改。

如果其他人正在管理数据库更改，我发现使用 EF 设计器要容易得多。您将获得一个更新的数据库，然后只需在 EF 设计器中单击鼠标右键并从数据库中更新模型。您可以使用源代码管理轻松查看已更改的内容。

此外，如果您只需要数据库中的表子集，反向工程会导致大量工作必须返回并从上下文中删除类和属性。

我发现通过代码优先对现有数据库进行重新逆向工程，试图弄清楚发生了什么变化以及我需要如何更新使用上下文的代码实在是太痛苦了。

# mvcrecaptcha - reCAPTCHA 请求无效。缺少挑战值

> ID：14726111
> 
> 赞同：1
> 
> 时间：2013-02-06T09:56:58.407
> 
> 标签：mvcrecaptcha

我在 MVC 应用程序中使用 reCaptcha。在控制器中，我有 RecaptchacontrolMVC.CaptchaValidator 属性。

我的 CaptchaValid 总是返回 false 并显示错误消息“无效的 reCAPTCHA 请求。缺少挑战值。”

```
[RecaptchaControlMvc.CaptchaValidator]
public ActionResult Login(Model model, bool captchaValid, string     
                captchaErrorMessage)
 {
   if(captchValid)//this is false
 } 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:59:46.027

不确定但重新验证码需要 4 个字段来验证，如此处所述。 [https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

我相信您在发布请求中缺少参数“挑战”。尝试查看在 HTTPFox 或 Firebug 中传递了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T21:42:08.650

您为此 Recaptcha 控件设置的 URL 可能没有正确的公钥/私钥组合。

# mysql - RMySQL fetch - 找不到继承的方法

> ID：14726114
> 
> 赞同：2
> 
> 时间：2013-02-06T09:57:06.310
> 
> 标签：mysql, r, rmysql

使用 RMySQL 我想将数据库中的数据加载到 R 中的数据框中。为此，我使用以下代码：

连接数据库：

```
con <- dbConnect(MySQL(),
user="root", password="password",
dbname="prediction", host="localhost") 
```

主要代码

```
library(RMySQL)
source("Rconnectdb") #load the database connection
query = "select received,isRefound from message" #specify query
rs=dbGetQuery(con,query) #resultset
dataset <- fetch(rs, n=-1) #fill dataset with all rows of the resultset
dbClearResult(rs) #clear resultset 
```

执行这个我得到以下错误

> 函数错误（类、fdef、mtable）：无法找到函数“fetch”、签名“data.frame”、“numeric”的继承方法

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:29:07.310

你误会`dbSendQuery`了`dbGetQuery`。
`dbGetQuery`combine `dbSendQuery`，`fetch`并`dbClearResult`根据文档：

> 该函数`dbSendQuery`只向数据库引擎提交并同步执行 SQL 语句。它不提取任何记录——因为您需要使用该函数`fetch`（确保`dbClearResult`在完成获取所需记录时调用）。
> 
> 该函数`dbGetQuery`在一个操作中完成所有这些操作（提交语句、获取所有输出记录并清除结果集）。

从`?dbGetQuery`包装中`DBI`。

# c - 如何使用 libcurl 和 c 语言发送带有电子邮件的附件？

> ID：14726119
> 
> 赞同：3
> 
> 时间：2013-02-06T09:57:16.853
> 
> 标签：c, linux, libcurl

我正在使用 curl 库发送电子邮件。我能够成功发送电子邮件。我可以在接收端正确地看到 FROM、主题和正文。现在我需要在电子邮件中添加附件。我以这种方式遵循：http: [//msdn.microsoft.com/en-us/library/ms526560 (v=exchg.10).aspx](http://msdn.microsoft.com/en-us/library/ms526560(v=exchg.10).aspx)

```
static const char *text[]={
  "Date: Wed, 06 Feb 2013 12:30:30 +1100\n",
  "To: " RECIPIENT "\n",
  "From: " MAILFROM "\n",
  "MIME-Version: 1.0",
  "Content-Type: multipart/mixed",
  "boundary=""XXXXX""\n",
  "Subject: email example message\n",
  "--XXXXX",
  "\n", /* empty line to divide headers from body, see RFC5322 */
  "The body of the message starts here.\n",
  "Check RFC5322.\n",
  "--XXXXX",
  "Content-Type: text/plain" "\n",
  "Content-Disposition: attachment" "\n",
  "filename="FILE_PATH "\n",    
  "--XXXXX--",
  NULL
}; 
```

他们建议使用 RFC5322。但在那我找不到任何类似依恋的东西。这是对的吗？也欢迎使用 libcurl + C 语言的任何其他方式。

我认为名叫 Jorge 的人在 2012 年 10 月 13 日提出了同样的问题。但答案并不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T05:22:44.200

最简单的方法是使用 base64 编码之类的东西进行编码，它将二进制数据转换为能够通过电子邮件发送的 ASCII 字符。base64 对文件进行编码并插入字符串，如下所示。用正确的东西替换大写字母中的所有内容。

```
--XXXXboundary text
Content-Type: application/FILETYPE; name="FILENAME"
Content-Disposition: attachment; filename="FILENAME"
Content-Transfer-Encoding: base64
STRINGFROMBASE64ENCODING 
```

这是关于 base64 的一个线程：[如何在 C 中进行 base64 编码（解码）？](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:51:21.097

我认为你是对的，但你为什么附加一个空文件？我认为你需要在最后的附件身体公寓里放一些东西。

例如：

```
--XXXXboundary text 
Content-Type: text/plain;
Content-Disposition: attachment;
        filename="test.txt"

this is the attachment text ---- this is attachment content

--XXXXboundary text-- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:33:28.253

也许你应该看看 libquickmail ( [http://sf.net/p/libquickmail/](http://sf.net/p/libquickmail/) )。它完成了附加文件所需的所有魔法，它使用 libcurl 进行 SMTP 传输（甚至在 libquickmaillight 中没有 libcurl）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T12:58:40.943

可以按如下方式完成；

```
static const char *payload_text[] = {
  "To: " TO "\r\n",
  "From: " FROM "(Example User)\r\n",
  "Cc: " CC "(Another example User)\r\n",
  "Subject: SMTPS Example\r\n",
  "Date: Mon, 29 Nov 2010 21:54:29 +1100\r\n",
  "User-Agent: My eMail Client\r\n",
  "MIME-Version: 1.0\r\n",
  "Content-Type: multipart/mixed;\r\n",
   " boundary=\"------------030203080101020302070708\"\r\n",    
  "\r\nThis is a multi-part message in MIME format.\r\n",
  "--------------030203080101020302070708\r\n",
  "Content-Type: text/plain; charset=utf-8; format=flowed\r\n",
  "Content-Transfer-Encoding: 7bit\r\n",
  "\r\n", /* empty line to divide headers from body, see RFC5322 */
  "The body of the message starts here.\r\n",
  "\r\n",
  "It could be a lot of lines, could be MIME encoded, whatever.\r\n",
  "Check RFC5322.\r\n\r\n",
  "--------------030203080101020302070708\r\n",
  "Content-Type: text/plain; charset=utf-8; format=flowed\r\n",
  "  name=\"send.c\"\r\n",
  "Content-Type: text/plain; charset=utf-8; format=flowed\r\n",
  "Content-Disposition: attachment;\r\n",
  "  filename=\"abc.txt\"\r\n",
  "\r\n",
  "bla bla file content is here\r\n",
  "--------------030203080101020302070708--\r\n",
  NULL
}; 
```

# vb.net - 从字符串 "" 到 long 的转换无效

> ID：14726120
> 
> 赞同：1
> 
> 时间：2013-02-06T09:57:17.947
> 
> 标签：vb.net, concatenation

即使经过大约一个小时的研究，我也遇到了一个我无法解决的错误。

> 从字符串“Waseem-PC\Waseem”到 long 的转换无效

这个错误真的很烦人，我什么都试过了！

我非常感谢您的帮助。我很想给你的答案竖起大拇指，但我必须有一个更大的代表。
这是我的代码

```
 Private Sub RichTextBox2_KeyPress(sender As Object, e As KeyPressEventArgs) Handles RichTextBox2.KeyPress
        If Asc(e.KeyChar) = Keys.Enter Then
            RichTextBox1.Text = RichTextBox1.Text And vbNewLine And RichTextBox2.Text
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:11:47.147

您错误地使用了用于（来自 MSDN）的**[And关键字：](http://msdn.microsoft.com/en-us/library/sdbcfyzh%28v=vs.71%29.aspx)**

> 对两个布尔表达式执行逻辑连接，或对两个数值表达式执行按位连接。

相反，您想使用`&`连接***字符串***...

这将起作用：

```
 Private Sub RichTextBox2_KeyPress(sender As Object, e As KeyPressEventArgs) Handles RichTextBox2.KeyPress
    If Asc(e.KeyChar) = Keys.Enter Then
        RichTextBox1.Text = RichTextBox1.Text & vbNewLine & RichTextBox2.Text
    End If
End Sub 
```

# android - 脸书登录失败

> ID：14726121
> 
> 赞同：0
> 
> 时间：2013-02-06T09:57:20.613
> 
> 标签：android, facebook

我有个问题。我可以带上姓名、性别（公开资料）。但我不能带 user_birthday、email、offline_access。

问题如下。

不应将读取权限 (user_birthday) 传递给发布或管理授权请求。不应将阅读权限（电子邮件）传递给发布或管理授权请求。不应将读取权限 (offline_access) 传递给发布或管理授权请求。

请求并带来 Facebook 数据源

```
 try{

           json = Util.parseJson(mFacebook.request("me"));
           uuserName = json.getString("name");
           userSex = json.getString("gender");
           userBirth = json.getString("user_birthday");            
           userEmail = json.getString("email");

       } catch (Exception e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } 
```

登录源

```
String[] sPermissions = {"user_birthday", "email", "offline_access"};
mFacebook.authorize(this, sPermissions, new AuthorizeListener()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:12:45.793

试试这个代码：

```
 userBirth = json.getString("birthday"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:29:02.517

您收到的消息是**警告**而不是错误。

发生这种情况是因为您使用的是 Facebook Android SDK 2.0，在 SDK v3.0 发布后已被弃用。

在最新的 SDK 中，`Util`不再以相同的方式使用类，并以不同的方式请求权限。

`Facebook.request("me")`也已被弃用，因为现在所有数据都可以在用户登录时使用`widget.Facebook.loginButton`.

尝试阅读更新后的 SDK 的文档，警告应该不会再打扰您了。

遇到实际问题，为什么您无法获得生日是因为您尝试在 JSON 数据中访问的参数错误。

你需要使用`json.getString("birthday")`，根据[文档](https://developers.facebook.com/docs/reference/api/user/)。

# python - 通过python输入街头霸王4游戏的关键事件

> ID：14726125
> 
> 赞同：1
> 
> 时间：2013-02-06T09:57:34.817
> 
> 标签：python, windows, events, keyboard

我按照下面给出的帖子处理关键事件。

[如何使用 python 脚本发送键盘命令（按住、释放、同时）？](https://stackoverflow.com/questions/13289777/how-can-i-send-keyboard-commands-hold-release-simultanous-with-a-python-script)

我能够成功地将关键事件发送到除游戏之外的所有 Windows 可执行程序。我的需要是，当街头霸王 4 游戏在菜单项启动时，我必须按 Enter 键。基本上我正在尝试自动化它。

当我按照上面给出的帖子进行操作时，游戏没有处理任何键。

这背后有什么原因吗？可能是游戏不允许程序化关键事件？我不太确定这只是一个疯狂的猜测，我知道即使键盘事件也是编程键事件。

我正在使用 python 语言来处理这些事件。

# vim - Vim：反向选择

> ID：14726126
> 
> 赞同：2
> 
> 时间：2013-02-06T09:57:43.780
> 
> 标签：vim

如果我的行看起来像这样：

```
abcdefghi 
```

如何反转所选字符（例如：从位置 2 到位置 6（5 个字符））以获得如下结果：

```
a(fedcb)ghi 
```

我怎样才能在其他地方拉动、反转和粘贴以获得这样的结果：

```
abcdefghi(fedcb) 
```

注意：括号仅用于可视化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:06:47.140

您可以按照[此处](http://vim.wikia.com/wiki/Reverse_selected_text)`'revins'`的建议使用该选项来执行此操作：

```
vnoremap <f4> c<C-O>:set ri<CR><C-R>"<Esc>:set nori<CR> 
```

如果您想将其粘贴到其他地方，请像其他方式一样将其拉出并使用此“反向粘贴”映射：

```
nnoremap <f4> :set ri<cr>i<C-r>"<Esc>:set nori<cr> 
```

# c - ALSA：snd_pcm_readn 需要恒定的读取延迟

> ID：14726127
> 
> 赞同：1
> 
> 时间：2013-02-06T09:57:45.870
> 
> 标签：c, linux, audio, alsa

如何从 snd_pcm_readn() 实现恒定的读取延迟？我试过（读取 144 帧，用于 4 通道麦克风，8000Hz）。

我期望每次调用 snd_pcm_readn() 有 18 毫秒的读取延迟：

```
 18ms, 18ms, 18ms , 18ms, 18ms, 18ms, 18ms , 18ms, 18ms, 18ms, 18ms , 18ms .... 
```

. 但是我在示波器中观察到以下模式：

```
 2ms, 2ms, 2ms ,2ms , 64ms, 2ms, 2ms, 2ms 2ms ,, 64ms, 2ms, 2ms, 2ms, 2ms, 64ms .... 
```

似乎在 snd_pcm_readn() 中发生了一些缓冲，如果数据被缓冲，则 api 返回更快。尽管这个观察平均为 18 毫秒，但每次调用 snd_pcm_readn() 时，我需要一个恒定 18 毫秒的阻塞行为。

（无论如何，平均读取时间是 18 毫秒 - 我不想要平均行为 - 每次读取应该是 18 毫秒）

如何使用 ALSA 实现这一目标？

# php - 自动加载数据库在 postgres 9.2 中不起作用

> ID：14726128
> 
> 赞同：0
> 
> 时间：2013-02-06T09:57:48.070
> 
> 标签：php, codeigniter, postgresql-9.2

我遇到了一个问题，比如在 codeigniter 1.7.2 和 postgreSQL 9.2 中的 system/application/config/autoload.php 中自动加载我的数据库时，我得到一个空白页。

$autoload '库' = 数组（'数据库'）

当我将该数组（'数据库'）更改为数组（）时，我收到了一个错误

消息：未定义的属性：xxxx_model:$db

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:06:27.537

尝试在你的 autoload.php 中处理这个：

```
 $autoload['libraries'] = array('database'); 
```

代替

```
 $autoload 'libraries' = array('database') 
```

# java - 父框架的getrequestURL

> ID：14726131
> 
> 赞同：0
> 
> 时间：2013-02-06T09:58:00.823
> 
> 标签：java, javascript, html, css, jsp

我需要编写一个jsp代码来从子框架中获取父框架（地址栏中的URL）的getRequestURL（）。当我尝试这样做时，我得到了子框架的 URL。有人可以帮助我从子框架中获得它。

```
 <% String s=request.getRequestURL().toString();
 out.println(s);
 if(s.contains("Password"))
 {
 out.println("Password changed Successfully");
 }
 %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:01:45.723

> 我需要编写一个jsp代码来获取父框架的getRequestURL（）

这不是为了获取您要发回的页面而请求的 URL。它是请求获取（本质上）指向该页面的链接的 URL。

您可以查看Referer 标头。请注意，定义为可选，它经常被阻止，有时包含虚假信息。

# pdo - 从 xampp 移植到服务器后出现 4200 pdo 错误。

> ID：14726132
> 
> 赞同：0
> 
> 时间：2013-02-06T09:58:01.713
> 
> 标签：pdo

我的问题是我从我的 pdo 插入中得到一个 4200 错误代码。在我的计算机上，当我使用 XAMPP 时它运行良好（没有错误），但是当我将它移植到服务器上时，我得到了这个错误。有人可以启发我或指出我得到答案的方向。谢谢。

```
 $add_nonce = $db->con->prepare("INSERT INTO nonces(nonce, issue_date, `used`) VALUES(:nonce, :issue_date, '0')");
        $add_nonce->bindParam(':nonce', $nonce, PDO::PARAM_STR);
        $issue_date = time();
        $add_nonce->bindParam(':issue_date', $issue_date, PDO::PARAM_INT);
    $add_nonce->execute();
    Log_String("test", $add_nonce->errorCode());
    $nonce_id = $db->con->lastInsertId();
    return $nonce; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:37:48.883

您必须告诉 PDO 抛出*异常*，而不是只记录错误代码，其中还包含完整的错误消息。

```
$db->con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

而不是自制的 Log_String() 函数，您必须告诉 PHP 默认情况下记录所有错误，使用`log_errors`和`error_log`ini 指令。

或者，如果在开发服务器上，只需打开`display_errors`。

你会立即知道出了什么问题。

# android - Android：以编程方式添加的事件时间在夏令时更改

> ID：14726135
> 
> 赞同：0
> 
> 时间：2013-02-06T09:58:12.620
> 
> 标签：android, calendar, icalendar, android-calendar

当我以编程方式在 android 日历中添加重复事件时，夏令时开始时它会更改一小时。它在 3 月底增加一小时，在 10 月底减少一小时。

因此，如果我创建了一个每天早上 8:00 发生的事件，那么在 Mart 结束时，它将被转移并从早上 9:00 开始。一直到10月底都是这样。在 10 月底，它会向后移动，直到 3 月底，它又是早上 8:00。

提到该事件已设置，`Events.EVENT_TIMEZONE`并且`Events.EVENT_END_TIMEZONE`该事件所属的日历已`Calendars.CALENDAR_TIME_ZONE`设置。所有这 3 个都设置为相同的时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:05:11.893

我找到了解决方案。问题是我在 format 中添加了时区`GMT+0100`。如果格式，我必须添加时区`Europe/London`。

# apache-zookeeper - CuratorFramework 中的 getData() 不返回任何数据

> ID：14726138
> 
> 赞同：0
> 
> 时间：2013-02-06T09:58:28.710
> 
> 标签：apache-zookeeper

当我跑

```
get <path> 
```

在 zookeeper CLI 中，我得到以下信息

```
192.168.0.102
cZxid = 0x2e93
ctime = Wed Feb 06 15:12:20 GMT+05:30 2013
mZxid = 0x2e93
mtime = Wed Feb 06 15:12:20 GMT+05:30 2013
pZxid = 0x2e93
cversion = 0
dataVersion = 0
aclVersion = 0
ephemeralOwner = 0x13cae2a97ed001f
dataLength = 13
numChildren = 0 
```

对于相同的路径，我试图获取数据如下

```
client.getData().forPath(path); 
```

我反序列化数据。但它没有返回任何东西。我也试过

```
client.getData().inBackround().forPath(path);
client.getData().watched().inBackGround().forPath(path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:20:37.760

这是因为您正在使用`inBackground()`.

`inBackground()`导致请求异步执行。通过删除`inBackground()`，您应该获得所需的结果。

# haskell - 为什么 Haskell 会隐藏同名但类型签名不同的函数？

> ID：14726139
> 
> 赞同：9
> 
> 时间：2013-02-06T09:58:31.057
> 
> 标签：haskell, types, language-design

假设我要`(+)`在 Strings 上定义，但不是通过给出`Num String`.

为什么 Haskell 现在隐藏了`Num`s`(+)`函数？毕竟我提供的功能：

```
(+) :: String -> String -> String 
```

可以通过编译器与 Prelude 的`(+)`. 为什么两个函数不能存在于同一个命名空间中，但具有不同的、不重叠的类型签名？

只要代码中没有调用函数，Haskell 就会关心是否存在歧义。然后使用参数调用函数将确定类型，以便可以选择适当的实现。

当然，一旦有实例`Num String`，实际上就会发生冲突，因为此时 Haskell 无法根据参数类型决定选择哪个实现，如果函数被实际调用。
在这种情况下，应该引发错误。

这不会允许函数重载而没有陷阱/歧义吗？

注意：我*不是*在谈论动态绑定。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T10:09:24.997

Haskell 根本不支持函数重载（通过类型类除外）。原因之一是函数重载不适用于类型推断。如果你有类似的代码，`f x y = x + y`Haskell 怎么知道是数字还是字符串，即类型应该是还是？`x``y``f``f :: Num a => a -> a -> a``f :: String -> String -> String`

PS：这与您的问题并不真正相关，但是如果您假设一个开放的世界，类型并不是严格不重叠的，即在某个模块中的某个地方可能有一个实例`Num String`，导入时会破坏​​您的代码. 因此，Haskell 永远不会根据给定类型没有给定类型类的实例这一事实做出任何决定。当然，即使不涉及类型类，函数定义也会隐藏具有相同名称的其他函数定义，所以正如我所说：与您的问题并不真正相关。

* * *

关于为什么有必要在定义站点知道函数的类型而不是在调用站点推断：首先，函数的调用站点可能与函数定义位于不同的模块中（或在多个不同的模块），所以如果我们必须查看调用站点来推断函数的类型，我们就必须跨模块边界执行类型检查。也就是说，在对模块进行类型检查时，我们还必须遍历导入该模块的所有模块，因此在最坏的情况下，每次更改单个模块时我们都必须重新编译所有模块。这将极大地复杂化并减慢编译过程。更重要的是，它会使编译库变得不可能，因为它'

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T11:20:27.287

> 只要函数没有被调用
> 
> 在某些时候，**当**使用该功能

不不不。在 Haskell 中，您不会想到“之前”或“您所做的那一刻......”，而是一劳永逸地定义事物。这在变量的运行时行为中最为明显，但也转化为函数签名和类实例。这样，您就不必考虑编译顺序的所有繁琐问题，并且可以避免多种方式，例如 C++ 模板/重载经常由于程序中的一个微小变化而严重中断。

另外，我认为您不太了解 Hindley-Milner 的工作原理。

> 在你调用函数之前，你知道参数的类型，它不需要知道。

好吧，您通常*不*知道参数的类型！有时可能会显式给出，但通常是从另一个参数或返回类型推导出来的。例如，在

```
map (+3) [5,6,7] 
```

编译器不知道数字文字的类型，它只知道它们是数字。这样，您可以根据自己的喜好评估结果，这允许您在其他语言中只能梦想的东西，例如符号类型，其中

```
> map (+3) [5,6,7] :: SymbolicNum
[SymbolicPlus 5 3, SymbolicPlus 6 3, SymbolicPlus 7 3] 
```

# java - 从命令行启动 JBoss 失败并出现 ClassNotFoundException：org.jboss.resource.adapter.jdbc.ValidConnectionChecker

> ID：14726142
> 
> 赞同：0
> 
> 时间：2013-02-06T09:58:49.427
> 
> 标签：java, command-line, jboss

我从命令行启动 JBoss 的方式如下：

javaw.exe -Dprogram.name=run.bat -Djava.endorsed.dirs=C:/projects/myappserver/target/staging/jboss-4.2.3.GA/bin/../lib/endorsed -Xms128m -Xmx812m - XX:MaxPermSize=256m -Dfile.encoding=Cp1250 -classpath C:\projects\myappserver\target\staging\jboss-4.2.3.GA\bin\run.jar org.jboss.Main -c myjboss

当 JBoss 从 Eclipse 运行良好时，这是我从进程资源管理器中获取的内容

在我的应用程序中，我使用了一个数据源，并且在 deploy/mysql-ds.xml 中我指定了应该实现 ValidConnectionChecker 的类 com.mysql.jdbc.integration.jboss.MysqlValidConnectionChecker。

当我启动上述命令时，我得到 Caused by: java.lang.ClassNotFoundException: org.jboss.resource.adapter.jdbc.ValidConnectionChecker

我可以在 c:\projects\myappserver\target\staging\jboss-4.2.3.GA\server\myjboss\lib\ 的 jboss-common-jdbc-wrapper.jar 中看到这个接口

这是类路径的问题吗？为什么它可以在 Eclipse 中工作？感谢任何有助于我从命令行启动 JBoss 的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:11:48.967

J Boss 服务器可以通过运行 run.bat 文件来启动。不需要使用 eclipse 运行文件。

请参阅下面的链接，这将对您有所帮助。

[https://www.coderanch.com/t/90561/JBoss/Error-starting-Jboss-Command-Prompt](https://www.coderanch.com/t/90561/JBoss/Error-starting-Jboss-Command-Prompt)

[https://community.jboss.org/wiki/StartAndStopTheJBossApplicationServer?_sscc=t](https://community.jboss.org/wiki/StartAndStopTheJBossApplicationServer?_sscc=t)

# c# - 获取 Windows 8 任务管理器报告的内存使用情况

> ID：14726143
> 
> 赞同：6
> 
> 时间：2013-02-06T09:58:56.870
> 
> 标签：c#, .net, memory-management

如何获取 C# 应用程序使用的总内存？我尝试过：GC.GetTotalMemory() Process.GetCurrentProcess().PrivateMemorySize、PrivateMemorySize64、VirtualMemorySize、VMS64、PagedMS。

他们确实报告了各种值，这没关系。但这些值与我在任务管理器中看到的不同。

我使用的是 Windows 8，任务管理器在右侧分别显示所有应用程序使用的资源，除了应用程序名称。我的应用程序的当前内存也会显示。假设它是 18.9 MB，如果我强制使用 GC.Collect()，则下降到大约 9 MB。

现在，在 GC.Collect(): PrivateMemorySize 和 PMS64 之前都报告〜42（转换为 MB 后）和 GetTotalMemory() 给出〜3 PagedMS 和 PagedMS64 给出〜379

在 GC.Collect(): PrivateMemorySize & PMS64 之后都报告 ~39（转换为 MB 后）和 GetTotalMemory() 给出 ~1 PagedMS & PagedMS64 给出 ~367

但这些与任务管理器的显示不同。我想要的是'18.9'和'9'，即。Windows 8 任务管理器报告的我的应用程序的内存使用情况。我如何通过后面的代码做到这一点？我使用.Net 4.0，Visual Studio 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:14:15.687

我不会尝试复制 taskmgr 所做的，而是使用逻辑上对您有意义的数字。可能，这是私有字节（当然，使用 64 位版本）。私有字节是那些实际在使用并且不与任何其他进程共享的字节。

没有完美的内存编号（无论是在 Windows 上还是在 Linux 上），因为只要多个进程共享某些页面，内存使用情况就可以解释。

不过，私有字节非常适合大多数应用程序。

**更新：Windows 8 任务管理器显示工作集专用字节。**这是一个糟糕的指标。它告诉你这个应用程序当前在 RAM 中有多少内存。这可能比实际内存使用量少得多。它不会*告诉*您如果该进程退出，将释放多少内存。

# date - 使用 jkit 排序

> ID：14726145
> 
> 赞同：1
> 
> 时间：2013-02-06T09:59:01.937
> 
> 标签：date, sorting

如何使用 jkit 对日期进行排序？我正在使用以下代码进行排序。但它不起作用。

```
<th data-jkit="[sort:what=text;by=date]">Birthday</th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T18:08:32.387

请务必调用 jquery、jkit 并激活 Jkit。

```
<head>
<script type="text/javascript" src="scripts/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="scripts/jquery.jkit.1.2.16.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
    $('body').jKit();
});
</script>
</head> 
```

# c# - 滚动另一个列表视图时滚动列表视图

> ID：14726146
> 
> 赞同：1
> 
> 时间：2013-02-06T09:59:04.187
> 
> 标签：c#, winforms, listview, scroll

在我的 win forms 应用程序中，我使用两个列表视图来比较两个文件。当用户使用文件夹浏览器选择两个文件时，文件将加载到列表视图中。我比较了不匹配的文件和行以不同的颜色显示。这绝对没问题。现在，当我滚动一个列表视图时，我希望另一个列表视图也应该以相同的量滚动。我试过了，但你不能设置 Listview 的水平滚动或垂直滚动​​属性。我怎样才能做到这一点 ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:57:40.140

您需要创建一个自定义列表视图，以便您可以检测到它的滚动并将滚动消息传递给另一个文本框，以便它同步滚动。

```
 class SyncListView: ListView
{
    public SyncListView()
    {
    }

    public Control Buddy { get; set; }

    private static bool scrolling;   // In case buddy tries to scroll us

    protected override void WndProc(ref Message m) 
    {
    base.WndProc(ref m);
    // Trap WM_VSCROLL message and pass to buddy
    if ((m.Msg == 0x115 || m.Msg == 0x20a) && !scrolling && Buddy != null && Buddy.IsHandleCreated)
    {
        scrolling = true;
        SendMessage(Buddy.Handle, m.Msg, m.WParam, m.LParam);
        scrolling = false;
    }
}

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-02T09:38:16.593

我有类似的任务。必须在彼此旁边显示他们的项目的两个列表。

我在 Iorn Man 的回答中找到了这个线程，这对我来说太难了，因为我没有足够的 C# 经验。

我找到了一个更简单的解决方案。我在表单中添加了一个计时器。对于它的滴答事件，我添加了这个：

```
Form active_form = Form.ActiveForm;
if (active_form == null) return;
Control control = Form.ActiveForm.ActiveControl;
if (control == newFilesList)
{
  Sync_lists(newFilesList);
}
else
{
  Sync_lists(oldFilesList);
} 
```

它检查哪个列表处于活动状态，并以此列表作为参数调用 Sync_list 例程。

```
private void Sync_lists(ListView sender)
    {
        if ((newFilesList.Items.Count > 0) && (oldFilesList.Items.Count > 0))
        {
            int cur_top_index = sender.TopItem.Index;
            ListViewItem future_top_item;
            if (sender == oldFilesList)
            {
                future_top_item = newFilesList.Items[cur_top_index];
                newFilesList.TopItem = future_top_item;
            }
            else
            {
                future_top_item = oldFilesList.Items[cur_top_index];
                oldFilesList.TopItem = future_top_item;
            }
        }
    } 
```

它只是获取基本列表的 TopItem 属性，并将具有相同索引的项目设置为另一个列表的顶部。

它不像自定义 ListView 那样正确。但是稍微简单一点。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:19:00.900

您也可以仅使用托管代码在[Better ListView](http://www.componentowl.com/better-listview)或[Better ListView Express中执行此操作：](http://www.componentowl.com/better-listview-express)

```
public class CustomListView : BetterListView
{
    public void SynchronizeScroll(BetterListView listView)
    {
        VScrollBar.Value = listView.VScrollProperties.Value;
    }
} 
```

然后用这样的东西处理它的 VScrollPropertiesChanged 事件：

```
 private void ListViewVScrollPropertiesChanged(object sender, BetterListViewScrollPropertiesChangedEventArgs eventArgs)
    {
        CustomListView listViewThis = (sender as CustomListView);

        listViewThis.SynchronizeScroll(this.listViewAnother);
    } 
```

# mysql - 从 MySQL 中的多个匹配行中选择正确的行

> ID：14726147
> 
> 赞同：0
> 
> 时间：2013-02-06T09:59:03.627
> 
> 标签：mysql, group-by, inner-join

我有以下问题：

## 设想：

我已经重组了表结构以指示问题并隐藏不相关的细节。

假设我有一个项目表。

```
Item: item_id | buyer_id | unit_id | status_id 
```

所有列都具有引用相应表的非空值。

我拥有的其他表是具有以下结构的价格目录：

```
Price: price_id | buyer_id | unit_id | status_id | price 
```

这里任何参考值都可以具有值“-1”，意思是“全部”。所以我们可以在价格表中有以下行：

```
| price_id | buyer_id | unit_id | status_id | price |
|        1 |       -1 |       1 |         2 |    15 |
|        2 |        1 |       1 |         2 |    25 |
|        3 |       -1 |      -1 |         3 |    13 | 
```

在这里，*价格 1*将匹配具有任何购买者 ID 和 的项目，`unit_id = 1`价格*2*`status_id = 2`将匹配具有和的数学项目。*价格 3*将匹配带有 any 、 any和的项目。*`buyer_id = 1``unit_id = 1``status_id = 2`*`buyer_id``unit_id``status_id = 3`**

 **如果有多个价格与一个项目匹配，则使用以下逻辑完成选择：获取指定字段最多的价格（-1 值的最少数量）。如果有多个价格具有相同数量的 -1 值，那么我们会在`buyer_id`. 如果不存在，我们会选择一个值为“not -1”的`unit_id`，最后一个值为“not -1”的状态。

我们可以假设没有多个价格与完全相同的价格组匹配（所有价格都有唯一的`buyer_id`,`unit_id`和组合`status_id`。）

## 问题：

现在**我需要进行查询，为**项目表中的每个项目选择正确的价格。到目前为止，我得到了这个：

```
选择 item_id，价格
来自项目
    INNER JOIN 价格 ON 1=1
        AND（price.buyer_id = item.buyer_id 或 price.buyer_id = -1）
        AND (price.unit_id = item.unit_id 或 price.unit_id = -1)
        AND（price.status_id = item.status_id 或 price.status_id = -1）

```

基本上这将获得所有匹配的价格。因此，如果我们有带有 的项目，`buyer_id = 1`我们将得到两行：`unit_id = 1``status_id = 2`

```
| item_id | 价格 |
| 1 | 15 |
| 1 | 25 |

```

我的第一个想法是使用`GROUP BY`，但我还没有弄清楚如何做到这一点，以便选择的价格是正确的，而不仅仅是随机/第一个（？）一个。

编辑：尝试对行进行排序（`ORDER BY buyer_id DESC, unit_id DESC, status_id DESC`），然后根据排序的子查询对结果进行分组，但似乎 order by 不起作用。

**那么如何选择正确的行`GROUP BY`呢？或者，通过单个查询（子查询很好）获得正确价格的替代解决方案是什么？**

在这种特殊情况下，改变表结构并不是一个真正的选择。

## 更新

我一直在使用我之前提交[的解决方案](https://stackoverflow.com/a/15533972/668194)，但是选择价格的标准数量从三个增加到五个。这意味着我目前在我的`CASE WHEN`结构中有一个包含 32 种不同组合的列表。如果我需要添加另一个列表，列表将再次翻倍，所以我仍在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:25:40.167

目前问题已解决如下。它完成了这项工作，至少在特定情况下执行得足够快，但我希望存在更好的解决方案。现在这就是诀窍。

因为我有一小部分可能的组合，所以相对容易形成一个`CASE`子句来为每个组合提供数值来表示不同组合的顺序。接下来，我们将为每个 item_id 选择具有最小选择器值的行。这是通过[加入简单的组标识符 max-value-in-group Sub-query 来](https://stackoverflow.com/a/7745635/668194)完成的。这是一个演示该想法的查询：

```
SELECT item_id, price
FROM (
    SELECT item_id, price,
        CASE
            WHEN price.buyer_id <> -1 AND price.unit_id <> -1 AND price.status_id <> -1 THEN 1
            WHEN price.buyer_id <> -1 AND price.unit_id <> -1 AND price.status_id =  -1 THEN 2
            WHEN price.buyer_id <> -1 AND price.unit_id =  -1 AND price.status_id <> -1 THEN 3
            WHEN price.buyer_id <> -1 AND price.unit_id =  -1 AND price.status_id =  -1 THEN 4
            WHEN price.buyer_id =  -1 AND price.unit_id <> -1 AND price.status_id <> -1 THEN 5
            WHEN price.buyer_id =  -1 AND price.unit_id <> -1 AND price.status_id =  -1 THEN 6
            WHEN price.buyer_id =  -1 AND price.unit_id =  -1 AND price.status_id <> -1 THEN 7
            WHEN price.buyer_id =  -1 AND price.unit_id =  -1 AND price.status_id =  -1 THEN 8
        END AS selector
    FROM item
        INNER JOIN price ON 1=1
            AND (price.buyer_id = item.buyer_id OR price.buyer_id = -1)
            AND (price.unit_id = item.unit_id OR price.unit_id = -1)
            AND (price.status_id = item.status_id OR price.status_id = -1) 
    ) AS all_possible_prices

    INNER JOIN (
    SELECT item_id, MIN(selector)
    FROM (
        SELECT item_id
            CASE
                WHEN price.buyer_id <> -1 AND price.unit_id <> -1 AND price.status_id <> -1 THEN 1
                WHEN price.buyer_id <> -1 AND price.unit_id <> -1 AND price.status_id =  -1 THEN 2
                WHEN price.buyer_id <> -1 AND price.unit_id =  -1 AND price.status_id <> -1 THEN 3
                WHEN price.buyer_id <> -1 AND price.unit_id =  -1 AND price.status_id =  -1 THEN 4
                WHEN price.buyer_id =  -1 AND price.unit_id <> -1 AND price.status_id <> -1 THEN 5
                WHEN price.buyer_id =  -1 AND price.unit_id <> -1 AND price.status_id =  -1 THEN 6
                WHEN price.buyer_id =  -1 AND price.unit_id =  -1 AND price.status_id <> -1 THEN 7
                WHEN price.buyer_id =  -1 AND price.unit_id =  -1 AND price.status_id =  -1 THEN 8
            END AS selector
        FROM item
            INNER JOIN price ON 1=1
                AND (price.buyer_id = item.buyer_id OR price.buyer_id = -1)
                AND (price.unit_id = item.unit_id OR price.unit_id = -1)
                AND (price.status_id = item.status_id OR price.status_id = -1) ) AS min_seeds
    GROUP BY item_id
    ) AS min_selectors ON all_possible_prices.item_id = min_selectors.item_id 
                            AND all_possible_prices.selector = min_selectors.selector 
```**

# gwt - 在 gwt 的装饰性弹出面板中居中元素

> ID：14726149
> 
> 赞同：0
> 
> 时间：2013-02-06T09:59:12.403
> 
> 标签：gwt, uibinder, gwt2

![](../Images/4b082e5835476c50c86afbfe35af9ab7.png)

弹出窗口是一个装饰性弹出窗口，其中的文本是一个标签，关闭是一个按钮。我已将标签和按钮添加到水平面板，然后将其添加到弹出面板。我已经尝试过 invalidEntryVpanel.setVerticalAlignment(HasVerticalAlignment.ALIGN_MIDDLE); invalidEntryVpanel.setHorizo​​ntalAlignment(HasHorizo​​ntalAlignment.ALIGN_CENTER);

但仍然无法将其对齐在中心请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:11:08.730

像这样试试

您必须在设置后添加小部件`align center`

```
VerticalPanel vpnPanel = new VerticalPanel();
        vpnPanel.add(scrollPanel);   //all controls added to scrill panel with help of set widget 
        vpnPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER);
        HorizontalPanel btnLayoutPanel = new HorizontalPanel();
        btnLayoutPanel.setSpacing(10);
        btnLayoutPanel.add(closeButton);
        vpnPanel.add(btnLayoutPanel);
        decPopuppanel.setWidget(vpnPanel); 
```

# unix - 需要运行应用程序才能使 dbus_g_proxy_new_for_name 工作？

> ID：14726150
> 
> 赞同：3
> 
> 时间：2013-02-06T09:59:12.943
> 
> 标签：unix, glib, dbus

我可以在没有实现 D-Bus 方法的应用程序启动并运行的情况下调用 dbus_g_proxy_new_for_name 吗？我不确定这样做是否是好的做法，或者是否是通常的做法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T01:10:07.057

在我回答之前，我想指出**[DBus-GLib 已弃用](http://www.freedesktop.org/wiki/Software/DBusBindings)**。但是，答案也适用于[g_dbus_proxy_new](http://developer.gnome.org/gio/stable/GDBusProxy.html#g-dbus-proxy-new)（它基本上是[dbus_g_proxy_new_for_name](http://dbus.freedesktop.org/doc/dbus-glib/dbus-glib-DBusGProxy.html#dbus-g-proxy-new-for-name)的替代品）。

是的。[dbus_g_proxy_new_for_name](http://dbus.freedesktop.org/doc/dbus-glib/dbus-glib-DBusGProxy.html#dbus-g-proxy-new-for-name)讨论了所有者如何随时间变化，尽管它没有明确提到调用时没有所有者的情况（最初强调）：

> 名称所有者可能会随着时间而改变，例如在两个不同的方法调用之间，除非名称是唯一的名称。如果需要固定所有者，则需要请求当前所有者并将代理绑定到其唯一名称而不是通用名称；参见 dbus_g_proxy_new_for_name_owner()。

将其与 D-Bus 激活一起使用实际上很常见。查看[Raphaël Slinckx 的 DBus 激活教程](http://raphael.slinckx.net/blog/documents/dbus-tutorial)的“客户端实现”部分。它包括这个片段（注意评论）：

```
/* This won't trigger activation! */
proxy = dbus_g_proxy_new_for_name (connection,
        "org.gnome.ServiceName",
        "/org/gnome/ServiceName",
        "org.gnome.ServiceName");

/* The method call will trigger activation, more on that later */
if (!org_gnome_ServiceName_echo_string (proxy, "The string we want echo-ed", &result, &error))
{
    /* Method failed, the GError is set, let's warn everyone */
    g_warning ("Woops remote method failed: %s", error->message);
    g_error_free (error);
    return;
} 
```

D-Bus 激活甚至在调用方法之后才被触发，因此显然该名称在此之前不一定存在。

# mysql - 大量非常简单的 sql 查询会影响性能吗？

> ID：14726151
> 
> 赞同：2
> 
> 时间：2013-02-06T09:59:14.370
> 
> 标签：mysql, sql, performance, database-performance

我有搜索过滤器。每个过滤器/属性都有我需要显示的自己的值。

```
<?php foreach(getAdditionalFilters() as $attributeName => $filterData): ?>
<ul>
  <?php showLiCheckBoxes($attributeName); ?>
</ul>     
<?php endforeach; ?> 
```

有两种显示过滤器的方法：

1.

```
function showLiCheckBoxes($attribute,$checked=null){
    $CI = get_instance();
    $CI->load->model('helper_model');
    $allAttrOptions = $CI->helper_model->getAttrOptions($attribute);
    foreach($allAttrOptions as $key => $option){         
      //print html of inputs like <li><input type='checkox' value='{$option['optionId']}...
    };    
}

function getAttrOptions($attrCode){
      $sql = "SELECT option_id as optionId, label FROM eav_attribute_option
              INNER JOIN eav_attribute USING(attr_id)
              WHERE code='$attrCode'";
      $query = $this->db->prepare($sql);        
      $query->execute(); 
      $query->setFetchMode(PDO::FETCH_ASSOC);
      return $query->fetchAll();      
} 
```

2.

```
function showLiCheckBoxes($attribute,$checked=null){
    foreach(Attributes::${$attribute} as $key => $value){        
      //print html of inputs like <li><input type='checkox' value='{$option['optionId']}...
    };    
}

class Attributes 
{  

    public static $education        = array(0 => 'No answer', 
                                            1 => 'High school',
                                            2 => 'Some college',
                                            3 => 'In college',
                                            4 => 'College graduate',
                                            5 => 'Grad / professional school',                                    
                                            6 => 'Post grad');   
     public static $... 
```

因此，在第一种方式中，属性选项存储在数据库中，正如您所见，每个属性都会进行**额外的查询**。在第二种方式中，属性选项存储在数组中。

我不是在问哪种方式是正确的，因为这里没有写其他一些事实。我要问的是，如果对只有 500 行的表 eav_attribute_option 的 20 个额外非常简单的查询会对性能产生任何影响。我应该关心它还是我在这里写的查询如此简单并且表格如此之小以至于它根本不会产生任何影响？

当然，我也可以使用 1 个查询来完成此操作，但这不再是问题了。我在问自己对 sql server 的这么多额外请求是否是一件坏事，而不是查询本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:24:39.420

一般来说，在您真正遇到问题之前，我不会担心性能。客户反馈可能会在性能成为问题之前很久就提示您重写函数。

话虽如此，RBAR（[逐行痛苦](http://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/)）是数据库的经典性能问题。到数据库的往返可能很昂贵（特别是如果数据库位于不同的服务器上。）这会让您无法控制加载客户，包括他们的所有订单，这些订单中的所有产品，以及这些产品的属性. 在一个微不足道的查询中；每个实体一个查询，这是一场性能灾难。

因此，如果您可以在不做大量工作的情况下避免 RBAR，那么您最好避免使用 RBAR。由于您已经写出了这两种情况，因此选择查询较少的情况不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:05:50.060

您必须对其进行分析以了解您的场景是否需要太长时间。

无论返回的行数如何，每个查询都有开销。
因此，一般而言，一个返回 20 行的查询优于 20 个每个返回一行的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:57:33.620

查询属于经典的 I/O 问题——正如其他人所提到的，与应用程序不同的服务器上的数据库可以（并且很可能会）增加响应时间。还有物理 I/O 的问题 - 如果数据被频繁或最近访问，则查询返回的结果集可能会被缓存，但如果不是，则有 db 服务器的响应时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T06:56:54.720

由于上下文切换开销，额外的查询会降低性能（是的，在这种情况下，一个返回 20 行的查询优于 20 个每个返回一行的查询）。

如果这些查询经常运行，如果它们是可缓存的，它将大大加快速度。

# android - Android onPause 和 onResume 方法

> ID：14726153
> 
> 赞同：-3
> 
> 时间：2013-02-06T09:59:16.760
> 
> 标签：android

我正在尝试实现`onPause()`，`onResume()`这样当我退出活动时，我的文本视图中的文本仍然存在，但是`"null"`当我开始活动时它会显示，请协助！

```
 @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        etPassenger.setText(""+ gotPassenger );
        etStaffNumber.setText("" + gotStaffNumber);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        etPassenger.setText(""+ gotPassenger );
        etStaffNumber.setText("" + gotStaffNumber);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:03:01.477

我认为`gotPassenger`and `gotStaffNumber`vars 是空的——如果你想保存它们而不是你必须使用首选项或将它们保存到某个包中以便以后恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:16:50.247

当您离开活动时，您将丢失存储在 gotPassenger 和 gotStaffNumber 中的数据。
如果您想在退出应用程序后重用它们，您必须先使用`SharedPreferences`它们来保存它们，然后在您回来时检索它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:16:15.920

当您最小化您的活动时，您的变量变为空。在您的活动中添加以下代码，

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState)
{
savedInstanceState.putString("gotPassenger",gotPassenger);
savedInstanceState.putString("gotStaffNumber",gotStaffNumber);
} 
```

并且，在您的 onCreate() 方法中，添加以下内容，

```
if(savedInstanceState!=null)
{
etPassenger.setText(savedInstanceState.getString("gotPassenger"));
etStaffNumber.setText(savedInstanceState.getString("gotStaffNumber"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T16:46:01.847

如果您想在关闭应用程序时保存数据，则需要使用`sharedPreferences`. [以下是](https://stackoverflow.com/a/3624358/2649104)你如何使用它们

# java - Java JPS 工具不工作

> ID：14726155
> 
> 赞同：2
> 
> 时间：2013-02-06T09:59:23.077
> 
> 标签：java, hadoop

我正在尝试使用 JPS 工具（Java 进程监控工具）

我的 ubuntu-12.04 机器我的配置上有 Oracle jdk1.6。

```
$ java -version
java version "1.6.0_39"
Java(TM) SE Runtime Environment (build 1.6.0_39-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode)

$ echo $PATH
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/bin:/usr/bin/java:/usr/lib/jvm/jdk1.6.0_39

$ cat /etc/environment 
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
JAVA_HOME="/usr/lib/jvm/jdk1.6.0_39"

$ jps
The program 'jps' can be found in the following packages:
 * openjdk-6-jdk
 * openjdk-7-jdk
Try: sudo apt-get install <selected package> 
```

我想使用 oracle-jdk 而不是 open-jdk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:56:13.187

使用这个命令

```
export PATH=$PATH:/usr/lib/jvm/jdk1.6.0_39/bin 
```

`jps`然后在同一个 shell 中尝试命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T08:34:26.850

如果您在 .bashrc 中导出了 java/bin 路径，请尝试重新加载 .bashrc 文件类型

> $> 光盘 $HOME
> 
> $> 。.bashrc

然后尝试回显路径。它应该包括 java/bin 文件夹。

> $> 回显 $PATH

它应该解决问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T15:26:03.357

我有和你一样的问题。起初我在我的机器上安装了 Java 1.7，然后我安装了 Java 1.6。

当我检查这个文件夹时，我发现没有`jps`

```
/usr/lib/jvm/java-6-openjdk-i386/bin 
```

所以我卸载了 Java 1.7（通过 Synaptic 包管理器），然后重新安装了 Java 1.6。之后，我可以看到`jps`里面的`/usr/lib/jvm/java-6-openjdk-i386/bin`文件夹。我可以`jps`再次使用。

我希望它会有所帮助。这是我在 Stack Overflow 上的第一个答案，所以请不要投反对票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-07T14:24:59.373

我通过`/etc/profile`在环境变量之后添加一个shell别名来解决它：

```
alias jps='/usr/jdk/bin/jps' 
```

现在可以了。

# r - 在条形图和线的组合图中缩放辅助 y 轴

> ID：14726156
> 
> 赞同：0
> 
> 时间：2013-02-06T09:59:24.330
> 
> 标签：r

我制作了一个图表，其中结合了条形图和折线图。问题是我的辅助 y 轴的比例不是它应该的样子。

这是我使用的代码：

```
barplot <- barplot(covpatient[[1]]$cov, names.arg = covpatient[[1]]$exon, xlab = covpatient[[1]]$gene[1] , ylab = "read depth" , border = gray.colors(length(unique(covpatient[[1]]$exon)))[as.factor(covpatient[[1]]$exon)])
par(new = TRUE)
lines(x = barplot, y = covpatient[[1]]$amplicon, bty = "n")
axis(side = 4, at = pretty(range(covpatient[[1]]$amplicon))) 
```

这就是我的情节的样子：![阴谋](../Images/2c243343aafd659e0fd73b0416246b77.png)

线图的值没问题，但您会看到 y 轴没有完全展开。我希望它看起来与左侧的 y 轴相同

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:21:54.427

如果没有可重复的示例和明确的问题，所有答案充其量只是猜测，但请查看以下内容：

```
x <- 1:10
y <- c(1, 3, 5, 6, 2, 7, 11, 3, 2, 13)
z <- runif(10, min=1000, max=10000) 

par(mar = c(5, 4, 4, 4) + 0.3) 
barplot(y, col=rainbow(length(x)))
par(new = TRUE)
plot(x, z, type = "l", axes = FALSE, bty = "n", xlab = "", ylab = "")
axis(side=4, at = pretty(range(z)))
mtext("z", side=4, line=3)

library(plotrix)
twoord.plot(x,y,x,z,
    xlab="x",
    ylab="y",
    rylab="z",
    main="Main",
    type=c("bar","l"),lcol=rainbow(length(x)),rcol=4) 
```

# android - Android：通过java代码添加图片

> ID：14726157
> 
> 赞同：0
> 
> 时间：2013-02-06T09:59:25.790
> 
> 标签：android, image, parsing, textview

我试图通过java在textView之前显示一个名为phone.png的图像。让我解释得更好。

```
 ((TextView) view.findViewById(android.R.id.text1)).setText(new StringBuilder(timeFormat.format(new Date(date))).append(DASH).append(context.getString(SimpleParser.getTranslatedParserName(filename))));
    return view;
} 
```

**这部分代码将解析预定义目录中的文件并将结果显示为 CURRENTTIME - FILEPREFIX**

因此，假设脚本只是查看 4 FILEPREFIX (test1_12456.zip test2_12456.zip test3_12456.zip test4_12456.zip) 是否可以在“CURRENTTIME”之前显示分配给每个前缀的图像？如果前缀是 test1，结果将是：Test1Image CURRENTTIME - TEST1

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:38:39.680

如果要从可绘制文件夹加载图像，可以使用：

```
ImageView imgView=(ImageView) findViewById(R.id.imgView);
Drawable  drawable  = getResources().getDrawable(R.drawable.img);
imgView.setImageDrawable(drawable); 
```

对于在 textview 中显示图像，您可以创建一个`spannableString`并将图像放置在`TextView`. 或者你可以使用

```
ImageSpan is = new ImageSpan(context, resId);
text.setSpan(is, index, index + strLength, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:36:27.743

您可以将 textview 添加到 tablerow。在添加 textview 之前，您可以添加一个 imageView 并执行以下操作：

```
imageView.setIcon(someImage); 
```

它看起来像：

```
<TableLayout>
    <TableRow>
        <ImageView />
        <TextView />
    <TableRow>
<TableLayout> 
```

您可以动态添加 tableRows。

# java - 使用 Spring JPA 的多个 PersistenceUnits 和 DataSources

> ID：14726161
> 
> 赞同：1
> 
> 时间：2013-02-06T09:59:30.640
> 
> 标签：java, spring, jpa, spring-data-jpa

我知道关于我的主题已经有很多问题，但我对任何答案都没有真正完全满意。在网上也很难找到像样的信息，所以我开始提出一个新问题。

基本上，我正在努力解决如何在 Spring 应用程序中最好地使用 JPA 来满足必须符合以下要求的场景：

*   使用 Spring 事务管理
*   使用多个持久性单元（支持 Spring Data Repository）
*   使用多个数据源（我希望能够在运行时动态切换 PersistenceUnit 的数据源）
*   将应用程序的各个部分（包括 JPA 实体）组合到单独的模块中，以便在不同的项目中使用它们

考虑以下用例

*   应用程序 A 允许用户从不同的 DataSource、D1、D2、Dn 读取和写入 DB 数据。我只需要一个 PersistenceUnit P1 来定义所需的实体
*   模块 M 包含两个实体 AuthUser 和 AuthRole，用于存储用户和权限信息。我想在不同的项目中模块化使用它。基本上，我需要能够定义仅包含两个实体和一个 DataSource Da 的 PersistenceUnit P2，因为用户存储在一个数据库中，独立于应用程序访问的其他 DataSources D1、D2、...。
*   应用程序 A 包括模块 M 并定义它应该使用哪个数据源

我遇到的问题：

*   我想在模块 M 中使用 @PersistenceContext 和 @Transactional，而不必到处指定显式的 persistenceUnits 或 transactionManagers。理想情况下，Spring 将使用正在运行的事务的 PersistenceContext / EntityManager。这样，我将在应用程序 A 的事务方法中指定所需的 PersistenceUnit，模块 M 将继承事务和 PersistenceContext。我找不到如何做到这一点的解决方案。我正在考虑提供一个自定义的 PersistenceAnnotationBeanPostProcessor，但我在网上找不到关于这个主题的任何资源。
*   为了使用具有相同 PersistenceUnit 的多个 DataSource，我查看了 AbstractRoutingDatatSource。这应该可以工作，即使我对它如何与 Transactional 注释合作持怀疑态度。关于使用它以及如何防止在事务中间更改数据源的任何经验？

我希望我能把我的观点说清楚。我不想在第一个实例中包含太多代码，我对概念答案比技术答案更感兴趣。将其归结为一个（大）句子：

**Spring / JPA 中使用多个 PersistenceUnits 和 DataSources 构建模块化事务应用程序的最佳实践是什么，而无需在源代码（尤其是模块）中指定硬编码的持久性信息（如 persistenceUnit 名称）？**

# iphone - 如何避免 UIPickerView 顶部的间隙

> ID：14726167
> 
> 赞同：2
> 
> 时间：2013-02-06T09:59:58.970
> 
> 标签：iphone, ios, objective-c

如图所示，我面临 UIPickerView 的问题。如您所见，顶部有间隙。我想消除该间隙。任何人都知道解决方案。非常感谢您的帮助。提前致谢

![在这张图片中](../Images/9c13f64eeaa6fec857b0301a17c8b2e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:10:36.977

尝试这样的事情： -

```
[Picker addTarget:self action:@selectorAction) forControlEvents:UIControlEventValueChanged];
    UIView *view = [[Picker subviews] objectAtIndex:0];
    [view setBackgroundColor:[UIColor clearColor]];
    [[[view subviews] objectAtIndex:0] setHidden:YES];
    [[[view subviews] lastObject] setHidden:YES]; 
```

您可以将选取器添加到视图并从中创建子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:04:13.437

只有一种方法可以避免 UIPickerView 的间隙顶部

更改选择器的框架。像这样。

```
smallerPicker = [[UIPickerView alloc] init];
smallerPicker.frame = CGRectMake(0.0, 0.0, 320.0, 165.0) 
```

或者

```
smallerPicker.transform = CGAffineTransformMakeScale(.5, 0.5); 
```

比如改变选择器的比例

# java - 安卓提醒

> ID：14726177
> 
> 赞同：0
> 
> 时间：2013-02-06T10:00:27.147
> 
> 标签：java, android

我是 android 编程新手，我正在开发提醒应用程序。现在，我已经将包括日期和时间在内的所有信息存储到 SQLlite 数据库中。我的问题是如何将存储在数据库中的警报与 android 上的当前时间相匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:03:58.307

查询数据库与日历比较

```
Calendar c = Calendar.getInstance();
c.set(Calendar.MONTH, Calendar.MARCH);
c.set(Calendar.DAY_OF_MONTH, 3);
long time2=   c.getTimeInMillis();
c.set(Calendar.MONTH, Calendar.AUGUST);
  c.set(Calendar.DAY_OF_MONTH, 8);   
   long time3=   c.getTimeInMillis();
   if(time>time2){
 //Logic
 if(time>time3){
     //Logic
 }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:04:05.023

您需要做的是首先创建您需要安排的意图。然后获取该意图的pendingIntent。您可以安排活动、服务和广播。要安排活动，例如 MyActivity：

```
 Intent i = new Intent(getApplicationContext(), MyActivity.class);
  PendingIntent pi = PendingIntent.getActivity(getApplicationContext(),3333,i,
  PendingIntent.FLAG_CANCEL_CURRENT); 
```

将此pendingIntent 交给alarmManager：

```
//getting current time and add 5 seconds in it
  Calendar cal = Calendar.getInstance();
  cal.add(Calendar.SECOND, 5);
  //registering our pending intent with alarmmanager
  AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
  am.set(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(), pi); 
```

现在 MyActivity 将在应用程序启动 5 秒后启动，无论您停止应用程序还是设备进入睡眠状态（由于 RTC_WAKEUP 选项）。您可以阅读完整的示例代码[调度活动、服务和广播#Android](http://www.sohailaziz.com/2012/06/scheduling-activities-services-and.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:39:45.163

或倒计时而不是使用日历或相对电话时间..自己做了一个类似的应用程序，它似乎减少了由于电话时间关闭或重置等而导致的可变性......

# sql - 数据库将读取但不会写入

> ID：14726178
> 
> 赞同：1
> 
> 时间：2013-02-06T10:00:27.853
> 
> 标签：sql, database, vb.net, visual-studio-2008

我有一个问题，我无法预订 Sql 服务器 .mdf 数据库，但我可以读取它。

没有出现错误消息，我已经尝试了我能想到的一切。任何帮助将不胜感激，并在此先感谢！下面是用于插入命令的代码：

```
 Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim SQLCode As New SQLCode
    Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Dim lrd As SqlDataReader
    Dim inscmd As New SqlCommand

    cmd.Parameters.AddWithValue("@StaffInitials", lblStaffInitials.Text.Trim())
    lblStaffInitials.Text = lblStaffInitials.Text
    cmd.Parameters.AddWithValue("@Week", lblWeek.Text.Trim)
    lblWeek.Text = lblWeek.Text
    cmd.Parameters.AddWithValue("@Period", (lblPeriod.Text.Trim))
    lblPeriod.Text = lblPeriod.Text
    cmd.Parameters.AddWithValue("@Day", lblDay.Text.Trim)
    lblDay.Text = lblDay.Text
    cmd.Parameters.AddWithValue("@Subject", lblSubject.Text.Trim)
    lblSubject.Text = lblSubject.Text
    cmd.Parameters.AddWithValue("@YearGroup", lblYear.Text.Trim)
    lblYear.Text = lblYear.Text
    cmd.Parameters.AddWithValue("@NumberOfPupils", (lblNoOfPupils.Text.Trim))
    lblNoOfPupils.Text = lblNoOfPupils.Text
    cmd.Parameters.AddWithValue("@ControlledAssesment", lblControlledAssesment.Text.Trim)
    lblControlledAssesment.Text = lblControlledAssesment.Text
    cmd.Parameters.AddWithValue("@Room", lblRoom.Text.Trim)
    lblRoom.Text = lblRoom.Text
    cmd.Parameters.AddWithValue("@Session", txtSession.Text.Trim)
    txtSession.Text = txtSession.Text

con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("RoomBookingSystem.My.MySettings.Database1ConnectionString1").ConnectionString
    Try
        Using cn As New SqlConnection(con.ConnectionString)
            con.Open()
            inscmd.CommandText = "INSERT INTO Booking (Week, Day, Period, Subject, YearGroup, StaffInitials,NumberOfPupils,Session,Room,ControlledAssesment) VALUES (@Week,@Day,@Period,@Subject,@YearGroup,@StaffInitials, @NumberOfPupils,@Session,@Room,@ControlledAssesment)"
            inscmd.Connection = con
            inscmd.ExecuteNonQuery()
            inscmd.Parameters.Clear()
        End Using

    Finally
        con.Close()
    End Try
    MsgBox("Your Booking Has Been Made Successfully")
    Clicky = False
    MainViewForm.btnBackToBooking.Visible = False
    FormView.Show()
    Me.Hide()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:25:13.107

当只`SqlCommand`需要一个时，您有两个不同的 Sql 命令。将参数添加到`inscmd`而不是`cmd`.

所以只需删除这一行：

```
Dim cmd As New SqlCommand 
```

其余的都这样做：

```
inscmd.Parameters.AddWithValue("@StaffInitials", lblStaffInitials.Text.Trim())
.....
..... 
```

另一件需要注意的事情，你不需要这个：

```
Using cn As New SqlConnection(con.ConnectionString) 
```

像这样更改您的代码：

```
Try
 con.Open()
 inscmd.CommandText = "INSERT INTO Booking (Week, Day, Period, Subject, YearGroup, StaffInitials,NumberOfPupils,Session,Room,ControlledAssesment) VALUES (@Week,@Day,@Period,@Subject,@YearGroup,@StaffInitials, @NumberOfPupils,@Session,@Room,@ControlledAssesment)"
 inscmd.Connection = con
 inscmd.ExecuteNonQuery()
 inscmd.Parameters.Clear()

 Catch ex As Exception
     // use message box to read the error (if there is any). or simply read the
     // ex.Message in debuggin mode.
 Finally
     con.Close()
 End Try 
```

顺便说一句，我看不到您在哪里设置此属性`con.ConnectionString`。你的连接字符串在哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:22:28.670

据我所知，问题出在数据库位置。

当程序被调试时**，您的数据库副本**被放置在 bin/debug 文件夹中，如果您查看此处，您将看到该副本并且您的代码将直接访问该数据库而**不是原始数据库** *（如果您单击显示所有文件然后转到 bin/debug 文件，然后使用数据库资源管理器打开，您可以看到上次调试/运行时估算的数据）*

要解决此问题，您需要执行以下操作：

你的连接字符串

```
 con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("RoomBookingSystem.My.MySettings.Database1ConnectionString1").ConnectionString 
```

将连接到前面提到的 bin 文件夹中的数据库。

您需要进入您的**app.config**文件找到数据库的特定位置并将其用于连接字符串，这将允许您从数据库的非副本中插入/更新数据。

# javascript - 用于创建离散和三角形分布的 JS 模拟框架

> ID：14726180
> 
> 赞同：1
> 
> 时间：2013-02-06T10:00:32.683
> 
> 标签：javascript, frameworks, open-source, simulation

我需要一个开源的 Javascript 模拟框架。借助仿真框架可以创建概率分布：

1.  正态分布
2.  离散分布
3.  三角分布

使用[jstat 框架](http://www.jstat.org/)我只能创建正态分布。

Javascript中是否有更好的模拟框架？或者如何使用 jstat 创建离散和三角形分布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:43:05.963

看看[SIM.JS 随机库](http://simjs.com/random.html)。它具有正态分布和三角分布，而离散可以使用特殊算法来模拟，例如 Alastair Walker 在他的论文“一种生成具有一般分布的离散随机变量的有效方法”中描述的方法（但它似乎无法供公众访问）。

# javascript - 全屏悬停注册框——如在 squarespace 上所见

> ID：14726189
> 
> 赞同：0
> 
> 时间：2013-02-06T10:01:04.133
> 
> 标签：javascript

我喜欢[http://www.squarespace.com/templates/?q=minsk](http://www.squarespace.com/templates/?q=minsk)的注册过程——当你点击“使用这个模板开始”时，整个视口都被接管了，注册框显示向上。

有谁知道已经做了类似的事情的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:47:07.027

您可以使用简单的 javascript 轻松完成。

HTML：

```
<div id="trigger">Click to open</div>
<div id="overlay"></div>
<div id="login">
    <h1>title</h1>
    <form action="/login" method="POST">
        <label>Username:
            <input type="email" name="username" />
        </label>
        <label>Password:
            <input type="password" name="pass" />
        </label>
        <button>Login</button>
    </form>
</div> 
```

CSS：

```
#overlay, #login {
    display: none;
}
#overlay {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    background: black;
    opacity: 0.7;
    filter:alpha(Opacity=70);
    z-index: 999;
}
/* Change styles as you like beyond here, make sure the z-index of #login be always higher than #overlay */
#login {
    position:fixed;
    top: 5%;
    left: 35%;
    width: 30%;
    height: 50%;
    background: #555;
    padding: 5px;
    color:white;
    z-index: 1000;
}
#login h1 {
    margin: 0.5em 0;
}
#login form input {
    width: 90%;
    padding: 5px;
}
#trigger {
    width: 100px;
    padding: 5px;
    background: #ccc;
} 
```

Javascript（jQuery）：

```
$(function(){
    $('#trigger').click(function(){
        $('#login').fadeIn(500);
        $('#overlay').fadeIn(500);
    });
    $('#overlay').click(function(){
        $('#login').fadeOut(500);
        $('#overlay').fadeOut(500);
    });
}); 
```

您可以单击覆盖以退出窗口。

看[例子](http://jsfiddle.net/licson0729/R9ACe/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:32:34.580

这称为**模态窗口**。[**您可以使用jQuery**](http://jquery.com)或 JavaScript来实现它。作为一个简单的开始，您可以查看[Queness](http://www.queness.com/)的[Simple jQuery Modal Window Tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)提供的教程。

代码非常简单。首先，您必须构建您的**HTML**。

```
<!-- #dialog is the id of a DIV defined in the code below -->
<a href="#dialog" name="modal">Simple Modal Window</a>

<div id="boxes">

    <!-- #customize your modal window here -->

    <div id="dialog" class="window">
        <b>Testing of Modal Window</b> | 

        <!-- close button is defined as close class -->
        <a href="#" class="close">Close it</a>

    </div>

    <!-- Do not remove div#mask, because you'll need it to fill the whole screen -->    
    <div id="mask"></div>
</div> 
```

一些用于演示外观的**CSS 。**

```
/* Z-index of #mask must lower than #boxes .window */
#mask {
  position:absolute;
  z-index:9000;
  background-color:#000;
  display:none;
}

#boxes .window {
  position:fixed;
  width:440px;
  height:200px;
  display:none;
  z-index:9999;
  padding:20px;
}

/* Customize your modal window here, you can add background image too */
#boxes #dialog {
  width:375px; 
  height:203px;
} 
```

最后，用于交互的**JavaScript 。**

```
$(document).ready(function() {  

    //select all the a tag with name equal to modal
    $('a[name=modal]').click(function(e) {
        //Cancel the link behavior
        e.preventDefault();
        //Get the A tag
        var id = $(this).attr('href');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000); 

    });

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();
        $('#mask, .window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });         

}); 
```

您可以在[**Queness WebBlog**](http://www.queness.com/resources/html/modal/jquery-modal-window.html)的 Simple jQuery Modal Window Examples 中看到该项目的**工作演示**。单击该页面上的链接。[](http://www.queness.com/resources/html/modal/jquery-modal-window.html)**`Simple Window Modal`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T00:59:10.067

在寻找我遇到的类似情况时遇到了这个问题。我有一段自定义 javascript 代码用于我的 SS6 网站。您必须原谅我，因为我是设计师而不是开发人员。

有问题的网站：http: [//tentenbtc.com](http://tentenbtc.com)

目前，在用户点击“Count Me In”后，会出现一个允许所述用户注册的弹出窗口。一切正常，但弹出窗口只是一个带有一些输入字段和一个提交按钮的 .png——不是很优雅，也不是响应式的。我想用一个使背景变暗的模态替换弹出窗口，这个线程看起来是开始解决我的方法的正确位置。顺便说一句，代码是内联的并被格式化以适合 SS 代码块。

javascript小部件的代码：

```
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.0.19.min.js"></script>

  <style>

  .bgimg {
    background-image: url("/s/bluebk.jpg");
  }

  #overlay_form{
         position:relative;
         -moz-border-radius:4px;
         -webkit-border-radius:4px;
         border-radius:4px;
         border: 0px solid black;
         width: 640px;
         height: 340px;
         background-image: url("https://static.squarespace.com/static/532ccd30e4b00d0eac2a448c/t/533acaffe4b0cd1c8b92271c/1396361983567/tenfortenpopup.png");
         background-repeat:no-repeat;
         background-size: 100% 100%;
         overflow:Hidden;
         margin:0px auto;
         margin-top: -344px !important;
  }

  .slemail{
        border:0px solid white;
        font-size: 22px !important;
        width: 310px;
        height: 40px;
        font-family: "Futura-pt";
        color:#ababab;
        -moz-border-radius:4px;
        -webkit-border-radius:4px;
        border-radius:4px;
        position: absolute;
        left:    34px;
        bottom:   20px;
        -webkit-appearance : none;
        padding-left:5px;
  }

  .countertext{
       font-family: "futura-pt";
       text-transform: uppercase;
       letter-spacing: 4px;
       color:white;
       font-size: 52.55px;
       font-weight: 700;
       font-style: normal;
       line-height: 1;
       text-align: center;
       margin: 0px, auto;
       margin-top: 24px;
 }

  .counternumber {
       font-family: "futura-pt";
       text-transform: uppercase;
       letter-spacing: 0px;
       color:white;
       font-size: 100.55px;
       padding:3px;
       display: inline-block;
       line-height: 100%;
       font-weight: 700;
       font-style: normal;
       background: none !important;
       margin-left: auto;
       margin-right: auto;
       margin-top: -5px;
  }

  .hitme {
   -webkit-border-radius: 45px;
   -moz-border-radius: 45px;
   border-radius: 4px;
   border: solid 1px Black;
   display:inline-block;
   width: 70%;
   line-height: 1.482;
   text-align: center;
   font-family: "futura-pt";
   font-size: 38.28px;
   font-weight: 400;
   font-style: normal;
   background-color:#343e3d;
   color:white;
   letter-spacing:2px;
   text-transform: uppercase;
   margin: 0px, auto;
   margin-top: 13px;

  }

  .hitmesmall:active {  right:    38px }

  .hitmesmall {
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
   border-radius: 4px;
   display:inline-block;
   width: 200px;
   padding:2px 10px;
   font-family: "futura-pt";
   font-size: 22px;
   background-color:#666666;
   color:white;
   letter-spacing:1px;
   height:41px;
   position: absolute;
   right:    40px;
   bottom:   20px;
   border: solid 0px #343e3d;    

  }

   input:focus{
     outline:none;
  }

  .exitpopup
  {
       position: absolute;
       right: 5px;
       top:   4px;
  }

</style>

<script TYPE="text/javascript"> 
  //mailchimp javascript block
  ////////////////////////////
  //Ten for Ten
      var arr = {
           apikey: "3865eadb82f9d9951067ff814b6fe34a-us4",
           id: "9f12ac9801",
     double_optin:"false",
           email:{
                  email: "replacewithemail"
               }
       }

       var url = "https://us4.api.mailchimp.com/2.0/lists/subscribe.json";

       function mailchimp_addemail($email)
       {

        arr.email.email = $email;

        $.ajax({
          type: "GET",
          url: url, 
          contentType: "application/json",
          async: false,
          cache: false,
          dataType: "jsonp",
          data: arr,
          complete: function(jqXHR, textStatus){
            // alert("Mailchimp added");
          }       
       })

      return false;  
  }  
// end mailchimp javascript block
</script>

<script TYPE="text/javascript">
//popup javascript block
////////////////////////  

  function validateEmail($email) 
  {
     var re = /\S+@\S+\.\S+/;
     return re.test($email);
  }

  function openpopup()
  {

    $("#overlay_form").fadeIn(10);
    $('#subscriberemail').focus();
    $('#subscriberemail').val("your@email.com");
    just_count();
    return false;
  }

  function closepopup()
  {
     $("#overlay_form").fadeOut(10);
     return false;
  }

  function subscribe()
  {

      var $email   = $('#subscriberemail').val();
      var $checkme = $email.toLowerCase();   

      if ( validateEmail($checkme) == false)
      {
          $('#subscriberemail').val("your@email.com");
          $('#subscriberemail').focus();

          return false;
      }

      if ( $checkme == "your@email.com" ) 
      {
            $('#subscriberemail').val("your@email.com");
            $('#subscriberemail').focus();
            return false;
      }

      // kick off the parse.com stuff
      // the mailchimp call gets made on success
      parse_add($email);
      return false; 
  }
 //end popup javascript block  
</script>

<script TYPE="text/javascript">
//generic javascript block
// parse.com Appid and jskey
//////////////////////// 

  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  //Ten For Ten
  var parseappid  = "I8bjfDP5GK8UKA509BFUQAsTRmHHgocl1ppSAwDO";
  var parsejskey  = "JxvgeMDJQuHCwinZjq8TBEJmx1KUd3EwtcOmSr3e";

  var subscriber;
  var sequence;

    $( document ).ready(function() {
         Parse.initialize(parseappid, parsejskey);
         subscriber = Parse.Object.extend("subscriber");
         sequence   = Parse.Object.extend("sequence");
         // lets init the subscriber count
         parse_initcount();
    });

</script>

<script TYPE="text/javascript">
 //parse.com javascript block              
 ////////////////////////////

    function parse_addemail($email)
    {
        var addsubscriber = new subscriber();
        addsubscriber.set("email", $email);
        addsubscriber.save(null, {      
        success: function(object) {
              parse_incrementcount();
              mailchimp_addemail($email);
            },
            error: function(error) {
              alert("parse_addemail :" + error);
            }
        });
    };

    function just_count()
    {
        var query    = new Parse.Query(sequence);
        query.get("FJ2FWGWED6", {
          success: function(object)
          {
             object.increment("counter");
             object.save();
             var s = object.get("counter");
             var display = numberWithCommas(s); 
             $("#curcount").html(display);
          },
         error: function(error)
         {
           alert("parse_incrementcount :" + error);
         }
      });

   };

    function parse_incrementcount()
    {
      var query    = new Parse.Query(sequence);
      query.get("FJ2FWGWED6", {
        success: function(object)
        {

        },
       error: function(error)
       {
         alert("parse_incrementcount :" + error);
       }
    });
   };

   function parse_initcount()
    {
      var query    = new Parse.Query(sequence);
      query.get("FJ2FWGWED6", {
        success: function(object)
        {
           var s = object.get("counter");
           var display = numberWithCommas(s); 
           $("#curcount").html(display);
       },
       error: function(error)
       {
         alert("parse_initcount: " + error);
       }
    });
   };

  // this is called on from hitmesmall submit onclick
  ///////////////////////////////////////////////////
   function parse_add($email)
   {
     var query = new Parse.Query(subscriber);
     query.equalTo("email", $email);
     query.find({
        success: function(object) {

          if ( object.length == 0 )
          {
              parse_addemail($email);
        $('#subscriberemail').val("Congrats! Thanks for Pledging!");

          } else {

             $('#subscriberemail').val("Email already Subscribed !");
             $('#subscriberemail').focus();
          }

        }, error: function(error) {
           alert("parse_add: " + error);
      }

     });

  };

 //end parse.com javascript block              
</script>

</head>

  <body>
  <div class="bgimg" align=center>
    <br>
    <span class="counternumber" id="curcount">0</span>
    <br>
    <span class="countertext" id="pledged">PEOPLE HAVE PLEDGED! </span>
    <br>
    <button class="hitme" id="subscribe" onclick="return openpopup() ">COUNT ME IN!</button> 
    <br>
    <br>
    <br>  
  </div>

  <!-- popup form -->    
 <div id="overlay_form" style="display:none">
  <input  id="subscriberemail" class="slemail" type="text" value="your@email.com"/>
  <button id="addemail"        class="hitmesmall" onclick="return subscribe()" >SUBMIT</button>
  <button id="exitpopup"       class="exitpopup"  onclick="return closepopup()">X</button>
 </div>

</body>
</html> 
```**

# .net - 实体框架代码优先自加入，'多重性在角色中无效'

> ID：14726190
> 
> 赞同：5
> 
> 时间：2013-02-06T10:01:06.147
> 
> 标签：.net, entity-framework, code-first, .net-4.5

我被这个错误困住了，找不到解决办法。我已经尝试了几件事，但无法提出解决方案。

这是我的问题：

代码：

```
namespace ProjectTracker.Database.Entities
{
    [DataContract]
    public class User
    {
        [DataMember]
        public int Id { get; set; }

        [Required]
        [MaxLength(50)]
        [DataMember]
        public string UserName { get; set; }

        [Required]
        [MaxLength(100)]
        [DataType(DataType.Password)]
        [DataMember]
        public string Password { get; set; }

        [DataMember]
        public bool IsPasswordExpired { get; set; }

        [Required]
        [DataMember]
        public DateTime CreatedDate { get; set; }

        [Required]
        [ForeignKey("CreatedBy")]
        [DataMember]
        public int CreatedByUserId { get; set; }

        [DataMember]
        public virtual User CreatedBy { get; set; }

        [Required]
        [DataMember]
        public DateTime LastUpdatedDate { get; set; }

        [ForeignKey("LastUpdatedBy")]
        [DataMember]
        public int? LastUpdatedByUserId { get; set; }

        [DataMember]
        public virtual User LastUpdatedBy { get; set; }
    }
} 
```

以下是我从 Web 服务调用它时得到的异常详细信息：

> 请求错误 服务器在处理请求时遇到错误。异常消息是“在模型生成期间检测到一个或多个验证错误：\tSystem.Data.Entity.Edm.EdmAssociationEnd: : 多重性在关系“User_LastUpdatedBy”中的角色“User_LastUpdatedBy_Source”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是“*”。'。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) 在 System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) 在 System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) 在 System. Data.Entity.Internal.RetryLazy `2.GetValue(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 在 System.Data.Entity.Internal.Linq.InternalSet `1.get_InternalContext() at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() 在 System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 谓词）在 ProjectTracker.Database.DataAccess.DLAccess.DoesUserExist(String userName) 在 e:\My Own\Projects\ProjectTracker\Database\ProjectTracker.Database.DataAccess\DLAccess.cs:ProjectTracker.Business.BLAccess.BLAccess 的第 31 行.DoesUserExists(String userName) in e:\My Own\Projects\ProjectTracker\Business\ProjectTracker.Business.BLAccess\BLAccess.cs: 第 37 行 ProjectTracker.UI.Web.WS.WebAccess.DoesUserExist(String userName) in e: \My Own\Projects\ProjectTracker\UI\ProjectTracker.UI.Web\WS\WebAccess.svc.cs：第 12 行 SyncInvokeDoesUserExist(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke( System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 处 System.ServiceModel.Dispatcher 处的对象实例、Object[] 输入、Object[]& 输出)。System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 上的 ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

请告诉我，我在这里做错了什么......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T18:06:51.100

`User.CreatedBy`EF 映射约定尝试推断和之间的一对一关系`User.LastUpdatedBy`。这会失败，因为这两个导航属性同时用不是主键的外键表示，并且因为 EF 仅支持共享主键一对一关系。

无论如何，这并不重要，因为您不想要一对一的关系，而是实际上需要两个一对多的关系：一个用户可以创建许多其他用户，一个用户可以修改许多其他用户。

要实现这一点，您必须通过使用 Fluent API 显式定义两个关系来覆盖约定：

```
modelBuilder.Entity<User>()
    .HasRequired(u => u.CreatedBy)  // this could be a problem, see below
    .WithMany()
    .HasForeignKey(u => u.CreatedByUserId);

modelBuilder.Entity<User>()
    .HasOptional(u => u.LastUpdatedBy)
    .WithMany()
    .HasForeignKey(u => u.LastUpdatedByUserId); 
```

可能需要设置为`CreatedBy`可选，即`CreatedByUserId`必须是类型`int?`，并且在上面的映射中您必须替换`HasRequired`为`HasOptional`，否则您无法在不违反 FK 约束的情况下创建第一个用户。

`CreatedByUserId`可能您可以应用一个技巧，例如使用允许值直接在数据库中创建第一个用户`NULL`，然后将该用户分配为他自己的创建者，然后更改数据库模式，这样就`NULL`被禁止了。

**编辑**

有关“ EF 映射约定尝试推断*和**之间**的一对一关系`User.CreatedBy``User.LastUpdatedBy`*”的更多详细信息：

当 EF 在启动期间分析您的模型类时，它使用

1.  使用 Fluent API 进行配置，
2.  您应用的数据注释，
3.  一组特定的约定，用于从导航属性和属性名称推断关系。

除非使用 Fluent API 或数据注释明确指定，否则将应用这些发明。您可以在此处找到完整的约定：http: [//msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions(v=vs.103).aspx)

在您的原始`User`类的情况下，它[**`AssociationInverseDiscoveryConvention`**](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.associationinversediscoveryconvention%28v=vs.103%29.aspx)是应用于您的模型并检测一对一关系的。文档说：

> 当相关类型之间仅存在一对导航属性时，将导航属性检测为彼此相反的约定。

“唯一”一对导航属性是`CreatedBy`in`User`指的是`User`- ，而 in`User`是第二个导航属性`LastUpdatedBy`，它指的是`User`. （这有点令人困惑，因为“相关类型”是相同的 -`User`和`User`，但约定在这里适用于不同类型之间的相同方式。）因为两者都是引用（而不是集合），EF 假定关系必须是一个 -一对一（而不是一对多或多对多）。

有时约定不会按照您的意愿推断关系。然后，您必须使用 Fluent API 或数据注释覆盖映射约定。（您的示例中注释不够，您必须在此处使用 Fluent API。）

# c++ - 在 C++ 中使用流写入文件

> ID：14726192
> 
> 赞同：-1
> 
> 时间：2013-02-06T10:01:12.560
> 
> 标签：c++

我正在使用以下代码使用流在 C++ 中写入文件，并且输出显示在代码之后。在这里，我想格式化为第二列的大小为 10，并且第三列的值也应该以相同的方式右对齐。

```
for (unsigned int dvIdx = 0; dvIdx <  3; dvIdx++)
{
    dataFile << myData.TimeChanged().Format().c_str() << "  " <<  myData.GetValue() 
        << "  " <<  myData.GetQuality() << std::endl; 
}

2012-06-25 12:01:04.000  1  1083507713
2012-06-25 12:01:20.000  3  1029
2012-06-25 12:01:36.000  -empty-  2157642752 
```

预期输出为

```
2012-06-25 12:01:04.000        1  1083507713
2012-06-25 12:01:20.000        3        1029
2012-06-25 12:01:36.000  -empty-  2157642752 
```

如何更改上面的代码以获得预期的输出。感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:04:12.333

看一下[**setw**](http://msdn.microsoft.com/en-us/library/8bbhbaew%28v=vs.80%29.aspx)格式说明符：

```
for (unsigned int dvIdx = 0; dvIdx <  3; dvIdx++)
{
    dataFile << myData.TimeChanged().Format().c_str() << "  " 
        << setw(10) <<  myData.GetValue() << "  "
        << setw(20) <<  myData.GetQuality() << std::endl; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:13:26.810

你必须寻找[`<iomanip>`](http://www.cplusplus.com/reference/iomanip/),`setw`和`setiosflags`

```
dataFile << myData.TimeChanged().Format() << "  "
         << std::setw(10) << std::setiosflags(std::ios::right)
         << myData.GetValue() 
         << std::setw(10) << std::setiosflags(std::ios::right)
         << "  " <<  myData.GetQuality() << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:05:24.503

试试[I/O 操纵器](http://www.cplusplus.com/reference/iomanip/)。在我看来，这`setw(10)`将完成这项工作。

# php - 丢失会话数据

> ID：14726193
> 
> 赞同：0
> 
> 时间：2013-02-06T10:01:15.473
> 
> 标签：php, session

我想从数据库中执行一些数据过滤。过滤后，会话变量丢失，我收到此错误：

> 警告：mysql_num_rows()：提供的参数不是第 34 行 ..\test.php 中的有效 MySQL 结果资源。

有人可以帮忙吗？

形式：

```
<form action= "test.php" method='get'>
    <select name="Type">
            <option value="winter" name="winter">winter</option>
    </select>

    <input type='submit' value = 'filter'>
 </form> 
```

代码：

```
<?php
 session_start();
 $_SESSION['winter'] = $_GET['Type'];
 $type =    $_SESSION['winter'] ;

 include "mysqlConnect.php";
  //check for a page number. If not, set it to page 1
  if (!(isset($_GET['pagenum']))){
   $pagenum = 1;
   }else{
    $pagenum = $_GET['pagenum'];
   }
   //query for record count to setup pagination

   $data = mysql_query("SELECT * FROM tblPhotos WHERE  Type='$type'  ");
   $rows = mysql_num_rows($data);
  //number of photos per page
   $page_rows = 16;
  //get the last page number
    $last = ceil($rows/$page_rows);
   //make sure the page number isn't below one, or more than last page num
    if ($pagenum < 1){
     $pagenum = 1;
    }elseif ($pagenum > $last){
     $pagenum = $last;
    }
   //Set the range to display in query
    $max = 'limit ' .($pagenum - 1) * $page_rows .',' .$page_rows;
   //get all of the photos

    $dynamicList = "";
    $sql = mysql_query("SELECT * FROM tblPhotos WHERE  Type='$type' $max  ");
     //check for photos
      $photoCount = mysql_num_rows($sql); //LINE 34
     echo $photoCount;
    if ($photoCount > 0){
     while($row = mysql_fetch_array($sql)){
        $photoID = $row["PhotoID"];
        $photoName = $row["photoName"];
        $category = $row["category"];
        $dynamicList .= '
                             <div class="thumb">
                                  <a href="photo.php?id=' . $photoID . '"><img class="clip"   src="galleryPhotos/' . $photoID . '.jpg" alt="' . $photoName . '" width="175" border="0" /></a>
                            </div>
                        ';
       }
    }else{
     $dynamicList = "There are no photos at this time!";
      }

     mysql_close();

       echo '<p style="text-align:center; font-weight:bold;">Page ' . $pagenum . ' of ' . $last . '</p>';
       if ($pagenum == 1){
        echo '<div class="pagination" align="center"><ul>';
      }else{
          echo '<div class="pagination" align="center"><ul><li><a href="' . $_SERVER['PHP_SELF']  . '?pagenum=1">« first</a></li>';
         $previous = $pagenum-1;
    }
      //check if number of pages is higher than 1
      if($last != 1){
        //Loop from 1 to last page to create page number links
        for($i = 1; $i <= $last; $i++){
            echo '<li><a href="' . $_SERVER['PHP_SELF'] .'?pagenum=' . $i . '">' . $i . '</a></li>';
        }
    }
    if ($pagenum == $last){
        echo '</div>';
    }else{
        $next = $pagenum+1;
        echo '<li><a href="' . $_SERVER['PHP_SELF'] . '?pagenum=' . $last . '">last »</a></li></ul></div>';

 }
  echo $dynamicList;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:10:30.167

```
Your Code: mysql_query("SELECT * FROM tblPhotos WHERE  Type='$type' $max  "); 
```

阅读错误消息，它告诉您查询有问题。看了查询。我倾向于同意。

# templates - Intellij：更改 JUnit 测试类模板

> ID：14726196
> 
> 赞同：24
> 
> 时间：2013-02-06T10:01:21.960
> 
> 标签：templates, junit, intellij-idea

我想自定义 JUnit Test 类模板，但是在设置中的任何地方都找不到它。 [这个人](http://devnet.jetbrains.com/thread/282158)也有同样的问题。我在文件模板或实时模板中找不到任何内容。我正在使用 Intellij 11。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-07-02T08:21:27.680

现在在最新的 IntelliJ IDEA / Android Studio 中解决了这个问题。去：

```
Settings
-Editor
-File and Code Templates
-Code (tab)
-JUnit4 Test Class 
```

在右侧窗口中编辑代码。

![来自上述描述的对话框图像](../Images/645ed76061dfa987316153a5825bd897.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:34:04.387

CrazyCoder 提供的链接表明这不是直接可能的，但我需要将 if 语句添加到 Class File Type 模板。我可能会使用一个大的 if-else 将模板一分为二。

# iphone - 如何启动需要 JSON 有效负载的 Web 服务请求

> ID：14726197
> 
> 赞同：0
> 
> 时间：2013-02-06T10:01:22.717
> 
> 标签：iphone, ios, objective-c, json, jsonkit

我是 JSON 新手，找不到任何关于如何模拟 JSON 有效负载请求的材料。

我的最终目标是能够构建一个objective-c iOS 应用程序来处理这些请求-响应。我知道 ASIHttprequest 框架和它所使用的请求-响应机制。

但是现在我有一个 webservice api，它需要各种 json 有效负载，并且还提供 json 格式的响应。这是一个例子：

示例网址：

`https://mywebServiceURL/api/ApiKey/user/create`

```
The ContentType header = “application/json”. 
```

有效负载：PUT 有效负载是一个 JSON 字典，包含以下键值对：

```
email
screenName
User’s screen name. 
password
passwordConfirm    
phoneNumber (optional)
User’s phone number (optional)
picture A png file (64x64), encoded as a Base64 string (optional) 
```

现在我的问题：

1 - 我如何正常模拟这个（在ios之外，只是为了测试）？我搜索了谷歌，但找不到我真正需要的东西，我得到了 curl.exe，但它给了我和浏览器一样的东西，比如不允许的方法等。但这不是我唯一想要的。在我知道 PUT、GET、POST 等的真正工作原理之前，我想处理各种请求、提供值并带上 api 一段时间。

2 - 将这些东西整合到 iOS 中的最佳方式是什么？我的项目中已经包含用于 Web 请求的 ASIHttp 和用于 JSON 处理的 JSONKit。

我做过这种事情，但使用 xml 响应，获取请求。JSON 我是第一次工作。只需指向此类示例内容的指针就会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:15:51.630

1.  有几个 Chrome 扩展程序，例如高级 REST 客户端或 REST 控制台，您可以使用它们来模拟 REST 调用。这些非常快速且易于安装到您的浏览器中，并允许您构建请求并查看响应。

2.  我推荐使用开源 iOS 网络库[AFNetworking](https://github.com/AFNetworking/AFNetworking)。该库内置了对 REST 调用和 JSON 解析的支持。它非常容易启动和运行，如果您需要更高级的功能，它非常强大。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:35:55.467

请补充安迪的建议，因为我在最近的一个应用程序中使用了类似的东西。

1.  使用 Chrome 扩展海报来测试 REST 调用。
2.  使用 ASIHttpRequest 处理异步查询。

示例代码片段

```
 //dictionaryData contains the login user details
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dictionaryData  options:kNilOptions error:nil]; 
    NSString *jsonString = [[[NSString alloc] initWithData:jsonData                  encoding:NSUTF8StringEncoding]autorelease];                                         
    //Handling ASI requests
    ASIHTTPRequest* request = [ASIHTTPRequest requestWithURL:uri];
    [request addRequestHeader:@"Content-Type" value:@"application/json"];
    [request addRequestHeader:@"Accept" value:@"application/json"];
    [request appendPostData:[jsonData dataUsingEncoding:NSUTF8StringEncoding]];
    [request setRequestMethod:@"POST"];
    [ASIHTTPRequest setDefaultTimeOutSeconds:30];
    request.delegate = self;
    [request startAsynchronous]; 
```

# mysql - 索引 HAVING 子句中的列 - MySQL

> ID：14726206
> 
> 赞同：0
> 
> 时间：2013-02-06T10:02:00.077
> 
> 标签：mysql, select, indexing, having

我有一个超过 12 列的表。这是用于检索最新 7 条记录的 mysql 查询

`SELECT * FROM data WHERE user_id IN(12,10,7,1) HAVING continent IN('Europe','America','Australia') AND NOT MATCH(weather) AGAINST('+"[blues]"' IN BOOLEAN MODE) || continent = 'Asia' AND MATCH(weather) AGAINST('+"[purples]"' IN BOOLEAN MODE) ORDER BY tb_id DESC LIMIT 7`

总行数超过`5 million`并且`user_id`是一个索引列，`tb_id`其中`PRIMARY KEY`. 当我使用`EXPLAIN`前面的`SELECT`. MySQL 表示它将从总共 500 万条记录中读取超过 40 万条记录。

那么我应该索引大陆列还是在这种情况下无济于事？

这是解释结果

`id = 1; select_type = SIMPLE; table = data; possible_keys = user_id; key = user_id; ref = NULL; rows = 582; Extra = Using where, Using filesort`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:12:19.163

首先，您的查询可能是错误的。当你在 where 或 having 子句或任何地方使用 mix `OR`with时，你应该使用括号。`AND`

其次，在您的情况下使用 HAVING 没有意义，优化器很可能会将其转换为 WHERE 子句。

两者之间的区别在于，`WHERE`在确定要选择的行时应用。`HAVING`应用于结果集。因此，如果优化器做得不好，您将首先获得（几乎）所有行，然后过滤这些行。当你把它全部放在`WHERE`子句中时，你只会得到相关的行。`HAVING`（几乎）仅在您使用`GROUP BY`.

所以，你最好这样写你的查询：

```
SELECT * FROM data 
WHERE user_id IN(12,10,7,1) AND
(
(
continent IN('Europe','America','Australia') 
AND NOT MATCH(weather) AGAINST('+"[blues]"' IN BOOLEAN MODE) 
)
OR 
(
continent = 'Asia' 
AND MATCH(weather) AGAINST('+"[purples]"' IN BOOLEAN MODE) 
)
)
ORDER BY tb_id DESC LIMIT 7 
```

要回答有关索引的问题，请发布说明的结果和表的创建语句`data`。

# java - JAVA 和泛型类型问题

> ID：14726211
> 
> 赞同：6
> 
> 时间：2013-02-06T10:02:34.810
> 
> 标签：java, generics

我面临泛型类型的问题：

```
public static class Field<T> {

    private Class<? extends T> clazz;

    public Field(Class<? extends T> clazz) {
        this.clazz = clazz;
    }

}

public static void main(String[] args) {

    // 1\. (warning) Iterable is a raw type. References to generic type Iterable<T> should be parameterized.
    new Field<Iterable>(List.class);

    // 2\. (error) The constructor Main.Field<Iterable<?>>(Class<List>) is undefined.
    new Field<Iterable<?>>(List.class);

    // 3\. (error) *Simply unpossible*
    new Field<Iterable<?>>(List<?>.class);

    // 4\. (warning) Type safety: Unchecked cast from Class<List> to Class<? extends Iterable<?>>.
    new Field<Iterable<?>>((Class<? extends Iterable<?>>) List.class);

} 
```

1\. 和 4\. 之间的最佳解决方案是什么（或任何其他解决方案）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:17:01.427

```
public class Field <T> {
    private Class <? extends T> clazz;

    public <TT extends T> Field (Class <TT> clazz) {
        this.clazz = clazz;
    }

    public static void main (String [] args) {
        new Field <Iterable <?>> (List.class);
    }
} 
```

# c++ - 来自应用程序的 Qt Mac OSX 屏幕锁定

> ID：14726212
> 
> 赞同：0
> 
> 时间：2013-02-06T10:02:34.870
> 
> 标签：c++, macos, qt

我们为 Mac OSX 开发了一个 Qt 应用程序，其中我们使用了以下代码来锁定屏幕。

```
system("/System/Library/CoreServices/Menu\\ Extras/User.menu/Contents/Resources/CGSession -suspend"); 
```

代码按预期工作，除了锁定后的某个时间，屏幕冻结（白色/灰色空白屏幕）。我们必须强制关闭mac才能解冻。

我在 Mac OSX 10.7.2、10.7.4、10.7.5 中进行了测试。

我不确定它是我们的应用程序的问题还是由 Mac 本身引起的？

任何人都可以对此有所了解吗？

谢谢，

# api - topsy otter api：精确的短语匹配（多个单词）

> ID：14726213
> 
> 赞同：0
> 
> 时间：2013-02-06T10:02:39.380
> 
> 标签：api, search, twitter, topsy

我正在评估 topsy 的 otter api。有没有人知道为“在线互联网课程”（异国情调）等确切短语获得正确结果的好方法。

[http://otter.topsy.com/search.json?apikey=(your-api-key)&q=%22online%20internet%20course%22&perpage=100&nohidden=0&mintime=315532800](http://otter.topsy.com/search.json?apikey=(your-api-key)&q=%22online%20internet%20course%22&perpage=100&nohidden=0&mintime=315532800)

这将返回包含所有单词的结果，但不是确切的短语。因此它也将匹配“在线网络营销课程”。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:35:25.640

您是对的，您需要在两端使用双引号 (%22)，但您还需要在单词之间使用 '+' (%2B)，而不是空格 (%20)。

# oracle - PL/SQL 程序计算年龄以及你的生日年份是否是闰年

> ID：14726215
> 
> 赞同：0
> 
> 时间：2013-02-06T10:02:48.220
> 
> 标签：oracle, plsql

所以这个问题似乎在编程课上以各种形式被问到。我已经看到这个问题涉及触发器、函数等。我已经计算了程序的闰年部分，并且有几种不同的方法可以从你的生日计算年龄，无论是除以 365.25 还是间隔月数，可能还有其他几种方法来解决这个问题。

我只是在计算年龄时遇到了一些问题，并且在其他程序中执行此操作并专门在 PL/SQL 中为 Oracle Dev 进行编程时，信息过载。

这个展示了它是如何在 SQL SERVER 中完成的： [使用 SQL Server 从 sysdate 和birthdate 计算年龄](https://stackoverflow.com/questions/13161401/calculating-age-from-sysdate-and-birthdate-using-sql-server/13162008#13162008)

这个使用触发器，它与我正在寻找的相似但不完全一样。 [使用oracle plsql触发器从生日计算年龄并将年龄插入表中](https://stackoverflow.com/questions/12329149/calculating-age-from-birthday-with-oracle-plsql-trigger-and-insert-the-age-in-ta/12329295#12329295)

> 编写一个 PL/SQL 块来接受你的生日。计算并打印您的年龄（包括小数点后一位）。还要检查您的出生年份是否是闰年。打印一条消息，例如“我的出生年份是闰年”。或“我的出生年份不是闰年。” 提示：要确定闰年，年份应该能被 4 整除但不能被 100 整除，或者它应该能被 400 整除。

```
SET SERVEROUTPUT ON
DECLARE
   v_birthday_year        NUMBER(4)    := &v_birthday_year;
   v_your_age             NUMBER(4, 1);
   v_leap_remainder1      NUMBER(5, 2);
   v_leap_remainder2      NUMBER(5, 2);
   v_leap_remainder3      NUMBER(5, 2);

 BEGIN
   v_leap_remainder1 := MOD(v_birthday_year, 4);
   v_leap_remainder2 := MOD(v_birthday_year, 100);
   v_leap_remainder3 := MOD(v_birthday_year, 400);

 IF ((v_leap_remainder1 = 0 AND v_leap_remainder2 <> 0 ) 
     OR v_leap_remainder3 = 0) 
 THEN
   DBMS_OUTPUT.PUT_LINE(v_birthday_year || ' is a leap year');

 ELSE
   DBMS_OUTPUT.PUT_LINE (v_birthday_year || ' is not a leap
   year');

  END IF;

  TO_CHAR(SYSDATE, 'DD-MM-YYYY')
  v_your_age := (MONTHS_BETWEEN(TRUNC(SYSDATE), v_birthday_year)/12);
  DBMS_OUTPUT.PUT_LINE ('Your age is ' || v_your_age);

 END;
 / 
```

实际上我想通了，它是 dob 的 to_date 转换，birthyear、dob 和 age 的单独变量。年龄计算到小数点后 1 位。Trunc(x, 1) 现在很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:27:38.483

您也可以尝试通过转换为儒略日期来检查它。当您将时间戳转换为儒略日期时，您将获得自公元前 -4000 年之前某个日期以来的天数。如果您计算两个日期之间的差异，您就会知道这些日期之间的天数。所以在你出生年份的 1 月 1 日和 12 月 31 日这样做，你就会知道它是否是闰年。

为了计算年龄检查功能`months_between`（检查[这个问题](https://stackoverflow.com/questions/3015431/oracle-age-calculation-from-date-of-birth-and-today)的最后一个答案）。

# asp.net - .NET - ASP.NET 缓存与 Couchbase 缓存

> ID：14726216
> 
> 赞同：1
> 
> 时间：2013-02-06T10:02:59.050
> 
> 标签：asp.net, wcf, caching, couchbase

我有一个大型数据驱动应用程序简单的 WCF 服务。我想在缓存中存储一​​些我经常使用的数据。我有两个选择

1.  ASP.NET 缓存
2.  Couchbase 缓存

我的实际观点是，哪种缓存在 WCF 服务和 .NET 平台上是高效、可靠且易于使用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:09:24.283

这取决于您的架构以及您将在何处部署项目。

如果通过实例将项目部署在服务器场上，Asp.net 缓存将不是我的首选，因为它不支持分布式缓存（多个缓存副本不同步，工作进程回收时缓存丢失等）所以在这种情况下，我将使用 Couchbase（在场景后面使用数据库）。

如果您将在单个 Web 服务器上部署您的项目，您可以使用 Asp.net 缓存

# visual-studio - Visual Studio 2012 未加载报表服务器项目

> ID：14726220
> 
> 赞同：0
> 
> 时间：2013-02-06T10:03:27.810
> 
> 标签：visual-studio

我有一个 VS2010 解决方案，其中包含大约十个项目（Web、类库、报表服务器项目），这些项目在源代码控制中持续存在。

几天前，我安装了 VS2012 并尝试从源代码管理中加载所有项目。

每个项目都已加载并成功构建，只有一个没有，而那个是报表服务器项目。

在解决方案资源管理器中，我对该项目的描述不兼容。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:22:10.157

去获取 VS2012 的 BI 工具（2013 年 3 月 5 日发布），你正在尝试的将起作用： [http ://www.microsoft.com/en-us/download/details.aspx?id=36843](http://www.microsoft.com/en-us/download/details.aspx?id=36843)

# amazon-web-services - 以小时为单位显示 CloudWatch 指标

> ID：14726224
> 
> 赞同：4
> 
> 时间：2013-02-06T10:03:33.613
> 
> 标签：amazon-web-services, amazon-cloudwatch

我有一个以秒为单位的自定义云观察指标。（代表缓存的年龄）

通常值约为 125,000 我想将它们转换为小时 - 以提高可读性。

那可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-03-12T02:18:53.113

随着[Metrics Math](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html)的加入，这种情况发生了变化。您可以手动（从控制台）和从 CloudFormation 仪表板模板对数据进行各种转换。

* * *

**从控制台：**查看上面的链接，上面写着：

> 将数学表达式添加到图形
> 
> 1.  [在https://console.aws.amazon.com/cloudwatch/](https://console.aws.amazon.com/cloudwatch/)打开 CloudWatch 控制台。
>     
>     
> 2.  创建或编辑图形或线条小部件。
>     
>     
> 3.  选择图表指标。
>     
>     
> 4.  选择添加数学表达式。表达式会出现一个新行。
>     
>     
> 5.  对于详细信息列，键入数学表达式。以下部分中的表格列出了您可以在表达式中使用的函数。
>     
>     
>     
>     要将度量或另一个表达式的结果用作此表达式的公式的一部分，请使用 Id 列中显示的值。例如，`m1+m2`或`e1-MIN(e1)`。

* * *

**从[CloudFormation 模板](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-dashboard.html)**

您可以添加作为 Metrics Math 表达式的新指标，转换现有指标。您可以加、减、乘等指标和标量。在您的情况下，您可能只想使用除法，如下例所示：

`metrics`假设您的模板中有以下存储桶请求延迟对象：

```
"metrics":[
  ["AWS/S3","TotalRequestLatency","BucketName","MyBucketName"]
] 
```

延迟默认值以毫秒为单位。让我们在几秒钟内绘制它，只是为了好玩。`1s = 1,000ms`所以我们将添加以下内容：

```
"metrics":[
  ["AWS/S3","TotalRequestLatency","BucketName","MyBucketName",{"id": "timeInMillis"}],
  [{"expression":"timeInMillis / 1000", "label":"LatencyInSeconds","id":"timeInSeconds"}]
] 
```

请注意，`expression`可以访问`ID`其他指标。当事情变得更复杂时，有用的命名会很有用，但关键是将表达式中的变量与`ID`分配给相应指标的变量相匹配。

这给我们留下了一个图表，上面有**两个**指标：一毫秒，另一秒。如果我们想丢失毫秒，我们可以，但是我们*需要保留度量值来计算数学表达式*，所以我们使用以下解决方法：

```
"metrics":[
  ["AWS/S3","TotalRequestLatency","BucketName","MyBucketName",{"id": "timeInMillis","visible":false}],
  [{"expression":"timeInMillis / 1000", "label":"LatencyInSeconds","id":"timeInSeconds"}]
] 
```

使度量不可见将其从图表中移除，同时仍然允许我们从中计算我们的表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:20:24.357

Cloudwatch 不进行任何单位转换（即秒到小时等）。因此，您不能使用 AWS 控制台来显示转换为小时的“秒”数据点值。

您可以将度量值发布为“小时”（将“单位”字段留空或将其设置为“无”）。

否则，如果您仍想为数据点提供单位“秒”，您可以检索数据点（使用 GetMetricStatistics API）并使用其他仪表板/图形解决方案绘制值。

# performance - ANTLR4：调用 getInterpreter().adaptivePredict 时性能不佳

> ID：14726229
> 
> 赞同：0
> 
> 时间：2013-02-06T10:03:55.157
> 
> 标签：performance, antlr4

帕尔和亲爱的社区，

首先，我要感谢您出色的 Antlr4（以及整个 antlr :-)）。在过去的 6 个月里，我一直在使用 Antlr 3（我已经很高兴了），但我对 antlr4 更满意。我注意到使用 java 作为目标语言在语法简单性和生成时间方面有了很大的改进。不幸的是，我对 antlr3 所没有的运行时性能有些担心。

这里摘录我的语法：

```
declare_specs
:
DECLARE? declare_spec+
|
DECLARE
;

declare_spec
:
constant_declaration
| variable_declaration
| exception_declaration
| procedure_body
| function_body
; 
```

这里生成的代码（我添加了 System.out.println 用于跟踪）：

```
 public final Declare_specsContext declare_specs() throws RecognitionException {
            System.out.println("TIME: " + timestamp() + " - declare_specs - 1");
        Declare_specsContext _localctx = new Declare_specsContext(_ctx, getState());
        System.out.println("TIME: " + timestamp() + " - declare_specs - 2");
        enterRule(_localctx, 118, RULE_declare_specs);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 3");
        int _la;
        try {
            int _alt;
        System.out.println("TIME: " + timestamp() + " - declare_specs - 4");
        setState(826);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 5");
        switch ( getInterpreter().adaptivePredict(_input,69,_ctx) ) {
            case 1:
        System.out.println("TIME: " + timestamp() + " - declare_specs - 6");
                enterOuterAlt(_localctx, 1);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 7");
                {

                        if (f_trace >= f_trace_low) {
                            System.out.println("TIME: " + timestamp() + " - DECLARE_SPECS - FIRST ALT");
                        };

                setState(817);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 8");
                _la = _input.LA(1);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 9");
                if (_la==DECLARE) {
                    {
                    setState(816); match(DECLARE);
                    }
                }

        System.out.println("TIME: " + timestamp() + " - declare_specs - 10");
                setState(820); 
        System.out.println("TIME: " + timestamp() + " - declare_specs - 11");
                _errHandler.sync(this);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 12");
                _alt = getInterpreter().adaptivePredict(_input,68,_ctx);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 13");
                do {
                    switch (_alt) {
                    case 1:
                        {
                        {
        System.out.println("TIME: " + timestamp() + " - declare_specs - 14");
                        setState(819);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 15");
                        declare_spec();
        System.out.println("TIME: " + timestamp() + " - declare_specs - 16");
                        }
                        }
                        break;
                    default:
                        throw new NoViableAltException(this);
                    }
        System.out.println("TIME: " + timestamp() + " - declare_specs - 17");
                    setState(822);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 18");
                    _errHandler.sync(this);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 19");
                    _alt = getInterpreter().adaptivePredict(_input,68,_ctx);
        System.out.println("TIME: " + timestamp() + " - declare_specs - 20");
                } while ( _alt!=2 && _alt!=-1 );
                }
                break;

            case 2:
                enterOuterAlt(_localctx, 2);
                {

                        if (f_trace >= f_trace_low) {
                            System.out.println("TIME: " + timestamp() + " - DECLARE_SPECS - SECOND ALT");
                        };

                setState(825); match(DECLARE);
                }
                break;
            }
        }
        catch (RecognitionException re) {
            _localctx.exception = re;
            _errHandler.reportError(this, re);
            _errHandler.recover(this, re);
        }
        finally {
            exitRule();
        }
        return _localctx;
    } 
```

这里的痕迹：

```
................
TIME: 2013-02-06 09:47:10.417 - declare_specs - 12
TIME: 2013-02-06 09:47:11.023 - declare_specs - 13
.................
TIME: 2013-02-06 09:51:38.915 - DECLARE_SPEC - AFTER
.................
TIME: 2013-02-06 09:51:38.916 - declare_specs - 19
TIME: 2013-02-06 09:52:31.435 - declare_specs - 20
...................
TIME: 2013-02-06 09:52:31.435 - DECLARE_SPEC - INIT 
```

**调用 _alt = getInterpreter().adaptivePredict(_input,68,_ctx); 时我损失了 60'' 第二次但小于 1' 时调用 _alt = getInterpreter().adaptivePredict(_input,68,_ctx); 第一次**。改变的当然是参数_input 和_ctx。

问题很可能出在我的语法上，但我束手无策；-)。1\. 你能告诉我我可以在哪里寻找解决方案吗？2\. 无论如何，adaptivePredict 中发生了什么；-)

谢谢您的帮助！

亲切的问候，沃尔夫冈·哈默

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:10:36.033

听起来您的语法决定需要大量的前瞻和/或模棱两可或上下文敏感。不幸的是，如果没有完整的语法，我们将无法告诉您是哪一个。您可以执行以下操作，它将向控制台打印一些有关歧义的详细信息。

```
parser.addErrorListener(new DiagnosticErrorListener());
parser.getInterpreter().setPredictionMode(PredictionMode.LL_EXACT_AMBIG_DETECTION); 
```

# javascript - 如何使用three.js在z轴上平移一个正方形？

> ID：14726238
> 
> 赞同：-5
> 
> 时间：2013-02-06T10:04:21.917
> 
> 标签：javascript, html, transform, three.js, webgl

我需要一些帮助来尝试在 z 轴上平移一个正方形。有没有关于如何最好地使用three.js 完成此任务的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:20:55.983

```
square.translateZ(50); 
```

Object3D 文档在这里：[http://mrdoob.github.com/three.js/docs/55/#Reference/Core/Object3D](http://mrdoob.github.com/three.js/docs/55/#Reference/Core/Object3D)

来源：[https ://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js](https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js)

# push-notification - 点按 Toast 通知时，Windows Phone 导航到应用程序中的特定页面

> ID：14726244
> 
> 赞同：3
> 
> 时间：2013-02-06T10:04:55.070
> 
> 标签：push-notification, windows-phone, toast, mpns

当用户点击收到的 toast 通知时，我想在 Windows Phone 应用程序中打开某个页面。我猜它可能有一个事件处理程序，我可以将应用程序导航到此处理程序内的此页面。其实我不确定。这只是一个估计。您可以提出明确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T10:55:03.810

```
string toastMessage = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" +
               "<wp:Toast>" +
                    "<wp:Text1>" + sampleText+ "</wp:Text1>" +
                    "<wp:Text2>" + sampleText+ "</wp:Text2>" +
                   "<wp:Param>/Page.xaml</wp:Param>" +
                "</wp:Toast> " +
            "</wp:Notification>"; 
```

您可以在此处将 /Page.xaml 替换为您要导航的页面的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:36:57.177

在通知的事件处理程序中，只需将其与您要导航到的页面的 uri 一起添加。确保相应地替换“SomePage.xaml”。

```
NavigationService.Navigate(new Uri("/SomePage.xaml", UriKind.Relative)); 
```

[尝试查看 MSDN 的Toast Properties 页面](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662938%28v=vs.105%29.aspx#BKMK_Toastproperties)的底部。看起来点击通知默认为启动您的应用程序。

解决此问题的一种方法是设置一个设置，比如 ToastSetting，它会随着 `toast.Show();`事件切换为“true”。那么，`OnNavigatedTo`如果有一个 if/else 语句来查找您的 ToastSetting 是否等于“true”。像这样：

```
//Did toast.Show(); fire?
If (appSettings.ToastSetting)
 {
//reset the toast setting
appSettings.ToastSetting == false;
//navigate to different page
NavigationService.Navigate(new Uri("/SomePage.xaml", UriKind.Relative));
}
else
{
//do nothing
} 
```

# google-chrome - Chrome 中的@font-face 渲染 (Android/Win7)

> ID：14726245
> 
> 赞同：1
> 
> 时间：2013-02-06T10:04:55.730
> 
> 标签：google-chrome, rendering, font-face, chrome-for-android

在我正在开发的网站上，我在@font-face 渲染方面遇到了两个问题——Android 版 Chrome（在三星 Galaxy S 上测试）和 Win7 版 Chrome。两个最新版本。

这些问题在视觉上略有不同，但我认为与同一件事有关。

这里有几张截图可以更好地向你介绍我在说什么

![Android - 正确](../Images/d665c13320d693819a4fb7dfebaada69.png)

> 适用于 iPhone/Android 的 Chrome（用户代理）- 好的

![在此处输入图像描述](../Images/210daa4afbccb1ddf67b73215916a2ed.png)

> 适用于 Android 的 Chrome - 错误

![在此处输入图像描述](../Images/4d9f9aa28564a53fc094b31e866577d1.png)

> 适用于 Ubuntu 的 Chrome - 好的

![在此处输入图像描述](../Images/a4e626736b121679a06eb2172c74e092.png)

> Chrome for Win7 - 错误

因此，如您所见，Chrome for Android 中的字体未正确呈现 - 它显示一些默认字体，而不是我们正在使用的字体（farnhamdisplay）。另一方面，它在 Chrome 用户代理和 iPhone 版 Chrome 中运行良好。

第二个问题...相同的字体...它在顶部被剪掉，仅在 Windows 7 的 Chrome 中。另一方面，适用于 Ubuntu 的 Chrome 可以正常工作。

这也适用于任何其他浏览器（Firefox，IE，...）

这里还有一个 CSS 代码示例（移动版）：

```
@font-face {
    font-family: 'Farnhamdisplay-regular';
    src: url('../fonts/farnhamdisplay-regular.eot');
    src: url('../fonts/farnhamdisplay-regular.eot?#iefix') format('embedded-opentype'),
    url('../fonts/farnhamdisplay-regular.svg#proxima_nova_ltregular') format('svg')
        url('../fonts/farnhamdisplay-regular.woff') format('woff'),
        url('../fonts/farnhamdisplay-regular.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
}

#navigation {
    display:inline-block;
    vertical-align:top;
    padding-left:48px;
    font:27px/29px "Farnhamdisplay-regular";
    text-transform:uppercase;
    text-decoration: none;
    margin:18px 0 0 31px;
    color:#333;
    letter-spacing:2px;
} 
```

有人对此有任何想法吗？我偶然发现了一些类似的问题，据我所知，这可能是 Chrome 方面的问题。例如，它适用于 Google 字体，但不适用于某些自定义 TypeKit 字体等。

# javascript - 将 JavaScript 数组转换为 JavaScript 对象

> ID：14726247
> 
> 赞同：2
> 
> 时间：2013-02-06T10:05:00.117
> 
> 标签：javascript, jquery, arrays, object

我有以下使用 for 循环生成的数组。

```
{x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450},  
{x:520, y:620, count:460}, 
{x:540, y:640, count:470}, 
{x:560, y:660, count:480}, 
{x:580, y:680, count:30} 
```

我正在使用它来使用来自以下网址的插件创建热图：http: [//www.patrick-wied.at/static/heatmapjs/examples.html](http://www.patrick-wied.at/static/heatmapjs/examples.html)

我需要将上述数组作为**javascript 对象**以下列格式传递给 heatmap.js 文件。我怎样才能做到这一点？如何将我的数组转换为 JavaScript 对象？

```
data: {
[
{x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450} 
]

}; 
```

我称这个功能

```
 setDataSet: function(obj, internal) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:40:01.800

```
data: {
[
{x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450} 
]}; 
```

无效。您缺少数组的键：

```
{data: {points:[
{x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450} 
]}}; 
```

* * *

你可以这样做：

```
var points = [
{x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450},  
{x:520, y:620, count:460}, 
{x:540, y:640, count:470}, 
{x:560, y:660, count:480}, 
{x:580, y:680, count:30} 
];

var data = {'points':points}; 
```

或者

```
var data = {'data':{'points':points}}; 
```

如果您需要`data`在内部获取正确的数据对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:08:56.717

**A/**我相信您正在使用插件在谷歌地图上显示热图，因此您的数组应该包含纬度/经度值而不是纯数字。

**B/**如果它是一个数组，它被定义为：

```
var arr = [ {x:320, y:420, count:360}, 
{x:340, y:440, count:370},
{x:380, y:480, count:390},  
{x:400, y:500, count:400}, 
{x:420, y:520, count:410}, 
{x:440, y:540, count:420}, 
{x:460, y:560, count:430},  
{x:480, y:580, count:440}, 
{x:500, y:600, count:450},  
{x:520, y:620, count:460}, 
{x:540, y:640, count:470}, 
{x:560, y:660, count:480}, 
{x:580, y:680, count:30} ]; 
```

节点 [ & ] 表示一个数组。每个 {} 元素都是数组中的一个对象！

**C/**传递给热图的数据应该是这样的：

```
var heatMapData ={
    max: 480,
    data: arr
}; 
```

其中 arr 在其所有元素中的最高计数为 480（该坐标处的出现次数）（来自热图的源代码：最大出现次数 - 热图径向渐变 alpha 过渡基于它）

**工作示例代码：**

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Demo heatmap</title>
        <meta name="description" content="DEmo heatmap" />
        <meta name="author" content="noyb" />
        <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="css/site.css" type="text/css" media="screen" charset="utf-8" />
        <style>

        </style>
        <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
        <script src="http//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script>
            window.jQuery || document.write('<script src="jquery-1.6.2.min.js"><\/script>')
        </script>

        <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="heatmap.js"></script>
        <script type="text/javascript" src="heatmap-gmaps.js"></script>
        <style>
            #heatmapArea{
                width: 800px;
                height: 600px;
                margin: 10px auto;
            }
        </style>

    </head>
    <body>
        <div id="heatmapArea"> map </div>

        <script>
            $(document).ready(function() {
                // standard gmaps initialization
                var myLatlng = new google.maps.LatLng(48.3333, 16.35);
                // define map properties
                var myOptions = {
                    zoom: 3,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    disableDefaultUI: false,
                    scrollwheel: true,
                    draggable: true,
                    navigationControl: true,
                    mapTypeControl: false,
                    scaleControl: true,
                    disableDoubleClickZoom: false
                };
                // we'll use the heatmapArea
                var map = new google.maps.Map($("#heatmapArea")[0], myOptions);

                // let's create a heatmap-overlay
                // with heatmap config properties
                var heatmap = new HeatmapOverlay(map, {
                    "radius": 20,
                    "visible": true,
                    "opacity": 70
                });

                // here is our dataset
                var dat = [{lat: 33.5363, lng:-117.044, count: 1},{lat: 33.5608, lng:-117.24, count: 1},{lat: 38, lng:-97, count: 1},{lat: 38.9358, lng:-77.1621, count: 1},{lat: 38, lng:-97, count: 2},{lat: 54, lng:-2, count: 1},{lat: 51.5167, lng:-0.7, count: 2},{lat: 51.5167, lng:-0.7, count: 6},{lat: 60.3911, lng:5.3247, count: 1},{lat: 50.8333, lng:12.9167, count: 9},{lat: 50.8333, lng:12.9167, count: 1},{lat: 52.0833, lng:4.3, count: 3},{lat: 52.0833, lng:4.3, count: 1},{lat: 51.8, lng:4.4667, count: 16},{lat: 51.8, lng:4.4667, count: 9},{lat: 51.8, lng:4.4667, count: 2},{lat: 51.1, lng:6.95, count: 1},{lat: 13.75, lng:100.517, count: 1},{lat: 18.975, lng:72.8258, count: 1},{lat: 2.5, lng:112.5, count: 2},{lat: 25.0389, lng:102.718, count: 1},{lat: -27.6167, lng:152.733, count: 1},{lat: -33.7667, lng:150.833, count: 1},{lat: -33.8833, lng:151.217, count: 2},{lat: 9.4333, lng:99.9667, count: 1},{lat: 33.7, lng:73.1667, count: 1},{lat: 33.7, lng:73.1667, count: 2},{lat: 22.3333, lng:114.2, count: 1},{lat: 37.4382, lng:-84.051, count: 1},{lat: 34.6667, lng:135.5, count: 1},{lat: 37.9167, lng:139.05, count: 1},{lat: 36.3214, lng:127.42, count: 1},{lat: -33.8, lng:151.283, count: 2},{lat: -33.8667, lng:151.225, count: 1},{lat: -37.65, lng:144.933, count: 2},{lat: -37.7333, lng:145.267, count: 1},{lat: -34.95, lng:138.6, count: 1},{lat: -27.5, lng:153.017, count: 1},{lat: -27.5833, lng:152.867, count: 3},{lat: -35.2833, lng:138.55, count: 1},{lat: 13.4443, lng:144.786, count: 2},{lat: -37.8833, lng:145.167, count: 1},{lat: -37.86, lng:144.972, count: 1},{lat: -27.5, lng:153.05, count: 1},{lat: 35.685, lng:139.751, count: 2},{lat: -34.4333, lng:150.883, count: 2},{lat: 14.0167, lng:100.733, count: 2},{lat: 13.75, lng:100.517, count: 5},{lat: -31.9333, lng:115.833, count: 1},{lat: -33.8167, lng:151.167, count: 1},{lat: -37.9667, lng:145.117, count: 1},{lat: -37.8333, lng:145.033, count: 1},{lat: -37.6417, lng:176.186, count: 2},{lat: -37.6861, lng:176.167, count: 1},{lat: -41.2167, lng:174.917, count: 1},{lat: 39.0521, lng:-77.015, count: 3},{lat: 24.8667, lng:67.05, count: 1},{lat: 24.9869, lng:121.306, count: 1},{lat: 53.2, lng:-105.75, count: 4},{lat: 44.65, lng:-63.6, count: 1},{lat: 53.9667, lng:-1.0833, count: 1},{lat: 40.7, lng:14.9833, count: 1},{lat: 37.5331, lng:-122.247, count: 1},{lat: 39.6597, lng:-86.8663, count: 2},{lat: 33.0247, lng:-83.2296, count: 1},{lat: 34.2038, lng:-80.9955, count: 1},{lat: 28.0087, lng:-82.7454, count: 1},{lat: 44.6741, lng:-93.4103, count: 1},{lat: 31.4507, lng:-97.1909, count: 1},{lat: 45.61, lng:-73.84, count: 1},{lat: 49.25, lng:-122.95, count: 1},{lat: 49.9, lng:-119.483, count: 2},{lat: 32.7825, lng:-96.8207, count: 6},{lat: 32.7825, lng:-96.8207, count: 7},{lat: 32.7825, lng:-96.8207, count: 4},{lat: 32.7825, lng:-96.8207, count: 41},{lat: 32.7825, lng:-96.8207, count: 11},{lat: 32.7825, lng:-96.8207, count: 3},{lat: 32.7825, lng:-96.8207, count: 10},{lat: 32.7825, lng:-96.8207, count: 5},{lat: 32.7825, lng:-96.8207, count: 14},{lat: 41.4201, lng:-75.6485, count: 4},{lat: 31.1999, lng:-92.3508, count: 1},{lat: 41.9874, lng:-91.6838, count: 1},{lat: 30.1955, lng:-85.6377, count: 1},{lat: 42.4266, lng:-92.358, count: 1},{lat: 41.6559, lng:-91.5228, count: 1},{lat: 33.9269, lng:-117.861, count: 3},{lat: 41.8825, lng:-87.6441, count: 6},{lat: 42.3998, lng:-88.8271, count: 1},{lat: 33.1464, lng:-97.0902, count: 1},{lat: 47.2432, lng:-93.5119, count: 1},{lat: 41.6472, lng:-93.46, count: 1},{lat: 36.1213, lng:-76.6414, count: 1},{lat: 41.649, lng:-93.6275, count: 1},{lat: 44.8547, lng:-93.7854, count: 1},{lat: 43.6833, lng:-79.7667, count: 1},{lat: 40.6955, lng:-89.4293, count: 1},{lat: 37.6211, lng:-77.6515, count: 1},{lat: 37.6273, lng:-77.5437, count: 3},{lat: 33.9457, lng:-118.039, count: 1},{lat: 33.8408, lng:-118.079, count: 1},{lat: 40.3933, lng:-74.7855, count: 1},{lat: 40.9233, lng:-73.9984, count: 1},{lat: 39.0735, lng:-76.5654, count: 1},{lat: 40.5966, lng:-74.0775, count: 1},{lat: 40.2944, lng:-73.9932, count: 2},{lat: 38.9827, lng:-77.004, count: 1},{lat: 38.3633, lng:-81.8089, count: 1},{lat: 36.0755, lng:-79.0741, count: 1},{lat: 51.0833, lng:-114.083, count: 2},{lat: 49.1364, lng:-122.821, count: 1},{lat: 39.425, lng:-84.4982, count: 3},{lat: 38.7915, lng:-82.9217, count: 1},{lat: 39.0131, lng:-84.2049, count: 1},{lat: 29.7523, lng:-95.367, count: 7},{lat: 29.7523, lng:-95.367, count: 4},{lat: 41.5171, lng:-71.2789, count: 1},{lat: 29.7523, lng:-95.367, count: 2},{lat: 32.8148, lng:-96.8705, count: 1},{lat: 45.5, lng:-73.5833, count: 1},{lat: 40.7529, lng:-73.9761, count: 6},{lat: 33.6534, lng:-112.246, count: 1},{lat: 40.7421, lng:-74.0018, count: 1},{lat: 38.3928, lng:-121.368, count: 1},{lat: 32.7825, lng:-96.8207, count: 1},{lat: 39.7968, lng:-76.993, count: 2},{lat: 40.5607, lng:-111.724, count: 1},{lat: 41.2863, lng:-75.8953, count: 1},{lat: 26.3484, lng:-80.2187, count: 1},{lat: 32.711, lng:-117.053, count: 2},{lat: 32.5814, lng:-83.6286, count: 3},{lat: 35.0508, lng:-80.8186, count: 3},{lat: 35.0508, lng:-80.8186, count: 1},{lat: -22.2667, lng:166.45, count: 5},{lat: 50.1167, lng:8.6833, count: 1},{lat: 51.9167, lng:4.5, count: 2},{lat: 54, lng:-2, count: 6},{lat: 52.25, lng:21, count: 1},{lat: 49.1, lng:10.75, count: 3},{lat: 51.65, lng:6.1833, count: 1},{lat: 1.3667, lng:103.8, count: 1},{lat: 29.4889, lng:-98.3987, count: 11},{lat: 29.3884, lng:-98.5311, count: 1},{lat: 41.8825, lng:-87.6441, count: 2},{lat: 41.8825, lng:-87.6441, count: 1},{lat: 33.9203, lng:-84.618, count: 4},{lat: 40.1242, lng:-82.3828, count: 1},{lat: 40.1241, lng:-82.3828, count: 1},{lat: 43.0434, lng:-87.8945, count: 1},{lat: 43.7371, lng:-74.3419, count: 1},{lat: 42.3626, lng:-71.0843, count: 1},{lat: 4.6, lng:-74.0833, count: 1},{lat: 19.7, lng:-101.117, count: 1},{lat: 25.6667, lng:-100.317, count: 1},{lat: 53.8167, lng:10.3833, count: 1},{lat: 50.8667, lng:6.8667, count: 3},{lat: 55.7167, lng:12.45, count: 2},{lat: 44.4333, lng:26.1, count: 4},{lat: 50.1167, lng:8.6833, count: 2},{lat: 52.5, lng:5.75, count: 4},{lat: 48.8833, lng:8.7, count: 1},{lat: 17.05, lng:-96.7167, count: 3},{lat: 23, lng:-102, count: 1},{lat: 20.6167, lng:-105.25, count: 1},{lat: 23, lng:-102, count: 2},{lat: 20.6667, lng:-103.333, count: 1},{lat: 21.1167, lng:-101.667, count: 1},{lat: 17.9833, lng:-92.9167, count: 1},{lat: 20.9667, lng:-89.6167, count: 2},{lat: 21.1667, lng:-86.8333, count: 1},{lat: 17.9833, lng:-94.5167, count: 1},{lat: 18.6, lng:-98.85, count: 1},{lat: 16.75, lng:-93.1167, count: 1},{lat: 19.4342, lng:-99.1386, count: 1},{lat: -10, lng:-55, count: 1},{lat: -22.9, lng:-43.2333, count: 1},{lat: 15.7833, lng:-86.8, count: 1},{lat: 10.4667, lng:-64.1667, count: 1},{lat: 7.1297, lng:-73.1258, count: 1},{lat: 4, lng:-72, count: 2},{lat: 4, lng:-72, count: 1},{lat: 6.8, lng:-58.1667, count: 1},{lat: 0, lng:0, count: 1},{lat: 48.15, lng:11.5833, count: 2},{lat: 45.8, lng:16, count: 15},{lat: 59.9167, lng:10.75, count: 1},{lat: 51.5002, lng:-0.1262, count: 1},{lat: 55, lng:73.4, count: 1},{lat: 52.5, lng:5.75, count: 1},{lat: 52.2, lng:0.1167, count: 1},{lat: 48.8833, lng:8.3333, count: 1},{lat: -33.9167, lng:18.4167, count: 1},{lat: 40.9157, lng:-81.133, count: 2},{lat: 43.8667, lng:-79.4333, count: 1},{lat: 54, lng:-2, count: 2},{lat: 39, lng:22, count: 1},{lat: 54, lng:-2, count: 11},{lat: 54, lng:-2, count: 4},{lat: 54, lng:-2, count: 3},{lat: 9.0833, lng:-79.3833, count: 2},{lat: 21.5, lng:-104.9, count: 1},{lat: 19.5333, lng:-96.9167, count: 1},{lat: 32.5333, lng:-117.017, count: 1},{lat: 19.4342, lng:-99.1386, count: 3},{lat: 18.15, lng:-94.4167, count: 1},{lat: 20.7167, lng:-103.4, count: 1},{lat: 23.2167, lng:-106.417, count: 2},{lat: 10.9639, lng:-74.7964, count: 1},{lat: 24.8667, lng:67.05, count: 2},{lat: 1.2931, lng:103.856, count: 1},{lat: -41, lng:174, count: 1},{lat: 13.75, lng:100.517, count: 2},{lat: 13.75, lng:100.517, count: 46}];
                // important: a datapoint now contains lat, lng and count property!
                var testData={
                        max: 46,
                        data: dat
                };

                // now we can set the data
                google.maps.event.addListenerOnce(map, "idle", function(){
                    // this is important, because if you set the data set too early, the latlng/pixel projection doesn't work
                    heatmap.setDataSet(testData);
                });
            });
        </script>
    </body>
</html> 
```

# ruby-on-rails - 对嵌套目录使用高压

> ID：14726248
> 
> 赞同：1
> 
> 时间：2013-02-06T10:05:01.020
> 
> 标签：ruby-on-rails, routes, url-routing, high-voltage

我有一个 rails 3.2 应用程序，我在其中使用 gem [High Voltage](https://github.com/thoughtbot/high_voltage)作为我的公共页面。它似乎工作正常，但是，我希望能够在我的 pages 文件夹中放置一些子目录。

例如：

```
/pages
--/directory_1
----index.html.erb
--/directory_2
----index.html.erb 
```

在此示例中，我想将浏览器指向`pages/directory_1/index`等。文档声称这是可能的：

> 您可以在目录结构中嵌套页面，如果从 URL 角度来看这对您有意义：link_to "Q4 Reports", page_path("about/corporate/policies/HR/en_US/biz/sales/Quarter-Four")

但类似的东西对我不起作用。

我已经尝试过使用命名空间：

```
namespace :directory_1 do
  match "pages/:id" => "high_voltage/pages#show"
end 
```

但这当然会转到`directory_1/high_voltage/pages#show`，这是错误的。

简单地做匹配`"pages/directory_1/:id" => "high_voltage/pages#show"`有两个问题：它不再允许页面目录本身中的任何视图，并且不同子目录中具有相同文件名的视图会混淆。

那么如何使用高压完成页面目录中的嵌套目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:47:19.933

只需在内部创建一个目录结构`app/views/pages`以反映您需要的 URL 层次结构。

例如，如果您创建了一个名为`about.html.erb`path的视图`app/views/pages/about_me/about.html.erb`，您将通过使用

```
<%= link_to "About", page_path("about_me/about") %> 
```

我在当前项目中得到了这个确切的解决方案。

# c# - 使用应用时替换 app.config 文件

> ID：14726253
> 
> 赞同：0
> 
> 时间：2013-02-06T10:05:06.703
> 
> 标签：c#, app-config

我们需要对应用程序的 app.config 文件中的字符串进行一些小改动。

为避免对所有 PC 进行完整打包部署，我们希望替换每台 PC 上的 app.config 文件。

如果应用程序当前正在使用它，应用程序会锁定 app.config 文件吗？是否允许替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:07:36.333

App.config 在首次访问时被缓存，因此该文件在程序执行的整个期间都不会被锁定。

也就是说，在下次重新启动程序之前，您所做的任何更改都不会产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:06:39.970

它应该可以很好地替换（其他条件相同），但加载的数据不会自动失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:11:59.917

您需要使用`System.Configuration.ConfigurationManager`命名空间。此处的详细信息：http: [//msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

需要考虑的事项：

*   **用户**是否具有 App.Config 的写入权限？
*   您是否需要立即实施更改？

对于后者，请确保`RefreshSection(...)`在终止应用程序之前调用例程。否则，您的应用程序很可能会恢复到其缓存的**app.config**副本。

# ssms - 可以在 MS SQL Server Management Studio 中显示可编辑行并选择按列排序

> ID：14726260
> 
> 赞同：0
> 
> 时间：2013-02-06T10:05:15.347
> 
> 标签：ssms, sql-server-2008

我不确定是否提出正确的问题，但在这里我必须根据某些条件编辑行/单元格，即
我打开**MS SQL Server Management Studio**，右键单击 tableName 并选择**Edit Top Row**，它显示可编辑窗口，我可以在其中编辑单元格值，最后单击`Execute SQl`以更新记录。

我想知道是否可以显示具有特定列排序的可编辑窗口

![在此处输入图像描述](../Images/2fbd2cff83abc4de753ccde33b62730b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:19:51.997

是的，你可以，这有点繁琐，但你必须做的是：

右键单击您的表并选择“编辑前 200 行” 在结果屏幕中，右键单击并选择“窗格”->“SQL”

然后，您将看到正在执行的 SQL 命令，以查看前 200 个结果以及可编辑窗格。

编辑 SQL 以添加您的 order by 子句（或您想在编辑窗格中看到的任何内容） 在 SQL 窗格中右键单击并选择“执行 SQL”

您将看到可编辑窗格现在更新以反映您的查询。

编辑表格时，请确保在单击执行 SQL 之前可编辑窗格具有焦点，否则您的结果将丢失（确保这一点的简单方法是右键单击结果窗格并从那里单击执行 SQL）

# servicestack - 可以通过 servicestack 支持 protobuf-net 和 json 客户端吗？

> ID：14726272
> 
> 赞同：1
> 
> 时间：2013-02-06T10:05:46.213
> 
> 标签：servicestack

您能否在服务器端传递 protobuf 消息并让 ServiceStack 将其转换为 JavaScript 的 JSON 并将其保留为非 JavaScript 客户端的 protobuf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:05:24.770

[ServiceStack](http://www.servicestack.net/)支持通过 ProtoBuf 和 JSON 端点调用相同的服务，是的。

但是 ProtoBuf 和 JSON 有线格式之间没有神奇的转换，当被 JSON ServiceClient 或 HTTP 客户端（例如 jQuery）调用时，您的服务只会返回 JSON，同样，当被 P​​rotoBufServiceClient 调用时它会返回 Protocol Buffers 格式。

# javascript - jQuery ajax 表单错误

> ID：14726275
> 
> 赞同：1
> 
> 时间：2013-02-06T10:05:56.970
> 
> 标签：javascript, jquery, asp.net-mvc-4, jquery-validation-engine

那是我在使用点击事件时遇到错误。在服务器端代码完成之前，Ajax 调用被“取消”。然后我在 $Ajax 错误方法上做了一个调试器，statusText 只是说`statusText: "error"`。我通过删除`<form id="formid">.... <form/>`. 但由于我使用的是 jQuery.ValidationEnginen，它只能用于 .

jQuery代码：

```
$("#formid").validationEngine('attach', { scroll: false }).css({ color: "#4a6b0e" });

    $('#submitLogin').click(function () {
          var self = this;
            var UserName = $("#UserName").val();
            var Password = $("#Password").val();
            var RememberMe = $("#RememberMe").val();
            var PropertyId = ol.property.infoId;
            $.ajax({
                type: "POST",
                url: ol.url("~/Authentication/LogIn"),
                data: { "UserName": UserName, "Password": Password, "RememberMe": RememberMe },
                success: function (data) {

                  if (data.Errormes) {
                    $("#Result").html("Error: " + data.Errormes);
                  } else {
                    window.location.reload();
                  }
                },
                error: function (data, arg1, arg2, arg3) {
                  alert("Error: Run for your life!!");
                }
            });
        }); 
```

表格：

```
<form id="formid">
            <div class="LeftCol">Brugernavn</div>
            <div class="RightCol">
                <input type="text" style="width: 250px" id="UserName" name="UserName" class="validate[required,custom[email]]">
            </div>
            <div class="LeftCol">Adgangskode</div>
            <div class="RightCol">
                <input type="password" style="width: 250px" id="Password" name="Password" class="validate[required]" />
            </div>
            <div class="LeftCol">Husk mig?</div>
            <div class="RightCol">
                <input data-val="true" data-val-required="The Remember me? field is required." id="RememberMe" name="RememberMe" type="checkbox" value="true">
            </div>
                <br><div class="RightCol" id="Result" style="color:red;"></div><br>
        <input id="submitLogin" type="submit" value="Log in" class="oline-button-green white" />
 </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:12:54.457

尝试添加这个：

```
 $('#submitLogin').click(function (e) {
    e.preventDefault();
   // ...
 }); 
```

由于您将单击事件绑定到提交按钮，因此您的 ajax 请求正在异步发送，并且表单也正在发送，这导致页面重新加载并取消 ajax 请求。

为避免在单击提交按钮时提交表单，您必须通过使用来阻止提交按钮的默认行为`e.preventDefault();`

# xml - XML中的根节点是什么？

> ID：14726276
> 
> 赞同：6
> 
> 时间：2013-02-06T10:06:03.823
> 
> 标签：xml, xslt

我正在阅读一本电子书，它具有以下 xml 代码。

```
<?xml version="1.0"?>
<?xml-stylesheet href="sonnet.xsl" type="text/xsl"?>
<?cocoon-process type="xslt"?>
<!DOCTYPE sonnet [
  <!ELEMENT sonnet (auth:author, title, lines)>
  <!ATTLIST sonnet public-domain CDATA "yes"
      type (Shakespearean | Petrarchan) "Shakespearean">
  <!ELEMENT auth:author (last-name,first-name,nationality,
      year-of-birth?,year-of-death?)>
  <!ELEMENT last-name (#PCDATA)>
  <!ELEMENT first-name (#PCDATA)>
  <!ELEMENT nationality (#PCDATA)>
  <!ELEMENT year-of-birth (#PCDATA)>
  <!ELEMENT year-of-death (#PCDATA)>
  <!ELEMENT title (#PCDATA)>
  <!ELEMENT lines (line,line,line,line,
      line,line,line,line,line,line,line,
      line,line,line)>
  <!ELEMENT line (#PCDATA)>
]>
<!-- Default sonnet type is Shakespearean, the other allowable -->
<!-- type is "Petrarchan." -->
<sonnet type="Shakespearean">
  <auth:author xmlns:auth="http://www.authors.com/">
    <last-name>Shakespeare</last-name>
    <first-name>William</first-name>
    <nationality>British</nationality>
    <year-of-birth>1564</year-of-birth>
    <year-of-death>1616</year-of-death>
  </auth:author>
  <!-- Is there an official title for this sonnet? They're
  sometimes named after the first line. -->
  <title>Sonnet 130</title>
  <lines>
    <line>My mistress' eyes are nothing like the sun,</line>
    <line>Coral is far more red than her lips red.</line>
    <line>If snow be white, why then her breasts are dun,</line>
    <line>If hairs be wires, black wires grow on her head.</line>
    <line>I have seen roses damasked, red and white,</line>
    <line>But no such roses see I in her cheeks.</line>
    <line>And in some perfumes is there more delight</line>
    <line>Than in the breath that from my mistress reeks.</line>
    <line>I love to hear her speak, yet well I know</line>
    <line>That music hath a far more pleasing sound.</line>
    <line>I grant I never saw a goddess go,</line>
    <line>My mistress when she walks, treads on the ground.</line>
    <line>And yet, by Heaven, I think my love as rare</line>
    <line>As any she belied with false compare.</line>
  </lines>
</sonnet>
<!-- The title of Sting's 1987 album "Nothing like the sun" is -->
<!-- from line 1 of this sonnet. 
```

问题是当我继续阅读其余部分时，我以为我误解了根元素是什么。根据我的知识，根节点是`<sonnet>`节点。

但在书中我发现下一个

> 与其他节点不同，根节点没有父节点。它总是至少有一个子元素，即文档元素。根节点还包含文档元素之外的注释或处理指令。在我们的示例文档中，名为 xmlstylesheet 和 cocoon-process 的两个处理指令都是根节点的子节点，出现在标记之前的注释和出现在标记之后的注释也是如此。

根据该整个文档被视为根。如果是的话是什么？很明显，处理指令和注释不是节点的子节点。

我明白了吗？

更新

```
<?xml version="1.0"?> 
<Food> 
  <Cateogry> Vegetable</Cateogry>
  <Cateogry> Fruits</Cateogry>
  <Cateogry> other</Cateogry>
</Food> 
```

这里的根元素是什么？不是食物吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T10:13:28.703

根节点没有视觉表现或文本表示。它是一个概念节点，包含文档中的所有其他内容。在您的文档示例中，它将是这样的：

```
/ (root node)
   |-- processing-instruction() xml-stylesheet
   |-- processing-instruction() cocoon-process 
   |-- comment()
   |-- comment()
   |-- sonnet   (document element)
        |-- auth:author
             |-- last-name
             |-- ....
        |-- comment()
        |-- title
        |-- lines
             |-- line
             |-- line
             |-- ....
   |-- comment()
   |-- comment() 
```

如此处所示，您示例中的根节点有 2 条处理指令、4 条注释和 1 个作为子节点的元素。

这个单一的子元素（十四行诗）就是所谓的“文档元素”。它有时也被称为“根元素”，但许多人喜欢避免使用这个术语，以尽量减少与“根节点”的混淆，因为它们是两个完全独立的东西。

# php - INNODB 和 mysql PDO 驱动程序锁定在共享模式

> ID：14726281
> 
> 赞同：2
> 
> 时间：2013-02-06T10:06:16.837
> 
> 标签：php, mysql, pdo, innodb

使用 INNODB，您可以添加到您的查询`LOCK IN SHARE MODE;`中，以便其他用户仍然可以阅读但不能更新，直到正在编辑的用户完成。

我当前在 PHP 中的 PDO 函数如下所示：

```
//$this->db is a PDO connection to the MYSQL innodb database.
try 
    {
    $this->db->beginTransaction();
    $tmp = $this->db->prepare($query);  

    $tmp->execute($arr);
    $this->last_id = $this->db->lastInsertId();
    $this->db->commit();
    return $this->last_id;
    }
catch(PDOException $ex)
    {
    $this->db->rollBack();
    return $ex->getMessage();
    } 
```

是否有 PDO 驱动程序功能设置以将其设置为共享模式？如果是这样怎么办？我发现唯一的事情没有答案，文档也不是很清楚。还是应该将其简单地添加到查询字符串中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:59:39.463

您必须创建查询以匹配 MySQL 语法，仅此而已，例如：

```
SELECT * FROM parent WHERE NAME = 'Jones' LOCK IN SHARE MODE 
```

只需将 LOCK IN SHARE MODE 附加到查询字符串即可。

# c# - 自定义属性和 lambda 表达式

> ID：14726285
> 
> 赞同：2
> 
> 时间：2013-02-06T10:06:26.197
> 
> 标签：c#, .net, linq, linq-to-sql, lambda

我已向 LINQ-to-SQL 实体添加了一个自定义属性：

```
public partial class User
{
    public bool IsActive
    {
        get
        {
            // note that startDate and endDate are columns of User table
            return startDate <= DateTime.Now && endDate >= DateTime.Now;
        }
    }
} 
```

现在我需要将此属性与 lambda 表达式一起使用：

```
activeUsers = users.Where(u => u.IsActive); 
```

但是当执行此代码时，我得到一个`System.NotSupportedException`. 异常消息显示*“不支持成员 'User.IsActive' 的 SQL 转换”*。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T10:25:21.280

您展示的`IsActive`是常规 C# - 它将被编译为 IL，并且不可用于 LINQ-to-SQL（等）检查并转换为 TSQL 以在数据库中执行。这里的一种选择可能是：

```
public static Expression<Func<User,bool>> GetIsActiveFilter() {
    return user => user.StartDate <= DateTime.Now &&
                   user.EndDate >= DateTime.Now;
} 
```

那么你应该可以使用：

```
activeUsers = users.Where(User.GetIsActiveFilter()); 
```

或类似地-也许是扩展方法：

```
public static IQueryable<User> ActiveOnly(this IQueryable<User> users) {
    return users.Where(user => user.StartDate <= DateTime.Now &&
                               user.EndDate >= DateTime.Now);
} 
```

然后：

```
activeUsers = users.ActiveOnly(); 
```

这里的不同之处在于我们始终使用`IQueryable<T>`接口和*表达式树*，这使得 LINQ 能够理解我们的*意图*，并创建合适的 TSQL 来实现相同的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:07:45.307

您可以尝试以下方法：

```
activeUsers = users.AsEnumerable().Where(u => u.IsActive); 
```

请注意，条件 IsActive 不会被转换为 SQL，因为 IsActive 背后的逻辑从数据库的角度来看是未知的。因此数据库将对整个表用户执行读取，并且标准将在内存中应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:56:15.697

我以这种方式解决了我的类似问题：

我的 ORM 是 NHibernate，底层数据库是 Oracle，当我需要添加一些像 IsActive 这样的字段时，做了这样的事情

```
public partial class User
{
   public bool IsActive{get;set;}
} 
```

在相关的映射文件中添加类似这样的内容

```
<property name="IsActive" access="property" insert="false" update="false"
  formula="case when startDate  <= sysdate And endDate  >= sysdate then 1 else 0 end" /> 
```

现在你可以使用

```
activeUsers = users.Where(u => u.IsActive); 
```

# php - 需要在基于 php web 的文档管理系统中查看 ms office 文档

> ID：14726288
> 
> 赞同：1
> 
> 时间：2013-02-06T10:06:41.790
> 
> 标签：php, document, viewer

我想为我用 php 和 mysql 制作的内部文档管理系统制作 MS office docs 和 pdf 的文档查看器。我不希望用户能够编辑这些文档。我们需要使其浏览器友好，因为我们的系统是基于网络的。

提前致谢

钦坦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:12:57.543

你也可以使用 iframe

```
<iframe src="http://docs.google.com/gview?url=http://infolab.stanford.edu/pub/papers/google.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe> 
```

但你应该`[http://infolab.stanford.edu/pub/papers/google.pdf](http://infolab.stanford.edu/pub/papers/google.pdf)`用你自己的地址替换。正如我所提到的，文档查看器适用于 PDF 和 PPT 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:08:16.630

您可以使用`Google Docs`它并将其嵌入到您的页面中。您可以执行以下操作：

```
http://docs.google.com/viewer?url=YourDocumentUrlHere 
```

所有查看器 URL 都应使用 path `http://docs.google.com/viewer`。此路径接受两个参数：

```
url : The URL of the document to view. This should be URL-encoded.
embedded : If set to true , the viewer will use an embedded mode interface. 
```

**编辑：**

在您评论您不想将文件上传到`Google`服务器后，您仍然可以`COM libraries`在操作系统中使用通过`PHP`打开 MS Office 文档。

```
$doc = new COM("word.application") or die ("Could not initialise MS Word object.");
$doc->Documents->Open(realpath("YourDocument.doc")); 
// Extract content.
$content = (string) $doc->ActiveDocument->Content;
echo $content;
$doc->ActiveDocument->Close(false);
$doc->Quit();
$doc = null;
unset($doc); 
```

您可以进一步使用 CSS 和 HTML 格式化要显示的文本。希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:09:32.850

我们做到了！！！

在上传文档时，我们将原始文档存储在存储库中。在查看文档时，我们使用 JODconverter 和 openoffice 来查看 iframe 中的文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:47:38.413

您可以为此目的使用[GroupDocs Viewer](http://groupdocs.com/apps/viewer)。您需要做的就是将其嵌入到您的页面中，文档（DOC、PDF、PPT、XLS 等）将可供查看。它是一个用户和浏览器友好的工具。要嵌入文档，它将提供一个嵌入代码，您可以使用它。

我推荐它是因为我发现这个查看器比 Google 文档更安全，而且文档渲染速度非常快并且接近原始文档。

# twitter - 用于主题检测的推文之间的表示和良好的相似性度量

> ID：14726292
> 
> 赞同：6
> 
> 时间：2013-02-06T10:06:49.833
> 
> 标签：twitter, machine-learning, cluster-analysis, information-retrieval, topic-modeling

我打算在*Twitter 上*写一个主题检测工具。我一直在考虑两条*推文*之间的良好相似性度量（距离） ，以及如何表示它们，并计算：

*   **`#hashtags`**（我认为主题标签在检测 Twitter 上的主题时非常重要）
*   回复（如果有人回复一条*推文*，这些推文*可能*在谈论同一个话题，尽管两个人可以开始谈论*三星银河*并结束谈论*iPhone 越狱*等）

我正在考虑实施我目前所拥有的并做一些实验。我将实现经典模型（例如`TF*IDF`并使用*欧几里德距离*、*角度余弦*等），以及带有一些相似性度量的布尔模型（*Hamming*、*Jaccard*等）。

关于如何使一些现有模型适应**Twitter**的任何想法或关于如何创建新模型的一些想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:48:22.917

[Twitter 上的相似度度量](http://pulkitgoyal.in/2012/03/17/similarity-metrics-twitter/)讨论了有关可用于将来自 twitter 的数据聚集在一起的不同相似度度量的一些细节。我们基于用户连接、用户提及、地理位置、推文之间的内容相似性、用户描述之间的内容相似性和常见的#hashtags 对 Twitter 上的用户进行了一些研究。

为了在 twitter 上找到共同话题，找到讨论话题的用户之间的联系确实很有帮助，我们发现一组用户倾向于讨论一个共同话题。[在这篇文章](http://www.sapandiwakar.in/academics/analysis-of-fast-modularity-clustering-on-twitter/)的后半部分有一些关于这个的细节。

# python - 如何在pyqt中使PyQt窗口状态最大化

> ID：14726296
> 
> 赞同：37
> 
> 时间：2013-02-06T10:07:02.880
> 
> 标签：python, pyqt4, maximize

我在我的应用程序中使用 PyQt4 作为 GUI。

我想知道如何让我的窗口默认最大化。

我目瞪口呆，但没有找到替代品。

我尝试使用下面的代码，但它不是最大化，而是将窗口调整为桌面屏幕大小。

但是我需要按下窗口标题栏右侧的最大化按钮 wt 时会看到的效果。

```
screen = QtGui.QDesktopWidget().screenGeometry()
self.setGeometry(0, 0, screen.width(), screen.height()) 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-06T10:10:08.850

从[文档](http://qt-project.org/doc/qt-4.8/qwidget.html#showMaximized)：

```
self.showMaximized() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-14T22:04:56.317

如果你想要全屏，你必须使用：

```
self.showFullScreen() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-02T22:48:51.463

根据上面给出的语句，您可以使用它来使用 F11 键切换状态（并退出 Esc 键）

```
def keyPressEvent(self, e):  
    if e.key() == QtCore.Qt.Key_Escape:
        self.close()
    if e.key() == QtCore.Qt.Key_F11:
        if self.isMaximized():
            self.showNormal()
        else:
            self.showMaximized() 
```

# wpf - WPF Databinding with ObservableCollection to Label

> ID：14726300
> 
> 赞同：4
> 
> 时间：2013-02-06T10:07:22.670
> 
> 标签：wpf, xaml, data-binding

我有一个 ObservableCollection，我需要绑定到 2 个标签，首先显示集合中的项目数，然后显示值的总和。

第一个标签绑定到集合计数属性，第二个标签直接绑定到 ObservableCollection，使用转换器计算所有项目的总数

XAML 看起来像这样

```
<Grid>
    <ListBox Name="itemList" ItemsSource="{Binding DataList}"/>
    <Label Name="lblcount" Content="{Binding DataList.Count}" />
    <Label Name="lblTotal" Content="{Binding DataList, Converter={StaticResource calculateTotalConvertor}" />
</Grid> 
```

我的虚拟机有一个这样的集合

```
 ObservableCollection<int> data = new ObservableCollection<int>();

    public ObservableCollection<int> DataList
    {
        get { return data; }
        set { data = value; }
    } 
```

我的转换器代码是

```
public class CalculateTotalConvertor : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        ObservableCollection<int> collection = value as ObservableCollection<int>;

        return collection.Sum();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

问题是在 DataList、ListView 中添加新项目，并且显示项目计数的标签会更新，但“lblTotal”不会随总数更新。

基本上如何强制您的绑定在 ObservableCollection 更改时进行评估？它如何直接用于 ListView 或 DataGrid 但不适用于 label ？

我知道这个问题可以通过在 VM 中创建一个属性来解决，以在集合更新时显示总数并引发属性更改，但是还有比这更好的解决方案吗？

当然，这是我实际问题的简化形式，我无法访问 ViewModel 和集合，它是第三方控件。我正在创建一个包装用户控件，并与视图与其内部集合进行相对绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:54:25.363

其他答案正确解释了为什么它没有更新。要强制它更新，您可以将转换器更改为`IMultiValueConverter`：

```
public class CalculateTotalConvertor : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        ObservableCollection<int> collection = values.FirstOrDefault() as ObservableCollection<int>;

        return collection.Sum();
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后将您的绑定更改为`MultiBinding`也拉入计数的 a：

```
<Label Name="lblTotal">
    <Label.Content>
        <MultiBinding Converter="{StaticResource calculateTotalConvertor}">
            <Binding Path="DataList"/>
            <Binding Path="DataList.Count"/>
        </MultiBinding>
    </Label.Content>
</Label> 
```

现在第二个绑定将在添加或删除项目时通知绑定需要更新，但您可以忽略计数值而不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:47:28.267

它没有更新，因为它绑定到`DataList`并且`DataList`没有更改，计数标签更新，因为`DataList.Count`当项目添加到列表时它的绑定更新。

我能想到的更新`Sum`标签的唯一方法是通知 UI`DataList`已更改，但这将导致 ListBox 重新绑定列表，并且它的性能将比仅在模型更新上拥有一个属性要昂贵得多`Sum`. _

所以我认为最好的选择是使用模型上的属性来计算总和，使用`ObservableCollections` `CollectionChangedEvent`or 在将项目添加到列表的逻辑中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:10:49.573

它适用于`ListView`and `DataGrid`，因为这些是`ItemsControl`侦听`ObservableCollection`'s 的 s `CollectionChangedEvent`，当通过添加或删除项目更改集合本身时会引发它。

`Label`另一方面是`ContentControl`只听的`PropertyChangedEvent`。`ObservableCollection`由于插入后的DataList 与之前相同，因此不会引发任何事件。

**刚刚看到你的编辑：**

`CollectionChangedEvent`如果您正在创建一个包装控件，请为第 3 方控件命名，并从您的控件后面的代码中连接到其内部集合。这样您仍然可以将更新通知推送到您的包装视图。

使用额外的属性，它将为您节省一些转换器上的代码。从后面的代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    ObservableCollection<int> _list = new ObservableCollection<int>();
    int _sum = 0;
    Random rnd = new Random();

    public MainWindow()
    {
        DataList = new ObservableCollection<int>();
        DataList.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(DataList_CollectionChanged);
        DataContext = this;
        InitializeComponent();
    }

    void DataList_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                foreach (object number in e.NewItems)
                    _sum += (int)number;
                break;
            case NotifyCollectionChangedAction.Remove:
                foreach (object number in e.OldItems)
                    _sum -= (int)number;
                break;
        }
        OnNotifyPropertyChanged("Sum");
    }

    public int Sum { get { return _sum; } }
    public ObservableCollection<int> DataList { get; set; }

    private void Add_Btn_Click(object sender, RoutedEventArgs e)
    {
        DataList.Add(rnd.Next(0, 256));
    }

    private void Remove_Btn_Click(object sender, RoutedEventArgs e)
    {
        if (DataList.Count == 0)
            return;

        DataList.RemoveAt(DataList.Count - 1);
    }

    public event PropertyChangedEventHandler PropertyChanged;

    void OnNotifyPropertyChanged(string property)
    {
        if (PropertyChanged == null)
            return;

        PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

# vb.net - 如何覆盖水晶报告错误？

> ID：14726303
> 
> 赞同：1
> 
> 时间：2013-02-06T10:07:30.423
> 
> 标签：vb.net, crystal-reports, sap, crystal-reports-2008

我有一个水晶报表，它有一个来自 sql server 的数据源。当我们想要显示报表时，我总是收到这个错误。我也看到了连接。那个连接没有问题。

错误 ：

```
Unknown Query Engine Error
Failed to open a rowset.
Error in File C:\Users\ADMINI~1\AppData\Local\Temp\student{ED5C2412-C7A1-4E1D-8093-1EFDA02340ABD}.rpt:
Unknown Query Engine Error 
```

谁能帮我 ？

作为对这个问题的扩展，我发现一个问题是由报告中表的一列引起的，当我删除该字段时它工作正常。当报告从对 sql server 源的访问迁移时，它使用交叉连接进行转换。这样做仅从表链接中提出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:54:14.857

我确定这是否相关，但请尝试此[链接](http://social.msdn.microsoft.com/Forums/en/vscrystalreports/thread/5ae1b14e-ad6f-4093-baa2-a5d65a8a0bf0)中给出的解决方案。该解决方案建议您将此行添加到配置文件中：

```
<startup useLegacyV2RuntimeActivationPolicy="true"><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup> 
```

# c++ - 将 std::wstring 转换为 QString 的最佳方法

> ID：14726304
> 
> 赞同：20
> 
> 时间：2013-02-06T10:07:31.937
> 
> 标签：c++, qt, qstring, wstring

我目前正在做一个更大的项目，其中“逻辑”是用标准 C++ 实现的，所有字符串都被处理，`std::wstring`UI 部分是使用 Qt 实现的，因此是必然`QString`的（额外的问题：这是真的吗？）。

连接这两个世界的最佳方式是什么？

我知道我可以使用类似的东西

```
std::wstring wideString;
QString qtString = QString::fromStdWString(wideString); 
```

但我想知道是否有更好的方法来减少打字。我想到了一个用户定义的运算符，但我没有足够的经验来独自解决这个问题。

如果有人能指出我正确的方向，我会很高兴。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T10:19:11.717

如果 Qt 使用与您的项目完全相同的 STL 头文件进行编译，那么使用它是一个好主意（！！！`QString::fromStdWString` **）**。如果没有 - 你可以得到很多乐趣，抓住一个错误。

如果您不确定两个 STL 标头是否相同，请使用`QString::fromWCharArray`：

```
std::wstring wideString;
QString qtString = QString::fromWCharArray( wideString.c_str() ); 
```

**更新：**回复@juzzlin：
让我们想象一下 Qt 是使用包含以下内容的 STL 构建的`std::wstring`：

```
class wstring { // I know, that there's no such class, but I'm shure you'll understand what I want to say
    wchar_t * m_ptr;
    size_t m_length;
    ...
}; 
```

并且您拥有包含以下内容的 STL `std::wstring`：

```
class wstring {
    wchar_t * m_ptr;
    wchar_t * m_the_end;
    ...
}; 
```

如果您将`std::wstring`Qt 交给 Qt，它会将`m_the_end`指针解释为字符串的长度，并且

> 你可以得到很多乐趣，抓住一个错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:13:12.657

我认为用户定义的转换是您正在寻找的，据我所知，它应该看起来像这样：

```
class foo
{
public:
   operator QString(std::wstring& ws)
   {
       return QString::fromStdWString(ws);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:11:06.187

也许制作一个内联函数`QString toQString(std::wstring string)`以使其“少打字”......

但老实说......不时写它根本不是很大的努力;）

苏龙仔

# neo4j - Neo4J中如何实现复合键

> ID：14726306
> 
> 赞同：8
> 
> 时间：2013-02-06T10:07:34.073
> 
> 标签：neo4j, composite-key

我需要确保所有节点中多个属性值的组合是唯一的。如何在 Neo4J 中做到这一点。

从[http://docs.neo4j.org/chunked/milestone/transactions-unique-nodes.html](http://docs.neo4j.org/chunked/milestone/transactions-unique-nodes.html)提供的 Neo4J 文档，可以确保一个属性的唯一性。但是2个或更多的组合呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:42:02.690

你可以试试

```
 public Node getOrCreateUserWithUniqueFactory(final String firstName, final String lastname, GraphDatabaseService graphDb) {
    UniqueFactory<Node> factory = new UniqueFactory.UniqueNodeFactory(graphDb, "users") {
      @Override
      protected void initialize(Node created, Map<String, Object> properties) {
        created.setProperty("id", properties.get("id"));

        created.setProperty("firstName", firstName);
        created.setProperty("lastName", lastname);
      }
    };

    return factory.getOrCreate("id", firstName + "_" + lastname);
  } 
```

# ios6 - 在 xcode 中使用信号 6 终止应用程序

> ID：14726310
> 
> 赞同：11
> 
> 时间：2013-02-06T10:07:43.987
> 
> 标签：ios6

当我没有将 xcode 升级到 ios 6 时，我的项目运行良好。但升级后我出现了这个错误......

collect2: ld 以信号 6 [Abort trap: 6] ld(22918,0x7fff72e6f960) malloc: *** 对象 0x7fe300c4d130 的错误：未分配指针被释放 ***在 malloc_error_break 中设置断点以调试命令 /Applications/Xcode.app/Contents /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 失败，退出代码为 1

我试图在网上找到这个但没有找到任何类似的问题或任何解决方案..请尽快寻求帮助....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-03-08T16:26:03.690

突然之间这也发生在我身上，clear and build 解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-27T07:38:47.497

从 Edit Scheme -> Run -> Uncheck Thread Sanitizer 中禁用线程清理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T13:49:31.567

I also got a problem with exit code signal 6\. In my case, the problem was, I defined the `UIStoryboard` at `Build as:` with a `iOS` version higher than the `UIDevice` I was installing the app.

Maybe you are going to check this, didn't have this problem before, so might be possible it solves yours too.

Here a screenshot where to go inside the `File Inspectore`:

![enter image description here](../Images/2bc82442890be3632a5424dcb82c769e.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-01T13:31:02.143

我遇到了错误。这是由于`UserDefault`类的错误使用引起的。如您所知，这些`UserDefault`方法应该在 UI 线程（主线程）中执行，并且您仅限于要保存的类型。我在非主线程中调用了这些`UserDefault`方法，我也尝试保存`struct`. 然后我**从调试器收到消息：由于信号 6 而终止**。最后，我将执行线程设为主线程和 type `dictionary`。我克服了这个错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-26T15:41:00.433

这与在后台线程中更新 UI 有关。您应该在主线程中更改 UI。

# java - jsp tomcat中的c3p0连接池与netbeans

> ID：14726313
> 
> 赞同：2
> 
> 时间：2013-02-06T10:07:49.243
> 
> 标签：java, jsp, web, connection-pooling, c3p0

我正在jsp中执行连接池操作。**我在名为MCE_Server.java**的特定类中创建了一个静态函数，并包含以下内容

```
 public static void makeConnectionPool()
 {
    try
    {
        cpds = new ComboPooledDataSource();
        cpds.setDriverClass("com.mysql.jdbc.Driver");
        cpds.setJdbcUrl("jdbc:mysql://localhost:3306/mce_db");
        cpds.setUser("root");
        cpds.setPassword("xxxxxx");
        cpds.setMaxPoolSize(100);
        cpds.setMinPoolSize(10);
        cpds.setAcquireIncrement(20);
    } 
    catch (PropertyVetoException ex) 
    {

        Logger.getLogger(MCE_Server.class.getName()).log(Level.SEVERE, null, ex);
    }

 } 
```

从jsp页面调用以下静态函数

`http://................/dbActivatePage.jsp`

我在哪里包含了这个功能

```
 <%@page import="xxxxx.MCE_Server"%>
      <html>
      .
      .
      .
      <body>
      <%
              MCE_Server.makeConnectionPool();
      %>
      .
      .
      .
      </body>
      </html> 
```

**我计划根据MCE_Server.java**中包含的静态函数获取所需的连接，如下所示：

```
 public static Connection getConnectionfromPool() throws SQLException
       {
             return cpds.getConnection();
       } 
```

即每当我需要连接时。我将包括`MCE_Server.getConnectionfromPool()`.

现在我遇到的问题是我收到一个错误

`java.sql.SQLException: Connections could not be acquired from the underlying database!`

***为什么我得到这个......？？***

在进一步的试验和错误方法中......我发现代码下面的语句 `cpds = new ComboPooledDataSource();`正在执行。

***那么，这里可能有什么问题。我的方法正确吗？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:43:04.110

这不是一个好方法。每次客户端访问您的页面时，JSP 的 <% ... %> 中的内容都会被执行。每个 Web 应用程序只能创建一次连接池，而不是每个用户请求一次！

我最喜欢在 web 应用程序中设置连接池的方法是设置一个 ServletContextListener，它在 contextInitialized(ServletContextEvent sce) 中创建池，并将其绑定到应用程序范围内的名称（即它设置 ServletContext 属性） . 池应该在 ServletContextListener 的 contextDestroyed 方法中关闭（）。

如果这看起来工作量太大，只需将您的 makeConnectionPool() 更改为私有方法并仅从静态初始化程序块内部调用它。摆脱 <% MCE_Server.makeConnectionPool(); %> 完全。那么 makeConnectionPool() 将只被调用一次，当 MCE_Server 类被加载时。但是由于您从不破坏池，如果您卸载并热重新部署应用程序（即您修改并重新加载war 文件而不退出Servlet 容器的JVM），您会发现线程和其他资源的泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:43:07.997

看看你显示的错误。

`java.sql.SQLException: Connections could not be acquired from the underlying database!`.

尽管我同意 Waldman 使用 ServletContextListener 的想法，但您的 c3p0 配置似乎是正确的。在您的情况下，我坚信问题与 mysql 类路径有关。请检查您是否正确包含了 mysql 连接器。

# facebook - facebook api图，获取公开照片

> ID：14726314
> 
> 赞同：1
> 
> 时间：2013-02-06T10:07:51.737
> 
> 标签：facebook, api, facebook-graph-api, photos

我想知道使用图形 api 是否有一种方法可以获取存储在 facebook 中的所有公共照片（或至少是有限列表），我知道您可以使用以下关键字获取公共帖子：

```
https://graph.facebook.com/search?q=keyword&type=post 
```

有没有等效的照片方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:53:09.867

您可以使用 FQL 查询用户新闻提要中的所有照片。[这篇文章](http://pulkitgoyal.in/2012/12/26/getting-all-photos-and-videos-from-facebook-news-feed/)详细讨论了这一点。这是您可以使用的 FQL：

```
SELECT actor_id, created_time, likes, post_id, attachment 
FROM stream WHERE filter_key IN ( 
    SELECT filter_key FROM stream_filter WHERE uid = me() AND (name = "Photos")
) 
```

# zsh - zsh：解析错误：预期条件：“$1”

> ID：14726319
> 
> 赞同：1
> 
> 时间：2013-02-06T10:08:02.367
> 
> 标签：zsh

我试图编写一个脚本来使用 gentoos java-config 编译 java 文件，但我最终得到一个错误 zsh: parse error: condition expected: "$1" 谁能告诉我这是什么意思以及为什么它会在第 16 行报告功能。

```
function jComp() {

local java_mods = ""

if (( $# == 0)); then
  echo "using javac on .java in folder"
  `javac *.java`
  return 0

elif [[ "$1" == "-h" ]] || [[ "$1" == "--help" ]]; then
  echo "Usage: jComp [java modules] [file]"
  echo
  echo "Options:"
  echo "    -h,   This help message."
  echo "modules has to be in the (java-config -l) list" 
  echo
  echo "Report bugs to <tellone.diloom@gmail.com>."

  return 0
fi

if [[ "$(java-config -v)" == "" ]]; then
  echo "This script depends on java-config"
  return 1
elif [[ "$1" =="-d" ]] || [[ "$1" == "--default"]]; then
 `javac -cp .:$(java-config -p junit-4) *.java`
  if [[ $# == 2 ]]; then
    `javac -c .:$(java-config -p junit-4) "$2"`
     return 0
  fi
fi

while (( $# > 1 )); do
if [[ ! -f "$1" ]]; then
    java_mods="$java_mods $1"
    shift
    continue
fi
done

`javac -cp .:$(java-config $java_mods)`

return 0
} 
```

欢迎链接和评论。提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T10:16:14.743

看起来您的代码正在尝试将存储在参数 $1 中的字符串与字符串 -d 进行比较，但比较在双等号后缺少一个空格：

```
elif [[ "$1" =="-d" ]] || [[ "$1" == "--default"]]; then
               ^

elif [[ "$1" == "-d" ]] || [[ "$1" == "--default"]]; then 
```

我还没有尝试过代码，但是，请尝试让我知道它是否解决了它！

顺便说一句，看起来第二次比较也会失败，因为双方右括号前没有空间：

```
elif [[ "$1" == "-d" ]] || [[ "$1" == "--default"]]; then
                                                 ^
elif [[ "$1" == "-d" ]] || [[ "$1" == "--default" ]]; then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:25:29.223

你所有的反引号命令看起来都是错误的。您想运行命令，而不是将它们的*输出*解释为要运行的命令，对吗？`javac`如果是这样，请从调用中删除所有反引号。

然后有一个缺失的空间`[[ "$1" =="-d" ]]`来制作`==`一个单独的令牌（以及另一个由 leroyse 指出的）。

# objective-c - 释放一个 NSURLConnection？

> ID：14726322
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:12.237
> 
> 标签：objective-c

我有一个到服务器的连接，我想释放它`queue`，我现在不知道如何。

```
 [NSURLConnection
         sendAsynchronousRequest:request
         queue:[[NSOperationQueue alloc] init]
         completionHandler:^(NSURLResponse *response,
                             NSData *data,
                             NSError *error)

//some if else statements

   }]; 
```

我不知道如何`release`在 2 个连接之间进行此队列参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:09:50.517

如果您使用 ARC，则无需执行任何操作。

如果没有，您可以包括`autorelease`.

# java - System.out 和 Printstream 之间的区别

> ID：14726323
> 
> 赞同：6
> 
> 时间：2013-02-06T10:08:13.517
> 
> 标签：java

这些陈述有什么不同吗

```
System.out.println(error); 
```

和

```
PrintStream ps = new PrintStream((OutputStream)System.out);
ps.println(error); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T10:11:31.593

`System.out`已经是一个`PrintStream`，

```
PrintStream ps = new PrintStream((OutputStream)(System.out)); 
```

只会再次包装它，这似乎毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:19:11.210

基本上没有区别。第二种方式太长了。out 是 System 类中 java.io.PrintStream 类型的静态字段。您可以直接使用它，而不是将其转换为 Outputstream 并再次将其包装在另一个 PrintStream 引用中。无论如何，它们都将使用相同的底层 PrintStream 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:11:45.020

除了您复制了`out`.

来自[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html)

> 出去
> 
> > 公共静态最终打印流输出

它已经是 type 了`PrintStream`。

# sencha-touch - 将文本字段值从 sencha touch 2 中设置的字段添加到 localstore

> ID：14726328
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:18.043
> 
> 标签：sencha-touch, touch, sencha-touch-2, local-storage

我是 sencha touch 的新手，我在下面的代码中遇到错误是选项卡更改功能 `error`：`Uncaught TypeError: Object [object Object] has no method 'getValues'`

```
 var uswrfeild =  Ext.getCmp('User_details');
                                //var fieldset = Ext.create('FieldSet_PersonalSettings');
                                //var fieldset= this.tab;
                                var values = uswrfeild.getValues();
                                cart = Ext.create('Items');
                                //alert(values);
                                //cart.add({field1:'value1',field2:'value2'});
                                cart.add(values);
                                cart.sync(); 
```

下面的代码是字段集代码

```
 {
                        xtype: 'container',
                        title: 'User',
                        id: 'User_details',
                        itemId: 'mycontainer3',
                        scrollable: 'vertical',
                        items: [
                            {
                                xtype: 'fieldset',
                                id: 'FieldSet_PersonalSettings',
                                itemId: 'myfieldset12',
                                margin: '2%',
                                title: 'User',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        label: 'Name',
                                        name: 'name',
                                        maxLength: 31,
                                        placeHolder: 'given-name family-name'
                                    },
                                    {
                                        xtype: 'emailfield',
                                        label: 'Email',
                                        name: 'email',
                                        required: true,
                                        maxLength: 63,
                                        placeHolder: 'name@example.com'
                                    },
                                    {
                                        xtype: 'textfield',
                                        label: 'Street',
                                        name: 'street',
                                        required: true,
                                        placeHolder: 'streetname'
                                    },
                                    {
                                        xtype: 'textfield',
                                        label: 'House Number',
                                        required: true,
                                        placeHolder: '123'
                                    },
                                    {
                                        xtype: 'textfield',
                                        label: 'Zipcode',
                                        required: true,
                                        autoCapitalize: true,
                                        maxLength: 10,
                                        placeHolder: '1234AA'
                                    },
                                    {
                                        xtype: 'textfield',
                                        label: 'Country',
                                        required: true,
                                        placeHolder: 'NL'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                margin: '2%',
                                title: 'Sharing information',
                                items: [
                                    {
                                        xtype: 'checkboxfield',
                                        label: 'Receive email',
                                        labelWidth: '75%',
                                        checked: true
                                    },
                                    {
                                        xtype: 'checkboxfield',
                                        height: 49,
                                        label: 'Upload statistics (anonymously)',
                                        labelWidth: '75%',
                                        checked: true
                                    }
                                ]
                            } 
```

贝洛代码是模型

```
Ext.define('iFP.model.item', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {
                name: 'name',
                type: 'string'
            },
            {
                name: 'email',
                type: 'string'
            },
            {
                name: 'street',
                type: 'string'
            },
            {
                name: 'hno',
                type: 'auto'
            },
            {
                name: 'zipcode',
                type: 'int'
            },
            {
                name: 'country',
                type: 'string'
            }
        ]
    }
}); 
```

下面的代码是商店

```
 Ext.define('iFP.store.userlocalsettings', {
    extend: 'Ext.data.Store',

    requires: [
        'iFP.model.item'
    ],

    config: {
        autoSync: false,
        model: 'iFP.model.item',
        storeId: 'usersettingslocalstore',
        proxy: {
            type: 'localstorage'
        }
    }
}); 
```

我的目标是将文本 feid 值存储在浏览器本地存储中。请帮我任何朋友。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:57:44.040

您应该首先为每个字段设置 id，例如这样

```
 {
      xtype: 'textfield',
      label: 'Name',
      name: 'name',
      maxLength: 31,
      placeHolder: 'given-name family-name',
      itemId: 'tfName'
 }, 
```

那么你可以在函数中的某个事件之后获取字段的值

```
var namefield = this.down('#tfName'); 
var namevalue = namefield.getValue(); 
```

...

然后您可以将该值添加到存储

```
var store = Ext.getStore('userlocalsettings');
store.add({name: namevalue});
store.sync(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T06:51:09.137

您应该为您的表单设置 ID。

```
config: {
        itemId: 'form1'
} 
```

然后在您的控制器中添加对该 ID 的引用

```
refs: {
      myPanel: '#form1'
} 
```

我看不到你的按钮监听器。假设监听器的名字是“onTapSave”那么你应该试试这个，

```
onTapSave: function(component,button, options){

    var uswrfeild = this.getMyPanel();
    var values = uswrfeild.getValues();
} 
```

# jquery - 如何获取图像高度属性

> ID：14726329
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:19.550
> 
> 标签：jquery, html, css

我怎样才能找到图像是否没有高度样式属性。

html中的css

```
<img id="image" src="images/sports/sports9.png" style="width:100px"> 
```

jQuery

```
 if($('#image').css('height') == 0)
    {
        var imageWidth = $("#image").width();
        $("#image").css("width",""+(imageWidth-1)+"px");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:14:04.313

尝试这个：

```
var img = document.getElementById('image');
if( !img.style.height) img.style.width = img.width-1+"px"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:11:20.470

也许这就是你所追求的？

[http://binodsuman.blogspot.se/2009/06/how-to-get-height-and-widht-of-image.html](http://binodsuman.blogspot.se/2009/06/how-to-get-height-and-widht-of-image.html)

或者你的意思是你想检查图像是否设置了*高度*属性？

**更新：**

在这里检查类似的问题

[jQuery检查元素是否具有内联定义的特定样式属性](https://stackoverflow.com/questions/11306736/jquery-check-if-element-has-a-specific-style-property-defined-inline)

# javascript - 如何使用 .val() 将 var 设置为 true 或 false

> ID：14726330
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:19.603
> 
> 标签：javascript, jquery

我有一个文本框，我需要检查文本框是否为空并相应地设置一个变量为真或假。

我的代码此刻打印文本框的值。

```
var isDateTimEndEmpty = dateTimeEnd.val() == null ? true : false; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:09:18.007

这是正确的方法：

```
var isDateTimEndEmpty = !$.trim(dateTimeEnd.val()).length; 
```

好的做法是使用[`$.trim`](http://api.jquery.com/jQuery.trim/)which 使代码忽略输入字段中的空格。因此，如果*修剪*值的长度为，`0`则该值为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:13:26.763

检查它的长度

```
var isDateTimeEndEmpty = $.trim($('#txtboxID').val()).length > 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:27:48.920

的结果`dateTimeEnd.val()`不会为空。它总是一个字符串，可能是空字符串。

实际上，您不需要获得“假”的“真”，只需一个“真”或“假”值，如空或非空字符串：

```
var isDateTimEndEmpty = $.trim(dateTimeEnd.val()) //remove spaces at start and end
if (isDateTimEndEmpty) {
    //if dataTimeEnd is not empty, go here
} else {
    //if dateTimeEnd is empty, go here
} 
```

如果您对隐式转换感到不舒服，您也可以以显式方式对其进行编码：

```
var isDateTimEndEmpty = Boolean($.trim(dateTimeEnd.val())); //explicit casting 
```

# javascript - JavaScript“输入多个”文件重复

> ID：14726331
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:20.583
> 
> 标签：javascript, arrays, file, input

这是我的代码：

```
 var rowData = [];

        var showFiles = function () {
            var input = document.getElementById('doc-upload');
            if (input.files.length > 0) {
                for (var i = 0; i < input.files.length; i += 1) {
                    rowData.push([input.files[i].name]);
                };
                console.log(rowData);
            };
        };
        document.getElementById('doc-upload').addEventListener('change', showFiles, this); 
```

'rowData' 在我第一次上传某些东西时接收到一个正常值。在第二次尝试时，它开始复制传入的值。

如果我先上传了 1 个文件，试试就可以了。第二次我会得到 2 个相同的文件。第三个 4 个文件，exetera。

为什么会这样？

升级版：

更多解释： 发生了什么：我上传 x.doc 我的数组是 [x.doc]，现在我想上传 y.doc。我选择y.doc，我的数组变成[x.doc，y.doc，y.doc]，然后我上传z.doc，aaray看起来像[x.doc，y.doc，y.doc，z。 doc、z.doc、z.doc、z.doc]。等等。它必须对长度属性做一些事情，我把它搞砸了。

UPD2：

现在完整版的代码：

```
 //file upload
    var rowData = [];
    docAddButton.addListener('click', function () {
        var showFiles = function () {
            var input = document.getElementById('doc-upload');
            if (input.files.length > 0) {
                for (var i = 0; i < input.files.length; i += 1) {
                    if (rowData.indexOf(true, input.files[i].name, Math.round(input.files[i].size * 0.001) + ' кб') === -1) {
                        rowData.push([
                            true,
                            input.files[i].name, 
                            Math.round(input.files[i].size * 0.001) + ' кб'
                        ]);
                    }
                }
                console.log(rowData);
                tableModel.setData(rowData);
            };
        };
        document.getElementById('doc-upload').addEventListener('change', showFiles, this);
    }); 
```

感谢每一位帮助过的人！

解决方案：您可以从 UPD2 中看到我在 eventListener 'click' 中有我的函数。发生的事情是每次我按下输入按钮时，它都会收到额外的“更改”侦听器。

我将输入的 .addListener 更改为 .addListenerOnce。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:14:19.413

基本上，

```
rowData.push() 
```

只会继续将元素附加到变量的末尾。您需要检查这些输入是否已经存在。

（编辑-）

尝试这个：-

```
 rowData=[];
        var showFiles = function () {
        var input = document.getElementById('doc-upload');
        if (input.files.length > 0) {
            for (var i = 0; i < input.files.length; i += 1) {
              var f=[];
              for(var j=0;j<rowData.length;j++)
                 f.push(rowData[j][0]);
              if(f.indexOf(input.files[i].name) == -1)
                  rowData.push([input.files[i].name]);
            }
            console.log(rowData);
        };
    };
    document.getElementById('doc-upload').addEventListener('change', showFiles, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:10:23.683

大概您没有重新加载页面，也没有清除`rowData`. 您尚未显示定义的方式/位置`rowData`，但似乎在对`showFiles`. [*（如果你没有在任何地方声明它，你就会成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品。）

* * *

从您下面的评论中，听起来您希望将条目保留在 中`rowData`，但您只想添加*新*条目。如果是这样，您将需要明确检查：

```
var showFiles = function () {
    var input, i, file;

    input = document.getElementById('doc-upload');
    for (i = 0; i < input.files.length; i += 1) {
        file = input.files[i].name;
        if (indexOfFile(rowData, file) === -1) {
            rowData.push([file]);
        }
    };
    console.log(rowData);
};

function indexOfFile(data, file) {
    var index;

    for (index = 0; index < data.length; ++index) {
        // Note that the 0 may need to be changed if the
        // `rowData.push([file])` line above doesn't put
        // the filename at index 0
        if (data[index][0] === file) {
            return index;
        }
    }
    return -1;
} 
```

* * *

旁注：您已经说过，您推送数组而不仅仅是文件名的原因是您还包含其他信息，但您将其排除在您的问题之外。这很好，但它可能很微妙，请参阅`0`上面关于索引的说明。您可以考虑改用对象数组：

```
rowData.push({
    file: file,
    other: "info",
    goes: "here"
}); 
```

...然后在`indexOfFile`：

```
if (data[index].file === file) { 
```

这样一来，如果您更改所推送的内容的结构，代码就不太容易被破坏。

# javascript - 从第二个页面返回的 JSON 对象在 IE 8 中没有字符串化

> ID：14726333
> 
> 赞同：2
> 
> 时间：2013-02-06T10:08:30.047
> 
> 标签：javascript, json, internet-explorer-8

考虑以下场景：

FooPage 是在单击“添加”时打开 BarPage 的页面。

BarPage 有一个“返回”按钮。单击它后，它会执行以下操作：

```
function Add() {
    var selectedResources = [{ 
        "ResourceID": "10", 
        "ResourceName": "Foo", 
        "ResourceTypeName": "Bar"
    }];
    if (window.opener != null 
        && typeof window.opener.AddResources != "undefined") {
        window.opener.AddResources(selectedResources);
        window.close();
    }
} 
```

如您所见，FooPage 有一个名为`AddResources`. 它执行以下操作：

```
function AddResourcesCallback(selectedResources) {
    var result = JSON.stringify(selectedResources);
} 
```

在 Chrome 中，这很好用——字符串是从 JSON 中创建的`JSON.stringify`，每个人都很高兴。

但是，在 IE8 中，这不起作用。JSON 不会被创建为字符串 - 而是`JSON.stringify`返回`undefined`.

我尝试将场景更改为此，作为测试：

```
function AddResourcesCallback(selectedResources) {
    var selectedResources = [{ 
        "ResourceID": "10", 
        "ResourceName": "Foo", 
        "ResourceTypeName": "Bar"
    }];
    var result = JSON.stringify(selectedResources);
} 
```

在这种情况下，`JSON.stringify`在 IE8 中返回正确的值，就像 Chrome 一样。这意味着，在 IE8 中，当在页面之间传递数组时，您无法将数组解析为 JSON。

有没有办法在不先对它进行字符串化的情况下传递数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:34:40.213

似乎是一个跨窗口范围问题 - 这两个对象具有不同的`Object.prototype`原型对象，这可能会使 IE 感到困惑（特别是如果其中一个对象由于窗口关闭而被垃圾收集）。尝试使用其他窗口的`JSON`函数进行字符串化，如下所示：

```
// BarPage
if (window.opener != null && typeof window.opener.AddResources != "undefined") {
    window.opener.AddResources(selectedResources, JSON);
    window.close();
}

// FooPage
function AddResourcesCallback(selectedResources, json) {
    var result = json.stringify(selectedResources));
} 
```

但是，我认为在一个窗口中进行字符串化，将字符串传递并在另一个窗口中将其解析回将是最安全的方法。

# jquery - Jquery - 获取文本区域中实际显示的内容

> ID：14726335
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:39.343
> 
> 标签：jquery, html

我们正在自动化 Web 测试，并希望验证文本区域中的内容。

我们想从用户的角度检查实际显示的内容。它是用占位符放置在那里还是由用户/测试用例输入都没有关系。我们使用 html5 占位符属性。

`$("textarea").text()`如果文本是通过占位符输入的，则不会给我任何东西。

尝试过`$("textarea").val()`，但它给了我与使用相同的行为`.text()`。

我们可以编写类似的逻辑，`if ( text is empty ) { look at placeholder }`但感觉不对，因为它无法确定文本区域中实际显示的内容。我想有一个替代使用逻辑。否则，我们假设浏览器使用我们在测试中实现的相同逻辑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:10:57.217

你的意思是html5占位符还是js插件添加的占位符？

如果是第一种情况，我想这会有所帮助：

```
var text = $("textarea").val() || $("textarea").attr('placeholder') 
```

演示：http: [//jsfiddle.net/mJkFc/](http://jsfiddle.net/mJkFc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:11:03.300

尝试这个：

```
var t = document.getElementsByTagName('textarea')[0];
var text = t.value || t.getAttribute("placeholder") || ""; 
```

# java - 通过 java domino api 从 Lotus 发送日历邀请进行交换

> ID：14726336
> 
> 赞同：2
> 
> 时间：2013-02-06T10:08:44.103
> 
> 标签：java, lotus-notes, lotus-domino, lotus

我正在尝试通过 JAVA Domino API 从 Lotus 向 Exchange 发送日历邀请。当我从一个莲花帐户向另一个莲花帐户发送邀请时，它是成功的。但是当我将其发送到某个 Exchange 邮件帐户时，exchange 并未将其显示为邀请。

我使用的代码如下：

```
package com.test;

import java.util.Date;
import java.util.Vector;

import lotus.domino.Database;
import lotus.domino.DateTime;
import lotus.domino.Document;
import lotus.domino.NotesFactory;
import lotus.domino.Session;
import lotus.entity.Meeting;

import com.data.Strings;

public class CalenderTest {

    public static void main(String[] args){

        Vector<String> sendTo = new Vector<String>();
        sendTo.add("xxxx.xx.com");

        Meeting m =  new Meeting();
        m.setDate("04-04-2013");
        m.setTime("06:06:06");
        m.setHours("4");
        m.setChair("xxxx.xx.com");
        m.setSubject("Testing Calendar");
        m.setLocation("TestLocation");
        m.setBody("TestBody");
        m.setSendTo(sendTo);

        try
        {
            Session s = NotesFactory.createSessionWithIOR(Strings.IOR, "xxxxxxx", "xxxxx");
            Database db = s.getDatabase(s.getServerName(), "xxxx");

            Document doc1 = db.createDocument(); 
            doc1.appendItemValue("Form","Notice"); 
            doc1.appendItemValue("NoticeType","I");
            doc1.appendItemValue("_ViewIcon","133.0"); 
            doc1.appendItemValue("AppointmentType","3"); 
            Session stmp = db.getParent(); 
            String[] date = m.getDate().split("-");
            String[] time = m.getTime().split(":");
            Date exdate = new Date();
            exdate.setDate(Integer.parseInt(date[0]));
            exdate.setHours(Integer.parseInt(time[0]));
            exdate.setMinutes(Integer.parseInt(time[1]));
            exdate.setMonth(Integer.parseInt(date[1])-1);
            exdate.setSeconds(Integer.parseInt(time[2]));
            exdate.setYear(Integer.parseInt(date[2])-1900);
            System.out.println(exdate.toString());
            DateTime currTime =  stmp.createDateTime(exdate); 
            doc1.appendItemValue("StartDateTime",currTime) ; 
            doc1.appendItemValue("CalendarDateTime",currTime); 
            doc1.appendItemValue("StartDate",currTime) ; 
            doc1.appendItemValue("StartTime",currTime) ; 
            currTime.adjustHour(Integer.parseInt(m.getHours()), true); 
            doc1.appendItemValue("EndDateTime",currTime) ; 
            doc1.appendItemValue("EndDate",currTime) ; 
            doc1.appendItemValue("EndTime",currTime) ; 
            doc1.appendItemValue("$NoPurge",currTime) ; 
            doc1.appendItemValue("Subject",m.getSubject());  
            doc1.appendItemValue("Location",m.getLocation()); 
            doc1.appendItemValue("Body",m.getBody()); 
            doc1.appendItemValue("From",s.getUserName());
            doc1.appendItemValue("Chair",m.getChair());
            doc1.appendItemValue("RequiredAttendees",m.getSendTo());
            doc1.appendItemValue("OPTIONALATTENDEES",m.getCopyTo());
            doc1.computeWithForm(true, false);
            doc1.save(true, false, false);
            doc1.send(m.getSendTo());
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:11:51.447

一种可能性是发送**.ics**文件：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
UID:uid1@example.com
DTSTAMP:19970714T170000Z
ORGANIZER;CN=John Doe:MAILTO:john.doe@example.com
DTSTART:19970714T170000Z
DTEND:19970715T035959Z
SUMMARY:Bastille Day Party
END:VEVENT
END:VCALENDAR 
```

[http://en.wikipedia.org/wiki/ICalendar](http://en.wikipedia.org/wiki/ICalendar)

这是一个相关的问题：

[无法使用 icalendar 将会议请求从 lotus notes 发送到 microsoft exchange](https://stackoverflow.com/questions/14744648/adding-icalendar-ics-file-to-lotus-notes-email)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:33:02.630

在使用mail.jar的smtp服务器时，invite.ics是正确的，但是在这种情况下，它使用内部路由域并且应该设置文档上的所有数据，然后我们将认为domino转换并发送只是邮寄到外部地址。

我只有 LotusScript 代码，但它很容易将其转换为 java。

```
Dim invitation As NotesDocument
Dim item As NotesItem
Dim startdttm As NotesDateTime
Dim enddttm As NotesDateTime
Dim rtitem As NotesRichTextItem
Dim prompt As String
Dim language As String
Dim tasktype As String
Dim tmpItem As NotesItem

'Compute SendTo and CopyTo items
Dim SendTo$, CopyTo$

SendTo$ = "test@domain.com"
CopyTo$ = ""
language = "en"

Set invitation = New NotesDocument( taskdoc.ParentDatabase )
With invitation
    .ReplaceItemValue "$AltPrincipal", "Automatic Notification <noresponse@domain.com>"
    .ReplaceItemValue "$CSVersion", "2"
    .ReplaceItemValue "$CSWISL", Evaluate({@Explode("$S:1;$L:1;$B:1;$R:1;$E:1;$W:1;$O:1;$M:1;RequiredAttendees:1;INetRequiredNames:1;AltRequiredNames:1;StorageRequiredNames:1;OptionalAttendees:1;INetOptionalNames:1;AltOptionalNames:1;StorageOptionalNames:1"; ";")})
    .ReplaceItemValue "$HFFlags", "1"
    .ReplaceItemValue "$IconSwitcher", "Meeting"
    .ReplaceItemValue "$Mailer", "FL Mailer 1.0"
    .ReplaceItemValue "$MiniView", "1"
    .ReplaceItemValue "$NameLanguageTags", "en"
    .ReplaceItemValue "$PublicAccess", "1"
    .ReplaceItemValue "$SMTPKeepNotesItems", "1"
    .ReplaceItemValue "$StorageCc", ""
    .ReplaceItemValue "$StorageTo", "1"
    .ReplaceItemValue "$TableSwitcher", "Description"
    .ReplaceItemValue "$WatchedItems", Evaluate({@Explode("$S;$L;$B;$R;$E;$W;$O;$M;RequiredAttendees;INetRequiredNames;AltRequiredNames;StorageRequiredNames;OptionalAttendees;INetOptionalNames;AltOptionalNames;StorageOptionalNames"; ";")})
    .ReplaceItemValue "AltChair", "Automatic Notification <noresponse@domain.com>"
    .ReplaceItemValue "AltCopyTo", ""
    .ReplaceItemValue "AltRequiredNames", SendTo$
    .ReplaceItemValue "AltSendTo", SendTo$
    .ReplaceItemValue "AppointmentType", "3"        
    .ReplaceItemValue "ApptUNID", .UniversalID
    .ReplaceItemValue "Broadcast", "1"
    .ReplaceItemValue "Categories", ""
    .ReplaceItemValue "Chair", "Notifiche Automatiche"
    .ReplaceItemValue "CopyTo", CopyTo$         
    .ReplaceItemValue "CWeSigProcessed", "Y"
    .ReplaceItemValue "Encrypt", "0"
    .ReplaceItemValue "DisplayCopyTo_Icon", "1"
    .ReplaceItemValue "Form", "Notice"      
    .ReplaceItemValue "Importance", "2"     
    .ReplaceItemValue "InetCopyTo", CopyTo$     
    '.ReplaceItemValue "INetFrom", "Automatic Notification"
    .ReplaceItemValue "INetRequiredNames", SendTo$
    .ReplaceItemValue "INetSendTo", SendTo$             
    .ReplaceItemValue "IsBroadcast", "0"
    .ReplaceItemValue "NoticeType", "I"
    .ReplaceItemValue "OnlinePlace", ""
    .ReplaceItemValue "OrgTable", "C0"
    .ReplaceItemValue "PreventCounter", "1"
    .ReplaceItemValue "PreventDelegate", ""
    .ReplaceItemValue "Principal", "Automatic Notification <noresponse@domain.com>"
    .ReplaceItemValue "RequiredAttendees", SendTo$
    .ReplaceItemValue "ReturnReceipt", ""
    .ReplaceItemValue "SchedulerSwitcher", "1"
    .ReplaceItemValue "SendTo", SendTo$
    .ReplaceItemValue "SequenceNum", 1
    .ReplaceItemValue "Sign", ""
    .ReplaceItemValue "StorageequiredNames", "1"
    .ReplaceItemValue "STRecordMeeting", ""
    .ReplaceItemValue "Subject", "Broadcast: " + taskdoc.nome(0)
    .ReplaceItemValue "Topic", taskdoc.nome(0)
    .ReplaceItemValue "UpdateSeq", 1
    .ReplaceItemValue "WebDateTimeInit", "1"
    .ReplaceItemValue "_ViewIcon", 133      
End With

Dim tmpDate As NotesDateTime
Dim itemData As NotesItem   
Dim itemOra As NotesItem
Dim itemTemp As NotesItem
Dim appDescription As NotesRichTextItem

Set tmpDate = New NotesDateTime(itemData.Datetimevalue.DateOnly + " " + itemOra.Datetimevalue.TimeOnly)
Call invitation.Replaceitemvalue("CalendarDateTime", tmpDate)
Call invitation.Replaceitemvalue("StartDateTime", tmpDate)
Call invitation.Replaceitemvalue("StartTimeZone", "Z=-1$DO=1$DL=3 -1 1 10 -1 1$ZX=97$ZN=W. Europe") ' FIX WITH CORRECT TIME ZONE

Set tmpDate = New NotesDateTime(itemData.Datetimevalue.DateOnly + " " + itemOra.Datetimevalue.TimeOnly)
Call tmpDate.AdjustHour( 1 , True )
Call invitation.Replaceitemvalue("EndDateTime", tmpDate)
Call invitation.Replaceitemvalue("EndTimeZone", "Z=-1$DO=1$DL=3 -1 1 10 -1 1$ZX=97$ZN=W. Europe") ' FIX WITH CORRECT TIME ZONE

Set tmpDate = New NotesDateTime(itemData.Datetimevalue.DateOnly + " " + itemOra.Datetimevalue.TimeOnly)
Call tmpDate.SetAnyTime
Set itemTemp = invitation.Replaceitemvalue("EndDate", "")
Set itemTemp.DateTimeValue = tmpDate

Set tmpDate = New NotesDateTime(itemData.Datetimevalue.DateOnly + " " + itemOra.Datetimevalue.TimeOnly)
Call tmpDate.AdjustHour( 1 , True )
Call tmpDate.SetAnyDate
Set itemTemp = invitation.Replaceitemvalue("EndTime", "")
Set itemTemp.DateTimeValue = tmpDate    

' NoPurge
invitation.ReplaceItemValue "$NoPurge", invitation.StartDateTime

'Send the invitation and save ApptUNID on the task doc
Call Invitation.Send(False)
If taskdoc.ApptUNID(0) = "" Then
    TaskDoc.ApptUNID = invitation.UniversalID
    Call TaskDoc.Save(True, False)
End If 
```

# windows-phone-7 - 如何访问故事板动画中的 ToggleButton 内容

> ID：14726340
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:51.537
> 
> 标签：windows-phone-7, xaml, animation, binding, storyboard

我在 UI 中有一个切换按钮，并希望在单击它时执行一些操作。

此按钮的 xml 文件：

```
 <ToggleButton x:Name="markToggle" Click="markToggle_Click" Style="{StaticResource StyleMarkToggle}" >
         <ToggleButton.Content>
           <StackPanel x:Name="markToggle_Button" Orientation="Horizontal">
             <Image x:Name="Icon" Source="{Binding MarkToggleIcon}" Stretch="None" />
             <TextBlock x:Name="Counter" TextWrapping="Wrap" Text="{Binding ButtonText}" Margin="6,0,0,0" />
           </StackPanel>
         </ToggleButton.Content>
      </ToggleButton> 
```

单击此切换按钮时，我想更改文本块的前景色（名称：计数器）。如何从 Storyboard.Target（或 TargetName）访问此文本框元素？

这是“StyleMarkToggle”样式的 xaml 代码。

（以下代码中仅显示视觉状态“已检查”。）

```
<VisualState x:Name="Checked">
 <Storyboard>
      <ColorAnimation Duration="0" To="White" Storyboard.TargetName="{Binding ElementName=Counter}" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" />
 </Storyboard> 
```

它显示了这个运行时错误：

```
MS.Internal.WrappedException: Cannot resolve TargetName System.Windows.Controls.TextBlock. ---> System.InvalidOperationException: Cannot resolve TargetName System.Windows.Controls.TextBlock.
   at MS.Internal.XcpImports.VisualStateManager_GoToStateInternal(Control reference, FrameworkElement root, VisualStateGroup group, VisualState state, Boolean useTransitions, Boolean& refreshInheritanceContext)
   at System.Windows.VisualStateManager.RetryGoToStateAfterRefreshingInheritanceContext(Control control, FrameworkElement templateRoot, VisualStateGroup group, VisualState state, Boolean useTransitions)
   at System.Windows.VisualStateManager.GoToState(Control control, String stateName, Boolean useTransitions)
   at System.Windows.Controls.Primitives.ToggleButton.ChangeVisualState(Boolean useTransitions)
   at System.Windows.Controls.Primitives.ToggleButton.OnApplyTemplate()
   at System.Windows.FrameworkElement.OnApplyTemplate(IntPtr nativeTarget) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:38:58.667

您可以不使用 a ，而是将元素的属性`Storyboard`绑定到元素的属性，然后使用 a从转换为。`Foreground``TextBlock``IsChecked``ToggleButton``Converter``bool``SolidColorBrush`

这是修改后的 XAML：

```
<ToggleButton x:Name="markToggle" Click="markToggle_Click" Style="{StaticResource StyleMarkToggle}" >
    <ToggleButton.Content>
        <StackPanel x:Name="markToggle_Button" Orientation="Horizontal">
            <Image x:Name="Icon" Source="{Binding MarkToggleIcon}" Stretch="None" />
            <TextBlock Foreground="{Binding ElementName=markToggle, Path=IsChecked, Converter={StaticResource BoolToColorConverter}}" x:Name="Counter" TextWrapping="Wrap" Text="{Binding ButtonText}" Margin="6,0,0,0" />
        </StackPanel>
    </ToggleButton.Content>
</ToggleButton> 
```

以及转换器的代码：

```
public class BoolToColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if ((bool)value)
            return new SolidColorBrush(Colors.White);
        else
            return new SolidColorBrush(Colors.Black);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
```

# javascript - 本机 Jquery 选择器 VS 缓存的 object.find()

> ID：14726343
> 
> 赞同：0
> 
> 时间：2013-02-06T10:08:55.660
> 
> 标签：javascript, jquery, performance

我的程序员伙伴们，我正在失去理智。我读过很多关于 JS 性能的书，他们都说，最好缓存 DOM 对象以供将来引用和管理，而不是创建新的 Jquery 对象。听起来很合理。但现在我的信心在动摇。我试图在我的公司中开发代码约定，我打算从性能的角度来解决这个问题。我有一段代码如下：

```
 $("#registratorType").attr("readonly", "readonly");
        $("#registratorType").attr("size", "25");
        $("#id").attr("readonly", "readonly");
        $("#id").attr("size", "25");
        $("#serial").attr("readonly", "readonly");
        $("#serial").attr("size", "25");
        $("#duration").attr("size", "25");
        $("#stoppingDuration").attr("size", "25");
        $("#speeddata").removeAttr("disabled"); 
```

它不是全部，但我认为，你有这个想法。我将获取所有这些表单并将其包装在缓存的参考中。

```
 var $form = $('#vehicleProfile');
    $form.find("#registratorType").attr("readonly", "readonly");
    $form.find("#registratorType").attr("size", "25");
    $form.find("#id").attr("readonly", "readonly");
    $form.find("#id").attr("size", "25");
    $form.find("#serial").attr("readonly", "readonly");
    $form.find("#serial").attr("size", "25");
    $form.find("#duration").attr("size", "25");
    $form.find("#stoppingDuration").attr("size", "25");
    $form.find("#speeddata").removeAttr("disabled"); 
```

我已经在最新的 chrome 中测试了性能并且感到震惊！我的方法输了 3-4 次。我的意思是我的函数以 42 毫秒运行，而旧的函数是 12-14 毫秒。我的方法真的有任何价值吗？我的方法是反模式吗？请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:13:49.537

由于您的所有选择器都是 id 选择器，因此它们相当快（`document.getElementById`是`O(1)`表查找）。然而，将它们限制在某个父元素上，`find()`使得 DOM 树搜索成为必要，这显然是一种放缓。

“*缓存 DOM 对象以供将来引用*”意味着您永远不会应用相同的选择器两次。执行一次，并将其存储在一个变量中（就像您对 所做的那样`$form`）。所以而不是

```
 $("#id").attr("readonly", "readonly");
    $("#id").attr("size", "25"); 
```

它应该是

```
 var $id = $("#id");
    $id.attr("readonly", "readonly");
    $id.attr("size", "25"); 
```

由于[jQuery允许](https://stackoverflow.com/q/5505648/1048572) [链接](https://stackoverflow.com/q/7475336/1048572)，上面也可以写成

```
 $("#id").attr("readonly", "readonly").attr("size", "25"); 
```

顺便说一句，您实际上似乎想使用[`prop()`而不是`attr()`](https://stackoverflow.com/questions/5874652/prop-vs-attr)，并且这些函数也接受[值映射](http://api.jquery.com/prop/#prop2)：

```
 $("#id").prop({readonly: true, size: 25}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:14:03.263

因为您正在通过他们的 ID 查找元素。所有浏览器都有一个 getElementById ，这是获取元素的最有效方法。

使用按类标识的元素重试基准测试。

# dll - 如何将调用 DLL 的 NASM 程序与 FreePascal 链接？

> ID：14726346
> 
> 赞同：3
> 
> 时间：2013-02-06T10:09:13.660
> 
> 标签：dll, nasm, freepascal

# 问题

我有一个用汇编程序（nasm）编写的函数“bob”，它利用了 kernel32.dll 中的函数。我在 FreePascal 中有一个名为“bob”的程序。

我将 nasm 用于：

```
nasm -fwin32 bob.asm 
```

在 FreePascal 中，我声明：

```
{$link bob.obj}

function bob(s:pchar):longint; stdcall; external name 'bob'; 
```

但是当我使用 fpc 编译时出现错误，告诉它没有找到在 bob.asm 中声明为 extern 的 GetStdHandle 和 WriteConsoleA（没有 @n 后缀）。我想告诉 fpc 在 kernel32.dll 或适当的导入库中查找它们。

但是，当我在纯汇编程序中使用相同的函数时，它可以很好地与 nasm 和 golink 一起使用。当我不调用 DLL 函数时，我可以毫无问题地与 FreePascal 链接。

如何将 kernel32 函数与 FreePascal 链接，以便汇编函数“看到”它们？

* * *

# 一个办法

由贝尼贝拉提供。我更改名称以便事情易于理解。

```
program dlltest;

function WindowsGetStdHandle(n: longint): longint; stdcall;
   external 'kernel32.dll' name 'GetStdHandle';

{$asmmode intel}
procedure WrapperGetStdHandle; assembler; public name 'AliasGetStdHandle';
asm
   jmp WindowsGetStdHandle
end;

{$link myget.obj}

function AsmGetStdHandle(n: longint): longint; stdcall;
   external name 'gethandle';

const STDOUT = -11;

begin
   writeln(AsmGetStdHandle(STDOUT));
   writeln(WindowsGetStdHandle(STDOUT));
end. 
```

在汇编中，在 myget.asm 中：

```
section .text

extern AliasGetStdHandle

global gethandle

gethandle:
   mov   eax, [esp+4]
   push  eax
   call  AliasGetStdHandle
   ret   4 
```

**WindowsGetStdHandle**是 kernel32.dll 中 GetStdHandle 的另一个名称。

**WrapperGetStdHandle**只跳到前面，这里是为*[别名](http://www.freepascal.org/docs-html/ref/refsu61.html)*或*[公共名称](http://www.freepascal.org/docs-html/ref/refsu71.html)*能力：我们为外部对象命名为 AliasGetStdHandle。这是重要的部分，该功能对汇编程序可见。

**AsmGetStdHandle**是汇编函数*gethandle*在 FreePascal 中的名称。它调用 WrapperStdHandle（昵称 AliasGetStdHandle），它跳转到 DLL 函数 WindowsGetStdHandle。

我们完成了，现在可以链接汇编程序，而无需更改其中的任何内容。所有的重命名机制都是在调用它的 pascal 程序中完成的。

唯一的缺点：需要一个包装函数，但对于名称的精细控制来说，它的价格并不高。

* * *

# 另一种解决方案

如果在 WindowsGetStdHandle 的声明中未指定 kernel32.dll，但使用 {$linklib kernel32}，则该符号在 pascal 程序中链接的目标文件中可见。但是，似乎仅 $linklib 指令是不够的，仍然需要在 pascal 中声明一些引用它的函数

```
program dlltest;

{$linklib kernel32}

function WindowsGetStdHandle(n: longint): longint; stdcall;
   external name 'GetStdHandle';

{$link myget.obj}

function AsmGetStdHandle(n: longint): longint; stdcall;
   external name 'gethandle';

const STDOUT = -11;

begin
   writeln(AsmGetStdHandle(STDOUT));
   writeln(WindowsGetStdHandle(STDOUT));
end. 
```

用下面的汇编程序。AliasGetStdHandle 被 GetStdHandle 取代，它现在直接指向 kernel32 函数。

```
section .text

extern GetStdHandle

global gethandle

gethandle:
         mov   eax, [esp+4]
         push  eax
         call  GetStdHandle
         ret   4 
```

但这仅在使用外部链接器（gnu ld）时有效，带有命令

```
fpc -Xe dlltest.pas 
```

省略 opton '-Xe' 时，fpc 给出以下错误

```
Free Pascal Compiler version 2.6.0 [2011/12/25] for i386
Copyright (c) 1993-2011 by Florian Klaempfl and others
Target OS: Win32 for i386
Compiling dlltest.pas
Linking dlltest.exe
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_dir_kernel32.dll
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_names_kernel32.dll
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_fixup_kernel32.dll
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_dll_kernel32.dll
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_names_end_kernel32.dll
dlltest.pas(17,1) Error: Asm: Duplicate label __imp_fixup_end_kernel32.dll
dlltest.pas(17,1) Fatal: There were 6 errors compiling module, stopping
Fatal: Compilation aborted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:58:35.360

我不知道如何直接解决链接问题，但您可以声明从 Pascal 源导出这些函数的公共包装函数。

例如：

```
{$ASMMODE INTEL}
procedure WrapperGetStdHandle; assembler; public; alias: '_GetStdHandle@4';
asm  jmp GetStdHandle end;
procedure WrapperWriteConsoleA; assembler; public; alias: '_WriteConsoleA@20';
asm  jmp WriteConsoleA end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:07:33.560

我怀疑有一些导入库由 nasm 自动链接以与 nasm 代码一起使用，并且可能您也需要从该库链接相关的存根。

**修正：**

这可能是智能链接的问题。如前所述，FPC 会即时生成导入存根，但仅在需要时才会生成。因为 Windows 单元（包含所有核心 WINAPI 调用）非常大，所以为它激活了智能链接（仅添加您使用的内容）。（还有其他原因）

NASM 起源的 obj 不在 FPC 的控制范围内，因此不会为其生成相关函数。

如果是这种情况，BeniBela 的代码可能会起作用，因为它强制来自 FPC 代码的引用，并在符号中链接。不过这是推测，它也可能是带有装饰的东西，或者带有前导下划线的东西。

测试很简单，使用 pascal 代码中的函数，而不使用 Benibela 的声明。

顺便说一句，FPC 的默认值不是 stdcall，所以 BenBela 的函数可能应该得到一个 stdcall 修饰符

# php - 如何在php的标头中传递授权令牌

> ID：14726350
> 
> 赞同：1
> 
> 时间：2013-02-06T10:09:28.467
> 
> 标签：php, web-services

我正在尝试在我的 php 页面中传递授权令牌。我正在使用的代码如下：

```
function getValues(){

    $path='webservice path';

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,$path);

    curl_setopt($ch, CURLOPT_FAILONERROR,1);

    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

    curl_setopt($ch, CURLOPT_TIMEOUT, 60);

    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Basic token_no'));

    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: text/xml'));

    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Access-Control-Allow-Origin: *'));

    $retValue = curl_exec($ch);

    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    curl_close($ch);

    return $retValue;

} 
```

但我无法包含标题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:14:58.147

你应该只设置`CURLOPT_HTTPHEADER`一次，一个包含所有标题的数组。

```
curl_setopt($ch, CURLOPT_HTTPHEADER,
    array(
         'Authorization: Basic token_no',
         'Content-type: text/xml',
         'Access-Control-Allow-Origin: *'
    )); 
```

# bash - 比较两个配置文件（关联数组）的键差异的最快方法

> ID：14726355
> 
> 赞同：0
> 
> 时间：2013-02-06T10:09:36.767
> 
> 标签：bash, awk

以关联数组（键=值）的形式编写两个文件，例如：

档案一：

```
banana=yellow
kiwi=green
tomato=red 
```

文件 B：

```
banana=dislike
tomato=like
pear=like 
```

我想知道比较他们的密钥的最佳方法（在速度方面）：

A对B：

```
kiwi=green 
```

B 对 A

```
pear=like 
```

双向

```
kiwi=green
pear=like 
```

我不想使用循环，因为这些文件可能很大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:26:46.460

使用`join`：

A对B：

```
$ join -t= -j 1 -v 1 <(sort fileA) <(sort fileB) 
kiwi=green 
```

B对A：

```
$ join -t= -j 1 -v 2 <(sort fileA) <(sort fileB) 
pear=like 
```

双向：

```
$ join -t= -j 1 -v 1 -v 2 <(sort fileA) <(sort fileB) 
kiwi=green
pear=like 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T10:19:41.450

B 对 A

```
awk -F'=' 'NR==FNR{a[$1]=$0;next}!($1 in a)' A B 
```

A对B

```
awk -F'=' 'NR==FNR{a[$1]=$0;next}!($1 in a)' B A 
```

双向

```
awk -F'=' '{a[$1]++;v[$1]=$0}END{for(i in a)if(a[i]==1)print v[i]}' A B 
```

所有都没有测试，让我知道它是否不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:38:15.430

我喜欢 dogbane 的回答，但会使用 grep 和 cut 提交我糟糕的解决方案：

```
grep -v -f <(for key in $(cut -d '=' -f 1 fileA); do echo "^$key="; done) fileB 
```

# .net - IEquals 和 IComparable 按属性

> ID：14726356
> 
> 赞同：0
> 
> 时间：2013-02-06T10:09:40.433
> 
> 标签：.net, compare, equals

在现在的几个项目中，我一直在以相等和可比较的实现形式编写大量样板代码。
Resharper 在这里有很大帮助，因为它可以自动生成代码，您可以在其中选择参与相等性的字段，然后为您吐出样板文件。

我在想，因为这段代码是相当可预测的，但仍然有很多陷阱，它可能会被从类本身中提取出来并移植到一个属性中，在该属性中你将一个属性放在参与的字段之上（可能带有一个订单号为了平等）。

因为“在编码之前思考”：

*   为什么这还不存在（或者我的谷歌技能让我失望了）
*   为什么这是个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:13:31.043

> 为什么这已经不存在了

它确实 - 就`IComparer<T>`and而言`IEqualityComparer<T>`，在我的[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)项目中：

```
IComparer<Foo> comparer = ProjectionComparer<Foo>.Create(f => f.Name)
                                                 .ThenBy(f => f.Age); 
```

和：

```
IEqualityComparer<Bar> eq = ProjectionEqualityComparer<Bar>.Create(b => b.Name); 
```

或者：

```
IEqualityComparer<Bar> eq = ProjectionEqualityComparer<Bar>
    .Create(b => new { b.Name, b.Age }); 
```

我发现越来越多的时候我更喜欢使用这些接口，而不是`IEquatable<T>`因为`IComparable<T>`这样更灵活，而且通常没有*单一*的自然方式来排序/比较是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:14:11.363

听起来你在寻找[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)；本质上，聪明的属性。有几个[可用于 .NET 的 AOP 框架](https://stackoverflow.com/questions/633710/what-is-the-best-implementation-for-aop-in-net)。这些使您可以将任意逻辑添加到属性中，然后您可以将其放在您想要的任何类上。

# actionscript-3 - 舞台强制渲染/重绘

> ID：14726357
> 
> 赞同：0
> 
> 时间：2013-02-06T10:09:45.690
> 
> 标签：actionscript-3, apache-flex

通常我会听 ENTER_FRAME 事件并在每次渲染帧时执行代码。但是对于我的应用程序来说，这太慢了。2 个 ENTER_FRAME 事件之间的时间为 40 毫秒。如果我改变我的帧率也没关系。

那么是否可以在不监听事件的情况下强制 flash 重绘/渲染帧？我尝试了 stage.invalidate() 方法并更改了帧速率，但它并没有改善任何东西（stage.invalidate() 实际上没有做任何事情）

我做了一个小测试来查看 ENTER_FRAME 和 EXIT_FRAME 事件之间的平均时间：

```
private var beginTime:Number;
private var endTime:Number;

public function init():void {
    addEventListener(Event.ENTER_FRAME, enterFrame);
    addEventListener(Event.EXIT_FRAME, exitFrame);
}

private function enterFrame(e:Event):void {
    beginTime = new Date().getTime();

    if(endTime) {
        trace(beginTime - endTime);
    }
}

private function exitFrame(e:Event):void {
    endTime = new Date().getTime();
} 
```

如果我是对的，则在渲染该帧之前触发 ENTER_FRAME 事件，并在渲染之后触发 EXIT_FRAME 事件。因此，在 EXIT_FRAME 事件之后，渲染完成，应用程序将调度 ENTER_FRAME 事件。这两个事件之间的平均时间是 52 毫秒。我想缩短那个时间

顺便说一句，我已将我的帧速率设置为 180 进行此测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:05:17.643

stage.Invalidate 将强制舞台重绘。它不建议您首先解决您的时间问题。

# opencv - 打印关键点描述符

> ID：14726362
> 
> 赞同：0
> 
> 时间：2013-02-06T10:10:07.757
> 
> 标签：opencv, feature-detection, feature-descriptor

我会打印特征关键点的描述符。我的方法在输入中接收关键点向量和该点的垫子描述符。有人知道一个简单的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:30:08.667

对于您拥有的每个`descriptor`矩阵，您可以简单地

```
std::cout << descriptor << std::endl; 
```

将描述符打印到控制台。

# visual-studio - 如何强制合并 TFS 中的修补程序？

> ID：14726380
> 
> 赞同：0
> 
> 时间：2013-02-06T10:10:51.230
> 
> 标签：visual-studio, tfs, merge, branching-and-merging

我们正在使用 TFS 高级分支计划：

![分支计划](../Images/6ec67708806f5724f1989cce3ed00970.png)

有没有一种方法可以强制我们必须将修补程序合并到服务分支？我们最近发生了一个事件，我们部署了应用程序的 V1.2.0，但它不包含在 V1.1.1 中所做的更改。

或者这只是一个手动执行的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:51:16.380

我们有一个自动调度的脚本来执行这种合并。它的要点是：

```
tf merge src dest
tf resolve /auto:AutoMerge
tf checkin 
```

在这里发布太复杂了，因为它有很多日志记录和监控——只要有合并冲突等，它就会提醒我。

# python - Errno 104 Connection reset by peer` 错误

> ID：14726385
> 
> 赞同：6
> 
> 时间：2013-02-06T10:11:04.363
> 
> 标签：python, openssl, httplib

我有以下代码片段。以前它工作正常并且正在打印输出

但是现在当我在同一网络中更改我的机器的物理位置时，我得到`error: [Errno 104] Connection reset by peer`错误 IP 与机器相同。

我正在使用 Scientific Linux 6.1

```
 operation='GET'
 url="/apifactory/api"
 url_request = "%s HTTP/1.1" %url
 connect = httplib.HTTPSConnection('myhost.com')
 try:
      connect.request(operation,url_request,'')
 except Exception,obj:
      connect.close()
      print traceback.format_exc()

 response_obj=connect.getresponse()
 data=response_obj.read()
 connect.close()
 print data

Traceback:
  File "/usr/local/lib/python2.7/ssl.py", line 121, in __init__
  self.do_handshake()
  File "/usr/local/lib/python2.7/ssl.py", line 281, in do_handshake
  self._sslobj.do_handshake()
  error: [Errno 104] Connection reset by peer 
```

我试过 `openssl s_client -connect myhost.com:443`它给出了：

```
 CONNECTED(00000003)
  write:errno=104
  no peer certificate available
  No client certificate CA names sent
  SSL handshake has read 0 bytes and written 113 bytes
  New, (NONE), Cipher is (NONE)
  Secure Renegotiation IS NOT supported
  Compression: NONE
  Expansion: NONE 
```

在更改位置之前一切正常。可能的原因是什么？关于 opesssl 配置或认证有什么变化吗？

# c# - 为提取的方法添加单元测试

> ID：14726392
> 
> 赞同：2
> 
> 时间：2013-02-06T10:11:11.053
> 
> 标签：c#, unit-testing, tdd

假设您正在使用 TDD 开发产品。您逐步添加测试并最终得到一个大方法。现在是重构的时候了，所以你将方法分成更小的方法。例如;

```
// Before refactoring.
public void SomeMethod()
{
    // ...
    int sum = numbers.Sum();
    // ...
}

// After refactoring.
public void SomeMethod()
{
    // ...
    int sum = GetSumOfNumbers(numbers);
    // ...
}

private GetSumOfNumbers(int[] numbers)
{
    return numbers.Sum();
} 
```

在这一步之后，您是否应该为该`GetSumOfNumbers`方法编写测试？我想当我们测试时`SomeMethod`，我们已经测试过了`GetSumOfNumbers`。但同时，可能还有其他方法在使用`GetSumOfNumbers`，即使它适用于`SomeMethod`，但可能不适用于另一种方法。这将帮助我们更快地找到问题（因为测试会给出更具体的错误）。但同时，也许这没有用，而且增加了冗长。

你怎么看待这件事？在这个例子中，`GetSumOfNumbers`方法是私有的，所以如果你认为它不应该仅仅因为它是私有的而被测试，那么如果它是公共的，它应该被测试吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:13:32.570

你应该测试你的类的公共 API。不要测试私有方法。这样做，将创建一个与您的类耦合太紧密的测试套件。您班级中的每一次内部更改都会破坏您的测试套件中的一些测试。

如果你认为你应该测试一个特定的私有方法——可能是因为它执行了一些复杂或复杂的逻辑——那是一种告诉你可能是时候将该方法移到新类中的味道了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:13:44.693

不，你没有。

这个想法是，当您提取方法时，测试会覆盖您的背部。无论如何，您都无法测试私有方法（没有反射）。

通过测试调用 的方法`GetSumOfNumbers`，您将自动对其进行测试。测试覆盖率工具将确认这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:48:46.623

我很想得出这样的结论：在使设计更可测试的过程中，您已经完成了一半。请注意，拥有更多公共方法/为几乎每个私有方法创建一个类绝不是“总是更好”。

我在重构时遵循的正常方法与您所采用的方法完全相同：

*   **对长方法 (1) 应用重构“提取方法”**。

*完成此操作后，您应该能够将新对象与仅将工作委托给私有方法的微小公共方法区分开来。*

*   **应用重构“为私有方法引入类”（2）**。

*如果它在您的设计/架构中有意义！使用依赖注入将对象引用传递给您的 SuT（被测对象），以便您可以模拟它的行为。之后，您可以为代表您以前的私有方法的待创建类编写新测试。*

我想补充一件事。我认为将私有方法推广为公共方法是一种不好的做法，“只是因为你不想为它编写测试”。我还认为将方法从私有提升到内部只是为了测试它们是一种不好的做法。我会更进一步：我认为允许测试项目访问内部方法是一种不好的做法。对我来说，这都是设计缺陷的迹象。并不意味着这就是不这样做的原因。您可以在代码中添加代码气味，只要这是有意识的选择！在所有其他情况下：保持您的设计可测试，这样您就不必作弊并将私有方法提升为公共方法。

一个可能过于简单的例子：

```
public class TheThing
{
    private readonly ISummator _summator;

    public TheThing(ISummator summator)
    {
        _summator = summator;
    }

    public void SomeMethod()
    {
        _summator.SumStuff();
    }
} 
```

# python - jinja 模板变量赋值范围

> ID：14726396
> 
> 赞同：3
> 
> 时间：2013-02-06T10:11:23.923
> 
> 标签：python, scope, jinja2

鉴于以下 Jinja 片段

```
 {% set sep='' %}                
        {% for stamp in stamp_list -%}
            {%- for heartbeat in heartbeat_list -%}
                {%- if heartbeat.name == site.name and heartbeat.stamp == stamp.stamp -%}
                    {{- heartbeat.sc_time -}}
                    {{- sep -}}
                    {% set sep=',' %}
                                            [PROOF for new value {{ sep }}]
                {%- endif -%}
            {%- endfor -%}
        {%- endfor %} 
```

看看 sep 变量（分隔符的缩写）我想用逗号分隔 sc_time .. 比如 3.13,2.5,1.33,...

所以我介绍了 var sep，我在内部 if 中进行了更改。阅读 Ninja 我看不到 for 循环内部的范围或 if 和 YES，我实际上可以使用和更改 sep var... 在这个示例中的行

```
 {% set sep=',' %} 
```

被执行并且下面的行

```
 [PROOF ... 
```

实际上会导致下一次显示，但是

```
 {{- sep -}} 
```

只是再次呈现为空变量。我在这里错过/不理解什么....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T06:48:04.300

问题是变量的范围。您 for 循环中的`sep`变量被认为是您在顶部初始化的变量之外的另一个变量。

此处提供了相同的问题和一些答案： [Jinja 变量的范围可以扩展到内部块之外吗？](https://stackoverflow.com/questions/4870346/can-a-jinja-variables-scope-extend-beyond-in-an-inner-block)

# linux - CLOCK_MONOTONIC 的起点

> ID：14726401
> 
> 赞同：20
> 
> 时间：2013-02-06T10:11:35.310
> 
> 标签：linux, real-time

据我了解，Linux 的起点`CLOCK_MONOTONIC`是启动时间。在我目前的工作中，我更喜欢使用单调时钟而不是`CLOCK_REALTIME`（用于计算），但同时我需要在报告中提供人性化的时间戳（带有年/月/日）。它们可能不是很精确，所以我想在启动时间加入单调计数器。

我可以从哪里使用 api 调用在 linux 系统上获得这个时间？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-21T18:52:02.150

假设 Linux 内核在开始跟踪单调时钟的同时启动*正常运行时间*计数器，您可以通过从**当前时间减去****正常运行时间**来得出启动时间（相对于 Epoch） 。

 **Linux通过该结构以秒为单位提供系统*正常运行时间；*可以通过该函数在符合 POSIX 的库上获取自 Epoch 以来[`sysinfo`](http://linux.die.net/man/2/sysinfo)的*当前时间（以秒为单位）。*[`time`](http://pubs.opengroup.org/onlinepubs/009695399/functions/time.html)

```
#include <stddef.h>
#include <stdio.h>
#include <time.h>
#include <sys/sysinfo.h>

int main(void) {
    /* get uptime in seconds */
    struct sysinfo info;
    sysinfo(&info);

    /* calculate boot time in seconds since the Epoch */
    const time_t boottime = time(NULL) - info.uptime;

    /* get monotonic clock time */
    struct timespec monotime;
    clock_gettime(CLOCK_MONOTONIC, &monotime);

    /* calculate current time in seconds since the Epoch */
    time_t curtime = boottime + monotime.tv_sec;

    /* get realtime clock time for comparison */
    struct timespec realtime;
    clock_gettime(CLOCK_REALTIME, &realtime);

    printf("Boot time = %s", ctime(&boottime));
    printf("Current time = %s", ctime(&curtime));
    printf("Real Time = %s", ctime(&realtime.tv_sec));

    return 0;
} 
```

不幸的是，单调时钟可能与启动时间不完全匹配。当我在我的机器上测试上述代码时，单调时钟与系统正常运行时间相差一秒。但是，只要考虑到相应的偏移量，您仍然可以使用单调时钟。

***可移植性注意事项****：尽管 Linux 可能会返回相对于引导时间的当前单调时间，但通常允许 POSIX 机器从任意（但一致）时间点（通常是 Epoch）返回当前单调时间。*

* * *

作为旁注，您可能不需要像我一样推导出启动时间。我怀疑有一种方法可以通过 Linux API 获取启动时间，因为有许多 Linux 实用程序以人类可读的格式显示启动时间。例如：

```
$ who -b
         system boot  2013-06-21 12:56 
```

我找不到这样的调用，但检查其中一些常用实用程序的源代码可能会揭示它们如何确定人类可读的启动时间。

对于该`who`实用程序，我怀疑它利用该[`utmp`](http://man7.org/linux/man-pages/man5/utmp.5.html)文件来获取系统启动时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:15:07.230

[http://www.kernel.org/doc/man-pages/online/pages/man2/clock_getres.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_getres.2.html)：

> ```
>  CLOCK_MONOTONIC
>           Clock that cannot be set and represents monotonic time since some
>           unspecified starting point. 
> ```

意味着您可以`CLOCK_MONOTONIC`用于区间计算和其他事情，但您不能真正将其转换为人类可读的表示。

此外，您可能想要`CLOCK_MONOTONIC_RAW`而不是`CLOCK_MONOTONIC`：

> ```
>  CLOCK_MONOTONIC_RAW (since Linux 2.6.28; Linux-specific)
>           Similar  to  CLOCK_MONOTONIC, but provides access to a raw hard‐
>           ware-based time that is not subject to NTP adjustments. 
> ```

继续使用`CLOCK_REALTIME`人类可读的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:14:59.633

`CLOCK_MONOTONIC`通常不受系统时间任何调整的影响。例如，如果系统时钟是通过 NTP 调整的，`CLOCK_MONOTONIC`则无法知道（也不需要）。

因此，`CLOCK_MONOTONIC`如果您需要人类可读的时间戳，请不要使用。

请参阅[CLOCK_REALTIME 和 CLOCK_MONOTONIC 之间的区别？](https://stackoverflow.com/questions/3523442/difference-between-clock-realtime-and-clock-monotonic)进行讨论。**

# google-chrome-devtools - 在网络选项卡中获取请求发起程序堆栈

> ID：14726402
> 
> 赞同：11
> 
> 时间：2013-02-06T10:11:43.690
> 
> 标签：google-chrome-devtools

开发工具的“网络”选项卡中的每个请求都有一个“发起者”列。

对于 AJAX 请求，这几乎是无用的，因为 jQuery 完成了所有的实际请求并在此处结束。

我模糊地阅读了谷歌文档（[https://developers.google.com/chrome-developer-tools/docs/protocol/tot/network](https://developers.google.com/chrome-developer-tools/docs/protocol/tot/network)）中关于 Initiator 对象实际上如何包含堆栈跟踪的内容......所以：我怎么能懂吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T21:09:49.153

对此的回答较晚，但是如果您将鼠标悬停在启动器的链接上，则堆栈会在悬停时弹出。如果您仔细导航到弹出窗口，您可以单击堆栈进一步向上的调用源行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-15T20:22:35.010

请同时检查此链接。它可能会有所帮助！

“按住 Shift 并将鼠标悬停在请求表中的请求上。”

[https://developers.google.com/web/tools/chrome-devtools/network/reference#timing-explanation](https://developers.google.com/web/tools/chrome-devtools/network/reference#timing-explanation)

# ios - 如何让 iPad 旋转更流畅？

> ID：14726405
> 
> 赞同：0
> 
> 时间：2013-02-06T10:11:48.097
> 
> 标签：ios, objective-c, rotation

我将向您展示两种方法：第一个“redefineLayout”计算元素的新位置，第二个是旋转后的钩子“didRotateFromInterfaceOrientation”。

```
- (void)redefineLayout
{
    int margin = 20;
    int buttonWidth = ((int)self.view.frame.size.width - margin * 4)/3;

    [self.buttonNewOrder setFrame:CGRectMake(margin, 20, buttonWidth, 200)];
    [self.buttonStatistics setFrame:CGRectMake(margin * 2 + buttonWidth, 20, buttonWidth, 200)];
    [self.buttonSincronize setFrame:CGRectMake(margin * 3 + buttonWidth * 2, 20, buttonWidth, 200)];
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self redefineLayout];
} 
```

我的界面可以工作，但在旋转之后，我看到元素做出了快速而难看的运动。我想让这个动作更加流畅。有什么建议吗？

* * *

我的解决方案：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self redesignLayout:duration];
}

- (void)redesignLayout:(NSTimeInterval)duration {
    [UIView animateWithDuration:duration animations:^{
        int margin = 20;
        int buttonWidth = (((int)self.view.frame.size.width) - margin * 4)/3;
        [self.buttonNewOrder setFrame:CGRectMake(margin, 20, buttonWidth, 200)];
        [self.buttonStatistics setFrame:CGRectMake(margin * 2 + buttonWidth, 20, buttonWidth, 200)];
        [self.buttonSincronize setFrame:CGRectMake(margin * 3 + buttonWidth * 2, 20, buttonWidth, 200)];
    }];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initLayout];
    [self redesignLayout:0];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:18:56.893

尝试用`didRotateFromInterfaceOrientation`这个替换你的电话：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation duration:(NSTimeInterval)duration
{
    [UIView animateWithDuration:duration animations:^{
        [self redefineLayout];
    }];
} 
```

# python - 使用 Python，我如何从 Google Doc 中读取纯文本？

> ID：14726409
> 
> 赞同：7
> 
> 时间：2013-02-06T10:12:05.123
> 
> 标签：python, download, google-docs, google-docs-api

我正在尝试从 Python 脚本中读取 Google Doc 的原始文本/内容（只是一个普通文档，而不是电子表格或演示文稿），但到目前为止收效甚微。

这是我尝试过的：

```
import gdata.docs.service
client = gdata.docs.service.DocsService()
client.ClientLogin('email', 'password')
q = gdata.docs.service.DocumentQuery()
q.AddNamedFolder('email', 'Folder Name')
feed = client.Query(q.ToUri())
doc = feed.entry[0] # extract one of the documents 
```

但是，这个类型为 gdata.docs.DocumentListEntry 的变量 doc 似乎不包含任何内容，仅包含有关文档的元信息。

我在这里做错了吗？有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-23T20:49:34.803

**更新（2019 年 3 月）**好消息！[Google Docs REST API](https://developers.google.com/docs)现在可用。有关它的更多信息，请参阅[我对类似问题的 SO 回答](https://stackoverflow.com/a/42522473/305689)，但为了让您继续前进，这里是[官方 Python“快速入门”示例](https://developers.google.com/docs/api/quickstart/python)，向您展示如何以纯文本形式获取 Google Doc 的标题。

下面最初回答的 Apps Script 和 Drive REST API 解决方案仍然有效，并且是获取 Google Doc 内容的替代方法。（Drive API 适用于 Python 2 和 3，但 Apps 脚本仅适用于 JavaScript。）

**底线**：如果您想以纯文本格式下载整个文档，最好使用 Drive API 解决方案。如果您想以编程方式对 Doc 的不同部分进行 CRUD，则*必须*使用 Docs API 或 Apps 脚本。

**（2017 年 2 月）** OP 中的代码和唯一的其他答案现在都已过时，因为[ClientLogin 身份验证](https://developers.googleblog.com/2012/04/changes-to-deprecation-policies-and-api.html)在 2012 年已被弃用（！），而[GData API](http://developers.google.com/gdata/docs/directory)是上一代 Google API。虽然并非所有 GData API 都已弃用，**但**[所有**较新**的Google API](http://developers.google.com/api-client-library/python/apis)都不使用[Google Data 协议](http://developers.google.com/gdata)。

 **[虽然Google Apps Script](https://developers.google.com/apps-script)提供了“类似 API”的服务，但 Google Docs 文档没有可用的 REST API，这是一种云中的 JavaScript 解决方案，提供对 Google Docs 的编程访问（通过其[DocumentService](https://developers.google.com/apps-script/reference/document/)对象），包括[Docs 附加组件](https://developers.google.com/apps-script/quickstart/docs)。

要从 Google Doc 读取纯文本，考虑**文件**级**访问**，您将使用[**Google Drive API**](http://developers.google.com/drive)代替。使用 Drive API 的示例：

*   将 Google 表格导出为 CSV（[博客文章](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)）
*   “穷人的纯文本到 PDF”转换器（[博客文章](http://wescpy.blogspot.com/2015/12/google-drive-uploading-downloading.html)）（*）

(*) - TL;DR：将纯文本文件上传到云端硬盘，导入/转换为 Google Docs 格式，然后将该 Doc 导出为 PDF。上面的帖子使用 Drive API v2；[这篇后续帖子](http://wescpy.blogspot.com/2015/12/migrating-to-new-google-drive-api-v3.html)描述了将其迁移到 Drive API v3，这是一个结合了“穷人转换器”帖子的[开发者视频。](http://googledevelopers.blogspot.com/2016/01/google-drive-uploading-downloading.html)

OP 的解决方案是执行与您在上面两篇文章中看到的类似的操作，但请确保您使用的是`text/plain`导出 MIMEtype。对于 Drive 的其他导入/导出格式，请参阅[此相关问题 SO answer](https://stackoverflow.com/a/38406284/305689)以及[从 Drive docs page 下载文件](http://developers.google.com/drive/v3/web/manage-downloads)。下面是一些伪代码，它在我的 Drive 文件夹中搜索名为“Hello World”的 Google Docs 文档，并显示在屏幕上找到的第一个匹配文件的内容（假设*DRIVE*是您的 API 服务端点）：

```
from __future__ import print_function

NAME = 'Hello World'
MIME = 'text/plain'

# using Drive API v3; if using v2, change 'pageSize' to 'maxResults',
# 'name=' to 'title=', and ".get('files')" to ".get('items')"
res = DRIVE.files().list(q="name='%s'" % NAME, pageSize=1).execute().get('files')
if res:
    fileID = res[0]['id']  # 1st matching "Hello World" name
    res = DRIVE.files().export(fileId=fileID, mimeType=MIME).execute()
    if res:
        print(res.decode('utf-8')) # decode bytes for Py3; NOP for Py2 
```

如果您需要更多，请观看这​​些视频，了解如何[使用 Google API 进行设置](http://youtu.be/DYAwYxVs2TI?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=2)、[OAuth2 授权](http://youtu.be/h-gBeC9Y9cE?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=3)以及[创建 Drive 服务端点以列出您的 Drive 文件](http://youtu.be/Z5G0luBohCg?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=4)，以及[所有这三个的相应博客文章](http://wescpy.blogspot.com/2014/11/authorized-google-api-access-from-python.html)。

要了解有关如何在 Python 中使用 Google API 的更多信息，请查看[我的博客](http://wescpy.blogspot.com)以及我正在制作的各种 Google 开发人员视频（[系列 1](http://youtube.com/playlist?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq)和[系列 2 ）。](http://youtube.com/playlist?list=PLOU2XLYxmsIJJFx_MVCQJ7eWF3gDxkl)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:34:33.587

A`DocumentQuery`不会将所有文档及其内容返回给您——这将花费很长时间。它只返回一个文档列表，以及每个文档的元数据。（实际上，IIRC 你可以通过这种方式获得预览页面，所以如果你的文档只有一页可能就足够了……）

然后，您需要在单独的请求中下载内容。该`content`元素有一个`type`（MIME 类型）和一个`src`（实际数据的 URL）。你可以下载它`src`，然后解析它。但是，您可以通过添加`exportFormat`参数来覆盖默认类型，因此您无需进行任何解析。

请参阅文档中的[**下载文档和文件**](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)部分，其中有一个示例显示如何下载文档并指定格式。（它使用 .NET 而不是 Python，它使用 HTML 而不是纯文本，但您应该能够弄清楚。）**

# audit - 审计列 - 加入还是复制？

> ID：14726410
> 
> 赞同：0
> 
> 时间：2013-02-06T10:12:13.430
> 
> 标签：audit, database-normalization

我见过许多业务系统没有在用户表上使用连接，而是将用户名（或名字+姓氏）复制到 CreatedBy 审计字段。

我已经看到这种方法的一个问题 - 用户可能结婚并更改她的姓氏，然后 CreatedBy 字段将保留旧值。

是否有充分的理由从数据规范化中撤出并为 CreatedBy 字段创建冗余文本数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:00:30.120

在不使用外键引用的情况下存储某人的姓名可以让您删除用户，而不会影响有关他们创建的行的信息。这是否明智取决于应用程序。

在大多数组织中，如果知道某人 3 年前的名字很重要，那么有一些方法可以做到这一点。它可能不在数据库中。可能是，“去 HR 问问 Jerry。他记得每个人。” *这*是否明智也取决于应用程序。

无论如何，这不一定违反任何规范化准则。在一种情况下，您要存储用户的当前名称或首选名称。在另一种情况下，您在创建行时存储用户的名称，这仍然是一个真实的事实。

# java - 从 Jackson ObjectMapper 中排除空数组

> ID：14726414
> 
> 赞同：9
> 
> 时间：2013-02-06T10:12:28.610
> 
> 标签：java, json, jackson

我正在使用[Jackson ObjectMapper](http://jackson.codehaus.org/1.8.8/javadoc/org/codehaus/jackson/map/ObjectMapper.html)从 Java 对象树构建 JSON 。我的一些 Java 对象是集合，有时它们可​​能是空的。因此，如果它们是空的，ObjectMapper 会生成我：`"attributes": [],`并且我想从我的结果中排除那些空的 JSON 数组。我当前的 ObjectMapper 配置：

```
SerializationConfig config = objectMapper.getSerializationConfig();
config.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
config.set(SerializationConfig.Feature.WRAP_ROOT_VALUE, true); 
```

从[这篇文章](https://stackoverflow.com/questions/8899115/how-to-not-send-an-empty-collection-in-jackson)我读到我可以使用：

```
config.setSerializationInclusion(JsonSerialize.Inclusion.NON_DEFAULT); 
```

但这给我带来了一个错误：

```
Caused by: java.lang.IllegalArgumentException: Class com.mycomp.assessments.evaluation.EvaluationImpl$1 has no default constructor; can not instantiate default bean value to support 'properties=JsonSerialize.Inclusion.NON_DEFAULT' annotation. 
```

那么我应该如何防止那些空数组出现在我的结果中呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T10:15:59.103

你应该使用：

```
config.setSerializationInclusion(JsonSerialize.Inclusion.NON_EMPTY); 
```

对于杰克逊 1 或

```
config.setSerializationInclusion(JsonInclude.Include.NON_EMPTY); 
```

杰克逊 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-08T09:06:38.633

如果可以修改要序列化的对象，也可以直接在字段上打上注解，例如（Jackson 2.11.2）：

```
@JsonProperty
@JsonInclude(JsonInclude.Include.NON_EMPTY)
private Set<String> mySet = new HashSet<>(); 
```

通过这种方式，不需要进一步的配置`ObjectMapper`。

# objective-c - 创建新对象时何时需要调用 alloc

> ID：14726415
> 
> 赞同：-1
> 
> 时间：2013-02-06T10:12:30.473
> 
> 标签：objective-c, memory-management, allocation

我了解引用计数和“拥有一个对象”的整个业务，如果你在 Objective-c 中分配一个对象，你有责任释放它

但是，您究竟什么时候需要在新创建的对象上调用 alloc？只是在范围结束后保留​​引用还是有其他原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:16:52.933

您需要调用 alloc 来为对象分配内存。

对象的典型设置类似于：

```
Object *obj = [[Object alloc] init]; 
```

alloc 调用为对象分配内存，init 调用对其进行初始化（为所有属性/属性提供合理的默认值）。

一些对象类型带有工厂方法，例如

```
NSArray *arr = [NSArray array]; 
```

在这种情况下，对象由单个数组调用初始化和分配。

这些都与引用计数无关（直接），除了不同的所有权规则通常适用于这两种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:22:01.607

我认为您误解了一个基本概念。将 alloc 发送到一个类将导致创建您拥有的该类的新对象（尚未初始化）（保留计数将为 1）。

从你的问题“你什么时候需要在新创建的对象上调用 alloc ？” - 如果对象是新创建的，则意味着有人已经分配了它。

如果您的意思是：什么时候需要在新创建的对象上调用保留？答案是如果你想自己持有它而不依赖于分配它的人，并且可能会在某个时候释放它。请记住，alloc/new 语法将保留计数提高一，而其他创建方法（如 [NSArray 数组]）返回自动释放对象..

一般来说，我会建议使用 ARC 而不会被这些问题所困扰..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:17:02.627

我不完全是一个objective-c的人，但我不认为你调用`alloc`任何对象，你在一个类上调用它来分配对象并调用`init`新分配的对象。

如果这是您的设置，您可能希望在自动释放池执行`retain`之后保留引用。`release`这经常发生在使用`[NSThing thingWithStuff:stuff]`或类似创建的对象上。

# blackberry - 黑莓包装项目 Kenexa 失败

> ID：14726420
> 
> 赞同：0
> 
> 时间：2013-02-06T10:12:53.680
> 
> 标签：blackberry, jar, package

我有一段时间收到此错误。我在一个项目中有 28 个类，当我运行它时无法制作包。它说：

```
"Error: jar command failed: jar -cfm "E:\Blackberry Workspace\Kenexa\deliverables\Standard\7.1.0\Kenexa.jar" C:\Users\Acer\AppData\Local ...    Kenexa      
line 0  BlackBerry Packaging Problem" 
```

但是当我将类限制为 24 个时，它会生成包。是否与制作包装时的某些尺寸限制有关？我应该怎么做才能成功打包？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:17:04.723

[Blackberry Support](http://supportforums.blackberry.com/t5/Java-Development/why-cause-more-then-100-compiled-classes-packaging-I-O-error/m-p/520282)的回答 您是否使用 BlackBerry JDE 或 BlackBerry Java Plug-in for Eclipse？

如果您使用的是 BlackBerry JDE，您可能会遇到一个问题，即您已达到命令行支持的最大长度（所有文件都列在命令行上）。如果是这种情况，您可以通过减少类的数量（如您所做的那样）或减少源文件的路径长度（将它们移近驱动器的根目录）来解决它。Mark Sohm 黑莓开发顾问

所以，我只需要将我的工作区文件夹名称从“Blackberry Workspace”更改为“Workspace”。命令行并没有走很长的路。

# java - 从通知更改选项卡的意图

> ID：14726423
> 
> 赞同：1
> 
> 时间：2013-02-06T10:12:55.863
> 
> 标签：java, android

我有一个带有 2 个选项卡的 TabHost Activity。此外，我的应用程序基本上有 2 种不同类型的通知。现在我想通过单击通知 1 打开选项卡 1，并通过单击通知 2 打开选项卡 2。所以我在通知意图中添加了一个额外的 ID，它代表选项卡的 ID。要更改选项卡，我尝试使用 getIntent().getExtra(...) 在 TabHost Activity 的 onResume 方法中获取 ID 并更改选项卡。此解决方案在大多数情况下都有效。但是它有时不能正常工作，但我不知道为什么。任何线索为什么它有时有效，有时无效？或者是否有更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:31:40.180

您将不得不使用 ActivityGroups 来做到这一点。

[http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)

[http://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity](http://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity)

但是，请记住，在 ICS 中不推荐使用 ActivityGroups。

这是我对 ActivityGroup 的实现：

选项卡中的活动：

```
Intent i = new Intent(v.getContext(), SearchList.class);
i.putExtra("search", search);

View view = SearchActivityGroup.group.getLocalActivityManager()  
.startActivity("SearchList", i  
.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))  
.getDecorView();  

// Again, replace the view  
SearchActivityGroup.group.replaceView(view);
ActivityGroup:

package nl.dante.SuperDeals;

import java.util.ArrayList;

import android.app.ActivityGroup;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class SearchActivityGroup extends ActivityGroup {

View rootView;

// Keep this in a static variable to make it accessible for all the nested
// activities, lets them manipulate the view
public static SearchActivityGroup group;

// Need to keep track of the history if you want the back-button to work
// properly, don't use this if your activities requires a lot of memory.
private ArrayList<View> history;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /*
     * this.history = new ArrayList<View>(); group = this;
     * 
     * // Start the root activity within the group and get its view View
     * view = getLocalActivityManager().startActivity("Search", new
     * Intent(this,Search.class) .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
     * .getDecorView();
     * 
     * // Replace the view of this ActivityGroup replaceView(view);
     */

}

@Override
protected void onResume() {

    super.onResume();
    this.history = new ArrayList<View>();
    group = this;

    // Start the root activity within the group and get its view
    View view = getLocalActivityManager().startActivity("Search", new Intent(this, Search.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();

    // Replace the view of this ActivityGroup
    replaceView(view);
}

public void replaceView(View v) {
    // Adds the old one to history
    if (history.size() == 0) {
        if (rootView != null) {
            history.add(rootView);
            rootView = null;
        }
    }
    history.add(v);
    // Changes this Groups View to the new View.
    setContentView(v);
}

public void back() {
    try {
        if (history.size() > 0) {
            if (history.size() == 1) {
                rootView = history.get(0);
                Toasts.ToastImageView(this, "Druk nogmaals BACK om af te sluiten", R.drawable.power_64_off, "red");
            }
            history.remove(history.size() - 1);
            setContentView(history.get(history.size() - 1));
        } else {
            finish();
        }
        if (history.size() < 3) {
            // Tabhost.bannerImage2.setImageResource(0);
            Tabhost.banner.setBackgroundResource(R.drawable.gradient_blue);
        }
        if (history.size() == 2) {
            Tabhost.bannerImage1.setImageResource(R.drawable.sorteer_btn);
        }
    } catch (Exception ex) {
    }
}

public int getHistorySize() {
    return history.size();
}

@Override
public void onBackPressed() {
    try {
        SearchActivityGroup.group.back();
    } catch (Exception ex) {

    }
    return;
}
} 
```

# android - 在 Android 中以编程方式添加联系人

> ID：14726426
> 
> 赞同：0
> 
> 时间：2013-02-06T10:13:03.190
> 
> 标签：android, contacts

经过大量搜索，我发现我们如何在 Android 中以编程方式添加联系人。但我在添加联系人时遇到了一个小问题。我正在使用的代码：

```
ArrayList<ContentProviderOperation> op_list = new ArrayList<ContentProviderOperation>(); 
    op_list.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI) 
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, "Phone") 
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, "null") 
        //.withValue(RawContacts.AGGREGATION_MODE, RawContacts.AGGREGATION_MODE_DEFAULT) 
        .build()); 

 // first and last names 
      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
  .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
        .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE) 
        .withValue(StructuredName.GIVEN_NAME, name) 
        .withValue(StructuredName.FAMILY_NAME, name) 
        .build()); 

      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
              .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
              .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
              .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, mobileNo)
              .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE )
              .build());
      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
              .withValueBackReference(Data.RAW_CONTACT_ID, 0)

      .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
      .withValue(ContactsContract.CommonDataKinds.Email.DATA, emailAddr)
      .withValue(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_HOME)
      .build());

 try{ 
  ContentProviderResult[] results = getContentResolver().applyBatch(ContactsContract.AUTHORITY, op_list); 
  Toast.makeText(getApplicationContext(), "Contact Added Sucessfully..", Toast.LENGTH_LONG).show();
 }catch(Exception e){ 
     Toast.makeText(getApplicationContext(), "Problem in Adding Contact ..", Toast.LENGTH_LONG).show();

  e.printStackTrace(); 
 } 
```

当我的代码运行时，出现以下异常：

```
java.lang.IllegalArgumentException: Must specify both or neither of ACCOUNT_NAME and ACCOUNT_TYPE; URI: content://com.android.contacts/raw_contacts, 
```

我在此帐户类型和帐户名称中指定了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:17:00.083

这个对我有用

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    int rawContactInsertIndex = ops.size();

    Log.i("Line38", "Here");
       ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)  
                    .withValue(RawContacts.ACCOUNT_TYPE, AccountManager.KEY_ACCOUNT_TYPE)          
                    .withValue(RawContacts.ACCOUNT_NAME, AccountManager.KEY_ACCOUNT_NAME)          
                    .build());

    ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)      
                    .withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex)      
                    .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)      
                    .withValue(StructuredName.DISPLAY_NAME, "u232786seee")
                    .withValue(StructuredName.IN_VISIBLE_GROUP,true)
                    .build());

    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactInsertIndex)
    .withValue(ContactsContract.Data.MIMETYPE,
            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,"23232343434")
    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, "4343")
    .build());

    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactInsertIndex)
    .withValue(ContactsContract.Data.MIMETYPE,
            ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.CommonDataKinds.Email.DATA, "")
    .withValue(ContactsContract.CommonDataKinds.Email.TYPE, "")
    .build());

    //Log.i("Line43", Data.CONTENT_URI.toString()+" - "+rawContactInsertIndex);

    try {
            getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } catch (OperationApplicationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } 
```

# jquery - 需要 2 个 jQuery 实例在同一页面上同时运行

> ID：14726431
> 
> 赞同：0
> 
> 时间：2013-02-06T10:13:24.420
> 
> 标签：jquery, html

我写了一些jQuery来滑入一些文本，然后在延迟之后再次滑出并滑入下一个。这是脚本：

```
var About = {
    init: function () {
        var text_spans = $('.headline-box a'),
            extracts = new Array(),
            delay = 5,
            current = 0;

        text_spans.each(function (index) {
            if ($(this).is(":visible")) {
                current = index;
            }
            extracts.push($(this));
        });

        var interval = setInterval(function () {

            target = (current < (extracts.length - 1)) ? current + 1 : 0;

            extracts[current].slideUp('slow');
            extracts[target].slideDown('slow');

            current = target;

        }, delay * 500);

    }
}

About.init(); 
```

它可以工作，但我`.headline-box`在页面上有两个实例，每个实例都有 3 个链接（`a`）。像这样（简化）：

```
<div class="headline-box">
    <a href="#">Lorem Ipsum</a>
    <a href="#">Dolar Sit Amet</a>
    <a href="#">Aliquam imperdiet ornare</a>
</div>

<div class="headline-box">
    <a href="#">Lorem Ipsum</a>
    <a href="#">Dolar Sit Amet</a>
    <a href="#">Aliquam imperdiet ornare</a>
</div> 
```

一切正常（它们都滑入和滑出），但问题是：一个盒子会运行一次，然后停止，等待另一个盒子运行，然后第一个盒子会重新开始。

有谁知道为什么以及如何解决这个问题，所以它们同时运行？感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:10:30.593

您可以创建一个类`About`，并创建两个实例：

```
function Abount() {
   //define class here
}

$(function() {
    $('.headline-box').each(function(n, elem) {
        new About(elem);
    });
}) 
```

完整版：http: [//jsfiddle.net/vAbZ6/](http://jsfiddle.net/vAbZ6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:33:52.460

我相信您可以在每个 div.headline-box 上使用每个 jquery。

这应该做到（或非常接近）。

```
$('div.headline-box').each(function(){
  var text_spans = $(this).children('a') ;
   extracts = new Array(),
        delay = 5,
        current = 0;

    text_spans.each(function (index) {
        if ($(this).is(":visible")) {
            current = index;
        }
        extracts.push($(this));
    });

    var interval = setInterval(function () {

        target = (current < (extracts.length - 1)) ? current + 1 : 0;

        extracts[current].slideUp('slow');
        extracts[target].slideDown('slow');

        current = target;

    }, delay * 500); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:41:07.923

您的代码正在从每个标题框中获取所有锚元素并按顺序循环浏览这些元素。从您更新的答案中，我收集到您希望标题框独立地循环通过它们的子元素。

我已经用一个例子设置了这个[jsfiddle 。](http://jsfiddle.net/PqTD2/1/)

诀窍是确保您单独跟踪您正在循环的标题框。最简单的方法是为每个标题框创建一个控制器对象的实例。

在示例代码中，您可以调用

```
var about_a = new About($("#box_a"));
var about_b = new About($("#box_b")); 
```

# esb - 选择什么 ESB 产品？

> ID：14726445
> 
> 赞同：0
> 
> 时间：2013-02-06T10:13:57.683
> 
> 标签：esb

我在互联网上搜索了很长时间，但仍然找不到任何我想要的信息。我需要比较 ESB 备选方案的能力，例如 CICS 支持、服务管理能力等。产品的价格并不重要。任何一点经验都将不胜感激。
谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T17:56:12.353

对于 node.js 程序员，我想自我推广我的开源项目：[https ://github.com/salboaie/SwarmESB](https://github.com/salboaie/SwarmESB)

它是 ESB 的核心，但主要创新在于对功能进行编程的难易程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:08:59.720

您可以查看一些博客和文章，例如：

*   [http://www.infoq.com/articles/ESB-Integration](http://www.infoq.com/articles/ESB-Integration)
*   [http://www.kai-waehner.de/blog/2012/01/10/spoilt-for-choice-which-integration-framework-to-use-spring-integration-mule-esb-or-apache-camel/](http://www.kai-waehner.de/blog/2012/01/10/spoilt-for-choice-which-integration-framework-to-use-spring-integration-mule-esb-or-apache-camel/)
*   [http://www.jboss.org/products/fuse](http://www.jboss.org/products/fuse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T12:05:18.143

我探索过的选项是，

*   FUSE ESB - 它之前是免费的，最近被 RedHat 收购。拥有不错的能力并拥有企业版和更多版本（具有 SOA 治理）。基于 Apache ServiceMix。

*   MULE ESB - 在特性和功能方面与 FUSE ESB 非常相似。在论坛上广泛使用和良好的在线支持。

*   Oracle ESB - 安静昂贵，功能丰富。有能力支持并与 Oracle 组件很好地集成，如 oracle BPEL、BPM、工作流等。

*   IBM Websphere ESB

# php - 缓存来自 Instagram 的多个页面/图像

> ID：14726446
> 
> 赞同：1
> 
> 时间：2013-02-06T10:13:58.827
> 
> 标签：php, caching, instagram

我正在做一个小项目，用户可以在这个项目中看到标记为“kitties”的图像。Instagram 只允许 5000 个请求/小时，我认为它不会达到这个，但我选择以任何方式缓存。也因为我不知道如何让反向链接工作。我只能获取下一页的链接，然后最近页面的链接成为当前页面，一个指向自身的链接。此外，该 api 可以返回奇怪数量的图像，有时 14 次，有时 20 次等等。我希望它始终每页显示 20 张图像，并且只有 5 页（100 张图像）。然后每 5/10 分钟更新一次这个文件。

所以，我的计划是将 100 张图像存储到一个文件中。我得到它的工作，但它是令人难以置信的慢。代码如下所示：

```
$cachefile = "instagram_cache/".TAG.".cache";
$num_requests = 0; //Just for developing and check how many request it does

//If the file does not exsists or is older than *UPDATE_CACHE_TIME* seconds
if (!file_exists($cachefile) || time()-filemtime($cachefile) > UPDATE_CACHE_TIME)
{
    $images = array();
    $current_file = "https://api.instagram.com/v1/tags/".TAG."/media/recent?client_id=".INSTAGRAM_CLIENT_ID;
    $current_image_index = 0;

    for($i = 0; $i >= 0; $i++)
    {
        //Get data from API
        $contents = file_get_contents($current_file);

        $num_requests++;
        //Decode it!
        $json = json_decode($contents, true);

        //Get what we want!
        foreach ($json["data"] as $x => $value)
        {                
            array_push($images, array(
                'img_nr' => $current_image_index,
                'thumb' => $value["images"]["thumbnail"]["url"],
                'fullsize' => $value["images"]["standard_resolution"]["url"],
                'link' => $value["link"], 
                'time' => date("d M", $value["created_time"]),
                'nick' => $value["user"]["username"],
                'avatar' => $value["user"]["profile_picture"],
                'text' => $value['caption']['text'],
                'likes' => $value['likes']['count'],
                'comments' => $value['comments']['data'],
                'num_comments' => $value['comments']['count'],
            ));

            //Check if the requested amount of images is equal or more...
            if($current_image_index > MAXIMUM_IMAGES_TO_GET)
                break;

            $current_image_index++;

        }
        //Check if the requested amount of images is equal or more, even in this loop...
        if($current_image_index > MAXIMUM_IMAGES_TO_GET)
            break;
        if($json['pagination']['next_url'])
            $current_file = $json['pagination']['next_url'];

        else
            break; //No more files to get!

    }
    file_put_contents($cachefile, json_encode($images)); 
```

这感觉就像一个非常丑陋的黑客，关于如何让这个工作更好的任何想法？

或者有人可以告诉我如何使“反向链接”正常工作？（是的，我可以是 js 并且在历史上是 -1，但不是！）。

任何想法、建议、帮助、评论等都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:14:35.487

为什么不订阅实时并将图像存储在数据库中？然后，当它们被渲染时，您可以检查图像 url 是否有效（检查照片是否已被删除）。从您自己的数据库获取数据将比从 Instagram 快得多

# android - 在 IOS 和 Android 设备上调试 Untiy3d 项目

> ID：14726447
> 
> 赞同：1
> 
> 时间：2013-02-06T10:13:59.197
> 
> 标签：android, ios, debugging, monodevelop, unity3d

如何在 IOS 或 Android 设备上调试 Unity 项目（在 monodevelop 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:29:22.627

有一些解决方法。一个示例是资产组件`KGFDebug`，可在[此处](http://www.kolmich.at/kolmich/index.php?option=com_content&view=article&id=112&catid=86&Itemid=475&lang=en)找到。

您还可以尝试将您的资产转移到 Eclipse。有关这方面的更多信息，请查看这个[问题](https://stackoverflow.com/questions/6506099/android-and-unity-3d-game-development)，在特定[的 Mazze 的回答](https://stackoverflow.com/a/6508724/571353)中。

# php - 使用 SMTP 服务器向 Windows Server 2008 发送电子邮件 PHP

> ID：14726448
> 
> 赞同：2
> 
> 时间：2013-02-06T10:14:01.487
> 
> 标签：php, iis, smtp, windows-server-2008, sendmail

我想从我的 PHP 应用程序发送一封电子邮件。为此，我在 Windows server 2008 上的 IIS 中设置了我的网站。我可以安装 Windows SMTP 服务器吗？

然后我创建一个测试页面来发送电子邮件：

```
<?php
  Ini_set ('SMTP', 'localhost');
  Ini_set ('sendmail_from', 'myEmailTest@local.com');

  $to = 'myEmailTest@ExternalDomain.com';
  $subject = 'Example subject';
  $body = 'body ... With an example';

  if(mail($to, $subject, $body)){
     echo "Successful";
  }else{
     echo "Error";
  }
?> 
```

我还在 IIS 中配置 php.ini 和 SMTP 电子邮件，如下所示：

```
[Mail function]
smtp = localhost
smtp_port = 25 
```

然后我测试发送我的邮件。当我将电子邮件发送到本地域的电子邮件地址到本地域中的另一个电子邮件地址时。我返回我的页面“成功”，电子邮件进入文件夹：

```
C:\inetpub\mailroot\Drop 
```

不利的是，如果我从本地域电子邮件地址中的电子邮件地址向外部域 (@hotmail.com) 发送电子邮件。我的页面返回“错误”并且没有任何反应。

我查看了我的 SMTP 服务器的日志文件，但没有错误消息。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:58:13.273

我成功地前进了一步。现在，当我从本地域的电子邮件地址发送电子邮件到外部域的电子邮件地址（@hotmail.com）时，邮件被发送到我的 PHP 页面，它被卡在队列中`C:\inetpub\mailroot\Queue`.

有谁知道是什么问题？

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:20:44.797

如果您的页面返回错误（很可能是 500），那么您需要查看与 SMTP 错误日志分开的 PHP 错误日志。请让我们知道您的发现，因为在尝试执行 php 邮件功能时遇到的任何错误都会显示在这些日志中。

# java - javax.el.PropertyNotFoundException：在类型上找不到属性“printIDs”，但此属性已被注释

> ID：14726451
> 
> 赞同：1
> 
> 时间：2013-02-06T10:14:07.803
> 
> 标签：java, jsf, openfaces

我得到一个例外

```
javax.el.PropertyNotFoundException: Property 'printIDs' not found on type pl.com.pir.beans.SelectedItemBean
at javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:237)
at javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:214)
at javax.el.BeanELResolver.property(BeanELResolver.java:325)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:85)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:217)
at com.sun.faces.facelets.el.ELText$ELTextComposite.toString(ELText.java:157)
at com.sun.faces.facelets.compiler.CommentInstruction.write(CommentInstruction.java:77)
at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

但是在我的代码中，这个方法被注释了，我试图清除网络浏览器捕获和cookies，在代码中搜索'printIDs'字符串，并且所有的出现也被注释了，我查看了face-config.xml和web.xml，删除了webapp在 tomcat webapps 目录中，即使重新启动我的电脑，也没有任何帮助。

```
 <!-- MENU GENERATOR -->
    <h:panelGroup layout="block" id="produktMenu">
            <o:dataTable value="#{productBean.productList}" var="produkt" pageSize="10"
                         style="margin-top: 15px; width: 100%; height: 420px;">
                         <o:multipleRowSelection rowDatas="#{productBean.list}" style="background: #a4aec5; color: white;" />
            <o:columnReordering />
            <f:facet name="columnMenu">
                <o:columnMenu />
            </f:facet>

            <o:column header="Kategoria" width="7%"
                sortingExpression="#{produkt.kategoria}"
                bodyStyle="padding-left: 5px; padding-right: 5px;"
                headerStyle="text-align: left; padding-left: 5px; padding-right: 5px;">
                <f:facet name="subHeader">
                    <o:dropDownFieldFilter maxlength="4" customValueAllowed="false" />
                </f:facet>
                <h:outputText value="#{produkt.kategoria}" />
            </o:column>

            <o:selectionColumn style="width: 6%;" sortable="true"
                header="Selection">
                <f:facet name="header">
                    <o:selectAllCheckbox />
                </f:facet>
            </o:selectionColumn>
            <f:facet name="below">
                    <o:dataTablePaginator id="paginator" />
                </f:facet>
                <o:column id="symbolCol1" sortingExpression="#{produkt.symbol}">
                    <f:facet name="header">
                        Symbol
                    </f:facet>
                    <h:outputText value="#{produkt.symbol}" />
                </o:column>
                <o:column id="opisCol1" sortingExpression="#{produkt.opis}">
                    <f:facet name="header">
                        Opis
                    </f:facet>
                    <h:outputText value="#{produkt.opis}" />
                </o:column>
                <o:column id="cenaCol1" sortingExpression="#{produkt.cena}">
                    <f:facet name="header">
                        Cena
                    </f:facet>
                    <h:outputText value="#{produkt.cena}" />
                </o:column>
            </o:dataTable>

    </h:panelGroup>
    <h:commandButton value="Dodaj" action="#{selectedItemBean.submit}" />

    <o:dataTable value="#{productBean.list}" var="l" id="resultTable">
        <o:column id="resultSumbolCol" sortingExpression="#{l.symbol}">
            <f:facet name="header">
                        Symbol
                    </f:facet>

            <h:outputText value="#{l.symbol}" />
        </o:column>
        <o:column id="resultOpisCol" sortingExpression="#{l.opis}">
            <f:facet name="header">
                        Opis
                    </f:facet>
            <h:outputText value="#{l.opis}" />
        </o:column>
        <o:column id="resultCenaCol" sortingExpression="#{l.cena}">
            <f:facet name="header">
                        Cena
                    </f:facet>
            <h:outputText value="#{l.cena}" />
        </o:column>
    </o:dataTable> 
```

SelectedItemBean 来源：

```
 public String submit() {
    for (Map.Entry<Integer, Boolean> entry : selectedIDs.entrySet()) {
        if (entry.getValue() == true) {
            System.out.println("id: " + entry.getKey() + ", "
                    + entry.getValue());
            id.add(entry.getKey());
        }
    }
    System.out.println("SelectedItemBean.submit() --> " + id.size());
    return "selected";
}

public String printIDs() {
    int i = 0;
    if (id.isEmpty())
        return null;
    System.out.println("printIDs <--");
    Iterator<Integer> it = id.iterator();
    while (it.hasNext()) {
        i++;
        System.out.println(it.next());
    }
    System.out.println("suma produktow: " + i + "\nprintIDs -->");
    pb = new ProductBean();
    StringParse sp = new StringParse();
    idList = sp.prepareInStatement(id);
    try {
        list = pb.getProductByID(idList, 2);
        suma = cumputeCosts(list);
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return "TESTprintIDs";
} 
```

为什么我不断收到此异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:25:12.017

您没有显示您的注释代码，但我猜您使用了经典的 xml 注释

```
<!--  ...   --> 
```

我必须说，默认情况下 EL 即使在注释中也会执行。您可以使用以下两种解决方案之一来解决此问题：

首先，您可以通过添加以下内容来全局禁用评论中的 EL 解析：

```
<context-param>
  <param-name>facelets.SKIP_COMMENTS</param-name>
  <param-value>true</param-value>
</context-param> 
```

在你的`web.xml`文件中。

另一种解决方案是将您的评论包含在`ui:remove`标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:17:36.390

`SelectedItemBean`应该有该字段的访问器`printIDs`。

```
public class SelectedItemBean{
    private String printIDs;

    private getPrintIDs(){
      return printIds;
    }
} 
```

表达式语言使用 getter 方法进行属性解析。

您可以通过以下方式更改现有代码：

```
public String getPrintIDs() { //Notice new signature
    int i = 0;
    if (id.isEmpty())
        return null;
    System.out.println("printIDs <--");
    Iterator<Integer> it = id.iterator();
    while (it.hasNext()) {
        i++;
        System.out.println(it.next());
    }
    System.out.println("suma produktow: " + i + "\nprintIDs -->");
    pb = new ProductBean();
    StringParse sp = new StringParse();
    idList = sp.prepareInStatement(id);
    try {
        list = pb.getProductByID(idList, 2);
        suma = cumputeCosts(list);
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return "TESTprintIDs";
} 
```

# jquery - 爆炸动画无法替代

> ID：14726454
> 
> 赞同：1
> 
> 时间：2013-02-06T10:14:13.623
> 
> 标签：jquery, animation

在我的网站上，我正在使用列表`hide()`和`show()`动画来显示列表菜单更改时出现的列表，并且它在 JS 文件中是这样写的：

```
$('#find').show(1000);
$('#find').hide(1000); 
```

最近在 jQueryUI 网站上看到了一些东西，并尝试使用它，但没有成功：

```
$('#find').show( "explode", {}, 1000 ); 
```

我的桌子在没有任何动画的情况下变得可见和不可见，有时它也不起作用。

如果您需要给我建议，[这是该网站；](http://delimes.ru/)列表菜单在右上角，只需选择要观看的内容即可。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:53:18.270

对我来说，eplode 动画效果很好。

[http://jsfiddle.net/4GbKu/](http://jsfiddle.net/4GbKu/)

```
$('.test').hide("explode",{pieces:1}, 1000); 
```

例如。试试看，让我知道这是否是您正在寻找的

# android - 如何搜索在 tablelayout 中动态创建的行？

> ID：14726456
> 
> 赞同：1
> 
> 时间：2013-02-06T10:14:16.407
> 
> 标签：android

如何搜索在android的表格布局中动态创建的行？我有一个表格布局，其中包含名称和代码作为列，我如何在这些行中搜索特定的名称/代码？

我正在尝试以这种方式添加标签：

```
TextView empFirstName = null; 
    int i,j;
    for (i=0; i<employees.size();i++){

        final Employee employee = (Employee) employees.get(i);

        int count = 0;

        TableRow empData = new TableRow(this);
        empData.setId(300+count);
        empData.setClickable(true);

        /*empData.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT ));*/
        //tr.setClickable(true);

        final TextView empCode = new TextView(this);
        empCode.setId(300+count);
        empCode.setText(employee.getCode());
        empCode.setTextSize(16);
        empCode.setPadding(2,2, 2, 2);
        empCode.setLayoutParams(new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 2 ));
        empData.addView(empCode);

        final TextView empName = new TextView(this);
        empName.setId(300+count);
        empName.setText(employee.getCallName());
        empName.setTextSize(16);
        empName.setPadding(2, 2, 2, 2);
        empName.setLayoutParams(new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 4 ));
        empData.addView(empName);

        empFirstName = new TextView(this);
        empFirstName.setId(007);
        empFirstName.setText(employee.getFirstName());
        empFirstName.setTag(i); 
```

}

我正在尝试以这种方式检索名称：

```
for(j=0;j<=i;j++){

        TextView names = (TextView) empFirstName.getTag(j);
        System.out.println("Name is "+names.getText());

    } 
```

但它抛出空指针异常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:16:30.177

您可以在创建每个视图时为每个视图设置一个标签，并在以后需要时比较标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:32:23.563

您要搜索行或行的内容吗？如果它是该行，则为该行设置一个标签。就像是 ：

```
row.setTag(SomeTag); 
```

在 res/values 下定义一个 ids 文件。添加到那个：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item type="id" name="sample_key" />
</resources> 
```

在java文件参考。它是这样的：

```
String sampleKey = "This is a sample key";
textView.setTag(R.id.sample_key, sampleKey);

String returnedString = (String) textView.getTag(R.id.sample_key); 
```

# php - CURL 后循环

> ID：14726458
> 
> 赞同：0
> 
> 时间：2013-02-06T10:14:19.077
> 
> 标签：php, post, file-upload, curl

我正在运行一个将文件上传到远程表单的脚本

```
 //submit form
  $form_data = array("file_upload" => "@file.xml;type=text/xml","otherkey" => "overvalue");
  $ch = curl_init();
  $form_url = 'http://www.domain.com/form.php';
  curl_setopt($ch, CURLOPT_URL, $form_url);
  curl_setopt($ch, CURLOPT_POST, 1 );
  curl_setopt($ch, CURLOPT_POSTFIELDS, $form_data);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
  curl_setopt($ch, CURLOPT_VERBOSE, 1);      
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
  $postResult = curl_exec($ch);
  echo $postResult; 
```

该文件正在完美上传，但是在远程服务器上，在文件上传和处理页面后重新加载（form.php），但是 CURL 帖子再次开始。

我猜这是由于 POST 数据仍然存在？我怎样才能做到这一点，以便文件上传一次，处理然后完成？我设置了 FOLLOWLOCATION = 0 但没有运气

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:24:39.473

你怎么知道它又开始了？如果你从你的回声中推断它，它会在你写这个时被回显两次：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0); //echoes result at init 
```

而不是这个

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //returns only result, not echoing 
```

# cakephp - CakePHP - 博客教程 -

> ID：14726465
> 
> 赞同：0
> 
> 时间：2013-02-06T10:14:51.257
> 
> 标签：cakephp, cakephp-2.0

我正在关注 pdf 博客教程，并且在 $this->Post 应该可用的 PostsController 中，另一种方法 postConditions() 是唯一的选择。根据 PDF 帖子，由于命名约定，可以访问。但这不是我的情况。

我创造了：

模型 Post.php - 根据 pdf 控制器 PostsController - 根据 pdf

我使用 PhpStorm IDE 来帮助我解决这些问题......

我做错什么了？有人可以帮我吗？

我在本地 XAMP 上使用 Cake 2.3.0 Stable

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:34:04.330

我假设您的意思是您的编辑器中的自动完成功能不起作用？

CakePHP 在引用类时动态加载类，而您的编辑器不会，因此它不知道 Post 是什么，因为它对它一无所知。

我不使用 PhpStorm，但有人说他们已经让它工作了：http: [//blog.hwarf.com/2011/08/configure-phpstorm-to-auto-complete.html](http://blog.hwarf.com/2011/08/configure-phpstorm-to-auto-complete.html)

# sql - 从列中获取子字符串并执行 groupBy 和 count

> ID：14726467
> 
> 赞同：1
> 
> 时间：2013-02-06T10:14:59.253
> 
> 标签：sql, sql-server, group-by, pivot, substring

我有一个存储大量文件数据的表，例如它们的语言、唯一 ID、文件路径等。我希望能够从唯一 ID 中获取子字符串，这给了我资产类型，这是始终是 ID 的前 2 个字母。然后我想按语言对这些资产类型进行分组，并计算每种语言有多少种类型。所以最后我希望有一个表，它有一个语言列，然后是每个子字符串（资产类型）的列。

我试图创建一个大的 switch 语句，但这不是很可靠，有人告诉我也许 linq 会更好。我对 linq 或 sql 没有太多经验，并且我尝试过几个 sql 查询，这些查询可以让我获得所需结果的一部分，但我希望也许有更多经验的人可能知道如何对这些功能进行分组成一个声明。

```
SELECT 
  LCID,
  SUBSTRING(AssetID,1,2)  
FROM [table] 
```

这让我得到了正确的子字符串，但每种语言都有多行。有没有办法将相同的语言分组到一列中，然后计算每种类型的数量？谢谢

![当前查询的样本数据](../Images/36986ef000859a81e08b5d298179f54e.png) ![期望的结果](../Images/2e26f6cac3d18e198625c9322648f638.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:18:25.637

听起来你想要 a`COUNT`和 a `GROUP BY`：

```
SELECT 
  SUBSTRING(AssetID,1,2), 
  COUNT(*) Total
FROM [table]
GROUP BY SUBSTRING(AssetID,1,2) 
```

您没有指定什么数据库，但是，如果您使用的是 SQL Server 并且`LCID`在您的`SELECT`语句中，那么您需要将它包含在您的`GROUP BY`子句中。

如果每一行的`LCID`值都是唯一的，那么您将为每行获得多条记录，`AssetID`因为它会尝试将唯一值组合在一起。结果，我删除了`LCID`.

如果它不是唯一的，那么您可以使用：

```
SELECT LCID, 
  SUBSTRING(AssetID,1,2), 
  COUNT(*) Total
FROM [table]
GROUP BY LCID, SUBSTRING(AssetID,1,2) 
```

根据您所做的编辑，您需要`PIVOT`将数据从行转换为列。对于`PIVOT`您将使用：

```
select LCID, HA, HT, HP, FH, FX
from
(
  SELECT LCID, 
    SUBSTRING(AssetID,1,2) AssetID
  FROM [table]
) src
pivot
(
  count(AssetID)
  for AssetID in (HA, HT, HP, FH, FX) -- place more values here
) piv 
```

如果要转换为列的值未知，则需要使用类似于以下的动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(SUBSTRING(AssetID,1,2)) 
                    from [table]
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT LCID, ' + @cols + ' from 
             (
                SELECT LCID, 
                  SUBSTRING(AssetID,1,2) AssetID
                FROM [table]
            ) x
            pivot 
            (
                count(AssetID)
                for AssetID in (' + @cols + ')
            ) p '

execute(@query) 
```

# qt - 如何正确使用 QDBusPendingCallWatcher？

> ID：14726469
> 
> 赞同：2
> 
> 时间：2013-02-06T10:15:03.387
> 
> 标签：qt, qtdbus

我正在尝试使用`QDBusPendingCallWatcher`来观看异步呼叫。一些示例代码如下：

```
{
    // interface = new QDBusInterface(...);
    QDBusPendingCall pcall = interface->asyncCall("query");
    QDBusPendingCallWatcher *watcher = new QDBusPendingCallWatcher(pcall, this);
    QObject::connect(watcher, SIGNAL(finished(QDBusPendingCallWatcher*)), this, SLOT(handler(QDBusPendingCallWatcher*)));
} 
```

和处理函数：

```
void Client::handler(QDBusPendingCallWatcher* call)
{       
    QDBusPendingReply<QString> reply = *call; 
    // do something
} 
```

我的问题是：

1.  看起来内部`QDBusPendingCallWatcher`使用[了共享数据指针](http://harmattan-dev.nokia.com/docs/library/html/qt4/qdbuspendingcall-members.html)，不手动删除`watcher`指针是否安全？只是离开范围并忘记它？

2.  如果我可以让 pendingcall 的智能指针完成所有的技巧，我可以`QDBusPendingCallWatcher`在我的类中只使用一个指针来观察所有的异步调用吗？像这样：

    ```
    {
        QDBusPendingCall pcall = interface->asyncCall("query");
        watcher = new QDBusPendingCallWatcher(pcall, this);
        QObject::connect(watcher, SIGNAL(finished(QDBusPendingCallWatcher*)), this, SLOT(handleOne(QDBusPendingCallWatcher*)));

        pcall = interface->asyncCall("anotherQuery");
        watcher = new QDBusPendingCallWatcher(pcall, this);
        QObject::connect(watcher, SIGNAL(finished(QDBusPendingCallWatcher*)), this, SLOT(handleTwo(QDBusPendingCallWatcher*)));
    } 
    ```

    这会造成灾难吗？或者我应该为每个调用使用多个指针？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:38:44.203

仔细查看[QDBusPendingCallWatcher 文档](http://doc.qt.digia.com/stable/qdbuspendingcallwatcher.html#details)：

> 上述代码连接的插槽可能类似于以下内容：

```
void MyClass::callFinishedSlot(QDBusPendingCallWatcher *call)
{
    QDBusPendingReply<QString, QByteArray> reply = *call;
    if (reply.isError()) {
        showError();
    } else {
        QString text = reply.argumentAt<0>();
        QByteArray data = reply.argumentAt<1>();
        showReply(text, data);
    }
    call->deleteLater();
} 
```

[QObject::deleteLater](http://doc.qt.digia.com/stable/qobject.html#deleteLater)的调用是关键：这意味着 Qt 将在执行返回到事件循环后立即删除 Object。

只要你`deleteLater`在里面打电话`Client::handler(...)`，你就不需要——更准确地说，你不能——`delete watcher;`在任何地方打电话。您唯一需要确保的是`call`插槽返回后没有人使用后面的对象。

# java - Java StringTokenizer

> ID：14726474
> 
> 赞同：0
> 
> 时间：2013-02-06T10:15:16.147
> 
> 标签：java, string, split

我有以下输入 (11,C) (5,) (7,AB) 我需要将它们分成每个坐标的 2 部分。所以我的 intarray 应该有 11, 5, 7 而我的字母数组应该有 C,,AB

但是当我尝试使用 stringtokenizer 时，我只得到我的 intarray 应该有 11、5、7 而我的字母数组应该有 C、AB

有什么办法可以得到（5，）的空白部分？谢谢你。

```
Vector<String> points = new Vector<String> ();
String a = "(11,C) (5,) (7,AB)";
StringTokenizer st = new StringTokenizer(a, "(,)");
    while(st.hasMoreTokens()) {
        points.add(st.nextToken());
    }
}
System.out.println(points); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:39:42.000

```
List <Integer> digits = new ArrayList <Integer> ();
List <String> letters = new ArrayList <String> ();
Matcher m = Pattern.compile ("\\((\\d+),(\\w*)\\)").matcher (string);
while (m.find ())
{
    digits.add (Integer.valueOf (m.group (1)));
    letters.add (m.group (2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:53:22.490

```
public static void main(String[] args) {
    String s = "(11,C), (5,) ,(7,AB)";
    ArrayList<String> name = new ArrayList<String>();
    ArrayList<Integer> number = new ArrayList<Integer>();

    int intIndex = 0, stringIndex = 0;
    String[] arr = s.split(",");
    for (int i = 0; i < arr.length; i++) {
        String ss = arr[i].replace("(", "");
        ss = ss.replace(")", "");
        boolean b = isNumeric(ss);
        // System.out.println( Arrays.toString(arr));
        if (b) {
            int num = Integer.valueOf(ss.trim()).intValue();
            number.add(num);
        } else
            name.add(ss);
    }

    System.out.println(name);
    System.out.println(number);

}

public static boolean isNumeric(String str) {
    try {
        double d = Double.parseDouble(str);
    } catch (NumberFormatException nfe) {
        return false;
    }
    return true;
} 
```

试试这个：我将输入从 "(11,C) (5,) (7,AB)" 稍微更改为 "(11,C), (5,) ,​​(7,AB)" 。

输出：

```
[C,  , AB]
[11, 5, 7] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:56:34.623

原始级别的残酷编码：

```
List<String> points = new ArrayList<String> ();
    String source= "(11,C) (5,) (7,AB)";
    StringTokenizer deleteLeft = new StringTokenizer(source, "(");
        while(deleteLeft.hasMoreTokens()) {
            StringTokenizer deleteRight = new StringTokenizer(deleteLeft.nextToken(), ")");
                points.add(deleteRight.nextToken());
        }
        System.out.println(points);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:36:23.123

应该是这样的

```
String[] values = a.split("\\) \\(");
String[][] result = new String[values.length][2];
for (int i = 0; i < values.length; i++) {
    values[i] = values[i].replaceAll("\\(|\\)", "") + " ";
    result[i] = values[i].split("\\,");  
    System.out.println(result[i][0] + " * " + result[i][1]);
} 
```

结果将包含坐标对。

# compass-sass - 将 Compass 的 image-url 与 relative_assets 一起用于子目录中的样式表？

> ID：14726475
> 
> 赞同：2
> 
> 时间：2013-02-06T10:15:21.723
> 
> 标签：compass-sass

所以我的源代码树看起来像这样：

```
assets/
├── css/
│   ├── master.css.scss
│   └── admin/
│       └── admin_master.css.scss
└── img/
    └── background.jpg 
```

我`relative_assets`打开了 Compass 选项，并且正确设置了`css_dir`and选项。`images_dir`

我的问题是，当`image-url("background.jpg")`从`master.css.scss`or调用时`admin_master.css.scss`，它总是返回`"../img/background.jpg"`，这当然适用于前者，但不适用于后者（它实际上意味着`"/assets/css/img/background.jpg"`）。

有没有办法在每个文件的基础上覆盖相对路径，以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T08:05:13.747

这对我来说似乎是一个配置/设置问题 - 我在多个项目上运行良好，并且 compass 可以处理样式表的各种深度（它为树中更深 1 级的文件添加了一个额外的 ../）。

尝试查看您的 compass config.rb 文件并检查 css_dir（您将 css 编译到的文件夹，而不是 .scss 文件所在的文件夹）以及您的 project_path 是否正确。

希望能帮助到你，

# css - 明确：两个 Chrome 问题

> ID：14726476
> 
> 赞同：0
> 
> 时间：2013-02-06T10:15:20.630
> 
> 标签：css, google-chrome, css-float, internet-explorer-7

我真的不明白怎么可能

```
<div style="clear:both"></div> 
```

在 Chrome 中不起作用。我有这个布局：

```
<div id="header">...</div>
<div id="content">
    <div id="col1">...</div> <!-- float left -->
    <div id="col2">...</div> <!-- float left -->
    <div id="col3">...</div> <!-- float left -->
    <div style="clear:both"></div> <!-- DOES NOT WORK -->
</div>
<div style="clear:both"></div> <!-- DOES NOT WORK -->
<div id="footer">...</div> 
```

所以，我`clear:both`在页脚之前和/或 col3 之后使用了。

它在 IE7 中也不起作用，但此刻我并不在乎。

任何人都可以帮助我吗？

我添加更多信息：

```
#content {
    padding-top: 19px;
    display: block;
}

#col1,
#col3 {
    width: 21%;
    position: relative;
    padding: 0 0 1em 0;
    float: left;
}

#col2 {
    width: 58%;
    position: relative;
    padding: 0 0 1em 0;
    float: left;
} 
```

已解决：对不起....我给你的​​信息还不够！问题是专栏的内容！！在 col1 我有一个高度为 40px 的 div，所以即使内容远远超过 40px，对于浏览器来说，它就像没有溢出......希望我在解释中已经很清楚了......但是 Tom Sarduy 的解决方案是有趣但在IE中不起作用...我昨天和今天都尝试过，但是好像没有采用样式...我在浏览器的开发人员工具中看到它但没有应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:24:37.553

明确：两者在 Chrome/IE7 中都可以正常工作。请参阅此示例以了解如何正确使用它。[http://jsfiddle.net/turiyag/LvMRY/2/](http://jsfiddle.net/turiyag/LvMRY/2/)

您可以发布指向您网站的链接或完整的实际代码吗？

CSS：

```
div {
    border: 1px solid black;
}

.floaty {
    height: 50px;
    width: 50px;
    float: left;
    background: green;
}

.cleary {
    height: 100px;
    width: 200px;
    clear: both;
    background: cyan;
} 
```

HTML

```
<html>
    <head>
    </head>

    <body>
        <div class="floaty">Floaty</div>
        <div class="floaty">Floaty</div>
        <div class="floaty">Floaty</div>
        <div class="floaty">Floaty</div>
        <div class="cleary">Cleary</div>
        <div class="floaty">Floaty</div>
        <div class="floaty">Floaty</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:27:28.473

它确实有效。你只是没有正确使用它。

如果您使用`clear:both`以下元素，则只会生效。例如，

```
floated left | floated left | clear: both;
floated left | clear: left;
floated left | cleawr: right; | floated: left 
```

想象一下“|”之间的每个文本 是块元素。如果您浮动元素并像上面的示例一样使用 clear，则代码应该显示类似上面的内容。

在这里查看一个实时示例：尝试删除该`clear`属性，您将看到浏览器如何放置“DOES NOT WORK”。

[http://jsfiddle.net/6VjSL/](http://jsfiddle.net/6VjSL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T10:02:23.580

使用清除：无；在 CSS 属性中。它将在 chrome 中工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:27:49.263

对于语义来说，为这些事情使用一个类会更好。正确的做法是：

### HTML

```
<div id="header">...</div>
<div id="content" class="clearfix">
    <div id="col1">...</div> <--- float left
    <div id="col2">...</div> <--- float left
    <div id="col3">...</div> <--- float left
    <div class="clearfix"></div> <--- DOES NOT WORK
</div>
<div id="footer">...</div> 
```

### CSS：

```
/* new clearfix */
.clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
    }
* html .clearfix             { zoom: 1; } /* IE6 */
*:first-child+html .clearfix { zoom: 1; } /* IE7 */ 
```

是的，它很丑，但效果很好，使设计师能够清除浮动而不隐藏溢出并设置宽度或浮动（几乎）一切来完成工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:38:11.957

那么它在任何地方都不起作用？:o)

您可能也将其`float:left`应用于`clear:both`div...

这适用于所有浏览器：

[http://jsfiddle.net/kKwkd/](http://jsfiddle.net/kKwkd/)

HTML

```
<div id="header">aaaaaaaaaaaaaaaaaa</div>
<div id="content">
    <div id="col1">bbb</div> <!-- float left -->
    <div id="col2">ccc</div> <!-- float left -->
    <div id="col3">ddd</div> <!-- float left -->
    <div style="clear:both"></div> <!-- DOES NOT WORK -->
</div>
<div style="clear:both"></div> <!-- DOES NOT WORK -->
<div id="footer">xxxxxxxxxxxxx</div> 
```

CSS

```
#header, #footer{    
    border: 1px dashed blue;
}

#col1,#col2,#col3{
    float: left;    
    border: 1px solid red;
    padding: 50px;
    margin: 10px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-05T09:57:06.947

我给你的信息还不够！问题是专栏的内容！！在 col1 我有一个高度为 40px 的 div，所以即使内容远远超过 40px，对于浏览器来说，它就像没有溢出......希望我在解释中已经很清楚了......但是 Tom Sarduy 的解决方案是有趣但在IE中不起作用...我昨天和今天都尝试过，但是好像没有采用样式...我在浏览器的开发人员工具中看到它但没有应用

# javascript - 将类添加到父级 关于函数

> ID：14726477
> 
> 赞同：3
> 
> 时间：2013-02-06T10:15:28.137
> 
> 标签：javascript, jquery, html

我正在尝试向 parent 添加一个类`<li>`，这是我一直在尝试但没有结果的方法：

```
function calendaractive(){
    $(this).parent('li').addClass("active");
} 
```

HTML

```
<li>
    <a href="javascript:void(0)" onclick="calendaractive();">2009</a>
</li> 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T10:17:43.517

尝试。
通过`this`你的函数绑定

```
<li>
    <a href="javascript:void(0)" onclick="calendaractive(this);">2009</a>
</li> 
```

相应地更改JS

```
function calendaractive(anchorLink){
    $(anchorLink).parent().addClass("active");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:19:37.277

最好不要混合 HTML 和 JavaScript。最好检查 JavaScript 本身中的点击：-

```
$(document).ready(function(){    
    $('li > a').on('click', function(e) {           
        $(this).parent().addClass('active');            
    });    
}); 
```

将 JavaScript 与 HTML 分开将使其更易于维护（与 CSS 相同的论点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:21:26.823

您应该使用 JQuery 而不是 onClick 方法添加事件：

JS 应该是这样的：

```
$(document).ready(function(){ 
    $("a").click(function() {
        $(this).parent('li').addClass("active");
    });
}); 
```

像这样的 HTML

```
<li>
    <a href="#">2009</a>
</li> 
```

请注意，这将添加到所有锚链接，如果您只想将点击事件添加到某些锚链接，请使用类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:31:52.713

javascript中的`this`关键字在不同的地方意味着不同的东西。有时是窗口，有时是使用它的功能，有时是不同的东西。这取决于调用函数的方法。这里有更多信息（更准确）：[“this”关键字如何工作？](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

因此，当您编写`$(this)`jQuery 时，您的意思是应该将此类添加到 this 对象中，无论它是什么。

如果你通过 id 将选择器作为 jQuery 的参数，或者更好地传递一个参数，你的代码应该可以工作。

# angularjs - Angular ng-repeat 中的条件/指令

> ID：14726478
> 
> 赞同：2
> 
> 时间：2013-02-06T10:15:29.190
> 
> 标签：angularjs, angularjs-ng-repeat

我只是从角度开始。我目前在 ng-repeat 中显示了一个 json 产品数组，并希望为每三个产品添加一个类。

有没有办法在转发器中编写一个条件，当 index%3 为 2 时，该条件将向 html 元素添加一个类

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:23:35.790

当然！

```
<div ng-repeat='item in items' ng-class='{third: $index%3==2}'>{{item}}</div> 
```

[http://plnkr.co/edit/24Ne1Cyh71INYIKxBCcc](http://plnkr.co/edit/24Ne1Cyh71INYIKxBCcc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:26:15.413

是的，使用`ng-class`指令：

```
<div ng-repeat="item in items" ng-class="{ 'third-elm': $index%3 == 2 }">{{item.value}}</div> 
```

**jsFiddle**：http: [//jsfiddle.net/bmleite/dKjz5/](http://jsfiddle.net/bmleite/dKjz5/)

# thumbnails - 在 CQ5 中调整图像资源的大小

> ID：14726485
> 
> 赞同：1
> 
> 时间：2013-02-06T10:15:49.623
> 
> 标签：thumbnails, aem

我正在尝试调整给定 JCR 图像资源的大小并将其存储为新的再现。用例是生成“任意”比例的缩略图。

我想使用`com.day.cq.dam.core.process.CreateThumbnailProcess`，但这在项目中不可用，我正在努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:46:28.850

我找到了一种非常低级的方法，可以调整由`jcrPathToImage`to`int targetWidth`和`int targetHeight`.

1.  调整图像大小

    ```
    Resource resource = getResourceResolver().getResource(jcrPathToImage);
    Asset asset = resource.adaptTo(Asset.class);
    Layer layer = new Layer(asset.getOriginal().getStream())
    layer.resize(targetWidth, targetHeight); 
    ```

2.  在 JCR 中创建新演绎版

    提取原始图像的mime类型

    ```
    Image image = new Image(resource);
    String mimeType = image.getMimeType(); 
    ```

    使用其资产表示存储调整大小的图像。

    ```
    ByteArrayOutputStream bout = null;
    ByteArrayInputStream bin = null;

    try {
        bout = new ByteArrayOutputStream(2048);
        layer.write(mimeType, 1, bout);

        bin = new ByteArrayInputStream(bout.toByteArray());

        asset.addRendition(resizedImgName, bin, mimeType);

    } finally {
        // close streams ...               
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:06:58.927

您可以配置 DAM 更新资产工作流程以提供您想要创建的演绎版

```
http://localhost:4502/etc/workflow/models/dam/update_asset.html 
```

在此工作流模型中选择缩略图创建步骤，然后在该步骤的流程选项卡中，您可以添加自定义缩略图值

[140:100],[48:48],[319:319],[90,90]

# django - 忽略 django url 模式中的反斜杠

> ID：14726490
> 
> 赞同：0
> 
> 时间：2013-02-06T10:16:03.050
> 
> 标签：django, url

在我的 django 项目中，我有一个像

`(r'^survey/u2=([^/]+)/u3=([^/]+)/$',SurveyView.as_view())`.

当我尝试打开以下网址时

[http://www.sample.com/survey/u2=rc57S4/jyTJBz+==/u3=/U5pKfrV8X1MjUU2tI0AhqTF5PGR8g=/](http://www.sample.com/survey/u2=rc57S4/jyTJBz+==/u3=/U5pKfrV8X1MjUU2tI0AhqTF5PGR8g=/)

`[where u2 & u3 are encrypted value using internal keys. ]`

我收到`page not found`错误。这是因为，示例 url 与服务器端的原始 url 模式不匹配，因为它在 url 参数中有“/”反斜杠字符。

现在，我无法通过向参数添加编码来编辑示例 url，因为该 url 已邮寄给客户。但是，如果客户打开链接，我不应该通过错误消息。

url 模式匹配时如何在服务器端处理这些特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:09:51.173

而不是在 URL 中作为参数传递，而是将其作为 GET 请求传递。分隔？和 & 字符。

# python - 如何更改 HDF5 表标题（使用 pytables 创建）

> ID：14726495
> 
> 赞同：0
> 
> 时间：2013-02-06T10:16:26.207
> 
> 标签：python, hdf5, pytables

我想知道是否有一种方法可以更改`HDF5 table`我在 python 代码中创建的标题，使用`pyTables`. 我给了错误的标题字符串，我现在也需要更改它，所以当我在 python 中再次打开它时，我可以根据它的标题将它与我加载的其他表区分开来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:34:17.343

您如何更改`_v_title`属性`Node`然后再次保存hdf5文件？

`table._v_title = 'new title'`

# castle-windsor - Castle Windsor：使用 LifeStyleScoped 解析组件时引发异常

> ID：14726498
> 
> 赞同：4
> 
> 时间：2013-02-06T10:16:43.400
> 
> 标签：castle-windsor, castle

我有一个三个组件：A，B和C。

它们以下列方式注册：

```
public class Installer : IWindsorInstaller
{
  public void Install(IWindsorContainer container, IConfigurationStore store)
  {
    container.Register(Component.For<IA>().ImplementedBy<A>());
    container.Register(Component.For<IB>().UsingFactoryMethod(Resolve).LifestyleScoped());
    container.Register(Component.For<IC>().ImplementedBy<C>().LifestyleScoped());
  }

  private static IUnitOfWork Resolve(IKernel kernel)
  {
    IA a = kernel.Resolve<IA>();
    B b = new B(a);
    kernel.ReleaseComponent(a);
    return b;
  }
} 
```

当我解决 CI 时，请按以下方式进行：

```
public void Test()
{
  using (ContainerAccessor.Instance.IocContainer.BeginScope())
  {
    using (IB b = containerAccessor.Instance.IocContainer.Resolve<IB>())
    {
      IC c = ContainerAccessor.Instance.IocContainer.Resolve<IC>();
      ...
      b.Commit();

      return result;
    }
} 
```

第**一次**访问它时，抛出异常：“InvalidOperationException：Scope 不可用。您是否忘记调用 container.BeginScope()？”。

我通过将 Resolve 方法的内容用`using (kernel.BeginScope) { ... }`. 我说它部分解决了，因为当我在 resolve 方法中放置断点时，它仍然在我第一次访问它时抛出异常。有人知道这里发生了什么吗？

非常感谢。

# haskell - Haskell thunks - foldl vs foldr

> ID：14726499
> 
> 赞同：6
> 
> 时间：2013-02-06T10:16:44.943
> 
> 标签：haskell

学习 Haskell 时，我遇到了`foldl`创建 thunk 并可能使堆栈崩溃的事实，因此最好使用`foldl'`from `Data.List`. 为什么它只是`foldl`，而不是，例如，`foldr`？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T10:29:51.927

没有必要，`foldr'`因为你可以自己造成效果。

原因如下：考虑`foldl f 0 [1,2,3]`。这将扩展为`f (f (f 0 1) 2) 3`，因此当您恢复使用*任何内容*`(f 0 1)`时，需要创建并`(f (f 0 1) 2)`创建。如果您想避免这种情况（通过在继续之前评估这些子表达式），您必须指示`foldl`为您执行此操作 - 即`foldl'`.

有了`foldr`，事情就不同了。你得到的`foldr f 0 [1, 2, 3]`是`f 1 (foldr f 0 [2, 3])`（括号中的表达式是一个重击）。如果您想评估 的（部分）外部应用程序`f`，您现在可以执行此操作，而无需先创建线性数量的 thunk。

但一般来说，在查看第二个参数之前，您正在使用`foldr`惰性函数，因为它已经可以做一些事情（例如生成列表构造函数）。`f`

`foldr`与 strict 一起使用`f`（例如`(+)`）具有将所有应用程序放入堆栈直到到达列表末尾的不良影响；显然不是您想要的，也不是看起来`foldr'`可以提供帮助的情况。

# objective-c - 使用目标 c 将字符串分成两部分

> ID：14726500
> 
> 赞同：0
> 
> 时间：2013-02-06T10:16:47.743
> 
> 标签：objective-c, cocoa

我以这种格式从数据库中获取日期，'01/02/2013 17:00'。我必须分离日期和时间并将其放在 nstableview 中的单独列中（日期列中的日期和时间列中的时间）。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:20:44.750

你可以：

```
NSArray *dateAndTime = [@"01/02/2013 17:00" componentsSeparatedByString:@" "]; 
```

如果您确定该格式，则可以这样做。否则，您应该小心并依赖类似`NSDateFormatter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:25:25.690

如果您希望能够更改时间格式，或者想要更多地控制时间等。我推荐 NSDateFormatter ..

```
 NSString *dateString = @"'01/02/2013 17:00";
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/YYYY HH:mm"];

    NSDate *date = [formatter dateFromString:dateString];

    [formatter setDateFormat:@"dd/MM/YYYY"];
    NSString *newDateString = [formatter stringFromDate:date];
    [formatter setDateFormat:@"HH:mm"];
    NSString *newTimeString = [formatter stringFromDate:date]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:21:11.573

```
NSString *dateTime = @"01/02/2013 17:00";

NSArray *strings = [dateTime componentsSeparatedByString:@" "]; 
```

数组字符串现在看起来像......

```
[
    @"01/02/2013",
    @"17:00"
] 
```

# xpath - 在 xpath 中选择包含子元素的元素的前兄弟姐妹

> ID：14726503
> 
> 赞同：0
> 
> 时间：2013-02-06T10:16:57.317
> 
> 标签：xpath

我有看起来像这样的代码

```
<div id="content">
 <p>text</p>
 <p>text1</p>
 <p>text3</p>

 <p><iframe></iframe></p>

 <p>text4</p>
 <p>text5</p>
</div> 
```

我需要在包含子“iframe”的“p”之前选择所有“p”元素，我尝试过这样的事情

`//div[@id='content']//p[iframe]/preceding-sibiling::p`

但没有运气。

我被困在这里几天，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:49:33.393

您的 XPath 逻辑实际上很好！你只是出现了一些错别字。

`//div[@id='content']/p[iframe]/preceding-`**兄弟姐妹**`::p`

您也不需要`/`div 块之后的额外内容。这是完整的工作xpath：

```
//div[@id='content']/p[iframe]/preceding-sibling::p 
```

# android - 活动堆栈android - 从URI启动的pdf返回不会返回正确的活动

> ID：14726505
> 
> 赞同：0
> 
> 时间：2013-02-06T10:16:59.647
> 
> 标签：android, android-activity

我想弄清楚为什么我的一项活动无法使用 stack.back 按钮正常工作。

当用户在 Main 活动中按下图像按钮时，Activity Brain 会启动，这可以正常工作，并且后退按钮的行为与 Brain 的预期一样（即，它按预期返回到 main 活动）。

在大脑中，我想根据用户按下的图像按钮启动 PDF，我通过 URI 使用下面的代码执行此操作，PDF 加载正常，但是当在 acrobat 中按下返回时，应用程序返回主活动而不是大脑这不是我想要（或预期）的行为。我已阅读应用程序开发人员指南并尝试了 Intent Flag_activity 的所有选项（我认为），但无法修复后退按钮行为。我已经尝试链接到不同的 PDF（以防它在 acrobat 中是随机的），但应用程序的行为相同，总是返回到我想要的主要而不是大脑。

我正在使用 Imagebuttons 允许用户选择 pdf，下面的代码正在调用 URI/intent 来显示 pdf。我已经尝试过 2 个 Intent.Flags 并且没有运气进行放大，我曾期望 Intent.Flag_Activity_Clear_Top 工作，但我一定错过了一些东西。

使用以下 onClick 代码从 main 调用大脑活动

```
 if (v==bbrain) {
                    Intent startbrain = new Intent(Main.this, Brain.class); //this is the Brain chooser
                    startActivity(startbrain);
                overridePendingTransition(R.anim.pull_from_left_enter, R.anim.pull_out_to_left_exit);
                    } 
```

那么大脑活动java看起来是这样的：

```
public void onClick(View v) {

            if (v==bhome); {
            Intent starthome = new Intent(Brain.this, Main.class); //this is main screen
            startActivity(starthome);
            overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit);
            }

            if (v==babouttest){
                Intent start1gp = new Intent(Brain.this, AboutScreen.class); //this is 1gp lesson
                startActivity(start1gp);
                overridePendingTransition(R.anim.pull_from_left_enter, R.anim.pull_out_to_left_exit);
            }

            if (v==imagepetro) {
                File file = new File("/sdcard/documents/1.pdf");
                  if (file.exists()) {
                        Uri path = Uri.fromFile(file);
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setDataAndType(path, "application/pdf");
                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                        try {
                            startActivity(intent);
                            overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit);
                        } 
                        catch (ActivityNotFoundException e) {

                        }
                  }
            }   //end of load

 if (v==imagesteam) {
                File file = new File("/sdcard/documents/2.pdf");
                  if (file.exists()) {
                        Uri path = Uri.fromFile(file);
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setDataAndType(path, "application/pdf");
                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                        try {
                            startActivity(intent);
                            overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit);
                        } 
                        catch (ActivityNotFoundException e) {

                        }
                  }
            }   //end of load

   }

  //menu inflator bits
          @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                getMenuInflater().inflate(R.menu.activity_brain, menu);
                return true;
            }  

            @Override
            public boolean onOptionsItemSelected(MenuItem item) {
                switch (item.getItemId()) {
                    case android.R.id.home:
                        NavUtils.navigateUpFromSameTask(this);
                        return true;
                }
                return super.onOptionsItemSelected(item);
            }

} 
```

我不确定在编写此应用程序时是否遗漏了其他地方？以下是清单中的大脑和主要活动部分，如果这有什么不同的话

```
 <activity
        android:name=".Main"
        android:label="@string/title_activity_main"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <!-- <category android:name="android.intent.category.LAUNCHER" /> -->
        </intent-filter>
    </activity>
 <activity
        android:name=".Brain"
        android:label="@string/title_activity_brain"
        android:screenOrientation="landscape" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.trainer.Main" />
    </activity> 
```

我完全不知道为什么这段代码不起作用，我在其他活动中从其他地方启动 PDF 并且 URI 方式运行良好，我遗漏了一些东西，但希望一双新的眼睛会发现我不能！

希望我提供了足够的细节，如果没有，请告诉我应该包括什么。感谢您的帮助，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:39:40.187

所以得到这个，将所有代码从 Brain 复制并粘贴到一个名为 Brain 2 的新活动中，该应用程序运行正常。不知道为什么，不是一个整洁的解决方案，但至少它有效！我曾尝试清理项目，但没有什么不同。至少它现在排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:18:01.033

所以按照这篇文章在这里[查看任务的活动堆栈](https://stackoverflow.com/questions/2442713/view-the-tasks-activity-stack)

我的活动堆栈从主要活动到大脑活动打印如下（正确）

```
Running activities (most recent first):
  Run #3: ActivityRecord{41cd3948 u0 com.trainer/.Brain}
  Run #2: ActivityRecord{41ca29a0 u0 com.trainer/.Main}
  Run #1: ActivityRecord{41a2c5d8 u0 com.cyanogenmod.trebuchet/.Launcher} 
```

所以到目前为止我认为一切都很好，但是当我从大脑活动中启动任何 pdf 文件时，这是生成的活动堆栈：

```
 Run #5: ActivityRecord{4154ca00 u0 com.adobe.reader/.ARViewer}
  Run #4: ActivityRecord{41bcbcf8 u0 com.trainer/.Main}
  Run #3: ActivityRecord{41cd3948 u0 com.trainer/.Brain}
  Run #2: ActivityRecord{41ca29a0 u0 com.trainer/.Main}
  Run #1: ActivityRecord{41a2c5d8 u0 com.cyanogenmod.trebuchet/.Launcher} 
```

因此，出于某种原因，打开 PDF 会启动另一个版本的主要活动，btu 我完全不知道为什么会这样？希望这对其他人意味着什么？

感谢您对此提供的任何帮助....

# android - 如何在android中调用java脚本？

> ID：14726509
> 
> 赞同：0
> 
> 时间：2013-02-06T10:17:10.013
> 
> 标签：android

我是在 android 中使用 java 脚本的新手，我在 js 文件中具有转换用户名的功能，如何向此发送 i/p 值以及如何在 android 活动按钮单击中检索此文件的数据。如果有人知道请提前告诉我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:20:47.383

真出这个：

```
 public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

web = (WebView) findViewById(R.id.webview1);

web.setWebChromeClient(new MyWebChromeClient());

web.addJavascriptInterface(new DemoJavaScriptInterface(), "temp_1");

web.loadUrl("file:///android_asset/temp_1.html");

}   
}

final class DemoJavaScriptInterface {

private Handler mHandler = new Handler();
WebView web;
DemoJavaScriptInterface() {
}

public void clickOnAndroid() {
mHandler.post(new Runnable() {
    public void run() {
        web.loadUrl("javascript:init();");
      }
}); 
```

} }

```
final class MyWebChromeClient extends WebChromeClient {

private static final String LOG_TAG = "WebViewDemo";
@Override

public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
    Log.e(LOG_TAG, message);
    result.confirm();
    return true;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:20:58.810

您可以使用继承 View 类的 Webview。制作一个 XML 标记并使用 findViewById() 函数在活动中使用。但是要使用 JavaScript，您可以制作一个包含 JavaScript 代码的 HTML 文件。下面的例子可能会有所帮助。

```
Webview browser=(Webview) findViewById(R.main.browser); //if you gave the id as browser
browser.getSettings().setJavaScriptEnabled(true); //Yes you have to do it
browser.loadUrl("file:///android_asset/JsPage.html"); //If you put the HTML file in asset folder of android 
```

请记住，JS 将在 WebView 上运行，而不是在本机环境中运行，因此您可能会在模拟器中遇到延迟或缓慢的 FPS。但是，在实际手机上使用时，代码可能会运行得很快，具体取决于您手机的速度。

# qt - 从自定义界面派生 UIC 生成的 Qt UI 类

> ID：14726521
> 
> 赞同：5
> 
> 时间：2013-02-06T10:17:42.797
> 
> 标签：qt, user-interface, interface, generator

我有一个简单的 Qt 问题。我希望自动生成的 UIC 文件是从自定义接口类派生的，例如：

**意图**

```
class MyUiInterface {
public:
     virtual void setupUi(QWidget* w) = 0;
     virtual void retranslateUi(QWidget*w) = 0;
}; 
```

生成的 UIC 文件应如下所示：

```
class Ui_MyWidget {
public:
    void setupUi(QWidget* w) {
        ...
    }
    void retranslateUi(QWidget* w) {
        ...
    }
};

namespace Ui {
    class MyWidget : public MyUiInterface , public Ui_MyWidget {};
} 
```

**为什么？**

然后每个 Ui::Class 都会实现 MyUiInterface。在从 Ui::Class 派生的每个类中（请参阅[多重继承方法](http://harmattan-dev.nokia.com/docs/library/html/qt4/designer-using-a-ui-file.html)），如果从 UI::Class 类派生的类也是基类，我将能够调用`setupUi`并且`retranslateUi`这是有道理的。我希望每个小部件都派生自我的 abstrcat 基类`MyWidgetBase`。考虑以下：

```
class MyWidgetBase abstract : public QWidget, protected MyUiInterface {
protected:
    void changeEvent(QEvent *e) {
        QWidget::changeEvent(e);
        if (e->type() == QEvent::LanguageChange) {
            retranslateUi(this); // Still abstract here
        }
    }
};

class MyWidget : public MyWidgetBase : public Ui::MyWidget {
}; 
```

效果是，每次调用 MyWidget::changeEvent() 时，`retranslateUi`都会调用该特定类。否则 changeEvent 必须在每个类中重新实现。这有点违背“代码重用”的概念。

我认为 Qt UIC 无法处理这种情况，不是吗？有没有类似的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:12:37.017

不幸的是，读取[ui 文件](http://doc.qt.digia.com/4.7-snapshot/designer-ui-file-format.html)的 XML Schema 告诉我们使用 uic 编译器无法实现自动化。

但是，我不清楚您为什么要自动实现它 - 即使 Uic 以某种方式设法实现您的界面，您仍然需要手动添加函数体，编辑生成的 .h 文件，我确信没有办法在将转换为 C++ 代码的 xml 文件中包含自定义代码。

为什么你只是不重新实现`setupUi`并`retranslateUi`在你的`MyWidget`课堂上？每个 Ui 类都会有这些类之一，因此您可以在此级别上实现它，而不是基类。我可能遗漏了一些东西，但我认为这是一种合适的方式来做到这一点。

```
class MyWidget : public MyWidgetBase, public Ui::MyWidget {
public:
    void setupUi(QWidget* w) {
        ...
    }
    void retranslateUi(QWidget* w) {
        ...
    }

}; 
```

使用这种方法，您无需`changeEvent()`在任何自定义小部件中重新实现，并且`changeEvent`仍会调用适当的`retranslateUi()`.

# performance - Meteor 用户和骨干网非常慢

> ID：14726527
> 
> 赞同：0
> 
> 时间：2013-02-06T10:18:04.280
> 
> 标签：performance, backbone.js, meteor

我创建了一个项目来轻松共享内容。你可以在这里查看我的项目： [SharingProject](http://pagesharingproject.meteor.com/)

您可以使用 user@example.com 和 123456 作为密码来测试站点作为经过验证的用户。当然，该网站还有一些错误......

我使用了流星用户包和骨干包来浏览页面。在本地主机上，没有问题。为了测试，我将项目上传到流星服务器。现在，当我登录并浏览页面时，每次我导航到新页面时，应用程序都会因为 url 更改而在客户端“检查”用户。这很烦人...

当然，我可以浏览仅调用 Session.set('page_id', ..) 的页面，但我的目标是能够向人们发送一个 url 到服务器上的特定页面。

该代码类似于来自流星页面的 todos 示例中的代码：

```
Meteor.subscribe('pages', function () {
    if (!Session.get('page_id')) {
    var page = Pages.findOne({}, {sort: {owner: -1}});
    if (page)
      Router.setPage(page._id);
  }
});

...

var PagesRouter = Backbone.Router.extend({
  routes: {
    ":page_id": "main"
  },
  main: function (page_id) {
    Session.set("page_id", page_id);
  },
  setPage: function (page_id) {
    this.navigate(page_id, true);
  }
});

Router = new PagesRouter;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

为什么我在这里问：我搜索了网络，找不到任何有同样问题的人。所以要么没有人尝试过这个，要么有一个简单的解决方案？

编辑：我如何调用页面

```
<template name="pages"> 
    {{#each pages}}
        <p><a href="/{{_id}}">{{title}}</a>
        {{#if isauthor}}
            <a class="delPage" href="javascript:delPage('{{_id}}')">delete</a>
        {{/if}}
        </p>
    {{/each}}
</template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:58:38.970

好的，我解决了问题，正在改变（真）

```
Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

到（假）

```
Meteor.startup(function () {
  Backbone.history.start({pushState: false});
}); 
```

当然，像 Mubix 建议的那样添加一个锚。感谢您的提示！它在上述网站上是最新的。

我今天花了一些时间在主干文档上，但我无法想象为什么这是有效的？特别是我想知道为什么

```
{hashChange: false} 
```

在这里不工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:30:05.163

我不知道你是如何呈现页面链接的，但是这样的链接：

[http://pagesharingproject.meteor.com/a1fbacba-0ddf-4077-a653-294b428bbfb8](http://pagesharingproject.meteor.com/a1fbacba-0ddf-4077-a653-294b428bbfb8)

应如下所示：

[http://pagesharingproject.meteor.com/#a1fbacba-0ddf-4077-a653-294b428bbfb8](http://pagesharingproject.meteor.com/#a1fbacba-0ddf-4077-a653-294b428bbfb8)

# dynamics-crm-2011 - UAT和Live不同步时导入解决方案crm2011

> ID：14726528
> 
> 赞同：0
> 
> 时间：2013-02-06T10:18:05.603
> 
> 标签：dynamics-crm-2011

我使用客户 UAT 环境的副本作为我的开发人员。我在所有其他解决方案（添加现有）之上的解决方案中工作，但是，我来导入 Live（暂存），我的解决方案导入错误。在 UAT 中，有一个 3rd 方管理的解决方案没有进入客户的现场，我只是发现了。因此，在导入 Live 时，首先会出现关于缺少 3rd 方托管解决方案的错误，然后当我尝试导入该 3rd 方托管解决方案时，一些缺少的组件会出现导入错误；一些报告的缺失组件甚至不存在于 UAT 中，该解决方案本来应该已经安装，并且一些报告的缺失组件存在于两个环境中，但我在我的解决方案中定制了它们。

我有哪些解决方案？

假设性地，导入该第 3 方解决方案而不是托管解决方案会解开它吗？

为什么它首先在 UAT 中进行管理？首先创建第 3 方托管解决方案的环境是否重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:42:57.037

我不确定您的解决方案结构。CMIIW，这是我对您问题的理解。你会有：

**在 UAT** 您的自定义解决方案 - 非托管，第 3 方解决方案 - 托管

**在 Live** 中根本没有解决方案。

我有一个问题，您是否修改了第三方解决方案中的任何内容（表单/字段/视图）？您的客户是否使用该第 3 方解决方案？

这是我回答你的问题的意见：

*我有哪些解决方案？*

如果未使用该第 3 方解决方案：在新的 CRM 部署上重新创建您的解决方案，因此它不会影响/受任何第 3 方解决方案的影响

如果使用了第 3 方解决方案：首先安装第 3 方的托管解决方案，然后导入您的自定义解决方案（最好导出为“托管”

*假设性地，导入该第 3 方解决方案而不是托管解决方案会解开它吗？* AFAIK，除非他们为您提供非托管解决方案，否则您不能将该第 3 方解决方案导入为非托管解决方案。恕我直言，根据我对 CRM 2011 的经验，我总是尽量在 1 个部署中不要有超过 1 个非托管解决方案。使用托管解决方案的意义就像解决方案的“已发布”版本。除非您需要系统超时更改解决方案，否则我认为最好将其保留在托管解决方案中。

*为什么它首先在 UAT 中进行管理？首先创建第 3 方托管解决方案的环境是否重要？*

它首先在 UAT 中的原因，也许您可​​以与客户澄清一下，他们使用该解决方案的目的是什么。也许他们的 CRM 需要该解决方案。AFAIK，首先从哪个环境创建第 3 方托管解决方案并不重要。那是他们“发布”的产品。

干杯。

# javascript - 使用 JavaScript 一次在 HTML 中放置多个图像

> ID：14726529
> 
> 赞同：4
> 
> 时间：2013-02-06T10:18:06.140
> 
> 标签：javascript, html, image

**编辑：**这是另一个问题：我不能`Z-index`用 for 循环定义每张图片。

```
function placeImage(x) {
    var div = document.getElementById("div_picture_right");

    div.innerHTML = ""; // clear images

    for (counter = 1; counter <= x; counter++ ) {
        var image = document.createElement("img");
        image.src = "borboleta/Borboleta" + counter + ".png";
        image.width = "195";
        image.height = "390";
        image.alt = "borboleta" + counter;
        image.id = "imagem" + counter;
        image.position = "relative";
        image.style.zIndex = counter;
        div.appendChild(image);
    }
};

window.onload = function () {
    placeImage(20);
}; 
```

* * *

```
<body>
    <div id="div_wrapper">
        <div id="div_header">
            <h1>First Project</h1>
        </div>
        <div id="div_picture">
            <div id="div_picture_left"></div>
            <div id="div_picture_right"></div>
        </div>
    </div>
</body> 
```

**检查 FireBug 时，我得到这个：**

> 错误：图像损坏或被截断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:33:43.127

看起来您的代码`div`在页面上存在之前正在执行。在完全加载之前，您不应该尝试获取 DOM 中的元素的句柄。您可以在 之外定义您的函数`window.onload`，但将您的调用保留在 之内`window.onload`，例如：

```
function placeImage(x)
{
    var div = document.getElementById("div_picture_right");

    div.innerHTML = ""; // clear images

    for (counter=1;counter<=x;counter++) {
        var imagem=document.createElement("img");
        imagem.src="borboleta/Borboleta"+counter+".png";
        div.appendChild(imagem);
    }
}

window.onload = function() {
    placeImage(48);
}; 
```

我还添加了一个小改进，即获得`div`一次句柄并将其存储在一个变量中，而不是在每次迭代时获得一个新句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:21:43.763

试试这个：

```
var placeImage = function(x) {
var img="";
for (var counter = 1; counter <= x; counter++ ) {
     img += '<img src="borboleta\Borboleta'+counter+'.png" alt="" />';
}
    document.getElementById("div_picture_right").innerHTML = img;
};

placeImage(48); 
```

使用此代码，只有 1 个 DOM 操作而不是 48 个。还要确保您有一个具有上述 ID (div_picture_right) 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:35:40.913

如果要动态更改 div 的 z-index，请将它们的位置属性设置为“绝对”而不是“相对”。这样更有意义。

# jquery - jQuery colorbox - 使用 onclick 关闭 iframe，我可以为这个事件计时

> ID：14726532
> 
> 赞同：0
> 
> 时间：2013-02-06T10:18:23.703
> 
> 标签：jquery, colorbox

我的 iframe 被一个按钮关闭，这段代码：

```
parent.jQuery.colorbox.close() 
```

喜欢

```
<button type="submit" onclick="parent.jQuery.colorbox.close()" .... 
```

我能以某种方式计时这个活动吗？所以它会在 2 秒后关闭。前任？

我正在使用 ColorBox 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:27:31.900

```
<button type="submit" onclick="setTimeout(parent.jQuery.colorbox.close,2000)" ... 
```

setTimeout 将延迟执行指定的毫秒数，在本例中为 2000。

# three.js - 轨迹球控件在 three.js 的新版本中不起作用

> ID：14726534
> 
> 赞同：0
> 
> 时间：2013-02-06T10:18:26.270
> 
> 标签：three.js, trackball

我正在尝试进行由多行组成的模拟。到目前为止，我拥有 Three.js v45 和 Trackball Controls，它运行良好。

然后我尝试在缓冲区几何中实现我的线条（如本例所示：http: [//fzwoch.project-sheol.org/three.js/examples/webgl_buffergeometry_lines.html](http://fzwoch.project-sheol.org/three.js/examples/webgl_buffergeometry_lines.html)）

但为此我需要更新到较新的 Three.js 版本。轨迹球控制不再起作用了！我错过了什么吗？我怎样才能让两者都工作？

谢谢你，卡西亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:09:27.140

首先，您是否注意到控件更改了位置？现在你必须在你的 html 文件中添加：

```
<script src="three.js/examples/js/controls/TrackballControls.js"></script> 
```

您还应该检查迁移说明[https://github.com/mrdoob/three.js/wiki/Migration](https://github.com/mrdoob/three.js/wiki/Migration)以查看您的代码是否从 r45 版本更改为 r55（当前）。

# documentation - Doxygen：分组模块和页面？

> ID：14726535
> 
> 赞同：14
> 
> 时间：2013-02-06T10:18:29.370
> 
> 标签：documentation, markdown, doxygen

我对 doxygen 中的页面和组有疑问。我有一个项目，我用*@defgroup*和*@ingroup* cmds 对类等进行了分组。到目前为止，这工作正常。

现在，我想通过降价页面向项目中添加特殊文档。这些页面应该出现在专用模块（组）中。我尝试使用*@page*和*@subpage* cmds 创建页面。这很好用，但页面在菜单中显得很简单。

因此，我尝试使用*@ingroup*将它们添加到组中。但这并不像我猜的那样工作。是否可以将页面添加到模块（组）？

结果应如下所示：

项目
|-- 模块
| |-- "模块1"
| | |-- 文档第 1 页（来自 *.md 文件）
| | |-- 类文档
| |-- "模块2"
| | |-- 资料页2
| | |-- 类文档

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-07T20:10:28.890

要对页面进行分组，您需要使用子页面功能，而不是组。

因此，为引用子页面和模块组的每个组创建一个页面。

```
/*! \page group1page A documentation page for my group
This page contains the info about group 1 \ref group1_label
\subpage group1page2
\subpage group1page3
*/ 
```

[http://www.doxygen.nl/manual/grouping.html#subpaging](http://www.doxygen.nl/manual/grouping.html#subpaging)

[http://www.doxygen.nl/manual/commands.html#cmdsubpage](http://www.doxygen.nl/manual/commands.html#cmdsubpage)

# jquery - 通过单击其父元素来切换复选框的状态

> ID：14726538
> 
> 赞同：2
> 
> 时间：2013-02-06T10:18:36.267
> 
> 标签：jquery, html

我在表格单元格中有一个复选框，当我点击我的单元格时我想检查它（不仅仅是当我点击复选框时）。

我正在使用这段代码：

```
$('.check_it').click( function () {
    if ($(this).find('.my_checkbox_class').is(':checked')) {
        $(this).find('.my_checkbox_class').removeAttr('checked');
        checked_counter--;
    }
    else {
        $(this).find('.my_checkbox_class').attr('checked', 'checked');
        checked_counter++;
    }
}); 
```

它工作得很好，但是当我点击我的复选框时，这个事件也会被触发并且我的`checked_counter`变量得到错误的值 - 有人可以告诉我如何修复它吗？我想通过单击它并单击它的表格单元格来选中复选框。

编辑，这是我的html：

```
<td class="check_it"><input type="checkbox" class="my_checkbox_class" /></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:22:36.797

```
$('.my_checkbox_class').click(function(ev){
    ev.stopPropagation();
}); 
```

应该做的伎俩。这会阻止事件冒泡，因此它不会到达 td，并且只会执行复选框默认行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:24:07.183

点击事件沿 DOM 树向上传播到父元素。因此，当您单击复选框时，它也会触发`<td>`. 您可以通过在复选框中捕获事件并在那里停止传播来解决此问题（这会添加第二个事件处理程序，并且还可能会破坏依赖于事件冒泡的其他功能）。

我推荐的另一种方法是在同一个处理程序中进行切换之前检查事件的来源。这利用了[jQuery 事件对象](http://api.jquery.com/event.Target/)的`target`属性。

```
$('td').click(function(e)
{
    if ( $(e.target).is('[type="checkbox"]') ) return;

    var $chkBox = $(this).find('.my_checkbox_class');
    var state = $chkBox.is(':checked');
    checked_counter += (state ? -1 : 1);
    $chkBox.prop('checked', !state);
}); 
```

请注意，我还重构了您原来的点击处理程序，因为您所做的只是切换复选框的状态（您应该使用[`prop`](http://api.jquery.com/prop)）。这*将替换*您当前的处理程序，它不是除了 is。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:21:46.577

采用`$(".my_checkbox_class").click(function() {}`

根据您的代码，`$('check_it').click(function() {}`这可能具有 chechbox 以及行详细信息，因此此函数在两种情况下都调用，这会导致扭曲行为。

# tfs - Visual Studio 2012 Post Build EXE 返回错误但没有失败构建

> ID：14726540
> 
> 赞同：1
> 
> 时间：2013-02-06T10:18:49.277
> 
> 标签：tfs, visual-studio-2012, build-process, checkin

在我的构建完成后，我试图运行一些 exe 文件来验证一些东西。为此，我使用构建定义中的 Post Build Hook 并将“将 Exe 失败视为构建错误”设置为 true。问题是，在运行构建之后，虽然我可以看到构建中有错误，但构建状态是“部分成功”而不是失败，这不太好，因为我正在尝试创建门控检查-在构建中。谁能知道我是如何导致构建失败的？

# c# - 持续监控流程

> ID：14726543
> 
> 赞同：-1
> 
> 时间：2013-02-06T10:19:05.623
> 
> 标签：c#, asynchronous, process, client-server, backgroundworker

我编写了一些代码来监视正在运行的 Windows 进程。我想知道某个过程何时开始以及何时结束。代码就像我想要的那样工作。

现在，我希望在 Windows 表单服务器应用程序中实现它——所以只要表单还活着，它就会循环运行。我想我应该让它异步运行，也许使用`BackgroundWorker`. 我只是不确定什么是最好的方法以及如何做到这一点。

这是我的监控代码：

```
using System;
using System.Management;
using System.Diagnostics;
using System.Collections.Generic;
using System.ComponentModel;

class ProcessMonitor
{
    public static void Main()
    {
        Dictionary<string, Process> newProcs= new Dictionary<string, Process> ();
        while (true) 
        {
            foreach (Process process in Process.GetProcesses())
            {
                if (process.ProcessName.CompareTo("Someprocess") == 0)
                {
                    if (!searchForProcess(newProcs, process.Id))
                    {
                        ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT CommandLine FROM Win32_Process WHERE ProcessId = " + process.Id);
                        foreach (ManagementObject @object in searcher.Get())
                        {
                            Console.Write("Adding new Process: ");
                            Console.WriteLine(@object["CommandLine"] + " ");
                            newProcs.Add(@object["CommandLine"] + " ", process);
                        }   
                    }
                }
            }
            checkProcesses(newProcs);
        } 
        Console.WriteLine("Done");
    }

    private static bool searchForProcess(Dictionary<string, Process> newProcs, int newKey)
    {
        foreach (Process process in newProcs.Values)
        {
            if (process.Id == newKey)
                return true;
        }

        return false;
    }
    private static void checkProcesses(Dictionary<string, Process> newProcs)
    {
        foreach (string currProc in newProcs.Keys)
        {
            bool processExists = false;
            foreach (Process process in Process.GetProcesses())
            {
                if (process.Id == newProcs[currProc].Id)
                {
                    processExists = true;
                    break;
                }

            }
            if (!processExists)
            {
                Console.Write("Process Finished: ");
                Console.WriteLine(currProc);
                newProcs.Remove(currProc);
                if (newProcs.Count == 0)
                    break;
            }
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:52:48.803

这可以使用 Subscription 或 Polling 来实现。

**轮询**（用于进程循环）

*   **后台工作者**

    如果您有一个在后台运行的任务并且需要与 UI 交互。

*   **线程池线程**

    当需要效率时。它避免了与创建、启动和停止线程相关的开销。不适用于长时间运行的任务。

*   **线程类**

    对于长时间运行的任务以及当您需要对线程执行进行细粒度控制时等。

**订阅**

*   `ManagementEventWatcher`（斯图尔特提到的）

在这种情况下，订阅可能比轮询更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:22:12.837

由于您已经在使用 WMI，我建议您使用[临时事件订阅](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393015%28v=vs.85%29.aspx)来监视流程的更改。该过程可以是同步的、异步的或半同步的（[通常是推荐的选择），您可以使用](http://www.huntland.co.uk/Downloads/WMI/AsyncOperations.html)[WITHIN 子句](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394527%28v=vs.85%29.aspx)指定轮询间隔。

此查询监视进程创建事件：

```
SELECT TargetInstance FROM __InstanceCreationEvent 
  WHERE TargetInstance ISA "Win32_Process" -- or Win32_ProcessStartTrace 
```

这个监视进程结束事件：

```
SELECT TargetInstance FROM __InstanceDeletionEvent 
  WHERE TargetInstance ISA "Win32_Process" -- or Win32_ProcessStopTrace 
```

[这个问题](https://stackoverflow.com/questions/2782317/exception-while-managementeventwatcherwmi-to-notify-events-from-remote-machine)有一个如何在 C#中使用[ManagementEventWatcher类的示例。](http://msdn.microsoft.com/en-us/library/system.management.managementeventwatcher.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T11:47:03.317

你可以创建这样的方法

```
 public static void Thread1() {
           //paste your main code hear
            } 
```

复制并粘贴你所有的代码，主要写在这个新方法中。

把主要改成这样

```
 public static void Main() {
            Console.WriteLine("Before start thread");
            Thread tid1 = new Thread(new ThreadStart(Thread1 ) );
            tid1.Start();                
    } 
```

# c++ - 捕获 QVector 对象的“索引超出范围”异常

> ID：14726544
> 
> 赞同：3
> 
> 时间：2013-02-06T10:19:06.310
> 
> 标签：c++, qt, exception, exception-handling

我正在使用 QVector 来保存文件文本的值。我想控制何时选择不正确的文件并且发生“索引超出范围”。我正在尝试使用 catch(...) 但我没有附加异常。是否可以使用 try-ctach 块附加这种类型的 QObjects 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:26:21.303

Qt 不使用异常，它只是对超出范围的访问进行断言。您将需要切换到 std::vector 或在抛出的 QVector 周围实现自己的包装器。

# list - 如何使用 List.filter？

> ID：14726550
> 
> 赞同：7
> 
> 时间：2013-02-06T10:19:29.210
> 
> 标签：list, filter, sml

我有这个代码来过滤第一个字母是大写的字符串列表：

```
fun f s = Char.isUpper(String.sub(s,0));
fun only_capitals (xs : string list) =  List.filter(f , xs); 
```

但是在编译时，我总是收到错误：

```
operator domain: 'Z -> bool
operand:         (string -> bool) * string list
  in expression:
    List.filter (f,xs) 
```

这个错误是什么意思？如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T10:23:01.593

[`List.filter`](http://www.standardml.org/Basis/list.html)is的类型签名

```
val filter : ('a -> bool) -> 'a list -> 'a list 
```

所以你需要给出`List.filter`两个不同的参数，*而不是一个恰好是 tuple 的参数*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T10:23:09.360

您需要将其更改为：

```
fun only_capitals (xs : string list) =  List.filter f xs 
```

`filter`接受 2 个参数，一个函数`f`( `'a -> bool`) 和一个列表。

很容易将 ML 中传递元组的语法与其他语言中函数式应用程序的语法混淆。

您也可以将其定义为：

```
val only_capitals = List.filter f 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-30T11:49:15.937

ML 中的函数只能接受**一个**参数。[此处](http://courses.cs.washington.edu/courses/cse341/13wi/lec9slides.pdf)的描述（另请参阅此处的注释和视频）。

`List.filter`就是所谓的柯里化函数，`List.filter f xs`其实`(List.filter f) xs`where`List.filter f`是函数。我们必须提供`f (fn: a -> bool)`作为参数`List.filter`，而不是 tuple `(f, xs)`。

这是一个简单的例子。当我们调用时，我们会在其环境中`is_sorted 1`得到一个闭包。`x`当我们用 2 调用这个闭包时，我们得到了`true`因为`1 <= 2`.

```
val is_sorted = fn x => (fn y => x <= y)
val test0 = (is_sorted 1) 2

val is_sorted = fn : int -> int -> bool
val test0 = true : bool 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T19:30:02.997

在 SML 文档中，它指出：

filter fl 从左到右将 f 应用于 l 的每个元素 x，并返回 fx 评估为 true 的那些 x 的列表，其顺序与它们在参数列表中出现的顺序相同。

所以它是一个柯里化函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-20T15:16:15.750

在 SML 文档中，`List`结构中的过滤器函数列为

```
filter f l 
```

它需要咖喱论点`f`和`l`

您必须提供一个函数和由空格分隔的列表，而不是在元组中传递参数。答案会是这样

```
fun only_capitals (xs: string list) = 
    List.filter (fn s => Char.isUpper(String.sub(s,0))) xs 
```

# .net - 关闭服务器上打开的文件

> ID：14726553
> 
> 赞同：1
> 
> 时间：2013-02-06T10:19:39.257
> 
> 标签：.net, windows-server-2008-r2

如何（例如通过 WMI）关闭服务器共享上的所有打开文件？

# php - 在html中显示拉丁字符

> ID：14726555
> 
> 赞同：0
> 
> 时间：2013-02-06T10:19:43.520
> 
> 标签：php, latin1

当我使用**var_dump($obj)**时，我有一个 PHP 对象显示如下值：

*object() (1) { ["name"]=> string(3) " **Lê** " ... }*

但是当我**打印 $obj->name**时，浏览器会显示“ **LÃª** ”。

我的浏览器显示 UTF-8。HTML 字符集也设置为 utf-8。

我尝试了一些功能，但我没有解决这个问题。

你能帮我解决这个问题吗？谢谢。

**编辑：**

我已经检查了以下所有项目：

1.  `header('Content-Type: text/html; charset=utf-8');`
2.  `<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`
3.  我的浏览器显示 UTF-8
4.  $obj 是从 db 表中获取的，该表将“字符集”设置为 utf-8，将“排序规则”设置为 utf8_general_ci
5.  PHP 文件被编码为 UTF-8

![在此处输入图像描述](../Images/af1c550ca48556a50ae975248fd9f620.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:22:37.367

设置一个 UTF-8 `header('Content-Type: text/html; charset=utf-8');`。

我刚刚在 PHP5.4.8、nginx、Ubuntu 12.04 和 Firefox 上对此进行了测试。AFAIK，至少在过去 5 年中，您几乎可以在任何 PHP 堆栈中获得相同的结果。

```
<?php

$mystring = 'Lê';

print $mystring; 
```

输出：LÃª

```
<?php

header('Content-Type: text/html; charset=utf-8');

$mystring = 'Lê';

print $mystring; 
```

输出：Lê

# c# - 从 Composite 获取所有文件夹

> ID：14726557
> 
> 赞同：1
> 
> 时间：2013-02-06T10:19:46.543
> 
> 标签：c#

我正在创建给定文件夹的树结构（只有文件夹没有文件），我还返回每个文件夹的安全权限并将其添加到列表中

现在我如何循环这个组合并获取所有项目和子项目

```
 public abstract class FolderComponent:IEnumerable
{
    public string FullName { get; set; }
    public string Name { get; set; }
    public List<string[]> Rules { get; set; }
    public abstract void AddFolder(FolderComponent folderComponent);
    public abstract IEnumerator GetEnumerator();
    public abstract void AssignRules();
}

public class Folder : FolderComponent
{
    public IList<FolderComponent> FolderComponents { get; set; }

    public Folder(string path)
    {
        FullName = path;
        FolderComponents = new List<FolderComponent>();
        Rules = new List<string[]>();
    }

    public override void AddFolder(FolderComponent folderComponent)
    {
        FolderComponents.Add(folderComponent);
    }

    public override IEnumerator GetEnumerator()
    {
        return FolderComponents.GetEnumerator();
    }

    public override void AssignRules()
    {
        // some code
        string[] rules = new string[]{"Read","Write","Execute"};
        Rules.Add(rules);
    }

}

public class Program
{
    private static FolderComponent GetFolders(string path)
    {
        FolderComponent folder = new Folder(path);
        folder.AssignRules();
        foreach (var directory in Directory.GetDirectories(path))
        {
            folder.AddFolder(GetFolders(directory));
        }
        return folder;
    }

    public static void Main()
    {

        FolderComponent folder = GetFolders(@"C\:Test");
        // How can i loop though all folder structure inside folder?

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:10:29.843

如果你想对你的`Folder`班级做这样的事情：

```
FolderComponent folders = GetFolders(@"C\:Test");
foreach (var folder in folders) { Console.WriteLine(folder.FullName); } 
```

并打印完整的目录树，然后该`GetEnumerator`方法需要具有遍历树的逻辑。例如

```
 public override IEnumerator<FolderComponent> GetEnumerator()
    {
        // Return the current element
        yield return this;

        // Work through the collection of components in this folder ...
        foreach (var component in FolderComponents)
        {
            // ... and traverse all the subfolders in each component.  
            // Note that this recursively calls this GetEnumerator
            // method on the subfolders to work down the tree.
            foreach (var subfolder in component)
            {
                yield return subfolder;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:15:52.980

我向您的 FolderComponent 类添加了一个方法并实现了该方法，看看是否可以做到这一点：

```
 public abstract class FolderComponent : IEnumerable
{
    public string FullName { get; set; }
    public string Name { get; set; }
    public List<string[]> Rules { get; set; }
    public abstract void AddFolder(FolderComponent folderComponent);
    public abstract IEnumerator GetEnumerator();
    public abstract void AssignRules();
    public abstract List<FolderComponent> GetAllItems();
}

public class Folder : FolderComponent
{
    public IList<FolderComponent> FolderComponents { get; set; }

    public Folder(string path)
    {
        FullName = path;
        FolderComponents = new List<FolderComponent>();
        Rules = new List<string[]>();
    }

    public override void AddFolder(FolderComponent folderComponent)
    {
        FolderComponents.Add(folderComponent);
    }

    public override IEnumerator GetEnumerator()
    {
        return FolderComponents.GetEnumerator();
    }

    public override void AssignRules()
    {
        // some code
        string[] rules = new string[] { "Read", "Write", "Execute" };
        Rules.Add(rules);
    }

    public override List<FolderComponent> GetAllItems()
    {
        var resultItems = new List<FolderComponent> {this};
        foreach (var folderComponent in FolderComponents)
        {
            resultItems.AddRange(folderComponent.GetAllItems());
        }                        
        return resultItems;
    }
}

public class Program
{
    private static FolderComponent GetFolders(string path)
    {
        FolderComponent folder = new Folder(path);
        folder.AssignRules();
        foreach (var directory in Directory.GetDirectories(path))
        {
            folder.AddFolder(GetFolders(directory));
        }
        return folder;
    }

    public static void Main()
    {

        FolderComponent rootfolder = GetFolders(@"D:\4Share");
        var allItems = rootfolder.GetAllItems();
        foreach (var folderComponent in allItems)
        {
            Console.WriteLine(folderComponent.FullName);                
        }
        Console.ReadLine();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:36:20.240

您应该添加文件夹类型（子）列表。

```
FolderComponent Parent;
List<FolderComponent> children; 
```

当你在特定文件夹中找到一个文件夹时添加一个孩子。您也可以添加父级以进行反向处理。

```
var directoryInfo = new DirectoryInfo(folderPath);
foreach (var directory in directoryInfo)
{
    FolderComponent newSubFolder = new FolderComponent();
    newSubFolder.Parent = this;
    // get whatever you want like name, permissions etc.
    children.Add(newSubFolder);
} 
```

你的代码中需要这样的东西（取决于实现）

```
PrintFolders()
{
    foreach(var child in children)
         child.PrintFolders();

    Console.WriteLine(FolderName);
} 
```

# php - 将一个非常大的文件解析成mysql

> ID：14726558
> 
> 赞同：3
> 
> 时间：2013-02-06T10:19:59.337
> 
> 标签：php, mysql, parsing, unix

我有一个任务，我需要解析一个非常大的文件并将结果写入 mysql 数据库。“非常大”意味着我们正在谈论 1.4GB 的 CSV 数据，总计约 1000 万行文本。

事情不是“如何”做，而是如何快速做。我的第一种方法是在没有任何速度优化的情况下在 php 中完成，然后让它运行几天直到完成。不幸的是，它现在已经连续运行了 48 小时，只处理了整个文件的 2%。因此，这不是一个选择。

文件格式如下：

```
A:1,2 
```

其中“：”后面的逗号分隔数字的数量可以是 0-1000。示例数据集必须按如下方式放入表中：

```
| A | 1 |
| A | 2 | 
```

所以现在，我这样做了：

```
$fh = fopen("file.txt", "r");

$line = ""; // buffer for the data
$i = 0; // line counter
$start = time(); // benchmark

while($line = fgets($fh))
{
    $i++;       
    echo "line " . $i . ": ";

    //echo $i . ": " . $line . "<br>\n";

    $line = explode(":", $line);

    if(count($line) != 2 || !is_numeric(trim($line[0])))
    {
        echo "error: source id [" .  trim($line[0]) . "]<br>\n";
        continue;
    }

    $targets = explode(",", $line[1]);

    echo "node " .  $line[0] . " has " . count($targets) . " links<br>\n";

    // insert links in link table
    foreach($targets as $target)
    {
            if(!is_numeric(trim($target)))
            {
                echo "line " . $i . " has malformed target [" . trim($target) . "]<br>\n";
                continue;
            }

            $sql = "INSERT INTO link (source_id, target_id) VALUES ('" .  trim($line[0]) . "', '" .  trim($target) . "')";
            mysql_query($sql) or die("insert failed for SQL: ". mysql_error());
        }
}

echo "<br>\n--<br>\n<br>\nseconds wasted: " . (time() - $start); 
```

这显然没有以任何方式优化速度。有什么新开始的提示吗？我应该切换到另一种语言吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:35:40.927

第一个优化是插入一个事务 - 每 100 或 1000 行提交并开始一个新事务。显然，您必须使用支持事务的存储引擎。

然后用命令观察CPU使用率`top`——如果你有多个核，mysql进程做的不多，PHP进程做的工作很多，重写脚本接受一个参数，从头开始跳过n行，只导入10000线左右。然后启动脚本的多个实例，每个实例都有不同的起点。

第三种解决方案是使用 PHP 将文件转换为 CSV（根本没有 INSERT，只是写入文件）并`LOAD DATA INFILE`按照 m4t1t0 的建议使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:29:32.833

正如所承诺的，附上你会找到我在这篇文章中寻求的解决方案。我对其进行了基准测试，结果证明它比旧版本快 40 倍（！）

```
$db = mysqli_connect(/*...*/) or die("could not connect to database");

$fh = fopen("data", "r");

$line = "";             // buffer for the data
$i = 0;                 // line counter
$start = time();        // benchmark timer
$node_ids = array();    // all (source) node ids

mysqli_autocommit($db, false);

while($line = fgets($fh))
{
$i++;

echo "line " . $i . ": ";

$line = explode(":", $line);
$line[0] = trim($line[0]);

if(count($line) != 2 || !is_numeric($line[0]))
{
    echo "error: source node id [" .  $line[0] . "] - skipping...\n";
    continue;
}
else
{
    $node_ids[] = $line[0];
}

$targets = explode(",", $line[1]);

echo "node " .  $line[0] . " has " . count($targets) . " links\n";

// insert links in link table
foreach($targets as $target)
{
    if(!is_numeric($target))
    {
        echo "line " . $i . " has malformed target [" . trim($target) . "]\n";
        continue;
    }

    $sql = "INSERT INTO link (source_id, target_id) VALUES ('" .  $line[0] . "', '" .  trim($target) . "')";
    mysqli_query($db, $sql) or die("insert failed for SQL: ". $db::error);
}

if($i%1000 == 0)
{
    $node_ids = array_unique($node_ids);
    foreach($node_ids as $node)
    {
        $sql = "INSERT INTO node (node_id) VALUES ('" . $node . "')";
        mysqli_query($db, $sql);
    }
    $node_ids = array();

    mysqli_commit($db);
    mysqli_autocommit($db, false);
    echo "committed to database\n\n";
}
}

echo "<br>\n--<br>\n<br>\nseconds wasted: " . (time() - $start); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:52:03.597

我会首先使用脚本创建一个 SQL 文件。[然后使用此http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)通过在 SQL 文件的开头/结尾放置适当的命令来锁定表（可以让您执行脚本这个）。

然后只需使用[命令](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)工具将 SQL 注入数据库（最好在数据库所在的机器上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:40:15.497

我发现您的描述相当混乱 - 它与您提供的代码不匹配。

> if(count($line) != 2 || !is_numeric(trim($line[0])))

这里的修剪是多余的——空格不会改变 is_numberic 的行为。但是你已经说过，行的开头是一个字母——因此这总是会失败的。

如果您想加快速度，请切换到使用输入的流处理而不是消息处理（PHP 数组可能非常慢）或使用不同的语言并将插入语句聚合到多行插入中。

# java - 从列表中获取最小和最大数字

> ID：14726565
> 
> 赞同：1
> 
> 时间：2013-02-06T10:20:26.397
> 
> 标签：java, algorithm, sorting, data-structures

假设我们有一个包含整数的列表，我们需要找到最小值和最大值。最好的方法是什么？我可以想到以下内容：

> 1.  如果读取次数远高于写入次数；保持列表排序。每当添加一个数字时；以排序方式添加它。现在要获取最小值和最大值，我们可以获取此列表的第一个和最后一个元素。
>     
>     
> 2.  如果写入次数高于读取次数；迭代列表并返回结果。但这是 O(n)，看起来很昂贵。

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:23:40.953

假设您可以观察到列表的任何突变，您可以存储（缓存）最小值和最大值，并可能在添加/删除数字时更新缓存的值。此时，列表的顺序无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:23:35.843

您可以为此使用 Collection.max() 和 Collection.min() 静态方法...

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html)

使用 SortedSet 使集合自动排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T10:35:52.767

我会提出一个有趣的想法：

假设您确实经常删除，尽管读取次数多于写入次数，您可能会保存一个项目数组（表示整数的对象，其中有两个对已添加项目的最小值和最大值的引用）并缓存了对**先前**最小值和最大值的引用（与@akaIDIOT 解决方案的区别在于这只是参考）。

堆栈中的每个值都指向前一个最大值和前一个最小值。

添加项目也需要 O(1)，找出最小值和最大值也需要 O(1)。

更新中描述了删除项目：

缺点是更多的内存消耗。

如果此解决方案有误，我将删除它，如果您发现任何问题，请发表评论，无需投反对票！

**更新**

@akaIDIOT 在他的评论中提到了一个我错过的案例。如果您有多个最大值或最小值怎么办。

在这种情况下和其他情况下，删除最大值将需要更新指向它的所有对象，这将是最大 O(n)，但我认为平均而言它仍将保持 O(1)。如果所有值都是**不同的**，这将始终是 O(1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T10:26:54.220

您还可以使用`min/max heap`类似的数据结构（红黑树）来保留整数。获取最小值/最大值需要`O(1)`时间，插入新元素需要`O(log n)`时间。

[http://en.wikipedia.org/wiki/Min-max_heap](http://en.wikipedia.org/wiki/Min-max_heap)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:25:09.140

假设您支持从列表中删除整数，无论​​哪个更高（读取或写入），拥有排序列表会使事情变得更容易并提供更好的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T10:27:16.577

您可以拥有一个维护 Min 和 Max 值的自定义列表。这将为您提供 O(1) 插入，O(1) 读取 Min 和 Max，以及 O(N) 删除，但仅在您删除 min 或 max 的情况下。

伪代码：

```
public MinMaxList
{
    property Min; 
    property Max;

    method Add (int newValue)
    {
        if (Min is null OR newValue < Min)
            Min = newValue;

        if (Max is null OR newValue > Max)
            Max = newValue;
    }

    method Delete (int value)
    {
        if (value = Min or value = Max)
            //Rescan list to determine new Min and Max values. This is O(N).
    }

} 
```

# android - NullPointerException 而首选项删除是动态添加的

> ID：14726566
> 
> 赞同：0
> 
> 时间：2013-02-06T10:20:28.067
> 
> 标签：android, dynamic-data, android-preferences, preferenceactivity, preference

我需要将 Preferences 动态添加到我的 PreferenceActivity 中，我这样做：

```
mFilterShow = (PreferenceScreen)getPreferenceScreen().findPreference("orderScreen");

public void assignmentFieldsAdd()
{
    CheckBoxPreference cb1 = new CheckBoxPreference(this);
    cb1.setTitle("Detailed explanation " + "\r\n" +"required");
    cb1.setKey("assign1");
    CheckBoxPreference cb2 = new CheckBoxPreference(this);
    cb2.setTitle("Shoot exclusive video");
    cb1.setKey("assign2");
    CheckBoxPreference cb3 = new CheckBoxPreference(this);
    cb1.setKey("assign3");
    cb3.setTitle("Shoot common video");
     mFilterShow.addPreference(cb1);
     mFilterShow.addPreference(cb2);
     mFilterShow.addPreference(cb3); 
} 
```

然后，我需要在某些事件中删除它。当我打电话

```
 public void assignmentFieldsDelete()
    {

        mFilterShow.removePreference(mFilterShow.findPreference("assign1"));
        mFilterShow.removePreference(mFilterShow.findPreference("assign2"));
        mFilterShow.removePreference(mFilterShow.findPreference("assign3"));

    } 
```

我得到一个

```
 02-05 18:14:50.159: E/AndroidRuntime(15259): FATAL EXCEPTION: main
 java.lang.NullPointerException
    at com.assignmentexpert.AssignmentPref.assignmentFieldsDelete(AssignmentPref.java:175)
    at com.assignmentexpert.AssignmentPref$2.onPreferenceChange(AssignmentPref.java:97)
    at android.preference.Preference.callChangeListener(Preference.java:756)
    at android.preference.ListPreference.onDialogClosed(ListPreference.java:219)
    at android.preference.DialogPreference.onDismiss(DialogPreference.java:389)
    at android.app.Dialog$ListenersHandler.handleMessage(Dialog.java:1047)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method) 
```

所以它找不到我动态创建的偏好。当我只想打电话时也会发生同样的事情`getPreferenceScreen().findPreference("assign1").getTitle();`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:25:21.573

朋友，您没有提交您的偏好，因此您的共享偏好中没有条目.....这就是为什么它提供 NUll 指针 exc。

做这个

```
 mFilterShow.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:09:29.140

我没有找到我的问题的准确解决方案。我无法删除甚至找不到动态添加到我的 PreferenceScreen 的首选项，这很奇怪。在这两种情况下，我都有 NullPointerException。

但我找到了解决我的问题的解决方案。我用所有必需的元素创建了 2 个单独的 xml 首选项。我在相应的事件中添加和删除它们。

# c++ - 使用 CAtlRegExp 匹配多个组

> ID：14726567
> 
> 赞同：0
> 
> 时间：2013-02-06T10:20:29.007
> 
> 标签：c++, regex, youtube-api, atl

我正在尝试使用 youtube 数据 api 获取 youtube 播放列表的总持续时间。例如，我从[http://gdata.youtube.com/feeds/api/playlists/63F0C78739B09958](http://gdata.youtube.com/feeds/api/playlists/63F0C78739B09958)`<yt:duration='xxx'/>`下载响应，我的想法是遍历`xxx`每个视频的持续时间（以秒为单位），并将它们相加以获得总播放列表运行。

为了让每个我使用`CAtlRegExp`以下字符串：

`<yt:duration seconds='{[0-9]+}'/>`

但是它只匹配第一次出现，而不匹配其余的任何（参考下面粘贴的源代码，循环只迭代一次）。

我尝试了其他一些正则表达式字符串，例如

*   `(<yt:duration seconds='{[0-9]+}'/>)`

*   `(<yt:duration seconds='{[0-9]+}'/>)*`

但是他们也没有工作（同样的原因）。

这是源代码的摘录，其中 for 循环仅迭代一次，因为`mcDuration.m_uNumGroups`等于`1`：

```
 //get video duration
    CAtlRegExp<> reDurationFinder;
    CAtlREMatchContext<> mcDuration; 

    REParseError status = reDurationFinder.Parse(_T("<yt:duration seconds='{[0-9]+}'/>"));

    if ( status != REPARSE_ERROR_OK )
    {
        // Unexpected error.
        return false;
    }

    if ( !reDurationFinder.Match(sFeed, &mcDuration) ) //i checked it with debug, sFeed contains full response from youtube data api
    {
        //cannot find video url
        return false;
    }

    m_nLengthInSeconds = 0;
    for ( UINT nGroupIndex = 0; nGroupIndex < mcDuration.m_uNumGroups; ++nGroupIndex )
    {
        const CAtlREMatchContext<>::RECHAR* szStart = 0;
        const CAtlREMatchContext<>::RECHAR* szEnd = 0;
        mcDuration.GetMatch(nGroupIndex, &szStart, &szEnd);

        ptrdiff_t nLength = szEnd - szStart;
        m_nLengthInSeconds += _ttoi(CString(szStart, nLength));
    } 
```

我怎样才能`CAtlRegExp`匹配所有的出现`<yt:duration ...`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:27:09.860

您将始终只有第一次（下一次）出现。要找到其他人，您需要不断`Match`循环，直到找不到更多事件。

```
 for(; ; )
    {
        CAtlREMatchContext<> MatchContext;
        pszNextText = NULL;
        if(!Expression.Match(pszText, &MatchContext, &pszNextText))
            break;
        // Here you process the found occurrence
        pszText = pszNextText;
    } 
```

# javascript - 存储数据表客户端

> ID：14726575
> 
> 赞同：0
> 
> 时间：2013-02-06T10:20:51.907
> 
> 标签：javascript, jquery, datatable

我在这里附上了屏幕截图。[http://imageshack.us/photo/my-images/836/abcpqr.png/](http://imageshack.us/photo/my-images/836/abcpqr.png/)。在我的第 2 列中，有一个下拉列表，其中包含项目列表。第三列是输出列，其值取决于下拉选择的项目。我在数据表中拥有 2 个下拉项及其输出的所有组合。由于要求，我不能使用服务器端处理。

所以我想存储那个输出表客户端。并且取决于我想将输出表的输出显示到第三列文本框的下拉选择值。我想使用客户端（Javascript/Jquery）来实现这一点。

所以请帮助我如何实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:22:52.723

[您可以通过html5 存储](http://www.html5rocks.com/en/features/storage)在客户端存储内容

这意味着您可以开始使用 API 的 sessionStorage 和 localStorage

这是学习如何使用的教程

[html5存储](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:15:34.290

我得到了解决方案。将来对其他人有用。

我创建了隐藏的列表视图，其中仅包含带有空白跨度的 itemtempalte。并将类分配给跨度以区分每个跨度并创建具有所需输出的自定义属性。例如

```
 <ItemTemplate> <span id="residualMapping" class='<%# string.Format("ABC_{0}_{1}",Eval("firstdropdownValue"),Eval("seconddropdownValue")) %>' output='<%# Eval("output") %>' > </span></ItemTemplate> 
```

并为每个下拉列表和标签分配类。最后我已经处理了每个下拉更改事件。在这种情况下，我得到两个下拉列表的选定值，并使用这个值我正在捕捉跨度，从跨度我得到它的自定义属性值。我分配给输出标签的这个值。

# javascript - 文本框宽度问题——IE

> ID：14726578
> 
> 赞同：0
> 
> 时间：2013-02-06T10:20:57.517
> 
> 标签：javascript, jquery, html, css, internet-explorer

我正在尝试将文本框的宽度设置为 100%，但它会拉伸容器。我检查了一些类似的问题，但似乎没有解释为什么会出现问题。我知道手动设置属性但是我需要找出为什么会发生这种情况。我必须使用 100% 的属性值来做到这一点..

```
 <body>
     <form id="form1" runat="server">
        <div style="border:1px solid gray;">
            <input type="text" style="width: 100%;"  id="title"/>

        </div>

    <div>
    <a href="#" id="postfile" style="float:left;">Post</a><span style="display:none;  border:1px solid #ee1100; margin-left:10px; color:#cc1100" id="errormessage"></span>
    </div>

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:32:49.990

添加`box-sizing:border-box`. 它太宽的原因是因为您当前将内容设置为 100% 宽度，但添加了填充和边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:36:48.413

尝试在您的输入上使用 Box 大小

```
<input type="text" style="width: 100%; box-sizing: border-box;"  id="title"/> 
```

也是最跨浏览器的方式是：

```
<input type="text" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;"  id="title"/> 
```

[http://jsfiddle.net/zQXXh/](http://jsfiddle.net/zQXXh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:59:15.623

`<input>`in的默认边框样式`IE`使其超出容器 div。逻辑输入为 100% 宽，但默认边框为其添加了额外的宽度。`border:10px solid green;`您可以尝试`<input>`在任何浏览器中添加它。

```
<input type="text" style="width: 100%; border:10px solid green;"  id="title"/> 
```

它会让你输入到容器 div 之外。所以当你申请`border:0`喜欢时`<input>`：

```
<input type="text" style="width: 100%; border:0;"  id="title"/> 
```

它将适合容器。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:07:37.047

是的...正如 Kolink 所建议的那样，文本框的边距、边框和填充不为零。所以它跨越 100% 的宽度。因此，通过使用 box-sizing:border-box 元素上指定的任何填充或边框都会在指定的宽度和高度内进行布局和绘制

# android - 如何将复合可绘制对象放在文本视图的左上角

> ID：14726583
> 
> 赞同：6
> 
> 时间：2013-02-06T10:21:09.067
> 
> 标签：android, drawable, textview, compound-drawables

我们可以为 textview 设置复合可绘制对象，如下使用`drawableLeft` 或`setCompundDrawables`但使用它只能将可绘制对象放置在左/右/顶部/底部。但我只想将可绘制对象放在 Textview 的左上角和右上角。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:24:40.457

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/imageView1"
    android:text="@string/text" /> 
```

这样就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T11:34:37.613

我认为，有一种比 3 个视图更简单、更快捷的方法。您需要为图标准备适当的 9patch，然后使用 FrameLayout。甚至可能只有**一个** `EditText`/`TextView`使用与背景相同的可绘制对象。[此答案](https://stackoverflow.com/a/17880082/657487)中描述了更多详细信息。

# java - SomeInterface.class 和 SomeClass.class 之间的区别？

> ID：14726584
> 
> 赞同：-4
> 
> 时间：2013-02-06T10:21:09.470
> 
> 标签：java

我正在寻找Java`SomeInterface.class`和`SomeClass.class`Java 之间的区别。有人可以解释一下吗？

编辑：说`SomeClass`implements `SomeInterface`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:18:14.797

Java 中的类用于保存数据并提供对该数据的操作。 [接口](http://en.wikipedia.org/wiki/Interface_%28Java%29)用于实现[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)。它们定义了实现类必须提供的操作，以便它们的公共部分具有相似的行为。您可以将接口视为一种契约。

假设您有一些车辆，并且希望每辆车都知道它有多少个轮子。一辆汽车、一辆摩托车和一些其他车辆，你不知道它有多少个轮子，必须先数一数。所以你可以使用一个接口来强制每辆车提供它所拥有的轮子数量。

```
interface Vehicle {
    // define the contract
    int getNumberOfWheels();
}

class Car implements Vehicle {
    // respect the contract by prividing an implmentation for the method getNumberOfWheels()
    public int getNumberOfWheels() {
        return 4;
    }
}

class Motorcycle implements Vehicle {
    public int getNumberOfWheels() {
        return 2;
    }
}

class GenericVehicle implements Vehicle {
    public int getNumberOfWheels() {
        return countWheels();
    }

    private int countWheels() {
        int c=0;
        // count...
        return c;
    }
}

// using the classes / diferent types of vehicles
Vehicle v1 = new Car();
Vehicle v2 = new Motorcycle();
Vehicle v3 = new GenericVehicle();

System.out.println("Vehicle 1 has " + v1.getNumberOfWheels() + " wheels.");
System.out.println("Vehicle 2 has " + v2.getNumberOfWheels() + " wheels.");
System.out.println("Vehicle 3 has " + v3.getNumberOfWheels() + " wheels."); 
```

对于您要添加的每种新类型的车辆，`Vehicle`如果您希望它的行为与其他车辆一样，则必须实现界面。

这不是关于接口的全部内容，但我希望这能帮助你理解它们。

# reporting-services - SSRS 2005 折线图系列/区间

> ID：14726589
> 
> 赞同：0
> 
> 时间：2013-02-06T10:21:22.157
> 
> 标签：reporting-services, reportingservices-2005

整个下午，

我在 SSRS 2005 中有一个简单的条形图，可以在网页中显示数据。我在网页上分配的空间非常小，但是是必需的。

我有一份报告将过去 24 小时的数据拉回并绘制在图表上。我已将“时间戳”数据放在我的图表上，它位于“在此处放置类别字段”部分中。

由于我的图表空间很小，24 小时时间戳标签看起来太忙而且看起来很乱。有没有办法可以格式化这个区域，使它只在第 6、12、18 和 24 间隔显示标签？

我已经通过使用以下格式格式化时间戳来减少标签，但我认为我需要减少时间戳的标签数量。

```
=Format(Fields!TimeStamp.Value, "H:mm dd-MMM") 
```

问候下注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:44:23.393

尝试查看**主要网格线**间隔：

![在此处输入图像描述](../Images/f5238636df93aff733f699b66e6d25d1.png)

这给了我一些垃圾数据的结果：

![在此处输入图像描述](../Images/34814e3f0bf65b6eeccb9d0099613b07.png)

因此，它可能不是 100% 完美满足您的需求，但希望对您有所帮助。不幸的是，SSRS 2005 图表在功能上有点有限，所以这是一个尝试用你所拥有的东西做到最好的例子。

# extjs - 扩展 Ext.grid.column.Action

> ID：14726595
> 
> 赞同：0
> 
> 时间：2013-02-06T10:21:42.140
> 
> 标签：extjs, extjs-mvc

我的网格中有一个自定义操作列，如下所示：

```
Ext.define('Profiler.view.Common.ActionColumn', {
    alias: 'widget.asaActionColumn',
    extend: 'Ext.grid.column.Action',
    items: [{
        iconCls: 'edit',
        tooltip: __("Edit"),
        handler: function (grid, rowIndex, colIndex) {
            this.fireEvent('itemedit', grid, rowIndex, colIndex);
        }
    }, {
        iconCls: 'delete',
        tooltip: __("Delete"),
        handler: function (grid, rowIndex, colIndex) {
            this.fireEvent('itemdelete', grid, rowIndex, colIndex);
        }
    }, {
        iconCls: 'information',
        tooltip: __("Info"),
        handler: function (grid, rowIndex, colIndex) {
            this.fireEvent('PersonageInformation', grid, rowIndex, colIndex);
        }
    }]

}); 
```

但是当渲染页面不起作用时： ![在此处输入图像描述](../Images/932184d2244cfb4694ca4ea608c59269.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:32:11.723

哦。我明白了。我像这样覆盖构造函数：

```
Ext.define('Profiler.view.Common.ActionColumn', {
    alias: 'widget.asaActionColumn',
    extend: 'Ext.grid.column.Action',
    constructor: function (config) {
        this.initialConfig = config;
        this.itemId = config.itemId = (config.itemId || config.id || Ext.id());
        this.callParent(arguments);

        this.items = [{
            iconCls: 'Edit',
            tooltip: __("Edit"),
            handler: function (grid, rowIndex, colIndex) {
                this.fireEvent('itemedit', grid, rowIndex, colIndex);
            }
        }, {
            iconCls: 'delete',
            tooltip: __("Delete"),
            handler: function (grid, rowIndex, colIndex) {
                this.fireEvent('itemdelete', grid, rowIndex, colIndex);
            }
        }, {
            iconCls: 'information',
            tooltip: __("Info"),
            handler: function (grid, rowIndex, colIndex) {
                this.fireEvent('PersonageInformation', grid, rowIndex, colIndex);
            }
        }];

    },

}); 
```

# emacs - Sublime Text 2 的 Emacs 的“Goto Anything”（或即时搜索）？

> ID：14726601
> 
> 赞同：25
> 
> 时间：2013-02-06T10:21:56.603
> 
> 标签：emacs, sublimetext, emacs24, dot-emacs, emacs-helm

我最近试用了[Sublime Text 2](http://www.sublimetext.com/2)，我发现[Goto Anything](https://www.youtube.com/watch?v=36NIIgcrYzE)对于导航源代码非常有用（[Ctrl-P file@symbol](https://www.youtube.com/watch?v=Q0OtfjgnoLA#t=1m00s)似乎工作得很好）。Emacs 有类似的东西吗？最好是可以正常工作的东西，没有大量的自定义 elisp。

到目前为止我已经尝试过：

1.  我见过[Helm](http://emacs-helm.github.com/helm/)和[Anything](http://www.emacswiki.org/Anything)，~~但据我了解，它们都不能进行实际的“即时”搜索~~（请参阅下面的编辑）。

2.  我用过[`multi-occur-in-matching-buffers`](http://www.masteringemacs.org/articles/2011/07/20/searching-buffers-occur-mode/)，但它似乎也无法满足“即时”标准。

3.  [`imenu`](http://emacswiki.org/emacs/ImenuMode)/[`idomenu`](http://emacswiki.org/emacs/idomenu.el)适用于单个文件，但不适用于跨文件。

我目前将 #2 和 #3 一起使用，作为 Goto Anything 的不良替代品。

如果不是 Goto Anything 的精确克隆，那么我可以使用一个简单的即时搜索解决方案（一种在所有打开的缓冲区中搜索给定字符串并动态显示结果的解决方案）。所以这也是可以接受的。

我使用 Emacs 24.2，所以任何仅 v24 的 elisp 也可以。

**编辑：在**[event_jr 的建议下](https://stackoverflow.com/questions/14726601/sublime-text-2s-goto-anything-or-instant-search-for-emacs#14731718)，我又给了 Helm 一次机会，我发现它*确实*支持跨所有开放缓冲区的即时搜索。`helm-multi-occur`+`helm-follow-mode`出乎意料地接近满足我的需求，唯一的小问题是（听起来很挑剔）：

*   ~~我还没有找到运行时`helm-follow-mode` *自动*开启的方法`helm-multi-occur`。我必须手动调用它`C-c C-f`。有人愿意用 elisp 的片段来尝试一下吗？~~（见下面的编辑＃2）

*   它不像 ST2 的 Goto Anything 那样“智能”（即，它不理解源代码中的“符号”，就像 Goto Anything 那样）。

**编辑#2**：现在我已经掌握了大部分的 Goto 任何东西，这要感谢[下面 event_jr 的回答](https://stackoverflow.com/questions/14726601/sublime-text-2s-goto-anything-or-instant-search-for-emacs#14731718)（当然，还要感谢 Helm 的创建者[Thierry Volpiatto](https://github.com/thierryvolpiatto)）。我衷心推荐给任何寻找类似功能的人。以下是我目前正在使用的 elisp：

```
;; instant recursive grep on a directory with helm
(defun instant-rgrep-using-helm ()
  "Recursive grep in a directory."
  (interactive)
  (let ((helm-after-initialize-hook #'helm-follow-mode))
    (helm-do-grep)))

;; instant search across all buffers with helm
(defun instant-search-using-helm ()
  "Multi-occur in all buffers backed by files."
  (interactive)
  (let ((helm-after-initialize-hook #'helm-follow-mode))
    (helm-multi-occur
     (delq nil
           (mapcar (lambda (b)
                     (when (buffer-file-name b) (buffer-name b)))
                   (buffer-list))))))

;; set keybindings
(global-set-key (kbd "C-M-s") 'instant-search-using-helm)
(global-set-key (kbd "C-M-S-s") 'helm-resume)
(global-set-key (kbd "C-M-g") 'instant-rgrep-using-helm) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T14:42:24.360

## 只需使用掌舵。

它可能比您要求的配置更多，但是一旦您按照自己的喜好进行配置，它应该会很舒服。非常像 Emacs ;)。

你应该向 Thierry 提交一个错误，以获得一些对新手更友好的默认值。他对问题非常敏感。

### helm-multi-occurring

主要是通过提供多缓冲区交互“发生” `helm-multi-occur`。如果您执行该命令，您会注意到您必须首先选择一些缓冲区（用于`C-SPC`从列表中选择， `M-SPC`以选择全部）。然后您可以在下一个提示符处输入您的查询。制作自己的跳过缓冲区选择的版本很容易，如下所示：

```
(eval-after-load "helm-regexp"
    '(setq helm-source-moccur
           (helm-make-source "Moccur"
               'helm-source-multi-occur :follow 1)))

(defun my-helm-multi-all ()
  "multi-occur in all buffers backed by files."
  (interactive)
  (helm-multi-occur
   (delq nil
         (mapcar (lambda (b)
                   (when (buffer-file-name b) (buffer-name b)))
                 (buffer-list))))) 
```

### 掌舵缓冲区列表

通常你并不关心查询字符串的确切出现，而是想要一个包含它的所有缓冲区的列表。

`helm-buffers-list`有一些技巧。您指定的第一个符号是按主要模式过滤，您可以使用“@”前缀将列表缩小到包含字符串的缓冲区。

也就是说，“ruby @prompt”将显示一个缓冲区列表，其主要模式包含“ruby”并且其内容包含“prompt”。或者您可以只使用“@prompt”来显示所有包含“prompt”的缓冲区。

* * *

一旦你习惯了它，它就会强大而舒适。

* * *

**EDIT**修改`my-helm-multi-all`为启用 helm-follow-mode。

**编辑 2**更新`helm-follow-mode`代码以反映掌舵更改。

**EDIT 3**再次更新以反映[helm 更改](https://github.com/emacs-helm/helm/issues/623)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T14:34:21.653

Emacs 有[Projectile](https://github.com/bbatsov/projectile)满足你的需求：

*   跳转到项目中的文件
*   在项目缓冲区中多次出现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-05T06:48:29.377

1.  Heml 远非 ST3 的模糊搜索。

2.  [Fiplr](https://github.com/d11wtq/fiplr)看起来很有希望，但在我的笔记本电脑上不起作用（请参阅 github 上的第一个问题）

3.  [Simp.el](https://github.com/re5et/simp)看起来像 Fiplr，但对我来说也不起作用。

4.  [弹丸](https://github.com/bbatsov/projectile)对我有用！这是您的解决方案！

我还使用 ido-mode 和 flx-ido 进行模糊搜索，

对于显示结果的垂直方式，我在我的 .emacs 中使用它：

```
;; Display ido results vertically, rather than horizontally
(setq ido-decorations (quote ("\n-> " "" "\n   " "\n   ..." "[" "]" " [No match]" " [Matched]" " [Not readable]" " [Too big]" " [Confirm]")))
(defun ido-disable-line-truncation () (set (make-local-variable 'truncate-lines) nil))
(add-hook 'ido-minibuffer-setup-hook 'ido-disable-line-truncation)
(defun ido-define-keys () ;; C-n/p is more intuitive in vertical layout
  (define-key ido-completion-map (kbd "C-n") 'ido-next-match)
  (define-key ido-completion-map (kbd "C-p") 'ido-prev-match))
(add-hook 'ido-setup-hook 'ido-define-keys) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T21:07:43.660

**[Icicles](http://www.emacswiki.org/cgi-bin/wiki/Icicles)**提供了一些与您正在寻找的功能相似的功能。

1.  `C-x b`并且`C-x C-f`，要选择缓冲区或文件，允许多重完成：您可以键入模式以匹配缓冲区/文件名和/或模式以[匹配](http://www.emacswiki.org/emacs/Icicles_-_Nutshell_View#SecondExampleMultiCompletion)[缓冲区](http://www.emacswiki.org/emacs/Icicles_-_Buffer-Name_Input)/[文件](http://www.emacswiki.org/emacs/Icicles_-_File-Name_Input#MatchFileContent)中的内容。[候选人在您键入时会被逐步](http://www.emacswiki.org/emacs/Icicles_-_Icompletion#CompletionsIcompletion)过滤（您所说的“即时”就是 Emacs 所说的“增量”）。[您可以逐步](http://www.emacswiki.org/emacs/Icicles_-_Progressive_Completion)细化一个或两个搜索模式，以不同的方式缩小选择范围。您可以同时访问任意数量的匹配缓冲区/文件。您也可以使用相同的方法在 Dired: 中搜索标记的文件`C-F`。

2.  `C-c` ```( [`icicle-search`](http://www.emacswiki.org/emacs/Icicles_-_Search_Commands%2c_Overview)) 增量搜索多个缓冲区或文件。再次，渐进式细化等。

#1 和 #2 之间的主要区别是：

*   对于#1，您只想找到匹配的缓冲区或文件。您不会立即关心找到特定的事件 --- 任何匹配就足够了。

*   对于 #2，您提供要搜索的缓冲区或文件，并且您希望在搜索命中之间导航。

您还可以使用 #1 来定位所需的缓冲区和文件，然后搜索它们的内容：您上次使用的内容匹配模式可用作 Isearch ( `C-s`) 的搜索模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T21:17:38.993

对于 emacs，我自定义和修改了这个解决方案（用于安装 helm）：

```
(defun helm-occur-from-point (initial-value)
  "Invoke `helm-occur' from point."
  (interactive)
  (let ((input initial-value)
        (bufs (list (buffer-name (current-buffer)))))
    ;; (isearch-exit)
    (helm-occur-init-source)
    (helm-attrset 'moccur-buffers bufs helm-source-occur)
    (helm-set-local-variable 'helm-multi-occur-buffer-list bufs)
    (helm-set-local-variable
     'helm-multi-occur-buffer-tick
     (cl-loop for b in bufs
              collect (buffer-chars-modified-tick (get-buffer b))))
    (helm :sources 'helm-source-occur
          :buffer "*helm occur*"
          :history 'helm-grep-history
          :input input
          :truncate-lines t)))

(defun get-point-text ()
    "Get 'interesting' text at point; either word, or region"
    (if mark-active
        (buffer-substring (mark) (point))
      (thing-at-point 'symbol)))
  (defun helm-occur-1 (initial-value)
    "Preconfigured helm for Occur with initial input."
    (helm-occur-from-point initial-value))
  (defun bk-helm-occur ()
    "Invoke helm-occur with initial input configured from text at point"
    (interactive)
    (helm-occur-1 (get-point-text)))
  (global-set-key (kbd "M-s-o") 'bk-helm-occur) 
```

主要基于@see [https://news.ycombinator.com/item?id=6872508](https://news.ycombinator.com/item?id=6872508)但在最后一个掌舵版本上不起作用但我的更改已修复（只需从一些内部掌舵模块复制/粘贴）

# android - 单击菜单不起作用

> ID：14726602
> 
> 赞同：0
> 
> 时间：2013-02-06T10:21:57.553
> 
> 标签：android, listview, actionbarsherlock, lazy-loading

我在应用程序中使用**ActionBarSherlock**进行导航，它在任何地方都可以正常工作，除了一个包含*大图像*`ExpandableListView`列表的活动。为了加载图像，我使用*LazyList*。但是当我快速滚动列表时，图像开始加载并且单击菜单不起作用 - 菜单下降但单击时没有反应。在图像加载完成后，此行为也会保留。我只能按后退按钮并再次参加此活动，而不是一切正常。每次单击“冻结”菜单时，我都会在**logcat**消息中看到：

 ****```
02-06 12:06:38.314: WARN/EGL_emulation(2043): eglSurfaceAttrib not implemented
02-06 12:06:38.963: WARN/InputMethodManagerService(998): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@afa7b270 attribute=null 
```

设备和模拟器上出现问题。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:07:28.837

菜单被“冻结”，因为`onNavigationItemSelected`在**ActionBarSherlock**中没有被调用。我找到了问题的原因，但不知道它是如何相互关联的。我展示`ListView`了一些带有默认图像的项目。真实图像下载完成后，它们会替换默认图像，但它们有另一个尺寸（更大）并且之后出现问题。我通过设置图像的预定高度解决了这个问题。****

# ember.js - Ember.JS insertNewLine 不工作

> ID：14726607
> 
> 赞同：2
> 
> 时间：2013-02-06T10:22:12.063
> 
> 标签：ember.js

刚开始使用 Ember.JS，所以如果这是一个愚蠢的问题，我深表歉意。我的`app.js`文件中有这个：

```
window.Todos = Em.Application.create();

Todos.Todo = Em.Object.extend({

    title: null,
    completed: false

});

Todos.todosController = Em.ArrayController.create({
    content: [],

    createTodo: function(title)
    {
        var todo = Todos.Todo.create({title: title});

        this.pushObject(todo);
    }
});

Todos.CreateTodoView = Em.TextField.extend({

    insertNewLine: function()
    {
        alert('test');
        var value = this.get('value');

        if (value)
        {
            Todos.todosController.createTodo(value);

            this.set('value', '');
        }
    }
}); 
```

然后在我的`index.html`文件中：

```
 <script type="text/x-handlebars">
   {{view Todos.CreateTodoView id="new-todo" placeholder="What needs to be done?"}}
 </script> 
```

我相信`insertNewLine`当您在文本框中按回车键时会调用它，对吗？文本框渲染得很好，但每当我按下回车键时它什么都不做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:50:38.357

应该是`insertNewline`。注意*小写* **l**。有了它可以按预期工作。看到[这个小提琴](http://jsfiddle.net/WfXvq/)。

# asp.net - DataValueField 将值传递给中继器？

> ID：14726611
> 
> 赞同：0
> 
> 时间：2013-02-06T10:22:17.480
> 
> 标签：asp.net, repeater

因此，如果用户从 dropDownList 中选择一个值并单击按钮，则 ID 将传递给后面的代码（这是我想要的）例如

```
<asp:DropDownList ID="DropDownList" runat="server" AppendDataBoundItems="true" DataTextField="Company_Name" DataValueField="id">
<asp:ListItem Text="---Select---" Value="0" />   
</asp:DropDownList> 
```

因此 dataValueField 将传递 DD 中所选记录的“id”。

但是在同一页面上，我使用转发器来显示先前从下拉列表中选择的记录，在每条记录旁边我有一个“更改价格”按钮，我想在单击时执行一项任务，一切正常，但是我需要是相同的'id'。那么这是以类似的方式完成的吗？例如

```
<asp:Repeater ID="repeaterShowName" runat="server">             
                <HeaderTemplate>                   
                        <tr>

                            <th>
                                <asp:Label ID="SubConName" Text="Current SubContractors" runat="server"></asp:Label>                               
                            </th>
                        </tr>                   
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td>
                            <asp:Label ID="SubCon" Text='<%# Bind ("Company_Name")  %>' runat="server"></asp:Label>  
                        </td> 
                        <td>                                     
                            <asp:LinkButton ID="AddNewBOQLink" runat="server"  OnClick="EditPricesForSubContractor" CssClass="bottomhyperlink">Change Prices</asp:LinkButton>
                        </td>

                    </tr>
                </ItemTemplate>
            </asp:Repeater> 
```

//所以我是否在链接按钮内添加DataValueField="id"，这样当用户选择名称旁边的超链接时，它会自动具有'id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:15:35.317

您应该使用`CommandArgument`LinkBut​​ton 的属性将 id 传递给处理点击的方法。

所以你的`LinkButton`遗嘱现在看起来像这样：

```
<asp:LinkButton ID="AddNewBOQLink" runat="server" CommandArgument='<%# Bind("id")%>'  CssClass="bottomhyperlink">Change Prices</asp:LinkButton> 
```

并且您想将以下属性添加到您的中继器：

```
<asp:Repeater .... OnItemCommand="repeater_Command" ... 
```

处理命令事件的方法如下所示

```
void repeater_Command(Object Sender, RepeaterCommandEventArgs e) {        
   //retrieve the id like so
   int id = (int)e.CommandArgument;
} 
```

另外，请注意我`OnClick`从 LinkBut​​ton 中删除了该属性。`OnItemCommand`由于您正在通过中继器的方法处理单击，因此不需要它。

此外，您可能需要考虑向`CommandName`LinkBut​​ton 添加一个属性。这用于识别您希望执行的命令。目前，您只有一个命令：更改价格。但是将来您可能希望添加一个带有不同命令的附加按钮。

为此，请将以下属性添加到 LinkBut​​ton：

```
<asp:LinkButton ... CommandName="ChangePrice" ... 
```

并修改`repeater_Command`处理方法`CommandName`。像这样：

```
void repeater_Command(Object Sender, RepeaterCommandEventArgs e) {    
   switch(e.CommandName)
   {
      case "ChangePrice":    
         //retrieve the id like so
         int id = (int)e.CommandArgument;
         break;
   }
} 
```

# events - 如何以编程方式创建数据事件节点并设置数据字段

> ID：14726612
> 
> 赞同：0
> 
> 时间：2013-02-06T10:22:20.257
> 
> 标签：events, date, drupal, drupal-7, drupal-modules

我按照分步指南来实现模块事件日历功能。这是模块的链接：

[http://drupal.org/project/events_calendar_feature](http://drupal.org/project/events_calendar_feature)

然后我创建了一个自定义模块，每天从外部网站下载信息（通过实现 hook_cron）。该模块自动以编程方式创建我创建的类型为“data_event”的节点（按照上面提到的指南），每天都有网站上的所有新事件。这些是创建的新内容类型“data_event”中的所有字段：

标签：标题机器名称：标题字段类型：节点模块元素

标签：正文机器名称：正文字段类型：节点模块元素

标签：日期机器名称：field_event_dates 字段类型：日期小部件：文本字段

![在此处输入图像描述](../Images/17486895afd4622bddf55034af9120ea.png)

问题是正确设置节点的各个字段。我如何知道要设置的日期的字段名称？

这是我当前在我的模块中的实现。注释行是一些没有成功的测试。

日期格式：dd/mm/yyyy 时间格式：hh:mm (24h)

```
function create_data_event_node($title, $id, $data_event_body, $startDate, $startDateTime, $endDate, $endDateTime) {
    watchdog("Indico Downloader", "Creating new data event node.");
    $node = new stdClass();
    $node->type = "data_event";
    $node->title = $title;
    $node->language = LANGUAGE_NONE;
    $node->id = $id;
    node_object_prepare($node);

    $node->body[$node->language][0]['value'] = $data_event_body;
    $node->body[$node->language][0]['format'] = 'full_html';

    // $node->field_event_dates[$node->language][0]['value']['date'] = $startDate." - ".$startDateTime;
    // $node->field_event_dates = array(
        //     0 => array(
        //         'value' => format_date($om__result->date, 'short'),
        //     ),
        // );
    // $node->field_event_dates[$node->language][0]['value']['time'] = $startDateTime;
    // $node->field_event_dates[$node->language][0]['value2']['date'] = $endDate;
    // $node->field_event_dates[$node->language][0]['value2']['time'] = $endDateTime;

    $node = node_submit($node);
    node_save($node);
} 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:34:21.723

我们首先确保您已将字段配置为包含多个值？-- 在您的字段后面单击“编辑”。-- 验证“值的数量”是否配置为大于 1。

完成后，您应该能够通过将值分配给： $node->field_event_dates[$node->language][0]['value'] = "whatever you want it to be" 来设置第一个值。和第二个日期： $node->field_event_dates[$node->language][1]['value'] = "这是第二个值"。

ETC...

直到： $node->field_event_dates[$node->language][9]['value'] = "这是最后可能的"（假设您已将最大值设置为 10）。

我希望这有帮助？

# google-cloud-messaging - 我的 GCM 应用适用于某些人，但不适用于其他人

> ID：14726613
> 
> 赞同：0
> 
> 时间：2013-02-06T10:22:21.470
> 
> 标签：google-cloud-messaging

我编写了一个使用 Google Cloud Messaging 的 Android 聊天程序。

有用。人们可以聊天。

但是，有些人不是因为该应用程序没有从他们的设备注册到 GCM。

这可能是由于：

*   用户在其设备上没有 Google 帐户。

*   防火墙阻止他们访问端口：5228、5229 和 5230

从我的角度来诊断似乎是不可能的，因为它适用于某些人，但不适用于其他人，而且我所有的设备都可以工作。

我正在寻找其他方法来诊断这个问题。任何想法将不胜感激。

我添加了提示，根据 GCMIntentService onError 返回的内容为用户提供有关问题的线索。

# jquery - jQuery UI 工具提示和颜色框

> ID：14726614
> 
> 赞同：2
> 
> 时间：2013-02-06T10:22:22.207
> 
> 标签：jquery, tooltip, lightbox, colorbox

我有一个小应用程序，我在其中使用 jQuery UI 的 Tooltip 函数和 Colorbox。你可以在[这里找到](http://www.mymobisite.be/victorpeeters)

当我将鼠标悬停在 wordmap 上时（现在只有 Rioolreiniging 和 Rioolinspectie），工具提示看起来很好，正如它应该做的那样。

单击单词时，应该会打开一个带有所有工具提示文本的 Lightbox (Colorbox)。工作也很好。

但是当我关闭颜色框时，工具提示仍然存在......我该如何解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:31:52.487

Colorbox 有事件“onClosed”。您必须致电：

```
$('MY_ID').colorBox({ onClosed: function(){ 
    $( ".selector" ).tooltip( "close" ); } 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T18:33:37.607

你必须这样做：

```
$('MY_ID').colorBox({
    onOpen: function() {
        $("#tt").tooltip("disable");
    },
    onClosed: function() {
        $("#tt").tooltip("enable");
    }
}); 
```

有了上面的答案，它会在颜色框消失后关闭工具提示，但之后工具提示将不再起作用。

# graphics - 高斯滤波器在渲染算法中的应用

> ID：14726622
> 
> 赞同：0
> 
> 时间：2013-02-06T10:22:51.657
> 
> 标签：graphics, textures, render, pixel, gaussian

所以我正在实现这一种渲染算法，并且该算法的一部分具有以下组件，用于处理从屏幕大小的纹理访问纹素。希望下面的代码非常简单。

```
int k = arbitrary integer;

for(int x = -1; x <= 1; x++)
{
    for(int y = -1; y <= 1; y++)
    {
        Pixel(i,j) += Texture(i + k*x, j+k*y) * G[x+1][y+1];
    }
} 
```

在这种情况下，我正在阅读的论文将函数 G[x][y] 分类为 3x3 高斯滤波器，但除此之外没有提供任何更多信息。所以我想知道这里是否有人，根据我在这里写的内容，是否能够弄清楚如何实现适合这段特定代码部分的高斯滤波器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:47:06.063

如果你只需要一个 3x3 2D 高斯内核，你可以使用这个：

```
0.04492 0.1221  0.4492
0.1221  0.33192 0.1221
0.04492 0.1221  0.4492 
```

总和为 1，因此您无需除以权重。执行 2-pass 方法可能更有效，首先使用 1D 内核（0.1221、0.3319、0.1221）进行水平处理，然后使用相同的内核进行垂直处理。您可能还想尝试具有不同 sigma 的高斯。

# symfony - Symfony2：未登录时不重定向到登录

> ID：14726623
> 
> 赞同：1
> 
> 时间：2013-02-06T10:22:50.987
> 
> 标签：symfony, login, production-environment

我正在 Symfony2 中开发一个应用程序，当用户未登录时，我在重定向到登录页面时遇到问题。而不是重定向，出现一个空白页面。这发生在我的生产环境中以及应用程序未处于调试模式时。在我的开发环境中，重定向在调试和非调试模式下工作，在生产环境中，它在调试模式下工作。

知道为什么会这样吗？

这是 security.yml 文件：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        W_Encuestas\EncuestasBundle\Entity\Usuario: 
            algorithm: sha512
            encode-as-base64: true
            iterations: 10

    role_hierarchy:
        ROLE_SUPER_ADMIN: [ROLE_ADMIN]
        ROLE_ADMIN: [ROLE_USER]

    providers:
        main:
            entity:
                class: W_Encuestas\EncuestasBundle\Entity\Usuario
                property: mail

    firewalls:
        secured_area:
            pattern: /.*
            form_login:
                login_path: /siteIntranet/login
                check_path: /check
                remember_me: true
                default_target_path: /siteIntranet/home
            logout:
                path: /logout
                target: /siteIntranet/login
            remember_me:
                key: "%secret%"
                lifetime: 1800
                path: /.*
                domain: ~
            security: true
            anonymous: true

    access_control:
        - { path: ^/siteIntranet/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/siteIntranet/home , roles: ROLE_USER }
    # .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:29:54.120

它只是缓存。如果有人遇到同样的问题，我必须删除它：

在 UNIX 系统上，创建缓存和日志时具有阻止删除的权限。为防止这种情况发生，请在“app/console”、“web/app.php”和“web/app_dev.php”中添加指令“umask”作为以下链接中的“设置权限”段落：

[http://symfony.com/doc/current/book/installation.html](http://symfony.com/doc/current/book/installation.html)

# asp.net - 如何为 ASP.NET AJAX UpdatePanel 请求覆盖 HtmlTextWriter？

> ID：14726625
> 
> 赞同：2
> 
> 时间：2013-02-06T10:23:00.727
> 
> 标签：asp.net, asp.net-ajax

我继承了 System.Web.UI.HtmlTextWriter 在 ASP.NET 应用程序中对 HTML 进行一些自定义呈现。这是在我的 Web.config 文件中使用以下配置的：

```
<browserCaps>
  tagwriter="MyAssembly.CustomHtmlTextWriter, MyAssembly"
</browserCaps> 
```

这适用于常规页面请求，调用 OnTagRender 等重写方法并将自定义 HTML 发送到浏览器。

但是，当使用 UpdatePanel 进行异步回发时，永远不会调用此代码，并且 HTML 在没有我的自定义修改的情况下到达浏览器。我是否缺少一些将为 AJAX 请求加载自定义 HtmlTextWriter 的配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:11:38.473

首先，我可以向您保证您的自定义 HTMLTextWriter 被正确调用，并且您在配置中没有做错任何事情。

使用您的 web.config 部分，我编写了一个测试应用程序，并在该行包含以下断点`var cap = ...`：

```
 protected void UpdatePanel1_Load(object sender, EventArgs e)
    {
        var cap = Request.Browser.TagWriter;
    } 
```

在初始 HTTP GET 和 AJAX 回发中，断点被命中，我可以看到所使用的 TagWriter 实际上是 CustomHtmlTextWriter。另外，我可以在 CustomHtmlTextWriter 构造函数上设置一个断点，并且这个断点在回发时被命中。

我还确认，即使您在回发中添加了一个全新的控件，即使调用了 CustomHtmlTextWriter 构造函数，OnTagRender、OnAttributeRender 和其他事件也不会触发。

此外，不会调用 RenderBefore...() 和 RenderAfter...() 方法。

所以这回答了你的问题“我在我的配置中做错了什么吗？”：不，你没有。您的自定义 HtmlTextWriter 被实例化和引用，但没有调用任何有用的方法（调用了 BeginRender，但没有调用通常用于更改标签的方法）。

在这一点上，值得注意的是 browserCaps 标记在 .NET 2.0 中已被弃用，因此您的用例似乎不受支持也许并不奇怪。根据您到底要做什么，我认为 ControlAdapter 架构应该可以完成工作。

例如，假设我想将所有 TextBoxes 和 Labels 替换为仅包含其 ID 的跨度，并在初始 GET 和 AJAX 回发上进行这项工作。当然，您的示例会更复杂，但希望这种简化会给您带来想法。

我需要做的就是创建一个可以作用于任何 Web 控件的 ControlAdapter：

```
public class CustomControlAdapter : WebControlAdapter
{
    protected override void RenderBeginTag(HtmlTextWriter writer)
    {
        writer.WriteLine();
        writer.WriteBeginTag("span");
        writer.Write(HtmlTextWriter.TagRightChar);
    }

    protected override void RenderEndTag(HtmlTextWriter writer)
    {
        writer.WriteEndTag("/span");
        writer.WriteLine();
    }

    protected override void RenderContents(HtmlTextWriter writer)
    {
        writer.WriteLine(Control.ID);
    }
} 
```

然后，我将它连接到我感兴趣的控件类型。为此，我在 App_Browsers 文件夹中创建了一个 Adapters.browser 文件，并包含以下配置：

```
<browsers>
  <browser refID="Default">
    <controlAdapters>
      <adapter
        controlType="System.Web.UI.WebControls.Label"
        adapterType="WebApplication1.CustomControlAdapter"
      />
      <adapter
        controlType="System.Web.UI.WebControls.TextBox"
        adapterType="WebApplication1.CustomControlAdapter"
      />
    </controlAdapters>
  </browser>
</browsers> 
```

请注意，我的“默认”浏览器 refID 将在所有浏览器上运行。现在，当需要呈现 Label 或 TextBox Web 控件时，CustomControlAdapter 会处理它。上面的代码在我的示例应用程序中进行了测试，即使使用 AJAX 也能完美运行。在您的情况下，我猜您只需要在上面的 Adapters.browser 文件中添加更多控件类型，您就应该 100% 投入业务。

# xml - XSLT 模板中出现换行符

> ID：14726631
> 
> 赞同：0
> 
> 时间：2013-02-06T10:23:06.047
> 
> 标签：xml, xslt

我有一些像这样的简单 XML ......

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <sentence>
        <word1>The</word1>
        <word2>cat</word2>
        <word3>sat</word3>
        <word4>on</word4>
        <word5>the</word5>
        <word6>mat</word6>
    </sentence>
    <sentence>
        <word1>The</word1>
        <word2>quick</word2>
        <word3>brown</word3>
        <word4>fox</word4>
        <word5>did</word5>
        <word6>nothing</word6>
    </sentence>
</root> 
```

我想要做的是用 XSLT 处理这个来创建一个句子，就像这个 The~cat~sat~on~the~mat

（这是我最终想要做的一个简化示例，这只是现在的一个绊脚石）。

我的 XSLT 看起来像这样；

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="no" />
    <xsl:template match="text()[not(string-length(normalize-space()))]"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:text>&#xa;</xsl:text>
        <xsl:apply-templates />
     </xsl:template>  

    <xsl:template match="/root/sentence">
        <xsl:apply-templates />
        <xsl:text>&#xa;</xsl:text>
    </xsl:template>

    <xsl:template match="word1">
        <xsl:value-of select="text()" />
        ~
    </xsl:template>

    <xsl:template match="word2">
        <xsl:value-of select="text()" />
        ~
    </xsl:template>

    <xsl:template match="word3">
       <xsl:value-of select="text()" />
       ~
    </xsl:template>

    <xsl:template match="word4">
        <xsl:value-of select="text()" />
        ~
    </xsl:template>

    <xsl:template match="word5">
        <xsl:value-of select="text()" />
        ~
    </xsl:template>

    <xsl:template match="word6">
        <xsl:value-of select="text()" />
        ~
    </xsl:template>
</xsl:stylesheet> 
```

如果我在 XML 上运行样式表，我会在它自己的一行上得到每个单词，然后在下一行得到一个 tilda，就像这样

```
<?xml version="1.0" encoding="UTF-8"?>
The
        ~
    cat
        ~
    sat
        ~
    on
        ~
    the
        ~
    mat
        ~

The
        ~
    quick
        ~
    brown
        ~
    fox
        ~
    did
        ~
    nothing
        ~ 
```

如果我删除我得到的 tildas

```
Thecatsatonthemat 
```

然后在我看来（而且我对这个 XSLT 东西很陌生），在新行中包含一个 tilda 正在强制新行。

那么，我怎样才能强制模板的输出都在一行上呢？（我的最终要求是对元素进行更多格式化，并用空格来填充元素 - 我稍后会谈到）。

感谢期待

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:29:11.347

改变你`~`的`<xsl:text>~</xsl:text>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:31:05.000

发生这种情况的原因是，当非空白文本直接出现在 an`xsl:template`及其内部元素之间时，非空白所属的*所有文本都包含在结果中（包括任何空白）。*为避免这种情况，您应该这样做：

```
<xsl:template match="word1">
    <xsl:value-of select="concat(text(), '~')" />
</xsl:template> 
```

我还建议消除那些几乎相同的 word1、word2 等模板，并用单个模板替换它们：

```
<xsl:template match="*[starts-with(name(), 'word')]">
    <xsl:value-of select="concat(text(), '~')" />
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:58:29.207

`<xsl:value-of select="text()" />`只需删除和之间的换行符**~**对我有用

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output indent="no" />
  <xsl:template match="text()[not(string-length(normalize-space()))]"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
    <xsl:text>&#xa;</xsl:text>
    <xsl:apply-templates />
  </xsl:template>

  <xsl:template match="/root/sentence">
    <xsl:apply-templates />
    <xsl:text>&#xa;</xsl:text>
  </xsl:template>

  <xsl:template match="word1">
    <xsl:value-of select="text()" />~</xsl:template>

  <xsl:template match="word2">
    <xsl:value-of select="text()" />~</xsl:template>

  <xsl:template match="word3">
    <xsl:value-of select="text()" />~</xsl:template>

  <xsl:template match="word4">
    <xsl:value-of select="text()" />~</xsl:template>

  <xsl:template match="word5">
    <xsl:value-of select="text()" />~</xsl:template>

  <xsl:template match="word6">
    <xsl:value-of select="text()" />~</xsl:template>
</xsl:stylesheet> 
```

结果 ：

```
<?xml version="1.0" encoding="utf-8"?>
The~cat~sat~on~the~mat~
The~quick~brown~fox~did~nothing~ 
```

# java - Java 1.6：学习如何处理异常

> ID：14726633
> 
> 赞同：3
> 
> 时间：2013-02-06T10:23:15.613
> 
> 标签：java, exception

我对异常进行了广泛的研究，但我仍然迷路了。我想知道做什么好或不好。

我还希望您就以下示例给我您的专家意见：

```
public void myprocess(...) {
    boolean error  = false;

    try {

        // Step 1
        try {
            startProcess();
        } catch (IOException e) {
            log.error("step1", e);
            throw new MyProcessException("Step1", e);
        }

        // Step 2
        try {
            ...
        } catch (IOException e) {
            log.error("step2", e);
            throw new MyProcessException("Step2", e);
        } catch (DataAccessException e) {
            log.error("step2", e);
            throw new MyProcessException("Step2", e);       
        }

        // Step 3
        try {
            ...
        } catch (IOException e) {
            log.error("step3", e);
            throw new MyProcessException("Step3", e);
        } catch (ClassNotFoundException e) {
            log.error("step3", e);
            throw new MyProcessException("Step3", e);       
        }

        // etc.

    } catch (MyProcessException mpe) {
        error = true;       
    } finally {
        finalizeProcess(error);
        if (!error) {
            log.info("OK");
        } else {
            log.info("NOK");
        }           
    }
} 
```

1.  是否可以在每个步骤中抛出个人异常 (MyProcessException) 以管理全局 try...catch...finally ？
2.  可以管理每个步骤的每个已知异常吗？

谢谢您的帮助。

* * *

**编辑 1：**

这是一个很好的做法吗？通过获取消息直接登录全局catch，并在上层尝试...catch(Exception)...。

目的是在步骤失败时停止，并最终确定过程（错误与否）。

```
In Controller

public void callProcess() {
    try {
        myprocess(...);
    } catch (Exception e) {
        log.error("Unknown error", e);
    }   
}

In Service

public void myprocess(...) {
    boolean error  = false;

    try {

        // Step 1
        try {
            startProcess();
            log.info("ok");
        } catch (IOException e) {
            throw new MyProcessException("Step1", e);
        }

        // Step 2
        try {
            ...
        } catch (IOException e) {
            throw new MyProcessException("Step2", e);
        } catch (DataAccessException e) {
            throw new MyProcessException("Step2", e);       
        }

        // Step 3
        try {
            ...
        } catch (IOException e) {
            throw new MyProcessException("Step3", e);
        } catch (ClassNotFoundException e) {
            throw new MyProcessException("Step3", e);       
        }

        // etc.

    } catch (MyProcessException mpe) {
        error = true;       
        log.error(mpe.getMessage(), mpe);           
    } finally {
        finalizeProcess(error);
        if (!error) {
            log.info("OK");
        } else {
            log.info("NOK");
        }           
    }
} 
```

谢谢你。

* * *

**编辑 2：**

在较低级别捕获 (Exception e) 并抛出个人异常是一种真正的坏习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:28:48.493

不存在通用规则，这取决于您的需求。您可以抛出个人异常，并且可以管理每个已知异常。

但请注意，重要的是你想要什么。

```
try{
   exec1();
   exec2(); // if exec1 fails,  it is not executed
}catch(){}

try{
   exec1();
}catch(){}

try{
   exec2(); // if exec1 fails,  it is  executed
}catch(){} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:28:16.140

在上面的示例中，抛出您自己的自定义异常可能是可以接受的。

想象一下，我有一些数据访问对象 (DAO)，它们有不同的风格（SQL、读/写文件等）。我不希望每个 DAO 都抛出特定于其存储机制的异常（与 SQL 相关的异常等）。我希望他们抛出一个`CouldNotStoreException`，因为这是客户正在处理的抽象级别。抛出与 SQL 相关或与文件相关的异常会暴露内部工作原理，而客户端对此并不特别感兴趣。他们只想知道读/写操作是否有效。

您可以使用原始[异常作为原因](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.Throwable%29)来创建自定义异常。这样您就不会丢失围绕您的问题的原始信息。

在上面我可能不会像你所做的那样处理每个步骤中的每个异常。如果出现异常后处理无法继续，我只需将整个代码块包装在异常处理块中。它提高了可读性，您不必捕获异常，然后（稍后）检查处理状态以查看是否可以正常进行（如果您不这样做，您将为*一个*生成许多异常原始问题，这没有帮助）。

我会考虑`catch {}`每个异常的多个块是否添加任何东西（你是否为每个块做不同的事情？）。请注意，Java 7[允许您在一个 catch{} 中处理多个异常类](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)（我意识到您使用的是 Java 6，但为了完整性我注意到这一点）。

最后，也许您想考虑一下已[检查与未检查的异常](http://www.ibm.com/developerworks/java/library/j-jtp05254/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:28:45.443

异常机制的要点是**减少**和组合处理代码。您正在以没有例外的语言的典型风格处理它们，例如 C：每次出现都有一个单独的处理块。

在大多数情况下，最好的选择是用一个包罗万象的方法包围整个方法代码：

```
try {
 .... method code ...
} 
catch (RuntimeException e) { throw e; } 
catch (Exception e) { throw new RuntimeException(e); } 
```

唯一不合适的地方是您要插入特定的处理代码，或者包装在稍后将专门处理的自定义异常中。

大多数异常，尤其是`IOExcption`在您的情况下，仅代表**失败**，除了记录它并将应用程序返回到可以处理进一步请求的安全点之外，不会进行任何处理。如果您发现自己一遍又一遍地重复相同的处理代码，这表明您做错了。

一个非常重要的规则：**要么**处理**，要么**重新抛出；永远不要两者都做。这就是您在示例中所做的：记录和重新抛出。重新抛出的异常很可能会在调用堆栈中被进一步捕获并再次记录。阅读生成的日志文件是一场噩梦，但不幸的是，这是一场非常熟悉的噩梦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:29:52.437

```
int step = 0;

try
{
    step = 1;
    ...
    step = 2;
    ...
    step = 3;
    ...
}
catch (Exception1 e)
{
    log ("Exception1 at step " + step);
    throw new MyException1 ("Step: " + step, e);
}
catch (Exception2 e)
{
    log ("Exception2 at step " + step);
    throw new MyException2 ("Step: " + step, e);
}
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:30:44.953

我会说这取决于您的需求...

如果 step2 即使 step1 失败也能正确执行，您可以单独 try/catch step1。
否则，我会将所有步骤组合在一个 try/catch 块中，并确保各个步骤在失败时生成日志消息。这样您就不会乱扔代码并且仍然知道出了什么问题

捕获每个已知异常是可以的，因此您可以记录发生了什么异常以及发生的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T10:35:38.120

这里有一些异常处理模式/反模式的链接：

做：

*   [http://www.javaworld.com/jw-07-1998/jw-07-techniques.html](http://www.javaworld.com/jw-07-1998/jw-07-techniques.html)

不：

*   [http://today.java.net/article/2006/04/04/exception-handling-antipatterns](http://today.java.net/article/2006/04/04/exception-handling-antipatterns)
*   [http://nekulturniy.com/Writings/RebelWithoutAClause/Rebel_without_a_clause.html](http://nekulturniy.com/Writings/RebelWithoutAClause/Rebel_without_a_clause.html)

关于创建您自己的异常，如果您正在创建 API、框架或另一段可重用代码，它当然很有用，但在常规应用程序中，它更具争议性，我个人建议坚持现有的异常。

# node.js - Node.js 基于 Web 的 SSH

> ID：14726644
> 
> 赞同：0
> 
> 时间：2013-02-06T10:24:02.270
> 
> 标签：node.js, child-process

当知道该用户的 linux 用户名和密码时，有没有办法在特定用户下从 node.js 启动进程（bash）。

我想通过socket.io将终端从服务器传输到网络浏览器，我需要每个用户都以他们的用户名行事，所以用户权限就像在正确的ssh上一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:41:22.693

基本上，您通过网络共享 SSH 连接。

您应该从 node.js 内置功能 child_process.spawn 生成子进程，如下所示：

`var spawn = require('child_process').spawn; ls = spawn('ls', ['-lh', '/usr']);`

见这里： [http ://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

要启动每个用户 SSH，您应该使用 :(在子进程生成中)

ssh -tt abcd_user@server.com [command_to_execute]

其余的取决于您将 node.js 上的子进程与网页上的接口与您的 socket.io.js 链接起来

# javascript - 使用 JavaScript 从 HTML 页面中删除不需要的字符

> ID：14726649
> 
> 赞同：0
> 
> 时间：2013-02-06T10:24:18.823
> 
> 标签：javascript, html, trim

我不是一个非常专业的 JavaScript 程序员。我想问一下，每当页面加载时，是否可以在运行时使用**JavaScript**从**HTML**页面源代码中删除所有不需要的字符（如*换行符*和*注释）？*如果可能的话，有人可以给我推荐一些教程吗？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:54:41.613

这是你需要的吗……？

```
 <script language="JavaScript">
      var temp = new String('This is a te!!!!st st>ring... from ??which? you.. want to remove chars...');
      document.write(temp + '<br>');
      temp =  temp.replace(/[^a-zA-Z 0-9]+/g,'');
      document.write(temp + '<br>');
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:31:57.877

我不确定你如何使用 JS 来做到这一点，但如果你正在运行服务器或 VPS 并且是基于 linux 的，你可以使用 mod_pagespeed

[http://code.google.com/p/modpagespeed/](http://code.google.com/p/modpagespeed/)

以下是一些功能：

[https://developers.google.com/speed/docs/mod_pagespeed/config_filters](https://developers.google.com/speed/docs/mod_pagespeed/config_filters)****

# css - CSS Nth Child 用于引用消息

> ID：14726651
> 
> 赞同：0
> 
> 时间：2013-02-06T10:24:31.443
> 
> 标签：css, css-selectors

我正在创建一个消息系统，用户可以在其中引用其他用户的消息。它适用于一个报价但是当我有多个报价时，我希望能够在视觉上区分它们。

我正在使用“nth child”选择器尝试为每个第二个引用块赋予不同的视觉样式，即偶数行。

对于包含 4 个引号的帖子，我有以下 HTML 结构，即一个引号引用另一个引号。

```
<div class='post_container'>
<blockquote><cite>Quote: user1</cite>

<blockquote><cite>Quote: user2</cite>

<blockquote><cite>Quote: user3</cite>
<blockquote><cite>Quote: user4</cite>

<p>post1</p>
</blockquote>
<p>post2</p>
</blockquote>

<p>post3</p>
</blockquote>

<p>post4</p>
</blockquote>
</div> 
```

**我使用的 CSS 代码如下：**

```
.post_container blockquote{
    padding:10px;
    margin:10px;
    background-color:#000000;
}

.post_container blockquote *:nth-child(even){
    border:thick;
    background-color:#3FF;
}

.post_container blockquote>cite{
    font-weight:bold;
    font-size:16px;
    background-color:#999999;   
}

.post_container blockquote *>div:nth-child(2){
    background-color:#3FF;
} 
```

**以下是它目前在 HTML 中的外观：http:** [//jsfiddle.net/5Jjxj/6/](http://jsfiddle.net/5Jjxj/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:57:05.790

采用`.post_container blockquote:nth-child(even) *`

代替`.post_container blockquote *:nth-child(even){`

# javascript - 在不同的 url 之间进行无缝转换

> ID：14726660
> 
> 赞同：0
> 
> 时间：2013-02-06T10:24:47.227
> 
> 标签：javascript, html, css

假设我有两个页面位于不同的 url：主页，例如，联系人。我在主页上有一些花哨的 CSS3 效果和联系页面的链接。

当我点击联系页面链接时，我想将一些主页元素滑出页面，或者使它们透明或其他，然后我只是让浏览器加载联系页面，但我想让这个过渡尽可能无缝。理想情况下，要实现单页网站的效果，在这里我可以轻松地显示和隐藏页面元素。

如何做到最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:28:12.357

# function - Maple：求解多个函数时访问求解的解

> ID：14726661
> 
> 赞同：0
> 
> 时间：2013-02-06T10:24:47.323
> 
> 标签：function, linear-algebra, maple

当我想为两个函数求解一组线性方程时，例如

```
solutions := solve({f(x)=x,g(x)=x},{f(x),g(x)}); 
```

我究竟能做些什么来使用解决方案作为枫树中的功能本身？

我唯一能做的就是

```
f_solution := x2 -> subs(x=x2, rhs(solutions[1])) 
```

但这在很多方面都是丑陋的。首先，这种微不足道的替换`x->x2`似乎是必要的，没有它就行不通。其次，构造`rhs(solutions[1])`非常糟糕，因为无法控制解决方案的顺序。因此，每次我修改我的方程时，我都必须手动检查索引`[1]`是否仍然正确。

有没有一种干净和标准的方法来从集合中提取函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:58:02.297

看看`assign`。它可以修复您在计算中获得的解决方案

```
> restart:
> solutions := solve({f(x)=x,g(x)=x},{f(x),g(x)});

                  solutions := {f(x) = x, g(x) = x}

> assign(%);
> f(x);

                                  x 
```

你也可以`subs`像这样尝试

```
> restart:
> solutions := solve({f(x)=x,g(x)=x},{f(x),g(x)});

                  solutions := {f(x) = x , g(x) = x}

> subs(solutions,f(x));
                                  x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:19:07.900

```
solutions := solve({2*f(x)=sin(x),g(x)/3=cos(x)},{f(x),g(x)});

           /       1                        \ 
          { f(x) = - sin(x), g(x) = 3 cos(x) }
           \       2                        / 
```

现在，`f_solution`作为一种表达，

```
f_solution := eval(f(x), solutions);

                        1       
                        - sin(x)
                        2 
```

或`f_solution`作为程序，

```
f_solution := unapply( eval(f(x), solutions), x);

                         1       
                    x -> - sin(x)
                         2 
```

# javascript - RecordField 中的默认值在执行时引发 JavaScript 错误

> ID：14726669
> 
> 赞同：1
> 
> 时间：2013-02-06T10:25:03.437
> 
> 标签：javascript, grid, store, default-value, ext.net

将以下记录字段添加到 GridPanel 存储会使站点
`Uncaught SyntaxError: Unexpected identifier`向 Chrome 控制台抛出 JavaScript 错误

```
<ext:RecordField Name="listname" AllowBlank="false" DefaultValue="Listname" />
<ext:RecordField Name="recipients" AllowBlank="false" DefaultValue="Listmembers" />
<ext:RecordField Name="usage" AllowBlank="true" />
<ext:RecordField Name="responsible" AllowBlank="false" DefaultValue="please add Responsible Person(s)/ Group(s)" /> 
```

Firebug 控制台给出以下错误：

```
SyntaxError: missing } after property list
[Break On This Error]     
...,name:"responsible",defaultValue:please add Responsible Person(s)/ Group(s)}]}),...
---------------------------------------------|
admin.aspx (line 16, col 60) 
```

看起来默认值没有正确引用为字符串，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:41:17.650

似乎记录字段的默认值通常应该是一个 javascript 变量。
双引号可以`defaultValue="'foo bar'"`解决问题

# meteor - 将 node-soap 模块与托管在 heroku 上的流星应用程序一起使用

> ID：14726670
> 
> 赞同：1
> 
> 时间：2013-02-06T10:25:04.203
> 
> 标签：meteor

我知道这根本不时髦，但我必须在我的 Meteor 项目中使用 SOAP（我只需要 SOAP 客户端功能）。Node-soap node.js 模块很棒，它可以使用这个 hack 在 localhost 上运行：[如何在meteor.com 上的 Meteor 应用程序中部署节点模块？](https://stackoverflow.com/questions/10476170/how-can-i-deploy-node-modules-in-a-meteor-app-on-meteor-com).

但是当我将我的应用程序部署到 Heroku 时，我得到以下信息：

```
2013-02-06T10:19:04+00:00 app[web.1]: module.js:485
2013-02-06T10:19:04+00:00 app[web.1]:   process.dlopen(filename, module.exports);
2013-02-06T10:19:04+00:00 app[web.1]:                  ^
2013-02-06T10:19:04+00:00 app[web.1]: Error: /app/pu blic/node_modules/soap/node_modules/node-expat/build/Release/node_expat.node: invalid ELF header 
```

这基本上意味着为我的 Mac OS 预编译的 node_expat.node（node-soap 的依赖项）的二进制不兼容。

任何想法如何正确安装 node-soap 模块？试图在 atmospehre 上找到类似的东西，但没有运气：所有具有服务器部分的模块都非常简单，没有单一的“要求”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:21:03.743

您应该能够使用 package.json 和 NPM 安装依赖项：[https ://devcenter.heroku.com/articles/nodejs#declare-dependencies-with-npm](https://devcenter.heroku.com/articles/nodejs#declare-dependencies-with-npm)

# orm - 如何在 Doctrine 2 中更新实体后插入新对象

> ID：14726682
> 
> 赞同：0
> 
> 时间：2013-02-06T10:25:21.923
> 
> 标签：orm, doctrine-orm

我想在更新对象后保存新实体（保存历史数据）。

我尝试将对象添加到 EntityManager 并在 preUpdate 事件中刷新，但我有递归效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:59:59.463

您可能`EntityManager#flush`在生命周期事件中调用：这是不支持的，它显然会导致无限递归问题。

# shell - 如何在脚本执行时检查 shell 脚本中使用的系统调用的 CPU 利用率？

> ID：14726687
> 
> 赞同：0
> 
> 时间：2013-02-06T10:25:35.387
> 
> 标签：shell, unix

我有一个使用几个系统调用（grep、ps 等）的 shell 脚本。我需要找到脚本中使用的每个系统调用的 CPU 利用率。我正在使用 AIX unix 5.1 版。请帮忙。

我已经尝试过 Topas、vmstat、iostat 命令，但它们显示了进程的整体 cpu 利用率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:50:50.867

使用下面的命令

ps -aef | grep“进程名称”

输出中会有一个“C”列，显示该进程的 CPU 利用率。

谢谢，戈帕尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:49:02.640

我不确定它在 AIX 上是否可用，但在 Linux 上，`time`您将使用该命令

```
time wc /etc/hosts
  9  26 235 /etc/hosts

real    0m0.075s
user    0m0.002s
sys 0m0.004s 
```

`sys`是系统调用时间量，`user`不是进程使用的系统调用时间

# ruby-on-rails - 在rails 3中构建多对多关系表单时出现错误的StatementInvalid错误

> ID：14726693
> 
> 赞同：0
> 
> 时间：2013-02-06T10:25:52.397
> 
> 标签：ruby-on-rails, rails-activerecord

您好，我正在制作一个用于在两个模型之间建立多对多关系的表格

使用此[解决方案](http://millarian.com/programming/ruby-on-rails/quick-tip-has_many-through-checkboxes/)

我有三个模型

艺术家，文章，艺术家关系。

这是艺术家模型。

```
 class Artist < ActiveRecord::Base
   default_scope order('created_at DESC')

   attr_accessible :body_en, :body_kr, :title_en, :title_kr

   has_many :articles, :through => :artist_relationships
   has_many :artist_relationships
 end 
```

这就是文章模型。

```
 class Article < ActiveRecord::Base
    default_scope order('created_at DESC')

    attr_accessible :title, :body, :date

    has_many :artists, :through => :artist_relationships
    has_many :artist_relationships

 end 
```

这是艺术家关系模型

```
 class ArtistRelationship < ActiveRecord::Base
   default_scope order('created_at DESC')

   attr_accessible :article_id, :artist_id

   belongs_to :artist
   belongs_to :article

 end 
```

现在我有一个设置艺术家的文章表格。

```
 <%= form_for [:admin, article] do |f| %>
   .....
     <% Artist.all.each do |artist| %>
        <div>
           <%= label_tag :artist_ids, artist.title_kr %>
           <%= check_box_tag :artist_ids, artist.id, article.artists.include?(artist), :name => 'article[artist_ids][]' %>
        </div>
     <% end %> 
```

**错误来自这里**

```
 article.artists.include?(artist) 
```

它引发了这些错误

> Mysql2::Error: 列 'created_at' 在 order 子句中不明确： SELECT 1 AS one FROM `artists`INNER JOIN `artist_relationships`ON `artists`。`id`= `artist_relationships`。`artist_id`在哪里`artist_relationships`。`article_id`= 1 和`artists`。`id`= 2 ORDER BY created_at DESC LIMIT 1

看不懂是什么意思。。

当我使用 pry 在代码上方进行调试时，会发生**奇怪的事情**

```
 <%= check_box_tag :artist_ids, artist.id, article.artists.include?(artist), :name => 'article[artist_ids][]' %> 
```

当我直接调用时在撬控制台中`article.artists.include?(artist)`

它引发了与我预期相同的错误。但

当我调用 `article.artists`它时，它会返回一个属于该文章的艺术家数组

然后我`article.artists.include?(artist)`再次打电话。我工作正常。

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:37:11.040

在所有默认范围内，包括该类的表格化版本

```
# article.rb
default_scope order('articles.created_at DESC') 
```

# axapta - 枚举继承

> ID：14726696
> 
> 赞同：2
> 
> 时间：2013-02-06T10:25:56.060
> 
> 标签：axapta, dynamics-ax-2009, x++

是否有可能创建一个`A`继承枚举属性`B`并另外提供扩展元素的可能性的枚举？

**示例**：

```
Enum A
- one
- two
- three

Enum B:A
- four 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:20:18.723

不，这是不可能的。基本枚举不支持继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:06:43.700

您不能，但是如果您手动创建两个基本枚举，第二个具有与第一个相同的标签和值，您可以在运行时虚拟地“向下转换”它们，就像它们被继承一样，这样（真实代码）：

```
NoYes          e1; // 0 No, 1 Yes
NoYesError     e2; // 0 No, 1 Yes, 2 Error

e1 = NoYes::No;
e2 = e1+0; // Add zero to avoid compile error

info(strFmt("%1 %2", e1, e2));

e2 = NoYesError::Error;
e1 = e2+0; // Don't do that

info(strFmt("%1 %2", e1, e2)); 
```

希望这可以帮助。

# iphone - 应用程序像 iphone 4 一样在 iphone 5 上运行

> ID：14726697
> 
> 赞同：1
> 
> 时间：2013-02-06T10:26:02.543
> 
> 标签：iphone, ios, xcode, cocoa-touch

我终于完成了构建增强现实应用程序。

该应用程序适用于 iphone 4 屏幕尺寸宽度：480 高度：320。在开发过程中，我还测试了模拟器以查看 4 英寸显示屏（iphone 5）的启动是否顺利，并且启动画面显示为 4 英寸 png 命名为：`Default-568h@2x.png`并且屏幕完全显示白色背景（喜欢它应该）。

当我在真正的 iphone 5 设备上启动应用程序时，加载了 3.5 英寸的初始屏幕，并且加载的应用程序就像在 iphone 4 上加载一样。中间的所有东西，我从侧面得到一点黑色相等的边距，电缆是原始的，并且这是我发生过的最奇怪的事情。

更新：我还尝试在模拟器和真实设备上添加此代码：

```
CGRect bounds = [[UIScreen mainScreen]bounds];
NSLog(@"%@",NSStringFromCGRect(bounds)); 
```

模拟器打印 iphone 5 屏幕尺寸，真实设备打印 iphone 4 尺寸。

请提供任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:47:08.310

确保您已正确设置**所有三个启动图像。**:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:38:29.197

确保图像已添加到目标。=> 如果您在 Project Navigator（左窗格）中选择图像文件，Utilities 窗格（右窗格）在您的目标旁边的“Target Membership”下应该有一个复选标记。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T22:06:12.273

我认为您的视图需要调整大小。您可能需要包含一些代码来检测用户使用的设备并调整视图大小。只是一个建议。

# google-maps - 在 Windows 商店中使用 Google 地图

> ID：14726702
> 
> 赞同：0
> 
> 时间：2013-02-06T10:26:30.517
> 
> 标签：google-maps, windows-8, windows-store-apps

[Windows 手机上的谷歌地图](http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/)

如何在此处添加图钉并获取路线。我需要使用 JavaScript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:00:00.520

此方法中的注意事项：

```
 function addMarkers () {
    for (var i = 0; i < dataResults.features.length; i++) {
        var quake = dataResults.features[i];
        var coors = quake.geometry.coordinates;
        var latLong = new google.maps.LatLng(coors[1], coors[0]);
        var marker = new google.maps.Marker({
            position: latLong,
            map: map
            //icon: getCircle(earthquake.properties.mag)
        });
    }
} 
```

重要的部分是当我们创建一个标记时，我们给它一个地图对象，它是从 div 'mapdisplay' 初始化的，所以我们在这里初始化那个地图对象

```
 function initialize() {
    map = new google.maps.Map(document.getElementById('mapdisplay'), {
        zoom: 3,
... 
```

反过来，它在调用中作为“map”参数传递给：

```
new google.maps.Marker
```

这是使用从 USGS 返回的地震数据并简单地创建新标记。您可以简单地使用类似的技术来添加您自己的图钉（即标记），是的 - 您需要 JavaScript [:) https://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)

要获取路线，请参阅 https://developers.google.com/maps/documentation/javascript/directions 上的“显示 DirectionsResult”[或](https://developers.google.com/maps/documentation/directions/)[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/javascript/directions) 上的概述

对于一个工作示例（它不是 win8，但它应该没关系，因为我假设您使用的是 Windows 8 HTML/JS 应用程序） [在新窗口中获取路线谷歌地图 API v3](https://stackoverflow.com/questions/11231831/get-directions-in-new-window-google-maps-api-v3)

话虽如此 - 您也可以使用 Bing 地图，它已针对 Windows 8 应用程序进行了详细记录

[适用于 Windows 应用商店应用的 Bing 地图](http://msdn.microsoft.com/en-us/library/hh846481.aspx)

[适用于 Windows 应用商店应用的 Bing 地图 SDK 示例](http://code.msdn.microsoft.com/Bing-Maps-SDK-for-Metro-31b378eb)

# java - 从命令行运行预编译的 java 文件 (Ubuntu)

> ID：14726703
> 
> 赞同：2
> 
> 时间：2013-02-06T10:26:41.000
> 
> 标签：java, classpath, shared-libraries

我检查了（基于[无法执行二进制文件](https://askubuntu.com/questions/184280/bash-filename-cannot-execute-binary-file)和其他一些 SO 问题）我尝试运行的 java 文件确实在 Ubuntu 12.04 上是可执行的。

```
$ file ORA/include/OraFiles/bin/ora
ORA/include/OraFiles/bin/ora: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped 
```

但是当我尝试运行它时

```
$ ORA/ora.sh -measures ORA/include/OraFiles/xml/ora_xml_measures.xml -script junkin.xml -log 1999-progress.log
Exception in thread "main" java.lang.NoClassDefFoundError: edu/cmu/casos/OraUI/controller/OraMain
Caused by: java.lang.ClassNotFoundException: edu.cmu.casos.OraUI.controller.OraMain
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: edu.cmu.casos.OraUI.controller.OraMain. Program will exit. 
```

或者

```
$ ORA/include/OraFiles/bin/ora -measures ORA/include/OraFiles/xml/ora_xml_measures.xml -script junkin.xml -log 1999-progress.log
ORA/include/OraFiles/bin/ora: error while loading shared libraries: liborautils.so.0: cannot open shared object file: No such file or directory 
```

然而`liborautils.so.0`确实存在：

```
$ ls ORA/include/OraFiles/bin/
construct.exe              libjogl_cg.so               libora.so.0
dynetml2orgahead.exe       libjogl.jnilib              libora.so.0.0.0
gluegen-rt.dll             libjogl.so                  liborautils.so
html_to_ppt_converter.exe  libnetstatplusfog.so        **liborautils.so.0**
j3dcore-ogl.dll            libnetstatplusfog.so.0      liborautils.so.0.0.0
jogl_awt.dll               libnetstatplusfog.so.0.0.0  libtinyxml.so
jogl_cg.dll                libnetstatplus.so           libtinyxml.so.0
jogl.dll                   libnetstatplus.so.0         libtinyxml.so.0.0.0
libcasos_utils.so          libnetstatplus.so.0.0.0     ora
libcasos_utils.so.0        libnewran.so                ora.exe
libcasos_utils.so.0.0.0    libnewran.so.0              ora_jni.dll
libgluegen-rt.jnilib       libnewran.so.0.0.0          ora_log.txt
libgluegen-rt.so           libora_jni.so               orgahead.exe
libjogl_awt.jnilib         libora_jni.so.0             orgahead_perf.exe
libjogl_awt.so             libora_jni.so.0.0.0
libjogl_cg.jnilib          libora.so 
```

如何让 Java 看到它的存在？我正在尝试运行`ng-nailgun`，但[nailgun quickstart](http://www.martiansoftware.com/nailgun/quickstart.html)上的说明似乎与 Ubuntu 无关`sudo apt-get install nailgun`。

我安装了`ant`, `nailgun`, 并`maven2`希望他们的依赖项能够安装我需要的任何 java 东西。这是 Ubuntu 12.04.1 的 64 位 EC2 预构建版本。

* * *

**更新：**这是以下内容`ora.sh`：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./include/OraFiles/bin/lib:./include/OraFiles/bin
java -splash:include/OraFiles/images/ORA-splash-screen.png -Xmx1024m -cp ora.jar:lib/jfreechart-1.0.13.jar:lib/jfreechart-1.0.13-swt.jar:lib/TableLayout.jar:lib/jcommon-1.0.9.jar:lib/httpcore-nio-4.0-beta3.jar:lib/j3dcore.jar:lib/httpcore-4.0-beta3.jar:lib/jung.jar:lib/twitter4j-1.1.7.jar:lib/jcalendar.jar:lib/rssutils.jar:lib/omj3d.jar:lib/json-1.0.jar:lib/commons-collections-3.1.jar:lib/jsi-generics.jar:lib/opencsv-1.7.jar:lib/trove-2.0.4.jar:lib/xml-writer.jar:lib/commons-logging-api-1.1.1.jar:lib/junit.jar:lib/jts-1.7-generics.jar:lib/casosparser.jar:lib/jgraphlayout.jar:lib/htmlparser.jar:lib/facebook-util-1.8-final.jar:lib/j3d-vrml97.jar:lib/omcorba.jar:lib/ant-launcher.jar:lib/colt.jar:lib/wwj/worldwind-ora.jar:lib/freehep/freehep-graphics2d-2.0.jar:lib/gt2-2.3.3/gt2-widgets-swing-2.3.3.jar:lib/gt2-2.3.3/batik-svggen-1.6.jar:lib/gt2-2.3.3/spatialdb-0.1.jar:lib/gt2-2.3.3/velocity-1.4.jar:lib/gt2-2.3.3/gt2-go-2.3.3.jar:lib/gt2-2.3.3/jsr108-0.01.jar:lib/gt2-2.3.3/db2jcc_dummy-8.2.1.jar:lib/gt2-2.3.3/gt2-postgis-2.3.3.jar:lib/gt2-2.3.3/gt2-xml-gml3-2.3.3.jar:lib/gt2-2.3.3/gt2-xml-2.3.3.jar:lib/gt2-2.3.3/concurrent-1.3.4.jar:lib/gt2-2.3.3/gt2-image-2.3.3.jar:lib/gt2-2.3.3/jaxb-impl-1.3.jar:lib/gt2-2.3.3/gt2-tiger-2.3.3.jar:lib/gt2-2.3.3/imageioext-asciigrid-1.0-rc1.jar:lib/gt2-2.3.3/gt2-api-2.3.3.jar:lib/gt2-2.3.3/gt2-shapefile-2.3.3.jar:lib/gt2-2.3.3/gt2-main-2.3.3.jar:lib/gt2-2.3.3/gt2-validation-2.3.3.jar:lib/gt2-2.3.3/commons-jxpath-1.2.jar:lib/freehep/freehep-graphicsio-svg-2.0.jar:lib/gt2-2.3.3/ecore-2.1.0.jar:lib/gt2-2.3.3/postgis-driver-1.0.jar:lib/gt2-2.3.3/commons-beanutils-1.4.jar:lib/gt2-2.3.3/relaxngDatatype-X.jar:lib/gt2-2.3.3/gt2-db2-2.3.3.jar:lib/gt2-2.3.3/geowidgets-1.0-M1.jar:lib/jai_codec.jar:lib/freehep/freehep-graphicsio-2.0.jar:lib/jogl/jogl.jar:lib/freehep/freehep-io-2.0.1.jar:lib/freehep/freehep-xml-2.0.1.jar:lib/gt2-2.3.3/ant-optional-1.5.1.jar:lib/gt2-2.3.3/gt2-vpf-2.3.3.jar:lib/gt2-2.3.3/gt2-demo-property-2.3.3.jar:lib/gt2-2.3.3/commons-pool-1.3.jar:lib/gt2-2.3.3/gt2-cql-2.3.3.jar:lib/gt2-2.3.3/geoapi-nogenerics-2.1-M2.jar:lib/gt2-2.3.3/gt2-sde-dummy-2.3.3.jar:lib/gt2-2.3.3/vecmath-1.3.1.jar:lib/gt2-2.3.3/velocity-dep-1.4.jar:lib/gt2-2.3.3/gt2-coverage-2.3.3.jar:lib/gt2-2.3.3/batik-util-1.6.jar:lib/gt2-2.3.3/gt2-wms-2.3.3.jar:lib/gt2-2.3.3/jaxb-api-1.3.jar:lib/omsvg.jar:lib/gt2-2.3.3/batik-xml-1.6.jar:lib/gt2-2.3.3/batik-bridge-1.6.jar:lib/gt2-2.3.3/commons-lang-2.1.jar:lib/gt2-2.3.3/gt2-render-2.3.3.jar:lib/gt2-2.3.3/batik-dom-1.6.jar:lib/gt2-2.3.3/gt2-graph-2.3.3.jar:lib/gt2-2.3.3/gt2-epsg-hsql-2.3.3.jar:lib/gt2-2.3.3/gt2-indexed-shapefile-2.3.3.jar:lib/gt2-2.3.3/jlfgr-1.0.jar:lib/gt2-2.3.3/gt2-hsql-2.3.3.jar:lib/java-getopt-1.0.13.jar:lib/gt2-2.3.3/batik-svg-dom-1.6.jar:lib/gt2-2.3.3/common-2.1.0.jar:lib/gt2-2.3.3/gt2-geotiff-2.3.3.jar:lib/toolkits_1-2-0.jar:lib/milStd2525_png.jar:lib/j3dutils.jar:lib/JAXWS2.1.3-20071218.jar:lib/Jama-1.0.1.jar:lib/commons-codec-1.3.jar:lib/gt2-2.3.3/gt2-imagemosaic-2.3.3.jar:lib/iText-2.1.0.jar:lib/commons-math-1.2.jar:lib/gt2-2.3.3/postgresql-8.1-407.jdbc3.jar:lib/freehep/freehep-util-2.0.1.jar:lib/idw-1.5.0/idw.jar:lib/gt2-2.3.3/batik-awt-util-1.6.jar:lib/gt2-2.3.3/gt2-gtopo30-2.3.3.jar:lib/gt2-2.3.3/gt2-wfs-2.3.3.jar:lib/gt2-2.3.3/picocontainer-1.2.jar:lib/gt2-2.3.3/gt2-arcgrid-2.3.3.jar:lib/gt2-2.3.3/gt2-mysql-2.3.3.jar:lib/gt2-2.3.3/gt2-openoffice-2.3.3.jar:lib/gt2-2.3.3/batik-ext-1.6.jar:lib/gt2-2.3.3/gt2-oracle-spatial-2.3.3.jar:lib/gt2-2.3.3/batik-gvt-1.6.jar:lib/gt2-2.3.3/gt2-svgsupport-2.3.3.jar:lib/svgSalamander-tiny.jar:lib/jhall.jar:lib/gt2-2.3.3/batik-css-1.6.jar:lib/gt2-2.3.3/gt2-mappane-2.3.3.jar:lib/gt2-2.3.3/gt2-demo-mappane-2.3.3.jar:lib/gt2-2.3.3/gt2-directory-2.3.3.jar:lib/gt2-2.3.3/gt2-geomedia-2.3.3.jar:lib/activation.jar:lib/commons-logging-1.1.1.jar:lib/gt2-2.3.3/gt2-mif-2.3.3.jar:lib/openmap-4.6.5.jar:lib/gt2-2.3.3/gt2-xml-filter-2.3.3.jar:lib/httpmime-4.0-beta2.jar:lib/gt2-2.3.3/junit-3.8.1.jar:lib/jai_core.jar:lib/gt2-2.3.3/xml-apis-1.0.b2.jar:lib/mail.jar:lib/gt2-2.3.3/hsqldb-1.8.0.1.jar:lib/jogl/gluegen-rt.jar:lib/gt2-2.3.3/commons-cli-2.0-gt2-pre1.jar:lib/gt2-2.3.3/commons-io-1.2.jar:lib/gt2-2.3.3/xsd-2.1.1.jar:lib/gt2-2.3.3/gt2-demo-data-2.3.3.jar:lib/gt2-2.3.3/batik-transcoder-1.6.jar:lib/javaml-0.0.12.jar:lib/gt2-2.3.3/gt2-epsg-access-2.3.3.jar:lib/gt2-2.3.3/jta-1.0.1B.jar:lib/gt2-2.3.3/gt2-epsg-postgresql-2.3.3.jar:lib/gt2-2.3.3/gt2-referencing-2.3.3.jar:lib/freehep/freehep-graphicsio-pdf-2.0.jar:lib/gt2-2.3.3/gt2-brewer-2.3.3.jar:lib/gt2-2.3.3/xercesImpl-2.7.1.jar:lib/commons-httpclient-3.1.jar:lib/gt2-2.3.3/imageioext-customstreams-1.0-rc1.jar:lib/gt2-2.3.3/jdbc-stdext-2.0.jar:lib/httpclient-4.0-beta2.jar:lib/gt2-2.3.3/jaxb-libs-1.3.jar:lib/gt2-2.3.3/gt2-imagepyramid-2.3.3.jar:lib/gt2-2.3.3/batik-script-1.6.jar:lib/gt2-2.3.3/xsdlib-20050614.jar:lib/facebook-java-api-1.8-final.jar:lib/gt2-2.3.3/gt2-arcsde-2.3.3.jar:lib/gt2-2.3.3/gt2-coveragetools-2.3.3.jar:lib/MDateSelector14-00347.jar:lib/rome-1.0.jar:lib/gt2-2.3.3/gt2-shapefile-renderer-2.3.3.jar:lib/gt2-2.3.3/gt2-epsg-wkt-2.3.3.jar:lib/gt2-2.3.3/gt2-gml-2.3.3.jar:lib/gt2-2.3.3/log4j-1.2.6.jar:lib/gt2-2.3.3/xml-apis-xerces-2.7.1.jar:lib/gt2-2.3.3/batik-parser-1.6.jar:lib/gt2-2.3.3/gt2-xml-gml2-2.3.3.jar:lib/gt2-2.3.3/gt2-referencing3D-2.3.3.jar:lib/jdom-1.1.jar:lib/jide-oss-2.8.8.jar edu.cmu.casos.OraUI.controller.OraMain 
```

# c++ - 选择枢轴进行快速排序的功能

> ID：14726704
> 
> 赞同：-1
> 
> 时间：2013-02-06T10:26:42.543
> 
> 标签：c++, sorting

```
int choose_pivot(int lo, int hi){
   int mid = ((hi-lo)/2)+1;
   if((arr[hi]<arr[lo])^(arr[hi]<arr[mid])){
      return hi;
   }
   else if((arr[lo]<arr[hi])^(arr[lo]<arr[mid])){
      return lo;
   }
   else{
      return mid;
   }
} 
```

此函数应按如下方式选择枢轴。考虑给定数组的第一个、中间和最后一个元素。（如果数组的长度为奇数，应该清楚“中间”元素是什么；对于偶数长度为 2k 的数组，使用第 k 个元素作为“中间”元素。确定这三个元素中的哪一个是中值。返回它的价值。

这个函数有什么问题不能让它发挥它的作用吗？我是否错过了一些函数没有给出预期结果的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:37:06.307

如果您尝试从 coursera.org 解决任务，则需要使用

```
int mid = ((hi-lo)/2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:48:05.490

有一件事我认为是致命错误：没有关于前置条件的文档。特别是，是否`lo == hi`合法地调用它。（如果它是合法的，则代码具有未定义的行为。） 并且`lo`代表`hi` 什么？在我发现工作得很好的通常的 C++ 约定下，`lo`它将是包容性和`hi`排他性的。但同样，你没有告诉我们，尽管知道我们是否要判断代码的正确性很重要。（你这样做的事实`arr[hi]`让我觉得你已经采用了一些不寻常的惯例，即两端都包容。）

`!=`没有这些信息，除了进行风格评论（例如，使用而不是`^`比较结果，使用`return`with`?:`而不是`if ... else if ... else`等）之外，就不可能做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:33:01.883

1.  您可能应该使用`!=`而不是`^`比较不等式的布尔结果。

2.  根据文字描述，您应该返回`arr[hi]`而不是`hi`（和类似的`mid`, `lo`）。

# c# - 排序具有多个属性的列表

> ID：14726709
> 
> 赞同：1
> 
> 时间：2013-02-06T10:26:59.220
> 
> 标签：c#, list, visual-studio-2008, sorting, .net-2.0

我对在 C# 中排序列表感到很困惑，我已经阅读了不同的排序教程，例如使用列表（排序方法）或使用 IComparable 进行排序，但实际上没有什么能帮助我实现我想要的。

例如，我有一个汽车清单，

```
Car Number

Car Title

and few other properties 
```

现在 Car number 可以是任何双数，也可以是 Nan（null），并且 Car Title 永远不能为 null。

我想以一种首先按车号排序的方式对列表进行排序，如果它们不适用于汽车，则使用其标题对其余汽车进行排序。

所以如果我有这样的事情，

```
Car 1      100.0 (car number)                  BMW x6 (car name)
Car 2      (there isn't any car number)        Mercedies A class (car name)
Car 3      99.0                                Alpha Romeo
Car 4      1.2                                 Jeep
Car 5      4.1                                 Victoria Marshall 1933
Car 6      no number                           Vauxhal 
```

输出我希望我的列表类被排序为

```
Car 4, Car 5, Car 3, Car 1, Car 2, Car 6 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:30:14.150

尝试类似的东西

```
var lst = new List<Cars>()

//add cars to list

lst = lst.Orderby(c => c.CarNumber).ToList(); 
```

你可以像这样扩展它：

```
lst = lst.Orderby(c => c.CarNumber).ThenBy(c=> c.Title).ToList(); 
```

或者

您实现 IComparable 以便它按照您想要的方式排序：

```
public class Car : IComparable<Car> 
{ 
    public string Number { get; set; } 

    public int CompareTo(Car obj) 
    { 
        return obj.Number.CompareTo(Number); 
    } 
} 
```

# c# - 如何在 MVC3 中使用 ExpressionBuilder

> ID：14726710
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:03.483
> 
> 标签：c#, asp.net-mvc-3, razor, expressionbuilder

MVC3 Razor 是否支持 ExpressionBuilder ？

任何人都可以提供如何将 ExpressionBuilder 与 MVC3 Razor 应用程序一起使用的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:46:23.670

不，它们不受支持，它是为 Web 控件构建的。这是 WebForms 的一部分。

# android - 如何在不扩展 Fragment 中的 BaseAdapter 的情况下为 gridview 单元格设置替代颜色

> ID：14726713
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:10.117
> 
> 标签：android, android-gridview

我想在我填充了 arrayadapter 项的 gridview 的备用单元格上设置颜色，我也不想扩展 BaseAdapter 类：

**我用过的代码：**

```
 public class Fragment2 extends Fragment {
    public final static String EXTRA_MESSAGE = "com.MESSAGE";
   TextView selection;
      public int idToModify;
    DataManipulator dm;
   private GridView gridView;
    public static ArrayList<String> ArrayName = new ArrayList<String>();
    List<Object[]> names2 = null;
 String[] stg1;
     String[] stgid;

  @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
   Bundle savedInstanceState) {
        return inflater.inflate(R.layout.frag2, container, false);
     }

   @Override
  public void onStart() {
  super.onStart();

   dm = new DataManipulator(getActivity());
   names2 = dm.selectAll();

   stg1 = new String[names2.size()];
   stgid = new String[names2.size()];
   int x = 0;

   for (Object[] name : names2) {
       stgid[x] = (String) name[0];
       stg1[x] = (String) name[1] + " - " + (String) name[2] + " - "
               + (String) name[3] + " - " + (String) name[4];
       x++;
   }

   gridView = (GridView) getView().findViewById(R.id.gridView1);

   ArrayAdapter<String> adapter = new ArrayAdapter<String>(
           getActivity(), android.R.layout.simple_list_item_1, stg1);

   gridView.setAdapter(adapter);

 }
}
 } 
```

我也尝试扩展 Base 适配器类并成功，但我只是用 arrayadapter 填充 gridview 并希望在不扩展代码的情况下为单元格设置颜色。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:47:59.493

而不是 android.R.layout.simple_list_item_1 应该传递您的自定义布局。

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            getActivity(), R.layout.custom_layout, stg1); 
```

custom_layout.xml 的样子

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="#ef0"
  /> 
```

# ios - 从按钮到 WebView XCODE 4.5 的 URL 列表

> ID：14726714
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:10.543
> 
> 标签：ios, xcode, url, webview

早上好。

我正在尝试开发一个小应用程序，我需要一些帮助...

我需要将 URL 从按钮传递到 WebView。我有 4 个按钮，当我选择 BT1 时，它会打开一个 url=www.google.com 的 WebView，当我选择 BT2 时，它会打开相同的 webview，但使用不同的 url (www.apple.com)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:33:21.027

不要忘记将操作分配给按钮并在 ViewController 中实现 UIWebViewDelegate ...

```
-(IBAction)button1Clicked:(id)sender{
    [self loadWebViewWithURL:@"http://www.google.com"];
    }

    -(IBAction)button2Clicked:(id)sender{
    [self loadWebViewWithURL:@"http://www.apple.com"];
    }

    -(IBAction)button3Clicked:(id)sender{
    [self loadWebViewWithURL:@"http://www.yahoo.com"];
    }

    -(IBAction)button4Clicked:(id)sender{
    [self loadWebViewWithURL:@"http://www.microsoft.com"];
    }

    -(void)loadWebViewWithURL:(NSString*)urlstr{

        NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:urlstr] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30.0f];
        [myWebView loadRequest:request];
    } 
```

# c - 如果已经有一个函数，如何防止线程进入函数？

> ID：14726715
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:14.003
> 
> 标签：c, multithreading, pthreads

我有一个函数 ( `my_func`)，它可以由具有多个线程的程序调用。而且我不希望这个函数同时执行两次或更多次。因为我在记忆中写作，我不希望他们同时写作。

```
void my_func()
{
    // I want a line that blocks the execution if one is still pending
    /* the code here */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:28:00.350

在函数开始时使用互斥锁并在退出函数之前使用互斥锁解锁

```
pthread_mutex_t my_func_mutex = PTHREAD_MUTEX_INITIALIZER;

 void my_func()
    {
        pthread_mutex_lock(&my_func_mutex); // at the beginning of your function
        .....
        pthread_mutex_unlock(&my_func_mutex); // do not forget to unlock your mutex before going out from your function
    } 
```

如果你愿意，你可以用其他方式来做：

```
pthread_mutex_t my_func_mutex = PTHREAD_MUTEX_INITIALIZER;
#define MY_FUNC_MACRO() \
    do { \
        pthread_mutex_lock(&my_func_mutex); \
        my_func(); \
        pthread_mutex_unlock(&my_func_mutex); \
    } while(0)

 void my_func()
    {
        .....
    } 
```

在你的代码中你调用`MY_FUNC_MACRO()`而不是`my_func()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:31:53.173

在写入同一位置时避免冲突的一种方法是确保按顺序完成写入。一种方法是使用互斥锁

```
int a = functionThatTakesALongTime();
pthread_mutex_lock(&mymutex);
sum+=a;
pthread_mutex_unlock(&mymutex); 
```

# qt - 如何在 BB 级联中添加自定义字体 (.TTF)？

> ID：14726717
> 
> 赞同：1
> 
> 时间：2013-02-06T10:27:18.200
> 
> 标签：qt, blackberry-10, blackberry-cascades

我正在开发一个**应用程序**，我需要在其中有一个带有我的自定义字体的标签。我找不到将`.ttf`文件加载到 qml 中的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:53:25.740

目前不支持 cascades/Qt 框架，它将在以后的版本中支持。请参考级联路线图 [https://developer.blackberry.com/cascades/download/roadmap/](https://developer.blackberry.com/cascades/download/roadmap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:55:06.803

将它放入 QML 可能会很棘手，使用字体的推荐方法是：[QFontDatabase::addApplicationFont](http://qt-project.org/doc/qt-4.8/qfontdatabase.html#addApplicationFont)但我不确定这是否适用于 Blackberry，因为它在各种平台上确实存在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T06:24:08.437

两种解决方案都是错误的，我使用的正确方法是创建一个 weview 并在 webview 中添加字体，然后您可以在 webview 和 qml 之间进行 2 路通信。当您在卡片的文本中添加文字时，请查看 funkypigeon 应用程序。

# signalr - SignalR - 找不到类型或命名空间名称“Hub”

> ID：14726718
> 
> 赞同：2
> 
> 时间：2013-02-06T10:27:23.533
> 
> 标签：signalr, signalr-hub

我是 SignalR 库的新手。我在 VS2010 中创建了一个新的 Web 项目，然后在包管理器控制台中执行以下命令来设置 SignalR 包。

```
PM> Install-Package Microsoft.Aspnet.SignalR -pre

So it downloaded all the necessary files into the application.
----------
Successfully installed 'Microsoft.AspNet.SignalR 1.0.0-rc2'.
Successfully added 'jQuery 1.6.4' to demo.
Successfully added 'Microsoft.AspNet.SignalR.JS 1.0.0-rc2' to demo.
Successfully added 'Newtonsoft.Json 4.5.11' to demo.
Successfully added 'Microsoft.AspNet.SignalR.Core 1.0.0-rc2' to demo.
Successfully added 'Owin 1.0' to demo.
Successfully added 'Microsoft.AspNet.SignalR.Owin 1.0.0-rc2' to demo.
Successfully added 'Microsoft.Web.Infrastructure 1.0.0.0' to demo.
Successfully added 'Microsoft.Owin.Host.SystemWeb 1.0.0-rc2' to demo.
Successfully added 'Microsoft.AspNet.SignalR.SystemWeb 1.0.0-rc2' to demo.
Successfully added 'Microsoft.AspNet.SignalR 1.0.0-rc2' to demo.
---------- 
```

现在我添加了一个名为`LetsHub.cs`.

在该文件中，我编写了以下代码，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Microsoft.AspNet.SignalR.Hubs;

namespace demo.Hubs
{
  [HubName("chatHub")]
  public class LetsChat : Hub
  {
      public void SendMsg(string Message)
      {
         Clients.All.addMessage(Message);
      }
  }
} 
```

我无法继承这个`Hub`类。

`Type or Namespace name Hub cound not be found ( are you missing using directive or assemblr reference ? ).`

我在 VS 2012 上也面临同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:25:01.127

Hub 类已移至 RC2 中的不同命名空间。请更改为 Microsoft.AspNet.SignalR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T03:04:54.380

更改`public class LetsChat : Hub`为

```
public class LetsChat : Microsoft.AspNet.SignalR.Hub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-14T03:26:24.697

接受的答案对我不起作用。在我的 .NET Core 3.1 中，这是我的代码：

```
using System.Threading.Tasks;
using Microsoft.AspNetCore.SignalR;

namespace SignalRChat.Hubs
{
    public class ChatHub : Hub
    {
        public async Task SendMessage(string user, string message)
        {
            await Clients.All.SendAsync("ReceiveMessage", user, message).ConfigureAwait(false);
        }
    }
} 
```

# jquery-mobile - 将我的 Spring 应用程序重定向到移动设备上的不同域时出错

> ID：14726723
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:34.703
> 
> 标签：jquery-mobile, spring-mvc, cross-domain

我正在开发一个在移动设备和网络上运行的 Spring 应用程序。在 Web 上一切运行良好，但在移动设备上，当表单发布时，它会命中控制器并且控制器会重定向到其他应用程序。

```
@RequestMapping(value = "/common", method = RequestMethod.GET)
public String showLandingPage(HttpServletRequest req, HttpServletResponse response, Model model) {
logger.debug("Received request to set partner info");
Device currentDevice                = DeviceUtils.getCurrentDevice(req);
setCookies(response);
Properties props = new Properties();
try {
    props.load(getClass().getClassLoader().getResourceAsStream( "sampleApp.properties"));
} catch (IOException e) {
    logger.fatal(new StringBuilder("MainController : setCookies() : Error while reading sampleApp.properties "+e));
}catch (Exception e) {
    logger.fatal(new StringBuilder("MainController : setCookies() : Error while reading sampleApp.properties "+e));
}
if(currentDevice.isMobile() || currentDevice.isTablet()){
    return "redirect:"+props.getProperty("popcorn-mobile-url");
} else {               
    return "redirect:"+props.getProperty("popcorn-web-url");
}
} 
```

当控件转到重定向位置时，我在屏幕上看到“错误加载页面”。

在 JSP 中，我使用以下 jQuery 库。

```
 <script src="${pageContext.request.contextPath}/js/mobile/mobile-config.js"></script> 
    <script src="${pageContext.request.contextPath}/js/mobile/jquery.mobile-1.2.0.min.js"></script>
    <script src="${pageContext.request.contextPath}/js/mobile/plugins.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:31:49.250

我会使用一个设备拦截器，如下所示：

```
public class DeviceInterceptor extends HandlerInterceptorAdapter {    
private final DeviceResolver deviceResolver;

    private Device device;

    /**
     * Create a device resolving {@link HandlerInterceptor} that defaults to a
     * {@link LiteDeviceResolver} implementation.
     */
    public DeviceInterceptor() {
        this(new LiteDeviceResolver());
    }

    public DeviceInterceptor(DeviceResolver deviceResolver) {
        this.deviceResolver = deviceResolver;
    }

    public boolean preHandle(HttpServletRequest request, HttpServletResponse response,
            Object handler) throws Exception    {
        device = deviceResolver.resolveDevice(request);
        request.setAttribute(DeviceUtils.CURRENT_DEVICE_ATTRIBUTE, device);
        return true;
    }

    public void postHandle(HttpServletRequest request, HttpServletResponse response,
            Object handler, ModelAndView modelAndView) throws Exception {
    if (device.isMobile()) {
            modelAndView.setViewName("/mobile/" + modelAndView.getViewName());
        }else {
            modelAndView.setViewName("/jsp/" + modelAndView.getViewName());
        }           
    } 
```

# java - 获取子文档 mongodb 中数组的值

> ID：14726724
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:34.443
> 
> 标签：java, mongodb, hadoop

我正在做一个应用程序来处理存储在`mongoDB`using中的一些数据`Hadoop`。我正在编写程序`java`。

问题是我有一个包含数组的子文档，我想获取数组的一个属性的值。我会举一个例子来更清楚地看到它。

```
 "entities" : {
            "hashtags" : [
                    {
                            "**text**" : "whatever",
                            "indices" : [
                                    59,
                                    69
                            ]
                    },
                    {
                            "**text**" : "whatever",
                            "indices" : [
                                    82,
                                    95
                            ]
                    }
            ],
            "urls" : [ ],
            "user_mentions" : [ ]
    }, 
```

文本的值是我要处理的值。

所以我用Java开发了一个程序，它在映射器类中报告了以下错误：

```
java.lang.ClassCastException: com.mongodb.BasicDBObject cannot be cast to java.lang.String
    at HashTagsMapper.map(HashTagsMapper.java:27)
    at HashTagsMapper.map(HashTagsMapper.java:18)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

这是映射器类 -->

```
public class HashTagsMapper extends Mapper<Object, BSONObject, Text, IntWritable>
{   
    public void map(Object key, BSONObject value, Context context) throws IOException, InterruptedException
    {

        ArrayList <String> name = new ArrayList<String>();
        BSONObject entities = (BSONObject) value.get("entities");
        BasicDBList hashtags = (BasicDBList) entities.get("hashtags");
        for(int index = 0; index < hashtags.size(); index++){
            name.add((String) hashtags.get(index));
        }
        try{
           FileWriter fw = new FileWriter("/home/jonrodriguez/Hashtags.txt");
           PrintWriter escribirListaRedundantes = new PrintWriter(fw);

           escribirListaRedundantes.println(name);

           fw.close();

        }

           catch(java.io.IOException ioex){}
        for(int i = 0; i < name.size(); i++){
            context.write(new Text(name.get(i)), new IntWritable(1));
        }
    } 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:51:14.183

问题是类转换异常。你为什么不试着写不

```
(String)hashtags.get(index) 
```

， 但

```
hashtags.get(index).toString() 
```

问题可能是 basicDbList 是 BDBObjects 列表，您不能将父级强制转换为子级。

# django - Python/Django django-registration 添加一个额外的字段

> ID：14726725
> 
> 赞同：6
> 
> 时间：2013-02-06T10:27:36.840
> 
> 标签：django, django-forms, django-registration

我已经阅读了很多关于如何在使用 Django 注册时添加额外字段的内容，例如[这里](https://stackoverflow.com/questions/4565814/django-user-userprofile-and-admin)、[这里](https://stackoverflow.com/questions/44109/extending-the-user-model-with-custom-fields-in-django/965883#965883)和[这里](https://stackoverflow.com/questions/4565814/django-user-userprofile-and-admin)。代码片段是：forms.py（来自注册应用程序）

```
class RegistrationForm(forms.Form):
    username = forms.RegexField(regex=r'^\w+$', max_length=30, widget=forms.TextInput(attrs=attrs_dict), label=_("Username"), error_messages={ 'invalid': _("This value must contain only letters, numbers and underscores.") })
    email = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict, maxlength=75)), label=_("Email"))
    password1=forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False), label=_("Password"))
    institute=forms.CharField(max_length=50) #This is the new!
    password2 = forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False), label=_("Password (again)"))
    captcha = CaptchaField() 
```

我使用 django 的注册保存方法，在默认后端：

```
def register(self, request, **kwargs):
    username, email, password = kwargs['username'], kwargs['email'], kwargs['password1']
    if Site._meta.installed:
        site = Site.objects.get_current()
    else:
        site = RequestSite(request)
    new_user = RegistrationProfile.objects.create_inactive_user(username, email,
                                                                password, site)

    signals.user_registered.send(sender=self.__class__,
                                 user=new_user,
                                 request=request)
    return new_user 
```

在 models.py 我创建了一个新类：

```
class UserProfile(models.Model):  
    user = models.OneToOneField(User)
    institute=models.CharField(max_length=50)
def create_user_profile(sender, instance, created, **kwargs):  
    if created:  
        profile, created = UserProfile.objects.get_or_create(user=instance)
post_save.connect(create_user_profile, sender=User) 
```

在 admin.py 中：

```
admin.site.unregister(User)
class UserProfileInline(admin.StackedInline):
    model = UserProfile
class UserProfileAdmin(UserAdmin):
    inlines = [ UserProfileInline, ]
admin.site.register(User, UserProfileAdmin) 
```

我也没有改变任何东西。当我渲染表单时，我可以看到我添加的 Institute Field。当我在管理站点中时，我可以看到每个用户的用户配置文件。但是，当我创建新用户时，没有保存任何内容，而用户的其他详细信息通常会被保存。我认为我需要某种配置，但在哪里？也许在 Django-registration 应用程序的文件中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T16:21:27.123

我已经找到了解决这个问题的方法，我会把它贴在这里以防有人可以使用它。这很简单，我想。

**步骤 1**在 models.py 中添加一个新模型，这将是一个配置文件：

```
#models.py
class user_profile(models.Model):
     user=models.ForeignKey(User, unique=True)
     institution=models.CharField(max_length=200)

     def __unicode__(self):
         return u'%s %s' % (self.user, self.institution) 
```

**步骤 2**创建将使用此模型的表单：

```
#forms.py
from registration.forms import RegistrationForm
from django.forms import ModelForm
from Test.models import user_profile

class UserRegForm(RegistrationForm):
    institution=forms.CharField(max_length=200) 
```

**步骤 3**创建 ragbackend.py 并定义数据的保存方式：

```
from Test.models import user_profile
from forms import *

def user_created(sender, user, request, **kwargs):
    form = UserRegForm(request.POST)
    data = user_profile(user=user)
    data.institution = form.data["institution"]
    data.save()

from registration.signals import user_registered
user_registered.connect(user_created) 
```

**第 4 步**转到 urls.py 并进行以下更改：

```
import regbackend 
from registration.views import register

url(r'^accounts/register/$', register, {'backend': 'registration.backends.default.DefaultBackend','form_class': UserRegForm}, name='registration_register'),
(r'^accounts/', include('registration.urls')), 
```

请注意，您必须按该顺序放置 URL。很容易理解为什么。

**第 5 步**现在一切正常，但您无法在管理站点中看到信息。所以你必须去 admin.py 并添加：

```
#admin.py
from django.contrib.auth.models import User
from Test.models import user_profile
admin.site.unregister(User)
class UserProfileInline(admin.StackedInline):
    model = user_profile

class UserProfileAdmin(UserAdmin):
    inlines = [ UserProfileInline, ]
admin.site.register(User, UserProfileAdmin) 
```

就是这样。不要忘记`syncdb`之前`runserver`。我希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-03T20:25:51.060

除了 Garrett 的回答之外，我在 django-registration 0.8 版中遇到了“无法导入名称注册”错误。我相信这是因为基于类的视图，所以`urls.py`相应地更新：

```
from django.conf.urls import patterns, include, url
from registration.backends.default.views import RegistrationView
from abby.apps.accounts.forms import UserRegForm

urlpatterns = patterns('',
    url(r'^register/$', RegistrationView.as_view(form_class=UserRegForm)),
) 
```

# javascript - 将值从一页发送到另一页

> ID：14726727
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:39.847
> 
> 标签：javascript, html

我有 2 页说 index.html 和 2ndPage.html。index.html 有两个文本框和一个按钮。现在我想在文本框中输入一些数据并在 2ndpage.html 中接收数据。我只想使用 javascript。不想使用查询字符串。仅发布或获取方法。是否可以？请帮助我或指导我如何在 javascript/jquery 中从一页到另一页发送和接收数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:32:13.307

好吧，使用 javascript 或 jquery 你可以做到这一点。检查 jQuery 的[AJAX](http://api.jquery.com/jQuery.ajax/)功能。否则，请学习评论中已经提到的 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:36:49.613

使用 localStorage 或 sessionStorage 你可以做到这一点。这是一个链接，它将对您有所帮助。我只是将几个 CSS 属性从一页带到另一页。但您也可以获取输入值。 [将 css 属性从一个 html 页面转移到另一个页面](https://stackoverflow.com/questions/13683248/taking-css-property-from-one-html-page-to-another-page)

或者，如果您还要处理旧浏览器，那么 javascript Location 对象就是要走的路。

# javascript - Javascript / jQuery - 如何将媒体和图像数据转换为二进制文本格式

> ID：14726729
> 
> 赞同：0
> 
> 时间：2013-02-06T10:27:41.357
> 
> 标签：javascript, jquery

我需要通过 json 发送图像/媒体，因为需要将其转换为文本格式。如何通过 jQuery/Javascript 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:34:24.983

您可以在这篇文章中找到答案[get image data in javascript](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

```
function getBase64Image(img) {
    // Create an empty canvas element
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;

    // Copy the image contents to the canvas
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);

    // Get the data-URL formatted image
    // Firefox supports PNG and JPEG. You could check img.src to guess the
    // original format, but be aware the using "image/jpg" will re-encode the image.
    var dataURL = canvas.toDataURL("image/png");

    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
} 
```

您需要将`img`标签传递给此函数。有关更多详细信息，请参阅[在 javascript 中将图像转换为二进制数据](https://stackoverflow.com/questions/5420384/convert-an-image-into-binary-data-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:54:20.733

有几次我读到 jQuery 不提供下载二进制数据并将其作为字符串传递给 JavaScript 的功能。然后我遇到了[这个问题](https://stackoverflow.com/q/7370943/483113)。这让我开始思考，我写了一个`$.ajax()`看起来像这样的包装器（是的，它被简化以显示主要部分）：

```
ajaxWrapper = function(url, dataType, callback, headers) {
    return $.ajax({
        url: url,
        dataType: dataType == "binary" ? "text" : dataType,
        mimeType: dataType == "binary" ? "text/plain; charset=x-user-defined" : undefined,
        headers: headers || {}
    }).done(function(data, status, jqXHR) {
        callback(data, status, jqXHR);
    });
} 
```

然后，如果您正在处理 Unicode，则回调包含以下行：

```
data = btoa(unescape(encodeURIComponent(data))); 
```

或者简单地说

```
data = btoa(data); 
```

换句话说，如果您通读[$.ajax() 的文档，](http://api.jquery.com/jQuery.ajax/)您只需添加一个`dataType`“二进制文件”。

*请注意，我使用 jQuery 1.7.1，但我不明白为什么它也不应该在以后的版本中工作。*

# php - 最大执行时间不变

> ID：14726737
> 
> 赞同：0
> 
> 时间：2013-02-06T10:28:02.033
> 
> 标签：php

我的项目中有两个文件，*php.ini*和*php5.ini*

`php.ini`包含`set_time_limit`

和*php5.ini*包含`max_execution_time = 60`，但我已将其更改为`max_execution_time = 500`

但是当我打开 phpinfo.php 时，它仍然显示 max_execution_time = 60

我应该写什么

我也试过`set_time_limit(500)`我的 php.ini

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:35:15.367

不建议在服务器范围内将**max_execution_time**更改为更高的值。*只需在调用phpinfo()*或您需要的代码之前使用以下代码。

```
ini_set ( 'max_execution_time', 5000); 
```

**set_time_limit()**只是重置时间限制，您需要 max_execution_time。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:34:35.267

一般来说，我认为`set_time_limit(60)`在实际需要更多时间的脚本中使用或其他时间量是一个更好的主意。该命令将时间限制重置为其参数。它在 php.ini 中不起作用。

另外，您是否在更改 php.ini 后重新启动了 Web 服务器？否则您的更改可能尚未生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:33:56.657

使用`phpinfo();`您加载的配置文件搜索并在该文件中进行更改。

[否则，您可以使用set_time_limit](http://www.php.net/manual/en/function.set-time-limit.php)函数更改您的时间限制。

# javascript - IE Javascript SCRIPT5007

> ID：14726740
> 
> 赞同：0
> 
> 时间：2013-02-06T10:28:12.847
> 
> 标签：javascript, json, internet-explorer

尝试在 IE 中删除产品时开始出现此错误。我已经修复了问题的第一部分，即 JSON 未定义，所以我 src'd 了一个 json2.js。但现在我收到了 SCRIPT5007 错误。将不胜感激一些帮助！

```
function ProductDelete(MenuboardProducts) {
            $.ajax({
                url: "ProductBooks.aspx/DeleteProduct",
                type: "POST",
                data: JSON.stringify({ MenuboardProduct: MenuboardProducts }),
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                success: function(ret) {
                    if (ret.d) {
                        alert(ret.d);
                        $find("ctl00_ContentPlaceHolder1_RadAjaxPanel1").ajaxRequest();
                    }
                }
            });
        } 
```

错误 ::: SCRIPT5007: 属性“ProductDelete”的值为 null 或未定义，不是函数对象

这是后端代码：

```
OutID = Convert.ToInt32(drpOutletL.SelectedValue);
                        var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
                        var js = serializer.Serialize(lstMenuboardProductsInUse);
                        ScriptManager.RegisterStartupScript(this, this.GetType(),
                            "Delete", "if(confirm('" + sb.ToString() + "')){ProductDelete(" + js + ");}", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:23:56.357

解决它。去掉 Json 引用，在主文件中将我的元兼容性设置为 ie=7, ie=9。

# python - Python 包和导入 - 没有名为 xy 的模块

> ID：14726741
> 
> 赞同：1
> 
> 时间：2013-02-06T10:28:13.583
> 
> 标签：python, package

我正在尝试像这样构建我的项目

```
app/
__init__.py
web/
    __init__.py
    web.py
database/
    __init__.py
    db.py 
```

我只想从 to 导入几个类`db.py`，`web.py`但只`ImportError: No module named`抛出一个。到目前为止我尝试了什么

网页.py

```
from __future__ import absolute_import
    from database.db import ClassA
OR

from __future__ import absolute_import
from app.database.db import ClassA

OR

from __future__ import absolute_import
import database import ClassA 
```

我错过了什么？

// 编辑：

```
db/__init __.py
from db import ClassA 
```

其他`__init__.py`都是空的。我想我在这方面做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:31:35.380

它应该是

```
from ..database import db 
```

您还可以通过`web.py`从项目的根目录运行来检查导入

```
python -m app.web.web 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:36:54.780

假设：

```
C:\pytest\
   test.py
   \database\
       db.py
       __init__.py
   \subfolder\
       __init__.py
       coolios.py 
```

其中`__init__.py`包含：

```
from db import * 
```

第二个`__init__.py`包含：

```
from coolios import * 
```

并`db.py`包含：

```
class WHAM():
    def __init__(self):
        print 'You import me!' 
```

并`coolios.py`包含：

```
from database import *

class ganster():
    def __init__(self):
        WHAM() 
```

并`test.py`包含：

```
from subfolder import ganster
ganster() 
```

它应该工作。

# html - css工具提示方向从右到左

> ID：14726744
> 
> 赞同：1
> 
> 时间：2013-02-06T10:28:19.180
> 
> 标签：html, css

我正在使用下面的代码来显示工具提示。它工作正常。但它是从左到右的方向。我需要从右到左的工具提示。请帮我改变这个方向问题。

```
a.tooltip {outline:none; } a.tooltip strong {line-height:30px;} a.tooltip:hover {text-decoration:none;} a.tooltip span { z-index:10;display:none; padding:14px 20px; margin-top:-30px; margin-left:28px; width:340px; line-height:16px; } a.tooltip:hover span{ display:inline; position:absolute; color:#111; border:1px solid #DCA; background:#fffAF0;} .callout {z-index:20;position:absolute;top:30px;border:0;left:-12px;}

<a href="#" class="tooltip"> Tooltip 
<span> <img class="callout" src="callout.gif" />Testing</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:40:59.550

你有没有试过这样：

```
a.tooltip span {
    direction:rtl;
} 
```

# c# - 在 Linq 中分组以获取更多详细信息

> ID：14726745
> 
> 赞同：0
> 
> 时间：2013-02-06T10:28:19.077
> 
> 标签：c#, linq, entity-framework-4, group-by

我的表格数据为：

```
Fname   Lname   Date          ForeignKey
 A       B      2012-01-01      1
 A       B      2012-11-01      1
 A       B      2013-12-25      1
 C       K      2009-01-01      2
 C       K      2001-11-01      2
 C       K      2011-12-25      2 
```

我的表在 EF 中被称为 ABC 所以我想按外键对它们进行分组，我可以通过使用这个查询来做到这一点，但是现在如何获取每一行的详细信息？

```
var q =  from abc in context.ABC
         group abc by abc.ForeignKey into g
         join efg in context.EFG on g.Key equals efg.AppId
         select new
         {
             MortgId = g.Key,
             TrackingDate = g.Max(val => val.Date),
             Fname=g.?,
             Lname=g.?,
             Sale=efg.SalesAmount
         };
        foreach(var result in q)
        {
         if(result.Fname=="A")
         {
         }
        } 
```

它返回给我的列表。这给了我最大日期的记录，但我想获取这个最大日期的 Fname 和 Lname 的详细信息，但我无法获得任何线索。

**更新：** 结果应该是这样的：

```
Fname   Lname   Date          ForeignKey
 A       B      2013-12-25      1
 C       K      2011-12-25      2 
```

我想获取关于最长日期的详细信息。
**新更新：** 所以我想在 Fname 的基础上进行检查，并且我打了一个问号，即如何获得最大日期结果的 Fname。我希望现在很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:36:11.147

通过降序获取每个组的最大日期的对象，并首先获取：

```
var list = context.ABC.GroupBy(abc => abc.ForeignKey)
        .Select(g => g.OrderByDescending(a => a.Date).First()) 
```

然后您可以轻松获取其他属性：

```
foreach (var abc in list)
{
    var fname = abc.Fname;
    var lname = abc.Lname;
} 
```

# objective-c - 在 stringByAppendingString 中的两个单词之间添加“：”

> ID：14726746
> 
> 赞同：0
> 
> 时间：2013-02-06T10:28:23.837
> 
> 标签：objective-c

当我将它们加在一起时，我需要`:`在 2 个字符串之间添加它们。我找不到简单的方法来做到这一点，我相信有。

```
 NSString *inBase64;
    inBase64=[userName.text stringByAppendingString:idNumber.text]; 
```

我需要：`userName:idNumber`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:38:03.750

另一种方式。当您有很多字符串部分时很有用：

```
NSArray *parts = @[ userName.text, idNumber.text, /* more */ ];
NSString *string = [parts componentsJoinedByString:@":"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:31:37.870

您可以使用 stringWithFormat ...

```
NSString *inBase64 = [NSString stringWithFormat:@"%@:%@", userName.text, idNumber.text]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:31:21.237

而不是`stringByAppendingString:`使用`stringByAppendingFormat:`，像这样：

```
inBase64 = [userName.text stringByAppendingFormat:@":%@", idNumber.text]; 
```

您也可以使用该`[NSString stringWithFormat:]`方法，如下所示：

```
inBase64 = [NSString stringWithFormat:@"%@:%@", userName.text, idNumber.text]; 
```

# javascript - “OOP”-JS - 设置属性等于函数

> ID：14726747
> 
> 赞同：1
> 
> 时间：2013-02-06T10:28:27.227
> 
> 标签：javascript, oop

基本上，我希望“theId”等于“getId”返回的值。但是怎么做？

```
var Quiz = {
   getId : function() {
      var params = 1;
      return params;
   },
   theId : getId(),
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:30:22.280

对象字面量不能引用自身内部的属性/方法，因为在评估对象字面量时，该对象还不存在。您必须分两步进行：

```
var Quiz = {
   getId : function() {
      var params = 1;
      return params;
   }
};
Quiz.theId = Quiz.getId(); 
```

请注意，它设置为当时返回的`theId`任何内容，如果您的实际函数比您的示例更具动态性并且每次调用时可能返回不同的值*，*它不会以某种方式自动更新。`getId()`*`theId`*

 *或者，如果函数在对象之前声明，您可以一次创建两个对象属性，一个是对该函数的引用，另一个是调用它的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:41:46.797

看起来有点像[对象文字声明中的自引用](https://stackoverflow.com/q/4616202/1048572)的副本，但您可以为您的属性使用一个简单的[getter 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide%2FWorking_with_Objects#Defining_getters_and_setters)：

```
var Quiz = {
    get theID() {
        var params = 1;
        return params;
    }
}; 
```*

# c# - 在服务生命周期内执行端口监听

> ID：14726755
> 
> 赞同：1
> 
> 时间：2013-02-06T10:28:37.773
> 
> 标签：c#, .net, wcf

我是 WCF 的初学者。我需要在我的服务中监听特定端口。托管服务（作为 Windows 服务）时应启动侦听。它应该在服务停止时停止。

我已经设法在简单的控制台应用程序中实现无限循环的监听。

有没有办法在服务中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:03:14.923

这应该不是问题，您只需要将它作为 Windows 服务托管。端口应定义为端点地址的一部分。有关更多信息，请点击此链接[http://msdn.microsoft.com/en-us/library/ms733069(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms733069(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:49:13.440

在服务启动时创建一个执行端口侦听的线程，假设我假设您知道如何进行端口侦听。然后在服务结束时调用监听线程的 Thread.Abort 方法。请记住在线程中捕获 ThreadAbortException，因为当线程被杀死时会引发此异常。您需要在此处进行清理，例如关闭端口和任何流读取器/写入器。

# delphi - 检索保存在数据库中的图像

> ID：14726756
> 
> 赞同：2
> 
> 时间：2013-02-06T10:28:37.737
> 
> 标签：delphi, ms-access, delphi-xe3

我正在使用此代码将图像加载到我的 Timage 中：

```
begin
if OpenPictureDialog1.Execute(Self.Handle) then
Image1.Picture.LoadFromFile(OpenPictureDialog1.FileName);
end; 
```

然后我使用此代码存储到我的 ms 访问数据库中：

```
var
AStream : TMemoryStream;
begin
Adotable1.Append;

AStream := TMemoryStream.Create;
try
Image1.Picture.Graphic.SaveToStream(AStream);
AStream.Position := 0;
if Adotable1.Active then
begin
  TBlobField(Adotable1.FieldByName('Termograma')).LoadFromStream(AStream);
  end;
finally
AStream.Free;
end;
adotable1.Post; 
```

但是现在我想在 Timage 上显示这些保存的图像，有人可以帮我吗？图片为 .jpeg 格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:37:55.280

至于 TPicture 无法决定它必须为加载创建哪种 TGraphic，因为流没有像文件名这样的扩展名，您必须决定它并分配 Graphic。
在这种情况下，将 TJPEGImage 转换为图片。

```
var
 JPG:TJPEGImage;
 ms:TMemoryStream;
begin
    JPG:=TJPEGImage.Create;
    ms:=TMemoryStream.Create;
    try
    TBlobField(AdoTable1.FieldByName('Termograma')).SaveToStream(ms);
    ms.Position := 0;
    JPG.LoadFromStream(ms);
    Image2.Picture.Assign(JPG);
    finally
       JPG.Free;
       ms.Free;
    end;
end; 
```

以下单元能够在 blobfields 中存储不同的图形格式。存储与图像数据的简单存储不兼容，因为还存储了有关图形格式的信息，以便能够创建所需的加载类。

```
unit LoadSaveImageBlobs;

// 20120224 by Thomas Wassermann
// Adapt. RegisterClasses and uses for your requirements
// based on an Idea of  Emiliano Sos

interface
uses Classes,DB,Graphics,Jpeg,PngImage;

Procedure SavePicture2Blob(Blob: TBlobField; Picture: TPicture);
Procedure LoadPictureFromBlob(Picture: TPicture; Blob: TBlobField);
implementation

Procedure SavePicture2Blob(Blob: TBlobField; Picture: TPicture);
var
  ms, ms2: TMemoryStream;
  theClassName: AnsiString;
  len: Byte;
begin
  ms := TMemoryStream.Create;
  try
    Blob.Clear;
    theClassName := Picture.Graphic.ClassName;
    len := Length(theClassName);
    ms.WriteBuffer(len, 1);
    if len > 0 then
      ms.WriteBuffer(theClassName[1], len);
    ms2 := TMemoryStream.Create;
    try
      Picture.Graphic.SaveToStream(ms2);
      ms2.Position := 0;
      if ms2.Size > 0 then
        ms.CopyFrom(ms2, ms2.Size);
    finally
      ms2.Free;
    end;
    Blob.LoadFromStream(ms);
  finally
    ms.Free;
  end;
end;

Procedure LoadPictureFromBlob(Picture: TPicture; Blob: TBlobField);
var
  ms, ms2: TMemoryStream;
  len: Byte;
  theClassName: AnsiString;
  Graphic: TGraphic;
  GraphicClass: TGraphicClass;
begin
  ms := TMemoryStream.Create;
  Blob.SaveToStream(ms);
  ms.Position := 0;
  try
    ms.ReadBuffer(len, 1);
    SetLength(theClassName, len);
    if len > 0 then
      ms.ReadBuffer(theClassName[1], len);
    GraphicClass := TGraphicClass(FindClass(theClassName));
    if (GraphicClass <> nil) and (len > 0) then
    begin
      Graphic := GraphicClass.Create;
      ms2 := TMemoryStream.Create;
      try
        ms2.CopyFrom(ms, ms.Size - len - 1);
        ms2.Position := 0;
        Graphic.LoadFromStream(ms2);
      finally
        ms2.Free;
      end;
      Picture.Assign(Graphic);
    end;
  finally
    ms.Free;
  end;
end;

initialization
// you might register others if wished
RegisterClasses([TIcon, TMetafile, TBitmap, TJPEGImage,TPngImage]);

end. 
```

# jquery - JavaScript、CSS、函数仅在 Internet Explorer 中不起作用

> ID：14726758
> 
> 赞同：0
> 
> 时间：2013-02-06T10:28:47.993
> 
> 标签：jquery, css, internet-explorer, hover, jquery-events

我知道这个问题之前已经被问过一百万次，但由于某种原因，我仍然无法找到解决这个问题的方法。

我有一个简单的 JavaScript 函数

```
 //Robert Lindsay
            $(document).ready(function () {
                $("#robertLindsay").hover(function () {
                    $("#robertLindsay div").css("visibility", "visible");
                },
      function () {
          $("#robertLindsay div").css("visibility", "hidden");
      });
            }); 
```

在我的身体里，我这样称呼它

```
 <div style="margin-bottom: 51px">
        <div style="position: relative; float: left">
            <img alt="" class="style2" src="../Styles/12%20-%20065BHFgroup070.JPG" />                
            <div style="position: absolute; top: 5px; left: 150px; width: 131px;">
                <div id='robertLindsay'>
                    <div id="boxRobert" style="visibility: hidden; height: 127px; width: 150px;">
                        <center>
                            <a href="#">Dr. Robert Lindsay</a></center>
                    </div>
                </div>
            </div>
            </div>
     </div> 
```

CSS 很简单：

```
 .style2
            {
                width: 650px;
                height: 410px;
            } 
```

出于某种原因，除了 IE（从 5 及以上版本开始）之外，它在 Firefox、Chrome、Safari 中都可以正常工作

谷歌搜索后，我发现 .hover 操作不适用于 IE，因为悬停只需要链接`<a>`标签。然后我找到了一个修复程序（更像是一个插件），它告诉你所有的`.hover`功能都可以正常工作，但什么也没发生。

然后我更改了我的代码以包含一些 CSS 并且不使用`.hover`JavaScript 方法

在 CSS

```
#show_div
{ position:absolute 
visibility: hidden
} 
```

在 Javascript 中，我有一个简单的显示和隐藏方法：

```
document.getElementById("div1").show();

else 
document.getElementById("div1").hide(); 
```

在我的身体里：

```
<div style="position:absolute" onmouseover="div1" onmouseout="div1">
Show the piece of text or div here

</div> 
```

但由于某种原因，我无法为图像做这件事。我只是无法将鼠标悬停在图像上。如果它在空白屏幕上它可以正常工作，但如果在图像上我无法让它工作。

修复并遇到与我相同的问题的人可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:30:44.530

问题可能来自 css 可见性规则，我不确定旧 ie 版本如何处理它。尝试设置 display:none/display:block 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:54:36.910

我想我终于能够让事情正常工作了（“所有浏览器现在都支持这个”）

我的 JavaScript 函数是

```
 function showlayer(layer) {
  var myLayer = document.getElementById(layer).style.display;
  if (myLayer == "none") {
   document.getElementById(layer).style.display = "block";
   } else {
   document.getElementById(layer).style.display = "none";
    }
 } 
```

在我的 HTML 正文中，我调用了这样的东西

```
<img alt="" class="style2" src="../Images/whateverImange.JPG" usemap="#groupmap" />
<div id="myName" style="position: absolute; top: 500px; left: 450px; width: 225px; height: 50px; display: none;">
    <a href="http://news.google.co.uk/nwshp?hl=en&tab=wn">Show me Now and click me later</a>
</div>
<map name="groupmap">
    <area shape="circle" coords="100,100,50,100" href="https://play.google.com/store?hl=en&tab=n8" alt="" onmouseover="showlayer('myName');" />
</map> 
```

我的CSS是这样的

```
.style2
 {
 width: 650px;
 height: 410px;
 position: relative;
 float: left;
 } 
```

天啊。最后它起作用了，到目前为止，我的客户还没有投诉。

我总是鼓励获得更多建议，因为像我这样的新手可以学到很多东西。

# ajax - Apache-Shiro：用户在 AJAX 中进行身份验证，登录后如何恢复 GET-Variables？

> ID：14726767
> 
> 赞同：2
> 
> 时间：2013-02-06T10:29:11.930
> 
> 标签：ajax, jsf, jakarta-ee, shiro

在我的 JavaEE 应用程序中，我使用 Apache Shiro[1] 进行用户身份验证。我的用户正在通过 GET-URL 导航，例如“/company/index.xhtml?companyId=327”。

我按照 BalusC 的指南 [2] 启用了编程登录：

```
SavedRequest savedRequest = WebUtils.getAndClearSavedRequest(Faces.getRequest()); 
```

我的问题是，当我的情况是带或不带RememberMe 的异步POST 时，*savedRequest.getRequestUrl()*不包含前面提到的GET 参数；例如，仅返回“/company/index.xhtml”。似乎“FacesAjaxAwareUserFilter”（参见 [2]）不支持 GET 参数。在同步 GET 调用上一切正常。

由于在使用“FacesAjaxAwareUserFilter”的情况下需要身份验证，我如何在 shiro 重定向后获取 GET 参数？

[1] [https://shiro.apache.org/](https://shiro.apache.org/)

[2] 关注这篇关于 JavaEE 和 Shiro 的精彩文章：http: [//balusc.blogspot.de/2013/01/apache-shiro-is-it-ready-for-java-ee-6.html](http://balusc.blogspot.de/2013/01/apache-shiro-is-it-ready-for-java-ee-6.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:24:01.977

JSF ajax 请求被发送到由`<h:form>`. 然而，默认情况下，这并不完全是包含查询字符串的当前 URL，默认情况下它是没有查询字符串的当前 URI。

有几种方法可以解决这个问题。最简单但最丑陋的方法是使用 JS：

```
<h:form id="foo">
    ...
</h:form>
<script>document.getElementById("foo").action += "?" + location.search;</script> 
```

最简洁的方法是创建一个自定义[`ViewHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)，其[`getActionURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#getActionURL%28javax.faces.context.FacesContext,%20java.lang.String%29)（由 使用`<h:form>`）将返回带有查询字符串的所需 URL。

JSF 实用程序库[OmniFaces](http://omnifaces.org)已经有这样一个组件，它基于视图参数执行此操作：[`<o:form>`](http://showcase.omnifaces.org/components/form)它基本上扩展了`<h:form>`对的支持`includeViewParams="true"`（与所做的完全相同`<h:link>`）。

```
<f:metadata>
    <f:viewParam name="companyId" value="#{bean.company}" />
</f:metadata>
...
<o:form includeViewParams="true">
    ...
</o:form> 
```

# c# - XML 用于注册新的 UPNP 设备

> ID：14726769
> 
> 赞同：1
> 
> 时间：2013-02-06T10:29:22.870
> 
> 标签：c#, .net, xml, upnp

我正在尝试注册一个新的 UPNP 设备（并试图了解它是如何工作的）。

现在，我只是想创建一个简单的测试，让一些东西工作并从那里构建。

我现在正在使用 UPnP 设备主机，我有以下代码：

```
IUPnPRegistrar registrar = (IUPnPRegistrar)new UPnPRegistrarClass();
String description = GetDescription();
String path = GetPath();
registrar.RegisterDevice(description, "Test1", "Init", "Container", path, 900); 
```

GetDescription 方法返回：

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns="urn:schemas-upnp-org:device-1-0">
    <specVersion>
        <major>1</major>
        <minor>0</minor>
    </specVersion>
    <device>
        <UDN>@@UDN@@</UDN>
        <friendlyName>Test device</friendlyName>
        <deviceType>urn:schemas-upnp-org:device:XmsHostService:1</deviceType>
        <manufacturer>Test</manufacturer>
        <manufacturerURL>http://www.test.com</manufacturerURL>
        <modelName>Test model name</modelName>
        <modelNumber>0.1</modelNumber>
        <modelDescription>Test device</modelDescription>
        <modelURL>http://www.test.com/test-model-url</modelURL>
        <serialNumber>0000001</serialNumber>
        <UPC>00000-00001</UPC>
        <serviceList>
            <service>
                <serviceType>urn:schemas-upnp-org:service:XmsHost:1</serviceType>
                <serviceId>urn:upnp-org:serviceId:XmsHost</serviceId>
                <controlURL></controlURL>
                <eventSubURL></eventSubURL>
                <SCPDURL>serviceDescription.xml</SCPDURL>
            </service>
        </serviceList>
    </device>
</root> 
```

我的 C:\upnphost\service.xml 包含以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<scpd xmlns="urn:schemas-upnp-org:service-1-0">
    <specVersion>
        <major>1</major>
        <minor>0</minor>
    </specVersion>
    <actionList>
        <action>
            <name>GetPort</name>
            <argumentList>
                <argument>
                    <name>_ReturnValue</name>
                    <direction>out</direction>
                    <retval />
                    <relatedStateVariable>A_ARG_TYPE_GetPort_RetType</relatedStateVariable>
                </argument>
            </argumentList>
        </action>
    </actionList>
    <serviceStateTable>
        <stateVariable sendEvents="no">
            <name>A_ARG_TYPE_GetPort_RetType</name>
            <dataType>ui4</dataType>
        </stateVariable>
        <stateVariable sendEvents="no">
            <name>Port</name>
            <dataType>ui4</dataType>
        </stateVariable>
    </serviceStateTable>
</scpd> 
```

那么，首先，这个 xml 代码看起来对吗？

当我调用注册设备时，我得到了这个异常：

```
 System.ArgumentException was unhandled
  Message=Value does not fall within the expected range.
  Source=UPnPHostLib
  StackTrace:
       at UPnPHostLib.IUPnPRegistrar.RegisterDevice(String bstrXMLDesc, String bstrProgIDDeviceControlClass, String bstrInitString, String bstrContainerId, String bstrResourcePath, Int32 nLifeTime)
       at UPnPHosterTester.Hoster.Start() in E:\Dev\Discovery\XMS_SW_Discovery_B\Solution\UPnPHosterTester\Hoster.cs:line 32
       at UPnPHosterTester.Program.Main(String[] args) in E:\Dev\Discovery\XMS_SW_Discovery_B\Solution\UPnPHosterTester\Program.cs:line 19
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

但我看不出有什么问题，900 是接受的最小值。其他链接的问题：我知道我必须实现 IUPnPDeviceControl 接口并插入我以前的代码而不是 Test1，但我不知道我应该在 GetServiceObject 中返回什么

**编辑** 这里是 GetDescription 方法：

```
private string GetDescription()
{
    string xml = File.OpenText("DeviceDescription.xml").ReadToEnd();
    xml = xml.Replace("@@UDN@@", "uuid:" +Guid.NewGuid().ToString());
    return xml;
} 
```

**编辑 2** 我尝试过，建议删除所有非强制性属性：

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns="urn:schemas-upnp-org:device-1-0">
    <specVersion>
        <major>1</major>
        <minor>0</minor>
    </specVersion>
    <device>
        <UDN>@@UDN@@</UDN>
        <friendlyName>Test device</friendlyName>
        <deviceType>urn:test-com:device:HostDevice:1</deviceType>
        <manufacturer>Test</manufacturer>
        <modelName>Test model name</modelName>
    </device>
</root> 
```

但我仍然有完全相同的错误

**编辑 3** 我确实发现有一个实用程序可以检查服务 xml 文件的良好结构（不是设备 :() 这里：http: [//msdn.microsoft.com/en-us/library/aa381938 (v=vs .85).aspx](http://msdn.microsoft.com/en-us/library/aa381938(v=vs.85).aspx)您可以将它与 VS studio 命令提示符一起使用：`validatesd.exe`. 它验证我的服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:43:45.210

您快速找出了 XML 标头。这已经写好了：

> 如果您发布的设备 XML 确实完整，那么您缺少 XML 标头：这不仅对于 UPnP 范围是强制性的，而且对于一般 XML 也是强制性的。

如果您的帖子不完整并且您有标题，我将从省略所有可选元素开始。省略`serviceList`, `presentationURL`, `UPC`, `serialNumber`, 可能还有更多。如果您不知道，[这里是强制性规范](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf)。在我的脑海中，我认为 UDN 也有一个强制格式（以 开头`uuid:`），但是你在你的帖子中留下了代码，而不是结果字符串，所以我不知道你是否做得对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:21:13.573

COM 对象 progid 必须对应真实的东西，即：“Test1”必须是在当前注册表中注册的有效 COM 对象，RegisterDevice 调用才能成功。

# http - HTTP 消息的最大长度？

> ID：14726771
> 
> 赞同：0
> 
> 时间：2013-02-06T10:29:24.997
> 
> 标签：http

在有条件兼容/通用服务器中，类似这样的东西

```
#define HTTP_MSG_LEN_MAX = ??;

...

int read_request(sockfd, ...)
{
  char *buf = malloc(sizeof(char) * http_msg_len_max + 1);
  int read_total = 0;
  int read_once = 0;

    while (zStrFind(buf, "\r\n\r\n") != -1 && read_total < HTTP_MSG_LEN_MAX) {
      read_once = read(sockfd, buf + read_total, HTTP_MSG_LEN_MAX - read_total);

     if (read_once < 0) {
       fprintf(stderr, "read failed: %s \n", strerror(errno));
       free(buf);
       return -1;
     }

     read_total += read_once;
  }

  ...

  return 0;
} 
```

我已经知道[request 中 HTTP URI](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)的最大长度，但是 HTTP 消息的最大长度是多少？
[RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)没有提到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:01:26.953

没有最大长度（根据规范）。

# ruby-on-rails - 如何在 Ruby on Rails 中将 pdf 文件转换为二进制文件

> ID：14726773
> 
> 赞同：2
> 
> 时间：2013-02-06T10:29:32.180
> 
> 标签：ruby-on-rails

我使用 pdf_forms gem 填写了 pdf，现在我想将该 pdf 转换为二进制文件并希望通过电子邮件发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:38:43.173

您可能只想将 pdf 作为附件发送。官方的 Rails ActionMailer 有一个关于如何做到这一点的例子

```
class UserMailer < ActionMailer::Base
  def welcome_email(user)
    @user = user
    @url  = user_url(@user)
    attachments['terms.pdf'] = File.read('/path/terms.pdf')
    mail(:to => user.email,
         :subject => "Please see the Terms and Conditions attached")
  end
end 
```

[http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments](http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:35:31.340

您无需将 pdf 转换为二进制文件即可将其附加到电子邮件中。只需在邮件程序的方法中添加这一行

`attachments["filename.pdf"] = File.read("/path/to/filename.pdf")`

# php - 关联数组，json到php

> ID：14726774
> 
> 赞同：0
> 
> 时间：2013-02-06T10:29:46.220
> 
> 标签：php, json

在我的 php 文件中，我使用以下内容，

```
$obj = ($_POST['data']);
var_dump(json_decode($obj,true)); 
```

我看到了这个结果。这是正确的格式吗？以及如何访问数组。

例如，设置一个与 row1 id 相同的新变量 $newID

```
array(4) {
  ["row0"]=>
  string(92) "{"id":"157","name":"123","basic":"123123123","submitter":"Keith","status":"review"}"
  ["row1"]=>
  string(169) "{"id":"158","name":"TEST RESOURCE","basic":"Please state the type of work.","submitter":"Keith","status":"review"}"
  ["row2"]=>
  string(107) "{"id":"159","name":"TEST OTHER","basic":"testing for other","submitter":"Keith","status":"review"}"
  ["row3"]=>
  string(160) "{"id":"160","name":"Name","basic":"type of work","submitter":"Keith","status":"review"}"
} 
```

这是萤火虫中的 POST 内容

```
data    {"row0":"{\"id\":\"157\",\"name\":\"123\",\"basic\":\"123123123\",\"submitter\":\"Keith\",\"status\":\"review\"}","row1":"{\"id\":\"158\",\"name\":\"TEST RESOURCE\",\"basic\":\"Please state the type of work.\",\"submitter\":\"Keith\",\"status\":\"review\"}","row2":"{\"id\":\"159\",\"name\":\"TEST OTHER\",\"basic\":\"testing for other\",\"submitter\":\"Keith\",\"status\":\"review\"}","row3":"{\"id\":\"160\",\"name\":\"Name\",\"basic\":\"type of work\",\"submitter\":\"Keith\",\"status\":\"review\"}"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:33:58.013

数组的每一“行”都是另一个 JSON 字符串。数据似乎是双重编码的，例如：

```
$array = json_encode(
    array(
        'row0' => json_encode(array('id' => '157', ...)),
        ...
    )
) 
```

这是错误编码的数据，除非您希望 JSON 对象包含在 JSON 对象中。要使用它，您需要`json_decode`再次处理每个单独的项目。更好的是：修复编码步骤。

# php - 如何将项目添加到文本框提供的下拉列表中？

> ID：14726780
> 
> 赞同：0
> 
> 时间：2013-02-06T10:30:05.610
> 
> 标签：php, javascript, jquery

我想从文本框中获取值，

并将它们添加到另一个页面上的下拉列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:47:14.257

假设你有这两种形式：

### HTML：

```
<form id="form1">
  <input type="text" value="testing">
  <button id="addoption">Click on me</button>
</form>

<form id="form2">
  <select name="myoptions" id="myselect">
    <option value="1">first option</option>
  </select>
</form> 
```

### 查询：

```
$('#addoption').click(function(e){
   e.preventDefault(); //Prevent to send the form
   var myvalue = $('input').val();
   //Now let's append an option to the select
   $('#myselect').append($("<option></option>").text(myvalue));
}); 
```

工作示例：http: [//jsfiddle.net/WZyQ3/1/](http://jsfiddle.net/WZyQ3/1/)

# c# - 如何从企业库（c#）中的 ExecuteNonQuery 获取输出参数值？

> ID：14726781
> 
> 赞同：8
> 
> 时间：2013-02-06T10:30:06.343
> 
> 标签：c#, enterprise-library

我的存储过程是：

```
create Procedure spSetUser
(
    @Name NVarchar(50),
    @OrganicTitle NVarchar(30),
    @UserName NVarchar(20),
    @Password NVarchar(16),
    @Result Int Output
)
As
Begin
    Set @Result = -1    
    If Not Exists(Select UserId From dbo.Users Where UserName=@UserName)
    Begin
        Insert Into dbo.Users (Name,OrganicTitle,UserName,[Password]) 
        Values(@Name,@OrganicTitle,@UserName,@Password) 
        Set @Result = SCOPE_IDENTITY()
    End
    Return
End
Go 
```

我的课是（在微软企业库中）：

```
[DataObjectMethod(DataObjectMethodType.Insert)]
public Int32 SetUser(UserFieldSet Data)
{
    Int32 Result = 0;
    object[] values = new object[] { Data.Name, Data.OrganicTitle, Data.UserName, Data.Password, Data.UserId };
    Result = Db.ExecuteNonQuery("spSetUser", values);
    return Result;
} 
```

结果是执行存储过程的行影响，但我想获取@Result的值（过程的输出参数），我怎样才能得到它？

UserFieldClass 是：

```
public class UserFieldSet
{
    public Int32 UserId;
    public String Name;
    public String OrganicTitle;
    public String UserName;
    public String Password;
} 
```

提示：我知道必须使用此代码获取 @Result：

```
public Int32 SetUser(UserFieldSet Data)
{          
    Int32 Result = 0;
    DbCommand DbCmd = Db.GetStoredProcCommand("spSetUser");
    Db.AddInParameter(DbCmd, "@Name", DbType.String, Data.Name);
    Db.AddInParameter(DbCmd, "@OrganicTitle", DbType.String, Data.OrganicTitle);
    Db.AddInParameter(DbCmd, "@UserName", DbType.String, Data.UserName);
    Db.AddInParameter(DbCmd, "@Password", DbType.String, Data.Password);
    Db.AddOutParameter(DbCmd, "@Result", DbType.Int32, Int32.MaxValue);
    Db.ExecuteNonQuery(DbCmd);
    Result = (Int32)Db.GetParameterValue(DbCmd, "@Result");
    return Result;
} 
```

但我可以用这个方法得到它：

```
Result = Db.ExecuteNonQuery("spSetUser", values); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:31:30.170

您是否尝试过使用 ExecuteScalar 代替？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:46:31.753

当我阅读这个问题时，您有两个实现`SetUser`；一种使用`AddInParameter`and手动配置参数`AddOutParameter`，另一种仅传递数组。如果我正确理解了这个问题，则第一种方法有效，而第二种方法无效。而且您想知道如何使其与不那么冗长的第二种方法一起工作。

我的建议：不要。冗长的代码*可以工作*，而且更多：它工作的原因是正确的——特别是，它使用按名称传递，而不是按索引传递，这应该始终是首选。

不过，我最大的问题是：*为什么是企业库？*- 与原始 ADO.NET 相比，这增加的很少。如果我想要*方便*，我可能会看“dapper”，但即使有这个`out`参数也有点小题大做：

```
var args = new DynamicParameters(
    new { Data.Name, Data.OrganicTitle, Data.UserName, Data.Password});
// note: ^^ are actually specifying implicit names
args.Add("Result", direction: ParameterDirection.Output);

connection.Execute("spSetUser", args, commandType: CommandType.StoredProcedure);
return args.Get<int>("Result"); 
```

*通常*比这要容易一些。例如：

```
connection.Execute("spFoo", new { id = -1, name },
      commandType: CommandType.StoredProcedure); 
```

# java - 如何在复合材料中创建调色板（swt）

> ID：14726782
> 
> 赞同：1
> 
> 时间：2013-02-06T10:30:07.857
> 
> 标签：java, swt, swt-awt

我想在复合材料（swt）中添加一个调色板。有 ColorPalette 类，但我不知道如何在我的复合材料中使用它。

它将在 Eclipse 视图插件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:39:14.763

这里有两种可能：

1.[`ColorDialog`](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratestheColorDialogclass.htm)使用看起来像这样：

![在此处输入图像描述](../Images/53e13aecba98dfb89996864311464868.png)

2.看看[这个](https://stackoverflow.com/questions/14256694/eclipse-rcp-color-picker)相关的问题，这似乎是你正在寻找的。它看起来像这样：

![在此处输入图像描述](../Images/acc4b1927586e441e1d2c710b7c50fc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:24:39.180

当我在使用自定义设计器工具时，我使用了 Windows Builder Core 中以下类的子类。

[http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/src/org/eclipse/wb/internal/core/utils/ui/dialogs/color/ AbstractColorsGridComposite.java](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/src/org/eclipse/wb/internal/core/utils/ui/dialogs/color/AbstractColorsGridComposite.java)

这可能会帮助您找出问题的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T23:29:47.367

我正在使用适用于 Eclipse 的 Windows Builder。希望这段代码有用。

```
 //  COLOR PALETTE
    {
        JColorChooser tcc = new JColorChooser();
        getContentPane().add(tcc, BorderLayout.PAGE_START); 
    } 
```

我在 JDialog 窗口中使用了这段代码。结果是这样的：

[![在此处输入图像描述](../Images/912b30d501e3ab45ace8bc6187976176.png)](https://i.stack.imgur.com/JMclA.jpg)

将代码片段放在 JDialog 构造函数中，在设置窗口的初始代码之后。

# matlab - Simulink - 电器和消费

> ID：14726783
> 
> 赞同：0
> 
> 时间：2013-02-06T10:30:10.050
> 
> 标签：matlab, simulink, energy, consumption

我想请教您的想法或如何定义（使用 Simulink 模块）具有自身电源和能源消耗的电器。这个块应该可以打开和关闭。

如果有人知道类似的例子，请留下链接。

目前我已经用 R 块定义了它，然后我计算它的功率（kW）并乘以时间（以小时为单位），但这不是一个好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:12:00.877

您看过[SimPowerSystems](http://www.mathworks.com/products/simpower/)或[SimElectronics](http://www.mathworks.com/products/simelectronics/)吗？

# python - 通过python连接时如何更改默认的Mysql连接超时？

> ID：14726789
> 
> 赞同：80
> 
> 时间：2013-02-06T10:30:38.323
> 
> 标签：python, mysql, corpus

我使用 python 连接到一个 mysql 数据库`con = _mysql.connect('localhost', 'dell-pc', '', 'test')` 我编写的程序需要很长时间才能完全执行，即大约 10 个小时。实际上，我正在尝试从语料库中读取不同的单词。读取完成后出现超时错误。

我检查了 Mysql 默认超时，它们是：

```
+----------------------------+----------+
| Variable_name              | Value    |
+----------------------------+----------+
| connect_timeout            | 10       |
| delayed_insert_timeout     | 300      |
| innodb_lock_wait_timeout   | 50       |
| innodb_rollback_on_timeout | OFF      |
| interactive_timeout        | 28800    |
| lock_wait_timeout          | 31536000 |
| net_read_timeout           | 30       |
| net_write_timeout          | 60       |
| slave_net_timeout          | 3600     |
| wait_timeout               | 28800    |
+----------------------------+----------+ 
```

如何更改默认超时？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-10-26T18:50:12.437

做：

```
con.query('SET GLOBAL connect_timeout=28800')
con.query('SET GLOBAL interactive_timeout=28800')
con.query('SET GLOBAL wait_timeout=28800') 
```

参数含义（取自 Navigator 中的 MySQL Workbench：Instance > Options File > Tab "Networking" > Section "Timeout Settings"）

*   **connect_timeout**：mysqld 服务器在响应“错误握手”之前等待连接数据包的秒数
*   **interactive_timeout**服务器在关闭交互式连接之前等待其活动的秒数
*   **wait_timeout**服务器在关闭连接之前等待连接活动的秒数

顺便说一句：28800 秒是 8 小时，因此对于 10 小时的执行时间，这些值实际上应该更高。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-02-06T10:38:22.637

您更改 MySQL 配置文件中的默认值（*mysqld*部分中的选项**connect_timeout**） -

 *```
[mysqld]
connect_timeout=100 
```

如果您无法访问此文件，则可以使用此语句设置此值 -

```
SET GLOBAL connect_timeout=100; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-11-14T14:40:40.323

我知道这是一个老问题，但为了记录，这也可以通过将适当的连接选项作为参数传递给`_mysql.connect`调用来完成。例如，

```
con = _mysql.connect(host='localhost', user='dell-pc', passwd='', db='test',
          connect_timeout=1000) 
```

注意关键字参数（host、passwd 等）的使用。它们提高了代码的可读性。

有关可以传递给的不同参数的详细信息`_mysql.connect`，请参阅[MySQLdb API 文档](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.connections.Connection-class.html#__init__)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-11-02T19:24:48.583

MAX_EXECUTION_TIME 也是长时间运行查询的重要参数。适用于 MySQL 5.7 或更高版本。

检查当前值

```
SELECT @@GLOBAL.MAX_EXECUTION_TIME, @@SESSION.MAX_EXECUTION_TIME; 
```

然后根据您的需要进行设置。

```
SET SESSION MAX_EXECUTION_TIME=2000;
SET GLOBAL MAX_EXECUTION_TIME=2000; 
```*

# java - 避免客户端在实现连接池时保持对连接的引用

> ID：14726790
> 
> 赞同：1
> 
> 时间：2013-02-06T10:30:43.173
> 
> 标签：java, connection-pooling

我已经实现了一个连接池。一切都很好。现在，如果客户端借用了一个连接，甚至将其返回到池中，但客户端还保留了该连接的引用。现在，如果池返回相同的连接到另一个客户端；这将导致多人使用相同的连接。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:42:08.543

不要返回底层连接对象，而是另一个包装它的对象。在该对象中（使用某种私有属性）存储该对象的状态；它是否仍然可以使用，或者它是否已通过返回池或其他一些条件（如超时）而失效）。然后，您可以拦截任何尝试使用它的方法调用并检查其状态。如果不再可用，则抛出异常。

包装的连接对象也需要是私有的，这样客户端就不能直接访问它。

每个客户端都有一个包装器，但两个或多个包装器可以共享底层连接对象。但是因为您是为每个客户端存储状态，所以一次只有一个客户端可以使用该对象。

**编辑以包含一个未经测试的示例 - 现在显示我的方法存在一个大问题。**

假设您要返回实现 java.sql.Connection 的内容，则可以返回以下类的实例。

```
package same.package.as.your.pool; // so your pool has access to set isValidConnection

import java.sql.Connection;

class MyConnection implements Connection {
    private Connection actualConnection;
    private boolean isValidConnection = false;

    MyConnection(Connection conn) {
       // package acccess for pool class to create connection
       actualConnection = conn;
       isValidConnection = true;
    }

    public boolean getIsValidConnection() {
       return isValidConnection;
    }

    void setIsValidConnection(boolean isValid) {
       // pool class can call this to invalidate when returned to pool or timed out
       isValidConnection = isValid;
    }

    // intercept java.sql.Connection methods, checking if connection is still valid first
    // for example
    PreparedStatement prepareStatement(String sql) {
       if (! isValidConnection) {
            // WHAT TO DO HERE?
       }
       return actualConnection.prepareStatement(sql);

    }

    // ... and the rest 
```

第一个大问题是 - 理想情况下，当连接不再有效时，您会从 prepareStatement 等方法中抛出异常，因为它已返回到池中。但是因为您受到原始接口的捕获异常的约束（在这种情况下，抛出 SQLException），您要么需要抛出 SQLException（yuk，它不是真正的 SQLException），要么需要抛出未捕获的异常（yuk - 客户端代码可能想要捕获池连接不再有效的情况）或其他情况:-)

上述代码的另外两个问题 - 用于保护仅对池代码可用的方法的包访问不是很健壮。也许您可以将 MyConnection 代码创建为池代码中的某种内部类。最后，必须重写*所有*java.sql.Connection 接口会很痛苦。

}

# xcode - Xcode 4.6“'PlayingCardDeck' 没有可见的@interface 声明选择器'addCard:AtTop:'

> ID：14726793
> 
> 赞同：2
> 
> 时间：2013-02-06T10:30:43.963
> 
> 标签：xcode, class-method, xcode4.6

我知道这是一个常见问题，但是我找不到我的解决方案。我正在学习 cs193p Standford 课程，在讲座幻灯片上逐个字母地跟踪代码，而 Xcode 4.6 仍然会产生一个错误，而 Xcode 4.4 并没有发生这种情况。

扑克牌甲板.h：

```
#import "Deck.h"

@interface PlayingCardDeck : NSObject

@end 
```

扑克牌甲板.m:

```
#import "PlayingCardDeck.h"
#import "PlayingCard.h"

@implementation PlayingCardDeck

...
                [self addCard:card atTop:YES]; //problem occurs here
...
@end 
```

甲板.h：

```
#import <Foundation/Foundation.h>
#import "Card.h"

@interface Deck : NSObject

- (void)addCard:(Card *)card atTop:(BOOL)atTop;
...
@end 
```

甲板.m:

```
#import "Deck.h"

@interface Deck()
@property (strong, nonatomic) NSMutableArray *cards;
@end

@implementation Deck
...
- (void)addCard:(Card *)card atTop:(BOOL)atTop
{
    if (atTop)
        [self.cards insertObject:card atIndex:0];
    else
        [self.cards addObject:card];
}
...
@end 
```

按逻辑， addCard:atTop: 应该是 (+) 方法？在讲座中，它是一个（-）就好了。此外，在尝试将其更改为 (+) 方法后，它会产生 6 个额外的问题，每次我要使用“self”时使用完全不同的语法。总之，我现在真的很困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:35:00.170

问题是 addCard: atTop 是 Deck 的方法，而不是 PlayingCardDeck 的方法。也许 PlayingCardDeck 应该从 Deck 继承？或者有一个 iVar 的 PlayingCardDeck 是一个套牌？

# hash - 非唯一 str 的冲突最少：md5 或 sha1

> ID：14726797
> 
> 赞同：3
> 
> 时间：2013-02-06T10:30:57.137
> 
> 标签：hash, md5, sha1, hash-collision

我想为给定的字符串创建一个唯一的哈希，我想知道 md5 和 sha1 的重复哈希是否存在差异。

为了论证起见，让我们假设以下代码：

```
foo = "gdfgkldng"
bar = "fdsfdsf"
md5(foo)
>>>> "25f709d867523ff6958784d399f138d9"
md5(bar)
>>>> "25f709d867523ff6958784d399f138d9" 
```

sha1 和 md5 之间发生这种情况的概率是否存在差异？另外：如果我使用重叠很大的字符串（“blabla1”、“blabla2”），有区别吗？

顺便提一句。我对算法的安全性不感兴趣，我只想创建一个尽可能唯一的哈希。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:36:33.937

MD5 的摘要大小为 128 位。SHA-1 的摘要大小为 160 位。即使忽略已发现的弱点，MD5 也会产生更多的碰撞，因为它的输出空间更小。

考虑改用 SHA-256；它的摘要大小为 256 位（显然），而且还没有以有意义的方式被破坏。

# python - 创建独立的可执行铁python文件

> ID：14726803
> 
> 赞同：1
> 
> 时间：2013-02-06T10:31:08.727
> 
> 标签：python, visual-studio-2010, ironpython

我在 Visual Studio 中创建了一个 Ironpython 项目，我希望它作为可执行文件运行

我尝试使用 pyc 创建可执行文件，但它不起作用（它绝对没有任何作用）。

`ipy.exe Tools\Scripts\pyc.py /main:"C:\<Path>\WpfApplication1.py" /target:winexe`

然后我创建了一个小示例项目，看看它是否有效

WpfApplication1.py

```
 import wpf
    from System.Windows import Application, Window

    class MyWindow(Window):
         def __init__(self):
            wpf.LoadComponent(self, 'WpfApplication1.xaml')
            self.button.Content = 'My Button'
            self.textbox.Text = 'My Text'

        def Button_Click(self, sender, e):
            self.label.Content = self.textbox.Text

    if __name__ == '__main__':
        Application().Run(MyWindow()) 
```

和xml

```
 <Window 
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
   Title="WpfApplication1" Height="300" Width="300"> 
   <Grid>
    <TextBox x:Name="textbox" Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" VerticalAlignment="Top" Width="120" />
    <Button x:Name="button" Content="Button" Height="23" HorizontalAlignment="Left" Margin="12,41,0,0" VerticalAlignment="Top" Width="75"  Click="Button_Click"/>
    <Label x:Name="label" Height="28" HorizontalAlignment="Left" Margin="47,117,0,0" VerticalAlignment="Top" Width="182" />
</Grid> 
```

同样的问题，当我执行它时没有任何反应，我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:45:01.200

```
 import clr
    clr.AddReference('IronPython.Wpf') 
```

那成功了

# ios - 在 awakeFromNib 中获取出口尺寸

> ID：14726810
> 
> 赞同：6
> 
> 时间：2013-02-06T10:31:34.673
> 
> 标签：ios, objective-c, awakefromnib

我创建了一个`UICollectionViewCell`包含标签出口的自定义（放置在情节提要中）。我想从`awakeFromNib`我的自定义方法中获取此标签的高度`UICollectionViewCell`，但标签的大小始终为`0.000000`：

```
// .h
@interface MyCustomCell : UICollectionViewCell

@property (weak, nonatomic) IBOutlet UILabel *myLabel;

@end

// .m
@implementation MyCustomCell

-(void)awakeFromNib
{
    [super awakeFromNib];

    NSLog(@"%@", self.myLabel);
    NSLog(@"%f", self.myLabel.frame.size.width);
    NSLog(@"%f", self.myLabel.frame.size.height);
}

@end 
```

控制台输出：

```
2013-02-06 11:13:59.628 Test[8880:c07] <UILabel: 0x7649a00; frame = (0 0; 0 0); text = '12h00'; clipsToBounds = YES; opaque = NO; autoresize = TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x7649ac0>>
2013-02-06 11:13:59.628 Test[8880:c07] 0.000000
2013-02-06 11:13:59.630 Test[8880:c07] 0.000000 
```

如何获得标签的大小？`awakeFromNib`在被调用时获得此类信息是否为时过早？如果是这样，我应该以我的自定义单元格的哪种方法获得大小？

**编辑**

这是在 ViewController 中观察到的同样奇怪的行为：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCustomCell" forIndexPath:indexPath];
    NSLog(@"%@", cell);
    NSLog(@"%@", cell.myLabel);
} 
```

和输出：

```
2013-02-07 16:07:34.488 Test[30308:c07] <MyCustomCell: 0x7156980; baseClass = UICollectionViewCell; frame = (20 0; 290 655); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0x7156a80>>
2013-02-07 16:07:34.489 Test[30308:c07] <UILabel: 0x7158100; frame = (0 0; 0 0); text = 'this is a text'; clipsToBounds = YES; opaque = NO; autoresize = TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x7158040>> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T16:12:54.917

部分答案来自于 dreamzor 对[iOS AutoLayout 的回应——获取 frame size width](https://stackoverflow.com/questions/12527191/ios-autolayout-get-frame-size-width)。

> 诀窍是将您的帧相关代码放置到 viewDidLayoutSubviews 方法中

在我的特殊情况下，我发现在询问插座尺寸之前添加`[self layoutIfNeeded];`我的自定义单元方法就像一个魅力。`awakeFromNib`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T11:43:15.540

我不确定这是否是最佳解决方案，但为了对子视图进行一些更改或像您一样获取信息，我在子视图上创建了一个方法，如“prepareSubviews”或“refresh”或“populateWithData”。从 IB 初始化/加载视图后，我在“viewDidLoad”中调用该方法，此时应该加载 xib 文件并正常工作。

# facebook - WebDriver - 如何读取 JavaScript 响应？

> ID：14726817
> 
> 赞同：0
> 
> 时间：2013-02-06T10:31:47.963
> 
> 标签：facebook, webdriver, response, share

我正在尝试为 Facebook 应用程序编写测试。我想验证 Facebook 分享。所以在我的代码中，我能够打开共享窗口。当我单击共享时，我想获得 Javascript 响应。在此响应中有“post_id”，我需要导航到已发布的共享。我怎样才能在 Selenium 中得到这个响应？选择 shareButton 的代码：

```
WebElement shareButton = driver.findElement(By.xpath("//input[@value='Teilen']")); 
```

当我这样做时`shareButton.click`，它会分享。我怎样才能在这里得到回复？

感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:13:13.590

从您提供的链接中，它说收到响应时它将填充`<p id='msg'></p>`：

```
function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        } 
```

所以这意味着你所要做的就是等待元素有一些东西：

```
WebElement myElementWithID = (new WebDriverWait(driver, 10))
  .until(new ExpectedCondition<WebElement>(){
    @Override
    public WebElement apply(WebDriver d) {
        return d.findElement(By.id("msg")).getText().contains("Post ID: ");
    }}); 
```

完成后，只需处理来自`d.findElement(By.id("msg")).getText().`

# c# - 用于延迟加载属性的通用 dapper 方法

> ID：14726819
> 
> 赞同：1
> 
> 时间：2013-02-06T10:31:52.400
> 
> 标签：c#, dapper

我试图为 Dapper.Query 制作一个通用方法。现在我遇到了麻烦。这是我的例子

```
 public IEnumerable<T1> Lazy<T1, T2>(T2 table) where T1 : EntityBase
    {

        using (IDbConnection cn = GetCn())
        {
            cn.Open();

            return cn.Query<T1, T2, T1>("query", (t1, t2) => { t1.???
        }
    } 
```

正如你在下面看到的，我现在需要 t1 中的属性来用 t2 加载它。这甚至可能吗？

这个例子没有完成，当然会替换“查询”字符串，这只是为了演示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:00:42.960

Dapper 不包括延迟加载，并提供完全零支持来帮助*实现*延迟加载，因为这*不是它想要做*的——它是一个实用程序，而不是一个框架。但是，您的示例表明您正在谈论水平分区的数据，例如，假设我们有：

```
select foo.*, bar.*
from foo inner join bar on bar.ParentId = foo.Id
where foo.Category = @category 
```

并且为了简单起见，假设`[foo]`和`[bar]`都有一个`Id`列（它会自动处理，尽管有手动指定分区规则的方法）。那么这将变成：

```
return cn.Query<Foo, Bar, Foo>(query, args, (foo, bar) => {
    foo.Bar = bar;
    return foo;
}); 
```

或类似的东西。*关键是：它分别*物化了`Foo`和（基于分区），然后让*您*担心如何组合它们。`Bar`

# .net - 隐藏任务栏中的工作进程图标

> ID：14726826
> 
> 赞同：5
> 
> 时间：2013-02-06T10:32:06.637
> 
> 标签：.net, vb.net

如何在 vb.net 的任务栏中隐藏工作进程的图标？

```
Dim startInfo As New ProcessStartInfo("Some Process")
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden 'he hide only window of process
'startInfo.ShowInTaskbar = False 'don't work with System.Diagnostics and ProcessStartInfo
Pr = System.Diagnostics.Process.Start(startInfo) 
```

我需要在任务栏上隐藏一个窗口和一个图标。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:13:01.540

我发现[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/64bb2f43-9104-4e92-aa0f-5d9ae283e2e6)试图解决同样的问题：

```
Imports System.Diagnostics
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Module Module1

    Public GWL_EXSTYLE As Integer = -20
    Public WS_EX_APPWINDOW As Integer = &H40000

    <DllImport("user32.dll")> _
    Public Function GetWindowLong(ByVal hWnd As IntPtr, ByVal nIndex As Integer) As Integer
    End Function

    <DllImport("user32.dll")> _
    Public Function SetWindowLong(ByVal hWnd As IntPtr, ByVal nIndex As Integer, ByVal dwNewLong As Integer) As Integer
    End Function

    <DllImport("user32.dll", SetLastError:=True)> _
    Public Function SetParent(ByVal hWndChild As IntPtr, ByVal hWndNewParent As IntPtr) As IntPtr
    End Function

    Sub Main()

        ' Start your process
        Dim startInfo As New ProcessStartInfo("YourProcessName")
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden
        Dim p as Process = System.Diagnostics.Process.Start(startInfo)            

        ' Hide the process from the task bar
        Dim style As Integer = (GetWindowLong(p.MainWindowHandle, GWL_EXSTYLE) And Not WS_EX_APPWINDOW)
        SetWindowLong(p.MainWindowHandle, GWL_EXSTYLE, style)
        SetParent(p.MainWindowHandle, New Form().Handle)

    End Sub

End Module 
```

# razor - 删除默认 Html.TextBoxFor 内联样式

> ID：14726828
> 
> 赞同：1
> 
> 时间：2013-02-06T10:32:11.503
> 
> 标签：razor, asp.net-mvc-4, html-helper, inline-styles

我有一个非常基本的表单，我使用模型从视图中渲染。在这种形式中，我有一些这样的文本输入：

```
<div class="editor-label">
     @Html.LabelFor(model => model.UserProfile.FirstName)
</div>
<div class="editor-field">
     @Html.TextBoxFor(model => model.UserProfile.FirstName)
     @Html.ValidationMessageFor(model => model.UserProfile.FirstName)
</div> 
```

当它在网页上呈现时，它包含这种讨厌的内联样式：

```
<input 
id="UserProfile_FirstName" 
name="UserProfile.FirstName" 
type="text" 
value="xxx"
sourceindex="4" 
style="border-style: solid; border-width: 1px; 
    border-color: rgb(238, 50, 50) rgb(240, 80, 80) rgb(240, 80, 80); 
    box-shadow: rgb(250, 230, 230) 1px 1px inset; 
    -webkit-box-shadow: rgb(250, 230, 230) 1px 1px inset;"> 
```

我尝试了几种方法来删除它，包括

```
@Html.TextBoxFor(model => model.UserProfile.LastName, null, 
{ @style = "border-width: 0px;" }) 
```

和类似的，但我添加的内联样式是在我要删除的样式之前添加的，因此它们会被覆盖。

如何删除或覆盖此内联样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:01:07.243

我不认为这是 TextBoxFor 助手的默认行为。你有在页面上运行的任何 jQuery 插件吗？特别是可能会注入像这样的内联样式的那个？

# jquery - JQuery 将函数绑定到对象

> ID：14726831
> 
> 赞同：1
> 
> 时间：2013-02-06T10:32:22.720
> 
> 标签：jquery, autocomplete, prototypal-inheritance

我正在使用 jqueryui 自动完成功能。我想将自动完成绑定到各种选择器，但是需要为不同的选择器定制自动完成功能的成功、来源等。

```
//Define execute function for birds
//Define execute function for turtles
        $( "#birds,#turtles" ).autocomplete({
          source: "search.php",
          minLength: 2,
          select: function( event, ui ) {
            this.execute();
            /*based on selector id execute() will call the 
              right function attached with the selector
              if called by birds
                call execute function of birds
              if called by turtles
                call execute function of turtles*/
          }
        }); 
```

那么如何将自定义函数附加到各种对象并让 jquery 基于选择器选择适当的源和自定义函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:39:35.437

`Event.target`将提供触发自动完成的 DOM 元素。

```
 $( "#birds,#turtles" ).autocomplete({
      source: "search.php",
      minLength: 2,
      select: function( event, ui ) {
        this.execute();
        autocomplete(event, ui);
      }
    });

function autocomplete(event, ui){
     if(event.target.id == "birds"){
       //dothis();
     }else if(event.target.id == "turtles"){
       //dothat();
     }
} 
```

## 另外的选择

如果您想要一个更复杂的解决方案，您可以创建一个类似对象的工厂。如：

```
var completions = {
   turtles: function(){
     //Do this
   },
   birds: function(){
     //Do that
   }
}; 
```

然后在绑定到select的函数中使用这个对象，使用id作为key。

```
 $( "#birds,#turtles" ).autocomplete({
      source: "search.php",
      minLength: 2,
      select: function( event, ui ) {
        this.execute();
        completions[event.target.id]();
      }
    }); 
```

# php - 使用 pdo 在 php 中上传多个图像

> ID：14726837
> 
> 赞同：1
> 
> 时间：2013-02-06T10:32:42.517
> 
> 标签：php, mysql

我打算一次将许多图像上传到一个文件夹中，并将它们的信息保存到一个数据库中。

就目前而言，无论我选择一个还是多个，代码都会正确地将这些图像上传到文件夹中。但是，当我选择很多时，它不会将图像的信息存储到数据库中，而只会将图像上传到文件夹中。如果我选择一个图像，那么它将该图像的信息正确地存储到数据库中。

下面是我的代码。

```
<?php
#connect to the db
require_once('db.inc.php');
?>
<html>
<head>
</head>
<body>
<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="files[]" multiple/>
    <input type="submit"/>
</form>
<?php
if(isset($_FILES['files'])){
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
        $file_name = $key.$_FILES['files']['name'][$key];
        $file_size =$_FILES['files']['size'][$key];
        $file_tmp =$_FILES['files']['tmp_name'][$key];
        $file_type=$_FILES['files']['type'][$key];  
        if($file_size > 2097152){
            $errors[]='File size must be less than 2 MB';
        }try{       
$query ="INSERT into tish_images(FILE_NAME,FILE_SIZE,FILE_TYPE)
VALUES(:FILE_NAME,:FILE_SIZE,:FILE_TYPE)";
$insert = $con->prepare($query);
$insert->execute(array(
':FILE_NAME'=>$file_name,
':FILE_SIZE'=>$file_size,
':FILE_TYPE'=>$file_type));
}catch(PDOException $e){
echo $e->getMessage();
}
$desired_dir="image_uploads";
        if(empty($errors)==true){
            if(is_dir($desired_dir)==false){
                mkdir("$desired_dir", 0700);// Create directory if it does not exist
            }
            if(is_dir("$desired_dir/".$file_name)==false){
                move_uploaded_file($file_tmp,"image_uploads/".$file_name);
            }else{                                  //rename the file if another one exist
                $new_dir="image_uploads/".$file_name.time();
                 rename($file_tmp,$new_dir) ;               
            }

        }else{
                print_r($errors);
        }
    }
    if(empty($error)){
        echo "Success";
    }
}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:04:32.083

```
<?php
if(isset($_FILES['files'])){
    $query = "INSERT into tish_images(`FILE_NAME`,`FILE_SIZE`,`FILE_TYPE`)
             VALUES(:FILE_NAME,:FILE_SIZE,:FILE_TYPE)";
    $stmt  = $con->prepare($query);
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $error ){
        if ($error != UPLOAD_ERR_OK) {
            $errors[] = $_FILES['files']['name'][$key] . ' was not uploaded.';
            continue;
        }
        $file_name = $key.$_FILES['files']['name'][$key];
        $file_size = $_FILES['files']['size'][$key];
        $file_tmp  = $_FILES['files']['tmp_name'][$key];
        $file_type = $_FILES['files']['type'][$key];  
        if($file_size > 2097152){
            $errors[] = 'File size must be less than 2 MB';
            continue;
        }
        try{       
            $stmt->bindParam( ':FILE_NAME', $file_name , PDO::PARAM_STR );
            $stmt->bindParam( ':FILE_SIZE', $file_size, PDO::PARAM_STR );
            $stmt->bindParam( ':FILE_TYPE', $file_type, PDO::PARAM_STR );
            $stmt->execute();

            $desired_dir="image_uploads";

            if(is_dir($desired_dir)==false){
                mkdir($desired_dir, 0700);// Create directory if it does not exist
            }
            if(is_file($desired_dir.'/'.$file_name)==false){
                move_uploaded_file($file_tmp,$desired_dir.'/'.$file_name);
            }else{    //rename the file if another one exist
                $new_file=$desired_dir.'/'.$file_name.time();
                move_uploaded_file($file_tmp,$new_file) ;               
            }
        }catch(PDOException $e){
            $errors[] = $file_name . 'not saved in db.';
            echo $e->getMessage();
        }   
    }
    if(empty($error)){
        echo "Success";
    }
}
?> 
```

我看不出有太多错误，但我已经对 pdo 周围的代码进行了一些重构，使其更具可读性，您现在只需准备一次。我也将实际的移动文件移到了 try 块中，因此您仅在 db 执行中没有错误时尝试（您应该检查插入的状态 - 查看 $stmt->errorCode() 或 $stmt->errorInfo() ）。

# django - Django - 如何修改单选按钮的默认行为

> ID：14726841
> 
> 赞同：2
> 
> 时间：2013-02-06T10:33:03.227
> 
> 标签：django, django-forms

我有一个带有单选按钮的 ModelForm，它正在生成一个额外的选项（o ---------）。这是输出：

```
o ---------
o Option 1
o Option 2
o Option 3 
```

如何删除（o ---------）？

这是我的模型表单：

```
class SomeForm(forms.ModelForm):
    sometype = forms.ModelChoiceField(queryset=SomeType.objects.all(), required=True, widget=forms.RadioSelect)

    class Meta:
        model = Some 
```

关于如何实现这一目标的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:39:06.637

这可以通过一个额外的`empty_label=None`参数来完成

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)

```
sometype = forms.ModelChoiceField(queryset=SomeType.objects.all(), required=True, widget=forms.RadioSelect, empty_label=None) 
```

# ruby-on-rails - 如何通过 order、find、where 等调用来保持逆关系？

> ID：14726843
> 
> 赞同：3
> 
> 时间：2013-02-06T10:33:13.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

给定以下具有**inverse-has-many-association 的**类：

```
class User < ActiveRecord:Base
  has_many :accounts, inverse_of: :user
end

class Account < ActiveRecord:Base
  belongs_to :user
end 
```

并且任何给定的用户对象加载如下：

```
u = User.first
u.some_not_saved_variable = "123" 
```

下面的代码展示了执行新的sql语句（订单命中数据库）后，逆向关系没有被持久化：

```
u.accounts.first.user.some_not_saved_variable                       #=> "123"
u.accounts.order(:created_at).first.user.some_not_saved_variable    #=> nil 
```

**在执行订单、查找、位置等调用后，如何确保我的用户对象仍然保持不变？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:44:20.467

如果您想保留对象属性但不想保存记录，那么您可以尝试使用`attributes=(new_attributes)`或`assign_attributes(new_attributes, options = {})`

在你的情况下：

```
u = User.first
u.attributes= :some_not_saved_variable => "123" 
```

或者

```
u = User.first
u.assign_attributes :some_not_saved_variable => "123" 
```

来源： [assign_attributes](http://apidock.com/rails/ActiveRecord/AttributeAssignment/assign_attributes)和[attributes=](http://apidock.com/rails/ActiveRecord/AttributeAssignment/attributes=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:54:06.947

我不认为这是可能的...

允许您在`inverse_of`不再次拉取数据库的情况下获取用户对象，因此`some_not_saved_variable`(123) 的未保存值将持续存在。

但是，如果您调用`order`, `find`,`where`等，将生成一条 SQL，并且存储的数据将替换未保存的数据。

没有`inverse_of`：

```
u.accounts.first.user.some_not_saved_variable
 #SELECT "accounts".* FROM "accounts" WHERE "accounts"."user_id" = 1 LIMIT 1
 #SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
=> "database value" #123 will be lost 
```

使用`inverse_of`：

```
u.accounts.first.user.some_not_saved_variable
 #no SQL statement
=> "123" #123 persist 
```

调用`order`, `find`,`where`等：

```
u.accounts.order(:created_at).first.user.some_not_saved_variable 
#SQL to order by created_at 
```

因此，它将始终访问数据库，并且未保存的值将被数据库替换。

# c# - XNA C# - 手动创建内容文件夹并添加资产

> ID：14726844
> 
> 赞同：1
> 
> 时间：2013-02-06T10:33:16.277
> 
> 标签：c#, xna, assets

我一直在尝试将**XNA**框架与 Visual Studio 2012 一起使用。由于 xna 框架尚未与 Visual Studio *2012*兼容，我不得不手动设置它。然而，我成功地导入了 xna 引用并创建了允许我运行程序的默认游戏方法。

当我尝试将*纹理*添加到我的项目并加载它时，问题就来了。[我手动创建了一个“内容”文件夹，在http://msdn.microsoft.com/en-US/library/bb313966(v=xnagamestudio.30).aspx](http://msdn.microsoft.com/en-US/library/bb313966(v=xnagamestudio.30).aspx)的 msdn 文档之后添加了我的纹理

问题是，因为它不是**XNA 游戏项目**，所以我不会让属性窗口将我的纹理文件显示为*纹理*，而只是作为*资源*文件。以及以下代码：

```
Load<Texture2D>("GrassTexture"); 
```

会系统性地导致**找不到文件**的错误。我将我的设置`ContentManger`如下：

```
ContentManager.RootDirectory = "Content"; 
```

有谁知道如何正确设置内容文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:58:53.930

我也有这个问题，但是有机会为 vs 12 启用 xna 游戏项目。看这里：[https ://stackoverflow.com/a/10881007/1780038](https://stackoverflow.com/a/10881007/1780038)

# internet-explorer - Internet Explorer 9中iframe中的d3图形不起作用

> ID：14726849
> 
> 赞同：0
> 
> 时间：2013-02-06T10:33:38.587
> 
> 标签：internet-explorer, cross-browser, d3.js

我在网页中有一个 iframe，用于加载由 d3.js 制作的折线图。它在除 IE9 之外的所有浏览器中都能正常工作。一旦你按下 F12 并重新加载页面，它也可以在 IE9 中工作。然后它会呈现图形。我无法理解是什么问题。在第一次加载页面时，图表没有呈现，然后我按 F12 并且开发人员工具来了，然后如果我重新加载或刷新页面，图表就会呈现并且工作正常。

任何机构都可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:13:26.180

您的代码中可能有一些调用`console.log()`。当开发工具关闭时，IE 不会公开此方法，从而引发错误，导致您的脚本静默失败。当您按 F12 时，`console.log()`变为可用，*瞧！*，您的代码有效。要解决此问题，您可以删除对 的所有调用`console.log()`，也可以添加脚本以使调用`console.log`安全（[感谢 Michael Erickson](https://stackoverflow.com/a/9593812/406226)）：

```
if (!window.console) window.console = {};
if (!window.console.log) window.console.log = function () { }; 
```

# android - 3 mb 文件在移动设备上的 Blowfish 加密速度极慢

> ID：14726852
> 
> 赞同：0
> 
> 时间：2013-02-06T10:33:51.767
> 
> 标签：android, encryption, blowfish

我对使用 Bouncy Castle 的 Blowfish 加密在 Android 上的加密过程非常慢感到相当惊讶。一个 3 mb 的文件需要 3 多分钟。还有其他一些非常快的算法吗？我可以忍受不太可靠的安全性。这是代码。一切都在记忆中完成。没有文件。

```
private BufferedBlockCipher cipher;
private KeyParameter key;

public Encryption(byte[] key)
{
  try
  {
    BlowfishEngine blowfishEngine = new BlowfishEngine();
    CBCBlockCipher cbcBlockCipher = new CBCBlockCipher(blowfishEngine);

    cipher = new org.spongycastle.crypto.modes.PaddedBlockCipher(cbcBlockCipher);

    this.key = new KeyParameter(key);
  }
  catch (Exception ex)
  {
  }
}

public Encryption(String key)
{
  this(key.getBytes());
}

public synchronized byte[] Encrypt(byte[] data) throws CryptoException
{
  try
  {
    if (data == null || data.length == 0)
    {
      return new byte[0];
    }

    cipher.init(true, key);
    return CallCipher(data);
  }
  catch (Exception ex)
  {
    return null;
  }
}

private byte[] CallCipher(byte[] data) throws CryptoException
{
  try
  {
    int size = cipher.getOutputSize(data.length);
    byte[] result = new byte[size];
    int olen = cipher.processBytes(data, 0, data.length, result, 0);
    olen += cipher.doFinal(result, olen);

    if (olen < size)
    {
      byte[] tmp = new byte[olen];
      System.arraycopy(result, 0, tmp, 0, olen);
      result = tmp;
    }

    return result;
  }
  catch (Exception ex)
  {
    return null;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:05:44.843

河豚实际上是一种快速密码。即使 Java 速度很慢，它也应该提供一些 Mb/sec。最有可能的问题在于您如何使用它（例如，以 8 字节块写入文件）。或者，BouncyCastle 团队是如何编码的。试试 AES-128，它应该更快。而且，最快的解决方案（而且安全性要低得多）是 RC4。

# c# - 具有指定结果的任务并行库 WaitAny

> ID：14726854
> 
> 赞同：13
> 
> 时间：2013-02-06T10:33:52.667
> 
> 标签：c#, task-parallel-library

我正在尝试编写一些代码来并行调用多个不同服务器的 Web 服务，因此 TPL 似乎是显而易见的选择。

我的 Web 服务调用中只有一个会返回我想要的结果，而其他所有调用都不会。我正在尝试找出一种有效的方法，但只有在匹配条件`Task.WaitAny`的第一个返回时才解除阻塞。`Task`

我尝试了`WaitAny`但无法确定将过滤器放在哪里。我做到了这一点：

```
public void SearchServers()
{
    var servers = new[] {"server1", "server2", "server3", "server4"};
    var tasks = servers
                 .Select(s => Task<bool>.Factory.StartNew(server => CallServer((string)server), s))
                 .ToArray();

    Task.WaitAny(tasks); //how do I say "WaitAny where the result is true"?

    //Omitted: cancel any outstanding tasks since the correct server has been found
}

private bool CallServer(string server)
{
    //... make the call to the server and return the result ...
} 
```

**编辑**：快速澄清，以防上面有任何混淆。我正在尝试执行以下操作：

1.  对于每台服务器，启动一个`Task`来检查它
2.  要么，等到服务器返回 true（最多只有 1 个服务器会返回 true）
3.  或者，等到所有服务器都返回 false，即没有匹配项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T10:38:49.383

我能想到的最好的方法是`ContinueWith`为 each指定 a `Task`，检查结果，以及是否`true`取消其他任务。对于取消任务，您可能需要使用[CancellationToken](http://msdn.microsoft.com/en-us/library/System.Threading.CancellationToken.aspx)。

```
var tasks = servers
    .Select(s => Task.Run(...)
        .ContinueWith(t =>
            if (t.Result) {
                // cancel other threads
            }
        )
    ).ToArray(); 
```

更新：另一种解决方案是`WaitAny`直到正确的任务完成（但它有一些缺点，例如从列表中删除已完成的任务并从剩余的任务中创建一个新数组是相当繁重的操作）：

```
List<Task<bool>> tasks = servers.Select(s => Task<bool>.Factory.StartNew(server => CallServer((string)server), s)).ToList();

bool result;
do {
    int idx = Task.WaitAny(tasks.ToArray());
    result = tasks[idx].Result;
    tasks.RemoveAt(idx);
} while (!result && tasks.Count > 0);

// cancel other tasks 
```

更新 2：现在我会用 Rx 来做：

```
[Fact]
public async Task AwaitFirst()
{
    var servers = new[] { "server1", "server2", "server3", "server4" };
    var server = await servers
        .Select(s => Observable
            .FromAsync(ct => CallServer(s, ct))
            .Where(p => p)
            .Select(_ => s)
        )
        .Merge()
        .FirstAsync();
    output.WriteLine($"Got result from {server}");
}

private async Task<bool> CallServer(string server, CancellationToken ct)
{
    try
    {
        if (server == "server1")
        {
            await Task.Delay(TimeSpan.FromSeconds(1), ct);
            output.WriteLine($"{server} finished");
            return false;
        }
        if (server == "server2")
        {
            await Task.Delay(TimeSpan.FromSeconds(2), ct);
            output.WriteLine($"{server} finished");
            return false;
        }
        if (server == "server3")
        {
            await Task.Delay(TimeSpan.FromSeconds(3), ct);
            output.WriteLine($"{server} finished");
            return true;
        }
        if (server == "server4")
        {
            await Task.Delay(TimeSpan.FromSeconds(4), ct);
            output.WriteLine($"{server} finished");
            return true;
        }
    }
    catch(OperationCanceledException)
    {
        output.WriteLine($"{server} Cancelled");
        throw;
    }

    throw new ArgumentOutOfRangeException(nameof(server));
} 
```

在我的机器上测试需要 3.32 秒（这意味着它没有等待第四台服务器），我得到以下输出：

```
server1 finished
server2 finished
server3 finished
server4 Cancelled
Got result from server3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:11:53.450

您可以[`OrderByCompletion()`从 AsyncEx 库](http://nitoasyncex.codeplex.com/wikipage?title=TaskExtensions&referringTitle=Documentation)中使用，它会在任务完成时返回它们。您的代码可能类似于：

```
var tasks = servers
    .Select(s => Task.Factory.StartNew(server => CallServer((string)server), s))
    .OrderByCompletion();

foreach (var task in tasks)
{
    if (task.Result)
    {
        Console.WriteLine("found");
        break;
    }
    Console.WriteLine("not found yet");
}

// cancel any outstanding tasks since the correct server has been found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:41:42.190

使用 Interlocked.CompareExchange 就可以做到这一点，只有一个 Task 能够在 serverReturedData 上写入

```
 public void SearchServers()
        {
            ResultClass serverReturnedData = null;
            var servers = new[] {"server1", "server2", "server3", "server4"};
            var tasks = servers.Select(s => Task<bool>.Factory.StartNew(server => 
            {
               var result = CallServer((string)server), s);
               Interlocked.CompareExchange(ref serverReturnedData, result, null);

            }).ToArray();

            Task.WaitAny(tasks); //how do I say "WaitAny where the result is true"?
        //
        // use serverReturnedData as you want.
        // 
        } 
```

编辑：正如 Jasd 所说，上面的代码可以在变量 serverReturnedData 具有有效值之前返回（如果服务器返回空值，这可能会发生），以确保您可以将结果包装在自定义对象中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-27T18:08:17.780

这是基于 svick 的回答的通用解决方案：

```
public static async Task<T> GetFirstResult<T>(
this IEnumerable<Func<CancellationToken, Task<T>>> taskFactories, 
Action<Exception> exceptionHandler,
Predicate<T> predicate)
{
    T ret = default(T);
    var cts = new CancellationTokenSource();
    var proxified = taskFactories.Select(tf => tf(cts.Token)).ProxifyByCompletion();
    int i;
    for (i = 0; i < proxified.Length; i++)
    {
        try
        {
            ret = await proxified[i].ConfigureAwait(false);
        }
        catch (Exception e)
        {
            exceptionHandler(e);
            continue;
        }
        if (predicate(ret))
        {
            break;
        }
    }

    if (i == proxified.Length)
    {
        throw new InvalidOperationException("No task returned the expected value");
    }
    cts.Cancel(); //we have our value, so we can cancel the rest of the tasks
    for (int j = i+1; j < proxified.Length; j++)
    {
        //observe remaining tasks to prevent process crash 
        proxified[j].ContinueWith(
         t => exceptionHandler(t.Exception), TaskContinuationOptions.OnlyOnFaulted)
                   .Forget();
    }
    return ret;
} 
```

其中`ProxifyByCompletion`实施为：

```
public static Task<T>[] ProxifyByCompletion<T>(this IEnumerable<Task<T>> tasks)
{
    var inputTasks = tasks.ToArray();
    var buckets = new TaskCompletionSource<T>[inputTasks.Length];
    var results = new Task<T>[inputTasks.Length];
    for (int i = 0; i < buckets.Length; i++)
    {
        buckets[i] = new TaskCompletionSource<T>();
        results[i] = buckets[i].Task;
    }
    int nextTaskIndex = -1;
    foreach (var inputTask in inputTasks)
    {
        inputTask.ContinueWith(completed =>
        {
            var bucket = buckets[Interlocked.Increment(ref nextTaskIndex)];
            if (completed.IsFaulted)
            {
                Trace.Assert(completed.Exception != null);
                bucket.TrySetException(completed.Exception.InnerExceptions);
            }
            else if (completed.IsCanceled)
            {
                bucket.TrySetCanceled();
            }
            else
            {
                bucket.TrySetResult(completed.Result);
            }
        }, CancellationToken.None, 
           TaskContinuationOptions.ExecuteSynchronously, TaskScheduler.Default);
    }
    return results;
} 
```

并且`Forget`是抑制 CS4014 的空方法：

```
public static void Forget(this Task task) //suppress CS4014
{
} 
```

# youtube-api - 禁止记录嵌入式 youtube iFrame

> ID：14726856
> 
> 赞同：0
> 
> 时间：2013-02-06T10:33:56.263
> 
> 标签：youtube-api

使用嵌入式 iFrame youtube 播放器播放视频时，我会在控制台中看到很多日志。有没有办法禁用它？

我已经在[谷歌论坛](https://developers.google.com/youtube/forum/discussion?place=topic/youtube-api-gdata/8AiSKiQiro8/discussion)上发现了一个问题，但还没有解决。

一些日志示例：

```
SDK Loader major version = 3
SDK Version = 3.0.48
Loading xlb file for locale - en
Loaded xlb file for locale - en succeed
en_US is not supported. Attempting to trim locale.
Loading xlb file for locale - en
Loaded xlb file for locale - en succeed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:14:58.983

这不是启用或禁用的问题，而是广泛记录的情况。现在已修复：

> 这种无意的日志记录有点极端，今晚晚些时候应该会修复。（2013 年 2 月 13 日）见[已发布的问题](https://code.google.com/p/gdata-issues/issues/detail?id=4098&sort=-id&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary)

# android - 在开发多平台移动应用程序时，有哪些可用选项及其优缺点？

> ID：14726860
> 
> 赞同：0
> 
> 时间：2013-02-06T10:34:10.990
> 
> 标签：android, ios, mobile, windows-phone, multiplatform

在我计划开发的移动应用程序中，它需要访问指南针、地图、与手机功能的集成（例如，在此应用程序中，当然需要在用户许可的情况下使手机静音）、通知等。

**最重要**的是，我需要该应用程序至少可以在 iOS、BB、Android、Windows 和 Symbian 等主要平台上使用。

我被指向[http://cordova.apache.org/](http://cordova.apache.org/)但没有经验。

**或者**

使用每个平台的本地语言进行开发仍然是最好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:52:16.260

您可以使用`PhoneGap`

优点：

```
 Open Source and comes under MIT license (Free software license)
    Based on best known web technologies HTML5, JavaScript, CSS3
    Essey to use.
    Uses Javascript as a bridge between native API and browser
    Provides JavaScript APIs to access native features inside embedded web browser
    Supported mobile platforms –
    > ios,android,windows phone,blackberry,webos,symbian,bada
    PhoneGap Build (Write once, Compile in Cloud, Run anywhere)
    Developer can also create custom plugins
    PhoneGap also provides API Documentation ([http://docs.phonegap.com][1]) 
```

缺点：除了你必须知道javascript，html5，css3之外什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:02:43.133

其他一些选项是：

*   加速器
*   康妮
*   炉子
*   莫同步
*   应用云
*   安蒂娜
*   网购
*   应用程序
*   ETC

但最有用、最棒的是 PhoneGap（由 Adob​​e 创建）

去网上搜索关键字`Hybrid mobile application Development`。您将获得更多选项以及有关它们的更多详细信息。

但相信我，PhoneGap 真的很酷。

# scala - 序列化：InvalidClassException scala

> ID：14726862
> 
> 赞同：-3
> 
> 时间：2013-02-06T10:34:22.163
> 
> 标签：scala, serialization, serialversionuid

为什么我会收到此错误？

```
Serialization Problem 
  java.io.InvalidClassException: scala.reflect.ClassTypeManifest; 
  local class incompatible: stream classdesc serialVersionUID = 
```

使用智能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:14:11.060

让我猜猜：你序列化（通过java的内置序列化）一个包含一个`ClassManifest`（来自谁`ClassTypeManifest`的子类型）到一个文件（或数据库）的类，然后升级你的scala版本，现在正试图反序列化那个文件，对吧? 或者你正在将一个序列化的对象从一个 JVM 进程发送到另一个进程，并且它们运行不同版本的 scala。

好吧，不要这样做。第一个原因是`ClassTypeManifest`没有声明显式`serialVersionUID`字段（请参阅[什么是 serialVersionUID 以及为什么要使用它？](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)），这清楚地表明对类的任何更改都可能会更改序列化格式。您不能真正期望在`ClassTypeManifest`的序列化流中有任何向后兼容性。此外，在 scala 2.10`ClassManifest`中甚至不再是一个类：它只是一个别名，`ClassTag` 它是一个明显不同的类。

所以真的，不要指望能够序列化（使用java的序列化）a`ClassManifest`并用另一个版本的scala读回它。

如果你真的需要使用 java 反射，你可以尝试用字段替换你`ClassManifest`的`java.lang.Class`字段（序列化/反序列化总是安全的）。

否则，您可以考虑使用其他序列化库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T15:27:27.930

我解决了这个问题。解决方案是使用 Maven 生命周期清理，然后安装。

# php - 递归函数中的增量变量问题

> ID：14726864
> 
> 赞同：0
> 
> 时间：2013-02-06T10:34:24.523
> 
> 标签：php, recursion, increment

我的递归函数是

```
function recursion($vals,$i) //
{
$htm=implode('',file($vals));
echo $i;
if($htm)
{
return $htm;
}
else
{
    echo "\n.................link broken...................\n";
    sleep(10);
    echo "\n.................retrying......................\n";     
    **// return recursion($vals,$i+1);  //case 1
            // return recursion($vals,$i++);    //case 2**
}
} 
```

使用案例 1 是增加**$i+1**的值，而使用**$i++**不增加 $i 值为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:36:51.893

因为后自增 ( `$a++`) 运算符意味着

> 返回`$a`，然后加`$a`一。

查看[官方文档](http://www.php.net/manual/en/language.operators.increment.php)。

**添加：**

并且（如@Matt 所述）预增量运算符 ( `++$a`) 表示增量然后返回。

所以在你的情况下，你使用

```
recursion($i++); 
```

这导致`$i`将其当前值返回到函数调用的参数中，*然后*将自身加一，因此`recursion()`始终会得到相同的`$i`结果，因为它在用作参数*后会自增。*

改成

```
recursion(++$i); 
```

有助于。

# css - 使用 CSS 与 Sass (SCSS) - 基类问题和冗余

> ID：14726866
> 
> 赞同：1
> 
> 时间：2013-02-06T10:34:27.957
> 
> 标签：css, sass, oocss, precompiler

我正在尝试使用 SCSS 清理我的 CSS 以使其更清洁。

标准 CSS：

```
.dark-hr,
.light-hr { 
  width: 100%;
  height: 1px;
  margin: 15px 0px;
}
.dark-hr {
  background-color: #595959;
}
.light-hr {
  background-color: #cccccc;
} 
```

与 SCSS：

```
.generic-hr { 
  width: 100%;
  height: 1px;
  margin: 15px 0px;
}
.dark-hr {
  @extend .generic-hr;
  background-color: #595959;
}
.light-hr {
  @extend .generic-hr;
  background-color: #cccccc;
} 
```

有什么方法可以避免创建不会使用的“generic-hr”类？我希望某种巢能很好地工作。在这种情况下，CSS 绝对比 SCSS 更干净、更易读。

理想情况下，我需要这个在 SCSS 中工作：

```
.## {
  // base class that is not outputted
  .dark-hr {
    //attributes the extend the base class '.##'
  }
  .light-hr {
    //attributes the extend the base class '.##'
  }
} 
```

输出：

```
 .dark-hr, .light-hr {
   //shared attributes defined by '.##'
 }
 .dark-hr {
   // overrides
 }
 .light-hr {
   // overrides
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:40:23.747

您想要使用的是*扩展类*（我称它们为“静默类”），它通过使用 a`%`而不是a 来表示`.`。

```
hr%base { 
  width: 100%;
  height: 1px;
  margin: 15px 0px;
}
.dark-hr {
  @extend hr%base;
  background-color: #595959;
}
.light-hr {
  @extend hr%base;
  background-color: #cccccc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:38:48.297

你通常不会做这样的事情：

```
.generic-hr { 
  width: 100%;
  height: 1px;
  margin: 15px 0px;
  &.dark {
    background-color: #595959;
  }
  &.light {
    background-color: #cccccc;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:28:47.600

我对这种事情的模式是混合：

```
@mixin generic-hr { 
  width: 100%;
  height: 1px;
  margin: 15px 0px;
}
.dark-hr {
  @include generic-hr;
  background-color: #595959;
}
.light-hr {
  @include generic-hr;
  background-color: #cccccc;
} 
```

这具有可扩展的额外优势，因此如果您发现自己需要几个具有非常相似属性的选择器，您可以添加变量：

```
@mixin generic-hr($background-color: transparent) { 
  width: 100%;
  height: 1px;
  margin: 15px 0px; 
  background-color: $background-color;
}
.dark-hr {
  @include generic-hr(#595959);
}
.light-hr {
  @include generic-hr(#cccccc);
}
.medium-hr {
  @include generic-hr(#818181);
} 
```

# hadoop - HBase 异常

> ID：14726869
> 
> 赞同：0
> 
> 时间：2013-02-06T10:34:35.250
> 
> 标签：hadoop, hbase, cloudera

当我在伪集群模式下使用 HBase 时，出现以下异常。如果有人能对这个问题有所了解以解决它，那就太好了

```
org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed after attempts=10, exceptions:
Wed Feb 06 15:22:23 IST 2013, org.apache.hadoop.hbase.client.ScannerCallable@29422384, java.io.IOException: java.io.IOException: Could not iterate StoreFileScanner[HFileScanner for reader reader=file:/home/688697/hbase/test/c28d92322c97364af59b09d4f4b4a95f/cf/c5de203afb5647c0b90c6c18d58319e9, compression=none, cacheConf=CacheConfig:enabled [cacheDataOnRead=true] [cacheDataOnWrite=false] [cacheIndexesOnWrite=false] [cacheBloomsOnWrite=false] [cacheEvictOnClose=false] [cacheCompressed=false], firstKey=0deptempname0/cf:email/1360143938898/Put, lastKey=4191151deptempname4191151/cf:place/1360143938898/Put, avgKeyLen=45, avgValueLen=7, entries=17860666, length=1093021429, cur=10275517deptempname10275517/cf:place/1360143938898/Put/vlen=4]
    at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:104)
    at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:106)
    at org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:289)
    at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:138)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.nextInternal(HRegion.java:3004)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:2951)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:2968)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:2155)
    at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
    at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1345)
Caused by: org.apache.hadoop.fs.ChecksumException: Checksum error: file:/home/688697/hbase/test/c28d92322c97364af59b09d4f4b4a95f/cf/c5de203afb5647c0b90c6c18d58319e9 at 37837312 exp: -819174049 got: 1765448374
    at org.apache.hadoop.fs.FSInputChecker.verifySums(FSInputChecker.java:320)
    at org.apache.hadoop.fs.FSInputChecker.readChecksumChunk(FSInputChecker.java:276)
    at org.apache.hadoop.fs.FSInputChecker.fill(FSInputChecker.java:211)
    at org.apache.hadoop.fs.FSInputChecker.read1(FSInputChecker.java:229)
    at org.apache.hadoop.fs.FSInputChecker.read(FSInputChecker.java:193)
    at org.apache.hadoop.fs.FSInputChecker.readFully(FSInputChecker.java:431)
    at org.apache.hadoop.fs.FSInputChecker.seek(FSInputChecker.java:412)
    at org.apache.hadoop.fs.FSDataInputStream.seek(FSDataInputStream.java:48)
    at org.apache.hadoop.fs.ChecksumFileSystem$FSDataBoundedInputStream.seek(ChecksumFileSystem.java:318)
    at org.apache.hadoop.hbase.io.hfile.HFileBlock$AbstractFSReader.readAtOffset(HFileBlock.java:1047)
    at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockData(HFileBlock.java:1318)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.readBlock(HFileReaderV2.java:266)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.readNextDataBlock(HFileReaderV2.java:452)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.next(HFileReaderV2.java:416)
    at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:99)
    ... 12 more

Wed Feb 06 15:22:24 IST 2013, org.apache.hadoop.hbase.client.ScannerCallable@29422384, java.io.IOException: java.io.IOException: java.lang.IllegalArgumentException
    at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:1079)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:1068)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:2182)
    at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
    at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1345)
Caused by: java.lang.IllegalArgumentException
    at java.nio.Buffer.position(Buffer.java:216)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.next(HFileReaderV2.java:395)
    at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:99)
    at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:106)
    at org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:326)
    at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:138)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.nextInternal(HRegion.java:3004)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:2951)
    at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:2968)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:2155)
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:38:32.773

此问题的根本原因在于您的 /etc/hosts 文件。如果你检查你的 /etc/hosts 文件，你会发现一个类似下面的条目（在我的例子中，mu 机器被命名为 domainnameyouwanttogive）

```
127.0.0.1 localhost
127.0.1.1 domainnameyouwanttogive 
```

以下行对于支持 IPv6 的主机是可取的

```
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

根本原因是 domainnameyouwanttogive 解析为 127.0.1.1 这是不正确的，因为它应该解析为 127.0.0.1（或外部 IP）。由于我的外部 IP 是 192.168.58.10 我创建了以下 /etc/hosts 配置；

```
127.0.0.1 localhost
192.168.43.3 domainnameyouwanttogive 
```

以下行对于支持 IPv6 的主机是可取的

```
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

这将确保您的 localhost 上的主机进程解析将正确完成，并且您可以在开发系统上正确启动 HBase 安装。

并且请确保您的 hadoop namenode 使用与您用于 hbase 的域名相同的域名运行

# macos - 在 Mac OS 10.8 中无法从终端使用 svn 命令

> ID：14726870
> 
> 赞同：6
> 
> 时间：2013-02-06T10:34:38.930
> 
> 标签：macos, svn, terminal

团队

SVN 命令在终端中运行良好。我已经卸载并安装了最新版本的 svnclient。从那时起，我无法从我的 mac 终端访问 svn 命令。以下是我在终端中看到的错误消息

> dyld：库未加载：/opt/local/lib/libssl.1.0.0.dylib
> 引用自：/usr/local/bin/svn 原因：找不到图像 Trace/BPT 陷阱：5

我正在使用 Mac OS 10.8.2

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T10:55:14.803

看起来您的“svn”本地副本（安装在 /usr/local/bin 中）依赖于 /opt/local/lib 中不再存在的库（当您卸载并重新安装时，它可能已经消失了）安装了最新版本的 svn 客户端）。

在我自己的机器上，“ `svn`”通过 Xcode 命令行工具安装到“ `/usr/bin`”目录中，您可以直接从 Apple 下载（[查看“寻找其他开发人员工具？”链接](http://developer.apple.com/xcode/)）或者您可以安装命令行直接来自 Xcode 首选项的工具（查看“下载”选项卡，将有一个“组件”部分）。一旦你安装了命令行工具，你就可以“rm”在“”中的 svn 的副本`/usr/local/bin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T08:51:45.683

尝试

```
brew install libssl 
```

我曾经在“libmagic”上遇到过类似的问题，而不是“libssl”，这是由“brew install”命令解决的。

# java - Android - 第一个应用 onCreate 空参数

> ID：14726876
> 
> 赞同：0
> 
> 时间：2013-02-06T10:34:57.790
> 
> 标签：java, android, mobile

我开始为 Android 开发应用程序。我在 Eclipse 中编写了一些代码，并使用附加的模拟器。当我将 porgram 发送到我的模拟器时，我得到了一些错误。
调试器显示在行`super.onCreate(savedInstanceState);` `// savedInstanceState = null`

我的代码

```
public class PushAndroidActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        try
        {   
            super.onCreate(savedInstanceState);

            checkNotNull(SENDER_ID, "SENDER_ID"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:46:07.610

您可以尝试旋转您的设备吗？左 ctrl F11。你会意识到捆绑是 != null

如果视图具有 id，则默认情况下将为视图调用 onSaveInstanceState()。默认实现通过在层次结构中具有 id 的每个视图上调用 onSaveInstanceState() 来为您处理大部分 UI 每个实例的状态。你可以检查这些：

[savedInstanceState 始终为空](https://stackoverflow.com/questions/6554317/savedinstancestate-is-always-null)

[何时调用 onSaveInstanceState() 方法的所有情况？](https://stackoverflow.com/questions/6678062/when-are-all-the-cases-when-the-onsaveinstancestate-method-called/7023241#7023241)

# php - 如何使用一个变量在 PHP 中过滤这样的数组？

> ID：14726890
> 
> 赞同：0
> 
> 时间：2013-02-06T10:35:54.163
> 
> 标签：php, arrays, variables, filter

我正在尝试过滤 PHP 中的数组。请看我的数组：

```
Array
(
    [0] => Array
        (
            [date_start_month_name] => January
            [approved] => Accepted: yes
        )

    [1] => Array
        (
            [date_start_month_name] => March
            [approved] => Accepted: yes
        )

    [2] => Array
        (
            [date_start_month_name] => March
            [approved] => Accepted: yes
        )

    [3] => Array
        (
            [date_start_month_name] => April
            [approved] => Accepted: yes
        )
) 
```

我想使用月份名称过滤数组，例如：**March**并得到如下内容：

```
Array
(
    [0] => Array
        (
            [date_start_month_name] => March
            [approved] => Accepted: yes
        )

    [1] => Array
        (
            [date_start_month_name] => March
            [approved] => Accepted: yes
        )
) 
```

我怎样才能做到这一点？提前感谢您的帮助。最好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:39:06.197

```
$march = array_filter($my_arr, function($value) { 
   return $value['date_start_month_name'] == "March"; 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:40:36.517

尝试[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)：

```
$array=array(array("month"=>"January","foo"=>"bar"),array("month"=>"January","foo"=>"bar"),array("month"=>"March","foo"=>"bar"),array("month"=>"March","foo"=>"bar"));
print_r($array);
$result=array_filter($array,function($o){return $o["month"]=="March";});
print_r($result); 
```

输出：

```
Array
(
    [0] => Array
        (
            [month] => January
            [foo] => bar
        )

    [1] => Array
        (
            [month] => January
            [foo] => bar
        )

    [2] => Array
        (
            [month] => March
            [foo] => bar
        )

    [3] => Array
        (
            [month] => March
            [foo] => bar
        )

)
Array
(
    [2] => Array
        (
            [month] => March
            [foo] => bar
        )

    [3] => Array
        (
            [month] => March
            [foo] => bar
        )

) 
```

# c# - MVC API：使用子元素构建 XML 响应

> ID：14726893
> 
> 赞同：1
> 
> 时间：2013-02-06T10:35:57.323
> 
> 标签：c#, xml, asp.net-mvc, api, structure

对 MVC 来说非常新。我目前正在编写一个 API，并且有一个严格的格式，我需要返回 XML。

目前，我正在使用我的 EntityModel 来公开我的 SQL 存储过程。然后，我为 SP 创建了一个复杂类型。

我有一个调用 SP 的控制器，结果以 XML 格式返回。

这很好，但是当前的输出是（例如）：

```
 <product> 
        <productId>12345</productId> 
        <inStock>True</inStock> 
        <shelfLevel>10</shelfLevel> 
        <onOrder>0</onOrder> 
        <height>10</height> 
        <width>15</width> 
        <depth>12</depth> 
        <colour>green</colour> 
    </product> 
```

但是，它需要构造为：

```
 <product> 
        <productId>12345</productId> 
        <availability> 
                <inStock>True</inStock> 
                <shelfLevel>10</shelfLevel> 
                <onOrder>0</onOrder> 
        </availability> 
        <dimensions> 
                <height>10</height> 
                <width>15</width> 
                <depth>12</depth> 
        </dimensions> 
        <colour>green</colour> 
   </product> 
```

使用我当前的 EntityModel 和 Complex Type 组合方法，我看不到任何包含“可用性”和“维度”包装元素的方式。

以下是控制器中用于现有输出的代码：

```
// GET api/product/5 

        //ProductAvailability_Result is the Complex Type derived from the SP output columns 
        public IEnumerable<ProductAvailability_Result> Get(int id) 
        { 

           myDB_DevEntities db = new myDB_DevEntities(); 

           //ProductAvailability is a SP consisting of a simple 'select' statement that returns the resultset 
           var Result = db.ProductAvailability(id); 

           return Result.ToList(); 

        } 
```

任何人都可以就如何实现这一目标提供任何指示吗？我是否通过尝试使用上述方法以完全错误的方式来解决这个问题，即我应该放弃 EntityModel 吗？在我需要更改结构之前，它工作得很好。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:41:35.610

您可以创建一个看起来像您想要的方式的 DTO（[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)），但您必须进行一些数据转换。您将从定义与预期 XML 的结构相匹配的类结构开始：

```
[XmlRoot("product")]
public class ProductDto
{
    [XmlElement("productId")]
    public int ProductId { get; set; }

    [XmlElement("availability")]
    public AvailabilityDto Availability { get; set; }

    ...
}

[XmlRoot("availability")]
public class AvailabilityDto
{
    [XmlElement("inStock")]
    public bool InStock { get; set; }

    ...
} 
```

然后在您的 API 方法中，您可以在将 DAO（数据访问对象）返回给客户端之前将其转换为 DTO：

```
public ProductDto GetProductAvailability(id)
{
    var result = db.ProductAvailability(id); 

    return new ProductDto
    {
        ProductId = result.productId,
        Availability = new AvailabilityDto
        {
             InStock = result.inStock,
             ...
        },
        ...
    }
} 
```

显然，这可能需要大量的工作，所以我也很好奇你的问题的其他答案可能会弹出。

# java - 格式化字符串：删除电话号码

> ID：14726895
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:00.973
> 
> 标签：java, regex, string, replace

我有一个`String(StringTo)`如

```
John [0775678899] ,Ann [0776789988] ,Mary [0777789900] 
```

但我需要格式化字符串以将其显示为：

```
John, Ann, Mary 
```

我尝试使用以下方法，但没有给我预期的结果：

```
StringTo = StringTo.replace("//[^10] ,/", ", "); 
```

有人可以告诉我有什么问题或任何其他计算方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:38:40.173

`\[\d+\]`用空字符串替换正则表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:53:47.950

试试这个，它将正确格式化空白：

```
StringTo = StringTo.replaceAll("\\s*\\[\\d+\\]\\s*(,?)", "$1 "); 
```

输入：

```
John [0775678899] ,Ann [0776789988] ,Mary [0777789900] 
```

输出：

```
John, Ann, Mary 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:39:07.223

如果我理解正确 - 你需要删除里面的所有数字`[]`。试试这个：

```
StringTo.replaceAll("\\[.*?\\] ",""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:01:53.143

```
public static void main(String[] args) {
    String s = "John [0775678899] ,Ann [0776789988] ,Mary [0777789900]";
    String[] ss = s.split(",");
    ArrayList<String >name = new ArrayList<String>();
    for(int i = 0; i< ss.length; i++){
        String[]splitted = ss[i].split("\\[");
        name.add(splitted[0]);
    }
    System.out.println(name);
} 
```

输出：

```
[John , Ann , Mary ] 
```

# delphi - 如何确保文件正确写入文件系统？

> ID：14726901
> 
> 赞同：1
> 
> 时间：2013-02-06T10:36:17.730
> 
> 标签：delphi, stream, delphi-2009

我有一个应用程序，它从 ZIP 存档中读取文件并将其保存到文件系统上的文件中。将其写入文件系统后，我立即开始使用 SAX2 阅读器读取此文件。在较大的文件 (300+ MB) 上，有时会发生 SAX2 由于未关闭的标记而停止解析。但是当我检查文件时（或者甚至稍后再尝试读取它）它可以工作，所以文件它自己就可以了。

```
FZipKit.ExtractToStream(LFileName, LStream);
LStream.SaveToFile(OutputFilename);
SAX2.processUrl(OutputFilename); 
```

我的假设是，当我开始解析过程时，该文件尚未完全写入文件系统。

有没有办法确保文件已被写入或蒸汽已被刷新到文件系统？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:57:20.700

我将首先假设 XML 解析器运行正常。如果它无法读取文件，那么解决方案是显而易见的。

这让我们看看文件是如何创建的。当您调用 SaveToFile 时，将打开、写入、关闭文件并刷新缓冲区。在普通的 vanilla 系统中，您的 XML 解析器将看到文件的全部内容。唯一的结论是有什么东西在干扰。最喜欢的嫌疑人是您的病毒扫描程序。许多扫描仪，即使是最受尊敬的扫描仪，也无法正确处理关闭然后立即重新打开的文件。

底线是您的代码很好，问题几乎肯定出在您的本地环境中。

# java - 如何将属性值从一种方法使用到另一种方法

> ID：14726906
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:29.053
> 
> 标签：java, spring, spring-mvc

我有一个家庭控制器，其中我有 2 种方法之一是

```
 @RequestMapping(value = "/mypage.te", method = RequestMethod.GET)
    public String mypage1(Locale locale, Model model){

        Authentication auth = SecurityContextHolder.getContext().getAuthentication();
        String name = auth.getName(); //get logged in username 
        model.addAttribute("username", name);       
        model.addAttribute("customGroup",grpDao.fetchCustomGroup());        
        model.addAttribute("serverTime", formattedDate);
        model.addAttribute("username", name);

        return "mypage";
} 
```

在此方法中，实际上我`grpDao.fetchCustomGroup()`从 Dao 类调用方法，该类执行本机查询并获​​取数据并返回，并将其保存在`customGroup`.

现在将`fetchcustomGroup()`在另一种方法中使用相同的方法，即

```
@RequestMapping(value = "/manageGrps.te", method = RequestMethod.GET)
public String man_grp_connections(@RequestParam("id") Integer groupId,@RequestParam("name") String groupName, Model model) {
    Authentication auth = SecurityContextHolder.getContext().getAuthentication();
    String name = auth.getName();
    System.out.println("I am in the fetchCustomGroup controller");  
    int profileid=grpDao.getProfileId(name);        
    //model.addAttribute("customGroup",grpDao.fetchCustomGroup());
    model.addAttribute("memberList",grpDao.fetchGroupMembers(groupId,profileid));
    model.addAttribute("groupid",groupId);
    model.addAttribute("profileid",profileid);

    model.addAttribute("groupName",groupName);
    System.out.println("groupid="+groupId);
    System.out.println("groupName="+groupName);
    return "manageGrps";
} 
```

所以`fetchCustomGroup()`我不想在这两种方法中调用，我只想调用一种方法并在家庭控制器的两种方法中使用结果。

那么我如何在另一种方法中使用 customGroup 来使用结果`fetchCustomGroup()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:52:35.330

我认为您想要的是避免执行两次查询。这可以通过不同的方式来完成。最简单的方法是将响应分配给控制器中的变量，然后使用 getter 而不是 dao。控制器默认是单例的。就像是 ：

```
private Foo customGroup;

private synchronized Foo getCustomGroup() {
    if(customGroup == null) {
        customGroup = grpDao.fetchCustomGroup();
    } 
    return customGroup;
} 
```

然后使用`getCustomGroup()`代替`grpDao.fetchCustomGroup()`

我不知道您使用什么来进行持久性，但使用缓存也是避免执行两次查询的好主意。

# ios - IOS popviewcontroller去掉导航栏

> ID：14726910
> 
> 赞同：1
> 
> 时间：2013-02-06T10:36:34.927
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, popviewcontroller, popviewcontrolleranimated

我在我的应用程序中使用故事板，我正在尝试将 bac 移动到以前的视图控制器使用

```
[self.navigationController popViewControllerAnimated:YES]; 
```

它工作正常，但它给了我正确的视图控制器，但它从中删除了导航栏，我不知道为什么我在项目的其他地方使用它，它没有任何问题，这让我发疯：D

一些身体请帮助谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:43:33.817

我发现问题是我从中弹出的视图控制器将导航栏隐藏设置为是，并将该属性传递给另一个视图控制器，所以我所要做的就是在弹出视图之前将属性重置为 no

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:29:56.213

您还可以在每个视图控制器的 viewWillAppear 方法中将导航栏隐藏属性设置为隐藏或不隐藏，而不是来自 viewDidLoad。

# sql-server - 如何在 SQL Server 中按具有连接记录的相同数据进行分组

> ID：14726911
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:47.010
> 
> 标签：sql-server, sql-server-2008

我有一个表格输出，例如....

```
srno billno particular Qty rate vat amount paid balance
 1     25     aaa       5   20   5    105   400   135
 2     25     qqq       5   50   5    225   400   135
 3     25     fff       10  20   5    205   400   135
 4     26     aaa       10  20   5    205   300   245
 5     26     fff       10  20   5    205   300   245 
```

但我想要像这样的输出：

```
srno billno particular Qty rate vat amount paid balance
 1     25     aaa       5   20   5    105   400   135
              qqq       5   50   5    225         
              fff       10  20   5    205         
 2     26     aaa       10  20   5    205   300   245
              fff       10  20   5    205 
```

如何使用 T-SQL 选择命令获取此输出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:55:16.993

您应该能够通过使用[排名](http://msdn.microsoft.com/en-us/library/ms189798%28v=sql.105%29.aspx)函数[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.105%29.aspx)和来做到这一点[`dense_rank`](http://msdn.microsoft.com/en-us/library/ms173825%28v=sql.105%29.aspx)：

```
select 
  case when rn = 1 then cast(rnk as varchar(10)) else '' end srno,
  case when rn = 1 then cast(billno as varchar(10)) else '' end billno,
  [particular], 
  [Qty], 
  [rate], 
  [vat], 
  [amount], 
  case when rn = 1 then cast([paid] as varchar(10)) else '' end [paid], 
  case when rn = 1 then cast([balance] as varchar(10)) else '' end [balance]
from
(
  select [srno], [billno], [particular], [Qty], [rate], [vat], [amount], [paid], [balance],
    row_number() over(partition by billno order by srno) rn,
    dense_rank() over(order by billno) rnk
  from yourtable
) src; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/ce74b/18)

结果是：

```
| SRNO | BILLNO | PARTICULAR | QTY | RATE | VAT | AMOUNT | PAID | BALANCE |
---------------------------------------------------------------------------
|    1 |     25 |        aaa |   5 |   20 |   5 |    105 |  400 |     135 |
|      |        |        qqq |   5 |   50 |   5 |    225 |      |         |
|      |        |        fff |  10 |   20 |   5 |    205 |      |         |
|    2 |     26 |        aaa |  10 |   20 |   5 |    205 |  300 |     245 |
|      |        |        fff |  10 |   20 |   5 |    205 |      |         | 
```

# hover - 请向我推荐一个使用 graphael 的 dotchart 悬停功能示例

> ID：14726914
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:49.683
> 
> 标签：hover, raphael, graphael, bubble-chart

我正在尝试使用 gRaphael 创建一个点图（气泡图）。但是他们的文档并不清楚当用户悬停在点上时如何添加悬停效果。任何人都可以建议我一些例子或提供一些相同的帮助提示。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:16:28.700

感谢您的回复癌症贝罗。这是我的java脚本解决方案，

```
dotChart.hover(function(){//onmouseover
        dotChart.covers = r.set();                                
        dotChart.covers.push(r.tag(this.x, this.y, this.value , 0, 10).insertBefore(this));                
    }, function(){//onmouseout
        if(dotChart.covers!=null){
            dotChart.covers.remove();
        }
    }); 
```

这工作得很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:23:25.377

您必须使用 aDotChart.hoverDot() 来注册“点悬停侦听器”。以下是执行您提到的示例[http://cancerbero.vacau.com/gwt/graphael4gwtGallery/?test=dot1的源代码。](http://cancerbero.vacau.com/gwt/graphael4gwtGallery/?test=dot1)它是 Java 代码而不是 javascript！但我认为它可以帮助您了解 javascript 代码：

```
 double[] xs = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23};

    double[] ys = {7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
            6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
            5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
            3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
            1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1};

    double[] data = {294, 300, 204, 255, 348, 383, 334, 217, 114, 33, 44, 26, 41, 39,
            52, 17, 13, 2, 0, 2, 5, 6, 64, 153, 294, 313, 195, 280, 365, 392, 340, 184,
            87, 35, 43, 55, 53, 79, 49, 19, 6, 1, 0, 1, 1, 10, 50, 181, 246, 246, 220,
            249, 355, 373, 332, 233, 85, 54, 28, 33, 45, 72, 54, 28, 5, 5, 0, 1, 2, 3,
            58, 167, 206, 245, 194, 207, 334, 290, 261, 160, 61, 28, 11, 26, 33, 46, 36,
            5, 6, 0, 0, 0, 0, 0, 0, 9, 9, 10, 7, 10, 14, 3, 3, 7, 0, 3, 4, 4, 6, 28, 24,
            3, 5, 0, 0, 0, 0, 0, 0, 4, 3, 4, 4, 3, 4, 13, 10, 7, 2, 3, 6, 1, 9, 33, 32, 6,
            2, 1, 3, 0, 0, 4, 40, 128, 212, 263, 202, 248, 307, 306, 284, 222, 79, 39, 26,
            33, 40, 61, 54, 17, 3, 0, 0, 0, 3, 7, 70, 199};

    String[] axisy = {"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
    String[] axisx = {"12am", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12pm", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11"};

    DotOpts opts = new DotOpts();
    opts.setSymbol("o");
    opts.setMax(10);
    opts.setHeat(true);   
    opts.setAxis("0 0 1 1");
    opts.setAxisxlabels(axisx);
    opts.setAxisylabels(axisy);

    final DotChart c1 = getGPaper().dotchart(10, 10, 620, 260, xs, ys, data, opts);
    c1.hoverDot(new DotHoverListener() {

        @Override
        public void hoverOut(DotContext ctx) {
            if(tag!=null)
                tag.remove();
        }

        @Override
        public void hoverIn(DotContext ctx) {
                tag = (GShape) getGPaper().tag(ctx.getX(), ctx.getY(), ctx.getValue()+"", 0, ctx.getR()+2).
                        insertBefore(ctx).show();
        }
    }); 
```

# android - 如何以编程方式禁用android中的无障碍服务

> ID：14726917
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:53.533
> 
> 标签：android, talkback

我正在为视障人士开发一个应用程序，并且我正在创建自己的声音，因此它不需要 android 无障碍服务的任何帮助。因此，一旦打开应用程序，我想禁用内置的可访问服务（如果启用）并退出或转到其他应用程序，我想再次启用它？

这可能吗？如果是这样怎么办？

# c++ - 如何在 C++ 中正确访问继承的方法和构造函数？

> ID：14726919
> 
> 赞同：0
> 
> 时间：2013-02-06T10:36:57.993
> 
> 标签：c++, inheritance, constructor

我有一个 Sphere 类，它继承了一个 Point 对象作为中心。当我通过 Sphere 构造函数创建一个 Sphere 对象时，它总是将中心初始化为 0,0,0，但它会正确设置半径。

访问 Sphere 的 setCenter() 方法也没有影响。我可以有效地改变球体中心点的 X、Y、Z 坐标的唯一方法是调用 Point 的 setX() 等方法。

如果这是一个明显的答案，我深表歉意，但我是 C++ 新手，正在为过渡而苦苦挣扎。如果我遗漏了任何重要信息，请随时告诉我。以下是相关代码：

# 主要的

```
#include <iostream>
#include <fstream>
#include "MovingSphere.h"

using namespace std;

int main() {

    ifstream inFile("sphere.txt");
    int X, Y, Z, R, DX, DY, DZ;
    if (inFile) {

        inFile >> X >> Y >> Z >> R
            >> DX >> DY >> DZ;
    }
    else {
        cerr << "\neRR: Cannot find input file.\n\n";
    }

    // create a sphere
    Sphere sphereInstance(X, Y, Z, R);
    sphereInstance.setCenter(1, 2, 3);
    sphereInstance.setX(3);

    cout << endl <<
        "X = " << sphereInstance.getX() << endl <<
        "Y = " << sphereInstance.getY() << endl <<
        "Z = " << sphereInstance.getZ() << endl;

return 0;

} 
```

# 点.cpp

```
#include "Point.h"

Point::Point() : x(0), y(0), z(0) {   // default constructor (point at 0,0,0)
}

Point::Point(int X, int Y) : x(), y(), z(0) {      // constructor for 2d point
}

Point::Point(int X, int Y, int Z) : x(), y(), z() { // constructor for 3d point
}

// set the points X coordinate (mutator)
void Point::setX(int newX) {
    x = newX;
}
... etc. 
```

# 点.h

```
#ifndef POINT_H
#define POINT_H

class Point {

public:
    Point ();                         // default constructor (0,0,0);
    Point(int X, int Y);              // constructor for 2d point
    Point(int X, int Y, int Z);       // constructor for 3d point

    void setX(int newX);              // declaration

    int getX() const;                 // declaration
etc...

private:

    int x, y, z;  // coordinates of point

};

#endif  /* POINT_H */ 
```

# 球体.cpp

```
#define _USE_MATH_DEFINES
#include <math.h>
#include "Sphere.h"

Sphere::Sphere() : 
    center(), radius(0) {// default constructor (a point at 0,0,0)
}

Sphere::Sphere(int X, int Y, int Z, int R) {     // sphere constructor
    center = Point(X, Y, Z);
    radius = R;
}

// set the sphere's center (mutator)
void Sphere::setCenter(int X, int Y, int Z) {
    center.setX(X);
    center.setY(Y);
    center.setZ(Z);
}
... etc. 
```

# 球体.h

```
#ifndef SPHERE_H
#define SPHERE_H

#include "Point.h"

class Sphere: public Point {

public:
    Sphere();          // default constructor (a point at 0,0,0)
    Sphere (int X, int Y, int Z, int R); // sphere constructor

    void setRadius(int newRadius); // declaration
    void setCenter(int X, int Y, int Z); // declaration

    int getRadius() const;         // declaration

private:
    Point center;      // center of sphere
    int radius;        // radius of sphere

};

#endif  /* SPHERE_H */ 
```

# 输出

```
X = 3
Y = 0
Z = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:56:07.423

```
class Sphere: public Point { 
```

这表示一个球体*是*一个点，并从一个点所具有的一切开始，包括 X、Y 和 Z 坐标。

```
private:
   Point center;      // center of sphere 
```

这表示一个球体*有*一个点，称为`center`。一个球体的这个点也有一个 X、Y 和 Z 坐标，就像所有的点一样。

所以一个球体既是一个点又是一个点，每个点都有一个 X、Y 和 Z 坐标。这不可能是您想要的，并且您的代码在设置这两个点之一然后获取另一个点时会失败。选择一个模型并坚持下去。

如果您需要多态地将球体视为点，则删除`center`- 在此模型中，球体是也具有半径的点。如果您不需要将球体视为点，则不要从点继承——在此模型中，球体不是点，而是具有点和半径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:41:48.457

您的`Point`2 和 3 参数构造函数对输入不执行任何操作。将它们更改为

```
Point::Point(int X, int Y) : x(X), y(Y), z(0) { }

Point::Point(int X, int Y, int Z) : x(X), y(X), z(Z) { } 
```

如果`center`是 的`Point`数据成员`Sphere`，那么您应该更喜欢在构造函数初始化列表中进行初始化，而不是在构造函数主体中进行赋值：

```
Sphere::Sphere(int X, int Y, int Z, int R) : center(X,Y,Z), radius(R) { } 
```

我在语句中编辑了一个冒号，但至少需要 6 个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:41:41.350

你没有展示如何`Point`和`Sphere`相关，但我想这`Sphere`继承自`Point`......

```
class Point
{
    ...
};

class Sphere : public Point
{
    ...
}; 
```

如果你想调用例如基本构造函数，你可以在初始化列表中执行它：

```
Sphere::Sphere(int X, int Y, int Z, int R)
    : Point(X, Y, Z), radius(R)
{
} 
```

至于其他函数，如果它们在基类中，您可以将它们用作子类的成员：

```
void Sphere::setCenter(int X, int Y, int Z)
{
    setX(X);
    setY(Y);
    setZ(Z);
} 
```

由于`Sphere`也是`Point`（由于继承）您不需要`center`成员变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:01:46.303

正如其他人所说，您应该首先明确 Sphere 与 Point 的关系（Sphere has-a Point 即成员，或 Sphere is-a Point 即继承）。

但是，您的确切问题是：

*   Sphere 的 setCenter() 方法更新 Sphere::center
*   Sphere 使用 Point 的 getX/Y/Z()，这些使用 Point 中的 x/y/z

即 setCenter() 更新与 getX/Y/Z() 无关的东西。

# javascript - JavaScript：如果没有响应，则停止 SetInterval

> ID：14726923
> 
> 赞同：0
> 
> 时间：2013-02-06T10:37:05.153
> 
> 标签：javascript, setinterval

我正在使用备用代码`navigator.OnLine`来检查网络连接。它有效，但是，我遇到了一些问题。

如果我连接/断开了 Intranet（企业网络）内的网络，那么我没有任何问题。但是，如果我在家并且连接到我的家庭网络，但没有使用 VPN 连接连接到公司 Intranet，则窗口将冻结 10 秒间隔。我认为这是因为有互联网连接，但服务器无法访问，因为我与 Intranet 断开连接。

这是代码：

```
function serverReachable() {
  // IE vs. standard XHR creation
  var x = new ( window.ActiveXObject || XMLHttpRequest )( "Microsoft.XMLHTTP" ),
      s;
  x.open(
    // requesting the headers is faster, and just enough
    "HEAD",
    // append a random string to the current hostname,
    // to make sure we're not hitting the cache
    "http://16.24.163.33" + window.location.hostname + "/?rand=" + Math.random(),
    // make a synchronous request
    false
  );
  try {
    x.send();
    s = x.status;
    // Make sure the server is reachable
    return ( s >= 200 && s < 300 || s === 304 );
  // catch network & other problems
  } catch (e) {
    return false;
  }
} 
```

我想在你的帮助下取消一个需要一秒钟以上的请求。因此，如果我试图从家里到达 16.24.163.33，并且在 1 (!) 秒后没有收到任何响应，那么取消请求，并在两分钟内重试整个代码。

```
setInterval(function () {
    if (serverReachable()) {
        if (timeout === null) {
    var changeIt = document.getElementById('change')
    changeIt.style.visibility = 'hidden';
           timeout = setInterval("refreshIframe()",25000);
        }
    } else {
        clearTimeout(timeout);
        timeout = null;
    var changeIt = document.getElementById('change')
    changeIt.style.visibility = 'visible';
       }
}, 900); 
```

# c# - Asp.Net 程序

> ID：14726930
> 
> 赞同：-4
> 
> 时间：2013-02-06T10:37:45.000
> 
> 标签：c#, asp.net

下面这行代码是做什么的

```
SqlDataSource DataSource =(SqlDataSource)CreateUserWizardStep1.
ContentTemplateContainer.FindControl("InsertExtraInfo"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:40:21.993

MSDN 可以告诉你：

[http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)

它将找到`ContentTemplateContainer`ID为 的子控件，`InsertExtraInfo`然后将其强制转换为`SqlDataSource`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:33:10.857

它只是说：“它使用 FindControl 获取 SqlDataSource，然后将其绑定到 CreateUserWizard”。

# apache - 禁止显示 apache 测试页面和 doc root 中的所有其他内容的虚拟主机

> ID：14726931
> 
> 赞同：2
> 
> 时间：2013-02-06T10:37:46.390
> 
> 标签：apache, centos, config

我正在使用新的 CentOS 6.3 最小安装并安装了新的 httpd

当我转到我的虚拟主机时，它向我显示 apache 测试页面，然后如果我转到 mydomain.co.uk/index.html （我刚刚设置为测试）它说禁止。对此的所有通常答案似乎都不起作用，老实说，我浏览了大量论坛和其他人的问题/答案，似乎没有什么对我有用。

我创建了一个名为 'www' 的组，我已将用户 'apache' 添加到.. 这是我在 httpd.conf 文件中的根目录，我将其保持打开状态只是为了进行测试：

```
<Directory />
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from All
</Directory> 
```

这是我的虚拟主机文件：

```
NameVirtualHost *:80

<VirtualHost *:80>
  DocumentRoot /var/www/html/
</VirtualHost>

<VirtualHost *:80>
  ServerName domain.co.uk
  ServerAlias www.domain.co.uk
  DocumentRoot /home/domain/public_html
  <Directory "/home/domain/public_html">
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride AuthConfig FileInfo
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

从 /home/ 开始，我将组设置为 www

当 ls -lA 在主文件夹上时，我得到

```
drwxrwsr-x.   5 root www   4096 Feb  5 20:57 home 
```

我在日志文件中遇到的错误是权限错误：

```
[Wed Feb 06 10:24:42 2013] [error] [client 62.254.7.226] (13)Permission denied: access to /index.html denied (filesystem path '/home/domain/public_html/index.html') because search permissions are missing on a component of the path 
```

与该文件夹中的其他所有内容一样。我真的不知道下一步该尝试什么。我已经到了需要询问我的具体设置的地步，因为遵循其他教程或答案对我不起作用。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T14:25:43.437

错误 13 表示您的 apache 配置 (httpd.conf) 中指定的用户/组没有访问文件的权限。这些文件以及它们上面的所有目录都需要具有允许该用户和组的权限。

更棘手的一点是扩展权限。如果您正在运行 selinux，服务器用户可能会因为文件的扩展权限而被拒绝。要检查这一点，请运行（从命令行）：

```
setenforce 0 
```

如果问题消失（即页面可见），那么您的扩展权限将阻止访问。

有关详细信息，请参阅[http://wiki.apache.org/httpd/13PermissionDenied](http://wiki.apache.org/httpd/13PermissionDenied)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-18T22:58:24.447

Selinux 不希望 http 服务器访问 /home/domain 下的文件，因为它不是标准路径。

您可以使用以下命令更改它：

```
chcon -R --type=httpd_sys_rw_content_t /home/domain/public_html/ 
```

# angularjs - Angular sanitize / ng-bind-html 不起作用？

> ID：14726938
> 
> 赞同：51
> 
> 时间：2013-02-06T10:38:06.447
> 
> 标签：angularjs, ng-bind-html, ngsanitize

我已经设置了一个转发器，只要其中没有 html，就可以获取要显示的数据。

我已经包含`angular-sanitize.js`并尝试使用`ng-bind-html`

但是跨度内没有显示任何内容，仅在`ng-bind-html`属性内显示。所以看起来 sanitize 不起作用，

我读到这需要添加到应用程序依赖项中，但不确定在哪里这样做。

我刚刚在 Angular 网站上完成了 tut，所以现在只设置了一个非常基本的控制器。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-22T20:39:06.040

1.  您需要包含 angular-sanitize.js [http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular-sanitize.js](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular-sanitize.js)

2.  将“ **ngSanitize** ”添加到您的模块依赖项中

    > var myApp = angular.module('myApp', ['ngSanitize']);

3.  不要`{{}}`在属性中使用

    > <h1 ng-bind-html="item.title"></h1>

4.  不要使用[`$sce.trustAsHtml()`](https://docs.angularjs.org/api/ng/service/$sce#trustAsHtml)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T09:17:11.210

我对此的解决方案是从这里下载 js 文件

[http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular-sanitize.js](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular-sanitize.js)

我一直在使用我在 angular git repo 中找到的那个，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-11T18:35:12.523

我遇到了类似的问题，但我的有点奇怪。只有输入标签未呈现，而其他所有内容包括

```
<h3></h3>
<em></em> 
```

做过。几个小时后，我意识到除了

```
angular-sanitize.min.js 
```

我需要添加

```
textAngular-sanitize.min.js 
```

在输入标签起作用之前到我的项目。这真的很令人沮丧，所以我希望这可以帮助任何处于类似情况的人

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-12T12:49:16.410

使用指令时遇到此问题，解决方案未在代码中使用“替换”。

`ng-html-bind' 被用在 templateUrl 视图中的一个 div 上

```
appDirectives.directive('helpText', [function () {
return {
    restrict: 'E',
    //replace: true, // With this uncommented it does not work!
    scope: {
        displayText: '='
    },
    templateUrl: '/web/form/helptext',
    link: function (scope) {

    }

};
}]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-02T04:53:54.243

我的解决方案与 Seglespaan 正好相反。这是使用 Angular Sanitize 的 Bower 版本。

```
bower install angular-sanitize 
```

[https://github.com/angular/bower-angular-sanitize](https://github.com/angular/bower-angular-sanitize)

# php - 自动导入 CSV，无重复图像

> ID：14726942
> 
> 赞同：0
> 
> 时间：2013-02-06T10:38:17.483
> 
> 标签：php, magento

为我的 Magento 商店提供产品的制造商制作了 CSV。我想将该 CSV 集成到我的 Magento 商店中，以便每小时自动运行一次。但我认为当我每小时导入 CSV 时，图像会在产品概览中显示多个，因为每次导入 CSV 时都会添加图像。由于 CSV 是由制造商随新产品一起交付的，因此我无法对其进行编辑并删除已导入产品的图像列。或者这可能与PHP？

你知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T03:59:27.153

你能运行预定的自动化脚本吗？

这是一个在 Magento 中查找和删除所有重复图像的小脚本。

[http://www.aadil.co/how-to-delete-duplicate-product-images-in-magento/](http://www.aadil.co/how-to-delete-duplicate-product-images-in-magento/)

# ios - UITableViewController 以编程方式访问静态单元格问题

> ID：14726943
> 
> 赞同：5
> 
> 时间：2013-02-06T10:38:22.233
> 
> 标签：ios, objective-c, uitableview

假设我有一个包含 10 个静态单元格的表格，有没有办法以编程方式选择某个单元格？

我试过这个

```
UITableViewCell *cell = [self.tableView.subviews objectAtIndex:indexPath.row]; 
```

但这似乎并没有真正返回表格单元格。

这似乎使我的代码崩溃

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath]; 
```

我试图在代码中为静态单元格设置单独的高度。一种选择是为每个单独的静态单元制作插座，但这似乎很愚蠢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T17:03:53.640

要访问静态创建的单元格，请尝试以下操作：

```
UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath]; 
```

这适用于静态单元格。所以，如果你在...

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    return cell;

} 
```

...委托，您可以使用上述声明访问所有静态配置的单元格。从那里，你可以用“细胞”做任何你想做的事。

我有一个 ViewController，上面有两个 UITableViews。其中一个具有使用 Storyboard 静态定义的单元格，另一个具有使用代码动态定义的单元格。鉴于我使用相同的 ViewController 作为两个表的委托，我需要防止在已经创建单元格的地方调用 cellForRowAtIndexPath 的地方创建新单元格。

在您的情况下，您需要以编程方式访问您的单元格。

玩得开心。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-17T21:55:07.267

创建一个`@IBOutlet`.

即使您以编程方式重新排列静态单元格，这也将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:54:58.053

你可以试试这个...

```
UITableViewCell *cell = (UITableViewCell*)[yourTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:rowvalue inSection:0]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T11:01:03.260

如果您需要访问单元格对象，那么使用 UITableViewCell 方法 cellForRowAtIndexPath 是非常合适的。

这可能只是传递单元格（如果它是可见的），或者调用您应该提供的委托方法 cellForRowAtIndexPath （不要混淆它们）。如果那个崩溃，那么深入挖掘并调查崩溃的根本原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:43:12.753

使用`table view delegate`方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
     NSInteger height;  
     if(0 == indexPath.row)  
       {
          height = 44;
       }
     else
      {  
        height = 50;
      }
   return height;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-04T15:54:47.963

这是一个 Swift 2.3。解决方案。

UITableViewController 是在 IB 中创建的。

```
/*
    NOTE
    The custom static cells must be
    In the IB tableview if one is being used 
    They also must be updated to be MYCustomTableViewCell 
    instead of UITableViewCell
*/
import UIKit

class MYCustomTableVC: UITableViewController
{
    override func viewDidLoad()
    {
        super.viewDidLoad()
        // NO Nib registration is needed
    }

    override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell
    {
        let cell = super.tableView(tableView, cellForRowAtIndexPath: indexPath) as! MYCustomTableViewCell
        // MYCustomTableViewCell can be created programmatically 
        // without a Xib file 
        return cell
    }
} 
```

# javascript - 使用 underscore.js 的模板渲染在 IE8 中不起作用

> ID：14726948
> 
> 赞同：0
> 
> 时间：2013-02-06T10:38:35.920
> 
> 标签：javascript, jquery, templates, backbone.js, underscore.js

我在使用这两种浏览器`Backbone.js`，并且`Underscore.js`
在包括 IE9 在内的所有其他浏览器中都可以正常工作，但
我在**IE8中遇到了这个错误**

```
SCRIPT1010: Expected identifier 
underscore.js, line 1156 character 7 
```

下面是我收到错误的代码

**模板**

```
<script type="text/template" id="maps-template">
    <% _.each(data, function(d) { %>
        <map id="<%= d.for %>" name="<%= d.for %>">
            <% _.each(d.area, function(d) { %>
                <area shape="<%= d.shape %>" alt="<%= d.alt %>" title="<%= d.title %>" coords="<%= d.coords %>" href="<%= d.href %>" target="_blank" />
            <% });  %>
        </map>
    <% });  %>
</script> 
```

模板渲染

```
pc.ui.Maps = Backbone.View.extend({
    initialize: function() {
        this.render();
    },
    render: function() {
        var template = _.template($("#maps-template").html(), {data: pc.products.maps});
        $('body').append(template);
        return this;
    }
});

var view = new pc.ui.Maps(); 
```

`pc.products.maps`如下所示的对象数组在哪里

```
pc.products.maps = [
    {
        for: "dept_a",
        area: [
            {
                coords: '426,136,618,173',
                shape: 'rect',
                href: 'example.com',
                title: '',
                alt: ''
            },
            {
                coords: '427,156,718,173',
                shape: 'rect',
                href: 'example.com',
                title: '',
                alt: ''
            },
            {
                coords: '428,186,818,173',
                shape: 'rect',
                href: 'example.com',
                title: '',
                alt: ''
            }
        ]
    },
    {
        for: 'dept_b',
        area: [
        .....
        ]
    }
]; 
```

请帮助我知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:09:48.530

我只是猜测，也许`for`是保留字？尝试将它放在对象数组中的双引号中，例如`"for" : 'dept_b'`或只是更改该属性名称。

# aggregate - 较低级别的 MDX 聚合

> ID：14726949
> 
> 赞同：1
> 
> 时间：2013-02-06T10:38:36.860
> 
> 标签：aggregate, mdx, mondrian

我需要在上层聚合上层，并过滤来自下层的成员。它用于报告每年的销售额，并在特定月份进行过滤。这是 FoodMart 数据库和具有级别的 Product Dimension 的示例：

1.  [产品系列]
2.  【产品部】

* * *

MDX：

```
WITH
MEMBER [Measures].[Unit Sales Calculated] AS
    Aggregate(
        Intersect(
            Descendants(
                [Product].CurrentMember,
                [Product].[Product Department],
                SELF
            ),
            [Filtered Product Department]
        ),
        [Measures].[Unit Sales]
    )
SET [Filtered Product Department] AS
Except(
    [Product].[Product Department].Members,
    [Product].[Drink].[Alcoholic Beverages]
)
SELECT
 NON EMPTY [Measures].[Unit Sales Calculated] ON COLUMNS,
 NON EMPTY [Product].[Product Family].Members) ON ROWS
FROM [Sales] 
```

此解决方案有效，但**性能相当差**。有没有**更好**的方法来编写这个查询？

# xml - xmllint 输出行的问题

> ID：14726951
> 
> 赞同：3
> 
> 时间：2013-02-06T10:38:39.527
> 
> 标签：xml, bash, xml-parsing, sitemap, xmllint

我知道我的问题包括 2 个问题...

起初，我想使用 xmllint 来输出“loc”内容标签。我加载的站点地图有一个 xmlns="..."。

在 xmllint shell 上，我需要这样做：

```
setrootns
xpath //defaultns:loc 
```

那行得通……没问题。但我需要在 bash 脚本中执行此操作。

（AFAIK）xmllint 没有选项告诉“我们走吧，setrootns”，所以我不能这样做：

```
xmllint --xpath "//loc" sitemaps.xml
# or
xmllint --xpath "//defaultns:loc" sitemaps.xml 
```

这是第一个问题，我如何告诉 xmllint 加载默认的 ns ？

如果我不能，让我们看看我的第二个解决方案：

我可以删除 xmlns 属性，然后，没有 ns 可以使用：

```
xmllint --xpath "//loc" <(sed -r 's/xmlns=".*?"//' sitemaps.xml) 
```

但是......现在......我的 500 个“loc”内容的整个响应被串联在一行中！......

我也试过这个：

```
xmllint --shell sitemaps.xml <<EOF
setrootns
xpath //defaultns:loc/text()
EOF 
```

或者再次

```
xmllint --shell sitemaps.xml <<EOF
setrootns
cat //defaultns:loc
EOF 
```

第一个给我（例如）

```
465  TEXT
    content=http://... 
```

带有截断的网址

第二个每两行给我一个“------”......最后一行给我一个“/>”......

我开始非常紧张...... :)

如果您找到任何解决方案，非常感谢。

目标是拥有每个位置，每行一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:18:35.743

@BrnVrn 是对的，我只需要在标签后附加“\n”

然后我找到了关于命名空间的答案，我可以使用 local-name 不检查默认命名空间

所以，我这样做了：

```
xmllint  --xpath "//*[local-name()='loc']/text()" <(sed 's/<loc>/<loc>\n/g' sitemaps.xml) 
```

它有效！

谢谢大家

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:38:21.143

我曾经做过类似的事情：

```
clean_xml_message=$(echo "$xml_message" | sed 's/xmlns/ignore/') 
```

最终，您可以尝试放回新行：

```
sed 's/></>\n</g' 
```

我猜你只想要没有`<loc></loc>`? 然后我会用 xmllint 选择所有 loc 元素：

```
<loc>...</loc><loc>...</loc><loc>...</loc> 
```

然后添加新行：`sed 's/<loc>/<loc>\n/g' | sed 's#</loc>#\n</loc>#g'`

```
<loc>
...
</loc><loc>
...
</loc><loc>
...
</loc> 
```

最后删除标签`grep -v "<loc>" |grep -v "</loc>"`或一个人`grep -v "$<"`可以做到这一点。（-v 是反转选择：[http](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep) ://unixhelp.ed.ac.uk/CGI/man-cgi?grep ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-22T19:33:20.260

对于换行问题，您可以查看此 repo：

[https://gitlab.gnome.org/cykerway/libxml2](https://gitlab.gnome.org/cykerway/libxml2)

及其合并请求：

[https://gitlab.gnome.org/GNOME/libxml2/merge_requests/8](https://gitlab.gnome.org/GNOME/libxml2/merge_requests/8)

基本上，它可以让您在 xpath 节点集结果中选择分隔符。所以有了这个`example.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu>
    <food>
        <name>Hot Chocolate</name>
        <price>$1.99</price>
    </food>
    <food>
        <name>Iced Tea</name>
        <price>$2.99</price>
    </food>
</menu> 
```

你可以做：

```
# xmllint --xpath "//name/text()" --xpath-separator "\n" example.xml 
```

输出：

```
Hot Chocolate
Iced Tea 
```

# php - Cookie 在 android 上过期太快

> ID：14726965
> 
> 赞同：1
> 
> 时间：2013-02-06T10:39:02.817
> 
> 标签：php, android, cookies

我正在运行一个 php 网站，该网站在玩实时纸牌游戏时跟踪分数。我正在使用 cookie 来存储变量，例如持续 1 小时的玩家姓名，并且每次添加新分数时都会重新设置。我不会将它们存储在会话 cookie 中，因为我想在意外关闭后将它们存储在系统中。

所有这些在 PC 或 Mac 上完美运行，在 iOS 上运行良好，但对于 android，这似乎是一个问题。当从安卓设备访问网站时，cookie 似乎会在不到 5 分钟后过期，即使它们设置为一小时。

还有其他人认识到/解决这个问题吗？

# jquery - 使用magento中的拖放将产品添加到购物车

> ID：14726971
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:08.947
> 
> 标签：jquery, jquery-ui, magento, magento-1.7, jquery-droppable

我想使用拖放将产品添加到购物车。为此，我正在使用 jQuery UI Droppable 。代码是： -

```
 <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
     $(function() {
$( ".category-products" ).accordion();
$( ".product-name" ).draggable({
  appendTo: "body",
  helper: "clone"
});
$( ".block-content ol" ).droppable({
  activeClass: "ui-state-default",
  hoverClass: "ui-state-hover",
  accept: ":not(.ui-sortable-helper)",
  drop: function( event, ui ) {
    $( this ).find( ".placeholder" ).remove();
    $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
  }
}).sortable({
  items: "li:not(.placeholder)",
  sort: function() {
    // gets added unintentionally by droppable interacting with sortable
    // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
    $( this ).removeClass( "ui-state-default" );
  }
}); 
```

});

使用此代码产品名称可放入购物车，但不会添加到购物车。我尝试但无法将产品名称添加到购物车。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:03:35.727

假设您的产品没有任何自定义选项。

将您的产品 ID 存储为产品列表中的隐藏字段（可拖动的 li）

```
 <li>Lolcat Shirt
          <input type='hidden' value='2' name='pid' />
      </li> 
```

然后做

```
 drop: function( event, ui ) {
    $( this )
      .addClass( "ui-state-highlight" )
      .find( "> p" )
        .html( "Dropped!" );

    add product to cart
    p_id = ui.draggable.find('input[name="pid"]').val();
    $.get("/path/to/app/checkout/cart/add?qty=1&product=" + p_id)

    return false;
  } 
```

见[http://jsfiddle.net/C2Ufk/](http://jsfiddle.net/C2Ufk/)

您将需要做类似的事情来删除项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T07:29:56.430

我有一个相同的模块..

[拖放排序产品](http://www.magentocommerce.com/magento-connect/drag-drop-sort-products.html)，它对我来说很好用.. 和真正伟大的发展。

# mysql - mysqldump 合并行

> ID：14726975
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:21.263
> 
> 标签：mysql, sql, merge, mysqldump, database-replication

我正在使用 mysqldump 将一个表复制到另一台服务器。每次我启动该过程时，mysqldump 都会将所有数据插入表中。

例如，假设我在表中有 1 条记录，而我在此表上没有主键。

我`--no-create-info`目前使用选项来转储所有仅插入数据。

第一次运行我得到 1 条记录
第二次运行我得到 2 条记录......
等等

如果 mysqldump 可能的话，我需要的是一种合并操作。

所以结果应该是

第一次运行我得到 1 条记录
第二次运行我得到 1 条记录

新插入记录后

第三次运行我应该有 2 条记录

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:50:36.900

看看这个页面，[http://shiplu.mokadd.im/110/splitting-huge-mysql-dump-for-easy-restore/](http://shiplu.mokadd.im/110/splitting-huge-mysql-dump-for-easy-restore/)它显示了拆分单个表的转储的各种方法。

我还没有时间尝试这个，您可能需要在命令中添加“--no-create-info”，如果您使用该页面上的任何方法，我很想知道您的最终解决方案。

好的，我有时间尝试将一个包含 1300 万条记录的大表拆分为三个文件，因为我的服务器在处理单个文件时遇到了问题。以下对我有用。

mysqldump --host=localhost --user=user --password=password --where "1 LIMIT 0, 5000000" db_name table_name > table_name_01.sql

mysqldump --host=localhost --user=user --password=password --where "1 LIMIT 5000000, 5000000" --no-create-info db_name table_name > table_name_02.sql

mysqldump --host=localhost --user=user --password=password --where "1 LIMIT 10000000, 5000000" --no-create-info db_name table_name > table_name_03.sql

# asp.net - 当浏览器窗口失去焦点时，带有 NullText 的 ASPxTextBox 失去价值

> ID：14726977
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:26.153
> 
> 标签：asp.net, devexpress

我有一个带有 NullText 的 ASPxTextBox。它用于用户名。一些用户正在将注册电子邮件中的用户名复制到此文本框中。当他们通过右键单击和上下文菜单执行此操作并返回到他们的电子邮件客户端复制密码时，文本框被清空，即显示 NullText。
我可以重现这个。但是，当使用 Ctrl+V 粘贴用户名时，它是持久的。在我看来，ASPxTextBox 正在寻找一个 keydown 事件或类似的东西来确定文本是否已更改。
如何使文本在所有情况下都持久化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:09:03.667

这种行为似乎是浏览器/表单自动完成功能的副作用。

您可以尝试使用具有占位符属性（HTML5）的常规重现此问题吗？

如果行为相同，请参阅[此](https://stackoverflow.com/questions/8834030/how-to-call-a-js-function-on-data-selection-in-input-type-text-from-autocom/8865109#8865109)线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:28:34.077

我正在使用这个 jquery 插件解决这个问题： [https ://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

# java - JUnit 测试用例 @Before 和 @After 注解

> ID：14726978
> 
> 赞同：3
> 
> 时间：2013-02-06T10:39:28.780
> 
> 标签：java, unit-testing, junit

我们遵循以下实践来为我们的方法编写 JUnit 测试。

*   每个方法都有自己的类，其中包含该方法所需的所有测试。例如：类测试 {...}

*   @Before 将包含诸如“实体”之类的方法的必要设置，因此当我们进行编辑时，我们不需要复制/粘贴代码来在每个方法级别添加实体。

现在我的问题是，我们应该通过在@after 方法中编写代码来丢弃测试数据来删除我们输入的所有数据，还是就这样？

我知道我们可以使其可配置，但最佳实践是什么？保留或删除它。根据我的直觉，删除应该更好，就好像数据库中已经有一些重复的数据一样——它可能会触发错误的真或假。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:41:55.940

这取决于您对“不要重复自己”原则的坚持程度。还值得记住的是，您`@After`在每个都调用过`@Test`并且`@AfterClass`在所有`@Test`运行后调用过。使用这种粒度，删除重复应该很简单，但仍然拆分那些应该只在最后或每次测试之后运行的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:01:06.347

作为最佳实践，我建议在每次测试之间清除数据存储，以确保每个测试与其他测试隔离。

`@After`如果您想保持某些设置处于活动状态（`@BeforeClass`例如），可以使用该方法完成此操作。它也可以在`@Before`方法中完成，例如通过为每个测试使用新实例覆盖变量，如果这样做，则不需要在测试后进行清理。

要清理`@BeforeClass`您应该使用的方法设置，`@AfterClass`例如关闭数据库连接或类似的东西，只需要完成一次。但这并不是每一种单元测试都需要的。

# c# - 根据 C# 中的计算机设置格式化数字（数量）

> ID：14726980
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:36.847
> 
> 标签：c#

在 C# 中，我试图根据计算机上的设置格式化金额。

因此，例如，如果 en-US 上的设置是 xxxx.xx（用点分隔）而在 nb-NO 中是 xxxx.xx（用逗号分隔），我想自动检测并相应地格式化金额。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:45:59.813

试试这个

```
double amount = xxxx.xx;
string formattedCurrency=amount.ToString("C", CultureInfo.CurrentCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:52:13.033

如果您只是想将值格式化为货币（作为字符串），您可以这样做：

```
MyDecimal.ToString("c"); 
```

如果您正在寻找某些属性，您可以查看特定文化的[`NumberFormat`属性](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.numberformat.aspx)，它是 type [`NumberFormatInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)。

此类包含告诉您文化的千位分隔符、小数分隔符、货币符号、如何处理负数等的属性。

货币的有用属性：

*   [`CurrencyDecimalSeparator`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencydecimalseparator.aspx)
*   [`CurrencySymbol`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencysymbol.aspx)
*   [`NumberDecimalSeparator`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimalseparator.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:34:51.947

您可以使用两个接口 IFormatProvider、ICustomFormatter 来创建您的格式： public class TestConvertor: IFormatProvider, ICustomFormatter { public object GetFormat(Type formatType) { if (formatType == typeof(ICustomFormatter)) return this; 返回空值；}

```
 public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        decimal amount = arg is decimal ? (decimal) arg : 0;
        return amount.ToString("C", CultureInfo.CurrentCulture);

    }
}
class Program
{
    static void Main(string[] args)
    {
        double amount = 2541.25;
        var f = string.Format(new TestConvertor(), "{0:Currency}", 2545);
        Console.WriteLine(f);
        Console.ReadKey();

    }
} 
```

# c# - 如何在页面索引更改事件上显示模式弹出窗口？

> ID：14726984
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:49.697
> 
> 标签：c#, asp.net

我有一个用户控件，其中包含 gridview。在我的 aspx 页面中，我有模式弹出窗口来显示此用户控件。因此，当我单击页面索引时，模式弹出窗口消失了。

那么，如何避免在 asp.net 中页面索引更改时模式弹出窗口消失。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:17:23.487

C#代码：

```
public bool showModelPopup = false;

void GridView1_PageIndexChanging(Object sender, GridViewPageEventArgs e)
{
  showModelPopup  = true;
  //Your code
} 
```

.apsx: (jQuery)

```
$(function(){
  if ("<%=showModelPopup%>" == "true") 
   $("#ModelPopUpID").show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:55:47.037

每次回发都会导致弹出窗口消失。如果在您的弹出窗口期间只有某些回发可以处理，您可以将 a`MyModalPopupExtender.Show()`放入处理该回发的代码中。

# google-maps-api-3 - 谷歌地图标记不会显示

> ID：14726985
> 
> 赞同：0
> 
> 时间：2013-02-06T10:39:54.267
> 
> 标签：google-maps-api-3, google-maps-markers

我完全不知道为什么。这是我第一次尝试使用 Maps API v3 执行此操作。地图显示正确，但看不到任何标记。这是代码：

```
<script>
window.onload = function(evt) {
 if(document.readyState === 'complete') {
   var latlng = new google.maps.LatLng(50.833, 4.333);
   var styles = [
     {
       stylers: [
         { hue: '#ffdd00' }
       ]
     }
   ];
   var myOptions = {
     zoom: 16,
     scrollwheel: false,
     mapTypeControl: false,
     disableDoubleClickZoom: true,
     draggable: false,
     navigationControl: false,
     streetViewControl: false,
     center: latlng,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     styles: styles
   };
   var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);    
   var image = '/img/marker.png';
   map.addMarker({
     lat: 50.833,
     lng: 4.333,
     title: 'Here it is',
     icon: image,
     });        
   }
}
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:44:29.887

没有`addMarker()`方法。

尝试`new google.maps.Marker()`

```
var marker = new google.maps.Marker({
     position: latlng, 
     map: map, 
     title: 'Here it is',
     icon: image,
     }); 
```

# jquery - 延迟对象：解决后重新启动

> ID：14726987
> 
> 赞同：1
> 
> 时间：2013-02-06T10:39:59.180
> 
> 标签：jquery, deferred

如何将延迟从已解决设置回初始状态？

我尝试创建一个新队列，但在这种情况下，如果我不先解决它，我将丢失迄今为止添加的所有事件。

是否有延迟的状态模型（处理->已解决......也许介于两者之间，如何从已解决进入处理......）

这是我到目前为止所拥有的：

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <script src="jquery-1.8.3.min.js"></script>
    <script>
        var deferredReady = jQuery.Deferred();

        $(function () {
            $('#Queue1, #Queue2').click(function () {
                var text = $(this).text();
                deferredReady.done(function () {
                    $('<p>', {
                        text: text
                    }).appendTo('body');
                });
            });
            $('#QueueReady').click(function () {
                deferredReady.resolve();
            });
            $('#NewQueue').click(function () {
                // deletes the old queue (resolve it first)
                deferredReady = jQuery.Deferred();
            });
        });
    </script>
</head>
<body>
    <button id="Queue1">Add Comamnd to ready Queue</button>
    <button id="Queue2">Add  otherComamnd to ready Queue</button>
    <button id="QueueReady">Set Queue to ready</button>
    <button id="NewQueue">Set Queue to ready</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:50:41.737

不，这与延迟对象的初衷相矛盾。只要 a`Deferred`被解决或拒绝，就会调用先前指定的回调，并且 Deferred*不可撤销地*从其初始“挂起”状态更改为“已解决”或“已拒绝”。将其设置回初始状态会发生什么？如果您想将新的处理程序添加到可能已经或可能尚未解决的延迟对象，这不是问题。处理程序将立即被调用：

```
$.Deferred().resolve().then(function() { alert('This works!'); }); 
```

# mongodb - 如何嵌入另一个时间戳但现在不嵌入到 mongoid

> ID：14726988
> 
> 赞同：0
> 
> 时间：2013-02-06T10:40:00.490
> 
> 标签：mongodb, timestamp

我有应该添加到 mongodb 的活动，活动有，日期和时间，我应该对它们进行排序，我想要的是没有另一个字段用于时间戳和索引该字段，我不想要文档的时间已创建，我想将该活动的时间戳嵌入到 mongoid 中，我搜索并尝试了这个但没有奏效，

```
"_id" => new MongoId($stamp) 
```

有没有机会，我可以将未来的时间戳嵌入到 mongoid 中？谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:15:13.293

这是可能的，但不能直接通过驱动程序。我[在过去使用 PHP 驱动程序在 Create MongoDB ObjectID from date 中](https://stackoverflow.com/questions/14370143/create-mongodb-objectid-from-date-in-the-past-using-php-driver/14380093#14380093)编写了一个示例，向您展示了如何执行此操作。

# c# - C# 错误处理 catch 块

> ID：14726990
> 
> 赞同：0
> 
> 时间：2013-02-06T10:40:06.887
> 
> 标签：c#

为什么大多数时候建议我们不应该捕获“异常”之类的错误，而是捕获我们作为开发人员所期望的错误。捕获通用错误是否会影响性能，还是从最佳实践的角度推荐？

```
 try
  {
        // Do something
  }
  catch(Exception e)
  {
        //Log error
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T10:42:00.473

最佳实践是先捕获特定异常，然后再处理更通用的异常。

[异常处理（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/ms173162.aspx)

> 可以将具有不同异常过滤器的多个 catch 块链接在一起。catch 块在您的代码中从上到下进行评估，但对于每个抛出的异常只执行一个 catch 块。执行指定所引发异常的确切类型或基类的第一个 catch 块。如果没有 catch 块指定匹配的异常过滤器，则选择没有过滤器的 catch 块（如果语句中存在一个过滤器）。**首先定位具有最具体（即最衍生的）异常类型的 catch 块很重要。**

对于您的问题：

> 为什么大多数时候建议我们不应该捕获“异常”之类的错误，而是捕获我们作为开发人员所期望的错误。

一个例子是捕捉[NullReferenceException](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)。捕获 NullReferenceException 从来都不是一种更好的做法，相反，在使用其实例成员之前，应该始终检查对象是否为空。例如在字符串的情况下。

```
string str = null;
try
{
   Console.WriteLine(str.Length)
}
catch(NullReferenceException ne)
{
    //exception handling. 
} 
```

相反，应该进行检查以检查空值。

```
if(str != null)
   Console.WriteLine(str.Length); 
```

**编辑：**

我想我的问题是错误的，如果你问的是哪个异常应该被捕获，哪些不应该那么 IMO，那些可以处理的异常应该被捕获并且休息应该留在图书馆，这样它们就可以冒泡到上层进行适当处理的层。一个例子是违反主键约束。如果应用程序正在从用户那里获取输入（包括主键）并且该日期被插入到数据库中，则可以捕获该异常并向用户显示一条消息“记录已存在”，然后让用户输入一些不同的价值。

但是，如果异常与外键约束相关（例如，下拉列表中的某些值被认为是无效的外键），那么该异常应该冒泡并且通用异常处理程序应该将其记录在适当的位置。

例如，在 ASP.Net 应用程序中，这些异常可以记录在 Application_Error 事件中，并且可以向用户显示一般错误页面。

**编辑2：** 对于OP的评论：

> 如果在低级别，尽管知道错误是否为 sqlexception，但在捕获一般错误时是否会出现性能下降

即使会有任何性能差异，它也应该可以忽略不计。但是捕获特定的异常，如果您知道异常将要发生，`SqlException`那么就捕获它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T10:43:36.007

您应该只捕获您可以处理的异常。`Exception`太通用了，所以大多数时候你不能说你可以处理。这有点好笑，但您应该只捕获除您之外的异常:)

有些情况你需要捕捉`Exception`但很少见，你应该在大多数情况下避免它。通常它表示一些设计问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T11:24:35.730

查看[Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)（Vexing exceptions）了解处理异常的最佳方式。

• 不要捕获**致命异常**；无论如何，您对它们无能为力，并且试图通常会使情况变得更糟。

• 修复您的代码，使其永远不会触发**愚蠢的异常**——“索引超出范围”异常不应该在生产代码中发生。

• 通过调用那些在非异常情况下抛出的令人烦恼的方法的“Try”版本，尽可能避免令人烦恼的异常。如果你无法避免调用一个令人头疼的方法，请捕捉它**令人头疼的异常**。

• 始终处理表示意外**外部**条件的异常；一般来说，预测每一个可能的失败是不值得或不切实际的。只需尝试操作并准备处理异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T10:53:32.733

捕获您打算处理的那些异常。您通常希望在这样的上下文（方法）中处理特定的异常，在这种情况下，您有足够的信息来处理报告的错误（例如，访问用于清理的对象）。

如果`try`块内的代码抛出不同类型的异常，您可能希望在同一方法中处理一些异常并重新抛出其他异常，以便在调用方方法中处理它们（因为在该上下文中，您有处理这些异常的资源）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T10:46:34.570

比要求更频繁地使用异常处理实际上是一种懒惰的编程方式。假设你有一个`DataTable`并且你想访问第一行。

```
public DataRow AccessFirstRow(DataTable dt)
{
  try
  {
    return dt.Rows[0];
  }
  catch (Exception e)
  {
    //There isn't a first row or dt is null
  }
} 
```

代替

```
public DataRow AccessFirstRow(DataTable dt)
{
  if(dt != null)
   if(dt.Rows.Count > 0)
     return dt.Rows[0];
  //If we can't access dt, then don't
  return null;
} 
```

我的经验法则是：

> 例外只应在例外情况下使用。

但是，如果您确实决定处理它们，则如上所述处理您知道可能会遇到的特定异常，而不是通用异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T10:46:36.000

这是一个最佳实践。这个想法是，您应该快速明确地处理已知异常，同时在程序中拥有更普遍的异常，因为意外异常可能是由一些更主要/基本错误引起的。

# algorithm - 查找完全由 1 组成的最大子数组（矩形）的区域的算法

> ID：14726995
> 
> 赞同：-3
> 
> 时间：2013-02-06T10:40:21.207
> 
> 标签：algorithm, language-agnostic

有一个二维二进制数组（`0`和的二维数组`1`），其中`m`行和`n`列；`1`给出一个有效的算法来找到完全由s组成的最大子数组（矩形）的区域。

```
public int findMaxRectangleArea(int[][] A,int m,int n); 
```

有人可以帮我解决算法部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:58:00.583

我会尝试这样的方法：

逐行从左到右迭代，直到找到`0`.

这`0`可能已经确定了`1`s 的两个矩形：

*   它上面的所有行
*   从左上角到左边的位置`0`

其中一个更大，记住它。

![第一步](../Images/bf044996d6b142555bc68f9a16a24edc.png)

然后递归地下降到三个未知扇区（其中两个部分未知），它们可能仍然包含一个比您已经找到的更大的矩形：

![第二步](../Images/2383b751bbb4d48825c5f99498d7de1b.png)

确保您不再迭代已知行，这是多余的。

我相信这个解决方案最多可以查看每个字段两次（递归步骤的扇区重叠），所以它应该在 θ(x*y) 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:44:48.107

这完全取决于您的最小数组维度有多大。如果它小于目标平台上的最大字长，则可以将数组制作成一维位图数组，并使用一系列滑动位掩码窗口来查找矩形。

# java - 如何在单个 Swing 应用程序中拥有多种外观和感觉

> ID：14726997
> 
> 赞同：1
> 
> 时间：2013-02-06T10:40:27.090
> 
> 标签：java, swing, look-and-feel, jeditorpane, nimbus

我在我的 Swing 项目中使用 Nimbus 外观。

它在项目中显示了出色的外观，但`JEditorPane`在应用 Nimbus 外观时未显示正确的字体格式

那么单个应用程序是否可以具有多种外观和感觉？默认情况下，项目采用主屏幕上应用的外观。它可以改变项目执行之间的外观和感觉吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:16:52.907

您的建议在技术上是可行的，但除了行为良好的 UI 委托实现所使用的封装最完善的默认值之外，该方法很脆弱。在此[示例](https://stackoverflow.com/a/14262706/230513)中，显示了一个借用`JTree`图标。对于您的应用程序，相关键是“EditorPane.font”。如果您更改它，请记住以下几点：

*   首选逻辑字体系列而不是物理字体，例如`Font.SANS_SERIF`或`Font. DIALOG`。

*   考虑使用该`deriveFont()`方法更改现有默认值。

*   在您的目标平台上进行广泛测试。

*   在可能的情况下考虑另一种方法。

![图片](../Images/ed719f55bcd70b3329d4721174ccc75c.png)