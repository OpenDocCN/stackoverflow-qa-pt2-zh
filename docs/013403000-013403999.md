# StackOverflow 问答 13403000-13403999

# sql - 声明临时过程变量？

> ID：13403001
> 
> 赞同：0
> 
> 时间：2012-11-15T17:30:51.327
> 
> 标签：sql, sql-server, sql-server-2008

我正在关注这篇文章：[SQL：INSERT INTO...VALUES..SELECT](https://stackoverflow.com/questions/856707/sql-insert-into-values-select)

我的问题是如何声明从 SELECT 语句中分配值的临时 @value1 ？我有类似的东西

```
CREATE PROCEDURE name
(
@arg1 as type1,
@arg2 as type2
)

AS
    @value1 = SELECT x from tabley WHERE <something>

    INSERT INTO Table(x,y,z) VALUES(@arg1,@arg2,@value1) 
```

但我不知道在哪里声明和设置@value1??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:32:55.140

```
CREATE PROCEDURE name
(
@arg1 as type1,
@arg2 as type2
)

AS
DECLARE @value1 as type1

     SELECT @value1=x from tabley WHERE <something>

    INSERT INTO Table(x,y,z) VALUES(@arg1,@arg2,@value1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:32:19.713

```
SELECT @value1 := x from tabley WHERE <something> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:32:30.153

`DECLARE @value1 as type = (SELECT ...)` 代替你的声明

# javascript - Chrome 将 dataTransfer.types 处理为对象

> ID：13403008
> 
> 赞同：1
> 
> 时间：2012-11-15T17:31:09.327
> 
> 标签：javascript, data-transfer

我在 Chrome 24.0.1312.5 中遇到了一个非常奇怪的 dataTransfer 问题，我希望我能得到一些想法。基本上，我有一个`nodeIterator`从 iframe 中挑选出一些有用的元素。对于这些元素中的每一个，我都添加了事件侦听器以允许删除内容。我对这段代码有疑问：

```
currentNode.addEventListener('dragover', function (e) {
    // Only accept images
    // Error occurs in below conditional
    if (e.dataTransfer.types.contains('text/uri-list')) {
        e.preventDefault();
    }
}); 
```

这是我添加数据的代码部分：

```
figure.draggable = 'true';
figure.addEventListener('dragstart', function (e) {
    e.dataTransfer.setData('text/uri-list', img.src);
    e.dataTransfer.setData('text/plain', img.alt);
    e.dataTransfer.setData('application/x-trash.delete', img.id);
}); 
```

我在控制台中得到的错误是这样的：

```
Uncaught TypeError: Object text/plain,text/uri-list,application/x-trash.delete
has no method 'contains' 
```

我写了一个应该能够重现这个问题的[小提琴，但它当然工作得很好。](http://jsfiddle.net/U3LMT/13/)

对我可能遗漏的东西有什么想法吗？或者我应该检查的其他相关代码部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T06:32:58.223

Chrome 中返回的 dataTransfer.types 似乎是一个数组。您可以使用 indexOf() 而不是 contains 方法来解决问题。

# django - 来自 CreateView 中的字符串的 Django ManyToMany

> ID：13403010
> 
> 赞同：3
> 
> 时间：2012-11-15T17:31:12.697
> 
> 标签：django, many-to-many, create-view

我想要做的是让人们通过在字符域中书写来标记帖子，用“，”分隔标签。

现在这是我的模型（只是我们关心的部分）

```
class Tag(models.Model):
    name = models.CharField(max_length=100, default='')

    def __unicode__(self):
        return "%s" % (self.name)

class Post(models.Model):
    .....
    tags = models.ManyToManyField(Tag,blank=True, null=True) 
```

然后我有一个表格

```
class PostForm(ModelForm):
...
    tags = forms.CharField(label=(u'Tags '))

    class Meta:
        model = Publication

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_method = 'post'
        self.helper.add_input(Submit('submit', 'Invia'))
        self.helper.form_class = 'form-horizontal'

        super(PostForm, self).__init__(*args, **kwargs) 
```

然后我有我的 createView，我覆盖了 form_valid 方法来进行字符串解析

```
class PostAdd(CreateView):
    template_name = 'form.html'
    form_class = PostForm
    success_url='/'

    def form_valid(self, form):
        pub = form.save(commit=False)
        pub.tags=None
        pub.save()

        tags=str(self.request.POST.get('tags'))
        tags = tags.split(',')
        tl=[]
        for tag in tags:
            tl.append(Tag.objects.get_or_create(name=tag))
        pub.tags.add(tl)

        form.save_m2m()
        return HttpResponseRedirect(self.get_success_url()) 
```

我所做的是使用 commit=False 保存表单以更改标签的值。我尝试使用`None`or`[]`但在所有情况下，我返回的是`pub.tags=None`分配行中的错误：

```
'Post' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:49:20.407

在这里，您将“标签”属性设置为无，但您的出版物还没有主键，因此多对多关系很难。

你要做的就是先保存它。

[您将在此处](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)找到有关此的更多信息

```
def form_valid(self, form):
    pub = form.save(commit=False)
    pub.save()
    pub.tags=None

    tags=str(self.request.POST.get('tags'))
    tags = tags.split(',')
    tl=[]
    for tag in tags:
        tl.append(Tag.objects.get_or_create(name=tag))
    pub.tags.add(tl)
    pub.save()
    form.save_m2m()
    return HttpResponseRedirect(self.get_success_url()) 
```

# javascript - 在触摸屏上制作 QapTcha 功能

> ID：13403015
> 
> 赞同：3
> 
> 时间：2012-11-15T17:31:31.637
> 
> 标签：javascript, jquery, touch, captcha

我正在尝试将[Qaptcha](http://demos.myjqueryplugins.com/qaptcha/)功能添加到我的评论表单中，它工作正常，但在触摸屏上不起作用。

[我在这里](https://stackoverflow.com/questions/5186441/javascript-drag-and-drop-for-touch-devices)读到，解决此问题所需要做的就是添加：

```
function touchHandler(event)
{
 var touches = event.changedTouches,
    first = touches[0],
    type = "";

     switch(event.type)
{
    case "touchstart": type = "mousedown"; break;
    case "touchmove":  type="mousemove"; break;        
    case "touchend":   type="mouseup"; break;
    default: return;
}
var simulatedEvent = document.createEvent("MouseEvent");
simulatedEvent.initMouseEvent(type, true, true, window, 1,
                          first.screenX, first.screenY,
                          first.clientX, first.clientY, false,
                          false, false, false, 0/*left*/, null);

first.target.dispatchEvent(simulatedEvent);
event.preventDefault();
}

function init()
{
   document.addEventListener("touchstart", touchHandler, true);
   document.addEventListener("touchmove", touchHandler, true);
   document.addEventListener("touchend", touchHandler, true);
   document.addEventListener("touchcancel", touchHandler, true);    
} 
```

只需在我的 document.ready 中调用 init() 函数。

这是我的文档的一部分。准备好：

```
$outer.= '<script type="text/javascript">jQuery(document).ready(function(){if(jQuery("p:has(\'textarea\')").length>0) jQuery("p:has(\'textarea\')").before(\'<div class="QapTcha"></div>\'); else jQuery("#comment").before(\'<div class="QapTcha"></div>\');jQuery(\'.QapTcha\').QapTcha({disabledSubmit:true,autoRevert:true});});</script>'."\n"; 
```

我试过了，但无法让它发挥作用。**也许我在 document.ready 中没有正确调用它**？你能帮忙吗？

# mysql - 获取上次更改 MySQL 数据库的日期/时间

> ID：13403016
> 
> 赞同：14
> 
> 时间：2012-11-15T17:31:36.130
> 
> 标签：mysql, datetime, timestamp

我正在使用 MySQL，我想获取数据库中任何表的最后一次更改的日期/时间。我的每个表都有一个自动更新的“*_modified”时间戳，所以我可以使用它（* 是前缀）。

这样做的目的是确定自上次数据库备份的日期/时间以来数据是否发生了变化。

我想知道有没有更简单的方法可以使用 DESCRIBE 或 SHOW 来做到这一点？我已经搜索并尝试过，但还没有找到任何东西。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T17:33:48.277

```
SELECT update_time
FROM   information_schema.tables
WHERE  table_schema = 'dbName'
       AND table_name = 'tableName' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-18T15:43:19.777

我从[http://mysqladministrators.blogspot.it/2012/02/get-database-size.html找到了这个方法](http://mysqladministrators.blogspot.it/2012/02/get-database-size.html)

我不确定它是否可以帮助你，因为我在 MySql 中没有做好准备

**获取数据库大小、可用空间和上次更新**

仅通过从表 TABLES 中的 INFORMATION_SCHEMA 数据库查询到您的查询浏览器或 CLI 来获取当前数据库大小。

```
SELECT table_schema "Data Base Name", 
sum( data_length + index_length ) / 1024 / 1024 "Data Base Size in MB" 
FROM information_schema.TABLES 
GROUP BY table_schema ; 
```

获取数据库可用空间

```
SELECT table_schema "Data Base Name", 
sum( data_length + index_length ) / 1024 / 1024 "Data Base Size in MB", 
sum( data_free )/ 1024 / 1024 "Free Space in MB" 
FROM information_schema.TABLES 
GROUP BY table_schema; 
```

获取数据库最后一次更新，按更新时间排序，然后按创建时间排序。

```
SELECT MAX(UPDATE_TIME), MAX(CREATE_TIME), TABLE_SCHEMA 
FROM `TABLES` 
GROUP BY TABLE_SCHEMA 
ORDER BY 1, 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-04T12:34:46.720

公认的答案很好，但我认为更好的格式是：

```
SELECT table_name, update_time
FROM   information_schema.tables
WHERE  table_schema = 'myDBName'
order by update_time DESC 
```

因为，我们并不总是知道哪些表被触动了，这有一个好处是可以通过显示最近更新的表来提供关于活动是什么的线索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-04T06:48:46.043

简单地说，要获取一个数据库下的所有表，请使用此查询

```
SELECT TABLE_NAME,CREATE_TIME,UPDATE_TIME
FROM   information_schema.tables
WHERE  table_schema = 'database_name' 
```

就这样

# java - Java：在“this”类而不是子类中调用函数（类似于“super”）

> ID：13403017
> 
> 赞同：3
> 
> 时间：2012-11-15T17:31:36.037
> 
> 标签：java, inheritance

是否可以在 Java 中调用可覆盖的方法，使其始终执行“本地定义”版本而不是子类的覆盖版本？即有没有一个类比`super`是指这个类，而不是超类？

让我举一个代码示例，希望能清楚地说明我要做什么：

```
class A {
    void foo() {
        System.out.println("Foo from A");
    }

    void bar() {
        foo();  // <-- This is the important line!
    }
}

class B extends A {
    @Override
    void foo() {
        System.out.println("Foo from B");
    }
} 
```

如果我这样做`new B().bar()`了，它将调用中`bar()`定义的方法`A`，该方法调用`foo()`被覆盖`B`以打印“Foo from B”。

有没有一种方法可以强制`bar()`方法调用`foo()`中定义的方法，`A`而不是`B`？就像我可以使用`super.foo()`in`B`调用`foo()`定义的方法一样`A`？不幸的是 using`this.foo()`仍然调用子类的版本。即使是类似`((A) this).foo()`或`A.this.foo()`不起作用的东西。

`foo()`显然，我可以简单地定义in的私有或最终版本`A`并调用它。但我希望有一个解决方案，我所做的只是将上面代码示例中的“重要行”更改为调用 foo() 以使其打印“Foo from A”的不同方式，最好不要使用反射之类的技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:45:51.710

你的对象**是**一个`B`. 它**不是**一个`A`！这是一个例子：

```
public class Apple {
    public void printColor() {
        System.out.println("I am red");
    }

    public void bar() {
       printColor();
    }
} 
```

然后是子类：

```
public class GrannySmithApple extends Apple {
    public void printColor() {
        System.out.println("I am green");
    }
} 
```

`GrannySmithApple`s总是**绿色**的（除非它们已经烂了，但那是另一罐香蕉）！一旦你有了 a `GrannySmithApple`，它就**不再**是 a`Apple`了，除非你可以用它做所有相同的事情，你可以用它来做常规`Apple`( `printColor`,`eat`等) 有意义吗？`Apple`在从常规转换到转换之间没有改变的任何东西`GrannySmithApple`显然仍然是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:02:14.167

`foo()`您可以在 A 中有一个被调用的“内部” 。

```
class A {
    private void fooInternal() {
        System.out.println("Foo from A");
    }

    void foo() {
        fooInternal();
    }

    void bar() {
        fooInternal();
    }
}

class B extends A {
    @Override
    void foo() {
        System.out.println("Foo from B");
    }
} 
```

`new B().bar()`现在将打印“来自 A 的 Foo”，而`new B().foo()`将打印“来自 B 的 Foo”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:36:42.840

`foo()`总是调用`new ...`语句中使用的类的实例方法。

简而言之，我认为您的问题的答案是**否定**的，这是不可能的。它会阻止你完全覆盖部分行为。

```
class A {

method1() {
...
method2();
...
}

class B extends A {

// You can override method2 here to change the behaviour of method1 
// because it will call **your** version of method2
// You **don't** have to override method1 to achieve that

method2() {
...
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:39:09.287

据我所知，一个`B`对象总是会调用它自己的`foo()`方法。话虽如此，`B.foo()`可以定义为调用超类的`foo()`方法。例如，您可以定义`B`如下：

```
class B extends A {
    @Override public void foo() {
        super.foo();
    }
} 
```

这样做会有`B`来自`foo`. `A`但是这样做会一直这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T17:43:44.130

**有这个经验法则：**

```
In Inheritance the most specific version of the method for that class is called. 
```

**-**所以它总是会被调用的`foo()`方法，如果它在**B 的实例上**调用。`Class B`

 ****-**如果您希望使用上述代码调用`foo()`方法，那么您将需要关键字。`Class A``super`

**例如：**

```
class B extends A {
    @Override
    void foo() {

       super.foo();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T17:47:05.980

`this`引用“这个对象”，而不是“这个类”。

这意味着如果您有一个`B`扩展的对象`A`，当它执行`A`提到的超类中的方法时`this`，它实际上将指向 的实例`B`，因此将在 上执行该方法`B`。

您可以将 in 中的方法`A`视为**默认方法**。如果该方法在您的实际对象中被覆盖`B`，那么它将**始终**被调用。

我建议你**改变你的设计**并使用**组合而不是继承**：这将确保清晰的关注点分离，并使你的代码更容易理解和测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T17:51:59.587

正如其他人所说，没有直接的方法可以做到这一点，但您可以考虑这种构造的变体：

```
 void bar() {
    ClassA self = new ClassA();
    self.foo();  // <-- This is the important line!
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T17:55:22.063

要么让你的方法静态（baadddddd），要么改变你的设计。

事实上，为子类提供默认行为是没有意义的，因为它被定义为使自己适应相关的方法。

由于您的`foo()`方法似乎有所不同，您可以实现这样的策略模式：

```
interface BarProcess{
    void foo();
}

public class DefaultBarProcess implements BarProcess{
    void foo() {
       System.out.println("Foo from A");
    }
}

public class AnotherBarProcess implements BarProcess{
    void foo() {
       System.out.println("Foo from B");
    }
}

class A {

    private BarProcess barProcess;

    public A(Bar barProcess){
      this.barProcess = barProcess;
    }

    void bar() {
        barProcess.foo();
    }
}

class B extends A {  //deprecated! No need to exist

} 
```**

# matlab - 分割灰度图像

> ID：13403024
> 
> 赞同：6
> 
> 时间：2012-11-15T17:32:04.863
> 
> 标签：matlab, image-processing, image-segmentation, morphological-analysis, mathematical-morphology

我无法正确分割灰度图像：

![要分割的图像](../Images/b0e29a477fa006fa8f6a0a8ccc8b744b.png)

基本事实，即我希望分割看起来像什么，是这样的：

![基本事实](../Images/fa3beea6a982c5c4e889baea229427c2.png)

我对圈内的三个组成部分最感兴趣。因此，如您所见，我想将顶部图像分割成三个部分：两个半圆和它们之间的矩形。

我尝试了膨胀、腐蚀和重建的各种组合，以及各种聚类算法，包括 k-means、isodata 和高斯混合——所有这些都取得了不同程度的成功。

任何建议，将不胜感激。

编辑：这是我能够获得的最佳结果。这是使用活动轮廓分割圆形 ROI，然后应用 isodata 聚类获得的：

![集群](../Images/a2be456d5d33c0451300659346e7496e.png)

这有两个问题：

*   右下角星团周围的白色光晕，属于左上角星团
*   右上和左下星团周围的灰色光晕，属于中心星团。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T22:59:29.403

这是一个初学者......使用[圆形霍夫变换](http://www.mathworks.com/matlabcentral/fileexchange/26978-hough-transform-for-circles/content/html/circle_houghdemo.html)来找到圆形部分。为此，我最初[在本地对图像进行阈值处理](http://www.mathworks.com/matlabcentral/fileexchange/29764-thresholdlocally)。

```
 im=rgb2gray(imread('Ly7C8.png'));
 imbw = thresholdLocally(im,[2 2]); % thresold localy with a 2x2 window
 % preparing to find the circle
 props = regionprops(imbw,'Area','PixelIdxList','MajorAxisLength','MinorAxisLength');
 [~,indexOfMax] = max([props.Area]);
 approximateRadius =  props(indexOfMax).MajorAxisLength/2;
 radius=round(approximateRadius);%-1:approximateRadius+1);
 %find the circle using Hough trans.
 h = circle_hough(edge(imbw), radius,'same');
 [~,maxIndex] = max(h(:));
 [i,j,k] = ind2sub(size(h), maxIndex);
 center.x = j;     center.y = i;

 figure;imagesc(im);imellipse(gca,[center.x-radius  center.y-radius 2*radius 2*radius]);
 title('Finding the circle using Hough Trans.'); 
```

![在此处输入图像描述](../Images/03e536e4d4b3bbe3443176696b172f42.png)

仅选择圆圈内的内容：

```
 [y,x] = meshgrid(1:size(im,2),1:size(im,1));
 z = (x-j).^2+(y-i).^2;
 f = (z<=radius^2);
 im=im.*uint8(f); 
```

**编辑：**

寻找一个开始阈值图像的位置，通过查看直方图对其进行分割，找到它的第一个局部最大值，然后从那里迭代直到找到 2 个单独的段，使用 bwlabel：

```
 p=hist(im(im>0),1:255);
  p=smooth(p,5);
  [pks,locs] = findpeaks(p);

  bw=bwlabel(im>locs(1));
  i=0;
  while numel(unique(bw))<3
     bw=bwlabel(im>locs(1)+i); 
     i=i+1;
  end

 imagesc(bw); 
```

![在此处输入图像描述](../Images/639f2fb56fe7e83be9a941e0f0ba95d8.png)

现在可以通过从圆圈中取出两个标记的部分来获得中间部分，剩下的就是中间部分（+一些光环）

```
 bw2=(bw<1.*f); 
```

但经过一些中值滤波后，我们得到了更合理的结果

```
 bw2= medfilt2(medfilt2(bw2)); 
```

我们一起得到：

```
 imagesc(bw+3*bw2); 
```

![在此处输入图像描述](../Images/fe64857aa0fcd53b57c44b2bea927240.png)

最后一部分是真正的“又快又脏”，我敢肯定，使用您已经使用的工具，您将获得更好的结果...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T01:32:06.033

[也可以使用分水岭变换](http://www.mathworks.fr/fr/help/images/ref/watershed.html)获得近似结果。这是倒置图像上的分水岭 -> watershed(255-I) 这是一个示例结果：

![在此处输入图像描述](../Images/32a9f4e93abb2b34473c7c31fbf5e049.png)

另一种简单的方法是使用圆盘结构元素对原始图像进行形态闭合（可以对粒度进行多尺度闭合），然后获得完整的圆。在此之后提取圆和组件更容易。

```
se = strel('disk',3);
Iclo = imclose(I, se);% This closes open circular cells.
Ithresh = Iclo>170;% one can locate this threshold automatically by histogram modes (if you know apriori your cell structure.)
Icircle = bwareaopen(Ithresh, 50); %to remove small noise components in the bg 
```

![在此处输入图像描述](../Images/8020cf0e23896e956941d86377bfe617.png)

```
Ithresh2 = I>185; % This again needs a simple histogram. 
```

![在此处输入图像描述](../Images/eefbf096abeb75501b5f8b808d223fda.png)

# java - 在 setUI(new BasicComboBOxUI){} 中覆盖 setIcon() 方法

> ID：13403027
> 
> 赞同：1
> 
> 时间：2012-11-15T17:32:07.543
> 
> 标签：java, overriding, jcombobox

我必须在 JComboBox 的下拉列表中设置自定义图像。我非常成功地删除了它（通过覆盖 getWidth()），但我无法用我的自定义图像替换箭头。这是我的代码片段，以获得更好的想法。我不知道我在哪里做错了，但它在按钮部分显示了一些升高的部分。

```
 cmbYear = new JComboBox();
    cmbYear.setUI(new BasicComboBoxUI(){
        protected JButton createArrowButton() {
            return new JButton() {
                private static final long serialVersionUID = 1L;
                public void setIcon(Icon defaultIcon) {
                    defaultIcon = new ImageIcon("images/dropdown_icon.png");
                    super.setIcon(defaultIcon);
                }
   //           public int getWidth() {
   //                return 0;
   //            }
            };
        }
    }); 
```

请在这里帮助我。非常感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:58:13.363

您可以改写 getIcon 。根据需要缓存图标。

```
@Override
public Icon getIcon() {
  Icon defaultIcon = new ImageIcon(getClass().getResource("images/dropdown_icon.png"));
  return defaultIcon;
} 
```

# javascript - 多个文本框的自动 texbox 高度

> ID：13403029
> 
> 赞同：0
> 
> 时间：2012-11-15T17:32:12.740
> 
> 标签：javascript, forms, textbox, resize, height

背景：我正在制作一个类似于 facebook 墙的页面，该页面将有很多帖子，您应该能够评论每一个帖子。这些文本框，您在其中发布您的评论，应该像在 Facebook 中一样调整大小。

到目前为止我有这个代码。它有效，但仅在页面上的第一个文本框中，我希望它适用于每个文本框:)

有没有机会让它适用于每个文本框？

```
<script type="text/javascript">
var observe;
if (window.attachEvent) {
observe = function (element, event, handler) {
    element.attachEvent('on'+event, handler);
};
}
else {
observe = function (element, event, handler) {
    element.addEventListener(event, handler, false);
};
}
function init () {
var text = document.getElementById('text');
function resize () {
    text.style.height = 'auto';
    text.style.height = text.scrollHeight+'px';
}
/* 0-timeout to get the already changed text */
function delayedResize () {
    window.setTimeout(resize, 0);
}
observe(text, 'change',  resize);
observe(text, 'cut',     delayedResize);
observe(text, 'paste',   delayedResize);
observe(text, 'drop',    delayedResize);
observe(text, 'keydown', delayedResize);

text.focus();
text.select();
resize();
}
</script>
</head>
<body onload="init();">
<textarea rows="1" style="height:1em;" id="text"></textarea>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:41:45.457

您可以提供实时页面的示例代码吗？就目前而言，您在此处显示的 javascript 仅适用于以文本 ID 标识的单个元素；因此，无论您拥有多少个文本区域，唯一受影响的元素将是页面上具有该 ID 的元素之一——当然，您应该只有一个。

接近现在的代码，您需要将结果更改`document.getElementById`为`document.getElementsByTagName('textarea')`then 循环。尝试以下操作：

```
function init () {
var textareas = document.getElementsByTagName('textarea');
...
var textareasLength = textareas.length;
for (var i = 0; i < textareasLength; i++) {
    observe(textareas[i], 'change',  resize);
    observe(textareas[i], 'cut',     delayedResize);
    observe(textareas[i], 'paste',   delayedResize);
    observe(textareas[i], 'drop',    delayedResize);
    observe(textareas[i], 'keydown', delayedResize);
}    
} 
```

**编辑：**

在审查中，除其他外，您的 resize() 函数仅适用`text`于前一行中定义的变量。在不完全重构代码的情况下，获得所需功能的一种方法如下：

```
function init () {
var textareas = document.getElementsByTagName('textarea');
function resize() {
    if( arguments.length>0 ) {
      self=arguments[0];
    } else self=this;      
    self.style.height = 'auto';
    self.style.height = self.scrollHeight+'px';
}
/* 0-timeout to get the already changed text */
function delayedResize() {
    var self=this;
    window.setTimeout(resize(self), 0);
}
var textareasLength = textareas.length;
for (var i = 0; i < textareasLength; i++) {
observe(textareas[i], 'change',  resize);
observe(textareas[i], 'cut',     delayedResize);
observe(textareas[i], 'paste',   delayedResize);
observe(textareas[i], 'drop',    delayedResize);
observe(textareas[i], 'keydown', delayedResize);
}    
} 
```

这不是最佳的，但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:43:03.123

它仅适用于一个文本框，因为您只选择了一个带有`document.getElementById('text')`. 请记住，`id`属性必须是唯一的。

你可以这样做：

```
texts = document.querySelectorAll('.text');
texts.forEach(function (text) {
    ... your current code for text ...
}); 
```

其中 .text 表示您正在选择所有带有`class="text"`.

# android - 如何处理 android .mk 中的 LOCAL_STATIC_LIBRARIES

> ID：13403030
> 
> 赞同：3
> 
> 时间：2012-11-15T17:32:13.303
> 
> 标签：android, android-ndk, native-activity, vs-android

我正在尝试移植其中一个 android NDK 示例（本机活动）以使用允许我在 MVS 中开发的 vs-android 插件。

为此，我需要将 Android.mk 命令翻译成 MVS 可以处理的东西，而我遇到了其中一个问题。

Android.mk : LOCAL_PATH := $(call my-dir)

```
include $(CLEAR_VARS)

LOCAL_MODULE    := native-activity
LOCAL_SRC_FILES := main.c
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM
LOCAL_STATIC_LIBRARIES := android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

LOCAL_STATIC_LIBRARIES 和 $(call import-module,android/native_app_glue) 的行显然处理了使 native_activity 类发挥作用的核心的 native_app_glue。

关于如何根据 vs-android 中的编译行选项、MVS 的链接器选项或任何类似的东西来翻译它的任何想法？或者至少这两行是做什么的？

干杯，詹姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:27:27.493

让它工作。

由于它似乎是根据 .mk 所说的内容创建一个库 (native_app_glue)，我继续将 native_app_glue 库编译为我的 MVS 中的另一个静态库 (.a) 项目，然后将其添加到项目依赖项中。这没有问题

# python - CherryPy、多处理和 Gevent 猴子补丁

> ID：13403031
> 
> 赞同：2
> 
> 时间：2012-11-15T17:32:17.293
> 
> 标签：python, multiprocessing, cherrypy, gevent, monkeypatching

我正在尝试使用cherrypy + multiprocessing（启动工作进程'进程'）+ gevent（从工作进程'进程'内启动并行i/o greenlets）的组合。似乎最简单的方法是monkeypatch multiprocessing，因为greenlets只能在主应用程序进程中运行。

但是，看起来猴子修补程序适用于多处理的某些部分，而不适用于其他部分。这是我的示例 CherryPy 服务器：

```
from gevent import monkey
monkey.patch_all()

import gevent
import cherrypy
import multiprocessing

def launch_testfuncs():
    jobs = [gevent.spawn(testfunc)
            for i in range(0, 12)]

    gevent.joinall(jobs, timeout=10)

def testfunc():
    print 'testing'

class HelloWorld(object):
    def index(self):
        launch_testfuncs()

        return "Hello World!"
    index.exposed = True

    def index_proc(self):
        proc = multiprocessing.Process(target=launch_testfuncs)
        proc.start()
        proc.join()

        return "Hello World 2!"
    index_proc.exposed = True

    def index_pool(self):
        pool = multiprocessing.Pool(1)
        return "Hello World 3!"
    index_pool.exposed = True

    def index_namespace(self):
        manager = multiprocessing.Manager()
        anamespace = manager.Namespace()
        anamespace.val = 23
        return "Hello World 4!"
    index_namespace.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

猴子修补后的以下工作：

*   `index`- 直接从cherrypy类中产生greenlets
*   `index_proc`- 用于`multiprocessing.Process`启动一个新进程，然后从该进程中生成 greenlets

以下有问题：

*   `index_pool`- 启动`multiprocessing.Pool`-**挂起并且永不返回**
*   `index_namespace`- 初始化`multiprocessing.Manager`命名空间以管理池/工人集合中的共享内存 -**返回以下错误消息：**

    ```
    [15/Nov/2012:17:19:31] HTTP Traceback (most recent call last):
      File "/Library/Python/2.7/site-packages/cherrypy/_cprequest.py", line 656, in respond
    response.body = self.handler()
      File "/Library/Python/2.7/site-packages/cherrypy/lib/encoding.py", line 188, in __call__
    self.body = self.oldhandler(*args, **kwargs)
      File "/Library/Python/2.7/site-packages/cherrypy/_cpdispatch.py", line 34, in __call__
    return self.callable(*self.args, **self.kwargs)
      File "server.py", line 39, in index_namespace
    anamespace = manager.Namespace()
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/managers.py", line 667, in temp
    token, exp = self._create(typeid, *args, **kwds)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/managers.py", line 565, in _create
    conn = self._Client(self._address, authkey=self._authkey)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/connection.py", line 175, in Client
    answer_challenge(c, authkey)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/connection.py", line 414, in answer_challenge
    response = connection.recv_bytes(256)        # reject large message
    IOError: [Errno 35] Resource temporarily unavailable 
    ```

我尝试在 gevent docs 中找到一些与此相关的文档，但找不到与此相关的任何内容。只是gevent的猴子补丁不完整吗？有没有其他人有类似的问题，有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:52:43.943

这个问题似乎是`gevent.socket`非阻塞的结果，这意味着如果字节在套接字上没有立即可用，任何`socket.recv_bytes(X)`调用都会抛出该错误。`X`具体来说，它`gevent.socket`的设计永远不会阻塞套接字。

问题的`multiprocessing`出现是因为它使用 stdlib`socket`模块并期望它被阻塞，而在你`monkey.patch_all()`'d 之后，`socket`模块已被替换，并且`multiprocessing.connection`不是为处理新的异步行为而设计的。

您可以告诉`monkey`不要修补`socket`，但这意味着在您的应用程序中利用异步套接字的任何东西都可能因此而导致一些性能损失。

要`patch_all`使用`socket=False`:进行此调用`patch_all(socket=False)`。

这不是一个理想的解决方案，因为您几乎失去了从`gevent`一开始就可以使用的大部分好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-09T12:07:08.983

我遇到了和你一样的问题。我的解决方案是我刚刚使用 multiprocessing.Process() 来生成固定数量的进程。最后全部加入，等待完成。

```
#!/usr/bin/env python
# encoding: utf-8

from gevent import monkey
monkey.patch_all()

import gevent
import multiprocessing as mp

NUM = 10

def work(i):
    jobs = [gevent.spawn(func, i)
            for i in range(0, 12)]
    gevent.joinall(jobs)
    print "{} Done {}".format(mp.current_process().name, i)

def func(x):
    print "Gevent: {}".format(x)

def main():

    processes = [mp.Process(name="Process-{}".format(i), target=work, args=(i,)) for i in xrange(NUM)]

    for process in processes:
        process.start()

    for process in processes:
        process.join()

if __name__ == '__main__':
    main() 
```

* * *

输出

```
Gevent: 0
Gevent: 1
Gevent: 2
Gevent: 3
Gevent: 4
Gevent: 5
Gevent: 6
Gevent: 7
Gevent: 8
Gevent: 9
Gevent: 10
Gevent: 11
Process-0 Done 11
Gevent: 0
Gevent: 1
Gevent: 2
Gevent: 3
Gevent: 4
Gevent: 5
Gevent: 6
Gevent: 7
Gevent: 8
Gevent: 9
Gevent: 10
Gevent: 11
Process-1 Done 11
Gevent: 0
Gevent: 1
Gevent: 2
Gevent: 3
Gevent: 4
Gevent: 5
Gevent: 6
Gevent: 7
Gevent: 8
Gevent: 9
Gevent: 10
Gevent: 11
Process-2 Done 11
Gevent: 0
... ... 
```

所以这是 gevent 与多处理一起工作的解决方案。

# json - 尝试使用 curl 将 json 数组发送到我的 json 服务器

> ID：13403033
> 
> 赞同：0
> 
> 时间：2012-11-15T17:32:25.470
> 
> 标签：json, haskell, curl

我需要确定`JSON`我的服务器期望的值。我一直在 Haskell 中进行测试，一切都很好。所以现在我需要采取下一步行动，这样我就可以记录这些值的样子以供其他人使用。

我`REST`的一种方法需要一个数组

`Array (fromList [String "BNAP",Number 312])` Haskell 是如何表达这一点的。

测试`cURL`，我想做这样的事情：

```
curl -D- -X POST -H "Content-Type: application/json" --data '["BNAP":312]'      
http://10.64.16.6:3000/Read 
```

但这似乎无效`JSON`

`ParseError {errorContexts = ["]"], errorMessage = "Failed reading: satisfyWith", errorPosition = 1:8}`

例如，如果 Haskell 期待一个 Object `Object (fromList [String "BNAP",Number 312])`，那么 JSON 会以这种方式表示 `--data '{"BNAP":312}'`

所以对我来说，我的上述尝试是正确的。但是，事实并非如此。那么，如何用 cURL 表示一个包含一对由字符串和数字组成的数组呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:45:09.590

冒号在这里不是有效的 JSON：

```
["BNAP":312]
       ^ 
```

数组元素应该用逗号分隔：

```
["BNAP", 312] 
```

如果您想要一个具有单个键值对的数组，则需要添加花括号：

```
[{"BNAP": 312}] 
```

# asp.net - 未找到子域文件

> ID：13403034
> 
> 赞同：0
> 
> 时间：2012-11-15T17:32:27.107
> 
> 标签：asp.net

我正在制作一个子域。我已经对 IIS 进行了调整，简单的 htm 页面没有出现错误，但是当我尝试将 aspx 页面放在子文件夹中时，得到了这个 Error.htm?aspxerrorpath=/server/default.aspx。“服务器”是子域。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:18:59.860

用这么少的信息很难说清楚。我会说检查您的事件日志以查看 IIS 是否记录了有关失败原因的任何内容。您还可以添加通用日志记录机制来捕获任何未处理的异常并将它们写入日志文件。前任：

如果您还没有 Global.asax 则创建并放置类似的内容

```
 Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
        Dim err As Exception = Server.GetLastError()
        LogError(err.ToString)
  End Sub 
```

# jms - WebSphere MQ 回退阈值和回退名称不起作用

> ID：13403036
> 
> 赞同：2
> 
> 时间：2012-11-15T17:32:30.243
> 
> 标签：jms, websphere, ibm-mq

我们在 WebSphere MQ v7.0.1.9 中设置了队列管理器`BOTHRESH(5)`。`BOQNAME(USER.ERR)`

在 WebSphere Application Server v7 中，当 MDB 在容器管理的 TX 中回滚 TX 时，消息将被放置在 DLQ 中，而不是放置在原始队列中。

我检查了表明 TX 成功回滚的日志。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:45:42.633

*...消息被放置在 DLQ 中，而不是放置在原始队列中。*

设置`BOQNAME`并`BOTHRESH`导致 QMgr 尝试将消息放入原始队列*以外的其他位置。*一旦`BOTHRESH`超过，QMgr 将首先尝试将消息放入名为 的队列中，如果无法`BOQNAME`放入则放入 DLQ 。`BOQNAME`只有当这两个都失败时，QMgr 才会将消息放回原始队列中，或者如果消息是非持久的，则将其丢弃。

退回到指定的队列`BOQNAME`或 DLQ 失败的一些原因是：

1.  目标队列不存在。
2.  目标队列已满。
3.  消息大小超过了目标队列的 MAXMSGL 属性。
4.  用户无权将消息放入目标队列。
5.  目标队列的类型错误（即 XMitQ 或模型队列）。
6.  放入 DLQ 时，QMgr 的`DEADQ`属性为空。
7.  `BOTHRESH`已设置但未设置`BOQNAME`。在这种情况下，DLQ 是唯一尝试过的队列。

# java - Java NetBeans 编译错误

> ID：13403039
> 
> 赞同：0
> 
> 时间：2012-11-15T17:32:50.837
> 
> 标签：java, compilation

编译我的代码时，它以红色突出显示：

```
 Note: /Users/myName/NetBeansProjects/CardGame/src/cardgame/Hand.java uses unchecked or unsafe operations.
    Note: Recompile with -Xlint:unchecked for details. 
```

它仍然可以毫无故障地编译和运行程序（到目前为止）......我只是好奇是否有人会知道是什么原因造成的。谷歌上绝对没有出现任何东西，看着我的“手”课，我看不到任何应该引起问题的东西...... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:39:59.413

在 Netbeans 中，右键单击您的项目 > 属性 > 编译 > “其他编译器选项”并输入：`-Xlint:unchecked`。

重新编译并查看生成警告的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:35:30.453

这些不是编译错误，它们是一些警告。他们说您没有使用泛型或在代码的某处以错误的方式使用它们。

例如，像这样：

```
List list = new ArrayList(); 
```

应该：

```
List<String> list = new ArrayList<String>(); 
```

# android - 停止位置侦听器

> ID：13403043
> 
> 赞同：0
> 
> 时间：2012-11-15T17:33:06.433
> 
> 标签：android

我需要停止位置监听器更新。我知道为了停止我需要调用的位置侦听器，`locationManager.removeUpdates(LocationListener)`但我不断收到错误消息`MyLocationListener cannot be resolved to a variable`

这是我的代码：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class GetCoords extends Activity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; //in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 10000; //in Milliseconds

    protected LocationManager locationManager;

    protected Button getLocationButton;
    protected Button stopLocationButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_get_coords);

        getLocationButton = (Button) findViewById(R.id.get_location_button);
        stopLocationButton = (Button) findViewById(R.id.stop_location_button);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );

        getLocationButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                showCurrentLocation();
            //String message = "GPS Service Started";
            Toast.makeText(GetCoords.this, "GPS Service Started", Toast.LENGTH_SHORT).show();
        }
    });
    stopLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            stopMyLocation();
            //locationManager = null;
            //stopCurrentLocation();
            Toast.makeText(GetCoords.this, "GPS Service Stopped", Toast.LENGTH_SHORT).show();
        }
    });
        }

protected void stopMyLocation() {
    locationManager.removeUpdates(MyLocationListener);
            locationManager = null;
} 
```

我不明白我做错了什么，我看到的每个关于如何停止 GPS 更新的示例都让我认为我在 stopMyLocation() 下的代码是正确的。我已经在 stopLocationButton 点击​​监听器中尝试过，在它的当前位置，几乎无处不在，它一直告诉我 MyLocationListener 不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:36:47.347

您需要将您的位置侦听器分配给一个字段..如

```
protected MyLocationListener listener; 
```

然后在您的 onCreate 中：

```
listener = new MyLocationListener();

locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                listener); 
```

您的注销将看起来像

```
 locationManager.removeUpdates(listener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:36:44.573

保存对 LocationListener 的引用：

```
protected LocationManager locationManager;
protected MyLocationListener myLocationListener = new MyLocationListener(); 
```

改变这个：

```
 locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            myLocationListener
    ); 
```

现在您可以通过以下方式取消它：

```
locationManager.removeUpdates(myLocationListener); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:47:23.110

您收到错误是因为 stopMyLocation() 函数将未知变量 MyLocationListener 传递给 removeUpdates：

```
locationManager.removeUpdates(MyLocationListener); 
```

要将现有变量传递给 removeUpdates，您必须定义 MyLocationListener 类的对象变量，该变量可在 onCreate() 和 stopMyLocation() 函数中访问。

```
private MyLocationListener locationListener; 
```

locationListener 变量可以在 onCreate() 函数中实例化，并且必须用于调用 requestLocationUpdates(...) 函数。

```
locationListener = new MyLocationListener();

locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            locationListener
    ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T17:38:55.393

您已初始化 MyLocationListener，但未将其分配给稍后使用的变量。Java 怎么知道你在`removeUpdates()`调用中指的是哪个 MyLocationListener 类的实例？

1.  创建一个类变量`LocationListener abc;`

2.  在`onCreate()`方法中添加行 abc = new MyLocationListener(); 在您注册更新之前。

3.  `requestLocationUpdates()`在你的方法中传递这个。

4.  调用`removeUpdates(abc)`你的`stopMyLocation()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-12T20:14:30.503

我也有同样的问题。我认为我的问题类似于上面提到的问题，就创建了不同的侦听器实例而言。我最终做的是创建一个静态监听器并创建一个单例方法来防止创建另一个监听器实例。代码看起来像这样：

```
 static LocationListener mLocationListener = null;

 public LocationListener getLocationListener(){
    if(mLocationListener==null)
       mLocationListener = new MyLocationListener();
    return mLocationListener;
 } 
```

然后我这样用

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000 * 2, 0, getLocationListener());

locationManager.removeLocationUpdates(getLocationListener()); 
```

如有必要，您可以对位置管理器执行相同的操作，但我也没有。希望这可以帮助！

# c++ - 将字符串转换为双精度，而字符串有N个小数，C++

> ID：13403049
> 
> 赞同：2
> 
> 时间：2012-11-15T17:33:32.567
> 
> 标签：c++, user-input, cin

我想根据用户输入制作一个双精度向量。这些代码行通常做我想让他们做的事情，除了两种情况，如果还有更多，请告诉我。这两种情况是如果有两个或多个小数位，如果有一个或多个空格。第二个小数用作空格。因此，如果用户输入：0.2.0.1 或 0.2 0.1，我将得到两个实例的两位小数，它们将是 0.2 和 0.1。请帮助我。我想确保我正确地完成了这个简单的任务。我在 C++ 中这样做。

任何其他建议都非常受欢迎。

```
for(int i = 0; i <= ARRSIZE; i++)
{
    cout << "Please enter a decimal value: ";
    if (cin >> sumScores)
    {
        scoresVector.push_back(sumScores);
        cin.clear(); 
        cin.ignore();
    }else
    {
        cout << "This is not a double\n";
        scoresVector.push_back(0);
        cin.clear(); 
        cin.ignore();
        cin.ignore(numeric_limits<streamsize>::max(), '\n'); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:47:23.907

有更好的解决方案来处理逐行输入，但它们都需要一些额外的代码。最简单的方法是使用字符串流读取一行`std::getline`并分析它们。

```
for (int i = 0; i <= ARRSIZE; i++) {
  std::cout << "Please enter a decimal value: " << std::flush;
  std::string s;
  if (!std::getline(std::cin, s))
    break;

  std::istringstream is(s);
  double d;
  if (is >> d >> std::skipws && is.eof()) {
    scoresVector.push_back(d);
  } else {
    std::cout << "This is not a double\n";
    scoresVector.push_back(0);
  }
} 
```

# java - 返回 int 值的布尔方法；

> ID：13403055
> 
> 赞同：4
> 
> 时间：2012-11-15T17:33:56.327
> 
> 标签：java, boolean, return

我正在自学 Java，并创建了一个程序来模拟掷骰子游戏。我有一个布尔方法的整个游戏。一切正常，但我想计算每次用户获胜的时间。计算这些胜利然后打印它们的最佳方法是什么？

这是我的代码：

```
import java.util.Random;

public class game{

public static void main(String[] args) {
    Random rand = new Random();
    for(int i = 0; i <= 10; i++){
        craps(rand);
    }
}

public static boolean craps(Random randomGen){
    int roll1 = randomGen.nextInt(6) + 1;
    int roll2 = randomGen.nextInt(6) + 1;

    int sum = roll1 + roll2;
    int sumRepeat = sum;
    int count = 0;

    String win = "you win";
    String lose = "you lose";
    String point = "point=";

    if(sum == 7 || sum == 11){
        System.out.printf("[%d,%d] %d %s\n",roll1,roll2,sum,win);
        count++;
        return true;
    }
    else if(sum == 2 || sum == 3 || sum == 12){
        System.out.printf("[%d,%d] %d %s\n",roll1,roll2,sum,lose);
        return false;
    }
    else{
        System.out.printf("[%d,%d] %s %d",roll1,roll2,point,sum);
        int roll3 = randomGen.nextInt(6) + 1;
        int roll4 = randomGen.nextInt(6) + 1;
        int sum2 = roll3 + roll4;
        do{
            roll3 = randomGen.nextInt(6) + 1;
            roll4 = randomGen.nextInt(6) + 1;
            sum2 = roll3 + roll4;
            if(sum2 == sumRepeat){
                System.out.printf("[%d,%d] %d %s\n",roll3,roll4,sum2,win);
                count++;
                return true;
            }else{
                System.out.printf("[%d,%d]",roll3,roll4);
            }
        }
        while(sum2 != 7);{
            System.out.printf("[%d,%d] %d %s\n",roll3,roll4,sum2,lose);
            return false;
        }
    }
}
} 
```

我试图返回 count 变量，但我收到一条错误消息，提示我无法从预期的布尔方法返回 int 值。但是我也尝试使用`System.out.println();`但我无法在代码中找到放置它的位置打印出计数值，因为我总是收到一条错误消息，指出 println 是无法访问的代码。

任何帮助，将不胜感激。谢谢！

**这是程序的输出**

> [1,6] 7 你赢了
> 
> [2,4] 点= 6[3,6][3,3] 6 你赢了
> 
> [3,3] 点 = 6[5,1] 6 你赢了
> 
> [6,1] 7 你赢了
> 
> [6,3] 点= 9[5,1][3,5][2,6][6,4][5,6][1,5][6,3] 9 你赢了
> 
> [3,3] 点 = 6[1,5] 6 你赢了
> 
> [5,1] 点= 6[1,5] 6 你赢了
> 
> [2,2] 点= 4[6,4][3,3][3,4][3,4] 7 你输了
> 
> [4,5] 点= 9[6,4][5,1][1,2][6,2][1,5][3,5][6,5][1,5][5 ,2][5,2] 7 你输了
> 
> [2,2] 点= 4[5,3][5,6][6,4][3,2][6,5][3,6][4,4][4,2][4 ,3][4,3] 7 你输了
> 
> [6,6] 12 你输了
> 
> 您赢了 11 次。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T17:35:23.107

在函数之外计算它们`craps`，这是一种简单的方法：

```
public static void main(String[] args) {
    Random rand = new Random();
    int counter = 0;
    for(int i = 0; i <= 10; i++){
        if(craps(rand)) counter++;
    }

    System.out.println("You won " + counter + " times!");
} 
```

顺便说一句，重要的是要注意，在`craps`函数之外计数比修改它要好得多。在学习 java 时，请记住每种方法只应完成一项工作。您可能想练习将`craps`功能分解成更小的部分来实践这一理念。当您稍后回顾时，一种工作理念的*一种方法将使更大的项目更容易理解和调试。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:36:52.917

```
int wins = 0;
for(int i = 0; i <= 10; i++){
    if(craps(rand)) {
        wins++;
    }
}

// Print a friendly message including `wins` 
```

# node.js - 在nodejs exprss中存储会话数据

> ID：13403058
> 
> 赞同：0
> 
> 时间：2012-11-15T17:34:13.937
> 
> 标签：node.js, session

我有以下代码，我试图将一些数据存储到会话变量中：

```
//Capture IP geo-location info if it hasn't been set for this session
  app.all('*', function(req, res, next){
    //Stuff to run once for each user session
    if (!req.session.runOnce){
     req.session.runOnce = true;
     if (!req.session.ipinfo || 1){
      //add user ip to sessions for use on who's online
      //if we're localhost, give it an 8.8.8.8 IP just so we can test something
      if (req.ip == '127.0.0.1'){ip = '8.8.8.8'; }else{ip = req.ip; }
     ip2location(ip, config.ipinfodb.apiKey, function(error, data){
       var ipData = JSON.parse(data);
       req.session.ipData = ipData;
      });

      next();
      }else{
        next();
      }
    }else{
      next();
    }
  }); 
```

session.ipData 没有被存储。我可以将它存储在对 ip2location 的调用之外，并且我可以在对 ip2location 的调用中获取会话数据。

任何想法：谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:39:10.383

我发现了问题。next() 回调需要在 ip2Location 调用中。

# sql-server - 如何禁用消息表“xxx”。扫描计数、逻辑读取、物理读取

> ID：13403059
> 
> 赞同：0
> 
> 时间：2012-11-15T17:34:17.570
> 
> 标签：sql-server, ssms

每当我在 SQL Server 中执行 SQL 查询时，消息结果窗口内都会出现一行：

```
Messages Table 'xxx'. Scan count 1, logical reads 132, physical reads 0 
```

与开启统计时相同

```
SET STATISTICS IO ON
SELECT * FROM xxx
SET STATISTICS IO OFF 
```

但是即使只调用了 select 呢？

```
SELECT * FROM xxx 
```

为什么是这样？以前没有消息！除非明确使用。可以禁用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:36:01.390

这很可能是您的`SSMS`. 尝试以这种方式关闭它

从菜单中选择：工具/选项/查询执行/SQL Server/高级

现在取消选中复选框“ `SET STATISTICS IO`”

不应再生成任何消息

# c# - 将 .NET C# 程序集成到已编译（非托管）C++ 程序中（无需执行单独的 .exe 文件）

> ID：13403061
> 
> 赞同：0
> 
> 时间：2012-11-15T17:34:26.043
> 
> 标签：c#, c++, windows, visual-studio-2010

我有一些 .NET C# 代码，我想通过已编译的（非托管）C++ 程序执行这些代码。

目前我所做的是将前者放入一个单独的 .exe 文件中，我从 C++ 程序中执行该文件。（C++ 程序执行 .exe 文件，传入适当的参数，并将其输出捕获到变量中。）

这行得通。但是，执行一个单独的 .exe 文件会引入一些开销，并且开销是显而易见的——当 .exe 程序运行和完成时，人们会注意到大约半秒的间隙。

问题：有没有更好的方法来进行这种集成？比执行 .exe 更快的东西。

我在运行 Visual Studio 2010 的 Windows XP 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:41:17.533

您可能会发现此链接很有用：http: [//msdn.microsoft.com/en-us/library/x0w2664k.aspx](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)

您可以创建包含本机代码和 .NET 代码的混合模式程序集。然而，这通常使用 C++/CLR 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:45:25.290

在我们的一个业务解决方案中，我们必须将非托管 c++ 应用程序连接到托管 c# 应用程序。我们通过在非托管应用程序端创建一个混合模式“Wrapper”dll、一个托管 c#“客户端”dll 和一个由托管 c# 应用程序使用 NamedPipe-Binding、hostet 的 WCF 服务来实现这一目标。

非托管 c++ 应用程序调用包装器，它将请求重定向到 c# Client dll。该 dll 建立与 c# 应用程序的 WCF 服务的连接，并在该服务上调用请求的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:07:44.797

如果您的目标只是在 C# 项目中执行特定代码，则可以简单地将其构建为 dll 并将其作为引用添加到 C++ 项目中。从那里您可以随意执行部分 C# 代码库。

This question [using c# dll in project c++](https://stackoverflow.com/questions/3799907/using-c-sharp-dll-in-project-c)解释了如何在使用 VC++ 编译的项目中使用 C# 程序集

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:15:56.287

将 .NET 与 C++ 集成的另一种方法是通过 COM 接口。将 .NET 转换为 COM 组件。从 C++ 实例化和调用它们足够简单和快速。希望能帮助到你。

# jquery - div内图像的全宽和全高

> ID：13403065
> 
> 赞同：0
> 
> 时间：2012-11-15T17:34:43.127
> 
> 标签：jquery, css, background, fullscreen

所以我需要一些帮助。

我做了这个设置，我需要一些图像总是全屏（缩放以适应）放置在里面的 div。这就是我已经走了多远，无论我做什么，我都无法让它发挥作用。我真的希望有人能帮我解决这个问题，这让我发疯了！我试图输入这样的代码

```
background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
```

但随后图像消失了......这是整个代码。

**HTML**

```
<div class="wrapper">
    <div class="navigation_top">
    <ul>
        <li>Btn_1</li>
        <li>Btn_2</li>
        <li>Btn_3</li>
        <li>Btn_4</li>
        <li>Btn_5</li>
    </ul>
    </div>

    <div class="navigation_side">
       <ul>        
          <li><a href="#slice1" id="btn_1" class="anchorLink">slice1</a></li>
          <li><a href="#slice2" id="btn_2" class="anchorLink">slice2</a></li>
          <li><a href="#slice3" id="btn_3" class="anchorLink">slice3</a></li>
           <li><a href="#slice4" id="btn_4" class="anchorLink">slice4</a></li>
           <li><a href="#slice5" id="btn_5" class="anchorLink">slice5</a></li>
       </ul>
    </div>

    <div id="slice1"></div>
    <div id="slice2"></div>
    <div id="slice3"></div>
    <div id="slice4"></div>
    <div id="slice5"></div>
</div> 
```

**CSS**

```
html, body {height:100%; color:#FFF;}

ul, ol, li {margin:0px!important; padding:0px!important;}

.wrapper {width:100%; height:100%;}
.navigation_top {width:100%; height:50px; line-height:50px; background-color:#000; opacity:.5; position:fixed;}
.navigation_top ul {list-style:none;}
.navigation_top ul li {float:left; width:100px; text-align:center;}
.navigation_top ul li a {display:block; color:#FFF; text-decoration:none;}

.navigation_side {width:200px; height:auto; position:fixed; background-color:#000; opacity:.5; margin-top:10%;}
.navigation_side ul li a {color:#FFF; text-decoration:none;}

#slice1 {width:100%; height:100%; background:url(http://img405.imageshack.us/img405/6018/image1uii.jpg);}
#slice2 {width:100%; height:100%; background-color:#999;}
#slice3 {width:100%; height:100%; background-color:#888;}
#slice4 {width:100%; height:100%; background-color:#777;}
#slice5 {width:100%; height:100%; background-color:#666;} 
```

**查询**

```
jQuery(document).ready(function($) {

    $(".anchorLink").click(function(event){        
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
    });

    $('.navigation_top').hide();

    $(window).scroll(function() {
        // the 10 below is the number of pixels down to show the menu
        if ($(this).scrollTop() > 10) $('.navigation_top').show();
        else $('.navigation_top').hide();
    });
}); 
```

这也是我的进步：http: [//jsfiddle.net/iBertel/qLTQ9/](http://jsfiddle.net/iBertel/qLTQ9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:44:29.287

您确定这是适合屏幕的最佳方式吗？仅仅因为对图像分辨率的关注，我会以不同的方式处理它。

我会这样做的方式是我首先检查屏幕的宽度/高度。然后我将其与图像的宽度/高度进行比较。然后，如果图像比屏幕大，我会将其压缩，这样我就可以将其适应屏幕。

如果图像小于屏幕，那么我将图像在 div 中居中并将 div 背景的颜色设置为漂亮（例如，如果这与您的站点颜色匹配，请确保它是黑色 div）。

请记住，您必须检查图像相对于屏幕的宽度/高度。例如，如果图像对于屏幕来说太宽，但没有那么高，那么图像应该在保持宽/高比的情况下按比例缩小，这样它就会在你的 div 内显示为一个水平矩形。这样您的图像就不会失真。

# c# - 对象序列化 xml 错误列表

> ID：13403068
> 
> 赞同：0
> 
> 时间：2012-11-15T17:34:50.223
> 
> 标签：c#, wpf

我正在制作一个 WPF 应用程序，在其中我保存我的 WPF 应用程序退出时的对象列表。并在系统启动时获取对象列表。最初一切正常。但有时它会给出序列化异常。得到异常后，我查看了 xml 序列化文件。但在我看来，抛出异常是因为 xml 文件的格式不正确。当我纠正它时。它再次运行良好。

```
public static class IsolatedStorageCacheManager<T>
{
    public static void store(T loc)
    {
        IsolatedStorageFile appStore = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly | IsolatedStorageScope.Domain, null, null);
        using(IsolatedStorageFileStream fileStream=appStore.OpenFile("myFile21.xml",FileMode.OpenOrCreate))
        {
            DataContractSerializer serializer = new DataContractSerializer(typeof(T));
            serializer.WriteObject(fileStream, loc);
        }
    }
    public static T retrieve()
    {
        T obj = default(T);
        IsolatedStorageFile appStore = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly | IsolatedStorageScope.Domain, null, null);
        if (appStore.FileExists("myFile21.xml"))
        {
            using (IsolatedStorageFileStream fileStream = appStore.OpenFile("myFile21.xml", FileMode.Open))
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                try
                {
                    obj = (T)serializer.ReadObject(fileStream);
                }
                catch (SerializationException e)
                {
                    Console.WriteLine(e.StackTrace);
                }
            }
        }
        return obj;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:41:54.187

首先要做的是确保传递给的对象[属于 DataContractSerializer 支持](http://msdn.microsoft.com/en-us/library/ms731923.aspx)`store`的类型。

最简单的方法是自己检查所有`store`呼叫。

您还可以创建一种验证方法，甚至更好，看看是否有其他人已经实现了。此方法可以验证`loc`对象并返回 a并在[System.Diagnostics.Debug.Assert](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.assert.aspx)调用内的方法`boolean`开头调用，以便它仅在调试配置上运行。请注意，尽管此方法可能非常棘手，因为您必须为规范中提到的所有情况验证类型 T，并且如果 T 是泛型，则还要验证 T 的参数。`store``DataContractSerializer`

# git - 如何找出 git repo 中哪些文件占用的空间最多？

> ID：13403069
> 
> 赞同：29
> 
> 时间：2012-11-15T17:34:53.950
> 
> 标签：git

我需要使回购更小。我想我可以通过从 git 历史记录中删除有问题的二进制文件来使其更小：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch BigFile' 
```

然后释放对象：

```
rm -rf .git/refs/original/
git reflog expire --expire=now --all
git gc --aggressive --prune=now 
```

（如果这些命令是错误的，请随时发表评论。）

问题：如何识别那些大文件以便我可以评估是否将它们从 git 历史记录中删除？很可能它们不再在工作树中 - 它们已被删除并且可能还没有被跟踪：

```
git rm --cached BigFile 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-09-10T15:45:38.447

[twalberg 的回答](https://stackoverflow.com/a/13405217/1054322)可以解决问题。我将它包装在一个循环中，以便您可以按大小顺序列出文件：

```
while read -r largefile; do
    echo $largefile | awk '{printf "%s %s ", $1, $3 ; system("git rev-list --all --objects | grep " $1 " | cut -d \" \" -f 2-")}'
done <<< "$(git rev-list --all --objects | awk '{print $1}' | git cat-file --batch-check | sort -k3nr | head -n 20)" 
```

`head -n 20`将输出限制在前 20 位。根据需要进行更改。

确定问题文件后，请查看[此](https://stackoverflow.com/a/17890278/1054322)答案以了解如何删除它们。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-15T20:01:44.897

您可以像这样找到最大对象的哈希 ID：

```
git rev-list --all --objects | awk '{print $1}' | git cat-file --batch-check | sort -k3nr 
```

然后，对于特定的 SHA，您可以执行以下操作来获取文件名：

```
git rev-list --all --objects | grep <SHA> 
```

不确定是否有更有效的方法来做到这一点。如果您确定所有内容都在包文件中（而不是松散的对象），`git verify-pack -v`则生成包含大小的输出，并且我似乎记得在某处看到了一个脚本，该脚本将解析该输出并将每个对象与原始文件进行匹配。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-19T16:48:07.070

忍不住优化了 MatrixManAtYrService 的回答：

```
git rev-list --all --objects | git cat-file --batch-check='%(objectname) %(objecttype) %(objectsize) %(rest)' | grep blob | sort -k3nr | head -n 20 
```

这种方式`git rev-list`只调用一次（而不是每个正在显示的对象），并且脚本更清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T08:05:13.973

[我写了一个脚本，它会在我的回答中告诉你](https://stackoverflow.com/questions/1029969/why-is-my-git-repository-so-big/45366030#45366030)最大的对象、文件或目录。没有参数，它会告诉你所有对象的大小，按大小排序。您可以告诉它`--sum`或`--directories`将每个文件的所有对象相加并打印出来，或者对每个目录中的所有文件执行相同的操作。我希望它有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-08T08:22:08.377

使用[git-filter-repo](https://github.com/newren/git-filter-repo)您可以分析存储库中占用的空间。

```
git filter-repo --analyze 
```

要查看最大的已删除文件，请参阅：

```
.git/filter-repo/analysis/path-deleted-sizes.txt 
```

# ios - 表视图侧视图控制器中的当前选定行

> ID：13403072
> 
> 赞同：0
> 
> 时间：2012-11-15T17:35:06.700
> 
> 标签：ios, uitableview, tableview

我在侧视图控制器中使用自定义单元格和表格视图。

侧 VC 使用一种主要的可用幻灯片视图控制器样式，从左侧滑入以显示导航菜单。

开始时，主视图控制器使用此侧视图控制器加载到导航堆栈。

在这种情况下如何确定选定的行？它不是表中这样的“选定”行，而是最后选择的行。所以我不确定正常的方法是否有效。

```
NSIndexPath *path = [tableView indexPathForSelectedRow]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:39:47.390

这个问题有点令人困惑，但我想我明白了。

你可以做几件事。

创建一个 ivar，类似的东西`lastSelectedIndexPath`并在方法中设置该值`didSelectedRowAtIndexPath`。

在每个主视图控制器上添加一个方法来查询它是谁（每个都实现一个通用接口/协议）。然后让你的侧视图控制器调用活动主视图控制器上的方法并询问“所以......你是谁？” 这样您就不必跟踪显示的内容，只需在需要时查询即可。

# c# - 在 C# 单元测试中向 Mock DB 添加数据的方法

> ID：13403074
> 
> 赞同：4
> 
> 时间：2012-11-15T17:35:23.917
> 
> 标签：c#, unit-testing, mocking, tdd

由于我对单元测试和 TDD 有点陌生，所以这篇文章更多地是一个讨论的开始。

我目前正在为与多个数据库交互的 .NET 进程编写一些单元测试，并且正在使用模拟数据库上下文来尝试覆盖我的测试中的不同边缘情况，验证程序本身中的异常处理等等。话虽如此，我的一些单元测试使用有效数据，而另一些则没有。

在将有效/虚假数据添加到模拟数据库上下文时，我正在寻找建议的最佳实践方面的反馈。我见过人们以多种方式做到这一点（例如 - 实现存储库模式，将模拟数据添加到 .csv 文件并使它们成为项目的一部分，等等......）。

我目前正在考虑使用存储库模式将`Survey`对象添加到`Surveys`目标数据库中的表中。

首先，我有界面：

```
public interface ISurveyRepository
{
   IQueryable<Survey> SurveySeries { get; }
} 
```

这在单元测试所需的模拟假/有效数据存储库中都实现了

```
class FakeSurveyRepository : ISurveyRepository
{
   private static IQueryable<Survey> fakeSurveySeries = new List<Survey> {
      new Survey { id = 1, SurveyName="NotValid1", SurveyData="<data>fake</data>"},
      new Survey { id = 2, SurveyName="NotValid2", SurveyData="<data>super fake</data>"},
      .........,
      new Survey {id = 10, SurveyName="NotValid10", SurveyData="<data>the fakest</data>" }       
   }.AsQueryable();

   public IQueryable<Survey> SurveySeries 
   { 
      get { return fakeSurveySeries; }
   }
}
// RealSurveyRepository : ISurveyRepository is similar to this, but with "good" data 
```

然后，我有一个类通过在构造函数中传递对系列的引用来使用这些数据来获取虚假/有效数据：

```
public class SurveySeriesProcessor
{
   private ISurveyRepository surveyRepository;

   public SurveySeriesProcessor( ISurveyRepository surveyRepository )
   {
       this.surveyRepository = surveyRepository;
   }

   public IQueryable<Survey> GetSurveys()
   {
      return surveyRepository.SurveySeries
   }
} 
```

然后可以在我的测试中使用这些对象，例如：

```
[TestClass]
public class SurveyTests
{
    [TestMethod]
    WhenInvalidSurveysFound_SurveyCopierThrowsInvalidSurveyDataErrorForEach()
    {
       // create mocking DB context and add fake data
       var contextFactory = new ContextFactory( ContextType.Mocking );
       var surveySeriesProcessor = new SurveySeriesProcessor( new FakeSurveyRepository() );

       foreach(Survey surveyRecord in surveySeriesProcessor.GetSurveys() )
       {
          contextFactory.TargetDBContext.Surveys.AddObject( surveyRecord );
       }
       // instantiate object being tested and run it against fake test data
       var testSurveyCopier = new SurveyCopier( contextFactory );
       testSurveyCopier.Start();
       // test behavior
       List<ErrorMessage> errors = testSurveyCopier.ErrorMessages;
       errors.Count.ShouldEqual( surveySeriesProcessor.GetSurveys().Count );
       foreach(ErrorMessage errMsg in errors)
       {
          errMsg.ErrorCode.ShouldEqual(ErrorMessage.ErrorMessageCode.InvalidSurveyData);
       }
    }
} 
```

注意：我意识到在提供的示例代码中，我不一定需要使实现的类`ISurveyRepository`将系列返回为`IQueryable<Survey>`（它们很可能是`List<Survey>`）。但是，我将在未来扩展接口和这些类的功能，以根据添加到 LINQ 查询的某些标准过滤掉假/有效系列，这就是我让存储库实现的原因`IQueryable<>`。这是模拟代码，旨在传达我所想的基本原则。

考虑到所有这些，我要问的是：

1.  您对我在这种情况下可以采取的替代方法有什么建议吗？
2.  您过去采用了哪些方法，您喜欢/不喜欢它们的哪些方面？您发现哪个最容易维护？
3.  鉴于我发布的内容，您是否注意到我的一般单元测试方法存在缺陷？有时我觉得我编写的单元测试试图涵盖太多内容，而不是简洁、优雅和中肯。

这意味着有点开放的讨论。请记住，这是我写过的第一组单元测试（不过，我已经阅读了大量关于该主题的文献）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T20:29:23.090

我认为你在一个很好的轨道上。

就个人而言，在同样的情况下，如果我正在处理存储库样式模式，

```
public interface IRepository<T>
{
    IEnumerable<T> GetAll();
}

public class PonyRepository : IRepository<Pony>
{
    IEnumerable<Pony> GetAll();
} 
```

为了真正提供我需要的数据，我通常会创建一个 TestObjects 或 TestFakes 类来按需提供所需的数据。

```
public class FakeStuff
{
     public static IEnumerable<Pony> JustSomeGenericPonies(int numberOfPonies)
     {
        // return just some basic list
         return new List<Pony>{new Pony{Colour = "Brown", Awesomeness = AwesomenessLevel.Max}};

         // or could equally just go bananas in here and do stuff like...
         var lOfP = new List<Pony>();
         for(int i = 0; i < numberOfPonies; i++)
         {
             var p = new Pony();
             if(i % 2 == 0) 
             {
                 p.Colour = "Gray";
             }
             else
             {
                 p.Colour = "Orange"; 
             }

             lOfP.Add(p);
         }

         return lOfP;
     }
} 
```

并以此进行测试：

```
[Test]
public void Hello_I_Want_to_test_ponies()
{
    Mock<IRepository<Pony> _mockPonyRepo = new Mock<IRepository<Pony>>();
    _mockPonyRepo.SetUp(m => m.GetAll()).Returns(FakeStuff.JustSomeGenericPonies(50));

    // Do things that test using the repository
} 
```

因此，这提供了假数据的可重用性，通过将其保留在存储库之外并放在它自己的位置，这意味着我可以在任何需要小马列表的测试中调用这个小马列表，而不仅仅是涉及存储库的地方。

如果我需要特定测试用例的特定数据，我将实现与您类似的东西，但要更明确地说明该特定 Fake 存储库的用途：

```
public class FakePonyRepositoryThatOnlyReturnsBrownPonies : IRepository<Pony>
{
    private List<Pony> _verySpecificAndNotReusableListOfOnlyBrownPonies = new List....

    public IEnumerable<Pony> GetAll()
    {
        return _verySpecificAndNotReusableListOfOnlyBrownPonies;
    }
}

public class FakePonyRepositoryThatThrowsExceptionFromGetAll : IRepository<Pony>
{
    public IEnumerable<Pony> GetAll()
    {
        throw new OmgNoPoniesException();
    }
} 
```

您也提到了 CSV 文件 - 这可能是可行的（过去曾使用过 XML），但我认为在 CSV 或 XML 中保存假数据只是使用 SQL CE 将数据保存在本地化数据库中的更糟糕的版本或一些等价物。然而，这两种方法的可维护性都较差，而且至关重要的是，就单元测试而言，它们比使用内存中的假对象要慢。我个人不会再使用基于文件的方法，除非我专门测试序列化或 IO 或其他东西。

希望有这么多有用的东西...

# ios - iOS 中可用的输入/输出 AVAudioSession 数据源

> ID：13403085
> 
> 赞同：3
> 
> 时间：2012-11-15T17:35:57.800
> 
> 标签：ios, audio, ios6, avaudiosession

我正在使用 AVAudioSession 和远程 IO，目的是通过音频插孔连接器和内置麦克风记录一些信息......我想这可能与 iOS 6 的新功能：多路由音频。

为此，我想从我的音频会话中获取 inputDataSources：（[https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref /c/data/AVAudioSessionCategoryMultiRoute](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/c/data/AVAudioSessionCategoryMultiRoute) )

我正在做的是：

```
AVAudioSession *session = [AVAudioSession sharedInstance];
NSArray *available_outputs = [session inputDataSources]; 
```

（我也在配置音频会话并激活它）

我得到的是全零`available_outputs`...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T06:41:15.427

找到了。
从[文档](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/occ/instp/AVAudioSession/inputDataSources)中：

> 这目前仅适用于某些 USB 设备。

这个 API 将在 iOS 7 中发生变化，但 6 仅限于“某些 USB 设备”的模糊定义。
顺便说一句，根据我的测试 - 它适用于 iPhone 麦克风的 iOS 6.02，但不适用于 6.1.4（在 iPhone 5 上的两个测试）。

# c - RUN FAILED 退出值 -1 073 741 819 - 我的代码有什么问题？

> ID：13403090
> 
> 赞同：1
> 
> 时间：2012-11-15T17:36:18.610
> 
> 标签：c, gcc, netbeans, mingw

我正在尝试制作一个秒表程序，该程序将`czas`写入`file.txt`. 我今天开始学习C，所以请原谅我，如果这是一个愚蠢的问题，但编译器不会抛出任何错误，NetBeans也不会显示任何感叹号。有我的代码：

```
#include <windows.h>
#define sleep(x) Sleep(1000 * x)

#include <stdio.h>
#include <stdlib.h>

int a = 0;
int czas = 0;
int main (void)
{
    FILE *file;
    while (a < 30) { /*repeats only 30 times*/
        a = a + 1; /*increases the counter for while loop*/
        file = fopen("file.txt","w"); /*opens file.txt for writing*/
        fprintf(file,"%s", czas); /*writes czas to file.txt*/
        fclose(file); /*closes file.txt to save*/ 
        czas = czas + 1; /*increases czas for writing to file*/
    }
 return 0;
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:38:43.227

`%s`需要一个`char*`作为参考参数。

你想写出一个`int`期望`%d`.

有关这方面的详细信息，请参阅`man fprintf`。

* * *

如果您希望`czas`在新行中包含每个新值，您可以在`fprintf()`语句中指定它，如下所示：

```
fprintf(file,"%d\n", czas); 
```

# java - 为什么我的电子邮件 EditText 保存在我的昵称 EditText 之上？

> ID：13403092
> 
> 赞同：2
> 
> 时间：2012-11-15T17:36:35.290
> 
> 标签：java, android, android-edittext

我正在努力完成*“Sam's Tech Yourself Android Application Development in 24 Hours”*，在某些时候我的昵称和电子邮件设置停止正确保存。它现在根本不保存昵称并将电子邮件保存到两者。我做了什么导致这种情况，我该如何解决？

我认为这些是代码的相关领域，但如果您需要更多，请询问。据我所知，这仍然是书中的代码，并且它曾经可以工作。也许某处有错字？

```
public class QuizActivity extends Activity {
public static final String GAME_PREFERENCES = "GamePrefs"; 
public static final String GAME_PREFERENCES_NICKNAME = null; //String
public static final String GAME_PREFERENCES_EMAIL = null; //String

@Override
protected void onPause() {
    super.onPause();

    EditText nicknameText = (EditText) findViewById(R.id.EditText_Nickname);
    EditText emailText = (EditText) findViewById(R.id.EditText_Email);

    String strNickname = nicknameText.getText().toString();
    String strEmail = emailText.getText().toString();

    // TODO: fix password and email saving and displaying improperly
    Editor editor = mGameSettings.edit();
    editor.putString(GAME_PREFERENCES_NICKNAME, strNickname);
    editor.putString(GAME_PREFERENCES_EMAIL, strEmail);
    editor.commit();

    Toast.makeText(QuizSettingsActivity.this, R.string.settings_saved,
            Toast.LENGTH_SHORT).show();

}

public void initNicknameEntry() {
    EditText nicknameText = (EditText) findViewById(R.id.EditText_Nickname);
    if (mGameSettings.contains(GAME_PREFERENCES_NICKNAME)) {
        nicknameText.setText(mGameSettings.getString(
                GAME_PREFERENCES_NICKNAME, ""));
    }
}

public void initEmailEntry() {
    EditText emailText = (EditText) findViewById(R.id.EditText_Email);
    if (mGameSettings.contains(GAME_PREFERENCES_EMAIL)) {
        emailText.setText(mGameSettings.getString(GAME_PREFERENCES_EMAIL,
                ""));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:01:56.570

您必须将它们初始化为不同的值：

```
public static final String GAME_PREFERENCES_NICKNAME = "Nickname"; //String
public static final String GAME_PREFERENCES_EMAIL = "Email"; //String 
```

否则 SharedPreferences 无法区分这两个键，并且总是返回找到的第一个键。

# python - 棘手：如何将字典值（包含列表）与列表进行比较？

> ID：13403096
> 
> 赞同：0
> 
> 时间：2012-11-15T17:36:44.633
> 
> 标签：python, list, dictionary

我有一个字典（包含列表）和一个列表，我想比较：

首先，我想知道`[1, 1, 0, 0, 0, 1, 1, 1]`ref 中的每个值列表（例如对于 issue1，值列表是 ）是否与 list 具有相同的长度`abf`。

然后是棘手的部分：如果它们的长度相同，我想将列表`abf`中的每个项目与`ref`.

但是......在一种情况下，程序将继续前进到下一个值列表`ref`（不检查当前值列表的剩余项目），这是如果值列表的项目是 1 并且对应的列表中的项目`abf`为 0。

为了清楚起见，这里有一个例子：

dict ref 中键 'issue1' 的值列表是`[1, 1, 0, 0, 0, 1, 1, 1].`The list `abf`is `[1, 1, 0, 1, 0, 1, 0, 0]`。

现在，我想检查这两个列表中的每一项（issue1 的值列表的第一项与 list 的第一项`abf`，然后是第二项`issue1`的第二项，`abf`以此类推……）：前两个项目是 1 和 1 并且条件（见上文）不满足，它应该继续接下来的两个项目（再次是 1 和 1）等等，直到它到达（在这种情况下）第七项（即 1 和 0）。此时它将停止将 value-list of`issue1`与 list`abf`进行比较，并继续将下一个 value-list (of `issue2`) 与 list进行比较`abf`。我希望你能明白！

到目前为止，这是我的代码：

```
## ref is a dict with lists as values, abf is a list
ref = {'issue1': [1, 1, 0, 0, 0, 1, 1, 1], 
       'issue2': [1, 0, 0, 1, 0, 0, 0, 0], 
       'issue3': [0, 1, 0, 0, 1, 0, 0, 1]}
abf = [1, 1, 0, 1, 0, 1, 0, 0]

## getting the length of the lists in ref and abf ans save them in ref_total & abf_total
for key in ref:
    [int(item) for item in ref[key]]
ref_total = len(ref[key])
abf_total = len(abf)

## check whether ref_total and abf_total has same value
if ref_total == abf_total:
    for key, value in ref.items():
        for j in value:
            if (ref[key][j] == 1) and (abf[j] == 0): ## if item in ref is 1 and in abf is 0, go on to the next value-list
                break
            if j == abf_total-1: ## if he compared the whole value-list of the current key of ref with abf and the condition above did not occur, save the key of this value-list in resp!
                resp = ref[key]

else:
    resp = 'Length of strings varies!' ##if the lists don't have the same length

print resp ##let me know, which key "went through" 
```

我真的很期待你的回应。代码不起作用，我不知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:53:14.220

如果我正确理解您的要求，Python 内置了该功能。您可以这样做。

```
ref = {'issue1': [1, 1, 0, 0, 0, 1, 0, 1], 
       'issue2': [1, 0, 0, 1, 0, 0, 0, 0], 
       'issue3': [0, 1, 0, 0, 1, 0, 0, 1]}

abf = [1, 1, 0, 1, 0, 1, 1, 0]

abf == abf
# OUT: True

def findinref(d, abf):
    for key, value in ref.items():
        if value == abf:
            return value
    return None

findinref(ref, abf)

findinref(ref, [1,1,0,0,0,1,0,1])
# OUT: [1, 1, 0, 0, 0, 1, 0, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:42:25.293

非常非常非常感谢你们，你们真的很棒！没想到反馈这么多！！你真的帮了我很多。我选择了 Rohit Jain 的解决方案 - 非常感谢 Rohit！这是完整的代码（如果有改进的空间，请不要犹豫批评我！任何反馈都非常感谢！！）

```
ref = {'issue1': [1, 1, 0, 0, 0, 1, 1, 1], 
       'issue2': [1, 0, 0, 1, 0, 0, 0, 0], 
       'issue3': [0, 1, 0, 0, 1, 0, 0, 1]}
abf = [1, 1, 0, 1, 0, 1, 0, 0]

abf_total = len(abf)

for key, value in ref.items():
    ref_total = len(ref[key])   
    if ref_total == abf_total:
        i = -1
        for j in value:
            i += 1
            if (j == 1) and (abf[i] == 0):
                break
            if i == len(abf)-1:
                resp = key
    else:
        resp = 'Length of strings varies!'
print resp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:42:45.057

您的代码几乎**没有问题**，我想指出：-

```
for key in ref:
    [int(item) for item in ref[key]] 
```

首先，您的上述循环是模棱两可的。它什么也没做，只是创建一个列表，然后被忽略

第二，

```
ref_total = len(ref[key])
abf_total = len(abf) 
```

上面的赋值不起作用，因为你把它放在了 for 循环之外。缩进问题。

```
if ref_total == abf_total:
    for key, value in ref.items(): 
```

在上面的代码段中，您应该将您的`if`条件移到 for 循环中，而不是先有条件，然后再循环。因此，对于每一对，检查. 如果为真，则继续内部 for 循环。`for``if condition``key, value``len(value) == len(abf)`

```
if (ref[key][j] == 1) and (abf[j] == 0) 
```

此条件不考虑`abf[j] = 1`和`ref[key][j] = 0`。您可以检查相等性，而不是检查不等式，然后对其进行否定。那会更容易。（**编辑： -** *刚刚注意到，您只想检查该条件。所以您可以忽略此更改）。*

此外，您的内部循环不应该是`for j in value`. 那时你不能索引`j`。使用`for j in range(ref_list)`, 比较每个索引处的值。

* * *

您可以在上述更改后试用此代码：-

```
ref = {'issue1': [1, 1, 0, 0, 0, 1, 1, 1], 
       'issue2': [1, 0, 0, 1, 0, 0, 0, 0], 
       'issue3': [0, 1, 0, 0, 1, 0, 0, 1],
       'issue4': [1, 1, 0, 1, 0, 1, 0, 0]}
abf = [1, 1, 0, 1, 0, 1, 0, 0]
abf_total = len(abf)  # Since it will never change. Move it outside

for key, value in ref.items():
    resp = ""
    ref_total = len(value)        

    if ref_total == abf_total:
        for j in range(ref_total):

            if not (value[j] == abf[j]): 
                break
            if j == abf_total-1: 
                resp = value
                print resp

    else:
        resp = 'Length of strings varies!' ##if the lists don't have the same length 
```

**输出 ： -**

```
[1, 1, 0, 1, 0, 1, 0, 0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:50:48.063

我添加了一些注释作为评论，但这应该有效：

```
## ref is a dict with lists as values, abf is a list
ref = {'issue1': [1, 1, 0, 0, 0, 1, 0, 1],
       'issue2': [1, 0, 0, 1, 0, 0, 0, 0],
       'issue3': [0, 1, 0, 0, 1, 0, 0, 1]}
abf = [1, 1, 0, 1, 0, 1, 1, 0]

# abf_total does not change during cycle. Calculate it outside.
abf_total = len(abf)

## getting the length of the lists in ref and abf ans save them in ref_total & abf_total
for key, items in ref.iteritems():
    ref_total = len(items)

    ## check whether ref_total and abf_total has same value
    if ref_total == abf_total:
        # Here 'ref' screened the outside ref. Use 'i'
        for i, value in enumerate(items):
            if (items[i] == 1) and (abf[i] == 0): ## if item in ref is 1 and in abf is 0, go on to the next value-list
                break
        if i == abf_total-1:
            # if he compared the whole value-list of the current key of ref with abf and the condition above did not occur, save the key of
this value-list in resp!
            resp = "%s = %s" % (key, items)
    else:
        resp = 'Length of strings varies!' ##if the lists don't have the same length

print resp ##let me know, which key "went through" 
```

输出是：

```
issue2 = [1, 0, 0, 1, 0, 0, 0, 0] 
```

# dynamics-crm - 向 CRM 2011 中的所有实体添加表单选项卡

> ID：13403103
> 
> 赞同：0
> 
> 时间：2012-11-15T17:37:15.160
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我的要求是在创建自定义配置记录时在表单中添加一个选项卡（不是功能区选项卡）。功能是这样的：

自定义配置实体有一个名为“实体名称”的字段。在创建此配置记录时，我需要将一个表单选项卡添加到此配置记录的“实体名称”字段中指定的实体。在这里，我的想法是将此选项卡添加到所有实体，并通过查询具有当前实体名称的配置记录来隐藏/显示此选项卡。那么，有没有办法一次性将选项卡添加到所有实体？(OR/AND) 我们可以配置为所有新创建的实体添加一个默认选项卡，例如“Notes”选项卡吗？

如果我错了，如果您有任何建议，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:36:26.477

没有开箱即用的方法来做到这一点。我的建议是保持简单并手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:21:50.823

[这](http://charanmandya.blogspot.in/2012/12/addremove-tab-in-entity-form-using-plug.html)是通过插件在创建/删除配置记录时添加/删除选项卡的方法。

# wsdl - 有没有办法使用浏览器浏览 WSDL 端点？

> ID：13403104
> 
> 赞同：0
> 
> 时间：2012-11-15T17:37:15.813
> 
> 标签：wsdl, endpoint

我想在 IE9 或 FireFox 等浏览器中测试 WSDL 服务的结果。我知道我可以查看 WSDL XML，但我想测试一个名为的端点的返回结果，该端点`GetEmployeeById`接受一个名为的参数`Id`并返回一个类。我假设这都被序列化为 XML，所以浏览器非常适合测试它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:37:04.783

如果 WSDL 提供了足够的信息，Internet Explorer 让您使用简单的字符串参数发出请求。

如果您还没有看到它，那么可能 WSDL 只是出于可发现性的原因，可能只是指向不同传输协议中的另一个服务，而不是端口 80，如果该服务不在端口 80 上，您将无法使用你的浏览器。

您有另一个更复杂的工具，称为 FIDDLER，您可以格式化任何类型的 http 请求，以及接收任何类型的请求，例如 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:42:05.367

如果您使用 Visual Studio 进行 .net 开发，我认为比浏览器可能会使用的东西要好得多：

```
 wcftestclient <url> 
```

它可以从命令提示符调用，是 Visual Studio 工具的一部分。

该工具将帮助您构建和接收复杂对象并查看已经序列化的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T17:20:53.117

您可以使用此[URL](http://www.soapclient.com/soaptest.html)来测试 WSDL 端点、发送请求并查看响应。

# c - 当我只想接收单个连接时，我应该如何在 C 中进行非阻塞服务器行为？

> ID：13403105
> 
> 赞同：0
> 
> 时间：2012-11-15T17:37:17.860
> 
> 标签：c, sockets, nonblocking

在 C 语言中，假设我有一个服务器应用程序。套接字已正确设置并已绑定到本地端口，并且已调用 listen() 函数而没有错误。

像这样的代码：

```
 //obtain a connection.
    int connection;
    struct sockaddr_storage sender;
    socklen_t addr_size = sizeof(sender);
    if((connection=accept(sockfd, (struct sockaddr*)&sender, &addr_size))==-1)
            {close(sockfd); return -1; }
    if(close(sockfd)==-1){
            close(connection);
            return -1;
    }
    else
            return connection; 
```

成功获取连接文件描述符，通过该描述符可以从客户端读取数据。

我的应用程序要求服务器等待一段有限的时间，然后在没有建立连接的情况下关闭并执行其他操作。此外，最多接受一个连接。Accept() 是一个阻塞系统调用，但我想避免阻塞。

似乎有很多不同的方法可以解决这个问题：

*   一个[SE question](https://stackoverflow.com/questions/8892092/nix-c-writing-a-non-blocking-socket-server)建议使用 select 来解决这个问题，但是 select 是为一次监视许多文件句柄而设计的，在这里似乎有点过分了。

*   另一个[问题](https://stackoverflow.com/questions/10794999/enable-non-blocking-socket)建议将套接字修改为非阻塞，然后在循环中检查是否建立了连接。这也可以，但看起来不太好，因为我确实想阻止 - 只是不是永远。

*   在其他语言中，我似乎有人使用 SIGALARM 和 alarm() 命令来防止阻塞，但我的应用程序有多个线程，这似乎是一个容易出错的解决方案。

*   在其他一些语言（Java？）中，我认为有一个超时参数可以传递给接受它来完成这个。这在这里会很理想，但我似乎无法在 C 中找到类似的套接字功能。

有没有更好的方法来解决这个问题？这似乎是其他人已经想出来的事情。如果没有更好的方法，上面提到的哪种解决方案最合适？我倾向于使套接字不阻塞，但这似乎会引入大量额外的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:50:00.170

使用 select 时，请记住始终使用 fcntl() 使您的文件描述符非阻塞，否则客户端可能会启动连接，select 将返回，客户端可能会终止，并且您的服务器将在 accept() 中被永久阻塞。

成功接受后，如果您的程序以这种方式工作，您可能会再次将文件描述符转换为阻塞模式。

# c++ - MathGL BoxPlot 的数据格式

> ID：13403106
> 
> 赞同：0
> 
> 时间：2012-11-15T17:37:19.653
> 
> 标签：c++, c, statistics, boxplot, mathgl

我想使用 MathGL 在箱形图中显示一个 10x48 数据集（10 个采样点，每个采样点有 48 个或更多样本）。结果应该是 10 个箱线图，汇总了每个采样点的数据。我遇到的问题是，我无法弄清楚 MathGL 的箱线图函数需要什么数据格式。在文档中，它说对于每个条目，提供了 5 个值（*最小值、Q1、Q2/中位数、Q3、最大值*），但是当我构造`mvlData`类似的值时：

```
mglData(10x5) =
{
  Min_1,  Q1_1,  Q2_1,  Q3_1,  Max_1,
  Min_2,  Q1_2,  Q2_2,  Q3_2,  Max_2,
  Min_3,  Q1_3,  Q2_3,  Q3_3,  Max_3,
  ...
  Min_10, Q1_10, Q2_10, Q3_10, Max_10
} 
```

我没有得到正确的输出。如果我用这样的数据来构建它：

```
mglData(10x48) =
{
  Data_1_1,  Data_1_2,  Data_1_3,  ... , Data_1_48,
  Data_2_1,  Data_2_2,  Data_2_3,  ... , Data_2_48,
  Data_3_1,  Data_3_2,  Data_3_3,  ... , Data_3_48,
  ...
  Data_10_1, Data_10_2, Data_10_3, ... , Data_10_48
} 
```

它输出漂亮的箱线图，但值错误。该[示例](http://mathgl.sourceforge.net/doc_en/doc_en_43.html#BoxPlot-sample)表明`mglData`需要包含 Nx7 值，因此在我的情况下为 10x7？但我只能看到 5 个可能的值（不是 7 个），或者箱线图的值是否超过*最小值、Q1、Q2/中值、Q3、最大值*？

非常感谢任何帮助。

谢谢

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T14:37:50.140

具有转置尺寸的第一个变体是正确的。您可以直接创建一个 10*5 的数组（x 方向 10 个点）或通过函数 mglData::Transpose() 转置当前数组。

# debugging - 在 Tomcat 上运行时在 Eclipse 中调试 GWT 客户端（多个 WAR）

> ID：13403109
> 
> 赞同：2
> 
> 时间：2012-11-15T17:37:26.753
> 
> 标签：debugging, gwt, tomcat, client-side

我最近开始了一项新工作，其中我必须修复错误并添加到一套 GWT 应用程序中，这些应用程序多年来有很多贡献者/开发人员:(

```
App Server: Tomcat 6.0.16
JRE:        Java 6
GWT:        2.5.0
Eclipse:    Juno 
```

这种配置的奇怪之处在于，对于套件中的每个应用程序（大约有 4 个），客户端代码被分离到它自己的 war 文件中，而服务器端代码被分离到几个 war 文件中。问题是各种组件（war 文件）相互依赖并在运行时交互。

* * *

**要求**

基本上，我已经进行了服务器端调试，但我想通过 Eclipse 进行客户端调试；到目前为止，我还不能。

* * *

**代码布局**

当代码完全部署到 Tomcat 时，它看起来像这样：

*   网络应用
    *   服务器件1
        *   网络信息
            *   班级
                *   ...
            *   web.xml
            *   ...
    *   服务器件2
        *   网络信息
            *   班级
                *   ...
            *   web.xml
            *   ...
    *   客户端App1
        *   网络信息
            *   web.xml
        *   索引.html
        *   ...
    *   客户端App2
        *   网络信息
            *   web.xml
        *   索引.html
        *   ...
    *   客户端App3
        *   网络信息
            *   web.xml
        *   索引.html
        *   ...

* * *

**过往的经验**

在我上一份工作中，我的团队是唯一使用 GWT 和 Maven 进行开发的团队。我们能够设计和实现应用程序，因此我们保持简单。

对于每个应用程序，我们将所有客户端和服务器代码保存在 1 个 WAR 文件中。

我们创建的所有共享组件（窗口管理系统等）都经过 JAR 编译并包含在每个应用程序的 WAR 文件中。

以这种方式进行操作可以实现非常简单的调试设置；在 Tomcat 或 Weblogic 中运行应用程序时，我们能够使用 Eclipse 调试客户端和服务器代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:12:21.883

有一个设置允许您使用外部服务器启动 GWT 开发模式。有关更多详细信息，请参见[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)。基本上你做以下事情：

1.  以调试或运行模式启动您的应用服务器（取决于您是否还想在 Eclipse 中调试后端代码）。
2.  使用选项启动 GWT 开发模式`-noserver`（不会启动嵌入式码头容器）。
3.  转到您的应用服务器提供的 URL（即`http://localhost:8080/index.jsp?gwt.codesvr=localhost:9997`）

如果您使用 maven，您可以使用以下命令运行开发模式：`mvn gwt:run -Dgwt.noserver=true`

# jquery - 有没有办法在 KendoUI Mobile 的 ScrollView 中禁用滑动事件？

> ID：13403110
> 
> 赞同：1
> 
> 时间：2012-11-15T17:37:28.503
> 
> 标签：jquery, cordova, scrollview, kendo-ui

我使用 KendoUI Mobile 的[ScrollView](http://docs.kendoui.com/api/mobile/scrollview)控件作为轮播来容纳一些问题，并且需要为其禁用滑动事件（我使用“下一个”和“上一个”按钮来控制“导航”）。

我遇到的问题是我在 ScrollView 中有一个[jQuery-UI 滑块](http://jqueryui.com/slider/)，但是当我尝试更改滑块值时，它开始将 ScrollView 移动到下一个“页面”。

我希望有一种本地方法可以禁用 ScrollView 上的“滑动移动”，但我在文档中找不到任何内容。

我已经尝试在 ScrollView 页面上捕获事件，但无法获得在实际设备上工作的东西：

```
$('#scrollview-container [data-role="page"]').on('mousedown', function(e) {
    console.log('mousedown');
    e.stopImmediatePropagation();
});
$('#scrollview-container [data-role="page"]').on('touchstart', function(e) {
    console.log('touchstart');
    e.stopImmediatePropagation();
}); 
```

以上适用于我的模拟器，但不适用于实际设备。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:04:27.803

要正确阻止事件，您需要在设置 swipe 事件时准确查看绑定是如何以及何时完成的。on()、bind() 和 live() 产生不同的事件顺序，如果在事件已经开始滑动后阻止事件，将无济于事。

不过，阻止子元素上的事件可能会更好，因为相对于框架设置的事件的顺序并不重要。尝试停止从滑块的直接父级传播触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T06:55:02.553

这是在这里回答：[http://www.telerik.com/forums/scrollview-is-missing-a-lot-of-essential-functionality-(-)](http://www.telerik.com/forums/scrollview-is-missing-a-lot-of-essential-functionality-%28-%29)

```
var scrollview = $("[data-role=scrollview]").getKendoMobileScrollView();
var cancel = function() { this.cancel(); };

scrollview.pane.userEvents.bind("start", cancel); //disable the pages movement

// to no-longer disable the swipe use this:
// scrollview.pane.userEvents.unbind("start", cancel); //enable the pages movement 
```

# javascript - “li”行内元素的高度

> ID：13403112
> 
> 赞同：1
> 
> 时间：2012-11-15T17:37:34.023
> 
> 标签：javascript, jquery, html, css

我正在尝试将具有“display：inline”的“li”的高度设置为css。我知道内联元素会重置高度，但我需要它是 display:inline 只是为了让文本居中对齐列表。

这是我的CSS：

```
li{
    font-size: 28px;
    border-right: 1px solid #b9b9b9;
    margin-right: 15px;
    padding-right: 15px;
    line-height: 40px;
    display: inline;
    text-align: center;
    color: #ffffff;
} 
```

我需要修复高度以根据文本高度显示边框高度，这就是现在发生的事情：

![在此处输入图像描述](../Images/366986be080e0c86f607ffe976c9d234.png)

有什么想法可以解决这个问题吗？请记住，我需要显示内联文本以使列表在 ul 上居中对齐。

如果有其他方式 text-align:center 列表也将帮助我认为......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:39:08.327

`inline`这种方式不尊重填充或边距。你应该使用`display: inline-block`which ：

[http://jsfiddle.net/hBz7G/1/](http://jsfiddle.net/hBz7G/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:47:57.263

尝试这个：

刚刚删除了 line-height 属性，该属性使其从顶部具有空间，并仅提供右侧边距和右侧填充以仅从右侧具有空间。

```
li{
  font-size: 28px;
  border-right: 1px solid #b9b9b9;
  margin: 0 15px 0 0;
  padding: 0 15px 0 0;
  display: inline;
  text-align: center;
  color: #ffffff;
} 
```

# invite - 创建邀请码的最佳做法是什么？

> ID：13403118
> 
> 赞同：0
> 
> 时间：2012-11-15T17:37:53.643
> 
> 标签：invite

我将生成一些邀请码。我知道一个简单的方法：做 n 次循环得到一个 n 长的随机字符串。但似乎当我想检查代码时，使用字符串查找代码是否在数据表中会花费更多。

那么，创建邀请码的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T03:33:21.043

（老问题，但与我刚刚写的一些代码有关......）

使用 GUID，并在表中的列上放置索引。没问题。

# ajax.beginform - 通过 OnSuccess 回调传递 Url 参数

> ID：13403120
> 
> 赞同：1
> 
> 时间：2012-11-15T17:37:58.860
> 
> 标签：ajax.beginform

我需要使用 URL 中的 2 个参数并在 OnSuccess 回调函数中使用它们。

这是从服务器发送的 URL：

```
http://localhost:35325/?Message=ChangePasswordSuccess&param1=%23UserSettings 
```

我需要这样发送 param1：

```
@using (Ajax.BeginForm("Manage", "Account", new AjaxOptions { HttpMethod = "POST", Confirm = "Você tem certeza que deseja salvar a alteração?", OnSuccess = "close(Message, param1);" })) 
```

在这里，我收到一个参考错误：ReferenceError: param1 is not defined。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:01:34.053

我发现这是正确的方法：

```
@using (Ajax.BeginForm("Manage", "Account", new AjaxOptions { HttpMethod = "POST", Confirm = "Você tem certeza que deseja salvar a alteração?", OnSuccess = "close(Message, param1);" })) 
```

谢谢

# ssas - 根据另一个维度中的条件统计一个维度中的项目

> ID：13403137
> 
> 赞同：0
> 
> 时间：2012-11-15T17:39:10.730
> 
> 标签：ssas, mdx

我正在使用两个维度：`Products`和`Colors`

例如，要返回与 RED 颜色关联的所有产品，我可以编写：

```
SELECT {Measures.[Product Count]} ON COLUMNS,
     {[Products].[ID].Members} ON ROWS

FROM MyCube
WHERE [Colors].[Type].&[RED] 
```

这将返回与 RED 颜色关联的产品，无论它们是否也与其他颜色关联。

现在，我想计算那些仅与红色相关的产品。例如，如果产品与 BLUE 和 RED 相关联，则不应计算在内。上面的代码段确实不起作用。

逻辑条件如下：

**计算仅与红色相关的产品**

谁能为此展示正确的MDX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:20:38.053

主要思想是计算与红色以外的颜色相关的产品数量：

```
WITH MEMBER [Measures].[only red] AS
    Count([Products].[ID].Members) -
    Count(NonEmpty([Products].[ID].Members, 
                   CrossJoin(Except([Colors].[Type].Members, {[Colors].[Type].&[RED]}), 
                             {[Measures].[Product Count]})))

SELECT [Measures].[only red] ON 0
FROM MyCube 
```

# phantomjs - 检索网页上的所有表单

> ID：13403138
> 
> 赞同：0
> 
> 时间：2012-11-15T17:39:18.197
> 
> 标签：phantomjs, zombie.js, casperjs

如何检索给定网站上存在的所有表单。特别是表单的 ID 和名称。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:16:27.547

简单地用类似的东西

```
var page = require('webpage').create();
 page.open('yoursitehere', function (status) {
    if (status !== 'success') {
         console.log('unable to access network');
     } else {
        var forms = page.evaluate(function(){
            //best way here     
            return document.forms;
        }); 
           //some stuff here
        console.log(forms.length);
        console.log(forms[0].name);
    }
   phantom.exit();
}); 
```

另外，请注意不能通过评估传递非原始对象。你必须在评估中做你的工作。

*注意：评估函数的参数和返回值必须是简单的原始对象。经验法则：如果它可以通过 JSON 序列化，那就没问题了。闭包、函数、DOM 节点等将不起作用！*

# javascript - 使用 JSDoc 的自执行函数内部的文档对象

> ID：13403141
> 
> 赞同：3
> 
> 时间：2012-11-15T17:39:42.007
> 
> 标签：javascript, jsdoc

所以我有几个像这样工作的对象定义：

```
(function () {
var parent= constructors.Parent.prototype;

/**
 * Creates an instance of Child.
 * 
 * @constructor
 * @augments Parent
 * @this {Child} 
 * @param {object} settings
 */
var Child= function(settings) {
    constructors.Parent.apply(this, arguments); //calling parent constructor
    //constructor code
}

Child.prototype= new constructors.Parent();

/**
 * Method1
 *
 * @this {Child}
 * @param {string} param1
 * @param {number} param2
 */
Child.prototype.method1= function(param1, param2)  {
    parent.method1.apply(this,arguments); //calls "super"
    //method code
}
constructors.Child= Child;
}()); 
```

我这样做是为了只有全局变量是“构造函数”，这样我就不必一直说“constructors.Child”。但是 JSDoc3 忽略了我的评论，并且在这段代码中没有生成任何内容。任何人都知道任何特殊标签来解决这个问题？我不介意 JSDoc 是否将我的类名显示为“Child”或“constructors.Child”，无论哪种方式都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T09:45:54.383

`@public`前面使用`@class/@module/@namespace` 见[https://github.com/jsdoc3/jsdoc/issues/442](https://github.com/jsdoc3/jsdoc/issues/442)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:07:25.013

我不确定这是否是正确的方法，但它有效：

在另一个文件上，我现在有以下内容：

```
/**
 * @module constructors
 */
constructors= {} 
```

在之前提到的文件中，我现在有：

```
/**
 * @exports constructors
 */
(function () {
var parent= constructors.Parent.prototype;

/**
 * Creates an instance of Child.
 * 
 * @constructor
 * @augments Parent
 * @this {Child} 
 * @param {object} settings
 */
var Child= function(settings) {
    constructors.Parent.apply(this, arguments); //calling parent constructor
    //constructor code
}

Child.prototype= new constructors.Parent();

/**
 * Method1
 *
 * @this {Child}
 * @param {string} param1
 * @param {number} param2
 */
Child.prototype.method1= function(param1, param2)  {
    parent.method1.apply(this,arguments); //calls "super"
    //method code
}
constructors.Child= Child;
}()); 
```

# mongodb - MongoDB 初始部署和索引

> ID：13403146
> 
> 赞同：2
> 
> 时间：2012-11-15T17:40:12.457
> 
> 标签：mongodb, indexing, mongodb-php

我正在用 MongoDB 做我的第一个项目，从我所见，隐式创建集合是推荐的做法（即 db.myCollection.insert() 将在第一次插入时创建集合）

我正在使用 PHP 并以这种方式使用不同的集合，但问题是我不知道应该在哪里创建该集合所需的索引。因为我不知道何时创建集合，所以天真的方法会在对该集合的每个操作之前调用 ensureIndex() （这听起来不太好）。或者每当建立到数据库的连接时，确保索引存在（如果我在未创建的集合上创建索引会发生什么？定义了吗？）

对此有任何最佳实践建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:22:46.347

不确定这是否是最佳实践，但我倾向于不将 ensureIndex 放在应用程序中。我通常会使用 db shell 放置我确定需要的那些。然后我在负载测试期间（或者当生产中的事情开始变慢时）密切关注，并在 shell 中再次添加我错过的任何内容。您可以通过 ensureIndex({a : 1}, {background : true}) 在后台构建索引，因此稍后构建它们并不像其他一些数据库那么糟糕。

MongoDB 有一个很好的分析器可以找到慢的地方：[http](http://www.mongodb.org/display/DOCS/Database+Profiler) ://www.mongodb.org/display/DOCS/Database+Profiler 。

10gen（MongoDB的商业对应）有一个免费的监控服务，虽然我还没有使用过，但被谈论很多：[http](http://www.10gen.com/mongodb-monitoring-service) ://www.10gen.com/mongodb-monitoring-service 。

但至于在创建集合之前调用 db.collection.ensureIndex() 会发生什么，它将创建集合并将索引放在上面。

如果您确实希望在应用程序中使用它，我会选择您提出的第二个选项（确保在 db connect 之后立即建立索引），而不是在每次操作之前。当我这样做时，我可能会在数据库中保存一些东西，这样如果有两个以上，它们就不会每次都运行。不知道php，但这里是伪代码：

```
var test = db.systemChecks.findOne({indexes : true})
if (test == null) //item doesn't exist
{
   //do all the ensureIndex() commands
   db.systemChecks.insert({indexes : true})
} 
```

如果您以后发现需要更多索引来运行索引，请记住删除 systemCheck 项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:19:37.853

实际上， ensureIndex() 正是您需要做的。我会在使用特定连接的每个模型的构造函数中执行此操作 - 如果您有其中一个模型）。ensureIndex() 将确保仅在索引不存在时才创建索引。您也可以在创建数据库连接时执行此操作。如果您在不存在的集合上运行 ensureIndex()，它只会创建该集合并创建空索引（因为还没有文档）。

将来，PHP 驱动程序还会缓存 ensureIndex() 是否已经在同一个请求中运行，基本上使其成为无操作：[https ://jira.mongodb.org/browse/PHP-581](https://jira.mongodb.org/browse/PHP-581)

# ruby-on-rails - rspec save_and_open_page 确实创建了一个 html 转储

> ID：13403148
> 
> 赞同：2
> 
> 时间：2012-11-15T17:40:26.483
> 
> 标签：ruby-on-rails, ruby, rspec, integration-testing

我正在尝试使用 save_and_open_page 查看 rspec 测试失败的详细信息：

**相关测试代码**

```
it { should have_selector('div.alert'); save_and_open_page} 
```

测试执行并失败，但现在生成输出

**相关的 Gemfile 片段：**

```
group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
  gem 'launchy'
end 
```

**Launchy 安装正常：**

```
$ bundle show launchy
//.rvm/gems/ruby-1.9.3-p286/gems/launchy-2.1.2 
```

**相关的 config/test.rb 片段**（我期待 save_and_open_page 输出到达这里）

```
Capybara.save_and_open_page_path = 'tmp/test_out' 
```

任何想法为什么输出不显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T18:14:01.223

`save_and_open_page`尝试在失败的测试之前放置：

```
it { save_and_open_page; should have_selector('div.alert') } 
```

否则，一旦运行`should have_selector('div.alert')`，它将不会继续运行，`save_and_open_page`因为测试已经失败。

# android - 唤醒时自定义锁定屏幕延迟

> ID：13403149
> 
> 赞同：1
> 
> 时间：2012-11-15T17:40:36.973
> 
> 标签：android, locking, screen, lockscreen

我正在尝试制作一个自定义锁屏应用程序，但我不确定我是否以正确的方式进行。我有一个广播接收器，它会在屏幕打开并开始我的锁定屏幕活动时进行监听。此接收器在服务中注册，该服务也禁用默认锁定屏幕。

问题是，在屏幕打开和锁定屏幕活动出现之间有一点延迟。我将如何去做，以便它立即出现？

我的服务代码：

```
@Override
public void onCreate() {
    super.onCreate();
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    BroadcastReceiver powerReceiver = new PowerReceiver();
    registerReceiver(powerReceiver, filter);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {  

    KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Service.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    lock.disableKeyguard();

    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    return null;
} 
```

和接收器：

```
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        Intent showScreen = new Intent(context, LockScreen.class);
        showScreen.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(showScreen);

    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:44:04.193

将您的应用程序变成主屏幕替换应用程序，当用户成功解锁自定义锁定屏幕时，您可以将他们带到默认的主屏幕应用程序。

[您可以在这个问题](https://stackoverflow.com/questions/8248213/use-my-own-android-app-apk-as-launcher-home-screen-replacement)和[这些](https://stackoverflow.com/search?q=android+home+screen+replacement&submit=search)问题中找到更多信息。

# .net - .NET 以下两行给出编译错误，为什么？

> ID：13403150
> 
> 赞同：4
> 
> 时间：2012-11-15T17:40:44.607
> 
> 标签：.net, vb.net

我在 VB.NET 中的 ASP.NET 中有以下 2 行（对于 C#，只需将世界 'Dim' 替换为 'var'），我从一个示例中得到。

```
 Dim tmpFile = Path.GetTempFileName()
 Dim tmpFileStream = File.OpenWrite(tmpFile) 
```

我收到一条错误消息`File.OpenWrite(tmpFile)`，上面写着“重载解析失败，因为没有可访问的'文件'接受这个数量的参数”。谁能解释为什么会发生这个错误？我尝试查看文档，但似乎无法弄清楚。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T17:47:23.707

请注意，错误消息是指定`File`而不是`OpenWrite`。看起来`File`上下文中还有另一个优先级高于`System.IO.File`. 这很可能是错误的根源。尝试在此处使用完全限定名称

```
Dim tmpFileStream = System.IO.File.OpenWrite(tmpFile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:45:46.217

将以下行添加到代码文件的顶部：

```
Imports System.IO 
```

此外，正如 Daniel 所建议的，通过使代码更清晰，指定您的类型可能会有所帮助，例如：

```
Dim tmpFile As String = Path.GetTempFileName()
Dim tmpFileStream As FileStream = File.OpenWrite(tmpFile) 
```

`String`在最新版本的 VB 中，它会自动为您推断类型，因此即使您没有指定，它也会使 tmpFile 成为类型变量。但是，在旧版本的 VB 中，它只会使其成为基本`Object`类型，在这种情况下，它将无法确定要使用哪个重载。

# iphone - 低连接性的最佳实践？

> ID：13403151
> 
> 赞同：0
> 
> 时间：2012-11-15T17:40:46.513
> 
> 标签：iphone, ios, networking, reachability

我最近一直在用应用程序在网络（Wi-fi、3G、LTE、离线）之间切换进行一些测试。在检测到此开关时，我一直在使用可达性，但我目前对应用程序进入“离线状态”时的实现不满意。

我现在基本上只是在无网络启动时抛出 NSLogs，但我已经看到它在开关之间关闭。所以我的问题......你如何最好地管理这些事情？在进入“离线状态”之前，您是否在无网络后延迟几秒钟？还是有其他方法可以改善这一点？

流式传输音频时的大问题.. 当只是一个简单的网络切换或小的连接丢失时，我不想进入这种离线状态。我要做的一件事是在更改状态之前等待缓冲区为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:47:02.500

是的，只需检查两次。使用您的示例，当您收到“离线”通知时，您会翻转一个标志（BOOL claimingOffline）。然后，当您的缓冲区清空时，您检查状态。如果重新联机，则取消翻转上述标志。如果仍处于离线状态，则翻转标志并进入“离线模式”。这种技术允许您等到您真正需要知道的那一刻（当缓冲区清空时）。否则你可以使用一个计时器，但它不是最理想的，也不是那么优雅......

# d3.js - 勾勒出一组具有相同属性的路径

> ID：13403154
> 
> 赞同：1
> 
> 时间：2012-11-15T17:40:52.283
> 
> 标签：d3.js

我正在使用 D3 创建多边形集，我希望能够勾勒出这些集。例如，如果您有一组路径元素，例如墨西哥、加拿大和美国的所有州，并且您希望在程序上围绕共享相同属性（例如它们的 ccode）的路径元素绘制边框有没有既定的方法可以做到这一点？

显然，我可以覆盖一条国家路径，但我想做的是能够根据不同的属性动态地绘制这些边界，我使用地理示例是因为我认为它是最容易理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:09:28.240

如果你可以打破你的路径，使每条路径恰好是两个区域之间的边界，那么你应该能够简单地遍历你的“边界列表”来确定何时绘制每一个：即绘制一个边界恰好有一个匹配您要突出显示的状态列表。有两个匹配的边界是内部的，没有匹配的边界不属于您感兴趣的区域。

# c++ - C++ for each in 自定义集合

> ID：13403155
> 
> 赞同：3
> 
> 时间：2012-11-15T17:40:59.837
> 
> 标签：c++, collections, foreach, loops

所以自从它被介绍以来，我一直喜欢`for each`in 关键字来迭代`STL collections`。（我非常非常喜欢语法糖）。

我的问题是如何编写可以使用这些关键字进行迭代的自定义集合？

本质上，我需要为我的集合公开哪些 API 才能使用这些关键字进行迭代？

如果这听起来很生硬，我深表歉意，但请不要用“使用 boost”、“不要编写自己的集合”等来回应。求知啊朋友们。如果不可能，嘿，我可以处理。

我也非常希望不必将 STL 迭代器注入我的集合中。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T17:47:43.607

这是对可迭代数据结构（[基于范围的循环](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)）的一个很好的解释：

为了使数据结构可迭代，它必须与现有的 STL 迭代器类似地工作。

1.  必须有`begin`和`end`方法对该结构进行操作，无论是作为成员还是作为独立函数，并且将迭代器返回到结构的开头和结尾。
2.  迭代器本身必须支持一个`operator*`方法、一个`operator !=`方法和一个`operator++`方法，无论是作为成员还是作为独立函数。

请注意，在`C++11`不使用 的情况下集成了对基于范围的循环的支持`STL`，尽管上述条件也适用于此。您可以在上面的同一链接中阅读它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T17:47:36.447

从您的问题中并不清楚您是在谈论`std::for_each`在标头中定义`<algorithm>`，还是在 C++11 中引入的基于范围的 for 循环。

但是，两者的答案是相似的。

两者都对迭代器进行操作，而不是对集合本身进行操作。

所以你需要

1.  定义一个满足 STL（实际上是 C++ 标准）对其提出的要求的迭代器类型。（主要是它必须定义`operator++`and `operator*`，以及其他一些操作和 typedef）

2.  因为`std::for_each`，没有 2。你完成了。您只需将两个这样的迭代器传递给`std::for_each`. 对于基于范围的 for 循环，您需要通过`begin()`and`end()` 函数公开一对这样的迭代器。

而且……就是这样。

唯一棘手的部分是真正创建一个符合要求的迭代器。Boost（即使你说你不想使用它）有一个库可以帮助实现自定义迭代器（Boost.Iterator）。还有一个`std::iterator`类旨在作为自定义迭代器实现的基类。但这些都不是*必需*的。两者都只是方便工具，可以更轻松地创建自己的迭代器。

# asp.net-mvc-3 - User logged in as wrong user

> ID：13403160
> 
> 赞同：1
> 
> 时间：2012-11-15T17:41:12.650
> 
> 标签：asp.net-mvc-3, entity-framework, autofac, form-authentication

I am using MVC3 along with Autofac & EF4.1 to build an secure web app deployed on two servers.

A very few users are experiencing a strange issue where user is logged into system as wrong user with different account/branch settings.

I am authentication user using form authentication(.ASPXAUTH cookie) and roles are decided from active directory contents. user being logged in is assigned an unique token which flows during all transaction.

Could this be related to Autofac or authentication cookie is cached somewhere?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:44:56.633

Are you users using shared computers?

If so, then I suspect that the cookie is to blame.

If not, then context information somewhere else in the application is to blame.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:33:54.107

it was actually a static image file having set-cookie inside which was causing the trouble.

# jquery - jQuery UI 日期选择器错误地显示所选值

> ID：13403161
> 
> 赞同：1
> 
> 时间：2012-11-15T17:41:13.610
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有以下代码将 jQuery UI 日期选择器小部件附加到输入字段：

```
 console.log($("#profileDialog .date-picker").val());
    $("#profileDialog .date-picker").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'yy-mm-dd',
        yearRange: "-115:-2",
        defaultDate: $("#profileDialog .date-picker").val()
    }); 
```

控制台日志正确输出值（例如：）`11/1/1955 12:00:00 AM`，但是当我在输入字段内单击时，日期选择器会向我显示一个选定的日期`April 17 1897`。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:04:44.787

您看到`1897`年份的原因是因为您设置了`dateFormat`as `yy-mm-dd`，当默认日期采用 format`dd-mm-yy`时，它不是有效日期（采用给定格式）。

[这是一个小提琴](http://jsfiddle.net/NZtVW/3/)

# linux - 是否可以在 sed 中使用匹配的字符串作为 shell date 命令的输入？

> ID：13403163
> 
> 赞同：0
> 
> 时间：2012-11-15T17:41:21.770
> 
> 标签：linux, shell, unix, date, sed

我有一个文件，其中包含包含 GMT 偏移量的时间戳字段的记录。我想使用该`sed`命令将记录上的值替换为常规时间戳（没有 GMT 偏移量）。

例如：

```
`$date -d '2012/11/01 00:50:22 -0800' '+%Y-%m-%d %H:%M:%S'` 
```

返回这个值，这是我想要做的：

```
2012-11-01 01:50:22 
```

除了我想在该文件的每一行上执行该操作并将 date 命令应用于时间戳值。这是一个示例记录：

```
"SB","6GV96644X48128125","","","","T0006",2012/10/03 13:08:43 -0700,"NJ" 
```

这是我的代码：

```
head -1 myfile | sed 's/,[0-9: /\-]\{25\},/,'"`date -d \1 '+%Y-%m-%d %H:%M:%S'`"',/ 
```

这不起作用：它只是忽略 \1 并将匹配的模式替换为今天的日期：

```
"SB","6GV96644X48128125","","","","T0006",2012-11-14 01:00:00,"NJ" 
```

我希望这`\1`会导致匹配的模式被传递给日期函数并返回一个常规时间戳值（如我上面提供的示例所示，日期函数如何应用 GMT 偏移量并返回一个常规时间戳字符串）并替换旧的记录中的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:02:51.927

我会`awk`改用。例如：

```
awk '{cmd="date -d \""$7"\" \"+%Y-%m-%d %H:%M:%S\"";
    cmd | getline k; $7=k; print}' FS=, OFS=, myFile 
```

这将用对第 7 个字段的原始内容运行 date 命令的结果替换第 7 个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:00:49.247

在`sed`：

```
head -1 datefile |
  sed '
    # handle % in input correctly
    s/%/%%/g
    # execute date(1) command
    s/\(.*,\)\([0-9: /\-]\{25\}\)\(,.*\)/'"date -d '\2' '+\1%Y-%m-%d %H:%M:%S\3'"'/e'
  ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:50:19.340

这可能对您有用（GNU sed）：

```
sed -r 's/^(([^,]*,){6})([^,]*)(.*)/printf "%s%s%s" '\''\1'\'' $(date -d '\''\3'\'' '\''+%Y-%m-%d %H:%M:%S'\'') '\''\4'\''/e;q' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T13:25:50.467

采用

```
head -1 datefile | sed -e 's?\(..\)/\(..\)/\(.... ..:..:..\)?'"date -d '\2/\1/\3' '+%s'"'?e' 
```

# java - 如何使用 javax.xml.xpath 对 XML 文件运行 XQuery？

> ID：13403170
> 
> 赞同：1
> 
> 时间：2012-11-15T17:41:58.227
> 
> 标签：java, xpath, xquery

如何使用 javax.xml.xpath 对 XML 文件执行以下 XQuery？

```
for $com in //RepoStatistics/Commits/Commit
  return 
    for $file in $com//File
      return element tuple {
        element path {
          string($file/Path)
        },
        element action {
          string($file/@action)
        },
        element date {
          string($com/@date)
        },
        element developer {
          string($com/@author)
        },
        element locAdd{
          if (not(empty($file/LocAdd)))
            then string($file/LocAdd)
            else 0
        },
        element locRem{
          if (not(empty($file/LocRem)))
            then string($file/LocRem)
            else 0
        }
      } 
```

如果这个问题很愚蠢，请原谅，但我是一个非常初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:29:30.500

我认为 Oracle JRE 不支持 XQuery，因此您需要安装像 Saxon 9 这样的第三方库才能使用 Java 执行 XQuery。[然后您就有了http://www.saxonica.com/documentation/using-xquery/api-query.xml](http://www.saxonica.com/documentation/using-xquery/api-query.xml)中列出的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:47:45.360

XPath 是 XQuery 的一个子集。JDK 带有一个内置的 XPath 实现，可以通过 javax.xml.path API 使用（同样的 API 也可以用于其他 XPath 实现，例如 Saxon 和 Jaxen）。JDK 没有提供 XQuery 引擎，但第三方提供了一些引擎；W3C XQuery 页面上有一些产品列表，但最容易试用的是 Saxon。有一个用于从 Java 访问 XQuery 的“标准”API，称为 XQJ（包 javax.xml.xquery），Saxon 和大多数其他基于 Java 的 XQuery 实现都支持该 API。

（Saxon 还有另一个称为 s9api 的接口，其设计部分是为了绕过 XQJ 的限制，部分是为了提供一个单一的集成 API，以连贯的方式处理 XSLT、XPath、XQuery 和 XML Schema，允许您构建使用所有这些技术结合在一起。）

# c# - WPF 用户控件项未显示

> ID：13403172
> 
> 赞同：1
> 
> 时间：2012-11-15T17:42:13.463
> 
> 标签：c#, wpf, binding

我有一个内置于 wpf 的条形图。用户指定栏内的项目。

条形图.xaml.cs

```
public partial class BarChart : UserControl
{
    List<BarItem> BarItems = new List<BarItem>();
    List<Bar> Bars = new List<Bar>();
    public List<BarItem> Items
    {
        get { return BarItems; }
        set
        {
            BarItems = value;
            Bars.Clear();
            int i=0;
            this.LayoutRoot.Children.Clear();
            //This line should show up but doesn't suggesting that that the property is not being set?
            Debug.WriteLine("SET");
            foreach(BarItem Item in BarItems){
                Bar ThisBar=new Bar();
                ThisBar.CurrentLable=Item.Lable;
                ThisBar.CurrentValue=Item.Value;
                Debug.WriteLine("{0}:{1} at {2}",Item.Lable,Item.Value,(i*55));
                ThisBar.CurrentX=i*55;
                this.AddChild(ThisBar);
                i++;
            }
            Debug.WriteLine(i);
        }
    }
    public BarChart()
    {
        this.InitializeComponent();
    }
} 
```

条形图.xaml

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:CipherCracker"
mc:Ignorable="d"
x:Class="CipherCracker.BarChart"
x:Name="BarChartList"
d:DesignWidth="640" d:DesignHeight="480">

<Grid x:Name="LayoutRoot"/>
</UserControl> 
```

BarItem.cs

```
public class BarItem
{
    public int Value
    {
        get;
        set;
    }
    public string Lable
    {
        get;
        set;
    }
    public BarItem()
    {

    }

} 
```

添加一个新的条形图你运行

```
<local:BarChart>
    <local:BarChart.Items>
        <local:BarItem Lable="B" Value="75"/>
        <local:BarItem Lable="A" Value="50"/>
    </local:BarChart.Items>
</local:BarChart> 
```

然而，根据输出没有添加任何项目。我做错了什么，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:28:12.470

您的问题是实际上从未调用过属性设置器。

以您在 XAML 中的方式添加 BarItem 对象，会将项目添加到现有列表实例中。仅当您将列表设置为新实例时才会调用属性设置器。

所以我会在代码隐藏中创建一个新列表，并在那里设置属性。这样做将调用 setter，您的代码将运行。您可能需要为 BarChart 命名，以便您可以引用它。

**XAML**

```
<local:BarChart x:Name="bar">
    <!-- Doing this adds BarItems to the existing list. 
    <local:BarChart.Items>
        <local:BarItem Lable="B" Value="75"/>
        <local:BarItem Lable="A" Value="50"/>
    </local:BarChart.Items>
    -->
</local:BarChart> 
```

**代码隐藏**

```
public MainWindow()
{
    InitializeComponent();

    //Setting the Items property to a new list, will call the setter..
    bar.Items = new List<BarItem>
    {
        new BarItem { Lable = "Test1", Value = 500 }, 
        new BarItem { Lable = "Test2", Value = 1000 },
        new BarItem { Lable = "Test3", Value = 1500 }
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:08:11.897

另外我认为您可以使用 an`ObservableCollection<BarItem>`然后注册到事件`CollectionChanged`以控制插入和删除。

但我认为这样做的正确方法是使用`DependencyProperty`of `ICollection`，那么如果集合实现了`ICollectionChanged`接口，您可以控制插入和删除以更新视图。如果您可能想要绑定到这个集合，这应该非常有用。

希望这对你有帮助，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:00:23.740

我会用绑定来做到这一点。代码隐藏将只是持有一个属性：

```
public partial class BarChart : UserControl
{
    private List<BarItem> _items;
    public List<BarItem> Items
    {
        get { return _items ?? (_items = new List<BarItem>()); }
        set { _items = value; }
    }

    public BarChart()
    {
        InitializeComponent();
    }
} 
```

而 UI 将完成其余的工作：

```
<ItemsControl ItemsSource="{Binding Items, ElementName=BarChartList}">

    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <local:Bar CurrentLable={Binding Lable} CurrentValue={Binding Value}/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>

</ItemsControl> 
```

用户界面发生了哪些变化：

*   `ItemsControl`与 不同`Grid`，具有有用的`ItemsSource`属性，这使事情变得更容易；
*   `StackPanel`与 不同`Grid`，无需通过堆叠手动放置物品。`local:Bar Margin`如果要在项目之间留出间隙，可以设置为常数值。

# c++ - 如何在 OnInitDialog 函数中最小化 MFC 应用程序？

> ID：13403181
> 
> 赞同：1
> 
> 时间：2012-11-15T17:42:39.770
> 
> 标签：c++, visual-studio-2010, mfc

我需要我的 MFC 应用程序在启动时最小化。我对 MFC 没有太多经验。

到目前为止，我已经尝试过：删除`WS_VISIBLE`、调用`ShowWindow(SW_HIDE)`和使用`OnSize(...)`。每个都无法工作和/或导致应用程序崩溃。

我的下一个想法是使用该`PostMessage`函数，但我不确定参数是什么。

有人可以告诉我使用 PostMessage 函数最小化我的应用程序的参数，或者给我另一个选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:06:15.423

发布[`WM_SYSCOMMAND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx)带有`SC_MINIMIZE`参数的消息。

```
PostMessage(WM_SYSCOMMAND, SC_MINIMIZE, 0); 
```

# c++ - 在 c++ 中正确地过载电源？

> ID：13403182
> 
> 赞同：3
> 
> 时间：2012-11-15T17:42:42.183
> 
> 标签：c++, operators, operator-overloading, xor

在 c++ 中，我实现了一个`integer`类，并重载`operator ^`为幂函数。

```
integer integer::operator^ (const integer& rhs){
       return integer(pow(this->.i, rhs.i));
} 
```

这适用于两个操作数。

```
integer i1, i2, i3 ;   
 i4 = i1 ^ i2 ^ i3; 
```

的值在`i4`数学上是错误的，因为关联性需要从右到左。我怎么解决这个问题？如何更改关联性？

**我得到了合理的答案，我了解到：**

```
-We can't change  associativity or priority of an operator.   
-Good is Not to overload operators to do something conceptually different to 
 the built-in versions  
-Even compiler can't support; it hard to implement! 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T17:45:37.360

您不能通过重载来更改 C++ 中运算符的关联性或优先级。这些规则是硬连线到语言语法中的。

C++ 标准说（§13.5.6，强调我的）：

> 操作符函数要么是非静态成员函数，要么是非成员函数，并且至少有一个类型为类、类引用、枚举或枚举引用的参数。**不能更改运算符的优先级、分组或操作数的数量。** 为每种类型预定义的运算符 =、（一元）& 和 ,（逗号）的含义可以更改 [...]

运算符不仅是`^`左结合的，而且[它的优先级也很低](http://en.cppreference.com/w/cpp/language/operator_precedence)。幂运算符的正确优先级应该高于乘法（因此此表中的优先级为 4 或更高），但它的优先级为 10——这意味着即使是加法和减法也会在它之前进行计算。`1 + 2 ^ 3 * 4`将被解析为`(1 + 2) ^ (3 * 4)`，而数学上正确的幂运算符应解析为`1 + (2 ^ 3) * 4`.

如果可以修改运算符的关联性或优先级，则会出现巨大的语法混乱。我的拙见是，您不应该尝试重载`^`运算符以将其用作电源运算符。我宁愿`power`在课堂上做一个方法。

# msmq - NServicebus 在负载平衡环境中向 msmq 集群队列发送消息时失败

> ID：13403192
> 
> 赞同：4
> 
> 时间：2012-11-15T17:43:43.063
> 
> 标签：msmq, nservicebus

我们在使用 NServiceBus 的负载平衡、高容量环境中遇到 MSMQ 问题。

我们的环境如下所示： 1 F5 通过循环将 Web 流量分发到 6 个应用程序服务器。这 6 台服务器中的每台都使用位于集群上的远程计算机上的 Bus.Send to 1 队列。

正常使用期间的事件吞吐量约为每台服务器每秒 5-10 个。所以整个环境中每秒有 30-60 个事件，具体取决于负载。

我们看到的问题是 1 个应用程序框能够将消息发送到集群队列，但其他 5 个不能。查看遇到故障的 5 个盒子，集群的传出队列处于非活动状态。

事务死信队列中也有大量事件。当我们清除该队列时，传出队列连接到集群，但是，消息在传出队列中增长为未确认。这会继续增长，直到它们再次进入事务死信队列，并且传出队列将状态更改为非活动状态。

有趣的是，当我们执行此清除操作时，另一个盒子将成为“好盒子”。所以我们很确定问题不是一个坏盒子，而是一次只有一个盒子可以可靠地保持与集群队列的连接。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T22:04:00.017

我们有，这是因为这里描述的问题：http: [//blogs.msdn.com/b/johnbreakwell/archive/2007/02/06/msmq-prefers-to-be-unique.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2007/02/06/msmq-prefers-to-be-unique.aspx)

**短版：**安装 MSMQ 时，每个 MSMQ 安装都有一个唯一的 ID。它被称为 QMId，位于注册表中

> HKLM\Software\Microsoft\MSMQ\Parameters\Machine Cache\QMid

它在发送到远程接收器时用作标识符，而远程接收器又使用它将 ACK 发送回正确的发送器。接收器（在您的情况下为集群）维护一个将 QMId 映射到 IP 的缓存。我们的问题是我们的几个工人有相同的 QMId。这意味着集群将来自所有机器的所有消息的所有 ACK 发送到发送消息的第一台机器。在某些时候，对于某些操作，如 MSMQ Windows 服务重启，缓存过期并且另一台机器神奇地“工作”。

因此，请检查您的 6 台服务器并确保它们都没有相同的 QMid。我们的值相同，因为它们都是从安装 MSMQ 后拍摄的 Windows 映像中复制出来的。

修复很简单，只需在每台机器上重新安装 MSMQ 功能以生成新的唯一 QMId。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T04:48:52.217

如果您的机器是从同一个映像创建的，那么您可能有非唯一的 MachineCache ID。您可以通过在每台计算机上运行以下 powershell 脚本来解决此问题。

这可以在创建映像之前完成，也可以在启动后在每台机器上完成。

```
Remove-ItemProperty -Path 'Registry::HKEY_LOCAL_MACHINE\Software\Microsoft\MSMQ\Parameters\MachineCache' -name 'QMId'
Set-ItemProperty -Path  'Registry::HKLM\Software\Microsoft\MSMQ\Parameters' -Name SysPrep -Value 1

Restart-Service -Name 'MSMQ' 
```

# user-roles - 确定给定期间的所有 peoplesoft 角色授予/撤销

> ID：13403202
> 
> 赞同：0
> 
> 时间：2012-11-15T17:44:31.450
> 
> 标签：user-roles, peoplesoft

我的公司正在运行 peoplesoft 8.49，我正在寻找一种方法来确定哪些用户在过去一年内获得了新角色或角色被删除。

我可以清楚地看到哪些用户在 PSROLEUSER 表中具有哪些角色，但这些记录上没有修改日期。我们也没有启用行级审计。

我正在寻找有关如何在给定时期内获得角色授予/撤销的完整人口的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:16:19.303

不，除非您创建一个可以维护此类信息的流程，否则您无法获得该信息。看看[这个链接](http://peoplesoft.wikidot.com/auditing-user-profiles)，很好地解释了如何根据您的要求开发审计流程。

# iphone - addSubview 在另一个 UIView 下

> ID：13403203
> 
> 赞同：10
> 
> 时间：2012-11-15T17:44:35.990
> 
> 标签：iphone, objective-c, uiview, addsubview

我希望能够在另一个已经存在的 UIView 下添加Subview，我该怎么做？我无法找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-15T17:48:54.977

UIView 方法怎么样：`insertSubview:belowSubview:`.
它就在 UIView 文档的[“管理视图层次结构”](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#jumpTo_93)部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T17:50:15.287

您可以使用 ：

```
[self.view insertSubview:topview belowSubview:buttomView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-10T17:37:37.070

在斯威夫特：

```
self.view.insertSubview(newView, belowSubview: yourLabel) 
```

# visual-studio - Visual Studio 和 cmd.exe 如何以及为何以不同方式处理批处理文件

> ID：13403207
> 
> 赞同：0
> 
> 时间：2012-11-15T17:44:52.930
> 
> 标签：visual-studio, batch-file, cmd, pre-build-event

以下是应该在 VS 中作为预构建事件运行的程序。它可以直接从命令行工作，但不能在 VS 中工作。

```
@echo off
:: Direct From cmd.exe
:: "G:Google Drive\GitHub\toolset\Site\pre-build.bat" Release "G:Google Drive\GitHub\toolset\Site\Web"
:: From Visual Studio Pre-Build Event
:: "$(SolutionDir)pre-build.bat" $(ConfigurationName) "$(ProjectDir)"

if %1==Release (

    if exist %2 (
        set location=%2
        set dotlessVersion=v1.3.1.0

        :: Compress Less Files
        for /r %location% %%a in (*.less) do (
            "%~dp0..\SharedLibs\dotless\%dotlessVersion%\dotless.Compiler.exe" -m -r "%%a" "%%~da%%~pa%%~na.min.css"
        )

        :: Minify js Files
        for /r %location% %%a in (*.closure.js) do (
            set newFilename=%%a
            call java -jar "%~dp0..\SharedLibs\Closure Compiler\compiler.jar" --js "%%a" --js_output_file "%%newFilename:.closure.js=.min.js%%"
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:30:21.013

它与 Visual Studio 无关，它是标准的批处理初学者错误。
如您所料，括号中的百分比扩展不起作用。
它在解析完整块时展开，在执行任何行之前。

所以`%location%`被扩展为空，它进入块之前的值。
在 cmd 行它的工作方式相同，但是如果你启动批处理两次，它似乎工作，但你只看到正确的值，因为它仍然设置。

如何解决？
不要使用它（百分比扩展），而是使用延迟扩展！

```
setlocal EnableDelayedExpansion
if %1==Release (

    if exist %2 (
        set location=%2
        echo !location!
        .... 
```

# vb.net - 当您删除枚举中的项目时，ReSharper 会发现吗？

> ID：13403212
> 
> 赞同：0
> 
> 时间：2012-11-15T17:45:11.210
> 
> 标签：vb.net, resharper

我敢肯定，我们都曾编写过这样的代码：

```
For Each datVehicle In datVehicles
  If datVehicle.ID = -1 Then
    datVehicles.Remove(datVehicle)
  End If
Next 
```

哪个编译得很好，但会引发运行时异常，因为您无法删除枚举中的项目。ReSharper 能捕捉到这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:48:06.297

我认为它不会自动发生，但您可以轻松创建自定义模式来为您识别它。请参阅：[https ://blog.jetbrains.com/dotnet/2010/08/19/highlighting-custom-patterns-with-resharper/](https://blog.jetbrains.com/dotnet/2010/08/19/highlighting-custom-patterns-with-resharper/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:33:11.747

没有任何版本的 ReSharper 可以解决这个问题。创建可以警告这种情况的自定义模式并不容易，因为您的迭代代码可能非常复杂。

如果您想创建自定义模式，我建议您提出建议（可能是警告）。你的模式看起来像这样：

```
$ICOLLECTION$.Remove($arg$) 
```

其中 $ICOLLECTION$ 是 System.Collections.Generic.ICollection 类型的表达式，$arg$ 是参数占位符。

这样，您将始终有建议（或警告）。

我知道这个问题仅与 ReSharper 有关，但我想展示解决方法来完成我的答案。此问题的解决方法是使用 RemoveAll。这是 C# 中的示例：

```
datVehicles.RemoveAll(x => x.Id == -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:57:33.757

VS 2010 上的 Resharper 6.1 并没有开箱即用。Resharper 认为它不是 Skeet 代码，因为它建议转换为 linq。

# git - `git远程更新的行为是什么 `当`远程。 .tagopt` 没有设置？

> ID：13403224
> 
> 赞同：1
> 
> 时间：2012-11-15T17:46:17.623
> 
> 标签：git, git-remote, git-fetch, git-tag

[`git remote`手册页](http://www.kernel.org/pub/software/scm/git/docs/git-remote.html)解释了什么`--tags`和做什么，但如果两者都没有指定，`--no-tags`则不是默认行为。那是什么行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:11:40.887

在查看更多[`git fetch`](http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html),[`git config`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)和[`git tag`](http://www.kernel.org/pub/software/scm/git/docs/git-tag.html)手册之后，我相信`remote.<name>.tagopt`config 选项只是传递给`git fetch`by `git remote`。因此 的默认行为`git remote`与`git fetch`的默认行为相同：

> 当 <refspec> 将获取的结果存储在远程跟踪分支中时，指向这些分支的标记会自动跟随。这是通过首先使用给定的 <refspec> 从远程获取来完成的，如果存储库有远程标记指向的对象但它还没有，那么获取那些丢失的标记。如果另一端有指向您不感兴趣的分支的标签，您将不会得到它们。

从[`git fetch`手册](http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)

# java - java - 如何检查数组a是否是java中数组b的一部分？

> ID：13403225
> 
> 赞同：0
> 
> 时间：2012-11-15T17:46:24.910
> 
> 标签：java

> **可能重复：**
> [检查一个数组是否是另一个数组的子集](https://stackoverflow.com/questions/808394/check-whether-an-array-is-a-subset-of-another)

我有数组`a = { 1,4,3,5,1,2,3,6 }`和数组`b= { 1,2,3 }`。

如何检查数组`b`元素是否出现在数组中的任何位置`a`？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:48:40.733

最简单的方法显然是使用内置函数。但是，Java 只有内置函数来为`Collection`类型执行此操作。如果数组不是原始类型，您可以这样做：

```
if (Arrays.asList(a).containsAll(Arrays.asList(b))) {
   //...
} 
```

如果它是原始数组（`int[]`等），这仍然是最简单的方法，您只需手动将数组转换为列表或使用第三方库。 [番石榴具有](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Ints.html#asList%28int...%29)以下功能：

```
if ( Ints.asList(a).containsAll(Ints.asList(b)) ) {
   //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:51:08.220

使用[Apache Commons 语言](http://commons.apache.org/lang)：

```
for (Object element:b) {
    if (ArrayUtils.contains(a,element) == false) return false;
}
return true; 
```

# android - 禁用警报对话框按钮？

> ID：13403227
> 
> 赞同：0
> 
> 时间：2012-11-15T17:46:30.567
> 
> 标签：android, android-layout

嗨，我有以下 2 个功能，想知道是否可以根据布尔值是真还是假（如果用户在 EditText 中输入文本）来阻止下面的“Positivebutton”？

```
 private void add() {
            final View addView = getLayoutInflater().inflate(R.layout.add, null);
            new AlertDialog.Builder(this).setTitle("Add a Book").setView(addView)
                    .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            if(addWord((EditText) addView.findViewById(R.id.titleEdit))){
   //Do something, Enable the OK (Positive) button
}
else{
   Toast.makeText(ActionBarMain.this,"Nothing entered", Toast.LENGTH_LONG).show();
//Prevent the user to be able to push the "PositiveButton" (Block it)
}

                        }
                    }).setNegativeButton("Cancel", null).show();
        }

        private boolean addWord(EditText title){
            String mDisplaySting = title.getText().toString();
            if(mDisplaySting.matches("")){
                Log.i(TAG,"null");
                return false;       
            }
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:53:10.193

您可以按如下方式禁用：

```
public void onClick(DialogInterface dialog, int whichButton) {
   if(addWord((EditText) addView.findViewById(R.id.titleEdit))){
      // Do something, Enable the OK (Positive) button
   } else {
      Toast.makeText(ActionBarMain.this, "Nothing entered",
          Toast.LENGTH_LONG).show();
      //Prevent the user to be able to push the "PositiveButton" (Block it)
      AlertDialog myDialog = (AlertDialog)dialog;
      Button button = myDialog.getButton(whichButton);
      button.setOnClickListener(null);
   }
} 
```

您现在还可以尝试其他阻止按钮的方法，因为您可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:00:35.057

```
AlertDialog mAlertDialog = new AlertDialog.Builder(this)
                               .setTitle("Add a Book").setView(addView)
                               .setNegativeButton("Cancel", null);

if(!edittext.getText().toString().equals("")){
    mAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        [...]
                    }
                 });
}

mAlertDialog.show(); 
```

像这样的东西。没测试。

# sql-server-2008 - 在 SQL Server 中对具有计数和分组的列求和

> ID：13403229
> 
> 赞同：0
> 
> 时间：2012-11-15T17:46:51.580
> 
> 标签：sql-server-2008, tsql

我不太确定如何解决这个问题，但基本上我的查询工作正常。我所做的是单独计算 6 列作为调查问题的结果。然后我把它们加起来。现在我必须做 3 组计数，因为每个结果都有效，红色、琥珀色和绿色，并且用户只想要一行。也就是红色、琥珀色和绿色的总数。但是，用户现在希望获得返回相同信息但针对每个站点的结果。

那么，有没有一种简单的方法可以让我获得每个列或问卷类别的计数，将它们相加，以便我得到红色、琥珀色和绿色的总数，然后按每个站点的这个分组？SQL 在下面，但它适用于一个站点。

```
 Select production_site, SUM(Green.[Bagging]+Green.[Measurable]+
   Green.[Appearance]+Green.[Aroma]+Green.[Flavour]+Green.[Texture]) as Target,
   SUM(Amber.[Bagging]+Amber.[Measurable]+Amber.[Appearance]+Amber.[Aroma]+
   Amber.[Flavour]+Amber.[Texture]) as Action, SUM(Red.[Bagging]+Red.[Measurable]+
   Red.[Appearance]+Red.[Aroma]+Red.[Flavour]+Red.[Texture]) as Fail
   FROM (SELECT (SELECT COUNT(Grocery_Packaging_And_Coding)
             FROM t_Pqe_Grocery
             WHERE Grocery_Packaging_And_Coding = 'Target'
             AND Production_Site = 'Bradford'
             ) As Bagging,
             (SELECT COUNT(Grocery_Measurable)
              FROM t_Pqe_Grocery
              WHERE Grocery_Measurable = 'Target'
              AND Production_Site = 'Bradford'
              ) As Measurable,
             (SELECT COUNT(Grocery_Appearance)
              FROM t_Pqe_Grocery
              WHERE Grocery_Appearance = 'Target'
              AND Production_Site = 'Bradford'
              ) As Appearance,
             (SELECT COUNT(Grocery_Aroma)
              FROM t_Pqe_Grocery
              WHERE Grocery_Aroma = 'Target'
              AND Production_Site = 'Bradford'
              ) As Aroma,
             (SELECT COUNT(Grocery_Flavour)
              FROM t_Pqe_Grocery
              WHERE Grocery_Flavour = 'Target'
             AND Production_Site = 'Bradford'
             ) As Flavour,
            (SELECT COUNT(Grocery_Texture)
             FROM t_Pqe_Grocery
             WHERE Grocery_Texture = 'Target'
            AND Production_Site = 'Bradford'
            ) As Texture) AS Green,
    (SELECT (SELECT COUNT(Grocery_Packaging_And_Coding)
             FROM t_Pqe_Grocery
             WHERE Grocery_Packaging_And_Coding = 'Action'
             AND Production_Site = 'Bradford'
             ) As Bagging,
            (SELECT COUNT(Grocery_Measurable)
             FROM t_Pqe_Grocery
             WHERE Grocery_Measurable = 'Action'
             AND Production_Site = 'Bradford'
             ) As Measurable,
            (SELECT COUNT(Grocery_Appearance)
             FROM t_Pqe_Grocery
             WHERE Grocery_Appearance = 'Action'
             AND Production_Site = 'Bradford'
            ) As Appearance,
           (SELECT COUNT(Grocery_Aroma)
            FROM t_Pqe_Grocery
            WHERE Grocery_Aroma = 'Action'
            AND Production_Site = 'Bradford'
            ) As Aroma,
           (SELECT COUNT(Grocery_Flavour)
            FROM t_Pqe_Grocery
            WHERE Grocery_Flavour = 'Action'
            AND Production_Site = 'Bradford'
           ) As Flavour,
           (SELECT COUNT(Grocery_Texture)
            FROM t_Pqe_Grocery
            WHERE Grocery_Texture = 'Action'
            AND Production_Site = 'Bradford'
           ) As Texture) AS Amber,
    (SELECT (SELECT COUNT(Grocery_Packaging_And_Coding)
           FROM t_Pqe_Grocery
           WHERE Grocery_Packaging_And_Coding = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Bagging,
          (SELECT COUNT(Grocery_Measurable)
           FROM t_Pqe_Grocery
           WHERE Grocery_Measurable = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Measurable,
          (SELECT COUNT(Grocery_Appearance)
           FROM t_Pqe_Grocery
           WHERE Grocery_Appearance = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Appearance,
          (SELECT COUNT(Grocery_Aroma)
           FROM t_Pqe_Grocery
           WHERE Grocery_Aroma = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Aroma,
          (SELECT COUNT(Grocery_Flavour)
           FROM t_Pqe_Grocery
           WHERE Grocery_Flavour = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Flavour,
          (SELECT COUNT(Grocery_Texture)
           FROM t_Pqe_Grocery
           WHERE Grocery_Texture = 'Fail'
           AND Production_Site = 'Bradford'
          ) As Texture) AS Red,
    t_Pqe_Grocery
    Where Production_Site = 'Bradford'
    Group By production_site 
```

# c# - 处理具有收益返回的可枚举对象的正确模式是什么？

> ID：13403232
> 
> 赞同：5
> 
> 时间：2012-11-15T17:47:19.323
> 
> 标签：c#, ienumerable, design-patterns, yield-return

是否存在用于返回 Enumerable 中所有项目的标准模式？

我经常发现我的一些代码反映了以下模式：

```
 public IEnumerable<object> YieldReturningFunction()
    {

        ...
        [logic and various standard yield return]
        ...

        foreach(object obj in methodReturningEnumerable(x,y,z))
        {
            yield return obj;
        }

    } 
```

明确使用 foreach 循环只是为了向我返回可枚举的代码气味的结果。

显然，我可以通过显式构建一个 Enumerable 并将每个标准 yield return 的结果添加到它以及添加*methodReturningEnumerable*的结果范围来放弃使用 yield return 来增加我的代码的复杂性。这将是不幸的，因此我希望存在一种更好的方法来管理收益率回报模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:59:36.557

不，没有办法解决这个问题。

这是一个已被请求的功能，这不是一个坏主意（`yield foreach`其他语言中存在一个或等效项）。

在这一点上，微软根本没有分配时间和金钱来实施它。他们将来可能会或可能不会实施它；我猜（没有事实依据）它在待办事项清单上的某个地方；这只是一个问题，即它是否/何时在该列表中变得足够高以实际实施。

我能看到的唯一可能的变化是将`yield returns`方法顶部的所有个体重构为他们自己的可枚举返回方法，然后添加一个新方法，该方法返回该方法和`methodReturningEnumerable(x,y,z)`. 会不会更好；不，可能不是。`Concat`如果不是更多的话，它会像你节省的一样多回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:09:42.043

做不到。不过还不错。您可以将其缩短为一行：

```
foreach (var o in otherEnumerator) yield return o; 
```

不相关的注释：你应该小心你的生成器中包含的逻辑；所有执行都被推迟到`GetEnumerator()`返回的`IEnumerable`. 我发现自己经常以这种方式错误地投掷`NullArgumentException`s，以至于我认为值得一提。:)

# php - 用 COM 和 Word 删除系统 tmp 文件

> ID：13403239
> 
> 赞同：1
> 
> 时间：2012-11-15T17:47:49.367
> 
> 标签：php, com, ms-word, temp

我正在使用 COM 将动态创建的 word docx 转换为 PDF。一切都运行良好，但是我们的 c:\windows\temp\ 目录变得非常大（并且我们的 C 驱动器上的磁盘空间有限）。下面是我用来生成 PDF 的代码。有没有办法在文件关闭后删除添加到系统临时目录的临时文件？另外，word doc转换成pdf后，我们就不再需要它了（所以删除tmp文件是否会损坏word doc也没关系）。

```
 /Word Doc to PDF using Com
ini_set("com.allow_dcom","true");

try{
    $word = new com('word.application');
}
catch (com_exception $e)
{
    $nl = "<br />";
    echo $e->getMessage() . $nl;
    echo $e->getCode() . $nl;
    echo $e->getTraceAsString();
    echo $e->getFile() . " LINE: " . $e->getLine();
    $word->Quit();
    $word = null;
    die;

}

$word->Visible = 0; //don't open word gui on server
$word->DisplayAlerts = 0; //don't allow any alerts to open 
//open doc
try{
    $doc = $word->Documents->Open(DOC_LOCATION . "temp_doc/" .  $filename . ".docx");
}
catch (com_exception $e)
{
    $nl = "<br />";
    echo $e->getMessage() . $nl;
    echo $e->getCode() . $nl;
    echo $e->getFile() . " LINE: " . $e->getLine();
    $word->Quit();
    $word = null;
    die;
}
try{
    $doc->ExportAsFixedFormat(DOC_LOCATION . "temp_pdf/" . $filename . ".pdf", 17, false, 0, 0, 0, 0, 7, true, true, 2, true, true, false);

}
catch (com_exception $e)
{
    $nl = "<br />";
    echo $e->getMessage() . $nl;
    echo $e->getCode() . $nl;
    echo $e->getTraceAsString();
    echo $e->getFile() . " LINE: " . $e->getLine();
    $word->Quit();
    $word = null;
    die;
}
$word->Quit();
$word = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:59:15.377

不要说是什么版本，但是对于 XP- 你可以使用一个简单的批处理文件来删除**\Documents and Settings\USER\Local Settings\temp\**中的文件。例子：

```
C:
cd \Documents and Settings\USER\Local Settings\Temp
attrib -R -S -H *.* /S /D
DEL /S /F /Q *.* 
```

相应地修改。

# ios - 使用情节提要时从 UITabbarController 添加/删除或显示/隐藏标签栏项目

> ID：13403247
> 
> 赞同：11
> 
> 时间：2012-11-15T17:48:11.427
> 
> 标签：ios, xcode, uitabbarcontroller

`UITabBarController`我有一个应用程序需要根据用户是否注册来显示不同的内容。有没有办法在运行时`ViewController`从 a 添加和删除 s ？`UITabBarController`显示和隐藏也可以。

在情节提要之前，您可以调用`setViewController`，但在使用情节提要时这似乎不是正确的方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-15T22:32:18.363

您可以按如下方式删除标签栏项目：

```
NSMutableArray *tabbarViewControllers = [NSMutableArray arrayWithArray: [self.tabBarController viewControllers]];
[tabbarViewControllers removeObjectAtIndex: /*Any index*/];
[self.tabBarController setViewControllers: tabbarViewControllers ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-24T01:59:06.393

**斯威夫特 4+**

```
func removeTab(at index: Int) {
        guard var viewControllers = self.tabBarController?.viewControllers else { return }
        viewControllers.remove(at: index)
        self.tabBarController?.viewControllers = viewControllers
    } 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-03-16T06:51:46.150

在情节提要中设计时，我们可以在文件检查 器中使用选项**底部栏作为无隐藏选项卡栏。**

[![在此处输入图像描述](../Images/b2a8536cf40c1b562b1f6550132891f8.png)](https://i.stack.imgur.com/Wa9uI.png)

# c - C 字符串传递

> ID：13403248
> 
> 赞同：2
> 
> 时间：2012-11-15T17:48:12.720
> 
> 标签：c, string, pass-by-reference

如果我正在读取 C 字符串，例如：char myData[100]; 我想处理这些数据并从中生成一个副本，所以我的代码如下所示：

```
char myData[100], processedData[50];

loop
    fill myData from file...
    setProcessedData(myData, processedData);
    store processedData to file... 
```

其中 setProcessedData 是一个返回已处理字符串的函数。假设为简单起见，它返回一个子字符串

```
void setProcessedData (char *myData, char *processedData) {
     memCopy( processedData, myData, 5);
} 
```

我在做什么错了吗？喜欢创建额外的对象/字符串？有更好的方法吗？

假设我从包含 * I am* AT*est String* 但如何 *w to Process* 的文件中读取字符串。我想获得具有前 3*秒的子字符串。所以我的处理数据我是*一个测试*测试字符串*

我想尽可能高效地对文件的所有行执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:53:32.443

问题是您的函数本质上是不安全的，这是因为您通过传递给函数的参数来假设分配的内存。

如果有人要通过传递一个**小于 5 个字节**`setProcessedData`的字符串来调用，那么就会发生不好的事情。

 **此外，您正在`memcpy`使用原始维度复制内存，即使在这种情况下非常挑剔，一种更安全的方法是使用`sizeof(char)*5`.

但是，您可以做的最好的事情是遵循标准库的更安全函数（例如`strcpy`vs ）使用的相同方法`strncpy`：传递第三个参数，该参数是应复制的最大长度，例如：

```
void processData(const char *data, char *processedData, unsigned int length) {
  memcpy(processedData,data,length*sizeof(char));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:51:59.027

我认为你可以改进你的代码：

1.  制作输入字符串指针`const`（即`const char* myData`），以标记`myData`为**输入字符串**且其内容未被函数修改。

2.  传递**目标缓冲区的大小**，因此在您的函数中，您可以进行适当的检查并避免缓冲区溢出（安全敌人）。**

# drop-down-menu - yii dropdownList 显示相同的值？

> ID：13403250
> 
> 赞同：1
> 
> 时间：2012-11-15T17:48:23.393
> 
> 标签：drop-down-menu, yii

我在项目中的前任没有将下拉列表值保存在表格中；他们在 html 文件中......这家伙也没有`$form->dropdownList()`用来创建选择......

当然，我现在在编辑时预选值有很大的问题；因此我将所有更改`<select>`为`$form->dropdownList()`.

但现在我有一个不同的问题，因为

```
echo $form->dropdownList($model,'location',
        array("Art","Gallery","Bar","Club")); 
```

现在为数据库生成整数值...

我知道我可以像这样设置显示值： array("Art" => "Art").... 但我宁愿避免这种情况 - 有很多视图直接显示值... :(

有没有办法告诉 yii DB 值应该和显示值一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:32:37.193

如果数组值是唯一的（Yii 需要唯一的键），你可以使用...

```
$data = array("Art","Gallery","Bar","Club");
echo $form->dropdownList($model,'location', array_combine($data, $data)); 
```

`array_combine`将对 listdata 的键和值使用相同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:15:30.940

您可以按如下方式覆盖小部件的`dropDownList`方法：`CActiveForm`

```
<?php
class ActiveForm extends CActiveForm
{
    public $valuesAsKeys = false;

    public function dropDownList($model,$attribute,$data,$htmlOptions=array())
    {
        if (!$this->valuesAsKeys)
            return parent::dropDownList($model, $attribute, $data, $htmlOptions);

        $newData = array();
        foreach ($data as $value)
            $newData[$value] = $value;
        return parent::dropDownList($model, $attribute, $newData, $htmlOptions);
    }
} 
```

然后像这样使用它：

```
<?php
$form = $this->beginWidget("application.components.ActiveForm", array(
    'valuesAsKeys' => true,
    // other parameters here
));

// Rendering form's elements here
$this->endWidget(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T14:33:01.590

Harry B 的回答很好，谢谢！在我的例子中，我想使用自定义选项值并且还包括一个提示，因此为了扩展他的示例，我创建了一个返回键和值数组的方法。keys 数组以'prompt' 开头，'values' 数组以'(select)' 开头，然后我遍历我的数据源并将每个键添加到keys 数组并将每个值添加到values 数组。我的代码有点复杂，涉及正则表达式，但这是基本要点：

```
// 控制器方法 popupRowListValues($source)
$displayKeys = array('提示');
$displayValues = array('select');

foreach ($source as $key=>$value) {
    $displayKeys[] = $key;
    $displayValues = $价值；
}

// 看法
$displayList = $this->popupRowListValues($source);

echo $form->dropDownListRow($model, $column_name, array_combine(
    $displayList['displayKeys'], $displayList['displayValues']
));

```

# php - 什么时候担心并发控制 PHP mysql

> ID：13403251
> 
> 赞同：2
> 
> 时间：2012-11-15T17:48:22.890
> 
> 标签：php, concurrency, mysqli, controls

我有一个关于并发控制的问题，以及何时需要担心。我创建了一个 PHP/MySQL 站点（InnoDB）。我知道如何避免事务问题，但是还有并发控制。

我的网站是一个电子商务，其中包含用户插入的商品，例如。当用户向站点插入新项目时，数据库会创建一个 productId 作为主键（由数据库自动递增）并存储通过表单提交的有关该产品的其他数据。我正在使用准备好的陈述。

我是否需要担心两个或更多用户是否同时执行此操作？是否有可能同时提交两个或多个项目会弄乱不同行的数据？

为了能够插入产品，如果这对问题很重要，用户必须使用会话登录。

在此先感谢，马库斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:50:48.767

除非他们写入完全相同的行，否则我不明白您为什么会遇到任何并发问题。即使他们正在写入同一行，InnoDB 也有**行级**锁定，这意味着一行将被锁定直到用户完成写入，让后续用户“等待”直到锁定释放。关于“冲突 INSERT 查询”的可能性：如果您将新数据插入使用自动递增主键的表中，则保证每次都获得唯一 ID，这意味着并发永远不应该成为 INSERT 上的一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:54:31.297

您可以进行快速表锁定，在更新时特别有用

# objective-c - UIImageView 在模拟器中加载不同的图像

> ID：13403257
> 
> 赞同：0
> 
> 时间：2012-11-15T17:48:44.090
> 
> 标签：objective-c, ios, xcode

我有一个在所有 iOS 平台上运行并使用加载图像（iPad、iPad Retina、iPhone、iPhone Retina 和 iPhone 5）的应用程序。加载图像只是应用程序登录屏幕的屏幕截图。很正常。

登录屏幕有几个按钮、几个广告图像和一个背景图像。但是，当我在模拟器中运行时，背景图像没有正确加载。我不知道它是否使用了来自其他地方的图像（看起来没有包含在项目中），或者只是背景颜色，但它是一种非常浅的棕褐色。这发生在所有 3 个硬件版本的 iPhone sim 上，但不会发生在 iPad sim 上。如果我在实际设备上运行，则背景图像在所有设备上都可以正常加载。

更多信息：我遵循的命名约定

*   ~iphone.png
*   @2x~iphone.png
*   ~ipad.png
*   @2x~ipad.png

我正在使用两个故事板。一个用于 iPad，一个用于 iPhone。背景图像是 UIImageView，并在 Xcode 的属性检查器中定义（不是以编程方式）。

我努力了：

*   清理项目
*   从模拟器中删除应用程序
*   将图像更改为其他内容然后返回。

# hover - 如何在 css (less) box-shadow 上捕获悬停事件

> ID：13403258
> 
> 赞同：3
> 
> 时间：2012-11-15T17:48:44.900
> 
> 标签：hover, less, css

我想创建一个按钮，当您将鼠标悬停在它上面时，它看起来好像上升了。我目前正在使用 boxshadow 来创建凸起按钮的视觉外观。不幸的是，正如可能预期的那样，阴影没有捕获悬停事件，这会导致按钮在您从底部接近它时表现得很疯狂。

这是我的较少代码：

```
.button-new {
  background-color: lighten(@gray, 10%);
  padding: 10px 20px;
  .border-radius(8px);
  color: white !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.5);
  @shadow: 0 4px 0 rgb(183,183,183);
  .box-shadow(@shadow);
  position: relative;
  &:hover {
    top: -8px;
    @shadow: 0 4px 0 rgb(183,183,183), 0 12px 0 rgba(0,0,0,.1);
    .box-shadow(@shadow);
  }
  &:active {
    top: 0;
    @shadow: 0 4px 0 rgb(183,183,183);
    .box-shadow(@shadow);
  }
} 
```

有没有办法在 CSS 框阴影上捕获悬停事件？还是有更好的方法来编写我想要的按钮类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:55:15.913

唯一的解决方法是在它周围包裹一个元素并使用它来抓取悬停事件并定位`.button-new`..

像这样的东西

```
.button-wrap:hover .button-new{
    top: -8px;
    @shadow: 0 4px 0 rgb(183,183,183), 0 12px 0 rgba(0,0,0,.1);
    .box-shadow(@shadow);
} 
```

[在http://jsfiddle.net/gaby/jSJTS/2/](http://jsfiddle.net/gaby/jSJTS/2/)演示
（*更多的 css 属性已更改，根据您的设计进行调整..*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:16:04.943

我的问题的确切答案是：“这是不可能的。” （请参阅 Gaby 的出色回答。）

我确实设法在不使用包装器 div 的情况下以不同的方式获得它；我没有使用盒子阴影，而是使用了 css 伪类`before`：

```
.button-new {
  background-color: lighten(@gray, 10%);
  padding: 10px 20px;
  .border-radius(8px);
  color: white !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.5);
  border-bottom: 4px solid rgb(183,183,183);
  position: relative;
  &:hover {
    top: -8px;
    &:before {
      content: "";
      position: absolute;
      z-index: -1;
      top: 8px;
      left: 0;
      width: 100%;
      height: 100%;
      .border-radius(8px);
      background: green;
      border-bottom: green 4px solid;
    }
  }
  &:active {
    top: 0;
    &:before {
      top: 0;
    }
  }
} 
```

# .net - .Net 返回初始化器？

> ID：13403260
> 
> 赞同：0
> 
> 时间：2012-11-15T17:49:04.447
> 
> 标签：.net, return-value, initializer

我正在努力解决这个问题。我知道最近版本的 .Net 中的对象初始值设定项，但下面的代码让我感到困惑。首先是调用代码，下面是我需要的类和接口定义。

```
var mockCustomer = new Customer_GetUserByCustIdResult();
var testSingleResult = new SingleResult<Customer_GetUserByCustIdResult> { mockCustomer };

public class SingleResult<T> : ISingleResult<T>
public interface ISingleResult<T> : IEnumerable<T>, IEnumerable, IFunctionResult, IDisposable 
```

`new`使用 Visual Studio 2012的智能感知，我看到当`testSingleResult`类`mockCustomer`被视为返回值时，`IFunctionResult`我相信这与接口有关。我不是 100% 确定这一切是如何工作的——我们不是在初始化成员变量，而是在初始化一个返回值？无论如何，这就是它的样子，我以前从未见过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:53:24.547

您正在查看的是集合初始化程序，请参阅：http: [//msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

# joomla - 更新后更改购物车布局而不会丢失所有内容

> ID：13403261
> 
> 赞同：0
> 
> 时间：2012-11-15T17:49:11.453
> 
> 标签：joomla, virtuemart

我更改了 VirtueMart 购物车的一些文件，以便在第一步仅显示产品列表。我已经直接在`components\com_virtuemart\views\cart\templ`-folder 中完成了此操作。
但现在我更新了 VirtueMart，所有的设计更改都丢失了。

我必须在哪里保存我的更改，而不必在每次更新后再次上传它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:08:45.067

当您想要更改扩展的设计时，您应该始终通过模板覆盖来完成。这可确保在更新扩展时，您的更改不会丢失。由于您编辑了 VirtueMart 的核心文件，更新替换了它们。

请参阅下面的链接，了解如何进行模板覆盖。他们很容易;）

[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

希望这可以帮助。

# python - Python，if语句改变一个数字

> ID：13403267
> 
> 赞同：0
> 
> 时间：2012-11-15T17:49:30.690
> 
> 标签：python

我正在学习 Python，我制作了一个脚本，它搜索包含“关键字”的几行，然后在新文件中写入/打印（以前）选择的列表行（我使用第二个参数从列表）。

一切都很顺利，直到我尝试添加一个语句以防我选择的列表行大于实际的 len(list) 然后选择的 list_line = len(list); 无论出于何种原因，它都不起作用。

谁能指出它为什么不起作用，这是我的脚本。感谢一百万的帮助。（这是我用作输入的文件示例的[链接）](https://dl.dropbox.com/u/63216126/ActCat.out)

```
 import sys
    import re

    filename = sys.argv[1]
    line_select = int(sys.argv[2])

    newfile = str(filename) + ".3d"

    openold = open(filename,"r")
    opennew = open(newfile,"w")

    rline = openold.readlines()

    energies = []

    line_number = 0

    for line in rline:
        line_number += 1
        if re.search( r"SCF Done", line ):
            words = line.split()
            energy = float( words[4] )
            energies.append(str(line_number) + " : " + "The energy of the molecule is %f kcal mol-1" % energy)

    len_list = len(energies)

    if line_select > len_list:
        line_select = len_list

    print >>opennew, energies[line_select]

    openold.close()
    opennew.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:57:11.943

列表的最后一个元素`energies`实际上是`energies[len_list-1]`，因为 Python 索引从 0 开始。

所以如果要打印“最后一个元素`energies`”，需要初始化`line_select`为比列表长度小一：

```
if line_select >= len_list:
    line_select = len_list-1 
```

# java - 加载 rJava 时出错

> ID：13403268
> 
> 赞同：7
> 
> 时间：2012-11-15T17:49:39.737
> 
> 标签：java, r, centos, cloudera, rjava

当我想加载 rJava 时出现错误。JDK 已安装。（我在 CentOS 虚拟机上运行 R（cloudera demo vm cdh3u4））

```
> library(rJava)

Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/home/cloudera/R/x86_64-redhat-linux-gnu-library/2.15/rJava/libs/rJava.so':
  libjvm.so: cannot open shared object file: No such file or directory
Error: package/namespace load failed for ‘rJava’ 
```

设置有问题`LD_LIBRARY_PATH`吗？如果是，我该如何解决？我需要运行 rJava 以便稍后安装 rhdfs。

更多信息（如果需要）：

```
[cloudera@localhost ~]$ java -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-19T11:27:43.723

对于 Ubuntu，安装了 oracle-java (7/8)。它将在此位置 /usr/lib/jvm 并且需要 sudo 访问权限。

`/etc/ld.so.conf.d/java.conf`使用以下条目创建文件：

```
/usr/lib/jvm/java-8-oracle/jre/lib/amd64
/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server 
```

（将 java-8-oracle 替换为 java-7-oracle 或 java-7-openjdk-amd64，具体取决于您的 java 版本）

然后：

```
sudo ldconfig 
```

重新启动 RStudio，然后安装 rJava 包。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-14T11:43:16.973

让 rJava 工作在很大程度上取决于您的计算机配置。以下至少在**Windows**平台上工作。您可以尝试检查一下，这是否对您的平台也有帮助。

1.  您必须对两者**使用相同的**32 位或 64 位版本：R**和**JDK/JRE。这种混合永远不会起作用（至少对我来说）。
2.  如果您使用 64 位版本，请确保**不要将 JAVA_HOME 设置**为环境变量。如果设置了这个变量，无论出于何种原因，rJava 都将无法工作。您可以使用以下命令检查您的 JAVA_HOME 是否设置在 R 中：

    ```
    Sys.getenv("JAVA_HOME") 
    ```

如果您需要设置 JAVA_HOME （例如，您需要它用于 maven 或其他东西），您可以在加载 rJava 之前使用以下代码在您的 R-session 中停用它：

```
if (Sys.getenv("JAVA_HOME")!="")
  Sys.setenv(JAVA_HOME="")
library(rJava) 
```

在大多数情况下，这应该可以解决问题。此外，这也将解决[在带有 R 的 Win7 64 位上使用 rJava 包的](https://stackoverflow.com/q/7019912/2161065)问题。我借用了从[R 中取消设置环境变量的想法： rJava package install failed](https://stackoverflow.com/q/3311940/2161065)。

# git - GIT - 在部署时忽略提交的文件

> ID：13403269
> 
> 赞同：1
> 
> 时间：2012-11-15T17:49:44.430
> 
> 标签：git, deployment, version-control

我想在我的存储库中保留扩展的 javascript 文件以创建修改历史，但只部署缩小文件（以 .min.js 结尾）。有一种方法可以在部署时忽略以 .src.js 结尾的所有内容，并保持这些文件的提交？

我的后期接收：

```
#!/bin/sh
GIT_WORK_TREE=/var/www/html/mywebsite/ git checkout -f 
```

如果 git 无法做到这一点，我考虑在 post-receive 中添加一些 rm 命令以在“git checkout -f”之后删除文件。类似的东西

```
GIT_WORK_TREE blah blah blah ... git checkout -f && find /var/www/html/mywebsite/assets/js/ -type f -name "*.src.js" -exec rm -f {} \; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:55:40.160

我通常将 rsync 用于此类事情，以便 .git 目录不包含在部署的内容中。您可以使用 --exclude=PATTERN 忽略 .src.js 文件。

rsync --delete -l -r --exclude=".git" --exclude="*.min.js" --exclude="tmp" sourceDir destDir

sourceDir 或 destDir 也可以是 ssh 主机。我建议将它放在手动运行的脚本中，而不是 git 钩子中，这样您就可以控制更改何时生效。（我通常使用 Jenkins 运行这样的脚本。）

# sfml - SFML 输入 开始时无响应

> ID：13403270
> 
> 赞同：0
> 
> 时间：2012-11-15T17:49:46.393
> 
> 标签：sfml

我正在制作一个 2D 游戏，我们应该通过箭头键控制角色。

```
 if((win.GetInput().IsKeyDown(sf::Key::Down)))
        {
            y = y + Speed;
        }

        if((win.GetInput().IsKeyDown(sf::Key::Left)))
        {
            x = x - Speed;
        } 
```

我已将 Speed 设置为 10。然后 ai 使用 Sprite.SetPosition(x,y) 实际为我的角色设置动画。

一切正常。但问题是每当我按箭头键时，角色移动 1/2 秒，停止约 1/2 秒，然后再次平稳移动。每当我按任何箭头键时都会发生这种情况。

是的，我在顶部使用了一个 while 循环来同时处理多个事件。

我希望我的问题足够清楚。请帮帮我！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:21:11.130

我认为您没有以正确的方式处理事件。您在这里所做的是检查每个事件（可能是键盘输入与否）是否按下了 sf::Key::Down 键（对于 sf::Key::Left 也是如此）。

首先，它没有效果，因为你没有得到你想要的结果。其次，它执行无用的检查，承认事件可能是鼠标移动、鼠标点击或其他任何事件：检查在这种情况下是否按下了这些键对您的程序毫无意义。

我看不到你的整个代码，但你应该尝试这种口味的东西作为你的主循环：

```
bool isMovingLeft = false;
bool isMovingDown = false;
sf::Event event;

while (win.IsOpen())
{
    // While window catches events...
    while(win.GetEvent(event))
    {
         // If the caught event is a click on the close button, close the window
         if (event.Type == sf::Event::Closed)
             win.Close();
         // If it's a key press, check which key and move consequently
         else if (event.Type == sf::Event::KeyPressed)
         {
              if(event.Key.Code == sf::Key::Left)
                   isMovingLeft = true;
              else if(event.Key.Code == sf::Key::Down)
                   isMovingDown = true;
         }
         // If it's a key release, stop moving in the following direction
         else if (event.Type == sf::Event::KeyReleased)
         {
              if(event.Key.Code == sf::Key::Left)
                   isMovingLeft = false;
              else if(event.Key.Code == sf::Key::Down)
                   isMovingDown = false;
         }    
    }

    // Now that we have caught events, we move the lil' thing if we need to.
    if(isMovingLeft)
          x = x - SPEED;
    if(isMovingDown)
          y = y - SPEED;

    win.Clear();

    // Draw things on the screen...

    win.Display();
} 
```

在这段代码中，整个过程分为两部分：

*   我们首先拦截用户输入，看看是否需要改变事物的移动状态。
*   然后，一旦每个事件都被捕获并彻底分析，我们就会在必要时移动它。它是通过两个布尔值完成的（如果你想要一个四方向控制，你可能需要增加到四个。如果你想处理对角线方向，使用枚举比使用八个布尔值更明智，这开始相当记忆- 消耗如此简单的任务。）

注意：您可能会注意到我将“速度”更改为“速度”。我看不出它是一个定义、一个 const var 还是只是你给出的代码中的一个 var，但最好的选择是前两个中的一个。我更喜欢将#define 用于此类事情，以使常量易于访问（因为它们被放入预处理器中），并且完全封顶的编写使其与代码中的经典变量更容易区分。但这只是我们在这里谈论的编码风格:)

# url - 将所有以“#_=_”结尾的 URL 重定向到根域

> ID：13403273
> 
> 赞同：4
> 
> 时间：2012-11-15T17:50:11.277
> 
> 标签：url, redirect, facebook-login, buddypress

嗨，我正在寻找一个 htaccess 重定向，它 `http://www.example.com/cooluser/profile#_=_`需要`http://www.example.com/cooluser/members/profile/`

where`/cooluser/`对于登录的用户是动态且唯一的。这是一个 buddypress 安装。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:54:18.960

URL 的散列片段（后面的部分`#`）永远不会发送到服务器。重定向需要在客户端完成，不能在`.htaccess`.

# objective-c - 如何在目标c的双操作数中获得cos90的值

> ID：13403274
> 
> 赞同：0
> 
> 时间：2012-11-15T17:50:11.073
> 
> 标签：objective-c, ios, floating-point

我正在尝试运行我的程序并且我正在使用

```
double result = cos(90*M_PI/180);
NSLog("Cos 90 value %g",result);  //Prints 6.12323e-17 
```

但是当我运行这个

```
 NSLog("Cos 90 value %f",cos(90*M_PI/180)); //Prints 0 
```

我想在 result(double) 中得到 cos90 的值，它应该是 0。我知道那是浮点运算问题。但是如何解决它。有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:19:05.590

由于 的参数`cos`是弧度，要计算 90º 的余弦，您将传递 π/2 弧度。π/2 约为 1.570796326794896619。最接近 π/2 的 IEEE 754 双精度约为 1.570796326794896558。显然，这些是不同的。后者的余弦约为 6.123•10 ^(-17)。因此，您的余弦例程工作正常；它返回它传递的数字的余弦。

将 π/2 传递给 是不可能的`cos`，因为 π/2 不能表示为双精度数。

根据您的要求，可能会有解决方法。例如，此表达式将（近似）返回 x 的余弦（以度为单位），并且当 x 为 90 时将精确为零：`sin(M_PI/180*(90-x))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:03:25.117

问题是结果太小了。唯一的区别是格式说明符。`%g`并且`%f`是不同的；`%f`通常在小数点后有六点精度，而`%g`使用科学计数法表示小数。您可以使用 扩展小数点后打印的字符数`%.100f`，其中`100`是小数点后的字符数。但是，这不是很精确，并且在小数点后不能保证精度

编辑：嗯，现在我注意到你实际上想要计算的是什么。它不是零，因为由于舍入等原因，该级别的浮点运算不精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:55:08.343

最后我找到了解决方案。所有的解释都是正确的，但是这个问题的“临时”解决方案是`NSNumberFormatter.`

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];

[formatter setAlwaysShowsDecimalSeparator:NO];
[formatter setAllowsFloats:YES];
[formatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
[formatter setMinimumFractionDigits:0];
[formatter setMaximumFractionDigits:10]; //THIS IS IMPORTANT AS AFTER DECIMAL, DIGITS SHOULD BE LESS THAN 17 because there is difference of 6.12323e-17 

double result = cos(90*M_PI/180);
NSNumber *numberResult = [NSNumber numberWithDouble:result];

[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSLog(@"%@",[formatter stringFromNumber:number]); //Prints 0 
```

这是一个临时解决方案。您也可以使用 %f 打印 cos 90 的值，但它也会在小数点后打印不需要的六个 0。

# jquery - 下载到通过 iframe 元素的 excel 功能呈现不一致

> ID：13403275
> 
> 赞同：0
> 
> 时间：2012-11-15T17:50:12.980
> 
> 标签：jquery, asp.net, ajax, internet-explorer-9

我有一个 iframe 元素

```
<iframe id='excelIframe' src=''></iframe> 
```

现在单击按钮，我进行 ajax 调用并允许用户使用此 iframe 元素和以下 jquery 下载报告：

```
$("#excelIframe").attr('src', 'ABC.ashx?requestType=xyz' + ClientId); 
```

它已经工作了很长时间了，但是最近一些 IE9 客户端在下载文件时遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:25:46.203

在你的 ashx 添加

```
context.Response.AddHeader("Content-Disposition", "attachment; filename=DesiredFileName.xlsx") 
```

# java - ApacheDS OID 指定数据类型列表

> ID：13403279
> 
> 赞同：0
> 
> 时间：2012-11-15T17:50:35.270
> 
> 标签：java, ldap, apacheds, ldif

我使用 ApacheDS 作为 LDAP 服务器。当您定义属性时，有不同的类型。例如，字符串或布尔值。有没有办法指定一个列表。那么手机列表？

如果没有，怎么能做到这一点。我知道有一个名为 groupOfUnquieNames 的 ObjectClass。但问题是我有多个列表。例如，手机列表和地址列表。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:56:10.997

没有列表类型，但属性默认为多值 -`mobile`例如是多值的：

```
dn: uid=user,dc=example,dc=com
objectClass: top
objectClass: inetOrgPerson
...
mobile: 000-000-0000
mobile: 111-111-1111 
```

换句话说，用户`user`有两个手机号码。两者都将在搜索请求中返回。

# java - Minimax 算法中的 alpha/beta 值是多少？

> ID：13403282
> 
> 赞同：0
> 
> 时间：2012-11-15T17:50:59.657
> 
> 标签：java, artificial-intelligence, minimax, alpha-beta-pruning

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:53:07.993

```
int alpha = Integer.MIN_VALUE
int beta = Integer.MAX_VALUE 
```

Best you can do with no infinity.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T17:53:13.190

# c++ - C ++计算文件中两个单词之间的单词

> ID：13403284
> 
> 赞同：1
> 
> 时间：2012-11-15T17:51:09.170
> 
> 标签：c++, file, count, words

我目前正在尝试计算文件中的字数。在此之后，我打算让它计算文件中两个单词之间的单词。例如。我的文件可能包含。“你好，我的名字是詹姆斯”。我想数单词，所以 5。然后我想数“Hello”和“James”之间的单词数，所以答案是 3。我无法完成这两项任务。主要是因为不确定如何构建我的代码。在这里的任何帮助将不胜感激。我目前使用的代码是使用空格来计算单词。

这是我的代码：

读字.cpp

```
string ReadWords::getNextWord()
{
    bool pWord = false;
    char c;
    while((c = wordfile.get()) !=EOF)
    {
        if (!(isspace(c)))
        {
            nextword.append(1, c);
        }

        return nextword;
    }
}

bool ReadWords::isNextWord()
{
    if(!wordfile.eof())
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

主文件

```
main()
{
    int count = 0;
    ReadWords rw("hamlet.txt");
    while(rw.isNextWord()){
        rw.getNextWord();
                count++;
    }
    cout << count;
    rw.close();
} 
```

它目前所做的是计算字符数。我敢肯定这只是一个简单的修复和我错过的一些愚蠢的事情。但是我已经尝试了足够长的时间来寻求帮助。

任何帮助是极大的赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:56:14.570

计算：

```
std::ifstream infile("hamlet.txt");
std::size_t count = 0;
for (std::string word; infile >> word; ++count) { } 
```

仅在开始和停止之间计数：

```
std::ifstream infile("hamlet.txt");
std::size_t count = 0;
bool active = false;

for (std::string word; infile >> word; )
{
     if (!active && word == "Hello") { active = true; }
     if (!active) continue;
     if (word == "James") break;
     ++count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:00:38.740

`istream::operator<<()`您可以简单地使用读取空格分隔的单词，而不是逐个字符地解析文件。`<<`返回流，它的计算结果`true`为`bool`仍然可以从中读取流。

```
vector<string> words;
string word;
while (wordfile >> word)
    words.push_back(word); 
```

有一个使用`<iterator>`and`<algorithm>`实用程序的通用公式，它更冗长，但可以与其他迭代器算法组合：

```
istream_iterator<string> input(wordfile), end;
copy(input, end, back_inserter(words)); 
```

然后你就有了单词的数量，并且可以随心所欲地使用它们：

```
words.size() 
```

如果要查找`"Hello"`and `"James"`，请使用`find()`from`<algorithm>`标头将迭代器获取到它们的位置：

```
// Find "Hello" anywhere in 'words'.
const auto hello = find(words.begin(), words.end(), "Hello");

// Find "James" anywhere after 'hello' in 'words'.
const auto james = find(hello, words.end(), "James"); 
```

如果它们不在向量中，`find()`将返回`words.end()`；为了说明的目的而忽略错误检查，您可以通过计算它们之间的差异来计算它们之间的单词数，并调整包含`"Hello"`在范围内：

```
const auto count = james - (hello + 1); 
```

你可以`operator-()`在这里使用，因为`std::vector::iterator`它是一个“随机访问迭代器”。更一般地，您可以使用`std::distance()`from `<iterator>`：

```
const auto count = distance(hello, james) - 1; 
```

这样做的好处是更能描述你实际在做什么。另外，为了将来参考，这种代码：

```
bool f() {
    if (x) {
        return true;
    } else {
        return false;
    }
} 
```

可以简化为：

```
bool f() {
    return x;
} 
```

由于`x`已经被转换`bool`为`if`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:59:34.620

我认为“返回下一个单词；” 应该改为“else return nextword;” 否则，无论字符是什么，您每次都会从函数 getNextWord 返回。

```
string ReadWords::getNextWord()
{
    bool pWord = false;
    char c;
    while((c = wordfile.get()) !=EOF)
    {
        if (!(isspace(c)))
        {
            nextword.append(1, c);
        }

        else return nextword;//only returns on a space
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:03:40.747

计算所有单词：

```
std::ifstream f("hamlet.txt");
std::cout << std::distance (std::istream_iterator<std::string>(f),
                            std::istream_iterator<std::string>()) << '\n'; 
```

在两个单词之间计数：

```
std::ifstream f("hamlet.txt");
std::istream_iterator<std::string> it(f), end;
int count = 0;
while (std::find(it, end, "Hello") != end)
  while (++it != end && *it != "James")
    ++count;
std::cout << count; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T20:35:22.087

试试这个：线下

```
nextword.append(1, c); 
```

添加

```
continue; 
```

# linux - 合并或提交到两个单独的存储库

> ID：13403288
> 
> 赞同：2
> 
> 时间：2012-11-15T17:51:24.223
> 
> 标签：linux, git, repository

目前我们有 repo cos，这是我们的主要 repo。我们还有 repo cos2，其中包含截至我们分叉之日的所有 cos 提交。它们是完全独立的存储库。在正式迁移到 cos2 之前，我们需要将 cos 中的更改提交到 cos2，但在此期间我们需要 cos2 中的 cos 提交。

```
Repo Cos   A---B---C---D---n
               |   |   |   |
Repo Cos2  A---B---C---D---n 
```

或者

```
Repo Cos   A---B---C---D---n
             \   \   \   \
Repo Cos2  E---F---G---H---n 
```

我们如何在 cos 中获得特定的提交或合并到 cos2？

cos2 中的任何内容都不需要转到 cos，但 cos 中的所有内容都需要转到 cos2。但是，我们需要能够在 cos2 中继续开发，因此我们不能只是克隆 cos 以在发生分歧时重新创建 cos2。

我希望有这样的命令，

```
git merge feature/branch user@giturl:/cos2 :feature/branch 
```

但我认为不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:13:10.193

您可以使用以下命令将默认存储库作为第二个服务器添加到 cos2 存储库：

```
git remote add COS ssh://user@serverurl:cos.git 
```

之后，您可以将 COS master 分支合并到您当前的 cos2 分支：

```
git merge COS/master 
```

通过这种方式，您可以轻松地将提交从 cos 拉到 cos2。

# asp.net-mvc - 视觉工作室 mvc CRUD 模板

> ID：13403290
> 
> 赞同：2
> 
> 时间：2012-11-15T17:51:34.753
> 
> 标签：asp.net-mvc, visual-studio, templates

使用 Visual Studio 2012 / MVC 4

当您在 VS 中创建控制器时，您可以选择让 VS 自动为您的控制器生成 CRUD 模板，是否可以修改这些模板甚至创建自己的模板？每次创建这些模板时，我都需要对其生成的代码进行微小的更改，例如

这是 VS 为我的编辑模板生成的代码

```
<div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div> 
```

但我必须改变这些时间以适应我的布局，比如

```
<section>
            @Html.LabelFor(model => model.Title)

            <div>
                @Html.EditorFor(model => model.Title)
                @Html.ValidationMessageFor(model => model.Title)
            </div>
    </Section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:16:28.377

请参阅 Omar 的评论以获取答案

# css - 具有特定属性的标签的CSS？

> ID：13403292
> 
> 赞同：0
> 
> 时间：2012-11-15T17:51:49.467
> 
> 标签：css

我想用 CSS 设置一个表单。我`#email input {}`用来改变输入的外观。但是，我希望提交按钮的样式略有不同。我该怎么做这样的事情：

```
#email input {
    width: 614px;
    height: 30px;
    color: #000000;
    background: #FFFFFF;
    border: 1px solid #CCCCCC;
    margin: 5px;
    font-size: 26px;
    padding-left: 3px;
    padding-right: 3px;
}
#email input:type:submit {
    width: 620px;
    height: 30px;
    color: #000000;
    background: #FFFFFF;
    border: 1px solid #CCCCCC;
    margin: 5px;
    font-size: 26px;
    padding-left: 3px;
    padding-right: 3px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:53:03.877

```
#email input[type="submit"] {} 
```

应该做的伎俩...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:55:48.657

您正在寻找[属性选择器](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)。方括号根据元素的属性进行匹配。

在你的情况下，它会是这样的：

```
#email input[type="submit"] { /* your styles here */ } 
```

# perl - 如何从 Perl 数组中找到与第二个数组中的元素匹配的元素？

> ID：13403294
> 
> 赞同：2
> 
> 时间：2012-11-15T17:51:51.290
> 
> 标签：perl

我有两个数组

```
@one = ("1|1|the|dog|ran", "1|2|a|x|b", "2|8|e|s|e");
@two = ("1|2|a|x|b", "1|1|down|the|street", "2|8|e|s|e"); 
```

我需要通过前两个“|”来匹配它们 分离的元素。这样当在 $one[0] 时，搜索将返回 $two[1]。

每个数组中有数百万行，所以我需要最快的方法来做到这一点。

编辑：很抱歉造成混乱。我想处理前2个“|” 分隔元素（即 1|2、2|1）作为数组的键，循环遍历第一个数组并使用该键搜索第二个数组以获取第二个数组中的值。这有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:56:56.097

```
- For each record in the second array,
  - Parse the record
  - Add it to a hash keyed by the first two fields.

- For each record in the first array,
  - Parse the record
  - Look in the hash for a record with the appropriate key.
  - If there is one,
    - Do something with it. 
```

# couchdb - 为什么在增加 max_dbs_open 之后，复制仍然会因“增加 max_dbs_open”而失败？

> ID：13403295
> 
> 赞同：8
> 
> 时间：2012-11-15T17:51:51.463
> 
> 标签：couchdb

我们的应用程序使用 CouchDB 过滤复制在用户数据库和主数据库之间移动数据。随着我们增加用户数量，复制开始失败并显示此消息

```
Source and target databases out of sync. Try to increase max_dbs_open at both servers. 
```

我们已经做到了，将 max_dbs_open 的数量增加到一个高得离谱的数字（10,000），但故障和消息保持不变。显然还有其他问题。有谁知道它是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T13:09:05.377

事实证明，发送的消息`increase max_dbs_open`充其量只是部分答案，最坏的情况是具有误导性。在我们的例子中，问题不在于打开的数据库数量，而在于我们的许多复制使用的 HTTP 连接数量。

每个复制可以使用`min(worker_processes + 1, http_connections)`where`worker_processes`是分配给每个复制的工作人员的数量，并且`http_connections`是分配给每个复制的最大 HTTP 连接数，如[本文档](http://wiki.apache.org/couchdb/Replication#New_features_introduced_in_CouchDB_1.2.0)中所述。

所以使用的连接总数是

```
number of replications * min(worker_processes + 1, http_connections) 
```

的默认值为`worker_processes`4，默认值为`http_connections`20。如果有 100 个复制，则复制使用的 HTTP 连接总数为 500。另一个设置 ，`max_connections`确定 CouchDB 服务器将允许的最大 HTTP 连接数，如所述[在这份文件](http://wiki.apache.org/couchdb/Performance#Resource_Limits)中。默认值为 2048。

在我们的例子中，每个用户都有两个复制——一个从用户到主数据库，另一个从主数据库到用户。因此，在我们的例子中，使用默认设置，每次我们添加一个用户时，我们都会添加额外的 10 个 HTTP 连接，最终会破坏默认设置`max_connections`。

由于我们的复制很少，并且只有少量数据从用户移动到主服务器，然后从主服务器移动到用户，我们拨回了`worker_processes`, `http_connections`, 增加的数量`max_connections`，一切都很好。

更新

其他一些发现

1.  有必要提高进程的 ulimit 以允许它有更多打开的连接

2.  创建复制太快也会导致问题。如果我回拨创建新复制的速度，它也有助于缓解问题。ymmv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T21:51:24.407

对我来说，产生这个错误是因为目标数据库返回的“instanceStartTime”`GET /{targetDB}/`无效。

# sql-server - 访问 Last 关键字查询到 SQL 转换

> ID：13403299
> 
> 赞同：1
> 
> 时间：2012-11-15T17:52:00.260
> 
> 标签：sql-server, ms-access

我想将带有 last 关键字的 Access 查询转换为 SQL Server 2005，但无法弄清楚任何帮助表示赞赏。

Access中的查询是

```
SELECT field1, field2, Last(field3) , Last(field4) , Last(DateField) 
FROM table
GROUP BY field1, field2
HAVING (((Last(DateField)) Between #9/1/2012# And #9/30/2012#)); 
```

我试图在 SQL 中按降序对 Datefield 进行排序，并在 datefield 上使用了 MIN 关键字，但无济于事，同样在 SQL 中，我必须按所有字段进行分组，而不仅仅是 Access 中的 2 个字段。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:07:54.933

尝试`MAX`代替`LAST`，如下所示：

```
SELECT field1, field2, MAX(field3) , MAX(field4) , MAX(DateField) 
FROM table
GROUP BY field1, field2
HAVING MAX(DateField) Between "9/1/2012" And "9/30/2012" 
```

我根本不明白：*我必须按所有字段* 分组如果按所有字段分组，则相当于`SELECT DISTINCT`，并且执行聚合函数没有意义。

# ruby-on-rails - 选择实例的表格

> ID：13403300
> 
> 赞同：0
> 
> 时间：2012-11-15T17:52:02.540
> 
> 标签：ruby-on-rails, forms, radio-button

我希望我的应用程序让用户在几个地址之间进行选择或创建一个。地址将存储在合约对象（Contract.adresse_id）中。

生成显示表单的页面的控制器会生成一个@user 变量。目标是将现有地址的 id 传递给下一个控制器，或者传递新地址的参数（经典嵌套）。这个页面的唯一目的是设置地址，不能修改Contract的其他字段。

模型合约有一个 address_id 字段。我想要一个允许选择的单选按钮：

*   `@user.address # it is an address id`
*   `@user.secondary_adress # address id too`
*   和一个允许创建自己的地址的空表单。（经典嵌套）

我想它应该看起来像：

```
<%= form_for contract do |f|%>        
<% f.label :address%>   
<% end%> 
```

但后来我不知道该怎么办。我该如何做一个表格，允许在 3 个地址之间进行选择，其中 2 个地址已经存在，而第三个地址将被创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:21:58.483

您可以将第三个单选选项设置为 0 或 -1 的“id”。然后在下一个控制器中查找地址时，如果 id 是您的假非 id，则改为创建一个新地址。通过根据地址是否为新设置该表单的 url，您可能在下一个控制器上使用相同的视图。例如：

```
- if @address.new_record?
  - form_url = [create path]
- else
  - form_url = [update path]
...
 = form_for(@address, :url => form_url) do |f| 
```

（显然，这是在haml而不是erb中。我强烈建议进行切换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:26:56.447

我的问题分为两部分：

1) 选择一个现有地址将其放在对比中 2) 添加在同一页面中创建新地址而不是现有地址的可能性

对于 1) 我这样做了：

```
<%= form_for @contract ,:action => "confirm" do |f| %>
  <div><%= f.radio_button 'address',@user.address.id, :checked => true %>
  <%= render @user.address %>
  </div>

  <div><%= f.radio_button 'address',@user.address_secondary.id, :checked => true %>
  <%= render @user.address %>
  </div>
  <%= f.

  <%= f.submit %>
<% end %> 
```

它只需提交所选现有地址的 id

2）我没有制作一个复杂的单一表格，允许在两者之间进行选择，而是使用嵌套的新地址制作了第二个表格。这意味着我在前一个控制器中创建了一个新地址，但如果我不使用它，这不是问题。

最后，我的页面有两种不同的表单提交不同的数据，但这样做更容易。

# sql - 将具有相同 id 的行合并为一行，保留所有数据

> ID：13403304
> 
> 赞同：4
> 
> 时间：2012-11-15T17:52:27.573
> 
> 标签：sql, pivot

我有一张包含许多植物记录的表格。一个植物可以有多个名称，该表将其显示为不同的记录。该表名为 new_plantsname

```
plantid name
1       tree
1       rose
2       bush
3       tree
3       bush
3       rose 
```

这持续了 3000 多条记录

我想要的是合并具有相同植物 ID 的记录并在不同的列中显示不同的名称：

```
plantid name1 name2 name3 ...
1       tree  rose  NULL
2       shrub NULL  NULL
3       tree  rose  bush 
```

ETC

我还想将结果保存到新表中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:04:57.483

这基本上是一个`PIVOT`（您没有指定 RDBMS）我假设 MySQL 并且它没有`PIVOT`函数，因此您需要使用带有`CASE`语句的聚合函数来复制它。此解决方案`rownumber`向每一行添加一个，以便您可以确定需要将多少`name`个值转换为列。

如果您知道将拥有多少`name`个值，则可以对这些值进行硬编码：

```
select plantid,
  max(case when nameRn = 'name1' then name end) Name1,
  max(case when nameRn = 'name2' then name end) Name2,
  max(case when nameRn = 'name3' then name end) Name3
from
(
  select plantid, name,
      concat('name', @num := if(@plantid = `plantid`, @num + 1, 1)) as nameRn,
      @plantid := `plantid` as dummy
  from
  (
    select plantid, name, @rn:=@rn+1 overall_row_num
    from yourtable, (SELECT @rn:=0) r
  ) x
  order by plantid, overall_row_num
) src
group by plantid; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/86b39/14)

如果您有未知数量的值，那么您可以使用准备好的语句来生成它的动态版本：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when nameRn = ''',
      nameRn,
      ''' then name end) AS ',
      nameRn
    )
  ) INTO @sql
FROM 
(
  select plantid, name,
      concat('name', @num := if(@plantid = `plantid`, @num + 1, 1)) as nameRn,
      @plantid := `plantid` as dummy
  from
  (
    select plantid, name, @rn:=@rn+1 overall_row_num
    from yourtable, (SELECT @rn:=0) r
  ) x
  order by plantid, overall_row_num
) src;

SET @sql = CONCAT('SELECT plantid, ', @sql, ' 
                  FROM 
                  (
                    select plantid, name,
                        concat(''name'', @num := if(@plantid = `plantid`, @num + 1, 1)) as nameRn,
                        @plantid := `plantid` as dummy
                    from
                    (
                      select plantid, name, @rn:=@rn+1 overall_row_num
                      from yourtable, (SELECT @rn:=0) r
                    ) x
                    order by plantid, overall_row_num
                  ) src
                   GROUP BY plantid');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/11c88/1)

两者都会产生相同的结果：

```
| PLANTID | NAME1 |  NAME2 |  NAME3 |
-------------------------------------
|       1 |  tree |   rose | (null) |
|       2 |  bush | (null) | (null) |
|       3 |  tree |   bush |   rose | 
```

# android - Android remoteViews 自定义字体

> ID：13403306
> 
> 赞同：6
> 
> 时间：2012-11-15T17:52:30.197
> 
> 标签：android

如何在我的小部件中设置自定义字体？

```
remoteViews.setTextViewText(R.id.text1,""+ days); 
```

有人可以向我展示如何为此设置字体的示例吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T17:58:07.670

> 如何在我的小部件中设置自定义字体？

你没有。您可以通过 选择布局 XML 中的三种内置字体之一`android:typeface`，但不能在 a 中使用带有 a 的自定义`TextView`字体`RemoteViews`。`setTypeface()`，用于在 a 上指定自定义字体的 Java 方法`TextView`不适用于`RemoteViews`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-07T22:30:58.180

有两种解决方法可能会有所帮助。

1 - 如果您只能显示 AppWidget 自己设置的文本，则可以使用 SpannableStrings 和[TypefaceSpans](https://developer.android.com/reference/kotlin/android/text/style/TypefaceSpan)来执行此操作（以及用于粗体的[Stylespans](https://developer.android.com/reference/android/text/style/StyleSpan)等）。您可以使用普通的[setTextViewText](https://developer.android.com/reference/android/widget/RemoteViews.html#setTextViewText(int,%20java.lang.CharSequence))调用设置 SpannableString。

2 - 如果您确实需要更改 TextView 的字体系列，以便将来的文本与字体系列一起显示，这更难。正如 CommonsWare 所提到的，您不能使用 RemoteViews 以编程方式设置任意字体系列。但是，如果您有一组较小的预定义字体（或粗体等字体粗细），则有一种方法可以做到这一点。它并不漂亮，但如果字体和变体的数量得到适当控制，它就可以工作。

就我而言，我正在使用 TextClock 创建一个时钟 appwidget。因为文本更新不受 AppWidget 控制，所以我无法使用 SpannableStrings。我想提供 6 种内置字体选项。我在我的布局文件中创建了 6 个 TextClock，每个都有不同的字体，并简单地使我想要的一个可见，而其他的在配置时“消失”。丑陋但有效。所以：

**appwidget_layout.xml**

```
<TextClock
    android:id="@+id/clock_seconds_condensed"
    android:fontFamily="sans-serif-condensed"
    ....
/>
<TextClock
    android:visibility="gone"
    android:id="@+id/clock_seconds_normal"
    android:fontFamily="sans-serif"
    ....
/>
<TextClock
    android:visibility="gone"
    android:id="@+id/clock_seconds_black"
    android:fontFamily="sans-serif-black"
    ....
/>
... 
```

**配置活动**

```
//Which font do we want? Choose that clock
val clockid = when (fontFamily) {
    "san-serif" -> R.id.clock_seconds_normal
    "sans-serif-light" -> R.id.clock_seconds_light
    "sans-serif_black" -> R.id.clock_seconds_black
    "sans-serif-thin" -> R.id.clock_seconds_thin
    "sans-serif-medium" -> R.id.clock_seconds_medium
    else -> R.id.clock_seconds_condensed
}

//Hide all the other clocks
if (clockid != R.id.clock_seconds_normal) views.setInt(R.id.clock_seconds_normal, "setVisibility", View.GONE)
if (clockid != R.id.clock_seconds_light) views.setInt(R.id.clock_seconds_light, "setVisibility", View.GONE)
if (clockid != R.id.clock_seconds_black) views.setInt(R.id.clock_seconds_black, "setVisibility", View.GONE)
if (clockid != R.id.clock_seconds_thin) views.setInt(R.id.clock_seconds_thin, "setVisibility", View.GONE)
if (clockid != R.id.clock_seconds_medium) views.setInt(R.id.clock_seconds_medium, "setVisibility", View.GONE)
if (clockid != R.id.clock_seconds_condensed) views.setInt(R.id.clock_seconds_condensed, "setVisibility", View.GONE)

//Set clock parameters
views.setInt(clockid, "setVisibility", View.VISIBLE)
.... 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-15T17:56:50.453

试试这个，它可能会帮助您了解如何申请`custom font effects`您的`textview`

[使用这个例子你肯定会得到想法](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/s7DQ5UDT7s0)

# objective-c - 数组计数为 0 & UITableView _endCellAnimationsWithContext

> ID：13403307
> 
> 赞同：0
> 
> 时间：2012-11-15T17:52:31.910
> 
> 标签：objective-c, ios, uitableview, nsmutablearray

我正在尝试将一个对象添加到我的**可变数组**中，但是当我这样做时它会崩溃。我确信我的数组已经**分配**和**初始化**。

这是我的代码： ![代码](../Images/adc9fb3820815acc56bf5d8dadeda644.png)

我试图找出问题所在，如果我注释掉 [self.tableView insertRowsAtIndexPaths...] 行，我的代码似乎工作得很好。唯一的问题是我的 tableView 没有更新：'（（如果我出注释该行）。

这是我的错误消息： ![这是我的错误消息](../Images/81e2cef43823902a3b19bb801822b269.png)

当我评论 inserRowsAtIndexPaths... 行时，这是我的安慰： ![在此处输入图像描述](../Images/f615b7bad2cba999ffa72b124a368f64.png)

如您所见，一切似乎都运行良好。

额外信息： ![UITableView 数据源](../Images/ee67aebd7d6a47b0986bcffafd8d13ea.png)

我不知道你是否需要它，但这是我的 UITableViewDataSource :)

谢谢安德斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:12:16.250

当我查看您的日志时，我可以看到这个“ *Indexpath = 0* ”，这意味着您的数组（*self.budgets.items*）中没有任何内容，尝试调试您的 dataSource 数组（您想要在 tableView 上显示的实际数据）第一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:53:57.397

我相信你的问题是你从来没有分配过你的数组。如果是这种情况，您正在尝试将项目塞入不存在的东西中。您说您确定它已经存在，但我会进行一些调试以确保双重确定。这就是导致我收到相同错误消息的原因；我之前不小心删除了我的 init 方法。

# java - 如何在 Java 应用程序中使用 JOptionPane 和 showMessageDialog 作为调试工具？

> ID：13403309
> 
> 赞同：0
> 
> 时间：2012-11-15T17:52:46.623
> 
> 标签：java, swing, debugging, joptionpane

我目前正在尝试修改现有的 Java 应用程序。我想做的只是在任何我喜欢的地方显示弹出的“hi”警报框。但这不是让我这样做。我认为第一步是导入，如下所示：

导入 javax.swing.JOptionPane；

然后，我进入一个类并输入以下代码：

```
 //custom title, warning icon
JOptionPane.showMessageDialog(  frame, "Eggs are not supposed to be green.",
    "random warning",     JOptionPane.WARNING_MESSAGE); 
```

但我得到这个错误：

```
error: no suitable method found for showMessageDialog(String,String,int) 
```

我不应该把它放在任何地方，它会弹出消息吗？我不确定`frame`变量来自哪里。任何提示表示赞赏，谢谢。

编辑：哦！我想我忘了扩展 JPanel .. 让我看看

# javascript - Firebug 和不明确的 div

> ID：13403312
> 
> 赞同：0
> 
> 时间：2012-11-15T17:53:02.177
> 
> 标签：javascript, jquery, css, html, firebug

我使用 Firebug 查看网站的源代码，我发现有不清晰的 div 块（它的字体颜色比其他颜色浅）。我猜这些是由某些来源生成的，对吧。我怎样才能找到这些？例如，如果我有一个这样的 div

```
<div id="someid"><a href="" style="something">the stylish</a></div> 
```

这个 div 已经褪色，我想使用 jquery 来改变它的样式，例如，这对我有用吗？

因为在我这样做之后

```
$('#someid a').attr('style','somethingelse'); 
```

我在源代码中再也找不到那个褪色的 div 块了。怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:53:51.193

尝试使用[**css**](http://api.jquery.com/css/)

```
$('#someid a').css('background-color','red'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:50:00.387

您需要为标签编写指定 css，因为浏览器会自动为其应用颜色

```
#someid a{
  color:red;
} 
```

也可以通过jQuery改变颜色

```
 $('#someid a').css('color','red'); 
```

# dbus - 通过 Dbus 联系 Pulse Audio

> ID：13403314
> 
> 赞同：4
> 
> 时间：2012-11-15T17:53:07.030
> 
> 标签：dbus, pulseaudio

我正在尝试编写一个基本的卷应用程序。由于我是用 Ruby 编写的，因此我不想扩展 C 库或使用`ffi`，而是尝试用`ruby-dbus`我得到的`Address`属性来编写它，`/org/pulse_audio/server_lookup1`但地址指向的文件不存在。Pulse Audio 的配置是否正确`dbus`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-19T23:04:57.627

Ubuntu 提供不支持 D-Bus 的 Pulse Audio。要启用它，请将以下行放在文件末尾`/etc/pulse/default.pa`：

```
load-module module-dbus-protocol 
```

重启脉冲音频：

```
pkill pulseaudio; pulseaudio 
```

[在pulseaudio-mixer-cli](https://github.com/mk-fg/pulseaudio-mixer-cli)项目中找到的[解决方案](https://github.com/mk-fg/pulseaudio-mixer-cli/issues/1#issuecomment-8169296)演示了如何通过 D-Bus 使用 pulseaudio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:01:11.950

在我的系统（openSUSE 12.1）上，PA 确实指向一个现有的套接字。此代码（[要点](https://gist.github.com/4111846)）

```
#! /usr/bin/env ruby
require 'rubygems'
require 'dbus'
b = DBus.session_bus
ps = b.service 'org.PulseAudio1'
po = ps.object '/org/pulseaudio/server_lookup1'
po.introspect
pi = po['org.PulseAudio.ServerLookup1']
a = pi['Address']
path = a.split('=').last
system 'stat', path 
```

生产

```
$ ruby ~/snippets/dbus-pulseaudio.rb 
  File: `/home/mvidner/.pulse/7c5e87305bb28b5a0661f8180000054c-runtime/dbus-socket'
  Size: 0               Blocks: 0          IO Block: 4096   socket
Device: 801h/2049d      Inode: 1332590     Links: 1
Access: (0777/srwxrwxrwx)  Uid: (11018/ mvidner)   Gid: (  100/   users)
Access: 2012-11-19 09:07:20.566053943 +0100
Modify: 2012-11-19 09:07:20.566053943 +0100
Change: 2012-11-19 09:07:20.566053943 +0100
 Birth: - 
```

# python - 标记文本以在 Python 中进行搜索

> ID：13403319
> 
> 赞同：4
> 
> 时间：2012-11-15T17:53:10.243
> 
> 标签：python, string, search, elasticsearch, tokenize

**寻找有关如何标记文本以进行搜索的策略，以及有关如何实现它们的一些想法。**

具体来说，我们正在尝试标记用户生成的业务评论，以帮助我们的业务搜索引擎。所有代码都是Python。

我认为我们至少需要做到以下几点：

*   **将复数名词转换为单数**
    我发现一个名为[inflect](http://pypi.python.org/pypi/inflect)的库似乎做得很好，有人有这方面的经验吗？

*   **摆脱所有非字母数字字符**
    这对我来说似乎是正则表达式的工作，但我很想听听任何其他建议

*   **基于空格的标记，将连续的空格转换为单个空格**
    我认为这可以通过 Python 中的一些自定义字符串操作来实现，但可能有更好的方法。

有没有人对我需要做的事情来标记文本有任何其他想法？另外，您对实施上述策略的技术和工具有何看法？

**背景信息**：（从评论到`Dough T`关于 Solr 或 Elastic 搜索的建议）
我们正在使用***ElasticSearch***，我们使用它的工具进行基本的标记化。我们想单独进行上面描述的标记化，因为在标记化之后，我们将需要应用一些非常复杂的语义分析来从文本中提取含义。我们希望能够灵活地*准确*标记我们指定的方式，以及以我们自己的格式存储标记并附加我们自己的数据注释的便利。
我们绝对需要的一件事是每个令牌的单个（大型）数据库记录，可随时访问和修改，其中包含与该令牌使用相关的所有内容。我认为这排除了在文档被索引时仅使用 ES 标记化来处理它们。我们也许可以使用 ES 的分析模块来分析文本而不对其进行索引，然后单独处理每个令牌以构建/更新令牌的数据库记录......我们寻求有关此方法的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:57:40.433

我认为您想研究一个提供您描述的功能的全文搜索解决方案，而不是在 python 中实现您自己的东西。这个领域的两大开源玩家是[elasticsearch](http://www.elasticsearch.org/)和[solr](http://lucene.apache.org/solr/)。

使用这些产品，您可以配置定义自定义标记化、删除标点符号、帮助搜索的同义词、不仅仅是空格的标记化等字段。您还可以轻松添加插件来更改此分析链。

这是 solr 架构的示例，其中包含一些有用的东西：

## 定义字段类型

```
<fieldType class="solr.TextField" name="text_en" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>-->
    <filter catenateAll="0" catenateNumbers="1" catenateWords="1" class="solr.WordDelimiterFilterFactory" generateNumberParts="1" generateWordParts="1" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.ASCIIFoldingFilterFactory"/>
  </analyzer>
 </fieldType> 
```

## 定义一个字段

```
<field indexed="true" name="text_body" stored="false" type="text_en"/> 
```

然后，您可以通过 python 通过一个不错的 REST API 使用搜索服务器，或者直接使用 Solr/Elasticsearch。

# gprs - GPRS 调制解调器 ATD 超时未指定，如何中断？

> ID：13403326
> 
> 赞同：0
> 
> 时间：2012-11-15T17:53:35.547
> 
> 标签：gprs

使用我的 GPRS 调制解调器时，我遇到用于建立连接的 ATD*99***1# 命令的持续时间很长（在某些 RSSI 低的区域超过 2 分钟 - 接收信号强度指示）。

我的问题是双重的：

1.  由于调制解调器的数据表中没有指定 ATD 命令的超时时间，我可以预期的最长持续时间是多少？5、10分钟？（我希望聊天脚本中的超时与调制解调器的超时一致）

2.  如果我无法管理合理的超时，我怎么能中断 ATD 命令（调制解调器仍处于 AT 命令模式，而不是数据模式，所以我想 +++ 不起作用）

有关信息，名义情况下的序列是：

```
send(ATD*99***1#)
recv(CONNECT) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:28:32.303

我终于得到了一些答案： ATD 命令在内部分解为：

*   GPRS 附件
*   切换到数据模式
*   PDP上下文建立

GPRS 调制解调器连接GPRS 的超时时间为5 分钟，不能中断。

PDP 上下文建立的超时时间为 160 秒。这个可以被+++打断。

这当然取决于您使用的调制解调器。

# c - f(x) 的无分支实现：= if x == 0 then 0 else (x * log(x))

> ID：13403333
> 
> 赞同：7
> 
> 时间：2012-11-15T17:54:00.723
> 
> 标签：c, optimization, nan, logarithm, branch-prediction

我有这个 C 函数：

```
double f(int x)
{
    if (x <= 0)
        return 0.0;
    else
        return x * log(x);
} 
```

我在一个紧密的循环中调用它，并且想摆脱分支以查看它是否可以提高性能。

我不能使用这个：

```
double f(int x)
{
    return x * log(x);
} 
```

因为它返回`NaN`时`x == 0`（大约 25% 的时间是正确的。）

有没有另一种方法来实现它，以便它在`0`何时返回`x == 0`，但仍然摆脱分支？

（我不太关心负输入，因为这些是错误，而零则不是。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T18:20:44.397

首先注意*log(1) = 0*。然后你可以把问题写成 x * log(y)，如果 x <= 0 则 y = 1，否则等于 x；如果 y = 1，那么 x 无关紧要，因为 log(y)=0。

像 y = (x > 0)*x + (x <= 0) 这样的东西会这样做，然后：

```
double f(int x) {
    return x * log((x > 0)*x + (x <= 0));
} 
```

这仅取决于 log(1) 和四个整数操作是否比分支差。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T18:02:20.703

编译器扩展可以在这里提供帮助。在 GCC 中，您可以这样做：

```
if(__builtin_expect(x > 0, 1)) {
    return x * log(x);
}
return 0.0; 
```

然后 GCC 将生成有利于`x > 0 == 1`分支的机器代码。

如果您不关心负数，那么您可以将`x == 0`其视为不太可能的分支：

```
if(__builtin_expect(x == 0, 0)) {
    return 0.0;
}
return x * log(x); 
```

如果您不在 GCC 上，您应该检查编译器的文档，看看它是否提供了类似的功能。

请注意，它仍然不是无分支的。只是可能的分支需要更少的时间。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-15T21:10:30.197

任何无分支代码都必须包含计算`x * log(x)`以涵盖“正常”情况。

因此，在尝试提出无分支代码之前，请先测量`x * log(x)`单独的速度。除非它比您拥有的代码快得多，否则这里没有什么重要的收获。我怀疑它不会。

# java - Java URL 在计时器上抓取股票报价

> ID：13403334
> 
> 赞同：1
> 
> 时间：2012-11-15T17:54:02.363
> 
> 标签：java, url, timer, finance

有人建议我将其发布在 stackoverflow 而不是 stackexchange 中，所以我来了。我正在尝试制作一个简单的股票代码。只是尝试空闲时间。无论如何，我试图`main()`每 5 秒（或任何时间）简单地运行以下部分：

此代码有效：

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
public static void main(String[] args) throws Exception {
String[] stocks={"GOOG","MSFT"}; //
    URL yahoofinance = new URL("http://finance.yahoo.com/d/quotes.csv? 
s="+stocks[0]+"+"+stocks[1]+"&f=hg");
    URLConnection yc = yahoofinance.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
          in.close();
}
} 
```

现在，我尝试将上述内容合并到下面的时间程序中。曾尝试抛出异常并玩弄，`try-catch`但此时我已经脱离了我的元素。让我知道。

```
import java.util.Timer;
import java.util.TimerTask;
import java.net.*;
import java.io.*;

public class StockPrinter {

public static void main(String[] args) throws Exception {
    //1- Taking an instance of Timer class.
    Timer timer = new Timer("Printer");

    //2- Taking an instance of class contains your repeated method.
    MyTask t = new MyTask();

    //TimerTask is a class implements Runnable interface so
    //You have to override run method with your certain code black

    //Second Parameter is the specified the Starting Time for your timer in
    //MilliSeconds or Date

    //Third Parameter is the specified the Period between consecutive
    //calling for the method.

    timer.schedule(t, 0, 2000);

}
}

class MyTask extends TimerTask {  /*extends implies that MyTask has all    
variables/properties of TimerTask */
//times member represent calling times.
private int times = 0;

public void run() {
   // String[] stocks={"GOOG","MSFT"};
    times++;

    if (times <= 5) {

 String[] stocks={"GOOG","MSFT"}; //
    URL yahoofinance = new URL("http://finance.yahoo.com/d/quotes.csv?        

s="+stocks[0]+"+"+stocks[1]+"&f=hg");
     URLConnection yc = yahoofinance.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
          in.close();        

    } else {
        System.out.println("Timer stops now...");

        //Stop Timer.
        this.cancel();
        System.exit(0); //added:should quit program

    }
}
} 
```

注意：我已经从 Java 的网站或某些论坛中获取了这些代码的主要部分，因此如果有任何被识别，我深表歉意。无论如何都不会把繁重的工作当作我自己的。只是想让这个工作。以下是编译错误：

```
StockPrinter.java:43: unreported exception java.net.MalformedURLException; must
be caught or declared to be thrown
    URL yahoofinance = new URL("http://finance.yahoo.com/d/quotes.csv?s="+st
ocks[0]+"+"+stocks[1]+"&f=hg");
                       ^
StockPrinter.java:44: unreported exception java.io.IOException; must be caught o
r declared to be thrown
    URLConnection yc = yahoofinance.openConnection();
                                                  ^
StockPrinter.java:46: unreported exception java.io.IOException; must be caught o
r declared to be thrown
                                yc.getInputStream()));
                                                 ^
StockPrinter.java:48: unreported exception java.io.IOException; must be caught o
r declared to be thrown
    while ((inputLine = in.readLine()) != null)
                                   ^
StockPrinter.java:50: unreported exception java.io.IOException; must be caught o
r declared to be thrown
          in.close();
                  ^
5 errors 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:06:57.543

这对我有用：

```
 try
        {
            String[] stocks =
            {
                "GOOG", "MSFT"
            }; //
            URL yahoofinance = new URL("http://finance.yahoo.com/d/quotes.csv?s=" + stocks[0] + "+" + stocks[1] + "&f=hg");
            URLConnection yc = yahoofinance.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    yc.getInputStream()));
            String inputLine;
            while ((inputLine = in.readLine()) != null)
            {
                System.out.println(inputLine);
            }
            in.close();
        } catch (IOException ex)
        {
            System.out.println("Oops bad things happens");
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:15:29.877

您在“MyTask”中定义的运行方法不会抛出任何异常。但是，它执行的代码确实会引发异常，例如“new URL()”。

它在 Main 中工作的原因是因为它可以重新抛出任何异常。

由于这些异常没有得到处理，编译器（正确地）抱怨它。

您需要用 try/catch 块包围有问题的调用。例如：

```
URL yahoofinance = null;
try{
  yahoofinance = new URL( "http://finance.yahoo.com/d/quotes.csv?" );
} catch( MalformedURLException ex ) {
  // print error or throw a new error or whatever
  throw new Error( "I cannot deal with this problem" );
} 
```

对帖子中的每个编译异常执行类似的操作。

# wcf - 将 WCF RIA 服务类库添加到 Silverlight 5 应用程序

> ID：13403335
> 
> 赞同：0
> 
> 时间：2012-11-15T17:54:04.873
> 
> 标签：wcf, wcf-ria-services, silverlight-5.0

尝试在 VS 2010 中将**WCF RIA 服务类库**添加到我的 SL5 应用程序，但是一旦我在类库属性中设置**WCF RIA 服务链接**，项目无法构建，并出现大量“找不到类型或命名空间名称‘QueryResult’”， 'EntitySet'、EntityQuery' 错误...

我正在关注 MSDN 演练[演练：创建 RIA 服务类库](http://msdn.microsoft.com/en-us/library/ee707351%28v=vs.91%29.aspx)试图将我的 WPF 应用程序的子集移植到 SL5，因此我首先创建了一个 SL5 应用程序，其中 RIA 复选框未选中，它创建了两个项目：

*   MySLApp (Silverlight 5)
*   MySLApp.Web (.NET 4)

完成后，我添加了**WCF RIA Services 类库**，该类库创建了另外两个项目：

*   MySLAppWCF (Silverlight 5)
*   MySLAppWCF.Web (.NET 4)

在 MySLAppWCF.Web 中，我创建了一个**ADO .NET 实体数据模型**，并使用来自数据模型的实体添加了一个**域服务类。**此时所有这些新项目都很好，因此我在 MySLApp 项目中添加了对 MySLAppWCF 的引用，并在**MySLApp.Web**中**添加**了**对****MySLAppWCF.Web**的引用，但完成所有这些的最后一步是设置**WCF RIA 服务链接**在**MySLAppWCF**到**MySLAppWCF.Web**中，但是一旦我这样做了，就会出现许多“找不到类型或命名空间”错误。我检查了图书馆中的参考资料，那里有参考资料。************`System.ServiceModel`************

 ******关于如何让所有这些工作的任何想法？

编辑：我一直在挖掘并发现了一些关于添加对`System.ServiceModel.DomainServices.Client`位于 RIA SDK 中的库的引用的东西，所以我这样做了，它处理了原始错误，但现在我得到了`WebDomainClient`并且即使在添加引用之后也`DomainServiceFault`没有在我的**MySLAppWCF**项目中找到也到`System.ServiceModel.DomainServices.Client`那里，这两个似乎在那个命名空间中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:37:26.783

两者`WebDomainClient`都`DomainServiceFault`在 System.ServiceModel.DomainServices.Client.Web 中定义（通常位于 C:\Program Files (x86)\Microsoft SDKs\RIA Services\v1.0\Libraries\Silverlight\System.ServiceModel.DomainServices.Client.Web .dll）
您还需要添加对此程序集的引用。

让我断言您的设计可能会给您带来一些问题，有两个不同的站点（一个托管 SL 应用程序，一个托管域服务）这是不寻常的，如果不需要的话，可能会给您带来交叉请求问题我建议您将 MySLAppWCF.Web 转换为普通 DLL 并从您的主机中引用它。

另外，请注意 MySLAppWCF.Web 的 web.config，VS 已对其进行了修改，以便使用所需的 DomainServiceModule。******

# javascript - 重新制作 jQuery 表单验证

> ID：13403340
> 
> 赞同：0
> 
> 时间：2012-11-15T17:54:23.310
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试通过（http://jorenrapini.com/blog/javascript/the-simple-quick-and-small-jquery-html-form-validation-solution）重新制作一个 jQuery 脚本。该脚本正在检查是否填写了 from ，如果没有填写，则会出现错误消息。

我想要做的是只在填写两个表单输入字段之一时收到错误消息，如果它们都没有，那么它们应该被忽略。表单字段被命名为“firstinput”和“secondinput”（您可以在代码中看到它们的 id）。

```
$(document).ready(function(){
    // Place ID's of all required fields here.
    required = ["firstinput", "secondinput"];
    // If using an ID other than #email or #error then replace it here
    email = $("#email");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field.";

    emailerror = "Please enter a valid e-mail.";

    $("#theform").submit(function(){    
        //Validate required fields
        for (i=0;i<required.length;i++) {
            var input = $('#'+required[i]);
            if ((input.val() == "") || (input.val() == emptyerror)) {
                input.addClass("needsfilled");
                input.val(emptyerror);
                errornotice.fadeIn(750);
            } else {
                input.removeClass("needsfilled");
            }
        }

        // Validate the e-mail.
        if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
            email.addClass("needsfilled");
            email.val(emailerror);
        }

        //if any inputs on the page have the class 'needsfilled' the form will not submit
        if ($(":input").hasClass("needsfilled")) {
            return false;
        } else {
            errornotice.hide();
            return true;
        }
    });

    // Clears any fields in the form when the user clicks on them
    $(":input").focus(function(){       
       if ($(this).hasClass("needsfilled") ) {
            $(this).val("");
            $(this).removeClass("needsfilled");
       }
    });
}); 
```

任何人都可以帮助我解决问题，我将非常感激。/一个花了很多时间解决这个问题但没有运气的女孩:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:03:26.490

我会将您的 for 循环包装在一个条件中，该条件评估一个或另一个是否具有值。

```
if($("#field1").val() == "" && $("#field2").val() == ""){
//Ignore
}else{
//Do something
}

$(document).ready(function(){
    // Place ID's of all required fields here.
    required = ["firstinput", "secondinput"];
    // If using an ID other than #email or #error then replace it here
    email = $("#email");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field.";

    emailerror = "Please enter a valid e-mail.";

    $("#theform").submit(function(){    
        //Validate required fields
      if($("#firstinput").val() != "" || $("#secondinput").val() != "")
      {
        for (i=0;i<required.length;i++) {
            var input = $('#'+required[i]);
            if ((input.val() == "") || (input.val() == emptyerror)) {
                input.addClass("needsfilled");
                input.val(emptyerror);
                errornotice.fadeIn(750);
            } else {
                input.removeClass("needsfilled");
            }
        }
      }
        // Validate the e-mail.
        if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
            email.addClass("needsfilled");
            email.val(emailerror);
        }

        //if any inputs on the page have the class 'needsfilled' the form will not submit
        if ($(":input").hasClass("needsfilled")) {
            return false;
        } else {
            errornotice.hide();
            return true;
        }
    });

    // Clears any fields in the form when the user clicks on them
    $(":input").focus(function(){       
       if ($(this).hasClass("needsfilled") ) {
            $(this).val("");
            $(this).removeClass("needsfilled");
       }
    });
}); 
```

# python - 在保存两个对象时，Django ForeignKey 关系没有正确保存

> ID：13403343
> 
> 赞同：2
> 
> 时间：2012-11-15T17:54:32.467
> 
> 标签：python, django, django-models, model, foreign-keys

我有两个代表一对多关系的模型。InterestRateCurve 对象可以有许多 InterestRate 对象。问题是，当我有一个创建两条曲线的函数时，每条曲线都有一个速率，第二条曲线的速率会覆盖第一条曲线的速率。所以，我最终在数据库中有两行曲线和一行利率。当我执行一个保存一条曲线和一个速率的程序，然后执行一个单独的程序以保存另一条曲线的速率时，一切都很好。

我使用 Python 2.7 和 Django 1.4。

楷模：

```
class InterestRate(models.Model):
    type = models.CharField(max_length=20)
    term = modelFields.tgTimePeriodField(max_length=20)
    numTerms = models.IntegerField()
    mid = models.FloatField()
    curve = models.ForeignKey('InterestRateCurve')

    class Meta:
        unique_together = ('type', 'term', 'numTerms', 'curve')

    def __unicode__(self):
        return "%s/%s/%s/%s" % (self.type, self.term, self.numTerms, self.curve)

    def __str__(self):
        return "%s/%s/%s/%s/%s" % (self.type, self.term, self.numTerms, self.mid, self.curve)

class InterestRateCurve(models.Model):
    ccy = modelFields.tgCurrencyField(max_length=20)
    index = models.CharField(max_length=20)
    term = modelFields.tgTimePeriodField(max_length=20)
    numTerms = models.IntegerField()
    asOf = modelFields.tgDateField()
    cvid = models.CharField(max_length=20, blank=True, default='')
    #rates needs to be explicitly maintained inside class for convenience
    rates = []

    class Meta:
        unique_together = ('ccy', 'index', 'term', 'numTerms', 'asOf', 'cvid')

    def __unicode__(self):
        return "%s/%s/%s/%s/%s/%s" % (self.ccy, self.index, self.term, \
                                      self.numTerms, self.asOf, self.cvid)

    def save(self):
        try:
            curve = InterestRateCurve.objects.get(ccy=self.ccy, index=self.index,\
                                                  term=self.term, numTerms=self.numTerms,\
                                                  asOf=self.asOf, cvid=self.cvid)
            #Delete all rates before saving the new rates
            oldRates = curve.interestrate_set.all()
            for oldRate in oldRates:
                oldRate.delete()
            for rate in self.rates:
                rate.curve = curve
                rate.save()
        except InterestRateCurve.DoesNotExist:
            super(InterestRateCurve, self).save()
            curve = InterestRateCurve.objects.get(ccy=self.ccy, index=self.index,\
                                                  term=self.term, numTerms=self.numTerms,\
                                                  asOf=self.asOf, cvid=self.cvid)
            for rate in self.rates:
                rate.curve = curve
                rate.save()

    def addRate(self, rate):
        rate.curve = self
        exists = False
        for r in self.rates:
            if r.type == rate.type:
                if r.term == rate.term:
                    if r.numTerms == rate.numTerms:
                        exists = True
                        continue
        if exists == False:
            self.rates.append(rate) 
```

以下代码工作正常：

```
 date = tgDate(month=9,day=12,year=2011)
        curve = InterestRateCurve(ccy='USD', index='LIBOR', term='M', 
                                  numTerms=3, asOf=self.asOf, cvid='TESTSAVE2CURVES')
        curve.save()
        curve = InterestRateCurve.objects.get(ccy='USD', index='LIBOR', term='M', 
                                              numTerms=3, asOf=date, cvid='TESTSAVE2CURVES')
        rate = InterestRate(term='M', numTerms=1, type='Deposit', mid=0.01, curve=curve)
        curve.addRate(rate)
        curve.save() 
```

此执行导致保存一条曲线和一种速率。

在单独的执行中，我运行：

```
 date = tgDate(month=9,day=13,year=2011) #DATE DIFFERS
        curve = InterestRateCurve(ccy='USD', index='LIBOR', term='M', 
                                   numTerms=3, asOf=date, cvid='TESTSAVE2CURVES')
        curve.save()
        curve = InterestRateCurve.objects.get(ccy='USD', index='LIBOR', term='M', 
                                              numTerms=3, asOf=date, cvid='TESTSAVE2CURVES')
        rate = InterestRate(term='M', numTerms=1, type='Deposit', mid=0.01)
        curve.addRate(rate)
        curve.save() 
```

此执行导致另一条曲线和另一个速率被保存。

但是，以下执行无法正常工作：

```
 def testSave2Curves(self):
        date = tgDate(month=9,day=12,year=2011)
        curve = InterestRateCurve(ccy='USD', index='LIBOR', term='M', 
                                  numTerms=3, asOf=date, cvid='TESTSAVE2CURVES')
        curve.save()
        curve = InterestRateCurve.objects.get(ccy='USD', index='LIBOR', term='M', 
                                              numTerms=3, asOf=date, cvid='TESTSAVE2CURVES')
        rate = InterestRate(term='M', numTerms=1, type='Deposit', mid=0.01, curve=curve)
        curve.addRate(rate)
        curve.save()
        date1 = tgDate(month=9,day=13,year=2011)
        curve1 = InterestRateCurve(ccy='USD', index='LIBOR', term='M', 
                                   numTerms=3, asOf=date1, cvid='TESTSAVE2CURVES')
        curve1.save()
        curve1 = InterestRateCurve.objects.get(ccy='USD', index='LIBOR', term='M', 
                                               numTerms=3, asOf=date1, cvid='TESTSAVE2CURVES')
        rate1 = InterestRate(term='M', numTerms=1, type='Deposit', mid=0.01)
        curve1.addRate(rate1)
        curve1.save() 
```

这导致保存了两条曲线，但只保存了一个速率。似乎第二个速率会覆盖先前保存的第一个速率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:03:22.060

问题是`rates = []`作为 的类变量的规范`InterestRateCurve`。由于这个定义，每个对象`InterestRateCurve`访问相同的费率列表。

在示例中创建第一条曲线和速率后，`InterestRateCurve.rates`包含创建的速率。然后创建第二条曲线并保存。`InterestRateCurve.save()`被执行，跳转到`except`分支并执行：

```
for rate in self.rates:
    rate.curve = curve
    rate.save() 
```

还记得`self.rates`(= `InterestRateCurve.rates`) 包含您的第一利率吗？循环将此汇率的外键设置为您的第二条曲线并保存。现在，您的第一条曲线不再具有相关比率。你的第一条曲线的比率现在属于第二条曲线。

之后，您创建第二个汇率，其属性与您的第一个汇率完全相同。由于您在`InterestRate`模型中指定：

```
class Meta:
    unique_together = ('type', 'term', 'numTerms', 'curve') 
```

... 只能有一个具有完全相同属性的速率。我不确定是旧的被删除了还是新的没有保存。但是，结果是您在数据库中只有一个速率对象，属于您的第二条曲线。

希望你明白我的意思。你应该看看 Python 的`pdb`模块。那是一个调试器，它允许您单步执行您的代码，并且对此类问题非常有帮助。

# java - 无法释放 Java FileLock

> ID：13403345
> 
> 赞同：0
> 
> 时间：2012-11-15T17:54:47.417
> 
> 标签：java, nio, filechannel, filelock, randomaccessfile

我没有与 nio 合作太多，并且在发布 FileLock 时遇到了一些麻烦。基本上，在 JVM-A 中，我在一个看起来像这样的文件上有一个不可共享的写锁：

```
File lockfile = new File("m.lock");
RandomAccessFile writeFile = new RandomAccessFile(lockfile, "rw");
FileChannel writeChannel = writeFile.getChannel();
FileLock writeLock = writeChannel.tryLock(0L, Long.MAX_VALUE, false); 
```

然后在 JVM-B 中，我尝试在同一个文件上创建一个共享读锁，看起来像这样：

```
File lockfile = new File("m.lock");
RandomAccessFile readFile = new RandomAccessFile(lockfile, "r");
FileChannel readChannel = readFile.getChannel();
FileLock readLock = readChannel.tryLock(0L, Long.MAX_VALUE, true);  
while (readLock == null) {
    System.out.println("unable to get lock");
    Thread.sleep(5000);
    readLock = readChannel.tryLock(0L, Long.MAX_VALUE, true);
} 
```

我的问题是 JVM-B 永远循环并且永远不会获得可共享的读锁。即使 JVM-A 存在`writeLock.release();` `writeChannel.close();`并且`writeFile.close();`即使 JVM-A 退出并且不再运行，JVM-B 仍然无法获得文件的可共享读锁。

那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:03:55.943

我的错误大家，我发现了我的错误。我的代码如下所示：

```
readChannel.tryLock(0L, Long.MAX_VALUE, true); 
```

而不是这个：

```
readLock = readChannel.tryLock(0L, Long.MAX_VALUE, true); 
```

我错过了变量赋值。

# c# - Dotless - 无法使用 MVC 捆绑在单独的文件中引用较少的变量

> ID：13403346
> 
> 赞同：9
> 
> 时间：2012-11-15T17:54:50.240
> 
> 标签：c#, less, bundling-and-minification, dotless

我希望我没有创建重复的主题，但是我已经搜索了两天，找不到解决方案。

我们正在**MVC4**中启动一个新项目，并且加载了较少版本的**引导**程序。我遇到的问题是当我尝试引用`bootstrap.less`、 my`global.less`或当前文件之外的任何内容中的某些类或变量时。我可以在当前文件的顶部创建一个变量并很好地使用它，但是如果我想使用单独文件中的某些东西，我必须这样`@import`做。如果我的整个应用程序的 less 文件都在一个文件中，这会很好，但我必须将 4+ 个文件 @import 到我创建的每个 page/sectionless 文件中。

[我从https://gist.github.com/2002958](https://gist.github.com/2002958)添加了 MVC4 捆绑添加

正如我所看到的，问题是每个文件都被独立评估并转换为css。我试图简化该过程并从 less 包中的所有文件构建大量的 less 字符串，然后将它们转换（`Less.Parse(lessString)`），但我收到了错误：

> “您正在导入一个无法找到的以 .less 结尾的文件”

所以这是我的终极问题：有没有一种方法可以在不引用物理文件的情况下简单地解析更少的字符串？那将解决我的问题。

如果由于某种奇怪的原因而无法做到这一点，是否有一个我不知道的组件或流程已经到位，它实际上在缩小文件之前将文件捆绑在一起？

任何关于这个主题的光都将不胜感激，因为我正在绕着圈子试图让它发挥作用。

这个问题也发布在 Dotless 组：
[https ://groups.google.com/forum/?fromgroups#!topic/dotless/j-8OP1dNjUY](https://groups.google.com/forum/?fromgroups#!topic/dotless/j-8OP1dNjUY)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-26T07:36:17.473

这个解决方案对我有用：

我有两个 NuGet 包：
- `dotless`
-`dotless adapter for system.web.optimization`

在我的`web.config`中，我有以下几行：

```
<configuration>
    <configSections>
        <section name="dotless" 
                 type="dotless.Core.configuration.DotlessConfigurationSectionHandler, dotless.Core" />
    </configSections>
    <system.web>
        <httpHandlers>
            <add path="*.less"
                 verb="GET"
                 type="dotless.Core.LessCssHttpHandler, dotless.Core" />
        </httpHandlers>
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <handlers>
            <add name="dotless" 
                 path="*.less" 
                 verb="GET" 
                 type="dotless.Core.LessCssHttpHandler,dotless.Core" 
                 resourceType="File" 
                 preCondition="" />
        </handlers>
    </system.webServer>
    <dotless minifyCss="true" cache="true" web="false" disableParameters="true" />
</configuration> 
```

请注意，您应该根据需要定义无点参数。

在`BundleConfig.cs`：

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new LessBundle("~/bundles/styles/").Include("~/Content/site.less"));
    BundleTable.EnableOptimizations = true; // false if you want to debug css
} 
```

最后，`Site.less`：

```
/* I have to redefine some bootstrap mixins and variables,
   so importing bootstrap and extending happens here: */
@import "bootstrap-extends.less";

/* all other needed less should be included here too, for example:
   @import "admin.less";
   @import "controls.less";
   etc
*/

body {

} 
```

`site.less`并且`bootstrap-extends.less`位于 Content 文件夹内。 `bootstrap-extends`包含所有需要`@import`的指令，这些指令通常列在`~/Content/bootstrap/bootstrap.less`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T22:46:19.050

您是否研究过[LESS 捆绑变压器](http://www.nuget.org/packages/BundleTransformer.Less)？

# matlab - 为什么 MATLAB 图像处理工具箱在 imhist 中不使用相等的 bin 大小？

> ID：13403348
> 
> 赞同：0
> 
> 时间：2012-10-15T11:40:34.427
> 
> 标签：matlab, histogram

根据 MA​​TLAB 的文档，$p$-th bin 包含 $A\frac{(p-1.5)}{n-1}\leq x<A\frac{p-0.5}{n-1}$,其中 $x$ 是像素强度，$n$ 是 bin 数量。

据我所知，$A$ 是一个比例因子，它是所用数据类型的最大值（例如，如果 $A=1$，我们考虑使用 $x\in[0,1]$ 的图像）。

我不太明白，为什么我们在表达式中使用常量；对于第一个 bin（假设 MATLAB 将 $p=1$ 而不是 $p=0$ 作为第一个 bin），我们将值放在 $x\in[\frac{-0.5}{(n-1)}, \ frac{0.5}{(n-1)}]$，但我们的值在 $x\in[0,1]$ 之间，因此 bin 的有效宽度仅为“正常” bin 的一半（同样适用于最后一个垃圾箱）。为什么 MATLAB 不对 $p\in[0,n-1]$ 使用 $A\frac{p}{n-1}\leq x<A\frac{p+1}{n-1}$？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:16:53.013

答案实际上很简单，并且与 MATLAB 无关：如果您等距划分域（并选择这些值作为相应量化级别的**代表值**）并在每个这些间隔端点的质心处选择阈值，您将获得阈值MATLAB 使用。

# c# - 从WPF中的Window2设置Window1中组合框的Selectedindex？

> ID：13403356
> 
> 赞同：0
> 
> 时间：2012-11-15T17:55:29.783
> 
> 标签：c#, wpf, combobox

我有两个窗口（表格）。在第一个窗口中我有一个组合框，在第二个窗口中我有一个按钮。单击窗口 2 中的按钮时，如何设置窗口 1 中组合框的 selectedindex？

我试过这个没有成功：

在窗口 1 中：

```
public int OutputCombostr
    {
        get { return this.OutputCombo.SelectedIndex; }
        set { this.OutputCombo.SelectedIndex = value; }
    } 
```

在窗口 2 中：

```
 private void Button_Click_2(object sender, RoutedEventArgs e)
            {
                MainWindow firstwindow = new MainWindow();

                firstwindow.OutputCombostr = 3;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:02:16.813

您需要了解如何获取对`MainWindow`类的现有实例的引用。如果这是 WPF 并且该窗口确实是您的启动对象，那么您应该能够通过`Application.MainWindow`（而不是更新它）访问它。

或者，您可能会研究类似事件聚合器模式的东西。这是一个可以用作起点的 SO 问题：[尝试理解事件聚合器模式](https://stackoverflow.com/questions/3436853/trying-to-understand-the-event-aggregator-pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:16:08.337

使用 MVVM 对您非常有用，但您也可以使用以下代码获得对主窗口的引用：`Application.Current.MainWindow`或获取所有应用程序的窗口：`Application.Current.Windows`。

要访问组合框，您首先需要在 xaml 代码中为其命名：`<ComboBox x:Name="comboBox">...`然后，从第二个窗口进行强制转换`(Application.Current.MainWindow as MainWindow).comboBox.IsChecked`，假设您的主窗口的类是 name `MainWindow`。另外我认为最好使用 MVVM 模式来解决这个问题。

希望这可以帮助你...

# python - Python 全局变量似乎不能跨模块工作

> ID：13403357
> 
> 赞同：11
> 
> 时间：2012-11-15T17:55:29.300
> 
> 标签：python, global-variables

## 代码

我想在其他模块中使用全局变量，并将其值的更改“传播”到其他模块。

一个.py：

```
x="fail"
def changeX():
    global x
    x="ok" 
```

b.py：

```
from a import x, changeX
changeX()
print x 
```

如果我运行 b.py，我希望它打印“ok”，但它确实打印“fail”。

## 问题

1.  这是为什么？
2.  我怎样才能让它打印“ok”呢？

（运行 python-2.7）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T17:59:02.427

简而言之：你不能在不修改代码的情况下让它打印“ok”。

`from a import x, changeX`相当于：

```
import a
x = a.x
changeX = a.changeX 
```

换句话说，`from a import x`它不会创建一个`x`间接指向 的，而是在模块中`a.x`创建一个新的全局变量，其*当前*值为。由此可见，后来的变化不影响。`x``b`*`a.x``a.x``b.x`*

 *To make your code work as intended, simply change the code in `b.py` to `import a`:

```
import a
a.changeX()
print a.x 
```

You will have less cluttered imports, easier to read code (because it's clear what identifier comes from where without looking at the list of imports), less problems with circular imports (because not all identifiers are needed at once), and a better chance for tools like `reload` to work.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T17:26:30.037

You can also add another import statement after `changeX`. This would turn the code from b.py into

```
from a import x, changeX
changeX()
from a import x
print x 
```

This illustrates that by calling `changeX`, only `x` in module `a` is changed. Importing it again, binds the updated value again to the identifier `x`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:17:23.253

Also you can use mutable container, for example list:

a.py

```
x = ['fail']

def changeX():
    x[0] = 'ok' 
```

b.py

```
from a import changeX, x

changeX()
print x[0] 
```*

# java - Android 下载列表器

> ID：13403359
> 
> 赞同：1
> 
> 时间：2012-11-15T17:55:33.900
> 
> 标签：java, android

有什么办法可以知道下载成功与否。我正在使用以下代码从其他手机 p2p 下载文件，但有时其他用户超出了 wifi 范围。我想知道源超出范围，因此当时无法下载。

有什么听众类型的东西可以帮助我吗？

```
Uri uri=Uri.parse(downLoadLink);

Environment
  .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)
  .mkdirs();

lastDownload = mgr.enqueue(new DownloadManager.Request(uri)
  .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI | DownloadManager.Request.NETWORK_MOBILE)
  .setAllowedOverRoaming(false)
  .setTitle(aryToReturn.get(position).name)
  .setDescription("File Downloding...")
  .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,aryToReturn.get(position).name)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:20:48.753

我已经使用以下代码完成了此操作

```
 private class downloadTask extends AsyncTask<String, Void, String> {
  ProgressDialog dialog = new ProgressDialog(webServices.this);
  @Override
  protected String doInBackground(String... params) {

      //Uri uri=Uri.parse("http://commonsware.com/misc/test.mp4"); 
      Uri uri=Uri.parse(downLoadLink);

        Environment
          .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)
          .mkdirs();

        lastDownload=
          mgr.enqueue(new DownloadManager.Request(uri)
                      .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI |
                                              DownloadManager.Request.NETWORK_MOBILE)
                      .setAllowedOverRoaming(false)
                      .setTitle(downloadFileName)
                      .setDescription("File Downloding...")
                      .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,
                              downloadFileName));
                   // Log.d("-->", String.valueOf(lastDownload));
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return "Executed";
  }      

  @Override
  protected void onPostExecute(String result) {

     dialog.dismiss();
    Cursor c=mgr.query(new DownloadManager.Query().setFilterById(lastDownload));

    if (c==null) {
      //Toast.makeText(this, "Download not found!", Toast.LENGTH_LONG).show();
    }
    else {
      c.moveToFirst();
      Log.e("yes", statusMessage(c));
     // Toast.makeText(this, statusMessage(c), Toast.LENGTH_LONG).show();
    }

  }

  @Override
  protected void onPreExecute() {
     dialog.setMessage("Please wait...");
        dialog.setCancelable(false);
        dialog.show();
     }

  @Override
  protected void onProgressUpdate(Void... values) {
  }

  }

private String statusMessage(Cursor c) {
String msg="???";

switch(c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS))) {
  case DownloadManager.STATUS_FAILED:
    msg="Download failed!";
    break;

  case DownloadManager.STATUS_PAUSED:
    msg="Download paused!";
    break;

  case DownloadManager.STATUS_PENDING:
    msg="Download pending!";
    break;

  case DownloadManager.STATUS_RUNNING:
    msg="Download in progress!";
    break;

  case DownloadManager.STATUS_SUCCESSFUL:
    msg="Download complete!";
    break;

  default:
    msg="Download is nowhere in sight";
    break;
}

return(msg); 
```

}

# sql-server - SQL Server 重写左连接

> ID：13403360
> 
> 赞同：2
> 
> 时间：2012-11-15T17:55:39.083
> 
> 标签：sql-server

我在 SQL Server 中遇到了一个更大的查询问题，我追溯到这部分代码没有按预期执行。

```
SELECT item_name,item_num,rst_units
FROM tbl_item left join tbl_sales_regional on item_num=rst_item
WHERE rst_month=7 and rst_customer='AB123' 
```

第一个表 (tbl_item) 有 10,000 条记录。第二个表 (tbl_sales_regional) 有 83 个用于显示的标准。

执行计划不是返回 10,000 条记录和 9,917 个空值，而是显示 SQL Server 已重写为内部连接，因此返回 83 个结果。

为了达到预期的结果，我必须加入一个子查询。有人可以解释为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:59:30.693

不确定哪些字段属于哪里，但您的情况似乎有一些`tbl_sales_regional`字段`WHERE`。

将它们移动到`ON`子句中：

```
SELECT  item_name, item_num, rst_units
FROM    tbl_item
LEFT JOIN
        tbl_sales_regional
ON      rst_item = item_num
        AND rst_month = 7
        AND rst_customer = 'AB123' 
```

该子句对连接的结果进行操作，因此对于连接返回的任何记录，`WHERE`这些条件不可能成立，因为不能等于任何东西。`NULL``tbl_sales_regional``NULL`

这就是优化器将您的查询转换为内部联接的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:00:13.933

无论左连接如何，您在`WHERE`子句中的任何条件都适用，从而有效地使其成为内连接。

您需要将其更改为：

```
SELECT item_name,item_num,rst_units
FROM tbl_item left join tbl_sales_regional on item_num=rst_item
AND rst_month=7 and rst_customer='AB123' 
```

# php - 如何使用 MySqli 验证登录

> ID：13403363
> 
> 赞同：0
> 
> 时间：2012-11-15T17:55:54.943
> 
> 标签：php, mysqli

我正在尝试使用 php 和 mysqli 创建一个简单的登录，但一直收到错误消息：致命错误：在线 C:\wamp\www\web2\database.php 中的非对象上调用成员函数 prepare() 107

数据库.php

```
 <?php
class Database 
{ 
 public $server = "localhost";
 public $database = "database"; 
 public $user = "root"; 
 public $password = ""; 
 public $row;
 public $result;
 public $sqlExtra = " ORDER BY firstname ASC";
 public $dbLocalHost;

 //call connection method upon constructing 
 public function __construct(){
  $this->createConnection(); 
 }

 //connection to the database
 public function createConnection() 
    { 
     $this->dbLocalhost = new mysqli($this->server, $this->user, $this->password, $this->database)
                or die("could not connect:");

      //mysql_select_db($this->database)
       //
       //  or die("Could not find the database: ".mysql_error());

 } 

    function verifyLogin($email, $password) {

        $query = "SELECT *
                FROM admint
                WHERE email = ?
                AND password = ?
                LIMIT 1";

 107\.               $statement = $this->dbLocalHost->prepare($query);
        if($statement) {
            $statement->bind_param('ss', $email, $password);
            $statement->execute();

            if($statement->fetch()) {
                $statement->close();
                return true;    
            }
            else {
                return false;
            }
        }

    }

    function addElement($table, $firstName, $lastName, $email, $mobile, $password,
                            $faculty, $campus) {

        $query = "INSERT INTO $table (first_name, last_name, email, mobile, password, faculty, campus_location) 
                VALUES('$firstName', '$lastName','$email','$mobile',
                '$password','$faculty','$campus');";

        if($this->connection->query($query)) {
            header('location: regConfirm.php');     
        }

    }

} 

?> 
```

登录.php

```
 <?php
session_start();

require_once 'admin.php';
$admin = new Admin();

if(isset($_GET['status']) && $_GET['status'] == 'loggedout') {
    $admin->logOut();   
}

if($_POST && !empty($_POST['email']) && !empty($_POST['password'])) {

    $valid = $admin->validateUser($_POST['email'], $_POST['password']);

    if($valid) {
        header("location: index.php");  
    }
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login</title>
</head>

<body>
<div id="login">
    <form method="post" action="">
    <h1>Admin Login</h1>
    <p>
        Email: 
        <input type="email" name="email" />
    </p>

    <p>
        Password: 
        <input type="password" name="password" />
    </p>

    <p>
        <input type="submit" value="Login" name="Submit" />
    </p>

    </form>

</div>

</body>
</html> 
```

管理员.php

```
 <?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Description of admin
 *
 * @author Matt
 */
require 'database.php';
class admin {

   function logOut() {
        if(isset($_SESSION['status'])) {
            unset($_SESSION['status']);

            if(isset($_COOKIE[session_name()])) {
                setcookie(session_name(), '', time() - 1000);
                session_destroy();  
            }
        }
    }

    function validateUser($email, $password) {
        $db = new Database();

        $verified = $db->verifyLogin($email, $password);

        if($verified) {
            $_SESSION['status'] = 'authorised';
            //header("location: index.php");
            return true;    
        }
        else {
            return false;   
        }
    }

    function confirmAdmin() {
        session_start();
        if($_SESSION['status'] != 'authorised')
            header("location: login.php");  
    }
}

?> 
```

很抱歉打扰了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:08:33.590

在数据库->createConnection

```
$this->dbLocalhost = new mysqli($this->server, $this->user, $this->password, $this->database)
            or die("could not connect:"); 
```

需要是

```
$this->dbLocalHost = new mysqli($this->server, $this->user, $this->password, $this->database)
            or die("could not connect:"); 
```

（注意“主机”的情况）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:08:35.103

错字：

```
 $statement = $this->dbLocalHost->prepare($query);
                                      ^--- should be an "h" 
```

php 变量名区分大小写。在您的连接方法中，您使用`dbLocalhost`一个小的`h`.

# .net - 数据类型的数据库不可知模式访问？

> ID：13403369
> 
> 赞同：1
> 
> 时间：2012-11-15T17:56:32.180
> 
> 标签：.net, sql, database-schema

通用的 DbConnection.GetSchema 方法[不提供](http://msdn.microsoft.com/en-us/library/ms254501%28v=vs.90%29.aspx)跨数据库的标准化架构集合，并且[OleDbConnection.GetOleDbSchemaTable](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.getoledbschematable%28v=vs.90%29.aspx)仅在您需要访问更详细的类型信息（如 varchar 的长度和数字类型的精度）之前与数据库无关。

有没有办法以与数据库无关的方式获取此模式信息？我知道数据库之间的数据类型名称会有所不同，但所有 sql 类型都分为几类，即。固定长度、可变长度等，所以这类信息应该可以以与数据库无关的方式访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:32:45.063

好问题。很多原因是大多数数据库供应商没有严格遵守 ANSI 或 ISO 数据库标准。

[在这个 StackOverflow 问题中](https://stackoverflow.com/questions/784900/why-do-no-databases-fully-support-ansi-or-iso-sql-standards)可以找到一个很好的讨论。

# iphone - 如何自定义表格单元格相对于其中图像高度的高度？

> ID：13403371
> 
> 赞同：1
> 
> 时间：2012-11-15T17:56:47.080
> 
> 标签：iphone, objective-c, xcode, uitableview

我有一个 UITableView，我在单元格中显示不同的图像，每个图像都有不同的高度，我如何自定义单元格高度相对于图像的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:01:29.380

实现`UITableViewDelegate`方法`– tableView:heightForRowAtIndexPath:`。请参阅[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)。

例如，如果您正在使用 Interface Builder，请从表视图中右键拖动到控制器本身，在视图控制器的类声明中添加`<UITableViewDelegate>`after `UIViewController`，然后在类`.m`文件中添加如下内容：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
  UIImage *image = imagesArray[indexPath.row];
  return image.size.height + 5; // 5 = margin.
} 
```

# yii - 带有“with”的 Yii 标准产生重复项

> ID：13403375
> 
> 赞同：1
> 
> 时间：2012-11-15T17:56:56.877
> 
> 标签：yii, unique, criteria, yii-components

这是我的标准：

```
$criteria = new CDbCriteria();
$criteria->with = array('userUrls');
$criteria->together = true;
$criteria->compare('userUrls.community_id',Yii::app()->params['currentCommunity']->id);
$criteria->order = 't.weight DESC, t.id DESC';
$urls = Url::model()->findAll($criteria); 
```

我基本上是在尝试`JOIN`通过`MANY_MANY`. 除了在`JOIN`表中我需要一个附加条件（community_id 与给定条件匹配）。

没有`$criteria->together = true;`它在 WHERE 语句中失败。

如果我添加`$criteria->distinct = true;`它仍然会给我重复，因为 JOIN 表中的其他字段在技术上使它们成为“唯一”。

我希望结果基于 URL 字段而不是字段是**唯一**`userUrls`的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:58:28.433

添加`$criteria->group = 't.id';`解决了这一切。这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:04:50.453

尝试更改联接子句。

```
$criteria->join = 'LEFT JOIN'; 
```

# tomcat - tomcat maven插件的嵌入式tomcat实例中的空白页面

> ID：13403377
> 
> 赞同：1
> 
> 时间：2012-11-15T17:56:59.200
> 
> 标签：tomcat, maven, maven-tomcat-plugin

我有一个可以从 Android 客户端或作为 webapp 访问的 Spring 服务器应用程序。当我使用我的 Android 客户端时，一切正常。但是，当我尝试访问 webapp，将其运行到以 tomcat7:run from tomcat maven 插件开头的嵌入式 tomcat（版本 7）中时，我`http://localhost:8080/`在`http://localhost:8080/my-app-name`.

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0-SNAPSHOT</version>
    <configuration>
        <url>http://192.168.1.68:8080/manager</url>
    </configuration>
    <dependencies>      
      <dependency>
         <groupId>mysql</groupId>
         <artifactId>mysql-connector-java</artifactId>
         <version>5.1.9</version>
      </dependency>
   </dependencies>
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:16:06.960

使用现在发布的 2.0 版。然后配置路径

```
<path>/yourpath</path> 
```

检查日志。有任何错误信息吗？

# actionscript-3 - AS3/Flex 仅对 ArrayCollection 应用一次排序

> ID：13403382
> 
> 赞同：0
> 
> 时间：2012-11-15T17:57:15.960
> 
> 标签：actionscript-3, apache-flex, sorting, air, flex4

我有一个`ArrayCollection`用作列表的数据提供者。

该集合存储类型的对象`MyObject`：

```
public class MyObject {
    public var myMap:Dictionary;
} 
```

`myMap`存储键值对，键是 an `integer`，值是字符串。

到目前为止的约束。我现在要做的是根据地图的字段对集合进行排序。

使用我自己`ArrayCollection`的函数确实有效。这就是我实现它的方式：`sort``compareFunction`

```
 var key:int = 15;
    var sort:Sort = new Sort();
    sort.compareFunction = fidSort;
    myCollection.sort = sort;
    myCollection.refresh();

    private function fidSort(a:Object, b:Object, fields:Array = null):int {
        if(a.myMap[key].fieldValue == b.myMap[key].fieldValue) {
            return 0;
        } else if(a.myMap[key].fieldValue > b.myMap[key].fieldValue) {
            return 1;
        } else{
            return -1;
        }
    } 
```

正如我所说，这确实是为了排序。然而，排序（作为集合的一个属性）自然会保留在集合中，除非特别从其中删除，这意味着每次映射中的值`MyObject`发生变化时，它将根据比较函数进行排序。

我需要的是只应用一次排序，之后地图值发生的事情不应该改变集合排序。

我已经尝试过禁用colleciton上的自动更新之类的东西（自然这将不起作用，因为集合不再获得任何更新（确实如此，但它们仅被缓存））。之后，我阅读[了这篇](https://stackoverflow.com/a/6537338/1069487)关于对底层数组进行排序的文章。但是，这似乎不适用于地图，因为我确实收到一个编译错误，说`myMap[key].fieldValue`在`MyObject`.

所以，是的，我在这里有点迷失在太空中。如果有人知道如何实现这一点，非常基本的任务，请告诉我。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:33:09.733

明白了，为了完整起见，我想自己回答这个问题。

如前所述，使用`myCollection.toArray().sort(fidSort)`并没有完全起作用。在这一步中创建的数组确实已经排序，但是集合没有得到排序，即使`refresh()`已被调用。

为了解决这个问题，我们需要直接使用集合的源（当然是一个数组）并对该数组进行排序，而不是从集合中创建一个新数组；

```
 collection.source.sort(fidSort);
  collection.refresh(); 
```

由于我们仍然只对数组进行排序而不将其`Sort`应用于集合本身，因此集合只排序一次，而不管它的数据是否更新。

`collection`编辑：只是为了踢球，在对' 的基础数组进行排序时，无法立即恢复原始项目位置，就像在`ArrayCollection`直接对 an 应用排序并将其设置为 null 以恢复位置时所做的那样。简单的解决方案是预先缓存数组项索引。

# javascript - 在主干视图中删除事件

> ID：13403385
> 
> 赞同：0
> 
> 时间：2012-11-15T17:57:35.643
> 
> 标签：javascript, javascript-events, backbone.js

我正在尝试在我的主干视图中添加一个放置事件，但我无法正确处理。下面是我正在使用的代码，您也可以查看这个[jsfiddle](http://jsfiddle.net/eLLmW/24/)。

```
var View = Backbone.View.extend({

    events: {
        'drop .dropzone': 'drop'
    },

    drop: function(e) {
        e.preventDefault();
        alert('Dropping');
    },

    initialize: function() {},

    render: function() {}
});

$(function() {
    var view = new View({
        el: $('.dropzone');
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:04:19.800

如果您的视图是 el == .dropzone 那么您应该这样做

```
events: {
    'drop': 'drop'
}, 
```

如果您只指定没有选择器的事件类型，它将监听视图根元素上的事件 - 在这种情况下为 $('.dropzone') 。

你在这里做的方式会尝试在 .dropzone 元素的子元素中找到 .dropzone 元素 - 显然它根本找不到这个元素

# php - 尝试在 Codeigniter 中上传照片 - 找不到我的上传文件夹 - 为什么？

> ID：13403388
> 
> 赞同：1
> 
> 时间：2012-11-15T17:57:44.940
> 
> 标签：php, codeigniter

我正在尝试在 CI 注册过程中上传个人资料图片 ($me !== 'experienced' )

这是我的方法......没什么奇怪的

```
function do_upload()
{
    $config['upload_path'] = base_url('/upload_pic/');
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload() )
    {
        $data['message'] = $this->upload->display_errors() . $config['upload_path'];
        $this->load->view('profile_photo_view', $data);
    }
    else
    {
        $data['message'] = $this->upload->data();
        $this->load->view('upload_success', $data);
    }
} 
```

..但它失败了。如您所见，我将上传路径传递给我的失败页面以进行显示，这就是它所显示的内容..

```
The upload path does not appear to be valid. 
http://localhost:8888/MY_SITE/upload_pic 
```

那*是*我的上传文件夹所在的位置。我拥有完整的 777 权限..

..任何想法可能是错的？尾随斜线是否总是会被这样剥离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:18:25.253

`base_url`会给你...等一下...一个网址:)

您需要一个上传**路径**。

```
$config['upload_path'] = '/full/path/to/upload_pic/'; 
```

或者您可以使用相对路径：

```
$config['upload_path'] = '../upload_pic'; 
```

但你必须给它一个路径，而不是一个 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:20:12.777

正如@stormdrain 指出的那样，`base_url()`是否可以获取URL，而不是文件系统路径。尝试：

```
$config['upload_path'] = dirname(FCPATH) . '/upload_pic/'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T18:01:08.443

尝试这个

```
$config['upload_path'] = base_url() . '/upload_pic/'; 
```

或在 index.php 中附加这个

```
define('UPLOADS', 'upload_pic'); 
```

然后将配置设置为

```
$config['upload_path'] = UPLOADS; 
```

# javascript - 向动态函数添加参数

> ID：13403393
> 
> 赞同：-1
> 
> 时间：2012-11-15T17:58:07.543
> 
> 标签：javascript

我有一个创建 html 输入元素的通用 javascript 类。该代码允许我使用 jQuery 的 change 方法将函数作为字符串传递，只要元素的值发生更改，就会调用该函数。我正在使用以下代码：

```
1\.  var changeFunction = "runThisCode()";
2\.  
3\.  var elem = $("<input/>").attr(id: someID, type: "text", size: 20);
4\.  elem.change(function () {
5\.     var fn = new Function(changeFunction);
6\.     fn();
7\.  }); 
```

我想在更改函数中传递元素的 id。有没有办法在第 5 行或第 6 行添加参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:04:34.367

`Function`您可以提供在创建的函数体中可用的参数名称。[jsfiddle](http://jsfiddle.net/KXAf7/)

```
1\.  var changeFunction = "runThisCode(id)";
2\.  
3\.  var elem = $("<input/>").attr(id: someID, type: "text", size: 20);
4\.  elem.change(function () {
5\.     var fn = new Function("id", changeFunction);
6\.     fn(someID);
7\.  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:07:25.420

```
var changeFunction = runThisCode;

var elem = $("<input/>").attr(id: someID, type: "text", size: 20);
elem.change(function () {
    changeFunction(this.id);
}); 
```

真的。无需使用字符串将函数存储在变量中。这很糟糕，我刚刚向您展示的解决方案效果很好。

实际上，如果代码确实按照显示的顺序，您可以执行以下操作：

```
var elem = $("<input/>").attr(id: someID, type: "text", size: 20);
elem.change(runThisCode);

function runThisCode() {
    // 'this.id' gives you the ID.
    // And so does 'someID'.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:24:18.543

为什么不简单地这样做呢？

```
var changeFunction = "runThisCode";
var elem = $("<input/>").attr(id: someID, type: "text", size: 20);
elem.change(function () { window[changeFunction](this.id) }); 
```

如果你不能像这样直接拥有你的 changeFunction ，你可以这样做

```
var changeFunction = changeFunction.slice(0, -2); 
```

删除括号。

# php - 优化 SQL 表以选择注册特定活动的参与者

> ID：13403395
> 
> 赞同：0
> 
> 时间：2012-11-15T17:58:25.363
> 
> 标签：php, mysql, sql, refactoring, backend

我正在用 php 开发一个参与者事件注册网络应用程序，并遇到了以下问题：

我们在大学举办了多项科技盛会活动，约有 4000 名参与者。在登记处，参与者必须报名参加活动（单人/多人）。在某一时刻，管理员必须能够锁定活动，以便参与者无法再注册该活动（意味着活动已经开始）。然后，管理员需要能够打印出所有已注册每个事件的人的列表（锁定后）。

我们想出了这个：

*   “参与者”表中的每个事件都有一个 BOOLEAN 列
*   有一个多选字段作为事件输入的接口
*   implode() 接收到的数组
*   爆炸（）结果
*   设置 foreach explod()ed 事件，针对参与者将 BOOLEAN 设置为 1

因此，当管理员想要打印时，请获取所有参与者，其中 BOOLEAN for event-name 设置为 1

这看起来有点难看，我们希望有人有更好的想法来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:04:28.483

听起来你可以使用一些标准化。“每个事件的布尔列”。所以如果你有 50 个事件，你就有 50 列？拥有一个事件表、一个用户表和一个“events_users”表来链接两者会更有意义，例如：

```
create table events_users (
    user_id int,
    event_id int,
    primary key (user_id, event_id),
    foreign key (user_id) references users (id),
    foreign key (event_id) references events (id)
); 
```

“锁定”字段进入事件表。然后让参与者很容易：

```
select user_id
from events_users
where event_id = XXX 
```

# perl - Perl hash of hashes of hashes...有没有一种“简单”的方法来获取列表末尾的元素？

> ID：13403397
> 
> 赞同：6
> 
> 时间：2012-11-15T17:58:43.173
> 
> 标签：perl, hash-of-hashes

我有一个散列的 Perl 散列......大约 11 或 12 个元素深。请原谅我不重复下面的结构！

一些级别具有固定标签，例如`'NAMES'`，`'AGES'`或类似的标签，因此访问这些级别很好，因为我可以直接使用标签，但我需要遍历其他变量，这会导致一些非常长的语句。这是一组循环的一半示例：

```
foreach my $person (sort keys %$people) {
        foreach my $name (sort keys %{$people->{$person}{'NAMES'}}) {
            foreach my $age (sort keys %{$people->{$person}{'NAMES'}{$name}{'AGES'}}) {
                . . . # and so on until I get to the push @list,$element; part 
```

这只是一个例子，但它遵循我的结构。没有固定名称部分（大写的元素）可能会更短，但在其他地方需要它们以供参考。

我尝试将元素转换为散列以在每个阶段缩短它，例如对于第二个 foreach 我尝试了各种形式：

```
foreach my $name (sort keys %{$person->{'NAMES'}}) 
```

但这没有用。我敢肯定我以前见过类似的东西，所以语义可能不正确。

我研究了有关散列哈希的页面以及对散列及其元素的引用等等，但没有运气。我见过`while each`循环的例子，但它们似乎并不是特别短或更容易实现。也许只有一种不同的方法可以做到这一点，我没有抓住重点。我已经写出完整的`foreach`循环集一次，如果我不必再重复六次左右，那就太好了。

当然，可能没有“简单”的方法，但感谢所有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:12:34.610

`$person`是关键，要缩短内部循环的内容，您需要将值分配给某些东西：

```
foreach my $person_key (sort keys %$people) {
    my $person = $people->{$person_key};
    my $names  = $person->{NAMES};
    foreach my $name (sort keys %$names) { 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T18:37:19.670

您也可以使用**每个**关键字。这绝对应该有所帮助。

```
while( my ($person, $val1) = each(%$people) ) {
    while( my ($name, $val2) = each(%$val1) ) {
        while( my ($age, $val3) = each(%$val2) ) {
            print $val3->{Somekey}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T18:52:38.897

如果您想构建一个更灵活的解决方案，您可以递归地遍历数据树。考虑这个示例数据树（任意深度）：

## 示例数据

```
my %people = (
    memowe => {
        NAMES => {
            memo        => {AGE => 666},
            we          => {AGE => 667},
        },
    },
    bladepanthera => {
        NAMES => {
            blade       => {AGE => 42},
            panthera    => {AGE => 17},
        },
    },
); 
```

根据您的问题，我得出的结论是您只想在叶子上工作（`AGE`在这种情况下为 s ）。因此，可以编写一个递归`traverse`子例程，在它可能以键排序深度优先顺序找到的所有叶子上执行给定的子引用。为方便起见，此子引用获取 leave 本身和哈希键路径：

## 准备工作

```
sub traverse (&$@) {
    my ($do_it, $data, @path) = @_;

    # iterate
    foreach my $key (sort keys %$data) {

        # handle sub-tree
        if (ref($data->{$key}) eq 'HASH') {
            traverse($do_it, $data->{$key}, @path, $key);
            next;
        }

        # handle leave
        $do_it->($data->{$key}, @path, $key);
    }
} 
```

我认为从内联的评论中可以很清楚地知道这个人是如何工作的。如果您愿意，在所有节点上执行 coderef 而不是只在叶子上执行 coderef 不会有太大的变化。请注意，为了方便起见，我在这里特别添加了一个*原型*，因为它很容易`traverse`与众所周知的`map`或`grep`语法一起使用：

## 在你的数据上执行东西

```
traverse { say shift . " (@_)" } \%people; 
```

另请注意，它适用于哈希引用，我们`@path`使用隐式空列表初始化 。

**输出**：

```
42 (bladepanthera NAMES blade AGE)
17 (bladepanthera NAMES panthera AGE)
666 (memowe NAMES memo AGE)
667 (memowe NAMES we AGE) 
```

给定的子程序（写成 a `{ block }`）可以对给定的数据做任何事情。例如这个更易读的 push 子程序：

```
my @flattened_people = ();

traverse {
    my ($thing, @path) = @_;
    push @flattened_people, { age => $thing, path => \@path };
} \%people; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-15T22:46:56.837

您可以使用[Data::Walk](https://metacpan.org/module/Data%3a%3aWalk)，它是一种用于数据结构的 File::Find。

# php - 如何遍历表中的行

> ID：13403398
> 
> 赞同：0
> 
> 时间：2012-11-15T17:58:43.257
> 
> 标签：php, mysql

我有一个名为 members 的表，有 3 行。以下代码尝试显示成员表中的所有行。它显示第 1 条记录 3 次，而不是显示每条记录一次。

```
<?php
$con = new mysqli("localhost", "root", "jce123", "profile");
if (mysqli_connect_errno()) {
    printf("Connection failed: %s\n", mysqli_connect_error());
    exit();
}
    $sql = "SELECT * FROM members";
    $res = mysqli_query($con,$sql);
    $num = mysqli_num_rows($res);
    $array = mysqli_fetch_assoc($res);
    $keysarray = array_keys($array);
    $valuearray = array_values($array);
    for ($i=0; $i < $num; $i++) {
        for($j = 0; $j < count($array); $j++) {
            echo "<table>";
            echo "<tr><td>".$keysarray[$j].": </td><td>".$valuearray[$j]."</td></tr>";
            echo "</table>";
            }
            echo "<br><br>";
        }
    mysqli_close($con);
?> 
```

我已经根据建议更新了这个：

```
$sql = "SELECT * FROM members";
    $res = mysqli_query($con,$sql);
    $num = mysqli_num_rows($res);
    $array = mysqli_fetch_assoc($res);
    while ($row = mysqli_fetch_assoc($res)) {
        foreach($array as $key => $value){
            echo "<table>";
            echo "<tr><td>".$key.": </td><td>".$value."</td></tr>";
            echo "</table>";
            }
        echo "<br><br>";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:27:29.927

那是因为，您的 $num = 3, count($array) = 3 和外部 for 循环与内部 for 循环无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:26:18.187

在您拥有的地方`$array = mysqli_fetch_assoc($res);`，您只会从数据库中收到一行。你需要类似的东西：

```
while ($row=mysqli_fetch_assoc($res)) 
{

// processing for each row

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:07:37.353

试试这个...这种和平的代码没有经过测试，只是为了给你一个想法...

```
$sql = "SELECT * FROM members";
    $res = mysqli_query($con,$sql);
    $num = mysqli_num_rows($res);
    while ($row = mysqli_fetch_assoc($res)) {
            echo "<table>";
            echo '<tr><td> id = "'.$row['id'].'": 
                  </td><td> name = "'.$row['name'].'"</td></tr>";
            echo "</table>";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:03:36.740

任何基础教程都会告诉你这一点。甚至[PHP 文档](http://php.net/mysql-fetch-assoc)也提供了一个示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T19:02:17.790

你可以用做这样的事情..

```
while ($row=mysqli_fetch_assoc($res)) 
{

    // processing for each row
    e.g
    echo $row['id'];
    echo $row['name'];
    etc
  } 
```

# python - 保存 在beautifulsoup

> ID：13403409
> 
> 赞同：2
> 
> 时间：2012-11-15T17:59:49.380
> 
> 标签：python, html-parsing, beautifulsoup

我正在创建解析器，并且我有以下构造：

```
quotes = soup.findAll('div',{'class':'text'}) 
```

但它剥离了所有 html 标签（如 br）。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:27:33.043

如果你想从文本中取出标签，你可以尝试这样的事情：

```
for item in quotes:
  quote = re.sub(r"\<.*?\>", "", quote) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:38:19.137

`findAll`它本身会给你一个 HTML 节点列表。

如果要检索其文本内容（不带标签），请使用[`.get_text()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text).

要获取这些节点的子节点（也作为对象），请使用[`.contents`or`.children`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#contents-and-children)。

为了将节点的子节点打印为格式良好的字符串，您可以使用[`.prettify()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#pretty-printing). 请注意，这不会完全保留原始格式。

另请参阅：
[BeautifulSoup innerhtml？](https://stackoverflow.com/questions/8112922/beautifulsoup-innerhtml)

# java - 我收到一个错误提示 IlagalStateException

> ID：13403410
> 
> 赞同：0
> 
> 时间：2012-11-15T17:59:50.817
> 
> 标签：java, android, android-layout

嘿，当我点击打开联系我们页面的某个按钮时，每个人都会遇到这种错误，请就我在这里面临的问题提出任何建议谢谢。这是错误和代码：

```
enter code here

11-15 19:31:24.890: E/AndroidRuntime(11445): FATAL EXCEPTION: main
11-15 19:31:24.890: E/AndroidRuntime(11445): java.lang.IllegalStateException: Could not        execute method of the activity
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.View$1.onClick(View.java:3044)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.View.performClick(View.java:3511)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.View$PerformClick.run(View.java:14105)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.os.Handler.handleCallback(Handler.java:605)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.os.Looper.loop(Looper.java:137)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.app.ActivityThread.main(ActivityThread.java:4575)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invoke(Method.java:511)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at dalvik.system.NativeStart.main(Native Method)
11-15 19:31:24.890: E/AndroidRuntime(11445): Caused by: java.lang.reflect.InvocationTargetException
11-15 19:31:24.890: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invoke(Method.java:511)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.View$1.onClick(View.java:3039)
11-15 19:31:24.890: E/AndroidRuntime(11445):    ... 11 more
11-15 19:31:24.890: E/AndroidRuntime(11445): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
11-15 19:31:24.890: E/AndroidRuntime(11445):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739) 
```

11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:489) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android. view.LayoutInflater.inflate(LayoutInflater.java:396) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:352) 11-15 19:31: 24.890: E/AndroidRuntime(11445): 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.app .Activity.setContentView(Activity.java:1835) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 menu.project.ActivityMenu.openContactUsPage(ActivityMenu.java:204) 11-15 19:31:24.890 : E/AndroidRuntime(11445): ... 14 更多 11-15 19:31:24.890: E/AndroidRuntime(11445): 引起：java.lang.reflect。InvocationTargetException 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 java.lang.reflect.Constructor.constructNative(Native Method) 11-15 19:31:24.890: E/AndroidRuntime(11445): at java. lang.reflect.Constructor.newInstance(Constructor.java:417) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.view.LayoutInflater.createView(LayoutInflater.java:586) 11-15 19: 31:24.890: E/AndroidRuntime(11445): ... 24 更多 11-15 19:31:24.890: E/AndroidRuntime(11445): 由: java.lang.OutOfMemoryError 11-15 19:31:24.890: E /AndroidRuntime(11445): 在 android.graphics.Bitmap.nativeCreate(Native Method) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.graphics.Bitmap.createBitmap(Bitmap.java:605) 11 -15 19:31:24.890: E/AndroidRuntime(11445): 在 android.graphics.Bitmap.createBitmap(Bitmap.java:551) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499) 11-15 19: 31:24.890: E/AndroidRuntime(11445): 在 android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.graphics.drawable.Drawable .createFromResourceStream(Drawable.java:773) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.content.res.Resources.loadDrawable(Resources.java:1995) 11-15 19:31:24.890 : E/AndroidRuntime(11445): 在 android.content.res.TypedArray.getDrawable(TypedArray.java:601) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.view.View.(View.java:2785) 11-15 19:31:24.890: E/AndroidRuntime(11445):在 android.view.ViewGroup.(ViewGroup.java:385) 11-15 19:31:24.890: E/AndroidRuntime(11445): 在 android.widget.LinearLayout.(LinearLayout.java:174) 11-15 19:31 :24.890: E/AndroidRuntime(11445): 在 android.widget.LinearLayout.(LinearLayout.java:170) 11-15 19:31:24.890: E/AndroidRuntime(11445): ... 27 更多LinearLayout.(LinearLayout.java:170) 11-15 19:31:24.890: E/AndroidRuntime(11445): ... 27 更多LinearLayout.(LinearLayout.java:170) 11-15 19:31:24.890: E/AndroidRuntime(11445): ... 27 更多

```
enter code here (Here is my java code )

   public class ActivityMenu extends Activity 
   {
@Override
public void onCreate(Bundle savedInstanceState) 
{
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    String error_msg = ClassGlobal.InitializeData(this, ActivityMenu.this);

    if (error_msg != null)
    {
        Toast.makeText(ActivityMenu.this, error_msg,            Toast.LENGTH_LONG).show();
        Log.w("error_msg", error_msg);
    }       

    initializeMenuPage();
}
@Override
public void onDestroy()
{
    super.onDestroy();
    ClassGlobal.closeMySQLiteHelper();
    optionImageList.clear();
    optionClickedImages.clear();
    adapterCusine = null;
}

//On Create menu
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
   getMenuInflater().inflate(R.menu.activity_main, menu);
   return true;
}
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) 
    {
        case R.id.menu_settings:
            updateButton();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}
public void updateButton()
{
    boolean check = ClassGlobal.updateData(this, ActivityMenu.this);
    Toast.makeText(ActivityMenu.this, check ? "Updated successfully" : "Error in updating", Toast.LENGTH_SHORT).show();
}

//Menu Page
AdapterCusine adapterCusine;
List<Bitmap> optionImageList, optionClickedImages;
public void openMenuPage(View v)
{
    initializeMenuPage();
}
public void initializeMenuPage()
{
    setContentView(R.layout.menu);      
    ClassGlobal.DeliveryOnly = false;
    ClassGlobal.SearchCriteria = "";
    intializeCusineAdapter();
}
public void intializeCusineAdapter()
{   
    //Intialize cusine adapter
    final GridView restaurants = (GridView)findViewById(R.id.menu_datagridview);
    restaurants.setAdapter(ClassGlobal.cusineRestaurantsAdapters.get(ClassGlobal.currentSelectedCusine));
    restaurants.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> adapter, View parent, int position, long id) 
        {
            ClassGlobal.currentSelectedRestaurant = position;
            Intent restaurantIntent = new Intent(getBaseContext(), ActivityCusineRestaurantDescription.class);
            startActivity(restaurantIntent);
        }
    });

    GridView cusine = (GridView)findViewById(R.id.cusine_datagridview);
    if (adapterCusine == null)
    {
        //Images for cusines
        String[] optionsImages = getResources().getStringArray(R.array.cusineImageButtons);
        String[] optionclickedImages = getResources().getStringArray(R.array.cusineSelectedImageButtons);

        //Get cusine images
        Resources res = getResources();
        optionImageList = null;
        optionClickedImages = null;
        optionImageList = new ArrayList<Bitmap>();
        optionClickedImages = new ArrayList<Bitmap>();
        for (int i = 0; i < optionsImages.length; i++)
            optionImageList.add(BitmapFactory.decodeResource(res, res.getIdentifier(optionsImages[i], "drawable", getPackageName())));
        for (int i = 0; i < optionclickedImages.length; i++)
            optionClickedImages.add(BitmapFactory.decodeResource(res, res.getIdentifier(optionclickedImages[i], "drawable", getPackageName())));
        adapterCusine = new AdapterCusine(ActivityMenu.this, optionImageList, optionClickedImages);

    }
    cusine.setAdapter(adapterCusine);
    cusine.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> adapter, View parent, int position, long id) 
        {
            ClassGlobal.currentSelectedCusine = position;
            adapterCusine.notifyDataSetChanged();
            restaurants.setAdapter(ClassGlobal.cusineRestaurantsAdapters.get(position));
        }
    });

    final EditText restaurants_filter_editview = (EditText)findViewById(R.id.restaurants_filter_editview);
    TextWatcher tw = new TextWatcher() 
    {
        public void afterTextChanged(Editable s)
        {
            ClassGlobal.SearchCriteria = restaurants_filter_editview.getText().toString();
            Log.w("SearchCriteria", ClassGlobal.SearchCriteria);
            //Notify the current selected cusine
            ClassGlobal.cusineRestaurantsAdapters.get(ClassGlobal.currentSelectedCusine).notifyDataSetChanged();
        }
        public void  beforeTextChanged(CharSequence s, int start, int count, int after)
        {
          // you can check for enter key here
        }
        public void  onTextChanged (CharSequence s, int start, int before,int count) 
        {
        } 
    };
    restaurants_filter_editview.addTextChangedListener(tw);
}

//Delivery Page
public void openDeliveryPage(View v)
{
    initializeDeliveryPage();
}
public void initializeDeliveryPage()
{
    setContentView(R.layout.delevery);
    ClassGlobal.DeliveryOnly = true;
    ClassGlobal.SearchCriteria = "";
    intializeCusineAdapter();
}

//Promotion Page
public void openPromotionPage(View v)
{
    initializePromotionPage();
}
public void initializePromotionPage()
{
    setContentView(R.layout.promotion);
    intializePromotionAdapter();
}
public void intializePromotionAdapter()
{
    GridView promotion = (GridView)findViewById(R.id.Promotion_datagridview); 
    promotion.setAdapter(ClassGlobal.promotionAdapter);
    promotion.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> adapter, View parent, int position, long id) 
        {
            ClassGlobal.currentSelectedRestaurant = position;
            Intent restaurantIntent = new Intent(getBaseContext(), ActivityPromotionRestaurantDescription.class);
            startActivity(restaurantIntent);
        }
    });
}

//Contact Us Page

public void openContactUsPage(View v)

{       
    setContentView(R.layout.contact_us);
    ImageButton fbib = (ImageButton)findViewById(R.id.facebook_button);
    fbib.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/index.php?stype=lo&lh=Ac_XWoIk0pIrPD69"));
            startActivity(browserIntent);

        }
    });
    ImageButton twit = (ImageButton)findViewById(R.id.twitter);
    twit.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com"));
            startActivity(browserIntent);

        }
    });
    ImageButton web = (ImageButton)findViewById(R.id.web);
    web.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com.lb"));
            startActivity(browserIntent);

        }
    });
    ImageButton call = (ImageButton)findViewById(R.id.phone);
    call.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent browserIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + 123456789));
            startActivity(browserIntent);

        }
    });
    ImageButton appwe = (ImageButton)findViewById(R.id.turn);
    appwe.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent openAppWe = new Intent("menu.project.ACTIVITYAPPWE");
            startActivity(openAppWe);

        }
    });
}

//Favorite Page
public void openFavoritesPage(View v)
{
    initializeFavoritePage();
}
public void initializeFavoritePage()
{
    setContentView(R.layout.favorite);
    intializeFavoriteAdapter();
}
public void intializeFavoriteAdapter()
{
    GridView favorite = (GridView)findViewById(R.id.main_datagridview);

    favorite.setAdapter(ClassGlobal.favoriteAdapter);

    favorite.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> adapter, View parent, int position, long id) 
        {
            ClassGlobal.currentSelectedRestaurant = position;
            Intent restaurantIntent = new Intent(getBaseContext(), ActivityFavoriteRestaurantDescription.class);
            startActivity(restaurantIntent);
        }
    });
} 
```

}

```
enter code here

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical"
android:scrollbars="vertical" >

<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <GridView
            android:id="@+id/cusine_datagridview"
            android:layout_width="610dp"
            android:layout_height="wrap_content"
            android:listSelector="@android:color/transparent"
            android:clipChildren="true"
            android:clipToPadding="true"
            android:columnWidth="100dp"
            android:numColumns="8" >
        </GridView>
    </LinearLayout>
</HorizontalScrollView>

<EditText
    android:id="@+id/restaurants_filter_editview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:hint="Search By Name"
    android:ems="10" >
</EditText>

<GridView
    android:id="@+id/menu_datagridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:layout_gravity="center"
    android:layout_weight="1.5"
    android:paddingTop="25dp"
    android:listSelector="@android:color/transparent"
    android:numColumns="3"
    android:paddingLeft="25dp"
    android:stretchMode="columnWidth"
    android:verticalSpacing="23.0dip" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="80dp"
    android:background="@drawable/redlowertab"
    android:baselineAligned="true"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/delevery_button"
        android:layout_width="45dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="7dp"
        android:layout_weight="0.30"
        android:background="@drawable/deliv"
        android:onClick="openDeliveryPage" />

    <ImageButton
        android:id="@+id/menu_button"
        android:layout_width="45dp"
        android:layout_height="60dp"
        android:layout_marginTop="7dp"
        android:layout_weight="0.30"
        android:background="@drawable/dine2"
        android:onClick="openMenuPage"
        android:text="Menu" />

    <ImageButton
        android:id="@+id/Promotion_button"
        android:layout_width="55dp"
        android:layout_height="73dp"
        android:layout_gravity="center"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="7dp"
        android:layout_weight="0.30"
        android:background="@drawable/pro2"
        android:onClick="openPromotionPage"
        android:text="Promotion" />

    <ImageButton
        android:id="@+id/favorite_button"
        android:layout_width="45dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="7dp"
        android:layout_weight="0.30"
        android:background="@drawable/fav2"
        android:onClick="openFavoritesPage"
        android:text="Favorites" />

    <ImageButton
        android:id="@+id/contact_us_button"
        android:layout_width="45dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="7dp"
        android:layout_weight="0.30"
        android:background="@drawable/contact2"
        android:onClick="openContactUsPage"
        android:text="Contact Us" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:02:10.260

在扩展 XML 文件时，您的应用程序正在您的活动中搜索您未实现的方法。检查您的 XML 布局文件 (/layout/menu.xml)。可能有一个带有 onClick 属性的视图，例如：

```
android:onClick="onButtonClick" 
```

你需要有：

```
public onButtonClick(View view) {

} 
```

在你的活动中。考虑到*onButtonClick*只是一个示例，我的意思是您必须实现与 XML 文件中声明的名称相同的方法。

# ios - 核心数据模型文件不在捆绑包中

> ID：13403414
> 
> 赞同：2
> 
> 时间：2012-11-15T18:00:18.923
> 
> 标签：ios, core-data, nsbundle

我重新排列了我的程序文件夹中的文件，将它们分组到适当的子文件夹中。我确保它们都显示在编译的源列表中，包括“xcdatamodeld”文件。

但是，创建托管对象模型不适用于以下代码：

```
if (mom_ != nil) {
    return mom_;
}

self.mom = [NSManagedObjectModel mergedModelFromBundles:nil];

return mom_; 
```

我检查了`[NSBundle mainBundle]`，特别是

```
[[NSBundle mainBundle] pathForResource:@"Words" ofType:@"xcdatamodeld"] 
```

和

```
[[NSBundle mainBundle] pathForResource:nil ofType:@"xcdatamodeld"] 
```

他们都返回零。当我按名称和类型检查它们时，我可以看到其他资源在那里。

应用程序包文件中有一个名为“Words.momd”的文件夹。

可能发生了什么，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:36:11.493

尝试使用：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Words" withExtension:@"momd"]; 
```

您想加载*编译*后的数据模型，而不是 xcdatamodeld 文件：

> 数据模型是一种部署资源。除了模型中实体和属性的详细信息之外，您在 Xcode 中创建的模型还包含有关图表的信息——它的布局、元素的颜色等等。运行时不需要后面的信息。使用模型编译器 momc 编译模型文件，以删除无关信息并使资源的运行时加载尽可能高效。

（[来源](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOM.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:07:45.857

您可以为此使用 MagicalRecords 框架：

[https://github.com/magicalpanda/MagicalRecord](https://github.com/magicalpanda/MagicalRecord)

并在一行代码中设置您的数据库：

```
[MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:@"Words"]; 
```

# php - 读写excel

> ID：13403418
> 
> 赞同：1
> 
> 时间：2012-11-15T18:00:33.870
> 
> 标签：php, symfony

你好我有这个方法可以制作一个文件上传excel我想阅读这个文件的内容并改变谁可以帮助我

```
public function chargement_ticket_ouvertAction (){
         $dossier = 'C:\Program Files\EasyPHP-5.3.3.1\www\alerteurs1\src\Admin\BlogBundle\Resources\views\GestionAlerte\upload';

           $post=$_FILES['avatar'];
           $fichier = basename($_FILES['avatar']['name']);
           $file = $_FILES['avatar']. $dossier;

           if(move_uploaded_file($_FILES['avatar']['tmp_name'], $dossier . $fichier)) //Si la fonction renvoie TRUE, c'est que ça a fonctionné...
        {   

              return new response ('Upload effectué avec succès !'.$file);

          }

          else //Sinon (la fonction renvoie FALSE).
         {
                    return new response('Echec de l\'upload !');

         }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:18:35.690

如果您使用带有 composer 的 Symfony 2.1，它就像包含 phpexcel 包一样简单。

将其添加到 composer.json

```
"require": {
  "phpexcel/phpexcel": "1.*@stable"
} 
```

然后更新/安装这个包

```
composer update phpexcel/phpexcel 
```

然后你可以像这样使用它

```
$excel = \PHPExcel_IOFactory::load('/path/to/excel.file');
$sheet = $excel->getActiveSheet()->toArray(); 
```

# android - Android：如何使用 if 块终止活动

> ID：13403422
> 
> 赞同：0
> 
> 时间：2012-11-15T18:00:43.667
> 
> 标签：android

在我的 Android 应用程序中，我需要验证用户输入的数据。所以我用 if 块来做到这一点。如果用户输入的数据无效，我想进一步停止运行活动。如何在我尝试使用的 if 块中执行此操作，`System.exit(0)`但它对我不起作用。我不知道是否有正确的方法可以在不使用 if 语句的情况下执行此操作，请帮助我。

例如：

```
if(!uName.equals("User")) {
    // Here I want to terminate the activity
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:01:49.083

只需调用`finish()`.

```
if ( !uName.equals( "User" ) ){
    finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:02:12.900

您可以使用`finish()`活动方法来完成当前活动...

# java - 识别重复的瓷砖

> ID：13403424
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:01:12.830
> 
> 标签：java, image, hash, bufferedimage, tile

我有一个`BufferedImage`里面有多个瓷砖。

我想要的是相互比较瓷砖，看看它们是否相同。

那么如何从缓冲图像中提取每个单独的图块中的数据，以便在哈希算法中使用它们来比较它们呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:10:25.083

您不想比较哈希值，只需逐个像素地浏览图像就很容易了。

```
 assert imageA.getWidth() == imageB.getWidth();
  assert imageA.getHeight() == imageB.getHeight();

  for (int x = 0; x < imageA.getWidth(); x++)
  {
     for (int y = 0; y < imageA.getHeight(); y++)
     {
        assert imageA.getRGB(x, y) == imageB.getRGB(x, y);
     }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:00:26.087

您可以为此使用[MessageDigest 。](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html)从页面引用：

> 此 MessageDigest 类为应用程序提供消息摘要算法的功能，例如 SHA-1 或 SHA-256。消息摘要是一种安全的单向散列函数，它采用任意大小的数据并输出固定长度的散列值。

您可以搜索使用此类的示例，以了解如何使用不同的散列算法实现散列。您还可以使用其他为您简化工作的库，例如apache commons 中的[DigestUtils](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html)。对于我们的案例，我将使用上面页面中的示例：

首先，获取瓦片的数据：我们检查构成瓦片的像素并读取 rgb 值。那将是一个整数。注意消息摘要的 API，您需要将其设为字节数组并更新摘要。您可以创建一个从 int 获取字节数组的方法。或者您可以将整数连接成一个字符串，并为整个字符串获取一个完整的数组，该数组表示图块中的所有整数。然后你从那个字符串中得到字节。请注意，我将使用硬编码值仅用于在第一个图块上进行演示，并且我不会处理异常等...：

```
StringBuilder firstImageRGBStr=new StringBuilder();
for (int i=0; i<32; i++)
 for (int j=0; j<32; j++)
   firstImageRGBStr.append(img.getRGB(i,j));

MessageDigest md = MessageDigest.getInstance("SHA");
byte[] firstImageDigest = md.digest(firstImageRGBStr.toString().getBytes()); 
```

现在您将字节数组存储为第一个图块的哈希值，以供将来比较。请注意，您不需要为每个图块创建新的 MessageDigest，因为在保存图块的哈希后，您可以使用[reset()](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html#reset%28%29)将消息摘要重用于另一个图块。

比较散列现在变成了包含散列的字节数组的比较。并注意 MessageDigest 类有一个静态方法，它比较两个摘要，它只是这样做[isEqual()](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html#isEqual%28byte%5B%5D,%20byte%5B%5D%29)。

# r - 使用插入符号的完全可重现的并行模型

> ID：13403427
> 
> 赞同：48
> 
> 时间：2012-11-15T18:01:17.650
> 
> 标签：r, r-caret, reproducible-research

当我在插入符号中运行 2 个随机森林时，如果我设置一个随机种子，我会得到完全相同的结果：

```
library(caret)
library(doParallel)

set.seed(42)
myControl <- trainControl(method='cv', index=createFolds(iris$Species))

set.seed(42)
model1 <- train(Species~., iris, method='rf', trControl=myControl)

set.seed(42)
model2 <- train(Species~., iris, method='rf', trControl=myControl)

> all.equal(predict(model1, type='prob'), predict(model2, type='prob'))
[1] TRUE 
```

但是，如果我注册一个并行后端来加速建模，每次运行模型时都会得到不同的结果：

```
cl <- makeCluster(detectCores())
registerDoParallel(cl)

set.seed(42)
myControl <- trainControl(method='cv', index=createFolds(iris$Species))

set.seed(42)
model1 <- train(Species~., iris, method='rf', trControl=myControl)

set.seed(42)
model2 <- train(Species~., iris, method='rf', trControl=myControl)

stopCluster(cl)

> all.equal(predict(model1, type='prob'), predict(model2, type='prob'))
[1] "Component 2: Mean relative difference: 0.01813729"
[2] "Component 3: Mean relative difference: 0.02271638" 
```

有没有办法解决这个问题？一个建议是使用[doRNG](http://cran.r-project.org/web/packages/doRNG/index.html)包，但`train`使用当前不支持的嵌套循环：

```
library(doRNG)
cl <- makeCluster(detectCores())
registerDoParallel(cl)
registerDoRNG()

set.seed(42)
myControl <- trainControl(method='cv', index=createFolds(iris$Species))

set.seed(42)
> model1 <- train(Species~., iris, method='rf', trControl=myControl)
Error in list(e1 = list(args = seq(along = resampleIndex)(), argnames = "iter",  : 
  nested/conditional foreach loops are not supported yet.
See the package's vignette for a work around. 
```

`doSNOW`更新：我认为可以使用and来解决这个问题`clusterSetupRNG`，但我无法做到。

```
set.seed(42)
library(caret)
library(doSNOW)
cl <- makeCluster(8, type = "SOCK")
registerDoSNOW(cl)

myControl <- trainControl(method='cv', index=createFolds(iris$Species))

clusterSetupRNG(cl, seed=rep(12345,6))
a <- clusterCall(cl, runif, 10000)
model1 <- train(Species~., iris, method='rf', trControl=myControl)

clusterSetupRNG(cl, seed=rep(12345,6))
b <- clusterCall(cl, runif, 10000)
model2 <- train(Species~., iris, method='rf', trControl=myControl)

all.equal(a, b)
[1] TRUE
all.equal(predict(model1, type='prob'), predict(model2, type='prob'))
[1] "Component 2: Mean relative difference: 0.01890339"
[2] "Component 3: Mean relative difference: 0.01656751"

stopCluster(cl) 
```

foreach有什么特别之处，为什么不用我在集群上发起的种子？对象`a`和`b`是相同的，那么为什么不`model1`和`model2`？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-02-24T13:14:46.373

使用包以并行模式运行完全可重现模型的一种简单方法`caret`是在调用列车控制时使用种子参数。至此上述问题已解决，请查看 trainControl 帮助页面以获取更多信息。

```
library(doParallel); library(caret)

#create a list of seed, here change the seed for each resampling
set.seed(123)

#length is = (n_repeats*nresampling)+1
seeds <- vector(mode = "list", length = 11)

#(3 is the number of tuning parameter, mtry for rf, here equal to ncol(iris)-2)
for(i in 1:10) seeds[[i]]<- sample.int(n=1000, 3)

#for the last model
seeds[[11]]<-sample.int(1000, 1)

 #control list
 myControl <- trainControl(method='cv', seeds=seeds, index=createFolds(iris$Species))

 #run model in parallel
 cl <- makeCluster(detectCores())
 registerDoParallel(cl)
 model1 <- train(Species~., iris, method='rf', trControl=myControl)

 model2 <- train(Species~., iris, method='rf', trControl=myControl)
 stopCluster(cl)

 #compare
 all.equal(predict(model1, type='prob'), predict(model2, type='prob'))
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T16:53:03.123

所以 caret 使用 foreach 包来并行化。很可能有一种方法可以在每次迭代时设置种子，但我们需要在`train`.

或者，您可以创建一个自定义建模函数来模拟随机森林的内部模型并自己设置种子。

最大限度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T14:53:14.117

您使用的是哪个版本的插入符号？

@BBrill 的回答是正确的。但是，从 v6.0.64（2016 年 1 月 15 日）开始，插入符号考虑了这个问题。您可以提供您的定制`trControl$seeds`，但您不必这样做。如果`trControl$seeds`是`NULL`，caert 会自动为您生成这些，即使在并行训练时也能确保可重复性。

这种行为可以在[https://github.com/topepo/caret/commit/9f375a1704e413d0806b73ab8891c7fadc39081c找到](https://github.com/topepo/caret/commit/9f375a1704e413d0806b73ab8891c7fadc39081c)

拉取请求：[https ://github.com/topepo/caret/pull/353](https://github.com/topepo/caret/pull/353)

相关代码片段：

```
 if(is.null(trControl$seeds) || all(is.na(trControl$seeds)))  {
      seeds <- sample.int(n = 1000000L, size = num_rs * nrow(trainInfo$loop) + 1L)
      seeds <- lapply(seq(from = 1L, to = length(seeds), by = nrow(trainInfo$loop)),
                      function(x) { seeds[x:(x+nrow(trainInfo$loop)-1L)] })
      seeds[[num_rs + 1L]] <- seeds[[num_rs + 1L]][1L]
      trControl$seeds <- seeds
    } else {
      (... omitted ...)
    } 
```

欲知更多详情，您可以

# python - Python：-bash：意外标记附近的语法错误

> ID：13403431
> 
> 赞同：0
> 
> 时间：2012-11-15T18:01:33.590
> 
> 标签：python, command-line-arguments

我用 Python 编写了一个小脚本，用于将文本附加到工作日志中。我已将脚本放在 $PATH 的目录中

```
#!/usr/bin/python

# import necessary modules
import sys
import os
import datetime

# main() function
def main():
  now = datetime.datetime.now()

  tmp = ' '.join(sys.argv[1:])

  outfile = '/path/to/output/done.log'

  outstr = now.strftime("%Y-%m-%d %H:%M:%S") + ' - ' + tmp + '\n'

  f=open(outfile,'a')
  f.write(outstr)
  f.close()

  # print sys.argv[0:1]
  print 'Adding ' + outstr

# Call main()
if __name__ == '__main__':
  main() 
```

当我像示例 1 中那样运行脚本时，出现错误。

示例 1：

```
host:scripts user$ done this is a test
-bash: syntax error near unexpected token `done' 
```

如果我像示例 2 中那样运行脚本，它将按预期运行。

示例 2：

```
host:scripts user$ python done this is a test
Adding 2012-11-15 09:57:44 - this is a test 
```

我如何让它在第一个例子中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:03:14.120

`done`是一个 bash 关键字，因此不能在某些地方使用，例如“Bash 需要命令名的地方”。您可以使用`./done`（或`/path/to/done`，或`python /path/to/done`），或重命名命令。

# ajax - Yii 如何通过 ajaxButton 发送一个组合的选定值？

> ID：13403432
> 
> 赞同：2
> 
> 时间：2012-11-15T18:01:36.650
> 
> 标签：ajax, yii

```
 echo CHtml::ajaxButton (Yii::t('Listing.Listing','Associa'), 
                    $this->createUrl('listing/addAssociation', array("id" => $model->id, "itemId"=> '5'  ) ), 
                    array('update' => '#dataToUpdate')
                    ); 
```

我正在使用这个示例代码（并且它正在工作），将一个 id 和一个 itemId（在示例中固定为“5”）发送到 addAssociation。

一切正常，但我需要为 itemId 传递 jQuery 表达式的结果。就像是

```
"itemId" = "js: $('#myDropDown option:selected').val();" 
```

但在这种情况下，不评估 js 表达式，并且在 actionAddAssociation 中我看到 itemId 是文字字符串：

```
 "js: $('#myDropDown option:selected').val();" 
```

**如何允许用户选择一个组合，并将所选值传递给基于此操作的操作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:54:07.790

您必须在[ajax 选项的`data`属性](http://api.jquery.com/jQuery.ajax/ "http://api.jquery.com/jQuery.ajax/")中传递它：

```
echo CHtml::ajaxButton (Yii::t('Listing.Listing','Associa'), 
    $this->createUrl('listing/addAssociation', array("id" => $model->id)), 
    array(// these are ajax options
        'data' => array('itemId'=> 'js: $("#myDropDown option:selected").val()'),
              // and don't use semi-colon after val(), you can also pass id here itself
        'update' => '#dataToUpdate'
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:19:31.147

您可以尝试使用 jQuery 的[ajaxPrefilter](http://api.jquery.com/extending-ajax/)添加一个函数，该函数将更改通过 ajax 传递的数据。

首先，您必须在页面初始化时注册以下脚本：

```
jQuery.ajaxPrefilter(function(options, originalOptions, jqXHR) {
    if (originalOptions['data'] && originalOptions['data']['requestId'] === "myDropDown") {
        delete originalOptions['data']['requestId'];
        originalOptions['data']['itemId'] = jQuery("#myDropDown option:selected").val();
        options['data'] = jQuery.param(originalOptions['data']);
    }
}); 
```

这是为[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)`options`确定的完整`settings`对象。我传递了一个附加参数来识别 ajax 请求，为了使事情更简单，视图可能如下所示：`requestId`

```
<?php
print CHtml::dropDownList("myDropDown", 1, array(
    1 => "First",
    2 => "Second",
    3 => "Third"
));
print CHtml::ajaxButton(Yii::t("Listing.Listing", "Associa"), Yii::app()->createUrl("listing/addAssociation"), array(
    'data' => array(
        'requestId' => "myDropDown",
        'id' => $model->id
    ),
    'update' => "#dataToUpdate"
)); 
```

# c - 将字符串拆分为动态数组

> ID：13403433
> 
> 赞同：0
> 
> 时间：2012-11-15T18:01:43.950
> 
> 标签：c, arrays

我有`char`一个用户或应用程序给我的数组`"Hello,My,Name,Is,Test"`。

我需要做的是在逗号上拆分它，将它存储在一个动态数组中，因为我永远不会知道逗号的数量或字符串的大小。

我需要存储它，以便可以通过另一种方法单独请求每个项目，例如

```
GetItem(int index)
{   
   ... 
   return Array[index];
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:30:46.753

如果您*不知道*字符串中逗号的数量甚至没有上限，则必须解析字符串并动态重新分配数组。有几种策略，下面的一种并不是真正的最佳策略，有利于内存碎片，但描述起来很简单。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main()
{
    char *str       = "This,is,a,comma,delimited,string,with,a,length,of,whatever";
    char **array    = NULL;
    char *p;
    size_t  items = 0, q;
    char *sepa      = ",";

    p = str;
    for (;;)
    {
            p += strspn(p, sepa);
            if (!(q = strcspn(p, sepa)))
                    break;
            if (q)
            {
                    array           = realloc(array, (items+1) * sizeof(char *));
                    array[items]    = malloc(q+1);
                    strncpy(array[items], p, q);
                    array[items][q] = 0;
                    items++;
                    p += q;
            }
    }
    for (q = 0; q < items; q++)
    {
            printf("(%s) ", array[q]);
    }
    printf("\n");

    /* Here we have a problem. How do we return to the caller the information
       about how many items do we have? A common solution is to return the number
       of items PLUS ONE, and that one is NULL */

    array           = realloc(array, (items+1) * sizeof(char *));
    array[items]    = NULL;

    /* So this code can work without needing to know the value of "items" */
    for (q = 0; array[q]; q++)
            printf("(%s) ", array[q]);
    printf("\n");
} 
```

顺便说一句，我省略了检查`realloc`（或`malloc`）是否返回 NULL，表示内存错误。

另一种分配策略是`realloc`在块中使用，即，您保留两个计数器`items`和`really_allocated_items`，并且仅当两者相等时才重新分配。当你这样做时，你会增加`really_allocated_items`，比如说，64，然后重新分配那个数量的项目。这样，您每 64 只运行一次分配，最多浪费 63 个指针。

存在其他策略，使用递增的块大小而不是固定的 64，但它们仅在内存和性能限制非常严格时实施。

**注意**此实现*有意*不使用`strtok`，因为`strtok` *修改了原始字符串*，在某些情况下可能不允许这样做（甚至可能为您获得一个核心转储）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:11:23.553

`strtok()`使用最大字长小于的简单实现`10`

你也可以用其他方式来做，因为这个不要忘记`#include<string.h>`

```
char str[] = "Hello,My,Name,Is,Test";
char delims[] = ",";
char *result =NULL;
char final[10][10];
int i=0;
result = strtok( str, delims );
strcpy(final[i],result);
i++;
while( result != NULL ) {
    result = strtok( NULL, delims );
    strcpy(final[i],result);
    i++;
} 
```

* * *

脚注：这里第一次调用`strtok()`使用`str`作为第一个参数，但所有后续调用都有`NULL`

# ruby-on-rails - 如何对 ActiveAdmin 索引页使用 find_by_sql 查询？

> ID：13403436
> 
> 赞同：2
> 
> 时间：2012-11-15T18:01:57.507
> 
> 标签：ruby-on-rails, activeadmin

我在项目中使用活动管理员。我有一个创建新资源的请求，并获得了一个复杂的 SQL 查询来使用 - 它连接到不同的数据库。一切都很好 - 但是，我对 ActiveAdmin 有点陌生，并且很好奇如何让索引页面使用我的自定义查询与默认资源。

我只需要一个微调/示例来查看如何覆盖此默认活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:37:23.510

您可以在向 ActiveAdmin 注册模型时声明范围和过滤器。

`app/model/your_model.rb`

```
class YourModel < ActiveRecord::Base
  scope :my_scope, where('some custom SQL')
  scope :my_other_scope, where('some other custom SQL')
end 
```

`app/admin/your_models.rb`

```
ActiveAdmin.register YourModel do
  scope :my_scope, default: true
  scope :my_other_scope
end 
```

# javascript - 我应该在我的 jQuery 函数中写什么来从我的输入字段 (id=btnCloseDeal) 中获取值并将其显示在另一个页面上？

> ID：13403437
> 
> 赞同：1
> 
> 时间：2012-11-15T18:02:07.253
> 
> 标签：javascript, jquery, html

在输入字段 (id=btnCloseDeal) 中输入/写入名称时，然后单击我的 GoToPayBtn 进入新页面。在我的新页面上，我想从我的输入字段 (id=btnCloseDeal) 中获取值并显示它。我应该在我的 jQuery 函数中写什么来从我的输入字段 (id=btnCloseDeal) 中获取值并将其显示在另一个页面上？

```
 <input type="button" class="artikel" id="btnCloseDeal" value="Pay" onclick="check();";"/>

$("#btnCloseDeal ").click(function (){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:06:54.923

据我了解您的问题，您考虑实施它的方式并不是最佳的。

我建议使用您的字段 (#btnCloseDeal) 作为查询参数，然后使用 jQuery 获取它。

这是一个函数，它将为您提供纯 JS 中的查询参数

```
function getParameterByName(name)
{
name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
var regexS = "[\\?&]" + name + "=([^&#]*)";
var regex = new RegExp(regexS);
var results = regex.exec(window.location.search);
if(results == null)
  return "";
else
  return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:16:54.977

您可以将输入的值设置为要重定向到的页面的 url，然后在该页面上使用 javascript 获取 url 参数：

```
// get the url
var url = window.location.protocol + "//" + window.location.host; 
```

并使用：

```
var param = location.search; 
```

# java - 使用 SocketHubAppender 部署在 Tomcat 中的 web-app

> ID：13403442
> 
> 赞同：2
> 
> 时间：2012-11-15T18:02:17.770
> 
> 标签：java, jakarta-ee, tomcat, logging, log4j

我有多个 webapps 部署在 tomcast 服务器上。

在我的 webapp 的 log4j.properties 之一中，我添加了以下 Socket HUB 附加程序，以便将日志发送到该套接字。

```
log4j.appender.SOCKET=org.apache.log4j.net.SocketHubAppender 
log4j.appender.SOCKET.port=9999
log4j.appender.SOCKET.locationInfo=true 
```

一切都部署得很好。

我的第二个应用程序的 log4j.properties 也具有相同的附加程序。

```
log4j.appender.SOCKET=org.apache.log4j.net.SocketHubAppender 
log4j.appender.SOCKET.port=9999 
log4j.appender.SOCKET.locationInfo=true 
```

现在，如果我尝试将第二个 Web 应用程序添加到已经包含第一个 Web 应用程序的 tomcat 服务器，它会在日志中抛出“端口已在使用”错误。

但是，如果我将第二个应用程序的端口更改为 9998，则在日志中看不到任何错误。Afaik，这里提到的端口是接收器的端口，因此如果多个应用程序使用相同的接收器端口应该没有问题。

或者我应该在 Tomcat 的 log4j.properties 中配置这个附加程序，而不是在每个部署在其中的应用程序中。

高级感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T22:29:50.540

`SocketHubAppender`在此处充当 TCP 服务器并开始侦听给定的 localhost 端口。日志查看器（Apache Chainsaw、OstrosLogViewer、...）连接到此端口并从中接收/提取数据。

`SocketAppender`另一方面，充当 TCP 客户端，连接到给定的远程服务器：端口并向其发送/推送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T10:52:50.447

SocketHubAppender 的所有可设置属性都在这里（使用 Log4J 1.2.x）：

*   Port ：集线器打开的端口（等待连接）
*   LocationInfo : 包括位置信息
*   BufferSize ：要缓冲的日志事件数（如果是新客户端）
*   应用程序：应用程序的名称

[https://wiki.apache.org/logging-log4j/SocketHubAppender](https://wiki.apache.org/logging-log4j/SocketHubAppender) [https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketHubAppender.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketHubAppender.html)

```
<appender name="SOCKET" class="org.apache.log4j.net.SocketHubAppender">
    <param name="Port" value="4560" />
    <param name="LocationInfo" value="true" />
    <param name="BufferSize" value="1000" />
    <param name="Application" value="MyAppName" />
</appender> 
```

请注意，使用 Log4J 2.x，SocketHubAppender 不再存在......至少现在： [https ://issues.apache.org/jira/browse/LOG4J2-171](https://issues.apache.org/jira/browse/LOG4J2-171)

# ios - 解读 TestFlight 崩溃报告

> ID：13403455
> 
> 赞同：2
> 
> 时间：2012-11-15T18:03:15.327
> 
> 标签：ios, xcode, cocoa-touch, crash

我刚刚对我的应用程序进行了一些更新，并且在 TestFlight 中看到了一些我在网上找不到太多信息的新崩溃报告。谁能帮我解释这里发生了什么？它发生在我的应用程序的不同地方，所以我认为它与一个特定的功能无关......

```
0 MyApp 0x000832b6 testflight_backtrace + 238
1 MyApp 0x00083fa0 TFSignalHandler + 264
2 libsystem_c.dylib 0x35e2be92 _sigtramp + 42
3 libdispatch.dylib 0x3a3c611e _dispatch_call_block_and_release + 10
4 libdispatch.dylib 0x3a3c611e _dispatch_call_block_and_release + 10
5 libdispatch.dylib 0x3a3c54b6 _dispatch_client_callout + 22
6 libdispatch.dylib 0x3a3ca1bc _dispatch_main_queue_callback_4CF$VARIANT$mp + 224
7 CoreFoundation 0x38739f3a __CFRunLoopRun + 1290
8 CoreFoundation 0x386acebc CFRunLoopRunSpecific + 356
9 CoreFoundation 0x386acd48 CFRunLoopRunInMode + 104
10 GraphicsServices 0x36c5d2ea GSEventRunModal + 74
11 UIKit 0x39e7a2f8 UIApplicationMain + 1120
12 MyApp 0x0003078a main (main.m:16)
13 MyApp 0x0003073f start + 39 
```

# xml - InfoPath 2010：没有发布按钮

> ID：13403458
> 
> 赞同：3
> 
> 时间：2012-11-15T18:03:24.017
> 
> 标签：xml, infopath, publishing, infopath2010

我正在学习如何使用 InfoPath，但我不知道发生了什么。

如果您查看随附的屏幕截图，您会发现没有发布按钮，只有“保存快照”按钮。然而，在我阅读的任何地方，列表中都应该有一个带有打印、保存和发送等按钮，但我没有看到一个按钮，你可以在屏幕截图中看到它不存在。

知道我错过了什么吗？

![截屏](../Images/d1a1b06fc00bf65f645d6de364597dca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:13:01.333

那是因为您在**Infopath Filler**中打开了表单模板，即在基于该 XSN 表单模板创建的 XML 数据表单的预览中。

不要在 Windows 资源管理器中双击文件，而是右键单击它并选择**设计**选项（而不是**打开**以在 Infopath Filler 中打开）以在**Infopath Designer**中打开它。

或打开**Infopath Designer**并在功能区上选择**File** > **Open** > ...

# j - J中唯一的不等数组对

> ID：13403459
> 
> 赞同：2
> 
> 时间：2012-11-15T18:03:24.583
> 
> 标签：j

假设两个不同大小的数组：

```
N0 =: i. 50
N1 =: i. 500 
```

应该有一种方法可以获得唯一的对，只需将两者结合起来即可。我发现的“最简单”是：

```
]$R =: |:,"2 |: (,.N0) ,"1 0/ N1
25000 2 
```

坦率地说，这是一个丑陋的棒球棒解决方案。有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:43:42.713

您要获取的数据模式是[Catalogue 的变体。](http://www.jsoftware.com/help/dictionary/d520.htm)事实上，它是最著名的变体：笛卡尔积。

在目录的词汇表中，还有笛卡尔积的代码。要获得您想要的列表，只需解开并打开结果。

```
pair=: >@ ,@ { @(,&<)

   $ N0 pair N1
25000 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:57:39.713

我正在寻找同样的东西。

我只提出了以下更短但不漂亮的：

```
,/(N0 ,. ])"0 N1

;(N0 ,. ]) &.> N1 
```

或形式：

```
;N0&,.&.>N1 
```

# internet-explorer-7 - cucumber、capybara 1.1.3 和 Internet Explorer

> ID：13403463
> 
> 赞同：2
> 
> 时间：2012-11-15T18:03:27.540
> 
> 标签：internet-explorer-7, cucumber, capybara, selenium-rc

我正在寻找一种在 Linux 环境中使用 Cucumber 测试来测试 Internet Explorer 浏览器的一般策略。我看到了[类似的答案](https://stackoverflow.com/questions/6715973/capybara-use-internet-explorer-as-browser-rather-than-firefox)，但这似乎不适用于水豚 1.1.3。

我希望使用 capybara 来避免直接使用 Selenium 以及不使用无头测试的后续成本（速度、环境依赖性），但这似乎是不可能的。我想避免同时使用水豚和硒。

一个不错的折衷方案可能是[罗斯帕特森](https://stackoverflow.com/users/241753/ross-patterson) 对基于硒的问题的回答[：](https://stackoverflow.com/a/7573839/1827312)

> 无头浏览器是个坏主意。它们为您提供一些测试，但与真实用户所看到的完全不同，它们掩盖了许多只有真实浏览器才会遇到的问题。在无头环境（例如，Windows 或带有 XVFB 的 Linux）上使用“有头”浏览器（即除了 HTMLUnit 之外的任何东西）会更好。

谢谢你的想法。

# xml - dojox.grid.DataGrid 到 XML

> ID：13403466
> 
> 赞同：2
> 
> 时间：2012-11-15T18:03:32.747
> 
> 标签：xml, dojo, dojox.grid.datagrid, xpages-extlib

我需要将 XPages 扩展库 DataGrid ( `<xe:djxDataGrid>`) 内容作为 XML 导出。

在我的客户端 JavaScipt 中，我循环遍历所有行，获取值并使用 dojox.data.XmlStore 构建我的 XML。

问题是当我尝试保存 XML 时，它发布的次数与我添加的标签一样多，并且每个 POST 包含`<?xml version="1.0"?>`一个标签。

这是一个尝试创建简单 XML 文件的简单示例代码：

```
var xml_store = new dojox.data.XmlStore({url: "backend_save_to_file.xsp", rootItem: "tests"});
xml_store.newItem({tagName: "test1"}, "tests");
xml_store.newItem({tagName: "test2"}, "tests");
xml_store.save(); 
```

运行此 JavaScript 会导致两个 HTTP POST 到 backend_save_to_file.xsp，其中包含以下内容：

1.  `<?xml version="1.0"?><test1/>`
2.  `<?xml version="1.0"?><test2/>`

我希望一个 POST 包含：

```
<?xml version="1.0"?><tests><test1/><test2/></tests> 
```

我究竟做错了什么？

编辑：我无法让它工作，所以我试图在一个字符串中构建 XML。我`dojox.html.entities.encode`用来转义 XML 值，但看起来这不是正确的方法。例如字符 ä 被转换为`&auml;`. IE 将无法识别包含`&auml;`XML 的文件（我在 xml 标记中尝试了不同的编码）。如果我`&#228;`改用 IE 会将其识别为 XML。如何在 dojo 中转义 XML？

EDIT2：我最终使用了这个简单的编码：

[如何在javascript中转义xml实体？](https://stackoverflow.com/questions/7918868/how-to-escape-xml-entities-in-javascript)

但它不会删除 XML 中的非法字符。当然，也有代码片段可以删除它们，但如果 Dojo 中没有实用程序可以做到这一点，我会感到惊讶。

谢谢，

*   帕努

# wordpress - Wordpress 多个 query_posts 循环 - 分页不起作用

> ID：13403467
> 
> 赞同：0
> 
> 时间：2012-11-15T18:03:33.913
> 
> 标签：wordpress

我有一组使用自定义分类法分配了一年的帖子。使用查询帖子，我希望能够对这些帖子进行排序，以便首先显示 2012 年的帖子，然后按字母顺序对其余帖子进行排序。

我让下面的示例正常工作，它首先显示所有具有匹配元值 2012 的帖子，然后第二个循环显示除第一个循环中的帖子之外的所有其他内容....

```
<?php query_posts( array(
    'post_type' => 'project',
    'meta_key' => 'start_date_year',
    'meta_value' => '2012'
    ));
    $ids = array();
?>

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

<p>This is from Loop 1 - <?php the_title(); ?> - <?php the_id(); ?></p>
<?php $ids[]= $post->ID; ?>

<?php endwhile; endif; wp_reset_query(); ?>

<?php query_posts( array(
    'post_type' => 'project',
    'post__not_in' => $ids
    ));
?>

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

<p>This is from Loop 2 - <?php the_title(); ?> - <?php the_id(); ?></p>

<?php endwhile; endif; wp_reset_query(); ?>

<?php pagination(); ?> 
```

我现在剩下的唯一问题是分页，它显示了 2 页，但每一页都包含相同的结果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:07:06.963

我将运行两个循环从数组中的第一个循环收集帖子的 ID，并通过将其添加到第二个 wp_query $args 中将它们从第二个数组中排除

一样……

```
'post__not_in' => $array_variables_from_first_loop, 
```

# c - C crypt() 在 md5 模式下无法正常工作？

> ID：13403469
> 
> 赞同：3
> 
> 时间：2012-11-15T18:03:39.997
> 
> 标签：c, crypt

我第一次在 c 中使用 crypt() 函数。我只是在运行一些初始测试，因此实际上不会使用这些测试，尤其是恒定的盐值。:)

我运行以下代码：

```
crypt(password, "$1$k7de83ka7"); 
```

根据我对 crypt 文档的理解，这个提供的 salt 值应该指定 crypt() 在 MD5 模式下运行，这将产生格式为“$1$”的哈希。$1$ 指定使用 MD5 散列的值。这就是我理解它应该起作用的方式。

但是，当我测试上面的代码时，返回的值是“$1ciFuWRySk3A”，所以它似乎缺少一个“$”字符。我做错了什么导致这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:46:52.600

```
crypt(password, "$1$k7de83ka7"); 
```

从手册页中，我认为您的调用不`crypt`正确：

> 如果 salt 是一个以字符 "$id$" **开头的字符串，后跟一个以 "$" 结尾的字符串**：**$id$salt$encrypted**

然后 id 标识加密方法。

而且你不应该期望它返回一个包含 $ 的字符串（不一定）

> 成功时，返回一个指向加密密码的指针。出错时，返回 NULL。

# java - 使用 JTDS 和 Scala 时出现不支持的版本错误

> ID：13403471
> 
> 赞同：22
> 
> 时间：2012-11-15T18:03:41.107
> 
> 标签：java, scala, jtds, spray

我正在尝试使用 Java JTDS 驱动程序连接到我在 Scala 中的数据库。但是，每当我尝试使用它时，我都会收到一个错误，即版本（java？）是错误的。

> java.lang.UnsupportedClassVersionError：net/sourceforge/jtds/jdbcx/JtdsDataSource：不支持的major.minor版本51.0

```
object DaoDriverAdaptor {
  import java.sql.{DriverManager, Connection}

  private def loadDriver() {
    try {
      Class.forName("net.sourceforge.jtds.jdbcx.JtdsDataSource")
    } catch {
      case e: Exception  => {
        println("ERROR: Driver not available: " + e.getMessage)
        throw e
      }
    }
  } 
```

*   斯卡拉版本：2.9.2
*   Java版本：1.6
*   使用 jtds 1.3.0
*   java -版本的输出：

java 版本“1.6.0_35”Java(TM) SE 运行时环境（构建 1.6.0_35-b10-428-11M3811）Java HotSpot(TM) 64 位服务器 VM（构建 20.10-b01-428，混合模式）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-15T18:10:50.807

是的，根据[Java 类文件格式](http://en.wikipedia.org/wiki/Java_class_file)，您的 Java 运行时太旧了：

*   J2SE 7 = **51**（0x33 十六进制），
*   J2SE 6.0 = 50（0x32 十六进制），
*   J2SE 5.0 = 49（0x31 十六进制），
*   JDK 1.4 = 48（0x30 十六进制），
*   JDK 1.3 = 47（0x2F 十六进制），
*   JDK 1.2 = 46（0x2E 十六进制），
*   JDK 1.1 = 45（0x2D 十六进制）。

51.0 意味着您需要 Java 7 才能运行项目中的一些类。你是对的，是 jTDS 导致了问题（来自[*jTDS JDBC Driver 1.2.7 和 1.3.0 发布*](http://sourceforge.net/p/jtds/news/2012/10/jtds-jdbc-driver-127-and-130-released/)）：

> 版本 1.3.0 是第一个兼容 Java 7 的驱动程序版本，并且

升级到 Java 7（总是一个好主意）或降级到一些较旧的 jTDS 驱动程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-15T18:25:35.063

从[发行说明](http://sourceforge.net/projects/jtds/files/jtds/1.3.0/release%20notes.txt/download)：

> *如果您需要使用 Java 7 之前的 Java 版本，您应该只使用驱动程序的 jTDS 1.2.x 行。*

# c# - WCF 在回调中同时更新对象

> ID：13403474
> 
> 赞同：0
> 
> 时间：2012-11-15T18:03:56.283
> 
> 标签：c#, wcf, callback

是否可以同时正确更新一个回调通道中的多个对象？我现在正在开发一个软件，我已经将多个对象放在一个回调通道下。我的客户应该同时访问这些对象。问题是，只有一个对象正在更新，而其他对象则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:17:49.527

从技术上讲，当您使用 WCF 时，您将尝试像 SOA 那样进行某种设计，因此与其为单个操作多次调用 WCF 服务，不如将其视为一种整体方法，例如 AddNewOrder，并且您的参数为该方法将是一个复杂的对象，如以下类：

```
public class AddNewOrderRequest{
    public List<Products> Products
    public Person BuyerOfOrder
    //etc etc
    //many other elements that need to be persisted
} 
```

然后调用你的 WCF 服务，这样做：

```
AddNewOrderResponse response = MyOrderService.AddOrder(AddNewOrderRequest request); 
```

我希望，它有帮助。

# jquery - 为什么我的自定义样式选择下拉表单会落在其他表单后面？

> ID：13403475
> 
> 赞同：1
> 
> 时间：2012-11-15T18:04:04.113
> 
> 标签：jquery, html, css, forms

我需要创建自定义样式的选择下拉菜单（有三个）表单输入。我已经使用 jquery 来完成此操作，因为我不知道在 CSS 中执行此操作的好方法。我遇到的问题是，尽管弄乱了各种元素的 z-index，但菜单的下拉菜单却落后于其他表单输入。我已经查看了每个问题的答案： [为什么下拉菜单隐藏在 jQuery 按钮后面？](https://stackoverflow.com/questions/12713882/why-is-the-drop-down-menu-hiding-behind-jquery-button)（基本上是我遇到的确切问题 - 没有找到好的解决方案） [下拉隐藏在横幅按钮后面](https://stackoverflow.com/questions/4900420/drop-down-being-hidden-behind-banner-button)

但是，这些解决方案似乎对我不起作用。您可以在此处查看问题的工作版本：http: [//jsfiddle.net/SANdM/5/](http://jsfiddle.net/SANdM/5/)

这是选择代码（其中有 3 个）：

```
<select name="data[Product][to_relationship]" class="input-medium" id="to_relationship">
  <option value=""></option>
  <option value="F|1|Mother">Mother</option>
  <option value="M|1|Father">Father</option>
  <option value="M|2|Boyfriend">Boyfriend</option>
  <option value="F|2|Girlfriend">Girlfriend</option>
  <option value="F|3|Friend (F)">Friend (F)</option>
  <option value="M|3|Friend (M)">Friend (M)</option>
</select> 
```

这是将选择转换为ul的jquery代码：

```
$('select').each(function() {
    //esape the square brackets in the name attribute

    function $escape(string) {
        return string.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1');
    }

    function $unescape(string) {
        return string.replace(/\\/g, '');
    }
    // create new ul to replace select
    $(this).after('<ul class="select"></ul>');

    // define objects
    var $this = $(this); // exising <select> element
    var $select = $this.next('ul.select').eq(0); // new <ul> version of the select
    var $form = $this.parents('form').eq(0); // the containing form
    // define variables
    var id = $this.attr('id'); // id of the <select>
    // name of the <select>
    var name = $escape($this.attr('name')); // name of the <select>
    // wrap the new ul in a div we can use to anchor positioning
    $select.wrap('<div class="select-container"/>');

    // set a custom data attribute to maintain the name from the original select on the new ul
    $select.data('name', name);
    $select.attr('id', id);
    // grab the first <option> item in the <select> and populate the currently selected (first) option in the ul
    $select.append('<li class="current">' + $('option', $this).eq(0).html() + '<span class="value">' + $('option', $this).eq(0).val() + '</span></li>');

    // duplicate the rest of <option>s in select to ul
    $('option', $this).each(function() {
        $select.append('<li>' + $(this).html() + '<span class="value">' + $(this).val() + '</span></li>');
    });

    // add hidden field to form to capture value from ul
    $form.append('<input type="hidden" name="' + $unescape(name) + '" value="' + $('option', $this).eq(0).val() + '" />');

    // remove the old <select> now that we've built our new ul
    $this.remove();
});
$('.select li.current').click(function() {

    // toggle the visible state of the ul
    $(this).parents('ul.select').toggleClass('active');
});

$('.select li:not(.current)').click(function() {

    // objects
    var $this = $(this);
    var $select = $this.parents('ul').eq(0);
    var $hidden = $('input[name=' + $select.data('name') + ']');
    var $current = $('.current', $select);

    // set the current text
    $current.html($this.html());

    // close the ul
    $select.removeClass('active');

    // populate the hidden input with the new value
    $hidden.val($this.find('.value').text());
});
$('body, html').mouseup(function() {
    if ($('.select.active').length != 0) {$('.select.active').removeClass('active');}
});​ 
```

样式化的 CSS 是：

```
.select-container {
    float: left;
    height: 40px;
    min-width: 170px;
    margin-right: 10px;
    position:relative;
}
.pull-left{float:left}

ul.select {
    list-style: none;
    color: #ee3925;
    width: 170px;
    border: 3px solid #ee3925;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
      border-radius: 8px;
    position: absolute;
    background-color:#FFF;
}

ul.select li {
    min-width: 100px;
    padding:0 10px;
    height: 30px;
    line-height: 30px;
    border: 0px solid #FFF;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    background-color:#FFF;
}

ul.select li:not(.current) {
   display: none;

}

ul.select.active li {
    display: block;
}

ul.select li.current {
    cursor: pointer;
    font-weight:bold;
}

ul.select li:hover {
    cursor: pointer;
}

.value{display:none;} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:10:09.173

只需设置元素活动类的 z-index css 属性：

```
.active{z-index:9999} 
```

[http://jsfiddle.net/2FbWg/](http://jsfiddle.net/2FbWg/)

# php - 将考试成绩结果传递给mysql查询

> ID：13403477
> 
> 赞同：0
> 
> 时间：2012-11-15T18:04:10.987
> 
> 标签：php, javascript, jquery

我一直在与 jQuiz 一起进行测验：http: [//www.fatihacet.com/lab/jQuiz/](http://www.fatihacet.com/lab/jQuiz/)

如果你参加考试，你会看到它以 90/100 的格式显示你的分数（它只有四个问题）。

您如何将用户获得的分数传递给变量以执行 sql 和 IF 语句？

在 jQuiz.js 文件的底部有以下代码：

```
 $('.btnShowResult').click(function(){
            $('#progress').width(300);
            $('#progressKeeper').hide();
            var results = jQuiz.checkAnswers();
            var resultSet = '';
            var trueCount = 0;
            for (var i = 0, ii = results.length; i < ii; i++){
                if (results[i] == true) trueCount++;
                resultSet += '<div> Question ' + (i + 1) + ' is ' + results[i] + '</div>'
            }
            resultSet += '<div class="totalScore">Your total score is ' + trueCount * 20 + ' / 100</div>'
            $('#resultKeeper').html(resultSet).show();
        }) 
```

我试过

```
$Count = var results;

if($Count >= "90")
{
   $award = $db->exec("UPDATE users SET test='passed' WHERE username='$username'");
} 
```

我觉得我的想法是正确的，但只是错过了一些至关重要的东西，因为它没有工作或做任何事情。感谢您给我的任何指导或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:26:10.887

你是从错误的角度来的。

1.  如果某人有技术头脑，他们很容易假装通过你的测验。他们需要做的就是启动浏览器的开发工具并编辑页面上的数据。你最好使用不依赖于来自客户端的信任数据的东西。当然，这可能只是一个无聊的测验，用户是否通过并不重要。
2.  JavaScript 在客户端运行，而 PHP 在服务器上运行。他们不能以这种方式共享变量。您需要以某种方式将分数发送到服务器。[这个问题](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)可能是一个很好的起点。

还请确保 $username 来自您信任的来源（即不是客户端）。否则你需要担心 SQL 注入。即使您信任它，您也需要确保它不包含撇号。你真的应该使用[准备好的语句/参数化查询](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)。

# sql - 包括经理层级

> ID：13403479
> 
> 赞同：2
> 
> 时间：2012-11-15T18:04:12.210
> 
> 标签：sql, sql-server, hierarchy, peoplesoft

我得到了这个代码，它目前根据给定的标准对呼叫中心进行排名。我的任务是将此排名从基于中心更改为副总监（AKA AD、经理、BottomUpLevel02）。

问题是，我没有很多实际创建表格的经验。我通常会操纵视图，所以我确信这里有一些我严重缺乏的语法规则。

这是代码：

```
SET NOCOUNT ON 
DECLARE @StartDate SMALLDATETIME, 
        @EndDate SMALLDATETIME 
SET @StartDate = '2012/07/01' 
SET @EndDate = '2012/07/31' 

IF OBJECT_ID('tempdb..#ACSResults') IS NOT NULL DROP TABLE #ACSResults 

CREATE TABLE #ACSResults (AreaID VARCHAR(4), Location VARCHAR(50), 
                          MonthName VARCHAR(6),
                          RepResolve FLOAT, ERP FLOAT)
INSERT INTO #ACSResults 
SELECT a.area, a.location,
a.monthname,
CASE WHEN SUM(CASE WHEN a.RepResolve IN ('1','0') 
                        THEN 1 
                   ELSE 0 END) = 0 
          THEN NULL  
          ELSE CAST(SUM(CASE WHEN a.RepResolve = '1' 
                                  THEN 1 
                             ELSE 0 END)AS FLOAT) / CAST(SUM(CASE WHEN a.RepResolve IN ('1','0') 
                                                                       THEN 1 
                                                                  ELSE 0 END) AS FLOAT) END AS REPRESOLVE,
CASE WHEN SUM(CASE WHEN a.ERP IN ('0','1','2','3','4','5','6','7','8', '9', '10') 
                        THEN 1 
                   ELSE 0 END) = 0 
          THEN NULL 
     ELSE (CAST(SUM(CASE WHEN a.ERP IN ('8', '9', '10') 
                              THEN 1 
                         ELSE 0 END) AS FLOAT) / CAST(SUM(CASE WHEN a.ERP in ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10') 
                                                                    THEN 1 
                                                               ELSE 0 END) AS FLOAT))END AS ERP

FROM (SELECT CASE WHEN vl.virtuallocationtypeid =13 
                       THEN 'PP'
                  WHEN eh.PeopleSoftDepartmentID IN ('2922', '9050', '9136', '9130','9134','9135', '9137', '9060') 
                       THEN 'FS'
                  WHEN eh.PeopleSoftDepartmentID ='2390' 
                       THEN 'CMO'
                  WHEN eh.virtuallocationtypeid = 3 
                  OR eh.peoplesoftDepartmentid IN ('9165', '9166','9157','9167','<<OSVBSC>>') 
                       THEN 'BSC'
                  WHEN (eh.virtuallocationid IN ('111', '113', '114', '115', '116', '118', '119', '120', '122', '123') 
                        AND acs.OfferDate  < '04/01/2011') 
                  OR (eh.virtuallocationid IN ('116','120','123') 
                      AND acs.OfferDate  >= '04/01/2011') 
                        THEN 'SPC2'
                  WHEN (eh.virtuallocationid IN ('112', '121', '110') 
                        AND acs.OfferDate  >= '07/01/2011') 
                       THEN 'SPC2'
                  WHEN (eh.virtuallocationid IN ('99') 
                        AND acs.OfferDate < '07/01/2011') 
                        AND eh.PeopleSoftDepartmentID IN ('9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>') 
                       THEN 'SPC2'
                  WHEN eh.EmployeeTypeID = 'V' 
                       THEN 'SPC'
                  WHEN vl.virtuallocationtypeid =14 
                       THEN 'SPC2'
                  WHEN (eh.virtuallocationID IS NULL 
                        AND eh.AreaId IS NULL) 
                       THEN eh.PeopleSoftAreaID 
                  WHEN eh.virtuallocationID IS NULL 
                       THEN eh.AreaID 
                       ELSE vl.AreaId END AS Area,
             CASE WHEN eh.VirtualLocationID = 102 
                       THEN 'HQ Quality - GSC'
                  WHEN eh.peoplesoftDepartmentid IN ('9165', '9166','9167') 
                       THEN 'GSC'
                  WHEN eh.peoplesoftdepartmentid ='<<OSVAOL>>' 
                  AND eh.virtuallocationid =64  
                       THEN 'ALORICA AOL'
                  WHEN (eh.virtuallocationid IN ('99', '148')
                        AND eh.PeopleSoftDepartmentID IN ('9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>')) 
                       THEN 'Wichita Falls (WDS) - Tech'
                  WHEN eh.virtuallocationID IS NULL 
                  OR vl.VirtualLocationTypeID = 4 
                       THEN 'Others'
                  ELSE vl.VirtualLocationDescription END AS Location,
             CASE WHEN eh.PeopleSoftDepartmentID IN ( '9180', '<<WEBILING>>','<<OSVSPN>>') 
                       THEN 'Bilingual'
                  WHEN eh.PeopleSoftDepartmentID IN ( '9150', '9440', '9370', '9260', '9330', '9460','9155','9215','9157','9175','<<OSVBSC>>') 
                       THEN 'BSC'
                  WHEN eh.PeopleSoftDepartmentID IN ( '9395', '9010', '9341', '9340', '9450', '9131', '9025', '10014901', '<<SO_WEVIS>>', '<<WE_MWVIS>>', '<<WEVIS>>', '<<NEVIS>>', '<<OSCCALTEL>>', '<<SOVIS>>', '<<NE_MWVIS>>', '<<MWVIS>>', '<<OSVCS>>') 
                       THEN 'Care'
                  WHEN eh.PeopleSoftDepartmentID IN ('9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>' ) 
                       THEN 'Tech'
                  WHEN eh.PeopleSoftDepartmentID IN ('<<AOL_WEVIS>>', '<<OSVAOL>>') 
                       THEN 'AOL'
                  WHEN eh.peoplesoftdepartmentid IN ('<<OSVCS_TCS>>', '<<OSVOB_TCS>>')
                       THEN 'New Hire Transition'
                  WHEN eh.PeopleSoftDepartmentID = '9390' 
                       THEN 'EPP'
                  WHEN eh.PeopleSoftDepartmentID = '9120' 
                       THEN 'ERT'
                  WHEN eh.PeopleSoftDepartmentID = '9190' 
                       THEN 'IRT'
                  WHEN eh.PeopleSoftDepartmentID = '9085' 
                       THEN 'Bilingual Tech'
                  WHEN eh.PeopleSoftDepartmentID IN ('9490', '<<LNP>>','<<OSVLNP>>')
                       THEN 'LNP'
                  WHEN eh.PeopleSoftDepartmentID = '9070' 
                       THEN 'Retention'
                  WHEN eh.PeopleSoftDepartmentID = '9115' 
                       THEN 'GLOBAL'
                  WHEN eh.PeopleSoftDepartmentID IN ('<<ONEBILL>>', '<<OSVOB>>') 
                       THEN 'Onebill'
                  WHEN eh.peoplesoftdepartmentid = '<<PPCARE>>' 
                       THEN 'Prepaid Care'
                  WHEN eh.peoplesoftdepartmentid = '<<PPTECH>>' 
                       THEN 'Prepaid Tech'
                  ELSE 'Other' END AS DeptGroup,
             psd.PeopleSoftDepartmentDescription AS Dept, 
             acs.IVRCallID, 
             acs.OfferDate, 
             acs.EmployeeID,
             acs.ACSSUserID, 
             Cast(acs.DidRepResolve as Float) As RepResolve,
             acs.Question1 AS FCR, 
             acs.Question2 AS ERP, 
             acs.Question3 AS NPS, 
             acs.ACSSCallID,
             month (acs.Offerdate) AS MonthName

      FROM dbCustomerSurvey.Detail.vwAfterCallSurvey acs 
      LEFT JOIN dbEmployee.Summary.vwEmployeeHistory eh 
                ON acs.EmployeeID = eh.EmployeeID 
                AND acs.OfferDate BETWEEN eh.StartDate 
                AND eh.EndDate 
      LEFT JOIN dbEmployee.Config.vwName Rep 
                ON eh.EmployeeID = Rep.EmployeeID 
      LEFT JOIN dbEmployee.Config.vwName Sup 
                ON eh.BottomUp01ID = Sup.EmployeeID
      LEFT JOIN dbEmployee.Config.vwName Mgr 
                ON eh.BottomUp02ID = Mgr.EmployeeID
      LEFT JOIN dbEmployee.Config.vwName Dir 
                ON eh.BottomUp03ID = Dir.EmployeeID
      LEFT JOIN dbEmployee.Config.vwVirtualLocation vl 
                ON eh.VirtualLocationID = vl.VirtualLocationID 
      LEFT JOIN dbEmployee.Config.vwDepartment d 
                ON eh.DepartmentID = d.DepartmentID 
      LEFT JOIN dbEmployee.Config.vwPeopleSoftDepartment psd
                ON eh.PeopleSoftDepartmentID = psd.PeopleSoftDepartmentID
      WHERE acs.CurrentStatus IN ('Completed', 'COMP') 
            AND acs.surveytype IN ('ACS_FCR_Rep_Perform', 'ACS_FCR_Rep_Perform-prepaid', 'ACS_Rep_Perform_BSC2', 'ACS_Rep_Perform_Gov') 
            AND acs.OfferDate BETWEEN @StartDate AND @EndDate) a 

WHERE a.Area IN ('WE', 'mw','ne','so') 
      AND a.Location NOT IN ('West Area Staff - CS', 'Northeast Area Staff - CS', 'Midwest Area Staff - CS', 'Others', 'West Area Finance - CS', 'Midwest Area Marketing, Sales, & Training', 'South Area Staff - CS', 'Midwest Area Finance - CS', 'Bellevue - CS')
      AND a.deptgroup in ('aol','bilingual','Bilingual Tech','care','global','lnp', 'onebill','other','retention','tech', 'new hire transition') 

GROUP BY a.area, a.location, a.monthname 
```

-- 重复表

```
IF OBJECT_ID('tempdb..#HRRep')  IS NOT NULL DROP TABLE #HRRep 

CREATE TABLE #HRRep (AreaID VARCHAR(4), Location VARCHAR(50), 
                     MonthName VARCHAR(6), 
                     HourRepeatPercent FLOAT)
INSERT INTO #HRRep (AreaID, Location, MonthName, HourRepeatPercent) 
SELECT eh.AreaID, vl.VirtualLocationDescription, 
       MONTH (acs.statdate) AS MonthName,

       CAST(SUM(acs.Repeats2Hr)as FLOAT) / NULLIF(SUM(acs.Calls2Hr), 0) as 'HourRepeatPercent'

FROM dbReportSummary.ReportSummary.vwRepeatCalls2Hr acs WITH (NOLOCK)
LEFT JOIN dbEmployee.Summary.vwEmployeeHistory eh WITH (NoLOCK) 
          ON acs.EmployeeID = eh.EmployeeID 
          AND acs.StatDate BETWEEN eh.StartDate AND eh.EndDate 
LEFT JOIN dbEmployee.Config.vwVirtualLocation vl 
          ON eh.VirtualLocationID = vl.VirtualLocationID 
LEFT JOIN dbEmployee.Config.vwDepartment d 
          ON eh.DepartmentID = d.DepartmentID 
LEFT JOIN dbEmployee.Config.vwPeopleSoftDepartment psd 
          ON eh.PeopleSoftDepartmentID = psd.PeopleSoftDepartmentID

WHERE acs.StatDate BETWEEN @StartDate AND @EndDate
      AND eh.PeopleSoftDepartmentID IN ('9180', '<<WEBILING>>','<<OSVSPN>>', '9150', '9440', '9370', '9260', '9330', '9460','9155','9215','9157','9175','<<OSVBSC>>', '9395', '9010', '9341', '9340', '9450', '9131', '9025', '10014901', '<<SO_WEVIS>>', '<<WE_MWVIS>>', '<<WEVIS>>', '<<NEVIS>>', '<<OSCCALTEL>>', '<<SOVIS>>', '<<NE_MWVIS>>', '<<MWVIS>>', '<<OSVCS>>', '9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>', '<<AOL_WEVIS>>', '<<OSVAOL>>', '<<OSVCS_TCS>>', '<<OSVOB_TCS>>'    , '9390', '9120', '9190', '9085', '9490', '<<LNP>>', '<<OSVLNP>>', '9070', '9115', '<<ONEBILL>>', '<<OSVOB>>', '<<PPCARE>>', '<<PPTECH>>')
      AND eh.AreaID IN ('MW', 'NE', 'SO', 'WE')
      AND vl.VirtualLocationDescription NOT IN ('West Area Staff - CS', 'Northeast Area Staff - CS', 'Midwest Area Staff - CS', 'Others', 'West Area Finance - CS')
AND eh.Titleid IN ('1','2','3','509') 

GROUPBY  eh.AreaID, vl.VirtualLocationDescription, MONTH (acs.statdate) 
```

-- (?) --

```
SELECT a.Location, a.RepResolve, a.RRRank, a.ERP, a.ERPRank,a.HourRepeatPercent,
       a.RepeatRank, (a.RRRank + a.ERPRank+a.RepeatRank) as 'Total Rank Points', 
       RANK() OVER(ORDER BY (a.RRRank + a.ERPRank+a.RepeatRank) ASC, a.RepResolve DESC) AS 'Overall Rank'
FROM (SELECT a.Location, a.RepResolve, 
             RANK() OVER(ORDER BY a.RepResolve DESC) AS RRRank, a.ERP, 
             RANK() OVER(ORDER BY a.ERP DESC) AS ERPRank, b.HourRepeatPercent, 
             RANK() OVER(ORDER BY b.HourRepeatPercent ASC) AS RepeatRank
      FROM #ACSResults AS A
      LEFT JOIN #HRRep AS B 
                ON a.areaid = b.areaid 
                AND a.monthname = b.monthname 
                AND a.location = b.location) a
GROUP BY a.Location, a.RepResolve, a.RRRank, a.ERP, a.ERPRank,a.HourRepeatPercent,
         a.RepeatRank, (a.RRRank + a.ERPRank + a.RepeatRank) 
```

当我尝试将 AD 添加到组合中时，我不断收到有关 select 子句与 insert 子句不匹配的错误。任何人都可以指出需要修改以包含 AD 的区域吗？

编辑：我能够成功添加一个广告列！新问题：结果有点偏离。在根据位置对结果进行排名之前，每个不同的位置都会根据总点数分配一个排名。它很干净，数字加起来了。现在有重复的AD，排名倒退（总排名积分最少的被列为第一名）。

我只是将 AD 列添加到 INSERT 语句和 select 语句中。谁能告诉我，除了在查询的适当位置添加 AD 列之外，我是否应该修改查询的任何操作或功能以反映给定日期范围的真实排名？请随时要求对此的任何部分进行澄清。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:34:28.833

让发条缪斯的想法更加生动。如果您被允许创建表，请从（用您的数据库实际拥有的任何内容替换 nvarchars）开始

```
Create Table dbo.DepartmentGroupLookup (
  PeopleSoftDepartmentID nvarchar(30) Primary Key Not Null,
  DeptGroup nvarchar(30) not null
)

Insert Into dbo.DepartmentGroupLookup (PeopleSoftDepartmentID, DeptGroup) Values
  ('9180', 'Bilingual'), ('<<WEBILING>>', 'Bilingual'), ..., ('9150', 'BSC'), ... etc

Create Function dbo.LookupLocation(
  @VirtualLocationID as int, 
  @VirtualLocationDescription nvarchar(30),
  @VirtualLocationTypeID int,
  @PeopleSoftDepartmentID nvarchar(30)
) Returns nvarchar(30) As
Begin
  Return Case 
    When @VirtualLocationID = 102 Then 'HQ Quality - GSC'
    When @PeopleSoftDepartmentID In ('9165', '9166','9167') Then 'GSC'
    When @PeopleSoftDepartmentID ='<<OSVAOL>>' And @VirtualLocationID = 64 Then 'ALORICA AOL'
    When @VirtualLocationID In ('99', '148') And 
      @PeopleSoftDepartmentID In (
        '9030', '9080', '9355', '9040', '<<OSCCALTECH>>', 
        '<<WDTSMO>>', '9195','<<OSVTS>>'
      ) Then 'Wichita Falls (WDS) - Tech'
    When @VirtualLocationID Is Null Or @VirtualLocationTypeID = 4 Then 'Others'
    Else @VirtualLocationDescription 
    End
 End 
```

对区域查找做类似的事情，现在你的第一个内部查询变成了

```
Select
  dbo.LookupArea(eh.virtuallocationID, v1.virtuallocationtypeid, vl.AreaId,  eh.PeopleSoftAreaID,
      eh.PeopleSoftDepartmentID, acs.OfferDate, eh.EmployeeTypeID) As Area, -- There may be other dependencies
  dbo.LookupLocation(eh.VirtualLocationID, vl.VirtualLocationDescription,
      vl.VirtualLocationTypeID, eh.peoplesoftDepartmentid) As Location,
  IsNull(dgl.DeptGroup, 'Other') AS DeptGroup,
  psd.PeopleSoftDepartmentDescription AS Dept, 
  acs.IVRCallID, 
  acs.OfferDate, 
  acs.EmployeeID,
  acs.ACSSUserID, 
  Cast(acs.DidRepResolve as Float) As RepResolve,
  acs.Question1 AS FCR, 
  acs.Question2 AS ERP, 
  acs.Question3 AS NPS, 
  acs.ACSSCallID,
  Month(acs.Offerdate) AS MonthName
From
  dbCustomerSurvey.Detail.vwAfterCallSurvey acs 
    Left Outer Join
  dbEmployee.Summary.vwEmployeeHistory eh 
    On acs.EmployeeID = eh.EmployeeID And acs.OfferDate Between eh.StartDate And eh.EndDate 
    Left Outer Join
  dbEmployee.Config.vwName Rep 
    On eh.EmployeeID = Rep.EmployeeID 
    Left Outer Join 
  dbEmployee.Config.vwName Sup 
    On eh.BottomUp01ID = Sup.EmployeeID
    Left Outer Join
  dbEmployee.Config.vwName Mgr 
    On eh.BottomUp02ID = Mgr.EmployeeID
    Left Outer Join
  dbEmployee.Config.vwName Dir 
    On eh.BottomUp03ID = Dir.EmployeeID
    Left Outer Join
  dbEmployee.Config.vwVirtualLocation vl 
    On eh.VirtualLocationID = vl.VirtualLocationID 
    Left Outer Join
  dbEmployee.Config.vwDepartment d 
    On eh.DepartmentID = d.DepartmentID 
    Left Outer Join
  dbEmployee.Config.vwPeopleSoftDepartment psd
    On eh.PeopleSoftDepartmentID = psd.PeopleSoftDepartmentID
    Left Outer Join
  dbo.DepartmentGroupLookup dgl
    On eh.PeopleSoftDepartmentID = dgl.PeopleSoftDepartmentID
Where 
 acs.CurrentStatus In ('Completed', 'COMP') And
 acs.surveytype In (
     'ACS_FCR_Rep_Perform', 'ACS_FCR_Rep_Perform-prepaid',
     'ACS_Rep_Perform_BSC2', 'ACS_Rep_Perform_Gov'
 ) And
 acs.OfferDate Between @StartDate And @EndDate 
```

目标是以这种方式继续简化（或至少将东西移出视线），直到可以理解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:53:51.720

劳伦斯说得对。

当 SQL 代码开始看起来像这样时，缩进是我（和每个人）的朋友。如果派生集是缩进的，则更容易看到其定义的开始和结束位置：

```
SELECT some columns 
FROM
     (lots of hideous code) SetA
WHERE
    Things AND
    More Things 
```

我已经从你不幸处理的代码片段中剪掉了大部分的丑陋之处：

```
CREATE TABLE #ACSResults (AreaID VARCHAR(4), Location VARCHAR(50),MonthName VARCHAR(6), RepResolve FLOAT, ERP FLOAT)
INSERT INTO #ACSResults 
  SELECT 
-- ColListStart
a.area,
a.location,
a.monthname,

 CASE WHEN SUM(CASE WHEN a.RepResolve IN ('1','0') THEN 1 ELSE 0 END) = 0 THEN NULL  ELSE CAST(SUM(CASE WHEN a.RepResolve = '1' THEN 1 ELSE 0 END)AS FLOAT) / CAST(SUM(CASE WHEN a.RepResolve IN ('1','0') THEN 1 ELSE 0 END) AS FLOAT) END AS REPRESOLVE,
CASE WHEN SUM(CASE WHEN a.ERP IN ('0','1','2','3','4','5','6','7','8', '9', '10') THEN 1 ELSE 0 END) = 0 THEN NULL ELSE (CAST(SUM(CASE WHEN a.ERP IN ('8', '9', '10') THEN 1 ELSE 0 END) AS FLOAT) / CAST(SUM(CASE WHEN a.ERP in ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10') THEN 1 ELSE 0 END) AS FLOAT))END AS ERP
-- ColListEnd
FROM
    (/*Eurgh!  Hideous legacy code that makes my eyes bleed just glancing at it*/) a 

Where  a.Area IN ('WE', 'mw','ne','so') 
and a.Location not in ('West Area Staff - CS', 'Northeast Area Staff - CS', 'Midwest Area Staff - CS', 'Others', 'West Area Finance - CS', 'Midwest Area Marketing, Sales, & Training', 'South Area Staff - CS', 'Midwest Area Finance - CS', 'Bellevue - CS')
and a.deptgroup in ('aol','bilingual','Bilingual Tech','care','global','lnp', 'onebill','other','retention','tech', 'new hire transition') 

group by 
a.area,
a.location,
a.monthname

--------------------------------------------------------------------------------REPEAT TABLE------------------------------------------------------------------------------------------------------
 IF OBJECT_ID('tempdb..#HRRep') 
IS NOT NULL DROP TABLE #HRRep 
CREATE TABLE #HRRep (AreaID VARCHAR(4), Location VARCHAR(50),MonthName VARCHAR(6), HourRepeatPercent FLOAT)
INSERT INTO #HRRep (AreaID, Location, MonthName, HourRepeatPercent) 
  Select
  -- ColList Start
  eh.AreaID, vl.VirtualLocationDescription, Month (acs.statdate) AS MonthName,

Cast(Sum(acs.Repeats2Hr)as float) /nullif(Sum(acs.Calls2Hr), 0) as 'HourRepeatPercent'
    -- COlListEnd
From 
    /* More hideous legacy code */ 
```

如果您只是确保 SELECT 中的列与 INSERT 引用的表中的列匹配（我的评论 -ColListStart 和 -ColListEnd 定义了这个区域），那么“INSERT 和 SELECT 中的列必须匹配”错误将会消失。因此，您将额外的列添加到每个 CREATE TABLE，然后添加它（也许，最初，就像文字

```
'AnAreaDirector' AS AreaDirector 
```

) 到 SELECT 语句，当然按顺序放在正确的位置。您还将在每个 SELECT 的末尾（即在其他所有内容之后）添加一个 GROUP BY AreaDirector。

然后真正的乐趣开始了，这是挖掘 () 中的内容（我已经剪掉了），并弄清楚您是否可以从其中引用的表中获取 AD 列，或者您是否需要加入另一张桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:16:50.917

> 编辑：我能够成功添加一个广告列！新问题：结果有点偏离。在根据位置对结果进行排名之前，每个不同的位置都会根据总点数分配一个排名。它很干净，数字加起来了。现在有重复的AD，排名倒退（总排名积分最少的被列为第一名）。
> 
> 我只是将 AD 列添加到 INSERT 语句和 select 语句中。谁能告诉我，除了在查询的适当位置添加 AD 列之外，我是否应该修改查询的任何操作或功能以反映给定日期范围的真实排名？请随时要求对此的任何部分进行澄清。提前感谢您提供的任何帮助。

您的两个临时表（#ACS 和##HRRep）中都需要 AD 列，并且每个临时表（即 INSERT INTO .... SELECT FROM）的填充应该在 GROUP BY 中有 AD 列。然后，您的最终 SELECT 将需要连接 AD 列上的两个表以及连接表达式中已经存在的其他列。

我怀疑您在最终 SELECT 中不需要 GROUP BY，因为（我*认为*）这两个表已经具有按 areaid、location 等聚合的结果，并且 RANK() 是单行函数而不是像这样的聚合和：

```
LEFT JOIN #HRRep AS B 
                ON a.areaid = b.areaid 
                AND a.monthname = b.monthname 
                AND a.location = b.location) a
/* Probably don't need this bit
GROUP BY a.Location, a.RepResolve, a.RRRank, a.ERP, a.ERPRank,a.HourRepeatPercent,
         a.RepeatRank, (a.RRRank + a.ERPRank + a.RepeatRank)
But this bit: */
ORDER BY (a.RRRank+a.EPRank+a.RepeatRank) DESC 
```

Laurence 建议创建一个映射表（他敢于深入研究第一组中的“丑陋”），因为它将“丑陋”隔离在一个地方。

# c# - linq 按对象分组

> ID：13403483
> 
> 赞同：2
> 
> 时间：2012-11-15T18:04:23.493
> 
> 标签：c#, linq, lambda, group-by

我有一个对象，其中包含另一个对象的列表，如下所示：

```
 class cl
    {
      List<a> a ;
      public List<a> listofA
      {
      get; set;
      }
    }

    class a
    {
    //other properties
       string comment ;
      public string comment
      {
      get; set;
      }
    } 
```

现在我如何进行 linq 查询以查看评论是否属于某个字符串，这是我的查询：

```
 var query = (from c in scope.Extent<cl>()
                         where  c.Date >= dateFrom && c.Date < dateTo
                         && c.Actions.Where(a => (a.comment== "") )
                         orderby c.Date.Value.Date
                         group c by c.Date.Value.Date into grpDate
                          select new { grpDate.Key, items = grpDate }); 
```

但我收到错误消息：

```
Error   15  Operator '&&' cannot be applied to operands of type 'bool' and 'System.Collections.Generic.IEnumerable<>
Error   13  Cannot convert lambda expression to type 'string' because it is not a delegate type 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:08:41.923

问题是你正在使用`c.Actions.Where`. 这将返回a ，而`IEnumerable<T>`不是 a `bool`，但您正在检查需要布尔值的 where 子句。

您最有可能通过使用`Any`而不是解决此问题`Where`：

```
 var query = (from c in scope.Extent<cl>()
                     where  c.Date >= dateFrom && c.Date < dateTo
                     && c.Actions.Any(a => (a.comment== "") )
                     orderby c.Date.Value.Date
                     group c by c.Date.Value.Date into grpDate
                      select new { grpDate.Key, items = grpDate }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:08:05.137

您正在尝试将 的`c.Actions.Where(a => (a.comment== "") )`结果`IEnumerable`用作`bool`. 如果我理解正确，您可能希望在此表达式中使用`Any`而不是`Where`- 或其他聚合函数，如`All`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:08:17.850

`c.Actions.Where(a => (a.comment== "") )`返回操作列表，但您将其用作布尔值（带有`&&`）。您应该使用`.Any()`来测试是否有匹配的东西，或者重构以便真/假测试与`Where()`

我会给出更具体的建议，但我不确定你为什么要与空字符串进行比较。

# php - 使用 AJAX 报告服务器启动或关闭？

> ID：13403485
> 
> 赞同：1
> 
> 时间：2012-11-15T18:04:29.613
> 
> 标签：php, javascript, ajax

我正在开发一个跟踪机器重新启动的页面，并在它出现故障时报告，然后在其备份时报告

我创建了一个小的 PHP 页面，如果服务器 ping，则打印 0，如果没有，则打印 1

```
$SysName = strtoupper($_POST["SysName"]);
$ping = exec("ping -n 1 -w 1 $SysName", $input, $Presult);
echo $Presult; 
```

无论如何使用 AJAX 来不断地重新加载这个页面，检查内容是 0 还是 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:06:34.263

您可以使用 setInterval() 每 t 毫秒调用一次 ajax 函数：

```
window.setInterval(someAJAXfunction,milliseconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:11:06.957

如果您使用的是 jQuery：

```
$.ajax('YOUR-PHP-SCRIPT-URL').done(function(data){
  isUp = parseInt(data);

  // Do something with isUP
}); 
```

# .net - VS 2012 (VB.net) 忽略 Windows 7 64 位上未处理的异常

> ID：13403487
> 
> 赞同：6
> 
> 时间：2012-11-15T18:04:41.290
> 
> 标签：.net, vb.net, visual-studio-2012

> **可能重复：**
> [VS2010 在 64 位版本的 Windows 上的 WinForms 应用程序中不显示未处理的异常消息](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)

我刚刚安装并开始使用 VS2012。之前用的是VS2008 Express。VS2012 在 Win 7 64 位上运行。（以前的开发环境是 XP 32 位）。

刚刚完成了一个基础研究项目（WinForms，VB），发现VS忽略了未处理的异常。最后一行*应该*会导致异常：

```
With cmd 
 .Connection = sqlConn
 .CommandType = CommandType.StoredProcedure
 .CommandText = "NameOfStoredProcedure"
 .Parameters.Add("@TheParameterName", SqlDbType.Int, -1)
 .Parameters("@TheParameterNameWithATypo").Direction = ParameterDirection.ReturnValue 
```

果然，立即窗口显示：

```
A first chance exception of type 'System.IndexOutOfRangeException' occurred in System.Data.dll 
```

但是代码只是继续运行！

在 Debug/Exceptions 对话框中，我为每种类型的异常设置了一个“Thrown”和“User-Unhandled”复选框。全部勾选“用户未处理”。我不想勾选“Thrown”，因为我将处理异常并且不想中断已处理的异常。（现在，我根本没有 Try...Catch 块——但调试器的行为就像整个项目都包含在一个项目中一样）。

我查看了所有选项等等，但找不到任何神奇的“打开异常中断”选项。我要寻求帮助的不是我的代码——而是因为发生这种情况，我无法相信调试器会检测到我不可避免地会犯的愚蠢错误。

发现另一个[问题](https://stackoverflow.com/questions/7572995/how-can-i-get-winforms-to-stop-silently-ignoring-unhandled-exceptions)，有人遇到这个问题，问题似乎与Win64有关。但是VS真的不能在Win64上使用吗？我不能完全相信——但没有有效地打破未处理的异常会使其无法使用。

**编辑：** 感谢您的所有评论。我尝试了 Neolisk 的解决方案，但不得不稍微更改代码，因为两个处理程序的签名不同：

```
Public Sub Main()
    AddHandler Application.ThreadException, AddressOf ThreadExceptionHandler
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException)
    AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledExceptionHandler

    Form1.Show()
End Sub

Friend Sub ThreadExceptionHandler(sender As Object, e As System.Threading.ThreadExceptionEventArgs)

End Sub

Friend Sub UnhandledExceptionhandler(sender As Object, E As System.UnhandledExceptionEventArgs)
End Sub 
```

这有效 - 谢谢！但它要求我禁用应用程序框架（否则应用程序不能使用 Sub Main 作为启动）。TBH 我是一个 .NET 初学者，甚至无法确定它的效果/优点/缺点是什么。我已经阅读了你们都提供的链接，并了解正在发生的事情，但如果我可以避免的话，我不想参与其中......

[幸运的是，在KB976038](http://support.microsoft.com/kb/976038)中应用修补程序对我有用。应该在调试模式下导致异常和执行中断的代码，运行 Form_Load 事件，现在按预期执行此操作。这是启用了应用程序框架，Form1 作为启动对象，上面的代码被注释掉了。

**EDIT2：** 不，该修补程序不起作用。原始的“错误参数名称”行导致代码因异常而停止。但是带有 DBNull->Int32 转换异常的后续行只是导致了这个错误框（并且没有调试的可能性）：

> vshost.exe - 应用程序错误内部错误：Debugger::HandleIPCEvent 中未处理的异常。事件 ID=0x246 异常代码=0x0000005，Eip=0x70d58101。进程 ID=0xbec (3052)，线程 ID=0xb1c (2844)。

我非常感谢您的所有评论 - 但在我看来，这是一个大问题：如果开发人员不相信异常可以调试，他们如何使用 VS？每次我想开发某些东西时，我不应该记住从 Sub Main 开始并放入那些特殊的行：或者记住不能在 Form_Load 中使用代码？我将建议我们停止使用 Win7 64 位作为开发操作系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:13:53.023

我认为你有你的代码`Form_Load`，因为这会解释它。如果是这种情况，请在此处查看我的问题：[Explain critical bug in Visual Studio 2010 and up, WinForms and WPF](https://stackoverflow.com/questions/13161947/explain-critical-bug-in-visual-studio-2010-and-up-winforms-and-wpf)。这是一个已知问题。您需要将您的代码移出`Form_Load`或让您的应用程序开始`Sub Main`并放入您已经为 C# 找到的那 3 条神奇的行。以下是 VB.NET 的相同 3 行：

```
AddHandler Application.ThreadException, AddressOf YourExceptionHandler
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException)
AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf YourExceptionHandler 
```

据我记得，第一行实际上解决了这个问题，另外两行是为了掩盖其他*神秘*的错误。为了安全起见，始终在程序的一开始就将它们全部包含在内并没有什么坏处。`YourExceptionHandler`可以是空方法。添加这 3 行后，异常捕获应该开始按预期工作。

# c++ - 传递 shared_ptr 作为 shared_ptr

> ID：13403490
> 
> 赞同：119
> 
> 时间：2012-11-15T18:04:46.267
> 
> 标签：c++, casting, c++11, shared-ptr, smart-pointers

`shared_ptr`将派生类型的 a 传递给采用基类型 a 的函数的最佳方法是什么`shared_ptr`？

我通常通过`shared_ptr`引用传递 s 以避免不必要的复制：

```
int foo(const shared_ptr<bar>& ptr); 
```

但如果我尝试做类似的事情，这不起作用

```
int foo(const shared_ptr<Base>& ptr);

...

shared_ptr<Derived> bar = make_shared<Derived>();
foo(bar); 
```

我可以使用

```
foo(dynamic_pointer_cast<Base, Derived>(bar)); 
```

但这似乎不是最理想的，原因有两个：

*   对于一个简单的派生到基础的转换， A`dynamic_cast`似乎有点过分。
*   据我了解，`dynamic_pointer_cast`创建指针的副本（尽管是临时副本）以传递给函数。

有更好的解决方案吗？

## 后代更新：

原来是缺少头文件的问题。此外，我在这里尝试做的事情被认为是反模式。一般来说，

*   不影响对象生命周期的函数（即对象在函数的持续时间内保持有效）应该采用普通引用或指针，例如`int foo(bar& b)`.

*   *使用*对象的函数（即给定对象的最终用户）应该采用`unique_ptr`按值，例如`int foo(unique_ptr<bar> b)`. 调用者应该`std::move`将值放入函数中。

*   延长对象生命周期的函数应该采用`shared_ptr`按值，例如`int foo(shared_ptr<bar> b)`. 避免[循环引用](https://en.wikipedia.org/wiki/Circular_reference)的通常建议适用。

有关详细信息，请参阅 Herb Sutter 的[“回归基础”演讲](https://www.youtube.com/watch?v=xnqTKD8uD64)。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2018-07-24T14:08:17.477

**如果您忘记在派生类上指定公共**继承，也会发生这种情况，即如果您像我一样写这个：

```
class Derived : Base
{
}; 
```

代替：

```
class Derived : public Base
{
}; 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-15T18:14:31.657

虽然`Base`和是协变的，**但**`Derived`指向它们的原始指针将相应地起作用，`shared_ptr<Base>`并且`shared_ptr<Derived>`不是协变的。这是处理这个问题的正确和最简单的方法。**`dynamic_pointer_cast`**

 **（**编辑：** `static_pointer_cast`会更合适，因为您正在从派生转换为基础，这是安全的并且不需要运行时检查。请参阅下面的评论。）

但是，如果您的`foo()`函数不希望参与延长生命周期（或者更确切地说，参与对象的共享所有权），那么最好接受 a并在将其传递给时`const Base&`取消引用.`shared_ptr``foo()`

```
void foo(const Base& base);
[...]
shared_ptr<Derived> spDerived = getDerived();
foo(*spDerived); 
```

顺便说一句，因为`shared_ptr`类型不能是协变的，所以协变返回类型之间的隐式转换规则在返回类型时不适用`shared_ptr<T>`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-10-19T18:25:16.633

还要检查`#include`包含派生类的完整声明的头文件是否在源文件中。

我有这个问题。`std::shared<derived>`不会`std::shared<base>`投到. 我已经提前声明了这两个类，以便我可以保存指向它们的指针，但是因为我没有`#include`编译器，所以无法看到一个类是从另一个类派生的。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-15T18:30:21.073

听起来你太努力了。`shared_ptr`复制成本低；这是它的目标之一。通过引用传递它们并没有真正完成太多。如果您不想共享，请传递原始指针。

也就是说，我可以想到两种方法来做到这一点：

```
foo(shared_ptr<Base>(bar));
foo(static_pointer_cast<Base>(bar)); 
```**

# curl - 如何使用 wget 或 curl 下载文件

> ID：13403493
> 
> 赞同：2
> 
> 时间：2012-11-15T18:04:49.433
> 
> 标签：curl, csv, wget

我无法找到从[http://finance.yahoo.com/d/quotes.csv?s=XOM+BBDb.TO+JNJ+MSFT&f=snd1l1yr下载 csv 文件的方法](http://finance.yahoo.com/d/quotes.csv?s=XOM+BBDb.TO+JNJ+MSFT&f=snd1l1yr)

使用 wget 或 curl ，它下载一个文件，但内容不在其中。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:31:49.650

这将起作用：

```
curl -L 'http://finance.yahoo.com/d/quotes.csv?s=XOM+BBDb.TO+JNJ+MSFT&f=snd1l1yr' > joy.csv 
```

# objective-c - iOS 钥匙串，存储更多 kSecValueData 项

> ID：13403496
> 
> 赞同：1
> 
> 时间：2012-11-15T18:04:56.517
> 
> 标签：objective-c, ios, xcode

我正在使用与 ARC 配合使用的 keychainwrapper，您可以使用以下代码将密码存储到钥匙串中：

```
[keychainItem setObject:InputField.text forKey:(__bridge id)(kSecValueData)]; 
```

并通过以下方式解决：

```
NSString *loc_pwd1 = [keychainItem objectForKey:(__bridge NSString*)kSecValueData]; 
```

据我了解， kSecValueData 意味着该值将被加密，但是如果我想存储更多加密值怎么办，您可以使用某种标识符进行存储，这样您就可以拥有多个 kSecValueData 元素。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:31:25.610

您的密钥与钥匙串中的一个条目相关联。您可以存储`NSDictionary`or `NSArray`（取决于您的情况）而不是直接存储`inputField.text`. 因此，如果您需要向该键的对象添加更多值，您只需将其添加到字典/数组中。

我最近也用了iOS钥匙串，我拿起了[SSKeychain](https://github.com/soffes/sskeychain)，它看起来比你的简单一点，值得一看！（我并不是说您使用的那个不好，只是让您知道什么对我有用：P）

# c# - 使用winapi将文本发送到excel表

> ID：13403504
> 
> 赞同：0
> 
> 时间：2012-11-15T18:05:18.983
> 
> 标签：c#, excel, winapi

我有以下问题。某些应用程序会每隔几秒自动打开一个 excel 文件并在其中写入数据。该 excel 文件是独占打开的，我无法从其他应用程序访问。单元格的内容变化很快，所以我需要在打开的文件中读取/写入一些单元格内容。当我说打开时，我的意思是 excel 应用程序是打开的，我正在查看它。

是否可以使用 ac# 应用程序中的 winapi 向打开的 excel 发送消息，以填充某个单元格或读取某个单元格。由于文件被锁定，我需要尝试这种方式，所以我正在考虑使用这种方式访问​​它。

获取 excel 窗口句柄，读取单元格，向单元格发送文本。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:08:42.773

If the instance of Excel is running on the same machine as your C# app then you can use the following to get that instance. I use it in order to grab a user's running instance of Excel in order to read data from their open spreadsheet.

```
private Excel.Application GetCurrentVersionOfExcel()
{
    Excel.Application xlApp;

    // Try to get the currently-running Excel application

    try
    {
        xlApp = (Excel.Application)Marshal.GetActiveObject("Excel.Application");
    }
    catch
    {
        // In case there isn't a version running or the current version hasn't registered itself with the Running Object Table

        xlApp = null;
    }

    return xlApp;
} 
```

If that doesn't quite get you there I also have code to go through all open workbook processes and find the one you're looking for. It's quite long so if it's something you think might work for you then let me know and I'll post it. Basically it works by grabbing window handles and checking the child windows to see if they're workbooks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:11:25.343

您可以尝试使用 DDE（动态数据交换）API 与 Excel 进行交互。例如，DDESend() 函数用于与 excel 进行 DDE 对话。如需更多信息，请访问

[http://office.microsoft.com/en-us/access-help/ddesend-function-HA001228822.aspx](http://office.microsoft.com/en-us/access-help/ddesend-function-HA001228822.aspx)

# objective-c - ALAssetRepresentation fullResolutionImage 永远不会返回

> ID：13403505
> 
> 赞同：1
> 
> 时间：2012-11-15T18:05:19.747
> 
> 标签：objective-c, ios, alassetslibrary

我正在编写一个多线程应用程序，它需要在后台从 ALAssetsLibrary 上传照片。所以我有一个 NSOperation 子类，它通过资产的 URL 找到适当的 ALAsset 并将图像添加到上传队列。

在当前 ALAsset 的上传队列中，我需要从图像中获取元数据，但是我遇到了一个问题：当在 ALAsset 的 ALAssetRepresentation 上调用 -metadata 和 -fullResolutionImage 方法时，它们都不会返回。他们只是无限期地挂在那里。我尝试在 LLDB 中打印这些方法中的每一个的值，但它挂起了调试器，我最终杀死了 Xcode，信号 9 样式。这些方法在后台队列中被调用。

我正在 iPad 2 上测试这些。这是在 -assetForURL:resultBlock:failureBlock 的成功块中找到 ALAsset 时将其添加到上传队列的方法：

```
- (void)addMediaToUploadQueue:(ALAsset *)media {
    @autoreleasepool {
        ALAssetRepresentation *defaultRepresentation = [media defaultRepresentation];
        CGImageRef fullResolutionImage = [defaultRepresentation fullResolutionImage];

        // Return if the user is trying to upload an image which has already been uploaded
        CGFloat scale = [defaultRepresentation scale];
        UIImageOrientation orientation = [defaultRepresentation orientation];

        UIImage *i = [UIImage imageWithCGImage:fullResolutionImage scale:scale orientation:orientation];
        if (![self isImageUnique:i]) return;

        NSDictionary *imageDictionary = [self dictionaryForAsset:media withImage:i];

        dispatch_async(self.background_queue, ^{
            NSManagedObjectContext *ctx = [APPDELEGATE createManagedObjectContextForThread];
            [ctx setUndoManager:nil];

            [ctx performBlock:^{
                ImageEntity *newImage = [NSEntityDescription insertNewObjectForEntityForName:@"ImageEntity"
                                                                    inManagedObjectContext:ctx];

                [newImage updateWithDictionary:imageDictionary
                         inManagedObjectContext:ctx];

                [ctx save:nil];

                [APPDELEGATE saveContext];

                dispatch_async(dispatch_get_main_queue(), ^{
                    [self.fetchedResultsController performFetch:nil];
                });

                    if (!currentlyUploading) {
                        currentlyUploading = YES;
                        [self uploadImage:newImage];
                    }
            }];
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T00:26:28.583

我有一个类似的问题，我正在扯头发试图弄清楚。

原来，虽然我以为我为 ALAssetsLibrary 设置了一个单例，但我的代码没有正确调用它，并且一些 ALAssets 返回一个空的“fullResolutionImage”

在我所有的 NSLogs 中，我一定错过了来自 Xcode 的最重要的信息：

“在其拥有的 ALAssetsLibrary 的生命周期之后访问 ALAssetPrivate 的尝试无效”

按照这个链接

[http://www.daveoncode.com/2011/10/15/solve-xcode-error-invalid-attempt-to-access-alassetprivate-past-the-lifetime-of-its-owning-alassetslibrary/](http://www.daveoncode.com/2011/10/15/solve-xcode-error-invalid-attempt-to-access-alassetprivate-past-the-lifetime-of-its-owning-alassetslibrary/)

我希望这会有所帮助

# microsoft-translator - Microsoft 翻译小部件 - 强制目标语言

> ID：13403506
> 
> 赞同：0
> 
> 时间：2012-11-15T18:05:24.970
> 
> 标签：microsoft-translator

如何强制 Microsoft 翻译小部件使用特定的目标语言，而不依赖于浏览器发送的语言？

[http://www.microsofttranslator.com/widget/](http://www.microsofttranslator.com/widget/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:54:25.427

我也有同样的问题，所以我想我会发布我如何解决它。

我发现您可以简单地将语言字母代码插入到小部件的 ajax URL 中。例如，搜索小部件代码：

```
"/ajax/v2/widget.aspx?mode=auto&from=en&layout=ts" 
```

例如，如果您想翻译成德语，则可以插入“&to=de”。例如：

```
"/ajax/v2/widget.aspx?mode=auto&from=en&to=de&layout=ts" 
```

就这么简单！

# java - Android 休息客户端

> ID：13403507
> 
> 赞同：5
> 
> 时间：2012-11-15T18:05:25.813
> 
> 标签：java, android, apache-httpclient-4.x

我发现了很多请求 REST API 的示例，但是所有示例都令人困惑，有人可以向我解释一种使用 http 请求的方法吗？

我的要求是，我想通过提供用户名、密码和密钥从 REST API 获取数据。

我用的是，

```
 HttpClient client = new DefaultHttpClient();  
        HttpPost post = new HttpPost("REST API url"); 
        post.setHeader("Content-type", "application/json");

        JSONObject obj = new JSONObject();
        obj.put("username", "un");
        obj.put("pwd", "password");
        obj.put("key","123456");

        post.setEntity(new StringEntity(obj.toString(), "UTF-8"));
        HttpResponse response = client.execute(post); 
```

但是响应始终为空，并且在使用浏览器工具通过发布相同的数据进行测试时，这些工作正常。我的方法有问题吗？请建议我正确的方法。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T15:08:58.713

(1)[用于开发 REST 客户端的 Google I/O 视频会议](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

(2) 在android开发者博客中搜索

(3) [https://github.com/darko1002001/android-rest-client](https://github.com/darko1002001/android-rest-client)

请在发布您的问题后尝试，我可以分享基于 (1) 和 (2) 开发的其余客户端的代码片段

不要使用云到设备消息传递，而是使用最新的云方法与 android 应用程序开发。

有一个名为 Volley 的新库，它看起来比 AsyncTask 更好。它在开发 RESTful 客户端时应该很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T06:58:48.257

您可能忘记将 Internet 权限添加到清单文件。添加以下行。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:22:25.757

我觉得你应该试试这个，

```
HttpContext localContext = new BasicHttpContext();
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost("REST API url"); 
post.setHeader("Content-type", "application/json");

JSONObject obj = new JSONObject();
obj.put("username", "un");
obj.put("pwd", "password");
obj.put("key","123456");

post.setEntity(new StringEntity(obj.toString(), "UTF-8"));
HttpResponse response = client.execute(post,localContext); 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T01:26:28.240

无论如何，服务器是否期待此操作的 GET 请求？如果是这样，您可能希望使用 HttpGet 而不是 HttpPost。

# amazon-ec2 - 无法访问 EC2 上 8080 上的 Web 应用程序

> ID：13403516
> 
> 赞同：2
> 
> 时间：2012-11-15T18:06:28.980
> 
> 标签：amazon-ec2

我在 EC2 上创建了一个实例并安装了 JBoss。我像这样编辑了standalone.xml：

```
<interface name="management">
    <inet-address value="0.0.0.0"/>
</interface>
<interface name="public">
    <inet-address value="0.0.0.0"/>
</interface> 
```

此外，我为 iptables 中的传入 tcp 流量启用了端口 8080，并通过 EC2 管理控制台向 EC2 安全组配置添加了一条规则。

我通过 ssh 登录到服务器验证了部署工作正常，我做到了：

```
lynx http://localhost:8080 
```

我可以看到我的网络应用程序正在运行。但是，当我使用通过亚马逊提供给我的公共 DNS 从浏览器访问相同内容时，`<my public DNS>:8080`我什么也看不到。浏览器找不到任何东西。

我是否绝对需要将 EC2 上的 EIP 映射到我的实例，以便可以通过 Internet 访问我的 Web 应用程序？

任何指向正确方向的指针都会非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:20:35.730

我弄清楚了问题所在。这是iptables。我使用以下方法停止了服务：

```
service iptables stop 
```

有效！

我意识到我不需要在我的 EC2 主机上运行 iptables，因为亚马逊有安全组，它们的作用就像一个“防火墙”。

PS：我不确定这是否有资格作为答案，但无论如何我想把我的答案放在这里，因为它可能会帮助其他有类似问题的人。

# oracle - 如何在 Oracle 中授予对 dbms_lock 的执行权限？

> ID：13403533
> 
> 赞同：13
> 
> 时间：2012-11-15T18:07:31.110
> 
> 标签：oracle, privileges

我需要使用用户 usr1 的 dbms_lock.sleep 程序。我无法以 sys 身份登录，但我有用户 usr2 的密码，该密码具有“授予任何对象权限”权限。但是，当我以 usr2 身份登录并尝试发出

```
grant execute on sys.dbms_lock to usr1 
```

我得到 ORA-01031“权限不足”异常。这同样适用于另一个用户的测试包。系统包是否经过特殊处理，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T10:19:57.063

根据初始化参数的值，对系统包进行特殊处理`O7_DICTIONARY_ACCESSIBILITY`。如果是`FALSE`，这是自 Oracle 9i 以来的默认设置，则`ANY`权限不适用于数据字典。文档将此称为“字典保护”。

我可以在安全指南中找到的最接近的 -[此处](http://docs.oracle.com/cd/E11882_01/network.112/e16543/authorization.htm#BABHIFHF)和[此处](http://docs.oracle.com/cd/E11882_01/network.112/e16543/guidelines.htm#i1007433)- 仅将表格作为示例。

但是，Oracle 支持说明 174753.1 明确指出字典保护取代`grant any object privilege`. 我不允许引用它，但它解释了你所看到的；如果您可以访问它，它可能值得查找。

`usr2`因此，能够做到这一点的唯一方法`grant execute on sys.dbms_lock to usr1`是让 DBA 完成`grant execute on sys.dbms_lock to usr2 with grant option`。

正如 Ben 所说，您必须让 DBA`usr1`直接授予权限，或者将权限添加`with grant option`到授予的权限`usr2`；或者`usr2`围绕`dbms_lock`调用创建一个包装程序并将其权限授予`usr1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T22:58:43.067

*听起来*好像 SYS 没有被授予 DBA 角色，或者 SYS 没有 GRANT ANY OBJECT 权限。从[文档中引用](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9013.htm#i2094944)

> 要授予对象权限，您必须拥有该对象，或者该对象的所有者必须已使用 GRANT OPTION 授予您对象权限，或者您必须已被授予 GRANT ANY OBJECT PRIVILEGE 系统权限。如果您有 GRANT ANY OBJECT PRIVILEGE，那么只有当对象所有者可以授予相同的对象权限时，您才能授予对象权限。

这意味着您不能授予执行权限，`dbms_lock`因为 SYS 无法这样做。

在安装[SYS 时会自动授予 DBA 角色](http://docs.oracle.com/cd/E11882_01/server.112/e25494/dba005.htm#ADMIN11045)，因此可能有人一直在更改此设置或创建了另一个具有 DBA 角色的用户。

无论哪种方式，如果您只能访问这两个用户，您都必须让您的 DBA 参与进来。要求他们将您需要的包的执行权限授予需要它的用户。他们应该给你一个很好的理由，为什么他们不会授予你执行你需要的包来完成你的工作。

如果您无法获得完全访问权限，`dbms_lock`您始终可以在另一个用户中创建一个包含`dbms_lock.sleep`您需要的过程，然后单独授予对该过程的执行权限。

# javascript - 删除关联中的所有对象

> ID：13403535
> 
> 赞同：1
> 
> 时间：2012-11-15T18:07:35.607
> 
> 标签：javascript, coffeescript, ember.js, ember-data

给定一个看起来像这样的模型：

```
App.Parent = Ember.Model.extend(
    children: DS.attr.hasMany('App.Child')
)

App.Child = Ember.Model.extend(
    parent: DS.attr.belongsTo('App.Parent')
)

parent = App.Parent.find(1)

# How do I remove parent and all of it's children?
# This doesn't work since I'm removing elements from an array while iterating it
parent.get('children').forEach( c -> c.deleteRecord() )
parent.deleteRecord()

# Only removing the parent like this won't work either, 
# Ember-data generates some strange PUT requests for every child
parent.deleteRecord()

# I guess I could do this, but it feels really awkward and 
# wrong to use the adapter directly.
# And it also side-steps transactions making bulk updates impossible
App.store.adapter.deleteRecords(App.store, App.Child, parent.get('children'))
parent.deleteRecord()
App.store.commit() 
```

有没有更直接的方法，只删除父级时会产生什么奇怪的 PUT 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:34:55.927

也许使用 toArray() 方法[http://emberjs.com/api/classes/Ember.ArrayProxy.html#method_toArray](http://emberjs.com/api/classes/Ember.ArrayProxy.html#method_toArray)应该可以工作，因为您不再直接修改 ManyArray

```
parent.get('children').toArray().forEach( c -> c.deleteRecord() ) 
```

对于子节点上奇怪的 PUT 请求，这是因为在删除父节点时，ember-data 将子节点上的父属性“无效”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:18:36.937

纯 JavaScript 而不是 CoffeeScript，但我认为您将能够转换：

```
var children = parent.get('children'),
    i = children.length;

while (i--) {
    children[i].deleteRecord();
} 
```

# javascript - 在 typescript 中使用修改 Event 的 js 插件

> ID：13403541
> 
> 赞同：2
> 
> 时间：2012-11-15T18:07:47.603
> 
> 标签：javascript, typescript

我正在使用 Event.js 来捕获滑动，[https://github.com/mudcube/Event.js](https://github.com/mudcube/Event.js)，如果我尝试`declare var Event: any;`然后`Event.add(test, "swipe", function() {}, { snap: 45 });`它会产生以下错误：

```
Error   1   The property 'add' does not exist on value of type '{ prototype: Event; CAPTURING_PHASE: number; AT_TARGET: number; BUBBLING_PHASE: number; new(): Event; }' 
```

如果我尝试：

```
declare interface Event {
    add: any;
}; 
```

我明白了`Duplicate identifier 'add'`

为什么它不覆盖该属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:55:10.437

这是因为 TypeScript 中已经定义了一个事件，所以你有一个名称冲突。

你能在你的 JavaScript 中给它起别名吗，例如......

```
var eventJS = Event; 
```

然后你可以在你的 TypeScript 中引用 eventJS 并避免冲突。

否则，如果您只需要第二个 add 函数，请声明其签名，并且只要它不接受相同的参数，它就应该充当覆盖。

```
interface Event {
    add(name: string, eventType: string, callback: Function) : any;
}; 
```

# objective-c - 在服务器上线之前在 iOS 中使用 JSON - 作为字符串包含在文件中

> ID：13403542
> 
> 赞同：0
> 
> 时间：2012-11-15T18:07:50.380
> 
> 标签：objective-c, ios, json

我正在开发一个 iOS 应用程序，它使用 JSON 从服务器获取一些信息。服务器还没有上线，所以我尝试使用在服务器上工作的开发人员给我的东西作为示例代码来构建。我认为最简单的方法是将 JSON 响应存储在字符串中并使用`NSJSONSerialization`.

我正在尝试的代码如下所示：

```
NSString * JSONString = @"{\"firstName\":\"John\", \"lastName\": \"Smith\", \"age\": 25, \"address\": {\"streetAddress\": \"21 2nd Street\",\"city\": \"New York\", \"state\": \"NY\",\"postalCode\": \"10021\"},}";
bool valid = [NSJSONSerialization isValidJSONObject:JSONString];
if (valid) {
    NSLog(@"Valid JSON");
} else {
    NSLog(@"Invalid JSON");
} 
```

它总是记录“无效的 JSON”。

我所有的研究都提供了有关如何从服务器获取数据的资源，但没有关于在服务器可用之前进行测试的内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:29:17.550

我通过在我的资源中保存一个文件来进行测试，例如 test.json。您可以使用以下代码打开它：

```
NSString *path = [NSBundle.mainBundle pathForResource:@"test.json" ofType:@"json"];
NSError *error = nil;
NSString *fileContents = [NSString stringWithContentsOfFile:path
                                                   encoding:NSUTF8StringEncoding
                                                      error:&error]; 
```

然后调用该方法转换为 JSON 对象。测试文件将比您上面的文件更具可读性。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:01:54.090

两个问题。首先，您的 JSON 字符串有一个额外的逗号。它应该是：

```
NSString *jsonString = @"{\"firstName\":\"John\", \"lastName\": \"Smith\", \"age\": 25, \"address\": {\"streetAddress\": \"21 2nd Street\",\"city\": \"New York\", \"state\": \"NY\",\"postalCode\": \"10021\"}}"; 
```

其次，您的原始代码有误报。字符串总是会失败`isValidJSONObject`。该方法不适用于验证 JSON 字符串。如果你想使用`isValidJSONObject`，你应该传递一个`NSDictionary`，例如：

```
NSDictionary* jsonDictionary = @{
    @"firstName" : @"John",
    @"lastName"  : @"Smith",
    @"age"       : @(25),
    @"address"   : @{
        @"streetAddress": @"21 2nd Street",
        @"city"         : @"New York",
        @"state"        : @"NY",
        @"postalCode"   : @"10021"
    }
};

BOOL valid = [NSJSONSerialization isValidJSONObject:jsonDictionary];
if (valid) {
    NSLog(@"Valid JSON");
} else {
    NSLog(@"Invalid JSON");
} 
```

因此，创建 JSON 字符串的最佳方法是像上面一样创建字典，然后调用`dataWithJSONObject`. 我通常建议不要手动编写 JSON 字符串，因为您总是可以引入诸如额外逗号之类的拼写错误。我总是从这样的一个 JSON 字符串中构建一个 JSON 字符串`NSDictionary`，因为您永远不必担心字符串是否格式正确。`NSJSONSerialization`负责正确格式化字符串的艰苦工作：

```
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary
                                                   options:0
                                                     error:&error];

if (error)
    NSLog(@"dataWithJSONObject error: %@", error);

NSString *jsonString = [[NSString alloc] initWithData:jsonData
                                             encoding:NSUTF8StringEncoding]);
NSLog(@"JSON string is: %@", jsonString); 
```

这会产生：

```
{"age":25,"lastName":"Smith","firstName":"John","address":{"streetAddress":"21 2nd Street","state":"NY","city":"New York","postalCode":"10021"}} 
```

或者，如果您使用以下`NSJSONWritingPrettyPrinted`选项`dataWithJSONObject`：

```
{
  "age" : 25,
  "lastName" : "Smith",
  "firstName" : "John",
  "address" : {
    "streetAddress" : "21 2nd Street",
    "state" : "NY",
    "city" : "New York",
    "postalCode" : "10021"
  }
} 
```

# android - 将图像从 sdcard 加载到网格视图中，然后单击以全屏 - 空指针异常

> ID：13403545
> 
> 赞同：0
> 
> 时间：2012-11-15T18:07:58.647
> 
> 标签：android, gridview, sd-card, android-sdcard

基本上我有一个网格视图，它显示了一组来自可绘制资源的图像，但我希望它从我手机的 sd 卡中提取图像。

我得到一个空指针异常：**return cursor.getCount();** 这也是：**gridview.setAdapter(new ImageAdapter(this));**

有人可以解释为什么它为空吗？我试图初始化光标，但我也遇到了麻烦。

```
public class MainActivity extends Activity {
ImageAdapter adapter;
private Cursor cursor;
private  int columnIndex;

@Override
public void onCreate(Bundle savedInstanceState) {
    View view = LayoutInflater.from(this).inflate(R.layout.activity_main, null);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String[] projection = {MediaStore.Images.Thumbnails._ID};
    cursor = managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, null, null, MediaStore.Images.Thumbnails._ID);
    columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);

    GridView gridview = (GridView)view.findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));
    adapter.notifyDataSetChanged();

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            String[] projection = new String[]{MediaStore.Images.Media.DATA};
            cursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, MediaStore.Images.Thumbnails._ID);
            columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
            cursor.moveToPosition(position);
            String imagePath = cursor.getString(columnIndex);
            //Toast below states position of image
            //Toast.makeText(MainActivity.this, "" + position, Toast.LENGTH_SHORT).show();

            //Sending image id to fullScreenActivity
            Intent i = new Intent(getApplicationContext(), FullImageActivity.class);

            //passing array index
            i.putExtra("id", position);
            startActivity(i);
        }
    });
}

public void startCamera(View v){
    Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, 0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
}

public class ImageAdapter extends BaseAdapter {
Context mContext;
ImageView imageview;
Cursor cursor;
int columnIndex;

public ImageAdapter(Context adapter) {
    mContext = adapter;
}

public int getCount() {
    return cursor.getCount();
    //return mThumbIds.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        cursor.moveToPosition(position);
        int imageID = cursor.getInt(columnIndex);
        imageView.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID));

        imageView.setLayoutParams(new GridView.LayoutParams(200, 200));
        imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    //imageView.setImageResource(mThumbIds[position]);
    //imageView.setImageDrawable(mySDCardImages.get(position).getDrawable());
    return imageView;
}

        // references to our images
        /* public Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7
};*/

}

      public class FullImageActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

    //get intent data
    Intent i = getIntent();
    Cursor cursor = null;

    //selected image id
    int position = i.getExtras().getInt("id");
    MainActivity myActivity = new MainActivity();
    ImageAdapter imageAdapter = new ImageAdapter(this, cursor);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(position);
}

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:09:36.507

您的适配器类中有一个游标，该游标从未设置过其值，因此始终为空。删除声明并使用父级的光标。

# jboss7.x - 使消息驱动的 bean 监听外部主题

> ID：13403548
> 
> 赞同：0
> 
> 时间：2012-11-15T18:08:24.307
> 
> 标签：jboss7.x, message-driven-bean

大家好，

我正在尝试配置一个消息驱动的 bean 来订阅外部主题。我和我的同事一起成功地用 JSE 客户端收听了这个主题，看起来像这样。

```
 public static void main(String[] args) {
        TopicSession    sess     =  null;
        TopicConnection conn     = null;
        TopicSubscriber consumer = null;

        Properties props = new Properties();
        p.put("java.naming.provider.url",         "remote://#server-name#:#server-port(4747)#");
        p.put("java.naming.factory.initial",      "org.jboss.naming.remote.client.InitialContextFactory");
        p.put("java.naming.security.principal",   "#username#");
        p.put("java.naming.security.credentials", "#password#");

        InitialContext context = new InitialContext(props);

        TopicConnectionFactory factory = (TopicConnectionFactory)context.lookup("jms/RemoteConnectionFactory");
        conn = factory.createTopicConnection("#username#", "#password#");
        conn.setClientID("#client-id#");

        sess = conn.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);

        Topic topic = (Topic)context.lookup("jms/topic/#topic-name#");
        consumer = sess.createSubscriber(topic);
        consumer.setMessageListener(new MyTopicListener());

        try {
            conn.start();
            // ... loop until done.
        } finally {
            consumer.close();
            sess.close();
            conn.close();
        }
    }
```

如何将其移至 MDB？

据我所知，我们可以使用 MessageDriven 注解的activationConfig 设置destinationType、connectionFactoryJndiName、destinationJndiName、initialContextFactory。但是远程 URL、用户名和密码呢？

仅供参考，我使用的是 JBoss AS 7.1.1，这适用于 MDB 3.0。

非常感谢您的任何回答和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:03:22.707

HornetQ 有一个入站和出站资源适配器。入站 JCA RA 用于通过消息驱动 bean (MDB) 使用消息。可以使用 MDB 的激活配置属性来配置资源适配器，如下例所示：

```
@MessageDriven(name = "ExampleMDB", activationConfig = {
   @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
   @ActivationConfigProperty(propertyName = "destination", propertyValue = "testQueue"),
   @ActivationConfigProperty(propertyName = "connectorClassName", propertyValue ="org.hornetq.core.remoting.impl.netty.NettyConnectorFactory"),
   @ActivationConfigProperty(propertyName = "connectionParameters", propertyValue = "host=172.168.1.137;port=5445")})
public class ExampleMDB implements MessageListener {
   public void onMessage(Message recvMsg) {
   ... 
   }
} 
```

有关配置属性的完整列表，请参阅 HornetQ 文档：http: [//docs.jboss.org/hornetq/](http://docs.jboss.org/hornetq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:30:20.467

您还可以查看新的 hornetrq [http://www.packtpub.com/hornetq-messaging-developers-guide/book](http://www.packtpub.com/hornetq-messaging-developers-guide/book)

# javascript - （操作方法）JavaScript - 使用正则表达式 (RegExp) 测试无符号整数 (UINT)

> ID：13403563
> 
> 赞同：2
> 
> 时间：2012-11-15T18:09:13.917
> 
> 标签：javascript, regex

**问题**：如何在***JavaScript****中测试/检查值是否为无符号整数 ( UINT* ) 。

 ***替代答案**：感谢以下改进此答案！

@jbaby ：**_**`if Number(val) > 0`

@**斯拉克斯**：`if (/^\d+$/.test(someString))`

* * *

**关于**：这显示了如何在***JavaScript****中测试/检查值是否为无符号整数 ( UINT* ) 。

 ** * *

**用法**：`JS: isUINT( value );`

* * *

**返回**：`True` *或* `False`

* * *

**扩展版**：

```
<script type="text/javascript">
    function isUINT(v)
    {
        var r = RegExp(/(^[^\-]{0,1})?(^[\d]*)$/);
        return r.test(v) && v.length > 0;
    }
</script> 
```

* * *

**缩小版**：

```
function isUINT(v){var r=RegExp(/(^[^\-]{0,1})?(^[\d]*)$/);return r.test(v)&&v.length>0} 
```

* * *

*欢迎评论/替代品！*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T18:11:35.640

```
if (/^\d+$/.test(someString)) 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-13T08:50:46.973

老问题，但现在你可以使用

```
const isUINT = (val) => Number.isInteger(val) && val >= 0

console.log('"a":', isUINT('a'))
console.log('"1":', isUINT('1'))
console.log('null:', isUINT(null))
console.log('-1:', isUINT(-1))
console.log('0:', isUINT(0))
console.log('1:', isUINT(1))
console.log('1.25:', isUINT(1.25))
console.log('0.25:', isUINT(0.25))
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T18:09:13.917

**替代答案**：感谢以下改进此答案！

@jbaby ：**_**`if Number(val) > 0`

@**斯拉克斯**：`if (/^\d+$/.test(someString))`

* * *

**关于**：这显示了如何在***JavaScript****中测试/检查值是否为无符号整数 ( UINT* ) 。

 ** * *

**用法**：`JS: isUINT( value );`

* * *

**返回**：`True` *或* `False`

* * *

**扩展版**：

```
<script type="text/javascript">
    function isUINT(v)
    {
        var r = RegExp(/(^[^\-]{0,1})?(^[\d]*)$/);
        return r.test(v) && v.length > 0;
    }
</script> 
```

* * *

**缩小版**：

```
function isUINT(v){var r=RegExp(/(^[^\-]{0,1})?(^[\d]*)$/);return r.test(v)&&v.length>0} 
```

* * *

*欢迎评论/替代品！****

# javascript - 弹出对话框处于活动状态时停止旋转图像

> ID：13403565
> 
> 赞同：0
> 
> 时间：2012-11-15T18:09:18.750
> 
> 标签：javascript

我正在使用 javascript 函数以轨道方式旋转图像。我还创建了一个弹出对话框。我想要做的是拥有它，这样当对话框处于活动状态时，即使我要从图像中鼠标移出图像也会停止。

这是我制作的javascript函数：

```
var popupStatus = 0;
var timer = null;
var m = {
Z   : 100,
xm  : 0,
xmm : .25,
ymm : 0,
ym  : 0,
mx  : 0,
nx  : 0,
ny  : 0,
nw  : 0,
nh  : 0,
xR  : 0,
nI  : 0,
scr : 0,
img : 0,

run : function () {
    m.xm += (m.xmm - m.xm) * .1;
    if (m.ym < m.nw * .15) m.ym++;
    m.xR += m.xm;
    for (var i = 0; i < m.nI; i++){
        var A = (i * 360 / m.nI) + m.xR;
        var x = Math.cos(A * (Math.PI / 180));
        var y = Math.sin(A * (Math.PI / 180));
        var a = m.img[i];
        a.style.width  = ''.concat(Math.round(Math.abs(y * m.ym) + y * m.Z), 'px');
        a.style.left   = ''.concat(Math.round((m.nw * .5) + x * ((m.nw * .5) - (m.nw * .05)) - ((Math.abs(y * m.ym) + y * m.Z) * .5)), 'px');
        a.style.height = ''.concat(Math.round(m.ym + y * m.Z), 'px');
        a.style.top    = ''.concat(Math.round((m.nh * .5) - (m.ym * .5) - x * (m.Z * .5) - (m.ymm * y)), 'px');
        a.style.zIndex = 600 + Math.round(y);
        m.setOpacity(a, (y * 50) + 100);
    }
    timer = setTimeout(m.run, 30);
},

resize : function () {
    m.nx  = m.scr.offsetLeft;
    m.ny  = m.scr.offsetTop;
    m.nw  = m.scr.offsetWidth;
    m.nh  = m.scr.offsetHeight;
},

mousemove : function (e) {
    if (window.event) e = window.event;
    m.xmm = (m.nx + (m.nw * .5) - (e.x || e.clientX)) / (m.nw * .25);
    m.ymm = (m.ny + (m.nh * .5) - (e.y || e.clientY)) / (m.nh * .005);
},

setOpacity : function (obj, a) {
    if (a < 0) a = 0; else if (a > 100) a = 100;
    if (obj.filters) obj.filters.alpha.opacity = a;
    else obj.style.opacity = a / 100;
},

init : function () {
    m.scr = document.getElementById("screen");
    m.img = m.scr.getElementsByTagName("img");
    m.nI  = m.img.length;
    window.onresize = m.resize;

    m.resize();
    m.ym = m.Z;
    m.run();
}

}
function stop(){
clearTimeout(timer);
}

onload = function() {
m.init();
}

function loadPopup(){
//loads popup only if it is disabled
if(popupStatus==0){
    $("#backgroundPopup").css({
        "opacity": "0.7"
    });
    $("#backgroundPopup").fadeIn("slow");
    $("#popupContact").fadeIn("slow");
    popupStatus = 1;
}
();
}

function disablePopup(){
//disables popup only if it is enabled
if(popupStatus==1){
    $("#backgroundPopup").fadeOut("slow");
    $("#popupContact").fadeOut("slow");
    popupStatus = 0;
}
}

//centering popup
function posPopup(){
//request data for centering
var windowWidth = document.documentElement.clientWidth;
var windowHeight = document.documentElement.clientHeight;
var popupHeight = $("#popupContact").height();
var popupWidth = $("#popupContact").width();
//centering
$("#popupContact").css({
    "position": "absolute",
    "top": windowHeight/2-popupHeight/350,
    "left": windowWidth/2-popupWidth/8
});
//only need force for IE6

$("#backgroundPopup").css({
    "height": windowHeight
});

}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){

//LOADING POPUP
//Click the button event!
$("#button").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
}); 
```

# mysql - Rake 任务太慢

> ID：13403566
> 
> 赞同：1
> 
> 时间：2012-11-15T18:09:20.297
> 
> 标签：mysql, ruby-on-rails, ruby, performance, rake

我有一个 rake 任务，它将几个表中的所有信息汇总到一个表中，每个表大约有 200 000 行：

```
task :migrate_all_info_tables_to_one => :environment do
    profiles = Profile.all
    profiles.each do |profile|
      basic_info_items = profile.basic_info_items
      basic_info_items.each do |item|
        info = InfoItem.find_or_initialize_by_kind_and_value_and_link_and_description(:kind => 'info', :value => item.parameter, :link => item.link != 'none' ? item.link : nil, :description => item.value)
        profile.info_items << info
      end

      cities = profile.cities
      cities.each do |city|
        city = InfoItem.find_or_initialize_by_kind_and_value_and_link_and_description(:kind => 'city', :value => city.title, :link => city.link != 'none' ? city.link : nil, :description => city.description)
        profile.info_items << city
      end

      histories = profile.histories
      histories.each do |item|
        info = InfoItem.find_or_initialize_by_kind_and_value_and_link_and_description(:kind => 'history', :value => item.year, :link => item.link != 'none' ? item.link : nil, :description => item.event)
        profile.info_items << info
      end

      contacts = profile.contacts
      contacts.each do |item|
        info = InfoItem.find_or_initialize_by_kind_and_value_and_link_and_description(:kind => 'contact', :value => item.parameter, :link => item.link != 'none' ? item.link : nil, :description => item.value)
        profile.info_items << info
      end
    end
  end 
```

我在表中添加了所有必要的索引（使用 mysql 5.1.6），形成 mysql 每个单独的查询需要 0.00 秒，也来自 ruby​​ 控制台。但是当我运行这个 rake 任务时，它每分钟只处理 100 个配置文件记录，为什么或者我做错了什么？

PS：我这样做是因为我在我的项目数据库架构中犯了一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:18:50.100

为了提高效率，您可以预先加载您在脚本中使用的配置文件关系，请使用：

`Profile.includes(:basic_info_items, :cities, :histories, :contacts).all`

而不是`Profile.all`.

您可能还想使用`Profile.find_each`而不是`Profile.all`避免将所有配置文件加载到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:14:51.143

如果您在 Profile 上有相关记录，并且在遍历所有配置文件时正在访问它们，ActiveRecord 可能会为每个配置文件单独选择，并使用 BEGIN 和 COMMIT 完成。即使每次选择非常快，这也会减慢速度。

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

查看有关急切加载关联的部分。

# macos - 如何使用 x11 为 Mac 安装 gnat GPS？

> ID：13403567
> 
> 赞同：1
> 
> 时间：2012-11-15T18:09:31.343
> 
> 标签：macos, ada, gnat

我今天参加了一个会议，谈话的人有一个安装了 Gnat GPS IDE 的 Mac OS X 系统，但顶部收费栏中的应用程序名称是“X11”。

我想在我的 Mac 上安装 GNAT GPS IDE。我不知道如何用X11安装它？有什么帮助吗？

`gnatmake`目前我在“文本编辑器”应用程序中编码并使用命令通过终端编译它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:38:54.370

在这里，我安装了 GNAT GPL 2012 `/opt/gnat-gpl-2012`，我只是在终端窗口中说

```
/opt/gnat-gpl-2012/bin/gps & 
```

在 Lion 之前，X11 是随操作系统一起提供的（我认为它可能是可选安装）。在 Mountain Lion 中，Apple 不再提供官方 X11；然而，当我第一次在这台新机器上启动 GPS 时——如上所述——我被告知如何安装 XQuartz。它刚刚奏效。

# ios - iOS 5.1 上的 Web SQL 数据库持久性

> ID：13403569
> 
> 赞同：1
> 
> 时间：2012-11-15T18:09:35.800
> 
> 标签：ios, mobile-safari, web-sql

我已经阅读[了一些](http://www.itwriting.com/blog/5656-apple-breaks-web-storage-in-ios-5-1-does-not-care-about-web-apps.html) [关于](http://www.sencha.com/blog/html5-scorecard-the-new-ipad-and-ios-5-1)从 iOS 5.1 中的嵌入式 UIWebViews 创建的 Web SQL 数据库的持久性下降的描述，但我无法确定在普通的旧 Mobile Safari 中访问的 Web 应用程序是否也存在此问题。有谁知道我是否应该期望使用 Mobile Safari 访问的 Web 应用程序具有较低级别的数据持久性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:22:02.177

Although I'm still not completely sure that web apps accessed with Mobile Safari are immune to this issue, the following fix for this issue in the [iOS 6.0 Release Notes](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html) seems to imploy that the problem was specific to native apps with embedded UIWebViews:

> In iOS 6 and later, web data (SQL Web Storage and LocalStorage) from a UIWebView object can be stored in a directory that will be backed up. To enable backing up this data, set the WebKitStoreWebDataForBackup key to YES in your app’s user defaults. This should be done only if your app relies on web content data that cannot be reloaded. If your UIWebView object opens links to arbitrary web content, this key should be set to NO. Toggling the value of this key will not preserve existing web view data.

# json - Grails：无法从 JUNIT grails 访问呈现的 JSON 对象

> ID：13403572
> 
> 赞同：0
> 
> 时间：2012-11-15T18:10:11.090
> 
> 标签：json, grails, junit

在 grails 动作中，我有简单的代码

```
def myAction={ render("some string" as JSON)} 
```

现在我想在 Junit 中访问和测试这个渲染的 JSON。我在测试中也尝试了 controller.renderArgs、controller.renderArgs.JSON.as

```
def ret=controller.myAction();ret.JSON 
```

还有一些可能的其他方式..但无法捕获。有没有办法在 JUNIT grails 中捕获呈现 JSON 对象..？？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:16:57.433

如果您使用的是 Grails 2.x，您可以这样做

```
def json = controller.response.json 
```

这将为您提供一个 JSON 对象（xml 也可以）。

如果您使用的是 < 2.x 的版本，那么您需要执行以下操作：

```
def json = JSON.parse(controller.response.contentAsString) 
```

# html - 使用 JavaFX 或 HTML5 构建 Eclipse 插件的界面？

> ID：13403576
> 
> 赞同：2
> 
> 时间：2012-11-15T18:10:26.303
> 
> 标签：html, eclipse-plugin, swt, javafx

我正在寻找 swt 的替代方法来构建我想要开发的 Eclipse 插件的界面。是否可以使用 JavaFX 或 HTML5 而不是 swt 构建插件的界面？

我的目标是 Eclipse Juno 4.2 或更高版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:22:59.880

发生了很多事情，Eclipse 版本控制现在可能有点混乱（至少对我来说），你可以看看[E4](http://wiki.eclipse.org/Eclipse4)，但它没有被广泛使用。[它具有使用Eclipse RCP/CSS](http://wiki.eclipse.org/Eclipse4/RCP/CSS)设计 UI 的能力。
另一种可能性是[XWT](http://wiki.eclipse.org/E4/XWT)。我已经看到一些使用 XWT 的业务就绪应用程序，所以它似乎已经足够成熟了。甚至[WindowBuilder](http://www.eclipse.org/windowbuilder/)也可用于使用 XWT 构建 UI。这实际上是使用 XML 构建的声明性 UI。
如果您只想拥有 OSGi“好东西”，您可以查看[Apache Felix](http://felix.apache.org/site/index.html)或[Eclipse Virgo](http://www.eclipse.org/virgo/)（由 Spring 驱动）。它们是基于 OSGi 的应用程序服务器，因此您可以构建基于模块的企业应用程序。
最后但并非最不重要的一点是，如果您对 SWT/JFace 没问题但想要拥有 Web 应用程序，请查看[RAP](http://www.eclipse.org/rap/)。我已经看到一个完整的 RCP 应用程序转换为在常规浏览器中运行的 RAP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T14:35:32.453

Eclipse 4 定义了一个应用程序模型，即构成应用程序 UI 的所有部分的模型。应用程序模型与其表示分离。

这意味着可以使用不同的 UI 工具包（SWT、XWT、JavaFX 等）来实现模型。从理论上讲，您可以使用任何您想要的演示技术来构建 UI。

也就是说，Eclipse 4.2（IDE）的 UI 仍然依赖于优秀的 SWT。这意味着，您的插件将需要一些额外的依赖项才能使用不同的工具包。

[e(fx)clipse](http://efxclipse.org)（jewelsea 已经提到过），提供必要的 Eclipse 工具来构建您的插件。除此之外，它还插入了一个[JavaFX ViewPart 插件模板](http://efxclipse.org/tut3.html)，该模板创建了一个示例插件并为您添加了必要的捆绑包依赖项。

恕我直言，这将是你最好的选择。

# windows - 带有 Windows 和 MsysGit/Free CopSSH 的 SHA 密钥

> ID：13403577
> 
> 赞同：1
> 
> 时间：2012-11-15T18:10:26.270
> 
> 标签：windows, putty, copssh

操作系统（~~无论~~好坏）是 XP

我遇到了一些问题，我也看到了其他问题，但似乎没有一个问题适用于我。

1.  我安装了 CopSSH，我可以使用明文密码登录。
2.  现在我想将其升级为 SHA 密钥。
3.  我使用 PuttyGen 获取公钥和私钥
4.  然后我将它们复制到 ~/.ssh 和 %ICW%/home/%un%/.ssh 作为 id_rsa 和 id_rsa.pub。
5.  我添加公钥如下....

示例公钥

```
---- BEGIN SSH2 PUBLIC KEY ----
Comment: "rsa-key-20121115"
AAAAB3NzaC1yc2EAAAABJQAAAIBdfRGHY4IYsUuDYzbgEy1wKXrszq5RVR4m2/gP
WJwLwiaNHpahfPeHmsG7nD7qeVNVp+sSVouApm70ZdfGnxzOHiBydtdOuco+sbqZ
irlyG9wS5yv8x9LFsGqZ34tbr8dgPXMdYnrJHJqUa3+ZMUNPXznRUzj/VTiwoS6/
jMHzkw==
---- END SSH2 PUBLIC KEY ---- 
```

示例 known_host

```
<ServerName>,<IP>,localhost ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAIBdfRGHY4IYsUuDYzbgEy1wKXrszq5RVR4m2/gPWJwLwiaNHpahfPeHmsG7nD7qeVNVp+sSVouApm70ZdfGnxzOHiBydtdOuco+sbqZirlyG9wS5yv8x9LFsGqZ34tbr8dgPXMdYnrJHJqUa3+ZMUNPXznRUzj/VTiwoS6/jMHzkw== UN@SERVER 
```

所以现在我将生成的私钥添加到腻子并尝试连接，但我看到以下内容......

```
Server refused our key 
```

它仍然允许我使用我的密码登录。

如何让私钥身份验证工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:36:13.843

检查 Itefix 常见问题解答[https://www.itefix.no/i2/content/i-want-use-my-own-pka-key-pair-instead-one-generated-copssh](https://www.itefix.no/i2/content/i-want-use-my-own-pka-key-pair-instead-one-generated-copssh)是否有帮助。

# python - 使用 python ctypes 引用不透明类型

> ID：13403587
> 
> 赞同：4
> 
> 时间：2012-11-15T18:10:57.080
> 
> 标签：python, ctypes

我正在使用定义不透明类型的第 3 方 C 库：

```
 foo_t 
```

并在其函数中使用指向此类型的指针：

```
 void foo_init(foo_t *foo); 
```

典型用法是在堆栈上分配一个 foo_t 并传递一个引用：

```
 {
    foo_t foo;

    foo_init(&foo);
    ...
  } 
```

如何在`foo_init()`不知道什么构成 a 的情况下使用 ctypes调用`foo_t`？

我想如果我知道`sizeof(foo_t)`我可以创建一个该大小的缓冲区并进行转换，但是是否可以使用 ctypes 获得大小？

我可以编写一个单行 C 程序：

```
 printf("sizeof(foo_t) = %zu\n", sizeof(foo_t)); 
```

并将该值硬编码到我的python中，但这会很快变得难看：每次升级库时，我都必须接触我的python源。

一种更简洁的方法是编写一个 python c-ext 来导出大小值，但这也需要在每次库升级时重新编译。

有没有人有使用这种不透明类型的 ctypes 的秘诀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T22:25:35.673

我认为这是最简单的解决方案...

创建一个 C 文件，例如 foosizes.c：

```
 size_t SIZEOF_FOO = sizeof(foo_t); 
```

并将其编译为共享对象，`foosizes.so`. 然后在python脚本中：

```
 from ctypes import *
    foosizeslib = CDLL('foosizes.so')
    sizeof_foo = c_ulong.in_dll(foosizeslib, 'SIZEOF_FOO') 
```

然后，我可以创建一个适当大小的缓冲区，并通过引用将其作为指向不透明类型的指针传递给函数。到现在为止还挺好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:37:40.823

由于 C 不支持运行时反射，因此无法使用 ctypes 获取大小，因为没有像 Java 或 C#/.Net 那样将类型的元数据存储在编译后的二进制文件中。

正如您所说，获取大小的一种方法是创建一个简单的 C 程序，其中包含定义类型的标头，然后使用 sizeof 运算符打印出大小。更进一步，您可以利用[用 Python 编写的 C 编译器](http://bytes.com/topic/python/answers/31948-c-compiler-written-python)来编译和执行您的 C 代码，以获取执行 Python 代码时的大小。您甚至可以通过遍历编译器提供的数据结构来获得它，而无需实际执行结果。

也就是说，您确定需要自己创建内存吗？C 库经常提供一种方法来创建其其他函数操作的不透明类型。 **更新**：从评论中可以确定内存必须由调用者分配。

# web-services - 使用散列签名保护 REST API

> ID：13403590
> 
> 赞同：0
> 
> 时间：2012-11-15T18:11:14.600
> 
> 标签：web-services, security, hash

我在这里问了一个与此相关的问题：

[将用户 ID 从 ASP.Net 安全地传递到 Javascript](https://stackoverflow.com/questions/13362629/securely-passing-userid-from-asp-net-to-javascript)

但是现在我有一个更详细/具体的问题。我有服务，并且我有将使用服务的应用程序，我的计划是保护它，是根据一些值、随机数和密钥生成散列。我唯一的问题是，似乎为了验证哈希，我必须发送所有值加上随机数，除了密钥。这是我的设计中的一个缺陷，还是这样的事情是如何完成的？我已经四处搜索，但无法确定这是否是正确*且*安全的方法。

例如，假设我需要将值 1,2 和 3 传递给我的休息服务，所以我使用电话号码、随机数和密钥来生成哈希，现在为了再次生成哈希，我需要传递除密钥（我可以根据用户的电话号码检索）之外的所有上述内容。

我完全让我的服务受到攻击，正确地保护它，还是介于两者之间？

编辑：进行了拼写和语法更正

编辑 2：最终通过使用带有表单身份验证的 MVC 4、两个项目之间相同的 cookie 名称以及使用全局应用的 [Authorize] 属性来找到一个令人满意的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:17:13.743

这个计划本身并没有错。如果客户端发送：

```
data . nonce . hash(data . nonce . shared-secret) 
```

然后服务器通过检查`hash(data . nonce . shared-secret)`与客户端提供的哈希匹配来验证消息，您可以安全地防止篡改和重放（当然，假设您正在使用合理的加密哈希算法）。

在这种设计下，客户端甚至可以生成自己的随机数，前提是两个客户端不会生成相同的随机数。

但是，窃听者仍然可以看到您发送的所有数据......所以，除非有很好的理由不这样做，否则我会简单地使用 https（除非有其他我不知道的要求，否则完全足够了） .

# php - 可以从单元测试内部更改应用程序配置吗？

> ID：13403595
> 
> 赞同：0
> 
> 时间：2012-11-15T18:11:26.467
> 
> 标签：php, unit-testing, codeigniter

我正在为 CodeIgniter 编写一个库，在编写测试时，我需要检查当库或 CodeIgniter 的配置更改为我提供的各种选项时会发生什么。

最简单的方法似乎是使用[Config 类](http://codeigniter.com/user_guide/libraries/config.html)来动态获取和设置配置变量，它确实解决了问题。我只是不喜欢该解决方案的外观。

在其他语言/框架中与此等效的是什么，可能面临的潜在问题是什么，以及如何完全避免这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:15:14.010

我不知道你的测试是什么，但我知道当我测试时（这是我工作过的大多数地方的政策，以及那些将他们的东西放在一起的地方）我试图确保我的所有输入都得到控制和验证，就像我确切地知道发生了什么以及应该出现什么一样。

因此，对于您的具体情况，如果可能的话，我会生成一个“测试”配置文件并使用它，以便您确切知道发生了什么以及应该出现什么。

编辑：为了更具体地回答您的问题，我认为动态更改配置值是不行的。

为什么？因为如果有什么东西坏了而你没有抓住它，突然你的配置值被改变并被部署到生产环境中…… *BOOM*崩溃了。显然是更糟糕的情况，但仍然

# c++ - 使用自定义模块构建 python 解释器的问题

> ID：13403596
> 
> 赞同：1
> 
> 时间：2012-11-15T18:11:28.027
> 
> 标签：c++, python, linux, gnu-make, python-2.6

我正在尝试在 Linux 上构建 python-2.6 解释器，并在解释器中嵌入一个自定义模块。我尝试按照 Python 文档中关于“使用 C 或 C++ 扩展 Python”的说明进行操作，但仍然出现问题。构建时我不断收到以下错误：

```
make: *** No rule to make target `Modules/_custommodule.c', needed by `Modules/_custommodule.o'.  Stop. 
```

我已经检查了生成的 Makefile，它确实包含对我的 _custommodule.c 文件的引用，并且为依赖项链接了正确的库，但由于某种原因没有生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:22:51.540

这通常是因为您没有可制作的名为 custommodule.c 的文件。检查：

*   该文件存在。
*   当你制作时，你在正确的目录中。

如果这不起作用，请使用该目录的目录列表编辑您的帖子。

# c++ - 分析帖子请求

> ID：13403597
> 
> 赞同：2
> 
> 时间：2012-11-15T18:11:31.973
> 
> 标签：c++, qt, http, post

我正在尝试使用 c++ Qt 发出发布请求。
目标站点是 [http://www.artlebedev.ru/tools/decoder/advanced/](http://www.artlebedev.ru/tools/decoder/advanced/)
该站点看起来是这样的： ![在此处输入图像描述](../Images/164cb1c35639afdfe9caa2ab163e35a5.png)

我用浏览器检查了它。
对我来说有一件奇怪的事情 - 标题中的随机数。
所以，我不确定我是否正确发送了发布请求的数据。

![在此处输入图像描述](../Images/f2bb622a53b62d3459c2d096c9e8616d.png)

他们这样做是为了什么？我提出我的要求（就像浏览器一样）：

```
postdata.append("accept:*/*&");
postdata.append("accept-charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3&");
postdata.append("Accept-Encoding:gzip,deflate,sdch&");
postdata.append("Accept-Language:en-US,en;q=0.8&");
postdata.append("Connection:keep-alive&");
postdata.append("Content-Length:36&");
postdata.append("Content-Type:application/x-www-form-urlencoded&");
postdata.append("Cookie:__utma=1.904416008.1352897318.1352905816.1352909441.3; __utmc=1; __utmz=1.1352897318.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __atuvc=7%7C46&");
postdata.append("Host:www.artlebedev.ru&");
postdata.append("Origin:http://www.artlebedev.ru&");
postdata.append("Referer:http://www.artlebedev.ru/tools/decoder/advanced/&");
postdata.append("User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11&");
postdata.append("X-Requested-With:XMLHttpRequest&");
postdata.append("random:0.9632773566991091&"); // I have no idea about this number
postdata.append("Form Dataview URL encoded&");
postdata.append("csin:0&");
postdata.append("csout:0&");
postdata.append("text:fvddas&");
postdata.append("Decode:go"); 
```

我得到网页的答案。但该网页不包含解码字符串。只有空刺。
看起来是这样的： ![在此处输入图像描述](../Images/af9932b9db1ef3e6378f132e5d401389.png)

这是我第一次尝试发帖请求，请帮我找到出路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:00:00.187

随机值看起来像某种[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)令牌，以防止人们做你想做的事情，但实际上并没有被使用。如果我在没有任何 cookie 或随机值的情况下使用 Fiddler 重新发出请求，请求仍然成功。

事实上，这个请求也做了：

```
POST http://www.artlebedev.ru/tools/decoder/advanced/ HTTP/1.1
Host: www.artlebedev.ru
Content-Type: application/x-www-form-urlencoded
Content-Length: 33

csin=0&csout=0&text=foo&Decode=go 
```

所以你的请求一定有问题，我想你不应该只是将外部查看器的请求复制粘贴到代码中，而是看看你在做什么：

```
postdata.append("Form Dataview URL encoded&"); 
```

这不是 HTTP 标头。服务器不响应`400 Bad Request`. 该行的位置应该是单个 CRLF，用于将标头与实体（“请求正文”）分开。

`postdata`如果您在发送之前输出它的内容，以查看您是否发现有问题，这可能会很有用。

或许如果您喜欢该站点可以执行的编码转换（或其他任何功能），您可以询问该站点的创建者是否有您可以解决的公开可用的 API，或者他们甚至会共享一些代码或将您指向宝贵的资源，以便为自己重新创建这样的转换。

# c - 什么是“扩展整数类型”？

> ID：13403600
> 
> 赞同：16
> 
> 时间：2012-11-15T18:11:48.920
> 
> 标签：c, gcc, c99

引用我正在读的书：

> 1.  `signed char, signed short int, signed int, signed long int, signed long long int`被称为**标准有符号整数类型**
> 2.  `unsigned char, unsigned short int, unsigned int, unsigned long int, unsigned long long int, _Bool`被称为**标准无符号整数类型**
> 3.  除了标准整数类型外，C99 标准还允许实现定义的**扩展整数类型**，包括有符号和无符号。例如，编译器可能提供有符号和无符号 128 位整数类型。

我对第三点有问题。这些“扩展整数类型”是什么？有什么例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:14:35.697

扩展整数类型是作为扩展提供的特定于实现的整数类型。因为几乎所有关于此类扩展的内容都是实现定义的，所以标准不能对它们说太多。但是，C++09 提案提供了一个框架，用于以不干扰标准兼容程序行为的方式实现此类扩展。

你应该参考[这个](http://www.9wy.net/onlinebook/CPrimerPlus5/app02lev1sec6.html)，它涵盖了关于扩展整数类型的所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:42:24.180

扩展整数类型的一个例子是`__int64`MS Visual C 定义的 64 位有符号整数类型。虽然这种类型显然是整数类型，但在旧版本的 MSVC 中，它不能以`int`、`long int`、 或的形式获得`long long int`。（MSVC`long long int`同时增加了对的支持。）

# python - Python ctypes 不能正确返回一些通过引用传递的值

> ID：13403601
> 
> 赞同：5
> 
> 时间：2012-11-15T18:11:51.507
> 
> 标签：python, ctypes

我正在尝试从 Python 调用 DLL。DLL 是用纯 C 语言编写的，没有什么特别复杂的地方。这正是 ctypes 的用途。但是，我无法在从 DLL 函数调用返回的结构中获取正确的值。传递的结构中的第一个值被正确返回，但其他值不是。

该代码从内存中的缓冲区读取多条消息。它使用 ReadFirst() / ReadNext() 编码范例。有一个“当前消息”结构被传入以跟踪状态。

这是保存当前 ReadFirst() / ReadNext() 状态的 C 结构...

```
typedef struct
    {
    unsigned int            uMsgNum;
    uint32_t                ulCurrOffset;
    uint32_t                ulDataLen;
    Su1553F1_ChanSpec     * psuChanSpec;
    Su1553F1_Header       * psu1553Hdr;
    SuCmdWordU            * psuCmdWord1;
    SuCmdWordU            * psuCmdWord2;
    uint16_t              * puStatWord1;
    uint16_t              * puStatWord2;
    uint16_t                uWordCnt;
    uint16_t              * pauData;
    } Su1553F1_CurrMsg; 
```

这是用 ctypes 编写的 ctypes 结构对应物...

```
class CurrMsg_1553F1(ctypes.Structure):
    ''' Data structure for the current 1553 message info structure '''
    _pack_   = 1
    _fields_ = [("MsgNum",      ctypes.c_uint32),
                ("CurrOffset",  ctypes.c_uint32),
                ("DataLen",     ctypes.c_uint32),
                ("pChanSpec",   ctypes.POINTER(ChanSpec_1553F1)),
                ("p1553Hdr",    ctypes.c_void_p),
                ("pCmdWord1",   ctypes.POINTER(CmdWord)),
                ("pCmdWord2",   ctypes.POINTER(CmdWord)),
                ("pStatWord1",  ctypes.c_void_p),
                ("pStatWord2",  ctypes.c_void_p),
                ("WordCnt",     ctypes.c_uint16),
                ("pData",       ctypes.c_void_p)] 
```

我将在下面提供更多详细信息，但问题的症结在于调用 ReadFirst() / ReadNext() 正确返回 MsgNum 的值，但其他值是垃圾。这是一个示例输出...

```
MsgNum 0  CurrOffset 40912728  DataLen 40912732  Messages = 3664897
MsgNum 1  CurrOffset 40912728  DataLen 40912748  Messages = 60417
MsgNum 2  CurrOffset 40912728  DataLen 40912748  Messages = 60417
etc. 
```

MsgNum 是正确的，并且 ReadFirst() / ReadNext() 迭代正确的次数。但是，CurrOffset 和 DataLen 的值是垃圾。（Messages 值已从指向其他内存的指针中取消引用。我认为我还没有这个权利，但我必须保存那个，直到我修复了其他内容。如果 CurrOffset 和 DataLen 错误，则指向 pChanSpec也可能是错误的。）

这是功能的接口...

```
EnI106Status enI106_Decode_First1553F1
    (SuI106Ch10Header * psuHeader,
     void             * pvBuff,
     Su1553F1_CurrMsg * psuMsg);

EnI106Status enI106_Decode_Next1553F1
    (Su1553F1_CurrMsg * psuMsg); 
```

这些 DLL 函数被调用（连同调试打印语句）...

```
def __init__(self, PacketIO):
    self.CurrMsg  = CurrMsg_1553F1()

def Decode_First1553F1(self):
    Status = self.PacketIO._IrigDataDll.enI106_Decode_First1553F1(ctypes.byref(self.PacketIO.Header), ctypes.byref(self.PacketIO.Buffer),  ctypes.byref(self.CurrMsg))
    print "MsgNum %d  CurrOffset %d  DataLen %d  Messages = %d" % \
        (Decode1553.CurrMsg.MsgNum, Decode1553.CurrMsg.CurrOffset, Decode1553.CurrMsg.DataLen, Decode1553.CurrMsg.pChanSpec.contents.MsgCnt)
    return Status

def Decode_Next1553F1(self):
    Status = self.PacketIO._IrigDataDll.enI106_Decode_Next1553F1(ctypes.byref(self.CurrMsg))
    print "MsgNum %d  CurrOffset %d  DataLen %d  Messages = %d" % \
        (Decode1553.CurrMsg.MsgNum, Decode1553.CurrMsg.CurrOffset, Decode1553.CurrMsg.DataLen, Decode1553.CurrMsg.pChanSpec.contents.MsgCnt)
    return Status 
```

C DLL 是在 Visual Studio 2005 下编译的。我在各种 C 和 C++ .NET 程序中多次使用这个 DLL，没有任何问题。

我使用 ctypes 和 structs 在其他代码中返回值，它似乎工作得很好。由于结构中的第一个值是可以的，但随后的值与这种“感觉”相去甚远，就像数据对齐问题一样。我在 ctypes 结构中设置了*pack* =1 并在编译的 DLL 代码中设置了字节对齐。我已经完成了每个结构的 sizeof 打印输出，并验证了它们是预期的大小。

我已经在这个问题上撞墙有一段时间了，我没有想法。关于接下来要尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:45:43.637

我注意到 C 结构的第一个元素是 unsigned int，但您的 python 结构是 c_uint32。你确定它们在你的架构上是一样的大小吗？

如果这没有任何帮助，我会执行以下操作来追踪问题的根源：

首先，我将从`_pack_`python 声明和`#pragma pack`C 源代码中的任何或其他对齐操作中删除。从已知的地方开始，原生对齐。

然后...

我会编写一个 C 程序来迭代结构并使用`offsetof(struct, field)`. 此外，该程序应该调用 First() 和少量调用 Next() 并将结构按原样以二进制形式写入文件。

接下来，使用 struct 模块编写一个 python 脚本，并遍历您从 C 程序中写出的结构，并掌握字段大小和对齐方式的知识，调用[struct.unpack](http://docs.python.org/2/library/struct.html#struct.unpack) (...) 查找格式正确定义结构的字符串。

有了这些知识，您应该能够正确编码 ctypes.Structure

# python - 为什么我不能在 django 中为子类创建 ForeignKey 字段？

> ID：13403602
> 
> 赞同：0
> 
> 时间：2012-11-15T18:11:53.600
> 
> 标签：python, django

类 Folder 继承自类 Item，它具有 Folder 的外键：

```
class Item(models.Model):
    # some fields
    folder = models.ForeignKey('Folder')

class Folder(Item):
    # some fields 
```

当我尝试运行它时，我收到错误：

```
app.item: 'folder' has a relation with model Folder, which has either not been installed or is abstract 
```

我认为正确的做法是将模型名称放在引号中，我已经这样做了，但这似乎没有帮助。我应该怎么做才能完成这项工作？

编辑：使用有意义的类名澄清问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:40:37.723

> 我有项目 (A)，其中一些是文件夹 (B)。我希望两个类都最多引用一个文件夹

（对我而言）您尝试做的事情没有多大意义，但这可以通过以下方式实现：

```
class Item(models.Model):
    # some fields
    is_folder = models.BooleanField(default=False)
    some_other_folder = models.ForeignKey('self', null=True, blank=True) 
```

然后用 python 代码检查 if `is_folder==False`，那`some_other_folder` 不是 None(null)。

所以实际上你不需要2个模型。

# android - 为 ListView 设置字体

> ID：13403605
> 
> 赞同：1
> 
> 时间：2012-11-15T18:12:08.763
> 
> 标签：android, android-listview

我有 2 个用于列表视图的 XML 文件。一个用于视图，另一个用于首先使用。note_list.XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dip" >

    <Button
        android:id="@+id/allNotes_btn_refresh_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/all_note_refresh_list" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

和 list_otem.XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/list_lbl_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <TextView
        android:id="@+id/list_lbl_subject"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/list_lbl_date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

在下面的代码中，我为列表设置了适配器：

```
ArrayList<HashMap<String, String>> noteList;
ListView lv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.note_list);
    noteList = new ArrayList<HashMap<String, String>>();
    lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String note_id = ((TextView) view
                    .findViewById(R.id.list_lbl_id)).getText().toString();
            Intent i = new Intent(getApplicationContext(), NoteDetail.class);
            i.putExtra("note_id", note_id);
            startActivityForResult(i, 100);
        }
    });
}

public class LoadAllNotes extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllNotes.this);
            pDialog.setMessage("???? ??? ????...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();

            noteList.clear();
        }

        protected String doInBackground(String... args) {

            UserFunctions userFunctions = new UserFunctions();

            jSon = userFunctions.getAllNotes(userId);

            Log.i("AllNotes >> jSon >>", jSon.toString());

            return null;
        }

        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
            try {
                if (jSon.has(KEY_SUCCESS)) {
                    String success = jSon.getString(KEY_SUCCESS);
                    if (success.equals("1")) {

                        notes = jSon.getJSONObject("notes");
                        for (int i = 0; i < notes.length(); i++) {
                            JSONObject c = notes.getJSONObject(Integer
                                    .toString(i));

                            Log.i("JSONObject c >>", c.toString());

                            String id = c.getString(KEY_NOTE_ID);
                            String subject = c.getString(KEY_NOTE_SUBJECT);
                            String date = c.getString(KEY_NOTE_DATE);

                            HashMap<String, String> map = new HashMap<String, String>();
                            map.put(KEY_NOTE_ID, id);
                            map.put(KEY_NOTE_SUBJECT, subject);
                            map.put(KEY_NOTE_DATE, date);

                            noteList.add(map);
                        }

                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            runOnUiThread(new Runnable() {

                public void run() {
                    ListAdapter adapter = new SimpleAdapter(AllNotes.this,
                            noteList, R.layout.list_item, new String[] {
                                    KEY_NOTE_ID, KEY_NOTE_SUBJECT,
                                    KEY_NOTE_DATE }, new int[] {
                                    R.id.list_lbl_id, R.id.list_lbl_subject,
                                    R.id.list_lbl_date });
                    setListAdapter(adapter);
                }
            });
        }
    } 
```

如何在 item_list.XML 中为 TextViews 设置字体？我在 java 代码中为内容视图设置了 note_list。所以无法访问 list_item.xml 的视图。谢谢你帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:24:34.400

您需要覆盖`SimpleAdapter`'`getView(int position, View convertView, ViewGroup parent)`方法并将结果转换为`TextView`. 这对`R.layout.list_item`布局来说应该是安全的，尽管您可能需要仔细检查。

从那里开始，设置字体照常工作。

片段，放置在 SimpleAdapter 的（匿名）扩展中：

```
Typeface mTypeface = ... // only needs to be initialised once.

@Override public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    TextView textview = (TextView) view;
    textview.setTypeface(mTypeface);
    return textview;
} 
```

如果，也许在未来的某个时候，您将拥有一个更复杂的布局，而不仅仅是一个单一`TextView`的`ArrayAdapter`. 有很多关于如何去做的例子（也可以查看 ViewHolder/RowWrapper 模式），它会让你完全控制。

* * *

编辑：下面的示例代码。

```
public class TypefacedSimpleAdapter extends SimpleAdapter {
    private final Typeface mTypeface;

    public TypefacedSimpleAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        mTypeface = Typeface.createFromAsset(context.getAssets(), /* typeface */);
    }

    @Override public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        TextView textview = (TextView) view;
        textview.setTypeface(mTypeface);
        return textview;
    }
} 
```

复制粘贴上面的类，并确保根据您的要求设置字体字段。然后替换当前的`SimpleAdapter`；即是这样的：

```
ListAdapter adapter = new TypefacedSimpleAdapter(AllNotes.this,
        noteList, R.layout.list_item, new String[] {
        KEY_NOTE_ID, KEY_NOTE_SUBJECT,
        KEY_NOTE_DATE }, new int[] {
        R.id.list_lbl_id, R.id.list_lbl_subject,
        R.id.list_lbl_date }
); 
```

请注意，我实际上并没有编译或运行任何这些。我将由您来填补任何空白和/或进行更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:04:26.313

我在下面添加了这个：

```
public class myAdapter extends SimpleAdapter {
    public myAdapter(Context context, List<HashMap<String, String>> items,
            int resource, String[] from, int[] to) {
        super(context, items, resource, from, to);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        Typeface typeFace = Typeface.createFromAsset(getAssets(),
                "fontsfolder/B Yekan.ttf");

        TextView lbl_subject = ((TextView) view
                .findViewById(R.id.list_lbl_subject));
        TextView lbl_date = ((TextView) view
                .findViewById(R.id.list_lbl_date));

        lbl_date.setTypeface(typeFace);
        lbl_subject.setTypeface(typeFace);

        return view;
    }
} 
```

并在填充列表时更改代码：

```
myAdapter adapter = new myAdapter(AllNotes.this, noteList,
        R.layout.list_item, new String[] { KEY_NOTE_ID,
                KEY_NOTE_SUBJECT, KEY_NOTE_DATE },
        new int[] { R.id.list_lbl_id,
                R.id.list_lbl_subject, R.id.list_lbl_date });
setListAdapter(adapter); 
```

感谢@MH。求助

# c# - 如何在运行时更改资源字典颜色

> ID：13403606
> 
> 赞同：6
> 
> 时间：2012-11-15T18:12:09.793
> 
> 标签：c#, wpf

在 XAML 中：

```
<ResourceDictionary>
    <Color x:Key="BrushColor1">Red</Color>
    <Color x:Key="BrushColor2">Black</Color>

    <LinearGradientBrush x:Key="GradientBrush1" StartPoint="0,0.5" EndPoint="1,0.5">
        <GradientStop Color="{DynamicResource BrushColor2}" Offset="0" />
        <GradientStop Color="{DynamicResource BrushColor1}" Offset="1" />
    </LinearGradientBrush>
</ResourceDictionary> 
```

在 C# 中：

```
 public void CreateTestRect()
    {
        Rectangle exampleRectangle = new Rectangle();
        exampleRectangle.Width = 150;
        exampleRectangle.Height = 150;
        exampleRectangle.StrokeThickness = 4;
        exampleRectangle.Margin = new Thickness(350);

        ResourceDictionary resources = this.Resources;
        resources["BrushColor1"] = Colors.Pink;
        resources["BrushColor2"] = Colors.RoyalBlue;
        Brush brush =(Brush)this.FindResource("GradientBrush1");

        exampleRectangle.Fill = brush;
        canvas.Children.Insert(0, exampleRectangle);
    } 
```

如何在 C# 的运行时更改这些颜色元素。LinearGradientBrush 应该动态更改吗？

我想做这样的事情：

```
(Color)(this.FindResource("BrushColor1")) = Colors.Pink; 
```

但我失败了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:14:23.607

您可以直接覆盖资源字典中的值。

例如：

```
ResourceDictionary resources = this.Resources; // If in a Window/UserControl/etc
resources["BrushColor1"] = System.Windows.Media.Colors.Black; 
```

话虽如此，我通常建议不要这样做。相反，我将有两组颜色，每组都有自己的键，并使用某种机制来切换在运行时将哪种颜色分配给您的值。这使您可以将整个逻辑留在 xaml 本身中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T16:47:19.137

我刚刚解决了。看起来只有**LinearGradientBrush**不支持**DynamicResource**的颜色。即使你覆盖了动态颜色，**LinearGradientBrush**本身也不会更新。PS：**SolidColorBrush**支持运行时颜色变化。改为执行以下操作：

```
LinearGradientBrush linearGradientBrush = (LinearGradientBrush)(this.FindResource("GradientBrush1"));
linearGradientBrush.GradientStops[0].Color = color1;
linearGradientBrush.GradientStops[1].Color = color2; 
```

如果**LinearGradientBrush**隐藏在 Resource Dictionary 中定义的嵌套复杂画笔中，则使**LinearGradientBrush**出现，并为其分配一个键。

# google-chrome - -webkit-backface-visibility 今天在 Chrome 中中断了吗？

> ID：13403607
> 
> 赞同：2
> 
> 时间：2012-11-15T18:12:11.850
> 
> 标签：google-chrome, css, webkit, transform

我有点困惑，因为我的项目昨天工作，但今天似乎不再正常工作。（是的，我已经从 git 检查了以前的版本。）

问题：以前隐藏的一些 div`-webkit-backface-visibility: hidden;`神奇地出现了。我已将此问题隔离为小提琴：

[http://jsfiddle.net/Js6cg/1/](http://jsfiddle.net/Js6cg/1/)

div 在 Chrome 中可见`23.0.1271.64 m`（错误）但隐藏在`25.0.1326.0 canary`（如我所料）中。

**您能否确认这确实是 Chrome 中的一个错误，或者我是否以某种方式错误地使用了 CSS？**

（我今天已将我的 GPU 驱动程序（AMD Catalyst）从 12.8 更新到 12.10，如果这很重要的话。）

* * *

此外，[展示我一直在复制的效果的网站](http://css3playground.com/flip-card.php)似乎在 Chrome 稳定版中正常工作 +- （除了明显忽略`-webkit-perspective`和动画那种波涛汹涌的），而 Chrome 金丝雀很好地呈现它并接受透视。我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:27:18.883

好吧，这很尴尬。

这个故事看起来像：我已经更新了 GPU 驱动程序，但看起来我实际上已经很久没有重新启动 Chrome 了。出于某种原因，它无法在驱动程序更新后重新启用 GPU 合成，因此一些更高级的 CSS3 效果（如`perspective`和`backface-visibility`）根本不起作用，而简单的变换使用了备用 CPU 实现，这也使它们看起来不连贯并在演示站点上。

我在驱动程序更新后很好地启动了 Chrome Canary，所以它在 GPU 合成方面没有任何问题。一个实例有效，另一个无效，但版本不匹配在这里根本不重要。

重新启动 Chrome 解决了该问题。而且我要休息了！

# django - 如何使用 Django 进行分组和聚合

> ID：13403609
> 
> 赞同：87
> 
> 时间：2012-11-15T18:12:24.440
> 
> 标签：django, django-aggregation

我想通过 ORM 进行一个相当简单的查询，但无法弄清楚..

我有三个模型：

位置（地点）、属性（地点可能具有的属性）和评分（还包含分数字段的 M2M“通过”模型）

我想选择一些重要的属性，并能够根据这些属性对我的位置进行排名——即所有选定属性的总分越高 = 越好。

我可以使用下面的 SQL 来得到我想要的：

```
select location_id, sum(score) 
    from locations_rating 
    where attribute_id in (1,2,3) 
    group by location_id order by sum desc; 
```

返回

```
 location_id | sum 
-------------+-----
          21 |  12
           3 |  11 
```

我能用 ORM 得到的最接近的是：

```
Rating.objects.filter(
    attribute__in=attributes).annotate(
    acount=Count('location')).aggregate(Sum('score')) 
```

哪个返回

```
{'score__sum': 23} 
```

即所有的总和，不按位置分组。

有什么办法吗？我可以手动执行 SQL，但宁愿通过 ORM 来保持一致。

谢谢

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-11-15T19:29:58.713

尝试这个：

```
Rating.objects.filter(attribute__in=attributes) \
    .values('location') \
    .annotate(score = Sum('score')) \
    .order_by('-score') 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-15T18:27:23.063

你能试试这个。

```
Rating.objects.values('location_id').filter(attribute__in=attributes).annotate(sum_score=Sum('score')).order_by('-score') 
```

# php - 是否可以使用 netbeans 7.3 beta git 推送到 1 个以上的存储库？

> ID：13403611
> 
> 赞同：0
> 
> 时间：2012-11-15T18:12:36.140
> 
> 标签：php, git, netbeans, netbeans-7.3

我是新`git`用户，在 Windows 7 上使用内置的 NetBeans 支持。

我在开发计算机上对我的项目文件进行了一些更改，并将它们提交到远程仓库。我现在想使用`git`(NetBeans) 将我的项目推送到我在实时 Web 服务器上创建的裸仓库。

这可以使用 NetBeans 命令还是我需要转到命令行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:17:54.343

不确定是否在 Netbeans 中使用它，但[Netbeans git 文档](http://netbeans.org/kb/docs/ide/git.html#remote)似乎建议您必须选择要推送到的存储库。

# mysql - MYSQL：使用 NULL 值搜索枚举字段

> ID：13403615
> 
> 赞同：0
> 
> 时间：2012-11-15T18:13:07.167
> 
> 标签：mysql

表人：

```
name
type enum('admin','user','random') NULL DEFAULT NULL 
```

执行此查询时，它不返回类型为 NULL 的记录

```
select * from person where type != 'admin'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:15:30.703

不能用（不）相等语句测试 null 。你需要使用`IS NULL`. 例如

```
select *
from person
where (type != 'admin') or (type IS NULL) 
```

例如 null 是“传染性的”

```
null > x    -> null
null = x    -> null
null = null -> null
null + 1    -> null
null * 1    -> null 
```

等等......它基本上是“未知的”。在 sql 中混合已知和未知会使结果始终未知。因此特殊的 ifnull()、coalesce() 和“if null”测试/函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:16:58.330

您可以在 MySQL中使用[NULL 安全相等运算符](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to)

```
select *
from person
where not type <=> 'admin' 
```

# html - 表单标签在foreach循环剃须刀MVC 3中消失

> ID：13403619
> 
> 赞同：1
> 
> 时间：2012-11-15T18:13:28.320
> 
> 标签：html, asp.net-mvc-3, razor

我在 razor 的 foreach 循环中出现表单标签的问题，当它呈现输出 html 时是错误的，因为在第一次迭代中，表单标签消失在这里是 razor 代码

```
@foreach (var item in Model)
        {

            <tr>

                <td>@if (item.IsMandatory)
                    {
                        <span class="label label-important">Obligatorio</span>
                    }
                    else
                    {
                        <span class="label">Opcional</span>
                    } </td>

                <td>@Html.DisplayFor(modelItem => item.DocumentName)</td>
                <td>

                </td>
                <td>
                    <form>
                        form here!
                    </form>

                </td>
             </tr>

        } 
```

这是呈现的html：

```
 <table class="table table-striped">
  <thead>
     <tr>
         <th>Requerido</th>
         <th>Documento</th>
         <th>Accion</th>
    </tr>
</thead>    
 <tbody>
    <tr>
      <td>
      <span class="label label-important">Obligatorio</span>
     </td>
     <td>Copia de cédula</td>
      <td>
       here form!    <----------Problem Here
      </td>
    </tr>
     <tr>
      <td>
     <span class="label label-important">Obligatorio</span>
     </td>
      <td>
        Copia de otro documento de identidad (licencia, pasaporte, seguro)
     </td>
      <td>
        <form novalidate="novalidate">
                 here form!
         </form>

      </td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:05:55.543

您可能正在尝试在现有标签中开始一个新标签，如下所示：

```
<form id="mainPageForm">
@foreach(item in items)
{
    <form id="nestedForm@(item.FormId)">
}
</form> 
```

结果是这样的：

```
<form id="mainPageForm">
  <form id="nestedForm1"></form>  --> this ends the first form
  <form id="nestedForm2"></form>  --> correctly formed
  <form id="nestedForm3"></form>  --> correctly formed
</form> --> closing tag without parent 
```

# r - RStudio Shiny 条件图

> ID：13403627
> 
> 赞同：15
> 
> 时间：2012-11-15T18:14:17.087
> 
> 标签：r, ggplot2, rstudio, shiny

我正在尝试使用新的 RStudio 功能 Shiny 创建一个 Web 应用程序，该功能可以绘制不同的股票。我创建了以下示例。

我想选择数据集 StockMarket，然后选择例如 DAX，最后应该出现绘图。

现在，如果您运行此代码，该图将立即出现

请问你能帮帮我吗？

```
ui.R:
library(shiny)
library(ggplot2)

shinyUI(pageWithSidebar(

# Application title
headerPanel("Plot1"),
sidebarPanel(
selectInput("dataset", "Dataset", list("mtcars"="cars", "StockMarket"="stocks")),

conditionalPanel(
  condition = "input.dataset=='stocks'",
  uiOutput("data")
)),
mainPanel(
plotOutput('plotstock')) ))

server.R:
library(shiny)
require(ggplot2)
library(datasets)

shinyServer(function(input, output) {

output$data<- reactiveUI(function() {

selectInput("data", "Choose Dataset", colnames(EuStockMarkets))
})

output$plotstock <- reactivePlot(function() {
data<-data.frame(EuStockMarkets)
p<- ggplot(data,aes(x=seq(1,length(data[,1])),y=DAX))+geom_line(size=1)+ylab("")+opts(title="Time Series")
print(p)
 })}) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-15T18:40:30.547

在`reactivePlot`函数中，您可以执行类似的操作

```
if (is.null(input$data))
  return(NULL) 
```

我还将在数据集选项 ( `"(Choose one)"=""`) 中添加一个空白条目，并且还有

```
if (!nzchar(input$dataset))
  return(NULL) 
```

在`reactivePlot`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T01:57:50.577

还要确保检查空字符串

```
if (!nzchar(input$dataset) || input$dataset=='')
return(NULL) 
```

# jquery - jquery读取表值以计算重复行

> ID：13403631
> 
> 赞同：0
> 
> 时间：2012-11-15T18:14:24.060
> 
> 标签：jquery, arrays

我有一些脚本可以从 html 表中读取值，但是将数组中现有项目的名称与临时项目名称进行比较时存在问题。

```
$(document).ready(function () {
    var selling = new Array();
    $('table tr').each(function() {
        var name = $(this).find('td:eq(1)').html();
        var price = $(this).find('td:eq(3)').html();
        var amount = 1;
        var item = new Array(name,price,amount);
        var found = 0; //selling.find(name)? notworking :)
        if(found.length > 0) {
            alert('found'); //get amount and change it
        } else {
            selling.push(item); //push new item to array                       
        }
    });
    alert(selling);
}); 
```

我想得到一个数组

```
[cat, 10$, 150]
[cow, 120$, 7]
[bird, 500$, 1]
[horse, 400$, 2] 
```

有人能告诉我如何比较这些名字吗？还是这样做更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:20:35.730

试试这个，使用[$.inArray()](http://api.jquery.com/jQuery.inArray/)：

```
$(document).ready(function () {
    var selling = new Array();
    $('table tr').each(function() {
        var name = $(this).find('td:eq(1)').html();
        var price = $(this).find('td:eq(3)').html();
        var amount = 1;
        var item = new Array(name,price,amount);
        if($.inArray(item,selling) > -1) {
            alert('found'); //get amount and change it
        } else {
            selling.push(item); //push new item to array                       
        }
    });
    alert(selling);
}); 
```

# vba - 循环浏览我的 excel 页面上的一些复选框

> ID：13403635
> 
> 赞同：0
> 
> 时间：2012-11-15T18:14:37.990
> 
> 标签：vba

我对 VBA 非常陌生（并且只在 excel 中知道它）。

我正在尝试循环浏览一些（但不是全部）复选框。它们目前被命名为 CheckBox1 到 CheckBox15。Howe 我如何循环通过例如 CheckBox5 到 CheckBox10？

我想我希望有一个类似于“CheckType”的“方法”用于控件，可以让我检查名称？

这是我尝试过的。导致编译错误 - 未定义子或函数，并突出显示工作表。

```
Private Sub BoxCheck()
atLeastOneChecked = False
    For i = 2 To 4
        If Worksheets("ActiveX").Controls("Checkbox" & i).Value = True Then
            atLeastOneChecked = True
        End If
    Next i
End Sub 
```

虽然以上不起作用，但以下内容起作用：

```
Private Sub BoxCheck()
    atLeastOneChecked = False

    For i = 1 To 2
       If Sheet2.CheckBox2.Value = True Then
                atLeastOneChecked = True
       End If
    Next i

End Sub 
```

当然，循环对结果没有影响，但是当 Checkbox2 为 True 时，它​​会编译并且 atLeastOneChecked 从 False 变为 True。请注意，Sheet2 已被命名为 ActiveX。我显然不明白工作表和控件是如何工作的。有人可以帮忙吗？

修复下面描述的错误后，这仍然不起作用。我简化为以下内容：

```
Private Sub BoxCheck()
    Dim ole As OLEObject

    atLeastOneChecked = False
    Set ole = Sheets("ActiveX").OLEObjects("Checkbox2")
    If ole.Value = True Then
        atLeastOneChecked = True
    End If
 End Sub 
```

这行不通。它失败于：

```
If ole.Value = True Then 
```

错误状态：对象不支持此属性或方法

这适用于 OLEObjects，但不适用于复选框。当我查看 ole 的属性时，我看到它的 Object 属性设置为 Object/Checkbox 并且这个 Object 有一个值。我想这就是我应该在 if 语句中引用的内容，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:51:32.463

我想我解决了这个问题。

通过引用我设置的 OLEObject 中的 Object 属性来访问 Checkbox 的值...像这样：

```
If ole.Object.Value = True Then 
```

感谢你的帮助。如果有人有更优雅的解决方案，我仍然希望看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:21:56.490

采用`CheckBox.Name`

例子：

```
For Each cb In ActiveSheet.CheckBoxes 
    If cb.Name = "CheckBox5"
        ' Do stuff
    End If
Next cb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:27:42.953

要扩展[@Parker](https://stackoverflow.com/a/13403730/493055)的答案：

```
Private Sub BoxCheck()
    atleastonechecked = False
    Dim oles As OLEObject
    For i = 2 To 4
        'If you're using Shapes Controls:
        If ThisWorkbook.Worksheets("ActiveX").Shapes("Check Box " & i).Value = True Then
            atleastonechecked = True
        End If
        ' If you're using ActiveX Controls
        Set oles = ThisWorkbook.Worksheets("ActiveX").OLEObjects("CheckBox" & i)
        If oles.Value = True Then
            atleastonechecked = True
        End If
    Next i
End Sub 
```

抱歉，只是将先前的答案放在一起而不进行测试-总是失败。只需`If`根据您使用的控件类型使用循环即可。

# javascript - 来自 301 重定向的 Google Analytics（分析）引荐

> ID：13403639
> 
> 赞同：1
> 
> 时间：2012-11-15T18:15:11.767
> 
> 标签：javascript, jquery, google-analytics

我们有一个网站，我们使用一些自定义 javascript 将所有子域和外部域汇总到一个域中。这一切都在起作用。但是，主域显示为引用并且正在破坏页面流。

我们在 IIS 中使用 ISAPI ReWriter 以 301 将所有流量重定向到“example.com”到“www.example.com”。

然后在所有网站上，无论是内部还是外部，我们使用相同的通用代码来确定是否应该设置域或是否应该推送链接。

问题：1）如果我们要跟踪子域 blog.example，将域设置为“.example.com”（在 _gaq.push(['_setDomainName', '.example.com']);) 是否正确。 com、store.example.com 等.example.com？

2) 如果我们将 IIS 中的 example.com 站点重定向到 www.example.com 而不是使用 ISAPI ReWrite 会怎样？

3) 为什么 example.com 显示为推荐，如何阻止这种情况？

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXETC']);
      var locText = window.location.host;

        // vars to check domain
        var exampleDomain = new RegExp('www.example.com', 'i');
        var exampleRedirect = new RegExp('^example.com', 'i');

        //check if we are on the main domain
        if(exampleDomain.test(locText) || exampleRedirect.test(locText)){

            //Roll Up (domain and subdomains)
              _gaq.push(['_setAllowLinker', true]);
            _gaq.push(['_setDomainName', '.example.com']);

        } else {
            _gaq.push(['_setDomainName', 'none']);
            _gaq.push(['_addIgnoredRef', window.location.host]);
              _gaq.push(['_setAllowLinker', true]);
        }

        _gaq.push(['_trackPageview']);

        (function() {

        // load the ga.js file.  This happens last now.
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        // this function is an exclusion blacklist of sites we don't want to push
        function donotpushlinks(linkpattern)
        {
            var blacklist = [
                "twitter"
                ,"facebook"
                ,"tumblr"
                ,"youtube"
                ,"pinterest"
                ,"infantino"
                ,"exampleuk"
            ];
            var re = new RegExp('\\b' + blacklist.join("|") + '\\b', 'i');

            return(linkpattern.match(re) != null);
        }

jQuery(document).ready(function(){
        //for each anchor on the page, check whether we need to push
        jQuery('a').each(function() {
               var a = new RegExp('/' + window.location.host + '/');
               //do not touch javascript links
               var b = new RegExp('^javascript', 'i');
                  var c = new RegExp('javascript', 'i');
                  //test against the blacklist
               var d = donotpushlinks(this.href);

               //1) check if link is not internal
               if(!a.test(this.href))
               {
                   //2) Check if it is javascript
                   if (!b.test(this.href) || !c.test(this.href))
                   {
                           //3) check if it not one of the blackklist test patterns
                           if (!d)
                           {
                               //console.log(d + " " + this.href);
                               jQuery(this).click(function(event)
                               {
                                   event.preventDefault();
                                   event.stopPropagation();

                                   // Google it
                                   _gaq.push(['_link',this.href]);

                                    return false;
                               });
                           }
                           //3) Otherwise, it is a link to an external site outside of example. Open in new window with NO tracking
                           else
                           {

                            jQuery(this).click(function(event)
                               {
                                   event.preventDefault();
                                   event.stopPropagation();
                                   window.open(this.href, '_blank');
                                    return false;
                               });

                           }
                   }
                   //2) Otherwise, it is javascript, so leave it alone
                   else{

                           }
               }
               //1) otherwise it is internal, so leave it alone
               else
               {
                //console.log('Internal link: ' + this.href);  
               }
            });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:56:28.027

我不喜欢使用 _setDomainName 'none'，它有一些缺点。

但是，我会首先重新考虑`window.location.host`支持`window.location.hostname`for的选择`_addIgnoredRef`，甚至建议使用`window.location.hostname.split('.')[window.location.hostname.split('.').length]`

问题`host`在于它包含端口号，因此它限制了它与推荐值匹配的机会。

[https://developer.mozilla.org/en/docs/DOM/window.location](https://developer.mozilla.org/en/docs/DOM/window.location)

# android - Android SweepGradient

> ID：13403649
> 
> 赞同：15
> 
> 时间：2012-11-15T18:15:46.973
> 
> 标签：android, android-canvas, ondraw, gradient

我有一个 SweepGradient 定义为

```
circle_paint.setShader(new SweepGradient(getWidth()/2, getHeight()/2, new int[] { circle_start_color, circle_end_color}, new float[] { 0f, 1f})) 
```

应用于定义为的拱门

```
canvas.drawArc(circle_bounds, circle_start_perc*360f, circle_end_perc*360f, true, circle_paint); 
```

这很好用，但我需要拱门从屏幕顶部开始绘制，即

```
canvas.drawArc(circle_bounds, ((circle_start_perc*360f)-90f)%360, circle_end_perc*360f, true, circle_paint); 
```

问题是 SweepGradient 似乎仍然从 0 度开始，我需要它从 270 度开始（类似于弧线图上的平移）。换句话说，如果我有一个从白色到蓝色的渐变，我需要将弧的顶部涂成白色，然后将弧的最后部分涂成蓝色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-29T09:09:41.230

使用 a 旋转 SweepGradient 的原点`Matrix.preRotate`：

```
final int[] colors = {circle_start_color, circle_end_color};
final float[] positions = {0f, 1f};
Gradient gradient = new SweepGradient(circle_bounds.centerX(), circle_bounds.centerY(), colors, positions);
float rotate = 270f;
Matrix gradientMatrix = new Matrix();        
gradientMatrix.preRotate(rotate, circle_bounds.centerX(), circle_bounds.centerY());
gradient.setLocalMatrix(gradientMatrix);
mPaint.setShader(gradient); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-15T19:03:22.553

您可以尝试使用`getLocalMatrix()`和`setLocalMatrix()`对`SweepGradient`着色器应用旋转。您可以获取当前矩阵，发布适当的旋转，`postRotate()`然后将其设置回着色器元素。

另一种选择是旋转`Canvas`。您可以预先旋转画布，绘制内容，然后恢复它；或者先绘制内容，然后再旋转画布。

# shell - Shellscript 向套接字发送消息并保持连接处于活动状态

> ID：13403650
> 
> 赞同：2
> 
> 时间：2012-11-15T18:15:47.693
> 
> 标签：shell

我对 shell 脚本很陌生，我的问题是我不太确定如何使我的套接字连接有效。我不确定我编写的脚本是否在做它应该做的事情。

我尝试做的是，我相信我创建了 140 个套接字并向这些套接字发送消息，并且我希望这些套接字连接保持活动状态。

```
for (( i=0; i<140; i++))
do
echo "Message" > /dev/tcp/187.98.06.01/4599
done 
```

有一个我发送这个消息的服务器，我也得到一个日志消息，客户端连接在服务器端建立，但是当我检查套接字连接数时，数字是0。我不确定是否是因为套接字连接正在关闭。

我需要保持套接字连接处于活动状态。任何人都可以为上述代码提供建议或修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:05:23.717

> 我使用 GNU bash，版本 3.2.25(1)-release (x86_64-redhat-linux-gnu)。

这不是很安全*，*也不是很便携，但是您*应该*能够编写：

```
# Open 140 TCP connections to port 4599 on 187.98.06.01, using
# file-descriptors 60 through 199:
for (( i = 0 ; i < 140 ; i++ )) ; do
    fd=$((i + 60))
    eval exec "$fd<>/dev/tcp/187.98.06.01/4599"
    echo Message >&$fd
done

# ... do whatever you want with these 140 connections ...

# Close the connections:
for (( i = 0 ; i < 140 ; i++ )) ; do
    fd=$((i + 60))
    eval exec "$fd<&-" "$fd>&-"
done 
```

（它不可移植的原因是它依赖于并非由所有 shell 共享的 Bash 功能。它不安全的原因是 shell 将文件描述符用于其自己的内部内容，例如打开脚本和搜索目录。描述符 0到 9 — STDIN、STDOUT、STDERR 和其他七个 — 供您使用，但描述符 10 和更高的风险与 shell 正在执行的操作冲突。在 Bash 4.x 中有一个功能可以让您提供变量名重定向并让 Bash 决定使用什么文件描述符，但 Bash 3.x 没有。）

# algorithm - 我们可以使用带有后缀树的圆形字符串吗？

> ID：13403653
> 
> 赞同：3
> 
> 时间：2012-11-15T18:16:03.620
> 
> 标签：algorithm, suffix-tree

我们可以使用带有后缀树的圆形字符串吗？所以最后一个字符后面是列表中的第一个字符。

如果是这样，这个后缀树的表示与普通的后缀树有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:31:08.783

这取决于您所说的“使用”是什么意思。

**1）** 首先，以最直接的方式解释您的问题，考虑一个长度为 n 的圆形字符串，即每 n 个字符重复一次的无限字符串。这样的对象没有通常意义上的后缀，因为它永远不会结束，所以你不能构造它的后缀树。

**2)**然而，这个想法肯定是我们有一个循环字符串的*有限表示*，它使用从最后一个字符到第一个字符的链接。以类似的方式，我们可以通过使用指向表示循环字符串的所有（无限长）后缀的循环后缀树的链接来扩展给定的后缀树。请注意，这*不能通过插入从每个叶子到节点根的链接来完成，因为从根开始，**所有*节点都有出边*字符串的后缀，但是从这样一个圆形字符串的叶子中，只能有一个出边。示例：代表“mississippi$”的后缀“ssippi$”的叶子应该有一个带有无限标签“mississippi$mississippi$mississippi$....”的出边，并且没有其他边。如果您要将它链接到树的根部，将会有更多不正确的延续。*

 *所以有两件事是必要的：

*   叶子的出边（毕竟这是一个有趣的概念）。每片叶子都有一个出边。
*   带有无限标签的边缘。该标签可以表示为圆形字符串（并且该圆形字符串对于叶子的所有传出边缘都是相同的）。

这将为您提供循环字符串的所有（无限）后缀的有效表示。

**3）**我不确定这种表示是否对任何事情有用。如果构建后缀树的目的是启用子字符串搜索，那么将循环字符串（不包括链接）的有限表示连接到自身并从中构造后缀树的常用技巧就足够了，除非您搜索的子字符串本身长于 n 个字符。

同样重要的是要注意，后缀树的某些其他用途需要引入进一步的“无限”概念。例如，对于某些应用程序，可能需要在该节点中存储树节点的字符深度（即从根到特定节点的边标签的组合长度）。在上面提出的“循环后缀树”中，叶子的出边会导致某种特殊的“极限叶子”，并带有一个圆形字符串作为标签。任何匹配到这样一个循环字符串的查询都需要一种特殊的方式来跟踪匹配深度，因为该边上没有内部节点来存储深度信息。

**4)**说了这么多，实际上至少有一种已知的后缀树应用于圆形字符串，但不是上面 (1)、(2) 或 (3) 的意义，即通过使用后缀树。而是使用循环字符串的有限子字符串的后缀树来解决**字典最小旋转**问题。该问题在[Wikipedia](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)上进行了描述，尽管其中列出的解决方案不包括任何使用后缀树的解决方案。然而，Dan Gusfield在 7.13 节中[的字符串、树和序列算法中描述了解决方案。](http://openlibrary.org/books/OL1006774M/Algorithms_on_strings_trees_and_sequences)

这个想法是，您认为长度为 n 的字符串 S 的字典最小旋转集合等效于圆形字符串的第一个长度为 n 的子字符串的集合。那么这个问题就等价于找到一个词典最小的分界点。Gusfield 通过构造字符串 SS$ 的后缀树来解决它，通过在每个节点处获取字典最小边并因此在对应于字典最小截止点的节点处遍历该树。

因此，如 (4) 所示，在循环字符串的上下文中，后缀树有一些实际的“用途”，但我不确定这是否是您感兴趣的那种用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:24:35.253

是的，鉴于字符串的长度是有限的，您可以存储圆形字符串。

让我们考虑一个词banban。

下面是结构

```
root -> b -> a -> n -> b -> a -> n -> $

                    -> $

root -> a -> n -> b -> a -> n -> $

                -> $

root -> n -> b -> a -> n -> $

          -> $ 
```

美元符号表示后缀的终止

编辑：

可以在[这里找到使用 Java 编程语言的后缀树的简洁实现](http://en.literateprograms.org/Suffix_tree_%28Java%29)

编辑：如评论部分所述：

*“如果我有字符串 Mississippi 并且我想搜索 'pim' 怎么办？”*

pim 不是密西西比的后缀，因此搜索将失败。

编辑：*但是 pim 在圆形字符串中，我也想将它添加到 trie*

为此，您必须将 prim 视为一个单独的单词并将其添加到 trie 以形成全局增强后缀 trie。

考虑 anb 在原始单词 banban 的循环字符串中。

因此，全局增强后缀 trie 将是：

```
root -> b -> a -> n -> b -> a -> n -> $ (original word)

          -> a -> n -> $ (original word)

          -> $ (from anb)

root -> a -> n -> b -> a -> n -> $ (original word)

               -> $ (original word)

               -> b -> $ (from anb)

root -> n -> b -> a -> n -> $ (original word)

                -> $ (from anb)

          -> $ (original word) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:18:27.163

我会考虑你想要这个，并考虑以下解决方法：

如果你有一个循环字符串的后缀数组，这将主要是字符串内的偏移量列表，这样从每个偏移量开始的序列都是按排序顺序排列的。

现在假设你有一个通过环绕 ABCD 制成的圆形字符串。考虑通过将除自身的一个字符之外的所有字符附加到它所形成的字符串 - ABCDABC，以及如果从它构建一个后缀数组会发生什么。循环字符串 (ABCD BCDA CDAB DABC) 中的所有序列都出现在 ABCDABC 内，因此当您从中构建后缀数组时，您将获得与从循环字符串构建它相同的后缀数组，其中一些序列带有附加字符结尾（ABCDABC 而不是 ABCD）和一些太短的额外序列（ABC）。您可以通过查看子序列的长度或等效地查看其在 ABCDABC 中的起始位置来识别这两种情况。

显然，您可以在mississippimississipp 中找到pim。*

# buddypress - Buddypress：修改 BP-Default

> ID：13403655
> 
> 赞同：0
> 
> 时间：2012-11-15T18:16:05.270
> 
> 标签：buddypress

我有一个任务，*直接删除对 buddypress 插件的所有修改*，我首先将 bp-default 替换为**新**下载的副本，然后该站点停止工作。

**显然，该站点依赖于该目录中的某些内容**

所以我的问题是：

**修改 bp-default 目录是否可以接受？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:29:08.140

这是建议的，并且是一个很好的做法，不要修改 bp-default 主题中的任何内容。因此，就您的问题而言，“不，它不被认为可以接受”。那是因为 buddypress 的未来更新将替换您更改的所有内容。因此，最好创建自己的子主题并在那里进行所有编辑。

# javascript - 如何将边距重置为 0 并将自定义边距应用于 highcharts.js 上的 x 类别栏

> ID：13403657
> 
> 赞同：0
> 
> 时间：2012-11-15T18:16:09.487
> 
> 标签：javascript, jquery, html, jquery-ui

我一直在尝试更改单杠上的边距，但没有运气，有没有办法做到这一点？如果是这样，是否可以设置 margin-bottom: 20px 到所有的规则，然后 margin-bottom: 40px 只到元素 2、4、6 和 8？我创建了一个[http://jsfiddle.net/creativestudio/KrTbz/6/](http://jsfiddle.net/creativestudio/KrTbz/6/)

这是我的代码：

```
 function smileys() {

            var chart;
            $(function () { 
                chart = new Highcharts.Chart({ 
                    chart: {
                        renderTo: 'smileys',
                        type: 'bar',
                        backgroundColor: 'transparent',
                    },
                    title: { text: null },
                    subtitle: { text: null },
                    xAxis: {
                        tickLength: 0,
                        lineWidth: 0,
                        categories: ['Awesome','Awesome Previous', 'Good', 'Good Previous', 'Okay', 'Okay Previous', 'Awful', 'Awfull Previous'],
                        title: {
                            text: null
                        },
                        labels: {
                            enabled: true,
                            color: '#fff',

                            x: 5,
                            y: 0,
                            useHTML: true,
                            formatter: function () {
                                console.log(this);
                                return {
                                    'Awesome': '<i class="smile-awesome" style="font-size:.75em" type="icon"></i>',
                                    'Good': '<i class="smile-good" style="font-size:.75em" type="icon"></i>',
                                    'Okay': '<i class="smile-okay" style="font-size:.75em" type="icon"></i>',
                                    'Awful': '<i class="smile-yuck" style="font-size:.75em" type="icon"></i>',
                                }[this.value];
                            }
                        }
                    },
                    yAxis: {
            max: 100,
            min: 0,
            gridLineWidth: 0,
            title: {
                text: null
            },
            labels: {
                enabled: false,
            }
        },
                    tooltip: {
                        enabled: false
                    },
                    plotOptions: {
                        bar: {
                            dataLabels: {
                                enabled: true, 
                                color: '#f60'
                            }
                        }
                    },
                    legend: { enabled: false },
                    credits: { enabled: false },

                    plotOptions: { 
                        series: {
        //                  type: 'bar',
                            borderWidth: 0,
                            borderRadius: 3,
                            pointWidth: 20,
                            shadow: false
                            }
                        },

                    series: [{
                            data: [{
                                name: 'Awesome',
                                y: 88,
                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(66, 121, 54)'],
                            [.50, 'rgb(86, 146, 71)'],
                            [.50, 'rgb(97, 159, 79)'],
                            [1, 'rgb(120, 182, 98)']]}

                            }, {
                                name: 'Awesome Previous',
                                y: 85,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(62, 131, 161)'],
                            [.50, 'rgb(45, 94, 119)'],
                            [.50, 'rgb(51, 107, 134)'],
                            [1, 'rgb(34, 72, 91)']]}

                            }, {
                                name: 'Good',
                                y: 75,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(167, 195, 100)'],
                            [.50, 'rgb(183, 206, 128)'],
                            [.50, 'rgb(192, 213, 145)'],
                            [1, 'rgb(207, 223, 170)']]}

                            }, {
                                name: 'Good Previous',
                                y: 50,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(62, 131, 161)'],
                            [.50, 'rgb(45, 94, 119)'],
                            [.50, 'rgb(51, 107, 134)'],
                            [1, 'rgb(34, 72, 91)']]}

                            }, {
                                name: 'Okay',
                                y: 95,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(211, 127, 39)'],
                            [.50, 'rgb(220, 151, 52)'],
                            [.50, 'rgb(224, 163, 57)'],
                            [1, 'rgb(232, 186, 72)']]}

                            }, {
                                name: 'Okay Previous',
                                y: 85,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(62, 131, 161)'],
                            [.50, 'rgb(45, 94, 119)'],
                            [.50, 'rgb(51, 107, 134)'],
                            [1, 'rgb(34, 72, 91)']]}

                            }, {
                                name: 'Awful',
                                y: 68,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(190, 63, 36)'],
                            [.50, 'rgb(203, 83, 48)'],
                            [.50, 'rgb(208, 94, 53)'],
                            [1, 'rgb(220, 116, 66)']]}

                            }, {
                                name: 'Awful Previous',
                                y: 88,

                                color: {
                        linearGradient: {
                            x1: 0, 
                            y1: 0, 
                            x2: 1, 
                            y2: 0
                        },
                        stops: [
                            [0, 'rgb(62, 131, 161)'],
                            [.50, 'rgb(45, 94, 119)'],
                            [.50, 'rgb(51, 107, 134)'],
                            [1, 'rgb(34, 72, 91)']]}

                            }]
                    }] //series ends
                }); //Highcharts.Chart ends
            }); //function ends
        }

        smileys(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:43:08.167

听起来像是典型的分组条形图？[http://jsfiddle.net/highcharts/KrTbz/9/](http://jsfiddle.net/highcharts/KrTbz/9/)

功能笑脸（）{

```
var chart;
$(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar',
            backgroundColor: 'transparent',
        },
        title: {
            text: null
        },
        subtitle: {
            text: null
        },
        xAxis: {
            tickLength: 0,
            lineWidth: 0,
            categories: ['Awesome', 'MARGIN-BOTTOM:40 PREVIOUS', 'Good', 'MARGIN-BOTTOM:40 PREVIOUS', 'Okay', 'MARGIN-BOTTOM:40 PREVIOUS', 'Awful', 'MARGIN-BOTTOM:40 PREVIOUS'],
            title: {
                text: null
            },
            labels: {
                enabled: true,
                color: '#fff',
            }
        },
        yAxis: {
            max: 100,
            min: 0,
            gridLineWidth: 0,
            title: {
                text: null
            },
            labels: {
                enabled: false,
            }
        },
        tooltip: {
            enabled: false
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true,
                    color: '#f60'
                },
                borderWidth: 0,
                borderRadius: 3
            }
        },
        legend: {
            enabled: false
        },
        credits: {
            enabled: false
        },

        series: [{
            type: 'bar',
            shadow: false,
            data: [{
                name: 'Awesome',
                y: 88,
                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(66, 121, 54)'],
                        [.50, 'rgb(86, 146, 71)'],
                        [.50, 'rgb(97, 159, 79)'],
                        [1, 'rgb(120, 182, 98)']]
                }

                },
            {
                name: 'Good',
                y: 75,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(167, 195, 100)'],
                        [.50, 'rgb(183, 206, 128)'],
                        [.50, 'rgb(192, 213, 145)'],
                        [1, 'rgb(207, 223, 170)']]
                }

                },
            {
                name: 'Okay',
                y: 95,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(211, 127, 39)'],
                        [.50, 'rgb(220, 151, 52)'],
                        [.50, 'rgb(224, 163, 57)'],
                        [1, 'rgb(232, 186, 72)']]
                }

                },
            {
                name: 'Awful',
                y: 68,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(190, 63, 36)'],
                        [.50, 'rgb(203, 83, 48)'],
                        [.50, 'rgb(208, 94, 53)'],
                        [1, 'rgb(220, 116, 66)']]
                }

                }]},
        {
            type: 'bar',
            data: [{
                name: 'Awesome Previous',
                y: 85,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(62, 131, 161)'],
                        [.50, 'rgb(45, 94, 119)'],
                        [.50, 'rgb(51, 107, 134)'],
                        [1, 'rgb(34, 72, 91)']]
                }

                },
            {
                name: 'Good Previous',
                y: 50,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(62, 131, 161)'],
                        [.50, 'rgb(45, 94, 119)'],
                        [.50, 'rgb(51, 107, 134)'],
                        [1, 'rgb(34, 72, 91)']]
                }

                },
            {
                name: 'Okay Previous',
                y: 85,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(62, 131, 161)'],
                        [.50, 'rgb(45, 94, 119)'],
                        [.50, 'rgb(51, 107, 134)'],
                        [1, 'rgb(34, 72, 91)']]
                }

                },
            {
                name: 'Awful Previous',
                y: 88,

                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(62, 131, 161)'],
                        [.50, 'rgb(45, 94, 119)'],
                        [.50, 'rgb(51, 107, 134)'],
                        [1, 'rgb(34, 72, 91)']]
                }

                }]}] //series ends
    }); //Highcharts.Chart ends
}); //function ends 
```

}

笑脸();​</p>

# regex - 正则表达式：- 字符串可以包含任何字符但不能为空

> ID：13403659
> 
> 赞同：2
> 
> 时间：2012-11-15T18:16:25.477
> 
> 标签：regex, grails, groovy, regex-negation

我的要求是

> “字符串不应为空或空”

例如，字符串可以包含任意数量的字符或后跟任何特殊字符的字符串，但不能为空，例如，字符串可以包含“a,b,c”或“xyz123abc”或“12！@$#% &*()9" 或 "aa bb cc"

所以，这就是我尝试 使用正则**表达式的空白或空格：-**

```
 ^\s*$ 
^ is the beginning of string anchor
$ is the end of string anchor
\s is the whitespace character class
* is zero-or-more repetition of 
```

我被困在如何否定正则表达式 ^\s*$ 以便它接受任何字符串，如 "a,b,c" 或 "xyz" 或 "12!@$#%&*()9"

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:54:40.983

不需要正则表达式。在 Groovy 中，您有以下[`isAllWhitespace`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#isAllWhitespace%28%29)方法：

```
groovy:000> "".allWhitespace       
===> true
groovy:000> "  \t\n ".allWhitespace
===> true
groovy:000> "something".allWhitespace
===> false 
```

所以询问`!yourString.allWhitespace`应该告诉你你的字符串是否不是空的或空白的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:01:17.883

对我来说有两种简单的表达方式（都不需要锚定）：

```
s.trim() =~ /.+/ 
```

或者

```
s =~ /\S+/ 
```

第一个假设您知道 trim() 的工作原理，第二个假设 \S 的含义。当然

```
!s.allWhitespace 
```

是完美的，如果你知道它存在的话

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:17:55.407

`\S`

`\S`匹配任何非空白字符

每个角色类都有自己定义的反类，所以`\w`你有`\W`你`\s`有`\S`你`\d`有`\D`等。

[http://www.regular-expressions.info/charclass.html](http://www.regular-expressions.info/charclass.html)

您的正则表达式引擎可能不支持`\S`. 如果是这种情况，`[^ \t\v]`如果您支持 unicode（您应该这样做），那么您应该注意更多的空间类型。

如果您的正则表达式引擎和您都支持 unicode 并且您的正则表达式引擎`\S`不支持，那么您可能想要使用（如果您关心人们输入不同的 unicode 空间类型）：

`[^ \r\f\t\v\u0085\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200B\u2028\u2029\u202F\u205F\u3000\uFEFF]`

[http://www.cs.tut.fi/~jkorpela/chars/spaces.html](http://www.cs.tut.fi/~jkorpela/chars/spaces.html)
[http://en.wikipedia.org/wiki/Whitespace_character#Unicode](http://en.wikipedia.org/wiki/Whitespace_character#Unicode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:24:39.103

这是在 grails 域类中吗？

如果是这样，[只需使用空白约束](http://grails.org/doc/latest/ref/Constraints/blank.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T18:22:04.160

以下正则表达式将确保字符串包含至少 1 个非空白字符。

```
^(?!\s*$).+ 
```

**注意：**我不熟悉 groovy。但我想有一个本机函数（`trim`,`empty`等）比正则表达式更自然地测试它。

# objective-c - 类型转换用户输入

> ID：13403661
> 
> 赞同：-2
> 
> 时间：2012-11-15T18:16:47.783
> 
> 标签：objective-c, casting

我试图在目标 c 中进行类型转换，但只能提出以下不起作用的源代码。有谁知道解决此问题以正确投射的方法？

```
@interface AppController
{
NSTextField *myTextField;
}
@property (nonatomic, retain) IBOutlet NSTextField *myTextField;
-(IBOutlet) foo 
```

执行：

```
-(IBOutlet) foo 
{
a = [myTextField.stringValue intValue]
float b = int(a)/3
int c = int(b)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:22:13.557

这是在 C 风格语言[中使用强制转换的参考页面。](http://visualcplus.blogspot.ca/2006/02/lesson-4-casting-data-types.html)基本上，您的语法使用`int`起来就好像它是一个函数而不是一个强制转换。

# mysql - 由于已设置的 NOT NULL 字段，MySQL DUPLICATE KEY UPDATE 无法更新

> ID：13403671
> 
> 赞同：4
> 
> 时间：2012-11-15T18:17:13.680
> 
> 标签：mysql

我有一个使用严格模式的 MySQL 数据库，所以当我插入一行时我需要填充所有 NOT NULL 值。我创建的 API 仅使用 DUPLICATE KEY UPDATE 功能来执行插入/更新。

如果插入了预期的任何 NOT NULL 属性，客户端应用程序会抱怨。

基本示例（id 是主键，有两个字段不是 NULL aaa 和 xxx）

```
INSERT INTO tablename (aaa, xxx, id ) VALUES ( "value", "value", 1)
ON DUPLICATE KEY UPDATE aaa=VALUES(aaa), xxx=VALUES(xxx) 
```

到目前为止一切都很好。插入后，系统将允许进行更新。不过，仅更新其中一个字段时出现以下错误。

```
INSERT INTO tablename (aaa, id ) VALUES ( "newValue", 1)
ON DUPLICATE KEY UPDATE aaa=VALUES(aaa)

java.sql.SQLException: Field 'xxx' doesn't have a default value 
```

此异常是谎言，因为该行已被插入并且 xxx 属性具有“值”作为值。我希望以下句子等同于：

```
UPDATE tablename SET aaa="newValue" WHERE id=1 
```

如果有人能对这个问题有所了解，我会很高兴。

编辑：

我可以成功地使用 PhpMyAdmin 中的 SQL 查询来更新一个字段，所以恐怕这不是 SQL 问题，而是 JDBC 的驱动程序问题。那可能没有解决办法。

@Marc B：您的见解可能是正确的，并且可以表明我刚刚描述的内容。这意味着 JDBC 中存在一个错误，因为它不应该检查何时插入是 ON DUPLICATE 类型，因为毕竟可能存在该行的默认值。无法提供真实的表格数据，但我相信上面的解释都很清楚。

@ruakh：它不会插入失败，我也不期待延迟验证。我的一个要求是使用相同的查询完成插入/更新，因为 servlet 不知道该行是否存在。JAVA API 服务仅无法更新插入完成时已填充的 NOT NULL 字段的行。例外是谎言，因为该字段确实具有默认值，因为它是在更新之前插入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:27:59.430

这是典型的 DRY/SRP 失败案例；为了不重复代码，您创建了一个违反单一责任原则的函数。

语句的语义`INSERT`是您期望没有冲突的行；该`ON DUPLICATE KEY UPDATE`选项只是为了避免处理代码内部的冲突，需要另一个单独的查询。这与语句完全不同，在`UPDATE`语句中您希望至少存在一个匹配的行。

想象一下，MySQL 只会在`INSERT`不冲突时检查列，并且由于某种原因刚刚从数据库中删除了一行，并且您希望执行更新的代码必须处理它不期望的异常。鉴于语句行为的不同，最好将插入和更新逻辑分开。

抛开理论不谈，当查询运行时，MySQL 会组合一个执行计划。在`INSERT`声明的情况下，它必须假设它在尝试时可能会成功，因为这是最优化的策略。它可以防止必须检查索引等，只是后来才发现缺少一列。

这是按设计而不是 JDBC 中的错误。

# php - 更改数据库导致模型作为对象

> ID：13403673
> 
> 赞同：0
> 
> 时间：2012-11-15T18:17:33.550
> 
> 标签：php, codeigniter

在过去的 Codeigniter 项目中，我一直使用`$query->result_array()`而不是`$query->result()`

例如，作为一个数组，我将在模型中包含以下内容：

```
$this->db->select('id, username');
$this->db->from('users');

$query = $this->db->get();

$result = array();
foreach ($query->result_array() as $row)
{
    $id = $row['id'];

    $result[$id]['id'] = $row['id'];
    $result[$id]['username'] = strtolower($row['username']);

)

return $result; 
```

更多记录可能会变得非常混乱，即使我只需要对其中一个字段执行操作，我也必须添加所有字段。

现在，对于我当前的项目，我正在尝试`$query->result()`，这只是一个对象数组，但我不确定如何对它们执行操作并返回结果。

例如，如果我正在使用`$query->result()`并且我想让每个用户名都小写（strtolower），我将如何在模型中执行这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:23:41.527

您的示例和评论的答案：

```
$results = $query->result();
    foreach($results as $result){
        $result->username = strtolower($result->username);
    }
return $results; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:22:04.480

```
foreach($query->result() as $row){
    $username_lower = strtolower($row->username);

    //if you want to actually update the record in the db
    $this->db->where('id',$row->id);
    $this->db->update('users', array('username' => $row->username));
} 
```

# android - Android play 扩展下载器示例实现“不是 zip 错误”

> ID：13403674
> 
> 赞同：0
> 
> 时间：2012-11-15T18:17:47.620
> 
> 标签：android, expansion

我对“Android-sdk/extra/google/play_apk_expation”中的 downloader_sample 有疑问

我制作obb文件。一个 pdf 文件到 zip 文件，由 7zip、winrar 等制作。只是存储而不是压缩。

```
D:\jobb>d:\android-sdk\tools\jobb -pn com.ipetbrand.magazine -d /jobb -o main.2.
com.ipetbrand.magazine.obb -pv 2
Slop: 0   Directory Overhead: 0
Slop: 6047   Directory Overhead: 224 
```

但是 ZipResourceFile 发生 IOException...

这是 logcat 味精：

```
11-16 03:06:51.325: D/LVLDownloader(10573): Initialize Download UI
11-16 03:06:51.325: D/DownloaderClientMarshaller(10573): Disconnecting Service bound: false
11-16 03:06:51.365: D/AsyncCopyFromAPKOperation(10573): FileName: /mnt/sdcard/Android/obb/com.ipetbrand.magazine/main.1.com.ipetbrand.magazine.obb
11-16 03:06:51.365: V/zipro(10573): Not a Zip archive 
```

帮助，任何人。

[已解决] 不要用于扩展文件，android util jobb 只使用 zip 不压缩，只存储。

当您将该 zip 文件上传到 android 市场时，它将是服务器的 obb 文件。

下载它并通过 zip 使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:43:57.537

我认为您最好使用[StorageManager](https://developer.android.com/reference/android/os/storage/StorageManager.html)类而不是将其作为 zipfile 读取。

# c# - 将窗体上的活动控件设置为工具栏

> ID：13403676
> 
> 赞同：0
> 
> 时间：2012-11-15T18:17:51.540
> 
> 标签：c#, winforms

我想设置一个工具栏作为表单的活动控件，做了这样的事情：

```
this.ActiveControl = this.Controls.Find("toolStrip2", false); 
```

但它说它不能从 Control[] 转换为 Cnotrol。

那么如何将该工具栏设置为活动控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:20:33.390

该方法`Find`返回名称与您传递给它的字符串匹配的 Control 实例数组。数组中的第一个控件（如果有的话）应该是您要查找的那个。

您可以使用以下代码执行此操作：

```
Control[] controls = this.Controls.Find("toolStrip2", false);
if (controls.Length > 0)
      this.ActiveControl = controls[0]; 
```

# php - MYSQL 到 CSV - 如何将列标题与选定列匹配

> ID：13403679
> 
> 赞同：0
> 
> 时间：2012-11-15T18:18:02.223
> 
> 标签：php, mysql

对此一无所知，可以使用一些见解。

我尝试只选择某些`column_names`（不是列数据）设置为 CSV 文件的标题。

现在，我只能用 `$result = mysql_query("SHOW COLUMNS FROM ".$table);`

问题是它提取了所有列名，而我只想要某些列的数据。要获取数据值，此查询可以正常工作：

`$values = mysql_query("SELECT ".$columns." FROM ".$table." WHERE channel_id=26");`

例如，如何选择或仅显示我列出的列的列名`$columns`？

**编辑**- 我在这里添加我的完整 PHP 以提供更多上下文。第 7 行是我的问题。

```
<?php

$table = 'exp_channel_data'; // table we want to export
$columns = 'entry_id, field_id_26, field_id_27, '; // only the columns we want to show
$file = 'registrations-from-web'; // csv name.

$result = mysql_query("SHOW COLUMNS FROM ".$table);
$count = mysql_num_rows($result);

$csv_output = "";

if ($count > 0)
{
    while ($row = mysql_fetch_assoc($result))
    {
        $csv_output .= $row['Field'].", ";
    }
}

$csv_output .= "\n";
$values = mysql_query("SELECT ".$columns." FROM ".$table." WHERE channel_id=26");
while ($rowr = mysql_fetch_row($values))
{
    for ($j=0; $j<$count; $j++)
    {
        $csv_output .= $rowr[$j].", ";
    }

    $csv_output .= "\n";
}

$filename = $file."_".date("d-m-Y_H-i",time());

header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");

print $csv_output;

exit;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:28:18.210

如果您知道列的名称，则可以添加它们和/或直接从数组中打印它们。如果您想访问从查询中检索到的那些，您可以`$result = mysql_fetch_assoc($values);`按行访问，并且键将始终包含列的名称，因为结果数组是关联的。

尝试：

```
$values = mysql_query('SELECT '. $columns. ' FROM '.
    $table. ' WHERE channel_id = 26');
print_r(mysql_fetch_assoc($values)); 
```

了解结果数组的内容。

现在尝试：

```
$first = 1;
echo '<table>';
while ($assoc = mysql_fetch_assoc($values))
{
    echo '<tr>';
    if ($first)
    {   
        foreach ($assoc as $key => $value)
            echo "<th>$key</th>\n";
        $first = 0;
    }   
        else
    {   
        foreach ($assoc as $key => $value)
            echo "<td>$value</td>\n";
    }   
    echo '</tr>';
}
echo '</table>'; 
```

如果您想要打印 CSV 文件：

```
$columns = Array();
$values = Array();
$first = 1;
for ($i = 0; $assoc = mysql_fetch_assoc($values); ++$i)
{
    if ($first)
    {   
        foreach ($assoc as $key => $value)
            $columns[] = $key;
        $first = 0;
    }   
        else
    {   
        foreach ($assoc as $key => $value)
            $values[$i][] = $value;
    }   
}
$out = fopen('php://output', 'w');
fputcsv($out, $columns);
foreach ($values as $line)
    fputcsv($out, $line); 
```

foreach 是故意重复的，所以这个例子更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:42:57.977

您可以查询 USER_TAB_COLUMNS 表以获取表列元数据。

```
SELECT table_name, column_name, data_type, data_length
FROM USER_TAB_COLUMNS
WHERE table_name = 'yourTableName' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:55:38.327

所以你可能正在使用 SQL 服务器 - 对于 SQL 服务器使用这个......

```
SELECT [name] AS [Column Name]
FROM syscolumns
WHERE id = (SELECT id FROM sysobjects WHERE type = 'V' AND [Name] = 'Your table name') 
```

视图类型 = 'V' 表格类型 = 'U'

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T22:01:31.820

我不知道为什么我错过了这个，但由于我已经必须列出我需要的列，我只需将该字符串转换为一个数组即可使其正常工作。

`$column_names = Array($columns);` 然后稍后使用 `$csv_output .= '"'.$rowr[$j].'",';`

无需重做我的整个代码即可完美运行。

# windows - libusb Windows 使用 WinUSB BulkTransfer 接收不一致

> ID：13403681
> 
> 赞同：1
> 
> 时间：2012-11-15T18:18:16.090
> 
> 标签：windows, usb, libusb, winusb

我正在尝试使用 libusbx 通过 Windows 与自定义 USB 设备进行通信。我为该设备安装了 WinUSB 驱动程序，并且能够进行*一些*通信。它只是没有按我的预期运行。

我试图从 PC 上进行一些基本的双向通信，我发送一个字节并期望返回一些字节。目前，如果我重置设备并运行发送字节的程序，我只会收到一个字节。如果我重新运行我的程序，我只会得到下一个字节。这种情况又发生了几次，直到最终我收到我所期望的。

例如：PC 发送一个“a”

预期的输出是

```
buffer[0]=3c
buffer[1]=6c
buffer[2]=0
buffer[3]=3e 
```

我实际得到的是：

```
//First try
buffer[0]=3c

//Second Try
buffer[0]=6c

//Third Try
buffer[0]=0
buffer[1]=3e

//Fourth+ tries
buffer[0]=3c
buffer[1]=6c
buffer[2]=0
buffer[3]=3e 
```

当我使用串行通信通过 com 端口测试 USB 设备时，一切都按预期运行。

这是正在运行的代码的 pastebin：http: [//pastebin.com/bQtyS6vq](http://pastebin.com/bQtyS6vq)

有没有人遇到过类似的问题或有任何修复建议？

# java - 硬链接数

> ID：13403683
> 
> 赞同：2
> 
> 时间：2012-11-15T18:18:25.963
> 
> 标签：java, windows, filesystems

检索文件的硬链接计数的更有效方法是什么，它可以随大量文件扩展？

我正在编写一个扫描卷上所有文件以绘制图形的应用程序。它类似于一个不方便地称为[Scanner](http://www.steffengerlach.de/freeware/)的免费软件程序，它确实考虑了硬链接，并且扫描速度非常快，甚至比我在 Java 中甚至不检查硬链接的速度都快。

* * *

我已经尝试通过以下（慢速）方式检查硬链接计数：

（为了便于阅读，示例非常简化）

通过 CMD 程序`STAT`（Windows）

```
process = Runtime.getRuntime().exec(new String[]{"stat", "--printf=%h", "\"" + filePath + "\""});

in = new BufferedReader(new InputStreamReader(process.getInputStream()));
String inpMsg = in.readLine();
linkCount = Integer.parseInt(inpMsg); 
```

并使用 JNI 调用`GetFileInformationByHandle`：

```
String lpFileName = filePath;
int dwShareMode = Kernel32.FILE_SHARE_READ | Kernel32.FILE_SHARE_WRITE;
Pointer lpSecurityAttributes = null;
int dwCreationDisposition = Kernel32.OPEN_EXISTING;
int dwFlagsAndAttributes = 0;
int hTemplateFile = 0;
hFile = Kernel32.INSTANCE.CreateFile(lpFileName, dwDesiredAccess, dwShareMode, lpSecurityAttributes, dwCreationDisposition, dwFlagsAndAttributes, hTemplateFile);

Memory lpFileInformation = new Memory(56);
Kernel32.INSTANCE.GetFileInformationByHandle(hFile, lpFileInformation);

linkCount = lpFileInformation.getInt(40); 
```

* * *

为了说明为什么我想要一个更快的方法，这里列出了不同进程可以多快地遍历我的 C: 驱动器上的所有文件（170000 个文件）：

*   Alt+Enter on C:\：每秒 19000 个文件（9 秒）
*   扫描仪（如上所述）：每秒 7800 个文件（22 秒）
*   Java（无硬链接）：每秒 1750 个文件（98 秒）
*   Java（使用 JNI）：每秒 40 个文件（1:​​10 小时（预计））
*   Java（带有 STAT）：每秒 8 个文件（5:50 小时（预计））

Java 比 Scanner 慢的事实可能与我使用`File.listFiles()`而不是 new的事实有关`FileVisitor`，但我不会接受 40 个文件/秒的速度，这比没有硬链接时慢 43 倍。

（我之前已经扫描了几次之后运行了这些测试。第一次扫描总是花费数倍的时间）

# javascript - 将相同的代码添加到多个函数

> ID：13403688
> 
> 赞同：2
> 
> 时间：2012-11-15T18:18:45.810
> 
> 标签：javascript, design-patterns

我面临一种情况，我需要在 JavaScript 中的多个函数的开头和结尾添加相同的代码块。例如

```
function funcA () {
    // code block 1
    ...

    // code unique to funcA
    ...

    // code block 2
    ...
}

function funcB () {
    // code block 1
    ...

    // code unique to funcB
    ...

    // code block 2
    ...
}

function funcC () {
    // code block 1
    ...

    // code unique to funcC
    ...

    // code block 2
    ...
} 
```

我想知道在这里使用什么正确的模式来减少重复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:19:57.457

它称为提取方法重构。

```
function block1() 
{
  // code block 1
}

function block2() 
{
  // code block 2
}

function funcA () {
    block1();

    // code unique to funcA
    ....

    block2();
}
function funcB () {
    block1();

    //   code unique to funcB
    ....

    block2();
}
function funcC () {
    block1();

    //   code unique to funcC
    ....

    block2();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T18:23:06.083

您可以使用另一个函数为您构建函数：

```
function makeFunc( specialProcessing ) {
  return function() {
    // block 1
    specialProcessing( x, y, z );
    // block 2
  };
}

var func1 = makeFunc( function( x, y, z ) {
  // stuff for func1
});

var func2 = makeFunc( function( x, y, z ) {
  // stuff for func2
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:21:08.380

如果您在这些块中有相当大的代码块，可以通过简单地更改正在使用的变量来普遍应用于每个函数，那么您应该将这些代码块提取到单独的方法中。这具有促进代码重用、提高代码可读性以及使测试和调试变得更加容易的优势，特别是如果您遵循测试驱动的开发理念，甚至只是运行自己的功能测试。好的软件工程和设计的目标始终是创建在许多地方有用的小方法，以减少您必须做的工作并减少代码中的错误数量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T18:28:52.947

块可以提取到函数并使用 apply 方法调用。这将保留上下文并转发传递给原始函数的任何参数。

```
function funcA() {
    block1.apply(this, arguments);

    // specific code to funcA

    block2.apply(this, arguments);
} 
```

*arguments*将包含传递给父函数的任何参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T18:30:47.497

如果您知道它总是会这样设置，并且您不希望在其中包含实际的函数调用，或者某些函数的顺序可能不同，我总是喜欢设置一个函数来交织函数调用我。

[jsFiddle 演示](http://jsfiddle.net/g7b2p/1/)

```
// Set up dynamically to handle calling any number of functions
// in whatever order they are specified in the parameters
// ie: setupFunctionOrder(func1, func2, func3, func4);

function setupFunctionOrder () {
    for (i = 0; i < arguments.length; i++) {
        arguments[i]();
    }
}

function block1 () { log('\nblock1 - running'); }
function block2 () { log('block2 - running'); }
function funcA () { log('funcA - running'); }

// ** Useage:
// now we make the actual call to set up the ORDER of calling -funcA-
setupFunctionOrder(block1, funcA, block2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T19:21:57.017

只需传入您想要唯一的功能。像这样：

```
function reusableFunc(fn) {
    //reused code block here
    fn();
    //reused code block here
}

var myResuableFunc1 = function (args) {
    reusableFunc(function () { 
        //do your business here.    
    });
};

var myResuableFunc2 = function (args) {
    reusableFunc(function () { 
        //do your business here.    
    });
};

//Or another way
function myResuableFunc3(args) {
    reusableFunc(function () { 
        //do your business here
    });
} 
```

然后，您可以使用共享代码创建任意数量的函数，并通过闭包的强大功能，以您喜欢的任何方式传递这些新创建的函数。

# action - 在 VHDL 中保持动作

> ID：13403690
> 
> 赞同：0
> 
> 时间：2012-11-15T18:18:58.167
> 
> 标签：action, state, wait, vhdl, seconds

我想用 Quartus II 创建一个项目，它的功能是根据代码启用三个不同的 LED。当您输入代码时，第一个 LED 将亮起。根据输入的代码，第二个或第三个将打开。我的问题是，当代码正确时，我希望第二个 LED 亮 3 秒，如果不正确，第三个 LED 将在 2 秒内亮。如果你能帮助我，那就太好了。

谢谢！

注：led 被声明为逻辑向量，代码的编号被声明为从 0 到 7 的中断。

代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
ENTITY programa IS
PORT
(
interrup : in Std_Logic_Vector (7 downto 0);
clk, rst: in Std_Logic;
led : out Std_Logic_Vector (2 downto 0)
);
END programa;
ARCHITECTURE arch_programa OF programa IS
    type state is (zero, one, two, three, four, five, six);
    signal pr_state, nx_state : state;
    signal A : Std_Logic_Vector (3 downto 0);
BEGIN
    process(interrup, pr_state)
    begin
        case pr_state is
            when zero =>
                led <= "100";
                A(0) <= interrup(7);
                nx_state <= one;
            when one =>
                led <= "100";
                A(1) <= interrup(6);
                nx_state <= two;
            when two =>
                led <= "100";
                A(2) <= interrup(5);
                nx_state <= three;
            when three =>
                led <= "100";
                A(3) <= interrup(3);
                nx_state <= four;
            when four =>
                led <= "100";
                if(A = "1111") then nx_state <= five;
                else nx_state <= six;
                end if;
            when five =>
                led <= "010";
                nx_state <=zero;
            when six =>
                led <= "001";
                nx_state <=zero;
            end case;
    end process;

    process(rst,clk)
    begin
        if(rst='1') then
            pr_state <= zero;
        elsif (clk'event and clk = '1') then
            pr_state <= nx_state;
        end if;         
    end process;

end arch_programa; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:43:29.183

至于第一个问题，您需要计算 3 或 2 秒的时钟脉冲，因此您需要知道时钟频率。例如，当您打开 LED 时启动计数器，当您计算出正确的脉冲数时关闭 LED 和计数器。从该值开始倒数并在计数器达到零时停止通常更容易。

至于第二个，按钮必须通过输入端口连接，您可以将其用作其中一个进程的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:53:41.963

可能有很多方法可以解决这个问题，但是在不更改代码的情况下，这里有一个（注意，未完全测试）。

*   给每个状态一个取决于时钟速率的计数输出。
*   建立一个足以容纳最大计数的计数器寄存器。
*   减少每个时钟的计数，当它为零时重新加载。
*   重载值来自新状态。
*   在零之前的最后一个计数上切换状态。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
ENTITY programa IS
PORT
(
    interrup : in Std_Logic_Vector (7 downto 0);
    clk, rst: in Std_Logic;
    led : out Std_Logic_Vector (2 downto 0)
);
END programa;           

ARCHITECTURE arch_programa OF programa IS
    type state is (zero, one, two, three, four, five, six);
    signal pr_state, nx_state : state;
    signal A : Std_Logic_Vector (3 downto 0);
    signal count,pr_count:integer;  --NOTE: Synthisizing integers is very unpredictable, should use unsigned    
BEGIN
    assign_counts:process(pr_state)
    begin
         --no idea what states need what delay, this is just an example
         case pr_state is
             when zero | one | two => 
                  pr_count<=10;
             when four =>
                  pr_count<=20;
             when others =>
                  pr_count<=50;
         end case;
    end process;

    process(interrup, pr_state)
    begin
        case pr_state is
            when zero =>
                led <= "100";
                A(0) <= interrup(7);
                nx_state <= one;
            when one =>
                led <= "100";
                A(1) <= interrup(6);
                nx_state <= two;
            when two =>
                led <= "100";
                A(2) <= interrup(5);
                nx_state <= three;
            when three =>
                led <= "100";
                A(3) <= interrup(3);
                nx_state <= four;
            when four =>
                led <= "100";
                if(A = "1111") then nx_state <= five;
                else nx_state <= six;
                end if;
            when five =>
                led <= "010";
                nx_state <=zero;
            when six =>
                led <= "001";
                nx_state <=zero;
            end case;
    end process;

    process(rst,clk)
    begin
        if(rst='1') then
            pr_state <= zero;
            count<=pr_count;
        elsif (clk'event and clk = '1') then
            if count=0 then
                count<=pr_count;
            elsif count=1 then
                pr_state <= nx_state;
                count<=count-1;
            else
                count<=count-1;
            end if;
        end if;         
    end process;        
end architecture;

--Test bench
library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity bench is
end bench;

architecture bench of bench is   

component programa IS
  PORT (
    interrup : in Std_Logic_Vector (7 downto 0);
    clk, rst: in Std_Logic;
    led : out Std_Logic_Vector (2 downto 0));
END component;  

signal clk:std_logic:='1';   
signal interrup:std_logic_vector (7 downto 0);
signal rst:std_logic;
constant freq:real:=1.0e6;

begin   

    do_reset:process
    begin 
        rst<='1';
        wait for 10 us;
        rst<='0';
        wait;
    end process;

    clk<=not clk after 0.5 sec / freq;

    UUT:programa port map (
      interrup => interrup,
      clk => clk,
      rst => rst);

end architecture; 
```

# java - 在泽西岛的 Json 输出中删除基础对象

> ID：13403692
> 
> 赞同：0
> 
> 时间：2012-11-15T18:19:14.810
> 
> 标签：java, json, jersey

我们需要在这种返回中移除基础 List 对象（equipmentMetrics）：

```
{
"equipmentMetrics": [{
    "id": "BOSS|C5E02126",
    "reportedHours": "499.9998",
    "reportingDate": "2012-10-10"
}, {
    "id": "BOSS|C5E02126",
    "reportedHours": "499.9998",
    "reportingDate": "2012-11-10"
}] 
```

}

我们正在使用 Jersey 和这个对象：

```
 @XmlRootElement(name = "equipmentMetrics")
    public class EquipmentMetricsResponse {
        private String id;
...} 
```

而这个端点：

```
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Path("")
public List<EquipmentMetricsResponse> postV1Default(EquipmentMetricsRequest theRequest) {...} 
```

我相信我们希望响应看起来像这样。我们只想取出：

> “设备指标”：

所以我相信我们想要这个：

```
[{
        "id": "BOSS|C5E02126",
        "reportedHours": "499.9998",
        "reportingDate": "2012-10-10"
    }, {
        "id": "BOSS|C5E02126",
        "reportedHours": "499.9998",
        "reportingDate": "2012-11-10"
    }] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:34:48.473

你可以使用`com.google.gson.Gson`库来做到这一点。

```
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Path("")
public String postV1Default(EquipmentMetricsRequest theRequest) {
   List<EquipmentMetricsResponse> retVal ...
   ...  
   return new Gson().toJson(retVal);  
} 
```

返回的 JSON 是

```
 [{
        "id": "BOSS|C5E02126",
        "reportedHours": "499.9998",
        "reportingDate": "2012-10-10"
    }, {
        "id": "BOSS|C5E02126",
        "reportedHours": "499.9998",
        "reportingDate": "2012-11-10"
    }] 
```

# c# - 编译器错误消息：BC30451：未声明名称“cmbY”

> ID：13403695
> 
> 赞同：-2
> 
> 时间：2012-11-15T18:19:20.507
> 
> 标签：c#, asp.net, ajax

我在这段编码中遇到错误，

第 23 行：如果不是 Page.IsPostBack 则 **第 24 行：cmbY.DataSource = rsFirehose("SELECT LeagueTypeKey, LeagueTypeDescription FROM LeagueType" & _** 第 25 行："WHERE LeagueTypeKey=0 或 (Appkey=" & glngAppKey & " AND LeagueTypeKey IN (SELECT Distinct YKey FROM " & _ Line 26: "Division WHERE DivisionTypeKey=" & soaDivisionTypeBracket & ")) ORDER BY LeagueTypeDescription")

**第 24 行是错误，它说名称“cmbY”未声明，我该如何声明？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:24:07.687

没有看到您的代码，我真的无法分辨，但看起来您使用的自定义控件没有在页眉上放置它的 delection，例如

```
<%@ Register TagPrefix="asp" Namespace="ClickableGridView"%> 
```

在 <%@ Page ... 行下

# php - PHP 5.3.6 - curl_exec 挂起

> ID：13403698
> 
> 赞同：2
> 
> 时间：2012-11-15T18:19:44.357
> 
> 标签：php

我对下面的 php 代码有一个奇怪的问题。我注意到这个问题是在 PHP 5.3.6 中随机发生的。当我在 PHP 5.2.5 中运行它时，它每次都有效。不幸的是，由于 5.2.5 的其他 OCI 问题，我们可以降级 php，因此我们必须使用 5.3.6。当问题发生时，我根本没有得到任何回复，而且它是随机发生的。请帮忙，我需要尽快完成这个项目。谢谢。

```
<?php
$url = 'https://www.PayEverywhere.com/api/vtapi.aspx?profile_id=XXXXXXXX&profile_key=XXXXXXXXXXXXX&transaction_type=S&card_number=...';  
$ch = curl_init($url);
curl_setopt($ch,CURLOPT_FRESH_CONNECT,TRUE);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSE);
curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,FALSE);
curl_setopt($ch,CURLOPT_HEADER, 0);
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_TIMEOUT, 120);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, TRUE);  
if ( ! $response = curl_exec($ch) )
{
    echo "Error " . curl_error($ch). "\n";
}
echo $response;        
curl_close ($ch);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:53:14.013

检索以下档案后

[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)

[http://www.openssl.org/source/](http://www.openssl.org/source/)

[http://web.mit.edu/kerberos/dist/index.html](http://web.mit.edu/kerberos/dist/index.html)

```
# Install Curl
./configure --prefix=/curl/prefix --with-ssl=/ssl/prefix --disable-ipv6

# As curl depends on OpenSSL, install OpenSSL
./configure --prefix=/openssl/prefix

# As OpenSSL depends on Kerberos, install Kerberos
./configure --prefix=/kerberos/prefix 
```

# motorola - TI 2540 所需的摩托罗拉 ICS R2 基本连接示例

> ID：13403700
> 
> 赞同：0
> 
> 时间：2012-11-15T18:19:50.983
> 
> 标签：motorola, bluetooth-lowenergy

[这篇文章是关于Android 4.0.4 BLE API、BroadCom - 摩托罗拉](https://stackoverflow.com/questions/13272310/android-4-0-4-ble-api-broadcom-motorola)的后续文章

我决定给摩托罗拉 ICS R2 API 一个机会，因为我在这里看到很多帖子说它应该与 TI BLE 芯片一起使用。

[https://stackoverflow.com/questions/13360468/motorola-bluetooth-low-energy-api-ics-r2-proper-reconnect](https://stackoverflow.com/questions/13360468/motorola-bluetooth-low-energy-api-ics-r2-proper-reconnect)

和

[摩托罗拉 ICS 低功耗蓝牙 API 中的断开回调](https://stackoverflow.com/questions/13331065/disconnect-callback-in-motorolas-ics-bluetooth-low-energy-api?rq=1)

但我的主要问题是，我不能使用 Profile 示例 - 因为它在 BluetoothDevice 对象上使用 som ekstra 作为 BluetoothDevice.ACTION_GATT 和 BluetoothDevice.EXTRA_GATT。我在这里想念什么？

你首先如何连接？

我记得权限等等 - 我知道我需要在 TI BLE 设备上为 Serice 使用 rigth Uuoid。

编译 Profile 示例需要什么？我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:41:32.597

这篇文章的答案可以在

[Android 4.0.4 BLE API，BroadCom - 摩托罗拉](https://stackoverflow.com/questions/13272310/android-4-0-4-ble-api-broadcom-motorola)

感谢彼得万潘森。

# javascript-events - JavaScript getElementById 仅针对一页

> ID：13403705
> 
> 赞同：0
> 
> 时间：2012-11-15T18:20:33.960
> 
> 标签：javascript-events

这是我网站的链接，您可以通过 Firebug 访问代码，而不是将其全部粘贴到此处。www.chrismazzochi.com

我不明白为什么我能够在我的“联系人”页面上影响我的 h1 标题“Chris Mazzochi Web Designs”，id 为“brand”，但*不能*影响其他 3 个具有相同 h1 和相同 id 的页面。那些不受影响的页面是“主页”、“关于”和“作品集”页面。我听说人们推荐使用 getElementByClassName，但 getElementById 对我所针对的所有其他元素都有效。

总之，getElementById 只针对一个页面的一个元素 id，而其他三个页面上具有相同 id 的相同元素不受影响。为什么？

请帮助 JavaScript 向导。我将不胜感激。谢谢你，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:30:53.037

javascript代码的这整个部分是在颜色之间“切换”。

```
var myAside = document.getElementById ("brand");
myAside.onmouseout = function () {  
document.getElementById("brand").style.color = "blue";
//alert ("You're awesome!");} 
```

它可以很容易地实现

```
#wrapper nav a:hover {
    color: blue;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:30:20.807

问题不在于您不能`document.getElementById('brand')`有效地使用，问题在于当您编写执行此操作的代码时，该代码永远不会执行。

在它到达`document.getElementById('fieldset')`返回 null 之前。然后我们使用它的结果来执行一个函数，这会导致错误，因为你不能在 null 上执行函数。

由于导致此错误，脚本的其余部分将被跳过，并且品牌为 id 的位永远不会发生......

由于您已经提到过使用 Firebug，我假设您已经意识到错误，所以我们将让答案是“错误导致脚本的其余部分不被执行”。人们可能还会注意到，这并不总是会发生。当一个事件发生错误时，只有该事件的其余部分不会被执行，而当您的脚本正常执行期间发生错误时，整个脚本的其余部分将被跳过。

# http - HTTP 请求中的授权标头

> ID：13403709
> 
> 赞同：3
> 
> 时间：2012-11-15T18:20:36.090
> 
> 标签：http, header, request, protocols, digest

所以我试图复制这个http请求：

```
GET /Login.asmx/Login%20 HTTP/1.1
Authorization: Digest username="****", realm="****", nonce="****", uri="****", cnonce="****", nc=00000001, qop="****", response="****", opaque="****"
Host: ****
Accept: */*
RETS-UA-Authorization: Digest f172df9efde8948e75fb54f76560921a
RETS-Version: RETS/1.5
User-Agent: *****
X-Librets-Version: 1.5.1, libCURL - libcurl/7.19.6 zlib/1.2.5 
```

并且在顶部看起来像授权标头时遇到了麻烦。

```
GET /Login.asmx/Login HTTP/1.1
Host: ****
Accept: */*
Authorization: Digest username='****', realm='****', nonce='****', uri='/Login.asmx/Login%20', cnonce='MTM1Mjk0', nc=00000001, qop='auth', response='730caf960e18e42f1eb1f103c67b3ff4', opaque='7b227554-0ca3-4095-a6d0-ba5e1ed8c2eb'
RETS-UA-Authorization: Digest 458d81695fdf0f6063836b26cd287dbd
RETS-Version: RETS/1.7.2
User-Agent: ****
X-Librets-Version: 1.5.1, libCURL - libcurl/7.19.6 zlib/1.2.5 
```

我的问题归结为我不知道工作请求中的授权标头到底是什么（我使用了标头一词，但很可能不是）。任何信息或见解将不胜感激。谢谢你。

# asp.net-mvc-3 - 多对多流畅的NHibernate问题

> ID：13403712
> 
> 赞同：1
> 
> 时间：2012-11-15T18:20:45.587
> 
> 标签：asp.net-mvc-3, nhibernate, c#-4.0, fluent-nhibernate, fluent-nhibernate-mapping

我在 mvc4 应用程序中使用流利的多对多映射存在问题，当创建数据库（SQL2012Express）时，没有创建要映射的两个表。

我想映射到多对多关系，因为一个产品可以与许多类别相关联，而类别可以是许多产品。在我的班级类别中，我有：

```
public class Categoria : BaseEntity
{
  public virtual string Name { get; set; }
  public virtual ICollection<Prodotti> Prodotti { get; set; }

    public Categoria()
    {
        Prodotti = new List<Prodotti>();
    }

    public virtual void AddProdotti(Prodotti pro)
    {
        Prodotti.Add(pro);
    }
} 
```

在产品类中：

```
public class Prodotti:BaseEntity
{

  public virtual string Name { get; set; }
  public virtual ICollection<Categoria> Categoria { get; set; }

  public virtual void AddCategorie(Categoria cat)
    {
        Categoria.Add(cat);
    }

  public Prodotti()
    {
        Categoria = new List<Categoria>();
    }

} 
```

类图分别为：

```
public class CategoriaMap : ClassMap<Categoria>
{

    public CategoriaMap()
    {
        Id(x => x.Id).GeneratedBy.HiLo("Id");
        Map(x => x.Name);
        Map(x => x.Description);
        Map(x => x.Active).Default("True");

        HasManyToMany(x => x.Prodotti)
            .Inverse()
            .Table("CategoryProductsMap")
            .ParentKeyColumn("CategoriaId").ChildKeyColumn("ProdottiId")
            .Cascade.All(); ;
    }
}

public class ProdottiMap :ClassMap<Prodotti>
{
     public ProdottiMap()
     { 
         Id(x=>x.Id).GeneratedBy.HiLo("Id");
         Map(x => x.Name).Not.Nullable();
         Map(x => x.Price).Precision(3);
         Map(x => x.isFeatured).Nullable();
         Map(x => x.ShortDescription);
         Map(x => x.FullDescription);
         Map(x => x.ShowOnHomePage).Nullable();
         Map(x => x.Images);
         Map(x => x.Published).Default("False");
         Map(x => x.MetaDescription);
         Map(x => x.MetaKeywords);
         Map(x => x.MetaTitle);
         Map(x => x.SeName);
         Map(x => x.Deleted).Default("False");
         Map(x => x.MinimumPurchaseCount);

         Map(x => x.ShippingWeight);
         Map(x => x.ShippingHeight);
         Map(x => x.ShippingLength);
         Map(x => x.ShippingWidth);

         Map(x => x.CreatedOnUtc);
         Map(x => x.UpdatedOnUtc);

         HasManyToMany(x => x.Categoria)                 
            .Table("CategoryProductsMap")
            .ParentKeyColumn("ProdottiId").ChildKeyColumn("CategoriaId"); 
     }
} 
```

配置是：

```
var configuration =Fluently.Configure()
               .Database(MsSqlConfiguration.MsSql2008.ShowSql().ConnectionString(c =>
               c.FromConnectionStringWithKey("Connection1")))
               .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<latticinibufala.Entities.Maps.CustomerMap>()        )
                // Set session context class to enable ManagedWebSessionContext usage
                .ExposeConfiguration(cfg => cfg.SetProperty("current_session_context_class", "managed_web"))
                .ExposeConfiguration(cfg => cfg.SetProperty("adonet.batch_size", "10"))
                .ExposeConfiguration(BuildSchema)
                .BuildConfiguration()
                ;

            sessionFactory = configuration.BuildSessionFactory(); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:05:14.590

尝试将以下内容添加到您的`CategoriaMap`构造函数中

```
Table("Categoria"); 
```

并遵循`ProdottiMap`构造函数

```
Table("Prodotti"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:47:17.480

只需添加到您的 fuent-nHibernate 配置文件中

```
var props = new Dictionary<string, string>();
props.Add("query.substitutions", "true 1, false 0"); 
```

接着

```
.BuildConfiguration().AddProperties(props); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:37:31.603

我已经解决了，错误的代码是： Map(x => x.Active).Default("True");

因为数据库想要一个数字 1 = True

# objective-c - Block 不会对外部属性变化做出反应

> ID：13403722
> 
> 赞同：0
> 
> 时间：2012-11-15T18:21:30.080
> 
> 标签：objective-c, ios, xcode

在这里提出一些问题后，我决定运行这样的服务器：

```
@implementation Server
-(id)init
{
if (self = [super init])
{   
    shouldRun = true;
    __block Server* blocksafeSelf = self; // should prevent retain cycle

    myServer = ^() {
                    dispatch_async(dispatch_get_main_queue(), ^{
            NSString* currentText = controller.output.text;
            controller.outputTextField.text = [currentText stringByAppendingString:@"Server ready. \n"];
        });

        while (blocksafeSelf.shouldRun) {
           int bytes_received = recvfrom(...);
            if (bytes_received > 0) {
                switch (TYPE OF RECEIVED PACKET) {
                    case 1: {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            NSString* currentText = controller.outputTextField.text;
                            controller.outputTextField.text = [currentText stringByAppendingString:@"S: Received Typ 1 "];
                        });
                        [blocksafeSelf methodToDealWithPacket:(PACKETTYPE*) buffer];
                        break;
                    }
                    ...
                    default: {
                       ...
                    }
                }

            }
        }

return self;
}
@synthesize shouldRun; 
```

对应的 .h 文件：

```
@interface Server : NSObject {
    ServerBlock myServer;
    ....
}
@property BOOL shouldRun;
....
@end 
```

现在我有一个 ViewController，它具有 Server 作为属性，并在其实现中使用以下方法：

```
// called when the user clicks the stop button
- (IBAction) clickedStop
{
    if(theServer != nil) {
        theServer.shouldRun = false;
    }
} 
```

但是，当我单击停止按钮时，服务器不会退出他的 while 循环。为什么？

编辑：这是在 ViewController 中启动服务器的方式：

```
// called when the user clicks the start button
  - (IBAction) clickedStart
   {
   dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);

    if (...) { // all needed data has been entered
        // start server here
        if(theServer == nil) {
            theServer = [[SNPTServer alloc] initWithHost:serverIP.text AndPort:    [serverPort.text intValue] AndViewController:self];
            dispatch_async(queue, theServer.myServer);
        }
    } 
```

}

如您所见，我对上面的构造函数进行了一些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:11:14.543

只有当您的 while 循环的主体类似于以下内容时，我的答案才会起作用（我会假设它确实如此）

```
while (blocksafeSelf.shouldRun) {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate distantFuture]];
} 
```

在这种情况下，仅将 shouldRun 设置为 NO 是不够的。while 循环在不同的线程/runLoop 上运行，因此必须发生事件以导致 run loop 弹出，以便再次检查条件。

最简单的方法是从运行服务器的线程将 shouldRun 设置为 NO。我会做这样的事情：

```
myServer = ^() {
    self.runThread = [NSThread currentThread]; // runThread declared elsewhere
    while (blocksafeSelf.shouldRun) {
          ....
        }
    } 
```

然后当你想取消它时：

```
- (IBAction) clickedStop
{
    if ([NSThread currentThread] == theServer.runThread) {
        if(theServer != nil) {
            theServer.shouldRun = NO;
        }
    } else if (theServer.runThread) {
        [self performSelector:_cmd
                     onThread:theServer.runThread
                   withObject:nil
                waitUntilDone:NO];
    }
} 
```

# mysql - MYSQL：计算一个强制转换的列

> ID：13403723
> 
> 赞同：0
> 
> 时间：2012-11-15T18:21:31.670
> 
> 标签：mysql

我有一个名为 TableA 的表，其中有一个名为 date_entered 的列，它是日期时间类型。我需要计算在给定日期添加的 TableA 行数。

为此，我必须将日期时间转换为日期并计算与给定日期匹配的行数，但我不确定如何编写此查询。

任何帮助将非常感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:22:52.857

利用

```
select count(*)
from tableA
where date(date_entered) = '2012-11-15' 
```

即使记录包含`NULL`值，也要计算该日期的所有行。

或用于`count(specific_column)`计算不包含`NULL`该列值的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:23:55.613

你可以这样做：

```
SELECT COUNT(*), DATE(date_entered) AS date_entered
FROM TableA
GROUP BY date_entered 
```

并将其更改为：

```
SELECT COUNT(*), DATE(date_entered) AS date_entered
FROM TableA
WHERE date(date_entered) = <whatever you want>
GROUP BY date_entered 
```

对于特定的一天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:33:50.350

尝试类似的东西

```
SELECT count(*) FROM tableName GROUP BY datefield 
```

或者

```
SELECT COUNT(*) AS same_date 
FROM TableName 
GROUP BY datefield 
HAVING count(*) >1 ; 
```

# ruby-on-rails - 如何从模块中获取扩展模块的类的名称？

> ID：13403726
> 
> 赞同：0
> 
> 时间：2012-11-15T18:21:47.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop, activerecord

我的 /app/models 文件夹中有以下模型：

```
class MyModel < ActiveRecord::Base
  require "dashboard"
  extend Dashboard

# ...
end 
```

然后，我在 /lib 文件夹中有一个名为dashboard.rb 的文件，其中包含以下代码：

```
module Dashboard
  def self.my_function
    # --> My question pertains to what I need to put here...
  end
end 
```

我想写一行代码，`MyModel::Dashboard.my_function`以便它返回我的模型的名称（在这种情况下`MyModel`）。

我确实找到了一些关于[Get class name from a module](https://stackoverflow.com/questions/1812600/get-class-name-from-a-module)和[https://gist.github.com/1014971](https://gist.github.com/1014971)的信息，但似乎当我的模型继承自 时`ActiveRecord::Base`，情况有所不同。这些文章中的后者应该解释了这一点，但我不知所措。

`superclass.name`我用from inside 尝试了一些排列`Dashboard.my_function`，但我只是得到`Dashboard`或`Module`返回，而不是`MyModel`.

任何能够阐明如何做到这一点的人将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:02:57.963

通过使用`extend`，您正在使您的类的模块方法类方法`MyModel`。尝试这个：

```
module Dashboard
  def my_function
    self.name
  end
end

class MyModel < ActiveRecord::Base
  require "dashboard"
  extend Dashboard

  # ...
end 
```

而不是像`MyModel::Dashboard.my_function`你直接在你的模型类上调用它那样调用它 ->`MyModel.my_function`会返回`MyModel`

# php - Joomla 2.5 在另一个插件之前运行一个插件

> ID：13403727
> 
> 赞同：0
> 
> 时间：2012-11-15T18:21:49.230
> 
> 标签：php, plugins, joomla2.5

我有一个安装了这些插件的 Joomla 安装：

DirectPHP 是一个内容插件

插件包含组件，它是一个系统插件

我遇到以下错误：

```
 Parse error: syntax error, unexpected T_STRING, expecting ',' or ';' in /nfs/c06/h06/mnt/157252/domains/bigideaadv.com/html/wright_specialty2_OLD/plugins/content/DirectPHP/DirectPHP.php(56) : eval()'d code on line 11 
```

我相信我的问题是包含组件插件在 directPHP 插件之前呈现。有没有办法命令这些火熄灭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:32:00.387

您可以在 Extensions->Plugin Manager 下的管理端更改插件的顺序。但是，这个错误似乎更多的是插件中的编码问题，而不是它们运行的​​顺序。我会尝试从同一个插件管理器中禁用这两个插件中的每一个，并查看何时出现错误。

# php - PHP中赋值的操作数优先级

> ID：13403728
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:21:53.817
> 
> 标签：php

是我一个人，还是让赋值的优先级高于任何其他运算符只是奇怪？我刚刚遇到的 PHP 示例：

```
 function test($param1) {
        $result = TRUE;
        for ($i = 0; $i <; strlen($param1); $i++) {
            if (!(ord($param1[$i]) >= 65 && ord($param1[$i]) <=90)) {
                $result = $result && FALSE;
            }
        }
        return $result;
    } 
```

调用此函数的目的是检查字符串是否包含 AZ 范围内的所有字符（如果有更好的方法，很高兴听到它们）。关键部分是`$result = $result && FALSE`我认为会评估右侧`FALSE`然后分配`$result`该值的部分。

但是没有。这个小错误/功能需要一些跟踪。

似乎`$result = $result`首先执行分配，然后执行操作`TRUE && FALSE;`。实际上，我必须给出明确的指示才能说出`$result = ($result && FALSE);`这看起来很奇怪。

无论如何，我不明白这有什么特别有用的“功能”？有什么想法还是我错过了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:34:48.767

> 如果有更好的方法，很高兴听到它们

[`ctype_upper()`](http://www.php.net/manual/en/function.ctype-upper.php)

> 似乎首先执行分配，然后执行 && 操作

你误会了。您对字符对整数的（不正确）测试和`$result`在紧密循环中重新分配的组合感到困惑。

如评论中所述，[尽早失败](https://stackoverflow.com/questions/2807241/what-does-the-expression-fail-early-mean-and-when-would-you-want-to-do-so)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:27:06.793

字符不是 PHP 中的整数，您需要对它们调用[ord](http://php.net/ord)才能与数字文字进行有意义的比较。

就更好的方法而言，[`preg_match()`](http://php.net/preg_match)with怎么样`^[A-Z]*$`？

所以你的代码真正的问题是它永远不会进入最里面`if`。

# cordova - 带有 Phonegap 的 Jade.js

> ID：13403735
> 
> 赞同：0
> 
> 时间：2012-11-15T18:22:09.167
> 
> 标签：cordova, backbone.js, express, phonegap-plugins, pug

我有一个使用jade.js 作为模板语言的node.js + express.js 应用程序。我的应用程序还使用 Backbone.js 作为客户端 MVC。

我想用PhoneGap把它变成一个移动应用程序。我该如何打包？我没有 index.html：全是玉。

我见过[GapServer](https://github.com/jgallen23/gapserver)，但它已经过时并且不起作用。

另外，我是否需要将我的应用程序中的所有 URL 设为绝对而不是相对？

有没有办法将所有这些捆绑到 phonegap 应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:00:56.917

我最终创建了一个 bash 构建脚本来为我的 .jade 文件使用jade 命令。有用于编译翡翠的服务器端解决方案，但我发现这是最简单的。

示例：jade login.jade -P -O ./phonegapBuild

然后我压缩了目录并将其上传到 Phonegap Build。

* * *

无法使用 .render("") 从服务器渲染翡翠。服务器需要返回客户端然后处理的 JSON。然后，客户端可以使用本地捆绑的 HTML 文件（例如：window.location = "test.html"）更改 HTML 页面。

# django - Apache 挂起 mod_wsgi + django

> ID：13403740
> 
> 赞同：11
> 
> 时间：2012-11-15T18:22:28.973
> 
> 标签：django, apache, mod-wsgi

我已经运行了 Apache + mod_wsgi + django。出于某种原因，服务器上发生了一些变化，现在 apache 完全挂起——它停止响应所有其他请求，必须停止并启动——当我发布请求时。最终我们看到“脚本头过早结束：django.wsgi”错误。

我们做了一个 strace，我看到的一件可疑的事情是“GATEWAY_INTERFACE\0CGI/1.1\0SERVER_PROTOCOL...”（我们还看到发出了关闭消息。）

“GATEWAY_INTERFACE\0CGI/1.1”是否指定它是为 CGI 而不是 WSGI 设置的？（我已经读过如果将其设置为 CGI，可能会导致脚本过早结束。）

我们的虚拟主机指定：

```
WSGIDaemonProcess [host] threads=25
WSGIProcessGroup [host]
WSGIScriptAlias / /path/to/apache/django.wsgi 
```

我在 httpd.conf 中看到与 CGI 无关，只是加载了 WSGI 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:16:46.460

在这里，试试这个：

[http://www.foxhop.net/django-virtualenv-apache-mod_wsgi](http://www.foxhop.net/django-virtualenv-apache-mod_wsgi)

请记住将 python 和项目路径添加到 syspath。

# python - Python长时间运行的过程

> ID：13403741
> 
> 赞同：0
> 
> 时间：2012-11-15T18:22:45.477
> 
> 标签：python

我有一个 Python Web 应用程序，其中一个功能可能需要 30 秒才能完成。

我一直在使用来自 PHP 的 cURL 请求（包括参数）开始该过程，但我不希望用户在 Python 函数工作的整个过程中一直盯着空白屏幕。

有没有办法让它“在后台”处理数据，例如关闭 http 套接字并允许用户在继续处理数据的同时做其他事情？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:26:27.173

您应该使用异步数据方法将数据从 PHP 脚本（或直接从 Python 脚本）传输到用户端已呈现的 HTML 页面。

检查 javascript 框架以了解更容易做到这一点的方式（例如 jquery）。然后向用户返回一个减去结果的 html 页面，使用 javascript 代码显示“计算”动画，并在完成后从正确的 URL 以 xml 或 json 格式获取结果。

# azure - 如何将 SQL DB 表添加到 Azure？

> ID：13403743
> 
> 赞同：0
> 
> 时间：2012-11-15T18:22:50.467
> 
> 标签：azure, azure-sql-database

我已经注册了 Azure，创建了一个 SQL Server 项目，但看不到如何从那里创建一个 DB（创建和设计表，IOW 的 DDL 部分）。这是我需要用 SQL 设计工具做的事情，然后从 Visual Studio 导出/导入到 Azure 帐户吗？或者是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:44:15.940

如果您不想像其他人建议的那样使用 SSMS，您可以使用 silverlight 在线管理工具来执行 TSQL 命令；这样做的好处是您拥有 SSMS 所缺乏的设计师支持。

在 Azure 门户中选择数据库后，单击管理按钮：

![在此处输入图像描述](../Images/afcd74e732b00b6b52ba7f33277040bc.png)

从那里将打开一个新窗口，您必须在其中登录 SQL Server。

登录到 SQL Server 后，您将可以选择创建新表、创建过程等。

![在此处输入图像描述](../Images/1f799b6e91e47ec169a57e7e976b0b2c.png)

一个方便的提示是，如果您进入 SQL Azure 详细信息屏幕，您会注意到一个用于检索连接字符串片段的部分，这些片段可以方便地将您的后端连接到您的应用程序：

![在此处输入图像描述](../Images/18f578ab2bf2a7cb7b4e9befd43af3fe.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:24:43.380

您可以安装[SQL Server Management Studio](http://www.microsoft.com/en-us/download/details.aspx?id=29062)以连接您的 SQL Azure 数据库，然后您可以从那里在设计器中创建表，或者通过输入 SQL 查询。

请记住，您必须将您的 IP 地址列入白名单才能访问数据库。Azure 使用白名单，这意味着只有授权的 IP 地址才能连接到数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:27:21.220

你可以通过 Visual Studio 和/或 SQL Server Management Studio (SSMS) 连接到 Azure 中的数据库。

检查此链接以获取详细信息。

[SQL Azure 管理](http://www.windowsazure.com/en-us/develop/net/common-tasks/sql-azure-management/)

# java - 有效地查找一组数字中的组合

> ID：13403747
> 
> 赞同：2
> 
> 时间：2012-11-15T18:22:54.967
> 
> 标签：java, combinations, memory-efficient

我目前正在开发一个java项目，我需要其中的一部分来给我一个完整的数字组合列表，
`1<= A<=B<=C<=D<=E<=F<=N`其中`N`任何整数`as small as 75`都将被用作输入。只要它`A B C D E F`可以。`any integer``fulfills the equality`

我知道我可以简单地使用每个组合，`brute force`但这需要很长时间。我想做的是以一种仍然满足原始方式`split`的平等化为`two separate`平等，但它会减少几乎一半的运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:30:12.150

假设您想要一个满足指定条件的所有可能组合的列表`A, B, C, D, E, F`，那么您无法获得比蛮力[回溯搜索](http://en.wikipedia.org/wiki/Backtracking)更有效的方法。

对于 的每个可接受的值`A`：找到 的所有可接受的值`B`，然后对于每个可接受的值，找到`C`... 等等。

您将获得等效的运行时间：

*   分而治之
*   动态规划
*   贪婪（这只是减少到回溯）

（但这些算法不适合这个问题，需要人为的实现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:39:29.883

以下将仅生成有效的有效组合。较大的 N 值可能需要一段时间，但那是因为会有大量组合满足您的不等式。

> N = 75; 300500200 组合
> 
> N = 100；1609344100 组合

```
 for(int A = 1; A <= N ; ++A) {
        for(int B = A; B <= N; ++B) {
            for(int C = B; C <= N; ++C) {
                for(int D = C; D <= N; ++D) {
                    for(int E = D; E <= N; ++E) {
                        for(int F = E; F <=N; ++F) {
                            // do whatever you want with the combo
                        }
                    }
                }
            }
        }
    } 
```

# java - java中的引用对象

> ID：13403749
> 
> 赞同：0
> 
> 时间：2012-11-15T18:23:07.643
> 
> 标签：java, subclass, superclass, objectinstantiation

我已经浏览了许多关于 java 中引用对象的链接。我仍然没有明确的想法。

```
superclass obj = new subclass(); 
```

obj 将如何被实例化？它有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:28:38.610

`obj`是一个类型为 的引用变量`superclass`。这意味着这样一个变量可以指向一个类型的对象`superclass`或其任何子类。在您的情况下，您正在实例化一个这样的子类，`subclass`在您的示例中调用。现在你可以调用这个对象上声明的任何方法`superclass`——并且`subclass`保证通过继承或覆盖来拥有这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:24:12.693

不， obj 不会被实例化（它是 type 的引用`superclass`）。`Subclass()`将被实例化并且 obj 指向`subclass`实例。

我建议阅读本[教程](http://docs.oracle.com/javase/tutorial/java/concepts/object.html)以了解更多关于对象和引用的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:24:34.293

引用和对象是两个不同的东西，引用可以引用其中一个对象（或者它可以为空，不引用任何地方）

> 对象如何初始化？

有很多方法，但在这个例子中使用新的关键词

> 它有什么用。

见多态性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:25:43.113

在这里，`SuperClass`将持有the的引用，`SubClass`并且将执行的方法将`overridden`被`SubClass`执行，`SubClass`否则将执行所有的方法`SuperClass`。

# php - 如何在wordpress中的另一个开始之前终止功能的效果

> ID：13403754
> 
> 赞同：0
> 
> 时间：2012-11-15T18:23:38.983
> 
> 标签：php, wordpress, wordpress-theming

我想在每个帖子的末尾显示一些随机帖子。我为此目的找到了这段代码。

```
 <div>
<h2>Random Posts</h2>
<ul>
<?php
$args = array( 'numberposts' => 5, 'orderby' => 'rand', 'post_status' => 'publish', 'offset' => 1);
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : ?>
<li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
</ul>
</div> 
```

但问题是，当我在我的网站上使用此代码时，它还会导致每个帖子底部出现下一个和上一个帖子链接的随机输出，以便更好地导航。

我想知道如何终止随机帖子的效果，以便前后帖子链接以其原始顺序显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:52:50.300

尝试

```
<?php wp_reset_query(); ?> 
```

更多信息在这里：[http ://codex.wordpress.org/Function_Reference/wp_reset_query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

# python - 使用 tornado 的 gen.engine 的内存泄漏

> ID：13403760
> 
> 赞同：7
> 
> 时间：2012-11-15T18:23:58.497
> 
> 标签：python, asynchronous, memory-leaks, tornado

我有一个简化形式的代码，如下所示：

```
from tornado import gen, httpclient, ioloop

io_loop = ioloop.IOLoop.instance()
client = httpclient.AsyncHTTPClient(io_loop=io_loop)

@gen.engine
def go_for_it():
    while True:
        r = yield gen.Task(fetch)

@gen.engine
def fetch(callback):
    response = yield gen.Task(client.fetch, 'http://localhost:8888/')
    callback(response)

io_loop.add_callback(go_for_it)
io_loop.start() 
```

当我运行它时，内存占用量随着时间或多或少地线性增加。但是，如果我删除`gen.engine`嵌套：

```
@gen.engine
def go_for_it():
    while True:
        r = yield gen.Task(client.fetch, 'http://localhost:8888/') 
```

内存使用保持不变。

我已经设法在 Mac OS X 和 Linux 上用不同版本的 tornado 2 重现了这个问题。有什么想法可能是导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:05:19.260

在 objgraph 包的帮助下深入研究，看起来代码泄漏了 ExceptionStackContexts。这些是由 gen.engine 创建来处理函数异常的，它们应该被清除但显然你发现了一个错误。

我最好的猜测是在某处留下了一个参考。

EDIT - The Tornado Team (Ben) has found a fix and it will be in a future release. [https://github.com/facebook/tornado/commit/bff07405549a6eb173a4cfc9bbc3fc7c6da5cdd7](https://github.com/facebook/tornado/commit/bff07405549a6eb173a4cfc9bbc3fc7c6da5cdd7)

# mercurial - 从另一个存储库中的现有目录创建 Mercurial 存储库？

> ID：13403765
> 
> 赞同：1
> 
> 时间：2012-11-15T18:24:28.807
> 
> 标签：mercurial

我想将我的 Mercurial 存储库之一拆分为两个单独的存储库。特别是，我想获取一个位于存储库根级别的目录并将其转换为它自己的存储库。

我对如何执行此操作的最初想法是告诉现有存储库忘记那个特定目录，将目录添加到 .hgignore，然后将目录转换为它自己的存储库。但是，我想在新存储库中保留目录的历史记录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:17:46.327

使用 --filemap 选项[转换扩展名即可。](http://www.selenic.com/mercurial/wiki/ConvertExtension)请参阅[从 Mercurial](http://mercurial.selenic.com/wiki/ConvertExtension#Converting_from_Mercurial)部分转换

> 过滤 Mercurial 存储库以获取现有存储库的子集也很有用。例如，要将存储库 foo 的子目录 subfoo 转换为具有自己生命的存储库（同时保留其完整历史记录），请执行以下操作：

```
$ echo include subfoo > /tmp/myfilemap
$ echo rename subfoo . >> /tmp/myfilemap
$ hg convert --filemap /tmp/myfilemap /path/to/repo/foo /tmp/mysubfoo-repo 
```

# google-chrome-devtools - 有没有办法与 Chrome 开发工具中最后记录的对象进行交互？

> ID：13403766
> 
> 赞同：8
> 
> 时间：2012-11-15T18:24:29.420
> 
> 标签：google-chrome-devtools

如果我使用`console.log`从脚本内部记录对象，我可以在控制台中看到该对象，并且可以通过单击小箭头来检查它。所以我可以**看到**它有什么方法（甚至在它的原型中）。但是我可以在控制台中从那里**运行其中一种方法吗？**

换句话说，`$0`我可以在控制台中输入某种魔法变量（类似于 ），它会得到最后一个记录的对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:49:50.150

您实际上可以使用`$_`来获取先前评估的语句

```
$$   // Returns an array of elements that match the given CSS selector.
$0   // The currently-selected object in the inspector.
$_   // The previously evaluated statement
$1   // The previously-selected object in the inspector.
$n(index)    // Access to an array of last 5 inspected elements. 
```

有关可用于 chrome 的所有部分的所有内容的完整列表，请查看备忘单。[http://anti-code.com/devtools-cheatsheet/](http://anti-code.com/devtools-cheatsheet/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:47:31.587

目前通过 console.log 记录的对象没有这样的神奇变量。如果您需要，请提交功能请求：[http ://webkit.org/new-inspector-bug](http://webkit.org/new-inspector-bug)

# qt - Qt QNetworkRequest 挂起，但我相信我处于事件循环中

> ID：13403770
> 
> 赞同：2
> 
> 时间：2012-11-15T18:24:33.580
> 
> 标签：qt

我正在运行 Qt 4.8.1

我正在尝试使用 QNetworkRequest 发送请求，但收到“QEventLoop：没有 QApplication 就无法使用”错误。我相信我在一个事件循环中运行。

```
void WebLoader::load()
{
    QNetworkRequest request;
    request.setUrl(QUrl("http://www.bbc.co.uk/"));

    QNetworkAccessManager *manager = new QNetworkAccessManager();
    connect(manager, SIGNAL(finished(QNetworkReply*)),
             this, SLOT(checkForUpdateFinished(QNetworkReply*)));

    QNetworkReply *reply = manager->get(request);
    connect(reply, SIGNAL(readyRead()), this, SLOT(checkForUpdateSlot()));
} 
```

manager->get(reply) 调用永远不会返回。

单击菜单项时将调用此函数。在它的堆栈跟踪中有 QWidget::event(QEvent) 。该应用程序肯定是在与复杂 UI 的其余部分一起运行的情况下运行的。

作为我尝试过的变体：

1.  使用新的 QNetworkAccessManager(mainWindow) - mainWindow 继承自 QMainWindow
2.  使用新的 QNetworkAccessManager(application) - 应用程序继承自 QApplication
3.  从 customEvent 调用 load()
4.  从计时器回调调用 load()

[编辑]

我现在在 MainWindow 构造函数中构造 QNetworkAccessManager：

```
MainWindow::MainWindow() : queryAnalyser(NULL)
{
    manager = new QNetworkAccessManager(this);
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(managerFinished(QNetworkReply*))); 
```

managerFinished 没有被调用。

我得到调试 IO：'QObject：无法为位于不同线程中的父级创建子级。(Parent是MainWindow(0x28fcd0)，parent的线程是QThread(0x4862828)，当前线程是QThread(0x7d90b70)'

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    WXApplication *a = WXApplication::getApp();

    MainWindow mainWin;

    mainWin.show();
    mainWin.checkArgs();
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:36:15.423

确保您`QNetworkAccessManager`在感应请求的方法结束时没有被破坏。如果它被销毁，您的请求将丢失，因为被销毁的`QNetworkAccessManager`将无法将`finished()`信号发送到连接的插槽。

这正是`WebLoader::load();`方法中发生的事情。该`manager`变量仅在方法执行期间存在，并且方法将在您收到回复之前结束。

您可以做的是将其`QNetworkAccessManager`放入全局变量中，并在每次需要时使用此全局变量：

文件.hpp：

```
//...

#include <QNetworkAccessManager>
extern QNetworkAccessManager QNAM;

//... 
```

文件.cpp：

```
//...

#include "afile.hpp"
QNetworkAccessManager QNAM = QNetworkAccessManager();

//... 
```

在您的代码中（`WebLoader::load();`例如）：

```
//...
#include "afile.hpp"
//...
QNetworkAccessManager * manager = &QNAM;
//... 
```

在请求中，将原始对象设置为“标记”请求并确保正确的方法将处理正确的回复：

```
void WebLoader::load()
{
    QNetworkRequest request;
    request.setUrl(QUrl("http://www.bbc.co.uk/"));
    request.setOriginatingObject(this);

    QNetworkAccessManager * manager = &QNAM;
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(checkForUpdateFinished(QNetworkReply*)));

    manager->get(request);
}

void WebLoader::checkForUpdateFinished(QNetworkReply* reply)
{
    if (reply == 0 || reply->request().originatingObject() != this)
    {
        return;
    }

    disconnect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(checkForUpdateFinished(QNetworkReply*)));

    // Reply treatment

    reply->deleteLater();

    // ...
} 
```

在您的`MainWindow`构造函数中，忘记`this`是否不需要或使用`QNAM`全局变量。

# xcode - 如何在 Apple 的邮件中获得 url 预览？

> ID：13403771
> 
> 赞同：2
> 
> 时间：2012-11-15T18:24:33.387
> 
> 标签：xcode, macos, cocoa, preview, nsdatadetector

如果您将鼠标移到 Mail.app 中的链接上，您会看到这样的三角形，单击它可以立即预览链接。请给我一个提示如何做到这一点？

![在此处输入图像描述](../Images/a5ea2f6aef91a14797224c6bfca3a5a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:35:35.190

您看到的带有三角形的方形按钮是 NSDataDetector 的一个实例，它发现了一些有用的东西。在文档和示例代码以及 WWDC 会话视频中搜索 NSDataDetector

# joomla - 外部菜单的 Joomla 别名不起作用

> ID：13403774
> 
> 赞同：0
> 
> 时间：2012-11-15T18:24:35.737
> 
> 标签：joomla, menu, alias

我有一个指向外部链接的菜单：

```
Menu name: Support
Type: External Link
Link: http://www.somesite.com/support 
```

该菜单显示在网站的多个区域并且会发生变化，所以我想为其创建一个别名，这样我只需要更改原始菜单：

```
Menu Name: Support menu example
Type: Menu Alias
Menu Alias: support-menu
Menu Lnk: Support 
```

问题是，测试菜单给了我一个 404 错误，如果我将它更改为指向单个文章菜单，效果很好，但是任何指向外部链接的菜单都会给我这个错误。

这是我将鼠标悬停在别名菜单上时获得的链接：

```
http://www.somesite.com/?Itemid=138 
```

我尝试输入带有项目 ID 的实际链接，但它仍然不适用于外部链接，只有文章，我验证了 ID #：

```
http://www.somewebsite.com/index.php?Itemid=115 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:20:00.540

快速浏览菜单组件后，看起来像是`http://www.somesite.com/?Itemid=138`硬编码且难以绕过的链接。

通过使用 Joomla 的 Redirect 组件，您可能会避开这一点。在组件中找到`http://www.somesite.com/?Itemid=138`并将其设置为重定向到`http://www.somesite.com/support`. 如果链接发生变化，您仍然需要在两个地方更新链接（一次在菜单中，一次在重定向中），但这比许多地方要好。

这可能也是一个应该提交回 Joomla 进行改进的错误。

# c# - 在基本母版页中设置标题

> ID：13403781
> 
> 赞同：3
> 
> 时间：2012-11-15T18:25:05.843
> 
> 标签：c#, asp.net, master-pages

我有一个`Base Master Page`我设置标题的地方。

问题是一些选择页面需要标题来自不同的来源。

所以我需要从 ASP.NET 文字中获取一个值并将其传递给`Base Master Page`以设置标题。

这可能吗？

这就是我的代码在后面的 CS 代码中的样子，但它现在仍然从内容页面获得标题

```
 else if (PageID == 200|| PageID == 201 || PageID == 202 || PageID == 203)
                    {

                    ContentPlaceHolder cph =this.Master.FindControl("ContentPlaceHolder") as ContentPlaceHolder;
                    Label lit = cph.FindControl("ArtileTilte") as Label;
                    BrowserTitle = lit.Text;

                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:28:45.473

创建一个虚拟属性来检索基本母版页中的标题（这个包含默认行为）并在派生的母版页类中覆盖它（这是您定义不同行为的地方 - 例如，从文字中获取标题） . 下面的链接包含执行此操作的示例：

[http://msdn.microsoft.com/en-us/library/c8y19k6h(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c8y19k6h(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:00:23.190

让我们假设持有标题的控件是一个标签，然后为了访问母版页上的标签，请执行以下操作：

```
((Label)Master.FindControl("label")).Text = "My Title"; 
```

# ruby-on-rails - 返回：来自 Ruby on Rails 控制器的完整页面、JSON 和部分 HTML 片段

> ID：13403782
> 
> 赞同：0
> 
> 时间：2012-11-15T18:25:05.733
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, model-view-controller, rest

我知道这个问题已经在 SO 上被问**过**几次，但我很好奇以不同的方式做这件事。在我的 Ruby on Rails 应用程序中，我的**UsersController.rb**控制器上有一个名为**list的操作。**我希望这个列表能够回应 3 种不同的事情

 **1.  页面本身。渲染我指定的用户的整个页面
2.  我指定的页面的 JSON 用户列表
3.  我指定格式为 HTML 的页面行的部分视图。

想象一个完整的页面（页眉、页脚、所有内容），其中包含一个包含第 1 页用户的表格。当我单击第 2 页时，我想启动一个 ajax 请求，返回到相同的控制器操作，只为我提供第 2 页的 html 行。我还想保留我的 JSON API，仍然允许我的控制器在被询问时返回 JSON 列表。我想它看起来像这样。

```
class UsersController < ApplicationController
    def list
        respond_to do |format|
            format.html # RETURNS MY VIEW
            format.json # RETURNS MY JSON LIST
            format.partial_html # RETURNS MY PARTIAL HTML
        end
    end
end 
```

无论如何在RoR中实现这一点？还是我注定不得不在我的控制器中创建另一个动作，只是为了返回技术上相同的数据？

我可以通过指定我自己的 MIME 类型来实现这一点吗？我应该将部分蛇作为 XML 返回类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:49:25.650

1.  `format.js`在第三行使用。
2.  将部分 html 放在部分上，调用它`app/views/users/_html_rows.html.erb`。
3.  在完整的 html 和 js 版本上呈现该部分。

您将拥有`app/views/users/list.html.erb`完整的 html 内容，如下所示：

```
<html>
<body>
.....
<table id="my_table"><%= render 'users/html_rows', users: @users %></table>
</body>
</html> 
```

您将拥有`app/views/users/_html_rows.html.erb`：

```
<tbody>
  <% users.each do |user| %>
    <tr>
      <td>user.name</td>
    </tr>
</tbody> 
```

然后你将拥有`app/views/users/list.js.erb`：

```
$("#my_table tbody").html("<%= render 'users/html_rows', users: @users %>"); 
```

这可能会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T09:28:40.583

您可以添加一个额外的 mime 类型条目以使用`respond_to`. 在`config/initializers/mime_types.rb`中，添加：

```
# htmlp means "html partial"
Mime::Type.register "text/html", :htmlp 
```

在您的控制器中，您现在可以执行以下操作：

```
def list
  respond_to do |format|
    format.html
    format.json
    format.htmlp { render layout: nil }
  end
end 
```

并创建一个模板`list.htmlp.erb`，其中包含您的部分内容。**

# android - 在文本视图中显示微调器内容

> ID：13403786
> 
> 赞同：1
> 
> 时间：2012-11-15T18:25:44.873
> 
> 标签：android, textview, spinner

我想在文本视图中显示微调器内容。我可以在文本视图中显示微调器内容，但只显示第一个元素，如果 ai 更改项目，文本视图不会更改

```
 Spinner sp = (Spinner) findViewById(R.id.cbTipoInspeccion);
    ArrayAdapter adapter = ArrayAdapter.createFromResource(
        this, R.array.tipoPrioridad, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    sp.setAdapter(adapter);  

    tvMostrar=(TextView)this.findViewById(R.id.tvSpinnerContent);

  String Text = sp.getSelectedItem().toString();

    tvMostrar.setText(Text.toString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:53:28.797

您需要在微调器上设置 OnItemSelectedListener：

```
sp.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

  onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    //update your TextView
    tvMostrar.setText(sp.getSelectedItem().toString());
  }

  onNothingSelected(AdapterView<?> parent) {
    //
  }

}) 
```

查看[Spinners](http://developer.android.com/reference/android/widget/Spinner.html)和[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)的文档。

# git - 如果我删除了我的 git repo 上的一个分支并且有人尝试向它推送一个提交，会发生什么？

> ID：13403788
> 
> 赞同：3
> 
> 时间：2012-11-15T18:25:57.713
> 
> 标签：git, branch

只是一个简单的问题，可能看起来很愚蠢，但我不是 git 专家！

假设我在本地删除了一个分支并推送我的删除。该分支将不再位于我的 git 存储库中。但是如果另一个用户尝试将提交推送到这个分支会发生什么。

会发生错误还是会再次创建分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:33:01.753

我不确定，所以我测试了一下。它可能取决于权限，但是将在目标存储库中创建一个新分支，其中 HEAD 在其他用户的最新提交中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:01:06.450

请注意，您的分支仍在您的 git 存储库中，问题“ [Git: Recover deleted (remote) branch](https://stackoverflow.com/questions/1992364/git-recover-deleted-remote-branch) ”解释了如何找回它。

这也证实了[Explosion Pills](https://stackoverflow.com/users/454533/explosion-pills)的[回答](https://stackoverflow.com/a/13403885/6309)：推送具有相同名称的分支将使用新历史在上游远程 repo 端重新创建它。
由于上游 repo 不包含该分支（在您推送 ref`:aBranch`以删除它之后），因此远程 repo 将创建一个具有相同名称的新分支。

# python - Python IMAP 搜索部分主题

> ID：13403790
> 
> 赞同：12
> 
> 时间：2012-11-15T18:26:05.097
> 
> 标签：python, imap

我正在尝试获取主题以“新订单”开头的所有电子邮件，但我似乎无法弄清楚。目前我可以搜索与这样的设置完全匹配的...

```
result, data = M.uid('search', None, '(HEADER Subject "Subject Here")') 
```

但是，这不会检索任何不完全匹配的消息。我将如何进行部分匹配？

如果重要的话，我正在与 gmail 的 imap 服务器交谈。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T19:06:33.333

根据[IMAP RFC](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4) `SEARCH`应该将其所有匹配作为子字符串匹配：

> 在所有使用字符串的搜索关键字中，如果字符串是字段的子字符串，则消息与关键字匹配。匹配不区分大小写。

因此，一个搜索

```
M.uid('search', None, 'HEADER Subject "New Order"') 
```

应该匹配`New Order`主题中任何地方出现的所有消息。如果不是，您应该通知 Google 他们的服务器没有正确实现 IMAP。同时，您可以尝试使用`SUBJECT`密钥，如

```
M.uid('search', None, 'SUBJECT "New Order"') 
```

此外，根据[Google 的 IMAP 扩展文档](https://developers.google.com/google-apps/gmail/imap_extensions#extension_of_the_search_command_x-gm-raw)，您可能可以使用`X-GM-RAW`密钥和 gmail 搜索字符串，如

```
M.uid('search', None, r'X-GM-RAW "subject:\"New Order\""') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T18:22:25.863

这对我有用：

```
mail.uid('search', None, r'(X-GM-RAW "subject:\"New Order\"")') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T17:03:16.143

这对我有用：

```
result, data = m.search(None, 'X-GM-RAW', 'subject: New Order') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-07T15:22:03.957

这对我有用：

```
M.uid('search',None, '(SUBJECT "New Order")') 
```

搜索格式为`(EmailAttribute "your searchstring")`

希望对你有效。

# vba - 如何在列中搜索日期早于特定日期的任何单元格并突出显示它们？

> ID：13403794
> 
> 赞同：1
> 
> 时间：2012-11-15T18:26:15.760
> 
> 标签：vba, excel, excel-2010

我只是想在特定列中搜索早于用户指定日期的任何日期。

```
Dim rCell As Range
Dim TheAnswer$
TheAnswer = InputBox("In M/D/YYYY format, enter the first day of the month for which this report is being run." & _
                     vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YYYY")

For Each rCell In ActiveSheet.Range("D:D").Cells
    If rCell.Value < TheAnswer Then
        rCell.Interior.Color = RGB(255, 102, 0)
    End If
Next rCell 
```

我的问题是这并不总是选择正确的。如果我使用两位数的月份或日期，它会完全忽略那些只有一位数的月份和日期。我已经用 03/14/01 日期格式格式化了单元格，所以它们显示得很好，但值不匹配。我可以简单地更改显示内容以匹配该值吗？如果是这样，我该怎么做？

提前致谢。

***更新：在凯文的帮助下，我能够解决这个问题。如果有人觉得它有用，这是我的最终代码：***

```
Range(Cells(2, 4), Cells(Rows.Count, 4).End(xlUp)).Select

Dim rCell As Range
Dim TheAnswer$
Dim ConvertedDate#

TheAnswer = InputBox("In M/D/YY format, enter the first day of the month for which this report is being run." & _
                     vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YY")
ConvertedDate = CDate(TheAnswer)

For Each rCell In Selection
    If rCell.Value <> "" Then
        If rCell.Value < ConvertedDate Then
            rCell.Interior.Color = RGB(255, 102, 0)
        End If
    End If
Next rCell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:54:03.903

您已定义`TheAnswer`为字符串，而 the`rCell.Value`将是日期，因此结果将不一致。试试这个：

```
Dim rCell As Range
Dim TheAnswer$
Dim ConvertedDate#
TheAnswer = InputBox("In M/D/YYYY format, enter the first day of the month for which this report is being run." & _
                 vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YYYY")
ConvertedDate = CDate(TheAnswer)
For Each rCell In ActiveSheet.Range("D:D").cells
If rCell.Value < ConvertedDate Then
    rCell.Interior.Color = RGB(255, 102, 0)
End If
Next rCell 
```

Also, consider not using the entire column (D:D) and instead use a set range or a dynamic range.

# html - 如何在支持打印的同时模拟背景图像

> ID：13403797
> 
> 赞同：1
> 
> 时间：2012-11-15T18:26:20.707
> 
> 标签：html, css

我正在使用背景图像将图像裁剪为 200 像素的宽度。我事先不知道图像宽度。我想要图像的中间。

```
 .cropped-image {
    width: 200px;
    height: 270px;

    /* centered, cropped image */
    background-position: center;
    background-repeat: no-repeat;
} 
```

我的 HTML 模板如下所示：

```
 <div class="cropped-image" style="background-image: url({{ product.image_thumb_url }})">
    </div> 
```

这是它的一个例子：http: [//jsfiddle.net/hRSdY/](http://jsfiddle.net/hRSdY/)

这很好用，但默认情况下 Web 浏览器不打印背景图像。我可以`list-style-image`用来模拟背景图像，但我不能裁剪到 iamge 的中心：http: [//jsfiddle.net/KP7ng/1/](http://jsfiddle.net/KP7ng/1/)。

有没有办法使用 CSS 水平裁剪图像，在打印过程中保持图像可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:57:18.150

如果图像是任意尺寸，你不能用 CSS 做到这一点。

加载后，您需要使用 javascript 重新定位它们。

* * *

一个**jQuery**实现将是

```
$(window).load(function(){
    $('.cropped-image img').each(function(){
        var self = $(this);
        self.css({
            marginLeft: (-this.width/2),
            marginTop: (-this.height/2),
            visibility: 'visible' /*set to visible once loaded and repositioned*/
        })
    });
}); 
```

具有 HTML 结构

```
<div class="cropped-image">
   <img src="{{ product.image_thumb_url }}"/>
</div> 
```

和 CSS

```
.cropped-image {
    width: 200px;
    height: 270px;
    position:relative;
    overflow:hidden;
}
.cropped-image img{
    left:50%;
    top:50%;
    position:absolute;
    visibility:hidden; /*set to hidden until the page is loaded to avoid moving images*/
} 
```

演示在[http://jsfiddle.net/gaby/3Yg7V/](http://jsfiddle.net/gaby/3Yg7V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:22:37.050

像这样的东西？：

[http://jsfiddle.net/WPF75/](http://jsfiddle.net/WPF75/)

html:

```
<div class="crop">
<img src="http://2.bp.blogspot.com/_Mzmuwpq3Fpw/SFQ4dKzbD3I/AAAAAAAAANE/ulNUQpbDKI4/s320/fusion-icon.png" />
</div> 
```

​CSS：

```
div.crop {
    height: 80px;
    border: 1px solid red;  
    overflow: hidden;    
}

div.crop img {
    margin-top: -20%;   
}
​ 
```

# numpy - 使用 python3.2 Mac OSX Lion 安装 numpy

> ID：13403798
> 
> 赞同：1
> 
> 时间：2012-11-15T18:26:33.583
> 
> 标签：numpy, python-3.x, osx-lion

试图在 OSX Lion 上构建 numpy。我按照[这篇文章](https://stackoverflow.com/questions/10557857/install-numpy-for-python-3-2-3-on-os-x-10-7-4?rq=1)的说明使用了 LDSHARED 的 10.7 替换 10.6。但是，当我运行 setup.py 时，它似乎仍在使用 10.6？

我该如何解决？

```
eric@system-process-2 /Users/Eric/Desktop/numpy-1.7.0b2$ export CC=clang
eric@system-process-2 /Users/Eric/Desktop/numpy-1.7.0b2$ export CXX=clang
eric@system-process-2 /Users/Eric/Desktop/numpy-1.7.0b2$ export FFLAGS=-ff2c
eric@system-process-2 /Users/Eric/Desktop/numpy-1.7.0b2$ export LDSHARED='clang -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.7.sdk -g'
eric@system-process-2 /Users/Eric/Desktop/numpy-1.7.0b2$ python3.2 setup.py build
Converting to Python3 via 2to3...
Running from numpy source directory.
non-existing path in 'numpy/distutils': 'site.cfg'
F2PY Version 2
blas_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']

non-existing path in 'numpy/lib': 'benchmarks'
lapack_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3']

running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src
building py_modules sources
building library "npymath" sources
customize Gnu95FCompiler
Found executable /usr/local/bin/gfortran
Could not locate executable clang -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.7.sdk -g
customize Gnu95FCompiler
customize Gnu95FCompiler using config
C compiler: clang -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m -c'
clang: _configtest.c
clang _configtest.o -o _configtest
success!
removing: _configtest.c _configtest.o _configtest
C compiler: clang -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m -c'
clang: _configtest.c
_configtest.c:1:5: warning: incompatible redeclaration of library function 'exp'
int exp (void);
    ^
_configtest.c:1:5: note: 'exp' is a builtin with type 'double (double)'
1 warning generated.
_configtest.c:1:5: warning: incompatible redeclaration of library function 'exp'
int exp (void);
    ^
_configtest.c:1:5: note: 'exp' is a builtin with type 'double (double)'
1 warning generated.
clang _configtest.o -o _configtest
success!
removing: _configtest.c _configtest.o _configtest
building library "npysort" sources
building extension "numpy.core._dummy" sources
Generating build/src.macosx-10.6-intel-3.2/numpy/core/include/numpy/config.h
C compiler: clang -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/include -I/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m -c'
clang: _configtest.c
In file included from _configtest.c:1:
/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/Python.h:25:10: fatal error: 'stdio.h' file not found
#include <stdio.h>
         ^
1 error generated.
In file included from _configtest.c:1:
/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/Python.h:25:10: fatal error: 'stdio.h' file not found
#include <stdio.h>
         ^
1 error generated.
failure.
removing: _configtest.c _configtest.o
Traceback (most recent call last):
  File "setup.py", line 214, in <module>
    setup_package()
  File "setup.py", line 207, in setup_package
    configuration=configuration )
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/core.py", line 186, in setup
    return old_setup(**new_attr)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/core.py", line 148, in setup
    dist.run_commands()
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/dist.py", line 917, in run_commands
    self.run_command(cmd)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/dist.py", line 936, in run_command
    cmd_obj.run()
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/command/build.py", line 37, in run
    old_build.run(self)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/command/build.py", line 126, in run
    self.run_command(cmd_name)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/distutils/dist.py", line 936, in run_command
    cmd_obj.run()
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/command/build_src.py", line 152, in run
    self.build_sources()
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/command/build_src.py", line 169, in build_sources
    self.build_extension_sources(ext)
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/command/build_src.py", line 328, in build_extension_sources
    sources = self.generate_sources(sources, ext)
  File "/Users/eric/Desktop/numpy-1.7.0b2/build/py3k/numpy/distutils/command/build_src.py", line 385, in generate_sources
    source = func(extension, build_dir)
  File "numpy/core/setup.py", line 410, in generate_config_h
    moredefs, ignored = cocache.check_types(config_cmd, ext, build_dir)
  File "numpy/core/setup.py", line 41, in check_types
    out = check_types(*a, **kw)
  File "numpy/core/setup.py", line 271, in check_types
    "Cannot compile 'Python.h'. Perhaps you need to "\
SystemError: Cannot compile 'Python.h'. Perhaps you need to install python-dev|python-devel. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T07:58:19.230

遇到了类似的问题，以下命令对我有用：

```
export CFLAGS="-isysroot/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk" tox 
```

# php - 正则表达式 - 查找、重写和替换文本中的标签

> ID：13403801
> 
> 赞同：0
> 
> 时间：2012-11-15T18:26:36.043
> 
> 标签：php, regex

我需要在文本字符串中捕获自定义“标签”，重写并替换它。看起来像：

```
<mytag=http://url.com/file.php?some=variable&another=variable> 
```

首先我需要从标签中捕获 url，然后用我的函数重写它，然后用新的 url 替换整个标签。任何人都可以帮助我如何捕捉和替换它吗？在文本中可以有更多带有各种 url 的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:38:18.777

你可以试试这个：

```
 $my_tag = "<mytag=http://url.com/file.php?some=variable&another=variable>";
    preg_match( "/<mytag=(.*)>/", $my_tag, $matches );
    $new_tag = str_replace( $matches[1], "http://newurl.com", $my_tag); 
```

该`$new_tag`变量最终将具有以下内容：

```
<mytag=http://newurl.com> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:40:53.900

那是微不足道的。你有足够的上下文和锚点。基本上使用[`preg_replace`](http://php.net/preg_replace)or [`preg_repace_callback`](http://php.net/preg_repace_callback)（对于更复杂的替换方案）的工作方式如下：

```
$src = preg_replace('~  <mytag=  (http://[^>]+)  >  ~smix', '<a href=$1>$1</a>', $src); 
```

这里的空白是装饰性的。关键是`[^>]`不匹配太多，并将`(`URL`)`捕获为`$1`.

*   另请参阅[开源 RegexBuddy 替代品](https://stackoverflow.com/questions/89718/is-there)和[在线正则表达式测试](https://stackoverflow.com/questions/32282/regex-testing)以获取一些有用的工具，或[RegExp.info](http://regular-expressions.info/)获取更好的教程。

# c# - 90 秒后出现 WebException

> ID：13403802
> 
> 赞同：1
> 
> 时间：2012-11-15T18:26:48.933
> 
> 标签：c#, soap, windows-mobile

我有一个 Windows Mobile 应用程序，用户在其中收集数据然后将其上传到服务器。当事务花费不到 90 秒时，应用程序运行良好，但当它花费超过 90 秒时，我得到一个`WebException`.

问题是，我无法弄清楚是谁在抛出异常。我可以在服务器端逐步完成，它工作得很好。由于我发送的数据量较少而没有任何问题，我认为这是一个超时问题，但我已经增加了它，甚至将它设置为永不超时，它仍然在 90 秒后出现异常。

仅包含“WebException”的异常消息没有帮助，并且`InnerException`为空。`WebException`包含一个状态描述为“ `System.Net.HttpWebResponse`Bad Gateway”。

如果您有任何问题或任何想法，请在这里写下。我已经没有要检查的东西的想法了。

代码：

```
private string SendDocument(XmlDocument document)
{
    byte[] fileStreamArray = ConvertXmlToByteArray(document);
    var service = new ImportExportService_TextBinding();
    service.Url = ApplicationManager.Application.Configuration.ImportServiceUrl;
    service.Timeout = int.MaxValue;
    var result = service.ImportRecoveriesCore(fileStreamArray);

    return result;
} 
```

堆栈跟踪：

```
at System.Web.Services.Protocols.SoapHttpClientProtocol.doInvoke(String methodName, Object[] parameters, 

WebClientAsyncResult asyncResult)\r\n   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)\r\n   at 
```

# c++ - glVertexAttribPointer 提高 GL_INVALID_OPERATION

> ID：13403807
> 
> 赞同：34
> 
> 时间：2012-11-15T18:27:18.163
> 
> 标签：c++, opengl, opengl-3

我正在尝试组合一个非常基本的 OpenGL 3.2（核心配置文件）应用程序。在下面的代码中，应该创建一个包含三角形顶点位置的 VBO，调用`glVertexAttribPointer`失败并引发 OpenGL 错误`GL_INVALID_OPERATION`。这是什么意思，我该如何解决？

```
GLuint vbo, attribLocation = glGetAttribLocation(...);
glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
GLfloat vertices[] = { 0, 1, 0, 1, 0, 0, -1, 0, 0 };
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
glEnableVertexAttribArray(attribLocation);
// At this point, glGetError() returns GL_NO_ERROR.
glVertexAttribPointer(attribLocation, 3, GL_FLOAT, GL_FALSE, 0, 0);
// At this point, glGetError() returns GL_INVALID_OPERATION. 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-15T20:00:41.577

首先，让我们先做一些准备工作：

```
glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE); 
```

别这样了。您已经要求提供核心 OpenGL 上下文。您不需要前向兼容性，它对您没有任何作用。当 3.0 已弃用某些东西但没有删除它们时，这是一个旧标志。你不需要它。

不过，这不会导致您的问题。这是：

```
glEnableVertexAttribArray(program.getAttrib("in_Position"));
// A call to getGLError() at this point prints nothing.
glVertexAttribPointer(program.getAttrib("in_Position"), 3, GL_FLOAT, GL_FALSE, 0, 0);
// A call to getGLError() at this point prints "OpenGL error 1282". 
```

首先，这里有一个明显的驱动程序错误，因为*也*`glEnableVertexAttribArray`应该发出错误。或者你检查的时候弄错了。*`GL_INVALID_OPERATION`*

 *为什么两个函数都会出错？因为您没有使用[Vertex Array Object](http://www.opengl.org/wiki/Vertex_Array_Object#Vertex_Array_Object)。[`glEnableVertexAttribArray`](http://www.opengl.org/wiki/GLAPI/glEnableVertexAttribArray#Errors)在当前 VAO 中设置状态。没有当前的 VAO，所以......错误。也一样[`glVertexAttribPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer#Errors)。它甚至在这些页面上的错误列表中。

在兼容性上下文中不需要 VAO，但在核心上下文中需要。你要求的。所以......你需要一个：

```
GLuint vao;
glGenVertexArrays(1, &vao);
glBindVertexArray(vao); 
```

把它放在你的设置中的某个地方，你的程序就会工作。*

# java - Java：在不执行复制操作的情况下偏移字节 []

> ID：13403809
> 
> 赞同：3
> 
> 时间：2012-11-15T18:27:19.923
> 
> 标签：java, arrays, performance, memory-management, bytearray

我想知道是否有可能使用`byte[]`偏移量访问 a 而不必复制数据？
我看过`Arrays.*`,`ByteArrayInputStream`和`System.arraycopy`，但它们都需要分配一个新`byte[]`的复制到。

我想要的是相当于这个`C++`：

```
char* buffer = new char[256];
char* buf_offset = buffer + 128; // <- no copy 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:35:13.497

你可以`ByteBuffer`绕过来代替。它可以在不复制的情况下进行高级、复制、切片。

ByteBuffer 真的很丑陋且违反直觉。然而，它在新的 JDK API 中被广泛使用，所以人们可能会接受它是一种基本类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:28:51.340

不，没有类似的东西。您只需要自己跟踪偏移量。您始终可以创建一个类来封装 (data, offset) 对。

# mysql - 我们可以将主键作为列或列集的函数吗

> ID：13403814
> 
> 赞同：0
> 
> 时间：2012-11-15T18:27:31.360
> 
> 标签：mysql, percona

我正在尝试定义一个表，我想在其中定义主键具有反向列。我想知道它是否可能在 innodb 中？

我正在创建一个表

```
create table abc 
(
  `id` varchar(255) PRIMARY KEY , 
  `key` LONGTEXT NOT NULL,
  `value` LONGTEXT  NOT NULL ,
  `last_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `created_on` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'
) 
```

但相反，我想要`PRIMARY KEY (reverse(id))`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:34:47.987

MySQL 根本不支持函数索引。所以它显然不能让它们作为主键。

MySQL 也不支持物化视图或视图索引。^([1](https://stackoverflow.com/questions/244226/is-it-possible-to-have-an-indexed-view-in-mysql))

根据您要完成的工作，很可能您应该以相反的方式存储您的密钥。如果您的应用程序依赖于存储的内容相反，请为应用程序创建一个视图以与之交互。不幸的是，更新将很困难，因为[MySQL 根本不执行 INSTEAD OF 触发器](http://bugs.mysql.com/bug.php?id=16525)或[视图触发器](http://dev.mysql.com/doc/refman/5.6/en/create-trigger.html)。

# php - 使用 PHP 打印支票和自定义表格

> ID：13403815
> 
> 赞同：9
> 
> 时间：2012-11-15T18:27:32.660
> 
> 标签：php, forms, pdf, printing

我一直在开发一个几乎完全用 php 编写的基于 Web 的财务管理器应用程序。我希望能够允许用户输入支票并将支票打印到他们的支票库存中。

我的第一个想法是我可以使用 FPDF 之类的东西来创建一个大小正确的 .pdf 文档，并将数据（日期、金额、英文文本金额、供应商名称）放在正确的位置。这很好用。

我遇到的问题是，当我打印 4.5" x 2.75" 文档（大小很重要）时，Adobe Reader（浏览器插件和 Windows 版本）会将文档放在用户可用的打印机页面上。打印机没有预设所有可能的个人支票尺寸的页面大小，并且并非所有打印机都允许用户将页面大小添加到打印机驱动程序（是的，您可以通过打印服务器将表单添加到窗口；但它们可能会或可能会不在打印驱动程序中显示可用的表格）。

我已经在网上阅读了很多关于如何创建自定义表单/文档的内容，但我的问题没有得到解决。所以我想我正在寻找关于如何在我的网络应用程序中实现支票打印的建议，这将是非常受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:10:49.390

您可以尝试在连接支票打印机的情况下运行 Cups 服务器。Cups 服务器通过 IPP 协议与其客户端通信。

您可以使用[http://www.cups.org/articles.php?L545+TNews+Q从 php 直接创建 IPP 打印作业](http://www.cups.org/articles.php?L545+TNews+Q)

打印作业具有属性 - 介质尺寸是其中之一。

所以，这样用户的操作系统就不会打印任何东西。用户只需 POST 一些查询到 http 服务器，php 将为带有 media-size 和其他一些属性的 cups 服务器创建打印作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:59:05.860

我的一位客户使用[tcpdf](http://www.tcpdf.org/)打印所有支票。他们所有的支票都是标准的美国信纸大小。

正如 Dagon 所说，您无法从 PHP 应用程序控制用户打印机 - 那么您如何强制他们使用特定的尺寸检查呢？我的客户使用的全字母尺寸支票非常完美——所有年初至今/扣除额/税收的东西都印在顶部，然后是实际的支票印在底部。它们都在打印后通过折叠机进行邮寄。（直接存款的员工可以通过这种方式打印支票存根）

# actionscript-3 - 在 ActionScript 中缩放后位图图像的像素值？

> ID：13403822
> 
> 赞同：0
> 
> 时间：2012-11-15T18:28:12.937
> 
> 标签：actionscript-3, image-processing, flex4, pixel

我正在尝试分析缩放在 ActionScript 内部是如何工作的。

我创建了一个小场景：

1.  创建了一个 2 X 2 jpg 图像并在 flex 中导入。图像现在有 4 个像素
2.  创建一个位图并使用 getPixel(x, y) 并打印出值。

    ```
    Values of bitmap 2 X 2
    ╔══════════╦══════════╗
    ║ 16777215 ║ 16777215 ║
    ╠══════════╬══════════╣
    ║ 16777215 ║ 16777215 ║
    ╚══════════╩══════════╝ 
    ```

3.  现在我将位图缩放到 scaleX = 2 并打印出像素值。

    ```
    for (var x:int =0; x < original.width; x = x+1)
    {
        for (var y:int = 0; y < original.height; y = y+1)
        {
            tempUnit = original.bitmapData.getPixel(x,y);
            outputString1 = outputString1 + tempUnit.toString() + '\t';
        }
        outputString1 = outputString1  + '\r\n';
    } 
    ```

    缩放后位图的值

    ```
    Values of bitmap
    ╔══════════╦══════════╗
    ║ 16777215 ║ 16777215 ║
    ║ 16777215 ║ 16777215 ║
    ╠══════════╬══════════╣
    ║        0 ║        0 ║
    ║        0 ║        0 ║
    ╚══════════╩══════════╝ 
    ```

位置 (2,0), (2,1), (3,0), (3,1) 的像素取什么值？它不取现有像素的平均值吗？

我只用了这 4 个像素来分析。我得出的结论是，在相对于显示对象进行缩放后，他的 X 和 Y 轴单位正在改变。

我是 ActionScript 和图像处理的新手。请指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:10:12.317

缩放位图时，BitmapDatas 不会缩放。将 Bitmap 视为 BitmapData 的可扩展包装器。因此，对于 BitmapData，您不应该尝试让像素超出其范围。

# linux - 分段错误后的空核心转储文件

> ID：13403824
> 
> 赞同：21
> 
> 时间：2012-11-15T18:28:14.903
> 
> 标签：linux, debugging, segmentation-fault, coredump, sungridengine

我正在运行一个程序，它被分段错误中断。问题是创建了核心转储文件，但大小为零。

您是否听说过这样的案例以及如何解决？

我有足够的磁盘空间。我已经`ulimit -c unlimited`对核心文件的大小进行了限制——无论是运行它还是放在提交的批处理文件的顶部——但仍然有 0 字节的核心转储文件。包含这些文件的文件夹的权限为 uog+rw，而创建的核心文件的权限仅为 u+rw。

该程序由 C++ 编写并使用 Grid Engine 的 qsub 命令在 linux 集群上提交，我不知道这些信息与这个问题是否相关。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-10T11:09:08.670

设置`ulimit -c unlimited`开启了转储的生成。默认情况下，核心转储是在 nfs 上的当前目录中生成的。设置`/proc/sys/kernel/core_pattern`为`/tmp/core`帮助我解决了空转储的问题。

[Ranjith Ruban](https://stackoverflow.com/questions/13403824/empty-core-dump-file-after-segmentation-fault#comment18496435_13411054)的评论帮助我开发了这个解决方法。

> 您用于转储核心的文件系统是什么？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T05:32:33.237

听起来您正在使用批处理调度程序来启动可执行文件。也许 Torque/PBS 用来生成你的工作的 shell 继承了不同的 ulimit 值？也许调度程序的默认配置不是保留核心转储？

你可以直接从命令行运行你的程序吗？

或者，如果您在调用可执行文件之前将`ulimit -c unlimited`和/或添加`ulimit -s unlimited`到 PBS 批处理脚本的顶部，则可能能够覆盖 PBS 的默认 ulimit 行为。或者添加“ulimit -c”可以报告限制是多少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T06:45:22.590

如果您在已安装的驱动器中运行核心文件。核心文件不能写入已安装的驱动器，但必须写入本地驱动器。

您可以将文件复制到本地驱动器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T13:16:28.950

`qsub`您可以使用诸如`-l h_vmem=6G`保留 6 GB 物理内存的选项来设置资源限制，例如所需的物理内存。

对于文件块，您也可以设置`h_fsize`为适当的值。

请参阅 qconf 手册页的资源限制部分：

[http://gridscheduler.sourceforge.net/htmlman/htmlman5/queue_conf.html](http://gridscheduler.sourceforge.net/htmlman/htmlman5/queue_conf.html)

```
s_cpu     The per-process CPU time limit in seconds.

s_core    The per-process maximum core file size in bytes.

s_data    The per-process maximum memory limit in bytes.

s_vmem    The same as s_data (if both are set the minimum is
           used).
h_cpu     The per-job CPU time limit in seconds.

h_data    The per-job maximum memory limit in bytes.

h_vmem    The same as h_data (if both are set the minimum is
           used).

h_fsize   The total number of disk blocks that this job  can
           create. 
```

此外，如果集群对每个节点使用本地 TMPDIR，并且已满，您可以将 TMPDIR 设置为具有更多容量的备用位置，例如 NFS 共享：

```
export TEMPDIR=<some NFS mounted directory> 
```

然后使用将当前环境导出到作业`qsub`的选项启动。`-V`

以上一项或多项组合可能会帮助您解决问题。

# iframe - 带有 hashbang url 的 fancybox iframe 库

> ID：13403826
> 
> 赞同：2
> 
> 时间：2012-11-15T18:28:19.393
> 
> 标签：iframe, fancybox, gallery

对于我使用 hashbang 方法的新网站，您可以在此处进行概述：http: [//mikevalstar.com/Blog/104/Simple_Hashbang_URLs_and_Google](http://mikevalstar.com/Blog/104/Simple_Hashbang_URLs_and_Google)

这意味着我有诸如 mywebsite.com/#!/realisations、mywebsite.com/#!/contact 之类的链接......这工作正常，并且允许我只加载具有漂亮过渡的部分页面......

我还使用 fancybox 打开 iframe（视频播放器）并尝试使用 iframe 库在我的所有视频之间切换。如果我不使用 hashbang url，这项工作很好：从 mywebsite.com/realisations 打开 iframes 库以打开 /videos/myvideo1.html、video2.html 等等......但是添加了 /#!/（mywebsite .com/#!/realisations) 在 url 中，jquery.fancybox.js 不填充 url 组 (F.group) 并且只打开第一个 iframe，没有 prev/next 箭头。

有什么想法可以解决这个问题吗？

# php - Wordpress 查询帖子

> ID：13403840
> 
> 赞同：1
> 
> 时间：2012-11-15T18:29:29.923
> 
> 标签：php, wordpress

我对 Wordpress 自定义页面有疑问。我想展示具体类别的新闻。

```
<?php
/**
 * Template Name: Tutorials
 *
 * A custom page template without sidebar.
 *
 * The "Template Name:" bit above allows this to be selectable
 * from a dropdown menu on the edit page screen.
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */

get_header("custom"); ?>

        <div id="container">
            <div id="content" role="main">
            <?php query_posts("cat=4,5,6"); ?>
            <?php
            /* Run the loop to output the posts.
             * If you want to overload this in a child theme then include a file
             * called loop-index.php and that will be used instead.
             */
             get_template_part( 'loop', 'index' );
            ?>
            </div><!-- #content -->
             <?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); } ?>  
        </div><!-- #container -->

<?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

问题是自定义页面没有添加正确的文件（？）。它（例如）不添加正确的“更多”链接（它与首页不同），不使用 CodeColorer（用于突出显示代码的插件）等等。有什么问题？如何解决？我想让新闻看起来像在头版。

循环.php

```
<?php
/**
 * The loop that displays posts.
 *
 * The loop displays the posts and the post content.  See
 * http://codex.wordpress.org/The_Loop to understand it and
 * http://codex.wordpress.org/Template_Tags to understand
 * the tags used in it.
 *
 * This can be overridden in child themes with loop.php or
 * loop-template.php, where 'template' is the loop context
 * requested by a template. For example, loop-index.php would
 * be used if it exists and we ask for the loop with:
 * <code>get_template_part( 'loop', 'index' );</code>
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */
?>

<?php /* Display navigation to next/previous pages when applicable */ ?>
<?php if ( $wp_query->max_num_pages > 1 ) : ?>
    <div id="nav-above" class="navigation">
        <div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'twentyten' ) ); ?></div>
        <div class="nav-next"><?php previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?></div>
    </div><!-- #nav-above -->
<?php endif; ?>

<?php /* If there are no posts to display, such as an empty archive page */ ?>
<?php if ( ! have_posts() ) : ?>
    <div id="post-0" class="post error404 not-found">
        <h1 class="entry-title"><?php _e( 'Not Found', 'twentyten' ); ?></h1>
        <div class="entry-content">
            <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyten' ); ?></p>
            <?php get_search_form(); ?>
        </div><!-- .entry-content -->
    </div><!-- #post-0 -->
<?php endif; ?>

<?php
    /* Start the Loop.
     *
     * In Twenty Ten we use the same loop in multiple contexts.
     * It is broken into three main parts: when we're displaying
     * posts that are in the gallery category, when we're displaying
     * posts in the asides category, and finally all other posts.
     *
     * Additionally, we sometimes check for whether we are on an
     * archive page, a search page, etc., allowing for small differences
     * in the loop on each template without actually duplicating
     * the rest of the loop that is shared.
     *
     * Without further ado, the loop:
     */ ?>
<?php while ( have_posts() ) : the_post(); ?>

<?php /* How to display posts of the Gallery format. The gallery category is the old way. */ ?>

    <?php if ( ( function_exists( 'get_post_format' ) && 'gallery' == get_post_format( $post->ID ) ) || in_category( _x( 'gallery', 'gallery category slug', 'twentyten' ) ) ) : ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
            <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a><span class="data"><?php twentyten_posted_on(); ?></span></h2>

            <!--<div class="entry-meta">
                <?php twentyten_posted_on(); ?>
            </div>--><!-- .entry-meta -->

            <div class="entry-content">
<?php if ( post_password_required() ) : ?>
                <?php the_content(); ?>
<?php else : ?>
                <?php
                    $images = get_children( array( 'post_parent' => $post->ID, 'post_type' => 'attachment', 'post_mime_type' => 'image', 'orderby' => 'menu_order', 'order' => 'ASC', 'numberposts' => 999 ) );
                    if ( $images ) :
                        $total_images = count( $images );
                        $image = array_shift( $images );
                        $image_img_tag = wp_get_attachment_image( $image->ID, 'thumbnail' );
                ?>
                        <div class="gallery-thumb">
                            <a class="size-thumbnail" href="<?php the_permalink(); ?>"><?php echo $image_img_tag; ?></a>
                        </div><!-- .gallery-thumb -->
                        <p><em><?php printf( _n( 'This gallery contains <a %1$s>%2$s photo</a>.', 'This gallery contains <a %1$s>%2$s photos</a>.', $total_images, 'twentyten' ),
                                'href="' . get_permalink() . '" title="' . sprintf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ) . '" rel="bookmark"',
                                number_format_i18n( $total_images )
                            ); ?></em></p>
                <?php endif; ?>
                        <?php the_excerpt(); ?>
<?php endif; ?>
            </div><!-- .entry-content -->

            <div class="entry-utility">
            <?php if ( function_exists( 'get_post_format' ) && 'gallery' == get_post_format( $post->ID ) ) : ?>
                <a href="<?php echo get_post_format_link( 'gallery' ); ?>" title="<?php esc_attr_e( 'View Galleries', 'twentyten' ); ?>"><?php _e( 'More Galleries', 'twentyten' ); ?></a>
                <span class="meta-sep">|</span>
            <?php elseif ( in_category( _x( 'gallery', 'gallery category slug', 'twentyten' ) ) ) : ?>
                <a href="<?php echo get_term_link( _x( 'gallery', 'gallery category slug', 'twentyten' ), 'category' ); ?>" title="<?php esc_attr_e( 'View posts in the Gallery category', 'twentyten' ); ?>"><?php _e( 'More Galleries', 'twentyten' ); ?></a>
                <span class="meta-sep">|</span>
            <?php endif; ?>
                <span class="comments-link"><?php comments_popup_link( __( 'Leave a comment', 'twentyten' ), __( '1 Comment', 'twentyten' ), __( '% Comments', 'twentyten' ) ); ?></span>
                <?php edit_post_link( __( 'Edit', 'twentyten' ), '<span class="meta-sep">|</span> <span class="edit-link">', '</span>' ); ?>
            </div><!-- .entry-utility -->
        </div><!-- #post-## -->

<?php /* How to display posts of the Aside format. The asides category is the old way. */ ?>

    <?php elseif ( ( function_exists( 'get_post_format' ) && 'aside' == get_post_format( $post->ID ) ) || in_category( _x( 'asides', 'asides category slug', 'twentyten' ) )  ) : ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

        <?php if ( is_archive() || is_search() ) : // Display excerpts for archives and search. ?>
            <div class="entry-summary">
                <?php the_excerpt(); ?>
            </div><!-- .entry-summary -->
        <?php else : ?>
            <div class="entry-content">
                <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?>
            </div><!-- .entry-content -->
        <?php endif; ?>

            <div class="entry-utility">
                <?php twentyten_posted_on(); ?>
                <span class="meta-sep">|</span>
                <span class="comments-link"><?php comments_popup_link( __( 'Komentarze', 'twentyten' ), __( '1 Komentarz', 'twentyten' ), __( '% Komentarze', 'twentyten' ) ); ?></span>
                <?php edit_post_link( __( 'Edit', 'twentyten' ), '<span class="meta-sep">|</span> <span class="edit-link">', '</span>' ); ?>
            </div><!-- .entry-utility -->
        </div><!-- #post-## -->

<?php /* How to display all other posts. */ ?>

    <?php else : ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

            <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a><span class="data"><?php the_time( __( 'j')); ?><span class="miesiac"> <?php the_time( __( 'M')); ?></span></span></h2>
                    <?php 
                        printf( __( '<span class="meta-sep">by</span> %1$s', 'pongsari' ),
                            sprintf( '<span class="autor"><a class="url fn n" href="%1$s" title="%2$s">%3$s</a></span>',
                                get_author_posts_url( get_the_author_meta( 'ID' ) ),
                                sprintf( esc_attr__( 'View all posts by %s', 'pongsari' ), get_the_author() ),
                                get_the_author()
                            )
                        );
                    ?>
        <!--    <div class="entry-meta">
                <?php twentyten_posted_on(); ?>
            </div>-->
            <!-- .entry-meta -->

    <?php if ( is_archive() || is_search() ) : // Only display excerpts for archives and search. ?>
            <div class="entry-summary">
                <?php the_excerpt(); ?>
            </div><!-- .entry-summary -->
    <?php else : ?>
            <div class="entry-content">
                <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-link">' . __( 'Pages:', 'twentyten' ), 'after' => '</div>' ) ); ?>
            </div><!-- .entry-content -->
    <?php endif; ?>

            <div class="entry-utility">
                <?php if ( count( get_the_category() ) ) : ?>
                    <span class="cat-links">
                        <?php printf( __( '<span class="%1$s">Kategoria</span> %2$s', 'twentyten' ), 'entry-utility-prep entry-utility-prep-cat-links', get_the_category_list( ', ' ) ); ?>
                    </span>
                    <span class="meta-sep">|</span>
                <?php endif; ?>
                <?php
                    $tags_list = get_the_tag_list( '', ', ' );
                    if ( $tags_list ):
                ?>
                    <span class="tag-links">
                        <?php printf( __( '<span class="%1$s">Tagged</span> %2$s', 'twentyten' ), 'entry-utility-prep entry-utility-prep-tag-links', $tags_list ); ?>
                    </span>
                    <span class="meta-sep">|</span>
                <?php endif; ?>
                <span class="comments-link"><?php comments_popup_link( __( 'Komentarze', 'twentyten' ), __( '1 Komentarz', 'twentyten' ), __( '% Komentarze', 'twentyten' ) ); ?></span>
                <?php edit_post_link( __( 'Edit', 'twentyten' ), '<span class="meta-sep">|</span> <span class="edit-link">', '</span>' ); ?>
            </div><!-- .entry-utility -->
        </div><!-- #post-## -->

        <?php comments_template( '', true ); ?>

    <?php endif; // This was the if statement that broke the loop into three parts based on categories. ?>

<?php endwhile; // End the loop. Whew. ?>

<?php /* Display navigation to next/previous pages when applicable */ ?>
<?php if (  $wp_query->max_num_pages > 1 ) : ?>
                <div id="nav-below" class="navigation">
                    <div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'twentyten' ) ); ?></div>
                    <div class="nav-next"><?php previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?></div>
                </div><!-- #nav-below -->
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:40:26.160

好的，当我测试它时它工作正常，但我知道你没有得到你期望的结果。因此，让我们逐步考虑这一点。第一个问题：你说这是“loop.php”。我希望不是，因为`get_template_part('loop', 'index')`不调用`loop.php`，但是`loop-index.php`。所以你应该展示`loop-index.php`. 下一步：您会看到“更多”链接与主页上的不同。它如何出现在主页上，如何出现在这个页面上？

# android - Android DatePicker 在 android 2.3.3 上失败

> ID：13403842
> 
> 赞同：2
> 
> 时间：2012-11-15T18:29:29.387
> 
> 标签：android, android-widget

由于我是 Android 开发的新手，我正在尝试在 Android 2.3.3 模拟器上显示 DatePicker 对话框，但它正在崩溃。我被跟踪了我在我的代码中缺少什么？但是这段代码在 Android 4.0 中运行。DatePickerFragment 类

```
public class DatePickerFragment extends DialogFragment implements OnDateSetListener{

 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        // Do something with the date chosen by the user
    } 
```

}

启动 DatePicker 对话框的活动类：

```
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.DialogFragment;

import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;

@SuppressLint({ "NewApi", "NewApi", "NewApi" })
public class FormAnalysis extends FragmentActivity{

@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fanalysis);
    //getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.fanalysis, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    //switch (item.getItemId()) {
      //  case android.R.id.home:
        //    NavUtils.navigateUpFromSameTask(this);
            return true;
    //}
    //return super.onOptionsItemSelected(item);
}

public void generate(View view){

}
  public void startDialog(View view){
  DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getSupportFragmentManager(), "datePicker");} } 
```

**更新** 这里是堆栈跟踪

```
[2012-11-16 00:31:55 - 食品安全] ActivityManager：开始：Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=kz.bimash.food.security /.启动器 }
[2012-11-16 00:31:55 - 食品安全] ActivityManager：警告：活动未启动，其当前任务已被置于最前面

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T18:46:42.017

您的 DialogFragment 导入适用于该类的不正确版本。它需要是 android.support.v4.app.DialogFragment 而不是 android.app.DialogFragment，否则在 2.3 上将无法正常工作。

# php - 来自 API 调用的 CakePHP 更新记录

> ID：13403844
> 
> 赞同：1
> 
> 时间：2012-11-15T18:29:53.053
> 
> 标签：php, api, cakephp, sql-update

我正在尝试为将更新特定建筑物记录的应用程序添加 API 调用。这是它的简单版本，但它似乎没有做任何事情（包括错误）。我错过了什么？任何想法表示赞赏！

调用 API 方法的 url： `http://example.com/api/request/UpdateBuilding/<token>/156/The%20Atticus%Building/120%20Finch%20Street%20Monroeville/50830`

方法源代码：

```
private function UpdateBuilding() {     
    $buildingId=@$this->params['pass'][2];
    $name=@$this -> params['pass'][3];
    $address=@$this -> params['pass'][4];
    $zip=@$this -> params['pass'][5];

    $this->data=array(
        "id"=>$buildingId,
        "name"=>$name,
        "address"=>$address,
        "zip_code"=>$zip
    );

    $this->Building->save($this->data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:19:09.020

感谢此线程中的评论：`http://stackoverflow.com/questions/2314632/save-returning-false-but-with-no-error-in-cakephp`，我曾经`debug($this->ModelName->invalidFields());` 确定缺少两个字段。很高兴知道！

# solr - Solrcloud 如何处理主机故障？

> ID：13403852
> 
> 赞同：3
> 
> 时间：2012-11-15T18:30:33.257
> 
> 标签：solr, apache-zookeeper, solrcloud

我正在学习如何使用 Solrcloud 的新功能，并且我可以成功地设置一组 Zookeeper 和一组用于分片索引的 Solr 实例。我想调查故障如何影响我的设置。大多数情况下，除了一种情况外，它按预期工作。

我使用了两台机器，并在每台机器上启动了 3 个 Zookeeper（总共 6 个）。我启动了一台机器（bosmac01）的 Solr 实例，请求 2 个分片，然后启动了该机器的第二个实例。然后我在第二台机器 (qasolrmaster) 上启动了另外两个 Solr 实例。Solr 管理员显示了我期望的配置，并且索引/查询工作：

Shard1：qasolrmaster:8900 和 bosmac01:8983 Shard2：qasolrmaster:8910 和 bosmac01:8920

我想测试如果一台机器崩溃会发生什么，所以我关闭了 qasolrmaster。我预计，由于仍然有 3 个 Zookeeper 仍在运行，并且由于仍然有一个 Solr 实例连接到每个分片，所以一切仍然可以正常工作。相反，剩下的两个 Solr 实例（在 bosmac01 上）不断尝试重新连接到丢失的 Zookeeper。管理员不会显示云图像，我无法添加文档或查询。如果我只是停止 qasolrmaster 上的所有 Zookeeper，但让机器继续运行，也会发生同样的事情。重新启动其中一名失踪的 Zookeeper 使事情恢复正常。

为什么测试失败了？3 个 Zookeeper 加上每个分片的 Solr 应该可以让事情继续工作，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:10:58.383

Zk 要求其大多数节点保持正常运行。如果你把 3 个放在一台机器上，3 个放在另一台机器上，然后杀死 3 个，你就没有多数。

# c++ - GLUT：错误的鼠标坐标？

> ID：13403853
> 
> 赞同：5
> 
> 时间：2012-11-15T18:30:39.747
> 
> 标签：c++, windows, opengl, mouse, glut

使用 SCREEN_WIDTH = 1200 和 SCREEN_HEIGHT = 800。

首先，我在 (x = 0, y = 0, w = 40, h = 40) 处在屏幕上绘制一个框；

然后我使用 handleMouse 函数返回鼠标点击位置的 x 和 y 坐标。

问题是，当程序以非最大化窗口模式启动时，当我单击（看起来是）框的最右下角时，返回的坐标是 x = 40，y = 32。当我认为它应该返回 x = 40, y = 40。

我不知道问题是它绘制不正确，还是函数返回了错误的 x/y。

我相信我了解 openGL 渲染、转换和 glOrth 的工作原理，但我可能完全错了。我在网上看到一些建议说Windows Decor（使用Windows 7）会导致这个问题，但是很少解释并且没有提供解决方案。

这是我的全部源代码。我已经剥离了从游戏到基础的所有内容，但问题仍然存在:(。我添加了两张图片，以便人们可以看到我的问题。在非最大化窗口（上图）中，单击右下角时, 返回的坐标是 41,32; y 坐标小于应有的值。并且在 MAXIMIZED WINDOW（下图）中，当单击同一个角时，返回正确的坐标 40, 40。这两种结果都会出现我的原始源代码和 genpfault 的建议代码。

//原来我不能发布图片:(，链接。

[非最大化窗口](http://i1277.photobucket.com/albums/y488/Spooterasdf/herp.png)！

[最大化窗口](http://i1277.photobucket.com/albums/y488/Spooterasdf/herp2.png)！

```
main.cpp
int main( int argc, char* args[] )
{
    //Initialize FreeGLUT
    glutInit( &argc, args );

    //Create OpenGL 2.1 context
    glutInitContextVersion( 2, 1 );

    //Create Double Buffered Window
    glutInitDisplayMode( GLUT_DOUBLE );
    glutInitWindowSize( SCREEN_WIDTH, SCREEN_HEIGHT );
    glutCreateWindow( "OpenGL" );

    //Do post window/context creation initialization
    if( !initGL() )
    {
        printf( "Unable to initialize graphics library!\n" );
        return 1;
    }
    //initGame();

    glutMouseFunc(handleMouse);

    glutDisplayFunc( render );

    glutMainLoop();

    return 0;
} 
```

函数.h

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

bool initGL();

void render();

void handleMouse(int button, int state, int x, int y);

#endif 
```

函数.cpp

```
bool initGL()
{

    //Initialize clear color
    glClearColor( 0.f, 0.f, 0.f, 1.f );

    //Check for error
    GLenum error = glGetError();
    if( error != GL_NO_ERROR )
    {
        //cout <<"Error initializing OpenGL! " << gluErrorString( error ) << endl;
        return false;
    }

    return true;
}

void render()
{

    //Clear color buffer
    glClear( GL_COLOR_BUFFER_BIT );
    glColor3f(1.f,1.f,1.f);

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluOrtho2D(0, SCREEN_WIDTH, SCREEN_HEIGHT, 0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glBegin(GL_QUADS);
        glVertex2f(0,0);
        glVertex2f(0, 41);
        glVertex2f(41, 41);
        glVertex2f(41, 0);
    glEnd();

    glutSwapBuffers();
}

void handleMouse(int button, int state, int x, int y)
{

    std::cout << x << '\t' << y << std::endl;

} 
```

常量.h

```
const int SCREEN_WIDTH = 1200;
const int SCREEN_HEIGHT = 800; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:58:06.847

尝试将四边形从显示器边缘移开，因为当我尝试做类似的事情时，屏幕边缘非常奇怪

```
glBegin(GL_QUADS);
 glVertex2f(20,20);
 glVertex2f(20, 61);
 glVertex2f(61, 61);
 glVertex2f(61, 20);
glEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:34:18.190

这对我在 Aero 和 Classic 上的 Windows 7 上运行良好：

```
#include <GL/glut.h>
#include <iostream>

void render()
{
    glClearColor( 0, 0, 0, 1 );
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho(0, w, h, 0, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glColor3ub( 255, 255, 255 );
    glBegin(GL_QUADS);
        glVertex2f(0,0);
        glVertex2f(41, 0);
        glVertex2f(41, 41);
        glVertex2f(0, 41);
    glEnd();

    glutSwapBuffers();
}

void handleMouse(int button, int state, int x, int y)
{
    std::cout << x << '\t' << y << std::endl;
}

int main( int argc, char* args[] )
{
    glutInit( &argc, args );

    glutInitDisplayMode( GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "OpenGL" );

    glutMouseFunc(handleMouse);
    glutDisplayFunc( render );
    glutMainLoop();
    return 0;
} 
```

最值得注意的是，我将运行时`glutGet()`窗口大小查询添加到`render()`.

# c++ - C++ std::string length() 或 size() 不适用于方法 args

> ID：13403862
> 
> 赞同：0
> 
> 时间：2012-11-15T18:31:26.250
> 
> 标签：c++, macos, stdstring

我有一个从文件路径创建 MatLab 数组名称并将其作为 std::string 返回的方法。结果字符串被传递到另一个将名称写入文件的方法中。当我尝试获取传入字符串的长度时，当字符串的长度为 12 或 13 个字符时，它显示 0。

我的代码：

```
bool MyClass::masterMethod(std::string fileURI){

 FILE* dataStream;
 // Assume dataStream is set up correctly

 // Get arrayName from File URI
 std::string arrayName = this->makeArrayNameFromPath( fileURI);

 //Write array name to file
 this->writeArrayName(arrayName , dataStream)

}

std::string MyClass::makeArrayNameFromPath(std::string filePathURI){

std::string tempString = filePathURI.substr(filePathURI.find_last_of('/')+1); 

std::string returnString = "";

long index = 0;

for(long i = 0; i < tempString.length(); i++){

    if((tempString[i] != ' ') && (tempString[i] != '.')){

        returnString[index++] = tempString[i];
    }
}

return returnString;

}

void MyClass::writeArrayName(std::string name , FILE *nameStream){

 // long testLength = name.length();
 // long testLength2 = name.size();
 // const char* testChar = nam.c_str();
 // long testCharLen = strlen(testChar);    

// The size of the name is the number of Chars * sizeof(int8_t)
int32_t sizeOfName = (int32_t)(name.length() * sizeof(int8_t));
int32_t nameType = miINT8;

fwrite(&nameType , sizeof(int32_t) , 1 , nameStream);
fwrite(&sizeOfName, sizeof(sizeOfName), 1, nameStream);
fwrite(&name , sizeof(name[0]), sizeOfName , nameStream);   

} 
```

所以我不确定为什么 string::length 不起作用。如果创建一个 std::string test = name 并打印它，我可以获得字符串的值但无法获得它的长度或大小。如果我使用 const char* testName = name.c_str(); long test = strlen(testName)，我得到了正确的值，但认为这没有必要。

因此，任何建议或建议都会受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:34:25.930

`returnString[index++] = tempString[i];`不做你认为它做的事。它不会向字符串添加额外的空间或长度，只是在字符串实际上不拥有的位置覆盖内存。我认为`returnString.append(1, tempString[i])`或类似的应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:35:31.453

你永远不会给字符串一个大小，只是试图分配不存在的位置。

试试这个，而不是添加字符到返回值

```
returnString += tempString[i]; 
```

# c - 如何获取文件的设备/分区名称？

> ID：13403866
> 
> 赞同：2
> 
> 时间：2012-11-15T18:31:52.427
> 
> 标签：c, linux, filesystems

我有这样的分区结构：

```
$ df
Filesystem     1K-blocks     Used Available Use% Mounted on
/dev/sda6       51606140 16939248  34142692  34% /
/dev/sda5         495844    72969    397275  16% /boot
/dev/sda7      113022648 57515608  49765728  50% /home
/dev/sda8     113022648 57515608  49765728  4% /mnt 
```

在使用 readdir() 解析目录内容时 - 如何找出哪个文件驻留在哪个设备上？

从根目录调用 readdir() 并解析文件名并打印其大小。就像来自设备：/dev/sda6 并列出该分区下的文件名。当它从 /home 读取内容时 - 它应该显示从 /dev/sda7 读取的内容并列出文件名

如果您需要更多详细信息/信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:01:21.773

你可以做

```
df <file_name> 
```

这将为您提供特定文件的设备和分区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:44:06.457

struct stat 中有一个 st_dev 成员，它应该唯一标识一个分区。

bash 中的示例：

```
stat ~/.vimrc
  File: `/home2//leonard/.vimrc' -> `local-priv/vimrc'
  Size: 16              Blocks: 0          IO Block: 4096   symbolic link
Device: 802h/2050d      Inode: 6818899     Links: 1
Access: (0777/lrwxrwxrwx)  Uid: ( 1024/ leonard)   Gid: ( 1024/ leonard)
Access: 2012-06-22 16:36:45.341371003 +0300
Modify: 2012-06-22 16:36:45.341371003 +0300
Change: 2012-06-22 16:36:45.341371003 +0300 
```

stat 实用程序没有额外的魔法。这是 strace -vvv 输出：

```
lstat64("/home2//leonard/.vimrc", {st_dev=makedev(8, 2), st_ino=6818899, st_mode=S_IFLNK|0777, st_nlink=1, st_uid=1024, st_gid=1024, st_blksize=4096, st_blocks=0, st_size=16, st_atime=2012/06/22-16:36:45, st_mtime=2012/06/22-16:36:45, st_ctime=2012/06/22-16:36:45}) = 0 
```

0x0802 是主要的 8(sd) 分区 2，所以 /dev/sda2

为了将其映射到实际分区，您可以迭代 /proc/mounts 并统计所有设备（第一列）。/proc/mounts 的内容就像 mount(1) 的输出一样，只是它直接来自内核。一些发行版将 /etc/mtab 符号链接到 /proc/mounts。

或者你可以解析/proc/partitions：

```
$ cat /proc/partitions
major minor  #blocks  name

   8        0  976762584 sda
   8        1    3998720 sda1
   8        2  972762112 sda2 
```

当然 /dev/sda 可能实际上并不存在，该设备可能使用了一个长的 udev 名称，例如 /dev/disk/by-uuid/c4181217-a753-4cf3-b61d-190ee3981a3f。主要/次要编号应该是分区的可靠唯一标识符。

# wordpress - 检查当前前端是否显示 WordPress 小部件

> ID：13403867
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:05.687
> 
> 标签：wordpress

是否有检查小部件是否**显示**在当前前端的功能？
这对于拉取某些样式或脚本或对小部件执行其他操作是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:01:00.710

请通过回显内容 $GLOBALS['displayed_sidebars'] 和 $GLOBALS['displayed_widgets'] 来查看这是否有效，例如使用 print_r。

必须在对要包含的所有侧边栏执行 dynamic_sidebar 后对其进行测试。

```
add_filter( 'dynamic_sidebar_params', function( $params ) {
    global $displayed_sidebars, $displayed_widgets;
    if( !in_array( $params[0]['id'], $displayed_sidebars ))
        $displayed_sidebars[] = $params[0]['id'];

    if( !in_array( $params[0]['widget_name'], $displayed_widgets ))
        $displayed_widgets[] = $params[0]['widget_name'];

    return $params;
}); 
```

# ruby-on-rails - 关于如何为 rails 使用 auto_html 过滤器的好教程？

> ID：13403869
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:32:14.140
> 
> 标签：ruby-on-rails, rubygems

我知道这应该很容易，但我只是不知道如何修改现有的 auto_html 过滤器来获得我需要的输出。我发现这个 [为 auto_html 创建过滤器，](https://stackoverflow.com/questions/10909172/creating-filters-for-auto-html) 但我需要修改现有的过滤器。

例如，我在数据库中有一个这种格式的 youtube 链接列表（[http://youtu.be/UfQC1h-EANI](http://youtu.be/UfQC1h-EANI)）并在我的视图中打印出来：

```
%li
  = link_to link.title, link.url, :class => "youtube title_link" 
```

单击链接时，我需要将[http://youtu.be/UfQC1h-EANI](http://youtu.be/UfQC1h-EANI)转换为[http://www.youtube.com/embed/UfQC1h-EANI?rel=0](http://www.youtube.com/embed/UfQC1h-EANI?rel=0)

我已经设法使用 auto_html 进行转换，但是，它附带了所有附加的 html。我在想如果我可以修改过滤器，我可以调整它只给我没有所有 html 的 url。我一辈子都想不出如何修改 auto_html 的 youtube 过滤器。这甚至是最好的方法吗？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:50:04.340

只需使用正则表达式即可

```
link_to link.title, "http://youtube.com/embed/#{link.url.to_s.match(/\/\/youtu.be\/(\S+)$/)[1]}/?rel=0", :class => "youtube title_link" 
```

如果你`onclick`只想要它，你可以用 JavaScript 来做。

# jquery - Jquery抱怨语法错误-来自asp net mvc控制器的Json

> ID：13403871
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:17.013
> 
> 标签：jquery, asp.net-mvc, model-view-controller

从这个电话

```
@using (Ajax.BeginForm("Manage", "Account", new AjaxOptions { HttpMethod = "POST", Confirm = "Você tem certeza que deseja salvar a alteração?", OnSuccess = "close" })) 
```

调用 OnSuccess 函数并执行以下操作：

```
 function close(json) {
    $('"#' + json.param1 + '"').dialog("close");
    alert(json.Message);
} 
```

我得到这个错误：

```
Error: Syntax error, unrecognized expression: "#UserSettings" 
```

[打破这个错误]

throw new Error("语法错误，无法识别的表达式：" + msg);

`$('#UserSettings').dialog("close");`工作正常，所以我不明白为什么会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:35:50.560

jQuery 选择器中不需要额外的双引号。它应该是：

```
$('#' + json.param1).dialog('close'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:36:01.650

尝试

```
$('#' + json.param1).dialog("close"); 
```

我认为双引号是您遇到问题的地方。

# database - 是否存在与语言无关的 sqlite 模式之类的东西？

> ID：13403872
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:20.087
> 
> 标签：database, sqlite, language-agnostic, schema

# 背景

我一直在使用一些基于相同 sqlite 数据库结构但以不同语言运行的移动应用程序。你猜对了，涉及到 ObjC(iOS) 和 Java(Android)。为了数据共享和互操作性的利益，我想对这个模式进行标准化（有大小写差异、表命名差异、结构差异等）。作为奖励，我希望能够将某种模式表示检查到源代码控制中并控制模式的不同版本。

# 问题

虽然我了解创建的 sqlite 数据库实例包含架构信息，但我不相信空白 sqlite 数据库的分发是*共享*该架构的最佳方式。例如，Android 提倡使用[帮助](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)程序以编程方式创建和/或升级 sqlite 数据库。

但是，如果我有代码构建/升级数据库，那么它似乎会强制维护每种语言的编程模式。

# 问题

是否有其他选项或方法（除了预先构建的、包含元数据的空白 sqlite 数据库）可以在多种语言之间共享和标准化模式？那些可能是什么？这些选项可以存储在源代码管理中吗？多个平台之间可以自动化吗？

非常感谢任何见解。我们可以与一次性版本一起跛行，但必须有更好的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:52:50.600

当我提出问题时，通常会出现这种情况，然后我会在网上搜索进一步的线索。似乎有一种方法可以执行多行sqlite“脚本”：[SQLite - Run multi-line SQL script from file?](https://stackoverflow.com/questions/2380553/sqlite-run-multi-line-sql-script-from-file)

只需要验证我是否可以拥有静态“创建”脚本和“更新”脚本，分发脚本，并让各种平台使用它进行初始化......

我将用我的发现更新这个答案。

# 更新

所以是的......通过一些管理，我可以运行批处理脚本`sqlite3_exec`或`execSql`为文件的每一行运行。因此，我将源代码控制中的脚本作为有效的 sqlite 语句。应该是一个可行的解决方案......而且现在我考虑得更多了。

# css - 将绝对定位转换为相对定位

> ID：13403873
> 
> 赞同：1
> 
> 时间：2012-11-15T18:32:32.300
> 
> 标签：css, positioning

我很愚蠢，并使用绝对定位在 jsFiddle 中构建了一个 Web 小部件，因为它只是一个快速原型，用于向某人展示该功能如何工作。

好吧，我们决定现在就使用它，而我正忙着转换元素以利用相对定位。另外，我正在尝试将其转换为 jQuery UI 小部件，因此我希望所有内容都设置好，以便它可以毫无问题地转储到页面上。

小部件可以在**[这里](http://jonathonmoore.com/proto/)**看到。基本上它是一个搜索框，允许使用最左边的按钮进行一些过滤。

组件如下：

*   **#refine**：最左边的按钮。
*   **#refineDropdown**：单击优化按钮时出现的下拉菜单
*   **#search** : 输入框
*   **#dropdown** : 直播型搜索过滤框
*   **#submit**：最右边的搜索按钮

**问题：**创建widget时，定位是相对还是绝对？如果我在一个页面上有多个这样的实例，下拉菜单的位置应该独立于它们在页面上的位置，但我不完全理解定位和 HTML 排列以使其工作。

CSS：

```
.inline { float:left; }
.clearBoth { clear:both; }
#refine {    
    position: relative;
    margin-right: -3px;    
    overflow:hidden;
    white-space:nowrap;
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(204,204,204,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(204,204,204,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
    border-top-left-radius:4px;
    border-bottom-left-radius:4px;
    border:1px solid #AAA;
    height:12px;
    padding:6px 25px 6px 6px;
    text-align:center;
    font-size:11px;
    font-family:Helvetica, sans-serif;
    color:#666;
    text-shadow:0px 1px 0px #e8eae5;
}
#refine:hover {
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(221,221,221,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(221,221,221,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
    cursor:pointer;
}
#submit {
    float: left;
    margin-right:-1px;
    overflow:hidden;
    white-space:nowrap;
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(204,204,204,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(204,204,204,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
    border-top-right-radius:4px;
    border-bottom-right-radius:4px;
    border:1px solid #AAA;
    height:12px;
    padding:6px 6px 6px 6px;
    text-align:center;
    font-size:11px;
    font-family:Helvetica, sans-serif;
    color:#666;
    text-shadow:0px 1px 0px #e8eae5;
}
#submit:hover {
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(221,221,221,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(221,221,221,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
    cursor:pointer;
}
.refineClicked {
    background:white !important;
    border-bottom-left-radius:0px !important;
    border-bottom:none !important;
}
.arrow-down {
    position: absolute;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid #666;
    right: 7px;
    top: 10px;
}
#search {
    float: left;
    height: 24px;
    margin-right:-5px;
    padding: 0px 7px 0px 7px;
    border:1px solid #AAA;
    color:#444;    
}
#search:focus { outline:none }
#refineDropdown {
    position:relative;
    top:40px;
    left:30px;
    width:150px;
    max-height:200px;
    background:#fff;
    border-left:1px solid #AAA;
    border-right:1px solid #AAA;
    border-bottom:1px solid #AAA;
    word-wrap:normal;
    overflow:auto;
}

#dropdown {
    top: 76px;
    padding:3px;
    width:200px;
    max-height:200px;
    background:#fff;
    border-left:1px solid #CCC;
    border-right:1px solid #CCC;
    border-bottom:1px solid #CCC;
    word-wrap:normal;
    overflow:auto;
    left: 59px;
    position: absolute;
}
ul {
    list-type:none;
    margin:0;
    padding:0;    
}
li {
    padding:5px 10px 5px 10px;
}
li:hover {
    margin:-1px;
    background:#E5F3FF;
    border:1px solid #3366FF;
    cursor:pointer;  
}
.selected {
    margin:-1px;
    background: #E5F3FF;
    border:1px solid #3366FF;
}
.hidden { display:none } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:45:53.250

我相信您希望使用相对定位来完成此操作的原因是您认为绝对定位始终相对于页面是绝对的。惊喜：不是。

实际上，绝对是第一个设置了 position 属性的父级。因此，简单的解决方案可能是将整个小部件包装到一个 div 中，并将该 div 的位置声明为相对位置。

例如：

```
<p>adsadds
   <div class='container'>
       <div class='absolutelyPositioned'>BlaBla</div>
   </div>
sddasda</p> 
```

有了这个CSS：

```
.container
{
    position: relative;
}

.absolutelyPositioned
{
    position: absolute;
    top: 100px;
    left: 100px;
} 
```

将有带有“BlaBla”的内部 div，它的位置不是网页的 (100, 100)，而是容器 div。换句话说，如果我变成`<p>adsadds`“ `<p>adsadds <br />`BlaBla”，也会被推倒。

# iphone - 有什么方法可以在 iOS 上擦除设备数据 - 照片 - 邮件 - 网络历史记录？

> ID：13403874
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:33.580
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在尝试制作一个可以重置或擦除 iOS 设备上数据的应用程序。用于将放置在公共场所 - 学校的 iPad。一段时间后，它应该删除所有数据。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:26:03.470

无法使用 Apple 接受的 API。

# python - 如何在单独的行上打印列表的每个元素，前面是 python 中的行号？

> ID：13403875
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:38.323
> 
> 标签：python, list, element, line-numbers

如何在单独的行上打印列表的每个单独元素，并在元素之前打印元素的行号？列表信息也将从文本文件中检索。

到目前为止，我有，

```
import sys
with open(sys.argv[1], 'rt') as num:
    t = num.readlines()
    print("\n"[:-1].join(t)) 
```

目前给出的读数：

```
Blah, blah, blah
etc, etc, etc
x, x, x 
```

但我想要这个读数：

```
1\. Blah, blah, blah
2\. etc, etc, etc
3\. x, x, x 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:36:17.563

您可以使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)和使用[`str.rstrip()`](http://docs.python.org/2/library/stdtypes.html#str.rstrip)从字符串中删除所有类型的尾随空格。`rstrip('\n')`如果您确定换行符将是`\n`唯一的，您也可以使用。：

```
for i,x in enumerate(t,1):
    print ("{0}. {1}".format(i,x.rstrip())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:36:02.617

这似乎最简单`enumerate`，随时打印每一行：

```
import sys
with open(sys.argv[1], 'r') as num:
    for i,line in enumerate(num,1):
        print("%d. %s"%(i,line[:-1]))  #equivalent to `"{0}. {1}".format(i,line[:-1])` 
```

当然，如果你想使用，你可以将整个东西包装在一个生成器中`join`：

```
def number_lines(fname):
    with open(fname,'r') as f:
       for i,line in enumerate(f,1):
           yield "%d. %s"%(i,line[:-1])

print('\n'.join(number_lines(sys.argv[1]))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:51:48.043

Using [`fileinput.input`](http://docs.python.org/2/library/fileinput.html#module-fileinput) it is possible to iterate over file line by line. When `fileinput.input` returns next line, we [`enumerate`](http://docs.python.org/2/library/functions.html#enumerate) it to track line number. As input already contains newline we use [`end=""`](http://docs.python.org/2/library/functions.html#print) in `print` method so it doesn't append unnecessary newline. Using [`format`](http://docs.python.org/2/library/functions.html?highlight=format#format) to convert line number and content to formated representation.

```
import fileinput

for number, line in enumerate(fileinput.input(['some_file.txt']), 1):
    print('{0}. {1}'.format(number, line), end="") 
```

# android - 强制接近警报使用网络提供商

> ID：13403877
> 
> 赞同：4
> 
> 时间：2012-11-15T18:32:39.850
> 
> 标签：android, locationmanager

有没有办法强制接近警报仅使用网络提供商？我担心电池耗尽。强制接近警报触发时间超过 4 分钟也是一个很好的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T09:32:00.963

一个绝妙的问题，遗憾的是，尽管我认为这是不可能的，但也只是查看了文档，请注意“在 API 版本 17 之前，此方法可以用于`ACCESS_FINE_LOCATION or ACCESS_COARSE_LOCATION`. 从`API version 17`及以后，此方法需要`ACCESS_FINE_LOCATION`许可。 " 因此，他们强制要求通过 GPS 许可。

所以目前没有办法强制它使用任何特定的提供者。

有一个相同的增强功能请求，继续并为它加星以让谷歌实现它。

增强功能链接：[https ://code.google.com/p/android/issues/detail?id=33151](https://code.google.com/p/android/issues/detail?id=33151)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T09:55:13.523

如果您的项目不需要 gps 的其他功能，您可以将 SDK 目标设置为版本 16：

```
android:targetSdkVersion="16" 
```

并且只需要粗略的位置：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

所以接近警报不会检查gps信号。我的观点是，用户保持 GPS 开启是排水管的意识，记住这是一个切换，你应该在应用程序的要求中考虑它。

# c - 16 位处理器如何具有 4 字节大小的 long int？

> ID：13403880
> 
> 赞同：4
> 
> 时间：2012-11-15T18:32:45.077
> 
> 标签：c, assembly, computer-architecture

![在此处输入图像描述](../Images/630f7750a8cd5c22a7b621234b47765a.png)

我`long int`对 16 位 CPU 的大小有疑问。看看它的架构：

![在此处输入图像描述](../Images/c64c7a5004242c67fbc44b99b93987fe.png)

没有寄存器长度超过 16 位。那么，怎么会有`long int`16bits以上的呢。事实上，根据我的任何处理器，数据类型的最大大小必须是通用寄存器的大小。我对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T18:35:36.130

是的。事实上，C 和 C++ 标准要求`sizeof(long int) >= 4`.*

（我假设`CHAR_BIT == 8`在这种情况下。）

这与 32 位机器上的 64 位整数处理相同。它的实现方式是使用两个寄存器来表示下半部分和上半部分。

加法和减法作为两条指令完成：

在 x86 上：

*   加法：`add`以及“带进位加法”`adc`在哪里`adc`
*   减法：“借位减法”`sub`在`sbb`哪里`sbb`

例如：

```
long long a = ...;
long long b = ...;

a += b; 
```

将编译为：

```
add eax,ebx
adc edx,ecx 
```

where`eax`和`edx`是 的下部和上部`a`。和是 的下部`ebx`和`ecx`上部`b`。

双字整数的乘法和除法更复杂，但它遵循相同的小学数学 - 但每个“数字”都是一个处理器字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:35:14.930

不可以。如果机器没有可以处理 32 位值的寄存器，它必须在软件中模拟它们。它可以使用任何库中用于任意精度算术的相同技术来做到这一点。

# c# - Java中是否有等效的C#索引器？

> ID：13403881
> 
> 赞同：20
> 
> 时间：2012-11-15T18:32:48.257
> 
> 标签：c#, java

我想在 Java 中做到这一点。是否可以？

```
public string this[int pos]
    {
        get
       {
            return myData[pos];
        }
        set
       {
            myData[pos] = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-15T18:34:01.483

不，您不能重载 Java 中的任何运算符，包括索引。（`String`重载`+`，但这已被纳入语言规范。）

只有数组支持`[]`语法。

您通常会编写方法：

```
public String getValue(int position) {
    return myData[position];
}

public void setValue(int position, String value) {
    myData[position] = value;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:33:52.923

不，Java 没有任何类似于 C# 的索引器或重载运算符的东西。`String.charAt`这就是函数调用语法用于、`List.get`、等的最可能原因`Map, put`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:36:04.883

我不这么认为。AFAIK 通常的 Java 方法是`public string get(int pos)`和`public void set(int pos, String value)`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:36:22.523

您可以直接以相同的方式进行操作，但您可以使用我想的类似功能`Collection framework`。`Java`比如`List`等`Set`。

# php - 社交引擎渲染表单问题

> ID：13403882
> 
> 赞同：0
> 
> 时间：2012-11-15T18:32:48.913
> 
> 标签：php, zend-framework, socialengine

我正在向 SE4 中的默认布局编辑器添加一些页面。我所做的只是将页面添加到 core_pages 表并编辑 core_content 表以​​添加主容器和中间/右侧两列布局。一切正常，但现在我添加了默认的“创建视频”页面 (videos_index_create)，但遇到了一些问题。

当我通过 sql 添加此页面时，我显然可以通过默认布局编辑器查看和编辑页面布局。实际上，当我保存更改时，这些更改不会反映到实时页面。如果我去控制器（*Video/controllers/IndexController.php*）并添加

```
$this->_helper->content->setNoRender() 
```

实时页面显示右侧边栏和中间内容，但带有

```
$this->_helper->content->setEnabled() 
```

它仅显示默认的视频上传表单。

所以我在这里编辑了*create.tpl*

```
<?php if (($this->current_count >= $this->quota) && !empty($this->quota)):?>
<div class="tip">
<span>
  <?php echo $this->translate('You have already uploaded the maximum number of videos allowed.');?>
  <?php echo $this->translate('If you would like to upload a new video, please <a href="%1$s">delete</a> an old one first.', $this->url(array('action' => 'manage'), 'video_general'));?>
</span>
</div>
<br/>
<?php else:?>
<?php echo $this->form->render($this); ?>
<?php endif; ?> 
```

更改 else 删除 echo 语句并添加一个简单的**echo 'foo';** . 现在，实时页面正确显示了我的布局（中间+右侧）和默认内容（“foo”）。

因此，我认为问题在于控制器中的这一行：

```
$this->view->form = $form = new Video_Form_Video(); 
```

但我不能更进一步......这个自定义表单类（*Video/Form/Video.php*）似乎没什么特别的，我真的不明白为什么它的渲染会破坏默认布局渲染。

任何社交引擎专家在这里帮助我？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:27:31.403

如果它是 Zend_Form 我很确定你应该这样做：

```
<?php echo $this->form;?> 
```

在您看来，不要自己调用渲染。如果它不是 Zend_Form，请发布表单的代码，它可能有一些 css 或其他不会破坏您的布局的东西。

# c++ - 将结构传递给函数

> ID：13403883
> 
> 赞同：2
> 
> 时间：2012-11-15T18:32:56.137
> 
> 标签：c++, c, struct, binary

* * *

## *这有效：*

```
struct client {
    string address;
    int toPay;
    int id;
};

int main() {
    struct client clients[10];
    ...
    file.read( (char*)&clients, sizeof (clients) );
} 
```

* * *

我想做的是在函数内部做这些事情。

但是我必须如何将结构传递给函数？

如果我像这样通过它，读取不起作用：

```
void newFunction ( struct client *clients_t) {
    ...
    file.read( (char*)&clients_t, sizeof (clients_t) );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:38:52.660

这是行不通的，因为`string`数据没有嵌入到`struct`. 相反，它有几个指向字符串内容的指针。这就是为什么`file.read( (char*)&clients...)`不会产生有效结果的原因：`string`将指向一个保存过的地方`string`，但它不再代表感兴趣的数据。

如果您想像这样序列化数据，请在 中嵌入整个`char`数组，`struct`明显的限制是字符数有上限，并且会浪费一些空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:36:53.257

删除通话`&`中的。`file.read()`

所以：

```
file.read((char *)clients_t, sizeof(*clients_t) * 10 ); 
```

您正在传递指针本身的地址，但您想要的是结构数组的地址，并传递其正确的大小。

但是，虽然这在`read`技术上是有效的，但它不会`string`为您创建对象，因此该片段仅在您在该进程生命周期的早期写出对您自己对象的引用的不寻常情况下才有效。

作为一种学习体验，读写二进制数据是一个好主意。

但是，IRL 通常您根本不想这样做，除非通过 DBMS。它很难调试，并且可以通过公开字节顺序来特定于体系结构。请改用 YAML、XML 或 CSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:36:38.777

为什么不简单地在函数中创建一个 struct 对象。它也会这样工作。然后您可以使用您创建的对象访问该函数中结构的成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T18:37:14.990

`&clients_t`是指向指针的指针。 `clients_t`是需要的指针。

```
void newFunction ( struct client *clients_t) {
    ...
    file.read( (char*)clients_t, sizeof (clients_t) );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T18:37:49.170

结构只是一个对象，因此您可以像对待其他对象一样对待它。

```
void Foo(client& ClientObj)
{
   //anything written in here directly effects the client object you passed
} 
```

请注意，您需要通过引用传递，否则您将只传递对象的副本。

```
//in main
client CObj;
Foo(CObj); 
```

# asp.net-mvc - EF 数据库优先 - 向现有模型添加新模型

> ID：13403886
> 
> 赞同：3
> 
> 时间：2012-11-15T18:33:04.093
> 
> 标签：asp.net-mvc, entity-framework, ef-database-first

所以我有一个数据库并从中创建了一个模型。一切正常。但现在我想向我的数据库添加更多表并从中生成模型。

首先使用 EF 数据库有可能吗？我是否必须重新创建所有模型才能添加新模型？当然，所有表都来自同一个数据库。

示例：假设我有`Table1`、`Table2`和`Table3`。通过`DBContextGenerator`在 VS 中使用，我从`.edmx`文件中生成了模型。所以我有`Model1`, `Model2`, 和`Model3`对应的数据库表，我想添加`Table4`and `Model4`。

我必须重新创建所有内容还是可以以某种方式添加？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:25:55.323

在设计视图中打开您的 .edmx。在某处右键单击并选择“从数据库更新模型”。在“添加”选项卡上，展开“表”，然后找到您的新数据库表。检查它们，然后单击完成。

我经常这样做，因为在开发过程中会更改数据库并添加表，它非常可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T15:32:23.053

要生成类，请执行以下操作：

1.  右键单击解决方案资源管理器的 .tt 文件。
2.  单击“运行自定义工具”。
3.  单击“确定”以显示警告。
4.  将生成新的类。

# jsdoc - 如何使用 JSDoc 记录回调？

> ID：13403887
> 
> 赞同：28
> 
> 时间：2012-11-15T18:33:06.090
> 
> 标签：jsdoc

给定一个以回调函数为参数的 Javascript 函数：

```
var myFunction = function(onSuccess, onFailure) {...} 
```

如何记录`onSuccess`的返回类型和参数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-04T03:44:04.390

在 JSDoc 3.1 及更高版本中，您可以使用新`@callback`标签在单独的注释块中描述回调函数。然后，您可以参考文档中的回调以了解您的方法。

这是一个例子：

```
/** @class */
function MyClass() {}

/**
 * Do something.
 * @param {MyClass~onSuccess} cb - Called on success.
 */
MyClass.prototype.myFunction = function(cb) {
    // code
};

/**
 * Callback used by myFunction.
 * @callback MyClass~onSuccess
 * @param {number} resultCode
 * @param {string} resultMessage
 */ 
```

有关更多信息，请参阅[使用 JSDoc](http://usejsdoc.org/tags-callback.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:34:11.950

~~似乎这个功能还不存在。~~

从 JSDoc 3.1 开始添加此功能。看：

*   [http://code.google.com/p/jsdoc-toolkit/issues/detail?id=319](http://code.google.com/p/jsdoc-toolkit/issues/detail?id=319)
*   [https://github.com/jsdoc3/jsdoc/issues/260](https://github.com/jsdoc3/jsdoc/issues/260)

进行相关讨论。

# iphone - IOS 错误在使用本机共享对话框发布到 Facebook - UICGColor encodeWithCoder

> ID：13403890
> 
> 赞同：2
> 
> 时间：2012-11-15T18:33:31.687
> 
> 标签：iphone, ios, facebook, post, sdk

错误：

> -[UICGColor encodeWithCoder:], /SourceCache/UIKit/UIKit-2372/UIColor.m:1191 2012-11-15 14:17:45.531 Neemu Clothes[15179:4d07] 中的断言失败，由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序, 原因：'只支持 RGBA 或 White 颜色空间，这种方法是 hack。' *** First throw call stack: (0x363272a3 0x32afe97f 0x3632715d 0x37a492af 0x36c793c5 0x379ec00f 0x379eb8b5 0x36dac72d 0x36daba7b 0x3632462f 0x36dab7f5 0x36e895e5 0x36e17cd7 0x36e17b6d 0x3506890f 0x36e17a61 0x36e210d5 0x3505b83b 0x36e210b1 0x3505b11f 0x3505a99b 0x3505a895 0x35069215 0x350693b9 0x357f8a11 0x357f88a4) libc++abi.dylib: terminate called throwing an exception

代码：

```
BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self initialText:@"NeeemuG - Veja meu look." image:nil url:[NSURL URLWithString:@"https://www.neemu.com"] handler:^(FBNativeDialogResult result, NSError *error) {

        // Only show the error if it is not due to the dialog
        // not being supporte, i.e. code = 7, otherwise ignore
        // because our fallback will show the share view controller.
        if (error && [error code] == 7) {
            return;
        }

        NSString *alertText = @"";
        if (error) {
            alertText = [NSString stringWithFormat:
                         @"error: domain = %@, code = %d",
                         error.domain, error.code];
        } else if (result == FBNativeDialogResultSucceeded) {
            alertText = @"Posted successfully.";
        }
        if (![alertText isEqualToString:@""]) {
            // Show the result in an alert
            [[[UIAlertView alloc] initWithTitle:@"Result"
                                        message:alertText
                                       delegate:self
                              cancelButtonTitle:@"OK!"
                              otherButtonTitles:nil]
             show];
        }
    }];

    // Fallback, show the view controller that will post using me/feed
    if (!displayedNativeDialog) {
        NSLog(@"No IOS6.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:21:26.103

在我的代表中，我将 [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"background"]] 放到背景导航栏，我不知道为什么会发生这种崩溃，但是当我删除解决问题时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T16:33:21.773

我有同样的问题，它似乎（显然）与方法 [UIColor colorWithPatternImage:image];

因此，我建议检查每个调用 colorWithPatternImage 的方法，并逐一注释调用该方法的每一行以找出来源。

就我而言，它是我的 AppDelegate 中 UIPageControl 上的 colorWithPatternImage。

很多问题都是关于这个问题的。示例：[UIApperance 和各种崩溃](https://stackoverflow.com/questions/18570766/uiapperance-and-various-crashes) 或 [iOS 6 MFMailComposeViewController：仅支持 RGBA 或白色空间，此方法是 hack](https://stackoverflow.com/questions/12593299/ios-6-mfmailcomposeviewcontroller-only-support-rgba-or-the-white-color-space-t)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T11:41:20.777

对我来说，这个错误是由 UITextField 和 UISwitch 的外观设置引起的。

我有一个抽象视图控制器子类，我的所有视图控制器都继承自该子类，因此我只是指定仅在从该视图控制器继承的视图中设置外观。

像这样：

```
[[UITextField appearanceWhenContainedIn:[BaseViewController class], nil] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bkg"]]];
[[UISwitch appearanceWhenContainedIn:[BaseViewController class], nil] setOnTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bkg"]]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T12:50:28.813

我有同样的问题，我通过子类化组件来解决这个问题。我的情况是：

```
UIColor *bkg = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bkg"]];
[[UICollectionView appearance] setBackgroundColor:bkg]; 
```

当我试图在 facebook 上发布一些东西时，我收到了错误，但后来我创建了简单的子类`UICollectionView`- 让我们命名它`MyGridView`。所以修改后我的代码是：

```
UIColor *bkg = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bkg"]];
[[MyGridView appearance] setBackgroundColor:bkg]; 
```

然后我更改了故事板中的视图以使用自定义组件类`MyGridView`而不是默认组件类，`UICollectionView`并且一切正常 - 我有我想要的背景并且能够在 facebook 上发布。

我认为如果您的问题与我的问题相似，您可以尝试这种方法和您需要的子类组件（当然，如果它们打算被子类化）。

此致

# neo4j - 计算密码中的总路径成本，考虑到关系方向性

> ID：13403894
> 
> 赞同：9
> 
> 时间：2012-11-15T18:33:42.253
> 
> 标签：neo4j, cypher

在 Neo4j 上使用密码查询，在有向循环图中，我需要一个 BFS 查询和一个按深度级别排序的目标节点。

对于深度排序，应使用自定义的“总路径成本函数”，计算基于

*   `r.followrank`开始和结束节点之间的所有关系属性。
*   关系方向性（followrank，如果它指向结束节点，否则为 0）

在任何搜索深度级别`n`，连接到级别高的节点的节点的排名`n-m, m>0`应该高于连接到级别低的节点的节点`n-m`。反向方向应导致 0 排名（这意味着节点及其子树仍然是排名的一部分）。

我正在使用 neo4j community-1.9.M01。到目前为止，我采用的方法是为每个端节点的最短路径提取一组 followrank

我以为我已经为这个查询提出了一个很好的第一个想法，但它似乎在多个点上都崩溃了。

我的查询是：

```
START strt=node(7)
MATCH p=strt-[*1..]-tgt
WHERE not(tgt=strt)
RETURN ID(tgt), extract(r in rels(p): r.followrank*length(strt-[*0..]-()-[r]->() )) as rank, extract(n in nodes(p): ID(n)); 
```

哪个输出

```
==> +-----------------------------------------------------------------+
==> | ID(tgt) | rank                  | extract(n in nodes(p): ID(n)) |
==> +-----------------------------------------------------------------+
==> | 14      | [1.0]                 | [7,14]                        |
==> | 15      | [1.0,1.0]             | [7,14,15]                     |
==> | 11      | [1.0,1.0,1.0]         | [7,14,15,11]                  |
==> | 8       | [1.0,1.0,1.0,1.0,0.0] | [7,14,15,11,7,8]              |
==> | 9       | [1.0,1.0,1.0,1.0,0.0] | [7,14,15,11,7,9]              |
==> | 10      | [1.0,1.0,1.0,1.0,0.0] | [7,14,15,11,7,10]             |
==> | 12      | [1.0,1.0,1.0,0.0]     | [7,14,15,11,12]               |
==> | 8       | [0.0]                 | [7,8]                         |
==> | 9       | [0.0]                 | [7,9]                         |
==> | 10      | [0.0]                 | [7,10]                        |
==> | 11      | [1.0]                 | [7,11]                        |
==> | 15      | [1.0,1.0]             | [7,11,15]                     |
==> | 14      | [1.0,1.0,1.0]         | [7,11,15,14]                  |
==> | 8       | [1.0,1.0,1.0,1.0,0.0] | [7,11,15,14,7,8]              |
==> | 9       | [1.0,1.0,1.0,1.0,0.0] | [7,11,15,14,7,9]              |
==> | 10      | [1.0,1.0,1.0,1.0,0.0] | [7,11,15,14,7,10]             |
==> | 12      | [1.0,0.0]             | [7,11,12]                     |
==> +-----------------------------------------------------------------+
==> 17 rows
==> 38 ms 
```

它看起来与我需要的相似，但问题是

1.  节点 8、9、10、11 与 7 的关系方向相同！反向查询结果`...*length(strt-[*0..]-()-[r]->() )...`看起来更奇怪 - 请参阅下面的查询。
2.  我不知道如何将`length()`表达式的结果标准化为 1。

方向性：

```
START strt=node(7)
MATCH strt<-[r]-m
RETURN ID(m), r.followrank;
==> +----------------------+
==> | ID(m) | r.followrank |
==> +----------------------+
==> | 8     | 1            |
==> | 9     | 1            |
==> | 10    | 1            |
==> | 11    | 1            |
==> +----------------------+
==> 4 rows
==> 0 ms
START strt=node(7)
MATCH strt-[r]->m
RETURN ID(m), r.followrank;
==> +----------------------+
==> | ID(m) | r.followrank |
==> +----------------------+
==> | 14    | 1            |
==> +----------------------+
==> 1 row
==> 0 ms 
```

反向查询：

```
START strt=node(7)
MATCH p=strt-[*1..]-tgt
WHERE not(tgt=strt)
RETURN ID(tgt), extract(rr in rels(p): rr.followrank*length(strt-[*0..]-()<-[rr]-() )) as rank, extract(n in nodes(p): ID(n));
==> +-----------------------------------------------------------------+
==> | ID(tgt) | rank                  | extract(n in nodes(p): ID(n)) |
==> +-----------------------------------------------------------------+
==> | 14      | [1.0]                 | [7,14]                        |
==> | 15      | [1.0,1.0]             | [7,14,15]                     |
==> | 11      | [1.0,1.0,1.0]         | [7,14,15,11]                  |
==> | 8       | [1.0,1.0,1.0,1.0,3.0] | [7,14,15,11,7,8]              |
==> | 9       | [1.0,1.0,1.0,1.0,3.0] | [7,14,15,11,7,9]              |
==> | 10      | [1.0,1.0,1.0,1.0,3.0] | [7,14,15,11,7,10]             |
==> | 12      | [1.0,1.0,1.0,2.0]     | [7,14,15,11,12]               |
==> | 8       | [3.0]                 | [7,8]                         |
==> | 9       | [3.0]                 | [7,9]                         |
==> | 10      | [3.0]                 | [7,10]                        |
==> | 11      | [1.0]                 | [7,11]                        |
==> | 15      | [1.0,1.0]             | [7,11,15]                     |
==> | 14      | [1.0,1.0,1.0]         | [7,11,15,14]                  |
==> | 8       | [1.0,1.0,1.0,1.0,3.0] | [7,11,15,14,7,8]              |
==> | 9       | [1.0,1.0,1.0,1.0,3.0] | [7,11,15,14,7,9]              |
==> | 10      | [1.0,1.0,1.0,1.0,3.0] | [7,11,15,14,7,10]             |
==> | 12      | [1.0,2.0]             | [7,11,12]                     |
==> +-----------------------------------------------------------------+
==> 17 rows
==> 30 ms 
```

所以我的问题是：

1.  这个查询是怎么回事？
2.  有工作方法吗？

有关其他详细信息，我知道 min(length(path)) 聚合器，但在我尝试提取有关最佳命中的信息的这种情况下它不起作用 - 我返回的有关最佳命中的附加信息将分解结果再次 - 我认为这是一个密码限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-02T19:18:33.147

基本上，您只想考虑“与路径流”的关系来进行排名。不幸的是，要测试“使用路径流”，您需要检查每个关系的开始/结束节点的路径索引，而现在只能使用 APOC 来完成。

```
// allshortestpaths to get all non-cyclic paths
MATCH path=allshortestpaths((a{id:"1"})-[*]-(b{id:"2"}))

// Find rank worthy relationships
WITH path, filter(rl in relationships(path) WHERE apoc.coll.indexOf(path, startnode(rl))<apoc.coll.indexOf(path, endnode(rl)))) as comply

// Filter results
RETURN path, REDUCE(rk = 0, rl in comply | rk+rl.followrank) as rank
ORDER BY rank DESC 
```

（我无法测试 APOC 部分，因此您可能必须通过 NODES(path) 而不是路径到 APOC 过程）

# c# - 以编程方式的 Windows 窗体和用户控件布局

> ID：13403895
> 
> 赞同：0
> 
> 时间：2012-11-15T18:33:46.777
> 
> 标签：c#, winforms

如何动态地将用户控件添加到我的表单并确保它正确对齐？换句话说，在动态添加到我的表单时，控制事物如何对齐（居中、垂直、水平等）的最简单方法是什么？

我发现以下有效： [http ://www.vcskicks.com/align-user-interface.php](http://www.vcskicks.com/align-user-interface.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:37:23.500

如果您想显式定义每个新控件的位置，一个选项：

假设您有一个要为其创建控件的对象列表，但在不同的情况下，您可能在列表中有不同数量的对象。您可以遍历列表，为每个项目实例化一个新控件，并将该控件放置在窗体或另一个控件（如布局面板）中，然后显式分配新控件的属性，特别是位置。

假设您希望所有动态添加的控件垂直排列；

分配`newcontrol.Location = new System.Drawing.Point(550, offset);`

并在每次通过循环时按所需间距增加偏移量。

# elasticsearch - Elasticsearch 忽略分词器

> ID：13403900
> 
> 赞同：2
> 
> 时间：2012-11-15T18:34:06.710
> 
> 标签：elasticsearch

我是 Elasticsearch 的新手，在查询方面遇到了问题。

我这样索引字符串：

```
my-super-string
my-other-string
my-little-string 
```

这个字符串是蛞蝓。因此，它们不是空格，只有字母数字字符。相关字段的映射只是“type=string”。

我正在使用这样的查询：

```
{ "query":{ "query_string":{ "query": "*"+<MY_QUERY>+"*", "rewrite": "top_terms_10" } }} 
```

其中“MY_QUERY”也是一个蛞蝓。例如“我的超级”之类的东西。

当搜索“我的”时，我得到了结果。

搜索“my-super”时，我没有得到任何结果，我想要“my-super-string”。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:32:52.970

我建议使用 match_phrase 而不是使用带有前导和尾随通配符的查询字符串。即使是标准分析器也应该能够正确地将 slug 拆分为标记，因此不需要通配符。

```
curl -XPUT "localhost:9200/slugs/doc/1" -d '{"slug": "my-super-string"}'
echo
curl -XPUT "localhost:9200/slugs/doc/2" -d '{"slug": "my-other-string"}'
echo
curl -XPUT "localhost:9200/slugs/doc/3" -d '{"slug": "my-little-string"}'
echo
curl -XPOST "localhost:9200/slugs/_refresh"
echo
echo "Searching for my"
curl "localhost:9200/slugs/doc/_search?pretty=true&fields=slug" -d '{"query" : { "match_phrase": {"slug": "my"} } }'
echo
echo "Searching for my-super"
curl "localhost:9200/slugs/doc/_search?pretty=true&fields=slug" -d '{"query" : { "match_phrase": {"slug": "my-super"} } }'
echo
echo "Searching for my-other"
curl "localhost:9200/slugs/doc/_search?pretty=true&fields=slug" -d '{"query" : { "match_phrase": {"slug": "my-other"} } }'
echo
echo "Searching for string"
curl "localhost:9200/slugs/doc/_search?pretty=true&fields=slug" -d '{"query" : { "match_phrase": {"slug": "string"} } }' 
```

或者，您可以创建自己的分析器，仅在“-”上将 slug 拆分为标记

```
curl -XDELETE localhost:9200/slugs
curl -XPUT localhost:9200/slugs -d '{
    "settings": {
        "index": {
            "number_of_shards": 1,
            "number_of_replicas": 0,
            "analysis": {
                "analyzer" : {
                    "slug_analyzer" : {
                        "tokenizer": "slug_tokenizer",
                        "filter" : ["lowercase"]
                    }
                },
                "tokenizer" :{
                    "slug_tokenizer" : {
                        "type": "pattern",
                        "pattern": "-"
                    }
                }
            }
        }
    },
    "mappings" :{
        "doc" : {
            "properties" : {
                "slug" : {"type": "string", "analyzer" : "slug_analyzer"}
            }
        }
    }
}' 
```

# google-app-engine - 缺少 AppEngine 应用程序

> ID：13403901
> 
> 赞同：3
> 
> 时间：2012-11-15T18:34:12.110
> 
> 标签：google-app-engine

我刚刚创建了我的应用程序帐户，并创建了我的应用程序引擎应用程序，昨天。我使用 Eclipse 上传我的应用程序，昨天一切都很棒。今天……申请不见了。我登录到我的 appengine 帐户，但我的应用不再列出；我只看到“创建应用程序”按钮。我尝试使用相同的 ID 再次创建应用程序，但我收到“无效”消息。尽管如此，我还是可以通过 main-domain.appspot.com 启动我的网站。请帮忙。为什么我在 appengine 控制台中看不到我的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:00:39.730

最可能的原因是您登录了不同的帐户。如果对多登录有混淆，有时会发生这种情况。请尝试以下步骤来查找您的应用程序：

1.  打开一个全新的隐身或私人浏览窗口
2.  转到[http://appspot.com](http://appspot.com)并登录到一个 Google 帐户
3.  查看您的应用程序是否已列出。如果没有，请关闭您的私人浏览窗口以清除会话，然后为您的其他帐户之一重试。

找到您的应用程序后，它可能归错误的帐户所有。您可以通过将所有权转移到您的首选帐户来解决此问题。

1.  导航到您的应用程序的仪表板。
2.  在左侧菜单中，单击“管理”下的“权限”。
3.  将您的首选帐户添加为所有者。
4.  登录您的首选帐户并查看您的电子邮件。您需要接受邀请才能获得应用程序的所有权。
5.  在应用程序仪表板上重新加载权限页面。您应该看到两个帐户都列为所有者。
6.  从所有者列表中删除任何不需要的帐户。（请记住，您至少需要一个所有者！）

# html - 如何让外部 div 与内部 div 一起增长

> ID：13403904
> 
> 赞同：0
> 
> 时间：2012-11-15T18:34:22.967
> 
> 标签：html

我有一个容器 div，里面有一个内部 div。我希望我的外部 div 与内部 div 的内容一起增长（高度）。我已经设置了一个最小高度，但是外部 div 的大小永远不会与我设置的最小高度不同。

这是html：

```
<div id="containerDiv">
    <div class="innerDiv">
        <div id="header" class="layout">...</div>
        <div id="mainMenu" class="layout">...</div>
        <div id="content" class="layout">...</div>
        <div id="footer" class="layout">...</div>
    </div>
</div> 
```

这是CSS：

```
#containerDiv {
    background-image: url('/Content/images/backgroundimage.png');
    min-height: 760px;
    width: 100%;
    border-radius: 1px;
    box-shadow: 0 96px 86px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    overflow: auto;
}
.innerDiv{
    border-radius: 1px;
    -webkit-border-radius: 1px;
    box-shadow: 0 0 86px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    position: absolute;
    background-color: white;
} 
```

这个小提琴应该有助于解决我的问题。红色 div 应该与白色 div 的高度相同。宽度还可以，应该是100%。

```
http://jsfiddle.net/arrsoph87/euB8H/ 
```

基于[此](https://stackoverflow.com/questions/7322997/css-making-inner-div-match-outer-div-height)解决方案，我尝试将溢出属性设置为自动（在容器中），但没有成功。基于[此](https://stackoverflow.com/questions/7322997/css-making-inner-div-match-outer-div-height)解决方案，我尝试将容器的属性浮动设置为向左。这也不起作用。我也尝试在此行之后添加

```
<div id="footer" class="layout">...</div> 
```

（意思是，在关闭内部 div 之前），根据另一篇文章添加这一[行](https://stackoverflow.com/questions/10154950/height-of-outer-div-not-expanding-with-inner-div)

```
<div style="clear:both;"></div> 
```

也无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:46:34.903

更改`overflow: auto`为`overflow: hidden`。那应该行。

```
#containerDiv {
    background-image: url('/Content/images/backgroundimage.png');
    min-height: 760px;
    width: 100%;
    border-radius: 1px;
    -webkit-border-radius: 1px;
    -o-border-radius: 3px;
    box-shadow: 0 96px 86px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);

    overflow: hidden;  // <-------
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:42:13.447

如果您的 innerDiv 向右或向左浮动，通常会发生这种情况。您似乎没有添加 innerDiv 的类定义。通常对此的解决方案是在 innerDiv 的结束标记之后添加（而不是在它之前）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:33:53.190

好的，问题似乎是位置：innerDiv 的绝对属性。我把它改成相对的，它起作用了。以下是相关的**HTML**：

```
<div id="containerDiv">
    <div class="innerDiv">
        <div id="header" class="layout">HEADER</div>
        <div id="mainMenu" class="layout">MAIN MENU</div>
        <div id="content" class="layout">CONTENT</div>
        <div id="footer" class="layout">FOOTER</div>
    </div> 
</div>​ 
```

和**CSS**：

```
#containerDiv
{
    background-image: url('/Content/images/backgroundimage.png');
    min-height:760px;
    width: 100%;
    border-radius: 1px;
    -webkit-border-radius: 1px;
    box-shadow: 0 96px 86px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    overflow:hidden; /*added*/
    /* removed overflow:auto; */
}
.innerDiv
{
    border-radius: 1px;
    -webkit-border-radius: 1px;
    box-shadow: 0 0 86px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    position: relative; /*added*/
    /*removed position:auto;*/
    left:230px; /*added*/
    background-color:white;
    width: 100px;
}​ 
```

我把它放在这个新的小提琴中。

```
http://jsfiddle.net/arrsoph87/BC5n8/ 
```

# iphone - 键盘出现时移动视图 - 仅在编辑时？

> ID：13403907
> 
> 赞同：0
> 
> 时间：2012-11-15T18:34:27.290
> 
> 标签：iphone, objective-c, uiview, uikeyboard

我在这里使用了 Apple 在其文档中的演示代码：

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)

让我的视图根据正在编辑的 textField 相应移动。它工作得很好，我的观点按照我的预期移动，除了一件事。

我的问题是，我可以选择一个 textField，它只会在我开始输入时向上移动视图，而不是在我实际选择 textField 时。

我实际上使用的是与文档中相同的代码（按照上面的链接）。非常令人沮丧，我看不出是什么原因造成的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:12:14.140

这是逻辑见。

1）您最初需要一个`Flag`值集或。假设是那个标志值。`TRUE``ViewDidLoad``viewWillAPpear``isNeedToMove`

你需要在你的代码中实现这些方法，使用它们不要忘记`Adopt`你`UITextFieldDelegate` 的`UIViewcontroller.h class`.

**编辑：在这里，我已经更改了您在您的评论中提到的代码，您需要在触摸 . 时移动 UIView。`TextFIeld`请参见下面是带有某些代码的逻辑。**

addTarget`TextField`到`ViewDiodiLoad`

```
- (void)viewDidload
{
 [touchyTextField addTarget:self
                    action:@selector(yourDesiredMethod)
          forControlEvents:UIControlEventTouchDown];
}

-(void)yourDesiredMethod
{
if(isNeedToMove)//this Flag Avoid The unnecessary move call.
{
 //here call the method which Move The UIview
 }
}

- (BOOL)textFieldShouldReturn:(UITextField*)textField
{

[textField resignFirstResponder];
//here call the method which move UIView to its actual position.
 isNeedToMove= TRUE;
 return YES;

} 
```

我希望你能得到一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:43:54.457

我也有这个烦恼。在keyboardWasShown中，Apple文档说：

```
 if (!CGRectContainsPoint(aRect, activeField.frame.origin) 
```

我用了：

```
if (activeField == myTextField) 
```

这是答案的长版本：[移动位于键盘下方的内容](https://stackoverflow.com/questions/12345131/moving-content-located-under-the-keyboard)

# javascript - 避免将 cookie 发送到子域

> ID：13403908
> 
> 赞同：0
> 
> 时间：2012-11-15T18:34:35.057
> 
> 标签：javascript, cookies, subdomain

如何避免 cookie 被发送到子域使用下面的脚本

> ```
> function createCookie(name,value,days){
>   if (days) {
>       var date = new Date();
>       date.setTime(date.getTime()+(days*24*60*60*1000));
>       var expires = "; expires="+date.toGMTString();
>   }
>   else var expires = "";
>   document.cookie = name+"="+value+expires+"; path=/";
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:15:23.390

下面的脚本对我有用

```
 document.cookie = cookieName +"=" + cookieValue + ";expires=" 
+ myDate + ";domain=www.abc.com;path=/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:40:54.163

你能不能先检查调用脚本的域，然后只在它不是子域时设置cookie？

就像是：

```
if (Request.Host.toLower() == "www.abc.com"){
    createCookie(name,day,values);
 } 
```

# c# - c#文本框文本到实体值

> ID：13403910
> 
> 赞同：-2
> 
> 时间：2012-11-15T18:34:37.113
> 
> 标签：c#, textbox

我需要创建一个字符串/整数，它将包含来自 texbox 的文本。它必须是稳定的，编辑此文本框后无法更改此字符串/整数。有什么解决办法吗？阻止文本框或类似的东西：

```
string x = textBox1.Text; 
```

不满足我

编辑; 我得到了这个：字符串 x = textBox1.Text; 所以每次都会从 textBox1 接收值，并且可以更改文本框的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:47:36.443

如果您想要一个始终包含文本框中当前文本的变量，这里有几个选项。

第一个选项是...不，并且始终`textbox1.Text`在您想要访问文本的任何时间使用，而不是使用变量代替它。

下一个选项是创建一个属性。它可能会使语法更好一点，而不会真正改变任何东西：

```
private string MyText
{
    get
    {
        return textbox1.Text;
    }
    set
    {
        textbox1.Text = value;
    }
} 
```

然后你可以使用`MyText`而不是`textbox1.Text`. 它不会真正改变任何东西，但它可能会缩短语法。

最后一个选项是在文本框文本更改时更新一个字符串：

```
private string myText;
public Form1()
{
    InitializeComponent();

    textbox1.TextChanged += (_, args) => myText = textbox1.Text;
} 
```

虽然这可能在技术上最接近您的要求，但我也不建议这样做。它不会比使用属性获得任何好处，并且设置该字符串的值不会设置文本框的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:59:27.177

目前还不清楚你想要什么，所以这是我的猜测：

您不希望`TextBox`可编辑...

有`TextBox`两个属性可以帮助您：

`Enabled`和`ReadOnly`

如果设置`Enabled`为 false，则`TextBox`将变灰，用户将无法再更改文本。

如果设置`ReadOnly`为 true，TextBox 将不会灰显，但用户将无法更改文本。

# jquery - jquery sparkline 仅在 IE7 中给出未定义

> ID：13403911
> 
> 赞同：1
> 
> 时间：2012-11-15T18:34:38.833
> 
> 标签：jquery, sparklines

数组值仅在 IE7 及更高版本中给出未定义的结果......我不知道我在这里做什么！

html:

迷你图出现在这里：

```
javascript :-
// jsfiddle configured to load jQuery Sparkline 2.1
// http://omnipotent.net/jquery.sparkline/

// Values to render
var values = [99.51,0.00,0.49];

// Draw a sparkline for the #sparkline element
$('#sparkline').sparkline(values, {
type: 'pie', 
borderWidth: 0,
height: '1.40em',
disableTooltips: true,
sliceColors: ['#088A08','#2E64FE','#FF8000'],
offset: 180
}); 
```

结果：迷你图出现在这里：未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:02:44.617

插件的错误（已在开发树中修复）。提问者打开的错误中的更多详细信息： [https ://github.com/gwatts/jquery.sparkline/issues/49](https://github.com/gwatts/jquery.sparkline/issues/49)

# javascript - Rally App SDK 2.0：SnapshotStore 无法加载自定义字段和水合物

> ID：13403913
> 
> 赞同：1
> 
> 时间：2012-11-15T18:34:45.413
> 
> 标签：javascript, extjs4, rally

在尝试从分析引擎加载信息时，我无法加载自定义字段。特别是，我希望加载属于 Portfolio Items 的信息。有一些返回 OID 的字段，例如状态，我可以在分析场景文档中进行水合，但无法通过 SDK 进行水合。事实上，我无法检索任何 State 值。看起来，虽然为 InvestmentCategory 返回了一个 OID，但它对于每条记录都是相同的，并且水合物为“无”。

我想知道 SDK 的这一部分有多成熟，和/或是否有我只是缺少的额外参数？自定义字段是否还需要以“c_”为前缀？我试过用和不带前缀来指定它们，但没有运气。

**EDIT1：**看来我只需要增加限制。我看到自定义字段返回的值以“c_”为前缀。当我确认只是早期的记录让我感到困惑时，我将发布另一个更新。水合作用“问题”仍然存在。我只看到 InvestmentCategory 被水合了。

**EDIT2：**确实，“问题”是，随着时间的推移，必填字段集发生了变化，而旧记录没有指定/定义某些字段，例如投资类别。State 字段的水合作用问题仍然存在，我希望在有更新时收到 Mark 的回复。我希望将来会有更新允许更多领域的水合作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:07:33.807

我在 Rally Software 工作，是构建 Lookback Api 的团队的一员。我刚刚对此进行了测试，它似乎适用于 PortfolioItem InvestmentCategory 字段，但仅部分适用于 State，所以我认为您发现了问题。

要确认您的 PortfolioItems 的 InvestmentCategory 不是“None”，您可以尝试以下查询：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/<YOUR WORKSPACE OID HERE>/artifact/snapshot/query.js?find={_TypeHierarchy:"PortfolioItem",InvestmentCategory:{$ne:"None"}}&fields=["InvestmentCategory"]&hydrate=["InvestmentCategory"] 
```

同样，如果您通过 SDK 进行尝试，您的 SnapshotStore 配置应该类似于：

```
{
    context: {
        workspace: this.context.getWorkspace(),
        project: this.context.getProject()
    },
    rawFind: {
        _TypeHierarchy:"PortfolioItem",
        InvestmentCategory:{$ne:"None"}
    },
    fetch: ["InvestmentCategory"],
    hydrate: ["InvestmentCategory"]
} 
```

您可以通过在浏览器的调试器中检查服务器响应来验证调试器中查询的原始结果。在 Chrome 中，如果您转到“网络”选项卡，您应该会看到一个“查询”条目，您可以在右侧的“响应”选项卡中查看，或者（我更喜欢这样做）右键单击它并选择'在新的标签页打开链接'。如果您使用 Chrome 扩展程序“Google Chrome 的 JSONView 和 JSONLint”（[https://chrome.google.com/webstore/detail/jsonview-and-jsonlint-for/mfjgkleajnieiaonjglfmanlmibchpam](https://chrome.google.com/webstore/detail/jsonview-and-jsonlint-for/mfjgkleajnieiaonjglfmanlmibchpam)），它也更容易阅读。

对于 PortfolioItem 上的字段 State，我认为您发现了一个缺陷。我已将其输入为 DE15305 以进行调查。当我们知道更多时，我会在这里发帖。

编辑：

是的，我们允许您在 _TypeHierarchy 中使用类型名称的字符串版本，然后将它们解析为基础 OID。从理论上讲，使用 OID 应该会稍微快一些，所以如果你是从一个类型选择器中获得它的，但如果你对它们进行硬编码，那么使用字符串来提高可读性应该没问题。您对 PortflioItem 类型也是正确的，您可以搜索“PortfolioItem/Strategy”、“PortfolioItem/Feature”等（取决于它们是否已在您的工作区中重命名）。使用 OID 确实具有使您免于重命名的好处。

查询过滤器应该支持 rawFind 所做的一切，只是你喜欢 ExtJS 样式语法还是原生 Lookback API/MongoDB 样式语法的问题。两者之间的性能差异应该可以忽略不计（尽管我承认，我还没有在微基准测试中对此进行过测试）。

该缺陷仍在待调查的积压中，但目前的理论是它可能是针对已删除的状态的，我们只能使用当前值来水合值 - 我们使用“今天的镜头”来处理这些外国键。将来这种情况可能会改变，但我不能保证任何事情，对不起。当发现缺陷时，我会再次更新。

# css - GWT 中的条件 CSS

> ID：13403918
> 
> 赞同：3
> 
> 时间：2012-11-15T18:35:04.480
> 
> 标签：css, gwt

我正在使用 GWT。

是否可以使用 CSS 执行以下 if/else 语句？

```
.unseen-activity div.unseen-label {
    display: inline;

    if using chrome { left: 510px; }
    else { left: 470px; }

    margin: 0 auto;
} 
```

还是让我的 GWT Java 代码检查浏览器，然后相应地添加样式会更好？

注意 - 我不确定是否可以在 GWT 中检查浏览器。

谢谢，凯文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:36:12.567

GWT`CssResource`可以：

```
@if user.agent safari {
    .unseen-activity div.unseen-label {
        left: 510px;
    }
}
@else {
    .unseen-activity div.unseen-label {
        left: 470px;
    }
}

.unseen-activity div.unseen-label {
    display: inline;
    margin: 0 auto;
} 
```

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Conditional_CSS](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Conditional_CSS)

注意：`safari`用户代理匹配所有 webkits；如果您需要其他东西，请使用静态方法作为`@if`测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:37:21.163

CSS 是一种纯样式表语言，没有集成的决策选项。使用 GWT 或使用 javascript 时，您需要在 java 中执行此操作。

# android - 带有源库文件的 Android Eclipse 构建应用程序

> ID：13403920
> 
> 赞同：0
> 
> 时间：2012-11-15T18:35:07.503
> 
> 标签：android, eclipse, build, jar

我正在尝试使用源库文件构建应用程序。我将源添加为项目并在我的其他项目中检查了“是库”，所有库引用仍然被破坏。首先，我使用 jar 作为参考，但我需要在源代码中找到一些机会，这就是为什么我想用 jar 的源代码来构建它。有人知道我如何使用 jar 库的源代码构建我的应用程序吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:04:26.560

首先，正如您所说，您必须将源项目标记为库：

![在此处输入图像描述](../Images/cc7ede28fe88ab6034926474590125a5.png)

然后在另一个项目上，转到 properties/android 并在底部将第一个项目添加到库中：

![在此处输入图像描述](../Images/aba667ed91623c4ce4bc55e5a3ba587b.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:31:14.643

为了解决在 Eclipse 中找不到源库的问题，我执行了以下步骤：

创建了一个新工作区

将目录重命名为项目名称

导入两个项目

删除了主项目中jar的所有引用

在主项目中添加对源库的引用

# java - java中的虚方法调用-多态性

> ID：13403922
> 
> 赞同：1
> 
> 时间：2012-11-15T18:35:14.243
> 
> 标签：java, polymorphism

```
package polymordemo1; 

class animal{
    public void getanimal(animal anim) {
        anim.ganim();
    }

    private void ganim() {
        System.out.println("this is the animal");
    }
}

class cat extends animal{
    public void ganim() {
        System.out.println("I am cat");
    }
}

class bat extends animal{
    public void ganim() {
        System.out.println("I am bat");
    }
}
public class PolymorDemo1 {
public static void main(String[] args) {
        animal a=new animal();
        cat c=new cat();
        bat b=new bat();

        a.getanimal(c);
        a.getanimal(b);

    }
} 
```

我是 Java 的新手，我正在研究多态性。

这段代码的输出结果是：

这是动物

这是动物。

**事实上我期待这个输出：**

**这是猫**

**这是蝙蝠**

代码中的错误似乎是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:37:30.433

更改`private void ganim()`为`public void ganim()`。不能以这种方式覆盖私有方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:47:21.403

正如旁注：

这就是为什么`@Override`在重写方法时应该始终使用注解的原因。这只是一个很好的做法，可以让你远离这种陷阱。

```
public class Sup {

    private void method() { }
}

public class Sub {

    @Override
    public void method() { }
} 
```

这将导致编译失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:37:51.210

基类中的方法是`private`：

```
private void ganim() 
```

因此你不能覆盖它。做它`public`或`protected`它会工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T18:48:16.250

您需要使`Animal`类抽象并声明`ganim()`方法抽象并且**不是私有**的（不能被覆盖），以便从实现中调用它：

```
public abstract class Animal
{

    public void getanimal() 
    {
        this.ganim();
    }

    abstract void ganim() ;
} 
```

另请注意，您不需要将实际的实现实例传递给该`getanimal()`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T18:38:20.460

将 ganim() 方法设为公开而不是私有。

您不能覆盖私有方法，但您可以在派生类中引入一个私有方法而不会出现问题。这编译得很好：

```
class Base
{
   private void foo()
   {
   }
}

class Child extends Base
{
    private void foo()
    {
    }
} 
```

我们**不能**覆盖Java 中的**私有**方法，就像我们不能覆盖Java 中的**静态**方法一样。

与静态方法一样，Java 中的私有方法也在编译期间通过类型信息使用静态绑定进行绑定，并且不依赖于特定引用变量所持有的对象类型。

由于方法覆盖适用于动态绑定，因此无法覆盖 Java 中的私有方法。

private 关键字在 Java 中提供了最高级别的封装。尽管您可以通过声明另一个具有相同名称和不同方法签名的私有方法来隐藏 Java 中的私有方法。（[来源](http://java67.blogspot.pt/2012/08/can-we-override-private-method-in-java.html)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T18:40:15.403

动物类中的方法 ganim() 是私有的。因此，不能被覆盖。

将其更改为公开或受保护。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T18:40:52.043

我已经修改了您的代码，以便您可以通过以下方式执行您的功能。

你可以通过以下方式来做这件事

```
class animal{

    public void getanimal(animal anim) {
        anim.ganim();
    }

    public void ganim() {
        System.out.println("this is the animal");
    }
}

class cat extends animal{
    public void ganim() {
        System.out.println("I am cat");
    }
}

class bat extends animal{
    public void ganim() {
        System.out.println("I am bat");
    }

}
public class PolymorDemo1 {
public static void main(String[] args) {
        animal a=new animal();
        animal c=new cat();
        animal b=new bat();

        a.ganim();
        c.ganim();
        b.ganim();

    }
} 
```

**输出**

```
this is the animal
I am cat
I am bat 
```

# jquery - Div 不会使用 jquery 显示（）

> ID：13403925
> 
> 赞同：2
> 
> 时间：2012-11-15T18:35:19.783
> 
> 标签：jquery, class, html, hide, show

我遇到了一个非常奇怪的问题。如果您单击类：“change_btn”，我想显示一个特定的 div。但唯一有效的是密码形式（passwordFC）。当我单击其他按钮时，什么都看不到。他们有内容。怎么会这样？

我已经尝试了几个小时，感谢您的帮助。

最好的问候吉米

**jQuery**

```
jQuery(function($) {

    /* Make the password form show first as standard */
    $(".settingsFC").hide();
    $(".passwordFC").show();

    /* Function that shows the right form when clicking the buttons */

    $(".change_btn").click(function() { 

        $choosenForm = "." + $(this).attr("title"); 

        /* Remove the style on the other buttons */
        $(".settingButton").css('background-color','#ebeaea');
        $(".settingButton").css('font-weight','normal');

        /* Add style to clicked button */
        $(this).css('background-color','#e0e0e0');
        $(this).css('font-weight','bold');

        /* Hide the other containers, if i remove this they show when clicking. */
        $(".settingsFC").hide();

        /* Tried this one as well, didnt work */
        //$(".settingsFC:not(."+$choosenForm+")").hide();

        /* Show the right container */
        $($choosenForm).show();

    });
}); 
```

**html**

```
<div title="passwordFC"  class="settingButton px10 change_btn firstSettingsChoice"> INLOGGNING </div>
<div title="personalFC" class="settingButton px10 change_btn"> PERSONLIGT </div>
<div title="paymentFC"  class="settingButton px10 change_btn"> BETALNINGSPLAN </div>
<div title="cloudFC"  class="settingButton px10 change_btn"> CLOUD INSTÄLLNINGAR </div>

<div class="settingsFC passwordFC">
    <?php include("includes/changeSettings/changePassword.php"); ?>
</div> <!-- changePassword -->

<div class="settingsFC personalFC">
    <?php include("includes/changeSettings/changePersonal.php"); ?>
</div> <!-- changePersonal -->

<div class="settingsFC paymentFC">
    <?php include("includes/changeSettings/changePayment.php"); ?>
</div> <!-- changePayment -->

<div class="settingsFC cloudFC">
    <?php include("includes/changeSettings/changeCloud.php"); ?>
</div> <!-- changeCloud --> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T18:49:32.337

这是你需要做的。工作小提琴（删除 PHP 东西进行测试） -[小提琴](http://jsfiddle.net/58jMM/1/)

```
$(document).ready(function() {

  /* Make the password form show first as standard */
  $(".settingsFC").hide();
  //$(".passwordFC").show();

  /* Function that shows the right form when clicking the buttons */

  $(".change_btn").click(function() { 

         var choosenForm = "." + $(this).attr("title"); 

         /* Remove the style on the other buttons */
         $(".settingButton").css('background-color','#ebeaea');
         $(".settingButton").css('font-weight','normal');

         /* Add style to clicked button */
         $(this).css('background-color','#e0e0e0');
         $(this).css('font-weight','bold');

         /* Hide the other containers, if i remove this they show when clicking. */
          $(".settingsFC").hide();

         /* Tried this one as well, didnt work */
         //$(".settingsFC:not(."+$choosenForm+")").hide();

         /* Show the right container */
         $(choosenForm).show();

    });
});​ 
```

# vb.net - vb.net Form.Enabled vs From.Visible vs Form.Focused

> ID：13403926
> 
> 赞同：0
> 
> 时间：2012-11-15T18:35:22.263
> 
> 标签：vb.net, winforms

希望是一个简单的问题，

我有一个线程在一个类中运行，它只循环一堆东西。我想在用户关闭表单时停止线程。我的 Form.vb 中有以下功能

```
 Public Function getFormStatus() As Boolean
    Dim bAlive As Boolean = False

    If Me.Enabled = True Then
        bAlive = True
    Else
        bAlive = False
    End If

    Return bAlive
End Function 
```

然后在我的主循环类中我有

```
dim isAlive as Boolean = false
isAlive = frm.getFormStatus
while isAlive
   do stuff 
```

我的问题是我不知道告诉我它当前是否处于活动状态的表单的属性！我觉得这应该不难，但我尝试了几种不同的方法，但没有一个能达到我的预期结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:40:17.737

当线程未完成运行它被告知运行的内容时，它是*活动的。*虽然这听起来很傻，但在上面的示例中，您会注意到，只要您处于该 while 循环中，线程就*处于活动状态*。

如果您希望在 UI 线程的单独线程上执行执行，我建议您查看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，因为它会使您的方法更加简洁和易于实现。

关于活动表单，可以通过[ActiveForm](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)属性来实现。

```
Dim currentForm As Form = Form.ActiveForm 
```

# javascript - 不使用 eval() 从文本中检索变量

> ID：13403932
> 
> 赞同：0
> 
> 时间：2012-11-15T18:35:48.470
> 
> 标签：javascript, jquery

我正在尝试构建一个计算广告价格的表格。问题是，每个部分都有不同的基值。所以我试图让 jQuery 评估变量，但它只评估文本。Eval() 在这里工作，因为它返回变量而不是文本。

`var onlineAdCalc =eval($('#onlineAdSection').val()+$('#onlineAdSize').val());`

`$('#onlineAdSection')`并且`$('#onlineAdSize')`都是选择框。

例如，

```
var homebox = 38.4;
$('#onlineAdSection').val() = home;
$('#onlineAdSize').val() = box; 
```

与评估

```
onlineAdCalc = 38.4 
```

没有评估

```
onlineAdCalc = homebox 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:38:46.547

使用 parseFloat()：

```
var onlineAdCalc =parseFloat($('#onlineAdSection').val())+parseFloat($('#onlineAdSize').val()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T18:37:15.190

尝试使用哈希来存储您的输出：

```
var adHash = [];
adHash['homepagebigbox'] = 38.4;
var lookup_string = $('#onlineAdSection').val() + $('#onlineAdSize').val()

adHash[lookup_string]
=> 38.4 
```

# actionscript-3 - AS3 预加载和播放 mp4 文件

> ID：13403940
> 
> 赞同：0
> 
> 时间：2012-11-15T18:36:07.360
> 
> 标签：actionscript-3

有没有办法用 as3 预加载和播放 flash 中的 mp4 视频文件？

我尝试了以下方法，但没有任何运气：

```
var myMovie:Sprite;

    var l:Loader = new Loader();
    l.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loop, false, 0, true);
    l.contentLoaderInfo.addEventListener(Event.COMPLETE, done, false, 0, true);
    l.load(new URLRequest("video.mp4"));

    function loop(e:ProgressEvent):void
    {
      var perc:Number = e.bytesLoaded / e.bytesTotal;
      percent.text = Math.ceil(perc*100).toString();
    }

    function done(e:Event):void
    {
      removeChild(percent); // was removeChildAt(0) but it make more sense this way
      percent = null;

      myMovie = Sprite(l.content);

      addChild(myMovie);

      l.contentLoaderInfo.removeEventListener( ProgressEvent.PROGRESS, loop);
      l.contentLoaderInfo.removeEventListener(Event.COMPLETE, done);
      l = null;
    } 
```

# ruby-on-rails - rails：默认 created_at 字段自定义格式

> ID：13403967
> 
> 赞同：0
> 
> 时间：2012-11-15T18:38:01.460
> 
> 标签：ruby-on-rails, ruby, format

我在 Rails 中有一个表，我使用默认的时间戳。例如，在我的申请表中，我必须 `applicant.created_at`显示提交申请的时间。但是，这显示了日期和时间的完整格式。

有没有办法让我只以 dd/mm/yyyy 格式显示日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:51:03.473

有几个很棒的格式化时间教程。

[http://railscasts.com/episodes/31-formatting-time](http://railscasts.com/episodes/31-formatting-time)

但你要找的是 .strftime

```
t = Time.now
t.strftime("Printed on %m/%d/%Y")
puts t #=> "Printed on 11/14/2012" 
```

[http://strfti.me/](http://strfti.me/)

# node.js - 运行everyauth 示例的问题

> ID：13403968
> 
> 赞同：0
> 
> 时间：2012-11-15T18:38:12.303
> 
> 标签：node.js, everyauth

我试图运行everyauth 模块的示例。但是，当我输入 sudo node server.js 时出现此错误

```
Error: Cannot find module '../restler' 
```

我已经用谷歌搜索了一段时间，但无法准确找出此错误背后的原因。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:15:53.037

你在运行express3吗？我有同样的问题，并且按照

[https://github.com/bnoguchi/everyauth/issues/359](https://github.com/bnoguchi/everyauth/issues/359)

发现最好的选择是遵循 express3 指令

[https://github.com/bnoguchi/everyauth#installation](https://github.com/bnoguchi/everyauth#installation)

并以这种方式安装everyauth：

```
npm install git://github.com/bnoguchi/everyauth.git#express3 
```

而不是通常的“npm install everyauth”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:11:15.977

看起来 viadeo 适配器没有被移植到使用@mikael 的请求模块？

```
$ grep -ri restler .
./Changelog.md:- Use https://github.com/mikeal/request instead of restler.
./lib/modules/viadeo.js:  , rest = require('../restler'); 
```

您可能需要修补并提交拉取请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:36:17.100

我追踪了这个问题并提交了一个拉取请求。我必须解决两个问题。就像 broofa 所说，当 Restler 实际上不再是 Everyauth 的依赖项时，它被引用了。解决方法是改用 Request 模块。

即使您自己设法解决了这个问题，您还会遇到另一个问题。由于微博认证模块配置错误，示例认证服务器在每次运行时都会抛出错误。在它之后设置的任何其他模块都会引发错误，这正是运行示例 Everyauth 服务器时发生的情况。

如果您想要修复问题的 Everyauth 版本，请参阅[我的项目分支](https://github.com/fruchtose/everyauth)。我向主项目提交了一个拉取请求，所以希望它很快就会被集成。

# algorithm - 寻找不超过指定成本的最快路径

> ID：13403973
> 
> 赞同：4
> 
> 时间：2012-11-15T18:38:22.350
> 
> 标签：algorithm

我在寻找不超过指定成本的最快路径时遇到问题。

假设我有指定的最大成本和 4 条记录。

```
// specified cost
    10 
// end point
    5
//(start point) (finish point) (time) (cost)
    2 5 50 5
    3 5 20 9
    1 2 30 5
    1 3 30 7 
```

我必须决定，是否有可能从点 (1) 到 (5)（当没有成本 <= 比我们拥有的路径或当 1-5 之间没有联系时，这是不可能的）如果是这样，什么将是进入那里的最快方式。

此类数据的输出将是：

```
80 // fastest time
3 1 // number of points that (1 -> 2)  -> (2 -> 5) 
```

请记住，如果有记录说您可以移动**1->2**

```
1 2 30 5 
```

它不允许您移动**2<-1**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:47:03.823

使用动态编程，如下所示：

```
Route(node, length, target, accumulated)

if length <= 0 return -1
if node == target return accumulated

For each adjacent node:
  current length = accumulated + Route(adjacent node, length - connecting edge weight, target, accumulated + connecting edge weight)
  min length = min(current length, min length)

return min length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:39:56.703

网络搜索发现 h​​ttp [://www.cs.elte.hu/~alpar/publications/jour/AKCE_October_25.pdf](http://www.cs.elte.hu/~alpar/publications/jour/AKCE_October_25.pdf)表明这是一个合理的当前研究问题。在不阅读论文的情况下，我的方法是使用动态编程，其中，对于每个节点，您为每个合理的 K 记录成本 <= K 的最短路径。您只需要在可用的最短路径发生变化时保留 K 值随着 K 的变化。如果成本或时间是可靠的小整数，这可能是可行的。如果没有，您可以构建示例问题，这些问题需要您计算并保持无法管理的部分解决方案数量。

# sql - 复制空值的 Oracle SQL 左连接

> ID：13403975
> 
> 赞同：0
> 
> 时间：2012-11-15T18:38:26.947
> 
> 标签：sql, oracle, left-join

我不确定如何以 Google 能够理解的方式提出这个问题。我想加入两个表并填写空白字段。这是我正在使用的内容：

```
tbl1
| user | date  | usage |
| us1  | 01/12 |  503  |
| us1  | 02/12 |  245  |
| us1  | 03/12 |  465  |
| us2  | 02/12 |  327  |
| us2  | 03/12 |  204  |
| us3  | 02/12 |  156  |

tbl2
| dates | avg_use |
| 01/12 |   345   |
| 02/12 |   426   |
| 03/12 |   502   |

Desired output
| user | date  | usage  |  pct_of_avg  |
| us1  | 01/12 |  503   |     1.45     |
| us1  | 02/12 |  245   |     .58      |
| us1  | 03/12 |  465   |     .93      |
| us2  | 01/12 | (null) |      0       |
| us2  | 02/12 |  327   |     .95      |
| us2  | 03/12 |  204   |     .41      |
| us3  | 01/12 | (null) |      0       |
| us3  | 02/12 |  156   |     .37      |
| us3  | 03/12 | (null) |      0       | 
```

我非常了解 JOIN，所以我知道典型的 JOIN 将无法做到这一点，因为 tbl1.user 中的数据将不存在。有没有办法在 SQL 中做到这一点？给我想要做的名字加分，因为知道如何谷歌这个会有很大帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:42:41.687

这应该这样做：

```
SELECT U.user, T2.dates date, T1.usage, T1.usage/T2.avg_use pct_of_avg  
FROM (SELECT DISTINCT user FROM tbl1) U
CROSS JOIN tbl2 T2
LEFT JOIN tbl1 T1
    ON T2.date = T1.date  AND U.user = T1.user 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:23:22.513

如果您的 Oracle 版本 10g 或更高版本，您可以使用扩展[分区](http://docs.oracle.com/cd/B19306_01/server.102/b14223/analysis.htm#sthref1836)`outer join`来填补数据空白。您将需要更少的代码。它会更简单，更快。

```
SQL> select t.user1
  2       , to_char(t1.dates, 'mm/yy') as date1
  3       , t.usage1
  4       , round((nvl(t.usage1, 0)/t1.avg_use), 2)  as pct_of_avg
  5   from tbl1 t
  6   partition by(t.user1)
  7   right join tbl2 t1
  8      on (t.date1 = t1.dates)
  9  ;

USER1 DATE1     USAGE1 PCT_OF_AVG
----- ----- ---------- ----------
us1   01/12        503       1.46
us1   02/12        245       0.58
us1   03/12        465       0.93
us2   01/12                     0
us2   02/12        327       0.77
us2   03/12        204       0.41
us3   01/12                     0
us3   02/12        156       0.37
us3   03/12                     0

9 rows selected 
```

# ios - 在 iOS 中将链接颜色设置为黑色

> ID：13403977
> 
> 赞同：0
> 
> 时间：2012-11-15T18:38:42.490
> 
> 标签：ios, ios5, colors, hyperlink

我是 iOS 开发的新手（尽管我从过去 2 年开始就是 Web 开发人员）

我使用 TextView 在我的屏幕上创建了一个链接，并将颜色设置为黑色。但是，当我运行我的应用程序时，我看到链接颜色为蓝色。知道如何将链接颜色设置为黑色吗？

有没有类似 CSS 的东西用于 iOS 开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:42:32.400

除非您对它进行子类化和自定义，否则自动识别链接`UITextView`始终显示为蓝色。不过，您可以使用它`UIWebView`来显示一些样式化的 HTML 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:19:31.730

您可以轻松地格式化 中的文本`UIWebView`，如下所示：

```
 NSString *pureHtmlText = [NSString stringWithFormat:@"<html><head><STYLE 
type=text/css>body{margin-top:1cm;}</STYLE></head><body style=background-color: 
transparent;><br /><p><font face=heveltica neue; size=5>Other text: </font></p></body></html>"];

    //Load text in UIWebView (don't forget to declare a UIWebView instance for sure)
    [webView loadHTMLString:pureHtmlText baseURL:nil]; 
```

有关更多详细信息，我向您推荐官方[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)和[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)文档。

**编辑：**

@法希姆帕克：

Yahoo 链接不会被调用，因为`baseURL`设置为`nil`，您有更好的选择：创建一个 html 文件，`myFile.html`将其包含到您的 Xcode 项目中，然后将您的代码更改为：

```
NSBundle *myBundle = [NSBundle mainBundle];
NSString *path = [myBundle pathForResource:@"myFile" ofType:@"html"];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[self.webView loadHTMLString:@"myFile.html" baseURL:baseURL]; 
```

# c++ - 密集对称矩阵的特征有效类型

> ID：13403982
> 
> 赞同：21
> 
> 时间：2012-11-15T18:38:50.600
> 
> 标签：c++, matrix, linear-algebra, eigen

[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)是否具有存储密集、固定大小、对称矩阵的有效类型？（嘿，它们无处不在！）

即对于 N=9，它应该只存储 (1+9)*9/2==45 个元素并且它具有适当的操作。例如，应该有效地添加两个对称矩阵，返回相似的对称矩阵。

如果没有这样的事情，我应该采取哪些行动（看起来像[这样](http://eigen.tuxfamily.org/dox-devel/TopicCustomizingEigen.html)）将这种类型引入 Eigen？它有“视图”的概念吗？我可以为我自己的类型写一些像“矩阵视图”这样的东西，这会使它成为 Eigen-friednly 吗？

[PS也许我可以使用map](http://eigen.tuxfamily.org/dox/classEigen_1_1Map.html)将普通数组视为 1xN 矩阵，并对其进行操作。但这不是最干净的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T21:39:47.523

对称矩阵的[打包存储是矢量化代码的一](http://www.netlib.org/lapack/lug/node123.html)*大*敌人，即速度。标准做法是将相关的 N*(N+1)/2 系数存储在全密集 NxN 矩阵的上三角或下三角部分中，而剩余的 (N-1)*N/2 不被引用。然后通过考虑这种特殊的存储来定义对称矩阵上的所有操作。在 eigen 中，您有[三角和自伴视图](http://eigen.tuxfamily.org/dox/group__QuickRefPage.html#title12)的概念来获得这一点。

从[特征](http://eigen.tuxfamily.org/dox/group__QuickRefPage.html#title12)参考：（对于实矩阵selfadjoint ==对称）。

> 就像三角矩阵一样，您可以引用方阵的任何三角形部分，将其视为自伴随矩阵并执行特殊和优化的操作。同样，相反的三角形部分从未被引用，可用于存储其他信息。

除非内存是一个大问题，否则我建议将矩阵的未引用部分留空。（更易读的代码，没有性能问题。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T20:48:09.287

是的，eigen3 有[views](http://eigen.tuxfamily.org/dox/group__QuickRefPage.html#QuickRef_DiagTriSymm)的概念。但是它对存储没有任何作用。就像一个想法一样，您也许可以为两个相同类型的对称矩阵共享一个更大的块：

```
Matrix<float,4,4> A1, A2; // assume A1 and A2 to be symmetric
Matrix<float,5,4> A;
A.topRightCorner<4,4>().triangularView<Upper>() = A1;
A.bottomLeftCorner<4,4>().triangularView<Lower>() = A2; 
```

不过它很麻烦，如果你的记忆真的很珍贵，我只会使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-23T09:45:06.110

**对称矩阵的高效类型**

您只需将值分配给矩阵的下/上三角部分并使用本征三角和自伴随视图。但是，我已经在小型固定大小的矩阵上进行了测试。我注意到在性能方面，使用视图并不总是最好的选择。考虑以下代码：

```
Eigen::Matrix2d m;
m(0,0) = 2.0;
m(1,0) = 1.0;
// m(0,1) = 1.0;
m(1,1) = 2.0;
Eigen::Vector2d v;
v << 1.0,1.0;
auto result = m.selfadjointView<Eigen::Lower>()*v; 
```

与下面介绍的替代解决方案相比，最后一行中的产品非常慢（`double 2x2`在我的例子中，矩阵慢了大约 20%）。（使用完整矩阵的乘积，通过取消注释`m(0,1) = 1.0;`和使用`auto result = m*v`，对于`double 2x2`矩阵来说甚至更快）。

**一些替代品。**

**1）将对称矩阵存储在向量中**

您可以将矩阵存储在大小为 45 的向量中。以向量格式对 2 个矩阵求和很简单（只需对向量求和）。但是您必须为产品编写自己的实现。

这是这样一个`matrix * vector`产品（密集，固定大小）的实现，其中矩阵的下部按列存储在向量中：

```
template <typename T, size_t S>
Eigen::Matrix<T,S,1> matrixVectorTimesVector(const Eigen::Matrix<T,S*(S+1)/2,1>& m, const Eigen::Matrix<T,S,1>& v)
{
    Eigen::Matrix<T,S,1> ret(Eigen::Matrix<T,S,1>::Zero());
    int counter(0);
    for (int i=0; i<S; ++i)
    {
        ret[i] += m(counter++)*v(i);
        for (int j=i+1; j<S; ++j)
        {
            ret[i] += m(counter)*v(j);
            ret[j] += m(counter++)*v(i);
        }
    }
    return ret;
} 
```

**2）只存储三角形部分并实现自己的操作**

您当然也可以实现自己的 product `matrix * vector`，其中矩阵仅存储 45 个元素（假设我们存储下三角形部分）。这可能是最优雅的解决方案，因为它保持矩阵的格式（而不是使用表示矩阵的向量）。然后，您还可以使用本征函数，如下例所示：

```
template <typename T, size_t S>
Eigen::Matrix<T,S,S> symmMatrixPlusSymmMatrix( Eigen::Matrix<T,S,S>& m1, const Eigen::Matrix<T,S,S>& m2)
{
    Eigen::Matrix<T,S,S> ret;
    ret.template triangularView<Eigen::Lower>() = m1 + m2; // no performance gap here!
    return ret;
} 
```

在上面的函数中（2 个对称矩阵的和），只访问了 m1 和 m2 的下三角部分。请注意，`triangularView`在这种情况下不会出现性能差距（我根据我的基准确认了这一点）。

`matrix * vector`产品见下例（性能与方案一中的产品相同）。该算法只访问矩阵的下三角部分。

```
template <typename T, size_t S>
Eigen::Matrix<T,S,1> symmMatrixTimesVector(const Eigen::Matrix<T,S,S>& m, const Eigen::Matrix<T,S,1>& v)
{
    Eigen::Matrix<T,S,1> ret(Eigen::Matrix<T,S,1>::Zero());
    int counter(0);

    for (int c=0; c<S; ++c)
    {
        ret(c) += m(c,c)*v(c);
        for (int r=c+1; r<S; ++r)
        {
            ret(c) += m(r,c)*v(r);
            ret(r) += m(r,c)*v(c);
        }
    }
    return ret;
} 
```

`Matrix2d*Vector2d`在我的例子中，与使用完整矩阵（2x2 = 4 个元素）的产品相比，产品的性能增益为10%。

# excel - VBA 代码分步运行，运行时跳过文件

> ID：13403985
> 
> 赞同：1
> 
> 时间：2012-11-15T18:38:59.977
> 
> 标签：excel, vba, step-into

当我“进入”代码并将每个文件中的数据粘贴到“思科数据库”文件中时，下面的代码效果很好。但是，当我运行它时，它总是会忽略最后一个文件。我每次都添加了一个特定的行来保存数据库文件，但无济于事。有什么建议么？

```
Sub AppendDataFinal()

Dim myWorkbook As String
myDB = "CiscoDatabase.xlsx"
myWorkbook = "Cisco.xlsm"

Application.Run "'Cisco.xlsm'!importfile" //grabs all .csv files from a folder

For Each wb In Workbooks
If (wb.Name <> myWorkbook) Then wb.Activate

Columns("A:O").Select
Selection.Delete Shift:=xlUp
Columns("O:AS").Select
Selection.Delete Shift:=xlUp

Selection.CurrentRegion.Select
Selection.Copy
Workbooks.Open ("file path")
Range("A1").Select
Selection.End(xlDown).Select
ActiveCell.Offset(1, 0).Range("A1").Select
ActiveSheet.Paste , False
Range("A1").Select
If (ActiveWorkbook.Name = myDB) Then ActiveWorkbook.Save
ActiveWorkbook.Close
ActiveWorkbook.Close savechanges:=False

Next wb

Workbooks.Open ("file path and name")

Application.Run "Cisco.xlsm!DateFormat" //trims time off date row, pretties up data

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:40:09.457

使用集合的不同方法（未经测试）

```
Sub AppendDataFinal()

Const MY_DB_PATH As String = "C:\pathToYourDBHere\"
Const MY_DB As String = "CiscoDatabase.xlsx"

Dim colNames As New Collection, wbName
Dim wb As Workbook
Dim wbDB As Workbook
Dim myDB As String

    importfile  'grabs all .csv files from a folder

    For Each wb In Workbooks
        'ThisWorkbook refers to the workbook containing this code
        If wb.Name <> ThisWorkbook.Name Then colNames.Add wb.Name
    Next wb

    'open the destination workbook
    Set wbDB = Workbooks.Open(MY_DB_PATH & MY_DB)

    For Each wbName In colNames

        Set wb = Workbooks(wbName)
        With wb.Sheets(1)
            .Columns("A:O").Delete Shift:=xlUp
            .Columns("O:AS").Delete Shift:=xlUp
            .Range("A1").CurrentRegion.Copy _
                  wbDB.Sheets(1).Cells(Rows.Count, 1).End(xlUp).Offset(1, 0)
        End With
        wb.Close False
        wbDB.Save

    Next wbName

    wbDB.Activate
    DateFormat 'trims time off date row, pretties up data

End Sub 
```

# java - 如何对 docx 文件进行碎片整理以与 Apache POI 3.8 一起使用？

> ID：13403986
> 
> 赞同：0
> 
> 时间：2012-11-15T18:39:00.010
> 
> 标签：java, ms-word, apache-poi, defragmentation

我正在尝试使用 POI 3.8 查找和替换 docx 文件中的文本段落，如此处[所述](http://mail-archives.apache.org/mod_mbox/poi-user/201012.mbox/%3C1291298981596-3289423.post@n5.nabble.com%3E)。

如果我在第一次运行时插入标签，那效果很好。但是，一旦我重新打开 docx 文件并进行一些修改，Word 实际上确实会跨越文本运行片段。例如，“hello world”可能是：

`<w:r><w:t>Hello wo</w:t></w:r><w:r w:rsidR="00FB0672"><w:t>rld</w:t></w:r>`

我认为这种碎片化将是由于更改跟踪、格式和拼写检查等原因造成的。

有没有人知道如何...

a) ... 在 MS Word 中禁用此功能？

b) ... 之后以某种方式对 docx 文件进行碎片整理？

c) ... 任何其他解决方案来摆脱这种碎片化？

我已经尝试将文件保存为 .doc/.odt 并将文件重新保存为 .docx。但这些碎片仍然存在......

任何帮助都非常感谢 - 在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:36:59.753

在 Word 中，您想要并且可以关闭的功能是拼写和语法检查以及 rsid 插入。

这适用于 docx4j（我管理的一个项目），而不是 POI，但[VariablePrepare](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/model/datastorage/migration/VariablePrepare.java)向您展示了如果您无法在 Word 中阻止它，需要做什么来进行碎片整理。由于 POI 使用类似的 XML 编组/解组方法（尽管是 XML Beans，而不是 JAXB），您应该能够将该代码转换为使用 POI API。

# asp.net - ASP.NET 应用程序代码文件夹

> ID：13403989
> 
> 赞同：1
> 
> 时间：2012-11-15T18:39:09.193
> 
> 标签：asp.net, design-patterns

如果 ASP.NET 应用程序包含类，则有两种选择：1) 将类放在 appcode 文件夹中或 2) 创建单独的类库。

我发现许多网页讨论了选项 2 的好处，并且我已经意识到这些好处，例如

1) 业务逻辑层与表示层分离 2) 代码可以在多个客户端应用程序之间共享，例如 ASP.NET 网站和 VB.NET 应用程序客户端。

我找不到任何讨论选项 1 好处的网页。

我的问题是：选项 1 有什么好处吗？我是不是想太多了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:44:57.143

> 使用 App_Code 有什么好处吗？

这有点主观，但总的来说，Web 应用程序项目的扩展性比网站项目好得多。

据我所知，网站项目的唯一*好处是您可以更改 App_Code 文件而无需重新编译它们。*但是很多人（包括我自己）不喜欢这样，因为它可以在实时 Web 服务器上更改代码，这几乎总是一个坏主意。

> App_Code 还是单独的类库？

这取决于。如果您需要在多个项目中使用这些类，请创建一个单独的类库。如果您只在这个特定的网站中需要它，App_Code 是完全可以接受的。

查看[网站或 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)和[Web 应用程序项目与 Visual Studio 中的网站项目，](http://msdn.microsoft.com/en-us/library/dd547590.aspx)了解更多信息。

# performance - 分析调用其他函数的函数的性能

> ID：13403990
> 
> 赞同：2
> 
> 时间：2012-11-15T18:39:11.097
> 
> 标签：performance, r, profiling

我正在编写一个相对复杂的函数来进行从头到尾的数据分析。该函数调用了我编写的许多子函数（它们本身称为子子函数等）。我正在寻找一种工具来告诉我我的功能在每个子功能和子子功能上花费了多少时间，以便了解我应该在哪里寻找性能改进。类似于 MATLAB 的[分析器](http://www.mathworks.com/help/matlab/matlab_prog/profiling-for-improving-performance.html)的东西会很好。

例如，一个假设函数`audit`：

```
#fun1 is called by fun2
fun1 <- function() {
  rnorm(100000)
}

fun2 <- function(x) {
  y <- x+1
  z <- y*fun1()
}

mainFun <- function() {
  z+3
}

audit(mainFun())
> mainFun = 1 s; of which 95% is in fun1 and 98% is fun2 
```

显然，我可以为每个单独的功能使用`microbenchmark()`or `system.time()`- 但是随着`mainFun`变得更加复杂，有效地使用它变得很棘手。有现成的工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T18:40:34.527

谷歌搜索`R profiler`将引导您找到`Rprof`您正在寻找的功能。本质上，您`Rprof()`可以正常调用和运行脚本。该`summaryRprof`函数是总结分析器结果的一种方便的方法。有关更多详细信息，请查看[编写 R 扩展中有关](http://cran.r-project.org/doc/manuals/R-exts.html)[整理和分析 R 代码](http://cran.r-project.org/doc/manuals/R-exts.html#Tidying-and-profiling-R-code)的`?Rprof`章节，或[此链接](http://rwiki.sciviews.org/doku.php?id=tips:misc:profiling)、[此 SO 问题](https://stackoverflow.com/questions/2075327/getting-more-info-from-rprof)，甚至[这组 SO 问题](https://stackoverflow.com/questions/tagged/r+profiling)。

# ruby-on-rails - 如何链接到子域之外的路由？

> ID：13403995
> 
> 赞同：0
> 
> 时间：2012-11-15T18:39:24.633
> 
> 标签：ruby-on-rails, routes, subdomain

我的路线：

```
class ActionDispatch::Routing::Mapper
  def draw routes_name
    instance_eval(File.read(Rails.root.join('config', 'routes', "#{routes_name}.rb")))
  end 
```

**routes_a.rb**

```
root :to => 'home#index'
controller :home do
  post 'terms' 
```

**路线_b.rb**

```
root :to => 'business/dashboards#show' 
```

如果我当前在子域中，`community.website.com`并且我创建一个 link_to 如下：

```
= link_to 'Here', terms_path 
```

它返回`community.website.com/terms`而不是`website.com/terms`.

我该如何返回`website.com/terms`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:57:49.777

把它放在 routes.rb 中：

```
constraints(:host => /community.website.com/) do
  match '/terms', :to => redirect {|params, request| "http://website.com/terms"}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:42:59.820

通常我不会回答自己的问题，但我认为这会很有用：

```
terms_url(host: request.domain) 
```

Where`host: request.domain` 删除子域引用。