# StackOverflow 问答 15788000-15788999

# swing - UISpec4J 在触发完成之前捕获模态对话框

> ID：15788000
> 
> 赞同：1
> 
> 时间：2013-04-03T12:57:38.250
> 
> 标签：swing, testing, junit, uispec4j

我有一些代码，其中显示了一个带有两个文本框和两个按钮的对话框（如确定和取消，典型的登录窗口）。“.setVisible(true)”之后的主代码的执行取决于在该模式窗口中输入的值。

我现在面临的问题是，如果我这样做：

```
 WindowInterceptor.init(new Trigger() {
            @Override
            public void run() throws Exception {
                LoginModal loginWin=new LoginModal();
                loginWin.setVisible(true);
                if(loginWin.getPassword().equals("any")) {
                    System.out.println("password OK!");
                }
            }
        }).process(new WindowHandler() {
            @Override
            public Trigger process(Window window) {
                System.out.println("triggered!");
            }
        }).run(); 
```

然后，密码永远不会正确，因为在触发器未完成之前不会调用处理程序。我希望它在我调用 setVisible(true) 时被调用，因为否则，我无法根据窗口处理程序输入的内容运行我的“触发器”。

测试这个的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:01:02.570

这似乎是 UISpec4J 和 Java 1.6u38 的问题，使用 1.6u37 可以正常工作。

例如，使用这个简单的代码：

```
 WindowInterceptor.init(new Trigger() {

        @Override
        public void run() throws Exception {
            String myValue=JOptionPane.showInputDialog("thisssss");
            System.out.println("value " + myValue);
        }
    }).process(new WindowHandler() {
        @Override
        public Trigger process(Window window) {
            System.out.println("tal tal");
            return null
        }
    }).run(); 
```

myValue 始终为空，并且我的处理程序从未触发。同样，在 1.6u37 中它工作正常。

# wordpress - 在 Wordpress 中，有没有办法在页面中显示单个帖子，以便页面的永久链接部分保留在 URL 中？

> ID：15788002
> 
> 赞同：0
> 
> 时间：2013-04-03T12:57:42.563
> 
> 标签：wordpress

所以我有一个名为*events*的页面，其中列出了*events*类别的帖子。

这个页面的永久链接是这样的

```
 domain.com/en/events/ 
```

当我点击该页面上的帖子链接时，永久链接更改为

```
domain.com/en/post-title/ 
```

但我希望它是

```
 domain.com/en/events/post-title/ 
```

无论如何要做到这一点？

**更新：**

我想如果我将这些帖子的**事件**页面设为父级，我可以实现上述目标，但我不确定这是否可能？为父母发布一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:31:02.297

[对于这种情况，这](http://wordpress.org/extend/plugins/custom-permalinks/)是一个很好的[插件](http://wordpress.org/extend/plugins/custom-permalinks/) 。但是，您必须在每个管理帖子部分手动更改帖子的永久链接。见下图：

![在此处输入图像描述](https://i.stack.imgur.com/iyaAb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:13:30.797

在永久链接结构中设置如下： domain.com/%category%/post-name/%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:58:46.673

我想我找到了解决方案。我在这里发布它，以便它可以帮助其他有同样问题的人。

我发现[这篇文章](http://www.gravitationalfx.com/how-to-set-a-page-as-the-parent-of-a-wordpress-custom-post-type/)解释了如何实现我想要的。

需要做的是将该**事件**页面设置为 WordPress 自定义帖子类型的父级，然后需要重写来自服务器根目录的 URL slug 以包含路径 /events/

# pentaho - 如何使用字段而不是变量作为蒙德里安输入步骤的 MDX 查询？

> ID：15788003
> 
> 赞同：1
> 
> 时间：2013-04-03T12:57:44.303
> 
> 标签：pentaho, kettle

我有一个 PDI 转换，它以“从结果中获取行”步骤开始。每一行都包含一个以 MDX 命令作为其值的字段。我正在使用“蒙德里安输入”步骤并希望在 MDX 查询区域中使用该字段，但似乎值替换仅适用于变量（而非字段）。

有谁知道我如何在那里使用字段而不是变量？有没有办法将字段的值作为转换中的变量获取？

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:38:49.893

看起来这不是立即可行的。这是一个潜在的解决方法：

获取您的字段并将它们组合成一个字符串，该字符串的格式类似于 MDX 语法中的值数组，并将其存储在一个变量中。然后在 Mondrian 输入步骤中访问此变量以获取值。

如果您不熟悉在 Kettle 中使用变量，则需要在使用之前设置变量。之前我的意思是在转换或作业步骤中，保证在包含您的蒙德里安输入步骤的转换之前运行。由于转换中的无序执行，您将无法在与 Mondrian 输入步骤相同的转换中设置变量并可靠地取回值。

# c++ - 地址已在使用中... C 中的套接字

> ID：15788007
> 
> 赞同：0
> 
> 时间：2013-04-03T12:57:52.517
> 
> 标签：c++, linux, sockets

以前有人问过这个问题，但我似乎无法理解它，因为我见过的所有问题的小细节都让我感到厌烦......

我一直遇到问题，当我创建 TCP 套接字服务器时，如果我建立连接，端口在 X 时间内无法使用（如果未与客户端建立连接，我可以在终止后重新运行程序而不会出现问题） . 这显然与 TCP 在断开连接之前需要的超时有关。

我在服务器和客户端的套接字上都使用 close(socketfd) 没有占上风...有没有办法让套接字在成功终止后立即可用（如在 fd 上调用 close）而无需等待什么似乎永远或重新启动机器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:01:30.150

是的，调用了相关的套接字选项[`SO_REUSEADDR`](http://linux.die.net/man/7/socket)。您用于[`setsockopt()`](http://linux.die.net/man/2/setsockopt)设置套接字选项。

但是，您通常不应该关闭服务器的主套接字，而是应该使用[`accept()`](http://linux.die.net/man/2/setsockopt)创建每个客户端的套接字，当客户端断开连接时可以关闭该套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:01:16.737

套接字在关闭后可以停留在 TIME_WAIT 状态一段时间。能够在此状态集中重用套接字`SO_REUSEADDR`

# linq - Linq：运算符“/”不能应用于“对象”和“对象”类型的操作数

> ID：15788011
> 
> 赞同：0
> 
> 时间：2013-04-03T12:58:03.273
> 
> 标签：linq

我想将一个值与另一个值相除。公式是这样的

if (Job2 =0, 0, Job2/Job1) 我写的代码是：

```
 double empJob1Count = empYearMonthGroup
     .Where(x => x.Row["Job2"] != DBNull.Value)
     .Sum(x => x.Row.Field<double>("Job2")/ x => x.Row.Field<double>("Job1")); 
```

但是出现错误，运算符'/'不能应用于'object'和'object'类型的操作数。请建议如何使用 linq c# 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:59:56.663

您已经`x`在结果选择器中有参数。这是正确的语法：

```
double empJob1Count = empYearMonthGroup
     .Where(x => x.Row["Job2"] != DBNull.Value)
     .Sum(x => x.Row.Field<double>("Job2") / x.Row.Field<double>("Job1")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:07:31.843

您可以使用`Field`支持可为空类型的扩展方法：

```
double empJob1Count = empYearMonthGroup
    .Where(x => x.Row.Field<double?>("Job2").HasValue)
    .Sum(x => x.Row.Field<double?>("Job2").Value / x.Row.Field<double>("Job1")); 
```

但是，您的代码中的问题是第二个`x =>`.

# drupal-6 - 需要 drupal 6 中的可滚动视图

> ID：15788018
> 
> 赞同：0
> 
> 时间：2013-04-03T12:58:16.813
> 
> 标签：drupal-6, scroll, drupal-views

我想创建一个带有可滚动内容的视图。我使用谷歌搜索并找到了这个：[http](http://drupal.org/project/scrollable) ://drupal.org/project/scrollable 但它被放弃了。

有没有类似的东西？我使用 Drupal 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:48:50.297

还有其他可用的模块，例如，

```
http://drupal.org/project/scrollable_content
http://drupal.org/project/views_infinite_scroll
http://drupal.org/project/infinitescroll 
```

# checkbox - 获取 Telerik Grid 复选框值

> ID：15788021
> 
> 赞同：0
> 
> 时间：2013-04-03T12:58:19.467
> 
> 标签：checkbox, telerik, grid

我无法在 JQuery 警报中获取 Telerik Grid 复选框值

我的查看代码：

```
@( Html.Telerik().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
    columns.Bound(o => o.id)
.Template(@<text><input type='checkbox' name='checkedRecords' value='<#=id #>' /></text>)
  .Title("Select")
   .Width(50)
   .HtmlAttributes(new { style = "text-align:center" });
   columns.Bound(o => o.Name);
})
)

<p>
<button class="t-button t-state-default" onclick="displayCheckedOrders()">Display checked orders</button>
<script type="text/javascript">

    function displayCheckedOrders() {
        var $checkedRecords = $('input[name=checkedRecords]:checked');
        alert($checkedRecords[0].value);
        alert($checkedRecords[1].value);
 };
</script>
</p> 
```

我检查了前两行复选框，然后单击了按钮。
在警报消息中，我得到的不是像 1, 2,3 这样的值，而是 <#=id #>

如何在警报消息中获取复选框的确切绑定值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:39:41.427

尝试这个：

```
<% Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns => 
        {
            columns.Template(o => {
            %>
            <input type="checkbox" name="checkedRecords" value="<%= o.id %>"  />
            <%
            })
            .Title("Select")
            .Width(50)
            .HtmlAttributes(new { style = "text-align:center" });
            columns.Bound(o => o.id);
        })
        .Render();
 %> 
```

参考：[http ://demos.telerik.com/aspnet-mvc/razor/grid/templatesserverside](http://demos.telerik.com/aspnet-mvc/razor/grid/templatesserverside)

# ios - 在我的 UITableView 中选择一个单元格时，选择似乎是随机的

> ID：15788024
> 
> 赞同：2
> 
> 时间：2013-04-03T12:58:27.340
> 
> 标签：ios, objective-c, uitableview

我有一个以编程方式创建的 UITableView 以及单元格，它显示了一个字体列表，用户可以从中选择以更改他们阅读的字体。但是，在点击表格视图中的单元格时，与委托一起返回的字体系列不是单元格中显示的字体。点击“Times New Roman”一分钟会将其更改为 Helvetica，然后将其更改为 Baskerville。

以下是相关代码：

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Depending on which row (font) they selected, use the delegate to change the
    // reading text to that font
    switch (indexPath.row) {
        case 0:
            [self.delegate changeFontTo:@"Helvetica"];
            break;
        case 1:
            [self.delegate changeFontTo:@"Times New Roman"];
            break;
        case 2:
            [self.delegate changeFontTo:@"Baskerville"];
            break;
        case 3:
            [self.delegate changeFontTo:@"OpenDyslexic"];
            break;
    }
} 
```

和委托方法：

```
- (void)changeFontTo:(NSString *)fontFamily {
    self.textToReadLabel.font = [UIFont fontWithName:fontFamily size:self.textToReadLabel.font.pointSize];
} 
```

如果有帮助，这里是用于创建行的 UITableView 委托方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"FontCell";

    FontCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    int row = indexPath.row;

    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    cell.fontFamilyLabel.text = self.fonts[row];

    if ([self.fonts[row] isEqualToString:@"Helvetica"]) {
        cell.fontFamilyLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
    }
    else if ([self.fonts[row] isEqualToString:@"Times New Roman"]) {
        cell.fontFamilyLabel.font = [UIFont fontWithName:@"Times New Roman" size:17.0];
    }
    else if ([self.fonts[row] isEqualToString:@"Baskerville"]) {
        cell.fontFamilyLabel.font = [UIFont fontWithName:@"Baskerville" size:17.0];
    }
    else if ([self.fonts[row] isEqualToString:@"Dyslexic"]) {
        cell.fontFamilyLabel.font = [UIFont fontWithName:@"OpenDyslexic" size:17.0];
    }

    return cell;
} 
```

真的很困惑它可能是什么。我对代码感到困惑和困惑，但我觉得这可能只是一个我不明白的概念导致了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:02:10.490

您使用`didDeselectRowAtIndexPath`而不是`didSelectRowAtIndexPath`在您的委托中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:04:38.273

检查您期望的“didSelect”的方法名称是否可能以某种方式意外地得到“didDeselect”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:06:43.393

似乎您使用的是 didDeselect 而不是 didSelect。

# javascript - 使用 html div 和 javascript 隐藏字段

> ID：15788025
> 
> 赞同：1
> 
> 时间：2013-04-03T12:58:27.353
> 
> 标签：javascript, html

我对 Javascript 非常陌生，但希望有人能就以下问题提出建议。我有以下 div 类，如果缺少 {retreat_dates} 字段，部分要求是隐藏整个 div 及其所有子 h2 字段，有人可以指出我正确的方向吗？

```
 <div class="grid_3 retreatextradetails">

        <h2>Retreat dates</h2>
        <p>
        {retreat_dates}{date}<br />{/retreat_dates} 
        </p>
        <div class="hr"></div>
        <h2>Age range</h2>
        <p>{retreat_age}</p>

        <div class="hr"></div>

        <h2>Fitness level</h2>
        <p>{retreat_fitness}</p>

        <div class="hr"></div>

        <h2>No. of places</h2>
        <p>{retreat_places}</p>

        <div class="hr"></div>

        <h2>Retreat Prices</h2>
        <table>
        {retreat_prices}
        <tr>
            <td class="cell_title">{description}</td>
            <td class="price">{price}></td>
        </tr>
        {/retreat_prices}
        </table>
    </div> 
```

这是我正在使用的相应javascript，但它不起作用：

```
</script>
$("#filterTextBox").on("keyup", function () {
    var search = this.value;
    $(".grid_3 retreatextradetails").show().filter(function () {
        return $(".retreat_dates", this).text().indexOf(search) < 0;
    }).hide();        
});
<script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:49:20.330

您可以在尝试后在 javascript 文件中添加函数。

```
$('.retreatextradetails').find("h2").each(function() {
    if($(this).next('p').html().trim().indexOf("{retreat_dates}")==-1){
        $(this).hide();
        $(this).next('p').hide();
        $(this).next('div').hide();

    }

}); 
```

希望对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:17:35.200

因为您可以使用 jquery，所以我会执行以下操作：

给持有日期的 p 某种类名 - 例如`<p class="rdates">`

然后您可以在准备好的文档上使用以下jquery

```
$('.retreatextradetails').each(function() {
    if ($(this).children('.rdates:eq(0)').text().trim() == "") {
       $(this).hide(); 
    }
}); 
```

[http://jsfiddle.net/UtS6v/](http://jsfiddle.net/UtS6v/)

**更新**

我已更改答案以匹配您提供的 js

```
$('#filterBox').keyup(function() {
    var search = $(this).val();
    $('.retreatextradetails').hide();
    $('.rdates:contains("' + search + '")').each(function() {
        $(this).parent().show();
    });
}); 
```

[http://jsfiddle.net/UtS6v/4/](http://jsfiddle.net/UtS6v/4/)

使用 p 选择器将两者混合：http: [//jsfiddle.net/UtS6v/6/](http://jsfiddle.net/UtS6v/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:37:50.690

让我们从部分开始。

1.  要在 jQuery 中隐藏一个 DOM 元素，请使用 .hide()，再次显示它 .show() 所以 $("yourSelector").hide() 应该隐藏“yourSelector”找到的所有元素

2.  选择器是jQuery中最强大的工具，你应该掌握它们

3.  您可以使用[jquery-debugger 之](https://chrome.google.com/webstore/detail/jquery-debugger/dbhhnnnpaeobfddmlalhnehgclcmjimi)类的工具（一个 chrome 开发工具扩展，它允许您在任何带有 jQ​​uery 的页面中尝试您的选择器）

4.  最后一个示例似乎与您需要的非常相似，如果您需要其他内容，请询问，我会尽力提供帮助。

# asp.net-mvc - MVC 禁用提交按钮，直到表单验证

> ID：15788032
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:59:01.903
> 
> 标签：asp.net-mvc

我是 MVC4 的新手。谁能告诉我如何禁用提交按钮，直到表单没有通过验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:05:07.877

为此 - 您应该进行客户端验证，因为服务器端验证在按下提交按钮*后运行。*因此，实现您的客户端验证并使用 jQuery 显示/隐藏提交按钮，如下所示：

```
$(document).ready(function() {
    if (validate()) {
        $('#your-submit-button-id').show();
    }
    else {
        $('#your-submit-button-id').hide();
    }
}); 
```

并使用按键事件实现您的验证（例如）

# visual-studio-2012 - Visual Studio 导航栏停止填充某些 TypeScript 文件

> ID：15788033
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:02.840
> 
> 标签：visual-studio-2012, typescript

在我的应用程序生命中的某个时刻，不确定何时，导航栏停止填充。我没有看到任何输出到 JavaScript 语言服务或任何其他地方表明原因。`F12`像之前一样跳转到定义，并且`CTRL`+ `M`**、**`CTRL` +`O`和`CTRL`+ `M`**、**`CTRL` +`P`切换方法按预期折叠。

什么可能导致此问题？有什么办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:23:16.287

`export`在 0.8.3 / 0.8.3.1 中存在一个问题，如果您在外部模块（即具有顶级或的文件）中，导航栏将不起作用`import`。

# c++ - C++ 访问整个 dll 中的映射文件

> ID：15788036
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:15.310
> 
> 标签：c++, global-variables

我想映射一个文件并在整个 dll 中使用它。dll 由几个相互链接的类组成。

例如 startclass.someclass.someotherclass

someotherclass 也应该能够访问映射文件。我将文件映射到“startclass”中。

为了也从“someotherclass”中访问映射文件，我在我的项目中添加了一个名为“global.cpp”的新类。

在“global.h”中我已经说过

```
 HANDLE                  m_hVoiceData;
    void*                   m_pVoiceData; 
```

现在在“someotherclass”中，我想访问映射文件。所以我说

```
#include "global.h" 
```

但是当我现在尝试从“someotherclass”中执行以下操作时......

```
memcpy(nEncodedBytes,(void*)m_pVoiceData[iFirstByteToRead], iLenCompressedBytes); 
```

....编译器告诉我“表达式需要是指向已完成对象类型的指针”。

有人可以告诉我哪里出错或如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:04:18.077

您不能索引到`void *`. 相反，您将需要使用`char *m_pVoiceData`( 而`m_pVoiceData = reinterpret_cast<char *>(stuff);`不是`m_pVoiceData = stuff;`您的数据被映射的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:07:58.703

由于`m_pVoiceData`已经是一个 void 指针，因此强制转换`(void*)m_pVoiceData[iFirstByteToRead]`是多余的。但是，正如 Mats Petersson 所解释的，您不能索引到`void*`.

您可以更改`m_pVoiceData`为 char* 然后使用

```
memcpy(nEncodedBytes,(void*)(&m_pVoiceData[iFirstByteToRead]),iLenCompressedBytes)  // the cast to void is now required 
```

或者，如果您无法更改此标头，请使用

```
memcpy(nEncodedBytes, &((char*)(pVoiceData))[iFirstByteToRead],iLenCompressedBytes); 
```

# c++ - UnsatisfiedlinkError：Java（JNI）中未定义的符号_ZN5boost6system16generic_categoryEv

> ID：15788037
> 
> 赞同：4
> 
> 时间：2013-04-03T12:59:22.000
> 
> 标签：c++, boost, linker, java-native-interface

我创建了一个 .so 文件，其中我根本不使用 boost 库（当然之前我使用过它），但后来我切换到 pthreads 并从 makefile 中删除了所有头文件和 boost .so 文件链接。

java 文件已成功编译。但是，当我尝试使用

`java -Djava.library.path=libs/ -cp build/ Send`

它给了我以下错误。

`Exception in thread "main" java.lang.UnsatisfiedLinkError: /home/aahmed/libplxmsg-java/libs/libplxmsgjavaasyncbinder.so: /home/aahmed/libplxmsg-java/libs/libplxmsgjavaasyncbinder.so: undefined symbol: _ZN5boost6system16generic_categoryEv`

我确信我没有使用任何与 boost 相关的库或头文件。甚至 .so 文件的链接也正确给出。

## 编辑

在正在加载`nm`的文件上执行。`.so`小剪了那个。

`00000000002044d8 b _ZN5boost6system10errno_ecatE 00000000002044e0 b _ZN5boost6system11native_ecatE 00000000000031a0 W _ZN5boost6system12system_errorD0Ev 00000000000033a0 W _ZN5boost6system12system_errorD1Ev 0000000000003180 W _ZN5boost6system14error_categoryD0Ev 0000000000003050 W _ZN5boost6system14error_categoryD1Ev 00000000002044d0 b _ZN5boost6system14posix_categoryE U _ZN5boost6system15system_categoryEv U _ZN5boost6system16generic_categoryEv 0000000000003060 W _ZN7JNIEnv_14CallVoidMethodEP8_jobjectP10_jmethodIDz 00000000000030f0 W _ZN7JNIEnv_9NewObjectEP7_jclassP10_jmethodIDz U _ZN9__gnu_cxx18__exchange_and_addEPVii@@GLIBCXX_3.4 0000000000003240 W _ZNK5boost6system12system_error4whatEv 0000000000003030 W _ZNK5boost6system14error_category10equivalentERKNS0_10error_codeEi 0000000000002fe0 W _ZNK5boost6system14error_category10equivalentEiRKNS0_15error_conditionE 0000000000002fd0 W _ZNK5boost6system14error_category23default_error_conditionEi`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-25T18:54:37.047

确保创建您的共享库（从 Java 中使用的库），以便与 boost 链接。例如：

```
g++ -g -shared -fpic -L$(BOOST)/lib \
-lboost_system -I$(JAVA_HOME)/include \
-I$(JAVA_HOME)/include/linux \
your_code.c -o libyourcode.so 
```

这样，您的 JNI 代码将与 boost 正确链接。

# mysql - SELECT 查询以唯一键顺序返回结果

> ID：15788038
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:26.280
> 
> 标签：mysql

我今天遇到了一个有趣的行为/问题。
每次我在我的表上开始查询时，我都会得到按唯一键而不是主键排序的结果。

我的表格列：

```
id (PRIMARY KEY),  
name (UNIQUE KEY) 
```

但是，如果我添加另一个正常列，它会再次开始正常运行。
有人可以解释一下和/或给我一个提示如何关闭它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:15:46.177

MySQL 本身似乎没有这方面的文档，但我确实找到了这个： http://forums.mysql.com/read.php?21,239471,239688#msg- [239688](http://forums.mysql.com/read.php?21,239471,239688#msg-239688)

本质上，如果您不指定`ORDER BY`，则不应相信以任何特定顺序返回的数据。默认排序行为也因引擎而异。

不要依赖没有`ORDER BY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:16:24.667

无法保证 MySQL 返回行的顺序。它取决于 MySQL 版本、存储引擎、存储引擎版本。请查看以下链接了解更多详情

[MySQL中的默认记录顺序](https://dba.stackexchange.com/questions/6051/what-is-the-default-order-of-records-for-a-select-statement-in-mysql)

# java - Google App Engine 是否有可能访问 Google App Script 等外部数据库

> ID：15788043
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:33.763
> 
> 标签：java, google-app-engine, jdbc, google-apps-script

我尝试了允许开发人员访问外部数据库的 google app 脚本

GAE 和 App 脚本都是 google 的产品。

很久以前就被告知GAE无法连接到外部数据库

我想知道谷歌在启动谷歌云 sql 后是否改变了主意（我想抱怨为什么他们没有免费套餐）

如果他们没有在 GAE 中提供 JDBC 连接，而是在 Google App Script 中提供，那会很奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:02:35.067

这并不奇怪，它的设计是因为 appengine 只使用 http (s) 端口。不禁止您这样做，只需编写一个基于 http 的服务来将您的 sql 包装到您想要的任何地方。Google cloud sql 还有一个免费的介绍性试用版。我怀疑他们是否会提供永久免费的 sql。

# java - Java 从提供的索引中检索列表有效负载

> ID：15788045
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:37.620
> 
> 标签：java, data-structures, nodes

我正在创建一个链接列表，并且试图弄清楚如何编写一个方法来返回特定索引的节点有效负载。向量如何具有 get(int index) 我想实现类似的东西。此外，有了这个功能，我也可以轻松地拥有一个 add(int index, e Element) ，这对于循环双向链表将非常方便。

在我的 DynamicNode 文件中，我以这种方式实现了它：

```
 public class DynamicNode {
    private Object info;
    private DynamicNode next, previous;
    private int position;

    public DynamicNode(Object x) {
        info = x;
    }

    public Object getInfo() {
        return info;
    }

    public DynamicNode getNext() {
        return next;
    }

    public DynamicNode getPrevious() {
        return previous;
    }

    public int getPosition() {
        return position;
    }

    public void setInfo(Object x) {
        info = x;
    }

    public void setNext(DynamicNode n) {
        next = n;
    }

    public void setPrevious(DynamicNode m) {
        previous = m;
    }

    public void setPosition(int x) {
        position = x;
    }
} 
```

我的 LinkedList.java 文件中有一个计数器，它递增和递减节点数，以便传递索引。

我认为 get(int index) 语句可行的唯一方法是在 get 方法中运行一个循环来检查节点的索引，当正确的索引匹配时，它返回与节点关联的信息，但是这似乎是一个非常密集的过程。

在此先感谢您，如果您需要更多信息，请发布，我会尽力填补空白。

我的插入方法

```
public void insert(DynamicNode node) {
        //set node's previous node to the last node entered
        node.setPrevious(last);

        //set previous node's next to node
        last.setNext(node);

        //set node's next to first node
        node.setNext(first);

        //increase numNodes pool
        numNodes++;

        //sets new last node 
        last = node;

        //sets node position
        node.setPosition(numNodes);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:07:24.273

这是链表的主要缺点：对于由数组支持的列表，按索引进行随机访问是 O(n) 而不是 O(1)。他们就是这样工作的。

您可以通过使用跳过列表使事情变得更好，但它会使事情变得更复杂，并且需要更多的内存。

请注意，在每个节点中存储索引会使情况变得更糟，因为在第一个索引处插入一个节点，应该是 O(1) 没有存储索引，但会变成 O(n) 索引，因为你需要访问每个节点列表以增加其索引。通过存储此索引，您基本上从链表和数组列表中获取了最糟糕的部分。

你为什么要实现一个链表，而不是使用标准`java.util.LinkedList`？

# oracle - 每个项目明智计数

> ID：15788046
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:59:42.867
> 
> 标签：oracle

我在表 emp 中有 2 列工作和部门。

```
工作部门
------------------------------------------
经理会计
总裁会计
经理会计
文员会计
经理会计
经理会计
经理会计
文员会计
分析师会计
安全会计
安全会计
文员会计
分析师会计
安全会计

```

我需要提取如下数据

```
状态 status_numbers 状态 status_numbers
-------------------------------------------------- ----------------------------
总计 14 总计 14
经理 5 经理 5
总统 1 总统 1
职员 3 职员 3
分析师 2 分析师 2
安全 3 安全 3

```

这里 status 和 status_numbers 列需要重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:09:04.887

您可以使用 a`rollup`来执行此操作：

```
select coalesce(job, 'Total') status, count(*) status_numbers,
       coalesce(job, 'Total') status2, count(*) status_numbers2
  from jobs
 group by rollup(job)
 order by grouping_id(job) desc; 
```

例如：[http ://sqlfiddle.com/#!4/8d825/1](http://sqlfiddle.com/#!4/8d825/1)

# python - 用于检测添加的 Python 正则表达式

> ID：15788047
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:48.907
> 
> 标签：python, regex

我有一个可能是这样的字符串：

```
50W
800W+25W
30W+50W+2W 
```

我想检查当前字符串是否匹配并提取这些数值。

实际上，我已经这样做了：

```
re.compile("^(\d+W\+)*(\d+W)$") 
```

问题是，如果我使用星 *，它总是得到第一组的第一个元素（例如，`50W+20W+30W`我得到`["50W+", "30W"]`（我正在使用`re.findall`）

我不知道如何获取所有组以及如何直接从正则表达式中去除“W”和“+”字符（也许我应该使用`re.split`？）。

**编辑1-**我不知道字符串是否是这样的：我必须先检查，然后才能提取数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:01:43.147

不要使用正则表达式来提取这些值。

```
In [1]: [int(e[:-1]) for e in "30W+50W+2W".split('+')]
Out[1]: [30, 50, 2]

In [2]: [int(e[:-1]) for e in "800W+25W".split('+')]
Out[2]: [800, 25]

In [3]: [int(e[:-1]) for e in "50W".split('+')]
Out[3]: [50] 
```

您可能想使用正则表达式来检查字符串是否与此模式匹配，但我们对您的情况知之甚少。

您可以使用积极的前瞻来搜索后跟的数字`W`：

```
In [16]: re.findall('\d+(?=W)', '30W+50W+2W')
Out[16]: ['30', '50', '2']

In [17]: re.findall('\d+(?=W)', '30W+50W')
Out[17]: ['30', '50']

In [18]: re.findall('\d+(?=W)', '30W')
Out[18]: ['30'] 
```

您无法检查字符串是否严格`^(\d+W\+)*(\d+W)$` *并*提取这些数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:02:42.067

在我看来，使用`split()`是一种更好的方法。

```
In [1]: '50W'.split('+')
Out[1]: ['50W']

In [2]: '800W+25W'.split('+')
Out[2]: ['800W', '25W']

In [3]: '30W+50W+2W'.split('+')
Out[3]: ['30W', '50W', '2W'] 
```

如果`W`要从每个列表条目中删除字符，只需使用切片并将结果字符串转换为整数：

```
In [4]: int('30W'[:-1])
Out[4]: 30 
```

为了检查一个字符串是否是这种格式，你可以使用这个简单的正则表达式：

```
In [5]: pattern = re.compile(r'^\d+W(?:\+\d+W)*$') 
```

总而言之，我会这样做：

```
In [6]: vals = ['50W', '800W+25W', '30W+50W+2W', '80W3000W2675W']

In [7]: for val in vals:
  ....:     if pattern.match(val):
  ....:         numbers = val.split('+')
  ....:         print [int(num[:-1]) for num in numbers]
[50]
[800, 25]
[30, 50, 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:39:09.213

如果你喜欢 python 中的函数式编程，你可以使用

```
>>> newlist = ['50W', '800W+25W', '30W+50W+2W', '80W3000W2675W']
>>> map(lambda x: re.findall(r"(\d+)W", x), 
        filter(lambda x: re.match('^\d+W(\+\d+W)*$',x), newlist))
[['50'], ['800', '25'], ['30', '50', '2']] 
```

# php - 用 php 识别 '§'

> ID：15788049
> 
> 赞同：0
> 
> 时间：2013-04-03T12:59:52.483
> 
> 标签：php, string, escaping, explode

我有一个字符串，我想使用字符 '§' 将它们转换为数组：

```
<?php
$string="element1§element2§element3";
$array=explode("&sect;",$string); //tried also &#167; and §,double and single quotes
print_r($array);
?> 
```

输出总是这样：

```
Array ( [0] =>element1§element2§element3) 
```

如何让 php 识别“§”符号以便将字符串拆分为数组？

编辑：我使用 file() 函数从文件中获取字符串并通过 foreach 迭代数组。如果我使用我自己的示例，它可以工作，但对于外部文件则不行。

我的字符串的 rowurlencode() 如下：

`element1%A7element2%A7element3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:08:36.213

非常适合我

```
ini_set('default.charset', 'UTF-8');
header('Content-type: text/html;charset=UTF8');

$string="element1§element2§element3";
$array=explode("§",$string);

print_r($array); //Array ( [0] => element1 [1] => element2 [2] => element3 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:06:30.303

rawurlencode 您的字符串以查看该字符的**实际**代码。

然后将此代码用作分隔符

```
$array=explode("\xA7",$string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:05:31.397

如果您从字面上使用：

```
<?php
  $string="element1§element2§element3";
  $array=explode("§",$string);
  print_r($array);
?> 
```

这将起作用。我的猜测是，在您的情况下，`$string`它来自不同的来源，并且与您的 PHP 文件的字符编码不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:52:01.537

感谢您的常识，我找到了答案。简单地说，我像这样改变我的 explode() 函数：

```
$array=explode("%A7",rawurlencode($string)); 
```

其中“%A7”是“§”的原始代码。

# c# - 如何创建持久唯一的 MD5 哈希

> ID：15788055
> 
> 赞同：1
> 
> 时间：2013-04-03T13:00:03.313
> 
> 标签：c#, hash, md5, unique

我想如果我使用默认的 MD5 函数，那将在不同的应用程序中为相同的字符串创建相同的哈希

所以我想以某种方式定义一个预静态值，将其提供给 MD5 函数，并使这些生成的结果使我的应用程序独一无二。

这个静态值永远不会在我的应用程序中改变，所以它总是会为我的应用程序中的相同字符串生成相同的哈希值

但是如果另一个应用程序使用默认的 MD5，他们将不会得到相同的 MD5 哈希值

我怎么能用 c# 5 做到这一点？网

我有以下功能

```
public static string ConvertStringtoMD5(string strword)
{
    MD5 md5 = MD5.Create();
    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(strword);
    byte[] hash = md5.ComputeHash(inputBytes);
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < hash.Length; i++)
    {
        sb.Append(hash[i].ToString("x2"));
    }
    return sb.ToString();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:01:43.520

为您的应用程序创建一个唯一的 GUID，将其添加到您想要散列的数据（在散列之前），然后执行散列。

它仍然是一个 MD5 哈希，并且对于您的应用程序来说是唯一的。

但是，如果您将来需要验证哈希，请务必添加与以前相同的 GUID。

```
 private const string _myGUID = "{C05ACA39-C810-4DD1-B138-41603713DD8A}";
    public static string ConvertStringtoMD5(string strword)
    {
        MD5 md5 = MD5.Create();
        byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(_myGUID + strword);
        byte[] hash = md5.ComputeHash(inputBytes);
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hash.Length; i++)
        {
            sb.Append(hash[i].ToString("x2"));
        }
        return sb.ToString();
    } 
```

# netty - 如何在 webapp 中使用 netty 进行永久 TCP 远程连接？

> ID：15788067
> 
> 赞同：0
> 
> 时间：2013-04-03T13:00:38.120
> 
> 标签：netty, ejb-3.1

由于一些遗留需求，我们需要为遗留系统保留一个开放的 TCP 套接字，并与它异步交换一些消息。我们有一个接收来自网络的请求的 web 应用程序，目前还有一个单独的 Java 应用程序，其中包括进行遗留通信的 Netty。

我们现在想以某种方式将 Netty 直接嵌入到 webapp 包中，以便在 webapp 运行时启动套接字，以便 webapp（或 EJB）与 netty 通道等交互。

你知道怎么做吗？

所以我希望完成的是丢弃我们现在用于将网络/遗留部分功能与面向 Web 的功能集成的 JMS 队列，换句话说，我希望显着简化架构，以便只使用 webapp+EJB ，但不是 JMS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:02:48.580

假设您运行的 Servlet 容器没有`SecurityManager`配置，您可以将 Netty 应用程序作为 Web 应用程序的一部分启动。

首先，编写一个`ServletContextListener`在 Servlet 容器启动或停止 Web 应用程序时通知的实现。您可以在那里启动和停止您的 Netty 应用程序。您还应该更新`web.xml`Servlet 容器来获取它。

要使 Netty 应用程序与您的 Web 应用程序交互（例如，通过 Netty 应用程序向遗留系统发送消息），您必须将您的 Netty 应用程序公开给您的 Web 应用程序。这通常通过单例来完成。

因为 Netty 中的每个操作都是异步的，所以您可能会在 Web 应用程序和 Netty 应用程序之间遇到一些“阻抗不匹配”。通常，Web 应用程序会要求 Netty 应用程序向遗留系统发送请求，并等待 Netty 应用程序在收到来自遗留系统的响应时发出通知。

为了处理这种场景，通常可以使用这样的数据结构`BlockingQueue`——发送请求后，Web 应用程序会一直等待，直到队列有元素，Netty 应用程序会将响应对象添加到队列中以通知 Web 应用程序。

如果您使用的是 Netty 4，您可能想看看这些`io.netty.util.concurrent.Future/Promise`类对于这种情况也是非常有用的构造。

# objective-c - ipad相机全屏：隐藏状态栏：返回：mainViewController高度增加20 px

> ID：15788068
> 
> 赞同：0
> 
> 时间：2013-04-03T13:00:42.833
> 
> 标签：objective-c, ipad, ios5

我的应用程序是横向（左右）模式应用程序。

我正在以全屏模式打开相机。步骤 1\. 打开相机（然后隐藏状态栏）和 mainviewController 高度增加 20px 2\. 旋转设备（从右到左，反之亦然） 3\. 关闭相机（然后状态栏回来）

top 20px pmainviewController 被状态栏覆盖。**（这是我的问题）**

如果再次旋转设备，则视图高度变得正确。

有什么方法可以重置 ViewController

**带状态栏的实际主视图控制器** ![带状态栏的实际主视图控制器](https://i.stack.imgur.com/0x0KX.png)

**带有状态栏的相机后的主视图控制器** ![带有状态栏的相机后的主视图控制器](https://i.stack.imgur.com/PAbkc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T15:25:13.513

在显示您的相机界面之前，您可以隐藏状态栏。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:YES];
[self presentViewController:picker animated:YES completion:nil]; 
```

然后，当采摘者被解雇时，再次显示状态栏。

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:NO]; 
```

# java-me - 为特定的记录库添加记录时，它也会添加到另一个记录库！？

> ID：15788073
> 
> 赞同：2
> 
> 时间：2013-04-03T13:00:59.727
> 
> 标签：java-me, lwuit, rms

我有一个 LWUIT 应用程序，它涉及两个 RecordStores player1_recordStore 和

玩家2_recordStore 。两种方法方法 SearchCarded_team1 用于检索所有记录

player1_recordStore 和方法 SearchCarded_team2 用于检索所有记录

玩家2_recordStore 。4 个按钮 b1 用于向 player1_recordStore 添加新记录，b2 用于添加新记录

记录到 player2_recordStore ， b3 检索 player1_recordStore 和 b4 的所有记录

检索 player2_recordStore 的所有记录。

我的申请中有几个问题

1-当按下 b3 按钮或 b4 时，第一条记录不显示！

2- 为什么players2_recordStore的记录显示在players1_recordStore的记录旁边

当按下 b3 按钮时，情况正好相反。

```
import javax.microedition.rms .*;

 import com.sun.lwuit.plaf.*;
import javax.microedition.midlet.*;

import com.sun.lwuit.*;
import com.sun.lwuit.events.*;

public class HelloLWUITMidlet extends MIDlet    {

     private RecordStore players1_recordStore;
     private RecordStore players2_recordStore;

  public String [] SearchCarded_team1()
{

    String[] str = null;
    int counter = 0;
    try
    {
   RecordEnumeration enumeration = players1_recordStore.enumerateRecords(null, null, false);
        str = new String[players1_recordStore.getNumRecords()];

        while(enumeration.hasNextElement())
        {
            try
            {
                str[counter] = (new String(enumeration.nextRecord()));
                counter ++;
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return str;
}

 public String [] SearchCarded_team2()
{

    String[] str = null;
    int counter = 0;
    try
    {

        RecordEnumeration enumeration = players2_recordStore.enumerateRecords(null, null, false);
        str = new String[players2_recordStore.getNumRecords()];

        while(enumeration.hasNextElement())
        {
            try
            {
                str[counter] = (new String(enumeration.nextRecord()));
                counter ++;
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return str;
}

    public void startApp()

    {

      com.sun.lwuit.Display.init(this);

int bgColor =0x0066CC;
try
{
players1_recordStore.openRecordStore("My Record Store", true);

}
catch(Exception e){}

try
{
players2_recordStore.openRecordStore("My Record Store", true);

}

catch(Exception e){}

final form5 gggg =new form5();
gggg.setTitle("Cards ' Record");

 final com.sun.lwuit.List mylist =  new com.sun.lwuit.List();

 final  com.sun.lwuit.Form f = new com.sun.lwuit.Form("Soccer Software");
   f.getStyle().setBgColor(0X99CCFF);

  final    com.sun.lwuit.TextField tf =new com.sun.lwuit.TextField();
  final   com.sun.lwuit.TextField  txtfield3 =new  com.sun.lwuit.TextField();

 final    com.sun.lwuit.TextField     tf3 =new com.sun.lwuit.TextField();
  final    com.sun.lwuit.TextField  txtfield4 =new com.sun.lwuit.TextField();

  final    com.sun.lwuit.TextField  tf4 =new com.sun.lwuit.TextField();
  final    com.sun.lwuit.TextField  txtfield6 =new com.sun.lwuit.TextField();

  final Button cards = new Button(""+"Cards Status");
  cards.getStyle().setBgColor(0X0066CC);

 final Button b1 = new Button("Yellow Cards ");
 final Button b2 = new Button("Red Cards");
 final Button b3 = new Button("All yellow carded players");
 final Button b4 = new Button("All red carded players");

b2.getStyle().setBgColor(0X0066CC);

  b1.getStyle().setBgColor(0X0066CC); ;
  b2.getStyle().setBgColor(0X0066CC);
  b3.getStyle().setBgColor(0X0066CC); ;
 b4.getStyle().setBgColor(0X0066CC);

   com.sun.lwuit.Command back = new com.sun.lwuit.Command("Main Screen");

final com.sun.lwuit.TextArea text = new com.sun.lwuit.TextArea();

final Label lll = new Label("");

 f.addComponent(cards);

 txtfield3.setLabelForComponent(lll);

gggg.getStyle().setBgColor(0X99CCFF);
gggg.addComponent(b1);
gggg.addComponent(b2);
gggg.addComponent(b3);
gggg.addComponent(b4);
gggg.addComponent(txtfield6);

gggg.addCommand(back);

cards.addActionListener(new ActionListener() {

  public void actionPerformed(ActionEvent ae) {

gggg.show();
     }

  }
);

 gggg.addCommandListener(new ActionListener()

 {

  public void actionPerformed(ActionEvent ae) {

f.show();
     }

 }
          );

b1.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent ae) {

String player1 =txtfield6.getText();

     { }

if(player1!=null && player1.length() > 0)

{

try
{
players1_recordStore.openRecordStore("My Record Store", true);
        }

 catch(Exception e){}

 try{
   byte bytestream[] = player1.getBytes()  ;

             int i = players1_recordStore.addRecord(bytestream, 0, bytestream.length);

     }

 catch(Exception ex) { }

   Dialog validDialog = new Dialog(" ");
   Style Dialogstyle = validDialog.getSelectedStyle() ;

        validDialog.setScrollable(false);
 validDialog.getDialogStyle().setBgColor(0x0066CC);
        validDialog.setTimeout(1000);
        TextArea textArea = new TextArea("....");
        textArea.setFocusable(false);

       textArea.setText(player1+"-"+"has been carded");
        validDialog.addComponent(textArea);

        validDialog.show(0, 10, 10, 10, true);

txtfield6.clear();

}

else

{

    Dialog validDialo = new Dialog(" ");
        validDialo.setScrollable(false);
validDialo.getDialogStyle().setBgColor(0x0066CC);
        validDialo.setTimeout(5000);
        TextArea textArea = new TextArea("....");

        textArea.setFocusable(false);
       textArea.setText("please Enter the record ");
        validDialo.addComponent(textArea);

        validDialo.show(50, 50, 50, 50, true);
        txtfield6.clear();
 }

   }
  }
);

b2.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent ae) {

String player2 =txtfield6.getText();

     { }

if(player2!=null && player2.length() > 0)

{

 try{
   byte bytestream[] = player2.getBytes()  ;

             int i = players2_recordStore.addRecord(bytestream, 0, bytestream.length);

     }

 catch(Exception ex) { }

   Dialog validDialog = new Dialog(" ");
   Style Dialogstyle = validDialog.getSelectedStyle() ;

        validDialog.setScrollable(false);
 validDialog.getDialogStyle().setBgColor(0x0066CC);
        validDialog.setTimeout(1000);
        TextArea textArea = new TextArea("....");
        textArea.setFocusable(false);

       textArea.setText(player2+"-"+"has been expluded");
        validDialog.addComponent(textArea);

        validDialog.show(0, 10, 10, 10, true);

txtfield6.clear();

}

else

{

    Dialog validDialo = new Dialog(" ");
        validDialo.setScrollable(false);
validDialo.getDialogStyle().setBgColor(0x0066CC);
        validDialo.setTimeout(5000);
        TextArea textArea = new TextArea("....");

        textArea.setFocusable(false);
       textArea.setText("please Enter Record");
        validDialo.addComponent(textArea);

        validDialo.show(10, 10, 10, 10, true);
        txtfield6.clear();
 }

   }
  }
);

 b3.addActionListener(new ActionListener() {

  public void actionPerformed(ActionEvent ae) {

  try{
        players1_recordStore = RecordStore.openRecordStore("My Record Store", true);

        }

     catch(Exception ex)
     {
         ex.printStackTrace();
     }

String [] carded =  SearchCarded_team1();
int j;
String valueToBeInserted="";

for( j=0;j< SearchCarded_team1().length;j++)
  {

valueToBeInserted=valueToBeInserted + " " + carded[j];

      }
 Dialog  hilal = new Dialog(" ");
   Style Dialogstyle = hilal.getSelectedStyle() ;
hilal.setTitle("All Yellow Carded Players");
        hilal.setScrollable(false);
 hilal.getDialogStyle().setBgColor(0x0066CC);
        hilal.setTimeout(10000);
        TextArea textArea = new TextArea( );
        textArea.setFocusable(false);

       textArea.setText(valueToBeInserted+"                   "+"\t");
       hilal.addComponent(textArea);

        hilal.show(0, 10, 10, 10, true);

  }

  }
);

 b4.addActionListener(new ActionListener() {

  public void actionPerformed(ActionEvent ae) {

  try{
       players2_recordStore = RecordStore.openRecordStore("My Record Store", true);

        }

     catch(Exception ex)
     {
         ex.printStackTrace();
     }

String [] carded2 =   SearchCarded_team2();
int j;
String valueToBeInserted2="";

for( j=0;j< SearchCarded_team2().length;j++)
  {

valueToBeInserted2=valueToBeInserted2 + " " + carded2[j];

      }
 Dialog  hilal2 = new Dialog(" ");
   Style Dialogstyle = hilal2.getSelectedStyle() ;
hilal2.setTitle("All red carded players");
        hilal2.setScrollable(false);
 hilal2.getDialogStyle().setBgColor(0x0066CC);
        hilal2.setTimeout(5000);
        TextArea textArea = new TextArea( );
        textArea.setFocusable(false);

       textArea.setText(valueToBeInserted2+"                   "+"\t");
       hilal2.addComponent(textArea);

        hilal2.show(0, 10, 10, 10, true);
txtfield6.clear();
  }

  }
);

      f.show();

    }

    public void pauseApp() {}

    public void destroyApp(boolean unconditional) {}

    public void actionPerformed(ActionEvent ae) {
      notifyDestroyed();
    }

public  class form5    extends   com.sun.lwuit.Form

  {

   public form5()

          {

  com.sun.lwuit.Form form5 = new com.sun.lwuit.Form("Cards' Records ");

          }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:31:53.440

openRecordStore() 方法的第一个参数是 RecordStore 名称。您打开同一个 RecordStore 两次；“我的唱片店”。如果你想让它们成为 2 个不同的唱片店，那么你需要给它们两个不同的名字。

# java - 调用 MySQL 过程有时会导致异常“Incorrect integer value: '@com_mysql_jdbc_outparam_11' for column '_NewID' at row 1”

> ID：15788074
> 
> 赞同：0
> 
> 时间：2013-04-03T13:00:59.960
> 
> 标签：java, mysql, jdbc

从 Java JDBC 驱动程序调用 MySQL 中的存储过程时，我偶尔会遇到一个奇怪的异常。我的应用程序代码如下所示：

```
int newID = 0;
if (myObj != null) 
   newID = myObj.getId(); //getId() returns an int value...
CallableStatement stmt = conn.prepareCall("{CALL MySP(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)}");          
stmt.registerOutParameter(14, Types.INTEGER);
stmt.registerOutParameter(15, Types.BIT);

stmt.setShort(1, status);
... // other setters for each parameter of the stored procedure
stmt.setInt(14, newID);

stmt.execute();

newID = stmt.getInt(14);    
createdNew = stmt.getBoolean(15); 
```

执行语句在 99% 的情况下都会成功，除了少数情况下引发异常：

```
java.sql.SQLException: Incorrect integer value: '@com_mysql_jdbc_outparam_13' for column '_NewID' at row 1 
```

编辑：这是存储过程的主体：

```
delimiter $$
CREATE PROCEDURE `AddPhysNode`(
    IN _a SMALLINT,IN _b BIGINT,IN _c BIT,IN _d VARCHAR(255),IN _e LONGBLOB,IN _f LONGBLOB,IN _g INT,IN _h SMALLINT,IN _i SMALLINT,IN _l SMALLINT,
    IN _m BIT,IN _n INT,IN _o BIGINT,INOUT _NewID INT,OUT _CreatedNew BIT
)
BEGIN       
IF (_NewID > 0) THEN
    UPDATE  tbl 
    SET     a = _a
    WHERE   Id = _NewID;

    SET _CreatedNew = 0;
ELSE
    INSERT INTO tbl (`a`,`b`,`c`,`d`,`e`,`f`,`g`,`h`,`i`,`l`,`m`,`n`,`o`)
    VALUES (_a,_b,_c,_d,_e,_f,_g,_h,_i,_l,_m,_n,_o);

    SET _CreatedNew = 1;
    SET _NewID = @@IDENTITY;
END IF;
END$$ 
```

对此有任何提示吗？

非常感谢你！

最好的

盖尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:40:47.440

该问题似乎与并发问题有关，在多线程环境中，使用共享预准备语句导致执行该语句，而另一个线程正在为该语句的参数分配新值。

# spring - spring，为带有无效参数的 RESTful Web 服务显示自定义错误消息（使用 Spring 的自动参数转换）

> ID：15788076
> 
> 赞同：3
> 
> 时间：2013-04-03T13:01:02.263
> 
> 标签：spring

我有一个需要数字的休息网络服务：

```
@RequestMapping(value = "/bb/{number}", method = RequestMethod.GET, produces = "plain/text")
public void test(@PathVariable final double number, final HttpServletResponse response) 
```

但是，如果客户端传递了诸如“QQQ”之类的文本而不是数字，则客户端会从 spring 中收到如下错误：

```
HTTP Status 500 -
The server encountered an internal error () that prevented it from fulfilling this request.
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'double'; nested exception is java.lang.NumberFormatException: For input string: "QQQ"
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
... 
```

我需要处理这种情况，并显示正确的错误消息，例如：

```
<MyError>
  <InvalidParameter parameterName="number"/>
  <message>...</message>
</MyError> 
```

我怎样才能做到这一点？

这可以通过捕获 org.springframework.beans.TypeMismatchException 异常来实现（如下代码所示），但它存在很多问题。例如，可能存在与解析和转换 Web 服务请求的参数无关的其他 TypeMismatchException 异常。

```
import org.springframework.beans.TypeMismatchException;
import javax.annotation.*;
import javax.servlet.http.*;
import org.springframework.http.HttpStatus;
import org.springframework.stereotype.Controller;
import org.springframework.context.annotation.Scope;
import org.springframework.web.bind.annotation.*;

@Controller
@RequestMapping(value = "/aa")
public class BaseController {

    @RequestMapping(value = "/bb/{number}", method = RequestMethod.GET, produces = "plain/text")
    public void test(@PathVariable final double number, final HttpServletResponse response) throws IOException {
        throw new MyException("whatever");
    }

    @ResponseBody
    @ExceptionHandler
    public MyError handleException(final Exception exception) throws IOException {
        if (exception instanceof TypeMismatchException) {
            response.setStatus(HttpStatus.BAD_REQUEST.value());
            TypeMismatchException e = (TypeMismatchException) exception;
            String msg = "the value for parameter " + e.getPropertyName() + " is invalid: " + e.getValue(); 
            return new MyError(msg);
        }

        response.setStatus(HttpStatus.INTERNAL_SERVER_ERROR.value());
        return MyError("Unknown internal error");
    }
} 
```

那么，如果客户端使用无效号码（例如[http://example.com/aa/bb/QQQ](http://example.com/aa/bb/QQQ) ）呼叫，如何显示自定义错误消息？

ps：一种解决方案可能是将“数字”参数定义为字符串，并从我的函数内部进行转换（然后我可以捕获并抛出我的自定义异常）。在这个问题中，我在寻求一个解决方案，同时保持spring的自动参数转换。

ps：此外，spring 响应客户端的是“HTTP 500 Internal Server Error”，而不是“HTTP 400 Bad Request”。这有意义吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T15:34:12.513

在控制器类中使用 BindingResult。它将使无效字段为空，现在您可以编写自己的自定义验证类，您可以在其中检查此字段是否为空，然后生成自定义消息，如“需要有效日期”

# php - Laravel 视图、布局和变量传递

> ID：15788081
> 
> 赞同：3
> 
> 时间：2013-04-03T13:01:21.117
> 
> 标签：php, view, laravel, blade

我的 laravel 视图结构是这样的：

```
 /views/layouts/default.blade.php 
```

包含

```
<html>
@yield('header')
<body>
    @yield('navigation')
    @yield('content')
    @yield('footer')
</body> 
```

跟随

```
/views/partials/footer.blade.php
/views/partials/header.blade.php
/views/partials/navigation.blade.php 
```

在我的标题视图中，我有一个 var $title 我试图将它动态设置为主页上的控制器。

所以在我位于 /pages/index.blade.php 的视图中，我得到了这个

```
@layout('layouts.default')
@section('header')
  @render('partials.header')
@endsection

@section('navigation')
  @render('partials.menu')
@endsection

@section('footer')
  footer
@endsection

@section('content')
@endsection 
```

我在某处读到标题 var 应该通过控制器传递，但我做不到:(

我试过这个没有任何成功。$title 在标题部分视图中未定义..

```
class Home_Controller extends Base_Controller {
    public $layout = 'layouts.default';
    public function action_index()
    {
        $this->layout->nest('header', 'home.index')->with('title', 'James');
        $posts = Post::with('author')->all();
        return View::make('home.index');

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:28:03.163

在 Laravel 的 Blade 模板引擎中，你可以使用`@render`或`@include`来渲染视图。

但是，如果您使用`@render`，渲染的视图将不会从当前视图继承数据。因此，如果您需要继承变量等，则需要使用`@include`. 有关更多信息，请参阅[有关模板的文档](http://three.laravel.com/docs/views/templating)。

# python - NLTK 在生产环境中？

> ID：15788084
> 
> 赞同：10
> 
> 时间：2013-04-03T13:01:28.877
> 
> 标签：python, nltk, opennlp

我在 python nltk 中开发了一些用于聚类、数据抽象等的算法。现在，问题是，在向 VC 展示之前，我将使其规模化。NLTK 有其自身的优势，例如快速开发等。但是当我一开始选择时，这对我来说是有意义的。现在我已经足够成熟了，并且发现了它的一些局限性，比如缺乏可扩展性。对 Mahout 进行了一些研究，但这也是针对集群/分类和搭配的。Open NLP 是一种选择，但我不确定我能坚持多久。大规模 nlp 有什么好处吗？

请注意 - 这个问题与我之前的问题无关 -[如何提高 NLTK 的性能？备择方案？](https://stackoverflow.com/questions/15782898/how-can-i-imporve-performance-of-nltk-alternatives#). 我已经[在生产 Web 应用程序上](https://stackoverflow.com/questions/14128520/nltk-on-a-production-web-application#)完整阅读了 NLTK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T20:54:24.897

NLTK 确实是一个很好的学习平台，但并非旨在为数百万客户提供强大的服务。

您可以通过两种不同的方式解决可伸缩性问题：

*   第一种“大数据”方法：使您的算法适应 MapReduce 并在 MongoDB/Hadoop/Google MapReduce/上运行它们...有不同的地方可以托管此类解决方案（Amazon、Google、Rackspace...）
*   第二种，“自行开发”方法：使用通用托管解决方案或您自己的数据中心。

## “大数据”方法

这意味着重新思考你的算法。需要良好的数学背景和对算法的良好理解。也许你甚至会替换算法，因为执行时间与工作量的关系不大。

因此，就实施您的想法而言，这可能是最困难（甚至可能是不可能）的解决方案，具体取决于您的技能。对于部署和未来的好处，这是迄今为止最简单的解决方案。

## “自己动手”的方法

您可以通过可扩展性来表示不同的含义：

*   更大的训练集
*   更多客户
*   更多算法和应用
*   增加你的训练集可能意味着重新训练或适应
*   ...

关于可扩展性有不同的数量级：您要扩展 10 倍、100 倍、1000 倍……？

有不同的方法来克服可扩展性问题：

*   并行化：添加服务器的精确副本并进行负载平衡
*   流水线：可以在不同服务器上进行的不同步骤中的拆分处理
*   更昂贵的硬件、更快的 CPU、RAM、磁盘、总线、ASIC……
*   客户端处理
*   缓存请求
*   软件性能调优，在 C/C++ 中实现瓶颈
*   使用更好的算法
*   更智能地分离离线发生的事情（例如，使用 cron 作业）和每个请求完成的事情。
*   ...

无论可扩展性的类型是什么，以及您使用什么方法来克服它，都请进行负载测试，看看您可以处理什么。由于您无法立即购买所有硬件，因此有多种方法可以对扩展的基础架构进行负载测试：

*   租用处理器、内存、磁盘空间……每小时，刚好够做负载测试和纾困。这样，您无需购买设备。
*   风险更大：在比生产中更少和更便宜的设备上进行负载测试并推断结果。也许你有一个关于你的算法如何扩展的理论模型，但要注意副作用。布丁的证据在吃。

## 接近 VC（就可扩展性而言）

*   创建一个可以清楚地自我解释您的想法的原型（不一定可扩展）
*   向自己证明，在未来的某个时候一切都会好起来的，代价是什么（最小/预期/最大一次性/连续成本）
*   从私人测试版开始，这样可扩展性从一开始就不是问题。退出测试版没有最后期限。估计可以，但没有截止日期。不要为此妥协！

祝你好运！

# asp.net-mvc-4 - MVC 4 项目模板特色部分背景颜色：无法在 Chrome 中更改

> ID：15788088
> 
> 赞同：2
> 
> 时间：2013-04-03T13:01:32.393
> 
> 标签：asp.net-mvc-4

我只是想修改 MVC 4 互联网应用程序项目主页上“特色”（浅蓝色）部分的背景颜色。这在 Firefox 中运行良好。我看不到 Chrome 的变化，它总是原来的浅蓝色。为什么？

```
.featured .content-wrapper {
    background-color: #ffffff; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:17:04.510

在 MVC4 应用程序的默认 Site.css 中，您将拥有这些行

```
background-image: -webkit-gradient(linear, left top, right top, color-stop(0, #7ac0da), color-stop(1, #a4d4e6));
background-image: -webkit-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%); 
```

之内

```
.featured .content-wrapper { } 
```

Chrome 将以比`background-color: #ffffff;`规则更高的优先级使用它们，这就是为什么特色文本仍然具有蓝色背景的原因。

# c++ - 无法使用 Visual C++ 2012 创建有效的 dll

> ID：15788090
> 
> 赞同：1
> 
> 时间：2013-04-03T13:01:38.613
> 
> 标签：c++, visual-c++, dll, dllexport

我尝试按照[此演练](http://msdn.microsoft.com/en-us/library/vstudio/ms235636.aspx)使用 Visual C++ 2012 创建 dll ，但失败了。当我尝试在不同的项目中导入构建的 dll 作为参考时，出现此错误：`A reference to '***.dll' could not be added. Please make sure that the file is accessible, and that it is a valid assembly or COM component.`

我不明白我在代码中的错误是什么以及为什么会出现此错误。这是我的头文件和cpp文件：

## DLLEXPORT.H

```
__declspec(dllexport) bool setMute();
__declspec(dllexport) bool setActive(); 
```

## DLLEXPORT.CPP

```
#include "DLLEXPORT.H"
bool setMute(){
    //some stuff
}
bool setActive(){
    //some stuff
} 
```

此外，我也尝试通过此[解决方案](https://stackoverflow.com/questions/3456758/a-reference-to-the-dll-could-not-be-added)解决问题，但出现此错误：`TlbImp : error TI1002 : The input file '****.dll' is not a valid type library.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:11:41.170

Microsoft 世界中有不同种类的 DLL（和 EXE）：本机 DLL，由本机 C++（或 C）和程序集生成，包含 .NET 可执行文件。您阅读的演练将为您提供本机 DLL，而您尝试执行的引用仅适用于 .NET 程序集（和 COM 组件）。

因此，您要么必须构建一个 .NET DLL（这将是 C++/CLI 而不是本机 C++），要么将您的本机 DLL 链接到本机应用程序（或导入它），而不是在 .NET 项目中引用它。

# oracle - 通过 VPN 在浏览器中使用 Oracle APEX

> ID：15788093
> 
> 赞同：0
> 
> 时间：2013-04-03T13:01:41.027
> 
> 标签：oracle, plsql, oracle-apex

在对所有设置进行了大量的尝试之后，我终于设法让 APEX 在远程服务器上工作。为了实现这一点，我必须授予我的用户 SYSDBA 角色，并且我还将自己包括在该机器上的 ORADBA 组中。我可以在 登录 APEX `http://computername:8085/apex`。（请注意，我使用端口 8085 而不是 8080 - 似乎有一个使用 8080 的 Apache 侦听器）。

我的问题是，如何在不使用远程桌面的情况下连接到 APEX。也就是说，VPN 连接到机器，然后在我的本地计算机上打开浏览器并输入`http://computername:8085/apex`. 我已经查看了所有内容并尝试了多种方法，包括

执行 DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:19:30.313

万一有人来找这个：我必须在本地计算机的防火墙（安装了 Oracle 和 APEX）上打开端口 8085（我选择的端口；默认情况下它是 8080，但我已经有一个监听器）传入和传出连接。对我来说，这就像打开 Windows 防火墙、进入高级设置并将此端口的规则添加到入站和出站规则部分一样简单。

# php - 使用 PHP 和 SMTP 发送电子邮件 - 文本和 HTML

> ID：15788096
> 
> 赞同：2
> 
> 时间：2013-04-03T13:01:43.413
> 
> 标签：php, email, smtp, sendmail, html-email

我有一个代码用于向我的收件人发送 PHP 电子邮件。我找到了一种通过在标题部分包含“Content-Type”=>“text/html”来向他们发送 HTML 电子邮件的方法。我的问题是那些不能显示 HTML 电子邮件的人将如何收到我的电子邮件？他们会看到 HTML 代码吗？如果是这样，那么我的邮件应用程序如何决定何时发送纯文本以及何时发送 HTML 格式？

例如，这是我的代码：

```
<?php
 require_once "Mail.php";

 $from = "Example <example@example.com>";
 $to = "example@gmail.com";
 $subject = "Hi!";
 $body = '<html>This is a HTML message...</html>'

 $host = "smtp";
 $username = "user";
 $password = "pass";

 $headers = array ('From' => $from,
   'To' => $to,
   'Content-Type' => "text/html",
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:06:33.540

这是我在项目中经常使用的一个类：http: [//phpmailer.worxware.com/](http://phpmailer.worxware.com/) 它非常好，允许发送 HTML 和 TEXT 电子邮件并支持附件。如果您仅限于内置函数，则应包括定义 HTML 和 TEXT 版本开始位置的边界。更多信息在这里：[http ://webcheatsheet.com/PHP/send_email_text_html_attachment.php](http://webcheatsheet.com/PHP/send_email_text_html_attachment.php)

# ios - 在后台IOS继续上传过程

> ID：15788106
> 
> 赞同：6
> 
> 时间：2013-04-03T13:02:15.373
> 
> 标签：ios, dropbox

我想知道是否可以在后台继续上传文件。例如，当用户让 iPad 进入睡眠状态时，上传继续......

我也在 Dropbox 论坛中问过这个问题，因为我正在使用核心 API 上传到 Dropbox。这是答案：

“使用核心 API，上传完全由您的应用程序控制。您可以请求操作系统在后台保持您的应用程序处于活动状态，这将允许最多 10 分钟，然后暂停您的应用程序。您可以查看更多信息此处： [https](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html) ://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html 如果您使用新的 Sync API，这一切都将由 API 自动完成。”

我在这里发帖是因为我不明白他们所说的“请求操作系统让你的应用程序在后台保持活跃”是什么意思。这是否意味着我必须向 ios wi 请求特定代码，它与 dropbox 无关，或者它是一个特定的 dropbox 功能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-03T14:32:24.810

您需要要求操作系统保持应用程序运行，它与 Dropbox 无关......当您开始上传时，请执行以下操作：

```
UIBackgroundTaskIdentifier bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
    [[UIApplication sharedApplication] endBackgroundTask:bgTask];
}]; 
```

...并存储在`bgTask`某处。然后，当您的上传完成或失败时，请执行以下操作：

```
[[UIApplication sharedApplication] endBackgroundTask:bgTask]; 
```

这将告诉操作系统保持您的应用程序运行，因为有一个后台任务正在运行......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:36:11.883

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

通过请求，这意味着当您的 App Delegate 方法 applicationDidEnterBackground 被调用时，您有大约 5 秒的时间来完成。当您进行长时间上传时，您可以通过 beginBackgroundTaskWithExpirationHandler 请求额外的时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:10:22.860

新的 Dropbox SDK 提供后台上传/下载文件的功能。请尝试使用新的 SDK。祝您编码愉快。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-09T11:57:50.470

我想这对我有用。

1.  禁用自动锁定
2.  禁用屏幕超时
3.  插上电源
4.  在 iphone 上为 Dropbox 和后台运行选项启用位置服务
5.  让 Dropbox 应用保持打开状态
6.  2000多张照片和视频成功上传

# android - 用户退出应用后保存复选框

> ID：15788108
> 
> 赞同：0
> 
> 时间：2013-04-03T13:02:25.513
> 
> 标签：android, android-intent

我的应用程序中有几个复选框（他们不做任何事情，只是在其中打勾）我如何保存它，以便当用户离开应用程序时它会保存选中的复选框？

在我按下主页按钮的那一刻，当我返回应用程序时，它会保持选中复选框。但是当我退出应用程序（通过使用返回键）时，它不会保存选中的复选框。

这是我的代码：

```
private CheckBox ch;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ch = (CheckBox) findViewById(R.id.checkBox1);

    ch.setOnClickListener(new View.OnClickListener() {

        private String PREFRENCES_NAME;

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        if(ch.isChecked())
                {

            SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
            ch.setChecked(settings.getBoolean("cbx1_ischecked" ,true));
            settings.edit().putBoolean("check",false).commit();
            Toast.makeText(getApplicationContext(), "Check", Toast.LENGTH_SHORT).show();
            }
        else
        {
            Toast.makeText(getApplicationContext(), "Uncheck", Toast.LENGTH_SHORT).show();
        }}
    });
    } 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:05:24.943

使用数据库存储复选框值稍后检索它以供您使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:06:50.193

我看到您尝试使用 sharedPreferences 并且快到了，让我向您展示基本示例，您可以对其进行一些修改：

```
// save boolean in sharedPreferences (this code goes in if(ch.isChecked()))
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("some_key", true); // here true is the value you want to save if the checkbox is checked
editor.commit();                    

// restore string in sharedPreferences (usually you have this onCreate method) 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
checkbox.setChecked(settings.getBoolean("some_key", "false")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:08:36.517

您应该在 onPause 方法中执行此操作：

```
 @Override
    protected void onPause() {
        super.onPause();
         if(ch.isChecked())
            {

        SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
        ch.setChecked(settings.getBoolean("cbx1_ischecked" ,true));
        settings.edit().putBoolean("check",true).commit();
                    }
    else
    {
          SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
        ch.setChecked(settings.getBoolean("cbx1_ischecked" ,false));
        settings.edit().putBoolean("check",false).commit();
    }}

} 
```

因此，每当活动被销毁或离开时，都会调用 onPause 方法并保存复选框的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:09:53.467

您的代码仅保存状态，但您必须在 Activity 恢复时重置它。您应该覆盖 onResume 函数并根据保存的设置设置复选框的状态。

# powershell - 将后台进程中的stdout和stderr重定向到powershell中的文件

> ID：15788109
> 
> 赞同：0
> 
> 时间：2013-04-03T13:02:33.193
> 
> 标签：powershell, stream, stdout, stderr

我正在尝试将 stdout 重定向到`.\output\worker01.log`stderr 到`.\output\worker01-error.log`. 如果我在 shell 中运行命令，它会起作用：

```
PS Q:\mles\etl-i_test> .\worker\bin\win32\php.exe -q -c .\worker\conf\php.ini .\worker\bin\os-independant\logfilefilter\logfilefilter.php -f .\worker\worker01\conf\logfilefilter-worker01.xml 2> .\output\worker01-error.log > .\output\worker01.log 
```

和`worker01.log`被`worker01-error.log`写入输出目录。

但是我需要它在一个 powershell 脚本中作为多个后台进程。可以有 n 个工作进程，在我的测试用例中有 8 个工作进程。这就是我所说的：

```
$strPath = get-location
$workers = get-childitem -Path worker -Filter worker*
foreach ($worker in $workers)
{
  Write-Host "Start $worker in background"

  $block = {& $args[0] $args[1] $args[2] $args[3] $args[4] $args[5] $args[6] $args[7] $args[8] $args[9] $args[10]}
  start-job -scriptblock $block -argumentlist `
    "$strPath\worker\bin\win32\php.exe", `
    "-q", `
    "-c", `
    "$strPath\worker\conf\php_win32.ini", `
    "$strPath\worker\bin\os-independant\logfilefilter\logfilefilter.php", `
    "-f", `
    "$strPath\worker\$worker\conf\logfilefilter-$worker.xml", `
    "2>", `
    "$strPath\output\$worker-error.log", `
    ">", `
    "$strPath\output\$worker.log"
} 
```

如果我启动脚本，我可以看到 8 个 php 和 powershell 进程产生，它们立即消失。输出目录中没有日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:47:04.257

不要将重定向字符（“>”和“2>”）放在参数列表中。他们需要在脚本块中。

```
 $block = {& $args[0] $args[1] $args[2] $args[3] $args[4] $args[5] $args[6] 2> $args[7] > $args[8]}
  start-job -scriptblock $block -argumentlist `
    "$strPath\worker\bin\win32\php.exe", `
    "-q", `
    "-c", `
    "$strPath\worker\conf\php_win32.ini", `
    "$strPath\worker\bin\os-independant\logfilefilter\logfilefilter.php", `
    "-f", `
    "$strPath\worker\$worker\conf\logfilefilter-$worker.xml", `
    "$strPath\output\$worker-error.log", `
    "$strPath\output\$worker.log" 
```

它是这样工作的。

# variables - 使用 SASS 将字符串和变量合并为变量

> ID：15788112
> 
> 赞同：16
> 
> 时间：2013-04-03T13:02:48.117
> 
> 标签：variables, sass

我想将一个变量和一个字符串合并到一个新变量中，如下所示：

```
$product_bodyclass_list: class1 class2 class3 class4;

$product_class1_color: #C00;
$product_class2_color: #00C;
$product_class3_color: #0C0;
$product_class4_color: #000;

@each $bodyclass in $product_bodyclass_list {
    .page-#{$bodyclass} {
        a {
            color: $product_#{$bodyclass}_color; // This is wrong
        }
    }
} 
```

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T13:28:55.900

不，你不能有动态变量。

从[文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)：

> 您还可以使用 #{} 插值在选择器和属性名称中使用 SassScript 变量

您可以使用两个列表和`nth()`函数来实现相同的效果。

```
$products: class1, class2, class3, class4;    
$product_colors: #C00, #00C, #0C0, #000;

$i: 1;
@each $class in $products {
    .page-#{$class} {
        a {
            color: nth($product_colors, $i)
        }
    }
  $i: $i + 1;
} 
```

`@for`此外，使用该指令可能更简洁：

```
@for $i from 1 through length($products) {
    .page-#{nth($products, $i)} {
        a {
            color: nth($product_colors, $i)
        }
    }
} 
```

此外，如果您想显式定义变量以便在其他地方使用它们，请列出变量：

```
$product_class1_color: #C00;
$product_class2_color: #00C;
$product_class3_color: #0C0;
$product_class4_color: #000;

$product_colors: $product_class1_color, $product_class2_color, $product_class3_color, $product_class4_color; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-31T18:51:28.173

**更新：[Sass 地图](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#maps)使这个答案非常过时。**

另一种选择是使用一个列表，每个列表有两个元素，并将其用作哈希图。

```
$products: class1 #C00, class2 #00C, class3 #0C0, class4 #000;

@each $kvp in $products { // kvp stands for 'key-value pair'
    .page-#{nth($kvp, 1)} {
        a {
            color: nth($kvp, 2);
        }
    }
} 
```

我喜欢制作简单的函数来使我的代码的含义更清晰。我可能会做更多类似的事情：

```
@function kvp-key($kvp) {
    @return nth($kvp, 1);
}

@function kvp-value($kvp) {
    @if length($kvp) == 2 {
        @return nth($kvp, 2);
    } @else {
        @warn "argument was not a key-value pair";
        @return null;
    }
} 
```

然后我会像这样重新实现循环：

```
@each $kvp in $products { // kvp stands for 'key-value pair'
    .page-#{kvp-key($kvp)} {
        a {
            color: kvp-value($kvp);
        }
    }
} 
```

我们没有保存任何行，但我们已经使循环的意图更加清晰。

# object - Eucalyptus walrus（开源2.0.3）如何访问和读取ACL信息？

> ID：15788114
> 
> 赞同：0
> 
> 时间：2013-04-03T13:02:59.437
> 
> 标签：object, amazon-s3, bucket, eucalyptus, walrus

我正在研究 Eucalyptus Walrus 2.0.3 开源。

所有能够使用 Jets3t API 执行的存储桶（创建、列出、删除）对象（上传、下载、删除）和 ACL 操作。除了共享资源，即存储桶、对象。请帮助天气问题是桉树还是API？

注意：为了访问，我使用的是 Head Request，它总是返回 false。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:49:20.337

我建议升级到 Eucalyptus 3.2.2。2.0.3 真的很老了，API 支持在新版本中得到了显着改进。

希望有帮助。

# java - Diver eclipse插件可以用于远程调试吗？

> ID：15788121
> 
> 赞同：2
> 
> 时间：2013-04-03T13:03:14.667
> 
> 标签：java, eclipse, eclipse-plugin, remote-debugging

Diver 插件用于提供序列图。它可以与提供执行顺序的远程调试一起使用吗？

更多信息可以查看：[DIVER](http://diver.sourceforge.net/docs/Diver.html)

# python - opencv python 多线程视频捕获

> ID：15788122
> 
> 赞同：3
> 
> 时间：2013-04-03T13:03:18.300
> 
> 标签：python, multithreading, opencv

我正在尝试读取 2 个视频文件并同时在单独的 Windows 中显示它们。这是我的代码：

```
import threading
import cv2
threadLock=threading.Lock()
class myThread (threading.Thread):
    maxRetries=20
    def __init__(self, threadID, name,video_url):
        threading.Thread.__init__(self)
        self.threadID = threadID
        self.name = name
        self.video_url=video_url

    def attemptRead(self,cvVideo):
        threadLock.acquire()
        (isRead,cvImage)=cvVideo.read()
        threadLock.release()
        if isRead==False:
            count=1
            while isRead==False and count<myThread.maxRetries:
                threadLock.acquire()
                (isRead,cvImage)=cvVideo.read()
                threadLock.release()
                print self.name+' try no: ',count
                count+=1
        return (isRead,cvImage)

    def run(self):
        print "Starting " + self.name
        windowName = self.name
        cv2.namedWindow(windowName)
        cvVideo = cv2.VideoCapture(self.video_url)

        while True:
            (isRead,cvImage)=self.attemptRead(cvVideo)
            if isRead==False:
                break
            cv2.imshow(windowName,cvImage)
            key=cv2.waitKey(50)
            if key==27:
                break

        cv2.destroyWindow(windowName)
        print self.name + "Exiting"

def main():
    thread1 = myThread(1, "Thread1",'C:/Traffic Pics/Videos/Panjim Capture.mp4')
    thread2 = myThread(2, "Thread2",'C:/Traffic Pics/Videos/Miramar Capture.mp4')

    thread1.start()
    thread2.start()

print "Exiting Main Thread"

if __name__ == '__main__':
    main() 
```

发生的事情是，**只有****Thread 2** Window**正在显示**。尝试读取超出**max_retries 限制**（在我的情况下为 10）的视频后，**线程 1 退出。**问题是虽然我创建了单独**的 cvVideo**对象，但我似乎无法同时使用它们。可能是什么问题呢？

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:31:42.150

*编辑：我会留下下面的代码，但我猜你有编解码器问题？我安装了 xvid 编解码器（这是对示例 Megamind.avi 进行编码的内容），并且该程序可以与运行 megamind 视频的一个或两个线程正常工作。你能让 megamind 视频在单线程版本中运行吗？

这是[一篇关于 opencv 视频编解码器的 SO 帖子](https://stackoverflow.com/questions/8414947/why-cant-i-open-avi-video-in-opencv)，以防万一。这是我使用的[xvid 下载](http://www.xvid.org/Downloads.15.0.html)（k-lite 对我不起作用）。

* * *

你写的代码基本上对我有用。对于您和其他任何想尝试的人，我做了以下事情：

*   应用 PEP 8 建议
*   删除了不必要的读取尝试代码（这也消除了工作视频最后一帧后误导性线程重新读取警告）
*   使用了一个可能每个使用 opencv 的人都有的视频文件
*   删除了至少在我的系统上对 opencv 无关紧要的线程锁定
*   搬了一些其他的小东西

VideoCapture.read 可能会出现其他错误，这会使 read_attempt 方法值得，但我只能找到[文档提到的两个错误](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-read)。对于那些它只返回代码已经测试过的错误。

```
import os
import threading

import cv2

my_opencv_path = "C:/opencv2.4.3"
video_path_1 = os.path.join(my_opencv_path, "samples", "cpp", "tutorial_code",
                            "HighGUI", "video-input-psnr-ssim", "video",
                            "Megamind.avi")
video_path_2 = os.path.join(my_opencv_path, "samples", "c", "tree.avi")
assert os.path.isfile(video_path_1)
assert os.path.isfile(video_path_2)

class MyThread (threading.Thread):
    maxRetries = 20

    def __init__(self, thread_id, name, video_url, thread_lock):
        threading.Thread.__init__(self)
        self.thread_id = thread_id
        self.name = name
        self.video_url = video_url
        self.thread_lock = thread_lock

    def run(self):
        print "Starting " + self.name
        window_name = self.name
        cv2.namedWindow(window_name)
        video = cv2.VideoCapture(self.video_url)
        while True:
            # self.thread_lock.acquire()  # These didn't seem necessary
            got_a_frame, image = video.read()
            # self.thread_lock.release()
            if not got_a_frame:  # error on video source or last frame finished
                break
            cv2.imshow(window_name, image)
            key = cv2.waitKey(50)
            if key == 27:
                break
        cv2.destroyWindow(window_name)
        print self.name + " Exiting"

def main():
    thread_lock = threading.Lock()
    thread1 = MyThread(1, "Thread 1", video_path_1, thread_lock)
    thread2 = MyThread(2, "Thread 2", video_path_2, thread_lock)
    thread1.start()
    thread2.start()
    print "Exiting Main Thread"

if __name__ == '__main__':
    main() 
```****

# functional-dependencies - 需要帮助找出功能依赖关系

> ID：15788126
> 
> 赞同：0
> 
> 时间：2013-04-03T13:03:32.823
> 
> 标签：functional-dependencies

我有一个问题，他们要求我获取功能依赖项，但我不完全确定我是否正确理解了它们，这个话题似乎有点令人困惑，我想知道你们是否可以再次检查我或纠正我，如果我是错了请！

```
Company(companyID, companyName, cityName, country, assets)
Department(deptID, deptName, companyID, cityName, country, deptMgrID)
City(cityID, cityName, country)

-Two different companies cannot have the same company ID
-Two different departments cannot have the same deptID
-Two different cities cannot have the same cityID
-Two different cities in the same country cannot have the same name.
-The company name and the city it’s located in determine the company ID.
-Two departments in the same company must have different names.
-One manager cannot run two different departments. 
```

这些是我想出的FD：

```
companyID -> companyName,cityName,country,assets
deptID -> deptName,companyID,cityName,country,deptMgrID
cityID -> cityName,country
country,cityID -> cityName
companyName,cityName -> companyID
deptID -> deptMgrID
deptID,country -> deptName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T12:01:19.003

> 两个不同的公司不能有相同的公司 ID

我认为这意味着 Company.companyID 是唯一的。*这*意味着

*   companyID -> Company.companyName
*   companyID -> Company.cityName
*   公司ID -> 公司.国家
*   companyID -> Company.assets

> 两个不同的部门不能有相同的 deptID

同上的解释。FD应该是显而易见的。

> 两个不同的城市不能有相同的cityID

同解释。同样，FD 应该是显而易见的。

> 同一个国家的两个不同的城市不能有相同的名字。

我将其解释为 {city name, country name} 是唯一的。这意味着它是一个候选键，*这*意味着左侧具有 cityID 的每个 FD 都可以与左侧的 {city name, country name} 重复。

> 公司名称和它所在的城市决定了公司 ID。

*   公司名称、城市名称、国家/地区 -> 公司 ID

> 同一公司的两个部门必须有不同的名称。

我将其解释为部门名称不是唯一的，但 {companyID, deptName}*是*. 这使得 {companyID, deptName} 成为候选键。因此，左侧具有 Department.deptID 的每个 FD 都可以与左侧的 {companyID, deptName} 重复。

> 一位经理不能管理两个不同的部门。

deptMgrID 是候选键。看上面。

# css - 如何修复 Primefaces Datatable 列宽并实现内部单元格滚动

> ID：15788139
> 
> 赞同：0
> 
> 时间：2013-04-03T13:04:01.363
> 
> 标签：css, jsf, primefaces

我正在使用 Primefaces(Version 3.5) DataTable 来显示某些数据。**如果一个CELL**的数据超过同一行中的其他单元格，
我如何只使其可滚动。通过保持列宽固定[***我也无法修复列宽***]。 这是屏幕截图：

 ***![在此处输入图像描述](https://i.stack.imgur.com/cPLqU.png)

请提出任何最佳方法来实现这一点，可以通过截断数据并在末尾添加**...。**但是我又不能固定列的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T13:33:29.023

为此有css：

```
.ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td {
    white-space: nowrap;
} 
```

将其更改为正常。***

# php - PHP + 处理 22:00 到 04:00 之间的时间

> ID：15788143
> 
> 赞同：0
> 
> 时间：2013-04-03T13:04:22.893
> 
> 标签：php, date, if-statement, time

我第一次在 StackOverflow 作为海报，通常只是一个浏览器，但是这次我自己遇到了一个问题。

我有一个脚本，可以根据现在的时间设置某些变量。

```
<?php
// Sunday
if( in_array($day, array(Sun)) ){
echo 'Conditions = Day:' . $day . ' ' . 'Time: ' . $current_time;
if (($current_time >= '06:01') && ($current_time <= '10:00')) {
    $stime = '06:00';
    $etime = '10:00';
    $showname = 'Dimitri Jegels';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} elseif (($current_time >= '10:01') && ($current_time <= '14:00')) {
    $stime = '10:00';
    $etime = '14:00';
    $showname = 'Benito Vergotine';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} elseif (($current_time >= '14:01') && ($current_time <= '18:00')) {
    $stime = '14:00';
    $etime = '18:00';
    $showname = 'Gavin Arends';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} elseif (($current_time >= '18:01') && ($current_time <= '22:00')) {
    $stime = '18:00';
    $etime = '22:00';
    $showname = 'Tracy Lange';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} elseif (($current_time >= '22:01') && ($current_time <= '02:00')) {
    $stime = '22:00';
    $etime = '02:00';
    $showname = 'Mehboob Bawa';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} elseif (($current_time >= '02:01') && ($current_time <= '06:00')) {
    $stime = '02:00';
    $etime = '06:00';
    $showname = 'Training Slot';
 $image = 'images/placeholder/on-air.jpg';
//  echo $stime . ' and' . $etime . ' & ' . $showname . ' & ' . $image;
} else {
    $stime = '??:??';
    $etime = '??:??';
    $showname = 'There is a barnacle!';
}
}
?> 
```

该脚本工作正常，例如当它是 13:00 时，它会在 10:00 和 14:00 之间进行检查。

但是，当时间是 23:30 并且在 22:00 和 02:00 之间检查时，它会显示“有藤壶！”

我假设从 22:00 跳转到 02:00 会使脚本混淆，因为 02:00 小于 22:00 ？

不是最整洁的代码或最好的方法，但想知道是否有人可以建议我如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:09:44.437

对于这种特殊情况，您可以使用 OR 条件：

```
} elseif (($current_time >= '22:01') || ($current_time <= '02:00')) { 
```

但是正如您已经提到的，您的代码不是很干净！

也许这会好一点：

```
$names = array('Mehboob Bawa', 'Training Slot', 'Dimitri Jegels', 'Benito Vergotine', 'Gavin Arends', 'Tracy Lange');
$hours = getdate()["hours"];
$interval = (int)((($hours + 2) % 24) / 4);
$showname = $name[$interval];
$image = 'images/placeholder/on-air.jpg'; // can be also done via an array, if not always the same
$stime = ($interval * 4 + 22) % 24;
$etime = ($interval * 4 + 2) % 24; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:18:42.283

使用日期时，您应该始终使用对象来帮助您喜欢[DateTime](http://php.net/manual/fr/class.datetime.php)。这些对象将帮助您操作日期并获取时间戳。当您比较日期时，使用时间戳总是一个想法。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:08:56.840

你应该用 mktime 转换你的时间，然后你可以检查一个时间是否大于另一个，检查[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:09:32.093

只是一个疯狂的猜测。您是否尝试过在 22:00<->2:00 条件之前移动最后一个条件（elseif），并仅在一个条件下使您的 22:00 条件 -> 仅 >22:00（没有 <2:00）

# php - php parse_str 在大数据上崩溃

> ID：15788148
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:04:40.373
> 
> 标签：php, xml

我尝试发布很长（10-15MB）的`xml`数据。因此，我在开发中增加`php.ini`了以下设置：

```
max_execution_time = 600
max_input_time = -1
memory_limit = 1024M
post_max_size = 5000M
upload_max_filesize = 5000M
default_socket_timeout = 600 
```

但是该`php`函数`parse_str`似乎仍然崩溃-因为未执行所有以下命令并且页面响应为 0 字节。

我不是真正的 php 大师，谁能给我一个提示如何解决这个问题？

编辑：没有日志，没有响应，apache 错误日志也没有抱怨什么

为什么我使用 parse_str？这不是我的代码:-)

EDIT2：我们使用 CMS 工具，并且我们有一些插件 - 通过查询字符串发送 xml 是解决限制的一种方法。通常 XML 被解析并插入到自定义数据库（不是 CMS 数据库）中。我刚刚插入了一些文件打印来检查发生了什么：

```
public function upsertItem($oXMLObjectFromExtern="")
{

    $bHasError = false;
    $iInserted = 0;
    $iUpdated = 0;
    $iErrors = 0;
    $output = "";

    $sPostData = file_get_contents("php://input");
    // works
    $fh = fopen('/var/log/apache2/kic.log', 'w');
    fwrite($fh, $sPostData);

    parse_str($sPostData, $aPostData);

    // does not do anything, no error messages nothing ... 
    $fh = fopen('/var/log/apache2/kic2.log', 'w');
    //fwrite($fh, "jetzt");
    fwrite($fh, var_export($aPostData,TRUE));

    if(!empty($aPostData['data']) OR is_object($oXMLObjectFromExtern)){ 
```

查询字符串的格式如下： op=upsertitem&data=%3Crows%3E%0A%3Crow%3E%0A%3Cft_short_name%.... 更多编码的 xml 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:47:07.393

我很好奇，发现了这个：

[发布在 php 内部邮件列表中](http://grokbase.com/t/php/php-internals/123epc6d2m/let-parse-str-parse-more-than-max-input-vars-args)

显然 str_parse 将`max_input_vars`ini 设置作为限制器......所以这将是您必须调整的另一个设置。

我仍然不完全理解为什么该脚本会静默失败，但是...您是否尝试设置 error_reporting 级别以显示所有内容（如果 ini 设置不起作用，`error_reporting(E_ALL)`请在脚本中尝试）？

您是否监视您的服务器进程以查看执行是否达到您的内存限制或最大化 CPU？

ps 我仍然认为在这里使用 parse_str 有点小技巧；）

# jquery - 会话前的消息框在asp.net mvc3中过期

> ID：15788153
> 
> 赞同：0
> 
> 时间：2013-04-03T13:04:48.590
> 
> 标签：jquery, asp.net, asp.net-mvc

在我的 asp.net mvc3 应用程序中，用户需要填写长问卷。填写后，该用户需要单击**保存**或**提交**按钮。如果用户不保存数据并保持屏幕理想状态超过 30 分钟（会话超时），则页面上的数据会变得清晰。用户需要再次填充数据所以为了避免这种情况，我想在会话过期之前在屏幕上显示用户弹出窗口并保存数据。我有会话超时 30 分钟。你能建议我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:25:57.877

客户端方法可能是使用*setTimeout()*函数来显示警报。

```
function AlertSession(milliseconds) {
    setTimeout( milliseconds, "alert(' Your message ')" );

    //... or just send data to server to save it calling
    // a different function instead of "alert()"
}

<body onload="AlertSession(1080000)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:26:30.720

您也可以定期向服务器发出 ajax 请求以保持会话处于活动状态。

# javascript - d3.js line().x(x).y(y)

> ID：15788155
> 
> 赞同：1
> 
> 时间：2013-04-03T13:04:53.447
> 
> 标签：javascript, d3.js

我正在研究[这个](http://www.jasondavies.com/animated-bezier/)演示中的贝塞尔曲线，一开始它定义了一个像这样的系列变量

```
var w = 250,
    h = 300,
    t = .5,
    delta = .01,
    padding = 10,
    points = [{x: 10, y: 250}, {x: 0, y: 0}, {x: 100, y: 0}, {x: 200, y: 250}, {x: 225, y: 125}], 

    bezier = {},
    line = d3.svg.line().x(x).y(y),
    n = 4,
    stroke = d3.scale.category20b(),
    orders = d3.range(2, n + 2); 
```

我不知道是什么`line = d3.svg.line().x(x).y(y)`意思，谁能解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:31:14.573

查看精彩的d3js[文档](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line)。`d3.svg.line()`

`d3.svg.line()`返回一个可以使用输入数据点调用的函数，并返回描述一条线的 SVG 路径。输入中项目的 x/y 值由传递给`line().x()`和的值确定`line().y()`，可以是函数或常量。通常他们会是一个`d3.scale()`.

例如，

```
var data = [{x: 1, y: 3}, {x: 50, y: 100}, {x: 100, y: 0}];
var x = d3.scale.linear().domain([0, 200]).range([0, 20]);
var y = d3.scale.linear().domain([0, 100]).range([0, 10]);
var line = d3.svg.line()
  .x(function(d){ return x(d.x); })
  .y(function(d){ return y(d.y); });

line(data); 
```

将返回“M0.1,0.3L5,10L10,0”，它可以分配给`d`an 的属性`svg:path`并描述一条穿过点 0.1,0.3 5,10 和 10,0 的线。

# scala - 我可以从 Scala 中的注释成员测量注释泛型类型吗？

> ID：15788160
> 
> 赞同：0
> 
> 时间：2013-04-03T13:05:06.043
> 
> 标签：scala, generics, reflection, annotations

来自 StackOverflow 的 Scala 专家。

在下面的示例代码中，我重现了我正在处理的项目中面临的行为。我应该能够推断/测量在类字段成员中存在时定义的注释“武器”泛型类型。

```
import scala.reflect.runtime.universe._
import scala.annotation.StaticAnnotation

class Reflection

object Reflection {

  def reflect[T: TypeTag](x: Class[T]): Type = {
    typeOf[T]
  }

  def main(args: Array[String]) {
    var tpe = reflect(classOf[Hero])
    for (member <- tpe.members)
      for (annotation <- member.annotations)
        annotation.tpe match {
          case t if t <:< typeOf[weapon[_]]
                  => println(s"found weapon member: $member")
          case t if t <:< typeOf[action]
                  => println(s"found action member: $member")
        }
  }
}

class weapon[T <: WeaponType](x: String = null) extends StaticAnnotation
class action extends StaticAnnotation
class WeaponType(damage: Int)
case class Knife extends WeaponType(12)

class Hero {

  @weapon[Knife] var weapon: String = _
  @action def hitWithKnife() {

  }

} 
```

然而，在我提供的示例代码中，我无法避免 REPL 将奇怪的日志打印为

```
 [] ?_$1 setInst sample.Knife 
```

提前致谢

**编辑**

'@alexwriteshere' 正确地解释了日志让我感到无聊的原因。他让我觉得我的问题很困惑。

**问题**

可以推断/测量在类成员的@weapon 上定义的 T 类型（如在我的 Hero 类的武器成员中所见）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:25:55.250

关于标准输出，这是 2.10.0 和 2.10.1 中的[问题](http://grokbase.com/t/gg/scala-language/131p4r0pf3/scala-reflection-spamming-to-system-out-at-runtime-2-10-0-release)。

要获取 的类型`Knife`，您可以执行以下操作：

```
val paramType: Type = t.asInstanceOf[TypeRefApi].args.head 
```

然后你可以将它与 Type 的实例进行匹配。

# c# - 一个项目中的多个资源

> ID：15788162
> 
> 赞同：1
> 
> 时间：2013-04-03T13:05:11.730
> 
> 标签：c#

我想创建一个具有不同版本的项目，例如

*   普通的
*   已购买

因此，根据我的版本，我想更改我的项目的一些细节，比如如果有人在使用，`Normal`那么图标应该是“Normal.png”，如果是我的，`Purchased`那么所有表单都应该有“Purchased.png”的图标。

目前发生的是我在每种形式的条件基础上编写了一个代码。有什么办法可以避免这种情况吗？

有什么方法可以让我创建一个新的资源文件，并且在编译时工具将决定使用哪个资源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:53:38.673

我将创建一个静态“主题”类，您可以在加载 Windows 窗体时调用它——然后将其传递给当前窗体。根据当前主题（在本例中为“正常”或“已购买”），相应地操作表单。

有关使用资源使用代码动态更改表单图标的示例，请参阅[此链接。](https://stackoverflow.com/questions/3899364/apply-changes-to-mainforms-form-icon-at-runtime)

您还可以将控件的属性绑定到应用程序设置——有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/0yyxh69h.aspx)。（这不适用于表单图标，但它可以帮助您根据正常/购买行为进行其他更改）。

# exception - 运行具有大量过滤的 Solr Query 时出现 SocketException

> ID：15788165
> 
> 赞同：0
> 
> 时间：2013-04-03T13:05:15.963
> 
> 标签：exception, solr, connection, abort

我正在尝试对我的本地 solr 服务器（单个实例）运行查询。我还在为 id 添加过滤器。
因此，如果有 10000 个 id，我会创建 10 个过滤查询，每个查询由 1000 个 id 组成。

过滤查询如下所示：

```
"id:(1 2 3 n)" 
```

我也在使用 Solrj，所以它是这样的：

```
query.addFilterQuery("id:(1 2 3 n)"); 
```

但是在某个阈值之后（5 分钟前是 1000，现在大约是 800），我开始收到异常：

```
org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request
    Caused by: org.apache.solr.client.solrj.SolrServerException: IOException occured when talking to server at: http://localhost:8080/solr
        at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:416)
        at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:181)
        at org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:447)
        ... 37 more
    Caused by: java.net.SocketException: Software caused connection abort: recv failed 
```

我四处搜索，但只发现 maxBoolean 查询可能不是我的情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:34:34.627

是的，伊戈尔，
你是对的。
默认情况下，Solrj 使用 GET 而不是 POST。所以你必须使用 server.query(query, SolrRequest.METHOD.POST)。

# java - 如何创建数据库来存储我使用 Apache POI 从 excel 文件中读取的数据？

> ID：15788168
> 
> 赞同：0
> 
> 时间：2013-04-03T13:05:19.623
> 
> 标签：java, database

我使用 APACHE POI 从 excel 文件中读取数据。现在，我想用控制台中的结果创建数据库。我的 excel 文件有 6 列和 8 行。谁能帮我？我试图找到几天的解决方案.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:09:04.207

对于一个简单的应用程序，您可以使用 JDBC 动态创建数据库并插入记录，如果这是您想要的。否则，请事先创建数据库并在从 excel 文件中读取数据时插入行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:16:55.347

您所要求的有很多解决方案，您可以使用对象模型并将其与 ORM 工具联系起来。

我会从这里开始：

[使用 Apache Jakarta POI 从 Excel 电子表格生成外部表](http://www.oracle.com/technetwork/articles/saternos-tables-090560.html)

该文章已过时，因为他们将其称为 Jakarta POI，但这些概念可能会延续。此外，即使它是基于 Oracle 的方法，您也可以进行概括。

如果您在本论坛中需要更具体的内容，则必须根据需求提供更具体的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:28:01.787

假设您正在以这种方式阅读内容，例如将值保存在列表中（字符串或对象，具体取决于您的目的）：

```
//Some code of yours here
Iterator rows = sheet.rowIterator();
while (rows.hasNext()) {
HSSFRow row = (HSSFRow) rows.next();
Iterator cells = row.cellIterator();

List data = new ArrayList();
while (cells.hasNext()) {
HSSFCell cell = (HSSFCell) cells.next();
data.add(cell);
}

sheetData.add(data); 
```

然后，如果您将数据保存在列表中，则指定您的数据库引擎，例如 MySQL：

```
static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
static final String DB_URL = "jdbc:mysql://localhost:3306/";
static final String USER = "username";
static final String PASS = "password"; 
```

然后您继续创建数据库并插入您的记录：

```
 Connection conn = null;
 Statement stmt = null;
Class.forName("com.mysql.jdbc.Driver");

 conn = DriverManager.getConnection(DB_URL, USER, PASS);

     System.out.println("About to create a database");
      stmt = conn.createStatement();
      String dbName = "MyExcelDB";
      String sql = "CREATE DATABASE " + dbName;
      stmt.executeUpdate(sql);
      System.out.println("Database created successfully...");
      //Now, create a table based on what you need, maybe you can get the headers of your excel
String tableName = "TBUSER";
String createTableSQL = "CREATE TABLE" + tableName + "("
                + "USER_ID NUMBER(5) NOT NULL, "
                + "USERNAME VARCHAR(20) NOT NULL, "
                + "CREATED_BY VARCHAR(20) NOT NULL, "
                + "CREATED_DATE DATE NOT NULL, " + "PRIMARY KEY (USER_ID) "
                + ")";
Statement createTableStatement = conn.createStatement();
createTableStatement.execute(createTableSQL);
//Now insert
String insertQuery = "insert into " + dbName + "." + tableName + "(user_id,username,created_by,created_date) values (?,?,?,?)";
PreparedStatement insertStatement = conn.prepareStatement(insertQuery);
insertStatement.setInt(1,Integer.parseInt(sheetData.get(0));
insertStatement.setString(2,sheetData.get(1));
//and so on... then
insertStatement.executeUpdate();//This returns an int, if the insert works, the value must be greater than 0 
```

我知道代码中有很多改进，但我想给你一个想法和“模板”来做这件事。此致。

# ruby - 为什么我会通过递归得到“堆栈级别太深”？

> ID：15788174
> 
> 赞同：5
> 
> 时间：2013-04-03T13:05:36.607
> 
> 标签：ruby

我有这个红宝石代码：

```
def get_sum n
    return 0 if n<1
  (n%3==0 || n%5==0) ? n+get_sum(n-1) : get_sum(n-1) #continue execution
end 

puts get_sum 999 
```

似乎一直在为价值工作，直到`999`. 当我尝试`9999`时，它给了我这个：

```
stack level too deep (SystemStackError) 
```

所以，我添加了这个：

```
RubyVM::InstructionSequence.compile_option = {
  :tailcall_optimization => true,
  :trace_instruction => false
} 
```

但什么也没发生。

我的红宝石版本是：

```
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.1] 
```

我还增加了机器的堆栈大小`ulimit -s 32768`，我认为是 32MB？

我不认为这是我的代码的错，因为它适用于较小的数字，而且我认为这不是`9999`一个大数字。我有 8GB 的​​ RAM，我认为它已经足够了。有什么想法/帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:18:49.693

您的方法不能利用尾调用优化 (TCO)，因为它不是[tail-recursive](http://en.wikipedia.org/wiki/Tail_call)，方法的最后一个表达式应该是对方法本身的调用，`get_sum`。所以没有错，只是你达到了递归限制。对于 Ruby 1.9.3，这个限制是：

```
def recursive(x)
  puts(x)
  recursive(x+1)
end

recursive(0)
...
8731 
```

另一方面，这种方法是尾递归的：

```
def self.get_sum_tc(n, acc = 0)
  if n < 1
    acc
  else
    get_sum_tc(n - 1, acc + ((n % 3 == 0 || n % 5 == 0) ? n : 0))
  end
end 
```

你的 Ruby 可能支持也可能不支持。在 Ruby 中，当您确定要达到的深度级别时，您可以使用递归，但循环遍历未知大小的集合绝对不是惯用的。您通常对此类任务有其他抽象，例如：

```
(1..9999).select { |x| x % 5 == 0 || x % 3 == 0 }.reduce(0, :+) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T13:35:10.103

问题是，你有一个例程`n+get_sum(n-1)`，当 n 有公因数 3 或 5 时，Ruby 会继续执行这个例程。这不能通过尾递归进行优化。Ruby 必须保留当前帧以记住当前帧，`n`并且只有在`get_sum(n-1)`计算时 Ruby 才能返回并丢弃该帧。

通常，堆栈空间很昂贵。操作系统为每个进程保留大约 2M（可能更多）的堆栈空间。这可以很快消耗掉。对于您的代码，`(9999/3 + 9999/5)`递归调用消耗了所有堆栈空间。

如果要保持递归编程模式，则必须将方法调用的行为从递归（当前状态）更改为迭代。

```
def get_sum(n, sum = 0)
  return sum if n < 1
  if n % 3 == 0 || n % 5 == 0
    get_sum(n - 1, sum + n)
  else
    get_sum(n - 1, sum)
  end
end 
```

然而，Ruby 的尾递归优化似乎并没有那么强大。对于上面的代码示例，有两个不同的`get_sum()`尾调用。Ruby 不会对此进行优化。您必须将这两个调用重写为一个。

此外，为了使这项工作与`RubyVM`您提供的调整一起工作，您必须在运行时加载方法定义。那是因为`RubyVM`调整发生在运行时。不能将方法定义直接放在同一个文件中，否则编译时会解析方法，优化不生效。

您可以在调整后将其放入`get_sum`单独的文件和`require`该库中`RubyVM`：

```
# file: test_lib.rb
def get_sum(n, sum = 0)
  if n < 1
    sum
  else
    get_sum(n - 1, sum + (n % 3 == 0 || n % 5 == 0 ? n : 0))
  end
end
# eof

# file: test.rb
RubyVM::InstructionSequence.compile_option = {
  :tailcall_optimization => true,
  :trace_instruction => false
}

require_relative 'test_lib'

puts get_sum(999999) 
```

或者，用于`eval`在运行时评估 String 中的方法定义：

```
RubyVM::InstructionSequence.compile_option = {
  :tailcall_optimization => true,
  :trace_instruction => false
}

eval <<END
  def get_sum(n, sum = 0)
    if n < 1
      sum
    else
      get_sum(n - 1, sum + (n % 3 == 0 || n % 5 == 0 ? n : 0))
    end
  end
END

puts get_sum(990000) 
```

# ruby-on-rails - Rspec在ApplicationController中找不到方法

> ID：15788176
> 
> 赞同：2
> 
> 时间：2013-04-03T13:05:42.457
> 
> 标签：ruby-on-rails, rspec

我的助手调用 ApplicationController 中定义的方法作为助手方法。当应用程序处于调试或生产模式时，此模式工作正常，但是当我尝试为此帮助程序运行测试时，它会导致`NoMethodError: undefined method method_name` 我还需要/包含什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-25T01:31:29.843

将 helper 方法移动到 helpers/application_helper.rb 中，并添加

```
helper ApplicationHelper 
```

在应用程序控制器中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T13:13:07.717

create a folder called `spec/support`

inside create `utilities.rb`

in `utilities.rb`

insert the method from your ApplicationController.

# jquery - jquery移动页眉/页脚

> ID：15788178
> 
> 赞同：2
> 
> 时间：2013-04-03T13:05:43.617
> 
> 标签：jquery, html, jquery-mobile, markup

我没有一些 jquery 页面，每个页面都有页眉和页脚。我如何使它成为单个页眉和页脚。(ie) 想要在主页页眉/页脚部分加载页眉/页脚 html 文件。

请指教。

请在下面找到页面结构......

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Single page template</title> 
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />

    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/customScript.js"></script>  
    <script src="js/jquery.mobile-1.2.0.min.js"></script>
</head> 

<body> 

<div data-role="page" id="page1">
    <div id="hdr">
        <!--Need to include header.html-->
    </div>  
    <div data-role="content">   
        <!--Content-->
    </div>
    <div id="ftr">
        <!--Need to include footer.html-->
    </div>

</div>

</body>
</html> 
```

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:29:55.240

这是一个工作示例：

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>      
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script>
        $(document).on('pagebeforeshow', '[data-role="page"]', function(){       
            $.mobile.activePage.find('[data-role="header"]').load("header.html", function(){ 
                $(this).parent().trigger('pagecreate');
            }); 
            $.mobile.activePage.find('[data-role="footer"]').load("footer.html", function(){ 
                $(this).parent().trigger('pagecreate');
            });  
        }); 
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">

        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

**header.html**

```
<h3>
    Header
</h3> 
```

**页脚.html：**

```
<h3>
    Footer
</h3> 
```

这里的技巧是在通过**加载**功能添加内容后触发**pagecreate**（而不是**create ）来设置页眉和页脚的样式。**

 **阅读这篇[**文章/答案**](https://stackoverflow.com/a/14550417/1848600)以找出两者之间的区别

```
trigger('create') 
```

和

```
trigger('pagecreate'). 
```

基本上，**pagecreate**将重新设置整个页面的样式，而**create**将只设置内容的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:32:04.187

**添加标题**

检查是否没有标题，然后`.append()`检查标题`.before()`div `data-role=content`。

```
$(document).on('pagebeforeshow', function () {
 if ($(this).find('[data-role=header]').length == 0) {
   $('[data-role=content]').before('<div data-role="header"><h1>Page header</h1></div>');
   $('[data-role=page]').trigger('pagecreate');
 }
}); 
```

**添加页脚**

检查是否没有页脚，然后`.append()`检查页脚`.after()`div `data-role=content`。

```
$(document).on('pagebeforeshow', function () {
 if ($(this).find('[data-role=footer]').length == 0) {
  $('[data-role=content]').after('<div data-role="footer"><h1>Page footer</h1></div>');
  $('[data-role=page]').trigger('pagecreate');
 }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:08:21.737

您可以使用 jQuery [load()](http://api.jquery.com/load/)：

```
$(document).ready(function() {
    $("#hdr").load("header.html"); 
    $("#ftr").load("footer.html"); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T09:55:13.860

```
var currentPage=$.mobile.activePage;

$('<div data-role="header" id="myheader">
        <a href="" >Home</a>
        <a href="" >Back</a>
    </div>').prependTo(currentPage).trigger('create');

$('<div data-role="footer" id="myfooter">
        <a href="">About Us</a>
    </div>').appendTo(currentPage).trigger('create'); 
```**

# java - Java 序列化

> ID：15788182
> 
> 赞同：2
> 
> 时间：2013-04-03T13:05:59.130
> 
> 标签：java, serialization

我现在正在学习如何使用`Java`语言进行序列化。我已阅读有关该主题的一些帖子和文档，并尝试做一个简单的示例（下）

```
public class SterializeObject implements java.io.Serializable{

        /**
         * 
         */
        private static final long serialVersionUID = 1L;

        private String name;
        private transient int code;

        public SterializeObject (String n, int c){
            name = n;
            code = c;
        }

        public void printAtributes (){
            System.out.println("name: " + name + "; code: " + code);
        }
    }

    public class MainClass {
        public static void main(String[] agrs) {
            SterializeObject ob1 = new SterializeObject("ana", 1);
            SterializeObject ob2 = new SterializeObject("rita", 2);

            try {
                FileOutputStream fileOut = new FileOutputStream("file.data");
                ObjectOutputStream outObj = new ObjectOutputStream(fileOut);
                outObj.writeObject(ob1);
                outObj.writeObject(ob2);
                outObj.close();
                System.out.println("Objects were serialized!");
            } catch (IOException e) {
                e.printStackTrace();
            }

            ArrayList<SterializeObject> list = new ArrayList<SterializeObject>();
            try {
                FileInputStream fileInput = new FileInputStream("file.data");
                ObjectInputStream inputObj = new ObjectInputStream(fileInput);
                Object o;
                try {
                    while ((o = inputObj.readObject()) != null) {
                        list.add((SterializeObject) o);
                    }
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    System.out.println("Erro foi aqui! (1)");
                }

                inputObj.close();
                fileInput.close();
            } catch (IOException e) {
                e.printStackTrace();
                System.out.println("Erro foi aqui! (2)");
            }

            for (int i = 0; i < list.size(); ++i) {
                list.get(i).printAtributes();
            }
        }
    } 
```

我创建了一个`Class SterializeObject`包含`implements java.io.Serializable`两个变量的变量：一个`string`（名称）和一个`int`（代码），它是瞬态的。然后我主要生成该类的两个实例，并尝试将其写入文件中，我已经成功完成了！之后，我尝试用循环读取这两个对象..这是我的问题..因为`ObjectInputStream`没有某种方法来查看我们是否最终。所以，我试着做这个条件：`(o = inputObj.readObject()) != null`。

```
My output is this:
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at MainClass.main(MainClass.java:30)
Objects were serialized!
Erro foi aqui! (2)
name: ana; code: 0
name: rita; code: 0 
```

我得到了这些对象，但我得到了一个错误，因为我认为是试图访问不存在的东西。

有人可以告诉我其他方法吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:09:52.893

读取与写入对象数量一样多的对象，或者写入对象列表本身，而不是一个接一个地写入每个对象。

（或者依靠 EOFException 来检测流的结束，但这很难看）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:55:11.950

正如你们中的许多人告诉我的那样，我创建了一个 ArrayList 并序列化了 ArrayList。我的代码是：

```
public class MainClass {
    public static void main(String[] agrs) {
        SterializeObject ob1 = new SterializeObject("ana", 1);
        SterializeObject ob2 = new SterializeObject("rita", 2);

        ArrayList <SterializeObject> list = new ArrayList<>();
        list.add(ob1);
        list.add(ob2);

        ArrayList <SterializeObject> input = new ArrayList<SterializeObject>();

        try {
            FileOutputStream fileOut = new FileOutputStream("file.data");
            ObjectOutputStream outObj = new ObjectOutputStream(fileOut);
            outObj.writeObject(list);
            outObj.close();
            System.out.println("Objects were serialized!");
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            FileInputStream fileInput = new FileInputStream("file.data");
            ObjectInputStream inputObj = new ObjectInputStream(fileInput);
            Object o;
            try {
                input = (ArrayList<SterializeObject>) inputObj.readObject();

            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Erro foi aqui! (1)");
            }

            inputObj.close();
            fileInput.close();
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Erro foi aqui! (2)");
        }

        for (int i = 0; i < input.size(); ++i) {
            input.get(i).printAtributes();
        }
    }
} 
```

输出是：对象被序列化了！姓名：安娜；代码：0 名称：丽塔；代码：0

感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:11:00.777

关闭 FileOutputStream 以及 ObjectOutputStream

```
fileOut.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:12:01.420

为什么不将这两个对象都添加到 ArrayList，然后序列化 ArrayList。然后你只需要反序列化 ArrayList 它将被两个对象填充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:13:58.600

您可以通过将 readObject 调用放在 try-catch 块中并捕获您获得的 EOFException 来完成此操作，这表明您已读取所有对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:21:15.410

用这段代码替换你的while循环

```
do{
        try
        {
            o = inputObj.readObject();
            list.add((SterializeObject) o);
        }
        catch(EOFException e)
        {
            o = null;
        }
}while (o != null); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-14T13:21:13.903

与其使用 JDK 的 ObjectInputStream / ObjectOutputStream 进行序列化，不如考虑使用 Java-to-JSON 和 JSON-to-Java 库，如 json-io ( [https://github.com/jdereg/json-io](https://github.com/jdereg/json-io) )。它将处理一个对象数组作为根，一个包含循环的对象图，等等。使用这样的库，您无需确保您的对象实现 Serializable 或 Externalizable。

执行序列化的示例代码：

```
// Serialize an instanceo of the class EmployeeRecord emp
String json = JsonWriter.objectToJson(emp); 

// Deserialize it
EmployeeRecord e = JsonReader.jsonToJava(json); 
```

序列化的 JSON 可以返回到浏览器，浏览器可以直接读取，Javascript 代码可以对其进行操作。使用 Java 的 ObjectInputStream / ObjectOutputStream 库无法[轻松] 实现。该库只有 83K，没有其他依赖项。

# java - 如何将字符串与 ü、ć、š 等特殊字符进行比较？

> ID：15788185
> 
> 赞同：2
> 
> 时间：2013-04-03T13:06:02.837
> 
> 标签：java, android, sqlite

我从 sqlite 数据库导入了一些文本，然后将该文本设置为某个按钮。现在，我有一些文本，例如 München、Stanković 或 Kazalište。你明白了。用户必须猜测正确答案，当用户插入小写单词时，我解决了这个问题，我的单词是首字母大写。我只是将我的单词和他输入的单词转换为大写。但是，即使用户输入了 Munchen、Stankovic 或 Kazaliste，如果没有我数据库中的那些特殊字母，如何接受答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:09:09.137

尝试使用整理器。

[执行与区域无关的比较](http://docs.oracle.com/javase/tutorial/i18n/text/locale.html)

> 排序规则定义字符串的排序顺序。这些规则因地区而异，因为各种自然语言对单词的排序方式不同。您可以使用 Collat​​or 类提供的预定义排序规则以独立于区域设置的方式对字符串进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:09:41.097

我认为您需要用可接受的字符显式替换所有特殊字符。所以，ü -> u 等等。正如您使用 toUpperCase 所做的那样，它将 u 替换为 U。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:13:32.990

```
String expression ="š|ć|ü";
Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(inputStr);
if (matcher.matches()) 
{
//your code
} 
```

# extjs - 如何从商店获取唯一/不同的数据？

> ID：15788186
> 
> 赞同：3
> 
> 时间：2013-04-03T13:06:07.817
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我正在使用 extjs。我需要根据要求从存储中检索不同的数据。**在我的商店中包含单个列表而不是嵌套列表**，其中包含美洲、北海和东南亚等地区。这些区域本身具有 subRegion、vesselName 和vesselType 值。我需要根据区域检索唯一值，因为它包含许多重复记录。我已经尝试如下，但它对我不起作用。**谁能告诉我如何实现？**. 非常感谢。谢谢你。

```
var vesselStore=Ext.getStore('VesselStatusReportStore');
        var arr=new Array();
        var obj;      
        vesselStore.each(function(rec,index)
        {
            obj=new Object();
            if(rec.get('region')=='AMERICAS'){
                obj.subRegionAmerica=rec.get('subRegion');
                obj.vesselNameAmerica=rec.get('vesselName');
                obj.vesselTypeAmerica=rec.get('vesselType');
            }
            if(rec.get('region')=='NorthSea'){
                obj.subRegionNorthSea=rec.get('subRegion');
                obj.vesselNameNorthSea=rec.get('vesselName');
                obj.vesselTypeNorthSea=rec.get('vesselType');
            }
            if(rec.get('region')=='SE Asia'){
                obj.subRegionSEAsia=rec.get('subRegion');
                obj.vesselNameSEAsia=rec.get('vesselName');
                obj.vesselTypeSEAsia=rec.get('vesselType');
            }
            arr.push(obj);
            console.log(obj);
        }); 
```

杰森：

```
[ { 
    "region" : "AMERICAS",
    "startDate" : null,
    "subRegion" : "US",
    "vesselName" : "Thoma-Sea Ã?Â Hull #147",
    "vesselType" : "PSV"
  },
  { 
    "region" : "AMERICAS",
    "startDate" : null,
    "subRegion" : "US",
    "vesselName" : "Thoma-Sea Ã?Â Hull #148",
    "vesselType" : "PSV"
  },
  { 
    "region" : "AMERICAS",
    "startDate" : null,
    "subRegion" : "Mexico",
    "vesselName" : "Thoma-Sea Ã?Â Hull #148",
    "vesselType" : "PSV"
  }] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:47:32.070

看起来你想使用收集。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-collect](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-collect)

`vesselStore.collect('region')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:15:41.917

本节没有意义：

```
 obj=new Object();
            if(rec.get('region')=='AMERICAS'){
                obj.subRegionAmerica=rec.get('subRegion');
                obj.vesselNameAmerica=rec.get('vesselName');
                obj.vesselTypeAmerica=rec.get('vesselType');
            }
            if(rec.get('region')=='NorthSea'){
                obj.subRegionNorthSea=rec.get('subRegion');
                obj.vesselNameNorthSea=rec.get('vesselName');
                obj.vesselTypeNorthSea=rec.get('vesselType');
            }
            if(rec.get('region')=='SE Asia'){
                obj.subRegionSEAsia=rec.get('subRegion');
                obj.vesselNameSEAsia=rec.get('vesselName');
                obj.vesselTypeSEAsia=rec.get('vesselType');
            }
            arr.push(obj); 
```

您基本上是在说“无论区域是什么，将记录复制到`obj`，然后将其添加`obj`到我的数组中”。

我相信你的意思更多的是这些方面：

```
var vesselStore=Ext.getStore('VesselStatusReportStore');
var iRegions = [];

vesselStore.each(function(rec,index)
{
    var iRegionName = rec.get('region');

    // Make sure theres a array item with the region name,
    // if not create a blank array;
    iRegions[ iRegionName ] = iRegions[ iRegionName ] || [];

    // Add the record to its corresponding array item.
    // (If you don't want the full record, you can just get the
    // fields individually like you did in your code).
    iRegions[ iRegionName ] = rec;
}
console.log( iRegions ); 
```

# c++ - 在 Mac 上使用 valgrind

> ID：15788193
> 
> 赞同：0
> 
> 时间：2013-04-03T13:06:28.697
> 
> 标签：c++, debugging, gdb, valgrind, gmp

我有一段大约 600 行长的 c++ 代码，由于段错误，目前没有运行。我已经运行了 gdb，但它并没有真正帮助我，因为我不知道我在寻找什么。我还运行了 valgrind，我被认为它更有帮助，但是我正在使用 mac 并且 valgrind 并不能真正在 mac 上运行（在我使用它时的警告中这么说，我正在运行 OSX 10.8）。我没有 linux 机器，因此无法正确运行 valgrind。有没有人愿意通过 valgrind 运行我的代码来查找问题，或者有没有这样做的网站？我在这里问的原因是因为我找到了网站，但是因为我使用的是 gmp bignum 库，所以该网站只是回避有关该库不存在的错误，因为他们没有它。

编辑：代码位于[http://www.filedropper.com/tammesa7](http://www.filedropper.com/tammesa7)我不会在这里发布它，因为它又长又乱！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:31:51.317

一种选择是安装像[VirtualBox](https://www.virtualbox.org/)这样的免费虚拟机。

您可以在其上干净地安装任何其他操作系统并使用可用的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:49:01.000

有几种方法可以调试代码。

1.  在调试器中运行并使用“回溯”或“查看堆栈”类型选项会告诉您它在哪里崩溃。假设它确实崩溃了。
2.  添加日志记录。将代码撒上`printf("I'm in functon %s\n", __FUNCTION__);`或类似的东西。打印变量值并与您“期望”的值进行比较。
3.  添加代码以捕获“不良行为”。例如，检查 NULL 指针、超出范围的索引等。
4.  减少相关代码。删除函数 - 例如，将整个函数设为注释，或在函数顶部添加“返回”。如果问题消失，撤消上一次更改，并尝试将其减少一点，看看会发生什么。
5.  减少输入参数。如果您的代码使用大型数据文件作为输入，请尝试使用较小的数据文件。尝试删除某些数据 - 如果问题消失，那么您知道它（可能）在其余数据中。

# c++ - _variant_t 的安全转换

> ID：15788214
> 
> 赞同：0
> 
> 时间：2013-04-03T13:07:32.810
> 
> 标签：c++, com, variant

我需要在 _variant_t 和 long\bool_bstr_t 等类型之间执行安全转换。

有很多选择可以做到这一点，但我迷失在（糟糕的）文档中。例如转换为 long： 选项 1：检查变体类型是否为 long (==VT_I4)，如果是，则执行静态转换。选项2：使用提取器，我不完全理解。MSDN 说，如果 VARIANT 不是正确的类型，则 VariantChangeType 用于尝试转换。但是，如果 VariantChangeType 失败，则会返回错误代码。我在哪里得到这个错误代码？返回类型应该是我们要提取的类型，不是吗？

我很感激最安全的解决方案和各种选项的解释。

# macos - 如何在超级视图中移动子视图

> ID：15788219
> 
> 赞同：1
> 
> 时间：2013-04-03T13:07:53.303
> 
> 标签：macos, cocoa, osx-snow-leopard

如何使用鼠标在超级视图中移动子视图（使用 osx 10.6）？
我已经使用 for 循环以编程方式创建了五个 NSimageView 作为子视图。如何选择和拖动每个图像视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:10:52.613

简而言之，您想让您的子视图拖动源，并使您的目标视图成为目的地。这意味着实现类似 NSDraggingSource 和 NSDraggingDestination 协议。

查看 Apple 的拖放文档： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:48:25.873

终于我得到了答案

```
 - (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
    }
    return self;
}

- (NSView *)hitTest:(NSPoint)aPoint
{
    NSEnumerator *subviews = [[self subviews] objectEnumerator]  ;
    NSView  *hitView    ;
    NSLog(@"hit");
    fHitView = nil  ;
    while (hitView = [subviews nextObject]) {
        NSRect  frame = [hitView frame] ;       

        if (NSPointInRect(aPoint,frame))
            if ([hitView isKindOfClass:[DraggableView class]] && ![(DraggableView *)hitView dragEnabled]) {
                return hitView   ;
            }
            else    {
                fHitView = hitView  ;
                fHitPoint = aPoint   ;
                fFrameWhenHit = [hitView frame]   ;
                return self   ;
            }
    }

    return nil  ;
}

- (void)mouseDragged:(NSEvent *)theEvent
{
    if (fHitView != nil)    {
        NSPoint locationInWindow = [theEvent locationInWindow]  ;
        NSPoint locationInMySelf = [self convertPoint:locationInWindow fromView:[[self window] contentView]]    ;

        [fHitView setFrame:NSOffsetRect(fFrameWhenHit,locationInMySelf.x - fHitPoint.x, locationInMySelf.y - fHitPoint.y)]  ;
        [self setNeedsDisplay:YES]  ;
    }
} 
```

插入 NSview 的子类并将 NScustomView 类的类名更改为子类名...

# codeigniter - 如何在代码点火器中编写连接选择语句

> ID：15788222
> 
> 赞同：1
> 
> 时间：2013-04-03T13:08:11.710
> 
> 标签：codeigniter, postgresql

```
SELECT
    q1.user_id,q2.count,q2.total,q1.choice
FROM    
    (
    SELECT
        "table1"."user_id" as user_id,"table2"."choice" as choice
    FROM
        "table1", "table2"
    WHERE
        "table1"."user_id" = table2.ref_id                
    AND
        "table1"."active" = 1
    )q1
LEFT OUTER JOIN        
    (
    SELECT
        count(table1.*) as count, SUM(table2.add1) as total,table1.user_id as user_id
    FROM
        "table1", "table2"
    WHERE                   
        "table1"."type" = 1               
    AND
        table1"."some_id" IN(SELECT user_id FROM "table2", "table3" WHERE "table3"."user_id" = table3.refid)                
    group by
        "table2"."user_id"
    )q2        
ON
    q2.user_id=q1.user_id
ORDER BY
    q2.count ASC 
```

我有一个这样的查询。它在 db 中运行良好。但不知道如何使用子查询在 codeigniter 中编写它。或者有没有其他方法可以得到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:15:19.673

你可以用`$this->db->query()`这个..

[文档在这里](http://ellislab.com/codeigniter/user-guide/database/queries.html)

```
$sql='SELECT
    q1.user_id,q2.count,q2.total,q1.choice
FROM    
    (
    SELECT
        "table1"."user_id" as user_id,"table2"."choice" as choice
    FROM
        "table1", "table2"
    WHERE
        "table1"."user_id" = table2.ref_id                
    AND
        "table1"."active" = 1
    )q1
LEFT OUTER JOIN        
    (
    SELECT
        count(table1.*) as count, SUM(table2.add1) as total,table1.user_id as user_id
    FROM
        "table1", "table2"
    WHERE                   
        "table1"."type" = 1               
    AND
        table1"."some_id" IN(SELECT user_id FROM "table2", "table3" WHERE "table3"."user_id" = table3.refid)                
    group by
        "table2"."user_id"
    )q2        
ON
    q2.user_id=q1.user_id
ORDER BY
    q2.count ASC';

$result=$this->db->query($sql); 
```

# c# - 无法将列表视图与数据模板绑定

> ID：15788223
> 
> 赞同：0
> 
> 时间：2013-04-03T13:08:12.403
> 
> 标签：c#, wpf, listview, binding

我正在使用`MVVM`，`Command`当我右键单击我的`ListView`. 我做了很多搜索，但我的问题没有解决。

我使用这个 XAML 代码

```
<ListView ItemsSource="{Binding LibraryList}"
          x:Name="MediaList" 
          Visibility="{Binding MediaListVisibility}"
          Margin="149,18,-1,0"
          BorderBrush="#FF8BCD7F"
          BorderThickness="0"
          Background="White">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseDoubleClick">
            <i:InvokeCommandAction Command="{Binding ChooseMediaCommand}"
                CommandParameter="{Binding SelectedValue, ElementName=MediaList}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <ListView.View>
        <GridView>
            <GridViewColumn DisplayMemberBinding="{Binding Name}" Header="Name" Width="300" />
            <GridViewColumn DisplayMemberBinding="{Binding Time}" Header="Time" Width="70" />
            <GridViewColumn DisplayMemberBinding="{Binding Artist}" Header="Artist" Width="120" />
            <GridViewColumn DisplayMemberBinding="{Binding Album}" Header="Album" Width="120" />
            <GridViewColumn DisplayMemberBinding="{Binding Year}" Header="Year" Width="80" />
        </GridView>
    </ListView.View> 
    <ListView.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Add to playlist" ItemsSource="{Binding PlaylistsList}">
                <MenuItem.ItemTemplate>
                    <DataTemplate>
                        <MenuItem Header="{Binding Name}"
                                  Command="{Binding AddToPlaylistCommand}"
                                  CommandParameter="{Binding Name}"/>
                    </DataTemplate>
                </MenuItem.ItemTemplate>
            </MenuItem>
            <MenuItem Header="Remove"/>
        </ContextMenu>
    </ListView.ContextMenu> 
```

错误信息 ：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“播放列表”（HashCode=16901761）上找不到“AddToPlaylistCommand”属性。BindingExpression:Path=AddToPlaylistCommand; DataItem='播放列表' (HashCode=16901761); 目标元素是'MenuItem'（名称=''）；目标属性是“命令”（类型“ICommand”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:13:14.967

使用这样的相对源（假设您的控件是一个窗口）

```
Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=AddToPlaylistCommand}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:26:07.150

```
Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.AddToPlaylistCommand}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:25:47.240

```
Command="{Binding Path=DataContext.AddToPlaylistCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" 
```

# java - 数组中整数的总和

> ID：15788224
> 
> 赞同：0
> 
> 时间：2013-04-03T13:08:14.637
> 
> 标签：java, arrays

所以，基本上，这些问题要求我找到数组中数字的总和。除了数字“13”很不吉利，所以它不计算“13”和紧跟在“13”之后的数字。

这就是我所做的：

```
public int sum13(int[] nums) {
  int d = 0;
  int sum = 0;

  for (int i=0;i<nums.length;i++){
    if(nums[i] == 13){
    d = i;
    break;
    }
    else{
    d = nums.length;
    }
  }
  for(int i=0;i<d;i++){
   sum = sum + nums[i];
  }
  return sum;
} 
```

即使我通过了大部分测试，我仍然无法理解如何从总和中排除 13 旁边的数字。

例如 sum13({1, 2, 2, 1, 13}) → 6 PASSES！sum13({13, 1, 13}) → 0 次通过！但是， sum13({13, 1, 2, 13, 2, 1, 13}) → 3 返回 0，因为它在 13 的第一个实例处停止。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:13:37.860

为什么要使用两个循环？如果数字是`13`，请不要将其或下一个数字添加到总和中，如下所示：

```
public int sum13(int[] nums) {
    int sum = 0;
    for (int i = 0; i < nums.length; i++) {
        if (nums[i] == 13) {
            i++;
        } else {
            sum = sum + nums[i];
        }
    }
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T13:14:03.053

根据您的问题，如果数字是 13 及其直接后继，您将排除在外。因此，当您发现 13 再次增加循环计数器时：

```
 for(int i=0;i<nums.length;i++){
   if(nums[i] == 13) {
     i++;
    }
   else {
     sum = sum + nums[i];
   }
  } 
```

如果数组中有一个，这自然会跳过 13 的下一个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T13:13:53.633

在第一个`for`循环中直接求和怎么样？更短、更简单、更快捷的方式:)

```
public int sum13(int[] nums) {
  int sum = 0;

  for (int i=0;i<nums.length;i++){
    if (nums[i] != 13) {
      sum += nums[i];
    } else {
      i++;
    }
  }
  return sum;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T13:10:38.997

你听到什么了`continue`吗？

```
if(nums[i] == 13){
     d = i;
     continue;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:15:31.890

```
public int sum13(int[] nums) {
      boolean skip = false;
      int sum = 0;

      for (int i=0;i<nums.length;i++){
        if(nums[i] == 13){
            skip=true;
            continue;
        }
        else{
        if(skip) {
            skip=false;
            continue;
        }
        sum+=nums[i];
        }
      }

      return sum;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:20:29.227

您实际上正在做的是在第一次出现 13 时停止。

试试这个：

```
public int sum13(int[] nums) {
    int sum = 0;

    for (int i = 0; i < nums.length; i++) {
        if (nums[i] == 13) {
            i++;
        } else {
            sum += nums[i];
        }
    }

    return sum;
} 
```

我没有测试它，但它应该工作......

干杯!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T13:21:17.653

试试这个

```
 public int mySum(int[] nums, int except) {
        int sum = 0;
        for (int i = 0; i < nums.length; i++) {
             sum += (nums[i] == except) ? 0: nums[i];
        }
        return sum;
    } 
```

然后

```
mySum(nums, 13) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T13:21:29.077

使用继续；值等于 13 时的语句。

```
public int sum13(int[] nums) {
  int sum = 0;
  for (int i=0;i<nums.length;i++){
    if(nums[i] == 13){
       continue;
    }
    else{
       sum = sum + nums[i];
    }
  }
  return sum;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-03T13:33:20.363

试试这个。

```
public int sum(int[] nums) {
    int sum = 0;
    for (int i = 0; i < nums.length;) {
        if (nums[i] == 13)
            i = i + 2;
        else {
            sum = sum + nums[i];
            i++;
        }
    }
    return sum;
} 
```

# javascript - 使用 Bootstrap 居中“行”内容

> ID：15788233
> 
> 赞同：1
> 
> 时间：2013-04-03T13:08:30.717
> 
> 标签：javascript, css, twitter-bootstrap

我无法将内容集中在“行”中，[示例](http://jsfiddle.net/sTwj7/)中的按钮始终位于左侧，而右侧的空间太大。

有没有办法让这个按钮居中？

谢谢托马斯

```
<div class="abc">
<div class="row red show-grid">
    <div class="span2 btn">a</div>
    <div class="span2 btn">b</div>
    <div class="span2 btn">c</div>
    <div class="span2 btn">d</div>
    <div class="span2 btn">e</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:45:17.627

***2018 年更新***

**引导程序 4**

使用自动布局列和`text-center`

```
 <div class="row text-center">
    <div class="col-sm border">a</div>
    <div class="col-sm border">b</div>
    <div class="col-sm border">c</div>
    <div class="col-sm border">d</div>
    <div class="col-sm border">e</div>
  </div> 
```

[https://www.codeply.com/go/2fDFPSB5A4](https://www.codeply.com/go/2fDFPSB5A4)

* * *

**引导程序 3**

使用列偏移和`text-center`

```
 <div class="row red show-grid text-center">
    <div class="col-md-2 col-md-offset-1 btn btn-default">a</div>
    <div class="col-md-2 btn btn-default">b</div>
    <div class="col-md-2 btn btn-default">c</div>
    <div class="col-md-2 btn btn-default">d</div>
    <div class="col-md-2 btn btn-default">e</div>
  </div> 
```

[https://www.bootply.com/zEYom4EJUF](https://www.bootply.com/zEYom4EJUF)

* * *

**Bootstrap 2**（原始答案）

您可以像这样添加 CSS 以使您的跨度居中：

[http://jsfiddle.net/sTwj7/9/](http://jsfiddle.net/sTwj7/9/)

```
<div class="span2 pull-center">
     <h1>a</h1>
</div> 
```

CSS类：

```
.pull-center {text-align:center;margin:0 auto !important;float:none !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:25:02.457

该类`span2`具有属性`float:left`：

```
<div class="block">
    <div class="row show-grid">
        <div class="span2 btn">a</div>
        <div class="span2 btn">b</div>
        <div class="span2 btn">c</div>
        <div class="span2 btn">d</div>
        <div class="span2 btn">e</div>
    </div>
</div> 
```

CSS：

```
.block {
    max-width: 500px;
}
.block > div {
    text-align:center;
}
.block > div > div {
    float:none; 
} 
```

我会考虑不将`span2`（布局和网格类）与`btn`（按钮样式类）一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:56:32.003

[http://jsfiddle.net/sTwj7/10/](http://jsfiddle.net/sTwj7/10/)

HTML

```
<div class="abc">
    <div class="row red show-grid">
        <div class="btn">a</div>
        <div class="btn">b</div>
        <div class="btn">c</div>
        <div class="btn">d</div>
        <div class="btn">e</div>
    </div>
</div> 
```

CSS

```
.red {
    background-color: red;
}
.abc {
    max-width: 500px;
}

.red .btn {
    width: 160px;
    margin: 0 auto;
    display: block;
} 
```

# mysql - 使用 sql 将电子邮件 + md5 哈希密码放入数据库

> ID：15788238
> 
> 赞同：-3
> 
> 时间：2013-04-03T13:08:36.277
> 
> 标签：mysql, sql, md5

我正在建立的一个网站有一个小的管理面板。所以该网站有一个登录页面，但没有注册页面，因为登录 1 个帐户只需要 1 个电子邮件+密码。所以我想通过 sql 插入这个 1 帐户的凭据。密码需要经过 md5 哈希处理。这是我写的sql代码，但我得到一个错误：

```
insert into tblmember (memberEmail, memberWachtwoord) 
        values (
        '".mysqli_real_escape_string('exampleemail')."',
        '".hash('md5', mysqli_real_escape_string('examplepassword'))."'
        ); 
```

exampleemail 和 examplepassword 只是文本，没有变量。这是我得到的错误：

```
error: #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'exampleemail')."', '".hash('md5'('examplepassword'))."' )' at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:12:23.500

如果你剥离 PHP 代码，你会得到这个：

`insert into tblmember (memberEmail, memberWachtwoord) values ('exampleemail', md5('examplepassword'));`

# php - ADODB 多数据库

> ID：15788241
> 
> 赞同：1
> 
> 时间：2013-04-03T13:08:42.563
> 
> 标签：php, mysql, database, adodb

我正在使用 adodb 进行数据库操作，在这里我遇到了一个问题，我无法在我的脚本中添加两个或 3 个数据库我正在使用 3 个数据库，但它无法正常工作，在这种情况下需要帮助。

myadodb 连接文件：

```
<?php
include_once("/adodb/adodb.inc.php");
include_once("/adodb/adodb-exceptions.inc.php");
class ADb {
    function ADb()
    {
        global $dbserver;
        global $dbuser;
        global $dbpass;
        global $database;

        $dbuser = "";
        $dbpass = "";
        $dbserver = "";                
        $database = "";

        $this->conn1 = &ADONewConnection('mysql'); 
        $this->conn1->PConnect($dbserver, $dbuser, $dbpass, $database);
    }                   
    function query($sql)
    {
        try
        {
            $Result = $this->conn1->Execute($sql);
        }
        catch (exception $e)
        {
            echo $e->msg;
        }
    }
}
?> 
```

我为 3 个数据库连接创建了 3 个文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:59:53.053

这是我制作的一个快速类，它应该允许您使用 adoDB 连接到 3 个数据库：

```
class Data {
    private static $_dbOne = null;
    private static $_dbTwo = null;
    private static $_dbThree = null;

    protected function __construct() {
    }

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbOne() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbOne) {

            $_connOne = 'mysql://username:password@www.server.com/database';

            self::$_dbOne = &ADONewConnection($_connOne);
            if (self::$_dbOne==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbOne;
    }

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbTwo() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbTwo) {

            $_connTwo = 'mysql://username:password@www.server.com/database';

            self::$_dbTwo = &ADONewConnection($_connTwo);
            if (self::$_dbTwo==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbTwo;
    }

}

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbThree() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbThree) {

            $_connThree = 'mysql://username:password@www.server.com/database';

            self::$_dbThree = &ADONewConnection($_connThree);
            if (self::$_dbThree==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbThree;
    }

} 
```

以下是如何使用此类的示例：

```
$sql = "SELECT * FROM *";
$results1 = Data::dbOne()->Execute($sql);
$results2 = Data::dbTwo()->Execute($sql);
$results3 = Data::dbThree()->Execute($sql); 
```

# asp.net - 如何使用asp.net中的更新面板更新Repeater的ItemCommand上的Panel Outside Repeater？

> ID：15788248
> 
> 赞同：0
> 
> 时间：2013-04-03T13:09:08.217
> 
> 标签：asp.net, asynchronous, updatepanel, repeater

我有一个显示在中继器中的客户列表。我有一个`Details Button`中继器，它在单击时显示客户端的详细信息。对于 Sample 现在只添加了“ClientName”。`*When i Click on 'Details' LinkButton in Repeater it Displays the Details of Selected Row. But, this causes FullPage Post Back! Which i want to Prevent. Just i want to Update the Panel which displays the Details when row is selected from Repeater*`.

在 .aspx 页面中：

```
<script>
    function ShowPopUp() {
        var listItemsRegion = document.getElementById('popup');
        popup.style.display = "block";
    }
    function ClosePopup() {
        var listItemsRegion = document.getElementById('popup');
        popup.style.display = "none";
    }
</script>

<asp:Repeater ID="RepDetails" runat="server" OnItemCommand="RepDetails_ItemCommand">
            <HeaderTemplate>
                <table class="tabl">
                    <tr style="background-color: #808080; color: White">
                        <td class="lblCenter">
                            <asp:Label ID="Label4" runat="server" Text="City" Font-Bold="true" CssClass="lbl"></asp:Label>
                        </td>
                        <td class="lblCenter">
                            <asp:Label ID="Label3" runat="server" Text="Age" Font-Bold="true" CssClass="lbl"></asp:Label>
                        </td>
                       <td class="lblCenter">
                            <asp:Label ID="Label1" runat="server" Text="Gender" Font-Bold="true" CssClass="lbl"></asp:Label>
                        </td>
                         <td class="lblCenter">
                            <asp:Label ID="Label5" runat="server" Text="Details" Font-Bold="true" CssClass="lbl"></asp:Label>
                        </td>
                    </tr>
            </HeaderTemplate>
            <ItemTemplate>
                <tr class="<%# Container.ItemIndex % 2 == 0 ? "rowEven" : "rowOdd" %>">
                    <td class="lblCenter">
                        <asp:Label ID="lblCity" runat="server" Text='<%#Eval("City") %>' /></td>
                     <td class="lblCenter">
                        <asp:Label ID="lblAge" runat="server" Text='<%#Eval("Age") %>' /></td>

                    <td class="lblCenter">
                            <asp:Label ID="lblGen" runat="server" Text='<%#Eval("Gender") %>' CssClass="lbl"></asp:Label>
                        </td>
                    <td class="lblCenter">
                     <asp:LinkButton ID="lblDetails" runat="server" CommandName="Display"
                           CommandArgument='<%#Eval("ID") %>'>Details</asp:LinkButton></td>
                    <asp:Label ID="rlblClientname" runat="server" Text='<%#Eval("Client") %>' Visible="false"></asp:Label>
                  </tr>

            </ItemTemplate>
            <FooterTemplate>
                </table>
            </FooterTemplate>
</asp:Repeater>

<div id="popup" style="display: none">
    <asp:UpdatePanel ID="UpdatePanel6" runat="server">
        <ContentTemplate>
    <table width="80%" align="center">
        <tr>
            <td>&nbsp;</td>
            <td width="30%">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>
                <asp:Label ID="Label15" runat="server" CssClass="lbl" Text="Client Code"></asp:Label>
            </td>
            <td>
                <asp:Label ID="lblClientName" runat="server" CssClass="lbl"></asp:Label>
            </td>
        </tr>
       <tr>
            <td>&nbsp;</td>
                    <td>&nbsp;</td>
            <td>
                <input id="Button2" type="button" value="Close" onclick="ClosePopup();" class="but" />&nbsp;</td>
        </tr>
    </table>
        </ContentTemplate>
    <%-- <Triggers>
            <asp:AsyncPostBackTrigger ControlID="RepDetails" EventName="RepDetails_ItemCommand" />
        </Triggers>--%>
 </asp:UpdatePanel>
</div> 
```

在中继器项目命令中：

```
protected void RepDetails_ItemCommand(object source, RepeaterCommandEventArgs e)
        {
            if (e.CommandName == "Display")
            {
                LinkButton lblDetails = (LinkButton)e.Item.FindControl("lblDetails");
        Label rlblClientname = (Label)e.Item.FindControl("rlblClientname");
        if (lblDetails != null && e.CommandArgument != null)
                {
                    string val = e.CommandArgument.ToString();
             if (rlblClientname != null && rlblClientname.Text != string.Empty)
                    {
                        lblClientName.Text = rlblClientname.Text;
                    }
            string scrpt = "ShowPopUp();";
            Page.ClientScript.RegisterStartupScript(this.GetType(), "s", scrpt, true);
        }
        }
    } 
```

**这会导致我想要阻止的整页回发。在重复器行的单击上，必须使用 AsynPostBack 显示详细信息。*将触发事件添加到“弹出”div 时，它说找不到控件***

帮助赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:14:06.790

You have one of two Options:

1) Uncomment this code and change `EventName="RepDetails_ItemCommand"` to `EventName="ItemCommand"`

```
 <Triggers>
        <asp:AsyncPostBackTrigger ControlID="RepDetails" EventName="ItemCommand" />
    </Triggers> 
```

2) Put the Repeater in the `<ContentTemplate>` of the UpdatePanel

# java - 绘制圆角矩形

> ID：15788251
> 
> 赞同：0
> 
> 时间：2013-04-03T13:09:15.953
> 
> 标签：java, graphics2d

我想将下面的示例转换为使用 RoundedRectangles 而不是普通矩形的图中，我知道剪切框有可能。但我真的不知道它们将如何应用于我目前的情况，因为我目前没有使用 g2d.fillXXX() 函数。

图片： [示例 http://img827.imageshack.us/img827/6048/cardbackgroundcut.jpg](http://img827.imageshack.us/img827/6048/cardbackgroundcut.jpg)

编码：

```
private void createImage() {
    bufferedImage = new BufferedImage(dimension.width, dimension.height, BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2d = (Graphics2D)bufferedImage.createGraphics();

    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
    g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
    g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);

    int colorRed = 128;
    int colorGreen = 0;
    int colorBlue = 128;

    for (int x = 0; x < dimension.width; x++) {
        for (int y = 0; y < dimension.height; y++) {
            int dx = Math.min(x, dimension.width - x);
            int dy = Math.min(y, dimension.height - y);
            if (dx < 10 || dy < 10) {
                g2d.setColor(new Color(colorRed, colorGreen, colorBlue, 255 - Math.min(dx, dy)));
                g2d.drawLine(x, y, x, y);
            }
            else {
                g2d.setColor(new Color(colorRed, colorGreen, colorBlue, 192 - Math.min(dx, dy)));
                g2d.drawLine(x, y, x, y);
            }
        }
    }
} 
```

所以基本上我希望图像的外边缘和内边缘都有一个圆角矩形，同时防止颜色的变化。

任何线索如何做到这一点？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:24:20.700

您可以使用[RoundRectangle](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/RoundRectangle2D.html)和 4 个（车削）[矩形](http://docs.oracle.com/javase/7/docs/api/java/awt/Rectangle.html) 将所有形状投射到[Area](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Area.html)并使用

```
area.exclusiveOr(ohterArea) 
```

方法来获得 4 个单独的（不同的梯度）部分。然后使用[GradientPaint](http://docs.oracle.com/javase/7/docs/api/java/awt/GradientPaint.html)类逐个绘制这些部分，以将所有这 4 个部分绘制（填充）到所需的渐变。

作为最后一步，您将油漆设置回静态颜色并绘制旧的 RoundedRectangle （这样你就得到了边缘）

# css - 使用 CSS 缩放文本大小

> ID：15788255
> 
> 赞同：1
> 
> 时间：2013-04-03T13:09:20.077
> 
> 标签：css, scale

是否有任何类型的属性或 CSS 解决方案可以根据父尺寸缩放文本。这样无论父大小如何，文本都不会超出内容？

我有一个 div 我在其中添加我的文本。这个 div 是动态收缩的，完成后文本会显示在 div 之外。

# java - 如何使用 Jfreechart 删除间隔标记中的行？

> ID：15788257
> 
> 赞同：0
> 
> 时间：2013-04-03T13:09:22.920
> 
> 标签：java, jsp, jfreechart

在下面的代码中，请告诉我如何使用 Jfreechart 删除 IntervalMarker 中的行？

```
IntervalMarker target1 = new IntervalMarker(85,111);
GradientPaintTransformer t1 = new StandardGradientPaintTransformer(GradientPaintTransformType.VERTICAL);
target1.setPaint(new GradientPaint(0.0F, 0.0F,new Color(189,227,208), 0.0F, 0.0F, new Color(186,214,231)));
target1.setGradientPaintTransformer(t1);                                              
xyplot.addRangeMarker(target1,Layer.BACKGROUND); 
```

![在此处输入图像描述](https://i.stack.imgur.com/qlXN1.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:32:28.500

采用

```
target1.setOutlineStroke(new BasicStroke(0)); 
```

或者

```
target1.setOutlineStroke(null); 
```

更新以显示结果

空值`OutlineStroke`

![在此处输入图像描述](https://i.stack.imgur.com/N1BJe.jpg)

`BasicStroke(0)`

![在此处输入图像描述](https://i.stack.imgur.com/kNGoF.jpg)

默认

![在此处输入图像描述](https://i.stack.imgur.com/zoDX2.jpg)

# javascript - jQuery getJSON 在函数中不起作用

> ID：15788260
> 
> 赞同：2
> 
> 时间：2013-04-03T13:09:23.173
> 
> 标签：javascript, jquery, html

在自定义函数中使用 jQuery 时，我遇到了问题。

当我从我的 .html 开始我的 jQuery 时，例如：

```
<script type="text/javascript" src="js/MyJS.js"></script> 
```

我的JS：

```
$.getJSON('MyFilePath', function(data)
{
  var items = [];
  $.each(data, function(key, val)
  {
  //Doing things with my data.
  });
 }); 
```

它工作正常并返回我的文件。（我使用的是带有 json 结构的纯文本文件）。

但是当我试图从一个函数启动它时，例如：

```
function getAllDepts()
{
  $.getJSON('MyFilePath', function(data)
  {
    var items = [];
    $.each(data, function(key, val)
    {
    //Doing things with my data.
    });
  });
} 
```

它行不通。似乎他无法加载我的文件，但我就是不明白为什么。

和：

```
$.ajax({
             url: "MyFilePath",
             success: function(data){
             console.log(data);
             },
             error: function(data){
             alert(error);
             }
             }); 
```

我仍然可以获取我的数据，但我只想知道为什么 getJSON 不起作用。我读到 getJSON 在加载本地文件方面存在问题，但我不确定它是否适用于我的问题。

有任何想法吗？

@注释：

*   是的，我通过我的 .hmtl 中的 onclick:"getDepts()" 调用该函数，并且它被正确调用。
*   返回值领先一步，因为 getJSON 无法正常工作。jQuery 认为这不是问题，因为在使用 Firebug(Firefox) 进行调试时，会调用该方法。主要问题似乎是他无法加载文件。
*   我的数据文件是 .txt。带json结构。（我用[http://jsonlint.com/](http://jsonlint.com/)检查了我的 json 结构，它说没关系）
*   没有像 404 这样的错误，因为文件存储在本地，并且在使用 firebug 时没有出现错误。
*   我在编辑这篇文章时创建了语法错误。固定大括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:35:03.797

你的功能看起来不对试试

```
function getAllDepts() {
    $.getJSON('MyFilePath', function(data) {
        var items = [];
        $.each(data, function(key, val) {
            //Doing things with my data.
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T15:24:34.487

试试下面的。这可能与 $.getJSON 的异步特性有关。

```
(document).ready(function() {

    function getAllDepts()
    {
      $.getJSON('MyFilePath', function(data)
      {
        var items = [];
        $.each(data, function(key, val)
        {
        //Doing things with my data.
        });
      });
    }

} 
```

# delphi - 多实例使用的delphi表单

> ID：15788262
> 
> 赞同：1
> 
> 时间：2013-04-03T13:09:26.507
> 
> 标签：delphi, ftp, indy

我有一个 FTP 上传器项目，它使用在运行时创建的表单开始上传到多个 FTP 服务器（使用 Indy），我的问题如下（我真的需要你的帮助）。

在表单上，​​我放置了一个 IdFTP 组件 + 一个上传按钮 + 名为 FTPSrvAdrs 和 SrcFile + TrgFolder 的公共属性，如下所示：

```
type
  TFtpUploader = class(TForm)
    IdFTP: TIdFTP;
    StartUpload:TButton;
    UploadProgress:TProgressBar;
    procedure StartUploadClick(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
  private
    FFtpSrvAdrs:String;
    FSrcFile:String;
    FTargetFtpFld:String;
    Procedure StartMyUpload();
    procedure SetFtpAdrs(const value:string);
    procedure SetSrcFile(const value:string);
    procedure SetTargetFtpFld(const value:string);
    { Private declarations }
  public
    { Public declarations }
    property FtpAdrs:string read FFtpSrvAdrs write SetFtpAdrs;
    property SourceFile:string read FSrcFile write SetSrcFile;
    property TargetFtpFld:string read FTargetFtpFld write SetTargetFtpFld;
  end;

var
  FtpUploader: TFtpUploader;

implementation

  procedure TFtpUploader.StartUploadClick(Sender: TObject);
  begin
  StartMyUpload(); 
  end;

  procedure TFtpUploader.SetFtpAdrs(const value: string);
  begin
  FFtpSrvAdrs:=value;
  end;

  procedure TFtpUploader.SetSrcFile(const value: string);
   begin
   FSrcFile:=value;
  end;

  procedure TFtpUploader.SetTargetFtpFld(const value: string);
   begin
  FTargetFtpFld:=value;
   end;

   procedure TFtpUploader.StartMyUpload;
    var
    FtpUpStream: TFileStream;
    begin
      ftpUpStream:= TFileStream.create(FSrcFile, fmopenread)
     try
     with IdFTP do begin
      Host:= FFtpSrvAdrs;
      Username:='MyUserName';
      Password:='MyPassword';
    end;
    IdFTP.Connect(true, 1200)
    IdFTP.Passive:= true;
    IdFTP.ChangeDir(FTargetFtpFld)
    IdFTP.Put(ftpUpStream,FSrcFile, false);
   finally
   ftpUpStream.Free;
   end;
   end;

  procedure TFtpUploader.FormClose(Sender: TObject; var Action: TCloseAction);
  begin
  Action:=caFree;
  end; 
```

此表单将在 RunTime 上创建（4 次 = 4 个按钮将分别启动它，如下所示：

在主要形式中，我有这个程序：

```
 Procedure MainForm.UploadTo(FTPSrv,SrcFile,FtpTargetFld:String);
        var
         FUploadFrm:TFtpUploader;
         begin
          FUploadFrm:=TFtpUploader.Create(nil);
          if assigned(FUploadFrm) then
         begin
          FUploadFrm.FtpAdrs:=FTPSrv;
          FUploadFrm.SourceFile:=SrcFile;
          FUploadFrm.TargetFtpFld:=FtpTargetFld;
          FUploadFrm.Show;
         end;
         end;

        procedure MainForm.Button1Click(Sender: TObject);
         begin
        UploadTo('MyFtpSrv_1','MySrcFile_1','MyFtpTargetFld_1');
        end;

         procedure MainForm.Button2Click(Sender: TObject);
         begin
         UploadTo('MyFtpSrv_2','MySrcFile_2','MyFtpTargetFld_2');
         end;

// same with other 2 buttons 
```

FtpUploader 表单已创建/打开（4 个实例），问题是当我单击 StartUpload 按钮时，FTP 上传过程并未在所有这 4 个实例上启动，但我必须等待每个上传过程完成（完成）并且其他将自动启动，这意味着并非所有上传过程都同时启动。

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:37:50.210

似乎您必须将 Indy 库更改为一些非阻塞的后台库（基于事件或基于完成端口），或者使您的程序多线程（有自己的一堆问题，例如用户单击按钮 20 次或在进程进行时关闭表单，甚至在运行时关闭程序）。

基于[http://otl.17slon.com/book/doku.php?id=book:highlevel:async](http://otl.17slon.com/book/doku.php?id=book:highlevel:async)它可以看起来像这样：

```
 TFtpUploader = class(TForm)
  private
    CanCloseNow: boolean;

...

  procedure TFtpUploader.FormClose(Sender: TObject; var Action: TCloseAction);
  begin
    if Self.CanCloseNow
       then Action := caFree
       else Action := caIgnore;
  end;

  procedure TFtpUploader.MyUploadComplete;
  begin
    Self.CanCloseNow := True;
    Self.Close;
  end;

  procedure TFtpUploader.StartMyUpload;
  begin
    Self.CanCloseNow := false;
    Self.Enabled := False;
    Self.Visible := True;
    Application.ProcessMessages;

Parallel.Async(
  procedure
    var
    FtpUpStream: TFileStream;
    begin
     ftpUpStream:= TFileStream.create(FSrcFile, fmopenread)
     try
      with IdFTP do begin
       Host:= FFtpSrvAdrs;
       Username:='MyUserName';
       Password:='MyPassword';
       Connect(true, 1200)
       Passive:= true;
       ChangeDir(FTargetFtpFld)

       // this does not return until uploaded
       // thus would not give Delphi a chance to process buttons 
       //    pressed on other forms.
       Put(ftpUpStream,FSrcFile, false);
     end; 
    finally
      ftpUpStream.Free;
    end;
   end
,
  Parallel.TaskConfig.OnTerminated(
    procedure (const task: IOmniTaskControl)
    begin
      MyUploadComplete;
    end;
);
end; 
```

或者您可以使用更简单的 AsyncCalls 库[http://andy.jgknet.de/blog/bugfix-units/asynccalls-29-asynchronous-function-calls/](http://andy.jgknet.de/blog/bugfix-units/asynccalls-29-asynchronous-function-calls/)

# cakephp - CSS 不适用于 CakePHP 应用程序

> ID：15788264
> 
> 赞同：2
> 
> 时间：2013-04-03T13:09:32.050
> 
> 标签：cakephp

我在使用 CakePHP 时遇到问题，找不到 CSS。当我在浏览器中查看源代码时，我可以在 head 部分看到 cake 通用 CSS 链接。但是当我点击它查看实际的源代码时，我得到一个 404 not found 错误。

**更新：** 我已按照此处的说明进行操作：

[http://book.cakephp.org/2.0/en/installation/url-rewriting.html](http://book.cakephp.org/2.0/en/installation/url-rewriting.html)

确保 mod_rewrite 设置正确，但我仍然无法查看 CSS 文件。

**更新：** 这是 .htaccess 在我的根文件夹中的样子：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

这是 .htaccess 在我的应用程序文件夹中的样子：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

这就是我的 webroot 文件夹中的样子：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:07:33.670

I managed to solve it. The problem was with the way I set up my virtual host, my httpd-vhosts.conf file now looks like this:

```
<VirtualHost *:80>
    ServerAdmin webmaster@invoice.dev
    DocumentRoot "/Users/stephenxconnolly/Documents/Websites/invoice-new"
    ServerName invoice.dev
    <Directory "/Users/stephenxconnolly/Documents/Websites/invoice-new/">
         AllowOverride All
    </Directory>
#   ServerAlias www.dummy-host.example.com
    ErrorLog "/private/var/log/apache2/invoice.dev-error_log"
    CustomLog "/private/var/log/apache2/invoice.dev-access_log" common
</VirtualHost> 
```

This solved the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:14:49.567

您是否让 CakePHP 创建到 CSS 的链接？像这样：

```
echo $this->Html->css('cake.generic'); 
```

如果 Apache 指向 webroot，并且您的 CSS 在 webroot/css/cake.generic.css 中，那么您应该能够在以下位置浏览它

```
http://website/css/cake.generic.css 
```

如果你把 CSS 文件放在 webroot 中，你可以浏览它吗？

# packages - Satis 构建告诉身份验证失败

> ID：15788271
> 
> 赞同：0
> 
> 时间：2013-04-03T13:09:44.373
> 
> 标签：packages, composer-php, satis

我正在使用 satis 准备私有包存储库。我们正在使用 git 对源代码进行版本控制。当我在存储库地址中使用凭据时，一切正常，packages.json 是它应该包含适当内容的地方。但是当我删除这些凭据并尝试通过构建 packages.json

```
php bin/satis build config.json web/ 
```

我明白了

```
fatal: Authentication failed 
```

这是可以理解的。我想问有没有其他方法可以从 satis 对 git repo 进行身份验证，而不在 packages.json 中保留简单的凭据？我只补充说我无法通过 ssh 访问存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:56:47.160

问题解决了。我必须使用 .netrc 文件并将我的凭据存储在那里。现在一切都像音乐一样工作。

# probability - 计算 Minhash 的证明

> ID：15788276
> 
> 赞同：0
> 
> 时间：2013-04-03T13:10:00.423
> 
> 标签：probability, hash-function, minhash

我正在阅读 MinHash 技术来估计 2 个集合之间的相似性：给定集合 A 和 B，h 是散列函数，hmin(S) 是集合 S 的最小散列，即 hmin(S)=min(h(s )) 对于 S 中的 s。我们有以下等式：

p(hmin(A)=hmin(B))=|A∩B| / |A∪B|

这意味着A的最小哈希等于B的最小哈希的概率是A和B的Jaccard相似度。

我试图证明上述等式并提出我自己的证明：对于 a∈A 和 b∈B 使得 h(a)=hmin(A) 和 h(b)=hmin(B)。因此，如果 hmin(A)=hmin(B)，则 h(a)=h(b)。假设散列函数 h 可以将键散列到不同的散列值，所以 h(a)=h(b) 当且仅当 a=b，其概率为 |A∩B| / |A∪B|。但是，我的证明并不完整，因为哈希函数可以为不同的键返回相同的值。所以，我请求你帮助找到一个可以应用的证明，不管散列函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T21:00:39.540

我不能确定你的确切问题是什么。

但是，如果您正在寻找一种方法来证明：

> A的最小哈希等于B的最小哈希的概率是A和B的Jaccard相似度。

尝试查看[Anand Rajaraman 和 Jeff Ullman 的大规模数据集挖掘的第 3.3.3 节](http://infolab.stanford.edu/~ullman/mmds.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T00:30:18.620

将散列函数视为提供 (A ∪ B) 随机排列的一种手段。现在，想想那个排列。

使用您选择的排列*p*将 (A ∪ B) 的每个可能元素作为一行放入表格中。和两列A和B，像这样：

```
A = {1, 3, 5, 6}
B = {2, 3, 4, 6}
p = {5, 6, 1, 2, 4, 3} 
```

桌子：

```
 A  B
5  1  0
6  1  1
1  1  0
2  0  1
4  0  1
3  1  1 
```

只有两种类型的行，X：其中 A 和 B 为 1。 Y：其中 A != B

总共有 (A ∪ B) 行。但只有 (A ∩ B) 行是 Y 类型。第一行是 Y 类型之一的机会是 Y/(X+Y)。或 Pr[hmin(A) = hmin(B)] = (A ∩ B)/(A ∪ B)。

这正是 Nilesh 链接的书所说的，但我试图用另一个例子来解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T04:20:34.557

“无论散列函数如何”都无法证明这一点。试想一下：您可以使用一个非常糟糕的哈希函数，它会产生极其频繁的冲突（例如简单地将所有值二进制与运算在一起）。MinHash 将不再近似 Jaccard 相似性，但会报告更高的相似性。我所见过的 MinHash 证明假设哈希冲突将非常罕见以至于微不足道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-19T21:14:59.577

假设碰撞永远不会发生，或者可以忽略不计。你只需为你的哈希选择一个长度，这样它们碰撞的机会就会变得任意小。本文描述了各种项目数量和散列大小的界限。[https://en.wikipedia.org/wiki/Birthday_attack](https://en.wikipedia.org/wiki/Birthday_attack)

# web-services - MVC 4 在 ASP.Net Webservice 中使用现有的身份验证过程

> ID：15788277
> 
> 赞同：2
> 
> 时间：2013-04-03T13:10:03.150
> 
> 标签：web-services, authentication, asp.net-mvc-4, authorization

我今天花了几个小时试图弄清楚最好的方法来做到这一点。

我是 MVC 4 的新手，目前正在将旧的 .Net 3.5 Windows 窗体应用程序迁移到 MVC 4。

我们目前通过将用户的凭据传递给 ASP.Net SOAP Web 服务并返回一个名为 User 的实体来登录用户，该实体包含许多自定义字段。

如果 User Entity 不为 null 并且有 ID，我们将用户登录。

我知道在 MVC 中有一个新的成员资格提供程序以及一个 AuthorizeAttributes 类，但我不确定我是否真的可以利用它们。

理想情况下，我希望在整个应用程序中保持登录状态，因此如果用户注销或会话超时，则需要将它们重定向回登录表单。

我应该将用户实体存储在会话中并使用某种类型的全局过滤器还是有更好的方法来做到这一点？

# scala - 使用 org.specs2 对方法返回进行单元测试

> ID：15788287
> 
> 赞同：1
> 
> 时间：2013-04-03T13:10:57.340
> 
> 标签：scala, specs2

我想对嵌套在对象下的方法的返回值执行单元测试。例子：

```
package code.learn
import org.specs2.mutable._;
import com.learning.run.CMMDC;

class testing extends Specification {

    val t1 = Map(1 -> 6, 7 -> 12, 9 -> 13);
    "testing the results" in {
        foreach(t1) {
            case (key, value) =>
                CMMDC.compute(key, value) must_== value;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:09:56.163

您可以将地图作为 a 传递[`Context`](https://code.google.com/p/specs/wiki/DeclareSpecifications#Shared_contexts)，这是一种定义固定装置的方法。例如：

```
class testing extends Specification {

  var results: Map[Int, Int] = _
  val resultsMapOne = beforeContext(results = Map(1 -> 3, 5 -> 7))

  "sample method" definedAs resultsOne should {
    "with resultsMapOne" in {
      results foreach {
        case (key, value) => test.sampleMethod(key) must_== value
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:39:56.130

specs2 中有[一个`foreach`方法](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Matchers.html#With+sequences)（或者`foreachWhen`如果您更喜欢使用 a `PartialFunction`），它可以测试给定示例的多个值：

```
"testing the results" in {
  foreach(t1) { kv => test.sampleMethod(kv._1) must_== someList(kv._2) }
}

// or
"testing the results" in {
  foreachWhen(t1) { case (k, v) => test.sampleMethod(k) must_== someList(v) }
} 
```

# javascript - 如何通过滚动按钮打开新选项卡触发器

> ID：15788288
> 
> 赞同：1
> 
> 时间：2013-04-03T13:10:58.623
> 
> 标签：javascript, jquery, html

我正在制作一个 php/html 应用程序，它在表中显示一些数据，当用户单击行 ( `<tr>`) jquery 打开该记录时。

这是代码：

```
$.fn.linkRow = function(element) {
    thisRow = this.find('tbody tr');

    thisRow.on('click', function() {
        hrefLocation = $(this).find('td.link:first a').attr('href');
        if (hrefLocation) {
            window.location.href = hrefLocation;
        };
    }).addClass((thisRow.has('td.link')) ? 'pointer' : '');
    return this;
}; 
```

事实是：*用户无法在新选项卡中打开记录*。唯一的方法是复制和粘贴`href`...而我的用户不会这样做。

**如果对滚动按钮触发的事件**以及如何**打开新选项卡**进行一些研究，后者几乎是不可能的，所以......有人能想办法吗？

**编辑：**我的意思是鼠标滚轮......通常这会在新选项卡中打开一个链接。

PS：我必须使用表格，在某些时候我会为此制作一个基于 css 的表格布局（不需要 javascript），但我不能在这个版本的软件中做到这一点。

* * *

谢谢！

这是最终代码：

```
$.fn.linkRow = 函数（元素）{
    thisRow = this.find('tbody tr');

    thisRow.not('a').on('mouseup', function(e) {
        hrefLocation = $(this).find('td.link:first a:first').attr('href');
        如果（hrefLocation）{
           如果（e.which == 2）{
              window.open(hrefLocation);
           }
           别的{
              window.location.href = hrefLocation;
           }
        };
    }).addClass( ( thisRow.has('td.link') ) ? 'pointer' : '' );
    返回这个；
};
```

但是...鼠标滚轮点击不适用于我的意图：

如果您单击链接（`a`标签）> 打开一个新选项卡

如果您单击无链接（任何其他标签）> 它将根据您的鼠标位置滚动。*如果您向上移动鼠标，它会向上滚动，因此*

所以......我工作，但我绝对需要制作一个无 JavaScript 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:15:13.503

如果要在新选项卡中打开链接而不是在同一页面中，则需要替换

```
window.location.href = hrefLocation; 
```

和

```
window.open(hrefLocation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:24:37.563

使用**mouseup**更改**单击**并使用值 2 捕获 e.with （中间按钮）：

 **```
$.fn.linkRow = function(element) {
    thisRow = this.find('tbody tr');

    thisRow.on('mouseup', function(e) {
        hrefLocation = $(this).find('td.link:first a').attr('href');
        if ( hrefLocation ) {
           if (e.which == 2) { 
              window.open(hrefLocation);
           }
           else{
              window.location.href = hrefLocation;
           }
        };
    }).addClass( ( thisRow.has('td.link') ) ? 'pointer' : '' );
    return this;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:16:17.853

试试下面的方法

```
$(document).scroll(function(){
if(!tabOpen){
    window.open('url', 'window name', 'window settings');
    tabOpen = true;
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:17:32.407

几个月前我遇到了类似的问题。

要么将每个 td-content 包装成一个普通的`a`-Tag（并使用 _target="blank"），在这种情况下不需要 javascript！

...或者你使用 js：

```
thisRow.click(function(){
  window.open('url', 'window name', 'window settings');
  return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:20:27.447

要在新选项卡中打开，请使用：

```
window.open(hrefLocation);
window.open(hrefLocation,'_blank'); //Or this
window.open(hrefLocation,'_newtab'); //Or this 
```

其中之一应该工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:23:28.410

`window.open()`可以解决问题，但它也取决于浏览器配置

不确定滚动按钮是什么意思，但如果是鼠标滚轮，那么您可以使用此脚本在滚轮向上/向下触发事件。

[http://brandonaaron.net/code/mousewheel/demos](http://brandonaaron.net/code/mousewheel/demos)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T13:24:54.263

我不确定您是否想知道如何使用 jquery 进行中间点击事件，或者您是否想知道如何打开一个新选项卡，但这里有：

**中间点击事件：**

```
$("tr").live('mousedown', function(e) { 
 if( (e.which == 2) ) {
   alert("middle button"); 
 }
   e.preventDefault();
}); 
```

**新标签：**

正如所有其他人所说，使用以下内容：

```
window.open(href); 
```

通过中键单击和打开链接：

```
$("tr").live('mousedown', function(e) { 
 if( (e.which == 2) ) {
    window.open(href);
 }
   e.preventDefault();
}); 
```

**编辑：** 一些来源： [Jquery：检测是否单击了鼠标中键或右键，如果是，请执行以下操作：](https://stackoverflow.com/questions/4007482/jquery-detect-if-middle-or-right-mouse-button-is-clicked-if-so-do-this?rq=1)

[Detect middle button click (scroll button) with jQuery](https://stackoverflow.com/questions/5392442/detect-middle-button-click-scroll-button-with-jquery)的回答也可以帮助解决一些与IE的兼容性问题**

# python - 将使用 MATLAB 创建的矩阵转换为具有类似语法的 Numpy 数组

> ID：15788290
> 
> 赞同：4
> 
> 时间：2013-04-03T13:11:03.917
> 
> 标签：python, numpy, scipy

我正在玩我正在学习的课程的代码片段，它最初是用 MATLAB 编写的。我使用 Python 并将这些矩阵转换为 Python 用于玩具示例。例如，对于以下 MATLAB 矩阵：

```
s = [2 3; 4 5]; 
```

我用

```
s = array([[2,3],[4,5]]) 
```

以这种方式重新编写所有玩具示例对我来说太耗时了，因为我只想看看它们是如何工作的。有没有办法直接将 MATLAB 矩阵作为字符串提供给 Numpy 数组或更好的替代方法？

例如，类似：

```
s = myMagicalM2ArrayFunction('[2 3; 4 5]') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:52:31.097

[`numpy.matrix`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.matrix.html)可以将字符串作为参数。

```
Docstring:
matrix(data, dtype=None, copy=True)

[...]

Parameters
----------
data : array_like or string
   If `data` is a string, it is interpreted as a matrix with commas
   or spaces separating columns, and semicolons separating rows. 
```

* * *

```
In [1]: import numpy as np

In [2]: s = '[2 3; 4 5]'    

In [3]: def mag_func(s):
   ...:     return np.array(np.matrix(s.strip('[]')))

In [4]: mag_func(s)
Out[4]: 
array([[2, 3],
       [4, 5]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:22:19.720

在 Matlab 中保存一组示例矩阵并将它们直接加载到 python 中怎么样：

[http://docs.scipy.org/doc/scipy/reference/tutorial/io.html](http://docs.scipy.org/doc/scipy/reference/tutorial/io.html)

**编辑：**

或者不确定这有多健壮（只是将一个简单的解析器放在一起，它可能以其他方式更好地实现），但类似于：

```
import numpy as np

def myMagicalM2ArrayFunction(s):
    tok = []
    for t in s.strip('[]').split(';'):
        tok.append('[' + ','.join(t.strip().split(' ')) + ']')

    b = eval('[' + ','.join(tok) + ']')
    return np.array(b) 
```

对于一维数组，这将创建一个形状为 (1,N) 的 numpy 数组，因此您可能希望根据您的操作`np.squeeze`来获取一个 (N,) 形状的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-12T15:50:49.097

如果你想要一个 numpy 数组而不是一个 numpy 矩阵

```
 def str_to_mat(x):
        x = x.strip('[]')
        return np.vstack(list(map(lambda r: np.array(r.split(','), dtype=np.float32), x.split(';')))) 
```

# mysql - 动态编辑 csv 文件中的列表

> ID：15788292
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:08.770
> 
> 标签：mysql, csv, sed, awk

我有一个看起来像这样的 csv 文件：

```
col1|col2

1|a
2|g
3|f

1|m
3|k
2|n

2|a
1|d
4|r
3|s 
```

where`|`分隔列，并希望将其转换为同质的东西，例如：

```
------------------------
fields  >    1  2  3  4
record1      a  g  f
record2      m  n  k
record3      d  a  s  r
------------------------ 
```

有没有办法做到这一点？使用 mysql 或编辑 csv 文件会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:30:57.860

我写了这个，适用于你的例子：**gawk**是必需的

```
awk -F'|' -v RS="" '{for(i=1;i<=NF;i+=2)a[$i]=$(i+1);asorti(a,d);
for(i=1;i<=length(a);i++)printf "%s", a[d[i]]((i==length(a))?"":" ");delete a;delete d;print ""}' file 
```

例子：

```
kent$  cat file

1|a
2|g
3|f

1|m
3|k
2|n

2|a
1|d
4|r
3|s
kent$  awk -F'|' -v RS="" '{for(i=1;i<=NF;i+=2)a[$i]=$(i+1);asorti(a,d);
for(i=1;i<=length(a);i++)printf "%s", a[d[i]]((i==length(a))?"":" ");delete a;delete d;print ""}' file
a g f
m n k
d a s r 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:29:17.353

这是一个 awk 解决方案：

```
BEGIN{
    RS=""
    FS="\n"
}
FNR==NR&&FNR>1{
    for (i=1;i<=NF;i++) {
        split($i,d,"|")
        if (d[1] > max)
            max = d[1]
    }
    next
}   
FNR>1&&!header{
    printf "%s\t","fields  >"
    for (i=1;i<=max;i++)
        printf "%s\t",i
    print ""
    header=1
}
FNR>1{    
    printf "record%s\t\t",FNR-1

    for (i=1;i<=NF;i++) {
        split($i,d,"|")
        val[d[1]] = d[2]    
    }

    for (i=1;i<=max;i++)
        printf "%s\t",val[i]?val[i]:"NULL"
    print ""

    delete val
} 
```

另存为`script.awk`并运行*（注意它使用两遍方法，因此您需要两次提供文件）*：

```
$ awk -f script.awk file file
fields  >       1       2       3       4
record1         a       g       f       NULL
record2         m       n       k       NULL
record3         d       a       s       r 
```

将该行添加`5|b`到第一个记录中`file`给出输出：

```
$ awk -f script.awk file file
fields  >       1       2       3       4       5
record1         a       g       f       NULL    b
record2         m       n       k       NULL    NULL
record3         d       a       s       r       NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:18:19.297

```
$ cat file
col1|col2

1|a
2|g
3|f
5|b

1|m
3|k
2|n

2|a
1|d
4|r
3|s
$
$ awk -f tst.awk file
fields >    1    2    3    4    5
record1     a    g    f NULL    b
record2     m    n    k NULL NULL
record3     d    a    s    r NULL
$
$ cat tst.awk
BEGIN{ RS=""; FS="\n" }

NR>1 {
   ++numRecs

   for (i=1;i<=NF;i++) {
      split($i,fldNr2val,"|")
      fldNr = fldNr2val[1]
      val   = fldNr2val[2]

      recNrFldNr2val[numRecs,fldNr] = val

      numFlds = (fldNr > numFlds ? fldNr : numFlds)
   }
}

END {
   printf "fields >"
   for (fldNr=1;fldNr<=numFlds;fldNr++) {
      printf " %4s", fldNr
   }
   print ""

   for (recNr=1; recNr<=numRecs; recNr++) {
      printf "record%d ", recNr
      for (fldNr=1;fldNr<=numFlds;fldNr++) {
         printf " %4s", ((recNr,fldNr) in recNrFldNr2val ? recNrFldNr2val[recNr,fldNr] : "NULL")
      }
      print ""
   }
} 
```

# php - drupal中的“创建新帐户”块

> ID：15788296
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:14.047
> 
> 标签：php, drupal, drupal-7, drupal-forms

我正在开发一个 drupal 项目，我需要在内容页面上使用“创建新帐户”表单。任何人都可以帮我解决这个问题。是否有任何模块或任何替代方法可以将“创建新帐户”作为一个块。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:34:49.107

创建一个新模块以使用[hook_block_info](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_info/7)和[hook_block_view](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7)添加自定义块。

然后使用此代码示例：

```
function yourmodule_block_info()
{
   $blocks = array();
   $blocks['my_registerform'] = array(
    'info' => t('Custom registration block'),
    'cache' => DRUPAL_NO_CACHE,
   );
   return $blocks
}

function yourmodule_block_view($delta = "")
{
    $block = array();

    if($delta = "my_registerform")
    {
        $form = drupal_get_form("user_register_form");
        $block['subject'] = t("Create new account");
        $block['content'] = drupal_render($form);
    }

    return $block;
} 
```

启用此模块后，将创建一个包含 drupal 注册表单的新块。随时转到块管理器页面`admin/structure/block`放置它。

希望这可以帮助。

# magento - Magento 1 - 模块控制器不工作

> ID：15788297
> 
> 赞同：1
> 
> 时间：2013-04-03T13:11:15.833
> 
> 标签：magento, magento-1.7

想创建一个模块，我可以在其中使用目录->产品模型动态创建产品，并将控制重定向到产品的评论页面。只需要一个控制器和一个动作。没有块、助手、模板……什么都不需要。

但似乎控制器动作没有正确路由，代码或配置中有一些错误......得到 404 not found 错误

**试试这个网址：**

```
http://localhost/magento_test/dynamicproduct/index/index 
```

命名空间：Waqasalieee

模块名称：动态产品

**Magento 版本：** 1.7.0.2

**以下是文件内容：**

本地/Waqasalieee/Dynamicproduct/controllers/IndexController.php

```
<?php
    class Waqasalieee_Dynamicproduct_IndexController extends Mage_Core_Controller_Front_Action
    {
        public function indexAction() {
            die('working in index');
        }
    }
?> 
```

本地/Waqasalieee/Dynamicproduct/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Waqasalieee_Dynamicproduct>
            <version>1.0</version>
        </Waqasalieee_Dynamicproduct>
    </modules>
    <frontend>
        <routers>
            <dynamicproduct>
                <use>standard</use>
                <args>
                    <module>Waqasalieee_Dynamicproduct</module>
                    <frontName>dynamicproduct</frontName>
                </args>
            </dynamicproduct>
        </routers>
    </frontend>

</config> 
```

应用程序/etc/modules/Waqasalieee_Dynamicproduct.xml

```
<?xml version='1.0'?>
<config>
    <modules>
        <Waqasalieee_Dynamicproduct>
            <codepool>local</codepool>
            <active>true</active>
        </Waqasalieee_Dynamicproduct>
    </modules>
</config> 
```

它应该显示一些错误或“在索引中工作”（字符串）**，但它给出了 404 not found 错误。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-11T16:36:21.747

我有同样的症状并降落在这里。对我来说，错误不是错误的 XML 配置，而是商店代码实际上已添加到 URL（这是一个 magento 功能，而不是错误），因此我的控制器只能通过向 URL 添加有效的商店代码（如`http://mystore/<storecode>/<controller>/<action>`. 就我而言`http://mage.localhost/en/customer/check`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T13:50:42.710

在您的 config.xml 中使用 codePool 而不是 codepool。

```
<?xml version='1.0'?>
<config>
    <modules>
        <Waqasalieee_Dynamicproduct>
            <codePool>local</codePool>
            <active>true</active>
        </Waqasalieee_Dynamicproduct>
    </modules>
</config> 
```

# php - Oauth Freelancer.com 找不到令牌

> ID：15788298
> 
> 赞同：1
> 
> 时间：2013-04-03T13:11:17.093
> 
> 标签：php, oauth, drupal-7, freelancer.com-api

我目前正在使用带有[oauthconnector](http://drupal.org/project/oauthconnector)的 drupal来与不同的服务进行交互。

我正在尝试连接 Freelancer.com（沙盒环境），当我登录服务时出现错误 (REMOVED_984c3db">https://www.sandbox.freelancer.com/users/api- token/auth.php?oauth_token=21b7e73_ *REMOVED* _984c3db - 为了安全起见，我在这里删除了一些 oauth_token :) )

> 找不到令牌。
> 
> 在 1 秒内，您将被自动重定向。
> 
> 或单击此处继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:22:13.507

我终于想通了。

OAUTH 协议中获取 requestToken 的正常行为是发送一个 HTTP-POST，其中包含一个 http.authorization 标头。这里面的数据，如下

oauth_version=\"1.0\",oauth_nonce=\"87_ *HIDDEN* _66bd\",oauth_timestamp=\"1365000670\",oauth_consumer_key=\"de99_ *HIDDEN* _cf18\",oauth_callback=\" *htt_HIDDEN_Fauthorized* \",oauth_signature_method=\" HMAC-SHA1\",oauth_signature=\"hyT_HIDDEN *_sc* %3D\"

可悲的是，freelancer.com 不能接受这一点。这些参数必须在 HTTP-GET 中发送，数据作为查询参数。

像这样：/RequestRequestToken/requestRequestToken.json?oauth_version=1.0&oauth_nonce= *5bb_HIDDEN* _144&oauth_timestamp=1365013875&oauth_consumer_key=de9_ *HIDDEN* _cf18&oauth_callback=http_ *HIDDEN* _authorized &oauth_signature_method=HMAC-SHA1& *oauth_signD3*

奇怪的是，“错误”的请求实际上返回了一个 request_token - 这是行不通的。

# haskell - 如何在 Haskell 中为我的应用程序创建菜单

> ID：15788299
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:22.147
> 
> 标签：haskell, menu

我目前正在 haskell 中创建一个应用程序，它允许用户添加条目、删除条目并查看文本文件中的信息。我想知道的是如何创建一个菜单，以便在运行应用程序时会出现这样的菜单：

```
Main Menu
1) Add Entry
2) Remove Entry
3) View all information 
```

一旦用户选择了 1-3 之间的数字，它将执行添加、删除或查看功能，然后循环返回菜单。目前，当我运行应用程序时，我可以添加一个新用户，然后它会在文件中显示新用户。这是因为代码没有被拆分成单独的函数，因此可以一次性执行。

# silverlight - RIA 服务的 Silverlight 部署问题

> ID：15788301
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:23.217
> 
> 标签：silverlight, iis, ria

我想知道是否有人可以帮助解决我在 Silverlight 应用程序中看到的一个奇怪的部署问题。

它已经部署了数百次而没有出现问题，我（以为）我知道所有先决条件，但最近我在部署后发现 RIA 服务存在一些问题。

当我查看 Fiddler 并尝试进一步调试它们时，我得到**500 System.ServiceModel.ServiceActivationException**错误，关闭自定义错误，直接执行 WCF 服务，它似乎是由 System.ServiceModel.DomainServices 的 FileNotFoundException 引起的.托管 DLL。

RiaServices 依赖项在我们部署时并未安装到 GAC 中，但它们包含在我们应用程序的 bin 目录中（因此**CopyLocal = True**）。

这以前一直工作得很好，但现在好像 IIS 看不到这些 DLL。如果我在服务器上运行**msiexec /i RiaServices.msi SERVER=TRUE**它一切都开始正常工作。我宁愿不必在每次安装时都像这样将 DLL 安装到 GAC 中，并且当它应该可以正常部署它们时需要另一个步骤（并且以前总是这样做！）。

有没有人知道为什么这会突然停止对新安装起作用？据我所知，安装的一切都与往常一样，因此在 Win Server 2008 R2 机器上安装了 .NET 4、IIS 6、ASP.NET 等。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:16:47.230

我们缺少 System.ServiceModel.DomainServices.Hosting.OData.Dll 引用，它以某种方式从我们的项目中删除，因此出现了上面的问题。

# c++ - Creating a big size array of type char and copying file characters

> ID：15788302
> 
> 赞同：1
> 
> 时间：2013-04-03T13:11:30.240
> 
> 标签：c++, arrays, string, file, fstream

I have to copy characters of a file in a big size array, so I created this code:

```
std::vector<std::vector<char> > strings;

strings.resize(rows);

for (int i = 0; i < rows; i++)  
{ 
    strings[i].resize(columns); 
}

ifstream in("filename.txt");

for (int i = 0; i < rows; i++)    
    in.getline(strings[i], columns); 
```

`strings` should contain all the characters of the file, but when I compile this program, I have the following error:

> no matching function for call to ‘std::basic_ifstream >::getline(std::vector >&, int)’</p>

(and others error lines)

How can I copy all characters of a file in a big char array?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:54:22.313

正如 OGH 建议的那样，我将使用字符串标题的 getline`std::vector<std::string> strings;`代替`vector<vector<char>> strings;`和 qork：

`getline(in, strings[i]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:18:27.250

`in.getline()`不能将向量`char`作为其第一个参数。你应该使用`std::string`.

你可以做`getline(in, strings[i]);`。

要填写二维向量的值，您可以执行以下操作：

```
for (int i = 0; i < rows; i++) {
  for (int j = 0; j < columns; j++) {
    in >> strings[i][j];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:20:18.073

你应该使用`std::string`instread of`std::vector<char>`

如果由于某种原因你真的需要使用数据结构`std::vector<std::vector<char> >`

然后用于`std::string`读取文件然后将其转换为`std::vector<char>`但我不明白你为什么要这样做

# .htaccess - 用变量重写 URL (.htaccess)

> ID：15788303
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:33.060
> 
> 标签：.htaccess, url, variables, rewrite

我创建的 CMS 使用一个名为“文件名”的变量，该变量通过 URL 传递来生成页面。

我的典型 URL 如下所示：

```
/index.php?filename=about.html 
```

我想修改我的 URL 看起来像这样：

```
/about.html 
```

当然，我也希望我的 URL 在第一次访问页面时看起来像这样：

```
/index.html 
```

（替换`.php`为`.html`）

我是使用该`.htaccess`文件的新手，但我真的很想修改我的 URL 以使其看起来如此，我希望这是可能的。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:30:45.037

试试这个：

```
Options +FollowSymLinks -MultiViews

<IfModule mod_rewrite.c> 
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^([0-9a-zA-Z\-]+.html)$ index.php?filename=$1 [L,NC]
</IfModule> 
```

例如，如果我运行：`http://so.localhost/This-is-your-page.html`结果`var_dump($_GET);`是：

```
array (size=1)
  'filename' => string 'This-is-your-page.html' (length=22) 
```

我希望我有所帮助。

# windows - VB6 copy/paste image over RDP

> ID：15788304
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:34.840
> 
> 标签：windows, vb6, remote-desktop

I have a problem where I'm using the Snipping Tool in Windows 7 to cut a bitmap and copy it to the clipboard on my local computer, then paste the clipboard bitmap in another application (VB6 legacy system) over RDP.

The problem is that the pasted image's rightmost 6 pixels (approx) get shifted to the left.

Is this a known issue of RDP? Is there a way around this problem?

Thanks,

Ivan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:19:54.653

不确定潜在的“错误”，但在 Windows 的截图工具之前，我曾经使用过很棒的 Snaggit：[http ://www.techsmith.com/download/snagit/](http://www.techsmith.com/download/snagit/)

如果问题出在剪贴板中（不确定如何，但你永远不知道），我还建议查看 Ditto，因为它允许与剪贴板进行更灵活的交互：http: [//ditto-cp.sourceforge.net/](http://ditto-cp.sourceforge.net/)

# java - Ant - 构建脚本找不到属性文件中定义的路径元素

> ID：15788306
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:46.647
> 
> 标签：java, ant, build

我有一个具有以下目标的 ant 构建脚本：

```
<target name="_initLiveProps">
        <property file="buildscripts/live.properties"/>
</target>

<target name="buildLive"  depends="_initLiveProps">
        <property file="buildscripts/live.properties"/>
</target> 
```

在构建脚本中，我声明了几个路径元素，如下所示：

```
<path id="project.class.path">      
        <pathelement location="./../lib/log4j-1.2.16.jar" />
        <pathelement location="${product-def.jar}"/>
</path> 
```

product-def.jar 定义在 buildscripts/live.properties 文件中定义为

```
product-def.jar=./../lib/product-def/live/product-def.jar 
```

当我构建项目（使用 ant buildLive）时，我得到编译错误，主要是因为它找不到 product-def.jar 中定义的类。

我试图打印出类路径，如下所示

```
<property name="myclasspath" refid="project.class.path"/>
<echo message="${myclasspath}" /> 
```

输出结果为`c:\product\lib\log4j-1.2.16.jar;c:\product\${product-def.jar}`

以上表明以下定义不正确

```
<pathelement location="${product-def.jar}"/> 
```

定义属性文件中定义的路径元素的正确方法是什么？

## 编辑

我认为问题在于 project.class.path 的定义是在属性文件加载到 buildLive 目标之前初始化的。有没有办法将 project.class.path 的初始化延迟到 buildLive 目标完成之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:29:36.147

> 有没有办法将 project.class.path 的初始化延迟到 buildLive 目标完成之后？

把`<path>`定义放在里面`<target>`

```
<target name="_initLiveProps">
        <property file="buildscripts/live.properties"/>
        <path id="project.class.path">      
                <pathelement location="./../lib/log4j-1.2.16.jar" />
                <pathelement location="${product-def.jar}"/>
        </path>
</target> 
```

`<path>`对所有（直接或间接）依赖于此的目标都是可见的。

如果您有多个加载不同属性的不同目标，例如`_initLiveProps`,`_initDevProps`等，那么您可以将`<path>`定义放入一个公共目标中，如下所示

```
<target name="classpath">
        <path id="project.class.path">      
                <pathelement location="./../lib/log4j-1.2.16.jar" />
                <pathelement location="${product-def.jar}"/>
        </path>
</target>

<target name="_loadLiveProps">
        <property file="buildscripts/live.properties"/>
</target>
<target name="_initLiveProps" depends="_loadLiveProps, classpath" />

<target name="_loadDevProps">
        <property file="buildscripts/dev.properties"/>
</target>
<target name="_initDevProps" depends="_loadDevProps, classpath" /> 
```

# validation - 如何将自定义 jsf 验证器绑定到以编程方式创建的 HTML 元素？

> ID：15788307
> 
> 赞同：2
> 
> 时间：2013-04-03T13:11:49.300
> 
> 标签：validation, jsf

我正在使用 JSF 2.0 并希望将我的自定义 RangeValidator 附加到 HtmlInputText。在我的支持 bean 中，有一个创建 HTMLInputText 的片段。如果我添加一个默认验证器，我的代码会像预期的那样工作。如果我以相同的方式（通过使用 FacesContext ...）添加我的自定义 RangeValidator，则会出现错误，更准确地说是“未知 id”错误。如果我使用 new 关键字创建一个实例，似乎我无法使用我的访问器方法，更准确地说，我的 HtmlInputText 似乎将在运行时使用新创建的 RangeValidator 实例，因此属性值是最小值 = 0并且最大值 = 0，我的验证器没用。如何让我的自定义验证器正常工作？提前致谢。

```
// Snippet which creates HTML-Components
if ((integerField.getMaximalValue() != null) && (integerField.getMinimalValue() != null)) { // serverside validation required
    // Default JSF Validator - works!
    // final LongRangeValidator validator = (LongRangeValidator) FacesContext.getCurrentInstance().getApplication().createValidator(LongRangeValidator.VALIDATOR_ID);
    // CustomValidator - ERROR: Unknown validator id; 
    final RangeValidator validator = (RangeValidator) FacesContext.getCurrentInstance().getApplication().createValidator("mypackage.validators.RangeValidator");
    // construct custom validator instance - not working, seems to be a different instance!
    // RangeValidator validator = new RangeValidator();
    validator.setMaximum(integerField.getMaximalValue());
    validator.setMinimum(integerField.getMinimalValue());    
    inputInteger.addValidator(validator);
}

// Validator
@FacesValidator("RangeValidator")
public class RangeValidator implements Validator {
    private int minimum;
    private int maximum;
    @Override
    public void validate(FacesContext context, UIComponent uiComponent, Object value) throws ValidatorException {
        //System.out.println("RangeValidator.validate: " + value);
        int val = Integer.parseInt((String) value);
        if ((val <= this.getMaximum()) && (val >= this.getMinimum())){
            // ok
        } else {
            FacesMessage fm = new FacesMessage();
            String message = "Das Feld " + uiComponent.getClientId() + " liefert Validierungsfehler!";
            fm.setSeverity(FacesMessage.SEVERITY_ERROR);
            fm.setSummary(message);
            fm.setDetail(message);
            throw new ValidatorException(fm); 
        }
    }
    // Accessors
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T09:58:49.623

我找到了解决这个问题的方法： RangeValidator 也需要实现 Serializable-interface 并且一切都会像预期的那样工作；

# c# - Getting most specific interface for two types

> ID：15788308
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:50.657
> 
> 标签：c#, generics, reflection

I'm trying to get the most specific interface that both types implement. Getting the list of interfaces is fairly easy:

```
var interfaces = leftType.GetInterfaces().Intersect(rightType.GetInterfaces()); 
```

Then, I traverse the list and remove interfaces that are "included" into other interfaces:

```
var remaining = interfaces.ToDictionary(i => i, i => true);
foreach(var iface in interfaces)
    foreach(var subIface in iface.GetInterfaces())
        remaining.Remove(subIface); 
```

However, when trying to get the most common interface for `int[]` and `List<int>`, I get a list of three interfaces:

*   `IList` (non-generic)
*   `IList<int>`
*   `IReadOnlyList<int>`

First of all, why doesn't `IList<T>` implement non-generic `IList`, while `IEnumerable<T>` does actually implement `IEnumerable`?

Then, the `IReadOnlyList` causes a certain confusion. The name implies that the container that implements the interface *prohibits* modification, but the usage, on the contrary, implies that the container allows read access and doesn't care about modifications. But if so, why doesn't `IList<T>` implement `IReadOnlyList<T>`?

Maybe the whole approach is incorrect, and there's a more clever way to detect the most specific interface?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:26:12.273

`IList<T>`没有实现`IList`，因为`IList<T>`允许您传入对象。在这里允许使用非泛型接口会破坏类型安全。
想象一下：

```
IList list = new List<WhateverClass>();
list.Add(new object()); // Runtime error because the type doesn't match 
```

`IEnumerable<T>`只允许你取出对象，而不是传递它们（`T`是协变的）。您可以遍历 an 的元素并像s`IEnumerable<T>`一样对待所有项目。`object`所以`IEnumerable<T>`可以`IEnumerable`毫无问题地实施。

`List<T>`此外， implements的事实`IReadOnlyList<T>`只是意味着`List<T>`履行接口所需的合同（这并没有明确禁止实际可修改）。
如果您只需要对列表的读取权限，则可以将 a 视为`List<T>`只读列表。

# ios - UIScrollView 行为奇怪

> ID：15788309
> 
> 赞同：0
> 
> 时间：2013-04-03T13:11:55.437
> 
> 标签：ios, cocoa-touch

我将 UIScrollView 的 subview 的高度设置为 768，UIScrollView 的 contentSize 为 1024*768 。但是当我向上或向下滑动时，子视图（UIImageView）会向上或向下滚动一点。我不知道为什么。

这是我的代码

```
 -(void)viewDidLoad
{
    [super viewDidLoad];

    // scrollView is an outlet of UIScrollView
    [scrollView setBackgroundColor:[UIColor blackColor]];
    [scrollView setCanCancelContentTouches:NO];
    scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView.clipsToBounds = YES;     // default is NO, we want to restrict drawing within our scrollview
    scrollView.scrollEnabled = YES;

    // pagingEnabled property default is NO, if set the scroller will stop or snap at each photo
    // if you want free-flowing scroll, don't set this property.
    scrollView.pagingEnabled = YES;

    // load all the images from our bundle and add them to the scroll view
    NSUInteger i;
    imageCount=3;
    for (i = 1; i <= imageCount; i++)
    {
        NSString *imageName = [NSString stringWithFormat:@"tu%d_s.png", i];
        UIImage *image = [UIImage imageNamed:imageName];
        if(!image)
        {
            NSLog(@"%@ is nil",imageName);
        }
        UIImageView *TempImageView = [[UIImageView alloc] initWithImage:image];

        // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
        CGRect rect = TempImageView.frame;
        rect.size.height = 768;
        rect.size.width = 1024;
        TempImageView.frame = rect;
        TempImageView.tag = i;  // tag our images for later use when we place them in serial fashion
        [scrollView addSubview:TempImageView];
        NSLog(@"viewDidLoad TempImageView width %f,height %f,x %f,y %f",TempImageView.frame.size.width,TempImageView.frame.size.height,TempImageView.frame.origin.x,TempImageView.frame.origin.y);

    }

    [self layoutScrollImages];  // now place the photos in serial layout within the scrollview

}

- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scrollView subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (1024);
        }
        NSLog(@"shang2 layoutScrollImages width %f,height %f,x %f,y %f",view.frame.size.width,view.frame.size.height,view.frame.origin.x,view.frame.origin.y);
    }

    // set the content size so it can be scrollable
    [scrollView setContentSize:CGSizeMake((imageCount * 1024), 768)];
    NSLog(@"shang2 content width %f,height %f,x %f,y %f",scrollView.contentSize.width,scrollView.contentSize.height,scrollView.frame.origin.x,scrollView.frame.origin.y);
} 
```

这是Xcode日志

```
2013-04-03 20:50:23.939 animation[1464:c07] viewDidLoad TempImageView width 1024.000000,height 768.000000,x 0.000000,y 0.000000
2013-04-03 20:50:23.952 animation[1464:c07] viewDidLoad TempImageView width 1024.000000,height 768.000000,x 0.000000,y 0.000000
2013-04-03 20:50:23.995 animation[1464:c07] viewDidLoad TempImageView width 1024.000000,height 768.000000,x 0.000000,y 0.000000
2013-04-03 20:50:23.995 animation[1464:c07] shang2 layoutScrollImages width 7.000000,height 5.000000,x 741.000000,y 1019.000000
2013-04-03 20:50:23.996 animation[1464:c07] shang2 layoutScrollImages width 1024.000000,height 768.000000,x 0.000000,y 0.000000
2013-04-03 20:50:23.996 animation[1464:c07] shang2 layoutScrollImages width 1024.000000,height 768.000000,x 1024.000000,y 0.000000
2013-04-03 20:50:23.996 animation[1464:c07] shang2 layoutScrollImages width 1024.000000,height 768.000000,x 2048.000000,y 0.000000
2013-04-03 20:50:23.996 animation[1464:c07] shang2 content width 3072.000000,height 768.000000,x 0.000000,y 0.000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:15:06.583

如果包含滚动视图的视图控制器具有 a`UINavigationController`或`UITabBarController`，则视图将调整自身大小以适应导航控制器的 44 像素后为 724 的边界，因此滚动视图可以滚动 44 像素。

# java - Which JAR contains the weblogic.servlet.security.ServletAuthentication class?

> ID：15788311
> 
> 赞同：2
> 
> 时间：2013-04-03T13:11:59.713
> 
> 标签：java, security, jakarta-ee, glassfish, weblogic

I trying to create a servlet to logout from multiple JSF applications running on Oracle Glassfish. I tried the following code,

```
weblogic.servlet.security.ServletAuthentication.logout(request);
weblogic.servlet.security.ServletAuthentication.invalidateAll(request);
weblogic.servlet.security.ServletAuthentication.killCookie(request); 
```

but I am not able to find the JAR file containing the required class in order to get the code to compile. I downloaded Oracle WebLogic and tried various of its JARs, but no one of them made the code to compile.

Which JAR does contain the required class and where can I find it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:51:41.910

您要查找的类在一个名为`wls-api.jar`.

但是，您可能正在寻找错误的东西，因为如果您正在开发在 Glassfish 上运行的应用程序，您应该坚持使用标准技术（例如，[此处](https://blogs.oracle.com/enterprisetechtips/entry/adding_authentication_mechanisms_to_the)或[此处](http://docs.oracle.com/cd/E19798-01/821-1752/gizeb/index.html)描述的 JSR-196 ）。

因为您尝试实现的内容并不明显，所以我无法提供任何更详细的建议，但有[大量](http://www.edc4it.com/2011/05/09/understanding-java-security-and-jaas-part-1/) 关于 Java EE 安全[性的](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html) [文档可用。](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jaas/tutorials/GeneralAcnOnly.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:23:03.510

我想你需要这个 jar 文件：

`<JDeveloper Home>\Middleware\wlserver_10.3\server\lib\weblogic.jar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T20:15:46.773

该文件位于`<WLS_HOME>\middleware\wlserver\server\lib\wls-api.jar`

# php - PHP从数组项创建变量

> ID：15788318
> 
> 赞同：0
> 
> 时间：2013-04-03T13:12:37.947
> 
> 标签：php, sql, arrays, variables

我为开始时间选择和结束时间创建了一个下拉列表。我有 3 个数组，time_group、time_name 和 dotw。最终结果如下所示：

星期一 [dropdown] - [dropdown]
星期二 [dropdown] - [dropdown]
星期三 [dropdown] - [dropdown] 等等

我正在尝试使用实际页面上的预设变量检查 sql 行。

```
$char_avail_start_monday =  $row['char_avail_start_monday'];
$char_avail_stop_monday =  $row['char_avail_stop_monday']; 
```

现在在下面的代码中，我每天循环并使用正确的值创建两个下拉列表中的每一个。但是我有一个 IF 语句，如果 db 单元格为空，请执行 X，如果 = 到 Y 执行某些操作等。看来我的编码工作不正常。我创建了 ${char_avail_start_}.$dotw[$d] （例如：$char_avail_start_monday），它没有指向我想要查看的预定义行。

```
 //this is using my previous variable
    echo "row has ".$char_avail_start_monday ." ";
    //this is using my attempt at generating it and seeing it it can pull from the row
    echo "row has " .${char_avail_start_}.$dotw[$d] ." <br/>"; 
```

我得到的输出是：

“行有 2000 行有星期一”

这似乎只是 $dotw[$d] 部分。我想做的事是不可能的吗？还是我只是做错了？

完整代码是：

```
<?php

//CREATE START TIMES ARRAY
$time_group = array('0000', '0030', '0100', '0130', '0200', '0230', '0300', '0330', '0400', '0430', '0500', '0530', '0600', '0630', '0700'
  , '0730', '0800', '0830', '0900', '0930', '1000', '1030', '1100', '1130', '1200', '1230', '1300', '1330', '1400', '1430', '1500', '1530'
  , '1600', '1630', '1700', '1730', '1800', '1830', '1900', '1930', '2000', '2030', '2100', '2130', '2200', '2230', '2300', '2330');

//CREATE FORMATED TIME ARRAY
$time_name = array('Midnight', '12:30 AM', '01:00 AM', '01:30 AM', '02:00 AM', '02:30 AM', '03:00 AM', '03:30 AM', '04:00 AM', '04:30 AM', '05:00 AM', '05:30 AM', '06:00 AM', '06:30 AM', '07:00 AM'
  , '07:30 AM', '08:00 AM', '08:30 AM', '09:00 AM', '09:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', 'Noon', '12:30 PM', '01:00 PM', '01:30 PM', '02:00 PM', '02:30 PM', '03:00 PM', '03:30 PM'
  , '04:00 PM', '04:30 PM', '05:00 PM', '05:30 PM', '06:00 PM', '06:30 PM', '07:00 PM', '07:30 PM', '08:00 PM', '08:30 PM', '09:00 PM', '09:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM');

$dotw = array('monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday');
?>

<table width="425" border="0">

<?      
//Loop through the days of the week *DOTW* array
$d = 0;
while ($d <= 6)  {
?>
    <tr>
      <?php
      //echo "test: " .${char_avail_start_}.$d;
          if (${char_avail_start_}.$d == ""){ 
              echo "<td width=\"190\" scope=\"col\"><span style=\"color: red\"><b>".ucfirst($dotw[$d])."</b></span></td>";
            } else {
              echo "<td width=\"190\" scope=\"col\">".ucfirst($dotw[$d])."</td>";
            }
      ?>

<td scope="col">
<?php

//here is my test code to see if its defined
if (${char_avail_start_}.$dotw[$d] == "2000"){ 
    echo "2000 FOUND\n";
  } else {

    //this is using my previous variable
    echo "row has ".$char_avail_start_monday ." ";
    //this is using my attempt at generating it and seeing it it can pull from the row
    echo "row has " .${char_avail_start_}.$dotw[$d] ." <br/>";
}

echo "<select name=\"char_avail_start_".$dotw[$d]."\" id=\"char_avail_start_".$dotw[$d]."\">\n";

//FIRST BLANK OPTION
if (${char_avail_start_}.$d == ""){
    echo "<option value=\"\" selected=\"selected\"></option>\n";
  } else {
    echo "<option value=\"\"></option>\n";
}

$i = 0;
while ($i <= 47)  {
    echo "<option value=\"".$time_group[$i]."\">".$time_name[$i]."</option>\n";
  $i++;
}
echo "</select>\n";

echo "-\n";

echo "<select name=\"char_avail_stop_".$dotw[$d]."\" id=\"char_avail_stop_".$dotw[$d]."\">\n";

//FIRST BLANK OPTION
if (${char_avail_stop_}.$d == ""){
    echo "<option value=\"\" selected=\"selected\"></option>\n";
  } else {
    echo "<option value=\"\"></option>\n";
}
$i = 0;
while ($i <= 47)  {
    echo "<option value=\"".$time_group[$i]."\">".$time_name[$i]."</option>\n";
  $i++;
}
echo "</select></td></tr>\n";

$d++;
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:31:46.530

如果我理解正确，最好创建一个包含可用值的天数组：

```
$char_avail_start = array();
$char_avail_start['monday'] = $row['char_avail_start_monday'];
$char_avail_start['tuesday'] = $row['char_avail_start_tuesday];
... 
```

然后，您可以使用以下方式动态访问变量：

```
echo "row has " . $char_avail_start[$dotw[$d]] . "<br/>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:59:49.977

所以我做错了。更搞砸了，发现了一个错误。
`if (${char_avail_start_}.$dotw[$d] == ""){ blah }`

需要...
`if (${char_avail_start_.$dotw[$d]} == ""){ blah }`

我的尾随 } 在错误的位置。

然后它可以引用我之前定义的变量。
`$char_avail_start['monday'] = $row['char_avail_start_monday'];`
`etc...`

并毫无问题地从 sql server 拉回数据。

# matlab - 任何给定的 Matlab 错误的 Errordlg

> ID：15788325
> 
> 赞同：1
> 
> 时间：2013-04-03T13:13:11.160
> 
> 标签：matlab, user-interface

我有一个关于内部 Matlab 错误管理的问题。现在我有一个相当大的程序，其中有很多变量和函数累积在我的代码编写中，我 100% 确定我没有捕捉到程序中的所有错误和错误，我不希望它崩溃完全由外行用户使用。那么，有没有办法显示errordlg消息，例如当Matlab直接出现任何给定错误时（例如当我忘记声明全局变量等时）重新启动程序？

谢谢你的回答，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:19:53.240

崩溃是好的，因为它们迫使用户报告错误。

如果您不想走那条路，Matlab 提供`try`- `catch`：将您的代码包装在[try-catch 块](http://www.mathworks.com/help/matlab/matlab_prog/use-trycatch-to-handle-errors.html)中。如果出现错误，您会发现自己处于 catch 块中，您可以让 Matlab 向您发送一封包含错误消息的电子邮件，并在必要时重新启动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:19:45.723

您可以使用 try/catch 语句来响应程序中的错误。[这里](http://www.mathworks.com/help/matlab/matlab_prog/respond-to-an-exception.html)有更多信息。

# xaml - Localization Windows Phone: Is is possible to change the localized resource at design time?

> ID：15788331
> 
> 赞同：3
> 
> 时间：2013-04-03T13:13:30.853
> 
> 标签：xaml, localization, windows-phone, expression-blend, design-time

I created a few resource files for different languages. (E.g. resource.resx, resource.nl-NL.resx etc)

At this moment I only can see the result with the phone emulator. (By changing the language setting in the phone emulator)

For the design phase I want to see the result in different languages at design time. For example Dutch. (Or even better, some pseudo language)

It looks like Visual Studio (2012) and Blend both use the default resource file. (resource.resx)

Is there a way to use another resource file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T13:57:23.120

我找不到一个好的解决方案，所以我做了一件非常丑陋的事情。工作，但一点也不好玩。

我重命名了资源文件，这样我想看到的语言就没有语言后缀（而原来的语言有一个我知道我不会使用的后缀）。

一些警告：

*   原始语言中性资源文件具有“PublicResXFileCodeGenerator”（或等效项）的“自定义工具”属性。作为新的中性语言的资源文件需要此属性。待我们测试后回到原来的情况时，必须将其删除。
*   如果您要测试的语言没有重新定义所有字符串，您可能会遇到一些编译时错误，您需要从原始中性资源文件中复制丢失的字符串。

唯一的优点是无需重新启动模拟器即可查看此语言的运行情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T11:18:32.427

您可以通过将以下代码插入到 app.xaml.cs 中的 InitializePhoneApplication 中来设置 CultureInfo 属性

```
private void InitializePhoneApplication()
{
    Thread.CurrentThread.CurrentCulture = new CultureInfo("da-DK");
    Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture; 
```

这将覆盖文化，因此您不必在模拟器内更改它。

# ruby-on-rails - Auto-generated Dropdown with dependency in Surveyor (Rails gem)

> ID：15788334
> 
> 赞同：1
> 
> 时间：2013-04-03T13:13:34.743
> 
> 标签：ruby-on-rails, ruby, surveyor-gem

I am trying to setup a question in surveyor ([http://github.com/NUBIC/surveyor/](http://github.com/NUBIC/surveyor/)) that has a dropdown box with values 1 to 50\. The next question should only be visible if the the user chooses 1 in the first question. Here is my code to do this:

```
survey "Test survey dependency", :default_mandatory => true do
  section "questions" do
    q_1 "Click on 1 to see the next question", :pick => :one, :display_type => :dropdown
    ((1..49).to_a + ["50 or more"]).each{|num| a num.to_s, reference_identifier: num.to_s}

    q "Hello?"
    a "Hello"
    dependency :rule => "A"
    condition_A :q_1, "==", {:answer_reference => "1"}
  end
end 
```

Now, this should compare `:q_1` with `:a_0`. However this is the error I get:

```
rake surveyor FILE=surveys/survey.rb
rake aborted!
Bad references: q_1, a_0
/home/ari/.rvm/gems/ruby-1.9.3-p392/gems/surveyor-1.3.0/lib/surveyor/parser.rb:59:in `instance_eval'
/home/ari/.rvm/gems/ruby-1.9.3-p392/gems/surveyor-1.3.0/lib/surveyor/parser.rb:120:in `report_lost_and_duplicate_references'
/home/ari/.rvm/gems/ruby-1.9.3-p392/gems/surveyor-1.3.0/lib/surveyor/parser.rb:84:in `method_missing'
(eval):1:in `parse' 
```

If I change condition_A to `condition_A :q_1, "==", {:string_value => "1"}`, it gets parsed successfully but the next question is still never shown.

Everything in the example, [kitchen_sink_survey.rb](https://github.com/NUBIC/surveyor/blob/master/lib/generators/surveyor/templates/surveys/kitchen_sink_survey.rb) works fine.

So it looks like setting `:reference_identifier` manually doesn't do anything. Is this a bug or by design? And can I do anything about it apart from test for the actual value?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:43:12.173

这实际上是surveyor中的一个错误，但现在已在github上修复：[https ://github.com/NUBIC/surveyor/commit/a9b68f668da936fbe16fc89448e53c463b867dc0](https://github.com/NUBIC/surveyor/commit/a9b68f668da936fbe16fc89448e53c463b867dc0)

# java - Using keyboard input to trigger WebDriver events using Java

> ID：15788335
> 
> 赞同：1
> 
> 时间：2013-04-03T13:13:37.067
> 
> 标签：java, selenium, webdriver, keyboard-events

Im trying to accelerate the use of a web application using selenium Webdriver by creating hotkeys for it. I want certain webdriver click events to be associated with keyboard keys. For example, pressing "s" on the keyboard will click on the submit button.

I understand how to do the clicking and locating elements with webdriver but don't know how to go about listening to the keys from Java while Firefox is open (from a webdriver get call). My application has no GUI and since it's opening a firefox window it will lose focus so KeyListener is not an option.

I have come accross the JNI library that I'm looking into. Any other suggestions how I may do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:04:19.790

在这种情况下，自动化**整个过程***几乎总是*更好的主意

 **比如说，您需要每天更新员工的工资。最好花时间阅读 XLS 文件（这些数据是如何交付给注定要进行重复工作的人的几乎标准方式）并逐行阅读并以某种方式将其输入到应用程序中。

我知道我没有为您提供您期望的答案，但请尝试将整个过程自动化。与简单的键映射相比，这可能有点棘手，但可行 - 并且最终更快**

# android-ndk - android ndk中奇怪的openssl构建错误

> ID：15788336
> 
> 赞同：3
> 
> 时间：2013-04-03T13:13:37.750
> 
> 标签：android-ndk, openssl

我在 android ndk 中面临一些 OpenSSL 的构建错误。错误是

```
make: *** No rule to make target `/home/computer/openssl-android-master/crypto/cryptlib.c', needed by `obj/local/armeabi/objs/crypto/cryptlib.o'.  Stop. 
```

我不知道它的目标是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T04:40:38.693

这是为了澄清有关android ndk r8e的用户- android ndk r8e有时不会清理以前的构建文件，因此应该检查并删除二进制文件。

# google-drive-api - Bug: error in importing XLSX files when you're not an owner

> ID：15788338
> 
> 赞同：0
> 
> 时间：2013-04-03T13:13:38.507
> 
> 标签：google-drive-api

Steps to reproduce:

1.  User A creates a Google Spreadsheet named "Tables".
2.  User A shares "Tables" with User B.
3.  Using the API, User B exports "Tables" into "Tables.xlsx", edits it, and then imports it back to "Tables".

The API always returns an error but "Tables" seems to be updated properly.

# android - When creating a new .xml shouldnt a .java file be created also

> ID：15788340
> 
> 赞同：0
> 
> 时间：2013-04-03T13:13:43.357
> 
> 标签：android, android-intent

im new to this coding. but when i create a new layout/activity (i.e a new .xml) shouldn't a new .java file be created as well that corresponding to the new file. like when you create MainActvity.xml for the first time the MainActivty.java is also in the SRC/com.example... folder. so im a little confused.

So what i did was create anther new .xml form file>new> Android XML file . created fine but now .java file?

i'm curious about this because when i did my intent code it wouldn't load up the page. im guessing that it wasn't "linked" with the java file or something. (

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T06:56:20.617

不，它不会自己创建 java 文件。XML 文件可以是其他内容，而不仅仅是活动文件的布局。因此，没有必要为每个 XML 文件都有一个 java 类。

创建新项目时创建的只是为了方便，它假设您将拥有至少一个活动类（JAVA 文件）和一个相应的布局文件（XML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T06:58:45.663

不，没有必要为每个 .xml 文件创建 .java 文件。有时我们将 .xml 文件膨胀到 .java 文件中的现有 .xml 文件中。要显示您的 .xml ，必须在 .java 文件上设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T06:59:58.137

```
right click on project->new->class

then add this in new class
public class newclass extends Activity {
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newxml);

}}

and add android name in androidmanifest file 
```

# c# - Import cookies from text file in c# Window Forms

> ID：15788341
> 
> 赞同：1
> 
> 时间：2013-04-03T13:13:43.530
> 
> 标签：c#, c#-4.0, cookies, import

Hi guys i want to import cookies to use with the web browser in a Vb program. These cookies are in a text file exported from foirefox using an addon called advanced cookie manager. This is the full text file content for a youtube and google account cookies.

```
 accounts.google.com FALSE   /   TRUE    0   GALX    6eHg_ah2OcA
accounts.google.com FALSE   /   TRUE    0   GoogleAccountsLocale_session    en
accounts.google.com FALSE   /   TRUE    0   GAPS    1:_Nr1hdAKxmmjavGHMMvU0mmYvqJE8A:Nc1AzVmN-IKZb3oq
accounts.google.com FALSE   /   TRUE    0   LSID    s.DE|s.youtube|talk|youtube:DQAAALoAAADgCb0yghM0OyhoTEOWeKd__922mYyKa3H0yBIs5jGOfSbMfP6C76Ao7YBT3chA3BA4zmqB3w5so99qg0QzJgh4LmocSsTuOc7aAraSsUH0dxfz0lJpoWxYx7f3hXI1HB2XP6YVtlpHZi-VAjsaaRDLanfpMddm73RtUnlu4xSJoNAgF0xJNogs_Of4EPAssrchOowBKcdM1-P-aQMy7rgvo5V5RF1RxTVZ8dyWRdqk8ocqEk09M-dld3fLm7cZB7g
.youtube.com    TRUE    /   FALSE   0   VISITOR_INFO1_LIVE  2S8cjkP9HuI
.youtube.com    TRUE    /   FALSE   0   use_hitbox  d5c5516c3379125f43aa0d495d100d6ddAEAAAAw
.youtube.com    TRUE    /   TRUE    0   SSID    A6maF6dfv-b3voGtv
.youtube.com    TRUE    /   TRUE    0   SAPISID q2lzZ6EO9sD4zfaO/Ag61mffuXQhzbTylQ
.youtube.com    TRUE    /   TRUE    0   HSID    Al2Ze5_OdWHfE-lKA
.youtube.com    TRUE    /   TRUE    0   APISID  dCxiK0RIWXVF4ss9/ADUW4MrNC4wbMNIZo
.youtube.com    TRUE    /   FALSE   0   PREF    f1=50000000&fv=0.0.0
.youtube.com    TRUE    /   FALSE   0   ACTIVITY    1358853848282
.youtube.com    TRUE    /   TRUE    0   demographics    b5b9b36b16b837de11794f76ac5adc24e3QGAAAAZ2VuZGVydAEAAABtdAMAAABhZ2VpHgAAADA=
.youtube.com    TRUE    /   TRUE    0   SID DQAAALkAAABYU1N6s7Wc4ckiyqekON91HZLX2WNwPAtmyu82zizR8ahweELmw13pWScKM0DWZMn3DrGU4L-ycQQpQ2EirWKdJ0zfjdGZh3iZCfYhDZcCfDgAqSmWpbGS8UW0tbkapa7hTyoSlmu342A7xWtzujGSVW94RvmXmKc7f9U6jKQ55rTABiaoiZ3DEYqDjb2pSfGu9x1wRSTpDH09nGT_rvN-IPr6Exy9aLErbk0VHhjeQVD-a93jPbKs_71T9gGmr00
.youtube.com    TRUE    /   TRUE    0   LOGIN_INFO  ad4923957f199d9967473fbb9efc6facc3cAAAB7IjEiOiAxLCAiMiI6ICJSWVh2cXhhMHRMQmZaUHowTEpSdGFRPT0iLCAiMyI6IDEzNjEyNDgyMDYsICI0IjogIkdBSUEiLCAiNiI6IGZhbHNlLCAiNyI6IDEzNTg5NTY1ODAsICI4IjogNTMwMDM1NDIxMzY3fQ==` 
```

All i want to know is :how can i use these text files or its content with the Vb web browser.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-07T21:45:20.803

InternetSetCookie 函数应该仍然有效

[http://netpl.blogspot.com/2008/09/property-of-mshtmlihtmldocument2-does.html](http://netpl.blogspot.com/2008/09/property-of-mshtmlihtmldocument2-does.html)

您将需要解析您的文件（简单），然后为每个 cookie 调用该方法。WebBrowser 应该获取 cookie，我们在过去多次使用过这种技术。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-07T21:50:17.277

我假设您想使用 WinForms`WebBrowser`控件。

根据 MSDN，WebBrowser 控件没有`Cookies`属性，这是因为，我认为，WebBrowser 使用与桌面 IE 相同的浏览器状态......这并不重要。

根据 MSDN 上的这个线程（[http://social.msdn.microsoft.com/Forums/windows/en-US/e43239f3-3914-43ec-ac50-223b022ec2ea/webbrowser-control-and-cookies?forum=winformsdesigner](http://social.msdn.microsoft.com/Forums/windows/en-US/e43239f3-3914-43ec-ac50-223b022ec2ea/webbrowser-control-and-cookies?forum=winformsdesigner)）你可以通过从 中导入`InternetSetCookie`函数来添加 cookie `wininet.dll`。

所以我会做这样的事情（在 C# 中，抱歉，但将其转换为 VB 应该很容易）

```
// Ideally I'd parse the text-file using a finite-state-machine parser modelled on a CSV parser, but for this exercise I'll resort to `String.Split`.

private static List<String[]> GetCookieLines(String fileName) {

    List<String[]> cookieLines = new List<String[]>();
    using(FileStream fs = new FileStream( pathToYourCookies.txt, FileMode.Open ))
    using(StreamReader rdr = new StreamReader( fs, Encoding.UTF8 )) { 

        String line;
        while( (line = rdr.ReadLine()) != null ) {

            String[] components = line.Split('\t'); // assuming tab-separated file
            cookieLines.Add( components )
        }
    }
}

[DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern Boolean InternetSetCookie(string urlName, string cookieName, string cookieData);

public static void ImportCookies(String fileName) {

    List<String[]> cookies = GetCookieLines( fileName );
    foreach(String[] cookie in cookies) {

        String domainName = cookie[0];
        String name       = cookie[4];
        String value      = cookie[5];

        InternetSetCookie( domainName, name, value );
    }
} 
```

# asp.net - .NET MVC 4 JSON Post/Put char 限制在 Web.config

> ID：15788342
> 
> 赞同：1
> 
> 时间：2013-04-03T13:13:50.187
> 
> 标签：asp.net, asp.net-mvc, json, asp.net-mvc-3, asp.net-mvc-2

我正在使用 PUT 动词将 JSON 发送到 MVC 控制器。当我达到某个限制时，我会收到 500 错误。如果我缩减我发送的 JSON，那么它发送就好了......有谁知道 web.config 中的配置，它将允许将大量 JSON 传递给我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:50:31.827

这是答案...我的 JSON 对象非常大，因此 .NET 由于“安全功能”而不允许它通过。默认值为 2000，所以我撞了它，它工作得很好。

```
 <add key="aspnet:MaxJsonDeserializerMembers" value="5000"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:08:23.827

**方法 - 1**

```
<configuration> 
   <system.web.extensions>
       <scripting>
           <webServices>
               <jsonSerialization maxJsonLength="50000000"/>
           </webServices>
       </scripting>
   </system.web.extensions>
</configuration> 
```

**方法 - 2**

```
<location path="File Path or FileHandler.ashx">
  <system.web>
    <httpRuntime executionTimeout="your value" maxRequestLength="Your value" />
  </system.web>
</location> 
```

使用这种方法，我们可以为特定页面设置限制，而不是为整个应用程序设置限制。

**方法 - 3**

```
<httpRuntime targetFramework="Your version" maxRequestLength="Your value" /> 
```

使用这种方法，我们可以设置完整应用程序的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:09:09.880

检查 web.config 中的 maxRequestLength。如果数据超过 maxRequestLength，则返回 500 状态。

```
<httpRuntime targetFramework="4.5" maxRequestLength="XXX" /> 
```

注意：如果未指定 maxRequestLength。默认值为 4MB。

如果这不起作用，请尝试 IIS 的[Request Limits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)。然而，文档说应该返回 404 状态。

# c# - Coded UI Test not finding SilverlightUIAutomationHelper assembly

> ID：15788345
> 
> 赞同：8
> 
> 时间：2013-04-03T13:13:55.997
> 
> 标签：c#, silverlight, silverlight-5.0, coded-ui-tests

I'm trying to do some coded UI tests with Visual Studio 2010 on my SharePoint 2010 site. A particular file in SharePoint launches my Silverlight application in a separate window. I've added the SilerlightUIAutomationHelper assembly as a reference in all my Silverlight projects that run this. This SHOULD allow me to record actions within it, but it pops up with an error message when I try to record inside my Silverlight app:

```
No Silverlight controls were detected. Verify that the application under test
is built using Silverlight assemblies with a version of 4.0 or greater and that
a reference to the Microsoft.VisualStudio.TestTools.Extension.SilverlightUIAutomationHelper.dll
assembly has been added to the project. 
```

I'm running Silverlight 5.0, so that can't be the issue. I've also verified that the SilverlightUIAutomationHelper dll has made it into the xap package.

I've been able to successfully record these actions in SharePoint 2013/Visual Studio 2012 with this extension: [http://visualstudiogallery.msdn.microsoft.com/28312a61-9451-451a-990c-c9929b751eb4](http://visualstudiogallery.msdn.microsoft.com/28312a61-9451-451a-990c-c9929b751eb4)

Any idea why this is happening? What can I do to fix it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T18:10:16.240

为了在 Silverlight 5 中进行 Coded UI 测试，您需要从这里使用更新 Coded UI 自动化帮助程序：[Visual Studio Gallery：Silverlight 的 UI 测试插件](http://visualstudiogallery.msdn.microsoft.com/28312a61-9451-451a-990c-c9929b751eb4)VS2010 附带的旧插件有效，但仅适用于 SL4 及以下版本。

SL5 的实现略有不同，它破坏了 Coded UI 测试，因此提示开发人员切换到 VS2012 和新的 UI 自动化插件（如您所见）。

安装 UITestPluginForSilverlight.msi 可执行文件后，您需要在项目的 Silverlight 部分（您已经拥有）中引用这些程序集。

据我所知，您的编码 UI 测试在 VS2010 中中断但在 VS2012 中工作的原因是因为测试记录器生成的 SL5 和 SL4 UIMap.designer.cs 文件彼此不兼容。

使用 SL4 自动化助手生成的 SL4 录音不适用于 SL5 版本的 AutiomationHelper。但是，如果 SL4 录音是由 VS2012 生成的，则 SL5 Autiomation Helper 将适用于这些录音。

详细说明：当您使用记录器时，它会创建一个 UIMap 文件。地图文件包含三个部分：

1.  所有记录方法的 XML 列表
2.  设计器在部分类后面生成代码。
3.  用户部分类。

如果您检查设计器生成的代码隐藏文件，您实际上可以发现记录器生成了大量代码来查找控件并与它们进行交互。

对于记录器发现的每个控件，它声明了相应测试/交互对象的一个​​实例。

在声明这些对象时，记录器定义了一堆可发现/可搜索的属性。下次播放执行时，它会使用这些属性并使用它们来查找实际控件。

此外，所有控件都有一个父控件，因此记录器必须为每个发现的控件指定一个父 UI 元素。对于 SL4 和 SL5，父级如下：

*   浏览器窗口
*   网页
*   Div（持有 silverlight 运行时）
*   SL 对象（SL 运行时插件）
*   主 SL UI 元素（通常是波浪形的忙碌指示器）
*   导航框架
*   内部页面
*   控件

构造函数：

1.  父控件/交互对象

搜索属性：

1.  页面标题：浏览器窗口标题呈现的总字符串。
2.  实例编号：（列表从 1 开始......这很奇怪）
3.  控件 ID：（由 Name 或 x:Name xaml 属性定义）
4.  显示名称：这对于组合框/列表元素来说是不确定的，因为它通过将组合框/列表元素项中呈现的任何内容与该项的实例编号相结合来工作：例如：

一个包含两个项目的组合框，每个项目都名为“列表项目”，可以通过以下显示名称找到：

“列表项：1”和“列表项：2”

1.  搜索属性的任何组合和排列（您可以查找它们）。

长话短说，记录器生成的实际交互对象在 SL4 和 SL5 中是不同的。这意味着您不能将一个 UIMap.designer.cs 与另一个交换。测试框架（以及在 UIMap.designer.cs 中使用的相关交互对象）不是二进制兼容的。这就是为什么您的播放无法正常工作的原因。

# php - MySQLi 选择序列化数据

> ID：15788352
> 
> 赞同：0
> 
> 时间：2013-04-03T13:14:07.763
> 
> 标签：php, mysqli

我正在尝试使用以下查询从表中选择序列化数据。

该表如下所示：![在此处输入图像描述](https://i.stack.imgur.com/Ralhg.png)

```
$dbConn = db_connect();
$dbConn->set_charset("utf8");
$stmt = $dbConn->prepare("
SELECT data
FROM wp_vfb_pro_entries
WHERE entries_id = 1
");
$stmt->execute();
$stmt->bind_result($raw_data);
$stmt->fetch();
$stmt->close();

var_dump($raw_data); 
```

`var_dump``string(0) ""`当我尝试从`data`列中选择时总是返回。如果我尝试选择其他任何内容，但由于某种原因，选择该`data`列不会返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:38:18.573

你不需要在`->prepare()`这里使用。仅当您想使用参数化查询时。

由于您的 ID 在查询中是硬编码的，因此您只需执行`->query()`.

```
$result = $dbConn->query('
  SELECT data
  FROM wp_vfb_pro_entries
  WHERE entries_id = 1
');

$row = $result->fetch_assoc();
$raw_data = $row['data']; 
```

# html - Trying to open a pop-up window but the url isn't working

> ID：15788353
> 
> 赞同：-4
> 
> 时间：2013-04-03T13:14:08.747
> 
> 标签：html, href

```
<a href="examplewebsite.com" onclick="window.open('anewexample.com/index.html')">Click here</a> 
```

When published and clicked, the link is www.examplewebsite.com/www.anewexample.com/index.html

Ive removed the href code and it doesnt work at all. If anyone can help, then im happy to listen.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:16:12.770

您使用的是相对 href 而不是绝对链接...

尝试在开头添加 http://。

至少通过发布您的代码，让您的问题下次更完整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:17:39.360

当你写`<a>`标签时，href 必须`http://`在它之前。如果不是，浏览器会认为您引用的是相对路径。所以添加`http://`它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:28:47.500

您应该尝试不使用 onclick：

```
<a href="http://www.examplewebsite.com" target="_blank">Click here!</a> 
```

这种方式容易多了。

# java - Difference between using assert and throwing AssetionError exception in java

> ID：15788355
> 
> 赞同：6
> 
> 时间：2013-04-03T13:14:18.590
> 
> 标签：java, exception, exception-handling

To do internal logic checks, there are two ways in Java,

1.  use the assert keyword: e.g, **assert(x>y)**;
2.  manually throw assertion error: e.g, **if(y>x) throw new AssertionError();**

What are the differences among above two methods( performance wise, programming flexibility, etc.? Which one is considered as a good programming practice?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:16:56.243

主要区别在于`assert`不保证会被处理，除非显式启用断言（通过 -ea 选项`java`或以编程方式）。另一方面，投掷 a`new AssertionError()`将始终有效。

一些阅读信息：[使用断言编程](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:39:04.673

方式#1“断言（x>y）；” 使用**默认关闭**的 JVM 功能。但是，它为您提供了更大的灵活性，因为您可以使用一个参数随心所欲地打开和关闭它。

方式#2“if(y>x) throw new AssertionError();” 将始终执行，您不能通过 assert-param 将其关闭。这只是一个例外。

我经常看到人们使用 Exceptions 处理“真正的”错误（网络不可用，提供了错误的输入），而在开发/集成期间经常使用断言（即打开）进行非常基本的检查（例如 param not `null`）。IMO，很难划清界限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:20:04.320

当 assert(x>y) 失败时，它会引发 AssertionError（如果启用了断言）。使用 java 断言的优点是它可以在编译时启用或禁用。您可以为生产环境禁用断言，与手动提高 AssertionError 相比，您始终执行断言从而降低性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:57:14.127

以上答案均未回答我的第二个问题（哪一个被认为是一种好的编程习惯？）。所以我和我的一位朋友谈到了这一点，据他说，如果某些东西是包私有的，而你是唯一一个调用该函数的人（例如，私有函数），那么使用断言。如果某些内容是公开的，并且您希望其他第三方开发人员可以直接调用该函数，则执行显式 if 检查并抛出异常。

# c++ - 在 C++ 中使用 HTTPS 发送请求

> ID：15788356
> 
> 赞同：5
> 
> 时间：2013-04-03T13:14:20.187
> 
> 标签：c++, visual-studio, weblogic

我的 C++ 应用程序包括通过 HTTP 连接直接发布到 Weblogic App 服务器。需要将其更改为使用 HTTPS 发布。

**我通过 Visual Studio 运行这个应用程序。**

欢迎任何形式的建议。编码更新最有帮助

下面是我为 HTTP 连接工作的代码。

**我需要做什么才能使用 HTTPS？**

```
 strFormData = sFile;

strHeaders  = _T("Content-Type: application/x-www-form-urlencoded");

CInternetSession session;
CHttpConnection* pConnection =  session.GetHttpConnection(_T(Server), Port);

CHttpFile* pFile =  pConnection->OpenRequest(CHttpConnection::HTTP_VERB_POST,   _T(Action));                

result = pFile->SendRequest(strHeaders,(LPVOID)(LPCTSTR)strFormData,  
                                          Data.GetLength()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T04:35:16.900

```
CHttpFile* pFile = pConnection->OpenRequest(CHttpConnection::HTTP_VERB_POST, _T(Action), NULL, 1, NULL, NULL, INTERNET_FLAG_SECURE); 
```

我尝试了这段代码，它适用于 HTTPS 发布。我发现参数值（Internet 安全标志）随 HTTP 和 HTTPS 发布而变化。

# vb.net - MustOverride 原来是一个虚拟方法？

> ID：15788364
> 
> 赞同：1
> 
> 时间：2013-04-03T13:14:37.860
> 
> 标签：vb.net, syntax, overriding, .net-assembly, abstract-methods

在研究**Assembly.GetInterfaces()**时，我发现该方法是**MustOverride 方法**。在我看来，这意味着它对派生类没有默认操作。它基本上只是一个签名，一个抽象方法。然而，我仍然可以在一个类型上使用它，它会返回所有实现的接口，而无需为 MustOverride 方法编写任何代码。

进入 MustOverride 方法的这段代码在哪里？我是否只是通过在创建的类型上调用方法以某种方式间接覆盖了它？

这个问题纯粹是基于研究和发现，除了理解语言的范围之外，我并没有试图做任何事情。

这是我使用的代码：

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim t As Type

        Debug.WriteLine(GetType(Integer))
        t = GetType(Integer)
        Dim interfaceArr As Type() = t.GetInterfaces

        For i As Integer = 0 To interfaceArr.Length - 1
            Debug.WriteLine(interfaceArr(i))
        Next

    End Sub

End Class

Output Is:

System.IComparable
System.IFormattable
System.IConvertible
System.IComparable 1[System.Int32]
System.IEquatable 1[System.Int32] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:37:49.993

任何`MustOverride`方法总是可以在任何类型的实例上调用，因为除非该类提供所有方法的具体实现，否则您不可能创建类的实例`MustOverride`。在这种情况下，您的困惑是您假设`t`变量正在引用一个`Type`对象，但事实并非如此。由于`Type`是一个`MustInherit`类，因此不可能直接实例化该类型的对象。您只能实例化*派生*自`Type`. 如果您使用调试器检查`T`变量，您会注意到它实际上是在引用该类的一个实例，`RuntimeType`该类显然是从`Type`.

例如，考虑这个重复行为的例子：

```
Public Class Form1
    Public MustInherit Class BaseClass
        Public MustOverride Function GetGreeting() As String
    End Class

    Public Class DerivedClass
        Inherits BaseClass

        Public Overrides Function GetGreeting() As String
            Return "Hello world"
        End Function
    End Class

    Public Function GetInstance() As BaseClass
        Return New DerivedClass()
    End Function

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim t As BaseClass = GetInstance()
        Debug.WriteLine(t.GetGreeting())
    End Sub
End Class 
```

如您所见，`t`变量属于`BaseClass`类型，但它实际上是在引用一个`DerivedClass`对象。因此，即使`BaseClass`类将方法定义为`MustOverride`，您仍然可以调用它，因为对象的实际类型确实实现了它。

# r - 在观察中识别随时间变化的模式 (R)

> ID：15788366
> 
> 赞同：3
> 
> 时间：2013-04-03T13:14:45.317
> 
> 标签：r, traminer

我有数以千计的人在几年内每月输入的转移支付数据，无论观察是否在当月收到付款。我想看看理论提出的某些类型的传输接收器是否可以被数据证实。为此，我计划先做一些描述性统计，然后再使用 package `TraMineR`。

然而，首先，我想简单地弄清楚哪个观察适合哪个类别。例如，其中一类是短期经济援助接受者，他们只出现一次。因此，我需要确定所有仅收到三个月（或更短时间）付款的观察结果。另外，这些受援时间是不能中断的，所以如果有人受援两个月，两个月什么都没有，然后再一个月，这已经是一个不同的类别了。这是一个仅针对一年和 30 次观察的小示例：

```
dat <- data.frame(matrix(c(0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0),ncol=12)) 
```

在此示例中，我的问题是第 13 行，否则我可以简单地使用`rowSums`，然后选择结果等于或小于 3 的每一行。我可以使用哪个程序来仅识别仅在一个连接期间获得帮助的那些观察？我将如何识别诸如 13 之类的观察结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:36:34.570

您可以使用此函数来识别连续付款期的数量以及每个期间的月数：

```
aid <- lapply(apply(dat, 1, rle), function(x) unname(x$lengths[x$values==1])) 
```

这将返回一个列表，每行数据一个组件。例如：

```
> aid[[1]]
integer(0)
> aid[[8]]
[1] 3
> aid[[13]]
[1] 1 1 
```

表示第 1 行没有期间，第 8 行有一个 3 个月的期间，第 13 行有两个 1 个月的期间。

要找出每行有多少个连续周期，您可以使用以下命令：

```
cont <- sapply(aid, length) 
```

结果：

```
> cont
[1] 0 1 1 0 0 0 1 1 0 0 1 1 2 0 1 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0
> cont[13]
[1] 2 
```

请注意，只有第 13 行有两个单独的句点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:48:16.447

您可以使用`rle`函数来过滤哪些行值在不同时间等于 1。

```
idx <- apply(dat,1,function(x){
  y <- rle(x)
  length(y$lengths[y$values ==1])> 1
})

dat[idx,]
   X1 X2 X3 X4 X5 X6 X7 X8 X9 X10 X11 X12
13  0  0  0  0  0  0  0  0  1   0   0   1 
```

然后你可以申请`rowSums` 过滤的数据

```
rowSums(dat[!idx,]) <=3 
```

# assembly - 在 big.LITTLE 的情况下，opcode2 在 MRC 指令中的含义是什么

> ID：15788371
> 
> 赞同：1
> 
> 时间：2013-04-03T13:14:51.700
> 
> 标签：assembly, kernel, arm

我正在使用 Cortex-A15-Cortex-A7 big.LITTLE arch soc。

对于 big.LITTLE 处理器的 bL_head.S（在 LITTLE 初始化的情况下），MRC 指令的使用如下：-

```
mrc     p15, 0, r0, c0, c0, 5 
```

现在，根据 MRC 指令详细信息，

```
MRC{cond} coproc, opcode1, Rd, CRn, CRm{, opcode2}

opcode2
is an optional coprocessor-specific opcode. 
```

1.  我无法理解 5 的含义。这里，根据我的理解，CP 只不过是 LITTLE 处理器集群。
2.  另一个疑问是，按照上面的指令，r0 内容被复制到 c0 中。为什么有两个c0？另一个 c0 是做什么用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:37:55.150

有关如何解码 cp15 系统控制寄存器功能的信息，请参阅[此页面。](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0438c/CHDGGCFH.html)

根据前述页面`Op1`=0, `CRn`=c0, `CRm`=c0, `Op2`=5给出：

```
MPIDR   Multiprocessor Affinity Register 
```

[您可以在此处](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0438c/BABHBJCI.html)找到有关 MPDIR 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:59:53.727

在基本上所有的ARM处理器中，协处理器15用于控制当前内核的各种[系统功能](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0464e/BABHDDAA.html)。它不引用多处理器集群中的其他处理器。您可以在内核特定的技术参考手册 (TRM) 中找到 CP15 寄存器的实际定义

例如，在Cortex-A7 TRM的[汇总表](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0464e/BABIGAED.html)中查找您提到的组合，我们可以看到它是`MPIDR`（Multiprocessor Affinity Register）。事实上，如果你点击详细描述[的链接](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0464e/BABHBJCI.html)，你会看到这个指令：

```
To access the MPIDR, read the CP15 registers with:
MRC p15, 0, <Rt>, c0, c0, 5; Read Multiprocessor Affinity Register 
```

在你的情况下，`<Rt>`是`R0`。它被设置为从隐藏核心寄存器中读取的 MPIDR 的值，然后您可以按照 TRM 中的说明对其进行解释。

顺便说一句，Opcode1、CRm、CRn 和 Opcode2 的具体组合是特定于处理器的，但其中许多是在相关内核之间共享的。因此，一般而言，您不一定要咨询您拥有的确切内核的 TRM，尽管它当然效果最好。

# c# - OnServerValidate 失败时的页面生命周期（自定义验证器）

> ID：15788372
> 
> 赞同：0
> 
> 时间：2013-04-03T13:14:58.753
> 
> 标签：c#, javascript, jquery, asp.net, gridview

我在更新面板中有一个网格视图。当页面加载时，我在 gridview 中有 javascript 启用/禁用字段（称为函数 X()。当更新面板更新时，我使用`Sys.Application.add_load()`重新加载函数 X()。这一切都很好。

**我的问题**：
当自定义验证器的 onservervalidate 失败时（`args.IsValid = false`）函数 X() 没有被调用，需要调用它来启用/禁用字段。在生命周期的这个阶段如何调用函数 X()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:46:43.567

你将不得不手动重新调用你的 JavaScript 函数，你可以这样做，使用 JavaScript：

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_endRequest(EndRequest);

function EndRequest(sender, args) {
  functionX();
} 
```

# java - 创建下一个按钮，该按钮根据组合框中的选择创建/加载新屏幕

> ID：15788374
> 
> 赞同：0
> 
> 时间：2013-04-03T13:15:03.003
> 
> 标签：java, swing, button

我正在构建一个程序，它将使用一种格式为我创建 XML，但是我将创建 3 种不同类型的 XML，每种都有 4 个模板。

所以基本上你在第一个屏幕上的 2 个组合框中选择 TYPE2 和 STYLE 3，然后我希望 Next 按钮根据类型和样式引导你进入下一个过程......

我对 SWING 编程完全陌生，还有很多工作要做，但我想在开始编写有关如何创建信息的编码之前完成导航。

当前按钮就像它一样......

```
JButton btnNext = new JButton("Next");
btnNext.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {                
        }
});
btnNext.setBounds(144, 302, 89, 23);
frame.getContentPane().add(btnNext); 
```

我只是想知道我是如何开始这样做的，组合框如下

```
JStyleBox StyleBox = new JStyleBox();
StyleBox.setMaximumRowCount(3);
StyleBox.setModel(new DefaultStyleBoxModel(new String[] {"Transforms", "RTP", "Rules Engine"}));
StyleBox.setBounds(47, 73, 147, 20);
frame.getContentPane().add(StyleBox); 
```

其他是 TypeBox、BrokBox 和 AggBox 任何帮助或指导将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:29:04.853

这是我为您编写的一个简单示例：http: [//pastebin.com/ZgUsMMfS](http://pastebin.com/ZgUsMMfS)

它创建一个Frame，你可以在组合框中选择创建什么样的新组件，然后当你按下按钮时，它会创建一个新组件——JLabel、JButton或JFrame。这是一个超级简单的例子，但它应该足以让你继续前进。

# javascript - jQuery：选择没有标签的文本并用一个包装它

> ID：15788383
> 
> 赞同：1
> 
> 时间：2013-04-03T13:15:31.090
> 
> 标签：javascript, jquery

我有一个你在下面看到的代码：

```
<div class="categories-list">
Description One
<ul>
    <li>
        <span>CATEGORY1</span>
        <span>CATEGORY2</span>
        <span>CATEGORY3</span>
    </li>
</ul>
</div> 
```

我想要做的是选择没有标签的文本“Description one”并使用jQuery用标签（特别是h2）包装它，所以最终代码如下所示：

```
<div class="categories-list">
<h2>Description One</h2>
<ul>
    <li>
        <span>CATEGORY1</span>
        <span>CATEGORY2</span>
        <span>CATEGORY3</span>
    </li>
</ul>
</div> 
```

我知道我可以使用 wrap() 函数来完成第二件事。选择部分是我遇到问题的部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T13:16:41.100

在您走过元素之前， Simple[`wrap`](http://api.jquery.com/wrap/)无法完成这项工作：[`contents`](http://api.jquery.com/contents/)

```
$(".categories-list").contents().first().wrap("<h2 />"); 
```

**演示：http:** [//jsfiddle.net/MDhvY/](http://jsfiddle.net/MDhvY/)

# python - 三元组中的拆分列表

> ID：15788385
> 
> 赞同：0
> 
> 时间：2013-04-03T13:15:32.350
> 
> 标签：python, python-3.x

我有一个清单

```
L = [1, 2, 3, 4...] 
```

其中有`n*3`元素。我希望能够做类似的事情

```
for a, b, c in three_tuple_split(L) 
```

以pythonic的方式，但无法想出一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:16:26.227

低效但pythonic的解决方案：

```
for a, b, c in zip(*[iter(seq)]*3): pass 
```

要获得更有效的实施，请查看`itertools` [grouper](http://docs.python.org/2/library/itertools.html#recipes)配方：

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

for a, b, c in grouper(3, seq):
    pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:23:19.003

```
#!/usr/bin/env python
mylist = range(21)
def three_tuple_split(l):
    if len(l)%3 != 0:
        raise Exception('bad len')
    for i in xrange(0,len(l),3):
        yield l[i:i+3]
for a,b,c in three_tuple_split(mylist):
    print a,b,c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:24:14.383

只需使用切片和 for 循环。

```
def break_into_chunks(l,n):
    x = len(l)
    step = x//n
    return [l[i:i+step] for i in range(0,x,step)] 
```

或者更慢的：

```
def break_into_chunks(l,n):
    return [l[i:i+len(l)//n] for i in range(0,len(l),len(l)//n)] 
```

要使用：

```
for a, b, c in break_into_chunks(L,3): 
```

# jsf - h:inputText 不会自动从 bean 更新

> ID：15788387
> 
> 赞同：1
> 
> 时间：2013-04-03T13:15:34.817
> 
> 标签：jsf

我的表单中有一个 h:inputText 。当我更新其 panelGroup 时，该值未正确更新。JSF 版本是 2.1.13。

如果我使用 disable="true" 或在 h:outputText 中显示 bean 值或刷新页面，它的更新正确。但默认情况下它不会发生。

```
<span style="min-width: 100px;"> First Name: #{NewPatient.newPatientBean.firstName}</span>
                <h:inputText id="fname" 
                    value="#{NewPatient.newPatientBean.firstName}"
                    onchange="initialCaps(this);" maxlength="50">
                    <f:ajax execute="@this" event="blur"/>
                </h:inputText> 
```

在上面的代码中

> 名字：#{NewPatient.newPatientBean.firstName} 正在正确更新，但 inputText 没有。

请让我知道上述问题的错误和解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:41:53.837

当当前或以前的回发期间发生验证错误时，就会发生这种情况。然后，输入组件将不会重新显示模型值，而只会在组件本身验证失败时重新显示最初提交的值，或者当同一表单中的另一个组件验证失败时显示本地值。

由于问题中完全没有具体的功能要求，因此不可能为此提出正确的解决方案。所以这里只是一个链接，它更一般地解释了这个问题，它应该对原因和解决方案提供新的见解：[在发生验证错误后，如何使用 PrimeFaces AJAX 填充文本字段？](https://stackoverflow.com/questions/6642242/how-can-i-populate-a-text-field-using-primefaces-ajax-after-validation-errors-oc/6845800#6845800)

# android - xhdpi 屏幕上的布局模糊

> ID：15788388
> 
> 赞同：1
> 
> 时间：2013-04-03T13:15:39.423
> 
> 标签：android, maps, resolution

我开发了一个基于地图的安卓应用。因为我希望我的应用程序可以与大多数安卓智能手机一起使用。
我已经为每种类型的屏幕分辨率添加了图形资源，从`ldpi`到`xhdpi`，然而，当我将我的应用程序与`xhdpi`设备（即三星 Galaxy s3 或谷歌 nexus 4）以及谷歌 nexus 7 一起使用时，图像和地图都很模糊.
谁能告诉我为什么？

谢谢你们！！
阿基斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:18:32.400

确保您具有以下文件夹命名。

```
 layout-xhdpi
 drawable-xhdpi 
```

# optimization - fortran 代码优化 - 如何自动生成每个子例程被调用的次数

> ID：15788391
> 
> 赞同：0
> 
> 时间：2013-04-03T13:15:46.827
> 
> 标签：optimization, fortran, call, subroutine

有什么方法可以计算出每个子程序被调用了多少次？显然不是通过为每个子例程添加一个计数器，而是在程序完成运行后通过在 ifort 或 gfortran 编译阶段添加一些参数来自动生成报告？
我正在优化我的庞大代码，我认为最简单的方法是简化被大量调用的子程序。谢谢

# java - Jasper 报告为实例生成空白单元格并在再次为同一实例重新运行时填充值

> ID：15788393
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:15:50.723
> 
> 标签：java, jasper-reports

我正在使用 jasper 报告 4.1.1 当我在 excel 中导出报告时，某些单元格对于相同的数据集显示为空白，并且当再次重新运行报告时，数据会被填充。

上述问题是随机发生的。

```
JasperPrint print=JasperFillManager.fillReport(jrXmlPathList.get(i),parameters,conn);
list.add(print); OutputStream output = new FileOutputStream(new File(reportVO.getxFilePath()));
JRXlsxExporter exporterXLS = new JRXlsxExporter();
exporterXLS.setParameter(JRXlsExporterParameter.IS_DETECT_CELL_TYPE,Boolean.TR‌​UE);
exporterXLS.setParameter(JRXlsExporterParameter.SHEET_NAMES, sheetnames); 
exporterXLS.setParameter(JRXlsExporterParameter.JASPER_PRINT_LIST, list); 
exporterXLS.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, output); 
exporterXLS.exportReport(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:02:33.830

尝试这个：

```
File xlsx = new File("C:/Users/Sadagopan/Documents/sample.xlsX");
JRXlsxExporter Xlsxexporter = new JRXlsxExporter();
Xlsxexporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
Xlsxexporter.setParameter(JRExporterParameter.OUTPUT_FILE, xlsx);
Xlsxexporter.exportReport(); 
```

# c# - const Enum 的最佳实践命名约定避免循环定义

> ID：15788395
> 
> 赞同：4
> 
> 时间：2013-04-03T13:15:54.083
> 
> 标签：c#, enums, naming-conventions

这是一个[重复的问题](https://stackoverflow.com/questions/12729147/circular-definition-in-a-constant-enum)，但没有真正的解决方案。

所以我们开始吧。可以说我有：

```
public enum Color
{
    Red,
    Blue,
    Green
}

public class BlueUnicorn
{
    private const Color Color = Color.Blue;
} 
```

1.  “对大多数 Enum 类型使用单数名称，但对作为位字段的 Enum 类型使用复数名称。” [从Microsoft 的枚举类型命名指南](http://msdn.microsoft.com/en-us/library/4x252001%28VS.71%29.aspx) 检查中检索**！**

2.  “考虑赋予属性与其类型相同的名称。” 从[Microsoft 的类型成员名称](http://msdn.microsoft.com/en-us/library/ms229012.aspx) **检查中检索！**

3.  **根据 Resharper Check**，我应该使用常量而不是只读的！![在此处输入图像描述](https://i.stack.imgur.com/P2Vgg.png)

 **但我得到一个编译器错误。不过，这很奇怪，没有智能。**'BlueUnicorn.Color' 的常数值的评估涉及循环定义。**

我觉得我在这里的会议裂缝。根据最佳实践命名约定，该字段应该命名什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:19:41.933

您可以按照自己的方式命名该字段。要解决编译错误，只需在`Color.Blue`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:20:25.727

您不是在约定俗成的裂缝中（顺便说一句，很棒！）。约定 (2) 不适用于属性，而不是字段或常量。因此，您可以将其称为`UnicornColor`.

作为旁注，我很欣赏这可能不是你真正的代码（除非你真的*在*写一个独角兽模拟器！），但在我看来，拥有一个 BlueUnicorn 类是不对的。拥有一个基于该类中的特定常量定义的类似乎太具体了——肯定`Color`会是一个`Unicorn`类的属性吗？

我不知道这是否适用于您的真实代码，但这可能是您的设计有点错误，而且问题永远不会出现？**

# installshield - 使用 Installshield2011 更改 XML 文件

> ID：15788398
> 
> 赞同：0
> 
> 时间：2013-04-03T13:16:06.553
> 
> 标签：installshield

我正在使用 Installshield 2011 开发附加安装程序，项目类型是 Basic MSI。我有一个需要更新 app.config 文件的要求；提到的 app.config 不是当前安装程序的一部分；app.config 将通过安装基础产品可用。除此之外，我的附加安装程序将更新 app.config 文件。

我正在使用 Installshield 提供的 XML 文件更改功能，我已按以下步骤对其进行配置：

1.  在 XML 文件更改视图下导入更新的 app.config 文件。
2.  创建一个新元素并为其分配键和值。
3.  重复 1 和 2 并根据要求添加 7 到 8 个新条目

在测试期间，我看到 app.config 文件已更新，但条目在单行中，而不是在另一行下方。我无法启用“**更改后格式化 XML** ”，因为引用到 app.config 的服务之一无法正常工作，并且当我撤销选项时，服务运行完美。

是否有任何解决方法/选项可以告诉/询问 installshield 使用 XML 文件更改将 xml 标记插入另一个不在单行中的另一个下方？

谢谢， 切坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:21:52.350

如果 XML Changes 没有以可接受的方式格式化文档，您可以考虑使用 Text File Changes，它只是一种更简单的搜索和替换，无需了解 XML 的架构。否则选项是检查 Windows Installer XML（您可以使用在合并模块中的 Util 扩展中找到的 XmlConfig 元素，然后在 InstallShield 中使用该合并模块）或仅编写您自己的自定义操作。

# javascript - JQuery：如何在 find() 的结果中使用每个？

> ID：15788400
> 
> 赞同：0
> 
> 时间：2013-04-03T13:16:07.833
> 
> 标签：javascript, jquery, html

```
$.get(url, function(data){
    $("<div>" + data + "</div>").find('.list [class^=data]').each(function(){
        if($(this).is("[class^=dataitem]")){
            //code for dataitem
        }
        else{
            //code for not dataitem
        }
    });
}); 
```

使用 get 函数，我使用 url 页面的代码生成一个字符串变量。在这个变量中，我找到了标签，class=list 的标签的子标签，其类以“data”开头，并且对于这些中的每一个，控制类是否以“dataItem”开头，如果是，则应用这些标签的代码。为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:42:04.833

试试这个 ：

```
$.get(url, function(data){
     var YourFindElement = $("<div>" + data + "</div>").find('.list [class^=data]');
       $.each(YourFindElement , function (i, rowValue) {
          if($(this).hasClass("dataitem")){
              //code for dataitem
          }
          else{
            //code for not dataitem
          }
       });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:22:30.767

简短的回答。因为您的选择不会返回任何对象。这可能有几个原因

您可以将代码更改为

```
$.get(url, function(data){
    $("<div>" + data + "</div>").find('.list [class^="data"]').each(function(){
        if($(this).hasClass("dataitem")){
            //code for dataitem
        }
        else{
            //code for not dataitem
        }
    });
}); 
```

这将消除您的第一个问题（您需要将属性值包装在 qoutes 中）。然而，更可能的原因是您正在查看属性值，因此 `class="hover dataitem"`将不匹配`class="dataitem hover"`。因此，我建议您更改为

```
$.get(url, function(data){
    $("<div>" + data + "</div>").find('.list .data').each(function(){
        if($(this).hasClass("dataitem")){
            //code for dataitem
        }
        else{
            //code for not dataitem
        }
    });
}); 
```

这将要求您将`data`类添加到有问题的元素中，而不仅仅是`dataitem`

# eclipse-rap - Tabris UI 控制 iPad 和 iPhone 上的演示指示错误

> ID：15788405
> 
> 赞同：0
> 
> 时间：2013-04-03T13:16:17.210
> 
> 标签：eclipse-rap, tabris

我目前正在验证 Tabris 框架，并在尝试[UI Control Code Snippets](http://developer.eclipsesource.com/tabris/docs/ui-controls/)时偶然发现了一些指示错误。

我将[VisualGuideDemo.java](https://github.com/eclipsesource/tabris-demos/blob/master/com.eclipsesource.tabris.demos/src/com/eclipsesource/tabris/demos/entrypoints/VisualGuideDemo.java#L60)添加到我的 HelloWorld-Project 中，并使用该`createTable`函数向显示中添加了一个表格。在我的浏览器中，它显示了 3 列和 128 行的预期输出。当我在 iPad mini 或 iPhone Simulator 上测试应用程序时...

*   只显示第一列，
*   无法滚动整个列表（我可以向下滚动大约 60 个项目，然后列表“跳”回来）
*   并且表格的宽度不会调整到屏幕的全宽。

见附件截图

![iphone模拟器截图](https://i.stack.imgur.com/PeGLR.png) ![ipad mini 截图](https://i.stack.imgur.com/txJrM.png)

我还尝试添加一个使用整个屏幕宽度的 TabFolder。我使用了“createTabFolder”方法：

```
private void createTabFolder() {
  final Shell shell = new Shell( display, SWT.NONE );
  shell.setLayout( new FillLayout() );
  final TabFolder tabFolder = new TabFolder( shell, SWT.NONE );
  final TabItem tab0 = new TabItem( tabFolder, SWT.NONE );
  tab0.setText( "Tab0" );
  final TabItem tab1 = new TabItem( tabFolder, SWT.NONE );
  tab1.setText( "Tab1" );
  final TabItem tab2 = new TabItem( tabFolder, SWT.NONE );
  tab2.setText( "Tab2" );
  //shell.setSize( 300, 100 );
  shell.open();
} 
```

我取消了 setSize 函数的注释，但 TabFolder 没有调整到屏幕的整个宽度（不在浏览器或 iOS 设备上）。

我是 SWT、RAP/Tabris 的新手，所以我想知道我是否错过了一些基本的东西。

编辑：我猜移动客户端不支持一个表中的几列，但将缺少的列添加到列表末尾可能是一个不错的功能，由 listdividers 分隔。我的假设正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:17:54.260

我找到了宽度问题的解决方案，我只需要打电话`shell.setMaximized(true);`

# sybase - Windows 7 64 位上的 PowerBuilder 10.5 运行时文件

> ID：15788408
> 
> 赞同：0
> 
> 时间：2013-04-03T13:16:20.803
> 
> 标签：sybase, powerbuilder, powerbuilder-build-deploy

首先，我关于 Windows 7 64 位上的 PB 10.5 的原始问题链接在以下链接中得到了大部分解答 - [PowerBuilder 10.5 Application on Windows XP 32-bit to Windows 7 64-bit](https://stackoverflow.com/questions/15617464/powerbuilder-10-5-application-on-windows-xp-32-bit-to-windows-7-64-bit#)

有没有人在 64 位机器上使用过 PB 10.5 运行时文件？

目前在 Windows XP 上有一个 32 位应用程序。客户希望它在 Windows 7 64 位中运行。我知道这是一个很大的飞跃，而且 PB 10.5 长期以来一直不受支持。

有没有人成功地使用 The Runtime Packager PowerBuilder 运行时 DLL 并在 Windows 7 64 位系统中获得以下任何 DLL 的工作？libjcc.dll libjutils.dll pbacc105.dll pbdwe105.dll pbdwr105.dll pbdwr105.pbd pbjag105.dll pbjvm105.dll pbshr105.dll pbtra105.dll pbvm105.dll

我意识到这些是 32 位 DLL，但我需要从某个地方开始，不知道如何解决这个问题。希望得到任何人的帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:58:24.437

我怀疑对您最有用的答案是一个完全无用的答案。

第一点是 PB 10.5 早于 Windows 7。很明显，10.5 在 Windows 7 上的任何成功都将依赖于微软提供应用程序向前兼容性的能力。（与我使用的其他平台相比，MS 在提供前向兼容性方面的成功非常**出色，但从来都不是完美的。）**

Windows 7 在 PB 11.0 时间框架 IIRC 左右发布。Sybase 在 12.0 周期的某个地方宣布他们将支持 Windows 7。对新平台的支持对您的营销上限来说是一件好事，因此对这种延迟的合理解释是他们发现**了一些**问题并不得不解决这些问题出去。（据我所知，Sybase 从未在一个地方列出这些问题，尽管有些问题可能出现在每个补丁发布的错误列表中。）

我敢打赌，如果您创建了一个 10.5 应用程序，并且在应用程序打开事件中有一行：

```
MessageBox ("Hello World!", "It's me!") 
```

并将其部署到 Windows 7，它会工作。相反，根据我们从 Sybase 的行为推断，存在一些功能组合和排列在部署到 Windows 7 时将失败。**您的**应用程序位于此 n 维功能和复杂性范围内的位置很难判断。

因此，我怀疑您对问题最有用的回答是，**我**是否在 Windows 7 上成功使用 10.5 应用程序并不重要；我的经验可能不会影响您的应用程序在 Windows 7 上的成功。**存在已知的风险**，即使我们不确切知道这些风险是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:22:08.997

我确实在 Win7/64（也就是 32b）上使用 PB11.5 IDE 没有问题。

关于运行时打包器，我不再使用它，因为我开发和维护了几个异步发布的产品，并且可能需要不同的运行时，有时来自不同的主要 PB 版本（10.5 / 11.5），有时来自不同的版本（EBF）同一个专业。

由于 PB 似乎对运行时的版本非常挑剔（从某种意义上说，您最好为运行时分发与构建应用程序的版本完全相同的构建），我将运行时 dll 放在与应用程序相同的目录中文件。PB 10.5 / 11.5 PB 应用程序使用同一目录中的运行时文件没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T12:56:50.007

从工作的 xp 32 位系统中导出这些 dll 的注册表信息。如果 dll 不在 powerbuilder 的可执行路径中，而是位于 C:\windows\system32 或 system32 的子目录之一中，则将 dll 复制到 windows 7 64 位系统的相关 c:\windows\syswow64 文件夹区域。如果有必要将它们放置在新位置，则修改注册表导出以指向新位置。如果您来自 powerbuilder 的可执行路径，则无需修改注册表导出。将它们合并到注册表中。可能需要重新启动。当旧的 dll 和 ocx 文件证明对于在升级 Office 版本后保持 Office 数据库应用程序之类的东西正常工作时，我已经取得了成功。你' 我希望在离线存储中保留 dll 和注册表合并文件的副本，以防您在将来的某个日期必须从头开始重建系统。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T16:32:35.290

根据我的所有经验，PB 10.5 在 Windows 7（32 或 64 位）上运行良好。PB 10.5与 11.5、12.5 和 PB 2017（及更高版本）在大型企业 IT 商店中*仍然相对常见。*

PowerBuilder 包含的包管理器将收集所有需要的运行时库。Windows 7 64 位可以通过 SYSWoW64 运行 32 位或 64 位，'WoW64' 代表 Windows 64 位上的 Windows 32 位。**在您的 Windows 中运行的SysWoW64**进程是您的 Windows 操作系统的一部分。

# jquery - Jquery 变量说 TypeError: test is undefined

> ID：15788410
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:16:25.587
> 
> 标签：jquery

我有`var test = $(this).attr('id');`。我已将 test 声明为 var 但我不明白为什么我会得到

> 类型错误：测试未定义。

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:22:29.410

您的变量 ,`test`是`undefined`因为无论`this`是什么（也许是您的`window`）都没有`id`属性。因此，当您请求不存在属性的值时，`undefined`将返回并分配为 的值`test`。您很可能混淆了`this`.

下面我`this`从全局范围以及回调函数中调用。请注意他们的参考文献中的差异。根据`this`调用位置以及调用*周围*函数的方式，`this`可能意味着非常不同的事情。

```
var outerTest = $(this).width(); // this is the window

$("img").on("click", function () {
    var innerTest = $(this).attr("id"); // this is the image
}); 
```

参见：[`this`Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

# shell - 苹果脚本删除文件

> ID：15788412
> 
> 赞同：1
> 
> 时间：2013-04-03T13:16:26.727
> 
> 标签：shell, applescript, osx-mountain-lion

我正在尝试编写一个苹果脚本来删除我的 sleepimage 文件。执行的终端命令

```
sudo rm /private/var/vm/sleepimage 
```

显然我不能只在applescript编辑器中输入它，所以我一直在使用它

```
do shell script rm / private / var / vm / sleepimage with administrator privileges 
```

但是我得到了这个错误

> 错误“未定义变量 rm。” 来自“rm”的数字 -2753

任何帮助将不胜感激，我知道它很简单，但我对这些代码的东西不太好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:23:49.057

我怀疑你只需要在你的微型 Applescript 中有一些引号。

尝试：

```
do shell script "rm /private/var/vm/sleepimage" with administrator privileges 
```

如果这是您最终使用的内容，我会感到惊讶，因为每次调用该脚本时都会要求您（或某人）输入管理员用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:39:00.857

尝试：

```
set myPath to "/private/var/vm/sleepimage"
set usr to "username"
set pswd to "password"

do shell script "rm " & quoted form of myPath user name usr password pswd with administrator privileges 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:28:58.433

更明智的解决方案是：

```
sudo pmset hibernatefile /dev/null 
```

然后，一旦您删除了休眠文件一次，它就会被永久删除。

# iphone - 将 PDF 文件插入 Core Data？

> ID：15788414
> 
> 赞同：2
> 
> 时间：2013-04-03T13:16:35.273
> 
> 标签：iphone, ios, pdf, core-data, import

我正在使用我的应用程序导入一些 PDF 文件。但我正在尝试将我的 PDF 文件插入我的数据库。我正在使用核心数据。是否有可能做到这一点 ？如果是，我该怎么做？我必须使用哪种类型（NSData，NSDocument，...？）

非常感谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T16:12:13.370

要存储 PDF（或任何大数据 blob）：

1.  对属性使用 Core Data “二进制”类型，它对应于`NSData`.
2.  在您的 Core Data 模型中，为属性打开“允许外部存储”，以便 Core Data 可以将数据存储在持久存储之外。

通常最好将 PDF 写入文件，并将文件名存储在持久存储中，而不是整个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:18:27.597

通常对于大文件，即大图像或pdf文件，您应该在core data中保存的只是对文件的引用，并将pdf存储在永久目录中`NSCachesDirectory`或永久目录中，具体取决于您的需要。

希望有帮助。

# php - 删除数组中相邻的相似值

> ID：15788415
> 
> 赞同：2
> 
> 时间：2013-04-03T13:16:38.913
> 
> 标签：php, arrays, duplicates

我有这样的数组

```
{
0: "abc"
1: "abc"
5: "abc"
6: "def"
7: "ghk"
8: "abc"
} 
```

我想删除相邻的相似值。就如

```
{
0: "abc"
6: "def"
7: "ghk"
8: "abc"
} 
```

我尝试使用

```
$p = array_unique($array); 
```

但它变成

```
{
0: "abc"
6: "def"
7: "ghk"
} 
```

我不想删除 8: "abc" 因为它不是相邻的相似值。
我可以使用任何功能来做到这一点吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:21:12.073

```
$myArray = array(
    0 => "abc",
    1 => "abc",
    5 => "abc",
    6 => "def",
    7 => "ghk",
    8 => "abc",
);

$previous = NULL;
$newArray = array_filter(
    $myArray,
    function ($value) use (&$previous) {
        $p = $previous;
        $previous = $value;
        return $value != $p;
    }
);

var_dump($newArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:27:09.753

你可以这样做：

```
$myArray = array(
        0 => "abc",
        1 => "abc",
        5 => "abc",
        6 => "def",
        7 => "ghk",
        8 => "abc",
);

$newArray = array();
$previous = '';
foreach ($myArray as $myArray_value) {

    if ($previous !== $myArray_value)
        $newArray[] = $myArray_value;

    $previous = $myArray_value;

}

print_r($newArray); 
```

希望这可以帮助你:)

# iphone - 从 Outlook 2010 发送时，“webkit-text-size-adjust”不起作用 - HTML 电子邮件签名

> ID：15788425
> 
> 赞同：1
> 
> 时间：2013-04-03T13:17:11.277
> 
> 标签：iphone, html, ios, email, signature

我已经准备好对我正在构建的 HTML 电子邮件签名感到沮丧，使用 Thunderbird 附加签名时很好，但是从 Outlook 2010（我的客户用来发送电子邮件）发送会解决很多问题 - 这是两个主要的：

1.  '-webkit-text-size-adjust:100%' / '-webkit-text-size-adjust:none' 似乎不起作用，这意味着 iphone / ipad 上的字体格式过大并且看起来很丑。

2.  从 Outlook 2010 发送并在 Hotmail 中阅读时（现在实际上是“Outlook”，这使这个问题更加烦人） - 它会在文本行之间产生大量空白。我知道'display：block'可以消除差距，但这仅适用于我认为的图像？

任何帮助将不胜感激！谢谢

# java - 如何从 Play Framework 中的另一个模板调用模板？

> ID：15788426
> 
> 赞同：2
> 
> 时间：2013-04-03T13:17:12.777
> 
> 标签：java, html, scala, playframework, playframework-2.0

我有一个`accountlist.scala.html`看起来像这样的模板：

```
@(accounts: models.domain.AccountList)
@titlebar = {<p>some html</p>}
@content = {
    @for(account <- accounts) {
        <p>@account.name</p>
    }
}

@main(titlebar)(content) 
```

...和另一个这样的模板`account.scala.html`：

```
@(account: models.domain.Account)

@titlebar = {<p>@account.name</p>}
@content = {
    @for(transaction <- account.getTransactions()) {
        <p>@transaction.detail</p>
    }
}
@main(titlebar)(content) 
```

从他们两个我调用模板`main.scala.html`。

我可以在第一个视图 accountlist.scala.html 中访问整个`Account`POJO，所以当我转到显示详细信息的视图时，我真的不需要调用服务器来获取帐户的详细信息。我只想更改客户端的视图。如何`account.scala.html`从`accountlist.scala.html`用户单击列表中的帐户的视图中调用第二个视图？我已准备好根据需要更改模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:27:54.127

我已经提供了一个先前的答案，在这篇文章的末尾仍然可以找到。但是，从您的评论中，我了解到您在要求其他东西而不了解它的危险性。

处理用例的方法有三种，让我们从最糟糕的一种开始。

**有状态的 Web 应用程序**

如果您已从某个数据源将数据加载到 Pojo 中，并且您想在多个请求之间重用 Pojo，那么您要做的是在服务器上实现某种客户端状态，例如缓存。Web 应用程序已经以这种方式开发了很长时间，这是主要错误和错误的根源。如果数据库中的底层帐户数据在一个 http 请求和以下请求之间更新，会发生什么？您的客户端不会看到它，因为它使用缓存数据。此外，当用户在他的浏览器中执行返回时会发生什么？您如何在服务器端收到通知，以便跟踪用户在其导航流程中的位置？由于这些和其他原因，玩！被设计为**无状态**的。**如果您真的喜欢 Web 应用程序，您可能需要了解什么是 REST 架构风格。**

**无状态的 Web 应用程序**

在无状态 Web 应用程序中，不允许在两个 http 请求之间保留数据，因此您有两种处理方式：

*一次性生成用户界面*

当您的帐户数据减少时，您可以使用这种方法。您将每个帐户中的所有必要数据嵌入到您的页面中，并生成视图，您将其隐藏并且仅在用户单击时显示。请注意，您可以在服务器端生成 HTML，并使用 Javascript 使您的 DOM 的某些部分可见，或者只是传输您帐户的 JSON 表示并使用某种模板库直接在客户端上构建必要的 UI

*需要时生成用户界面*

当帐户数据结构包含太多信息时，这种方法就变得很有必要了，并且您一开始不想为客户端上的所有帐户传输所有这些信息。例如，如果您知道用户只想查看极少数帐户的详细信息，那么您希望仅在用户要求时才需要详细信息。

例如，在您的帐户列表中，您将有一个与每个帐户关联的按钮，称为详细信息，您将使用帐户 ID 向服务器发送新请求。

```
@(accounts: models.domain.AccountList)
@titlebar = {<p>some html</p>}
@content = {
    @for(account <- accounts) {
        <p>@account.name <button class="details" href="@routes.Controllers.account(account.id)">details</button></p>
    }
} 
```

请注意，您也可以在客户端生成用户界面，但是当用户单击按钮时，您仍需要从服务器检索数据结构。这将确保用户检索帐户的最后可用状态。

* * *

旧答案

如果您的目标是重用您的视图，那么 Play 视图就是 Scala 类，因此您可以导入它们：

```
@import packagename._ 
```

然后在另一个模板中使用它：

```
@for(account <- accounts) {
        @account(account)
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:12:34.440

该问题揭示了对游戏框架模板的误解。在编译 play 项目时，模板代码被转换为 html、css 和 javascript。

您不能“调用”/链接另一个模板，显示来自`href`您帐户行属性的帐户交易。但是，您可以执行以下任何操作：

1.  如果您已一次性将所有账户的所有交易加载到客户端：扩展模板以生成`<div>`显示交易的每个账户的单独部分。还生成 javascript 以 1) 隐藏概览和 2)在单击概览中的一个帐户时`div`显示特定交易。`div`请参阅 Edmondo1984 提出的淘汰库或 twitter bootstrap 中的手风琴或标签。
2.  如果您只从服务器加载帐户概览。生成这样的链接`href="@routes.Controllers.account(account.id)"`（参见 Edmondo1984 答案）并制作另一个模板来查看此数据。

由于问题涉及您从服务器获取所有数据的情况，请选择选项 1。

# asp.net - Html.Raw 为空

> ID：15788430
> 
> 赞同：2
> 
> 时间：2013-04-03T13:17:22.327
> 
> 标签：asp.net, razor

我在这里遇到了麻烦。在我看来，我有以下代码：

```
@if (!string.IsNullOrEmpty(alert)) { 
    <div class="alert">@Html.Raw(alert)</div>
} 
```

但是抛出了一个类型异常，`NullReferenceException`说 Html 属性为空。我怎么能解决这个问题？

OBS：我的视图页面继承自一个类，而该类又继承自`System.Web.WebPages.WebPage`

// 网络配置

```
<system.web>
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.WebPages.Deployment, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </assemblies>
</compilation>
<httpRuntime targetFramework="4.0"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:55:00.900

我没有得到解决方案，所以我将代码更改为：

```
@if (!string.IsNullOrEmpty(alert)) {    
    <div class="alert">@(new HtmlString(alert))</div>
} 
```

Razor 不编码 HtmlString。所以它工作得很好。

# java - SAX：XML 文档结构必须在同一个实体内开始和结束

> ID：15788431
> 
> 赞同：2
> 
> 时间：2013-04-03T13:17:22.887
> 
> 标签：java, xml, sax

我正在尝试使用`javax.xml.stream.XMLStreamReader`. 这些文件格式正确（使用 xmllint 验证），但我仍然收到以下异常：

```
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[12418,95]
Message: XML document structures must start and end within the same entity.
at     com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:592) 
```

这是我的代码的简化：

```
while(parser.hasNext()){
    parser.next();
    if (parser.getEventType() == XMLStreamReader.START_ELEMENT){
        if (parser.getLocalName() == "s") {
            // do stuff
        }
    }
    if (parser.getEventType() == XMLStreamReader.END_ELEMENT){
        if (parser.getLocalName() == "s") {
            // do more stuff                
        }
    }
    if (parser.getEventType() == XMLStreamReader.CHARACTERS){
        if (inSentenceElement) {
            // process text
            parser.getText()...
        }
    }
} 
```

我已经检查了错误消息中给出的 XML 中的行/列，没有什么让我觉得不寻常。我一直认为文件的大小可能是一个问题，并且它们会被截断，以便在关闭根元素之前读取 EOF。这可行吗？如果可行，我该如何避免呢？

编辑：bz2 压缩文件的大小高达 1.5G，最多 7M 行，但在 4M 的相对较小的文件在大约 10K 行后崩溃（尽管出现问题的行数往往会因 3K 行而异.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T18:06:52.987

```
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,4207737]
Message: Attribute name "i" associated with an element type "someElement" must be followed by the ' = ' character.
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:598)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:181)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:355)
    ... 49 more 
```

实际 XML 中的属性是：index="1"，所以它是有效的，但是它被截断了。相同的代码和 XML 在 Java 1.7.0u51 上工作，但在 1.7.0u71 中出现上述异常而失败。位置始终与该文件位于同一列 (CharacterOffset = 4207736)。我正在使用 JAXB，它在解组期间调用它，但除了 Java 版本之外没有任何变化。

我建议检查最近添加的一些新 XML 限制以减少拒绝服务攻击，它确实适用于我的情况。 [https://docs.oracle.com/javase/tutorial/jaxp/limits/using.html](https://docs.oracle.com/javase/tutorial/jaxp/limits/using.html)

具体来说，将以下内容添加到运行的命令行会禁用所有这些。我**强烈**建议找到更好的限制（或导致您的问题的特定限制），而不是用 0 将它们全部关闭。

```
java -Djdk.xml.entityExpansionLimit=0 -Djdk.xml.elementAttributeLimit=0 -Djdk.xml.maxOccurLimit=0 -Djdk.xml.totalEntitySizeLimit=0 -Djdk.xml.maxGeneralEntitySizeLimit=0 -Djdk.xml.maxParameterEntitySizeLimit=0 -Djdk.xml.maxElementDepth=0    -jar myJarfile.jar 
```

# ruby-on-rails - 更改用户角色时如何避免数据库异常？

> ID：15788434
> 
> 赞同：0
> 
> 时间：2013-04-03T13:17:37.433
> 
> 标签：ruby-on-rails, database, activerecord, user-roles

我有这样的情况：我有用户表，我按类型划分用户：管理员、经理、客户。

只能使用 Organizer 模型（ Organizer has_many manager）创建管理器，并且它是在嵌套表单上创建的。

如果有人尝试使用已注册的客户电子邮件创建经理，我想**将客户升级为经理。**

**现在的情况：**

当我尝试使用客户的电子邮件创建经理时，它向我显示数据库错误。我可以进行一些验证以将客户类型 -> 更改为 -> 经理，但它仍然想保存经理记录并且显然失败并给我下一个错误。

```
 ActiveRecord::RecordNotUnique:
   PG::Error: ERROR:  duplicate key value violates unique constraint "index_users_on_email" 
```

我该如何处理这个**RIGHT**？

PS这是我的模型代码：

```
 class Organizer
 accepts_nested_attributes_for :managers
 has_many :managers
 ___________________

 class Manager < User
 belongs_to :organizer

 ___________________

 class Customer < User 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:22:09.190

您应该首先检查您的用户表中是否存在具有指定电子邮件 ID 的此类记录。

*   如果是，则将该记录中的角色 col 更新为 Manager，
*   否则插入一条新记录。

# .net - 通过 ADO.Net 和 COM 互操作性进行 MS Access 批量更新

> ID：15788441
> 
> 赞同：9
> 
> 时间：2013-04-03T13:18:14.593
> 
> 标签：.net, performance, ms-access, ado.net, dao

[这是对这个线程](https://stackoverflow.com/questions/7070011/writing-large-number-of-records-bulk-insert-to-access-in-net-c)的一种跟进。这就是**.Net 2.0**的全部内容；至少对我来说。

本质上，Marc（上面的 OP）尝试了几种不同的方法来更新具有 100,000 条记录的 MS Access 表，并发现使用 DAO 连接比使用 ADO.Net**快大约 10 到 30 倍。**我走了几乎相同的路径（下面的示例）并得出了相同的结论。

我想我只是想了解***为什么***OleDB 和 ODBC 这么慢，我很想知道自 2011 年那篇文章以来是否有人找到比 DAO 更好的答案。我真的更愿意避免 DAO 和/或自动化，因为他们将要求客户端计算机具有可再分发的 Access 或数据库引擎（或者我坚持使用不支持 .ACCDB 的 DAO 3.6）。

最初的尝试；100,000 条记录/10 列约 100 秒：

```
Dim accessDB As New OleDb.OleDbConnection( _ 
                      "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & _
                                accessPath & ";Persist Security Info=True;")
accessDB.Open()

Dim accessCommand As OleDb.OleDbCommand = accessDB.CreateCommand
Dim accessDataAdapter As New OleDb.OleDbDataAdapter( _
                                   "SELECT * FROM " & tableName, accessDB)
Dim accessCommandBuilder As New OleDb.OleDbCommandBuilder(accessDataAdapter)

Dim accessDataTable As New DataTable
accessDataTable.Load(_Reader, System.Data.LoadOption.Upsert)

//This command is what takes 99% of the runtime; loops through each row and runs 
//the update command that is built by the command builder. The problem seems to 
//be that you can't change the UpdateBatchSize property with MS Access
accessDataAdapter.Update(accessDataTable) 
```

无论如何，我觉得这真的很奇怪，所以我尝试了几种相同的口味：

*   为 ODBC 切换 OleDB
*   循环遍历数据表并为每一行运行一个 INSERT 语句
    *   这就是 .Update 的作用
*   使用 ACE 提供程序而不是 Jet（ODBC 和 OleDB）
*   从 DataReader.Read 循环中运行数据适配器更新
    *   出于沮丧；这很有趣。

最后，我尝试使用 DAO。代码基本上应该做同样的事情；但显然不是，因为它在大约 10 秒内运行。

```
 Dim dbEngine As New DAO.DBEngine
 Dim accessDB As DAO.Database = dbEngine.OpenDatabase(accessPath)
 Dim accessTable As DAO.Recordset = accessDB.OpenRecordset(tableName)

While _Reader.Read
    accessTable.AddNew()
      For i = 0 To _Reader.FieldCount - 1
        accessTable.Fields(i).Value = _Reader.Item(i).ToString
      Next
    accessTable.Update()
End While 
```

其他一些注意事项：

*   在所有示例中，所有内容都转换为字符串，以尽量保持简单和一致
    *   例外：在我的第一个示例中，使用 Table.Load 函数，我不这样做是因为......好吧，我真的不能，但是当我遍历阅读器并构建插入命令时，我做了基本相同的事情（即无论如何，它在做什么）。它没有帮助。
*   对于每个字段... Next vs. Field(i) vs. Field(name) 对我来说没有区别
*   我运行的每个测试都从一个新压缩的 Access 数据库中的空的预构建数据表开始
*   将数据读取器加载到内存中的数据表大约需要 3 秒
*   我认为封送数据不是问题，因为 Marc 的帖子表明通过自动化加载文本文件的速度与 DAO 一样快——如果有的话，它不应该在使用 ODBC/OleDB 时封送数据，但*应该*使用自动化时
*   所有这些都让我感到不安，因为它没有意义

希望有人能够对此有所了解……这很奇怪。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:04:42.560

这里的原因是 DAO 驱动程序比 ODBC 驱动程序更接近 MS Access 数据库引擎。

DAO 方法`AddNew`并`Update`直接委托给 MS Access 等效项，它在任何时候都不会生成 SQL，因此 MS Access 没有要解析的 SQL。

另一方面，DataAdapter 代码为每一行生成一个更新语句，该更新语句被传递给 ODBC，然后由它传递给 MSAccess 驱动程序，该驱动程序要么

1.  `AddNew`独立地将 SQL 和问题和`Update` 命令解析到 Access 数据库或
2.  将 SQL 传递给 MS Access，它没有针对解析 SQL 进行优化，一旦解析，最终会将 SQL 转换为`AddNew`命令 `Update`。

无论哪种方式，您都需要花费时间生成 SQL，然后让一些东西解释该 SQL，其中 DAO 方法绕过 SQL 生成/解释并直接进入金属。

解决此问题的一种方法是创建您自己的“数据库服务”，该服务在具有访问数据库的机器上运行。这会编组您的选择和更新，并可以通过远程处理、WCF（http 或其他）与客户端进行通信。这是很多工作，并且会极大地改变您的应用程序逻辑。

*找出数据库驱动程序的正确名称（例如 Jet 或其他）是留给读者的练习*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T20:19:08.090

我知道这个问题很老，但答案可能会帮助仍在为此苦苦挣扎的人。

还有另一种方法需要考虑。由于源和目标连接字符串都是已知的，源表可以链接到目标 Access 数据库，可能需要通过 DAO 或 ADOX 进行一些连接字符串解析（我知道，ADOX 在这里是题外话）。
然后，通过在与目标 Access 数据库的 DAO 或 OleDb 连接上发出类似这样的语句，可以相当快地传输如此链接的表中的数据：

```
SELECT * INTO Table1 FROM _LINKED_Table1 
```

一些缺点（请指出我遗漏的任何内容）：

*   源表必须包含主键
*   必须通过检查源索引模式来重新创建主键和索引
*   查询运行时不容易获得传输进度状态

一些优点（请指出我错过的任何内容）：

*   如果要复制所有用户表，则只需检查源表模式
*   不必检查源 Columns 模式来为 CREATE TABLE 语句生成列定义
    （例如，尝试从 OleDb 模式中可靠地获取 AUTONUMBER / IDENTITY 信息，即基于检查其他模式而不假设列值和标志位的组合)
*   不必生成大量的 INSERT INTO ... VALUES ... 语句，占代码中的 AUTONUMBER / IDENTITY 列，或者以其他方式为代码中的每一行运行数据库操作
*   能够指定标准来过滤传输的记录
*   不必担心文本、日期或时间列或如何在查询中分隔、转义或格式化它们的值，除非在查询条件中使用

这种方法在一个生产项目中被采用，结果证明是最快的，至少对我来说是这样。:o)

# android - 选项卡小部件样式和颜色

> ID：15788442
> 
> 赞同：-3
> 
> 时间：2013-04-03T13:18:14.610
> 
> 标签：android, colors, tabs, styles, size

如何更改选项卡小部件背景颜色？我在哪里可以找到那些样式代码？

PS如何使标签中的文字居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:35:23.890

![在此处输入图像描述](https://i.stack.imgur.com/bADAy.png)

将此图像保存到任何可绘制的文件夹中，称为 footer.png

并将其设置为标签小部件的背景图像

```
<TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:alpha="0.75"
            android:background="@drawable/footer" 
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:orientation="horizontal" /> 
```

# mysql - 查询多个表的总和

> ID：15788448
> 
> 赞同：0
> 
> 时间：2013-04-03T13:18:28.363
> 
> 标签：mysql, sql, spree

我需要帮助解决一个困难的查询。这与在 Spree Commerce 平台中实施优惠券的复杂方式有关。

我只需要未付优惠券的总金额。

这些表是：

优先

```
id | value  | key
---+---------------------------------------------
1  | 25     | spree/calculator/flat_rate/amount/5 
```

计算器

```
id  | calculable_id | calculable_type
----+---------------+-----------------
5   | 3             | promotion_action 
```

促销活动

```
id  | activator_id  
----+-------------
3   | 2 
```

活化剂

```
id | expires_at | usage_limit 
---+------------+------------
2  | 2013-12-01 | 4 
```

调整

```
originator_type  | originator_id | amount
-----------------+---------------+-------
promotion_action | 3             | -25 
```

preference.key 中的最后一个数字对应于计算器的 id。

首先我需要总的preferences.amount，乘以activators.usage_limit（除非activators.expires_at <今天），其中preferences.key LIKE '%calculator/flat_rate%'。

结果应该是这个金额减去相应调整的总和。金额

我做到了

```
select 
 (select sum(value) from spree_preferences 
   where `key` like "%calculator/flat_rate%") 
 + 
 (select sum(amount) from spree_adjustments 
   where originator_type = 'promotion_action') as total; 
```

, 但这没有考虑 expires_at 和 usage_limit。

对于更新的狂欢，答案如下：

`select sum(subAggregate.outstanding) from ( select (subDetail.value * subDetail.multiplier) + subDetail.adjustmentAmount as outstanding from ( select p.value, case when a.expires_at > curDate() then a.usage_limit else 1 end as multiplier , ifNull(adj.amount,0) as adjustmentAmount from spree_preferences p left outer join spree_calculators c on replace(p.key,'spree/calculator/flat_rate/amount/','') = c.id left outer join spree_promotion_actions pa on c.calculable_id = pa.id and c.calculable_type = 'Spree::PromotionAction' left outer join spree_promotions a on pa.promotion_id = a.id left outer join spree_adjustments adj on pa.id = adj.source_id and pa.type = 'Spree::PromotionAction' ) subDetail ) subAggregate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:52:54.047

```
select sum(subAggregate.outstanding)
from
    (
    select (subDetail.value * subDetail.multiplier) + subDetail.adjustmentAmount as outstanding
    from
        (
        select  p.value,
                case
                    when a.expires_at > curDate() then a.usage_limit
                    else 1
                end as multiplier ,
                ifNull(adj.amount,0) as adjustmentAmount
        from    preferences p
                left outer join calculators c
                    on replace(p.key,'spree/calculator/flat_rate/amount/','') = c.id
                left outer join promotion_actions pa
                    on c.calculabel_id = pa.id
                    and c.calculable_type = 'promotion_action'
                left outer join activators a
                    on pa.activator_id = a.id
                left outer join adjustments adj
                    on pa.id = adj.originator_id
                    and pa.originator_type = 'promotion_action'
        ) subDetail
    ) subAggregate 
```

# sql - 查询分隔文本文件中包含的数据以在 VB.NET 中填充数据网格的最简单方法

> ID：15788450
> 
> 赞同：1
> 
> 时间：2013-04-03T13:18:28.643
> 
> 标签：sql, vb.net, linq, text, datatable

我试图找到对大型文本文件运行类似 SQL 的查询并填充数据网格的最简单和最强大的方法。文本是分隔的，我想要做的伪代码是：

```
table = parsed_text_file<br>
result = "SELECT CONCAT (first, last) AS name, COUNT(city) FROM table WHERE field = blah"<br>
DataGridView.DataSource = result 
```

到目前为止，我已经尝试使用：
1）`<OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & textfile & ";Extended Properties='text;HDR=Yes;IMEX=1;FMT=TabDelimited';")` 使用 OleDbDataAdapter 和 SQL 查询来填充数据集。这适用于 SQL 部分，但我在 db 连接和分隔符以及 Schema.ini 方面遇到了很多问题

2) TextFieldParser 构建数据集。这可以很好地读取文件并创建一个表，但是只使用 DataView、Select 和/或 RowFilter 来查询是一条狗。

3）逐行解析文件并填充数据集，但这非常慢。

在我陷入使用数据集的 LINQ 之前，肯定有更简单的方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:37:32.493

您提到输入是分隔的，但没有说明它是如何分隔的。[我在http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-CSV-using-DynamicObject-and-TextFieldParser](http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-CSV-using-DynamicObject-and-TextFieldParser)上有一系列帖子和示例代码，说明了在动态类型上使用 LINQ 和 CSV 输入文件。看看这对你的情况是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T21:35:01.087

有一个名为 SQL Plugin for Notepad++ 的插件可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:31:41.090

这取决于你想变得多么简单。您可以阅读 csv 并将其拆分。

```
foreach(string[] line in File.ReadLines(fileName).Split(","))
{
    // do stuff with line
} 
```

但这没有任何类型信息，而且很容易出错，但如果你想要它又快又脏，那就太好了。

还有`Microsoft Text Driver`一个可以与`OdbcConnection`.

```
public OdbcConnection GetConnection(string filePath)
{
    // MaxScanRows set to 0 will scan the entire file before generating types
    var connectionString =  @"Driver={Microsoft Text Driver (*.txt; *.csv)};" +
                            string.Format(@"Dbq={0};", filePath) +
                            @"Extensions=csv;MaxScanRows=0";

    var connection = new OdbcConnection(connectionString);
    return connection;
}

using(var connection = GetConnection(filePath))
{
    connection.Open();

    using(var command = new OdbcCommand("SELECT * FROM data.csv", connection))
    {
        using(var reader = command.ExecuteReader())
        {
            // Do stuff with reader
        }
    }
} 
```

这种方法的缺点是它有点复杂，文档`Microsoft Text Driver`很烂，而且它依赖于 Jet，但它产生了一个`DataReader`可以使使用数据更容易的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:31:10.467

您可以将文本文件读入 SQLite 数据库，然后使用实际 SQL 查询该数据库。

[http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application](http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application)

# java - 解析主机名的 IP 地址

> ID：15788453
> 
> 赞同：92
> 
> 时间：2013-04-03T13:09:20.757
> 
> 标签：java

我有 DNS 服务器 IP 地址和主机名。

使用 Java，如何使用 IP 地址和主机名找到该 DNS 服务器返回的主机名 IP 地址？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-04-03T13:24:35.970

看看[`InetAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)和[`getHostAddress()`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getHostAddress%28%29)方法。

```
InetAddress address = InetAddress.getByName("www.example.com"); 
System.out.println(address.getHostAddress()); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-03T13:25:20.360

你可以这样做：

```
for(InetAddress addr : InetAddress.getAllByName("stackoverflow.com"))
    System.out.println(addr.getHostAddress()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-03T13:24:51.423

您可以为此使用 InetAddress。试试下面的代码，

```
InetAddress address = InetAddress.getByName("www.yahoo.com");
System.out.println(address.getHostAddress());
System.out.println(address.getHostName()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-13T12:14:06.587

如上所述，您可以使用 `InetAddress.getByName("hostName")`，但这会给您一个缓存的 IP，请阅读 java 文档。如果要从 DNS 获取 IP，可以使用：

```
InetAddress[] ipAddress = DNSNameService.lookupAllHostAddr("hostName"); 
```

# networking - 如何定义我自己的 tcp 标头选项以及如何使常规 tcp 服务器对这些选项做出反应？

> ID：15788455
> 
> 赞同：0
> 
> 时间：2013-04-03T13:18:45.007
> 
> 标签：networking, tcp, network-programming

我想构建一个特定的代理服务器和相应的特定客户端程序。我想定义自己的 tcp 标头选项。这些 tcp 标头选项仅由代理服务器和客户端程序使用。我不想使 tcp 标头选项通用。

我注意到没有使用 TCP 标头选项种类编号 31-252。

[http://www.networksorcery.com/enp/protocol/tcp.htm#Options](http://www.networksorcery.com/enp/protocol/tcp.htm#Options)

所以我可以从范围中选择定义我自己的 tcp 头选项，它只被我的代理程序和客户端使用。

但问题是，我怎样才能让一个常规的 tcp 服务器对带有标头选项的 tcp 数据包做出反应？例如，当我使用类似的东西时：

```
 listenfd=socket(AF_INET,SOCK_STREAM,0); 

 bind(listenfd,(struct sockaddr *)&servaddr,sizeof(servaddr));

 listen(listenfd,1024);

 connfd = accept(listenfd,(struct sockaddr *)&cliaddr,&clilen);

 n = recvfrom(connfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&clilen) 
```

tcp 选项不`mesg`正确？那么如何让 tcp 服务器处理我定义的 tcp 选项呢？

tcp 选项协商是如何完成的？例如，SACK。在常规 tcp 服务器上默认启用哪些选项？

是否有与 tcp 标头选项相关的源代码？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:55:01.737

> 我想定义自己的 tcp 标头选项

为什么？

* * *

> 所以我可以从范围中选择来定义我自己的 tcp 标头选项

不可以。您需要向[IANA](http://www.iana.org/)申请一个分配给您提议的扩展名的申请。

* * *

> 但问题是如何使常规 tcp 服务器对带有标头选项的 tcp 数据包做出反应？

如果您所说的*常规*是我理解的*常规，那么答案是：通过 IETF* [RFC](http://en.wikipedia.org/wiki/Request_for_Comments)流程创建并记录 TCP 扩展。然后，您需要为尽可能多的操作系统在尽可能多的 TCP 堆栈中实施您的提案，以满足您的*常规*要求。您可能还需要网络接口卡芯片组制造商采用您的新 TCP 选项；如今，在许多情况下，大部分 TCP 处理都被卸载到网卡上。

* * *

> tcp 选项协商是如何完成的？例如，SACK 在常规 tcp 服务器上默认启用哪些选项？

我看不出这里的第二个问题是第一个问题的例子。但是，从[RFC 2018](https://www.rfc-editor.org/rfc/rfc2018)开始：

> 生成 Sack 选项：数据接收器行为
> 
> 如果数据接收者在这个连接的 SYN 上接收到 SACK-Permitted 选项，则数据接收者可以选择生成 SACK 选项，如下所述。如果数据接收方在任何情况下生成 SACK 选项，它应该在所有允许的情况下生成它们。如果数据接收器没有收到给定连接的 SACK-Permitted 选项，它绝不能在该连接上发送 SACK 选项。

* * *

> 是否有与 tcp 标头选项相关的源代码？

[Linux Kernel](https://www.kernel.org/)中有一个网络堆栈，它是开源的。

* * *

考虑到你在问这些问题，我怀疑你的野心可能会超出你目前的能力。

# iphone - UIPageViewController 错误

> ID：15788458
> 
> 赞同：2
> 
> 时间：2013-04-03T13:19:00.317
> 
> 标签：iphone, ios, objective-c

在我的项目中，我使用 UIPageViewController 从情节提要中添加一些视图控制器。我在这里做了一个非常简单的示例项目： [http](http://www.2shared.com/file/Rz0G1b5C/pageScroll.html) ://www.2shared.com/file/Rz0G1b5C/pageScroll.html （选择 iPhone 模拟器）如您所见，我得到了错误`The number of provided view controllers (3) doesn't match the number required (1) for the requested spine location`（在我的真实项目中，它`transition`而不是`spine location` 然而我所做的一切都和我的真实项目一样。我已经搜索了堆栈溢出，但找不到任何问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:40:37.183

当我第一次使用页面视图控制器时，我最难弄清楚这一点，但发生这种情况是因为你同时为页面视图控制器提供了所有视图控制器，所以它试图同时显示 3 个但这种类型书脊一次仅支持 1 个视图控制器。那为什么一次需要超过1个呢？如果你把书脊放在页面的中间（我想在 iPad 上更常见），你可以同时显示两个视图控制器，所以你每次都需要将一个数组输入到页面视图控制器中。在大多数情况下，您只想显示一个，因此当您运行时`setViewControllers`，您应该只将**初始**页面作为一个对象数组放入控制器中。

你想要做的翻页是在你的示例代码中将你的页面视图控制器设置为 UIPageViewControllerDataSource，然后使用这些函数来页面进出你想要的控制器。数据源提供`viewControllerAfterViewController`和`viewControllerBeforeViewController`函数，您可以使用它们来确定数组中的下一个视图控制器。你的数组是在本地声明的，你的控制器也是如此，所以当我这样做时，一种对我有用的方法是使数组成为你在整个页面视图控制器中引用的头文件中的变量，而不是在本地声明它`viewDidLoad`正如您在示例中所做的那样。像你现在一样填写它`viewDidLoad`，但然后只发送一个包含第**一个**对象的数组到`setViewControllers`.

```
NSArray *initialViewControllers = [[NSArray alloc] initWithObjects:[viewControllersArray objectAtIndex:0], nil];
[self setViewControllers:initialViewControllers
               direction:UIPageViewControllerNavigationDirectionForward
                animated:YES
              completion:^(BOOL finished){
                  NSLog(@"call back success");}]; 
```

因此，在这些数据源函数中，您会找出当前视图控制器在视图控制器数组中的位置，然后返回下一个索引中的一个 for `viewControllerAfterViewController`，或者返回上一个索引中的一个 for `viewControllerBeforeViewController`：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    if ([viewControllersArray containsObject:viewController]) {
        NSInteger index = [viewControllersArray indexOfObject:viewController];
        if (index < [viewControllersArray count] && index > 0) {
            return [viewControllersArray objectAtIndex:(index - 1)];
        }
    }
    return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    if ([viewControllersArray containsObject:viewController]) {
        NSInteger index = [viewControllersArray indexOfObject:viewController];
        if (index < [viewControllersArray count] - 1) {
            return [viewControllersArray objectAtIndex:(index + 1)];
        }
    }
    return nil;
} 
```

通过实现这些功能，您在页面视图控制器中一次只有一个视图控制器，您可以根据需要将它们分页进出。它们仍然存储在您的 中`viewControllerArray`，因此您可以翻转回您离开的同一个控制器。

# facebook-graph-api - 如何使用 Meteor 执行常见的 FB 动作？

> ID：15788459
> 
> 赞同：4
> 
> 时间：2013-04-03T13:19:02.503
> 
> 标签：facebook-graph-api, meteor

使用包在 Meteor 中执行常见的 Facebook 操作需要哪些步骤`accounts-facebook`？我正在尝试获取朋友列表、在墙上发帖并最终执行其他操作，但我不确定如何继续。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:12:17.613

更新：meteor 0.6.0 的轻微修改

您需要使用 API 来帮助您，例如 nodefacebook graph api：[https ://github.com/criso/fbgraph](https://github.com/criso/fbgraph)

你需要制作一个包裹。您需要创建一个名为的目录`/packages`，并在其中创建一个名为`fbgraph`.

每个包都需要一个`package.js`（放在 fbgraph 目录下）。在你的`package.js`你可以使用类似的东西：

```
Package.describe({
    summary: "Facebook fbgraph npm module",
});

Package.on_use(function (api) {
    api.add_files('server.js', 'server');
});

Npm.depends({fbgraph:"0.2.6"}); 
```

**服务器端 js - server.js**

```
Meteor.methods({
    'postToFacebok':function(text) {
        var graph = Npm.require('fbgraph');
        if(Meteor.user().services.facebook.accessToken) {
          graph.setAccessToken(Meteor.user().services.facebook.accessToken);
          var future = new Future();
          var onComplete = future.resolver();
          //Async Meteor (help from : https://gist.github.com/possibilities/3443021
          graph.post('/me/feed',{message:text},function(err,result) {
              return onComplete(err, result);
          }
          Future.wait(future);
        }else{
            return false;
        }
    }
}); 
```

然后在客户端登录时

**客户端js**

```
Meteor.call("postToFacebook", "Im posting to my wall!", function(err,result) {
    if(!err) alert("Posted to facebook");
}); 
```

Fbgraph 回购：[https ://github.com/criso/fbgraph](https://github.com/criso/fbgraph)

请求列表的图形 API 文档：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

异步（在将数据返回给客户端之前等待来自 facebook 的回调）：[https ://gist.github.com/possibilities/3443021](https://gist.github.com/possibilities/3443021)

# if-statement - Sharepoint Visual Studio 工作流程 IfElseActivity

> ID：15788462
> 
> 赞同：0
> 
> 时间：2013-04-03T13:19:11.690
> 
> 标签：if-statement, sharepoint-2007, workflow

我正在为 SharePoint 开发一个顺序工作流，并想知道 IfElseActivity 是否应该始终至少有两个分支。例如，如果我有一个真/假条件，我是否需要两个分支，或者我可以只为真有一个分支？C# 中的 if 语句不需要 else 语句，但在工作流中我想知道当条件为 false 时会发生什么，它会继续到工作流的末尾吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:55:21.427

根据此链接：

[http://office.microsoft.com/en-us/sharepoint-designer-help/introduction-to-workflows-HA010100587.aspx#BM2](http://office.microsoft.com/en-us/sharepoint-designer-help/introduction-to-workflows-HA010100587.aspx#BM2)

您不需要 else 条件，有关在 if 语句为 false 时指定您要执行的操作的方法的信息，请参见上页的此段：

> 您还可以创建没有特定条件的分支。这样，如果条件为真，工作流将执行 > 一个操作，如果条件为假，则执行不同的操作。例如，工作流中的以下步骤仅在条件为真时才向团队发送消息；否则，工作流只会向文档作者发送消息。通过添加没有特定条件的分支，工作流会在第一个分支中的条件为假的任何情况下执行该分支中的操作。

# c# - C#中使用动态类型、动态对象和expando对象的模式/问题

> ID：15788468
> 
> 赞同：3
> 
> 时间：2013-04-03T13:19:21.817
> 
> 标签：c#, dynamic, expandoobject, dynamicobject

在对 C# 中的 Dynamic Objects 和 Expando Objects 进行了一些研究之后，我最近意识到了 dynamic 关键字

我可以理解它非常酷，但是除了 ASP.NET MVC 中的 ViewBag 之外，我正在努力寻找要使用的应用程序。

所以我正在寻找任何可以使用 Dynamic 和 Expando 对象的设计模式或可以使用动态对象优雅地解决的问题示例......

# c++ - 无法将短裤复制到动态数组 C++

> ID：15788469
> 
> 赞同：0
> 
> 时间：2013-04-03T13:19:22.197
> 
> 标签：c++, pointers, binary, fstream, short

我一直在尝试将 3d 模型格式加载到 C++ 中，但我遇到了问题。一切都很好，除了 indicies 的短裤数组...当我尝试加载一个模型时，数组中的前 2 个空格是不正确的...如果我加载第二个模型；更多的短裤在模型数据中是错误的......

这是我的头文件：

```
#ifndef MODELDATA_H
#define MODELDATA_H

#include <GL/glu.h>
#include <string>

using namespace std;

class modelData
{
    public:
    modelData();
    virtual ~modelData();

    short m_vert_count;
    short m_ind_count;
    short m_tid;
    GLfloat *m_verts;
    GLfloat *m_tex;
    GLint *m_ind;

    void loadModel(string input);
    void draw();

    protected:
    private:
};

#endif // MODELDATA_H 
```

这是我的 cpp 文件：

```
#include "modelData.h"
#include <GL/glu.h>
#include <fstream>
#include <string.h>
#include <iostream>

using namespace std;

modelData::modelData()
{
    //ctor
    m_verts = NULL;
    m_tex = NULL;
    m_ind = NULL;
    m_ind_count = 0;
    m_vert_count = 0;
}

modelData::~modelData()
{
    //dtor
    delete[] m_verts;
    delete[] m_tex;
    delete[] m_ind;
    m_ind_count = 0;
    m_vert_count = 0;
}

void modelData::loadModel(string input)
{
    short temp;
    char *newInput = new char[input.size()+1];
    newInput[input.size()]=0;
    memcpy(newInput,input.c_str(),input.size());
    ifstream a_file( newInput,  ios::binary | ios::in );
    delete newInput;

    a_file.seekg( 0, ios::beg );
    if ( ! a_file.read( reinterpret_cast<char*>( & m_vert_count ), sizeof( short ) ) )
    {
        cout << "Error reading from file: can't attain vertex buffer size" << endl;
        return;
    }

    if ( ! a_file.read( reinterpret_cast<char*>( & m_ind_count ), sizeof( short ) ) )
    {
        cout << "Error reading from file: can't attain index buffer size" << endl;
        return;
    }

    m_verts = new GLfloat[m_vert_count];
    m_ind = new GLint[m_ind_count];
    m_tex = new GLfloat[m_vert_count];

    for (int i = 0; i < m_vert_count; i++)
    {
        if ( ! a_file.read( reinterpret_cast<char*>( & m_verts[i] ), sizeof( float ) ) )
        {
            cout << "Error reading from file: can't attain vertex buffer" << endl;
            return;
        }
    }

    for (int i = 0; i < ((m_vert_count)/3)*2; i++)
    {
        if ( ! a_file.read( reinterpret_cast<char*>( & m_tex[i] ), sizeof( float ) ) )
        {
            cout << "Error reading from file: can't attain texcoord buffer" << endl;
            return;
        }
    }
    for (int i = 0; i < m_ind_count; i++)
    {
        if ( ! a_file.read( reinterpret_cast<char*>( & m_ind[i] ), sizeof( short ) ) )
        {
            cout << "Error reading from file: can't attain index buffer" << endl;
            return;
        }
    }

    cout << m_vert_count << "   " << m_ind_count << endl;
    cout << "Model successfully loaded from " << input << "  ...Jolly good." << endl;

}

void modelData::draw()
{
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3,GL_FLOAT,0,m_verts);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2,GL_FLOAT,0,m_tex);
    glDrawElements(GL_TRIANGLES,m_ind_count,GL_UNSIGNED_INT,m_ind);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

} 
```

我希望代码不会太长或太乱，我真的不知道发生了什么……据我所知；m_verts[] 和 m_tex[] 看起来填充得很好，但是 m_ind[] 不断地通过数组弹出错误的数字......我是否错误地分配了数组？我不是在清理我应该清理的东西吗？

哦，我不认为这是导致问题的原因，但你会注意到我没有添加任何东西来进行大端或小端转换......这是因为我使用的英特尔机器似乎总是假设little endian 和我的 android 游戏引擎使用 little endian ......所以我认为这不是问题......

任何帮助或建议都会很棒。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:23:06.037

如果我没看错的话，它`m_ind`被输入为一个`GLint`s 数组，但你正在读入它，就好像它是一个`short`s 数组一样。在大多数平台上，这意味着值的前两个字节几乎是随机的。

如果您的数据流实际上包含短裤，这将是读取它们的安全方法：

```
for (int i = 0; i < m_ind_count; i++)
{
    short val;
    if ( ! a_file.read( reinterpret_cast<char*>( & val ), sizeof( short ) ) )
    {
        cout << "Error reading from file: can't attain index buffer" << endl;
        return;
    }
    m_ind[i] = val;
} 
```

一些不相​​关的注释：

`o`这：

```
char *newInput = new char[input.size()+1];
newInput[input.size()]=0;
memcpy(newInput,input.c_str(),input.size());
ifstream a_file( newInput,  ios::binary | ios::in );
delete newInput; 
```

这只是一种非常复杂的说法：

```
ifstream a_file(input.c_str(), ios::binary | ios::in); 
```

`o`我强烈建议使用`std::vector`而不是手动动态分配和释放数组。

# sql - 在 webmatrix/razor 中结合分页和细化

> ID：15788471
> 
> 赞同：2
> 
> 时间：2013-04-03T13:19:30.457
> 
> 标签：sql, asp.net-mvc, razor, paging, webmatrix

我正在尝试结合 Mike Brind 提供的两个教程。它们单独工作，但结合起来却没有，我相信这只是我需要做的一个简单的改变。

我想在多个页面上显示查询，但如果我更改搜索参数，我希望它更新。这是我的代码（使用 Mike 的书籍示例）：

```
@{
    Page.Title = "Paging Books";
    Page.Header = "View Books";

    var pageSize = 3; 
    var totalPages = 0; 
    var count = 0;
    var page = UrlData[0].IsInt() ? UrlData[0].AsInt() : 1;
    var offset = (page -1) * pageSize;

    var db = Database.Open("Books");
    var sql = "Select Count(*) From Books " + 
           "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
           "Inner Join Categories on Books.CategoryId = Categories.CategoryId";
    count = (int)db.QueryValue(sql);
    totalPages = count/pageSize;        
    if(count % pageSize > 0){
        totalPages += 1;
    }
    sql = "Select Title, ISBN, Description, FirstName, LastName, Category From Books " + 
           "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
           "Inner Join Categories on Books.CategoryId = Categories.CategoryId " +
           "Order By BookId OFFSET @0 ROWS FETCH NEXT @1 ROWS  ONLY;";

    var result = db.Query(sql, offset, pageSize);

    var categories = db.Query("Select CategoryID, Category FROM Categories");
}

<form method="post" action="">
    Select Category:
    <select name="CategoryID">
        <option value="">-- View All Books --</option>
        @foreach(var c in categories){
            <option value="@c.CategoryId">@c.Category</option>
        }
    </select> <br />
    <input type="submit" name="Action" value="Select" />
</form>           

<p>Page @page of @totalPages</p>
@if(IsPost){
    foreach(var row in db.Query(sql, offset, pageSize, Request["CategoryID"])){
        <h2>@row.Title</h2>
        <p><strong>Author:</strong> @row.FirstName @row.LastName<br />
            <strong>ISBN:</strong> @row.ISBN <br/>
            <strong>Description:</strong> @row.Description <br />
            <strong>Category: </strong> @row.Category</p>
    }
}

@{
    for (var i = 1; i < totalPages + 1; i++){
        <a href="/Paging/@i">@i</a>
    }
} 
```

此代码当前显示正确页面中的所有信息，但是当我更改 时`Category`，它不仅显示匹配的结果，它仍然显示所有类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:49:36.860

您的 asp 代码不完整。您只有 SQL 代码来返回完整的图书列表。它没有包含根据用户选择的类别进行过滤的语句。

在你做之前：

```
var sql = "Select Count(*) From Books " + 
       "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
       "Inner Join Categories on Books.CategoryId = Categories.CategoryId"; 
```

您需要测试请求是否包含具有非空值的属性 CategoryID。如果不为空，则定义一个不同的 sql 来过滤类别。像这样：

```
if(!Request.QueryString["CategoryID"].IsEmpty() ) {
    var sql = "Select Count(*) From Books " + 
           "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
           "Where Books.CategoryID=@0";
    count = (int)db.QueryValue(sql, Request.QueryString["CategoryID"])
}
else {
    var sql = "Select Count(*) From Books " + 
           "Inner Join Authors on Books.AuthorId = Authors.AuthorId "; // no need for 2nd inner join
    count = (int)db.QueryValue(sql);
} 
```

第二条 sql 语句中也出现了同样的问题。与上述调整偏移量类似。

# javascript - 延迟显示数组元素

> ID：15788472
> 
> 赞同：3
> 
> 时间：2013-04-03T13:19:37.717
> 
> 标签：javascript, settimeout

我有一个数组`s=[John; Alex; Mark]`，我想以 3 秒的延迟一个一个地显示这个数组的元素。

```
for (var i=0; i<=3; i++)
  {
     setTimeout(function(){x.innerHTML=s[i]},3000)
  } 
```

这似乎很简单的问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T13:23:14.910

1.  你的循环运行四次，而不是三
2.  `setTimeout`以小写字母开头`s`
3.  你的延迟应该是 3000 3 秒，而不是 2000
4.  你的延迟应该是`3000 * i`，不是，`3000`否则他们会同时开火
5.  如果没有特别的预防措施，你不能在异步回调中使用循环变量 - 回调将看到最后分配给`i`的值，而不是你通过循环时的值。

这有效，并且完全避免了循环变量问题：

```
var s = ['John', 'Mark', 'Alex'];
var i = 0;

(function loop() {
    x.innerHTML = s[i];
    if (++i < s.length) {
        setTimeout(loop, 3000);  // call myself in 3 seconds time if required
    }
})();      // above function expression is called immediately to start it off 
```

请注意它如何使用“伪递归”在上一次迭代完成后 3000 毫秒触发下一次迭代。这比让`n`所有未完成的计时器同时等待更可取。

见[http://jsfiddle.net/alnitak/mHQVz/](http://jsfiddle.net/alnitak/mHQVz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:53:30.667

[http://jsfiddle.net/rlemon/mHQVz/1/](http://jsfiddle.net/rlemon/mHQVz/1/)

我得修修补补……尽管这可能不是最好的解决方案，但它很有趣。

```
var x = document.getElementById('x'),
    s = ['John', 'Mark', 'Alex'];

(function loop() {
    s.length && (x.innerHTML = s.shift(), setTimeout(loop, 3000));
})(); 
```

[Alnitak](https://stackoverflow.com/a/15788574/829835)的解决方案要好得多。然而，它们都可以工作（他的可读性更高，而且不那么hacky，也不会破坏数组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T17:12:04.760

这也将有所帮助：

```
const fruits = ['apple', 'banana', 'mango', 'guava'];
let index = 0;
const primtMe = (value, i) => {
    if (i < fruits.length) {
        setTimeout(() => {
            console.log(i + ' value = ' + value)
            primtMe(fruits[i + 1], i + 1)
        }, 3000);
    } else {
        return;
    }
}

primtMe(fruits[index], index) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:22:47.033

您的代码将不起作用，因为您一次设置了 2000 毫秒（即*2 秒*）的*四个超时。*您最好使用设置*三个*超时（按数组中的元素数）的闭包，延迟为*3000 毫秒*。可以使用以下代码完成（注意是小写字母）：***`setTimeout`***

 ***```
var s = ["John", "Alex", "Mark"];
for (var i = 0; i < s.length; i++) {
    (function(i) {
        setTimeout(function() {
            x.innerHTML = s[i];
        }, 3000 * i);
    })(i);
} 
```

**演示：http:** [//jsfiddle.net/6Ne6z/](http://jsfiddle.net/6Ne6z/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:25:52.770

尝试

```
var s=['John', 'Alex', 'Mark'];
var x = document.getElementById('x');

function display(i){
    if(i >= s.length){
        i = 0;
    }

    x.innerHTML = s[i];
    setTimeout(function(){
       display(i + 1)
    }, 2000)
}

display(0) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/fk3sV/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:27:24.870

如果你不使用闭包，你最终会得到 i 未定义。这是因为在每次迭代中，您都在覆盖 i 是什么。到它完成时，它将是未定义的。使用闭包将保留 i。

另一方面，当您可以检查长度时，硬编码值（即 i<3）是没有意义的。这样，如果 s 发生变化，您的 for 循环仍将获取所有内容。

```
var s = ['john','mark','brian'];
for (var i = 0; i < s.length; i++) {
    (function(i) {
        setTimeout(function() {
            x.innerHTML = s[i];
        }, 3000*(i+1));
    })(i);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-09T20:29:41.373

您可以使用`setInterval`延迟 3 秒后一个一个地显示元素：

```
s=["John", "Alex", "Mark"];

var i = 0;
var id = setInterval(function(){                
            if(i > s.length) {                  
                clearInterval(id);                  
            }
            else{
                console.log(s[i++]);
            }
}, 3000); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-23T16:14:02.113

在没有伪递归的情况下试试这个

```
var arr = [10,20,30,40]; // your array
var i = 0;
var interval = 2000 // 2 sec, you can add your time required
function callInterval() {
// set a variable for setInterval
	var time = setInterval(()=>{
		console.log('['+arr[i]+','+i+']');
		i++; 
		if(i==arr.length){
			this.clearInterval(time);// clear the interval after the index
		}
		}, interval);
}

callInterval();
```***

# c# - 如何在asp.net 4.0、C# web应用程序中在线查看MS office文件

> ID：15788477
> 
> 赞同：1
> 
> 时间：2013-04-03T13:19:43.257
> 
> 标签：c#, asp.net

目前，我正在开发一个用 C# 和 ASP.NET 开发的文件管理系统，用户可以在其中存储批量文件。现在我想查看在浏览器中打开的所有可查看文件格式（即图像、ms office、pdf 等）（无需在客户端本地计算机中下载）。我已经完成了一半的工作，即我的应用程序适用于所有图像文件和 pdf 文件。但是我遇到了 ms office 文件（即`.xls`, `.xlsx`, `.doc`, `.docx`,`.ppt`等）格式的问题。我尝试了一些代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //Set the appropriate ContentType.
        string FilePath = MapPath("Test/xyz.pdf");
        Response.Buffer = true;
        Response.Clear();
        Response.ClearContent();
        Response.ClearHeaders();
        Response.ContentType = "Application/pdf";
        Response.AddHeader("content-disposition", "inline; filename=\"" + "xyz.pdf" + "\"");
        Response.Write(FilePath);
        Response.End();
    } 
```

此代码仅适用于`.pdf`文件，但是当我更改`Response.ContentType`word 或 excel 文件`Application/msword`（对于 Microsoft Word 文件）`Application/x-msexcel`（对于 Microsoft Excel 文件）的内容类型时，此代码不起作用。请指导我该怎么做。我应该使用任何工具，如谷歌文档查看器或其他东西。如果只能使用工具，那么请建议我一个很好的工具。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:34:28.753

你可以试试这样的。

```
Response.ContentType = application/force-download
Response.AddHeader "content-disposition","attachment; filename=filename.xls 
```

同样对于 excel，我看到有些人使用：`Response.ContentType = "application/vnd.ms-excel"`但是你的 MS Word 的 MIME 似乎很好。

[这里也是](http://filext.com/faq/office_mime_types.php)MS Office 2007+ 的所有 MIME 类型的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:12:59.207

如果您正在开发可以控制浏览器使用的软件，也就是说您可以指定用户使用哪个浏览器，您可以尝试这个组件[http://www.ocxt.com/](http://www.ocxt.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T07:32:41.710

```
protected void downloadButton_Click(object sender, EventArgs e)
{
    string fileName = "test.xls";
    string filePath = Server.MapPath("~/test.xls");
    Response.Clear();

    Response.AppendHeader("content-disposition", "attachment; filename=" + fileName);
    Response.ContentType = "application/force-download";
    Response.WriteFile(filePath);
    Response.Flush();
    Response.End();
} 
```

# java - Java compareTo 问题

> ID：15788481
> 
> 赞同：-2
> 
> 时间：2013-04-03T13:19:48.400
> 
> 标签：java

```
int Area() {

            int area=iX1*iY1;
            return area;
        }

        int compareTo(Object r) {

            if(r==area) {

                return 0;
            }

            if (r>area) {

                return 1;
            }
            else {

                return -1;
            }

        } 
```

int iX1 和 iY1 只是在程序开头声明的一些变量。我必须`int area`与提交的参数进行比较`r`。我得到的问题是`area`无法与`r`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:23:45.167

您`==`在比较对象时使用。运算符比较引用，因此只有当两个引用都引用*同一个*对象`==`时，结果才可能为真。您可能应该调用。*`equals()`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:31:57.907

假设该对象是一个 Integer 对象，那么您可以这样做：现在您可以进行比较。

```
int newR = ((Integer) r).intValue();

int compareTo(Object r) {

        if(newR==area) {

            return 0;
        }

        if (newR>area) {

            return 1;
        }
        else {

            return -1;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:33:36.557

您的代码片段看起来像您想要实现一个类，让我们命名它`YourType`，其中两个实例可以通过比较计算值（区域）来排序。典型的方法是实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)：

```
class YourType implements Comparable<YourType> {

  private int iX1, iY1;

  ...

  int Area() {
    return iX1*iY1;
  }

  int compareTo(YourType other) {
    int myArea = Area();
    int otherArea = other.Area();
    if (otherArea == area) {
      return 0;
    }
    if (otherArea > area) {
      return 1;
    } else {
      return -1;
    }
  }
} 
```

compareTo() 方法旨在比较两个相同类型（或超类型）的对象，而不是苹果和梨。如果您错过了泛型参数，编译器会假定 Object 作为比较类型，这几乎是无用的。

最简单的实现是：

```
 int compareTo(YourType other) {
    return Integer.valueOf(Area()).compareTo(Integer.valueOf(other.Area()));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:26:08.553

如果 Object 是你要定义的某种类，让它有一个可以与整数比较的值，如果它真的是 Java 的 Class "Object"，就没有办法进行这样的比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:30:46.590

您正在尝试将 int 值与对象进行比较。您需要将 r 转换为 Area ，然后比较 area 字段

```
Area areaObject = (Area)r;
if(areaObject.area == this.area) {
     return 0
} 
```

这段代码还有其他问题。类的声明不能像这样你宁愿写

```
class Area {
    private int area;
    public Area(int x, int y) {
         area = x * y;
    }
} 
```*

# javascript - 错误：没有控制器：ngModel

> ID：15788482
> 
> 赞同：10
> 
> 时间：2013-04-03T13:19:50.467
> 
> 标签：javascript, web-applications, angularjs, angularjs-scope

当我添加`ng-change="reverseOrder=this.checked"`到复选框时，如下所示：

```
<input id="reverseOrder" type="checkbox" ng-change="reverseOrder=this.checked"/> 
```

我得到以下异常：

```
Error: No controller: ngModel 
```

我尝试向输入框添加`ng-model`一个包含整个视图和标签的 div `<html>`，这会产生如下异常：

```
Error: Non-assignable model expression:  (<div class="ng-scope" ng-model="">) 
```

这里发生了什么？我认为我不需要明确引入模型。我已经阅读了[Angular 文档](http://docs.angularjs.org/api/ng.directive%3angModel)，但并不明智。

提前致谢。

戴夫

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T13:40:38.333

`ngChange`需要`ngModel`指令。但是您`ngChange`出于相同的目的使用`ngModel`. 只需：

```
<input id="reverseOrder" type="checkbox" ng-model="reverseOrder"/> 
```

# apache - 当 url 不包含字符串时，htaccess 重定向

> ID：15788483
> 
> 赞同：1
> 
> 时间：2013-04-03T13:19:50.650
> 
> 标签：apache, .htaccess

我有以下网站结构

```
 - root 
     - de/index.htm
     - en/index.htm 
```

当用户请求站点并且没有定义语言时

```
 mysite.com 
```

代替

```
mysite.com/en/ 
```

我希望他被重定向到 en 文件夹。因为根文件夹实际上不包含任何文件。我不太熟悉 apache 重写规则。这是我尝试过的

```
RewriteEngine On
RewriteBase / 

RewriteCond RewriteCond %{REQUEST_URI} /
RewriteRule ^/en/index.htm 
```

但这不起作用。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:24:18.570

您所拥有的不是正确的语法，您`RewriteCond`连续获得 2 个，然后是看起来像实际条件的内容，然后是一个没有目标的规则。尝试：

```
RewriteEngine On
RewriteBase / 
RewriteRule ^/?$ /en/index.htm [L] 
```

如果您想更改浏览器的 URL 地址栏中的内容，`R`请在括号中添加一个标志：

```
RewriteRule ^/?$ /en/index.htm [L,R] 
```

# powershell - Teamcity powershell runner 在服务器上远程运行命令

> ID：15788486
> 
> 赞同：6
> 
> 时间：2013-04-03T13:19:57.983
> 
> 标签：powershell, teamcity, remote-server

我有一个奇怪的问题，每当我尝试远程调用我们的一个测试服务器时，TeamCity 就会挂起。

目前构建步骤是：

> *   模板文件
> *   编译代码在
> *   打包项目
> *   将包发送到测试服务器
> *   在测试服务器上解压缩包

现在一切正常，直到最后一个阶段，在远程服务器上解压缩包。现在我只想运行一个powershell命令来连接并运行命令然后退出。如果我从远程桌面使用 powershell，这一切都很好，并且提供的用户凭据是正确的。

正在运行的示例如下：

```
$password = ConvertTo-SecureString "%PasswordVar%" -AsPlainText -Force
$credentials = New-Object System.Manager.Automation.PsCredential("%UsernameVar%", $password)
etsn -computername %TestServer1Var% -Credential $credentials 
```

当这被称为 TeamCity 只是挂起时，它必须手动停止，否则它将永远停留在代理上的这一步。我试过不使用凭据，我试过不使用 etsn 并使用完整的命令名，还尝试了其他远程命令方法，似乎没有任何效果。

那么有没有办法让 TeamCity 实际运行命令？或者找出是什么导致它不确定地处理这一步？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T11:48:19.717

这是小问题的混合，因为 1 用户在通过团队城市查询时没有正确解析域，因此需要将其添加到 username `some-user@some-domain`。还有一个问题是，在进行 PSSESSION 连接时会遇到某种连接限制，但是如果我使用脚本块切换到 Invoke-Command，它就可以正常工作。

如果它对这里的任何人有帮助，那么我最终使用的命令是解压缩远程文件，使用 7zip 命令行作为本机解决方案似乎从来没有工作过。

```
$password = ConvertTo-SecureString "%TestServer.Password%" -AsPlainText -Force
$credentials = New-Object System.Management.Automation.PsCredential("%TestServer.Username%",$password)

$scriptBlock1 = {`
`
    $sevenZip = "%TestServer.ReleasePath%\7za.exe"; `
    &$sevenZip x %TestServer.ReleasePath%\web-package.zip -o%TestServer.WebPath% * -aoa; `
}
Invoke-Command -computername %TestServer.Server% -Credential $credentials -scriptblock $scriptBlock1 
```

要记住的一件事是，用户名包含上面列出的域，还需要魔术引号以允许脚本块跨行分布，以及分号表示任务应该一起运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T03:56:27.070

`Invoke-Command`如果您必须在服务器上运行的脚本很短并且您必须等待它完成执行，则效果很好。

我的问题是我想在远程服务器上启动一项服务，然后只记录服务器内的内容，然后让 teamcity 构建以继续执行。使用`Invoke-Command`，teamcity 确实远程执行了该过程，但一直等待该过程完成 n 返回。如果您正在寻找仅调用服务器上长时间运行的进程而忘记它的东西，请尝试以下操作：

这个解决方案最适合我：

1）将要远程执行的脚本放在服务器内的文件中..让我们说startup.bat

```
call Powershell.exe -executionpolicy remotesigned -File %1\bin\startup.ps1 
```

这基本上执行位于 Web 服务器中的另一个 powershell 脚本。

```
Start-Process -WindowStyle hidden java -ArgumentList '-jar', "$APP_HOME\bin\test-api.jar" -PassThru 
```

确保有一个 teamcity Build 步骤来将这些文件部署到 Web 服务器。

2）创建一个teamcity Build Step来执行一个powershell脚本文件

Teamcity 执行的示例 Powershell 命令：

```
$SERVER = (Get-Item env:SERVER_NAME).Value
$APP_HOME = (Get-Item env:APP_HOME).Value
$STARTUP_SCRIPT_PATH = "$APP_HOME\bin\startup.bat"

Function Remote-Process {
  param(
    [string]$ComputerName,
    [string]$Cmd
  )

  echo "Invoking Remote Script.."
  $RETURNVAL = ([WMICLASS]"\\$ComputerName\ROOT\CIMV2:win32_process").Create($Cmd)
  echo $RETURNVAL
}

$COMMAND = "$STARTUP_SCRIPT_PATH $APP_HOME"
$output = Remote-Process $SERVER $COMMAND

echo $OUTPUT 
```

其中 APP_HOME 是部署 Web 应用程序的文件夹（在远程服务器上）的绝对路径。

就是这样。这样，您甚至可以执行服务，并且远程进程不会被杀死并让您继续构建链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-16T13:28:16.260

只是对已接受答案的补充

```
$scriptBlock = [Scriptblock]::Create(@'
  echo 'before'
  ipconfig /all
  echo 'after'
'@)

Invoke-Command -ComputerName AD01 -ScriptBlock $scriptBlock 
```

[来源](https://www.thomasmaurer.ch/2011/11/powershell-convert-string-to-scriptblock/)
[不要使用反引号](https://get-powershellblog.blogspot.com/2017/07/bye-bye-backtick-natural-line.html)

以前可以在 TC 步骤中定义`%PowerShell.header%`和`%PowerShell.footer%`参数不编写样板代码

# asp.net - 验证摘要超出页面

> ID：15788491
> 
> 赞同：0
> 
> 时间：2013-04-03T13:20:06.437
> 
> 标签：asp.net, validation, scroll

我在模式弹出窗口上显示了一个面板。该面板有一些带有验证控件的文本框。我正在使用面板底部的验证摘要来显示所有验证错误。问题是错误列表（验证）超出了面板（页面）并且面板不滚动...尝试将面板的溢出设置为自动/滚动，没有用...什么是需要吗？

```
<div style="height:auto">
<asp:Panel ID="pnlMyAddressBook" runat="server" BackColor="White"  CssClass="roundcorner pnl">
    TEST<table style="width: 100%;">
                                        <tr>
                                            <td colspan="2">
                                                &nbsp;
                                                <asp:Label ID="lblMyAddressBookk" runat="server" CssClass="hlbl" Text="My Address Book"></asp:Label>
                                                &nbsp; &nbsp; &nbsp;
                                            </td>
                                            <td colspan="2">
                                                <asp:ImageButton ID="imgbtnClose" runat="server" Height="20px" src="Images1/close-icon.png"
                                                    Width="20px" ImageAlign="Right" OnClick="imgbtnClose_Click"  CausesValidation="false"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 120px">
                                                &nbsp;
                                                <asp:Label ID="lblFisrtName" runat="server" Text="First Name"></asp:Label>
                                            </td>
                                            <td style="width: 200px">
                                                &nbsp;
                                                <asp:TextBox ID="txtFirstName" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ControlToValidate="txtFirstName" ErrorMessage="FirstName" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td style="width: 120px">
                                                &nbsp;<asp:Label ID="lblEmailAddress" runat="server" Text="Email Address"></asp:Label>
                                                &nbsp;
                                            </td>
                                            <td style="width: 100px">
                                                &nbsp;
                                                <asp:TextBox ID="txtEmailAddress" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator10" runat="server" ControlToValidate="txtEmailAddress" ErrorMessage="Email Address" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblLastName" runat="server" Text="Last Name"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtLastName" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" ControlToValidate="txtLastName" ErrorMessage="LastName" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblCity" runat="server" Text="City"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtCity" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator8" runat="server" ControlToValidate="txtCity" ErrorMessage="City" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblCountry" runat="server" Text="Country"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:DropDownList ID="ddlCountry" runat="server" AutoPostBack="True" 
                                                    CssClass="ddl2" onselectedindexchanged="ddlCountry_SelectedIndexChanged" DataTextField="CountryName" DataValueField="ID">
                                                </asp:DropDownList><asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server" ControlToValidate="ddlCountry" ErrorMessage="Country" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblState" runat="server" Text="State"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:DropDownList ID="ddlState" runat="server" AutoPostBack="True" 
                                                    onselectedindexchanged="ddlState_SelectedIndexChanged" DataTextField="StateName" DataValueField="ID" >
                                                </asp:DropDownList>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" ControlToValidate="ddlState" ErrorMessage="State" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblAddress" runat="server" Text="Address"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtAddressLine1" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ControlToValidate="txtAddressLine1" ErrorMessage="Address Line 1" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblPostalCode" runat="server" Text="Postal Code"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtPostalCode" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ControlToValidate="txtPostalCode" ErrorMessage="Postal Code" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtAddressLine2" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator12" runat="server" ControlToValidate="txtAddressLine2" ErrorMessage="Address Line2" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblMobile" runat="server" Text="Mobile"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtMobile" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ControlToValidate="txtMobile" ErrorMessage="Mobile" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtAddressLine3" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator13" runat="server" ControlToValidate="txtAddressLine3" ErrorMessage="Address Line 3" Text="*" ValidationGroup="vg1"></asp:RequiredFieldValidator>
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                                <asp:Label ID="lblTelephone" runat="server" Text="Telephone"></asp:Label>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:TextBox ID="txtTelephone" runat="server" CssClass="txtbx2"></asp:TextBox>
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                &nbsp;
                                                <asp:Label ID="lblDefaultShippingAddress" runat="server" Text="Default Shipping Address"></asp:Label>
                                                <asp:CheckBox ID="chkDefaultShippingAddress" runat="server" />
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:Button ID="btnSaveAddress" runat="server" CssClass="btn" Text="Save" OnClick="btnSaveAddress_Click" ValidationGroup="vg1" CausesValidation="true" />
                                            </td>
                                        </tr>
                                    </table>
    <asp:Button ID="btnOk" runat="server" Text="Ok" />
       <asp:ValidationSummary ID="ValidationSummary1" HeaderText="You must enter a value in the following fields:"
 DisplayMode="BulletList"
 EnableClientScript="true" runat="server" ValidationGroup="vg1"/>
</asp:Panel> </div> 
```

CSS：

```
 .pnl
{
overflow:auto;
height:auto;
} 
```

# java - JFrame在while循环期间冻结

> ID：15788495
> 
> 赞同：2
> 
> 时间：2013-04-03T13:20:18.617
> 
> 标签：java, swing, while-loop, jframe, jprogressbar

我正在开发一个 Java 程序，它读取文本文件并进行一些概率计算。读取文件和所有相关计算都是在一个while循环中完成的。

我使用 JFrame 创建了一个 GUI，其中我添加了一个进度条（使用 JProgressBar）来显示进度，因为程序需要一段时间来处理文件。

代码看起来像 -

```
while( there are more files to read )
{
    Read this file ;
    Do calculations ;

    Update progress bar ;
} 
```

现在，问题是**一旦 while 循环开始并处理了第一个文件，JFrame 就会冻结**。进度条没有更新，我无法按下 JFrame 中的任何按钮。一旦 while 循环结束，帧就会更新，进度条会更新为其最终值**（因此，进度条从 0 开始，然后暂停，最后到 100）**。

有人可以解释为什么 JFrame 冻结了吗？是否可以在 while 循环迭代中更新它（JFrame 中的进度条）？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:22:18.250

您正在事件调度线程 (EDT) 中执行时间密集型任务。这是一个坏主意，因为 EDT 也会更新 UI。因此，如果此线程被阻止，则不会更新 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:26:08.533

解决方案是使用`threads`，这就是原因，因为您正在冻结，您正在同时做所有事情。

敬请期待：

*   [线程教程](http://www.javabeginner.com/learn-java/java-threads-tutorial)
*   [线程示例？](https://stackoverflow.com/questions/2531938/java-thread-example)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:22:57.347

一个线程一次只能做一件事。因此，如果您让它进行计算，它将不会更新 gui。所以你应该使用另一个线程。此外，您可能需要重新绘制您的 gui。

# python - 有没有办法加入子列表中的字符串列表

> ID：15788504
> 
> 赞同：2
> 
> 时间：2013-04-03T13:20:38.633
> 
> 标签：python, list, join, sublist

我有以下子列表：

```
[['a', 'b'], ['c', 'd'], ['e', 'f'], ['g']] 
```

但是可以加入子列表中的列表吗？

```
[['ab'], ['cd'], ['ef'], ['g']] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:21:31.920

```
>>> L = [['a', 'b'], ['c', 'd'], ['e', 'f'], ['g']]
>>> [[''.join(x)] for x in L]
[['ab'], ['cd'], ['ef'], ['g']] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T13:46:57.627

此外，您可以使用地图

```
>>> L = [['a', 'b'], ['c', 'd'], ['e', 'f'], ['g']]
>>> map(lambda x: [''.join(x)], L)
[['ab'], ['cd'], ['ef'], ['g']] 
```

# php - 在进入mysql PHP之前清理字符串

> ID：15788512
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:20:58.637
> 
> 标签：php, mysql

正如我所知，所有的 mysql（不使用 MySQLi 扩展）功能不再重要，它们基本上已被弃用。因此，我现在使用 MySQLi 扩展。对于我正在编码的新脚本，我想知道在使用准备好的语句之前是否应该转义字符串。如果你应该逃跑，那么最好的方法是什么？

我目前的功能如下，但我不认为它是有效的，甚至是不必要的。

```
function clean($string){
    return mysql_real_escape_string($string);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:24:08.653

> 如果有更好的方法请告诉我方法，谢谢。

是的

```
function format_mysql_string($string){
  return "'".mysql_real_escape_string($string)."'";
} 
```

*   它的名称中没有“清洁”一词，因为`mysql_real_escape_string`它没有“清洁”任何东西。
*   它的名称中有“格式”和“字符串”这两个词，因为这个函数必须用于格式化 SQL 字符串，仅此而已。
*   它确实添加了引号，因为字符串格式需要引号。因此，如果您尝试格式化其他任何内容，您的查询将失败 - 因此，您将知道您需要另一个度量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:01:56.293

好的，所以你已经发现你不应该使用这些`mysql_xxx()`函数。那挺好的。

替代方案是`mysqli`和`PDO`库。

这两个库都提供与 等效的功能`mysql_real_escape_string`，但它们也提供了更好的替代方案，称为参数化查询（或准备好的语句）。

这是使用变量编写查询的另一种方法，被认为比使用转义字符串方法更好。

发生的情况是您使用占位符而不是变量来定义查询；像这样的东西：

```
SELECT * FROM table WHERE id = :id 
```

`:id`占位符在哪里。

您使用上面的查询调用一个带有占位符的函数，然后单独调用以将您的变量与每个占位符相关联。

`mysqli`和库之间的确切代码不同`PDO`，但在这两种情况下，变量都与查询分开发送到数据库服务器，因此没有 SQL 注入攻击的机会。

PDO 库通常被认为是更好的选择。以下是一些优秀网站的链接，其中包含如何编写代码的示例：

*   [https://phpbestpractices.org/](https://phpbestpractices.org/)
*   [http://phpmaster.com/avoid-the-original-mysql-extension-2/](http://phpmaster.com/avoid-the-original-mysql-extension-2/)

希望有帮助。

# php - 获取所有类别（多级）

> ID：15788513
> 
> 赞同：6
> 
> 时间：2013-04-03T13:20:59.997
> 
> 标签：php, arrays, codeigniter, recursion

我正在使用 codeigniter 并有一个包含 3 列（id、name、parent_id）的表。一个类别可以有很多子类别，一个子类别可以有很多子子类别。

我一直在尝试使用以下代码获取所有类别及其子类别：

```
public function getCategory($id)
{
        $categories = array();
        while($id != 0)
        {
                $this->db->from('categories'); //$this->table is a field with the table of categoris
                $this->db->where('id', $id);
                $this->db->limit(1);
                $result = $this->db->get()->row(); //fetching the result
                $categories[] = $result;
                $id = $result->parent_id;
        }
        return $categories;
}

   public function getAllCategories()
    {
            $this->db->select('id');
            $this->db->from('categories'); //$this->table is a field with the table of categoris
            $this->db->where('parent_id', 0);
            $mainCategories = $this->db->get()->result(); //fetching the result
            $result = array();
            foreach($mainCategories as $id)
            {
                    $result[] = $this->getCategory($id->id);
            }
            return $result;
    } 
```

但它只返回 1 级类别。

我的问题是如何完成我的任务：获取每个级别的所有类别和子类别。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-06T03:43:35.370

解决您的问题的最简单方法是添加递归。

```
public function getCategoryTreeForParentId($parent_id = 0) {
  $categories = array();
  $this->db->from('categories');
  $this->db->where('parent_id', $parent_id);
  $result = $this->db->get()->result();
  foreach ($result as $mainCategory) {
    $category = array();
    $category['id'] = $mainCategory->id;
    $category['name'] = $mainCategory->name;
    $category['parent_id'] = $mainCategory->parent_id;
    $category['sub_categories'] = $this->getCategoryTreeForParentId($category['id']);
    $categories[$mainCategory->id] = $category;
  }
  return $categories;
} 
```

通过预加载所有类别并对数组进行操作，这种方法可以大大提高速度，从而跳过对每个新 parent_id 的查询。

我也没有使用 codeigniter 的对象，因为我不知道它们。如果它们支持魔法设置器/获取器或者可以被说服采用一组子对象，则应该使用它们来代替我在这里构建的数组。

该算法的作用是：使用给定的 parent_id 加载所有类别，循环遍历所有这些类别，假设迭代类别 id 为 parent_id 并为其加载所有内容。这有效地加载所有类别，只要它们引用现有类别。

涉及到一个轻微的危险：当您构建类别 A 和 B 时，其中 A 有 B 作为父级，B 有 A 作为父级，当它们一次又一次地相互加载时，您将陷入无限循环。这迫使您在数据中拥有一个干净的树结构。

**更新**

因为这仍然得到了赞成：关于这个实现还有另一个建议。如果您的类别树更大或有多个级别，您可能会遇到性能问题，因为此实现会使用新的查询参数一次又一次地加载类别。这很容易导致数十、数百或数千个查询，具体取决于您的类别树。

一种更有效的方法是从您的类别表中加载**所有**类别（使用一个查询），并在您的应用程序中使用递归对它们进行排序。这是少数情况之一，早期评估确实可以提高性能。

如果在同一个请求中多次需要树，甚至可以通过静态变量添加缓存（具有缓存的所有常见危险）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:35:38.913

这是一个 codeigniter 库，我在 stackoverflow 的答案中找到了它，但我不记得它的所有者。我对其进行了一些修改，以将嵌套类别作为列表返回。它对我很有效。

```
<?php
if (!defined('BASEPATH'))
    exit('No direct script access allowed');
class Tree {

    var $table = '';
    var $CI = '';
    var $ul_class = '';
    var $iteration_number = 0;
    function Tree($config = array()) {
        $this -> table = $config['table'];
        $this -> CI = &get_instance();
        $this -> CI -> load -> database();
        $this -> ul_class = $config['ul_class'];
    }

    function getTree($parent_id = 1) {
        $this -> iteration_number++;
        $this -> CI -> db -> where('parent_id', $parent_id);
        $first_level = $this -> CI -> db -> get($this -> table) -> result();
        if($this->iteration_number == 1)
            $tree = '<ul id="red" class="' . $this -> ul_class . '">';
        else
            $tree = '<ul>';
        foreach ($first_level as $fl) {
            $this -> CI -> db -> where('parent_id', $fl -> category_id);
            $count = $this -> CI -> db -> count_all_results($this -> table);
            if ($count != 0) {
                $tree .= '<li><span>' . $fl -> category_name . '</span>';
                $tree .= $this -> getTree($fl -> category_id);
            } else {
                $tree .= '<li><a href="'.base_url().'categories/sub/'.str_replace(' ', '-', $fl -> category_name).'" cat_id="'.$fl -> category_id.'" class="leaf">' . $fl -> category_name . '</a>';
            }
            $tree .= '</li>';
        }
        $tree .= '</ul>';
        return $tree;
    }
}
 ?> 
```

您可以从控制器中使用它，如下所示：

```
$config['ul_class']='treeview';
$config['table']='categories';
$this->load->library('tree',$config);
$tree = $this->tree->getTree(); 
```

DB表的结构如下：

```
CREATE TABLE IF NOT EXISTS `categories` (
  `category_id` int(4) NOT NULL AUTO_INCREMENT,
  `category_name` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `category_description` varchar(500) COLLATE utf8_unicode_ci NOT NULL,
  `parent_id` int(4) NOT NULL,
  PRIMARY KEY (`category_id`),
  KEY `categories_categories_fk_idx` (`parent_id`)
) ENGINE=InnoDB 
```

您可以通过库中的getTree函数修改返回的结果以返回您需要的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T05:56:51.433

我将提供一个不同的解决方案，尽管您需要进行一些轻微的重组：

使用沿袭风格的层次结构，您可以避免所有递归问题并更快地提取数据。您使用完整的祖先列表标记每个类别，例如：0001-0005-0015 ... 等，然后可以使用 LIKE 运行简单查询以获取您的子查询。

我有一个关于 git 和博客文章的 Codeigniter 库，解释了它是如何工作的：[http ://codebyjeff.com/blog/2012/10/nested-data-with-mahana-hierarchy-library](http://codebyjeff.com/blog/2012/10/nested-data-with-mahana-hierarchy-library)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T18:33:52.750

假设您的顶级类别有 parent_id = 0。您可以使用以下代码从数据库中获取数据，并创建一个二维数组

```
$this->db->from('categories');
$query = $this->db->get();
$rows = $query->result()) {
// ok, we have an array ($rows). We need it
// transformed into a tree
$categories = array();
foreach ($rows as $category) {
   // add the category into parent's array
   $categories[$category->parent_id][] = $category;
}    
return $categories; 
```

然后，您可以遍历 $categories 数组，假设 $categories[0] 是一个包含顶级类别的数组，并且 $categories[$i] 包含 id = $i 的类别（或子类别）的子类别。

# domain-driven-design - 领域驱动设计中的服务

> ID：15788515
> 
> 赞同：2
> 
> 时间：2013-04-03T13:21:00.307
> 
> 标签：domain-driven-design

我正在创建一个应用程序来尝试 DDD。
该应用程序用于租借电影，我的课程是：

```
class Movie{
     String title
     String descrition
}

class Customer{
    String username
}

class Rent{
     Film film
     User user
     Period period
} 
```

对于我对 DDD 的了解，我还`RentService`需要创建一个`Rent`对象。所以我有：

```
class RentService{
     Rent rentMovie(User user, Film film, Date from, Date to){
         //validation check (like if the film is already rented)
         return rentRepository.store(new Rent(user, film, from, to));
     }
} 
```

最后，`RentService`只需创建一个新`Rent`对象，然后使用存储库将其存储。这是正确的吗？
然后，我想为*RentNow 提供一个按钮！*在从今天起租用 3 天的 Web 应用程序中，我应该添加一个计算天数的方法`rentNow`，`RentService`还是可以重新使用旧方法并在 Controller 类中计算该日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:39:33.893

> 最后，RentService 只需创建一个新的 Rent 对象，然后使用存储库将其存储。这是正确的吗？

多半是对的。出租服务是一种[应用服务](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)。但是，谁负责向服务提供`User`和`Film`实体。它可以是控制器，但是您也可以让`RentService`自己这样做。控制器只负责传递 ID：

```
Rent rentMovie(int userId, int filmId, Date from, Date to) 
```

该服务必须引用适当的存储库。好处是“租电影”操作完全被服务封装，控制器的职责更少。

对于 RentNow，还要在应用程序服务上创建一个专用方法。这似乎是一个业务用例，因此应该在服务上明确说明。

# forms - Play 2.0.4 中的初始值

> ID：15788517
> 
> 赞同：1
> 
> 时间：2013-04-03T13:21:10.700
> 
> 标签：forms, playframework-2.0

我在`profile.scala.html`Play 2.04 框架的模板中创建了一个表单。我已经添加了几个这样的输入字段（即用户的名字）：

`@inputText(settings("firstName"), '_label -> "First name:")`

这很好地显示了带有自定义标签和约束的输入字段。

但是，我希望某些字段具有一些初始值，因为用户之前可能已经填写了一些字段，而他现在只是稍微编辑他的设置。

如何使用当前设置将这些初始值添加到输入字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T17:33:05.630

Java中最简单的方法是`filling`您在控制器端的表单，其中包含一些`new`但未**保存**的对象：

```
public static Result editSettings(){
    Settings settings = new Settings();
    settings.firstName = "John";
    settings.lastName = "Doe";
    Form<Settings> settingsForm = form(Settings.class).fill(settings);

    return ok(settings.render(settingsForm));
} 
```

# null - 如何删除空值？

> ID：15788528
> 
> 赞同：3
> 
> 时间：2013-04-03T13:21:33.797
> 
> 标签：null, ssas, mdx

如何删除底部计数中的空值，即。我只想查看实际销售单位的产品，我尝试过非空和非空但没有成功。

```
with
member [Measures].[Amount Sold] as
    ([Measures].[Internet Sales Amount]),
format_string = "currency"

select {[Measures].[Amount Sold]}
on columns,
bottomcount(
order(

{[Product].[Product].Members},
([Measures].[Amount Sold]), bdesc),
5 )on rows 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:20:17.977

您可以过滤 [Product].Members 使用`NOT ISEMPTY()`以排除所有空值，然后对过滤后的集合进行底部计数。

```
with member [Measures].[Amount Sold] as
    ([Measures].[Internet Sales Amount]),
    format_string = "currency"
select 
    {[Measures].[Amount Sold]} on columns,
    order(
        bottomcount(
            filter({[Product].[Product].Members}, NOT ISEMPTY([Measures].[Amount Sold])),
            5,
            [Measures].[Amount Sold]),
        [Measures].[Amount Sold], bdesc) on rows
from [Adventure Works] 
```

请注意，`BottomCount()`它将执行升序、中断层次排序，因此`Order()`如果您想要降序，则需要在其之上进行。

# jquery - 在ajax调用后创建动态可折叠集

> ID：15788538
> 
> 赞同：0
> 
> 时间：2013-04-03T13:21:52.920
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-collapsible

我正在尝试在 jquery mobile 中构建一个动态可折叠集，下面的代码只是创建一个带有两个段落元素的常规 div。

这一切都发生在对 aspx webmethod 的 ajax 调用之后，该方法返回一些我想放入集合中的值。

**html头：**

```
<head> 
    <title>My Page</title>

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" /> 
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link href="css/TableCSSCode.css" rel="stylesheet" type="text/css" />

    <script>

        $(document).ready(function () {

            $.ajax({
                type: "POST",
                url: "getdata.aspx/return_prof",
                data: "{prof:'צלם'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (res) {

                    var parsedData = JSON.parse(res.d);

                    $("#tableDiv").append('<div id="colapse_div" data-role="collapsible-set"></div>');

                    $("#colapse_div").append('<div id="col1" data-role="collapsible"></div>');

                    $("#col1").append('<h3>צלמים</h3>');
                    $("#col1").append('<p>'+parsedData[0].fName+'<//p>');
                    $("#col1").append('<p>'+parsedData[0].lName+'<//p>');

                },
                error: function (res, msg, code) {
                    // log the error to the console
                    alert("The following error occured: " + msg + " " + code);
                } //error

            });

        });

    </script>

</head> 
```

**html正文：**

```
<body>

    <div id="page3" data-role="page" data-theme="a">

            <div data-role="header" data-theme="a">
                <h1> בדיקה</h1>
            </div> 

            <div data-role="navbar">
                <ul>
                   <li><a href="index.htm">חברי העמותה</a></li>
                    <li><a href="build.htm">בניית צוות</a></li>
                    <li><a href="test.htm"> בדיקה</a></li>
                </ul>
            </div>

            <div data-role="content">
            <div id="tableDiv">

               </div>

               <div>
                    <div data-role="collapsible-set">

                        <div data-role="collapsible" >
                        <h3>Section 1</h3>
                        <p>I'm the collapsible set content for section 1.</p>
                        <p>I'm the collapsible set content for section 1.</p>
                        </div>

                    </div>
               </div>

            </div>

            <div data-role="footer">
                <h1>footer area</h1>
            </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:37:44.807

试试这个：

```
$("#colapse_div").collapsible(); 
```

但它可能会失败，因为 jQM 在设计动态创建的可折叠集时出现问题。

最好的办法是使用好旧的：

```
$('[data-role="content]').trigger('create'); 
```

此行将重新设置添加到 div 内容的所有新内容的样式。您可以更进一步并使用：

```
$('[data-role="content]').trigger('pagecreate'); 
```

此行将重新设置所有新页面内容的样式，包括页脚和页眉。

阅读我的另一篇文章/答案以了解有关增强动态添加内容的标记的更多信息：[**jQuery Mobile：动态添加内容的标记增强**](https://stackoverflow.com/a/14550417/1848600)

工作 jsFiddle 示例：http: **[//jsfiddle.net/Gajotres/ck6uK/](http://jsfiddle.net/Gajotres/ck6uK/)**

# php - 如何使用路由在没有 GET 参数的情况下重定向？

> ID：15788540
> 
> 赞同：4
> 
> 时间：2013-04-03T13:21:55.813
> 
> 标签：php, redirect, symfony, routing, symfony-2.2

我的路由定义如下：

```
# New URLs
article_show:
    pattern:  /article/{id}
    defaults: { _controller: AcmeDemoBundle:Article:show }

# Old URLs
article_show_legacy:
    path:            /article-{id}-{param}.html
    requirements:
        param: foo|bar
    defaults:
        _controller: FrameworkBundle:Redirect:redirect
        route:       article_show
        permanent:   true 
```

我想知道如何在没有参数的情况下重定向`article_show_legacy`到。每当我访问（例如）时，我都会被重定向到. 我想丢弃，所以我被重定向到.`article_show``param``/article-1-foo.html``/article/1?param=foo``?param=foo``/article/1`

我知道我可以创建一条路线`foo`和一条路线，`bar`但就我而言，还有更多案例。

我必须编写自己的重定向控制器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:09:31.160

您必须编写自己的重定向控制器或在任何现有控制器中创建重定向方法。

检查in 的`redirect`操作`RedirectController`以`../vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/RedirectController.php`获取更多详细信息。

一些例子（我添加了第三个选项`stripAttributes`）：

```
public function redirectAction($route, $permanent = false, $stripAttributes = false)
{
    if ('' == $route) {
        return new Response(null, $permanent ? 410 : 404);
    }

    $attributes = array();
    if (!$stripAttributes) {
        $attributes = $this->container->get('request')->attributes->get('_route_params');
        unset($attributes['route'], 
              $attributes['permanent'], 
              $attributes['stripAttributes']);
    }

    return new RedirectResponse($this->container->get('router')->generate($route, $attributes, UrlGeneratorInterface::ABSOLUTE_URL), $permanent ? 301 : 302);
} 
```

# javascript - 从多个来源加载 JQuery

> ID：15788545
> 
> 赞同：0
> 
> 时间：2013-04-03T13:22:07.227
> 
> 标签：javascript, jquery, sharepoint

我正在尝试编写一些小功能，这些功能基本上为 SharePoint 页面增加了便利层。这些“便利层”基本上是包裹在 ScripLink 功能中的 JQuery。例如，我有一个可以使用 JQuery 禁用页面上的所有复杂下拉菜单。我有另一个用更好的日期字段和更好的日期选择器替换所有日期字段。我还有一个摆脱了他们用于时间的那些荒谬的下拉列表，这看起来像是有人在 1995 年写的东西。

我希望所有这些功能都是自包含和独立的。但是我偶然发现了一些问题。

第一个问题是我并不总是知道是否加载了 jquery 或 jquery-ui，即使我检查了它。例如，在第一个功能中，我检查 if (typeof JQuery == 'undefined')，如果我所在的页面包含 JQuery，它会正常工作。如果没有，那也没关系..我添加它。但是，如果我在 scriptlink 中有另一个 jquery 功能，它会在第一个 scriptlink 有机会添加它之前检查是否 (typeof JQuery == 'undefined')。比赛条件！

第二个也是更严重的问题是，我所在的页面有旧版本的 jquery-ui (1.8.12)，据我所知，它不支持我在 Better 中使用的日期选择器日期功能。我在该功能中使用的版本是 1.10.2。但是当功能运行时，看到 jquery.ui 已定义，它没有定义它。这意味着 datepicker 最终是未定义的。

有没有更好的方法在页面上定义和注册 jquery 库，所以我可以在特定站点上混合匹配我想要的任何 JQuery SP 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:32:22.000

克雷格，

您正在寻找的是模块化脚本加载器。您可以尝试[RequiresJs](http://requirejs.org/)或类似的 microsoft ajax 实现，可以在[此处找到](http://www.asp.net/ajaxlibrary/HOW%20TO%20Load%20Required%20Scripts.ashx)。这是 Microsoft Ajax StartJs 的示例

```
<script src="http://ajax.microsoft.com/ajax/beta/0911/Start.js" type="text/javascript">
<script type="text/javascript">

    Sys.require([Sys.scripts.ApplicationServices], function() {
        //应用服务加载
    });
</脚本>

```

使用[RequiresJs](http://requirejs.org/)，您将拥有更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:38:50.163

如果您担心竞争条件，您可以检查未定义的情况，如果 jQuery 没有加载使用`setTimeout`或`setInterval`1000 毫秒并再次测试，那么它应该已经发出请求，但是您可以循环直到您确定 jQuery 不是' t 加载。至于 jQuery UI 的版本，您可以使用它`$.ui.version`来获取您正在使用的库的版本。有了它，您可以检查 jQuery UI 的最低版本，但更好的解决方案是 API 可用性或功能测试，而不是依赖于版本。因此，如果 DatePicker 未定义，只需检查使用情况。

# jquery - 多部分表单不适用于 jquery

> ID：15788548
> 
> 赞同：0
> 
> 时间：2013-04-03T13:22:12.360
> 
> 标签：jquery, multipartform-data, cfml

尝试上传文件时，以下代码在控制台中为我提供了无效的内容类型：

```
$("#mediaupload").unbind('submit').bind('submit', function(event) {
    event.preventDefault();
    $.post('mediauploadprocess.cfm',$("#mediaupload").serialize(),function(data,status) {
        $("#result").empty().html(data)
    });
}); 
```

关于有什么问题的任何想法？

# c# - 将 Silverlight 中的主题应用于整个应用程序

> ID：15788557
> 
> 赞同：0
> 
> 时间：2013-04-03T13:22:33.133
> 
> 标签：c#, silverlight, componentone

我正在尝试将 ComponentOne 主题应用于我的 silverlight 应用程序；但是，我无法让它工作。有人知道我错过了什么吗？

我正在尝试在 App.xaml.cs 下为 application_startup 添加它：

```
Current.Resources.MergedDictionaries.Add(new C1ThemeWhistlerBlue()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:56:08.550

我最终想出了另一种方法来做到这一点。将以下行添加到 app.xaml.cs 中的 Application_startup：

```
new C1ThemeWhistlerBlue().Apply((FrameworkElement)Current.RootVisual); 
```

这将添加主题 Whistler Blue。

要删除主题，您需要清除 Current.Resources.MergedDictionaries（或者只是从中删除该对象）。

# meteor - 如何保护 Meteor 中的集合模式的一部分？

> ID：15788559
> 
> 赞同：1
> 
> 时间：2013-04-03T13:22:37.070
> 
> 标签：meteor

我正在考虑在 Meteor 中构建我的下一个应用程序。除其他外，我的数据模型将包含要传递给客户端的对象，但其内容需要在推送之前动态过滤。

例子：

```
var obj = {
    name: "John",
    secret: "A very shy guy"
} 
```

我希望能够`secret`为“管理员”用户访问服务器和客户端上的属性，但其他用户不应该在他们的客户端上看到。

实现这一点的最佳方法/框架是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:41:41.553

将流星发布功能与您的收藏一起使用，您可以使用排除或包含：

**服务器端 JS**排除：

```
Meteor.publish("mycollection", function () {
    return mycollection.find({}, {fields: {secretInfo: 0}});
}); 
```

**服务器端 JS**包含：

```
Meteor.publish("mycollection", function () {
    return mycollection.find({}, {fields: {name: 1}});
}); 
```

然后在您的客户端上订阅此发布：

**客户端js**

```
Meteor.subscribe("mycollection"); 
```

有关流星文档中发布功能的更多信息：http: [//docs.meteor.com/#meteor_publish](http://docs.meteor.com/#meteor_publish)

还可以查看当事方示例（带截屏视频）： http: [//meteor.com/examples/parties](http://meteor.com/examples/parties)

# cron - Zend 框架 2 cron 动作

> ID：15788562
> 
> 赞同：2
> 
> 时间：2013-04-03T13:22:50.477
> 
> 标签：cron, zend-framework2

我们如何使用普通的 Zend Framework 2 控制器操作（可从浏览器调用）作为 cron 作业？我试图将一个设置为 cron 作业，但没有被调用。

我们需要一个 Rest(ful) 控制器/模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:57:47.047

阅读： http: [//framework.zend.com/manual/2.0/en/modules/zend.console.introduction.html](http://framework.zend.com/manual/2.0/en/modules/zend.console.introduction.html)

这很好地解释了控制台路线，并介绍了设置路线的过程。

我上周才使用它，事实证明它非常有用。可以设置控制台路由，从而限制它们通过 Web 访问。

然后，您可以设置一个 cron 作业来运行：

`php \path\to\site\public\index.php -switch1 param1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:03:06.707

我将我的动作转换为 Rest(ful) 模块动作，并且它起作用了。

参考：

[http://hounddog.github.com/blog/getting-started-with-rest-and-zend-framework-2/](http://hounddog.github.com/blog/getting-started-with-rest-and-zend-framework-2/)

通过我的服务器的 Cpanel 设置的命令：

卷曲[http://myurl.domain](http://myurl.domain)

# iphone - resignFirstResponder 仅在某些情况下成功隐藏键盘

> ID：15788565
> 
> 赞同：0
> 
> 时间：2013-04-03T13:22:56.940
> 
> 标签：iphone, cocoa-touch, keyboard, uitextfield

我`resignFirstResponder`用来隐藏数字键盘，但它只在隐藏键盘的某些时候起作用：我`backgroundTap`用`[textField resignFirstResponder];`背景点击实现了键盘确实是隐藏的。我还在 中添加了这一行`viewWillDisappear`，但它在某些时候有效。当用户回到他来自的窗口时，键盘消失了。但是当他进入一个新窗口（不是他来自的那个）时，键盘并没有消失。我使用方法检查了调试`isFirstResponder`，在这两种情况下，文本字段确实不再是第一响应者（尽管在其中一种情况下，键盘一直显示，如前所述）。

的实现`viewWillDisappear`是这样的：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [textField resignFirstResponder];
    [self.view endEditing:YES];
} 
```

我想在 viewWillDisappear 两种情况下都隐藏键盘，因为新窗口没有与此键盘相关的文本字段。它有完全不同的元素。

推送另一个视图的事件不是单击按钮，而是开始编辑文本字段。我的视图中有三个文本字段，其中只有一个显示键盘。另外两个推动了另一种观点。这是 textFieldDidBeginEditing 的代码：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField{
    if (textField1.editing == YES)
    {
        [self performSegueWithIdentifier:@"goToView1" sender:self];
     }
    else if (textField2.editing == YES)
    {
        [self performSegueWithIdentifier:@"goToView2" sender:self];
    }

} 
```

而生成键盘的文本字段是 textField3。

关于如何在这两种情况下使键盘消失的一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:43:50.003

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
     if (textField == textField1)
     {
         [self.view endEditing:YES]; 
         //else you can try with this also.
         [textField performSelector:@selector(resignFirstResponder)
                withObject:nil
                afterDelay:0];
         //
         [self performSegueWithIdentifier:@"goToView1" sender:self];
         return NO;
     }
     else if (textField == textField2)
     {
         [self.view endEditing:YES];
         [self performSegueWithIdentifier:@"goToView2" sender:self];
         return NO;
     }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:07:09.397

使用此代码检查是否存在任何文本字段并使用它来关闭键盘。根据您的需要进行调整。

```
for (id elem in self.view.subviews) {
    if ([elem isKindOfClass:[UITextField class]]) {
        [(UITextField *)elem resignFirstResponder];
    }
} 
```

# java - 将正长整数值读入数组

> ID：15788568
> 
> 赞同：0
> 
> 时间：2013-04-03T13:22:59.843
> 
> 标签：java, arrays, binary, integer, long-integer

我正在寻找读取.dat 类型的文件。我不知道文件的大小，但我知道内容将采用以下形式

```
111000111
0101
0100
1
0011
110
0010
101
0001
11
0000 
```

目前我所拥有的如下

```
public static void readFile(String fileName) throws FileNotFoundException, IOException
{
    File file = new File(fileName);

    byte[] bytes = new byte[(int) file.length()];
    try (FileInputStream fis = new FileInputStream(file))
    {
        fis.read(bytes);
    }

    String[] value = new String(bytes).split("\\s+");

    numbers = new int[value.length];

    for (int i = 0; i < value.length; i++)
    {
        numbers[i] = Integer.parseInt(value[i]);
    }

    for (int i = 0; i < numbers.length; i++)
    {
        System.out.println(numbers[i]);
    }

} // end of import file 
```

该文件的输出如下所示。如您所见，如果一个数字以 0（或多个）开头，它将被删除。

```
111000111
101
100
1
11
110
10
101
1
11
0 
```

任何帮助表示赞赏。

问候，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:29:18.533

那是因为您将值解析为整数

```
Integer.parseInt(value[i]) 
```

改用这个：

```
String[] values = new String[value.length];

for (int i = 0; i < value.length; i++)
{
    values[i] = value[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:29:31.350

如果前导零有问题，则不应使用 Integer.parseInt

对于这种情况，持有一个字符串数组会更好。

```
numbers = new String[value.length]; 
```

和

```
numbers[i] = value[i]; 
```

如果以后，您想在任何方法中将数组内容用作整数，您可以在那里使用 Integer.parseInt 。

# version-control - 是否有在补丁队列之间移动补丁的命令？

> ID：15788569
> 
> 赞同：5
> 
> 时间：2013-04-03T13:23:03.007
> 
> 标签：version-control, mercurial, dvcs, mercurial-queue

我意识到补丁队列有一个非常简单的实现，你可以手动移动东西，但是有没有命令在两个队列之间移动补丁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-29T16:32:04.110

要手动执行此操作，假设您有两个补丁队列“A”和“B”，并且想要将补丁调用“MyPatch”从“A”移动到“B”：

1.  `.hg/patches-A`在 repo root 中打开目录
2.  将`MyPatch`文件复制到`.hg/patches-B`目录
3.  `.hg/patches-A/series`在文本编辑器中打开并**删除**“MyPatch”行
4.  `.hg/patches-B/series`在文本编辑器中打开并**添加**“MyPatch”行

`series`每个补丁队列目录中的文件包含该补丁队列中所有补丁文件的名称。

通过为`mq`扩展做贡献或创建您自己的扩展或 shell 脚本，这是一个很好的自动化候选者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:18:37.603

不，没有；你必须为自己写一个别名。

# c++ - 从 if 和 if else 传递数据时遇到问题

> ID：15788572
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:23:09.773
> 
> 标签：c++

我正在尝试创建一个简单的井字游戏程序作为一些家庭作业的一部分，但难以检查游戏是否已获胜。一旦我启动程序并输入一个数字，它就会立即显示“玩家 2 获胜！” 我看不出我做错了什么。

```
#include "stdafx.h"
#include "tictactoe.h"

using namespace std;

void clearBoard(char gameBoard[])
{
    for (int i = 0; i < board_size; i++)
    {
        gameBoard[i] = free_char;
    }
}

void printBoard(char gameBoard[])
{
    system("cls");

    //for (int i = 0; i < board_width; i++)
    //{
        //cout << gameBoard[i] + 1 << " " << gameBoard[i] + 1 << " " << gameBoard[i] + 1 << endl;
    //}

    cout << gameBoard[0] << " " << gameBoard[1] << " " << gameBoard[2] << endl;
    cout << gameBoard[3] << " " << gameBoard[4] << " " << gameBoard[5] << endl;
    cout << gameBoard[6] << " " << gameBoard[7] << " " << gameBoard[8] << endl;
}

int askMove(int player)
{
    cout << "Player " << player << ", Select a square [1-9]: ";
    cin >> choice;

    return 0;
}

bool verifyMakeMove(char gameBoard[], int move, int player)
{
    if (player == 1)
    {
        mark = p1_char;
    }
    else
    {
        mark = p2_char;
    }

    if (move < 1 || move > 9)
    {
        cout << "You did not enter a number between 1 and 9\. Try again." << endl;
    }

    if (move == 1 && gameBoard[0] == free_char)
    {
        gameBoard[0] = mark;
    }
    else if (move == 2 && gameBoard[1] == free_char)
    {
        gameBoard[1] = mark;
    }
    else if (move == 3 && gameBoard[2] == free_char)
    {
        gameBoard[2] = mark;
    }
    else if (move == 4 && gameBoard[3] == free_char)
    {
        gameBoard[3] = mark;
    }
    else if (move == 5 && gameBoard[4] == free_char)
    {
        gameBoard[4] = mark;
    }
    else if (move == 6 && gameBoard[5] == free_char)
    {
        gameBoard[5] = mark;
    }
    else if (move == 7 && gameBoard[6] == free_char)
    {
        gameBoard[6] = mark;
    }
    else if (move == 8 && gameBoard[7] == free_char)
    {
        gameBoard[7] = mark;
    }
    else if (move == 9 && gameBoard[8] == free_char)
    {
        gameBoard[8] = mark;
    }
    else
    {
        cout << "That move cannot be made. Try again." << endl;
    }

    return 0;
}

int checkEndGame(char gameBoard[])
{
    if (gameBoard[0] == gameBoard[1] && gameBoard[1] == gameBoard[2])
    {
        return 1;
    }
    else if (gameBoard[3] == gameBoard[4] && gameBoard[4] == gameBoard[5])
    {
        return 1;
    }
    else if (gameBoard[6] == gameBoard[7] && gameBoard[7] == gameBoard[8])
    {
        return 1;
    }
    else if (gameBoard[0] == gameBoard[3] && gameBoard[3] == gameBoard[6])
    {
        return 1;
    }
    else if (gameBoard[1] == gameBoard[4] && gameBoard[4] == gameBoard[7])
    {
        return 1;
    }
    else if (gameBoard[2] == gameBoard[5] && gameBoard[5] == gameBoard[8])
    {
        return 1;
    }
    else if (gameBoard[0] == gameBoard[4] && gameBoard[4] == gameBoard[8])
    {
        return 1;
    }
    else if (gameBoard[2] == gameBoard[4] && gameBoard[4] == gameBoard[6])
    {
        return 1;
    }
    else if (gameBoard[0] != free_char && gameBoard[1] != free_char && gameBoard[2] != free_char && gameBoard[3] != free_char && gameBoard[4] != free_char && gameBoard[5] != free_char && gameBoard[6] != free_char && gameBoard[7] != free_char && gameBoard[8] != free_char)
    {
        return -1;
    }
    else
    {
        return 0;
    }
}

int playGame()
{
    char gameBoard[10];

    int player = 1;

    int winner;

    clearBoard(gameBoard);

    do
    {
    printBoard(gameBoard);

    askMove(player);

    verifyMakeMove(gameBoard, choice, player);

    checkEndGame(gameBoard);

    if (player == 1)
    {
        player = 2;
    }
    else
    {
        player = 1;
    }
    } while (checkEndGame(gameBoard) == 0);

    if (checkEndGame(gameBoard) == 1)
    {
        cout << "Player " << player << " wins!" << endl;
    }
    else
    {
        cout << "It's a draw!" << endl;
    }

    return 0;
}

int main()
{
    playGame();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:30:38.673

游戏开始时，棋盘是空白的。所有九个方格都具有相同的值，因此它们彼此相等。特别是，某行的三个方格都是相等的，所以根据你的逻辑，有人赢了。您需要添加额外的逻辑以避免该结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:32:13.833

明显的问题是，`checkEndGame`当您查找三行时，您并没有检查空方格。测试应该更像

```
if (gameBoard[0] != 0 && gameBoard[0] == gameBoard[1] && gameBoard[1] == gameBoard[2])
    ^^^^^^^^^^^^^^^^^^^^ 
```

可能还有其他问题，您可以通过使用调试器单步执行代码来找到这些问题。

# java - Java字节/字节数组空间效率比较

> ID：15788575
> 
> 赞同：6
> 
> 时间：2013-04-03T13:23:17.833
> 
> 标签：java, generics, space-efficiency

我需要为大量 8 位值创建一个节省空间的二维数组。我开始使用几层抽象和泛型来编写我的类，以允许代码重用。一旦我开始实现具体类，我就想到我不能将原始类型作为泛型类参数传递，我将不得不使用包装类。因为我关心空间效率，所以我需要知道：*使用包装类的数组与原始**数组相比，**空间效率有什么区别* ？`Byte` *`byte`*

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:28:31.670

是的，与相应的 Wrapper 类对象相比，原语是轻量级的。

你可以在这里阅读： [Primitives vs Wrappers](http://www.glenmccl.com/perfj_006.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T13:46:46.040

根据[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

字节 [] 大小 ~= 12 + 长度

Byte[] 大小 ~= 12 + 20 * 长度（20 = 16 + 4 1 字节对象的大小 + 4 字节引用）

因此，Byte[] 占用的内存可能是 byte[] 的 20 倍。它实际上是最大值，这取决于您创建字节的方式。new Byte 始终是一个新对象，Byte.valueOf 始终是一个缓存实例。它还取决于 CPU，对于 x64，每个引用占用 8 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:35:47.210

观看另一个问题： [arraylist 与数组中原始类型的包装器](https://stackoverflow.com/questions/4557704/wrappers-of-primitive-types-in-arraylist-vs-arrays)

> double 与 Double 的最大问题是后者增加了一些内存开销——在 Sun 32 位 JVM 上每个对象 8 个字节，在其他 JVM 上可能或多或少。然后您需要另外 4 个字节（在 64 位 JVM 上为 8 个字节）来引用该对象。
> 
> 因此，假设您有 1,000,000 个对象，则差异如下：
> 
> > 双[1000000]
> 
> 每个条目 8 个字节；总计 = 8,000,000 字节
> 
> > 双[1000000]
> 
> 每个对象实例 16 个字节 + 每个引用 4 个字节；总计 = 20,000,000 字节
> 
> 这是否重要取决于您的应用程序。除非您发现自己的内存不足，否则请假设这无关紧要。**

# java - MapGuide 开源：通过 java/jsp 操作 SDF 数据？

> ID：15788580
> 
> 赞同：0
> 
> 时间：2013-04-03T13:23:31.193
> 
> 标签：java, jsp, sdf, mapguide

我对 MapGuide 开源技术比较陌生。我想解析和修改 SDF 格式的数据，以便我的地图（动态）显示此更新的要素数据。我该怎么做？我在 Linux 上安装并配置了 MapGuide。我浏览了 MapGuide Web API 文档，但没有关于如何操作 SDF 数据的示例。目前，我通过使用脚本查询空间数据库和查询生成 SHP 文件，在不同的环境（在 Windows 操作系统域中）生成 SDF 数据。然后，我将这些 SHP 文件转换为 SDF 文件（使用脚本），然后将它们传输到 Linux OS 环境中的 MapGuide 服务器存储库。在 Windows 操作系统端，我可以编辑 SHP 文件（特别是仅使用电子表格的 dbf 文件）以更改特定功能源的值。然而这个过程是静态的，所以我希望能够通过为 Linux 域中的特定功能源解析 SDF 文件以编程方式（使用 java / jsp）这样做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:33:05.347

Okay.. from what i have learnt elsewhere...The SDF data cannot be edited directly using the Java Web API, instead Mapguide uses FDO which is an abstraction layer for accessing spatial data using a common api. [FDO on MapGuide Open Source](http://fdo.osgeo.org/) Hope this helps anyone with a similar question to my original question.

# java - Netbeans GUI 使用 if 语句添加按钮

> ID：15788581
> 
> 赞同：1
> 
> 时间：2013-04-03T13:23:31.637
> 
> 标签：java, swing, button, netbeans

我正在使用 Netbeans GUI 创建器创建 Java GUI。

而且我想使用 if 语句向面板添加按钮，我以前做过很多次，但没有使用 Netbeans。

```
for (int i = 0; i < list.length; i++){
                          if (something){
                              String files = something.getName();
                              JButton btn = new JButton(files);
                              panel.add(btn);
                              panel.validate(); 
```

这是我不使用 Netbeans GUI maker 时有效的 if 语句。但是现在什么都没有显示，也没有出现错误。

这就是面板的创建方式

```
public final javax.swing.JPanel panel = new javax.swing.JPanel();

       javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(panel);
    panel.setLayout(panelLayout);
    panelLayout.setHorizontalGroup(
        panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    panelLayout.setVerticalGroup(
        panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    ); 
```

有人有想法么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:42:56.657

`GroupLayout`要求使用正确的水平和垂直组添加任何新按钮/组合。或者，您可以使用不同的布局管理器，它不需要对新添加的组件设置任何约束。这些包括`FlowLayout`和`GridLayout`。

# c++ - 为什么 _WINDLL 预处理器定义会影响与 64 位 DLL 注册的兼容性

> ID：15788582
> 
> 赞同：3
> 
> 时间：2013-04-03T13:23:32.397
> 
> 标签：c++, windows, visual-studio, dll, 64-bit

[这个问题是我上一个问题](https://superuser.com/questions/573432/32-bit-dll-registers-on-install-win7-64-bit-but-not-regsvr32)的延伸。

在与创建 .DLL 的其他项目进行了超越比较之后，我能够弄清楚如何构建我的 .DLL——通过删除 VC++ 6 项目中的 _WINDLL 预处理器定义——以便在 64 位机器上注册. 我正在寻找为什么会发生这种情况的解释。

在 Visual Studio 中，一旦我转到项目属性 > C/C++ > 预处理器定义，并删除 _WINDLL，然后构建项目，我就可以在 Windows 64 位计算机上注册 .DLL。如果包含定义，则在尝试在 64 位计算机上注册时出现“此模块无法加载”错误。

那么，有人可以告诉我导致这个问题的原因是什么吗？我在这里环顾四周，但没有任何东西让我得出结论。最后，我的 .DLL 似乎工作正常，但我可以肯定地说我的应用程序不会受到排除定义的影响吗？

# formatting - 如何使用 UITextField 并将其转换为双精度值？

> ID：15788590
> 
> 赞同：0
> 
> 时间：2013-04-03T13:23:55.073
> 
> 标签：formatting, uitextfield

我是 Objective C 的新手，并通过一本书自学。我有一些`UITextFields`用户应该在其中输入一些数字。这些数字可用于计算各种物体的体积。问题是，如果我想使用`UITextField`XCode 总是会给我一个警告：

> `UITextField *__weak`指向传递给类型参数的整数转换的不兼容指针`int`

所以我查找了如何将字符串转换为数字。我尝试`NSNumberFormatter`并通过使用将其更改为数字

```
NSNumber *myNumber = [NSString stringWithFormat:@"f", Width]; 
```

该变量`Width`是稍后在计算器类中定义的变量。警告信息仍然与前一个类似。我现在搜索了很长时间，所以我只是在这里问。

我怎样才能使用提供的数据`UITextField`？

在此先感谢您的帮助！如果需要，我可以上传更多我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:34:17.853

好的，我解决了这个问题 :) 解决方案非常简单。我刚用过：

双 QWidthDouble = [_widthTextField.text doubleValue];

计算器.QWidth = QWidthDouble;

现在我的类变量 QWidth 从文本字段中得到一个双精度值。我希望我的问题可以帮助某人:)

# python - 是否可以即时升级 Python 包？

> ID：15788591
> 
> 赞同：6
> 
> 时间：2013-04-03T13:23:56.107
> 
> 标签：python, installation, automatic-updates

我维护了一个内部 Python 包，公司中的一些非技术人员使用该包。由于他们的需求（或者更确切地说，他们的需求）几乎每天都在变化，因此我必须经常更新库，并且我会根据他们的喜好经常为他们创建新的安装程序。

该库提供对自定义内部数据库的高级访问。此时，我知道我可以将 lib 版本与查询请求一起发送，并向用户显示一条消息，其结果是他们需要安装更新。

然而，由于这些人似乎认为点击一个 .exe 文件并点击安装程序上的“下一步”按钮花费的时间太长，因此我被要求查看是否有自动更新的方法当他们执行“import X”调用时的库。

我从来没有遇到过这种请求，我想如果可能的话，大多数流行的图书馆都会提供这个选项。但我以前错了，而且经常错。有没有人成功地做到过这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:18:19.480

如果这只是一个评论，我很抱歉。
但我认为有几个选择。而且我必须同意 Cartroo，一个 reload() 函数可能就足够了。

[在这个（迷人的 Python：动态重新加载）](http://www.ibm.com/developerworks/linux/library/l-py-fly/index.html)网站上有一篇很棒的文章。我不完全确定这是否正是您要寻找的，但文章中的示例似乎非常符合您的需求。

> 让我们为本文画一个场景：假设您想在本地机器上运行一个进程，但您的程序逻辑的一部分存在于其他地方。具体来说，让我们假设这个程序逻辑会不时更新，并且当您运行您的流程时，您希望使用最新的程序逻辑。有许多方法可以解决刚刚描述的要求；本文将向您介绍其中的几个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:17:11.110

让“import X”调用在包装库中运行代码。导入时的代码将检查数据库中是否有新版本的库，如果有更改则下载。然后它可以依次导入下载的库或导入现有的库。冻结代码可能存在此问题，因此您可能必须显式评估新模块。

**编辑：** 这不一定需要在另一个模块中完成。它可能只是一个函数调用。

# vba - VBA SumIfs 不适用于日期范围

> ID：15788592
> 
> 赞同：1
> 
> 时间：2013-04-03T13:24:00.380
> 
> 标签：vba, excel

所以，我尝试了很多变化，但我无法做到这一点：

```
var_sum = WorksheetFunction.SumIfs(Range("H:H"), Range("B:B"), str_client, Range("A:A"), "<=" & date_var) 
```

这个公式有两个条件。第二个（日期比较）打破它并使总和 = 0。 date_var 是一个 Date 变量。Excel 中的日期范围被格式化为日期。

有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T14:47:09.807

我有一种感觉，你有一个日期字符串。

```
Date_Var = "01/01/2013" 
```

您可以尝试使用`CDate(`或`CLng(`将其转换为适当的值，因为 Excel 将日期存储为 1900 年 1 月 1 日之后的天数

```
var_sum = WorksheetFunction.SumIfs(Range("H:H"), Range("B:B"), str_client, _
    Range("A:A"), "<=" & CLng(date_var)) 
```

# sms - Twilio 通过 Google Apps 脚本发送和接收 SMS

> ID：15788594
> 
> 赞同：3
> 
> 时间：2013-04-03T13:24:11.867
> 
> 标签：sms, google-apps-script, twilio

我正在尝试通过 Google Apps 脚本 (GAS) 发送和接收短信。GAS 不提供对发送短信或检查 Google Voice 的原生支持，因此我一直在考虑与第三方 API 集成 - 在本例中为 Twilio。

我一直在与 Twilio 的技术支持人员取得联系，但他们还不能回答这个问题。我也进行了广泛的研究，并没有找到与 Twilio 成功合作的有效 GAS 示例。

我按照[https://developers.google.com/live/shows/11404657/](https://developers.google.com/live/shows/11404657/)上的教程进行操作。然后从 Google Apps 脚本团队复制了一个与教程中的代码平行的无效代码示例：[https](https://github.com/entaq/GoogleAppsScript/blob/master/Twilio/RecieveSMS/RecieveSMS.gs) ://github.com/entaq/GoogleAppsScript/blob/master/Twilio/RecieveSMS/RecieveSMS.gs -

我的代码复制如下：

最后第二个命令 appendrow() 工作正常，这意味着 GAS 正确地从 Twilio API 获取。但是，最后一个命令 createTextOutput() 不起作用，这表明 GAS 无法以正确的格式 POST 到 Twilio……对吧？

```
function doGet(args) {
var spreadsheetID = "<< your spreadsheet ID >>";

var vote = args.parameter.Body;
var from = args.parameter.From;

var actualVote;
switch (vote.toLowerCase()) {
 case "a":
    actualVote = 'Giants';
    break;
 case "b":
    actualVote = 'Jets';
    break;
 default:
    actualVote = 'Dont care';
}

SpreadsheetApp.openById(spreadsheetID).appendRow([from,actualVote,vote]);

return ContentService.createTextOutput(LanguageApp.translate(args.parameter.Body, "en", "es")).setMimeType(ContentService.MimeType.TEXT);
}; 
```

我很乐意使用解决方法（例如电子邮件到 SMS），但我必须同时发送和接收 SMS，而且我不想转移到另一个编程平台，因为我们已经花了 4 个月的时间来开发我们的内部操作软件通过 Google Apps Script 传输，因此传输将非常繁重。

请注意，这不是“分块”XML 响应的问题 - 正如在此线程中发现的那样：使用[Google Apps 脚本连接 Twilio](https://stackoverflow.com/questions/15438334/connect-twilio-wtih-google-apps-script) - Twilio 技术团队昨天告诉我，他们最近升级了服务器以接受分块响应。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T06:52:21.177

好的，所以 Twilio 技术人员 Alex Chan 给出了答案！

事实证明，正如 Arun 所说，这是获取和发布 SMS 的不同方法。用 Alex Chan 的话来说：

“使用 Twilio 发送 SMS 消息是不同的。您必须调用 Twilio 的 REST API，而不是实现“doGet”方法。此处记录了用于发送 SMS 消息的 REST API 操作：

[http://www.twilio.com/docs/api/rest/sending-sms](http://www.twilio.com/docs/api/rest/sending-sms) "

我现在正在使用下面的变体，它运行良好：

```
function sendSms() {
  // Get account SID and auth token here:
  //   https://www.twilio.com/user/account
  var accountSid = "AC...";
  var authToken = "...";
  var url = "https://api.twilio.com/2010-04-01/Accounts/" + accountSid + "/SMS/Messages.json";
  var options = {
    method: "post",
    headers: {
      Authorization: "Basic " + Utilities.base64Encode(accountSid + ":" + authToken)
    },
    payload: {
      // From is one of your Twilio phone numbers
      From: "+12025551212",
      To: "+14155551212",
      Body: "Test from Google Apps Script"
    }
  };
  var response = UrlFetchApp.fetch(url, options);
  Logger.log(response);
} 
```

Arun，感谢您的帮助并在 gitHub 上发布原始代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:48:34.613

不清楚问题是什么 - 您是尝试通过 Twilio 发送消息还是接收消息？它们是两个非常不同的代码路径。发送要容易得多。将消息接收到 Apps 脚本需要您将脚本部署为 Web 应用程序，然后将其作为 POST 返回 URL 包含在 Twilio 控制台中。

![在此处输入图像描述](https://i.stack.imgur.com/dAvHQ.png)

还要确保您的[Web 应用程序部署](https://developers.google.com/apps-script/execution_web_apps)为与您一样运行并且可以匿名访问。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-01T10:20:33.423

我已经为 Google Apps 脚本编写了一个围绕 twilio nodejs 库的包装器，您可以在 github 上查看它：[https ://github.com/illiatdesdindes/twilio-gas](https://github.com/illiatdesdindes/twilio-gas)

这是发送短信的示例：

```
var account_sid = 'ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
var auth_token = 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy';

var client = new twiliogas.RestClient(account_sid, auth_token);

client.sendSms({
    to:'+16515556677',           // Any number Twilio can deliver to
    from: '+14506667788',        // A number you bought from Twilio and can use for outbound communication
    body: 'word to your mother.' // body of the SMS message
}); 
```

# shell - 想要将文件移动到 Shell Script 中的文件夹，但这样做时会附加一个版本号

> ID：15788595
> 
> 赞同：0
> 
> 时间：2013-04-03T13:24:13.827
> 
> 标签：shell, append, version, mv

该脚本将移动文件（在 中`RecycleBin`），但我希望将版本号附加到它。版本号包括：当前月、日、年、时、分、秒：

所以文件应该是这样的：

`file.081213.191134`- 文件在 2013 年 8 月 12 日 19:11:34 被删除的地方。

不确定我应该使用哪种结构？

想让它尽可能简单

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:28:29.670

你可以试试这个：

```
mv $file /path/to/RecycleBin/$file.`date +"%Y%m%d.%H%M%S"` 
```

如命令`date`所示：

```
$ date +"%Y%m%d.%H%M%S"
20130403.152826 
```

# android - Android 操作栏永远不会在 5.1" 屏幕上拆分

> ID：15788602
> 
> 赞同：4
> 
> 时间：2013-04-03T13:24:24.170
> 
> 标签：android, android-actionbar

在示例应用程序中，我使用多个项目（带有 ）填充操作栏，并在清单文件中的应用程序上`android:showAsAction="always"`启用。`android:uiOptions="splitActionBarWhenNarrow"`

在 3.7 英寸的虚拟设备上，即使只有一个项目，操作栏也会分开。

在 5.1" 虚拟设备（与 XPeria Z 相同）上，无论项目数量如何，操作栏都**不会**拆分，这会导致标题在某些时候完全隐藏。

![在此处输入图像描述](https://i.stack.imgur.com/zU8uF.png) ![在此处输入图像描述](https://i.stack.imgur.com/IPFLN.png)

为什么 ？在大于 5 英寸的屏幕上，操作栏是否根本不可拆分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:42:54.910

> 为什么 ？

要求是`splitActionBarWhenNarrow`，并且纵向 5.1" 显然不被认为是窄的。由于这是进入`-large`屏幕尺寸桶，这并不奇怪。

# ios - 单击按钮问题发送电子邮件

> ID：15788603
> 
> 赞同：-2
> 
> 时间：2013-04-03T13:24:25.447
> 
> 标签：ios

我正在使用以下代码发送电子邮件

```
- (IBAction)email:(id)sender {
    if ([MFMailComposeViewController canSendMail]) {

        MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
        mailViewController.mailComposeDelegate = self;
        [mailViewController setSubject:@"Subject Goes Here."];
        [mailViewController setMessageBody:@"Your message goes here." isHTML:NO];

        [self presentModalViewController:mailViewController animated:YES];
        [mailViewController release];
    } else {
        NSLog(@"Device is unable to send email in its current state.");
    }
} 
```

我做错了什么你能告诉我吗

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:26:59.490

你进口了这个吗？

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h> 
```

使用了这种委托方式？

```
MFMailComposeViewControllerDelegate 
```

它很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T12:50:11.053

在`.h`文件中：

```
#import <MessageUI/MessageUI.h> 
```

并使用`MFMailComposeViewControllerDelegate`委托

在`.m`文件中：

```
// Method :

-(void)sendMailto:(NSString*)to WithSubject:(NSString*)subject withBody:(NSString*)body
{
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;
        [mailer setSubject:subject];

        NSArray *toRecipients = [NSArray arrayWithObjects:to, nil];
        [mailer setToRecipients:toRecipients];

        NSString *emailBody = body;
        [mailer setMessageBody:emailBody isHTML:NO];

        [self presentModalViewController:mailer animated:YES];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Fail !" message:@"Please configure your Mail application of device with your email id" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled");
            activityView.hidden = YES;
            break;

        case MFMailComposeResultSaved:
            NSLog(@"Mail saved");
            activityView.hidden = YES;
            break;

        case MFMailComposeResultSent:
            NSLog(@"Mail sent");
            activityView.hidden = YES;
            UIStoryboard * myStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
            CustomerAccountViewController *custAcnt = [myStoryboard instantiateViewControllerWithIdentifier:@"customerAcnt"];
            custAcnt.btnID = 1;
            [self.navigationController pushViewController:custAcnt animated:YES];
            break;

        case MFMailComposeResultFailed:
            NSLog(@"Mail failed");
            activityView.hidden = YES;
            break;

        default:
            NSLog(@"Mail not sent");
            activityView.hidden = YES;
            break;
    }
    [self dismissModalViewControllerAnimated:YES];
}

// Call On Button Click 

- (IBAction)btnProceedClicked:(id)sender
{
    [self sendMailto:@"abc@gmail.com" WithSubject:@"Email Subject" withBody:@"Your Mail Body"];
} 
```

# wpf - WPF 水平滚动内容

> ID：15788616
> 
> 赞同：0
> 
> 时间：2013-04-03T13:25:07.593
> 
> 标签：wpf, panel, horizontal-scrolling

我需要创建一个面板，从左到右布局一些元素。元素很多，所以需要滚动条。我可以使用 StackPanel+ScrollViewer，但 ScrollViewer 内的 ScrollContentPresenter 会在顶部和底部剪辑我的元素。在面板的顶部和底部边框附近没有剪裁对我来说很重要。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:00:18.130

使用装饰层解决。谢谢大家。

# javascript - HTML文本输入选择焦点上的所有内容在chrome中不起作用

> ID：15788617
> 
> 赞同：2
> 
> 时间：2013-04-03T13:25:09.313
> 
> 标签：javascript, jquery, html, focus

我在一个表格单元格中有一堆文本输入，如下所示：

```
<td class="tdTextInput">
    <input type="text" value="0" name="txt1_9_4_2" id="txt1_9_4_2" class="input-supermini">
</td> 
```

每当用户单击单元格或输入时，它必须自动选择输入内的所有内容（有点像电子表格编辑器）。

所以这是迄今为止仅在可信赖的旧 Firefox 中成功实现的脚本。

```
 //focus the textbox on td click
    $('.tdTextInput').mousedown(function ()
    {
        $(this).find('input').first().focus();
    });

    //select all text on focus
    $('.tdTextInput input').focus(function ()
    {
        //the data-selected attribute is used to prevent the 
        // autoselection to happen more than once per cell so that
        // two consecutive  clicks will allow the user to pinpoint the
        // cursor to a specific position
        var isSelected = $(this).attr('data-selected') == 'true';
        if (!isSelected) {
            $('input[data-selected]').removeAttr('data-selected');
            $(this).attr('data-selected', 'true');
            $(this).select();
        }
    });

    //prevent non-numeric values from being added
    $('.tdTextInput input').keydown(function (e)
    {
        CommonTools.IsNumeric(e);
    }); 
```

`CommonTools.IsNumeric`指的是以下内容*：-（可能不相关，因为 keydown 功能不是问题。仅将其添加到问题中以确保完整性）*

```
isNumeric = function (e)
{
    if(!(e.which>=48 && e.which<=57)) //numeric values only
            e.preventDefault();
} 
```

为什么这只适用于 FF 和 IE 而不是 Chrome？

**更新：** 我在这里创建了一个小提琴：http: [//jsfiddle.net/dDc73/](http://jsfiddle.net/dDc73/)，但是它甚至在小提琴中的 FF 或 IE 中也不起作用。

更多信息：当我单击单元格时，它会选择所有文本，直到我释放鼠标单击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:36:49.500

Refrence： [使用 jQuery 选择焦点上的文本在 Safari 和 Chrome 中不起作用](https://stackoverflow.com/questions/1269722/selecting-text-on-focus-using-jquery-not-working-in-safari-and-chrome)

```
$(".tdTextInput input").mouseup(function(e){
    e.preventDefault();
}); 
```

这也可能有帮助：

[使用 jQuery 选择焦点上的所有文本](https://stackoverflow.com/questions/6124394/select-all-text-on-focus-using-jquery)

```
$(".tdTextInput input").live('mouseup', function () {
        $(this).select();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T09:33:46.013

让“名字”输入字段在页面加载时自动获得焦点：

```
<form action="demo_form.asp">
  First name:<input type="text" name="fname" autofocus><br>
  Last name: <input type="text" name="lname"><br>
  <input type="submit">
</form> 
```

# java - 如何使我在活动中创建的后退按钮将 textView 中的文本更改为随机生成器创建的上一个文本？

> ID：15788618
> 
> 赞同：0
> 
> 时间：2013-04-03T13:25:17.280
> 
> 标签：java, android, button, random

当我在手机上启动活动时，它说应用程序没有响应。问题是后退按钮，我似乎无法对其进行编程以使其从 textView 收集以前的文本。

活动的 XML 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Author" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:background="@drawable/button_shape"
    android:text="@string/Getstarted"
    android:textColor="#FFFFFF"
    android:textSize="23sp" />

<ImageButton
    android:id="@+id/next"
    android:layout_width="90dp"
    android:layout_height="50dp"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="14dp"
    android:background="@drawable/button_shape"
    android:contentDescription="@string/Next"
    android:onClick="NextQuote"
    android:src="@drawable/navigationnextitem" />

<ImageButton
    android:id="@+id/share"
    android:layout_width="90dp"
    android:layout_height="50dp"
    android:layout_alignTop="@+id/next"
    android:layout_centerHorizontal="true"
    android:background="@drawable/button_shape"
    android:contentDescription="@string/share"
    android:onClick="Sharing"
    android:src="@drawable/socialshare" />

    <ImageButton
        android:id="@+id/back"
        android:layout_width="90dp"
        android:layout_height="50dp"
        android:layout_alignLeft="@+id/textView1"
        android:layout_alignTop="@+id/next"
        android:background="@drawable/button_shape"
        android:contentDescription="@string/Back"
        android:onClick="PreviousQuote"
        android:src="@drawable/navigationpreviousitem" />

</RelativeLayout> 
```

活动的 Java 代码

```
package com.android.motivateme3;

import java.util.Random;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;
import android.support.v4.app.NavUtils;
import android.annotation.TargetApi;
import android.content.Intent;
import android.os.Build;

public class Author extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_author);
        // Show the Up button in the action bar.
        setupActionBar();
    }

    /**
     * Set up the {@link android.app.ActionBar}, if the API is available.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true);

             Button NextQuote = (Button)findViewById(R.id.next);
                final TextView display = (TextView) findViewById(R.id.textView1);
                NextQuote.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                         Random numGen = new Random();
                        int rNumber = numGen.nextInt(10);
                    if (rNumber  == 0)
                    {   
                        display.setText(R.string.Author1);
                    }
                    else if (rNumber  == 1)
                    {   
                        display.setText(R.string.Author2);
                    }
                    else if (rNumber  == 2)
                    { 
                        display.setText(R.string.Author3);
                    }
                    else if (rNumber  == 3)
                    {
                        display.setText(R.string.Author4);
                    }
                    else if (rNumber  == 4)
                    {
                        display.setText(R.string.Author5);
                    }
                    else if (rNumber  == 5)
                    {
                        display.setText(R.string.Author6);
                    }
                    else if (rNumber  == 6)
                    {
                        display.setText(R.string.Author7);
                    }
                    else if (rNumber  == 7)
                    {
                        display.setText(R.string.Author8);
                    }
                    else if (rNumber  == 8)
                    {
                        display.setText(R.string.Author9);
                    }
                    else if (rNumber  == 9)
                    {
                        display.setText(R.string.Author10);
                    }       }
                });
                        }

                    ImageButton Sharing = (ImageButton)findViewById(R.id.share);
                    Sharing.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v){

                        TextView text = (TextView)findViewById(R.id.textView1);
                        String quote = text.getText().toString();{
                        Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
                        shareIntent.setType("plain/text");
                        shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "This is a great quote (from the Motivate Me! app)");
                        shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, quote);
                        startActivity(Intent.createChooser(shareIntent, "Share via:"));}}});

                        Button BackQuote = (Button)findViewById(R.id.back);
                        final TextView display = (TextView) findViewById(R.id.textView1);
                        BackQuote.setOnClickListener(new View.OnClickListener() {
                            public void onClick(View v) {
                                String prev = (String) display.getText();
                                display.setText(prev);
                            }
                    });}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.author, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

这是堆栈跟踪

```
04-03 14:29:34.174: E/AndroidRuntime(17383):    at android.app.ActivityThread.main(ActivityThread.java:4441)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at java.lang.reflect.Method.invokeNative(Native Method)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at java.lang.reflect.Method.invoke(Method.java:511)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at dalvik.system.NativeStart.main(Native Method)
04-03 14:29:34.174: E/AndroidRuntime(17383): Caused by: java.lang.ClassCastException: android.widget.ImageButton cannot be cast to android.widget.Button
04-03 14:29:34.174: E/AndroidRuntime(17383):    at com.android.motivateme3.Author.setupActionBar(Author.java:36)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at com.android.motivateme3.Author.onCreate(Author.java:25)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at android.app.Activity.performCreate(Activity.java:4465)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-03 14:29:34.174: E/AndroidRuntime(17383):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
04-03 14:29:34.174: E/AndroidRuntime(17383):    ... 11 more
04-03 14:29:41.664: I/Process(17383): Sending signal. PID: 17383 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:30:40.463

在我看来， R.id.next 指的是`ImageButton`a ，它不能转换成 a `Button`，因为它不是 a 的子类`Button`

你碰巧看到 ClassCastException 吗？

要解决该特定问题，请替换：

```
Button NextQuote = (Button)findViewById(R.id.next); 
```

和

```
ImageButton NextQuote = (ImageButton)findViewById(R.id.next); 
```

# html - 带阴影的两行文本背景

> ID：15788619
> 
> 赞同：6
> 
> 时间：2013-04-03T13:25:18.753
> 
> 标签：html, css

这就是我想要实现的目标：

![在此处输入图像描述](https://i.stack.imgur.com/S1fMa.png)

但是我不能让背景和文本一样长，同时保持整个内容的阴影......我只是得到这个：

![在此处输入图像描述](https://i.stack.imgur.com/2I6E1.png)

如您所见，它产生了两个阴影……这是我的标记和 css：

```
<span class="interior_title">Samsung, HP Pop-Tops Do Double Duty <br>Rich Jaroslovsky</span>

span.interior_title{
    background: #c7c7c9;
    font-size: 50px;
    color: #2f2f31;
    width: 550px;
    font-family: 'chaletcomprime';
    margin: 0 auto;
    text-transform: uppercase;
    line-height: 47px;
    padding: 0px 15px;
    margin-left: 90px;
    -moz-box-shadow: 0 0 7px #000;
    -webkit-box-shadow: 0 0 7px #000;
    box-shadow: 0 0 7px #000;
} 
```

关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:37:19.257

[**例子**](http://jsfiddle.net/g3Ttm/16/)

它接近你想要的。我是这样弄的。两个元素漂浮在另一个元素下方。相同的样式只是宽度不同。

```
<span class="one">Extra line here bal bal bal </span>
<span class="two">Line TwoM<span> 
```

现在这里的问题是投射的额外阴影`.two`，我通过使用解决了这个问题

```
.two:before{
    background: tan;
    content: "";
    height: 10px;
    left: 0;
    position: absolute;
    top: -10px;
    width: 100%; } 
```

不要担心 IE，因为`:before`在 IE8 上工作，因为`box-shadow`它在 IE9 上停止。

# android - 具有 14 个离散字段的数据库 - 结构（SQLite android）

> ID：15788622
> 
> 赞同：0
> 
> 时间：2013-04-03T13:25:24.423
> 
> 标签：android, sqlite, schema, normalization, rdbms

我不确定如何为我有 14 个字段的表单构建数据库，每个字段中有 5 个可能的固定答案。运行时记录数通常在 30 - 200 条记录之间变化。然而，任何超过 100 条记录都是不常见的。可以得到偶尔的400条记录表。

通常会重复给定的条目组合，或者一系列记录将具有 -most- 共同的值，但是无法预测其中哪些可能会在记录插入之间发生变化。

我想避免大量重复，但尽可能保持良好的搜索效率。以下是我提出的模式。

**架构 1：** 1 个大型 14 字段表。对于小型数据集（<30）可能没问题，但是 200？在安卓上？

**模式 2：**一些规范化尝试：分解成 14 - 2 个带有外键的表。除了反复试验，不知道如何确定最佳数量。

**模式 3：**更详细但不难理解。

2张桌子。表 1 有 14 个字段，其中一个主键对应 14 个条目的给定组合。然后，表 2 使用外键根据与表 1 中的组合对应的 FK 记录记录。新组合在运行时出现时填充到表 1 中。

然后使用地图检查输入的记录是否对应于现有组合（也即时生成）。映射键只是字段中离散值的总和* - 有没有更好的方法来生成映射键？我想不出任何方法可以廉价地生成唯一密钥。然后我必须使用条件来区分具有相似总和的组合（`if`匹配组合是 13 秒吗？）

*每个字段中的每个状态都对应一个数值。

这个模式（3）是否可能在我规定的范围内很好地扩展，还是一个坏主意/矫枉过正/完全不合适？

有没有更好的方法来解决这个问题？

这是我第一次使用 RDBMS，非常感谢您提供的任何帮助。

编辑：还忘了提到这是一个更大的数据库的一部分，总共有 32 个字段，一些离散的和一些字符串，它们更容易预测或以其他方式处理的变化......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:28:58.953

我的直觉是，在您达到数千/数万条记录之前，您无需担心记录的数量会很大。实际上，您可以将具有 400 条记录的数据库视为 400 行文本文件。Android 可以轻松地将巨大的 xml/json 文件解析成 10 到 10 万行长。30 到 400 条记录对于 Android 来说应该是完全可以接受的。

如果我正确理解架构 3，您计划保留 5^14 个预配置状态，然后让主表中的条目引用选择可能性表中的给定状态配置？这听起来像是矫枉过正，因为 5^14 = 6103515625（当然这是最坏的情况）。如果存在大量重复状态，您将 [可能] 通过选择模式 3 显着减少内存使用量，但听起来这是不必要的早期优化。

一般来说，首先规划一个运行良好的系统，然后在必要时进行重构。不要试图从一开始就编写最详尽、最详尽的方案（数据库或编码，无所谓）。

使用最简单的模式可能是最有效的：**模式 1**。如果您到了记录计数成为问题的地步，请稍后重构为**schema 3**之类的内容。

或者，找到一种方法将这些位打包。5 个选项，14 个状态，2^3 包含 8 个状态，3 * 14 = 42 位。您可以在所有选择进入时生成一棵树，并以 3 位阶段遍历它。该树当然不适合内存，因此您需要将其分解并找到某种方法对其进行序列化..

# php - 如何使用循环外的数组查询数据库

> ID：15788623
> 
> 赞同：-2
> 
> 时间：2013-04-03T13:25:26.520
> 
> 标签：php, mysql, implode

喂。我试图不将 SQL 查询放在循环中，因为这可以提高性能。我想我应该使用内爆。但不知道该怎么做。这是我的代码：

```
<?php 

//FUNCTION CONNECTNG TO DB HERE

function turn_result_to_array($result)
{
   $result_array = array();

   for ($count=0;  $row = mysql_fetch_array($result); $count++)
   {
      $result_array[$count] = $row;
   }
   return $result_array;
}

function get_sender_username()
{
   //connect to DB 

   $query = sprintf("SELECT DISTINCT sender FROM direct_messages
                                    WHERE receiver_username='%s'
                        ORDER BY direct_messages.id DESC", 
                   mysql_real_escape_string($_COOKIE['username']));

   $result = mysql_query($query);

   $result = turn_result_to_array($result);

   return $result;

}

$senders = get_sender_username(); 

foreach($senders as $sender)
{ //SELECT IMAGE(S) FROM USER TABLE WHERE USERNAME = $SENDERS } 
```

我不想将查询放在 FOREACH 中，而是将其放在后面，所以我不会多次往返数据库。仅供参考，我已经知道我们应该切换到 PDO。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:32:36.697

这是一种方法：

```
$senderInString = implode("','",$senders);
$senderInString = "('$senderInString')";
$newQuery = "SELECT something FROM tables WHERE sender in $senderInString;"
$newResult = mysql_query($newQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:34:19.650

利用

```
 $query= "SELECT IMAGE(S) FROM USER TABLE WHERE USERNAME  IN (".implode(',',$senders).")";
      $result = mysql_query($query); 
```

代替 foreach

# sql-server - 在 SQL Server 2012 上还原 SQL Server 2000 备份

> ID：15788624
> 
> 赞同：32
> 
> 时间：2013-04-03T13:25:36.947
> 
> 标签：sql-server, sql-server-2000, sql-server-2012

将备份从 SQL Server 2000 恢复到最新版本时，我收到以下错误消息。我不知道旧版本，现在我使用的是 SQL Server 2012 (11.0.3128.0)。

错误信息是：

> 消息 3169，级别 16，状态 1，服务器 FF101，第 1 行
> 数据库备份在运行版本 8.00.0760 的服务器上。该版本与运行版本 11.00.3128 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-03T13:29:01.843

您正在尝试在 SQL Server 2012 上还原 SQL Server 2000 数据库。不支持此操作。

您需要先在 SQL Server 2005、2008 或 2008 R2 的实例上恢复数据库，然后从那里进行备份，然后在 SQL Server 2012 上恢复新的备份[。Microsoft 在此处对此进行了解释](https://blogs.technet.microsoft.com/mdegre/2012/06/15/migration-sql-server-2000-to-sql-server-2012/)。

# sql-server - 从批处理文件配置 SQL Server 启动参数

> ID：15788625
> 
> 赞同：1
> 
> 时间：2013-04-03T13:25:40.083
> 
> 标签：sql-server, batch-file

我需要将启动跟踪标志从批处理文件添加到 SQL 服务。我一直在努力弄清楚如何做到这一点，最后想出了以下稍微笨拙的方法，使用未记录的 TSQL 过程，然后用 SQLCMD 调用它。问题是它会引发错误：RegCreateKeyEx() 返回错误 5，“访问被拒绝”。但是，同一服务器上的另一个脚本允许我更改其他注册表值，例如 TCP 端口。知道我做错了什么，或者更优雅的方式吗？

```
 DECLARE @VALUE nvarchar(200)
DECLARE @Key nvarchar(2000)

SET @VALUE = '-T1118 -3604 -E'

SET @Key = 'SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11.' + (select SUBSTRING(@@SERVERNAME,CHARINDEX('\',@@SERVERNAME)+1,LEN(@@SERVERNAME)-1)) + '\MSSQLServer\Parameters'

EXECUTE master..xp_regwrite
 'HKEY_LOCAL_MACHINE',
 @Key,
'SQLArg3',
'REG_SZ',
@VALUE 
```

创建@Key 变量的表达式演变为： SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11.MYINSTANCE\MSSQLServer\Parameters 这对我来说似乎是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:45:10.903

SQL Server 的默认实例的注册表项是：

```
SET @Key = 'SOFTWARE\Microsoft\Microsoft SQL Server
    \MSSQL11.MSSQLSERVER\MSSQLServer\Parameters'; 
```

（为了便于阅读，我将上面的密钥包装起来 - 您需要将这些全部放在一行中。）

除非您有命名实例，否则您可以使用此 @Key 而不是您的。如果您在服务器上命名了实例，则需要检查`SOFTWARE\Microsoft\Microsoft SQL Server\InstalledInstances`以获取服务器上实例的名称。

我想有更优雅的方式使用 PowerShell 来做到这一点。

# ios - 开始使用 Open CV 图像识别

> ID：15788626
> 
> 赞同：-3
> 
> 时间：2013-04-03T13:25:47.187
> 
> 标签：ios, opencv, augmented-reality

我正在尝试使用 Open CV 制作一个用于图像识别的应用程序，我想实现这样的东西，[但](http://aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/)我不知道我应该怎么做，谁能给我任何帮助我应该从哪里开始我已经下载了适用于 iOS 的 Opencv从[这里](http://opencv.org/)，

我有一个图像的硬拷贝作为示例，我想通过相机扫描我现在在项目中导入的图像（标记），当我通过相机扫描图像时，它应该覆盖图像上的标记，当我点击/选择它应该显示该标记信息的标记。这是我的形象：

![在此处输入图像描述](https://i.stack.imgur.com/sFJXu.png)

这只是我采取的一个例子（方形，圆形和三角形作为标记）

![在此处输入图像描述](https://i.stack.imgur.com/B3Wjh.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/Wf8yB.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/AuB2V.jpg)

所以现在当扫描图像时，标记将作为覆盖出现，单击标记我应该得到名称（如果点击名为“Air”的圆圈上的覆盖图像，它应该在警报中显示“Air”或者如果点击名为“Tiger”的Square，它应该说“Tiger”）我的问题是图像是相同的图案，但每个部分的结果都不同，所以我不知道我应该如何处理这个..

请任何人通过提出任何想法来帮助我，或者如果有人做过这样的事情，请告诉我应该如何实现它。我必须从头开始任何帮助。

这可以使用 Open CV 来实现吗，或者我必须使用任何其他 SDK，例如 vuforia 或 layar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:36:55.177

也许你应该在寻求帮助之前先搜索一下......

无论如何，您想要找到的形状似乎没有改变（缩放，旋转）所以，您可以查看 OpenCV 中实现的模板匹配方法（请参阅[教程 OpenCV](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)）如果形状正在改变，您应该查看更强大的方法，例如作为 SIFT 或 SURF。两者都已在 OpenCV 中实现（来自 aihack 的链接是重新实现 SIFT 的教程，您可以在同一网站上找到使用 OpenCV 方法的教程）。

# node.js - SockJs - 找不到“信息”路径

> ID：15788628
> 
> 赞同：2
> 
> 时间：2013-04-03T13:25:51.083
> 
> 标签：node.js, sockjs

我正在运行[SockJS 的示例](https://github.com/sockjs/sockjs-node/tree/master/examples/echo)。

跑 npm install （一切正常）

启动[服务器](https://github.com/sockjs/sockjs-node/blob/master/examples/echo/server.js)没有问题。

当我第一次加载[测试页面](https://github.com/sockjs/sockjs-node/blob/master/examples/echo/index.html)时，我看到有一个失败的 404 调用`http://127.0.0.1/echo/info`

我正在查看 sockjs 代码，我猜它是从这里调用的 - [https://github.com/sockjs/sockjs-node/blob/master/src/sockjs.coffee#L81](https://github.com/sockjs/sockjs-node/blob/master/src/sockjs.coffee#L81)

此信息调用的目的是什么，为什么找不到？我的配置中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:21:24.827

您的服务器正在侦听 9999 端口！因此，您也必须放置端口。

这将起作用`http://127.0.0.1:9999/echo/info`

# java - 如何中断 BlockingQueue？

> ID：15788633
> 
> 赞同：3
> 
> 时间：2013-04-03T13:26:01.367
> 
> 标签：java, android, concurrency, blocking, interrupt

BlockingQueue.put 可以抛出 InterruptedException。如何通过抛出此异常来导致队列中断？

```
ArrayBlockingQueue<Param> queue = new ArrayBlockingQueue<Param>(NUMBER_OF_MEMBERS);
...
try {
    queue.put(param);
} catch (InterruptedException e) {
    Log.w(TAG, "put Interrupted", e);
}
...
// how can I queue.notify? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:30:32.197

您需要中断正在调用`queue.put(...);`. `put(...);`调用在某些内部条件下执行，`wait()`如果调用的线程`put(...)`被中断，`wait(...)`调用将抛出`InterruptedException`，由`put(...);`

```
// interrupt a thread which causes the put() to throw
thread.interrupt(); 
```

要获取线程，您可以在创建时存储它：

```
Thread workerThread = new Thread(myRunnable);
...
workerThread.interrupt(); 
```

或者您可以使用`Thread.currentThread()`方法调用并将其存储在某个地方以供其他人使用来中断。

```
public class MyRunnable implements Runnable {
     public Thread myThread;
     public void run() {
         myThread = Thread.currentThread();
         ...
     }
     public void interruptMe() {
         myThread.interrupt();
     }
} 
```

最后，当你 catch`InterruptedException`时立即重新中断线程是一个很好的模式，因为当`InterruptedException`抛出 时，线程上的中断状态被清除。

```
try {
    queue.put(param);
} catch (InterruptedException e) {
    // immediately re-interrupt the thread
    Thread.currentThread().interrupt();
    Log.w(TAG, "put Interrupted", e);
    // maybe we should stop the thread here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:31:06.080

调用`put`将等待插槽空闲，然后再添加`param`并且流程可以继续。

如果您在`put`被调用时捕获正在运行的线程（即在调用`Thread t1 = Thread.currentThread()`之前调用`put`），然后在另一个线程中调用`interrupt`它（同时`t1`被阻塞）。

[这个例子](http://tempusfugitlibrary.org/documentation/threading/wakeup/)有类似的东西，它负责在给定的超时后调用中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:37:57.920

您需要使用 queue.put() 引用运行代码的线程，就像在这个测试中一样

```
 Thread t = new Thread() {
        public void run() {
            BlockingQueue queue = new ArrayBlockingQueue(1);
            try {
                queue.put(new Object());
                queue.put(new Object());
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        };
    };
    t.start();
    Thread.sleep(100);
    t.interrupt(); 
```

# php - ZF2 Form，如何添加自定义验证器

> ID：15788640
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:26:08.897
> 
> 标签：php, zend-framework2

如何将自定义验证器添加到 ZF2 表单？我想将自定义验证器添加到 zf2 表单元素或表单类本身以验证多个元素。

```
use Zend\Form\Form;    
class MyForm extends Form {

    public function init()
    {
        // Add some elements
        $this->add(
            $this->getFormFactory()->create(...);
        }

        // How can i add a custom validator here to the form or element?
    }

} 
```

**我目前的解决方案**

非常简单但有效，表单类或字段集必须实现接口*Zend\InputFilter\InputFilterProviderInterface*

现在我可以添加如下内容：

```
use Zend\Form\Form;
use Zend\InputFilter\InputFilterProviderInterface;
use \PayrollAccountingValidator;
class MyForm extends Form implements InputFilterProviderInterface {

    public function init()
    {
        $this->getFormFactory()->create(
            array(
                    'name' => 'salary',
                    'type' => 'Zend\Form\Element\Number',
                    'attributes' => array(
                            'min' => 0,
                            'step' => 1
                    ),
                    'options' => array(
                            'label' => _('Salary?')
                    )
            ));
    }

    public function getInputFilterSpecification ()
    {
        return array(
                'salary' => array(
                        'validators' => array(
                                new PayrollAccountingValidator($this)
                        )
                )
        );
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:50:07.530

我会做什么：

*   创建表单
*   创建一个依赖于验证器的输入过滤器
*   将验证器添加到过滤器中的字段
*   将过滤器设置为工厂中的表单。

**例子**

形式：

这里我们只是将元素添加到表单中。

```
class SomeForm extends Form {

   public function __construct() {
        parent::__construct('someform');

        $this->add(array(
            'type' => 'Zend\Form\Element\Textarea',
            'name' => 'somelement',
            'options' => array(
                'label' => 'Message',
            )
        ));
    }
} 
```

筛选：

在这里，我们为上述表单中的相关元素创建过滤器。我们在创建输入过滤器时添加在实例化时传入的验证器：

```
namespace SomeModule\Form;

use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

class SomeFormFilter implements InputFilterAwareInterface {

    protected $customValidator;

    protected $inputFilter;

    public function __construct($customValidator) {
        $this->customValidator = $customValidator;
    }

    public function setInputFilter(InputFilterInterface $inputFilter) {
        throw new \Exception("Not used");
    }

    public function getInputFilter() {
        if (!$this->inputFilter) {

            $inputFilter = new InputFilter();
            $factory = new InputFactory();

            $inputFilter->add(
                $factory->createInput(
                    array(
                        'name' => 'somelement',
                        'required' => true,
                        'filters' => array(array(
                                'name' => 'StringTrim')
                        ),
                        'validators' => array(
                            $this->customValidator
                        ),
                    )
                )
            );

            $this->inputFilter = $inputFilter;
        }

        return $this->inputFilter;
    }
} 
```

模块.php

我们现在可以为表单创建一个工厂来管理过滤器验证器依赖项并将过滤器应用于表单：

```
public function getServiceConfig() {
     return array(
        'factories' => array(
            'someForm' => function($sm) {
                $form = new SomeForm();
                $validator = new CustomValidator() // or $validator = $sm->get('CustomValidator');
                $formFilter = new SomeFormFilter($validator);
                $form->setInputFilter($formFilter->getInputFilter());
                return $form;
            },
        ),
    );
} 
```

您显然需要确保在 Module.php 中使用正确的命名空间或提供 FQCN。

现在您可以使用一行代码在控制器中完全配置此表单：

`$form = $this->getServiceLocator()->get('SomeForm');`

如果您还有其他问题，请随时提出。

# iphone - MKMapView 最大化，但我不想要它

> ID：15788648
> 
> 赞同：3
> 
> 时间：2013-04-03T13:26:36.100
> 
> 标签：iphone, ios, storyboard, mkmapview

我遇到了一个问题，我不知道为什么我有它以及如何解决它！也许这只是一个简单的问题。这是两个屏幕：

![故事板编辑器](https://i.stack.imgur.com/nqj88.png) ![iPhone地图](https://i.stack.imgur.com/e4TTv.png)

有什么东西不见了！按钮在哪里？为什么地图是全屏的？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:09:08.970

这无疑是在 Interface Builder 中预览屏幕时屏幕从 4" 屏幕变为 3.5" 英寸模拟器/设备屏幕的功能。

如果使用自动布局（打开故事板，单击第一个选项卡，“文件检查器”并查看是否选中了“使用自动布局”）。检查你的约束。地图视图不应该有高度限制（或者如果 IB 不允许您摆脱它，只需将其优先级降低到可能的最低值......尽管如果它重新添加高度限制，这意味着您的其他约束不是完全限定的，例如忽略按钮的底部约束）但应该对屏幕底部有一个底部约束，或者更好的是对按钮有一个底部约束。还要确保按钮的顶部约束进入地图视图，并且它具有进入超级视图的底部约束。Interface Builder 使这个过程变得比它需要的复杂得多，因为它需要努力添加它确定为缺失约束的内容，恕我直言，但它可以工作。我花了 2 到 3 分钟的时间来处理所有垂直约束，以确保它们在两个屏幕高度上都明确且令人满意。

如果不使用自动布局，请检查您的自动调整蒙版（位于“尺寸检查器”选项卡上）。你想要灵活的高度和固定的底部。

在 IB 中，您可以通过按下![在此处输入图像描述](https://i.stack.imgur.com/dERlv.png)按钮将视图的外观从 4.0" 切换到 3.5"。只需调整您的自动布局约束或非自动布局自动调整大小的蒙版，然后在 3.5" 屏幕和 4.0" 屏幕之间来回切换，以确认一切是否配置正确。

# terminal - 自动解压缩文件夹中的文件 [mac os x]

> ID：15788649
> 
> 赞同：28
> 
> 时间：2013-04-03T13:26:42.630
> 
> 标签：terminal, unzip

我的桌面上有一个文件夹，里面有大约 2500 个文件夹，每个文件夹中有多个压缩文件，我可以通过手动单击它们来解压缩它们，有没有办法通过终端自动执行此操作？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-03T13:34:45.133

`find ./ -name \*.zip -exec unzip {} \;`也许？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T13:46:05.593

您可以尝试**unzip**命令，但我认为它仅适用于 zip/tar 文件。

[http://www.lifewithtech.net/apple/tip-unzip-multiple-files-into-a-single-directory-in-mac-osx/](http://www.lifewithtech.net/apple/tip-unzip-multiple-files-into-a-single-directory-in-mac-osx/)

[http://magma.maths.usyd.edu.au/magma/faq/extract](http://magma.maths.usyd.edu.au/magma/faq/extract)

或者如果您有应用程序**The Unarchiver**：

您可以使用**打开**命令。

**cd**到您的文件夹并使用：

```
$ open */*.rar 
```

这应该根据您的 Unarchiver 设置将所有子文件夹中的所有 rar 文件提取到新文件夹或同一文件夹中。

希望这可以帮助。

# html - SPA 中的 HTML 标记抽象和一致性

> ID：15788659
> 
> 赞同：4
> 
> 时间：2013-04-03T13:27:20.043
> 
> 标签：html, backbone.js, architecture, single-page-application, aura.js

我目前正在评估使用[Backbone.js](http://backbonejs.org/)和[Aura.js](https://github.com/aurajs/aura)来构建企业级 SPA。

我有一个很好的 Javascript 架构，它提供了抽象、一致性、灵活性并且不依赖于任何基础库。

正如我所看到的，在使用任何 MV* 模式（尤其是 Backbone）时，标记生成可以通过直接 dom 操作和外部 html 模板的组合分散在整个视图中。

我想在我的视图中对 html 标记应用与我的 Javascript 架构相同的原则。

1.  **抽象**- 理想情况下，我想为开发人员提供一个简化的 API 来生成标记，从而可能使他们远离正在使用的 css 类/标记结构。

2.  **一致性**- 我想促进和控制开发人员团队中生成的标记的一致性。

3.  **灵活性**- 如果需要更改正在使用的 css 类/标记结构，我希望避免必须找到并完全重写某些标记的所有实例。理想情况下，我希望在一个地方进行任何更改，这将在系统内的所有使用中传播。

作为如何在服务器端实现这一点的一个实际示例，我们目前在 ASP.NET MVC 中使用了一套自定义 HtmlHelpers（在设计上类似于 KendoUI）。这些帮助程序为开发人员提供了一个很好的流畅 API 来使用和集中控制生成的标记。

然而，随着我们转向客户端 UI 生成，我不确定如何获得与服务器端标记生成相同的好处。

我很欣赏模板可以在整个 UI 中提供可重用的小部件，但这并不能完全解决上述问题，这些问题适用于创建这些模板和包含它们的布局。

所以总结一下我的问题......

**在开发企业级 SPA 时，可以采用哪些实践来实现团队内标记生成的控制和一致性？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:45:34.823

由于您的问题仅限于 Backbone.js 和 Aura，我不确定这是否有资格作为答案，但我肯定会检查 3 件事

1.  [AngularJS](http://angularjs.org/)和[AngularUI](http://angular-ui.github.com/) - 指令的概念，类似于[Web 组件](http://www.w3.org/TR/2012/WD-components-intro-20120522/)的概念（W3C 正在进行的 Web 控件标准）
2.  如果您喜欢打字编码，并且喜欢生活在最前沿，请查看[Dart Web UI](http://www.dartlang.org/articles/web-ui/)，它也使用了非常相似的概念

3.  如果您必须留在 Backbone 领域，那么我当然会检查[Backbone UI](http://perka.github.com/backbone-ui/)

我相信前 2 个更有可能满足您的 3 个要求。

# jquery - Bootstrap 移动菜单打不开

> ID：15788665
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:27:31.857
> 
> 标签：jquery, css, wordpress, twitter-bootstrap

这是一个由 Secundo 模板提供支持的 wordpress 网站，最近移动菜单已完全停止打开。我试过删除最近添加的插件无济于事。

网址是[http://sparkengagement.com/](http://sparkengagement.com/)

该主题依赖于引导程序来创建响应式移动菜单。

关于为什么它不起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:39:02.600

您缺少 Bootstrap javascript。

# javascript - 如何使用 js 或 jquery div.width css 属性？

> ID：15788667
> 
> 赞同：0
> 
> 时间：2013-04-03T13:27:35.297
> 
> 标签：javascript, jquery, html, css

我有这样的代码：

HTML：

```
<div id="myDiv" class="container">
  ....
</div> 
```

CSS：

```
div.container {
    width: 300px;
    height: 400px;
    border: solid 1px black;
    overflow: hidden;
    background:  #efefef;
} 
```

JS：

```
var myDiv = document.getElementById("myDiv");
var pageWidth = parseInt(myDiv.style.width); 
```

我想读取 css 属性，我可以使用 js 更改值。
我试过用谷歌搜索，我的 js 代码来自谷歌的链接。
在我用 safari 的 web 检查器检查问题后，我给 js 代码签名。为什么这是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:28:59.453

您可能想使用[css](http://api.jquery.com/css/)：

```
$("#myDiv").css("width","yourWidthhere"); 
```

要获取元素的宽度，只需使用：

```
$("#yourElementId").width(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:31:23.247

```
var width = parseInt($('#myDiv').width(), 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:32:07.530

试试这个

```
alert($('yourdiv').width()); 
```

现场演示[**在这里**](http://jsfiddle.net/dCmLB/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:38:08.693

你可以试试这个：

```
$("#myDiv").css("width","100%"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:02:26.533

您无法使用此代码获取类属性。

> var myDiv = document.getElementById("myDiv"); var pageWidth = parseInt(myDiv.style.width);

我将使用 jquery 方式，这是示例代码：

```
<html>
    <head>
        <style>
            div.container { width: 300px; height: 400px; border: solid 1px black; overflow: hidden; background:  #efefef;}
        </style>    
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
    </head>
    <body><div id="myDiv" class="container"> hi...</div></body>
</html> 
```

然后您应该能够使用 jquery 方法获取和设置宽度：

> $("#myDiv").width(); //获取 $("#myDiv").width(500); //放

# html - 莲花笔记中没有显示带有 img 标签的图像？

> ID：15788670
> 
> 赞同：2
> 
> 时间：2013-04-03T13:27:41.497
> 
> 标签：html, lotus-notes, email-client, inline-images

我的电子邮件正文包含以下 URL

```
 <img src="http://10.210.162.79:8000/web/getImage.do?actionCode=2&imageId=1008"/> 
```

但不显示图像（显示为十字图标）。我也试过下面的设置

LotusNotes-Preferences-Mail-Internet-Image Security--取消勾选以确保隐私不要在未经我许可的情况下显示远程图像

我的同事系统上也有同样的事情，但对我来说，它不显示图像>不确定我在这里缺少什么？我已经尝试过重启莲花笔记。我的 Lotus Notes 版本是 8.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:27:13.847

如果这是一封同时发送给您和您的同事的邮件，那么我最好的猜测是你们两个对入站邮件的设置不同。如果您的消息副本正在服务器上进行格式转换，则防火墙可能会阻止服务器上的 HTTP 图像检索。如果您同事的副本没有在服务器上进行相同的转换，那么将是他自己的计算机正在检索图像并且防火墙允许它。

所以... 检查 Domino Directory 中的 Person 文档，并查看设置**Format preference for incoming mail**。（它在 Basics 选项卡的右侧。）如果它设置为 Prefers **Notes Rich Text**，并且您同事的 Person 文档设置为**Prefer MIME**或**Keep in senders format**，那么这是最有可能的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T07:14:51.837

默认情况下，应禁用图像访问。默认情况下，您必须启用它才能看到图像下载

打开 Lotus Notes >> 偏好 >> 邮件 >> 互联网 >> 图像安全

如果已选中，请取消选中该复选框..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T01:13:39.537

编辑`notes.ini`并确保设置了这两个参数：

`ShowMIMEImagesAsAttachments=0`

`BrowserRenderDisable=0`

# linux - 自动运行的文件

> ID：15788671
> 
> 赞同：0
> 
> 时间：2013-04-03T13:27:43.397
> 
> 标签：linux, bash, shell, autorun

就像可以编写[一个自动提取自身的文件一样](http://blog.mc-thias.org/?title=auto_extract_tar_file&more=1&c=1&tb=1&pb=1)，我正在寻找一种在脚本（或任何它需要的东西）中自动运行程序的方法。我想要脚本的程序部分，因为我只想要一个文件。这实际上是一个挑战：我有一个 xz 压缩程序，我希望能够在没有用户干预 xz 程序的情况下运行它（只是一个 ./theprogram）。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:33:42.443

做了什么后自动运行？登录？把它叫进来`~/.bashrc`。开机时？编写适当的`/etc/init.d/yourprog`并将其链接到所需的运行级别。自解压？将其设为 shell 存档（shar 文件）。查看`shar`实用程序， http: [//linux.die.net/man/1/shar](http://linux.die.net/man/1/shar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:04:23.910

我为此写了一个脚本。这应该有助于：

```
#!/bin/bash
set -e
payload=$(cat $0 | grep --binary-files=text -n ^PAYLOAD: | cut -d: -f1 )
filaname=`head $0 -n $payload | tail -n 1 | cut -d: -f2-`
tail -n +$(( $payload + 1 )) $0 > /tmp/$filaname
set +e
#Do whatever with the payload
exit 0
#Command to add payload:
#read x; ls $x && ( cp 'binary_script.sh' ${x}_binary_script.sh; echo $x >>  ${x}_binary_script.sh; cat $x >> ${x}_binary_script.sh  )
#Note: Strictly NO any character after "PAYLOAD:", not even newline...
PAYLOAD: 
```

* * *

示例用法：
假设`myNestedScript.sh`包含以下数据：

```
#!/bin/bash
echo hello world 
```

然后运行

```
x=myNestedScript.sh; ls $x && ( cp 'binary_script.sh' ${x}_binary_script.sh; echo $x >>  ${x}_binary_script.sh; cat $x >> ${x}_binary_script.sh  ) 
```

它将生成以下文件，您可以直接执行该文件。执行以下文件后，它将提取`myNestedScript.sh`并`/tmp`运行该脚本。

```
#!/bin/bash
set -e
payload=$(cat $0 | grep --binary-files=text -n ^PAYLOAD: | cut -d: -f1 )
filaname=`head $0 -n $payload | tail -n 1 | cut -d: -f2-`
tail -n +$(( $payload + 1 )) $0 > /tmp/$filaname
set +e
chmod 755 /tmp/$filaname
/tmp/$filaname
exit 0
PAYLOAD:myNestedScript.sh
#!/bin/bash
echo hello world 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:40:45.337

对不起，但我只是在想......这样的东西行不通？（我假设它是一个脚本......）

```
#!/bin/bash

cat << 'EOF' > yourfile
yourscript
EOF

chmod +x yourfile

./yourfile 
```

尽管如此，仍然很难准确理解您要做什么……在我看来，“自动运行”与“从脚本中调用程序”非常相似。

# c++ - 如果没有 endl，则重载 ostream 运算符分段错误

> ID：15788672
> 
> 赞同：7
> 
> 时间：2013-04-03T13:27:48.407
> 
> 标签：c++, vector, operator-overloading, ostream

```
class foo {
    public:
    friend ostream& operator << (ostream &os, const foo &f);
    foo(int n) : a(n) {}
    private:
    vector <int> a;
};

ostream& operator << (ostream &os, const foo &f) {
    for (int i = 0; i < f.a.size(); ++i)
        os << f.a[i] << " ";
    os << endl; // why is this line a must?
}

int main(void) {
    foo f(2);
    cout << f << endl;
    return 0;
} 
```

在上面的代码中，如果把标记的行去掉，就会出现段错误错误，有人能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T13:33:04.807

```
ostream& operator << (ostream &os, const foo &f) {
    for (int i = 0; i < f.a.size(); ++i)
        os << f.a[i] << " ";
    os << endl; // why is this line a must?
} 
```

不是强制性的。段错误是因为你没有返回`os`

```
ostream& operator << (ostream &os, const foo &f) {
    for (int i = 0; i < f.a.size(); ++i)
        os << f.a[i] << " ";
    return os; // Here
} 
```

如果您不返回 ostream，这是未定义的行为。这`endl`是冲洗你`os`这里。这就是为什么它似乎正在工作。

编辑：根据 Bo Persson 的说法，为什么它在这种情况下有效

> 操作系统 << endl; 是另一个运算符调用，它通过将 os 放置在“预期返回值的位置”（可能是寄存器）来实际返回 os。当代码返回另一个级别到main时，对os的引用仍然存在

# selenium - selenium xpath，如何选择表中的最后一个匹配元素？

> ID：15788679
> 
> 赞同：13
> 
> 时间：2013-04-03T13:27:59.953
> 
> 标签：selenium

给定

```
<table>
  <tr>
    <td>service1</td>
  </tr>
  <tr>
    <td>service2</td>
  </tr>
  <tr>
    <td>service3</td>
  </tr>
  <tr>
    <td>blip</td>
  </tr>
</table> 
```

当我不知道 n 是什么时，如何选择最后一个“service-n”行？我试过添加`[last()]`，但没有奏效。

我有：

```
//table//tr//td[contains(text(),'service')] 
```

但它选择了第一行，我想要最后一行。
我不能使用`tr[3]`，因为实际上“service-n”行的数量是动态的并且变化很大。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T13:32:35.940

答案正是我把 [last()] 放在了错误的地方

它在这里：

```
//div[@id='content']//table//tr[last()]//td[contains(text(),'service')][last()]/following-sibling::td[2] 
```

不在这里：

```
//div[@id='content']//table//tr[last()]//td[contains(text(),'service')]/following-sibling::td[2][last()] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:55:16.613

通过这种方式尝试使用 cssSelector。

```
By.cssSelector("table tr:last-child td") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T11:43:23.060

```
List<WebElement> allElement=fd.findElements(By.xpath("//table//td[contains(.,'service')]");
int count=allElement.size();
allElement.get(count-1).click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-30T18:48:18.020

```
<table id="table1">
 <tbody>
  <tr id="tr1">
   <td id="td1"></td>
   <td id="td2"></td>
  <tr>
  <tr id="tr2">
   <td id="td3"></td>
   <td id="td4"></td>
  <tr>
 <tbody>
</table> 
```

然后以最后一个 tr 的最后一个 td 为目标，我们可以将 xpath 设置为：xpath="//table[@id='table1']//tr[last()]//td[last()]";

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-13T03:58:29.567

```
(//div[@id='name'])[last()] 
```

通过使用我们可以获得相关字段**的最后一个**元素。

```
//div[@id='name'][last()] 
```

多个元素在最后

# c# - 单击 IFrame 内容按钮时附加代码？

> ID：15788687
> 
> 赞同：1
> 
> 时间：2013-04-03T13:28:27.500
> 
> 标签：c#, javascript, jquery, asp.net

我有一个显示 IFrame 的模式弹出窗口。然后 IFrame 指向一个带有按钮的 aspx。该按钮的类是调度提交。

当我单击 IFrame 中的该按钮时，我希望它关闭我页面上的模式。

我在具有 IFrame 的页面的文档中尝试了这个：

```
 $('.schedule-submit').bind('click', function() { 
                closeEditModal();
            }); 
```

但它没有任何效果。

我应该怎么做才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:36:17.830

您需要从`parent`具有 iFrame 模式弹出窗口的页面调用它：

```
var $MyFrame = $("#iframeid");

// You need to wait for the iFrame content to load first
// So, that the click events work properly
$MyFrame.load(function () {
    var frameBody = $MyFrame.contents().find('body');
    var btn = frameBody.find('.schedule-submit');

    btn.on('click', function() { 
         closeEditModal();
    });
}); 
```

# php - 如何在php中使用一个提交按钮保存两个表单的值

> ID：15788691
> 
> 赞同：0
> 
> 时间：2013-04-03T13:28:38.500
> 
> 标签：php, jquery, mysql

嗨，我有一个三个表单和一个提交按钮，它位于所有三个表单之外，我想使用 php 将所有三个表单的值保存到 mysql 数据库中，任何人都可以帮助我展示如何完成我正在使用在这里提交表单值的 jquery 是我的 jquery

```
 <script>
    $(document).ready(function() {
        $("#submit").click(function(event) {
              alert('send 1st form');
            $.post($("#form1").attr("action"), $("#form1").serialize(),
              function() {
              alert('send 2nd form');
            $.post($("#form2").attr("action"), $("#form2").serialize(),
              function() {
              alert('send 3th form');
                $.post($("#form3").attr("action"), $("#form3").serialize(),
                  function() {
                    alert('Both forms submitted');
                  });
              });
          });
          event.preventDefault();
      });

    });
    </script> 
```

因为我在此之前发布了一个查询，这帮助我提交了表单，现在我想将这些值保存到我的数据库中

她是我的 php 代码

```
if(isset($_POST["submit"])){

    $gen1 = mysql_query("SELECT MAX(accode) AS maxcode FROM quotmain LIMIT 0,1 ") or die(mysql_error());
    if (mysql_num_rows($gen1) > 0) {
        $vvouch = mysql_fetch_assoc($gen1);
        $qvouch = $vvouch["maxcode"] + 1;
    } else{
        $qvouch = '1';
    }

    $a = 1;
    $vouchdt  = mydt($_POST["vouchdt"]); 
    $name     = $_POST["cmbparty"];
    $refno    = $_POST["refno"];
    $attn     = $_POST["attn"];
    $subj     = $_POST["subject"];
    $msg      = $_POST["messsage"];
    $rem      = $_POST["rem"];
    $count    = $_POST["items"];
    $h        = $_POST["h"]; 
    $status   = $_POST["cmbstatus"];

    mysql_query("DELETE FROM quotdtl WHERE vouchno='$qvouch'") or die(mysql_error());

    for ($i = 1; $i <= $count; $i++) {
        $ord     = $_POST['ord_' . $i];
        $srno    = $_POST['srno_' . $i];
        $descrip = $_POST['descrip_' . $i];
        $unit    = $_POST['unit_' . $i];
        $rate = $_POST['rate_' . $i];

        mysql_query("INSERT INTO `quotdtl`(vouchno, orderby, srno, `descrip`, unit, rate)
                            VALUES('$qvouch', '$ord', '$srno', '$descrip', '$unit', '$rate')") or die(mysql_error());
    }

     mysql_query("DELETE FROM quotnotes WHERE vouchno='$qvouch'") or die(mysql_error());

    for ($i = 1; $i <= $h; $i++) {
        $notes = $_POST['notes' . $i];

        mysql_query("INSERT INTO `quotnotes`(vouchno, `notes`)
                            VALUES('$qvouch', '$notes')") or die(mysql_error());
    }   

    if ($addflag == 1) {
        mysql_query("INSERT INTO `quotmain`(vouchno, `vouchdt`, `name`, refno, `attn`, `subject`, `message`, `rem1`, `status`, `username`)
                            VALUES($qvouch, '$vouchdt', '$name', '$refno', '$attn', '$subj', '$msg', '$rem', '$status','$_SESSION[username]')") or die(mysql_error());

        insmess();
        header("refresh: 1; quotation.php?mode=true");
     } else {
            $mvouch = $_POST["vouch"];
             mysql_query("UPDATE `quotmain` SET `vouchdt`='$vouchdt', `name`='$name', refno='$refno', `attn`='$attn', `subject`='$subj',
                                 `message`='$msg', `rem1`='$rem', `username`='$_SESSION[username]' WHERE vouchno = '$mvouch' ") or die(mysql_error());
             updmess();
             header("refresh: 1; menu.php?action=quotation");
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:34:43.217

尝试将提交按钮的 HTML 更改为

```
<button type="button" id="submit">Submit</button> 
```

这将阻止您的浏览器在点击提交按钮时尝试发送单个表单，并且只会执行您在 JavaScript 中输入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:25:25.867

简短的回答：你不能。您的浏览器将始终只发送一个表单。

长答案：您可以在另一个表单 () 中为一个表单的每个输入元素创建一个等效项，并在提交时将隐藏字段的值设置为非隐藏字段的值：

```
onsumbmit="$('#foobar_hidden').val( $('#foobar').val() ); return 1"; 
```

# ruby-on-rails - Ruby on Rails 表单输入

> ID：15788693
> 
> 赞同：2
> 
> 时间：2013-04-03T13:28:44.310
> 
> 标签：ruby-on-rails, ruby

Ruby on Rails 如何自动生成表单输入？我遇到了以下代码，但不知道下面的 HTML 是如何呈现的。

```
<%= f.input :first_name %> 
```

渲染：

```
<div class="input string required"><label for="user_first_name" class="string required"><abbr title="required">*</abbr> First name</label><input type="text" value="Paul" size="30" required="required" name="user[first_name]" maxlength="255" id="user_first_name" class="string required"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:35:42.033

HTML 由[Rails 表单助手](http://guides.rubyonrails.org/form_helpers.html)生成。Rails 为您提供了许多方法来更轻松地生成表单标记，因此您不必每次都担心命名和输入所有属性。查看该文档的链接以更加熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:31:40.257

除了 Chris 所说的，代码`f.input`可能来自[formtastic](https://github.com/justinfrench/formtastic)或[simple_form](https://github.com/plataformatec/simple_form)。它们是用于使用最少代码输出预设模板的宝石，因此您可能需要检查这些。

# c# - 使用 SharpNLP 识别英语句子中的时态

> ID：15788694
> 
> 赞同：2
> 
> 时间：2013-04-03T13:28:44.720
> 
> 标签：c#, algorithm, nlp, sharpnlp

在我的作业中，我在这里使用 SharpNLP 来定义词性，如名词、形容词、动词等。然后，我想根据时态对句子进行分类，首先在这种情况下，以过去时为例。

让我看看我的代码..

```
 listSentence = ParseInput(allInput);

        foreach (string word in listSentence[0].Split(separator))
            if (word.Trim() != "")
                listWord.Add(word);  

        string[] lWord = listWord.ToArray();
        string[] lPOS = this.NLP.PosTagTokens(lWord); 
```

allInput = "我昨天很忙。"

简单来说，在**listSentence[0]**中包含“我昨天很忙”。**然后在string[] lWord**
中拆分为“I”、“was”、“busy”、“yesterday” 然后我使用了 SharpNLP，它运行良好，因此**string[] lPOS**包含 {“NN”、“VBD”、“JJ” , "NN"} 那应该被识别为 TRUE 基于该输出，我很困惑如何识别为过去时 - TRUE 或 FALSE。 解释 ：

 ****NN：名词，单数或
整体 VBD：动词，过去时
VBP：动词，非第三人称单数现在时
VBZ：动词，第三人称单数现在
时 VBG：动词，动名词或现在分词
VBN：动词，过去分词
JJ：形容词
PRP：人称代词

如果 allInput = "我昨天很忙"
string[] lPOS = {"PRP", "VBP", "JJ", "NN"}
那应该被识别为 FALSE

if allInput = "他们昨天很忙"
string[] lPOS = {"PRP", "VBP", "JJ", "NN"}
那应该被识别为 FALSE

if allInput = "I was busy tomorrow"
string[] lPOS = {"PRP", "VBD", "JJ", "NN"}
那应该被识别为 FALSE

先生，请帮助我。给我一个想法和规则来根据上面的所有输出识别过去时。让我通过你的例子来学习。非常感谢大家。:) :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-06T09:02:34.400

目标存在基本矛盾。解析器在句法（结构）级别运行。但是您也想根据语义（含义）进行分类。
`I was busy tomorrow`根据解析器是过去时，因为从句法上讲，动词是过去时。但是，最后一个词的语义使它成为一个语义错误的句子。

在我看来，为了你的目标，`I am busy yesterday`是现在时和`I was busy tomorrow`过去时。****

# matlab - Matlab中的正确平均向量

> ID：15788695
> 
> 赞同：0
> 
> 时间：2013-04-03T13:28:45.227
> 
> 标签：matlab, vector

如果存在这种情况，你能告诉我如何在 Matlab 中纠正平均向量吗？

假设我有这个向量：
`x= 60.44 70.7 80.3 90 100 90.445 40.50 50.21 30 66.7`

我不是在谈论对可以使用`mean(x)`.

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T15:29:32.827

非常简单的均值校正：

```
x-mean(x) 
```

# mysql - MySQL 分区注意事项

> ID：15788698
> 
> 赞同：1
> 
> 时间：2013-04-03T13:28:55.677
> 
> 标签：mysql, partitioning, database-partitioning

我有一张表，最终将有大约 14 亿条记录，11 列，3 个主键。

我已经填充了表的前 1/3，查询时间已经很慢了。我重新格式化了几列以减少空间需求，其中一个主键是一个类似索引的整数，它链接到一个元数据表，其中每个索引扩展为 3 个附加选项（有效地将 6 个主键归一化为 3 个主键）。

我的下一个想法是创建很多分区。第二个主键是日期列，这是迄今为止最常见的数据切片维度。我希望分区是有效的，并且也能提高插入时间。

但是，我怎么知道正确的分区数是多少？我最初的猜测是 8，这太慢了。当我想我应该问时，我正要尝试 100 并且谷歌搜索没有给我任何有用的答案。

该表如此之大，生成它的计算过程如此昂贵，以至于尝试许多不同的分区号是不可行的。因此，任何类型的标准建议都非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T11:20:53.883

以下是您需要考虑的事项：

*   MySQL 5.5+ 中的最大分区数为 1024。
*   您可以在不重新生成数字的情况下更改分区数量，尽管它需要重建索引。
*   仅当查询命中较少的分区然后您有可用的内核时，分区才会加快向上查询

如果您的查询命中所有或许多分区，那么以这种方式进行分区不会对它们有太大帮助。您的设置也有可能是有效的，但硬件无法更快地产生结果。

# c# - linq sql查找重复项但将空字符串和空字符串视为相同

> ID：15788702
> 
> 赞同：3
> 
> 时间：2013-04-03T13:28:59.580
> 
> 标签：c#, linq, null, duplicates

我有一个半百万的记录表，我需要找到重复项。所以我使用我创建的这段代码：

```
var dups2 = from m in mg_B
    group m by new { m.Addr1, m.Addr2, m.City, m.State }
    into g
    where g.Count() > 1
    select g; 
```

这段代码的问题在于，它不会将 addr1 为空字符串“”和分别为 NULL 的 2 条记录作为重复记录。

基本上在比较字段的空值和空值时，它会将它们视为不同，但我需要被视为相同。

我知道我可以浏览每条记录并用“”替换空值，但我花了 1 分钟时间浏览了 4 000 条记录。当有人单击按钮时，这将重复进行。

我发现了这个空字符串问题，因为我最初创建了一个只有一些字段的类（表有超过 40 个字段）。

```
List<CombineClass> mg = (from m in db.MG_Backup
   where m.IsArchived == false
   select new CombineClass { id = m.ID, name = m.Name, addr1 = string.IsNullOrEmpty(m.Addr1) ? "" : m.Addr1, addr2 = string.IsNullOrEmpty(m.Addr2) ? "" : m.Addr2, city = m.City, state = m.State }).ToList(); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:24:05.200

此版本兼容 Linq-to-Sql / Linq-to-Entities

```
var dups2 = from m in mg_B
    group m by new 
    { 
        Addr1 = m.Addr1 ?? string.Empty, 
        Addr2 = m.Addr2 ?? string.Empty, 
        City  = m.City ?? string.Empty, 
        State = m.State ?? string.Empty,
    }
    into g
    where g.Count() > 1
    select g; 
```

生成的 sql 看起来有点像这样：

```
-- Parameters
DECLARE @p0 NVarChar(1000) = ''
DECLARE @p1 NVarChar(1000) = ''
DECLARE @p2 NVarChar(1000) = ''
DECLARE @p3 NVarChar(1000) = ''
DECLARE @p4 Int = 1

SELECT [t2].[value2] AS [Addr1], [t2].[value22] AS [Addr2], [t2].[value3] AS [City], [t2].[value3] AS [State]
FROM (
    SELECT COUNT(*) AS [value], [t1].[value] AS [value2], [t1].[value2] AS [value22], [t1].[value3], [t1].[value4]
    FROM (
        SELECT COALESCE([t0].[Addr1],@p0) AS [value], COALESCE([t0].[Addr2],@p1) AS [value2], COALESCE([t0].[City],@p2) AS [value3], COALESCE([t0].[State],@p3) AS [value4]
        FROM [SettingSystemNodes] AS [t0]
        ) AS [t1]
    GROUP BY [t1].[value], [t1].[value2], [t1].[value3], [t1].[value4]
    ) AS [t2]
WHERE [t2].[value] > @p4 
```

请注意，如果您在查询`string.Empty`之前或什至在查询中设置了一个局部变量`let`，则只有一个参数将用于空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:42:51.893

那么这里是蛮力的方式：

```
var dups2 = from m in mg_B
    group m by new { 
        Addr1 = (string.IsNullOrEmpty(m.Addr1) ? "" : m.Addr1), 
        Addr2 = (string.IsNullOrEmpty(m.Addr2) ? "" : m.Addr2), 
        City  = (string.IsNullOrEmpty(m.City)  ? "" : m.City ), 
        State = (string.IsNullOrEmpty(m.State) ? "" : m.State),
        ...
        }
    into g
    where g.Count() > 1
    select g; 
```

如果你想让代码*看起来*更干净，你可以有一个扩展方法`string`：

```
public static string EmptyForNull(this string s)
{
    return string.IsNullOrEmpty(s) ? "" : s;
} 
```

然后您的查询将是：

```
var dups2 = from m in mg_B
    group m by new { 
        Addr1 = EmptyForNull(m.Addr1), 
        Addr2 = EmptyForNull(m.Addr2), 
        City  = EmptyForNull(m.City), 
        State = EmptyForNull(m.State),
        ...
        }
    into g
    where g.Count() > 1
    select g; 
```

但是，如果它是在 SQL 而不是 Linq 中完成的，这可能会快很多。

# php - 表中的 PHP AJAX

> ID：15788703
> 
> 赞同：0
> 
> 时间：2013-04-03T13:28:59.597
> 
> 标签：php, ajax

我有一个列出我的学生的表格.. 许可证号列将显示许可证号，或者如果数据库中没有数字，它将显示一个文本框..

提交后（注意：没有提交按钮，为了保持它，我只需按回车键） PHP 脚本的结果将通过 Ajax 显示。

我的完整代码在这里。 [http://pastebin.com/9k0EKXA9](http://pastebin.com/9k0EKXA9)

以下是每行许可证号单元格中的代码：

```
 <td><?php // check if license number exists. 
                    if($row['license_no'] == '')
                    {
                        //show form. 
                        ?>
                        <form method="POST" id="license_no_update"">
                            <input type="text" name="license_no" value="License Number" />
                        <input type="hidden" value="<?php echo $row['student_id']; ?>" name="student_id"  />

                        </form>
                        <div id="output"></div>
                        <?php

                    }else{
                        //show license no. 
                        echo $row['license_no'];
                    }
                    ?></td> 
```

这是JQUERY

```
<script type="text/javascript">
$(document).ready(function() {

    $("#license_no_update").submit(function() {

        var license_no_update = $(this).serialize();

        $.post('license_update.php', license_no_update, function(data) {

                // We not pop the output inside the #output DIV.
                $("#output").html(data);

        });

        return false;
    });

});
</script> 
```

我遇到的问题，即使在多次搜索谷歌之后。我知道我必须为表格的每一行设置一个新的表单和元素 ID。但即使我有这些，我也不知道如何让 JQUERY 找到那个唯一的号码..

目前附有代码，如果我在表格的第一行提交，则会显示正确的结果，如果我在任何其他行提交，则不会显示任何内容..

我希望一切都说得通。

问候

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:32:14.217

用于`.find()`在 clicked 中查找隐藏输入的值`form`。请注意表单本身的用途`$(this)`，然后您可以通过其名称缩小输入范围，因为您知道名称。

但是，目前还不清楚你想用它做什么，`id`所以我把它留给你。

```
 $("#license_no_update").submit(function() {

    var studentID = $(this).find("input[name='student_id']").val();

        var license_no_update = $(this).serialize();

        $.post('license_update.php', license_no_update, function(data) {

                // We not pop the output inside the #output DIV.
                $("#output-" + studentID).html(data);

        });

    return false;
}); 
```

**更新：**

`ID`这是为每个创建唯一的一种方法`output`：

```
if($row['license_no'] == '')
                    {
                        //show form. 
                        ?>
                        <form method="POST" id="license_no_update"">
                            <input type="text" name="license_no" value="License Number" />
                        <input type="hidden" value="<?php echo $row['student_id']; ?>" name="student_id"  />

                        </form>
                        <div id="output-<?php echo $row['student_id']; ?>"></div>
                        <?php

                    }else{
                        //show license no. 
                        echo $row['license_no'];
                    } 
```

# php - 将数据从 mysql 表导出到 .csv 文件

> ID：15788707
> 
> 赞同：0
> 
> 时间：2013-04-03T13:29:06.260
> 
> 标签：php, mysql, excel, csv

我有一个 mysql 表，在其中存储用户的手机号码，现在我只想使用 php 将这些号码导出到 .csv 文件，并且我不想在每个号码的末尾使用逗号。现在假设我的表中存储了接下来的 3 个数字：

```
123456789
+966123456789  
00966123456789 
```

现在，如果我使用下一个代码：

```
$result = mysql_query("SELECT cellphone FROM user");
if ($result) {
    while ($row = mysql_fetch_array($result)) {
        $cellphones .= $row["cellphone"] . ",\r\n"; //note the comma here
    }
}

$filename = "cellphones_" . date("Y-m-d_H-i");
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header("Content-disposition: filename=" . $filename . ".csv");
print $cellphones;
exit; 
```

我将得到一个 .csv 文件，其中包含如下数字：

```
+966123456789,
00966123456789,
123456789, 
```

但是，如果我使用相同的代码而没有像这样的逗号：

```
 $cellphones .= $row["cellphone"] . "\r\n"; 
```

代替：

```
 $cellphones .= $row["cellphone"] . ",\r\n"; //note the comma here 
```

那么 .csv 文件中的数字将是：

```
9.66123E+11
9.66123E+11
123456789 
```

那么出了什么问题，如何在没有逗号的情况下正确显示数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:40:20.887

**解释**

逗号被视为每行中值的一部分，因此 MS Excel 在导入时将数据视为字符串......这意味着它将“按原样”存储在单元格中。如果没有逗号，MS Excel 会将值视为数字，使用不显示前导零的通用格式，如果数字超过定义的位数，则会切换到科学格式。

**解决方案**

为了始终将值视为字符串，不使用逗号，请将值括在双引号中。

```
$cellphones .= '"' . $row["cellphone"] . '"' . "\r\n"; 
```

# javascript - `var status = true` 只能设置为字符串，为什么？

> ID：15788709
> 
> 赞同：-3
> 
> 时间：2013-04-03T13:29:08.033
> 
> 标签：javascript

我有一段非常简单的代码。它检查两个参数。如果第一个参数为假，则更改 chrome 扩展中的弹出图标，如果为真且之前为假，则将图标更改回来，如果未传递任何参数，则返回当前值。

问题是无论哪种方式，作为布尔值传递的变量和第一个参数都被解释为字符串并产生意外结果。这是我的代码：

```
var status = true;
var reason;
function isReady(statusT, reasonT) {
    "use strict";
    if (statusT === false) {
        chrome.browserAction.setIcon({
            path : "img/blue-sharingan.png"
        });
        status = statusT;
        if (reason !== undefined) {
            reason = reasonT;
            return;
        }
        return;
    }
    if (statusT === true && status === false) {
        chrome.browserAction.setIcon({
            path : "img/icon-32.png"
        });
        status = statusT;
        reason = null;
        return;
    }
    if (statusT === undefined && reasonT === undefined) {
        return {
            'status' : status,
            'reason' : reason
        };
    }
} 
```

我已经阅读了[https://stackoverflow.com/a/653934/792066](https://stackoverflow.com/a/653934/792066)，但我仍然不知道可能出了什么问题。

# java - 更新 SSL 证书时，Android BKS 是否也需要更新

> ID：15788714
> 
> 赞同：1
> 
> 时间：2013-04-03T13:29:19.397
> 
> 标签：java, android, security, ssl, https

所以这是一个足够简单的问题，但我不确定答案。

在 android 上开发 SSL 有时是一个棘手的领域。大多数人有两个选择： * 接受所有证书并冒 MITM 攻击的风险 * 在应用程序中将证书打包为 BKS。

在我的应用案例中，我选择将 BKS 打包在里面并通过 HttpsURLConnection 读取它

```
KeyStore trustStore = loadTrustStore();
KeyStore keyStore = loadKeyStore();

TrustManagerFactory tmf = TrustManagerFactory
                    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(trustStore);

KeyManagerFactory kmf = KeyManagerFactory
                    .getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(keyStore, KEYSTORE_PASSWORD.toCharArray());

SSLContext sslCtx = SSLContext.getInstance("TLS");
sslCtx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);

URL url = new URL("https://myserver.com");
HttpsURLConnection urlConnection = (HttpsURLConnection) url
urlConnection.setSSLSocketFactory(sslCtx.getSocketFactory()); 
```

现在我遇到了一个问题。我的证书快过期了，我不确定如果我升级它会有什么影响。

**问：更新 SSL 证书而不升级 Android 设备上的应用程序是否会阻止他们访问 https URL？**

**问：不升级 SSL 证书有什么影响。安卓设备会无法联系到服务器吗**

# python - 内容未匹配

> ID：15788715
> 
> 赞同：1
> 
> 时间：2013-04-03T13:29:19.553
> 
> 标签：python, binary

我正在使用 python 脚本将文件的数据复制到其他文件中

```
input_file = open('blind_willie.MP3', 'rb')
contents = input_file.read()
output_file = open('f2.txt', 'wb')
output_file.write(contents) 
```

当我使用文本编辑器打开 f2 时，我看到这些符号：

```
ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿù`‘~ +Pg]Nñòs 
```

有没有办法查看 f2 文件的二进制内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:34:11.087

是的，有一种方法可以查看`f2`文件的二进制内容，并且您已经发现了它。这些符号代表文件的二进制内容。

如果您想看到二进制内容的人类可读解释，您将需要一个十六进制转储程序或十六进制编辑器之类的东西。

在 Linux 上，我使用`hd`or`od -t x1`命令。

如果您想编写自己的十六进制转储命令，您可以从以下之一开始：

*   [scapy hexdump()](https://stackoverflow.com/questions/10998079/scapy-hexdump)
*   `contents.encode("hex")`
*   [http://code.activestate.com/recipes/577243-hex-dump/](http://code.activestate.com/recipes/577243-hex-dump/)
*   [http://code.activestate.com/recipes/576945/](http://code.activestate.com/recipes/576945/)

或者您可以使用以下代码：

```
def hd(data):
    """ str --> hex dump """
    def printable(c):
        import string
        return c in string.printable and not c.isspace()
    result = ""
    for i in range(0, len(data), 16):
        line = data[i:i+16]
        result += '{0:05x} '.format(i)
        result += ' '.join(c.encode("hex") for c in line)
        result += " " * (50-len(line)*3)
        result += ''.join(c if printable(c) else '.' for c in line)
        result += "\n"
    return result

input_file = open('blind_willie.MP3', 'rb')
contents = input_file.read()
output_file = open('f2.txt', 'wb')
output_file.write(hd(contents)) 
```

# jquery - 我们如何在特定时间段之间在单个视图上加载多个部分视图？

> ID：15788717
> 
> 赞同：2
> 
> 时间：2013-04-03T13:29:34.983
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我的单视图页面上有多个部分视图。部分视图动态加载。而且我希望部分视图按 1 加载。可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:32:58.467

在您的视图中，保留三个 Div 并在某些属性中分配 Url 详细信息，如下所示。

**示例 HTML**

```
<div id="Div1" attr-Url="@Url.Action("ActionName", "ControllerName", 
                                                    new { area = "Area Name" })">
</div>

<div id="Div2" attr-Url="@Url.Action("ActionName", "ControllerName", 
                                                    new { area = "Area Name" })">
</div>

<div id="Div3" attr-Url="@Url.Action("ActionName", "ControllerName", 
                                                    new { area = "Area Name" })">
</div> 
```

现在，您可以使用 Load Event 的 Success CallBack。

**jQuery**

```
$(document).ready(function () {
    var url = $('Div1').attr('attr-Url');
    $('Div1').load(url, function () {

        //Success callback
        url = $('Div2').attr('attr-Url2');
        $('Div2').load(url, function () {

            //Success callback
            url = $('Div3').attr('attr-Url3');
            $('Div3').load(url, function () {

                //Success callback
            }); 
        });
    });
}); 
```

如果你注意到上面的代码。成功加载第一个局部视图后，第二个局部视图开始加载，然后依次加载第三个。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:34:32.160

这种方法可能对您有用：

[在 MVC3 中使用 JQuery 渲染局部视图](https://stackoverflow.com/questions/11487164/render-partial-views-using-jquery-in-mvc3)

它使用 jquery 和`.load()`, 来调用将您的部分视图呈现为 html 并将其返回到 javascript 的操作，您稍后可以将其放置在您想要的任何位置。

**更新：**

如果你想按顺序加载，一个接一个，你可以使用jquery的[load()](http://api.jquery.com/load/)的完整回调一个接一个地链接。

如果您想让它们在特定时间或间隔加载，您可以使用 javascript 的[setTimeout](http://www.w3schools.com/js/js_timing.asp)

# c# - 使用比较的泛型

> ID：15788721
> 
> 赞同：3
> 
> 时间：2013-04-03T13:29:45.357
> 
> 标签：c#, .net, generics

我在 C# 中有一个类，我想在其中实现在泛型数组中执行操作的方法。例如，我想从通用数组中获取最大组件值。就我而言，只考虑数字类型（int、long、double ...）就足够了

```
public class NumericCalculation<T> where T : IComparable<T>
{
    public static T getMax (T[] array)
    {
        T maxValue = default(T);
        if ( array.Length > 0) {
            maxValue = array[0];                 
            for (int i = 0; i < array.Length; i++) {
                if (array[i] > maxValue)
                {
                    maxValue = array[i];
                }
            }            
        }
        return maxValue;
    }
} 
```

但这会返回错误：“错误 2 运算符 '>' 不能应用于 'T' 和 'T' 类型的操作数”

是否有我正在跳过的界面或其他什么？可以对通用数字数组执行此通用方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:35:07.590

听起来你只是想要：

```
return array.DefaultIfEmpty().Max(); 
```

但是要回答您的具体问题，您可以使用[`CompareTo`](http://msdn.microsoft.com/en-us/library/43hc6wht.aspx)，它是`IComparable<T>`您将数组元素类型限制为的接口的成员：

```
if(array[i].CompareTo(maxValue) > 0) { ... } 
```

但就个人而言，我会改用它，[`Comparer<T>.Default`](http://msdn.microsoft.com/en-us/library/azhsac5f.aspx)因为它可以更好地处理`null`引用。在您的情况下，这并不是那么重要，因为您只对原始数值类型（所有结构）感兴趣：

```
if(Comparer<T>.Default.Compare(array[i], maxValue) > 0) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:35:04.397

使用下一个代码来比较泛型类型的对象。`CompareTo`在`IComparable<T>`接口中定义

```
if (array[i].CompareTo(maxValue) > 0)
{
    maxValue = array[i];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T13:35:24.500

用于`CompareTo()`代替比较运算符。此外，Max 已经用 Linq 实现了：

```
return new[] {1,2,9,4,45}.Max(); 
```

# iphone - ios 应用程序的 Twitter 集成

> ID：15788722
> 
> 赞同：3
> 
> 时间：2013-04-03T13:29:47.140
> 
> 标签：iphone, ios, twitter, login, oauth

我的应用程序具有通过 twitter 和 Facebook 登录的功能，任何人都可以建议任何相同的示例代码吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:34:17.120

请参考以下链接，

推特：

[https://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios) [http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html) [https://github.com/bengottlieb/Twitter-OAuth -苹果手机](https://github.com/bengottlieb/Twitter-OAuth-iPhone)

Facebook：

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)

[https://github.com/facebook/facebook-ios-sdk/tree/master/samples/Scrumptious](https://github.com/facebook/facebook-ios-sdk/tree/master/samples/Scrumptious)

# python - 如何确定最近的共同祖先类

> ID：15788725
> 
> 赞同：2
> 
> 时间：2013-04-03T13:29:51.030
> 
> 标签：python, inheritance, lowest-common-ancestor

假设我有四个类：`A`、`B`派生自`A`、`C`派生自`A`和`D`派生自`C`。（所以我总是有单一继承。）在python中，确定任何两个（此类实例）类的最近共同祖先的最佳方法是什么？具体来说，我需要一个函数`clcoancl(X,Y)`，其中`clcoancl(A, B) == A`、`clcoancl(B, C) == A`和`clcoancl(C, D) == C`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:55:47.913

这应该适用于单继承或多继承，输入任意数量的类：

```
import inspect
from collections import defaultdict

def clcoancl(*cls_list):
    mros = [list(inspect.getmro(cls)) for cls in cls_list]
    track = defaultdict(int)
    while mros:
        for mro in mros:
            cur = mro.pop(0)
            track[cur] += 1
            if track[cur] == len(cls_list):
                return cur
            if len(mro) == 0:
                mros.remove(mro)
    return None # or raise, if that's more appropriate 
```

正如 NPE 和 Daniel Rossman 所提到的，这可能不是解决根本问题的最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:40:56.310

```
class A(object): pass
class B(A): pass
class C(A): pass
class D(C): pass

# get the list of ancestors (assuming single inheritance!)
def ancl(cls):
    ret = []
    while cls is not object:
        ret.append(cls)
        cls = cls.__bases__[0]
    ret.append(object)
    return ret

def clcoancl(cls1, cls2):
    ancl1 = ancl(cls1)
    ancl2 = ancl(cls2)
    # find the first class present in both ancl1 and ancl2
    while len(ancl1) > 0 and len(ancl2) > 0 and ancl1[-1] == ancl2[-1]:
        ret = ancl1.pop(-1)
        ancl2.pop(-1)
    return ret

print clcoancl(A, B)
print clcoancl(B, C)
print clcoancl(C, D) 
```

正如@DanielRoseman 指出的那样，您是否真的需要这是另一回事，这是他对您问题的评论。

# php - 元名称不区分大小写

> ID：15788728
> 
> 赞同：0
> 
> 时间：2013-04-03T13:30:00.197
> 
> 标签：php, wordpress

我有以下基于常规 WordPress 自定义字段名称的 GET 函数。勾选后，它将对该自定义字段值设置为 1 的所有帖子进行排序。它当前有效。但是，我碰巧有两个名为“free”和“twofree”的自定义字段

当我勾选“免费”时，它还包括“twofree”，反之亦然。它似乎不区分大小写。有什么解决方法吗？

```
<?php 
/* my code starts from  here*/
 if( isset( $_GET['show'] ) && !empty ( $_GET['show']  )  ){
   if( $_GET['show'] == 1 ) 
    $meta_field = 'free';
  else  if( $_GET['show'] == 4 )
    $meta_field = 'sale';
   else if( $_GET['show'] == 2 )
    $meta_field = 'genuine';
    else if ( $_GET['show'] == 'onfire' )
    $meta_field = 'onfire';
    else if( $_GET['show'] == 5 )
    $meta_field = 'twofree';    
 else if( $_GET['show'] == 3 )
    $meta_field = 'onfire'; 

        if( $_GET['show'] == 'sale' )
            query_posts('cat='.$cat.'&meta_key='.$meta_field.'&meta_value > 0');
        else
          query_posts('cat='.$cat.'&meta_key='.$meta_field.'&meta_value>=1');   
 }
/* my code ends from  here*/ 
?> 
```

编辑：我发现了问题，它在于部分

```
query_posts('cat='.$cat.'&meta_key='.$meta_field.'&meta_value>=1'); 
```

我把它改成

```
query_posts('cat='.$cat.'&meta_key='.$meta_field.'&meta_value=1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:31:55.317

`===`当您想要匹配精确值时使用身份运算符，而不是`==`根据字符串/整数检查相似值。

* * *

更多此主题，请查看此[链接](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)或下面的此答案

```
Using the `==` operator (*Equality*)

    true == 1; //true, because 'true' is converted to 1 and then compared
    "2" == 2 //true, because 2 is converted to "2" and then compared

Using the `===` operator (*Identity*)

    true === 1 //false
    "2" === 2 // false

This is because the **equality operator == does type coercion**...meaning that the interpreter implicitly tries to convert the values and then does the comparing.

On the other hand, the **identity operator === does not do type coercion**, and so thus it does not convert the values of the values when comparing 
```

# python - 存在包含使用 Selenium 的首字母缩略词的断言文本

> ID：15788731
> 
> 赞同：0
> 
> 时间：2013-04-03T13:30:14.790
> 
> 标签：python, xpath, selenium, acronym

我已经设置了我的 Selenium (v 2.3) 测试的功能，以检查某些错误消息的存在，这些错误消息一直运行良好，直到我正在检查的元素有首字母缩略词。

我的函数获取页面中的所有错误，然后搜索`div`预期的消息；

```
# el is the error div element
error_el = el.find_element_by_xpath('p[contains(text(), "{0}")]'.format(error_text))
...
self.assertIsNotNone(error_el) # make sure it actually found something 
```

我从我的测试中调用`self.assertFieldError('My error message')`它并且它完美地工作，直到`'My error message'`包含一个首字母缩写词。如果存在首字母缩略词，则 Selenium 不会将我的字符串与段落匹配。

我目前对此的解决方案是检查页面源中的字符串，但如果它是多次出现的字符串，这并不理想。

是否可以忽略首字母缩写词标签或改进我的 xpath 以允许文本或带有首字母缩写词的文本？我一直认为该`text()`方法的操作与用户看到的完全一样，并且它会自动忽略首字母缩略词。

*编辑*

错误消息使用 Javascript 附加到字段，该 Javascript 通过字段名称从 Django 表单获取字段标签。尽管据我所知，这与 Selenium 无关。

HTML：

```
<div class="field">
    <div class="error">
        <p>My <acronym title="Error">ERR</acronym> message</p>
    </div>
    <label for="id_myField">My <acronym title="Error">ERR</acronym> message</label>
    <input id="id_myField" type="text">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:19:50.577

我认为您将 的行为`text()`与将元素节点转换为字符串值的行为混淆了。差异出现在`<p>`具有带有文本的子元素的情况下，例如`<acronym>`.

什么`text()`是选择单个文本节点。在没有显式命名空间轴的情况下，它选择作为上下文节点子节点的文本节点。在内部`p[...]`，上下文节点是一个`<p>`元素。所以`text()`在那个谓词里面只选择上下文节点的子节点（不是孙子节点）。在您的示例中，该`<p>`元素具有三个子节点：

*   文本节点`"My "`
*   元素节点命名`acronym`
*   文本节点`" message"`

因此，`text()`（在`p`元素的上下文中）将返回两个文本节点的节点集，其值为`My`和`message`。

当评估为字符串时，如 中`contains(text(), ...)`，节点集被如下处理：返回第一个节点的字符串值，其余的被忽略。因此，在您的示例中，返回的节点集`text()`计算结果为`"My "`，即第一个子文本节点的内容。然后，您的 XPath 表达式等同于`p[contains("My ", "My error message")]`您`p`尝试匹配的。那当然失败了。谓词为假，因此不`p`返回任何元素。

您希望连接所有后代文本节点的字符串内容，但事实并非`text()`如此。为此，请将`<p>`元素*本身*评估为字符串。例如

```
p[contains(., "...")] 
```

`.`表示上下文节点，里面`p[...]`是`p`元素。当您将`p`元素评估为字符串时，结果是所有后代文本节点的串联。

# c# - yield 返回空字符文字

> ID：15788735
> 
> 赞同：2
> 
> 时间：2013-04-03T13:30:21.593
> 
> 标签：c#, linq, char, yield-return

我正在编写一个 Linq 扩展方法，从字符串输入中生成一个 p455w0rd。

```
public static IEnumerable<char> ToPasswordFormat(this IEnumerable<char> source)
{
        var enumerator = source.GetEnumerator();
        while (enumerator.MoveNext())
        {
            switch((char)enumerator.Current)
            {
                case 'a':
                    yield return '4';
                    break;
                case 'e':
                    yield return '3';
                    break;
                case 'l':
                    yield return '7';
                    break;
                case 'i':
                    yield return '!';
                    break;
                case ' ':
                    yield return '';
                    break;
                default:
                    yield return (char)enumerator.Current;
                    break;
            }
        }
} 
```

如您所见，我想删除空格，但是当我使用`yield return '';`它时会出现错误`Empty character literal`。

什么是什么`''`，我怎样才能返回收益？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T13:33:05.663

你不能`yield return nothing`。如果它是空格，解决方案是**不产生返回。**注释掉那行，你应该很好。

`''`是没有意义的。编译器会抱怨。没有所谓的“没有性格”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:35:31.203

1.  `''`是没有意义的。没有“无字符”的概念——有nul字符，但与“无字符”不一样。将此与字符串进行比较，字符串可以是空引用（对字符串）或零长度字符串。

2.  已经在@George Duckett 对您的问题的评论中回答了：只需`yield`从`' '`案例中删除即可。

# web-services - .Net CF 客户端的 Apex Web 服务身份验证

> ID：15788739
> 
> 赞同：1
> 
> 时间：2013-04-03T13:30:36.133
> 
> 标签：web-services, compact-framework, oracle-apex

我们正在开发一个条形码应用程序，以在运行 Windows Mobile 5.0 Pocket PC 的移动计算机上运行，​​它需要从我们的 Oracle 数据库中获取数据。

Apex 已设置，但如何使用 Apex 的本机身份验证创建安全的 Web 服务？如何设置“仅HTTPS”？

更新

我现在可以在浏览器中调用 ...?wsdl 链接，看起来不错。它还在项目中注册为 WebReference。

但是当我运行以下代码时：

```
CONTAR_USUARIOSService service = new CONTAR_USUARIOSService();
System.Net.NetworkCredential pocket = new System.Net.NetworkCredential("pocket", "000");
service.Credentials = pocket;
double resultado = service.CONTAR_USUARIOS(); 
```

我收到此错误：

```
System.Net.WebException was unhandled
  Message="WebException"
  StackTrace:
       at System.Web.Services.Protocols.SoapHttpClientProtocol.doInvoke(String     methodName, Object[] parameters, WebClientAsyncResult asyncResult)
       at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
       at Supernorte.Recebimento.ContarUsuariosWebReference.CONTAR_USUARIOSService.CONTAR_USUARIOS()
       at Supernorte.Recebimento.Login..ctor()
       at Supernorte.Recebimento.MainForm.mostrarLogin()
       at Supernorte.Recebimento.MainForm..ctor()
       at Supernorte.Recebimento.Program.Main() 
```

我收到“未经授权”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:00:13.127

如果您通过您的 Web 服务（我个人仍在为之苦苦挣扎）获取 Oracle 输入和输出，您也许可以通过这种方式访问​​您的信息。

添加网络参考。

![添加网络参考](https://i.stack.imgur.com/cfY0S.png)

它将询问您的 Web 服务已上传到的 URL。我猜这可能是您在场外拥有的网站，但我使用我们的内部服务器。

![cpweb2 主机](https://i.stack.imgur.com/CkfJ3.png)

您可以看到我有一个默认网页，我在该网页中加载了我一直坚持的可用服务。1Mainframe.svc` 将成为我的“大服务”，但后来我意识到我需要做的不仅仅是一次调用，所以我创建了下一个，“Erp 服务”。

无论如何，在我选择 后`ErpService.svc`，我得到了这个，我将默认的 Web 引用名称更改为**ErpService1**。我个人发现，如果我需要编辑或修改服务，XML 配置文件就会一团糟，所以我只删除了 Service1 并添加了 Service2。

我添加了一个名为**ErpClass1.cs的新类**

![Erp 1 级](https://i.stack.imgur.com/E39jF.png)

使用我的项目的命名空间添加对我的 Web 服务的引用，然后开始编码！

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;
using AcpMobile5.ErpService1;

namespace AcpMobile5 {

  class ErpClass1 {

    private ErpService m_erpService;

    public ErpClass1() {
      m_erpService = new ErpService();
    }

    public void Query(string woNumber) {
      m_erpService.Query(woNumber);
    }

    public string PartNumber() {
      return m_erpService.CoilPartNo();
    }

  }

} 
```

显然，这并不能为您解决所有问题。您用于访问 Oracle 数据库的 Web 服务仍然需要编写，这不是一项简单的任务。

但是，我希望它可以帮助您指明正确的方向。

这一切都是使用 Visual Studio 2008 for Mobile 5.0 完成的。

![界面截图](https://i.stack.imgur.com/yfcC4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:27:14.373

所以，我没有按照我的意愿使用 Apex。相反，我启用[了 Oracle XML DB Native Web Services](http://www.oracle-base.com/articles/11g/native-oracle-xml-db-web-services-11gr1.php)。

经过一些艰难的身份验证[主要是由于输入了错误的密码]：]我得到了这段代码：

```
MyWebService service = new MyWebService();
service.Credentials = new MyWebService("MY_ORACLE_USER", "*******");

double result = service.MY_LOGIN_FUNCTION(this.userName); 
```

# selenium - Selenium Web Driver Firefox 没有响应

> ID：15788740
> 
> 赞同：0
> 
> 时间：2013-04-03T13:30:36.670
> 
> 标签：selenium, selenium-webdriver

我正在使用使用 Web 驱动程序类的简单 selenium 示例，但 IE Web 驱动程序类工作正常，但 Firefox 没有响应，没有打开浏览器，也没有在控制台中抛出任何错误。

代码在这里

```
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

    public class GoogleSearchFF {  
        public static void main(String args[]){  
            WebDriver driver=new FirefoxDriver();  
            System.out.println("Loading Google search page");  
            driver.get("http://www.google.com");
            System.out.println("Google search page loaded fine");   
        }  
    } 
```

selenium jar 文件添加到类路径..

> \selenium-java-2.13.0\selenium-2.13.0\selenium-java-2.13.0.jar
> 
> \selenium-java-client-driver-1.0.1\selenium-java-client-driver.jar
> 
> \Selenium 最新\selenium-server-standalone-2.13.0.jar

缺少任何罐子吗？通过设置 proeprty INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS = true，该代码适用于 IE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:11:10.800

将 Firefox 版本降级到 8，因为 Selenium 2.13.0 仅支持最高 8 的 Firefox 版本。

作为参考，请检查[此](http://selenium.googlecode.com/svn/trunk/java/CHANGELOG)日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T07:44:35.997

无需将 Firefox 降级到 8，您需要下载 geckodriver.exe 并通过以下方式设置 System.property()

System.setProperty("webdriver.gecko.driver", "pathTogeckodriver");

在调用 WebDriver driver = new FirefoxDriver();

# java - Spring RestTemplate POST 与谷歌翻译 API

> ID：15788754
> 
> 赞同：0
> 
> 时间：2013-04-03T13:31:07.263
> 
> 标签：java, spring, google-translate, resttemplate

我在我的应用程序中使用带有 Spring RestTemplate 的[Google Translate API](https://developers.google.com/translate/v2/using_rest)，它工作正常，直到我使用 GET http 请求。但是，如果我有大量数据，服务将返回 414 错误（请求 URI 太大）。

所以我决定使用 POST （根据[注释](https://developers.google.com/translate/v2/using_rest#WorkingResults)）。

这是我的代码：

```
String content = "q=Hello";
HttpHeaders headers = new HttpHeaders();
headers.set("X-HTTP-Method-Override", "GET");
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);
HttpEntity<String> request = new HttpEntity<String>(content, headers);
String response = new RestTemplate.postForObject(
    "https://www.googleapis.com/language/translate/" +
    "v2?key=<my_key>&source=en&target=ru", request, String.class); 
```

该服务返回错误 400 错误请求，我不知道为什么。我已经使用 jQuery 成功创建了类似的代码，所以我知道这种方式应该可行。请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:36:52.807

我认为你形成 URI 的方式不正确，这就是你得到 400 的原因。查看谷歌翻译 API 文档，看起来他们期望 'q' 作为 URI 查询参数。此外，您似乎正在为 GET 执行 POST 请求。来自[谷歌翻译 API 文档](https://developers.google.com/translate/v2/using_rest)

```
GET https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&source=en&target=de&q=Hello%20world 
```

尝试这个，

```
Map<String, String> queryParameters = new HashMap<String, String>();
queryParameters.put("key","my_key_here");
queryParameters.put("source","en");
queryParameters.put("target","ru");
queryParameters.put("q","Hello World");

String url =  "https://www.googleapis.com/language/translate/" +
    "v2?key={key}&source={source}&target={target}&q={q}";

HttpHeaders headers = new HttpHeaders();
headers.set("X-HTTP-Method-Override", "GET");
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);

HttpEntity<String> request = new HttpEntity<String>(null, headers);

RestTemplate restclient = new RestTemplate();
String response=restclient.getForObject(url,request,String.class,queryParameters); 
```

# .net - 用于递归调用的选择性 AttachedToParent

> ID：15788762
> 
> 赞同：2
> 
> 时间：2013-04-03T13:31:23.590
> 
> 标签：.net, .net-4.0, task-parallel-library

我已经实现了在后台运行繁重任务的辅助方法

它接受多个代表并且不阻塞：

*   异步部分
*   成功部分（GUI）
*   异步部分失败（GUI）
*   最后（GUI）（可选）

每个 gui 部分都可以开始它自己的序列，即发生对我的辅助方法的递归调用。但是我想在附加任务完成时将任何部分视为已完成。

这张图片解释了我的意思：

![在此处输入图像描述](https://i.stack.imgur.com/yBwZz.png)

为了提供这种条件，我将我的异步任务创建为附加到父级，这给了我需要的东西。
我唯一的问题是，在 TPL for .NET v4`DenyChildAttach`选项中不存在，所以当我的方法在其他任务中被调用时，它会附加到这个任务。
我将创建一个带有参数的重载来指示附加的需要，但是我想要以下默认行为：

**如果递归调用，则附加，否则除非明确说明，否则不要附加。**
明确地说，我应该设置一些指示递归的上下文，但不明白如何......

PS Now 方法看起来像这样（对于 Action、Func 有很多重载）：

```
public static CancellationTokenSource ExecuteBlockingOperation(Action action,
            Action completition,
            Action<AggregateException> onException,
            Action<bool, bool, bool> @finally = null)
        {
            if (action == null)
                throw new ArgumentNullException("action");

            if (completition == null)
                throw new ArgumentNullException("completition");

            if (onException == null)
                throw new ArgumentNullException("onException");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = SynchronizationContext.Current == null? TaskScheduler.Default : TaskScheduler.FromCurrentSynchronizationContext();
            var successfullyCompleted = false;

            var task = new Task(action, TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent);
            var onFault = task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception),
                CancellationToken.None,
                TaskContinuationOptions.OnlyOnFaulted | TaskContinuationOptions.AttachedToParent,
                scheduler);

            var onSuccess = task.ContinueWith(asyncPart =>
                {
                    if (!token.IsCancellationRequested)
                    {
                        completition();
                        successfullyCompleted = true;
                    }
                }, CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion | TaskContinuationOptions.AttachedToParent, scheduler);

            if (@finally != null)
            {
                Task.Factory.ContinueWhenAll(new[] { onSuccess, onFault },
                    tasks =>
                    {
                        var isSuccess = task.Status == TaskStatus.RanToCompletion;
                        @finally(isSuccess, token.IsCancellationRequested, successfullyCompleted);
                    },
                    CancellationToken.None,
                    TaskContinuationOptions.AttachedToParent, scheduler);
            }

            task.Start();

            return cts;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:52:58.667

我认为使用`AttachedToParent`非常笨拙。相反，您可以做的是`Task`通过更改`completition`为`Func<Task>`. 这样，您可以控制何时执行什么延续。

为此，您需要更改`onSuccess`为：

```
var onSuccess = task.ContinueWith(asyncPart =>
    {
        token.ThrowIfCancellationRequested();

        return completion();
    }, token, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler).Unwrap(); 
```

这也很可能意味着`ExecuteBlockingOperation()`需要返回`Task`执行的`@finally`，但我认为这不应该是一个问题。

# google-earth-plugin - 隐藏国家标签

> ID：15788766
> 
> 赞同：0
> 
> 时间：2013-04-03T13:31:31.660
> 
> 标签：google-earth-plugin

是否可以在 Google 地球插件中以“LAYER-BORDERS”层显示的标签不可见的方式“覆盖”一个国家/地区？

或者是否可以在“LAYER-BORDERS”层中“覆盖”某些标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T10:42:19.827

与此问题类似：[通过 KML 关闭国家边界](https://stackoverflow.com/questions/10503057/turning-off-country-borders-via-the-kml)，只需在 enableLayerById 调用中为不同的“子层”使用不同的 ID。

# javascript - javascript window.getSelection() 循环引用错误

> ID：15788789
> 
> 赞同：0
> 
> 时间：2013-04-03T13:32:21.883
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我正在开发 chrome 扩展。我正在使用`window.getSelection()`方法来更改所选文本的属性，但我想保存所选文本的 DOM，以便在再次访问该站点时扩展程序可以检索相同的文本。

保存`window.getSelection()`给出循环引用错误。有没有其他可能的方法？

# mysql - 使用if条件时mysql查询错误

> ID：15788790
> 
> 赞同：0
> 
> 时间：2013-04-03T13:32:22.477
> 
> 标签：mysql

```
 SELECT tu.begin_date, tm.MAGAZINE_ID,`MAGAZINE_NAME`, CASE WHEN ts.no_of_issues IS NULL THEN 1 ELSE ts.no_of_issues END AS Subscription_Type, 
 CASE WHEN 
   IF(tu.customer_currency = 'USD', 54 * tu.customer_currency) 
   ELSE IF(tu.customer_currency = 'CAD', 1.0250 * tu.customer_currency) 
   END AS sale_price_inr,
 tu.developer_proceeds as orginal_rate, tu.customer_currency as orginal_currency
 FROM `tbl_itunes_report` tu
 LEFT JOIN tbl_magazine_subscription ts ON ts.subscription_key = tu.sku_key
 LEFT JOIN tbl_magazine_issue ti ON ti.PurchaseKey = tu.sku_key AND ti.OS_SELECT = 0
 LEFT JOIN tbl_magazine tm ON tm.magazine_id = ts.magazine_id
 OR tm.magazine_id = ti.magazine_id
 WHERE `product_type_identifier` LIKE 'IA%'
 AND
 (
     ts.subscription_key IS NOT NULL
     OR ti.PurchaseKey IS NOT NULL
 )
 AND tu.begin_date >= '2012-04-01' AND tu.begin_date <= '2013-04-01' 
```

这是我的查询。但是我执行这个查询时遇到了一个错误

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') ELSE IF(tu.customer_currency = 'CAD', 1.0250 * tu.customer_currency) END A' at line 3 
```

如果有人知道这一点，请帮助我。我是新来的

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:35:58.190

改变

```
 ...
 CASE WHEN 
 IF(tu.customer_currency = 'USD', 54 * tu.customer_currency) 
 ELSE IF(tu.customer_currency = 'CAD', 1.0250 * tu.customer_currency) 
 END AS sale_price_inr
 ... 
```

到

```
...
CASE WHEN tu.customer_currency = 'USD' THEN 54 * tu.customer_currency
     WHEN tu.customer_currency = 'CAD' THEN 1.0250 * tu.customer_currency 
 END AS sale_price_inr
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:38:44.793

IF 语句和 IF 函数有不同的语法，您使用 IF 函数和 IF 语句的语法，请更改以下行

```
IF(tu.customer_currency = 'USD', 54 * tu.customer_currency) 
 ELSE IF(tu.customer_currency = 'CAD', 1.0250 * tu.customer_currency) 
```

到

```
CASE WHEN tu.customer_currency = 'USD' THEN 54 * tu.customer_currency
     WHEN tu.customer_currency = 'CAD' THEN 1.0250 * tu.customer_currency 
 END AS sale_price_inr 
```

或者

```
IF(tu.customer_currency = 'USD', 54 * tu.customer_currency, 1.0250 * tu.customer_currency) 
```

# path-finding - 寻路算法

> ID：15788791
> 
> 赞同：1
> 
> 时间：2013-04-03T13:32:24.643
> 
> 标签：path-finding, a-star

我正在做一个项目，其目标是找到一种成本更低的方式将 X 蚂蚁从 A 点发送到 B 点，但每次只有一只蚂蚁可以站在“中间平台”上——不要不知道用英语怎么说——除了 A 点和 B 点。

我已经研究过 A* 或 Dijkstra 等算法，但它们只关注从 A 点到 B 点的最短路径，在某些情况下，这不是最好的，因为你宁愿走 2 条更长的路径并一次发送更多的蚂蚁。

这就是我需要你的地方。你们知道这样的算法吗？

希望我的问题很清楚，并期待答案。谢谢。

编辑：这是 A* 不起作用的示例：

```
-L-M-N-O-P-S-T-U-V-W-X-Y-Z--|    Going from one letter
|                  |        |    to another costs 1 turn
H-----I-----J------K        |
|                  |        |
START--A-B-C-D-E-F-G-------END 
```

如果我有 17 只蚂蚁，最好的选择是一次向方向发送 2 只蚂蚁：

*   START-HIJKWXYZ-END
*   开始-ABCDEFG-结束

而不是所有在 START-HIJKG-END 中，因为 A* 建议作为最佳选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:35:27.930

您可以使用 A* 来解决您的问题您只需要动态调整地图以考虑蚂蚁的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-23T19:56:08.047

你可以使用floodfill。Floodfill 所做的是它跟踪每条可能的路径并确定最佳解决方案，但您可以定义“最佳”。例如，您可以创建一个通过递归跟踪时间的总时间变量。你可以做一个递归方法，只在到达B时返回时间变量，然后选择最短的值。

# facebook - Http_referrer 显示 Facebook 但我不在 Facebook

> ID：15788796
> 
> 赞同：6
> 
> 时间：2013-04-03T13:32:37.080
> 
> 标签：facebook, coldfusion

这是最奇怪的事情。我有非常简单的 CF 代码，可以查看 cgi.HTTP_REFERER。简单地说，它着眼于推荐人。如果该链接是从我们的主网站域之外单击的，它会显示一些内容。否则，什么都不会发生。因此，如果有人点击 FB 的链接并进入我们的网站，它会显示一些内容。如果有人点击了我们网站主页上的链接，它什么也不做。

有一个特定的链接，当从我们的主页单击时，会发生“做某事”。我写出了所有变量，http_referrer 显示[https://m.facebook.com](https://m.facebook.com)。当我点击链接时，我不在 Facebook 上。我没有在手机上。当我点击链接时，我正在我的主网站主页上。

现在，这是我能想象的唯一事情：

1.  我们有 facebook 评论那个故事页面。
2.  该 URL 已在 Facebook 上共享。

但是，我们在 Facebook 上分享我们所有的故事，他们都有 FB 评论，所以我想如果 FB 存储这些信息，我会在所有页面上遇到这个问题。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:41:25.967

和其他人一样，我的 user_agent、remote_addr 和 referer 都是不正确的。根据我使用的浏览器，我还会看到不同的 remote_addr 值。所以无论你在倾倒什么，它都不是*我*要求的 CGI 范围。

我怀疑您有一个处理 CGI 范围转储的函数，它位于持久范围内的 CFC 中，并且您在某处有一个 unVARed 变量？还是基于浏览器的页面缓存（可能在前端代理上？）以及缓存中的转储？

注意：在*Opera*和*Safari*上，我没有将 Facebook 作为推荐人。

# sql - SQL Azure - 一个会话锁定整个数据库以进行更新和插入

> ID：15788798
> 
> 赞同：10
> 
> 时间：2013-04-03T13:32:47.307
> 
> 标签：sql, sql-server, azure-sql-database

SQL Azure 问题。

我有一个问题，在我们的（asp.net）网站上表现为以下异常：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。

它还导致更新和插入语句永远不会在 SMSS 中完成。查询时不存在任何 X 或 IX 锁：查询或`sys.dm_tran_locks`时不存在事务。`sys.dm_tran_active_transactions``sys.dm_tran_database_transactions`

数据库中的每个表都存在问题，但同一实例上的其他数据库不会导致问题。问题的持续时间可以从 2 分钟到 2 小时不等，并且不会在一天中的任何特定时间发生。

数据库未满。

在某一时刻，这个问题并没有自行解决，但我能够通过查询`sys.dm_exec_connections`找到运行时间最长的会话，然后终止它来解决这个问题。奇怪的是，连接已经存在 15 分钟，但锁定问题已经存在超过 3 个小时。

还有什么我可以检查的吗？

**编辑**

根据下面保罗的回答。在他回答之前，我实际上已经找到了问题。我将在下面发布我用来解决这个问题的步骤，以防他们帮助其他人。

当存在“超时期限”时，将运行以下查询。

```
select *  from sys.dm_exec_requests 
```

![请求统计](https://i.stack.imgur.com/wzWlM.png)

正如我们所见，所有的 WAIT 请求都在等待会话 1021，这是复制请求！表示 DTC事务`TM Request`，我们不使用分布式事务。您还可以看到 wait_type`SE_REPL_COMMIT_ACK`再次暗示复制。

```
select * from  sys.dm_tran_locks 
```

![在此处输入图像描述](https://i.stack.imgur.com/AyBo2.png)

再次等待会话 1021

```
SELECT * FROM sys.dm_db_wait_stats ORDER BY wait_time_ms desc 
```

![在此处输入图像描述](https://i.stack.imgur.com/QZnKl.png)

是的，`SE_REPL_CATCHUP_THROTTLE`总等待时间为 8094034 毫秒，即 134.9 分钟！！！

有关此问题的详细信息，另请参阅以下论坛。 [http://social.technet.microsoft.com/Forums/en-US/ssdsgetstarted/thread/c3003a28-8beb-4860-85b2-03cf6d0312a8](http://social.technet.microsoft.com/Forums/en-US/ssdsgetstarted/thread/c3003a28-8beb-4860-85b2-03cf6d0312a8)

> 在与 Microsoft 的沟通中，我得到了以下答案（我们在欧盟数据中心的 15 个数据库中的 4 个数据库中发现了这个问题）：
> 
> 问题：在过去三周内（即自从我的问题开始后），这些软限制是否发生了变化？
> 
> 答：不，没有。
> 
> 问题：有什么方法可以防止或警告我们正在接近极限？
> 
> 答：不可以。问题可能不是由您的应用程序引起的，而可能是其他租户依赖相同的物理硬件引起的。换句话说，您的应用程序可能只有很少的负载，但仍然会遇到问题。换句话说，您自己的流量可能是导致此问题的原因，但也可能是由依赖相同物理硬件的其他租户引起的。没有办法事先知道问题很快就会发生——它可能随时发生而不会发出警告。SQL Azure 运营团队不会监控此类错误，因此他们不会自动尝试为您解决问题。因此，如果您遇到它，您有两种选择：
> 
> 1.  创建您的数据库的副本并使用它，并希望将数据库放置在负载较小的另一台服务器上。
>     
>     
> 2.  联系 Windows Azure 支持并告知问题并让他们为您执行选项 1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T11:21:31.710

您可能会遇到 SE_REPL* 问题，这些问题目前困扰着许多使用 Sql Azure（包括我的公司）的人。

当您遇到超时时，请尝试检查等待类型的等待请求：

*   SE_REPL_SLOW_SECONDARY_THROTTLE
*   SE_REPL_COMMIT_ACK

运行以下命令检查当前连接的等待类型：

```
SELECT TOP 10 r.session_id, r.plan_handle,
r.sql_handle, r.request_id,
r.start_time, r.status,
r.command, r.database_id,
r.user_id, r.wait_type,
r.wait_time, r.last_wait_type,
r.wait_resource, r.total_elapsed_time,
r.cpu_time, r.transaction_isolation_level,
r.row_count
FROM sys.dm_exec_requests r 
```

您还可以通过运行以下命令检查各种历史记录：

```
SELECT * FROM sys.dm_db_wait_stats
ORDER BY wait_time_ms desc 
```

如果您看到很多 SE_REPL* 等待类型，并且这些等待类型在您的连接上保持设置任何时间长度，那么基本上您就完蛋了。微软已经意识到了这个问题，但我现在已经向他们开了一个星期的支持票，他们显然仍在努力解决这个问题。

当 Sql Azure 复制从属落后时，会发生 SE_REPL* 等待。基本上整个数据库在复制赶上时暂停查询：/

所以本质上，使 Sql Azure 高度可用的方面是导致数据库随机变得不可用。如果它没有杀死我们，我会嘲笑这个讽刺。

看看这个线程的详细信息： [http ://social.technet.microsoft.com/Forums/en-US/ssdsgetstarted/thread/c3003a28-8beb-4860-85b2-03cf6d0312a8](http://social.technet.microsoft.com/Forums/en-US/ssdsgetstarted/thread/c3003a28-8beb-4860-85b2-03cf6d0312a8)

# lucene - 编制索引时，哪些因素会影响搜索时某个词的得分

> ID：15788800
> 
> 赞同：4
> 
> 时间：2013-04-03T13:32:58.597
> 
> 标签：lucene, scoring

这个问题有点令人困惑。我是 Lucene 的新手，正在浏览文档。我发现`adding boost to a field`, 增加了该领域的规范，因此在搜索时增加了该术语的分数。

IE 在索引时向字段添加提升会影响搜索时的分数。我的问题是，除了提升之外，还有其他方法可以做到这一点吗？请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:01:28.010

**在 Lucene 4.x 之前**，曾经有一个基于向量空间模型的单一评分公式。

以下是影响 Lucene 评分的因素。

**1) Tf**：词频，即一个词在文档中的频率。

**2) Idf** : 逆文档频率 : log(Collection Size / Number of documents that have term)” 这个公式可能会有所不同。

**3）Field Boost**：你提到的那个。它是在编制索引时提供的。

**4) Coord**：基于在指定文档中找到多少查询词的评分因子。

**5) queryNorm(q)**是一个标准化因子，用于使查询之间的分数具有可比性。这个因素不影响文档排名（因为所有排名的文档都乘以相同的因素），而只是试图使来自不同查询（甚至不同索引）的分数具有可比性

**6) norm(t,d)**封装了一些（索引时间）提升和长度因子：

a) 文档提升 - 通过在将文档添加到索引之前调用 doc.setBoost() 来设置。

b) 字段提升 - 通过在将字段添加到文档之前调用 field.setBoost() 来设置。

c) lengthNorm - 根据文档中该字段的标记数在将文档添加到索引时计算，因此较短的字段对分数的贡献更大。LengthNorm 由在索引时有效的 Similarity 类计算。

**7) 词条提升：**是查询 q 中词条 t 的搜索时间提升

深入了解 Lucene 的默认评分公式：查看文档：[Lucene Similarity](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html)

**随着 Lucene 4.x 的新版本，**引入了新的评分公式，如 BM25。更多详细信息，请查看[Lucene 4.2 Similarity的子类](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/search/similarities/Similarity.html)

您可以实现 Similarity 的子类来自**定义上述所有评分因素**。这是一个[例子......](http://blog.architexa.com/2010/12/custom-lucene-scoring/)

# c# - asp.net MVC 4 通过不同形式发布多个帖子

> ID：15788806
> 
> 赞同：26
> 
> 时间：2013-04-03T13:33:15.850
> 
> 标签：c#, asp.net-mvc, forms, http-post

现在我明白了

```
if (IsPost){   //do stuff } 
```

检查该页面上的所有发布方法。但是，我有 2 个不同的表格发布 2 个不同的信息。这些是登录表单和注册表单。

有没有办法可以根据哪种形式检查 IsPost？例如，

```
if(Login.IsPost){ //do stuff } 
```

但是我将如何定义登录变量？我的表格如下所示：

```
<form id="Login" method = "POST"> 
```

我试过了：

```
var Login = Form.["Login"] 
```

它不起作用。

我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-04T12:49:22.630

在 MVC 视图中，您可以拥有尽可能多的表单和所需的字段。为简单起见，请使用单个视图模型，该模型具有页面上每个表单所需的所有属性。请记住，您只能访问您提交的表单中的表单字段数据。因此，如果您在同一页面上有登录表单和注册表单，您可以这样做：

LoginRegisterViewModel.cs

```
public class LoginRegisterViewModel {
    public string LoginUsername { get; set; }
    public string LoginPassword { get; set; }

    public string RegisterUsername { get; set; }
    public string RegisterPassword { get; set; }
    public string RegisterFirstName { get; set; }
    public string RegisterLastName { get; set; }
} 
```

YourViewName.cshtml

```
@model LoginRegisterViewModel

@using (Html.BeginForm("Login", "Member", FormMethod.Post, new {})) {

    @Html.LabelFor(m => m.LoginUsername)
    @Html.TextBoxFor(m => m.LoginUsername)

    @Html.LabelFor(m => m.LoginPassword)
    @Html.TextBoxFor(m => m.LoginPassword)

    <input type='Submit' value='Login' />

}

@using (Html.BeginForm("Register", "Member", FormMethod.Post, new {})) {

    @Html.LabelFor(m => m.RegisterFirstName)
    @Html.TextBoxFor(m => m.RegisterFirstName)

    @Html.LabelFor(m => m.RegisterLastName)
    @Html.TextBoxFor(m => m.RegisterLastName)

    @Html.LabelFor(m => m.RegisterUsername)
    @Html.TextBoxFor(m => m.RegisterUsername)

    @Html.LabelFor(m => m.RegisterPassword)
    @Html.TextBoxFor(m => m.RegisterPassword)

    <input type='Submit' value='Register' /> 
```

}

成员控制器.cs

```
[HttpGet]
public ActionResult LoginRegister() {
     LoginRegisterViewModel model = new LoginRegisterViewModel();
     return view("LoginRegister", model);
}

[HttpPost]
public ActionResult Login(LoginRegisterViewModel model) {
 //do your login code here
}

[HttpPost]
public ActionResult Register(LoginRegisterViewModel model) {
 //do your registration code here
} 
```

* * *

不要忘记，在调用 BeginForm 时，您传递的控制器名称没有附加“控制器”：

```
@using (Html.BeginForm("Login", "Member", FormMethod.Post, new {})) 
```

代替：

```
@using (Html.BeginForm("Login", "MemberController", FormMethod.Post, new {})) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-06-11T07:53:47.037

我只是为每个需要的表单加载一个局部视图（包含一个表单），给每个局部一个不同的视图模型：

*   页面上的多表单要求：满足。
*   每个表单上的 Javascript 不显眼验证：已完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-07T14:55:22.160

我们可以在点击相应的提交按钮时进行 ajax 发布，而不是提交表单。

```
@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new { @Id = "Form1" }))
{

}

@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new { @Id = "Form2" }))
{

} 
```

为页面中的每个表单分配不同的 id 属性后，请使用如下代码：

```
$(document).ready( function() {
  var form = $('#Form1');

 $('#1stButton').click(function (event) {

    $.ajax( {
      type: "POST",
      url: form.attr( 'action' ),
      data: form.serialize(),
      success: function( response ) {
        console.log( response );
      }
    } );
  } );
} 
```

在第二个按钮单击事件上重复相同的操作以调用第二个表单的 ajax 发布。

此代码使用 .serialize() 从表单中提取相关数据。

为了将来参考，[jQuery 文档](http://docs.jquery.com/Ajax/serialize)非常非常好。

注意：您用来触发通过 ajax post 提交表单的事件的按钮不应该是**submit**类型！否则这将永远失败。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T13:35:12.343

您应该`<form>`使用自己的模型参数将每个点指向一个单独的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-13T13:31:27.803

使用此示例可防止在使用具有不同控制器操作的多个表单发布时进行不必要/意外的验证检查。

**要找什么**

*   本质上，此代码利用模型内部的布尔值来标记在表单发布中调用了哪个控制器操作。
*   注意我使用方法助手 IsActionLogin() 和 IsActionRegister() 设置的嵌套模型以及 [Is Action Login] 和 [Is Action Register] 布尔属性的使用。在相应的控制器动作中只会调用一个。
*   注意模型中的 sReturnURL 属性。此属性存储以前的导航 url，并与登录和注册控制器操作共享。这将允许我们返回到用户在必须登录之前离开的页面。

    * * *

    ```
    /* Begin Model logic */
    public class LoginRegisterModel
    {
        public LoginModel LoginModel { get; set; }
        public RegisterModel RegisterModel { get; set; }
        public string sReturnURL { get; set; }
        public bool bIsActionLogin { get; set; }
        public bool bIsActionRegister { get; set; }
        public void IsActionLogin()
        {
            bIsActionLogin = true;
            bIsActionRegister = false;
        }
        public void IsActionRegister()
        {
            bIsActionLogin = false;
            bIsActionRegister = true;
        }
    }

    public class LoginRegisterModel
    {
        public LoginModel LoginModel { get; set; }
        public RegisterModel RegisterModel { get; set; }
        public string sReturnURL { get; set; }
        public bool bIsActionLogin { get; set; }
        public bool bIsActionRegister { get; set; }
        public void IsActionLogin()
        {
            bIsActionLogin = true;
            bIsActionRegister = false;
        }
        public void IsActionRegister()
        {
            bIsActionLogin = false;
            bIsActionRegister = true;
        }
    }

    public class RegisterModel
    {
        [Required]
        [Display(Name = "Email")]
        [RegularExpression("^[a-zA-Z0-9_\\.-]+@([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,6}$", ErrorMessage = "Email is not valid.")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Confirm Password")]
        [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }
    }
        /*End Model logic*/

        /*Begin Controller Logic*/
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LoginRegisterModel model, string sReturnURL)
        {
            model.IsActionLogin(); //flags that you are using Login Action
            //process your login logic here
        }

        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Register(LoginRegisterModel model, string sReturnURL)
        {
            model.IsActionRegister(); //flag Action Register action
            //process your register logic here
        }
        /*End Controller Logic*/

    /*Begin View Logic*/
    @model eCommerce.Models.LoginRegisterModel
    @{  
        /*Place this view logic in both the Login.cshtml and Register.cshtml. Now use the last Action called as a Boolean check against your validation messages, so unnecessary validation messages don't show up.*/
        bool bLoginCallBack = Model.bIsActionLogin; 
        bool bRegisterCallBack = Model.bIsActionRegister;
        MvcHtmlString htmlIcoWarn = new MvcHtmlString(" font awesome icon here ");
        MvcHtmlString htmlIcoHand = new MvcHtmlString(" font awesome icon here ");
    }

        @using (Html.BeginForm("Login", "Account", new { sReturnURL = Model.sReturnURL }))
        {
            @Html.AntiForgeryToken()
            if (bLoginCallBack)
            {
                MvcHtmlString htmlLoginSummary = Html.ValidationSummary(true);
                if (!htmlLoginSummary.ToHtmlString().Contains("display:none"))
                {
                @:@(htmlIcoWarn)@(htmlLoginSummary)
                }
            }
            @Html.LabelFor(m => m.LoginModel.UserName)
            @Html.TextBoxFor(m => m.LoginModel.UserName, new { @placeholder = "Email" })
        @if (bLoginCallBack)
        {
            MvcHtmlString htmlLoginUsername = Html.ValidationMessageFor(m => m.LoginModel.UserName);
            if (!htmlLoginUsername.ToHtmlString().Contains("field-validation-valid"))
            {
            @:@(htmlIcoHand) @(htmlLoginUsername)
            }
        }
            @Html.LabelFor(m => m.LoginModel.Password)
            @Html.PasswordFor(m => m.LoginModel.Password, new { @placeholder = "Password" })
        @if (bLoginCallBack)
        {
            MvcHtmlString htmlLoginPassword = Html.ValidationMessageFor(m => m.LoginModel.Password);
            if (!htmlLoginPassword.ToHtmlString().Contains("field-validation-valid"))
            {
            @:@(htmlIcoHand) @(htmlLoginPassword)
            }
        }
                @Html.CheckBoxFor(m => m.LoginModel.RememberMe)
                @Html.LabelFor(m => m.LoginModel.RememberMe)
            <button type="submit" class="btn btn-default">Login</button>
        }
    @using (Html.BeginForm("Register", "Account", new { sReturnURL = Model.sReturnURL }))
    {
        @Html.AntiForgeryToken()

        if (bRegisterCallBack)
        {
            MvcHtmlString htmlRegisterSummary = Html.ValidationSummary(true);
            if (!htmlRegisterSummary.ToHtmlString().Contains("display:none"))
            {
                @:@(htmlIcoWarn)@(htmlRegisterSummary)
            }
        }
            @Html.LabelFor(m => m.RegisterModel.UserName)
            @Html.TextBoxFor(m => m.RegisterModel.UserName, new { @placeholder = "Email" })
        @if (bRegisterCallBack)
        {
            MvcHtmlString htmlRegisterUsername = Html.ValidationMessageFor(m => m.RegisterModel.UserName);
            if (!htmlRegisterUsername.ToHtmlString().Contains("field-validation-valid"))
            {
            @:@(htmlIcoHand) @(htmlRegisterUsername)
            }
        }
            @Html.LabelFor(m => m.RegisterModel.Password)
            @Html.PasswordFor(m => m.RegisterModel.Password, new { @placeholder = "Password" })
        @if (bRegisterCallBack)
        {
            MvcHtmlString htmlRegisterPassword = Html.ValidationMessageFor(m => m.RegisterModel.Password);
            if (!htmlRegisterPassword.ToHtmlString().Contains("field-validation-valid"))
            {
            @:@(htmlIcoHand) @(htmlRegisterPassword)
            }
        }
            @Html.LabelFor(m => m.RegisterModel.ConfirmPassword)        @Html.PasswordFor(m => m.RegisterModel.ConfirmPassword, new { @placeholder = "Confirm Password" })                
        @if (bRegisterCallBack)
        {
            MvcHtmlString htmlRegisterConfirmPassword = Html.ValidationMessageFor(m => m.RegisterModel.ConfirmPassword);
            if (!htmlRegisterConfirmPassword.ToHtmlString().Contains("field-validation-valid"))
            {
            @:@(htmlIcoHand) @(htmlRegisterConfirmPassword)
            }
            <button type="submit" class="btn btn-default">Signup</button>
        }
    }
    /*End View Logic*/ 
    ```

# asp.net-mvc - MVC 4 实体框架 Web 配置

> ID：15788811
> 
> 赞同：0
> 
> 时间：2013-04-03T13:33:31.367
> 
> 标签：asp.net-mvc, entity-framework, iis, web-config

我有一个连接到我们的 SQL Server 2008 企业的应用程序。

我的配置文件包含：

```
name="patbase" connectionString="Data Source=pbsqlserver1;Initial Catalog=patentbase;Trusted_Connection=True;;Application Name=PatBase Images;" providerName="System.Data.SqlClient" 
```

当我从我的电脑上测试它时，它可以工作。

当我将它发布到（内部）服务器时，我可以看到我的用户已经登录到了 asp.net，但是数据库访问给了我：

> 从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:56:44.267

您的连接字符串正在使用“受信任的连接”，这意味着在 SQL 登录尝试中使用了客户端进程/线程的身份。您说您的用户已登录到 ASP.NET 应用程序，但是您的应用程序运行在其中的应用程序池的标识是什么？

您没有说您的应用程序使用哪种身份验证，但我将假设 Windows 身份验证。如果您希望最终用户的帐户用于 SQL 登录，则需要为您的应用启用 ASP.NET 模拟。您可以在 IIS 管理器中的“身份验证”下执行此操作，或者在您的 web.config 中使用`<identity impersonate="true" />`

如果您不关心 SQL 登录尝试使用哪个身份，您可以为应用程序池的身份创建 SQL 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:52:18.697

尝试查看 SSPI 安全性是否有效

```
<connectionStrings>
<add name="patbase" connectionString="Data Source=pbsqlserver1;Initial Catalog=patentbase;Integrated Security=SSPI;;Application Name=PatBase Images" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

或删除 ;;Application Name=PatBase 图像，如果这不起作用。

# node.js - 防止 RequireJS 在 Nodejs 上缓存所需的脚本

> ID：15788812
> 
> 赞同：3
> 
> 时间：2013-04-03T13:33:33.717
> 
> 标签：node.js, caching, requirejs

我正在使用类似[airbnb 的rendr 之](https://github.com/airbnb/rendr)类的东西，即[我自己在客户端和服务器之间共享主干代码的实现](http://www.slideshare.net/stephanfortelny/backbone-pipedream-final)，以使用我在客户端上使用的相同主干模型、视图、集合和模板在服务器上构建完整的HTML。我的文件/模块被定义为 requirejs 模块，这样我就可以在客户端轻松共享它们。在开发模式下，我希望 requirejs 在刷新浏览器时从磁盘重新获取/重新加载任何模块（无需重新启动服务器），因此我的服务器渲染使用最新的模板和 javascript 最终为我提供最新的 HTML。

当使用 nodejs 在服务器上使用 requirejs 时，像下面这样将[*bust*](https://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts)[参数](https://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts)[附加到 urlArgs 的技巧](https://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts)*不起作用，即服务器不会从磁盘重新加载/重新获取任何模块*

 *```
urlArgs: "bust=v2" 
```

我想知道，是否可以在节点中从磁盘空间重新加载/重新获取 requirejs 模块而不重新启动服务器？具体来说，这对于模板[的 require-text 插件](https://github.com/requirejs/text)非常有用。此外，最好只对一组受限的模块应用重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:49:36.907

我从来没有这样做过，但是快速搜索会显示[一些选项](https://stackoverflow.com/q/1972242/706561)，包括自动重启服务器：

*   [节点监视器](https://github.com/remy/nodemon)
*   [节点主管](https://github.com/isaacs/node-supervisor)

你也可以做一些与此类似的创意：

*   `delete require.cache['/home/shimin/test2.js']`

您几乎可以肯定地清除 RequireJS 在缓存中的版本，强制它重新加载它，尽管我怀疑节点会再次提供旧文件。

最后，也许看看*hot-reloading*，它似乎可以绕过缓存而无需重新启动服务器（[示例](https://github.com/shimondoodkin/node-hot-reload)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T03:02:47.330

与 OP 一样，我一直在寻找一种方法，使使用 RequireJS 的节点开发更容易、更快。就我而言，我`watch`在节点中使用 RequireJS 和一个 grunt 任务，并且希望能够强制 RequireJS 始终从文件系统获取最新版本的模块。很高兴，我找到了一个非常[简单的解决方案](https://groups.google.com/d/msg/requirejs/ir3e5SF3ea0/hFvUMfJ571wJ)！

我不得不通过添加超时稍微修改 Henning Kvinnesland 的建议，但现在它就像一个魅力：

```
var requirejs = require('requirejs');
// Set up requirejs.config here...
// Disable caching of modules
requirejs.onResourceLoad = function(context, map) {
    setTimeout(function() {
        requirejs.undef(map.name);
    }, 1);
}; 
```*

# java - 传输方案未识别：[amqp]

> ID：15788819
> 
> 赞同：5
> 
> 时间：2013-04-03T13:33:46.007
> 
> 标签：java, activemq, amqp

我正在尝试将 AMQP 与 ActiveMQ 一起使用，但出现以下错误

```
Transport scheme NOT recognized: [amqp] 
```

这是我的代码

```
ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(
        "amqp://localhost:61616");

Connection connection = null;
try {
    connection = connectionFactory.createConnection();
    connection.start();

    Session session = connection.createSession(false,
            Session.AUTO_ACKNOWLEDGE);

    Queue queue = session.createQueue("somequeue");

    MessageProducer producer = session.createProducer(queue);

    // We will send a small text message saying 'Hello'
    TextMessage message = session.createTextMessage();
    message.setText("Publishing : New Message ");
    producer.send(message);

    connection.close();
} catch (Exception e) {

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T13:58:44.690

请注意，ActiveMQ 中的 AMQP 仅在服务器中实现，而不在 JMS 客户端中实现。JMS 客户端实际上实现了“默认”OpenWire 协议（以及 JVM 内部传输）。

您应该使用其他一些客户端库来使用 AMQP 与 ActiveMQ 通信，例如[ActiveMQ 推荐的](http://activemq.apache.org/amqp.html#AMQP-AMQP1.0clientlibrary)Apache [QPID](http://qpid.apache.org/proton/)。

# c# - 将 C# 对象传递给 JScript

> ID：15788820
> 
> 赞同：1
> 
> 时间：2013-04-03T13:33:46.373
> 
> 标签：c#, jscript

我有这个工作：

```
Microsoft.JScript.Vsa.VsaEngine engine = Microsoft.JScript.Vsa.VsaEngine.CreateEngine();
string js = "15+10";
var result = Microsoft.JScript.Eval.JScriptEvaluate(js, engine); 
```

现在我想从 C# 传递一些对象。可能吗？

任何帮助表示赞赏。

# django - Django 导入模型错误

> ID：15788821
> 
> 赞同：0
> 
> 时间：2013-04-03T13:33:47.710
> 
> 标签：django, python-2.7

我在我的项目文件夹中创建了一个应用程序，位于 manage.py 所在的同一目录中。我还为我的应用程序创建了模型，当我将它导入到导入轮询之类的 python shell 中时，它会出现此错误：

```
ImportError: No module named poll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:36:14.620

假设您的应用名称是“App”，您必须输入：

```
from App.models import Poll 
```

为了成功导入您的投票模型。更改`App`为您当前的应用程序名称

另外，要记住两件事

1)`Poll`不同于`poll`：检查您的大小写是否与您的模型定义一致

2）您应该已经使用[django startapp](https://docs.djangoproject.com/en/dev/ref/django-admin/#startapp-appname-destination)命令创建了应用程序。如果没有，至少确保您的文件夹中有一个空`init.py`文件`App`。

# c - 有没有办法从我可能/可能无法控制的特定模块捕获任何特定函数调用？

> ID：15788822
> 
> 赞同：0
> 
> 时间：2013-04-03T13:33:48.430
> 
> 标签：c, function, overriding, shared-libraries, system-calls

假设我有一个 DLL，其中包含`stdlib.h`并分配一些内存`malloc`，然后使用`free`. 我的主应用程序是否可以定义一个`malloc`函数和一个`free`函数，以便 DLL`malloc`和`free`调用导致我的主应用程序`malloc`和`free`函数被调用？

如果我要捕获的这些函数不是系统调用，并且如果我可以控制我的模块，我会[采用这个线程中的方法](https://stackoverflow.com/questions/617554/override-a-function-call-in-c)。

我正在尝试开发一个与某些模块链接的应用程序。我不希望我的主应用程序本身受到任何模块中未定义行为的影响。假设我可以识别需要捕获的功能（如内存分配/释放），是否可以便携地做这样的事情？

我目前在运行 Visual Studio 2010 的 Windows 中工作。

# html - 带有淡出边缘/边框的框

> ID：15788825
> 
> 赞同：3
> 
> 时间：2013-04-03T13:33:58.553
> 
> 标签：html, css

我正在尝试创建一个在其两侧和顶部具有“突出显示”的盒子。

盒子的 CSS 非常简单，但是，现在我在设计中引入了这个“亮点”，它给 CSS 添加了另一个级别的复杂性......

我已经尝试了很多东西，不确定它们是否会有所帮助，但这是我最近的：

```
/* Define the Main Navigation Drop Downs */
#mn_navigation .dd {position:relative;width:226px;padding:29px 0 0;background:transparent url("//beta.example.co.uk/_images/_global/dd_handle.png") no-repeat;z-index:1000;}
#mn_navigation .dd nav {padding:30px 0;background:#3E5032 url("//beta.example.co.uk/_images/_global/dd_bg.png");border-radius:3px;}
#mn_navigation .dd nav a {font-family:Arial, Helvetica, sans-serif;font-size:12px;color:#fff !important;height:25px;line-height:25px;} 
```

***请注意，我已经发布了上面的内容，以表明我实际上已经尝试过自己对此进行排序。上面的代码可能甚至没有帮助作为起点，因为可能需要重组 HTML！***

这是当前的 HTML（可能需要重组）：

```
<div id="dd_foo" class="dd">
    <nav>
        <a href="//beta.example.co.uk/menu/" title="LINK TITLE">LINK</a>
    </nav>
</div> 
```

这是一个可能的重组（类似）：

```
<div id="dd_foo" class="dd">
    <div class="handle"><!-- Dropdown Handle --></div>
    <nav>
        <a href="//beta.example.co.uk/menu/" title="LINK TITLE">LINK</a>
    </nav>
</div> 
```

这就是我需要盒子看起来的样子（注意顶部和两侧中间的微弱白色边框）：

***我还将盒子分成了单独的元素（手柄和背景）***

![下拉框](https://i.stack.imgur.com/dvrPu.png)

我想我可以看到如何通过巧妙的重叠和嵌套 div 来完成此操作，但理想情况下，我真的不想诉诸于此……有人可以提出替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:04:56.207

### 最简单的方法

您可以尝试使用简单的盒子阴影来实现这一点：

```
.plaque {
    box-shadow: inset 0 1px 1px 0 rgba(255, 255, 255, 0.32);

    /*...*/
} 
```

### 一个例子

这是一个在 jsbin 上[使用 1 个类和一个 div的示例。](http://jsbin.com/egoxaq/2/edit)

### 复制粘贴代码

此代码仅适用于现代浏览器；它可能会导致 ie < 9 和其他不支持的浏览器爆炸。

```
.plaque:after {
  top: -9px;
  content: " ";
  height: 11px;
  width: 30px;
  position: absolute;
  pointer-events: none;
  left: 50%;
  margin-left: -15px;
  display: block;
  background-repeat: no-repeat;
}

.plaque {
  width: 250px;
  height: 100px;
  display: block;
  border: 0;
  outline: 0;
  padding: 12px 16px;
  line-height: 1.4;
  box-shadow: inset 0 1px 1px 0 rgba(255, 255, 255, 0.32);
  border-radius: 5px;
  border: 1px solid transparent;
  font-family: sans-serif;
  color: white;
  font-size: 1.2em;
  text-overflow: ellipsis;
  position: relative;
  top: 6px;
}

/* Use whatever background you want */
.plaque { background-color: green; }

.plaque:after { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAALCAYAAACZIGYHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcJJREFUeNqMUktPU0EU/mZuL6Up1RCjC4oRau4t4FJ84EKID/ZAjI9/6Mo/4MadG5dqJGjBatpyuY+2UNreeXDOBE0MNHGSSWZyzvnOd77zicdbd+EVJKyxGPSHmC4XIYSAMQYCoJhn81wJKSnHWhR8D1oZl69yhamiD8GBSefpywc2XKzjy7fP+PDuk5iUJxnksvvkxX1buxkgThOEt5exvr1qJ+XKy5CfvXpow9oSsn6GdqeF40EPK+GKY/ZfTNa3Vm1AI6TdFAeNfQgp0CKgrJehVg1AGl5gJLTWfxGfv15zI3BBnB5CehJGG5Cw8EjY6tw8KjNXsfv9K96//SguMOERgoU6+ic9NH8eQClNGzDQBMLb4FU1fzdxFB+hev0WNnbu2X802TxnkGQJoriNymwZHrFgAbhdidbOK+YTxR0ojLEc3sHmm0dOI8Gq10n9OI1xGLVcMvuGGYyHOYqlKcfK9wvOF3/i12ZvoFK+gsavPUgGSLsJkm4En4xDTqMi45iUZqZdd34zJY7L8was2enoGMHCEmS3l6LxYx9qrJ2I7FTNelBxPlKuYDgYu9nzUe6cenoygqF/J2o7AmcCDACumSjtgWp8aAAAAABJRU5ErkJggg==); } 
```

# namespaces - 如何以编程方式从带有附件的 Windows Phone 发送邮件？

> ID：15788826
> 
> 赞同：4
> 
> 时间：2013-04-03T13:34:00.930
> 
> 标签：namespaces, gmail, windows-phone-8

我想从我的模拟器发送一封带有附件的邮件。但是在一些文章中我看到它使用了`system.web.dll`命名空间。我没有那个命名空间。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:53:52.693

看起来 WP8 没有内置的方法可以做到这一点。一个快速的谷歌搜索想出了[MailMessage](http://www.geekchamp.com/articles/send-email-with-attachments-without-using-emailcomposetask-with-mailmessage)。来自文章：

> MailMessage 是一个很棒的组件，它填补了 WP7/8 SDK 上的一个大漏洞，您现在终于可以在不使用 EmailComposeTask 的情况下从您的应用程序发送带有附件的无人值守电子邮件，并且您可以附加任何类型的文件（pdf、mp3、wav、mp4、avi , bmp, txt, zip, jpg, png...)。

这是一个[下载链接](http://www.geekchamp.com/marketplace/components/livemailmessage)。它不是免费的，但有免费试用版。

# asp.net - 从 jQuery AJAX 调用动态填充 ASP.NET Gridview

> ID：15788827
> 
> 赞同：2
> 
> 时间：2013-04-03T13:34:02.727
> 
> 标签：asp.net, vb.net

错误：

```
cannot refer to an instance member of a class within a shared method 
```

我正在开发一个 Web 应用程序，该应用程序从后端的 MSSQL 服务器中提取数据。从 ajax 调用我的 web 方法不是问题，它会在收到数据后显示数据。

我的报告页面上有以下网格视图：

```
<asp:GridView ID="gridReport" runat="server"></asp:GridView> 
```

从数据库中提取数据的 Web 方法称为 DBManager.asmx，它的声明如下（每次更改下拉菜单时都会通过 ajax 调用）：

```
<WebMethod()> _
Public Function GetSpecificReport(ByVal strFilter As String) As String() 
```

（它不是报告页面的代码隐藏文件）从 DB 返回的数据当前位于 DataSet（变量名：ds）中。

有什么方法可以将该`DataSource`GridView 分配给从 .asmx 文件中提取的 DataSet，或者我可以尝试一个很好的解决方法？我尝试在代码隐藏报告页面中创建共享方法，但没有成功，并将 GetSpecificReport 方法放在代码隐藏中。

感谢您的帮助，让我知道是否应该提供更多信息或发布更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T13:15:18.210

我会提供3个建议：

首先，使用像 Telerik grid 这样的东西，它允许您从 webmethod 返回 JSON 并直接绑定到该 json： [http ://www.telerik.com/products/aspnet-ajax/grid.aspx](http://www.telerik.com/products/aspnet-ajax/grid.aspx)

也就是说，我做了一个小例子，你可以在你的 web 方法中渲染一个 gridview 并重新发出 HTML。

您也可以使用 RenderControl 在 HTML 中绘制表格：

这是一个简化的示例，它使用 jquery.ajax 重新绘制控件而没有任何 updatepanel 等。不过 Updatepanel 可能效果更好！

ASPX：

```
 <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="TymeJVTest._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>

        function blag() {
            var gridID = "<%= GridView1.ClientID %>";
            $.ajax({
                type: "POST",
                data: {},
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                async: true,
                url: "Default.aspx/GetSomeData",
                success: function (data) {
                    //not sure why this is data.d , but what the hey
                    var theHtml = data.d;
                    $("#" + gridID).html(theHtml);
                },
                failure: function () {
                    alert("Sorry,there is a error!");
                }
            });               
        }
    </script>
    <h2>
        Welcome to ASP.NET!
    </h2>
    <p>
        To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>
    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>
    <a href="#"onclick="blag();" >Test</a>
</asp:Content> 
```

CS：

```
 public partial class _Default : System.Web.UI.Page
    {        
        protected void Page_Load(object sender, EventArgs e)
        {

            int[] theObject = {1, 2, 3, 4};

            GridView1.DataSource = theObject;
            GridView1.DataBind();
        }

        [WebMethod]
        public static String GetSomeData()
        {
            GridView gv = new GridView();
            System.IO.StringWriter stringWriter = new System.IO.StringWriter();
            HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);
            int[] someNewData = {10, 11, 12, 13, 14};
            gv.DataSource = someNewData;
            gv.DataBind();

            gv.RenderControl(htmlWriter);
            return stringWriter.ToString();
        }
    } 
```

这将在服务器上创建一个替换 gridview，将其呈现为 html，然后将其传输回来。

你也可以使用 AngularJS 之类的东西，只保留一段你的服务器更新的 JSON，并使用它来实时绑定到 Angular 的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:01:38.153

我认为您可以使用更新面板来实现您想要的，而无需进行太多更改。

[http://msdn.microsoft.com/en-gb/library/bb399001.aspx](http://msdn.microsoft.com/en-gb/library/bb399001.aspx)

基本上在页面加载或任何适合您的情况下填充您的网格，然后使用更新面板进行刷新。

# java - 清除并重用 Canvas，还是创建新对象？

> ID：15788828
> 
> 赞同：0
> 
> 时间：2013-04-03T13:34:08.570
> 
> 标签：java, gwt, java-canvas

我的设置：

我有一个`GWT Canvas`显示一些依赖于繁重算法的图形。对象是可拖动的，因此在拖动时，我将拖动对象旁边的所有内容保存在临时画布上，并将其作为拖动上下文后面的图像重用。

我的问题：我的拖动画布是一个重用的 Canvas 对象，在开始拖动之前必须先清除它，然后再将静态上下文保存到它。我想知道“重用和清除”是否比“创建新的画布对象”更好。

你怎么看？

每次都清除画布：

```
private Canvas canvas;
void buffer() {
   canvas.getContext2d().clearRect(0, 0, Window.getClientWidth(), Window.getClientHeight());
   //...draw
} 
```

...或创建新对象：

```
void buffer() {
   Canvas canvas = Canvas.createIfSupported();
   //draw
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:06:31.413

“重用和清除”更胜一筹。它更有效，因为它只调用 native `clearRect(x, y, w, h)`。在添加和删除小部件期间会触发许多事件。只有当它是一个逻辑概念时，我才会使用一个新对象。您可能还想考虑[Lienzo](http://emitrom.com/lienzo)。

# svn - 另一个 svn:externals 中的 svn:externals 问题

> ID：15788837
> 
> 赞同：0
> 
> 时间：2013-04-03T13:34:28.667
> 
> 标签：svn, svn-externals

我在检查 svn 存储库中的标记版本时遇到了一些麻烦，很可能是因为内部的 'svn:externals' 没有引用正确的修订版。让我们考虑简化的情况：

### 我有第一个 svn 存储库，它在 XXX1 修订版中看起来像这样：

```
Repo1 (@ Rev XXX1)
  tags
    ...
  trunk
    Folder1
      ExternalRefToFolder2 (svn:externals '../Folder2')
    Folder2
      SomeFile1.txt
      SomeFile2.txt 
```

### 并且已被重构为（在头部修订时）：

```
Repo1 (@ HEAD1)
  tags
    ...
  trunk
    Folder1
      SomeFile1.txt
      SomeFile2.txt 
```

IE：无论好坏，外部引用`Folder2`已被删除并替换为修订`XXX1`和`HEAD1`.

### 我在同一台服务器上还有第二个存储库，如下所示：

```
Repo2 (@ HEAD2) 
  tags
    1.0.0
      ExternalToRepo1 (svn:externals -rXXX1 ^/../Repo1/trunk)
  trunk
    ExternalToRepo1 (svn:externals ^/../Repo1/trunk) 
```

IE：同样，无论好坏，第二个存储库使用外部引用引用第一个存储库（标记版本`HEAD1`中的修订`trunk`和修订`XXX1`，以便将所有内容冻结在正确的修订中）。

### 问题

*   当我签出`trunk`of 时`Repo2`，我没有问题。那是`Repo1`用它的单检出的`Folder1`。

*   当我检查 的标签`1.0.0`时，svn 抱怨它在修订`Repo2`时找不到。`http://server//Repo1//trunk//Folder2``HEAD1`

因此，即使标签在其正确的修订版`1.0.0`中引用，它看起来也是如此；内部**外部**被解释为好像基于（而不是我所期望的修订）。`Repo1/trunk``XXX1`**`svn:externals '../Folder2'``HEAD1``XXX1`**

 **这种行为是否正常，我该如何解决这个问题？

注意：我拥有的 Svn 版本是 2012 年 12 月 12 日编译的 1.7.8 (r1419671)

# 编辑

重现问题的另一种方法是签出或简单地浏览`Repo1`revision `XXX1`。`svn:externals '../Folder2'`然后仍然是相对的，`HEAD1`所以猜测没有太多解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-11T01:16:15.990

乍一看，它看起来有点奇怪，但接下来你会发现它按预期工作。

SVN 为特定的提交集分配修订号，该提交集不仅可以包含更改，还可以包含通过 svn 副本创建的目录、文件、属性和链接（所谓的标签或分支）的添加或删除。SVN 并没有真正复制来自文件系统的目录，而是将其内容链接到一个新目录。当所有链接（原始目录和复制目录）都被删除时，内容会在 SVN 历史的深处“暂停”（但实际上并未删除）。您可以随时更新到最后一个修订版已包含该目录的最后链接内容。

外部就像您可以设置到外部存储库的链接，但与始终由同一存储库维护的链接相反，外部内容实际上不能“暂停”，因为它是从另一端控制的，来自包含外部内容的存储库. 换句话说，存储库包含一个外部链接，并且存储库存储了一个内容，因为它可以维护完全不同的地址并位于不同的机器上。

这就是为什么在您必须为外部设置正确的修订号时会发生什么样的错误，否则外部链接将采用最后一个，即 HEAD。当内容已经不存在时，您的 ExternalRefToFolder2 会进行头部修订。明确设置外部修订版或使用 svn copy。

但请记住，svn copy 创建链接但有它自己的内容历史。这意味着对链接到修订版 Folder2 的所有提交都不会通过链接到修订版 ExternalRefToFolder2/Folder2 更改内容，反之亦然。

所以嵌套链接和外部的工作方式相同。这只是另一个级别的参考。您必须为所有外部设置（并提交相关属性）特定修订，以便从根获取确切的目录树结构/内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:47:01.563

用作`svn:externals`穷人的依赖管理或代码重复避免方案是您的麻烦之源。嵌套它们并不是双重的坏事，它是乘法的。我推荐这个[关于外部不良的优秀长答案](https://stackoverflow.com/a/345404/505191)

使用内部的东西你永远不会有很好的结果`svn:externals`，但是如果你继续使用它们，你可以通过以下方式减轻痛苦：

1.  听从[红皮书](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)的建议，永远不要在头脑中进行外部拉动：

> 您应该认真考虑在所有外部定义中使用明确的修订号。这样做意味着您可以决定何时提取不同的外部信息快照，以及准确提取哪个快照。除了避免对您可能无法控制的第三方存储库进行更改而感到意外之外，使用明确的修订号还意味着当您将工作副本回溯到以前的修订时，您的外部定义也将恢复到它们的外观在之前的版本中，这反过来意味着外部工作副本将被更新以匹配它们在您的存储库处于之前的版本时回顾的方式。对于软件项目，这可能是复杂代码库旧快照构建成功和失败之间的区别。

2.  如果您不执行上述操作，请使用[svncopy.pl](http://svn.apache.org/repos/asf/subversion/trunk/contrib/client-side/svncopy/svncopy.pl.in)创建您的标签。当您创建标签时，它将“固定”您的外部版本的修订。

您没有提到为什么您有多个存储库 - 您是否有可能从整合中受益？
您没有提到您使用的语言/工具。我很确定有更好的方法可以满足您的要求。例如，如果它是一个带有一些库的 Java 应用程序，您通过外部引入 - 如果您单独构建库并使用类似 maven 的物质发布它们，然后在构建应用程序时解决它们，您会更开心。**

# gwt - 查找现场运行的 GWT 版本

> ID：15788839
> 
> 赞同：2
> 
> 时间：2013-04-03T13:34:29.627
> 
> 标签：gwt, version

是否可以向站点发送 javascript 命令并确定浏览器中运行的 GWT 版本？我问的原因是因为我们的 QA 人员正在认证我们的软件，并且需要一种方法来查看正在运行的版本，而无需通过查看 IDE 来相信我们的话。

我知道我可以做到`java -jar gwt-dev.jar`，但通常我们不会用软件部署它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T13:50:46.313

内置 GWT 链接器在文件中生成一个`$gwt_version`变量。`*.cache.*`

假设您的应用程序中没有其他框架，您的 GWT 应用程序将位于第一个框架中，因此您可以获取用于编译它的 GWT 版本`frames[0].$gwt_version`。

# c - 数组到变量

> ID：15788842
> 
> 赞同：0
> 
> 时间：2013-04-03T13:34:32.853
> 
> 标签：c, arrays, type-conversion

我有一个我正在分析的 C 代码，并且有这样的东西：

```
variable = (unsigned long)rx; 
```

如果`rx`是一个十六进制数的数组并且变量是`unsigned long`，那么变量将持有什么？`unsigned long`格式中的第一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:38:09.847

请记住，数组衰减为指针。所以将会发生的事情是强制转换会将指针（即内存地址）转换为 an`unsigned long`并将其分配给`variable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:50:23.803

由于只要您使用数组的名称，[数组就会衰减为指针](https://stackoverflow.com/questions/1461432/what-is-array-decaying#)，并且不尊重它，您将获得一个地址。

因此：

```
variable = (unsigned long)rx; 
```

将分配`rx[]`的地址`variable`作为一个无符号长值。而这：

```
variable = (unsigned long)*rx; 
```

或这个：

```
variable = (unsigned long)rx[0]; 
```

会给你第一个元素的值`rx[]`（注意语法`rx[0]`基本上是说取基地址`rx`+`0`偏移量，取消引用并返回结果）

# android - 如何限制对我的安卓设备上文件的访问？

> ID：15788843
> 
> 赞同：0
> 
> 时间：2013-04-03T13:34:35.093
> 
> 标签：android, encryption, android-file

想法是这样的。

我的应用程序允许用户从社交网络听音乐和观看视频。用户可以将这些文件保存在缓存中，以便能够离线播放它们。此数据保存到 SD 卡，可以通过文件管理器等访问

我想将这些文件的访问权限限制为其他应用程序。最明显的解决方案是数据加密。

您能否向我推荐一些用于快速文件加密/解密的库或框架？在加载过程中“动态”加密文件是非常可取的。

这个过程会不会太慢和资源密集？

可能存在其他一些方式 - SD 文件系统中的受保护文件夹或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:40:34.090

是的，有一种更*标准*的方法可以做到这一点。

通过使用[`openFileInput`](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)on your`Context`并设置[`MODE_PRIVATE`](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)标志，您将能够在应用程序中创建文件甚至文件夹。*此外，这些资源对您的*应用程序来说是完全私有的。

**编辑 ：**

大多数情况下，这些文件将存储在`/data/data/<app_package_name>/files`. 也就是说，大部分时间都在手机内存上，尽管这是特定于实现的。

关于*@Carlos*提到文件垃圾邮件的评论，是的，您可以用多个文件淹没 NAND，但`/data`在大多数情况下会安装在专用分区上。所以你会在某个时候达到分区的虚拟大小。请看[这篇文章](https://stackoverflow.com/questions/9198440/is-there-a-maximum-size-to-android-internal-storage-allocated-for-an-app)，接受的答案提供了更多关于这个的细节。简而言之，这是*特定于实现*的（取决于制造商）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:40:42.790

如果您想继续使用外部存储，您唯一的选择是使用加密。[SpongyCastle](http://rtyley.github.com/spongycastle/)可以提供帮助。它是 BouncyCastle API 的 android 版本。

除此之外，您可以将文件移动到内部存储，这在您的情况下可能不可行，因为媒体文件往往很大，并且大多数设备上的内部存储非常有限。即使您确实将它们移动到内部存储，任何 root 用户都可以访问它们（或任何具有 root 权限的应用程序）。

保护文件夹不是一种选择，因为任何有权访问外部存储的应用程序都可以使用外部存储上的任何内容。你对此无能为力。

# c# - 默认方法参数

> ID：15788850
> 
> 赞同：-6
> 
> 时间：2013-04-03T13:34:48.613
> 
> 标签：c#

如何在不更改构造函数的情况下创建具有重载概念的方法？

我想使用带参数的线程，但我不确定是否需要放置参数表，因为有时我不需要让方法带参数。再次创建一个带参数的方法，但它不是必须提供参数，我不想使用重载概念。

```
public void DoIt(string text){
//do something with text //do other things
}

DoIt(); //the method will do other things without paying attention to do something with text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:37:01.550

当然，重载它，并让您*最完整*的方法处理参数或不处理参数，并且您的重载使用适当的参数调用那个（如果它们在功能上足够相似，那么它们绝对应该是 - 否则将新方法称为完全不同的东西，指示性其中）：

```
public void DoIt(string text) {
  if (!string.IsNullOrEmpty(text)) {

  } else {

  }
} 

public void DoIt() {
  DoIt(""); // or DoIt(null);
} 
```

您还可以在以后的 C# 版本中使用[可选参数](http://msdn.microsoft.com/en-gb/library/dd264739.aspx)，但这不是重载：它允许您为参数参数指定默认值，然后在调用中省略此类参数。但是，这不是重载，并且您必须确保所有可选参数都是签名的尾随参数。

不过，我不确定您认为构造函数在哪里出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:36:25.430

您可以使用默认参数

```
public void DoIt(string text="") 
```

通过这样做，您可以在不想使用参数时调用 DoIt() 或在想要传递某些东西时调用 DoIt("someString")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:38:38.523

在 c# 4 及更高版本中，您可以为参数指定默认值，因此无需在调用站点指定它们：

```
public void DoIt(string text = "")
{
   //do something with text 
   //do other things
} 
```

然后您可以通过传递参数来调用它，如下所示：

```
DoIt("parameterValue"); 
```

或者不传递参数，在这种情况下，将使用方法定义中指定的值：

```
DoIt(); // equivalent to DoIt(""); 
```

# iphone - 如何在 iPhone 应用程序中加载 Web 视图的内容时显示加载图像

> ID：15788852
> 
> 赞同：1
> 
> 时间：2013-04-03T13:34:56.753
> 
> 标签：iphone, objective-c, cocos2d-iphone

我有一个需要在 Web 视图中访问的 url，并且该 url 访问成功。但问题是在 webview 中加载 url 需要更多时间，因此我需要在加载 url 时显示加载图像。我正在为此努力，但无法让它显示加载栏、加载图标或任何可能的内容。

我的代码在这里

```
 NSLog(@"Response ==> %@" ,encodedString);
 //'encodedstring' is my url which need to access

   // code to show a loading image
            indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            indicator.frame = CGRectMake(0, 0, 320, 470);
            [self.view addSubview:indicator];
            [indicator release];
            [indicator startAnimating];

        UIWebView *webView;
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0, 320, 470)];
        [webView setDelegate:self];

        NSString* urlTwo = [[encodedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
                            stringByReplacingOccurrencesOfString:@"%22" withString:@""];

        NSURL *url2;
        url2 = [[NSURL alloc] initWithString:urlTwo];
        NSLog(@"url2:%@", url2);

        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url2];

        [webView loadRequest:requestObj];
        [[self view] addSubview:webView];

    }
    }

-(void)webViewDidFinishLoad:(UIWebView *)webView
{
[indicator stopAnimating];
[[self view] addSubview:webView];
}  

-(void)webViewDidStartLoad:(UIWebView *)webView
{
[indicator startAnimating];
}
-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
[webView stopLoading];
} 
```

任何人都可以在这里解决我的问题并让这一天快乐。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:37:47.197

```
-(void)webViewDidFinishLoad:(UIWebView *)aWebView
{

    [indicator stopAnimating];
}
-(void)webViewDidStartLoad:(UIWebView *)aWebView
{
    [indicator startAnimating];
}

-(void)webView:(UIWebView *)aWebView didFailLoadWithError:(NSError *)error
{
    [activityView stopAnimating];

} 
```

你试过吗？

# biztalk - ESB 工具包 - 使用 Orchestration Extender 时 Web 服务没有响应

> ID：15788853
> 
> 赞同：2
> 
> 时间：2013-04-03T13:34:57.897
> 
> 标签：biztalk, esb, biztalk-2010, orchestration, biztalk-orchestrations

我有以下行程： ![测试行程](https://i.stack.imgur.com/EH3jj.png)

*   单向接收位置将消息传递到提取内部消息的编排（无法在地图中执行此操作）。

*   然后映射从编排返回的消息，并再次映射该映射的结果。使用 Microsoft.Practices.ESB.Services.Transform 服务。

*   然后通过 Microsoft.Practices.ESB.Services.Routing 服务将其传递给 Web 服务，该服务可以正常触发，但我没有收到想要写入文件的预期响应。写入文件的消息是传递给 Web 服务的消息，而不是预期的响应。使用更简单的路线（即没有编排扩展程序的路线）测试 Web 服务表明 Web 服务按预期工作。

*   OffRamp 来自 GlobalBank.ESB 示例应用程序。

如何从 Web 服务获得所需的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:21:10.780

所以终于设法找到了一个解决方案，我必须完全相信[这个人](https://www.linkedin.com/in/vikasbhardwaj)

> 问题是 Microsoft.Practices.ESB.Services.Routing 服务只提供一种方式操作，所以即使你用双向消息交换模式标记你的解析器它也不会工作。
> 
> 如果您在 BizTalk 管理控制台中检查 Microsoft.Practices.ESB 应用程序，它有一种单向动态发送端口 Microsoft.Practices.ESB.Agents_2.1.0.0_Microsoft.Practices.ESB.Agents.Delivery_DeliveryPort_31bf3856ad364e35 绑定到编排 Microsoft.Practices。 ESB.代理.交付。当您使用 Orchestration 扩展程序并使用 Microsoft.Practices.ESB.Services.Routing 服务时，此端口用于发送任何呼叫，因为这是单向端口，您不会得到响应。
> 
> 您需要在 callwebservice 形状中使用双向编排。MultipleWebServices ESB 示例中提供了一个双向编排示例。如果您部署该编排并将其注册为行程服务并以 callwebservice 形式使用它，它将起作用。

它或多或少做到了:) 通过在 itineraryServices 节点之间的 esb 配置中添加一个条目，部署编排并将其作为行程服务注册到 ESB：

```
 <itineraryService id="04BD6120-06E4-43D3-A56F-2FF061D59862" name="ESB.MultipleWebServices.Orchestrations.TwoWayRouting" type="ESB.MultipleWebServices.Orchestrations.TwoWayRouting, Biztalk.EsbGeneric.Orchestrations, Version=1.0.0.0, Culture=neutral, PublicKeyToken=140bc5dcbb9afcea" scope="Orchestration" stage="None"/> 
```

使用 guidgen 创建一个 id，类型由管理控制台中编排的名称和程序集（逗号分隔）组成，并且会根据您部署到的应用程序而有所不同。范围和阶段如上所示。

最初我在发送端口 Biztalk.HoopleEsbGeneric.Orchestrations_1.0.0.0_ESB.MultipleWebServices.Orchestrations.TwoWayRouting_RoutingPort_140bc5dcbb9afcea 上出现错误，但将发送和接收管道分别更改为 PassThruTransmit 和 PassThruReceive 解决了这个问题。

# xaml - 合并的 ResourceDictionary 与 App.xaml

> ID：15788869
> 
> 赞同：3
> 
> 时间：2013-04-03T13:35:42.097
> 
> 标签：xaml, resourcedictionary

我正在阅读有关 ResourceDictionary 的信息，但遇到了一个令人困惑的问题。

看来我每个 XAML 只能有 1 个 ResourceDictionary。所以，如果我想使用多个，我可以合并 ResourceDictionaries。

如果我可以合并字典，那么“全局”样式应该在哪里？我可以拥有一个 ApplicationResourceDictionary，其中包含在整个应用程序中保持一致的所有样式，或者，我可以将此信息保存到 App.xaml 文件中。两者似乎都是有效的选项，但我不知道是不是这样。

这是关于个人选择还是一个比另一个更好？将它们保留在 ResourceDictionaries 中似乎会更好，因为所有样式都放在一起（在字典中），而不是在 XAML 页面中拆分一些样式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:44:23.403

我们当前的解决方案中有 100 多个项目。每个人都需要访问一些资源字典，其中包含用于主题和统一性等的全球资源。我所做的是将资源字典集中在一个项目中，其他项目参考，在这种情况下，我们称之为“基础设施”，然后我提供字典直接通过他们自己的 app.xaml 到每个项目，并使用合并的字典，例如；

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Our.Client.Infrastructure;component/Resources/Styles/ResDictName1.xaml" />
        <ResourceDictionary Source="/Our.Client.Infrastructure;component/Resources/Styles/ResDictName2.xaml" />
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

到目前为止效果很好，我使样式应用全局的方式是在我们的自定义资源字典之一的底部指定它们，并从默认资源字典中删除相同的声明。例如，如果你发现；

```
<Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button" /> 
```

在您的 Default CoreStyles.xaml 或 SdkStyles.xaml 或其他任何内容中，我只是将其删除，然后将该声明移至我们的自定义资源字典的底部并相应地更改它；

```
<Style BasedOn="{StaticResource OurSuperAwesomeCustomNewGlobalButtonStyle}" TargetType="Button" /> 
```

瞧……任何`Button`此后默认继承我们的自定义样式，而不是原始的默认模板。一旦您采用它，整个解决方案只有一两个资源字典的优势就会变得非常明显。也就是说，只要模板实际上需要全局可用。如果您将模板用于仅与其使用的视图相关的临时模板，请将其明确保存在该视图中，如果没有其他需要，则无需将其保存在其他地方。

希望这可以帮助。

# c# - 从互联网顺序下载文件

> ID：15788871
> 
> 赞同：1
> 
> 时间：2013-04-03T13:35:44.967
> 
> 标签：c#, windows-phone-7, download, isolatedstorage

我想通过单击按钮从 Internet 下载文件并将其保存在 Windows Phone 的独立存储中。但是因为我要从互联网上下载多个文件，所以所有下载都必须按顺序进行，以便用户可以看到进度并在下载时立即访问它们。

```
public void Button1_Click(object sender, EventArgs e)
{
foreach(string url in urlarray)
{
    DownloadFile(url);
} 
}

void DownloadFile(string url)
{
    WebClient downloadfile = new WebClient();
    downloadfile.OpenReadCompleted += downloadfile_OpenReadCompleted;
    downloadfile.OpenReadAsync(new Uri(url, UriKind.Absolute)); 
}

void downloadfile_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
//Save to isolated storage
} 
```

现在如果这是代码，将抛出隔离存储异常。所以我想使用 Dispatcher.BeginInvoke() 但我不知道如何使用它。我也想毫无例外地下载和保存。任何人都可以帮助我吗？提前致谢。

# internet-explorer-9 - video.js 不适用于 IE9 和 Chrome

> ID：15788875
> 
> 赞同：4
> 
> 时间：2013-04-03T13:35:54.033
> 
> 标签：internet-explorer-9, video.js

我使用这个插件有一段时间了。但现在我注意到它不再适用于 IE9 和 Chrome。即使在官方主页[http://videojs.com/](http://videojs.com/)上 似乎只加载了前 2 秒，然后我的网络浏览器就崩溃了。

有人知道如何解决吗？

谢谢。

# iphone - 在特定时间间隔重复警报

> ID：15788876
> 
> 赞同：0
> 
> 时间：2013-04-03T13:35:55.700
> 
> 标签：iphone, ios5, ios6, uilocalnotification

问题是，我以编程方式放置了一个日期选择器。在日期选择器中，我只是用来显示从 1 分钟到 23 小时的时间。用户应该在选择器中设置时间，并设置通知。现在，我在后台收到通知，但只有一次。我必须重复时间，直到计时器不会停止。

我发现太多的链接和来源，但无法解决这个问题

我的代码：

在 Appdelegate.m 中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    application.applicationIconBadgeNumber = 0;

    //------ Handle launching from a notification-------
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    self.localNotification =[launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (self.localNotification)
    {
        application.applicationIconBadgeNumber = self.localNotification.applicationIconBadgeNumber-1;
        NSLog(@"badge number: %d", application.applicationIconBadgeNumber);
        [self playSoundWithNotification:self.localNotification];
    }
    else
    {
        [[UIApplication sharedApplication]cancelAllLocalNotifications];
    }
} 
```

didenterin背景：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"Application entered background state.");
    NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{
        while ([application backgroundTimeRemaining] > 1.0)
        {
            NSString *str_friend = @"Hello,";
            if (str_friend)
            {
                UILocalNotification *localNotif = [[UILocalNotification alloc] init];
                if (localNotif)
                {
                    localNotif.alertBody = [NSString stringWithFormat:
                                            NSLocalizedString(@"%@ has a message for you.", nil), str_friend];
                    localNotif.alertAction = NSLocalizedString(@"Read Msg", nil);
                    localNotif.soundName = @"alarmsound.caf";
                   //localNotif.soundName =[NSString stringWithFormat:@"%@.mp3",str_Alarm];
                    localNotif.applicationIconBadgeNumber = 1;
                    [application presentLocalNotificationNow:localNotif];

                    NSLog(@"sound: %@, alertAction: %@, alerBody: %@",localNotif.soundName, localNotif.alertAction, localNotif.alertBody);
                    str_friend = nil;
                    break;
                }
            }
        }
        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;
    });
} 
```

-

```
(void)playSoundWithNotification:(UILocalNotification *)notification
{
   notification.soundName=[NSString stringWithFormat:@"%@.mp3",str_Alarm];
    NSLog(@"soundname: %@",notification.soundName);
}

- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif
{
    testDate=notif.fireDate;
    NSLog(@"DATE IS: %@, %@",testDate, notif.fireDate);
    // Handle the notificaton when the app is running
    NSLog(@"Recieved Notification %@",notif);
    [self playSoundWithNotification:notif];

    [self _showAlert:[NSString stringWithFormat:@"%@",str_Motivation] withTitle:@"Daily Achiever"];
}

- (void) _showAlert:(NSString*)pushmessage withTitle:(NSString*)title
{
    UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:pushmessage delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    if (alertView)
    {
    }
} 
```

在我的视图控制器中：

```
-(void)insert:(NSDate *)fire
{
    appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.localNotification = [[UILocalNotification alloc] init];
    NSLog(@"localNotification %@", appDelegate.localNotification);

    if (appDelegate.localNotification == nil)
        return;

    appDelegate.localNotification.fireDate = fire;
    appDelegate.localNotification.timeZone = [NSTimeZone defaultTimeZone];
    appDelegate.localNotification.alertBody = appDelegate.str_Motivation;
    appDelegate.localNotification.alertAction = @"View";
    appDelegate.localNotification.soundName = [NSString stringWithFormat:@"%@.mp3",appDelegate.str_Alarm];

    appDelegate.localNotification.applicationIconBadgeNumber = [[UIApplication sharedApplication] applicationIconBadgeNumber]+1;
    NSLog(@"localNotification.alertBody %@", appDelegate.localNotification.alertBody);
    NSLog(@"localNotification.soundName %@",appDelegate.localNotification.soundName);
    [[UIApplication sharedApplication] scheduleLocalNotification:appDelegate.localNotification];
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:51:23.047

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    ......
    ......
    if (localNotif)
    {
      localNotif.alertBody = [NSString stringWithFormat:
                                                NSLocalizedString(@"%@ has a message for you.", nil), str_friend];
      localNotif.alertAction = NSLocalizedString(@"Read Msg", nil);
      localNotif.soundName = @"alarmsound.caf";
      localNotif.applicationIconBadgeNumber = 1;
      [localNotif setRepeatInterval:NSMinuteCalendarUnit];
      [application presentLocalNotificationNow:localNotif];

      str_friend = nil;
      break;
     }
} 
```

我得到了解决方案。

# iphone - ImageIO 错误 HTML 未在 Web 视图中显示从 iPhone 拍摄的图像

> ID：15788880
> 
> 赞同：0
> 
> 时间：2013-04-03T13:36:01.657
> 
> 标签：iphone, html, webview, javax.imageio

在我的应用程序中，我正在拍摄图像并保存在文档目录中。在 tableView 中显示时，图像显示正常，但在 Web 视图中加载相同的图像时，从 xml 和 xslt 本地创建的 HTML 显示以下错误

```
<Error>: ImageIO: PNG invalid PNG file: iDOT doesn't point to valid IDAT chunk 
```

从照片库捕获图像时，在模拟器上工作正常。有人可以帮我吗。图像的 xslt 代码是

```
<xsl:for-each select="PrecisionVestor/PhotoSection/Photo">
<div style="width:46%; height:180px; float:left; margin-top:10px; margin-left:2%; margin-right:2%;">
<div class="caption_pic" >
<img style="background-size:cover;">
<xsl:attribute name="src">
<xsl:value-of select="PhotoPath" />
</xsl:attribute>
</img>
</div>
<div class="caption_txt" ><xsl:value-of select="Note" /></div>
</div>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:27:23.450

最后我解决了这个问题。而不是在以 png 格式捕获时保存图像，而是以 jpeg 格式保存它们。

# google-app-engine - CMD 而不是运行命令只是打开它

> ID：15788884
> 
> 赞同：1
> 
> 时间：2013-04-03T13:36:10.943
> 
> 标签：google-app-engine, windows-7, python-2.7, cmd, command

操作系统 Win7、GAE 1.7.6、Python 2.7.3

与另外 2 个人一起开发 Google 应用引擎项目，项目负责人通过 sampleData.cmd 向我们提供了示例数据以在其中运行它。

```
nameOfTheApp\main>sampleData 
```

在其他 2 台计算机上，此命令开始下载文件，我刚刚返回。

```
appcfg.py upload_data --config_file=bulkloader.yam...etc 
```

换句话说，它只是在我的文本编辑器和 CMD 中弹出，但它不运行它。如何强制此命令运行？

编辑：在 CMD 中使用编辑器和 c/p 内容打开 sampleData.cmd

```
python appcfg.py upload_data --config_file=bulkloader.yam...etc 
```

它返回 python:can't open file 'appcfg.py' [Errno 2] No such file or directory

回答：

问题是我将 .py 文件与我的文本编辑器相关联，当更改为 python.exe 时，它​​可以工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:59:31.550

问题是我将 .py 文件与我的文本编辑器相关联，当我将其更改为 .exe 时，它​​可以工作......

# c - 作业 - 二叉搜索树 C

> ID：15788892
> 
> 赞同：3
> 
> 时间：2013-04-03T13:36:26.253
> 
> 标签：c

我一直停留在这个简单的二叉搜索树上，因为我的主要问题是函数 bst_get() 中的 (BST * bst) 为 NULL。

```
typedef struct {
    char *key;
    void *value;
} KVP;
typedef struct bst {
    struct bst *left;
    struct bst *right;
    KVP kvp;
} BST; 
```

此插入函数从输入文件中获取参数并进行相应排序

```
BST *bst_insert(BST *bst, char*key, void *value){
    if(bst==NULL){
        BST * tempBST = (BST * )malloc(sizeof(BST));
        //strcpy(tempBST->kvp.key , key);
        tempBST->kvp.key = key;
        tempBST->kvp.value = value;
        tempBST->left = NULL;
        tempBST->right = NULL;
        puts(key);
        return tempBST;
    }else
    //if(strcmp(key , bst->kvp.key) > 0){ // i tried to compare strings but it failed
    if(key > bst->kvp.key && bst != NULL){
        bst->right = bst_insert(bst->right , key , value);
        return bst;
    }
    else
    if(key < bst->kvp.key){
        bst->left = bst_insert(bst->left , key, value);
        return bst;
    }    
} 
```

以及何时将该 BST 与密钥（来自另一个文件）进行比较，如下所示

```
KVP *bst_get(BST *bst , char *key)

    if(bst!=NULL){
        if(key==bst->kvp.key){
            return &bst->kvp;
        }
        else if (key > bst->kvp.key) {
           return bst_get(bst->right , key);
        } else if (key < bst->kvp.key){
           return bst_get(bst->left , key);
        } 
    }else{
        printf("BST IS EMPTY!\n");
    }
} 
```

打印出“BST IS EMPTY”语句。我不知道我的 BST 发生了什么，因为我提到了其他类似的问题，似乎我在这里错过了一些重要的问题，并希望得到一些帮助。

感谢您的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:41:27.163

我还没有仔细阅读所有代码，但这部分是错误的：

```
if(key > bst->kvp.key && bst != NULL) 
```

`bst`考虑进入此语句的 NULL场景。

首先，它将与`key`使用`bst->kvp.key`指针的`bst`进行比较。由于`bst`是 NULL，你刚刚遇到了一个崩溃的错误。（可能是分段违规）。

您需要颠倒顺序，以便在尝试使用指针***之前***检查 bst 是否为 NULL ：

```
if( (bst != NULL) && (key > bst->kvp.key) ) 
```

此外，根据您在此声明之前注释掉的代码，我认为您想尝试：

```
if( (bst != NULL) && strcmp(key , bst->kvp.key) > 0) { 
```

这既可以防止 NULL 指针，又可以使用字符串比较而不是指针比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:40:39.953

在 function`bst_get()`中，`key==bst->kvp.key`比较指针，而不是字符串内容。用于`strcmp`比较字符串内容。比较密钥的所有其他地方也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:52:12.523

当然，您将到达in的地步，`bst`因为您不断地使用 the或成员递归调用该函数。迟早会出现其中一个，导致您打印字符串。`NULL``bst_get``left``right``NULL`

如果您使用调试器单步执行代码和递归调用，您会注意到这一点。

# html - 如何将内容与网页顶部分开

> ID：15788896
> 
> 赞同：0
> 
> 时间：2013-04-03T13:36:37.713
> 
> 标签：html, web

我是 html/css/whatever in web 的超级新手，我正在尝试建立自己的网站。假设我的网站有两个部分 - 顶部带有徽标和菜单，底部带有内容。我需要哪些工具来单独保存它？我的意思是 - 只有一个带有“上层事物”的文件（因为我不想在每个子页面上编辑它）和其他带有子页面的文件？我需要php吗？

`<iframe>`在我的情况下使用是一件好事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:51:02.533

像php这样的服务器端语言是要走的路。服务器端语言将使您能够执行所谓的`server side include`.

因此，例如，您可以创建一个名为的文件`header.php`并将所有代码从开始`<html>`标签放置到您网站顶部的任何其他内容中。您可能希望更进一步，并创建一个`footer.php`将所有始终位于底部的代码。

**示例 header.php**

```
<!doctype html>
<html>
<head>
    <title>My Awesome Website</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li>Menu Link 1</li>
                <li>Menu Link 2</li>
                <li>Menu Link 3</li>
            </ul>
        </nav>
    </header>
    <div id="main"> 
```

**示例 footer.php**

```
 </div><!-- end #main -->
    <footer>
         My Awesome website's Footer content!
    </footer>
</body>
</html> 
```

现在把它们放在我们的主页上或`index.php`

**示例 index.php**

```
<?php include 'header.php'; ?>

   <h1>Welcome to my home page!</h1>
   <p>This is my super awesome site and I hope you like it!</p>

<?php include 'footer.php'; ?> 
```

发送到浏览器的最终输出如下：

```
<!doctype html>
<html>
<head>
    <title>My Awesome Website</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li>Menu Link 1</li>
                <li>Menu Link 2</li>
                <li>Menu Link 3</li>
            </ul>
        </nav>
    </header>
    <div id="main">
        <h1>Welcome to my home page!</h1>
        <p>This is my super awesome site and I hope you like it!</p>
    </div><!-- end #main -->
    <footer>
         My Awesome website's Footer content!
    </footer>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:49:26.110

如果您想纯粹在 HTML 中执行此操作，那么通过[iframe](http://www.w3.org/TR/html-markup/iframe.html)执行此操作的唯一方法，但这不是最好的方法，并且许多开发人员不鼓励，因为您丢失了深层链接，因为整个站点具有相同的地址。

更好的选择是使用服务器端编程模型，例如 PHP、ASP.NET、Ruby...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:22:42.580

不，您不必为此使用 php。如果您不想使用 php，也可以使用一般的 ssi 包含文件。使用 php 需要一个设置为解析 php 的服务器（这是另一个主题 :)。一个例子可能看起来像......

```
<body>
  <div id="header">
  <!--#include file="includes/header.ssi"-->
  </div>

  <div id="menu">
  <!--#include file="includes/menu.ssi"-->
  </div>

  <div id="footer">
  <!--#include file="includes/footer.ssi"-->
  </div>
</body> 
```

正如包含文件路径所暗示的那样，在您的根文件夹中有一个名为“includes”的目录，从中调用您的 ssi 内容。ssi 文件使用常规的 html 标记，并且任何 ID 或 CLASS 仍然服从您的 css。

# google-apps-script - 从电子表格创建 Google 日历活动，但防止重复

> ID：15788897
> 
> 赞同：27
> 
> 时间：2013-04-03T13:36:40.107
> 
> 标签：google-apps-script, google-sheets, google-calendar-api

我正在尝试编写一个脚本，该脚本将从 Google 电子表格中获取数据并在我的 Google 日历中创建事件。

我做得很好，但每次运行它都会产生重复。所以现在我试图通过在电子表格中创建第 17 列并为每一行自动生成唯一事件 ID 来防止这种情况发生，然后每次运行脚本时，它都会查看每一行的事件 ID 并删除相应的事件如果我更改了行，则在使用原始数据或更新数据重新创建日历之前。

我是任何类型的脚本的新手，我把它拼凑在一起，但现在我碰壁了。任何人都可以帮助解决这个问题吗？

```
function CalInsert() {
    var cal = CalendarApp.getDefaultCalendar();
    var id = SpreadsheetApp.getActiveSheet().getRange(2,17).getValue();

    if (id != 0) {
        var event = cal.getEventSeriesById(id);
        event.deleteEventSeries();
    }

    var sheet = SpreadsheetApp.getActiveSheet();
    var startRow = 2; // First row of data to process
    var numRows = sheet.getLastRow(); // Number of rows to process
    var dataRange = sheet.getRange(startRow, 1, numRows, sheet.getLastColumn());
    var data = dataRange.getValues();

    for (i in data) {
        var row = data[i];
        var title = row[0]; // First column
        var desc = row[13]; // Second column
        var tstart = row[14];
        var tstop = row[15];

        var event = cal.createEvent(title, tstart, tstop, {description:desc});
        var eventid = event.getId();
        SpreadsheetApp.getActiveSheet().getRange(2,17).setValue(eventid);
    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-03T14:58:33.477

This is very similar to a question asked just two days ago, which was about synchronizing a spreadsheet of events with a calendar. It sounds like you want to consider the spreadsheet to be the master of events that it originates, which would simplify the problem considerably. The basics of what you need to do are covered in [this answer](https://stackoverflow.com/a/15746141/1677912). If you'd rather just modify existing code, I've got an implementation below.

I have a modified version of the code from [this blog](http://blog.ouseful.info/2010/03/04/maintaining-google-calendars-from-a-google-spreadsheet/), that will modify pre-existing calendar entries to match the info in the spreadsheet. I have arranged my spreadsheet differently, and this is reflected in the code.

> Date | Title | Start Time | End Time | Location | Description | ***EventID***

The event ID column gets filled in by the script when new events are created, and is then used in later invocations to retrieve events from the calendar, thereby avoiding duplication.

## Script

```
/**
 * Adds a custom menu to the active spreadsheet, containing a single menu item
 * for invoking the exportEvents() function.
 * The onOpen() function, when defined, is automatically invoked whenever the
 * spreadsheet is opened.
 * For more information on using the Spreadsheet API, see
 * https://developers.google.com/apps-script/service_spreadsheet
 */
function onOpen() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{
    name : "Export Events",
    functionName : "exportEvents"
  }];
  sheet.addMenu("Calendar Actions", entries);
};

/**
 * Export events from spreadsheet to calendar
 */
function exportEvents() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var headerRows = 1;  // Number of rows of header info (to skip)
  var range = sheet.getDataRange();
  var data = range.getValues();
  var calId = "YOUR_CALENDAR_ID";
  var cal = CalendarApp.getCalendarById(calId);
  for (i=0; i<data.length; i++) {
    if (i < headerRows) continue; // Skip header row(s)
    var row = data[i];
    var date = new Date(row[0]);  // First column
    var title = row[1];           // Second column
    var tstart = new Date(row[2]);
    tstart.setDate(date.getDate());
    tstart.setMonth(date.getMonth());
    tstart.setYear(date.getYear());
    var tstop = new Date(row[3]);
    tstop.setDate(date.getDate());
    tstop.setMonth(date.getMonth());
    tstop.setYear(date.getYear());
    var loc = row[4];
    var desc = row[5];
    var id = row[6];              // Sixth column == eventId
    // Check if event already exists, update it if it does
    try {
      var event = cal.getEventSeriesById(id);
    }
    catch (e) {
      // do nothing - we just want to avoid the exception when event doesn't exist
    }
    if (!event) {
      //cal.createEvent(title, new Date("March 3, 2010 08:00:00"), new Date("March 3, 2010 09:00:00"), {description:desc,location:loc});
      var newEvent = cal.createEvent(title, tstart, tstop, {description:desc,location:loc}).getId();
      row[6] = newEvent;  // Update the data array with event ID
    }
    else {
      event.setTitle(title);
      event.setDescription(desc);
      event.setLocation(loc);
      // event.setTime(tstart, tstop); // cannot setTime on eventSeries.
      // ... but we CAN set recurrence!
      var recurrence = CalendarApp.newRecurrence().addDailyRule().times(1);
      event.setRecurrence(recurrence, tstart, tstop);
    }
    debugger;
  }
  // Record all event IDs to spreadsheet
  range.setValues(data);
} 
```

## Delete / Recreate

In this alternative, the eventID is used to find and delete the previously existing event. After that, a new event is created with the data in the spreadsheet. This has the benefit that all values of the event can be updated, including start and stop times (see Notes below). On the other hand, any changes that were made to the original event will be lost - for instance, if other people had been invited to the event, or custom reminders were added.

To use this alternative, simply replace the matching code with this:

```
// Check if event already exists, delete it if it does
try {
  var event = cal.getEventSeriesById(id);
  event.deleteEventSeries();
  row[6] = '';  // Remove event ID    
}
catch (e) {
  // do nothing - we just want to avoid the exception when event doesn't exist
}
//cal.createEvent(title, new Date("March 3, 2010 08:00:00"), new Date("March 3, 2010 09:00:00"), {description:desc,location:loc});
var newEvent = cal.createEvent(title, tstart, tstop, {description:desc,location:loc}).getId();
row[6] = newEvent;  // Update the data array with event ID
debugger; 
```

### Notes

*   The Documentation for `getEventSeriesById` wrongly states it returns `null` when no matching event is found, when instead it throws an exception. (nasty!) So I've enclosed it in a try / catch block just to keep on swimming.
*   Unfortunately, while `getEventSeriesById` works to retrieve an event, it `returns` an `EventSeries` object, which does not support the `setTime()` method. If you don't expect to change the time of events, this OK. Otherwise, you can change the `Event` into an `EventSeries` by setting the *recurrence* rules & times, or delete the old event and create a new one, as shown in **Delete / Recreate**. [Issue 1154](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1154).
*   The spreadsheet always wins. Any event changes (in relevant fields) recorded via the Google Calendar will be overwritten by the script.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-27T12:54:04.633

我想为任何想使用它的人发布这个，我已经修改了脚本以在我已经使用的工作表中工作。日期格式和事件重复是几个需要修复的问题，但经过一些测试后，我对它的工作方式非常满意。我用它来预订工作并与我的移动员工分享，他们在整个城市。下一步是将日历事件拉到电子表格中，这样它就可以双向工作了将响应数据形成到同一张表中，并添加与作业编号匹配的完整行，保持现有数据不变。

```
`function onOpen() {
var sheet = SpreadsheetApp.getActiveSpreadsheet();
var entries = [{
name : "Export Events",
functionName : "exportEvents"
}];     sheet.addMenu("Calendar Actions", entries);
};

function parseDate(s) {
var months = {jan:0,feb:1,mar:2,apr:3,may:4,jun:5,
            jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};
var p = s.replace(".", "").split('-');
return new Date(p[2], months[p[1].toLowerCase()], p[0]);
}

/**
* Export events from spreadsheet to calendar
*/
function exportEvents() {
var sheet = SpreadsheetApp.getActiveSheet();

var headerRows = 6;  // Number of rows of header info (to skip)
var range = sheet.getDataRange();
var data = range.getDisplayValues();
//var calId = "Your calendar Id"; // PRODUCTION
var calId = "Your_calendar Id to test"; // TEST
var cal = CalendarApp.getCalendarById(calId);
//Logger.log(cal);
//Logger.log(data.length);
for (i=0; i<data.length; i++) {
if (i < headerRows) continue; // Skip header row(s)
if (data[i][0].length < 1) continue; // Skip if no content.

var row    = data[i];
Logger.log(row);
var date   = parseDate(row[0]);  // First column
//Logger.log(date);
var title  = row[1];           // Second column

var tstart = new Date();
var s = row[2].split(":");
tstart.setHours(s[0]);
tstart.setMinutes(s[1]);
tstart.setSeconds(s[2]);
tstart.setDate(date.getDate());
tstart.setMonth(date.getMonth());
tstart.setYear(date.getYear());

var tstop = new Date();
var e = row[3].split(":");
tstop.setHours(e[0]);
tstop.setMinutes(e[1]);
tstop.setSeconds(e[2]);

tstop.setDate(date.getDate());
tstop.setMonth(date.getMonth());
tstop.setYear(date.getYear());
var loc  = row[4];
var desc = row[5];
var id   = row[6];              // Sixth column == eventId
// Check if event already exists, update it if it does
var event = null;
if (id.length > 0) {
try {
event = cal.getEventSeriesById(id);
}
catch (e) {
// do nothing - we just want to avoid the exception when event doesn't            exist
} 
}
if (!event) {
//cal.createEvent(title, new Date("March 3, 2010 08:00:00"), new
Date("March 3, 2010 09:00:00"), {description:desc,location:loc});
var newEvent = cal.createEvent(title, tstart, tstop,                                     
{description:desc,location:loc}).getId();                     
var r = i + 1;
var cell = sheet.getRange("G" + r);
cell.setValue(newEvent);
}
else {
Logger.log(event);
event.setTitle(title);
event.setDescription(desc);
event.setLocation(loc);
// event.setTime(tstart, tstop); // cannot setTime on eventSeries.
// ... but we CAN set recurrence!
var recurrence = CalendarApp.newRecurrence().addDailyRule().times(1);
event.setRecurrence(recurrence, tstart, tstop);
}
debugger;
}
} 
```

`

# javascript - 主干集合未触发获取添加事件

> ID：15788898
> 
> 赞同：2
> 
> 时间：2013-04-03T13:36:41.363
> 
> 标签：javascript, backbone.js

我一直在用头撞墙好几个小时......看了很多页，我觉得我的脚本是正确的，但是我的收藏没有触发 add 事件 add: true 传入获取方法。我可以绑定到重置事件，但添加事件不会触发..

模型：

```
test.Models.AppBlock = Backbone.Model.extend({
    defaults: {
        AppID:          null,
        AppName:        null,
        AppDescription: null
    },
    idAttribute: "AppID"
}); 
```

收藏：

```
test.Collections.AppBlock = Backbone.Collection.extend({
    model:       test.Models.AppBlock,
    url:         ApiPath + "apps/byuser",

    Loading: false,

    initialize: function () {

    },

    getAppBlocks: function () {
        if (!this.Loading) {
            this.Loading = true;
            this.fetch({
                data: JSON.stringify({
                          Token: test.Session.Token
                      }),
                add:         true,  // OMG WTF ?!?!
                type:        'POST',
                dataType:    'json',
                contentType: 'application/json',
                cache:       false,
                success:     this.getAppBlocksSuccess,
                error:       this.getAppBlocksError
            });
        }
    },

    parse: function (response) {
        return response.Data;
    },

    getAppBlocksSuccess: function (that, response) {

    },

    getAppBlocksError: function (that, response) {

    }
}); 
```

看法：

```
test.Views.DashboardLatestMain = Backbone.View.extend({
    Loading: null,

    initialize: function () {
        this.template = _.template(test.Templates.DashboardLatestMain);
        this.collection.bind('add', this.addAppBlock);
        this.render();
    },

    render: function () {
        $('#latest').prepend(this.template);
        this.Loading = new test.Views.Loading({
            el: '.main'
        });
        this.collection.getAppBlocks();
    },

    addAppBlock: function (appBlockModel) {
        alert(appBlockModel); // no dice....
        var appBlockView = new test.Views.AppBlock({
            model: appBlockModel,
            el: '#latest .main h3',
            After: true
        });
    }
}); 
```

任何帮助是极大的赞赏。

**编辑**

api返回的数据：

```
{
    "Status":["1","OK"],
    "Data":[{"AppID":1,"AppName":"test","AppDescription":"test"},
            {"AppID":2,"AppName":"test","AppDescription":"test"}]
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T14:07:31.123

在 Backbone 0.9.9 集合`fetch`中`reset`，默认情况下会触发一个“重置”事件。在 1.0 中，fetch 执行一个`update`（现在称为`set`），并默认触发 'add'、'remove' 和 'change' 事件。

所以，要么更新到 1.0，你现有的代码应该可以工作。或者，添加`update:true`到您的`fetch`通话中（您不需要`add:true`，因为这是默认设置）。

# javascript - 在元素之间翻转文本输入字段，包括用户创建的值属性

> ID：15788903
> 
> 赞同：0
> 
> 时间：2013-04-03T13:36:59.600
> 
> 标签：javascript, jquery, html

您好我正在尝试翻转两个 div 元素之间的输入字段。但是，如果用户在字段中输入文本，则文本会在翻转发生后消失。有没有办法确保这个值属性也被翻转？谢谢。

Javascript：

```
function Flip ()
{
    var oldslave = $('div.slave').html();
    var oldmaster = $('div.master').html();
    $('div.slave').html(oldmaster);
    $('div.master').html(oldslave);
} 
```

HTML：

```
<div class="master">
    <input type="text" name="master" id="master" size="42">
</div>
<input type="button" id="button1" onclick="Flip()" value="Flip">
<div class="slave">
    <input type="text" name="slave" id="slave" size="42" class="slavefield">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:43:05.220

您可以使用这样的[克隆](http://api.jquery.com/clone/)方法：

```
function Flip() {
    var oldslave = $('div.slave input').clone();
    var oldmaster = $('div.master input').clone();
    $('div.slave').html(oldmaster);
    $('div.master').html(oldslave);
} 
```

[http://jsfiddle.net/MaESg/](http://jsfiddle.net/MaESg/)

还有另一个变体可以在不使用克隆的情况下实现相同的效果：

```
function Flip() {
    $('.master').find('input').appendTo('.slave').prev().appendTo('.master');
} 
```

这个更可取，因为附加（移动）节点比重新创建更有效。

[http://jsfiddle.net/MaESg/1/](http://jsfiddle.net/MaESg/1/)

# search - SOLR 相关性似乎与索引文档的长度密切相关

> ID：15788904
> 
> 赞同：0
> 
> 时间：2013-04-03T13:37:01.443
> 
> 标签：search, solr

我们在 SOLR 中有很多文档，其中某些类型的结果往往得分过高（这主要是因为它们的内容通常很短）。因此，如果我搜索一个名称，它总是会在任何更长的时间之前返回大量短文档。

如何对结果进行加权，以便在对相关性进行排名时更多地考虑文档的长度？

如果它有帮助（作为一个杂物），我们会在通常适用的文档上设置一个标志，因此如果可以提升所有没有设置此标志的文档，这对我们来说将是一个临时选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:10:57.683

这是由评分中的 lengthNorm 引起的。具有相同匹配词的较长文档的得分略低于短文档。请参阅[TFIDFSimilarity](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html)的文档（向下滚动到“ `6\. norm(t,d)`”）以及[此处的 Solr 文档](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_are_documents_scored)。

这往往适用于全文搜索应用程序。这个想法是与查询匹配的内容比例较高的文档与查询更相关。

例如，如果我在维基百科文章标题中搜索“猴子”一词，则找到的文章的相关性可能是：

*   [猴子](https://en.wikipedia.org/wiki/Monkey)- 精确匹配，假设这就是我想要的是合理的
*   [蜘蛛猴](https://en.wikipedia.org/wiki/Spider_Monkey)- 一种众所周知的猴子，仍然非常相关
*   [猴子：西游记](http://en.wikipedia.org/wiki/Monkey%3a_Journey_to_the_West)- 以猴子为主角的舞台剧。可能不太相关。
*   [非洲绿猴嗜淋巴性多瘤病毒](https://en.wikipedia.org/wiki/African_green_monkey_lymphotropic_polyomavirus)- 一种人类肿瘤病毒。与查询的相关性有限。

如果确实有必要，可以在自定义[DefaultSimilarity](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/DefaultSimilarity.html)中覆盖它。并将 computeNorm(state,norm) 覆盖为简单`return state.getBoost();`的 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:01:27.247

检查4.0的[DefaultSimilarity的来源](http://fossies.org/dox/apache-solr-4.0.0-src/DefaultSimilarity_8java_source.html)

```
@Override
public void computeNorm(FieldInvertState state, Norm norm) {
    final int numTerms;
    if (discountOverlaps)
        numTerms = state.getLength() - state.getNumOverlap();
    else
        numTerms = state.getLength();
    norm.setByte(encodeNormValue(state.getBoost() * ((float) (1.0 / Math.sqrt(numTerms)))));
} 
```

所以 numTerms 对评分有不利影响。
您可以创建一个覆盖行为的自定义类

1.  numTerms 等于 1
2.  更改计算以增加较长文档的分数，而不是现在相反
3.  删除计算`((float) (1.0 / Math.sqrt(numTerms)))`以消除 lengthNorm 效应。

# qt - 旋转 QGraphicsPixmapItem 会导致极低质量的纹理

> ID：15788906
> 
> 赞同：2
> 
> 时间：2013-04-03T13:37:18.547
> 
> 标签：qt, qgraphicsview, qgraphicsscene, qpixmap

我正在使用 QGraphicsScene 和 QGraphicsView 来显示 QGraphicsPixmapItem。

每当我将项目旋转​​ 90、180、270 度以外的任何角度时，纹理都会以极低的质量显示。图[1](https://i.stack.imgur.com/FwZsA.png)显示了原始纹理（0° 旋转），图[2](https://i.stack.imgur.com/IkElG.png)显示了旋转 45° 的项目。

我使用以下代码来显示和旋转项目：

```
QGraphicsPixmapItem *item = new QGraphicsPixmapItem(QPixmap("button.png"));
scene->addItem(item);

item->setTransformOriginPoint(70, 70); // button.png is 140px x 140px
item->setRotation(45); 
```

使用

```
view->setRenderHints(QPainter::Antialiasing); 
```

或者

```
view->setRenderHints(QPainter::SmoothPixmapTransform); 
```

没有什么区别。

有什么方法可以获得更高质量的纹理？

![原来的](https://i.stack.imgur.com/FwZsA.png) ![45度](https://i.stack.imgur.com/IkElG.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:40:05.397

我有同样的问题。我发现解决此问题的唯一方法是重新实现 QGraphicsItem::paint() 并应用标志 QPainter::Antialiasing | QPainter::SmoothPixmapTransform 到画家。

像这样：

```
void Rocket::paint(QPainter *painter,
                   const QStyleOptionGraphicsItem *option,
                   QWidget *widget)
{
  painter->setRenderHints( QPainter::Antialiasing | QPainter::SmoothPixmapTransform );
  painter->drawPixmap( boundingRect().topLeft(), myOriginalPixmap );
} 
```

# java - 用 Java 编写游戏时出现 IndexOutOfBoundsError

> ID：15788909
> 
> 赞同：0
> 
> 时间：2013-04-03T13:37:29.087
> 
> 标签：java, indexoutofboundsexception

我在编写学校项目时遇到了 IndexOutOfBound 错误。这个问题是不稳定的，这个问题似乎很随机发生...

```
public void run(){ // Main game methode 
    Image Background = this.images.get(0);//get background because we can
    Player Player1 = this.players.get(0);//get player 1
    Player Player2 = this.players.get(1);//get player 2

    Player1.setHorSp(1);//give start speed to player 1
    Player2.setHorSp(1);//give start speed to player 2
    while(this.running == true && this.crash == false){ // main game loop, loops when game is started and there is no crash
        // Player 1
        if(this.turnable == 0 && Player1.getDir() > 0){
            Player1.setPrevLine(Player1.getCurrentLine());//safe previous line for testing
            if(Player1.getDir() == 1){ //check which key and horizontal speed so it can't move in opposite direction
                if(Player1.getHorSp() == -1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX());
                    Player1.setY(Player1.getY()-Player1.getWidth()+Player1.getHeight());
                }
                if(Player1.getHorSp() == 1){
                    Player1.setLineX(Player1.getX()+Player1.getWidth()-grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX()-Player1.getHeight()+Player1.getWidth());
                    Player1.setY(Player1.getY()+Player1.getHeight()-Player1.getWidth());
                }
                Player1.setLineNr(Player1.getLineNr()+1); //tell player that it had turned
                Player1.setImage("BikeBlueUp.png"); //change image in the right direction
                Player1.setWidth(grid); //correct images size
                Player1.setHeight(2*grid);
                Player1.setLineX(Player1.getX()+grid/2);//set point line is atteched to bibe
                Player1.setLineY(Player1.getY()+grid/2);
                Player1.setHorSp(0); //give speed in the right direction
                Player1.setVerSp(-1);
            }
            if(Player1.getDir() == 2){ //check which key and if is in grid
                if(Player1.getVerSp() == -1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX());
                    Player1.setY(Player1.getY());
                }
                if(Player1.getVerSp() == 1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+Player1.getHeight()-grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX());
                    Player1.setY(Player1.getY()+Player1.getHeight()-Player1.getWidth());
                }
                Player1.setLineNr(Player1.getLineNr()+1); //tell player that it had turned
                Player1.setImage("BikeBlueRight.png"); //change image in the right direction
                Player1.setWidth(2*grid); //correct images size
                Player1.setHeight(grid);
                Player1.setLineX(Player1.getX()+Player1.getWidth()-grid/2);//set point line is atteched to bibe
                Player1.setLineY(Player1.getY()+grid/2);
                Player1.setHorSp(1); //give speed in the right direction
                Player1.setVerSp(0);
            }
            if(Player1.getDir() == 3){ //check which key and horizontal speed so it can't move in opposite direction
                if(Player1.getHorSp() == -1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX());
                    Player1.setY(Player1.getY());
                }
                if(Player1.getHorSp() == 1){
                    Player1.setLineX(Player1.getX()+Player1.getWidth()-grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX()-Player1.getHeight()+Player1.getWidth());
                    Player1.setY(Player1.getY());
                }
                Player1.setLineNr(Player1.getLineNr()+1); //tell player that it had turned
                Player1.setImage("BikeBlueDown.png"); //change image in the right direction
                Player1.setWidth(grid); //correct images size
                Player1.setHeight(2*grid);
                Player1.setLineX(Player1.getX()+grid/2);//set point line is atteched to bibe
                Player1.setLineY(Player1.getY()+Player1.getHeight()-grid/2);
                Player1.setHorSp(0); //give speed in the right direction
                Player1.setVerSp(1);
            }
            if(Player1.getDir() == 4){ //check which key and horizontal speed so it can't move in opposite direction
                if(Player1.getVerSp() == -1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX()-Player1.getHeight()+Player1.getWidth());
                    Player1.setY(Player1.getY());
                }
                if(Player1.getVerSp() == 1){
                    Player1.setLineX(Player1.getX()+grid/2); //set end of line
                    Player1.setLineY(Player1.getY()+Player1.getHeight()-grid/2);
                    addLine(Player1.getLineX(),Player1.getLineY(),Player1.getLineX(),Player1.getLineY(),Color.BLUE);//make next line
                    Player1.setCurrentLine(Player1.getLineNr()+Player2.getLineNr());//use next line
                    Player1.setX(Player1.getX()-Player1.getHeight()+Player1.getWidth());
                    Player1.setY(Player1.getY()+Player1.getHeight()-Player1.getWidth());
                }
                Player1.setLineNr(Player1.getLineNr()+1); //tell player that it had turned
                Player1.setImage("BikeBlueLeft.png"); //change image in the right direction
                Player1.setWidth(2*grid); //correct images size
                Player1.setHeight(grid);
                Player1.setLineX(Player1.getX()+grid/2);//set point line is atteched to bibe
                Player1.setLineY(Player1.getY()+grid/2);
                Player1.setHorSp(-1); //give speed in the right direction
                Player1.setVerSp(0);
            }
        } 
```

这会产生错误：

```
Exception in thread "Thread-5" java.lang.IndexOutOfBoundsException: Index: 5, Size: 5
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at Game.run(Game.java:388)
at java.lang.Thread.run(Thread.java:619) 
```

现在按下向上按钮时仍然发生此错误。其他 2 次都没有发生此错误，然后突然发生了。

按下右键后产生此错误

```
Exception in thread "Thread-5" java.lang.IndexOutOfBoundsException: Index: 11, Size: 11
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at Game.run(Game.java:388)
at java.lang.Thread.run(Thread.java:619) 
```

这个错误是在按下右键后产生的，它在同一个游戏中工作了 1 次......即使经过 3 天的调试，我们仍然看不到赞助人。

*有没有人以前见过这个，如果是这样：我们如何解决它？*

--JYT

附言。整个代码在这里[http://pastebin.com/0wvyr3qh](http://pastebin.com/0wvyr3qh)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:04:51.373

我不确定您尝试做什么，但发生错误是因为： `Player2.getCurrentLine()`返回 的值`this.lines.size()`，因此您尝试访问列表中**不存在的**对象**（如果列表的大小为 5，则它具有对象 0-4）**。

如果您的网格是循环的，您可以使用：

```
Line CurrentLineP2 = this.lines.get(Player2.getCurrentLine() % this.lines.size()); 
```

代替：

```
Line CurrentLineP2 = this.lines.get(Player2.getCurrentLine()); 
```

如果它不是循环的，你需要处理这种情况。一个球员怎么可能在一条不存在的线上？

无论如何，添加**所有**相关代码将帮助我们帮助您。

# asp.net-mvc - 部署 AntiforgeryToken 错误

> ID：15788912
> 
> 赞同：18
> 
> 时间：2013-04-03T13:37:33.617
> 
> 标签：asp.net-mvc, web-config, antiforgerytoken

我正在使用 IISExpress 中内置的 Visual Studio 2012 在本地计算机上开发 ASP.NET MVC 应用程序。在取得重大进展后，我决定在本地网络上提供它，我从 Visual Studio 创建了一个虚拟目录。我可以登录，但是当我尝试注册新用户时。我收到以下错误。

> 无法解密防伪令牌。如果此应用程序由 Web Farm 或群集托管，请确保所有计算机都运行相同版本的 ASP.NET 网页，并且配置指定显式​​加密和验证密钥。AutoGenerate 不能在集群中使用。

[我从（ ASPNET 资源](http://aspnetresources.com/tools/machineKey)）生成了一个新的机器密钥并将其放在我的配置文件中，但仍然无法正常工作。有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-26T13:17:19.213

我注意到的一件事是，此错误可能是由`@Html.AntiForgeryToken()`页面上有多段代码引起的。我的页面上有 2 个，一旦我删除了第二个，这个错误就消失了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T14:17:43.973

您应该添加对网站/机器组合唯一的机器密钥。令牌生成器使用的是这个机器密钥。这意味着您应该生成一个机器密钥（您可以在此处执行[此操作（当心死链接）](http://aspnetresources.com/tools/machineKey)并将其添加到您机器上的 Web.config 文件中。您可以在此处找到更多信息：http: [//msdn.microsoft.com /en-us/library/ff649308.aspx](http://msdn.microsoft.com/en-us/library/ff649308.aspx)

您也可以直接从 IIS 中执行此操作：http: [//blogs.msdn.com/b/amb/archive/2012/07/31/easyest-way-to-generate-machinekey.aspx](http://blogs.msdn.com/b/amb/archive/2012/07/31/easiest-way-to-generate-machinekey.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-14T15:05:30.990

在那里我找到了答案[http://iamdotnetcrazy.blogspot.ru/2013/08/how-to-solve-anti-forgery-token-could.html](http://iamdotnetcrazy.blogspot.ru/2013/08/how-to-solve-anti-forgery-token-could.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-05T10:46:10.617

在我的情况下，这是负载均衡器没有为站点打开会话持久性的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-15T16:52:34.077

我有一个使用局部视图的页面。两者都包含 @Html.AntiForgeryToken() 并且在从部分页面中删除 @Html.AntiForgeryToken() 时，它起作用了。

# java - Java：计算时区差异

> ID：15788913
> 
> 赞同：14
> 
> 时间：2013-04-03T13:37:42.127
> 
> 标签：java, timezone, dst

如何在 Java 中获取特定日期和时区与 GMT 的时差？

确定特定时区是否处于 DST 非常简单：

```
boolean isIsraelInDST = TimeZone.getTimeZone("Israel").inDaylightTime(new Date()); 
```

我如何获得实际的时差？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T13:40:25.197

使用 TimeZone.getRawOffset()：*返回添加到 UTC 以获取此时区的标准时间的时间量（以毫秒为单位）。因为这个值不受夏令时影响，所以称为原始偏移量*。

如果您想要包含 DST 的偏移量，则使用 TimeZone.getOffset(long date)。您应该为方法提供具体日期，例如现在 - System.currentTimeMillis()

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-02-26T05:23:09.307

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-06-06T17:59:04.817

我建议将夏季/冬季时间偏移添加到 getRawOffset：

```
 TimeZone tz1 = TimeZone.getTimeZone("GMT");
    TimeZone tz2 = TimeZone.getTimeZone("America/New_York");
    long timeDifference = tz1.getRawOffset() - tz2.getRawOffset() + tz1.getDSTSavings() - tz2.getDSTSavings(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-05T11:41:10.990

我看到这是一个旧线程 - 但添加这个是因为我最近有类似的要求 - 这给出了基于当前时间的实际毫秒差异（来自纪元的毫秒）。

```
 TimeZone.getTimeZone("America/New_York").getOffset(Calendar.getInstance().getTimeInMillis()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-19T10:41:23.073

```
public String timeZone(Date date) {
    TimeZone timeZone = TimeZone.getTimeZone("America/New_York");
    long millis = timeZone.getRawOffset() + (timeZone.inDaylightTime(date) ? timeZone.getDSTSavings() : 0);

    return String.format("%s%s:%s",
            millis < 0 ? "-" : "+",
            String.format("%02d", Math.abs(TimeUnit.MILLISECONDS.toHours(millis))),
            String.format("%02d", Math.abs(TimeUnit.MILLISECONDS.toMinutes(millis) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis))))
    );
} 
```

# android - 适用于 Android 的 Wordpress XML-RPC 只读应用程序

> ID：15788918
> 
> 赞同：0
> 
> 时间：2013-04-03T13:37:54.520
> 
> 标签：android, wordpress, xml-rpc

我正在开发 Android 应用程序来查看我博客上的帖子。我正在使用Wordpress 的[XML-RPC API](http://codex.wordpress.org/XML-RPC_Support)。它甚至[需要用户名和密码](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#Parameters_2)才能阅读帖子。

我发现将管理员/编辑密码放入代码中并不安全。但是，如果我使用其他角色的用户的凭据，它就无法读取整个列表。

为 Wordpress制作**只读**应用程序的安全方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:47:37.177

使用 WordPress 提供的 RSS Feed，而不是 XML-RPC API。

您可以通过将 /feed 添加到您的博客网址来获取您博客的提要。

例如：
博客 URL：[http](http://this.ismysite.com/wordpress/)
://this.ismysite.com/wordpress/ Feed URL：[http ://this.ismysite.com/wordpress/feed](http://this.ismysite.com/wordpress/feed)

实例
博客网址：[http](http://blog.wpde.org/)
://blog.wpde.org/ 饲料网址：[http ://blog.wpde.org/feed](http://blog.wpde.org/feed)

# java - arm-eabi-gcc[1] 语法错误：'@�4pO4' 意外

> ID：15788922
> 
> 赞同：0
> 
> 时间：2013-04-03T13:38:00.093
> 
> 标签：java, android, gcc

我正在尝试在 android 系统上执行 gcc（从此[tarball](http://code.google.com/p/native-android-development/downloads/detail?name=android-gcc-4.4.0.tar.gz&can=2&q=)复制），我收到以下错误：

```
arm-eabi-gcc[1] syntax error: '@�4pO4' unexpected 
```

我正在执行这样的过程：

```
ProcessBuilder pb = new ProcessBuilder("/bin/sh",
                                       "/android-gcc-4.4.0/bin/arm-eabi-gcc",
                                       "--help");
Process p = pb.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:38:00.093

`/android-gcc-4.4.0/bin/arm-eabi-gcc`是 ARM*二进制*可执行文件，但`sh file`使 sh 将二进制文件作为[shell 脚本](http://en.wikipedia.org/wiki/Shell_script)执行。

您可以简单地调用 gcc 本身。您可能还想设置一个[工作目录](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#directory%28java.io.File%29)和/或[环境](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#environment%28%29)：

```
ProcessBuilder pb = new ProcessBuilder("/android-gcc-4.4.0/bin/arm-eabi-gcc",
                                       "--help");
pb.directory(new File("/"));
Process p = pb.start(); 
```

# php - 计算单位价格 (msql/php)

> ID：15788927
> 
> 赞同：0
> 
> 时间：2013-04-03T13:38:11.863
> 
> 标签：php, mysql, calculated-columns

这似乎是一个愚蠢的问题，但我有一个由 SQL 查询填充的表。这是查询和表：

```
select Products, Quantity, Price FROM Products ORDER BY Price ASC 
```

现在，这是使用 php 存储在表中的。如何显示每单位的价格是多少.. 即价格/数量并将其显示在表格上对应的每一行？

我没有在数据库中显示每单位的价格，只是数量的总价格。这是明智的做法还是应该事先显示每单位的价格？

无论如何...有谁知道我怎么能在php中做到这一点？我相信我可能需要使用“AS”
关键字？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:40:20.317

```
select Products, Quantity, Price, (Price/Quantity) as PricePerUnit FROM Products ORDER BY Price ASC 
```

# joomla - 无法查看 joomla 组件

> ID：15788928
> 
> 赞同：0
> 
> 时间：2013-04-03T13:38:16.673
> 
> 标签：joomla, components

我创建了一个由 html 表单组成的 joomla 组件，当我尝试浏览它时：

index.php?option=com_helloworld

我收到错误 404，找不到组件。

我正在关注这个教程：

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

谁能告诉我如何浏览该页面？

更新：这是我的示例组件的链接，它是一个基本的 html 表单。

[http://tinyurl.com/d6tj7rz](http://tinyurl.com/d6tj7rz)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:18:39.513

IIRC，即使组件未正确安装，根据我的经验，如果它在服务器上，您仍然可以访问代码。但这可能是1.5的事情。

如果您没有通过传递 &view=viewname 在 URL 中指定视图，并且您还没有设置默认的后备视图，那么您就不能期望有任何东西出现。

有关如何设置默认视图的一个很好的示例，请查看`components/com_contact/controller.php`第 38 行。

在主控制器的显示方法中：

```
// 从请求中设置默认视图名称和格式。
$vName = $this->input->get('view', 'categories');
$this->input->set('view', $vName);

```

# c++ - 在 Visual C++ 2010 中编程

> ID：15788932
> 
> 赞同：-3
> 
> 时间：2013-04-03T13:38:32.077
> 
> 标签：c++, visual-studio-2010, forms

我是这个开发工具的新手，我想为我的项目开发一个应用程序，我需要一个 GUI 来从用户那里获取值，这些值将被我的程序用来显示输出所以这就是我想要的：

1.如果可以，我可以将 Visual Studio 表单用于前端吗？我如何将值从表单发送到我的程序

2.如何从文本框中获取值？=textBox1->Text; “？”中的变量应该是什么？什么是变量类型

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             =textBox1->Text;
         } 
```

我希望将值转换为整数我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:51:24.633

1.  是的，您可以将 VStudio 表单用于前端。您没有提供有关您的其他程序的太多详细信息。我想说，如果你想在程序之间传递一些值，有多种方法。

    A）命令行参数。

    B）将值存储在文件中，其他程序将读取该文件。

    C) 进程间通信 - 可以使用内存映射文件。

    D) 如果两个程序同时运行，也可以使用套接字。

2.  您可以从字符串类型变量中的文本框中获取值，如下所示

    ```
    System::String^ s =textBox1->Text; 
    ```

    您可以将值转换为任何其他数字类型，如下所示 -

    ```
    Int16 intValue = Convert::ToInt16(s); 
    ```

# string - 字符串Selenium ide的切割长度

> ID：15788934
> 
> 赞同：0
> 
> 时间：2013-04-03T13:38:37.607
> 
> 标签：string, selenium, string-length

切割字符串长度所需的代码是什么？
可以说我有`${var}="abcdefghijklmn"`，`${var2}="cdefghijklmnopqr"`但我希望他们两个都在 6 个字母后停止。`${var}`将会`"abcdefgh"`和`${var2}`将会如此`"cdefghij"`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-06-16T10:13:15.933

这是“如何将字符串 1 从 20 中拆分为“1”和“20”的复制和粘贴

```
|store | 1 out of 20 | Text |

|storeEval | "${Text}".split(" ")[0] | firstsection |

|echo | ${firstsection} | |

[info] echo: 1

|storeEval | "${Text}".split(" ")[3] | lastsection |

|echo | ${lastsection} | |

[info] echo: 20 
```

# weblogic - WebSphere MQ 6.0：无法从非持久切换到持久

> ID：15788943
> 
> 赞同：0
> 
> 时间：2013-04-03T13:39:01.557
> 
> 标签：weblogic, ibm-mq, jms-topic

当我从非持久主题订阅者切换到持久主题订阅者时，我无法查找之前可以阅读的主题名称（使用 JNDI）。

当正在查找主题时，它会在管理控制台中出现错误：

```
An error occurred during activation of changes, please see the log for details.
ERROR: Could not activate itft-jmsmodule!ITFT-JMS-1@ItftTopic
The Messaging Kernel ITFT-JMS-1 has not yet been opened 
```

我正在使用 Oracle WebLogic Server 管理控制台来设置 WebSphere 队列。在控制台上，我进行了以下更改：

*   对于持久存储，在配置选项卡上，添加了一个名为的文件存储`ItftFileStore`
*   对于持久存储，在配置选项卡上，添加了一个目录。
*   对于 JMS 服务器，在 Configuration -> General 选项卡上，将 Persistent Store 更改为`ItftFileStore`
*   对于 JMS 服务器，在配置 -> 常规选项卡 -> 高级中，选中该`Store Enabled`字段。
*   对于 ItftTopic，配置 -> 覆盖选项卡，更改`Delivery Mode Override`为`Persistent`.

这是我正在运行的代码。对相关行有一些评论。

```
public void start() throws Exception {
    try {

        LOG.info("Starting the FC MQ message consumer / listener ...");

      InitialContext initialContext = getInitialContext();

      topicConnectionFactory  = (TopicConnectionFactory) initialContext.lookup(jmsFactory);
      topicConnection      = topicConnectionFactory.createTopicConnection();
      topicConnection.setClientID(clientId);
      LOG.info("1"+topicConnection.getClientID());
      topicSession       = topicConnection.createTopicSession(false, Session.CLIENT_ACKNOWLEDGE);
      LOG.info("2"+topicConnection.getClientID());
      //topicConnection.setExceptionListener(connectionExceptionListener);

      jmsTopic = (Topic) initialContext.lookup(topic);   // Error being thrown here
      LOG.info("3"+topicConnection.getClientID());
      //topicSubscriber = topicSession.createSubscriber(jmsTopic); // Works as a non-durable subscriber
      topicSession.createDurableSubscriber(jmsTopic,subscriberName); 
      LOG.info("4"+topicConnection.getClientID());
      topicSubscriber.setMessageListener(messageListener);

      topicConnection.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:21:18.987

问题的基本方面是您正在将 WebLogic 连接到 Websphere JMS 主题，这在您的问题的最后编辑中变得很清楚，但不清楚您是否使用**WebLogic Messaging Bridge**。Messaging Bridge 是在 WebLogic 中配置外部 JMS 服务器的正确方法。我建议阅读[这个常见问题解答](http://docs.oracle.com/cd/E13222_01/wls/docs100/jms/interop.html)和这个[特定](http://weblogic-wonders.com/weblogic/2010/11/24/weblogic-foreign-jms-server-configuration-with-mq-series/)于 Websphere 的操作方法。

# c++ - 我在哪里可以在 C++11 中使用 alignas()？

> ID：15788947
> 
> 赞同：35
> 
> 时间：2013-04-03T13:39:06.317
> 
> 标签：c++, c++11, alignment, alignas

为了标准化我的代码并使其更具可移植性，我替换了

```
#ifdef __GNUC__
typedef __attribute__((aligned(16))) float aligned_block[4];
#else
typedef __declspec(align(16)) float aligned_block[4];
#endif 
```

和

```
typedef float alignas(16) aligned_block[4]; 
```

在 C++11 中。但是，gnu（4.8）不喜欢这样，但抱怨

```
test.cc:3:9: warning: attribute ignored [-Wattributes]
  typedef float alignas(16) aligned_block[4];
                ^
test.cc:3:9: note: an attribute that appertains to a type-specifier is ignored 
```

而 clang 3.2 不会产生任何警告（即使使用`-Weverything -Wno-c++98-compat -pedantic`）。所以我想知道我上面的代码是否正确，更一般地说，`alignas()`可以和不可以放在哪里。

***编辑（2013 年 4 月）***：

标准中的相关条款是 7.6.2，特别是 7.6.2.1

> 对齐说明符可以应用于变量或类数据成员，但不应应用于位字段、函数参数、catch 子句（15.3）的形式参数或用注册存储类说明符。对齐说明符也可以应用于类或枚举类型的声明。带有省略号的对齐说明符是包扩展 (14.5.3)。

正如 Red XIII 已经挖掘出来的那样。但是，我不够专业，不知道这对我上面的测试意味着什么。

如果 clang 接受我的属性这一事实意味着什么，那么也许值得一提的是，当尝试使用`using`指令而不是 a`typedef`时，clang 也会抱怨。此外，与此问题早期版本中的声明相反，gcc 不仅警告，而且确实忽略了我对对齐的愿望。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-09T20:48:33.720

我认为您只是将其放置`alignas`在错误的位置。如果将它直接移动到标识符*之后*，GCC 和 Clang 都会很高兴并应用对齐方式：

```
typedef float aligned_block alignas(16) [4];
typedef float aligned_block [4] alignas(16); 
```

如果您使用 也是如此`using`，其中差异也变得更加明显。以下是GCC*不*接受的两个版本（警告，忽略对齐）：

```
using aligned_block = float alignas(16)[4];
using aligned_block = float[4] alignas(16); 
```

这是公认的：

```
using aligned_block alignas(16) = float[4]; 
```

我认为 GCC 适用

> ### 7.1.3 typedef 说明符 [dcl.typedef]
> 
> ² *typedef-name*也可以由alias *-declaration*引入。关键字后面的标识符*成为*`using`typedef *-name*，标识符后面的**可选****属性*说明**符***序列属于该*typedef-name*。它具有与由说明符引入的语义相同的语义`typedef`。[...]

（强调我的）

上面的内容很清楚`using`，规则`typedef`分布在几个段落中，包括在 §8.3/1 的末尾，您可以在其中找到：

> ### 8.3 声明符的含义[dcl.meaning]
> 
> ^(1 [...])***声明符 id*****后面**的可选*属性说明符* 序列属于声明的实体。

 *（再次强调我的）

* * *

更新：上述答案集中在**必须**`alignas`放置的位置，而不是其确切含义。再想一想，还是觉得上面说的应该是成立的。考虑：

> ### 7.6.2 对齐说明符 [dcl.align]
> 
> ¹对齐说明*符*可应用于变量或类数据成员，但不应应用于位字段、函数参数、*异常声明*(15.3) 或使用`register`存储类声明的变量说明符。对齐说明*符*也可以应用于类的声明或定义（分别在*详细类型说明符*（7.1.6.3）或*类头*（第 9 条）中）以及枚举的声明或定义（分别在*opaque-enum-declaration*或*enum-head*中（7.2））。带有省略号的*对齐说明符是包扩展 (14.5.3)。*

它列出了可以明确应用的情况，列出了明显*不能*应用的情况。上述问题的例子都不是。

也有人可能会争辩说，类型别名由创建`typedef`或`using`携带对齐规范作为别名类型的一部分。此别名可用于创建 7.6.2p1 允许的变量等，但不能使用`register`等创建变量。

从这个意义上说，我认为属性说明符以延迟的方式应用（在 7.6.2 的意义上），因此当对齐说明放在语法正确的位置时，OPs 示例应该仍然有效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-30T19:44:27.863

您不能将对齐应用到`typedef`. 在对齐说明符的 C++ 模型中，对齐是类型本身不可分割的一部分，并且 a`typedef`不会创建新类型（它只是为现有类型提供新名称）因此在中应用对齐说明符没有意义一份`typedef`声明。

从**[dcl.align] (7.6.2)p1**：

> 对齐说明*符*可以应用于变量或类数据成员[...]。对齐说明*符*也可以应用于类的声明或定义（分别在*详细类型说明符*（7.1.6.3）或*类头*（第 9 条）中）以及枚举的声明或定义（分别在*opaque-enum-declaration* 或*enum-head*中（7.2））。

这些是标准规定可以应用*对齐说明符*( )的唯一地方。`alignas(...)`请注意，这**不**包括`typedef`声明或*alias-declaration*。

根据**[dcl.attr.grammar] (7.6.1)p4**：

> 如果属于某个实体或语句的*属性**说明符*序列包含不允许应用于该实体或语句的属性，则该程序是非良构的。

 *此措辞旨在适用于`alignas`以及可能出现在*属性说明符*序列中的其他形式的属性，但是当对齐从“真实”属性切换为不同类型的*属性说明符时未正确更新-seq*。

所以：您使用的示例代码`alignas`应该*是*格式错误的。C++ 标准目前没有明确说明这一点，但它也不允许使用，因此它目前会导致未定义的行为（因为标准没有为它定义任何行为）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-03T15:35:00.223

C++ 11 标准草案[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)对此进行了说明（对齐说明符的形式为`alignas`（赋值表达式）） ：

> 7.6.2 对齐说明符 [dcl.align]
> 
> 1 对齐说明符可应用于变量或类数据成员，但不得应用于位字段、函数参数、catch 子句（15.3）的形式参数或用寄存器存储类说明符。对齐说明符也可以应用于类或枚举类型的声明。带有省略号的对齐说明符是包展开。

我找到了这个原始提案[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1877.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1877.pdf)，它说：

> 对齐说明符不会成为类型的一部分，但可以创建具有对齐成员变量的类类型。

用这个例子：

```
// Wrong attempt: Listing 6)
typedef double align_by<0x10000> hwDoubleVector; // Error!
Void clear(hwDoubleVector &toClear, unsigned size); 
```

看起来与它一起使用是非法的`typedef`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T16:27:43.183

尝试：

```
typedef float alignas(16) aligned_block[4]; 
```**

# assemblies - 加载所有引用的程序集 .NET，即使未在代码中显式使用

> ID：15788948
> 
> 赞同：5
> 
> 时间：2013-04-03T13:39:07.047
> 
> 标签：assemblies, autofac

我们有一个使用 Autofac 的 Windows 服务，当我们尝试加载引用的程序集时，并不是所有的程序集都被列为一些包含我们在应用程序的任何地方都没有使用的对象，但是接口实现在那里我们需要被包括在内。以下方法加载程序集：

```
private IEnumerable<Assembly> GetReferencedAssemblies(Assembly assembly)
{
  var assemblyNames = assembly.GetReferencedAssemblies();

  List<Assembly> assemblies = new List<Assembly>();
  assemblies.Add(assembly);
  foreach (var item in assemblyNames)
  {
    var loadedAssembly = System.Reflection.Assembly.Load(item.FullName);
    assemblies.Add(loadedAssembly);
  }

  return assemblies;
} 
```

如果我们对包含在程序集中的对象进行虚拟引用，那么它将加载程序集并且类型由 autofac 构建，如果我们删除虚拟对象，则不再包含程序集。

有没有办法包含所有引用的程序集，无论您是否直接使用其中的对象（请记住，我们仍然需要它，因为接口实现在那里）。

这在 ASP.NET 上运行良好，因为它只是加载 bin 中的所有 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:41:48.907

如果您没有实际引用程序集中的类型，编译器将删除该引用，因为它被认为是多余的。您需要使用 . 手动将所需的程序集加载到 AppDomain 中`Assembly.Load()`。如何确定要加载的程序集取决于您。您可以选择查看特定文件夹中的文件，也可以使用包含程序集名称的配置文件。

# knockout.js - 从 Durandal 模态对话框返回某些内容

> ID：15788952
> 
> 赞同：4
> 
> 时间：2013-04-03T13:39:14.640
> 
> 标签：knockout.js, durandal

我使用 Durandal 模板开发了一个 asp.net 解决方案。

我想使用**模态对话框**来选择表格中的元素并将所选元素返回到主视图模型。

这是我到目前为止所拥有的：

在主视图上，我有一个链接`(changer)`允许我打开模式对话框：

![在此处输入图像描述](https://i.stack.imgur.com/aA1V4.png)

这是单击链接时调用的 viewModel 的函数：

```
var changeSender = function (item) {
    app.showModal('viewmodels/sender');
}; 
```

所以我打开名为`sender`.

下面是 viewModel 的`sender`：

```
define(function (require) {

    var system = require('durandal/system'),
        datacontext = require('services/datacontext');

    var senders = ko.observableArray();

    var activate = function () {
        return datacontext.getSenders(senders);
    };

    var buttonOk = function (dialogResult) {
        this.modal.close(dialogResult);
    }

    var buttonCancel = function () {
        this.modal.close();
    }

    var vm = {
        activate: activate,
        senders: senders,
        buttonOk: buttonOk,
        buttonCancel: buttonCancel
    };

    return vm;
}); 
```

以下是“发件人”的视图：

```
<div class="messageBox autoclose" style="max-width: 500px">
    <div class="modal-header">
        <h3>Expéditeur</h3>
    </div>
    <div class="modal-body">
          <table class="">
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Street</th>
                    <th>City</th>
                </tr>
            </thead>

            <tbody data-bind="foreach: senders">
                <tr data-bind="attr: {'data_id':id}">
                    <td><input type="radio" name="isSelected" data-bind="checked: isSelected" /></td>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: street"></td>
                    <td data-bind="text: city"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-bind="click: buttonOk">Ok</button>
        <button class="btn" data-bind="click: buttonCancel">Cancel</button>
    </div>
</div> 
```

![在此处输入图像描述](https://i.stack.imgur.com/PHZfH.png)

**我的问题**是我不知道如何识别选定的单选按钮并将其返回到主视图。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T16:29:48.490

您可以在 dialogResult 对象上添加任何您想要的内容或完全替换它。

```
var buttonOk = function (dialogResult) {
    dialogResult.checkedValue = 'Cogema';
    this.modal.close(dialogResult);
} 
```

然后，您可以从主视图模型中的对话框访问结果，如下所示：

```
var changeSender = function (item) {
    app.showModal('viewmodels/sender').then(function(dialogResult){
        // use dialogResult.checkedValue here
    });
}; 
```

# javascript - 在加载和更改时运行脚本

> ID：15788956
> 
> 赞同：0
> 
> 时间：2013-04-03T13:39:23.863
> 
> 标签：javascript, jquery, search

因此，我正在创建一个Google自定义搜索，该搜索具有一个复选框，该复选框会导致使用不同的Google自定义搜索，这是IM使用的代码，这是我的问题。我不知道当我点击搜索时脚本是否运行，因此没有得到新的更改。因此，当我选中该框时，我希望脚本再次重新运行，但我也希望脚本在加载时运行。

```
 <script>
    (function() {
     if (jQuery('#sota').is(':checked')) {var cx = '001285214241856463016:s82pvcctjhm';} else {var cx ='001285214241856463016:zrd6kn8chti';}
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
    </script>
    <form class="sech">
        <input id="sota" type="checkbox" name="vehicle" value="Bike">Search Only Technologies Available For Licensing
    </form>
    <gcse:search></gcse:search> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:44:45.107

在加载时运行函数：

```
window.onload = function() {
  //do stuff
} 
```

在选中复选框时运行

```
<input id="sota" type="checkbox" name="vehicle" value="Bike" onchange="chgFn(this)">
<script>
function chgFn(chkBox) {
  if(chkBox.checked){
      //do stuff
  }
}
</script> 
```

# forms - Drupal 7 - 在同一页面上登录/注册 - 登录尝试后注册表错误

> ID：15788961
> 
> 赞同：0
> 
> 时间：2013-04-03T13:39:42.140
> 
> 标签：forms, drupal

我使用面板（两列布局和块）在同一页面上创建了带有登录和注册表单的页面。在登录块的模板文件中，我有：

```
print(drupal_render(drupal_get_form('user_login_block'))); 
```

在寄存器块中，我有：

```
print(drupal_render(drupal_get_form('user_register_form'))); 
```

但是我在提交数据不正确的表单时遇到问题。提交注册表后，我仅在注册表中出现错误（正确），但在提交登录表单后，我在登录表单和注册表中出现错误。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:55:32.790

[http://drupal.org/project/logintoboggan](http://drupal.org/project/logintoboggan)模块将为您执行此操作：安装它，然后转到 admin/config/system/logintoboggan；选择“呈现统一的登录/注册页面”。

另外，如果您想编写自己的模块，可以查看其源代码

# java - Avaje Ebean：为什么它插入具有相同 ID 的对象而不是更新对象？

> ID：15788964
> 
> 赞同：1
> 
> 时间：2013-04-03T13:39:54.477
> 
> 标签：java, ebean

我正在学习ebean，首先我正在测试官方网站上的示例代码，所以我有这个代码：

```
ESimple e = new ESimple();  
e.setName("test");  
e.setDescription("something");  

// will insert  
Ebean.save(e);  

e.setDescription("changed");  

// this will update  
Ebean.save(e); 

// find the inserted entity by its id  
ESimple e2 = Ebean.find(ESimple.class, e.getId());  
System.out.println("Got "+e2.getDescription());  

Ebean.delete(e); 
```

ESimple 就是这个简单的类：

```
@Entity  
@Table(name="e_junktable")
public class ESimple {

    @Id 
    Integer id;  

    String name;  

    String description;  

    @Version  
    Timestamp lastUpdate;

    // getters, setters

} 
```

运行上面的代码，我从日志中得到了那个错误：

```
txn[1003], 15:32:11.019, insert into e_junktable (id, name, description) values (?,?,?) 

txn[1003], 15:32:11.019, Binding Insert [e_junktable]  set[id=1, name=test, description=something, ] 

txn[1003], 15:32:11.024, Inserted [ESimple] [1] 

txn[1004], 15:32:11.024, insert into e_junktable (id, name, description) values (?,?,?) 

txn[1004], 15:32:11.024, Binding Insert [e_junktable]  set[id=1, name=test, description=changed, ] 

txn[1004], 15:32:11.039, ERROR executing DML bindLog[Binding Insert [e_junktable]  
set[id=1, name=test, description=changed, ]] error[Unique index or primary key violation: "PRIMARY_KEY_C ON PUBLIC.E_JUNKTABLE(ID)"; SQL statement:\n insert into e_junktable (id, name, description) values (?,?,?) [23505-170]] 
```

错误在第二个`Ebean.save(e)`。

似乎它没有更新数据库中的对象，而是尝试插入一个具有相同 id 的新对象，为什么？

我使用 ebean 2.7.7、h2 1.3.170 作为数据库。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:26:59.637

理论上，如果 bean 没有被增强并且你没有 @Version 属性，你可以得到这个 - 但你有。

所以，不确定。您可以尝试使用调试器并查看为什么第二次插入被视为这样（不是更新），或者您可以使用最新的 Ebean 确认相同的行为

# objective-c - NSMutableArray 子类初始化

> ID：15788967
> 
> 赞同：0
> 
> 时间：2013-04-03T13:40:08.243
> 
> 标签：objective-c, nsmutablearray

我正在尝试为仅使用整数的 NSMutableArray 子类创建一个函数，但我不想使用“计数”。我该怎么做呢？

```
-(NSMutableArrayWithIntegers*)initWithCount:(NSInteger)count numbers:(NSInteger)firstInt, ...
{
    self = [super init];

    if (self) {
        va_list args;
        va_start(args, firstInt);
        NSInteger arg = firstInt;
        for (int i = 0; i < count; i++)
        {
            arg = va_arg(args, NSInteger);
            [self addObject: [NSNumber numberWithInteger:arg]];
        }
        va_end(args);
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:05:55.717

我知道这不能回答你的问题，但让你知道很重要。永远不要子类化`NSMutableAnything`。使用类别并稍后感谢我：

```
@interface NSMutableArray (ListOfIntegers)

+(NSMutableArray)mutableArrayWithIntegers:(NSInteger)i, ... {
   NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:whatever];
   // do your thing
   return array;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:52:07.670

首先，**您目前使用的方法很好。**不要试图摆脱计数。有其他选择，但它们只会更糟。

例如，您可以使用标记值（可能未插入到数组中）作为最后一个参数，但在这种情况下，您必须确保您实际上根本没有尝试将该值插入到数组中：

```
- (id)initWithIntegers:(NSInteger)first, ...
{
    if (!(self = [super init])) return nil;

    va_list args;
    va_start(args, first);
    NSInteger n;
    if (first != NSIntegerMax) {
        [self addObject:@(first)];
        while ((n = va_arg(args, NSInteger)) != NSIntegerMax) {
            [self addObject:@(n)];
        }
    }

    va_end(args);

    return self;
} 
```

但实际上，这不必要地缩小了可以添加的值的范围 - 使用该`count`参数并不是什么大问题。

# c++ - 将对父对象的引用传递给需要子对象的函数

> ID：15788968
> 
> 赞同：0
> 
> 时间：2013-04-03T13:40:15.097
> 
> 标签：c++, function, inheritance, parent

我有父类“Entry”，它有两个孩子，收入和费用。我希望能够有一个像这样工作的函数：

```
bool SomeObject::removeEntry(Entry& item, list<Entry> *l)
{
    if (l==&incomeHis)
        return removeIncome(item);
    if (l==&expHis)
        return removeExp(item);
} 
```

是否可以？函数`removeExp()`需要类的对象`Expense`。由于我通过引用传递它，我知道它应该没问题，但编译器不同意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:54:04.393

编译器是正确的，因为它不能确保该`Entry`行中的每个都恰好是`Expense`.

可以这么说，你已经把*自己设计成了一个角落*。

更好的设计是`SomeObject::removeEntry`直接执行`removeIncome`和共有的任何逻辑`removeExp`。在逻辑不同的地方，调用一个**虚函数**on `item`，这两种类型可能不同。

# python - 函数总是返回 None

> ID：15788969
> 
> 赞同：11
> 
> 时间：2013-04-03T13:40:19.587
> 
> 标签：python, return

我有一些基本上看起来像这样的 Python 代码：

```
my_start_list = ...

def process ( my_list ):
    #do some stuff

    if len(my_list) > 1:
        process(my_list)
    else:
        print(my_list)
        return my_list

print(process(my_start_list)) 
```

奇怪的是：`print(my_list)`打印出正确的内容。但是，打印函数返回值的第二条打印语句总是打印`None`. 即使我`return`用它替换正常的语句`return("abc")`仍然是`None`.

由于变量的内容在 return 语句前一行似乎是正确的，我不知道从哪里开始调试。是否有任何常见问题可能导致此问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T13:50:13.770

这是发生的事情：

1.  你打电话`process(my_start_list)`。
2.  在函数中，该`if`块被执行 if `len(my_list) > 1`，并且那里没有 return 语句。现在，由于`else`尚未执行，并且因为这是您拥有 return 子句的唯一地方，所以您返回默认值，即`None`.
3.  如果列表中有 0 或 1 个元素，则返回该列表。

要解决此问题，您需要返回由`process(my_list)`.

那是：

```
def process(my_list):
    # do some stuff
    ...
    if len(my_list) > 1:
        return process(my_list)
    else:
        print(my_list)
        return my_list 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T13:42:29.783

只有当列表中有 1 或 0 个元素时（基本情况），您才会返回列表。您还需要在第一个块中使用 return 语句，在其中进行递归调用，或者深入到基本情况，将长度为 1 的列表返回到下一个级别，然后返回`None`其余部分。所以你想要的看起来像这样，而不是：

```
def process(my_list):
    # Do some stuff.
    if len(my_list) > 1:
        return process(my_list) #If you don't return this result, you return None
    else:
        print(my_list)
        return my_list 
```

现在*每个*案例（不仅仅是基本案例）都有一个返回值，因此该返回值将一直传播到您的初始调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T13:43:33.973

你`process`递归地调用，但当你这样做时永远不要忽略它的返回值。添加一个`return`语句来*传递*返回值::

```
def process ( my_list ):
    #do some stuff

    if len(my_list) > 1:
        return process(my_list)
    else:
        print(my_list)
        return my_list 
```

现在，当`len(my_list) > 1`is时`True`，您实际上传递了递归调用的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T13:58:35.467

正如其他人指出的那样，您缺少一个`return`声明。

我个人会将尾递归变成迭代：

```
def process(my_list):
    while True:
        # do some stuff
        if len(my_list) <= 1:
            return my_list 
```

我认为这使意图更加清晰，并且还避免了[与尾递归相关的一些陷阱](https://stackoverflow.com/questions/13591970/does-python-optimize-tail-recursion)。

# jquery - Jquery mouseenter 和 mouseleave 应该只触发“活动”.class

> ID：15788972
> 
> 赞同：2
> 
> 时间：2013-04-03T13:40:22.253
> 
> 标签：jquery, mouseenter, mouseleave

我的问题可能很简单。我目前有多个具有相同类的按钮。当您悬停按钮时，我希望显示一个包含与按钮相关的特定信息的 div (.blockButtonTips)。

我现在的问题是，当我悬停一个按钮时，div 会成功显示，但是它会出现在我的所有按钮上，而我只希望它出现在悬停的按钮上。

我可以为每个 .blockButtonTips 添加一个唯一标识符，但想知道我是否真的能够在没有它的情况下定位它？

代码

```
 //MOUSEOVER
        $(".blockButton").mouseenter(function() {
            //Passing on .class div to a function
            circleTextShow(".blockButtonTips");
        })
        //MOUSEOUT
        $(".blockButton").mouseleave(function() {
            timer= setTimeout(function() {
                //Passing on .class div to dis-appear to a function
                circleTextHide(".blockButtonTips");
            }, delay);
        });

    //Toggle div animation
    function circleTextShow(elementId) {
//make div appear animation code
    }

    function circleTextHide(elementId) {
//make div dis-appear code
    } 
```

HTML

```
<div class="blockButton">
    <div class="blockButtonTips">Text 1</div
</div>
<div class="blockButton">
    <div class="blockButtonTips">Text 2</div
</div>
<div class="blockButton">
    <div class="blockButtonTips">Text 3</div
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:42:28.770

将对按钮中包含的 div 的引用传递给 circleTextShow / Hide 函数。

```
//MOUSEOVER
        $(".blockButton").mouseenter(function() {
            //Passing on .class div to a function
            circleTextShow($(this).find('.blockButtonTips'));
        })
        //MOUSEOUT
        $(".blockButton").mouseleave(function() {
            var blockbutton = this;
            timer= setTimeout(function() {
                //Passing on .class div to dis-appear to a function
                circleTextHide($(blockbutton).find('.blockButtonTips'));
            }, delay);
        }); 
```

然后在函数中，您可以这样引用提示：

```
 //Toggle div animation
  function circleTextShow(element) {
     //make div appear animation code
     $(element).show();
  }

  function circleTextHide(element) {
     //make div dis-appear code     
     $(element).hide();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:43:17.470

发送`$(this).find('.blockButtonTips')` 到函数并使用它来显示或隐藏

```
//MOUSEOVER
    $(".blockButton").mouseenter(function() {
        //Passing on .class div to a function
        circleTextShow($(this).find('.blockButtonTips'));
    })
    //MOUSEOUT
    $(".blockButton").mouseleave(function() {
        timer= setTimeout(function() {
            //Passing on .class div to dis-appear to a function
            circleTextHide($(this).find('.blockButtonTips'));
        }, delay);
    });

//Toggle div animation
function circleTextShow(element) {
  element.show()
}

function circleTextHide(elementId) {
    element.hide()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:54:37.860

一种稍微修改的防弹方法，使用
`.on([delegated events])`,
`Ternary operator (?:)`,
`inversed-hover-intent`使用`data-*`属性，
并`setTimeout`在你的函数中移动

**给出了这个漂亮的结果：**

`**[LIVE DEMO](http://jsbin.com/ewusuq/3/edit)**`

```
$(".blockButton").on('mouseenter mouseleave', function( e ) {
    var $tip = $('div', this); // Target the children .blockButtonTips 
    return e.type=="mouseenter" ? circleTextShow($tip) : circleTextHide($tip) ;
});

function circleTextShow( tip ) {
    clearTimeout( tip.data('wait') );
    tip.stop().fadeTo(500,1);
}

function circleTextHide( tip ) {
    tip.data('wait', setTimeout(function(){
       tip.stop().fadeTo(500,0);
    },300) );        
} 
```

# report - 打印包含子表单的报告我打印预览

> ID：15788974
> 
> 赞同：0
> 
> 时间：2013-04-03T13:40:26.070
> 
> 标签：report, ms-access-2007

我有一份由 3 个子表单组成的报告（封面表单、详细信息表单、图像表单） 封面表单仅用作我的报告的封面。详细信息表单是一个连续的表单，它为添加的每条记录显示大约 10 行的详细信息段落。图片表单也是一个连续的表单，显示用户上传的任何图片。报告可以是任何大小，例如，用户可以在详细信息表单中添加 1 到 40 条记录之间的任何内容，图像表单也是如此。目前我的报告在打印预览中没有正确布局。我的意思是，例如，如果报告打印预览中的详细信息表单中有 4 条记录，则 4 条记录显示在 1 页上，但第 4 条记录中的一些详细信息进入下一页。有没有办法可以设置我的报告，所以它限制每个打印页 3 条记录，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:47:11.983

我似乎明白了，如果您在报告中使用子报告而不是子表单，它会完美运行

# javascript - 从函数评估值时，$watch 似乎不起作用

> ID：15788977
> 
> 赞同：2
> 
> 时间：2013-04-03T13:40:35.327
> 
> 标签：javascript, angularjs, angularjs-service

我有一个渲染 gridBlocks 的中继器。这些块中的每一个都具有*“Vote Good”*、*“Vote Bad”*或*“No vote”* （出于我们的目的）的属性。除其他外，该属性控制块的 CSS 类。

用户投票的数据结构通过 访问`userService`，它公开了更新投票、执行 ajax 调用等的方法。

**我的问题是这样的：**

我`voteClass`通过调用`userService`. 我想查看此属性并在其模型更改时相应地更新 UI。

但是，这似乎不起作用-即使值确实发生了变化，`voteClass`也不会重新评估并且不会调用。`$watch``getVoteClass(scope.block.id)`

我试过使用`$apply`，但这似乎并没有改变任何东西。

非常感谢您的意见...

**Update1**：我认为即使`getVoteClass(scope.block.id)`更改的值，块范围属性也不会。有没有办法强制块范围重新评估其属性？

**更新 2 - 问题已解决：在**[CaioToOn](https://stackoverflow.com/questions/12008908/pass-variables-between-controllers/12009408?noredirect=1#comment22461215_12009408) 和 Gloopy 的帮助下，我意识到错误在于范围属性引用了原始字符串这一事实。为了克服这个问题，您可以观察一个函数，或者使用对对象属性的直接引用（而不是原始字符串）。

* * *

控制器：

```
 var gridController=['$scope', "userService", function($scope, userService) {

        $http.get(url).success(function(data) {
            $scope.blocks = data;
        });

        $scope.getLookVoteStatus = userService.getLookVoteStatus

    }]; 
```

指示：

```
.directive('gridBlock', function() {
        return {
            link: function(scope, element, attrs) {

                scope.voteClass=getVoteClass(scope.block.id);
                scope.$watch('voteClass',function(newValue, oldValue) {                                                
                    element.addClass(newValue);
                });

             }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:47:42.977

is 在第`voteClass`一次调用后没有改变，虽然返回`getVoteClass`是，但它不会再次被调用。

为了不改变你的例子，正确的方法是：

```
function checkForVoteClass() {
  return getVoteClass(scope.block.id);
}

scope.$watch(checkForVoteClass,function(newValue, oldValue) {                                                
  element.addClass(newValue);
}) 
```

但请记住，每次 $apply 发生在系统中的任何位置时，都会重新评估。

那么，什么时候 getVoteClass 会返回一个不同的值呢？关于用户交互？如果是，那么最好的方法应该是这样的：

```
<span ng-click="vote='bad'">Bad</span>
<span ng-click="vote='good'">Good</span>
<span id="thisIsYourElement" 
  ng-class="{bad: 'badCssClass', good: 'goodCssClass', 'undefined': 'noVoteClass'}[vote]"
  >Your content</span> 
```

当然，它非常简化。

# .net - 在 64 位操作系统上使用 32 位任务从跳转任务中打开 explorer.exe

> ID：15788985
> 
> 赞同：0
> 
> 时间：2013-04-03T13:40:48.793
> 
> 标签：.net, windows-7, 32bit-64bit, jump-list

我有一个 32 位应用程序，我想注册打开“explorer.exe”作为跳转任务。它在 32 位 Windows 7 上运行良好，但在 64 位 Windows 中，它会给出错误“C:\Windows\system32\explorer.exe 未指定错误”。

由于资源管理器的完整路径是“C:\Windows\SysWOW64\explorer.exe”，我认为这是 Windows 在运行时看到 32 位模拟路径的结果，但跳转列表需要完整的 64 位路径。有没有一种简单的方法来构建这个可以在 64 位操作系统上运行的跳转列表？

我想我可以检查 Environment.Is64BitOperatingSystem 并将位置硬编码为“C:\Windows\SysWow64”（如果已设置），但使用硬编码路径很糟糕。

```
string exe = System.Reflection.Assembly.GetExecutingAssembly().Location;
string current = System.IO.Path.GetDirectoryName(exe);
var jl = new System.Windows.Shell.JumpList();
jl.ShowFrequentCategory = false;
jl.ShowRecentCategory = false;
jl.BeginInit();
jl.JumpItems.AddRange(new[]
    {
        new System.Windows.Shell.JumpTask
        {
            Title = "Explore",
            ApplicationPath = "explorer.exe",
            IconResourcePath = "explorer.exe",
            Arguments = "/select,\"" + exe,
            WorkingDirectory = current,
        },
        // other jump tasks here
    });
jl.EndInit();
jl.Apply(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:54:57.493

我在这里找到了答案[How to start a 64-bit process from a 32-bit process](https://stackoverflow.com/questions/2003573/how-to-start-a-64-bit-process-from-a-32-bit-process?rq=1)

“sysnative”的东西在这种情况下不起作用，但暂时禁用文件系统重定向有效：

```
[DllImport("kernel32.dll", SetLastError = true)]
private static extern bool Wow64DisableWow64FsRedirection(ref IntPtr ptr);
[DllImport("kernel32.dll", SetLastError = true)]
private static extern bool Wow64RevertWow64FsRedirection(IntPtr ptr);

    if (Environment.Is64BitOperatingSystem && !Environment.Is64BitProcess)
        Wow64DisableWow64FsRedirection(ref ptr);
    try
    {
        // Add jump list code
    }
    finally
    {
        if (Environment.Is64BitOperatingSystem && !Environment.Is64BitProcess)
            Wow64RevertWow64FsRedirection(ptr);
    } 
```

# java - 引用从不同目录中的 jsp 打包的 servlet

> ID：15788987
> 
> 赞同：1
> 
> 时间：2013-04-03T13:40:54.463
> 
> 标签：java, jsp, url, servlets

我正在尝试在 jsp 中调用 Servlet。但是 servlet 是打包好的。

Servlet 在这里：

```
com.servlet.java.Cars 
```

并且在 JSP 中是在这个目录中：

```
com/servlet/resources/Cars.jsp 
```

在 JSP 表单中，我这样做：

```
action= <%=request.getContextPath()+"/com/servlet/java/Cars"%> 
```

但是当我运行这个时，我没有得到 servlet 的响应，好像 servlet 什么也没打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:45:10.117

`com.servlet.java.Cars`使用 url-mapping 在 web.xml 中定义 Servlet `/com/servlet/java/cars`。

```
<servlet>
  <servlet-name>Cars</servlet-name>
  <servlet-class>com.servlet.java.Cars</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>Cars</servlet-name>
  <url-pattern>/com/servlet/java/cars</url-pattern>
</servlet-mapping> 
```

在你的 JSP 中，像下面这样使用它

```
<form method="GET" action="/com/servlet/java/Cars"> 
```

# java - java中request触发的进程状态

> ID：15788989
> 
> 赞同：0
> 
> 时间：2013-04-03T13:40:58.880
> 
> 标签：java, servlets

是否可以获取请求触发的进程状态。

假设，我有一个请求，它将触发长时间运行的进程，比如在服务器端复制一些文件，或者其他一些真正长时间运行的进程。现在我想向用户展示该任务的完成百分比。

如何在 Java Servlet 或任何其他支持此功能的框架中执行此操作？

我的想法是向页面发送持续的响应。但这可能是不可能的。请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:45:25.060

一种解决方案是创建另一个以 json 格式提供百分比的 servlet（您可以将其存储在会话对象中），然后使用 javascript 定期轮询来自该 servlet 的信息并直接显示它们。

这篇文章可能会帮助你：

[JQuery 从 servlet 获取 JSON](https://stackoverflow.com/questions/7190522/jquery-get-json-from-servlet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:55:44.420

![在此处输入图像描述](https://i.stack.imgur.com/q33Jw.png)

您可以按照上面显示的模型。有两个 servlet，一个用于启动处理，另一个用于报告处理状态。Process Controller 类将维护进程的状态以及启动/将进程放入队列中。

1.  调用 Start Processing servlet 启动一个进程并返回一个表示该进程的唯一 ID

2.  JS/JQuery 可用于使用上述 UID 向 Get Processing Progress servlet 发出定期请求以了解进度。

# jquery - 匹配另一个使用 width:auto 的 div 的宽度；然后向其中添加 x 金额

> ID：15788990
> 
> 赞同：0
> 
> 时间：2013-04-03T13:41:03.853
> 
> 标签：jquery, css, width

当另一个 div 使用 width:auto; 时，无论如何我可以让一个 div 匹配另一个 div 的宽度吗？并根据内容动态变化。然后在宽度上添加额外的像素。

例如...

[jsFiddle](http://jsfiddle.net/yF4xL/ "jsfiddle")

**HTML**

```
<div id="div1">
    <div id="filler"></div>
    <div id="filler"></div>
    <div id="filler"></div>
</div>
<div id="div2"></div> 
```

**CSS**

```
#div1 {
    position:absolute;
    height:100px;
    width:auto;
    min-width:100px;
    background-color:blue;
    padding-right:10px;
}

#div2 {
    position:absolute;
    height:100px;
    min-width:100px;
    top:150px;
    background-color:red;
}

#filler {
    position:relative;
    height:80px;
    width:80px;
    top:10px;
    margin-left:10px;
    background-color:yellow;
    float:left;
} 
```

如何使 div2 匹配 div1 的宽度，然后添加 100px 到它？这样无论我在 div 1 中放入多少填充 div，div 2 的宽度都将始终相同 +100？

像...（div2 宽度）=（div1 宽度）+ 100

我怀疑 Jquery 会以某种方式参与，所以我将它添加到我的标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:57:01.960

您是否尝试过：

```
 $('#div2').width( $('#div1').outerWidth() + 100 ) 
```

函数 outerWidth() 包括 div 边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:02:23.207

您能否将内部 div 绝对定位在外部 div 中并设置`left: 0`和`right: -100px`（隐式设置`width: auto`）？

# html - 如何仅在一个特定按钮中不包含谷歌字体 css？

> ID：15788993
> 
> 赞同：0
> 
> 时间：2013-04-03T13:41:12.383
> 
> 标签：html, css

我正在使用这样的谷歌字体：

```
<!--google web font-->
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700|Lato:700,300,400' rel='stylesheet' type='text/css'> 
```

我有一个这样的按钮：

```
<a href="/accounts/register"><button class="btn btn-success">Create an Account</button></a> 
```

我不想仅将其包含`google font`在此特定按钮中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:43:13.480

不要使用`button`内部`a`元素！

CSS：

```
a.btn {
  font-family: Arial, Helvetica, sans-serif; /* or other font family */
} 
```

HTML：

```
<a href="/accounts/register" class="btn btn-success">Create an Account</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:48:23.000

*   您点击该链接：[http ://www.google.com/fonts/#HomePlace:home](http://www.google.com/fonts/#HomePlace:home)
*   你按照指示

> 要将字体集成到您的 CSS 中：
> 
> Google Web Fonts API 将生成必要的特定于浏览器的 CSS 以使用字体。您需要做的就是将字体名称添加到您的 CSS 样式中。例如：font-family: 'Noto Sans', sans-serif;

CSS

```
button.not-that-font {font-family: 'NOT YOUR GOOGLE API FONT', sans-serif;} 
```

HTML

```
<button class="btn btn-success not-that-font">Create an Account</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:00:10.787

找到该按钮嵌套的父 ID，并像这样控制按钮的字体类型..

```
#Parent .btn-success {
font-family:arial; /*or whatever default font you want to give it*/
} 
```

现在，如果您在页面上有多个按钮（如果您应该在原始问题中显示），那么您可以使用 jquery 将我刚刚在上面写的 css 添加到像这样的特定按钮

```
$('#parent .btn-success').eq(0).css('font-family':'arial') 
```

并将 0 替换为 1 或 2 或 3 等，...取决于您的按钮所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:39:01.000

发布的代码实际上并没有将 Google 字体用于任何用途，因此您必须有一些 CSS 代码来做到这一点。您需要对其进行修改，以便该字体仅用于您希望应用它的那些元素。详细信息取决于您拥有的代码。

一般来说，样式最适合积极的方式：只在特定元素上设置属性，而不是将它们设置为例如所有元素，然后想知道如何使某些元素例外。但在极端情况下，您可以`id=foo`向要排除的元素添加一个属性，并附`:not(#foo)`加到规则中的选择器。但这是次优的，因为`:not`选择器并未得到普遍支持。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T13:52:05.123

为按钮添加内联样式，内联样式会覆盖所有其他 CSS 样式。

```
<button class="btn btn-success" 
style="font-size:11px;">Create an Account</button> 
```

# mysql - 重置 id auto_increment 然后比较最大 id 与行数

> ID：15788994
> 
> 赞同：0
> 
> 时间：2013-04-03T13:41:15.937
> 
> 标签：mysql, pdo

我有表汽车，在表中列 id 为`auto_increment`AND 索引为`primary key`

我想要重置 id，即我需要将 ids 排队`1`到`2,3,4,5,...`

对于重置 id，我运行以下查询：

```
ALTER TABLE autos AUTO_INCREMENT = 1 
```

这意味着现在，最大 id 必须是等效的行数，对吗？

但是这段代码

```
 $res = $db->query("SELECT COUNT(*) AS cnt FROM autos")->fetchAll(PDO::FETCH_ASSOC);
    echo "rows count: ".$res[0]['cnt']."<br>";

    $res = $db->query("SELECT MAX(id) AS id FROM autos")->fetchAll(PDO::FETCH_ASSOC);
    echo "max id".$res[0]['id']; 
```

返回

```
rows count: 376733
max id: 500000 
```

为什么最大 id 和行数不匹配？我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:47:40.790

我永远不会像那样更新 ID 字段，您将破坏与其他表的任何关系（如果有的话）并造成很多混乱。您应该创建一个新字段 SortOrder 或不是主键的内容，然后将此字段更新为新的行号。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T13:45:58.717

COUNT 函数将返回表中的行数，而 MAX 函数返回表中列的 MAX 值。

例如，如果您的表中只有一条 ID 值为 5000 的记录，则 count 将返回 1，而 MAX(ID) 将返回 5000。

在插入记录时，如果您不为自增列提供值或提供 NULL 值，则 MySQL 会将 AUTO-INCREMENT 计数分配给该自增列并增加指针。

# apache - 合并 htaccess HTTP_HOST 重写条件

> ID：15788998
> 
> 赞同：1
> 
> 时间：2013-04-03T13:41:31.673
> 
> 标签：apache, .htaccess

我有这个htaccess条件......

```
# changed... subdomains to subdirectories...
RewriteCond %{HTTP_HOST} ^acoruna.domain\.es [nc]
RewriteRule (.*) http://domain.es/acoruna/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^alava.domain\.es [nc]
RewriteRule (.*) http://domain.es/alava/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^albacete.domain\.es [nc]
RewriteRule (.*) http://domain.es/albacete/$1 [R=301,L]
# changed... subdomains to subdirectories... 
```

我的问题是，我可以仅将所有 RewriteCond 和 Rewrite 规则合并到 1 中吗？因为所有人都这样做。

谢谢，来自西班牙的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:01:52.580

尝试：

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.domain\.es$ [NC]
RewriteRule ^(.*)$ http://domain.es/%1/$1 [R=301,L] 
```