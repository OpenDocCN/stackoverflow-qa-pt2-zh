# StackOverflow 问答 13598000-13598999

# java - 只能使用 RandomAccessFile 写入到第 924 个字节

> ID：13598004
> 
> 赞同：0
> 
> 时间：2012-11-28T04:48:56.627
> 
> 标签：java

当我尝试填充随机访问文件时遇到问题，在使用循环时它会在达到第 924 个字节时停止写入，所以当我尝试用“-”填充 2500 个字节时，它只填充 924字节。这是我使用的代码，希望有人能告诉我我做错了什么

```
public class Hashing {
    private RandomAccessFile espacio;

    public Hashing() throws FileNotFoundException, IOException{
        File amigos = new File("Texto");
        String r = "rws";
        espacio = new RandomAccessFile(amigos ,r);
        this.estableceEspacioLlenado();
    }

    public void estableceEspacioLlenado() throws IOException{
        int a = 0;

        while(a<2500){
            if(a>=241 && a%241==0){
                espacio.writeBytes("\n"); 
                a++;
            }
            else{
                espacio.writeBytes("-");
                a++;
            }
        }
    }        
} 
```

输出文件：

```
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:55:39.197

也许数据被缓冲并且没有被刷新到磁盘。在最后添加一个`close()`调用以确保所有内容都被写入。

```
espacio = new RandomAccessFile(amigos ,r);
this.estableceEspacioLlenado();
espacio.close(); 
```

# jquery - 如何使用 jQuery 对数据表按字母和不区分大小写进行排序？

> ID：13598006
> 
> 赞同：5
> 
> 时间：2012-11-28T04:49:17.230
> 
> 标签：jquery, sorting, datatable

我正在使用 jquery 数据表。它显示用户列表。（名字，姓氏等）。当我点击姓氏的升序时，是否可以设置大写字母总是在小写字母之前。（区分大小写）

以下是示例

```
FirstName   LastName
A             Xb   <--X is Captial-->
B             xa   <-- x is small-->
c             yc 
```

当我单击按升序排列姓氏时，它将显示以下内容

```
 FirstName   LastName

B             xa   <--small-->
A             Xb   <--X is Captial-->
c             yc 
```

是否有任何可用的属性区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-17T14:11:24.647

这解决了我的问题：

```
'columnDefs': [

 'targets': 0,      
 'render': function(data, type, row, meta){                                                     
  return type === "sort" ? data.toLowerCase() : data;

}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:52:57.780

这应该可以帮助你

```
var names = [
    {"FirstName":"A", "LastName":"Xb"},
    {"FirstName":"B", "LastName":"xa"},
    {"FirstName":"C", "LastName":"yc"}
];

names.sort(function(a, b) {
    return a.LastName.toLowerCase().localeCompare(
        b.LastName.toLowerCase()
    );
});

console.log(names); 
```

​</p>

[看看它在 jsFiddle 上的工作情况](http://jsfiddle.net/2Hbnq/1/) </p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:55:39.197

你可以尝试这样的事情： -

```
jQuery.fn.dataTableExt.oSort['string-case-asc']  = function(x,y) {
return ((x < y) ? -1 : ((x > y) ?  1 : 0));
};

jQuery.fn.dataTableExt.oSort['string-case-desc'] = function(x,y) {
return ((x < y) ?  1 : ((x > y) ? -1 : 0));
}; 
```

> 通过在进行排序之前准备要排序的数据，提高了排序性能。例如，多次对同一个字符串执行 .toLowerCase() 是没有意义的——它总是会产生相同的结果。因此，排序函数现在可能具有 {type}-pre 方法以及 {type}-desc 和 {type}-asc 方法来准备数据。现在所有的内部排序方法都使用这种方法。

从[源头](http://datatables.net/new/1.9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T04:55:53.873

我假设当您说 jquery 数据表时，您的意思是[Datatables.net](http://datatables.net)上的数据表插件。如果是这样，看起来从 1.9 版开始，区分大小写的排序变得可用：

[b不区分大小写](http://datatables.net/docs/DataTables/1.9.beta.1/DataTable.models.oSearch.html#bCaseInsensitive_details)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T03:10:24.243

数据表插件中的默认排序类型不区分大小写。但是，如果您使用 SQL 的服务器端处理，则区分大小写来自数据库而不是来自 jquery.dataTables.js。要修复它，请找到您的 SQL 查询顺序子句并将其更改为 lower()。

如果您使用此处提供的示例：[http](http://www.datatables.net/development/server-side/php_mysql) ://www.datatables.net/development/server-side/php_mysql 然后，将第 81 行和第 82 行替换为下面的代码，您就完成了。

```
$sOrder .= 'upper('.$aColumns[ intval( $_GET['iSortCol_'.$i] ) ].")
".mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", "; 
```

希望有帮助。

# android - 如何应用主题以获得精确视图？

> ID：13598007
> 
> 赞同：1
> 
> 时间：2012-11-28T04:49:19.363
> 
> 标签：android, view, styles, themes

例如，当我在 XML 中定义样式标记时，所有类型的所有视图都会获得该主题。视图类型的样式之间的差异有什么解决方案吗？这是一些代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="buttonTheme" parent="android:Theme.Holo">
        <item name="android:drawableLeft">@drawable/ic_launcher</item>
    </style>

    <style name="textTheme" parent="android:Theme.Holo">
        <item name="android:textColor">#ff0000</item>
    </style>

</resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:04:18.507

我认为风格和主题之间存在一些小的混淆。您正在谈论为应用程序中的小部件定义自定义样式。主题是全局应用于活动或应用程序的这些样式的集合。您为按钮和文本视图创建的自定义样式可以应用于新的自定义主题，以便所有按钮和文本项共享相同的属性。

我认为您正在寻找的是更像这样的东西。

```
<style name="ApplicationTheme" parent="android:Theme.Holo">
    <item name="buttonStyle">@style/MyButtonStyle</item>
    <item name="textAppearance">@style/MyTextAppearance</item>
</style>

<style name="MyButtonStyle" parent="android:Widget.Button">
    <item name="android:drawableLeft">@drawable/ic_launcher</item>
</style>

<style name="MyTextAppearance" parent="android:TextAppearance">
    <item name="android:textColor">#ff0000</item>
</style> 
```

在这里，我们创建了两种新样式（一种用于按钮外观，一种用于默认文本外观），然后将它们作为属性应用到新的自定义主题中。您现在可以通过引用`@style/ApplicationTheme`或在清单或视图构造函数中应用此主题`R.style.ApplicationTheme`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:05:22.800

您可以通过将属性添加到文件`android:theme=""`中的特定活动来做到这一点`AndroidManifest.xml`

例子：

```
<activity android:theme="@style/CustomTheme"> 
```

# extjs4 - 折叠和展开treegrid extjs 4时禁用更新

> ID：13598008
> 
> 赞同：0
> 
> 时间：2012-11-28T04:49:23.477
> 
> 标签：extjs4

我有treegrid extjs 4 ..我使用代理读取、创建、更新和删除，但问题是当我在treegrid中单击折叠和展开时，treegrid总是发送更新..当我删除更新代理时，折叠失败..

有人知道在折叠和展开时禁用更新吗？

这是我的短代码

```
Ext.define('storeLapObjTP', {
    extend: 'Ext.data.TreeStore',    
//storePlanningTP = Ext.create('Ext.data.TreeStore', {
    pageSize:50,
    autoSync: true,
    model: 'mod_planningTP',
    method: 'POST',
    proxy: {
        type: 'ajax',
        api: {
            read: base_url+'project/getcomplete',
            create: base_url+'project/edit/'+'create',
            update: base_url+'project/edit/'+'update',
            destroy: base_url+'project/edit/'+'delete'
        },
        reader: {
            type: 'json',
        }
    },
    sorters: [{
        property: 'id',
        direction: 'desc'
    }],
});

Ext.define('gridTPcl', {
    extend: 'Ext.tree.Panel',
    id:'gridLapTP',
    store: storeLapTP = new storeLapObjTP,
    collapsible: false,
    loadMask: true,
    region: 'center',
    margins: '0 0 0 0',
    autoScroll: false,
    useArrows: true,
    rootVisible: true,
    multiSelect: false,
    singleExpand: false,
    columns: 
        [
        {
            menuDisabled: true,
            sortable: false,
            xtype: 'actioncolumn',
            width: 20,
            items: [
        {
            xtype: 'treecolumn',
            header: 'Project Name',
            dataIndex: 'name',
            width: 300,
            align: 'left',
        },
        {
            header: 'Id',
            dataIndex: 'id',
            hidden:true
        },{
            text:'Anggaran (Rp.000)',
            columns : [
                {
                    header: 'Budget',
                    dataIndex: 'budget',
                    width:80,
                    align: 'center',
                }, {
                    header: 'Total',
                    dataIndex: 'total',
                    width:80,
                    align: 'center',
                }
            ]
        }],
    selModel: {
        selType: 'rowmodel'
    },
    title: 'Project Tree',
    frame: false,
    tbar: new Ext.Toolbar({
        id: 'tbarlaptp',
        items: [
        comboYearLapTP,'-',comboYearLapTP,'-',{
            id : 'reloadbuttonlaptp',
            text: 'Reload',
            iconCls: 'reloadButton',
            disabled: true,
            tooltip: 'Reload Data and Ignore Change',
            handler : function(){
                this.up().up().store.load();
            }
        }]
    })
    ,
    plugins: [],
}); 
```

# javascript - 检测当前链接是否是浏览器历史记录中页面的第一个

> ID：13598018
> 
> 赞同：2
> 
> 时间：2012-11-28T04:50:47.740
> 
> 标签：javascript, gwt, navigation, back-button, browser-history

是否可以可靠地检查（当然是跨浏览器）用户当前在浏览器中查看的页面是否是我网站历史堆栈中的第一个页面，即点击“返回”是否会带用户到我网站的另一个页面，或者这是否会让他/她离开我的网站？

一些例子（true=当前页面是第一个，即“返回”会离开网站）：

1.  用户首先通过书签打开站点页面：**true**（“返回”将离开站点到之前打开的任何页面）。
2.  用户然后单击链接以导航到我网站上的另一个页面：**false**（“返回”不会离开站点，而是返回在 (1.) 中打开的页面）。
3.  用户再次单击原始书签并再次登陆第一页：**false**（“返回”将转到在 (2.) 中打开的页面）。
4.  用户单击“返回”两次以返回在 (1.) 中打开的页面：**true**（另一个“返回”现在将再次离开站点）。

数字 (1.) 和 (2.) 很容易检测到，但是 (3.) 和 (4.) 提出了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:14:15.133

您可以在返回操作发生之前检查引荐来源网址将解决此问题。

如果引用 URL 为空，则禁用后退按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:06:07.440

您需要了解 GWT History Mechanism 和 Activites and Places 才能实现这一目标。

尝试这些[历史](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory?hl=en)、[活动和地点](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)作为初学者

# javascript - 验证只有 5 个值的文本字段

> ID：13598023
> 
> 赞同：0
> 
> 时间：2012-11-28T04:51:16.900
> 
> 标签：javascript, html

```
 <label class="user-reg-label fl">Percentage:<span class="required">*</span></label>
     <input class="user-reg-input fl" type="text" name="Percentage[]" id="Percentage1" value="" maxlength="5" /> 
```

> 这是我的 html 代码。我需要使用 javascript 验证此输入字段才能仅输入 5 个值，例如***99.99***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:55:26.590

这是格式化，而不是验证，但这似乎是 OP 真正想要的（我认为）。

```
var input = document.getElementById("Percentage1"),
    onlyNumbers = input.value.replace(/\D/g,""), // Remove all nondigits
    cleanNumbers = onlyNumbers.substr( 0, 4 ); // Limit to four digits

// Add decimal if more than two digits in length
if( cleanNumbers.length > 2 )
{
    cleanNumbers = cleanNumbers.substr( 0, 2 ) + "." + cleanNumbers.substr( 2 );
}

input.value = cleanNumbers; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:10:53.817

使用类似下面的 Jquery 可以工作。

文本框

```
 <input class="user-reg-input fl" type="text" name="Percentage[]" id="Percentage1" value=""  onpaste="return false"
        onkeypress="if(event.keyCode<48 || event.keyCode>57)event.returnValue=false;" maxlength="6" /> 
```

jQuery

```
$(document).ready(function ()
  {
     $('#Percentage1').keyup(function (event)
    {
        var currentValue = $(this).val();
        var length = currentValue.length;

        if (length == 2)
        {
            $(this).val(currentValue + ".");
        }
        else if (length == 5)
        {
            $(this).val(currentValue + "%");
        }
    });
}); 
```

这适用于您的基本要求，但是有一些需要改进的地方。如果用户尝试删除多个号码，它不起作用，或者如果他们尝试使用退格键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:59:49.163

您可以为此使用 keyup 或 keypress 功能

```
<input onkeyup="myFunction()" class="user-reg-input fl" type="text" name="Percentage[]" id="Percentage1" value="" maxlength="6" />

function myFunction()
{
var input = document.getElementById("Percentage1");

if( input.value.length > 6 )
{
alert( "too many characters" );
return false;
}
} 
```

更新：

```
<input type="text" id='text_field' onkeyup="check()"/>
    <script>
        function check()
        {
            var len=document.getElementById('text_field').value.length;
            if (len==2)
                document.getElementById('text_field').value=document.getElementById('text_field').value+".";
            if (len==5)
                document.getElementById('text_field').value=document.getElementById('text_field').value+"%";
        }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T05:14:43.073

好的，然后有一个文本字段，只有当您输入“99.99%”类型模式时，它才会验证

```
 <script type="text/javascript">
function fnc(){
pattern=/\d+[.]+\d+[%]/g;
text=document.getElementById("atext").value;
x=pattern.test(text);
alert(x);
}
</script>
<input type="text" maxlength="6" id="atext">
<input type="button" onClick="fnc()" value="click me"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T05:24:01.690

试试这个，

带脚本部分

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#test').blur(function() {
        if ($(this).val().match('(^100(\.0{1,2})?$)|(^([1-9]([0-9])?|0)(\.[0-9]{1,2})?$)')) {
                alert("Percentage Matched");//Any thing which you want

            }
            else
                alert("Not Valid Input");
        });
    });
</script> 
```

和文本框代码

```
<body>
<form id="form1" runat="server">
<div>
<asp:TextBox ID="test" runat="server"></asp:TextBox>
</div>
</form> 
```

# c# - 如何在 C# 中将十六进制格式的字节文本文件转换为字节数组

> ID：13598024
> 
> 赞同：0
> 
> 时间：2012-11-28T04:51:47.103
> 
> 标签：c#

将以下字节文本文件（acii hex 格式）转换为 C# 中的字节数组的最佳方法是什么？

```
C7 40 04 96 96 C9 F3 3F C7 ED
73 9D 3D 89 7D F6 2A 0B 4C 9D D6 82 E1 1F 4F F0
1A 45 4F 35 C7 0C 2B 7F 50 40 AC 79 33 C0 DD 0C
6B D2 9F D4 B6 60 9D 74 34 08 C5 19 92 1B 60 20
62 2A 20 B5 03 D3 2A 1F 39 71 DA F5 EE 78 17 9A
03 CA 3C E7 3E 10 75 C3 0F A5 AD AB C2 1D D6 35
0D C8 FD B2 93 F9 6D 53 C6 67 7E F3 38 CE F6 78
FA F5 0D 22 0B F3 FF 06 A2 51 4B E6 77 D5 49 B4
38 72 E9 0B AB 56 92 6D 25 70 D6 4F 4E 6A EB 39
F9 D2 7C 3B 97 66 35 74 A5 0E C0 1F EE E7 E7 CD
DA FF 41 39 8B F6 18 6E F4 3A 00 AB 2C E8 F9 37
7B 7C ED F4 50 43 F4 B2 F0 7C 39 9F 21 73 CF 7B
DD E0 B5 0E 81 70 4D D1 A8 CD 4F 81 3D DC CA CC
98 47 51 84 0C 00 48 07 0D 57 7B 3F 6A 24 A7 CA
BD E4 FF 67 78 EB F4 0F D7 76 45 65 45 77 E8 30
09 C4 51 DA A2 23 CC BF EE FC 9C 49 64 F5 5B F5
9D 64 77 78 3C E7 
```

到目前为止，我有一种方法可以将其转换为所有这些值的字符串。

```
 public string ProcessTextFile(string filepath)
    {
        string sTextFile;
        string[] sDelimeters = { "\r\n" };
        string[] TextFileLines;
        string sOutput;

        using (System.IO.StreamReader sr = new System.IO.StreamReader(filepath))
        {

            sTextFile = sr.ReadToEnd();
            TextFileLines =  sTextFile.Split(sDelimeters, StringSplitOptions.None);
            sOutput = string.Join(" ", TextFileLines);
            sr.Close();
        }

        return sOutput;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:54:54.517

将问题分解为步骤。你现在有什么？您有一串由空格和/或换行符分隔的两位十六进制值。

```
string input = "C7 40 04 96 96 C9 F3 3F C7 ED ..."; 
```

首先，您想将该字符串拆分为十六进制值。[`String.Split`](http://msdn.microsoft.com/en-us/library/ms131448.aspx)听起来是个完美的候选人。

```
string[] groups = input.Split(new[] {' ', '\n'}, StringSplitOptions.RemoveEmptyEntries); 
```

接下来，您要将每个两位十六进制值转换为一个字节。[`Byte.Parse`](http://msdn.microsoft.com/en-us/library/4eszwye3.aspx)应该在这里解决问题。

```
byte[] ar = groups.Select(s => Byte.Parse(s, NumberStyles.HexNumber)).ToArray(); 
```

# c# - 如果 Catch 块本身发生异常，那么如何在 C# 中处理它？

> ID：13598026
> 
> 赞同：9
> 
> 时间：2012-11-28T04:52:02.883
> 
> 标签：c#, asp.net

//我在Catch Block中写了代码

```
 try {

 } catch(Excepetion ex) {
        // I have written code here If Exception Occurs then how to handle it.
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T04:56:00.740

您可以在 catch 块中放置一个 try catch，或者您可以简单地再次抛出异常。**最好在 try catch 中使用**finally**[块](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)****，**这样即使在 catch 块中发生异常，finally 块代码也会被执行。

```
try
  {
  }
catch(Excepetion ex)
  {
     try
        {
        }
     catch
        {
        }
   //or simply throw;
  }
finally
{
  // some other mandatory task
} 
```

[finally 块在某些异常中](https://stackoverflow.com/a/834017/961113)可能不会被执行。您可能会看到[约束执行区域](http://msdn.microsoft.com/en-us/library/ms228973.aspx)以获得更可靠的机制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T06:47:43.677

最好的方法是为不同的应用程序层开发自己的异常，并将其与内部异常一起抛出。它将在应用程序的下一层处理。如果您认为，您可以在 catch 块中获得一个新的异常，只需重新抛出此异常而不进行处理。

假设您有两层：业务逻辑层 (BLL) 和数据访问层 (DAL)，并且在 DAL 的 catch 块中您有一个异常。

**达尔：**

```
try
{
}
catch(Excepetion ex)
{
  // if you don't know how should you handle this exception 
  // you should throw your own exception and include ex like inner exception.
   throw new MyDALException(ex);
} 
```

**BLL：**

```
try
{
  // trying to use DAL
}
catch(MyDALException ex)
{
  // handling
}
catch(Exception ex)
{
   throw new MyBLLException(ex);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T04:53:57.903

```
try
{
    // Some code here
}
catch (Exception ex)
{
    try
    {
        // Some more code
    }
    catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T05:06:58.620

双重故障经常发生在精心设计的 3g 编程语言中。由于保护模式和 286，硬件语言的一般设计是在三重故障时重置芯片。

您可能可以设计出摆脱双重错误的方式。在这种情况下，不要因为不得不做一些事情来停止处理/向用户报告错误而感到难过。如果您遇到一种情况，例如，您捕获 IO 异常（读取/写入数据）然后尝试关闭您正在读取的流，并且这也失败了，这不是一个糟糕的模式，即显着失败并发出警告用户认为真正异常的事情发生了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T04:54:50.337

对于可能在块中引发异常的代码行，请`catch`制作额外的显式 try..ctach 块。除了考虑有[`finally`](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)块之外，一定要有线路在那里运行。同样的问题可能会针对该`finally`块提出。因此，如果您的代码可能会在`finally`块中引发一些异常，您还可以在此处添加 try..catch。

```
try
{
}
catch (Exception ex)
{
    try
    {
        // code that is supposed to throw an exception
    }
    catch (Exception ex1)
    {
    }
    // code that is not supposed to throw an exception       
}
finally
{
    try
    {
        // code that is supposed to throw an exception
    }
    catch (Exception ex1)
    {
    }
    // code that is not supposed to throw an exception       
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T04:53:37.180

catch 块在任何特定方面都没有什么特别之处。您将不得不使用另一个 try/catch 块或不处理错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T05:52:27.597

我的朋友 Atul.. 如果你在 catch 块中写 try..catch，如果内部 try..catch 再次发生异常，同样的问题会再次出现。因此，解决此问题，您可以在 Global.asax 中处理应用程序级事件中的这些错误

检查下面的链接..

[http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)

[http://msdn.microsoft.com/en-us/library/fwzzh56s%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/fwzzh56s%28v=vs.80%29.aspx)

让我知道这是否适合你.. :)

# excel - Excel 运行时错误 1004

> ID：13598031
> 
> 赞同：1
> 
> 时间：2012-11-28T04:52:15.620
> 
> 标签：excel, runtime-error

我目前正在创建一个预订系统作为 ICT IEA 课程作业的 ICT 项目。我在预订系统中使用了 excel，其中一部分是这个库存清单，它就像一个带有产品图像的画廊。

该项目的一个要求是，当您单击图像时，它会转到一个单独的项目页面，我尝试使用一个在页面之间切换的基本宏来完成该页面。但是，每当我单击启用宏的图像时，就会出现“运行时错误 1004”窗口。

宏的编码如下：

```
Sub ipadcoverbuddy()
'
' ipadcoverbuddy Macro
'
    Sheets("ipad coverbuddy").Select
End Sub 
```

`Sheets("ipad coverbuddy").Select`当我在关闭错误窗口后单击调试时，该行被突出显示。

如果不隐藏工作表选项卡，它工作得非常好，但是我希望隐藏工作表的选项卡，这意味着它不会工作。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:26:46.260

您需要先将工作表设置为可见，完成该过程后，将工作表设置为不可见。

```
Worksheets("ipad coverbuddy").Visible = -1
Worksheets("ipad coverbuddy").Select
Worksheets("ipad coverbuddy").Visible = 0 
```

# xcode - 模拟器显示为黑屏

> ID：13598032
> 
> 赞同：0
> 
> 时间：2012-11-28T04:52:22.577
> 
> 标签：xcode, macos, osx-lion

我正在使用 mac 10.7.3 lion 并安装了 Xcode 4.3.2 。我在 Xcode 中创建了我的第一个项目，试图在模拟器上运行它很长时间显示为黑屏。在 Xcode 顶部有一个进度条显示它正在将应用程序附加到模拟器。

请帮我调试这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:01:39.650

退出模拟器并再次运行项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:00:01.537

有时，模拟器确实需要很长时间才能从 Xcode 启动您的应用程序。我建议你退出模拟器和 Xcode 再试一次。

# python - 当模块名称在变量中时导入模块

> ID：13598035
> 
> 赞同：75
> 
> 时间：2012-11-28T04:52:30.067
> 
> 标签：python, python-2.7

> **可能重复：**
> [Python 中的动态模块导入](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)

我正在编写一个小脚本，该脚本从目录中获取文件名并将其传递给另一个模块，然后该模块导入该文件。

所以流程就像1）获取模块名称（将其存储在变量中）2）将此变量名称传递给模块3）导入名称存储在变量名称中的模块

我的代码就像

```
data_files = [x[2] for x in os.walk(os.path.dirname(sys.argv[0]))]
hello = data_files[0]
modulename = hello[0].split(".")[0]

import modulename 
```

问题是当它到达 import 语句时，它将 modulename 读取为真正的模块名称，而不是存储在此变量中的值。我不确定这在 python 中是如何工作的，解决这个问题的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-28T04:55:47.557

您想要内置[`__import__`](http://docs.python.org/2/library/functions.html#__import__)功能

```
new_module = __import__(modulename) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-11-28T04:58:40.173

importlib 可能是要走的路。它的文档在[这里](http://docs.python.org/2/library/importlib.html)。`__import__`对于[大多数用途](http://docs.python.org/2/library/functions.html#__import__)，它通常是首选。

在您的情况下，您将使用：

```
import importlib
module = importlib.import_module(module_name, package=None) 
```

# ios - 键值属性帮助IOS

> ID：13598036
> 
> 赞同：0
> 
> 时间：2012-11-28T04:52:31.370
> 
> 标签：ios, cocoa

我正在制作一个 iPhone 应用程序，它从 Web 服务获取数据并将其存储在 Core Data 中。所有这些属性都有在字典中识别它们的键。我有一个`NSObject`所有属性的类。

我现在决定再添加一个不是从名为`checkMark`. 我也将它添加到此方法中。问题是每当我尝试`checkMark`在这样的方法中设置属性时：`[s setValue:[NSNumber numberWithInt:check] forKey:@"checked"];`作为`s`一个`managedObject`我得到一个错误说`"the entity Course is not key value coding-compliant for the key "checked"`。我该如何解决？

```
- (id)initWithDictionary:(NSDictionary *)dictionary
{
    self = [super init];
    if (self) {
        // Set the property values
        _iD = [[dictionary valueForKey:@"Id"] intValue];
        _isCurrent = [[dictionary valueForKey:@"IsCurrent"] boolValue];
        _checkMark = [[dictionary valueForKey:@"checked"] intValue];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:57:59.930

您需要使实体课程键值编码符合“已检查”键的要求。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html)

基本上这意味着它必须有一个 setter`setChecked:`和一个 getter `checked`。通常的事情是拥有一个综合了该 setter 和 getter 的属性。

顺便说一句，日志消息正在谈论实体课程这一事实向我表明，您调用`dictionary`并转换为 NSDictionary 的东西实际上可能根本不是字典，但可能是其他东西，即 NSManagedObject。只是一个猜测......你可能会做一些日志记录/断点来看看这里到底发生了什么。

# c99 - C99 complex double - int 或 float 影响实际值的虚零

> ID：13598039
> 
> 赞同：4
> 
> 时间：2012-11-28T04:52:43.487
> 
> 标签：c99

有人能解释一下为什么下面的代码为 test4 变量产生与其他 3 个不同的输出吗？我已经用 gcc 版本 4.2.1 和 4.5.3（以及介于两者之间的其他版本）对此进行了检查。

也许我遗漏了一些明显的东西，但它看起来很简单......

```
#include <stdio.h>
#include <complex.h>

main()
{
    double complex test1, test2, test3, test4;

    test1 = 81141117.0;
    test2 = 81141117.0 + I * 0;
    test3 = 81141117 + I * 0.0;
    test4 = 81141117 + I * 0;
    printf("%ld + %ld I, %ld + %ld I, ", (long)creal(test1), (long)cimag(test1), (long)creal(test2), (long)cimag(test2));
    printf("%ld + %ld I, %ld + %ld I\n", (long)creal(test3), (long)cimag(test3), (long)creal(test4), (long)cimag(test4));
} 
```

输出：

```
81141117 + 0 I, 81141117 + 0 I
81141117 + 0 I, 81141120 + 0 I 
```

似乎只有整数项的 test4 被提升为浮点数而不是声明的双精度数，并且四舍五入开始发挥作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:03:05.290

我已经在 Mac OS X 10.7.5（自制 GCC）上测试了 GCC 4.7.1，以及提供的系统`/usr/bin/gcc`和`/usr/bin/clang`，它们都产生了与您报告的结果相同的结果。

我同意您的分析，即当复数`float`的两个项都表示为整数时，必须进行转换。`double`C 2011 标准包括以下示例：

### ISO/IEC 9899:2011 §6.7.9 初始化

> ¶24 示例 1 如果`<complex.h>`已经`#include`d，则声明
> 
> ```
> int i = 3.5;
> double complex c = 5 + 3 * I; 
> ```
> 
> 用值 3 定义和初始化 i，用值 5\. 0 + i3 初始化 c。0。

这清楚地表明您应该能够编写整数表达式并获得有效的`double complex`（尽管示例是非规范性的）。`float`但是，它没有解决在转换为之前是否应将整数值转换为`double`，但语言中没有其他地方可以自动执行此操作（显然，您可以强制它），因此不太可能是预期的解释。

总的来说，我认为这很可能是一个可以报告给 GCC 团队的错误（这不是我提倡的轻率行为）。如果您运行`gcc --help`，则输出以以下消息结尾：

```
For bug reporting instructions, please see:
<http://gcc.gnu.org/bugs.html> 
```

我将扩展您的示例，如下所示（或者，我确实扩展了您的示例，如下所示）：

```
#include <stdio.h>
#include <complex.h>

int main(void)
{
    double complex test1, test2, test3, test4, test5, test6, test7, test8;

    test1 = 81141117.0;
    test2 = 81141117.0 + I * 0;
    test3 = 81141117 + I * 0.0;
    test4 = 81141117 + I * 0;
    test5 = (float)81141117 + I * 0;
    test6 = 81141117 + I * (float)0;
    test7 = 81141117.F + I * 0;
    test8 = 81141117 + I * 0.F;
    printf("%ld + %ld I, %ld + %ld I\n", (long)creal(test1), (long)cimag(test1), (long)creal(test2), (long)cimag(test2));
    printf("%ld + %ld I, %ld + %ld I\n", (long)creal(test3), (long)cimag(test3), (long)creal(test4), (long)cimag(test4));
    printf("%ld + %ld I, %ld + %ld I\n", (long)creal(test5), (long)cimag(test5), (long)creal(test6), (long)cimag(test6));
    printf("%ld + %ld I, %ld + %ld I\n", (long)creal(test7), (long)cimag(test7), (long)creal(test8), (long)cimag(test8));
} 
```

我得到的输出是：

```
81141117 + 0 I, 81141117 + 0 I
81141117 + 0 I, 81141120 + 0 I
81141120 + 0 I, 81141120 + 0 I
81141120 + 0 I, 81141120 + 0 I 
```

如您所见，最后两行有显式`(float)`强制转换或显式浮点常量，产生的结果与有问题的行相同（但值是合法的）。

您可能（或可能不）想尝试使用`CMPLX`, `CMPLXF`（也可能是`CMPLXL`）宏；如果它们为某些“有趣”的定义产生了“有趣”的值，我只会将它们添加到报告的示例中。

* * *

编译器版本号：

```
$ /usr/gcc/v4.7.1/bin/gcc --version
gcc (GCC) 4.7.1
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ /usr/bin/gcc --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ clang --version
Apple clang version 4.1 (tags/Apple/clang-421.11.65) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix
$ 
```

# javascript - 在 jqxGauge 中查看百分比值

> ID：13598041
> 
> 赞同：0
> 
> 时间：2012-11-28T04:53:03.350
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使用 jqxGauge 创建仪表，仪表的演示可在此处获得[http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgauge/index.htm#demos/jqxgauge/defaultfunctionality.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgauge/index.htm#demos/jqxgauge/defaultfunctionality.htm)。

我无法让仪表接受并显示 88.65% 或 10.22% 之类的值。有人可以告诉我怎么做吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:19:56.783

我相信设置仪表值需要一个数字值。也可以格式化显示的值，请参见此处：[仪表样本。](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgauge/defaultfunctionality.htm?classic)

# mingw - 构建 ITK 时出错：使用 MinGW 构建后 libITKCommon-4.2.dll 不存在

> ID：13598042
> 
> 赞同：0
> 
> 时间：2012-11-28T04:53:10.757
> 
> 标签：mingw, itk

我在使用 MinGW 生成器构建 ITK 库时遇到此错误。在构建程序时构建后出现错误：

mingw32-make[2]: ***没有规则来制作“Events.exe”所需的目标“C:/ITK/mingwbin/lib/libITKCommon-4.2.dll.a”。

我在 ITK 构建文件夹中检查了没有 libITKCommon-4.2.dll.a 文件。此错误与构建错误有关吗？请帮我解决这个问题。

我附上了错误的截图。

谢谢 [1](http://i.stack.imgur.com/VIzXM.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T19:03:04.557

引用的错误与 MingGW 的 GCC 包含 float.h 标头中的错误有关。

解决方法已合并到 ITK：

[http://itk.org/gitweb?p=ITK.git;a=commit;h=399018e1de41e9499e79d498380458b95671d796](http://itk.org/gitweb?p=ITK.git;a=commit;h=399018e1de41e9499e79d498380458b95671d796)

请在发布时使用 ITK Git master 或 ITK 4.5。

# grails - MVC客户端控制器成功方法中的Extjs 4.1无法调用此控制器中的另一个函数

> ID：13598044
> 
> 赞同：4
> 
> 时间：2012-11-28T04:53:27.170
> 
> 标签：grails, extjs

我正在使用 grails 2.1.0 和 extjs 4.1.0 。现在我在这里遇到了一些成功方法的问题。问题出在下面的代码注释中。谁可以帮我这个事 ：

```
 onupdateOrder : function(invoiceid, payMethod, rebatevalue){        
    if(invoiceid > 0){
        Ext.Msg.confirm('Update Product', 'Are you sure?', function (button) {
            if (button == 'yes') { 
                var invoice = Ext.create('Ext4Example.model.Invoice',{
                    id        : invoiceid,
                    rebate    : rebatevalue,
                    paymethod : payMethod
                });

                invoice.save({
                    success: function(model) {
                        var inId = model.getId();
                        this.updateOrder(invoiceid); //warning:this.updateOrder is not a function 
                    },
                    failure: function(){                           
                        console.log('Unable to save/update');
                    }
                });
            }
        }, this);
    }else{
        Ext.Msg.alert("Please Give Invoice Id");
    }
},
updateOrder :function(invoiceid){         
    var order = Ext.create('Ext4Example.model.Order',{
        id  : invoiceid
    });
    order.save({
        success: function(order) {
            console.log(invoiceid);
            Ext.getCmp('InvoiceNo').setValue(invoiceid);
            Ext.getCmp('itemform2').restoreItem();
        },
        failure: function(){
            console.log('Unable to update');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:57:43.173

您需要指定

```
scope: this 
```

在 invoice.save() 方法上，以便回调在控制器范围内运行。

# android - 无法使用 publish_stream 权限 - 适用于 Android 3.0 的 Facebook SDK

> ID：13598045
> 
> 赞同：6
> 
> 时间：2012-11-28T04:53:29.427
> 
> 标签：android, facebook

```
session.openForRead(new Session.OpenRequest(activity).setCallback(statusCallback).setPermissions(Arrays.asList(permissions))); 
```

如上所述，尝试将“publish_permission”传递给 setPermission 时出现此错误。为什么？怎么修？你们在哪里 Facebook 开发人员？

```
com.facebook.FacebookException: Cannot pass a publish permission (publish_stream) to a request for read authorization 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T08:39:33.217

正如错误消息所述，您正在尝试使用权限打开`read`会话。`publish`从 SDK 3.0 开始，您必须区分读取和发布操作，因此如果您想使用`publish_stream`，您必须调用`session.openForPublish(`或`session.reauthorizeForPublish(`在您的第一个请求之后。

# tsql - 用约束截断表

> ID：13598048
> 
> 赞同：1
> 
> 时间：2012-11-28T04:53:47.543
> 
> 标签：tsql

不必去每个子表并完全删除与您想要截断的表相关的约束，有没有一种快速的方法可以快速轻松地禁用任何冲突的约束，让我可以截断并退出而不必做一个删除/添加是combursome？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T06:06:09.237

```
-- Disable all constraints including dependencies:
ALTER TABLE dbo.TableName NOCHECK CONSTRAINT ALL;
ALTER TABLE dbo.TableNamesDependencies NOCHECK CONSTRAINT ALL;

-- Truncate tables:
TRUNCATE TABLE dbo.TableName;
TRUNCATE TABLE dbo.TableNamesDependencies ;

-- Enable all constraints:
ALTER TABLE dbo.TableNamesDependencies NOCHECK CONSTRAINT ALL;
ALTER TABLE dbo.TableName CHECK CONSTRAINT ALL; 
```

# .htaccess - 无法隐藏 htaccess 文件

> ID：13598053
> 
> 赞同：1
> 
> 时间：2012-11-28T04:53:58.040
> 
> 标签：.htaccess, apache, redhat

我很难隐藏我的 .htaccess 文件——我仔细检查以确保 httpd.conf 中存在以下内容：

```
<Files ~ "^\.ht">
Order allow,deny
Deny from all
</Files> 
```

目录上的其他允许/拒绝指令正在运行，可见 .htaccess 文件中的指令正在运行。

我们正在运行 Red Hat Enterprise Linux Server 版本 6.3 (Santiago) 和 Apache/2.2.15。

**我的问题：**除了显而易见的“为什么 .htaccess 文件仍然可见？” 是否有其他指令可以覆盖该指令，或者我可能缺少模块？（如果是这种情况，我认为 apache 会抛出错误。）

对此文件进行任何更改后，我重新启动了 apache，甚至重新启动作为健全性检查。我还对该文件进行了一些其他更改，以确保我正在处理正确的配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:14:20.433

你看过了[`How <Directory>, <Location> and <Files> sections work`](http://httpd.apache.org/docs/2.2/sections.html)吗？似乎`Location`稍后可能会评估另一个指令（可能），它会覆盖您的`Files`指令。如果没有更多 Apache 配置的详细信息，很难诊断出更多信息。

# dynamic - 在 VB.NET 中动态创建的 ComboBoxes 和 TextBoxes 中禁用字符输入

> ID：13598055
> 
> 赞同：1
> 
> 时间：2012-11-28T04:54:17.617
> 
> 标签：dynamic, combobox, textbox, keypress

在我在 VB.NET 中处理的一个简单程序中，我动态地创建了几个 ComboBoxes 和 TextBoxes。

例如，像：

```
 Dim i As Integer
    For i = 0 To 11
        Dim NewTxt As New TextBox()
        Me.Controls.Add(NewTxt)
        NewTxt.Name = "txtNoteInput" & i
    Next 
```

我想限制用户在这些文本框中输入某些键盘字符。过去，我已经为使用“... Handles ExampleTextBox.KeyPress”（类似于此处描述的内容：http: [//msdn.microsoft.com/en-us/library/ms171538.aspx](http://msdn.microsoft.com/en-us/library/ms171538.aspx)）视觉创建的单个文本框完成了此操作。

我正在寻找有关如何执行此操作的帮助：（1）用于动态创建的文本框，以及（2）一个（或几个）适用于许多文本框的代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:59:07.257

以此为参考，大致如下[：](http://www.authorcode.com/create-dynamic-textbox-and-label-in-vb-net/)

```
Dim i As Integer
For i = 0 To 11
    Dim NewTxt As New TextBox()
    Me.Controls.Add(NewTxt)
    NewTxt.Name = "txtNoteInput" & i
    ' Add this line below:
    AddHandler NewTxt.TextChanged, AddressOf Text_Changed
Next 
```

和：

```
Private Sub Text_Changed(ByVal eventSender As System.Object, _
                         ByVal eventArgs As System.EventArgs)
    Dim txt As String = eventSender.Text
    ' Do your regular filtering here as you would normally
End Sub 
```

# windows - 在 Windows 应用程序中传递参数

> ID：13598056
> 
> 赞同：-2
> 
> 时间：2012-11-28T04:54:18.030
> 
> 标签：windows, c#-4.0, arguments

我正在制作一个应用程序（桌面应用程序），需要从数据库中获取 id 并将这些 id 传递给另一个桌面应用程序。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:14:22.637

你的问题就是你的答案。您可以在 Windows 应用程序中使用命令行参数传递。至于如何做到这一点，写在下面。您可以创建一个进程并调用应用程序来启动和传递这些参数：

```
Process pro=new Process();
pro.StartInfo.FileName = @"ApplicationName.exe";
pro.StartInfo.Arguments = arg1 + " " + arg2;
pro.Start();

pro.WaitForExit(); 
```

在第二个应用程序中，通过以下代码获取这些值：

```
var arguments = Environment.GetCommandLineArgs();
if (arguments.Length > 1)
{
productIdFirst = Convert.ToInt32(arguments[1]);
productIdSecond = Convert.ToInt32(arguments[2]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:51:42.387

如果我理解正确，那么您正在谈论一个网站，您可以向它传递一个查询字符串。如果是这种情况，那么您应该查看[http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx) :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:56:09.123

我同意Martim 的观点，不清楚您的标签“Windows”是否可能意味着“网站”。但是，如果您真的像您标记的那样是指“Windows”，则可以将 COM 用作中间件。一篇德语文章已经对代码示例进行了很好的解释。语言可以翻译。

[http://www.activevb.de/tutorials/tut_middleware/middleware.html](http://www.activevb.de/tutorials/tut_middleware/middleware.html)

下载源代码

[http://www.activevb.de/tutorials/tut_middleware/downloads/Middleware.zip](http://www.activevb.de/tutorials/tut_middleware/downloads/Middleware.zip)

# arrays - 在数组中输入索引号

> ID：13598058
> 
> 赞同：0
> 
> 时间：2012-11-28T04:54:39.617
> 
> 标签：arrays, perl

我有 7 个以下列方式定义的数组：

```
my @array1 = ();
..
my @array7 = (); 
```

进而：

```
$array1[0] = "text goes here";
..
$array7[0] = "text goes here"; 
```

7 个数组，即 $array1[0] 到 $array1[24] 中的每个数组大约有 25 个元素。我需要经常在各种脚本中更改这些数组的内容。有时，因为数组的顺序很重要，我需要重新排列数组索引的顺序或删除某个位置的元素。这是一个真正的痛苦，因为我需要更改所有后续数组的索引。为了清楚起见，如果我删除 array1[12]，那么我需要将 $array1[13] 更改为 $array1[12] 以及所有 7 个数组和所有后续索引位置（或移动 array1[ 的内容13] 到 array1[12] 等）

所以我的问题是，是否可以估算数组的索引，以便我可以切换数组位置而不必事后更正每个数组索引？像这样的东西：

```
$array1[$_] = "text 1 goes here";
..
$array7[$_] = "other text 1 goes here"; 
```

进而：

```
$array1[$_] = "text 2 goes here";
..
$array7[$_] = "other text 2 goes here"; 
```

其中 $_ 将被 1 替换为 7 个数组中每个数组的第一个索引，并由 2 替换为 7 个数组中每个数组的下一个元素...（最多 24 个元素）。

除了使用哈希和 Tie::Hash 之外，还有其他解决方案吗？

**EDIT** ok, let me clarify. I am looking for a script maintenance solution, no for a solution about the output of the script. I need to change the script myself (by hand) frequently and I do not want to change the numbers indexing all 24 positions of all 7 arrays by hand whenever I change something in these arrays. So my question was, is there a way to have the script impute the numbers indexing all positions of all arrays?

Using push as mvp was suggesting would be a proper solution. Are there any other solutions that could involve loops or something rather than using push 7X24 times?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:06:40.913

Not quite sure what your question is. You are probably complicating things quite a bit. Are you looking for [`splice`](http://perldoc.perl.org/functions/splice.html)?

```
my @a = (1 .. 4);
splice @a, 2, 1;    # remove 1 element, starting at index 2
# @a is now 1, 2, 4 
```

`splice` can also insert elements and remove more than one element:

```
splice ARRAY or EXPR, OFFSET, LENGTH, LIST 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:21:28.153

You can use this approach:

```
my @array1;
push @array1, "text 1 goes here";
push @array1, "other text 1 goes here";
# ...
# or you can use loop as well:
for my $i (1..10) {
    push @array1, "text 1 instance $i goes here";
}

# do it for another one:
my @array2;
push @array2, "text 2 goes here";
push @array2, "other text 2 goes here";
# ... 
```

You can even do this (little bit nasty because of dynamic variables):

```
for my $i (1..7) {
    for my $j (1..24) {
         push @{"array$i"}, "text $i, instance $j goes here";
    }
} 
```

# hashmap - 如何更新哈希图中的值

> ID：13598062
> 
> 赞同：1
> 
> 时间：2012-11-28T04:55:02.413
> 
> 标签：hashmap

我已经使用 hashmap 在动态列表视图中存储了序列号、名称、价格、数量。

像这样的东西。

sno 名称 价格 数量 1 xyz 1 2 2 xys 2 2 3 xxx 3 3

我在单击按钮时删除元素。但是当我删除第一行的元素时，第一行的序列号保持不变（2）。我想自动更新序列号，使序列号（2）变为 1，序列号 3 变为 2。

请有人告诉我该怎么做。

# ruby-on-rails - 如何在 RoR 中编写自定义方法？

> ID：13598063
> 
> 赞同：0
> 
> 时间：2012-11-28T04:55:12.630
> 
> 标签：ruby-on-rails

如何在 RoR 中编写此方法？

```
if item is nil or item.user!='my_value' redirect_to "/" 
```

想这样称呼它：

```
@item = Item.find(params[:id])
method_described_earlier(@item) 
```

或者其他方式。想看看 rails pro 是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:10:53.383

您应该使用[before_filter](http://guides.rubyonrails.org/action_controller_overview.html#other-ways-to-use-filters)，它将在您指定的任何一组控制器操作之前运行。例如：

```
class SomeController < ApplicationController
  before_filter :require_special_item, only: [:myaction, :other_action, ...]

  def myaction
    # do something with @item
  end

  private

    def require_special_item
      @item = Item.find(params[:id])
      if @item is nil or @item.user!='my_value'
        redirect_to "/"
      end
    end
end 
```

该方法`require_special_item`将始终在`myaction`您指示的任何其他操作之前运行，如果找到的项目不符合您的要求，则重定向用户。

# tags - 如何在 preg_replace 中大写 $2？

> ID：13598064
> 
> 赞同：1
> 
> 时间：2012-11-28T04:55:17.123
> 
> 标签：tags, preg-match

我为我的 wow guild 运行一个社区站点（使用 html、css 和 php 手工构建）。最近，我的成员要求能够在他们的帖子中使用像@username 这样的标签，然后链接到用户页面。我已经有了这个脚本，如下所示：

```
<?php

$string = '@user really?';

if (preg_match('/(^|\s)@([a-z0-9_]+)/i', $string))
{

$string = preg_replace('/(^|\s)@([a-z0-9_]+)/i', '<a href="user/$2">@$2</a>', $string);

echo $string;
}
else {

echo $string;

}

?> 
```

这很好用，我注意到 $2 是用户名，但是，由于所有用户名都以大写字母开头，所以 $2 需要大写，并不是每个人都这样做。有没有办法将其编码为自动大写 2 美元，或者我应该告诉用户记住大写？

预先感谢，史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:57:48.233

我添加了更多 preg_replace 并且它现在链接到用户，无论你如何键入名称，只要你有 @ 符号（@user、@USER、@User、@uSER 等）。对于任何需要我的解决方案的人，我将在下面发布：

```
<?php

$proper_str = "going to battle with @ADROK";

$proper_str = ucfirst(strtolower($proper_str));

$proper_str = preg_replace('/@[a-z]/e', 'ucfirst(strtoupper("$0"))', $proper_str);

$proper_str = preg_replace('/(^|\s)@([a-z0-9_]+)/i', ' <a href="user/$2">@$2</a>', $proper_str);

echo $proper_str;

?> 
```

如果你改变周围的东西并做到：

```
<?php

$proper_str = "going to battle with e@mail.com";

if (preg_match('/(^|\s)@([a-z0-9_]+)/i', $proper_str))

{

$proper_str = ucfirst(strtolower($proper_str));

$proper_str = preg_replace('/@[a-z]/e', 'ucfirst(strtoupper("$0"))', $proper_str);

$proper_str = preg_replace('/(^|\s)@([a-z0-9_]+)/i', ' <a href="user/$2">@$2</a>', $proper_str);

echo $proper_str;

} else {

$proper_str = ucfirst("$proper_str");

echo $proper_str;

}

?> 
```

然后它将单独留下电子邮件地址并确保首字母大写！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:59:21.613

使用 ucfirst ($2) 大写第一个字符和 strtoupper($2) 如果你想要它全部大写

# css - CSS：如何显示隐藏的类

> ID：13598068
> 
> 赞同：0
> 
> 时间：2012-11-28T04:55:27.633
> 
> 标签：css, class, hidden

我正在尝试使用 css 显示位于我的 jquery 旋转横幅内的导航按钮。

哪个是：

```
<a class="ls-nav-prev" href="#"></a>
<a class="ls-nav-next" href="#"></a> 
```

出于某种原因，我无法显示它们，我尝试更改它们的位置，设置 z-index，添加背景图像和颜色。

**这是网站：**

[http://npmaudiovisual.com/esde/](http://npmaudiovisual.com/esde/)

**这就是我所拥有的：**

![在此处输入图像描述](../Images/a071c0f829550889026585f194c35c60.png)

**这是我应该拥有的（角落的按钮）**

![在此处输入图像描述](../Images/2ed1c23a56029267ae032f201f74e8f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:10:57.283

您需要在页面上为它们留出一些空间，否则它们将被隐藏。DIV 中也没有文本或图像。

```
a class="ls-nav-prev" href="#" style="float:left;">Prev</a>
<a class="ls-nav-next" href="#" style="float:right;">Next</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:27:10.777

首先，您的 CSS 如下：

```
<a class="ls-nav-prev" href="#"></a>
<a class="ls-nav-next" href="#"></a> 
```

在**layerslider.css**中只有

```
.ls-nav-prev,
.ls-nav-next {
    outline: none;
} 
```

这不会生成任何图像或内容。你如何测试它？

**其次，分离类并添加定位属性：**

```
.ls-nav-prev {
    left:-35px
    position:absolute
    top:200px
}

.ls-nav-next {
    left:935px
    position:absolute
    top:200px
} 
```

您可以使用`left`和`top`属性值来满足您的需求。

# c - C程序未按预期运行，输入后挂起

> ID：13598069
> 
> 赞同：0
> 
> 时间：2012-11-28T04:55:31.870
> 
> 标签：c, arrays, user-input

我正在编写的程序获取一个数字并将该数字显示为计算器会显示它（如下所示）正在编译没有问题，但是当我尝试运行它时，我可以输入我的数字，但没有任何反应。似乎它正在“挂起”，因为没有像我预期的那样显示进一步的输出。可能有人知道问题是什么吗？

```
#include <stdio.h>
#define MAX_DIGITS 20

char segments[10][7] =              /* seven segment array */
    {{'1','1','1','1','1','1','0'}, /* zero */
     {'0','1','1','0','0','0','0'}, /* one */
     {'1','1','0','1','1','0','1'}, /* two */
     {'1','1','1','1','0','0','1'}, /* three */
     {'0','1','1','0','0','1','1'}, /* four */
     {'1','0','1','1','0','1','1'}, /* five */
     {'1','0','1','1','1','1','1'}, /* six */
     {'1','1','1','0','0','0','0'}, /* seven */
     {'1','1','1','1','1','1','1'}, /* eight */
     {'1','1','1','0','0','1','1'}};/* nine */
char digits[3][MAX_DIGITS * 4];     /* digits array */
int i, j;                           /* count variables */
int adjust;                         /* output formatting */

int main(void) {
    clear_digits_array();

    int digit[20];
    for (i = 0; i < 20; i++) {
        digit[i] = 0;
    }

    int count = 20;
    int position = 0;

    printf("Enter a number: ");

    int number = scanf("%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d",
            &digit[0],
            &digit[1],
            &digit[2],
            &digit[3],
            &digit[4],
            &digit[5],
            &digit[6],
            &digit[7],
            &digit[8],
            &digit[9],
            &digit[10],
            &digit[11],
            &digit[12],
            &digit[13],
            &digit[14],
            &digit[15],
            &digit[16],
            &digit[17],
            &digit[18],
            &digit[19]);                        //NOTHING HAPPENS AFTER HERE

    printf("Got input, number is %d", number); 

    while (count > 0) {
        printf("Reading digits, count is %d", count);
        process_digit(digit[20 - count], position);
        position++;
        count--;
    }

    print_digits_array();
    printf("\n");
    return 0;
}

void clear_digits_array(void) {
    /* fill all positions in digits array with blank spaces */
    for (i = 0; i < 3; i++) {
        for (j = 0; j < (MAX_DIGITS * 4); j++) {
            digits[i][j] = ' ';
        }
    }
}

void process_digit(int digit, int position) {
    /* check each segment to see if segment should be filled in for given digit */
    for (i = 0; i < 7; i++) {
        printf("Processing digit %d at position %d, i is %d", digit, position, i);
        if (segments[digit][i] == 1) {
            switch (i) {
                case 0: digits[0][(position * 4) + 1] = '_';
                        break;
                case 1: digits[1][(position * 4) + 2] = '|';
                        break;
                case 2: digits[2][(position * 4) + 2] = '|';
                        break;
                case 3: digits[2][(position * 4) + 1] = '_';
                        break;
                case 4: digits[2][(position * 4) + 0] = '|';
                        break;
                case 5: digits[1][(position * 4) + 0] = '|';
                        break;
                case 6: digits[1][(position * 4) + 1] = '_';
                        break;
            }
        }
    }
}

void print_digits_array(void) {
    /* print each character in digits array */
    for (i = 0; i < 3; i++) {
        for (j = 0; j < (MAX_DIGITS * 4); j++) {
            printf("%c", digits[i][j]);
        }
        printf("/n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:59:16.813

您的代码包括：

```
printf("Enter a number: ");

int number = scanf("%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d",
        &digit[0],
        &digit[1],
        &digit[2],
        &digit[3],
        &digit[4],
        &digit[5],
        &digit[6],
        &digit[7],
        &digit[8],
        &digit[9],
        &digit[10],
        &digit[11],
        &digit[12],
        &digit[13],
        &digit[14],
        &digit[15],
        &digit[16],
        &digit[17],
        &digit[18],
        &digit[19]);                        //NOTHING HAPPENS AFTER HERE 
```

您输入了二十个不同的数字吗？如果没有，`scanf()`正在等待您输入更多数字。

请注意， from 的返回值`scanf()`是成功转换的数字的数量（示例中为 0..20），而不是您输入的值。

* * *

> 是这个问题吗？我试图使用户可以输入的最大数字数量为 20，如果输入更多，它们将被忽略，或者如果输入更少，它只会考虑那些（比如，输入 5，那么只有5将被使用）。那么有没有更简单的方法来做这种事情呢？

是的，我认为这就是问题所在。

可能有几种更简单的方法可以做到这一点。我很想使用：

```
char buffer[22];  // 20 digits, newline, null
if (fgets(buffer, sizeof(buffer), stdin) != EOF)
{
    size_t len = strlen(buffer);
    if (len >= sizeof(buffer) - 1)
    {
        fprintf(stderr, "You entered too long a string (maximum 20 digits)\n");
        exit(EXIT_FAILURE);
    }
    if (len > 0)
        buffer[--len] = '\0';  // Zap newline — carefully
    for (int i = 0; i < len; i++)
    {
        if (!isdigit(buffer[i]))
        {
            fprintf(stderr, "Non-digit %c found\n", buffer[i]);
            exit(EXIT_FAILURE);
        }
    }
    ...and from here, process the digits in buffer, one at a time...
    ...Use buffer[i] - '0' to get a number 0..9 from the character in buffer...
} 
```

另一种选择是使用`long long`数字，但最多只能提供 18 位（有符号）或 19 位（无符号），其中一些值 19 或 20 也在范围内。然后，您将使用除法和模数运算从数字中去除数字。

```
long long value;
if (scanf("%lld", &value) == 1)
{
    if (value < 0)
        ...error processing...
    do
    {
        int digit = value % 10;
        value /= 10;
        ...process digit...
    } while (value > 0);
} 
```

这有一些优点，但在实践中，我很想用它`fgets()`来读取一行输入，`sscanf()`或者 `strtoll()`转换和验证数字。这并不像看起来那么简单。特别是从 中返回的错误`strtoll()`很多且微妙，并且没有一个`scanf()`家族可以优雅地处理溢出的数字。您可以限制`scanf()`with`%18lld`以便读取不超过 18 位数字，但这意味着如果用户键入 19 位或更多位，您将在下次尝试读取 with 时得到剩余的数字`scanf()`。因此，处理`scanf()`也不简单，特别是如果您需要在一次程序运行中转换多个数字。

排除这些警告后，您通常可以在明智的人提供输入的情况下完成“足够好”的工作。使程序防弹（万无一失，如防傻瓜）的过程是困难的。当我可以报告读入的整个字符串（如`fgets()`）时，我发现有意义的错误报告更容易；使用`scanf()`，您将看不到在出现问题之前输入和使用的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:58:34.593

使用 GDB，这里是它的介绍[http://www.gnu.org/software/gdb/](http://www.gnu.org/software/gdb/) 查看本教程[http://www.cs.cmu.edu/~gilpin/tutorial/](http://www.cs.cmu.edu/~gilpin/tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:01:35.997

```
int number = scanf("%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d",
            &digit[0],
            &digit[1],
            &digit[2],
            &digit[3],
            &digit[4],
            &digit[5],
            &digit[6],
            &digit[7],
            &digit[8],
            &digit[9],
            &digit[10],
            &digit[11],
            &digit[12],
            &digit[13],
            &digit[14],
            &digit[15],
            &digit[16],
            &digit[17],
            &digit[18],
            &digit[19]); 
```

我不认为这是一个好主意`loop`在这里使用

```
for (i = 0; i < 20; i++) 
        scanf("%d",&digit[i]); 
```

如果你需要`number` 然后这样做

`int number = i;`当循环结束时。

你也可以试试这个

```
char buf[12]; 
while((c=getchar())!=EOF && i < 20)
{
 buf[j++] =c;
 if((c == '\n' || c == ' ' || c == '\t') && (sscanf(buf,"%d",&digit[i])) == 1)
   {
    i++;
    j = 0;
   }
 } 
```

对于 EOF 你将不得不按`CTRL+D` 这种方式你可以取 20 或更少的整数

# java - 使用 Intellij 在 Mac 上重新启动服务器时 Appengine 数据存储丢失

> ID：13598071
> 
> 赞同：3
> 
> 时间：2012-11-28T04:55:35.547
> 
> 标签：java, google-app-engine

一段时间以来，我一直在使用 Appengine 进行开发。我将 Intellij 用于我的 IDE，并且我有一个 Appengine 的 Java 实例。

在本地运行开发服务器时，每次重新启动服务器之间数据库都会丢失。这是因为 Intellij 每次都会重建 WAR，并且位于 WAR 中的数据存储会丢失。我在文档中知道它说数据存储将被持久化；但文档暗示您正在使用 Eclipse 插件。

以前我没有这个问题，因为有一个启动参数会为我在 WAR 之外设置的数据存储指定不同的位置。我丢失了这个参数并且找不到任何文档。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:16:33.367

以下 VM 参数允许我更改数据存储目录。

-Ddatastore.backing_store=PATH_TO_DATASTORE/local_db.bin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:04:13.150

插件只是调用本地开发服务器。对于 Java，命令行等效项是调用`dev_appserver.sh`（或`.cmd`对于 Windows 人员）。如果你打电话：

```
./dev_appserver.sh --help 
```

您可以看到一个`--generated_dir=DIR`适合您的选项。只需将其包含在您的 IntelliJ 运行配置中（借用 Eclipse 术语）就可以了。

# asp.net-mvc-4 - MVC4 / EF5 / 自动增量

> ID：13598075
> 
> 赞同：0
> 
> 时间：2012-11-28T04:55:47.733
> 
> 标签：asp.net-mvc-4, entity-framework-5

我不确定如何准确地表达我的问题，这可能就是为什么我在任何地方都找不到这样的例子。我正在使用 MVC4 和 EF5（也是 Web API），但我不确定如何继续使用模型，因为我以前从未真正需要对它们做太多事情。我正在围绕元素周期表做一些事情，我想制作它，以便为具有电子配置的元素建立一个列表。但是，我希望它只是根据输入顺序自动编号。如何告诉 EF 自动增加字段？基本上就像一个没有限制的主键字段。到目前为止，这是我所拥有的-我只是不确定如何进行：

```
public class Elements
{
    public int ElementID { get; set; }
    public string Name { get; set; }
    public int AtomicNumber { get; set; }
    public string Symbol { get; set; }
    public virtual Categories Category { get; set; }
    public virtual States State { get; set; }
    public virtual Occurences Occurence { get; set; }
    public virtual ICollection<Configurations> Configuration { get; set; }
}

public class Categories 
{
    public int CategoryID { get; set; }
    public string CategoryName { get; set; }
}

public class States
{
    public int StateID { get; set; }
    public string StateName { get; set; }
}

public class Occurences
{
    public int OccurenceID { get; set; }
    public string OccurenceName { get; set; }
}

public class Configurations
{
    public int ConfigurationID { get; set; }
    public int Order { get; set; }
    public int Value { get; set; }
} 
```

看上面我想要的是任何时候将值添加到 Configurations.Order 值从 1 开始并随着每个新的“行”而增加，但仅限于该特定的 ElementID。

那有意义吗？我正在考虑使用数据注释，但除了关键字段之外，我找不到任何匹配的东西，但这会使每个订单成为唯一的数字——我不想要。我觉得我没有正确表达这一点，因为我一直在寻找所有的东西来弄清楚，所以这是一张图片！耶！

![在此处输入图像描述](../Images/4124d347227e556c868497f798a84069.png)

从程序化的角度来看，这很可能是更好的事情。即使这个数据在一个蓝色的月亮上改变一次，我想尽可能地尝试通过 EF 来做，这样我就知道怎么做了。

提前致谢。此外，如果您发现任何其他明显的错误，请务必告诉我 :) 我很少与 web 开发人员一起工作，所以我确信有办法做得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:05:32.317

> 如何告诉 EF 自动增加字段？

你不能。甚至对于简单的自动递增主键也不行。更不用说应该相对于其他值增加的字段了。

[`HasDatabaseGeneratedOption`](http://msdn.microsoft.com/en-us/library/hh829109%28v=vs.103%29.aspx)映射方法不是告诉 EF 如何生成键值的方法。它告诉 EF 数据库是否以及如何生成属性值，因此 EF 知道如何响应。

因此，您要么必须在代码中生成订单号，要么让数据库来完成（通过触发器，或通过将 CUD 操作映射`Configurations`到存储过程）并告诉 EF 数据库通过属性`HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed)`配置来计算值`Order`。

# jsp - 使用 struts2 将 id 动态分配给 tr 标签

> ID：13598077
> 
> 赞同：2
> 
> 时间：2012-11-28T04:55:49.280
> 
> 标签：jsp, struts2

我有一个领域`ArrayList`的公司`firmId, firmName,address,phoneNumber,status` 。我想动态分配`firmId`给每一行。

```
<s:iterator value="firms">
<tr>

    <td align="left" class="Edit">
        <img src="../images/btn-edit.png" title="Edit" width="27" height="25" alt='Edit' />
    </td>
    <td align="left"><s:property value="firmName" /></td>
    <td align="left"><s:property value="address" /></td>
    <td align="left"><s:property value="phoneNumber" /></td>
    <td align="left"><s:property value="status" /></td>

</tr>

</s:iterator> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:00:19.953

与访问任何其他属性的方式相同：

```
<s:iterator value="firms">
  <tr id="firm-<s:property value='firmId'/>"> 
```

请注意，数字 id 不是有效的 id，您应该在前面添加一个字符串常量，如图所示。

# javascript - 在 iScroll 和标准 WebView 滚动功能之间切换

> ID：13598085
> 
> 赞同：0
> 
> 时间：2012-11-28T04:56:32.033
> 
> 标签：javascript, iphone, html, scroll, iscroll

我将**[iScroll 4](http://cubiq.org/iscroll-4)**用于我相当重的 iPhone web/Phonegap 应用程序，并**试图找到一种在 iScrolls 滚动功能和标准“本机”webview 滚动之间切换的方法**，基本上是点击。为什么我想要这个如下所述。

我的应用程序**在一个文件中有几个不同的子页面**。有些子页面有输入字段，有些没有。众所周知，*iScroll + 输入字段 = 你不走运*。我已经将 iScrolls 包装器 div（及其所有功能）包装在滚动至关重要且没有输入字段的一个子页面周围。其他部分，我只是简单地放在了**这个 div 之外**，这根本不提供这些滚动功能。我当然尝试将所有内容包装在包装器中并启用/禁用 iScroll（如下所示），但这对我来说根本不起作用：

```
myScroll.disable()
myScroll.enable() 
```

通过在主滚动区域/ iScroll div 之外放置一些子页面，***我禁用了 iScrolls 和标准 webview 滚动***（后者 - 我猜 iScroll 会这样做），这让我根本没有滚动。但是，通过添加下面的行，我能够获得一些垂直移动性（这甚至是一个词吗？）。不幸的是，这让我只有基本的滚动功能，因此没有比你的手指在屏幕上垂直滑动更多的滚动功能。*浏览大量内容的糟糕方式*

```
document.removeEventListener('touchmove', preventDefault, false);
document.removeEventListener('touchmove', preventDefault, true); 
```

因此，我正在**寻找一种在 iScroll 包装器 div 之外的子页面上启用标准 webview 滚动的方法**。我尝试了不同的方法，例如上面提到的方法，但**没有成功**。很抱歉没有为你们提供任何硬代码或演示来自己测试，这只是太多的代码，而且它会脱离它的上下文而呈现出来，对任何人都没有任何用处。

那么，**有没有办法 n javascript 来做到这一点**，在 iScroll 滚动功能和标准“本机”webview 滚动之间切换？*我宁愿不重建整个 DOM*，所以像上面描述的那样的解决方案会更可取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:33:03.403

我从来没有让这个工作，所以我认为它不能（容易）完成。我最终在我的应用程序中包含了四个不同的 iscroll 包装器，它们可以工作，但不是我想要的。我暂时将其作为正确答案。

# version-control - 是否可以从本地文件系统获取 TFS 更改集编号？

> ID：13598086
> 
> 赞同：2
> 
> 时间：2012-11-28T04:56:35.423
> 
> 标签：version-control, tfs

我有一个解决方案的本地副本。它绑定到 TFS

是否可以在不调用服务器的情况下从本地文件系统获取当前更改集信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:58:54.157

这是一种解决方法，如果您可以使用其中的修订号，`[assembly: AssemblyFileVersion("1.0.0.RevisionNumber")]`您可以在那里设置更改集信息。

[将程序集版本号与 TFS Buildnumber 对齐](https://stackoverflow.com/questions/545566/aligning-assembly-version-numbers-with-tfs-buildnumber)，这样每次构建时，每个项目 AssemblyInfo.cs 都将包含更改集信息。诚然，这将是项目范围的，而不是特定于文件的。

经过更多研究后，我发现了这个线程，它似乎非常接近： [TFS and msbuild version number with last changeset](https://stackoverflow.com/questions/1630823/tfs-and-msbuild-version-number-with-last-changeset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:06:05.600

这不是一个答案，而是一个很长的评论。这就是我将其标记为 CW 的原因。

这是一个思想实验：

选择一个时间，任何时间。确定当时的最新变更集。称之为“cs”。

你怎么知道在你找出“cs”之后的几秒钟内没有检查过后来的变更集？

没有与服务器的连接，就不可能有同步性。

# php - 当我有真正的布尔值并且似乎没问题时，为什么不发送 php 邮件

> ID：13598090
> 
> 赞同：1
> 
> 时间：2012-11-28T04:56:56.853
> 
> 标签：php, email, xampp, sendmail.exe

```
$res=  mail('myemailaddress@live.com', 'Email verification ','This is my own text');

print $res; 
```

我试图将邮件发送到我的电子邮件 ID。我有 1 页。看起来它正在工作，但它真的没有工作。

php.ini：

```
define_syslog_variables  = Off

[mail function]
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
 SMTP = localhost
 smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = mymailaddressishere@live.in

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program files\xampp-portable) fakemail and mailtodisk do not work correctly.
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
sendmail_path = "\"\xampp-portable\sendmail\sendmail.exe\" -t"

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the \xampp-portable\mailoutput folder
sendmail_path = "\xampp-portable\mailtodisk\mailtodisk.exe"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "\xampp-portable\php\logs\php_mail.log"

[SQL] 
```

我想知道如何追踪我的代码发生了什么。如果我需要在本地 php 服务器中进行一些设置，请告诉我有关它们的信息。

我正在使用 xampp 便携式“以管理员身份运行”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:23:08.747

你的文件中有一行写着：

```
; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the \xampp-portable\mailoutput folder
sendmail_path = "\xampp-portable\mailtodisk\mailtodisk.exe" 
```

在我的 XAMPP 安装中，我发现注释是错误的。如果您想使用 mailToDisk，您实际上必须**取消注释该行，并且邮件实际上被写入 /tmp/mailoutput。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:23:08.987

我不能使用评论系统，所以我只能在这里发布。但我认为这不是您正在寻找的答案。

XAMP 可能无法发送电子邮件。大多数 localhost 测试环境，例如 xamp 或 wamp 都无法发送电子邮件。他们需要首先设置为邮件服务器。您可以尝试将它们设置为邮件服务器，但我认为更容易获得免费托管（带有一些“丑陋”的子域名），然后将您的脚本放在那里并尝试发送邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:27:20.500

我这样说：你没有安装 SMTP 服务器，更不用说运行了。仅仅因为您`php.ini`说`mail()`将使用 SMTP @ localhost:25 并不意味着它已安装并正在运行。`mail()`即使它实际上没有发送信件，该函数也会返回 true。

如果你已经安装了一个 SMTP 服务器（它现在还没有与 XAMPP 一起打包），并让它运行，那么我很抱歉。请发布您正在使用的 SMTP 服务器和您的服务列表，以确保它正在运行。那么就更容易诊断了。

**编辑**

刚刚在我的电脑上测试，没有设置 SMTP 服务器：

```
$a= @mail('sales@ellsworthpublishing.com', 'asdf', 'asdf');
if(!$a)
    echo'False';
else
    echo'True'; 
```

输出是`True`。

# c - C 错误：取消引用指向不完整类型的指针

> ID：13598094
> 
> 赞同：0
> 
> 时间：2012-11-28T04:57:03.370
> 
> 标签：c, binary-tree

所以我在运行这个时得到一个“第 51 行：错误：取消引用指向不完整类型的指针”：

```
int main(void)
{
  Tree * testTree;

  testADT * data1;

  testTree = createTree(compare,destroy);

  data1 = malloc(sizeof(testADT));

  data1->val = 10;

  /* Line 51 */ addToTree(testTree,testTree->root,data1);

  destroyBinTree(testTree);

  return(0);
} 
```

我的 addToTreeFunction：

```
TreeNode * addToTree(Tree * theTree,TreeNode * theTreeNode, TreeDataTypePtr data)
{
TreeNode * newNode;
if(isEmpty(theTree))
{
    newNode = malloc(sizeof(TreeNode));
    newNode->height = 0;
    newNode->data = data;

    theTree->root = newNode;
    return theTree->root;
}else{
    if(theTree->compare(theTreeNode->data,data) == 1) /* shows root data is smaller */
    {
        theTreeNode->right = addToTree(theTree,theTreeNode->right,data);
    }else 
    if(theTree->compare(theTreeNode->data,data) == 0) /* shows root data is larger */
    {
        theTreeNode->left = addToTree(theTree,theTreeNode->left,data);
    }
}
return theTreeNode;
} 
```

我的 typedef 和结构：

```
struct tADT{
int val;
};

typedef struct tADT testADT;

typedef void * TreeDataTypePtr; 
```

谁能提供一些关于发生了什么的见解？提前致谢！

编辑：这是我的模块（.c）

```
struct AvlNode{
void * data;
struct AvlNode * left;
struct AvlNode * right;
int height;
};

struct AvlTree{
int (*compare) (TreeDataTypePtr data1, TreeDataTypePtr data2);
void (*destroy) (TreeDataTypePtr data);
struct AvlNode * root;
}; 
```

这是在标题（.h）中

```
struct AvlTreeNode;
struct AvlTree;

typedef struct AvlTree Tree;
typedef struct AvlNode TreeNode;
typedef void * TreeDataTypePtr; 
```

通过在标头中定义所有结构/类型定义来解决问题：

```
typedef struct AvlTree Tree;
typedef struct AvlNode TreeNode;
typedef void * TreeDataTypePtr;

struct AvlNode{
void * data;
struct AvlNode * left;
struct AvlNode * right;
int height;
};

struct AvlTree{
int (*compare) (TreeDataTypePtr data1, TreeDataTypePtr data2);
void (*destroy) (TreeDataTypePtr data);
struct AvlNode * root;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:59:02.047

您是否在某个头文件中的某处定义“树”？失败模块的第 51 行可以看到该标题吗？

您必须定义“树”:)

====================== 附录====================

感谢您使用树的“定义”更新您的帖子：

```
// .h file
struct AvlTreeNode;
struct AvlTree;
typedef struct AvlTree Tree;
... 
```

但事实仍然存在——这些都是“不完整的类型”。

你说你在你的模块（.c）中定义了 AvlTree 和 AvlTreeNode 。

问：*哪个*.c 翻译单元？

问：在您尝试使用它*之前*，它是否已在该翻译单元中定义？

问：它是否用于任何*其他*翻译单元？

问：为什么重复/冗余/混淆 typedef 别名？

问：看在上帝的份上，为什么不直接在 .h 文件中定义它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:59:55.917

`testTree->root`dereferences `testTree`，它是 type `Tree`，没有在任何地方定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:00:29.617

该错误表明您有 的前向声明`Tree`，但没有其相应结构的完整定义。这就是为什么您可以声明指向 的指针`Tree`，但不允许取消引用其成员的原因。

确保包含的编译单元在包含定义的头文件的顶部`main`有一个，这将解决这个问题。`#include``struct Tree`

# javascript - 使用 js sdk 执行 facebook 操作

> ID：13598097
> 
> 赞同：0
> 
> 时间：2012-11-28T04:57:18.060
> 
> 标签：javascript, facebook

我正在尝试在我的 Facebook 应用程序中执行“推荐”操作。我的 index.html 页面中的代码是

```
 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# aspxtesting: http://ogp.me/ns/fb/aspxtesting#">
    <meta property="fb:app_id" content="539397469421547" />
    <meta property="og:type" content="item" />
    <meta property="og:url" content="http://localhost:4816/SageFrame/recommend.html" />
    <meta property="og:title" content="Sample Item" />
    <meta property="og:image" content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" />
</head>
<div id="fb-root">
</div>
<div>
    <input type="button" runat="server" class="recommend" id="btnrecommend" value="recommend" />
</div>

<script type="text/javascript">
    window.fbAsyncInit = function() {
        FB.init({
            appId: '539397469421547', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });
    };

    // Load the SDK Asynchronously
    (function(d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
$('.recommend').click(function(){
FB.api('https://graph.facebook.com/me/aspxtesting:recommend?Item=http://localhost:4816/SageFrame/recommend.html&access_token=' + access_token + '', 'post', function(response) {
                if (!response || response.error) {
                    debugger;
                }
});
    } (document)); 
```

接下来我有recommend.html页面

```
 <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xmlns:fb="https://www.facebook.com/2008/fbml"> 
 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# aspxtesting: http://ogp.me/ns/fb/aspxtesting#">
  <meta property="fb:app_id" content="539397469421547" /> 
  <meta property="og:type"   content="item" /> 
  <meta property="og:url"    content="http://localhost:4816/SageFrame/recommend.html" /> 
  <meta property="og:title"  content="Sample Item" /> 
  <meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
  </head>
  <body></body>
  </html> 
```

但我收到错误您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：item。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:05:17.123

您的操作配置中的项目名称是在 facebook 的侧面对象上`Item`还是`item`？- 你`Item`在调用 Facebook 的 API，但它可能应该是`item`

此外，您`og:url`设置为本地 URL，这将不起作用，因为 Facebook 的爬虫需要能够访问指定的 URL - 如果 URL 在[Facebook 的调试工具](https://developers.facebook.com/tools/debug)中不起作用，它将不适用于您尝试发布的操作任何一个

# algorithm - 如何在 Matlab 全局优化工具箱中编写遗传算法的输出函数

> ID：13598098
> 
> 赞同：1
> 
> 时间：2012-11-28T04:57:20.943
> 
> 标签：algorithm, matlab, optimization, toolbox, genetic

我在 Matlab 全局优化工具箱中为遗传算法编写输出函数时遇到了一些问题。

我想创建一个存储`state.Population`每一代的所有（每个人）的函数。

这是我所知道的：

输出函数是遗传算法在每一代调用的函数。

输出函数具有以下调用语法。

```
[state,options,optchanged] = myfun(options,state,flag,interval) 
```

来自[http://www.mathworks.com/help/releases/R2010b/toolbox/gads/f6174dfi10.html#f17837](http://www.mathworks.com/help/releases/R2010b/toolbox/gads/f6174dfi10.html#f17837)

其中 state 包含当前一代的有用数据。

这是我尝试过的：

创建一个输出不同于 的函数`[state,options,optchanged]`。输出是一个全局矩阵，存储每个`state.Population`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:48:36.770

推荐的方法是使用嵌套输出函数，如下例所示：http: [//www.mathworks.com/help/matlab/math/output-functions.html#bsgpq6q-31](http://www.mathworks.com/help/matlab/math/output-functions.html#bsgpq6q-31)

请注意，此示例使用 fminsearch 输出函数的调用语法，因此您需要为 ga 输出函数更新它。

# php - preg_match 双引号或单引号

> ID：13598103
> 
> 赞同：0
> 
> 时间：2012-11-28T04:57:58.430
> 
> 标签：php, preg-match

使用**单引号时**

```
preg_match("/Location:(.*?)\n/", 'Location: www.\n', $matches);
    var_dump($matches); 
```

它打印：

```
array (size=0)
  empty 
```

使用**双引号时**

```
preg_match("/Location:(.*?)\n/", "Location: www.\n", $matches);
var_dump($matches); 
```

它打印

```
array (size=2)
  0 => string 'Location: www.
' (length=15)
  1 => string ' www.' (length=5) 
```

为什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:00:11.890

从[PHP 手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)：

> ### 单引号
> 
> 指定字符串的最简单方法是将其括在单引号（字符`'`）中。
> 
> 要指定文字单引号，请使用反斜杠 ( `\`) 对其进行转义。要指定文字反斜杠，请将其加倍 ( `\\`)。所有其他反斜杠实例将被视为文字反斜杠：这意味着**您可能习惯的其他转义序列，例如`\r`or `\n`，将按**指定的字面输出而不是具有任何特殊含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:59:07.663

这与`preg_match`. 当您使用单引号时，您的字符串不会以换行符结尾；它以反斜杠结尾，后跟一个 n。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T05:00:26.730

看看这可以帮助你：

[preg_match()](http://in1.php.net/manual/en/function.preg-match.php)

# c++ - C ++：计算每次迭代期间的概率百分比

> ID：13598107
> 
> 赞同：0
> 
> 时间：2012-11-28T04:58:26.760
> 
> 标签：c++

似乎无法让它发挥作用。这个想法是在每次计数后计算正面和反面的百分比，在每次迭代后累积。除了我的计算不断得到**nan%**。有人看到我做错了什么吗？

```
void flipCoin(time_t seconds, int flipCount){
    vector<int> flips;
    float headCount = 0;
    float tailCount = 0;
    double headProbability = double((headCount/(headCount + tailCount))*100);
    double tailProbability = double((tailCount/(headCount + tailCount))*100);

    for (int i=0; i < flipCount; i++) {
        int flip = rand() % (HEADS - TAILS + 1) + TAILS;
        flips.push_back(flip);
        if (flips[i] == 1) {
            tailCount++;
            cout << "Tail Percent: " << tailProbability << "%" << endl;
        }else{
            headCount++;
            cout << "Head Percent: " << headProbability << "%" << endl;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:08:18.993

你想这样做

```
void flipCoin(time_t seconds, int flipCount){
    vector<int> flips;
    float headCount = 0;
    float tailCount = 0;
    double headProbability = 0;
    double tailProbability = 0;

    for (int i=0; i < flipCount; i++) {
        int flip = rand() % (HEADS - TAILS + 1) + TAILS;
        flips.push_back(flip);
        if (flips[i] == 1) {
            tailCount++;
            tailProbability = double((tailCount/(headCount + tailCount))*100);
            cout << "Tail Percent: " << tailProbability << "%" << endl;
        }else{
            headCount++;
            headProbability = double((headCount/(headCount + tailCount))*100);
            cout << "Head Percent: " << headProbability << "%" << endl;
        }
    }
} 
```

此外，如果您只想打印百分比，则不需要 tailProbability 或 headProbability。您可以直接打印计算结果。

编辑：您也可以用 i+1 替换 headCount + tailCount。但是，如果您稍后更改该功能，这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:02:15.410

您的问题在于您只计算`headProbability`和`tailProbability`一次 - 当您计算它们时，它将评估为`0 / 0`。

```
float headCount = 0;
float tailCount = 0;
// Both are 0, end up as 0/0
double headProbability = double((headCount/(headCount + tailCount))*100);  
double tailProbability = double((tailCount/(headCount + tailCount))*100);

//Never recalculated in the loop 
```

要解决此问题，只需最初将它们定义为 0，然后在循环中重新计算它们。您似乎也不需要在`vector`这里，因为您只需要跟踪计数，而不是每次翻转的结果：

```
double headProbability = 0;
double tailProbability = 0;

for(int i = 0; i < flipCount; ++i) {
    int flip = rand() % (HEAS - TAIL + 1) + TAILS; //This could be simplified
    if(flip == 1) {
        ++tailCount;
        //Recalculate tailProbability
    } else { 
       //Etc...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:05:21.633

`nan`表示不是数字。你得到它是因为你除以 0。

在任何抛硬币之前，您的代码只计算一次概率。您需要将计算放入循环中，以便在每次迭代后重新计算概率。

```
void flipCoin(time_t seconds, int flipCount){
    vector<int> flips;
    float headCount = 0;
    float tailCount = 0;
    double headProbability;
    double tailProbability;

    for (int i=0; i < flipCount; i++) {
        int flip = rand() % (HEADS - TAILS + 1) + TAILS;
        flips.push_back(flip);

        headProbability = double((headCount/(headCount + tailCount))*100);
        tailProbability = double((tailCount/(headCount + tailCount))*100);

        if (flips[i] == 1) {
            tailCount++;
            cout << "Tail Percent: " << tailProbability << "%" << endl;
        }else{
            headCount++;
            cout << "Head Percent: " << headProbability << "%" << endl;
        }
    }
} 
```

# typescript - 访问 TypeScript 中定义的类的 .constructor

> ID：13598109
> 
> 赞同：12
> 
> 时间：2012-11-28T04:58:33.933
> 
> 标签：typescript

```
export class Entity {
    add(component: Component, componentClass?: { new (): Component;}): Entity {
        if (!componentClass) {
            componentClass = component.constructor
        }

        /** sniiiiip **/
    }
} 
```

示例的第 4 行（分配 component.constructor）导致编译器抱怨：

> “组件”类型的值上不存在属性“构造函数”

获取对对象构造函数的引用的正确方法是什么？我的理解是 JavaScript 中的所有对象都有一个 .constructor 属性，该属性指向用于创建该对象的构造函数......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T08:43:01.473

这在类型化代码中非常罕见，默认情况下它不包含在`Object`. 您可以简单地转换为`any`：

```
componentClass = (<any>component).constructor; 
```

# ruby - 导出到 Excel - 如何处理时间戳？

> ID：13598116
> 
> 赞同：5
> 
> 时间：2012-11-28T04:59:07.360
> 
> 标签：ruby, excel, axlsx

我有要写入 Excel 文件的时间对象。我正在使用 axlsx 库。将日期转换为单元格数据的类是[`DateTimeConverter`](https://github.com/randym/axlsx/blob/master/lib/axlsx/workbook/worksheet/date_time_converter.rb)，它将其转换为浮点时间戳。

时间`mm/DD/YYYY HH:MM:SS`按预期显示，但值是 GMT 时间。

有没有办法让 Excel 格式化特定时区或读者当地时区的时间？我目前的解决方案是将格式化的时间导出为字符串，对此我很不满意。

有没有办法在不添加 VBA 宏的情况下做到这一点？（请注意，我没有尝试根据链接的“重复”问题使用 VBA 宏将本地时间转换为 GMT，而是将 GMT 时间显示为本地时间 - 如果可能的话，最好不使用 VBA 宏。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:06:35.677

# 简短的回答

Excel 时间戳对时区一无所知。如果要导出一个值并以当地时间显示，则需要在将其`utc_offset`发送到 Axlsx 之前将其添加到时间。

```
t = ...
excel_time = Time.at(t.to_f + t.utc_offset)
sheet.add_row ["Time:", excel_time] 
```

# 长答案

在 Ruby（和许多其他编程语言）中，时间戳表示为自 1970 年 1 月 1 日 00:00:00 UTC（纪元）以来的秒数。Ruby`Time`对象还保留了一个时区，因此当您将其打印出来时，它可以显示本地时间。如果更改时区，时间会以不同的方式打印出来，但底层数字保持不变。

在 Excel 中，时间戳表示为自 1900 年 1 月 1 日（或 1904 年，取决于工作簿设置）以来的天数；时间表示为一天的一小部分。如果今天的日期是 41262，那么上午 12 点是 41262.0，中午是 41262.5。此方案中没有时区，时间只是您从手表上读出的数字。

当 Axlsx 将 Ruby Time 对象导出到 Excel 时，它会调用`to_f`以获取自纪元以来的时间值（以秒为单位），然后进行一些数学运算以将其转换为 Excel 喜欢的序列号。伟大的！但它抛弃了`utc_offset`，这就是为什么时间在 Excel 中显示为 UTC 的原因。

解决方案是简单地将 UTC 偏移量添加到代码中的时间，然后再将它们交给 Axlsx。例如，如果您使用的是东部标准时间，则必须减去五个小时。从技术上讲，就 Ruby 而言，您创建的新时间对象是不正确的，但我们这样做只是为了取悦 Excel。

# php - php中未定义的函数

> ID：13598121
> 
> 赞同：0
> 
> 时间：2012-11-28T04:59:24.427
> 
> 标签：php, function

我在一个类中编写了三个方法，一个正在调用另一个，但是当我通过对象在外部调用该函数时，它显示`undefined function`第二个函数的错误。

这是我的代码：

```
function resize_image(){

}

function image_resize(){
    $a = resize_image();
} 
```

当我运行它时，它显示`resize_image()`为未定义。这是错误：

> 致命错误：在第 2090 行的 /home/vacayge/public_html/Major/Alpha1/classes/cUserImages.php 中调用未定义函数 resize_image()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:02:20.013

使用**`this`**您可以访问类中的函数

把这段代码

```
$a = $this->resize_image(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:07:14.090

问题是，当您调用属于某个对象的函数时，您需要指定它属于哪个对象。同样，如果您访问属于某个对象的变量，那么您需要指定它属于哪个对象。

**内部对象**

```
$this->my_func();
$this->my_var = 'foo'; 
```

**外部对象**

```
$my_obj->my_func();
$my_obj->my_var = 'foo'; 
```

**静态资料**（您的问题不需要，但为了完整性而添加）

```
MyClass::my_func();
MyClass::my_var = 'foo'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:24:06.180

**$this->resize_image();** 这是从该函数外部调用函数的方法 [http://query7.com/using-this-in-php](http://query7.com/using-this-in-php)查看更多详细信息

# visual-studio-2008 - 将数组写入

> ID：13598125
> 
> 赞同：1
> 
> 时间：2012-11-28T04:59:51.160
> 
> 标签：visual-studio-2008, visual-c++, mfc

这是 MFC 项目的一部分。它崩溃了。1\. 我正在尝试尽可能快地将数组数组写入二进制文件。我使用了不同的方法来避免崩溃，例如 EnterCriticalSection 等。它失败了。这是一个更大的项目的例子。我正在尝试实践这种方法的可行性。

```
char filename[200];
UINT ThreadProc( LPVOID Param );
int *BUF[10];
int count = 0;
void CThreadDlg::OnOK() 
{
     for (int i = 0; i < 10; ++i)
     {
            BUF[i] = new int [500];
            for (int j = 0; j < 500; ++j)
            {
                BUF[i][j] = i + j;
            }

            AfxBeginThread(ThreadProc,NULL,THREAD_PRIORITY_NORMAL,0,0,NULL);
            count  = count + 1;

     }

     for (int i = 0; i < 10; ++i)
     {
        delete [] BUF[i];
        BUF[i] = NULL;
     }

}

UINT ThreadProc( LPVOID Param )
{
    sprintf_s(filename, "C:\\Temp\\test%d.bin", count);
    std::ofstream file;
    file.open(filename, std::ios::out);
    file.write((char *)BUF[count], 4*500);
    file.close();
    file.clear();

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:04:02.510

读取块（使用`BinaryReader.Read(byte[], int, int)`或`BinaryReader.ReadBytes(int)`）然后用于`Buffer.BlockCopy`有效地将字节转换为浮点数等可能是最简单的。但是请注意，这将是字节序敏感的。如果您想更稳健地转换（以便以后可以更改字节顺序，或在大端平台上运行），您可能需要`ReadFloat()`重复调​​用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:49:18.710

该代码没有任何线程同步。您动态分配 10 个不同的缓冲区（500 个元素），并启动 10 个不同的线程。您在*逻辑上将*`Nth`缓冲区分配给`Nth`线程。但是您不同步`count`变量。考虑一下：

*   从`OnOK`，假设`count`为 3。您为其分配缓冲区并启动线程。您确实**假设** `count = 3`将被这个新线程接收。但你大错特错。线程实际启动时的值`count`可能是 3..10（我的意思是第 4 个线程，对于`count=3`，忽略先前启动的线程）。您可能会创建重复的文件名，因为相同的文件`count`可能会被多个线程处理。
*   启动所有线程后，立即删除分配的缓冲区！您是否知道线程可能已经开始/完成处理？如何在不让线程处理它们的情况下删除整个缓冲区集？砰! 崩溃！

而不是使用全局变量`BUF`和`count`这种线程同步/数据传递。只需分配缓冲区（在 for 循环内），并使用`thread-param`参数（`LPVOID`参数）发送缓冲区。在线程中接收相同的缓冲区，对其进行类型转换，使用它，写入然后*从*线程本身中删除它。不要从`OnOK`.

示例代码：

```
int* pBuffer = new int [500];
// Assign different values to `pBuffer`, and then...
AfxBeginThread(ThreadProc,pBuffer); 
```

在线程中：

```
UINT ThreadProc( LPVOID Param )
{
   int* pTheBuffer = (int*)Param;
   ...
} 
```

您可能想阅读：[这篇文章](http://www.codeproject.com/Articles/43994/The-Practical-Guide-to-Multithreading-Part-1)，或[这篇文章](http://www.codeproject.com/Articles/65158/The-Practical-Guide-to-Multithreading-Part-2)。

# c - 如何使用 C 中的“选择”系统调用对输入进行硬编码？

> ID：13598132
> 
> 赞同：-1
> 
> 时间：2012-11-28T05:00:13.227
> 
> 标签：c, unix, hardcode

如果我正确理解了这个系统调用“选择”，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:02:47.830

？？？

如果您不想要用户输入......那么就不要要求用户输入！

如果你想“自动化”用户输入，为什么不用“myprog < myinput.txt”来运行你的程序呢？

我错过了什么吗？？？

# python - 如何在 SQLAlchemy 中使用空集合进行分页查询？

> ID：13598139
> 
> 赞同：2
> 
> 时间：2012-11-28T05:00:37.380
> 
> 标签：python, sqlalchemy

我正在尝试找到一种内存有效的方法来执行分页查询以测试空集合，但似乎无法弄清楚如何在大型数据库上有效地执行它。表格布局使用具有双向反向引用的关联对象。[它与文档](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#association-object)非常相似。

```
class Association(Base):
    __tablename__ = 'Association'
    assoc_id = Column(Integer, primary_key=True, nullable=False, unique=True)
    member_id = Column(Integer, ForeignKey('Member.id'))
    chunk_id = Column(Integer, ForeignKey('Chunk.id'))
    extra = Column(Text)
    chunk = relationship("Chunk", backref=backref("assoc", lazy="dynamic"))

class Member(Base):
    __tablename__ = 'Member'
    id = Column(Integer, primary_key=True, nullable=False, unique=True)
    assocs = relationship("Association", backref="member", cascade="all, delete", lazy="dynamic")

class Chunk(Base):
    __tablename__ = 'Chunk'
    id = Column(Integer, primary_key=True, nullable=False, unique=True)
    name = Column(Text, unique=True) 
```

如果成员被删除，则会级联删除成员的关联。但是，块对象将在数据库中成为孤立对象。要删除孤立的块，我可以使用如下查询测试空集合：

```
session.query(Chunk).filter(~Chunk.assoc.any()) 
```

然后使用以下命令删除块：

```
query.delete(synchronize_session=False) 
```

但是，如果关联表和块表很大，则查询或子查询似乎会加载所有内容并且内存猛增。

我在[这里](https://stackoverflow.com/a/1217947/1292182)看到了使用分页查询来限制标准查询的内存使用的概念：

```
def page_query(q, count=1000):
    offset = 0
    while True:
        r = False
        for elem in q.limit(count).offset(offset):
            r = True
            yield elem
        offset += count
        if not r:
            break

for chunk in page_query(Session.query(Chunk)):
    print chunk.name 
```

但是，这似乎不适用于空集合查询，因为内存使用率仍然很高。有没有办法对这样的空集合进行分页查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:47:03.503

我发现这里缺少一些东西。空块的查询似乎大部分都可以。我看到的内存使用高峰来自代码中前几行的查询，当时实际成员本身已被删除。

```
member = session.query(Member).filter(Member.name == membername).one()
session.delete(member) 
```

根据文档，会话（默认情况下）只能删除加载到会话/内存中的对象。当成员被删除时，它将加载它的所有关联，以便按照级联规则删除它们。需要发生的是必须通过使用[被动删除](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html#using-passive-deletes)来绕过关联加载。

我补充说：

```
passive_deletes=True 
```

到Member类的关联关系和：

```
ondelete='CASCADE' 
```

到 Association 类的 member_id 外键。我正在使用 SQLite3，并根据[文档](http://docs.sqlalchemy.org/en/rel_0_7/dialects/sqlite.html#sqlite-foreign-keys)添加了外键支持和引擎连接事件。

关于孤立块，而不是使用 query.delete 方法批量删除块。我使用了一个不包含偏移量的页面查询，并在循环中从会话中删除了块，如下所示。到目前为止，我似乎没有任何内存峰值：

```
def page_query(q):
    while True:
        r = False
        for elem in q.limit(1000):
            r = True
            yield elem
        if not r:
            break

for chunk in page_query(query):
    # Do something with the chunk if needed
    session.delete(chunk)
session.commit() 
```

长话短说，在删除具有大量集合的父对象时，使用passive_deletes=True 似乎有很大帮助。页面查询在这种情况下似乎也能很好地工作，只是我不得不取出偏移量，因为块正在从会话内联中删除。

# javascript - Javascript有时会崩溃，有时不会？

> ID：13598144
> 
> 赞同：0
> 
> 时间：2012-11-28T05:01:27.667
> 
> 标签：javascript, browser, cross-browser

我使用以下脚本构建网站。有时这个 javascript 崩溃有时不会。奇怪的是，当我在sliderLeft 定义后的第三行添加警告框时，脚本永远不会崩溃。有人请帮忙。我为不同的输出使用了两次相同的功能。

即使我删除了第二个类似的功能，我仍然遇到错误。请帮我解决一下这个。

```
$(window).load(function() {             
    var sliderLeft=$('#thumbScroller .container').position();
    //alert(sliderLeft);
 //   padding=$('#outer_container').css('paddingRight').replace("px", "");
    var sliderWidth=$(window).width()
    $('#thumbScroller').css('width',sliderWidth);
    var totalContent=0;
    $('#thumbScroller .content').each(function () {
        totalContent+=$(this).innerWidth();
        $('#thumbScroller .container').css('width',totalContent);
    });
    //alert(sliderLeft);
    $('#thumbScroller').mousemove(function(e){
        if($('#thumbScroller  .container').width()>sliderWidth){
            var mouseCoords=(e.pageX - this.offsetLeft);
            var mousePercentX=mouseCoords/sliderWidth;
            var destX=-(((totalContent-(sliderWidth))-sliderWidth)*(mousePercentX));
            var thePosA=mouseCoords-destX;
            var thePosB=destX-mouseCoords;
            var animSpeed=600; //ease amount
            var easeType='easeOutCirc';
            if(mouseCoords==destX){
                $('#thumbScroller .container').stop();
            }
            else if(mouseCoords>destX){
                //$('#thumbScroller .container').css('left',-thePosA); //without easing
                $('#thumbScroller .container').stop().animate({left: -thePosA}, animSpeed,easeType); //with easing
            }
            else if(mouseCoords<destX){
                //$('#thumbScroller .container').css('left',thePosB); //without easing
                $('#thumbScroller .container').stop().animate({left: thePosB}, animSpeed,easeType); //with easing
            }
        }
    });
    $('#thumbScroller  .thumb').each(function () {
        $(this).fadeTo(fadeSpeed, 0.6);
    });
    var fadeSpeed=200;
    $('#thumbScroller .thumb').hover(
    function(){ //mouse over
        $(this).fadeTo(fadeSpeed, 1);
    },
    function(){ //mouse out
        $(this).fadeTo(fadeSpeed, 0.6);
    }
);
});
$(window).resize(function() {
    //$('#thumbScroller .container').css('left',sliderLeft); //without easing
    $('#thumbScroller .container').stop().animate({left: sliderLeft}, 400,'easeOutCirc'); //with easing
    $('#thumbScroller').css('width',$(window).width());
    sliderWidth=$(window).width();
}); 
```

我只是按照建议删除了第二个函数，但仍然无法删除几行和脚本崩溃并且不显示任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:14:53.213

您有 2 个`$(window).load(function() {...});`函数定义。

尝试将它们组合成 1 个`$(window).load(function() {...});`电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:39:12.127

只是一个想法...

很难说没有看到问题（正如 3dgoo 所说，尝试将您的代码放入 jsfiddle.net）但是您确定您的代码在 dom 准备好时执行吗？

它解释说，您在代码中添加的“警报”通过给它时间完成加载来“解决”问题。

# css - 如何创建一条中间有文字的垂直线

> ID：13598148
> 
> 赞同：10
> 
> 时间：2012-11-28T05:01:43.283
> 
> 标签：css

我正在尝试创建一条中间有文本的垂直线。我不知道如何在 css 中实现这一点。

看图片![在此处输入图像描述](../Images/0b946466f749ad781559ba325fda6cac.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T05:26:24.263

其实方法很多。

其中之一：

html

```
<div class="wrapper">
    <div class="line"></div>
    <div class="wordwrapper">
        <div class="word">or</div>                                        
    </div>
</div>​ 
```

css

```
.wrapper {
    position: relative;
    width: 250px;
    height: 300px;
    border: 1px dashed #ccc;
    margin: 10px;
}

.line {
    position: absolute;
    left: 49%;
    top: 0;
    bottom: 0;
    width: 1px;
    background: #ccc;
    z-index: 1;
}

.wordwrapper {
    text-align: center;
    height: 12px;
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    margin-top: -12px;
    z-index: 2;
}

.word {
    color: #ccc;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 3px;
    font: bold 12px arial,sans-serif;
    background: #fff;
} 
```

​</p>

见例子：http: [//jsfiddle.net/zmBrR/22/](http://jsfiddle.net/zmBrR/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:09:54.240

`<div>`在标记周围加上a并像这样使用 CSS：-

```
 <div class="verticalLine">
   some other content
  </div> 
```

在 cSS 中：-

```
 .verticalLine {
border-left:thick solid #ff0000;
 } 
```

或者你可以试试这个： -

```
<style type="text/css">
 #your_col {
  border-left: 1px solid black;
  }
</style>

<div id="your_col">
  Your content here
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:14:35.663

这是一种没有背景图像的方法。它非常依赖固定的高度；你必须使用 display: table-cell 让它垂直对齐。

[http://jsfiddle.net/mstauffer/uyTB7/](http://jsfiddle.net/mstauffer/uyTB7/)

HTML：

```
<div class="container">
    <div class="side">Left side</div>
    <div class="or">
        <div class="or-line"></div>
        <div class="or-label">Or</div>
    </div>
    <div class="side">Right side</div>
</div> 
```

​CSS：

```
.container {
    padding: 1em;
}
.side, .or {
    float: left;
    height: 6em;
    text-align: center;
}
.side {
    width: 40%;
}
.or {
    position: relative;
    width: 20%;
}
.or-line {
    float: left;
    width: 50%;   
    border-right: 1px solid #aaa;
    height: 6em;
}
.or-label {
    background: #fff;
    color: #aaa;
    height: 1em;
    left: 50%;
    margin-left: -1.25em;
    margin-top: 2em;
    padding: .5em;
    position: absolute;
    text-transform: uppercase;
    width: 1em;
}
​ 
```

本质上，您使用`.or-line`的是在 50% 处创建一条线；您设置`.or`为`position: relative;`包含绝对定位的`.or-label`; 并且您手动将其定位`.or-label`在中间的 50% 处，然后以负左边距将其调整回整条线。然后你还用 padding 扩大它的大小，并用`margin-top`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-03T08:37:54.683

这是弹性框的解决方案： [https ://jsfiddle.net/1z0runv9/1/](https://jsfiddle.net/1z0runv9/1/)

```
.wrapper {
  width: 200px;
  height: 200px;
  display: flex;
  justify-content: center;
}

.or-separator {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #d3d7da;
}

.vertical-line {
  border-left: 1px solid #d3d7da;
  flex-grow: 1;
  width: 1px;
} 
```

```
 <div class="wrapper">
   <div class="or-separator">
     <div class="vertical-line"></div>
     <div>Or</div>
     <div class="vertical-line"></div>
   </div>
 </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-31T16:11:28.370

你可以使用 jquery 来做同样的事情。在您的 HTML 文档中导入 jquery cdn

选择所需的项目并为此编写一个javascript代码。

考虑这个例子

```
<!DOCTYPE html>
<html>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<title>Todo list</title>
 <style type="text/css">
 .completed{
 color: gray;
 text-decoration: line-through;
 }
 </style>
</head>
<body>
<div id="container">
<h1>Todo List</h1>
<input type="text" >
<ul>
'enter code here'
    <li>aaa </li>
    <li>bbb </li>
    <li>ccc </li>
 </ul>
</div>
<script type="text/javascript" >
`enter code here`

$("li").click(function () {
$(this).css("color","gray");    
$(this).css("text-decoration","line-through");
});
or 
$("li").click(function () {
$(this).toggleClass("completed");

});
</script>
</body>
</html> 
```

在此示例中，行通过 list(li) 元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-26T09:26:45.827

不管问什么问题，我都在这里寻求一个相当简单的方法。

```
.demo-body{
height: 400px;
}

.line-wrapper{
    background: black;
    width: 2px;
    height: 100%;
    position: relative;
 }

 .line-wrapper .word{
    position: absolute;
    background: white;
    top: 50%;
    transform: translate(52%,-50%);
    right: 50%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-size: 13px;
  }

.line-wrapper .word.vertical{
   writing-mode: tb-rl;
}
```

```
<div class="demo-body">

<!-- HORIZONTAL TEXT -->
<div class="line-wrapper">
  <div class="word">OR</div>
</div>

<br>

<!-- VERTICAL TEXT -->
<div class="line-wrapper">
  <div class="word vertical">OR</div>
</div>

</div>
```

# ruby-on-rails - 为 Redmine 插件升级 Rails 2 路由时遇到问题

> ID：13598151
> 
> 赞同：1
> 
> 时间：2012-11-28T05:01:50.840
> 
> 标签：ruby-on-rails, routes, redmine

我正在尝试为 Rails 2 设计的 Redmine 插件与 Rails 3 一起使用。

[https://github.com/dalyons/redmine-todos-scrum-plugin](https://github.com/dalyons/redmine-todos-scrum-plugin)

我几乎已经修复了大部分部分，但在让路线正常工作方面没有任何成功。**Rails 2**
的原始路线如下：

 **```
map.resources :todos, :name_prefix => 'project_', :path_prefix => '/projects/:project_id',
  :member => {:toggle_complete => :post }, :collection => {:sort => :post}

map.resources :todos, :name_prefix => 'user_', :path_prefix => '/users/:user_id', :controller => :mytodos,
  :member => {:toggle_complete => :post }, :collection => {:sort => :post}

map.my_todos 'my/todos', :controller => :mytodos, :action => :index
map.connect 'projects/:project_id/todos/show/:id', :controller => "todos", :action => "show" 
```

`rake routes`输出以下内容：

```
 sort_project_todos POST    /projects/:project_id/todos/sort(.:format)                 {:controller=>"todos", :action=>"sort"}
               project_todos GET     /projects/:project_id/todos(.:format)                      {:controller=>"todos", :action=>"index"}
                             POST    /projects/:project_id/todos(.:format)                      {:controller=>"todos", :action=>"create"}
            new_project_todo GET     /projects/:project_id/todos/new(.:format)                  {:controller=>"todos", :action=>"new"}
toggle_complete_project_todo POST    /projects/:project_id/todos/:id/toggle_complete(.:format)  {:controller=>"todos", :action=>"toggle_complete"}
           edit_project_todo GET     /projects/:project_id/todos/:id/edit(.:format)             {:controller=>"todos", :action=>"edit"}
                project_todo GET     /projects/:project_id/todos/:id(.:format)                  {:controller=>"todos", :action=>"show"}
                             PUT     /projects/:project_id/todos/:id(.:format)                  {:controller=>"todos", :action=>"update"}
                             DELETE  /projects/:project_id/todos/:id(.:format)                  {:controller=>"todos", :action=>"destroy"}
             sort_user_todos POST    /users/:user_id/todos/sort(.:format)                       {:controller=>"mytodos", :action=>"sort"}
                  user_todos GET     /users/:user_id/todos(.:format)                            {:controller=>"mytodos", :action=>"index"}
                             POST    /users/:user_id/todos(.:format)                            {:controller=>"mytodos", :action=>"create"}
               new_user_todo GET     /users/:user_id/todos/new(.:format)                        {:controller=>"mytodos", :action=>"new"}
   toggle_complete_user_todo POST    /users/:user_id/todos/:id/toggle_complete(.:format)        {:controller=>"mytodos", :action=>"toggle_complete"}
              edit_user_todo GET     /users/:user_id/todos/:id/edit(.:format)                   {:controller=>"mytodos", :action=>"edit"}
                   user_todo GET     /users/:user_id/todos/:id(.:format)                        {:controller=>"mytodos", :action=>"show"}
                             PUT     /users/:user_id/todos/:id(.:format)                        {:controller=>"mytodos", :action=>"update"}
                             DELETE  /users/:user_id/todos/:id(.:format)                        {:controller=>"mytodos", :action=>"destroy"}
                    my_todos         /my/todos                                                  {:controller=>"mytodos", :action=>"index"}
                                     /projects/:project_id/todos/show/:id                       {:controller=>"todos", :action=>"show"} 
```

我为**Rails 3**得到的最接近的是如下：

```
scope '/projects/:project_id', :name_prefix => 'project_' do
  resources :todos, :controller => 'todos' do
    member do
      post :toggle_complete
    end

    collection do
      post :sort
    end
  end
end

scope '/users/:user_id', :name_prefix => 'user_' do
  resources :todos, :controller => 'mytodos' do
    member do
      post :toggle_complete
    end

    collection do
      post :sort
    end
  end
end

match 'my/todos' => 'mytodos#index', :as => :my_todos
match 'projects/:project_id/todos/show/:id' => 'todos#show' 
```

`rake routes`输出以下内容：

```
toggle_complete_todo POST    /projects/:project_id/todos/:id/toggle_complete(.:format)  todos#toggle_complete {:name_prefix=>"project_"}
          sort_todos POST    /projects/:project_id/todos/sort(.:format)                 todos#sort {:name_prefix=>"project_"}
               todos GET     /projects/:project_id/todos(.:format)                      todos#index {:name_prefix=>"project_"}
                     POST    /projects/:project_id/todos(.:format)                      todos#create {:name_prefix=>"project_"}
            new_todo GET     /projects/:project_id/todos/new(.:format)                  todos#new {:name_prefix=>"project_"}
           edit_todo GET     /projects/:project_id/todos/:id/edit(.:format)             todos#edit {:name_prefix=>"project_"}
                todo GET     /projects/:project_id/todos/:id(.:format)                  todos#show {:name_prefix=>"project_"}
                     PUT     /projects/:project_id/todos/:id(.:format)                  todos#update {:name_prefix=>"project_"}
                     DELETE  /projects/:project_id/todos/:id(.:format)                  todos#destroy {:name_prefix=>"project_"}
                     POST    /users/:user_id/todos/:id/toggle_complete(.:format)        mytodos#toggle_complete {:name_prefix=>"user_"}
                     POST    /users/:user_id/todos/sort(.:format)                       mytodos#sort {:name_prefix=>"user_"}
                     GET     /users/:user_id/todos(.:format)                            mytodos#index {:name_prefix=>"user_"}
                     POST    /users/:user_id/todos(.:format)                            mytodos#create {:name_prefix=>"user_"}
                     GET     /users/:user_id/todos/new(.:format)                        mytodos#new {:name_prefix=>"user_"}
                     GET     /users/:user_id/todos/:id/edit(.:format)                   mytodos#edit {:name_prefix=>"user_"}
                     GET     /users/:user_id/todos/:id(.:format)                        mytodos#show {:name_prefix=>"user_"}
                     PUT     /users/:user_id/todos/:id(.:format)                        mytodos#update {:name_prefix=>"user_"}
                     DELETE  /users/:user_id/todos/:id(.:format)                        mytodos#destroy {:name_prefix=>"user_"}
            my_todos         /my/todos(.:format)                                        mytodos#index
                             /projects/:project_id/todos/show/:id(.:format)             todos#show 
```

我猜我没有`:name_prefix`正确使用，导致重复的路径被省略。

任何帮助将不胜感激。

***编辑***
我不确定这是否是最好的方法，但以下路线适用于**Rails 3**：

```
scope '/projects/:project_id' do
  resources :todos, :controller => 'todos', :as => 'project_todos' do
    member do
      post :toggle_complete
    end

    collection do
      post :sort
    end
  end
end

scope '/users/:user_id' do
  resources :todos, :controller => 'mytodos', :as => 'user_todos' do
    member do
      post :toggle_complete
    end

    collection do
      post :sort
    end
  end
end

match 'my/todos' => 'mytodos#index', :as => :my_todos
match 'projects/:project_id/todos/show/:id' => 'todos#show' 
```

我`:name_prefix`从 中删除`scope`并添加`:as`到`resource`.**

# java - Java Socket - 如何捕获 BufferedReader.readline() 的异常

> ID：13598152
> 
> 赞同：0
> 
> 时间：2012-11-28T05:01:58.167
> 
> 标签：java, multithreading, sockets

我有一个从套接字读取数据的线程（比如说 T1）：

```
public void run() {
  while (running) {
    try {
      BufferedReader reader = new BufferedReader( new InputStreamReader(socket.getInputStream()) ); 
      String input = reader.readLine();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }

} 
```

另一个线程（比如说 T2）尝试以它的一种方法完成程序。因此 T2 执行以下操作：

```
T1.running = false;
socket.close(); 
```

这是我找不到解决方案的情况：

*   T1 处于活动状态并等待某些输入读取，即阻塞。
*   上下文切换
*   T2 处于活动状态并将 running 设置为 false，关闭套接字
*   上下文切换
*   因为 T1 阻塞并且 T2 关闭了套接字，所以 T1 抛出异常。我想要的是捕捉这个 SocketException。我不能在 T1.run() 中放置 try/catch(SocketException)。那么我怎样才能在 T1 的运行方法中捕捉到它呢？如果在 T1 的跑步中无法捕捉到它，那么我如何在其他地方捕捉到它？

PS：“关于线程调试的另一个问题”
通常，当我逐步调试代码时，我会在上下文切换时丢失“活动运行线”。假设我在 T1 的第 20 行，发生上下文切换，假设程序从 T2 的 30.line 继续，但调试器没有转到/显示到 T2 的 30.line，而是“活动运行行” '消失。所以我失去了对代码的控制。我使用 Eclipse for Java 和 Visual Studio for C#。那么在上下文切换上进行调试时跟踪代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:09:53.910

对于假设您使用线程池的问题，也许您应该创建一个 ThreadFactory，在所有线程上安装 Thread.UncaughtExceptionHandler，然后在 ExecutorService 上使用 execute() 而不是 submit() 调用您的工作。

对于您的调试问题，您可能应该阅读 [http://msdn.microsoft.com/en-us/library/ms164746.aspx](http://msdn.microsoft.com/en-us/library/ms164746.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:31:33.520

您的代码还有其他几个问题，因此我将同时解决所有问题。

1.  您必须创建`BufferedReader` *外部*循环。否则，您将丢失缓冲区中的数据，每次循环都被丢弃。
2.  您必须测试`readLine()`for null 的结果。如果你得到它，你必须关闭`BufferedReader`并退出循环。
3.  如果您遇到任何异常，您还必须关闭`BufferedReader`并退出循环。

> 我想要的是捕捉这个 SocketException。

所以抓住它。

> 我不能在 T1.run() 中放置 try/catch(SocketException)。

你必须。没有选择。由于上述项目，您无论如何都必须完全重写它。

# mysql - 如何在 MySQL 中禁用触发器？

> ID：13598155
> 
> 赞同：29
> 
> 时间：2012-11-28T05:02:19.670
> 
> 标签：mysql, database-trigger

在我的 MySQL 数据库中，我有一些触发器`ON DELETE`和`ON INSERT`. 有时我需要禁用一些触发器，我必须`DROP`例如

```
DROP TRIGGER IF EXISTS hostgroup_before_insert // 
```

并重新安装。是否有任何快捷方式可以`SET triggers hostgroup_before_insert = 0`像我们一样使用外键：

```
mysql> SELECT version();
+-------------------------+
| version()               |
+-------------------------+
| 5.1.61-0ubuntu0.10.10.1 |
+-------------------------+
1 row in set (0.00 sec) 
```

**编辑**答案 MySQL 中**没有内置的服务器系统变量 TRIGGER_CHECKS**。
一个简单的解决方法是改用用户定义的会话变量。

```
#FALSE value overrides trigger type settings
SET @TRIGGER_CHECKS = [TRUE|FALSE]; 

SET @TRIGGER_BEFORE_INSERT_CHECKS = [TRUE|FALSE];
SET @TRIGGER_AFTER_INSERT_CHECKS = [TRUE|FALSE];

DELIMITER $$
DROP TRIGGER IF EXISTS `yearCheck_beforeInsert` $$
CREATE DEFINER=`root`@`localhost` TRIGGER `yearCheck_beforeInsert`
BEFORE INSERT ON `movies` FOR EACH ROW 

#Patch starts here
thisTrigger: BEGIN
  IF ((@TRIGGER_CHECKS = FALSE)
      OR (@TRIGGER_BEFORE_INSERT_CHECKS = FALSE))
    AND (USER() = 'root@localhost') 
```

这个[**TRICK 在这里解释**](http://mysql-0v34c10ck.blogspot.in/2011/06/how-to-disableenable-triggers-on-demand.html)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T05:15:21.450

暂时禁用触发器是不可能的。做一件事，使用一个全局变量。触发器将首先检查全局变量的值。在这种情况下，您可以更改全局变量的值以防止触发器工作。

# ios6 - 如何禁用 iPhone 应用程序的自动旋转？

> ID：13598156
> 
> 赞同：0
> 
> 时间：2012-11-28T05:02:23.633
> 
> 标签：ios6, autorotate

我正在实现一个通用应用程序。在我的应用程序中，我需要自动旋转 iPad 的屏幕，而不是 iPhone。我怎样才能做到这一点？我尝试使用以下代码，但它不起作用。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:14:06.523

最后，我通过更改 plist 文件中的属性来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:16:48.913

在努力设置 UIViewController 的 `shouldAutorotate`和`supportedInterfaceOrientation`方法之后，在 iOS6 中没有成功，我发现最有效的方法是在应用程序委托中设置它。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

但是返回使`UIInterfaceOrientationMaskPortraitUpsideDown`我的应用程序崩溃。我不知道我做错了什么！

# jquery - 使用 jquery 下载 Mvc4 webapi 文件

> ID：13598157
> 
> 赞同：0
> 
> 时间：2012-11-28T05:02:31.433
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api

我想从 api
apicontroller 下载客户端文件：

```
 public HttpResponseMessage PostOfficeSupplies()
     {
        string csv = string.Format ("D:\\Others\\Images/file.png");
        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
        result.Content = new StringContent(csv);
        result.Content.Headers.ContentType = new MediaTypeHeaderValue     ("application/octet-stream");

        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
        result.Content.Headers.ContentDisposition.FileName = "file.png";
        return result;    
    } 
```

1.如何从api控制器弹出下载jquery(octet-stream)？

```
 my client side code:
     $(document).ready(function () {
            $.ajax(
            {
                url: 'api/MyAPI'
            , type: "post"
            , contentType: "application/octet-stream"
            , data: ''
            , success:
            function (retData) {
                $("body").append("<iframe src='" + retData + "' style='display: none;' ></iframe>");
                               }

            });

}); 
```

但这行不通！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:34:47.813

更改以下代码

```
result.Content = new StringContent(csv); 
```

对此：

```
result.Content = new StreamContent(File.OpenRead("D:\\Others\\Images\\file.png")); 
```

# php - 在共享主机中编辑 php.ini 中的代码

> ID：13598158
> 
> 赞同：-3
> 
> 时间：2012-11-28T05:02:36.390
> 
> 标签：php

谁能告诉我如何访问 php.ini 文件，当我使用共享主机时，我尝试创建一个新的 php.ini 放在网站的根目录（因为我只是读取取决于服务器，也许可以覆盖）

无论如何，它对我不起作用，当我无法直接访问该文件并且我使用共享托管时，如何向 php.ini 添加一些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:07:31.220

   简单的说; 你不能。在共享主机帐户中，您无权访问**php.ini**文件，因为您与数百万其他用户共享同一系统。

   请改用**.htaccess**或**引导**文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:17:36.980

如果你使用 PHP 的[ini_set](http://php.net/manual/en/function.ini-set.php)函数，你可以在你的代码中设置很多这样的设置，而无需接触 php.ini，大多数/所有共享主机帐户都不会让你接触。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:13:05.307

大多数共享托管公司不允许我们更改 php.ini。只有一些小型托管公司允许这样做。确定询问您的托管。

你到底想做什么需要你改变php.ini？

如果执行时间较长，您可以使用 ajax / jquery。如果是重定向，请使用 htaccess 或 php 或 javascript。如果是外部文件访问，那么您需要其他高科技。:D

# php - Mysql orderBy 另一个表中字段名的计数

> ID：13598161
> 
> 赞同：2
> 
> 时间：2012-11-28T05:02:46.433
> 
> 标签：php, mysql

这是页面 URL [http://domain.com/testphp?id=1&mview=4](http://domain.com/testphp?id=1&mview=4)

**选项从名为je_add_choice**的表中显示， 其中包含字段名称

1.  选择ID
2.  poll_id
3.  choice_creator_id
4.  选择名
5.  选择图像
6.  描述
7.  选择创作时间

它显示了他们对特定民意调查的投票的选择，我想要做的是，我必须按票数显示选择的顺序。但问题是，选择的投票数来自另一个名为**je_user_vote** 的表，它包含字段

1.  用户身份
2.  poll_id
3.  选择ID
4.  vote_id（主键）
5.  日期时间投票
6.  用户类型

在投票页面中，我使用了查询

```
select * from je_addchoice where poll_id='$poll_id' 
```

在此查询中，$pollid 变量是从 url $_GET['id']

我想将查询重写为

```
select * from je_addchoice where poll_id='$poll_id' // append the code order by count(fieldname) from je_user_vote table. 
```

我已经用过

```
SELECT *, (
            SELECT count(*) 
            FROM je_uservote T2 
            WHERE T2.pollid=T1.pollID 
            AND T2.choiceid=T1.choiceID) AS votes
FROM je_addchoice T1
ORDER BY votes 
```

但它显示了空白页。任何人都可以帮助我解决这个问题。提前感谢您阅读本文并帮助我解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:14:27.223

您只需要左连接和聚合函数来计算投票。您可以在此处查询（未经测试）：

```
"SELECT COUNT(*) AS total_votes, t1.* 
FROM je_add_choice t1
LEFT JOIN je_user_vote t2
    ON t1.choice_id=t2.choice_id
    AND t1.poll_id=t2.Poll_id
WHERE t1.poll_id = " . $poll_id . "
GROUP BY t1.choice_id
ORDER BY 1 ASC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:07:38.880

```
SELECT COUNT(t2.choice_id) AS total_votes, t1.* 
    FROM je_addchoice t1
    LEFT JOIN je_user_vote t2
        ON t1.choice_id=t2.choice_id
        AND t1.poll_id=t2.Poll_id
    WHERE t1.poll_id = " . $poll_id . "    
    GROUP BY t1.choice_id
    ORDER BY 1 DESC 
```

这是我的问题的答案。我只是从 subred 的答案中获取编码并根据页面中的要求修改名称，然后我得到了结果。现在工作正常

[http://www.domain.com/projects/je/pollpage.php?id=2&mview=4](http://www.domain.com/projects/je/pollpage.php?id=2&mview=4)

这是现在以高票数到低票数的顺序显示选项的 URL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:39:50.497

```
SELECT COUNT(t2.choice_id) AS total_votes, t1.* 
    FROM je_addchoice t1
    LEFT JOIN je_user_vote t2
        ON t1.choice_id=t2.choice_id
        AND t1.poll_id=t2.Poll_id
    WHERE t1.poll_id = " . variable_name . "    
    GROUP BY t1.choice_id
    ORDER BY 1 DESC 
```

希望这可以帮助。

# python - 如何让 Python 中的 urlopen 命令放弃并继续前进？

> ID：13598165
> 
> 赞同：1
> 
> 时间：2012-11-28T05:03:25.830
> 
> 标签：python, timeout, urlopen

我正在编写一个`Python 2.7`下载网页的脚本。大多数时候，一切都按计划进行。鉴于此脚本有数千个网页可供下载，因此不可避免地会出现几次不成功的情况。`URLError`如果出现 a或 an ，脚本会放弃并继续前进`HTTPError`，但有时一切都会挂起，需要手动点击`Ctrl-Z`或`Ctrl-C`停止。有问题的代码：

```
 f = urlopen (url)
    local_file = open (file_name, 'w') # Open local file
    local_file.write (f.read())
    local_file.close () 
```

我试过`signal.alarm`了，但它并不总是有效。我尝试了urlopen中的超时参数，但这不起作用。

是否有可靠的方法来确保脚本在一定秒数后自动放弃并继续前进？我应该使用 urlopen 以外的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:09:01.183

确保您使用的是 urllib2

```
from urllib2 import urlopen
try:
    f = urlopen (url, timeout=10)
except urllib2.URLError:
    # try again later 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:12:41.233

如果你做 http 请求，我强烈推荐使用 requests python 库。您会发现它更易于使用且功能更强大。可以在这里找到[http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

安装和使用：

```
$: pip install requests 
```

做你想做的事情的代码

```
import requests

try:
    response = requests.get(url)
    local_file = open(file_name, 'w') # Open local file
    local_file.write(response.content)
    local_file.close()
except requests.ConnectionError:
    pass 
```

希望这可以帮助。

干杯

标记

# powershell - 如何查找用户使用了哪个 Cmdlet 别名？

> ID：13598169
> 
> 赞同：6
> 
> 时间：2012-11-28T05:03:52.870
> 
> 标签：powershell, alias, cmdlets

如果您发现这是一个非常蹩脚的问题，请原谅，但由于我正在学习 Powershell，所以我需要问一下。

[这是此处](https://stackoverflow.com/a/13584769/1095246)发布的问题和收到的答案的下一部分。

我有一个名为 Get-DirectoryListing 的自定义 cmdlet，并添加了一个别名“gdl”（在 .psm1 文件中使用 New-Alias 命令）。因此用户可以使用 Get-DirectoryListing 或 gdl 来触发相同的命令。现在我想在我的代码（.NET、C#）中检测用于执行命令的文本。假设用户使用别名“gdl”执行命令，我想显示如下消息

> “此别名已弃用，不应使用。”

但如果用户使用 Get-DirectoryListing 执行命令，我不想显示此消息。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:10:47.723

检查

> 这。[我的调用](http://msdn.microsoft.com/en-us/library/windows/desktop/system.management.automation.pscmdlet.myinvocation%28v=vs.85%29.aspx)。[调用名称](http://msdn.microsoft.com/en-us/library/windows/desktop/system.management.automation.invocationinfo.invocationname%28v=vs.85%29.aspx)

PSCmdlet 实例上的属性。

# php - 在类中包含类是不好的做法吗？

> ID：13598170
> 
> 赞同：2
> 
> 时间：2012-11-28T05:03:56.387
> 
> 标签：php, oop, class

假设我有一个名为 smallBox.php 的类文件：

```
<?php
class SmallBox {

    public function boxMethod() {}

} 
```

然后，我使用“require”将 smallBox.php 文件包含到另一个类中：

```
<?php
class BigBox {

    public function __construct() {

        require 'smallBox.php';
        $box = new SmallBox();
        $box->boxMethod();

    }

}
?> 
```

我是 PHP OOP 和 MVC 的新手，想知道在 BigBox 类中包含 smallBox.php 是否被认为是不好的做法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:17:12.003

[您应该使用自动加载类](http://php.net/manual/en/language.oop5.autoload.php)而不是手动加载`require`PHP 文件。基本上，它是一种基于类名加载适当 PHP 文件的机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:16:34.243

使用 required_once 和 include_once。在类声明之前使用包含结构

```
include_once 'path/to/class/a.php';

class B extends A
{
  public function __construct()
  {
     // your code
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:10:56.733

这将起作用，但请记住，当您包含或需要其他文件时，这些文件变量将在包含它的范围内运行。我曾经尝试使用“加载器”类来模拟 java 的导入行为，但遇到了这个问题，因为我正在加载的类在该主类的范围之外不可用。查看手册以获得更清晰的信息。

# opengl - 使用 GLSL 在两个不同的通道上进行 Alpha 混合纹理

> ID：13598176
> 
> 赞同：1
> 
> 时间：2012-11-28T05:04:22.893
> 
> 标签：opengl, glsl, textures, alphablending

我所拥有的是一组 3x3 网格中的 9 个正方形，用于测试此混合功能。这是想法。

通行证 1：

*   绑定纹理1（污垢）
*   使用 tex1 = Dirt 渲染方块

通行证 2：

*   绑定texture2（字母）
*   使用 tex2 = Letter W 渲染相同的正方形

这是针对游戏内编辑器的。我们希望能够在输入文本图集时更改字母的颜色。着色器应该从纹理中检查片段的 alpha 值。任何不等于 0（即可见）的东西都应更改为作为属性传递给着色器的所需颜色。

```
//Draw all Squares

glBindTexture(GL_TEXTURE_2D, textureID1);   //Dirt Texture

for (int Index = 0; Index < 9; Index++)
{
//Pass in Vertex Positions...
//Pass in UV's...
glDrawArrays(GL_TRIANGLES, 0, 6); // From index 0 to 6 -> 2 triangle
}

//Redraw Squares with letter texture bound.

glBindTexture(GL_TEXTURE_2D, textureID2);  //Letter Texture

glVertexAttrib3f(2,255,0,0);  //Desired Color of letter, passed to shaders.

glEnable(GL_ALPHA_TEST);
glAlphaFunc(GL_GREATER,0.05f);  //Anything with alpha < 0.05 is discarded.

//Draw all Squares
for (int Index = 0; Index < 9; Index++)
{
   //Pass in Vertex Positions...
   //Pass in UV's...
glDrawArrays(GL_TRIANGLES, 0, 6); // From index 0 to 6 -> 2 triangle
}

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);
glDisable(GL_ALPHA_TEST);

//Draw blue vertex dots...etc... 
```

这是一张显示源图像的图片，以及 2 个略有不同的片段着色器的输出。连同想要的结果。

[带有碎片着色器和所需结果的图像源](http://img84.imageshack.us/img84/7376/stackexchangealphablend.jpg)

加载纹理，两者都有 alpha 通道（GL_BGRA，Targas）。我使用 GL_NEAREST 作为 MIN/MAG 过滤器。

奇怪的是，如果我在 LETTER TEXTURE 的 alpha 通道中使用 99% 白色（即 254），则此着色器对我有效，而当我使用全白（即 255）时会失败。

我尝试过启用 GL_BLEND 并使用各种 BlendFunc，但它们似乎不起作用。

我想问题是。不使用多纹理着色器，也不渲染到 FBO，这是进行这种混合的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:15:47.357

事实证明，这是着色器的行为与我预期的一样的情况之一，但我误解了它的确切含义。

在这种情况下，我使用相同的着色器来渲染初始背景纹理和覆盖文本纹理。因为背景纹理上的 Alpha 通道一直是纯色 1.0（白色），所以将污垢纹理渲染为纯红色。然后在第二遍时，它会正确渲染文本，但我看不到它，因为它也被渲染为红色。

我在这种情况下解决了我的问题，而是在字母纹理的 alpha 通道中用黑色（即透明）绘制字母，然后在着色器中进行 alpha 测试并在必要时进行反转。此方法的**关键**是在呈现字母之前启用混合，并在之后禁用它。

最后，着色器的工作原理是这样的。

*   如果片段 alpha < 1
    那么，Color = vec4(in_color,(tex_color.a = (tex.color.a) ? (1.0 - tex_color.a) : 1.0));

*   否则，(Alpha = 1) 反转 alpha 通道
    tex_color.a = 0;
    颜色 = tex_color;

这使得在**启用混合**时在 Alpha 通道中以黑色绘制的任何内容都将显示为彩色而不是透明的。

最后，多纹理可能是要走的路，但就我而言，我想尝试一次只启用 1 个纹理。

# php - MySQLi 查询数组 - 循环数组返回空结果

> ID：13598179
> 
> 赞同：0
> 
> 时间：2012-11-28T05:04:36.910
> 
> 标签：php, arrays, mysqli

所以，这是我遇到的一件奇怪的事情，也许是因为深夜，或者我只是在这里遗漏了一些基本的东西。我必须将查询发送到数组而不是循环查询，因为其他 API 调用可以发送数组而不是来自数据库。该查询也按预期返回多个项目。上代码：

```
$result = $db->query("SELECT ID FROM tblTemp WHERE FOREIGN_KEY='2'");
$tmp = $result->fetch_array(MYSQLI_BOTH);        

for($i = count($tmp); $i > 0; --$i) {
echo '<option value="'.$tmp[$i-1].'">Item '.$i.'</option>';
} 
```

所以，我只是想将数组项放入 HTML 选择中。这适用于传递的 $tmp 数组；但是，当您使用查询时会发生什么，只有第一条记录会填充到选择中。添加了正确数量的项目，但缺少值。IE

```
<option value="">Item 2</option>
<option value="7">Item 1</option> 
```

编辑：PHP 确实抛出错误：未定义的偏移量：1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:13:45.427

您只从查询中获取一条记录，这就是为什么您有一个值并获得一个未定义的偏移量。在以下示例中，使用 while 循环从查询中获取所有结果。

```
$result = $db->query("SELECT ID FROM tblTemp WHERE FOREIGN_KEY='2'");
$html = "";
$i = 1;
while($tmp = $result->fetch_array(MYSQLI_BOTH)) {
    $html = '<option value="'.$tmp['ID'].'">Item '.$i.'</option>'.html;
    $i++;
}
echo $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:24:17.017

实际上，

```
 for($i = count($tmp); $i > 0; --$i) {
    echo 'Item '.$i.'';
  } 

```

如果**$tmp**返回正确的金额，应该可以工作。确保**$tmp**返回正确的数据。

希望这可以帮助。

# ajax - Codeigniter ajax 电子邮件表单

> ID：13598180
> 
> 赞同：1
> 
> 时间：2012-11-28T05:04:41.807
> 
> 标签：ajax, codeigniter, contact-form

我正在 Codeigniter 中实现一个 ajax 联系表单。似乎无法弄清楚我的问题是什么。通过 Firebug 运行脚本时，jquery.min.js 中有一个 POST 错误，这似乎没有多大意义。也许我缺少语法错误？

这是我的ajax JS：

```
$(document).ready(function() {

    //Ajax contact form
    $('#submit').click(function() {

        var form_data = {
            first_name : $('.first_name').val(),
            last_name : $('.last_name').val(),
            email : $('.email').val(),
            message : $('.message').val(),
            ajax : '1'
        };
        $.ajax({
            type : 'POST',
            url : "http://localhost/web/hfs/home/contact",
            async : false,
            data : form_data,

            success : function(msg) {
                $('#left-container.thankyou').html(msg);

            }
        });
        // end ajax
        return false;
    });
}); 
```

这是我的控制器功能：

```
public function contact() {
    if ($this -> input -> post('ajax') == '1') {
        $this -> form_validation -> set_rules('first_name', 'First Name', 'required|min_length[1]');
        $this -> form_validation -> set_rules('last_name', 'Last Name', 'required|min_length[1]');
        $this -> form_validation -> set_rules('email', 'Email', 'required|valid_email');
        $this -> form_validation -> set_rules('message', 'Message', 'required|min_length[5]');
        $this->form_validation->set_message('required', 'Please fill in the fields');

        if ($this -> form_validation -> run() == FALSE) {
            echo validation_errors();
        } else {
            echo "Thanks for contacting!";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:32:36.260

这行得通。监听表单上的提交事件并使用`data : $(this).serialize()`.

```
<html>
    <head>
        <title>Test</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    </head>
    <body>
    <form id="myform">
        <input type="text" name="a" value="Some value in A" id="a" />
        <input type="text" name="b" value="Some value in B" id="b" /></div>
        <input type="submit" value="Submit" />
    </form>
    <p id="thankyou"></p>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#myform").submit(function() {
                $.ajax({
                    type : 'POST',
                    url : "http://localhost/web/hfs/home/contact",
                    async : false,
                    data : $(this).serialize(),
                    success : function(msg) {
                        $('#thankyou').html(msg);

                    }
                });

                return false;
            });
        });
    </script>
    </body>
</html> 
```

# java - 从文件中读取，获取所有空值

> ID：13598186
> 
> 赞同：0
> 
> 时间：2012-11-28T05:05:22.523
> 
> 标签：java, java.util.scanner

我正在尝试从文件中读取行并将每个值单独存储在数组中。似乎可以很好地阅读前两个标题行，但随后对所有内容都返回 null 。我使用方法来转换一些变量，但即使当我从文件中读取纯 int 时，它也只会返回“0”，这是没有意义的，因为它似乎正在使用相同的基本读取文件而没有问题上一个项目中的方法（但没有数组）。这是我的代码：

```
package prog9;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.text.NumberFormat;
import java.util.Scanner;

public class Main {

private static String firstline;
private static String secondline;

public static void main(String[] args) throws IOException {
    File file = new File("files/PortlandWeather2011.txt");

    int count = 0;

    BufferedReader reader2 = new BufferedReader(new FileReader(file));
    while (reader2.readLine() != null)
        count++;
    reader2.close();

    Scanner reader = new Scanner(file);

    String prcp[] = new String[count];
    String snow[] = new String[count];
    String snwd[] = new String[count];
    String tmin[] = new String[count];
    String tmax[] = new String[count];
    String station[] = new String[count];
    String date[] = new String[count];
    int test[] = new int[count];

    firstline = reader.nextLine();
    secondline = reader.nextLine();
    System.out.println(firstline);
    System.out.println(secondline);

    int i = 0;

    while (reader.hasNextLine()) {
        station[i] = reader.next();
        // test[i] = reader.nextInt();
        date[i] = convertDate(reader.nextInt());
        prcp[i] = convertTenthsToInches(reader.nextInt());
        snow[i] = convertToInches(reader.nextInt());
        snwd[i] = convertToInches(reader.nextInt());
        tmax[i] = convertToDegrees(reader.nextInt());
        tmin[i] = convertToDegrees(reader.nextInt());
        // System.out.println(reader.nextLine());
        i++;
        if (reader.hasNextLine()) {
            reader.nextLine();
        }
    }
    reader.close();

    for (int x = 0; x < count; x++) {
        System.out.printf("%s %s %s %s %s %s %s\n", station[i], test[i], prcp[i], snow[i], snwd[i], tmax[i], tmin[i]);
    }

}

// our first helper method, takes the date and converts it into the proper
// format as a string.
private static String convertDate(int d) {
    // first make it into a date so we can strip the proper sections out of
    // it
    String date = "" + d;
    // store the year, month, and day seperately so we can rearange them
    String year = date.substring(0, 4);
    String month = date.substring(4, 6);
    String day = date.substring(6, 8);
    // add the slashes and the day/month/year in the correct order.
    String translated_date = month + "/" + day + "/" + year;
    // spit the translated date out.
    return translated_date;

}

// first conversion for inches, since some are in tenths and some are not.
private static String convertTenthsToInches(int i) {
    // create a number format so we can limit the amount of decimal places
    // cleanly.
    String converted = null;
    NumberFormat nf = NumberFormat.getNumberInstance();
    // devide the input by 10 so its not in tenths anymore.
    double input = i / 10.0;
    // if its 0 we just want 0.0, so lets test that now.
    if (input == 0) {
        converted = "0.0";
    } else {
        // if its not 0 we want to set the maximum and minimum decimal
        // places allowed, in this it would just be 1.
        nf.setMaximumFractionDigits(1);
        nf.setMinimumFractionDigits(1);
        // and finally format it using our numberformat and devide by 25.4
        // so we get inches instead of millimeters.
        converted = nf.format((input / 25.4));
    }
    // returns our new number, and formats it so its padded to 8 characters.
    return String.format("%8s", converted);

}

// our second inches helper method. for anything that isnt in tenths.
private static String convertToInches(int input) {
    String converted = null;

    NumberFormat nf = NumberFormat.getNumberInstance();

    if (input == 0) {
        converted = "0.0";
    } else if (input == 9999) { 
        converted = "----";
    } else {// exactly the same as before
        nf.setMaximumFractionDigits(1);
        nf.setMinimumFractionDigits(1);
        converted = nf.format((input / 25.4));
    }

    return String.format("%8s", converted);
}

// and finally converting the tenths of C to F
private static String convertToDegrees(int i) {
    String converted = null;
    NumberFormat nf = NumberFormat.getNumberInstance();
    double input = i / 10.0;

    if (input == 0) {
        converted = "0.0";
    } else if (input == 9999) {
        converted = "----";
    } else {
        nf.setMaximumFractionDigits(1);
        nf.setMinimumFractionDigits(1);
        // we convert the celsius to degrees using our formula
        converted = nf.format((input * 9 / 5 + 32));
    }
    // and then format it so its padded to 8 characters and return it.
    return String.format("%8s", converted);
}
} 
```

该文件如下所示：

```
STATION           DATE     PRCP     SNOW     SNWD     TMAX     TMIN     
----------------- ---------- -------- -------- -------- -------- -------- 
GHCND:USW00014764 20110101        0        0      127      122      -17 
GHCND:USW00014764 20110102        5        0      102       67       28 
GHCND:USW00014764 20110103       13        0       76       44      -56 
GHCND:USW00014764 20110104        0        0       76        6      -83 
GHCND:USW00014764 20110105        0        0       76       17      -83 
GHCND:USW00014764 20110106        0        0       76      -11     -106 
GHCND:USW00014764 20110107        0        0       76      -17     -122 
GHCND:USW00014764 20110108        0        0       51        6      -78 
GHCND:USW00014764 20110109        3        3       76       39      -44 
GHCND:USW00014764 20110110        0        0       51       28      -67 
GHCND:USW00014764 20110111        0        0       51       -6     -122 
GHCND:USW00014764 20110112      185      330       76        0      -44 
```

并且输出总是这样：

```
STATION           DATE     PRCP     SNOW     SNWD     TMAX     TMIN     
----------------- ---------- -------- -------- -------- -------- -------- 
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null
null null null null null null null 
```

谁能解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:14:03.463

我认为代码中的小错误...将这些行替换为 (int x = 0; x < count; x++) { System.out.printf("%s %s %s %s %s %s %s\n ", 站[i], 测试[i], prcp[i], 雪[i], snwd[i], tmax[i], tmin[i]); }

有以下几行

```
for (int x = 0; x < count; x++) {
    System.out.printf("%s %s %s %s %s %s %s\n", station[x], test[x], prcp[x], snow[x], snwd[x], tmax[x], tmin[x]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T05:15:16.773

请您更改以下内容

```
for (int x = 0; x < count; x++) {
    System.out.printf("%s %s %s %s %s %s %s\n", station[i], test[i], prcp[i], snow[i],     snwd[i], tmax[i], tmin[i]);
} 
```

进入 - -

```
for (int x = 0; x < count; x++) {
    System.out.printf("%s %s %s %s %s %s %s\n", station[x], test[x], prcp[x], snow[x], snwd[x], tmax[x], tmin[x]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:11:06.680

您的代码检查`Scanner.hasNextLine()`但忽略调用[Scanner.nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)以前进到下一行。

# c# - 从 csv 文件中获取数据，并将其放入数组中

> ID：13598191
> 
> 赞同：-2
> 
> 时间：2012-11-28T05:06:08.133
> 
> 标签：c#

```
public class Earthquake
{
    public double Magnitude { get; set; }
    public string Location { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public double depth { get; set; }
    public DateTime date { get; set; }
    public string EventID { get; set; }
    public string URL { get; set; }
    public Earthquake()
        : this(string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty)
    { }
    public Earthquake(string magna, string locate, string lat, string longi, string dept, string dat, string Event, string website)
    {
        Magnitude = Convert.ToDouble(magna);
        Location = locate;
        Latitude = Convert.ToDouble(lat);
        Longitude = Convert.ToDouble(longi);
        depth = Convert.ToDouble(dept);
        date = Convert.ToDateTime(dat);
        EventID = Event;
        URL = website;
    }

}

public void GetData()
    {

        string[] text = File.ReadAllLines(@"Earthquakes.csv");
            Earthquake[] data = new Earthquake[1];
            foreach (string line in text)
        {
            string[] myColumns = line.Split(',');
            Earthquake[] earth = new Earthquake[myColumns[0], myColumns[1], myColumns[2], myColumns[3], myColumns[4], myColumns[5], myColumns[6], myColumns[7]];
                data[i] = earth[i];
                i++;
        }
 } 
```

忽略评论部分我可以控制这些部分。我遇到的问题是将 csv 文件中的数据获取到地震阵列中。我遇到语法错误，我知道为什么，这是因为数据类型不正确，但老实说，我不知道如何修复它。另外，如果您注意到我正在尝试使用冒泡排序，并且由于 double 没有“比较”的定义，那么我应该使用什么来代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:12:23.527

如果您从 CSV 文件中读取，您可能必须从拆分值中删除空格。

尝试将 .Trim() 添加到列变量

```
myColumns[0].Trim() 
```

如果您希望对数组进行排序，请考虑使用 System.Linq

例如：

```
var byMag = earthQuakes.OrderBy(e => e.Magnitude); 
```

查看您发布的代码，GetData() 将不起作用。

尝试返回一个列表或 Enumerable

```
 public IEnumerable<Earthquake> GetData(string filename)
     {
         string[] text = File.ReadAllLines(filename);
         foreach (string line in text)
         {
             string[] myColumns = line.Split(',');
             yield return new Earthquake(myColumns[0].Trim(), myColumns[1].Trim(), myColumns[2].Trim(), myColumns[3].Trim(), myColumns[4].Trim(), myColumns[5].Trim(), myColumns[6].Trim(), myColumns[7].Trim());
         }
     } 
```

用法：

```
var earthquakes = GetData(@"Earthquakes.csv"); 
```

# wordpress - Wordpress - 删除个人资料页面上的“角色”

> ID：13598192
> 
> 赞同：2
> 
> 时间：2012-11-28T05:06:13.030
> 
> 标签：wordpress

我是 Wordpress 插件创建的新手，但仍在尝试获取操作挂钩或过滤器挂钩的概念。

我为“主持人”创建了一个自定义角色。我想要这个角色：
- 负责具有特定角色的用户，例如订阅者。
- 能够更改用户密码。
- 无法更改其他用户角色。

问题是这样的：为了能够更改其他用户的密码，版主需要访问用户个人资料页面。但是，在用户个人资料页面上，版主可以更改其他用户角色。我可以通过更改 wp-admin/user-edit.php 来隐藏它，但我认为最好通过插件来完成。那么，如何使用插件隐藏/修改“角色”选择？

谢谢您的帮助。

为了更清楚，我附上了一张图片。 ![在此处输入图像描述](../Images/d1440134f15d0279d721d076823337f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:45:53.227

没有**[钩子](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-admin/user-edit.php#L240)**可以删除它。它必须用 CSS 和/或 jQuery 来解决。

在这里，CSS 和 jQuery 的作用几乎相同，您可以选择其中一种，也可以同时使用。

必须根据[`current_user_can`](http://codex.wordpress.org/Function_Reference/current_user_can)您的角色/能力设置进行调整。

请注意，钩子[`admin_head`](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_head-%28plugin_page%29)可以有后缀，因此它只会在该特定`/wp-admin/WP-PAGE.php`地址中运行。

```
add_action( 'admin_head-user-edit.php', 'so_13598192_remove_roles_dropbox' );

function so_13598192_remove_roles_dropbox()
{
    // Admins can edit that, exit without printing scripts
    if ( current_user_can( 'administrator' ) )
        return;
    ?>
        <style>
            label[for=role], #role
            {
                display:none;
            }
        </style>
        <script>
            jQuery(document).ready(function($)
            {     
                $('label[for=role]').parent().parent().remove();      
            });
        </script>
    <?php
} 
```

# windows-server-2008 - Windows Server 2008 R2：上传限制

> ID：13598196
> 
> 赞同：0
> 
> 时间：2012-11-28T05:06:30.980
> 
> 标签：windows-server-2008, uploading

我在我的 win 2008 r2 服务器上运行 php，上传大于 1MB 的文件时遇到问题。我已经检查了我的 php.ini 中的限制 - 并重新启动了服务器，但它没有帮助。

这些是我的价值观：

```
post_max_size 128M 
upload_max_filesize 128M 
```

任何可能仍然是错误的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:38:02.780

不久前我遇到了同样的问题，仅适用于您使用 IIS7+ 的情况（尚未使用以前的版本进行测试）：

*   打开**IIS 管理器**
*   **选择**应该提供更大上传的网站
*   双击**请求过滤**图标，您应该会看到一个带有一些选项卡的屏幕
*   **右键单击**选项卡并选择**编辑功能设置**
*   调整**最大允许内容长度**（字节）字段

这对我有用

# javascript - JSON.parse() 没有给出预期的结果

> ID：13598199
> 
> 赞同：1
> 
> 时间：2012-11-28T05:06:47.253
> 
> 标签：javascript, json

我有一个字符串，它是由 /r 分隔的 JSON 值。它有点像数据库表中的记录。看起来像：

"{"id":"id","hole":"hole","stat":"stat","value":"value"}/r{"id":1354075540949,"hole":"1" ,"stat":"score","value":"4"}/r{"id":1354075540949,"hole":"1","stat":"putts","value":"1"} /r{"id":1354075540949,"hole":"1","stat":"fir","value":"y"}/r{"id":1354075540949,"hole":"1", "stat":"gir","value":"n"}/r"

第一行是列名（id、hole、stat、value），我只是给它们相同的值。由 /r 分隔的所有其他行是实际数据。

我用 /r 拆分这个字符串，然后循环遍历结果并将每个元素的 JSON.parse() 的结果推送到一个数组，所以现在我有一个具有给定结构属性的对象数组（id、hole、stat、价值）。**一切正常，除了“id”字段最终为真或假而不是大长数字。为什么这样做？**

```
var tblData = localStorage.getItem(tblName).split("/r");
var data = new Array();

// fill the array
for (i = 1; i < tblData.length - 1; i++)
    data.push(JSON.parse(tblData[i])); 
```

[编辑] 似乎这确实有效，但是我在此之后运行了一个 jQuery.grep()，它将 id 属性设置为 true/false。

```
var changeRecords = jQuery.grep(data, func); 
```

其中 func 是：

```
function (v) { return v.id == gCurrentRoundID && v.hole == gCurrentHole; } 
```

不知道为什么它将 id 设置为 true/false。

[编辑2]

没关系，我发现了我的错误。上面的函数不是正确的，而我确实只有 1 个等号表示 v.id = gCurrentRoundID，这就是为什么将它设置为真/假的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:12:20.883

我只需手动将整个字符串更改为有效的 JSON。让它以 a 开头并以 a`[`结尾，然后用逗号`]`替换所有这些s。`/r`最终结果应该看起来像

> "[{"id":"id","hole":"hole","stat":"stat","value":"value"},{"id":1354075540949,"hole":"1" ,"stat":"score","value":"4"},{"id":1354075540949,"hole":"1","stat":"putts","value":"1"}, {"id":1354075540949,"hole":"1","stat":"fir","value":"y"},{"id":1354075540949,"hole":"1","stat" :"gir","值":"n"},]"

然后*通过*解析`JSON.parse`

请注意，最后一个逗号可能会导致 IE8 出现问题。如果是这样，您应该能够相当容易地手动修复它。就像是`s = s.substr(0, s.length - 2) + ']';`

# iphone - 网站 iPhone 布局在 1 页上中断，但在另一个类似页面上没有？

> ID：13598203
> 
> 赞同：2
> 
> 时间：2012-11-28T05:07:00.967
> 
> 标签：iphone, layout

[http://littlegiant.co.nz/preview/tradeworks/](http://littlegiant.co.nz/preview/tradeworks/)

如果您查看 iPhone 上的主页，您会看到菜单下拉到下一行，但如果您转到任何其他页面，它不会。

这可能是什么原因造成的？

# ruby - 如何在 ruby on rails 中创建 json 对象？

> ID：13598210
> 
> 赞同：5
> 
> 时间：2012-11-28T05:07:37.647
> 
> 标签：ruby, json, ruby-on-rails-3.2

我的任务是在 rils 上用 ruby​​ 做 jtable。这是我的控制器

```
 def list
    @students = Student.all
    @jtable = {'Result' => 'OK','Records' => @students.map(&:attributes)}

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @jtable}
    end
  end
def newstudent
    @student = Student.new
    @jtable = {'Result' => 'OK','Record' => @students.last(&:attributes)}
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @jtable }
    end
  end 
```

这是我的 index.html.erb 文件

```
<html>
    <head>
        <%=stylesheet_link_tag "jtable_blue","http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css",:media => "all" %>
        <%= javascript_include_tag "jquery-1.8.3.min","http://code.jquery.com/ui/1.9.1/jquery-ui.js","jquery.jtable.min"%>
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        jQuery('#StudentTableContainer').jtable({
            title: 'Table of people',
            actions: {
                listAction: '/students/list',
                createAction: '/students/new',
                updateAction: '/student/Update',
                deleteAction: '/student/Delete'
            },
            fields: {
                id: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                name: {
                    title: 'name',
                    width: '40%'
                },
                sex: {
                    title: 'sex',
                    width: '20%'
                },
                branch: {
                    title: 'branch',
                    width: '30%'
                }

            }
        });

       jQuery('#StudentTableContainer').jtable('load');
    });
</script>
</head>
<body>

    <div id="StudentTableContainer">
    </div>
</body>
</html> 
```

我收到类似“与服务器通信时发生错误”的错误。在添加新用户时。如何添加新学生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:58:05.423

这个新学生的控制器是 def newstudent

```
 @student = Student.new(params.reject {|key,value| key =="controller" || key =="action"})

    if @student.save 
      @jtable = {'Result' => 'OK','Record' => @student.attributes}
    else
     @jtable = {'Result' => 'ERROR','Message'=>'Empty'}
    end  
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @jtable }
    end

  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:54:07.360

如果你想保存记录，那么你必须`:remote => true`在你的表单中添加，你的控制器在你的操作中有这样的东西：

```
if @user.save
  respond_to do |format|
    format.js # do whatever
  end
end 
```

如果我正确阅读了您的问题，并且您只想返回您创建的最后一个用户，那么在`do whatever`我上面的代码片段的部分中，您可以添加：

```
{'Result' => 'OK','Records' => @students.last(&:attributes)} 
```

# c - 如何在终端上显示 Xcode 输出？

> ID：13598217
> 
> 赞同：4
> 
> 时间：2012-11-28T05:08:04.647
> 
> 标签：c, xcode, macos, terminal

如何在终端上从 Xcode 运行 C 编程语言？请通过回答执行此操作的逐步过程来帮助我。谢谢。

Macbook Air 上的版本 10.7.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:16:19.750

将 xcode 输出写入文件并`tail -f`在终端中运行。

```
int main(int argc, char *argv[])
{
    NSAutoreleasePool *nsp = [[NSAutoreleasePool alloc] init];
    NSString *logPath =[NSString stringWithFormat:@"%@/xcode.log",NSHomeDirectory()];
    freopen([logPath fileSystemRepresentation], "a", stderr);
    [nsp release];
    return NSApplicationMain(argc,  (const char **) argv);
}  
$ tail -f /homeDir/xcode.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:26:18.823

Xcode 并非旨在运行该程序，以便在 Terminal.app 等外部程序中显示其输出。它可能通过弄乱方案配置来完成，但这可能不是一个好主意。

如果您希望程序的输出出现在 Terminal.app 中，那么您应该在终端中运行该程序。为此，请转到项目的构建目录，找到可执行文件，然后将路径复制到终端。运行程序。

* * *

鉴于您的评论，尚不清楚您在问什么。听起来您可能在问传递给的命令是否`system()`也可以在运行 Terminal.app 时直接使用。这个问题的答案是“是”。

你举个例子`system("cls")`。如果您尝试`cls`在 Terminal.app 中运行该命令并发现它不起作用，则原因是它是一个 Windows 命令。`system("cls")`仅适用于 Windows，该命令`cls`也可以直接在 Windows 上的 cmd.exe 中使用。`system("cls")`在 OS X 上`cls`不起作用，在 Terminal.app 中命令也不起作用。

在 Terminal.app 中用于清除屏幕的命令是`clear`，如果你想在 C 程序中使用这个命令，你可以使用`system("clear")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-11T12:23:34.113

只需在终端中键入以下键，它就会清除日志：

**命令 + K**

# mysql - 无法处理 MySQL FULL JOIN 查询

> ID：13598221
> 
> 赞同：2
> 
> 时间：2012-11-28T05:08:37.860
> 
> 标签：mysql, sql, database

我想`FULL JOIN`关注两张桌子

表 1：人员

```
P_Id      Name            
 1         A        
 2         B       
 3         C
 4         D
 5         E 
```

表 2：发票

```
 Id       P_Id            
 111        3        
 112        3       
 113        1
 114        1
 115       15 
```

我使用了这个查询：

```
SELECT Persons.Name, Persons.P_Id, Invoice.Id
FROM Persons
FULL JOIN Invoice
ON Persons.P_Id=Invoice.P_Id
ORDER BY Persons.Name 
```

但这会产生错误

> *“字段列表”中的未知列“Persons.Name”*

MySQL 服务器版本是 5.5.19，我在 Microsoft Windows7 中使用了命令行客户端

INNER JOIN、RIGHT JOIN 和 LEFT JOIN 对我有用，但我无法执行 FULL JOIN。有什么错误请告诉我我还是学生。我怎样才能在这里执行 FULL JOIN ？

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:15:49.377

为了`FULL JOIN`在 mysql 中进行模拟，您需要`UNION`从两个表中获取 Right Join 和 Left Join 的结果

```
SELECT  Persons.Name, Persons.P_Id, Invoice.Id
FROM    Persons
        LEFT JOIN Invoice
            ON Persons.P_Id=Invoice.P_Id
UNION
SELECT  Persons.Name, Persons.P_Id, Invoice.Id
FROM    Invoice
        LEFT JOIN Persons
            ON Persons.P_Id=Invoice.P_Id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/99b77/3)

# ajax - 根据 h:selectOneMenu 值隐藏和显示组件

> ID：13598223
> 
> 赞同：4
> 
> 时间：2012-11-28T05:09:13.840
> 
> 标签：ajax, jsf

我有一个带有 a 的页面，`<h:selectOneMenu>`我想根据菜单的所选值显示一些字段或其他字段。这可能吗？如果可以，怎么做？

```
<h:selectOneMenu id="productname" value="#{product.productname}" required="true"> 
    <f:selectItem itemLabel="select" itemValue="null" />  
    <f:selectItem itemLabel="Detetgent" itemValue="Detergent"/>  
    <f:selectItem itemLabel="Dishwash" itemValue="Dishwash" />  
    <f:selectItem itemLabel="Powder" itemValue="Powder" />  
    <f:selectItem itemLabel="Liquid" itemValue="Liquid" />       
</h:selectOneMenu>
<h:panelGroup rendered="Detergernt">
    <p>This will be shown if the selected item Detergent.</p>
</h:panelGroup>
<h:panelGroup >
    <p>This will be shown if the selected item Dishwash.</p>
</h:panelGroup>
<h:panelGroup >
    <p>This will be shown if the selected item equal to powder.</p>
</h:panelGroup>
<h:panelGroup >
    <p>This will be shown if the selected item equals to Liquid.</p>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:30:39.757

如果返回所需的值，您只需要检查`rendered`属性。`#{product.productname}`为了更新所有这些组件，您应该在菜单中添加一个更新所有有条件渲染组件`<f:ajax>`的公共父组件（*始终呈现）的菜单。*

```
<h:selectOneMenu id="productname" value="#{product.productname}" required="true"> 
    <f:selectItem itemLabel="select" itemValue="null" />
    <f:selectItem itemLabel="Detetgent" itemValue="Detergent"/>
    <f:selectItem itemLabel="Dishwash" itemValue="Dishwash" />
    <f:selectItem itemLabel="Powder" itemValue="Powder" />
    <f:selectItem itemLabel="Liquid" itemValue="Liquid" />
    <f:ajax render="groups" />
</h:selectOneMenu>
<h:panelGroup id="groups">
    <h:panelGroup rendered="#{product.productname == 'Detergent'}">
        <p>This will be shown if the selected item Detergent.</p>
    </h:panelGroup>
    <h:panelGroup rendered="#{product.productname == 'Dishwash'}">
        <p>This will be shown if the selected item Dishwash.</p>
    </h:panelGroup>
    <h:panelGroup rendered="#{product.productname == 'Powder'}">
        <p>This will be shown if the selected item equal to Powder.</p>
    </h:panelGroup>
    <h:panelGroup rendered="#{product.productname == 'Liquid'}">
        <p>This will be shown if the selected item equals to Liquid.</p>
    </h:panelGroup>
</h:panelGroup> 
```

### 也可以看看：

*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components/4870557#4870557)
*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:17:51.050

```
<h:selectOneMenu id="productname" value="#{product.productname}" required="true"> 
    <f:selectItem itemLabel="select" itemValue="null" />  
    <f:selectItem itemLabel="Detetgent" itemValue="Detergent"/>  
    <f:selectItem itemLabel="Dishwash" itemValue="Dishwash" />  
    <f:selectItem itemLabel="Powder" itemValue="Powder" />  
    <f:selectItem itemLabel="Liquid" itemValue="Liquid" />    
    <p:ajax event="onselect" update="selectedOp" listener="#{product.updateSelectedValue}" />
</h:selectOneMenu>
<h:panelGroup rendered="{product.updateSelectedValue ne null}" id="selectedOp">
    <p>This will be show selected value</p>
    #{product.updateSelectedValue}
</h:panelGroup> 
```

这是您可以从页面上的下拉列表中显示所选值的方式。我假设您使用的是 PrimeFaces，因此`<p:ajax>`在`<h:selectOneMenu >`. 还添加条件 on `<h:panelGroup rendered="{product.updateSelectedValue ne null}">`，以便在选择的值不是 时显示`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:29:47.963

是的，你可以做到这一点。请务必粘贴您的页面，以便我在页面本身上进行解释。

这个想法是将 an`<a4j:outputPanel>`用作容器并 `<h:panelGrourp layout="block" rendered="#{}">`用作需要隐藏的字段的包装器。
的选定值`selectOneMenu`将用于 的`rendered`属性`<h:panelGroup>`。

# c++ - 请澄清术语类静态对象（与类静态成员）

> ID：13598224
> 
> 赞同：0
> 
> 时间：2012-11-28T05:09:31.987
> 
> 标签：c++

我在没有代码或上下文的情况下多次遇到术语**类静态对象**，以澄清这是作者对我不知道的东西的术语还是只是**类（范围）静态成员（变量或函数）**的另一个术语.

```
class m1 {
public:
    static int x;
};

// with x being the "class static "object"
// which I just call a "class static member".
int m1::x; 
```

或者，该术语是否仅适用于实际上是用户定义对象的成员变量？

```
class m2 {
public:
    int y;
};

class m3 {
public:
    static m2 z;
};

// with z really being an object - the "class static object"?
m2 m3::z; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:21:22.253

我认为这两种情况都是指“类静态对象”。对象只是一个实体，它占用内存而不是函数，因此它是否是用户定义类型（UDT）并不重要。

至于“类静态成员”的区别，函数也可以是“成员”，所以我想说区别在于“类静态对象”不包括函数。

就个人而言，我会使用“静态成员变量”和“静态成员函数”，而不是那些术语。

# ruby-on-rails-3 - 显示错误：类 DatePickerInput (TypeError) 的超类不匹配

> ID：13598233
> 
> 赞同：1
> 
> 时间：2012-11-28T05:10:21.860
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, formtastic

平台：Fedora 16

导轨 3

形式主义 2

我正在尝试安装[https://github.com/kristianmandrup/formtastic_datepicker-rails3x](https://github.com/kristianmandrup/formtastic_datepicker-rails3x)

在将 Gemfile 中的 Gem 包含为

```
gem 'formtastic_datepicker-rails3x', :git => 'git://github.com/kristianmandrup/formtastic_datepicker-rails3x.git' 
```

我试过脚手架

```
rails g scaffold due_date date:date 
```

我有错误

```
/home/sreekeshos/.bundler/ruby/1.8/formtastic_datepicker-rails3x-d66ab9db54bd/lib/formtastic/date_picker_input.rb:2: superclass mismatch for class DatePickerInput (TypeError)
    from /home/sreekeshos/.bundler/ruby/1.8/formtastic_datepicker-rails3x-d66ab9db54bd/lib/formtastic_datepicker-rails3x.rb:2:in `require'
    from /home/sreekeshos/.bundler/ruby/1.8/formtastic_datepicker-rails3x-d66ab9db54bd/lib/formtastic_datepicker-rails3x.rb:2
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /home/sreekeshos/Ruby Example/Form sample/form_sample/config/application.rb:7
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:24:in `require'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:24
    from script/rails:6:in `require'
    from script/rails:6 
```

我搜索了其他相关问题，但它们都涉及从 Ruby 2 迁移到 3 或 erb 与 eruby。

# kinect - 什么是 SensorKinect？

> ID：13598236
> 
> 赞同：3
> 
> 时间：2012-11-28T05:10:45.463
> 
> 标签：kinect, openni

因此，从以下[链接（OpenNi 和 NITE 之间的区别）](https://stackoverflow.com/questions/6086981/what-is-the-difference-between-openni-and-openkinect)，我了解了 OpenKinect 和 NITE 是什么。什么是 SensorKinect，它在图片中的表现如何？根据我目前的理解，我们不需要它。

如果有人想知道，我打算将这些库用于骨架+深度跟踪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:30:40.540

SensorKinect 是一个 OpenNI 模块，允许它与 Kinect 对话。基本上，OpenNI 和 NITE 是中间件，而 SensorKinect 是硬件驱动程序。

如果您使用的是 Kinect，则需要它。如果您使用的是 PrimeSense 传感器，则不需要。

# android - Java.net.UnknownHost 异常 Android 下载

> ID：13598248
> 
> 赞同：0
> 
> 时间：2012-11-28T05:11:08.803
> 
> 标签：android, networking, permissions, download

我正在尝试在 android 的异步任务中进行下载。不幸的是，我收到“unknownHost”错误。对我来说，我似乎拥有适当的权限，但我仍然收到此错误。下面是我的权限、我的错误和功能。对我做错了什么有任何想法吗？

非常感谢你。

克雷格

```
 11-27 21:51:34.545: D/ImageManager(9381): Error: java.net.UnknownHostException: 

        public void downloadFromUrl(String strUrl, String fileName) { // this is the downloader
        // method
        try {
            File parentDirectory= new File(PATH);
            if (!parentDirectory.exists()) {
                System.err
                        .println("It seems like parent directory does not exist...");
                if (!parentDirectory.mkdirs()) {
                    System.err.println("And we cannot create it...");
                    // we have to return, throw or something else
                }
            }
            URL url = new URL(strUrl);
            File file = new File(PATH + fileName);
            if (!file.exists()) {
                file.createNewFile();
            }

            long startTime = System.currentTimeMillis();
            /* Open a connection to that URL. */
            URLConnection ucon = url.openConnection();

            /*
             * Define InputStreams to read from the URLConnection.
             */
            InputStream is = ucon.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);

            /*
             * Read bytes to the Buffer until there is nothing more to read(-1).
             */
            ByteArrayBuffer baf = new ByteArrayBuffer(50);
            int current = 0;
            while ((current = bis.read()) != -1) {
                baf.append((byte) current);
            }

            /* Convert the Bytes read to a String. */
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(baf.toByteArray());
            fos.close();
            Log.d("ImageManager",
                    "download ready in"
                            + ((System.currentTimeMillis() - startTime) / 1000)
                            + " sec");

        } catch (IOException e) {
            Log.d("ImageManager", "Error: " + e);
        }
    }

     <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.craig.musicapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

.       <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
        <uses-permission android:name="android.permission.GET_ACCOUNTS" />
        <uses-permission android:name="android.permission.USE_CREDENTIALS" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.READ_INTERNAL_STORAGE" />

    <application
        android:icon="@drawable/jerrygarciahand"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".SearchMusic"
            android:label="@string/search_music"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ConcertDetailActivity"
            android:screenOrientation="portrait" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value=".ItemListActivity" />
        </activity>
        <activity
            android:name=".AppInfo"
            android:label="@string/title_item_list" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:23:31.867

使用此权限..在您的 android 清单文件中

```
 <uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:27:09.677

所以我是个笨蛋，我想通了。令人惊讶的是，一夜的睡眠可以做什么。

我的网址有“///”而不是“//”。显然，这导致了下载问题。感谢您的所有帮助，希望我下次不会被剥夺睡眠并犯下如此愚蠢的错误:)。

# java - 如何在 Java 中使用套接字输入/输出流捕获“事件”？

> ID：13598261
> 
> 赞同：2
> 
> 时间：2012-11-28T05:12:24.243
> 
> 标签：java, multithreading, sockets, asynchronous

有没有可能通过事件与客户沟通？我是说：

我已经连接了客户端，`InputStreamReader`并且`PrintWriter`

```
in = new BufferedReader(new InputStreamReader(
                        client.getInputStream()));
out = new PrintWriter(client.getOutputStream(), true); 
```

当我使用`in.readLine()`服务器等待传入数据时。但我有这种情况：

1.  客户端没有发送任何数据
2.  连接仍然存在
3.  我需要向客户端发送一些数据（但`in.readLine()`仍在挂起过程）并等待响应

问题是：处理异步传入数据的最佳方式是什么？我的意思是“事件”之类的东西。我应该为读取创建线程并为写入创建另一个线程吗？如果我可以在一个线程中完成，您能否举一个代码示例？是否可以中止等待`in.readLine()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:25:41.477

在我看来，如果您希望程序异步运行，最好有一个单独的线程来执行套接字 IO。看看[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)。

对于一个简单的应用程序，我要做的是创建一个单独的线程来侦听传入的数据，并将“观察者”或“事件侦听器”注册到该线程。当数据进入时，通知您的观察者，以便他们执行必要的操作。

当监听线程空闲等待数据时，你的主线程仍然可以正常进行。

确保您也熟悉 Java 并发编程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:39:47.613

Java 通过包提供非阻塞 i/o `java.nio`（[参见此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/package-summary.html)）。但是 Java 的“nio”通道不与来自`java.io`. 所以，如果你想使用 nio，你必须从监听器开始用 nio 构建你的服务器。

如果您坚持使用现有的`java.io`流，那么您将不得不使用每个客户端线程模型；或者您需要设计一个系统，让单个线程（或线程池）通过重复循环来管理一堆客户端，轮询[instream.available()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html#available%28%29)以确定哪些客户端已经准备好处理数据。当然，在后一种情况下，您希望避免忙循环，因此适当地使用 Thread.sleep 也可能是有序的。

# java - 使字体大小小于 1 Java GUI

> ID：13598262
> 
> 赞同：0
> 
> 时间：2012-11-28T05:12:28.780
> 
> 标签：java, swing, user-interface, font-size, java-2d

我想在我的图表的网格中标记我的井号，但是当我使用字体大小 1 时，它会变得很大！有没有办法使字体大小小于1？我在编码方面是否遗漏了一些东西？

这是生成网格并尝试在哈希上放置标签的代码。

```
 for (double k = myStart1; k <= myEnd1; k = k + (myEnd1 - myStart1) / 8) {
    g2.setColor(Color.BLACK);
        g2.draw(new Line2D.Double(k, (max - min) / 60, k, -(max - min) / 60));
        String labelx=String.valueOf(k);
        Float xCo=Float.parseFloat(Double.toString(k));
        g2.setFont(new Font("SansSerif",Font.PLAIN,1));
        g2.drawString(labelx, xCo, 0);
    } 
```

这是 x^2 生成的图表的屏幕截图。![在此处输入图像描述](../Images/e1ff26e06815788c3ad813a6e88c0244.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:27:09.870

正如我确定你已经注意到的那样，Font 构造函数采用一个`int`作为参数 - 有效地渲染不可能构造具有0 和 1 之间`size`的字体（至少使用此方法） 。`size`

然而，我确实发现该类的[derivedFont](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont%28float%29)方法`Font`特别有趣：

> public Font derivedFont(float size)
> 
> 通过复制当前 Font 对象并向其应用新大小来创建新的 Font 对象。
> 
> 参数： size - 新字体的大小。

该`deriveFont`方法声称构造一个具有给定大小的新 Font，将 a`float`作为参数 - 因此，可以执行以下操作：

```
Font theFont = new Font("SansSerif",Font.PLAIN,1);
theFont = theFont.deriveFont(0.5);
g2.setFont(theFont); 
```

生成大小为 0.5 的字体。

现在，我自己还没有测试过这个——设置一个图形程序需要时间，所以你比我更适合尝试它。但只是把它作为一种可能性扔出去。

# asp.net-mvc - ASP.NET MVC jQuery 验证：如何为所有必填字段显示一条消息

> ID：13598267
> 
> 赞同：1
> 
> 时间：2012-11-28T05:13:08.797
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-javascript

我的模型中有很多`[Required]`字段。

而且，以传统的 MVC 方式，我将为`@Html.ValidationMessageFor()`每个必需的文本框添加。

然后，如果用户没有为 5 个文本框输入任何内容，则 UI 中将显示 5 条消息。

我的问题是：我可以**只显示一条消息**说请在 UI 中*填写必填字段，而不是在任何地方都显示消息，例如**Name is required* , *Address is required* ...？

我需要在客户端进行验证，无需将表单发送回服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:18:15.580

您可能想查看`ValidationSummary`- [http://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationsummary(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationsummary(v=vs.108).aspx) -*返回无序列表（ul ModelStateDictionary 对象中的验证消息的元素）。*您可以像这样覆盖消息：

```
@Html.ValidationSummary(true, "Invalid form") 
```

来源[https://stackoverflow.com/a/4924494/201648](https://stackoverflow.com/a/4924494/201648)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:20:22.003

您可以使用`@Html.ValidationSummary`：

```
@Html.ValidationSummary(true, "Please fill mandatory fields") 
```

如果您还想包含属性特定错误的列表，请使用：

```
@Html.ValidationSummary(false, "Please fill mandatory fields") 
```

# sql-server - 检查任何列是否包含字符串中的字符

> ID：13598271
> 
> 赞同：1
> 
> 时间：2012-11-28T05:13:21.403
> 
> 标签：sql-server, in-clause

我有一个表中的列，其中包含这样的值

```
class1   class2   class3   class4
A        D        0        0
0        A        B        0
B        0        0        C
A        0        D        0 
```

我有这样的字符串`First="A,B"`，`Second="C,D"`

如何检查这四列中任何一列中包含的字符串中的任何一个字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:31:03.803

```
select * from yourtable where class1 in('A,B,C,D')
UNION
select * from yourtable where class2 in('A,B,C,D')
UNION
select * from yourtable where class3 in('A,B,C,D')
UNION
select * from yourtable where class4 in('A,B,C,D') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:33:08.537

```
select * from t 
where 

'A,B' like '%'+class1+'%'
or
'A,B' like '%'+class2+'%'
or
'A,B' like '%'+class3+'%'
or
'A,B' like '%'+class4+'%' 
```

# c# - SocialAuth.NET 不工作

> ID：13598277
> 
> 赞同：1
> 
> 时间：2012-11-28T05:14:04.680
> 
> 标签：c#, asp.net, asp.net-mvc, socialauth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:58:48.857

# java - Netbeans RCP 应用程序安装程序不起作用？

> ID：13598281
> 
> 赞同：0
> 
> 时间：2012-11-28T05:14:18.660
> 
> 标签：java, netbeans-platform

我将我的 JRE 与我的 netbeans RCP 安装程序捆绑在一起，它在我的 Windows 7（32 位机器）上运行良好。但是当我在 XP（32 位）机器上尝试时，它说：“无法使用安装程序准备捆绑的 JVM。很可能捆绑的 JVM 与当前平台不兼容。” 我试图详细说明安装并找到退出代码：1006（进程执行期间超时）。

这是详细输出的一部分：

 `````
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/EST  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/EST5EDT  
creating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT  
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+1  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+10  
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+11  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+12  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+2  
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+3  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+4  
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+5  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+6  
extracting: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+7  
inflating: C:\DOCUME~1\E567467\LOCALS~1\Temp\\NBI30104.tmp\_jvm/lib/zi/Etc/GMT+8              [2012-11-27 22:04:34.757]> ... process is timeouted
[2012-11-27 22:04:34.897]> ... terminate process
[2012-11-27 22:04:34.944]> ... could not extract JVM : timeout
[2012-11-27 22:04:35.007]> ... error occured during JVM extraction
[2012-11-27 22:04:35.022]> ... no java was found
[2012-11-27 22:41:01.059]> No compatible jvm was found on the system
[2012-11-27 22:41:01.090]> ... deleting temporary directory 
[2012-11-27 22:41:02.090]> ... EXIT status : 1009
[2012-11-27 22:41:02.122]> ... EXIT code : 1006
[2012-11-27 22:41:02.168]> Closing launcher properties 
````  `有人可以帮我解决这个问题吗？

谢谢

阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:54:46.377

也许您的 XP 机器上有不同版本的 Java。``

# c# - Silverlight 中的导航在框架内没有变化

> ID：13598287
> 
> 赞同：0
> 
> 时间：2012-11-28T05:14:51.980
> 
> 标签：c#, silverlight, silverlight-5.0

我是银光新手。我在我的应用程序中使用导航。主页面包含登录页面。验证后我必须导航到主页。导航工作正常，但主页也与主页一起显示在表单中。

```
 ContentFrame.Navigate(new Uri("/Home.xaml", UriKind.Relative));

<Navigation:Frame Name="ContentFrame" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,55,12,12" BorderThickness="1" BorderBrush="Black" Grid.Column="1" Grid.ColumnSpan="3" Grid.RowSpan="5">

        </Navigation:Frame> 
```

两个页面都重叠并显示在浏览器中。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:35:59.210

在没有看到你所有的代码的情况下，我只能猜测，但似乎你的页面布局是这样的：

```
<!-- Login stuff here -->
<!-- ... -->

<Navigation:Frame Name="ContentFrame">

</Navigation:Frame> 
```

而您应该在 中拥有登录内容`Navigation:Frame`，以便在`Home.xaml`加载时被“覆盖”：

```
<Navigation:Frame Name="ContentFrame">
    <Navigation:Frame.Content>
        <Grid>
            <!-- Login stuff here -->
        </Grid>
    </Navigation:Frame.Content>
</Navigation:Frame> 
```

# java - 在java中使用Vector安全吗？

> ID：13598288
> 
> 赞同：3
> 
> 时间：2012-11-28T05:14:52.747
> 
> 标签：java, java-me, vector

我写了以下java代码：

```
public static void main(String[] args) {
    Vector vector = new Vector();
    for(int i=1; i<=10; i++)
        vector.addElement(i);

    Enumeration vEnum = vector.elements();
    while(vEnum.hasMoreElements())
        System.out.println(vEnum.nextElement());
} 
```

编译时收到以下警告消息：

```
Note: TestJavaApplication.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

和 Netbeans 抱怨“过时的集合”的消息。

在这种情况下，您有什么建议？

**请注意**，我需要在 J2ME 应用程序中使用 Vector 作为存储元素顺序的动态数组。我会很高兴使用 Hashtable 但不幸的是它不存储其元素的顺序。

**编辑 1** 在查看[此答案](https://stackoverflow.com/questions/197986/what-causes-javac-to-issue-the-uses-unchecked-or-unsafe-operations-warning)后，我将声明从更改`Vector vector = new Vector();`为`Vector<String> vector = new Vector<String>();`. 现在收到另一条警告消息：

```
TestJavaApplication.java:2: warning: com.sun.org.apache.xerces.internal.parsers.IntegratedParserConfiguration is Sun proprietary API and may be removed in a future release
import com.sun.org.apache.xerces.internal.parsers.IntegratedParserConfiguration;
                                                 ^ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T05:21:58.967

您看到的有关“未经检查或不安全的操作”的警告是因为`Vector`是参数化类型。它实际上是`Vector<E>`，并且您应该在使用时提供类型参数`Vector`。如果您使用“原始” `Vector`，那么您将无法获得 Java 泛型框架的任何优势。“不安全”警告意味着您错过了某种类型的安全性。

存在“过时类型”警告是因为`Vector`（基本上）已弃用，而支持`List`其实现（`ArrayList`以及 和`LinkedList`等）。

各种类型`List`是`Vector`. `ArrayList`可以用作或多或少的替代替代品`Vector`，但您应该注意一些差异。阅读 javadocs 以获取更多信息。

最重要的区别是它`Vector`是线程安全的，但`ArrayList`不是`LinkedList`。如果您依赖`Vector`s 内置的线程安全性，那么您应该看一下该`Collections.synchronizedList`方法。

编辑：哦，你正在使用 JavaME。在这种情况下，您可能会陷入困境`Vector`。尽管如此，通用类型警告仍然适用。

如果您愿意，可以忽略这些警告。他们在那里告诉你，如果你不小心，可能会有问题，但如果你**小心**，那么你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:23:28.367

不安全警告与 Vector 无关。只是代码没有指定 Vector 应该包含的内容。通常，您希望使用 ArrayLists 而不是 Vectors，并且您可能还希望指定将进入容器的类型。

Enumeration 接口也已过时。您应该更喜欢迭代器。事实上，有一些语言特性可以利用它们。例如“新” for 循环。

注意：我假设 J2ME 支持这些特性。如果没有，那么“旧方法”就没有错。它们只是不是最佳的。

例如（不适用于 J2ME，但适用于 Java 5 或更高版本）

```
public static void main(String[] args) {
    ArrayList<Integer> vector = new ArrayList<Integer>();
    for(int i=1; i<=10; i++)
        vector.addElement(i);

    for(Integer i : vector)
        System.out.println(i);
} 
```

根据 gnat 的评论，上面的代码在 J2ME 中不起作用，它是 1.3 的子集。显然，甚至不支持 ArrayList。因此，问题示例中的原始代码看起来像是要走的路。

# eclipse - 执行命令 'sudo apachectl start' 时 SVN 不起作用

> ID：13598290
> 
> 赞同：2
> 
> 时间：2012-11-28T05:15:05.020
> 
> 标签：eclipse, svn

我在 Eclipse 中使用**svn**，当我执行命令时`sudo apachectl start`，SVN 不起作用。

错误：

```
Location information has been specified incorrectly.

svn: E175002: connection refused by the server
svn: E175002: OPTIONS request failed on 'svn/SAI'

keep location anyway? 
```

我使用 Mac OS X Mountain Lion、Eclipse Helios 和 SVN 的连接器是`SVNKit 1.7.6`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:26:00.807

您的 apache 服务器和 SVN 都使用相同的端口。这就是为什么一旦启动 apache 就无法连接到 SVN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:33:25.317

我删除了 Subversion e 安装了 Subclipse。现在的错误是：

验证位置时出错：“org.apache.subversion.javahl.ClientException：RA 层请求失败。

# python-3.1 - 嗨，我是 python 新手，我想知道如何根据另一个列表的索引向列表添加值

> ID：13598292
> 
> 赞同：1
> 
> 时间：2012-11-28T05:15:10.267
> 
> 标签：python-3.1

> > > 新列表 =[0,0,0,0]
> > > 
> > > for x_list in random_list: # list of list
> > > 
> > > 对于 x_list 中的 x：
> > > 
> > > 如果 x == "I" 或 "i"：
> > > 
> > > list_index = x_list.index(x)
> > > 
> > > 新列表[列表索引] += 1

假设 random_list 是 [['x','x','I','I'],['x','x','I','x']]

它应该输出 [0,0,2,1]，但它没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:29:49.687

您可能正在寻找内置的`enumerate`，它允许您同时迭代对象和索引。你的内循环可能是

```
for list_index, x in enumerate(x_list):
    if x == "I" or "i":
        new_list[list_index] += 1 
```

它应该做你想做的

*附言*

还有一个问题：`if x == "I" or "i":`实际上应该是`if x == "I" or x == "i":`

# drupal - Drupal 7 菜单错误

> ID：13598295
> 
> 赞同：1
> 
> 时间：2012-11-28T05:15:23.943
> 
> 标签：drupal, menu, drupal-7, hook-menu

我为 Drupal 7 编写自定义模块并收到以下警告：
`Warning: Invalid argument supplied for foreach() в функции menu_unserialize() (строка 400 в файле /var/www/auth/includes/menu.inc).`

我的 hook_menu 在这里：

```
 ``function mnogomirauth2_menu() {
    $menu['tables/udkservers'] = array(
        'title' => 'udkserversTable', 
        'page callback' => '_menu_test', 
        'access arguments' => TRUE, 
        'type' => MENU_NORMAL_ITEM
    );

    return $menu;
}

function _menu_test()
{
    echo "test";
}``  请告诉我，这段代码有什么问题？

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2012-11-28T05:23:38.037

根据 Drupal API for [hook_menu](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu/7)

> **“访问参数”**：要传递给访问回调函数的参数数组，具有如上所述的路径组件替换。如果访问回调被继承（见上文），访问参数将随之继承，除非在子菜单项中被覆盖。

您似乎`TRUE`为`access arguments`.

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2014-02-11T08:20:23.613

**下面提到的代码将解决它：**

前：

```
'access arguments' => TRUE, 
```

后：

```
'access arguments' => array('Your Permission'), //array(TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2012-11-28T12:55:20.187

有效的代码如下。

```
function mnogomirauth2_menu() {
  $menu['tables/udkservers'] = array(
    'title' => 'udkserversTable', 
    'page callback' => '_menu_test', 
    'access callback' => TRUE, 
    'type' => MENU_NORMAL_ITEM
  );

  return $menu;
} 
```

可以是数字的访问回调。如果计算结果为`TRUE`，则每个用户都可以访问菜单项；它评估为`FALSE`，没有用户可以访问菜单项。

### 参考

*   [hook_menu()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)的文档 
```

# jquery - 图像中的颜色框水印

> ID：13598296
> 
> 赞同：0
> 
> 时间：2012-11-28T05:15:31.483
> 
> 标签：jquery, css, colorbox

所以我一直在寻找如何在图像中添加带有颜色框的水印，我在谷歌的第一个结果中发现了一个较旧的颜色框组和下一个答案：

> 杰克摩尔
> 
> 2009 年 10 月 3 日
> 
> 好的，这应该很容易做到。我使用 'cbox_complete' 事件添加了一些 HTML，但您可以轻松地将相同的代码放置为 colorbox 的回调而不使用该事件。这是JS：

```
$().bind('cbox_complete', function(){
     $('#cboxLoadedContent').append("<div id='protect' />");
}); 
```

> 在我的样式表中，我为“受保护”添加了以下样式：

```
#protect{background:url(transparent.gif) 0 0 repeat; width:100%; height:100%; position:absolute; top:0; left:0;} 
```

但是该解决方案将水印加载到所有 cbox，因为 .bind('cbox_complete') 它是一个全局变量，所以我做了一些修复以仅使用我想要的特定窗口或链接：

```
$(document).ready(function(){
    $(".gallery").colorbox({
        width:"800",
        onComplete:function(){ $('#cboxLoadedContent').append("<div id='protect'></div>"); }
    });
}); 
```

现在它的工作，希望这对任何人都有帮助，因为我没有在其他网站上找到它，但它在其中一个示例中是如何...

现在我的问题，当加载图像时，水印出现在左上角......我想要它在右下角。

我已经尝试改变

```
brackground-position: right bottom;
bottom:0px;
right:0px; 
```

有和没有

```
postition: absolute; 
```

我可以让它工作，知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:00:37.713

如果它在这里满足您的需要，我会创建小提琴[http://jsfiddle.net/aanred/DSXHt/](http://jsfiddle.net/aanred/DSXHt/)。#protect 的 CSS 样式如下所示：

```
#protect {
    background:url(watermark.gif) bottom right no-repeat; 
    width:100%; 
    height:100%; 
    position:absolute; 
    top:0;
    left:0;
}​ 
```

ps：如果背景无法加载，只需将其更改为任何其他图像，因为我只将其设置为我在网上找到的图像。

# python - 使用过滤器和映射查找目录中扩展名为 .txt 和 .py 的所有文件

> ID：13598297
> 
> 赞同：1
> 
> 时间：2012-11-28T05:15:47.133
> 
> 标签：python, map, filter, tuples

如何使用 filter 和 map 函数在以 Python结尾`.txt`或以 Python 结尾的目录中查找文件？`.py`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:20:52.893

`os.listdir`将为您提供文件列表。然后你只需要编写一个函数，`True`当文件名以 or 结尾时`.py`返回`.txt`：

```
filter(lambda x: x.endswith(('.txt','.py')), os.listdir(os.curdir)) 
```

...我真的不知道如何`map`融入其中...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T05:50:50.250

您还可以尝试列表推导，例如

```
[x for x in os.listdir(os.curdir) if os.path.splitext(x)[1] in ('.txt', '.py')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T06:55:50.343

这里有两种方法：

纯函数式方法：

```
from operator import methodcaller
filter(methodcaller('endswith', ('.txt', '.py')), os.listdir('.')) 
```

列表理解方法：

```
[fn for fn in os.listdir('.') if fn.endswith(('.txt', '.py'))] 
```

希望这可以帮助 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:00:40.003

您可以使用 glob 模块来获取这些文件

```
>>> import glob    
>>> glob.glob('*.py')
['test.py', 'a.py', 'b.py'] 
```

# iphone - 无法在滚动视图中看到图像

> ID：13598299
> 
> 赞同：1
> 
> 时间：2012-11-28T05:15:51.043
> 
> 标签：iphone, objective-c, uiscrollview, uiimageview

我有 2`scrollviews`和 1 `imageview`。

现在在 Main 里面`scrollview`我有另一个`scrollview`，在这个里面`scrollview`我有图像。

所以，我的主`Scrollview`命名为“ `ScrollView`”，子`scrollview`命名为“ `scrView`”

现在我可以在`scrView`里面添加“ `ScrollView`”但是我看不到里面的图片“ `scrView`”

我的编码如下：

```
int numberOfPages = 10;
    [scrollView setPagingEnabled:YES];
    [scrollView setContentSize:CGSizeMake(scrollView.bounds.size.width * numberOfPages, scrollView.bounds.size.height)];

    CGRect pageFrame;
    CGRect imageFrame;
    UIImageView *imageView;

    for(int i=0; i < numberOfPages; i++)
    {
        pageFrame = CGRectMake(i * scrollView.bounds.size.width+50, 0.0f, scrollView.bounds.size.width-100, scrollView.bounds.size.height);
        UIScrollView *scrView = [[UIScrollView alloc] init];
        imageFrame = CGRectMake(i * scrView.bounds.size.width, 0.0f, scrView.bounds.size.width, scrView.bounds.size.height);
        imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.jpg"]];
                    [scrView setFrame:pageFrame];
        [imageView setFrame:imageFrame];
        [scrView setBackgroundColor:[UIColor redColor]];

        [scrollView addSubview:scrView];
        [scrView addSubview:imageView];

        [imageView release];
    } 
```

如果您查看我添加的代码`imageView`，`subView`但`scrView`我无法在模拟器中看到图像。

问题是什么？

和我分享你的想法。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:41:19.453

这是工作尝试这段代码。**问题出在您的 imageview 框架上**

```
int numberOfPages = 10;
[scrollView setPagingEnabled:YES];
[scrollView setContentSize:CGSizeMake(scrollView.bounds.size.width * numberOfPages, scrollView.bounds.size.height)];

CGRect pageFrame;
CGRect imageFrame;
UIImageView *imageView;

for(int i=0; i < numberOfPages; i++)
{
    pageFrame = CGRectMake(i * scrollView.bounds.size.width+50, 0.0f, scrollView.bounds.size.width-100, scrollView.bounds.size.height);
    UIScrollView *scrView = [[UIScrollView alloc] initWithFrame:pageFrame];
    imageFrame = CGRectMake(0.0, 0.0f, scrView.bounds.size.width, scrView.bounds.size.height);

    imageView = [[UIImageView alloc] initWithFrame:imageFrame];
    imageView.image=[UIImage imageNamed:@"image1.jpg"];

   // [scrView setFrame:pageFrame];

    [scrView setBackgroundColor:[UIColor redColor]];
    [scrView addSubview:imageView];
    [scrollView addSubview:scrView];

    [imageView release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:22:26.147

**也为您的imageView**设置**背景**颜色。然后**记录**并检查 scrView 和 imageFrame**帧**。也使用属性。********`bringSubviewToFront:`********

 ****```
for(int i=0; i < numberOfPages; i++)
    {
        UIScrollView *scrView = [[UIScrollView alloc] init];
        [scrView setBackgroundColor:[UIColor redColor]]; 
        pageFrame = CGRectMake(i * scrollView.bounds.size.width+50, 0.0f, scrollView.bounds.size.width-100, scrollView.bounds.size.height);

        imageFrame = CGRectMake(i * scrView.bounds.size.width, 0.0f, scrView.bounds.size.width, scrView.bounds.size.height);
        imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.jpg"]];
                    [scrView setFrame:pageFrame];
        [imageView setFrame:imageFrame];
        [imageView setBackgroundColor:[UIColor blueColor]]
        [scrView addSubview:imageView];
        [scrView bringSubviewToFront:imageView];
        [imageView release];

        [scrollView addSubview:scrView];
        [scrollView bringSubviewToFront:scrView];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:31:34.677

试着从你的代码伙伴那里设置这样的..

```
[scrView setBackgroundColor:[UIColor clearColor]];
[scrView addSubview:imageView]; /// first add imageview and then scrview (screen view) to scrollview
[scrollView addSubview:scrView]; 
```****

# c++ - MS 并发运行时的限制是什么？

> ID：13598306
> 
> 赞同：3
> 
> 时间：2012-11-28T05:16:46.917
> 
> 标签：c++, visual-studio, concurrency, concurrency-runtime

我`task_group`在 Visual Studio 2010 中使用简单的并发运行时来运行单个工作线程以将工作与 GUI 线程分开。

然而，我的一位同事告诉我，我使用 CR 是错误的：它是为并行处理具有小上下文的轻量级任务而设计的，而不是用于从 GUI 中分离庞大且依赖 I/O 的线程。他说他从文档中获取了这个，但没有提供任何具体的链接。

那么，**微软并发运行时的限制是什么，以及解决哪些问题我不应该使用它**？

当然 CR 不是可移植的，但让我们把它排除在外：我说的是情况，当你的代码编译时，你仍然会遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T21:12:23.520

并发运行时是一个协作调度基础设施。如果您不打算利用协作调度，那么您最好在需要时创建线程，并让操作系统负责调度。

如果您*使用*协作调度，那么等待 IO 操作完成确实没有意义，因为您阻塞了一个线程，该线程本来可以用于运行其他任务，而这些任务不依赖于该 IO 操作来完成。如果其他任务依赖于 IO 任务来完成，您可以简单地让它们继续，ConcRT 调度程序将确保在时间到来时运行它们。

所以这里真的不是关于限制。这只是关于了解您要实现的目标，并为工作选择正确的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T05:41:44.840

正如 Yam 所说，并发运行时不提供并行执行保证，它只是提供了一种潜在的可能性，这就是任务和线程概念之间的区别。如果您的任务正确（不要太细化而不能花太多时间在任务之间切换，也不要太粗糙以至于总是为所有内核做一些工作——在你的情况下——只有一个），那么开销不会很大，并且您的程序将准备好在多核或多处理器平台上运行，正如 MSFT 人所说的“面向未来”。

# php - 单选按钮被选中 PHP

> ID：13598308
> 
> 赞同：0
> 
> 时间：2012-11-28T05:17:10.690
> 
> 标签：php, radio-button

为什么这不起作用或者我只是愚蠢？它不打印任何东西，单击按钮后页面看起来完全一样（我的`<form>`实际代码中有所有内容）

```
<html>

<input type="radio" name = "gender" value = "male">
<input type="radio" name = "gender" value = "female">

<input type="radio" name = "race" value = "asian">    

<?php
if(isset($_POST["Button"]))
{

if(($_POST["gender"] == "male") && ($_POST["race"] == "asian"))
{
 echo "you are male and asian";
}

}
?>

</html> 
```

与之相关的整个代码区域如下所示：

```
<html>
<center>
<body>

<form method=post action= "">
<br>
<br>
Name: <input type="text" name="username">
<br>
<br>
<br>

I am:

<br>
<br>
<input type="radio" name = "gender" value = "male"> Male &nbsp; &nbsp;

<input type="radio" name = "gender" value = "female"> Female
<br>
<br>
</form>

<form method=post action= "">

Ethnicity:

<br>
<br>
<input type="radio" name = "race" value = "asian">Asian
<br>
<br>
<input type="radio" name = "race" value = "black">Black
<br>
<br>
<input type="radio" name = "race" value = "white">White
<br>
<br>
<br>
<input type="submit" name="Button" value = "Who will I marry?">

</form>

<?php

if(isset($_POST["Button"]))
{

if(($_POST["gender"] == "male") && ($_POST["race"] == "asian"))
{

?>
congrats!
<?
}
}

?>

</center>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:30:32.667

您有两个不同的表单标签，而不是一个包含所有字段的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:30:08.870

您正在使用两种不同的表单并引用不同的表单元素。像这个编辑一样使用单一表格。并使用`method="post"`而不是`method=post`

```
<form method="post" action= "">

Name: <input type="text" name="username">

I am:

<input type="radio" name = "gender" value = "male"> Male &nbsp; &nbsp;

<input type="radio" name = "gender" value = "female"> Female

 Ethnicity:

<input type="radio" name = "race" value = "asian">Asian
<br>
<br>
<input type="radio" name = "race" value = "black">Black
<br>
<br>
<input type="radio" name = "race" value = "white">White
<br>
<br>
<br>
<input type="submit" name="Button" value = "Who will I marry?">

</form> 
```

# css - CSS下拉菜单将子菜单项向右移动但仅在ie中

> ID：13598313
> 
> 赞同：2
> 
> 时间：2012-11-28T05:17:29.483
> 
> 标签：css, internet-explorer, drop-down-menu

我正在使用一些我为下拉菜单找到的代码。它在 Firefox 和 Chrome 中完美运行，但在 IE 中不适用。在 IE 中，子菜单项向右移动，而不是直接出现在主菜单项下方。（以我的代码为例，当我悬停时，“Level 2.1”、“Level 2.2”等不在“Two Levels”的正下方。它们向右移动。

我一直在尝试解决此问题 2 天。我对编码不是很好，所以即使我已经为解决方案做了很多研究，我也不明白，也不能完全正确。我希望有人可以帮助我，否则我将放弃。

我想保留文档类型和元标记。

**我的文档类型是：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

**我有元标记：**

```
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/> 
```

**这是CSS：**

```
#nav {
 float: left;
 font: bold 12px Arial, Helvetica, Sans-serif;
 border: 1px solid #121314;
 border-top: 1px solid #2b2e30;
 overflow: hidden;
 width: 100%;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
 background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
}

#nav ul {
 margin: 0;
 padding: 0;
 list-style: none;
}

#nav ul li {
 float: left;
}

#nav ul li a {
 float: left;
 color: #d4d4d4;
 padding: 10px 20px;
 text-decoration: none;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
 background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
 border-left: 1px solid rgba(255, 255, 255, 0.05);
 border-right: 1px solid rgba(0,0,0,0.2);
 text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.6);
}
/* Drop Down Menu By helperblogger.com */
#nav ul li a:hover,
#nav ul li:hover > a {
 color: #252525;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
 background: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 background: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2), 0 -1px #000;
}

#nav li ul a:hover,
#nav ul li li:hover > a {
 color: #2c2c2c;
 background: #5C9ACD;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.17, rgb(61,111,177)), color-stop(0.51, rgb(80,136,199)), color-stop(1, rgb(92,154,205)) );
 background: -moz-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
 background: -o-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
 border-bottom: 1px solid rgba(0,0,0,0.6);
 border-top: 1px solid #7BAED9;
 text-shadow: 0 1px rgba(255, 255, 255, 0.3);
}
/* Drop Down Menu By helperblogger.com */
#nav li ul {
 background: #3C4042;
 background-image: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
 background-image: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 background-image: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 left: -999em;
 margin: 35px 0 0;
 position: absolute;
 width: 160px;
 z-index: 9999;
 box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -moz-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -webkit-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 border: 1px solid rgba(0, 0, 0, 0.5);
}

#nav li:hover ul {
 left: auto;
}

#nav li ul a {
 background: none;
 border: 0 none;
 margin-right: 0;
 width: 120px;
 box-shadow: none;
 -moz-box-shadow: none;
 -webkit-box-shadow: none;
 border-bottom: 1px solid transparent;
 border-top: 1px solid transparent;
}

.nav ul li ul {
    position: absolute;
    left: 0;
    display: none;
    visibility: hidden;
}

.nav ul li ul li {
    display: list-item;
    float: none;
}

.nav ul li ul li ul {
    top: 0;
}

.nav ul li ul li a {
    font: normal 13px Verdana;
    width: 160px;
    padding: 5px;
    margin: 0;
    border-top-width: 0;
    border-bottom: 1px solid gray;
}

#nav li li ul {
 margin: -1px 0 0 160px;
 visibility: hidden;
}

#nav li li:hover ul {
 visibility: visible;
} 
```

**这是html：**

```
<div id="nav">
 <ul>
  <li><a href="#">Home</a></li>
  <li><a href="#">About Us</a></li>
  <li><a href="#">Our Portfolio</a></li>
  <li><a href="#">One Dropdown</a></li>
  <li><a href="#">Two Levels</a>
  <ul>
   <li><a href="#">Level 2.1</a></li>
   <li><a href="#">Level 2.2</a></li>
   <li><a href="#">Level 2.3</a></li>
   <li><a href="#">Level 2.4</a></li>
   <li><a href="#">Level 2.5</a></li>
  </ul>
  </li>
  <li><a href="#">Services</a></li>
  <li><a href="#">Contact Us</a></li>
 </ul>
</div> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:00:20.343

在您的 CSS 中进行以下更改

```
#nav {
 float: left;
 font: bold 12px Arial, Helvetica, Sans-serif;
 border: 1px solid #121314;
 border-top: 1px solid #2b2e30;
 overflow: hidden;
 width: 100%;
 background: #3C4042;
 background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
 background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
 box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
*height:34px; //IE7 Hack
}

#nav li ul {
 background: #3C4042;
 background-image: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
 background-image: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 background-image: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
 left: -999em;
 margin: 35px 0 0;
 position: absolute;
*position:relative;//DD menu will start after </a> IE7
 width: 160px;
 z-index: 9999;
 box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -moz-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 -webkit-box-shadow: 0 0 15px rgba(0, 0, 0, 0.4) inset;
 border: 1px solid rgba(0, 0, 0, 0.5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:05:20.180

简单的修复：

```
#nav ul li {
  position: relative;
  float: left;
}
#nav li:hover ul {
  left: 0;
} 
```

演示：http: [//jsfiddle.net/faywk/2/](http://jsfiddle.net/faywk/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:42:02.637

好吧，在花了 5 天的时间，没有让它工作，以及数小时的研究之后，我终于找到了一个很棒的教程，解释了如何创建一个 css 下拉菜单，它适用于所有浏览器，包括 IE 7,8 , 和 9\. 所以我使用了该代码并对其进行了修改以适合我的喜好。

感谢@Prasad 和@Xiaoyi 的帮助。

如果这可能对其他人有帮助（可能只有像我这样的初学者）这里是链接。有一个包含 z-index 的小修复，因此如果您的菜单下拉菜单被其他元素覆盖，请确保您通读所有评论。我永远不会希望任何人经历我所经历的。 [http://designmodo.com/css3-dropdown-menu/](http://designmodo.com/css3-dropdown-menu/)

# url - “/”应用程序中的服务器错误。vb.net 中的错误

> ID：13598315
> 
> 赞同：0
> 
> 时间：2012-11-28T05:17:39.173
> 
> 标签：url, web-config, vb.net-2010

托管后，当我运行应用程序时，出现上述错误。但该应用程序在本地机器上运行没有任何错误。

```
web config file

<?xml version="1.0"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=169433
-->
<configuration>
<connectionStrings>
    <add name="testConnectionString" connectionString="server=10.103.1.166;User Id=root;database=test;password=test123" providerName="MySql.Data.MySqlClient"/>
<!--<add name="testConnectionString" connectionString="server=10.103.200.138;User Id=root;database=test;password=test123" providerName="MySql.Data.MySqlClient"/>-->
    <!--'LDAP://servername/ou=ouname,dc=domain,dc=com-->
    <add name="ADConnection" connectionString="LDAP://sunbs.in:389/ou=sunbs,DC=sunbs,DC=in"/>
    <!--<add name="TestDomain1ConnectionString" connectionString="LDAP://testdomain1.test.com/CN=Users,DC=testdomain1,DC=test,DC=com" />-->
</connectionStrings>
<system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0">
        <assemblies>
            <add assembly="MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"/>
            <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.DirectoryServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.DirectoryServices.AccountManagement, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation>
    <!--<membership >
  <providers >
    <add name="NetForgeMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnection" connectionUsername="sbsldap" connectionPassword="sbs@123" />
  </providers>
</membership>-->
    <membership defaultProvider="MyADMembershipProvider">
        <providers>
            <add name="MyADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider,         System.Web, Version=2.0.0.0, Culture=neutral,         PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ADConnection" attributeMapUsername="sAMAccountName"/>
        </providers>
    </membership>

<customErrors  mode="Off "></customErrors>
<!--<customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>-->

 </system.web>
</configuration> 
```

我该如何纠正错误？

```
error description

Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 
```

# google-app-engine - Google App Engine 路由和路径

> ID：13598317
> 
> 赞同：2
> 
> 时间：2012-11-28T05:18:04.553
> 
> 标签：google-app-engine

我正在寻找在 GAE/python 中构建文件树的最佳实践。

将所有内容保存在一个文件中并通过 WSGI 将所有内容路由到那里似乎相当有效。

尽管对于一个复杂且多方面的网站来说，拥有不同的文件服务于不同的目的是有意义的。

当我在 app.yaml 中列出了许多 url 时，我遇到了一些奇怪的并发症

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /unit3.*
  script: unit3.app

- url: /birthday.*
  script: birthday.app

- url: /signup.*
  script: signup.app

- url: /rot13.*
  script: rot13.app

- url: /welcome.*
  script: signup.app

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"

- name: jinja2
  version: latest 
```

然后不得不在单独的 .py 文件中复制这些路径

```
app = webapp2.WSGIApplication([('/signup',SignUpHandler),
                               ('/welcome',WelcomeHandler),
                               ('/signup/.*', NotFoundPageHandler)]
                               ,debug=True) 
```

我认为必须两次或更多次详细说明 url 的路由很麻烦，这很奇怪吗？有没有办法拥有不同的文件（html、css、py、js），然后让 app.yaml 将所有点与路由连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:52:06.447

最好的方法是使用 webapp2 框架，那里的路由非常简单。然后，您可以定义 urls.py 并在那里添加路由。 [http://webapp-improved.appspot.com/](http://webapp-improved.appspot.com/) webapp 中的路由。 [http://webapp-improved.appspot.com/api/webapp2.html#uri-routing](http://webapp-improved.appspot.com/api/webapp2.html#uri-routing)

这是样板代码，可帮助您入门。 [https://github.com/coto/gae-boilerplate](https://github.com/coto/gae-boilerplate)

# javascript - 关于 AppJS/Tidesdk 的问题

> ID：13598319
> 
> 赞同：8
> 
> 时间：2012-11-28T05:18:09.843
> 
> 标签：javascript, node.js, tidesdk, appjs

所以不确定这是否是问这些问题的正确地方，但我知道我可能会得到一些答案。

我正在进入 Meteor，现在想做一些桌面应用程序。我打算只做一个原生的 Mac 应用程序。但后来我发现了应用程序 wunderlist 及其使用潮汐dk 的开源。

无论如何，我希望得到一些关于这些框架的一般反馈（优点/缺点等）。我对他们的工作并没有真正的概念性理解。（或者两者之间的主要区别是什么）。

我注意到您可以在其中进行路由。这到底是如何工作的？因为没有 URL 或客户端/服务器端。

我想知道的另一件事是是否可以以类似的方式在桌面上使用 MeteorJS？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T01:38:06.163

使用 TideSDK 非常简单。我们正在努力为开发人员提供出色的体验。您实际上只是在一个特殊的 Resources 文件夹中创建一个 HTML5 应用程序。在大多数情况下，您可以将 HTML5 应用程序直接放入 Resources 文件夹，使用 TideSDK 的配置指向 index.html 并在几分钟内运行它。TideSDK 可用于运行客户端、服务器、进程和工作者。我倾向于使用诸如骨干网之类的框架，其中路由被烘焙到单页应用程序中。

TideSDK 的核心是 WebKit，它是支持 Safari 和 Chrome 网络浏览器的核心技术。我们在 TideSDK 中使用了 WebKit 的三个不同端口，一个用于访问每个平台（Windows、Mac、Linux）。在 OSX 上，我们也可以使用原生的 WebKit。TideSDK 的 API 提供原生 UI 功能（我们会随着时间的推移进行增强）。其中包括本机窗口、系统托盘、菜单和对话框。您还可以与剪贴板进行交互。我们拥有网络和数据库功能、系统通知等。我们修补 Webkit 以允许在脚本标签中解释 DOM 中的 python、php 或 ruby​​，并能够在语言之间桥接对象。我们的 API 确实允许您访问系统的资源，包括与其文件系统进行交互。

在 TideSDK 中运行流星会很有趣。目前可以使用适当的启动过程在 TideSDK 中运行 node.js，因此我看不到运行流星的问题，因此它可以在应用程序中运行客户端和服务器。

如果您需要您的应用程序到达 Apple 的 AppStore，TideSDK 是我所知道的唯一具有这种潜力的框架。竞争性框架使用非 Mac 原生的 WebKit 端口，例如 Chrome 端口 (appjs) 或 QT 端口 (Sencha Ion)。Apple 对基于这些端口的应用程序的扫描将揭示“私有 API”的使用。因此，您将无法使用基于这些的应用程序进入 AppStore 市场。TideSDK 不同，它可以使用 OSX 上的原生 WebKit 实现。有关此功能的更多信息将在即将发布的 TideSDK-1.4.0 版本中披露。我们升级后的 WebKit 还将使 HTML5 功能与 WebKit 的主干保持同步。我们的许多用户都在等待这个重要的更新。

随着 WebKit 作为 AppStore 的障碍被消除，开发人员面临的最后一个问题是 Apple 的沙盒和系统资源的权利。我们正在寻找可能的解决方案来帮助开发人员满足沙盒需求。有些应用程序适合沙盒，有些则不适合。也就是说，如果您的目标是 AppStore 合规性，您将需要遵守 Apple 的限制。我希望这有帮助。

# asp.net - 无法访问 IIS 元数据库

> ID：13598321
> 
> 赞同：13
> 
> 时间：2012-11-28T05:18:43.077
> 
> 标签：asp.net, visual-studio, visual-studio-2008, iis

一个 ASP.NET Web 项目加载了解决方案，但我收到此错误

> Web 应用程序项目配置为使用 IIS。无法访问 IIS 元数据库。您没有足够的权限访问您机器上的 IIS 网站。

如何解决？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-06T16:41:38.883

这可能与注册 ASP/IIS 无关。原因正是错误消息所说的：Visual Studio devenv.exe 没有以足够的权限运行来访问 IIS 进程，如果您的解决方案包含一个 Web 项目，其 Web 设置说使用 IIS 而不是VS 开发服务器。

您的问题有两种解决方案：

1.  以管理员身份运行 VS 并重新打开解决方案/项目。
2.  使用文本编辑器编辑 Web 应用程序的项目文件，并将这一行从 True 更改为 False：

    ```
     <UseIIS>True</UseIIS> 
    ```

这将阻止它使用 IIS 并要求更高的权限。

我相信 VS 要求管理员权限的原因是，如果它不存在，它会尝试根据需要为您创建 IIS 网站。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-28T20:11:03.697

可以在这里找到对我有用的答案：

[https://stackoverflow.com/a/17460774/3005965](https://stackoverflow.com/a/17460774/3005965)

基本上，转到 %systemroot%/inetsrv/config。当出现提示说您需要管理员权限时，单击继续。

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T05:37:58.507

只需尝试以管理员身份访问 Visual Studio 右键单击​​并选择以管理员身份运行。可能会解决这个问题。并查看此[链接](http://bloggingabout.net/blogs/rick/archive/2012/10/04/unable-to-access-the-iis-metabase.aspx)以获取有关创建快捷方式的说明。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-18T12:52:14.883

当我将项目复制到新项目时遇到了这个问题。我打开了项目文件 (.csproj) 并从 IISUrl 元素中删除了值：

从：`<IISUrl>http://localhost:21222</IISUrl>`

至：`<IISUrl></IISUrl>`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T05:47:18.790

您是否在 IIS 中注册了 .NET 框架？您需要运行在以管理员身份运行中`aspnet_regiis.exe`找到的实用程序`%WindowsDir%\Microsoft.NET\Framework\vx.y.zzzz\.` ，如下所示：

```
aspnet_regiis.exe -i 
```

`-i`：安装与 IIS 元数据库根及以下的脚本映射相关联的 ASP.NET 版本`Aspnet_regiis.exe`并更新脚本映射。仅更新使用早期版本 ASP.NET 的应用程序的脚本映射。使用更高版本的应用程序不受影响。

[在此处](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.80%29.aspx)了解有关实用程序的更多信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-26T14:19:36.497

如果您修改了 Machine.config 并添加了一些“无效行”，也会发生此错误：例如，我在配置部分（IIS 不喜欢）添加了一些 appSettings。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-13T22:16:43.667

只需在本地 IIS 中注册您的 Web 项目。您将在 *.csproj 文件中找到所有设置。这对我行得通。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-25T05:20:08.397

步骤 1：关闭 Visual Studio

第 2 步：转到项目文件夹并找到“.vs”文件夹注意：它可能被隐藏

第 3 步：删除“.vs”文件夹

第 4 步：再次打开项目

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-16T04:24:55.573

首先取消选中打开或关闭 Windows 功能中的 Internet 信息服务。然后从系统中卸载 iis 并重新启动它。重新启动后再次安装iis`https://www.microsoft.com/en-us/download/confirmation.aspx?id=34679`并尝试再次打开。

# android - 我如何在 jdk.7.o 中获取 MD5 哈希？

> ID：13598324
> 
> 赞同：1
> 
> 时间：2012-11-28T05:18:55.593
> 
> 标签：android, google-maps

当我尝试通过使用获取 MD5 哈希时

C:\Program Files\Java\jre7\bin>keytool -list -alias androiddebugkey -keystore "C:\Users\learnwhat.android\debug.keystore" -storepass android -keypass android

只获得 SHA1 哈希，我需要 MD5 哈希才能在 goole Map api 密钥中使用。我如何在 jdk1.7.0_09 中获取 MD5 哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:20:38.013

`-v`如果您使用 jre7 获取 Google Map 的 MD5 哈希，请添加命令。此命令返回 MD5 和 SHA1 ：

```
 C:\<YOUR_JDK_PATH\bin>keytool -v androiddebugkey -keystore "C:Users\YOUR_NAME\.android
\debug.keystore" -alias alias_name -storepass android -keypass android 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:22:00.623

使用以下命令：

`keytool -v -list -alias androiddebugkey -keystore debug.keystore`

-v 将强制 keytool 生成 md5、sha1、sha256

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:22:53.210

```
C:\Program Files\Java\jdk1.7.0_04\bin>keytool.exe -V -list -alias androiddebugkey -keystore "C:\Documents and Settings\IBM\.android\debug.keystore" -storepass android -keypass android 
```

考虑第一个路径中的 jdk-bin 路径和第二个路径中的主用户目录。对于 Windows 7，它类似于 C:\Users\username.android\debug.keystore

使用上述命令，您将获得所有密钥。

```
https://developers.google.com/android/maps-api-signup 
```

[http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/](http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/)

```
http://mirnauman.wordpress.com/2012/01/26/how-to-get-google-maps-api-key-for-android-issues-and-errors-solved/ 
```

# javascript - 尝试更新发送到 URL 的参数以更改 iframe 的内容

> ID：13598325
> 
> 赞同：1
> 
> 时间：2012-11-28T05:18:55.990
> 
> 标签：javascript, iframe

我正在使用 iframe 显示来自第 3 部分网站的地图。在地图的网址之后（在 URL 中）是一个 # 后跟代表缩放级别的数字、地图中心的纬度和经度，由反斜杠分隔，如下所示：`http://URL.html#zoom/lat/long`

我正在使用javascript`iframe`通过更新src来更新内容。但是，由于网址相同，因此当我尝试`iframe`通过更改 URL 中的 lat、long 或 zoom 参数来更新时，没有任何变化。我尝试在将 URL 更新为正确的新值之前插入代码，该值首先将其更改`src`为虚拟`src`（“about:blank”）这种解决了问题的方法，但是`src`必须单击更新的按钮两次才能使其真正起作用. 有没有其他人遇到过类似的问题，或者知道解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:25:55.593

在哈希之前插入一个随机参数：

```
http://URL.html?rand=123#zoom/lat/long 
```

例如，123 可以是时间戳。

# css - 如果我们在其中包含级联样式表，那么在传输解析时 XML 会怎样？

> ID：13598329
> 
> 赞同：-1
> 
> 时间：2012-11-28T05:19:35.547
> 
> 标签：css, xml, parsing, xslt

我需要询问我是否有一些 XML 并设置它的样式，我使用级联样式表/可扩展样式表语言转换。我知道 XML 数据在传输时会解析，但现在因为我有级联样式表/可扩展样式表语言转换，所以它仍然会解析或解释为级联样式表正在解释语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:51:27.713

您不能在 XML 中包含 CSS 或 XSL（至少它不会呈现）。您必须使用处理指令来引用它，例如

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/css" href="stylesheet.css" ?>
<thisIsYourDocument>
  some content
</thisIsYourDocument> 
```

或者

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="stylesheet.xsl" ?>
<thisIsYourDocument>
  some content
</thisIsYourDocument> 
```

# css - 如何使用css在标签右侧添加一个三角形？

> ID：13598330
> 
> 赞同：0
> 
> 时间：2012-11-28T05:19:34.670
> 
> 标签：css

我想在右侧添加一个小三角形以与输入字段的开头重叠，但我做不到。这是我的代码：

HTML：

```
<div id="wrapper">
            <form>
                <label>First Name</label><input type="text" name="firstname" id="first" placeholder="Jorge" />
               <label>Last Name</label><input type="text" name="lastname" id="last" placeholder="Gonz&aacute;lez" />
               <label>Email</label> <input type="email" name="username" id="un" placeholder="jgon@gmail.com"/>
               <label>Password</label> <input type="password" name="password" id="pass" placeholder="********" />
               <input type="submit" value="Sign up" id="submit" />
            </form>
        </div>​ 
```

CSS：

```
html{background-color:#000;}
label{
            font-weight: bold;
            background: -webkit-linear-gradient(#3073BF 0%, #204C7F 100%);
            padding: .7em .85em .8em 0em;
            display: block;
            width: 100px;
            float: left;
            border-radius: .3em 0px 0px .3em;
            margin: 5px 0;
            color: #102640;
            text-shadow: 0px 1px 1px #fff;/*rgba(0, 0, 0, 0.3);*/
            height: 17px;
        }
        #wrapper{
            width: 800px;
            margin: 3em auto;
            background: white;
            padding: 2em 4em;
            border-radius: .5em;
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.3);
        }
        form{
            width: 330px;
            margin: 0 auto;
            text-align: right;
        }
        input{
            padding: .5em;
            border-radius: 0px 4px 4px 0px;
            border: 1px solid #bcbcbc;
            margin: .3em 0;
            font-size: 1.1em;
        }
        #submit{
            text-align: center;
            clear: both;
            float: none;
            position: relative;
            right:10px;
            margin: 1em;
            padding: 1em 3em;
            background: -webkit-linear-gradient(#fff1ba 0%, #ffc400 100%);
            border: 1px solid #ffb135;
            box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
            font-weight: bolder;
            color: #a74f00;
            font-size: 1em;
            text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: .3em;
            width:300px;
        }
        #submit:hover{
            background: -webkit-linear-gradient(#ffc400 0%, #fff1ba 100%);
        }​ 
```

和小提琴的链接：http: [//jsfiddle.net/Luis_Armando/HeDVy/](http://jsfiddle.net/Luis_Armando/HeDVy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:49:00.613

要创建一个三角形，您可以使用以下 css。根据需要添加到您的代码中。

```
.triangle{
    width: 0px;
    height: 0px;
    border-style: solid;
    border-width: 30px 0 30px 20px;
    border-color: transparent transparent transparent #007bff;
} 
```

更改边框宽度参数以更改三角形的大小。

# asp.net - 动态设置的 CSS 样式被覆盖

> ID：13598333
> 
> 赞同：3
> 
> 时间：2012-11-28T05:19:58.907
> 
> 标签：asp.net, html, css

`<asp:LinkButton>`我的网站菜单栏中的 's很少。菜单栏和这些按钮设置了 Css。我正在寻找的是突出显示对应于哪个页面处于活动状态的按钮。

我可以将一个新的 Css 类动态应用到我的`Linkbuttons`（*由浏览器呈现为锚标记*），但新应用的 CSS 会被现有类覆盖。我尝试分析那里的任何错误，但没有运气。这是我的代码-

HTML的一部分-

```
<ul class="navigation">
   <li>
       <asp:LinkButton ID="lbtn_about" runat="server" OnClick="lbtn_about_Click">About Us</asp:LinkButton>
   </li> 
```

现有的 css-

```
 ul.navigation li a
  {
    text-decoration: none;
    display: block;
    color: #838383;
    height: 24px;
  } 
```

要动态设置的 Css 类 -

```
.activeLink
  {
    color: #588500;
  } 
```

在我的页面加载中，我正在这样做-

```
LinkButton lb = (LinkButton)Page.Master.Master.FindControl("lbtn_about");
lb.CssClass = "activeLink"; 
```

在浏览器中呈现的 HTML -

```
<a id="ctl00_ctl00_lbtn_about" class="activeLink" href="javascript:__doPostBack('ctl00$ctl00$lbtn_about','')">About Us</a> 
```

很明显，类已设置，但`activeLink`css 被`ul.navigation li a`. 请提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T05:26:46.017

这是因为`ul.navigation li a`比 更具体`.activeLink`。

如果您考虑一个积分系统，一个元素说`ul`有 1 分，一个类说`navigation`有 10 分。因此，在 10 的vs`ul.navigation li a`上至少有 11 分。`ul.navigation``activeLink`

[一篇关于 css 特异性的详细](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)文章！

http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html">

至于解决方案，您只需要`.activeLink`更具体地引用您的解决方案，无论是使用 a`#id`还是`ul.navigation li a.activeLink`.

继续前进，愿 CSS 与您同在！

# c# - 无法将“Castle.Proxies.IIdentityProxy”类型的对象转换为“MyApp.Web.Models.CurrentUser”类型。使用最小起订量和单元测试

> ID：13598336
> 
> 赞同：2
> 
> 时间：2012-11-28T05:20:11.553
> 
> 标签：c#, moq, httpcontext

为使用 User.Identity 的操作编写单元测试时，显示错误**无法将“Castle.Proxies.IIdentityProxy”类型的对象转换为“MyApp.Web.Models.CurrentUser”类型。**

**当前用户类别：**

```
[Serializable]
public class CurrentUser : IIdentity
{
    public CurrentUser (){}
    public CurrentUser (string name, string displayName, int userId)
    {
        this.Name = name;
        this.DisplayName = displayName;
        this.UserId = userId;
    }
    public CurrentUser (string name, string displayName, int userId,string roleName)
    {
        this.Name = name;
        this.DisplayName = displayName;
        this.UserId = userId;
        this.RoleName = roleName;
    }
    public CurrentUser (string name, UserInfo userInfo)
        : this(name, userInfo.DisplayName, userInfo.UserId,userInfo.RoleName)
    {
        if (userInfo == null) throw new ArgumentNullException("userInfo");
        this.UserId = userInfo.UserId;
    }

    public CurrentUser (FormsAuthenticationTicket ticket)
        : this(ticket.Name, UserInfo.FromString(ticket.UserData))
    {
        if (ticket == null) throw new ArgumentNullException("ticket");
    }

    public string Name { get; private set; }

    public string AuthenticationType
    {
        get { return "GoalSetterForms"; }
    }

    public bool IsAuthenticated
    {
        get { return true; }
    }

    public string DisplayName { get; private set; }
    public string RoleName { get; private set; }
    public int UserId { get; private set; }
} 
```

* * *

**控制器动作**

```
public PartialViewResult SomeList()
{
    int userid = ((CurrentUser )(User.Identity)).UserId; //Error shows here

    var list= listService.GetLists(userid);
    return PartialView("ListView", list);
} 
```

**单元测试**

```
[Test]
public void SomeList_Test()
{

    var controllerContext = new Mock<ControllerContext>();
    var principal = new Moq.Mock<IPrincipal>();

    ListController controller = new ListController (listService);

    principal.SetupGet(x => x.Identity.Name).Returns("abc");
    controllerContext.SetupGet(x => x.HttpContext.User).Returns(principal.Object);
    controllerContext.SetupGet(p =>      p.HttpContext.Request.IsAuthenticated).Returns(true);
    controller.ControllerContext = controllerContext.Object;

} 
```

提前致谢， 拉扎克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:14:19.390

我只是遇到了同样的事情，但有点不同。

代替

```
principal.SetupGet(x => x.Identity.Name).Returns("abc"); 
```

和

```
principal.SetupGet(x => x.Identity).Returns(new CurrentUser("abc", "test", 123)); 
```

# c - 从 C 中的命令行将字符转换为整数

> ID：13598339
> 
> 赞同：2
> 
> 时间：2012-11-28T05:20:23.317
> 
> 标签：c, casting

我正在制作的这个 C 程序从命令行读取一组字符并使用数组 (argv[]) 像这样存储它们

```
main (int argc, char *argv[])  {
int temp;
     /*prevents no arguments*/
if (argc==1){
    printf("Usage;\t[0 < integers < 9] [operators]\n");
    exit(0);
}
int i;
for (i = 0 ; i<argc; i++){
    temp = argv[i] - '0';
    printf("this is char %d ; %d\n",i, temp);
}
} 
```

但是我在命令行中运行它之后得到的只是这样；

```
 program 2 4 1 - + 
```

是随机垃圾

```
 this is char 0 ; -4195956
    this is char 1 ; -4195950
    this is char 2 ; -4195948
    this is char 3 ; -4195946
    this is char 4 ; -4195944
    this is char 5 ; -4195942 
```

我投射温度的方式有问题吗？还是我只是错误地理解了指针（在 *argv[] 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:24:59.403

argv[i] - 只是一个指向 C 字符串的指针；你需要第一个元素：

```
temp = argv[i][0] - '0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:25:58.567

的每个元素`argv`都是一个*字符串*，而不是一个特定的字符。`argv`是一个多维数组，你只索引第一个维度。您需要获取每个嵌套数组的第一个（第零个）元素：

```
temp = argv[i][0] - '0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:26:38.183

```
char *argv[] 
```

`argv`是一个指向 char 的指针数组。指向 char 的指针也是如此`argv[X]`（对于合适的 X）。指针算术也是如此`argv[X] - some_integral_value`，并返回一个指针（如果定义了减法）。

要访问第一个元素，您需要`argv[X][0]`.

请注意，这`argv[0]`不是第一个参数，而是（通常）程序名称。参数从`argv[1]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T05:38:20.203

对于数字，您可以使用`atoi(str)`以下函数：

```
temp = atoi(argv[i]); 
```

**代码：**

```
for (i = 0 ; i<argc; i++){
    if (argv[i][0] < '0' || argv[i][0] > '9')
        printf("Operator = %s\n", argv[i]);
    else {
        temp = atoi(argv[i]);
        printf("this is char %d ; %d\n",i, temp);
    }
} 
```

您可以使用单独的字符数组来存储运算符..

# shell - Cake 2.0 CLI 模式错误“未定义的 HTTP_HOST”

> ID：13598341
> 
> 赞同：2
> 
> 时间：2012-11-28T05:20:28.963
> 
> 标签：shell, cakephp, command-line-interface

我在蛋糕控制台上运行一个 shell 脚本。能够运行HelloShell**但**以下代码出现未定义错误：`HTTP_host``app/config/core.php`

```
class HelloShell extends AppShell {
    public $uses=array('Test');
    public function main() {
        $this->out('Hello Kundan.');
    }
     public function hey() {
       $this->Test->save($data['Test']['name']='Kundan');
    }
} 
```

下面是错误消息：

```
PHP notice: undefined index HTTP_HOST in 
C:\wamp\www\myapplication\app\Config\core.php on line 231\. 
```

当我打开该文件时，我在第 231 行发现以下内容`Configure::write('Website_root',$_SERVER['HTTP_HOST']);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:51:01.183

我已经复制了您的代码，并且运行良好。

你把`HelloShell.php`文件放在哪里？以及如何运行您的代码？

常用方法，将`HelloShell.php`文件放在`app/Console/Command/`目录中并运行它`Console/cake hello`

还尝试修改您的代码：

```
class HelloShell extends AppShell {

    public $uses=array('Test');

    public function main() {
        $this->out('Hello Kundan.');
        $this->hey();
    }
     public function hey() {
       $data['Test']['name']='Kundan';
       $this->Test->save($data);
    }
} 
```

# java - Java Arrays.fill() 负数

> ID：13598343
> 
> 赞同：-1
> 
> 时间：2012-11-28T05:20:39.373
> 
> 标签：java, arrays, exception, 2d, fill

我试图用'-1'作为所有值填充一个二维数组。我正在使用的代码是：

```
int c [] []=new int[4][4];
Arrays.fill(c,-1) 
```

这会引发以下错误：

```
Exception in thread "main" java.lang.ArrayStoreException: java.lang.Integer 
```

谁能告诉我代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T05:26:40.493

它是一个整数数组。

你应该写

```
 int c [] []=new int[4][4];
    for(int[] arr : c){
        Arrays.fill(arr,-1);
    } 
```

# list - 尝试从列表中弹出元素时编译错误

> ID：13598347
> 
> 赞同：0
> 
> 时间：2012-11-28T05:20:56.737
> 
> 标签：list, scala

我遇到了一些我似乎无法理解的奇怪编译器错误。下面是相关代码：

```
class A {

  var x = List[B]()

  def func = {
    val temp = x(0)
    x = x tail
    temp
  }

} 
```

我只是想从列表中删除第一个元素并返回它。但是，我收到一条错误消息，提示“类型不匹配：找到 B：必需的 Int”。我无法弄清楚为什么它需要一个 Int。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:26:13.787

类型是什么`B`？你的意思是`Int`？

要获得第一个元素，您可以使用`head`. 要获取列表的其余部分，您可以使用`tail`. Scala 中的点运算符是可选的。

```
 def func = {  
    val temp = x.head
    x = x.tail
    temp
  } 
```

# java - 列出java中的文件夹和子文件夹

> ID：13598350
> 
> 赞同：1
> 
> 时间：2012-11-28T05:21:36.870
> 
> 标签：java, directory

我一直在尝试使用以下代码在 Java 中显示文件夹列表：

```
class Folder {
   boolean isFile;
   String folderName;
   List<Folder> subFolders = new ArrayList<Folder>;
}

class ListF {
   public static void main(String args[]) {
      File fname = new File("C:/hello");
      Folder obj = new Folder();
      if (fname.isDirectory()) {
         File[] fileNames;
         fileNames = fname.listFiles();
         for (i = 0; i < fileNames.length; i++) {
            obj.subFolders.add(fileNames[i]);
         }
         System.out.println("The list is " + obj.subFolders);
      }
   }
} 
```

但是我的代码中出现错误：

```
ListF.java:5: '(' or '[' expected List<Folder> subFolders=new ArrayList<Folder>; 
```

谁能指出我的错误？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:22:25.347

替换`new ArrayList<Folder>;`为`new ArrayList<Folder>();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:48:01.047

`List<Folder> subFolders = new ArrayList<Folder>;`

**将上述语句设为：**

```
List<Folder> subFolders = new ArrayList<Folder>(); 
```

**或者**

如果您使用的是 Java 7 及更高版本，您也可以这样做......

```
List<Folder> subFolders = new ArrayList<>(); 
```

# java - 在 OSGi 包中加载 ResourceBundle

> ID：13598351
> 
> 赞同：6
> 
> 时间：2012-11-28T05:21:50.803
> 
> 标签：java, osgi, resourcebundle

我有一个使用 java.util.ResourceBundle 处理显示字符串的应用程序。我使用 ListResourceBundle 作为基本类型，因为我希望能够为某些属性键返回一个字符串数组（其中大多数是标准的名称/值对）。

当我尝试在 OSGi 环境中加载 ResourceBundle 时，我得到了 MissingResourceException。我无法弄清楚为什么会发生这种情况。在尝试获取捆绑包之前，我可以解析类名并在两个语句中创建类的新实例，因此我知道该类在捆绑包中。我正在使用语言环境 (en_AU) 但没有为该语言环境提供特定的类，后备规则应该选择我的默认实现。即使我为语言环境添加了一个类，它也没有解决。

我获取数据的过程是：

服务

```
public interface NameManager {
   public String getCategoryName(String identifier, Locale locale);
} 
```

这个的实施

```
public class OsgiNameManager implements NameManager {
   public String getCategoryName(@Nonnull Identifier category, Locale locale)
   {
      try {
        Collection<ServiceReference> references = (Collection)osgiContext.getServiceReferences(
                 DisplayNameProvider.class, "(namespace=" + category + ")");
        Iterator<ServiceReference> it = references.iterator();
        while ( it.hasNext() ) {
           ServiceReference reference = (ServiceReference)it.next();
           DisplayNameProvider namer = (DisplayNameProvider)osgiContext.getService(reference);
           String name = namer.getCategoryName(category, locale);
           osgiContext.ungetService(reference);

           if (name != null)
              return name;
        }
     }
     catch (InvalidSyntaxException badFormat) {
        LOG.warn("No registered provider for category [" + category + "]" , badFormat);
     }

      return null;
   }
} 
```

这使用自定义服务接口 DisplayNameProvider。希望注册名称的模块将其作为服务添加到其激活器中。默认实现采用一个类作为完全限定的资源包名称。

```
public class DefaultDisplayNameProvider implements DisplayNameProvider {
    private Class<?> categoryResolver;
    public String getCategoryName(@Nonnull String category, Locale locale)
    {
       ResourceBundle res = ResourceBundle.getBundle(categoryResolver.toString(), locale);
       try {
          return res.getString(CATEGORY_NAME_KEY);
       }
       catch (MissingResourceException noCols) {
          return null;
       }
    }
 } 
```

（注意，我遗漏了一些字段和静态引用，但这是所做工作的要点）。

我正在进入 DefaultDisplayNameProvider 内部，因此我知道正在找到资源。我知道该类在包中（它存储在内部包类中，但对本地类加载器可见）。

我的问题是我需要做什么才能在 OSGi 中加载我的 ResourceBundle？我更愿意继续使用这种方法，而不是开始使用资源片段或硬编码字符串名称。

## 解决方案

下面帮助 ClassLoader 的两个建议都很有用，但事实证明我的问题要简单得多。不要使用 toString() 来获取类名（我应该知道但那天一定很懒）。正确使用的方法是 Class.getName()。

这是通过注意到如果我使用它正确加载的属性文件而发现的。然后，如果我输入类名也可以。只有当我试图通过使用现有的类引用来获得正确的名称来减少文本输入错误时。

我将坚持使用资源名称的字符串版本。这意味着 JVM 在实际请求之前不必加载类（并不是说此时它有很多事情要做）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:16:20.607

突然想到：您可能想尝试该`ResourceBundle.getBundle(name,locale,classloader)`方法，因为`ResourceBundle`不知道要搜索哪个类加载器。你可以得到 with 的类加载`DefaultDisplayNameProvider`器`getClass().getClassLoader()`。

问候，弗兰克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T10:56:03.850

您应该始终使用`getBundle`带`ClassLoader`参数的方法。调用此方法的其他版本与调用单参数一样糟糕`Class.forName`……也就是说，您正在强制 Java 运行时*猜测*哪个类加载器包含资源。

我真的不明白为什么 ResourceBundle 强迫我们传递一个类*名*而不是一个`Class` *对象*。恐怕这只是 Java 标准库中设计不佳的另一个例子。

# php - joomla 2.5 文章网址正在重定向到主页

> ID：13598358
> 
> 赞同：1
> 
> 时间：2012-11-28T05:22:17.020
> 
> 标签：php, joomla2.5

当我使用 joomla 2.5 版本时，所有文章项目都重定向到主页，下面给出的是锚标记，在提交图像时它应该转到“coupons.html”，但它正在重定向到主页。

```
<a rel="allow" href="coupons.html"><img src="/images/sched-button.png" border="0" class="right" /></a> 
```

# java - 使用 volatile 关键字时出现内存一致性错误的示例？

> ID：13598359
> 
> 赞同：8
> 
> 时间：2012-11-28T05:22:22.387
> 
> 标签：java, multithreading, memory, volatile, consistency

来自文档：

> 使用 volatile 变量可降低内存一致性错误的风险

但这意味着有时 volatile 变量不能正常工作？奇怪的是如何使用它 - 在我看来，这是非常糟糕的代码，有时工作有时不工作。我尝试谷歌，但没有找到易失性的示例内存一致性错误。你能推荐一个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T05:31:35.517

问题不在于`volatile`工作不可靠。它总是按应有的方式工作。问题是它应该工作的方式有时不足以进行并发控制。如果`volatile`在错误的情况下使用，仍然会出现内存一致性错误。

变量将`volatile`始终将任何写入传播到所有线程。但是，假设您需要在各个线程之间增加变量。这样做^(（*）)：

```
volatile int mCounter;

// later, in some code that might be executed simultaneously on multiple threads:
mCounter++; 
```

有可能会错过计数器增量。这是因为在`mCounter`写入新值之前，每个线程都需要先读取 的值。在这两个步骤之间，另一个线程可能更改了`mCounter`. 在这种情况下，您需要依赖`synchronized`块而不是`volatile`确保数据完整性。

有关`volatile`vs.的更多信息`synchronized`，我推荐Brian Goetz的文章[*管理波动性*](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)

^((*))我意识到上面的实现会更好`AtomicInteger`；这是一个人为的例子来说明一个观点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T05:32:20.833

**易失性执行以下操作：**

**-**它**防止缓存**线程中的值。

**-**它确保具有对象字段值副本的线程与内存中存在的主副本一致。

**-**确保**数据直接写入内存并从内存本身读取。**

**## 但是 volatile 失败的情况：**

**-**制作`Non-Atomic statement Volatile`.

**例如：**

```
int count = 0;

count++;  // Increment operator is Not Atomic in java 
```

**## 更好的选择：**

**1.**最好遵循`Brian's Rule`：

`When ever we write a variable which is next to be read by another thread, or when we are reading a variable which is written just by another thread, it needs to be synchronized. The shared fields must be made private, making the read and write methods/atomic statements synchronized.`

**2.**第二个选项是使用**AtomicInteger、AtomicLong、AtomicReference 等**`Atomic Classes`。

 ****## 看到这个链接，我问过一个和你类似的问题：**

[为什么 Volatile 行为怪异](https://stackoverflow.com/questions/11281327/why-volatile-is-behaving-weirdly)**

# python - 如何动态选择要在烧瓶中使用的模板目录？

> ID：13598363
> 
> 赞同：61
> 
> 时间：2012-11-28T05:22:30.820
> 
> 标签：python, flask, jinja2

默认情况下，flask 使用存储在“模板”目录中的模板文件：

```
/flaskapp
    /application.py
    /templates
        /hello.html 
```

有没有办法根据用户登录动态选择模板目录？这就是我想要的目录结构：

```
/flaskapp
    /application.py
    /templates (default template goes here)
        /hello.html
    /userdata
        /user1
            /template1
                 hello.html
            /template2
                 hello.html
        /user2
            /template1
                 hello.html
            /template2
                 hello.html 
```

现在如果我有登录用户的用户名和用户激活的模板名称，是否可以动态选择目录来加载模板文件？例如，

```
/userdata/<username>/<activated template name>/ 
```

而不是固定的

```
/templates/ 
```

我想要实现的是一个类似 wordpress 的主题系统，用于我的 Web 应用程序，用户可以为他的网站上传/选择主题。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-28T05:46:33.853

您可以向 Flask 构造函数传递一个“template_folder”参数。

像这样...

```
Flask(__name__, template_folder="wherever") 
```

这是文档： http: [//flask.pocoo.org/docs/api/](http://flask.pocoo.org/docs/api/)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-11-28T06:06:53.030

还有可能覆盖 Jinja 加载器并设置 Jinja 查找模板的路径。喜欢：

```
my_loader = jinja2.ChoiceLoader([
        app.jinja_loader,
        jinja2.FileSystemLoader(['/flaskapp/userdata', 
                                 '/flaskapp/templates']),
    ])
app.jinja_loader = my_loader 
```

目录按照 Jinja 需要首先开始查找的顺序排列。然后从视图中，您可以像这样呈现用户特定的模板：

```
render_template('%s/template1/hello.html' % username) 
```

您可以在视图中动态更改用户名的位置。当然，您也可以在那里选择要渲染的模板（1 或 2）。但基本上你真正想念的是这个带有自定义路径的自定义 Jinja 加载器。

希望能帮助或给出想法:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T20:15:32.950

我是 Python 新手，但我已经遇到过这个问题。我不知道我的解决方案是否正确，但它有效：

首先，您必须为每个用户创建模块

```
/flaskapp
    /application.py
    /templates (default template goes here)
        __init__.py     # default module flaskapp
        views.py        # here you can define methods for default module (like Action in MVC)
        /hello.html
    /static
    /userdata
        /user1
            __init__.py # user1 module
            views.py    # here you can define methods for user1 module
            /template1
                 hello.html
            /template2
                 hello.html
        /user2
            __init__.py # user2 module
            views.py    # here you can define methods for user2 module
            /template1
                 hello.html
            /template2
                 hello.html 
```

在 application.py init Flask app 中，添加全局方法 render_page_from 并注册蓝图

```
app = Flask(__name__)
def render_page_from(controller_name, template_name_or_list, **context):
    # here you can choose any controller or use default
    app.jinja_loader.searchpath.clear()
    blueprint = app.blueprints[controller_name]
    app.jinja_loader.searchpath.append(blueprint.template_folder)
    return render_template(template_name_or_list, context=context)

from flaskapp.user1 import controller as user1_controller
from flaskapp.user2 import controller as user2_controller

app.register_blueprint(user1_controller)
app.register_blueprint(user2_controller) 
```

在每个模块（user1、user2 等）中**init** .py中的初始化蓝图

```
templates_folder = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'templates')

controller = Blueprint('user1', __name__, url_prefix='/user1', template_folder = templates_folder)

import flaskapp.user1.views 
```

最后像这样将视图（动作）方法添加到views.py

```
from LocalHub.client import controller
@controller.route('/hello')
def hello():
    """Renders the page"""
    return render_page_from(controller.name, 'hello.html', title='hello') 
```

# android - oracle 移动服务器 - 同步时在 android 设备上加载特定用户数据

> ID：13598366
> 
> 赞同：1
> 
> 时间：2012-11-28T05:22:50.127
> 
> 标签：android, oracle

如何将特定用户数据从 oracle 移动服务器加载到 android 设备。我正在关注下面的示例 URL 并为我的应用程序实现了代码。 [http://docs.oracle.com/cd/E22663_01/doc.11100/e22681/sandroid.htm](http://docs.oracle.com/cd/E22663_01/doc.11100/e22681/sandroid.htm)

现在同步过程工作正常，但它将所有用户数据同步到每个设备，而我想加载当前登录的用户的数据。

谢谢

# java - Java 日期格式问题（类型不适用于参数（日期））

> ID：13598368
> 
> 赞同：1
> 
> 时间：2012-11-28T05:22:59.553
> 
> 标签：java, jsp, servlets

我正在尝试执行一个 jsp/servlet 程序，但我遇到了问题。请帮忙！:(

这是我得到的错误：Movie 类型中的方法 setReleasedate(Calendar) 不适用于参数 (Date)

这是我的代码：（Servlet）

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" import="com.ServiceProxy"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
 <%@ page import="entity.Movie" %>
 <%@ page import="java.util.*" %>
 <%@ page import="java.text.SimpleDateFormat" %>
  <%@ page import="java.text.DateFormat" %>
    <%@ page import="java.util.Calendar"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Demo</title>
</head>
<%
Movie m= new Movie();
String mname=request.getParameter("MName");
String mbanner=request.getParameter("Mbanner");
String rdate=request.getParameter("Rdate");
String cat=request.getParameter("Cat");

ServiceProxy proxy=new ServiceProxy();
proxy.setEndpoint("http://localhost:8080/VideoLibraryServers/services/Service");

int flag=0;
DateFormat dateFormat;
dateFormat = new SimpleDateFormat("dd-MMM-yy"); 
Date convertedDate;
convertedDate =(Date)dateFormat.parse(rdate);
m.setMoviename(mname);
m.setMoviebanner(mbanner);
m.setReleasedate(convertedDate); // **HERE I GET ERROR!!!!**
System.out.println(m.getReleasedate());
m.setCategory(cat);
flag=proxy.createMovie(m);
if(flag==2)
{
    String error="User with the email already exists";
    session.setAttribute("error",error);
    response.sendRedirect("Signuperror.jsp");
}
else if(flag==1)
{

   response.sendRedirect("MovieAddSucc.jsp");
}
else if(flag==0)
{
    String msg="Adding Movie was UnSuccessful";
    session.setAttribute("ErrMsg",msg);
        response.sendRedirect("ErrMsg.jsp");
}
%>
<body>
</body>
</html> 
```

电影（Java Bean）

```
import java.util.Date;
public class Movie{
        private int movieid;
        private String moviename;
        private String moviebanner;
        private Date releasedate;
        private int rentamount;
        private String category;
        private int availablecopies;
        public Movie(){
            movieid=0;
            moviename="";
            moviebanner="";
            releasedate=new Date();
            rentamount=0;
            category="";
            availablecopies=0;  
        }
        public int getMovieid() {
            return movieid;
        }
        public void setMovieid(int movieid) {
            this.movieid = movieid;
        }
        public String getMoviename() {
            return moviename;
        }
        public void setMoviename(String moviename) {
            this.moviename = moviename;
        }
        public String getMoviebanner() {
            return moviebanner;
        }
        public void setMoviebanner(String moviebanner) {
            this.moviebanner = moviebanner;
        }
        public Date getReleasedate() {
            return releasedate;
        }
        public void setReleasedate(Date releasedate) {
            this.releasedate = releasedate;
        }
        public int getRentamount() {
            return rentamount;
        }
        public void setRentamount(int rentamount) {
            this.rentamount = rentamount;
        }
        public String getCategory() {
            return category;
        }
        public void setCategory(String category) {
            this.category = category;
        }
        public int getAvailablecopies() {
            return availablecopies;
        }
        public void setAvailablecopies(int availablecopies) {
            this.availablecopies = availablecopies;
        }
} 
```

请帮忙！

# linux - 如何处理可能的 dl 和 glibc 库版本不兼容？

> ID：13598377
> 
> 赞同：0
> 
> 时间：2012-11-28T05:23:52.597
> 
> 标签：linux, gcc, openssl, glibc, dynamic-linking

在 OpenSSL 中链接到我的代码时，添加`-lssl -lcrypto`到我的链接步骤中，我收到以下错误：

```
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x8da): undefined reference to `dlopen'
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x8f1): undefined reference to `dlsym'
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x903): undefined reference to `dladdr'
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x90f): undefined reference to `dlclose'
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x98a): undefined reference to `dlclose'
collect2: error: ld returned 1 exit status
make: *** [run] Error 1 
```

从[这个 Stack Overflow question](https://stackoverflow.com/questions/956640/linux-c-error-undefined-reference-to-dlopen)的答案中，我添加了`-ldl`，现在我收到以下警告：

```
/usr/lib/../lib64/libcrypto.a(fips.o): In function `FIPSCHECK_verify':
(.text+0x8da): warning: Using 'dlopen' in statically linked applications
requires at runtime the shared libraries from the glibc version used for linking 
```

这是一个 Linux 工作站，我不太熟悉如何弄清楚如何从以下位置链接库`"the glibc version used for linking"`：

```
$ uname -a                                                                                                                                                                                             
Linux foo.example.com 2.6.18-274.el5 #1 SMP Fri Jul 8 17:36:59 EDT 2011 x86_64 GNU/Linux 
```

我该如何解决这个警告？我的要求之一是我需要编译一个静态二进制文件。我认为我不能放松这个要求。抱歉，如果这是一个愚蠢的问题，并感谢您的建议。

# java - 有人可以检查我关于替换 .txt 文件中数字的代码吗？我无法替换其中的数字

> ID：13598380
> 
> 赞同：0
> 
> 时间：2012-11-28T05:24:18.217
> 
> 标签：java, io, pattern-matching, matcher

我有以下代码，用于替换文本文件中的数字的分配：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;
import java.util.Random;
import java.util.Scanner;

public class L20 {

   public static void main(String[] args) throws IOException {
      Scanner input = new Scanner(System.in);

      System.out.println("Enter file name");
      String in = input.nextLine();
      try {
         textWriter(in);
         textReader(in);
         textChanger(in);
      } catch (Exception e) {
      }
   }

   public static void textWriter(String path) throws IOException {
      String[] alphabet = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j",
            "k", "m", "l", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w",
            "x", "y", "z" };
      File file = new File(path);
      Writer output = null;
      Random number = new Random();
      output = new BufferedWriter(new FileWriter(file));
      int lines = 10 + number.nextInt(11);
      for (int i = 0; i < lines; i++) {
         int it2 = 1 + number.nextInt(9);
         int n1 = number.nextInt(26);
         int n2 = number.nextInt(26);
         int n3 = number.nextInt(26);

         String t2 = Integer.toString(it2);
         String t1 = alphabet[n1] + alphabet[n2] + alphabet[n3];
         String text = t1 + t2;
         output.write(text);
         ((BufferedWriter) output).newLine();
      }
      output.close();
      System.out.println("Your file has been written");
   }

   public static void textReader(String path) throws IOException {
      File file = new File(path);
      Scanner input;
      input = new Scanner(file);
      String line;
      while ((line = input.nextLine()) != null) {
         System.out.println(line);
      }
      input.close();
   }
} 
```

但不幸的是，代码不能正常工作。问题部分如下图所示：

```
public static void textChanger(String path) throws IOException {
   File file = new File(path);

   Scanner input;
   input = new Scanner(file);
   String line;
   Pattern p = Pattern.compile("[0-9]");

   while ((line = input.nextLine()) != null) {
      Matcher m = p.matcher(line);
      int n = Integer.parseInt(m.group());
      System.out.println(n);
   }

   input.close();
} 
```

我想要做的是只替换 Text.txt 文件中每一行的数字部分。这些行中的每一行都由三个字母和一个数字组成。我只想更改数字部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:38:08.087

试试这个.............

```
public class Reg {

    public static void main(String[] args){

        String s = "abc1";
        Pattern p = Pattern.compile("\\d");
        Matcher m = p.matcher(s);
        String no = new String();

        while (m.find()){

              no = m.group();
        }

        String newStr = s.replace(no, "hi");
        System.out.println(newStr);
       }
} 
```

# wordpress - 如何检查当前用户是否在 WordPress Multisite 中有博客/网站？

> ID：13598381
> 
> 赞同：0
> 
> 时间：2012-11-28T05:24:19.853
> 
> 标签：wordpress, networking, wpmu

我想知道如何修改以下代码以检查当前用户是否已在我的 wordpress 网络上设置了站点/博客？

```
<?php 
global $wp_roles;
foreach ( $wp_roles->role_names as $role => $name ) :
    if ( current_user_can( $role ) && $role == 'administrator') { 
        if ( class_exists( 'MarketpressFadminWidget' ) ) { 
            $mp_frontend_settings = get_option( 'mp_frontend_settings' );
            $mp_frontend_settings = unserialize($mp_frontend_settings);
            $adminpage = $mp_frontend_settings['page_id'];
            $permalink = get_permalink($adminpage);
            ?>
            // My Links / Html Content
            <?php 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:05:07.450

使用功能[`get_blogs_of_user`](http://codex.wordpress.org/WPMU_Functions/get_blogs_of_user)。

> ### 描述
> 
> 返回一个对象数组，其中包含指定用户有权访问的每个博客的详细信息。

# c++ - OpenCV 2.4.3 相机捕捉在 Ubuntu 12.04 上不起作用

> ID：13598383
> 
> 赞同：1
> 
> 时间：2012-11-28T05:24:46.373
> 
> 标签：c++, opencv, ubuntu-12.04, cameracapturetask

我正在尝试在 Ubuntu 12.04 LTS 上使用 openCV 2.4.3 执行以下程序。但是我得到“相机未初始化为输出”有人可以帮助我吗？

这是代码：

```
include <iostream>
include "opencv2/imgproc/imgproc.hpp"
include "opencv2/highgui/highgui.hpp"

using namespace cv;
using namespace std;

int main()
{
  VideoCapture cap(1);

  if (!cap.isOpened())
    {
      cout <<"Failed to initialize camera\n";
      return 1;
    }

  namedWindow("CameraCapture");

  Mat frame;
  while (1)
    {
      cap>> frame;
      imshow("cameraCapture",frame);
      if (waitKey(30)>0)break;
    }
  destroyAllWindows();

  return 0;

 } 
```

请帮我！

谢谢，库沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:28:06.027

尝试以下...

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

int main()
{
    CvCapture *webcam = cvCaptureFromCAM(-1);
    IplImage *img = NULL;

    while(true)
    {
        img = cvQueryFrame(webcam);
        cvShowImage("TEST",img);
        cvWaitKey(20);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:55:43.127

你检查了默认的捕获设备吗？默认为 0

```
VideoCapture cap(0); 
```

# php - 如何在 PHP 中使用 FDPF 为文本添加下划线？

> ID：13598384
> 
> 赞同：8
> 
> 时间：2012-11-28T05:24:48.817
> 
> 标签：php, fpdf, underline

我试图让我的文本加下划线，`FPDF`但这似乎是不可能的......我没有使用 HTML。我正在使用`DejaVu`支持 UTF-8 的 unicode 字体，这也是我第一次使用 FPDF。

这甚至可能吗？请给我一些解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T05:34:57.023

试试这个 ：

```
$fpdf->SetFont('Dejavu','U'); //Where "U" means underline. 
```

另见（德语）[http://www.fpdf.de/funktionsreferenz/?funktion=SetFont](http://www.fpdf.de/funktionsreferenz/?funktion=SetFont)

另见（英文）[http://www.fpdf.org/en/doc/setfont.htm](http://www.fpdf.org/en/doc/setfont.htm)

# php - 将值存储在 javascript 数组中

> ID：13598385
> 
> 赞同：0
> 
> 时间：2012-11-28T05:24:49.337
> 
> 标签：php, javascript, html, arrays, function

大家好，这里是我的代码

```
function send(Eqt_Param,Eqt_Param_value)
{
    var Eqt_Paramv=Eqt_Param+'='+Eqt_Param_value;
    alert(Eqt_Paramv);
} 
```

每次`Eqt_Param` 都会`Eqt_Param_value`不同......我正在发送值`onclick`，所以运行这个脚本 5 次，我得到了 5 个不同的值。但是现在我需要将每个值保存在一个数组中，以便我可以在脚本函数中使用数组元素再次，

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:31:38.463

```
var data = new Array();

function add(param, value){
    var temp = {'param' : param, 'value' : value};

    if (data.length >= 50)
        data.shift();

    data.push(temp);        
} 
```

处理后调用函数，如

```
add(Eqt_Param,Eqt_Param_value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:36:37.697

不确定这是否是你想要的......但你可以试试这个..

创建一个全局数组...

```
var globalArray=[]; 
```

使用 push() 在数组中推送你想要的值

```
function send(Eqt_Param,Eqt_Param_value)
{
   var Eqt_Paramv=Eqt_Param+'='+Eqt_Param_value;
    alert(Eqt_Paramv);
   globalArray.push(Eqt_Paramv);   // i am pushing the result(Eqt_Paramv) here, 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:40:05.637

创建一个全局数组变量，然后简单地将函数分配给它。

```
 var array = [];
  function send(param, param_value) { 
    array[] = Eqt_Param + '=' + Eqt_Param_value;  
  } 

```

或者

```
 var array = [];
  array[] = send(param, param_value);
  function send(param, param_value) { 
    return Eqt_Param + '=' + Eqt_Param_value;  
  } 

```

该数组将包含函数运行时的所有结果。

希望这可以帮助。

# c# - 如何在文档中搜索字符串并突出显示搜索到的字符串

> ID：13598386
> 
> 赞同：0
> 
> 时间：2012-11-28T05:24:50.067
> 
> 标签：c#, winforms

> 海，我们目前正在使用 Janus Controls 开发 C# windows 应用程序。因为我们有一个搜索功能，例如，如果您在搜索框中搜索任何单词，则包含该搜索单词的所有文档（我的记事本、Ms-word、PDF）都应显示在应用程序中。
> 
> **当我们双击任何文档时，它应该会打开一个新窗口（如弹出窗口）并显示预览，如您搜索过的单词，并且搜索到的单词应该以某种颜色突出显示，就像在我们的 Microsoft Word 文档中一样。**
> 
> 我们可以使用 word 或 Pdf 打开特定文档并突出显示文本。但是我们需要在一个窗口中打开它并突出显示所有匹配的搜索文本。请提供可能的解决方案或链接以使用或任何工具来使用此方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:27:46.557

要包含系统中的文档，您需要首先将该文档包含在项目中，或者在程序中，或者您可以在创建项目时这样做。然后您需要打开文件并在 的帮助下阅读`StreamReader`并搜索特定的单词。

# android - 打开失败：使用 POST 将图像上传到网站时 ENOENT（没有这样的文件或目录）

> ID：13598389
> 
> 赞同：3
> 
> 时间：2012-11-28T05:24:54.607
> 
> 标签：android

我将图像的 Uri 字符串作为字符串保存到 SQLite。我可以通过为其创建视图意图来查看图像。

但是当我使用 FileBody(new File(theUriFromTheDatabase)) 将图像上传到网络服务器时，它总是说“打开失败：ENOENT（没有这样的文件或目录）”

该文件的 uri 是：“/content:/media/external/images/media/667”

事实：

1.  我确定文件在那里，因为我可以查看它
2.  我启用了内部存储读/写，外部存储读/写权限
3.  使用 Galaxy Tab 2 10.1
4.  它没有 SD 卡
5.  相同的代码适用于我的带有 SD 卡的 Experia Neo V（是因为它没有 SD 卡吗？）
6.  尝试在启动应用程序之前移除电线
7.  系留 USB 已关闭

这是代码：

```
 protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        InspectionsDbController db = new InspectionsDbController(getActivity());

        InspectionItemStruct[] ins = db.getInspectionList(((MyApplication)((Activity) mContext).getApplication()).getCurrentInspectionId());

        SharedPreferences settings = mContext.getSharedPreferences(MainActivity.PREFS_NAME, 0);
        long userId = settings.getLong("userId", 0);
        String token = settings.getString("token", "");

        for (int i = 0; i < ins.length; i++) {

            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost("http://webprojectupdates.com/mmp/api/mobile/upload_inspection");

                MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

                // add userId
                try {  
                    entity.addPart("userId", new StringBody(String.valueOf(userId)));
                    entity.addPart("token", new StringBody(String.valueOf(token)));

                } catch (IOException e) {
                    Log.e("MMP","Error in adding token: "+e.getMessage());
                }

                // add media attachments
                if(ins[i].image!=null){

                    //Bitmap image = BitmapFactory.decodeFile(ins[i].image);

                    //ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    //image.compress(CompressFormat.JPEG, 75, bos);
                    //byte[] imageData = bos.toByteArray();
                    //ByteArrayBody bab = new ByteArrayBody(imageData,"image/jpg", ins[i].itemId+".jpg");

                    //entity.addPart("image", bab);
                    entity.addPart("image", new FileBody(new File (ins[i].image)));
                }
                if(ins[i].video!=null){
                    entity.addPart("video", new FileBody(new File (ins[i].video)));
                }

                // Normal string data
                try {  
                    entity.addPart("itemId", new StringBody(String.valueOf(ins[i].itemId)));
                    entity.addPart("isExist", new StringBody(String.valueOf(ins[i].itemExists)));
                    if(ins[i].comments!=null)  entity.addPart("comment", new StringBody(String.valueOf(ins[i].comments)));
                    entity.addPart("condition", new StringBody(String.valueOf(ins[i].condition)));
                } catch (IOException e) {
                    Log.e("MMP","Error in adding inspection data: "+e.getMessage());
                }

                try { 
                    httpPost.setEntity(entity);
                    HttpResponse response = httpClient.execute(httpPost, localContext);
                    String result = EntityUtils.toString(response.getEntity());
                } catch (IOException e) {
                    Log.e("MMP","Error in handling result: "+e.getMessage());
                }

            publishProgress(i+1,ins.length);
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:55:29.200

如果是 uri 字符串，它需要文件名。谢谢@mh

```
ContentResolver cr = mContext.getContentResolver();
String[] projection = {MediaStore.MediaColumns.DATA};
Cursor cur = cr.query(Uri.parse(ins[i].image), projection, null, null, null);
if(cur != null) {
    cur.moveToFirst();
    String filePath = cur.getString(0);
    File imageFile = new File(filePath);
    if(imageFile.exists()) {
        // do something if it exists
        entity.addPart("image", new FileBody(imageFile));
    }
    else {
        // File was not found
        Log.e("MMP","Image not Found");
    }
} 
else {
    // content Uri was invalid or some other error occurred
    Log.e("MMP","Invalid content or some error occured");
} 
```

# php - PHP：如果域完全等于 [x] 然后是 [actions] 但不等于子目录/文件

> ID：13598391
> 
> 赞同：3
> 
> 时间：2012-11-28T05:25:10.273
> 
> 标签：php, equals, if-statement

我正在尝试使用 PHP 执行代码，但前提是 URL**恰好**位于网站的入口点：[http://mywebsite.com](http://mywebsite.com)。所以只在那个 URL 上，之后什么都没有。在尝试了多个 PHP IF ELSE 语句来尝试获得它之后，我感到很困惑，我觉得非常接近。

`<?php $host = $_SERVER['HTTP_HOST']; if($host == "www.mywebsite.com" or $host == "mywebsite.com") { ?> MYHTML1SHOWS <?php } else { ?> MYHTML2SHOWS <?php } ?>`

当大多数访问者访问 mywebsite.com 时，这使我成功地出现在域上，但继续处理所有后续子文件/页面/目录。这是100％不想要的。

所以我想了一个像 ELSEIF 这样的解决方法来显示 MYHTML2 来定位我的所有页面，因为它们都在国家分配的目录中： /au/ ， /asia/ ， /nz/ ， /uk/ 等。

`<?php } elseif (stripos($_SERVER['REQUEST_URI'],'/au/') !== false) { ?> HTML3 <?php } ?>`

这不起作用，但值得一试（在我以前做过的网站中使用它自己的 IF 语句，但我认为它与 PHP 中优先级更高的第一个 IF 语句冲突）。感谢任何帮助家伙，这让我很难过，但会很有用。网上没有类似的问题只以这种方式显示代码。

*（背景：我正在实施一个仅在 mywebsite.com 的入口点上显示的“国家选择器”。我已经在每个国家/地区设置了它们自己的子目录，因此如果客户没有为他们显示国家/地区选择器的目的直接转到这些地址之一）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:35:54.887

您可能正在使用 Apache 的 mod_rewrite 做一些魔术......如果没有，那可能是一个开始寻找的好地方。听起来您尝试解决的问题最好通过 Apache 完成，无论是在您的 httpd.conf 中还是（如果启用）通过 .htaccess。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

否则，`$_SERVER`变量`$_SERVER['PHP_SELF']`和`$_SERVER['REQUEST_URI']`可能对您有用。

[http://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

`$_SERVER['HTTP_HOST']`只会检查域名，而不是请求的路径。正如你所描述的，但似乎不是你想要的。

# variables - XSL 变量内存使用情况

> ID：13598392
> 
> 赞同：2
> 
> 时间：2012-11-28T05:25:17.070
> 
> 标签：variables, xslt, memory, browser

我是 XSLT 的新手。我有一个 XML 文档，我正在使用 XSL 将 XML 转换为 HTML 表。XML 是从服务器到 Web 客户端的响应。在这种情况下，它是 IE9 浏览器。XSLT 处理是由浏览器完成。“ch3”节点的数量范围从 1 到 100000。

下面是我正在做的示例代码。

在下面的 xsl 代码中，变量是在每个循环中创建的。我想知道这种创建对浏览器内存的影响。这也会对性能产生影响吗？

```
 ============XMLDoc=======
    <?xml version="1.0" encoding="ISO-8859-1"?>
    <root>
    <ch1>
      <ch2>
       <ch3 a="bosy" b="" c="5" d="nobody"/>
        ......        

     </ch2>
    </ch1>
    </root>

     ============XMLDoc=======
      ============XSLSheet=======

     <?xml version="1.0" encoding="ISO-8859-1"?>
     <xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

      <xsl:template match="root/ch1">
        ......
      <xsl:for-each select="ch1/ch">
        <xsl:variable name="color">
         <xsl:choose>
         <xsl:when test="@c = '5'">orange</xsl:when>
          <xsl:when test="@c = '4'">red</xsl:when>
         <xsl:when test="@c = '3'">white</xsl:when>
         <xsl:when test="@c = '2'">gree</xsl:when>
         <xsl:when test="@c = '1'">yellow</xsl:when>
         <xsl:when test="@c = '0'">blue</xsl:when>
        </xsl:choose>
       </xsl:variable>
         .............
     </xsl:for-each>
      .............
      <xsl-template>

    </xsl:transform>

      ============XSL Sheet======= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:28:57.737

这绝对是特定于实现的，它可能会因浏览器而异。

但是，在 for-each 循环的每次迭代之后，不再需要此上下文中的变量，因此任何自尊心的 XSLT 处理器永远不需要在内存中有 100000 个值，每次迭代后都可以释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:57:34.233

您需要自上而下而不是自下而上解决性能问题。你知道你的性能要求吗？你能衡量你目前取得的成绩吗？有没有差距，如果有，你能量化它吗？在这个阶段，您可以开始深入分析原因，例如通过进行受控实验来测量以特定方式更改设计的效果。推测特定构造是否效率低下是此过程的一部分，但获得答案的唯一方法是进行测量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:39:09.177

我认为 XSLT 变量非常便宜。一般来说，除非您确实遇到问题，否则我不会担心性能。您可能希望生成这些 100000 个节点的文档之一，以查看性能是否可以接受。

# android - Android USB 大容量存储弹出

> ID：13598396
> 
> 赞同：4
> 
> 时间：2012-11-28T05:25:42.240
> 
> 标签：android, popup, usb

当 USB 大容量存储设备连接到设备时，我正在尝试创建一个弹出窗口。我正在尝试使用**ACTION_MEDIA_MOUNTED**。我可以看到 ACTION_MEDIA_MOUNTED 正在通过日志，但我的应用程序没有弹出。这是我的代码。
提前致谢...

**MemStickReciever.class**

```
public class MemStickReciever extends BroadcastReceiver {
public final String TAG = "usbfile";
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(intent.ACTION_MEDIA_MOUNTED))
         {

        Log.d(TAG,"USB MOUNTED (1)");
        Intent intentLaunch = new Intent(context,FileExplore.class);
        Log.d(TAG,"intent has been created ");
        context.startActivity(intentLaunch);
        Log.d(TAG,"intent launched ");
    }

} 
```

**FileExplore.class**

```
 public class FileExplore extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.mburman.fileexplore"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-feature android:name="android.hardware.usb.host" />
    <uses-sdk android:minSdkVersion="12" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".FileExplore"
                  android:label="@string/app_name">
              <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            </activity>
        <receiver android:enabled="true" android:exported="true" android:name="MemStickReciever"> 
        <intent-filter> 
             <action android:name="android.intent.action.MEDIA_MOUNTED"/>
            </intent-filter> 
    </receiver>
    </application>
</manifest> 
```

**日志文件**

```
D/dalvikvm( 1552): GC_CONCURRENT freed 674K, 13% free 9676K/11015K, paused 1ms+3ms
D/Vold    ( 1504): Volume usb state changing 0 (No-Media) -> 2 (Pending)
D/Vold    ( 1504): Volume usb state changing 2 (Pending) -> 1 (Idle-Unmounted)
D/VoldCmdListener( 1504): volume mount /mnt/USB
I/Vold    ( 1504): /dev/block/vold/8:17 being considered for volume usb
D/Vold    ( 1504): Volume usb state changing 1 (Idle-Unmounted) -> 3 (Checking)
D/MountService( 1552): volume state changed for /mnt/USB (bad_removal -> checking)
I//system/bin/fsck_msdos( 1504): ** /dev/block/vold/8:17
D/MountService( 1552): sendStorageIntent Intent { act=android.intent.action.MEDIA_CHECKING dat=file:///mnt/USB (has extras) }
I//system/bin/fsck_msdos( 1504): ** Phase 1 - Read and Compare FATs
I//system/bin/fsck_msdos( 1504): Attempting to allocate 120 KB for FAT
I//system/bin/fsck_msdos( 1504): Attempting to allocate 120 KB for FAT
I//system/bin/fsck_msdos( 1504): ** Phase 2 - Check Cluster Chains
I//system/bin/fsck_msdos( 1504): ** Phase 3 - Checking Directories
I//system/bin/fsck_msdos( 1504): ** Phase 4 - Checking for Lost Files
I//system/bin/fsck_msdos( 1504): 22 files, 207512 free (25939 clusters)
I/Vold    ( 1504): Filesystem check completed OK
I/Vold    ( 1504): Device /dev/block/vold/8:17, target /mnt/USB mounted @ /mnt/secure/staging
D/Vold    ( 1504): Volume usb state changing 3 (Checking) -> 4 (Mounted)
D/MountService( 1552): volume state changed for /mnt/USB (checking -> mounted)
D/MountService( 1552): sendStorageIntent Intent { act=android.intent.action.MEDIA_MOUNTED dat=file:///mnt/USB (has extras) }
D/MediaScannerReceiver( 1969): action: android.intent.action.MEDIA_MOUNTED path: /mnt/USB
I/MediaUploader( 2289): No need to wake up
D/dalvikvm( 1969): GC_CONCURRENT freed 500K, 9% free 6646K/7239K, paused 0ms+1ms
D/MediaStoreImportService( 2419): Handle action: MediaStoreImportService.import_pending
D/MediaStoreImportService( 2419): onDestroy
E/dalvikvm( 1969): No JIT support for bytecode f0 at offsetPC 0
E/dalvikvm( 1969): JIT implementation not found
I/dalvikvm( 1969): codeGenBasicBlockJit returns negative number
D/dalvikvm( 1969): GC_CONCURRENT freed 317K, 8% free 6712K/7239K, paused 1ms+1ms
D/MediaStoreImportService( 2419): Scanner finished. Starting media store import
D/MediaStoreImportService( 2419): Handle action: MediaStoreImportService.import_pending
D/MediaStoreImportService( 2419): Handle action: MediaStoreImportService.import
I/MediaStoreImporter( 2419): Update: incremental Added music: 0 Updated music: 0 Deleted music: 0 Created playlists: 0 Updated playlists: 0 Deleted playlists: 0 Inserted playlist items: 0 Deleted playlist items: 0 Removed orphaned playlist items: 0
D/MediaStoreImportService( 2419): onDestroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:31:42.480

我刚刚从 getExternalStorageState() 而不是 intent.getAction() 中提取了意图，并且代码有效

```
 public class MemStickReciever extends BroadcastReceiver {
        public final String TAG = "usbfile";
        @Override
        public void onReceive(Context context, Intent intent) {

    //As through the logs when the usb mass storage is connected **sendStorageIntent Intent { act=android.intent.action.MEDIA_MOUNTED** was displayed in the log

     if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){

                onMemcardMounted();
                Log.d(TAG,"USB MOUNTED (1)");
                Intent intentLaunch = new Intent(context,FileExplore.class);
                intentLaunch.addFlags(Intent.FLAG_FROM_BACKGROUND);
                intentLaunch.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                Log.d(TAG,"intent has been created ");
                context.startActivity(intentLaunch);
                Log.d(TAG,"intent launched ");
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:30:57.517

您可以尝试从`BroadcastReceiver`

```
Intent intent = new Intent(context,FileExplore.class);
intent.addFlags(Intent.FLAG_FROM_BACKGROUND);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

# c++ - 集成多个 C++ 程序

> ID：13598408
> 
> 赞同：1
> 
> 时间：2012-11-28T05:26:39.227
> 
> 标签：c++, integration

所以这可能是模糊的，但坚持下去，看看你是否能理解我想要在这里得到什么。

几个月前，我使用 card.cpp、card.h、player.cpp player.h、display.h 和 display.cpp 创建了一个黑桃纸牌游戏（在 C++ 中）。

除了我自己，我的另一个同学创建了一个红心纸牌游戏（用 C++ 编写），它也使用了 card.cpp、card.h、player.cpp player.h、display.h、display.cpp 和 heart.cpp和hearts.h。

我正在尝试将这两个程序集成在一起，并添加更多功能，例如共享评分，但我真的没有前进的方向。

我制作了两个游戏对象，所以从我的 main.cpp 文件中我可以调用它们来启动它们，但我遇到的问题是显示类具有相同的确切功能，其中包含略微 tweeked 的代码。（播放器和卡片完全不同只是名称相同）所以我不能只使用一个 display.cpp。

我只是在寻找一些关于如何去做的轻微指导......

谢谢！

我的目录也如下所示

```
/proj2/Makefile
/proj2/main.cpp
/proj2/hearts/hearts.cpp
/proj2/hearts/display.cpp
/proj2/hearts/player.cpp
/proj2/hearts/card.cpp
/proj2/spades/spades.cpp
/proj2/spades/display.cpp
/proj2/spades/player.cpp
/proj2/spades/card.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:30:47.317

将声明和定义放入单独的命名空间应该会有所帮助。

你可以把

```
namespace hearts {
  /* declarations/definitions from the hearts game */
} 
```

围绕`#include`属于红心游戏的所有 .h 和 .cpp 文件（但不包括语句）中的声明和定义，以及

```
namespace spades {
  /* declarations/definitions from the spades game */
} 
```

围绕`#include`其他游戏的声明和定义（不包括声明）。

在包含两者标头的 main.cpp 中，您可以将各个类型和函数称为

```
hearts::player p;
spades::function(); 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:39:24.420

好的，上面的答案已经建议了如何更改代码以消除命名冲突。

当然，这是一个选项，但假设您有 2 组代码内置在 DLL（或共享对象）中，并且您希望能够同时使用它们，即从外部应用程序加载游戏，而无需修改任何源.

答案是使用动态库加载，这在其他方面也是一个优势。在 UNIX 系统中，您`dlopen()`可以通过指定完整路径或相对于`LD_LIBRARY_PATH`环境变量可见的路径来打开库。在 Windows 系统上，调用是 LoadLibrary()。

然后在 UNIX 中加载导出的符号（如果使用 gnu 的可见性隐藏属性，这将是专门标记的符号，如果可见性是默认值，则默认情况下会导出符号，除非另有特别标记），使用`dlsym`. 在 Windows 中，符号通常通过 .def 文件导出或使用`__declspec(dllexport)`并通过`GetProcAddress`

为此，您需要使您的游戏“可插入”到系统中，但您有巨大的优势，因为您可以稍后添加更多游戏，只需为其编写一个新库作为可插入游戏，然后可以加载它作为插件进入你的游戏引擎。

当然，您的游戏可以共享公共库。例如，红桃游戏可能会共享一副纸牌的概念，并且它们都是与惠斯特相关的游戏，因此存在跟风和取花样的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:30:58.283

处理命名冲突的常用方法是使用命名空间。

# git - 用 git 部分推送？

> ID：13598411
> 
> 赞同：1
> 
> 时间：2012-11-28T05:26:40.923
> 
> 标签：git

我是一个新的 git 用户。

在遇到一些困难之后，我能够获得一个可靠的工作流程，以便我可以从我的本地存储库推送到我的网站。

然而，一个问题出现了。我在 wamp 上开发并推送到该站点。当我推送时，我的网站数据库设置被覆盖。有没有办法选择性地使用 git 来避免这种情况。

我正在使用codeigniter，所以特别是我想第一次推送整个项目，然后避免在以后的推送中推送应用程序/配置目录

谢谢 ，

账单

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:43:24.473

数据库设置不应在版本控制中。而是将设置保存在未跟踪的文件中。当然，您可以拥有一个类似的文件来向您展示哪些选项可用。

因此，如果设置在`settings.conf`，你可以有一个跟踪文件`settings.conf.example`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:29:12.770

不，你不能。Git 跟踪的是内容而不是文件，所以你要么全部推送，要么什么都不推送。如果有您不想推送的文件，请将它们添加到 .gitignore 文件中。

# perl - 在 perl 中正确处理 Asana API 速率限制

> ID：13598415
> 
> 赞同：1
> 
> 时间：2012-11-28T05:26:46.080
> 
> 标签：perl, api, asana

如果这是非常明显的事情，我只是想念，请接受我的道歉。我有一个 perl 脚本，它以每分钟超过 100 次调用的突发速率访问 Asana restful API。当我对其进行压力测试时，我偶尔会达到他们的速率限制并看到错误 429。我从阅读 Asana 的[文档](http://developer.asana.com/documentation/#Errorsj)中知道它会返回一个“重试后”响应标头，但我终生无法弄清楚如何检索/打开/读取此标头。您可以提供的任何建议将不胜感激。

编辑：我的代码附在下面。当然，我已经删除了敏感信息，例如我的 API 密钥和项目编号，但核心代码在这里。如果我只运行一次，它每分钟不会产生足够的调用来触发错误。我必须同时运行它大约 3-4 次才能产生错误。有人可能会说“不要那样做”。虽然正确，但这个练习的重点是产生错误，所以同时运行四次是好的。

当您使用有效的 API 密钥和项目编号执行此操作时，有时您会收到此错误：

```
{"errors":[{"message":"You have made too many requests recently. Please, be chill."}]} 
```

我的问题是如何检索显然包含重试后字段以及几秒钟的标题。每次返回错误时，我可能会采取 20 秒的延迟构建，但我更愿意更优雅地处理错误。

```
#!/usr/local/bin/perl
my $counter = 0;
my $AsanaAPIcode = "...";
my $AsanaProjectID = "...";
my $AsanaFullString = 'curl -u ' . $AsanaAPIcode . ': https://app.asana.com/api/1.0/projects/' . $AsanaProjectID . '?opt_fields=archived';
my $APIoutput = `$AsanaFullString`;
print $APIoutput;
my $startTime = time;
my $totalCount = 200;
while ($counter<=$totalCount) {
  print $counter . "\n";
  $APIoutput = `$AsanaFullString`;
  print $APIoutput . "\n";
  $counter++;
}
my $endTime = time;
my $totalTime = $endTime - $startTime;
print "Total time = " . $totalTime . " seconds.\n";
print $totalCount / ($totalTime / 60) . " API calls per minute.\n";
print "end"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:44:09.993

'Retry-After' 在 HTTP 响应中，它被 curl 的反引号调用丢失。

一个笨重的解决方案是使用'curl -D'（--dump-headers），它将所有 HTTP 标头放入响应中，然后您必须对其进行解析和删除。

更好的解决方案是使用 LWP 库 (perldoc LWP::UserAgent)。显然我无法在没有 API 密钥的情况下测试此代码...我认为您可以将这些代码注入 URL（https://name:password@app.asana.com/api...）

```
use LWP::UserAgent;
use LWP::Protocol::https;
my $agent = LWP::UserAgent->new(); # check LWP docs for extra params
my $request = LWP::Request->new( 'https://app.asana.com/api/1.0/projects/' . $AsanaProjectID . '?opt_fields=archived' )
my $response = $ua->request($request);
if ($response->code == 429) {
  my $retry = $response->header('Retry-After');
  ...
} 
```

或者...您可以尝试使用 CPAN 进行 WWW::Asana 之类的操作。 [http://search.cpan.org/dist/WWW-Asana/](http://search.cpan.org/dist/WWW-Asana/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:10:27.650

有一个 CPAN 模块[WWW::Asana](https://metacpan.org/module/WWW%3a%3aAsana)，它可以正确处理速率限制响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:40:28.813

我们在使用 Klok 的 Asana 连接器时遇到了问题。我们联系了 Asana 的人员，他们愿意将“重试后”数量添加到响应正文中。因此，您现在可以从“retry_after”属性中获取它：

```
{
 "errors":[{"message":"You have made too many requests recently. Please, be chill."}],
 "retry_after":30
 } 
```

这对我们帮助很大，因为我们使用的是 Adob​​e AIR 2.x，它不允许我们访问错误响应的响应标头。

# python - 从 python 脚本在共享库上运行 gcov

> ID：13598416
> 
> 赞同：5
> 
> 时间：2012-11-28T05:26:52.420
> 
> 标签：python, c, linux, shared-libraries

我遇到了从 python 脚本在共享库上运行 gcov 的问题。

我在以下情况下构建我的库：

1.  将一组文件（file1.c、file2.c）编译成静态链接的 lib(.a)。我使用 ar 实用程序来执行此操作，并且所有文件都使用以下选项编译：

    > -static -fprofile-arcs -ftest-coverage -coverage

2.  使用其他一些文件（比如 file3.c）和上面指定的 .a 文件构建一个 .so 文件。我在编译和链接时再次使用相同的选项。

3.  在 python 脚本中加载 .so 并执行。

问题：生成的覆盖率文件仅包含 file3.c 的代码覆盖率。属于 .a 库的文件不会显示在覆盖率报告中。

在此处链接 .a 时我是否缺少任何选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:36:08.413

发现了问题。我没有拿起所有 .gcda 文件来生成报告。使用 -object-directory 选项搜索所有 gcda 文件。

[GCOV 手册页](http://gcc.gnu.org/onlinedocs/gcc/Invoking-Gcov.html#Invoking-Gcov)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T05:37:52.783

您必须确保在您的 c 代码中提供 python 包装器。

它可以通过使用[BOOST.Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)或[SWIG](http://www.swig.org)来实现。

# android - 单击按钮显示各种选项

> ID：13598417
> 
> 赞同：0
> 
> 时间：2012-11-28T05:26:55.150
> 
> 标签：android, android-layout, keypress, ontouchlistener, android-contextmenu

我想设计一个按钮，当它被点击时，我会得到各种选项，我最终从中选择一个。

这与在短信中使用该概念相同。例如：如果我们按住 a，那么我们会在单击的按钮上方/下方的小按钮中获得各种“a”的各种重音选项。

如何在 Android 中实现这一点？我必须使用上下文菜单吗？如何在小按钮中获得各种选项？为此，我是否必须使用 OnTouchlistener？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:08:46.253

查看[2.2_r1.1](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/inputmethodservice/KeyboardView.java)版本中的 KeybordView.java。那是实现键盘处理的类。请特别注意第 246 行周围的 Handler 和 openPopupIfRequired 方法，该方法会在长按时显示该键的弹出窗口。

祝你好运。

# bash - Grepping，格式化

> ID：13598421
> 
> 赞同：-5
> 
> 时间：2012-11-28T05:27:17.747
> 
> 标签：bash, shell, unix

我想创建一个 UID 和用户名的报告，格式类似于：

```
9142   jdoe
9158   jsmith
75488  msteel 
```

等等等等

来自 Unix 中的“id”命令，在我们的系统上产生如下结果：

```
% id jdoe
uid=9142(jdoe) gid=101(users) groups=101(users) 
```

此外，如果用户名不存在：

```
% id asdasdasd
id: asdasdasd: No such user 
```

我希望结果类似于（使用破折号而不是不存在的 UID）：

```
----   asdasdasd
9142   jdoe
9158   jsmith
75488  msteel 
```

非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:19:38.030

```
id $1 > temp
if [ $? -eq 0 ]
then
    cat temp | awk -F' ' '{print $1}'|awk -F'=' '{print $2}'|sed 's/(/ /g'|sed 's/)//g' >> output.txt
else
    echo "------" $1 >> output.txt
fi
rm temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:37:11.053

它不漂亮，但是：

```
sed -e 's/^uid=//;s/).*//;s/(/ /;s/^id:/----/;s/:.*//' | column -t 
```

示例输出：

```
(id; id root; id daemon; id foobar ) 2>&1 \
| sed -e 's/^uid=//;s/).*//;s/(/ /;s/^id:/----/;s/:.*//' \
| column -t

501   atomlinson
0     root
1     daemon
----  foobar 
```

# html - 如何制作具有 100% 窗口高度的部分

> ID：13598422
> 
> 赞同：3
> 
> 时间：2012-11-28T05:27:44.603
> 
> 标签：html, css

我将我的页面划分为部分标签，就像网站有多个页面一样。我的问题是我不能让每个部分都有 100% 的窗口高度，~~并且不知何故，部分之间存在间隙~~。

我希望我可以在没有任何 JavaScript 并使用百分比的情况下解决这个问题，这样它会更加流畅。

下面大致是我页面的 HTML 的样子：

```
<div id="nav">
  navigation code here
</div>

<div id="wrapper">
  <section>content</section>
  <section>content</section>
  <section>content</section>
</div> 
```

完整的 HTML 和样式可以在[http://theailona.com/doaibu找到](http://theailona.com/doaibu)

编辑：由于 Gopikrishna 和 Praveen Kumar，差距得以解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:35:27.540

### CSS修复：

这是因为`margin`of`<h1>`标签。在你的 CSS 中更新它。而且，`margin`of`<p>`标签为您提供了空白。

```
h1 {margin: 0;}
.content {overflow: hidden;} 
```

### 替代解决方案：

```
#wrapper > section {overflow: hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:36:19.240

尝试为部分添加溢出：隐藏...请按照下面提到的css操作，希望您的问题能够解决...

```
#welcome, #service, #clients 
{
    background: url("diamond-pattern.jpg") repeat scroll 0 0 transparent; 
    overflow: hidden;
}

#about, #price, #contact 
{
    background: none repeat scroll 0 0 #B8282E;
    overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:02:15.850

**在您的 CSS 中设置以下高度属性**

```
body {
    height:800px;
}

#wrapper, #welcome, #about, #service, #price, #clients, #contact {
    height:100%;
} 
```

您可以将高度更改为`body`以像素为单位的任何高度，并且 div/section 元素将拉伸到该高度的 100%。

**已编辑**

```
html,body {
    height:100%;
}

#wrapper, #welcome, #about, #service, #price, #clients, #contact {
    height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:27:31.707

请将 html、body 和 section 的高度更改为“100%”......所以你的 css 看起来像

```
html{
  height:100%;
}
body{
  height:100%;
}
section {
  min-height: 65%;
  padding: 0 0 100px 0;
  height: 100%;
} 
```

我已经尝试过使用 chrome，它对我来说很好 :) 希望这对你有帮助 :)

# javascript - 单击链接 javascript 停止所有播放 iframe 视频

> ID：13598423
> 
> 赞同：29
> 
> 时间：2012-11-28T05:27:55.720
> 
> 标签：javascript, jquery, video, iframe

我的网页中有一个 iframe 视频列表。

```
<iframe width="520" height="360" src="http://www.youtube.com/embed/2muxrT5_a6E" frameborder="0" allowfullscreen></iframe>
<iframe width="520" height="360" src="http://www.youtube.com/embed/2muxrT5_a6E" frameborder="0" allowfullscreen></iframe>
<iframe width="520" height="360" src="http://www.youtube.com/embed/2muxrT5_a6E" frameborder="0" allowfullscreen></iframe>
<a href="#" class="close">Stop all videos</a> 
```

我需要在单击链接时停止所有播放 iframe 视频`Stop all videos`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-28T06:02:00.790

试试这个方法

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">
$(function(){
    $('.close').click(function(){      
        $('iframe').attr('src', $('iframe').attr('src'));
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-03-08T12:13:54.967

重新加载所有 iframe 只是为了阻止它们是一个糟糕的主意。您应该利用 HTML5 附带的功能。

不使用 YouTube 的 iframe_API 库；你可以简单地使用：

```
var stopAllYouTubeVideos = () => { 
  var iframes = document.querySelectorAll('iframe');
  Array.prototype.forEach.call(iframes, iframe => { 
    iframe.contentWindow.postMessage(JSON.stringify({ event: 'command', 
  func: 'stopVideo' }), '*');
 });
}
stopAllYouTubeVideos(); 
```

这将停止所有 YouTube 的 iframe 视频。

您可以使用这些消息关键字来开始/停止/暂停 youtube 嵌入视频：

```
stopVideo
playVideo
pauseVideo 
```

查看以下链接以获取现场演示：

[https://codepen.io/mcakir/pen/JpQpwm](https://codepen.io/mcakir/pen/JpQpwm)

**PS-** **YouTube URL 必须具有`?enablejsapi=1`查询参数才能使此解决方案起作用。**

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-01-08T23:42:20.267

这应该会停止在页面上的所有 iframe 中播放的所有视频：

```
$("iframe").each(function() { 
        var src= $(this).attr('src');
        $(this).attr('src',src);  
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-07-01T08:10:33.960

停止意味着暂停并将视频设置为时间 0：

```
 $('iframe').contents().find('video').each(function () 
        {
            this.currentTime = 0;
            this.pause();
        }); 
```

这个 jquery 代码将完全做到这一点。

无需替换 src 属性并重新加载视频。

* * *

我在项目中使用的小功能：

```
 function pauseAllVideos() 
    { 
        $('iframe').contents().find('video').each(function () 
        {
            this.pause();
        });
        $('video').each(function () 
        {
            this.pause();
        });
    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-09T15:12:28.427

这是 2019 年的香草 Javascript 解决方案

```
const videos = document.querySelectorAll('iframe')
const close = document.querySelector('.close')

close.addEventListener('click', () => {
   videos.forEach(i => {
      const source = i.src
      i.src = ''
      i.src = source
   })
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-21T08:09:43.897

我稍微编辑了上面的代码，下面的代码对我有用.......

```
<script>
function stop(){<br/>
       var iframe = document.getElementById('myvid');<br/>
     var iframe1 = document.getElementById('myvid1');<br/>
      var iframe2 = document.getElementById('myvid2');<br/>
    iframe.src = iframe.src;<br/>
    iframe1.src=iframe1.src;<br/>
    iframe2.src=iframe2.src;<br/>
}<br/>

</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-14T10:57:21.783

```
$("#close").click(function(){
  $("#videoContainer")[0].pause();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-13T06:39:36.593

在 jQuery 中，您可以使用以下代码**停止 iframe 或 html 视频。**
这适用于同一页面上的单个或多个视频。

```
var  videos = document.querySelectorAll('iframe');

$(".video-modal .fa-times").on("click", function () {
        videos.forEach(i => {
          let source = i.src;
          i.src = '';
          i.src = source;
       });
        $(".video-modal").css("display", "none");
        return false;
    });

}) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-28T05:43:02.340

再次重新加载所有 iframe 以停止视频

```
<a href="#" class="close" onclick="stop();">Stop all videos</a>

function stop(){
    var iframe = document.getElementById('youriframe');
    iframe.src = iframe.src;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-06-23T09:30:38.843

您可以通过迭代修改此代码

```
/**
 * Stop an iframe or HTML5 <video> from playing
 * @param  {Element} element The element that contains the video
 */
var stopVideo = function ( element ) {
    var iframe = element.querySelector( 'iframe');
    var video = element.querySelector( 'video' );
    if ( iframe ) {
        var iframeSrc = iframe.src;
        iframe.src = iframeSrc;
    }
    if ( video ) {
        video.pause();
    }
}; 
```

所有者：[https](https://gist.github.com/cferdinandi/9044694) ://gist.github.com/cferdinandi/9044694 也在这里（由我发布）：[如何完全破坏引导模式窗口？](https://stackoverflow.com/questions/13177426/how-to-destroy-bootstrap-modal-window-completely/44717827#44717827)

# extjs - ExtJS 3.4 - 连续的组合框搜索/存储重新加载

> ID：13598424
> 
> 赞同：1
> 
> 时间：2012-11-28T05:28:03.937
> 
> 标签：extjs, combobox

我有一个`remote`组合框，允许在用户输入时进行过滤。我的问题是，当用户键入时，后来的搜索比早期的搜索返回得更快（由于更精细），但是当早期的搜索最终返回时被替换。也就是说，即使用户输入了更精确的搜索，他们也会看到更早的、不那么精确的搜索的结果。

我不知道这里的错误是否在于组合框或其内部存储（或我：P），但在我看来，其中一个可能应该忽略对任何较旧请求的响应，一旦他们发出了新的一个。

我很惊讶没有发现其他人发生这种情况的任何信息。我会认为上述情况 - 键入并不断完善搜索，从而加快查找速度 - 会相当普遍。不过，说实话，我真的不知道要搜索什么。此外，我在文档中错过了一个简单的配置选项来实现这种效果。

我意识到我可以解决这个问题`minChars`并`queryDelay`在*很大程度上*消除这个问题，但事实仍然是它仍然有可能发生。

有没有其他人已经/解决了这个问题？

**编辑：** 根据要求，展示此行为的组合框示例：

```
{
    xtype: 'combo',
    mode: 'remote',

    pageSize: 300, 
    minChars: 3,
    queryDelay: 200,
    pageSize: 10,

    hideTrigger: true,
    selectOnFocus: true,
    enableKeyEvents: true,
    typeAhead: false,
    triggerAction: 'all',
    forceSelection: true,
    listEmptyText: 'No results',

    valueField: 'id',
    displayField: 'value',
    store: {
        url: '<url>',
        reader: new Ext.data.JsonReader({
            root: 'rows',
            totalProperty: 'totalCount',
            fields: ['id', 'value']
        })
    }
} 
```

虽然我认为这个问题实际上取决于正在进行的查询和正在加载的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:00:30.157

如果您可以提供您尝试过的代码，那将会很有帮助。

1.  您是否使用 autoLoad:true 加载您的商店，
2.  或使用 ajax 加载到变量中的本地数据

可能是数据被附加而不是加载到存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:13:36.227

原来这是 Ext JS 3.4.0 的一个问题，在 3.4.1 中已修复。

# ruby - 用于字符串文字的 Ruby 'OR'

> ID：13598426
> 
> 赞同：0
> 
> 时间：2012-11-28T05:28:10.407
> 
> 标签：ruby, string, compare

我将如何重新考虑这样的事情？

```
response = "yes"

if response == "yes" or response == "y"
  puts "Do Something"
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:29:38.260

```
if %w(yes y).include?(response) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T05:37:32.937

嗯，你可以像下面这样使用，我希望它对你有帮助

**样本**

如果@response == 'R' || @response == 'r'

如果你放**OR**那么它会告诉你一个错误

# c# - 如何在asp.net c#中的运行时动态创建标签到网页上的特定位置

> ID：13598430
> 
> 赞同：2
> 
> 时间：2012-11-28T05:28:28.940
> 
> 标签：c#, asp.net

我正在创建一个网页，并且我想在标签上显示数据。数据将通过 SQL 连接显示。我知道如何创建标签，但我不知道如何将它们创建到网页的特定位置。

谢谢，

周杰伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:36:39.327

```
<div id="div1" runat="server"></div>

// Create a Label object
Label dynamicLabel = new Label();
div1.Controls.Add(dynamicLabel ); 
```

* * *

在此代码中添加一个 css 类..

```
<div id="div1" class="location" runat="server"></div> 
```

并在您的 styles.css 中添加此代码...

```
.location
{
margin-left: 30px
margin-top: 30px
} 
```

您还可以使用其他属性...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T05:30:29.200

你可以把`label in desired place in html by making that html element server accessible`. 您可以将 id 放在该 html 标记中并使其 runat = "sever" 以使 html 元素服务器可访问。

**在 html 中**

```
<div id="div1" runat = "sever" ></div> 
```

**在后面的代码中。**

```
div1.Controls.Add(yourlabel); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T05:36:11.083

```
<div id="div1" runat = "sever" ></div>

// Create a Label object
Label dynamicLabel = new Label();
div1.Controls.Add(dynamicLabel ); 
```

# css - 如何使用css2从服务器加载字体系列

> ID：13598431
> 
> 赞同：-2
> 
> 时间：2012-11-28T05:28:48.843
> 
> 标签：css

我想使用 css2 从服务器加载字体。我想在服务器上保留字体。我不想使用 CSS3，因为并非所有浏览器都支持它，所以我该如何使用 css2 来做到这一点？

```
@font-face 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T05:44:47.937

```
<style type="text/css">
@font-face {
    font-family: 'lucida_sans_unicoderegular';
    src: url('font/lsansuni-webfont.eot');
    src: url('font/lsansuni-webfont.eot?#iefix') format('embedded-opentype'),
         url('font/lsansuni-webfont.woff') format('woff'),
         url('font/lsansuni-webfont.ttf') format('truetype'),
         url('font/lsansuni-webfont.svg#lucida_sans_unicoderegular') format('svg');
    font-weight: normal;
    font-style: normal;

}
#menu {
    font-family: 'lucida_sans_unicoderegular',Times New Roman, Times, serif;
}
</style> 
```

lsansuni-webfont.eot ,lsansuni-webfont.wof,.. 将此文件放在字体文件夹中

使用此生成器创建 @fontface

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:32:09.887

### [它是什么？](http://www.font-face.com/)

`@font-face`是一个 css 规则，如果用户没有安装该字体，它允许您从服务器下载特定字体以呈现网页。这意味着网页设计师将不再需要遵守用户预先安装在其计算机上的一组特定的“网络安全”字体。

### [如何使用：](https://developer.mozilla.org/en-US/docs/CSS/@font-face)

### 句法

```
@font-face {
  font-family: <a-remote-font-name>;
  src: <source> [,<source>]*;
  [font-weight: <weight>];
  [font-style: <style>];
} 
```

### 例子

```
@font-face {
  font-family: MyHelvetica;
  src: local("Helvetica Neue Bold"),
  local("HelveticaNeue-Bold"),
  url(MgOpenModernaBold.ttf);
  font-weight: bold;
} 
```

### 兼容性：

IE 6、7、8、9、10、Firefox、Chrome 都支持它。

# ios5 - 如何在 iOS 应用程序的通用应用程序中修复 iPad 的风景？

> ID：13598438
> 
> 赞同：2
> 
> 时间：2012-11-28T05:29:52.977
> 
> 标签：ios5

通过使用 Xcode4.5 我开发了通用应用程序，我只想在横向模式下制作 iPad 版本。

在这里我累了

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad && UIInterfaceOrientationIsLandscape(interfaceOrientation)) 
    {
        return YES;
    } else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
    {
        return YES;
    }

    return NO;    
} 
```

尽管我已经尝试过上面的代码，但它确实出现在纵向模式下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:28:01.167

你是在 ios5 还是 ios6 中测试这个？在 ios6 中， shouldAutoRotate 方法被忽略。你需要使用

```
-(NSUInteger) supportedInterfaceOrientations {

} 
```

和

```
-(BOOL) shouldAutoRotate {
} 
```

您可以在此处找到更多信息：[iOS 6 自动旋转混淆](https://stackoverflow.com/questions/12546498/ios-6-auto-rotate-confusion)

# php - 在 WordPress 中访问用于帖子格式的类别的问题

> ID：13598444
> 
> 赞同：0
> 
> 时间：2012-11-28T05:30:37.747
> 
> 标签：php, wordpress

我正在创建单独的模板，并且我正在尝试基于类别进行发布查询，但由于某种原因，它似乎不起作用。如果你能帮我一把，那就太好了。不管是什么类别，我都会收到每一篇文章。

代码：

```
$args = array( 'numberposts' => 100000000000, 'offset'=> 1, 'category' => 'Uncategorized' );
$lastposts = get_posts( $args );
foreach($lastposts as $post) : setup_postdata($post); ?>
    <!--<h2><a href="<?php //the_permalink(); ?>"><?php //the_title(); ?></a></h2>-->
    <?php get_template_part( 'content', get_post_format() ); ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:44:41.430

阅读[get_post](http://codex.wordpress.org/Template_Tags/get_posts)你会在那边看到很多注释，其中一个说

**注意**：category参数需要是类别的ID，而不是类别名称。

因此，为您的类别“未分类”提供类别 ID。

# mysql - 添加列以说明联合结果来自哪个表

> ID：13598450
> 
> 赞同：0
> 
> 时间：2012-11-28T05:31:02.207
> 
> 标签：mysql, union

`UNION`当我使用命令搜索多个表时，如何选择每个结果来自哪个表？

例如，如果两个表都有结果，我如何添加一个列来说明（或区分）它是来自 tableA 还是 tableB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:32:56.383

试试这个，只需为表名添加一个*虚拟列*。

```
SELECT *
FROM
(
    SELECT *, 'tableA' as tableName FROM tableA
    UNION ALL
    SELECT *, 'tableB' as tableName FROM tableB
    UNION ALL
    SELECT *, 'tableC' as tableName FROM tableC
) s
WHERE   colName = 'hello' 
```

# tridion - Tridion DynamicContent.Query 按组件模板搜索

> ID：13598452
> 
> 赞同：4
> 
> 时间：2012-11-28T05:31:07.127
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在尝试使用某个组件模板呈现代理数据库中的所有组件演示文稿。到目前为止的查询代码如下：

```
using Tridion.ContentDelivery.DynamicContent;
using Tridion.ContentDelivery.DynamicContent.Query;

ItemTemplateCriteria CTCriteria = new ItemTemplateCriteria(1111);
PublicationCriteria pubCriteria = new PublicationCriteria(10);
AndCriteria finalCriteria = new AndCriteria(pubCriteria, CTCriteria);

Response.Write("<h1>START</h1>");

Query q = new Query();
q.Criteria = finalCriteria;

string[] result = q.ExecuteQuery();

if (result != null && result.Length > 0)
{
    foreach (string r in result)
    {
        Response.Write("<h1>" + r + "</h1>");
    }
}
else {
    Response.Write("Result is null or 0-length.");
}
Response.Write("<h1>END</h1>"); 
```

我不断得到`null`结果。我确实有动态内容发布设置，`cd_storage_conf.xml`并且在 Broker 数据库中发布了一些组件演示文稿。

我从[这个文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_708AA488429D4457AC303DD121B22183#url=/LiveContent/web/search.xql%3Fc%3Dt%26pub%3DSDL_Tridion_2011_SPONE%26lang%3Den-US%26action%3Dsearch%26query%3DBroker&sid=lcSearch.runSearch1354014111542&currentQuery=Broker&currentScope=&eventType=lcContent.loadDocpub_concept_37EFA836EC214C71BF8EA0B8F6603162&addHistory=true&filename=PublicationCriteria.xml&docid=pub_concept_37EFA836EC214C71BF8EA0B8F6603162&inner_id=&tid=&query=&scope=&resource=)的理解是，我应该能够使用这种方法检索*相关*的组件 URI。

**我的问题**：

1.  我对`Query`班级能力的理解是否正确？
2.  我错过了什么，配置和代码方面的吗？
3.  还有其他方法可以通过组件模板检索代理内容吗？

**编辑**：

附加信息：关于`ItemTemplateCriteria`，我只假设这用于按组件模板搜索记录。我假设是因为还有另一个标准类称为`PageTemplateCriteria`. 如果这个假设无效，请纠正我。

**编辑**：

附加信息：我检查了代理数据库中的`COMPONENTS`,`SCHEMA`和`TEMPLATES`表，但没有找到已发布的组件。默认情况下`cd_storage_conf.xml`，发布的内容必须发送到代理。作为参考，这是我的配置：

```
<Publication Id="57" defaultStorageId="brokerdb" cached="false">
    <Item typeMapping="ComponentPresentation" storageId="brokerdb" cached="false" />
    <Item typeMapping="BinaryMeta" cached="true" storageId="brokerdb"/>
    <Item typeMapping="BinaryVariant" cached="true" storageId="brokerdb"/>
    <Item typeMapping="Binary" storageId="defaultFile" cached="true"/> 
    <Item typeMapping="ComponentMeta" cached="true" storageId="brokerdb"/>
    <Item typeMapping="ComponentPresentationMeta" cached="true" storageId="brokerdb"/>
    <Item typeMapping="ItemMeta" cached="true" storageId="brokerdb"/>
    <Item typeMapping="LinkInfo" cached="true" storageId="defaultDataFile"/>
    <Item typeMapping="DynamicLinkInfo" cached="true" storageId="defaultDataFile"/>
    <Item typeMapping="Page" cached="true" storageId="defaultFile"/> 
    <Item typeMapping="PageMeta" cached="true" storageId="defaultDataFile"/>
    <Item typeMapping="Reference" storageId="brokerdb"/>
    <Item typeMapping="Schema" storageId="brokerdb"/>
</Publication> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T12:17:44.897

仔细检查您的`cd_storage_conf.xml`和数据库以检查项目是否存储在那里。如果您的数据将进入文件系统，它将无法查询。

具体来说，我认为`ComponentPresentationMeta`必须去数据库才能使这种情况起作用。

Also check your `cd_licenses.xml` file, if it is expired, if it is (even if the `cd_storage_conf.xml` is correct), the items will end up on the file system.

# grails - 使用字段插件修改 grails 脚手架模板时出现异常

> ID：13598453
> 
> 赞同：0
> 
> 时间：2012-11-28T05:31:25.743
> 
> 标签：grails, twitter-bootstrap, scaffolding

我正在尝试使用字段插件修改字段脚手架代码。我也安装了 twitter 引导程序。现在我想在一行中显示 2 个字段。我在 _form.gsp 模板文件中执行了以下操作：

```
private renderFieldForProperty(p, owningClass,counter, prefix = "") {
    boolean hasHibernate = pluginManager?.hasGrailsPlugin('hibernate')
    boolean display = true
    boolean required = false
    if (hasHibernate) {
        cp = owningClass.constrainedProperties[p.name]
        display = (cp ? cp.display : true)
        required = (cp ? !(cp.propertyType in [boolean, Boolean]) && !cp.nullable && (cp.propertyType != String || !cp.blank) : false)
    }
    if (display) {
        if(counter%2==0){
            %><div class="row-fluid"><%
            }
         %>
         <f:field bean="${domainClass.propertyName}" property="${p.name}"/>
<% 
counter++
if(counter%2==0){
            %></div><%
}
 }   } %> 
```

现在生成的代码如下：

```
<div class="row-fluid">
         <f:field bean="patient" property="familyName"/>

         <f:field bean="patient" property="firstName"/>
</div> 
```

当我尝试在浏览器中查看代码时，出现此异常：

```
URI
    /patient/create
Class
    org.springframework.beans.NotReadablePropertyException
Message
    Invalid property 'familyName' of bean class [java.lang.String]: Bean property 'familyName' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter? 
```

我想我做错了什么，对吗？我怎么能解决这个问题？

谢谢， 费拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:16:53.990

似乎字段标签无法解析“耐心”bean。根据您的脚手架模型，您可能需要将“患者”（您的 bean）包含在 中`${}`，或者在您的页面中定义一个名为“患者”的变量。

# php - 使用 .htaccess 修改 URL

> ID：13598460
> 
> 赞同：0
> 
> 时间：2012-11-28T05:31:51.957
> 
> 标签：php, .htaccess, url-rewriting

我想更改 url 例如[http://www.mysite.com/cgshop/admin/index.php?route=common/home](http://www.mysite.com/cgshop/admin/index.php?route=common/home)会变成[http://www.mysite.com/cgshop/cp/index.php?路线=普通/家](http://www.mysite.com/cgshop/cp/index.php?route=common/home)。请帮我弄清楚这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:45:14.143

这应该可以得到你想要的。

它测试 URI 是否以开头，`/cgshop/admin/`然后捕获其余部分，以便它可以使用 301 重定向到新的 url。这`QSA`意味着它还将携带查询字符串（之后的所有内容`?`）。

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/cgshop/admin/.*$
RewriteRule ^cgshop/admin/(.*)$ /cgshop/cp/$1 [R=301,L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:41:31.293

```
RewriteEngine On
RewriteRule ^cgshop/cp/.*$ cgshop/admin/$1 
```

尝试这个.......

# html - 如果我还设置填充，最小高度设置为 100% 将导致滚动条

> ID：13598461
> 
> 赞同：2
> 
> 时间：2012-11-28T05:31:59.383
> 
> 标签：html, css

我有一个容器，它从上到下创建一个彩色列向下页面。我正在使用下面的 CSS。此代码将导致出现垂直滚动条，但是如果我删除填充属性它工作正常。它似乎正在将填充添加到高度。我希望在使用边距时会这样，因为它在容器之外，但填充在它里面，据我所知，它不应该影响它的大小。这个容器没有父元素，只包含一个单词作为内容。

如何在保留填充且无需创建任何其他子元素的情况下使其达到 100% 高度？先感谢您。

```
#container
{
    background-color : #eee;
    max-width : 910px;
    min-height : 100%;
    padding : 65px 15px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T05:36:45.090

您可以添加`box-sizing: border-box;`到容器中以获得所需的结果；

[http://jsfiddle.net/Svkp8/](http://jsfiddle.net/Svkp8/)

这是steveax 在评论中提供的Paul Irish的[详细文章。](http://paulirish.com/2012/box-sizing-border-box-ftw/)`box-sizing`

# android - 没有互联网连接时活动关闭

> ID：13598472
> 
> 赞同：2
> 
> 时间：2012-11-28T05:33:04.623
> 
> 标签：android, json, connection, forceclose

当没有互联网连接时，我的活动会被强制关闭。如何防止这种情况？我正在考虑向用户显示一条消息，如果没有连接，则没有互联网连接。我应该通过哪些方式更改代码？提前致谢

```
public class Myclass extends BaseActivity {

private String[] imageUrls;

private DisplayImageOptions options;

private InputStream is;

private String result;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.ac_image_grid);

    imageUrls = new String[1000];

    try{

        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(D.url+"gal.php");

        List nameValuepairss = new ArrayList(1);
        // adding attributes to List 
        nameValuepairss.add(new BasicNameValuePair("type","gal_living"));

       httppost.setEntity(new UrlEncodedFormEntity(nameValuepairss));
        HttpResponse response = httpclient.execute(httppost); 
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        Log.e("log_tag", "connection success username");

}catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
        Toast.makeText(getApplicationContext(), "fail1", Toast.LENGTH_SHORT).show();

}
//convert response to string
try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");

        }
        is.close();

        result=sb.toString();
}catch(Exception e){

       Log.e("log_tag", "Error converting result :::"+e.toString());
   // Toast.makeText(getApplicationContext(), "fail1", Toast.LENGTH_SHORT).show();

}
try{

    JSONArray jArray = new JSONArray(result);
    int arrayLength=jArray.length();
    final String url[]=new String[arrayLength];

    for(int i=0;i<arrayLength;i++){
           JSONObject json_data = jArray.getJSONObject(i);

          url[i]=json_data.getString("url");
    }
    List<String> urls = new ArrayList<String>();
    urls.addAll(Arrays.asList(url));
    imageUrls = urls.toArray(new String[0]);

} catch(JSONException e){
    Log.e("log_tag", "Error parsing data:::::again? "+e.toString());
    }   options = new DisplayImageOptions.Builder()
        .showStubImage(R.drawable.stub_image)
        .showImageForEmptyUri(R.drawable.image_for_empty_url)
        .cacheInMemory()
        .cacheOnDisc()
        .build();
    GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter());
    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            startImageGalleryActivity(position);
        }
    });
}

private void startImageGalleryActivity(int position) {
    Intent intent = new Intent(this, ImagePagerActivity.class);
    intent.putExtra(Extra.IMAGES, imageUrls);
    intent.putExtra(Extra.IMAGE_POSITION, position);
    startActivity(intent);
}

public class ImageAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
        } else {
            imageView = (ImageView) convertView;
        }

        imageLoader.displayImage(imageUrls[position], imageView, options, new SimpleImageLoadingListener() {
            @Override
            public void onLoadingComplete(Bitmap loadedImage) {
                Animation anim = AnimationUtils.loadAnimation(LivingGrid.this, R.anim.fade_in);
                imageView.setAnimation(anim);
                anim.start();
            }
        });

        return imageView;
    }}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:36:03.110

1.  将所有与 Internet 相关的代码移动到`AsyncTask`. 如果您不这样做，此应用程序将在任何 Android 4.0+ 设备上立即崩溃。
2.  添加自由错误检查——即如果互联网连接失败，不要尝试从中读取。
3.  从onCreate 开始`AsyncTask`，并`onPostExecute`使用获取的结果更新您的 UI，或者在失败时显示一条消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:37:04.857

试试这个。

这将告诉您是否已连接到网络：

```
boolean connected = false;
ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    if(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED || 
            connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == NetworkInfo.State.CONNECTED) {
        //we are connected to a network
        connected = true;
    }
    else
        connected = false; 
```

警告：如果您连接到不包括互联网访问或需要基于浏览器的身份验证的 WiFi 网络，则已连接仍为 true。

```
you will need this permission in your manifest: <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

只需使用此功能检查 Internet 连接是否可用：

```
/**
   * Checks if the device has Internet connection.
   * 
   * @return <code>true</code> if the phone is connected to the Internet.
   */
    public static boolean checkNetworkConnection(Context context)
    {
        final ConnectivityManager connMgr = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo wifi =connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        final android.net.NetworkInfo mobile =connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if(wifi.isAvailable()||mobile.isAvailable())
            return true;
        else
            return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:38:02.710

采用`ConnectivityManager`

```
ConnectivityManager connection =  Context.getSystemService(Context.CONNECTIVITY_SERVICE);

NetworkInfo currentConnection = connection.getActiveNetworkInfo();

if(currentConnection != null && currentConnection.isConnected())
{
  // You have a network connection
}
else
{
   // No Network connection
} 
```

不要忘记

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

额外的：

> 您不应该在主线程中执行任何网络操作，否则您将获得 ANR（Android 无响应）对话框。相反，使用`AsyncTask` and`Handler`从后台线程访问主线程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T05:38:15.690

我认为您可以在第一个 catch 子句中添加一个 return。因为虽然你已经捕获了 Http Connection 异常，但是下面的代码仍然会被执行。那时，“is”为空，所以从“is”读取会导致崩溃。

```
try{

    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(D.url+"gal.php");

    List nameValuepairss = new ArrayList(1);
    // adding attributes to List 
    nameValuepairss.add(new BasicNameValuePair("type","gal_living"));

   httppost.setEntity(new UrlEncodedFormEntity(nameValuepairss));
    HttpResponse response = httpclient.execute(httppost); 
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    Log.e("log_tag", "connection success username");

}catch(Exception e){
    Log.e("log_tag", "Error in http connection "+e.toString());
    Toast.makeText(getApplicationContext(), "fail1", Toast.LENGTH_SHORT).show();

    return; // ADD return HERE!!!!!!!!!!!!
} 
```

# api - 为什么即使我提供了密钥，我也无法访问谷歌自动完成 API

> ID：13598477
> 
> 赞同：0
> 
> 时间：2012-11-28T05:33:39.807
> 
> 标签：api, google-maps

我试图访问

[https://maps.googleapis.com/maps/api/place/autocomplete/xml?input=Amoeba&types=establishment&location=37.76999,-122.44696&radius=500&sensor=true&key=AIzaSyAqTo6fgd8zK8rVNxvSO8WsEkBxRxd3PIE](https://maps.googleapis.com/maps/api/place/autocomplete/xml?input=Amoeba&types=establishment&location=37.76999,-122.44696&radius=500&sensor=true&key=AIzaSyAqTo6fgd8zK8rVNxvSO8WsEkBxRxd3PIE)

我被拒绝访问。

如您所见，我提供了一些关键 API。也许我提供了不同的钥匙

这是问题所在。

我从 [https://code.google.com/apis/console/#project:299025262955:services获得了我的密钥](https://code.google.com/apis/console/#project:299025262955:services)

我启用了所有这些服务

Ad Exchange 买方 API 礼貌限制：1000 个请求/天

```
Google Maps API v2          Courtesy limit: 25,000 requests/day • Pricing
Google Maps API v3          Courtesy limit: 25,000 requests/day • Pricing
Google Maps Coordinate API          Courtesy limit: 1,000 requests/day
Google Play Android Developer API           Courtesy limit: 15,000 requests/day
Google+ API             Courtesy limit: 10,000 requests/day
Static Maps API             Courtesy limit: 25,000 requests/day • Pricing 
```

此外，我在某处读到谷歌地图 API 3 根本不使用密钥来进一步增加混乱。

那么，无论如何我应该使用什么 API 密钥？谷歌 API 密钥？谷歌地图 API 密钥？谷歌地图第 3 版 API 密钥？什么？

我直接访问它，所以没有推荐人。是这个问题吗？推荐人的设置是：

推荐人：
允许任何推荐人

我想知道这是否包括空白推荐人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:29:35.983

您指定的密钥似乎是错误的。我把钥匙换成我的，然后它就起作用了。

![在此处输入图像描述](../Images/c6ca9a980a9eeefb7b31d4538900a3f6.png)

* * *

您应该使用“API 访问”页面的“简单 API 访问”中显示的密钥。 ![在此处输入图像描述](../Images/e7348e96c254072a391e15392ab3bf3d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:41:21.807

我发现了问题所在。谷歌自动完成是谷歌地方而不是谷歌地图的一部分。所以我需要打开谷歌地方功能。

它仍然很糟糕，因为它没有告诉我找到的地方的纬度和经度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-14T09:56:01.227

使用 google place API 可能会产生费用。您每天只能请求 1000 个请求，如果您验证信用卡，这将扩展到每天 25000 个请求。超出此限制将导致您收费，否则用户将不会收到服务的响应。注意细节和谷歌政策。祝你好运

# iphone - 在xcode中将图像添加到导航栏？

> ID：13598478
> 
> 赞同：2
> 
> 时间：2012-11-28T05:33:50.937
> 
> 标签：iphone, xcode, uinavigationbar

我在 xib 中添加了导航栏和导航项。现在我需要在导航栏的左侧添加图像，但它没有被添加。这是我正在处理的代码：

```
- (void)viewDidLoad
{
UIImage *image = [UIImage imageNamed: @"i_launcher.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
    self.navigationItem.titleView = imageView;
    [imageView release];
} 
```

我不明白为什么没有添加图像。我怎样才能添加它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-24T15:52:27.233

看起来这是一个已被接受的老问题。但是，我想补充：

至少在 Xcode 5 中，**如果您使用情节提要**，则可以通过将空视图拖动到标题区域，然后将 ImageView 放置在空视图中来将图像添加为导航栏的标题。

以下屏幕截图应该让您了解它的外观： ![故事板屏幕截图描绘了 navigationBar.titleView 内空视图内的 imageView](../Images/a4af4f94f602b46c24b3df8a143fa7d6.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T05:49:17.633

```
@implementation UINavigationBar (CustomImage) -(void)drawRect:(CGRect)rect { 

     CGRect currentRect = CGRectMake(0,0,100,45); 
     UIImage *image = [UIImage imageNamed:@"ic_launcher.png"]; 
     [image drawInRect:currentRect]; 
} 
@end 
```

**更新**

只需在您的方法中添加此代码`viewDidLoad:`..

```
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourimage.png"]];
UIBarButtonItem * item = [[UIBarButtonItem alloc] initWithCustomView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourimage2.jpg"]]];    
self.navigationItem.rightBarButtonItem = item; 
```

并且如果你想在 NavigationBar 的背景中直接设置图像，那么使用下面的线......

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"i_launcher.png"] forBarMetrics:UIBarMetricsDefault]; 
```

另请参阅此链接[how-to-add-a-customized-image-button-to-uinavigationbar-in-iphone-sdk](https://stackoverflow.com/questions/1239599/how-to-add-a-customized-image-button-to-uinavigationbar-in-iphone-sdk)

我希望这可以帮助你...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T06:05:56.747

```
- (void)viewDidLoad

    {

       UIImage *image = [UIImage imageNamed:@"Your Image"];
       UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
       imageView.frame = CGRectMake(5, 10, 72, 19);
       [self.navViewController.navigationBar addSubview:imageView];
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T06:54:56.830

如果您想在导航栏中的特定点设置您的图像，那么您可以创建一个视图，然后将您的图像添加到视图中，调整您的图像框架，然后将此视图添加到您的导航栏。

```
UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
UIImageView *image = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Default.png"]];
[image setFrame:CGRectMake(0, 0, 44, 44)];
[view addSubview:image];
[self.navigationController.navigationBar addSubview:view]; 
```

如果您要从 xib 添加 NavBar，那么只需在 xib`IBOutlet`中`UINavigationBar`连接它即可

```
[myNavigationBar addSubview:view]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-04T09:36:22.637

**`For Swift 4:`**

```
override func viewDidAppear(_ animated: Bool) {
        // 1
        let nav = self.navigationController?.navigationBar

        // 2
        nav?.barStyle = UIBarStyle.black
        nav?.tintColor = UIColor.yellow

        // 3
        let imageView = UIImageView(frame: CGRect(x: 0, y: 0, width: 40, height: 40))
        imageView.contentMode = .scaleAspectFit

        // 4
        let image = UIImage(named: "Apple_Swift_Logo")
        imageView.image = image

        // 5
        navigationItem.titleView = imageView
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T05:43:27.880

尝试设置**imageView.frame**也请交叉检查正确初始化的**图像**

```
UIImage *image = [UIImage imageNamed: @"i_launcher.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
imageView.frame.origin.x = 30.0; // You will have to find suitable values for the origin
imageView.frame.origin.y = 5.0;
self.navigationItem.titleView = imageView;
[imageView release]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T05:46:31.907

你的代码看起来不错。但是不知道为什么需要在xib中添加导航栏和item。如果您创建自己的从 UIViewController 派生的视图控制器，它包含导航栏。您可以尝试从 xib 中删除自己添加的导航栏和项目，看看会发生什么。

如果要在基于视图的应用程序的第一个视图上显示导航栏，则需要修改应用程序类代码，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];

    // REMOVE THIS LINE !!!!!!!!!!!!!
    //self.window.rootViewController = self.viewController;

    // ADD BELOW TWO LINES !!!!!!!!!!!!!!!!!!!!!!!
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = nav;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

我刚刚做了如下测试：

1.  创建一个新的基于单视图的项目。
2.  无需任何修改即可运行。它将显示一个空屏幕。
3.  在 application.m 文件中修改 didFinishLaunchingWithOptions() 。
4.  在 viewcontroller.m 中，添加以下行。

    -(void)viewDidLoad { [超级 viewDidLoad]; UIImageView *view = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)]; view.image = [UIImage imageNamed:@"info.png"]; self.navigationItem.titleView = 视图；}

5.  现在再次运行。您将看到一个以图像为标题的导航栏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-28T06:36:20.267

我希望这会对你有所帮助。如果不起作用意味着检查您的图像名称是否正确。

```
UIImage *yourimage = [UIImage imageNamed: @"i_launcher.png"];

UIButton *buttonBarButton = [ UIButton buttonWithType:UIButtonTypeCustom];
buttonBarButton.frame = CGRectMake(0, 0,yourimage.size.width,yourimage.size.height);
[buttonBarButton setBackgroundImage:yourimage forState:UIControlStateNormal];
[buttonBarButton addTarget:nil action:nil forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *buttonBarButtonItem = [[[UIBarButtonItem alloc]initWithCustomView:buttonBarButton] autorelease];
self.navigationItem.leftBarButtonItem = buttonBarButtonItem; 
```

如果您希望添加操作意味着：

```
[buttonBarButton addTarget:self action:@selector(your function) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-19T15:40:47.240

要在移动到另一个控制器之间隐藏/显示图像，请执行此操作。相应地调整 CGRectMake 尺寸。

将此添加到您的头文件中：

```
@property (weak, nonatomic) UIImageView *navBarLogo; 
```

将此添加到您的 .m 控制器文件中：

```
- (void)viewWillAppear:(BOOL)animated {

    UIImage *image = [UIImage imageNamed:@"image_name.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(53, 7, 210, 30);

    self.navBarLogo = imageView;

    [self.navigationController.navigationBar addSubview:imageView];

}

- (void)viewWillDisappear:(BOOL)animated {

    [self.navigationController.navigationBar sendSubviewToBack:self.navBarLogo];
} 
```

# c++ - 如何初始化所有元素为 0 的二维动态指针内存数组

> ID：13598481
> 
> 赞同：2
> 
> 时间：2012-11-28T05:34:17.563
> 
> 标签：c++

我想将二维数组的值初始化为 0。但它似乎不起作用。我可以在构造函数中将我的 **array 的值初始化为 0。如果是，如何。我的代码是。

```
#include <iostream>
using namespace std;

int main(){
int row, col;
cin>>row;
cin>>col;
int **array=new int*[row];
        for (int i=0; i<row; i++){
            array[i]=new int[col];
        }
            for (int i=0; i<row;i++){
                for (int j=0; j<col; j++){
                    array[i][j]={'0'};
                    cout<<array[i][j]<<" ";
                }
                cout<<endl;
            } 
```

}

有人可以进一步解释如果我必须用其他元素替换数组中的 ith elem，我将如何处理内存分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:39:20.413

你可能想要`array[i][j]=0;`. 你为什么使用`char`type `'0'`？但是，有一个更简单的方法：`array[i]=new int[col]();`，只需添加`()`值初始化每一列。

还有一种更好的方法：

```
std::vector<std::vector<int>> array(row, std::vector<int>(col)); 
```

对于您的第一条评论，您需要创建一个具有新大小的新数组，复制所有数据，然后删除旧的二维数组。

对于您的第二条评论，这是一个示例：

```
struct A
{
    int **array;
    A(int row, int col) : array(new int*[row])
    {
       for (int i=0; i < row; i++)
       {
          array[i]=new int[col]();
       }
    }
}; 
```

PS：您可以通过使用`std::vector`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:53:11.400

此代码适用于 gcc

```
#include <iostream>
using namespace std;

int main(){
int row, col;
cin>>row;
cin>>col;
int **array=new int*[row];
    for (int i=0; i<row; i++){
        array[i]=new int[col];
    }
        for (int i=0; i<row;i++){
            for (int j=0; j<col; j++){
                array[i][j]=0;
                cout<<array[i][j]<<" ";
            }
            cout<<endl;
        }
} 
```

用其他元素替换数组的第 i 个元素，我们可以做一些事情 lyk

```
int *aa = new int[p];
swap(array[i], aa) 
```

但要使其在逻辑上正确工作，您需要确保 p >= 数组 array[i] 指向的大小。在我们的大多数用例中，我们让它们相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:36:42.720

你可以尝试这样的事情： -

```
class A
{
 public:
 A():my2DArray() {0}
 private:
 B* my2DArray[max1][max2];
 }; 
```

# php - 如何在特定页面上有多个重力形式？

> ID：13598486
> 
> 赞同：0
> 
> 时间：2012-11-28T05:34:56.963
> 
> 标签：php, forms, wordpress, gravity

我正在使用 wordpress 重力表单插件。我想在模板的单个页面上嵌入 2 个重力形式。这就是我用来在我的页面中嵌入表单的方法（[http://www.gravityhelp.com/documentation/page/Embedding_A_Form](http://www.gravityhelp.com/documentation/page/Embedding_A_Form)）。问题是重力形式提供的所有钩子都只有一个形式对象。有没有一种方法可以在我的页面上有多个表单对象，并且我还使用这种方法将占位符添加到我的重力表单中（[http://www.wpbeginner.com/wp-tutorials/how-to-add-placeholder-text -重力形式/](http://www.wpbeginner.com/wp-tutorials/how-to-add-placeholder-text-in-gravity-forms/)）。所以现在我想在同一页面上的两个表单中添加占位符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T20:48:33.433

您可以将此插件用于占位符：Gravity Forms - Placeholders add-on

（2012 年 11 月 28 日问）：您是否设法让它们显示在 1 页上？

# python - 使用 Python 持续监控程序/进程

> ID：13598487
> 
> 赞同：8
> 
> 时间：2012-11-28T05:34:59.033
> 
> 标签：python, scheduling, daemon, cron-task

我正在尝试不断监视一个基本上是 Python 程序的进程。如果程序停止，那么我必须重新启动程序。我正在使用另一个 Python 程序来执行此操作。

例如，假设我必须不断运行一个名为`run_constantly.py`. 我最初手动运行该程序，它将其进程 ID 写入文件“PID”（在位置 out/PROCESSID/PID 中）。

现在我运行另一个程序，它具有*以下代码*`run_constantly.py`来从 Linux 环境监视程序：

```
def Monitor_Periodic_Process():

    TIMER_RUNIN = 1800
    foo = imp.load_source("Run_Module","run_constantly.py")
    PROGRAM_TO_MONITOR = ['run_constantly.py','out/PROCESSID/PID']
    while(1):
        # call the function checkPID to see if the program is running or not
        res = checkPID(PROGRAM_TO_MONITOR)
        # if res is 0 then program is not running so schedule it
        if (res == 0):
            date_time = datetime.now()
            scheduler.add_cron_job(foo.Run_Module, year=date_time.year, day=date_time.day, month=date_time.month, hour=date_time.hour, minute=date_time.minute+2)
            scheduler.start()
            scheduler.get_jobs()
            time.sleep(TIMER_NOT_RUNIN)
            continue
        else:
            #the process is running sleep and then monitor again
            time.sleep(TIMER_RUNIN)
            continue 
```

我没有在`checkPID()`此处包含该功能。`checkPID()`基本上检查进程 ID 是否仍然存在（即程序是否仍在运行），如果不存在，则返回`0`. 在上面的程序中，我检查 if `res == 0`，如果是，那么我使用 Python 的调度程序来调度程序。但是，我目前面临的主要问题是，一旦我安排使用该功能，该程序的进程 ID 和该`run_constantly.py`程序的进程 ID*就会相同。*所以如果程序崩溃了，下面的程序仍然认为它正在运行（因为两个进程ID相同），因此继续进入else循环休眠并再次监控。`run_constantly.py``scheduler.add_cron_job()``run_constantly.py``run_constantly.py`

有人可以告诉我如何解决这个问题吗？有没有一种简单的方法可以持续监控程序并在程序崩溃时重新安排它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T05:58:59.423

有很多程序可以做到这一点。

在 Ubuntu 上有[暴发户](http://upstart.ubuntu.com/)（默认安装）

很多人喜欢[http://supervisord.org/](http://supervisord.org/)

[@nathan](http://mmonit.com/monit/)提到的监控

如果您正在寻找 Python 替代品，那么有一个刚刚发布的名为[circus](http://circus.readthedocs.org/en/0.5.2.1/)的库看起来很有趣。

几乎每个 linux 发行版都可能内置了其中一个。

选择实际上取决于您更喜欢哪一个，但是使用其中之一比自己编写要好得多。

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:22:05.277

如果您愿意直接从 python 而不是使用 cron 来控制被监控的程序，请查看[**subprocess**模块](http://docs.python.org/2.7/library/subprocess.html#module-subprocess)：

```
The subprocess module allows you to spawn new processes,
connect to their input/output/error pipes, and obtain their return codes. 
```

检查示例，例如在 SO 上[*使用 python 跟踪进程状态以获取示例和参考。*](https://stackoverflow.com/questions/1408627/track-process-status-with-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:41:16.697

您可以只使用 monit [http://mmonit.com/monit/](http://mmonit.com/monit/)

它监视进程并重新启动它们（和其他东西。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-11T07:36:17.347

我想我会添加一个更通用的解决方案，这也是我个人一直使用的解决方案。

它的名字是`Immortal`（来源在[https://github.com/immortal/immortal](https://github.com/immortal/immortal)）

要让它监视并在程序停止时立即重新启动程序，只需运行以下命令：

```
immortal <command> 
```

所以在你的情况下，我会这样运行`run_constantly.py`：

```
immortal python run_constantly.py 
```

该命令`ps aux | grep run_constantly.py`应返回 2 个进程 ID，一个用于`Immortal`命令，一个用于`Immortal`启动的单独命令（只是常规命令。只要 Immortal 进程正在运行，`run_constantly.py`它将保持运行。

# combinatorics - 如何计算分面导航 URL 的爬行空间

> ID：13598488
> 
> 赞同：0
> 
> 时间：2012-11-28T05:34:59.050
> 
> 标签：combinatorics, discrete-mathematics, faceted-search, layered-navigation

我们的电子商务网站使用搜索引擎可抓取的分面导航链接。根据 Google 网站管理员工具，googlebot 已抓取但选择不选择，数十万个网址，我们只有约 1500 种产品。Googlebot 似乎迷失在我们多面导航提供的巨大抓取空间中。如何计算我们的分面导航可能的唯一网址数量？

例如，在一个类别页面上，我们有 6 个不同的属性，总共有 51 个可能的值。

属性A 有2 个可选值
属性B 有7 个可选值
属性C 有7 个可选值
属性D 有4 个可选值
属性E 有4 个可选值
属性F 有27 个可选值

每个值选择都会向 url 添加一个参数和值。有多少个可能的 url，假设**没有一个属性是多选的（即，如果选择了 attributeB 中的一个值，则不能将另一个 attributeB 值添加到它）并且 url 参数总是按字母顺序排列**？

我想要一个公式化的答案，以便我可以计算我们每个类别页面的抓取空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:25:03.877

如果必须从每个属性中选择至少一个选项，则有 42,636 种可能的组合，如果每个属性都可以留空，则有 134,400 种。

这可以简单地通过将每个属性可用的选择数量相乘来获得：第一种情况下的可选值的数量，以及后一种情况下的可选值的数量 + 1（对于 null）。

后者似乎与 googlebot 访问过的网址数量相当。

# c# - 组合框 selectedValue/Item

> ID：13598490
> 
> 赞同：-1
> 
> 时间：2012-11-28T05:35:26.340
> 
> 标签：c#, winforms, combobox

我正在尝试执行此编辑页面，当用户想要编辑案例时，它会获取案例 ID 并将用户带到另一个表单，用户只能编辑所选案例 ID 的信息。其中一个信息称为代理，其中已经选择了代理。例如，这个案例 id =20 包含一个具有 agent20 的代理信息。在此编辑页面中，我正在尝试一个组合框，其中 agent20 在 page_onload 时已被选为组合框中的默认值，但组合框已经包含代理的其余部分，如代理 1 到 20。请注意，这是一个窗口表单而不是 asp.net，因为 asp.net 可以使用 FindByValue 的代码....

```
 SqlDataAdapter ad4 = new SqlDataAdapter();
        SqlCommand command4 = new SqlCommand();
        DataSet ds4 = new DataSet();
        ds4.Clear();
        SqlConnection connection4 = new SqlConnection();

        String sqlText4 = "SELECT * FROM [Agent] WHERE TypeID = 1";
        connection4.ConnectionString = "-connectionstring-";
        command4.Connection = connection4;
        command4.CommandText = sqlText4;
        ad4.SelectCommand = command4;
        connection4.Open();
        ad4.Fill(ds4, "data");
        connection4.Close();

        comboBox1.DataSource = ds4.Tables["data"];
        //comboBox1.SelectionStart = agentnumber;
        //comboBox1.GetItemText(agentnumber);
        comboBox1.DisplayMember = "AgentName";
        comboBox1.ValueMember = "AgentID"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:00:09.447

不明白你需要什么，但我试着给你一些提示：

在组合框中设置值：

```
comboBox1.SelectedValue = myNewId 
```

检索组合框的选定值：

```
myNewId = comboBox1.SelectedValue 
```

该`SelectedIndex`属性的行为类似`SelectedValue`，但它设置/返回所选项目的索引，例如，如果所选项目是列表的第三个，则返回 3。

该`Text`属性仅设置/返回所选项目的文本（在您的情况下类似于“Agent20”）。

[在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)，您可以全面了解 ComboBox 类。

希望这有助于开始进一步调查。

# sql-server - Microsoft SQL Server 2008 R2 索引减慢查询速度

> ID：13598494
> 
> 赞同：3
> 
> 时间：2012-11-28T05:35:31.127
> 
> 标签：sql-server, indexing

我目前正在努力提高 Microsoft SQL Server 2008 R2 的性能。在分析查询时，Microsoft Database Engine Tuning Tool 会使用此查询创建索引：

```
CREATE NONCLUSTERED INDEX [samplelocation1] ON [dbo].[sample_location]  
(
    [sample_id] ASC,
    [sample_code] ASC
) WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY] 
```

这将使用从备份恢复的数据库在测试服务器（运行相同版本的 SQL Server，2008 R2）上执行查询的时间从 17 秒缩短到 5 秒。

然而，在生产服务器上，执行时间从 17 秒增加到 1 分 40 秒。这是怎么回事？

查询：

```
select * 
from sample_view  
where version_date >= '<date>' 
  and version_date - 0.9999999 <= '<date>' 
  and (cus_id in (select company_id 
                  from company_emp_relation_view 
                  where user_id = '<userid>') 
       or 
       fac_id in (select company_id 
                  from company_emp_relation_view 
                  where user_id = '<userid>'))  
  and sample_code in (select min(sample_code)  
                      from sample_location 
                      group by sample_id) 
  and (rfq_status<>'I') 
  and location <> 'D'  
order by 
  version_date desc 
```

该查询不是我编写的，看起来过于复杂，但我想在不更改任何查询的情况下解决这个问题。我最大的惊喜是索引的效果在不同系统之间是不一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:46:51.257

好吧，您的测试与生产系统上的数据量和分布可能完全不同 - 因此，您在具有几百行的测试系统上确定的任何内容可能在具有数百行**的**生产系统上的工作方式不同数千行..

数据的数量和分布是查询优化器如何决定是否使用索引（或者只是进行表扫描）的关键因素。**因此，必须**对实际数据（或其副本）执行任何性能调整——而不是在只有一小部分数据的“虚拟”开发或测试系统上执行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:49:44.767

你可以使用分析器和 DTA ，它会给出建议以包含索引。

解决您的问题首先检查列 version_date ， user_id 的索引没有。如果已经存在索引，那么您必须确定索引的碎片级别。如果碎片在 5% 到 30% 之间，那么你必须重新组织索引，如果碎片超过 30%，那么你必须重建索引。

检查fragmentaion 转到所需的表并转到索引-> rc on ur index name--> properties--> fragmentaion

如果您的表或视图不包含任何索引，请尝试创建一个聚集索引，然后创建非聚集索引。

# java - 用于 Spring bean 初始化的 ActiveMQ 连接故障转移检测

> ID：13598496
> 
> 赞同：2
> 
> 时间：2012-11-28T05:35:50.910
> 
> 标签：java, spring, jms, activemq, spring-jms

我正在尝试捕获由于代理关闭而无法建立的 ActiveMQ 连接的异常。

使用以下代码：

```
String url = ActiveMQConnection.DEFAULT_BROKER_URL;                
ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);
Connection connection = connectionFactory.createConnection();
connection.start(); 
```

如果代理关闭，则连接到代理的尝试进入无限循环。如果我将网址更改为

```
String url = "failover:(tcp://127.0.0.1:61616/)?startupMaxReconnectAttempts=2"; 
```

它进行了 2 次尝试，然后抛出异常。（这就是我想要的。）

现在，如果我使用以下 Spring Bean 初始化连接对象：

```
<bean id="jmsFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
        <!--<value>tcp://0.0.0.0:61616</value>-->
        <value>failover:(tcp://127.0.0.1:61616/)?startupMaxReconnectAttempts=2</value>
    </property>
</bean> 
```

我收到一条错误消息，提示无法在 2 次尝试中连接，但随后，它仍会在每 5 秒后再次尝试连接，再次给出相同的错误消息并继续无限循环。

```
ERROR transport.failover.FailoverTransport - Failed to connect to [tcp://127.0.0.1:61616/] after: 2 attempt(s)
WARN jms.listener.DefaultMessageListenerContainer - Could not refresh JMS Connection for destination 'destinationQueue' - retrying in 5000 ms. Cause: Connection refused
ERROR transport.failover.FailoverTransport - Failed to connect to [tcp://127.0.0.1:61616/] after: 2 attempt(s)
WARN jms.listener.DefaultMessageListenerContainer - Could not refresh JMS Connection for destination 'destinationQueue' - retrying in 5000 ms. Cause: Connection refused
ERROR transport.failover.FailoverTransport - Failed to connect to [tcp://127.0.0.1:61616/] after: 2 attempt(s)
WARN jms.listener.DefaultMessageListenerContainer - Could not refresh JMS Connection for destination 'destinationQueue' - retrying in 5000 ms. Cause: Connection refused
ERROR transport.failover.FailoverTransport - Failed to connect to [tcp://127.0.0.1:61616/] after: 2 attempt(s)
WARN jms.listener.DefaultMessageListenerContainer - Could not refresh JMS Connection for destination 'destinationQueue' - retrying in 5000 ms. Cause: Connection refused
these messages repeat!! 
```

我想知道如何停止这种无限轮询并在失败的情况下捕获异常（可能正在使用 PostInit）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:09:06.793

您可以在侦听器类中实现 ExceptionListener 并覆盖 onException 消息。在那里你可以处理你的通知逻辑。虽然它尝试自动重新连接。

```
public class QueueListener implements MessageListener,ExceptionListener{

public void onMessage(Message message) {

}

public void onException(JMSException jsme) {

 // Send my notifcation here.

}

} 
```

# objective-c - UISwipeGestureRecognizer 没有触发

> ID：13598505
> 
> 赞同：2
> 
> 时间：2012-11-28T05:36:30.223
> 
> 标签：objective-c, uiview, interface-builder, uigesturerecognizer, uiswipegesturerecognizer

我在 IB 中有一个 UISwipeGestureRecognizer 设置链接到我的视图，如下所示：

![在此处输入图像描述](../Images/782b627ef8edbff179706784bb828dcc.png)

非常琐碎，做了一百万次。但是这一次它永远不会触发>：|

这是我在用户滑动时*应该*调用的方法。

![在此处输入图像描述](../Images/33674a1896c31a4917d4b300c83e366a.png)

然而，这永远不会被调用。

*   不，它不是意外添加到子视图中的
*   是的，平移手势完美运行。

我有另一个视图设置与此几乎完全相同，可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T05:42:42.967

在您的添加以下`delegate`方法`ViewController`

返回`YES`保证允许同时识别，返回`NO`不保证防止同时识别，因为其他手势`delegate`可能返回`YES`

```
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
   return YES;
} 
```

# r - 如何在 ifelse 语句中忽略 NA

> ID：13598511
> 
> 赞同：10
> 
> 时间：2012-11-28T05:36:45.527
> 
> 标签：r, conditional-statements

我从 SAS 来到 R，其中数字缺失设置为无穷大。所以我们只能说：

```
positiveA = A > 0; 
```

在 R 中，我必须像这样冗长：

```
positiveA <- ifelse(is.na(A),0, ifelse(A > 0, 1, 0)) 
```

我发现这种语法很难阅读。无论如何我可以修改 ifelse 函数以将 NA 视为对于所有比较条件始终为假的特殊值？如果没有，将 NA 视为 -Inf 也可以。

同样，在字符变量的 ifelse 语句中将 NA 设置为 ''（空白）。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T05:50:06.443

此语法更易于阅读：

```
x <- c(NA, 1, 0, -1)

(x > 0) & (!is.na(x)) 
# [1] FALSE  TRUE FALSE FALSE 
```

（外括号不是必需的，但会使语句更容易被机器以外的几乎任何人阅读。）

* * *

**编辑**：

```
## If you want 0s and 1s
((x > 0) & (!is.na(x))) * 1
# [1] 0 1 0 0 
```

最后，你可以把整个东西变成一个函数：

```
isPos <- function(x) {
    (x > 0) & (!is.na(x)) * 1
}

isPos(x)
# [1] 0 1 0 0 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T05:44:49.247

用零替换一个`NA`值似乎是相当奇怪的行为。`R`认为`NA`缺少值（尽管隐藏在您（从不）需要去的场景后面很远，当数字时它们是负的非常大的数字））

您需要做的就是`A>0`或者`as.numeric(A>0)`如果您想要 0,1 不是 TRUE , FALSE

```
# some dummy data
A <- seq(-1,1,l=11)
# add NA value as second value
A[2] <- NA
positiveA <- A>0
positiveA
 [1] FALSE    NA FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE

 as.numeric(positiveA) # 
 [1]  0 NA  0  0  0  0  1  1  1  1  1 
```

请注意， `ifelse(A>0, 1,0)`这也可以。

这些`NA`值被“保留”，或被适当地处理。`R`在这里是明智的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-02T08:11:54.680

试试这个：

```
positiveA <- ifelse(!is.na(A) & A > 0, 1, 0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-10T21:07:24.877

您可以使用缺少的参数 i`if_else_`来自`hablar`：

```
library(hablar) 

x <- c(NA, 1, 0, -1)

if_else_(x > 0, T, F, missing = F) 
```

这给了你

```
[1] FALSE  TRUE FALSE FALSE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T23:41:18.563

如果您正在使用整数，则可以使用 %in%

例如，如果您的数字可以上升到 2

```
test <- c(NA, 2, 1, 0, -1) 
```

其他人建议使用

```
(test > 0) & (!is.na(test))
or
ifelse(!is.na(test) & test > 0, 1, 0) 
```

我的解决方案更简单，并为您提供相同的结果。

```
test %in% 1:2 
```

# oracle - 在文本字段中显示 PDF 文件的内容

> ID：13598513
> 
> 赞同：4
> 
> 时间：2012-11-28T05:36:46.433
> 
> 标签：oracle, oracle10g, oracleforms

我是 Oracle Forms 的新手。我在 Oracle 数据库中存储了一个 PDF 文件；现在我想阅读该 PDF 文件并在 Oracle Forms 的文本字段中显示内容。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T22:47:30.803

Oracle Forms 无法原生显示 PDF。如果您将 PDF 的实际内容存储在数据库中，您可以考虑开发一个利用现有开源 PDF 表示层的 PJC，并将其嵌入到 Oracle 表单中。然后您需要将数据库的内容流式传输到 PJC 中，这很棘手（但并非不可能）。

最好的办法是构建一个可以从 DAD 访问的小型 PL/SQL 包以提供文档，然后从 Oracle Forms 对 URL 发起 web.show_document 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T12:25:45.217

没有内置的功能可以做到这一点。
但是，如果您不必在任何地方使用 PDF 的内容，
即您只想查看 PDF 的内容，那么您可以试试这个：（需要 **webutil 实用程序）

```
vboolean :=  webutil_file_transfer.DB_To_Client_With_Progress
                        ( 'D:\files\abc.pdf' ,  --location of the file with extension
                          'table_nm',  --table name 
                          'field_nm', --field which contains ur PDF
                          'sr_no=1' , --fetch the PDF of row where sr_no =1
                          'Downloading from Database',
                          'Wait to Complete');
client_host('cmd /c start '||vfilename1); --open the file 
```

如果要使其通用，可以存储扩展名，将其附加到 file_nm 即 DB_To_Client_With_Progress() 的第一个参数，然后您将能够打开存储在数据库中的任何类型的文档！

# python - 批量加载程序 appcfg.py

> ID：13598519
> 
> 赞同：1
> 
> 时间：2012-11-28T05:37:23.130
> 
> 标签：python, google-app-engine, bulkloader

我正在尝试使用下载数据

```
appcfg.py download_data --url=http://cayotkanawa.appspot.com/_ah/
remote_api --filename=datasave.csv 
```

但我明白了。我应该怎么做才能获取数据？

```
C:\Users\Honjo>appcfg.py download_data --url=http://cayotkanawa.appspot.com/_ah/
remote_api --filename=datasave.csv
Usage: appcfg.py [options] <action>

Action must be one of:
  backends: Perform a backend action.
  backends configure: Reconfigure a backend without stopping it.
  backends delete: Delete a backend.
  backends list: List all backends configured for the app.
  backends rollback: Roll back an update of a backend.
  backends start: Start a backend.
  backends stop: Stop a backend.
  backends update: Update one or more backends.
  create_bulkloader_config: Create a bulkloader.yaml from a running application.

  cron_info: Display information about cron jobs.
  download_app: Download a previously-uploaded app.
  download_data: Download entities from datastore.
  help: Print help for a specific action.
  request_logs: Write request logs in Apache common log format.
  resource_limits_info: Get the resource limits.
  rollback: Rollback an in-progress update.
  set_default_version: Set the default (serving) version.
  update: Create or update an app version.
  update_cron: Update application cron definitions.
  update_dos: Update application dos definitions.
  update_indexes: Update application indexes.
  update_queues: Update application task queue definitions.
  upload_data: Upload data records to datastore.
  vacuum_indexes: Delete unused indexes from application.
Use 'help <action>' for a detailed description.

Options:
  -h, --help            Show the help message and exit.
  -q, --quiet           Print errors only.
  -v, --verbose         Print info level logs.
  --noisy               Print all logs.
  -s SERVER, --server=SERVER
                        The App Engine server.
  --insecure            Use HTTP when communicating with the server.
  -e EMAIL, --email=EMAIL
                        The username to use. Will prompt if omitted.
  -H HOST, --host=HOST  Overrides the Host header sent with all RPCs.
  --no_cookies          Do not save authentication cookies to local disk.
  --skip_sdk_update_check
                        Do not check for SDK updates.
  --passin              Read the login password from stdin.
  -A APP_ID, --application=APP_ID
                        Set the application, overriding the application value
                        from app.yaml file.
  -V VERSION, --version=VERSION
                        Set the (major) version, overriding the version value
                        from app.yaml file.
  -r RUNTIME, --runtime=RUNTIME
                        Override runtime from app.yaml file.
  -R, --allow_any_runtime
                        Do not validate the runtime in app.yaml
  --oauth2              Use OAuth2 instead of password auth.
  --oauth2_refresh_token=OAUTH2_REFRESH_TOKEN
                        An existing OAuth2 refresh token to use. Will not
                        attempt interactive OAuth approval.
  --noauth_local_webserver
                        Do not run a local web server to handle redirects
                        during OAuth authorization.
  -f, --force           Force deletion without being prompted.
  --has_header          Whether the first line of the input file should be
                        skipped
  --loader_opts=LOADER_OPTS
                        A string to pass to the Loader.initialize method.
  --url=URL             The location of the remote_api endpoint.
  --batch_size=BATCH_SIZE
                        Number of records to post in each request.
  --bandwidth_limit=BANDWIDTH_LIMIT
                        The maximum bytes/second bandwidth for transfers.
  --rps_limit=RPS_LIMIT
                        The maximum records/second for transfers.
  --http_limit=HTTP_LIMIT
                        The maximum requests/second for transfers.
  --db_filename=DB_FILENAME
                        Name of the progress database file.
  --auth_domain=AUTH_DOMAIN
                        The name of the authorization domain to use.
  --log_file=LOG_FILE   File to write bulkloader logs.  If not supplied then a
                        new log file will be created, named: bulkloader-log-
                        TIMESTAMP.
  --dry_run             Do not execute any remote_api calls
  --namespace=NAMESPACE
                        Namespace to use when accessing datastore.
  --num_threads=NUM_THREADS
                        Number of threads to transfer records with.
  --filename=FILENAME   The name of the file where output data is to be
                        written. (Required)
  --kind=KIND           The kind of the entities to retrieve.
  --exporter_opts=EXPORTER_OPTS
                        A string to pass to the Exporter.initialize method.
  --result_db_filename=RESULT_DB_FILENAME
                        Database to write entities to for download.
  --config_file=CONFIG_FILE
                        Name of the configuration file.
  --num_runs=NUM_RUNS   Number of runs of each cron job to displayDefault is 5
  --no_precompilation   Disable automatic Python precompilation.
  --backends            Update backends when performing appcfg update.
  -n NUM_DAYS, --num_days=NUM_DAYS
                        Number of days worth of log data to get. The cut-off
                        point is midnight US/Pacific. Use 0 to get all
                        available logs. Default is 1, unless --append is also
                        given; then the default is 0.
  -a, --append          Append to existing file.
  --severity=SEVERITY   Severity of app-level log messages to get. The range
                        is 0 (DEBUG) through 4 (CRITICAL). If omitted, only
                        request logs are returned.
  --vhost=VHOST         The virtual host of log messages to get. If omitted,
                        all log messages are returned.
  --include_vhost       Include virtual host in log messages.
  --include_all         Include everything in log messages.
  --end_date=END_DATE   End date (as YYYY-MM-DD) of period for log data.
                        Defaults to today.

C:\Users\Honjo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:45:19.973

我不知道这是否是原因，但从您的输出来看：`Usage: appcfg.py [options] <action>`
您的命令在选项之前具有操作。
如果它不起作用 - 尝试`appcpg.py help download_data`更好地描述如何使用该`download_data`操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:48:25.577

您的命令行看起来正确。只是 StackOverflow 在两行上显示您的命令，还是您实际上在两行上输入了它？应该是一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T06:59:31.417

把下面的命令工作起来真是太奇怪了

```
python "C:\Program Files\Google\google_appengine\appcfg.py" download_data --url=http://cayotkanawa.appspot.com/_ah/
remote_api --filename=datasave.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T12:58:23.447

我遇到了类似的问题，在创建 bulkloader 配置文件时设置应用程序 ID（s~ 是 HR 数据存储应用程序的前缀）有助于：

```
appcfg.py create_bulkloader_config -A s~foo-app --url=https://foo-app.appspot.com/_ah/remote_api --filename=bulkloader.yaml

appcfg.py download_data --config_file=bulkloader.yaml --url=http://foo-app.appspot.com/_ah/remote_api --filename=accounts.csv --kind=Account --namespace='lol' 
```

# assembly - 将 Java 代码翻译成伪代码

> ID：13598521
> 
> 赞同：-2
> 
> 时间：2012-11-28T05:37:42.267
> 
> 标签：assembly, 68000

我如何使用摩托罗拉 68000 将下面的 Java 代码翻译成汇编语言的**伪代码：**

```
if(x > y && y < 100) {
    x++;
    y--;
    } // end if
else if(x < y) {
    x--;
    y++;
    } // end else if
else {
    x=0;
    y=0;
    } // end else 
```

我认为我可能在正确的轨道上只是不确定：

```
IF:
        if(x <= y) goto end if
        if(y <= 100) goto end if
            x++;
            y--;
            goto IF
ELSE IF:
        if(x >= y) goto end else if
            x--;
            y++;
            goto ELSE IF
            x = 0;
            y = 0;
            goto DONE
DONE: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:35:13.940

没有标准的伪代码格式。这是非常非正式的。重点是清楚地显示代码的逻辑结构，而不会陷入语法困境。

如果您被告知要使用伪代码进行汇编，我会假设您希望将 Java 代码大致分解为 68k 汇编中的样子。这似乎是您从这里开始的，但您犯了一些错误。

首先，你的意思是`y >= 100`。

你的前两个 if 应该`goto ELSE IF`，不是`END IF`。

没有理由`goto IF`。你应该只去过一次。根据 java 代码，不应该多次检查条件。您`goto IF`可能应该是 a `goto DONE`，因为它仅在第一个条件为真时执行，这意味着不会评估其他条件。

else 条件需要一个标签。这是你应该去的`if x >= y`。

您不想像使用`goto ELSE IF`. 你可能是故意的`goto DONE`。

你的决赛`goto DONE`是多余的。如果你把它遗漏了，它无论如何都会去`DONE`的，因为那是下一条指令。

这大概是它应该看起来的样子（请注意，IF 标签从未被引用。它只是为了外观。）：

```
IF:
  if x <= y 
    goto ELSEIF
  if y >= 100 
    goto ELSEIF
  x++
  y--
  goto DONE
ELSEIF:
  if x >= y 
    goto ELSE
  x--
  y++
  goto DONE
ELSE:
  x = 0
  y = 0
DONE: 
```

# windows - ConnectEx 要求套接字“初始绑定”，但绑定到什么？

> ID：13598530
> 
> 赞同：8
> 
> 时间：2012-11-28T05:38:21.407
> 
> 标签：windows, network-programming, winsock, overlapped-io

[ConnectEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606%28v=vs.85%29.aspx)函数需要一个“未连接的、先前绑定的套接字”。实际上，如果我在示例中省略了[绑定](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)步骤（见下文），[ConnectEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606%28v=vs.85%29.aspx)将失败并[显示 WSAEINVAL](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681391%28v=vs.85%29.aspx#WSAEINVAL)。

这是我目前的理解：在调用[ConnectEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606%28v=vs.85%29.aspx)之前，将套接字[绑定](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)到`INADDR_ANY`端口 0（除非它已经绑定）：

```
struct sockaddr_in addr;
ZeroMemory(&addr, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = INADDR_ANY;
addr.sin_port = 0;
rc = bind(sock, (SOCKADDR*) &addr, sizeof(addr));
if (rc != 0) { ... bind failed; call WSAGetLastError to see why ... } 
```

或者对于 IPv6 套接字：

```
struct sockaddr_in6 addr;
ZeroMemory(&addr, sizeof(addr));
addr.sin6_family = AF_INET6;
addr.sin6_addr = in6addr_any;
addr.sin6_port = 0;
rc = bind(sock, (SOCKADDR*) &addr, sizeof(addr));
if (rc != 0) { ... bind failed; call WSAGetLastError to see why ... } 
```

这让操作系统可以为我们的套接字分配一个*本地地址*（而不是我们要连接 的*远程地址）。*[connect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737625%28v=vs.85%29.aspx)会自动执行此步骤，但[ConnectEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606%28v=vs.85%29.aspx)不会。

我的问题是：

1.  我的评估是否正确？

2.  有没有办法进行这种与地址系列无关的自动绑定，还是我必须手动处理每个、、、`AF_INET`（`AF_INET6`蓝牙`AF_BTH`）等？

工作 ConnectEx 示例（也在 Gist 上：[https](https://gist.github.com/4158972) ://gist.github.com/4158972 ）：

```
#include <stdio.h>
#include <WinSock2.h>
#include <MSWSock.h>
#include <WS2tcpip.h>

#pragma comment(lib, "Ws2_32.lib")

struct mswsock_s {
    LPFN_CONNECTEX ConnectEx;
} mswsock;

static BOOL load_mswsock(void)
{
    SOCKET sock;
    DWORD dwBytes;
    int rc;

    /* Dummy socket needed for WSAIoctl */
    sock = socket(AF_INET, SOCK_STREAM, 0);
    if (sock == INVALID_SOCKET)
        return FALSE;

    {
        GUID guid = WSAID_CONNECTEX;
        rc = WSAIoctl(sock, SIO_GET_EXTENSION_FUNCTION_POINTER,
                      &guid, sizeof(guid),
                      &mswsock.ConnectEx, sizeof(mswsock.ConnectEx),
                      &dwBytes, NULL, NULL);
        if (rc != 0)
            return FALSE;
    }

    rc = closesocket(sock);
    if (rc != 0)
        return FALSE;

    return TRUE;
}

int main(int argc, char *argv[])
{
    int rc;
    BOOL ok;
    WSADATA wsaData;
    SOCKET sock;

    rc = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (rc != 0) {
        printf("WSAStartup failed: %d\n", rc);
        return 1;
    }
    if (LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2) {
        printf("Your computer is from the wrong millenium.\n");
        WSACleanup();
        return 1;
    }

    if (!load_mswsock()) {
        printf("Error loading mswsock functions: %d\n", WSAGetLastError());
        return 1;
    }

    sock = socket(AF_INET, SOCK_STREAM, 0);
    if (sock == INVALID_SOCKET) {
        printf("socket: %d\n", WSAGetLastError());
        return 1;
    }

    /* ConnectEx requires the socket to be initially bound. */
    {
        struct sockaddr_in addr;
        ZeroMemory(&addr, sizeof(addr));
        addr.sin_family = AF_INET;
        addr.sin_addr.s_addr = INADDR_ANY;
        addr.sin_port = 0;
        rc = bind(sock, (SOCKADDR*) &addr, sizeof(addr));
        if (rc != 0) {
            printf("bind failed: %d\n", WSAGetLastError());
            return 1;
        }
    }

    /* Issue ConnectEx and wait for the operation to complete. */
    {
        OVERLAPPED ol;
        ZeroMemory(&ol, sizeof(ol));

        sockaddr_in addr;
        ZeroMemory(&addr, sizeof(addr));
        addr.sin_family = AF_INET;
        addr.sin_addr.s_addr = inet_addr("173.194.37.36"); // google.com
        addr.sin_port = htons(80);

        ok = mswsock.ConnectEx(sock, (SOCKADDR*) &addr, sizeof(addr), NULL, 0, NULL, &ol);
        if (ok) {
            printf("ConnectEx succeeded immediately\n");
        } else if (WSAGetLastError() == ERROR_IO_PENDING) {
            printf("ConnectEx pending\n");

            DWORD numBytes;
            ok = GetOverlappedResult((HANDLE) sock, &ol, &numBytes, TRUE);
            if (ok)
                printf("ConnectEx succeeded\n");
            else
                printf("ConnectEx failed: %d\n", WSAGetLastError());
        } else {
            printf("ConnectEx failed: %d\n", WSAGetLastError());
            return 1;
        }
    }

    /* Make the socket more well-behaved. */
    rc = setsockopt(sock, SOL_SOCKET, SO_UPDATE_CONNECT_CONTEXT, NULL, 0);
    if (rc != 0) {
        printf("SO_UPDATE_CONNECT_CONTEXT failed: %d\n", WSAGetLastError());
        return 1;
    }

    /* This will fail if SO_UPDATE_CONNECT_CONTEXT was not performed. */
    rc = shutdown(sock, SD_BOTH);
    if (rc != 0) {
        printf("shutdown failed: %d\n", WSAGetLastError());
        return 1;
    }

    printf("Done\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:07:44.313

> connect 会自动执行此步骤，但 ConnectEx 不会。

正确的。

> 我的评估是否正确？

是的。

> 有没有办法进行这种与地址系列无关的自动绑定，还是我必须手动处理 AF_INET、AF_INET6、AF_BTH（蓝牙）等？

我相信这`INADDR_ANY`是所有地址系列中的一堆零，因此您可以尝试使用`memset()`并完全省略分配`addr.sin_addr.s_addr`。这是否是犹太洁食、便携、政治正确等是另一个我不会讨论的问题。

考虑到保存系统调用是它存在的动机，并且考虑到大多数程序根本从不绑定出站套接字，微软没有设法在内部`ConnectEx()`调用似乎很奇怪。`bind()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T06:18:04.597

可以以独立于地址族的方式获取 ConnectEx 的绑定地址。

**解决方案 1**

`getaddrinfo`使用以下选项调用：

```
pServiceName = "0"

hints.ai_flags = AI_PASSIVE
hints.ai_family = address family of the socket 
```

然后使用返回的地址列表的第一个结果。

要获取套接字的地址族，您可以`getsockopt`使用`SO_PROTOCOL_INFOW`.

**解决方案 2**

用于定义在 中`SOCKADDR_STORAGE`的地址结构和调用。它支持和。`INETADDR_SETANY``MSTcpIP.h``AF_INET``AF_INET6`

# android - 如何从 JSON 对象中检索 ArrayList？

> ID：13598535
> 
> 赞同：0
> 
> 时间：2012-11-28T05:39:12.773
> 
> 标签：android

我是android开发的新手。我参与了一个项目，在这个项目中，我的 android 应用程序与 Servlet 程序通信。在 Servlet 中，我向 ArrayList 添加了一些响应消息，并将 ArrayList 转换为 JSON 并将其发送到 Android 应用程序。

我的要求是，在 android 应用程序中，我怎样才能获得 ArralyList。

请帮助我前进。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:52:42.627

在 JSON 格式中，{ ..} 内的数据是对象，[..] 内的数据是数组

例如：如果您正在获取如下所示的数据

```
[{"A":2,
  "B":3,
   ....
  }//Json Object
 ]//JSON Array 
```

您需要通过创建一个 Json 数组然后进入其中获取 JSON 对象来检索它，然后您可以从中获取 JSon 数据

```
 public getData(InputStream j){
 BufferedReader bf= new BufferedReader(j);
 StringBuilder sb= new StringBuilder();
 ....
 String line=bf.readLine();
 while(line!=null)
 {sb.append(line);
 }
...
 JSONArray  js= new JsonArray(sb.toString);
 JSONObject jo=js.getJSONObject(0);
 String a= jo.getString("A"); 
```

# android - 平板电脑 10.1" WXVGA 和平板电脑 WSVGA 7" 的问题

> ID：13598536
> 
> 赞同：0
> 
> 时间：2012-11-28T05:39:18.827
> 
> 标签：android, android-layout, android-tablelayout

我有一个活动，其中包含一个以 png 作为背景的*LayoutView*，以提供与应用程序的其余部分一样好的框架效果，并在此 LayoutView 中加载一个 listView。

我已经在最新版本的 ADT 中测试了具有所有屏幕尺寸和分辨率配置文件的应用程序，并且在所有屏幕上都可以正常工作，但是使用这些配置

**-平板电脑 10.1" WXVGA mdpi**

**-平板电脑 WSVGA 7" mdpi**

**-Nexus 7 7.17" 800x1280 tvdpi**

该列表超出了背景 PNG 的框架，看起来很糟糕。

其他配置（也具有相同的分辨率但不同的密度，反之亦然）有效。

要解决此问题，我必须增加 listView 边距，但这会导致所有其他配置出现问题。

在不改变应用程序的图形设计的情况下，如何解决这个问题？

编辑

我添加了一个问题示例，listView 必须保持在黑色区域但在所描述的情况下超出了该区域 ![在此处输入图像描述](../Images/af3b639962f4cf7bb0ee519e0aa3b369.png)

红色区域是一个LinearLayout1，里面有另一个LinearLayout2和一个ListView，边距很大，因为鲜艳的红色区域包含用作LinearLayout1背景的png框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:38:28.773

我会说你需要调整/修改与特定屏幕密度匹配的背景图像。在 android 中，您可以选择使用这些文件夹来存储图像。

drawable、drawable-hdpi、drawable-hdpi-v11、drawable-ldpi、drawable-mdpi等 [http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

Android 操作系统会根据硬件屏幕分辨率尝试使用最合适的图像。因此，看看使图像更大/更小是否有助于列表视图以实现特定的屏幕密度。

如果不是这种情况，截图肯定会有所帮助：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:17:13.353

似乎您对所有屏幕和 dpi 都使用相同的背景。

在这种情况下，很难做到（我发现了同样的问题）。

有一些解决方案：

1.  使用 Ninepatch 作为背景。
2.  将背景分成几个区域，不要使用边距代替静态大小的视图，如下所示：

> ```
> <layout>
>   <view id="left" size="20dp" background="left.png" />
>   <imageview id="content" size="0dp" weight="1" background="center.9.png" />
>   <view id="right" size="20dp" background="right.png" />
> </layout> 
> ```

通过使用它，布局与屏幕和 dpi 无关。

# c# - 计算具有字符串属性的类的哈希码的最佳方法是什么？

> ID：13598539
> 
> 赞同：7
> 
> 时间：2012-11-28T05:39:22.747
> 
> 标签：c#, gethashcode

我有一个带有字符串属性的类，我需要重写 GetHashCode() 方法。

```
class A
{
    public string Prop1 { get; set; }
    public string Prop2 { get; set; }
    public string Prop3 { get; set; }
} 
```

第一个想法是做这样的事情：

```
public override int GetHashCode()
{
    return Prop1.GetHashCode() ^ Prop2.GetHashCode() ^ Prop3.GetHashCode();
} 
```

第二个想法是：

```
public override int GetHashCode()
{
    return String.Join(";", new[] {Prop1, Prop2, Prop3}).GetHashCode();
} 
```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:54:31.523

您不应该只是将它们异或在一起，因为这不考虑排序。假设你有两个对象：

```
"foo", "bar", "baz" 
```

和

```
"bar", "foo", "baz" 
```

使用简单的 XOR，这两者将具有相同的哈希值。幸运的是，它很容易解决。这是我用来组合哈希的代码：

```
static int MultiHash(IEnumerable<object> items)
{
    Contract.Requires(items != null);

    int h = 0;

    foreach (object item in items)
    {
         h = Combine(h, item != null ? item.GetHashCode() : 0);
    }

    return h;
}

static int Combine(int x, int y)
{
    unchecked
    {
         // This isn't a particularly strong way to combine hashes, but it's
         // cheap, respects ordering, and should work for the majority of cases.
         return (x << 5) + 3 + x ^ y;
    }
} 
```

有很多方法可以组合散列，但通常像这样非常简单的东西就可以了。如果由于某种原因它不适用于您的情况，[MurmurHash](http://code.google.com/p/smhasher/wiki/MurmurHash)具有非常强大的哈希组合，您可以提取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:48:14.973

只需将每个字符串的哈希值进行异或运算即可。它比字符串连接更便宜（性能方面），据我所知，它不太容易发生冲突。假设每个字符串有 5 个字符长，每个字符占用 1 个字节。在第一个中，您将 15 个字节散列到 4 个字节（int）。在第二个中，您将连接所有 3 个字符串（一项昂贵的操作）以最终得到一个 15 字节的字符串，并且您将其散列为 4 个字节。两者都将 15 个字节转换为 4 个字节，因此**理论上**两者在冲突方面非常相似。

实际上，碰撞的概率存在*一些*差异，但实际上它可能并不总是很重要。这取决于字符串将具有的数据。如果所有 3 个字符串都相等并且它们每个都散列到`0001`（我只是为了示例而使用一个简单的数字）。如果所有 3 个都相等，那么对前两个进行异或运算会得到你`0000`，而对第三个进行异或运算会让你回到`0001`. 通过连接字符串可以避免以牺牲一些性能为代价（如果您正在编写性能关键程序，我不会在内部循环中连接字符串）。

所以最后，我毕竟没有真正给出答案，原因很简单，真的没有。这一切都取决于它将在何处以及如何使用。

# c++ - 我应该避免 typedef，尽可能使用原始名称和强制转换吗？

> ID：13598543
> 
> 赞同：3
> 
> 时间：2012-11-28T05:39:48.690
> 
> 标签：c++, winapi, types, casting, typedef

我不确定这里的词汇，但希望我能让自己理解。

由于我对 C++ 的了解不够扎实，正在研究 winapi，我发现很多 typedef 的东西，对我来说，似乎使问题过于复杂，并添加了我必须记住的另一件事。

例如，`UINT`代替`unsigned int`,`HBITMAP`结果只是一个`HANDLE`，还有很多其他的。

我的问题是，我是否可以/应该尽可能替换该类型的更通用版本，并在需要时将其丢弃（以及，这叫什么）？

例如，我想写

*   `void SomeFunction(unsigned int some_int) { ... }`代替`void SomeFunction(UINT some_int) { ... }`

*   `HANDLE hBMP = LoadImage(...); ImageList_Add(... (HBITMAP) hBMP ...);`代替`HBITMAP hBMP = ...`

这对新手有好处，一般来说是不好的做法，还是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T05:51:30.297

1) Win32 API 实际上是 C，而不是 C++。

如果您考虑 MFC 或 ATL 之类的东西，它们的区别就变得更加重要，它们都是“面向对象的”、仅限 C++ 的 API。并且这两者都幸运地变得（已经变得？）过时了。

2) 微软喜欢使用大量的宏和 typedef。我不能说这是“好”还是“坏”。这只是生活中的事实。如果您长时间使用 Windows，它将成为您的第二天性。

3) 最重要的是 - 是的：当您使用 Microsoft API 时，您绝对应该遵循 Microsoft 约定。当 MSDN 页面显示“HANDLE”时使用“HANDLE”是一件好事。类似的建议适用于“LPxxx”、“TRUE”、“FALSE”、“INVALID_HANDLE”、“HRESULT”等。如果这就是 MSDN 中所说的，那么这就是你应该使用的。

它不仅会使您的代码更具可读性......而且，令人惊讶的是，它还可以*防止*您可能因“再次猜测”“真实类型”而导致的细微错误。

不要*试图*“第二次猜测”这些类型。这只是一个坏主意。

遵循标准约定将使生活更轻松、更安全、更可靠和更便携。

恕我直言...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T05:48:05.747

请不要`typedef`明显（即`UINT`for `unsigned int`）。而是`typedef`传达意义。`UINT`没有比这更好`unsigned int`（有些人可能会说它更短，但说真的，它并没有*那么*短）。

在我看来，一个`typedef`长名称（如`typedef`for `std::map<unsigned int, flost>::const_iterator`）是可以的，因为它提高了可读性。`UINT`... 没那么多。

A`typedef`为特定类型/用途（如`HANDLE`）传达特定含义是体面的。`HANDLE`在我看来，比使用 raw 更好，`void*`因为 a) 我不在乎是否`HANDLE`是 a `void*`，b) 它传达了它的目的。

用于可移植性的A`typedef`很好（就像 32 位有符号整数的 typedef 一样），因为它允许平台/编译器之间更轻松的转换。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T05:48:31.143

> **这对新手有好处，一般来说是不好的做法，还是什么？**

这是一种不好的做法。您不应该使用实际类型。

typedef 通常用于在不同平台和编译器实现上的可移植性。因此，您应该避免使用实际类型而不是 typedef 的名称。使用实际类型将使您的代码与您使用的平台和编译器实现更紧密地耦合，事实上，如果这种组合发生变化，它可能无法正常工作。

此外，类型定义的名称比实际类型更直观，更广为程序员所知，这是您应该坚持使用这些名称的另一个原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T10:20:07.073

`Typedefs`不仅对便携性有用，而且对未来的打样也很有用。如果微软在某个时候决定`UINT`应该使用 a`typedef`而`unsigned long int`不是 a ，`unsigned int`那么 using`UINT`将确保您的代码继续工作。这种类型的更改极不可能发生，尤其是对于像 MS 这样的大公司的代码，但这个想法仍然成立：`typedefs`对多种抽象都有好处。它们绝不是坏事，但你偶尔会发现使用不当的例子。如果您使用其他人的 API，请始终使用他们的`typedefs`. 他们可能有充分的理由进行抽象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:21:47.843

使用 typedef 有几个原因。

1.  缩写一些类型：`typedef unsigned int UINT`
2.  可移植性：`typedef int INT64`
3.  可读性：`typedef HANDLE HBITMAP`

我宁愿阅读而`HBITMAP hBitmap = ...`不是`HANDLE hBitmap = ...`出于相同的原因（通常）不写`Animal dog = new Dog()`，因为更具体可以帮助您的代码读者，并且您不会在这里丢失任何内容，因为根据[Liskov 替换原则](https://en.wikipedia.org/wiki/Liskov_substitution_principle)，您可以使用该`dog`实例您可以在任何地方使用`Animal`实例。

如果您将 C++ 与 Boost 一起使用，您也可以考虑使用[`BOOST_STRONG_TYPEDEF`](http://www.boost.org/doc/libs/1_52_0/boost/strong_typedef.hpp)，这基本上创建了一个简单的类，因此，为您提供了一个真正的新类型（这意味着您不能像使用`HANDLE`和`HBITMAP`.

* * *

您所描述的**铸造**并不是真正的铸造，因为类型是相同的， a`typedef`只创建一个别名，而不是一个新类型。所以，写

`HANDLE hOtherBitmap = /* some code */;`

`HBITMAP hBitmap = (HBITMAP) hOtherBitmap;`

就像写作

`int i = /* some value */;`

`int k = (int) i;`

# sorting - map-reduce 中映射器阶段后隐式排序背后的动机

> ID：13598544
> 
> 赞同：1
> 
> 时间：2012-11-28T05:39:51.747
> 
> 标签：sorting, hadoop, mapreduce, mergesort

我试图理解为什么map-reduce在map端和reduce端的洗牌和排序阶段进行隐式排序，表现为内存和磁盘排序的混合（对于大量数据来说可能真的很昂贵）。

我担心的是，在运行 map-reduce 作业时，性能是一个重要的考虑因素，在处理大量数据时，在将 mapper 的输出扔给 reducer 之前基于键的隐式排序将对性能产生很大影响。

我知道在某些明确要求排序的情况下，排序可以证明是一种恩惠，但这并不总是正确的？那么，Hadoop Map-Reduce 中为什么存在隐式排序的概念呢？

对于我在提到 shuffle 和 sort 阶段时所谈论的内容的任何类型的参考，请随时简要阅读这篇文章：`Map-Reduce: Shuffle and Sort`在我的博客上：[Hadoop-Some Salient Understandings](http://hadoop-gyan.blogspot.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:03:35.267

在发布此问题后很久才想到的对上述问题的一种可能解释是：

排序只是为了将与特定键对应的所有记录聚合在一起，以便将与该单个键对应的所有这些记录发送到单个化简器（Hadoop Map-Reduce 中的默认分区逻辑）。因此，可以说，通过在 Mapper 阶段之后按键对所有记录进行排序，只允许将与单个键对应的所有记录放在一起，其中键的排序顺序可能仅用于某些用例，例如对大量数据进行排序。

如果大家的想法一样的话，能验证一下，那就太好了。谢谢。

# c# - 用于在标签文本 C#之间删除逗号的正则表达式

> ID：13598546
> 
> 赞同：0
> 
> 时间：2012-11-28T05:39:55.433
> 
> 标签：c#, .net, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:18:29.920

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:33:41.507

您可以像这样使用正则表达式来查找和修改标签的内容。

```
var input = "<a href=\"#\" class=\"main\">Getty Center, Restaurant at the</a>";
var regex = new Regex(@"<a[^>]*>(?<content>.*?)</a[^>]*>",
                      RegexOptions.Singleline);
var match = regex.Match(input);
while (match.Success) {
    var group = match.Groups["content"];
    input = input.Substring(0, group.Index)
            + group.Value.Replace(",", "")
            + input.Substring(group.Index + group.Length);
    match = regex.Match(input, group.Index);
}; 
```

该循环用于捕获同一字符串中的多个标签。然而，正则表达式相当幼稚。它会弄乱嵌套在 A 标签内的标签，并且如果 a`>`在任何属性中都会错误地解析。（尽管这可能是糟糕的 HTML。）出于这个原因，建议使用适当的 HTML 解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:08:41.207

如果要直接使用替换，则必须仅匹配逗号，而不匹配逗号之前或之后的文本。您必须使用向前看和向后看来检查逗号是否在标签中。虽然这是可行的，但不建议这样做。

另一种方法是使用匹配组来匹配标记中的整个文本，如果逗号存在，则对逗号进行分组并替换匹配项。

```
<a[^>]+>[\w\s]*(,?)[\w\s]*<\/a> 
```

第一个捕获组捕获逗号（如果存在）。你可以在这里测试它。`[http://rubular.com/r/K2jjIaObty][1]`

最好的选择是使用 html 解析器来捕获`a`标签的内容，搜索逗号并替换。

# wordpress - Wordpress SlideDeck2 插件与角色范围插件冲突

> ID：13598547
> 
> 赞同：6
> 
> 时间：2012-11-28T05:39:59.527
> 
> 标签：wordpress

我已经安装了 Wordpress v3.3.2，然后安装了 SlideDeck2 插件。它工作得很好。

之后我安装了角色范围插件版本 1.3.57。

现在，我网站上的幻灯片放映 (SlideDeck2) 仅对登录用户可见，注销时仅 iframe 可见且图像不可见。如果我禁用角色范围插件，那么幻灯片再次可见。

现在幻灯片放映仅在我登录或角色范围插件未激活时可见。

如何解决这个冲突？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:25:53.427

1.  激活两个插件
2.  在 Chrome 中打开网站
3.  按 F12 打开开发者工具
4.  转到控制台窗口
5.  是否存在提示问题的错误？
6.  禁用角色范围
7.  运行步骤 2-4
8.  错误消失了吗
9.  运行步骤 1-5 并使错误消失

# regex - 如何创建一个正则表达式来匹配内部的所有内容，包括 ... ?

> ID：13598548
> 
> 赞同：0
> 
> 时间：2012-11-28T05:40:04.417
> 
> 标签：regex, html-parsing

这是我正在使用的示例文本。我正在使用 Coda 进行查找和替换...

```
<td width="20%"><div > Item #</div></td>
<td width="20%"><div > Pole Tip</div></td>
<td width="20%"><div > Length</div></td>
<td width="20%"><div > Test Weight (lbs.)</div></td>
<td width="20%"><div > Price</div></td> 
```

我想摆脱标记 td 内文本的 div 标签。

例如...我想改变这个：

```
<td width="20%"><div > Item #</div></td> 
```

对此：

```
<td width="20%">Item #</td> 
```

* * *

到目前为止，我将其作为正则表达式：

```
<div >[\s\w\(\)#]*</div> 
```

但是，这与我的示例文本中的所有上述内容相匹配，除了：

```
<td width="20%"><div > Test Weight (lbs.)</div></td> 
```

在我的正则表达式中，我什至尝试添加 ( 和 ) ...我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:58:49.513

作为对 Andy 的回复，我同意格式良好的标记的数据解析应该保留给 DOM 导航工具。XML 肯定，或者 HTML>XML 转换器是好的。我不知道 Miles 正在使用什么，但我经常使用格式错误的 HTML，以至于标记解析器无法解析它。

在我的一些关于文档解析的 Regex 教程中，我讨论了 Regex Trim 模式，它只是零或多个空格 {\s*}。尽管您可能会回避它，因为它为 Regex 模式增加了一点点长度，但效率损失几乎为零。话虽如此...

```
(<td[^>]*>)\s*<div[^>]*>\s*((?:[^<]*(?(?!</div>\s*</td>)<))*)\s*</div>\s*(</td>) 
```

将其替换为 $1$2$3 即可获胜，并获得干净的结果。当然，您可以根据需要替换或删除任意数量的修剪 (\s*)，如果我正在解析文档或格式错误的标记，这只是个人喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:52:16.147

那是因为你错过了`.`这很好用

```
<div >[\s\w\(\)#.]*</div> 
```

# php - 文本文件中的递增数字

> ID：13598550
> 
> 赞同：6
> 
> 时间：2012-11-28T05:40:19.097
> 
> 标签：php

我想在文本文件中记录下载

有人来到我的网站并下载了一些东西，如果它还没有，它将在文本文件中添加一个新行或增加当前行。

我努力了

```
$filename = 'a.txt';
$lines    = file($filename);
$linea    = array();

foreach ($lines as $line) 
{ 
    $linea[] = explode("|",$line);
}

$linea[0][1] ++;

$a = $linea[0][0] . "|" . $linea[0][1];

file_put_contents($filename, $a); 
```

但它总是增加超过 1

文本文件格式为

```
 name|download_count 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:42:17.403

您正在`for`循环之外进行递增，并且仅访问`[0]`th 元素，因此其他任何地方都没有任何变化。

这应该看起来像：

```
$filename = 'a.txt';
$lines = file($filename);

// $k = key, $v = value
foreach ($lines as $k=>$v) { 
    $exploded = explode("|", $v);

    // Does this match the site name you're trying to increment?
    if ($exploded[0] == "some_name_up_to_you") {
        $exploded[1]++;

        // To make changes to the source array,
        // it must be referenced using the key.
        // (If you just change $v, the source won't be updated.)
        $lines[$k] = implode("|", $exploded);
    }        
}

// Write.
file_put_contents($filename, $lines); 
```

不过，您可能应该为此使用数据库。查看 PDO 和 MYSQL，您将走上令人敬畏的道路。

* * *

编辑

要执行您在评论中提到的操作，您可以设置一个布尔标志，并在您遍历数组时触发它。`break`如果您只寻找一件事，这也可能需要 a ：

```
...
$found = false;
foreach ($lines as $k=>$v) { 
    $exploded = explode("|", $v);

    if ($exploded[0] == "some_name_up_to_you") {
        $found = true;
        $exploded[1]++;
        $lines[$k] = implode("|", $exploded);
        break; // ???
    }        
}

if (!$found) {
    $lines[] = "THE_NEW_SITE|1";
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:11:23.723

我个人建议使用 json blob 作为文本文件的内容。然后您可以将文件读入 php，对其进行解码（json_decode），操作数据，然后重新保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:17:52.340

一方面您正在使用`foreach`循环，另一方面您在将其存储后仅将第一行写入文件`$a`......这让我混淆了你的`.txt`文件中有什么......

试试下面的代码......希望它能解决你的问题......

```
$filename = 'a.txt';
// get file contents and split it...
$data = explode('|',file_get_contents($filename));
// increment the counting number...
$data[1]++;
// join the contents...
$data = implode('|',$data);
file_put_contents($filename, $data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:22:08.320

与其在文本文件中创建自己的结构，不如直接使用 PHP 数组来跟踪？您还应该应用适当的锁定来防止竞争条件：

```
function recordDownload($download, $counter = 'default')
{
    // open lock file and acquire exclusive lock
    if (false === ($f = fopen("$counter.lock", "c"))) {
            return;
    }
    flock($f, LOCK_EX);

    // read counter data
    if (file_exists("$counter.stats")) {
            $stats = include "$counter.stats";
    } else {
            $stats = array();
    }

    if (isset($stats[$download])) {
        $stats[$download]++;
    } else {
        $stats[$download] = 1;
    }

    // write back counter data
    file_put_contents('counter.txt', '<?php return ' . var_export($stats, true) . '?>');

    // release exclusive lock
    fclose($f);
}

recordDownload('product1'); // will save in default.stats
recordDownload('product2', 'special'); // will save in special.stats 
```

# xmpp - gloox 是否通过 BOSH 支持 BOSH 和 XMPP？

> ID：13598551
> 
> 赞同：1
> 
> 时间：2012-11-28T05:40:34.447
> 
> 标签：xmpp, http-1.1

gloox 库是否支持 BOSH(XEP 124) 和 XMPP over BOSH(XEP 206)。由于 gloox 社区不活跃，我认为这是发布此问题的正确位置。非常感谢对此的任何回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:49:41.833

它根据文档： [http ://camaya.net/api/gloox-1.0-beta7/classgloox_1_1ConnectionBOSH.html](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1ConnectionBOSH.html)

# java - 使用控制器中的代码查找 Spring MVC 3.1 中是否存在 URL 映射

> ID：13598552
> 
> 赞同：4
> 
> 时间：2012-11-28T05:40:37.663
> 
> 标签：java, url, spring-mvc

我正在使用 Spring 3.1 MVC，并且在其中一个请求中我得到了 URL 参数。例如`http:/myapp/controllername?url=someurl` ，我需要在我的控制器方法中找出我的应用程序中是否配置了某些 URL。

我尝试使用`RequestMappingHandlerMapping`实例来获取

```
Map<RequestMappingInfo, HandlerMethod> handlerMethods = handlerMapping.getHandlerMethods(); 
```

但是我有一个字符串，它是 URL，我需要创建一个`RequestMappingInfo`对象来在这个地图中查找，它没有任何基于 URL 的构造函数。

如何使用控制器中的代码查找 Spring mvc 3.1 中是否存在 URL 映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:42:49.577

您可以使用 requestMappingInfo.getPatternsCondition() 来检查映射路径；它有 toString 方法供您与您的 url 字符串进行比较。

```
Set<RequestMappingInfo> rmSet = handlerMapping.getHandlerMethods().keySet();
for (RequestMappingInfo rm : rmSet) {

    if("[YourURLPath]".equals(rm.getPatternsCondition().toString())) {
        // URL mapping matched 
    }
} 
```

示例：对于 url `http://mydomain/test/abc`，上述条件应为

`if("[/test/abc]".equals(rm.getPatternsCondition().toString()))`

我相信您已经在控制器中自动装配了 handlerMapping 对象，如下所示

```
@Autowired
private RequestMappingHandlerMapping handlerMapping; 
```

# algorithm - 根据嵌套类型过滤对象列表

> ID：13598554
> 
> 赞同：3
> 
> 时间：2012-11-28T05:40:59.270
> 
> 标签：algorithm, scala, collections, iteration

假设我有一个课程如下：

```
case class Person(
name:String,
age:Int,
dependents:List[Person]
) 
```

假设我有以下四个人：

```
val p1 = Person("Tom",50,List(p2,p4))
val p2 = Person("Bob",20,List(p3))
val p3 = Person("Jimmy",25,List(p4))
val p4 = Person("Harry",11,Nil) 
```

我的人员列表是 val pList = List(p1,p2,p3,p4)

我想过滤此集合以获取所有有 11 岁受抚养人的人。

一种方法是什么？

该算法可以总结为对于pList中每个人（p）的每个被抚养人（d），如果被抚养人（d）的年龄== 11，则收集人（p）。

我如何在scala中表达它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T05:43:08.327

获取人员列表，并对其使用过滤器方法，检查每个受抚养人是否包含年龄为 11 岁的人员。

```
pList.filter(_.dependents.exists(_.age == 11)) 
```

这显然只会检查 1 层深度，因此在您的示例中，它将返回`Tom`and `Jimmy`，因为它们是唯一`Persons`一个 11 岁的直接受抚养人：

```
Person(
  Tom,
  50,
  List(Person(Bob,20,List(Person(Jimmy,25,List(Person(Harry,11,List()))))), Person(Harry,11,List()))
  )
Person(
  Jimmy,
  25,
  List(Person(Harry,11,List()))
  ) 
```

或者，您可以使其更通用，如下所示：

```
def dependentAged(age: Int)(person: Person) = person.dependents.exists(_.age == age)
val filtered = pList.filter(dependentAged(11)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T05:54:07.250

您对算法的描述很好地转化[为 scala 中的理解](http://www.scala-lang.org/node/111)。

> 对于 pList 中每个人（p）的每个受抚养人（d），如果受抚养人（d）的年龄 == 11，则收集人（p）

我们迭代并在每次迭代时`pList`创建一个新变量。`person`如果此人的家属符合守卫标准，则我们`yield`来自`pList`. IE`if person.dependents.exists(dependent => dependent.age == 11)`

`for`和`yield`：_

```
for(person <- pList if person.dependents.exists(dependent => dependent.age == 11)) yield person 
```

这给出了两个人的列表：

```
List[Person] = List(
  Person(Tom,50,List(Person(Bob,20,List(Person(Jimmy,25,List(Person(Harry,11,List()))))),     
  Person(Harry,11,List()))), Person(Jimmy,25,List(Person(Harry,11,List())))
) 
```

# android-widget - android:background - "?attr/actionBarItemBackground" .. 它是如何工作的？

> ID：13598560
> 
> 赞同：1
> 
> 时间：2012-11-28T05:41:31.230
> 
> 标签：android-widget, actionbarsherlock

我已经看到了两种为 Android 应用程序屏幕设置背景的方法。

案例 A:: android:background="?attr/actionBarItemBackground"

案例 B:: android:background="@drawable/ic_launcher_settings"

案例 A 中的 android:background 功能如何？我搜索了代码，但无法弄清楚“actionBarItemBackground”的存在位置。我理解案例B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:12:56.683

案例 A 是对样式属性的引用。它允许您在不知道其实际值的情况下引用特定的样式信息。有很多 Android 定义的属性用于设置 Android UI 的样式，但您也可以定义自己的属性。

[`actionBarItemBackground`](http://developer.android.com/reference/android/R.attr.html#actionBarItemBackground)就是这样一个属性。有两种方法可以使用此属性：

1.  您可以参考它以使 UI 元素的外观与操作栏项保持一致：

    ```
    <com.mycompany.MyView
        android:id="@+id/myView"
        android:background="?attr/actionBarItemBackground"/> 
    ```

2.  您可以定义主题并设置此属性的值以覆盖您的应用程序的默认 L&F：

    ```
    <style name="MyTheme" parent="@android:style/Theme">
        <item name="android:actionBarItemBackground">#383c44</item>
    </style> 
    ```

以下是一些指向 Android 文档的指针：

有关样式和主题，请参见：http:
[//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)。

有关所有属性的列表，请参见：http:
[//developer.android.com/reference/android/R.attr.html](http://developer.android.com/reference/android/R.attr.html)

对于定义您自己的属性，没有文档。`attrs.xml`查看SDK 中的一个文件（例如，在 下`platforms\android-17\data\res\values`），了解样式属性是如何声明的。`attrs.xml`您可以通过将文件放入文件夹中以相同的方式声明属性`res\values`。然后，您可以在自己的样式和主题中使用这些属性。

# iphone - 页面布局的数据结构，如 CSS 浮动

> ID：13598562
> 
> 赞同：0
> 
> 时间：2012-11-28T05:42:01.310
> 
> 标签：iphone, ios, ipad, layout, data-structures

假设我有自己的标记语言，它允许我使用一组 TextElements 和 ImageElements。它们中的每一个都可以具有诸如“float：left/right/none”和“clear：none/left/right/both”之类的属性。此外，非浮动元素可以在浮动元素周围流动。基本上，都喜欢 CSS 浮动布局。

例如：

Elem1 Elem2 Elem3 Elem4 Elem5 **_ *Elem6***

在我布置这些元素时，用于存储这些元素的最佳数据结构是什么？我需要一些可以轻松回答以下问题的东西：

*   是否有足够的空间容纳 Element1 的左侧或右侧的 Element2？
*   Element1的页面坐标，原点和大小是多少？

我将基本上存储一个结构，如：

{元素，原点（x，y），大小（w，h）}

对于此数据结构中的每个已布局的元素。

有诸如 RTrees、QuadTrees 之类的东西，但我想要一些简单的东西来抽象地表示页面上矩形的布局，以便在我的布局算法中使用。

注意：我不是在 HTML 中这样做，它是用于 iOS 应用程序中的元素布局，并且我不能使用 iOS 6 约束，因为我需要支持早期的 iO​​S 版本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:10:35.307

我相信可以使二进制堆满足您的需求。[维基百科很好地解释了二进制堆。](http://en.wikipedia.org/wiki/Binary_heap)

二叉堆有两个属性可以满足你的需求：

1.  它是一棵完整的树，在结构上类似于元素的布局页面。
2.  对节点进行排序，使得每个节点都大于（或小于，取决于您想要的）其子节点。在您的情况下，“更大”是指“放置在更左侧和顶部”。

您有一个元素列表，在没有浮动的情况下，这些元素将按顺序排列，并根据需要换行。因此，在没有浮点数的情况下构建堆只会按照接收到的顺序将节点添加到树中。

浮点数使这一点复杂化，因为它们的位置高于它们之前的节点（或者在右浮点数的情况下低于它们后面的节点）。幸运的是，通过将新节点冒泡到适当的位置来构建堆可以实现这一点。因此，只要您可以定义一个函数来相对于其对等元素对浮动元素进行排序，就可以工作。

如果我不确定，不幸的*是*，我现在没有足够的时间更全面地探索这个想法。

无论如何，假设您有一个正确的堆，重复删除最顶部的元素应该按照它们应该放置在页面上的顺序枚举节点。

我认为[CHDataStructures](http://cocoaheads.byu.edu/code/CHDataStructures)有一个二进制堆，但我无法验证这一点，因为保存文档的服务器在发布时似乎处于脱机状态。

祝你好运，我希望这会有所帮助。

# bash - bash: mv inside for 循环只是背诵用法

> ID：13598563
> 
> 赞同：1
> 
> 时间：2012-11-28T05:42:02.027
> 
> 标签：bash

假设我正在尝试将文件从“aa -- bb.pdf”形式移动到“bb -- aa.pdf”。

显而易见的方法是：

```
for f in *;
do 
mv $f $(echo "$f" | sed -E 's/(.\*) -- (.\*)(\..\*)/\2 -- \1\3/'); 
done 
```

我需要在一些参数周围添加单引号，因为各种参数内部都有空格，无法正确提取，所以它实际上应该看起来更像这样：

```
for f in *; 
do 
    $(echo mv "'"$f"'" "'"$(echo "$f" | sed -E 's/(.\*) -- (.\*)(\..\*)/\2 -- \1\3/')"'");
done 
```

但无论我这样做，我得到的只是 mv 的标准用法独奏会：用法：`mv [-f | -i | -n] [-v] source target` 等。

当我将它输出到屏幕时，它看起来很棒：

```
mv 'aa -- bb.pdf' 'bb -- aa.pdf' 
```

但无论我尝试什么变体，它只是背诵用法（大概告诉我我的语法有问题），我不知道为什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:47:46.043

这是一个 bash 实现：

```
re="(.+) -- (.+)([.].+)"
for f in *; do
    if [[ $f =~ $re ]]; then 
        newf="${BASH_REMATCH[2]} -- ${BASH_REMATCH[1]}${BASH_REMATCH[3]}"
        mv -- "$f" "$newf"
    fi
done 
```

您错误的原因很可能是`--`“`mv`选项结束”。`--`在文件名之前添加一个附加项应该可以解决问题。

# c++ - 如何通过将类的对象和成员函数传递给 c++ 中的另一个函数来调用类？

> ID：13598564
> 
> 赞同：0
> 
> 时间：2012-11-28T05:42:09.407
> 
> 标签：c++, object, execute, member

如何通过将对象和成员函数传递给 C++ 中的另一个函数来执行成员函数。我确实明白我的问题的答案就在那里；但是，我不知道这叫什么。到目前为止，我创建了 2 个文件，exeFunc.h 和 exeFunc.cpp。他们的代码包括：

exeFunc.h

```
/*
File: exeFunc.h

Header file for exeFunc Library.
*/

#ifndef EXEFUNC_H
#define EXEFUNC_H

#include "mbed.h"
#include "msExtensions.h"
#include "cfExtensions.h"

#include <map>

class exeFunc
{

public:
    exeFunc(msExtensions &msExt, cfExtensions &cfExt);

private:

    void _splitFuncFromCmd();
    void _attachCallback();

    msExtensions &_msExt;
    cfExtensions &_cfExt;

    //FunctionPointer _p;
};

#endif 
```

exeFunc.cpp

```
/*
File: exeFunc.cpp

Execute functions in other Sensor libraries/classes

Constructor
*/

#include "mbed.h"
#include "ConfigFile.h"
#include "msExtensions.h"
#include "cfExtensions.h"
#include "exeFunc.h"

#include <map>
#include <string>

using namespace std;

exeFunc::exeFunc(msExtensions &msExt, cfExtensions &cfExt) : _msExt(msExt), _cfExt(cfExt)
{
    //_cfExt.checkConfigForFirstStart();
    //_p.attach(&_cfExt, &cfExtensions::checkConfigForFirstStart);

    //_p.call();

}

void exeFunc::_splitFuncFromCmd()
{

}

void exeFunc::_attachCallback()
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:57:12.277

我写了一个完整的例子，可能会有所帮助

```
class MyClass
{
public:
    MyClass(int b)
        :_b(b)
    {
    }

    int Foo(int a)
    {
        return a * _b;
    }
    int _b;
};

typedef int (MyClass::*MFP)(int);

int get_result(MyClass* obj, MFP mfp)
{
    int r = (obj->*mfp)(5); // 30
    return r;
}

int _tmain(int argc, _TCHAR* argv[])
{
    MFP mfp = &MyClass::Foo;

    MyClass m(6);
    get_result(&m, mfp);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:53:31.870

你用另一个函数调用它。如果你有一个独立的函数。
老实说，您的问题并不完全清楚。但是：

```
int F(int,int,int);
int g();
//main scope 
F(g(),a,b) 
```

# kendo-ui - 参数映射在 kendo ui 的列表视图本地数据源中不起作用

> ID：13598565
> 
> 赞同：1
> 
> 时间：2012-11-28T05:42:14.630
> 
> 标签：kendo-ui

我在列表视图中使用两个数据源。第一个是列表视图数据源，第二个是本地数据源。我正在向本地数据源添加多个项目。在保存单击时，我想将本地数据源中的所有值保存到数据库中。

在按钮中单击我正在使用 localdatasource.sync() 方法来调用 create 方法。但它没有进入参数映射。

只是在我的数据库中，我有 10 个列表视图项目。最初我正在加载 1 个项目，然后单击下一个按钮，我正在加载下一个项目。然后，当我在下一个按钮上保存问题时，单击本地数据源。在完成按钮上单击我想保存所有值。

问候，

斯里兰卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:58:53.380

您是否尝试创建一个为远程操作配置的数据源，并最初通过数据源配置器的**[数据](http://docs.kendoui.com/api/framework/datasource#data-array)**字段填充它？像这样的东西：

```
 dataSource: {
        transport: {
            read: {
                "url": "/Home/GetPersons"
            },
            update: {
                "url": "/Home/UpdatePerson"
            }
        },
        data: {
            Data: [{
                PersonID: 1,
                Name: "John",
                BirthDate: "\/Date(-47876400000)\/"},
            {
                PersonID: 2,
                Name: "Sara",
                BirthDate: "\/Date(148251600000)\/"}],
            Total: 2
        }
        //... etc. other options 
    } 
```

# sqlite - sqlite.cs 找不到 sqlite3 和社区

> ID：13598567
> 
> 赞同：8
> 
> 时间：2012-11-28T05:42:22.650
> 
> 标签：sqlite, dependencies, windows-phone-8

我正在 VS 2012 Express 上开发 WP8 应用程序。为 Windows Phone 和 Sqlite-net 安装了 SQLite。并导入 SQLite for Windows Phone 作为参考。

但是，当我尝试构建项目时，它说：

错误 1 ​​找不到类型或命名空间名称“Community”（您是否缺少 using 指令或程序集引用？）

和

错误 4 找不到类型或命名空间名称“Sqlite3”（您是否缺少 using 指令或程序集引用？）

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T16:01:43.157

我认为您忘记将 USE_WP8_NATIVE_SQLITE 添加到条件编译符号中。

```
#if USE_CSHARP_SQLITE
using Sqlite3 = Community.CsharpSqlite.Sqlite3;
using Sqlite3DatabaseHandle = Community.CsharpSqlite.Sqlite3.sqlite3;
using Sqlite3Statement = Community.CsharpSqlite.Sqlite3.Vdbe;
#elif USE_WP8_NATIVE_SQLITE
using Sqlite3 = Sqlite.Sqlite3;
using Sqlite3DatabaseHandle = Sqlite.Database;
using Sqlite3Statement = Sqlite.Statement; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T07:51:36.410

我测试了一下，Windows phone 8 和 Sqlite 似乎有点问题。

解决您的问题的第一件事是将“Community.Csharpsqlite.WP”引用添加到应用程序。为此，请打开 Nuget 包管理器并键入“csharpsqlite”，然后在您的应用程序中安装生成的 nuget 包。这解决了您在问题中提到的上述两个问题。但是agian，提出了另一个问题。“Community.Csharpsqlite.WP”和“sqlite-net”中的 SQLite.cs 文件之间存在一些不兼容的方法。一种解决方案是手动修改 SQLite.cs 中的方法来解决不兼容问题。

或者，如果上述过程不适合您，请使用[dotnetslackers 链接](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)中提到的 WP7 sqlite 的过程。在一个单独的项目中测试它，希望这应该有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-26T20:30:42.477

我让它在没有 csharpsqlite 的 Windows Phone 8 上工作。

[Peterhuene 为 SQLite 创建了一个包装器，您可以从 GitHub 获得它](https://github.com/peterhuene/sqlite-net-wp8)。不再需要 csharpsqlite。自述文件部分包含所需的所有信息。

关于如何设置它的详细描述也可以[在](http://www.codeproject.com/Articles/578154/Using-SQLite-with-Windows-Phone-8-apps)CodeProject 上找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-04T17:13:19.043

在 SQLite.cs 中，有几个地方你会看到这样的行

```
#if USE_CSHARP_SQLITE
...
...
#elif USE_WP8_NATIVE_SQLITE
...
... 
```

只需将#if USE_CSHARP_SQLITE 中的代码替换为#elif USE_WP8_NATIVE_SQLITE 中的代码即可。或者还有一个简短的方法。转到属性-> 构建和之后；添加“USE_WP8_NATIVE_SQLITE”并重建解决方案。这对我有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-18T15:26:00.447

我假设您按照这篇[文章中的说明进行操作](http://social.technet.microsoft.com/wiki/contents/articles/18204.how-to-use-sqlite-with-a-windows-phone-8-application.aspx)

在帖子中有一条说明，您**将 c++ 项目添加**到名为**Sqlite 的解决方案中。**你从 github 上得到它。诚然，这在帖子中隐藏得很好，很容易错过。

将 c++ 项目包含到您的解决方案后，您应该从您的 C# 项目中添加对它的引用。

添加参考->解决方案->*选择c++“Sqlite”项目作为参考*

之后，添加构建常量 USE_WP8_NATIVE_SQLITE 它应该可以工作。

# ios - ios UIViewController以编程方式定位按钮不起作用

> ID：13598568
> 
> 赞同：2
> 
> 时间：2012-11-28T05:42:23.320
> 
> 标签：ios, constraints, autolayout

我想在一个视图中均匀分布四个按钮。在情节提要中，我将按钮放置在纵向视图中，因此间距是正确的。但是我没有找到正确的约束设置来使按钮在任何视图宽度（纵向 iPad 或横向方向）下均匀分布。因此，我添加了以下代码片段，使用第一个和第四个按钮作为锚点将按钮移动到所需位置：

```
// evenly space the buttons
CGPoint leftPoint = self.button1.center;
CGPoint rightPoint = self.button4.center;
CGFloat width = rightPoint.x - leftPoint.x;
leftPoint.x += width / 3;
rightPoint.x -= width / 3;
self.button2.center = leftPoint;
self.button3.center = rightPoint; 
```

定位代码工作正常，但我的困难是找到进行调整的最佳位置。- (void)viewDidAppear:(BOOL)animated 似乎是最好的地方。但是，如果我继续使用不同的视图，当我返回此视图时，按钮将恢复到它们的初始（故事板约束）指定位置。viewDidAppear 代码将被再次调用，但它没有成功移动按钮。就好像他们的位置在那个时间点被锁定了一样。

我想我的主要问题是是否有办法使用约束来实现我所追求的均匀间距。或者次要问题是如何覆盖这两个按钮的自动定位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:16:40.513

使用布局约束这是一件相对困难的事情，它完全取决于您想要什么。我在这里有一个示例，它创建了 4 个按钮（在代码中）以及 5 个用作按钮之间的分隔符的标签。按钮的大小由它们固有的内容大小决定，并且按钮之间的间距以及按钮与包含视图的侧面之间的间距都是相同的。

```
-(void)viewDidLoad {
   [super viewDidLoad];

    NSMutableDictionary *viewsDict = [NSMutableDictionary dictionary];
    NSArray *titles = @[@"Short",@"Longer",@"Short",@"The Longest"];
    for (int i=1; i<5; i++) {
        UIButton *b = [UIButton buttonWithType:1];
        [b setTitle:titles[i-1] forState:UIControlStateNormal];
        [b setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:b forKey:[NSString stringWithFormat:@"b%d",i]];
    }

    for (int i=1; i<6; i++) {
        UILabel *l = [[UILabel alloc ]init];
        [l setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:l forKey:[NSString stringWithFormat:@"l%d",i]];
    }

    for (id obj in viewsDict.allKeys) 
        [self.view addSubview:viewsDict[obj]];

    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[l1][b1][l2(==l1)][b2][l3(==l1)][b3][l4(==l1)][b4][l5(==l1)]|"
                                                                   options:NSLayoutFormatAlignAllBaseline
                                                                   metrics:nil
                                                                     views:viewsDict];

    NSArray *constraints2 = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[b1]-|"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict];

    [self.view addConstraints:constraints];
    [self.view addConstraints:constraints2];
} 
```

当视图大小发生变化时，按钮的间距将自动调整，例如旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:04:30.407

我得到的解决方案是以编程方式向两个中间按钮（button2 和 button3）添加约束，使它们相对于视图的中间水平放置。这两个约束让我完全删除了手动定位代码。[在容器视图中均匀分布多个视图](https://stackoverflow.com/questions/13075415/autolayout-even-spacing)的答案帮助我走上了正确的轨道。

```
- (void)viewDidLoad
{
...
    self.button2.translatesAutoresizingMaskIntoConstraints = NO;
    self.button3.translatesAutoresizingMaskIntoConstraints = NO;

    [self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.button2 attribute:NSLayoutAttributeLeading relatedBy:NSLayoutRelationEqual 
         toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:0.667 constant:0]];

    [self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.button3 attribute:NSLayoutAttributeTrailing relatedBy:NSLayoutRelationEqual 
        toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1.333 constant:0]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:57:25.797

对于几乎任何布局问题使用`layoutSubviews`方法的情况，它都是这样做的地方。

# java - 无法编写正确的算法

> ID：13598569
> 
> 赞同：2
> 
> 时间：2012-11-28T05:42:26.443
> 
> 标签：java, algorithm, loops, arraylist

我正在尝试编写一个自定义函数来循环遍历数组列表并比较四边形的四个边。每边只需要一对一比较，但我似乎无法找出循环它们的正确方法。我画了一张附在下面的图表，但我似乎无法实现正确的循环来做我想做的事情。我制作了 Bounds 类的简化版本，仅用于测试，它使用 getSide(1-4) 方法来获取边 1:North,2:East,3:South,4:West。现在我只想打印侧面以进行测试。即 (1 -> 11, 1 -> 11, 2 -> 8, 2 -> 12... 等)

编辑：我忘了提到最小的数字是我试图让我的算法通过的顺序。也可能这棵树不像我希望的那样清晰，线条基本上是向下比较四边形的每一边和它的对面。所以第一个序列是：矩形 1：1 -> 7，然后是 1 -> 11，然后移动到东边并将其与西边进行比较，依此类推，直到它通过所有边。

```
 /* Program I'm using to test my algorithm */
    public static void test()
    {
       BoundTest a,b,c,d,e,f;
       a = new BoundTest("Rectangle 1","A","B","C","D");
       b = new BoundTest("Rectangle 2","E","F","G","H");
       c = new BoundTest("Rectangle 3","I","J","K","L");

       ArrayList<BoundTest> x = new ArrayList();
       x.add(0,a);
       x.add(1,b);
       x.add(2,c);

       System.out.println(x.size());
       for(int i = 0; i <= (x.size() - 2); i++)
       {
          System.out.println(x.get(i).getName());
       }
    }

    /* Bounding Class */
    public class BoundTest 
    {
       private String north,east,south,west,name;

       public BoundTest(String name,String a,String b,String c,String d)
       { 
          this.name = "Name:" + name;
          this.north = "North:" + a;
          this.east = "East: " + b;
          this.south = "South:" + c;
          this.west = "West: " + d;
       }

       /* Get side */
       public String getSide(int a)
       {
          String returnName;

          switch(a)
          {
            case 1:
              returnName = this.north;
               break;
            case 2: 
               returnName = this.east;
               break;
            case 3: 
               returnName = this.south;
                break;
            case 4: 
               returnName = this.west;
                break;
           default:
               returnName = this.north;
               break;
         }
         return returnName;
    }
 } 
```

![在此处输入图像描述](../Images/781522ad0b3fcad1e0f3dd18ee92c914.png)

# ios - iOS Patch 程序运行时指令

> ID：13598571
> 
> 赞同：22
> 
> 时间：2012-11-28T05:42:35.397
> 
> 标签：ios, c, assembly, jailbreak, cydia-substrate

如何在应用程序运行时修改单个汇编指令？

我正在为现有应用程序编写一个 Mobile Substrate 调整。在调整的构造函数 ( `MSInitialize`) 中，我需要能够重写应用程序代码中的各个指令。我的意思是，我希望修改应用程序地址空间中的多个位置，但在每个实例中，只需要修改一条指令。我已经为应用程序禁用了 ASLR，并且知道要修补的指令的确切内存地址，并且我有新指令的十六进制字节（作为 char[]，但这并不重要，可以根据需要进行更改）。我只需要弄清楚如何执行更改。

我知道 iOS 使用数据执行保护 (DEP) 来指定可执行内存页也不能​​是可写的，反之亦然，但我知道可以在越狱设备上绕过这一点。我还知道 iDevices 使用的 ARM 处理器有一个指令缓存，需要更新以反映变化。但是，我什至不知道从哪里开始这样做。

所以，为了回答这个肯定会被问到的问题，我没有尝试过任何事情。这不是因为我懒惰；相反，这是因为我完全不知道如何做到这一点。任何帮助都将不胜感激。

# 编辑：

如果它有帮助，我的最终目标是在 Mobile Substrate 调整中使用它来挂钩 App Store 应用程序。以前，为了修改这个应用程序，必须先破解它来解密应用程序，这样才能修补二进制文件。我想让人们不必破解该应用程序，因为这可能导致盗版，我强烈反对。我不能正常使用 Mobile Substrate，因为所有工作都是用 C++ 完成的，而不是 Objective-C，并且应用程序被剥离，没有任何符号可以使用`MSHookFunction`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-07T06:26:47.403

完全忘记了我问过这个问题，所以我现在将展示我最终得到的结果。评论应该解释它的工作原理和原因。

```
#include <stdio.h>
#include <stdbool.h>
#include <mach/mach.h>
#include <libkern/OSCacheControl.h>

#define kerncall(x) ({ \
    kern_return_t _kr = (x); \
    if(_kr != KERN_SUCCESS) \
        fprintf(stderr, "%s failed with error code: 0x%x\n", #x, _kr); \
    _kr; \
})

bool patch32(void* dst, uint32_t data) {
    mach_port_t task;
    vm_region_basic_info_data_t info;
    mach_msg_type_number_t info_count = VM_REGION_BASIC_INFO_COUNT;
    vm_region_flavor_t flavor = VM_REGION_BASIC_INFO;

    vm_address_t region = (vm_address_t)dst;
    vm_size_t region_size = 0;

    /* Get region boundaries */
    if(kerncall(vm_region(mach_task_self(), &region, &region_size, flavor, (vm_region_info_t)&info, (mach_msg_type_number_t*)&info_count, (mach_port_t*)&task))) return false;
    /* Change memory protections to rw- */
    if(kerncall(vm_protect(mach_task_self(), region, region_size, false, VM_PROT_READ | VM_PROT_WRITE | VM_PROT_COPY))) return false;

    /* Actually perform the write */
    *(uint32_t*)dst = data;

    /* Flush CPU data cache to save write to RAM */
    sys_dcache_flush(dst, sizeof(data));
    /* Invalidate instruction cache to make the CPU read patched instructions from RAM */
    sys_icache_invalidate(dst, sizeof(data));

    /* Change memory protections back to r-x */
    kerncall(vm_protect(mach_task_self(), region, region_size, false, VM_PROT_EXECUTE | VM_PROT_READ));
    return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T20:44:48.957

vm_protect 到 w^x，假设你已经越狱了一个不错的越狱（例如，如果 mobilesubstrate 工作）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T15:57:00.030

正如上面其他人所说，从处理器寄存器写入指令存储器有点棘手。尤其是对于 iPhone，因为 Apple 试图对处理器细节保密。

内存访问权限是第一个问题。可执行内存通常不可写。但是，如果克服了这一点，则需要进行一些操作才能将数据从处理器寄存器中取出并输入指令流水线。一般来说，有同步指令，它强制在它们之前和之后的内存访问上具有特定的顺序，以及缓存命令，它强制将脏数据写入内存并清除干净的和可能陈旧的读取数据。这两者都高度依赖于处理器的详细实现。

Arm 在网络上有很好的手册，详细解释了特定处理器的这些内容。但是，iPhone 内部的处理器是否按照公开的 Arm 手册所说的那样做，我不知道。

这是一个开始了解一个处理器的 Arm 内存同步模型的地方：http: //infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0092b/ [ch04s03s04.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0092b/ch04s03s04.html) 然后继续告诉如何通过写入控制寄存器来刷新指令缓存。为 Arm 处理器编写自修改代码当然是可能的，因为在那本手册的某处，我发现了一个声明，说它有时是不可避免的并且必须得到支持。

（我并不是说这是一个答案。但它不适合评论。）

# android - 使用 Phonegap 在 Android 中推送通知：我需要将发件人 ID 和应用 ID 放在我的项目中的什么位置？

> ID：13598572
> 
> 赞同：3
> 
> 时间：2012-11-28T05:42:41.993
> 
> 标签：android, cordova

我想使用 Phonegap 在 Android 中实现推送通知。我已经使用[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)成功创建了一个应用程序。

我还使用[https://code.google.com/apis/console/](https://code.google.com/apis/console/)创建了我的应用程序 ID 和发件人 ID 。

谁能建议我应该将这些密钥放在我的项目中的什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:42:05.540

[在此处](http://developer.android.com/guide/google/gcm/gs.html)查看 GCM 文档，这是一个代码片段（我对文档中的原始示例进行了一些修改）：

```
public class GCMIntentService extends GCMBaseIntentService {

private static final String SENDER_ID = ""; // Your project ID from the API Console

public GCMIntentService() {
    super(SENDER_ID);
}

@Override
public void onCreate() {
    super.onCreate();
    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {
        GCMRegistrar.register(this, SENDER_ID);
    } else {
        Log.v(TAG, "Already registered");
    }
}

@Override
protected void onError(Context context, String error) {     
}

@Override
protected void onMessage(Context context, Intent message) {
         //String value = message.getExtras().getString("message");
}

@Override
protected void onRegistered(Context context, String resId) {
        // You should save the resId to use it when sending a message from your server 
}

@Override
protected void onUnregistered(Context arg0, String msg) {       
        // Delete the resId from your server
} 
```

}

要对其进行测试，您首先需要调用上述服务以将您的设备注册到 GCM 服务（并获取您将在发送消息时使用的注册 ID），您可以执行以下操作：

```
Intent registrationIntent = new Intent(
            "com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app",
            PendingIntent.getBroadcast(context, 0, new Intent(), 0));
// registrationIntent.putExtra("sender", "Your sender id"); // Better than keep the sender id hard coded in the service
context.startService(registrationIntent); 
```

要发送消息，您可以有一个简单的 Java 应用程序，如下所示（您也可以使用其他语言进行操作）：

```
public static void sendMessage(String msg) throws IOException {
    String myApiKey = "Your Browser API Key";
    String regId = "Registeration id"; // the value you received in
                                        // onRegistered() in the above
                                        // onRegistered class
    Sender sender = new Sender(myApiKey);
    Message message = new Message.Builder().addData("message", msg).build();

    Result result = sender.send(message, regId, 5); // 5 is the maximum number of trials to deliver your message

    if (result.getMessageId() != null) {
        System.out.println("Message sent");
        String canonicalRegId = result.getCanonicalRegistrationId();

        if (canonicalRegId != null) {
            // This means that the registration id got updated, so use the new one for future messages
            System.out.println("canonicalRegId: " + canonicalRegId);
        }
    } else {
        System.out.println("error: " + result.getErrorCodeName());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:07:35.230

我也使用插件。

不确定应用程序ID，但您在注册函数中传递的发送ID：

```
GCM.register(STRING_YOUR_SENDER_ID, "GCM_Event", GCM_Success, GCM_Fail ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T16:43:31.690

使用插件

```
cordova plugin add phonegap-plugin-push --variable SENDER_ID="XXXXXXX" 
```

用您的发件人 ID 替换 xxxxxx 发件人 ID 是谷歌控制台中的项目 ID/项目编号

在您的 javascript 中添加以下代码以进行注册

```
 var push = PushNotification.init({
android: {
    senderID: "XXXXXXXX" //add your sender id here
},
ios: {
    alert: "true",
    badge: "true",
    sound: "true"
},
windows: {}
});

push.on('registration', function(data) {   
    consol.log(data.registrationId);  //this function give registration id from the GCM server if you dont want to see it please comment it
    document.getElementById("gcm_id").value= data.registrationId; //showing registration id in our app. If it shows our registration process is suscess
    //$("#gcm_id").val(data.registrationId);  if you are using jquery
}); 
```

如果您想了解如何在科尔多瓦实现推送通知的更多详细信息，请通过以下链接

[http://phonegaptut.com/2016/05/31/how-to-send-push-notifications-in-phonegap-application/](http://phonegaptut.com/2016/05/31/how-to-send-push-notifications-in-phonegap-application/)

# extjs - 如何在网格列中激活渲染器函数中的侦听器

> ID：13598574
> 
> 赞同：3
> 
> 时间：2012-11-28T05:42:49.687
> 
> 标签：extjs, extjs4.1

我正在使用 extjs 4，并且我有一个显示字段名称 Approval 的网格。在这里，我显示了复选框，如果值为 true，则在加载网格时将检查该复选框。但如果 dataIndex 值错误，则只会出现复选框。现在我希望如果我单击未选中的复选框，它将使用侦听器执行操作。但我无法做到。谁能帮我解决这个问题？我的代码如下：

```
{
   text: 'Approval',
   dataIndex: 'approve',
   flex: 1,
   align: 'left',
   renderer: function(value, metaData, record, row, col, store, gridView){
    if(value == true)
      {
        return '<input type="checkbox" checked="true" />';
      }else{
        return '<input type = "checkbox"  />';
         listeners: {
            this.approve();
          }
       }
     }   
  }

approve: function(){
        alert('hi');
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:18:03.930

## 旧答案

该复选框有一个[更改](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Checkbox-event-change)侦听器，该侦听器将在值更改后触发。

```
{
        xtype     : 'checkbox'
        boxLabel  : 'This is my checkbox',
        name      : 'mycheckbox',
        inputValue: true,
        listeners : {
              change: function(cbx, newValue, oldValue){
                     me.approve();
              }
        }
} 
```

请注意，您不能`this`在侦听器内部使用，因为该函数在另一个范围内被调用。

# 编辑：

开始[`Ext.ux.CheckColumn`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn)在您的网格上使用 a 。

现在您可以使用：

```
{ 
    xtype: 'checkcolumn',
    text: 'Approval',
    dataIndex: 'approve',
    flex: 1,
    align: 'left',
    sortable: false,
    listeners:{
        checkchange:function(cc,ix,isChecked){
            alert(isChecked);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:05:05.627

您尝试归档的内容不可能开箱即用。

我猜你想一直显示复选框？否则，**[CellEditor](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing)**插件已经是您正在寻找的。

但无论如何它应该是开始的点（我猜）。这是一个示例代码，它使用 ExtJS 类和图像在单元格中显示一种假组合以及单元格编辑器。有人认为您仍然需要解决；您需要在编辑开始之前覆盖单元格内容，因为单元格编辑器似乎只删除了默认类型。

**往这边走？**当然，您可以使用唯一 id 修改复选框并为其获取 Ext.Element，这样您现在就可以注册事件。但是这种方法有一个缺点，您需要关心渲染时间，否则当您尝试获取它时您的组合不存在。因此，我向您推荐这种方法。在渲染开始之前擦除图像很容易。

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        {"name":"Lisa", "email":"lisa@simpsons.com", "phone":true},
        {"name":"Bart", "email":"bart@simpsons.com", "phone":false},
        {"name":"Homer", "email":"home@simpsons.com", "phone":true},
        {"name":"Marge", "email":"marge@simpsons.com", "phone":true}
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        {header: 'Name',  dataIndex: 'name', editor: 'textfield'},
        {header: 'Email', dataIndex: 'email', flex:1},
        {header: 'Phone', dataIndex: 'phone',
         editor: { xtype: 'checkbox', inputValue: 'true', uncheckedValue: 'false' }, renderer: function(value){ 
             return value ? '<span class="x-form-cb-checked"><div class="x-form-checkbox"></div></span>' : '<div class="x-form-checkbox"></div>';  
         }
  }
    ],
    selType: 'cellmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

这是**[JSFiddle](http://jsfiddle.net/VVQGh/)**

# linux - 根据列匹配从两个输入文件创建输出文件

> ID：13598577
> 
> 赞同：1
> 
> 时间：2012-11-28T05:43:02.467
> 
> 标签：linux, bash, sed, awk

我需要使用 linux 命令从两个输入文件创建一个文件

输入1：

```
21 33210001 rs60180678 G T 100 PASS AVGPOST=1.0000;RSQ=0.9885;THETA=0.0002;AA=G;AN=2184;VT=SNP;LDAF=0.0019;SNPSOURCE=LOWCOV;AC=4;ERATE=0.0003;AF=0.0018;AFR_AF=0.01 GT:DS:GL 
```

输入 2：

```
21 33210001 . G T . . ;AA=0.0163934;AFE=0;ASNE=0;EUN=0;AFW=0.0113636;MED=0;LAT=0;VT=SNP;AF=0.0018 
```

预期输出：

```
21 33210001 rs60180678 G T . . ;AA=0.0163934;AFE=0;ASNE=0;EUN=0;AFW=0.0113636;MED=0;LAT=0;VT=SNP;AF=0.0018 
```

每列由制表符空格分隔。

**根据第 1、2、4 和 5 列匹配创建输出**。

out 文件的每一列由制表符空格分隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:06:09.643

这是一种方法`awk`：

```
awk 'BEGIN { FS=OFS="\t" } FNR==NR { a[$1,$2,$4,$5]=$3; next } ($1,$2,$4,$5) in a { $3=a[$1,$2,$4,$5] }1' file1 file2 
```

结果：

```
21 33210001 rs60180678 G T . . ;AA=0.0163934;AFE=0;ASNE=0;EUN=0;AFW=0.0113636;MED=0;LAT=0;VT=SNP;AF=0.0018 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:55:29.167

另一种解决方案：

```
awk 'BEGIN{FS=OFS="\t"}{getline a < "file2"; split(a,b,"\t");print $1,$2,$3,$4,$5,b[6],b[7],b[8]}' file1 
```

# javascript - 在不影响一个指定元素的情况下进行浏览器转换

> ID：13598580
> 
> 赞同：0
> 
> 时间：2012-11-28T05:43:10.167
> 
> 标签：javascript, html, css

我正在为我的网站开发网页缩小和放大选项，我使用浏览器`Transform`（[转换 CSS 属性](http://www.css3files.com/transform/)）将我的网页缩放到原始视图的 90%

```
In Chrome-   document.body.style.webkitTransform = 'scale(' + value + ')'; 
```

**90% 的值为 0.9。**

但是我的网页有一个我不想缩放的**html 元素，我想将它保持在相同的原始视图/大小..**

有什么可能的方法吗？

注意：我尝试将该 html 元素放在`</body>`标记之后，但仍将其缩放到 90%...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:48:20.473

将主体缩放到 90%，然后将特殊元素缩放*回*其原始大小：

```
document.body.style.webkitTransform = 'scale(0.9)';
specialElement.style.webkitTransform = 'scale(1.111111)'; 
```

# ruby-on-rails - 涉及多个数据库的 Active Record 和多线程

> ID：13598583
> 
> 赞同：4
> 
> 时间：2012-11-28T05:43:27.517
> 
> 标签：ruby-on-rails, activerecord

我有一个多宿主的 Rails 应用程序。

`foo.mysite.com`与“foo”分贝对话。

`bar.mysite.com`与“酒吧”分贝交谈。

这是通过调用：

`ActiveRecord::Base.connection_handler.establish_connection("ActiveRecord::Base", foo_spec)`

当对 foo 的请求进入时，它使用 foo_spec，当对 bar 的请求进入时，它使用 bar_spec。

万事如意，天下太平。

然而，

我也使用`sidekiq`，它是多线程的。

我在 sidekiq 中出现了奇怪的行为。通常当我以为我正在与 foo_db 交谈时，`ActiveRecord::Base.connection`被指向 bar_db。

我深入研究了代码，发现：

```
 def retrieve_connection_pool(klass)
    pool = @class_to_pool[klass.name]
    return pool if pool
    return nil if ActiveRecord::Base == klass
    retrieve_connection_pool klass.superclass
  end 
```

原来 AR 的内部设计只允许 AR::Base 了解单个连接池。

有什么方法可以让线程 1 与 db1 通信，线程 2 同时与 db2 通信，使用`ActiveRecord::Base.connection`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-23T20:53:03.850

我建议使用 Postgres 和单独的模式，而不是完全单独的数据库；那是你可以共享池。

用法看起来像：`select * from foo.users`,`select * from bar.users`

您会将模式作为参数传递给您的后台工作人员。

# c++ - C++ FSTREAM 和类

> ID：13598584
> 
> 赞同：0
> 
> 时间：2012-11-28T05:43:30.690
> 
> 标签：c++

好的，所以当我开始使用类来制作函数时，它给了我一个错误文件无效，如果我不使用类通常不会。如果你运行它，输入一些信息，然后再次运行它，通常它应该正确读取数据，它仍然读取它，但它说有一个错误。我真的不知道我做错了什么，有什么提示吗？谢谢！

```
#include <iostream>
#include <fstream>
#include <cstring>
#include <cctype>
using namespace std;

const int TEMP_SIZE = 10;
const int NAME_SIZE = 100;
const int BREED_SIZE = 100;
const int DESC_SIZE = 250;
const int REASON_SIZE = 250;
const int ID_SIZE = 50;

//creating the struct
struct animal
{
    char name[NAME_SIZE];
    char ID[ID_SIZE];
    char breed[BREED_SIZE];
    float age;
    float weight;
    char desc[DESC_SIZE];
    char reason[REASON_SIZE];
    int day;
    int month;
    int year;
    float length;
};

struct adopted
{
    char hostName[100];
    char hostAddress[100];
    int numPets;
};

class petAdoption
{
    public:
        petAdoption();
        //~petAdoption();
        void enroll(animal newAnimal[]);
        void read(animal newAnimal[]);
    private:
        int count;
        int numPets;
        int * pets;
};

petAdoption::petAdoption()
{
    count = 0;
    pets = NULL;
    numPets = 0;
}

void petAdoption::enroll(animal newAnimal[])
{
            cout << "Please enter your pet's name: ";
            cin.get(newAnimal[count].name, NAME_SIZE, '\n');
            cin.ignore(100, '\n');

            cout << "Please enter a unique ID for your pet (combinations of numbers EG: 432FD3): ";
            cin.get(newAnimal[count].ID, ID_SIZE, '\n');
            cin.ignore(100, '\n');

            cout << "What type of breed is your pet?: ";
            cin.get(newAnimal[count].breed, BREED_SIZE, '\n');
            cin.ignore(100, '\n');

            cout << "How old is your pet?: ";
            cin >> newAnimal[count].age;
            cin.ignore(100, '\n');

            cout << "How much does your pet weigh? (in LBS): ";
            cin >> newAnimal[count].weight;
            cin.ignore(100, '\n');

            cout << "Please describe your pet's personality!: ";
            cin.get(newAnimal[count].desc, DESC_SIZE, '\n');
            cin.ignore(100, '\n');

            cout << "Please explain why the pet is being put up for adoption: ";
            cin.get(newAnimal[count].reason, REASON_SIZE, '\n');
            cin.ignore(100, '\n');

            cout << "Please enter your pet's day of birth (1-31): ";
            cin >> newAnimal[count].day;
            cin.ignore(100, '\n');

            cout << "Please enter your pet's month of birth (1-12): ";
            cin >> newAnimal[count].month;
            cin.ignore(100, '\n');

            cout << "Please enter your pet's year of birth (1900-2012) : ";
            cin >> newAnimal[count].year;
            cin.ignore(100, '\n');

            cout << "Please enter the length of time your pet has spent in a shelter (in months): ";
            cin >> newAnimal[count].length;
            cin.ignore(100, '\n');
/*** WRITES the pet ID into the list of pets***/
            ofstream write;
            write.open("pets.txt", ios::app);
            write << newAnimal[count].name << '\n';
            write.close();

/*** WRITES EACH PET INFO ****/
//this opens the file / creates a file if it's not made yet
//and it writes the pet's information
        write.open(newAnimal[count].name, ios::app);    
        write << newAnimal[count].name << '\n'
        << newAnimal[count].ID << '\n'
        << newAnimal[count].breed << '\n'
        << newAnimal[count].age << '\n'
        << newAnimal[count].weight << '\n'
        << newAnimal[count].desc << '\n'
        << newAnimal[count].reason << '\n'
        << newAnimal[count].day << '\n' 
        << newAnimal[count].month << '\n'   
        << newAnimal[count].year << '\n'    
        << newAnimal[count].length << '\n';
//this closes the file
        write.close();
}

void petAdoption::read(animal newAnimal[])
{
    ifstream read;
//open the file apps.txt
    read.open("pets.txt");
//if apps.txt doesn't exist, then print out this error
    if(!read)
    {
        cout << "pets.txt doesn't exist! This is your first time!" <<endl;
    }
//else if it does exist, read in the names and store them back
//into the struct member name(s)
    else 
    {
//while the document isn't empty
//read in each line
        while(!read.eof())
        {
        read.getline(newAnimal[count].name, NAME_SIZE, '\n');
        ++count;
        }
        count = count-1;
    }
//close the file
    read.close();
    for (int i = 0; i < count; ++i)
    {
//open the file of the name of the app
        read.open(newAnimal[count].name);
//if the file doesn't exist
//then we probably deleted it
//without removing it from the apps.txt
//but it prints out an error
        if( !read)
        {
            cout << "invalid file!" <<endl;
        }
//however if the file does exist, 
//read in each line and store them back
//into the struct members
        while(!read.eof())
        {
            read.getline(newAnimal[count].name, NAME_SIZE, '\n');
            read.ignore(100, '\n');
            read.getline(newAnimal[count].ID, ID_SIZE, '\n');
            read.ignore(100, '\n');
            read.getline(newAnimal[count].breed, BREED_SIZE, '\n');
            read.ignore(100, '\n');
            read >> newAnimal[count].age;
            read.ignore(100, '\n');
            read >> newAnimal[count].weight;
            read.ignore(100, '\n');
            read.getline(newAnimal[count].desc, DESC_SIZE, '\n');
            read.ignore(100, '\n');
            read.getline(newAnimal[count].reason, REASON_SIZE, '\n');
            read.ignore(100, '\n');
            read >> newAnimal[count].day;
            read >> newAnimal[count].month;
            read >> newAnimal[count].year;
            read >> newAnimal[count].length;
            read.ignore(100, '\n');
        }
//close the file
        read.close();
    }
}

int main()
{
    animal newAnimal[10];
    petAdoption adopt;
    adopt.read(newAnimal);
    adopt.enroll(newAnimal);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T10:52:27.480

我想我知道发生了什么。当你说 read.open("pets.txt"); 它应该说 read.open("pets.txt"),ios::app 因为那样它就不会删除它已经存储的数据。还可以进入文件资源管理器并搜索 pets.txt 并阅读它以查看发生了什么。我希望我对你有所帮助。

# ruby-on-rails - 如何使用 Fedora Ruby 堆栈设置一个简单的 Ruby on Rails 应用程序

> ID：13598585
> 
> 赞同：0
> 
> 时间：2012-11-28T05:43:38.673
> 
> 标签：ruby-on-rails, ruby, fedora

如何使用 yum 安装的软件包设置 Rails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T17:26:46.150

只是不要那样做。我想不出任何不使用某种 Ruby 版本管理软件的正当理由——如果是这样，可能是我的无知，请赐教——。

如果您决定使用[RVM](http://rvm.io) - 完美记录、支持、更新 bla bla bla..-

只需使用以下命令即可轻松安装它：

```
$ \curl -sSL https://get.rvm.io | bash 
```

安装完成后，您可以自由地在系统中安装尽可能多的 Ruby 版本，而无需担心任何冲突……安装 Ruby 版本就这么简单（无需担心依赖！！）：

```
$ rvm install 2.1 
```

完成此步骤后，您可以将其设为默认值：

```
$ rvm use 2.1 --default 
```

而从现在开始，使用[gemset](https://rvm.io/gemsets/basics) s 你就有了自由的力量！

如果您不想创建任何特定的 gemset，您可以随意使用默认的 gem，无需进行任何设置。创建一个 Rails 应用程序？

```
$ gem install rails
$ rails new myApp 
```

干杯。可是等等...

请...只是不要使用堆栈红宝石。

更新：[rbenv](https://github.com/sstephenson/rbenv)是另一个不错的选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T16:42:06.750

如果您不包含**sudo yum install ruby** ​​-devel ，则会收到错误消息，找不到 ruby​​.h。

# php - 致命错误：调用未定义的方法 DateTime::add()

> ID：13598588
> 
> 赞同：1
> 
> 时间：2012-11-28T05:43:51.853
> 
> 标签：php, datetime

```
<?php
function OtherDAY($start,$total){

    $date = new DateTime("$start");
    $date->add(new DateInterval('P'.$total.'D'));
    $finish=$date->format('Y-m-d');
    return $finish;

}

$start=date("Y-m-d");
$otherday=OtherDAY("$start",'15');
die($otherday);`
?>` 
```

在我杀死它后它显示“不是日期格式”，**如何解决这个问题**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:42:53.510

改变：

```
$date = new DateTime("$start"); 
```

至

```
$date = new DateTime($start); 
```

和

```
$otherday=OtherDAY("$start",'15'); 
```

至

```
$otherday=OtherDAY($start,'15'); 
```

您没有传递变量的值，因为您将其作为字符串传递

# php - PHP时间戳在总剩余小时数中不同

> ID：13598590
> 
> 赞同：2
> 
> 时间：2012-11-28T05:44:04.667
> 
> 标签：php, datetime, time

我正在实现一个应用程序，其中我必须显示从结束日期到开始日期的总小时数的时间差。假设我在时间戳中有开始日期和结束日期。那么我将如何获得总小时的日期差异？现在我正在使用下面的代码

```
 $intervalo = date_diff(date_create(), date_create($end));
    pr($intervalo); 
```

输出就像

```
DateInterval Object
(
    [y] => 0
    [m] => 1
    [d] => 4
    [h] => 18
    [i] => 41
    [s] => 2
    [invert] => 0
    [days] => 34
) 
```

上面的代码显示了结束日期的总小时数大于 1month 它在数组中显示 1m。但我只想要总小时数只有任何人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:56:14.603

不要使用`date_diff`. 将日期转换为时间戳（表示秒），将两者相减，然后除以`3600`.

```
$x = date_create();
$y = date_create($end)
$hours = ($y->getTimestamp() - $x->getTimestamp()) / 3600; 
```

如果你想要小时、分钟和秒：

```
$x = date_create();
$y = date_create($end)
$diff = ($y->getTimestamp() - $x->getTimestamp());

$seconds = $diff % 60;
$diff    = (int)($diff / 60);
$minutes = $diff % 60;
$diff    = (int)($diff / 60);
$hours   = $diff; 
```

# objective-c - 用于 ac 文件的目标 c 包装器

> ID：13598591
> 
> 赞同：1
> 
> 时间：2012-11-28T05:44:11.057
> 
> 标签：objective-c, c, ios6, wrapper

我浏览了很多网站，但他们到处都给出了如何为 c++ 库编写包装器。

现在，我有一个 .c 文件，我想将它集成到我的应用程序中。由于Objective c是c的面向对象的扩展，我真的需要为它编写包装器吗？如果是，该怎么做？如果我不需要，那么如何在我的项目中使用 c 代码？

**编辑：**好的..我要做的就是将文件添加到我的项目中并使用这些功能？具体怎么做？？就像正常的c调用一样？如果我必须传递参数怎么办？

假设我有一个返回字符串的函数，首先我如何调用该函数？如果它返回一个字符串，我可以将该值存储在普通的 NSString 中吗？还是我应该为它声明 ac 字符串？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:48:14.153

您可以像往常一样简单地使用您的 C 代码：

```
-(void)writeString:(NSString*)data toFile:(NSString*)filename {
    FILE* output = fopen([filename UTF8String], "w");
    fprintf(output, "%s", [data UTF8String]);
    fclose(output);
} 
```

对于其他 .c 文件，只需 #include 相应的标头即可。然后，您可以调用它的函数。

例如，如果这是 foo.h：

```
int add(int a, int b); 
```

和 foo.c：

```
#include "foo.h"

int add(int a, int b) {
    return a + b;
} 
```

然后在您的 Objective-C 代码 (Bar.m) 中：

```
-(int)addA:(int)a andB:(int)b {
    return add(a, b);
} 
```

这基本上是一个包装器。但是，Objective-C 中的 C 代码不需要包装器。甚至 C++ 函数也不需要包装器，因为有 .mm 文件是 Objective-C++ 源代码。

编辑：

要使用参数调用 C 函数，只需使用参数调用它们。从字面上看，任何有效的 C 程序也是有效的 Objective-C 程序。如果它可以编译为 .c 文件，它将编译为 .m 文件。

要将 C 字符串 ( `char*`) 转换为 NSString：

```
const char* myString = "Hello!";
NSString* myNSString = [NSString stringWithUTF8String:myString]; 
```

# objective-c - 删除 TabBar 按钮发光（不在图像上 - 隐藏按钮的选择色调）

> ID：13598600
> 
> 赞同：4
> 
> 时间：2012-11-28T05:45:05.433
> 
> 标签：objective-c, ios, uitabbarcontroller, uitabbaritem

我创建了一个标签栏应用程序，我正在使用带有背景图像的自定义标签栏。我已经完成了所有部分，但无法在点击时移除标签栏按钮的发光（我只是在点击时更改 UIButton 选择，但发光仍然存在）

**如何隐藏 UITabBar 按钮的发光（即隐藏按钮的选择色调）？**

现在TabBar是这样的.. ![](../Images/4530b1ecea02a45b86cd530230a175ce.png)

需要这样的tabBar ![](../Images/62a1131bed6e0f6ed2b24acddea20447.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T06:52:57.763

您可以使用以下代码。

```
[[UITabBar appearance] setSelectionIndicatorImage:[[UIImage alloc] init]]; 
```

试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:54:20.513

这肯定会对你有所帮助。只需创建一个 UIImage 对象并将其传递给 `setSelectionIndicatorImage`property 。

```
[yourTabbar setSelectionIndicatorImage:[[UIImage alloc] init]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T06:33:05.923

更改标签栏色调颜色

`[[UITabBar appearance] setSelectedImageTintColor:[UIColor grayColor]];`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:38:09.500

```
[self.tabBarController.tabBar insertSubview:[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]] autorelease] atIndex:1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:18:54.307

您需要设置`UITabBarItem`外观：

```
[[UITabBarItem appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:[UIColor yellowColor], UITextAttributeTextColor,
                                          [UIFont systemFontOfSize:14.0f], UITextAttributeFont,nil]
                                         forState:UIControlStateHighlighted]; 
```

# iphone - 使用 xcode 4.51 为 iphone 应用程序进行通用构建

> ID：13598605
> 
> 赞同：0
> 
> 时间：2012-11-28T05:45:30.627
> 
> 标签：iphone, ipad, uiviewcontroller, xib, universal

我有一个旧项目，它为每个 UIViewControler 使用 XIB。那是为 I Phone 设计的，但现在我想用通用版本制作该项目，该项目适用于 Iphone 和 IPad 一样的墙。问题是当我将构建类型更改为通用和使用的编码，如

```
if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
    {
 // ipad coordinates
    }
else
{
 //iphone coordinates
} 
```

这在 iphone 和 ipad 上的显示是正确的，但在 ipad 上，按钮没有在整个按钮上发生点击事件，而只是在按钮的一小部分上发生。虽然我没有加载 Nib，但它在内部采用了装箱的 iphone xib 文件，我认为就是这样为什么它的按钮行为不符合 ipad 视图。我很困惑我应该做什么？如何为 Ipad 制作 XIB 的副本并根据设备加载它们。这里要提到的是，我没有从我的代码中加载任何笔尖，而是在内部调用它。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:32:42.990

对于`universal`应用程序，您可以制作 2 xib
**1 - > yourView_iPhone
2 - > yourView_iPad**

`xib`并根据你的加载每个`idiom`

```
if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
{
    yourView  *obj = [[yourView alloc]initWithNibName:@"yourView_iPad " bundle:nil];

    // ipad coordinates
}
else
{
    yourView  *obj = [[yourView alloc]initWithNibName:@"yourView_iPhone " bundle:nil];

    //iphone coordinates
} 
```

# c# - 如何在 C# 中创建此结构？

> ID：13598607
> 
> 赞同：2
> 
> 时间：2012-11-28T05:45:34.000
> 
> 标签：c#, struct, pinvoke, unions

我正在尝试在这篇[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363359%28v=vs.85%29.aspx)文章中创建以下结构。我正在尝试学习整个 FieldOffset 但不知道从哪里开始。

我基本上做了这样的事情。

```
[StructLayout(LayoutKind.Explicit, Size=12)]
public struct DHCP_OPTION_DATA_ELEMENT {
    [FieldOffset(0)]
    public DHCP_OPTION_DATA_TYPE OptionType;
    [FieldOffset(4)]
    public byte ByteOption;
    [FieldOffset(4)]
    public uint WordOption;
    [FieldOffset(4)]
    public UInt32 DWordOption;
    [FieldOffset(4)]
    public UInt32 DWordDWordOption;
    [FieldOffset(4)]
    public uint IpAddressOption;
    [FieldOffset(4)]
    public IntPtr StringDataOption;
    [FieldOffset(4)]
    public DHCP_BINARY_DATA BinaryDataOption;
    [FieldOffset(4)]
    public DHCP_BINARY_DATA EncapsulatedDataOption;
    [FieldOffset(4)]
    public string Ipv6AddressDataOption;
} 
```

但是，它向我咆哮，说明了以下例外。

```
it contains an object field at offset 4 that is incorrectly aligned or 
overlapped by a non-object field. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:56:22.260

将其视为 IntPtr，而不是字符串。

但是，在使用 IntPtr 时，请务必注意自己进行清理，因为您现在将使用非托管内存，因此 GC 不会帮助您，每次通过时都会导致内存泄漏这个结构。

正如 shf301 在另一个答案中所建议的那样，您很可能会想要使用 Marshal.PtrToStringUni 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:15:07.380

错误

> 它包含偏移量 4 处的对象字段，该对象字段未正确对齐或被非对象字段重叠。

是由于将非对象 ( [blittable](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx) ) 类型 (eg `Uint32`) 与对象类型 (non-blittable ) 重叠。编组器无法处理。marhshaler 不知道联合的哪个字段是有效的（因为它不知道如何解码`OptionType`，所以它不知道是否应该编组字符串值或整数值。尝试将整数值编组为字符串会导致崩溃（因为整数值不会指向有效的字符串），所以编组器抛出异常而不是让你崩溃。

因此，您必须通过将字符串定义为`IntPtr`'s 并使用[Marshal.PtrToStringUni()](http://msdn.microsoft.com/en-us/library/dyf0tzy4.aspx)或[Marshal.PtrToStringAnsi()](http://msdn.microsoft.com/en-us/library/7b620dhe.aspx)来手动编组字符串。

您可能对 DHCP_BINARY_DATA 也有同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:50:18.323

你有这个代码：

```
[FieldOffset(4)]
public string Ipv6AddressDataOption; 
```

字符串是引用类型（对象），其他字段是值类型（非对象）。因此，您必须更改`Ipv6AddressDataOption`.

# iphone - 如何删除以编程方式创建的标签？

> ID：13598608
> 
> 赞同：2
> 
> 时间：2012-11-28T05:45:41.263
> 
> 标签：iphone, objective-c, ios

我正在使用此代码以编程方式创建两个标签..

```
-(void)addLabel:(id)sender
{
    ExampleAppDataObject* theDataObject = [self theAppDataObject]; 
    theDataObject.count = theDataObject.count+1;
    NSLog(@"count is :%i",theDataObject.count);

    if (theDataObject.count == 2) {
        addLabel.enabled = NO;
    }
    if (theDataObject.count == 1) {
        CGRect imageFrame = CGRectMake(10, 10, 150, 80);
        labelResizableView = [[UserResizableView alloc] initWithFrame:imageFrame];
        blabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 35, 100, 100)];

        blabel.text = @"Write here";
        //alabel.text = self.newsAsset.title;
        blabel.adjustsFontSizeToFitWidth = NO;
        blabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        blabel.font = [UIFont boldSystemFontOfSize:18.0];
        blabel.textColor = [UIColor blueColor];    
        // alabel.shadowColor = [UIColor whiteColor];
        // alabel.shadowOffset = CGSizeMake(0, 1);
        blabel.backgroundColor = [UIColor clearColor];
        blabel.lineBreakMode = UILineBreakModeWordWrap;
        blabel.numberOfLines = 10;
        blabel.minimumFontSize = 8.;
        blabel.adjustsFontSizeToFitWidth = YES;
        [blabel sizeToFit];
        labelResizableView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

        // enable touch delivery
        blabel.userInteractionEnabled = YES;

        //tao gasture recognizer for label
        UITapGestureRecognizer *doubleTap =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(blabelTap:)]; 
        doubleTap.numberOfTapsRequired = 2; 
        [blabel addGestureRecognizer:doubleTap];

        UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc]
                                                          initWithTarget:self
                                                          action:@selector(longPress:)];
        [longPressGesture setMinimumPressDuration:1];
        [blabel addGestureRecognizer:longPressGesture];

        //Calculate the expected size based on the font and linebreak mode of your label
        CGSize maximumLabelSize = CGSizeMake(296,9999);

        CGSize expectedLabelSize = [greetString sizeWithFont:blabel.font 
                                           constrainedToSize:maximumLabelSize 
                                               lineBreakMode:blabel.lineBreakMode]; 

        //adjust the label the the new height.
        CGRect newFrame = blabel.frame;
        newFrame.size.height = expectedLabelSize.height+40;
        newFrame.size.width = expectedLabelSize.width+40;

        blabel.frame = newFrame;
        labelResizableView.frame = newFrame;

        labelResizableView.contentView = blabel;
        labelResizableView.delegate = self;
        labelResizableView.tag =2;
        [self.view addSubview:labelResizableView];
    }else if (theDataObject.count == 2) {
        CGRect imageFrame = CGRectMake(10, 10, 150, 80);
        labelResizableView = [[UserResizableView alloc] initWithFrame:imageFrame];
        clabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 35, 100, 100)];

        clabel.text = @"Write here";
        //alabel.text = self.newsAsset.title;
        clabel.adjustsFontSizeToFitWidth = NO;
        clabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        clabel.font = [UIFont boldSystemFontOfSize:18.0];
        clabel.textColor = [UIColor blueColor];    
        // alabel.shadowColor = [UIColor whiteColor];
        // alabel.shadowOffset = CGSizeMake(0, 1);
        clabel.backgroundColor = [UIColor clearColor];
        clabel.lineBreakMode = UILineBreakModeWordWrap;
        clabel.numberOfLines = 10;
        clabel.minimumFontSize = 8.;
        clabel.adjustsFontSizeToFitWidth = YES;
        [clabel sizeToFit];
        labelResizableView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

        // enable touch delivery
        clabel.userInteractionEnabled = YES;

        //tao gasture recognizer for label
        UITapGestureRecognizer *doubleTap =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(clabelTap:)]; 
        doubleTap.numberOfTapsRequired = 2; 
        [clabel addGestureRecognizer:doubleTap];

        UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc]
                                                          initWithTarget:self
                                                          action:@selector(longPress:)];
        [longPressGesture setMinimumPressDuration:1];
        [clabel addGestureRecognizer:longPressGesture];

        //Calculate the expected size based on the font and linebreak mode of your label
        CGSize maximumLabelSize = CGSizeMake(296,9999);

        CGSize expectedLabelSize = [greetString sizeWithFont:clabel.font 
                                           constrainedToSize:maximumLabelSize 
                                               lineBreakMode:clabel.lineBreakMode]; 

        //adjust the label the the new height.
        CGRect newFrame = blabel.frame;
        newFrame.size.height = expectedLabelSize.height+40;
        newFrame.size.width = expectedLabelSize.width+40;

        clabel.frame = newFrame;
        labelResizableView.frame = newFrame;

        labelResizableView.contentView = clabel;
        labelResizableView.delegate = self;

        labelResizableView.tag=3;
        [self.view addSubview:labelResizableView];
    }

} 
```

当用户长按按钮时，它将被删除......

```
- (void)longPress:(UILongPressGestureRecognizer *)longPressGesture {

    if (longPressGesture.state == UIGestureRecognizerStateEnded) {
        //NSLog(@"Long press Ended");

       // NSLog(@"blabel long pressed");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete Label" message:@"Want delete label" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes",nil];
        [alert show];

    }
    else {
        //NSLog(@"Long press detected.");
    }

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Yes"])
    {
        ExampleAppDataObject* theDataObject = [self theAppDataObject];
        if (theDataObject.count!=0) {
            theDataObject.count = theDataObject.count-1;
        }
        addLabel.enabled = YES;
        [labelResizableView removeFromSuperview];
       // NSLog(@"yes btn tapped");
    }
} 
```

但是现在当我 longpree blabel 时仍然删除 clabel 并且它永远不会提前删除 blabel.thanx。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:52:30.127

使用该**`Tag`**属性删除**`labelResizableView`**.

```
-(void)addLabel:(id)sender
{
  labelResizableView = [[UserResizableView alloc] initWithFrame:imageFrame];
  labelResizableView.tag = 100;
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Yes"])
    {
        ExampleAppDataObject* theDataObject = [self theAppDataObject];
        if (theDataObject.count!=0) {
            theDataObject.count = theDataObject.count-1;
        }
        addLabel.enabled = YES;
        UILabel *tempLabel = (UILabel *)[self.view viewWithTag:100];
        if(tempLabel)
            [tempLabel removeFromSuperview];

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:24:06.460

在视图中添加控件：

```
[self.view addsubview:yourcontrolid]; 
```

前任：

```
[self.view addsubview:labelid]; 
```

要从您的视图中添加控制：

```
[controlid removefromsuperview]; 
```

前任

```
[labelid removefromsuperview]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:05:29.867

希望这段代码对你有帮助:)

```
NSArray *subArray =  [self.view subviews];
    if([subArray count] != 0) {
        for(int i = 0 ; i < [subArray count] ; i++) {           
    [[subArray objectAtIndex:i] removeFromSuperview];        
 }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T05:52:45.927

您正在添加：

```
 [self.view addSubview:labelResizableView]; 
```

而不是将其删除 labelResizableView，并释放 clabel 或 blabel，无论您的情况如何。

也许[这](https://stackoverflow.com/questions/8711482/creating-and-removing-uiviews-programmatically)给出了一个例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:05:58.880

这是因为你的代码

`else if (theDataObject.count == 2) {`

正在调用，并且在此代码中您正在添加

```
 labelResizableView.contentView = clabel; 
```

然后您将其添加到您的视图中

```
[self.view addSubview:labelResizableView]; 
```

所以当你删除`labelResizableView`

```
[labelResizableView removeFromSuperview]; 
```

所以结果是你添加了`labelResizableView`2 次并删除了`labelResizableView`有 clabel 的。

# vb.net - 使用 WIA 和 VB 从同一台计算机上的多个扫描仪自动扫描

> ID：13598609
> 
> 赞同：5
> 
> 时间：2012-11-28T05:45:52.613
> 
> 标签：vb.net, automation, wia, scanning

你好堆栈溢出！

我是编程的终极初学者。我在 php 和 vba 方面有一些经验，可以根据需要编写自己的脚本，尤其是在 excel 中。

最近，对于一个正在进行的项目，我需要能够从**连接到同一台计算机的****多台扫描仪**（比如 2台）**自动**扫描（比如每 2 分钟）。我决定以这个项目为起点，让我感受一下 Visual Basic。所以我们开始吧，我安装了 Visual Studio Express 2010 并开始编写我的脚本，试图在这里和那里找到一些可以帮助我的代码。我发现 WIA 可以帮助解决这个问题（吐温也可以，但对于我这个新手来说似乎更晦涩难懂）

 ****无论如何，我终于想出了一个应用程序，它能够在仅连接一个扫描仪时以设定的时间间隔自动扫描。当我连接多个扫描仪时，问题就来了。然后，第一次扫描正确发生（扫描仪 1 扫描，然后扫描仪 2 扫描），但是当第二次扫描应该开始时，什么也没有发生，并且扫描仪变得无法访问（忙碌）。我虽然可能忘记“释放”或“断开”最后使用的扫描仪。或者，扫描仪的缓冲存储器中还有一些东西？

在过去的 3 天里，我一直被困在这个问题上，不知道如何使它工作。

这是扫描的功能：（我没有超越其余部分，因为它是 UI 和文件夹管理）

```
 Public Sub scannerloop()

    'format constants
    Const wiaFormatBMP = "{B96B3CAB-0728-11D3-9D7B-0000F81EF32E}"
    Const wiaFormatPNG = "{B96B3CAF-0728-11D3-9D7B-0000F81EF32E}"
    Const wiaFormatGIF = "{B96B3CB0-0728-11D3-9D7B-0000F81EF32E}"
    Const wiaFormatJPEG = "{B96B3CAE-0728-11D3-9D7B-0000F81EF32E}"
    Const wiaFormatTIFF = "{B96B3CB1-0728-11D3-9D7B-0000F81EF32E}"

    'file format
    Dim fileformat As String
    If Me.FileExt.SelectedItem = "TIF" Then fileformat = wiaFormatTIFF
    If Me.FileExt.SelectedItem = "JPEG" Then fileformat = wiaFormatJPEG
    If Me.FileExt.SelectedItem = "BMP" Then fileformat = wiaFormatBMP
    If Me.FileExt.SelectedItem = "PNG" Then fileformat = wiaFormatPNG
    If Me.FileExt.SelectedItem = "GIF" Then fileformat = wiaFormatGIF

    'colors
    Dim colorcode As Integer
    If Me.Colorbox.SelectedItem = "Black and white" Then colorcode = 4
    If Me.Colorbox.SelectedItem = "Greyscale" Then colorcode = 2
    If Me.Colorbox.SelectedItem = "Colour" Then colorcode = 1

    'Resolution
    Dim dpi As Integer
    dpi = Me.dpiBox.SelectedItem
    Dim horizextent = dpi * 8.2
    Dim vertextent = dpi * 11.6

    Dim j As String = 1
    Dim DeviceManager1 = CreateObject("WIA.DeviceManager")   'wia device manager

    For i = 1 To DeviceManager1.DeviceInfos.Count 'loop through all devices

        If DeviceManager1.DeviceInfos(i).Type = 1 Then  'Select only scanners, not webcams etc...

            'startpoint to calculate how long it is to scan
            Dim ScanStart = DateAndTime.Second(Now) + (DateAndTime.Minute(Now) * 60) + (DateAndTime.Hour(Now) * 3600)

            'Directory + file
            Dim targetdir = Me.ProjectFolderBox.Text & "\scans\Scanner" & j & "\S" & j & "_" & Me.FilePrefix.Text & Me.CurrFileIndex & "." & Me.FileExt.SelectedItem
            Form2.CurrentActionLabel.Text = "Scanning from scanner #" & j

            Dim Scanner As WIA.Device = DeviceManager1.DeviceInfos(i).connect

            If IsNothing(Scanner) Then
                Log(Me.logfilename, Now & " | Scanner #" & j & " not found")
            Else
                Try
                    Dim Img As WIA.ImageFile

                    With Scanner.Items(1)
                        .Properties("6146").Value = colorcode '4 is Black-white,gray is 2, color 1 (Color Intent)
                        .Properties("6147").Value = dpi  'dots per inch/horizontal
                        .Properties("6148").Value = dpi 'dots per inch/vertical
                        .Properties("6149").Value = 0 'x point where to start scan
                        .Properties("6150").Value = 0 'y-point where to start scan

                        'Following is A4 paper size. (Not 100% accurate because real A4 Ht errors)
                        .Properties("6151").Value = horizextent 'horizontal exent DPI x inches wide
                        .Properties("6152").Value = vertextent 'vertical extent DPI x inches tall
                        '  .Properties("4104").Value = 8 'bits per pixel

                    End With

                    'transfer image
                    Img = Scanner.Items(1).Transfer(fileformat) 'scans the image.

                    'kill previous file if exists to avoid errors
                    If System.IO.File.Exists(targetdir) = True Then
                        Kill(targetdir)
                    End If

                    Img.SaveFile(targetdir)

                    'last scan
                    Form2.LastFileLabel.Text = "\Scanner" & j & "\S" & j & "_" & Me.FilePrefix.Text & Me.CurrFileIndex & "." & Me.FileExt.SelectedItem
                    Form2.LastScanLabel.Text = Now

                Catch ex As Exception
                    MsgBox(ex.Message)
                Finally

                    Scanner = Nothing
                End Try
            End If

            'End time for the scan
            Dim ScanEnd = DateAndTime.Second(Now) + (DateAndTime.Minute(Now) * 60) + (DateAndTime.Hour(Now) * 3600)

            'log
            Log(Me.logfilename, Now & " | Scanner #" & j & " | Scanned " & targetdir & " | duration: " & (ScanEnd - ScanStart))

            j = j + 1

    Next
    DeviceManager1 = Nothing

    Me.CurrFileIndex = Me.CurrFileIndex + 1

    Me.ScanCount = Me.ScanCount + 1
    Me.NextScan = DateAdd("n", Me.IntervalBox.Value, Now)

    Form2.ScanCountLabel.Text = Me.ScanCount
    Form2.NextScanLabel.Text = Me.NextScan
    Form2.CurrentActionLabel.Text = "Waiting..."

    'Increment next file index and update in config file
    Me.FileIndexBox.Value = Me.CurrFileIndex
    SaveCfg()

End Sub 
```

请放纵我，我知道代码对于有很多坏东西的编程专业人员来说可能是一场噩梦，但它确实是我的第一个 VB 程序，我渴望学习。

所以基本上，程序的其余部分是一个表单，我在其中输入扫描的目标目录、文件名、分辨率等，当我点击“开始扫描”时，它 - 第一次运行scannerloop - 启动一个“scantimer”每次滴答声都会启动scannerloop。

正如我所说，它与 1 个扫描仪（按预期创建的文件、更新的日志文件等）完美配合，但只要我有 2 个扫描仪，只有第一次扫描有效，然后，当扫描仪#1 应该开始扫描时，它不会't 并且扫描仪#2 的 LED 开始闪烁（好像在扫描，但不是在扫描）

我希望有人能帮助我。

提前致谢。

文斯

* * *

更新 - 我尝试过的可能感兴趣的事情：我只是尝试添加一个 for 循环以使其从两个扫描仪扫描几次（因此，基本上独立于计时器和程序的其余部分）：

```
Dim DeviceManager1 = CreateObject("WIA.DeviceManager")   'wia device manager
 For k = 1 To 3
            Dim j As String = 1
            For i = 1 To DeviceManager1.DeviceInfos.Count 'loop through all devices
[...]
          Next i
        Next k
        DeviceManager1 = Nothing 
```

这表明循环的第一次出现有效（从每个扫描仪扫描一次）但就是这样，扫描仪从不扫描第二次并开始闪烁，所以基本上完​​全相同的问题。我还尝试在新循环中包含 Devicemanager 声明：

```
 For k = 1 To 3 
Dim DeviceManager1 = CreateObject("WIA.DeviceManager")   'wia device manager
            Dim j As String = 1
            For i = 1 To DeviceManager1.DeviceInfos.Count 'loop through all devices
[...]
          Next i
        DeviceManager1 = Nothing
        Next k 
```

但它没有改变任何东西。

接下来我要做的是记录循环中的事件，以便我可以知道事情到底在哪里停止：

Dim DeviceManager1 = CreateObject("WIA.DeviceManager") 'wia 设备管理器 Dim j As String = 1

```
For i = 1 To DeviceManager1.DeviceInfos.Count 'loop through all devices
    If DeviceManager1.DeviceInfos(i).Type = 1 Then  'Select only scanners, not webcams etc...

        'startpoint to calculate how long it is to scan
        Dim ScanStart = DateAndTime.Second(Now) + (DateAndTime.Minute(Now) * 60) + (DateAndTime.Hour(Now) * 3600)

        'Directory + file
        Dim targetdir = Me.ProjectFolderBox.Text & "\scans\Scanner" & j & "\S" & j & "_" & Me.FilePrefix.Text & Me.CurrFileIndex & "." & Me.FileExt.SelectedItem
        Form2.CurrentActionLabel.Text = "Scanning from scanner #" & j

        Dim Scanner As WIA.Device = DeviceManager1.DeviceInfos(i).connect

        If IsNothing(Scanner) Then
            Log(Me.logfilename, Now & " | Scanner #" & j & " not found")
        Else
            Try
                Dim Img As WIA.ImageFile

                'log
                Log(Me.logfilename, Now & " | Scanner #" & j & " | Img initialized")

                With Scanner.Items(1)
                    .Properties("6146").Value = colorcode '4 is Black-white,gray is 2, color 1 (Color Intent)
                    .Properties("6147").Value = dpi  'dots per inch/horizontal
                    .Properties("6148").Value = dpi 'dots per inch/vertical
                    .Properties("6149").Value = 0 'x point where to start scan
                    .Properties("6150").Value = 0 'y-point where to start scan

                    'Following is A4 paper size. (Not 100% accurate because real A4 Ht errors)
                    .Properties("6151").Value = horizextent 'horizontal exent DPI x inches wide
                    .Properties("6152").Value = vertextent 'vertical extent DPI x inches tall
                    '  .Properties("4104").Value = 8 'bits per pixel

                End With

                'log
                Log(Me.logfilename, Now & " | Scanner #" & j & " | properties initialized")

                'transfer image
                Img = Scanner.Items(1).Transfer(fileformat) 'scans the image.

                'log
                Log(Me.logfilename, Now & " | Scanner #" & j & " |Transfer done")

                'kill previous file if exists to avoid errors
                If System.IO.File.Exists(targetdir) = True Then
                    Kill(targetdir)
                    'log
                    Log(Me.logfilename, Now & " | Scanner #" & j & " | deleted existing " & targetdir)

                End If

                Img.SaveFile(targetdir)
                'log
                Log(Me.logfilename, Now & " | Scanner #" & j & " | saved " & targetdir)

                'last scan
                Form2.LastFileLabel.Text = "\Scanner" & j & "\S" & j & "_" & Me.FilePrefix.Text & Me.CurrFileIndex & "." & Me.FileExt.SelectedItem
                Form2.LastScanLabel.Text = Now

            Catch ex As Exception
                MsgBox(ex.Message)
            Finally

                Scanner = Nothing
            End Try
        End If

        'End time for the scan
        Dim ScanEnd = DateAndTime.Second(Now) + (DateAndTime.Minute(Now) * 60) + (DateAndTime.Hour(Now) * 3600)

        'log
        Log(Me.logfilename, Now & " | Scanner #" & j & " | Scanned " & targetdir & " | duration: " & (ScanEnd - ScanStart))

        j = j + 1

    End If

Next i 
```

这是生成的日志文件：

```
Scan starts 29/11/2012 9:24:31 AM | Interval :Start scanning with 5 min | Res:100 DPI | 
29/11/2012 9:24:31 AM | Scanner #1 | Img initialized
29/11/2012 9:24:31 AM | Scanner #1 | properties initialized
29/11/2012 9:24:49 AM | Scanner #1 |Transfer done
29/11/2012 9:24:49 AM | Scanner #1 | saved C:\__2\scans\Scanner1\S1_img_1.TIF
29/11/2012 9:24:49 AM | Scanner #1 | Scanned C:\__2\scans\Scanner1\S1_img_1.TIF | duration: 18
29/11/2012 9:24:49 AM | Scanner #2 | Img initialized
29/11/2012 9:24:49 AM | Scanner #2 | properties initialized
29/11/2012 9:25:08 AM | Scanner #2 |Transfer done
29/11/2012 9:25:08 AM | Scanner #2 | saved C:\__2\scans\Scanner2\S2_img_1.TIF
29/11/2012 9:25:08 AM | Scanner #2 | Scanned C:\__2\scans\Scanner2\S2_img_1.TIF | duration: 19
29/11/2012 9:25:08 AM | Scanner #1 | Img initialized
29/11/2012 9:25:08 AM | Scanner #1 | properties initialized 
```

这条线似乎出了问题：

```
Img = Scanner.Items(1).Transfer(fileformat) 'scans the image. 
```

看起来 WIA 很乐意从扫描仪 1 切换到扫描仪 2，但拒绝回到扫描仪 1 进行下一轮。另外，我应该准确地说，当应该进行第二次扫描时，扫描仪 #2 会闪烁（而不是 1 让我感到惊讶）。扫描仪#2 是否有可能被选为“默认扫描仪”或类似的东西，如果是这样，有没有办法恢复它？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T22:37:37.850

此代码用于扫描图像：“不要忘记将 wiaaut.DLL 从 windows\sys32 添加到解决方案参考。” 首先检查是否连接了扫描仪设备

```
Dim tempfile As String
Dim mydevice As WIA.Device
Dim item As WIA.Item
Dim imfile As WIA.ImageFile
Dim Commondialog1 As WIA.CommonDialog
sub check()
  On Error Resume Next
    Commondialog1 = New WIA.CommonDialog
    mydevice = Commondialog1.ShowSelectDevice
    MsgBox(mydevice.Type)

  On Error GoTo Err_btnTakePicture_click

end sub
'then connect to scanner

sub scan()
    'put the path and name for the location of your temp file here.
    tempfile = ("d:\filename.jpg")

    'the next 4 lines deletes the old temp file if it exists
    Dim filesystemobject = CreateObject("Scripting.FileSystemObject")
    If filesystemobject.fileExists(tempfile) Then
        Kill(tempfile)
    End If

    'the next two lines set up the configuration
    Dim Commondialog1 As New WIA.CommonDialog
    mydevice = Commondialog1.ShowSelectDevice

    Dim wiaFormatJPEG As String = "{B96B3CAE-0728-11D3-9D7B-0000F81EF32E}"

    item = mydevice.Items(1)

    imfile = DirectCast(Commondialog1.ShowTransfer(item, wiaFormatJPEG, False), WIA.ImageFile)

    'this line saves the picture to a specified file
    imfile.SaveFile(tempfile)

    MsgBox("Picture taken")
    PictureBox1.ImageLocation = tempfile

  Exit_btnTakePicture_click:
    mydevice = Nothing
    item = Nothing
    Exit Sub

  Err_btnTakePicture_click:
    MsgBox(Err.Description, vbOKOnly + vbCritical, "Error Taking Picture")
    Resume Exit_btnTakePicture_click
   end sub 
```****

# codeigniter - 在 NTICompass CodeIgniter 子查询中使用不同的数据库

> ID：13598617
> 
> 赞同：1
> 
> 时间：2012-11-28T05:47:06.853
> 
> 标签：codeigniter, subquery

请原谅我在面向对象的 PHP Codeigniter 方面的初学者。我对`$this->subquery->defaultDB()`在[https://github.com/NTICompass/CodeIgniter-Subqueries](https://github.com/NTICompass/CodeIgniter-Subqueries)中使用感到困惑？

```
$db2 = $this->load->database('db2', TRUE);

$this->load->library('Subquery');
$this->subquery->defaultDB($db2)
$sub = $this->subquery->start_subquery('select');
$sub->select('number')->from('numbers')->where('numberID', 2);
$this->subquery->end_subquery('number');

$query = $db2->get('mytable'); 
```

但子查询仍然使用默认数据库而不是 db2。难道我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:35:48.340

我已经为其存储库创建了[问题](https://github.com/NTICompass/CodeIgniter-Subqueries/issues/7)，作者说他将在几天内修复它。

如果您急于使用此代码，我有一个替代方案。我添加了`defaultDB`要在子查询中使用的参数。希望能帮助到你。干杯!

```
function start_subquery($statement, $join_type='', $join_on=1, $defaultDB=''){
    $db = $this->CI->load->database($defaultDB, true);
    $this->dbStack[] = $db;
    $this->statement[] = $statement;
    if(strtolower($statement) == 'join'){
        $this->join_type[] = $join_type;
        $this->join_on[] = $join_on;
    }
    return $db;
} 
```

# php - 单击时显示/隐藏子菜单

> ID：13598622
> 
> 赞同：1
> 
> 时间：2012-11-28T05:47:22.097
> 
> 标签：php, html, css, wordpress, html-lists

我想在页脚中列出我网站的（内置 php 和 wordpress）页面，以便所有顶级页面都垂直列出，没有项目符号，并且那些具有子页面的顶级页面在顶部时列出级页面被点击。再次单击其父页面时，子页面将隐藏。我希望这一切都是纯文本，没有图形。

所以基本上它会是这样的：

主页
关于Motel V
     认识业主 | 客房 | 设施 | 画廊 | 客人的反馈
城市和国家 > *（如果点击，它会显示“要做的事情和看到的 | 活动日历”）*
预订
联系
博客

**编辑**

我明白您的建议，但是该列表是由 wordpress 通过将“页面列表”添加到页脚小部件区域生成的，因此我无法添加唯一的 ID ...

这是页面加载完成后源代码中的内容。

```
<div class="widget widget_pages" id="pages-2">
<h4 class="widgettitle">Pages</h4>      
<ul>
  <li class="page_item page-item-14 current_page_ancestor current_page_parent"><a href="http://mywebsite.com.au/about-the-motel/">About the Motel</a>
    <ul class="children">
      <li class="page_item page-item-295"><a href="http://mywebsite.com.au/about-the-motel/meet-the-owners/">Meet The Owners</a></li>
      <li class="page_item page-item-17"><a href="http://mywebsite.com.au/about-the-motel/rooms/">Rooms</a></li>
      <li class="page_item page-item-19 current_page_item"><a href="http://mywebsite.com.au/about-the-motel/facilities/">Facilities</a></li>
      <li class="page_item page-item-21"><a href="http://mywebsite.com.au/about-the-motel/galleries/">Galleries</a></li>
      <li class="page_item page-item-2"><a href="http://mywebsite.com.au/about-the-motel/feedback/">Visitor Feedback</a></li>
    </ul>
  </li>
  <li class="page_item page-item-10"><a href="http://mywebsite.com.au/city-country/">City and Country</a>
    <ul class="children">
      <li class="page_item page-item-292"><a href="http://mywebsite.com.au/city-country/things-to-do-and-see/">Things To Do And See</a></li>
      <li class="page_item page-item-4"><a href="http://mywebsite.com.au/city-country/events-calendar/">Events Calendar</a></li>
      <li class="page_item page-item-53"><a href="http://mywebsite.com.au/city-country/local-links/">Local Links</a></li>
    </ul>
  </li>
  <li class="page_item page-item-5"><a href="http://mywebsite.com.au/bookings/">Bookings</a></li>
  <li class="page_item page-item-50"><a href="http://mywebsite.com.au/contact/">Contact</a></li>
  <li class="page_item page-item-47"><a href="http://mywebsite.com.au/blog/">Blog</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:00:01.243

你可以用jquery来做。不要使用锚点的“onclick”属性，而是尝试放置一个唯一的 id 并将其用于您的 jquery 点击事件

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script> 
<script>
    $(function(){
        $(".page-item-10").click(function(){
          $(this+" ul").fadeToggle("slow");
        });

        $(".page-item-14").click(function(){
          $(this+" ul").fadeToggle("slow");
        });
    });
</script> 
```

您无需担心多个子菜单，因为主菜单具有独特的类属性

# yii - 在 yii 中如何发送密码重置链接

> ID：13598627
> 
> 赞同：2
> 
> 时间：2012-11-28T05:47:47.427
> 
> 标签：yii, forgot-password

在 yii 中，我正在创建忘记密码功能。为此用户输入电子邮件 id。如果此电子邮件 id 正确，那么我想从数据库中检索 securityQuestion id 并将该问题显示给用户。如果他的答案正确，则将发送密码重置链接到用户的电子邮件 ID。在控制器中，我采取了行动

```
 public function ActionForget{if(isset($_POST['email']))
      { $record=User::model()->find(array(
        'select'=>'primaryEmail',
        'condition'=>'PrimaryEmail=:email',
         'params'=>array(':email'=>$_POST['email']))
             ); if($record===null) {
         $error = 'Email invalid';
         }  else {
          $mailer = Yii::createComponent('application.extensions.mailer.EMailer');
          $mailer->IsSMTP();
          $mailer->IsHTML(true);
          $mailer->SMTPAuth = true;
          $mailer->SMTPSecure = "ssl";
          $mailer->Host = "smtp.gmail.com";
          $mailer->Port = 465;
          $mailer->CharSet = 'UTF-8';
          $mailer->Username = "abc@shailani.com";
          $mailer->Password = "abc";
          $mailer->From = "xyz@shailani.com";
          $mailer->FromName = "Balaee.com";
          $mailer->AddAddress($record);
          $mailer->Subject = "welcome to Balaee";
          $mailer->IsHTML(true);
          $mailer->Body = "<h1>Thanks to showing interest </h1><br>click on link for                            other detail ".$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
if($mailer->Send()) {echo "Please check mail";}
else {echo "Fail to send your message!"; }}}
else{ $this->render('emailForm'); //show the view with the password field}} 
```

我有 password.php 作为查看文件，用于输入主电子邮件 ID 和提交按钮

```
 <?php $form=$this->beginWidget('CActiveForm', array(
         'id'=>'email-form',
           'enableClientValidation'=>true,
            ));
          echo CHtml::textField('email');
          echo CHtml::submitButton('Send');
          $this->endWidget(); 
```

但是在用户提交主电子邮件 ID 后，没有任何操作发生。所以请有人告诉我我需要做哪些改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:39:45.493

控制器方法的名称不应该`actionForgot`是`ActionForgot`. PHP 是区分大小写的，当您渲染页面时，也可以发送模型，例如您的模型名称`this->render->('emailForm',$email)`在哪里`$email`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T21:31:56.097

好的，我喜欢开头，这里是对上面现有代码的一些修复。

但是，一旦您成功发送了电子邮件，您的计划是什么？查看现有代码会为您提供一个类似于[http://yoursite.com/yourapp/user/forget](http://yoursite.com/yourapp/user/forget)的 url ，它将带您回到您输入电子邮件的表单，从而创建一个巨大的循环。

请参阅链接实际上应该创建经过验证，从而使用户可以访问他们的用户记录。您需要一些其他功能来验证并允许更改密码。

```
<code>

public function actionForget() {
        if(isset($_POST['email'])) { 
         $record=User::model()->findByAttributes(array('email' => Yii::app()->request->getPost('email'))); 
         if ($record != NULL) {
              $mailer = Yii::createComponent('application.extensions.mailer.EMailer');
              $mailer->IsSMTP();
              $mailer->IsHTML(true);
              $mailer->SMTPAuth = true;
              $mailer->SMTPSecure = "ssl";
              $mailer->Host = "smtp.gmail.com";
              $mailer->Port = 465;
              $mailer->CharSet = 'UTF-8';
              $mailer->Username = "yourgmailacccount@gmail.com";
              $mailer->Password = "P@ssWord";
              $mailer->From = "yourfromemail@yourdomain.com";
              $mailer->FromName = "HQ-DEV-01";
              $mailer->AddAddress($_POST['email']);
              $mailer->Subject = "welcome to CES Document Site";
              $mailer->IsHTML(true);
              $mailer->Body = "<h1>Thanks, please</h1><br>
                          click on link for other detail
                          ".$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

                           if($mailer->Send()) {
                     echo "Please check your email";
                }
                 else {
                     echo "Fail to send your message!"; 
                }

         } else {
            echo 'Email invalid'; 
     }
         else {
         $this->render('password'); 
         Yii::app()->user->setFlash('error', "Email is not valid!");
        //echo 'Email invalid'; 
    }

    }
else{ $this->render('password'); //show the view with the password field}}
      Yii::app()->user->setFlash('info', "Enter a valid e-mail!");
} 
```

}

# java - 奇怪的队列行为

> ID：13598629
> 
> 赞同：1
> 
> 时间：2012-11-28T05:47:50.187
> 
> 标签：java, data-structures, queue

我在 Java 中有一个队列，它表现出奇怪的行为。如果我调用`q.size()`，在元素被推入队列之后，只有前半部分的项目会从同一个队列中弹出。但是，如果我`q.size()`在弹出任何项目之前存储返回的值，则会弹出所有项目`q`。这是为什么？[官方文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html#size())说：

> `public int size()`
> 
> 返回此列表中的元素数。

这是我正在使用的代码。我使用了三种不同的编译器：JDK 6.0_31、JDK 7.0_7 和 Eclipse Compiler 0.A48。结果是一样的。

```
import java.util.*;

public class StrangeQueueTest{
   public static void main(String[] args){
      Queue<String> q = new LinkedList<String>();
      String[] testData = {"1: one", "2: two", "3: three", "4: four", "5: five",
         "6: six", "7: seven", "8: eight", "9: nine", "10: ten", "11: eleven",
         "12: twelve", "13: thirteen", "14: fourteen", "15: fifteen",
         "16: sixteen", "17: seventeen", "18: eighteen", "19: nineteen",
         "20: twenty"};

      //Push items into the queue
      for(int x = 0; x < testData.length; x++)
         q.add(testData[x]);

      //Pop items out of the queue, calling size() at every iteration
      for(int x = 0; x < q.size(); x++)
         System.out.println(q.poll());

      //Pop items out of the queue, calling size() once
      /*int count = q.size();
      for(int x = 0; x < count; x++)
         System.out.println(q.poll());*/
   }
} 
```

为什么该`size()`方法不能始终如一地工作？难道我做错了什么？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T05:49:56.727

你只能得到一半的元素，因为你从两端开始计数，当你到达中间时你就停下来。换句话说：每次你`poll()`，你减少`size()`一个。同时，您正在计算已删除的数量。问题是当您删除的数字至少与剩余大小一样大时，您已将循环编码为停止。

而不是这个：

```
for(int x = 0; x < q.size(); x++)
     System.out.println(q.poll()); 
```

用这个：

```
while (q.size() > 0)
     System.out.println(q.poll()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:05:49.737

（这确实是一个扩展评论。我同意之前的答案。）

几乎总是，当一个 API 方法似乎没有遵循其规范时，问题实际上出在测试程序中。下一个问题是最初的提问者如何在没有看到问题的情况下发现正在发生的事情。

调试的第一步是获取信息。循环中 x 和 q.size() 的行为似乎可能相关，因此我将循环修改为：

```
 for (int x = 0; x < q.size(); x++) {
    System.out.println("x=" + x + ", q.size()=" + q.size());
    System.out.println(q.poll());
  } 
```

并运行程序。输出是：

```
 x=0, q.size()=20
    1: one
    x=1, q.size()=19
    2: two
    x=2, q.size()=18
    3: three
    x=3, q.size()=17
    4: four
    x=4, q.size()=16
    5: five
    x=5, q.size()=15
    6: six
    x=6, q.size()=14
    7: seven
    x=7, q.size()=13
    8: eight
    x=8, q.size()=12
    9: nine
    x=9, q.size()=11
    10: ten 
```

这个输出清楚地表明，循环的每次迭代都会增加 x 并减小队列大小，导致 x 在中途停止小于大小。

# hadoop - 如何在 cloudera 上通过 CLI 连接到 hive

> ID：13598638
> 
> 赞同：1
> 
> 时间：2012-11-28T05:49:14.237
> 
> 标签：hadoop, hive, cloudera

我们从 HUE 运行 CDH 4.1.1 / Beeswax Hive 运行良好，/beeswax/tables 显示所有表。

我想使用 hive CLI 列出所有表：

```
overlord@overlord-datanode1:~$ hive
Logging initialized using configuration in file:/etc/hive/conf.dist/hive-log4j.properties
Hive history file=/tmp/overlord/hive_job_log_overlord_201211280646_1426149164.txt
hive> SHOW TABLES;
OK
Time taken: 0.071 seconds 
```

这似乎是空的，这让我相信我可能连接到错误的配置单元元存储？

如何访问与 HUE/蜂蜡相同的配置单元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:12:42.270

一个可能的原因是 hive cli 和 beehive 正在使用 2 个不同的用户（具有不同的权限），因此当您切换用户时，Meta 存储会自动切换（如果它不存在）。

如果您使用 derby 作为元存储，我建议您将其迁移到 Mysql 或 PostgreSQL，因为 derby 不适合生产。迁移遵循这些指南。

```
http://www.mazsoft.com/blog/post/2010/02/01/Setting-up-HadoopHive-to-use-MySQL-as-metastore.aspx

https://ccp.cloudera.com/display/CDHDOC/Hive+Installation 
```

# php - Ajax XMLHttpRequest 响应很慢

> ID：13598639
> 
> 赞同：1
> 
> 时间：2012-11-28T05:49:15.760
> 
> 标签：php, ajax

我目前正在开发 php 项目，在该项目中我使用 ajax xml 传递数据并获取数据。在我的开发服务器上，它工作得很好，我很快就得到了 ajax respose，但在实时服务器上，ajax respose 来得非常慢。

我在firefox firebug net中检查过它，它有时显示响应中止。我无法弄清楚实时服务器上的问题是什么？

服务器有问题吗？

我真的很感激我能得到的任何帮助！

提前感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:27:54.537

使用 json 因为 JSON 比 XML 轻量级。php 有很好的[json 编码功能](http://www.php.net/manual/en/function.json-encode.php)。由于您的请求被中止，这似乎是最大执行时间问题。通过添加 ini_set('max_execution_time', 300) 增加 php 的执行时间，现在脚本执行时间为 300 秒。如果问题仍然存在，您可以使用缓存或 CDN 技术来加快响应时间。

这是一篇关于各种缓存技术的好文章：[http ://blog.digitalstruct.com/2008/02/27/php-performance-series-caching-techniques/](http://blog.digitalstruct.com/2008/02/27/php-performance-series-caching-techniques/)

# java - 导入 .dat 文件 Java

> ID：13598644
> 
> 赞同：2
> 
> 时间：2012-11-28T05:49:30.937
> 
> 标签：java, macos, import, io

我已经在互联网上搜索了大约一个半小时，但我一生都无法弄清楚我哪里出错了..帮助！

我的问题是，每次我尝试运行它时，我都不会收到错误，直到它搜索文件并且没有失败，它会回复“找不到文件”。我在 MAC 我想我正在正确输入目录但有些东西搞砸了..

（打开 numEven.dat 时）对于我的输入，我尝试了“numEven.dat”（将 dat 文件与 java 文件放在同一目录中）

我也试过“/Users/java/numEven.dat”和“Users/java/numEven.dat”我知道它在那个目录中。我究竟做错了什么？

**主类文件：**

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

public class StatDriver
{

    public static void main(String[] args) 
    {
        String fileName = "";
        Scanner scan = new Scanner(System.in);

        double[] array = new double[20];

        System.out.print("   Enter file name: ");
        fileName = scan.next();

        System.out.println("\n \n \n \n          My Grades - View Statistics");
        System.out.println("           ------------------------");

        // int valueCount = readFile(array,fileName);
        array = readFile(array, fileName);

        Stat stat = new Stat(array, array.length);

        // call each calc on Stat class and display results for each method
        stat.calcAvg();
        stat.calcMedian();
        stat.findMax();
        stat.findMin();
        // print the return values for each of the above out to the user
    }

    public static double[] readFile(double[] array, String fileName) 
    {
        int valueCount = 0;

        FileIO importFile = new FileIO ();

        importFile.main(array, fileName);
        System.out.println(array);

        valueCount = array.length;

        // return valueCount;
        return array;
    }

} 
```

**文件IO类：**

```
import java.util.Scanner;
import java.io.*;
public class FileIO
{
    public void main (double[] array, String fileName)
    {
        double [] num = new double[5];
        Scanner inFile;
        int i = 0;

        try
        {
            System.out.println(fileName);
            inFile  = new Scanner(new File("fileName"));

            while(inFile.hasNextDouble())
            {
                array[i] = inFile.nextDouble();
                i++;
            }

            inFile.close();
            for(int x = 0; x < i; x++)
                System.out.println("   " + num[x]);
        }
        catch(FileNotFoundException e)
        {
            System.out.println ("   File not found");
        }
        catch(ArrayIndexOutOfBoundsException e)
        {
            System.out.println ("   array index too large");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:51:22.217

换个试试

```
 inFile  = new Scanner(new File("fileName")); 
```

和

```
 inFile  = new Scanner(new File(fileName)); 
```

在方法中`FileIO.main`

除此之外（没有问题的链接），您可以将方法`FileIO.main`设为静态，并利用 Java 集合来避免硬编码`double`要从文件中读取的元素数量。在相同的方法中，您声明了一个变量`double[] num`，但根本不使用它。

# python - numpy 多个切片布尔值

> ID：13598646
> 
> 赞同：3
> 
> 时间：2012-11-28T05:49:50.427
> 
> 标签：python, numpy

我在编辑 numpy 数组中的值时遇到问题

```
import numpy as np
foo = np.ones(10,10,2)

foo[row_criteria, col_criteria, 0] += 5
foo[row_criteria,:,0][:,col_criteria] += 5 
```

row_criteria 和 col_criteria 是布尔数组 (1D)。在第一种情况下，我得到一个

“形状不匹配：无法将对象广播到单个形状”错误

在第二种情况下， += 5 根本不会被应用。当我做

```
foo[row_criteria,:,0][:,col_criteria] + 5 
```

我得到一个修改后的返回值，但修改该值似乎不起作用......

有人可以解释如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:20:57.950

你要：

```
foo[np.ix_(row_criteria, col_criteria, [0])] += 5 
```

要了解这是如何工作的，请看以下示例：

```
import numpy as np
A = np.arange(25).reshape([5, 5])
print A[[0, 2, 4], [0, 2, 4]]
# [0, 12, 24]

# The above example gives the the elements A[0, 0], A[2, 2], A[4, 4]
# But what if I want the "outer product?" ie for [[0, 2, 4], [1, 3]] i want
# A[0, 1], A[0, 3], A[2, 1], A[2, 3], A[4, 1], A[4, 3]
print A[np.ix_([0, 2, 4], [1, 3])]
# [[ 1  3]
#  [11 13]
#  [21 23]] 
```

同样的事情也适用于布尔索引。也`np.ix_`没有做任何真正令人惊奇的事情，它只是重塑了它的论点，以便它们可以相互广播：

```
i, j = np.ix_([0, 2, 4], [1, 3])
print i.shape
# (3, 1)
print j.shape
# (1, 2) 
```

# android - 谷歌地图：如何在android中获取地址

> ID：13598647
> 
> 赞同：4
> 
> 时间：2012-11-28T05:49:51.700
> 
> 标签：android, google-maps

当我单击特定地址时，如何从谷歌地图获取位置或地址。是否可以使用地图覆盖从地图视图中收集地址。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T06:01:26.613

请使用以下代码获取地址。

```
try {
    Geocoder geo = new Geocoder(youractivityclassname.this.getApplicationContext(), Locale.getDefault());
    List<Address> addresses = geo.getFromLocation(latitude, longitude, 1);
    if (addresses.isEmpty()) {
        yourtextfieldname.setText("Waiting for Location");
    }
    else {
        if (addresses.size() > 0) {
            yourtextfieldname.setText(addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +", " + addresses.get(0).getAdminArea() + ", " + addresses.get(0).getCountryName());
            //Toast.makeText(getApplicationContext(), "Address:- " + addresses.get(0).getFeatureName() + addresses.get(0).getAdminArea() + addresses.get(0).getLocality(), Toast.LENGTH_LONG).show();
        }
    }
}
catch (Exception e) {
    e.printStackTrace(); // getFromLocation() may sometimes fail
} 
```

有关更多信息和完整示例，请参见下面的链接。

[在 Android 中使用谷歌地图](http://mobiforge.com/developing/story/using-google-maps-android)

# ruby-on-rails - 用于 PUT/POST/GET 以外的自定义操作的 REST API

> ID：13598648
> 
> 赞同：0
> 
> 时间：2012-11-28T05:49:52.737
> 
> 标签：ruby-on-rails, ruby, rest, sinatra

我正在编写一个 REST API，它基本上提供了两种资源：`Users`和`Cars`. 使用 API，您可以发布/获取每个资源。

但现在我有一个自定义操作，基本上可以为用户提供一辆新车。这将需要后端的 cron 作业并执行操作。它不适合 POST/PUT 的模型。我只是想知道什么是最好的路线？

我想到了：

```
/addNewCarToUser/:user_id 
```

我知道这个问题过于本地化，但我只是想知道这是否只是一个判断电话，或者这种类型的请求是否有约定？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:14:39.073

这取决于。汽车是否只有属于用户才存在？或者它们可以单独存在吗？

如果它们仅在属于用户的上下文中，我只会让汽车属于用户，并有这样的路线来创建一个新的路线：

`POST /users/:id/cars`

或者，您可以通过一辆车指定谁拥有一个车主（似乎违反直觉，但从数据上看，一辆车通常有 0 个或 1 个车主）。路线可能是：

`POST /cars?user_id=######`

另一个合理的关系是拥有第三个资源 Ownerships，然后您可以创建一辆新车，然后是一个新的所有权，因为创建一辆汽车并将其提供给用户将是两个新资源。

```
POST /cars
POST /ownerships 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:04:38.093

好吧，“addNewCarToUser”是一个动作，因此它违反了资源主体。

我能想到

/user/:user_id/汽车

这将是 GET 或 POST 的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:05:08.397

我会执行一个`POST`，因为此操作将导致创建新数据。

不确定您使用的是什么命名约定，但我会这样做：

```
/users/:id/new_car # via POST 
```

# java - 如何在 jasper 报告中从项目类路径中添加图像作为参数

> ID：13598655
> 
> 赞同：15
> 
> 时间：2012-11-28T05:50:38.253
> 
> 标签：java, jasper-reports, ireport

我使用 ireport 设计器设计了一个 jasper 报告，其中我在报告的标题中添加了徽标图像。此图像是从本地计算机上的硬编码路径添加的。我需要从我的项目类路径中添加徽标图像。为此，我在程序提供的报告中为图像创建了一个参数。

```
InputStream imgInputStream = this.getClass().getResourceAsStream("header.png");

HashMap<String, Object> parameters = new HashMap<String, Object>();
parameters.put("dateFrom", datum1);
parameters.put("dateTo", datum2);
parameters.put("logo", imgInputStream);

strQuery = "Select calldate,src,dst,duration,disposition,cdrcost from cdrcost where date(calldate) between '" + datum1 + "' and '" + datum2 + "'";

rs = conexiondb.Consulta(strQuery);
JRResultSetDataSource resultSetDataSource = new JRResultSetDataSource(rs);
//JasperPrint jasperPrint = JasperFillManager.fillReport(reportStream, parameters);

JasperRunManager.runReportToPdfStream(reportStream, fos, parameters, resultSetDataSource); 
```

以下是报告中的图片片段：

```
<image>
  <reportElement x="0" y="1" width="555" height="61"/>
  <imageExpression><![CDATA[$P{logo}]]>
  </imageExpression>
</image> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-29T14:38:24.950

我们总是传入图像而不是 InputStream。首先加载图像并在参数映射中设置：

```
BufferedImage image = ImageIO.read(getClass().getResource("/images/IMAGE.png"));
parameters.put("logo", image ); 
```

然后参数的定义如下：

```
<parameter name="logo" class="Object" isForPrompting="false">
  <parameterDescription><![CDATA[The letterhead image]]></parameterDescription>
  <defaultValueExpression><![CDATA[]]></defaultValueExpression>
</parameter> 
```

当放置在报告中时，它看起来像：

```
<image>
  <reportElement x="324" y="16" width="154" height="38"/>
  <imageExpression><![CDATA[$P{logo}]]></imageExpression>
</image> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-08T13:01:02.070

您可以轻松地从类路径/类加载器中获取 URL。这是 <imageExpression> 的有效输入，因此您可以使用它在 pdf 中嵌入图像。以下对我有用：

设置参数：

```
URL url = this.getClass().getClassLoader().getResource("pdf/my_image.tif");
parameters.put("logo", url); 
```

报告中的声明：

```
<parameter name="logo" class="java.net.URL">
    <defaultValueExpression><![CDATA[]]></defaultValueExpression>
</parameter> 
```

报告中的使用情况。

```
<image>
   <reportElement x="100" y="30" width="135" height="30"/>
   <imageExpression><![CDATA[$P{logo}]]></imageExpression>
</image> 
```

一些额外的观察

*   在我使用 InputStream 之前，它只显示一次图像时工作正常。当我需要重复图像时，InputStream 不起作用，因为该流在第一个显示器上被消耗，所以之后就不能使用了。我没有找到一种简单的方法来重置它。
*   我发现可以从这里使用 URL：http: [//jasperreports.sourceforge.net/sample.reference/images/index.html](http://jasperreports.sourceforge.net/sample.reference/images/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-03T06:04:44.667

我没有设法让它与任何这些方法一起工作，我遇到了错误：

```
 Error evaluating expression for source text 
```

在用 java 编译报告时。

在java中，您必须将图像输入到输入流中，因此要么

```
byte[] image = imageRepository.getLogo();
InputStream logo= new ByteArrayInputStream(image);
parameters.put("logo",logo); 
```

因为我从数据库中获取图像作为 byteArray，但是如果你在 JAR 中的某个地方有它：

```
ResourceLoader resourceLoader;
InputStream logo= resourceLoader.getResource("classpath:/image/logo.jpg").getInputStream();
parameters.put("logo",logo); 
```

然后在 jrxml 中它只是给出：

```
 <parameter name="logo" class="java.io.InputStream"/>

    <image scaleImage="RealSize">
        <imageExpression><![CDATA[$P{logo}]]></imageExpression>
    </image> 
```

# php - PHP：如果用户搜索不存在的项目，则会出现错误消息

> ID：13598656
> 
> 赞同：1
> 
> 时间：2012-11-28T05:50:43.360
> 
> 标签：php, if-statement

如果用户搜索我没有为其编写规则的内容，我想显示一条错误消息。这就是我的意思。

用户将有一个带有提交按钮的搜索栏。他将输入一个单词并点击提交。我为四个特定的词写了规则。他们为这个词赋值。

```
<?php
$search = $_POST['search'];
$search ['A'] = "32";
$search ['B'] = "30";
$search ['C'] = "34";
$search ['D'] = "53";

if ($_POST['search'] == A)
{print 'A has a value of ' . $search['A'] . ' dollars.';} 
```

等等...为 B、C 和 D 编写了类似的规则。

**现在我需要在用户搜索 A、B、C 或 D 以外的任何内容时显示错误消息**的代码。我编写了以下代码行，但它不起作用。它每次都显示该消息，即使用户搜索 ABC 或 D。

```
if ($search != 'A' or 'B' or 'C' or 'D')
    {print $_POST['search'] . ' was not found in our database.';} 
```

我想要一行代码，如果用户搜索任何不是 ABC 或 D 的东西，它将显示一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:56:28.487

尝试这个

```
if ($search != 'A' &&  $search != 'B' &&  $search !=  'C' &&  $search !=  'D') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:58:55.283

我知道的最好的方法是：

```
 switch ($_POST['search']) {
    case 32:
        //do something
        break;
    case 30:
        //do something
        break;
    case 34:
        //do something
        break;
    case 53:
        //do something
        break;
    default:
        //They enetered something else, do something
} 
```

或者您可以执行以下操作：

```
$values = array('A' => 32, 'B' => 30, 'C' => 34, 'D' => 53); 
```

然后：

```
if (!in_array($_POST['search'], $values) { 
    // they entered something else
} else {
    switch ($_POST['search']) {
        case 32: //do something
        case 30: //do something else
        ETC...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:59:32.540

也许你可以用 switch 语句尝试这样的事情：

```
$search = $_POST['search'];
$num = 0;
switch ($search) {
    case 'A':
        $num = 32;
        break;
    case 'B':
        $num = 30;
        break;
    case 'C':
        $num = 34;
        break;
    case 'D':
        $num = 53;
        break;
    default:
        $num = 0;
}
if ($num) {
    echo 'A has a value of ' . $num . ' dollars.';
} else {
    echo $_POST['search'] . ' was not found in our database.';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:24:22.137

您可以在这里非常轻松地使用 jquery ajax/post。例如：你的 jquery 代码：

```
 ("#sub_btn").click(function(){
    var  url = 'http://localhost/example/test';// ur method  url
    var search_str = $("#seach_txt").val(); // seach text box id 
    if(search_str == '' || search_str == 'undefined' )
    {
          $("#msg").html("Please enter value "); //
    }else{
        $.post(url,{data:search_str},function(responses){
             $("#msg").html(responses); //div with id msg
         });

    }

  });

  //ur php code
        function test(){

        $search ['A'] = "32";
        $search ['B'] = "30";
        $search ['C'] = "34"; 
        $search ['D'] = "53";
      if( $_POST['data'] == 'A' || $_POST['data'] == 'B' || $_POST['data'] ==   'C' ||  $_POST['data'] == 'D' ){

        if(array_key_exists($_POST['data'],$search)){
          echo $_POST['data'].' has a value of ' . $search['.$_POST['data'].'] . ' dollars.';exit;

        }else{
         echo $_POST['data'].' not found in our database';exit;
        }
  } 
```

}

```
 //ur html 

       <div id="msg"></div>
       <input type="text" id="search_txt" />
        <input type="button" id ="sub_btn" value="Submit"> 
```

希望这对你有帮助！谢谢。

# python-2.7 - 如何替换文件夹中多个文件中的字符串？

> ID：13598662
> 
> 赞同：0
> 
> 时间：2012-11-28T05:51:13.480
> 
> 标签：python-2.7

我正在尝试读取两个文件，并将一个文件的内容替换为文件夹中存在的文件中的另一个文件的内容，该文件夹也有子目录。但它的告诉子过程没有定义。我是python和shell脚本的新手，有人可以帮我吗？

```
import os
import sys
import os.path

f = open ( "file1.txt",'r')
g = open ( "file2.txt",'r')
text1=f.readlines()
text2=g.readlines()

i = 0;
for line in text1:
    l = line.replace("\r\n", "")
    t = text2[i].replace("\r\n", "")
    args = "find . -name *.tml"
    Path = subprocess.Popen( args , shell=True )
    os.system("  sed -r -i 's/" + l + "/" + t + "/g' " + Path)
    i = i + 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:19:44.143

要专门解决您的实际错误，您需要在代码中（奇怪地）使用子流程模块时导入它：

```
import subprocess 
```

之后，你会发现更多的问题。我会尽量让我的建议尽可能简单。先写代码，然后我会分解它。请记住，有更强大的方法可以完成此任务。但我正在尽我所能记住您的经验水平，并使其尽可能接近您当前的方法。

```
import subprocess
import sys

# 1
results = subprocess.Popen("find . -name '*.tml'", 
                            shell=True, stdout=subprocess.PIPE)

if results.wait() != 0:
    print "error trying to find tml files"
    sys.exit(1)

# 2
tml_files = []
for tml in results.stdout:
    tml_files.append(tml.strip())

if not tml_files:
    print "no tml files found"
    sys.exit(0)

tml_string = " ".join(tml_files)

# 3
with open ("file1.txt") as f, open("file2.txt") as g:
    while True:
# 4
        f_line = f.readline()
        if not f_line:
            break

        g_line = g.readline()
        if not g_line:
            break

        f_line = f_line.strip()
        g_line = g_line.strip()
        if not f_line or not g_line:
            continue
# 5
        cmd = "sed -i -e 's/%s/%s/g' %s" % \
                (f_line.strip(), g_line.strip(), tml_string)

        ret = subprocess.Popen(cmd, shell=True).wait()
        if ret != 0:
            print "error doing string replacement"
            sys.exit(1) 
```

您不需要一次读入整个文件。如果它们很大，这可能是很多内存。您可以一次使用一行，还可以在打开文件时使用所谓的“上下文管理器”。无论发生什么，这将确保它们正确关闭：

1.  我们从只运行一次以查找所有`.tml`文件的子进程命令开始。您的版本多次运行相同的命令。如果搜索路径相同，那么我们只需要一次。这将检查命令的退出代码，如果失败则退出。

2.  我们`stdout`在 subprocess 命令上循环，并将剥离的行添加到列表中。这是您的一种更健壮的方式`replace("\r\n")`。它删除空格。“列表理解”会更适合这里（下线）。如果我们没有找到任何 tml 文件，那么我们没有工作要做，所以我们退出。否则，我们将它们连接在一个空格分隔的字符串中，以便稍后适合我们的命令。

3.  这称为“上下文管理器”。您可以以某种方式打开文件，无论它们是什么都将正确关闭。该文件在该代码块内的上下文长度内打开。我们将永远循环，并在适当的时候中断。

4.  我们从每个文件中一次提取一行。如果任一行是空白的，我们就到了文件的末尾，不能再做任何工作，所以我们中断了。然后我们去掉换行符，如果任何一个字符串为空（空行），我们仍然不能做任何工作，但我们只是继续下一个可用的行。

5.  sed 命令的修改版本。我们在每个循环上为源字符串和替换字符串构造命令字符串，并附加 tml 文件字符串。请记住，这是一种非常幼稚的替换方法。它确实希望您的替换字符串是安全字符，并且不会破坏`s///g`sed 格式。但是我们用另一个`subprocess`命令运行它。`wait()`只是等待返回码，我们检查它是否有错误。这种方法取代了你的`os.system()`版本。

希望这可以帮助。最终，您可以改进它以进行更多检查和安全操作。

# windows-phone-7 - 如何修复 HttpWebResponse 中的 System.ArgumentException？

> ID：13598666
> 
> 赞同：2
> 
> 时间：2012-11-28T05:51:35.337
> 
> 标签：windows-phone-7, httpwebrequest, windows-phone-7.1, httpwebresponse, windows-phone-8

`HttpWebResponse`接收我的应用程序时，我遇到了这个异常`WindowsPhone`。我该如何解决这个问题。它经常发生，但我需要确保我的应用程序在发生时不会崩溃。请看一下[截图](http://i46.tinypic.com/10pt3te.png)。

我的预期反应是

```
 Headers:-
       HTTP/1.1 500 Internal Server Error
       Date: Wed, 28 Nov 2012 06:41:24 GMT
       Content-Type: application/json
       Transfer-Encoding: chunked
       Connection: keep-alive
       Keep-Alive: timeout=30
       Set-Cookie: ...........; path=/
       Expires: Thu, 19 Nov 1981 08:52:00 GMT
       Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
       Pragma: no-cache
       Internal Server Error: 

       Json:-
       {"status":0,"error_code":1001,"data":{"msg":"Something went wrong. Please try again later. [error code 1001]"}} 
```

它还在`InnerException`消息中显示为`Specified value has invalid HTTP Header characters. Parameter name: name`

请帮忙。我不知道为什么 webRequest.EndGetResponse(asynchronousResult) 无法读取响应。有替代方案吗？

**更新** 开始请求：

```
_webRequest.BeginGetRequestStream(new AsyncCallback(GetReqeustStreamCallback), _webRequest);

private void GetReqeustStreamCallback(IAsyncResult asynchronousResult)
    {
        if ((!ReqIdEnabled || Network.RequestUniqueId == this.RequestUniqueId))
        {
            HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the stream request operation

            using (Stream postStream = webRequest.EndGetRequestStream(asynchronousResult))
            {

                // Add the post data to the web request
                postStream.Write(_postDataInBytes, 0, _postDataInBytes.Length);

                //postStream.Dispose();
            }

            // Start the web request
            webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);
        }
    }

    private void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            try
            {
     //**throws Exception here when my server returns 503/500 and is not caught by the catch block below**
                using (HttpWebResponse response = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult))  
                {
                    ReadResponse(response);
                }
            }
            catch (WebException ee)
            {
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T17:34:19.737

在您的 catch 块中放置一个断点，并查看较低级别的堆栈，然后查找`System.Net.ni.dll!System.Net.WebHeaderCollection.this[string].set(string name, string value)`.

在局部变量中，您可以看到解析失败的特定值。

对我来说，造成问题的是 Google App Engine 的自定义 User-Agent 标头。

# date - 带有 Microsoft Access 的 JDBC - 当我在 where 子句中使用日期时，查询不返回任何行

> ID：13598668
> 
> 赞同：0
> 
> 时间：2012-11-28T05:51:37.360
> 
> 标签：date, ms-access, jdbc

这是我执行的代码...

```
dc.rs = dc.st.executeQuery("select count(*) from Accounts where date_join = CDATE(25-11-2012)"); 
```

即使我在数据库中有 3 个与此匹配的帐户，它也会返回 0 行。我插入日期时使用的格式是

```
CDATE(day-month-year) 
```

我也尝试过这种格式，但仍然没有返回任何内容..

```
CDATE('25-November-2012') 
```

当我使用日期搜索时，我也使用这种格式。但我不明白为什么它不返回任何行。

当我在查询后尝试使用 getDate(1) 时出现此错误..

```
[Microsoft][ODBC Microsoft Access Driver]Restricted data type attribute violation on column number 1 (Expr1000) 
```

我的 where 子句有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:56:19.547

将 where 子句更改为**data_join = CDATE('25-11-2012')**

# javascript - Windows 8 应用程序游戏动画速度在笔记本电脑打开电源和弦时增加，在使用电池时速度正常 - 需要此行为的原因

> ID：13598670
> 
> 赞同：0
> 
> 时间：2012-11-28T05:52:01.560
> 
> 标签：javascript, html, windows-8, createjs

该游戏是使用 HTML5 和 JavaScript 为 windows 8 应用商店开发的，CreateJS 也用于大多数功能。通过增加坐标移动的对象正常工作，并且在笔记本电脑使用电池时以正常速度正常工作，笔记本电脑插上电源为动画提供动力会加快速度，整体上所有游戏看起来都像是快进一样。

非常感谢任何有关此行为的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:12:14.480

如果您使用 requestanimationframe 来驱动您的游戏循环，那么这将解释它。

这是基于功率的自适应 - 在 AC 上以 60fps 运行，在电池上以 30fps 运行。

详细信息：http: [//blogs.msdn.com/b/ie/archive/2011/07/05/using-pc-hardware-more-efficiently-in-html5-new-web-performance-apis-part-1。 aspx](http://blogs.msdn.com/b/ie/archive/2011/07/05/using-pc-hardware-more-efficiently-in-html5-new-web-performance-apis-part-1.aspx)

# ios - iOS6中的任何api都可以获取gps位置的静态地图图像

> ID：13598674
> 
> 赞同：3
> 
> 时间：2012-11-28T05:52:22.367
> 
> 标签：ios, image, ios6, maps

我想要一个位置的静态地图图像。我有那个位置的纬度和经度。iOS 6中是否有任何api来获取gps位置的苹果地图静态图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:35:28.300

MKMapView 有两个属性来实现这个功能：`scrollEnabled`和`zoomEnabled`. 将两者都设置为`NO`，您将拥有一个非滚动和非缩放（因此是静态的）地图图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T01:54:40.367

我相信[谷歌静态地图](https://developers.google.com/maps/documentation/staticmaps/)是你正在寻找的。将位置参数发送给它，它会返回你想要的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-04T12:27:56.203

在 iOS 7+ Apple MapKit 允许使用[`MKMapSnapshotter`](https://developer.apple.com/reference/mapkit/mkmapsnapshotter)类显示地图的静态图像。在MapKit 文档[的创建地图快照部分中有详细说明：](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/LocationAwarenessPG/MapKit/MapKit.html#//apple_ref/doc/uid/TP40009497-CH3-SW13)

```
// Takes a snapshot and calls back with the generated UIImage
static func takeSnapshot(mapView: MKMapView, withCallback: (UIImage?, NSError?) -> ()) {
    let options = MKMapSnapshotOptions()
    options.region = mapView.region
    options.size = mapView.frame.size
    options.scale = UIScreen.mainScreen().scale

    let snapshotter = MKMapSnapshotter(options: options)
    snapshotter.startWithCompletionHandler() { snapshot, error in
        guard snapshot != nil else {
            withCallback(nil, error)
            return
        }

        withCallback(snapshot!.image, nil)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:07:04.170

只需使用 MKMapView 显示地图，您必须使用 MapKit.framework

此链接将帮助您...

[https://github.com/kviksilver/MKMapview-annotation-grouping](https://github.com/kviksilver/MKMapview-annotation-grouping)

快乐编码！！！

# delphi - Delphi XE2中EXE大小太大

> ID：13598678
> 
> 赞同：4
> 
> 时间：2012-11-28T05:52:30.580
> 
> 标签：delphi, delphi-xe2, exe

我在 Delphi XE2 中创建了一个简单的项目，只有 3 或 4 个大小仅为 8 或 9 KB 的 delphi 表单。但如果我看到 exe 大小，它是 12MB。我不知道怎么办？可能是什么原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T06:09:50.393

您正在使用默认的调试构建配置，其中包括 exe 中的调试信息。

您通常将构建配置更改为发布，以便生成较小的 exe 用于分发，但代价是失去在 Delphi IDE 中调试它的能力（逐步）。

看看[如何更改 Delphi Build 配置？](https://stackoverflow.com/questions/4016643/how-to-change-delphi-build-configuration)

使用 Delphi XE 3 的简单形式，Debug exe 为 10,995Kb，而 Release exe*只有*2,326Kb。您可能会争辩说后者仍然很大，但这是另一个问题：

*   [如何实现更小的可执行文件？](https://stackoverflow.com/questions/2150025/how-to-achieve-smaller-size-of-the-executable)
*   [我可以做些什么来减少我的可执行文件的大小（Delphi）？](https://stackoverflow.com/questions/3199476/what-can-i-do-to-reduce-my-executables-size-delphi)
*   [创建更小的 delphi-xe 可执行文件 (delphi.about.com)](http://delphi.about.com/b/2011/07/26/create-smaller-delphi-xe-executables-remove-rtti-pack-exe.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:53:17.070

好的，现在我知道了，我在构建模式下编译 exe。当我切换到发布模式然后编译时，大小以 KB 为单位。

# java - Java - 使用 AtomicInteger 与静态 int

> ID：13598679
> 
> 赞同：17
> 
> 时间：2012-11-28T05:52:34.350
> 
> 标签：java, atomic

在使用多个线程时，我学会了在想要使用将由多个线程访问的计数器时使用静态变量。

例子：

`static int count=0;`然后稍后在程序中我将其用作`count++;`.

今天我遇到了一个叫做的东西`AtomicInteger`，我也了解到它是线程安全的，可以使用它的一种方法`getAndInrement()`来实现相同的效果。

任何人都可以帮助我了解使用`static atomicInteger`vs`static int count`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T06:17:53.777

**-** `AtomicInteger`用于对**整数执行原子操作**，当您不想使用`synchronized`关键字时，它是一种替代方法。

**-**`volatile`在非原子字段上使用 a会产生**不一致的结果。**

```
int volatile count;

public void inc(){

count++

} 
```

**-** `static`将使**该类的所有实例共享一个变量**，但**在多线程环境中仍然会产生不一致的结果。**

所以当你在多线程环境中时试试这些：

**1.**遵循布赖恩法则总是更好：

> 当我们写一个变量接下来要被另一个线程读取时，或者当我们正在读取一个刚刚被另一个线程写入的变量时，它需要同步。共享字段必须设为私有，使读写方法/原子语句同步。

**2.**第二个选项是使用`Atomic Classes`, like`AtomicInteger, AtomicLong, AtomicReference, etc.`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T07:01:49.470

我同意@Kumar 的回答。

Volatile 是不够的——它对内存顺序有一些影响，但不能确保 ++ 的原子性。

多线程编程的真正困难在于，问题可能不会出现在任何合理数量的测试中。我编写了一个程序来演示这个问题，但它的线程除了递增计数器之外什么都不做。即便如此，计数仍然在正确答案的 1% 以内。在一个线程有其他工作要做的实际程序中，两个线程执行 ++ 的可能性非常低，足以同时显示问题。多线程的正确性无法测试，它必须被设计。

该程序使用简单的静态整数、易失整数和 AtomicInteger 执行相同的计数任务。只有 AtomicInteger 始终得到正确答案。具有 4 个双线程内核的多处理器上的典型输出是：

```
count: 1981788 volatileCount: 1982139 atomicCount: 2000000 Expected count: 2000000 
```

这是源代码：

```
 import java.util.ArrayList;
  import java.util.List;
  import java.util.concurrent.atomic.AtomicInteger;

  public class Test {
    private static int COUNTS_PER_THREAD = 1000000;
    private static int THREADS = 2;

    private static int count = 0;
    private static volatile int volatileCount = 0;
    private static AtomicInteger atomicCount = new AtomicInteger();

    public static void main(String[] args) throws InterruptedException {
      List<Thread> threads = new ArrayList<Thread>(THREADS);
      for (int i = 0; i < THREADS; i++) {
        threads.add(new Thread(new Counter()));
      }
      for (Thread t : threads) {
        t.start();
      }
      for (Thread t : threads) {
        t.join();
      }
      System.out.println("count: " + count +  " volatileCount: " + volatileCount + " atomicCount: "
          + atomicCount + " Expected count: "
          + (THREADS * COUNTS_PER_THREAD));
    }

    private static class Counter implements Runnable {
      @Override
      public void run() {
        for (int i = 0; i < COUNTS_PER_THREAD; i++) {
          count++;
          volatileCount++;
          atomicCount.incrementAndGet();
        }
      }
    }
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T05:54:34.617

保证是原子`AtomicInteger`的。 如果您用于获取先前的值，则不能保证它是原子的。 `incrementAndGet()`
`count++`

* * *

我从您的问题中遗漏了一些东西 - 并且由其他答案说明 - 静态与线程无关。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T05:59:41.853

“静态”使 var 成为类级别。这意味着，如果您在一个类中定义“静态整数计数”，那么无论您为该类创建了多少个实例，所有实例都使用相同的“计数”。虽然 AtomicInteger 是一个普通类，但它只是添加了同步保护。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T06:01:05.190

`static int counter``multithreaded`除非您制作计数器`volatile`或制作增量块，否则会在环境中给您带来不一致的结果`synchronized`。

如果`automic`它给出了`lock-free` `thread-safe`对单个变量的编程。

[automic](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html)和[链接](http://www.ibm.com/developerworks/java/library/j-jtp11234/)中的更多详细信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T06:08:43.157

我认为没有保证可以看到`count++`最新的值。`count++`必须读取 的值`count`。另一个`Thread`可以写入一个新值，`count`但将它的值存储在`Thread`本地缓存中，即不刷新到主内存。同样，您的`Thread`，读取`count`，没有保证从主存储器读取，即从主存储器刷新。`synchronize`保证。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-28T06:08:54.520

AtomicInteger 就是让get和increment成为一个原子过程。它可以被认为是数据库中的排序器。它提供了增加、减少 delta int 值的实用方法。

如果您获取计数器然后处理然后更新它，静态 int 可能会导致问题。AtomicInteger 可以轻松完成，但如果您必须根据处理结果更新计数器，则无法使用它。

# python - 如何在 django 中显示自定义表单中的错误

> ID：13598682
> 
> 赞同：0
> 
> 时间：2012-11-28T05:52:45.343
> 
> 标签：python, django, forms

我正在像这样显示模板中的字段

```
<div> Name </div>  <div> {{ form.status }}   </div>
<div> Name </div>  <div> {{ form.name }}   </div>
<div> Description{{ form.description }}   </div>
<div> Sub category{{ form.subcategory }}   </div> 
```

现在我想要一个 div 框，我可以在其中显示与所有字段相关的所有错误，无论是否隐藏

就像是

```
{{ form.errors }} 
```

可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:59:41.497

这是可能的。您可以为表单的每个字段显示错误，例如**{{ form.name.errors }}**，其中 name 是一个字段。但我认为不可能一次显示所有字段的内容。展示什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:09:03.967

您可以以这种方式将其用于您的代码

```
<div> Name </div>  <div>{{ form.status.errors }} {{ form.status }} </div> 
```

同样，对于表单的其他字段，您必须编写 form.field_name.errors

有关表单错误及其显示的更多信息，请访问[https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)

请务必查找有关同一问题的最新文档。

# python - 时间数据与 strptime 中的错误不匹配

> ID：13598687
> 
> 赞同：0
> 
> 时间：2012-11-28T05:53:12.323
> 
> 标签：python

我在 python 2.4 中将字符串转换为时间对象。

```
d1 = time.strptime(d2, '%Y-%m-%d %H:%M:%S.%%') 
```

这里 d2 是`'2012-11-07 13:41:13.138807'`

我收到以下错误。

```
ValueError: time data did not match format:  data=2012-11-07 13:41:13.138807  fmt=%Y-%m-%d %H:%M:%S.%% 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:56:29.167

您的问题出在字符串的最后两个字符中：`%%`

`%%`匹配`%`输入中的 a。你想匹配微秒，[所以你应该使用](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior) `%f`：

```
>>> from datetime import datetime
>>> d2 = '2012-11-07 13:41:13.138807'
>>> datetime.strptime(d2, '%Y-%m-%d %H:%M:%S.%f')
datetime.datetime(2012, 11, 7, 13, 41, 13, 138807) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:55:29.880

尝试添加`.%f`到您的字符串（Python 2.6+），它应该处理该值（尽管它似乎没有被存储）：

```
In [5]: import time

In [6]: d2 = '2012-11-07 13:41:13.138807'

In [7]: d1 = time.strptime(d2, '%Y-%m-%d %H:%M:%S.%f')

In [8]: d1
Out[8]: time.struct_time(tm_year=2012, tm_mon=11, tm_mday=7, tm_hour=13, tm_min=41, tm_sec=13, tm_wday=2, tm_yday=312, tm_isdst=-1) 
```

如果需要，@bradleyayers 的解决方案将准确捕获您的微秒值，所以如果您需要，我建议使用他的方式:)

由于/的`%f`参数在2.6 之前不可用，并且如果您不需要捕获微秒，您可以尝试这样的事情（粗略的想法是在周期上拆分并采用第一个元素 - 可能会被优化） ：`datetime``time`

```
In [20]: import time

In [21]: d2 = '2012-11-07 13:41:13.138807'

In [22]: d2_noms = d2.split('.')[0]

In [23]: d1 = time.strptime(d2_noms, '%Y-%m-%d %H:%M:%S')

In [24]: d1
Out[24]: time.struct_time(tm_year=2012, tm_mon=11, tm_mday=7, tm_hour=13, tm_min=41, tm_sec=13, tm_wday=2, tm_yday=312, tm_isdst=-1) 
```

# drupal - 如何在drupal 7中根据分类术语搜索用户列表？

> ID：13598689
> 
> 赞同：0
> 
> 时间：2012-11-28T05:53:24.053
> 
> 标签：drupal, drupal-7, views, taxonomy, drupal-taxonomy

我想通过选择分类从用户列表中搜索用户。我还想在用户个人资料/注册表单中添加分类字段。

假设我有不同的分类法，例如“技术”、“教育”、“股票”，然后通过单击其中任何一个，我想要选择相同分类法的用户列表。请提出解决方案。我对 Drupal 非常陌生，也不是 PHP 程序员。我正在使用 Drupal 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:52:04.403

为此，您需要下载并启用以下模块：[Views](http://drupal.org/project/views)、[Chaos tool suite](http://drupal.org/project/ctools)、[Pathauto](http://drupal.org/project/pathauto)和[Token](http://drupal.org/project/token)。

然后按照以下步骤操作（我假设特定标签上的用户列表将具有 URL，例如`site.com/user-list/n`where `n`is the term id）：

1.  创建一个新词汇表（结构/分类/添加词汇表）。暂时不要添加任何条款！

2.  为您的术语添加新的别名模式（配置/搜索和元数据/URL 别名/模式/分类术语路径）。“所有 [您的词汇表来自步骤 #1)] 路径的模式”应该是`user-list/[term:tid]`

3.  现在您可以添加新术语（结构/分类/添加术语）。

4.  转到配置/人员/帐户设置，选项卡“管理字段”。添加具有数据类型的新字段以存储“术语参考”。保存此字段时，选择“在用户注册表单上显示”。

5.  现在是创建视图的时候了，因为基本术语输出仅适用于节点。所以，模块/视图/配置/添加新视图。将“显示：”从“内容”更改为“用户”，然后按“继续并编辑”。

6.  在视图的页面上，您应该将“页面设置路径：”设置为`user-list`并创建一个上下文过滤器（高级/上下文过滤器/添加）。您应该添加“用户：[您的词汇]（your_vocabulary）出现在：用户：用户。” 筛选。现在您可以保存视图。请注意，在该状态下，只会列出用户的姓名，如果要添加头像等，除了“用户：姓名”之外，您应该在视图中添加特定字段。

现在它应该工作得很好。希望能帮助到你。

# asp.net - 上传文件时出错

> ID：13598690
> 
> 赞同：0
> 
> 时间：2012-11-28T05:53:24.570
> 
> 标签：asp.net

我正在尝试上传一个 305968 kb 的文件，我一直收到一个错误，即文件太大，超出了最大文件大小。我在 web.config 文件中进行了以下更改，但我不断收到错误消息

```
 <httpRuntime requestValidationMode="2.0"
executionTimeout="7200" maxRequestLength="102400" minFreeThreads="88"
minLocalRequestFreeThreads="76" appRequestQueueLimit="200"/>
        <compilation debug="true" targetFramework="4.0"> 
```

我还在 web.config 文件中进行了此更改

```
<security>
            <requestFiltering>
                <requestLimits maxQueryString="10000"
maxUrl="10000" maxAllowedContentLength="3072000000"></requestLimits>
            </requestFiltering>
        </security> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:54:42.103

`Your maxRequestLength is smaller then the file size you are trying to upload.`请记住[**maxRequestLength**](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)默认单位是千字节而不是兆字节。您的文件大小比 web.config 中允许的限制大 203568 kile 字节。增加 maxRequestLength = "409600" 或更大的事件以上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:57:24.150

增加`maxRequestLength`KB（默认单位）

`maxRequestLength`表示支持的最大请求大小`ASP.NET`，而`maxAllowedContentLength`指定支持的请求中内容的最大长度`IIS`。因此，您需要同时设置两者才能上传大文件：较小的“优先”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:19:11.927

检查这个..

```
<httpRuntime requestValidationMode="2.0"
executionTimeout="7200" maxRequestLength="409600" minFreeThreads="88"
minLocalRequestFreeThreads="76" appRequestQueueLimit="200"/>
    <compilation debug="true" targetFramework="4.0"> 
```

# vba - 读取大文本文件 VB6 中的行数

> ID：13598691
> 
> 赞同：2
> 
> 时间：2012-11-28T05:53:28.780
> 
> 标签：vba, text, vb6

我有大小为 230MB 的文本文件。我想计算该文件的行数。

我尝试**`Scripting.FileSystemOblect`**了“”，但内存不足。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:34:32.087

正常的 Windows 换行符是 CRLF，因此您可以计算 LF 并在文件的最后一行后面没有 1 的情况下将计数加 1。

在真正的 VB（即 VB5、VB6 等）中，您可以利用面向字节的字符串操作来加速许多任务。如果我们可以假设文本文件包含 ANSI，那么这非常快：

```
Option Explicit

Private Sub Main()
    Const BUFSIZE As Long = 100000
    Dim T0 As Single
    Dim LfAnsi As String
    Dim F As Integer
    Dim FileBytes As Long
    Dim BytesLeft As Long
    Dim Buffer() As Byte
    Dim strBuffer As String
    Dim BufPos As Long
    Dim LineCount As Long

    T0 = Timer()
    LfAnsi = StrConv(vbLf, vbFromUnicode)
    F = FreeFile(0)
    Open "big.txt" For Binary Access Read As #F
    FileBytes = LOF(F)
    ReDim Buffer(BUFSIZE - 1)
    BytesLeft = FileBytes
    Do Until BytesLeft = 0
        If BufPos = 0 Then
            If BytesLeft < BUFSIZE Then ReDim Buffer(BytesLeft - 1)
            Get #F, , Buffer
            strBuffer = Buffer 'Binary copy of bytes.
            BytesLeft = BytesLeft - LenB(strBuffer)
            BufPos = 1
        End If
        Do Until BufPos = 0
            BufPos = InStrB(BufPos, strBuffer, LfAnsi)
            If BufPos > 0 Then
                LineCount = LineCount + 1
                BufPos = BufPos + 1
            End If
        Loop
    Loop
    Close #F
    'Add 1 to LineCount if last line of your files do not
    'have a trailing CrLf.
    MsgBox "Counted " & Format$(LineCount, "#,##0") & " lines in" & vbNewLine _
         & Format$(FileBytes, "#,##0") & " bytes of text." & vbNewLine _
         & Format$(Timer() - T0, "0.0#") & " seconds."
End Sub 
```

给定一个 293MB 的 7,000,000 行文件，这里只需要 0.7 秒。但请注意，我没有重新启动以确保在运行该测试时文件没有被缓存。如果没有缓存（即重新启动后），我希望它需要长达 5 倍的时间。

转换为处理 Unicode 文本文件相当简单。只需将 B 函数替换为非 B 等效项，确保将 BUFSIZE 设置为 2 的倍数，然后搜索`vbLf`而不是 ANSI LF 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:54:11.273

这对我来说大约需要 6 秒，对于一个 480mb 的二进制文件，1mil+ 0xD (vbcr)

```
Dim buff() As Byte
Dim hF As Integer
Dim i As Long, n As Long

hF = FreeFile(0)

Open "c:\windows\Installer\2f91fd.msp" For Binary Access Read As #hF
ReDim buff(LOF(hF) - 1)
Get #hF, , buff()
Close #hF

For i = 0 To UBound(buff)
    If buff(i) = 13 Then n = n + 1
Next

MsgBox n 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T05:57:58.843

您可以通过将每一行读入同一个变量来做到这一点。无需保存所有行：

```
dim s as string
dim n as integer

open "filename.txt" for input as 1

n = 0
do while not eof(1)
  line input #1, s
  n = n + 1
  loop 
```

这还没有经过测试，自从我完成任何 VB6 以来已经有一段时间了，但它应该很接近。

# iphone - 分析时 iphone App 中的内存泄漏

> ID：13598693
> 
> 赞同：0
> 
> 时间：2012-11-28T05:53:46.237
> 
> 标签：iphone, ios5, memory-leaks

我收到了一个内存泄漏信号，如图所示![在此处输入图像描述](../Images/2ba08ba38b593cb0a52c99bbf4812543.png)

我该如何清除这个，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:10:47.107

利用

```
return [newString autorelease]; 
```

该`NSString`对象 `newString`在函数中分配`CFURLCreateStringByAddingPercentEscapes`。

因此，此时对象的保留计数为 1。因此，当您重新调整保留对象时，您会收到内存泄漏信号。我们可以将对象添加`newString`到自动释放池中，以便操作系统负责在正确的时间释放内存。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:08:18.743

尝试这个...

```
 NSString *newString = nil;
 CFStringRef stringRef = CFURLCreateStringByAddingPercentEscapes(...);
 newString = (NSString *)stringRef;
 CFRelease(stringRef);

 if(newString)
      return newString; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:33:40.963

使用**`(__bridge_transfer NSString *)`**代替**`(__bridge NSString *)`**

使用**ARC**，您可以使用**`__bridge_transfer`**将返回字符串的内存管理转移到**ARC**

**例子：**

```
NSString *myString = [self encodeURL:@"hi*)"];
NSLog(@"%@",myString);

-(NSString *)encodeURL:(NSString *)string{

    NSString *newString = @"";        
    newString = (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)string, NULL, CFSTR("^%*)*&%$"),CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));              
    return newString;

} 
```

# postgresql - pgp_sym_encrypt/pgp_sym_decrypt 错误处理

> ID：13598704
> 
> 赞同：7
> 
> 时间：2012-11-28T05:54:49.637
> 
> 标签：postgresql, encryption

我一直使用 MySQL 作为数据库，并计划迁移到 postgresql。我在整个应用程序中广泛使用了 MySQL 中的 aes_encrypt 和 aes_decrypt 函数。因此，无论何时加密/解密失败，MySQL 都会自动返回“null”。

我不确定如何在 postgresql 中处理相同的问题。尝试使用 pgp_sym_encrypt/pgp_sym_decrypt 函数。如果加密密钥错误，则会抛出错误“错误密钥/损坏数据”。我尝试搜索一些可以捕获此错误并像在 MySQL 中一样返回“null”的函数，这样我就不需要修改我的代码。我一直在寻找，但找不到一个。

有没有人对单个查询使用任何错误处理机制？我发现可以对程序进行错误处理。但是，我必须为此完全重写整个应用程序。

如果你能分享一些细节，那将有很大的帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:00:21.323

如果您希望避免修改代码并让函数`NULL`在错误时返回，您可以通过将它们包装在使用`BEGIN ... EXCEPTION`块来捕获错误的 PL/PgSQL 函数中来做到这一点。

为此，首先我得到错误的 SQLSTATE：

```
regress=# \set VERBOSITY verbose
regress=# SELECT pgp_sym_decrypt('fred','key');
ERROR:  39000: Wrong key or corrupt data
LOCATION:  decrypt_internal, pgp-pgsql.c:607 
```

我可以直接在错误处理程序中使用它，但我更喜欢使用符号名称，所以我在[附录 A - 错误代码](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)中查找与 39000 关联的错误名称，发现它是通用函数调用错误`external_routine_invocation_exception`。不像我们希望的那样具体，但它会做到的。

现在需要一个包装函数。必须定义这样的东西，为`pgp_sym_decrypt`您希望支持的每个重载签名使用一个函数。对于`(bytea,text)`返回的表单，`text`例如：

```
CREATE OR REPLACE FUNCTION pgp_sym_decrypt_null_on_err(data bytea, psw text) RETURNS text AS $$
BEGIN
  RETURN pgp_sym_decrypt(data, psw);
EXCEPTION
  WHEN external_routine_invocation_exception THEN
    RAISE DEBUG USING
       MESSAGE = format('Decryption failed: SQLSTATE %s, Msg: %s',
                        SQLSTATE,SQLERRM),
       HINT = 'pgp_sym_encrypt(...) failed; check your key',
       ERRCODE = 'external_routine_invocation_exception';
    RETURN NULL;
END;
$$ LANGUAGE plpgsql; 
```

我已选择在`DEBUG`级别消息中保留原始错误。这是原始和包装器的比较，具有完整的消息详细程度和调试级别输出。

启用调试输出以显示`RAISE`. 请注意，它还显示`pgp_decrypt_sym`调用的*原始查询文本，包括参数。

```
regress=# SET client_min_messages = DEBUG; 
```

如果启用了详细日志记录，新包装的函数仍会报告错误，但会返回`NULL`：

```
regress=# SELECT pgp_sym_decrypt_null_on_err('redsdfsfdsfd','bobsdf');
LOG:  00000: statement: SELECT pgp_sym_decrypt_null_on_err('redsdfsfdsfd','bobsdf');
LOCATION:  exec_simple_query, postgres.c:860
DEBUG:  39000: Decryption failed: SQLSTATE 39000, Msg: Wrong key or corrupt data
HINT:  pgp_sym_encrypt(...) failed; check your key
LOCATION:  exec_stmt_raise, pl_exec.c:2806
 pgp_sym_decrypt_null_on_err
-----------------------------

(1 row) 
```

与原来的相比，它失败了：

```
regress=# SELECT pgp_sym_decrypt('redsdfsfdsfd','bobsdf');
LOG:  00000: statement: SELECT pgp_sym_decrypt('redsdfsfdsfd','bobsdf');
LOCATION:  exec_simple_query, postgres.c:860
ERROR:  39000: Wrong key or corrupt data
LOCATION:  decrypt_internal, pgp-pgsql.c:607 
```

请注意，**这两种形式都显示了函数在失败时调用的参数**。如果您使用了绑定参数（“准备好的语句”），则不会显示这些参数，但如果您使用数据库内加密，您仍应将日志视为安全关键。

就个人而言，我认为最好在应用程序中进行加密，这样数据库就永远无法访问密钥。

# android - 如何在地图视图气球中添加自己的图像

> ID：13598705
> 
> 赞同：0
> 
> 时间：2012-11-28T05:54:59.920
> 
> 标签：android

> **可能重复：**
> [如何在地图视图气球中添加图像？](https://stackoverflow.com/questions/13578388/how-to-add-an-image-in-mapview-balloon)

这是一个显示来自 url 的图像的代码我如何从我的 res/drawable 文件夹中提供图像？这是我使用的[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons) 代码，请告诉我如何提供自己的图像而不是 url

```
 public class CustomMap extends MapActivity {

MapView mapView;
List<Overlay> mapOverlays;
Drawable drawable;
Drawable drawable2;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable,  
   mapView);

    GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
    CustomOverlayItem overlayItem = new CustomOverlayItem(point, "Tomorrow  
   Never Dies (1997)", 
            "(M gives Bond his mission in Daimler car)", 
            "http://ia.media-imdb.com/images 
 5BMTM1MTk2ODQxNV5BMl5BanBnXkFtZTcwOTY5MDg0NA@@._V1._SX40_CR0,0,40,54_.jpg");
    itemizedOverlay.addOverlay(overlayItem);

    GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2,  
    "GoldenEye    (1995)", 
            "(Interiors Russian defence ministry council chambers in  
St Petersburg)", 
            "http://ia.media-imdb.com 

  images5BMzk2OTg4MTk1NF5BMl5BanBnXkFtZTcwNj
ExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");        
    itemizedOverlay.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay);

    // second overlay
    drawable2 = getResources().getDrawable(R.drawable.marker2);
    itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>
   (drawable2,    mapView);

    GeoPoint point3 = new GeoPoint((int)(51.513329*1E6),(int)(-0.08896*1E6));
    CustomOverlayItem overlayItem3 = new CustomOverlayItem(point3, "Sliding 
   Doors (1998)", 
            "(interiors)", null);
    itemizedOverlay2.addOverlay(overlayItem3);

    GeoPoint point4 = new GeoPoint((int)(51.51738*1E6),(int)(-0.08186*1E6));
    CustomOverlayItem overlayItem4 = new CustomOverlayItem(point4, "Mission:  
  Impossible (1996)", 
            "(Ethan & Jim cafe meeting)", 
            "http://ia.media- 
      imdb.coimagesV5BMjAyNjk5Njk0MV5BMl5BanBnXkFtZTcwOT
 A4MjIyMQ@@._V1._SX40_CR0,0,40,54_.jpg");       
    itemizedOverlay2.addOverlay(overlayItem4);

    mapOverlays.add(itemizedOverlay2);

    final MapController mc = mapView.getController();
    mc.animateTo(point2);
    mc.setZoom(16);

  }

@Override
protected boolean isRouteDisplayed() {
    return false;
}

         }

                     public class CustomOverlayItem extends OverlayItem {

protected String mImageURL;

public CustomOverlayItem(GeoPoint point, String title, String snippet, String  
         imageURL) {
    super(point, title, snippet);
    mImageURL = imageURL;
}

public String getImageURL() {
    return mImageURL;
}

public void setImageURL(String imageURL) {
    this.mImageURL = imageURL;
}

             }

                    public class CustomBalloonOverlayView<Item extends OverlayItem> 
       extends BalloonOverlayView<CustomOverlayItem> {

private TextView title;
private TextView snippet;
private ImageView image;

public CustomBalloonOverlayView(Context context, int balloonBottomOffset) {
    super(context, balloonBottomOffset);
}

@Override
protected void setupView(Context context, final ViewGroup parent) {

    // inflate our custom layout into parent
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.balloon_overlay_example2, parent);

    // setup our fields
    title = (TextView) v.findViewById(R.id.balloon_item_title);
    snippet = (TextView) v.findViewById(R.id.balloon_item_snippet);
    image = (ImageView) v.findViewById(R.id.balloon_item_image);

}

@Override
protected void setBalloonData(CustomOverlayItem item, ViewGroup parent) {

    // map our custom item data to fields
    title.setText(item.getTitle());
    snippet.setText(item.getSnippet());

    // get remote image from network.
    // bitmap results would normally be cached, but this is good enough for  
         demo purpose.
    image.setImageResource(R.drawable.icon);
    new FetchImageTask() { 
        protected void onPostExecute(Bitmap result) {
            if (result != null) {
                image.setImageBitmap(result);
            }
        }
    }.execute(item.getImageURL());

}

private class FetchImageTask extends AsyncTask<String, Integer, Bitmap> {
    @Override
    protected Bitmap doInBackground(String... arg0) {
        Bitmap b = null;
        try {
             b = BitmapFactory.decodeStream((InputStream) new  
       URL(arg0[0]).getContent());
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
        return b;
    }   
}

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:48:44.830

简单的方法

1.  换班`CustomOverlayItem`。如果您不想从 URL 加载图像，您可以更改 `String mImageURL`为`int drawableId`. 并为此变量和新构造函数创建 getter 和 setter。

    ```
    public class CustomOverlayItem extends OverlayItem {

    protected String mImageURL;
    private int drawableId;

    public CustomOverlayItem(GeoPoint point, String title, String snippet, int drawableId) {
        super(point, title, snippet);
        this.drawableId = drawableId;
    }

    public CustomOverlayItem(GeoPoint point, String title, String snippet, String imageURL) {
        super(point, title, snippet);
        mImageURL = imageURL;
    }

    public int getDrawableId() {
        return drawableId;
    }

    public void setDrawableId(int drawableId) {
        this.drawableId = drawableId;
    }

    public String getImageURL() {
        return mImageURL;
    }

    public void setImageURL(String imageURL) {
        this.mImageURL = imageURL;
    } 
    ```

    }

2.  在类`setBalloonData`的方法中`CustomBalloonOverlayView`，将其更改为

    ```
    @Override
    protected void setBalloonData(CustomOverlayItem item, ViewGroup parent) {

    // map our custom item data to fields
    title.setText(item.getTitle());
    snippet.setText(item.getSnippet());

    // get remote image from network.
    // bitmap results would normally be cached, but this is good enough for demo purpose.
    image.setImageResource(item.getDrawableId()); // you set your image from drawable here.

    Here is where you load image from URL. So comment or remove it.
    /*new FetchImageTask() { 
        protected void onPostExecute(Bitmap result) {
            if (result != null) {
                image.setImageBitmap(result);
            }
         }
    }.execute(item.getImageURL());*/ } 
    ```

3.  在`CustomMap`中，更改创建叠加层的方式

    ```
     CustomOverlayItem overlayItem = new CustomOverlayItem(point, "Tomorrow Never Dies (1997)", 
                "(M gives Bond his mission in Daimler car)", 
                R.drawable.marker); // pass your drawable here  instead of URL. 
    ```

如果你想保留方法加载 URL，你也必须修改`BalloonOverlayView`。

# javascript - 调用特定的 jQuery 插件函数，其中两个插件具有相同的函数名

> ID：13598707
> 
> 赞同：0
> 
> 时间：2012-11-28T05:55:12.943
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个使用 Twitter Bootstrap 框架的项目。我也在使用 jQuery UI 库。问题是在这两个库中有一些同名的函数，例如`tooltip`. 现在，当我将此函数应用于任何元素时，将应用最后一个声明的函数。

例如，如果我在 Bootstrap 库之后包含 jQuery UI 库，并使用

```
$("element").tooltip(); 
```

调用 jQuery UI 中的`tooltip()`函数。我知道我可以通过从其中一个库中删除给定函数或重新排列库的位置来实现所需的结果。但是我想知道当有两个库共享相同的函数名时，是否有任何方法可以指定要调用哪个库的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:58:25.643

不，没有办法同时使用这两个功能。这两个函数都是通过原型添加到 $() 对象中的。所以也许你应该重命名其中一个，或者只使用一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:01:44.647

您可以在加载一个插件后重命名它，然后再加载下一个。类似的东西`$.fn.jqueryui_tooltip = $.fn.tooltip;`，然后才加载 Twitter 的库。

# jsf-2 - Websphere 8 上的 JSF2 和 primefaces 3.4

> ID：13598710
> 
> 赞同：3
> 
> 时间：2012-11-28T05:55:34.783
> 
> 标签：jsf-2, primefaces

我用 jsf2、Primefaces 3.4、Tomcat7 创建了 web 动态项目。应用程序运行良好。如果我在 Websphere8 而不是 Tomcat7 上部署同一项目的 EAR，我会收到异常。我不确定发生了什么。我是 JSF2 和 Wepshere8 的新手。

您能否提供有关如何在 Websphere 8 上启动示例 jsf2 + primefaces 项目的链接

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:20:38.507

知道了。尝试在 web.xml 中添加 com.sun.faces.config.ConfigureListener 而不是 org.apache.myfaces.webapp.StartupServletContextListener，重新启动服务器然后运行它。

代码应如下所示。

```
<listener>  
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>  
</listener> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T07:57:04.970

对于使用 JSF 的不同实现，WebSphere Application Server JSF 引擎从应用程序服务器运行时确定是使用 SUN RI 还是 Apache MyFaces。在 JSF 引擎确定所使用的实现之后，正确的侦听器类将注册到 Web 容器。您不需要将 com.sun.faces.ConfigureListener 或 org.apache.myfaces.StartupConfigureListener 添加到 web.xml 文件中。

[http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/cweb_javaserver_faces.html](http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/cweb_javaserver_faces.html)

**请看上面...**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T16:20:45.267

我也面临同样的问题。Websphere 默认支持 sun impl 和 apache myfaces 及其 jsf 1.2。

使用 jsf 2 实现。

1.确保从您的应用程序中删除 servlet.jar。它需要 tomcat 但不在 websphere 中。

2.将ear的类加载器策略更改为最后一个父级。最后一个父级意味着您的应用程序中的lib将具有更高的优先级。如果找不到将从WAS类路径加载。

3.还要确保将 webmodule 类加载器策略更改为最后一个父级。

4.重启websphere。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-20T16:25:47.727

为了解决 websphere 8.5 中 primefaces 的类加载器，将 jsf **jsf-api jsf-impl javaee-api**替换 为 websphere **myfaces-api myfaces-impl的本机实现**

# objective-c - 在iOS中将日期转换为第二天的日期

> ID：13598712
> 
> 赞同：2
> 
> 时间：2012-11-28T05:55:36.343
> 
> 标签：objective-c, ios5, ios6, nsdate, xcode4.5

我有一个字符串格式的日期，就像`30-11-2012`. 我希望它旁边的日期`01-12-2012`再次以字符串格式显示。有没有办法得到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T06:05:54.370

您应该使用 NSCalendar 以获得最佳兼容性

```
NSDate *today = [NSDate dateWithNaturalLanguageString:@"2011-11-30"];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *dayComponent = [NSDateComponents new];
dayComponent.day = 1;

today = [calendar dateByAddingComponents:dayComponent toDate:today options:0];
//2011-12-01 12:00:00 +0000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T06:59:26.753

我从一个忘记名字的人那里得到了答案，我正要接受他/她的答案，但是当我点击接受答案时，它告诉我该帖子已被删除。

该匿名人士给出的答案如下

```
NSString *dateString = @"22-11-2012";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:dateString];

NSDateComponents *components= [[NSDateComponents alloc] init];
[components setDay:1];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDate *dateIncremented= [calendar dateByAddingComponents:components toDate:dateFromString options:0];

NSDateFormatter *myDateFormatter = [[NSDateFormatter alloc] init];
[myDateFormatter setDateFormat:@"dd-MM-yyyy"];
NSString *stringFromDate = [myDateFormatter stringFromDate:dateIncremented];
NSLog(@"%@", stringFromDate); 
```

最后，我真的很想感谢那个匿名的人，我知道这并没有那么棘手，但这对我帮助很大。再次感谢匿名助手。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-22T09:33:39.647

**迅捷3.0**

```
var components = DateComponents()
components.day = 1
let now = Date()
let futureDate = Calendar.current.date(byAdding: components, to: now, wrappingComponents: false) 
```

//现在 = 2017-03-22 未来日期 = 2017-03-23

# php - 使用php将文本写入csv时如何添加样式

> ID：13598713
> 
> 赞同：0
> 
> 时间：2012-11-28T05:55:40.380
> 
> 标签：php, csv

当我将文本写入 csv 时，我想保留文本的格式。

例子

**名字**约翰

**22**岁

**国家**阿富汗

在我的示例中，我有我的标签及其值，当我使用 PHP 将其写入 csv 时，我想保留它的样式。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:01:22.853

`csv`是用逗号分隔的纯文本`,`。它没有附加任何样式。您可以全部限制输出，或者您可以使用其他支持文本样式的格式。

见 - [http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

# codeigniter - CodeIgniter：load->helper的范围是什么

> ID：13598714
> 
> 赞同：0
> 
> 时间：2012-11-28T05:55:53.583
> 
> 标签：codeigniter, frameworks

在控制器类中，我有这个功能：

```
public function index(){
    $this->load->helper('url');
    $data['title'] = 'News archive';
    $this->load->view('news/index', $data);
} 
```

我加载帮助网址是因为我在新闻/索引中使用了 anchor()。所以似乎在父函数中加载帮助程序就足够了，我不必在 news/index.js 中加载它。

所以我的问题是 CI 下面发生了什么让我这样做？load->view 是一个函数，还是在 $data 上粘贴执行 news/index 的结果？load->view 如何知道 helper url 已加载到索引中？我仍在尝试理解 CI 框架是如何工作的。

另外，在构造函数或我们需要的每个函数中加载帮助器的最佳位置是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:06:50.603

```
Also what would be the best place to load helper, in the constructor, or in each function as we need it? 
```

作为一个粗略的经验法则；

*   如果您在控制器中使用过一次助手 - 将其放在该特定功能中
*   如果您在控制器中的多个位置使用助手 - 将其放在该控制器构造函数中
*   如果您在多个控制器中的多个位置使用帮助器 - 将其放置在“自动加载”部分一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:33:47.437

如果您通过 codeigniter 中的 Loader 类，您可以获得所有答案...

```
path >> system/core/loader.php 
```

所做的一切都在这里......

最后一个问题。根据用户指南

[http://ellislab.com/codeigniter/user-guide/libraries/loader.html](http://ellislab.com/codeigniter/user-guide/libraries/loader.html)

> loader，顾名思义，就是用来加载元素的。这些元素可以是库（类）视图文件、帮助程序、模型或您自己的文件。

所以因为它只是加载元素......我通常（更喜欢）在需要的每个函数中加载它。（除非我在其他功能中也需要相同的元素）

# android - 在android中接收和连接超过160个字符的短信

> ID：13598725
> 
> 赞同：2
> 
> 时间：2012-11-28T05:57:05.907
> 
> 标签：android, sms

我正在我的应用程序中使用 SMS 接收器模块，在该模块中我通过我的应用程序接收短信，如果 sms 超过 160 个字符，那么我必须将该 SMS 与其下一部分连接并显示它。目前我正在使用一个简单的接收器代码。请建议我执行此任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:03:38.660

是的，尝试处理多部分消息：

```
@Override
        public void onReceive(Context context, Intent intent) {
                  Bundle bundle = intent.getExtras();
                  if (bundle != null) {
                   Object[] pdus = (Object[])bundle.get("pdus");
                   final SmsMessage[] messages = new SmsMessage[pdus.length];
                   for (int i = 0; i < pdus.length; i++) {
                      messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    }
                       StringBuffer content = new StringBuffer();
                        if (messages.length > 0) {
                        for (int i = 0; i < messages.length; i++) {
                            content.append(messages[i].getMessageBody());
                              }
                          }
                         String mySmsText = content.toString();
                        }
                    }

                } 
```

# javascript - 从上一个选择框中选择一个选项时启用选择框

> ID：13598732
> 
> 赞同：0
> 
> 时间：2012-11-28T05:57:36.560
> 
> 标签：javascript, jquery, html

我在一个页面上有三个选择框，我想禁用第二个和第三个选择框，直到在第一个选择框做出选择，同样保持第三个选择框禁用，直到在第二个选择框做出选择。我想根据在第一个选择框中做出的选择来填充第二个选择框。例如，如果三星是在第一个框中做出的选择，那么我希望三星型号只出现在第二个选择框中。

这是 m HTML 代码。

```
<html>
<head>

<style>
select {
  -webkit-appearance:none;
  background-color:#58B14C;
  background-position:initial initial;
  background-repeat:initial initial;
  border:0;
  border-bottom-left-radius:8px;
  border-bottom-right-radius:8px;
  border-top-left-radius:8px;
  border-top-right-radius:8px;
  color:#EEEEEE;
  font-size:14px;
  font-weight:bold;
  margin-left:3px;
  padding:2px 10px;
  width:347px;
  background:url("img/arrow.gif") no-repeat scroll 316px 6px black;
  background-size: 16px;

}
select option{
    background-color: black;
}
#mainselection { overflow:hidden; width:352px;
-moz-border-radius: 9px 9px 9px 9px;
-webkit-border-radius: 9px 9px 9px 9px;
border-radius: 9px 9px 9px 9px;
box-shadow: 10px 10px 10px black;
background:grey; 
float: left;
}

.stepsClass{
    float:left;
}
body{
    background-color: whitesmoke;
}
</style>

</head>
<body>
    <form style="position:absolute;left: 15%;top: 25%;">
        <div class="stepsClass"><input type="image" src="img/step1.png"></br><div id="mainselection">
    <select id="Brand">
<option>Select your cellphone Brand</option>
<option>Blackberry</option>
<option>I-phone</option>
<option>Samsung</option>
<option>HTC</option>
<option>Nokia</option>
<option>Motorola</option>
</select>
    </div></div>
      <div class="stepsClass"><input type="image" src="img/step2.png"></br>  <div id="mainselection">
<select id="Model">
<option>Select your cellphone Model</option>
<option>Blackberry</option>
<option>I-phone</option>
<option>Samsung</option>
<option>HTC</option>
<option>Nokia</option>
<option>Motorola</option>
</select>
          </div></div>
        <div class="stepsClass"><input type="image" src="img/step3.png"></br>
        <div id="mainselection">
<select id="Carrier">
<option>Select your Carrier</option>
<option>Blackberry</option>
<option>I-phone</option>
<option>Samsung</option>
<option>HTC</option>
<option>Nokia</option>
<option>Motorola</option>
</select>
        </div></div>
    </form>
</body>
</html> 
```

我很抱歉没有上传图片，我假设它们与这个问题没有任何关系。我还添加了 jQuery 标签，因为有些人发现在 jQuery 中编写 javascript 更容易。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:19:16.913

我已将您的 HTML 选择选项修改为具有值属性。我相信这将允许您根据在第一个选择框中做出的选择来填充第二个选择框。

```
 <select id="Brand">
  <option value = "">Select your cellphone Brand</option>
  <option value = "BB">Blackberry</option>
  <option value = "ios">I-phone</option>
  <option value = "sam">Samsung</option>
  <option value = "htc">HTC</option>
  <option value = "nokia">Nokia</option>
  <option value = "mot">Motorola</option>
  </select>

<select id="Model" >
    <option>Select Your Model No.</option>
</select>
Javascrpt

$(function(){
    $("#Model").attr("disabled","true");
    $("#Brand").change(function(){
        if(this.value != ""){
          $('#Model').removeAttr('disabled');
           var brand = $("#Brand option:selected").text();
            document.getElementById("Model").options.length = 1;
            for(var i = 0; i < 10 ;i++){
                var selectOption = document.createElement("OPTION");
                selectOption.text = brand + " Model No." + i;
                document.getElementById('Model').appendChild(selectOption);
            } 
$("#Model").selectmenu("refresh","true");            
        }
        else{
            $("#Model").attr("disabled","true"); 
            $("#Model").val("");            
            $("#Model").selectmenu("refresh","true");      
        }
    });
}) 
```

希望它符合您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:02:07.333

通过添加禁用必需（第二和第三）列表`disabled="disabled"`

```
$(function(){
      // The following will enable the 2nd drop down list when 1st one will be changed/selected.
      $('#Brand').change(function(){
         $('#Model').removeAttr('disabled');
      });   

      // This block will enable the 3rd list when you change the 2nd list.
      $('#Model').change(function(){
         $('#Carrier').removeAttr('disabled');
      }) ;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:10:48.840

您可以像这样在 jquery 中禁用 copmbobox：

```
$("#cbCountry").combobox("option", "disabled", true); 
```

检查您的条件，然后根据您的条件禁用组合框

# android - Android通用图像加载器中的读取超时错误

> ID：13598733
> 
> 赞同：0
> 
> 时间：2012-11-28T05:57:56.890
> 
> 标签：android, universal-image-loader

@nostra13 我下载了库`https://github.com/nostra13/Android-Universal-Image-Loader`

当我运行上面链接中给出的示例代码时，对于我得到的大多数图像`READ TIMED OUT`......

我在尝试wifi，网速很好，设备是三星Galaxy S

你能帮忙吗....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:15:53.847

我不知道通用图像加载器是如何实现的。但是看了一眼 github 示例代码，我注意到了一些东西。似乎不建议在您的项目中按原样使用默认示例代码。所以这可能是示例代码没有开箱即用的原因。寻找这个配置块

```
// DON'T COPY THIS CODE TO YOUR PROJECT! This is just example of using ALL options. Most of them have default values.
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
            .memoryCacheExtraOptions(480, 800) // max width, max height
            .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75) // Can slow ImageLoader, use it carefully (Better don't use it)
            .threadPoolSize(3)
            .threadPriority(Thread.NORM_PRIORITY - 1)
            .denyCacheImageMultipleSizesInMemory()
            .offOutOfMemoryHandling()
            .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) // You can pass your own memory cache implementation
            .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
            .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
            .imageDownloader(new URLConnectionImageDownloader(5 * 1000, 20 * 1000)) // connectTimeout (5 s), readTimeout (20 s)
            .tasksProcessingOrder(QueueProcessingType.FIFO)
            .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
            .enableLogging()
            .build();
// Initialize ImageLoader with created configuration. Do it once on Application start.
imageLoader.init(config); 
```

并修改以下代码以使用更长的超时时间。如果有帮助，请尝试并报告。

```
 .imageDownloader(new URLConnectionImageDownloader(5 * 1000, 20 * 1000)) // connectTimeout (5 s), readTimeout (20 s) 
```

# iphone - 自定义 CallOut 在 ios6 中未正确显示？

> ID：13598739
> 
> 赞同：7
> 
> 时间：2012-11-28T05:58:21.693
> 
> 标签：iphone, objective-c, ios6, mkmapview

因为我想在 mkmapview 中实现自定义调用，所以我正在使用这些类 CalloutMapAnnotationView.h 和 CalloutMapAnnotationView.m

我从以下链接中提取了这些类

[https://github.com/asalom/Custom-Map-Annotation-Callouts/blob/master/Classes/CalloutMapAnnotationView.h](https://github.com/asalom/Custom-Map-Annotation-Callouts/blob/master/Classes/CalloutMapAnnotationView.h)

[https://github.com/asalom/Custom-Map-Annotation-Callouts/blob/master/Classes/CalloutMapAnnotationView.m](https://github.com/asalom/Custom-Map-Annotation-Callouts/blob/master/Classes/CalloutMapAnnotationView.m)

这些在 ios5 中工作正常，但在 ios6 中，当我单击调用时，地图视图正在移动，并且调用未正确显示，如下图所示，当我缩放时，它也没有正确出现我尝试了几种方法来获取通过检查操作系统的版本来摆脱这个问题，并尝试更改类中的一些方法但不使用。

在 ios5 地图视图中实现这些之后，就像这样 ![在此处输入图像描述](../Images/90dcde1ecc5e9a575dc891d25daea9a1.png)

在 iOS6 中，这一项不像在 ios5 中那样正常。例如 ![在此处输入图像描述](../Images/afa45a4c4fa461e9c5396c9ff0077c54.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T05:01:48.497

`iOS 6`我在使用这些类时也遇到了同样的问题。这些更改对我有用：

1）这种方法的改变：

您将在地图视图类中实现此方法

```
(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView*)view 
```

按照以下行的顺序

```
self.selectedAnnotationView = view;

[self.mapView addAnnotation:self.calloutAnnotation]; 
```

2) 在 CalloutMapAnnotationView.m 文件中

```
- (void)adjustMapRegionIfNeeded in this method first 5 lines like bellow

    CGFloat xPixelShift = 0;

   if ([self relativeParentXPosition] < 38) {

        xPixelShift = 38 - [self relativeParentXPosition];

   } else if ([self relativeParentXPosition] > self.frame.size.width - 38) {

  xPixelShift = (self.frame.size.width - 38) - [self relativeParentXPosition];

   } 
```

3) 在同一个类 CalloutMapAnnotationView.m - `(void)drawRect:(CGRect)rect`在这个方法之后`CGFloat parentX = [self relativeParentXPosition];`

行并在`rect = self.bounds;`此行上方添加以下行

```
 if ([self relativeParentXPosition] < 38) {

       parentX = 38;

   } else if ([self relativeParentXPosition] > self.mapView.frame.size.width - 38) {

       parentX = [self relativeParentXPosition]-25;

   } 
```

4) 在同一类 CalloutMapAnnotationView.m 中。

```
- (void)didMoveToSuperview {
        [super didMoveToSuperview];
        [self.superview bringSubviewToFront:self];
    } 
```

您可以直接使用上述类并使用它们在 iOS 5 和 iOS 6 中都可以正常工作。您应该根据您的要求进行必要的更改。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-15T08:04:26.423

只是你可以像这样添加 nsstring 标题和 nstring 副标题，而 _name 就是你想要的标题。

```
- (NSString *)title {
    return _name;
}
- (NSString *)subtitle {
    return [NSString stringWithFormat:@"%f, %f", _coordinate.latitude, _coordinate.longitude];
} 
```

# php - 根据浏览器中打开的 url 更改 Joomla 模板，如何？

> ID：13598743
> 
> 赞同：1
> 
> 时间：2012-11-28T05:58:47.707
> 
> 标签：php, url, joomla, joomla-template

我在问是否可以使用 Joomla 做以下事情

我有 2 个不同的 URL，例如：www.stupidname.com 和 www.seriousname.com

如果用户通过他的浏览器打开愚蠢名称.com 将打开具有愚蠢模板的网站 如果用户通过他的浏览器打开 seriusname.com 将打开具有严重模板的网站

网站和内容是一样的...应该只根据浏览器中打开的url更改模板

你对如何做这件事有一些想法吗？

谢谢安德里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T11:04:14.003

在根据域名使模板元素成为条件之前，我已经完成了这项工作，并且效果很好。我想您可以扩展相同的逻辑来更改模板。

也许您可以在两个模板的 index.php 中添加一个条件来更改模板。也许像...

```
if ( substr_count( $_SERVER['HTTP_HOST'], "silly") ) {
   $GLOBALS["mainframe"]->setTemplate = "silly_template_name";
} else {
   $GLOBALS["mainframe"]->setTemplate = "serious_template_name";
} 
```

...我没有对此进行测试，但我认为原则上它应该可以正常工作，尽管它可能取决于您拥有的 Joomla 版本。

正如 saji89 指出的那样，有很多好的多站点扩展，这也是一个不错的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T12:53:07.583

根据我对 Joomla 的个人经验，我可以建议您使用组件虚拟域（[http://extensions.joomla.org/extensions/core-enhancements/multiple-sites/7557](http://extensions.joomla.org/extensions/core-enhancements/multiple-sites/7557)），您可以添加重定向到主域的域安装 Joomla 的站点，您可以通过该组件为他们分配所需的模板。

我可以确认 Joomla 2.5 最新更新的功能，在一个 Joomla 安装上使用了大约 5 个以上不同的虚拟域。

Some possible downsides i want to mention: SEO links can get sometimes messy, you need to play with some SEO component and its settings its better to use same structure and components for boths side its easier because otherwise the administration gets messy but its possible the user which register on one website has automatically account on all of them because its one Joomla

# java - 它们是完全相同的方法，但一种有效，另一种无效

> ID：13598747
> 
> 赞同：0
> 
> 时间：2012-11-28T05:58:57.357
> 
> 标签：java, methods, io

```
public class L20 {
public static void main(String[] args) throws IOException{
    Scanner input=new Scanner(System.in);

    System.out.println("Enter file name");
    String in=input.nextLine();
    try{
        textWriter(in);
        textReader(in);
        textChanger(in);

    }catch(Exception e){

    }

}

public static void textWriter(String path) throws IOException{
    String[] alphabet=    
 {"a","b","c","d","e","f","g","h","i","j","k","m","l","n","o","p","q","r","s","t","u","v","w","x","y","z"};
File file=new File(path);
Writer output=null;
    Random number=new Random();
    output=new BufferedWriter(new FileWriter(file));
    int lines=10+number.nextInt(11);
    for(int i=0;i<lines;i++){
    int it2=1+number.nextInt(9);
    int n1=number.nextInt(26);
    int n2=number.nextInt(26);
    int n3=number.nextInt(26);

    String t2=Integer.toString(it2);
    String t1=alphabet[n1]+alphabet[n2]+alphabet[n3];
    String text=t1+t2;
    output.write(text);
    ((BufferedWriter) output).newLine();
    }
    output.close();
    System.out.println("Your file has been written");
}

public static void textReader(String path) throws IOException{
    File file=new File(path);
    Scanner input;
    input=new Scanner(file);
    String line;
    while((line=input.nextLine())!=null){
        System.out.println(line);
    }
    input.close();
}

private static void textChanger(String path) throws IOException{
    File file=new File(path);
    Scanner input2;
    input2=new Scanner(file);
    String line;
    while((line=input2.nextLine())!=null){
        System.out.println(line);
    }
    input2.close();
}

} 
```

textWriter 工作正常。textReader 和 textChanger 完全一样！但是 textReader 工作正常，而 textChanger 不行！为什么？我什至为每种方法重命名了扫描仪。看来 Text.txt 只能读取一次？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T06:07:15.797

问题是您的程序正在默默地崩溃`textReader`并且`textChanger`根本没有被调用。而不是这个：

```
while((line=input.nextLine())!=null){
    System.out.println(line);
} 
```

你应该使用这个：

```
while(input.hasNextLine()){
    System.out.println(input.nextLine());
} 
```

`Scanner.nextLine()``null`如果没有更多的输入，将不会返回；它会抛出一个`NoSuchElementException`.

一般来说，不要默默地捕捉异常。至少打电话`printStackTrace()`或记录问题！

# java - 如何在 Spring 中使用枚举设置 int 属性？

> ID：13598748
> 
> 赞同：3
> 
> 时间：2012-11-28T05:58:58.153
> 
> 标签：java, spring

我有一个 int 属性，我有一个枚举。如何使用 Spring bean 配置中的枚举设置 int 属性？

```
public class HelloWorld {
    private int type1;

    public void setType1(int type1) {
        this.type1 = type1;
    }
}

public enum MyEnumType1 {
    TYPE1(1),
    TYPE2(2);

    private final int index;

    private MyEnumType1(int i) {
        this.index = i;
    }

    public int getIndex() {
        return index;
    }
} 
```

我尝试了以下但没有奏效。

```
<bean id="helloBean" class="com.example.HelloWorld">
    <property name="type1" value="TYPE1.index" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:43:09.783

```
<bean id="helloBean" class="com.example.HelloWorld">
    <property name="type1" value="#{T(com.MyEnum).TYPE1.index}" />
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:03:05.183

试试看

```
public void setType1(MyEnumType1 type1) {
this.type1 = type1.getIndex();
}

<bean id="helloBean" class="com.example.HelloWorld">
  <property name="type1" value="TYPE1 />
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:46:24.383

Spring应用程序上下文：

```
<util:map id="myMap">
  <entry key="#{T(com.MyEnum).ELEM1}" value="value1" />
  <entry key="#{T(com.MyEnum).ELEM2}" value="value2" />
</util:map> 
```

`Map`注入的类：

```
public class MyClass {

    private @Resource Map<MyEnum, String> myMap;
} 
```

需要注意的重要一点是，在 Spring 上下文中，我使用了 SpEL（Spring 表达式语言），它仅在 3.0 版之后才可用。`@Resource`按 bean 名称自动注入值。

[此](https://stackoverflow.com/questions/1174308/spring-how-do-you-set-enum-keys-in-a-map-with-annotations)页面上的答案可以帮助您。看看它。

# java - 部署应用程序要遵循的方法

> ID：13598755
> 
> 赞同：0
> 
> 时间：2012-11-28T05:59:35.737
> 
> 标签：java, web-applications, deployment, struts, web-deployment

我们已经在 java (STRUTS 2.0) 中开发了一个基于 Web 的应用程序。现在我们要部署应用程序。客户端有一个预 UAT 环境、UAT 环境和一个生产环境。

现在，当我们为 pre-UAT 进行部署时，我们已经创建了项目的副本并将其重命名为 pre-UAT。同样，我们正在规划 UAT 环境，并且我们已经拥有一个用于开发的环境。因此，我们总共将拥有 3 个代码副本。

我想问这种方法是否正确或遵循的标准方法是什么。这不是我们的最终版本，因为我们首先发布一个版本，然后我们将致力于其他模块。

所以请任何人都可以指导我遵循创建这 3 个不同环境的方法。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:11:13.013

我不确定您所说的“我们将拥有 3 个代码副本”是指什么。如果您暗示您实际上多次复制了代码库，请停止阅读并参考以下内容：

[为什么“复制和粘贴”代码很危险？](https://stackoverflow.com/questions/2490884/why-is-copy-and-paste-of-code-dangerous)

一旦你完成阅读，做一些关于源代码控制以及如何使用分支/标记进行并发开发的研究。

* * *

如果您指的是多环境*部署*：

假设您的应用程序设计正确（并且我在这里非常小心），一个 WAR 文件（您提到您使用的是 Tomcat，所以我认为您的应用程序被打包为 WAR）就足够了。应用程序代码应该与环境无关，并且应该从外部资源（例如数据库、配置文件或 JNDI）读取其特定于环境的配置。

如果您的应用程序代码与环境无关，那么您只需将 WAR 文件部署到每个环境（同一个 WAR 文件），以及特定于环境的外部工件集（例如配置文件）。

# html - 如何从元素边缘偏移边框图像？

> ID：13598762
> 
> 赞同：10
> 
> 时间：2012-11-28T06:00:00.577
> 
> 标签：html, css

我有一个底部边框图像，它应该比元素的实际边缘低几个（比如 3 个）像素。

这是我到目前为止所得到的：

```
<style>
h1 { background-color: green;
    border: solid transparent;
    border-width: 0 0 13px;
    border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAOCAYAAAArMezNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAQZJREFUeNrc0y1LhEEUBeDnyoIfwSzYBX+CG0Qslm0m3bhd2KBs3CSCmMxbBLGtwSKCoL9C2GYVLDZBvJZRXhZfWZEtHrjMnTNnzszc4UZmmgqK8RW2fpBt4h43aGHuG80ctnGemWYK2cI1LtGsiJuFu8U6HjGPQ7QRJdqFW8AzRGaKiPF6DMrYGeN7mXkEEbGPxcK/ZOZx4fcy87RR8/RODT9fKeFxRKyUfDSuafzxf0Z1azOmhP9v/Dap5rfGyxNolqrGZxNsGOApIg7qBBHRw3u1pWENQ+RYDMvaJ3Zxgm4WoFu4dmbKzK/Oqx68gX7J+7j75nKz2MFqmT/gIjNfI0Jm+hgA74lgEBd+SugAAAAASUVORK5CYII=") 1 1 13 1 repeat;
}
</style>

<h1>How to get a border image offset from the edge of the box?</h1>

<p>Bacon ipsum dolor sit amet tenderloin drumstick ribeye filet mignon t-bone beef ribs. Tri-tip venison turkey salami drumstick chicken pastrami. Frankfurter pork jowl ball tip tail.</p> 
```

或查看 JS Fiddle：http: [//jsfiddle.net/BDbX2/1/](http://jsfiddle.net/BDbX2/1/)。

我怎样才能让边框图像稍微低一点，这样元素的绿色背景就不会从边框图像后面露出来？

这是一个屏幕截图，显示了我正在寻找的更多内容：

![这是一个屏幕截图，显示了我正在寻找的更多内容](../Images/9a2ba6ac634fbbbb540ac7bd5f539896.png)

请注意，在边界上方，绿色是可见且完整的。但我不希望绿色出现在边框下方。

我正在使用火狐；自然，我更喜欢在多个（最新版本）浏览器中工作的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T23:44:40.463

试试这个

```
h1 {    
    background-color: green;
    position:relative;
    padding-bottom:7px; // padding enough to cover the upper part of the border with color
    margin-bottom:6px; // margin + padding should match the height of the border
}
h1:after {
    content:'';
    position:absolute;
    left:0;
    right:0;
    bottom:-7px; // should match padding-bottom of h1
    border: solid transparent;
    border-width: 0 0 13px;
    border-image:url("data:image/png;base64,...") 1 1 13 1 repeat;
} 
```

**演示在** [http://jsfiddle.net/gaby/BDbX2/7/](http://jsfiddle.net/gaby/BDbX2/7/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T09:58:05.193

```
border-image-outset 
```

边框图像区域超出边框框的量

查看以下站点以获取浏览器支持。

[http://www.w3schools.com/cssref/css3_pr_border-image-outset.asp](http://www.w3schools.com/cssref/css3_pr_border-image-outset.asp) [https://developer.mozilla.org/en-US/docs/CSS/border-image-outset](https://developer.mozilla.org/en-US/docs/CSS/border-image-outset)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T03:54:23.377

## 如果其他东西需要伪元素

就个人而言，我喜欢 I29 的`border-image-outset`属性解决方案（尽管在撰写本文时仅在两个浏览器中支持），其次是 Gaby 的伪元素解决方案，因为代码简洁明了。***但是，对于 Gaby's，如果您需要其他的伪元素***，那么您可以使用渐变背景，底部有一个小的透明条和`background-origin: border-box`设置。[**见小提琴**](http://jsfiddle.net/BDbX2/21/)。添加此 CSS（仅在 Firefox 17 和 Chrome 23 中测试）：

```
background: -moz-linear-gradient(top,  rgba(41,154,11,1) 0%, rgba(41,154,11,1) 90%, rgba(41,154,11,0) 91%, rgba(41,154,11,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(41,154,11,1)), color-stop(90%,rgba(41,154,11,1)), color-stop(91%,rgba(41,154,11,0)), color-stop(100%,rgba(41,154,11,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(41,154,11,1) 0%,rgba(41,154,11,1) 90%,rgba(41,154,11,0) 91%,rgba(41,154,11,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(41,154,11,1) 0%,rgba(41,154,11,1) 90%,rgba(41,154,11,0) 91%,rgba(41,154,11,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(41,154,11,1) 0%,rgba(41,154,11,1) 90%,rgba(41,154,11,0) 91%,rgba(41,154,11,0) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(41,154,11,1) 0%,rgba(41,154,11,1) 90%,rgba(41,154,11,0) 91%,rgba(41,154,11,0) 100%); /* W3C */

background-origin: border-box; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T12:23:33.560

在阅读了您的问题并阅读了 css3`border-image`属性后，我没有为 css3 属性找到任何合适的解决方案，所以如果没有人对该`border-image`属性有解决方案，我就创建了一个图像。

我在 h1 标签上添加了以下规则：

```
 h1{
    background: url("http://www.imageurlhost.com/images/ekzlrnp7tsnxx0uner.png") repeat-x scroll 0 47px green;

/* reset css rules are same as provided in question */
    } 
```

**注意：**根据此技术，在将背景颜色从绿色更改为红色或任何其他颜色时，您可能不会遇到任何问题。

以上就是上述问题的解决方案。看我的[小提琴](http://jsfiddle.net/BDbX2/24/)

完整视图：http: [//jsfiddle.net/BDbX2/24/embedded/result/](http://jsfiddle.net/BDbX2/24/embedded/result/)

如果对我有任何建议或想法有任何改进，请告诉我。

可见性的屏幕截图：

![在此处输入图像描述](../Images/06e5f16fdb094fb963ae570ebf2a277c.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:17:06.860

在 h1 标签周围添加 div 并为 div 提供边框。

**HTML**

```
<div> 
 <h1>How to get a border image offset from the edge of the box?</h1>
</div> 
```

**CSS**

```
div{
      border: solid transparent;
        border-width: 0 0 13px;
        border-image:url(..) 1 1 13 1 repeat;
        }
    h1
      {    background-color: green; }​ 
```

**[演示](http://jsfiddle.net/BDbX2/4/)**

* * *

如果您希望在边框图像后面填充绿色，请同时添加`background-color: green;`到 div

**[演示 2](http://jsfiddle.net/BDbX2/5/)**

* * *

如果您需要段落和边框图像之间的空间，然后添加`margin-bottom:8px`到 div 样式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T00:04:04.290

您愿意将边框图像颜色更改为绿色吗？

如果是这样，那么也许`background-clip`你正在寻找什么：[http ://www.css3.info/preview/background-origin-and-background-clip/](http://www.css3.info/preview/background-origin-and-background-clip/)

我在这里更新了你的演示：http: [//jsfiddle.net/BDbX2/9/](http://jsfiddle.net/BDbX2/9/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-09T09:55:35.030

您需要在最后添加`border-image-outset`css样式`h1`（注意它应该在`border-image`条目之后，如下所示：

```
h1
{
background-color: green;
border: solid transparent;
border-width: 0 0 13px;
border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAOCAYAAAArMezNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAQZJREFUeNrc0y1LhEEUBeDnyoIfwSzYBX+CG0Qslm0m3bhd2KBs3CSCmMxbBLGtwSKCoL9C2GYVLDZBvJZRXhZfWZEtHrjMnTNnzszc4UZmmgqK8RW2fpBt4h43aGHuG80ctnGemWYK2cI1LtGsiJuFu8U6HjGPQ7QRJdqFW8AzRGaKiPF6DMrYGeN7mXkEEbGPxcK/ZOZx4fcy87RR8/RODT9fKeFxRKyUfDSuafzxf0Z1azOmhP9v/Dap5rfGyxNolqrGZxNsGOApIg7qBBHRw3u1pWENQ+RYDMvaJ3Zxgm4WoFu4dmbKzK/Oqx68gX7J+7j75nKz2MFqmT/gIjNfI0Jm+hgA74lgEBd+SugAAAAASUVORK5CYII=") 1 1 13 1 repeat;
border-image-outset: 0px 0px 3px 0px; 
}​ 
```

这是 jsFiddle 链接：http: [//jsfiddle.net/rupesh_kokal/BDbX2/37/](http://jsfiddle.net/rupesh_kokal/BDbX2/37/)

有关样式和浏览器支持的更多信息，请参阅： [https ://developer.mozilla.org/en-US/docs/CSS/border-image-outset](https://developer.mozilla.org/en-US/docs/CSS/border-image-outset)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-10T12:42:53.457

我对你的 css 做了一些小改动，它对我来说很好。，下面是代码：

**对于 CSS ：**

```
h1{    
    background-color: green;
    position:relative;
    padding-bottom:7px;
    margin-bottom:6px;
}
h1:after{
    content:'';
    position:absolute;
    left:0;
    right:0;
    bottom:-7px;
    border: solid transparent;
    border-width: 0 0 13px;
    border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAOCAYAAAArMezNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAQZJREFUeNrc0y1LhEEUBeDnyoIfwSzYBX+CG0Qslm0m3bhd2KBs3CSCmMxbBLGtwSKCoL9C2GYVLDZBvJZRXhZfWZEtHrjMnTNnzszc4UZmmgqK8RW2fpBt4h43aGHuG80ctnGemWYK2cI1LtGsiJuFu8U6HjGPQ7QRJdqFW8AzRGaKiPF6DMrYGeN7mXkEEbGPxcK/ZOZx4fcy87RR8/RODT9fKeFxRKyUfDSuafzxf0Z1azOmhP9v/Dap5rfGyxNolqrGZxNsGOApIg7qBBHRw3u1pWENQ+RYDMvaJ3Zxgm4WoFu4dmbKzK/Oqx68gX7J+7j75nKz2MFqmT/gIjNfI0Jm+hgA74lgEBd+SugAAAAASUVORK5CYII=") 1 1 13 1 repeat;
     background-color:rgba(0, 0, 0, -0.2);
    } 
```

**对于 HTML：**

```
<h1>How to get a border image offset from the edge of the box?</h1>

  <p>Bacon ipsum dolor sit amet tenderloin drumstick ribeye filet mignon t-bone beef ribs. Tri-tip venison turkey salami drumstick chicken pastrami. Frankfurter pork jowl ball tip tail.</p> 
```

要查看它的实际效果：http: [//jsfiddle.net/john_rock/BDbX2/38/](http://jsfiddle.net/john_rock/BDbX2/38/)

我认为这可以帮助您解决问题。

# sql - 从分隔符之间的字符串列中将数字提取到表中

> ID：13598765
> 
> 赞同：0
> 
> 时间：2012-11-28T06:00:08.143
> 
> 标签：sql, string, sql-server-2008

我有一张这样的桌子

```
Declare @Temp Table(Data VarChar(20))

Insert Into @Temp Values('F_200_100_')
Insert Into @Temp Values('F_50_')
Insert Into @Temp Values('F_30_')
Insert Into @Temp Values('F_50_10')
Insert Into @Temp Values('F_100_')
Insert Into @Temp Values('F_20_') 
```

我希望我的输出是从数据列中提取的数字的不同值

```
20
30
50
100
200 
```

我尝试过使用 patindex，但我正在寻找尝试过的想法

```
select
Left(
SubString(Data, PatIndex('%[0-9]%', Data), 8000), 
PatIndex('%[^0-9]%', SubString(Data, PatIndex('%[0-9]%', Data), 8000) + 'X')-1
)
from @temp 
```

参考 [http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/extracting-numbers-with-sql-server](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/extracting-numbers-with-sql-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:46:16.977

试试这个：

```
DECLARE @YourTable table (RowID int, Layout varchar(200))
INSERT INTO @YourTable 
select ROW_NUMBER() over (order by (select 0)) as rn,replace(RIGHT(data,len(data)-CHARINDEX('_',data,1)),'_',',') from temptab

;WITH SplitSting AS
(
    SELECT
        RowID,LEFT(Layout,CHARINDEX(',',Layout)-1) AS Part
            ,RIGHT(Layout,LEN(Layout)-CHARINDEX(',',Layout)) AS Remainder
        FROM @YourTable
        WHERE Layout IS NOT NULL AND CHARINDEX(',',Layout)>0
    UNION ALL
    SELECT
        RowID,LEFT(Remainder,CHARINDEX(',',Remainder)-1)
            ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(',',Remainder))
        FROM SplitSting
        WHERE Remainder IS NOT NULL AND CHARINDEX(',',Remainder)>0
    UNION ALL
    SELECT
        RowID,Remainder,null
        FROM SplitSting
        WHERE Remainder IS NOT NULL AND CHARINDEX(',',Remainder)=0
)
SELECT distinct cast(part as int) FROM SplitSting where len(part) > 0  order by cast(part as int) 
```

# haskell - 在抽象语法树 Haskell 中使用 Mod

> ID：13598768
> 
> 赞同：0
> 
> 时间：2012-11-28T06:00:45.537
> 
> 标签：haskell, abstract-syntax-tree

我在 Haskell 中的 Mod 运算符遇到问题，它根据我所拥有的推断错误的类型。Mod在eval的底部。我是 Haskell 的新手，正在用 expr 制作一个 AST 来上课。这是我到目前为止的代码。我确信它是一个简单的修复，但似乎无法得到它。

```
data Expr = Add Expr Expr
      | Sub Expr Expr
      | Mult Expr Expr
      | EqualTo Expr Expr
      | GreaterThan Expr Expr
      | LessThan Expr Expr
      | Mod Expr
      | NotEqual Expr Expr

      | Const Integer
      | VarName String
      | TrueE
      | FalseE
  deriving (Show,Eq) 

eval :: Expr -> [(String, Integer)] -> Integer
eval (Add e1 e2) env = eval e1 env + eval e2 env
eval (Sub e1 e2) env = eval e1 env - eval e2 env
eval (Mult e1 e2) env = eval e1 env * eval e2 env
eval (EqualTo e1 e2) env | eval e1 env == eval e2 env = 1
                     | otherwise = 0 
eval (GreaterThan e1 e2) env | eval e1 env > eval e2 env = 1
             | otherwise = 0    
eval (LessThan e1 e2) env | eval e1 env < eval e2 env = 1
          | otherwise = 0
eval (NotEqual e1 e2) env | eval e1 env /= eval e2 env = 1
                      | otherwise = 0
eval (Mod e1) env =  mod eval e1 env 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:20:03.387

我假设您正在为 AST 构建一个评估器，它代表一个数学表达式。

Haskell 函数[mod](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3amod)接收两个参数，但您的 AST 只接收一个参数，而`mod`您的评估器中的函数接收三个参数。尝试像这样更改函数`eval`和数据`Expr`

```
data Expr =
   | Mod Expr Expr

eval :: Expr -> [(String, Integer)] -> Integer
eval (Mod e1 e2) env = mod (eval e1 env) (eval e2 env) 
```

In the above code, function `mod` receives two arguments, `eval e1 env` and `eval e2 env` respectively.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:17:35.850

我对 mod 使用了错误的符号，它应该是

```
eval e1 env `mod` eval e2 env 
```

愚蠢的错误.. mod 应该被反引号包围。

# sql - 索引提示不起作用

> ID：13598773
> 
> 赞同：0
> 
> 时间：2012-11-28T06:01:39.773
> 
> 标签：sql, oracle, indexing

我正在尝试了解索引提示，但即使在查询中提供提示后它也没有被使用。这是我遵循的步骤，我错过了什么吗？

```
SQL> desc emp_1;
Name     Type         Nullable Default Comments 
-------- ------------ -------- ------- -------- 
EMP_ID   NUMBER                                 
EMP_NAME VARCHAR2(20) Y                         
DEPTNO   NUMBER(10)   Y               

SQL> desc dept
Name      Type         Nullable Default Comments 
--------- ------------ -------- ------- -------- 
DEPT_ID   NUMBER       Y                         
DEPT_NAME VARCHAR2(20) Y                         

SQL> CREATE INDEX abc_idex ON emp_1 (deptno);

Index created

select  /*+ index(emp_1.abc_idex) */ emp_name from emp_1
INNER JOIN dept ON  emp_1.deptno = dept.dept_id 
```

解释计划：-

```
SELECT STATEMENT, GOAL = ALL_ROWS           6   1   28
 HASH JOIN          6   1   28
  TABLE ACCESS FULL EXAMINBI    EMP_1   2   1   25
  TABLE ACCESS FULL EXAMINBI    DEPT    3   4   12 
```

根据 Rene 的回答

```
select  /*+ index(emp_1 abc_idex) */ emp_name from emp_1
INNER JOIN dept ON  emp_1.deptno = dept.dept_id 
```

解释计划

```
SELECT STATEMENT, GOAL = ALL_ROWS           271 100000  800000
 MERGE JOIN         271 100000  800000
  TABLE ACCESS BY INDEX ROWID   EXAMINBI    EMP_1   267 100000  500000
   INDEX FULL SCAN  EXAMINBI    ABC_IDEX    131 100000  
  SORT JOIN         4   4   12
   TABLE ACCESS FULL    EXAMINBI    DEPT    3   4   12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:28:10.927

根据[Tahitis 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF50405)，您不能在*表规范*和*索引规范*`.`之间放置 a 。

# php - Twitter 引导模式显示然后消失

> ID：13598774
> 
> 赞同：0
> 
> 时间：2012-11-28T06:01:40.460
> 
> 标签：php, javascript, twitter-bootstrap, modal-dialog

我经历了所有与 Twitter Bootstrap 模态相关的可能问题，但我的问题在这里有点独特。

我已经包含了来自最新引导程序版本的文件，所以我的公共目录有 -

```
css/
| bootstrap.css
| bootstrap.min.css

js/
| bootstrap.js
| bootstrap.min.js 
```

我也在使用[Select2](http://ivaynberg.github.com/select2/)并且我检查过它不会干扰引导文件。

我的模态是这样定义的 -

```
<div class="modal hide fade" id="modal-<?php echo $user_role->id ?>" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>Update &ldquo;{{ $user_role->role_name }}&rdquo;</h3>
    </div>
    <div class="modal-body">
        <label>New Value</label>
        <input type="hidden" name="inputId" value="<?php echo $user_role->id ?>">
        <input type="text" name="inputUpdate" value="<?php echo $user_role->role_name ?>" autofocus>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
        <a rel="update" href="<?php echo url('admin/dashboard/controls/update_master') ?>" class="btn btn-primary">Update</a>
    </div>
</div> 
```

并调用模态，按钮定义如下 -

```
<a rel="edit" data-toggle="modal" href="#modal-<?php echo $user_role->id ?>" class="btn btn-info">Edit</a> 
```

页面上运行的 JS 是——

```
$(document).ready(function() {
    var urlModal;
    $('a[rel="edit"]').click(function() {
        urlModal = $(this).attr('href');
        $(urlModal).modal();
    });
}); 
```

每当我单击`<a rel="edit">`按钮时，模式就会出现并立即消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:14:10.907

我刚刚发现了问题。

```
$('a[rel="edit"]').click(function() {
    urlModal = $(this).attr('href');
    $(urlModal).modal();
}); 
```

这`$(urlModal).modal();`部分不是必需的。按钮的 HTML 部分中的代码本身会拍摄模态。这个查询正在关闭它。

现在，它的工作。

# c++ - 将原始指针分配给 auto_ptr

> ID：13598779
> 
> 赞同：1
> 
> 时间：2012-11-28T06:02:12.013
> 
> 标签：c++, smart-pointers, auto-ptr

我正在阅读[一篇](http://www.gotw.ca/publications/using_auto_ptr_effectively.htm)关于有效使用`auto_ptr`. 在那里，建议使用以下代码作为正确的代码：

```
// Example 10(c): Correct (finally!)
//
auto_ptr<String> f()
{
  auto_ptr<String> result = new String;
  *result = "some value";
  cout << "some output";
  return result;  // rely on transfer of ownership;
                  // this can't throw
} 
```

但据我所知，赋值运算符 of`auto_ptr`只接受另一个`auto_ptr`作为`rhs`-- 以避免意外误用。那么，下面这行是文章中的错字，还是真的应该起作用？

```
auto_ptr<String> result = new String; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:09:56.607

那条线确实是不正确的，但不是出于您认为的原因。它不调用赋值运算符，而是调用构造函数。当您说`=`第一次声明对象时，它不会创建对象然后调用赋值运算符。相反，它只是调用构造函数并将其作为参数传递。所以从这个角度来看，它是“正确的”，因为它使用的是构造函数，而不是赋值运算符

或者至少如果可以的话。您会注意到[`std::auto_ptr`](http://en.cppreference.com/w/cpp/memory/auto_ptr/auto_ptr)的构造函数带有一个指针。但是，它被标记为`explicit`，这意味着上面的“快捷方式”是不允许的。您必须显式调用构造函数（带括号），并且不能`=`用作这样做的快捷方式。这就是它不正确的原因。相反，如果他们说`auto_ptr<String> result(new String);`，一切都会好起来的。另外，如果没有标记构造函数`explicit`，一切都会好起来的。但事实上，它是不正确的。

# android - Android - 将 C 结构读入 android

> ID：13598780
> 
> 赞同：3
> 
> 时间：2012-11-28T06:02:13.090
> 
> 标签：android, data-structures, struct

我有一个具有 2 个属性的 C 结构，例如内容和 val 如何将其读入 android 文件？android是否支持任何结构？

我的结构就像

```
struct data[] = {
    {"aakash", 2260},
    {"anuj", 1}} 
```

如何在android中读取这样的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:16:11.243

对于 Android 支持 Java 平台。结构不属于Java。您可以通过 Pojo 类实现相同的目标。

```
Public Class MyData {

    private String username;
    private double points;

    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public double getPoints() {
            return points;
    }
    public void setPoints(double points) {
        this.points = points;
    }
    public MyData(String username,double points)
    {
        this.username = username;
        this.points = points; 
    }
}

MyData[] data = new MyData[2];

data[0]= new MyData("aakash", 2260);
data[1]= new MyData("anuj", 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:50:23.080

如果结构像字符串和整数一样简单，并且您真的想使用 C 写入文件，请使用 Java 读取。您可以使用纯文本文件，使用 CSV 格式来存储值。用两种语言读/写都很容易。

您不能将这些对象存储到二进制文件中并让 Java 轻松读取它。虽然，如果文件是使用 Java 创建的，那么它应该很容易。

# php - 使用用户所做的更改制作网站的屏幕截图

> ID：13598782
> 
> 赞同：0
> 
> 时间：2012-11-28T06:02:29.830
> 
> 标签：php, javascript, html, screenshot

*是否可以直接截取用户看到*的网站可见部分的屏幕截图（由浏览器呈现），包括用户所做的任何更改（例如移动的 div、在表单中键入的文本等）？

* * *

因此，您打开一个网站，您可以在其中更改其内容。还有一个按钮（当然在网站上），当您单击它时，网站的实际可见部分以及您所做的所有更改都会保存为图像，例如会出现一个弹出窗口，您可以在其中输入电子邮件将此图像发送到，或类似的东西。Javascript、php、html5 还是其他？旧浏览器和 ie 无关紧要。我已经搜索了很多答案，阅读了很多相关文章，但我找不到解决方案，因为我需要的不是像 html2canvas 那样重新渲染页面的脚本，而是捕获显示的实际内容屏幕。任何想法和意见都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:03:26.363

This is something that can be extremely tricky.

Essentially your only option of doing this *in browser* with no extensions or such is to try rendering HTML into the `<canvas>` tag.

There are several projects which do that, most reliable choices are noted in this SO question's answers: [Render HTML in Canvas/WebGL](https://stackoverflow.com/questions/6335383/render-html-in-canvas-webgl)

Note that none of the projects are 100% accurate, but a canvas can be rendered into an image and thus could be saved or emailed by the user like you asked.

# sap-ase - 在 sybase ASE15 的侧视图定义中使用 @@SPID

> ID：13598784
> 
> 赞同：0
> 
> 时间：2012-11-28T06:02:38.690
> 
> 标签：sap-ase

我无法在视图定义中使用@@spid。sybase 不允许。我怎样才能在视图中实现它？我的要求是：我在生产服务器中已经存在一个名为 MYTABLE 的表。它在 . 因此只有一条记录，因此该表的任何选择查询都会给出相同的输出。现在我想根据 IP 地址创建一个表，对应的值将被定义。并希望删除表 MYTABLE 并创建一个具有相同名称的视图，它将使用 ip 地址根据 ip 地址显示相应的输出。任何人都可以知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:20:04.123

试试这种方式：

```
create view your_view as
select spid from master..sysprocesses
where hostname = 'HOSTNAME' 
```

# .net - 如何在引用另一个资源的 ResourceDictionaries 之间共享资源？

> ID：13598785
> 
> 赞同：0
> 
> 时间：2012-11-28T06:02:42.447
> 
> 标签：.net, wpf, xaml

假设我有多个资源字典，并且某些资源具有对另一个资源字典中资源的 Dynamic/StaticResource 引用，那么它们是否可以相互引用而不必使用 MergedDictionary 来引用另一个字典？

我认为将所有资源字典合并到 Application.Resources 将允许将所有动态/静态资源引用解析到应用程序级别，但这给了我一个异常，即找不到密钥，所以我猜它不会那样工作?

如果这些资源字典依赖于另一个资源，则通过 MergedDictionaries 相互引用，然后我将它们全部合并到 Application.Resources 中，那么我不是将相同资源字典的副本创建为单独的实例并不必要地浪费内存吗？

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:15:24.933

这是缓存 ResourceDictionary 对象的 MergedDictionary 的实现（避免重复问题。）

[http://www.wpftutorial.net/MergedDictionaryPerformance.html](http://www.wpftutorial.net/MergedDictionaryPerformance.html)

# ruby-on-rails - 为什么 Date.today 在数据库中插入以前的日期？

> ID：13598786
> 
> 赞同：2
> 
> 时间：2012-11-28T06:02:47.490
> 
> 标签：ruby-on-rails, ruby

`Date.today`显示正确的日期，但是当我`Date.today`在`Model.create`语句中使用它时，它会在数据库中插入上一个日期，而在数据库`Date.today.to_datetime`中插入正确的日期。

我的问题是为什么`Date.today`在`Model.create`方法中在数据库中插入以前的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:26:34.910

在 Rails 中，在 /config/application.rb 中有一个时区设置：

```
config.time_zone = 'Central Time (US & Canada)' 
```

为了保持一致性，所有时间都以 UTC 格式存储在 Rails 的数据库中。因此，如果您在控制台上尝试：

```
$ rake time:zones:local 
```

您已售出查看所有可用时区。

您可以看到输入的差异：

```
Time.now 
```

和

```
Time.zone.now 
```

我认为 Rails 提供的默认创建和更新时间列在大多数情况下应该没问题。

# sql - 从顶部返回一定数量的结果

> ID：13598789
> 
> 赞同：1
> 
> 时间：2012-11-28T06:03:09.393
> 
> 标签：sql, sql-server

***如何返回一定数量的行，即从 SELECT 查询顶部开始的一定数量的行？***

我的意思是，假设我有一个有 1000 行的表。假设我想要前 50 行，然后我想要第二个 50 行，然后是第三个 50 行，依此类推。我知道 TOP 或 LIMIT 会限制返回的行数，但我不确定如何告诉 SQL 从返回的表中的某个点获取行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:06:31.737

在 Sql server 中，你可以利用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数来做你想做的事情

```
SELECT ROW_NUMBER() OVER(ORDER BY col3 DESC) AS Row, 
    col1, col2, col3
FROM tablename 
```

简而言之

```
WITH ctetable AS
(
    SELECT ROW_NUMBER() OVER(ORDER BY col3 DESC) AS RowNumber , 
        col1, col2, col3
    FROM tablename 
) 
SELECT * 
FROM ctetable 
WHERE RowNumber BETWEEN 1 AND 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:07:11.850

```
SELECT TOP 50 * FROM 
(
    SELECT ROW_NUMBER() OVER(ORDER BY ID DESC) AS [Index], * FROM MyTable
) AS A
WHERE A.[Index] BETWEEN @StartIndex AND @EndIndex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:08:03.017

```
;With CTE as(SELECT ROW_NUMBER() OVER(ORDER BY (select 0)) AS rno, * FROM MyTable)

select * from CTE where rno between start and end; 
```

# javascript - onbeforeprint 和 onafterprint 在 Chrome 和 IE 中不起作用？

> ID：13598790
> 
> 赞同：9
> 
> 时间：2012-11-28T06:03:24.783
> 
> 标签：javascript, html

我在我的项目中使用打印（使用 HTML 和 javascript）。在 mozilla 中，onbeforeprint 和 onafterprint 可以正常工作，但不能在 chrome 中工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-28T20:21:24.850

适用于 Chrome 的是在“窗口”中检查“matchmedia”，如下所示：

```
 if ('matchMedia' in window) {
                    window.matchMedia('print').addListener(function (media) {
                    //do before-printing stuff
                    });
                } else {
                    window.onbeforeprint = function () {
                    //do before-printing stuff
                    }
                } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-19T13:04:53.267

根据他们的变更日志，这适用于 Chrome 63。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-11T10:08:10.643

快速更新，因为对打印事件的支持[改进了很多](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onafterprint#Browser_compatibility)

*   Chrome 63，2017 年 12 月发布，支持它[源](https://www.chromestatus.com/feature/5700595042222080)
*   Opera 50 也是如此
*   Edge 从一开始就支持它
*   甚至 IE 的旧版本 6 (6!!) 也支持它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T16:19:56.987

[Chrome 没有 onbeforeprint。](http://www.w3schools.com/tags/ev_onbeforeprint.asp)

执行此操作的首选方法是使用特定于[打印媒体的样式表](http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml)。

如果您绝对必须[使用 javascript 跨浏览器检测打印操作，](http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/)这看起来很有希望，但我自己还没有尝试过。

**2021 年更新：**它从[chrome 版本 63开始工作](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeprint#browser_compatibility)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-03T22:22:28.917

Chrome 不支持这些事件。相反，它支持' [window.matchMedia](http://www.w3schools.com/jsref/met_win_matchmedia.asp) '。[Chrome](https://bugs.chromium.org/p/chromium/issues/detail?id=571070)中还有一个错误，阻止它打印所有页面。出于这个原因，我建议您在网页中添加一个打印按钮，并要求用户使用该按钮，而不是通过 Chrome 菜单进行打印。

```
var beforePrint = function() {
    console.log("before");
};
var afterPrint = function() {
    console.log("after");
};

var launchedFromMenu = true;
if (window.matchMedia) {
    var mediaQueryList = window.matchMedia('print');
    mediaQueryList.addListener(function(mql) {
        if (mql.matches) {
            if(launchedFromMenu) {
                // https://bugs.chromium.org/p/chromium/issues/detail?id=571070
                alert("There is a bug in Chrome/Opera and printing via the main menu does not work properly. Please use the 'print' icon on the page.");
            }
            beforePrint();
        } else {
            afterPrint();
        }
    });
}

// These are for Firefox
window.onbeforeprint = beforePrint;
window.onafterprint = afterPrint;

function printPage() {
    window["beforePrint"]();
    launchedFromMenu = false;
    window.print();

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-27T06:33:32.997

在 Chrome 中，onbeforeprint 和 onAfterPrint 不起作用。

但是您可以通过使用 css 打印媒体来限制打印页面

例子

`<link rel="stylesheet" href="print.css" type="text/css" media="print" />`

此 css 包含在页面的标题中。

具有以下样式的 css

```
#header, #menu, #entry-content, .noprint {display: none;} 
```

# ruby-on-rails - 设计注册，创建 has_one 记录

> ID：13598791
> 
> 赞同：0
> 
> 时间：2012-11-28T06:03:27.617
> 
> 标签：ruby-on-rails, devise

当用户使用设计注册时，我正在尝试创建提供者记录。我已按照以下方式进行设置： [设计：用户属于组织](https://stackoverflow.com/questions/7987015/devise-user-belongs-to-organization)

但是没有创建提供者。我可能做错了什么？

用户 has_one 提供者。
我修改了我的注册表单：

```
<%= fields_for :provider do |provider_fields| %>
      <%= provider_fields.label :name, :label => 'Company Name' %>
      <%= provider_fields.text_field :name %>
 <% end %> 
```

还有我的模特

```
attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name, :last_name,  :provider_attributes
    belongs_to :provider
     accepts_nested_attributes_for :provider 
```

我可以在 rails 的输出中看到：

```
 "provider"=>{"name"=>"kjhkjh"}, 
```

在我提交表单时的用户属性中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:43:26.303

虽然我看不到完整的用户注册表单来确定您传递给表单构建器的块变量，但我假设它是`|f|`. 如果是这样，您需要`f`在`fields_for`.

```
f.fields_for :provider 
```

这样，您将传递`:provider_attributes`您的参数，而不仅仅是提供者。我看到你已经添加`:provider_attributes`到 attr_accessible （另一个常见的陷阱），所以现在你只需要确定这是你的传递！

来源：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:16:23.967

啊哈！自救。:)

似乎有必要创建提供者模型，如果它为 nil，以便帮助者知道要做什么（或什么）

所以我将它添加到模型中：

```
 def provider
    super || build_provider
  end 
```

[如何让设计与 Accept_nested_attributes_for 在一个有一个关系中工作？](https://stackoverflow.com/questions/5424223/how-to-get-devise-to-work-with-accepts-nested-attributes-for-in-a-has-one-relati)

# html - 对比 搜索引擎优化

> ID：13598797
> 
> 赞同：0
> 
> 时间：2012-11-28T06:04:07.043
> 
> 标签：html, seo

在 SEO 方面，如果我想将相关的页面内容组合在一起以最大限度地提高搜索引擎的可读性，我应该使用标签`<nav>`还是`<article>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:13:45.967

1）它还没有。

2）如果是这样，并且您将菜单包装为`article`，或将附属链接农场包装为`article`，Google 会扇您耳光（请记住三四年后）。

3）如果你有很多合法的内容，并且每条内容都是独立的（即：适合`article`），那么你不仅应该将它包装在`article`标签中，而且你还应该学习如何使用谷歌的“Rich Snippet Tool” ”，最近更名为“结构化数据工具”。

如果您学会了如何以对 html5 友好的方式和对 Google 友好的微格式进行标记，那么 GoogleBot 将抓取它知道的所有内容，并在相关时显示在搜索结果和其他地方.

就像我说的... ...如果您有值得这样做的内容，因为否则，如果您试图将其用于作恶，Google 最终会扇您一巴掌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:35:42.737

**文章标签**：- 该标签允许标记在线出版物中的单独条目，例如博客或杂志。预计当用标签标记文章时，这将使 HTML 代码更干净，因为它会减少使用标签的需要。此外，与页面其他部分的内容相比，搜索引擎可能会更加重视标签内的文本。

**nav tag** :-导航是 SEO 的重要因素之一，所有可以简化导航的东西都是受欢迎的。新标签可用于识别指向其他页面的链接集合。

所以两个标签都有自己的功能，可以根据需要实现。

# android - Android：我可以将纵横比收音机中的视频裁剪为全屏吗？

> ID：13598798
> 
> 赞同：5
> 
> 时间：2012-11-28T06:04:11.503
> 
> 标签：android, video, zooming, crop

我已经学习了如何在[不拉伸视频的情况下调整在此全屏视频视图上播放的视频](https://stackoverflow.com/questions/12211837/full-screen-videoview-without-stretching-the-video)大小。

有了`gameowner`答案，它就起作用了。它还强制保持横向无线电，使其最终在侧面出现黑色条纹。

我想有另一个可选的。那就是我不想在侧面有黑色条纹。我希望视频高度仍保持在屏幕高度。要保持宽高比，视频宽度应大于屏幕宽度。看不到视频的“最左边”和“最右边”也没关系。我想我只需要改变：

```
if (videoProportion > screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
} else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
} 
```

至

```
if (videoProportion < screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
} else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
} 
```

会好的，但我没有。一旦`surfaceView`尺寸大于屏幕。这只是显示黑屏但继续播放音频。

我还尝试将 Surfaceview 支架固定尺寸考虑在内：

```
surfaceViewFrame.getHolder().setFixedSize(lp.width, lp.height); 
```

但这并不能解决问题。是否可以播放尺寸大于屏幕的视频？

**编辑：**好的。我已经意识到我的问题的期限。我想在方面广播中**放大我的视频，但要全屏。**也称为将视频**裁剪**为全屏。

我尝试`TextureView`在`FrameLayout`（必需的）容器内使用： [在 TextureView 上播放视频](https://stackoverflow.com/questions/10736517/playing-video-on-textureview) 我有 Android 4.0 设备在此解决方法中运行良好，但我不确定它是否真的适用于其他 4.0 设备。也`TextureView`仅限于 Android 4.0 或更高版本。如果有适用于 Android 2.x 的解决方法，我将不胜感激。

# html - 如何通过一个查询重定向多个相似的 URL？

> ID：13598802
> 
> 赞同：0
> 
> 时间：2012-11-28T06:04:14.283
> 
> 标签：html, .htaccess, url, redirect

我目前有很多这样的 URL：

[http://www.domain.com/classes-dallas-tx.html](http://www.domain.com/classes-dallas-tx.html)

我需要将所有 URL 更改为以下内容：

[http://www.domain.com/classes-in-dallas-tx.html](http://www.domain.com/classes-in-dallas-tx.html)

我只需要将“in”添加到现在没有它的每个 URL 中。

是否有一个查询可以用于 .htaccess 文件来为我处理所有 URL？我打算使用 301 重定向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:41:22.177

尝试：

```
RedirectMatch 301 ^/([^-]+)-([^-]+)-([^-]{2})\.html$ /$1-in-$2-$3.html 
```

或者

```
RewriteEngine On
RewriteRule ^/?([^-]+)-([^-]+)-([^-]{2})\.html$ /$1-in-$2-$3.html [L,R=301] 
```

在文档根目录的 htaccess 文件中。

# plugins - 我们可以实现浏览器插件来为网站做自动化吗？

> ID：13598805
> 
> 赞同：2
> 
> 时间：2012-11-28T06:04:18.957
> 
> 标签：plugins, browser, air, automation, adobe

我们可以实现浏览器插件来为网站做自动化吗？我想实现一个独立的应用程序，无论是浏览器插件还是桌面应用程序，它可以执行自动化任务，基本上： 1\. 登录到站点 2\. 如果有的话，通过填写表格来浏览页面。（导航对所有人来说都不一样用例） 3\. 执行操作并将文件下载到本地系统。

我们可以将其实现为浏览器插件吗？Pro's & con's 是有帮助的。

我也在看 adobe AIR。请建议。注意：我不希望用户看到浏览器发生了什么。

编辑：我希望这是跨平台的 windows、linux、Mac ......谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:17:59.377

我目前正在使用 Selenium IDE，一个 FireFox 插件。在您深入了解它需要编码的功能（例如 C#、Javam Ruby 等）之前，它是免费且非常易于使用的。

基本功能：1) 记录 2) 回放 3) 断言值 4) 失败时的屏幕截图 5) 设置多个变量作为数据源 6) 导出测试用例或测试套件 7) 是的，它支持用例并且可以下载到回放或作为测试用例导入

注意用户对网页活动的可见性 - 必须为此版本的工具打开浏览器。还有另一个版本可以从能够打开多个浏览器或操作系统的集线器或中央机器自动化，但是，如果您需要更多的记录和回放页面导航，请记住这一点。

硒 IDE：[http ://seleniumhq.org/projects/ide/](http://seleniumhq.org/projects/ide/)

# java - 如何从一个代码库制作多个 Android 应用程序？

> ID：13598811
> 
> 赞同：3
> 
> 时间：2012-11-28T06:04:47.910
> 
> 标签：java, android, eclipse, apk

我已经用 iOS 完美地做到了这一点，现在我需要它用于 Android。我有**一个代码库**，可以通过简单的配置文件更改创建**无限不同的应用程序。**

每个应用程序都是基于我在资源中包含的复杂 XML 配置文件创建的。我所做的只是在我的 strings.xml 文件中进行一个简单的更改，它指向所需的配置文件，这反过来又使我的项目成为一个新的独立应用程序。简单的。

```
<string name="xmlconfig">nike-shoes</string> 
```

但既然我已经这样做了，我该如何进行更改，以便每个应用程序都是它自己的 APK？

如何使用**一个代码库和一个项目**在应用程序（和可上传的 apk）之间轻松切换。我听说有人说“使用一个库，然后为每个包含它的项目创建一个项目”，但是当您拥有 15 个以上的应用程序并不断增长时，这会变得过于复杂。

而且我还看到人们说“为什么不只制作一个应用程序，你可以在应用程序内切换它们”，但这也与我的项目无关，对我的用户没有意义。不幸的是，我无法解释更多，但简短的回答是这也行不通。

我在 iOS 项目中所做的只是更改了 Bundle ID，更改了代码签名标识以匹配，更改应用程序名称，并从我的主 Info.plist 文件中指向新的 plist。砰！全新的应用程序。几个简单的步骤，我不到一分钟。

如何使用 Eclipse/Java/Android 做到这一点？最简单的方法是什么？

几个步骤就可以了，只要我不搞砸每个文件来完成它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T18:38:47.843

我想我会在这里使用 Android Studio（我输入这个时为 2.2.3）回答我自己的问题，执行以下操作：

1.  在您的 AndroidManifest 文件中，单击您的包名称（单击 的`whatever`部分`com.myapp.whatever`），然后按 Shift+F6。选择“重命名包”，然后重命名它（不包括该`com.myapp`部分）。除非需要，否则不要为注释、字符串和文本这样做。您需要使用 Android Studio 窗口底部的按钮来批准重构。

2.  检查您的 build.gradle 文件并确保您在 defaultConfig 下的 applicationId 与您更改的内容相匹配。

3.  在您的 strings.xml 文件中，根据需要更改您的字符串`app_name`和其他字符串，以使您的应用程序拥有自己的应用程序。

我大约需要 1-2 分钟才能拥有一个全新的应用程序。希望其他人觉得这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:14:35.990

您需要做的就是更改清单中的包名称（并且由于基本包名称更改而对您的代码文件进行一些重构），下一个构建将创建一个新的应用程序。如果您想维护所有应用程序，我还建议为每个包含此更改集的应用程序创建一个分支。通过这种方式，您可以修复某些内容并将其推送到所有版本。

假设您将 com.foo 更改为 com.foo.bar，然后重新构建，现在应该添加所有 R 导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-31T08:55:16.857

在库项目中转换您的初始项目，然后从所有其他项目中引用它。这样你就有一个很大的优势：对库项目所做的所有修改都可以在其他项目中使用。参考：http : [//developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

# asp.net - ASP.NET 网站的聊天（如 Facebook）源代码/组件

> ID：13598820
> 
> 赞同：0
> 
> 时间：2012-11-28T06:05:33.480
> 
> 标签：asp.net, chat

我想在我的 ASP.NET 项目中添加聊天功能（如 Facebook 聊天）。所有聊天功能都类似于 FB Chat。例子：

*   闪烁浏览器的标题以在新消息出现时提醒用户
*   重新加载页面时不要关闭
*   ...

我的项目有用户数据库，用户将登录以使用聊天功能。

希望有人告诉我源代码或组件或任何相关信息。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:24:53.260

找到这个：JabbR。[现场直播在这里](http://jabbr.net)，[源代码在这里](https://github.com/davidfowl/JabbR)。试用 Live 站点，如果您喜欢，请从 github 下载源代码。

# git - Git 分支。如何将提交分配给分支？

> ID：13598821
> 
> 赞同：2
> 
> 时间：2012-11-28T06:05:37.557
> 
> 标签：git, branch, commit

我有两个分支。比如说，第一个提交的校验和是 11223344，第二个是 55667788。如何将提交 55667788 分配给第一个分支？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:15:57.080

如果您只是想将提交中的更改应用`55667788`到分支`first`，您可以使用`cherry-pick`.

```
git checkout first
git cherry-pick 55667788 
```

如果您实际上是在导入所有没有（包括）的提交之后`second`，您将合并它。`first``55667788`

```
git checkout first
git merge --no-ff second 
```

论点在`--no-ff`这里很清楚

![替代文字](../Images/9d927ea1790de64060fda4f1149c69c8.png)
^(（来自[nvie.com](http://nvie.com/)，[Vincent Driessen](http://nvie.com/about/)，发表“[**一个成功的 Git 分支模型**](http://nvie.com/posts/a-successful-git-branching-model/)”）)

# javascript - js中的tab切换，哪个更快？

> ID：13598833
> 
> 赞同：1
> 
> 时间：2012-11-28T06:06:28.473
> 
> 标签：javascript, jquery, performance

我总是移动所有兄弟姐妹的“当前”类，然后将“当前”类添加到我点击的类中。我想知道仅删除具有“当前”的“当前”类会更快。似乎是一个简单的问题，但我真的很想知道。

![在此处输入图像描述](../Images/385d7f7e1c9f2f98fe54c1660b149bac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:12:18.480

是的，将查询过滤到较小的元素集会执行得更快，因为要检查的元素更少。

在现代浏览器中，jQuery 将使用原生方法来查询 DOM，因此添加选择器对性能的影响可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:19:48.800

我认为没有太大区别，因为只有一个“电流”。查询多一个或少一个元素并不重要。

通常我会先找出外部元素来缩小范围

```
$('#selectionDiv').find() .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T12:49:22.507

根据您重新分类的元素数量，优化的影响当然会有所不同。

我测试了它，[http://jsperf.com/reclassing-all-or-one](http://jsperf.com/reclassing-all-or-one)，使用 7 个（例如导航选项卡似乎合理）div，我认为差异很大（重新分类比只慢 30%），百分比明智。如果一个人关心实际时间，虽然它可能不关心，但我真的看不出有什么理由不明确。

# backbone.js - 使用backbone.picky检测多选中选项的选择状态

> ID：13598834
> 
> 赞同：1
> 
> 时间：2012-11-28T06:06:28.903
> 
> 标签：backbone.js

我有一个使用 Backbone 渲染的多选下拉菜单。当用户选择或取消选择选项时，我希望这些（取消）选择通过 Backbone 异步保存。

我找到了[Backbone.Picky](https://github.com/derickbailey/backbone.picky)，并认为它可能对我的努力有所帮助，但我似乎无法让它检测选择。

在下面我`FieldView`的`clicked`函数中，`console.log(this.model.selected);`总是将*undefined*写入日志。为什么？

```
 var Field = Backbone.Model.extend({
        initialize: function(){
           var selectable = new Backbone.Picky.Selectable(this);
           _.extend(this, selectable);
        }
    });

    var FieldView = Backbone.View.extend({
        tagName: "option",

        initialize: function(){
            _.bindAll(this, 'render');
        },
        events: {
            "click":"clicked"
        },
        clicked: function(e) {
            var data_type = this.model.get("DATA_TYPE");
            console.log(this.model.selected);    // why is this undefined?
            console.log("it's a " + data_type);
        },
        render: function(){
            this.$el.attr('value', this.model.get('COLUMN_NAME')).html(this.model.get('display_name'));
            return this;
        }
    }); 
```

这是一个 jsfiddle [http://jsfiddle.net/EAZCt/2/](http://jsfiddle.net/EAZCt/2/)以获得更多上下文。

使用 Backbone，如何将选项的选择状态异步保存在多选列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:11:45.123

您的模型对象从来没有“选择”属性，因为您从不选择模型。我从未使用过 Backbone.Picky，但您似乎可以尝试：

```
var FieldView = Backbone.View.extend({
    tagName: "option",

    initialize: function(){
        this.model.on('selected', this.selected, this);
    },
    events: {
        "click":"clicked"
    },

    clicked: function() {
        this.model.select();
    },
    selected: function() {
        var data_type = this.model.get("DATA_TYPE");
        console.log(this.model.selected);
        console.log("it's a " + data_type);
    },
    render: function(){
        this.$el.attr('value', this.model.get('COLUMN_NAME')).html(this.model.get('display_name'));
        return this;
    }
}); 
```

[http://jsfiddle.net/hGEYL/](http://jsfiddle.net/hGEYL/ "小提琴")

# ant - 由于未知选项“-bs”，Ant rpm 构建失败

> ID：13598836
> 
> 赞同：0
> 
> 时间：2012-11-28T06:06:35.797
> 
> 标签：ant, instantiation, rpmbuild, rpm-spec, antbuilder

构建.xml

```
<?xml version="1.0"?>
<project default="main" basedir=".">
<echo message="pulling in property files" />
<property file="axis_bujava.properties" />

<echo message="calling the RPM Build Ant" />
<target name="main">
    <rpm specfile="example.spec" topdir="${basedir}" command="-bs" />
</target>
</project> 
```

例子.spec

```
Summary: xxx

Name: cdplayer

Version: 1.0

Release: 1

Copyright: xxx

Group: Applications/Sound

Source: xxx.tgz

URL: http://xxx.html

Distribution: xxxx

Vendor:xxx.

Packager: xxx

%description
xxxx
%build
make
%install
make install 
```

输出：

```
Buildfile: /home/user1/workspace/antdemo/build.xml
     [echo] pulling in property files

     [echo] calling the RPM Build Ant

main:

      [rpm] Building the RPM based on the example.spec file

      [rpm] -bs: unknown option

      [rpm] 'rpm' failed with exit code 1

BUILD SUCCESSFUL

Total time: 848 milliseconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T16:40:05.753

我也有这个问题。在我的情况下，操作系统没有安装“rpmbuild”命令，所以蚂蚁任务正在调用“rpm”，而不是像 Aaron 建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:40:44.077

虽然我不确定“-bs”选项是什么，但您可以尝试将其更改为“-bb”，这是默认选项。我自己的构建，加上我见过的一些，通常使用 -bb ( [http://richardfriedman.blogspot.com/2007/02/rpm-java-and-frustration.html](http://richardfriedman.blogspot.com/2007/02/rpm-java-and-frustration.html) )

另见： [http ://ant.apache.org/manual/Tasks/rpm.html](http://ant.apache.org/manual/Tasks/rpm.html)

# node.js - Node.js (Express) 表单在提交时清除

> ID：13598837
> 
> 赞同：12
> 
> 时间：2012-11-28T06:06:46.180
> 
> 标签：node.js, validation, express

我正在使用 Node.js（使用 Express）编写一个非常基本的注册表单，并且我正在尝试找到提供基本表单验证的最简单方法。我选择了“Express-Validator”，这似乎做得很好。但是，我的目标是简单地显示所需的任何验证消息，并**保留用户输入的值。**

似乎请求信息没有回到 res.render 中，我想这是有道理的。但是，我到处寻找我能想到的地方，但找不到任何讨论如何在显示错误消息后保持表单字段填充的参考。

下面是一个描述我的方法的小片段：

```
post: function(req, res){

            var userName = req.body.username;
            var password = req.body.password;

            //Validate input
            req.assert("username", 'Invalid email address.').isEmail();
            req.assert("password", 'Password cannot be empty.').notEmpty();
            req.assert("passwordConfirm", 'Passwords entered do not match!').equals(password);

            //Make sure we have no validation errors
            var pageErrors = req.validationErrors();
            if(!pageErrors)
            {
                userModel.CreateUser(userName, password, function(err){
                    if(err)
                    {
                        //there was a problem inserting new user... probably already exists
                        //will need to check the error to confirm
                        var dbErrorMessage = "Could not insert record into database!";
                        if(err.code === 11000)
                        {
                            //this is a duplicate entry
                            dbErrorMessage = "A user with that email address already exists!";
                        }

                        res.render('register.html', { pageErrors: [{msg: dbErrorMessage }]});
                    }
                    else
                    {
                        res.render('register.html', { successMessage: successMessage });
                    }
                });
            }
            else
            {
                res.render('register.html', { pageErrors: pageErrors });
            } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T07:05:55.693

Unfortunately, you have to repopulate the form manually. If you get any page errors, you will pass back the form values to the view.

```
 if(!pageErrors)
        {
            // ...
        }
        else
        {
            res.render('register.html', { 
                pageErrors: pageErrors,
                userName: userName
            });
        } 
```

And in your view, you would do a simple check to see if their are any errors and repopulate accordingly. You would have to keep track of what errors are produced for each form field.

```
<% if (userNameError) { %>
    <input type="text" name="userName" value="<%- userName %>" />
<% } else { %>
    <input type="text" name="userName" />
<% } %> 
```

Another popular way is to send your form via ajax to to the server, and do all your validations. If there is an error, the entered form data remains and you would show the error, otherwise redirect after the successful login. Below is an example of how to submit a form with javascript.

```
$("#login-button").live("submit", function (e) {

    // this will prevent the form from being uploaded to the server the conventioanl way
    e.preventDefault();

    // the form data
    var data = $(this).serialize();

    // this logs the user in 
    $.ajax({
        type: 'POST',
        url: BASE_URL + '/login',
        data: data,
        dataType: 'json',
        success: function (data, status) {
            // successful
        },

    });

    // superfluous fallback
    return false; 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-08T11:19:58.183

There is an easy way is you are using

```
app.use(express.bodyParser()) and app.use(expressValidator()); 
```

You can use req.body

```
res.render('register.html', { 
         pageErrors: pageErrors,
         validated: req.body
   }); 
```

And I'm not sure which templating language you are using but you could do something like..

```
<input type="text" name="userName" value="<%= pageErrors.userName.value || validated.userName %>" /> 
```

This then gives back the good input if ok or the bad input if it needs correcting.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-22T07:06:24.850

You can get this done using `connect-flash`

Below are the code snippets in different files in order to get the values entered by the user back in form when validations fail while doing signup with passport.

Run this below command to add new package into package.json

```
npm install connect-flash --save 
```

**app.js**

```
var flash = require('connect-flash');

app.use(flash()); // add this above passport initialize
app.use(passport.initialize());
app.use(passport.session()); 
```

**config/passport.js** (Please focus on form data loading into flash)

```
passport.use('local.signup', new LocalStrategy({
    usernameField: 'email',
    passwordField: 'password',
    passReqToCallback: true
}, function (req, email, password, done) {
    req.checkBody('first_name', 'Firstname is missing').notEmpty();
    req.checkBody('last_name', 'Lastname is missing').notEmpty();
    req.checkBody('email', 'Invalid email').notEmpty().isEmail();
    req.checkBody('password', 'Password is too short. Minimum size is 6.').notEmpty().isLength({min:6});
    req.checkBody('confirm_password', 'Password and confirm password didn\'t not match').equals(req.body.password);
    var errors = req.validationErrors();
    if (errors) {
            var messages = [];
            errors.forEach(function(error) {
                 messages.push(error.msg);
            });
            req.flash('formdata', req.body); // load form data into flash
            return done(null, false, req.flash('error', messages));
    }
    User.findOne({'email': email}, function (err, user) {
            if (err) {
                    req.flash('formdata', req.body); // load form data into flash
                    return done(err);
            }
            if (user) {
                    req.flash('formdata', req.body); // load form data into flash
                    return done(null, false, {message: 'Email is already in use.'});
            }
            var newUser = new User();
            newUser.first_name = req.body.first_name;
            newUser.last_name = req.body.last_name;
            newUser.email = email;
            newUser.password = newUser.encryptPassword(password);
            newUser.save(function(err, result) {
                 if (err) {
                         return done(err);
                 }
                 return done(null, newUser);
            });
    });
})); 
```

**routes/index.js** (Please focus on form data in flash loaded back into a variable)

```
 router.get('/signup', function (req, res, next) {
    var messages = req.flash('error');
    var formdata = req.flash('formdata'); // Get formdata back into a variable   
    res.render('user/signup', {csrfToken: req.csrfToken(),
        messages: messages, // pass it here to access in view file
        hasErrors: messages.length > 0,
        formData: formdata[0]
    });
});

router.post('/signup', passport.authenticate('local.signup', {
        badRequestMessage: 'Please fill the form with all details',
        failureRedirect: '/user/signup',
        failureFlash: true
    }), function (req, res, next) {
        if (req.session.oldUrl) {
            var oldUrl = req.session.oldUrl;
            req.session.oldUrl = null;
            res.redirect(oldUrl);
        } else {
            res.redirect('/user/profile');
        }
}); 
```

**views/signup.hbs** (Please focus on values in input elements)

```
<form class="wow fadeInUp animated" data-wow-delay=".7s" action="/user/signup" method="post" >
    <input type="text" placeholder="First Name" name="first_name" value="{{ formData.first_name }}">
    <input type="text" placeholder="Last Name" name="last_name" value="{{ formData.last_name }}">
    <input type="text" class="email" placeholder="Email Address" name="email" value="{{ formData.email }}">
    <input type="password" name="password" value="" class="lock" placeholder="Password">
    <input type="password" name="confirm_password" value="" class="lock" placeholder="Confirm Password">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">
    <input type="submit" name="Register" value="Register"></form> 
```

Hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T20:14:10.790

set a variable for all the input, for example

```
var inputData = {
  firstname : req.body.firstname,
  lastname : req.body.lastname,
  email : req.body.email,
  username : req.body.username,
  password : req.body.password,
  password_confirmation : req.body.password_confirmation,
  agreetoterms: req.body.agreetoterms
} 
```

and then pass that variable to the view

```
res.render('register.html', { pageErrors: [{msg: dbErrorMessage }], inputData: inputData }); 
```

then in your view

```
value="<%= inputData.userName %>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-21T01:52:47.547

if you are using jade and form Validator from npm , the best part is that you can an if statement in jade and then you simply check if error then with res.render we send the objects also . See This

```
if(errors){
    res.render('register',{
        errors : errors,
        name : name,
        email : email,
        username : username,
        password : password,
        password2 : password2
    }); 
```

And in jade you do this

```
input.form-control(name='name',type='text',placeholder='Enter Name',value = (errors ? '#{name}':'')) 
```

so if there is errors value will set to variable in name which will rendered when we send back

I think you can also be done in Angular2/Angular.js

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-17T05:41:40.167

Well, there is a simple way to achieve this. Do following in controller:

```
else{
    res.render('register.html', { pageErrors: pageErrors, inputData: req.body});
} 
```

Now, in your ejs (or do it according to your view engine) file do following:

```
<input type="text" name="name" value="<% if(typeof pageErrors !== "undefined"){ %> <%- inputData.name %> <% } %>" class="form-control"> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-28T08:51:44.320

check [http://www.quietless.com/kitchen/building-a-login-system-in-node-js-and-mongodb/](http://www.quietless.com/kitchen/building-a-login-system-in-node-js-and-mongodb/)

on register.html make this

```
 var data = {};
        data.user = $('#user-input').val();
        data.email = $('#email-input').val();
        data.pass = $('#pass-input').val();
    $.ajax({ url: '/signup'
           , type: 'POST'
           , data: JSON.stringify(data)
           , contentType: 'application/json'
           , dataType: 'html'
        })
        .done(function(data) {
            if (data == 'ok') {
                $('#content').html('You are registered!');
            }
            else $('#account-form-container').append('<br>error:' + data);
        }); 
```

there might be error like: CANNOT POST /

in this case the author of tutorial on link above uses lib $.ajaxForm

you can also use [https://github.com/felixge/node-formidable](https://github.com/felixge/node-formidable)

or $('#myform').submit() replace to $('#submit-a-link').click()

# c# - 在相机视图中偏移 3D 对象

> ID：13598840
> 
> 赞同：2
> 
> 时间：2012-11-28T06:06:58.010
> 
> 标签：c#, .net, 3d, xna-4.0

我是新来的。在根据相机的视角渲染模型的最后一点（这是一个词吗？）时，我遇到了一些麻烦。

我已经成功地创建了我的 3D 相机，能够在 3D 空间中旋转它，并移动/旋转我的枪模型以与相机的移动/旋转相对应。

然而，最后一部分，我无法弄清楚。我试图在相机的旋转轴上偏移枪模型的位置，但找不到任何关于如何做到这一点的信息。

这是我到目前为止的代码，没有我想要的偏移量。

```
GunWorldMatrix = Matrix.CreateScale(0.5f) * 
    CameraRotation * 
    Matrix.CreateTranslation(CameraPosition); 
```

可以这么说，它最终将枪“放在我的头上”。完美地定位和旋转模型，但我不知道如何根据它自己的轴或相机的轴添加任何偏移量。（因此您可以将其置于臀部射击位置等）

虽然，这；

```
Matrix view = Matrix.CreateLookAt(new Vector3(0, 2, 0), new Vector3(0, 0, 0), Vector3.UnitY); 
```

作为观点，有了这个；

```
GunWorldMatrix = Matrix.CreateScale(0.5f) *
    Matrix.CreateRotationX(-0.15f) *
    Matrix.CreateTranslation(new Vector3(0.2f, 1.65f, 0f)); 
```

因为如果 Guns World Matrix 被冻结在没有旋转的轴上，它就会完美定位……这可能有帮助，也可能没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:39:01.630

viewMatrix（对相机建模），由三个正交向量组成：
X=[xx,xy,xz], Y=[yx,yy,yz], Z=[zx,zy,zz] 加上相机位置 T=[tx ,ty,tz]

```
[xx yx zx   tx]   --> order is [0 4      ]             [ 0 1  2 ]
[xy yy zy   ty]                [1 5      ]  -> R^-1 =  [ 4 5  6 ]
[xz yz zz   tz]                [2 ...    ]             [ 8 9 10 ]
[0  0  0     1]                [3      15] 
```

这里通常 Y 向量代表*Up*， X 是*正确的*， Z 是要查看的位置 - 所有*都归*一化为长度 1。

您只需要关心左上角的 3x3 旋转矩阵，它是逆 R^-1，对于归一化的旋转矩阵，它通常是转置：R^-1 = R'。

要在“屏幕”右侧移动某些东西，您将添加到 object.t_vector += camera^(-1).x_vector。这也可以通过距离、FoV 和纵横比进行缩放，以将对象恰好向右移动 1 个像素或与屏幕尺寸成比例。

注意：这是视图矩阵的 openGL 约定，其中向量是*列向量*，矩阵按列-行顺序排列。其他系统可以按行列顺序表示或存储矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:07:18.463

感谢另一个论坛上的一个人，他想出了这个；

```
float verticalOffset = 1.65f;  
float longitudinalOffset = 0f;  
float lateralOffset = .2f;  

GunWorldMatrix = Matrix.Invert(view); // GunWorldMatrix is now a world space version of the camera's Matrix with position & orientation of the camera  
Vector3 camPosition = GunWorldMatrix.Translation;// note position of camera so when setting gun position, we have a starting point.  

GunWorldMatrix *= Matrix.CreateFromAxisAngle(GunWorldMatrix.Up, 0.15f); // gives the gun that slight angle to point towards target while laterally offset a bit  

Vector3 gunPositionOffsets = (GunWorldMatrix.Up * verticalOffset) +  
                                (GunWorldMatrix.Forward * longitudinalOffset) +  
                                (GunWorldMatrix.Right * lateralOffset);  

GunWorldMatrix.Translation = camPosition + gunPositionOffsets; 
```

这给了我我的答案。不过，谢谢你的回答，Aki。它使我走上了正确的道路。

# python - 解析以下统一数据

> ID：13598842
> 
> 赞同：0
> 
> 时间：2012-11-28T06:07:04.610
> 
> 标签：python, parsing

我正在尝试编写一个采用以下类型信息的 python 脚本：

[http://ucolick.org/calendar/keckcal2009-20/keck2012.12dec](http://ucolick.org/calendar/keckcal2009-20/keck2012.12dec)

和

[http://ucolick.org/calendar/keckcal2009-20/keck2012.18dec](http://ucolick.org/calendar/keckcal2009-20/keck2012.18dec)（完整数据转载如下）。如您所见，它是机器生成的（两个文件包含略有不同的数据）。此外，几列除了空白之外什么都没有。

我最终想要的是像字典一样的东西

```
astro_times_dict['DEC 01']['TWILIGHT ENDS']['12'] = '18:33'
astro_times_dict['DEC 01']['TWILIGHT ENDS']['18'] = '19:00' 
```

但是我不确定是否有一些不是手动的明确方法。我开始了：

```
for line in open('keck2012.12dec.txt').readlines():
    if len(line.split()) > 15:
        print line, 
```

它将仅打印数据部分，但**我不清楚如何处理（有时）丢失的数据。**

* * *

以下是其中一个链接文件的完整内容：

```
 KECK OBSERVATORY CALENDAR FOR 2012  -ASTRONOMICAL
                                 (computed for altitude 4160.0 m)
                                                                    ASTRONOMICAL(18 deg)  TWILIGHT/DAWN   MOON(midnight)
  DATE(HST)   SUN   TWILIGHT ENDS  MOON   MOON   DAWN BEGINS   SUN     SIDEREAL TIMES     NIGHT (18 deg)          Zenith
    2012      SET                  RISE   SET                  RISE   TWI    MID   DAWN   LENGTH DARK___    RA  DEC Dist
                      12     18                   18     12            18            18      h    h    %   h m  d m  deg
 SAT DEC 01  17 53  18 33  19 00  20 23         05 23  05 50  06 30  23 24  04 25  09 49   10.4  1.4  13  0735 1712   45
 SUN DEC 02  17 53  18 33  19 00  21 15         05 24  05 51  06 31  23 28  04 29  09 54   10.4  2.2  21  0824 1416   56
 MON DEC 03  17 53  18 33  19 00  22 06         05 24  05 51  06 32  23 32  04 33  09 57   10.4  3.1  29  0912 1041   68
 TUE DEC 04  17 53  18 33  19 00  22 59         05 25  05 52  06 32  23 36  04 37  10 02   10.4  4.0  38  1000 0633   79
 WED DEC 05  17 53  18 34  19 01  23 51         05 25  05 52  06 33  23 41  04 40  10 06   10.4  4.8  46  1045 0145  >90
 THU DEC 06  17 53  18 34  19 01  00 46         05 26  05 53  06 33  23 45  04 44  10 11   10.4  5.8  55  1138-0237  >90
 FRI DEC 07  17 54  18 34  19 01  01 42         05 27  05 54  06 34  23 49  04 48  10 16   10.4  6.7  64  1229-0719  >90
 SAT DEC 08  17 54  18 34  19 01  02 42  14 02  05 27  05 54  06 35  23 52  04 52  10 20   10.4  7.7  73  1323-1146  >90
 SUN DEC 09  17 54  18 35  19 02  03 44  14 49  05 28  05 55  06 35  23 57  04 56  10 25   10.4  8.7  83  1420-1541  >90
 MON DEC 10  17 55  18 35  19 02  04 49  15 41  05 28  05 55  06 36  00 01  05 00  10 29   10.4  9.8  93  1520-1842  >90
 TUE DEC 11  17 55  18 35  19 03  05 55  16 39  05 29  05 56  06 36  00 06  05 04  10 34   10.4 10.4 100  1624-2030  >90
 WED DEC 12  17 55  18 36  19 03  06 59  17 42  05 29  05 56  06 37  00 10  05 08  10 38   10.4 10.4 100  1728-2052  >90
 THU DEC 13  17 56  18 36  19 03         18 47  05 30  05 57  06 38  00 14  05 12  10 43   10.5 10.5 100  1831-1945  >90
 FRI DEC 14  17 56  18 37  19 04         19 52  05 30  05 58  06 38  00 19  05 16  10 47   10.4  9.6  92  1933-1718  >90
 SAT DEC 15  17 56  18 37  19 04         20 55  05 31  05 58  06 39  00 23  05 20  10 52   10.4  8.6  82  2031-1349  >90
 SUN DEC 16  17 57  18 37  19 05         21 56  05 32  05 59  06 39  00 28  05 24  10 57   10.4  7.6  72  2125-0938  >90
 MON DEC 17  17 57  18 38  19 05         22 52  05 32  05 59  06 40  00 32  05 28  11 01   10.4  6.7  63  2217-0506  >90
 TUE DEC 18  17 58  18 38  19 05         23 47  05 33  06 00  06 40  00 36  05 32  11 06   10.5  5.8  55  2306-0028  >90
 WED DEC 19  17 58  18 39  19 06         00 39  05 33  06 00  06 41  00 41  05 36  11 10   10.4  4.9  46  2355 0401   84
 THU DEC 20  17 59  18 39  19 06         01 30  05 34  06 01  06 41  00 45  05 40  11 14   10.5  4.1  38  0041 0818   73
 FRI DEC 21  17 59  18 40  19 07         02 21  05 34  06 01  06 42  00 50  05 44  11 18   10.4  3.2  30  0129 1209   61
 SAT DEC 22  18 00  18 40  19 07         03 11  05 35  06 02  06 42  00 54  05 47  11 23   10.5  2.4  22  0216 1527   50
 SUN DEC 23  18 00  18 41  19 08  14 22  04 02  05 35  06 02  06 43  00 59  05 51  11 27   10.5  1.6  14  0305 1804   39
 MON DEC 24  18 01  18 41  19 08  15 05  04 52  05 36  06 03  06 43  01 03  05 55  11 32   10.5  0.7   7  0355 1954   28
 TUE DEC 25  18 01  18 42  19 09  15 50  05 41  05 36  06 03  06 44  01 07  05 59  11 36   10.5  0.0   0  0447 2050   17
 WED DEC 26  18 02  18 42  19 10  16 38  06 29  05 36  06 04  06 44  01 12  06 03  11 40   10.4  0.0   0  0538 2049   06
 THU DEC 27  18 02  18 43  19 10  17 28         05 37  06 04  06 44  01 16  06 07  11 45   10.5  0.0   0  0630 1950   05
 FRI DEC 28  18 03  18 44  19 11  18 19         05 37  06 04  06 45  01 21  06 11  11 49   10.4  0.0   0  0721 1757   17
 SAT DEC 29  18 04  18 44  19 11  19 11         05 38  06 05  06 45  01 25  06 15  11 54   10.5  0.0   0  0811 1513   28
 SUN DEC 30  18 04  18 45  19 12  20 03         05 38  06 05  06 46  01 30  06 19  11 58   10.4  0.8   8  0900 1147   40
 MON DEC 31  18 05  18 45  19 12  20 55         05 38  06 06  06 46  01 34  06 23  12 02   10.4  1.7  16  0949 0746   51

          ONE LINE REFERS TO EVENING DATE       LAST QUARTER   Dec 06   15:32 UT
          AND FOLLOWING MORNING.                NEW MOON       Dec 13   08:41 UT
          All dates and times are zone HST      FIRST QUARTER  Dec 20   05:17 UT
          in upper table (except sid time).     FULL MOON      Dec 28   10:22 UT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:47:31.893

这是我到目前为止所拥有的（基于迄今为止的评论）。

```
for line in open(filename).readlines():
    if len(line.split()) > 15:
        print line.strip().replace('      ', '  ').split('  ') 
```

哪个输出：

```
['SAT DEC 01', '17 53', '18 33', '19 00', '20 23', '', ' 05 23', '05 50', '06 30', '22 57', '04 25', '10 16', ' 11.3', '1.8', '16', '0735 1712', ' 45']
['SUN DEC 02', '17 53', '18 33', '19 00', '21 15', '', ' 05 24', '05 51', '06 31', '23 01', '04 29', '10 21', ' 11.3', '2.7', '23', '0824 1416', ' 56']
['MON DEC 03', '17 53', '18 33', '19 00', '22 06', '', ' 05 24', '05 51', '06 32', '23 05', '04 33', '10 25', ' 11.3', '3.6', '31', '0912 1041', ' 68']
['TUE DEC 04', '17 53', '18 33', '19 00', '22 59', '', ' 05 25', '05 52', '06 32', '23 09', '04 37', '10 29', ' 11.3', '4.4', '39', '1000 0633', ' 79']
['WED DEC 05', '17 53', '18 34', '19 01', '23 51', '', ' 05 25', '05 52', '06 33', '23 14', '04 40', '10 33', ' 11.3', '5.3', '46', '1045 0145', '>90']
['THU DEC 06', '17 53', '18 34', '19 01', '00 46', '', ' 05 26', '05 53', '06 33', '23 17', '04 44', '10 38', ' 11.3', '6.2', '54', '1138-0237', '>90']
['FRI DEC 07', '17 54', '18 34', '19 01', '01 42', '', ' 05 27', '05 54', '06 34', '23 21', '04 48', '10 43', ' 11.3', '7.1', '62', '1229-0719', '>90']
['SAT DEC 08', '17 54', '18 34', '19 01', '02 42', '14 02', '05 27', '05 54', '06 35', '23 25', '04 52', '10 47', ' 11.3', '8.1', '71', '1323-1146', '>90']
['SUN DEC 09', '17 54', '18 35', '19 02', '03 44', '14 49', '05 28', '05 55', '06 35', '23 30', '04 56', '10 52', ' 11.3', '9.1', '80', '1420-1541', '>90']
['MON DEC 10', '17 55', '18 35', '19 02', '04 49', '15 41', '05 28', '05 55', '06 36', '23 34', '05 00', '10 56', ' 11.3 10.2', '90', '1520-1842', '>90']
['TUE DEC 11', '17 55', '18 35', '19 03', '05 55', '16 39', '05 29', '05 56', '06 36', '23 38', '05 04', '11 01', ' 11.3 11.3', '99', '1624-2030', '>90']
['WED DEC 12', '17 55', '18 36', '19 03', '06 59', '17 42', '05 29', '05 56', '06 37', '23 43', '05 08', '11 05', ' 11.3 11.3 100', '1728-2052', '>90']
['THU DEC 13', '17 56', '18 36', '19 03', '', ' 18 47', '05 30', '05 57', '06 38', '23 47', '05 12', '11 10', ' 11.3 11.2', '98', '1831-1945', '>90']
['FRI DEC 14', '17 56', '18 37', '19 04', '', ' 19 52', '05 30', '05 58', '06 38', '23 52', '05 16', '11 15', ' 11.3 10.1', '88', '1933-1718', '>90']
['SAT DEC 15', '17 56', '18 37', '19 04', '', ' 20 55', '05 31', '05 58', '06 39', '23 56', '05 20', '11 19', ' 11.3', '9.1', '79', '2031-1349', '>90']
['SUN DEC 16', '17 57', '18 37', '19 05', '', ' 21 56', '05 32', '05 59', '06 39', '00 00', '05 24', '11 24', ' 11.4', '8.1', '70', '2125-0938', '>90']
['MON DEC 17', '17 57', '18 38', '19 05', '', ' 22 52', '05 32', '05 59', '06 40', '00 05', '05 28', '11 28', ' 11.4', '7.1', '62', '2217-0506', '>90']
['TUE DEC 18', '17 58', '18 38', '19 05', '', ' 23 47', '05 33', '06 00', '06 40', '00 09', '05 32', '11 33', ' 11.4', '6.2', '54', '2306-0028', '>90']
['WED DEC 19', '17 58', '18 39', '19 06', '', ' 00 39', '05 33', '06 00', '06 41', '00 14', '05 36', '11 37', ' 11.4', '5.4', '47', '2355 0401', ' 84']
['THU DEC 20', '17 59', '18 39', '19 06', '', ' 01 30', '05 34', '06 01', '06 41', '00 18', '05 40', '11 42', ' 11.4', '4.5', '39', '0041 0818', ' 73']
['FRI DEC 21', '17 59', '18 40', '19 07', '', ' 02 21', '05 34', '06 01', '06 42', '00 23', '05 44', '11 46', ' 11.4', '3.7', '32', '0129 1209', ' 61']
['SAT DEC 22', '18 00', '18 40', '19 07', '', ' 03 11', '05 35', '06 02', '06 42', '00 27', '05 47', '11 50', ' 11.4', '2.8', '25', '0216 1527', ' 50']
['SUN DEC 23', '18 00', '18 41', '19 08', '14 22', '04 02', '05 35', '06 02', '06 43', '00 32', '05 51', '11 54', ' 11.4', '2.0', '17', '0305 1804', ' 39']
['MON DEC 24', '18 01', '18 41', '19 08', '15 05', '04 52', '05 36', '06 03', '06 43', '00 35', '05 55', '11 59', ' 11.4', '1.2', '10', '0355 1954', ' 28']
['TUE DEC 25', '18 01', '18 42', '19 09', '15 50', '05 41', '05 36', '06 03', '06 44', '00 40', '05 59', '12 03', ' 11.3', '0.4', ' 3', '0447 2050', ' 17']
['WED DEC 26', '18 02', '18 42', '19 10', '16 38', '06 29', '05 36', '06 04', '06 44', '00 44', '06 03', '12 08', ' 11.4', '0.0', ' 0', '0538 2049', ' 06']
['THU DEC 27', '18 02', '18 43', '19 10', '17 28', '', ' 05 37', '06 04', '06 44', '00 49', '06 07', '12 12', ' 11.3', '0.0', ' 0', '0630 1950', ' 05']
['FRI DEC 28', '18 03', '18 44', '19 11', '18 19', '', ' 05 37', '06 04', '06 45', '00 54', '06 11', '12 16', ' 11.3', '0.0', ' 0', '0721 1757', ' 17']
['SAT DEC 29', '18 04', '18 44', '19 11', '19 11', '', ' 05 38', '06 05', '06 45', '00 58', '06 15', '12 21', ' 11.3', '0.4', ' 3', '0811 1513', ' 28']
['SUN DEC 30', '18 04', '18 45', '19 12', '20 03', '', ' 05 38', '06 05', '06 46', '01 03', '06 19', '12 25', ' 11.3', '1.3', '11', '0900 1147', ' 40']
['MON DEC 31', '18 05', '18 45', '19 12', '20 55', '', ' 05 38', '06 06', '06 46', '01 07', '06 23', '12 30', ' 11.3', '2.2', '19', '0949 0746', ' 51'] 
```

而且我认为正确识别了没有数据的列；并将剩余的列“放在一起”，以便从这里可以轻松解析。如果其他人发现有问题或做这些事情的更好方法，我会暂时保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:12:20.047

[该`struct`模块](http://docs.python.org/2/library/struct.html)可用于解析固定宽度的数据：

```
import struct

line = ' SAT DEC 01  17 53  18 33  19 00  20 23         05 23  05 50  06 30  23 24  04 25  09 49   10.4  1.4  13  0735 1712   45'
cols = [s.strip() for s in struct.unpack('5s8s' + 11 * '7s' + '5s5s4s11s5s', line)]
# ['SAT', 'DEC 01', '17 53', '18 33', '19 00', '20 23', '', '05 23', '05 50', '06 30', '23 24', '04 25', '09 49', '10.4', '1.4', '13', '0735 1712', '45'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:05:10.600

这是一个pyparsing解决方案：

```
data = """\
                                KECK OBSERVATORY CALENDAR FOR 2012  -ASTRONOMICAL
                                 (computed for altitude 4160.0 m)
                                                                    ASTRONOMICAL(18 deg)  TWILIGHT/DAWN   MOON(midnight)
  DATE(HST)   SUN   TWILIGHT ENDS  MOON   MOON   DAWN BEGINS   SUN     SIDEREAL TIMES     NIGHT (18 deg)          Zenith
    2012      SET                  RISE   SET                  RISE   TWI    MID   DAWN   LENGTH DARK___    RA  DEC Dist
                      12     18                   18     12            18            18      h    h    %   h m  d m  deg
 SAT DEC 01  17 53  18 33  19 00  20 23         05 23  05 50  06 30  23 24  04 25  09 49   10.4  1.4  13  0735 1712   45
 SUN DEC 02  17 53  18 33  19 00  21 15         05 24  05 51  06 31  23 28  04 29  09 54   10.4  2.2  21  0824 1416   56
 MON DEC 03  17 53  18 33  19 00  22 06         05 24  05 51  06 32  23 32  04 33  09 57   10.4  3.1  29  0912 1041   68
 TUE DEC 04  17 53  18 33  19 00  22 59         05 25  05 52  06 32  23 36  04 37  10 02   10.4  4.0  38  1000 0633   79
 WED DEC 05  17 53  18 34  19 01  23 51         05 25  05 52  06 33  23 41  04 40  10 06   10.4  4.8  46  1045 0145  >90
 THU DEC 06  17 53  18 34  19 01  00 46         05 26  05 53  06 33  23 45  04 44  10 11   10.4  5.8  55  1138-0237  >90
 FRI DEC 07  17 54  18 34  19 01  01 42         05 27  05 54  06 34  23 49  04 48  10 16   10.4  6.7  64  1229-0719  >90
 SAT DEC 08  17 54  18 34  19 01  02 42  14 02  05 27  05 54  06 35  23 52  04 52  10 20   10.4  7.7  73  1323-1146  >90
 SUN DEC 09  17 54  18 35  19 02  03 44  14 49  05 28  05 55  06 35  23 57  04 56  10 25   10.4  8.7  83  1420-1541  >90
 MON DEC 10  17 55  18 35  19 02  04 49  15 41  05 28  05 55  06 36  00 01  05 00  10 29   10.4  9.8  93  1520-1842  >90
 TUE DEC 11  17 55  18 35  19 03  05 55  16 39  05 29  05 56  06 36  00 06  05 04  10 34   10.4 10.4 100  1624-2030  >90
 WED DEC 12  17 55  18 36  19 03  06 59  17 42  05 29  05 56  06 37  00 10  05 08  10 38   10.4 10.4 100  1728-2052  >90
 THU DEC 13  17 56  18 36  19 03         18 47  05 30  05 57  06 38  00 14  05 12  10 43   10.5 10.5 100  1831-1945  >90
 FRI DEC 14  17 56  18 37  19 04         19 52  05 30  05 58  06 38  00 19  05 16  10 47   10.4  9.6  92  1933-1718  >90
""".splitlines()

from pyparsing import *

weekday = oneOf("SUN MON TUE WED THU FRI SAT")
month = oneOf("JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC")
integer = Word(nums)
real = Regex(r'\d+\.\d*')
time = Regex(r'\d\d \d\d').leaveWhitespace()
time.setParseAction(lambda t: ':'.join(t[0].split()))
spacer = White(' ', exact=2).suppress()
blankTime = White(' ', exact=5)
blankTime.setParseAction(replaceWith(None))

dataParser = (weekday("weekday") + month("month") + integer("mday") + spacer + 
                (((time|blankTime) + spacer).leaveWhitespace()*11)('times') + 
                real('twi_len') + real('dawn_len') + integer('twi_pct') + 
                restOfLine)

fields = """sunset twilight ends moonrise moonset dawn 
            begins sunrise astro_twi astro_mid astro_dawn""".split()

def labelTimes(tokens):
    """parse-time transform to add results names for each time field"""
    for fname, value in zip(fields, tokens.times):
        # assign results name for each field
        tokens[fname] = value
    # no longer need this name, delete it
    del tokens['times']

dataParser.setParseAction(labelTimes)

for line in data[6:]:
    print (line)
    vals = dataParser.parseString(line)
    # uncomment this line to see all field names
    # print vals.dump()
    print vals.moonrise, vals.moonset
    print 
```

印刷：

```
 SAT DEC 01  17 53  18 33  19 00  20 23         05 23  05 50  06 30  23 24  04 25  09 49   10.4  1.4  13  0735 1712   45
20:23 None

 SUN DEC 02  17 53  18 33  19 00  21 15         05 24  05 51  06 31  23 28  04 29  09 54   10.4  2.2  21  0824 1416   56
21:15 None

 MON DEC 03  17 53  18 33  19 00  22 06         05 24  05 51  06 32  23 32  04 33  09 57   10.4  3.1  29  0912 1041   68
22:06 None

 TUE DEC 04  17 53  18 33  19 00  22 59         05 25  05 52  06 32  23 36  04 37  10 02   10.4  4.0  38  1000 0633   79
22:59 None

etc. 
```

Pyparsing 返回一个 ParseResults 数据结构，它可以用作简单的列表，或者用作带有键的字典或带有属性的对象（如果为任何解析器元素提供名称）。在示例代码中，我展示了如何使用字段名称来访问月出和月落的解析数据值。取消注释对 vals.dump() 的调用以查看每行的所有有效字段名称和值。

Pyparsing 的默认行为是在匹配解析器的元素时隐式跳过空格，因此我们必须通过调用`leaveWhitespace`解析器的选定部分来禁用它。在您给定的数据集中，看起来月出和月落时间是唯一可能为空白的时间，但此解析器将检测任何丢失的时间，并将其报告为无。（我不确定最右边的字段需要什么，留作 OP 的练习。）

# c# - 基本 Windows Phone 8 相机应用程序中的 InvalidOperationException

> ID：13598854
> 
> 赞同：0
> 
> 时间：2012-11-28T06:08:22.347
> 
> 标签：c#, .net, windows-phone-8

我从 Windows Phone 开发中心下载了这个[基本的相机示例代码。](http://code.msdn.microsoft.com/wpapps/Basic-Camera-Sample-52dae359)然后，在那个项目中，我在方法的顶部添加了这些行`void cam_CaptureImageAvailable(Object sender, Microsoft.Devices.ContentReadyEventArgs e)`。这里的变量 cam 是 PhotoCamera 类型。

```
Size camRes = cam.PreviewResolution;
int[] imgdata = new int[(int)((camRes.Height*camRes.Width)+1)];
cam.GetPreviewBufferArgb32(imgdata);
//Code to perform manipulations on the frame follows 
```

我在`cam.GetPreviewBufferArgb32(imgdata);`. msdn 上的[相关故障排除异常页面](http://msdn.microsoft.com/en-US/library/fd85b3df%28v=vs.80%29.aspx)说

> 如果调用方法失败是由无效参数以外的原因引起的，则会引发 InvalidOperationException 异常。当无法调用基础 Win32 方法时，.NET Framework 方法可能会引发此问题。

该故障排除页面上还提到，图形对象无法从声明它们的外部线程访问。但是，这是一个基本应用程序，在一个线程上运行。

我完全是在 Windows Phone 上开发应用程序的初学者，无法弄清楚这个异常的原因。请就异常原因提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:50:14.207

可以通过生成另一个获取预览帧的线程来解决，如[本示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202982%28v=vs.105%29.aspx)中所示。

# java - 在 java“通用类”中调用 log4j 记录器

> ID：13598856
> 
> 赞同：0
> 
> 时间：2012-11-28T06:08:37.167
> 
> 标签：java, generics, log4j

尝试将 log4j 记录器添加到 Generic 类时，它不会生成日志。这是使用的代码。

```
public class GenericClass<K extends Serializable, V extends Serializable> extends ... {
      public static Logger log = Logger.getLogger(GenericClass.class.getName()); 
```

我猜这个代码失败的原因是因为该类直到运行时才被实例化，并且我不再给出的纯名称解析为新生成的类。

有没有办法可以记录泛型类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:15:23.473

泛型与此无关。

在运行时，一个名为`x.y.z.GenericClass`(`x.y.z`是所在的包`GenericClass`) 的记录器。如果没有记录任何内容，则可能是因为您的应用程序没有记录任何内容，或者您​​的 Log4J 配置有问题。

要确定哪一个是正确的，请添加`-Dlog4j.debug=true`到您的服务器初始化参数并尝试一下。

# macos - 将经典 ASP 项目转换为另一种语言，以便我可以在 Mac 上开发

> ID：13598857
> 
> 赞同：1
> 
> 时间：2012-11-28T06:08:38.557
> 
> 标签：macos, asp-classic, web.py, scripting-language

我有一个 ASP 网站，我想将它转换为可以在我的 Mac 上托管的语言（我还没有找到托管 Classic ASP 的实用方法）。该站点连接到 MySQL 数据库以提取在仪表板中使用 Google 图表表示的数据。

我没有许多其他脚本语言的经验，但愿意学习。似乎*Web.py*是最简单的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:45:48.550

我知道这是一个迟到的答案，但这引起了我的注意。去年，我将一个非常复杂的应用程序从 ASP.NET 转移到使用 Mono 框架在 unix 上运行。

我发现 Mono 和 MonoDevelop 编辑器是可靠的工具，并且在 linux 和 osx 上本地运行我的代码没有问题。

现在你在谈论经典的 ASP。Mono 确实内置了开源“xsp”和“xsp2”网络服务器……我相信 xsp 可以处理经典的 ASP。

使用 Mono 为我们赢得了 12 周的时间，我需要深入了解并使用 web.py 将整个应用程序转换为 Python。我同意这是一个很棒的框架，特别是如果您想要大量控制并且不受 Django 等基于模板的系统的约束。

关于 Stare 的评论……如果您进行虚拟化，我强烈推荐 VirtualBox。Parallels 已经烧毁了他们与我的所有桥梁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:15:05.340

我建议您在 Mac 上使用虚拟化软件来运行 IIS（如 VMware Fusion 或 Parallels）。您可以轻松地在您的 MAC 上开发 ASP。

这就是我正在做的事情（甚至是带有 Visual Studio 的 .NET），这是有史以来最好的投资！

# extjs4 - Extjs 4.1 如何从表单字段调用控制器方法

> ID：13598863
> 
> 赞同：5
> 
> 时间：2012-11-28T06:08:49.070
> 
> 标签：extjs4

我正在使用 Extjs 4.1。

如何通过按钮单击操作从已经使用此方法的表单中调用控制器方法？我希望这个方法可以从表单字段中重用，但我不知道该怎么做。

// 这是我的控制器代码

```
 init: function() {
    this.control({            
        'salewindow button[action=resetAll]': {
            click: this.resertform
        }
    });
},

resertform : function(button){       
    var store = Ext.data.StoreManager.get('Items');
    store.destroy();
    var vatstore = Ext.data.StoreManager.get('Vats');
    vatstore.reload();            
} 
```

//这是我的字段监听器

```
{
    xtype         : 'textfield',
    name          : 'BranchId',
    fieldLabel    : 'Branch Id',
    allowNegative : false,
    id            : 'branchid',
    value         : '1',                
    onBlur        : function(){                                        
        restoreItem();// I want to call above controller method from here
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:14:43.770

只需触发事件，例如：

```
 {
        xtype         : 'textfield',
        name          : 'BranchId',
        fieldLabel    : 'Branch Id',
        allowNegative : false,
        id            : 'branchid',
        value         : '1',                
        onBlur: function(){                                        
            this.up().down('button[action=resetAll]').fireEvent('click');
        } 
    } 
```

例如，作为方法 up 参数，您可以使用“窗口”。

# iphone - UIImageView 在矩形中绘制图像大小而不是图像视图

> ID：13598871
> 
> 赞同：0
> 
> 时间：2012-11-28T06:09:18.900
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimageview

我想画图`UIImageView`，下面是我的画图代码。我的图像视图模式适合宽高比。当我使用以下代码进行绘制时，由于我正在使用`drawinrect`并给出矩形，`UIImageView`所以所有图像都被缩小到`imageview. 我想绘制图像大小的图像而不是图像视图。因为我正在检测图像视图上的触摸点，所以点击点和图像上的实际绘图是不同的。任何人都可以告诉我如何直接在图像上绘图。以及如何计算图像而不是图像视图上的触摸点的这种偏移或差异。

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {

    UITouch *touch = [touches anyObject];
    lastTouch = [touch locationInView:self];

 }

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

CGPoint   currentTouch = [[touches anyObject] locationInView:self];

UIGraphicsBeginImageContext(self.image.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[self.image drawInRect:CGRectMake(0, 0, self.image.size.width, self.bounds.size.height)];

CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, _brushSize);

CGContextBeginPath(context) ;

CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
CGContextAddLineToPoint(context,currentTouch.x,currentTouch.y) ;

CGContextSetAlpha( context , 1 );

CGContextSetStrokeColorWithColor(context, [_brushColor CGColor]);

CGContextStrokePath(context) ;

self.image = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

lastTouch = currentTouch;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:32:55.687

你不应该真的是我们的班级`UIImageView`。它不打算被子类化。

更好的方法是使用 a`UIView`而不是`UIImageView`.

那么两种可能的方法是...

`UIImage`直接将其绘制到`UIView`内部 drawRect 中，但这会给您带来与当前遇到的相同的问题。

或者...

在`UIView`有一个`UIImageView`. 调整它的大小，使其成为正确的大小/形状`UIImage`。（即自己进行缩放）然后在`UIImageView`第二个`UIView`（和子类）上第二个将被封顶 DrawingView 或其他东西。您现在可以在这里完成所有绘图。你所有的触摸检测也将在这里。因此您不再需要将触摸点转换为不同的绘图点。

# asp.net - web.config 表单身份验证，cookiename

> ID：13598873
> 
> 赞同：0
> 
> 时间：2012-11-28T06:09:32.627
> 
> 标签：asp.net

我有一个带有以下内容的 web.config：

```
 <system.web>
<customErrors mode="Off"/>

<authentication mode="Forms">
  <forms loginUrl="Login.aspx" name="SIPE_ASPXAUTH">
    <credentials passwordFormat="Clear">
      <user name="user1" password="123456"/>
      <user name="user2" password="123456"/>
      <user name="user3" password="123456"/>
    </credentials>

  </forms>

</authentication>

<authorization>

  <deny users="?"/>
</authorization>
<compilation debug="true"/> 
```

此 web.config 始终将我重定向到以下网址

```
http://localhost:53077/Login.aspx?ReturnUrl=%2fDefault.aspx 
```

我的起始页是一个 Login.aspx，即使在输入正确的凭据后，它也会将我重定向到上面的 url。

所以这就是我所做的。我取出了 name 中的属性

```
 <forms loginUrl="Login.aspx"> 
```

并保持其他一切不变。它完美地工作。

谁能解释一下原因。我知道这是一个 cookiename，默认是 ASPXAUTH。此 cookie 用于对用户进行身份验证。它也存储在工具中......选项......

设置这个cookiename有什么用。是否允许跨浏览器功能。n 我如何通过在 `<forms loginUrl="Login.aspx">`

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:19:09.017

配置设置似乎没问题，但是您已经在登录页面的代码中编写了一些代码，也用于表单身份验证。检查用户名和密码是否正确后，您必须编写以下代码：

```
FormsAuthentication.SetAuthCookie(
                 this.TextBox_username.Text.Trim(), flase);

         FormsAuthenticationTicket ticket1 = 
            new FormsAuthenticationTicket(
                 1,                                   // version
                 this.TextBox_username.Text.Trim(),   // get username  from the form
                 DateTime.Now,                        // issue time is now
                 DateTime.Now.AddMinutes(10),         // expires in 10 minutes
                 false,      // cookie is not persistent
                 "HR"                              // role assignment is stored
                 // in userData
                 );
          HttpCookie cookie1 = new HttpCookie(
            FormsAuthentication.FormsCookieName, 
            FormsAuthentication.Encrypt(ticket1) );
          Response.Cookies.Add(cookie1); 
```

有关表单身份验证的更多详细信息，请[单击此处](http://www.codeproject.com/Articles/13872/Form-authentication-and-authorization-in-ASP-NET)

# c++ - C/C++ 的变量命名约定验证器

> ID：13598876
> 
> 赞同：1
> 
> 时间：2012-11-28T06:09:38.463
> 
> 标签：c++, c, coding-style, naming-conventions, code-formatting

> **可能重复：**
> [根据一组编码标准检查 C/C++ 源代码的免费工具？](https://stackoverflow.com/questions/93260/a-free-tool-to-check-c-c-source-code-against-a-set-of-coding-standards)

目前对于我的项目，我正在使用 AStyle 进行缩进和其他问题，但我正在寻找一种工具，最好是用于 Linux 的命令行工具，用于检查变量命名约定（例如匈牙利符号）。有谁知道这样的工具是否存在？

# python - 获取数组中零元素和非零元素的索引

> ID：13598879
> 
> 赞同：7
> 
> 时间：2012-11-28T06:09:56.107
> 
> 标签：python, numpy

我需要找到数组的零元素和非零元素的索引。

换句话说，我想从中找到互补索引`numpy.nonzero()`。

我知道这样做的方式如下：

```
indices_zero = numpy.nonzero(array == 0)
indices_nonzero = numpy.nonzero(array != 0) 
```

然而，这意味着搜索数组两次，这对于大型数组来说效率不高。有没有一种有效的方法可以使用 numpy 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T09:52:51.507

假设您已经有了使用范围`numpy.arange(len(array))`，只需获取并存储逻辑索引：

```
bindices_zero = (array == 0) 
```

那么当你真正需要整数索引时，你可以做

```
indices_zero = numpy.arange(len(array))[bindices_zero] 
```

或者

```
indices_nonzero = numpy.arange(len(array))[~bindices_zero] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T07:47:02.173

您可以使用布尔索引：

```
In [82]: a = np.random.randint(-5, 5, 100)

In [83]: a
Out[83]: 
array([-2, -1,  4, -3,  1, -2,  2, -1,  2, -1, -3,  3, -3, -4,  1,  2,  1,
        3,  3,  0,  1, -3, -4,  3, -5, -1,  3,  2,  3,  0, -5,  4,  3, -5,
       -3,  1, -1,  0, -4,  0,  1, -5, -5, -1,  3, -2, -5, -5,  1,  0, -1,
        1,  1, -1, -2, -2,  1,  1, -4, -4,  1, -3, -3, -5,  3,  0, -5, -2,
       -2,  4,  1, -4, -5, -1,  3, -3,  2,  4, -4,  4,  2, -2, -4,  3,  4,
       -2, -4,  2, -4, -1,  0, -3, -1,  2,  3,  1,  1,  2,  1,  4])

In [84]: mask = a != 0

In [85]: a[mask]
Out[85]: 
array([-2, -1,  4, -3,  1, -2,  2, -1,  2, -1, -3,  3, -3, -4,  1,  2,  1,
        3,  3,  1, -3, -4,  3, -5, -1,  3,  2,  3, -5,  4,  3, -5, -3,  1,
       -1, -4,  1, -5, -5, -1,  3, -2, -5, -5,  1, -1,  1,  1, -1, -2, -2,
        1,  1, -4, -4,  1, -3, -3, -5,  3, -5, -2, -2,  4,  1, -4, -5, -1,
        3, -3,  2,  4, -4,  4,  2, -2, -4,  3,  4, -2, -4,  2, -4, -1, -3,
       -1,  2,  3,  1,  1,  2,  1,  4])

In [86]: a[-mask]
Out[86]: array([0, 0, 0, 0, 0, 0, 0]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:15:26.737

我不确定用于完成此任务的内置 numpy 方法，但我相信您可以使用老式`for`循环。就像是：

```
indices_zero = []
indices_nonzero = []

for index in xrange(len(array)):
    if array[index] == 0:
        indicies_zero.append(index)
    else:
        indicies_nonzero.append(index) 
```

这样的事情应该完成你想要的，只循环一次。

# windows - Flipview 中的 Webview 无法正常工作

> ID：13598881
> 
> 赞同：3
> 
> 时间：2012-11-28T06:10:00.100
> 
> 标签：windows, windows-8, microsoft-metro, msdn

我正在尝试在 Flipview 中获取 Webview，所以像往常一样它将是这样的：

```
<flipview>
    <flipview.itemtemplate>
         <datatemplate><webview name="wv" /> </datatemplate>
    </flipview.itemtemplate>
</flipview> 
```

我想使用 wv.navigatetostring(htmlstring);

现在的问题是，当我浏览项目时，有时 webview 会更新，有时不会。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T07:37:30.240

理论上可以在 FlipView 中使用 WebView，但是**你应该知道这个组件的一些限制**。使用 WebView 时有一个众所周知的问题 -**它呈现在所有内容之上，**因此可能无法在 FlipView 项目之间使用触摸进行滑动。

每个开发人员在 Windows 8 应用程序中使用 WebView 之前都应该知道的好文章：
[关于 WebView 你需要知道的十件事](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx)

# python - 如何使用主键 = True 创建 Django 字段的实例

> ID：13598882
> 
> 赞同：1
> 
> 时间：2012-11-28T06:10:13.400
> 
> 标签：python, django, web-applications

我正在开发一个 django 应用程序，但我似乎无法让这段代码正常工作。我知道一些完成任务的 hacky 方法，但似乎应该有更好的方法。我有一个模型类，其中有一个字段：

```
class MobileUser(models.Model):
    phone_id = models.AutoField(primary_key=True) 
```

一切都很时髦。但是，当我想创建类的实例并将其保存到数据库时，如下所示：

```
mobile = MobileUser()
mobile.save() 
```

我收到警告说 MobileUser 没有默认值参数，这是有道理的。我知道我可以做一些事情，比如获取最后插入的行/最大 id + 1 并将其作为参数传递，但我不想这样做。有任何想法吗？哦，旁注，该操作有效，它只是发出警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:00:55.223

为什么不让 django 处理它，就这样做：

```
class MobileUser(models.Model):
   pass 
```

每当您创建条目时，它都会自动增加 id 字段。

# css - 在 IE 的 div 中居中元素

> ID：13598883
> 
> 赞同：0
> 
> 时间：2012-11-28T06:10:20.077
> 
> 标签：css

我在 div 中居中元素时遇到了一点问题。尽管 css 在 Google Chrome 上运行良好，但在 Internet Explorer 上却失败了。

* * *

假设我有一个 id="contactus" 的 div，我希望 div 内的所有内容都居中，无论是标题、段落还是图像。更具体地说，我希望标题居中，然后是跨越 div 宽度的 80% 的下划线，居中对齐。考虑一下：

* * *

```
<div id="contactus">
  <h2>CONTACTS</h2>
</div> 
```

* * *

```
#contactus {
    margin-top: 20px;
    height: 308px; /*2px for the border on both sides*/
    width: 248px; /*2px for the border on both sides*/
    background-color: #F0F0F0;
    border: 1px solid #A9A9A9;
}

#contactus h2 {
    margin:0 auto 0 auto;
    text-align: center;
    font-family:arial,sans-serif;
    padding-top: 10px;
    /*this is for the underline after the heading*/
    width:80%;
    border-bottom:1px solid gray;
} 
```

* * *

页眉和下划线在 IE 中保持左对齐，但在 Chrome 中居中对齐。我该如何纠正？

* * *

注意：我正在为 IE 使用单独的 css 样式表，因此答案可能仅针对 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:13:49.980

像这样改变

```
#contactus {
    text-align:center;
    margin-top: 20px;
    height: 308px; /*2px for the border on both sides*/
    width: 248px; /*2px for the border on both sides*/
    background-color: #F0F0F0;
    border: 1px solid #A9A9A9;
}
    <div id="contactus" align="center">
      <h2>CONTACTS</h2>
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:14:07.953

这可能是因为 doctype 检查您是否拥有有效的 doctype

尝试

```
<!DOCTYPE html> 
```

# c#-4.0 - 并行执行 c#

> ID：13598893
> 
> 赞同：0
> 
> 时间：2012-11-28T06:10:54.433
> 
> 标签：c#-4.0, filesystems

我有以下代码：

```
foreach (string file in Directory.EnumerateFiles(@"mynetwork\dirall", "*.*", SearchOption.AllDirectories))
{
    list.Add(file);
} 
```

目录有大约 200 万个文件。我想从中构建索引，我将从填充的列表对象写入文件。

执行大约需要 45 分钟。我可以划分这个过程并行执行吗？
任何的想法？穿线什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:05:25.883

我通过使用从 Stackoverflow 获得的以下代码使其工作！

```
 // Takes same patterns, and executes in parallel
    public static IEnumerable<string> GetDirs(string path, string searchPattern, SearchOption searchOption = SearchOption.TopDirectoryOnly)
    {
        return Directory.EnumerateDirectories(path, searchPattern, searchOption);
    }

    // Takes same patterns, and executes in parallel
    public static IEnumerable<string> GetFiles(string[] paths,string searchPattern, SearchOption searchOption = SearchOption.AllDirectories)
    {
        return paths.AsParallel().SelectMany(path => Directory.EnumerateFiles(path, searchPattern, searchOption));
    } 
```

# jquery - jqGrid自定义错误提示框

> ID：13598894
> 
> 赞同：1
> 
> 时间：2012-11-28T06:10:56.693
> 
> 标签：jquery, jqgrid

我想覆盖 jqgrid 的默认错误消息框。当您单击导航栏上的编辑按钮但未选择行时，jqgrid 将触发错误消息框（“请选择行”），在我看来，不够醒目。

有什么方法可以替换它，以便我可以使用我自己的花哨的消息框功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:36:40.063

您可以使用以下`alerttext`选项`navGrid`：

```
$("#list").jqGrid('navGrid', '#pager',
    {alerttext: "Please, select row before to click on the button!!!"}); 
```

您可以使用`$.jgrid.nav`更改页面上所有网格上的文本

```
$.extend($.jgrid.nav, {
    alerttext: "Please, select row before to click on the button!!!"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:54:52.927

我有一个调用删除按钮的函数：

```
 function deleteItemFromGrid() {
        //set the grid so we don't have to search the DOM multiple times
        var grid = $('#GridName');

        //ensure a row is selected
        var selectedRow = grid.jqGrid('getGridParam', 'selrow');
        if (selectedRow) {
            idRowData = grid.jqGrid('getRowData', selectedRow)

            grid.jqGrid('delGridRow', selectedRow, { url: '/Controller/DeleteAction', reloadAfterSubmit: true,
                delData: idRowData
            }); //grid
        } //if
        else {
            showFancyErrorDialogFunction();
        } //else 

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:02:47.893

您应该能够使用 setGridParam 覆盖事件处理程序

像这样的东西：

```
jQuery("#grid").jqGrid('setGridParam',{ 
    yourClickFunction: function() { alert('my over written event'); }
}); 
```

请参阅文档： [http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)

# windows-7 - 为什么它变得非常慢？

> ID：13598900
> 
> 赞同：0
> 
> 时间：2012-11-28T06:11:18.473
> 
> 标签：windows-7, edit, virtual-machine, rubymine

我一直在 Windows 7 的虚拟机中使用 Ubuntu 中的 RubyMine 开发 RoR 应用程序 嗯.. 很长一段时间以来一切都很好.. 但最近，我注意到编辑任何文件都需要很长时间（超过 15 秒）

就在我尝试输入任何东西时..它会挂起太长时间..

任何的想法 ？有什么问题？如何重置 RubyMine ？

**编辑**

Ubuntu 在 vm 中运行良好，我可以立即执行其他任务，因此 VM 进程不会挂起，当我尝试在 RubyMine 中编辑文件时挂起的是 RubyMine 它自己。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:59:15.793

我所做的是在不同的位置重新安装 RubyMine，一切都很好了..

# java - JVM 中这些时间问题的原因是什么？

> ID：13598901
> 
> 赞同：4
> 
> 时间：2012-11-28T06:11:20.703
> 
> 标签：java, algorithm, sorting, jvm, timing

我一直在摆弄一些排序算法并给它们计时，看看它们有多有效。为此，我创建了一个静态类，其中包含许多整数排序算法，以及另一个用于计时并将数据导出到 csv 的类。

我已经开始查看上述数据，并且注意到了一个有趣的趋势。我的程序创建了 5 个不同的随机数组进行测试，每个排序算法对每个数组进行 10 次不同试验的平均值。奇怪的是，对于一些算法，第一个数组的平均时间似乎要长得多，但对于其他算法则不然。以下是一些备份的示例数据： [Dataset 1](https://dl.dropbox.com/u/24472738/result1.png)、[Dataset 2](https://dl.dropbox.com/u/24472738/result2.png)和[Dataset 3](https://dl.dropbox.com/u/24472738/result3.png)（时间以纳秒为单位）。

我不确定它是否与某些算法、我实现算法的方式、JVM 或其他一些因素的组合有关。有人知道这种类型的数据是如何发生的吗？

此外，所有这些的源代码都可以[在此处](https://bitbucket.org/brenns10/sort/src)获得。在“src”文件夹下查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:45:52.963

这看起来像是存在即时编译的效果。

为了减少启动时间，当代码第一次运行时，它直接从字节码中解释。只有在任何特定代码段运行多次后，JIT 才会确定它是一个关键部分，并且值得将其重新编译为本机代码。然后它用它的编译形式替换该方法。

即时编译的效果是启动时间大大减少（整个应用程序在运行之前不需要编译）而且关键部分运行得尽可能快（因为它们最终被编译） . 看起来关键部分是在第一次评估中的某个地方编译的。

我不确定为什么有些算法没有表现出编译的加速。很可能是因为它们与其他一些以前的算法共享它们的关键部分。例如，插入排序在很大程度上依赖于`swap`在选择排序评估期间编译的方法。另一个可能的原因在于注意到持续运行的 mergeSort 不严重依赖函数调用，因此它不会从内联中受益。另一方面，堆排序严重依赖`siftDown`方法，编译器可能很难内联。

如果您将您的标记`swap`为 as `final`，它将使编译器能够内联对此方法的调用。由于此方法很小且经常被调用，因此内联它（这是即时编译的一部分）将显着提高性能。

为了提供一致的测试环境，您可以在运行测试[时禁用即时编译。](http://www.jguru.com/faq/view.jsp?EID=3827)

# wpf - 如何将 GridView 保存到 WPF 中的数据库？

> ID：13598902
> 
> 赞同：0
> 
> 时间：2012-11-28T06:11:21.193
> 
> 标签：wpf, binding, sql-server-ce

在 C# 中，我经常这样做：

**将表从数据库加载到 GridView**

```
SqlCeDataAdapter dataAdapter;
try
   {
      String connectionString = connStr;
      String selectCommand = "select * from Table_Name";

      dataAdapter = new SqlCeDataAdapter(selectCommand, connectionString);
      commandBuilder = new SqlCeCommandBuilder(dataAdapter);

      DataTable table = new DataTable();
      dataAdapter.Fill(table);
      bindingSource1.DataSource = table;
      DataGridView1.DataSource = bindingSource1;
   }
catch (SqlCeException ex)
   {
      MessageBox.Show(ex.Message);
   } 
```

在对 GridView 单元进行相同（大量）更改后，我以这种方式将其保存到数据库：

```
dataAdapter.Update((DataTable)bindingSource1.DataSource); 
```

假设我在 WPF 中以相同的方式将表加载到 GridView。如何将所有 GridView 值保存到数据库？（以 WPF 方式：P）

注意：我将 SQL Server CE 用于数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:17:09.340

日期表是 wpf 中有效的数据源，您可以与它进行绑定（使用 ItemsSource 属性），并且保存过程与数据网格无关。

只需引用您的表格即可。

# ada - 如何在不暂停贪吃蛇游戏的情况下读取输入？

> ID：13598903
> 
> 赞同：2
> 
> 时间：2012-11-28T06:11:35.120
> 
> 标签：ada

这是学校的作业。创建一个蛇游戏。所以我创建了两个包，一个用于图形，一个用于蛇。蛇移动平稳，一切正常。但我需要用键盘控制蛇。这是主要程序：

```
with Graphics; use Graphics;
with Graphics.Snake; use Graphics.Snake;

procedure Run_Snake is
   B : Buffer (1 .. 24, 1 .. 80);
   S : Snake_Type (1 .. 5) := ((10, 10),
                               (10, 11),
                               (10, 12),
                               (11, 12),
                               (12, 12));
   D : Duration := 0.07;
begin

  loop
      Empty (B);
      Draw_Rect (B, (1, 1), Width  => 80,
                 Height            => 24);
      Draw (B, S);
      Update (B);

      Move (S, 0, -1);
      delay D;

   end loop;

end Run_Snake; 
```

在这行代码中，我控制了蛇头的旋转：

```
Move (S, x, y); 
```

其中 x 是 x 值，左侧可以为 -1，右侧可以为 1。
其中 y 是 y 值，它可以是 -1 表示向下，1 表示向上；

无论如何，如何在不暂停蛇移动的情况下读取输入？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:38:05.090

您可能想使用多任务系统来解决您的问题。

```
procedure Snake_Game is

   task Run_Snake is
      entry Input_Received (S : Snake_Type; x : Integer; y : Integer);
   end Run_Snake;

   task body Run_Snake is
      D : constant Duration := 0.07;
      B : Buffer (1 .. 24, 1 .. 80);
   begin
      loop
         select
            accept Input_Received (S : Snake_Type; x : Integer; y : Integer) do
               Move (S, x, y);
            end;
         or
            delay D;
            Empty (B);
            Draw_Rect (B, (1, 1), Width => 80, Height => 24);
            Draw (B, S);
            Update (B);
         end select;
      end loop;
   end Run_Snake;

   S : Snake_Type (1 .. 5) := ((10, 10),
                              (10, 11),
                              (10, 12),
                              (11, 12),
                              (12, 12));

begin
   loop
      Do_Whatever_You_Want_To_Get (x, y)
      Run_Snake.Input_Received(S, x, y);
   end loop;
end Snake_Game; 
```

在这样的系统中，您将绘图过程置于单独的任务中。在“选择”行，任务等待对 Input_Received() 的调用。如果在持续时间 D 后未调用此条目，则任务执行所有绘图函数，并重新开始循环。

希望它可以提供帮助。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:01:50.080

有几种基本方法可以解决此类问题。

第一种是使用某种非阻塞调用来检查输入，但无论是否找到任何输入都会立即返回。正如 Simon Wright 在评论中提到的那样，Ada 提供了这样一个调用：[Get_Immediate](http://www.ada-auth.org/standards/12aarm/html/AA-A-10-7.html#p11)。这个例程的小缺点是（当我上次检查时）大多数编译器以仍然需要用户`enter`在输入可用于该例程之前敲击键的方式实现它。大多数操作系统也会对此类活动进行系统调用（没有那个烦人的输入键缺点），但是阻塞通常是他们的首选行为，因此设置非阻塞输入通常很困难或晦涩难懂。

我不知道你的那个`Graphics`包裹里有什么，但你可能想看看它是否有这样的电话。我猜这是一个学校编程作业，这是一个用于此作业的包。如果是这样，可能有一些设施可以做到这一点，或者你的教练没有想象你的游戏是这样工作的。

另一种方法是使用不同的控制线程来读取用户输入。这样，您可以在一个线程中使用操作系统喜欢的阻塞调用，并让您的游戏的其余部分像在另一个线程中一样愉快地运行。Ada 通过任务实现了这一点（如 tvuillemin 的回答所示）。这里的问题是这两个任务之间的任何交互（例如：将输入传递给游戏任务）都必须正确同步。此外，这两个任务使用的任何包或设施都必须是任务安全的。对于 Ada 包，只要您不尝试共享文件对象或其他东西，您就非常安全。但是对于第三方软件包（例如`Graphics`？），您通常最好只选择一项任务来“拥有”该软件包。

大多数窗口系统以极其复杂的方式解决了这个问题。他们实现了自己的“主循环”，它应该接管你的控制线程，它会处理日常任务，比如刷新窗口的内容和轮询输入。如果您想做一些自定义的事情（例如：定期更新游戏状态），您必须将其放入例程中并将其注册为“回调”。

# jquery-mobile - jQuery Mobile 安全页面

> ID：13598906
> 
> 赞同：1
> 
> 时间：2012-11-28T06:11:53.193
> 
> 标签：jquery-mobile

我正在开发一个仅对登录用户可用的 jquery 移动网站。

我有一个功能可以检查服务器的登录状态：

```
function checkLogin() {
    $(function () {
        $.getJSON(root_url + 'manageUsers/checklogin/?callback=?', null,
            function (data) {
                if (data.logged == 'false') {
                    $("#index_Container").html("<h2>Login Required</h2></div><p>We've noticed you're not logged in, please login to use this app.</p><p><a href='login.html' data-role='button'>Click here to login</a></p>").trigger('create');
                    $.mobile.changePage('login.html');
                } else {
                    $(".logged_in").text(data.username);
                    $(".logged_in").addClass('logout');
                    $(".header_div").trigger('create');
                }
            });
    });
} 
```

我似乎无法弄清楚如何实现这一点，因此每次加载索引页面和加载任何其他页面时，都会在页面上呈现任何其他内容之前触发它。目前，页面将加载并显示 HTML，然后执行 $.mobile.changePage('login.html')：

**编辑：如果有人对如何以更好的方式实现这一点有任何想法，我很想知道，应用程序中的每个页面都需要用户登录。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:45:20.880

为了在每次加载新页面时都运行此函数，您需要将其绑定到`pagebeforeload`事件，如果它未验证登录，则可能会取消用户导航。

```
$( document ).bind( "pagebeforeshow", function( event, data ){
  event.preventDefault(); //prevents usual load of page
  checkLogin(data);
}); 
```

您将不得不对 checkLogin 进行更改，特别是因为该页面尚不存在，因此您无法对 DOM 进行更改。[您可以在这个 fiddle](http://jsfiddle.net/gpn9G/3/)中看到一个快速而肮脏的示例，提示您如何考虑调用的异步性质。

# java - 带单引号的 Sql 更新查询

> ID：13598908
> 
> 赞同：0
> 
> 时间：2012-11-28T06:12:09.317
> 
> 标签：java, sql

我在 java 中使用休眠应用程序来检索和更新数据库。

在更新表期间，我形成如下的 sql 查询，

```
String qry = "UPDATE " + entity  + " SET " + htmlColumn + " ='"+value+"' WHERE " + id + " = " + primaryId; 
```

**其中 value 是一个有时包含单引号的 html 字符串。**

如何转义忽略/转义单引号并成功更新表格

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:16:50.043

用于`PreparedStatement`此

```
String qry = "UPDATE " + entity  + 
             " SET " + htmlColumn + " = ? " +
             "WHERE " + id + " = ?";

PreparedStatement pstmt = con.prepareStatement(qry);
pstmt.setString(1, value);
pstmt.setInt(2, primaryId);
pstmt.executeUpdate(); 
```

*   [准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:20:02.793

不要直接设置值。

```
currentSession()
    .createQuery("UPDATE " + entity  + " SET " + htmlColumn +
              " = :value WHERE " + id + " :id")
    .setParameter("value", value).setParameter(":id",id).executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:16:06.627

您可以将单引号替换为双单引号。`value.replace("'","''");`但是您需要满足的不仅仅是这些，因为如果没有适当地满足您的价值，您的价值很容易允许 SQL 注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:17:46.127

您可以将preparedstatement用作：

```
String query= "UPDATE " + entity  + " SET " + htmlColumn + " =? WHERE " + id + " = " + primaryId;

PreparedStatement ptmt = con.prepareStatement(query);
ptmt.setString(1, value); 
```

# javascript - 如何在 Greasemonkey 脚本中模拟按键？

> ID：13598909
> 
> 赞同：3
> 
> 时间：2012-11-28T06:12:12.663
> 
> 标签：javascript, greasemonkey, keypress

我在网上找到了很多关于如何使用`initEvent`和[`dispatchEvent`函数](https://developer.mozilla.org/en-US/docs/DOM/element.dispatchEvent)的信息，但我一辈子都无法让它们在实践中发挥作用。

我试图让脚本`Enter`每 5 秒按一次键。我的用户脚本代码（减去不相关的元数据）如下：

```
// ==UserScript==
// @namespace      http://userscripts.org/scripts/show/153134
// @require        https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js
//
// @grant          unsafeWindow
//
// ==/UserScript==

$(function(){
window.setInterval(function(){
    var ev = document.createEvent("KeyboardEvent");
    ev.initKeyEvent("keypress", true, false, window, 0, 0, 0, 0, 13, 13);
        window.dispatchEvent(evt);
}, 5000);
}); 
```

在 userscript 上检查我的脚本，看看它的效果如何（添加一个用户包括域并在 any 上测试它`<textarea>`）。Greasemonkey 只是不让它通过，还是我需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:21:50.333

该代码中存在复制粘贴错误。
不要使用`window.dispatchEvent(evt);`;
利用`window.dispatchEvent(ev);`

将事件发送到`window`可能也不是您需要的。（或者它可能是。链接到目标页面。）

也许将事件发送到文档：

```
document.body.dispatchEvent(ev); 
```

或将其发送到特定节点：

```
var targetNode  = document.querySelector ("#content textarea"); // Etc.
targetNode.dispatchEvent (ev); 
```

或者，由于您使用的是 jQuery：

```
var ev = $.Event('keypress');
ev.which = 13; // Carriage-return (Enter)
$('body').trigger(ev); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T09:36:45.643

我能够将击键发送到文档并使它们正确冒泡的唯一方法是在 GM 脚本中创建一个额外的脚本插入。本示例使用 jQuery 模拟击键事件，它检测何时按下“x”键并将“enter”发送到文档。

```
var script = document.createElement("script");
script.setAttribute("type", "application/javascript");

script.textContent = "(" + function(){
    $(document).keypress(function(e) {
        if(e.which == 120) {
            var p = jQuery.Event('keydown');
            p.which = 13;
            p.keyCode = 13;
            $('body').trigger(p);
        }
    });
} + ")()";

document.body.appendChild(script);
document.body.removeChild(script); 
```

（编辑：固定等于/等价错误）

# php - 试图让用户通过 api 参加活动

> ID：13598910
> 
> 赞同：1
> 
> 时间：2012-11-28T06:12:14.113
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 Facebook 的 API 代码让用户参加活动，但它不起作用。我可以在浏览器窗口上运行发表评论，但作为 php 脚本它不起作用

```
$fields = array('access_token'=>$access_token);

$result = HTTP_POST("https://graph.facebook.com/4XXXXX663/invited?access_token=$access_token",// URL to query

       $fields,                 // POST fields; associative array
       USER_AGENT,                  // user-agent value
        "",                         // cookie storage and retrieval
        "",                         // proxy; type:ip:port[:user:pass]; supported types: http, socks5
        true,                       // return the data or not
        false,                      // include headers in the return data
        "",                         // set value for REFERER header
        true,                       // automatically follow "redirects" ("Location" header)
        false);                     // enable or disable multipart post (if uploading, set to true) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:04:11.863

您正在传递`access_token`URL 以及 POST 数据。

删除`?access_token=$access_token`URL 中的部分，然后重试。

如果您可以发布您遇到的错误，那也很好，所以我们可以看到实际问题是什么，并确保您发布该`HTTP_POST`功能，以便我们知道 cURL 设置是否正确（我假设这个功能是使用卷曲）。

**编辑 1：**已删除，刚刚意识到您正在尝试参加活动而不是邀请。

**编辑 2：**您需要让您的用户授予`rsvp_event`权限，以便让他们通过您的应用程序参加您的活动。您还需要向`EVENT_ID/attending`（用于参加活动）而不是`EVENT_ID/invited`（用于邀请用户/朋友参加您的活动）进行 HTTP POST。

# visual-studio-lightswitch - 如何对 VS2012 LightSwitch 中的所有查询进行预处理？

> ID：13598913
> 
> 赞同：2
> 
> 时间：2012-11-28T06:12:19.737
> 
> 标签：visual-studio-lightswitch

似乎 VS2012 Light Switch 已从设计器中表的“编写代码”下拉菜单中删除了 [Table_Name]_All_PreprocessQuery 选项，该表在 VS2010 + Light Switch 2.0 中可用。

我们可以用VS2012做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:42:26.720

All_PreProcessQuery*方法*已被弃用，取而代之的是*Filter*方法。但是，即使“*编写代码”*下拉列表中不再提供该方法，您仍然可以手动编写该方法。

# iphone - Spotify 应用程序崩溃而没有崩溃日志

> ID：13598914
> 
> 赞同：1
> 
> 时间：2012-11-28T06:12:38.037
> 
> 标签：iphone, spotify, sigabrt, cocoalibspotify-2.0

![Xcode 截图](../Images/647c95055fabae4b6acb7d4a72951fad.png)

我正在使用 cocoalibspotify。我的应用程序即将完成，但我遇到了一些奇怪的问题。当我在注销后再次尝试登录时，应用程序崩溃了，没有崩溃日志，**后来**我的调试点进入了行

```
sp_session_logout(outgoing_session); 
```

从`-(void)logout:(void (^)())completionBlock`类中的方法`SPSession.m`

在它旁边有`signal SIGABRT`.

查看我附上的屏幕截图。它在控制台下方显示了没有崩溃日志的崩溃点。

这种崩溃只发生`happens sometimes`而不是每次发生。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:06:43.067

`logout:`在再次登录之前，您是否正在等待调用的完成块触发？这会导致问题，`logout:`有时通话可能需要一段时间才能完成。

此外，最新`master`版本 2.4.0 是否会出现此问题？分行`HEAD`的情况如何？`dev`

# objective-c - 两个数组的总和

> ID：13598915
> 
> 赞同：-4
> 
> 时间：2012-11-28T06:12:42.273
> 
> 标签：objective-c, cocoa-touch, nsmutablearray, addition

我有两个不同`NSMutableArray`的包含一些元素。现在我想要每个数组元素的总和以及数组相加的结果。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:16:12.493

仅用`for loop`于此实现。获取每个元素，`objectAtIndex`然后使添加变得简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:33:09.880

```
NSArray *firstArray=[NSArray arrayWithObjects:@"1",@"2",@"3", nil];

NSArray *secondArray=[NSArray arrayWithObjects:@"10",@"20",@"30", nil];

NSMutableArray *sumArray=[NSMutableArray new];

for (NSInteger i=0; i<[firstArray count]; i++) {
    NSString *newValue=[NSString stringWithFormat:@"%ld",([[firstArray objectAtIndex:i]integerValue] + [[secondArray objectAtIndex:i]integerValue])];
    [sumArray addObject:newValue];
}

NSLog(@"sum=%@",sumArray); 
```

输出是：

```
sum=(
    11,
    22,
    33
) 
```

注意：firstArray 和 secondArray 的大小必须相同，并且包含整数作为字符串。否则需要修改...

# java - 从 JAR 运行时编码错误，从 Eclipse 运行完美

> ID：13598921
> 
> 赞同：3
> 
> 时间：2012-11-28T06:13:10.187
> 
> 标签：java, utf-8, character-encoding, gson, netty

我面临类似于[How to Force a jar to uses(or the jvm running in) utf-8 而不是系统的默认编码的问题](https://stackoverflow.com/questions/4159551/how-to-force-a-jar-to-usesor-the-jvm-runs-in-utf-8-instead-of-the-systems-def)。有一个服务器和客户端 java 应用程序。如果我从 Eclipse 运行它们，那么一切正常。如果我制作罐子，那么它们之间交换的字符串就会被破坏（编码错误）。

如果我使用`-Dfile.enconding=utf-8`JVM 参数运行两个图像，那么它可以正常工作。但是由于上面的链接说它不是最好的解决方案（至少需要从 bat 运行 jar），我试图通过为 BufferedReader 指定编码来解决这个问题。但是它失败了，并且使用 jar 很难调试。

此代码用于发送请求并获取 JSON 格式的一行作为回复。该回复被证明具有 UTF-8 编码。

```
public static String sendRequest (String request) {
    if (request == null) return null;

    try {
        URL url = new URL(request);
        HttpsURLConnection con = (HttpsURLConnection)url.openConnection();
        BufferedReader inReader = new BufferedReader(new InputStreamReader(con.getInputStream(), Charset.forName("UTF-8")));
        String line = inReader.readLine();
        inReader.close();
        return line;
    } catch (Exception e) {
        e.printStackTrace(System.err);
    }

    return null;
} 
```

这就是这条线的样子

> {"response":[{"uid":123456,"first_name":"Имя","last_name":"Фамилия"}]}

然后我准备在 Gson.fromJson() 中使用它

```
int beginIndex = reply.indexOf('[');
int endIndex = reply.indexOf(']');
reply = reply.substring(beginIndex + 1, endIndex);
SocialPerson vkPerson = new Gson().fromJson(reply, SocialPerson.class); 
```

之后，使用由 ChannelBuffers.wrappedBuffer() 和 NettyUtils.writeStrings() 生成的 Netty 的 ChannelBuffer 将字符串发送到服务器

我尝试在 Eclipse 中调试客户端和从 jar 运行的服务器，然后 Eclipse 显示，直到字符串真正提供给框架以交付它看起来有效。

然后我从 Jar 调试服务器和客户端运行，一旦收到字符串，它看起来已经像垃圾了。

在服务器端

```
 private final String username;
    private final String password;

    public SimpleCredentials(ChannelBuffer buffer)
    {
        this.username = NettyUtils.readString(buffer);
        this.password = NettyUtils.readString(buffer);
    } 
```

**你认为问题可能出在哪里？对不起，我不能在这里发布所有代码。**

**UPD：** 用户名由 firstName 和 lastName 生成

```
ChannelBuffer buffer = ChannelBuffers.wrappedBuffer(opCode, NettyUtils.writeStrings(userId, userName, refKey)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:34:20.967

当您读取网络流时，如果自动方式失败，您需要手动重新编码您的字符串。您正在使用的库可能忽略了内容编码，或者它可能在 HTTP 响应中丢失。

您的代码中的某处将是一个字节数组，您可以在 String 构造函数中对其进行转换：

```
String xxx = new String(bytes, "utf-8"); 
```

如果你得到了错误编码的字符串，你可以检查这个代码：

```
String rightEncoded = new String(wrongEncodedString.getBytes("Cp1252"), "utf-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:29:49.507

您不应该使用`file.encoding`系统属性。

避免此类编码问题的最佳方法是永远不要假设任何有关默认平台编码的内容，并且在构造阅读器或将字节转换为字符串时始终提供编码，反之亦然。

您的`sendRequest`方法在处理编码方面似乎没问题：它从输入中读取字符，明确提到它希望流以 UTF-8 编码。

但是，我们看不到客户端/服务器序列的另一端。引用你的话：

> 之后，使用由 ChannelBuffers.wrappedBuffer() 和 NettyUtils.writeStrings() 生成的 Netty 的 ChannelBuffer 将字符串发送到服务器

您还提到这里不能附上整个代码，这是可以理解的；因此，我建议您查看您发送这些字符串的确切方式，以及您在这样做时是否明确指定了编码。

**根据 OP 的更新进行编辑**：好吧，我很抱歉我不熟悉 Netty，但我还是会在这里试一试。`NettyUtils.writeStrings()`或任何调用它的代码不接受字符编码吗？`NettyUtils`我在网上找不到任何 JavaDoc 。在这里和我一起工作。:-)

# database - 如何在 oracle 中缩小用户数据文件？

> ID：13598922
> 
> 赞同：3
> 
> 时间：2012-11-28T06:13:18.257
> 
> 标签：database, oracle, database-administration

我有一个数据文件 users.dbf 。它的大小已增加到 61GB，这是一个问题。里面的数据不多，里面创建了不同的用户。请帮我缩小用户数据文件。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:07:29.587

对分区列的 UPDATES 在逻辑上等同于 DELETE 后跟 INSERT。所以是的，如果您更新状态列，该行将被移动到正确的分区。对性能的影响与 DELETE 后跟 INSERT 相同。

但是，分区是为了便于管理（将历史数据移动到慢速磁盘，将索引重建分成更小的块，进行大数据加载等）而不是为了性能。

如果您这样做是为了提高性能，我建议您使用过滤索引而不是分区。例如，如果您有这样的选择：

```
SELECT t.id, t.c3, t.c5 FROM t WHERE status ='NEW' and datetime > @d1 
```

过滤索引是比分区更好的解决方案。

```
CREATE INDEX IX_tab_fltr_status_new on t ( datetime ) where (status = 'NEW') 
```

# google-maps - 如何找到与纬度/经度对应的邮政编码

> ID：13598923
> 
> 赞同：2
> 
> 时间：2012-11-28T06:13:33.233
> 
> 标签：google-maps, latitude-longitude, zipcode

如何找到纬度/经度对应的邮政编码？

有哪些工具可以获取这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:21:41.657

Google 提供了地理编码/反向地理编码 API，可让您从 lat/lng 获取地址信息。

即） [http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false)

在结果中，您可以找到这样的邮政编码： ![在此处输入图像描述](../Images/6073e1b21921de3cb8f6dfd3fee94c5a.png)

更详细的，请阅读官方文档。 [https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# php - SOAP-ERROR：编码：对象没有“first_name”属性

> ID：13598936
> 
> 赞同：2
> 
> 时间：2012-11-28T06:14:24.210
> 
> 标签：php, .net, c#-4.0, soap, wsdl

当我尝试调用用 PHP Web 服务编写的 Web 方法时，我在 .NET 项目中收到“SOAP-ERROR: Encoding: object has not 'first_name' property”错误消息。Web 方法返回一个 PHP 数组`$result_data`。我在 WSDL 中为数组返回的字段添加了元素。由于我是 PHP 新手，因此无法获取返回数组的结构。该数组似乎是两级的。

```
$result_data => array(array( "first_name"
"last_name")

array( "first_name"
"last_name")

array( "first_name"
"last_name")
) 
```

这是我的 WSDL：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"
    xmlns:tns="http://10.20.1.161/api/soap/"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
    xmlns:http="http://schemas.xmlsoap.org/wsdl/http/"
    targetNamespace="http://10.20.1.161/api/soap/"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">

<wsdl:types>
<s:schema targetNamespace="http://10.20.1.161/api/soap/" elementFormDefault="qualified">
    <s:import namespace="http://microsoft.com/wsdl/types/"/>

    <s:element name="getUsers">
        <s:complexType>
            <s:sequence>
                <s:element minOccurs="1" maxOccurs="1" name="message" type="s:string"/>
            </s:sequence>
        </s:complexType>
    </s:element>

    <s:element name="getUsersResponse">
        <s:complexType>
            <s:sequence>
                <s:element name="getUsersArray" type="tns:getUsersArray"/>
            </s:sequence>
        </s:complexType>
    </s:element>

    <s:complexType name="getUsersArray">
        <s:sequence>
            <s:element minOccurs="0" maxOccurs="unbounded" name="User" nillable="true" type="tns:User" />
        </s:sequence>
    </s:complexType>

    <s:complexType name="User">
        <s:sequence>
            <s:element minOccurs="1" maxOccurs="1" name="first_name" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="last_name" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="regular_time" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="regular_time_wage" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="regular_time_wage_with_burden" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="regular_time_hourly_rate" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="regular_time_hourly_rate_with_burden" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="gross_wage" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="gross_wage_with_burden" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="worked_time" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="worked_days" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="verified_time_sheet" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="verified_time_sheet_date" type="s:string"/>
       <!--     <s:element minOccurs="1" maxOccurs="1" name="absence_policy-3" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="absence_policy-3_wage" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="absence_policy-3_wage_with_burden" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="absence_policy-3_hourly_rate" type="s:string"/>
            <s:element minOccurs="1" maxOccurs="1" name="absence_policy-3_hourly_rate_with_burden" type="s:string"/>-->
        </s:sequence>
    </s:complexType>
</s:schema>
</wsdl:types>

<wsdl:message name="getUsersSoapIn">
<wsdl:part name="parameters" element="tns:getUsers"/>
</wsdl:message>
<wsdl:message name="getUsersSoapOut">
<wsdl:part name="parameters" element="tns:getUsersResponse"/>
</wsdl:message>

<wsdl:portType name="TestSoap">
<wsdl:operation name="getUsers">
    <wsdl:documentation xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'>
        Function ("getUsers")
    </wsdl:documentation>
    <wsdl:input message="tns:getUsersSoapIn"/>
    <wsdl:output message="tns:getUsersSoapOut"/>
</wsdl:operation>
</wsdl:portType>

<wsdl:portType name="TestSoap12">
<wsdl:operation name="getUsers">
    <wsdl:documentation xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'>
        Function ("getUsers")
    </wsdl:documentation>
    <wsdl:input message="tns:getUsersSoapIn"/>
    <wsdl:output message="tns:getUsersSoapOut"/>
</wsdl:operation>
</wsdl:portType>

<wsdl:binding name="TestSoap" type="tns:TestSoap">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="getUsers">
    <soap:operation soapAction="http://10.20.1.161/api/soap/getUsers" style="document"/>
    <wsdl:input>
        <soap:body use="literal"/>
    </wsdl:input>
    <wsdl:output>
        <soap:body use="literal"/>
    </wsdl:output>
</wsdl:operation>
</wsdl:binding>

<wsdl:binding name="TestSoap12" type="tns:TestSoap12">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="getUsers">
    <soap12:operation soapAction="http://test-uri/soap/export/getUsers" style="document"/>
    <wsdl:input>
        <soap12:body use="literal"/>
    </wsdl:input>
    <wsdl:output>
        <soap12:body use="literal"/>
    </wsdl:output>
</wsdl:operation>
</wsdl:binding>

<wsdl:service name="TestService">
<wsdl:port name="TestPort" binding="tns:TestSoap">
    <soap:address location="http://10.20.1.161/api/soap/server.php"/>
</wsdl:port>
<wsdl:port name="TestSoap12" binding="tns:TestSoap12">
    <soap12:address location="http://10.20.1.161/api/soap/server.php"/>
</wsdl:port>
</wsdl:service>

</wsdl:definitions> 
```

我的返回代码部分。

```
$getUsersArray = $result->getResultData();
return array("getUsersArray" => $getUsersArray); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T23:27:50.180

该`first_name`属性在您的 WSDL 中由 标记为必需的`minOccurs="1"`。当您未`first_name`在 SOAP 调用中进行设置时，会发生此错误。将该参数添加到您的调用中，您应该停止收到此错误。

# java - 无法弄清楚我的 OutOfBoundsException

> ID：13598937
> 
> 赞同：0
> 
> 时间：2012-11-28T06:14:24.153
> 
> 标签：java

这样做的目的是通过在选择合法的动作之一之前确定哪些动作是合法的，从而蛮力骑士巡回赛。我是 Java 新手，但我觉得我的错误在于我无法理解如何处理这个问题：

```
import java.util.*;

public class KnightTour
{
    public static void main( String[] args )
    {
    KnightTour kt = new KnightTour(8, 8);
    int tries = 3;
    int tryCount = 0;

    while(tryCount < tries )
    {
        kt.makeMoves();
    }
}

int rows = 0;  //change to args later
int columns = 0;  //change to args later
int tries = 0; //change to args later
String[][] saves;   

int tryCount = 0;
int turnNr = 2;
int wait = 0;

Random rand = new Random();

int xCurrent = 1;
int yCurrent = 1;

int[] xMoves = { 1, 2, -1, -2, 1, 2, -1, -2 };
int[] yMoves = { 2, 1, 2, 1, -2, -1, -2, -1 };

public KnightTour( int x, int y)
{
    rows = x;
    columns = y;
    saves = new String[y][x];

    for (int i = 0; i < y; i++) 
    {
        for (int j = 0; j < x; j++) 
        {
            saves[i][j] = Integer.toString(0);
        }
    }
    saves[0][0] = Integer.toString(1);
}

private void makeMoves()
{
    int k = 0;

    while( k < (rows * columns ) )
    {
        int[] d = { 0, 0, 0, 0, 0, 0, 0, 0 }; // holds move legality
        int i = 0;

        while( i < d.length ) // loop determines which moves are legal
        {
            if( xCurrent + xMoves[ i ] > 0 && xCurrent + xMoves[ i ] < rows )
            {
                if( xCurrent + yMoves[ i ] > 0 && yCurrent + yMoves[ i ] < rows )
                    d[ i ] = 1;
            }
            i++;
        }

        int t = 0;
        int w = 0;

        while( t < d.length ) // checks if no moves are legal
        {   
            if( d[ t ] == 0 )
            {
                w++;
            }
            t++;
        }

        if( w == 8 )
        {
            writeFailures(); // fills the rest of the grid with "x"'s
            k = (rows * columns);  // breaks the loop
        }
        else
        {
            w = 0;
            chooseMove( d );
        }
        k++;
    }
    printSolution();
}

private void chooseMove(int[] d) // chooses a move that was previously determined to be legal randomly and checks if it is available
{
    System.out.println( "trace" );
    Random rand = new Random();
    int r = rand.nextInt(8);
    switch( r )
    {
    case 0:
        if( d[ 0 ] == 1 )
        {
            setX( xCurrent + xMoves[ 0 ] );
            setY( yCurrent + yMoves[ 0 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 1:
        if( d[ 1 ] == 1 )
        {
            setX( xCurrent + xMoves[ 1 ] );
            setY( yCurrent + yMoves[ 1 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 2:
        if( d[ 2 ] == 1 )
        {
            setX( xCurrent +  xMoves[ 2 ] );
            setY( yCurrent + yMoves[ 2 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 3:
        if( d[ 3 ] == 1 )
        {
            setX( xCurrent + xMoves[ 3 ] );
            setY( yCurrent + yMoves[ 3 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 4:
        if( d[ 4 ] == 1 )
        {
            setX( xCurrent + xMoves[ 4 ] );
            setY( yCurrent + yMoves[ 4 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr); // LINE 166
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 5:
        if( d[ 5 ] == 1 )
        {
            setX( xCurrent + xMoves[ 5 ] );
            setY( yCurrent + yMoves[ 5 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 6:
        if( d[ 6 ] == 1 )
        {
            setX( xCurrent + xMoves[ 6 ] );
            setY( yCurrent + yMoves[ 6 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;

    case 7:
        if( d[ 7 ] == 1 )
        {
            setX( xCurrent + xMoves[ 7] );
            setY( yCurrent + yMoves[ 7 ] );
            saves[yCurrent][xCurrent] = Integer.toString(turnNr);
            turnNr++;
        }
        else
        {
            chooseMove(d);
        }
        break;
    default:
        System.out.println( "error" );
    }
}

public int getX() 
{
    return xCurrent;
}

public void setX(int x) 
{
    xCurrent = x;
}

public int getY() 
{
    return yCurrent;
}

public void setY(int y) 
{
     yCurrent = y;
}

private void writeFailures() // writes an "x" to empty spots in the save array when no legal moves are found
{
    for (int i = 0; i < saves.length; i++) 
    {
        for (int j = 0; j < saves[i].length; j++) 
        {
            if( saves[i][j] == "0");
                saves[i][j] = "x";
        }            
    }
}

private void printSolution()
{
    for (int i = 0; i < saves.length; i++) 
    {
        for (int j = 0; j < saves[i].length; j++) 
        {
            System.out.print(saves[i][j] + " ");
        }
        System.out.println("");
    }
    System.out.println("");
}
} 
```

我得到的错误是：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -2
at KnightTour.chooseMove(KnightTour.java:166)
at KnightTour.makeMoves(KnightTour.java:91)
at KnightTour.main(KnightTour.java:14) 
```

**编辑：**现在代码行号没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:21:16.410

数组越界错误通常意味着您试图调用数组中超出数组大小的存储位置。如果您声明了具有固定大小（例如 8 个数据点）的数组，您将只能设置和检索从数组 [0] 到数组 [7] 的数组值。

默认情况下，数组计数从 0 而不是 1 开始，这是大多数越界错误的原因，因为人们会尝试访问他们假设的最后一个元素，参考我上面的示例，array[8] .

避免越界错误的最简单方法是将数组声明为 nil 大小，这将允许它扩展到所需的大小。但是，这会在代码失控的情况下存在内存泄漏的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:22:10.997

当您调用此行时会出现问题（类似的行之一）

```
setY( yCurrent + yMoves[ 4 ] ); 
```

当`yCurrent`<0。发生这种情况时，`yCurrent`变为 -2（因为`yMoves[4]`=-2），然后调用这行代码：

```
saves[yCurrent][xCurrent] = Integer.toString(turnNr); 
```

由于`yCurrent`<0，您试图访问一个不存在的数组索引；因此例外。

现在，这个错误可能会出现很多次（并且在我的测试中出现过）；`yCurrent`出于同样的原因，当(or `xCurrent`) 变为大于或等于数组大小的值时，也会发生类似的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:24:00.067

我已经检查了您的代码，并且似乎`saves[yCurrent][xCurrent] = Integer.toString(turnNr);` 正在引发异常。正在发生变化且不正确的`yCurrent`逻辑`xCurrent`。因此，即使您将保存数组限制增加到 saves[100][100]，它的行为也是一样的。

我建议您先了解代码和流程，而不是直接处理异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:34:22.280

该错误位于顶部附近的“循环确定哪些移动是合法的”中`makeMoves()`

线

```
if (xCurrent + yMoves[i] > 0 && yCurrent + yMoves[i] < rows) 
```

应该改为

```
if (yCurrent + yMoves[i] > 0 && yCurrent + yMoves[i] < rows) 
```

# php - 如何在不加载数据库的所有结果的情况下使用 Zend 分页？

> ID：13598940
> 
> 赞同：0
> 
> 时间：2012-11-28T06:14:37.033
> 
> 标签：php, database, zend-framework

我对 Zend 框架比较陌生，可能只使用了 1 个月。我有一个运行速度太慢的查询。该页面需要几分钟才能加载。在我的查询中，它是抓取所有记录还是只获取页面所需的数量？我可以限制从数据库中获取内容吗？

我的代码如下。

```
public function init() {
  $db = Zend_Registry::get('db');
  $sql = 'SELECT * FROM employee ';
  $result = $db->fetchAll($sql);
  $page=$this->_getParam('page',1);
  $paginator = Zend_Paginator::factory($result);
  $paginator->setItemCountPerPage(5);
  $paginator->setCurrentPageNumber($page);
  $this->view->paginator=$paginator;        
} 
```

我会很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:14:51.033

因为您正在向 Paginator 工厂提供 Db 查询，所以在大多数情况下，Paginator 将使用 DbSelect Paginator 适配器。该适配器将使最小的查询成为可能，以满足对 Paginator 的需求。

为了确保分页器使用正确的适配器，您可以传递一个字符串作为第二个参数。

`$paginator = Zend_Paginator::factory($result, 'DbSelect');`

参考资料摘录：

> **注意：** DbSelect 和 DbTableSelect 适配器不会选择给定查询的每个匹配行，而是只检索显示当前页面所需的最少量数据。
> 
> 因此，动态生成第二个查询以确定匹配行的总数。但是，可以自己直接提供计数或计数查询。有关详细信息，请参阅 DbSelect 适配器中的 setRowCount() 方法。

如果您使用数据库分析，您可以查看生成限制和偏移查询的位置。

**笔记：**

在大多数情况下，Zend_Db 会将 SQL 选择查询转换为 Zend_Db_Select 对象。如果您发现自己处于一种罕见的情况下，您将需要为 Paginator 使用数组适配器或将您的 sql 重构为 Zend_Db_Select 对象。这应该是非常罕见的。

在 init() 方法中看到分页器实例也是相当不寻常的。init() 将在对该控制器的每个请求上运行。

# iphone - 获取地图中最近的位置

> ID：13598946
> 
> 赞同：0
> 
> 时间：2012-11-28T06:15:02.760
> 
> 标签：iphone, objective-c, ios5, ios4, ios6

我正在做一个包含地图功能的应用程序。我在地图中有搜索功能。但是我需要以这样一种方式进行搜索，即当我搜索带有名称的位置时，离我最近的带有该名称的位置应该显示在地图中。例如，我站在澳大利亚，如果在澳大利亚有一个地方 new jersey（例如），那么它应该显示位置 new jersey 在澳大利亚而不是在美国。我们可以这样做吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:22:34.853

您可以从 googleAPI 获取您附近位置的数据，这里是示例，只是尝试查看数据，还可以从 googleAPI 站点创建您的 googleAPIKey，并通过您的位置 lat long 获取数据伙伴。

您也可以设置不同的类型，如食物、餐厅、atm 等。

谷歌 API 开发人员通过您可以创建 googleAPIKey 并从此链接[Google API 文档](https://developers.google.com/places/documentation/)中查看本教程。

试试下面这个例子

```
 NSURL *strurl = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyB7YTFTYyk9eb8ULNGxoy06-b_0DUOqdrY"];
    NSLog(@"\n\n URL %@",str);
   ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:strurl];

   [request setDelegate:self];

   [request startAsynchronous]; 
```

# java - Maven堆空间

> ID：13598949
> 
> 赞同：7
> 
> 时间：2012-11-28T06:15:25.987
> 
> 标签：java, maven

当我`mvn clean install`在 linux RHEL 6 上运行我的构建时。我收到以下错误：`java.lang.outOfMemoryError heap space`.

我已经阅读了互联网上的所有文章。在我的机器上我没有一个名为的文件`mvn.sh`，我只有一个文件`mvn.bat`。

我在哪里可以设置导出 MAVEN_OPTS 命令？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T06:27:52.647

您可以运行该命令，因此无论您使用的是文件还是文件`mvn`都无关紧要。尽管 .bat 文件适用于 Windows，而不是 Linux，但为了将来的参考，您应该记住。无论如何，在您运行 mvn 命令的同一个 shell 中，首先执行以下操作：`.sh``.bat`

```
export MAVEN_OPTS="-Xmx512M" 
```

然后执行你的`mvn`命令。如果您的内存仍然不足，请增加数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T06:45:55.977

> 当我在 linux RHEL 6 上为我的构建运行 mvn clean install 时，它显示 java.lang.outOfMemoryError 堆空间。

您需要设置 MAVEN_OPTS 环境变量。

> 我已经阅读了互联网上的所有文章

那是错误的。充其量你已经阅读了相关文章的一小部分。

> ...在我的机器上我没有 mvn.sh，我有 mvn.bat

如果您使用“yum”安装 Maven，那么您的命令路径上将会有一个“mvn”命令。在我的系统上，它是一个 shell 脚本。如果您要“破解”一个脚本，那将是您要编辑的内容。

但你不应该这样做。

> 以及在哪里设置导出 MAVEN_OPTS 命令。

这是一个非常基本的“如何使用 Linux 命令外壳”问题。

答案是在运行“mvn”命令之前在命令提示符处键入，或者将其添加到 shell 初始化文件并根据需要重新启动 shell。

* * *

我的建议是花一些时间阅读有关如何使用 Linux 命令 shell 的教程。从长远来看，它将为您节省大量时间。

# ios - Twitter on ios - 如何授予发推文的权限？

> ID：13598952
> 
> 赞同：1
> 
> 时间：2012-11-28T06:15:30.110
> 
> 标签：ios, permissions, twitter, tweets

我想知道如何授予权限？当一条推文即将发生或已经在您的设置页面权限中使用您的推特帐户登录时，是否有一个弹出窗口要求您获得许可？

我创建了一个游戏，我想为用户自动推文，我想知道如何获得用户的许可？

我正在使用 iOS 5 内置的 Twitter 框架，非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:23:46.310

如果您使用的是 Twitter 框架，那么所有权限都由 iOS 本身处理，因此您无需执行任何操作。

如果用户尚未在其设备上授权 Twitter 帐户，iOS 将在您尝试使用 API 时提示您，它会为您处理登录和使用您的应用程序授权。完成后，您将可以从框架访问该帐户。有关详细信息，请参阅[单点登录](https://dev.twitter.com/docs/ios#Single_Sign-On)。

当然，您仍然需要处理拒绝提示并选择不从您的应用程序发布推文的用户，而不仅仅是授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:23:11.927

如果您使用的是本机 api，则会自动授予权限。为此，用户需要从设置 APP 登录到 Twitter 帐户。

**在设置 App 中登录 Twiiter：**

![推特账号](../Images/689035dbb168ac97ddc9af10e92e39b1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:22:01.817

如果您使用 iOS 提供的本机共享对话框，则默认授予权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T04:37:48.760

```
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];

        ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
        [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
            if(granted) {
//Now you can do everything with your twitter account.
            }}]; 
```

# c# - 查找强类型剃刀视图（或任何视图）的模型类型

> ID：13598953
> 
> 赞同：0
> 
> 时间：2012-11-28T06:15:36.373
> 
> 标签：c#, asp.net-mvc

如何从控制器中找到（剃刀）视图的模型类型？我知道它们继承自 WebViewPage 和 WebViewPage，仅此而已。

（在 asp.net c# MVC 3 或 4 中）

提前致谢。

编辑用例：允许用户创建/上传/编辑视图和强类型视图，然后用户可以选择其中一个用户创建的视图来显示/编辑数据库中不同类型的数据。

例如，应用程序检索一个对象 Foo，并且有针对 Boo 和 Foo 的强类型视图。我不希望 Boo 的视图显示为 Foo 对象的可能选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:27:57.593

我不知道你为什么要这样做，但你可以这样做

```
@Model.GetType() 
```

您应该尽量避免视图中出现尽可能多的代码，并将逻辑推送到您的控制器或服务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:27:08.637

如果您有权访问 a ，则可以通过执行以下`IEnumerable<WebViewPage<T>>`操作来获取类型：`T`

```
// Assuming 'views' is a IEnumerable<WebViewPage<T>> here.
var validFooViews = views.Where(v =>
    v.GetType().GetGenericArguments()[0] == typeof(Foo)); 
```

# php - 下载xml时卷曲超时

> ID：13598956
> 
> 赞同：5
> 
> 时间：2012-11-28T06:15:53.710
> 
> 标签：php, xml, curl

所以，我尝试从 url 获取带有 curl 的 xml 文件。问题是，文件是通过脚本按需生成的，这需要 80-100 秒，所以我的 curl 因超时错误而脱落。

网址看起来像这样：

```
https://domain/mancgi/report?params&out=xml 
```

我尝试设置`CURLOPT_TIMEOUT`and `CURLOPT_CONNECTTIMEOUT`，以及`set_time_limit()`脚本本身（工作正常），但没有任何改变 - 仍然超时。

卷曲代码如下所示：

```
set_time_limit(1000);
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 0); 
curl_setopt($curl, CURLOPT_TIMEOUT, 300); 
$xml = curl_exec($curl); 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:00:59.700

我相信你可能会点击 php.ini 中的 default_socket_timeout，默认为 60 秒。

尝试改变，看看它是否有效。如果没有，试试这个。

```
$xml = file_get_contents($url); 
```

这样做将使用您可以在此处阅读的包装器：http: [//php.net/manual/en/wrappers.php](http://php.net/manual/en/wrappers.php)

而且您还需要确保在 php.ini 中启用了 file_get_contents 所需的包装器（通常是启用的，所以您应该没问题，但只需检查以确保）。

如果超时由 CURL 强制执行，使用它可能会绕过您遇到的超时，并记住将 php.ini 中的 default_socket_timeout 从 60 秒调整为我认为可能是您的问题的其他值

**要检查的 INI 设置**

[http://php.net/manual/en/filesystem.configuration.php](http://php.net/manual/en/filesystem.configuration.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:27:27.480

URL 是 GET 请求吗？如果是这样试试

```
$xml = get_file_content($url); 
```

# python - 从子文件夹导入模块

> ID：13598958
> 
> 赞同：16
> 
> 时间：2012-11-28T06:15:59.827
> 
> 标签：python, python-import, python-packaging

我有以下文件排列：

```
python
|---- main.py
|---- files
      |---- folder1
            |---- a.py, a1.py, ...
      |---- folder2
            |---- b.py, b1.py, ... 
```

我想导入我的模块`a.py`和. 为此，我使用了以下命令：`b.py``main.py``main.py`

```
a = 'C:/python/files/folder1'
sys.path.insert(0, a)
from files.folder1 import * 
```

但是，我无法从文件夹 1 导入模块（类似于文件夹 2）。

我收到一个错误：

> 没有名为 files.folder1 的模块

我不能使用导入命令，因为文件夹 1、文件夹 2、...中有很多 Python 文件

我在这里想念什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-28T06:29:17.453

将文件`__init__.py`（可以为空白）添加到文件夹*files*、*folder1*和*folder2*。然后你得到一个包含子包*folder1*和*folder2的包**文件*。在此之后，您可以像这样从 main.py 导入：

 **```
from files.folder1 import * 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-28T06:20:13.917

当我在 Python 2.7 中执行此操作时，我使用：

```
import sys
sys.path.append('C:/python/files/folder1')

import a
import a1 
```

这是我构建的一个 hack，用于将目录中的所有模块导入字典：

```
import os
import sys

dir_of_interest = 'C:/python/files/folder1'
modules = {}

sys.path.append(dir_of_interest)
for module in os.listdir(dir_of_interest):
    if '.py' in module and '.pyc' not in module:
        current = module.replace('.py', '')
        modules[current] = __import__(current) 
```

我刚刚构建它，它非常hacky，但它可能更像你想要的东西。所以，要访问你想要的模块，而不是说`module_name.thing`你会说`modules["module_name"].thing`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T06:25:55.363

> 我不能使用导入命令，因为文件夹 1、文件夹 2、...中有很多 Python 文件
> 
> 我在这里想念什么？

我相信您缺少的部分是每个文件夹中的*__init__.py*文件。该文件应包含一个*__all__*变量，该变量列出将由以下方式导入的所有子模块：`from somepackage.subpackage import *`。

这一切都[在包的 Python 教程部分](http://docs.python.org/2.7/tutorial/modules.html#packages)中得到了优雅的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T06:22:13.747

如果您添加`folder1`到路径中，这并不意味着您可以`folder1`作为模块导入。这意味着您可以导入文件夹 1 中的文件。所以你可以这样做：

```
import a
import a1 
```

如果你想`folder1`成为一个包其中`a`和`a1`是模块，你需要放入一个`__init__.py`然后`folder1`做`import folder1`。如果您进一步希望能够执行`from folder1 import *`并拥有该导入`a`和`a1`，您需要将代码放入您`__init__.py`的导入`a`和`a1`。

如果您希望能够以结构化方式导入的文件夹中有很多文件，则应该将该文件夹放入一个包中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-19T06:53:19.217

查看文件夹结构，您可以做的是，简单

```
from files.folder1 import a , a1
from files.folder2 import b , b1 
```

这应该会有所帮助

.

附加：我最近想到一个问题，导入pip包而不实际安装它们，然后我所做的是……我在虚拟环境中安装了包，只复制了包名的文件夹。

例如。如果包名称是 qwikidata ，那么我转到 /Lib 文件夹并仅复制 qwikidata 文件夹并将其粘贴到我的项目的根目录中，在您的情况下，main.py 文件所在的位置和 pip 卸载了包，以避免错误

现在我能够在没有实际安装 pip 的情况下导入包，因为包位于项目的根文件夹中

如果项目不是那么复杂，那应该没问题，但我不推荐这种安装包的方式。

当您想在其他机器上运行您的项目并且您没有 Internet 连接时，它会有所帮助。**

# visual-c++ - 如何在windows8中找到文本服务框架中的光标位置？

> ID：13598962
> 
> 赞同：2
> 
> 时间：2012-11-28T06:16:19.997
> 
> 标签：visual-c++, windows-8, text-services-framework

我使用记事本在此服务中实现了示例 IME，我想在文本中光标的位置插入文本。如何获取光标在 Windows 8 中的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T22:53:09.553

[ItfInsertAtSelection::InsertTextAtSelection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms628599%28v=vs.85%29.aspx)在选择处插入文本。由于记事本不支持 TSF，因此您*只能*在此处插入文本。

# javascript - 从 Javascript 数组创建 Dart 列表

> ID：13598965
> 
> 赞同：6
> 
> 时间：2012-11-28T06:16:31.370
> 
> 标签：javascript, dart

我正在尝试学习来自服务器端 Java EE 世界的客户端 Dart，并且在将数组从现有 JavaScript 库转换为 Dart 列表时遇到了麻烦。

我正在尝试通过构建[使用 Google Maps](https://github.com/dart-lang/js-interop/blob/master/example/google-maps/directions.dart)的 Javascript Interop 示例来学习。在 Google 的[Maps API 文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsLeg)中，`DirectionsLeg`对象的`step`属性返回。

> DirectionsSteps 数组，其中每个都包含有关此腿中各个步骤的信息

如何将其转换`var`为飞镖列表？我尝试了以下方法：

```
final List<maps.DirectionsStep> steps = List.from(directionsLeg.steps); 
```

但 Dart Editor 告诉我`cannot resolve method 'from' in class 'List'`。我的进口是：

```
import 'dart:html';
import 'dart:core';
import 'package:js/js.dart' as js; 
```

我究竟做错了什么？甚至有可能还是我必须接受使用 a `var`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T07:18:41.150

[目前js-interop](https://github.com/dart-lang/js-interop)中没有内置方法可以在返回`List`js 时使用 Dart `Array`。

`directionsLeg.steps`返回一个`js.Proxy`类似 js 的句柄`Array`。你可以像这样迭代它：

```
final steps = directionsLeg.steps;
for (var i = 0; i < steps.length ; i++) {
  final step = steps[i];
  // do the job with step
} 
```

如果你真的想使用 Dart `List`，你可以将`js.Proxy`js转换`Array`为 Dart `List`，如下所示：

```
List<js.Proxy> convertToList(js.Proxy arrayProxy){
  final result = new List<js.Proxy>();
  for (var i = 0; i < arrayProxy.length ; i++) {
    result.add(arrayProxy[i]);
  }
  return result;
} 
```

关于您的代码：

*   您不能定义`List<maps.DirectionsStep>`:`maps.DirectionsStep`不是类型，它是`js.Proxy`js 上的`google.maps.DirectionsStep`（而且它实际上并不存在 - 只有一个容器 js 对象`{}`）。
*   `List.from(...)`: 在这里，你尝试调用一个名为`from`Dart`List`对象的静态方法。这就是为什么你得到你的错误。[`List.from`](http://api.dartlang.org/docs/bleeding_edge/dart_core/List.html#List.from)实际上是一个[名为构造函数](http://www.dartlang.org/articles/idiomatic-dart/#constructors)的工厂，必须与`new`关键字 ( `new List.from(otherIterable)`) 一起使用。

# java - 如何更改对话框以使用不同的 Windows 分辨率调整大小

> ID：13598968
> 
> 赞同：0
> 
> 时间：2012-11-28T06:16:38.240
> 
> 标签：java, swt, screen-resolution

请任何人帮助我如何更改此对话框以使用不同的 Windows 分辨率调整大小。

```
protected Object openDialogBox(Control cellEditorWindow)
    {
        dialog = new DialogHead();

        dialog.setShell(550, 280);
        dialog.setShellOnCenter();
        dialog.setShellText("Properties");
        dialog.setShellImage(BPMNUtils.getAbsolutePath()+ "icons/module.gif");

        composite = dialog.getComposite(0, 0, 550, 435);
        GridLayout layout = new GridLayout();
        composite.setLayout(layout);

        Group propertyGroup = dialog.getGroup(composite, "Properties", new Rectangle(5, 2, 530, 237));

        //getPackage();

        final Table table = dialog.getTable(propertyGroup, new Rectangle(10, 20, 422, 38));

        table.setLinesVisible(true);
        table.setHeaderVisible(true);
        GridData gd_table = new GridData(SWT.FILL, SWT.FILL, true, true, 1, 3);
        gd_table.heightHint = 160;
        table.setLayoutData(gd_table);

        dialog.getTableColumn(table, 0, "Name", 100);
        dialog.getTableColumn(table, 1, "Type", 125);
        dialog.getTableColumn(table, 2, "Value", 100);
        dialog.getTableColumn(table, 3, "Correlation", 100);
        dialog.getTableColumn(table, 4, "Mode", 68);

        createInitialContents(table);
        dialog.measureItem(table);

        final TableEditor editor = new TableEditor(table);

        final Button addButton = dialog.getPushButton(propertyGroup,"Add", new Rectangle(150, 210, 60, 24));
        final Button deleteButton =dialog.getPushButton(propertyGroup,"Delete", new Rectangle(210, 210, 60, 24));
        final Button okButton = dialog.getPushButton(propertyGroup,"OK", new Rectangle(270, 210, 60, 24));
        final Button cancelButton =dialog.getPushButton(propertyGroup,"Cancel", new Rectangle(330, 210, 60, 24));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:18:24.780

以下代码将通过监听`Resize`事件来强制窗口始终保持屏幕宽度和高度的 80% 的大小。请记住，这种方法将阻止手动调整大小：

```
public class StackOverflow
{
    public static void main(String[] args)
    {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setText("StackOverflow");
        shell.setLayout(new GridLayout(1, true));

        shell.addListener(SWT.Resize, new Listener()
        {
            @Override
            public void handleEvent(Event arg0)
            {
                int[] res = getResolution();
                shell.setSize((int) (res[0] * 0.8), (int) (res[1] * 0.8));
            }
        });

        shell.pack();
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private static int[] getResolution() {
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Dimension dim = toolkit.getScreenSize();

        int[] result = new int[2];
        result[0] = dim.width;
        result[1] = dim.height;

        return result;
    }
} 
```

这种方法使用 AWT 来获得分辨率。获得解决方案的全 SWT 方法是：

```
private static int[] getResolution() {
    Rectangle monitor = Display.getDefault().getPrimaryMonitor().getBounds();

    int[] result = new int[2];
    result[0] = monitor.width;
    result[1] = monitor.height;

    return result;
} 
```

请注意，这种方法考虑的是当前屏幕的屏幕分辨率，而不是桌面的整体大小（使用多屏幕设置时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:03:13.003

If I understand you correctly what you need is a way to know what the current screen resolution is, so that you can proportionally resize the dialog (like 33% width and 50% height, for example).

You can use `Display#getBounds()` to fetch the screen resolution to achieve that:

```
Rectangle screenSize = Display.getCurrent().getBounds();
dialog.setShell(screenSize.width / 3, screenSize.height / 2); 
```

# c# - JSON.Net：反序列化多态类型而不指定程序集

> ID：13598969
> 
> 赞同：6
> 
> 时间：2012-11-28T06:16:40.420
> 
> 标签：c#, json.net

我看到使用 JSON.Net，如果`$type`属性指定 JSON 对象的特定类型，我可以解码多态对象。在我见过的所有示例中，都`$type`包含命名空间。是否可以在没有程序集的情况下仅包括一个简单的类型名称来完成这项工作？如果可能的话，我很乐意为 JsonSerializer 指定一个默认程序集。

我可以使用以下方法反序列化 JSON：

```
public class SingleAssemblyJsonTypeBinder : SerializationBinder
{
    private readonly Assembly _assembly;
    private Dictionary<string, Type> _typesBySimpleName = new Dictionary<string, Type>(StringComparer.OrdinalIgnoreCase); 
    private Dictionary<Type,string> _simpleNameByType = new Dictionary<Type, string>(); 

    public SingleAssemblyJsonTypeBinder(Assembly assembly)
    {
        _assembly = assembly;
        _typesBySimpleName = new Dictionary<string, Type>();

        foreach (var type in _assembly.GetTypes().Where(t => t.IsPublic))
        {
            if (_typesBySimpleName.ContainsKey(type.Name))
                throw new InvalidOperationException("Cannot user PolymorphicBinder on a namespace where multiple public types have same name.");

            _typesBySimpleName[type.Name] = type;
            _simpleNameByType[type] = type.Name;
        }
    }

    public override Type BindToType(string assemblyName, string typeName)
    {
        Type result;
        if (_typesBySimpleName.TryGetValue(typeName.Trim(), out result))
            return result;

        return null;
    }

    public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
    {
        string name;

        if (_simpleNameByType.TryGetValue(serializedType, out name))
        {
            typeName = name;
            assemblyName = null;// _assembly.FullName;
        }
        else
        {
            typeName = null;
            assemblyName = null;
        }
    }
} 
```

...

```
public static JsonSerializerSettings GetJsonSerializationSettings()
{
    var settings = new JsonSerializerSettings();
    settings.Binder = new SingleAssemblyJsonTypeBinder(typeof(MvcApplication).Assembly);
    settings.TypeNameHandling = TypeNameHandling.Objects;
    return settings;
} 
```

...

```
var serializer = JsonSerializer.Create(settings); 
```

不过，我无法使用 MVC 完成这项工作。我正在按照下面的代码配置 JSON 反序列化`Application_Start`，并且对象已反序列化，但使用的是基本类型之一。

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.Binder = new SingleAssemblyJsonTypeBinder(this.GetType().Assembly);
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.All;
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.TypeNameAssemblyFormat = FormatterAssemblyStyle.Simple; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T08:18:12.900

创建一个派生`SerializationBinder`，其中覆盖`BindToName`并设置`out string assemblyName`为 null（**编辑**：或您的默认程序集名称）和`out string typeName`您的条带类型名称

将活页夹设置为`JsonSerializerSettings.Binder`序列化之前。

让我知道这是否不起作用

# vba - 将代码从工作表移动到模块时出现 VBA Excel 错误

> ID：13598979
> 
> 赞同：1
> 
> 时间：2012-11-28T06:17:51.263
> 
> 标签：vba, excel, excel-2007

我有一个带有多个选项卡的 Excel 文件。我有一个工作表，其中包含一些运行良好的代码。此代码还引用了某些“主”选项卡上的数据。我需要复制这张表，所以我将常用功能从那里移到了一个模块中。现在我`1004`在尝试访问同一个工作表上的范围时收到 VBA 错误。

```
 Dim selectedRange As Range
 Set selectedRange = Worksheets(name).Range("A1", _
 Range("A" & Rows.count).End(xlUp)) 'Error Line 
```

这段代码运行良好，直到我将它移到一个模块中。如果我放一个

```
Worksheets(name).Select 
```

在它之前，但我将不得不这样做太多次。基于此查询：[VBA 错误 1004 - 范围类](https://stackoverflow.com/questions/10949893/vba-error-1004-select-method-of-range-class-failed/) 的选择方法失败代码应该可以在没有`.Select`. 只要代码在工作表中，它就可以。为什么将代码移动到模块会产生问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:31:30.910

U 使用**没有对象限定符的 Range 和 Rows 属性**。在没有对象限定符的情况下使用时，此属性是**ActiveSheet.Range / ActiveSheet.Rows 的快捷方式。**

所以代码是这样做的：

```
Worksheets(Name).Range("A1", ActiveSheet.Range("A" & ActiveSheet.Rows.Count).End(xlUp)) 
```

但是 Worksheets(name) 可能与活动工作表不同，所以更好的是：

```
Worksheets(Name).Range("A1", Worksheets(Name).Range("A" & Worksheets(Name).Rows.Count).End(xlUp)) 
```

在 With-End With 块中：

```
With Worksheets(name)
      Set selectedRange = .Range("A1", .Range("A" & .Rows.Count).End(xlUp))
End With 
```

因此可以确保 Range/Rows 属性应用于 Worksheets(name) 工作表对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:31:04.707

当您在工作表上执行操作时，您实际上并不需要对该工作表进行显式声明。

但是，在处理模块并与其他工作表交互时，您需要指定要使用的工作表。因此，在*选择*范围之前*选择*工作表。要说，在选择孩子之前先选择父母 :)*请注意，以下只是逻辑解释。**不是确切的代码语法。*

 **所以我建议您创建以下工作表变量并将您需要的工作表对象设置到其中。

例如

```
Dim WS as Worksheet
Dim selectedRange As Range

Set WS = Sheets("Shee1")
Set selectedRange = WS.Range("A1", _
Range("A" & Rows.count).End(xlUp)) 'Error Line 
```

否则，如果您想引用所有工作表，您可以使用每个工作表的索引

例如`ThisWorkBook.Sheets(i) 'i is an integer` ，然后循环或它认为对您的程序结构的任何内容。

此外，您不必`Select` 在工作表上使用来指向该工作表中的范围。根据上面的代码，您可以设置工作表并设置您需要处理的范围。在优化 VBA 执行时，`select`通常是一个禁忌。此外，Excel 2007 不会像旧版本那样保留活动工作表。**

# dynamics-crm-2011 - 如何更改 MSCRM 2011 的 SSRS fetchXML 报告的日期选择器中的日期格式？

> ID：13598984
> 
> 赞同：0
> 
> 时间：2012-11-28T06:18:01.493
> 
> 标签：dynamics-crm-2011, dynamics-crm, fetchxml

如何更改 MSCRM 2011 的 SSRS fetchXML 报告的日期选择器中的日期格式？

默认情况下，它将日期选择器格式设置为 mm/dd/yyyy。我想更改为 dd/mm/yyyy 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:45:18.670

我用微软检查了这个问题。这是一个微软错误。Microsoft 将在 MSCRM 2011 的未来汇总中修复此错误。

# c# - 在 Datagridview 中使用向下箭头选择组合框项

> ID：13598985
> 
> 赞同：3
> 
> 时间：2012-11-28T06:18:27.613
> 
> 标签：c#, winforms, datagridview

我在 C#`comboxbox`的其中一列中使用 a 。`datagridview`但是，单元格是聚焦的，当我尝试使用箭头 keyz 选择值时，没有选择这些值。

任何想法，如果我错过了什么。我是否需要实例化任何事件才能通过箭头键选择项目。

附件是我的 GUI 的屏幕截图。

![在此处输入图像描述](../Images/2ebbc09b25ada0d255dfdad85ca76982.png)

谢谢基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:10:17.467

您`datagridview`应该在 中`EditMode`，因此，您可以在 gridview 中更改您的组合选择。

# weblogic - weblogic 热部署适用于 jsps 但不适用于 web-inf/classes

> ID：13598989
> 
> 赞同：1
> 
> 时间：2012-11-28T06:18:40.437
> 
> 标签：weblogic, weblogic-10.x, hotdeploy

我正在 weblogic 10.3 中以展开格式部署一个耳朵应用程序，启用了快速交换并处于开发模式。该 ear 文件包含一个也是分解格式的 Web 应用程序。对 Web 应用程序中的 jsps 所做的更改正在重新加载。但是 web-inf 下的类在更改时不会重新加载。

下面给出了 weblogic 部署配置。ear/META-INF 中的 weblogic-application.xml 内容

```
<wls:fast-swap>
    <wls:enabled>true</wls:enabled>
    <wls:refresh-interval>10</wls:refresh-interval>
    </wls:fast-swap>
<wls:classloader-structure>
        <wls:classloader-structure>
            <wls:module-ref>
                <wls:module-uri>web.war</wls:module-uri>
            </wls:module-ref>
        </wls:classloader-structure>  
</wls:classloader-structure> 
```

ear/META-INF 中的 application.xml 内容

```
 <display-name>web-ear</display-name>
  <module>
    <web>
      <web-uri>web.war</web-uri>
      <context-root>/web</context-root>
    </web>
  </module>
  <library-directory>lib</library-directory> 
```

war/WEB-INF 中的 weblogic.xml 内容

```
<wls:fast-swap>
        <wls:enabled>true</wls:enabled>
        <wls:refresh-interval>10</wls:refresh-interval>
</wls:fast-swap>

<wls:context-root>/web</wls:context-root>
<wls:session-descriptor>
        <wls:cookie-max-age-secs>-1</wls:cookie-max-age-secs>
        <wls:cookie-name>JSESSIONID_SQE_AAI</wls:cookie-name>
        <wls:cookie-path>/</wls:cookie-path>
        <wls:cookies-enabled>true</wls:cookies-enabled>
        <wls:invalidation-interval-secs>120</wls:invalidation-interval-secs>
        <wls:id-length>52</wls:id-length>
        <wls:timeout-secs>7200</wls:timeout-secs>
        <wls:url-rewriting-enabled>true</wls:url-rewriting-enabled>
        <wls:persistent-store-type>memory</wls:persistent-store-type>
        <wls:http-proxy-caching-of-cookies>false</wls:http-proxy-caching-of-cookies>
    </wls:session-descriptor>
    <wls:jsp-descriptor>
        <wls:page-check-seconds>6</wls:page-check-seconds>
    </wls:jsp-descriptor>
<wls:container-descriptor>
    <wls:servlet-reload-check-secs>6</wls:servlet-reload-check-secs>
    <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
</wls:container-descriptor> 
```

上面的配置对吗？是否有任何我错过的配置细节包括在这里？我应该检查哪些其他设置或配置？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:54:09.713

即使您在应用程序中启用了 FastSwap，在类加载器结构中声明的模块也不会支持 FastSwap，因为它们不是由 RedefiningClassLoader 加载的，而是由 GenericClassLoader 加载的。您可以通过在 WEB-INF/classes 下打印类的类加载器来测试它，并检查它是否是 com.bea.wls.redef.RedefiningClassLoader。

我努力让它们一起工作，您可以在此处查看更多详细信息[https://forums.oracle.com/forums/thread.jspa?threadID=2476484&tstart=60](https://forums.oracle.com/forums/thread.jspa?threadID=2476484&tstart=60)但不幸的是，到目前为止还没有解决方案。

问候。

# c# - 过滤掉 Linq 查询

> ID：13598991
> 
> 赞同：0
> 
> 时间：2012-11-28T06:19:01.483
> 
> 标签：c#, linq

我有 List List courseTakenList。我想过滤掉`Completed,Dropped,Current,Schudeled`. 这是代码示例。

```
courseTakenList = (from courseTaken in courseTakenList
                      select new Course
                      {
                           Status = "Scheduled"?"COMPLETE"?"Dropped"? "Current"
                      }).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:24:45.377

你可以做得更简洁

```
var statuslist= {"Completed","Dropped","Current","Schudeled"};

var courses = courseTakenList.Where(courseTaken => 
                       statuslist.Contains(courseTaken.Status); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:23:31.417

`Linq In`像这样的查询将解决您的问题

```
var statuslist= {"Completed","Dropped","Current","Schudeled"};

var query = from courseTaken in courseTakenList
            where statuslist.Contains( courseTaken .Status )
            select courseTaken ; 
```

**注意**：根据需要更改选择子句

# asp.net-mvc - MVC 上传 csv 文件在 IIS 5.1 中不起作用

> ID：13598992
> 
> 赞同：0
> 
> 时间：2012-11-28T06:19:05.733
> 
> 标签：asp.net-mvc

我目前正在使用来自以下网站的代码：http: [//arranmaclean.wordpress.com/2010/07/20/net-mvc-upload-a-csv-file-to-database-with-bulk-upload/#评论 188](http://arranmaclean.wordpress.com/2010/07/20/net-mvc-upload-a-csv-file-to-database-with-bulk-upload/#comment-188)

问题是上传在 IIS 5.1 (.net framework 4) 中不起作用，但在 IIS 7.5 (.net framework 4) 中起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:55:10.500

问题是该文件夹不可访问。感谢 Darin Dimitrov 的帮助

# hudson - 在 hudson 中运行脚本时，Putty 不会缓存访问服务器的密钥

> ID：13598996
> 
> 赞同：39
> 
> 时间：2012-11-28T06:19:31.007
> 
> 标签：hudson, key, putty, host

我编写了一个简单的自动化过程，需要通过 SSH 将一些文件从 linux 服务器复制到 windows。这可以使用腻子来完成。

SSH 作为协议的一部分，会验证主机的身份，如果不知道是否正确，会提示您接受主机的身份。当我使用 putty 手动连接 linux 服务器时，它不会提示任何信息来接受主机的身份。但是一旦我把这个自动化过程作为计划工作放到 Hudson 中。确切的信息是：

> 服务器的主机密钥未缓存在注册表中。您无法保证服务器就是您认为的计算机。服务器的 rsa2 密钥指纹为：ssh-rsa 1024 cc:78:13:a3:68:a6:59:7e:b8:23:2d:13:3e:66:9b:b9 如果信任此主机，请输入“ y" 将密钥添加到 PuTTY 的缓存中并继续连接。如果您只想进行一次连接，而不将密钥添加到缓存中，请输入“n”。如果您不信任此主机，请按 Return 放弃连接。将密钥存储在缓存中？(y/n) 已放弃连接。

通常你会在这里点击“Y”，假设主机密钥是正确的，以便在将来的连接中存储它。此存储进入 HKEY_CURRENT_USER\Software\SimonTatham\Putty\SshHostKeys 下的注册表

但不幸的是，在 Hudson 中运行的自动化进程无法通过点击“Y”将主机密钥存储在 putty 缓存中进行交互。而且我无法通过简单地在 dos 命令下运行自动化过程来重现该问题。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-29T01:54:06.260

```
echo y | pscp -i /path/to/key/file user@remote:/tmp/file  .
echo y | plink -i /path/to/key/file scripts.sh 
```

它将第一次将主机密钥指纹存储到以下位置，下次将忽略“y”

```
HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\SshHostKeys 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-11T16:03:30.110

对于内部服务器，盲目的`echo y | ...`把戏可能就足够了（而且超级简单）。

但是，对于通过 Internet 访问的外部服务器，接受一次服务器主机密钥比每次都盲目接受要安全得多。

* * *

创建可以在客户端计算机上运行的 .reg 文件。

*   从任何机器交互式连接`plink ...`
*   验证并接受主机密钥
*   打开`regedit`
*   导航`HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\SshHostKeys`
*   右键单击条目（将具有类似的名称`rsa2@<port>:<address>`）
*   导出到 .reg 文件

* * *

在客户端机器上缓存主机密钥

*   在将连接到该服务器的任何客户端计算机上运行 .reg 文件
*   确保使用将运行的用户帐户登录`plink`（即如果它是服务帐户）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-07-22T15:32:10.570

使用使用本地系统帐户的批处理调度程序时，我也遇到了这个问题。使用此帐户，您无法登录以接受主机密钥或手动设置`HKEY_CURRENT_USER`值。我发现创建以下密钥：

```
HKEY_USERS\.DEFAULT\Software\SimonTatham\PuTTY\SshHostkeys 
```

并在此处添加主机字符串值适用于本地系统帐户。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-12-02T18:38:02.563

自 2014 年 9 月 9 日起使用相应版本的 plink（使用 plink 0.66 测试），您可以使用 -hostkey 选项，如此处所述：

[http://www.chiark.greenend.org.uk/~sgtatham/putty/wishlist/accept-host-keys.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/wishlist/accept-host-keys.html)

使用原始问题中的密钥：

```
plink -hostkey cc:78:13:a3:68:a6:59:7e:b8:23:2d:13:3e:66:9b:b9 user@remote 
```

我在脚本中成功使用了“-hostkey”来解决初始主机密钥提示问题。

“-hostkey”也被记录为与 pscp（版本 0.66）一起使用。

请注意，如果您更改主机或 sshd 服务器重新计算密钥，则必须更改主机密钥。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-29T13:20:46.833

```
echo y | plink -ssh <username@remotemachine> -pw <password> exit
plink -ssh <username@remotemachine> -pw <password> [yourcommand] 
```

说明：使用 echo 管道，用户输入 'y' 到选定的命令，然后退出。然后，下一条语句将再次调用 plink 可执行文件来运行您的命令。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-01T23:32:53.570

我在使用[Bazaar](http://bazaar.canonical.com/en/)时遇到了这个问题，并手动将我的 ssh 客户端设置为 putty 而不是内置的 paramiko，我遇到了完全相同的问题，它试图说密钥不在“已知主机”中并询问我是否应该验证它，但由于它是由不同的程序而不是在普通终端中运行的，所以它立即退出了。

如果可以，只需运行 putty 并手动连接到服务器以使其将 ssh 公钥保存在注册表中，这样当自动化程序尝试连接时，它就不会显示 y/n 选项。

或者您可以使用我编写的一个小型 python3 脚本在 putty 和 openssh 使用的两种“已知主机”格式之间进行转换：[https ://github.com/mbrandi/openssh-putty-knownhost-converter](https://github.com/mgrandi/openssh-putty-knownhost-converter)

`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-10T09:18:42.193

[正如评论中所说，我的答案与@Clay](https://stackoverflow.com/q/13598996/850848#20524017)的第一个答案非常相似，因为它指的是特定案例（GIT）并且它更短一些，所以我会放手。

当`GIT_SSH="path_to_plink.exe"`使用 Putty 作为 SSH 客户端时，验证服务器一次的步骤是强制性的，否则当 Putty 要求交互式 'y' 输入时你会卡住：

1.  从命令行运行 plink：`plink <serverName>`

2.  验证将密钥存储在缓存中的第一个提示

3.  退出命令`Ctrl+c`

现在，您运行命令的客户端将不再提示进行指纹验证。

*Putty 使用注册表而不是文件`<...>\.ssh\known_hosts`，因此您可以通过导出/导入注册表项来配置另一个主机`Computer\HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\SshHostKeys`。由于此键引用当前用户，因此您需要在以运行 GIT 命令的用户身份登录时导入。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-16T07:41:39.950

从 Windows PowerShell 以管理员模式运行

```
pscp -i /path/to/private_key source_file user@ip:/home/location 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-07-02T16:42:37.890

它一直工作得很好

```
pscp file user@dest: 
```

但后来我得到了同样的错误。所以我做了：

```
pscp -l USERNAME -pw PASSWORD FILE 10.1.1.1: 
```

这对我有用。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-08-16T09:46:49.817

**通过代码解决方案：编译 putty/plink 以自动接受和存储 ssh 密钥**

系统会提示您将 SSH 主机密钥存储在缓存中，由于执行 plink 的用户帐户在注册表中没有主机，因此它挂起，因为它等待回复（是/否..）。
如果您想通过代码解决此问题，请获取 putty 源代码，进行一些更改，编译并使用新的 plink 二进制文件 - 一个在没有提示的情况下存储 ssh 主机密钥的二进制文件。
怎么做 ？对于 Windows，我执行以下操作：

*   下载最新的 putty 源代码： [https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)
    （寻找“Source code”部分并下载“Windows Source archive”）
    **注意**：打开putty使用 Visual Studio 的源代码，您必须下载**发布版本**，如果您签出到特定的提交（或头），则 Visual Studio 解决方案文件将不存在，因为它们是在构建期间创建的。
    取自：[由于缺少 Windows/MSVC 子目录，无法在 Windows 上编译 PuTTY、Plink 或 Pscp](https://stackoverflow.com/questions/45658776/cannot-compile-putty-plink-or-pscp-on-windows-due-to-missing-windows-msvc-subdi)

*   源码需要更新，我们要修改的是wincons.c中的verify_ssh_host_key(..)函数，我们要注释掉提示yes/no的代码部分，只存储key，开始注释掉提示代码：

    ```
    /*hin = GetStdHandle(STD_INPUT_HANDLE);
    GetConsoleMode(hin, &savemode);
    SetConsoleMode(hin, (savemode | ENABLE_ECHO_INPUT |
             ENABLE_PROCESSED_INPUT | ENABLE_LINE_INPUT));
    ReadFile(hin, line, sizeof(line) - 1, &i, NULL);
    SetConsoleMode(hin, savemode);

    if (line[0] != '\0' && line[0] != '\r' && line[0] != '\n') {
    if (line[0] == 'y' || line[0] == 'Y')
    store_host_key(host, port, keytype, keystr);
    return 1;
    } else {
      fprintf(stderr, abandoned);
      return 0;
    }*/ 
    ```

继续添加以下行（负责存储主机密钥的代码）：

```
store_host_key(host, port, keytype, keystr);
return 1; 
```

编译解决方案并采用 plink/pscp .. 无需提示即可，它接受 ssh 主机密钥并将其存储在注册表中。