# StackOverflow 问答 14945000-14945999

# typo3 - TYPO3：手动安装后端语言

> ID：14945000
> 
> 赞同：2
> 
> 时间：2013-02-18T20:46:46.057
> 
> 标签：typo3

有没有办法手动安装 TYPO3（版本 6.0）的后端语言（不连接到存储库）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:05:21.000

理论上，是的。您*应该能够*从[TYPO3 翻译服务器](http://translation.typo3.org/)`typo3conf/l10n/<languagekey>`下载翻译后的语言文件（XLIFF 格式）并在您的目录中手动解聚它们。

或者，您可以设置第二个 TYPO3 实例，从存储库下载翻译文件，然后将整个`typo3conf/l10n`目录部署到您的其他站点。

# django - Django admin：根据其他内联更新内联

> ID：14945001
> 
> 赞同：6
> 
> 时间：2013-02-18T20:46:47.493
> 
> 标签：django, django-forms, django-admin

你好，

在管理面板中，我创建了用于添加产品的表单。表单包括 2 个内联表单集，因为有一些与产品相关的模型。用户可以创建产品，然后定义该产品的不同属性的变体。我将举例说明这一点。用户拥有一个品牌的 3 种不同颜色的 T 恤，并希望以不同的价格添加它们。T 恤被创建为具有 3 种变化的产品。

```
class Detail(models.Model):
    product = models.ForeignKey('Product')
    attribute = models.ForeignKey('Attribute')
    value = models.CharField(max_length=500)

class Attribute(models.Model):
    name = models.CharField(max_length=300)

class Variant(models.Model):
    product = models.ForeignKey(Product)
    details = models.ManyToManyField(Detail)
    quantity = models.IntegerField()
    price = models.DecimalField(max_digits=6, decimal_places=2) 
```

我省略了 Product，因为它无关紧要。

```
class DetailInline(admin.TabularInline):
    model = Detail

class VariantInline(admin.StackedInline):
    model = Variant

class ProductAdmin(admin.ModelAdmin):
    class Meta:
        model = Product

    inlines = [DetailInline, VariantInline] 
```

这很好用，模型保存得很好，我对 Variants inline 有问题。内联变体显示 Detail 对象，但仅显示已保存在数据库中的对象。为了使用户的生活更轻松，最好在创建 Detail 对象时将 Detail 对象添加到 Variant inline，因此必须在保存 Product 之前发生。

*   有没有办法用值手动刷新内联？
*   有没有可以用来创建 Detail 对象而不是 Product 并返回结果的中间保存？
*   模型应该重新设计吗？（我真的不想这样做，除非我必须这样做）
*   用户是否需要遵循不同的工作流程来添加产品？

我曾尝试使用 js 将条目注入内联，但这是 hackish 并且 Django 没有验证带有假值的表单集，抛出错误，即选择了错误的值。

在我写这个问题时，我想到的最后想法。可以创建 js，以防万一对象的内联形式发生更改，会将数据传递给自定义视图，该视图将创建对象并返回结果。我看到的一个问题（除了感觉不对）是如何通知 django 创建了新对象，这样它就不会引发关于不存在值的错误。

无论如何，我希望有人能理解这个冗长的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:46:49.353

想到的一件事是[Knockout.js](http://knockoutjs.com/)。

它非常擅长同时更新 DOM 中的大量元素，并且您可以使用来自客户端事件的 Ajax 调用轻松地将新值推送回您的自定义视图。

有几个框架可以做到这一点，但我认为 Knockout 是 Backbone、Angular、Ember 等最受欢迎的框架中更容易阅读和实现的框架之一。

Django 通常会抱怨动态添加的选项，但只要在验证表单时它们存在于服务器端，*理论上*你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:30:36.020

我决定放弃这个想法，因为它已经花费了很多时间，而且可能需要更多时间。此外，我想出的是相当讨厌的黑客攻击而不是编码。但是，与其把这个挂在这里，我会向其他人发布任何提示。

我有两个不同模型作为内联表单集的模型，它们都有主模型的外键，其中一个有另一个外键。想法是根据用户输入的值在内联之一中创建虚假条目。正如它所代表的那样，使用与 Django 一起提供的 jQuery 非常容易。所以我做了，但 Django 当然知道这个模型不存在。解决方案是创建我自己的表单和字段并覆盖 clean() 方法，就像我在[这里](https://stackoverflow.com/questions/15010668/django-admin-baseinlineformset-validation-after-post)所做的那样。

这导致了许多问题，其中一部分是我的模型相互依赖，并且必须稍微削减字段的 clean() 方法才能不检查 db 对象的存在。除此之外，在字段验证阶段缺少有关 POST 数据的信息，因此必须覆盖表单的 clean() 方法，因为有已发布的数据。然而它是不干净的，因此必须从 POST dict 中提取并验证。此时我决定停止，因为它越来越复杂，可能导致数据不一致。我猜下一步将覆盖 ModelAdmin 的保存方法，因为创建的对象不在与 formset 绑定的查询集中，除非在某个地方可以完成它。

总结一下，我不得不说，在这一点上，我永远不会这样做，而是使用我自己的 change_form 视图来更好地控制数据流。

tl;博士

创建自定义视图 change_form。

# javascript - 在 textarea 中输入的显示文本总是落后一步

> ID：14945003
> 
> 赞同：0
> 
> 时间：2013-02-18T20:46:49.573
> 
> 标签：javascript, html

我有一个表单中的文本区域。键入文本`<p>`时，文本区域中的字符数以及字符数都会显示。问题是没有感知到第一个字符。所以当我输入第一个字符时，剩余的字符仍然是 75，并且字符没有显示在`<p>.`当我输入“abc”时，只显示“ab”，剩余的字符是 73 而不是 72。之后我删除了"c" 从末尾开始，然后 "abc" 显示在`<p>`. 就好像它总是落后一步一样。

一个简单`<input type="text">`的它工作正常。

```
<textarea  name="text" cols="56" rows="2" onKeyDown="drawAd();" onKeyUp="drawAd();" onFocus="drawAd();" maxlength="75" >
  <?php echo $text?>
</textarea>

function drawAd() 
{
    var draw_adtext = document.forms["MyForm"]["adtext"].value;
    var adtext = document.getElementById('p_adtext');
    var adtext2 = document.getElementById('p_adtext2');
    if (draw_adtext != "") {
        adtext.innerHTML = draw_adtext;
        adtext2.innerHTML = draw_adtext;
    } else {
        adtext.innerHTML = "";
        adtext2.innerHTML = "";
    }

   document.getElementById('textcount').innerHTML = 75 - document.forms["MyForm"]["adtext"].value.length + " chars left";
} 
```

Ps：我知道 `maxlength`不是 textarea 的官方属性，我知道如何处理它（以防万一有人注意到它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:50:59.500

您提供的代码无法正常运行（它指的是不存在的表单等）。但是我在 jsfiddle.net/v2eHk/ 上重新创建了它，据我所知，它工作得很好。是否有更多关于如何让问题发生的信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:51:38.390

不幸的是，事实证明，我的问题过于本地化。感谢您在 jsfiddle 上尝试我的代码，我没想过只在空白网页上尝试这部分。

我在标签之后有这段代码，它把一切都搞砸了。删除它解决了这个问题。

```
<script>
window.onload = function() { 
  var txts = document.getElementsByTagName('TEXTAREA') 

  for(var i = 0, l = txts.length; i < l; i++) {
    if(/^[0-9]+$/.test(txts[i].getAttribute("maxlength"))) { 
      var func = function() { 
        var len = parseInt(this.getAttribute("maxlength"), 10); 

        if(this.value.length > len) { 
          //alert('Maximum length exceeded: ' + len); 
          this.value = this.value.substr(0, len); 
          return false; 
        } 
      }

      txts[i].onkeyup = func;
      txts[i].onblur = func;
    } 
  } 
}
</script> 
```

我认为解决这个问题我不应该得到任何分数，但我接受它作为结束这个问题的解决方案。

# java - Java RMI 是 Axis2 SOAP 的良好替代品吗？

> ID：14945014
> 
> 赞同：0
> 
> 时间：2013-02-18T20:47:58.750
> 
> 标签：java, jakarta-ee, axis2, rmi, xml-rpc

如果服务器和客户端都只是 Java，那么与 Axis2 实现的 SOAP 相比，RMI 会更有效（带宽和延迟）吗？我知道 RMI 在最近几年已经不受欢迎了，但这并不意味着它不能被使用。

那么 XML-RPC 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:29:25.923

RMI 有一些有趣的特性并且相当快，但也有一些问题：

1.  你必须确保你序列化的所有东西都实现了 Serializable。
2.  您必须确保服务器和客户端具有完全相同版本的所有 Serializable 类，并且在完全相同的时间部署，并且您序列化的每个类（包括可序列化对象持有的字段）都正确使用 serialVersionUID。否则你将陷入痛苦的世界（阅读：“系列版本不匹配”）。
3.  您必须确保您序列化的类不持有对最终持有对大对象的引用的对象的引用，否则您会对通过网络传输的数据包的大小感到非常惊讶。
4.  如果您决定从除 Java 之外的任何方式访问该服务，您将不得不编写另一个远程访问层。
5.  没有#5。

在实践中，这些天我几乎总是推荐 REST 服务。创建小型 Java 对象并使用 Gson 或 Jackson 或其他东西来来回编组数据非常容易，相比之下，RMI 的优势微乎其微。

# python - 在函数最小化期间 确保参数“总和为一”的方法

> ID：14945019
> 
> 赞同：0
> 
> 时间：2013-02-18T20:48:24.330
> 
> 标签：python, minimization, chi-squared

我正在尝试执行最小化，其中某些参数必须使用[PyMinuit](http://code.google.com/p/pyminuit/)总和为一个。我想知道是否有实现这种事情的标准方法？

如果不满足约束，是否通常将函数设置为某个较大的值？例如

```
def f(params):
    if params.sum() != 1:
        return 1e6
    else:
        ... compute actual value ... 
```

对每一轮的参数进行标准化是一个非常糟糕的主意吗？例如

```
if params.sum() != 1:
    for param in params:
        param = param / params.sum() 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:27:42.747

我认为您可能想要更改某些内容，以便将约束纳入您的最小化。如果没有关于你在做什么的更多细节，确切地说，我会尝试引入一个[Lagrange multiplier](http://en.wikipedia.org/wiki/Lagrange_multiplier)。在大一的微积分课程中这是很常见的事情，所以你应该能够在网上找到很多例子。

PS：你使用 PyMinuit 是因为你在做粒子物理学吗？

# regex - 关于理解正则表达式示例

> ID：14945022
> 
> 赞同：1
> 
> 时间：2013-02-18T20:48:27.093
> 
> 标签：regex

我曾经将以下正则表达式示例读为

```
average\(([^\)]*)\) 
```

这代表什么？或者换句话说，如何理解这个正则表达式结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:53:59.930

[^)] 表示除 ) 以外的任何字符

字符 * 表示最终重复

() 匹配自己

\(...\) 标识稍后要访问的表达式的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:55:24.560

您的正则表达式匹配：

```
average(what%ever&is&not_containingAAAAAAAAAclosingParenthese) 
```

此外，非转义括号通常描述一个*group*，它是您可能想要提取的正则表达式的一部分。

如果您有以下文字

```
This boy entered a pub and average(Hello I'm the group) ordered a beer. 
```

您的正则表达式将匹配

```
average(Hello I'm the group) 
```

部分。一旦匹配，您可以提取

```
Hello I'm the group 
```

因为你是正则表达式定义了一个组：

```
([^\)]*) 
```

**解释：**

( ) [ ] * ^ 是关于正则表达式的特殊字符，但您可以使用反斜杠 \ 将它们转义以将它们用作字符本身。

[^)] ：匹配任何不是右括号的字符的字符类。[^)]* ：匹配来自此类的未定义数量 (0..n) 的字符。

希望对你有帮助，不知道够不够清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:57:29.820

有一些网站是理解和学习正则表达式的绝佳资源。只需粘贴您的正则表达式并给出解释。

我最喜欢的是[regexper.com](http://regexper.com)：

![在此处输入图像描述](../Images/fc4a4a80d1fcd25d63c163591ec20dbb.png)

还有[regex101.com](http://regex101.com)，它为您逐个解释正在发生的事情，并在底部提供方便的参考：

![在此处输入图像描述](../Images/addc30b669e134db34a0a858e1a98259.png)

# python - 2 选择事件 2 颜色条

> ID：14945025
> 
> 赞同：0
> 
> 时间：2013-02-18T20:48:48.587
> 
> 标签：python, matplotlib, wxpython

我有 2 个颜色条，我希望它们都有不同的pickevents 我该怎么做？我的代码自动取款机是

```
 x_ax.set_picker(5)##colorbar set picker

def on_pick(event):
    artist = event.artist
    val = event.mouseevent.ydata
    xal = event.mouseevent.xdata
    if highlight == 1 :
        print 'hello'
        global highlight
        highlight = 0
        self.canvas.draw()
    if highlight == 0 :
        highlight = 2
        trans = transforms.blended_transform_factory(self.ax.transAxes,self.ax.transData )
        rect = patches.Rectangle((0,1),width=5, height=5, transform=trans, color='yellow',alpha=0.5)
        self.ax.add_patch(rect)
        self.canvas.draw()
        rect.remove()

    else:
        self.canvas.draw()
        trans = transforms.blended_transform_factory(self.ax.transAxes,self.ax.transData )
        rect = patches.Rectangle((0,10),width=25, height=25, transform=trans, color='yellow',alpha=0.5)
        self.ax.add_patch(rect)
        highlight = 1

        self.canvas.draw()
        rect.remove()

self.canvas = FigureCanvas(self, -1, self.fig)
self.canvas.mpl_connect('pick_event',on_pick) 
```

我尝试添加`x2_ax.setpicker(5)`， `self.canvas.mpl.connect('pick_event', on_click)` 但是当您单击任一颜色栏时，它似乎都同时执行了

我的 on_pick 只是突出显示图表上的一个部分

如何为每个颜色条添加单独的选择事件？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:14:49.303

您将 pick 事件连接到`canvas`并且每个`canvas`. 您需要添加代码`on_pick`来判断它正在处理的艺术家。您可以使用闭包来做到这一点，一种稍微简单/不太优雅的方法是简单地将 a 添加`label`到您的轴上

```
x_ax.set_label('x')
y_ax.set_label('y') 
```

然后在你的`on_pick`

```
def on_pick(event):
    #some code here
    art = event.artist
    if isinstance(art, matplotlib.axes.Axes):
        # the artist is as axes
        if art.get_label() == 'x':
            # do one thing
            pass
        elif art.get_label() == 'y':
            # do another thing
            pass 
```

您可以通过使用标签和函数作为值进行键控来做得更好`dict`，特别是如果您最终有许多标签艺术家。

# linux - 数据库备份未写入磁盘，空间不足？

> ID：14945026
> 
> 赞同：0
> 
> 时间：2013-02-18T20:48:49.087
> 
> 标签：linux, unix, db2, aix, system-administration

我刚刚继承了一个我知之甚少的 AIX 项目。我有一个 cronjob 已经失败了几天，它对我的​​数据库（db2）进行了完整备份。查看日志，我看到了这个：

```
SQL2419N  The target disk "/home/dbtmp/backups" has become full. 
```

签出此目录时：

```
(/var/spool/cron)> df -g /home/dbtmp
Filesystem    GB blocks      Free %Used    Iused %Iused Mounted on
/dev/dbtmplv      10.00      0.96   91%       85     1% /home/dbtmp 
```

以前备份的大小：

```
(/var/spool/cron)> ll /home/dbtmp/backups
total 18365248
-rw-------    1 hsprd    cics     4411498496 Feb 12 18:01 HSPRD.0.hsprd.NODE0000.CATN0000.20130212180036.001
-rw-------    1 hstrn    cics      874287104 Feb 12 18:08 HSTRN.0.hstrn.NODE0000.CATN0000.20130212180747.001
-rw-------    1 hstst    cics     3242835968 Feb 12 18:05 HSTST.0.hstst.NODE0000.CATN0000.20130212180443.001 
```

我有什么选择来解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:56:06.870

如您所见，备份文件的大小超过了设备上的可用空间。您需要更大的设备。

# c++ - 使用不同类中的类对象获取不正确的数据

> ID：14945032
> 
> 赞同：0
> 
> 时间：2013-02-18T20:49:26.470
> 
> 标签：c++

嘿伙计们，我在这里使用两个类编写了一个贷款程序。我从我的 LoanOfficer 类中的“MortCalc”类中声明了一个对象。信贷员类是确定用户是否有资格获得贷款，用户输入贷款本金、月收入和月支出。然后，贷款官员类会进行计算并向用户报告贷款是否使用一条规则获得批准。规则是这样的：如果贷款的每月还款额（从我的 MortCalc 课程中获得）和每月费用总额大于月收入的 50%，则贷款不获批准。我遇到的问题是计算这个。我尝试将计算存储在“规则”变量中，但它始终等于 100，因此永远不会批准贷款！显然我在这里做错了什么，但我不知道是什么。

**贷款官.h**

```
class LoanOfficer
{
//private class variables
private:
MortCalc mc;
double intRate;
double monthlyIncome;
double term;
double monExpenses, principal;
double rule;
bool bLoanApprove, bOpen;
string userName, fileName,lenderName;
string loanOfficer, Welcome;
int counter;
void calculate(); 
```

**贷款官.cpp**

```
LoanOfficer::LoanOfficer()
{
//initializing variables;
intRate = 4.1;
term = 30;
counter=1;
principal=0;
lenderName="John's Bank";
Welcome ="";
calculate();
}
void LoanOfficer::calculate()
{

rule = ((mc.GetMonPymt() + monExpenses) / monthlyIncome)* 100;
    //i have a getter in my Mortcalc class which get's the monthly Payment.

}
bool LoanOfficer::isApproved()
{
if(rule>50)
{
    bLoanApprove = true;
}
else{
    bLoanApprove = false;
}
return bLoanApprove;
}
string LoanOfficer::getApproval()
 {
if(bLoanApprove==true)
{
  stringstream ss;
        ss<<"\n\nLoan Approval Status: Yes"
        <<"\nLoan amount: "
        <<principal
        <<"\nInterest Rate: "
        <<intRate
        <<"\nMonthly Payment: "
        <<monPayment
        <<"\nTotalLoan: "
        <<mc.GetTotalLoan()
        <<"\nTotal Interest"
        <<mc.GetTotalInt()
        <<"\n\nCongratulations We're looking to do business with you "
        <<userName<<"!";
    loanOfficer = ss.str();
}
else
{
    stringstream ss;
    ss<<"\n\nLoan Approval Status: No"
       <<"\n\n  Income vs Montly Payment and expenses does not meet "
       <<"\n  the 50% criteria net income that is necessary for this"
       <<"\n  institution to approve this loan";
    loanOfficer = ss.str();
}

return loanOfficer;
}
void LoanOfficer::setPrincipal(double p)
{
mc.setPrin(p);
principal = p;
}
bool LoanOfficer::isOpen()
{
return bOpen;
}
void LoanOfficer::setMonInc(double mi)
{
monthlyIncome = mi;
}
void LoanOfficer::setExpenses(double ex)
{
monExpenses = ex;
}

void LoanOfficer::setAppName(string n)
{
userName = n;
 }
string LoanOfficer::getFilename()
{
return fileName;
}
string LoanOfficer::getIntro()
{
stringstream ss;
    ss<<"Hi Welcome to " <<lenderName
    <<"\n Please enter your information below to see if you're approved for a loan."
    <<"\nWe have a fixed interest rate of 4.1 and term of loan is 30 years."
            <<"\nThe way we determine our loan approvals is by adding 
                loan payment and monthly expenses,"
            <<"\nand that is greater than 50% of your monthly income the loan 
                is notapproved.\n\n";
    Welcome = ss.str();
return Welcome;
}

void LoanOfficer::writeStatus()
{

stringstream ss;

    ss<<userName<<"_"<<counter<<".txt";
    fileName = ss.str();

    ofstream receiptOut;
    receiptOut.open(fileName.c_str());

//Writing report setting precision to 2 decimal places
//returning true if able to write receipt.
    receiptOut<<" CUSTOMER LOAN INFORMATION " 
        <<month+1<<"/"<<day<<"/"<<year+1900<<"\n\n"
        <<"********************************"
        <<"\n Your Loan Information: "
        << "\n\n Principal: "<<"$" << fixed << setprecision (2) 
        << principal
        << "\n\n Interest rate: "<< fixed << setprecision (2) 
        << intRate << "%"
        << "\n\n Monthly Payment: "<<"$" << fixed << setprecision (2) 
        << mc.GetMonPymt()
                    //here it obtains the correct monthly payment. I've checked through
                    //debugging.

        << "\n\n Total Interest paid: " <<"$"<< fixed << setprecision (2) 
        << mc.GetTotalInt()
        <<"\n\n Total Cost of the Loan: "<<"$" << fixed << setprecision (2) 
        << mc.GetTotalLoan()
        <<"\n*********************************"
        <<"\n\n\nThank You for using my calculator. Have a Nice Day."
        <<"\n****************************************************";
        receiptOut.close();
        counter++;
        } 
```

**主文件**

```
double principal,monthlyIncome,monthlyExpenses;
string name, answer;
string fAnswer
//class object
LoanOfficer lo;

cout<<lo.getIntro();

cout<<"Please enter your name: ";
cin>>name;

//passing name to setName class method.
lo.setAppName(name);

//start of do loop
do
{
    //presenting the user a menu accessed from otherFunctions.cpp
    //checking which choice user entered with switch statements
      cout<<"\nPlease enter the amount you want to borrow: ";
       cin>>principal;
       cin.ignore();
       lo.setPrincipal(principal);
    cout<<"\nPlease enter your monthly income after taxes: ";
        cin>>monthlyIncome;
        cin.ignore();
        lo.setMonInc(monthlyIncome);
    cout<<"\nPlease enter your monthly expenses: ";
        cin>>monthlyExpenses;
        cin.ignore();
        lo.setExpenses(monthlyExpenses);
  cout<<lo.getApproval();

cout<<"\n\n Would you like to write a file? Enter y for yes and n for no\n";
        cin>>fAnswer;
        if(fAnswer =="y")
        {
            lo.writeStatus();
            cout<<"\n\nReport is located in: "
                <<lo.getFilename();
        }
        else
        {
            cout<<"\n\nNo report printed out.";
        }
    //ask if user would like to do another
cout<<"\n\nWould you like to do another loan? Enter y for yes and n for no\n";
    cin>>answer;
    cout<<"\n";
}while(answer =="y");
//end do/while

//Goodbye message
    {
    cout <<"\n Thanks for calculating. Goodbye!\n\n"; //when loop is done
    }

return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:33:42.853

改变*业务逻辑！*
你**的想法与你的认识相矛盾**。
让我们仔细看看你的问题中的这个陈述：“规则是这样的：如果贷款的每月支付（从我的 MortCalc 课程中获得）和每月支出总额大于每月收入的 50%，那么贷款未获批准。”并在您的代码中找到实现此业务逻辑的位置，这里是：

```
bool LoanOfficer::isApproved()
{
if(rule>50)
{
    bLoanApprove = true;
}
else{
    bLoanApprove = false;
} 
```

从代码提取中可以很容易地发现它与您的业务逻辑相矛盾。
**解决方案：**

```
bool LoanOfficer::isApproved()
    {
    if(rule>50)
    {
        return false;
    }
    return true; 
```

# python - 在 Python 中保存文件时，我将连接的文件路径放在哪里？

> ID：14945038
> 
> 赞同：1
> 
> 时间：2013-02-18T20:49:41.850
> 
> 标签：python, path, save

我正在尝试将图像保存到特定文件夹，但我不知道将路径放在哪里。`savename`在我的路径的尽头是一个变量。

相关代码：

```
for vv in object_pixel_value_list:
    hollowmask = Image.eval(mask,lambda i: findpixels(i, pixval=vv))
    blackmask = Image.eval(mask,makeblack)
    complete = Image.composite(blackmask,nomask,hollowmask)
    savename = 'complete.f%03d.png' % vv
    complete.save("~/Desktop/Experiment/Neuro_images/"savename.png, "png") 
```

收到错误：

```
File "<ipython-input-52-f6a16ee0812c>", line 6
   complete.save("~/Desktop/Experiment/Neuro_images/"savename.png, "png")
                                                         ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:00:03.220

您可能希望将 展开`~`到用户主目录。然后将保存名称添加到扩展路径。

```
import os
filepath = os.path.join(os.path.expanduser("~/Desktop/Experiment/Neuro_images/"), savename)
complete.save(filepath, "png") 
```

在处理路径名时不要摆弄经典的字符串连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:51:54.977

你要：

`complete.save("~/Desktop/Experiment/Neuro_images/" + savename, "png")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:52:44.347

`complete.save("~/Desktop/Experiment/Neuro_images/%s" % savename)` 希望有帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T20:53:58.197

```
complete.save("~/Desktop/Experiment/Neuro_images/"savename.png, "png") 
```

应该

```
complete.save("~/Desktop/Experiment/Neuro_images/" + savename + ".png") 
```

# c++ - 在 C++ 代码中设置 while 循环的执行率以实现实时同步

> ID：14945041
> 
> 赞同：7
> 
> 时间：2013-02-18T20:49:45.543
> 
> 标签：c++, synchronization, while-loop

我正在使用`.cpp`源代码进行实时模拟。我必须每 0.2 秒（**200 毫秒**）采样一次……有一个 while 循环在每个时间步都采样一次……我想同步这个 while 循环的执行以每（**200 毫秒**）采样一次...我应该如何修改 while 循环？

```
while (1){
          // get a sample every 200 ms
         } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-29T14:50:58.477

简单而准确的解决方案`std::this_thread::sleep_until`：

```
#include "date.h"
#include <chrono>
#include <iostream>
#include <thread>

int
main()
{
    using namespace std::chrono;
    using namespace date;
    auto next = steady_clock::now();
    auto prev = next - 200ms;
    while (true)
    {
        // do stuff
        auto now = steady_clock::now();
        std::cout << round<milliseconds>(now - prev) << '\n';
        prev = now;

        // delay until time to iterate again
        next += 200ms;
        std::this_thread::sleep_until(next);
    }
} 
```

[`"date.h"`](https://github.com/HowardHinnant/date)延迟部分不需要。它在那里提供`round<duration>`功能（现在在 C++17 中），并使其更容易打印出`duration`s. 这一切都在“做事”之下，与循环延迟无关。

只需得到一个`chrono::time_point`，添加你的延迟，然后睡到那个`time_point`。只要您的“东西”花费的时间少于您的延迟时间，您的循环将平均保持您的延迟。不需要其他线程。不需要计时器。只是`<chrono>`和`sleep_until`。

这个例子只是为我输出：

```
200ms
205ms
200ms
195ms
205ms
198ms
202ms
199ms
196ms
203ms
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:00:51.220

您的要求很棘手，除非您使用的是实时操作系统。

但是，Boost 有一个支持你想要的库。（但是，不能保证您每 200 毫秒就会被准确地调用一次。

Boost ASIO 库可能是您正在寻找的，这里是他们教程中的代码：

```
//
// timer.cpp
// ~~~~~~~~~
//
// Copyright (c) 2003-2012 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <iostream>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

int main()
{
  boost::asio::io_service io;

  boost::asio::deadline_timer t(io, boost::posix_time::seconds(5));
  t.wait();

  std::cout << "Hello, world!\n";

  return 0;
} 
```

链接在这里：[boost asio](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tuttimer1/src.html)的链接。

您可以使用此代码，然后像这样重新排列它

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

int main()
{
  boost::asio::io_service io;

  while(1)
  {
    boost::asio::deadline_timer t(io, boost::posix_time::seconds(5));

    // process your IO here - not sure how long your IO takes, so you may need to adjust your timer

    t.wait();
  }    

  return 0;
} 
```

下一页还有一个异步处理 IO 的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:58:25.503

提供的答案向您表明，Boost 中有可用的工具来帮助您完成此任务。我的最新产品说明了如何使用`setitimer()`，这是用于迭代计时器的 POSIX 工具。

你基本上需要这样的改变：

```
while (1){
          // wait until 200 ms boundary
          // get a sample
         } 
```

使用迭代计时器，触发的信号将中断任何阻塞的信号调用。因此，您可以永远阻止某些​​事情。`select`会做得很好：

```
while (1){
          int select_result = select(0, 0, 0, 0, 0);
          assert(select_result < 0 && errno == EINTR);
          // get a sample
         } 
```

要为每 200 毫秒建立一个间隔计时器，请使用`setitimer()`, 传入适当的间隔。在下面的代码中，我们将间隔设置为 200 毫秒，第一个间隔从现在开始 150 毫秒。

```
struct itimerval it = { { 0, 200000 }, { 0, 150000 } };
if (setitimer(ITIMER_REAL, &it, 0) != 0) {
    perror("setitimer");
    exit(EXIT_FAILURE);
} 
```

现在，您只需要安装一个`SIGALRM`什么都不做的信号处理程序，代码就完成了。

您可以点击链接查看[完整的示例](http://ideone.com/7XZZnn)。

如果在程序执行期间有可能触发多个信号，那么与其依赖被中断的系统调用，不如阻塞`SIGALRM`处理程序可以确定的方式唤醒的东西。一种可能性是将`while`循环块放在`read`管道的读取端。然后信号处理程序可以写入该管道的写入端。

```
void sigalarm_handler (int)
{
    if (write(alarm_pipe[1], "", 1) != 1) {
        char msg[] = "write: failed from sigalarm_handler\n";
        write(2, msg, sizeof(msg)-1);
        abort();
    }
} 
```

按照链接查看[完整的示例](http://ideone.com/zEc2nV)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-29T07:23:57.140

```
#include <thread>
#include <chrono>
#include <iostream>

int main() {
    std::thread timer_thread;
    while (true) {
        timer_thread = std::thread([](){
            std::this_thread::sleep_for (std::chrono::seconds(1));
         });

         // do stuff 
         std::cout << "Hello World!" << std::endl;

         // waits until thread has "slept" 
         timer_thread.join();

         // will loop every second unless the stuff takes longer than that.
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T21:10:20.190

要获得绝对的精确度几乎是不可能的——也许在嵌入式系统中。但是，如果您只需要一个近似的频率，则可以使用`std::chrono`(c++11) 或`boost::chrono`. 像这样：

```
while (1){
    system_clock::time_point now = system_clock::now();
    auto duration = now.time_since_epoch();
    auto start_millis = std::chrono::duration_cast<std::chrono::milliseconds>(duration).count();
    //run sample
    now = system_clock::now();
    duration = now.time_since_epoch();
    auto end_millis = std::chrono::duration_cast<std::chrono::milliseconds>(duration).count();
    auto sleep_for = max(0, 200 - (end_millis - start_millis ));
    std::this_thread::sleep_for( sleep_for );
} 
```

# c# - C#下载程序（数组）

> ID：14945043
> 
> 赞同：0
> 
> 时间：2013-02-18T20:49:57.963
> 
> 标签：c#, web, download, webclient

我的代码有问题。我想下载一些文件（我目前正在做一个补丁程序），但是文件太多了，我不想为所有文件创建一个字符串。

我想将链接存储在数组中。但是调试器说`WebClient`. 这是我的代码（`fájlNév`手段`fileName`和`fájlNévAlap`手段`baseFileName`）：更新代码：

```
<!-- language: lang-c# -->

        WebClient myWebClient = new WebClient();
        string[] remoteUrl = new string[2] { "https://www.dropbox.com/s/62tt9w194xefk7t/", " https://www.dropbox.com/s/spni307vmk4zng9/" };
        string[] fájlNév = new string[2] { "alut.dll", "DevIL.dll" };
        string fájlNévAlap = "BlackBox.dll", WebResource = null;

        for(int i = 0; i < remoteUrl.Length; i++) {
            for(int x = 0; x < fájlNév.Length; x++) {
                WebResource = remoteUrl[i] + fájlNév[x];
                MessageBox.Show(WebResource);
                myWebClient.DownloadFile(WebResource,fájlNév[x]);
            }
        } 
```

我能做些什么？怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:03:57.943

很多评论，但没有一个提到这一点，

查看[MSDN](http://msdn.microsoft.com/en-us/library/ez801hhe%28v=vs.110%29.aspx)

```
public void DownloadFile(
    string address,
    string fileName
) 
```

`DownloadFile`期望文件名而不是文件夹。

尝试更改为：

```
myWebClient.DownloadFile(WebResource,"C://"  + fájlNév[x]) 
```

此外，直接写入根文件夹可能会导致安全异常，可能是写入特定文件夹的好习惯。

* * *

此外，Xantham 指出循环会导致数组越界异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:19:09.513

Ofiris 给出的主要答案是文件名是必要的，但是还有一个更普通的问题，我认为应该引起注意。

对 for 循环的初始调用：

```
for(int i = 0; i <= remoteUrl.Length; i++) 
```

和

```
for(int x = 0; x <= fájlNév.Length; x++) 
```

当它尝试查看只有 2 个对象（0 和 1）的数组中的 remoteUrl[2] 时，它们也会导致数组越界异常。

# html - 具有中间垂直对齐的图像和文本的可点击 div

> ID：14945046
> 
> 赞同：0
> 
> 时间：2013-02-18T20:50:20.720
> 
> 标签：html, css

请参阅下面的代码，图像和文本都位于 div 中。如何使用纯css垂直对齐中间的图像（div_a）和文本（div_txt）`<a>`，并保持div可点击（具有跨浏览器兼容性的首选解决方案）：

```
<style type="text/css">
  a.div_a {
      display:block;
      width:320px;
      height:160px;
      background-color:#CCC;}
</style>

<a href="www.mydoamin.com" class="div_a">
  <img src="http://jsfiddle.net/img/logo.png" style="float:left; margin-right:10px; background-color:#666;" />
  <span class="div_txt">Content</span>
</a> 
```

我尝试了以下方法，但这没有帮助：

```
.div_txt {vertical-align:middle;} 
```

我在上面为图像/文本找到了单独的解决方案，但不是同时用于两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:57:04.883

取自[Vertical-align 图像](https://stackoverflow.com/questions/1520825/vertical-align-image/6295861#6295861)并稍作修改以说明`<a>`（[jsFiddle 演示](http://jsfiddle.net/dS2GT/152/)）：

## 链接的额外标记

```
a.absoluteCenterWrapper {
 display:block;
} 
```

## CSS

```
.absoluteCenterWrapper {
 position:relative; /* Contains the image in the div */
}

/* Positioning */
.absoluteCenter {
 margin:auto; /* Required */
 position:absolute; /* Required */
 top:0;bottom:0; /* Aligns Vertically */
}

/* Sizing - resizes down to avoid cutting off */
.absoluteCenter { /* Fallback Sizing */
 max-height:100%;
 max-width:100%;
} 
```

## HTML

```
<a href="http://www.example.com/" class="absoluteCenterWrapper">
 <img src="PATHTOIMAGE" class="absoluteCenter">
 <p>Paragraph goes here.</p>
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:00:40.973

给`display: table`您的锚元素，然后将每个图像和跨度包装在`.wrapper`具有以下属性的跨度中：

```
.wrapper {
  display: table-cell;
  vertical-align: middle;
} 
```

**HTML：**

```
<a href="www.mydoamin.com" class="div_a">
  <span class="wrapper">
    <img src="http://jsfiddle.net/img/logo.png" style="background-color:#666;" />
  </span>

  <span class="wrapper">
    <span class="div_txt">Content</span>
  </span>
</a> 
```

见[**演示**](http://jsfiddle.net/zaknotzak/WcCnW/)。

请注意，这种方法在 IE7 中不起作用，因此如果需要 IE7 支持，您将不得不使用更复杂的方法。

# quickbooks - QuickBooks AccountQuery - FullName 不包括父母姓名

> ID：14945051
> 
> 赞同：3
> 
> 时间：2013-02-18T20:50:40.297
> 
> 标签：quickbooks, qbxml

我有一个使用 qbXml 和 Intuit Web 连接器与 QuickBooks 同步的应用程序。

在查询帐户时，我注意到一些不寻常的行为。根据规范，帐户的全名应包括其任何祖先的姓名，用冒号分隔。像“祖父母：父母：帐户”。

然而，在这种特殊情况下，我从 AccountQuery 获得返回，其中该帐户显然有一个父级，但 FullName 不反映父级的名称。这只发生在一个特定用户 QB 2012 Pro 上。

是否存在导致 QB 换档并且在帐户的全名中不包含父姓名的设置或情况？

这是一个带有可疑全名的帐户示例（为了隐私而更改了一些信息）。

```
<AccountRet>
  <ListID>800000BD-1328833123</ListID>
  <TimeCreated>2012-02-09T18:20:40-06:00</TimeCreated>
  <TimeModified>2013-02-18T10:49:29-06:00</TimeModified>
  <EditSequence>1361206169</EditSequence>
  <Name>My Account</Name>
  <FullName>My Account</FullName>
  <IsActive>true</IsActive>
  <ParentRef>
    <ListID>80000037-1324501345</ListID>
    <FullName>Parent Account</FullName>
  </ParentRef>
  <Sublevel>1</Sublevel>
  <AccountType>Income</AccountType>
  <AccountNumber>5025.2</AccountNumber>
  <Balance>9.99</Balance>
  <TotalBalance>9.99</TotalBalance>
  <CashFlowClassification>None</CashFlowClassification>
</AccountRet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T20:11:49.210

这种情况是由于用户在 QuickBooks 中打开了以下首选项：

编辑 > 首选项 > 会计 > 公司首选项 >*仅显示最低的子帐户*

所以你有两个选择：

(1) 让用户关闭该偏好，或

(2) 使用 ParentRef 数据将每个 AccountRet 链接到其父 Account。

*感谢 Karl Irvin 的提醒，帮助我解决了这个问题。*

# java - 从 Java 应用程序使用 USB 游戏手柄

> ID：14945058
> 
> 赞同：2
> 
> 时间：2013-02-18T20:51:19.740
> 
> 标签：java, usb, joystick, gamepad

有什么方法可以从我的 java 应用程序中使用我的通用 USB 游戏手柄？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:53:54.480

你可以看看[nicegamepads](http://code.google.com/p/nicegamepads/)库。它是一个建立在[Jinput](http://java.net/projects/jinput)库之上的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T08:23:40.273

我使用 Gamepad4j：- [https://github.com/born2snipe/gamepad4j](https://github.com/born2snipe/gamepad4j)。还有 JInput - [https://jinput.github.io/jinput/](https://jinput.github.io/jinput/)。或者，jMonkeyEngine 支持内置游戏手柄，LibGDX 也是如此。还有[https://github.com/williamahartman/Jamepad/](https://github.com/williamahartman/Jamepad/)。

# php - 有没有办法将套接字从 perl 脚本连接到 PHP 服务器？

> ID：14945059
> 
> 赞同：0
> 
> 时间：2013-02-18T20:51:22.220
> 
> 标签：php, perl, sockets, tcp, xampp

我对网络套接字连接的概念很陌生，这对我很有帮助。我在本地机器上运行 XAMPP。如何通过套接字连接到这台机器上的 APACHE 服务器？我没有得到任何线索。有没有设置它的教程？另外我如何控制向服务器端建立套接字连接时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:37:56.370

听起来您想连接到 localhost 上的 Web 服务器并从中获取文档。最简单的方法是不用担心直接与套接字交互，而是使用预打包的 Web 客户端库，例如[LWP](https://metacpan.org/module/LWP)或[LWP::Simple](https://metacpan.org/module/LWP%3a%3aSimple)。

# java - 无法通过 Java 从 Gmail 发送电子邮件

> ID：14945060
> 
> 赞同：1
> 
> 时间：2013-02-18T20:51:27.360
> 
> 标签：java, email, gmail

尝试通过 Java 向 Gmail 发送电子邮件，但收到连接错误。这可以在我的 iPad 上正常发送邮件。为什么我会收到错误消息？

相关代码：

```
@ManagedBean
@ViewScoped
public class email {

    // Set up the SMTP server.
    public void mail() throws AddressException, MessagingException {
        Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
        final String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";
        final String username = "------";
        final String password = "-----";
        final String recipientEmail = "-------";
        final String title ="Reciept for your remote print";
        final String message = " Thank you theis test as worked";

        // Get a Properties object
        Properties props = System.getProperties();
        props.setProperty("mail.smtps.host", "smtp.gmail.com");
        props.setProperty("mail.smtp.socketFactory.class", SSL_FACTORY);
        props.setProperty("mail.smtp.socketFactory.fallback", "false");
        props.setProperty("mail.smtp.port", "465");
        props.setProperty("mail.smtp.socketFactory.port", "465");
        props.setProperty("mail.smtps.auth", "true");

        props.put("mail.smtps.quitwait", "false");

        Session session = Session.getInstance(props, null);
// -- Create a new message --
        final MimeMessage msg = new MimeMessage(session);

        // -- Set the FROM and TO fields --
        msg.setFrom(new InternetAddress(username));
        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipientEmail, false));

        msg.setSubject(title);
        msg.setText(message, "utf-8");
        msg.setSentDate(new Date());

        SMTPTransport t = (SMTPTransport) session.getTransport("smtps");

        t.connect("smtp.gmail.com", username, password);
        t.sendMessage(msg, msg.getAllRecipients());
        t.close();
    }
} 
```

收到错误：

```
WARNING: Setting non-serializable attribute value into ViewMap: (key: email, value class: richard.fileupload.email)
WARNING: #{email.mail()}: javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
    java.net.ConnectException: Connection timed out: connect
javax.faces.FacesException: #{email.mail()}: javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
    java.net.ConnectException: Connection timed out: connect
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
    java.net.ConnectException: Connection timed out: connect
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 36 more
Caused by: javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
    java.net.ConnectException: Connection timed out: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at richard.fileupload.email.mail(email.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:618)
    at sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:160)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:288)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    ... 54 more 
```

iPad的成功设置

```
smtp.gmail.com
ssl on
authentication password
server port 465 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:05:48.593

尝试查看[AuthSub for Web Applications](https://developers.google.com/accounts/docs/AuthSub)。您需要获得许可才能从第三方应用程序登录 Google 服务。

*编辑 看来这个问题可能已经在这里得到解答：[Using Javamail to connect to Gmail smtp server ignores specified port and try to use 25](https://stackoverflow.com/questions/1990454/using-javamail-to-connect-to-gmail-smtp-server-ignores-specified-port-and-tries)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:57:21.353

超时错误很可能意味着您没有连接到`smtp.gmail.com`. 这很可能与 java 代码周围的网络环境有关，而不是编程错误。

这种情况几乎可以肯定是由某处的防火墙引起的。您的 ISP 或网络管理员不允许在端口 465 上连接到该地址（或任何地址），或者本地计算机有一些端点防火墙，它根本不允许 java 向外连接。端点防火墙通常带有防病毒软件包。此外，默认情况下，Windows 防火墙也会阻止 java.exe 网络。

希望这可以帮助！

# biztalk - 正在搜索 BizTalk 消息框？

> ID：14945063
> 
> 赞同：0
> 
> 时间：2013-02-18T20:51:30.503
> 
> 标签：biztalk, biztalk-2010

需要制作一个工具来从 BizTalk 消息框中搜索 XML 数据。

如何从存储在 BizTalk MessageBox 中的所有数据中搜索与一个名为 Employee ID 的公共节点相关的所有 XML 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:57:49.910

BizTalk 消息框（BizTalkMsgBoxDb 数据库）是消息通过 BizTalk 时的临时存储。消息完成处理后，将从消息框中删除。

您可能想要研究业务活动监控 (BAM)，它允许您在消息流经 BizTalk 时捕获消息数据；消息数据可以通过其基于 Web 的通用门户公开。BAM 本身就是一个大产品，我建议您花时间研究所有可用功能，以找到适合您特定场景的功能。有很多很多可用的资源，但是您可以从查看[Business Activity Monitoring](https://msdn.microsoft.com/en-us/library/aa561137.aspx)开始。还有一本非常好的专门介绍 BAM 的书：[Pro BAM in BizTalk Server 2009](https://rads.stackoverflow.com/amzn/click/com/1430219149)

或者，查看使用内置 BizTalk 管理控制台工具查询跟踪数据库 (BizTalkDTADb)，该数据库将根据您的预定义配置选项保存消息以供以后参考。请参阅[使用 BizTalk 文档跟踪](http://msdn.microsoft.com/en-us/library/ee236914(v=bts.10).aspx)。

最后，您可以考虑推出自己的消息跟踪解决方案，将消息内容写入 SQL 数据库表，例如在管道中接收消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T17:36:56.033

查看CodePlex 上的[BizTalk 消息解压缩器！](http://btsdecompress.codeplex.com/)我已经使用这个工具几年了，效果很好。由于您直接点击消息框，因此您应该非常小心并且非常熟悉您选择执行的查询。

正如之前发布者的回答所指出的，管理控制台中的 BAM 和集成 HAT 查询是官方、最安全和 Microsoft 规定的答案。

# php - Foreach 数组组织/迭代

> ID：14945064
> 
> 赞同：0
> 
> 时间：2013-02-18T20:51:30.757
> 
> 标签：php, for-loop, multidimensional-array, foreach, iteration

我有这个数组，我尝试过迭代并创建一个新数组：

```
array(233) {
  [0]=>
  array(2) {
    ["subject_id"]=>
    int(138)
    ["relatedsubject_id"]=>
    int(127)
  }
  [1]=>
  array(2) {
    ["subject_id"]=>
    int(138)
    ["relatedsubject_id"]=>
    int(47)
  }
  [2]=>
  array(2) {
    ["subject_id"]=>
    int(138)
    ["relatedsubject_id"]=>
    int(13)
  }
  [3]=>
  array(2) {
    ["subject_id"]=>
    int(138)
    ["relatedsubject_id"]=>
    int(56)
  }
  [4]=>
  array(2) {
    ["subject_id"]=>
    int(154)
    ["relatedsubject_id"]=>
    int(77)
  }
  [5]=>
  array(2) {
    ["subject_id"]=>
    int(154)
    ["relatedsubject_id"]=>
    int(69)
  }
  [6]=>
  array(2) {
    ["subject_id"]=>
    int(154)
    ["relatedsubject_id"]=>
    int(70)
  }
  [7]=>
  array(2) {
    ["subject_id"]=>
    int(154)
    ["relatedsubject_id"]=>
    int(75) 
```

我把它剪短了，所以它不会太讨厌。这是我现在使用的代码：

```
 $subject_id = array();
    foreach ($results as $mainKey => $subArrays) {
        if(!isset($subject_id[$results[$mainKey]["subject_id"]])) {
            $subject_id[$results[$mainKey]["subject_id"]] = array();
            array_push($subject_id[$results[$mainKey]["subject_id"]], $results[$mainKey]["relatedsubject_id"]);
            // $subject_id[$results[$mainKey]["subject_id"]][] = $results[$mainKey]["relatedsubject_id"];
        }
    }

var_dump($subject_id); 
```

我的结果如下所示：

```
array(111) {
  [138]=>
  array(1) {
    [0]=>
    int(127)
  }
  [154]=>
  array(1) {
    [0]=>
    int(77)
  } 
```

关于为什么我只得到 1 个值以及如何修改以使每个“relatedsubject_id”符合相应的“subject_id”的任何想法？谢谢你。

*编辑*

预期结果：

```
array {
      [138]=>
      array(1) {
        [0]=>
        int(127)
        [1]=>
        int(47)
        [2]=>
        int(13)
        [3]=>
        int(56)
      }
      [154]=>
      array(1) {
        [0]=>
        int(77)
        [1]=>
        int(69)
        [2]=>
        int(70)
        [3]=>
        int(75)
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:14:00.300

您似乎正在尝试合并您的主题 ID 和相关主题 ID。如果是这样，这可能对你有用。

```
 $subject_id = array();
    foreach ($results as $mainKey => $subArrays) {
      if(!isset($subject_id[$results[$mainKey]['subject_id']])) {
        $subject_id[$results[$mainKey]['subject_id']] = array('subject_id' => $results[$mainKey]['subject_id'], 'relatedsubject_id' => array());
      }
      $subject_id[$results[$mainKey]['subject_id']]['relatedsubject_id'][] = $results[$mainKey]["relatedsubject_id"];
    } 
```

更改为您的 EDIT

```
$subject_id = array();
foreach ($results as $mainKey => $subArrays) {
  if(!isset($subject_id[$results[$mainKey]['subject_id']])) {
    $subject_id[$results[$mainKey]['subject_id']] = array();
  } 
  $subject_id[$results[$mainKey]['subject_id']][] = $results[$mainKey]["relatedsubject_id"];
} 
```

你只得到一个结果的原因是你的所有代码都在 if(!isset()) 函数中。那不应该只设置一次。如果这是有道理的。

# c# - 在会话中存储整个模型类成员

> ID：14945069
> 
> 赞同：6
> 
> 时间：2013-02-18T20:51:45.603
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在一个新创建的 MVC4 应用程序中，我想将所有 USERProfile 成员存储在一个会话中，这样我就可以在用户登录后访问所有值。但是 Session 数组对象只提出了 2 个替代方案

`Session[int]/Session[string]`

我需要找回

`Session['username']; Session['age']; etc`

该类中存在的任何内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T20:54:30.473

你可以存储

```
Session["UserProfile"]=UserProfile; // User Profile being an object 
```

需要注意的是，当您检索您的个人资料时，您必须将其投射：

```
UserProfile profile = (UserProfile) Session["UserProfile"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:54:57.567

您列出的是可用于在会话中访问某些内容的密钥。键可以是 int 或字符串。

简单地做

```
Session.Add("MyProfile", USERProfileObject); 
```

您可以将整个对象存储在会话中。

请注意：http: [//msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.add.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.add.aspx)

表明它需要一个字符串和一个对象。

# javascript - 在多维数组中查找值

> ID：14945071
> 
> 赞同：1
> 
> 时间：2013-02-18T20:51:51.843
> 
> 标签：javascript, jquery

假设我的脚本中有一个数组，它的组成如下：

```
 var detail= {};
   detail['i100']=new Array()

   detail['i100']['ID 4564']= 'John'  
   detail['i100']['ID 4899']= 'Paul' 
   detail['i100']['ID 9877']= 'Andy'
   detail['i100']['ID 1233']= 'Evan'

   detail['i25'] = new Array()  

   detail['i25']['ID 89866']= 'Paul s'  
   detail['i25']['ID 87866']= 'Paul' 
```

然后我使用这个脚本来获取数组第一部分的值：

```
 $.each(detail, function(vehicle) {
    console.log( vehicle ) 
   }); 
```

这给了我两个预期的结果（`i100`和`i25`），但是我想做的是，通过使用参考车辆，获取第二维的所有名称和值——即通过使用`i25`我想要返回 ID`89866`和 ID `87866`。我试过`children()`了，但它只是不工作。请问有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:57:48.777

您需要在第二维上运行另一个。

```
$.each(detail, function(index,value){
    $.each(value, function(i,v) {
        console.log(v);
    });
}); 
```

或者如果您想专门调用一项，请传入值名称：

```
function getByName(name){
    $.each(detail[name], function(i,v){
        console.log(v);
    });
} 
```

# c++ - 如何显式管理异构类型（和大小）的多个池分配器？

> ID：14945073
> 
> 赞同：4
> 
> 时间：2013-02-18T20:51:59.417
> 
> 标签：c++, memory-management, boost, c++11

场景：我有一个类 G，它包含（通常）数千个从类 N 派生的类型的对象。所有这些对象都有一个明确定义的生命周期。首先，构造一个对象 G，然后添加 N 个派生的对象，然后用 G 完成一些计算，这不会改变 N 个派生的对象，然后 G 超出范围，组成部分N 派生对象。N 派生对象又包含指向添加到同一 G 对象的其他 N 派生对象的指针或指针的标准容器。G 表示具有异构节点的图。

我的目标是：

1.  最小化分配每个 N 派生对象的成本。
2.  最大化属于同一 G 对象的 N 派生对象的参考局部性。
3.  通过为所有 N 派生对象释放单个块来最小化释放成本。
4.  为了能够定义多个具有独立生命周期的独立 G 对象 - 可能在没有线程同步的情况下在并发线程中管理这些独立 G 对象。

对我来说，这似乎需要多个池分配器 - 就像使用堆栈一样分配......并且只有在池被销毁时才释放池分配。

我查看了提升池分配器——但没有找到为不同大小的异构对象建立多个独立池的方法。

接下来，我定义了自己的自定义分配器——但很快发现，虽然我可以将它作为模板参数传递给标准容器，如 std::vector、std::set、std::list 等。- 允许我指定池分配器的类型...我来不及，因为我不能轻易指定两个独立的容器应该共享相同的（非全局）分配器池。我认识到一种解决方案是使用静态/全局并将自己限制为仅在一个线程中构造 G 对象。我还考虑过使用 thread-local-storage 将自定义分配器与相关池相关联......但认为这很难看。这两种方法都没有直接支持在同一线程中交叉构造两个独立的 G 对象。

我是否忽略了 Boost 中问题的现有解决方案？

有没有比使用静态/全局或线程本地存储更好的习惯来实现我的目标？

**更新**

我已经阅读了 Stroustrup 的常见问题和 boost::container 文档。起初，Boost::container 给了我很大的鼓舞——但很失望没有看到一个具体的例子来说明如何在这些容器中使用有状态分配器。我已经能够简化我原来的问题来问......给定一个结构：

```
struct DataUnit { map<int,string> m; list<int> l; } 
```

如何确保对于 DataUnit 的每个实例都有一个单独的池，从中分配 m 和 l 的内部成分？如果我将自定义分配器传递给映射和列表，m 和 l 将获得此容器的独立实例。我最初认为我可能能够使用 get_allocator() 来用我的 aerena/pool 初始化分配器......但遗憾的是，在 vector<...> 的默认构造函数返回之前调用了 allocate() ......所以我不能那样做。

更奇怪的是，我发现，已经涉足了 boost::container 一段时间...... vanilla std 容器有一个 get_allocator() （在 MSVC 2010 和 2012 以及 g++ 4.6.3 上）这表明这些标准库上下文具有与 boost::container 类似的状态分配器支持。

不幸的是，我仍然没有可行的解决方案来解决我最初的问题（尽管我现在可以更有说服力地表达它。）

**更新 2**

谢谢，pmr，您的最后一条评论是我将授予“正确答案”的内容-如果您将其归类为答案。:) 我发现 boost::container 的问题是，我曾期望它的文档对任何新功能都是明确的——例如在构造时传递分配器对象......而且我没有检查 boost::container 源正确编码。我现在确信，Boost::container 为我上面的所有问题提供了一个非常优雅和直观（如果文档记录不正确）的解决方案。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:08:13.123

警告：完全未经测试的代码。而且我不知道它是哪个“成语”-但是下面的 1.5 页代码应该可以解决您的问题。

```
class GraphNodeAllocator
{
    struct CMemChunk
    {
        CMemChunk* pNext;
        BYTE* data()
        {
            return static_cast<BYTE*>( static_cast<void*>( this + 1 ) );
        }
    };

    CMemChunk* m_pChunk; // Most recently allocated a.k.a. current chunk
    BYTE* m_pFirstByte;  // First free data byte within the current chunk
    size_t m_freeBytes;  // Count of free bytes within the current chunk

    static const size_t cbChunkAlloc = 0x10000; // 65536 bytes per single allocation
    static const size_t cbChunkPayload = cbChunkAlloc - sizeof( CMemChunk );

    void* Allocate( size_t sz )
    {
        if( sz > cbChunkPayload )
            return NULL;

        if( m_freeBytes >= sz )
        {
            // Current chunk has the space
            m_freeBytes -= sz;
            void* res = m_pFirstByte;
            m_pFirstByte += sz;
            return res;
        }

        // Need a new chunk
        CMemChunk* pChunk = static_cast< CMemChunk* >( malloc( cbChunkAlloc ) );
        if( NULL == pChunk )
            return NULL;
        pChunk->pNext = m_pChunk;
        m_pChunk = pChunk;
        m_pFirstByte = m_pChunk->data();
        m_freeBytes = cbChunkPayload;
        return Allocate( sz );
    }

public:
    inline GraphNodeAllocator(): m_pChunk( NULL ), m_pFirstByte( NULL ), m_freeBytes( 0 ) { }

    inline ~GraphNodeAllocator()
    {
        while( NULL != m_pChunk )
        {
            CMemChunk* pNext;
            pNext = m_pChunk->pNext;
            free( m_pChunk );
            m_pChunk = pNext;
        }
    }

    template<typename E>
    inline E* newNode()
    {
        void* ptr = Allocate( sizeof( E ) );
        if( NULL == ptr ) return NULL;
        return ::new( ptr ) E();
    }
}; 
```

PS 这个想法是从微软的 CAtlPlex 类中借用的，这也是为什么大多数微软的模板容器（列表、地图、哈希图）通常比 STL 对应物快 2 倍的第一个原因。自从我放弃使用 std::vector、std::set、std::list 等支持 ATL 的等价物后，我变得更快乐了。

# java - 接收 SQLException“用户登录失败”连接到 SQL Server 2008

> ID：14945075
> 
> 赞同：6
> 
> 时间：2013-02-18T20:52:03.277
> 
> 标签：java, sql-server-2008-r2, connection-string, sqlexception

我正在尝试通过 Java 连接到 SQL Server 2008。

1.  我已添加`sqljdbc4.jar`到我的项目库中。
2.  没有为数据库访问数据库设置用户名和密码（Windows 身份验证）。
3.  1433 端口正在侦听，但我仍然收到此异常：

> SQL 异常：com.microsoft.sqlserver.jdbc.SQLServerException：用户“”登录失败。ClientConnectionId:085d5df3-ad69-49e1-ba32-b2b990c16a69

相关代码：

```
public class DataBases 
{

    private  Connection link;
    private  java.sql.Statement  stmt;
    public    ResultSet rs;

    public DataBases() 
    {  
        try 
        {    
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            String connectionUrl = "jdbc:sqlserver://localhost:1433;databaseName=DB;";
            Connection con = DriverManager.getConnection(connectionUrl);
        } 
        catch (SQLException e) 
        {
            System.out.println("SQL Exception: "+ e.toString());
        }
        catch (ClassNotFoundException cE)
        {
            System.out.println("Class Not Found Exception: "+ cE.toString());
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T21:00:44.283

如果您想要 Windows 身份验证，您需要将选项添加 `integratedSecurity=true`到您的 JDBC URL：

```
jdbc:sqlserver://localhost:1433;databaseName=DB;integratedSecurity=true

```

您还需要`sqljdbc_auth.dll`（注意 32/64 位）在您的 Windows 系统路径或通过定义的目录中`java.library.path`

有关详细信息，请参阅驱动程序手册：http: [//msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated](http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:20:45.370

当我尝试从 Java 连接到 Microsoft SQL 服务器时，我遇到了同样的问题。我使用[`jTDS`](http://jtds.sourceforge.net/)驱动程序而不是常规`SQLJdbdc`驱动程序。

```
 Class.forName("net.sourceforge.jtds.jdbc.Driver"); 
        String connectionUrl = "jdbc:jtds:sqlserver://localhost:1433;databaseName=DB;integratedSecurity=true";
        Connection con = DriverManager.getConnection(connectionUrl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T05:41:42.683

我遇到过同样的问题。这是因为 ConnectionUrl 的格式错误。您在 ConnectionUrl 中缺少用户名和密码。

```
String ConnectionUrl = "jdbc:sqlserver://localhost:1433;databaseName=DB","username","password");" 
```

我希望它运作良好！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:03:50.530

这篇文章是我的帮助： [jdbc.SQLServerException: Login failed for user for any user](https://stackoverflow.com/questions/12769171/jdbc-sqlserverexception-login-failed-for-user-for-any-user)

您需要该`integratedSecurity=true`标志并确保服务器属性确实设置为“安全”下的“Windows 身份验证模式”。

# php - 在 UPDATE/SET 语句中取消嵌套，PostgreSQL/PHP

> ID：14945079
> 
> 赞同：2
> 
> 时间：2013-02-18T20:52:08.197
> 
> 标签：php, arrays, postgresql, updates

我有一个如下表：

```
point_path_id     line_path_id     season_id     gps_time     heading     roll     pitch       geometry
    1                 ___             ___           ___         ___        ___      ___       PostGISGeom
    2                 ___             ___           ___         ___        ___      ___       PostGISGeom
    3                 ___             ___           ___         ___        ___      ___       PostGISGeom
    4                 ___             ___           ___         ___        ___      ___       PostGISGeom  
    5                 ___             ___           ___         ___        ___      ___       PostGISGeom 
```

在 PHP 中，我还拥有要更新的 ID 列表以及 line_path_id 和 season_id 的值。我也有用于 gps_time、heading、roll、pitch 的数组。

我有以下 SQL 语句（来自 PHP 的回显）

```
UPDATE greenland.point_paths 

SET 

line_path_id=1,
season_id=2, 
gps_time=unnest(array[1303475178.0031,1303475178.0081,1303475179.0081,1303475180.0081,1303475181.0081]::double precision[]),
heading=unnest(array[-2.0819464,-2.0819407,-2.0820324,-2.08202,-2.0819855]::double precision[]),
roll=unnest(array[-0.007395,-0.007395,-0.0073832,-0.0073949,-0.0073853]::double precision[]),
pitch=unnest(array[-0.0246114,-0.0246115,-0.0246108,-0.024582,-0.0245905]::double precision[]) 

WHERE point_path_id IN (1,2,3,4,5); 
```

这是插入，但不正确。数组的第一个值被插入到 point_path_id 中的所有 5 个 id。我在表中得到以下信息：

![在此处输入图像描述](../Images/fa27332fe763e02a8e34e7e5a78c1353.png)

这种取消嵌套在许多其他语句中都可以正常工作，但我似乎无法让它以这种形式正常工作。我的错误在哪里？

以下是在此之前发生的事情的一些背景：通过 URLEAD(MATLAB) 发送 JSON 数据字符串，并通过 PHP 解码/插入到许多表中。

插入一个 PostGIS 线串 GEOM 并返回它的 ID (line_path_id) 插入一个季节并返回它的 ID (season_id)

然后将线串转储到上述表中的点中，并自动生成并返回串行 point_path_id。

然后需要插入与每个点相关的数据（这就是我想要做的）

我有每个点的 line_path_id、season_id、gps_time/heading/roll/pitch。时间/航向/滚动/俯仰在数组中是点数的长度。

可以有 100,000+ 点，但让我们用 5 来测试。

转储点后，此处再次显示一个表格：

```
point_path_id     line_path_id     season_id     gps_time     heading     roll     pitch       geometry
    1                 ___             ___           ___         ___        ___      ___       PostGISGeom
    2                 ___             ___           ___         ___        ___      ___       PostGISGeom
    3                 ___             ___           ___         ___        ___      ___       PostGISGeom
    4                 ___             ___           ___         ___        ___      ___       PostGISGeom  
    5                 ___             ___           ___         ___        ___      ___       PostGISGeom 
```

我还有两个变量： $line_path_id = # $season_id = #

还有 4 个数组 $gps_time = [#,#,#,#,#]; 航向...滚动...俯仰...

我需要为每个点几何插入相关值。这是目标。

希望这有助于找到最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:14:56.100

unnest() 是一个集合返回函数。您的问题是 UPDATE 语句中的每个 SET 分配都在寻找一个值来分配给 WHERE 子句找到的每一行的字段。UPDATE 不知道您打算将第一个数组值转到 point_path_id=1 的行，依此类推。

对于小型数组，您可以将查询重写为：

```
UPDATE greenland.point_paths 
   SET line_path_id=1,
       season_id=2, 
       gps_time=(array[1303475178.0031,1303475178.0081,1303475179.0081,1303475180.0081,1303475181.0081])[point_path_id]::double precision[],
       heading=(array[-2.0819464,-2.0819407,-2.0820324,-2.08202,-2.0819855])[point_path_id]::double precision[],
       roll=(array[-0.007395,-0.007395,-0.0073832,-0.0073949,-0.0073853])[point_path_id]::double precision[],
       pitch=(array[-0.0246114,-0.0246115,-0.0246108,-0.024582,-0.0245905])[point_path_id]::double precision[]
 WHERE point_path_id IN (1,2,3,4,5); 
```

虽然这依赖于与数组索引匹配的 point_path_id。

您可能需要一种不同的方法来将此数据输入系统。如果您希望在此表中一次更新 100,000 行，也许您应该使用 COPY 将数据批量上传到具有 point_path_id、season_id、line_path、gps_time、roll、pitch、heading 的临时表中每行单个值。然后你可以这样做：

```
UPDATE greenland.points_path pp
   SET season_id=s.season_id,
       line_path=s.line_path,
       gps_time=s.gps_time,
       roll=s.roll,
       pitch=s.pitch,
       heading=s.heading
  FROM staging s
 WHERE pp.point_path_id=s.point_path_id 
```

# c++ - 去除动态分配的多维数组的涂层。

> ID：14945081
> 
> 赞同：3
> 
> 时间：2013-02-18T20:52:15.153
> 
> 标签：c++, arrays, memory-management, heap-memory, dynamic-arrays

所以，我有这段代码，我试图`ppint`在最后释放数组。我曾尝试使用 Xcode 的泄漏来确定它是否有效，但我不太了解它。会做这个工作吗？

```
delete ppint[0];
delete ppint[1];
delete ppint[2];
delete ppint[3]; 
```

或者还有什么必须做的吗？

```
#include <iostream>
#include <string>
#include <unistd.h>
using namespace std;

int main()
{
    int **ppint;
    ppint = new int * [4];

    for(int i = 0; i < 4; i++ ) {
        ppint [i] = new int[4];
    } // declares second layer of arrays

    for(int i = 0, count = 0; i < 4; i++ ) {
        for(int j = 0; j < 4; j++ ) {
            count++;
            ppint [i] [j] = count;
        } //init part 2
    } // init array

    for(int i = 0; i < 4; i++ ) {
        for(int j = 0; j < 4; j++ ) {
            cout << ppint [i] [j] << endl;
        } // print part 2
    } //print array
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:53:34.110

关闭。您将不得不使用`delete[]`，因为您为它们中的每一个分配了`new[]`：

```
delete[] ppint[0];
delete[] ppint[1];
delete[] ppint[2];
delete[] ppint[3]; 
```

但是，当然，您应该使用循环：

```
for(int i = 0; i < 4; i++ ) {
  delete[] ppint[i];
} 
```

然后不要忘记`delete[]` `ppint`自己：

```
delete[] ppint; 
```

但是，在 C++ 中，我们更喜欢不要乱用动态分配的数组。使用 a`std::vector<std::vector<int>>`或 a `std::array<std::array<int, 4>, 4>`。如果您关心数据的局部性，请尝试[`boost::multi_array`](http://www.boost.org/doc/libs/1_53_0/libs/multi_array/doc/user.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:16:10.670

我的解决方案是：

```
#include<iostream>
#include<cstdlib>

using namespace std;

int main(){

    int ** twod;
    twod = new int*[4];
    int counter = 0;
    /*init 2d variable and check whether we got the memory*/
    if ( twod == NULL) {
        exit(EXIT_FAILURE);
    }
    for (unsigned i = 0; i< 4; i++){
        /**/
        twod[i] = new int[4];
        if (twod[i] == NULL){
            exit(EXIT_FAILURE);
        }
        for (unsigned j = 0; j < 4; j++){
            counter++;
            twod[i][j]=counter;
        }
    }

    for ( unsigned i = 0; i < 4; i++){
        for (unsigned j = 0; j < 4; j++){
            cout << twod[i][j] << endl ;
        }
    }

    for (unsigned i = 0; i < 4; i++)
        delete [] twod[i];

    /*and don't forget to delete the int* array as well.*/
    delete [] twod;

} 
```

如果你想确保你没有犯任何内存错误，也可以使用 valgrind：

Valgrind 是检测内存错误的优秀工具。在输出中它显示我们进行了 5 个内存分配，这些内存分配都被释放了。Valgrind 还可以显示其他类型的内存错误，例如使用您根本没有分配的内存。使用在使用前未正确初始化的内存，就像我说的一个出色的内存检查工具。

```
$ valgrind ./a.out
==18376== Memcheck, a memory error detector
==18376== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==18376== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==18376== Command: ./a.out
==18376== 
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
==18376== 
==18376== HEAP SUMMARY:
==18376==     in use at exit: 0 bytes in 0 blocks
==18376==   total heap usage: 5 allocs, 5 frees, 96 bytes allocated
==18376== 
==18376== All heap blocks were freed -- no leaks are possible
==18376== 
==18376== For counts of detected and suppressed errors, rerun with: -v
==18376== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2) 
```

当然，正如其他人告诉你的那样，你使用 std::vector 例如你用 c++ 而不是 c 编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:53:47.540

您仍然需要删除自己指向的内存`ppint`。您还需要使用`delete[]`而不是`delete`.

但是，比起手动数组，更喜欢标准容器。

```
std::vector< std::vector<int> > iv; // dynamic size
std::array< std::array<int,4>, 4> ia; // static size 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T20:53:47.743

分配有的东西`new[]`需要用 释放`delete[]`。但使用`std::vector`而不是原始数组和`new`. 它会自动为您管理内存。

* * *

以下直接模拟您的原始代码，并且更短、更清洁、更安全：

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
    vector<vector<int>> v( 4, vector<int>( 4 ) );

    for( int i = 0, count = 0; i < 4; ++i ) {
        for( int j = 0; j < 4; ++j ) {
            ++count;
            v[i][j] = count;
        }
    }

    for( int i = 0; i < 4; ++i ) {
        for( int j = 0; j < 4; ++j ) {
            cout << v[i][j] << endl;
        }
    }
} 
```

* * *

本着 C++ 的精神，您可以/应该定义一个可重用的矩阵类，例如

```
#include <iostream>
#include <vector>
using namespace std;

template< class item_t >
class matrix_
{
private:
    vector<item_t>  items_;
    int             width_;
    int             height_;

    int index_for( int const x, int const y ) const
    {
        return y*width_ + x;
    }

public:
    item_t const& operator()( int const x, int const y ) const
    {
        return items_[index_for( x, y )];
    }

    item_t& operator()( int const x, int const y )
    {
        return items_[index_for( x, y )];
    }

    matrix_( ssize_t const w, ssize_t const h )
        : items_( w*h )
        , width_( w )
        , height_( h )
    {}
};

int main()
{
    matrix_<int> m( 4, 4 );

    for( int i = 0, count = 0; i < 4; ++i ) {
        for( int j = 0; j < 4; ++j ) {
            ++count;
            m( j, i ) = count;
        }
    }

    for( int i = 0; i < 4; ++i ) {
        for( int j = 0; j < 4; ++j ) {
            cout << m( j, i ) << endl;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T20:54:51.513

您需要`delete`为每个较早的电话打一次电话`new`

```
for(int i = 0; i < 4; i++ ) {
    delete[] ppint[i];
}
delete[] ppint; 
```

# angularjs - 如何使用 selenium 和 codeception 检测验收测试中的 dom 变化

> ID：14945087
> 
> 赞同：0
> 
> 时间：2013-02-18T20:53:13.190
> 
> 标签：angularjs, selenium-webdriver, acceptance-testing

我正在为 Angular 编写的应用程序编写验收测试。我使用带有 selenium 的 Codeception 测试框架。测试将一些文本写入输入字段并提交表单。它应该通过 ajax api 调用向 db 添加新任务，并将新 `<li>`元素添加到现有任务列表中。我如何检测到添加了新元素？这是我到目前为止所得到的：

```
<?php
$I = new WebGuy($scenario);
$I->wantTo('add new story');
$I->amOnPage('/');
$I->fillField('input', 'asdf');
$I->pressKey('input[name=input]', '13');
// ensure that new <li> has been added? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:12:44.590

您可以使用以下方式编写代码以单击 li

//通过div标签访问

```
$I->click('div div div div div ul li a');
$I->see('UNIT 1'); 
```

//通过类名访问

```
$I->click('div[class="new"] div div div a'); 
```

//通过 div id 访问

```
$I->click('div[id=tnList] ul li a'); 
```

# android - Android 应用重新启动 Activity - 正在进行的网络 IO 会发生什么？

> ID：14945088
> 
> 赞同：1
> 
> 时间：2013-02-18T20:53:15.710
> 
> 标签：android, networking, android-activity

如果我调用外部 Web 服务并且用户旋转设备，则 Activity 将重新启动（我知道您可以自己处理，但不建议这样做）。我知道我可以使用`onRetainNonConfigurationInstance()`.

我的问题是 Activity 重新启动后机上网络 IO 会发生什么？它是否继续，它是被暂停还是被杀死？

我对 Android（iOS 用户）比较陌生，所以重新启动 Activity 很奇怪。

我们拨打的一些网络电话可能会重新启动，但检查购买不是其中之一。我该如何处理，以便购买仍然正常工作？假设我会使用`Asynctask`（尽管我意识到还有其他选择，例如`Executors`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:56:56.813

对于需要跨活动重启（例如购买）维护的网络调用，请考虑使用 a`service`而不是在活动内部进行。

如果您的连接被定义为活动内的实例变量，它将在活动重新启动时被销毁/杀死。

另一种选择，但我不推荐，是实现一个`application`类并在那里维护你的连接，这样只要你的应用程序进程还活着，它就会一直存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:09:16.013

您不应该在活动内部处理请求，除非它们足够简单以触发（即不需要响应）。常见的用例是您正在与要跨多个活动处理的 REST 接口进行交互。基本思想是向服务发出请求并让它为您调解连接。Google IO 2010 有一个很好的[讲座](http://www.youtube.com/watch?v=xHXn3Kg2IQE%5d)，你可以听。

不推荐在一个类中实现这个功能`Application`，因为当你的应用程序在内存紧张的情况下被 Android 杀死时，你会得到奇怪的行为。

# python - 如何为生成的 C++ 转义字符串？

> ID：14945095
> 
> 赞同：8
> 
> 时间：2013-02-18T20:53:50.043
> 
> 标签：python, escaping, code-generation

我正在编写基于数据生成 C++ 代码的 python 脚本。

我有 python 变量`string`，其中包含一个字符串，该字符串可以由诸如`"`换行符之类的字符组成。

转义此字符串以进行代码生成的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T20:53:50.043

我使用的方式是基于观察到 C++ 字符串基本上遵守关于字符和转义为 Javascript/JSON 字符串的相同规则。

Python 从 2.6 版开始有一个内置的 JSON 库，可以将 Python 数据序列化为 JSON。因此，代码是，假设我们不需要用引号括起来，如下所示：

```
import json
string_for_printing = json.dumps(original_string).strip('"') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:00:58.257

我使用这段代码，到目前为止没有问题：

```
def string(s, encoding='ascii'):
   if isinstance(s, unicode):
      s = s.encode(encoding)
   result = ''
   for c in s:
      if not (32 <= ord(c) < 127) or c in ('\\', '"'):
         result += '\\%03o' % ord(c)
      else:
         result += c
   return '"' + result + '"' 
```

它使用八进制转义符来避免所有可能有问题的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-16T21:41:53.877

[我们可以使用此处找到的 C 细节（ https://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html#Character-Constants](https://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html#Character-Constants)）和 Python 的内置可打印函数做得更好：

```
def c_escape():
  import string
  mp = []
  for c in range(256):
    if c == ord('\\'): mp.append("\\\\")
    elif c == ord('?'): mp.append("\\?")
    elif c == ord('\''): mp.append("\\'")
    elif c == ord('"'): mp.append("\\\"")
    elif c == ord('\a'): mp.append("\\a")
    elif c == ord('\b'): mp.append("\\b")
    elif c == ord('\f'): mp.append("\\f")
    elif c == ord('\n'): mp.append("\\n")
    elif c == ord('\r'): mp.append("\\r")
    elif c == ord('\t'): mp.append("\\t")
    elif c == ord('\v'): mp.append("\\v")
    elif chr(c) in string.printable: mp.append(chr(c))
    else:
      x = "\\%03o" % c
      mp.append(x if c>=64 else (("\\%%0%do" % (1+c>=8)) % c, x))
  return mp 
```

这具有现在是从字符的序数值`ord(c)`到精确字符串的映射的优点。使用`+=`for 字符串是一种缓慢且不好的做法，因此这使得`"".join(...)`它在 Python 中的性能要高得多。更不用说，索引列表/表比每次都对字符进行计算要快得多。也不要通过检查是否需要更少的字符来浪费八进制字符。但是，要使用它，您必须验证下一个字符不是`0`直通，`7`否则您必须使用 3 位八进制格式。

该表如下所示：

```
[('\\0', '\\000'), ('\\1', '\\001'), ('\\2', '\\002'), ('\\3', '\\003'), ('\\4', '\\004'), ('\\5', '\\005'), ('\\6', '\\006'), '\\a', '\\b', '\\t', '\\n', '\\v', '\\f', '\\r', ('\\16', '\\016'), ('\\17', '\\017'), ('\\20', '\\020'), ('\\21', '\\021'), ('\\22', '\\022'), ('\\23', '\\023'), ('\\24', '\\024'), ('\\25', '\\025'), ('\\26', '\\026'), ('\\27', '\\027'), ('\\30', '\\030'), ('\\31', '\\031'), ('\\32', '\\032'), ('\\33', '\\033'), ('\\34', '\\034'), ('\\35', '\\035'), ('\\36', '\\036'), ('\\37', '\\037'), ' ', '!', '\\"', '#', '$', '%', '&', "\\'", '(', ')', '*', '+', ',', '-', '.', '/', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ':', ';', '<', '=', '>', '\\?', '@', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '[', '\\\\', ']', '^', '_', '`', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '{', '|', '}', '~', '\\177', '\\200', '\\201', '\\202', '\\203', '\\204', '\\205', '\\206', '\\207', '\\210', '\\211', '\\212', '\\213', '\\214', '\\215', '\\216', '\\217', '\\220', '\\221', '\\222', '\\223', '\\224', '\\225', '\\226', '\\227', '\\230', '\\231', '\\232', '\\233', '\\234', '\\235', '\\236', '\\237', '\\240', '\\241', '\\242', '\\243', '\\244', '\\245', '\\246', '\\247', '\\250', '\\251', '\\252', '\\253', '\\254', '\\255', '\\256', '\\257', '\\260', '\\261', '\\262', '\\263', '\\264', '\\265', '\\266', '\\267', '\\270', '\\271', '\\272', '\\273', '\\274', '\\275', '\\276', '\\277', '\\300', '\\301', '\\302', '\\303', '\\304', '\\305', '\\306', '\\307', '\\310', '\\311', '\\312', '\\313', '\\314', '\\315', '\\316', '\\317', '\\320', '\\321', '\\322', '\\323', '\\324', '\\325', '\\326', '\\327', '\\330', '\\331', '\\332', '\\333', '\\334', '\\335', '\\336', '\\337', '\\340', '\\341', '\\342', '\\343', '\\344', '\\345', '\\346', '\\347', '\\350', '\\351', '\\352', '\\353', '\\354', '\\355', '\\356', '\\357', '\\360', '\\361', '\\362', '\\363', '\\364', '\\365', '\\366', '\\367', '\\370', '\\371', '\\372', '\\373', '\\374', '\\375', '\\376', '\\377'] 
```

示例用法以 little-endian 字节顺序将一些 4 字节整数编码为 C 字符串，每 50 个字符插入新行： v

```
mp = c_escape()
vals = [30,50,100]
bytearr = [z for i, x in enumerate(vals) for z in x.to_bytes(4, 'little', signed=x<0)]
"".join(mp[x] if not type(mp[x]) is tuple else mp[x][1 if not i == len(bytearr)-1 and bytearr[i+1] in list(range(ord('0'), ord('7')+1)) else 0] + ("\"\n\t\"" if (i % 50) == 49 else "") for i, x in enumerate(bytearr))

#output: '\\36\\0\\0\\0002\\0\\0\\0d\\0\\0\\0' 
```

# python - 恒定时间随机选择和删除

> ID：14945096
> 
> 赞同：3
> 
> 时间：2013-02-18T20:53:53.447
> 
> 标签：python, data-structures, graph

我正在尝试在 Python 中为 MultiGraph 实现边缘列表。

**到目前为止我已经尝试过：**

```
>>> l1 = Counter({(1, 2): 2, (1, 3): 1})
>>> l2 = [(1, 2), (1, 2), (1, 3)] 
```

`l1`对两个顶点之间的所有边进行恒定时间删除（例如`del l1[(1, 2)]`），但在这些边上进行线性时间随机选择（例如`random.choice(list(l1.elements()))`）。请注意，您必须对`elements`（相对于`l1`自身）进行选择。

`l2`具有恒定时间随机选择 ( `random.choice(l2)`) 但线性时间删除所有等于给定边 ( `[i for i in l2 if i != (1, 2)]`) 的元素。

问题：是否有 Python 数据结构可以同时提供恒定时间随机选择和删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:15:00.663

我认为您尝试做的事情在理论上是无法实现的。

如果您使用加权值来表示重复项，则无法获得恒定时间随机选择。您可能做的最好的事情是某种跳过列表类型的结构，它可以让您通过加权索引对元素进行二进制搜索，这是对数的。

如果您*不*使用加权值来表示重复项，那么您需要一些允许您存储多个副本的结构。并且哈希表不会这样做 - dup 必须是独立的对象（例如，`(edge, autoincrement)`），这意味着无法在恒定时间内删除所有匹配某个标准的对象。

如果您可以接受对数时间，那么显而易见的选择是树。例如，使用[`blist`](http://stutzbachenterprises.com/blist/sortedlist.html)：

```
>>> l3 = blist.sortedlist(l2) 
```

随机选择一个：

```
>>> edge = random.choice(l3) 
```

[文档](http://docs.python.org/2/library/random.html#random.choice)似乎并不能保证这不会做 O(n) 的事情。但幸运的是，[3.3](http://hg.python.org/cpython/file/3.3/Lib/random.py#l246)和[2.7](http://hg.python.org/cpython/file/2.7/Lib/random.py#l272)的源代码表明它会做正确的事情。如果你不相信这一点，那就写吧`l3[random.randrange(len(l3))]`。

要删除边缘的所有副本，您可以这样做：

```
>>> del l3[l3.bisect_left(edge):l3.bisect_right(edge)] 
```

或者：

```
>>> try:
...     while True:
...         l3.remove(edge)
... except ValueError:
...     pass 
```

该文档解释了所涉及的每个操作的确切性能保证。特别是，`len`是常数，而索引、切片、按索引或切片删除、二等分和按值删除都是对数的，所以这两个操作最终都是对数的。

（值得注意的是，它`blist`是 B+Tree；您可能会从红黑树、treap 或其他东西中获得更好的性能。您可以在 PyPI 上找到大多数数据结构的良好实现。）

* * *

正如 senderle 所指出的，如果边的最大副本数远小于集合的大小，您可以创建一个数据结构，在时间上与最大副本数成二次方。将他的建议转化为代码：

```
class MGraph(object):
    def __init__(self):
        self.edgelist = []
        self.edgedict = defaultdict(list)
    def add(self, edge):
        self.edgedict[edge].append(len(self.edgelist))
        self.edgelist.append(edge)
    def remove(self, edge):
        for index in self.edgedict.get(edge, []):
            maxedge = len(self.edgelist) - 1
            lastedge = self.edgelist[maxedge]
            self.edgelist[index], self.edgelist[maxedge] = self.edgelist[maxedge], self.edgelist[index]
            self.edgedict[lastedge] = [i if i != maxedge else index for i in self.edgedict[lastedge]]
            del self.edgelist[-1]
        del self.edgedict[edge]
    def choice(self):
        return random.choice(self.edgelist) 
```

（当然，您可以将 replace-list-with-list-comprehension 行更改为三行 find-and-update-in-place，但这仍然与重复次数成线性关系。）

显然，如果您打算真正使用它，您可能需要稍微加强一下课程。通过实现一些方法并让适当的/填充其余部分，您可以使其看起来像 a `list`of edges、a `set`of `tuple`s 每个边的多个副本、 a`Counter`等。[`collections.abc.Foo`](http://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes)[`collections.Foo`](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)

* * *

那么，哪个更好？好吧，在您的示例中，平均重复计数是列表大小的一半，最大值是列表大小的 2/3。如果这对您的真实数据是正确的，那么这棵树会好得多，因为`log N`显然会被吹走`(N/2)**2`。另一方面，如果重复很少，senderle 的解决方案显然会更好，因为`W**2`如果`W`是 1，仍然是 1。

当然，对于 3 元素样本，恒定开销和乘数将主导一切。但大概你真正的收藏并没有那么小。（如果是，只需使用`list`...）

如果您不知道如何表征您的真实数据，请编写两个实现并使用各种实际输入对它们进行计时。

# firefox - Firefox 脚本：将 python 脚本附加到 Firefox 热键

> ID：14945104
> 
> 赞同：0
> 
> 时间：2013-02-18T20:54:17.760
> 
> 标签：firefox, firefox-addon

是否可以调用由 firefox 热键调用的 python 脚本？

基本上我希望能够键入 +P （例如）并调用一个脚本，我可以在其中访问当前的 Firefox 环境并做一些事情。

特别是，我想获取当前 url 并将其附加到文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:03:25.297

基本上我需要为firefox编写一个插件。[在这里](http://dalelane.co.uk/blog/?p=511)找到了解释它的博客条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:41:32.053

我没有发现任何简单的扩展程序可以调用热键来调用脚本。Vimperator 可以做到这一点，但它可能有点复杂。

我认为最简单的方法是使用 FireGesutres 扩展脚本，通过鼠标手势调用它。我写了一个脚本来调用 Chrome 打开当前的 url。

[https://github.com/muzuiget/firegestures-scripts/blob/master/open_in_other_browser.js](https://github.com/muzuiget/firegestures-scripts/blob/master/open_in_other_browser.js)

只需将`BROWSER`变量替换为您的 python 脚本路径，参数是当前 url。

# ruby-on-rails-3 - 如何在 Jasmine 中包含来自 CDN 的 javascript 文件？

> ID：14945111
> 
> 赞同：6
> 
> 时间：2013-02-18T20:54:38.400
> 
> 标签：ruby-on-rails-3, jasmine

在 Rails 项目中使用 Jasmine 时，为了保持 Jasmine 规范中的依赖关系一致，我想从 cdn 中提取 jquery，就像在真实页面上所做的那样。我尝试在我的 Jasmine.yml 文件中这样做：

```
helpers:
  - http://code.jquery.com/jquery-1.9.1.js 
```

但是，这永远不会奏效，因为在查看 localhost:8888 的源代码时，我得到：

```
<script src="/__spec__/http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script> 
```

你如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T18:19:57.933

[如https://github.com/pivotal/jasmine-gem/issues/135](https://github.com/pivotal/jasmine-gem/issues/135)中的回答

我写了一个助手来加载外部 javascripts。这不是最好的解决方案（我更喜欢使用配置文件），但它对我有用。

```
var head = document.getElementsByTagName('head')[0];
var jQueryScript = document.createElement('script');
jQueryScript.setAttribute('type', 'text/javascript');
jQueryScript.setAttribute('src', '//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js');
head.appendChild(jQueryScript); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T21:03:14.687

@emrox 的答案是正确的，适用于 jasmine 2.0。

但是在**jasmine 2.1.3**中却没有。这是因为在运行测试时（我使用的是 Chutzpah）**“http:”**没有预先添加到 CDN 引用中。它在 jasmine 的 2.0 版中。

我实施的有效修复涉及以下代码行：

> jQueryScript.setAttribute('src', ' [http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js) ');

希望这可以在他们决定降级到 2.0 之前帮助他们！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T01:24:24.680

问题[135](https://github.com/jasmine/jasmine-gem/issues/135)做到了，因此您可以在 jasmine.yml 文件中列出 CDN 条目。例如

```
src_files:
  - http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js
  - http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js
  - lib/javascript/**/*.js 
```

# c# - 无法在泛型集合中更改结构的成员值

> ID：14945118
> 
> 赞同：8
> 
> 时间：2013-02-18T20:55:10.323
> 
> 标签：c#, .net, struct, generic-list, generic-collections

想象一下`struct`：

```
 struct Person
        {
             public string FirstName { get; set; }
             public string LastName { get; set; }
        } 
```

以下代码：

```
 var list = new List<Person>();
        list.Add(new Person { FirstName = "F1", LastName = "L1" });
        list.Add(new Person { FirstName = "F2", LastName = "L2" });
        list.Add(new Person { FirstName = "F3", LastName = "L3" });

        // Can't modify the expression because it's not a variable
        list[1].FirstName = "F22"; 
```

当我想更改`Property`' 的值时，它会给我以下错误：

```
Can't modify the expression because it's not a variable 
```

同时，当我尝试在数组中更改它时，例如`Person[]`它可以正常工作而没有任何错误。与泛型集合一起使用时，我的代码有任何问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T20:59:43.820

当您`struct`通过`List[]`索引器返回时，它会返回条目的*副本*。因此，如果您分配了`FirstName`那里，它将被丢弃。因此编译器错误。

要么将你重写`Person`为引用类型`class`，要么进行完全重新分配：

```
Person person = list[1];
person.FirstName = "F22";
list[1] = person; 
```

一般来说，可变结构会带来诸如此类的问题，这些问题可能会在未来引起头痛。除非您有充分的理由使用它们，否则您应该强烈考虑更改您的`Person`类型。

[为什么可变结构是“邪恶的”？](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T13:04:33.350

显然，问题的一部分仍然没有答案。`List<Person>`和有什么区别`Person[]`。在按索引获取元素方面，`List`调用返回值类型实例副本的索引器（方法），在相反的数组中，按索引返回的不是副本，而是指向索引处元素的托管指针（使用特殊的 IL 指令[ldelema](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldelema.aspx)）。

当然，如其他答案中所述，可变值类型是邪恶的。看一个简单的例子。

```
var en = new {Ints = new List<int>{1,2,3}.GetEnumerator()};
while(en.Ints.MoveNext())
{
    Console.WriteLine(x.Ints.Current);
} 
```

惊讶吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:26:15.393

像这样重做`struct`：

```
 struct Person
    {
         private readonly string firstName;
         private readonly string lastName;
         public Person(string firstName, string lastName)
         {
             this.firstName = firstName;
             this.lastName = lastName;
         }
         public string FirstName { get { return this.firstName; } }
         public string LastName { get { return this.lastName; } }
    } 
```

以下代码为：

```
 var list = new List<Person>();
    list.Add(new Person("F1", "L1"));
    list.Add(new Person("F2", "L2"));
    list.Add(new Person("F3", "L3"));

    // Can modify the expression because it's a new instance
    list[1] = new Person("F22", list[1].LastName); 
```

这是由于`struct`. 使其不可变并在这些约束内工作，问题就会消失。

# java - 安全地将字符串传递给 javascript

> ID：14945120
> 
> 赞同：2
> 
> 时间：2013-02-18T20:55:15.213
> 
> 标签：java, javascript, jstl

我正在尝试将我的 java 代码中的字符串传递给 javascript，如下所示：

```
myData.data = "${data.myString}"; 
```

如果`myString`包含一个`"`

我尝试存储一个javascript安全字符串，只是替换`"`为，`\"`但是当我`myString`在我的jsp中使用时，我得到一个丑陋的输出，`\"`显示而不是`"`

安全传递字符串而不弄乱我的其余输出的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:08:50.090

将其编码到 JSP 中的 html 中：

```
<input id="test_hide" type="hidden" value="${URIUtil.encodeAll("http://www.google.com?q=a b","UTF-8")}"> 
```

然后在 JavaScript 中：

```
 myData.data = decodeURIComponent(document.getElementById('test_hide').getAttribute('value')); 
```

[Java - 将字符串转换为有效的 URI 对象](https://stackoverflow.com/questions/573184/java-convert-string-to-valid-uri-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:15:19.800

Replacing the double quotes with `&quot;` should work

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:17:38.603

一个糟糕的解决方案：

检查您的字符串是否有双引号，如果是，则使用

```
myData.data = '${data.myString}'; 
```

如果它包含单引号使用

```
myData.data = "${data.myString}"; 
```

如果您同时使用单引号和双引号，这将爆炸。

一个很好的解决方案：

只需使用

```
&quot; 
```

# compass-sass - 我可以将 Compass 配置为根据环境或 output_style 写入单独的目录吗？

> ID：14945121
> 
> 赞同：1
> 
> 时间：2013-02-18T20:55:15.320
> 
> 标签：compass-sass

使用 Compass，是否可以根据 config.rb 中的`environment`or`output_style`变量定义两个要编译的目录？

例如，我想要两个目录：

*   `/css/`
*   `/css/dev/`

当 Compass 的配置`environment`设置为 时`:production`，它会将样式编译为`/css/`. 但是，当`environment`设置为时`:development`，它会将样式编译为`/css/dev/`.

同样，是否可以根据`output_style`选项进行相同的操作？例如，如果是`:expanded`，它将编译到生产目录，如果是`:compressed`，它将编译到开发目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:42:38.750

这应该可以使用条件语句来实现：

```
if output_style == :expanded
  environment = :development
  css_dir = 'css/dev'
  sass_options = { :debug_info => true }
else
  environment = :production
  css_dir = 'css'
end 
```

# c# - 为什么我会在中继器中丢失选定的 RadComboBox 项目？

> ID：14945134
> 
> 赞同：1
> 
> 时间：2013-02-18T20:56:27.293
> 
> 标签：c#, asp.net, telerik, repeater

我在转发器中使用`RadComboBox`with `AutoPastback`enabled，其中数据由`LinqDataSource`.
一切正常，除非我从`RadComboBox`.
回发后，选定的项目`RadComboBox`会消失并清除，就像没有选择任何内容一样。

代码 ：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="LinqDataSource4" OnItemDataBound="Repeater1_ItemDataBound" OnItemCreated="Repeater1_ItemCreated">
    <ItemTemplate>
        <table class="expertMode">
            <tr>
                <td>
                    <telerik:RadComboBox ID="RadComboBox66" runat="server" AutoPostBack="true" EmptyMessage="نام صفت مثل : رنگ"  DataTextField="Key" DataValueField="Key" AllowCustomEntry="True"></telerik:RadComboBox>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:Repeater> 
```

# ruby-on-rails - 在 HAML 4 中过滤“咖啡未定义错误”

> ID：14945135
> 
> 赞同：3
> 
> 时间：2013-02-18T20:56:32.113
> 
> 标签：ruby-on-rails, gem, coffeescript, haml

出于某种原因，我部署的 rails 应用程序现在给了我一个：

**Haml::Explore 中的错误#index**

**过滤器“咖啡”未定义。**

...更新到最新版本的 rails 和最新的 haml 4 之后。

在本地，我没有收到此错误。Haml 版本 4 应该支持咖啡过滤器。所有其他过滤器似乎都可以正常工作。

这是部署服务器上的捆绑包列表：

```
actionmailer (3.2.12)
actionpack (3.2.12)
activemodel (3.2.12)
activerecord (3.2.12)
activeresource (3.2.12)
activesupport (3.2.12)
addressable (2.3.2)
anjlab-bootstrap-rails (2.3.0.0)
arel (3.0.2)
aws-sdk (1.3.9)
bcrypt-ruby (3.0.1)
builder (3.0.4)
bundler (1.2.1)
capistrano (2.14.2)
cocaine (0.4.2)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
devise (2.2.3)
erubis (2.7.0)
execjs (1.4.0)
faraday (0.8.5)
font-awesome-sass-rails (3.0.2.1)
haml (4.0.0)
haml-rails (0.4)
hashie (1.2.0)
highline (1.6.15)
hike (1.2.1)
httparty (0.10.2)
httpauth (0.2.0)
i18n (0.6.1)
journey (1.0.4)
jquery-fileupload-rails (0.4.0)
jquery-rails (2.2.1)
json (1.7.7)
jwt (0.1.5)
kgio (2.8.0)
koala (1.6.0)
mail (2.4.4)
mime-types (1.21)
multi_json (1.6.1)
multi_xml (0.5.3)
multipart-post (1.1.5)
mysql2 (0.3.11)
net-scp (1.1.0)
net-sftp (2.1.1)
net-ssh (2.6.5)
net-ssh-gateway (1.2.0)
nokogiri (1.5.6)
oauth2 (0.8.0)
omniauth (1.1.3)
omniauth-facebook (1.4.1)
omniauth-oauth2 (1.1.1)
orm_adapter (0.4.0)
paperclip (3.4.0)
paperclip-remote (0.5.0)
polyamorous (0.5.0)
polyglot (0.3.3)
rabl (0.8.0)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.12)
railties (3.2.12)
raindrops (0.10.0)
rake (10.0.3)
rdoc (3.12.1)
right_aws (3.0.4)
right_http_connection (1.3.0)
rmagick (2.13.2)
rocket_tag (0.5.6)
sass (3.2.5)
sass-rails (3.2.6)
sprockets (2.2.2)
squeel (1.0.16)
sugar-rails (1.3.7)
thor (0.17.0)
tilt (1.3.3)
treetop (1.4.12)
twitter-text (1.5.0)
tzinfo (0.3.35)
uglifier (1.3.0)
unicorn (4.6.0)
uuidtools (2.1.3)
warden (1.2.1)
will_paginate (3.0.4) 
```

简单的咖啡过滤器：

```
%html
...
:coffee
  alert "hello" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T05:57:55.580

首先，确保您在生产中使用[execjs](https://github.com/sstephenson/execjs)兼容的运行时。如果您要部署到 Window 或 Mac OS，或者您在生产环境中安装了 node.js，那么您应该没问题。

然后，确保在添加任何 gem 后重新启动生产中的应用程序。似乎只有在生产中重新启动服务器后才会加载咖啡过滤器（请参阅[https://github.com/paulnicholson/coffee-filter/issues/6](https://github.com/paulnicholson/coffee-filter/issues/6)）。

# sql - 查询帮助，排名功能可能吗？

> ID：14945136
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:56:43.100
> 
> 标签：sql

排名功能？任何人都可以帮助我解决这个问题。我希望我的查询只返回 P0260 字段的最低日期和绘画字段的最低日期。

```
工作 ID 行订单 RCVD 使用日期
P0260 61785 1 2400 24 2012 年 10 月 26 日
P0260 63462 3 2400 24 2012 年 11 月 14 日
P0260 66372 1 1 0 2/15/2013
P0260 66371 1 5 0 2013 年 3 月 1 日
绘画 12246 1 29 27 11/30/2006
绘画 30885 1 160 0 9/29/2009
绘画 30885 2 160 0 9/29/2009
绘画 31155 1 25 0 2009 年 11 月 6 日

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:02:42.847

好的，在不知道您正在使用的 RDBMS（和版本）的情况下，此解决方案应该适用于其中的大多数：

```
SELECT A.*
FROM YourTable A
INNER JOIN (SELECT JOB, MIN([USE DATE]) MinUseDate
            FROM YourTable
            GROUP BY JOB) B
    ON A.JOB = B.JOB AND A.[USE DATE] = B.MinUseDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:17:51.730

选择 query2.PART_ID、query2.ID、query2.LINE_NO、query2.DEL_SCHED_LINE_NO、query2.SYSADM_PURC_LINE_DEL.ORDER_QTY、query2.RECEIVED_QTY、query2.DESIRED_RECV_DATE、query2.SYSADM_PURC_ORDER_LINE.ORDER_QTY、query2.TOTAL_RECEIVED_QTY、INNER2。[使用日期] FROM 查询JOIN (SELECT query2.PART_ID, MIN(query2.[USE DATE]) MinUseDate FROM query2 GROUP BY PART_ID) B ON query2.PART_ID = B.PART_ID AND query2.[USE DATE] = B.MinUseDate;

# ftp - 使用 pandas 通过 FTP 检索文件

> ID：14945144
> 
> 赞同：2
> 
> 时间：2013-02-18T20:57:36.857
> 
> 标签：ftp, pandas, unzip, gunzip

我刚刚开始接触 pandas（这很棒），我需要做的是将压缩的基因组学类型文件从 ftp 站点读入 pandas 数据帧。这是我尝试过的，但遇到了很多错误：

```
from pandas.io.parsers import *

chr1 = 'ftp://ftp.ncbi.nih.gov/snp/organisms/human_9606/chr_rpts/chr_1.txt.gz'

CHR1 = read_csv(chr1, sep='\t', compression = 'gzip', skiprows = 10)

print type(CHR1)
print CHR1.head(10) 
```

理想情况下，我想做这样的事情：

```
from pandas.io.data import *
AAPL = DataReader('AAPL', 'yahoo', start = '01/01/2006') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:09:37.167

这个问题的有趣部分是如何*从 ftp 流式传输 (gz) 文件*，这是在[此处](http://www.enricozini.org/2011/cazzeggio/python-gzip/)讨论的，其中声称以下内容将在 Python **3.2**中工作（但[在 2.x 中不会，也不会被反向移植](http://bugs.python.org/issue11608)） ，在我的系统上就是这种情况：

```
import urllib.request as ur
from gzip import GzipFile

req = ur.Request(chr1) #  gz file on ftp (ensure startswith 'ftp://')
z_f = ur.urlopen(req)

# this line *may* work (but I haven't been able to confirm it)
# df = pd.read_csv(z_f, sep='\t', compression='gzip', skiprows=10)

# this works (*)
f = GzipFile(fileobj=z_f, mode="r")
df = pd.read_csv(f, sep='\t', skiprows=10) 
```

(*) 这里`f`是“类文件”，从某种意义上说，我们可以执行`readline`（逐行读取），而不必下载/打开整个文件。

.

*注意：我无法将[`ftplib`图书馆](http://docs.python.org/2/library/ftplib.html)带到`readline`，不清楚是否应该这样做。*

# java - 检查物体坐标是否满足要求

> ID：14945145
> 
> 赞同：0
> 
> 时间：2013-02-18T20:57:42.737
> 
> 标签：java

我正在制作游戏，我需要检查对象的坐标是否符合要求（目标坐标）并具有允许的 +- 差异。

例子：

```
int x; //current object X coordinate
int y; //current object Y coordinate

int destinationX = 50; //example X destination  value
int destinationY = 0;  //example Y destination value
int permittedDiference = 5;

boolean xCorrect = false;
boolean yCorrect = false; 
```

我正在尝试创建算法，检查

```
 if (x == destinationX + permittedDifference || x == destinationX - permittedDifference)
 {
     xCorrect = true;
 }

 if (y == destinationY + permittedDifference || y == destinationY - permittedDifference)
 {
     yCorrect = true;
 } 
```

这听起来像是最简单的方法，但也许有更好的方法？将不胜感激一些提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:01:13.200

你可以[`Math.abs()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#abs%28int%29)在这里使用方法。`x`获取和之间的绝对差`destinationX`，并检查它是否小于或等于`permittedDifference`：

```
xCorrect = Math.abs(x - destinationX) <= permittedDifference;
yCorrect = Math.abs(y - destinationY) <= permittedDifference; 
```

# c++ - VS 2012 C++：我可以使用源代码而不是符号来调试吗？

> ID：14945148
> 
> 赞同：0
> 
> 时间：2013-02-18T20:57:53.527
> 
> 标签：c++, visual-studio, visual-studio-debugging

我目前正在为 NodeJS 编写本机扩展。这基本上是一个 dll，当你请求它时 NodeJS 会加载它。

我将 VS2012 附加到节点进程。我想调试执行加载的 Node 代码。

我有 node 的 .cc 和 .h 文件，但是我找不到 .pdb 文件。如何在 Node 源中设置断点？

更新：我确实有一个 node.lib 文件。那可以代替pdb吗？

更新 2：切线，但是对于专门调试 NodeJS 的任何人，Node 实际上确实提供了一个 pdb，可在[http://nodejs.org/dist/v0.8.22/node.pdb](http://nodejs.org/dist/v0.8.22/node.pdb)获得（将版本号替换为您正在寻找的任何版本为了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:05:40.370

如果无法将实际源代码与汇编代码相关联，就无法从源代码进行调试。您需要一个 pdb 文件。

可以这样想：任何编译器都可以生成代码，即使 VS2012 编译器生成了代码，VS 也无法对所有代码生成阶段进行逆向工程，以了解特定汇编命令属于哪个源代码行。而通过内联等，它甚至给任务增加了更多的难度。

因此，任何调试器都无法在没有调试符号的情况下进行调试，将汇编语义反转为更高级别的语言语义是不可能的（在编译过程中会丢失结构信息）。否则，静态分析工具将很容易编写。

**编辑**：.lib 文件也不包含调试信息，只是链接它的必要信息。所以你也倒霉了。

# mysql - mySQL ODBC 5.1 问题：未找到数据源名称且未指定默认驱动程序

> ID：14945151
> 
> 赞同：1
> 
> 时间：2013-02-18T20:58:15.137
> 
> 标签：mysql, visual-studio-2010, exception, odbc, driver

我已经搜索了好几天了（包括从本网站的一个链接尝试解决方案），但我仍然无法让它工作......

问题：我在 Windows 7 64 位机器上将旧的 Visual Studio 2005 项目转换为 2010。一切正常，包括我与 Oracle 数据库的 ODBC 连接……但是，我无法像在 WinXP 32 位机器上使用 VS 2005 那样连接到 mySQL 数据库。

我尝试过：使用 32 位驱动程序卸载 MySQL 的 64 位 ODBC 驱动程序。我将此添加到我的系统 DSN 并且测试连接工作正常（来自 odbcad32.exe）。此驱动程序的所有其他实例都将从 odbcad32 和 64 位 odbc 客户端的用户 DSN 中删除。如果不访问此数据库，我将无法继续我的项目。我已经尝试了每个网站线程的所有内容，但我仍然找不到解决方案。

我收到此错误：

线程 '' (0x1648) 以代码 0 (0x0) 退出。System.Data.dll 中发生“System.Data.Odbc.OdbcException”类型的第一次机会异常发生 ODBC 异常：错误 [IM002] [Microsoft][ODBC 驱动程序管理器] 未找到数据源名称并且未指定默认驱动程序 A App_Web_uoi23wal.dll 中出现“System.NullReferenceException”类型的第一次机会异常

这是我正在使用的连接字符串：

mySqlConnectionString = "驱动={MySQL ODBC 5.1 驱动};服务器=xx.xxx.xx.xx;端口=3306;数据库=xxxx;用户=xxxx;密码=xxxx;";

谁能帮我解决这个问题？我已经黔驴技穷了！;)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T18:40:51.210

找不到其他人解决了这个问题，但我尝试了这个并且都为我工作。原帖很旧，但如果其他人读到这个，可能的解决方案。

```
"Driver={MySQL ODBC 5.2 ANSI Driver}; Server=localhost; Database=***; User=****; Password=****; Option=3;"
"Driver={MySQL ODBC 5.2 Unicode Driver}; Server=localhost; Database=***; User=****; Password=****; Option=3;" 
```

似乎您必须实际指定“ANSI”或“UNICODE”字符串而不是“w”或“a”，正如其他论坛和线程上所建议的那样。我认为它的指定与 ODBC 数据源管理器菜单（控制面板 -> 系统 -> 管理工具 -> 数据源 (ODBC) -> 驱动程序）中的完全一样并非巧合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T04:17:00.947

这在 MySQL 5.1 上对我有用

数据源 (ODBC)： - 用户 DSN：删除指定的用户 DSN - 系统 DSN：创建新的系统 DSN 确保您只有系统 DNS，而不是两者。

# android - 在 Android 服务中使用 WebView.findAll()

> ID：14945154
> 
> 赞同：1
> 
> 时间：2013-02-18T20:58:19.087
> 
> 标签：android, service, webview

我已经编写了`Service`这样的程序：

```
public int onStartCommand(Intent intent, int flags, int startId) {
    loadVariables();
    webview = new WebView(this);
    webview.loadUrl(url);
    makeNotification = notificationMaker();
    result = webview.findAll(part1) > 0;
    if (result == true){
        notification();
    }
    return super.onStartCommand(intent, flags, startId);
} 
```

我想启动它并检查是否找到了 String part1`webview`并发出通知，但它什么也没做。

part1 和 url 已正确加载，并且通知也有效（我通过在 toast 中打印它们来检查它），所以`webview`.

是否需要在 XML 文件中显示它，如果是，我认为它不适用于服务，对吗？

# php - 从 mysql 查询中在 php 中的列上设置默认排序

> ID：14945157
> 
> 赞同：0
> 
> 时间：2013-02-18T20:58:22.460
> 
> 标签：php, mysql, sorting, html-table

我正在从数据库中提取一些数据，它是一个私人站点，所以我现在不太担心使用 mysql 虽然我知道我应该使用 PDO，只是还没有进行切换：

```
<table id="table" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0">         
<thead>
<tr>
<th>
       <span class="th">
           <span class="arrow"></span>
           <span class="icon"></span>
           <span class="title">Exception ID</span>
       </span>
</th>
<th>
       <span class="th">
           <span class="arrow"></span>
           <span class="icon"></span>
           <span class="title">Exception</span>
       </span>
</th>
<th>
       <span class="th">
           <span class="arrow"></span>
           <span class="icon"></span>
           <span class="title">First 250 chars of code</span>
       </span>
</th>
<th>
       <span class="th">
           <span class="arrow"></span>
           <span class="icon"></span>
           <span class="title"># of exceptions</span>
       </span>
</th>
<th>
       <span class="th">
           <span class="arrow"></span>
           <span class="icon"></span>
           <span class="title">Bug #</span>
       </span>
</th>
</tr></thead><tbody>

    <?php
//Need to find the total rows in the snippets_link_email_id because well need to show the last x records, so we get total number or rows and then minus the total RECORDS to only select the last x
$total_snippet_check = mysql_query("SELECT COUNT(email_id) as num_rows FROM snippets_link_email_id");
$row = mysql_fetch_object($total_snippet_check);
$total_rows = $row->num_rows;

//finding out how many exceptions there was in the last 24 hours from a table that records total exceptions every hour
$how_many_recent_crashes = mysql_query("SELECT * FROM crash_log_entries ORDER BY crash_id DESC LIMIT 24");
    while ($row_recent_crashes = mysql_fetch_array($how_many_recent_crashes))
    {
        $crash_processed = $row_recent_crashes['crash_processed'];
        $crash_processed_total += $crash_processed;
    }

$which_records = $total_rows - $crash_processed_total;

    //need info on that snippet
$feedback_query_first = 
    "SELECT *, COUNT(*) AS tot_snippets
    FROM snippets 
    LEFT JOIN snippets_link_email_id
    ON (snippets.snippet_id = snippets_link_email_id.snippet_id)
    WHERE snippets_link_email_id.email_id > $which_records
    GROUP BY snippets.snippet_id
    ORDER BY tot_snippets asc";

$result1 = mysql_query($feedback_query_first);

    while ($row1 = mysql_fetch_array($result1))
        {   
        $i = $row1['snippet_id'];
        //Need to find the total snippets for the current snippet
        $feedback_query = mysql_query(
        "SELECT * FROM snippets 
        LEFT JOIN snippets_link_email_id
        ON snippets.snippet_id = snippets_link_email_id.snippet_id 
        WHERE snippets_link_email_id.snippet_id = $i 
        AND snippets_link_email_id.email_id > $which_records");
        $tot_snippets = mysql_num_rows($feedback_query);

        $snippet_text_pre = $row1['snippet_text'];
        $snippet_text_pre1 = htmlspecialchars($snippet_text_pre);
        $snippet_text = str_replace("&lt;br /&gt;", "<br />",$snippet_text_pre1);
        $snippet_text =  substr($snippet_text,0,250);

        $comment = $row1['comment'];
        $comment_short = substr($comment, 0, 35);
        $note_length = strlen($comment);
        $snippet_id = $row1['snippet_id'];
        $email_id = $row1['email_id'];

        $query_exceptions = "SELECT * FROM emails WHERE email_id = $email_id ORDER BY email_id DESC";
        $result2 = mysql_query($query_exceptions);

        while ($row2 = mysql_fetch_array($result2))
        {
        $actual_exception = $row2['actual_exception'];  
        }

            echo '<tr><td>'.$snippet_id.'</td>';
            echo '<td>'. $actual_exception.'</td>';
            echo '<td>'. $snippet_text.'....</td>';
            echo '<td>'. $tot_snippets.'</td>';
            $tot_tot += $tot_snippets;
            echo '<td>'. $comment . '</td></tr>';

        }   

echo "</tbody></table>"; 

echo "the total exceptions for this time period is: " . $tot_tot . "<br />";    
?> 
```

好的，希望没关系，我过滤掉了所有不相关的东西，所以希望代码有意义。现在有没有办法`$tot_snippets`在页面加载时默认排序而不使用完整的 jquery 排序解决方案，因为我只想按此列排序，因为我不需要更新它？我认为我不能使用它进行排序，`orderby`因为 的值`tot_snippets`不是列值，但我似乎找到的所有解决方案都有一个完整的排序解决方案，并且大多数涉及 Jquery，如果 Jquery 是最好的选择，那就这样吧，但我想可能有更简单的方法？

//编辑
我更新了代码并基本上添加了整个代码，我意识到我的代码很混乱，我是自学的，只是学到了足够的东西来做我需要做的事情。我敢肯定它可以改得更紧凑，但我的主要问题是即使使用以前的解决方案之一，它仍然没有按异常列的 # 排序，我猜我的解决方案很好省略一些其他代码意味着它不起作用，所以我决定这次包含整个代码。我最初忽略它是为了让它不那么复杂，但我现在意识到这可能会适得其反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:07:57.433

您实际上可以结合这两个查询：

```
SELECT snippets.snippet_id,COUNT(snippets_link_email_id.id) FROM snippets 
LEFT JOIN snippets_link_email_id ON snippets.snippet_id = snippets_link_email_id.snippet_id 
WHERE snippets_link_email_id.snippet_id = $i 
AND snippets_link_email_id.email_id > $which_records
GROUP BY snippets.snippet_id 
```

这意味着您只需执行一次查询，而不是 (numsnippets + 1) 次查询。这也允许通过添加以下内容按计数排序：

```
ORDER BY COUNT(snippets_link_email_id.id) 
```

到查询结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:14:24.293

在我看来，您可以跳过第一个查询。并在第二个查询中使用 group by snippet_id 获取不同的 id。然后您可以向查询添加计数（我使用别名 tot_snippets）并按别名 tot_snippets 排序。然后你会得到这样的查询

`select *, count(*) as tot_snippets from snippets left join snippets_link_email_id on(snippets.snippet_id = snippets_link_email_id.snippet_id) where snippets_link_email_id.email_id > $which_records group by snippets.snippet_id order by tot_snippets asc`

为了使您的查询更具可读性，请在表上使用别名，并将表片段中的列 snippet_id 命名为 id，这样可以更容易理解您的查询

# c# - 区分手机和平板电脑浏览器

> ID：14945158
> 
> 赞同：7
> 
> 时间：2013-02-18T20:58:28.783
> 
> 标签：c#, javascript, asp.net, mobile, webforms

我知道这个问题已经被打死了，但我不想要任何超级复杂的东西。

我们的网站有一个配套应用程序，该应用程序仅与 7 英寸和 10 英寸平板电脑兼容。我们只需要提醒那些设备上的用户我们的应用程序。问题是，我不能通过决议去。我的 Galaxy S3 有一个 1280 x 720 的屏幕，但显然不是平板电脑。我也无法终生找到获得屏幕**物理尺寸的方法。**我想出的唯一解决方案是检测设备是否可以使用`MobileCapabilities.CanInitiateVoiceCall`. 不幸的是，老板对这个解决方案不满意。

那么......如何在我的网络应用程序（服务器或客户端）中区分手机和平板电脑？

**更新：**到目前为止，Android 团队的博客文章似乎是最好的方法： *所有*Android 手机都在 UserAgent 字符串中使用“Mobile”，因此检查“Mobile”**和*“Android”会告诉你是否它是一部手机，而“Android”应该是一部平板电脑。iOS 设备应该同样简单——到目前为止，检查“iPhone”与“iPad”似乎已经奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T16:02:48.290

我知道这有点晚了，但我一直在寻找同样的东西。

[Wurfl](http://wurfl.sourceforge.net/)有你想要的。你可以很容易地实现它，甚至有一个你可以查询的 api。

对于 ASP.NET 应用程序，您必须首先进行一次性初始化。

```
public class Global : HttpApplication
{
   public const String WurflDataFilePath = "~/App_Data/wurfl.zip";
   private void Application_Start(Object sender, EventArgs e)
   {
       var wurflDataFile = HttpContext.Current.Server.MapPath(WurflDataFilePath);
       var configurer = new InMemoryConfigurer().MainFile(wurflDataFile);
       var manager = WURFLManagerBuilder.Build(configurer);
       HttpContext.Current.Cache[WurflManagerCacheKey] = manager;
   }
} 
```

然后像这样使用它。

```
var device = WURFLManagerBuilder.Instance.GetDeviceForRequest(userAgent);
var isTablet = device.GetCapability("is_tablet");
var isSmartphone = device.GetCapability("is_smartphone"); 
```

有关更多信息，请查看[ASP.NET 实现](http://wurfl.sourceforge.net/dotnet_index.php)

希望这可以帮助其他寻找这个的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:56:01.130

您可以尝试进行用户代理检测并搜索关键字，例如，所有非平板设备的用户代理上都有“Mobile Safari”关键字。

# c++ - OpenCV244 Visual Studio 2012 CV_8U 未定义

> ID：14945160
> 
> 赞同：0
> 
> 时间：2013-02-18T20:58:49.087
> 
> 标签：c++, opencv, visual-studio-2012

我使用 Visual Studio 2010 和 OpenCV 2.4.3 已经有一段时间了，一切正常

我现在将 Visual Studio 2010 升级到 2012。

当我使用我在 VS2010 中编写的代码时，它在 2012 年工作得非常好，我得到了这个错误：

![在此处输入图像描述](../Images/34e1a32722f436da2e5baaa303d13fa2.png)

我使用的任何功能都没有其他问题，一切似乎都很好，只是对于我收到错误的这两个实例。

任何解决方案....？

# yeoman - Yeoman 应用程序的目录结构

> ID：14945166
> 
> 赞同：4
> 
> 时间：2013-02-18T20:58:59.897
> 
> 标签：yeoman

使用最新的 yeoman 更新 1.0，我们是否能够更改创建目录结构的方式？例如...如果我想在根目录而不是“/app”文件夹中创建我的文件，这可能吗？另外，如果我们想将我们的资产文件夹命名为“css”、“js”或“img”，这可以实现吗？

我参考这个[先前的问题](https://stackoverflow.com/questions/12691803/is-it-possible-to-change-yeomans-directory-structure)进行更新。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:42:45.507

是的，现在所有内容都包含在 Gruntfile.js 中。你可以随意改变任何你想要的。我们在顶部定义了几个[快捷方式](https://github.com/yeoman/generator-webapp/blob/1e31faa71f2c73e9017a242fee3a080087843ca7/app/templates/Gruntfile.js#L11-L15)`app`，用于快速更改和`dist`目录。

查看[grunt 文档](http://gruntjs.com/sample-gruntfile)，了解如何去做。

# vba - VBA GF(256) 日志表

> ID：14945167
> 
> 赞同：0
> 
> 时间：2013-02-18T20:59:01.333
> 
> 标签：vba, ms-access, qr-code, galois-field, finite-field

我正在开发一个在 vba 中生成 QR 码的功能。我正在关注[本教程](http://www.thonky.com/qr-code-tutorial/introduction/ "http://www.thonky.com/qr-code-tutorial/introduction/")。[我现在正在这一步](http://www.thonky.com/qr-code-tutorial/part-2-error-correction/ "http://www.thonky.com/qr-code-tutorial/part-2-error-correction/")中生成纠错字。这需要 GF(256) 对数/反对数表，[参见此处](http://www.thonky.com/qr-code-tutorial/log-antilog-table/ "http://www.thonky.com/qr-code-tutorial/log-antilog-table/")。我真的不想输入整个表格。有谁知道用于生成这些表的函数，所以我可以将它们存储在数组中？该教程有一个指向如何生成表的链接，但它被破坏了。

我应该在前面提到它，但是这将在 access 中运行，因此粘贴到 excel 中效果不佳。但是当我写这篇文章时，我意识到我可以使用访问表。虽然我更愿意在代码中完成这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T09:14:22.907

```
Const GF = 256 '// define the Size & Prime Polynomial of this Galois field
Const PP = 285
Dim logg(GF)  'establish global Log and Antilog arrays
Dim alogg(GF)

'fill the logg() and alogg() arrays with appropriate integer values

logg(0) = 1
alogg(0) = 1

For i = 1 To 255
  alogg(i) = alogg(i - 1) * 2
  If alogg(i) >= GF Then alogg(i) = alogg(i) Xor PP
  logg(alogg(i)) = i
Next i 
```

# extjs - 无法插入本地存储

> ID：14945169
> 
> 赞同：0
> 
> 时间：2013-02-18T20:59:21.087
> 
> 标签：extjs, insert, sencha-touch, touch, local-storage

我有模型：

```
Ext.define('SizoMag.model.SizoBuscetModel', {  extend: 'Ext.data.Model',
config: {
fields: [{name: 'text', type: 'string'}, {name: 'price', type: 'string'}],
proxy: {
  type: 'localstorage',
  id  : 'buscetmodel'
 }
}
}); 
```

并存储

```
Ext.define('SizoMag.store.SizoBuscetStore', {extend: 'Ext.data.Store',
 config: {
 storeId: 'SizoBuscetStore'
}
}); 
```

但是当我尝试向商店添加条目时 - 出现错误 [WARN][Ext.data.Operation#setModel] 除非您使用元数据定义模型，否则操作需要定义模型。Console.js:35

[WARN][Ext.data.reader.Reader#process] 为了读取记录数据，Reader 需要在其上定义一个模型。Console.js:35

未捕获的类型错误：对象不是函数

我这样补充

```
var store=Ext.getStore('SizoBuscetStore');
store.load();store.add({text:'txt',price:'150'});
store.sync(); 
```

请帮帮我/Tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:58:07.103

试试这个，你需要为商店定义一个模型类型，以便它可以配置它的阅读器：

```
Ext.define('SizoMag.store.SizoBuscetStore', {
    extend: 'Ext.data.Store',
    storeId: 'SizoBuscetStore',
    model: 'SizoBuscetModel'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:12:02.317

嘿，它很简单试试这个

有存货：

```
 Ext.define('e4b.store.Adult_DOBStore', {
extend: "Ext.data.Store",

config: {
    model: "e4b.model.Adult_DOBModel",
    autoLoad: true, 
    clearOnPageLoad: false,
}

         }); 
```

你的模型将是

```
 Ext.define('e4b.model.Adult_DOBModel', {
extend: 'Ext.data.Model',
config: {

    fields: ['Adult1Date'],

    proxy: {
        type: 'localstorage',
        id  : 'adultdob'
    }

       } 
```

});

现在在你的控制器中......

首先获取价值

```
 var A_select1=Ext.getCmp('select1').getValue();

     localStorage.setItem("Adult1_select1",A_select1); //Assign the value to localstore

   var AdultSalutation={
                    // object                               
 'Adult1_select1':A_select1,

                 };

var AdultSalutationstore =Ext.getStore('Adult_AdultSalutationstore');// cal store 

        AdultSalutationstore.add(AdultSalutation);  // add the oject here
      AdultSalutationstore.sync();
   AdultSalutationstore.load(); 
```

# jsf - 同一 Liferay 页面上的 IceFaces 和 PrimeFaces portlet

> ID：14945170
> 
> 赞同：1
> 
> 时间：2013-02-18T20:59:22.810
> 
> 标签：jsf, primefaces, liferay, liferay-6, icefaces

我在 IceFaces 1.8.2 上编写了 portlet。
由于我发现 PrimeFaces 更好，我决定用 JSF2 和 PrimeFaces 3.5 编写我的新 portlet。

另外，一切正常。但是当我试图将我的 PrimeFaces portlet 和 IceFaces portlet 放在一个页面上时，PrimeFaces 不起作用。

UI或多或少还可以，但是javascript中有很多错误。

我能以某种方式解决这个问题吗？

我正在使用 Liferay 6.0.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T15:09:23.497

# Do not include Primefaces and Icefaces portlets on the same portal page!

Since they both rely on jQuery, they will both include (potentially different versions of) jQuery on the page which will cause javascript conflicts. There may be workarounds for this (although I don't know of any), but it is an extremely bad idea.

# ruby-on-rails - Ruby on rails - “无法加载 Java 类 com.ibm.db2.jcc.DB2Driver”

> ID：14945171
> 
> 赞同：1
> 
> 时间：2013-02-18T20:59:26.327
> 
> 标签：ruby-on-rails, jdbc, db2, jrubyonrails

我在用：

1.  Ubuntu 12.04 LTC
2.  JRuby 1.7.2
3.  导轨 3.2.12
4.  DB2 C 速成版 10.1

我的 database.yml 文件如下所示：

```
development:
  adapter: jdbc
  driver: com.ibm.db2.jcc.DB2Driver
  url: localhost:50001/devdb
  host: localhost
  port: 50001
  database: devdb
  username: db2inst1
  password: mypass 
```

但是当我统计我的服务器并打开主页“localhost:3000/”并单击“关于您的应用程序的环境”时，我收到以下错误：

```
cannot load Java class com.ibm.db2.jcc.DB2Driver 
```

你能建议吗？

我发现的唯一建议是将驱动程序添加到我的 JRUBY_HOME/bin/ 文件夹中，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:49:42.960

复制`db2jcc.jar`和`db2jcc_license_cu.jar`到`jruby/lib directory`。

您收到该错误是因为您的类路径中需要 DB2 通用 JDBC 驱动程序 jar

# javascript - 如何使用 CSS 自动滚动内容？

> ID：14945173
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:59:34.360
> 
> 标签：javascript, html, css, slider

我是一名 CSS 初学者。我想只使用 CSS 在我的网站的学分部分滚动开发人员的姓名。喜欢这个网站[wrangle.in](http://www.wrangle.in)。但他们使用 javascript 和 jquery，但我想要纯 CSS 解决方案，但输出与网站相同。任何教程链接都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:28:44.460

当然可以，这是我拼凑的一个简单示例：

```
<div id='container'>
<ul id='credits'>
    <li>Tom Doug</li>
    <li>Sophia</li>
    <li>Emma</li>
    <li>Olivia</li>
    <li>Isabella</li>
    <li>Ava</li>
    <li>Lily</li>
    <li>Zoe</li>
    <li>Chloe</li>
    <li>Mia</li>
    <li>Madison</li>
    <li>Emily</li>
    <li>Ella</li>
    <li>Madelyn</li>
    <li>Abigail</li>
    <li>Aubrey</li>
    <li>Addison</li>
    <li>Avery</li>
    <li>Layla</li>
</ul> 
```

```
#container {
    width: 300px;
    height: 200px;
    overflow: hidden;
    position: relative;
}

#credits {
    width: 300px;
    position: absolute;
    -webkit-animation: goup 5s linear infinite;
    -moz-animation: goup 5s linear infinite;
}

@-webkit-keyframes goup {
    from { top: 0px; }
    to { top: -400px; }
}

@-moz-keyframes goup {
    from { top: 0px; }
    to { top: -400px; }
} 
```

[http://jsfiddle.net/3rJ6t/2/](http://jsfiddle.net/3rJ6t/2/)

注意浏览器之间的差异，CSS3 动画是相当新的东西。

# c# - 为什么 AutoDetectChangesEnabled 默认不设置为 false？

> ID：14945176
> 
> 赞同：5
> 
> 时间：2013-02-18T20:59:43.457
> 
> 标签：c#, entity-framework, ado.net

我想知道为什么`AutoDetectChangesEnabled`DbContext 上的属性默认设置为 false 。

我想批量插入到我的上下文中，您可能知道将自动检测设置为 false 会带来更好的性能。

我的意思是，如果我知道何时检测到我的上下文的变化，我有什么理由不应该设置`AutoDetectChangesEnabled`为`false`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:56:37.113

我认为他们可能希望开箱即用的更常见和非常有用的行为。

```
var mycontext = new DemoContext();
var myEntity = myContent.Thinhymybobs.find(akey);
myEntity.PropX = newvalue;
mycontext.saveChnages(); 
```

发送到数据库的更新是 delta 感知的，并相应地使用更新集语句。所以这对数据库很友好。

在数据库上执行“批量”操作时，性能问题通常是一个自然的想法。所以想知道关闭更改或者甚至使用跟踪是我觉得的一个可能的问题。

这篇文章可能会让你感兴趣。条目的状态。 [http://msdn.microsoft.com/en-us/data/jj592676.aspx](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

# javascript - angularjs将变量传递给控制器

> ID：14945177
> 
> 赞同：2
> 
> 时间：2013-02-18T20:59:44.413
> 
> 标签：javascript, angularjs

我有我的角度控制器设置，就像文档中显示的大多数示例一样，它是一个全局函数。我假设当角度引擎在 html 中看到控制器标签时，控制器类被调用。

我的问题是我想将一个参数传递给我的控制器，但我不知道该怎么做，因为我没有初始化它。我看到一些建议使用 ng-init 的答案。但我的参数不是一个微不足道的字符串 - 它是一个复杂的对象，正在由我的 js 的另一个（非角度）部分加载。它也不能在加载时使用，但需要一段时间才能出现。

所以我需要一种方法将这个对象在它最终完成加载时传递到控制器（或范围）中，以便控制器可以与之交互。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T00:11:09.013

您可以为此使用服务或工厂，并结合承诺：

您可以设置一个返回承诺的工厂，并创建一个全局函数（可从 3rd-party JS 访问）来解决承诺。

注意`$rootScope.$apply()`通话。`then`Angular在一个`$apply`循环之前不会调用 Promise 的函数。请参阅[`$q`文档](http://docs.angularjs.org/api/ng.%24q)。

```
app.factory('fromoutside', function($window, $q, $rootScope) {
    var deferred = $q.defer();

    $window.injectIntoAngularWorld = function(obj) {
        deferred.resolve(obj);
        $rootScope.$apply();
    };

    return deferred.promise;
}); 
```

然后在您的控制器中，您可以请求`fromoutside`服务并在数据到达时绑定到数据：

```
app.controller('main', function($scope, fromoutside) {
    fromoutside.then(function(obj) {
        $scope.data = obj;
    });
}); 
```

然后在 Angular 之外的某个地方：

```
setTimeout(function() {
    window.injectIntoAngularWorld({
        A: 1,
        B: 2,
        C: 3
    });
}, 2000); 
```

[这是一个小提琴](http://jsfiddle.net/hVX7a/1/)。

就个人而言，我觉得这比通过 DOM 进入 Angular 控制器要干净一些。

### 编辑：另一种方法

Mark Rajcok 在评论中询问是否可以对其进行修改以允许多次获取数据。

现在，多次获取数据可能意味着增量更新，或更改对象本身，或其他事情。但需要发生的主要事情是将数据导入 Angular 世界，然后获得正确的 Angular 范围来运行它们`$digest`的 s。

[在这个 fiddle](http://jsfiddle.net/Td7jP/1/)中，我展示了一种方法，当您可能只是从 angular 外部获取对 Array 的更新时。

它使用了与上面的 Promise 示例类似的技巧。

这是主要工厂：

```
app.factory('data', function($window) {
  var items = [];
  var scopes = [];

  $window.addItem = function(item) {
    items.push(item);
    angular.forEach(scopes, function(scope) {
        scope.$digest();
    });
  };

  return {
    items: items,
    register: function(scope) { scopes.push(scope); }
}; 
```

与前面的示例一样，我们将一个函数附加到`$window`服务（全局公开它）。新位公开了一个`register`函数，想要更新的控制器`data`应该使用它来注册自己。

当外部 JS 调用 Angular 时，我们只需遍历所有已注册的作用域并在每个作用域上运行摘要以确保它们已更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T21:16:26.213

In your non-angular JavaScript, you can get access to the scope associated with a DOM element as follows:

```
angular.element(someDomElement).scope().someControllerFunction(delayedData); 
```

I assume you can find someDomElement with a jQuery selector or something.

# mysql - 在外部 mysql 数据约束上加入 sphinx 结果

> ID：14945178
> 
> 赞同：0
> 
> 时间：2013-02-18T20:59:45.730
> 
> 标签：mysql, full-text-search, sphinx

我正在尝试使用基于 mysql 表的有限结果集进行 sphinx 搜索，该表具有用户与网络的关系。所以他们应该只能在他们所属的网络中搜索。由于有几乎无限数量的可能用户到网络组合，我能够做到这一点的唯一方法是进行狮身人面像搜索，然后将其添加到将其加入网络表并包含 IN 语句的 mysql 查询中与文档 ID 列表。

这是非常有效的，我已经注意到随着网站变得越来越大，这将是一个非常大的问题。

当 sphinx 中的数据位于 mysql 全文列中时，这不是问题。但是自从我们添加了 sphinx 以加快搜索速度之后，我们获得最终结果的方式就变得复杂了。

我考虑过相反的做法，获取用户所在的所有网络的列表，然后将其作为限制因素（网络 id 属性）进行狮身人面像搜索。

有没有人对此有更好的解决方案？无论如何我可以直接在狮身人面像数据上加入这些数据并通过mysql结果集限制它吗？

谢谢

# java - 设计供程序员使用的 UI

> ID：14945183
> 
> 赞同：0
> 
> 时间：2013-02-18T21:00:12.047
> 
> 标签：java, matlab, user-interface, photoshop

我正在为一群致力于构建音乐相关软件的程序员做 UI 设计。我为所有模型、图形等创建了 .psd 文件。

我假设他们只需要将（许多）图像放入代码中，但他们希望我使用 GUI 来吐出必要的代码。（我查看了[Antetype](http://www.antetype.com)，但与我的 Photoshop 模型相比，它看起来很基础。）

**我的问题：**是否有一个 GUI 工具可以构建非常独特的设计，并且可以使用 MatLab 或 Java 将模型导出为代码？-- 或者我应该说不，然后给他们在代码中使用的图像。（我们说的是吉他踏板旋钮、EQ 滑块等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:04:20.390

Netbeans 为 Java GUI 提供了一个不错的 WYSIWYG 编辑器，这当然值得研究。如果您考虑到特定/复杂的设计，将会有一些重要的后端工作让您的图形看起来恰到好处，但这表示自定义 Java GUI 比 MATLAB 容易得多。. . 我相信 eclipse 也有可用于此类事情的插件。

无论如何，这可能是最接近 Java 中用于 GUI 设计的漂亮拖放界面的方式。

JFace 也是一个非常出色的框架，它位于 SWT 之上，用于构建 Java GUI。我会说它的力量在于它如何处理不同的窗口/组件，但当然要权衡的是组合起来更复杂（我不知道所见即所得）

还要考虑 Microsoft 的路线，Visual Studio 旨在消除编写 Visual Basic/C#/.net 应用程序的布局设计的痛苦。如果您是学生，您的大学可能会为您提供免费副本（我的），否则 Visual Studio Express 应该是免费的（我认为？...需要引用？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:17:55.057

要创建 UI，您可以使用一些工具，首先是 Netbeans .. 但我认为使用简单的布局和组件创建一致的代码会更好，所以手动完成（[Oracle 有趣的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)）。如果您不是 java 程序员，我建议您可以简单地给他们您的图像。

# c - C 编程：如何打开指定文件并将其内容动态分配到二维数组中？

> ID：14945184
> 
> 赞同：0
> 
> 时间：2013-02-18T21:00:18.463
> 
> 标签：c, arrays, multidimensional-array, fopen, scanf

基本上，我的程序会提示用户输入他想要打开的文件的名称。我的程序应该打开该文件并将其内容扫描到二维数组中。但是你怎么做才能让程序打开用户指定的文件呢？到目前为止，这是我的代码：

```
#include <stdio.h>
#include <string.h>
FILE *open_file(int ar[3][4]);

int main()
{
  FILE *fp;
  int ar[3][4];

  fp = open_file(ar);
}

FILE *open_file(int ar[3][4])
{
  FILE *fp;
  int i;
  char file[80];
  printf("Please input file name ");
  scanf("%s", &file); //am I supposed to have written ("%s", file) instead?
  fp = fopen("%s", "r");// very confused about this line; will this open the file?
  for (i = 0; i < 12; i++)
    fscanf(fp, "%d", &ar[i][]); //how do you scan the file into a 2D array?
} 
```

要使用 malloc，我必须编写类似 fp = (int *)malloc(sizeof(int));?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:05:10.673

```
scanf("%s", &file); // am I supposed to have written ("%s", file) instead? 
```

是的，但不是你想的那样。所以

```
scanf("%s", file); 
```

相反是正确的（解释：`%s`格式说明符告诉`scanf()`期望 a ，但是如果您编写 addressof 运算符，并且不匹配类型说明符并调用未定义的行为，则您`char *`将传递它 a ）。`char (*)[80]``printf()``scanf()`

```
fp = fopen("%s", "r"); // very confused about this line; will this open the file? 
```

不，不会的。它将打开名为`%s`. 你必须写

```
fp = fopen(file, "r"); 
```

反而。不要假设您可以在不能使用的地方使用格式字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:04:24.053

该变量`file`包含用户输入的文件的名称，因此将其传递给 fopen。你有一个格式字符串。

```
fp = fopen(file, "r"); 
```

# android - 实时监控系统向安卓设备发送实时数据？

> ID：14945185
> 
> 赞同：0
> 
> 时间：2013-02-18T21:00:20.360
> 
> 标签：android, real-time

我正在开发一个监视环境（使用传感器）并生成实时数据的桌面应用程序。我需要使用安卓设备**实时监控这些数据。**

同时，android 应用程序应该能够向桌面应用程序发送命令。

我对智能手机开发很陌生。知道从哪里开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:19:00.093

首先学习如何在 android 设备和 PC 之间进行通信，可以通过`Bluetooth`或`Wi-Fi`

Android 设备本身没有太多环境传感器，因此您可能需要外部设备，即带有此类附加传感器（例如温度、湿度、CO2 等）的微控制器，您可以使用 Arduino 或类似的微控制器来实现。

或者，您可以只使用现成的设备，例如[Sensordrone：智能手机的第六感](http://www.kickstarter.com/projects/453951341/sensordrone-the-6th-sense-of-your-smartphoneand-be)

# ms-word - Microsoft Office 2007 和尾注

> ID：14945188
> 
> 赞同：0
> 
> 时间：2013-02-18T21:00:38.847
> 
> 标签：ms-word

我正在编写的文档有问题。我用尾注放置了大约 50 个参考文献，我想在引文之间输入一个摘要。

问题：Word 似乎不会使用它的自动编辑功能，并且所有内容都以灰色突出显示（就像引用一样）。

任何想法如何阻止这种情况？（我相信这与字段代码有关）

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:16:40.017

要回答我的问题，千万不要以这种方式制作带注释的参考书目！我可以通过将文档转换为纯文本来解决这个问题，然后将一个部分复制到另一个 word 文档中，然后启用编辑功能。

# vb.net - 使用现有 WSDL 和 svcutil.exe 创建 WCF 项目

> ID：14945194
> 
> 赞同：3
> 
> 时间：2013-02-18T21:00:57.393
> 
> 标签：vb.net, wcf, svcutil.exe

我对编写自己的网络服务还很陌生，所以如果我使用了不正确的术语，你需要忍受我。

我正在尝试使用 WCF 创建 Web 服务。该服务需要使用可以在此处找到的现有 wsdl 规范创建： [http ://www.iicmva.com/IICMVA_CoverageVerification_.NET_1.0.wsdl](http://www.iicmva.com/IICMVA_CoverageVerification_.NET_1.0.wsdl)

我能够使用 svcutil.exe 使用以下语法创建一个类：

```
svcutil IICMVA_CoverageVerification_.NET_1.0.wsdl /language:VB 
```

我还能够在带有 asmx 页面的旧 WebService 项目中成功使用它。
但是我们还需要使用 X509 证书来保护服务。经过一些研究，我发现使用 WCF 更容易实现，所以我开始尝试使用它。那就是我开始遇到问题的地方。

我将 svcutil.exe 创建的类添加到空白 WCF 项目中，并修改了默认的 Service1.svc 以实现新类。我必须进行一些我不太了解的小调整才能使项目运行：

改变这个：

```
<endpoint address="" binding="basicHttpBinding" contract="AutoserviceWCF3.VerifyServiceSoap"> 
```

对此：

```
<endpoint address="" binding="basicHttpBinding" contract="VerifyServiceSoap"> 
```

我立即遇到的问题是运行这个项目并单击 wsdl 链接并没有给我我期望的完整 xml。通过我的 asmx 页面，我能够看到一个看起来与上面链接的原始 wsdl 非常相似的 XML 页面。在我的新 WCF 项目中，我留下了一个 wsdl 页面的外壳。我可以看到绑定和主界面，但看不到任何数据定义。

以下是我为达到当前状态所采取的具体步骤：

*   创建一个新的 WCF 项目
*   添加由 svcutil.exe 创建的 VerifyService.vb
*   从VerifyService.vb 中的ReplyAction 中删除*——在线找到。似乎什么都没做。
*   将 svcutil.exe 生成的 output.config 粘贴到 web.config
*   在 web.config 中将 client.endpoint 的地址属性置空
*   修改Service1.svc实现VerifyServiceSoap
*   改变这个：

    ```
    <endpoint address="" binding="basicHttpBinding" contract="AutoserviceWCF3.VerifyServiceSoap"> 
    ```

*   对此：

    ```
    <endpoint address="" binding="basicHttpBinding" contract="VerifyServiceSoap"> 
    ```

差不多就是这样。我尝试了几种不同的调整，结果好坏参半，但仍然离让这个东西发挥作用更近了一步。

如果我从这里修改由 svcutil.exe 创建的 VerifyService.vb：

```
<System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0"), _
 System.ServiceModel.ServiceContractAttribute([Namespace]:="http://www.iicmva.com/CoverageVerification/", ConfigurationName:="VerifyServiceSoap")> _
Public Interface VerifyServiceSoap

    'CODEGEN: Generating message contract since the wrapper name (CoverageRequest) of message VerifyInsuranceRequest does not match the default value (VerifyInsurance)
    <System.ServiceModel.OperationContractAttribute(Action:="http://localhost:1101/AutoServicesWCF3/Service1", ReplyAction:=""), _
     System.ServiceModel.XmlSerializerFormatAttribute()> _
    Function VerifyInsurance(ByVal request As VerifyInsuranceRequest) As VerifyInsuranceResponse
End Interface 
```

对此：

```
<ServiceContract()> _
Public Interface VerifyServiceSoap

    <OperationContract()> _
    Function VerifyInsurance(ByVal request As VerifyInsuranceRequest) As VerifyInsuranceResponse
End Interface 
```

我可以将这行代码改回我期望的样子：

```
<endpoint address="" binding="basicHttpBinding" contract="AutoserviceWCF3.VerifyServiceSoap"> 
```

它还向 wsdl 链接添加了一些内容，但还远未完成。

VerifyService.vb 中也有这个代码链接，看起来有点不对劲：

```
'CODEGEN: Generating message contract since the wrapper name (CoverageRequest) of message VerifyInsuranceRequest does not match the default value (VerifyInsurance) 
```

这些真的是我现在唯一的线索。这是所有项目代码：

服务1.svc：

```
Public Class Service1
    Implements AutoServiceWCF3.VerifyServiceSoap

    Public Sub New()
    End Sub

    Public Function VerifyInsurance(ByVal request As AutoServiceWCF3.VerifyInsuranceRequest) As AutoServiceWCF3.VerifyInsuranceResponse Implements AutoServiceWCF3.VerifyServiceSoap.VerifyInsurance
        Dim v As New AutoServiceWCF3.VerifyInsuranceResponse
        Return v
    End Function
End Class 
```

网络配置：

```
<?xml version="1.0"?>
<!--
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
    <configSections>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                </sectionGroup>
            </sectionGroup>
        </sectionGroup>
    </configSections>
    <appSettings/>
    <connectionStrings/>
    <system.web>
        <!--
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.

            Visual Basic options:
            Set strict="true" to disallow all data type conversions 
            where data loss can occur. 
            Set explicit="true" to force declaration of all variables.
        -->
        <compilation debug="true" strict="false" explicit="true">
            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </assemblies>
        </compilation>
        <pages>
            <namespaces>
                <clear/>
                <add namespace="System"/>
                <add namespace="System.Collections"/>
                <add namespace="System.Collections.Specialized"/>
                <add namespace="System.Configuration"/>
                <add namespace="System.Text"/>
                <add namespace="System.Text.RegularExpressions"/>
                <add namespace="System.Linq"/>
                <add namespace="System.Web"/>
                <add namespace="System.Web.Caching"/>
                <add namespace="System.Web.SessionState"/>
                <add namespace="System.Web.Security"/>
                <add namespace="System.Web.Profile"/>
                <add namespace="System.Web.UI"/>
                <add namespace="System.Web.UI.WebControls"/>
                <add namespace="System.Web.UI.WebControls.WebParts"/>
                <add namespace="System.Web.UI.HtmlControls"/>
            </namespaces>
            <controls>
                <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </controls>
        </pages>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows"/>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
        <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
        </httpHandlers>
        <httpModules>
            <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </httpModules>
    </system.web>
    <system.codedom>
        <compilers>
            <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="OptionInfer" value="true"/>
                <providerOption name="WarnAsError" value="false"/>
            </compiler>
        </compilers>
    </system.codedom>
    <system.web.extensions>
        <scripting>
            <webServices>
                <!--
              Uncomment this section to enable the authentication service. Include 
              requireSSL="true" if appropriate.

          <authenticationService enabled="true" requireSSL = "true|false"/>
          -->
                <!--
              Uncomment these lines to enable the profile service, and to choose the 
              profile properties that can be retrieved and modified in ASP.NET AJAX 
              applications.

          <profileService enabled="true"
                          readAccessProperties="propertyname1,propertyname2"
                          writeAccessProperties="propertyname1,propertyname2" />
          -->
                <!--
              Uncomment this section to enable the role service.

          <roleService enabled="true"/>
          -->
            </webServices>
            <!--
        <scriptResourceHandler enableCompression="true" enableCaching="true" />
        -->
        </scripting>
    </system.web.extensions>
    <!--
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules>
            <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </modules>
        <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </handlers>
    </system.webServer>
    <system.serviceModel>

    <!--Added bindings and client from output.config generated by svcutil.exe-->
    <bindings>
      <basicHttpBinding>
        <binding name="VerifyServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address=""
          binding="basicHttpBinding" bindingConfiguration="VerifyServiceSoap"
          contract="VerifyServiceSoap" name="VerifyServiceSoap" />
    </client>

    <services>
            <service name="AutoServiceWCF3.Service1" behaviorConfiguration="AutoServiceWCF3.Service1Behavior">
                <!-- Service Endpoints -->
        <!--removed AutoServiceWCF3\. from contract-->
                <endpoint binding="basicHttpBinding" contract="VerifyServiceSoap">
                    <!--
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
                    <identity>
                        <dns value="localhost"/>
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="AutoServiceWCF3.Service1Behavior">
                    <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                    <serviceMetadata httpGetEnabled="true"/>
                    <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                    <serviceDebug includeExceptionDetailInFaults="false"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
    </system.serviceModel>
</configuration> 
```

验证服务.vb：

这个字符限制阻止我把它放在这里。它是使用此命令针对我帖子顶部链接的 wsdl 文件创建的：

```
svcutil IICMVA_CoverageVerification_.NET_1.0.wsdl /language:VB 
```

我使用的 svcutil 位于 C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin

它生成的代码说：svcutil 3.0.4506.2152

编辑：在对 svcutil.exe 创建的 vb 类进行大量猜测和手动修改之后，我们能够得到一些有用的东西。这是我们必须做的。

替换了这个：

```
<System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0"),  _
 System.ServiceModel.ServiceContractAttribute([Namespace]:="http://www.iicmva.com/CoverageVerification/", ConfigurationName:="VerifyServiceSoap")>  _
Public Interface VerifyServiceSoap

    'CODEGEN: Generating message contract since the wrapper name (CoverageRequest) of message VerifyInsuranceRequest does not match the default value (VerifyInsurance)
    <System.ServiceModel.OperationContractAttribute(Action:="http://tempuri.org/VerifyInsurance", ReplyAction:="*"),  _
     System.ServiceModel.XmlSerializerFormatAttribute()>  _
    Function VerifyInsurance(ByVal request As VerifyInsuranceRequest) As VerifyInsuranceResponse
End Interface 
```

有了这个：

```
<ServiceContract()> _
Public Interface VerifyServiceSoap

    <OperationContract()> _
    Function VerifyInsurance(ByVal request As VerifyInsuranceRequest) As VerifyInsuranceResponse
End Interface 
```

替换了看起来像这样的所有内容：

```
<System.CodeDom.Compiler.GeneratedCodeAttribute("svcutil", "3.0.4506.2152"),  _
 System.SerializableAttribute(),  _
 System.Diagnostics.DebuggerStepThroughAttribute(),  _
 System.ComponentModel.DesignerCategoryAttribute("code"),  _
 System.Xml.Serialization.XmlTypeAttribute([Namespace]:="http://www.iicmva.com/CoverageVerification/")>  _
Partial Public Class RequestorInformationModule 
```

有了这个：

```
<DataContract()> _
Partial Public Class RequestorInformationModule 
```

替换了看起来像这样的所有内容：

```
<System.Xml.Serialization.XmlElementAttribute(Order:=0)>  _ 
```

有了这个：

```
<DataMember()> _ 
```

我们也基本上抛弃了 svcutil.exe 在 output.config 中创建的所有内容，并最终将其作为我们的 web.config 文件：

```
<?xml version="1.0"?>
<!--
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
    <configSections>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                </sectionGroup>
            </sectionGroup>
        </sectionGroup>
    </configSections>
    <appSettings/>
    <connectionStrings/>
    <system.web>
        <!--
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.

            Visual Basic options:
            Set strict="true" to disallow all data type conversions 
            where data loss can occur. 
            Set explicit="true" to force declaration of all variables.
        -->
        <compilation debug="true" strict="false" explicit="true">
            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </assemblies>
        </compilation>
        <pages>
            <namespaces>
                <clear/>
                <add namespace="System"/>
                <add namespace="System.Collections"/>
                <add namespace="System.Collections.Specialized"/>
                <add namespace="System.Configuration"/>
                <add namespace="System.Text"/>
                <add namespace="System.Text.RegularExpressions"/>
                <add namespace="System.Linq"/>
                <add namespace="System.Web"/>
                <add namespace="System.Web.Caching"/>
                <add namespace="System.Web.SessionState"/>
                <add namespace="System.Web.Security"/>
                <add namespace="System.Web.Profile"/>
                <add namespace="System.Web.UI"/>
                <add namespace="System.Web.UI.WebControls"/>
                <add namespace="System.Web.UI.WebControls.WebParts"/>
                <add namespace="System.Web.UI.HtmlControls"/>
            </namespaces>
            <controls>
                <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </controls>
        </pages>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows"/>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
        <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
        </httpHandlers>
        <httpModules>
            <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </httpModules>
    </system.web>
    <system.codedom>
        <compilers>
            <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="OptionInfer" value="true"/>
                <providerOption name="WarnAsError" value="false"/>
            </compiler>
        </compilers>
    </system.codedom>
 <!--
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules>
            <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </modules>
        <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </handlers>
    </system.webServer>
    <system.serviceModel>
        <services>

   <service behaviorConfiguration="WcfService2.VerifyServiceBehavior" name="WcfService2.VerifyService">
    <endpoint address="" binding="basicHttpBinding" contract="WcfService2.VerifyServiceSoap">
     <identity>
      <dns value="localhost" />
     </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
   </service>
  </services>

        <behaviors>
   <serviceBehaviors>
    <behavior name="WcfService2.VerifyServiceBehavior">
     <serviceMetadata httpGetEnabled="true" />
     <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
   </serviceBehaviors>
  </behaviors>
    </system.serviceModel>
</configuration> 
```

在进行所有这些更改之后，我们能够正确地实现该类。不过这让我很担心，因为如果源 wsdl 发生更改并且我们需要重新导入并实现它，我们将需要重做手动修复文件的整个过程。它大约有 3000 行代码，所以花了很长时间。这似乎违背了 wsdl 文件的目的。必须有一种更简单的方法来做到这一点。我想知道我们是否应该使用 svcutil.exe 以外的东西。任何人都可以阐明我们在这里缺少的东西吗？

# c# - 实体框架 + Lambda 表达式空值比较不起作用

> ID：14945198
> 
> 赞同：1
> 
> 时间：2013-02-18T21:01:13.573
> 
> 标签：c#, lambda, null, entity

我有一个简单的选择：

这有效：

```
User = ent.e_user.FirstOrDefault(x => x.usr_name == UserName && x.password == null); 
```

即使 var Password 等于 null

这不起作用：

```
String Password = null;

if(Password == null)
{
 //it enters here
}

    User = ent.e_user.FirstOrDefault(x => x.usr_name == UserName && x.password == Password); 
```

使用该变量，它不会返回。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:31:58.320

您是否针对 SQL Server 数据库运行？您是否有权访问 SQL Server Profiler？

我想看看正在执行的 SQL 会告诉你很多。例如，如果`Password`作为参数传递（我相信它会这样），它是否与`password`带有简单“=”的列进行比较？那将始终返回 false，因为

```
SET @1 = Null;
SELECT *
FROM   table
WHERE  password = @1; 
```

... 永远不会返回任何记录，即使每条记录都有一个空`password`字段。

你可以尝试这样的事情：

```
User = ent.e_user.FirstOrDefault(
    x => x.usr_name == UserName && 
        (x.password == Password || (x.password == null && Password == null)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T18:50:41.537

可以在这篇文章中找到详细的解释：[实体框架中的NULL值处理](http://henrylu.me/2014/07/05/null-value-handling-in-entity-framework/)。请注意，EF 5.0、6.0 和 6.1 处理可空值的方式不同。在 EF 5.0 中，您将需要像上面的答案一样手动测试空值；默认情况下，两个变量之间的方程比较不会测试空值。也可以在 DbContext.ContextOptions 中手动开启**UseCSharpNullComparisonBehavior**属性**来**达到同样的效果。在 EF 6.0 中，默认情况下会打开 null 比较，但可能过于激进，甚至在不可为 null 的列上，这会导致性能下降。EF 6.1 应该对算法进行了调整，只在真正需要时才测试空值。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:09:25.737

`&&`运营商是一个“提前终止”运营商。这意味着如果第一个条件的结果是`false`（即，`usr_name`与 的值不同`UserName`），那么它将*永远不会*检查密码 - 没有意义。如果“and”的第一部分为假，则评估所有运算符的结果为假。如果您决定检查密码，请交换 usr_name 和密码检查的顺序，更改`&&`为`&`或名称确保`x.usr_name`评估为“真”**

# c# - 不要在成员签名中嵌套泛型类型

> ID：14945199
> 
> 赞同：4
> 
> 时间：2013-02-18T21:01:14.413
> 
> 标签：c#, linq, expression-trees

我已经获得了一个扩展类，它使用违反 CA1006:DoNotNestGenericTypesInMemberSignatures 规则的签名实现以下成员。

警告所指的代码如下所示。

我应该如何重构代码以解决 CA1006 警告？

请记住，我对表达式树不是很熟悉，尽管我对匿名方法、委托和 lambda 有很好的掌握。

任何帮助将不胜感激。

```
 public static DataServiceQuery<TElement> Expand<TElement, TPropType>(this DataServiceQuery<TElement> source, Expression<Func<TElement, TPropType>> propertySelector) 
    {
        string includeString = BuildString(propertySelector);
        return source.Expand(includeString);
    }

    private static string BuildString(Expression propertySelector)
    {
        switch (propertySelector.NodeType)
        {
            case ExpressionType.Lambda:
                LambdaExpression lambdaExpression = (LambdaExpression)propertySelector;
                return BuildString(lambdaExpression.Body);

            case ExpressionType.Quote:
                UnaryExpression unaryExpression = (UnaryExpression)propertySelector;
                return BuildString(unaryExpression.Operand);

            case ExpressionType.MemberAccess:

                MemberExpression memberExpression = (MemberExpression)propertySelector;
                MemberInfo propertyInfo = memberExpression.Member;

                if (memberExpression.Expression is ParameterExpression)
                {
                    return propertyInfo.Name;
                }
                else
                {
                    // we've got a nested property (e.g. MyType.SomeProperty.SomeNestedProperty)
                    return BuildString(memberExpression.Expression) + "/" + propertyInfo.Name;
                }

            case ExpressionType.Call:
                MethodCallExpression methodCallExpression = (MethodCallExpression)propertySelector;
                if (IsSubInclude(methodCallExpression.Method)) // check that it's a SubInclude call
                {
                    // argument 0 is the expression to which the SubInclude is applied (this could be member access or another SubInclude)
                    // argument 1 is the expression to apply to get the included property
                    // Pass both to BuildString to get the full expression
                    return BuildString(methodCallExpression.Arguments[0]) + "/" +
                           BuildString(methodCallExpression.Arguments[1]);
                }
                // else drop out and throw
                break;
        }
        throw new InvalidOperationException("Expression must be a member expression or an SubInclude call: " + propertySelector.ToString());

    }

    private static readonly MethodInfo[] SubIncludeMethods;
    static MyExtensions()
    {
        Type type = typeof(MyExtensions);
        SubIncludeMethods = type.GetMethods().Where(mi => mi.Name == "SubExpand").ToArray();
    }

    private static bool IsSubInclude(MethodInfo methodInfo)
    {
        if (methodInfo.IsGenericMethod)
        {
            if (!methodInfo.IsGenericMethodDefinition)
            {
                methodInfo = methodInfo.GetGenericMethodDefinition();
            }
        }
        return SubIncludeMethods.Contains(methodInfo);
    }

    public static TPropType SubExpand<TSource, TPropType>(this Collection<TSource> source, Expression<Func<TSource, TPropType>> propertySelector)
        where TSource : class
        where TPropType : class
    {
        throw new InvalidOperationException("This method is only intended for use with DataServiceQueryExtensions.Expand to generate expressions trees"); // no actually using this - just want the expression! 
    }

    public static TPropType SubExpand<TSource, TPropType>(this TSource source, Expression<Func<TSource, TPropType>> propertySelector)
        where TSource : class
        where TPropType : class
    {
        throw new InvalidOperationException("This method is only intended for use with DataServiceQueryExtensions.Expand to generate expressions trees"); // no actually using this - just want the expression! 
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T21:09:52.257

该警告是一个通用警告，旨在帮助您设计更好、更简单的公共界面。在这种情况下，您会收到有关方法中有`Expression<Func<TElement, TPropType>>`参数的警告。但是，对于这种方法，简化类型没有意义，相反，您应该使用[属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.suppressmessageattribute.aspx)抑制警告或从规则集中完全删除规则。

* * *

您可能应该考虑遵循规则建议的一个愚蠢示例是这样的方法：

```
public void F(Dictionary<String, List<Tuple<String, Int32>>> dictionary); 
```

# java - 如何避免方法中的 try-catch 语句？

> ID：14945200
> 
> 赞同：2
> 
> 时间：2013-02-18T21:01:19.883
> 
> 标签：java, try-catch

就我个人而言（这并不意味着我是对的或其他），包括方法中的 try-catch 语句为读者“重载”了它们的内部结构。使用数据库时，您应该包括 SQLExceptions、ConnectionExceptions 等内容，也许更多。有没有办法将所有异常的责任放在某个 ONE 对象上？

我是这样想的：

```
enum TaskEnum {
    doSmth1, doSmth2, doSmth3, doSmth4
}

class OuterClass {

    doWhatever(TaskEnum task, String… args) {
        try {
        switch(task) {
                case (doSmth1): InnerClassInstance.execute1(args); break;
                case (doSmth2): InnerClassInstance.execute2(args);break;
                case (doSmth3): InnerClassInstance.execute3(args);break;
                case (doSmth4): InnerClassInstance.execute4(args);break;

        } catch(Exception e) {
                 e.printStack()}
         }
     }
}

class InnerClass {    
    execute1(String args) throws Exception() {bla-bla-bla};
    execute2(String args)throws Exception() { bla-bla-bla };
    execute3(String args)throws Exception() { bla-bla-bla };
    execute4(String args)throws Exception() { bla-bla-bla };
} 
```

这样，外部类将负责其所有内部类方法抛出的异常。当然，如果我认为我的解决方案很好，我不会问这个问题。这只是一个例子，让你理解这个想法。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:08:41.797

异常机制的美妙之处在于不必在它们发生的地方处理它们，而是在一个共同的地方，将许多可能的故障的处理组合在一起。所以，是的，绝对将异常处理推迟到方便的时候。有两个主要选择：

1.  必须中止当前工作单元的故障：在包含整个事务范围的级别上处理它们，并统一处理（通常是日志条目和上游客户端的错误消息）；

2.  仅暗示工作单元内的替代程序流程的异常：这些是检查异常的良好候选者，因为它们必须被专门和早期处理。不要在错误级别记录这些（可能是警告或只是信息，具体取决于上下文）。

不幸的是，Java 的检查异常使第一个选项更难实现，因为在此过程中的每个方法都必须声明它可能抛出的所有检查异常。还有一些常见的陷阱：Eclipse 和其他工具提供了用样板 try-catch 包围您的代码，而您应该让异常向上传播。当您实现一个没有声明您遇到的检查异常的方法时，会出现一个特别困难的情况，迫使您过早地处理它。在这种情况下，必须将检查的异常**包装**到`RuntimeException`并重新抛出它。这是非常不明显的，并且会导致许多错误，或者至少会导致重复的错误日志条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:22:02.647

我仍然不明白你想要做什么。仅打印堆栈跟踪的 catch 块恕我直言，毫无用处。并且提供一个任务枚举只是为了打开它的值对我来说没有意义。如果您想走这条路，请使用 Java 提供的功能：

```
enum TaskEnum {
    doSmth1() {
        public void execute(String... args) {
            // blablabla
        }
    },
    doSmth2() {
        public void execute(String... args) {
            // blablabla
        }
    };

    public abstract void execute(String... args);
};

class OuterClass {

    public void doWhatever(TaskEnum task, String... args) {
        try {
            task.execute(args);
        } catch (Exception e) {
            e.printStackTrace();
            // and do something useful!
        }
    }

} 
```

但最好是根本不捕获异常，或者在需要时将它们包装在另一个异常类中（即，当超类对抛出的异常施加限制时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:07:30.497

有两个常用的选项，和你说的差不多。要么处理出现的异常，要么让较低级别的方法自己抛出错误，直到它到达处理所有异常的顶级类。我个人觉得异常应该在抛出的地方处理，并且应该尽可能的具体。我不喜欢第二种选择，因为它给顶级班级带来了太多责任。不过，这确实是您的偏好，当然您应该只在方便且有意义的情况下处理异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:06:01.947

`throws`不能在类级别使用，只能在方法级别使用。

你可以这样做：

```
public void method() throws IOException {

} 
```

# .htaccess - .htaccess 隐藏文件扩展名不起作用（WampServer）

> ID：14945202
> 
> 赞同：2
> 
> 时间：2013-02-18T21:01:46.693
> 
> 标签：.htaccess, mod-rewrite, wampserver, file-extension

我在隐藏`.html`我的网站上的扩展时遇到了一些麻烦。我正在使用 Apache V.2.2.22 在 WampServer 上运行。 `rewrite_module`处于活动状态，我已将`httpd.conf`文件更改为`AllowOverride all`

这是我所知道的唯一的 htaccess 文件，这就是它所包含的全部内容......

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L,NC]
</IfModule> 
```

它不工作，我不知道为什么......这是我的`httpd.conf`文件

```
DocumentRoot "c:/wamp/www/"

<Directory />
    Options FollowSymLinks
    AllowOverride all
    Order deny,allow
    Deny from all
</Directory>

<Directory "c:/wamp/www/">
    Options Indexes FollowSymLinks
    AllowOverride all

#   onlineoffline tag - don't remove
    Order Allow,Deny
    Allow from all

</Directory> 
```

这就是我放置`.htaccess`文件的地方...

```
E:\wamp\www\DesktopVersion\.htaccess 
```

关于为什么这不起作用的任何建议都会很棒！

编辑：只是为了澄清这是要使用的正确 .htaccess 代码......“anubhava”的补充

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^ %{REQUEST_URI}.html [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:10:16.643

您应该将此代码附加到您的 .htaccess 中：

```
# To externally redirect /dir/foo.html to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

# To internally forward /dir/foo to /dir/foo.html
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^ %{REQUEST_URI}.html [L] 
```

# c++ - Eclipse C++ 项目 - 运行具有不同目标的外部 make 文件

> ID：14945203
> 
> 赞同：0
> 
> 时间：2013-02-18T21:01:46.247
> 
> 标签：c++, eclipse, build, makefile, external

我已经搜索了很长时间，但找不到答案。

我使用 Eclipse C++，并创建了一个基于 Makefile 的项目，其中所有的源代码和我从某个源下载的 make 文件。我可以在终端中构建和运行项目（我在 Mac OS X 中），通过执​​行“make clean”，然后“make depend”然后“make”，然后运行。

我想做同样的事情，但是在eclipse中为了利用它的图形调试工具，但不知道如何使用提供的makefile来构建它。

这是详细信息：

makefile 是“Makefile”，位于 proj/myapp/niki/Makefile 中（因此它不在根文件夹中）。

我需要能够“make clean”，然后“makedepend”，然后“make”然后运行它。

我去了 Eclipse 中的项目属性，在“C/C++ Build”中取消选择“使用默认构建命令”，并将“构建命令”指定为“make -f proj/myapp/niki/Makefile”。这有什么问题吗？以及如何做“清洁”，“使依赖”......

我没有使用 XCode，因为当我将整个外部源代码导入 XCode 项目时，它放弃了自动完成功能。

尽早感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:33:06.960

有一个特定的视图允许定义特定的 make 目标。

如果在您的视角中没有打开它，您可以通过以下菜单打开它：`Window > Show View > Make target`

在此视图中，您可以定义任意数量的目标。

# dia - 直径导出分辨率太小

> ID：14945204
> 
> 赞同：40
> 
> 时间：2013-02-18T21:01:48.787
> 
> 标签：dia

我正在尝试将图表导出为可以加载到名为“confluence”的 wiki 工具中的格式。任何导出格式甚至 .dia 保存文件的分辨率都非常小，以至于当我插入图像时它太小而无法看到。当我试图放大它时，它是模糊的。

如何提高 Dia 保存文件或 Dia 导出的分辨率？

版本：0.97.2

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-28T11:22:21.667

这在一定程度上取决于导出格式。对于某些（例如 PNG 抗锯齿），您可以指定以像素为单位的分辨率。对于其他格式，请转到 File->Page Setup... 并增加比例因子。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-04-03T14:11:24.683

导出时，**指定 PNG（抗锯齿）(*.png) 导出器**。当您单击保存时，它会询问您的分辨率。更改 X 或 Y，它会放大另一个，因此您的图像不会失真。不要使用 Cairo 或 Pixbuf 导出器，因为它们不会询问您。

要指定 PNG 导出器，请选择 File->Export，然后在 Export Diagram 对话框的底部是一个 Export Options 部分和下拉列表以列出可用的导出器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-05T20:45:11.307

检查菜单“文件”->“布局”然后检查比例设置为1（不要设置表）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-19T13:23:10.930

我为我发现了 .svg 格式。它是一个网络标准，一个 wiki 软件绝对应该提供加载此类文件的功能。它是基于矢量的。那太棒了！现在，Microsoft Word 甚至支持粘贴到这样的 .svg 文件中。将其与 PDF 进行比较，但它对磁盘使用情况的关注更为轻量。你可以在很多地方嵌入它。

# c# - 发布上传文件中止

> ID：14945208
> 
> 赞同：0
> 
> 时间：2013-02-18T21:02:02.003
> 
> 标签：c#, asp.net, file-upload, upload

我在文件发布时遇到问题，希望您能帮助我。

这是问题所在：

我有一个包含表单的 *.aspx 页面，该表单在此处描述：

```
<form id="formUpload" name="formUpload" method="post" enctype="multipart/form-data" action="upload.aspx" target="iframex"> 
```

这个 upload.aspx 页面获取文件做了很多事情，并且应该在执行所有操作后使用我在 upload.aspx 中使用的变量 (errorFlag) 注册启动脚本：

```
$(document).ready(function () {

        if (errorFlag) { //*** C# gives me this variable
            self.parent.$("#iframex").show();
            self.parent.upload(false);
        }
        else {
            self.parent.upload(true);                
        }
    }); 
```

问题是我调试了每个服务器代码并且一切正常，在没有 c# 代码执行之后（即使在卸载之后）它只是不“回来”呈现 HTML 并且在某个时间后它中止了帖子.

另一个问题是它只是在我在服务器上执行它时发生，本地工作正常。

在此先感谢，对不起，如果我不能更清楚.. 甚至很难解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:46:45.437

如果它在本地工作而不是在生产环境中工作，那么问题可能就像您上传的最大文件大小一样简单。默认情况下，iis 会将文件上传限制为 4mb。您需要在 system.webserver maxAllowedContentLength 和 system.web maxrequestlength 下的 web.config 中更改此设置。

您可能会发现 iis 只是放弃了您的上传。

# maven - cobertura和surefire之间的关系

> ID：14945215
> 
> 赞同：5
> 
> 时间：2013-02-18T21:02:28.190
> 
> 标签：maven, pom.xml, cobertura, maven-surefire-plugin

**1 句话中的问题：“Cobertura 不会产生正确的代码覆盖率”**

下面是我的 pom.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
         xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <groupId>a.b.c</groupId>
    <artifactId>MyProject</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <repositories>
        <repository>
            <id>google-api-services</id>
            <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
        </repository>
    </repositories>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java-version>1.6</java-version>
        <maven.test.skip.exec>false</maven.test.skip.exec>
        <cobertura-maven-plugin.version>2.5.2</cobertura-maven-plugin.version>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>com.google.appengine</groupId>
                <artifactId>appengine-maven-plugin</artifactId>
                <version>1.7.4</version>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <extensions>false</extensions>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.1.3</version>
                <configuration>
                    <testFailureIgnore>false</testFailureIgnore>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>${cobertura-maven-plugin.version}</version>
                <configuration>
                    <formats>
                        <format>xml</format>
                        <format>html</format>
                    </formats>
                    <check/>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>cobertura</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>${cobertura-maven-plugin.version}</version>
            </plugin>
        </plugins>
    </reporting>
    <dependencies>
       ...
    </dependencies>
</project> 
```

当我尝试用这个 pom 构建时，发生了两件事

1.  所有测试运行 2 次
2.  战争产生
3.  Cobertura 报告显示覆盖率为 0%

请帮我调试这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:28:03.160

我注意到的第一件事是您使用的是非常旧的[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/)版本（2.1.3，大约是 2006 年！），但当前版本是 2.13。

除此之外，您已将[cobertura-maven-plugin](http://mojo.codehaus.org/cobertura-maven-plugin/cobertura-mojo.html)绑定到带有报告目标*cobertura*的包阶段，这是完全错误的。

最好的办法是先简化您的设置并让它运行，这意味着只需在属性中定义 cobertura-maven-plugin 的版本，然后在报告区域中进行设置，如下所示：

```
 <properties>
    <cobertura-maven-plugin.version>2.5.2</cobertura-maven-plugin.version>
  </properties> 
```

并将以下内容纳入报告区域：

```
<project>
  ..
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>${cobertura-maven-plugin.version}</version>
      </plugin>
      ...
    </plugins>
  </reporting>
</project> 
```

只需使用此设置对其进行测试并检查是否已创建代码覆盖率。如果不是，您需要展示更多您的项目（pom、测试等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:54:27.340

首先，当您希望生成覆盖率报告时，我建议您运行 mvn clean install cobertura:cobertura。这不太可能是您想要为每个构建做的事情（我个人只在 Jenkins 中使用 Cobertura）。

其次，让所有测试运行两次可能看起来很烦人，但有些人认为这是更可靠的，也是预期的行为。这是因为 cobertura 会检测您的字节码。因此，这与您的测试结果相混淆的可能性很小。

但是，当然，因为这种双重测试运行非常耗时，这也是您不会在标准生命周期中运行 cobertura:cobertura 的另一个原因

# ios - iOS - 带有 UITextView 的表格视图单元格未正确调整大小

> ID：14945216
> 
> 赞同：4
> 
> 时间：2013-02-18T21:02:31.253
> 
> 标签：ios, textview, height, tableview, cell

我已经对一个单元类进行了子类化，并且正在使用 Storyboard 中的原型。有问题的单元格有一个嵌入的文本视图，它将显示不同长度的文本。*我已经在heightForRowAtIndexPath:*中设置了单元格高度，但是尝试在*cellForRowAtIndexPath:*中调整 textview 本身的大小无法正常工作。它不会在初始加载时调整大小，但一旦我将单元格滚动出视图然后再重新进入。但如果我继续来回滚动，它偶尔会再次缩小。

代码：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    int defaultSize = 0;
    int height = 0;
    if(indexPath.section%2==0){
        defaultSize = 160;
        NSMutableDictionary *currentPost = [newsFeedPosts objectAtIndex:indexPath.section];
        NSString *string = [currentPost valueForKey:@"detailsText"];
        CGSize stringSize = [string sizeWithFont:[UIFont boldSystemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:NSLineBreakByWordWrapping];
        height = stringSize.height + defaultSize;
        NSLog(@"String Size Before: %f",stringSize.height);

    }else{
        defaultSize = 270;
        height = defaultSize;
    }
    return height;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier;
    if(indexPath.section%2==0){
        CellIdentifier = @"NewsFeedText";
    }else{
        CellIdentifier = @"NewsFeedImage";
    }
    NewsFeedCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    [cell setBackgroundView:[[NewsFeedCellBackground alloc] init]];
    [cell.bottomContainer setClipsToBounds:YES];
    [cell.bottomContainer.layer setMasksToBounds:YES];
    [cell.imagePreview.imageView setContentMode:UIViewContentModeScaleAspectFit];
    [cell.bottomContainer setFrame:CGRectMake(0, cell.contentView.frame.size.height-30, cell.contentView.frame.size.width, 30)];

    //Data Object
    NSMutableDictionary *currentPost = [newsFeedPosts objectAtIndex:indexPath.section];
    //View
    cell.userImage.image = [UIImage imageNamed:[currentPost valueForKey:@"userImage"]];
    cell.userName.text = [currentPost valueForKey:@"userName"];
    cell.createdDate.text = [currentPost valueForKey:@"createdDate"];
    cell.patientName.text = [currentPost valueForKey:@"patientName"];
    cell.detailsText.text = [currentPost valueForKey:@"detailsText"];
    [cell.imagePreview setImage:[UIImage imageNamed:[currentPost valueForKey:@"imagePreview"]] forState:UIControlStateNormal];
    [cell.viewCase addTarget:self action:@selector(displayCase:) forControlEvents:UIControlEventTouchUpInside];

    //Image
    [cell.imagePreview addTarget:self action:@selector(displayImage:) forControlEvents:UIControlEventTouchUpInside];

    //Data
    cell.viewCase.tag = [[currentPost valueForKey:@"caseID"] intValue];

    //Cell Adjustments
    NSString *string = [currentPost valueForKey:@"detailsText"];
    CGSize stringSize = [string sizeWithFont:[UIFont boldSystemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:NSLineBreakByWordWrapping];
    NSLog(@"String Size After: %f",stringSize.height);
    [cell.detailsText setFrame:CGRectMake(cell.detailsText.frame.origin.x, cell.detailsText.frame.origin.y, cell.detailsText.frame.size.width, stringSize.height+10)];
    [cell.detailsText setBackgroundColor:[UIColor redColor]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:08:01.047

原来使用自动布局允许我将顶部空间和底部空间设置为超级视图（单元格视图），并且由于单元格高度在*heightForRowAtIndexPath 中更改：*然后 textview 会自动调整大小。

# java - 从 byte[] 数组播放声音

> ID：14945217
> 
> 赞同：3
> 
> 时间：2013-02-18T21:02:36.950
> 
> 标签：java, client-server, javasound, audio

我从服务器收到了一个字节数组，我知道它可以完美地连接和发送。这是我尝试从字节数组播放声音的时候。

这是我必须播放的声音。

```
SourceDataLine speaker = null;
try {
    DataLine.Info speakerInfo = new DataLine.Info(SourceDataLine.class, getAudioFormat(samplerate));
    speaker = (SourceDataLine) AudioSystem.getLine(speakerInfo);
} catch (LineUnavailableException e) {
    e.printStackTrace();
}
int nBytesRead = 0;
    while (nBytesRead != -1) {
    if (nBytesRead >= 0) {
         speaker.write(bytes, 0, nBytesRead);
    }
} 
```

获取音频格式：

```
private AudioFormat getAudioFormat(float sample) {
    int sampleSizeBits = 16;
    int channels = 1;
    boolean signed = true;
    boolean bigEndian = false;
    return new AudioFormat(sample, sampleSizeBits, channels, signed, bigEndian);
} 
```

我怎样才能播放音乐`byte[]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:15:28.037

我看不到您在 while 循环中从声音字节数组中读取的位置。他们按照您的设置方式，可能应该有以下几点：

```
while (nBytesRead = soundDataArray.read(bytes) != 1) 
```

...假设您设置了 read 方法，以便名为“bytes”的缓冲区接收来自 read 命令的数据。然后 write() 方法将重复填充“字节”以发送。

当然，'bytes' 只是一个只在 while 循环中使用的缓冲区，而不是带有源声音的字节数组。

有时 read 方法有两个输入，例如：`.read(bufferArray, bytesToRead);` 其中 ak 或几个 k 范围内的值是常见的。(bufferArray.length == bytesToRead)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:34:19.700

前段时间我写了一个小型服务器来通过 http 流式传输音乐：[Stream music in loop over http using java](https://stackoverflow.com/questions/13686209/stream-music-in-loop-over-http-using-java)

去那里，它的播放方式，你只需转到指定的链接，即：www.localhost:8080/test 在我的例子中，浏览器会播放音乐。

也许您可以将我的一些结果与您的结果结合起来找到解决方案。

实际上，无论链接返回字节数组，都将由浏览器根据数据类型等进行流式传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T04:11:34.340

## 这样您就可以播放来自 Byte[] 的声音。

希望它可以帮助别人。

```
import javax.sound.sampled.*;
import java.io.*;

public class PlaySoundFromByteArr {

  public static void main(String[] args) throws IOException, UnsupportedAudioFileException {
    String FILE_PATH = "resources/wav-1.wav";

    byte[] byteArr = getByte(FILE_PATH);
    AudioFormat format = getFormat(FILE_PATH);
    playAudioUsingByteArray(byteArr, format);
  }

  private static byte[] getByte(String FILE_PATH) {
    byte[] byteArr = new byte[0];

    try {
      ByteArrayOutputStream out = new ByteArrayOutputStream();
      AudioInputStream in =  AudioSystem.getAudioInputStream(new File(FILE_PATH));

      int numOfBytes;
      byte[] buffer = new byte[1024];

      while( (numOfBytes = in.read(buffer)) > 0 ){
        out.write(buffer, 0,numOfBytes);
      }
      out.flush();
      byteArr = out.toByteArray();
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } catch (UnsupportedAudioFileException e) {
      e.printStackTrace();
    }

    return byteArr;
  }

  private static AudioFormat getFormat(String FILE_PATH) throws IOException, UnsupportedAudioFileException {
    AudioInputStream in =  AudioSystem.getAudioInputStream(new File(FILE_PATH));
    return in.getFormat();
  }

  private static void playAudioUsingByteArray(byte[] byteArr, AudioFormat format) {
    try (Clip clip = AudioSystem.getClip()) {
      clip.open(format, byteArr, 0, byteArr.length);
      clip.start();
      clip.drain();
      Thread.sleep(clip.getMicrosecondLength());
    }
    catch (LineUnavailableException | InterruptedException e) {
      e.printStackTrace();
    }
  }

} 
```

# php - 从 XSLT 中的 HTML 调用 PHP 函数

> ID：14945218
> 
> 赞同：0
> 
> 时间：2013-02-18T21:02:39.617
> 
> 标签：php, html, xml, xslt-1.0

我是 PHP 新手，但很习惯其他语言。如果它们与特定的食谱类别匹配，我正在尝试列出从多个 XML 文件中获取的食谱标题。

我编写了一个 PHP 函数，它遍历我服务器上的所有 XML 配方并检查类别。当我用硬编码的虚拟类别调用它时，这很好用！

```
<?php
getSimilar($category){
    $list = array();
    foreach(glob("*xml") as $filename) {
        $xml = simplexml_load_file($filename);
        $result = $xml->xpath("//categories/cat");
        if($result[0] == $category) {
            $titel = $xml->xpath("//title");
            array_push($list, $titel[0]);
            echo "<option value=\"recept\">" . $titel[0] . "</option>";
        }
    }
}
?> 
```

我希望将结果放入`<option>`-tags 以显示为 XSLT / HTML。我试图这样称呼它，但它对我不起作用！

```
<xsl:variable name="catParam" select="recipeml/recipe/head/categories/cat"/>

<div class="recipeDetails">
        <h2>Recipes similar to <xsl:value-of select="recipeml/recipe/head/title"/></h2>
        <p>These are just examples of dishes closely related to <xsl:value-of select="recipeml/recipe/head/title"/>.</p>
        <form>
            <select>
                <?php
                 include ('createSimilarList.php');
                 getSimilar($catParam);
                 ?>
                <?php getSimilar($catParam);?>
            </select>
        </form>
</div> 
```

我想让它尽可能简单，因为我以前对 XSLT 或 PHP 都没有什么经验。

欢迎任何关于我如何做到这一点的想法！谢谢！

# c++ - 具有 c++11 结构的映射函数

> ID：14945223
> 
> 赞同：6
> 
> 时间：2013-02-18T21:03:10.630
> 
> 标签：c++, templates, c++11, visual-studio-2012, metaprogramming

两者都是为了自学实现比简单的基本模板结构更高级的模板结构，并且因为它们在许多情况下都很有用，所以我正在尝试使用 c++11 结构（如 decltype）来实现函数式编程中常见的映射、过滤器和类似功能。

我在创建我使用的编译器可以处理的函数原型时遇到了麻烦，所以我不得不问你如何创建这样的东西：

```
//
// Takes an iterable, applies a function to every element, and returns a vector of the results
//
template <typename T, typename Func>
auto map(const T& iterable, Func func) -> std::vector< decltype(  func( *iterable.cbegin() ) ) >
{
    // body snipped
} 
```

也就是说，这个函数应该接受任何可迭代对象和一个将可迭代对象值类型作为参数并返回某种值的函数。函数调用的结果将是一个向量，无论传入的可迭代对象的类型如何，传递函数返回的类型都是如此。

map 函数应该接受任何具有有效原型的函数作为参数，无论它是函数指针、仿函数还是 lambda 表达式。

使用上面的函数和这个测试代码：

```
std::vector<int> intVector;
intVector.push_back(1);
intVector.push_back(2);

map(intVector, [](int& value) { return value + 1; }); 
```

使 Visual Studio 吐出 C2893（“无法专门化功能模板”）错误，我不确定出了什么问题。

**更新：** 到目前为止，评论和答案中建议的应用更改对问题进行了测试，测试了新原型，但仍然存在相同的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T21:17:43.277

这可能会做你想要的。它在`std::transform`内部使用，基本上完成了整个工作。我写的函数只不过是一个简单的容器包装器（不适用于 C 风格的数组，这需要一些额外的类型特征）：

```
#include <vector>
#include <algorithm>
#include <type_traits>

//
// Takes an iterable, applies a function to every element, 
// and returns a vector of the results
//
template <typename T, typename Func>
auto map_container(const T& iterable, Func&& func) ->
    std::vector<decltype(func(std::declval<typename T::value_type>()))>
{
    // Some convenience type definitions
    typedef decltype(func(std::declval<typename T::value_type>())) value_type;
    typedef std::vector<value_type> result_type;

    // Prepares an output vector of the appropriate size
    result_type res(iterable.size());

    // Let std::transform apply `func` to all elements
    // (use perfect forwarding for the function object)
    std::transform(
        begin(iterable), end(iterable), res.begin(),
        std::forward<Func>(func)
        );

    return res;
} 
```

但是，请注意，您的 lambda 应该引用`const`，或者在 的情况下最好按值获取其参数`int`。

此外，我将函数从`map`into重命名为`map_container`：将 C++ 标准库的标准容器的名称重用于程序中的函数、变量或任何其他内容是一种不好的编程习惯。

对我来说，这给出了所需的输出：

```
#include <iostream>

int main()
{
    std::vector<int> intVector;

    intVector.push_back(1);
    intVector.push_back(2);

    auto v = map_container(intVector, [] (int value) { return value + 1; });

    for (int i : v) { std::cout << i << " "; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T21:24:31.760

所以这里有一大堆角落案例需要处理。我要做的是首先尝试构建一些`container_traits`模板来尽可能多地抽象工作。

一个类型是 a`container`如果它允许调用 和 已经通过 发挥作用的`begin`自由函数`end`，`std::begin`并且这两种类型是相同的（最后可能不是必需的）。`std::end``using`

a 的特征`container`主要来自`iterator`容器具有的 s 以及所述迭代器的类型。其他一些功能，比如`size`（甚至`size_at_least`——见下文），是很常见的。

`iterable`如果类型的 是 a ，则称`const`该类型为`container`。

下一个问题是“什么样的类型实例对于映射容器的元素是有效的？” -- 这也有点不重要，所以我添加了一些特征类来处理它。

所以，这导致了这个实现：

```
#include <algorithm>
#include <type_traits>
#include <utility>

namespace aux {
  // calculate the type that calling `begin` and `end` on a type will return
  // in a scope where `std::begin` and `std::end` are visible.  This hack is
  // required to enable argument-dependent lookup.
  using std::begin;
  using std::end;
  template<typename T>
  auto adl_begin(T&&t)->decltype( begin(std::forward<T>(t)) );
  template<typename T>
  auto adl_end(T&&t)->decltype( end(std::forward<T>(t)) );
  template<typename T>
  auto adl_cbegin(T const&t)->decltype( begin(t) );
  template<typename T>
  auto adl_cend(T const&t)->decltype( end(t) );
}

// What is a container?  Something with a `begin`ing and an `end`ing...
template<typename C,typename=void>
struct is_container:std::false_type {};
template<typename C>
struct is_container<C, typename std::enable_if<
   std::is_same<
      decltype(aux::adl_begin(std::declval<C>())),
      decltype(aux::adl_end(std::declval<C>()))
   >::value
>::type >:std::true_type {};

// Default container_traits is empty for SFINAE ease of use:
template<typename C, typename=void>
struct container_traits {};

// if it is a container, go in whole hog:
template<typename C>
struct container_traits<C, typename std::enable_if< is_container<C>::value >::type >
{
   typedef decltype( aux::adl_begin(std::declval<C>()) ) iterator;
   typedef decltype( aux::adl_cbegin(std::declval<C>()) ) const_iterator;
   // I'm lazy, so I'll copy typedefs from `iterator_traits` below:
   typedef typename std::iterator_traits<iterator>::value_type value_type;
   typedef typename std::iterator_traits<iterator>::reference reference;
   // etc

   // TODO: size_at_least is a helper function
   // it returns 0 if it is expensive to calculate the size (say, a range
   // if iterators into a `std::list`), and the size if it is cheap to
   // calculate (say, a `std::vector`, any class with a `.size()` method,
   // or a pair of pointers or other random-access iterators)
   // template<typename C2, typename=typename std::enable_if< std::is_convertable< C2, C const&>::value>::type
   // static std::size_t size_at_least( C2&& c ) { ... }
};

// Can Functor map the elements of C into something we can store elsewhere?
template<typename C, typename Functor, typename=void>
struct can_map:std::false_type {};
// Yes, if the result of calling Functor on C's elements is non-void:
template<typename C, typename Functor>
struct can_map<C, Functor, typename std::enable_if<
  !std::is_same< decltype(std::declval<Functor>()(std::declval<typename container_traits<C>::value_type>())), void >::value
>::type>: std::true_type {};

// The result of mapping the elements of C under Functor
template<typename C, typename Functor, typename=void>
struct map_result {};
template<typename C, typename Functor>
struct map_result<C,Functor,typename std::enable_if< can_map<C,Functor>::value>::type>
{
  typedef
    decltype(
      std::declval<Functor>()(
        *std::declval<
          typename container_traits<C>::const_iterator
        >()
      )
    )
  type;
};

// The actual implementation
// we std::decay the map_result because we want to store
// instances of the type, and std::decay does that quite nicely
// note that some pathological Functors may break this, ie ones
// that return pseudo-references that are intended to be read from
// yet are not std-container safe
template <typename T, typename Func>
auto map_container(T&& iterable, Func&& func) ->
  std::vector<
    typename std::decay<
      typename map_result<T, Func>::type
    >::type
  >
{
  std::vector<
    typename std::decay<
      typename map_result<T, Func>::type
    >::type
  > retval;
  // TODO: use container_traits<T>::size_at_least to reserve space in retval
  // that will bring the efficiency of this function up to near-hand-crafted-C.
  for (auto&& s:iterable) {
    retval.push_back( func(s) );
  }
  return retval;
} 
```

就是这样。接下来，测试代码。我们应该能够通过方法和自由浮动函数`map_container`处理 C 风格`vector`的数组，传统类型和`bool`（使用伪引用并紧密打包位）和用户定义类型。`.begin()``begin(C)`

我对数组的一个问题是，它`C const&`似乎会导致数组中的指针衰减，这使得它不再是一个容器：我必须绑定到`C&&`才能获得真正的数组类型。

```
#include <iostream>

void test1() {
   std::vector<int> src{1,2,3,4,5};
   auto r = map_container( src, [](int x){return x*2;});
   for (auto&& x:r) {
      std::cout << x << "\n";
   }
}
struct test_buffer {
  int foo[5];
  int* begin() { return foo; }
  int* end() { return &foo[5]; }
  int const* begin() const { return foo; }
  int const* end() const { return &foo[5]; }
};
test_buffer buff1={{1,2,3,4,5}};
struct test_buffer_2 {
  int foo[5];
};
test_buffer_2 buff2={{1,2,3,4,5}};
int* begin(test_buffer_2& t) { return t.foo; }
int* end(test_buffer_2& t) { return &t.foo[5]; }
int const* begin(test_buffer_2 const& t) { return t.foo; }
int const* end(test_buffer_2 const& t) { return &t.foo[5]; }
std::vector<bool> bits{true, false, true, false};   

template<typename Container>
void tester(Container&& c) {
   Container const& src = c;
   auto r = map_container( src, [](int x){return x*2;});
   for (auto&& x:r) {
      std::cout << x << "\n";
   }
}
void test2() {
   tester(buff1);
   tester(buff2);
   tester(bits);
}
template<typename C>
bool is_container_test(C&&) {
   return is_container<C>::value;
}
template<typename C, typename F>
bool can_map_test( C&&, F&& ) {
   return can_map<C, F>::value;
}
template<typename C, typename F>
bool can_map_test2( C const&, F&& ) {
   return can_map<C, F>::value;
}
int array[] = {1,2,3,4,5};
void test3() {
   std::cout << "Array is container:" << is_container_test(array) << "\n";
   auto x2 = [](int x){return x*2;};
   std::cout << "Double can map:" << can_map_test(array, x2) << "\n";
   std::cout << "Double can map:" << can_map_test2(array, x2) << "\n";
}
void test4() {
   tester(array);
}
int main() {
   test1();
   test2();
   test3();
   test4();
} 
```

或类似的规定。不要在函数本身中执行复杂的 SFINAE，而是创建为您完成工作的特征类。

上面使用的其他技术：我使用`std::begin`and`std::end`来获取开始/结束迭代器。这意味着我现在支持原始 C 数组。然后我将它包装在一些依赖于参数的查找助手中，其目的是允许您在同一个命名空间中定义`begin`和使用您的类覆盖。`end`

请注意，“不接受”版本`container_traits`是一个空结构，而不是未定义的结构。这让我们可以`container_traits`在其他地方使用 SFINAE。

哦，提高效率的方法是编写“智能保留”，它采用一个带有`reserve`方法的容器和一个您希望复制其大小的容器。如果您要复制的容器缺少随机访问迭代器并且缺少`.size()`方法，则它什么也不做，但如果有，它会执行`.reserve( end(...)-begin(...) )`or `.reserve(src.size())`。`container_traits`我们可以通过将它添加到as来为其他算法抽象它`static size_t size_at_least(Container const&)`，它在 O(1) 时间内返回`size_t`不大于 的大小`Container`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-16T15:42:31.970

[对上面 Andy Prowl 的出色回答](https://stackoverflow.com/a/14945447/1417451)进行了一些小改进：

1.  我们可以提前*保留我们需要的大小，而无需实际**调整*向量的大小（从而避免默认构造*n 个*元素）。这有两个优点：
    1.  它允许您映射根本不可默认构造的类型
    2.  它可能具有显着的性能优势（因为编译器很少能够忽略那些未使用的默认构造），具体取决于元素的数量和构造它们的成本。
2.  我们可以提供适用于迭代器范围的重载，以便您可以对容器的一部分进行操作。

您可以[在 Compiler Explorer](https://godbolt.org/z/3ccs1M)中使用它，但代码本身如下所示：

```
template <typename Iterator, typename Func> [[nodiscard]]
auto functional_map(Iterator begin, Iterator end, Func && func) ->
std::vector<decltype(func(std::declval<typename Iterator::value_type>()))>
{
    using value_type = decltype(func(std::declval<typename Iterator::value_type>()));

    std::vector<value_type> out_vector;
    out_vector.reserve(std::distance(begin, end));

    std::transform(begin, end, std::back_inserter(out_vector),
                   std::forward<Func>(func));

    return out_vector;
}

template <typename T, typename Func> [[nodiscard]]
auto functional_map(const T & iterable, Func && func) ->
std::vector<decltype(func(std::declval<typename T::value_type>()))>
{
    return functional_map(std::begin(iterable), std::end(iterable),
                          std::forward<Func>(func));
} 
```

（请注意，我`[[nodiscard]]`在这些声明中使用了 C++17 的属性，但如果您是 C++17 之前的版本，则可以毫无问题地放弃它。）

Compiler Explorer 链接还包括几个演示测试：

```
TEST_CASE("Mapping ints to string")
{
    const std::vector<int> int_version{0, 1, 2, 3, 4};
    const std::vector<std::string> string_version{"0", "1", "2", "3", "4"};

    CHECK(functional_map(int_version, 
                         [](int i) { return std::to_string(i); }) == string_version);

    CHECK(functional_map(string_version, 
                         [](const std::string & s) { return std::stoi(s); }) == int_version);
}

TEST_CASE("Mapping over only part of a container")
{
    const std::vector<int> int_version{0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
    const std::vector<std::string> string_version{"0", "1", "2", "3", "4", "5", "6", "7", "8", "9"};

    const std::vector<std::string> first_four_strings(string_version.begin(), string_version.begin() + 4);
    CHECK(functional_map(int_version.begin(), int_version.begin() + 4, 
                         [](int i) { return std::to_string(i); }) == first_four_strings);

    const std::vector<int> first_four_ints(int_version.begin(), int_version.begin() + 4);
    CHECK(functional_map(string_version.begin(), string_version.begin() + 4, 
                         [](const std::string & s) { return std::stoi(s); }) == first_four_ints);
} 
```

# c# - 保存来自 Web 服务调用的数据以在下次服务调用中使用

> ID：14945233
> 
> 赞同：0
> 
> 时间：2013-02-18T21:03:48.527
> 
> 标签：c#, .net, web-services, rest

我正在开发一个 Web 服务的 ac# 项目。它连接到读卡器设备。建立连接后，它会创建一个会话 ID。当创建一个会话 id 时，我应该锁定设备并停止创建任何会话，直到当前会话被释放。

当我与设备创建会话时，我将会话 ID 存储在私有变量中。在创建下一个会话之前，我让我的程序检查这个变量。但是，当我下次调用 Web 服务以创建另一个会话时，它不包含变量值并为我创建另一个会话。

我很困惑该怎么做。有什么方法可以保存可用于交叉检查下一次调用 Web 服务的数据？Cookie 或注册表更新？请任何解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:07:10.370

[您需要的大部分都在这里](https://stackoverflow.com/questions/11230961/data-persistance-in-web-services)。对于真正的持久性，您可能应该将其存储在某种数据库中，这样您就不会受制于处理特定的持久性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T21:10:25.960

我认为您想要的是您的网络服务的实例管理器。实施起来并不太难，并且会完成您尝试做的事情。

这是一个链接：http: [//msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)

# asp.net - 带有 Windows 身份验证的 ASP.net 站点

> ID：14945236
> 
> 赞同：1
> 
> 时间：2013-02-18T21:03:59.143
> 
> 标签：asp.net, iis-7, iis-7.5

首先 - 我是一名 IT 技术人员，实际上并没有生成我们遇到这些问题的代码 - 我只是试图让代码在 IIS 的站点内工作。现在我们的编码人员不认为他们的代码本身有问题（使用 Visual Studio 2010 编写，在 .NET4 框架中，如果不够详细，请见谅！）

我遇到的这个问题是这样的：

我已经在 IIS7 中创建了站点，启用了 Windows 身份验证，为每个人授予了对该文件夹的完全权限（以排除权限问题），并且在浏览它时我们得到它的错误：

![在此处输入图像描述](../Images/fcc6d20fd8ad8427af19cd9c29c91cb9.png) 我们尝试了所有不同的权限更改（NETWORK SERVICE 等），尝试了不同的应用程序池（现在它使用 DefaultAppPool），尝试`<authentication>`完全从代码中删除子句并在 IIS 中设置 Windows 身份验证，但都无济于事！

非常感谢任何输入，您也可以直接提出代码问题，因为我们（我自己和我们的程序员）正在积极监控这篇文章！

# javascript - 使用 jquery 或 javascript 在具有不同动态树的两个选项卡之间切换

> ID：14945238
> 
> 赞同：0
> 
> 时间：2013-02-18T21:04:04.543
> 
> 标签：javascript, jquery

我有两个带选项卡的 div，我需要编写一个 javascript 或 jquery 脚本，以便在单击相应选项卡名称时来回切换内容。

[我在这里](http://jsfiddle.net/sgnZS/3/)创建了一个小提琴。虽然我还没有开始编写 javascript。有人可以帮我看看吗？看起来应该很简单：

（身份证更新了）

*   准备就绪时显示 div1，

*   隐藏 div1，显示 div2 onclick link1，

*   隐藏 div2，显示 div1 onclick link2

我第一次尝试使用

```
$('#showTree').click(function() {
    $('#div1').hide();
    $('#div2').show();
}),
    $('#showTree2').click(function() {
    $('#div1').show();
    $('#div2').hide();
}); 
```

但这没有用。有人介意看看小提琴并给我一些建议吗？非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:28:18.893

您应该使用某个类来了解当前处于活动状态的选项卡。尝试 .toggle() 在此处显示/隐藏工作示例 [示例](http://jsfiddle.net/DmaG5/)

```
$('span.a, span.b').click(function() {
if(!$(this).hasClass('active')) {
    $('span.a, span.b').removeClass('active');
    $(this).addClass('active');
    $('div.a, div.b').toggle();
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:30:59.213

您的主要问题是您的标记无效。正因为如此，`#div2`才成了孩子的`#div1`。隐藏的瞬间`#div1`，`#div2`也是隐藏的。

```
<div id="div1">
    <div class="sidebar">
    </div>
<div id="div2">
    <div class="sidebar">
    </div> 
```

您需要匹配结束标签。

```
<div id="div1">
    <div class="sidebar">
    </div>
</div>
<div id="div2">
    <div class="sidebar">
    </div>
</div> 
```

此外，您需要修复重复的`id`. 特别是`#showTree`和`#showTree2`。一个快速的解决方法是改用类名。那是，

```
<nav class="sidebartabs">
  <a href="#" class="showTree">Questions by Folder</a>
  <a href="#" class="showTree2">Questions by Category</a>
</nav> 
```

在页面加载时隐藏`#div2`可以使用 CSS 来完成。

```
.hidden {
  display: none;
} 
```

```
<div id="div2" class="hidden">...</div> 
```

[在这里查看一个活生生的例子。](http://jsfiddle.net/7AeY2/)

# scheme - 为什么方案中的所有实现都需要尾递归？

> ID：14945240
> 
> 赞同：3
> 
> 时间：2013-02-18T21:04:13.010
> 
> 标签：scheme, tail-recursion

尾递归更有效，因为它重用相同的堆栈帧而不是创建新的堆栈帧，但为什么方案中的所有内容都需要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:13:25.943

Scheme 没有`goto`，因此所有循环最终都是使用尾递归完成的。如果没有适当的尾递归保证，就没有可靠的方法在 Scheme 中提供循环。

* * *

**更新：**我想解释一下“最终使用尾递归”的意思。让我们看一下`do`宏，因为@newacct 提到了它。例如：

```
(do ((i 1 (+ i 1)))
    ((> i 10))
  (display i)
  (newline)) 
```

正如我所提到的，Scheme 没有`goto`，所以它必须从某个地方得到它的循环。它实际上宏扩展为（类似）：

```
(let loop ((i 1))
  (unless (> i 10)
    (display i)
    (newline)
    (loop (+ i 1)))) 
```

请注意，`loop`这里不是关键字或内置函数。它是一个命名函数，由命名†</sup> 创建，并在^(表单)`let`^(底部被调用（通过尾递归） 。`unless`)

实际上，Scheme 中的所有标准循环形式都使用尾递归。没有办法摆脱它。

* * *

† 以下是命名`let`（松散地说^(‡</sup>）宏扩展为：)

```
(letrec ((loop (lambda (i)
                 (unless (> i 10)
                   (display i)
                   (newline)
                   (loop (+ i 1))))))
  (loop 1)) 
```

‡ 严格来说，它宏观扩展为：

```
((letrec ((loop (lambda (i)
                  (unless (> i 10)
                    (display i)
                    (newline)
                    (loop (+ i 1))))))
   loop)
 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:21:08.143

尾递归是由语言规范强制要求的。引用 R6RS 的第[5.11](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-8.html#node_idx_250)节：

> Scheme 的实现必须是适当的尾递归。在称为尾上下文的某些句法上下文中发生的过程调用是尾调用。如果 Scheme 实现支持无限数量的活动尾调用，则它是正确的尾递归。如果被调用的过程仍可能返回，则调用处于活动状态。请注意，这包括常规返回以及通过稍后调用的 call-with-current-continuation 捕获的延续返回。在没有捕获的延续的情况下，调用最多只能返回一次，而活动调用将是那些尚未返回的调用。正确尾递归的正式定义可以在 Clinger 的论文 [5] 中找到。识别来自 (rnrs base (6)) 库的结构中的尾调用的规则在第 11.20 节中描述。

这样做的实际原因是尾递归允许使用递归实现有效的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:24:01.963

没有 TR 保证`call/cc`将无法使用。循环本身可以通过[which 是语言的一部分](http://www.schemers.org/Documents/Standards/R5RS/HTML/)来实现。**`do`**

**编辑**：事实证明这是不正确的。请参阅 John Clements 在该问题上的评论。一种语言可以具有非 TR 函数调用机制，但具有用于调用延续的特殊单独机制。

# installshield - 一个特征的目标字符串中是否可以有多个变量？

> ID：14945241
> 
> 赞同：0
> 
> 时间：2013-02-18T21:04:18.253
> 
> 标签：installshield

我正在尝试证明我们的 InstallShield 项目将来不会更改名称，并且我想使用两个 IS 变量来创建目标路径的一项功能存在问题。

目的地：**[CommonAppDataFolder][ProductName]Foo**

以前，仅使用一个变量和包含产品名称的静态路径来安装此功能。

目的地：[CommonAppDataFolder]产品名称\Foo

从安装日志看来，上面粗体字符串中的第二个变量没有展开，C:\ProgramData\[ProductName]\Foo。安装程序也没有为它创建文件夹结构，即使我可以在系统上手动创建它，包括“[”和“]”字符。

有没有另一种方法可以动态地做到这一点，所以当我们的客户不可避免地再次更改我们的产品名称时，我不必记住艰难的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:52:55.547

要考虑的一种技术是将 InstallShield 自动化接口与独立构建结合使用。您可以将检入源代码管理的 ISM 设置为通用的东西，例如我的公司我的产品。然后在构建时，您可以输入这些值并将安装程序更改为某些变体。

这就是我们在上一份工作中的做法。我们从一个作为基础的 ISM 项目构建了数百个不同公司和产品的安装程序，所有细节都是在构建时围绕它构建的。

# python - Django查询单下划线表现得像双下划线？

> ID：14945242
> 
> 赞同：9
> 
> 时间：2013-02-18T21:04:18.943
> 
> 标签：python, mysql, django, django-models, django-queryset

我最近在我的代码中犯了一个错字，并注意到我得到了相同的行为，所以我想知道 django 查询中单下划线和双下划线之间的区别是什么。

```
>>> underscore = MyModel.objects.filter(foreign_key_id=var)
>>> double_underscore =  MyModel.objects.filter(foreign_key__id=var)
>>> underscore == double_underscore
False
>>> list(underscore) == list(double_underscore)
True 
```

我不确定使用什么相等方法来比较查询集，但是当我转换为 python 列表时，我发现其中包含完全相同的元素。有人对这里发生的事情有一些了解吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T21:06:50.840

这两个领域恰好都存在。

`foreign_key_id`是对象上自动创建的列`MyModel`，而外`foreign_key__id`键表本身是 ID。

这些值都是相同的..

```
MyModel1.foreign_key_id == 5  # this is stored on the model
                              # and does not require a lookup.
MyModel1.foreign_key.id == 5  # this is stored on the target table
                              # and requires a DB hit. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:07:33.607

`foreign_key_id`是 的（隐藏）字段名称`MyModel`，`foreign_key__id`是对字段引用的任何模型上的`foreign_key`字段的引用。换句话说，它是外键字段的特定细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-30T16:11:42.337

根据我的观察，Django 足够聪明，如果仅过滤或获取，则不会与 ForeignKey 进行联接`foreign_key__id`。您可以使用以下方法进行测试：

```
>>> print(MyModel.objects.filter(foreign_key_id=var).query)
>>> print(MyModel.objects.filter(foreign_key__id=var).query) 
```

由于`underscore`和`double_underscore`是内存中的独立对象，我相信这就是`underscore == double_underscore`返回 False 的原因。

# ruby-on-rails - 导轨：错误消息

> ID：14945246
> 
> 赞同：0
> 
> 时间：2013-02-18T21:04:41.953
> 
> 标签：ruby-on-rails, plugins, styles

某人。知道样式插件的这个问题吗？

```
 G:\testmud>rake db:migrate:down version=20130218112415
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at G:/testmud/Rakefile:7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:21:02.413

您会看到一个弃用警告，让您知道在 Rails 4 中，在 vendor/plugins 中存储插件已被删除，以支持使用 gems。如果目录中有插件，则应将它们重构为 ruby​​ gem。如果目录为空，那么您可以安全地删除应删除警告消息的供应商/插件。

# powershell - Powershell 文件重命名日期/时间

> ID：14945253
> 
> 赞同：0
> 
> 时间：2013-02-18T21:05:21.193
> 
> 标签：powershell

我有什么应该是一个简单的问题，但我似乎无法正确解决。我有一个文件有两个文件扩展名。我们检索文件，对其进行解密并将加密文件保存到备份文件夹中，并带有显示文件处理时间的日期/时间戳。我想要做的就是将日期/时间戳放在两个扩展之前而不是它们之间。必须有一个简单的单行答案，但我找不到。有什么建议么？

原始文件名 - DAILY AP FILES.ZIP.pgp

当前重命名文件名 - DAILY_AP_FILES.ZIP-02182013-155123.pgp

所需的重命名文件名 - DAILY_AP_FILES-02182013-155123.pgp

```
Get-ChildItem "$dlpath\*.pgp" | ForEach-Object {          
    Move-Item $_.FullName "$BackupFolder$($_.BaseName.Replace(" ", "_"))-$(Get-Date -Format "MMddyyyy-HHmmss").pgp"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:14:30.303

试试这个：

```
Get-ChildItem "$dlpath\*.pgp" | ForEach-Object {          
    Move-Item $_.FullName "$BackupFolder$($_.BaseName -replace " ", "_" -replace '\.([^\.]+)$')-$(Get-Date -Format "MMddyyyy-HHmmss").pgp"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:21:56.693

这对你有用吗？

```
Get-ChildItem "$dlpath\*.pgp" | ForEach-Object {
$NewBaseName = ($_.BaseName.Replace(" ", "_")) -replace '^(.+\.).+','$1'           
Move-Item $_.FullName "$BackupFolder$NewBaseName-$(Get-Date -Format "MMddyyyy-HHmmss").pgp"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T16:55:39.260

试试这个修改，改进，因为按日期排序

```
$source_path="D:\Transferencia"
$backup_folder="D:\Transferencia_Backup"

Get-ChildItem "$source_path\*.pgp" | ForEach-Object {          
   Move-Item $_.FullName "$backup_folder\$($_.BaseName -replace " ", "_")-$(Get-Date -Format "yyyyyMMdd_HHmmss").pgp"
} 
```

# html - 浏览器似乎在这个包含文本的块上有一个最小行高。为什么？

> ID：14945260
> 
> 赞同：3
> 
> 时间：2013-02-18T21:05:52.687
> 
> 标签：html, css

我希望我可以将块元素的行高设置为零，然后该元素内的每个行框将仅根据其内容的行高对齐。但是，当我尝试在这些内联元素上使用非常小的字体时，它们似乎与低于行中内容所需的基线对齐。我对 CSS 规范的理解与所有浏览器呈现的内容不一致。我有什么问题？

一个简单演示的代码如下所示（它也很[麻烦](http://jsfiddle.net/BEwSd/)）：

```
body {
    font-size:60px;
}
div {
    height:3em;
    width:8em;
    border:1px solid black;
    line-height:0; /* minimum line height for contained elements */
}
span {
    line-height:normal; /* don't inherit from containing block */
    background-color: #cff; /* so we can see positioning */
}
<div><span>Big text works</span></div>
<div><span style="font-size:.5em">Half text size works fine too</span></div>
<div><span style="font-size:.2em">Very small text doesn't align with the top of the containing box. Why does this happen?</span></div> 
```

根据[CSS 规范](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)：

> 在内容由行内元素组成的块容器元素上，'line-height' 指定元素内行框的最小高度。
> 
> 在不可替换的内联元素上，'line-height' 指定用于计算行框高度的高度。

我知道对于一个简单的例子，比如有很多方法可以破解小文本的位置并让它最终出现在包含块的顶部，但我真的很想了解文本的实际原因正在排队。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T21:29:32.750

这是因为`<spans>`默认`display: inline;`情况下，并且内联元素的 a 不能`line-height`小于其父元素。您可以将显示类型更改为`block`，它将起作用。如果您还`inline-block`设置了`vertical-align: top;`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/BH2jZ/)]]]

### 输出：

> ![在此处输入图像描述](../Images/658fabff0027968006ba2772f6e804d5.png)

### HTML：

```
<div><span style="font-size:.2em">"display: inline;" doesn't work</span></div>
<div><span id="block" style="font-size:.2em">"display: block;" works</span></div>
<div><span id="inline-block" style="font-size:.2em">"display: inline-block;" also works if you set "vertical-align: top;"</span></div> 
```

### CSS：

```
body {
    font-size:60px;
}
div {
    height:50px;
    width:400px;
    border:1px solid black;
    line-height:0; /* minimum line height for contained elements */
}
span {
    line-height:normal; /* don't inherit from containing block */
    background-color: #cff; /* so we can see positioning */
}
#block {
    display: block;
}
#inline-block {
    display: inline-block;
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:29:43.047

事实证明，我看到的行为与`line-height`我假设的最小值无关。问题在于基线对齐，因为跨度有`vertical-align:baseline`. 如果跨度有一个不同`vertical-align`的，例如`bottom`不依赖于其父级的基线，它会向上移动到包含 div 的顶部，我期望它是。

支柱（在每个行块开头并具有父元素`font-size`和`line-height`) 不仅指定了线条的顶部和底部边缘，它还有自己的基线。（在 CSS3 中它实际上有一堆基线，但现在我们可以只关注“字母”基线。）strut 的基线是这样定位的，以便在父元素的字体中呈现的字符最终会位于顶部和底部之间的中间。支柱。在这种行高为零的特殊情况下，支柱的顶部和底部是同一条线，但它的基线实际上低于其底部边缘。支柱的基线，就像它的底边一样，定义了线的最小值：它可以向下移动，但不能向上移动。这意味着当我们在 span 中渲染一个小得多的字体时，它使用的基线将使 div 的字体在 div 的顶部边缘居中。

# model-view-controller - 主干事件触发太多次

> ID：14945263
> 
> 赞同：0
> 
> 时间：2013-02-18T21:06:01.423
> 
> 标签：model-view-controller, backbone.js, backbone-events

我正在尝试学习如何与骨干一起工作。我目前正在尝试将 jQuery ui 中的可排序添加到由 Addy Osmani 创建的待办事项应用程序中。

因此，我尝试在可排序的放置事件上触发一个事件，正如我在 js fiddle 中看到的那样。此事件将`drop()`在我的项目视图中触发一个函数 ( `update-order()`)，该函数在我的应用视图中触发一个函数 ()。`changeand`我希望最后一个函数通过保存新订单来重新排序待办事项列表。

我遇到的问题是我的函数`updateOrder`被触发了 4 次，当 drop 函数只触发一次时，也没有记录顺序的变化，我不知道为什么。

这是我的示例：[http](http://www.fgtechs.fr/backbone/) ://www.fgtechs.fr/backbone/我基本上是在尝试反转可排序的放置事件的顺序。

我希望我的功能`updateOrder`只被触发一次并记录订单的变化......但是这一切都没有发生......

我真的需要你的帮助。

这是我的代码的一部分（您可以在我的示例中看到其余部分）：

```
<script>
        $(document).ready(function() {
            $('#widget-list').sortable({
                stop: function(event, ui) {
                    event.stopPropagation()
                    event.preventDefault();
                    ui.item.trigger('drop', ui.item.index());
                }
            });
        });    
    </script>

//on the drop, we invert the order
        updateOrder:function(event, model, position){
            alert('update-order');
            console.log(app.Widgets.length);
            app.Widgets.each(function (widget, order) {
                widget.save({
                    'order': app.Widgets.length-order
                });
            });
        }

//On the event drop, we trigger the function update order
drop: function(event, position) {
    this.$el.trigger('update-order', [this.model, position]);
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:41:35.680

好吧，我想通了，我遇到的问题是我在属性更改（订单）上触发了我的更新订单事件。因为单次更改的顺序比项目多，所以该事件被触发了两次，我只是更改了触发更新顺序事件的方式，并且效果很好。

# https - 如果我将 https 网站与非 https 视频混合在一起 - 会发生什么？

> ID：14945266
> 
> 赞同：0
> 
> 时间：2013-02-18T21:06:15.453
> 
> 标签：https, html5-video

假设我有一个受 ssl 保护的网站。它有一个视频标签，视频标签使用一个 URL，例如[http://www.somesite.com/somevideo.mp4](http://www.somesite.com/somevideo.mp4)。我假设视频不会被加密。现在让我们假设视频来自同一个网站，因此具有 https 前缀。会被加密吗？

现在让我们假设该网站不受 SSL 保护，但视频 URL 来自 https 站点。视频会被加密吗？

总的来说，将两者混合是否有问题？例如，如果错误地将来自同一站点的视频（假设该站点受 ssl 保护）放入了没有 https 前缀的视频标签的 src 属性中，会发生什么情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:18:22.607

虽然我没有玩过 html5 视频，但我可以自信地说 http 请求采用了非加密传输；和 https 请求使用加密传输。

当浏览器呈现一个 https 页面时，后续的 http 内容请求通常会产生一个警告，表明在页面的加密请求之后正在发出未加密的请求（例如，Chrome 和 Firefox 在 URL 附近显示一个小警告图标）。

当浏览器呈现一个 http 页面时，后续的 https 内容请求不会产生任何警告。

# c# - EntityFramework 中的链接表

> ID：14945268
> 
> 赞同：0
> 
> 时间：2013-02-18T21:06:30.110
> 
> 标签：c#, entity-framework, postgresql

我正在为我的 RoleProvider 使用 PostGre。那是我的 DbContext。

```
public class MembershipDbContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Role> Roles { get; set; }
    public DbSet<RoleUser> RoleUsers { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().ToTable("Users");
        modelBuilder.Entity<Role>().ToTable("Roles");
        modelBuilder.Entity<RoleUser>().ToTable("RoleUser");
    }
} 
```

和型号：

```
public class User
{
    public virtual ICollection<Role> Roles { get; set; }

    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string PasswordSalt { get; set; }
}

public class Role
{
    public virtual ICollection<User> Users { get; set; }

    public int RoleId { get; set; }
    public string Name { get; set; }
}

public class RoleUser
{
    [Key, ForeignKey("Role"), Column(Order = 0)]
    public int RoleId { get; set; }
    [Key, ForeignKey("User"), Column(Order = 1)]
    public int UserId { get; set; }

    public virtual Role Role { get; set; }
    public virtual User User { get; set; }
} 
```

问题样本：

```
 var dbContext = new MembershipDbContext();

    var users = dbContext.Users.ToList();
    var roles = dbContext.Roles.ToList();

    //it says: "ERROR: 42P01: relation "dbo.RoleUser1" not exist"
    var rolesOfFirstUser = users[0].Roles;//not working 
    var usersOfFirstRole = roles[0].Users;//not working

    var roleUsers = dbContext.RoleUsers.ToList();//all links works perfect 
```

我应该怎么做才能让它工作？ [这个答案修复](https://stackoverflow.com/a/14442001/2084457)了它，但我不知道 EF 在哪里创建“RoleUsers”链接表。我需要它。

ps对不起英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:34:58.380

您实际上应该使这些集合（在两个文件上）指向 RoleUser，即以下内容：

`public virtual ICollection<RoleUser> RoleUsers {get;set;}`

# .net - 当我使用 SaveFileDialog 和 Excel.SaveAs 时出现重复的“已经存在”对话框

> ID：14945271
> 
> 赞同：1
> 
> 时间：2013-02-18T21:06:43.083
> 
> 标签：.net, excel-interop, savefiledialog

我正在使用`Microsoft.Office.Interop.Excel`框架以编程方式创建一个 Excel 文件。在保存的时候，我想让用户选择命名和保存位置，所以我使用`System.Windows.Forms.SaveFileDialog`. 一切正常，除非用户选择了一个已经存在的文件名，然后两者`SaveFileDialog.ShowDialog()`并`Excel.Application.SaveAs()`提出“这个文件已经存在 - 你确定要覆盖吗？” 警告，当然不需要 2。我看不出有办法压制他们中的任何一个。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:28:02.970

它可能满足您的要求。

```
 try
        {
            Microsoft.Office.Interop.Excel.Application my_app = null;
            Microsoft.Office.Interop.Excel.Workbook my_book = null;
            Microsoft.Office.Interop.Excel.Worksheet my_sheet = null;
            Microsoft.Office.Interop.Excel.Range rng = null;
            object missing = Type.Missing;

            my_app = new Microsoft.Office.Interop.Excel.Application();
            my_book = my_app.Workbooks.Add(missing);
            my_sheet = (Microsoft.Office.Interop.Excel.Worksheet)my_book.ActiveSheet;

            rng = my_sheet.get_Range("A1", missing);
            rng.Value2 = "Welcome Man";

            SaveFileDialog s = new SaveFileDialog();
            s.ShowDialog();

            if (s.OverwritePrompt)
            {
                my_book.SaveCopyAs(s.FileName);
                my_book.Close(false, s.FileName, missing);

            }
            else
            {
                my_app.Save(s.FileName);
                my_book.Close(true, s.FileName, missing);
            }

        }
        catch
        {

        } 
```

# r - 确定参数的评估是否会因为不存在而失败

> ID：14945274
> 
> 赞同：6
> 
> 时间：2013-02-18T21:06:46.117
> 
> 标签：r, eval

我有一个相当复杂的情况，我可能最终将一个不存在的变量传递给函数。我很清楚*何时*会发生这种情况，但修复它会很困难；我对能够可靠地检测到这种情况并在这种情况下执行解决方法感到满意。我可以简单地使用

```
inherits(try(eval(possibly_missing_variable),silent=TRUE),"try-error") 
```

但如果可能的话，我想测试导致错误的具体情况`object 'possibly_missing_variable' not found`。（我可以尝试在错误消息中使用 grep 查找“未找到”，但过去我在 r-devel 列表中被警告说，如果 R 以不同的语言运行，那么这将失败，以便翻译版本的出现错误信息。）

我尝试了 的各种组合`deparse(substitute(...))`，但它们似乎在调用堆栈上运行得不够远。这是我对可重现示例的最佳拍摄：

```
f <- function(d) {
    ## test here
    cat("'d' exists:",exists("d"),"\n") ## TRUE
    cat("deparse(substitute(d)):",dd <- deparse(substitute(d)),"\n") ## OK
    cat("exists('",dd,"'): ",exists(dd),"\n",sep="")
    eval(d)
}

f2 <- function(ddd) {
    f(ddd)
}

ddd <- 5
f2(junk) 
```

结果是：

```
'd' exists: TRUE 
deparse(substitute(d)): ddd 
exists('ddd'): TRUE
Error in eval(d) : object 'junk' not found 
```

我想要一个能够正确通知我（在遇到错误之前）评估将失败的测试，因为在环境/封闭环境等堆栈中的任何地方都找不到相关对象。有什么想法......？

更一般地说，有没有办法找出参数的最上游名称（`"junk"`在这种情况下）？如果我能做到这一点，那么`exists(farthest_upstream_name)`将解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:31:57.637

也许是这样的（从我对[这个问题](https://stackoverflow.com/questions/12850141/programming-safe-version-of-subset-to-evaluate-its-condition-while-called-from)的第二个答案中窃取）？

```
f <- function(d) {
    ## test here
    ff <- sys.frames()
    ex <- substitute(d)
    ii <- rev(seq_along(ff))
    for(i in ii) {
        ex <- eval(substitute(substitute(x, env=sys.frames()[[n]]),
                              env = list(x = ex, n=i)))
    }
    if(!exists(deparse(ex))) stop("Substitute real error action here")
    eval(d)
}

f2 <- function(ddd) {
    f(ddd)
}

ddd <- 5
f2(junk)
## Error in f(ddd) (from #10) : Substitute real error action here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:48:53.577

我喜欢 Josh O'Brien 的[方法](https://stackoverflow.com/a/14945636/2097514)。但是，`f`按照那里的定义使用，即使传递的名称确实具有活动绑定，如果它是在调用堆栈中的某个函数本地创建的（而不是在全局环境中），也可以触发“不存在”错误条件）。此外，虽然可能与 Ben 的预期用法没有特别相关，但如果参数是表达式，而不仅仅是名称，则会触发错误。

一个简单的解决方法是调整 Josh 的函数以包含一个`is.symbol`测试：

```
f <- function(d) {
    ## test here
    ff <- sys.frames()
    ex <- substitute(d)
    ii <- rev(seq_along(ff))
    for(i in ii) {
        ex <- eval(substitute(substitute(x, env=sys.frames()[[n]]),
                              env = list(x = ex, n=i)))
    }
    if(is.symbol(ex) && !exists(deparse(ex))) {
        stop("Substitute real error action here")
    }
    eval(d)
} 
```

所需的检查仍然有效：

```
f2 <- function(ddd) {
    f(ddd)
}
f2(junk)
## Error in f(ddd) : Substitute real error action here 
```

但是以下两种情况现在通过而不是产生错误：

```
# case 1: argument to f is local to a calling function
f3 <- function() {
    notjunk <- 999
    f(notjunk)
}
f3()
## [1] 999

# case 2: argument to f is an expression
f2(5+5)
## [1] 10 
```

发生的情况`f`是，在重复应用 call-substitute-substitute 之后，`ex`在上面的案例 1 中设置为评估的参数本身，在案例 2 中设置为传递的（尽管仍然未评估）调用。在这两种情况下，`exists`单独的测试都会失败是因为`ex`它实际上不是一个名称（又名符号），但如果我们能够解决名称之外的问题，显然不存在不是问题。

# qt - QSlider 内存泄漏？

> ID：14945275
> 
> 赞同：2
> 
> 时间：2013-02-18T21:06:47.483
> 
> 标签：qt, qslider

我在 linux 64 位上有 Qt 5.0，我注意到一些奇怪的东西。我有小型音乐播放器。最初它有 14.4 MB 的 RAM。但是听了三首歌曲后，它会增长到 26 MB 并且还在增长。我以为我有一些内存泄漏，但 valgrind 表明一切正常。所以我开始评论我的代码并在评论之后：`ui->horizontalSlider->setValue(pos);`现在一切正常，我的应用程序在 RAM 中始终有 ~14MB。所以我尝试了仅使用 QSlider 的空项目（最多 200 个）。初始化：5 MB，滑动到末尾：11 MB。最大 1000 我得到近 20MB。这么小而简单的控制占用这么多内存，这正常吗？

# mysql - 使用子选择查询两个数据库

> ID：14945280
> 
> 赞同：1
> 
> 时间：2013-02-18T21:06:54.113
> 
> 标签：mysql, sql

我有两个 mysql dbs：db_system 和 db_events，我需要为每个设备（db_system）获取最后一个事件（db_events）

```
 SELECT * FROM db_events.events WHERE db_events.events.device_id IN (
            SELECT device_id 
            FROM db_system.devices 
            WHERE db_system.devices.vendor = 1)
    ORDER BY db_events.events.id DESC LIMIT 1 
```

但是我无法获得它，我只获得了一张唱片，我不知道如何获得它，请有人帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:12:17.337

这应该使用`MAX(Id)`每个 Device_ID 工作：

```
SELECT e.* 
FROM db_events.events e 
   JOIN (
      SELECT Max(id) MaxId, device_id
      FROM db_events.events
      GROUP BY device_id ) e2 on e.Id = e2.MaxId AND e.device_id = e2.device_id
WHERE e.device_id IN (
            SELECT device_id 
            FROM db_system.devices 
            WHERE vendor = 1)
ORDER BY e.id DESC 
```

你可能不再需要 ORDER BY 了——我只是把它留在那里，以防你想要你的结果。

此外，这确实假设 Max(Id) 决定了每个设备的最新事件——我假设这是因为您是通过上面的 id DESC 订购的。如果没有，您可以使用具有相同逻辑的 DateTime 列。

# arraylist - 检查 ArrayList 中的特定值

> ID：14945283
> 
> 赞同：0
> 
> 时间：2013-02-18T21:07:08.473
> 
> 标签：arraylist

我需要确定 ArrayList 中的元素是否具有特定值。这是我正在尝试的当前方式。

```
 public static boolean hasDwgNamedReference(Object valueDWG){ 
  boolean b = false; 
  String dwgName = "dwg_";
  if(valueDWG == null){
     b = false;
  }
  else {
     String checkNamedRef = Arrays.toString((Object[]) valueDWG).substring(1, 5);
     System.out.println("checkNamedRef " + checkNamedRef + "\n");   
     if(checkNamedRef.equals(dwgName)){
           b = true; 
        }
  }
  return b;
 }// end hasDwgNamedReference 
```

我很确定问题出在

```
 String checkNamedRef = Arrays.toString((Object[]) valueDWG).substring(1, 5); 
```

你认为我需要增加 ArrayList 并检查每个元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T15:12:29.940

好吧，首先，您不需要包含第一个“if”语句。b 已经为假，因此无需再次将其设置为假。

如果您在对象上使用 Arrays.toString() 方法，您可能会获得该对象的*标识*，或者它所拥有的内存地址。如果您尝试通过 equals 方法与 checkNamedRef 进行比较，您可能会比较地址和字符串，这永远不会为您提供您正在寻找的真实内容。

# function - 在 ASM 中修改给定变量

> ID：14945285
> 
> 赞同：0
> 
> 时间：2013-02-18T21:07:11.890
> 
> 标签：function, variables, assembly, x86

这是 ASM 代码：

```
__declspec(naked) void foo(something* t)
{
__asm {
push    ebp
mov ebp, esp
mov eax, dword ptr [t]
mov dword ptr [eax], 0
mov dword ptr [eax+4], 0
mov esp, ebp
pop ebp
} 
```

这将是代码的 C 版本：

```
struct something {
_int64 a;
_int64 b;
_int64 c;
};

void foo(struct* something) {
something->a = 0;
} 
```

现在，我想知道是否可以在不将 t 存储在 eax 中的情况下做同样的事情。而只是使用 ebp 代替。但我不确定“a”在哪里（ebp+28 或 ebp），甚至可能。这似乎不起作用。如果这是可能的，有谁，以及如何？

```
mov     dword ptr [ebp+28], 0
mov     dword ptr [ebp+24], 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:25:07.117

表达式的任意嵌套在汇编中是不可能的。这就是发明高级语言的目的。换句话说，是的，`t`如果你想取消引用它，你必须将它的值加载到一个寄存器中。装配不支持像这样的结构

```
mov     dword ptr [[ebp+28]], 0 
```

这就是你的目标。`ebp+28`不是`t->a`;的地址 它是 的地址`t`，这是 的地址`t->a`。

此外，程序集片段将两者归零`t->a`，`t->b`而 C 片段仅归零`a`。它们不是等价的。

# php - 在没有 facebook 登录的情况下验证 facebook 用户

> ID：14945286
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:07:15.613
> 
> 标签：php, javascript, facebook, facebook-graph-api

因此，我正在尝试使用 Facebook API，并阅读了他们的网页（developers.facebook.com）并观看了他们的视频教程。但我不认为他们擅长向我解释事情。有人可以将我重定向到网页或解释我如何在不使用我的网站登录过程的 facebook 登录插件的情况下对用户进行身份验证并获得他做某些事情的许可（例如阅读他的主页）吗？

我希望用户使用我的登录功能登录页面，然后从下拉菜单中选择 Facebook。然后它会将他们带到 /facebook.php 网站，该网站对他们进行身份验证并授予一些权限。

我该怎么做呢？我必须在我的网站中包含什么样的代码？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:40:40.903

不使用登录按钮验证 Facebook 用户

JavaScript：http: [//developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/)

PHP：http: [//developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)

# objective-c - Objective-C 游戏类序列化建议（手工编码的 XML 文件）

> ID：14945288
> 
> 赞同：1
> 
> 时间：2013-02-18T21:07:20.073
> 
> 标签：objective-c, xml, serialization, xml-serialization

我正在寻找/实例化我在运行时从 xml 文件创建的游戏的关卡和关卡敌人，我最初将手动编辑，直到我有时间创建关卡编辑器。一旦我有时间制作编辑器，我希望自动序列化并将我的关卡保存到磁盘。我的敌人类使用 CGPoints、浮点数和枚举，以及像 NSString 这样的基本数据类型。

作为 Objective-c 的新手，我很难找到最有效的方法。NSPropertyListSerialization 似乎只支持基本数据类型，并且从阅读文档来看，它看起来好像 NSCoder 使用自己的格式进行序列化/反序列化。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:19:46.573

[该库](https://github.com/psineur/NSObject-AutomagicCoding)使您能够将任何对象保存到属性列表中，并将[这个](https://github.com/jagill/JAGPropertyConverter)对象保存到 JSON 中，而无需付出任何额外的努力。如果您想知道它们是如何工作的，请查看[存档和序列化编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)。

# java - 如何在同一个应用程序中使用多个 JDBC 驱动程序？

> ID：14945289
> 
> 赞同：8
> 
> 时间：2013-02-18T21:07:20.953
> 
> 标签：java, jdbc

据我了解，一旦我执行

```
Class.forName("net.sourceforge.jtds.jdbc.Driver"); 
```

我初始化应用程序以全局使用 JTDS SQL Server 驱动程序并

```
java.sql.DriverManager.getConnection(url, user, password); 
```

之后返回 SQL Server 连接。

但是，如果我想在同一个函数中使用多个不同的数据库引擎，获得一个 JTDS SQL Server 连接，然后，例如一个 PostgreSQL 连接，然后又是一个新的 JTDS SQL Server 连接，该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T21:16:04.113

你误会了。当您使用 加载驱动程序类时`Class.forName()`，该驱动程序会将自身注册到驱动程序管理器。您可以使用任意数量的驱动程序来执行此操作。

的第一个参数`getConnection()`是一个 URL，它将唯一标识用于该连接的驱动程序。

但是，我建议您使用连接池（例如[Apache DBCP](http://commons.apache.org/dbcp/)），而不是直接从驱动程序管理器获取连接。这将让您根据需要获得连接，并将提供一些额外的功能，例如如果您忘记将连接返回到池中会发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:08:35.007

你需要使用`DataSource`. `DataSource`为每种类型的连接配置一个并且每次都使用适当的`DataSource`（例如通过适当的`DAO`）

# javascript - 用户 + 朋友标记的照片

> ID：14945291
> 
> 赞同：1
> 
> 时间：2013-02-18T21:07:30.813
> 
> 标签：javascript, json, facebook-graph-api

是否可以使用 Facebook Graph API 获取用户 + 所选朋友的所有照片。我已经厌倦了使用`/me/?fields=id,name,tagged.with(friendID).fields(picture)`，但它变灰并且没有返回任何结果。

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

# iframe - 如何用另一个 iframe 替换一个 iframe

> ID：14945296
> 
> 赞同：0
> 
> 时间：2013-02-18T21:07:39.933
> 
> 标签：iframe, flash

所以我有这个来自 Flash CS5.5 的 html 包装器，但是除非我使用 iframe，否则 swf 文件不会在 PHP 中显示视频皮肤。我遇到的问题是我想使用与此类似的结果

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="980" height="380" id="g-max_banner" align="middle">
            <param name="movie" value="im/stuff/vid.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="im/stuff/vid.swf" width="980" height="380">
                <param name="movie" value="im/stuff/vid.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <iframe width="980" height="380" src="http://www.youtube.com/embed/videoseries?list=PLlLcNiMNCMn_4dR6TZQCTVfY7qo51VJ8A"></iframe>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object> 
```

因此，当有人没有闪光灯时，它会拉动 youtube 播放列表。有没有办法使用 iframe 来做到这一点，因为嵌入在 swf 中的视频皮肤没有显示在使用上述代码的网页上？我已经使用基本的 iframe 调用对其进行了测试，并且皮肤出现了，所以我知道它可以正常工作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:42:37.157

没关系，我修好了。您可以在 Flash 创建的 php 中使用 html 包装器。您只需要将皮肤文件放在配置文件所在的网站主机的根文件夹中。

# node.js - 节点找不到 Less 模块

> ID：14945298
> 
> 赞同：6
> 
> 时间：2013-02-18T21:07:44.097
> 
> 标签：node.js, ubuntu, less

我正在尝试在 Ubuntu 12.1 上安装 Node 和 Less。安装似乎工作正常，我可以看到当我使用“sudo npm g install less”安装Less时创建了一个Less文件夹：

/usr/local/lib/node_modules

但是，当我运行“lessc -v”时，我得到以下信息：

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'less'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/bin/lessc:8:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-13T07:23:07.507

您应该将节点模块目录的符号链接创建到您的主目录中。

```
$ ln -s /usr/lib/node_modules/ ~/.node_libraries 
```

（如果您从源代码安装节点，它将是 /usr/local/lib/node_modules）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-07T16:00:12.150

安装在“全局范围”中的模块（当您使用`npm -g install`或安装来自 Ubuntu 存储库的节点模块时会发生这种情况，例如 - `sudo apt-get install node-less`）是通过填充`NODE_PATH`环境变量来加载的。

从 Ubuntu 存储库安装的软件包会自动处理此问题，但如果您手动安装，则必须自己设置。在您的情况下，您需要将以下命令添加到您的`.bash_profile`：

```
export NODE_PATH="$NODE_PATH:/usr/local/lib/node_modules" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T23:53:55.123

```
sudo ln -s /etc/alternatives/node /usr/local/bin/node 
```

它适用于我的 Ubuntu 13.04

# ruby - 在 Mechanize 中使用登录表单

> ID：14945299
> 
> 赞同：5
> 
> 时间：2013-02-18T21:07:46.893
> 
> 标签：ruby, mechanize, mechanize-ruby

我知道 Stackoverflow 上有与此非常相似的帖子，但我似乎仍然无法弄清楚我的尝试有什么问题。

```
# login to the site 
mech.get(base_URL) do |page|
  l = page.form_with(:action => "/site/login/") do |f|
    username_field = f.field_with(:name => "LoginForm[username]")
    username_field.value = userName
    password_field = f.field_with(:name => "LoginForm[password]")
    password_field.value = password
    f.submit
  end
end 
```

这是我的错误：

```
rb:18:in `block (2 levels) in <main>': undefined method `field_with' for nil:NilClass (NoMethodError) 
```

这是HTML

```
<div class="bucketbody">

    <div class="form padding10">
    <form id="login-form" action="/site/login" method="post">
        <div class="row">
            <p class="note float_right">Fields with <span class="required">*</span> are required.</p>
            <label for="LoginForm_username" class="required">Email address <span class="required">*</span></label>              <input class="width_66per" autofocus="" name="LoginForm[username]" id="LoginForm_username" type="text">                         </div>

        <div class="row">
            <label for="LoginForm_password" class="required">Password <span class="required">*</span></label>               <input class="width_66per" name="LoginForm[password]" id="LoginForm_password" type="password">                          </div>

                    <div class="row rememberMe nolabel">
            <span class="field"><input id="ytLoginForm_rememberMe" value="0" name="LoginForm[rememberMe]" type="hidden"><input name="LoginForm[rememberMe]" id="LoginForm_rememberMe" value="1" type="checkbox">                <label for="LoginForm_rememberMe">Remember me on this computer</label>                              </span>
        </div>

        <p class="note"><a href="http://test.XXXXXXXX.com/user/reset">Forgot your password?</a></p>

        <div class="row buttons" style="padding-left: 0px;">
            <input class="pushButton" name="yt0" value="Login" type="submit">           </div>

    </form>     </div><!-- form -->

</div> 
```

页面

```
#<Mechanize::Page
 {url #<URI::HTTP:0x225ce70 URL:http://xxxxxx.com/>}
 {meta_refresh}
 {title "xxxxxxxxxxx | xxxxxxxxx"}
 {iframes}
 {frames}
 {links
  #<Mechanize::Page::Link "\r\n                        " "/">
  #<Mechanize::Page::Link "About xxxxxx" "/features">
  #<Mechanize::Page::Link "xxxxx Overview" "/features">
  #<Mechanize::Page::Link "xxxxxxx for Associations" "/associations">
  #<Mechanize::Page::Link "xxxxxx For Education" "/education">
  #<Mechanize::Page::Link "FAQ" "/faq">
  #<Mechanize::Page::Link "About Us" "/aboutus">
  #<Mechanize::Page::Link "About Us" "/aboutus">
  #<Mechanize::Page::Link "News & Events" "/news-events">
  #<Mechanize::Page::Link "Environmental Commitment" "/environment">
  #<Mechanize::Page::Link "Our Team" "/ourteam">
  #<Mechanize::Page::Link "The xxxxxxxxxx" "/xxxxxxxxxx">
  #<Mechanize::Page::Link "Free Trial" "/freetrial">
  #<Mechanize::Page::Link "Contact" "/contacts">
  #<Mechanize::Page::Link "Contact us" "/contacts">
  #<Mechanize::Page::Link
   "xxxxxxxxxx"
   "http://www.xxxxxxxx.com/services/web-services/">
  #<Mechanize::Page::Link
   "inquire@xxxxxxxxx.com"
   "mailto:inquire@xxxxxxxxxxx.com">
  #<Mechanize::Page::Link xxxxxx" "http://www.xxxxxxxxx.com/">
  #<Mechanize::Page::Link
   "Technology Association of Oregon"
   "http://www.techoregon.org/">
  #<Mechanize::Page::Link "" "http://www.terrapass.com/">
  #<Mechanize::Page::Link "" "http://www.arborday.org/">}
 {forms}> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:03:28.500

你让它变得比它需要的更复杂：

```
page = mech.get base_URL

form = page.form # page.forms[1], etc.
form['LoginForm[username]'] = userName
form['LoginForm[password]'] = password

l = form.submit form.button 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T05:25:21.813

为什么不直接发送 post 请求？尝试这个：

```
respond = mech.post('www.mysite.com/site/login', "LoginForm[username]" => userName,    "LoginForm[password]" => password) 
```

如果您知道目标（/site/login）、请求方法（post）和必须发送的参数，请在不弄乱表单的情况下执行 post 请求。

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:46:43.560

尝试这个：

```
mech.get(base_URL) do |page|
  l = page.form_with(:action => "/site/login") do |f|
    username_field = f.field_with(:name => "LoginForm[username]")
    username_field.value = userName
    password_field = f.field_with(:name => "LoginForm[password]")
    password_field.value = password
  end.submit
end 
```

[我在mechanize 示例页面](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)中删除了`/`末尾的`:action => "/site/login/"`并`submit`直接链接到块之后。虽然我没有运行代码，所以让我知道它是否有效。

# css - 导航栏中的 CSS 样式影响内容中的链接

> ID：14945306
> 
> 赞同：1
> 
> 时间：2013-02-18T21:07:59.923
> 
> 标签：css

我创建了带有指向其他页面的超链接的导航栏

CSS 代码：

```
a
{
display:block;
width:120px;
color:brown;
text-decoration:none;
text-align:center;
background-color:yellow;
padding:4px;
transition-property: background;
transition-duration: 1s;
} 
```

但是，这现在会影响导航栏之外的其他链接。如何将导航栏中的链接与内容文本中的链接分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:12:19.023

您可以指定仅应用于导航栏中的链接的样式。您需要导航栏的选择器。例如，如果它是一个您可以使用的 nav 标签，`nav a{}`或者它有一个 navigator 类，那么 . `navigator a{}`或类似的 id`#navigator a{}`

# pcap - tcpdump - pcap 文件中的最大数据包数量？

> ID：14945307
> 
> 赞同：0
> 
> 时间：2013-02-18T21:08:06.983
> 
> 标签：pcap, libpcap, tcpdump

pcap 文件是否有最大数量的数据包（超出操作系统限制？

查看规范，我在[pcap 文件格式](http://wiki.wireshark.org/Development/LibpcapFileFormat#File_Format)中看不到任何会限制数据包数量的内容。

也许 libpcap 或 tcpdump 会限制写入的数据包数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:24:07.170

不，pcap 文件格式中没有任何内容限制文件中的数据包数量。（如果Section Header Block必须包含一个节中的字节数，则[pcap-ng](http://www.winpcap.org/ntar/draft/PCAP-DumpFileFormat.html)文件格式允许一个节中最多18446744073709551614个字节，但是，一个文件中超过18446744073709551615个字节，即使是当前的64位操作系统文件会有问题。:-))

Tcpdump 只是使用 libpcap 来写出文件，所以它只会受到 libpcap 的限制。

libpcap 1.0 及更高版本`AC_SYS_LARGEFILE`在配置脚本中使用宏，因此，在 UN*X 上，*如果*底层操作系统支持大于 2GB 的文件（对于 64 位机器，它们都应该这样做，并且大多数（如果不是全部）都有在 32 位机器上完成了几年），并且*如果*配置脚本在 32 位机器上正确设置了一些东西以允许大文件（或者如果不需要这样的设置 - 例如，在 *BSD 和 OS X 上不需要)，*如果*构建库的人没有以某种方式阻止它工作，那么 libpcap 写入大于 2GB 的文件应该没有问题（当然，只要你有足够的磁盘空间......）。

我不知道用于构建 WinPcap 的任何编译器附带的 C 支持库是否支持 Windows NT（NT 3.x、NT 4.0、2000、XP、Vista、7、8 和各种服务器版本）上的大文件)，但我怀疑它会。我不认为 Windows OT (95, 98, Me) 支持大文件。

# html - 输入字段的大小可以设置为百分比值吗？

> ID：14945309
> 
> 赞同：5
> 
> 时间：2013-02-18T21:08:23.790
> 
> 标签：html, css, input

我无法创建一个在居中时覆盖浏览器窗口宽度 80% 的输入字段。

```
<input style="margin-right:10%; margin-left:10%;" size="100%"> 
```

仅在浏览器最大化时有效。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T21:10:04.817

试试这个

```
<input type="text" id="url" NAME="otherSite" style="width:70%" value=""/> 
```

# c# - 带有 CAST 到 smallmoney 的 sql 的 linq 版本

> ID：14945310
> 
> 赞同：1
> 
> 时间：2013-02-18T21:08:25.303
> 
> 标签：c#, sql, linq, linq-to-sql

我正在尝试进行 linq 查询来执行此查询。Additional Data 列是 nvarchar(20) - 因此 linq 将其作为字符串读取

这在 SSMS 中运行良好

```
select SUM(CAST(AdditionalData as smallmoney)) from TransTable
where ActionID = @actID and UserID = uID; 
```

这是我在 linq 版本上的失败尝试（我猜 Decimal.Parse() 无法从 linq 转换为 sql）

```
(from a in Context.TransTable
   where a.ActionID == action.ActionID && a.UserID == (long)userId
   select decimal.Parse(a.AdditionalData)).Sum(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:33:37.737

如果结果集不是太大，您可以在客户端解析该值。

```
decimal value;

var sum = (from a in Context.TransTable
           where a.ActionID == action.ActionID && a.UserID == (long)userId
           select a.AdditionalValue).ToList().
           Select(x => decimal.TryParse(x, out value) ? value : 0).Sum(); 
```

# jquery - 未在 Mozilla 和 Opera 中呈现的网站组件

> ID：14945312
> 
> 赞同：0
> 
> 时间：2013-02-18T21:08:31.927
> 
> 标签：jquery, html, css, opera, mozilla

我目前正在开发一个单页网站 - www.deepakprabhakaran.com

它是用 HTML、CSS3、Jquery、Javascript 编写的。

组件按照 Chrome 和 IE9 中的编码呈现。但它不适用于 Mozilla 和 Opera。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:47:44.443

那是您正在谈论的三种不同的渲染引擎。多件事可能是错误的。

如果您可以向我们发送链接，则可以更轻松地查看您的代码发生了什么。

# php - 如何将 CONCAT_WS 与 IN 一起使用？

> ID：14945317
> 
> 赞同：3
> 
> 时间：2013-02-18T21:08:44.597
> 
> 标签：php, mysql, symfony, doctrine-orm

使用Symfony2和Doctrine2，想把CONCAT_WS和IN结合起来，而不是写很多IF。

```
WHERE CONCAT_WS('-', id2, id2) IN ($ids) 
```

我收到此错误：

```
[Syntax Error] line 0, col 446: Error: Expected Doctrine\\ORM\\Query\\Lexer::T_IN, got '(' 
```

$id 的格式为“123-456”。

如果我只是使用列而不是 CONCAT_WS，它可以工作：

```
WHERE id2 IN ($ids) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:26:02.083

并非所有 MySQL 函数都可用于 Doctrine。只有那些对所有支持的数据库通用的功能才可用。

按照此链接查看默认可用的函数列表[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#functions-operators-聚合体](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#functions-operators-aggregates)。

如果您仍然想使用 CONCAT_WS，请阅读以下链接中有关创建自定义函数的信息。您可以创建自己的 DQL 自定义函数，并且可以像以前一样使用。

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html)

[http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html](http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T11:44:26.353

我遇到了同样的问题，我用这个解决了它：

```
CONCAT(CONCAT('-', id2), id2) 
```

不是最优雅的解决方案，但它有效。编写自定义函数是要走的路。

# android - Safari Repeating-y 背景拉伸宽度

> ID：14945320
> 
> 赞同：0
> 
> 时间：2013-02-18T21:08:56.530
> 
> 标签：android, css, background, safari

我有一张网站[http://www.myscholly.com](http://www.myscholly.com)的背景图片，它在 Firefox 和 chrome 中渲染得很好。但是，在 Safari 中加载时，它会拉伸背景图像，而不是应用 repeat-y 属性。这也发生在android上。为什么不能正确重复？是语法问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:23:29.827

固定的。问题是 html5 属性

> -webkit-background-size：封面；

这迫使背景图像扩展到页面宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:25:22.417

我从未见过将背景图像应用于 html 标签，只有 body 标签。尝试在 body 标签上的 htmlta 样式上应用所有样式，然后为当前的 body 样式围绕您的内容创建一个包装器。

# php - 查询错误更新字段mysql

> ID：14945321
> 
> 赞同：0
> 
> 时间：2013-02-18T21:09:02.433
> 
> 标签：php, mysql, sql

我对下面的功能感到非常沮丧。它没有更新我在数据库中的标志。我尝试将 1 和 0 放在引号之间，而不是。我在数据库中将该字段设置为小整数。你看到我做错了吗？条目在那里，但 1 没有更新为 0。

```
function postValue(){
    global $customerID;
    $query="SELECT flag FROM welcomecall WHERE customerID= '$customerID'";
    echo $query;
   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
   while ($row = mysql_fetch_assoc($result)) {
    echo "The customer flag is ". $row["flag"];  
    }

    if ($row['flag']=='0'){
    $query="UPDATE welcomecall SET flag='1' WHERE customerID='$customerID'";            
   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
   }
   else if($row['flag']=='1'){
    $query="UPDATE welcomecall SET flag='0' WHERE customerID='$customerID'";            
   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:10:41.010

当`while`表达式退出时，就没有`$row`剩下的了：

```
while ($row = mysql_fetch_assoc($result)) { 
```

所以这不是真的：

```
if ($row['flag']=='0'){ 
```

考虑在循环`if`内移动语句。`while`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:10:51.920

看起来您正在使用属于循环内部的循环外部的逻辑：

```
function postValue(){
    global $customerID;

    $query="SELECT flag FROM welcomecall WHERE customerID= '$customerID'";
    echo $query;

    $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
    while ($row = mysql_fetch_assoc($result)) {
        echo "The customer flag is ". $row["flag"];  

        // Moved
        if ($row['flag']=='0'){
            $query="UPDATE welcomecall SET flag='1' WHERE customerID='$customerID'";            
            $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
        }
        else if($row['flag']=='1'){
            $query="UPDATE welcomecall SET flag='0' WHERE customerID='$customerID'";            
            $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
        }
    }
} 
```

# sql - 从多个表中选择，当一个从不使用时

> ID：14945324
> 
> 赞同：1
> 
> 时间：2013-02-18T21:09:20.033
> 
> 标签：sql, multiple-tables

我用示例表改进了我的问题，以便更好地理解

我有 3 个包含以下行的表：

```
TABLE1 t1                 TABLE t2              TABLE t3

ID   NAME    OBS          ID   HW_VER           ID   SERIAL
-----------------         -----------           ------------
1  | Name1 | Obs1         1  | HWVer1           5  | Serial5
2  | Name2 | Obs2         2  | HWVer2           6  | Serial6
3  | Name3 | Obs3         3  | HWVer3           7  | Serial7
4  | Name4 | Obs4
5  | Name5 | Obs5
6  | Name6 | Obs6
7  | Name7 | Obs7 
```

现在，我想在满足 2 个条件时选择 id、name 和 obs：

1.  id 存在于 t2 或 t3 中（从不在两者中）；
2.  它指的是 t2 或 t3 属性（例如 t2.HW_VER='HWVER1'），从不在两者上

我做了这样的事情，但这是错误的：

```
SELECT DISTINCT t1.id, t1.name, t1.obs
FROM table1 t1, table2 t2, table3 t3
WHERE t1.id IN (t2.id, t3.id) AND t3.serial='Serial6'; 
```

我不能为此使用联合、外部表或视图。如果有其他问题，请告诉我。

非常感谢您的回答，我真的很感谢您的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:34:46.913

您需要从 T2 或 T3 中选择，但从不同时选择？我想你想要这样的东西

```
select count(*)
from t1
where exists (
    select 'x'
    from t2 
    where MyPrimaryKey_Name = 'random_name'
    and t2.id = t1.id
)
or exists (
    select 'x'
    from t3 
    where MyPrimaryKey_Name = 'random_name'
    and t3.id = t1.id
) 
```

# ruby-on-rails - 将字符串转换为 json 对象数组，rails 3+

> ID：14945332
> 
> 赞同：0
> 
> 时间：2013-02-18T21:09:52.060
> 
> 标签：ruby-on-rails, json, string

我有这个字符串

```
astring='[{"name": "daus", "total": "45", "ios": "30", "android": "15"},{"name": "davus", "total": "38", "ios: 27", "android": "11"}]' 
```

我想通过将它转换为 JSON

```
ajson = JSON.parse(astring) 
```

但我收到此错误：

```
JSON::ParserError: 399: unexpected token at '{"name": "davus", "total": "38", "ios: 27", "android": "11"}]' 
```

我假设我的错误在于我设置初始字符串的方式，但还没有解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:27:24.750

语法错误：

```
"ios: 27" -> "ios": "27" 
```

# linux - chmod 排除项

> ID：14945336
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:09:58.153
> 
> 标签：linux, apache, ubuntu, ssh, chmod

我知道我应该分配一个组，然后设置一个 umask，以便组的可写权限保持不变，但无论出于何种原因，我都不能这样做。我需要递归地chmod一个目录，除了一个子文件夹（web10），下面的工作吗？

```
cd /var/www/clients/
find . -type f -not -path "*web10*" -exec chmod 777 '{}' \; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:54:10.030

如果要排除文件或目录，请使用`-prune`

```
find /var/www/clients/ -name web10 -type d -prune -o -type f -print0 | xargs -0 chmod 0640 
```

您还应该`xargs`尽可能使用。`-exec`为找到的每个文件调用一次命令，而`xargs`收集尽可能多的文件并为 N 个文件调用一次命令，从而提高执行效率和性能。

# authentication - DotnetOpenAuth RefreshAuthorization 被阻止 403 Forbidden (12202)

> ID：14945340
> 
> 赞同：3
> 
> 时间：2013-02-18T21:10:11.333
> 
> 标签：authentication, iis, asp.net-web-api, dotnetopenauth

我有一个 DotnetOpenAuth 授权服务器，它在我的本地主机上运行良好。但是，在发布后，我的刷新访问令牌请求被阻止。

请求访问令牌，成功

```
POST https://myurl/identity/oauth/token HTTP/1.1
Authorization: Basic dsjSDLFJKSKLJesww
Content-Type: application/x-www-form-urlencoded; charset=utf-8
User-Agent: DotNetOpenAuth.Core/4.2.1.13026
Host: myhost
Cache-Control: no-store,no-cache
Pragma: no-cache
Content-Length: 86
Expect: 100-continue
Connection: Keep-Alive

username=theusername&password=fancypassword&scope=somescope&grant_type=password 
```

刷新请求：

```
POST https://myurl/identity/oauth/token HTTP/1.1
Authorization: Basic dsjSDLFJKSKLJesww
Content-Type: application/x-www-form-urlencoded; charset=utf-8
User-Agent: DotNetOpenAuth.Core/4.2.1.13026
Host: myhost
Cache-Control: no-store,no-cache
Pragma: no-cache
Content-Length: 272
Expect: 100-continue

refresh_token=_ttH%21IAAAAGiYhlufAaXURH5P2oDOnPYgJx7YhoR33isvZkPPvlyUgQAAAAHoBYyDMLhq1qwGHHH2uGrLoHZli77XHbCnSFJSKLFJ3kl2j3klj2kljKFSJKLSJKL#$k3ljfsklfjl2 
```

和回应：

> 技术信息（支持人员）
> 
> 错误代码：403 禁止。服务器拒绝了指定的统一资源定位符 (URL)。请联系服务器管理员。(12202)

任何帮助，指导方针，任何方向的指示，都会非常感谢！

我为此示例更改了 url/username/password/scope/base64/refreshtoken。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:35:12.063

他们似乎是`TMG Forefront - Authentication Delegation`阻止请求的设置。

> Forefront TMG 用于向已发布的 Web 服务器进行身份验证的方法：
> 
> 1.  无委托，客户端无法直接认证
> 2.  无委托，但客户端可以直接认证

在将其更改为 2 后将其设置为选项 1，请求不再被阻止！

# django - Heroku 安装过时的需求文件

> ID：14945343
> 
> 赞同：0
> 
> 时间：2013-02-18T21:10:15.063
> 
> 标签：django, heroku, heroku-toolbelt

我正在尝试使用 Heroku 部署 Django 应用程序。

当我第一次跑

```
$ git push heroku master 
```

我原来的 requirements.txt 有过时的依赖项，Django 无法部署。在我编辑我的依赖项并尝试部署后，我注意到 Heroku 仍在尝试安装我删除的依赖项。我在这里做错了吗？

# java - 为什么我的班级不会调用其他方法？

> ID：14945347
> 
> 赞同：0
> 
> 时间：2013-02-18T21:10:34.143
> 
> 标签：java

所以我正在尝试制作一个简单的游戏，比如命运之轮/刽子手。用户输入 1 输入字母，输入 2 求解，输入 3 退出。当我输入字母时，我收到一个错误：

```
Enter your choice: 
(1) to guess a letter
(2) to solve the puzzle
(3) to quit
1
Please enter your letter
b
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 8
    at java.lang.AbstractStringBuilder.charAt(Unknown Source)
    at java.lang.StringBuilder.charAt(Unknown Source)
    at Puzzle.<init>(Puzzle.java:68)
    at PuzzleTester.main(PuzzleTester.java:50) 
```

当我输入解决解决方案时，我得到了同样的错误。退出选项工作正常。那么这些错误是怎么回事？

拼图.java：

```
/**
 * A puzzle is used to represent a word puzzle.  A puzzle contains a solution
 * and the current state of the puzzle.  The current state of the puzzle is 
 * represented with a hyphen for each letter in the puzzle that has not yet been
 * guessed.  For example if a puzzle is created like this:
 * 
 * Puzzle puzzle = new Puzzle("BIG JAVA");
 * 
 * a call to puzzle.getPuzzle() should return: --- ----
 * 
 * Notice that all letters in the solution were replaced with hyphens but the
 * space character remained in place.
 * 
 * A call to puzzle.guessLetter('b') should return 1 and a subsequent 
 * call to puzzle.getPuzzle() should return: B-- ----
 * 
 * Calling puzzle.guessLetter('b') a second time should return 0 since the
 * letter B has already been guessed and should leave the puzzle unchanged.
 * 
 * <p/>
 * Bugs: (List any known issues or unimplemented features here)
 * 
 * @author (Insert your first and last name)
 * 
 */
public class Puzzle
{
    /** The solution is the complete word or phrase that is to be guessed */
    private String solution="BIG JAVA";

    /**
     * The puzzle is the word or phrase that is to be guessed with hyphens for
     * all unguessed letters. Initially the puzzle should include all hyphens
     * for all letters in the solution. As the user guesses a letter the hyphens
     * for that letter are replaced with the letter.
     */
    private StringBuilder puzzle;

    /**
     * Constructs a new Puzzle object with the given puzzle solution. Puzzles
     * can contain any character and should be case insensitive. This
     * constructor should set the current state of the puzzle so the all letters
     * in the puzzle are set to a hyphen. All non letter values should be left
     * unchanged in the puzzle.  The puzzle should be set to the solution passed
     * in.
     * 
     * @param solution the solution to the puzzle
     */
    public Puzzle(String Solution)
    {
        puzzle=new StringBuilder(this.solution);
        int length= this.solution.length();
        for(int count=0; count<=length; count++)
        {
            if (Character.isLetter(puzzle.charAt(count)))
            {
                puzzle.setCharAt(count, '-');
            }
        }

    }

    /** 
     * The guessLetter method is used to determine how many times the letter
     * that is passed in occurs in the puzzle. If the letter has already been
     * guessed previously, this method should return zero. This method should be
     * case insensitive. In other words 'H' is the same as 'h'.  After a call to
     * to this method the puzzle should be updated to remove the hyphen from
     * the location in the puzzle for each occurrence of the letter.
     * 
     * @param letter
     *            the letter that the user is guessing
     * @return the number of times the letter occurs in the solution only if the
     *         letter has not already been guessed. If the letter has been
     *         previously guessed this method should return 0.
     */
    public int guessLetter(char letter)
    {
        int count = 0;
        int k=this.solution.length();
        solution.equalsIgnoreCase(solution);
        for(int seq=0; seq<=k; seq++)
        {
            if(solution.charAt(seq)==letter)
            {
                count++;                
                puzzle.setCharAt(seq, letter);

            }
        }

        return count;
    }

    /**
     * 
     * The getPuzzle method should return the current state of the puzzle. The
     * puzzle should include a hyphen for any letters that have not been guessed.
     * 
     * @return the current state of the puzzle
     */
    public String getPuzzle()
    {
        String str=new String(puzzle);

        return str;
    }

    /**
     * The solvePuzzle method is used to verify that a solution passed in
     * matches the solution to this puzzle. The check for matching solutions
     * should be case insensitive.
     * 
     * @param solution
     * @return true if the solution passed in matches the solution for the
     *         puzzle
     */
    public boolean solvePuzzle(String solution)
    {
        if(this.solution==solution)
        {
            return true;
        }
        else
        {
            return false;

        }

    }

} 
```

Puzzletester.java：

```
import java.util.Scanner;
public class PuzzleTester
{

    /**
     * (Insert a brief description that describes the purpose of this method) 
     *
     * @param args
     */
    public static void main(String[] args)
    {
        String str="";

        Scanner input= new Scanner(System.in);

        System.out.println("Enter your choice: ");
        System.out.println("(1) to guess a letter");
        System.out.println("(2) to solve the puzzle");
        System.out.println("(3) to quit");
        int choice=input.nextInt();

        while(choice!=3)
        {           
            if(choice==1)
            {
                System.out.println("Please enter your letter");
                str=input.next();

                char letter=str.charAt(0);
                Puzzle game=new Puzzle(str);
                game.guessLetter(letter);
            }

            if(choice==2)
            {
                System.out.println("Please solve the puzzle");
                input.nextLine();
                String solution=input.next();
                Puzzle game=new Puzzle(solution);
                game.solvePuzzle(solution);
            }

        }

        if(choice==3)
            {
                System.out.println("Good Bye");
            }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:15:53.547

`Puzzle`类构造函数中的 for 循环是罪魁祸首：

```
for(int count=0; count<=length; count++) 
```

你的条件应该是`<`而不是`<=`。由于您的索引从 开始`0`，因此您可以访问的字符串的最后一个索引是`string.length() - 1`。因此你不应该迭代直到`length`，而只能迭代到一个值`1 less than length`。

因此，将其更改为：

```
for(int count=0; count < length; count++) 
```

* * *

在方法的情况下也是如此`guessLetter`：

```
for(int seq=0; seq<=k; seq++)  // Change here too 
```

另外，`guessLetter`仅在您的方法中，我不明白您在以下语句之前要尝试使用此语句做什么`for statement`：

```
solution.equalsIgnoreCase(solution); 
```

您没有将值分配给任何变量，也没有在任何地方使用它。就目前而言，上述比较毫无用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:16:39.863

你循环

```
for(int count=0; count<=length; count++) 
```

应该

```
for(int count=0; count<length; count++) 
```

# date - 如何编写表达式以将 yyyymm 转换为 ssrs 中的 mm-yyyy？

> ID：14945350
> 
> 赞同：2
> 
> 时间：2013-02-18T21:10:36.117
> 
> 标签：date, reporting-services, format

1.  我有一个表，其中包含 YearMonth 列（201302）。
2.  我创建了 YearMonth 一个参数。

现在我想在 SSRS 中编写一个表达式，这样每次报告运行时，日期和月份都会像这样**Feb-2013**。

您能否建议我为什么以下表达式不起作用。

谢谢

```
=CStr(Right(MonthName(Month(Parameters!NLR_YearMonth.Value)),3))
 + "-" + 
 Left(Year(Parameters!NLR_YearMonth.Value),4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:50:58.950

尝试这个：

```
=Format(DateValue(MonthName(Right(Parameters!NLR_YearMonth.Value, 2))
 + "," + 
 Left(Parameters!NLR_YearMonth.Value,4)), "Y") 
```

表达式如下：

1.  剪断绳子得到月份。
2.  将挂载转换为`MountName`
3.  在月份和年份之间创建逗号分隔符
4.  剪线得到年份
5.  使用函数将返回字符串转换为`Date`对象`DateValue`
6.  格式化日期以满足您的需求

结果应该是：2013 年 2 月

# css - 条件显示导轨

> ID：14945351
> 
> 赞同：2
> 
> 时间：2013-02-18T21:10:40.120
> 
> 标签：css, ruby-on-rails, ruby

我仅在当前用户是“主机”时才尝试显示删除按钮，但即使主机的用户 ID 与来宾的用户 ID 匹配，该按钮也会隐藏

```
<%= link_to "X" , "/songs?name=#{s.name}&party_profile_id=#{s.party_profile_id}&commit=X", :remote => true, :class => "btn btn-inverse btn-small refreshbutton", :style => "display:none" unless @current_user.id == @party_profile.host %> 
```

我使用了错误的语法吗？有没有更好的方法来有条件地显示项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:15:14.523

您可以切换为仅呈现它，而不是切换 css 类（除非您的应用程序出于某种原因需要在客户端切换它）。

```
<% if @current_user.id == @party_profile.host %>
    <%= link_to "X" , "/songs?name=#{s.name}&party_profile_id=#{s.party_profile_id}&commit=X", :remote => true %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:16:02.400

您的条件将适用于链接本身，而不是`style`属性。

改为这样做：

```
<%= link_to "X" , "/songs?name=#{s.name}&party_profile_id=#{s.party_profile_id}&commit=X", :remote => true, :class => "btn btn-inverse btn-small refreshbutton", :style => "#{'display:none;' unless @current_user.id == @party_profile.host}"  %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:14:57.050

不应该

`if @current_user.id == @party_profile.host`?

编辑：

您不需要将样式设置为不显示。if 语句将处理它是否在视图中呈现。

# javascript - 如何知道一个类何时被 Coffeescript 继承？

> ID：14945354
> 
> 赞同：2
> 
> 时间：2013-02-18T21:10:51.860
> 
> 标签：javascript, inheritance, backbone.js, module, coffeescript

我希望使用与 Ruby 提供的静态方法 [“继承”](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-inherited)相同的方法，正如您在其文档中看到的用于模块操作目的的方法：

```
class Foo
  @inherited: (subclass) ->
    console.log('hey hou')

class Hey extends Foo

class Hou extends Foo 
```

输出：

```
=> hey hou
=> hey hou 
```

我怎样才能用 Coffeescript 'extends' 做到这一点？我的意思是，如果我使用 Backbone.js 'extend' 方法，我可以覆盖它.. 但是 Coffeescript 编译它，这是不可能的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T15:00:52.897

亚历克斯韦恩的回答是完全合法的，也是正确的做法。

但是，如果您确实需要它（例如，出于调试目的）而不必进行显式函数调用，您也可以`__extends`在每个文件的开头重新定义由 CoffeeScript 编译器生成的函数。由于`__extends`是 CoffeeScript 中的保留关键字，因此必须在纯 JavaScript 中重新定义它并使用反引号嵌入到 CoffeeScript 文件中：

```
`
__extends = (function (extend) {
    return function (child, parent) {
        // Do actual heritage
        var result = extend(child, parent);
        // Do something with child or parent
        if (parent.inherited instanceof Function) parent.inherited(child);
        // Return the result as in the original '__extends' function
        return result;
    }
})(__extends);
` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:41:30.040

没有。

以前有这个，删了。有些人想把它放回去，但它需要如何工作却很奇怪。

从源头对此的一些参考：

*   [https://github.com/jashkenas/coffee-script/issues/867](https://github.com/jashkenas/coffee-script/issues/867)
*   [https://github.com/jashkenas/coffee-script/issues/841](https://github.com/jashkenas/coffee-script/issues/841)
*   [https://github.com/jashkenas/coffee-script/pull/1960](https://github.com/jashkenas/coffee-script/pull/1960)

建议的解决方法依赖于子类的显式调用。

```
class A extends B

  # child class calls extended hook of parent class explicitly.
  B.extended(this)

  classBody: ->
  methods: ->
  goHere: -> 
```

# ruby-on-rails - 我应该如何访问视图中的asset_url 助手

> ID：14945366
> 
> 赞同：2
> 
> 时间：2013-02-18T21:11:43.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

当我尝试在我的视图（Rails 3.2）中使用asset_url 时，我得到一个NoMethodError。必须做什么才能在我的视图中使用 AssetUrlHelper 的方法？

为了更好地解释这一点，也许可以找到一个替代解决方案：我需要一个“资产链接”来指向使用carrierwave 创建的文件附件。我的模型有一个附件，它指向我的资产目录中的一个文件。我需要画一个指向这个文件的链接。

= link_to model.name, model.attachment(:size) 给我 /myfiles/model/id/attachment/size.png （这是由carrierwave坚持的）

= image_tag model.attachment(:size) 给了我想要的[http://static_host.com/.../size.png](http://static_host.com/.../size.png)

但我不需要图像标签，而是资产主机上文件的普通链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:26:50.407

我认为助手`asset_path`属于资产文件（如`.css`和`.js`），而不是视图。在视图中适合使用类似`image_tag`or的助手`stylesheet_include_tag`。这是资产管道背后的想法 - 简化对资产的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:54:15.277

以下对我来说可以：

```
<%= link_to "link to asset", asset_path(article.image.url) %> 
```

我正在使用回形针，但我怀疑它有很大的不同

# sql - 如何查询多个链接服务器？

> ID：14945367
> 
> 赞同：4
> 
> 时间：2013-02-18T21:11:43.843
> 
> 标签：sql, sql-server-2008, linked-server, multiserver

链接一些 SQL Server 2008 服务器/实例后，我想对这些服务器进行更通用的查询。我知道我必须像这样指定查询的命运：

```
select * 
from [SRV\INSTANCE].dbname.dbo.foo 
```

但是，我会针对多个链接服务器运行此查询。我也知道这个选择语句完全返回`SRV\INSTANCE`我需要的：

```
select ss.name 
from sys.servers ss 
where ss.server_id > 0 
```

`servers\instances`这一个，从我想要查询的地方返回所有内容。

在这种情况下，所有数据库都具有相同的结构，所以我想做这样的事情：

```
select * 
from [select ss.name from sys.servers ss where ss.server_id > 0].DBNAME.dbo.foo 
```

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:06:56.533

您可以动态创建 SQL 语句，然后运行该命令。在这种情况下，在 @dml 变量中使用 help += 运算符动态创建整个命令

```
DECLARE @dml nvarchar(max) = N''
SELECT @dml += 'UNION ALL SELECT * FROM ' + QUOTENAME(ss.name) + 
               '.[DBNAME].[dbo].foo ' 
FROM sys.servers ss
WHERE ss.server_id > 0

SELECT @dml = STUFF(@dml, 1, 10, '')
EXEC sp_executesql @dml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:17:37.570

这需要动态查询，例如：

```
declare @servers table (name sysname)

insert  @servers
        (name)
select  name
from    sys.servers
where   server_id > 0

declare @query nvarchar(max) = ''
while 1=1
    begin
    declare @server sysname

    select  top 1 @server = name 
    from    @servers

    if @@rowcount = 0
        break

    if @query <> ''
        @query = @query + ' union all ' + char(13) + char(10)

    set @query = @query + 
        ' select * from ' + quotename(@server) + '.dbname.dbo.foo ' +
        char(13) + char(10)

    delete  @server
    where   name = @server
    end

print @query -- For debugging
exec (@query) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:21:10.157

我做了一些工作，我不得不加入来自两个链接服务器的结果。其中一个链接服务器连接到一个 redbrick 数据库，长话短说，我不得不使用 openquery。

我使用的方法是在 ms sql 中创建临时表。然后我用从 openqueries 到链接服务器的结果填充它们，并使用普通的 tsql 将它们放在一起。

# c# - TableLayoutPanel 仅显示最后一行 - C#

> ID：14945368
> 
> 赞同：4
> 
> 时间：2013-02-18T21:11:43.620
> 
> 标签：c#, tablelayoutpanel

我有一个 TableLayoutPanel，它有 10 行和 2 列。

我的问题是，当我在第一列中添加标签并在另一列中添加按钮时，一切都很好。但是当我在下一行添加另一个标签和一个按钮时，前面的行是空的。看来我的程序只显示最后添加的行。

代码：

```
Label lblProjectName = new Label();
lblProjectName.Text = "test";
lblProjectName.Anchor = AnchorStyles.Left;
Button btnProject = new Button();
btnProject.Text = "Fill In";

tlpProject.Controls.Add(lblProjectName, 0, 0);
tlpProject.Controls.Add(btnProject, 1, 0);

tlpProject.Controls.Add(lblProjectName, 0, 1);
tlpProject.Controls.Add(btnProject, 1, 1); 
```

天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:16:33.263

您必须为面板中的每个单元格创建一个*新*控件。

目前，您的代码正在*将控件移动*到最后一列和最后一行。

像这样的东西：

```
for (int i = 0; i < numRows; ++i) {
  Button btnProject = new Button();
  btnProject.Text = "Fill In";
  tlpProject.Controls.Add(btnProject, 1, i);
} 
```

任何事件处理程序也必须在这里添加，在处理程序端，您必须检查对象的“发送者”以查看用户按下了哪个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:18:28.560

当您将标签和按钮添加到不同的单元格（因此不同的控件）时，似乎标签和按钮只能是单个控件的子级。如果您需要用标签和按钮填充所有单元格，则每列需要 10 个标签和 10 个按钮。看代码：

```
for(int i=0;i<10;i++){
var lblProjectName = new Lable();
lblProjectName.Text = "test";
lblProjectName.Anchor = AnchorStyles.Left;
var btnProject = new Button();
btnProject.Text = "Fill In";

tlpProject.Controls.Add(lblProjectName, 0, i);
tlpProject.Controls.Add(btnProject, 1, i);
} 
```

# javascript - 使用循环创建单词扰频器

> ID：14945371
> 
> 赞同：1
> 
> 时间：2013-02-18T21:12:04.820
> 
> 标签：javascript, arrays, loops, textbox, buttonclick

尝试创建一个单词加扰器，它从文本框中获取文本，对字母进行加扰，然后在不同的文本框中重复它们。代码必须使用循环将文本分布在字母数组中。一旦我到达 Math.floor 对象，我对如何继续感到困惑。

相关代码：

```
 <script type="text/javascript">

    var word = document.getElementById("input").value;
    var wordLength = word.length;
    var scrambled = "";

    for (var i = 0; i < wordlength; i++) {
        var charIndex = Math.floor(Math.random() * word.length);
        scrambled += word.charAt(charIndex);
        word = word.substr(0, charIndex) + word.substr(charIndex + 1);
    }

    document.getElementById("output").value = scrambled;

    }

    </script>

    <head>
    <body>
    <form>  
    <input type="text" name="input" id="input" value="" maxlength="10"> <input type="text" name="output" id="output" value="" disabled="true"><br/>
    <input type="button" name="generate" value="Generate" onClick="Scramble(this.form)">
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:25:55.403

一个简单的随机化单词的方法如下：

```
var word = "hello";
var wordLength = word.length;
var scrambled = "";

for (var i = 0; i < wordLength; i++) {
    var charIndex = Math.floor(Math.random() * word.length);
    scrambled += word.charAt(charIndex);
    word = word.substr(0, charIndex) + word.substr(charIndex + 1);
} 
```

这样做是在每个循环中从单词中删除一个字母，并将其附加到一个字符串中，该字符串将成为您的随机单词。`Math.random`生成一个介于 0 和 1 之间的随机数，并将`Math.floor`结果向下舍入。因为单词中有六个字母开头，所以这会产生一个介于 0 和 5 之间的数字（这是您想要的，因为没有第六个索引）。

剩下要做的就是将结果弹出到一个文本框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:27:45.710

这个循环测量缩小的原件，同时随机删除加扰的字母——

```
function scrambleWord(s){
    var word= s.value.split(''), scram= '';
    while(word.length){
        scram+= word.splice(Math.floor(Math.random()*word.length), 1)[0];
    }
    return scram;
} 
```

alert(scrambleWord({value:'spinach'}));

# audio - 在 openTK 中播放音频

> ID：14945372
> 
> 赞同：2
> 
> 时间：2013-02-18T21:12:06.900
> 
> 标签：audio, openal, opentk

在 OpenTK 应用程序中播放音频（WAV、MP3、OGG，没关系）最简单的方法是什么？我需要能够随时播放、停止并在几秒钟内获得当前位置。我过去曾在我的 Forms 应用程序中使用过 WMPLib，但无论出于何种原因，这似乎都不适用于 OpenTK。

谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-07T00:16:55.070

OpenTK 只是一个图形库，但[OpenAL](http://www.opentk.com/doc/audio)提供了对音频的支持。

# php - 从 API 检索信息

> ID：14945384
> 
> 赞同：2
> 
> 时间：2013-02-18T21:13:33.320
> 
> 标签：php, json, api

我正在尝试从此 API 中提取信息：http: [//ex.fm/api/v3/user/dan/loved](http://ex.fm/api/v3/user/dan/loved)

我在使用 Google Maps API 之前已经这样做了，但是那是使用`simplexml_load_file`. 我尝试将相同的脚本应用到这个 API，但它就是不喜欢它。

所以我有点不知道从哪里开始。本质上，我正在尝试获取每个项目的图像源并显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:17:18.107

看php的函数json_decode：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:48:31.837

我认为你需要看看这里：[PHP JSON](http://php.net/manual/en/book.json.php)。

```
$contents = file_get_contents("http://ex.fm/api/v3/user/dan/loved");
$contents = json_decode($contents);
// in order to display images
foreach ($contents->songs as $song) {
    printf("Image Small: %s\n", $song->image->small);
    printf("Image Large: %s\n", $song->image->large);
    // ...
}

// in order to store song attributes
/* $songs = array();
foreach ($contents->songs as $song) {
    $songs[] = array(
        'title' => $song->title,
        'image_small' => $song->image->small,
        // add more stuff...
    );
} */ 
```

输出看起来像；

```
图片小：http://userserve-ak.last.fm/serve/34/59939953.png
图片大：http://userserve-ak.last.fm/serve/126/59939953.png
图片小：http://www.blogcdn.com/www.spinner.com/media/2013/02/thao-with-the-get-down-stay-down-320.jpg
图片大：http://www.blogcdn.com/www.spinner.com/media/2013/02/thao-with-the-get-down-stay-down-320.jpg
图片小：http://24.media.tumblr.com/tumblr_mhpvhhmZbD1qz4e0mo1_1360016551_cover.jpg
图片大：http://24.media.tumblr.com/tumblr_mhpvhhmZbD1qz4e0mo1_1360016551_cover.jpg
...

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:23:47.203

这是我将如何做到的。（我没有测试过这个）：

```
$contents = file_get_contents("http://ex.fm/api/v3/user/dan/loved");
$contents = json_decode($contents); 
```

此时，您已经从 URL 中获取了所有数据，并将其从 JSON 格式转换为数组。要对其进行测试，您可以尝试：

```
print_r($contents); 
```

或者

```
echo $contents['status_text']; 
```

显然 $contents 变量可以定义为任何你喜欢的。

如果您还有任何问题，请在下面发表评论:)

彼得

# haskell - 如何升级 Haskell 平台

> ID：14945388
> 
> 赞同：12
> 
> 时间：2013-02-18T21:13:55.330
> 
> 标签：haskell, ghc

我在 Windows 上安装了 Haskell Platform 2012.4。我想尝试 GHC 7.6.2 中的新扩展。看起来 GHC 7.6.2 x86_64 下载不包括安装程序，只是二进制文件。安装最新版本并将其设置为构建 Haskell 项目的默认版本的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T21:44:28.813

如果你下载 GHC 本身，你只会得到 GHC 和一小部分库。如果您下载 Haskell 平台，您将获得 GHC 以及更大的库集合。但是，Haskell 平台不经常更新，因此您将获得旧版本的 GHC。

如果你问“我如何安装 Haskell 平台，然后让它与更新的 GHC 一起工作？”，那么答案是“你不需要”。Haskell 库必须针对您使用的特定版本的 GHC 进行编译。

你基本上有两个选择：

1.  使用 Haskell 平台及其提供的 GHC 版本。
2.  使用最新的 GHC，并手动编译您想要的任何库。

在 Linux 上还不错，但是绑定到外部 C 代码的 Haskell 库往往很难在 Windows 上构建。（像 OpenGL、zlib 等的东西。） 100% vanilla Haskell 代码的包在任何系统上都非常容易编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T22:20:44.473

我还没有这样做，而且我正在工作，所以我无法对其进行测试，但是查看[GHC 文档](http://www.haskell.org/ghc/docs/7.0.2/html/Cabal/builders.html)，我认为您可以使用该`--with-compiler=path`标志来选择要使用的 GHC 版本？

另请参阅[这个问题](https://stackoverflow.com/questions/7770100/using-cabal-with-multiple-ghc-versions)，与使用安装了多个版本的 ghc 的 cabal 相关。我猜你可能想使用 cabal-dev 或其他东西来沙箱，否则你的包数据库可能会变得一团糟。

编辑：就默认值而言，我认为您可以在 cabal 配置文件中进行设置。请参阅我链接的那个问题中对已接受答案的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-28T16:16:46.203

这里的其他答案很好，我想补充一点，目前安装最新版本的 GHC 的最佳方法是查看[haskell.org 的安装说明](https://www.haskell.org/downloads/#windows)。在我到达那里之前，我在许多不同的选择之间来回跳动，我认为这是我能说的最好的真相来源。

总结当前的说明：如果您已经设置了巧克力，“在提升的命令提示符下，运行`choco install haskell-dev`，然后是`refreshenv`。”

# jquery - 将 jQuery 验证规则添加到单选按钮组

> ID：14945391
> 
> 赞同：5
> 
> 时间：2013-02-18T21:14:11.653
> 
> 标签：jquery, jquery-validate

我正在使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation/)，我希望能够从 3 个单选按钮组中动态添加和删除验证。

我可以使用下面的示例代码从文本字段输入中动态添加和删除验证：

```
<script type="text/javascript">
    $(document).ready(function(){   

        //Add Requird Validation
        $("#inputTextField").rules("add", "required");

        //Remove Required Validation
        $("#inputTextField").rules("remove", "required");

    });
</script> 
```

是否可以对单选按钮做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:05:05.163

您发布的代码可以正常工作。但是，[`rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)必须紧随*其后* `.validate()`，并且每个都`input`必须包含一个`name`属性，即使您的目标不是`name`.

**HTML**：

```
<form id="myform">  
     <input type="text" name="field" id="inputTextField" /> <br/> 
</form> 
```

**jQuery** :

```
$(document).ready(function() {

    $('#myform').validate({
        // other options & rules
    });

    // must come afer validate()
    $("#inputTextField").rules("add", {
        required: true
    });

}); 
```

**演示：http: [//jsfiddle.net/fnKWD/](http://jsfiddle.net/fnKWD/)**

> 是否可以对单选按钮做同样的事情？

当然，只需通过名称或任何其他[有效的 jQuery 选择器](http://api.jquery.com/category/selectors/)来定位它们。

```
$('input[name="myname"]') 
```

**HTML**：

```
<input type="radio" name="myname" value="0" />
<input type="radio" name="myname" value="2" />
<input type="radio" name="myname" value="5" /> 
```

**演示**：http: [//jsfiddle.net/LkJZw/](http://jsfiddle.net/LkJZw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:31:47.063

您可以考虑将[required 方法与依赖表达式一起使用](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)。这是您指定所需规则的地方，例如

```
rules: {
    details: {
      required: "#other:checked"
    }
} 
```

这有时很有用，因为您不必添加或删除规则来实现对元素的条件验证。 [在 jsfiddle 上尝试一个示例](http://jsfiddle.net/Zdazq/)

# titanium - 获取自定义注释（Ti.Map）像素化

> ID：14945400
> 
> 赞同：1
> 
> 时间：2013-02-18T21:14:55.707
> 
> 标签：titanium, appcelerator-mobile

我尝试了几种分辨率（50x30、70x50、100x70）的不同图像。钛应用程序中的所有这些都足够好，但我无法在应用程序中获得没有像素效果的自定义引脚。

我正在使用钛金属 3.0。

如何制作自定义图像以获得最佳视觉效果？

图片来源：http: [//imgur.com/a/glhIy#6ceV2Vk](http://imgur.com/a/glhIy#6ceV2Vk)

代码：

 `````
var annot = Titanium.Map.createAnnotation({
    longitude : franchise.direction.loc[0],
    latitude : franchise.direction.loc[1],
    title : franchise.name,
    subtitle : franchise.direction.address,
    image : "testing_pin.png",
    animate : false,
    draggable : false
});                 
$.mapView.addAnnotation(annot); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:40:33.310

这些是我使用的 Pin 图标大小，它们在我的地图上看起来很清晰。

pin@2x.png: 80px x 80px @72 dpi

pin.png：40 像素 x 40 像素``

# jtable - Joomla Jtable 错误

> ID：14945402
> 
> 赞同：0
> 
> 时间：2013-02-18T21:15:05.060
> 
> 标签：jtable, joomla3.0

当尝试通过单击提交按钮将值从字段集发送到数据库时，我收到以下错误**“Error500: JTableUser::bind( *NULL* )” 。**

我在模型中的保存功能如下所示：

```
public function save($data)
    {
        $userId = (!empty($data['id'])) ? $data['id'] : (int) $this->getState('user.id');

        $user = new JUser($userId);

        JTable::addIncludePath(JPATH_COMPONENT_ADMINISTRATOR.DS.'tables');
        $table =& JTable::getInstance('User', 'JTable', array());

        // Unset the username so it does not get overwritten
        unset($data['username']);

        // Unset the block so it does not get overwritten
        unset($data['block']);

        // Unset the sendEmail so it does not get overwritten
        unset($data['sendEmail']);

        // Bind the data.
        if (!$table->bind($data)) {
            $this->setError(JText::sprintf('USERS PROFILE BIND FAILED', $user->getError()));
            return false;
        }

        // Load the users plugin group.
        JPluginHelper::importPlugin('user');

        // Null the user groups so they don't get overwritten
        $user->groups = null;

        // Store the data.
        if (!$table->save()) {
            $this->setError($user->getError());
            return false;
        }

        return $user->id;
    }` 
```

$data 填写正确，`"getInstance('User', 'JTable', array());"`工作正常。感谢您的关注，有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T01:57:50.713

回复晚了，但我认为问题出在：

```
if (!$table->save()) 
```

因为 JTable (3.2) 中的 save 方法期望绑定数据作为第一个参数，并且它没有得到任何东西。

由于您之前已经绑定了数据，您可能想要：

```
if (!$table->store()) 
```

[http://api.joomla.org/cms-3/classes/JTable.html#method_save](http://api.joomla.org/cms-3/classes/JTable.html#method_save)

# c - 使用引用时 Xcode 不会编译 C 函数签名

> ID：14945404
> 
> 赞同：0
> 
> 时间：2013-02-18T21:15:09.490
> 
> 标签：c, xcode, function, reference

今天在大学里，我想做一些 C-Coding。我最终在 Linux 下编码，因为 Xcode 不允许我编译该文件。

由于这可能是一个简单的（希望可以解决的）问题，我在一些函数签名中将其带到了重点：

```
void testfunc(int test);
void testfunc(int test, int* test2);
void testfunc(int test, int* test2, int** test3); 
```

这 3 个将编译并工作！但是使用

```
void testfunc(int test, int* test2, int** test3, char*& test4); 
```

让 Xcode 认为这是不可能的。为什么？Linux 并没有抱怨这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:17:00.313

References don't exist in C. Are you sure you aren't compiling this as C++ under Linux?

# customization - One Add to Cart Buttoon on Category page using Woocommerce

> ID：14945409
> 
> 赞同：1
> 
> 时间：2013-02-18T21:15:32.477
> 
> 标签：customization, woocommerce

I have a client that wants a quantity box with each product on the category shop page, but only have one add to cart button either at the top or bottom, so that people can tab across with quantities and then hit the add to cart button only once. I have searched for days to no avail. Anyone that has an idea I would be eternally grateful.

thanks in advance

# android - What the Steps to Create Android Application for Mobile Phone to Controlling the PC?

> ID：14945410
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:15:39.887
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

I'm doing a project is about Creating an Android Application for Mobile Phone to Control the PC I'm asking what the version of android should I use is android 2.3 good choice or there is another opinion ? and what the programs I need to create this application ? thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:29:22.093

`Bluetooth`您可以通过或将 android 连接到您的 PC `Wi-Fi`。所以基本上你需要两个应用程序 1）在你的 PC 上运行的服务器和 2）在 android 端的应用程序。

Android 2.3 应该可以正常工作，但您应该注意不要使用更新的 API

如果您将使用 Java 开发您的 PC 程序，您可以使用`Robot`该类来控制键盘和鼠标

请参阅此项目以获取示例：

[远程桌面服务器](https://github.com/justin-taylor/Remote-Desktop-Server)

[安卓远程客户端](https://github.com/justin-taylor/Android-remote-client)

# mysql - MySQL 5.5 'Binary log is not open', Error_code: 1236

> ID：14945411
> 
> 赞同：0
> 
> 时间：2013-02-18T21:15:44.007
> 
> 标签：mysql, database-replication

I am trying to configure master-master replication however I am getting an error. I am sending my configuration below

Server A

```
server-id = 1
replicate-same-server-id = 0
auto-increment-increment = 2
auto-increment-offset = 1

master-host = Kooler-PC
master-user = replicacao
master-password = replicacao
master-connect-retry = 60
replicate-do-db = gestao_quadra

log-bin = C:\mysql\log\log-bin.log
binlog-do-db = gestao_quadra 
```

CHANGE MASTER TO MASTER_HOST='Kooler-PC', MASTER_USER='replicacao', MASTER_PASSWORD='replicacao', MASTER_LOG_FILE='log-bin.log ', MASTER_LOG_POS=0;

I am have done the same steps for other server changing server-id, host and created the file in the path.

I get this error:

```
130218 18:03:02 [Note] Slave I/O thread: connected to master 'replicacao@Kooler-PC:3306',replication started in log 'log-bin.log ' at position 4
130218 18:03:02 [ERROR] Error reading packet from server: Binary log is not open ( server_errno=1236)
130218 18:03:02 [ERROR] Slave I/O: Got fatal error 1236 from master when reading data from binary log: 'Binary log is not open', Error_code: 1236
130218 18:03:02 [Note] Slave I/O thread exiting, read up to log 'log-bin.log ', position 4 
```

I am using MySQL 5.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:25:57.643

因此，如果您阅读有关复制二进制日志记录的 mysql 手册，它会告诉您这一行：

```
log-bin = C:\mysql\log\log-bin.log 
```

不创建具有该名称的日志文件。它指定基本名称。实际创建的日志文件将命名为：

```
C:\mysql\log\log-bin.log.000001 
```

也就是说，实际的日志在您指定的名称末尾附加了一个序列号。要查看实际的日志名称，请使用以下命令：

```
SHOW MASTER STATUS
SHOW BINARY LOGS; 
```

您的变更主声明的这一部分无效：

```
MASTER_LOG_FILE='log-bin.log ', MASTER_LOG_POS=0; 
```

我读过的任何与复制相关的说明都不会导致您使用位置 0。您必须使用主服务器的二进制日志文件和与您初始化从服务器的数据快照相对应的位置。

有关更多信息，请参阅手册。在尝试更复杂的复制结构之前，首先从基本的主->从复制开始。 [http://dev.mysql.com/doc/refman/5.5/en/replication.html](http://dev.mysql.com/doc/refman/5.5/en/replication.html)

# php - Enabling CORS in CakePHP app

> ID：14945418
> 
> 赞同：10
> 
> 时间：2013-02-18T21:16:05.317
> 
> 标签：php, cakephp, cors

I am trying to enable CORS for an API built in CakePHP so that all requests are accessible with the following in the AppController:

```
public function beforeFilter()
{
    header("Access-Control-Allow-Origin: *");
} 
```

Is this in the wrong place? As requests are still being blocked.

**Update: It seems this does in fact work BUT because I am doing something like:**

```
header('Content-Type: application/json');
echo json_encode(array('message'=>'Hello world!')); 
```

**In some of my methods it's acting as though it's overriding the header set the AppController so it's not appearing in the response for the JSON calls. Any ideas?**

**Update 2: Returning JSON like below, fixes the problem:**

```
$this->response->type('json');
$this->response->body(json_encode(array('message'=>'Hello world!'))); 
```

**So apparently using `header()` in Cake breaks previous headers?**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T21:34:06.113

您可以使用 cake 响应对象来执行此操作；

```
$this->response->header('Access-Control-Allow-Origin', '*'); 
```

有关响应对象的更多信息； [http://book.cakephp.org/2.0/en/controllers/request-response.html#setting-headers](http://book.cakephp.org/2.0/en/controllers/request-response.html#setting-headers)

但是， beforeRender() 回调似乎是一个更合乎逻辑的位置。

另一种选择是在您的 apache vhost 中添加此标头，或者 htaccess 示例可以在 Html5Boilerplate 的 htaccess 文件中找到，这是一件非常有趣的事情（有据可查），因为它包含许多与 cakephp 一起工作的优化出色地;

[https://github.com/h5bp/server-configs-apache/blob/master/dist/.htaccess](https://github.com/h5bp/server-configs-apache/blob/master/dist/.htaccess)

[http://html5boilerplate.com/](http://html5boilerplate.com/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T23:45:00.817

根据我在这里发现的内容：[为 CakePHP 发送正确的 JSON 内容类型](https://stackoverflow.com/questions/14945861/sending-correct-json-content-type-for-cakephp)

CakePHP 中返回 JSON 的正确方法是这样的：

```
$this->response->type('json');
$this->response->body(json_encode(array('message'=>'Hello world!'))); 
```

这是因为标头可以被覆盖，因此 CORS 不起作用，除非您使用 Cake 中的响应对象以“正确”的方式进行操作。

# html - html5 视频标签不显示视频，ColdFusion 有什么不同吗？

> ID：14945421
> 
> 赞同：0
> 
> 时间：2013-02-18T21:16:13.833
> 
> 标签：html, coldfusion, coldfusion-8

我在仍在运行 ColdFusion 版本 8 的服务器上。不过我不确定这是否是我的问题。

我有以下代码，我可以使用 Firefox 和 Chrome 在我的桌面上的计算机上工作。我直接使用文件系统 url 将其作为 html 文件访问，即 file:///C:/.../test.html

```
<!DOCTYPE HTML>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>test</title>
 </head>
 <body>
     <p> Try w3Schools test video</p>
     <video width="320" height="240" controls>
         <source src="movie.mp4" type="video/mp4">
         <source src="movie.ogg" type="video/ogg">
         Your browser does not support the video tag.
     </video>
 </body>
 </html> 
```

当我将此 test.cfm 或 test.html 页面放在 Coldfusion 8 服务器上时，两个浏览器都不会显示视频。movie.mp4 和movie.ogv 文件在服务器上与test.cfm 文件位于同一目录中。在 Firefox 中，我得到：

“找不到支持格式和 MIME 类型的视频。”

在 Chrome 中，它显示视频控件，但不存在视频。

我需要在服务器上启用什么（它是一个共享主机帐户）吗？也许这不是 ColdFusion 特有的，我又犯了一个错误（注意这是我第一次尝试使用视频标签）。

谢谢

PS 如果我使用 Aptana 的启动机制在我的计算机上访问它并运行在：

127.0.0.1:8000/.../test.html

我遇到与在服务器上运行相同的问题。视频不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:51:12.933

感谢 Miguel-F 的指导，服务器缺少对 .mp4 和 .ogv mime 类型的支持。当托管公司将这些添加到服务器时，会显示视频。

# java - accessing androids auto correct facilities?

> ID：14945422
> 
> 赞同：0
> 
> 时间：2013-02-18T21:16:15.897
> 
> 标签：java, android, sms, prediction, autocorrect

Is there a way of using Android's auto correct / predictive text capabilities with a bespoke input method? I'd like to be able to access a list of the nearest words to the word entered, similar to what happens when we send a text. For example if I entered the string "hapy" I would get a list containing "happy", harpy", "hazy" ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:26:19.287

看起来是的。

和开始的地方：http: [//developer.android.com/guide/topics/text/spell-checker-framework.html](http://developer.android.com/guide/topics/text/spell-checker-framework.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:27:22.657

你不会想要的。首先，预测文本仅在 4.0 中变成了一项服务。在此之前它只是键盘的一部分，我怀疑大多数键盘仍然实现自己的。其次，它将针对打字错误而不是语音错误进行优化。输入 g 而不是 f 很常见（它们彼此相邻），但通过语音输入则不是。它不会很好地工作。

但是内置的语音到文本行为确实返回了替代方案——它返回了一个可能文本的数组列表。那是你的自动更正。

# c++ - How to align text both sides(justify)

> ID：14945426
> 
> 赞同：0
> 
> 时间：2013-02-18T21:16:26.850
> 
> 标签：c++, windows, winforms

Is there any way to align the text to the both right and left sides of the including rectangel using c++?

Like this;

![enter image description here](../Images/c939f611484d4722bbf7debf01fb7330.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:26:46.920

Microsoft Rich Edit 控件可以从版本 3.0 开始执行此操作。检查此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787942%28v=vs.85%29.aspx)以获取详细信息。`PFA_JUSTIFY`在该页面中搜索。

# java - How do I make a link list using objects in Java.

> ID：14945432
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:16:55.533
> 
> 标签：java, linked-list

This is for a assignment in class and I am having trouble with using My car objects in my link List. The car class has two instance variables (make, price). How would I place the variables into the node class.

```
public class CarList {
private CarNode head = null;
private CarNode tail = null;
private int counter = 0;

public CarList() {
    head = null;
}

public int getSize() {
    return counter;
}
public boolean isEmpty() {
    if(counter < 1) {
        return true;
    }
    else {
        return false;
    }
}
/**public CarNode firstNode() {
    return head;
}
public CarNode lastNode() {
    return tail;
}
public CarNode getNode(int target) {
    CarNode pre;
    pre = head;

    while(pre.next != null) {
        pre = pre.next;

        if(pre.data == target) {
            return pre;
        }

    }
    return null;
}**/
public void insert (String target) {
    if(head==null || target < head.data) {
        insert_at_head(target);
    return;
    }
    CarNode pre = head;

            while(pre.next != null && target > (pre.next).data) {
                pre = pre.next;

                CarNode newNode = new CarNode(target);
                newNode.next = pre.next;
                pre.next = newNode;
    }
}
}
//The CarNode Class
 class CarNode {
Car  data;
CarNode next;
CarNode  pre;

public CarNode(Car entry) {
    this.data = entry;
    next = null;
    pre  = null;
}

}

//Car Class

public class Car {
int Price;
String Make;

public Car(int pennies, String m) {
    this.Price = pennies;
    this.Make = m;
}

public int getPrice() {
    return Price;
}

public String getMake() {
    return Make;
}

public void setPrice(int p) {
    Price = p;
}
public void setMake(String m) {
    Make = m;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:32:35.270

我无法理解你的插入方法

```
public void insert (String target) {
  if(head==null || target < head.data) {
    insert_at_head(target);
  return;
  }
  CarNode pre = head;

    while(pre.next != null && target > (pre.next).data) {
        pre = pre.next;
        CarNode newNode = new CarNode(target);
        newNode.next = pre.next;
        pre.next = newNode;
   }
} 
```

我认为会是：

```
public void insert (Car target) {
  if(head==null || target.compare(head.data)<0) {
    insert_at_head(target);
  }else{
     CarNode pre = head;
     while(pre.next != null && target.compare((pre.next).data)>0) {
        pre = pre.next;
        CarNode newNode = new CarNode(target);
        newNode.next = pre.next;
        pre.next = newNode;
     }
  }
} 
```

而且你必须`int compare(Car other)`在 Car 类中创建一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:47:21.883

你`insert`的方法在我看来是错误的。我相信您正在尝试`Car`按升序插入这样的链接列表。你可以这样做：

```
public void insert (String target) {
  counter++;
  if(head==null || target < head.data) {
    insert_at_head(target);
  }else{
     /* trying to find position such that cur is greater than target */
     CarNode pre = head, cur = head.next;
     while(cur != null && cur.data < target) {
         pre = cur;
         cur = cur.next;
     }

     /* now insert element between pre and cur */
     /* if cur is end then you might reach the end of list */
     CarNode c = new CarNode(target);
     pre.next = c;
     c.next = cur;
     if(c.next == null)
         tail = c;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:36:20.290

您不必将这些变量“放置”`make`到`price`CarNode 类中，但您可以在 car 类中使用 getter 和 setter 方法在节点类中使用。

因此，如果您`Car`在 Node 类中使用已经创建（实例化）的对象，那么您可以像这样使用那些 getter 和 setter 方法。

所以在`CarNode`类中，让我们创建一辆汽车并想要获取该数据。

```
this.data.getPrice(); 
```

和

```
this.data.getMake(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:38:40.377

由于 Java 是开源的，您有机会了解`LinkedList`作为 Java Collection 框架一部分的实现。并以类似的方式实现它。

# c# - Why am I not receiving deserialized data in my WebAPI?

> ID：14945439
> 
> 赞同：0
> 
> 时间：2013-02-18T21:17:20.863
> 
> 标签：c#, asp.net, json, serialization

I've got a simple WebAPI app. In my controller I have:

```
[HttpPost]
public ActionResult DoSomeWork(string stringParam, DTOObject dto)
{
    // Some work gets done in here
} 
```

I've got a console app doing this:

```
HttpClient client = new HttpClient();
client.BaseAddress = new Uri(_context);
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

var response = client.PostAsJsonAsync("ControllerPath/DoSomeWork", new object[]{someString, dtoObject}).Result; 
```

I don't receive any errors. When my breakpoint is hit inside of the Controller, it shows the string coming in as NULL and the DTO coming is a fully populated but with default values (1/1/1900s, nulls, etc). I feel like the controller isn't properly deserializing the object but I'm kind of at a loss of how to fix this. Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:42:42.530

解决方案是因为我的控制器不是 ApiController。一旦我将控制器更改为从 ApiController 而不是 Controller 继承，一切正常。

# iphone - How to load a txt file in a NSArray?

> ID：14945448
> 
> 赞同：-4
> 
> 时间：2013-02-18T21:17:43.137
> 
> 标签：iphone, objective-c

how can I load the content of a txt file divided by lines in a NSArray? Basically, I have a file "count.txt" where I write the number of elements (and it works), "1t.txt" which represents the title of the first line and "1.txt" which represents the content. I mean just the adding of values value by value. Then when a user hits the title of the Table View I want he reads the content of "*.txt" (obviously easy if I have the index of array file)

For now I use this code:

```
- (void) loadMainArray
{
    for (int i = 1; i <= max; i++)
    {
    NSString *currentNumber;
    currentNumber = [NSString stringWithFormat:@"%it", i];
    NSLog(@"%i° file read", i);
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *dataFilePath = [[NSBundle mainBundle] pathForResource:currentNumber ofType:@"txt"];
    if ([fileManager fileExistsAtPath:dataFilePath])
    {
        NSString *content = [NSString stringWithContentsOfFile:dataFilePath encoding:NSUTF8StringEncoding error:nil];
        NSArray *parsed = [content componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
        mainArray = (__bridge NSMutableArray*)CFPropertyListCreateDeepCopy(kCFAllocatorDefault, (CFPropertyListRef)parsed, kCFPropertyListMutableContainers);
        NSLog(@"%@", parsed);

    }
    else{
    }
    }
} 
```

(sorry if the code is not aligned as well but I'm not able so much in stackoverflow) Anyway, after calling this method in the ViewLoad I get Signal SIGABRT, where I'm wrong?

N.B: max is set as well, I checked in NSLog. mainArray is an NSMutableArray.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:05:12.930

你想要的是

```
-(NSArray *)componentsSeparatedByString:(NSString *)separator; 
```

这将在指定的分隔符处划分字符串。所以基本上你这样做： 

```
NSArray *parsed = [content componentsSeparatedByString:@"\n"];
//assuming you want a newLine as a separator 
```

现在你继续做你的事。玩得开心

编辑：

我不确定你到可变数组的桥在这里是否正确。看来您应该使用 NSData-Object 来捕获调用的返回值

```
CFPropertyListCreateDeepCopy 
```

如果有任何需要，您可以随时将其转换为 MutableArray。这也解释了您的 SIGABRT 错误。

# java - 从 java 代码中打开 .exe

> ID：14945449
> 
> 赞同：0
> 
> 时间：2013-02-18T21:17:43.647
> 
> 标签：java

这是我想通过Java打开ODBC桥的代码

代码：

```
 try{
                Runtime r = Runtime.getRuntime();
                Process p = null;
                try{
                    String s = "C://windows/System32/odbcad32.exe";
                    p=r.exec(s);
                }catch(Exception ex){
                    System.out.println(ex.getMessage());
                }
            }catch(Exception ex)
            {
                System.out.println(ex.getMessage());
            } 
```

这是我面临的问题

```
Cannot run program "C://windows/System32/odbcad32.exe": CreateProcess error=740, The requested operation requires elevation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:48:01.023

您是否尝试在 odbcad32 中编辑连接？如果是这样，我无法帮助您，我在自己的项目中捕获了 SQLException 并使用 Desktop 类打开 obdcad32，例如：

```
Desktop.getDesktop().open(new File("C:\\Windows\\SysWOW64\\odbcad32.exe")); 
```

如果连接到访问数据库，这将在 64 位系统上打开 obdcad32。如果您能够连接 64 位驱动程序，那么您可以丢弃 SysWOW64 文件夹并将其替换为 System32（或者如果使用 32 位系统。

# sql - 一张桌子连接两张桌子

> ID：14945451
> 
> 赞同：1
> 
> 时间：2013-02-18T21:17:52.700
> 
> 标签：sql, join

我需要执行以下操作（我不确定是否可以使用 SQL）

## 表 A

col_a_1、col_a_2、col_a_3

## 表 B

col_a_1，col_b_1，col_b_2....

## 表 C

col_a_1，col_c_1，col_c_2....

col_a_1 在表 A 中是唯一的。我需要连接表 A、B、C，以便表 A 中的每个条目都会出现多次，但表 B 和 C 中的每个条目只出现一次，并且与表 A 的相同 col_a_1 相对。

我知道如何使用代码来做到这一点。也可以单独使用 SQL 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:21:22.907

您要么想使用某种外连接。左或全外。

```
SELECT A.*, B.*, C.* 
FROM Table_A A
LEFT JOIN Table_B B on A.col_A_1 = B.Col_A_1
LEFT JOIN table_C C on A.Col_A_1 = C.Col_A_1

SELECT A.*, B.*, C.* 
FROM Table_A A
FULL OUTER JOIN Table_B B on A.col_A_1 = B.Col_A_1
FULL OUTER JOIN table_C C on A.Col_A_1 = C.Col_A_1 
```

或者可能是一个联合结果......这取决于你所追求的。

```
SELECT A.*, B.* 
FROM Table_A A
INNER JOIN Table_B B on A.col_A_1 = B.Col_A_1
UNION
SELECT A.*, C.* 
FROM Table_A A
INNER JOIN Table_C C on A.col_A_1 = C.Col_A_1 
```

# javascript - 将元素移动到新的 div 中 - 不采用其新的 css 属性

> ID：14945455
> 
> 赞同：0
> 
> 时间：2013-02-18T21:18:28.847
> 
> 标签：javascript, jquery, css

所以，我有一个元素附加了一些“预先存在的”行为。所以，我发现仅仅移动它（根据一些新的要求）就可以保留现有的行为 = 好。但问题是，当我移动元素时，我需要赋予它“新样式”。

所以，如果我有这样的事情：

```
<div id="existingStructure">
    <div id="legacyElement"></div>
</div> 
```

现在，这两者都有预先存在的样式。我可以重新排列这些样式等。但我不能改变它们。样式附加到“id”而不是类定义。我相信如果需要我可以改变它。

现在，当“新 div”发生某些事情时，我需要移动“legacyElement”。我只是

```
jQuery('#newStructure').append('#legacyElement');

<div id="newStructure">
    <div id="legacyElement"></div>
</div> 
```

不幸的是，当我在 newStructure 上动态移动时，我在 newStructure 上的样式似乎不适用于 *legacyElement"。

我正在考虑将所有样式移动到一个类而不是关联到 id，当我移动它时......我只是 jQuery().addClass / jQuery().removeClass 等......

有没有更好/更简单更健壮的方法，我可以让*legacyElement在它位于**existingStructure*下时松散它的样式，然后在移动到“newStructure”等时获得新的样式……反之亦然。那个元素“legacyElement”将来回ping..所以，我需要它在每个父div下都有样式。

因此，当页面上发生动作时，我将其移回：

```
jQuery('#existingStructure').append('#legacyElement'); 
```

如果我不够简洁，请告诉我。

EXISTING 样式在外部 CSS 文件中，就像这样..

```
#existingStructure {
   // bunch of css
 }

#existingStructure .item1 input[type="text"] {
   // bunch of css
}

 #legacyElement{
   // bunch of css
  } 
```

并且新样式是相同的，除了可能会应用“其他样式”。

```
#newStructure {
   // bunch of css
 }

#newStructure .item1 input[type="text"] {
   // bunch of css
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:21:26.013

您当然可以通过他们的父母来定位您的 div 样式：

```
#existingStructure #legacyElement {some styles}
#newStructure #legacyElement {some other styles} 
```

为了进一步解释，这种安排应该产生更大的特异性，覆盖简单地应用于#existingStructure 或#legacyElement 的样式。我希望没有人做任何愚蠢的事情，比如在他们身上使用 !important。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:28:11.427

简短的回答：应该。

这是我在 jsFiddle 中快速制作的一个示例：http: [//jsfiddle.net/CCm4J/1/](http://jsfiddle.net/CCm4J/1/)

那为什么不是你的呢？很可能您有嵌入的 css 规则，这些规则仅在`existingStructure`id/class 中适用？如果没有看到更多你的 css，我不确定我能得到多具体。我只是验证您的 css 规则是否允许在外部应用`existingStructure`（甚至可能对*其父*`existingStructure`级也有规则！）

# git - 将带有 pre-req 的分支推送到 github

> ID：14945457
> 
> 赞同：3
> 
> 时间：2013-02-18T21:18:44.307
> 
> 标签：git, bazaar, github-api, prerequisites

说，从我原来的主人那里，我对它做了一定的改变，并在`t1`我把它推送到 github（调用它`branchA`）的时候提交了这个改变。然后我做了一些其他的改变并及时提交`t2`。我不想将其推送到`branchA`，但我想将其推送到另一个名为`branchB`.

是否可以将其`branchA`列为先决条件，`branchB`以便当我执行拉取请求时，差异`branchB`不包括提交的更改`t1`，换句话说，差异应该只显示和`branchB`之间的差异？`branchA``branchB`

`Bazaar/Launchpad`提供此选项，但我无法在`Github`. （我是新手`git`，所以也许这不是他们在做的事情`Github`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:05:17.213

这意味着你有：

```
Local Repo                  Upstream (GitHub Repo)

 .--.--o--x--y branchA   <====> o--o--x branchA
(master) 
```

但你想要：

```
.--.--o--x branchA      <====> o--o--x branchA
(mast) \
        y branchB        => you can push now 
```

这意味着您需要首先重新定位( )`o`之后的内容，以便在*本地*构建，然后再将其推送到您的 fork。`x``t1``branchB`

 *```
git checkout branchA                
git branch branchB                  # creates branchB where branchA currently is
git reset --hard origin/branchA     # reset branchA to x
git rebase --onto master x branchB 
```*

# c# - 如何使用 C# 代码映射映射一对多关系？

> ID：14945458
> 
> 赞同：1
> 
> 时间：2013-02-18T21:18:56.383
> 
> 标签：c#, nhibernate

`Account.cs`

```
public IList<Alert> Alerts { get; set; } 
```

`Alert.cs`

```
public Account Account { get; set; }

Bag<Alert>(x => x.Alerts, c => { }, r => { r.OneToMany(); }); 
```

并在警惕方面

`AlertMap.cs`

```
ManyToOne(x => x.Account); 
```

有人可以确认这个映射是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:08:01.187

*   当您在示例中具有反向引用时，应`Inverse()`设置onetomany 映射
*   最好明确指定两边的 keycolumn 以避免创建 2 个不同的外键
*   考虑将级联设置为非无以启用级联保存/更新/删除
*   如果警报不能独立存在（没有帐户），请添加 Cascade.DeleteOrphan

`Bag(x => x.Alerts, c => { c.Inverse(); c.Key("account_id"); }, r => { r.OneToMany();`});

`ManyToOne(x => x.Account, c => c.Column("account_id"));`

笔记：

*   泛型参数可以由编译器推断
*   这是我的头等大事，语法可能不同

# magmi - 导入 Dataflow 导出时出现 Magmi 错误

> ID：14945462
> 
> 赞同：0
> 
> 时间：2013-02-18T21:19:04.063
> 
> 标签：magmi

通过最小公分母对 Magmi 进行故障排除，我使用 Dataflow 从一个 Magento 站点导出了一个框架 CSV，然后立即使用 Magmi 在另一个 Magento 站点上重新导入它。我收到一个错误：

CSV 数据源 v1.2 - 警告：第 1 行，错误的列号：25 发现超过 1，已跳过行

我猜该站点的 Magmi 设置中有一些我看不到的东西，即控制任何其他导入？第二个站点已经使用 Magmi 每晚导入产品。我使用其已建立的配置文件和我创建的任何其他配置文件都看到了上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:13:08.030

Magmi 默认设置为处理 CSV 文件，每列都用双引号括起来`"`。

如果您查看该`Configure Current Profile`部分，您会发现一个标记为 的文件`CSV Enclosure`，其中填充了双引号。

另一方面，Magento 导出 CSV 文件时不使用双引号包装器。`CSV Enclosure`尝试从Magmi的字段中删除双引号，然后保存配置文件。进行测试运行，看看是否有效。

如果这不起作用，您可以将文件导入 Excel 并使用双引号重新保存文件。对我有用的方法如下：

1.  打开 Excel（创建一个空白电子表格）
2.  转到`Data`Excel 中的选项卡，单击`From Text`按钮。
3.  打开从 Magento 导出的 CSV
4.  选择`Delimited`并点击`Next`
5.  在 下`Delimiters`，选择`Comma`。点击下一步
6.  在该`Data Preview`部分上，突出显示所有列（按住 shift 并选择右侧最远的列）。
7.  选择`Text`下`Column data format`
8.  点击完成

在验证电子表格中的所有数据都正确后，您必须将其导出以将所有单元格值括在双引号中。为此，请遵循本教程： http: [//www.markinns.com/articles/full/export_excel_csvs_with_double_quotes](http://www.markinns.com/articles/full/export_excel_csvs_with_double_quotes)

文件保存后，将其上传到您的`var/import`目录，将 Magmi 设置为使用`"`，`CSV Enclosure`然后尝试运行导入。

# android - 在应用程序内从 android 设备发送电子邮件时出现 Span 错误

> ID：14945465
> 
> 赞同：1
> 
> 时间：2013-02-18T21:19:14.933
> 
> 标签：android, email, html

我正在开发一个简单的 android 应用程序，它将在文本视图中显示经度和纬度以及电话号码和日期，然后通过电子邮件发送这些参数。

我`JSEE Provider`用作电子邮件包装器从应用程序内发送邮件。当从模拟器中使用它时，它就像一个魅力但是当我在我的设备上测试它时，我在我的日志猫中得到一个**“`SPAN_EXCLUSIVE_EXCLUSIVE`跨度不能有零长度”**的日志，应用程序不会崩溃，但不会发送电子邮件。

我尝试发送值而不使用 textviews 我仍然有同样的错误。请问有什么帮助吗？这是我使用[JavaMail API的电子邮件发送代码](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

# html - 如何将 Chrome 设置为使用句点作为小数而不是逗号？

> ID：14945467
> 
> 赞同：4
> 
> 时间：2013-02-18T21:19:25.883
> 
> 标签：html, google-chrome, numbers, locale, decimal-point

以下 HTML5 代码有效。它允许用户使用 HTML5 type="number" 输入类型捕获小数。这可以通过 step 属性实现：

```
<input value="" name="turnover" id="turnover" placeholder="0" type="number" step="0.01"> 
```

问题是在南非，我们使用句点 (.) 作为小数，而不是逗号 (,)。不幸的是，Chrome 不允许使用句号并强制用户使用逗号。显然，其他一些浏览器使用您在 step 属性中使用的任何小数分隔符。似乎不是铬。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:46:52.880

这是我能想到的最接近的解决方案，它达到了相同的效果。它通过 pattern 属性使用带有正则表达式的 text 属性，而不是 HTML5 number 属性。

**对于货币（或 2 个小数位）：**

```
<input type="text" value="0" name="turnover" placeholder="0" pattern="\d+(\.\d{2})?"/> 
```

**对于科学（或小数点后 6 位）**

```
<input type="text" value="0" name="turnover" placeholder="0" pattern="\d+(\.\d{6})?"/> 
```

**对于任何小数位**

```
<input type="text" value="0" name="turnover" placeholder="0" pattern="\d+(\.\d+)?"/> 
```

希望这可以帮助。如果您有更好的解决方案，请发布！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:21:08.867

您是否尝试过设置页面的文化代码？假设您的网站主要服务于南非访问者......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T22:27:12.910

您必须`lang`将该输入元素的属性指定为句点表示小数而不是逗号的国家/地区的属性，例如。英语 (zh)

```
<input type="number" step="0.01" min="0" lang="en"> 
```

# c# - 列出 DropdownList 中的项目

> ID：14945468
> 
> 赞同：1
> 
> 时间：2013-02-18T21:19:28.947
> 
> 标签：c#, asp.net-mvc, html-helper

我有一个列表，我想将此列表填充到下拉框中。

从控制器：

```
public ActionResult Index()
        {
            List<SelectListItem> hum = allHuman();
            return View();

        } 
```

从视图：

```
@Html.DropDownListFor( ..... // NOW HOW CAN I DISPLAY THE VALUES IN THE DROPDOWNLIST ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:24:46.720

控制器

```
var list = new SelectList(allHuman(), "Id", "Name"); 
```

看法

```
@Html.DropDownList("humans", Model as SelectList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:27:55.417

您应该首先定义模型类型。

```
class MyViewModel
{
    // I assume you will use this property to read the selected value 
    public string Human {get;set;}

    //dropdown values
    public List<SelectListItem> AllHumans {get;set;}
} 
```

然后在你的控制器中创建一个实例：

```
public ActionResult Index()
{
    var model = new MyViewModel { AllHumans  =  allHuman()};
    return View(model);
} 
```

然后你可以在你的视图中显示它：

```
@model MyViewModel

@Html.DropDownListFor(model => model.Human, Model.AllHumans, null) 
```

# ruby-on-rails - 在 Rails 3 中处理多对多关系时如何找到正确的嵌套资源

> ID：14945470
> 
> 赞同：1
> 
> 时间：2013-02-18T21:19:29.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, nested-resources

忍受我，因为我是一个 Rails 菜鸟。我有一个基本的联赛系统。联赛 -> 赛季 -> 分区 -> 球队。我希望我的部门和团队属于任意数量的赛季。我的模型如下...

```
class Season < ActiveRecord::Base
  belongs_to :league
  has_many :season_division_teams
  has_many :divisions, :through => :season_division_teams
end

class Division < ActiveRecord::Base
  belongs_to :league
  has_many :seasons, :through => :season_division_teams
  has_many :season_division_teams
  has_many :teams, :through => :season_division_teams
end

class Team < ActiveRecord::Base
  belongs_to :league
  has_many :season_division_teams
  has_many :seasons, :through => :season_division_teams
  has_many :divisions, :through => :season_division_teams
end

class SeasonDivisionTeam < ActiveRecord::Base
  belongs_to :season
  belongs_to :division
  belongs_to :team
end 
```

我最终想要做的是，考虑到我在“第一季”，我有哪些部门，然后给这些部门哪些团队是这些部门的一部分（对于给定的赛季）。

```
Season.Find(1).divisions.all do |division|
    # Do something with the teams that make of the division (for that season)
    # division.teams.count
end 
```

我只是不知道如何在 Rails 中做到这一点，这在 SQL 中对我来说似乎很简单。

在此先感谢您的帮助。

编辑：

澄清一下，我试图让球队在一个特定的赛季（包括他​​们的部门）。使用我的模型，我知道我可以得到给定季节的分区。我只需要那些部门和赛季的球队。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:26:56.543

用于[预先加载](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)`includes`关联并在获得团队时避免 N+1 性能损失：

```
@season = Season.includes(:divisions => :teams).find(1)
divisions = season.divisions
teams = divisions.map(&:teams).flatten.uniq 
```

如果您只想获得*该赛季*的所有部门和球队，那么请以不同的方式执行此操作。首先，将以下行添加到您的季节模型中：

```
has_many :teams, :through => :season_division_teams 
```

现在您可以简单地执行以下操作：

```
@season = Season.find(1)
divisions = @season.divisions
teams = @season.teams 
```

请注意，这里急切加载没有多大意义，因为数据库只会被命中两次（而不是每个分区一次然后再一次）。

**更新**

最后，如果您想获得本赛季的所有分区，然后是该赛季这些分区内的所有球队，请执行以下操作。您可以使用以下代码：

```
@season = Season.find(1)                     
divisions = @season.divisions
divisions.each do |division|
  puts "Division: #{division.name}"
  division.teams.where(:season_division_teams => {:season_id => @season.id}).each do |team|
    puts "Team: #{team.name}"
  end
end 
```

但是使用急切加载是首选方法，如下所示：

```
@season = Season.find(1)                     
divisions = @season.divisions.includes(:season_division_teams => :teams).
                    where(:divisions => {:season_division_teams => {:season_id => @season.id}})
divisions.each do |division| 
  puts "Division: #{division.name}"
  division.teams.each do |team|
    puts "Team: #{team.name}"
  end
end 
```

这应该会急切地加载符合我们合并条件的相关部门的所有团队。

# javascript - 编码错误信息

> ID：14945471
> 
> 赞同：0
> 
> 时间：2013-02-18T21:19:37.993
> 
> 标签：javascript, character-encoding, error-handling

我在控制台中收到此错误：“未声明带框架文档的字符编码。如果在没有框架文档的情况下查看文档，则该文档可能看起来不同”。我无法理解这里的问题。我仔细检查以确保我链接到的文件名是正确的。另外，据我所知，我的元标记是合适的。任何帮助表示赞赏。

```
 <meta charset="utf-8">
  <script src="modernizr.js"></script>
   <script>
        Modernizr.load([
           "features.js",
           {
               test: Modernizr.geolocation,
               yep: "geolocation.js",
               nope: "noGeolocation.js"
               },
           {
               test: Modernizr.localstorage,
               yep: "localStorage.js",
               nope: "noLocalStorage.js"                             
             },
           {
               test: Modernizr.rgba,
               yep: "rgbaTest.js",
               nope: "norgbaTest.js",
               complete: function() {
                 init();
               }
             }            
          ]);
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:26:19.747

> **框架文档**的字符编码

 **它不是关于您的文件，而是关于“框架文件”。也许其中一些脚本会创建 iframe。而且这个 iframe 没有带有编码声明的元标记。**

# php - 一个对象可以“进化”成它的一个子类的对象吗？

> ID：14945472
> 
> 赞同：1
> 
> 时间：2013-02-18T21:19:39.420
> 
> 标签：php, oop, inheritance

假设我们有一个父类和一个子类。父类检查一些参数并决定子类更适合处理给定的请求 - 有没有办法从父对象中重新创建现有（父）对象作为子类的对象？

父类示例：

```
/**
 * Simple car
 */
class car {
    /**
     * The constructor
     */
    public function __construct() {
        // (...)
    }

    /**
     * Add a sunroof to the car
     */
    protected function addSunRoof() {
        // (...)
    }

    /**
     * Parse a config string and configure the car accordingly
     * @param string $config
     */
    public function configure($config) {
        $options = explode(";", $config);

        // Do something for every option in $config string
        foreach ($options as $o) {
            switch ($o) {
                case "sunroof" : 
                    $this->addSunRoof();
                    break;
                case "4x4" :
                    // 'car' does not have support for '4x4', but the child class 'suv' does
                    // -> This 'car' object should therefore 'evolve' and become a 'suv' object - how?
                case "foo" :
                // (...)
            } // switch

        } // foreach
    } // configure
} // car 
```

子类示例：

```
/**
 * SUV car
 */
class suv extends car {
    /**
     * Add 4x4 drive
     */
    protected function add4x4() {
        // (...)
    } // add4x4
} // suv 
```

现在，获取`suv`对象最明显的方法是直接从头开始创建它：

```
$car = new suv();
$car->configure($config); 
```

挑战在于我不知道创建对象时是否需要a`car`或`suv`对象；我不知道`$config`字符串包含哪些选项，直到它在`$car->configure()`方法中被解析（字符串可以来自任何地方，例如用户输入）。

一个简单的解决方法是在创建任何对象之前将该`configure`方法移出`car`分析字符串 - 但是，它在逻辑上属于该`car`对象，所以我真的很想把它保留在那里:)

有没有办法解决这个难题？如果没有，您会建议什么作为“最干净”的解决方法？

提前致谢！

**编辑：**

正如有人指出的那样，我的问题与这个问题非常相似：[将当前对象 ($this) 转换为后代类](https://stackoverflow.com/questions/4080217/cast-the-current-object-this-to-a-descendent-class) 那里的答案说这在技术上是可行的，但不应该这样做。但是，尚未提出令人信服的替代方案（有人建议使用工厂，但我觉得这只能解决部分问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T23:00:25.677

正如评论中所说，做你想做的最常见的方法是使用一个静态方法，将字符串作为参数并返回正确的实例。这样，您可以将方法保留在 car 类中，正如您所说，这是最合乎逻辑的。

顺便说一句，如果更多的是在现有对象上添加功能。您可能会考虑[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。这样，您可以使用静态方法获取配置字符串和现有汽车，并返回装饰有与配置匹配的功能的给定汽车。这使您可以更灵活地处理所有优点和缺点（您可以在拖拉机上安装天窗）。

# php - 如何使用 php 将保存在数据库中的 url 用作 casperjs 中源 url 的源？

> ID：14945477
> 
> 赞同：0
> 
> 时间：2013-02-18T21:20:11.923
> 
> 标签：php, casperjs

我有一个小问题，我是 casperjs 的新手，所以我想知道 casper 是否可以与我当前的 php 脚本一起工作，该脚本循环遍历我的数据库查询结果的结果。

```
<?php
$urls = query url database

foreach($url as $url){
   then I send an execute command to casperjs.
}
?> 
```

然后这里是我想要发送循环 url 的 js 代码。

```
var casper = require('casper').create({
viewportSize: {
    width: 1024,
    height: 768
}
});

casper.start(**URL from PHP HERE**, function() {
this.capture('shy.png', {
    top: 0,
    left: 0,
    width: 1024,
    height: 1000
 });
});

casper.run(); 
```

我的问题是如何将带有 $url 作为 url 源值的命令发送到 casperjs？

我正在尝试为提供的每个 url 制作屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:10:36.740

您可以使用 php 脚本在标签中回显 url。

```
<?php
$urls = do_query();
foreach($urls as $url){
    echo "<a href=\"$url\"">$url</a><br />;
}
?> 
```

用你的 casperjs 注入 jQuery。然后在所有链接上使用带有 jQ​​uery 选择器的 casperjs evaluate() 再次返回所有链接。

```
var links = this.evaluate( function() {

    var $ = jQuery; // map jQuery to $

    var links = [];

    $('a').each( function() {

        links.concat($(this).attr('href'));

    });

    return links;

}); 
```

然后遍历链接并捕获它们。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:40:05.033

您可以通过 shell 命令将 URL 传递给 casperjs 进程：

[CasperJS CLI 命令](http://casperjs.org/cli.html)

例如 casperjs --crawlurl= [http://example.com](http://example.com)

然后，您可以使用类似 shell_exec 的方式从 PHP 调用 casperjs 进程：

[shell_exec](http://php.net/manual/en/function.shell-exec.php)

请注意，对于普通的服务器提供商，他们可能会阻止使用 shell_exec。

# c# - 验证学年

> ID：14945478
> 
> 赞同：-7
> 
> 时间：2013-02-18T21:20:14.140
> 
> 标签：c#, date

我问的是`SchoolYear`。

就像这个例子

> 2013-2014 *（开始年-结束年）*

如何验证用户是否实际进入学年（例如`2013-2014`）

这是我到目前为止所尝试的。

```
 private void TextBox_Validating(object sender, CancelEventArgs e)
        {
            if (!string.IsNullOrWhiteSpace(studentLastSchoolAttendedSchoolYearTextBox.Text))
            {
                int fromYear = 0;
                int toYear = 0;
                string[] years = Regex.Split(studentLastSchoolAttendedSchoolYearTextBox.Text, @"-");

                fromYear = int.Parse(years.FirstOrDefault().ToString());
                if (fromYear.ToString().Length == 4)
                {
                    if (years.Count() > 1)
                    {
                        if (!string.IsNullOrWhiteSpace(years.LastOrDefault()))
                        {
                            toYear = int.Parse(years.LastOrDefault().ToString());
                            if (fromYear >= toYear)
                            {
                                e.Cancel = true;
                                MessageBox.Show("The 'From Year' must be lesser than to 'To Year'.\n\nJust leave as a empty to avoid validating.", Text, MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                            }
                        }
                        else
                        {
                            e.Cancel = true;
                            MessageBox.Show("Please enter a valid School range Year format.\nEx.: 2010-2011\n\nJust leave as empty to avoid validating.", Text, MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                        }
                    }
                    else
                    {
                        studentLastSchoolAttendedSchoolYearTextBox.Text = fromYear.ToString() + "-" + Convert.ToInt32(fromYear + 1).ToString();
                    }
                }
                else
                {
                    e.Cancel = true;
                    MessageBox.Show("Please enter a valid School range Year format.\nEx.: 2010-2011\n\nJust leave as empty to avoid validating.", Text, MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:28:15.220

假设这`2013-2014`是一个有效的格式，这可能是一个有效的函数：

```
public static bool IsSchoolYearFormat(string format, int minYear, int maxYear)
{
    string[] parts = format.Trim().Split(new[] { '-' }, StringSplitOptions.RemoveEmptyEntries);
    if (parts.Length == 2)
    {
        int fromYear; int toYear;
        if (int.TryParse(parts[0], out fromYear) && int.TryParse(parts[1], out toYear))
        {
            if (fromYear >= minYear && toYear <= maxYear && fromYear + 1 == toYear)
                return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:26:52.957

```
public bool IsSchoolYearFormat(string toCheck)
{
    string[] arr = toCheck.Trim().Split('-'); //splits the string, eg 2013-2014 goes to 2013 and 2014
    if (arr.Length != 2) //if there is less or more than two school years it is invalid.
    {
        return false;
    }
    int one, two;
    if (!int.TryParse(arr[0], out one))
    {
        return false;
    }
    if (!int.TryParse(arr[1], out two))
    {
        return false;
    }
    //if they don't parse then they are invalid.
    return two - 1 == one && two > 1900 && one > 1900; //to please AbZy
    //school year must be in the format yeara-(yeara+1)
} 
```

# java - 在 Transformer 中，如何指定被转换的类的类型是相同的类型？

> ID：14945491
> 
> 赞同：1
> 
> 时间：2013-02-18T21:21:09.873
> 
> 标签：java, generics

我同时有一个非常简单但令人困惑的问题。

在 Transformer 中，有没有办法指定被转换的类的类型是相同的类型？

为了清楚起见，我将分享代码：

```
Transformer<Set<?>, List<?>> transformer = new SetToListTransformer(); 
```

有没有办法让我指定 Set 和 List 是同一类型？

同样在编写变压器时我这样做了，我认为它没有任何作用：

```
private static class SetToListTransformer implements Transformer<Set<?>, List<?>> {

  @Override
  public List<?> transform(final Set<?> input) {
     return this.doTransform(input);
  }

  public <T> List<T> doTransform(final Set<T> input) {
      ...
  }
} 
```

问题是，我不能输入 SetToListTransformer，因为我并不真正关心里面有什么类型，我只关心它们是相同的类型。

任何帮助，将不胜感激！

PS：我并没有真正将 Set 转换为 List，我使用的是其他类型，我只是用它们来澄清代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:28:27.567

尝试将两个通配符绑定到相同的类型参数，如下所示：

```
class SetToListTransformer<E> implements Transformer<Set<E>, List<E>> { 
    @Override
    public List<E> transform(Set<E> from) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:30:43.543

使您的类通用：

```
private static class SetToListTransformer <T> implements Transformer<Set<T>, List<T>> {

  @Override
  public List<T> transform(Set<T> input) {
     return this.doTransform(input);
  }

  public List<T> doTransform(Set<T> input) {
      ...
  }
} 
```

但是请注意，此实现对类型非常严格。您将无法使用 SetToListTransformer<Number> 将 Set<Integer> 转换为 List<Number>，尽管 Integer 是一个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:45:39.303

`transform`由于无法在通用通配符之间施加任何关系，因此无法对您的实现实施所需的约束。`?`您声明中的两者`SetToListTransformer`都注定各自意味着*某种未知类型*，无法将它们相互绑定。

正如其他人指出的那样，最简单的解决方案是`SetToListTransformer`通用。例如：

```
class SetToListTransformer<T> implements Transformer<Set<? extends T>, List<T>> {

    @Override
    public List<T> transform(final Set<? extends T> input) {
        final List<T> output = new ArrayList<T>(input.size());
        output.addAll(input);
        return output;
    }
} 
```

当然，这需要您使用特定类型参数来实例化转换器。只要`SetToListTransformer`便宜，这应该没问题。但是，您表示您只想使用一个实例。以下是如何做到这一点：

```
class MyTransformers {

    // There is no reason to expose SetToListTransformer now.
    // Keep it here as an anonymous class.
    private static final Transformer<Set<?>, List<?>> FROM_SET_TO_LIST =
            new Transformer<Set<?>, List<?>>() {
                @Override
                public List<?> transform(final Set<?> input) {
                    return doTransform(input);
                }
                private <T> List<T> doTransform(final Set<T> input) {
                    final List<T> output = new ArrayList<T>(input.size());
                    output.addAll(input);
                    return output;
                }
            };

    private MyTransformers() { }

    public static <T> Transformer<Set<? extends T>, List<T>> fromSetToList() {
        @SuppressWarnings("unchecked")//this is okay for any T because the impl is stateless 
        final Transformer<Set<? extends T>, List<T>> withNarrowedTypes =
                (Transformer<Set<? extends T>, List<T>>)(Transformer<?, ?>)FROM_SET_TO_LIST;
        return withNarrowedTypes;
    }
} 
```

这是一个使用示例：

```
Set<Integer> intSet = new HashSet<Integer>();
intSet.add(42);
intSet.add(1337);
List<Number> numList = MyTransformers.<Number>fromSetToList().transform(intSet); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:48:02.897

你不能用`Transformer`接口表达那个约束。您可以创建一个施加额外约束的子类型，并使用使用过的子类型`Transformer`。

```
interface StricterTransformer extends Transformer<Set<?>, List<?>>

    public <T> List<T> transform2(Set<T> input) ;

    /** javadoc additional contract: must behave as transform2(input) */
    public List<?> transform(Set<?> input);
    // in java8 we can give a "default" impl for this interface method
    // that simply calls transform2(), so subclasses don't have to impl 
    // the transform() method, which is just boiler plate code. 
```

# facebook - 自动下载 facebook 洞察数据

> ID：14945498
> 
> 赞同：1
> 
> 时间：2013-02-18T21:21:53.330
> 
> 标签：facebook, pentaho, kettle, restfb

我正在寻找用于导出 Facebook 页面和 facebook 应用程序的 facebook 洞察数据的工具或流程。目前我只是从他们的 Insights 界面手动下载 csv 文件，但理想情况下我想自动化这个过程并将数据加载到 Pentaho Kettle 中，这样我就可以对数据执行一些操作。

有没有办法自动下载和输入 csv 文件？还是我必须使用 facebook graph api explorer？我目前正在研究一个设置，我使用 NetBeans 和 RestFB 来提取我想要的数据，然后使用 Pentaho Kettle 访问该数据。我不确定这是否可行，或者它是否是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:26:59.820

正如 Codek 所说，Kettle 插件是一个非常好的主意，并且对 Kettle 项目非常有帮助。然而，这也是一项认真的努力。

如果您不想付出这种努力，您当然可以使用 Kettle Job 下载文件，只要文件可通过标准传输方法（FTP、SFTP、SSH 等）获得。我从未使用过 RestFB，所以我不知道有什么可用的。您可以通过**REST 客户端**转换步骤直接从 Web 服务获取。

下载文件后，您可以将它们发送到要加载的转换。您可以**对每个输入行执行此操作吗？**转换作业步骤上的选项，或者您可以使用**Get files from result 从**转换中作业的结果集中获取文件名。

**然后，您可以在使用Copy 或 Move result filenames**加载后归档文件。**在一项工作中，我使用Get File Names**和**Merge Join**仅找到不在我的存档中的文件，然后在转换**中的结果步骤中设置文件**，因此如果需要也可以这样做。

要使其自动化，您可以使用 Kitchen.bat/Kitchen.sh 从调度程序运行您的作业。由于我经常使用 PostgreSQL，所以我使用 PGAgent 作为我的调度程序，但 Windows 调度程序或 cron 也可以工作。

希望有帮助。

# github - GitHub Boxen 错误

> ID：14945499
> 
> 赞同：0
> 
> 时间：2013-02-18T21:18:01.483
> 
> 标签：github, installation

我不是 GitHub 的最大用户，当我尝试安装他们的新“boxen”（[https://github.com/boxen/our-boxen](https://github.com/boxen/our-boxen)）时，我遇到了问题。

有`README.md`说明，运行时出现错误

```
git checkout -b master upstream/master 
```

有任何想法吗？如果有任何区别，我创建了一个本地存储库，还是需要在 GitHub 上创建一个？

错误信息：

```
fatal: This operation must be run in a work tree 
```

# ruby-on-rails - 麻烦更新has_man：通过记录

> ID：14945501
> 
> 赞同：0
> 
> 时间：2013-02-18T21:21:59.043
> 
> 标签：ruby-on-rails, has-many-through, acts-as-list

我在通过记录更新 has_many 时遇到问题。这是我的设置：

```
class TastingGroup < ActiveRecord::Base
  has_many :group_wine
  has_many :wines, through: :group_wine
end

class GroupWine < ActiveRecord::Base
  belongs_to :tasting_group
  belongs_to :wine
end

class Wine < ActiveRecord::Base      
  has_many :group_wine
  has_many :tasting_groups, through: :group_wine
end 
```

我试图为此使用acts_as_list，因为TastinGroup 中葡萄酒的顺序很重要，所以我在GroupWine 模型中添加了一个“位置”属性。

但是，当我尝试更新 GroupWine 记录时，我收到以下错误，这就是我正在做的事情。

```
gw = GroupWine.first
#<GroupWine:0x007fd9f7c38b50> {
         :wine_id => 1,
         :tasting_group_id => 1,
         :position => nil
}

gw.position = 1
gw.save 
```

这是我得到的错误......

```
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'group_wines.' in 'where clause': UPDATE `group_wines` SET `position` = 3 WHERE `group_wines`.`` IS NULL 
```

group_wines 的 NULL 是怎么回事，为什么要添加 where 子句？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:35:54.553

尝试将`group_wine`对象复数为`group_wines`

```
class TastingGroup < ActiveRecord::Base
  has_many :group_wines
  has_many :wines, through: :group_wines
end

class GroupWine < ActiveRecord::Base
  belongs_to :tasting_group
  belongs_to :wine
end

class Wine < ActiveRecord::Base      
  has_many :group_wines
  has_many :tasting_groups, through: :group_wines
end 
```

# logging - 使用 jboss 7.1 进行日志压缩

> ID：14945503
> 
> 赞同：2
> 
> 时间：2013-02-18T21:22:05.763
> 
> 标签：logging, log4j, jboss7.x

我正在使用 JBoss 7.1 开发一个应用程序，其中我使用周期性旋转文件处理程序标签来创建日志的历史文件。我想要做的是以某种格式压缩文件，例如 .gz

我试图这样做：

```
<periodic-rotating-file-handler name="MY_LOG">
    <filter>
        <all>
            <match pattern="TEXT"/>
        </all>
    </filter>
    <formatter>
        <pattern-formatter pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%c] (%t) %s%E%n"/>
    </formatter>
    <file relative-to="jboss.server.log.dir" path="server.log"/>
    <suffix value="_yyyy-MM-dd.gz"/>
    <append value="true"/>
</periodic-rotating-file-handler> 
```

但我收到了这个错误：

非法模式字符 'g'

知道如何使用 jboss 7.1 进行压缩吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:10:49.557

后缀只需要一个可以被 解析的模式[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。无法从处理程序本身压缩滚动的日志文件。

# php - jQuery.validator.addMethod 在 CodeIgniter 中总是返回 true

> ID：14945508
> 
> 赞同：1
> 
> 时间：2013-02-18T21:22:34.053
> 
> 标签：php, codeigniter, jquery, jquery-validate

我正在尝试验证用户是否已经存在。用户名的错误输出始终是“此用户名已被占用。”。

**jQuery 验证：**
除了 uniqueUsername（required、minlength、maxlength、lettersonly 都可以正常工作）之外，所有验证错误都有效。

```
jQuery.validator.addMethod("lettersonly", function(value, element) {
    return this.optional(element) || /^[a-z]+$/i.test(value);
}, "Please enter only letters");

$.validator.addMethod("uniqueUsername", function(value, element) {
    $.ajax({
        type : "POST",
        url : "<?php echo base_url();?>user/check_user",
        data : "username=" + value,
        dataType : "html",
        success : function(msg) {
            if (msg == 'true') {
                return true;
            } else {
                return false;
            }
        }
    })
}, "This username is already taken.");

$("#form").validate({
    rules : {
        username : {
            required : true,
            minlength : 3,
            maxlength : 25,
            lettersonly : true,
            uniqueUsername : true
        },
    },

    messages : {

        username : {
            required : "Username is required.",
        },
    },

    errorElement : "span",
    errorPlacement : function(error, element) {
        error.appendTo(element.parent());
    }
}); 
```

**controllers/user.php：**
函数 check_user() 将数组中的用户名发送给我的模型用户。我已经测试了这个功能，它应该可以正常工作。

```
public function check_user() {
    $this -> load -> model('users');
    $user = array('username' => $this -> input -> post('username'));
    if ($this -> users -> is_user_username($user)) {
        echo "true";
    } else {
        echo "false";
    }
} 
```

**models/users.php**
此函数获取数组并检查此用户名是否已存在于我的数据库中，如果存在 -> true，否则 -> false。

```
public function is_user_username($user) {
    $this -> db -> where('username', $user['username']);
    $query = $this -> db -> get('users');
    if ($query -> num_rows() == 1) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:54:29.327

> **引用 OP**：
> “ `models/users.php`- 此函数获取数组并检查此**用户名是否已存在**于我的数据库中，**如果存在 -> true**，否则 -> false。”

那么你的`uniqueUsername`方法的逻辑是倒退的：

```
success : function(msg) {
    if (msg == 'true') { // <-- if username exists
        return true;     // <-- this means 'passed- no error'
    } else {
        return false;    // <-- since you did not get a match, it shows error
    }
} 
```

**`return false`自定义验证方法中的 A 是触发错误消息的原因。**

换句话说，`return false`==> *“验证失败，显示错误信息”*

根据您自己对 PHP 函数的描述，您的 PHP 逻辑正在返回`false`到`success` `msg`，这使您的条件逻辑失败，因此给出了`return false`，这是触发错误消息的原因。

试试这个...

```
success : function(msg) {
    if (msg == 'true') { // <-- if username exists
        return false;    // <-- this means 'failed- show message'  
    } else {
        return true;     // <-- this means 'passed- no error'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:22:50.710

为什么不使用远程方法？[这里](http://docs.jquery.com/Plugins/Validation/Methods/remote)有几个例子

这样你就不必编写自己的方法，你可以像这样指定规则。您的 check_user 页面将传递用户名字段的内容，并且应该只返回单词 true 或 false

```
rules : {
 username : {
  required : true,
  minlength : 3,
  maxlength : 25,
  lettersonly : true,
  remote: "<?php echo base_url();?>user/check_user"
 },
}, 
```

# javascript - 使用 Modernizr.load 在 Rails 3.2 中加载资产

> ID：14945512
> 
> 赞同：0
> 
> 时间：2013-02-18T21:23:11.180
> 
> 标签：javascript, ruby-on-rails-3

我希望能够使用 Modernizr.load 加载某些 JS 文件——

```
 Modernizr.load({
  test : Modernizr.touch,
  yep  : '/assets/mobile.js',
  nope : '/assets/desktop.js',
}); 
```

但是当它被编译用于生产时，这些路径不再存在。我怎样才能以这种方式整理加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:15:08.813

您需要将这些资产添加到`config.assets.precompile`您的环境配置文件中（在 config/environments/production.rb 中找到）。这是一个例子：

```
config.assets.precompile += %w(mobile.js desktop.js) 
```

然后 Modernizr 可以引用这些资产：

```
Modernizr.load({
  test : Modernizr.touch,
  yep  : '/assets/mobile.js',
  nope : '/assets/desktop.js',
}); 
```

编辑：您还应该确保这些资产**不**包含在您的 application.js 清单中。将它们包含在 application.js 中会破坏为特定的无功能浏览器有条件地加载它们的目的。

# php - Yii模型中的误区

> ID：14945513
> 
> 赞同：0
> 
> 时间：2013-02-18T21:23:21.263
> 
> 标签：php, model, yii, render

我有一个无法解决的问题。

我正在尝试显示来自关系表的信息，如下所示：

```
 $dataProvider = PartnerSite::model()->with('siteCommercials')->findAll("user_id=" . Yii::app()->user->id);

    $this->render('index', array(
        'dataProvider' => $dataProvider,
        'allMoney' => 1
    )); 
```

但在我看来，我看到了这个错误：

```
Relation "siteCommercials" is not defined in active record class "PartnerSite". 
```

但事实是我的模型有关系：

```
public function relations() {
    return array(
        'goesFromSites' => array(self::HAS_MANY, 'GoesFromSite', 'site_id'),
        'user' => array(self::BELONGS_TO, 'User', 'user_id'),
        'siteCommercials' => array(self::HAS_MANY, 'SiteCommercial', 'site_id'),
    );
} 
```

所以我的问题是。有什么问题吗？我无法理解...只有一个模型存在很多问题... BeforeSave() 不起作用，关系也不好。用户关系工作得很好。

“模型”的完整列表：

```
<?php
    abstract class BasePartnerSite extends GxActiveRecord {

   public $siteCommercials = "oke";

   public static function model($className=__CLASS__) {
    return parent::model($className);
   }

   public function tableName() {
    return '{{partner_site}}';
   }

   public static function label($n = 1) {
    return Yii::t('app', 'PartnerSite|PartnerSites', $n);
   }

   public static function representingColumn() {
    return 'site_name';
   }

   public function rules() {
    return array(
        array('site_name', 'required'),
        array('user_id', 'numerical', 'integerOnly'=>true),
        array('site_name', 'length', 'max'=>255),
        array('id, site_name, user_id', 'safe', 'on'=>'search'),
    );
   }

   public function relations() {
    return array(
        'goesFromSites' => array(self::HAS_MANY, 'GoesFromSite', 'site_id'),
        'user' => array(self::BELONGS_TO, 'User', 'user_id'),
        'siteCommercials' => array(self::HAS_MANY, 'SiteCommercial', 'site_id'),
    );
   }

   public function pivotModels() {
    return array(
    );
   }

   public function attributeLabels() {
    return array(
        'id' => Yii::t('app', 'ID'),
        'site_name' => Yii::t('app', 'Site Name'),
        'user_id' => null,
        'goesFromSites' => null,
        'user' => null,
        'siteCommercials' => null,
    );
   }

   public function search() {
    $criteria = new CDbCriteria;

    $criteria->compare('id', $this->id);
    $criteria->compare('site_name', $this->site_name, true);
    $criteria->compare('user_id', $this->user_id);

    return new CActiveDataProvider($this, array(
        'criteria' => $criteria,
    ));
   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:40:24.770

你的班级是*BasePartnerSite*。在此类中，您定义关系*siteCommercials*。

您的错误消息：**“关系”siteCommercials“未在活动记录类“PartnerSite”中定义。**

那么你的代码不应该是吗？

```
$dataProvider = BasePartnerSite::model()->with('siteCommercials')->findAll("user_id=" . Yii::app()->user->id); 
```

# windows - CTRL+C、CTRL+V、通过 Windows cmd 中的 SHIFT + 箭头进行文本选择

> ID：14945516
> 
> 赞同：2
> 
> 时间：2013-02-18T21:23:32.590
> 
> 标签：windows, cmd

我积极使用 cmd 来创建/测试 shell 命令，我很感兴趣如何允许标准文本操作热键，如`ctrl`+ `c`，`ctrl`+ `v`，通过`shift`+选择`arrow`。

是否有可能以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:42:17.537

如果启用快速编辑模式（在属性/选项中），在命令窗口中复制和粘贴会稍微容易一些。这意味着您可以通过鼠标拖动来进行选择，而无需先执行编辑 -> 标记。完成后，有一个按键值得记住：

```
alt-space E P 
```

这将打开窗口菜单并选择编辑 -> 粘贴。我经常使用它，现在对我来说很自然。Ansgar 推荐的控制台应用程序确实使这更容易，但如果您需要使用常规的 cmd.exe，那么这个技巧很有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:30:15.670

为什么你不尝试使用“ [PowerCMD](http://www.powercmd.com/) ”你有很多使用该程序的快捷方式。

PowerCmd 是一个更好的命令提示符替换工具，它通过易于使用的 Windows GUI 界面增强了您的命令提示符，并允许您在基于选项卡的窗口中同时运行多个命令控制台。

它具有许多功能，我相信您会发现它很有用。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:35:22.603

使用[控制台](http://sourceforge.net/projects/console/)，您可以配置 和 的`copy`热键`paste`。不过，我不知道有一种方法可以通过`Shift`+ 光标键进行选择。

# javascript - 将 Facebook“赞”按钮与回调集成 - 不在活动中显示

> ID：14945518
> 
> 赞同：4
> 
> 时间：2013-02-18T21:23:43.977
> 
> 标签：javascript, facebook

我正在尝试集成 Facebook 的“赞”按钮，其中“赞”操作与回调函数集成。它似乎正在工作，除了“喜欢”活动没有出现在 Facebook 上。

我正在使用自己的 Facebook 帐户对此进行测试，但在我的提要、个人资料页面或活动日志中看不到该活动。

这是我的网址： http: [//flevy.com/powerpoint-plugin-test](http://flevy.com/powerpoint-plugin-test)

这是我的代码：

```
 <script src=\"http://connect.facebook.net/en_US/all.js\" type=\"text/javascript\"></script>
    <script>
      window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
          appId      : 'xxxxxx', // App ID from the App Dashboard
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to access the session?
          xfbml      : true  // parse XFBML tags on this page?
        });
        FB.Canvas.setAutoResize();
      };
    </script>

    <div class=\"fb-like\" data-href=\"$share_url\" data-send=\"false\" data-layout=\"box_count\" data-width=\"50\" data-show-faces=\"false\"></div>

    // facebook callback
    FB.Event.subscribe('edge.create', function(href, widget) {
        deliverEmail();
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T06:45:38.710

我将首先修复 Open Graph 调试器上的错误：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fflevy.com%2Fpowerpoint-plugin-test](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fflevy.com%2Fpowerpoint-plugin-test)

**必须修复的错误**

```
Object Invalid Value
Object at URL 'http://flevy.com/powerpoint-plugin-test' of type 'website' is invalid because the given value '//flevy.com/images/slides.gif' for property 'og:image:url' could not be parsed as type 'url'. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:19:14.943

你的 javascript 抛出一个错误说：

> 未捕获的类型错误：对象 # 没有方法“setAutoResize”

AFAIK，现在不推荐使用 setAutoResize 函数。参考[https://developers.facebook.com/roadmap/completed-changes/#september-2012](https://developers.facebook.com/roadmap/completed-changes/#september-2012)

而且，据我了解，即使[是替换 this 的功能](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)，也应该在您在 Facebook Canvas 中加载 this 时使用。

所以，请检查你在这里做什么！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:47:22.640

这个页面有很多 HTML 语法不一致/验证问题。您可以在 HTML 中为属性值切换单引号、双引号和无引号。该代码还缺少一些终止标签。这可能会导致一些不稳定的行为。你的 JavaScript 有同样的问题，你在同一个脚本块中使用单，然后双......虽然这看起来确实有效。

**您可以在此处运行验证：**

[http://validator.w3.org/check?uri=http%3A%2F%2Fflevy.com%2Fpowerpoint-plugin-test&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fflevy.com%2Fpowerpoint-plugin-test&charset=%28detect+automatically%29&doctype=Inline&group=0)

@DrBeza 所说的开放图验证也应该得到解决。不知道为什么框架不喜欢非协议特定的 URL，而只是将 http:// 或 https:// 添加到该图像。

清理之后，这应该更容易排除故障，或者问题可能是需要清理的结果。

# php - preg_match_all 遇到问题

> ID：14945526
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:24:13.130
> 
> 标签：php, regex, html-parsing

这是我的代码：

```
preg_match_all('/<a href="(.+?)index.php(.+?)&abc=(.+?)"/', $dataToParse, $matches);

foreach ($matches as $val)
{
    $absUrl = $val[1] . 'index.php' . $val[2] . '&abc=' . $val[3];

    echo $absUrl;
} 
```

但是，`$val[1]`是整个匹配的字符串，包括`<a href`. 我相信我的语法错误，但我一直在尝试修复它，但没有运气。不确定如何正确执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:26:49.913

尝试`PREG_SET_ORDER`在一个之后传递常量`$matches`，如下所示：

```
preg_match_all("/.../",$dataToParse,$matches,PREG_SET_ORDER); 
```

有关原因的更多信息，请参阅[文档](http://php.net/preg-match-all)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:32:26.277

$matches[0] 是整个字符串，$matches[1] 是第一个匹配组，$matches[2] 是第二个匹配组，依此类推。

```
for( $i = 0; $i < count( $matches[1]); $i++)
{
    $absUrl = $matches[1][$i] . 'index.php' . $matches[2][$i] . '&abc=' . $matches[3][$i];
    echo $absUrl;
} 
```

# jquery - 使用 Jquery 获取整个表的 td 数据

> ID：14945528
> 
> 赞同：0
> 
> 时间：2013-02-18T21:24:22.317
> 
> 标签：jquery, html, forms

我有这个奇怪的要求。我有一张桌子，在这张桌子里面我有一个表格。我正在 Jquery 的帮助下处理该表单。有什么方法可以让我在`<td></td>`没有任何 id 或类的情况下获取数据`<td>`。

我的要求很奇怪。我从某个地方得到了这段代码，现在我需要管理这段代码。如果这东西不起作用，我将不得不手动逐行更改代码，并且有数百种这样的表格。

```
<table>
<tr>
   <td>The data that i need </td>
</tr>
<tr>
   <td> <form> My form </form> </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:29:14.600

试试这个：

```
html= $('table td:first').html(); 
```

你可以像这样使用它：

```
 alert(html); 
```

小提琴：http: [//jsfiddle.net/bYccS/](http://jsfiddle.net/bYccS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:28:18.523

```
$($('table > tr > td')[0]) 
```

使用它，您将在第一个 tr 上拥有第一个 td

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:29:02.717

试试这个

```
jQuery.each('td', function() {
      var text = $(this).html();    
 }); 
```

# asp.net - 将字符串传递到MVC4中的局部视图

> ID：14945531
> 
> 赞同：27
> 
> 时间：2013-02-18T21:24:39.140
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, razor

我希望能够将一个字符串从调用视图传递到我的局部视图中 - 这个字符串将根据呈现局部视图的视图而有所不同。像这样的东西：

```
@{ Html.RenderPartial("PartialViews/_BreadcrumbsPartial", "New Item");} 
```

或者

```
@{ Html.RenderPartial("PartialViews/_BreadcrumbsPartial", Model.Name);} 
```

我如何从局部视图中访问第二个参数，因为我没有标记该参数？如果可能的话，我想避免传递整个模型，而直接引用该字符串。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-18T21:29:20.683

您的部分必须绑定到字符串

例如，在顶部：

```
@model string 
```

要访问部分中的值，请使用`@Model`代替字符串参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:30:31.227

您可以使用`TempData`（或可能`ViewData`）在后续视图中应该可以访问。但是，我相信您也可以直接传递变量，也许是通过查询字符串。

请查看此问题以及[从页面到部分视图的 asp.net mvc 参数](https://stackoverflow.com/questions/935915/asp-net-mvc-parameter-from-page-to-a-partial-view)

# javascript - 如何从模板调用“依赖注入”JavaScript 函数？

> ID：14945535
> 
> 赞同：0
> 
> 时间：2013-02-18T21:24:54.677
> 
> 标签：javascript, html

假设我正在使用模块模式，例如 RequireJS，并且我将模块 A 发送到模块 B。

现在在我的模块中，我想使用模板引擎生成 HTML，但是为了这个问题，假设我手动创建了 HTML 字符串。在那个 HTML 字符串中，我想创建一个调用模块“a”提供的函数的按钮。

但我显然不能这样做：

```
define( [ "a.js" ], function( a ) {

    var html = "<button onclick='a.myfunction();'>Click me!</button>";

} ); 
```

我怎么做？当我无法调用全局函数时，从 JavaScript 跨入“HTML-String”，因为它都是基于模块的？

```
define( [ "a.js" ], function( a ) {

    var html = "<button onclick='*** HERE I WANT TO CALL A FUNCTION PROVIDED WITH A***'>Click me!</button>";

} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:39:05.023

您可以通过[jQuery](http://api.jquery.com/on/)使用事件委托：

```
define(["a"], function (a) {

    var html = "<button>Click me!</button>";

    $("#buttonContainer").on("click", "button", a.myfunction);

}); 
```

其中 buttonContainer 是页面上已经存在的模板的容器。

# c# - mvc 验证日期/时间在未来至少 1 分钟

> ID：14945536
> 
> 赞同：5
> 
> 时间：2013-02-18T21:25:05.080
> 
> 标签：c#, asp.net-mvc, validation

我仍然在使用 MVC。

我见过几个类似的问题，一些自定义代码和各种方法，但我还没有找到适合我的东西。

我有一个搜索模型，它用部分视图内的结果填充 HTML 表。我的搜索结果模型中有这个：

```
public DateTime? BeginDateTime { get; set; } 
```

在控制器中设置为 DateTime.Now。用户可以在模型的 POST 调用中指定使用搜索结果数据运行任务的日期和时间。

我想做的是验证用户定义的日期/时间至少是未来 1 分钟。如果这可以作为客户端验证来完成，那会更好，但只要它有效，我就可以选择。

看法：

```
Begin update: @Html.TextBoxFor(o => o.BeginDateTime, new { id="txtBegin" }) 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-29T19:29:17.153

创建一个新属性：

```
public class FutureDateAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        return value != null && (DateTime)value > DateTime.Now;
    }
} 
```

现在在您的模型中设置此属性：

```
[FutureDate(ErrorMessage="Date should be in the future.")]
public DateTime Deadline { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T02:32:51.403

这是检查所选日期是否来自未来的另一种好方法。

```
public class FutureDate : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        DateTime dateTime;
        var isValid = DateTime.TryParseExact(
        //Getting the value from the user.
        Convert.ToString(value),

        //We want the user to enter date in this format.
        "d mmm yyyy",

        //It checks if the culture is us-en
        CultureInfo.CurrentCulture,

        //Mosh has no idea what this does.
        DateTimeStyles.None,

        //Output parameter.
        out dateTime);

        return (isValid && dateTime > DateTime.Now);
    }
} 
```

# jpa - jpql跨表查询

> ID：14945538
> 
> 赞同：0
> 
> 时间：2013-02-18T21:25:10.060
> 
> 标签：jpa, orm, jpql

假设我有以下表格：

```
Table A: id b-id
Table B: id property 
```

我可以用 JPQL 语言过滤表 A 的元素吗？

SELECT a FROM A a JOIN ab-id targetId WHERE targetId.property = : someValue

我想获取表 A 的元素，其中引用的 B 元素具有 property = someValue

如果我介绍第三张桌子

```
Table A: id b-id
Table B: id c-id
Table C: id property 
```

如何在 c.property=someValue 处获取 A 的元素？

我开始了解 ORM 的力量，但有些概念对我来说仍然很模糊。谢谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:25:53.053

JPQL 查询对实体而不是数据库表进行操作。我假设实体和持久属性的名称与给出的表和数据库列的名称相匹配。

因为所讨论的所有关系都是单值、一对一或多对一（每个`A`只连接到一个`B`（或可能不连接到任何一个），每个`B`都连接到一个`C`），所以不需要在查询中指定连接全部。

SELECT a FROM A a WHERE abcproperty = someValue

无需担心路径中的空值，因为如 JPA 2.0 规范中所述：

```
Path expression navigability is composed using “inner join” semantics. 
That is, if the value of a non-terminal field in the path expression is null, 
the path is considered to have no value, and does not participate in the 
determination of the result. 
```

同样不适用于集合值属性（一对多、多对多），因为无法通过路径表达式导航到它们的属性。

# spring - Spring 新手无法让控制器正常工作

> ID：14945542
> 
> 赞同：2
> 
> 时间：2013-02-18T21:25:25.677
> 
> 标签：spring, model-view-controller, controller

我是 Spring 新手，看过无数示例，无法弄清楚这个问题。我遇到的问题是，当我从 index.jsp 页面单击链接时，它不会转发到 hello.jsp 页面。我不知道为什么。我花了 2 天时间查找示例并尝试无数示例，试图确定问题出在哪里，但无济于事。我希望你能告诉我问题是什么。我正在使用 NetBeans 7.2、Tomcat 7、JDK 7、Spring 3.2.1。redirect.jsp 可以访问 index.jsp 页面，但单击 index.jsp 页面上的链接会给我一个 404 错误。

我理解它的方式，欢迎文件是redirect.jsp（不知道这个文件是如何处理的，为什么它不通过调度程序启动——因为它是一个jsp？）。这将重定向到一个 htm 文件。调度器找到一个与 index.htm 匹配的 url 映射并调用 indexController，它发送到 "index" 视图，即 "/WEB-INF/jsp/" + index + ".jsp"。

当 Tomcat 启动时，我看到以下消息：

```
Mapped URL path [/helloworld] onto handler 'helloWorldController'
Mapped URL path [/helloworld/*] onto handler 'helloWorldController'
Mapped URL path [/index.htm] onto handler 'indexController' 
```

单击 index.jsp 中的链接会给出以下警告消息：

```
No mapping found for HTTP request with URI [/WTSpring3/hello.htm] 
```

我的网络文件布局如下：

```
web
  WEB-INF
    jsp
      hello.jsp
      index.jsp
    applicationContext.xml
    dispatcher-servlet.xml
    web.xml
  redirect.jsp 
```

**重定向.jsp**

```
<% response.sendRedirect("index.htm"); %> 
```

**index.jsp**（这是我永远无法工作的。我不确定我的 Spring 设置链接是否不正确）。

```
<html><body>
<a href="hello.htm">Say Hello</a>
</body></html> 
```

**你好.jsp**

```
<html>
<body>${message}</body>
</html> 
```

**web.xml** - 注意这里的 url-pattern 是 *.htm，这是我在 index.jsp 中使用的。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"    
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**调度程序-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"

   xsi:schemaLocation="http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
   http://www.springframework.org/schema/aop
   http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
   http://www.springframework.org/schema/tx
   http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.2.xsd">

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

<context:component-scan base-package="net.mvp.spring3.controller" />

<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" />

</beans> 
```

**HelloWorldController.java**

```
 package net.mvp.spring3.controller;

    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.portlet.ModelAndView;

    @Controller
    public class HelloWorldController {

        @RequestMapping("hello")
        public ModelAndView helloWorld() {
            String message = "Hallo Asgard";
            return new ModelAndView("hello", "message", message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:58:50.203

向 dispatcher-servlet.xml 添加一个新的 bean

```
<bean id="helloWorldController" 
    class="net.mvp.spring3.controller.HelloWorldController" /> 
```

用下面给出的代码用 id urlMapping 替换你的 bean

```
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
    <props>
        <prop key="index.htm">indexController</prop>
         <prop key="hello.htm">helloWorldController</prop>
    </props>
</property> 
```

注意：**无需**更改`@RequestMapping("hello")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:49:22.527

您可以将 hello.htm 文件名更改为 hello2.jsp 或类似的东西吗？我的意思是，尝试使用与请求映射不同的名称。

```
@Controller
public class HelloWorldController {

    @RequestMapping("hello") // what the user calls for, the request
    public ModelAndView helloWorld() {
        String message = "Hallo Asgard";
        return new ModelAndView("hello2", "message", message); // the response
        //"hello" in ModelAndView is the same "hello" as the one in views.xml
    }
} 
```

你好2.jsp

```
<html>
<body>${message}</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:22:18.713

可能还有其他方法可以做到这一点，但这是我通过视图 bean 学到的。会发生以下情况：

1.  用户单击具有特定名称的链接，即*www.yoursite.com/hello*
2.  spring 在 requestmappings 中寻找“ *hello* ”。
3.  如果找到requestmapping，则执行相应的方法。
4.  该方法返回一个 ModelAndView，其中包含一个 url(WEB-INF/jsp/hello.jsp) 的别名 ( *hello* )，该别名必须在与您的 jsp 文件位于同一位置的 views.xml 中定义。
5.  最后，来自别名*hello*的 url(WEB-INF/jsp/hello.jsp) 的页面显示给用户。

views.xml 定义了不同 jsp 文件的 url 的别名。所以在那个文件中你说*hello*对应于*WEB-INF/jsp/hello.jsp*。

它看起来是这样的：

```
<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
     <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
     <property name="prefix" value="/WEB-INF/jsp/"/>
     <property name="suffix" value=".jsp"/>
</bean>

<bean id="excelViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="order" value="1"/>
    <property name="location" value="/WEB-INF/views.xml"/>
</bean>

<!-- in views.xml -->

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean id="hello" class="org.springframework.web.servlet.ModelAndView">
    <property name="hello" value="/WEB-INF/jsp/hello.jsp" />
</bean>

</beans> 
```

控制器中的请求映射看起来是一样的：

```
@Controller
public class HelloWorldController {

    @RequestMapping("hello") // what the user calls for, the request
    public ModelAndView helloWorld() {
        String message = "Hallo Asgard";
        return new ModelAndView("hello", "message", message); // the response
        //"hello" in ModelAndView is the same "hello" as the one in views.xml
    }
} 
```

我希望这可以帮助你。

# ios - 使用 NSDictionary valueForKey 查找对象与遍历 NSArray

> ID：14945543
> 
> 赞同：2
> 
> 时间：2013-02-18T21:25:27.317
> 
> 标签：ios, objective-c, performance, cocoa, nsarray

我正在为一些图像开发一个简单的 iOS 缓存系统。我需要跟踪 UIImage 本身及其标识符。现在，我试图找出访问正确缓存图像的更快/更有效的方法。

选项1：

```
for (CachedImage* image in [cachedImageArray]
{
  if ([[image identifier] isEqualToString:@"id_12345"]
  { 
    // use that image
  }
} 
```

选项 2：

```
UIImage* imageToRetrieve = [cachedImagesDictionary objectForKey:@"id_12345" 
```

使用一种方法或另一种方法有什么好处吗？如果是这样，它是不可忽略的吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T21:28:05.680

字典很可能会更快，因为它们会使用一些散列算法来提高检索效率（通常`O(1)`而不是`O(n)`）。如果缓存中的元素数量很大，这将是不可忽略的。

来自[CFDictionary.h](http://www.opensource.apple.com/source/CF/CF-368.18/Collections.subproj/CFDictionary.h)

> 计算复杂性
> 对于任何当前和未来的实现，字典中值的访问时间保证在最坏的情况下为 O(lg N)，但通常为 O(1)（恒定时间）。插入或删除操作通常也是常数时间，但在某些实现中最坏的情况是 O(N*lg N)。通过键访问值比直接访问值更快（如果有任何此类操作）。与具有相同数量值的数组相比，字典往往会使用更多的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T21:28:18.457

> 使用一种方法或另一种方法有什么好处吗？

是的。

```
UIImage *imageToRetrieve = [cachedImagesDictionary objectForKey:@"id_12345"]; 
```

**更具可读性**。

 **（哦，你是说性能？别担心。过早的优化几乎是万恶之源。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:36:58.760

就像 H2CO3 所说，我会选择选项 2 以提高可读性。

但是，如果它真的是一个缓存（即，如果内存紧张，您很高兴操作系统会自动从缓存中删除对象），我会使用[`NSCache`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)over `NSDictionary`：

```
// Setup the cache
UIImage *myImage = [UIImage imageNamed:@"blah"];
NSCache *imageCache = [[NSCache alloc] init];
[imageCache setObject:myImage forKey:@"id_12345"];   

// Sometime later...
UIImage* imageToRetrieve = [imageCache objectForKey:@"id_12345"]; 
```**

# android - 安卓保存截图

> ID：14945547
> 
> 赞同：0
> 
> 时间：2013-02-18T21:25:50.930
> 
> 标签：android

我试图做一个应用程序，每 1 秒为 android 平板电脑截屏一次，并在桌面应用程序中查看图像。我得到了帮助，但它只为我的应用程序截取屏幕截图。即使用户最小化应用程序，我也需要截取屏幕截图，因此在桌面应用程序中，它将继续跟踪用户在平板电脑上所做的事情。

感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:38:13.393

您可以检查[android-screenshot-library](http://code.google.com/p/android-screenshot-library/wiki/Usage)，它应该可以在没有 root 访问权限的情况下工作；但是它仍然有一些限制

AndroSS[也是](https://github.com/tstein/AndroSS)基于 Tegra 的 Android 手机的另一种选择

# java - 为安卓游戏创建“控制杆”？

> ID：14945551
> 
> 赞同：0
> 
> 时间：2013-02-18T21:26:01.903
> 
> 标签：java, android, game-physics

我正在尝试创建一个简单的 Android 游戏，一个 2D 动作射击游戏，屏幕上有 2 个控制杆（圆圈），左侧是运动控制，右侧是武器控制。方向由拇指相对于圆心的位置控制。

我一直在关注这个网站上的教程：[http](http://www.kilobolt.com/day-7-creating-an-android-game-from-start-to-finish.html) ://www.kilobolt.com/day-7-creating-an-android-game-from-start-to-finish.html但它只给了我基础从事于。我没有编程经验，所以我现在很迷茫。

我的移动只在 TOUCH_DOWN 事件上起作用，英雄移动到它应该移动的位置，但要改变方向，我必须抬起拇指并再次触摸圆圈。TOUCH_DRAGGED（或 ACTION_MOVE）坏了，因为如果我将手指拖过圆圈，角色移动得非常快。我想问题是正在处理太多的触摸事件，但我不知道如何解决它。

我怎样才能改变这一点，以便我可以在圆圈周围拖动我的拇指，英雄会立即改变它的方向，并始终保持它的速度不变？此外，无论您触摸的圆心有多近或多远，速度都应该相同。

```
private void updateRunning(List<TouchEvent> touchEvents, float deltaTime) {

    int len = touchEvents.size();

    for (int i = 0; i < len; i++) {
        TouchEvent event = touchEvents.get(i);  
        if (event.type == TouchEvent.TOUCH_DOWN || event.type == TouchEvent.TOUCH_DRAGGED) {

            if (inBounds(event, 50, 300, 150, 150, 'c')) {
                ctrl.setX(event.x);
                ctrl.setY(event.y);
                ctrl.direction();
                hero.move(ctrl.getDirX(), ctrl.getDirY());
            }
        }

        if (event.type == TouchEvent.TOUCH_UP) {

            if (inBounds(event, 0, 0, 35, 35,'r')) {
                pause();
            }
            hero.stopMove();
        }   
    }

    hero.update(); 
```

移动： hero 的 speedX 和 speedY 在每次 hero.update() 调用时被添加到 hero 的 centerX 和 centerY 中。

```
public void move(float x, float y) {

    speedX += x * MOVESPEED;
    speedY += y * MOVESPEED;

} 
```

此方法处理 x 和 y 速度。在 stackoverflow 上找到它，并且因为 touch_down 事件运行正常，我想它正在做它的工作。虽然我觉得这不完全是它应该的样子。L_STICK_C 是一个常数，值为 100 和 350（圆心）。

```
public void direction() {

        dir.x = x - L_STICK_C.x;
        dir.y = y - L_STICK_C.y;
        double hyp = Math.sqrt(dir.x * dir.x + dir.y * dir.y);
        dir.x = (float) (dir.x / hyp);
        dir.y = (float) (dir.y / hyp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:36:00.763

我建议您查看一些游戏编程教程。您通常不会直接从触摸输入移动角色。您将在游戏循环中设置一个游戏状态变量，该变量对应于拇指输入的位置。然后，您只需根据这些输入在每个游戏循环中更新一次英雄。这允许您将游戏输入控制代码和英雄代码分开，并使其可重用于游戏的其他部分。

编辑：

根据您的代码，每次拖动手指时，都会生成一堆拖动事件。所以你正在为每个事件增加你的角色速度。您可能应该只查看上次触摸事件中到中心的距离和输入的 x / y，而不是全部。

# plot - 我可以在左侧显示 QWT Plot 的 Z 轴间隔吗？

> ID：14945552
> 
> 赞同：0
> 
> 时间：2013-02-18T21:26:09.697
> 
> 标签：plot, qwt

我有一个彩色瀑布显示实现为 QwtPlot，其数据容器源自 QwtRasterData（`m_SpectroPlot`如下）。绘制的值对应于数据的 Z 轴，取自绘图右侧显示的颜色图。代码如下所示：

```
const QwtInterval zInterval = m_SpectroPlot->data()->interval( Qt::ZAxis );
QwtScaleWidget *zAxis = axisWidget(QwtPlot::yRight);
zAxis->setColorBarEnabled(true);
zAxis->setColorMap( zInterval, new ColorMap());
setAxisScale(QwtPlot::yRight, zInterval.minValue(), zInterval.maxValue() );
setAxisAutoScale(QwtPlot::yRight);
enableAxis(QwtPlot::yRight); 
```

一切正常，但我想在左侧有颜色图并隐藏 Y 轴值。当我在上面的代码中将 yRight 替换为 yLeft 时，颜色图的显示间隔被锁定为数据 Y 值的间隔。如何在 yLeft 轴上显示颜色图时保持当前的独立轴间隔？

换句话说，我想在 yLeft 轴上显示区间 Z0-Z1 的颜色图，而在绘图上绘制的实际 Y 值是 Y0-Y1。似乎我需要以某种方式告诉绘图使用 yRight 而不是 yLeft 来缩放 Y 轴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:01:10.030

在筛选了一些文档后，我找到了答案。需要告知数据附加到 yRight 轴而不是默认的 yLeft。

```
m_SpectroPlot->setYAxis(QwtPlot::yRight); 
```

# python - 如何从单词列表中创建正则表达式？

> ID：14945553
> 
> 赞同：8
> 
> 时间：2013-02-18T21:26:12.750
> 
> 标签：python, regex, validation, word

我有一个单词字典（实际上我有嵌套的动词变位字典，但这不相关），我想通过组合它们来制作一个正则表达式。

```
{
  'yo': 'hablaba',
  'tú': 'hablabas',
  'él': 'hablaba',
  'nosotros': 'hablábamos',
  'vosotros': 'hablabais',
  'ellos': 'hablaban',
  'vos': 'hablabas',
} 
```

...制作：

```
'habl((aba(s|is|n)?)|ábamos)' # I think that's right 
```

如果我不包括`'hablábamos'`它很容易 - 它们都是相同的前缀，我可以得到：

```
'hablaba(s|is|n)?' 
```

...但我想要一个一般形式。那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T21:59:49.023

是的，我相信这是可能的。

为了让您开始，这就是我分解问题的方式。

通过查找与所有拒绝值的开头匹配的最长可能字符串来计算根：

```
>>> root = ''
>>> for c in hablar['yo']:
...     if all(v.startswith(root + c) for v in hablar.itervalues()):
...         root += c
...     else:
...        break
... 
>>> root
'habl' 
```

剩下的话就是`list`结局。

```
>>> endings = [v[len(root):] for v in hablar.itervalues()]
>>> print endings
['abas', 'aba', 'abais', 'aba', '\xc3\xa1bamos', 'aban', 'abas'] 
```

然后，您可能想要清除重复项：

```
>>> unique_endings = set(endings)
>>> print unique_endings
set(['abas', 'abais', '\xc3\xa1bamos', 'aban', 'aba']) 
```

然后将这些结尾与管道连接在一起：

```
>>> conjoined_endings = '|'.join(unique_endings)
>>> print conjoined_endings
abas|abais|ábamos|aban|aba 
```

形成正则表达式是一件简单的事情，将根和 conjoined_endings 字符串组合在括号中：

```
>>> final_regex = '{}({})'.format(root, conjoined_endings)
>>> print final_regex
habl(abas|abais|ábamos|aban|aba) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:33:28.107

我认为您需要采用不那么聪明的方法

```
>>> x={
...   'yo': 'hablaba',
...   'tú': 'hablabas',
...   'él': 'hablaba',
...   'nosotros': 'hablábamos',
...   'vosotros': 'hablabais',
...   'ellos': 'hablaban',
...   'vos': 'hablabas',
... }
>>> x
{'t\xc3\xba': 'hablabas', 'yo': 'hablaba', 'vosotros': 'hablabais', '\xc3\xa9l': 'hablaba', 'nosotros': 'habl\xc3\xa1bamos', 'ellos': 'hablaban', 'vos': 'hablabas'}
>>> x.values
<built-in method values of dict object at 0x20e6490>
>>> x.values()
['hablabas', 'hablaba', 'hablabais', 'hablaba', 'habl\xc3\xa1bamos', 'hablaban', 'hablabas']
>>> "|".join(x.values())
'hablabas|hablaba|hablabais|hablaba|habl\xc3\xa1bamos|hablaban|hablabas' 
```

如果您只是使用交替运算符加入哈希值，那么它应该做您想做的事

# ios - ios 编程 - 在应用程序级别覆盖静态库中的静态库

> ID：14945561
> 
> 赞同：1
> 
> 时间：2013-02-18T21:26:34.547
> 
> 标签：ios, linker, static-libraries

我对 ios 编程领域非常陌生，使用链接器对我来说只是一个全新的世界。我会尽力准确地回答我的问题。

上下文：使用 xcode 在 ios 项目中链接静态库。

问题：

**问题成员**：3 个静态库。

libTestLibA.a

libTestLibB.a

libTestLibB_mine.a -- 与 libTestLibB.a 相同的功能 -- 相同的类/方法。

**问题描述**

我正在使用 libTestLibA.a 制作应用程序。

libTestLibA 有一些类依赖于 libTestLibB 中的一些类。因此 libTestLibA.a 本身已编译 libTestLibB.a。

现在，我有自己的名为 libTestLibB_mine 的库。它具有与 libTestLibB 完全相同的功能。相同功能的相同方法/类。我希望 libTestLibA 使用 libTestLibB_mine 而不是 libTestLibB。我刚刚为每个问题成员编译了静态库 (.a)，即 libTestLibA、libTestLibB 和 libTestLibB_mine。

**问题**：

当我编译我的应用程序时，我是否可以强制静态编译库 (libTestLibA.a) 使用另一个库 (libTestLibB_mine.a) 而不是它已经包含的库 (libTestLibB.a)？如果是，如何？如果没有，是否有一些解决方法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:47:48.500

如果 A 已经针对 B 进行了静态编译，那么我认为您不能用 B_mine 替换 B。但作为一种解决方法，我认为您可能在这里寻找的是“Method Swizzling”。它所做的是，在运行时，用另一个方法替换一个类的方法（拦截消息并将其定向到其他地方）。

以下链接应该对您有用。

*   [CocoaDev 方法混搭](http://cocoadev.com/wiki/MethodSwizzling)
*   [JRSwizzle - 使调配更容易的开源库](https://github.com/rentzsch/jrswizzle)
*   请务必阅读有关方法混用的[危险](https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c)。

# xslt - 无需更改输出的 XSLT 身份转换

> ID：14945562
> 
> 赞同：2
> 
> 时间：2013-02-18T21:26:38.277
> 
> 标签：xslt, xslt-1.0

是否可以进行 xslt 身份转换，其中从源头绝对没有任何变化？

当我使用以下模板时，输出中的标识和换行符发生了变化，我不想对源 xml 进行任何更改。

**XSLT**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>  
</xsl:template> 
```

**输入**

```
<S:Envelope
  xmlns:S="http://www.w3.org/2003/05/soap-envelope" 
  xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"
  xmlns:f123="http://www.fabrikam123.example/svc53">
  <S:Header>
    <wsa:MessageID>
      uuid:aaaabbbb-cccc-dddd-eeee-wwwwwwwwwww
    </wsa:MessageID>
    <wsa:RelatesTo>
      uuid:aaaabbbb-cccc-dddd-eeee-ffffffffffff
    </wsa:RelatesTo>
    <wsa:To S:mustUnderstand="1">
      http://business456.example/client1
    </wsa:To>
    <wsa:Action>http://fabrikam123.example/mail/DeleteAck</wsa:Action>
  </S:Header>
  <S:Body>
    <f123:DeleteAck/>
  </S:Body>
</S:Envelope> 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?><S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:f123="http://www.fabrikam123.example/svc53">
  <S:Header>
    <wsa:MessageID>
      uuid:aaaabbbb-cccc-dddd-eeee-wwwwwwwwwww
    </wsa:MessageID>
    <wsa:RelatesTo>
      uuid:aaaabbbb-cccc-dddd-eeee-ffffffffffff
    </wsa:RelatesTo>
    <wsa:To S:mustUnderstand="1">
      http://business456.example/client1
    </wsa:To>
    <wsa:Action>http://fabrikam123.example/mail/DeleteAck</wsa:Action>
  </S:Header>
  <S:Body>
    <f123:DeleteAck/>
  </S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:01:22.837

你不能。输入和输出 XML 将是“相同的”，因为它们生成相同的 XML 信息集，但它们不一定是逐字节相同的，这不是 XSLT 可以控制的。

你为什么需要这个？如果您想轻松比较 XML 文档，请考虑使用[XML Canonicalization](http://en.wikipedia.org/wiki/Canonical_XML)。许多 XML 库都有生成规范 XML 的方法，`xmllint`命令行工具可以轻松地从文件中生成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:43:51.290

XSLT 处理器的默认行为是在输入中保留空格，而我刚刚测试的处理器的行为与规范一致。

但是有问题的空格是输入文本节点中的空格。

start-tags 中的属性值规范之间的空白，以及文档的 prolog 和 epilog 中的项目（例如注释和处理指令）之间的空白不是文本节点，并且不受保留空间设置的影响。事实上，该空白也不是 XPath 数据模型的一部分，因此处理器几乎无法合法地保留它。

如果有问题的空格包含信息，您将需要重新审视词汇表的设计（让空格很重要真的是个坏主意）；如果只是您希望在属性值规范之间有换行符，您可能需要编写一个自定义序列化程序来在输出中插入这样的换行符和缩进。（如果您的动机是避免将 diff 程序与空白差异混淆，我的经验是您的选择是在 diff 之前对空白进行规范化，或者在面对空白变化时获得一个更加健壮的 diff 程序。）祝您好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:32:54.890

一般来说，不可能 100% 确信您将完全改变所有内容，因为 xslt 数据模型根本不会保留解析中的所有信息。例如，如果输入包含`&#x3C;`，则输出可能包含`&lt;`. 类似地，不保留 CDATA 部分 - 相邻的文本节点（CDATA 部分和普通文本模式）在解析时合并为一个，虽然您可以将处理器配置为使用 CDATA 来处理某些元素的内容，但您不能简单地将它们保留为他们是。

还有其他问题，例如数据模型不区分`<foo></foo>`和- 它们都表示相同的空元素，`<foo/>`并且`<foo />`输入中的任何一个都可以由输出中的任何一个表示。并且在您的示例中，开始标记内的属性之间的空白不会被保留。

但当然，这些差异都是 XML 工具不应该关心的所有事情，因为它们是表示完全相同的信息集的不同方式。

# c++ - 函数指针和类模板

> ID：14945564
> 
> 赞同：2
> 
> 时间：2013-02-18T21:26:48.010
> 
> 标签：c++, templates, function-pointers

我有一个模板类 CFoo 使用以下类型

```
enum My_Types {t1,t2}; 
```

具有由

```
template<My_Types T>
class CFoo
{
    public:
    CFoo()
    {
        std::cerr<<"ERROR:....";
        exit(1);
    }
};

template<>
class CFoo<t1>
{
    ....
}; 
```

另外我有一个使用 CFoo 对象作为参数的函数

```
template<class T>
void foo1 ( const T &CfooObj,...); 
```

现在我需要一个指向 foo1 的指针，所以我必须指定模板参数

```
void (*foo1_pointer) ( const CFoo< t1 >&,...); 
```

但以下似乎不正确（“没有匹配转换函数 foo1...”）：

```
foo1_pointer=&foo1; 
```

如何正确传递这个模板函数的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:33:58.617

这可能是由于您的 GCC 编译器的旧版本。此代码在 GCC 4.7.2、Clang 3.2、ICC 13.0.1 和 VS10 上编译良好：

```
#include <iostream>

enum My_Types {t1,t2};

template<My_Types T>
class CFoo { /* ... */ };

template<> class CFoo<t1> { /* ... */ };

template<class T>
void foo1 (const T &, ...) { /* ... */ }

int main()
{
    void (*foo1_pointer) (const CFoo< t1 >&, ...);
    foo1_pointer = &foo1;
} 
```

`foo1`当从分配给它的函数指针的类型中获取其地址时，编译器应该能够推断出模板参数。根据 C++11 标准的第 14.8.2.3/1 段：

> 模板参数可以从获取重载函数（13.4）地址时指定的类型推导出来。函数模板的函数类型和指定类型作为P和A的类型，推导如14.8.2.5所述。

此外，根据第 13.4/1 段：

> A use of an overloaded function name without arguments is resolved in certain contexts to a function, a pointer to function or a pointer to member function for a specific function from the overload set. *A function template name is considered to name a set of overloaded functions in such contexts. The function selected is the one whose type is identical to the function type of the target type required in the context.* [...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:30:44.080

你可以只写`foo1<CFoo<t1>>`。或者只是`foo1`（适用于 g++ 4.7.2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:32:26.183

作业应该是这样的：

```
foo1_pointer = &foo1<CFoo<t1>>; 
```

# cordova - Tastypie - Jquery 手机 - Phonegap 应用程序序列

> ID：14945566
> 
> 赞同：0
> 
> 时间：2013-02-18T21:26:48.900
> 
> 标签：cordova, jquery-mobile, tastypie

我计划使用 jQuery mobile 为我的 Web 应用程序制作一个 iPhone 应用程序。

我已经制作了我的 Tastypie API。我只是不确定从这里到哪里。

我应该先完成我的 jQuery 移动应用程序，然后再查看 Phonegap 吗？还是有其他方法可以制作 Phonegap 应用程序？我是唯一的开发人员，所以我想尽可能高效。

我正在考虑使用 Tastypie 和 jQuery mobile 制作一个网络应用程序，然后最后将其连接到 Phonegap。这是正确的方法吗？在这方面的任何建议对我都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:08:17.407

是的，我正在使用 Tastypie 进行移动开发。但我使用的是钛......无论如何，美味的馅饼是一个很好的资源..

如果您在 jquery 应用程序中使用 sweetpie 获取数据，那么 tastepie 是一个 api 服务。首先检查所有数据资源是否正常工作。atlast 你可以用 phonegap 编译它以获得最终输出。一旦编译完成，我们就无法更改任何代码，因为它就像二进制或 .app 代码..

因此，请确保您所有的数据提取工作正常，然后继续进行 phonegap ..

sweetpie 的主要优点是我们可以轻松访问 django 的数据模型并执行插入、获取等操作。

**应遵守的事项**

1.  使用美味的馅饼准备好所有数据。我的意思是你的后端模型。
2.  在您的 jquery 应用程序中使用它们。.
3.  彻底测试，最后你可以提交给phonegap ..

# jquery - 使用 javascript 存储未来数学的值

> ID：14945572
> 
> 赞同：0
> 
> 时间：2013-02-18T21:27:09.293
> 
> 标签：jquery, algorithm

晚上的绅士们，我遇到了一个艰难的问题，我不确定这是否是解决这个问题的正确方法，但这里有……基本上我正在创建一个动态日历，目前我正在处理月回功能（你点击箭头，它返回）我有一个 jquery 函数，可以在单击时启动其他函数，到目前为止一切正常，日历在一个月前重新绘制，月份的名称返回一个，但是我在设置年份时遇到问题1，进一步详细说明...月份名称由 ajax 查询（php）重绘，它运行良好，据我所知，我的 javascript 也应该很好用。基本上每当它回到一年时，我都会在其中存储一个数字`<div id = "placeholder>`用作参考点。这听起来很复杂，希望代码更有意义，如果有人能找到更好的方法，请告诉我：

jQuery：

```
$(document).ready(function() {

$("#changeMonthBack").click(function() {

//ajax query for month title
function(data) {
    //responce is here
    //set year (n)
        var placeholder = parseInt($("#placeholder").attr('class'),10);

        if(str == 1 && placeholder == ""){
            var d = new Date();
            var n = d.getFullYear();
            n = n - 1;
            $("#placeholder").addClass("1");
        }

        else if(str == 1 && placeholder != ""){
            var d = new Date();
            var n = d.getFullYear();
            n = n - placeholder;
            var temp = placeholder + 1;
            $("#placeholder").removeClass(""+placeholder+"");
            $("#placeholder").addClass(""+temp+"");
        }

        else{
            var d = new Date();
            var n = d.getFullYear();
        }

        $("#monthYear").html(data +" "+ n); 
```

HTML：

```
 <li title = "Previous Month"  id = "changeMonthBack"></li>
    <div id = "placeholder"></div><!-- holder for year js -->
    <div id = "monthYear"> 
```

目前到 2013 年之后，它给了我一个 NaN 错误。任何和所有的帮助都会很可爱。如果有更多信息可以帮助，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:01:12.647

如果你做这样的事情：

```
$(document).ready(function() {
    var placeholder = 0;

    $("#changeMonthBack").click(function() {
        //....
        function(data) {
            //responce is here
            //set year (n)
            if(str == 1 && placeholder === 0) {
                var d = new Date();
                var n = d.getFullYear();
                n = n - 1;
               placeholder = 1;
            }

            else if(str == 1 && placeholder > 0) {
                var d = new Date();
                var n = d.getFullYear();
                n = n - placeholder;
                placeholder++;
            }
        }
        //....
    });

}); 
```

您现在可以`placeholder`在`click`处理程序中（以及在更深的嵌套函数中）使用该变量，因为您的嵌套函数可以访问外部闭包中定义的变量。

现在，您无需为在 DOM 中存储数据而烦恼。

# jquery - 用于动画脚本的 jQuery 1.9 切换功能

> ID：14945573
> 
> 赞同：0
> 
> 时间：2013-02-18T21:27:12.283
> 
> 标签：jquery

我已经使用这个脚本很长时间了，而且我几乎不擅长 jQuery，所以当我看到它从 jQuery 的 v.1.9x 中删除时，我找不到对我有意义的修复（除了添加 migrate 插件修复它但添加了很多脚本）。任何帮助将不胜感激，因此我可以学习如何复制这种行为。谢谢！

```
$(document).ready(function () {
$("#switcher-wrapper .toggle").toggle(function () {
    $("#switcher-wrapper").animate({
        left: "-1px"
    });
    $(this).addClass("selected");
    return false;
}, function () {
    $("#switcher-wrapper").animate({
        left: "-242px"
    });
    $(this).removeClass("selected");
    return false;
}); 
```

});

这在 1.8.3 中有效，但在 1.9 jQuery 中却很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:32:50.380

Toggle 已从 1.9 中删除（[请参见此处](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)）

改为这样做：

```
$("body").on('click', '#switcher-wrapper .toggle' function () {

    if($(this).hasClass('selected')) {

        $("#switcher-wrapper").animate({
            left: "-242px"
        });
        $(this).removeClass("selected");

    } else {

       $("#switcher-wrapper").animate({
            left: "-1px"
        });
        $(this).addClass("selected");

    }
    return false;

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:14:47.620

这是为什么`.toggle()`不需要基于事件的一个很好的例子，实际上会导致重复代码，因为两个切换函数是分开的。

*   元素上已经有一个“selected”属性，因此不需要基于事件的`.toggle()`方法的内部状态管理。旧代码有两个状态指示不同步的风险，这是很常见的事情。
*   该事件位于包装器下方的 .toggle 元素上，因此将委托事件安装在包装器上是有意义的（除非您要删除包装器并在某个时候重写它）。
*   它可能使代码更易于重用，`e.delegateTarget`而不是重新指定包装器元素。委托目标是当前处理委托点击事件的元素，而不是被点击的最里面的目标。
*   在 .toggle 元素上快速点击可能会导致它来回弹跳一段时间。`.stop()`可以帮助防止这种情况。

```

```
$("#switcher-wrapper").on("click", ".toggle", function (e) {
   var selected = $(this).hasClass("selected");
   $(e.delegateTarget).stop().animate({
      left: selected? "-242px" : "-1px"
   });
   $(this).toggleClass("selected", !selected);
}); 
```

```

[http://jsfiddle.net/KmYES/](http://jsfiddle.net/KmYES/)

# python - string.find 不适用于列表

> ID：14945575
> 
> 赞同：0
> 
> 时间：2013-02-18T21:27:19.460
> 
> 标签：python, python-3.x

看到一个奇怪的问题`string.find`。

我有以下列表：

```
lstofpro = ["Brown, John", "Smith,Jon"]
keywordstring = "Something: Smith,Jon Account Number: 99999"

for p in lstofpro:
    if keywordstring.find(p.strip()) != -1:
        print ("Found a match for : %s" % p) 
```

即使值存在于`keyworstring`. 如果我更改`p.strip()`为“Smith,Jon”的硬编码值，它会成功找到它。

伙计们有什么线索可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:43:41.517

您是否有理由不能使用“in”运算符？我像这样尝试了你的算法并得到了预期的结果：

```
lstofpro = ["Brown, John", "Smith,Jon"]
keywordstring = "Something: Smith,Jon Account Number: 99999"

for p in lstofpro:
   if p in keywordstring:
      print ("Found a match for : %s" % p) 
```

# c# - c#checkedlistbox setitemcheckstate 工作但不会显示checkedindices

> ID：14945579
> 
> 赞同：0
> 
> 时间：2013-02-18T21:27:38.227
> 
> 标签：c#, winforms, .net-4.0, checkedlistbox

我正在使用 VS2012 更新使用 .NET 4 的旧项目。CheckedListBox 的版本**报告**版本为 4.0.0。我进行了搜索和阅读，一切正常，但控件显示**CheckedIndicies**。我可以在表单加载事件中以编程方式影响我想要的项目。 **在**加载事件完成之前，我可以确认**CheckedIndicies**是正确的。

```
private void InterviewPresentation_Load(object sender, EventArgs e)
    {
        short code = 0;
        for (int i = 0; i < clb_conditions.Items.Count - 1; i++)
        {
            code = ((ConditionListItem)clb_conditions.Items[i]).Code;
            if (code == 1 | code == 20)
            {
                clb_conditions.SetItemCheckState(i, CheckState.Checked);
            }
        }
        clb_conditions.Refresh();
    } 
```

我什至通过在**clb_conditions.Refresh()**中查看控件是否需要**Invalidate**和 Refresh 来显示应根据 **CheckedIndices**检查的两项。

我一直在论坛上走来走去，准备把头发拉出来。

# django - Django 框架：ListView 和 CreateView

> ID：14945585
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:28:06.937
> 
> 标签：django, django-models, django-forms, django-templates

我是 django 编程新手，我有一个简单的问题。

我有模特

```
class Dhcp(models.Model):

    class Meta:
        ordering = ('gateway',)
        verbose_name = _(u'DHCP Configuration')
        verbose_name_plural = _(u'DHCP Configurations')

    gateway = models.IPAddressField(_(u'Gateway'), null=True)
    dns_primary = models.IPAddressField(_(u'DNS Primary'), null=True)
    dns_second = models.IPAddressField(_(u'DNS Second'), blank=True)
    leases_time = models.IntegerField()
    nat = models.IPAddressField(_(u'NAT'), blank=True)
    max_time = models.IntegerField()

    def __unicode__(self):
        return self.gateway 
```

我的问题是：

我想列出我在数据库中的所有 dhcp 对象，并添加更多对象。但我想在同一个模板上这样做。

例如：如果我在数据库中有 3 个对象，则显示并显示添加更多 obj 的表单。当我从表单中添加一个对象时，我想显示添加的对象。

谢谢！

杜桑·里斯蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:48:52.080

查看[基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)，更具体地说是[ListView](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.list/ListView/)和[CreateView](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.edit/CreateView/)。这个问题经常出现，所以你应该在这里的某个地方找到答案。[看看这个帖子](https://stackoverflow.com/a/12883683/1428653)。

你正在寻找的是这样的：

```
class DHCPView(forms.CreateView):
    model = Dhcp
    template_name = "list_and_create_dhcp.html"

    def get_context_data(self, **kwargs):
        kwargs["object_list"] = Dhcp.objects.all()
        return super(DHCPView, self).get_context_data(**kwargs) 
```

# jira - 使用问题导航器显示 Jira 问题

> ID：14945588
> 
> 赞同：1
> 
> 时间：2013-02-18T21:28:15.693
> 
> 标签：jira, jql

下面是简单的 Jira JQL 搜索语句：

```
JqlQueryBuilder builder = JqlQueryBuilder.newBuilder();
builder.where().assignee().in("Dylan").and().unresolved();

Query query = builder.buildQuery(); 
```

然后我们有搜索结果：

```
SearchResults results = searchService.search(authenticationContext.getUser(),
            query, PagerFilter.getUnlimitedFilter());

List<Issue> issues = results.getIssues(); 
```

**问题**：我需要查找问题，使用多个标准过滤它们，并使用标准 Jira 问题导航器窗口向用户显示结果（我不想为它创建自己的速度模板）。我知道，可以将 JQL 查询字符串安全地链接到指向问题导航器的现有 URL。主要问题是我必须比较问题的两个日期字段（到期日期和解决方案），而这种比较不能用 JQL 完成。所以，我不能完全用 JQL 编写查询。我必须将 JQL 与标准 Java 混合（用于日期比较，这完全没有问题）。

所以，我的**主要问题**是：然后我有一个问题列表`List issues = results.getIssues()`，是否可以使用问题导航器显示它们？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:11:18.890

拥有后，`List issues`您可以创建一个大小相同的字符串数组，并将所有问题键保存到此查询结果中。比，您可以创建一个过滤器：

```
issueKey in (ABC-1,ABC-2,ABC-3,...) 
```

或通过网址：

```
https://your.jira.com/secure/IssueNavigator!executeAdvanced.jspa?jqlQuery=issuekey+in+%28%22ABC-1%22%2C%22ABC-2%22%29&runQuery=true&clear=true 
```

话虽如此，我不太确定您是否找不到使用 JQL 查询的更简单的解决方案，您想要实现什么？基本的 JQL 提供了一些日期搜索功能：

```
resolutionDate < "2013/01/01" and duedate < now() 
```

查看[JIRA 的高级搜索](https://confluence.atlassian.com/display/JIRA/Advanced+Searching#AdvancedSearching-IssueKey)以获取更多信息。

如果标准 JQL 还不够，请查看现有插件，例如[JQL Tricks Plugin](https://marketplace.atlassian.com/plugins/com.j-tricks.jql-plugin)。另一种选择可能是创建您自己的 JQL 搜索，查看[将 JQL 函数添加到 JIRA](https://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Adding+a+JQL+Function+to+JIRA)以获取有关此解决方案的更多信息。

如果您需要帮助并祝您好运，请告诉我！

# c# - 使用 C# 删除树枝

> ID：14945596
> 
> 赞同：0
> 
> 时间：2013-02-18T21:28:38.627
> 
> 标签：c#, tree

我在 C# 中有一个`List<Leaf>`命名。`items`叶具有以下属性：

```
public class Leaf
{
  public int ID { get; set; }

  public int ParentID { get; set; }

  public bool IsFlagged { get; set; }
} 
```

如果 Leaf 具有`IsFlagged`属性集，那么我需要将其从项目集合中删除。此外，我需要删除该 Leaf 实体的所有子级。我试图找出编写这段代码的最优雅的方式。目前，我在一个循环中有一个循环，但它看起来很草率。

有谁知道这样做的优雅方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:34:33.740

处理树的最合理（并且可能是“最优雅”）的方式是将其存储为树，而不是数组/列表。在这种情况下，您不需要处理步行元素来尝试找到所有孩子。

请注意，根据您的实际需求，树可能不是最好的数据结构，但是要删除具有所有子节点的节点，很难击败常规树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:37:52.717

也许：

```
void RemoveItAndChildren(Leaf leaf)
{
    foreach (Leaf item in items)
        if (item.ParentID == leaf.ID)
            RemoveItAndChildren(item);
    items.Remove(leaf);
} 
```

并使用：

```
foreach (Leaf leaf in items)
    if (leaf.IsFlagged)
        RemoveItAndChildren(leaf); 
```

**请注意**，正如在上面的评论中，类似下面的内容可能更合适：

```
public class Leaf2
{
    List<Leaf2> Children;
    bool IsFlagged { get; set; }
} 
```

# 32-bit - （32 位应用程序的）32 位寻址限制是否包括专用视频内存？

> ID：14945597
> 
> 赞同：0
> 
> 时间：2013-02-18T21:28:42.300
> 
> 标签：32-bit, ram, overlap, memory-address, video-card

**32 位应用程序能否在系统 RAM 和视频 RAM 之间使用超过 4GB 的空间？**

背景：一些游戏（例如，天际）是在 32 位架构下编译的。我正在运行一个 64 位系统，主板上有 16GB DDR3，显卡上有 4GB GDDR5。***程序的 32 位架构是否将其寻址能力限制为 4GB 的总空间，或者是图形内存（在图形卡上）在一个单独的地址空间中，从而巧妙地允许可寻址内存的总和大于4GB？***

我问是因为我无法知道任务管理器中的分页量和GPU-Z中使用的图形内存量是否是独立集（这似乎表明它们是单独寻址的，因为总和可能大于4GB )，或者它们之间是否存在重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T09:55:46.317

游戏的编译位置无关紧要。这取决于您的操作系统架构。当您使用 64 位时，它将利用所有内存

# c++ - Qt ActiveX dynamicCall 返回值始终为空

> ID：14945598
> 
> 赞同：2
> 
> 时间：2013-02-18T21:28:43.250
> 
> 标签：c++, qt, activex, qstring, bstr

这是对上一个问题的跟进：[Qt ActiveX](https://bugreports.qt-project.org/browse/QTBUG-13845?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

我正在尝试在我的程序中使用 ActiveX 控件。

```
QAxWidget* mAX = new QAxWidget();
mAX->setControl("{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}"); 
```

我知道有一个类似下面的功能（使用`getDocumentation()`）：

```
SendCommand(QString input, QString& output) 
```

但是当我尝试执行它时：

```
QString returString;
mAX->dynamicCall("SendCommand(QString,QString&)","something",returnString); 
```

我总是得到：

```
returString = ""; 
```

我在网上搜索并看到他们的错误跟踪器上报告了一个类似的错误。它似乎还没有修复：

[通过 dynamicCall() 调用函数不会通过 QVariant 返回值](https://bugreports.qt-project.org/browse/QTBUG-13845?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

还有一篇似乎有人遇到同样问题的帖子：

[QAxObject 和 dynamicCall](http://qt-project.org/forums/viewthread/9957)

有人知道解决方案/解决方法吗？

编辑：

原来的功能是`SendCommand(LPCTSTR command,BSTR* ret)`。

`BSTR*`处理方式可能存在问题`&QString`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T12:13:50.590

你可以使用这个解决方案

```
QString strRetVal;
QVariant returnValue("");
QVariant param1("something");
QList<QVariant> inplist;
inplist<<param1;
inplist<<returnValue;
mAX->dynamicCall("SendCommand(QString,QString&)",inplist );
strRetVal=inplist.at(1).toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T23:24:59.420

通过查看[文档](http://doc.qt.digia.com/stable/qaxbase.html)，您没有正确调用该函数。您正在传入 a `QString`，但该函数需要 a `QVariant`。由于`QVariant`没有显式构造函数（按设计），因此会创建一个临时 QVariant 并将其传递给`dynamicCall`. 因此，您`returnValue`没有得到更新。

```
QVariant dynamicCall( const char * function, const QVariant & var1 = QVariant(), ...
                    , const QVariant & var8 = QVariant() ) 
```

我认为当您改用 QVariant 时，一切都会奏效。

```
 QVariant returnValue;
 mAX->dynamicCall("SendCommand(QString,QString&)", "something", returnValue ); 
```

# php - 使用 dataUrl 向服务器发送附加变量

> ID：14945600
> 
> 赞同：0
> 
> 时间：2013-02-18T21:28:51.383
> 
> 标签：php, jqgrid

这应该是一个简单的修复，但我只是无法找到任何关于它的东西。

我同时使用 postData 和 editData 将变量 POST 到服务器以进行*表单编辑*。此变量在开关中用于选择适当的功能。 **这个 php 包含项目的所有功能。我想避免有许多不同的 php 页面。**

所以这一切都很好，但我找不到为 dataUrl 做同样事情的方法。我能够找到的一个线索是使用 ajaxSelectOptions，特别是数据选项。如果这是解决此问题的适当方法，那么使用它的方法是什么？像这样？：

```
ajaxSelectOptions:{
    contentType: "application/json",
    dataType:'json',
    type:'POST',
    action: function(){ 
        return 'popCodeAdjust';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:32:57.260

一般来说，您可以使用`data`. `ajaxSelectOptions`代码凸轮看起来像

```
ajaxSelectOptions: {
    type: "POST",
    data: {
        action: "popCodeAdjust";
    }
} 
```

或者

```
ajaxSelectOptions: {
    type: "POST",
    data: {
        action: function () {
            return "popCodeAdjust";
        }
    }
} 
```

见[这里](https://stackoverflow.com/a/8067258/315935)或[这里](https://stackoverflow.com/a/8150307/315935)。

如果您确实需要**以 JSON 格式发送数据，**则可能会出现问题。在这种情况下，您可能需要序列化参数数据的*值*`JSON.stringify({action: actionValue})`（如）或*带有参数名称的值*（如`action: JSON.stringify(actionValue)`）。请参阅案例中 WCF 方法中角色扮演属性（等）[的答案。](https://stackoverflow.com/a/5498450/315935)`BodyStyle``WebMessageBodyStyle.Wrapped``WebMessageBodyStyle.WrappedResponse`

在 jqGrid 4.4.2 或更高版本（请参阅[答案](https://stackoverflow.com/a/13913788/315935)、[我的拉取请求](https://github.com/tonytomov/jqGrid/pull/404)和[修复](https://github.com/tonytomov/jqGrid/commit/3e2a0ada37357e717f17acfcfd0289a7a0800427)）中，您可以将`postData`其用作函数。您可以在其中定义它`ajaxSelectOptions`

```
ajaxSelectOptions: {
    contentType: "application/json",
    dataType: "json",
    type: "POST",
    postData: function (rowid, value, name) {
        return JSON.stringify({action: "popCodeAdjust"});
        //or depend on the relinquishment of the server side
        //return {action: JSON.stringify("popCodeAdjust")});
    }
} 
```

您可以`postData`在内部指定`editoptions`（参见[此处](https://github.com/tonytomov/jqGrid/pull/404)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:10:33.040

怎么样？

```
$.ajax({
    type: 'POST',
    url: 'url',
    data: { varName: JSON.stringify(arrayValues) },
    dataType: 'json',
    success: function(msg) {...},
    error: function(res, status, exeption) {...}
}); 
```

服务器端：

```
$var = json_decode($_POST['varName'], true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:03:55.370

在您的网格设置中，它将是：

```
postData: { KeyName: KeyValue }, 
```

你会看到这个额外的参数随着你的 POST 消失。

下面的示例将设置 postData 值（如果要更改），然后触发网格的重新加载。

```
$('#gridName').jqGrid('setGridParam', { postData: { UserName: userName }).trigger('reloadGrid', [{ page: 1}]); 
```

# php - 从数组值更新查询

> ID：14945601
> 
> 赞同：0
> 
> 时间：2013-02-18T21:28:51.803
> 
> 标签：php, codeigniter

我想通过codeigniter上的数组数据更新数据库表中的值，但我有输出错误。如何解决？

**PHP：**

```
$mainpage = $this - > input - > post('mainpage');
$data2 = array();
foreach($mainpage as $idx = > $name) {
    $data2[] = array(
        'mainpage' = > $name[0],
        'subpage' = > json_encode($this - > input - > post('subpage')[$idx]),
        'service' = > json_encode($this - > input - > post('tdadeps')[$idx]),
        'id_relation' = > $id_relation, );
    $this - > db - > where('id_relation', $id_relation);
    $data22 = $this - > db - > update('access_level', $data2);
} 
```

**输出错误：**

```
A PHP Error was encountered
Severity: Notice
Message: Array to string conversion
Filename: mysql/mysql_driver.php
Line Number: 612

A Database Error Occurred
Error Number: 1054
Unknown column '0' in 'field list'
UPDATE `access_level` SET `0` = Array WHERE `id_relation` = '2'
Filename: W:\system\database\DB_driver.php
Line Number: 330 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:40:18.597

我想看更多代码，但试试这个代码：

```
$mainpage = $this - > input - > post('mainpage');
$data2 = array();
foreach($mainpage as $idx = > $name) {
    $data2 = array(
        'mainpage' = > $name[0],
        'subpage' = > json_encode($this - > input - > post('subpage')[$idx]),
        'service' = > json_encode($this - > input - > post('tdadeps')[$idx]),
        'id_relation' = > $id_relation);
    $this - > db - > where('id_relation', $id_relation);
    $data22 = $this - > db - > update('access_level', $data2);
} 
```

让我知道是否有效

# python - SQS：如何使用 Python 的 boto 库读取 SQS 消息的发送时间

> ID：14945604
> 
> 赞同：7
> 
> 时间：2013-02-18T21:29:13.053
> 
> 标签：python, amazon-web-services, boto, amazon-sqs

当我在 AWS 控制台的 SQS 消息视图中查看消息时，我可以看到消息有发送时间。如何使用 Python 的 boto 库读取这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:57:47.530

当您从 boto 的队列中读取消息时，您会得到一个`Message`对象。此对象具有名为 的 at 属性`attributes`。它是 SQS 保存的关于此消息的属性字典。它包括`SentTimestamp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T18:17:39.427

您可以使用*get_message()*方法的*attributes*参数。请参阅[文档](http://docs.pythonboto.org/en/latest/ref/sqs.html#boto.sqs.queue.Queue.get_messages)。

 *```
queue.get_messages(attributes=['All']) 
```

该[文档](http://docs.pythonboto.org/en/latest/ref/sqs.html#boto.sqs.queue.Queue.read)还说您可以使用*read()*方法执行此操作，但现在已损坏。我在项目站点上为此打开了一个问题：[https](https://github.com/boto/boto/issues/2699) ://github.com/boto/boto/issues/2699 。*

# c# - 字符串不可分配给参数类型 Excel.XIFixedFormatType

> ID：14945609
> 
> 赞同：0
> 
> 时间：2013-02-18T21:29:23.440
> 
> 标签：c#, asp.net, winforms, excel

我正在将一个 excel 文件转换为一个 pdf 文件，但是当我传入用于导出的字符串时，我得到了这个错误（红色下划线 convertFilePath）`Argument type string is not assignable to parameter type Microsoft.Office.Interop.Excel.XIFixedFormatType`

```
var convertFileId = Guid.NewGuid();
var convertFilePath = @"c:\temp\" + convertFileId + ".pdf";

public Microsoft.Office.Interop.Excel.Workbook excelWorkbook { get; set; }
    void ExcelToPdf(string convertFilePath)
    {
        Microsoft.Office.Interop.Excel.Application appWord = new Microsoft.Office.Interop.Excel.Application();
        excelWorkbook = appWord.Workbooks.Open(DocumentUNCPath.Text);

        excelWorkbook.ExportAsFixedFormat(convertFilePath, WdExportFormat.wdExportFormatPDF);
        excelWorkbook.Close();
        appWord.Quit();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:53:04.623

`XlFixedFormatType`是一个枚举，您应该传递一个有效值。

有关详细信息，请参阅[有关 XlFixedFormatType](http://msdn.microsoft.com/en-us/library/office/bb241296%28v=office.12%29.aspx)的 MSDN和[有关 ExportAsFixedFormat 的 MSDN](http://msdn.microsoft.com/en-us/library/office/bb238907%28v=office.12%29.aspx)。

例子：

```
excelWorkbook.ExportAsFixedFormat(xlTypePdf, Filename:=filename); 
```

# dojo - Dojo 控制台错误对象为空

> ID：14945616
> 
> 赞同：3
> 
> 时间：2013-02-18T21:29:42.147
> 
> 标签：dojo, firebug, error-reporting

突然间，Dojo（来自 Google CDN 的 1.8.3）的错误吐出空错误，这使得调试变得非常困难。例如，如果我`require`在使用它之前忘记了依赖，我会得到通常的

```
> dojo/parser::parse() error ReferenceError {} 
```

...在错误控制台中，但我记得在`ReferenceError`（存在旋转箭头）中获得了更多信息，给了我错误的论点以及消息，使我很容易弄清楚我做错了什么。

我`isDebug : true`在我的 dojoConfig 中有，但它只是不想再告诉我任何事情。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:49:26.507

我在使用 Dojo 1.8.3 时也遇到了同样的问题。当我关闭我的开发人员工具的控制台然后重新打开它时，错误会出现预期的下降和更多详细信息。似乎很愚蠢，但试一试，看看是否可以为您“修复”它。我计划稍后再深入研究一下，所以如果我发现任何其他细节，我会确保用他们更新我的答案。

# uml - 用例图 - 扩展用例，但从不使用父用例？

> ID：14945618
> 
> 赞同：1
> 
> 时间：2013-02-18T21:30:00.670
> 
> 标签：uml, use-case

我有一个父用例。我不想让用户使用父用例。我只希望用户可以访问子用例。将其视为 Java 中的抽象类。你永远不能实例化一个抽象类。用例图允许这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T20:00:35.233

@observer 的答案几乎是完美的（我已经 +1 了 :)），除了他没有完全回答你的问题。

在您的情况下，您可能会做的事情如下：

![在此处输入图像描述](../Images/2fbf8c74eef45cd2ab555cd4759445be.png)

*   `Actor0`将设法`Pay bill`，无论是`Pay with credit card`或`Pay with PayPal`。
*   另一方面，`Actor1`将只能`Pay with credit card`。

意思是：

1.  使用泛化来建模“父”用例与其“子”之间的关系。
2.  让您想要“访问”的参与者只有一个孩子，只与那个用例相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T09:39:15.623

是的，可以有“父”或“子”用例。用于对这种关系建模的连接器称为`generalization`. 请参见此处：[用例泛化与扩展](https://stackoverflow.com/questions/15133595/use-case-generalization-versus-extension/15135858#15135858)此处还给出了一个包含图表的示例。

请注意：如果您对一个用例进行泛化建模，那么这与一个用例不同（！）`<<extend>>`。

您可以在文本用例描述中添加有关调用约束的注释。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-19T21:32:46.363

是的！（也是最终的，因为 UseCase 是分类器的特化）。

引用统一建模语言 (OMG UML)，上层结构：

**概括**

*   *UseCase*（来自 UseCases）专门研究*BehavioredClassifier*（来自 BasicBehaviors，Communications）。

*   *BehavioredClassifier*专门用于*分类*器（来自 Kernel、Dependencies、PowerTypes、Interfaces）。

**属性**：*分类*器具有以下属性：

*   *isAbstract*：布尔值（如果为真，则分类器不提供完整的声明，通常无法实例化）。

*   *isFinalSpecialization* : 布尔值（如果为真，分类器不能通过泛化来特化）。

**约束**：分类器只能专门化有效类型的分类器。

```
 self.parents()->forAll(c | self.maySpecializeType(c)) 
```

**附加操作**

查询`maySpecializeType()`确定此分类器是否可能与指定类型的分类器具有泛化关系。默认情况下，分类器可以专门化相同或更通用类型的分类器。

```
Classifier::maySpecializeType(c : Classifier) : Boolean;
maySpecializeType = self.oclIsKindOf(c.oclType) 
```

最后但并非最不重要的一点是，即使它说`maySpecializeType()`“旨在由具有不同专业化约束的分类器重新定义”......`maySpecializeType()`对于*UseCase*或*BehavioredClassifier*没有重新定义。

来源：统一建模语言 (OMG UML)，上层结构，版本 2.4.1。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-22T11:06:53.013

你的术语有点不对劲，但总的来说答案是肯定的。

没有“父”或“子”用例之类的术语。通常，用例是由用户触发的行为。您似乎需要的是由`include`基础和包含的用例之间的关系来描述的。它用于提取公共功能块以供不同用例重用。例如：![用例包含关系示例](../Images/3027c73d9f17831536efbdc17e130816.png)

在此处查看更多信息：[用例图中的包含和扩展有什么区别？](https://stackoverflow.com/questions/1696927/whats-is-the-difference-between-include-and-extend-in-use-case-diagram)

# javascript - 乱序执行 - 不涉及 Ajax

> ID：14945620
> 
> 赞同：0
> 
> 时间：2013-02-18T21:30:05.980
> 
> 标签：javascript, jquery

我在 javascript 中遇到了一些乱序执行，它与任何 ajax 调用等无关。大部分代码可能是缓慢的 DOM 操作，然后是方法调用。在每种情况下，函数调用都会在 DOM 操作完成之前被触发。

这是我的代码：

```
$(this).parents('dd').siblings('dd').each(function(){
  var filter_name = $(this).attr('data-filter-type');
  if ($(this).hasClass('selected')) {
    $(this).removeClass('selected', function(){
      if ($(this).hasClass('date')) {
        $('form[name="filter-form"] input[name="from"]').remove();
        $('form[name="filter-form"] input[name="to"]').remove();
      } else {
        $('form[name="filter-form"] input[name="' + filter_name + '"]').remove();
      }
      console.log('removed');
    });
  }
});

var filter_type = $(this).parents('dd').attr('data-filter-type');
var filter_input = 'form[name="filter-form"] input[name="' + filter_type + '"]';
if ($(filter_input).length > 0) {
  $(filter_input).val(filter_value);
} else {
  $('form[name="filter-form"]').append('<input type="hidden" name="' + filter_type + '" value="true">');
}

doStuff($(this)); 
```

在我的控制台中，我在看到调试之前看到了 doStuff 的结果。

有人知道如何让函数调用等待吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:58:39.843

There is an overload of `.removeClass` that takes a function, but it's not a callback function (that operation is completed synchronously). I'd recommend removing the function argument to `removeClass` and placing the code immediately after that call:

```
$(this).parents('dd').siblings('dd').each(function(){
    var filter_name = $(this).attr('data-filter-type');
    if ($(this).hasClass('selected')) {
        $(this).removeClass('selected');
        if ($(this).hasClass('date')) {
            $('form[name="filter-form"] input[name="from"]').remove();
            $('form[name="filter-form"] input[name="to"]').remove();
        } else {
            $('form[name="filter-form"] input[name="' + filter_name + '"]').remove();
        }
        console.log('removed');
    }
});

var filter_type = $(this).parents('dd').attr('data-filter-type');
var filter_input = 'form[name="filter-form"] input[name="' + filter_type + '"]';

if ($(filter_input).length > 0) {
    $(filter_input).val(filter_value);
} else {
    $('form[name="filter-form"]').append('<input type="hidden" name="' + filter_type + '" value="true">');
}

doStuff($(this)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:36:59.420

我会将所有 DOM 操作包装到一个接受回调作为参数的函数中：

```
var manipulateDOM = function(callback){
...
if(typeof callback === "function")callback();
} 
```

并这样称呼它：

```
manipulateDOM(function(){
   doStuff(param);//I am not sure about the context so you need to figure out the value of param
}) 
```

# if-statement - 带有“或”条件的 Prolog if/else 语句

> ID：14945623
> 
> 赞同：1
> 
> 时间：2013-02-18T21:30:23.737
> 
> 标签：if-statement, prolog

我是 Prolog 的新手，我正在尝试编写带有“或”条件的 if/else 语句。所以为了演示，我想要类似的东西：

```
 gothrough([H|T], B, C):-
    (  T == [] or H == 'then'  %if either the tail is an empty list or if H == "then", do the following%
    -> append(H,B,B), outputs(B,C)
    ;  append(H,B,B), gothrough(T, B, C) %else%
    ). 
```

但是，此实现不起作用；有没有明显的方法可以做到这一点，我没有得到？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:10:55.263

在 Prolog 中，使用“;” for or and "," for and.

```
gothrough([H|T], B, C):-
    (  (T == [] ; H == 'then')  %if either the tail is an empty list or if H == "then", do the following%
    -> append(H,B,B), outputs(B,C)
    ;  append(H,B,B), gothrough(T, B, C) %else%
    ). 
```

请注意，当 H 与 [] 不同时， **append(H, B, B)**总是失败。

你可以写

```
 gothrough([H|T], B, C):-
    append(H,B,B), 
    (  (T == [] ; H == 'then')  %if either the tail is an empty list or if H == "then", do the following%
    -> outputs(B,C)
    ;  gothrough(T, B, C) %else%
    ). 
```

# ruby-on-rails - 用于监控 Rails 部署的工具

> ID：14945625
> 
> 赞同：0
> 
> 时间：2013-02-18T21:30:37.960
> 
> 标签：ruby-on-rails, deployment, capistrano

您知道任何用于监控 Rails 应用程序部署的工具吗？如果我们假设我们正在使用 capistrano，我们应该至少知道每次部署的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:39:04.897

像这样的工具？[http://newrelic.com/](http://newrelic.com/)

SaaS 还是自托管？

问候，

# python - 等于不等于

> ID：14945630
> 
> 赞同：3
> 
> 时间：2013-02-18T21:31:08.340
> 
> 标签：python, equals

无法让 python 测验程序工作，当“用户答案”为“正确答案”时，如果循环不能正常工作，并声明它们不相等，即使它们是相等的。我想知道这是否是比较保存在列表中的字符串的问题，但我真的不知道该怎么做才能修复它。任何帮助将非常感激。

谢谢

```
import sys

print ("Game started")
questions = ["What does RAD stand for?",
            "Why is RAD faster than other development methods?",
            "Name one of the 3 requirements for a user friendly system",
            "What is an efficient design?",
            "What is the definition of a validation method?"]

answers = ["A - Random Applications Development, B - Recently Available Diskspace, C - Rapid Applications Development",
            "A - Prototyping is faster than creating a finished product, B - Through the use of CASE tools, C - As end user evaluates before the dev team",
            "A - Efficient design, B - Intonated design, C - Aesthetic design",
            "A - One which makes best use of available facilities, B - One which allows the user to input data accurately, C - One which the end user is comfortable with",
            "A - A rejection of data which occurs because input breaks predetermined criteria, B - A double entry of data to ensure it is accurate, C - An adaption to cope with a change external to the system"]

correctanswers = ["C", "B", "A", "A", "A"]
score = 0
lives = 4
z = 0

for i in range(len(questions)):
    if lives > 0:
        print (questions[z])
        print (answers[z])
        useranswer = (input("Please enter the correct answer's letter here: "))
        correctanswer = correctanswers[z]
        if (useranswer) is (correctanswer):     //line im guessing the problem occurs on
            print("Correct, well done!")
            score = score + 1
        else:
            print("Incorrect, sorry. The correct answer was;  " + correctanswer)
            lives = lives - 1
            print("You have, " + str(lives) + " lives remaining")
        z = z + 1
    else:
        print("End of game, no lives remaining")
        sys.exit()

print("Well done, you scored" + int(score) + "//" + int(len(questions))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T21:32:39.203

您应该`==`用于比较：

```
if useranswer == correctanswer: 
```

`is`运算符*进行身份比较*。并且`==`, `>`, 运算符进行*值比较*，这就是您所需要的。

* * *

对于两个对象，`obj1`和`obj2`：

```
obj1 is obj2  iff id(obj1) == id(obj2)  # iff means `if and only if`. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T21:32:30.333

*对象身份*的运算符`is`和`is not`测试：是*当且仅当*和*是同一个对象*。而运算符、、、、和比较两个对象的*值*。*`x is y``true` *`x``y` *`<``>``==``>=``<=``!=`***

 ***所以...

```
 if (useranswer) is (correctanswer):     //line im guessing the problem occurs on 
```

应该...

```
 if useranswer == correctanswer: 
```

由于您要检查用户的答案是否与正确答案*匹配。*它们在内存中不是同一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:38:28.807

`is`操作员测试对象身份。检查[文档](http://docs.python.org/2/library/operator.html)。我希望[这个 SO 线程](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)也可能有所帮助。***

# regex - 在 Perl 中管理和记录多行替换

> ID：14945632
> 
> 赞同：1
> 
> 时间：2013-02-18T21:31:21.470
> 
> 标签：regex, perl, string-substitution

我最近一直在学习`\x`Perl Best Practices 中的修饰符，使您能够做一些很酷的事情，比如多行缩进和文档：

```
$txt =~ m/^                     # anchor at beginning of line
      The\ quick\ (\w+)\ fox    # fox adjective
      \ (\w+)\ over             # fox action verb
      \ the\ (\w+) dog          # dog adjective
      (?:                       # whitespace-trimmed comment:
        \s* \# \s*              #   whitespace and comment token
        (.*?)                   #   captured comment text; non-greedy!
        \s*                     #   any trailing whitespace
      )?                        # this is all optional
      $                         # end of line anchor
     /x;                        # allow whitespace 
```

但是，我无法为查找/替换字符串替换做同样的事情？是否应该使用其他类似的最佳实践来更有效地管理复杂的替换？

*编辑*以这个为例：

```
$test =~ s/(src\s*=\s*['"]?)(.*?\.(jpg|gif|png))/${1}something$2/sig; 
```

是否有类似的方法可以使用多行/空白进行记录以提高可读性？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:50:00.370

由于您选择不提供不起作用的示例，因此我将对您可能做错的地方提供一些猜测：

*   请注意，分隔符（在您的情况下`/`）不能出现在正则表达式内的任何注释中，因为那样它们将指示正则表达式的结尾。例如，这个：

    ```
    s/foo # this is interesting and/or cool
     /bar/x 
    ```

    将不起作用，因为正则表达式由 and 之间的斜杠`and`终止`or`。

*   请注意，这`/x`不适用于替换字符串，仅适用于正则表达式本身。例如这个：

    ```
    s/foo/bar # I love the word bar/x 
    ```

    将替换`foo`为`bar # I love the word bar`.

    如果您真的希望能够在替换字符串中添加注释，那么我想您可以使用替换*表达式*，使用`/e`标志。这将使您可以使用 Perl 的完整语法。例如：

    ```
    s/foo/'bar' # I love the word bar/e 
    ```

*这*是一个有效的示例：

```
$test =~
  s/
    # the regex to replace:
    (src\s*=\s*['"]?)      # src=' or src=" (plus optional whitespace)
    (.*?\.(jpg|gif|png))   # the URI of the JPEG or GIF or PNG image
  /
    # the string to replace it with:
    $1 .                   # src=' or src=" (unchanged)
    'something' .          # insert 'something' at the start of the URI
    $2                     # the original URI
  /sige; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:07:14.187

如果我们只添加`/x`，我们可以很容易地分解正则表达式部分，包括允许注释。

```
my $test = '<img src = "http://www.somewhere.com/im/alright/jack/keep/your/hands/off/of/my/stack.gif" />';

$test =~ s/
    ( src \s* = \s* ['"]? ) # a src attribute ...
    ( .*? 
      \. (jpg|gif|png)      # to an image file type, either jpeg, gif or png
    )
    /$1something$2/sigx     # put 'something' in front of it
    ; 
```

`/e`如果要拆分替换，则必须使用评估开关 ( )。但是匹配部分的多行工作正​​常。

请注意，我不必分隔`$1`，因为`$1something`无论如何它都不是有效的标识符，所以至少我的 Perl 版本不会混淆。

对于我评估的大多数替换，我更喜欢括号样式的替换分隔符：

```
$test =~ s{
      ( src \s* = \s* ['"]? ) # a src attribute ... '
      ( .*? 
        \. (jpg|gif|png)      # to an image file type, either jpeg, gif or png
      )
    }{
        $1 . 'something' . $2
    }sigxe 
    ; 
```

只是为了让它看起来更像代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:51:36.487

好

```
$test =~ s/(src\s*=\s*['"]?)    # first group
        (.*?\.(jpg|gif|png))        # second group
        /${1}something$2/sigx; 
```

应该而且*确实*有效。当然，你不能在正确的部分使用它，除非你使用类似的东西：

```
$test =~ s/(src\s*=\s*['"]?)    # first group
        (.*?\.(jpg|gif|png))        # second group
        /
        $1              # Get 1st group
        . "something"   # Append ...
        . $2            # Get 2d group
        /sigxe; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:05:43.050

```
s/foo/bar/ 
```

可以写成

```
s/
   foo     # foo
/
   "bar"   # bar
/xe 
```

*   `/x`在模式中允许空格
*   `/e`允许替换表达式中的代码

# javascript - 带有 jQ uery 动画的慢速/无响应动画

> ID：14945633
> 
> 赞同：1
> 
> 时间：2013-02-18T21:31:36.187
> 
> 标签：javascript, jquery, function, scroll, jquery-animate

我正在编写一个小的 jQuery 函数，我似乎遇到了麻烦。

我在这里尝试做的是当用户向下滚动页面 90px 时，div 标签应该向下动画（从顶部：-50px 到顶部：0），反之亦然，当他们滚动回页面顶部时.

我遇到的问题是动画有时似乎非常缓慢且无响应。我在 3 种不同的浏览器和不同的计算机上进行了测试，但我没有任何乐趣。

这是我的代码：

```
 // Show div
    var scrollValue = "90";

    // Animate functions
    var showHead = function (){
$(".element").animate({top: "0"}, 250);
}
var hideHead = function (){
$(".element").animate({top: "-50px"}, 250);
}

    $(window).scroll(function() {
        if ($(this).scrollTop() > scrollValue) {
            showHead();
        } else {
            hideHead();
        }
    }); 
```

.element 属性：

```
.element { positoin:fixed; top:-50px; } 
```

谁能弄清楚为什么我的代码隐藏/显示头功能如此草率？

谢谢，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:42:17.453

试试这个：

```
$(window).scroll(function() {
    if (window.scrollY > scrollValue) {
        showHead();
    } else {
        hideHead();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:42:49.363

`scroll`在用户滚动期间发生了很多次事件。

在再次开始动画之前，您需要检查您的动画是否正在进行。

试试这个 ：

```
// Show div
var scrollValue = "90";
var inProgress = false;

// Animate functions
var showHead = function () {
    if(inProgress)
        return false;

    //Animate only if the animation is not in progress
    inProgress = true;

    $(".element").animate({
        top: "0"
    },250,function(){
        inProgress = false; //Reset when animation is done
    });
}
var hideHead = function () {
    if(inProgress)
        return false;

    //Animate only if the animation is not in progress
    inProgress = true;

    $(".element").animate({
        top: "-50px"
    }, 250,function(){
        inProgress = false; //Reset when animation is done
    });
}

$(window).scroll(function () {
    if ($(this).scrollTop() > scrollValue) {
        showHead();
    } else {
        hideHead();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:43:02.150

尝试使用 queue: false 并且正如亚历山大所说的那样使用`.stop()`

这里jsfiddle

[http://jsfiddle.net/hwbPz/](http://jsfiddle.net/hwbPz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T21:45:26.410

假设您有`position:fixed`（或其他某种样式使栏在必要时可见）：

```
var scrollheight = 90;

var $el = $('.element');
function showHead(){
    $el.stop().animate({
        top: '0px'
    }, 250);
}
function hideHead(){
    $el.stop().animate({
        top: '-50px'
    }, 250);
}

$(window).scroll(function(){
    if ($(window).scrollTop() > scrollheight){
        showHead();
    }else{
        hideHead();
    }
}); 
```

示例：http: [//jsfiddle.net/L4LfL/](http://jsfiddle.net/L4LfL/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T21:48:43.567

该`scroll`事件被触发多次，即使它受到速率限制，它仍然是一个相当密集的操作。实际上，您可能正在排队几个动画，并且`fx`堆栈可能增长得非常快。

您可以尝试的一种可能性是在触发新动画之前停止所有以前的动画。您可以使用[`.stop()`](http://api.jquery.com/stop/).

```
$(".element").stop().animate({top: "0"}, 250); 
```

该`.stop()`功能还提供了一些其他选项，您可以使用这些选项对其进行更多调整。

# gmail-contextual-gadgets - 无法加载 Gmail 上下文小工具

> ID：14945635
> 
> 赞同：0
> 
> 时间：2013-02-18T21:31:44.447
> 
> 标签：gmail-contextual-gadgets

帮助！我一遍又一遍地看着这个，它只是不会加载。我应该在每封电子邮件上看到它，但什么也没有。我错过了什么？

```
<?xml version="1.0" encoding="UTF-8" ?>
<ApplicationManifest xmlns="http://schemas.google.com/ApplicationManifest/2009">

  <!-- Support info to show in the marketplace & control panel -->
  <Support>
    <!-- URL explaining how customers get support. -->
    <Link rel="support" href="http://example.com" />
  </Support>

  <Edition id="SlidersExtractor"></Edition>

  <!-- Name and description pulled from message bundles -->
  <Name>Sliders 2</Name>
  <Description>Sliders</Description>

<!-- EXTRACTOR -->

<Extension id="SlidersExtractor" type="contextExtractor">
  <Name>Sliders</Name>
  <Url>google.com:SubjectExtractor</Url>
  <Triggers ref="Sliders"/>
  <Scope ref="emailSubject"/>
  <Container name="mail"/>
</Extension>

<!-- GADGET -->

<Extension id="Sliders" type="gadget">
  <Name>Sliders Gmail contextual gadget</Name>
      <Url>http://hosting.gmodules.com/ig/gadgets/file/117105461644591440890/sliders.xml</Url>
  <Container name="mail"/>
</Extension>

<!-- SCOPE -->

<Scope id="emailSubject">
  <Url>tag:google.com,2010:auth/contextual/extractor/SUBJECT</Url>
  <Reason>This application searches the Subject:"</Reason>
</Scope>

</ApplicationManifest> 
```

和小工具：

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Sliders Gadget"
    description="Matches emails"
    height="20"
    author="me"
    author_email="james@example.com"
    author_location="everywhere">

    <!-- Declare feature dependencies. -->

    <!-- This one is not specific to Gmail contextual gadgets. -->
    <Require feature="dynamic-height"/>

   <Require feature="google.contentmatch">
      <Param name="extractors">
        google.com:SubjectExtractor
      </Param>
    </Require>

  </ModulePrefs>

  <!-- Define the content type and display location. The settings
   "html" and "card" are required for all Gmail contextual gadgets. -->
  <Content type="html" view="card">
    <![CDATA[
       Hello Sliders 2/18
    ]]>
  </Content>
</Module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:50:41.900

我没有测试您的 XML，但可能是由于“缓存”。您是否尝试过注销然后再次登录，或更改浏览器？

请看看这个[答案](https://stackoverflow.com/a/8011614/2071317 "和你类似的问题")！

[https://stackoverflow.com/a/8011614/2071317](https://stackoverflow.com/a/8011614/2071317)

# css - 字体嵌入：这里有什么问题？

> ID：14945638
> 
> 赞同：1
> 
> 时间：2013-02-18T21:32:07.093
> 
> 标签：css, fonts, embedding

我对 html 和 css 还是很陌生，所以我可能会忽略一些事情。一直在自娱自乐地尝试创建一个小网站并最终将字体嵌入其中。它在 Firefox 中运行，但在 Internet Explorer 中却不是。我不知道其他浏览器。这是该网站的链接。单击 L 转到第二个页面： http: [//librarchive.com/newcat.html](http://librarchive.com/newcat.html)。如您所见，因此也存在一些定位错误。

所以字体不能正常工作。我该怎么办？

这是我的 css 代码，我有一个字体的 .eot 和 .ttf 文件：

```
@font-face{ 
font-family: libralust; 
src: url('Futura_Bk.eot'); /* For IE */ 
src: local('libralust'), url('Futura_Bk.ttf') format('truetype'); /* For non-IE */ 
}

body {
font-family: libralust, Verdana, Arial, sans-serif;
text-align:center;
} 
```

我一直在寻找，但没有足够的经验来理解这一切。关于网站的其他评论也很受欢迎。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:05:54.520

[这是fontsquirel](http://www.fontsquirrel.com)建议的跨站点字体嵌入的示例

```
@font-face {
    font-family: 'OpenSansLight';
    src: url('/skins/default/media/fonts/OpenSans-Light-webfont.eot');
    src: url('/skins/default/media/fonts/OpenSans-Light-webfont.eot?#iefix') format('embedded-opentype'),
    url('/skins/default/media/fonts/OpenSans-Light-webfont.woff') format('woff'),
    url('/skins/default/media/fonts/OpenSans-Light-webfont.ttf') format('truetype'),
    url('/skins/default/media/fonts/OpenSans-Light-webfont.svg#OpenSansLight') format('svg');
    font-weight: normal;
    font-style: normal; 
```

}

现在你可以弄清楚出了什么问题吗？

我会指出另一个提示：**本地**

有关详细说明，请阅读：[the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax) 和/或 [bulletproof-font-face-implementation-syntax](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:21:12.723

不是所有的浏览器都支持 Font-Face 并且有很多字体 ext；像eot，svg，woff，ttf。

试试这个，因为你只有 eot 和 ttf：

```
@font-face{ 
    font-family: libralust;
    src: url('Futura_Bk.eot');
    src: url('Futura_Bk.eot?#iefix') format('embedded-opentype'),
    url('Futura_Bk.ttf') format('truetype');
    font-weight: normal; /* thin? normal? bold? */
    font-style: normal;
} 
```

# c# - 在 SQLite for WinRT 中实现自定义排序规则

> ID：14945645
> 
> 赞同：2
> 
> 时间：2013-02-18T21:32:37.250
> 
> 标签：c#, sqlite, interop, windows-runtime

我正在尝试在 SQLite for Windows Runtime 中实现自定义排序规则。

create_collat​​ion 方法实现如下：

```
SQLITE_API int sqlite3_create_collation(
  sqlite3*, 
  const char *zName, 
  int eTextRep, 
  void *pArg,
  int(*xCompare)(void*,int,const void*,int,const void*)
); 
```

到目前为止，我有以下 C# 签名：

```
[DllImport("sqlite3", EntryPoint = "sqlite3_create_collation", CallingConvention = CallingConvention.Cdecl)]
public static extern int CreateCollation(IntPtr db, [MarshalAs(UnmanagedType.LPStr)] string name, int textRep, object state, Compare callback);

public delegate int Compare(object pCompareArg, int size1, IntPtr Key1, int size2, IntPtr Key2); 
```

这是实现：

```
int i = CreateCollation(db, "unicode_nocase", SQLITE_UTF8, null, CompareMethod);

/* ... */

public static int CompareMethod(object o, int i1, IntPtr s1, int i2, IntPtr s2)
{
    return string.Compare(Marshal.PtrToStringUni(s1), Marshal.PtrToStringUni(s2));
} 
```

应用程序编译没有错误。对 create_collat​​ion 的调用返回零（SQLITE_OK），但如果我在语句中使用排序规则，则会返回以下错误消息：

```
no such collation sequence: unicode_nocase 
```

来源参考：[https ://github.com/doo/SQLite3-WinRT/tree/master/SQLite3Component](https://github.com/doo/SQLite3-WinRT/tree/master/SQLite3Component)

有人能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:50:12.577

在也使用 SQLite 的 C 实现的 Mono.Android.SQLite 内部查看了一段时间后，我找到了解决方案：

问题是对 sqlite3_create_collat​​ion 的调用有一个 void* 参数，我错误地将其定义为 C# 中的对象，它应该是 IntPtr。

我已经在下面发布了当前的实现。我从 Mono 实现中对解决方案进行了部分逆向工程，它为每个要注册的排序规则调用 sqlite3_create_collat​​ion 两次——一次将参数 eTextRep 设置为 SQLITE_UTF16LE，第二次使用 SQLITE_UTF8。我只能想象这可能有助于 SQLite 核心为存储字符串值的不同格式找到快速实现。但是，这些在转换为 C# 字符串时需要不同的解码。

```
 [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    private delegate int CompareCallback(IntPtr pvUser, int len1, IntPtr pv1, int len2, IntPtr pv2);

    [DllImport("sqlite3", CallingConvention = CallingConvention.Cdecl)]
    private static extern int sqlite3_create_collation(IntPtr db, byte[] strName, int nType, IntPtr pvUser, CompareCallback func);

    private const int SQLITE_UTF8 = 1;
    private const int SQLITE_UTF16LE = 2;
    private const int SQLITE_UTF16BE = 3;
    private const int SQLITE_UTF16 = 4;    /* Use native byte order */
    private const int SQLITE_ANY = 5;    /* sqlite3_create_function only */
    private const int SQLITE_UTF16_ALIGNED = 8;    /* sqlite3_create_collation only */

    public void Register(IntPtr db)
    {
        if (db == IntPtr.Zero)
            throw new ArgumentNullException("db");

        //create null-terminated UTF8 byte array
        string name = Name;
        var nameLength = System.Text.Encoding.UTF8.GetByteCount(name);
        var nameBytes = new byte[nameLength + 1];
        System.Text.Encoding.UTF8.GetBytes(name, 0, name.Length, nameBytes, 0);

        //register UTF16 comparison
        int result = sqlite3_create_collation(db, nameBytes, SQLITE_UTF16LE, IntPtr.Zero, CompareUTF16);
        if (result != 0)
        {
            string msg = SQLite3.GetErrmsg(db);
            throw SQLiteException.New((SQLite3.Result)result, msg);
        }

        //register UTF8 comparison
        result = sqlite3_create_collation(db, nameBytes, SQLITE_UTF8, IntPtr.Zero, CompareUTF8);
        if (result != 0)
        {
            string msg = SQLite3.GetErrmsg(db);
            throw SQLiteException.New((SQLite3.Result)result, msg);
        }
    }

    private string GetUTF8String(IntPtr ptr, int len)
    {
        if (len == 0 || ptr == IntPtr.Zero)
            return string.Empty;

        if (len == -1)
        {
            do
            {
                len++;
            }
            while (Marshal.ReadByte(ptr, len) != 0);
        }

        byte[] array = new byte[len];
        Marshal.Copy(ptr, array, 0, len);

        return Encoding.UTF8.GetString(array, 0, len);
    }

    private string GetUTF16String(IntPtr ptr, int len)
    {
        if (len == 0 || ptr == IntPtr.Zero)
            return string.Empty;

        if (len == -1)
        {
            return Marshal.PtrToStringUni(ptr);
        }

        return Marshal.PtrToStringUni(ptr, len / 2);
    }

    internal int CompareUTF8(IntPtr ptr, int len1, IntPtr ptr1, int len2, IntPtr ptr2)
    {
        return Compare(GetUTF8String(ptr1, len1), GetUTF8String(ptr2, len2));
    }

    internal int CompareUTF16(IntPtr ptr, int len1, IntPtr ptr1, int len2, IntPtr ptr2)
    {
        return Compare(GetUTF16String(ptr1, len1), GetUTF16String(ptr2, len2));
    } 
```

# asp.net-mvc - 在 ASP.Net MVC 中处理小册子样式的页面

> ID：14945649
> 
> 赞同：1
> 
> 时间：2013-02-18T21:32:43.377
> 
> 标签：asp.net-mvc, razor, routing, asp.net-mvc-routing

我已经建立了许多 ASP.Net MVC 站点，每个站点中都有许多适合 MVC 控制器和操作的页面，以及一些实际上只是小册子页面的页面 - /why、/why/ouradvantage、 /about 等 - 没有真正功能的页面，只是一个视图，也许是一个布局，仅此而已。

对于这些小册子风格的页面，我真的更喜欢只有 View 和一个很好的 Route 来找到它，所以我可以把 /why 放在 /Brochure/Why.cshtml 或 /Brochure/Why/Index.cshtml 或者任何一种方式它会被捡起来的。我想避免制作愚蠢的控制器和动作（就像我过去所做的那样）来处理这组 URL 和页面。

如何在 ASP.Net MVC 项目中解决这个问题？这一定是一个共同的需求。

编辑：我如何以详细方式执行此操作的示例：

我可以使用标准的 MVC 路由 ({controller}/{action}/{id}) 并发送一堆无用的控制器来获取我想要的 URL 和页面集。每次我想添加一个小册子样式（没有功能，只是一个视图）页面时，我都会添加一个控制器或操作，如下所示：

为什么控制器：

```
public class WhyController : Controller
{
    public ViewResult Index()
    {
        return View();
    }

    public ViewResult OurAdvantage()
    {
        return View();
    }
} 
```

这会在 /why 和 /why/ouradvantage 放置一个视图 - 干净的 URL。如果我想要一个 /about 页面，我可以添加另一个控制器，它只返回一个名为 AboutController 的视图。如果它有 5 个子页面，我可以向该控制器添加 5 个动作，所有这些动作都只返回一个视图。

如果 MVC 站点中这些小册子式的页面总计 100 页，那么我将有相当多的无用的控制器和动作，它们实际上什么都不做。不是很干。我对一种将视图放在我的项目中的文件夹中并让它们访问的方法很感兴趣（通过约定配置），在干净的 URL 上，如 /why 和 /why/ouradvantage。

有几种方法可以让我接近：

我可以放入一堆 .cshtml 页面并直接访问它们——但是我必须在 URL 中有文件扩展名，并且视图文件本身必须位于根目录中。

我可以使用 ASP.Net 区域为这些定义一个区域，但是所有小册子样式的页面都必须至少位于一个 URL 段深处，并且我仍然遇到上述 URL 中文件扩展名的问题。

我可以定义一些疯狂的路线。

我怀疑这经常出现在具有少量或大量这些 Brochure 样式页面的 MVC 项目中 - 似乎应该有一种干净的方法来做到这一点。

编辑：垃圾邮件路由引擎的蹩脚解决方案。

创建一个映射路由的类，例如：

```
public static void MapRoutes(RouteCollection routes, string appRoot, string path)
{
    if (!path.Contains("~/"))
        throw new NotSupportedException("Pages path must be virtual (use ~/ syntax).");

    var physicalPath = appRoot + path.Substring(2).Replace("/", "\\");

    var dir = new DirectoryInfo(physicalPath);
    var pages = dir.GetFiles("*.cshtml", SearchOption.AllDirectories);

    int rootLength = appRoot.Length;
    var rootParsed = pages.Select(p => "~/" + p.FullName.Substring(rootLength).Replace("\\", "/"));
    int folderPathLength = path.Length + 1;

    var mapped = rootParsed.Select(p => new {
        Url = p.Substring(folderPathLength, p.Length - 7 - folderPathLength),
        File = p
    });

    var routedPages = mapped.Select(m => routes.MapRoute(
        name: m.Url,
        url: "{*url}",
        defaults: new { path = m.File, Controller = "Brochure", Action = "Catchall" },
        constraints: new { url = m.Url }
    )).ToArray();
} 
```

您可以在 RouteConfig 中调用它，例如：

```
BrochureRoute.MapRoutes(routes, Server.MapPath("~/"), "~/Brochure"); 
```

这显然将所有这些页面映射到 BrochureController，您也需要它：

```
public class BrochureController : Controller
{
    public ViewResult Catchall(string path)
    {
        return View(path);
    }
} 
```

2个问题：

1.  正如我所提到的，它会向路由引擎发送垃圾邮件——如果你有 100 个页面，你就有 100 条路由。
2.  传递上述路径似乎扰乱了正常的 Razor 管道 - 以这种方式访问​​页面会导致错误，例如：

> '~/Brochure/About.cshtml' 的视图必须从 WebViewPage 派生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:40:39.580

[`RouteCollection.MapPageRoute`](http://msdn.microsoft.com/en-us/library/dd992955%28v=vs.100%29.aspx)可以使用映射单个页面的方法。

```
routes.MapPageRoute("", "why", "~/Brochure/Why.aspx"); 
```

~~当然，您可以使用 Razor 视图引擎 (.cshtml) 而不是 WebForms。~~

~~[查看 MSDN 文档以获取更多详细信息。](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx#adding_routes_to_a_web_forms_application)~~

* * *

**更新 2**

你是对的，你不能将它用于 .cshtml 页面。但是，您不需要使用路由来访问网页（.cshtml 文件）。创建文件并省略 URL 中的扩展名就足够了。为了实现您想要的结构，您可以这样做：

*   您的 Web 项目必须允许网页呈现。要启用此功能，请转到`web.config`并设置`webpages.Enabled`为`true`。( `<add key="webpages:Enabled" value="true" />`)
*   `why`在您的 Web 应用程序根目录中创建文件夹
*   添加名为`Index.cshtml`. 这可以从[http://yoursite.com/why访问](http://yoursite.com/why)
*   添加名为`ouradvantages.cshtml`. 这可以从[http://yoursite.com/why/ouradvantages访问](http://yoursite.com/why/ouradvantages)
*   您还可以使用`@UrlData`集合访问 url 数据

[在这里](http://www.asp.net/web-pages/tutorials/working-with-pages/creating-readable-urls-in-aspnet-web-pages-sites)查看更多信息。更多关于一般网页的信息[也可以在 asp.net 网站上找到](http://www.asp.net/web-pages/tutorials)。

如果出于某种原因您确实需要使用路由，则需要自定义 RouteHandler。您可以[找到在 Nuget 上实现的一个](https://nuget.org/packages/WebPageRouteHandler/)。这个包的使用例子在[这里](http://www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET-Web-Pages)。

* * *

**更新**

如果您想避免手动添加每条路线，那么您几乎没有选择。

**1）创建一个约定来识别小册子页面**

您可以通过默认情况下将 URL 视为小册子页面并将“非小册子”页面隔离到特定部分来做到这一点：

```
routes.MapPageRoute("Default", "{brochurepage}", "~/Brochure/{brochurepage}.aspx");
// isolate non-brochure pages to "site" section
routes.MapRoute(
    "",
    "site/{controller}/{action}/{id}",                      // URL with parameters
    new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
); 
```

**2) 在集合中保存小册子页面名称**

```
List<string> brochurePages = new List<string>()
{ "about", "why", "contact" }; // add more pages here
....
foreach (var brochurePage in brochurePages)
    routes.MapPageRoute("", brochurePage, "~/Brochure/" + brochurePage + ".aspx"); 
```

* * *

对于您在问题中提到的两个 URL，我必须非常具体。要为“/why”和“/why/ouradvantage”实现路由，您将无法编写优雅的代码。这将需要特殊处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:52:24.437

如果您的问题是您不想为所有这些“愚蠢”页面使用单独的控制器，我可以建议您创建一种逻辑方式将它们路由到单个控制器，然后根据路由呈现正确的数据/视图?

例如，您的 URL 可以读取“/Pages/Why/About”，您可以将其路由到您的页面控制器，它会接收“Why”和“About”作为参数，您可以相应地呈现您的内容。那有意义吗？

# sql - SQL Server Management Studio 显示字段 varchar(max) 的完整内容

> ID：14945650
> 
> 赞同：7
> 
> 时间：2013-02-18T21:32:46.647
> 
> 标签：sql, ssms

SQL Server Management Studio 中有一种方法可以在`varchar(max)`运行选择时读取列的所有内容？

我知道有一个选项`Options > Query Execution > SET TEXTSIZE`。但我想知道当您有一个 XML 文件时，您是否可以单击单元格并打开一个包含单元格内容的新选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:50:50.513

否 - 没有直接的方法可以在 SSMS 网格中获取完整的单元格数据。SSMS 将其截断。但是：SSMSBoost 补充说，我开发的可以满足您的需要：它允许 1:1 复制单元格内容。所有字节，即使有兆字节！ [http://www.ssmsboost.com/Features/ssms-add-in-copy-results-grid-cell-contents-line-with-breaks](http://www.ssmsboost.com/Features/ssms-add-in-copy-results-grid-cell-contents-line-with-breaks)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T21:35:35.667

您是否尝试过将结果发送到文本？

这是一个屏幕截图/指南：

[http://blog.sqlauthority.com/2007/07/19/sql-server-2005-ssms-viewsend-query-results-to-textgridfiles/](http://blog.sqlauthority.com/2007/07/19/sql-server-2005-ssms-viewsend-query-results-to-textgridfiles/)

# c# - 如何在 C# 中使用 json wcf 服务

> ID：14945653
> 
> 赞同：1
> 
> 时间：2013-02-18T21:32:55.210
> 
> 标签：c#, json, wcf

我有一个 json wcf。地址已给出。wsdl 中的代码如下：

```
<wsdl:binding name="BasicHttpBinding_iBOER" type="tns:iBOER">
 <soap:binding transport="http://schemas.xmlsoap.org/soap/http" /> 
 - <wsdl:operation name="PhoneCall">
 <soap:operation soapAction="http://tempuri.org/iBOER/PhoneCall" style="document" /> 
 - <wsdl:input>
 <soap:body use="literal" /> 
 </wsdl:input>
- <wsdl:output>
 <soap:body use="literal" /> 
 </wsdl:output>
 </wsdl:operation>

- <wsdl:service name="BOER">
- <wsdl:port name="BasicHttpBinding_iBOER" binding="tns:BasicHttpBinding_iBOER">
      <soap:address location="http://wsvc01/BOER/BOER.svc" /> 
  </wsdl:port>
  </wsdl:service> 
```

如何在 C# 中使用它？刚刚好吗？

```
class Test
{
   static void Main()
   {
       iBOERClient client = new iBOERClient();

      // Use the 'client' variable to call operations on the service.

      // Always close the client.
      client.Close();
   }
} 
```

我需要把网址放在客户端吗？该服务有两个DataContract 和许多DataMember。我对此并不强烈。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T21:37:57.973

您实际上并没有 JSON WCF 服务。你有一个服务，它可能有也可能没有可以接收/发送 JSON 数据的端点。您显示的 WSDL 列出了`wsdl:port`使用基于 SOAP 的绑定 ( ) 的端点 ( `BasicHttpBinding`)。可以“交谈”JSON 的端点是用 定义的`WebHttpBinding`，并且有一种特定的行为 ( `WebHttpBehavior`) 应用于它——它们[不会出现在 WSDL 中](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)。

因此，您不能通过 Add Service Reference 或 svcutil.exe 等工具生成的客户端使用它。如果您在客户端代码中有相同的合同，您可以使用一个类，例如`ChannelFactory<T>`或`WebChannelFactory<T>`创建一个代理来与服务对话，或者您可以手工处理请求并使用通用 HTTP 客户端将其发送到服务。

下面的示例代码显示了如何使用 JSON 端点`WebChannelFactory<T>`和“普通”HTTP 客户端 ( `WebClient`)。

```
public class StackOverflow_14945653
{
    [DataContract]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
        [DataMember]
        public Address Address { get; set; }
    }
    [DataContract]
    public class Address
    {
        [DataMember]
        public string Street;
        [DataMember]
        public string City;
        [DataMember]
        public string Zip;
    }
    [ServiceContract]
    public interface ITest
    {
        [WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        void RegisterPerson(Person p);
        [WebGet(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        Person FindPerson(string name);
    }
    public class Service : ITest
    {
        private static List<Person> AllPeople = new List<Person>();

        public void RegisterPerson(Person p)
        {
            AllPeople.Add(p);
        }

        public Person FindPerson(string name)
        {
            return AllPeople.Where(p => p.Name == name).FirstOrDefault();
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        Console.WriteLine("Accessing via WebChannelFactory<T>");
        WebChannelFactory<ITest> factory = new WebChannelFactory<ITest>(new Uri(baseAddress));
        ITest proxy = factory.CreateChannel();
        proxy.RegisterPerson(new Person
        {
            Name = "John Doe",
            Age = 32,
            Address = new Address
            {
                City = "Springfield",
                Street = "123 Main St",
                Zip = "12345"
            }
        });
        Console.WriteLine(proxy.FindPerson("John Doe").Age);
        Console.WriteLine();

        Console.WriteLine("Accessing via \"normal\" HTTP client");
        string jsonInput = "{'Name':'Jane Roe','Age':30,'Address':{'Street':'1 Wall St','City':'Springfield','Zip':'12346'}}".Replace('\'', '\"');
        WebClient c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "application/json";
        c.UploadString(baseAddress + "/RegisterPerson", jsonInput);

        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/FindPerson?name=Jane Roe"));
        Console.WriteLine();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# android - 为什么 JSON 请求以 XML 形式返回？

> ID：14945655
> 
> 赞同：0
> 
> 时间：2013-02-18T21:33:08.733
> 
> 标签：android, xml, json, parsing, jsonexception

我是 android 的菜鸟，我正在尝试从此链接解析 JSON：“ [http://services.packetizer.com/spotprices/?f=json](http://services.packetizer.com/spotprices/?f=json) ”。但是，当我发送解析它的请求时，我收到一条错误消息...“解析数据时出错 org.json.JSONException：java.lang.String 类型的值 xml 无法转换为 JSONObject”。这至少可以说是莫名其妙，因为链接显然是 JSON。非常感谢任何解决此问题的帮助。

我的代码：

```
JSONObject json = JSONfunctions.getJSONfromURL("http://services.packetizer.com/spotprices/?f=json");                    
                        if(json==null){
                            //Do Nothing
                        }else{
                            String usdgold = json.getString("gold");             
                            livespotgold = Double.parseDouble(usdgold);
                            storedspotgold=livespotgold;
                            Log.e("Spot Gold Packetizer", String.valueOf(livespotgold));

                            String usdsilver = json.getString("silver");             
                            livespotsilver = Double.parseDouble(usdsilver);
                            storedspotsilver=livespotsilver;
                            Log.e("Spot Silver Packetizer", String.valueOf(livespotsilver));
                            haveSpot = true;
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:19:06.660

我假设您正在使用[此处](https://stackoverflow.com/a/12312138/1217087)`JSONfunctions`的类或它的修改版本（因为您收到的是 a而不是 a ）。`JSONObject``JSONArray`

请注意，该代码发送一个 HTTP POST。当您向其发送 POST 时，此端点正在返回 XML。您需要更改代码以发送 HTTP GET：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url);
HttpResponse response = httpclient.execute(httpget); 
```

# java - 按字母顺序列出字符串数组

> ID：14945656
> 
> 赞同：29
> 
> 时间：2013-02-18T21:33:13.447
> 
> 标签：java, arrays, function, case

我有一个程序让用户输入名称列表。我有一个开关盒转到一个功能，我希望按字母顺序打印名称。

```
public static void orderedGuests(String[] hotel)
{
  //??
} 
```

我都试过了

```
Arrays.sort(hotel);
System.out.println(Arrays.toString(hotel)); 
```

和

```
java.util.Collections.sort(hotel); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-18T21:41:44.507

奇怪，你的代码似乎对我有用：

```
import java.util.Arrays;

public class Test
{
    public static void main(String[] args)
    {
        // args is the list of guests
        Arrays.sort(args);
        for(int i = 0; i < args.length; i++)
            System.out.println(args[i]);
    }
} 
```

我使用“java Test Bobby Joe Angel”运行了该代码，输出如下：

```
$ java Test Bobby Joe Angel
Angel
Bobby
Joe 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T21:57:56.720

您尝试的第一件事似乎工作正常。这是一个示例程序。[按此页面](http://www.browxy.com/SavedCode/1252)
顶部的“开始”按钮运行它以自己查看输出。

```
import java.util.Arrays;

public class Foo{
    public static void main(String[] args) {
        String [] stringArray = {"ab", "aB", "c", "0", "2", "1Ad", "a10"};
        orderedGuests(stringArray);
    }

    public static void orderedGuests(String[] hotel)
    {
        Arrays.sort(hotel);
        System.out.println(Arrays.toString(hotel));
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T21:42:56.383

你可以使用`Arrays#sort()`，它工作得很好。看这个例子：

```
String [] a = {"English","German","Italian","Korean","Blablablabla.."};
//before sort
for(int i = 0;i<a.length;i++)
{
  System.out.println(a[i]);
}
Arrays.sort(a);
System.out.println("After sort :");
for(int i = 0;i<a.length;i++)
{
  System.out.println(a[i]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-30T10:20:20.523

```
java.util.Collections.sort(listOfCountryNames, Collator.getInstance()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T21:42:50.580

这是有效的代码：

```
import java.util.Arrays;
import java.util.Collections;

public class Test
{
    public static void main(String[] args)
    {
        orderedGuests1(new String[] { "c", "a", "b" });
        orderedGuests2(new String[] { "c", "a", "b" });
    }

    public static void orderedGuests1(String[] hotel)
    {
        Arrays.sort(hotel);
        System.out.println(Arrays.toString(hotel));
    }

    public static void orderedGuests2(String[] hotel)
    {
        Collections.sort(Arrays.asList(hotel));
        System.out.println(Arrays.toString(hotel));
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-26T19:16:01.303

**`CompareTo()`方法：根据 Unicode 字符值比较两个字符串。**

```
import java.util.*;

public class Test {

int n,i,temp;
String names[n];

public static void main(String[] args) {
String names[5] = {"Brian","Joshua","Louis","David","Marcus"};

for(i=0;i<5;i++){
    for(j=i+1;i<n;j++){
        if(names[i].CompareTo(names[j]>0) {
             temp=names[i];
             names[i]=names[j];
             names[j]=temp;
         } else
             System.out.println("Alphabetically Ordered");                               
         }
     }                              
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-21T11:49:20.103

Arrays.sort(stringArray); 这会根据 Unicode 字符值对字符串数组进行排序。在字符串开头包含大写字符的所有字符串将按字母顺序位于排序列表的顶部，然后是所有带有小写字符的字符串。因此，如果数组包含以大写字符和小写字符开头的字符串，则排序后的数组将不会返回不区分大小写的字母顺序列表

```
String[] strArray = { "Carol", "bob", "Alice" };
Arrays.sort(strList);
System.out.println(Arrays.toString(hotel)); 
```

输出是：爱丽丝，卡罗尔，鲍勃，

如果您要求对字符串进行排序而不考虑大小写，则需要为 Arrays.sort() 提供第二个参数，即比较器。已经为我们编写了这样的比较器，并且可以在名为 CASE_INSENSITIVE_ORDER 的 String 类上作为静态访问。

```
String[] strArray = { "Carol", "bob", "Alice" };
Arrays.sort(stringArray, String.CASE_INSENSITIVE_ORDER);
System.out.println(Arrays.toString(strArray )); 
```

输出是：爱丽丝，鲍勃，卡罗尔

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-08T08:00:01.400

您可以使用 Arrays.sort() 方法。这是一个例子，

```
import java.util.Arrays;

public class Test 
{
    public static void main(String[] args) 
    {
        String arrString[] = { "peter", "taylor", "brooke", "frederick", "cameron" };
        orderedGuests(arrString);
    }

    public static void orderedGuests(String[] hotel)
    {
        Arrays.sort(hotel);
        System.out.println(Arrays.toString(hotel));
    }
} 
```

**输出**

[布鲁克、卡梅伦、弗雷德里克、彼得、泰勒]

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-23T06:41:14.277

按字母顺序，我假设顺序为： A|a < B|b < C|c... 希望这是@Nick 正在（或曾经）寻找的内容，并且答案遵循上述假设。

我建议让一个类实现比较器接口的比较方法：

```
public int compare(Object o1, Object o2) {
    return o1.toString().compareToIgnoreCase(o2.toString());
} 
```

并从调用方法调用具有自定义 Comparator 的 Arrays.sort 方法：

```
Arrays.sort(inputArray, customComparator); 
```

观察结果：输入数组：“Vani”、“Kali”、“Mohan”、“Soni”、“kuldeep”、“Arun”

输出（字母顺序）是：Arun，Kali，kuldeep，Mohan，Soni，Vani

输出（通过执行 Arrays.sort(inputArray) 的自然顺序为：Arun、Kali、Mohan、Soni、Vani、kuldeep

因此，在自然排序的情况下，[Vani < kuldeep] 根据我对字母顺序的理解，这不是我们想要的。

要更多地了解自然和字母/词汇顺序，请访问 [此处的讨论](https://stackoverflow.com/questions/6810619/how-to-explain-sorting-numerical-lexicographical-and-collation-with-examples)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-07T03:09:58.047

```
**//With the help of this code u not just sort the arrays in alphabetical order but also can take string from user or console or keyboard

import java.util.Scanner;
import java.util.Arrays;
public class ReadName
{
final static int ARRAY_ELEMENTS = 3;
public static void main(String[] args)
{
String[] theNames = new String[5];
Scanner keyboard = new Scanner(System.in);
System.out.println("Enter the names: ");
for (int i=0;i<theNames.length ;i++ )
{           
theNames[i] = keyboard.nextLine();
}
System.out.println("**********************");
Arrays.sort(theNames);
for (int i=0;i<theNames.length ;i++ )
{
System.out.println("Name are " + theNames[i]);
}
}
}** 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-28T13:45:18.180

```
 public static String[] textSort(String[] words) {
    for (int i = 0; i < words.length; i++) {
        for (int j = i + 1; j < words.length; j++) {
            if (words[i].compareTo(words[j]) > 0) {
                String temp = words[i];
                words[i] = words[j];
                words[j] = temp;
            }
        }
    }

    return words;
} 
```

# c - 如何动态创建变量名

> ID：14945658
> 
> 赞同：-5
> 
> 时间：2013-02-18T21:33:20.590
> 
> 标签：c, database, struct, naming

如何即时创建 C 变量名称？可以做到吗？这比我之前想象的要棘手。

我的具体情况是这样的：

*   我正在创建*n 个*数组，其中*n*是用户输入。

*   我希望它们被命名为：{ a1, a2, a3... a *n* }

*显然，动态创建数组内容*很容易，但动态*命名*数组似乎很棘手。老实说，我现在什至没有办法。欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:39:24.617

这听起来像你只需要你的阵列上的另一个维度......或者类似的东西，至少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:34:28.707

程序编译后不能生成 C 变量。为了在运行时创建命名*事物*，您需要一个动态数据结构，如字典。

也就是说，也许您实际上并不需要命名的变量，在这种情况下，您需要动态分配的数组。由于您实际上无法在运行时创建变量，因此命名问题变得没有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T21:35:02.773

好吧，如果你真的需要这样一个可怕的 hack，你似乎需要重新设计你的代码。或者你只是想**索引**数组？

```
int arr[128];

int foo = array[3]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T21:34:35.410

不会。一旦编译了 C 程序，变量名（和类型等）就会被删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T21:38:36.893

在 C 中，变量名是编译时的东西，而不是运行时的东西。当您编译代码时，它们通常被替换为内存地址和偏移量。

但是，在我看来，您要创建的是数组数组。在那种情况下，`a`将是一个数组数组，并且每个`a[n]`数组都是它自己的数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T21:53:31.923

您不能在运行时创建新的变量名称。

每当你说“我需要 N 个名为 a1、a2、a3、... aN 的东西”之类的话时，你真正想要的是一系列东西`a[N]`：在这种情况下，您说您想要 N 个名为 a1、a2、a3...aN 的数组，所以您真正需要的是一个数组数组：`a[N][M]`.

假设每个数组的大小在编译时是已知的，并且您所需要的只是这些数组的数量，这变得很容易：

```
#define M 10 // size of each array

int (*arrs)[M];  
size_t numArrs;

printf("Gimme the number of arrays:  ");
fflush(stdout);
scanf("%zu", &numArrs);

arrs = malloc(sizeof *arrs * numArrs); 
```

此时您可以`arrs`用作常规的二维数组：

```
arrs[i][j] = some_value();
printf("a[%d][%d] = %d\n", i, j, arrs[i][j]); 
```

等当你完成它时，一定要释放数组：

```
free(arrs); 
```

请注意，此示例与错误处理没有任何相似之处；您肯定要测试`scanf`and`malloc`调用的结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-18T22:14:32.377

这实际上与 John Bodes 的答案相同，但有一个完整的代码示例。

约翰·博德写道：

> 您不能在运行时创建新的变量名称。
> 
> 每当你说“我需要 N 个名为 a1、a2、a3、... 在这种情况下，您说您想要 N 个名为 a1、a2、a3...aN 的数组，所以您真正需要的是一个数组数组：a[N][M]。
> 
> 假设每个数组的大小在编译时是已知的，并且您所需要的只是这些数组的数量，这变得很容易：

```
#include <stdlib.h>
#include <stdio.h>
#define ARRAY_DEPTH 3
int main( int argc, char * argv[])
{
  if( argc != 2 )
  {
    fprintf(stderr,"%s: Usage %s <number of arrays>\n",
        argv[0], argv[0]);
    return 1;
  }

  int i,j;
  int n = atoi(argv[1]);
  int (*arrays)[ARRAY_DEPTH];
  arrays = malloc(sizeof(int)*n*ARRAY_DEPTH);

  /* Do your stuff */

  for(i = 0; i < n; i++)
  {
    for(j = 0; j < ARRAY_DEPTH; j++) 
    {
      fprintf(stderr,"%3d,",arrays[i][j]);
    }
    fprintf(stderr,"\n");
  }
  free( arrays);
  return 0;
} 
```

输出

```
$ ./narray 5
0,  0,  0,
0,  0,  0,
0,  0,  0,
0,  0,  0,
0,  0,  0, 
```

# java - EclipseLink/MOXy 如何创建属性名称？

> ID：14945664
> 
> 赞同：1
> 
> 时间：2013-02-18T21:33:46.567
> 
> 标签：java, jaxb, moxy

我正在编写代码以`XmlTransient`在运行时使用 MOXy 进行设置。这是改编自[http://blog.bdoughan.com/2011/06/moxy-extensible-models-refresh-example.html上的示例的代码部分](http://blog.bdoughan.com/2011/06/moxy-extensible-models-refresh-example.html)

```
public void setXmlTransient(Class<?> domainClass, String propertyName) {
    XmlTransient xmlTransient = new XmlTransient();
    xmlTransient.setJavaAttribute(propertyName);
    JavaType javaType = getJavaType(domainClass);
    javaType.getJavaAttributes().getJavaAttribute().add(objectFactory.createXmlTransient(xmlTransient));
} 
```

由于我以编程方式执行此操作，因此我需要能够创建与`propertyName`MOXy 完全相同的方式。对于大多数 getter 方法名称，如`getOrder`，属性名称是通过`get`从方法名称中删除并将大写更改为小写`O`来完成的`o`，即属性名称是`order`。但是，我遇到了我的 getter 方法是`getXInA`但`xInA`似乎不是有效属性名称的情况。MOXy 会发出警告，例如

```
Ignoring attribute [xInA] on class [Atom] as no Property was generated for it. 
```

有谁知道 MOXy 使用什么规则从 getter 创建属性名称？或者知道在不阅读 MOXy 源代码的情况下我可以在哪里找到相关信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:37:13.287

**简短的回答**

因为连续有两个大写字母，所以属性名称将是`XInA`。

* * *

**长答案**

***领域模型（Foo）***

下面是一个示例 Java 类，其中包含您问题中的属性。

```
package forum14945664;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private String x;

    public String getXInA() {
        return x;
    }

    public void setXInA(String x) {
        this.x = x;
    }

} 
```

***元数据源（示例元数据源）***

`MetadataSource`是一种为 MOXy 提供映射元数据的编程方式。

```
package forum14945664;

import java.util.*;

import org.eclipse.persistence.jaxb.metadata.MetadataSourceAdapter;
import org.eclipse.persistence.jaxb.xmlmodel.*;
import org.eclipse.persistence.jaxb.xmlmodel.JavaType.*;
import org.eclipse.persistence.jaxb.xmlmodel.XmlBindings.*;

public class ExampleMetadataSource extends MetadataSourceAdapter {

    private ObjectFactory objectFactory;
    private Map<Class<?>, JavaType> javaTypes;
    private XmlBindings xmlBindings;

    public ExampleMetadataSource() {
        objectFactory = new ObjectFactory();
        javaTypes = new HashMap<Class<?>, JavaType>();

        xmlBindings = new XmlBindings();
        xmlBindings.setPackageName("forum14945664");
        xmlBindings.setJavaTypes(new JavaTypes());
    }

    @Override
    public XmlBindings getXmlBindings(Map<String, ?> properties, ClassLoader classLoader) {
        return xmlBindings;
    }

    public JavaType getJavaType(Class<?> clazz) {
        JavaType javaType = javaTypes.get(clazz);
        if(null == javaType) {
            javaType = new JavaType();
            javaType.setName(clazz.getSimpleName());
            javaType.setJavaAttributes(new JavaAttributes());
            xmlBindings.getJavaTypes().getJavaType().add(javaType);
            javaTypes.put(clazz, javaType);
        }
        return javaType;
    }

    public void setXmlTransient(Class<?> domainClass, String propertyName) {
        XmlTransient xmlTransient = new XmlTransient();
        xmlTransient.setJavaAttribute(propertyName);
        JavaType javaType = getJavaType(domainClass);
        javaType.getJavaAttributes().getJavaAttribute().add(objectFactory.createXmlTransient(xmlTransient));
    }

} 
```

***将 MOXy 指定为 JAXB 提供程序 (jaxb.properties)***

要将 MOXy 指定为 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***演示***

在下面的演示代码中，我们将`JAXBContext`基于域模型创建一个，并将一个实例编组为 XML。然后我们将使用`MetadataSource`使属性瞬态，刷新`JAXBContext`并再次编组实例。

```
package forum14945664;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;
import org.eclipse.persistence.jaxb.JAXBHelper;

public class Demo {

    public static void main(String[] args) throws Exception {
        ExampleMetadataSource metadata = new ExampleMetadataSource();

        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, metadata);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Foo foo = new Foo();
        foo.setXInA("Hello World");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);

        metadata.setXmlTransient(Foo.class, "XInA");
        JAXBHelper.getJAXBContext(jc).refreshMetadata();
        marshaller.marshal(foo, System.out);
    }

} 
```

***输出***

首先，我们看到已`XInA`编组的属性，然后在我们将其变为瞬态后，我们看到它不在第二个编组操作的 XML 中。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
   <XInA>Hello World</XInA>
</foo>
<?xml version="1.0" encoding="UTF-8"?>
<foo/> 
```

# ruby-on-rails - 查询结果上没有每个方法

> ID：14945667
> 
> 赞同：0
> 
> 时间：2013-02-18T21:33:56.080
> 
> 标签：ruby-on-rails

在我的应用程序的索引操作中，我希望只列出当前登录用户创建的调查，所以不要这样做

```
@surveys = Survey.all 
```

我做了

```
@mysurveys = Survey.find_by_twitteruser_id(session[:twitteruser_id]) 
```

但是，在显示调查时，我可以使用 @surveys = Survey.all

```
<% for survey in @surveys %>
    <tr>
      <td><%= survey.name %></td>
      <td><%= survey.twitteruser_id %></td>
      <td><%= link_to "Show", survey %></td>
      <td><%= link_to "Edit", edit_survey_path(survey) %></td>
      <td><%= link_to "Destroy", survey, :confirm => 'Are you sure?', :method => :delete %></td>
    </tr>
  <% end %> 
```

如果我尝试使用@mysurveys，我会收到一个错误，它没有“每个”方法。

我对日志中的@surveys 和@mysurveys 进行了检查，结果发现它们并不相同。@surveys 是一个数组

```
[#<Survey id: 32, name: "Mike", twitteruser_id: 1, created_at: "2013-02-18 21:15:18", updated_at: "2013-02-18 21:15:18">] 
```

并且@mysurvey 是我不知道是什么，但它没有数组括号，因此我认为这就是它没有“每个”方法的原因

```
#<Survey id: 32, name: "Mike", twitteruser_id: 1, created_at: "2013-02-18 21:15:18", updated_at: "2013-02-18 21:15:18"> 
```

我试图做@mysurvey.to_a 但它没有用。

你能帮我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:42:55.020

find_by 方法通过向查询添加 LIMIT 1 返回单个结果，您想使用 find_all_by 方法

```
@mysurveys = Survey.find_all_by_twitteruser_id(session[:twitteruser_id]) 
```

或者更好，因为这些方法将在 Rails 4 中被弃用

```
@mysurveys = Survey.where(:twitteruser_id => session[:twitteruser_id]) 
```

或通过加载用户模型来使用您的关联。

```
@twitteruser = Twitteruser.find(session[:twitteruser_id])
@myserveys = @twitteruser.surveys 
```

# api - Azure Rest API：PutBlockList - 将未提交的块提交到不同的 blob？

> ID：14945672
> 
> 赞同：2
> 
> 时间：2013-02-18T21:34:11.783
> 
> 标签：api, rest, azure

我正在尝试通过使用 Azure Rest API（使用 win 8 应用程序）来尝试读取另一个工作角色写入的 blob 来实现一些自动化。这个另一个日志工作者角色是将所有这些块“PUT”到一个blob，然后在时间的顶部提交所有这些块，压缩它们然后开始一个新的块。我不拥有这个记录器，并且想尝试在它周围做这件事而不打扰任何事情。

这是我正在做的事情：

1.  从该 blob 文件中获取所有未提交块的列表
2.  将该列表提交到该 blob，然后根据需要读取/转换

我目前的方法对我有用，但它会导致记录器出现问题，可能会使实例崩溃，并且在提交 blob 时肯定会丢失数据。为了防止这种情况，我一直在尝试将这些未提交的块提交到另一个临时 blob，然后从那里读取它，但未能成功。

当我调用 PutBlockList 时，它总是返回 400：无效的阻止列表。使用我从中获得未提交块的 blob 文件时，同样的调用会成功。如果未提交的块列表为空，它也会成功处理临时 blob。
我试图复制 blob，但它失败了 404: BlobNotFound 因为在提交 blob 之前它没有内容。
我尝试过快照，但文档指出它省略了未提交的块。也没有关于获取未提交块的实际数据而不仅仅是块标识的文档。

那么是否可以将 blob 的未提交块提交到不同的 blob？

# jsp - 无法在多个jsp页面之间传递数据

> ID：14945674
> 
> 赞同：1
> 
> 时间：2013-02-18T21:34:19.607
> 
> 标签：jsp

试图在 JSP 页面之间传递数据（值）。希望在 HTML 代码中显示用户输入的相同姓名和年龄。

我的程序有 3 个文件。流量是

```
 inputname.html -> printname.jsp -> printclass.jsp 
```

1.  inputname.html：用户输入他们的姓名和年龄
2.  printname.jsp : 显示姓名和年龄并输入他们的资格
3.  printclass.jsp ：显示所有三个：姓名、年龄和资格。

问题是我无法获得正确的姓名和年龄值`printclass.jsp`；值为`null`.

相关代码来自`printname.jsp`：

```
<html>
<head>
<title>Welcome</title>
</head>
<body>

<%  String Name=request.getParameter("name");%> 
<%  String Age=request.getParameter("age");%>   

<h1 >
welcome
<%= Name%>,
<%= Age %>
</h1>
 <br><br>

 <form method="POST" action="http://localhost:8090/htmltojsp1/printclass.jsp">

  <% request.setAttribute("name",Name) ; %>
  <% request.setAttribute("age",Age) ; %>

  <h3>choose a Class</h3><p>
  <select name="class" size="1">
     <option>School
     <option>College
     <option>bsc
      <option>mca 
  </select>
  <br> <br>
  <center>
    <input type="SUBMIT">
  </center>
  </form>

</body>
</html> 
```

相关代码来自`printclass.jsp`：

```
<html>

<body>
<h1 >

<%  String Name=request.getParameter("name");%> 
<%  String Age=request.getParameter("age");%>   

<h1 >
welcome
<%= Name%>,
<%= Age %>
</h1>
 <br><br>

<br><br>
<h2>you are in 
<%= request.getParameter("class")%>
 <h2>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:43:16.883

如果您使用 request.setAttribute ，这些将仅在当前 JSP 页面上可用 - 您下一页上的请求将设置为您在表单中拥有的内容（或在您的 URL 中的参数）。相反，您可以在表单中使用隐藏的输入元素：

```
<input type="hidden" name="name" value="<%= Name %>" /> 
```

顺便提一句。您应该在属性名称上使用小写字母。（所以使用名称而不是名称）。

# android - 方向改变时文件从内部存储中删除

> ID：14945675
> 
> 赞同：0
> 
> 时间：2013-02-18T21:34:21.343
> 
> 标签：android

当我的应用程序第一次启动时，它会出现一个 gridView。当按下此 gridView 的第一项时，它会打开一个下载 xml 文件的新活动，完成后，它会在自定义列表视图中显示其详细信息。

活动将文件存储在：

```
data/data/mypackagename/something.xml 
```

我做了这个活动来检查这个文件是否存在，所以当它从 main 重新打开时，不必再次下载 xml 文件。这工作正常。当我改变方向时，虽然这个活动仍在运行，然后我按下后退按钮（为了转到主要活动），我在 DDMS 的文件资源管理器中观察到文件被删除了！！！

这个奇怪的事情确实发生了，因为当我重新打开活动时，它会再次下载 xml 文件。我想知道的是，方向变化和内部存储环境的变化之间是否存在联系？

我在关闭应用程序时删除了文件（主要活动中的 onDestroy 方法），这不是问题的原因，因为在关闭第二个活动时文件被删除。

*   如果我不更改方向，请按后退按钮，然后重新打开文件仍然存在的活动
*   只有当我改变方向并执行上述操作时，文件才会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:26:34.543

我花了一些时间才弄清楚。

当第二个活动改变方向（例如到横向模式）然后我按下后退按钮时，在创建第二个活动之前处于纵向模式的主要活动会破坏自身并重新打开以在横向模式下显示（因为它方向改变后第一次出现在前台）。因此该文件被删除，因为调用 Main.java 中的 onDestroy 方法是为了在第二个活动被销毁后更改其方向。

# android - Android：简化许多类和 xml

> ID：14945677
> 
> 赞同：-3
> 
> 时间：2013-02-18T21:34:32.483
> 
> 标签：android, xml, class

编辑：我无法让它正常工作。可能是因为我不知道我在做什么。无论如何，这是我的代码。如果有人可以提供帮助，我将非常感激：我需要它来显示相应模组的电池情绪图像......

主题：

```
package com.cydeon.plasmamodz;

import android.app.ActionBar;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class Themes extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.themes);
    ActionBar actionBar = getActionBar();
    actionBar.hide();
    Button Plus = (Button) findViewById(R.id.button1);
    Button Blue = (Button) findViewById(R.id.button2);
    Plus.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(Themes.this, Bmod.class);
            i.putExtra("drawableResource", R.drawable.blue);
            Themes.this.startActivity(i);

        }
    });

    Blue.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent a = new Intent(Themes.this, Bmod.class);
            a.putExtra("drawableResource1", R.drawable.plus);
            Themes.this.startActivity(a);

        }
    });

}

} 
```

模组：

```
package com.cydeon.plasmamodz;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;

public class Bmod extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.battery);

    Intent i = getIntent();
    int drawableResource = i.getIntExtra("drawableResource", R.drawable.blue);
    ImageView img = (ImageView) findViewById(R.id.iv1);
    img.setImageResource(R.drawable.blue);

    Intent a = getIntent();
    int drawableResource1 = a.getIntExtra("drawableResource1", R.drawable.plus);
    ImageView img1 = (ImageView) findViewById(R.id.iv1);
    img1.setImageResource(R.drawable.plus);
}

} 
```

电池（xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout                          xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/bInstall"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Install" />

<Button
    android:id="@+id/bReturn"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Return" />

<ImageView
    android:id="@+id/iv1"
    android:layout_width="match_parent"
    android:layout_height="800dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:45:23.840

```
Intent i = new Intent(this, BaseClassForMod);
i.putExtra("drawableResource", R.drawable.this_mod_drawable);
startActivity(i); 
```

然后在那个 Activity 的 onCreate() 中：

```
Intent i = getIntent();
int drawableResource = i.getIntExtra("drawableResource", R.drawable.default);
//Get a reference to your ImageView...
imageView.setImageResource(drawableResource); 
```

不要相信这段代码可以编译，但这是一般的想法。对所有这些都使用相同的 Activity，在 Intent 中传递正确的资源 ID（例如，对于 mod1，发送 mod1 的可绘制 ID），然后在 Activity 中，检查该资源 ID 并以编程方式设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:44:26.063

如果每个类都做同样的事情，你就不应该需要 50 个类和 50 个 xml 布局。做一个活动和一个布局。当用户选择某些东西时，将某种 id 作为 Intent extra 传递给第二个活动，以便它可以加载任何合适的项目。我不知道您的数据是如何建模的，但应该有一种方法来唯一标识每个选项（如果没有，您应该实施一个）。

您的第一个活动也不需要每个项目的按钮。使用 ListView 和 Adapter，然后您只需要为一行提供布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:44:42.417

只做一个活动。在其中获取对您的图像的引用：

```
ImageView iv = (ImageView)findViewById(R.id.yourImgId); 
```

然后将图片设置为您想要的任何一个：

```
iv.setImageResource(R.drawable.battery_img_1); 
```

# python - 使用另一个文件python的内容搜索文件

> ID：14945680
> 
> 赞同：0
> 
> 时间：2013-02-18T21:34:38.007
> 
> 标签：python, file, list, search, strip

我有一个文件，每行都有一个唯一的 ID 号。我正在尝试在不同的文件中搜索这些 ID 号的出现，并将这些 ID 号在第二个文件中的行返回，在本例中为输出文件。我是编程新手，这就是我到目前为止所拥有的。

```
outlist = []
with open('readID.txt', 'r') as readID, \
     open('GOlines.txt', 'w') as output, \
     open('GO.txt', 'r') as GO:  
     x = readID.readlines()
     print x
     for line in GO:
        if x[1:-1] in line:
        outlist.append(line)
        outlist.append('\n')

     if x[1:-1] in line:
        outlist.append(line)
        outlist.append('\n')
     print outlist
     output.writelines(outlist) 
```

文件如下所示：readID.txt

```
00073810.1
00082422.1
00018647.1
00063072.1 
```

GO.txt

```
#query  GO  reference DB    reference family    
HumanDistalGut_READ_00048904.2  GO:0006412  TIGRFAM TIGR00001    
HumanDistalGut_READ_00043244.3  GO:0022625  TIGRFAM TIGR00001    
HumanDistalGut_READ_00048644.4  GO:0000315  TIGRFAM TIGR00001   
HumanDistalGut_READ_00067264.5  GO:0003735  TIGRFAM TIGR00001 
```

*读取的 id 与READ* ...之后的一些但不是全部的 id 匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:11:48.213

```
#!/usr/bin/env python
# encoding: utf-8

import sys
import re

def extract_id(line):
    """
    input: HumanDistalGut_READ_00048904.2  GO:0006412  TIGRFAM TIGR00001
    returns: 00048904.2
    """
    result = re.search(r'READ_(\d{8}\.\d)', line)
    if result != None:
        return result.group(1)
    else:
        return None

def extract_go_num(line):
    """
    input: HumanDistalGut_READ_00048904.2  GO:0006412  TIGRFAM TIGR00001
    returns: 0006412
    """
    result = re.search(r'GO:(\d{7})', line)
    if result != None:
        return result.group(1)
    else:
        return None

def main(argv = None):
    if argv is None:
        argv = sys.argv

    with open('readID.txt', 'r') as f:
        ids = frozenset(f.readlines())

    with open('GO.txt', 'r') as haystack, \
        open('GOLines.txt', 'w') as output:

        for line in haystack:
            if extract_id(line) in ids:
                output.write(extract_go_num(line) + '\n')

if __name__ == "__main__":
    sys.exit(main()) 
```

我正在为 O(n) 解决方案而不是 O(n^2) 交换内存开销。

我正在使用正则表达式来提取 ids 和 go 数字，但如果数字数量发生变化，它会很脆弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:12:49.043

也许是这样的：

```
with open('readID.txt', 'r') as readID, open('GOlines.txt', 'w') as output, open('GO.txt', 'r') as GO:
    for ID in readID:
        for line in GO:
            if ID in line:
                output.write(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:21:39.530

如果您的文件足够小以适合您的内存。

```
with open('/somepath/GO.txt') as f:
    pool = f.readlines()

with open('/somepath/readID.txt') as f:    
    tokens = f.readlines()

# strip spaces/new lines
tokens = [t.strip() for t in tokens]
found = [(t, lno) for t in tokens for (lno, l) in enumerate(pool) if t in l] 
```

`found`然后，您可以将您的列表打印到您的输出文件中。

# java - 活动生命周期和活动堆栈

> ID：14945682
> 
> 赞同：0
> 
> 时间：2013-02-18T21:34:55.550
> 
> 标签：java, android

我有一个具有以下屏幕方案的活动：

```
 |------> Activity1
MainActivity |------> Activity2 
```

应用程序导航仅使用 startActivity() 调用和标准的“后退按钮”功能。

将 Activity 视为`created`介于`onCreate`和`onDestroy`方法之间的情况。

我可以假设在创建活动 1 或活动 2 时也会创建 MainActivity 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:41:09.630

**不能保证**当`MainActivity`你`Activity1/2`在前台时它仍然活着。肯定会在应用程序启动时创建它，因为它是访问`Activity1/2`.

一旦`MainActivity`被另一个活动覆盖，它将处于`Stop`状态并且可以在需要资源时被系统杀死。

您可以通过在活动定义中指定来控制此行为`android:noHistory="true/false"`，默认情况下设置为`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:40:53.730

是的，当 Activity1 或 Activity2 为 时`created`，根据您的定义 MainActivity 也为`created`。因此，如果您尝试从 MainActivity 中访问变量或方法，那么将在那里。

# asp.net-mvc - 使用asp.net mvc时的一些新手knockoutjs问题

> ID：14945688
> 
> 赞同：0
> 
> 时间：2013-02-18T21:35:28.723
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin, knockout-2.0

我是使用 knockoutjs 的新手，因此需要一些关于我想要实现的目标和最佳实践的帮助。

我正在开发一个 mvc4 应用程序，我正在调用一个返回 json 的控制器操作，然后我将它绑定到我的视图模型，例如。

```
 $.getJSON("/cart/summary", function (data) {
        myModel = ko.mapping.fromJS(items);
        ko.applyBindings(myModel , document.getElementById("my-container"));
    }); 
```

myModel 视图模型是从控制器返回的 json 对象的直接表示。

该对象包含一个属性 (Prop1)，它是一个对象，另一个属性 (Prop2) 是一个对象列表。

Prop1 对象包含一个小数属性，我想使用 Globalize 插件将其格式化为货币。最好的做法是什么，应该在视图模型中完成并绑定到视图？如果是这样，我该如何扩展我的模型来做到这一点？还是在视图中完成？

如果 Prop2 有超过 0 个项目，我想显示一个 div，即。它不是空的。再次类似的问题，我应该返回一个表明这一点的属性还是在标记中执行它？

我想绑定一个属性以将文本附加到 div，这是如何完成的？

最后，绑定完成后，我想动画绑定完成的事实 - 不关心效果是什么，只是想知道它是如何完成的？

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:30:36.637

对于一个“问题”来说，这是很多问题。我想我已经解决了所有问题。

* * *

如果你想使用 globalize 插件，你最好在客户端进行货币格式化。作为一般的经验法则，表示逻辑无论如何都应该在表示层中完成。您的业​​务逻辑，甚至其他视图可能不需要货币格式。

* * *

同样，遵循同样的经验法则，表示层是关心模型对象有多少项目的东西。这可以通过 ko 绑定轻松完成。

[http://knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

```
<!-- ko if: listObjectName.length > 0-->
    // put your div and list bindings in here
<!-- /ko --> 
```

* * *

要将文本附加到 div，您可以根据您的确切目标绑定到跨度的文本或 html。

[http://knockoutjs.com/documentation/html-binding.html](http://knockoutjs.com/documentation/html-binding.html)

* * *

要在加载完成后放置动画，可以使用`afterRender`事件。

[http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove](http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove)

总结这篇文章，你需要设置你的模板：

> ```
> <div data-bind='template: { name: "personTemplate",
>                        data: myData,
>                        afterRender: myPostProcessingLogic }'> </div> 
> ```

然后你可以在视图模型`myPostProcessingLogic`上创建函数`myData`。

Here is a stackoverflow post on adding a glow effect on mouse hover or at set intervals. You care most about the technique used for the interval. Instead of doing it at set intervals, you would just do it whenever the `myPostProcessingLogic` is called.

[How do I animate a glowing effect on text?](https://stackoverflow.com/questions/7061420/how-do-i-animate-a-glowing-effect-on-text)

# css - HTML/CSS 之谜？无法确定尺寸在哪里调用

> ID：14945692
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:35:50.707
> 
> 标签：css, html, width, styling

我被要求尝试修改页面以在其他地方使用。

基本上，除了一个我无法解决的谜团之外，我所做的一切。

我基于的页面是[https://wombatservers.com.au/theburrow](https://wombatservers.com.au/theburrow)

请注意顶部描绘 Minecraft 世界的大图像。好吧，基本上我不能让它填满屏幕的整个宽度（它需要在另一个项目中是特定的大小）。但是我一辈子都找不到控制的地方，底部的蓝色页脚也是如此。

因此，如果有人可以帮助我追踪这些元素的宽度被称为哪一行，那就太好了。

（我希望这是我忽略的一个非常明显的事情）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:44:09.720

以下css添加图像：

```
.pager {
  background: url(../images/slide1.jpg) center center repeat-x;
  padding: 50px 0 50px 0;
} 
```

html 看起来像这样：

```
<div class="pager">
  <div class="wrapper">
    <div class="pager-title l">
      <h1>The Burrow</h1>
      <p>Tutorials, lessons, resources and a whole lot more!</p>
    </div>
    <div class="test-text r">
      <h2>By far the best Aussie host I've ever used! No lag at all!<img src="images/bulate2.png" alt="" style="position:relative; margin-left:10px; margin-top:-15px;"></h2> 
      <p>— Jeremy, <a href="#">EmuCraft Australia</a></p>
    </div>
    <div class="c"></div>
  </div>
</div> 
```

您可能希望将寻呼机 div 放入包装器 div 中，如下所示：

```
<div class="wrapper">
  <div class="pager">
    <div class="pager-title l">
      <h1>The Burrow</h1>
      <p>Tutorials, lessons, resources and a whole lot more!</p>
    </div>
    <div class="test-text r">
      <h2>By far the best Aussie host I've ever used! No lag at all!<img src="images/bulate2.png" alt="" style="position:relative; margin-left:10px; margin-top:-15px;"></h2> 
      <p>— Jeremy, <a href="#">EmuCraft Australia</a></p>
    </div>
    <div class="c"></div>
  </div>
</div> 
```

或者类似的东西，但是你必须对页脚做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:41:20.373

两张图片都是背景，并且由于没有设置 background-size 属性，浏览器只使用图像文件的完整宽度并将其裁剪到 html 对象结束的位置。所以header图片的宽度是1600px，footer是1169px。但显示的大小取决于您的视口宽度。

# bash - bash while inside while

> ID：14945693
> 
> 赞同：1
> 
> 时间：2013-02-18T21:35:51.797
> 
> 标签：bash

我有条件测试。我希望变量 A 等于变量 B。在 A 等于 B 之前，可能需要快速连续进行几次测试。不过，我不希望它尝试超过 10 次。

```
A=1
B=2

while [ $A != $B ]
do
  echo "hi there"
done 
```

所以很明显，除非 A 等于 B，否则它将继续循环。以防 A 不会很快等于 B，我想限制尝试的次数。我在想这样的事情：

```
A=1
B=2

COUNT=0
while [ "$COUNT" -le 10 ]
do
    while [ $A != $B ]
    do
      echo "hi there"
      COUNT=`expr $COUNT + 1`
    done

done 
```

我在这里找到了类似问题的答案，但不完全是这个。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:39:49.860

```
A=1
B=2

COUNT=0
while [ "$COUNT" -le 10 ] || [ $A != $B ]
do
  echo "hi there"
  COUNT=`expr $COUNT + 1`
done 
```

如果我理解正确，您不想做太多循环，而是一个带有两个中断条件的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:54:23.840

`while`（以及许多其他复合命令）可以合法嵌套。您的逻辑不太适合您要完成的工作。

```
n=
while [[ $a != "$b" && ++n -le 10 ]]; do
    echo 'hi there'
done 
```

对于纯粹的数字比较，`[`不`[[`应该在 Bash 中使用。

```
for (( n = 0; a != b && ++n <= 10; )); do
    ... 
```

有很多可能性。`expr`顺便说一句，除非您需要与古老的非 POSIX Bourne shell 兼容，否则不要使用或反引号。

# actionscript-3 - 移动剪辑的随机开始时间

> ID：14945698
> 
> 赞同：0
> 
> 时间：2013-02-18T21:36:10.747
> 
> 标签：actionscript-3, flash, actionscript

我希望这些不断增长的圆圈影片剪辑在设定的时间内随机开始，然后在整个影片循环播放之前不再重复。那有意义吗？附件是一个 fla 和 swf 来显示我想要的，除了当然，它们还没有随机开始。

*   动画应该是固定的时间长
*   动画应该重复，但每个 mc 的开始时间是随机的
*   所有 mc 都应该在动画循环之前播放
*   没有 mc 应该播放到 10 帧

fla [https://mega.co.nz/#!8Nwi0KzZ!QlutQQVo-KoPyNaGta9-7GLsYFthI0lMSAqTqtIIiDY](https://mega.co.nz/#!8Nwi0KzZ!QlutQQVo-KoPyNaGta9-7GLsYFthI0lMSAqTqtIIiDY)

瑞士法郎 [https://mega.co.nz/#!4cRFjZ5A!H0ndXA2DfFh79wJGua2Tgk9SquZ1rpEzZE3RCPwYfW4](https://mega.co.nz/#!4cRFjZ5A!H0ndXA2DfFh79wJGua2Tgk9SquZ1rpEzZE3RCPwYfW4)

任何帮助都会很可爱！

谢谢，罗林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:16:48.173

您已在第 1 帧停止圆形影片剪辑，然后使用 setTimeOut 内置函数根据随机数播放它。

您可以使用此函数生成一个随机数：

```
function GenerateRandomNumber(max:Number, min:Number = 0):Number
{
     return Math.random() * (max - min) + min;
} 
```

您可以使用参数 max 和 min 定义设置的时间量，如下所示：

```
GenerateRandomNumber(4,1); 
```

这将为您提供 1 到 4 秒之间的随机时间。您可以根据需要更改这些值。

您最好在圆形动画剪辑的父级中定义此函数，以便在需要时在其他地方重用它。

然后，在您停止它的圆形影片剪辑的最后一帧，您需要检查是否所有圆形影片剪辑都停止或不重播动画。您可以通过使用所有已完成影片剪辑的总数增加一个计数器来实现此目的。

您可以使用在圆形影片剪辑的父级中定义的函数来执行此操作，以跟踪所有这些剪辑，如下所示：

```
var CircleMcsPlayedCount:int = 0;
var TotalCirclesCount:int = 12;

function CircleMcFinishedPlayback()
{
     CircleMcsPlayedCount++;
     if(CircleMcsPlayedCount == TotalCirclesCount){
         CircleMcsPlayedCount = 0;
         this.gotoAndPlay(1);
     }
} 
```

您可以在圆形影片剪辑的最后一帧使用这行代码调用它：

```
MovieClip(parent).CircleMcFinishedPlayback(); 
```

在此函数中，当帐户等于影片剪辑的总数时，您再次将计数设置为零并将播放头再次移动到第一帧以再次播放动画。您可以将此函数中的任何代码放在所有圆圈播放完毕后需要执行的 if 语句中。

我已经修改了您上传的文件并应用了所有更改，以防您想在自己尝试之前看到它的实际效果。

这是文件：

[https://mega.co.nz/#!JxtFgTJK!LWpuFCXTYrkmMK_6tm_1cAp3MKpB1h33URufrr1Pkk4](https://mega.co.nz/#!JxtFgTJK!LWpuFCXTYrkmMK_6tm_1cAp3MKpB1h33URufrr1Pkk4)

我已将其保存为 flash cs4，因为我不知道您的版本，也没有旧版本。

# c++ - 动态分配的指针数组中的悬空指针

> ID：14945699
> 
> 赞同：0
> 
> 时间：2013-02-18T21:36:12.670
> 
> 标签：c++, arrays, pointers, memory, allocation

这是一个悬空指针吗？

```
int x = 25;
int** arr = new int*[5];
*arr[1] = x; 
```

我不知道为什么这不起作用... *arr[1] 只是一个指针，并且指向一个有效的内存地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:39:00.307

`arr[1]`是一个`int*`，并且它是未初始化的。取消引用它是未定义的行为。

你可以说`arr[1] = &x;`, then`arr[1]`将指向`x`and`*arr[1]`将是 25。

* * *

完成后不要忘记`delete [] arr;`。

# dynamic - 用于动态字段名称的 Crystal Reports 公式

> ID：14945702
> 
> 赞同：1
> 
> 时间：2013-02-18T21:36:27.003
> 
> 标签：dynamic, crystal-reports, report, formulas

我试图弄清楚这一点，但无济于事。我正在使用的数据库具有显示基于期间的 GL 帐户余额的字段（例如`{GLAF.BAL1}`，`{GLAF.BAL2}`等`{GLAF.BAL3}`）。我正在寻找一种方法来显示基于当前日期的余额总和。

我有以下公式来确定当前期间是什么（我们的财政年度从 8 月 1 日开始：

```
if month(currentdate) >= 8 then Period := (Month(currentdate)-7) else Period := (Month(currentdate)+5) 
```

有没有一种方法可以创建一个基本上可以执行以下操作的公式。两个例子来确保它是清楚的：

示例 1（当前期间 = 4）：

```
Balance =: ({GLAF.BAL1} + {GLAF.BAL2} + {GLAF.BAL3}) 
```

示例 2（当前期间 = 7）：

```
Balance =: ({GLAF.BAL1} + {GLAF.BAL2} + {GLAF.BAL3} + {GLAF.BAL4} + {GLAF.BAL5} + {GLAF.BAL6}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:14:29.753

我不知道完全“动态”的东西，但我会做类似的事情：

```
local numberVar Balance := 0;

if {@period} > 1 then
  Balance := Balance + {GLAF.BAL1};

if {@period} > 2 then
  Balance := Balance + {GLAF.BAL2};

if {@period} > 3 then
  Balance := Balance + {GLAF.BAL3};

Balance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:38:46.667

您可以像这样稍微缩短公式：

```
if {?period} >= 1 then {GLAF.BAL1} +
if {?period} >= 2 then {GLAF.BAL2} + 
if {?period} >= 3 then {GLAF.BAL3} + 
if {?period} >= 4 then {GLAF.BAL4} + 
if {?period} >= 5 then {GLAF.BAL5} + 
if {?period} >= 6 then {GLAF.BAL6} + 
if {?period} >= 7 then {GLAF.BAL7} + 
if {?period} >= 8 then {GLAF.BAL8} + 
if {?period} >= 9 then {GLAF.BAL9} + 
if {?period} >= 10 then {GLAF.BAL10} + 
if {?period} >= 11 then {GLAF.BAL11} + 
if {?period} >= 12 then {GLAF.BAL12} 
```

但是要小心没有值，`NULL`因为这需要更仔细的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:01:35.317

*使用*SQL 表达式或公式字段将 NULL 转换为零。每个数据库字段都需要一个（在您的情况下为 12 个）。

SQL 表达式语法：

```
-- {%GLAF.BAL01}
-- convert NULL to 0
NVL(GLAF.BAL1,0) 
```

公式字段语法：

```
// {@GLAF.BAL01}
// convert NULL to 0
If IsNull({GLAF.BAL1}) Then 0 Else {GLAF.BAL1} 
```

创建一个公式字段来汇总这些字段：

```
// {@Balance}
// place each field in an array; summarize array
// use formula fields to convert NULL to 0
Numbervar Array periods := [{@GLAF.BAL01},{@GLAF.BAL02},...,{@GLAF.BAL12}];

Local Numbervar balance:=0;
Local Numbervar i;

For i := 1 To {?period} Do (
    balance := balance + periods[i];
);

balance; 
```

# ios - 如何从 Xcode IOS 崩溃中查找与可变内存地址相关的代码？

> ID：14945705
> 
> 赞同：3
> 
> 时间：2013-02-18T21:36:38.710
> 
> 标签：ios, objective-c, xcode, ios6, automatic-ref-counting

我在这里遇到了一个奇怪的崩溃，我认为它是由外部库引起的，但是我无法跟踪堆栈跟踪，并且不确定如何使用 Xcode 的内存探索工具。

这是我在控制台崩溃时得到的内容：

```
*** Terminating app due to uncaught exception 'NSGenericException',
    reason: '*** Collection <__NSArrayM: 0x208c5d00> was mutated while being enumerated.'
*** First throw call stack:
    (0x37ae32a3 0x35e0d97f 0x37ae2d85 0x7c57d 0x728b1 0x6b865 0x34d9f11f 0x34d9e4b7 0x34da31bd 0x37ab6f3b 0x37a29ebd 0x37a29d49 0x368602eb 0x38ffb2f9 0x643d1 0x64358)
libc++abi.dylib: terminate called throwing an exception 
```

我正在使用 MKNetworkKits UIImageView`setImageFromURL`添加来向 UITableViewCell imageview（自定义 imageview 对象，而不是 UITableViewCell 附带的默认 imageview）提供图像。当我删除此`setImageFromURL`呼叫时，我没有遇到任何崩溃。

我尝试在命令行上使用`dwarfdump`和`atos`，但上述崩溃中的地址都没有链接到任何特定的函数地址。

我已经搜索了执行枚举循环的地方`forin`，但似乎找不到任何真正改变数据的地方。显然我忽略了一些东西..

任何建议/提示/帮助都将非常感激..

编辑：到目前为止感谢您的评论。关于如何利用内存地址追踪实际代码行的任何提示都会有所帮助 - Xcode 可以做一些 Visual Studio 调试器可以做的事情，关于代码和内存检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:43:38.190

**脚步 ：**

1.  运行应用程序并检查哪个`ViewController`应用程序因此异常而崩溃。
2.  一旦您找到该`ViewController`控制器的检查整个代码`NSArray`。
3.  检查您从该控制器调用的相关委托（如果有）。
4.  检查您在该控制器中使用的所有自定义子类。

从描述看来，您正在枚举`NSArray`并检查它的值。一旦你找到你想要改变这些值的值。因此，您正在创建一个`mutableCopy`of`NSArray`并尝试在当前运行的枚举中进行更改。

解决方案 ：

1.  创建`NSMutableArray`外部枚举。当您找到要更改的值时，枚举两个数组`NSArray`的值将保持不变。`objectAtIndex:`在可变副本中更改它（在外部创建）。[**不利于记忆**]
2.  创建`NSMutableArray`当前 NSArray 的外部枚举。然后枚举`NSMutableArray`。[**枚举可变副本时枚举会变慢**]

猎杀虫子！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:36:24.130

这可能对您有用：

用这个替换你的 main.m 文件代码（对于 ARC）：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        int retVal = -1;
        @try {
            retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([FRAppDelegate class]));
        }
        @catch (NSException* exception) {
            NSLog(@"Uncaught exception: %@", exception.description);
            NSLog(@"Stack trace: %@", [exception callStackSymbols]);
        }
        return retVal;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:44:59.607

我建议，从简单的地方开始，你正在改变一个数组，可能是`NSMutableArray`一个循环内部。这可以通过使用临时存储轻松解决，它们在循环完成后删除临时对象。

如果这没有帮助，请[设置一个异常断点](http://developer.apple.com/library/mac/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)以中断所有异常。这可能会在导致错误的代码行上停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:09:23.970

这有助于：

[https://stackoverflow.com/a/12266856/420594](https://stackoverflow.com/a/12266856/420594)

编辑 Debug 方案并从 LLDB 切换到 GDB 帮助很大——崩溃点现在直接指向我自己的代码行。

# php - json_encode 不会生成我需要的 JSON 表单

> ID：14945708
> 
> 赞同：1
> 
> 时间：2013-02-18T21:36:50.753
> 
> 标签：php, json

我的 jquery 脚本无法获得有效响应。

我的回复：

```
{
    "success": true,
    "data": {
        "attack": null,
        "shield": null,
        "speed": null,
        "cargo": null,
        "upg_slots": "1"
    }
} 
```

代码：

```
echo json_encode(array(
    'success' => true,
    'data' => array(
        'attack' => null,
        'shield' => null,
        'speed' => null,
        'cargo' => null,
        'upg_slots' => "1"
    )
)); 
```

有效回复：

```
{
    "success": true,
    "data": [
        {
            "attack": null,
            "shield": null,
            "speed": null,
            "cargo": null,
            "upg_slots": "1"
        }
    ]
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:38:49.810

看起来您`'data'`在响应中的键下又缺少了一个数组，只需像这样再次包装它：

```
 echo json_encode(array('success' => true, 'data' => array(array( 'attack' => null, 'shield' => null, 'speed' => null, 'cargo' => null, 'upg_slots' => "1"))));
//                                                    ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:39:40.653

如果您需要一个包含单个字典的列表，则需要将关键字数组嵌套在位置数组中：

```
$data = array(
    array(
        'attack' => null,
        'shield' => null,
        'speed' => null,
        'cargo' => null,
        'upg_slots' => "1"
    )
);
echo json_encode(array('success' => true, 'data' => $data)); 
```

# c# - 按值趋势的折线图颜色

> ID：14945709
> 
> 赞同：0
> 
> 时间：2013-02-18T21:36:55.917
> 
> 标签：c#, .net, mschart

是否可以通过 mschart 创建折线图，它是线条颜色的一部分，其趋势不同？我的意思是，值上升的部分与 aelues 上升的部分不同，而相等的部分不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:46:46.763

在 peltier 论坛上有一些 VBA 代码（折线图中线条的条件格式）：

[http://peltiertech.com/WordPress/conditional-formatting-of-lines-in-an-excel-line-chart-using-vba/](http://peltiertech.com/WordPress/conditional-formatting-of-lines-in-an-excel-line-chart-using-vba/)

我不知道这样做的自动方式。

# c# - System.Web.Http.AuthorizeAttribute 无法识别自定义角色提供程序

> ID：14945713
> 
> 赞同：3
> 
> 时间：2013-02-18T21:37:06.130
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api

在我的 MVC 4 Web API 项目中，我有一个自定义角色提供程序，它通过`System.Web.Mvc.Authorize`我的 Home 上的属性按设计工作`System.Web.Mvc.Controller`。

在任何`System.Web.Http.ApiController`具有`System.Web.Http.Authorize`自定义角色的提供者上都不会被调用，总是返回 false。有没有办法指定 Web API AuthorizeAttribute 选择我的自定义角色提供程序，如 MVC AuthorizeAttribute？

角色提供者：

```
public class CustomRoleProvider : RoleProvider
{        
    //Overriden methods
    public override string[] GetRolesForUser(string username)
    {
        //Always return "Master" for testing purposes
        return new string[] { "Master" };
    }

    public override bool IsUserInRole(string username, string roleName)
    {
        //Always return true for testing purposes
        return true;
    }

    //Other overridden method stubs...
} 
```

网络配置：

```
<roleManager defaultProvider="CustomRoleProvider" enabled="true" cacheRolesInCookie="false" >
  <providers>
    <clear />
    <add name="CustomRoleProvider" type="MyApp.SecurityExtensions.CustomRoleProvider, MyApp" />
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:54:56.170

这不是一个真正的答案，但这可能会有所帮助：

这两个属性都通过查询当前主体来工作。MVC 属性使用 HTTPContent.User，而 System.Web.http 版本使用 Thread.CurrentPrincipal，但差别很小。

我对 Web API 不是很熟悉，但我怀疑 RoleManagerModule 在属性触发时没有运行，或者您还没有到达 PostAuthenticateRequest 事件，因为在那种情况下模块替换了 Pricipal。

您确定您的 WebAPI 使用需要某种形式的 ASP 身份验证吗？如果您没有将 WebAPI 项目配置为需要某种形式的身份验证，那么显然您将永远无法到达 PostAuthenticateRequest 事件，因此 RoleManagerModule 将永远不会启动。

想到的最后一种可能性是，在 RoleManagerModule 这样做之后，其他东西正在替换 Principal。如果可能，暂时删除 System.Web.Http.AuthorizeAttribute，在控制器中设置断点，并确定 Thread.CurrentPrincipal 有什么类。这可能会提示您哪里出错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:53:36.083

您需要使用 System.Web。**Web API 控制器的Http** .AuthorizeAttribute。示例：[http ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

# c# - 如何创建 asp.net 网页/站点项目？

> ID：14945720
> 
> 赞同：2
> 
> 时间：2013-02-18T21:37:41.750
> 
> 标签：c#, asp.net, visual-studio-2012, webmatrix, asp.net-webpages

我在 Windows 8 中使用 Visual Studio 2012 Ultimate。

我对如何启动 asp.net 网页网站感到困惑。是否通过 Visual Studio，通过选择 File | 新网站 | ASP.NET 网站（Razor v2）或（其他选择）或者我是否需要从 WebMatrix 创建 asp.net 网页网站，如果需要，我是否需要从 Visual Studio 单独安装 WebMatrix，或者是作为 Visual Studio 的一部分安装？

在 Windows 8 中搜索名为“WebMatrix”的应用程序的存在没有返回任何结果...

## 更新

迈克，我已经完成了你的书的三分之一，我认为这很棒。

几天前的晚上，我读到你在哪里叫大括号括号，反之亦然，几乎大声说：“这只猫一定是英国人！” 然后，我阅读了宣布这一确切事实的卷首。

无论如何，我今天午餐时正在阅读“C# 5.0 in a Nuts Hell”，然后读到：（一个小背景：Albahari 男孩们在这里讨论 asp.net MVC）“*你在 Web 表单中失去的是设计师。这使得 Web对于以静态内容为主的网页，表单仍然是一个不错的选择。* ”（第 194 页底部）。

这（“主要是静态内容”）描述了我将要构建的站点为 T：大部分内容将是静态或指向其他站点的简单链接。唯一的非静态内容将是 Bing 地图上的图钉，但即使这些也可以被视为静态的（取决于一个人对静态的定义），因为它们实际上将保持相同的超集 - 用户只需选择他们想要查看的子集在任何给定时间。

我认为，我网站的“静电”电压还取决于您是否将 PayPal 按钮、Twitter 窗口和旋转广告也称为静态。

无论如何，我说了这么多就是要说：在我的情况下，Web Forms 会比 Web PAGES 更好吗？如果你的书的其余部分回答了这个问题，请原谅我，但是……我不是世界上最有耐心的猫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:42:21.640

WebMatrix 是一个 IDE - 而不是一个开发框架。它主要用于支持的开发框架称为 ASP.NET 网页框架。但是，在 Visual Studio 中，它被称为 ASP.NET 网站 (Razor vx)，正如您所发现的，它可以通过“新网站”选项进行访问。

您无需安装 WebMatrix 即可开发这些类型的应用程序。但是，WebMatrix 在网页站点的模板方面提供了更多选择，并且启动速度比 VS 快得多。另一方面，WebMatrix 不包含任何调试工具。

WebMatrix 与 Visual Studio 完全分离，没有随它一起安装。如果你想安装 WebMatrix，你可以在这里得到它：http: [//www.microsoft.com/web/webmatrix/](http://www.microsoft.com/web/webmatrix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T23:52:03.607

This might not be the answer to the question, but I just started using WebMatrix and it seems much easier and convenient to use mostly because of the various templates available.

# node.js - 服务器上的多个 github 私有 npm 存储库

> ID：14945726
> 
> 赞同：5
> 
> 时间：2013-02-18T21:37:57.127
> 
> 标签：node.js, github, ssh, npm

我在私有存储库中的 github 上有一个节点应用程序。该节点应用程序还具有我制作的自定义模块，它们位于单独的私有存储库中。

这是示例节点应用程序 URL：

```
git@github.com:thomas/node-application.git 
```

这些都是节点应用程序使用的节点模块。

```
git@github.com:thomas/node-module1.git
git@github.com:thomas/node-module2.git 
```

您可以使用以下内容在 github 上安装私有 npm 模块。

```
npm install git+ssh://git@github.com:thomas/node_module1.git 
```

为了使其正常工作，机器需要设置 ssh 密钥。

我的本地机器设置了我的 github 用户密钥并可以访问我的所有存储库。

但是在我的服务器上，我使用的是部署密钥。我知道如何使用多个部署密钥的唯一方法如下。

```
Host na.github.com
HostName github.com
User git
IdentityFile ~/.ssh/gh_node-application
ForwardAgent yes

Host nm1.github.com
HostName github.com
User git
IdentityFile ~/.ssh/gh_node-module1
ForwardAgent yes

Host nm2.github.com
HostName github.com
User git
IdentityFile ~/.ssh/gh_node-module2
ForwardAgent yes 
```

所以我需要在服务器上安装模块

```
npm install git+ssh://git@nm1.github.com:thomas/node_module1.git
                          ^^^ 
```

这意味着生产和开发依赖关系会有所不同

```
"node-module": "git+ssh://git@github.com:thomas/node-module1.git" 
```

对比

```
"node-module": "git+ssh://git@nm1.github.com:thomas/node-module1.git"
                              ^^^ 
```

* * *

如果我能做这样的事情，这可能会奏效……</p>

```
Host github.com
HostName github.com
User git
IdentityFile ~/.ssh/gh_node-application
IdentityFile ~/.ssh/gh_node-module1
IdentityFile ~/.ssh/gh_node-module2
ForwardAgent yes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-08T01:01:37.830

您必须使用部署密钥授予服务器 SSH 访问您的私有 github 存储库的权限。

[https://developer.github.com/guides/managing-deploy-keys/](https://developer.github.com/guides/managing-deploy-keys/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T18:00:17.620

查看有关从全局目录或其他路径加载模块的 Node.js 文档。

[http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)

# c# - 即使没有选择索引，DropDownList 上的 DataBind 也会引发异常

> ID：14945728
> 
> 赞同：0
> 
> 时间：2013-02-18T21:38:02.527
> 
> 标签：c#, asp.net, exception

所以我收到了这个错误

```
{"'drpButton1' has a SelectedValue which is invalid because it does not exist in the list of items.\r\nParameter name: value"} 
```

从我能读到的所有内容中，这是因为 DropDownList 要么有现有项目，要么有一个不在新数据绑定项目中的选定索引或值。

但问题是我可以保证对象中没有现有项目，我也可以自信地说没有选择可能超出范围的索引。

这是 DropDownList 对象在 .databind() 调用之前的样子。

![在 databind() 调用之前的 DropDownlList 对象](../Images/10652ffb9c8b5501517542fd0161fc8d.png)

在这里，它直接在导致所有爆炸的 databind() 调用之后。 ![在此处输入图像描述](../Images/4726437012a00cf72b58b34a1905022d.png)

我的列表对象包含 7 个项目，特别是它包含数据绑定方法随机决定选择的项目。

但这是踢球者，我用完全相同的数据填满了 8 个下拉列表，它在第一个下拉列表中工作得很好。不知道为什么第二个会爆炸。

编辑：这是执行绑定的代码：

这是 load 方法的一个片段。第一个调用成功，第二个调用失败，但它不会一直失败。

```
 private void LoadShortCodeDropDownData()
        {
            // Initilization junk to get the resultList to use.

   base.LoadListDropDown(drpButton0, (IList)resultList, "DeviceShortCodeIndexID", "DeviceShortCodeName", select);
                MessageTextEnabled(drpButton0);

                base.LoadListDropDown(drpButton1, (IList)resultList, "DeviceShortCodeIndexID", "DeviceShortCodeName", select);
                MessageTextEnabled(drpButton1);
}

    protected void LoadListDropDown(DropDownList dropDown, IList list, string valueField, string textField, string insertItem)
    {
        LoadListDropDown(dropDown, list, valueField, textField);
        //dropDown.Items.Insert(0, new ListItem(insertItem, ""));
    }

protected void LoadListDropDown(DropDownList dropDown, IList list, string valueField, string textField)
        {
            dropDown.DataSource = list;
            dropDown.DataValueField = valueField;
            dropDown.DataTextField = textField;
            dropDown.DataBind();
        } 
```

EDIT2：我认为我在这里遇到的真正问题是数据绑定如何选择要选择的项目？我注意到第一个获取数据绑定的下拉列表随机选择列表中的第一个值，而第二个下拉列表出于某种原因尝试绑定到列表中的最后一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:50:44.177

我以前遇到过这个问题，我认为您不能将同一个列表绑定到多个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:06:54.123

这是在第一次加载页面时发生的，还是在回发后发生的？因为如果它是一个回发，你很可能`SelectedIndex == 0`只是默认的。

我不能保证这会解决问题，但您可以尝试添加

```
dropDown.SelectedIndex = -1; 
```

...到你的第二个`LoadListDropDown`超载的顶部。

# sql - 更新 postgresql 中的列

> ID：14945730
> 
> 赞同：1
> 
> 时间：2013-02-18T21:38:11.120
> 
> 标签：sql, postgresql

我发现我在一个包含超过 4 万条记录的数据库中有一个字符可变列，其中包含错误。它包含数字。每个数字必须有 12 位数字，但由于某种原因，其中很多数字最终都有 10 位数字。好消息是，我唯一要做的就是在每个只有 10 位数字并以数字“22”开头的单元格前面加上“55”，而保留 12 位数字的单元格保持不变。

我的目标是这样的：

```
UPDATE 
  table 
SET 
  column = CONCAT( '55', column ) 
WHERE 
  LENGTH( column ) = 10 AND column LIKE( '22%'); 
```

我正在考虑使用这个：

```
UPDATE 
  telephones 
SET 
  telephone_number = CONCAT( '55', telephone_number ) 
WHERE 
  LENGTH( telephone_number ) = 10 AND telephone_number LIKE( '22%'); 
```

我做对了吗？如果没有，正确的方法是什么

如果数字不是存储为大整数而不是字符串，同样的规则适用，它仍然是 10 位长，这意味着数字小于 3.000.000.000 并且大于 2.000.000.000？并且它们都必须是相同的数字，以 55 开头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:13:53.023

答案是：是的，没错。您可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!12/606af/1)使用示例数据库。那个使用`BIGINT`类型。另请参阅[@gmm 的这篇文章](http://sqlfiddle.com/#!12/6a0a9/1)，它使用 VARCHAR 形式。两者都像您使用原始语法描述的那样工作。

# javascript - 图片库下一步按钮从 ID 更新 alt

> ID：14945735
> 
> 赞同：0
> 
> 时间：2013-02-18T21:38:42.070
> 
> 标签：javascript, jquery, attributes, image-gallery, alt

我正在尝试制作一个简单的图片库。这就是我现在所拥有的：

**现场演示**：http: [//jsfiddle.net/rgvqA/](http://jsfiddle.net/rgvqA/)

```
var NumberOfImages = 7;

var img = new Array(NumberOfImages);

img[0] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number0.jpg";
img[1] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number1.jpg";
img[2] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number2.jpg";
img[3] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number3.jpg";
img[4] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number4.jpg";
img[5] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number5.jpg";
img[6] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number6.jpg";

var imgNumber = 0

    function NextImage() {
        imgNumber++;
        if (imgNumber == NumberOfImages) {
            imgNumber = 0;
        }    
        document.images["largeImage"].src = img[imgNumber];
    }

    function PreviousImage() {
        imgNumber--;
        if (imgNumber < 0) {
            imgNumber = NumberOfImages - 1;
        }
        document.images["largeImage"].src = img[imgNumber];
    }

$(document).ready(function() {
    $('#thumbs').delegate('img', 'click', function() {
        imgNumber = $(this).attr('id');
    });
});

$('#thumbs').delegate('img', 'click', function () {
    $('#largeImage').attr('src', $(this).attr('src').replace('thumb', 'large'));
    $('#description').html($(this).attr('alt'));
}); 
```

**问题**：当我单击`next`和`previous`按钮时，描述的替代文本不会相应改变。仅当我单击缩略图时才会这样做。

如何将`alt`文本更新为当前显示的任何图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:50:48.703

图片标题没有通过单击箭头按钮设置，因为它们调用的函数 (`NextImage`和`PreviousImage`) 没有任何更新它的代码。

您可以使用它`imgNumber`来检索正确的拇指图像，获取它的替代文本，并使用它更新描述元素：

```
$('#description').html($('#'+imgNumber).attr('alt')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:51:55.793

[http://jsfiddle.net/rgvqA/2/](http://jsfiddle.net/rgvqA/2/) 您只是忘记`$('#description')`在 next 和 prev 函数中更新您的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:59:13.150

这是因为你的代码导致的 ( `$('#description').html($(this).attr('alt'));`) 其中`this`指的是小拇指。因此，您正在从拇指中获取替代文本。

尝试像上面对图像所做的那样在数组中创建描述。

`var desc = new Array(NumberOfImages);`

```
`desc[0] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number0.jpg";
desc[1] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number1.jpg";
desc[2] = "http://www.kidsmathgamesonline.com/images/pictures/numbers600/number2.jpg";
desc[3] = "http://www.kidsmath` 
```

在这里打电话

```
 function NextImage() {
        imgNumber++;
        if (imgNumber == NumberOfImages) {
        imgNumber = 0;
        }    
        document.images["largeImage"].src = img[imgNumber];
        var desc = desc[imgNumber];
        $('#description').text(desc);
    }

    function PreviousImage() {
        imgNumber--;
        if (imgNumber < 0) {
        imgNumber = NumberOfImages - 1;
        }
        document.images["largeImage"].src = img[imgNumber];
        var desc = desc[imgNumber];
        $('#description').text(desc);
    } 
```

# magento - 如何获取搜索词重写 URL？

> ID：14945736
> 
> 赞同：0
> 
> 时间：2013-02-18T21:38:42.880
> 
> 标签：magento

我想获取 Search Term rewrite URL 的变量文本，如下图所示： ![在此处输入图像描述](../Images/7a79b085edabf904b7c8dea7926113f4.png)

如何在代码中获取此文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:09:50.003

```
echo Mage::getModel('catalogsearch/query')->load(1)->getRedirect(); 
```

其中 1 是目录搜索条目的 ID。

# azure-media-services - 带有旋转的 Azure 媒体服务视频编码

> ID：14945738
> 
> 赞同：1
> 
> 时间：2013-02-18T21:38:59.157
> 
> 标签：azure-media-services

我有用手机纵向录制的视频，需要用 90、-90 或 180 度旋转对其进行编码。

编码预设似乎没有这个选项。

[http://msdn.microsoft.com/en-us/library/windowsazure/jj129582.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj129582.aspx)

如何定义视频资产的编码旋转？

**编辑**：

从媒体服务论坛得到答案。目前不支持。

[http://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/68090985-b1ad-4d52-bb08-c4386654c1b9](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/68090985-b1ad-4d52-bb08-c4386654c1b9)

# c# - 在实体框架中使用扩展方法进行投影

> ID：14945748
> 
> 赞同：2
> 
> 时间：2013-02-18T21:39:36.953
> 
> 标签：c#, entity-framework, linq-to-entities

是否可以在实体框架中使用扩展方法进行投影：

```
public class ProjectRepository
{
    public IQueryable<ProjectDto> GetActiveProjects()
    {
        // db.Projects is a DbSet<Project>
        // i want to use a projection to convert it to ProjectDto,
        // I know I can do new ProjectDto but I would rather do an
        // extension method and abstract that logic out
        return from p in db.Projects
            where p.Status == "Active"
            select p.AsProjectDto();
    }
} 
```

现在我收到以下错误：

LINQ to Entities 无法识别方法“AsProjectDto”方法，并且此方法无法转换为存储表达式。

LINQ to SQL 似乎能够处理这个问题，但实体框架却不能。是否有某种方式我需要编写扩展方法以便它在 EF 中工作？

这是我的扩展方法：

```
public static class ProjectExtensions
{
    public static ProjectDto AsProjectDto(this Project project)
    {
        return new ProjectDto
        {
            Id = project.Id,
            Name = project.ProjectName
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T21:49:20.753

要对数据调用 C# 方法以对其进行投影，您需要将该部分转换为 Linq to Objects 查询；

```
return (from p in db.Projects
        where p.Status == "Active"
        select p)
    .AsEnumerable().Select(x => x.AsProjectDto()); 
```

这将从数据库中进行数据选择，并将数据作为 Enumerable 返回，您可以在该 Enumerable 上进行投影。

编辑：现在不能用 EF 测试它，但是既然你问了，你应该也可以在数据库中使用表达式来做它；

```
private static readonly Expression<Func<Project, ProjectDto>> AsProjectDto = 
    x => new ProjectDto {Id = x.Id, Name = x.ProjectName};

return db.Projects.Where(p => p.Status == "Active").Select(AsProjectDto); 
```

# javascript - 从构造函数获取对象的所有javascript函数，但不是使用“this”分配的函数？

> ID：14945753
> 
> 赞同：0
> 
> 时间：2013-02-18T21:39:53.383
> 
> 标签：javascript, underscore.js

我需要在构造函数中获取所有函数名称，**不包括那些分配`this`**有的函数：

```
var MyObject = function (arg1, arg2) {
    this.arg1 = arg1;
    this.arg2 = arg2;

    // Get all functions, i.e. 'foo', excluding 'arg1' and 'arg2'
};

MyObject.prototype.foo = function() {} 
```

我用过 Underscore.js，但没有运气。假设**实际参数**都是函数：

```
var MyObject = function (arg1, arg2) {
    this.arg1 = arg1;
    this.arg2 = arg2;

    // Array of object function names, that is 'foo', 'arg1' and 'arg2'
    var functions = _.functions(this);

     // Loop over function names
    _.each(functions, function (name) {}, this) {
        // Function arguments contain this.name? Strict check ===
        if(_.contains(arguments, this.name) {
            functions = _.without(functions, name); // Remove this function
        }
    }
};

MyObject.prototype.foo = function() {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:42:17.703

您要求原型定义的所有功能：

```
_.functions(MyObject.prototype); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:45:42.540

上的函数`this`是您在构造函数中分配的函数以及从原型继承的函数。所以你需要做的是查询原型的功能：

```
var funcs = _functions(Object.getPrototypeOf(this)); 
```

以上适用于所有相当现代的浏览器。对于早期的 IE，你可以回退到非标准

```
var funcs = _functions(this.__proto__); 
```

# ruby-on-rails-3 - Rails 嵌套资源和路由 - 如何分解控制器？

> ID：14945754
> 
> 赞同：25
> 
> 时间：2013-02-18T21:39:55.803
> 
> 标签：ruby-on-rails-3, model-view-controller

我有以下型号：

*   邮政
*   标签
*   TaggedPost（Post 和 Tag 通过 has_many :through 从中获得关联）

我有以下`routes.rb`文件：

```
resources :tags

resources :posts do
  resources :tags
end 
```

因此，当我导航到 时`/posts/4/tags`，这将使我进入 Tag 控制器的索引操作，其`post_id`值设置在参数数组中。凉爽的。

我的问题是，既然我正在访问帖子下的嵌套标签资源，我还应该点击标签控制器吗？或者我现在应该设置一些其他控制器来处理标签的嵌套性质吗？否则我必须在标签控制器中构建额外的逻辑。这当然可以做到，但这是处理嵌套路由和资源的常用方法吗？我在标签控制器的索引操作中的代码如下：

**标签控制器.rb**

```
def index
  if params[:post_id] && @post = Post.find_by_id(params[:post_id])
    @tags = Post.find_by_id(params[:post_id]).tags
  else
    @tags = Tag.order(:name)
  end
  respond_to do |format|
    format.html
    format.json {render json: @tags.tokens(params[:q]) }
  end
end 
```

我可以看到这个控制器中的代码越来越大，因为我计划将许多额外的资源与标签资源相关联。关于如何打破这一点的想法？

问题总结：

1.  If a resource is nested, should the nested resource be going through a different controller representing the nested nature of the resource? This is opposed to going through the normal controller as I am in the code example that I provided.
2.  If so, how should these controllers be named and setup?

Let me know if you need more information.

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-18T23:30:43.563

I think the best solution is to split up controllers:

```
 resources :tags

    resources :posts do
      resources :tags, controller: 'post_tags'
    end 
```

And then you have 3 controllers. Optionally, you can inherit PostTagsController from TagsController to do something like:

```
 class PostTagsController < TagsController
        def index
            @tags = Post.find(params[:post_id]).tags
            super
        end
    end 
```

If the difference is only the retrieval of tags, you can:

```
 class TagsController < ApplicationController
        def tags
            Tag.all
        end

        def tag
            tags.find params[:id]
        end

        def index
            @tags = tags
            # ...
        end
        # ...
    end

    class PostTagsController < TagsController
        def tags
            Product.find(params[:product_id]).tags
        end
    end 
```

Use that methods and simply override tags in the inheriting controllers ;)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T23:00:33.970

All you are doing with nested resources is changing the routing URL. Only thing you would have to do is make sure you are passing the proper id (in your case post)to the tag controller. Most common error is the Can't Find *** ID.

If you don't nest a profile route into a user route it would look like this

> domain.com/user/1
> 
> domain.com/profile/2

When you nest the routes it would be

> domain.com/user/1/profile/2

That is all that it is doing and nothing else. **You don't need additional controllers**. Doing nested routing is just for looks. allowing your user to follow the association. The most important thing about nesting routes is that you make sure you make the link_to's to the right path.

When not nested: it would be

```
 user_path 
```

and

```
 profile_path 
```

when it is nested you would need to use

```
user_profile_path 
```

`rake routes` is your friend to find out how the routes have changed.

Hope it helps.

# css - CSS：为什么只有第一个元素的高度不同？

> ID：14945757
> 
> 赞同：0
> 
> 时间：2013-02-18T21:40:09.593
> 
> 标签：css

这里：[URL](http://www.fipfip.com/symfony/web/app_dev.php/pizzas/partenaire/inscription)第一个字段是 40 像素高，而所有其他字段都是 30 像素。我不明白这怎么可能。

我想要：

*   纠正和理解问题
*   使所有字段“垂直对齐”（标签不垂直居中）。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:17:14.810

在回答你的第二个问题时，给标签一个`line-height`等于它旁边的输入。你也可以试试：

```
position: relative;
top: 50%;
bottom: 50%;
line-height: 0; 
```

以获得更一般的风格。只需将它应用到`.labels`或其他东西上，而不是单独设置每个样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:24:31.557

以下来自 bootstrap 的 css 在您的输入下方添加 10px 边距：

```
select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
  height: 20px;
  padding: 4px 6px;
  margin-bottom: 10px;
} 
```

我删除了一些东西，但是 20px 的高度加上 8px 的垂直填充，2px 的边框和 10px 的边距底部意味着这将有 40px 的总高度。

覆盖此样式，但添加`margin: 0`此特定元素。

# arrays - 如何在 Microsoft Access 数据库中循环遍历数组并创建表？

> ID：14945759
> 
> 赞同：0
> 
> 时间：2013-02-18T21:40:19.500
> 
> 标签：arrays, vb.net, ms-access, foreach

`tickerArray`我有一个以五个股票代码命名的数组。对于中的每个股票代码，`tickerArray`我需要在我的 Microsoft Access 数据库中创建一个表。我需要为其各自的股票代码命名每个表。我知道如何通过 vb.net 创建表，但是在命名每个表时遇到了麻烦。正如您在下面的代码中看到的那样，我尝试了类似的操作`For Each tickerValue in tickerArray`，然后尝试`tickerValue`分别命名每个表。但是下面的代码创建了第一个表并将其命名为“tickerValue”，然后当它创建第二个表时它会抛出错误并指出数据库中已经有一个名为“tickerValue”的表。关于如何在每个股票代码之后命名每个表的任何想法？提前致谢！

```
Imports System.Data.OleDb

Public Class Form1

Public Shared tickerArray() As String = {"GOOG", "V", "AAPL", "BBBY", "AMZN"}

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For Each tickerValue In tickerArray
        'connection string
        Dim my_connection As String = "PROVIDER=Microsoft.Jet.OLEDB.4.0;Data Source=C:\database\customers.mdb"

        'query string
        Dim my_query As String = "CREATE TABLE tickerValue ( Customer_Number Counter)"

        'create a connection
        Dim my_dbConnection As New OleDbConnection(my_connection)

        'create a command
        Dim my_Command As New OleDbCommand(my_query, my_dbConnection)

        'connection open
        my_dbConnection.Open()

        'command execute
        my_Command.ExecuteNonQuery()

        'close connection
        my_dbConnection.Close()
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:02:20.663

您可能应该听听每个告诉您这是一个坏主意的人。

但是您的问题是由于将变量的名称插入 SQL 而不是变量中保存的值引起的错误：

改变这个：

```
'query string
Dim my_query As String = "CREATE TABLE tickerValue ( Customer_Number Counter)" 
```

对此：

```
'query string
Dim my_query As String = String.Format("CREATE TABLE [{0}] ( Customer_Number Counter)", tickerValue) 
```

# html - 为什么这个 html5 画布动画不起作用？

> ID：14945760
> 
> 赞同：0
> 
> 时间：2013-02-18T21:40:24.620
> 
> 标签：html, animation, canvas, setinterval

所以我试图在 Canvas 中加深对动画的理解，但由于某种原因，这段代码不起作用。黄色矩形出现，但位置没有迭代。`<script src = "images/drawing.js"></script>`这个脚本在我的 html 代码中被引用。这是绘图.js：

```
 var x = 400;
 var y = 300;

 function init() {

     var canvas = document.getElementById("canvas");
     var context = canvas.getContext("2d");
     canvas.width = 800;
     canvas.height = 600;

     context.fillStyle = "black";
     context.fillRect(x,y,150,150);
     setInterval(animateBox(context), 30);

 }

 function animateBox(context) {

     context.clearRect(0,0,context.canvas.width,context.canvas.height);
     x += 5;
     context.fillStyle = "yellow";
     context.fillRect(x,y,150,150);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:08:48.270

更改`setInterval(animateBox(context), 30);`为

```
setInterval(function(){
    animateBox(context)
}, 30); 
```

我认为这就是问题所在。这个问题有点模糊。确保您也在调用该`init()`函数（尽管您可能是）。

# ruby-on-rails-3 - redis上ECONNREFUSED怎么办？

> ID：14945761
> 
> 赞同：0
> 
> 时间：2013-02-18T21:40:37.097
> 
> 标签：ruby-on-rails-3, amazon-ec2, redis, capistrano, sidekiq

我已经为此工作了几天，但我无法弄清楚出了什么问题。

其他一切正常，但我在 redis 上得到“ECONNREFUSED”。我有以下实例正在运行：

```
app01 ROLE: app
web01 ROLE: web
db01 ROLE:db:primary
redis01 ROLE:redis_master
redis02 ROLE:redis_slave
sidekiq01 ROLE:redis 
```

这是生产日志中的错误：

```
Redis::CannotConnectError (Error connecting to Redis on localhost:6379 (ECONNREFUSED)):
app/models/user.rb:63:in `send_password_reset'
app/controllers/password_resets_controller.rb:10:in `create' 
```

一切都是使用橡胶宝石设置的。

我试图删除所有实例并从头开始两次。我也尝试制定自定义安全规则，但我不知道我是否做得对。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T17:41:54.657

把这篇文章从死里复活，因为我今天在同样的问题上挣扎时发现了它。我通过执行以下操作解决了我的问题：

1.  我将 redis_slave 或 redis_master 角色添加到使用`cap rubber:add_role`. 我发现这将添加指定的角色和通用的“redis”角色。假设您希望 redis01 在添加角色后成为唯一的 redis_master ，我希望您的环境具有：

    ```
    app01 ROLE: app
    web01 ROLE: web
    db01 ROLE:db:primary
    redis01 ROLE:redis_master
    redis01 ROLE:redis
    redis02 ROLE:redis_slave
    redis01 ROLE:redis
    sidekiq01 ROLE:redis_slave
    sidekiq01 ROLE:redis 
    ```

2.  设置角色后，我更新了服务器`cap rubber:bootstrap`

3.  在*我的*环境中，我从 git 部署代码，因此我必须提交这些更改并运行`cap -s branch="branch_name_or_sha" deploy`以在具有新角色的服务器上获取 Rubber/deploy-redis.rb 并执行它。

完成所有这些之后，redis 在我的所有节点上运行，而不会`Redis::CannotConnectError (Error connecting to Redis on localhost:6379 (ECONNREFUSED))`在其中任何一个节点上抛出错误。

祝你好运！

# c# - 打字时如何在文本框末尾设置焦点？

> ID：14945765
> 
> 赞同：0
> 
> 时间：2013-02-18T21:40:56.927
> 
> 标签：c#, javascript, asp.net

我有一个带有实时搜索功能的文本框。除了一个问题，一切都很好。如果我在上面输入任何字符，它就会失去焦点。如果我设置 textbox.Focus()，光标会在文本框的开头。

我已经尝试了互联网上的大多数解决方案。请在下面检查我的代码。

```
asp:TextBox ID="searchCompany" runat="server" Text="" CssClass="searchCompany" AutoPostBack="true" Width="190px" OnTextChanged="searchCompany_TextChanged"></asp:TextBox> 
```

在 page_Load

```
protected void Page_Load(object sender, EventArgs e)
        {

            //ScriptManager1.RegisterAsyncPostBackControl(Menu1);
            menuDisplay();
            searchCompany.Attributes.Add("onkeyup", "setTimeout('__doPostBack(\\'" + searchCompany.UniqueID + "\\',\\'\\')', 0);");

            //searchCompany.Attributes.Add("onfocus", "javascript:setSelectionRange('" + "','')");
            //searchCompany.Focus();

        } 
```

我已经尝试过如下的javascript

```
<script type="text/javascript">

    function setSelectionRange() {
        var inputField = document.getElementById('searchCompany');
        if (inputField != null && inputField.value.length > 0) {
            if (inputField.createTextRange) {
                var FieldRange = inputField.createTextRange();
                FieldRange.moveStart('character',inputField.value.length);
                FieldRange.collapse();
                FieldRange.select();
            }
        }
    }

</script> 
```

我试图将代码放在“searchCompany_TextChanged”方法上，如果用户每次在文本框中键入任何字符，该方法就会调用，但它不能正常工作。

我看到了使用 Textbox.Select() 的其他解决方案，但我猜 System.Windows.Control 在 asp.net 中不起作用。

任何的想法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:47:23.397

有一个非常简单的技巧对我有用。基本上，将输入自身的文本值设置为它自己的文本值，这会将光标移动到文本的末尾。然后集中注意力。此代码使用 jQuery 来演示这一点，但您也应该能够在直接 JS 中做到这一点。

**HTML**

```
<input type="text" id="focusText"></input>
<button id="focusButton">Set Focus</button> 
```

**JavaScript**

```
$("#focusButton").click(function()  {
    var text = $("#focusText").val();
    $("#focusText").val(text).focus();
}) 
```

这是 JavaScript 的非 jQuery 示例，HTML 应该相同：

```
document.getElementById("focusButton").onclick = function()  {
    var inputElement = document.getElementById("focusText");
    var text = inputElement.value;
    inputElement.value = text;
    inputElement.focus();
} 
```

这是一个演示代码的非 jQuery 版本的小提琴：http: [//jsfiddle.net/C3gCa/](http://jsfiddle.net/C3gCa/)

# objective-c - UIBezierPath 具有相同来源的行

> ID：14945766
> 
> 赞同：2
> 
> 时间：2013-02-18T21:40:58.360
> 
> 标签：objective-c, uibezierpath

我正在尝试绘制源自一个点（UIView 的中心）的线条，如下所示：

```
- (void)drawRect:(CGRect)rect {
   UIBezierPath *path = [self createPath];
   [path stroke];

   path = [self createPath];
   CGAffineTransform rot = CGAffineTransformMakeRotation(2 * M_PI/16);
   [path applyTransform:rot];
   [path stroke];

   path = [self createPath];
   rot = CGAffineTransformMakeRotation( 2 * M_PI/8);
   [path applyTransform:rot];
   [path stroke];
}

- (UIBezierPath *) createPath {
    UIBezierPath *path = [UIBezierPath bezierPath];
    CGPoint start = CGPointMake(self.bounds.size.width/2.0f, self.bounds.size.height/2.0f);
    CGPoint end = CGPointMake(start.x + start.x/2, start.y);
    [path moveToPoint:start];
    [path addLineToPoint:end];
    return path;
} 
```

这个想法是绘制同一条线并应用旋转（围绕中心 = 线的起点）。结果是这样的：

[https://dl.dropbox.com/u/103998739/bezierpath.png](https://dl.dropbox.com/u/103998739/bezierpath.png)

两条旋转的线似乎也以某种方式偏移。图层锚点默认为 0.5/0.5。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:06:39.970

在 iOS 中，默认坐标系原点位于图层的左上角。（`anchorpoint`与图层及其超图层之间的关系有关，但与图层内的坐标系无关。）

要将坐标系的原点移动到图层的中心，可以先应用平移：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, self.bounds.size.width/2.0f, self.bounds.size.height/2.0f);

    UIBezierPath *path = [self createPath];
    [path stroke];

    path = [self createPath];
    CGAffineTransform rot = CGAffineTransformMakeRotation(2 * M_PI/16);
    [path applyTransform:rot];
    [path stroke];

    path = [self createPath];
    rot = CGAffineTransformMakeRotation( 2 * M_PI/8);
    [path applyTransform:rot];
    [path stroke];
}

- (UIBezierPath *) createPath {
    UIBezierPath *path = [UIBezierPath bezierPath];
    CGPoint start = CGPointMake(0, 0);
    CGPoint end = CGPointMake(self.bounds.size.width/4.0f, 0);
    [path moveToPoint:start];
    [path addLineToPoint:end];
    return path;
} 
```

结果：

![在此处输入图像描述](../Images/d0c16f29a24e72718d9a8e9b5efa7134.png)

# java - REST Get 调用 Java 进行分页

> ID：14945771
> 
> 赞同：0
> 
> 时间：2013-02-18T21:41:13.977
> 
> 标签：java, rest

我正在使用 REST 客户端来使用 Java 获取所有用户。我有这个工作，我有一个不同的方法来检索所有用户和按 ID 检索用户。在所有用户方法中，我想添加一个分页逻辑，而不是这个 url /api/v1/Users 我应该能够提供 /api/v1/Users?count=10 。有什么方法可以从 All Users 方法的 url 中读取值 10 吗？目前我的方法是这样的。

```
@GET
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response retrieveAll() {
......

...

return response
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:44:41.533

```
public Response retrieveAll(@QueryParam("count") Integer count) {
  ...
} 
```

# c# - 我对这个正则表达式做错了什么？

> ID：14945773
> 
> 赞同：0
> 
> 时间：2013-02-18T21:41:23.290
> 
> 标签：c#, regex

```
(?!^\*)\w{1,20} 
```

我试图确保输入的长度在 1 到 20 个字符之间，并且不以“*”开头。但是，允许任何其他角色在阳光下。

该表达式在 c# 中不起作用，但似乎可以使用此测试器工作：[http ://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

我需要改变什么？

感谢您对此的任何见解。

编辑：根据要求，这里是 c# 代码：

```
System.Text.RegularExpressions.Regex TempRegex = new System.Text.RegularExpressions.Regex(@"(?!^\*)\w{1,20}");
return TempRegex.IsMatch(_inputString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:46:16.793

不完全确定您尝试使用~~first capture~~ [zero-width negative lookahead assertion](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#zerowidth_negative_lookahead_assertion)做什么，但以下正则表达式似乎符合您的要求：

```
@"^[^\*]\w{0,19}$" 
```

`"^...$"`部分强制匹配整个字符串。第一个字符`"[^\*]"`（除星号外的任何字符）已计入 [1-20] 限制，因此范围为 {0,19}。

# javascript - 最小化时如何调整我的浮动条

> ID：14945779
> 
> 赞同：0
> 
> 时间：2013-02-18T21:41:50.537
> 
> 标签：javascript, css, blogger, sidebar

现在下面的代码浮动到内容的左侧，向下滚动时它是可见的。到目前为止，只要窗口最大化，一切都很好。但是，当它被最小化或您增加缩放时，该栏会显示在我不想要的内容上。在这些情况下（最小化窗口和增加缩放），我希望栏被卡在左边距上，这样它就不会显示在内容上。显然，当向下滚动时（如果窗口最大化），该栏必须保持向左浮动并且可见。我需要做哪些更改才能完成此操作？非常感谢您提前的支持！

```
#pageshare 
{
position:fixed; 
bottom:15%; 
right:10px; 
float:left; 
border: 1px solid #5c5c5c; 
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius:5px;
background-color:#e5e5e5;
padding:0 0 2px 0;
z-index:10;}

#pageshare .sbutton 
{
float:left;
clear:both;
margin:5px 5px 0 5px;
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:58:25.783

您可以通过使用 JavaScript 修改主站点容器和容器的属性来完成此操作`pageshare`。为简单起见，我使用了[jQuery](http://jquery.com/)。

**调整站点边距 ( [jsfiddle](http://jsfiddle.net/ArGKd/3/) )**

我创建了一种根据`pageshare`容器所需空间量调整站点边距的方法。首先，此方法计算容器所需的空间量`pageshare`（基于其宽度和左侧偏移量）和可用空间量（从窗口宽度中减去站点宽度，如果为负值则归一化为零）。然后该方法计算这两个值之间的差并将该值应用于站点容器的左边距。这确保`pageshare`容器不会覆盖内容。此外，我设置和删除`scroll`事件处理程序的原因是，否则`pageshare`当您左右滚动时，容器仍会出现在小窗口的内容上（[问题示例](http://jsfiddle.net/ArGKd/2/)）。

```
function adjustSiteMarginForPageShare() {
    // Get the window dimensions
    var windowWidth = $(window).width();
    var windowHeight = $(window).height();
    // Get the site width
    var siteWidth = $('#inner-wrapper').outerWidth();
    // Get the pageshare dimensions
    var pageshareWidth = $('#pageshare').outerWidth();
    var pageshareHeight = $('#pageshare').outerHeight();
    // Get the pageshare left offset
    var pageshareLeft = $('#pageshare').offset().left;

    // Calculate the needed pageshare space
    var pageshareSpaceNeeded = pageshareWidth + pageshareLeft;
    // Calculate the available pageshare space (division because of centering)
    var pageshareSpaceAvailable = (windowWidth - siteWidth) / 2;
    // Ensure the minimum available pageshare space as zero
    pageshareSpaceAvailable = (pageshareSpaceAvailable > 0) ? pageshareSpaceAvailable : 0;

    // If the pageshare space available is less than what is needed
    if (pageshareSpaceAvailable <= pageshareSpaceNeeded) {
        // Calculate the left margin needed as the difference between the two
        var leftMarginNeeded = pageshareSpaceNeeded - pageshareSpaceAvailable;

        // Add the left margin needed to the site
        $('#inner-wrapper').css('margin-left', leftMarginNeeded);

        // Modify the pageshare style
        $('#pageshare').css({
            'position': 'absolute'
        });

        // Set the pageshare scroll behavior
        $(window).off('scroll.pageshare');
        $(window).on('scroll.pageshare', function() {
            // Set the bottom to top conversion factor (100% total height - 15% bottom offset = 85% top offset)
            var conversionFactor = 0.85;
            // Calculate the top offset based on the conversion factor and the pageshare height
            var pageshareTopOffset = (conversionFactor * windowHeight) - pageshareHeight;
            // Adjust the pageshare top offset by the current scroll amount
            pageshareTopOffset += $(window).scrollTop();

            $('#pageshare').css({
                'top': pageshareTopOffset + 'px',
                'bottom': 'auto'
            });
        });

        // Trigger the pageshare scroll handler
        $(window).triggerHandler('scroll.pageshare');
    } else {
        // Reset the pageshare style
        $('#pageshare').css({
            'position': 'fixed',
            'top': 'auto',
            'bottom': '15%'
        });

        // Turn off the pageshare scroll behavior
        $(window).off('scroll.pageshare');
    }
} 
```

最后一步是在页面加载和每次调整窗口大小时调用该方法。

```
// Adjust the content margin for pageshare container on load
adjustSiteMarginForPageShare();

// When the window is resized
$(window).resize(function () {
    // Adjust the content margin for the pageshare container
    adjustSiteMarginForPageShare();
}); 
```

# html - 到处都是奇怪的 CSS 间距

> ID：14945783
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:42:08.703
> 
> 标签：html, css

好的，所以我用一些 CSS 和 HTML 制作了一个模板。然而，如果你在菜单栏之间看，会有一堆空白。内容和侧边栏也很奇怪。如果你看顶部，顶部有一堆填充，但我没有在任何地方应用任何填充！帮助！

链接到网站[http://techtubecentral.com/demo/](http://techtubecentral.com/demo/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:44:00.920

试试这个，希望它会工作

```
 <style type="text/css">    
    ul{
     margin:0px;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:45:35.143

默认情况下指定填充和边距。它是最初由 W3C 联盟生成的一部分。您只需要一张 CSS 重置表。

[http://www.cssreset.com/](http://www.cssreset.com/)

您可以将其作为单独的文件附加到您的站点，例如 reset.css。或者，您可以直接将重置代码复制粘贴到您的 styles.css 文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:47:08.573

Naveen 的解决方案是正确的 b/c 存在来自浏览器样式表的默认边距。添加

```
* {margin:0; padding:0;} 
```

作为您样式表中的第一行 - 这是对所有元素的这些属性的简单重置，您将不会再遇到从浏览器样式表级联下来的“幻像”填充和边距问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:48:05.893

使用标签时，您会发现浏览器会自动添加边距，有时可能不需要填充。

尝试添加边距：0px；和填充：0px；就像好的做法一样。

# c++ - 如何在指向基类对象的指针向量中引用派生对象？

> ID：14945787
> 
> 赞同：1
> 
> 时间：2013-02-18T21:42:18.203
> 
> 标签：c++, inheritance, vector

我正在尝试用 C++ 构建一个国际象棋游戏。

我有一个基类 gamePiece 和一个派生类 rook。我最初的想法是创建一个 gamePiece 对象的向量，并在其中插入所有不同类型的 gamePieces（车、皇后、棋子）。正如我在上一个问题中发现的那样，我不能这样做——gamePiece 向量只接受基类（即gamePiece）对象。

但是，建议使用智能指针和其他技术。我会尽快尝试的。

但我仍然很好奇为什么下面的技术不起作用。如果我改为创建一个指向 gamePieces 的指针向量，然后尝试将指向我的派生对象的指针存储在该向量中会怎样？

```
vector<gamePiece *> vectorOfPointersToGamePieces;  
vector<gamePiece *>::iterator itOfPointersToGamePieces; 
```

例如，假设我在上述向量的第一个位置插入一个指向车对象的指针。最初我认为可能有用的是这个策略：

```
vectorOfPointersToGamePieces.push_back( &(rook(1, "Rook", 'A', 1, "White", "Up")  ) );
itOfPointersToGamePieces=vectorOfPointersToGamePieces.begin();  
( * ( * (itOfPointersToGamePieces))).displayPieceInfo(); 
```

构造函数似乎运行良好，一切都初始化了。但是当需要使用 cout 在屏幕上显示数据成员的值时，变量似乎是空的/未初始化的。就像他们消失了一样。

我的第二次破解是尝试在将车指针插入向量之前将其动态转换为游戏指针，就像这样。

```
vectorOfPointersToGamePieces.push_back( dynamic_cast <gamePiece *> (&(rook(1, "Rook", 'A', 1, "White", "Up")  ) ) ); 
```

但这产生了与上面完全相同的输出。空/统一变量。

在我第三次尝试时，我退后一步，尝试了一个更简单的操作。在这里，我尝试在向量中插入指向 gamePiece 的指针，而不是指向 rook 的指针。

```
vectorOfPointersToGamePieces.push_back( &(gamePiece(1, "Rook", 'A', 1, "White", "Up")) ); 
```

即使是第三个操作也存在问题——当我尝试显示操作时，只保留了我在构造函数中初始化的一些变量：

```
itOfPointersToGamePieces=vectorOfPointersToGamePieces.begin();
( * ( * (itOfPointersToGamePieces))).displayPieceInfo(); 
```

更具体地说，整数和字符被保留并正确显示。但弦是空的，消失了。

任何人都知道为什么我的策略不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:46:30.663

你的问题是你正在获取一个临时对象的地址并将其存储在你的 中`std::vector`，然后该对象被销毁并且你指向一个无效的对象。

`rook(1, "Rook", 'A', 1, "White", "Up")`构造一个临时`rook`对象，您将 with 的地址`&`和`push_back`它放入`vectorOfPointersToGamePieces`. 该临时`rook`文件在行尾消失了，并且指针处于`vectorOfPointersToGamePieces`悬空状态。用该指针做几乎任何事情都会导致未定义的行为。

您可能需要`rook`像这样动态分配对象：

```
vectorOfPointersToGamePieces.push_back(new rook(1, "Rook", 'A', 1, "White", "Up")); 
```

`delete`但是，当你完成它时，你需要确保它。这就是为什么人们告诉你使用`std::shared_ptr`（或`std::unique_ptr`）。如果您有 a`std::vector<std::shared_ptr<gamePiece>>`那么您可以执行上述操作，而不必担心`delete`对象。

顺便说一句，命名 a`std::vector<gamePiece*>`似乎`vectorOfPointersToGamePieces`有点傻，不是吗？变量的名称应该描述它在抽象问题级别上的含义，而不是其底层类型。你最好打电话给它`gamePieces`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:46:20.387

您正在推送临时对象的地址。当您检索并取消引用该指针时，临时地址不再有效。

这是未定义的行为。

您需要将对象持久化，或者使用 分配它们`new`，或者在一个范围内静态创建它们，该范围在您需要它们的持续时间内有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:46:45.577

现在您将临时对象的地址存储到您的向量中。一旦该语句完成执行，临时对象就会被销毁，因此指针不再有效。当您尝试取消引用这些指针时，您会得到未定义的行为。

如果要将指针存储在向量中，则几乎需要动态分配对象，例如使用`new`. 换句话说，替换：

```
[your_vector].push_back( &(rook(1, "Rook", 'A', 1, "White", "Up") 
```

和：

```
[your_vector].push_back(new rook(1, "Rook", 'A', 1, "White", "up")) 
```

你会得到定义的行为。请注意，我并不是真的建议这样做——正如您（显然）已经被告知的那样，您可能想要使用某种智能指针（例如，`std::unique_ptr`在这种情况下似乎是合理的）。不过，这确实摆脱了您未定义的行为——它只是让您手动管理内存的工作，最好避免这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:49:43.193

所有这些尝试都会创建和存储指向临时表达式的指针。然后当您稍后尝试使用指针时，您会得到未定义的行为。

要改为动态创建对象，请使用`new`关键字 (or `std::make_shared`)。并且使用`std::unique_ptr`orso`std::shared_ptr`您不必担心在学习指针时通常会出错的一百件事中的一半。

```
vector<std::unique_ptr<gamePiece>> vectorOfPointersToGamePieces;
std::unique_ptr<gamePiece> rk( new rook(1, "Rook", 'A', 1, "White", "Up") );
vectorOfPointersToGamePieces.push_back(std::move(rk)); 
```

或者，

```
vector<std::shared_ptr<gamePiece>> vectorOfPointersToGamePieces;
vectorOfPointersToGamePieces.push_back(
  std::make_shared<rook>(1, "Rook", 'A', 1, "White", "Up") ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T22:04:53.797

由于有少量固定数量的部件，只需创建它们。然后将它们的地址放入向量中。不需要智能指针。

```
rook white_kings_rook(/* whatever */);
// ...

std::vector<game_piece*> whites_pieces;
whites_pieces.push_back(&white_kings_rook); 
```

# spring-ldap - 如何使 LdapContextSource 指向 UnboundID InMemoryDirectoryServer？

> ID：14945788
> 
> 赞同：2
> 
> 时间：2013-02-18T21:42:19.827
> 
> 标签：spring-ldap, unboundid-ldap-sdk

我有一组基于 Spring LDAP 框架的旧自动化测试用例。它们连接到外部 LDAP 服务器。我正在考虑用嵌入式服务器替换外部服务器。UnboundID InMemoryDirectoryServer 看起来很有吸引力，特别是如果有一种方法允许基于 Spring LDAP 的客户端连接基于 UnboundID 的嵌入式服务器。问题是：怎么做？我是LDAP新手，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:08:05.253

外部和嵌入式 LDAP 服务器的情况实际上并没有太大区别。配置时`LdapContextSource`，您必须将服务器的 url 设置为类似`ldap://localhost:33389/`（假设您的嵌入式服务器侦听端口 33389）。

请注意，默认情况下，UnboundID`InMemoryDirectoryServer`将在运行时随机选择一个空闲端口，除非您将其配置为侦听固定端口。这可能会帮助您入门：

```
InMemoryDirectoryServerConfig config = 
        new InMemoryDirectoryServerConfig("dc=example, dc=com");

// make sure that the server listens on port 33389
config.setListenerConfigs(
        new InMemoryListenerConfig("myListener", null, 33389, null, null, null));

InMemoryDirectoryServer ds = new InMemoryDirectoryServer(config);

ds.startListening();

// import some test data from an ldif file
ds.importFromLDIF(true,"content.ldif"); 
```

# php - PHP 中的异常 - 未被捕获

> ID：14945789
> 
> 赞同：-4
> 
> 时间：2013-02-18T21:42:24.383
> 
> 标签：php, exception

我习惯用 php 编写自己的异常，实际上它非常简单。你所要做的就是：

```
class Test extends Exception{
    public function __construct($message, $code = 0){
    }
} 
```

我不断遇到的问题是，每当我做类似的事情时：

```
throw new Test('bla'); 
```

我得到：

```
uncaught exception with message bla. 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:43:46.520

因为你没有抓住它，也许？:p

```
try {
  throw new Test('bla');
}
catch (Exception $e)
{
  // caught it
} 
```

请[参阅手册](http://php.net/manual/en/language.exceptions.php)以了解正确的异常用法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:44:21.930

如果您在调用堆栈中没有任何更高块的情况下抛出异常`catch`，则该异常将不被捕获，因此您会收到错误消息。也许您应该阅读更多关于[异常如何工作](http://php.net/manual/en/language.exceptions.php)以真正理解这个概念的内容。

# java - 无法在通用类中调用实体的保存

> ID：14945791
> 
> 赞同：0
> 
> 时间：2013-02-18T21:42:30.500
> 
> 标签：java, generics, service, dao

```
public class JobAssetService extends GenericService<JobAssetService, JobAsset, JobAssetDao> {

} 
```

我正在尝试为我的服务层提供通用的 save() 功能，但它似乎不喜欢我传递给`dao.save()`. 这似乎应该工作......

需要不兼容的类型：M 找到：java.lang.object

```
public class GenericService<T, M, Dao extends GenericDao> {

    protected Dao dao;
    protected EntityManager em;

    public GenericService() {

    }

    //map the dao/entity manager when instantiated
    public GenericService(Class<Dao> daoClass) {
        //map entity manager & dao
        //code removed for readability
    }

    public M save(M entity) {
        EntityTransaction tx = em.getTransaction();
        tx.begin();
        entity = dao.save(entity); //IntelliJ complains about this
        tx.commit();

        return entity;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:46:03.457

在 IntellijIDEA 中，您可以将光标放在错误上，然后使用 ALT + ENTER 并且 Intellij 可能会建议您转换结果

```
dao.save(entity) 
```

作为“M”

```
entity = (M) dao.save(entity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:49:25.177

你也应该`GenericDao`使用泛型：

```
class GenericDao<M> {
    public M save(M entity) {
        ...
    }
} 
```

然后按如下方式扩展您的通用服务：

```
public class GenericService<T, M, Dao extends GenericDao<M>> { 
```

# php - algorithm/query to get statistical data from table using php/mysql

> ID：14945796
> 
> 赞同：0
> 
> 时间：2013-02-18T21:42:46.617
> 
> 标签：php, mysql, algorithm, statistics

I have the following table structure:

```
CREATE TABLE test(
   myID INT,
   num1 INT,
   num2 INT,
   num3 INT,
   PRIMARY KEY (myID)
)engine=innodb; 
```

now i have the following data in the table:

```
myID   num1   num2   num3
1      15     27     98
2      27     38     66
3      15     27     77 
```

now i need to run 2 queries, first query runs to select all numbers and on PHP side i count the number of times each number appeared (frequencies), the second query should select the second most frequent number. **First query:**

```
$numfreq = PDO->prepare('
                SELECT num1, num2, num3
                FROM test
            ');
   $numfreq->execute();
   $allNums = array();
   while ($row = $numfreq->fetch(PDO::FETCH_ASSOC)) {
      $allNums[] = intval($row['num1']);
      $allNums[] = intval($row['num2']);
      $allNums[] = intval($row['num3']);
   }

   $numFrequencies = array_count_values($allNums);
   arsort($numFrequencies); 
```

this correctly returns frequencies of each number from the table. Now for the second part

**THIS IS WHERE I NEED HELP:**

I get the most frequent appeared number in this case its **27** since its frequency is **3**, I need to select that 1 number that appears the most next to **27** means i need to get somehow number **15** since it appears twice next to **27**.

i can probably figure out algorithm on PHP side but i was wondering if its possible to do it using query?

so the final result would be:

```
most frequent number: 27
most frequent number 27 combined with 15 appears 2 times and is most frequent combination. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:01:33.553

```
select val, count(val) as frequency
from 
(select num1 as val from test
 union all
 select num2 as val from test
 union all
 select num3 as val from test
 ) as b
group by val
order by frequency desc
limit 2 
```

Sqlfiddle [here](http://sqlfiddle.com/#!2/17833/20).

The inner query converts the three columns into a result set with just one column - highlight the inner query, and you'll see how it works. We then use that result set as the source for the counting/ordering query.

# android - Android 生命周期：每个步骤应该发生的时间

> ID：14945800
> 
> 赞同：0
> 
> 时间：2013-02-18T21:42:53.543
> 
> 标签：android, android-lifecycle

这可能是一个有点愚蠢的问题，但是在 Android 生命周期中，何时是实现每个步骤的最佳部分？我的游戏流程如下：

1.  onCreate 之前：存储在 JSON 文件中的数据在游戏开始时被解析为字符串列表
2.  onCreate：生成基本 UI
3.  onStart/onResume：游戏开始：从列表中随机选择项目，用户选择相应项目继续
4.  如果用户是正确的，则从列表中选择另一个项目。出现 10 次
5.  10个项目后，游戏结束并向用户显示分数

这会被认为是好的做法吗？我对生命周期步骤有点困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:46:43.790

[这](http://www.herongyang.com/Android/Activity-onCreate-and-Callback-Methods.html)可能有助于更多地了解 Android 应用程序的生命周期。以下内容来自该网站：

> 如上一节所述，一个活动的生命周期有 4 个状态和 3 个生命周期。如果你想监控和添加自己的代码逻辑到一个activity，你可以使用android.app.Activity类提供的以下7个基本回调方法：
> 
> *   onCreate() - 首次创建活动时调用。这是您应该进行所有常规静态设置的地方：创建视图、将数据绑定到列表等。此方法还为您提供了一个包含活动先前冻结状态的 Bundle（如果有的话）。onCreate() 后面总是跟着 onStart()。
>     
>     
> *   onRestart() - 在您的活动停止之后和重新开始之前调用。onRestart() 后面总是跟着 onStart()。
>     
>     
> *   onStart() - 当活动对用户可见时调用。onStart() 之后是 onResume() 如果活动进入前台，或者 onStop() 如果它被隐藏。
>     
>     
> *   onResume() - 当活动开始与用户交互时调用。此时，您的活动位于活动堆栈的顶部，用户输入将转到它。onResume() 后面总是跟着 onPause()。
>     
>     
> *   onPause() - 当系统即将开始恢复之前的活动时调用。这通常用于提交对持久数据的未保存更改、停止动画和其他可能消耗 CPU 的事情等。此方法的实现必须非常快速，因为在此方法返回之前不会恢复下一个活动。onPause() 后跟 onResume() 如果活动返回到前面，或者 onStop() 如果它对用户不可见。
>     
>     
> *   onStop() - 当活动不再对用户可见时调用，因为另一个活动已经恢复并覆盖了这个活动。这可能是因为正在启动一项新活动，正在将现有活动带到此活动之前，或者此活动正在被销毁。onStop() 后跟 onRestart() 如果此活动返回与用户交互，或 onDestroy() 如果此活动即将消失。
>     
>     
> *   onDestroy() - 在你的活动被销毁之前你收到的最后一个调用。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:53:51.220

您如何在 onCreate 之前预加载数据？在调用 onCreate 之前，您没有 Context 对象可以使用应用程序文件系统。这是[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html)的文档，如您所见， onCreate 是您可以运行代码的第一个方法。

我建议将数据加载放在其他线程中，例如 AsyncTask。

所以：

1.  生成基本 UI
2.  开始数据预加载不在主线程中
3.  加载数据后更新 UI

# sql - 批量加载：在数据文件中遇到了意外的文件结尾

> ID：14945803
> 
> 赞同：0
> 
> 时间：2013-02-18T21:43:00.450
> 
> 标签：sql, database, sql-server-2008, sql-server-2008-express, loaddata

我正在使用 SQL Server Express 2008

当我尝试将 txt 文件中的数据加载到此表中时

```
create table Clients
(
ClientID int not null IDENTITY (9000,1),
LastName varchar (30)not null,
FirsName varchar (30)not null,
MidInitial varchar (3),
DOB date not null,
Adress varchar (40) not null,
Adress2 varchar (10),
City varchar (40) not null,
Zip int not null,
Phone varchar (30) ,
CategCode varchar (2) not null,
StatusID int  not null,
Hispanic BINARY default 0,
EthnCode varchar(3) ,
LangID int,
ClientProxy varchar (200),
Parent varchar (40),
HshldSize int default 1,
AnnualHshldIncome INT,
MonthlyYearly VARCHAR(7) ,
PFDs INT,
WIC BINARY default 0,
Medicaid BINARY default 0,
ATAP BINARY default 0,
FoodStamps BINARY default 0,
AgencyID int not null,
RoutID int  ,
DeliveryNotes varchar (200),
RecertificationDate date not null,
Notes text,
Primary Key (ClientID)
); 
```

我用

```
SET IDENTITY_INSERT Clients2 ON;
BULK INSERT Clients2
FROM 'c:\Sample_Clients.txt'  
WITH
(
   FIELDTERMINATOR = ',', 
   ROWTERMINATOR = '\r\n'  
) 
```

SQL Server Express 给我带来错误

> 消息 545，级别 16，状态 1，行 2 当 IDENTITY_INSERT 设置为 ON 或复制用户插入 NOT FOR REPLICATION 标识列时，必须为表“客户端”中的标识列指定显式值。

文件只有一行（现在只是示例数据）我检查了很多次它的一行

数据看起来像这样

```
13144,Vasya,Pupkin,,1944-10-20,P.O. Box 52,,Wrna,99909,(907) 111-1111,SR,4,0,W,1,,,3,1198,month,0,0,1,0,1,45,,,2011-04-27 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T23:19:31.187

您需要在批量插入语句中使用参数 KEEPIDENTITY。这是在负载中保留标识值所必需的。

```
BULK INSERT Clients2 FROM 'c:\Sample_Clients.txt'
    WITH ( KEEPIDENTITY, FIELDTERMINATOR = ',', ROWTERMINATOR = '\r\n'
) 
```

我还认为您会遇到问题，因为您没有 Notes 列的数据或占位符。添加到文件末尾的逗号应解决此问题。

# android - Android：将 Drawable Ids 分配给下载的图像

> ID：14945807
> 
> 赞同：0
> 
> 时间：2013-02-18T21:43:32.040
> 
> 标签：android, android-drawable

有没有办法为下载的图像分配 ID？我有一个项目，所有图像都可以通过 ID 访问，但现在规格已更改，我需要在运行时下载图像。我不想更改访问图像的方式，因为更改它会花费一大笔钱。

如果在运行时无法分配 ID，有什么办法可以最大限度地减少访问图像的更改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:46:06.550

无法为下载的图像分配 ID（如在 R.drawable.some_image 中），因为这些 ID 是由 Android SDK 在编译时生成的，并在您的 apk 中硬编码。apk 中的任何内容都不能在不重新编译的情况下进行修改（想想布局 xml 文件、drawables 等......）

# azure - Windows Azure 上的不健康 WorkerRole

> ID：14945813
> 
> 赞同：0
> 
> 时间：2013-02-18T21:43:43.193
> 
> 标签：azure

我对 Windows Azure 上的 WorkerRole 实例有严重的问题。我有一个包含 WebRole 和 WorkerRole 的 Windows Azure 项目。

问题是，WorkerRole 实例不健康。服务器上的错误：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="Application Error" /> 
  <EventID Qualifiers="0">1000</EventID> 
  <Level>2</Level> 
  <Task>100</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2013-02-18T21:29:18.000Z" /> 
  <EventRecordID>864</EventRecordID> 
  <Channel>Application</Channel> 
   <Computer>RD00155D3A4A2E</Computer> 
 <Security /> 
</System>
<EventData>
 <Data>WaHostBootstrapper.exe</Data> 
 <Data>6.0.6002.18488</Data> 
 <Data>505cf7da</Data> 
 <Data>ntdll.dll</Data> 
 <Data>6.0.6002.18520</Data> 
 <Data>4e811810</Data> 
 <Data>c0000374</Data> 
 <Data>00000000000acb47</Data> 
 <Data>ae8</Data> 
 <Data>01ce0e1ef01200d9</Data> 
 </EventData>
</Event> 
```

错误应用程序 WaHostBootstrapper.exe

有人可以帮助我吗？

ps 项目在本地机器上完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:22:44.663

如果它在您的机器上工作但在云上失败，则可能是因为您错过了一些程序集或依赖组件。

您可以在部署时启用 IntelliTrace，以便稍后您可以下载调试文件，这可能包括您的工作人员角色的实际异常/错误。[http://msdn.microsoft.com/en-us/library/windowsazure/ff683671.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff683671.aspx)

# c# - 两张表，两者都有唯一的ID？

> ID：14945818
> 
> 赞同：1
> 
> 时间：2013-02-18T21:43:53.197
> 
> 标签：c#, mysql, .net

我的数据库上有两个表，它们都包含一些要由用户完成的任务，第一个表命名`taches`为第二个表`admin_taches`，它们都包含一个名为 task_id 的列，该列在其表中是唯一的

我是否有可能使列 task_id 在两个表中都是唯一的？我需要 task_id 的值是唯一的！我怎样才能做到这一点。

我正在使用 Oracle WorkBench 作为我的数据库的 IDE

**编辑：** ID在每个表中插入时自动递增

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:46:35.490

将它们全部放在一个表中，并在其中添加一列`admin enum('no','yes') default 'no'`。

另一种解决方案是在其中一个 id 前面加上一个字母，这在 id 中不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:49:28.873

您可以通过创建一个 SEQUENCE 对象来做到这一点。这是由 DBMS 维护的序列。然后，当您插入任一表时，您可以使用 sequence.nextval

我已经在 Oracle 以外的数据库上使用过它，但是查看以下页面，Oracle 似乎也支持它们：[http ://www.techonthenet.com/oracle/sequences.php](http://www.techonthenet.com/oracle/sequences.php)

编辑：我刚刚意识到您将其标记为“MySql”，而不是 Oracle。如果您使用的是 MySql，我认为不支持这种语法。

# java - tomcat 和提取的文件

> ID：14945820
> 
> 赞同：0
> 
> 时间：2013-02-18T21:44:01.093
> 
> 标签：java, jakarta-ee, tomcat

我正在使用**ubuntu**和打包**的 tomcate7**。我使用**.war**文件上传网站。网络工作正常。

这不是我的网站，但它在那里：

```
:/var/lib/tomcat7/webapps/ROOT$ ls
index.html  META-INF 
```

我在以下位置找到我的站点文件（.war 中的文件）

```
/var/cache/tomcat7/Catalina/localhost/_/org/apache/jsp/

/var/cache/tomcat7/Catalina/localhost/_/WEB-INF/classes/ 
```

我没有找到任何具有系统范围搜索的 .css 或 .js 文件，例如`find / -name '*.css' -ls`

1.  他们在哪？！

2.  有没有一种简单的方法可以只给tomcat .class 文件或删除.jsp .java 文件（例如，如果我不想提供真正的源代码而只提供.class）JSP 预编译。在构建期间，某些工具 (jspc) 很困难。有什么简单的走过去吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:58:06.107

WAR 文件可能在服务器上的“某处”，但 tomcat 可能已配置为在部署时不“分解” WAR 文件，而只是直接从 WAR 中提供资源。这可能是您的网站“工作”但您找不到实际的 .css 文件的原因，文件系统上不存在 .css 文件但仍包含在 WAR 中。

至于#2，预编译 JSP，出于某种原因，这仍然是一个“跳过火圈”的过程，只是半自动化的。

在部署之前预编译 JSP 需要将 JSP 文件转换为 Java 源文件，编译该文件，然后将该生成的类映射为最终 Web 应用程序中的 servlet，最后从 Web 应用程序中删除该 JSP 文件。

有一个[Tomcat Page](http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html#Web%20Application%20Compilation)讨论了该过程，但仅提供了部分解决方案（从自动化的角度来看）。

当然，预编译不流行的一个原因是预编译的 JSP 不能跨容器移植，也不一定是同一容器的版本。所以，这是一个值得注意的问题。

# c++ - 获取 std::vector 中的元素位置

> ID：14945822
> 
> 赞同：0
> 
> 时间：2013-02-18T21:44:07.407
> 
> 标签：c++, stdvector

如何获取向量内元素的位置，其中元素是类。有没有办法做到这一点？

示例代码：

```
class Object
{
  public:
    void Destroy()
    {
      // run some code to get remove self from vector
    }
} 
```

在 main.cpp 中：

```
std::vector<Object> objects;
objects.push_back( <some instances of Object> );
// Some more code pushing back some more stuff

int n = 20;
objects.at(n).Destroy(); // Assuming I pushed back 20 items or more 
```

所以我想我希望能够编写一个方法或作为类成员的东西，它将返回自身在向量内的位置......这可能吗？

编辑：

由于混乱，我应该更好地解释。

```
void Destroy(std::vector<Object>& container){
  container.erase( ?...? );
} 
```

问题是，我怎样才能找到进行擦除的号码......？显然这是不可能的......我认为它可能不会......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:51:33.243

您可以使用`std::find`来查找元素`vector`（前提是您为 实现了比较运算符 ( `==`) `Object`。但是，有两个大问题：

1.  如果您需要在容器中查找元素，那么使用有序容器（例如`std::map`or `std::set`(find operations in `O(log(N))`vs`O(N)`
2.  `Object`不应该是负责将自己从容器中移除的人。`Object`不应该知道或关心它在哪里，因为这会破坏封装。相反，容器的所有者应该关注这些任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:30:33.883

对象可以这样擦除自己：

```
void Destroy(std::vector<Object>& container);
{
  container.erase(container.begin() + (this - &container[0]));
} 
```

这将按您的预期工作，但它让我觉得设计非常糟糕。成员不应该知道他们的容器。他们应该（从他们自己的角度）存在于无法辨认的边缘。创造和毁灭应该留给它们的创造者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:48:29.043

向量中的对象不会自动知道它们在向量中的位置。

您可以为每个对象提供该信息，但要容易得多：从向量中删除对象。然后它的析构函数会自动运行。

然后这些对象也可以在其他容器中使用。

* * *

例子：

```
#include <algorithm>
#include <iostream>
#include <vector>

class object_t
{
private:
    int     id_;
public:
    int id() const { return id_; }

    ~object_t() {}
    explicit object_t( int const id ): id_( id ) {}
};

int main()
{
    using namespace std;
    vector<object_t> objects;

    for( int i = 0;  i <= 33;  ++i )
    {
        objects.emplace_back( i );
    }

    int const n = 20;
    objects.erase( objects.begin() + n );

    for( auto const& o : objects )
    {
        cout << o.id() << ' ';
    }
    cout << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:06:24.473

如果您需要销毁向量中的第 n 个项目，那么最简单的方法是从一开始就使用迭代器`std::begin()`并调用`std::advance()`来推进您想要的位置，例如：

```
std::vector<Object> objects;
const size_t n = 20;

auto erase_iter = std::advance(std::begin(objects), n);

objects.erase(erase_iter); 
```

如果要在向量中查找项目的索引，则使用`std::find`获取迭代器并`std::distance`从头开始调用。

所以像：

```
Object object_to_find;
std::vector<Object> objects;

auto object_iter = std::find(std::begin(objects), std::end(objects), object_to_find);

const size_t n = std::distance(std::begin(objects), object_iter); 
```

这确实意味着您需要为您的对象实现一个相等运算符。或者您可以尝试以下方法：

```
auto object_iter = std::find(std::begin(objects), std::end(objects), 
  [&object_to_find](const Object& object) -> bool { return &object_to_find == &object; }); 
```

尽管要使其正常工作，但 object_to_find 必须是实际列表中的一个，因为它只是比较地址。

# window - 如何在 AppleScript 中切换 Windows

> ID：14945825
> 
> 赞同：0
> 
> 时间：2013-02-18T21:44:12.977
> 
> 标签：window, applescript, applescript-objc

我刚刚开始从事 Applescript 项目，（我第一次使用 AppleScript，之前使用过 Objective-C）

现在我在 Xcode ( 基于 AppleScript ) 中做了一个项目，确实有一件事我想不通。如何在同一个 .xib 中切换窗口？

所以在 MainMenu.xib 下我有一个窗口，它是 RootViewController，我想在用户按下按钮时切换到备用窗口。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T17:53:07.507

```
myWindow's orderFront_(me) 
```

下次看看文档：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)

# html - 仅使用 css 创建下拉导航

> ID：14945831
> 
> 赞同：0
> 
> 时间：2013-02-18T21:44:36.440
> 
> 标签：html, css

我有一个`ul`包含嵌套`ul`元素的列表。目前它有 3 个级别的深度。（主导航，子，孙）。我似乎无法让下拉菜单工作。不幸的是，我没有能力将 id 放在（ul）项目中。我能做的最好的事情就是把它包起来`ul`，`div`上面有一个ID。知道我该怎么做吗？这是我正在使用的代码，如果我的 css 看起来很糟糕或没有意义，我很抱歉。我是这方面的新手。

**代码**
[http://jsfiddle.net/grem28/ZhNDZ/1/](http://jsfiddle.net/grem28/ZhNDZ/1/) (jsfiddle for CSS)

```
<div id="nav">
    <ul>
        <li id="but_products" ><a href="/products">Products</a>
            <ul>
                <li id="but_boilers" ><a href="/products/boilers">Boilers</a></li>
            </ul>
        </li>
        <li id="but_resources" ><a href="/resources">Resources</a>
            <ul>
                <li id="but_engineeringLibrary" ><a href="/resources/engineering_library">Engineering Library</a>
                    <ul>
                        <li id="but_detroit" ><a href="/resources/engineering_library/detroit_radiant_mea_numbers">Detroit Radiant MEA numbers</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li id="but_contactUs" ><a href="/contact_us">Contact Us</a></li>
    </ul>
</div> 
```

达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:51:50.097

这是一个正常运行的 3 层 CSS 下拉导航系统的示例：

HTML

```
<nav>
    <ul>
        <li>
            Menu One
            <ul>
                <li>
                    <a href="#">Menu One Item One</a>
                    <ul>
                        <li><a href="#">Menu One Item One Submenu Item One</a></li>
                        <li><a href="#">Menu One Item One Submenu Item Two</a></li>
                        <li><a href="#">Menu One Item One Submenu Item Three</a></li>
                        <li><a href="#">Menu One Item One Submenu Item Four</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Menu One Item Two</a>
                    <ul>
                        <li><a href="#">Menu One Item Two Submenu Item One</a></li>
                        <li><a href="#">Menu One Item Two Submenu Item Two</a></li>
                        <li><a href="#">Menu One Item Two Submenu Item Three</a></li>
                        <li><a href="#">Menu One Item Two Submenu Item Four</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Menu One Item Three</a>
                    <ul>
                        <li><a href="#">Menu One Item Three Submenu Item One</a></li>
                        <li><a href="#">Menu One Item Three Submenu Item Two</a></li>
                        <li><a href="#">Menu One Item Three Submenu Item Three</a></li>
                        <li><a href="#">Menu One Item Three Submenu Item Four</a></li>
                    </ul>
                </li>
                <li>
                  <a href="#">Menu One Item Four</a>
                    <ul>
                        <li><a href="#">Menu One Item Four Submenu Item One</a></li>
                        <li><a href="#">Menu One Item Four Submenu Item Two</a></li>
                        <li><a href="#">Menu One Item Four Submenu Item Three</a></li>
                        <li><a href="#">Menu One Item Four Submenu Item Four</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            Menu Two
            <ul>
                <li><a href="#">Menu Two Item One</a></li>
                <li><a href="#">Menu Two Item Two</a></li>
                <li><a href="#">Menu Two Item Three</a></li>
                <li><a href="#">Menu Two Item Four</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

CSS

```
body { font-family: Helvetica, Arial, Sans-serif; line-height: 1.5em; }
a:hover { color: #cc0000; }

/* Hide submenu */
nav ul > li > ul,
nav ul > li > ul > li > ul { display:none; }

/* Layout menubar and menus */
nav { background:#ddd; padding:0.25em 0.5em; }
nav > ul > li { cursor: pointer; display:inline-block; padding:0 1em; }
nav > ul > li > ul { background: #ddd; padding:0.5em; position: absolute; z-index: 1000; }
nav > ul > li > ul > li > ul { background: #ccc; padding:0.5em; position: absolute; left: 90%; top: 0; z-index: 1001; }

/* show submenu on hover */
nav ul > li:hover > ul,
nav ul > li > ul > li:hover > ul { display:block; width:10em; } 
```

小提琴：http: [//jsfiddle.net/kboucher/nrAPu/](http://jsfiddle.net/kboucher/nrAPu/)

希望这可以帮助。

# assembly - 在哈希表中搜索哈希

> ID：14945834
> 
> 赞同：0
> 
> 时间：2013-02-18T21:44:45.113
> 
> 标签：assembly, x86, hashtable, nasm

我正在编写带有大量数组访问的文字处理代码（静态数组，运行时没有更改）。我正在对字符串进行哈希处理，然后检查我的数组中是否存在（查找）。但是什么是一个好的实现呢？我正在用简单的方法做。如果与我的哈希输入匹配，则检查每个值的值。使其最快的想法？

我目前正在检查：

如果我使用循环展开，它会让这变得非常不同。如果我使用无序数组，它比有序数组慢很多。我会去看看在这种情况下矢量化是否会很好。

你有什么建议吗？或者更好的是，你将如何实现这个算法？

这是当前例程（`EAX`如果不匹配，则返回数组中哈希的索引或负值）：

```
Index_of:
push edx
push ecx
push ebx
mov ecx,123456          ;hash example. in the real code,it's set by a routine.
xor ebx,ebx
mov eax,array
.LOOP1:
        cmp [eax],ecx           ;match hash?
        je .FOUND
        cmp byte [eax],0
        je .NOTFOUND
        add ebx,1
        add eax,4
        jmp .LOOP1
.NOTFOUND:
        neg eax
        jmp .DONE
.FOUND:
        mov eax,ebx
.DONE:
pop ebx
pop ecx
pop edx
ret 
```

数组是：

```
; hashs for examples
array:
dd 33389990
dd 1234567
dd 81919191
dd 938383737
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:00:05.507

哈希表的想法是在不循环的情况下将值作为哈希键的函数。

如果您可以拥有一个永远无法返回的值，则可以执行以下操作：

```
; first fill the hash table with values, and with invalid values for the rest.
; for an example, I assume here hash table of 0x1000000h = 16777216d bytes.
; 0xFFFFFFFFF marks no match and 0xFFFFFFFE marks hash collision. 

; first fill the hash table with "no match" values.

    mov ecx,(16777216/4)
    mov eax,0xFFFFFFFF
    mov edi,hash_array
    rep stosd

; here set the values you want to return into the hash table.
; for hash collisions write 0xFFFFFFFE, and handle hash collision in the
; hash collision handling code.

; here we have some hash function that outputs 123456d with some input string. 
```

**编辑：**哈希数组的起始地址可以输入`eax`，所以它不是硬编码的。

```
 mov eax,hash_array               ; the start address of the hash array
    mov ecx,123456                   ; example hash
    call @get_value_from_hash_table  ; call to get the value from hash table

    ... 
```

**编辑：** `ecx`如果哈希值是双字，则必须用 4 进行缩放。

```
@get_value_from_hash_table:
    mov eax,[eax+4*ecx] 
    cmp eax,0xFFFFFFE
    ja  @no_match ; 0xFFFFFFFF ; no match
    je  @hash_collision        ; hash collision

    ; match, no hash collisions, no jumps needed.

    ...

@hash_collision:
    ; handle hash collision here, the best way depends on your data.

    ...

@no_match:
    ; handle no match here.

    ... 
```

# matlab - 计算距离，给定一组坐标

> ID：14945837
> 
> 赞同：1
> 
> 时间：2013-02-18T21:45:09.340
> 
> 标签：matlab, vectorization, euclidean-distance

我的问题很简单，但我正在寻找它的矢量化形式。

我的代码是：

```
HubHt =  110; % Hub Height
GridWidth =  150; % Grid length along Y axis
GridHeight =  150; % Grid length along Z axis
RotorDiameter =  min(GridWidth,GridHeight); % Turbine Diameter
Ny =  31;
Nz =  45;
%% GRID DEFINITION

dy = GridWidth/(Ny-1);
dz = GridHeight/(Nz-1);
if isequal(mod(Ny,2),0)
    iky = [(-Ny/2:-1) (1:Ny/2)];
else
    iky = -floor(Ny/2):ceil(Ny/2-1);
end

if isequal(mod(Nz,2),0)
    ikz = [(-Nz/2:-1) (1:Nz/2)];
else
    ikz = -floor(Nz/2):ceil(Nz/2-1);
end

[Y Z] = ndgrid(iky*dy,ikz*dz + HubHt); 
```

**编辑**

目前我正在使用这个解决方案，它具有合理的性能：

```
coord(:,1) = reshape(Y,[numel(Y),1]);
coord(:,2) = reshape(Z,[numel(Z),1]);
dist_y = bsxfun(@minus,coord(:,1),coord(:,1)');
dist_z = bsxfun(@minus,coord(:,2),coord(:,2)');
dist = sqrt(dist_y.^2 + dist_z.^2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:35:52.527

I disagree with [Dan](https://stackoverflow.com/a/14954072/1714410) and [Tal](https://stackoverflow.com/a/14946614/1714410).

I believe you should use [`pdist`](http://www.mathworks.com/help/stats/pdist.html) rather than `pdist2`.

```
D = pdist( [Y(:) Z(:)] ); % a compact form
D = squareform( D ); % square m*n x m*n distances. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:30:38.170

我同意[Tal Darom](https://stackoverflow.com/a/14946614/1714410)，`pdist2`这正是您需要的功能。它找到两个向量中指定的每对坐标的距离，而不是两个矩阵之间的距离。

所以我很确定在你的情况下你想要这个：

```
pdist2([Y(:), Z(:)], [Y(:), Z(:)]) 
```

The matrix `[Y(:), Z(:)]` is a list of every possible coordinate combination over the 2D space defined by Y-Z. If you want a matrix containing the distance from each point to each other point then you must call `pdist2` on this matrix with itself. The result is a 2D matrix with dimensions `numel(Y)` x `numel(Y)` and although you haven't defined it I'm pretty sure that both `Y` and `Z` are `n*m` matrices meaning `numel(Y) == n*m`

**EDIT:**
A more correct solution suggested by [@Shai](https://stackoverflow.com/a/14954183/1714410) is just to use pdist since we are comparing points within the same matrix:

```
pdist([Y(:), Z(:)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:38:56.227

你可以使用 matlab 函数`pdist2`（我认为它在统计工具箱中），也可以在线搜索该函数的开源良好实现。

另外，看看这个 unswer: [pdist2 等效于 MATLAB 版本 7](https://stackoverflow.com/questions/7696734/pdist2-equivalent-in-matlab-version-7)

# model - Kohana - 验证问题

> ID：14945838
> 
> 赞同：0
> 
> 时间：2013-02-18T21:45:10.993
> 
> 标签：model, controller, kohana

最近我从 Kohana 开始，目前一切都很好，但我有一个问题：

我应该在控制器或模型中的哪里进行表单验证（例如注册表单）？我在 kohana 的文档中看到了示例，他们使用控制器来做这些事情，但我发现在模型中做这些事情对我来说更舒服。是错还是..？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:49:48.373

在 MVC 架构中，始终以拥有胖模型为目标。其他一切都应该是苗条的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:55:26.233

你不应该有任何“肥胖”课程。胖类意味着你有太多的代码，并且该类很可能违反了 SRP。不要将你的课程限制在 MVC 上，你会做得更好。

诸如验证之类的东西属于*它们自己的*类，并由您的业务逻辑使用。

# c - 在 while 循环内返回 char*

> ID：14945839
> 
> 赞同：0
> 
> 时间：2013-02-18T21:45:12.107
> 
> 标签：c

我正在尝试打印一个 char* 的链表的内容，但是 while 循环弄乱了代码：

获取链表中下一项的函数：

```
char * list_next(list *l)
{
    list *currentPosition = NULL;
    currentPosition = l->next; //since the first node is a dummy value in the singly linked list

    while (currentPosition != NULL)
    {
        return currentPosition->charValue;
        currentPosition = currentPosition->next;
    }

    return NULL;
} 
```

在我的主要：

```
char * item;
while(item = list_next(list))
    printf("%s ",item); 
```

有人可以帮我吗我很确定问题是while循环内的返回但我似乎无法修复它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:47:44.270

交换两条线。`return`立即退出函数。它应该读

```
currentPosition = currentPosition->next;
return currentPosition->charValue; 
```

反而。

（更不用说其他人也指出的许多其他错误——`next`由于范围混淆、`NULL`取消引用之前缺少检查等而导致无法实际更新指针。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:52:15.043

您的程序，即使交换了返回位置，每次仍然只会打印列表中的“第二个”项目 - 如果它存在的话。您要么需要使用双指针来更新基值，要么想出一些更好的方法来迭代您的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:48:54.693

您在评论中提到您只需要返回链接列表中的所有值。

```
function iterate(someNode)
   if someNode ≠ null
     node := someNode
     do
       do something with node.value [1]
       node := node.next
     while node ≠ someNode 
```

[来自这篇[维基百科文章](http://en.wikipedia.org/wiki/Linked_list#Linked_list_operations)，[CC BY-SA](http://creativecommons.org/licenses/by-sa/3.0/)。]

现在您可以简单地`printf()`在代码中的位置 [1] 处。但是，您似乎必须*返回*所有值。因此，您必须创建一个（可能是动态的）数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T21:58:56.317

您将原始列表传递给 list_next()。我相信您将始终在永远循环中打印第二项。

我建议您可以将其简化如下：

```
char *item;
for (item=list->next; // Skip the first item as you said the first node is dummy.
     item != NULL; item=item->next) {
    printf("%s ",item->charValue);
} 
```

# python - 匹配多个随机可选正则表达式

> ID：14945841
> 
> 赞同：0
> 
> 时间：2013-02-18T21:45:15.163
> 
> 标签：python, regex

是否可以以任何顺序将多个可选正则表达式与字符串匹配（但可以按特定顺序检索？）

例如，

> s = '(模式1)(模式2)(模式3)'

这样

```
match = re.search(s, 'pattern2 pattern1')
match = re.search(s, 'pattern1 pattern3 pattern2')
match = re.search(s, 'pattern3 pattern1') 
```

以及所有其他排列匹配，此外

```
match.groups() 
```

总是以相同的顺序返回`pattern1`, `pattern2`,`pattern3`即使有一个或多个`None`

我知道这听起来不太可能——只是想知道是否以及如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:58:47.097

你的意思是

```
s = '(pattern1|pattern2|pattern3)'
match = sorted(re.findall(s, 'pattern1 pattern3 pattern2'))
match
>>> ['pattern1', 'pattern2', 'pattern3'] 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:09:10.337

第一步阅读 itertools 的文档，看看 itertools 的魔法会生成你想要的匹配集。例如

```
>>> import itertools
>>> a=['aaa','bbb','ccc']
>>> for q in itertools.permutations(a):
...   print q
... 
('aaa', 'bbb', 'ccc')
('aaa', 'ccc', 'bbb')
('bbb', 'aaa', 'ccc')
('bbb', 'ccc', 'aaa')
('ccc', 'aaa', 'bbb')
('ccc', 'bbb', 'aaa') 
```

为了确保以一致的方式返回匹配项，例如用 ?P 标记正则表达式的每个部分

```
>>> rl=[]
>>> bigr=""
>>> for q in itertools.permutations(a):
...   r=""
...   for ms in q:
...     r = r + "(?P<" + ms + ">" + ms + ")"
...   rl.append(r)
... 
>>> rl
['(?P<aaa>aaa)(?P<bbb>bbb)(?P<ccc>ccc)', '(?P<aaa>aaa)(?P<ccc>ccc)(?P<bbb>bbb)', '(?P<bbb>bbb)(?P<aaa>aaa)(?P<ccc>ccc)', '(?P<bbb>bbb)(?P<ccc>ccc)(?P<aaa>aaa)', '(?P<ccc>ccc)(?P<aaa>aaa)(?P<bbb>bbb)', '(?P<ccc>ccc)(?P<bbb>bbb)(?P<aaa>aaa)'] 
```

在上面的示例中，我使用匹配字符串作为表达式 P 部分中的 id 标记。您可以生成“name1”“name2”或类似的

最后，将所有的小正则表达式合并成一个巨大的正则表达式

```
onegiantregexp = "|".join(rl) 
```

并使用类似 re 模块“groupdict”的东西来获得结果

希望这可以帮助

# ruby-on-rails - Ember.js 中的设计 + CanCan

> ID：14945850
> 
> 赞同：1
> 
> 时间：2013-02-18T21:45:51.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ember.js, cancan

是否有在 Ember.js + Ember-data + Rails 应用程序中实现 Devise + CanCan 的重要示例/教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:33:31.113

那没有。FWIW 用于 ember/rails 应用程序的一种简单方法是将 rails 主要用作 API，并假设用户已通过外部身份验证。因此，您可以使用标准的 rails/devise 登录/注册页面，然后将经过身份验证的用户发送到 ember 应用程序。然后 ember 应用程序在经过身份验证的用户的上下文中调用 api，您的 api 使用 CanCan 来确定角色并返回适当的数据。说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T16:01:57.353

这个问题的正确答案仍然是“否”，但有一些不错的资源，您可以从中构建自己的资源：

*   heartentwined 的[ember-auth-rails-demo](https://github.com/heartsentwined/ember-auth-rails-demo)的[深度和最新教程](https://github.com/heartsentwined/ember-auth-rails-demo/wiki)，该教程将设计与他的[ember-auth-rails](https://github.com/heartsentwined/ember-auth-rails) gem 和[ember-auth](https://github.com/heartsentwined/ember-auth)库一起使用。

*   Richard Livsey关于为 ember添加助手的[精彩博客文章。](http://livsey.org/blog/2012/10/16/writing-a-helper-to-check-permissions-in-ember-dot-js/)`#can`

*   Delwyn 用于序列化 CanCan 功能的[stackoverflow 示例代码](https://stackoverflow.com/a/13332408/1546887)，以便您可以在客户端引用它们。仍然取决于您将它们带到那里并使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:30:18.410

我使用[了这个网站](http://say26.com/using-rails-devise-with-ember-js)，一些使用 ember 的人指出它是一种合理的做事方式。这或多或少是@Michael Grassotti 在上面解释的。

有很多关于在 Devise 工作之前你必须对它进行各种更改的博客，但是它们已经很老了，我让 Devise 工作得非常快，没有任何更改。一定要制作一个用户序列化器（active_record_serializers），它在上面的链接中被跳过。

# jquery - Twitter Bootstrap 日期选择器初始值

> ID：14945851
> 
> 赞同：2
> 
> 时间：2013-02-18T21:45:55.953
> 
> 标签：jquery, twitter-bootstrap

我正在使用 twitter bootstrap datepicker ( [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/) )，但似乎不能让它正常工作。当我单击日期选择器时，它没有附加的日期字段的初始值，而是从 1920 年左右开始。

我的代码如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/datepicker.css")">
        <script src="@routes.Assets.at("js/jquery-1.9.1.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/bootstrap.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/bootstrap-datepicker.js")" type="text/javascript"></script>
        <script type="text/javascript">
          $(function() {
            $('.datepicker').datepicker();
          });
        </script>
    </head>
    <body>
      <div class="input-append date datepicker" data-date="@value" data-date-format="dd-mm-yyyy">
      <input class="span2" size="16" type="text" value="@value"><span class="add-on"><i class="icon-calendar"></i></span>
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:07:53.917

这是工作的日期选择器 jsfiddle [Datepicker](http://jsfiddle.net/shail/7khwX/2/)

```
<div data-date-format="dd-mm-yyyy" data-date="19-02-2013" id="dp3"class="input-append date">
<input type="text" readonly="" value="19-02-2013" size="16" class="span2">  
    <span class="add-on"><i class="icon-calendar"></i></span> 
```

设置`@value`为您选择的日期

# r - 将 RScript 的输出分配给 makefile 变量

> ID：14945855
> 
> 赞同：3
> 
> 时间：2013-02-18T21:46:13.163
> 
> 标签：r, makefile

我正在尝试使用 makefile 自动化一些 R 分析。分析是每月的数据分析和报告。到目前为止它运行良好，但为了扩展它，我希望默认操作是创建当前报告，但如果需要可以指定一个月。

我在将默认报告周期（由 R 脚本计算）分配给 makefile 变量时遇到问题。

生成文件

```
# Assign a data identifier. 
#IRL could use R to assign current if not specified as an arg to make
month :=     $(Rscript './R/reportperiod.R')

test:
    echo $(month) 
```

并且 reportperiod.R 脚本是

要求（润滑）

```
cat(format(floor_date(as.POSIXct(Sys.time())-10*24*60*60, unit="month"), format="%Y%b")) 
```

但这只是显示

```
echo 
```

暗示脚本值尚未分配给变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:57:55.357

我猜你应该使用**$(shell ...)**函数来初始化*月份*变量：

```
month :=     $(shell $(R_HOME)/bin/Rscript ./R/reportperiod.R) 
```

# php - 为 CakePHP 发送正确的 JSON 内容类型

> ID：14945861
> 
> 赞同：3
> 
> 时间：2013-02-18T21:46:33.040
> 
> 标签：php, cakephp

在我的 CakePHP 应用程序中，我返回 JSON 并退出某些请求。这方面的一个示例是尝试以 GET 请求的形式访问 API 以进行登录：

```
header('Content-Type: application/json');
echo json_encode(array('message'=>'GET request not allowed!'));
exit; 
```

但是，我必须在 echo 前面加上内容类型，以便将其作为 JSON 发送。否则我在另一端的代码解释它不同。

关于如何解决这个问题的任何想法？或者至少改进它。

**更新：蛋糕版本 2.3.0**

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-18T22:11:35.583

您可以利用新的 2.x 响应对象：

```
public function youraction() {
    // no view to render
    $this->autoRender = false;
    $this->response->type('json');

    $json = json_encode(array('message'=>'GET request not allowed!'));
    $this->response->body($json);
} 
```

见[http://book.cakephp.org/2.0/en/controllers/request-response.html#cakeresponse](http://book.cakephp.org/2.0/en/controllers/request-response.html#cakeresponse)

您也可以使用强大的休息功能和 RequestHandlerComponent 自动实现这一点，如记录：[http ://book.cakephp.org/2.0/en/views/json-and-xml-views.html](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

您只需要允许扩展 json 并将您的操作称为`/controller/action.json`. 然后 cake 将自动使用 JsonView，您只需将您的数组传入。它将由视图类生成 JSON 和有效响应。

这两种方法都比您的“退出”解决方案更干净 - 尝试对包含 die()/exit() 的代码进行单元测试。这将悲惨地结束。所以最好不要一开始就在你的代码中使用它。

# express - 在jade中使用变量作为数组的索引

> ID：14945862
> 
> 赞同：0
> 
> 时间：2013-02-18T21:46:33.417
> 
> 标签：express, pug

我正在尝试使用变量作为索引访问数组，然后像这样输出它：

`h3= users[{#id}].first_name`

但是由于#{id}，我得到了一个“SyntaxError：Unexpected token ILLEGAL”。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:23:37.517

您可以`id`不使用散列或花括号。

index.js

```
exports.index = function(req, res){
  res.render('index', { 
    title: 'Express',
    users: [{first_name: 'John', age: 20}, {first_name: 'Mike', age: 30}],
    id: 1
  });
}; 
```

索引.jade

```
extends layout

block content
  h1= title
  p Welcome to #{title}
  p= users[id].first_name 
```

# scrapy - 在 scrapyd 中启用 HttpProxyMiddleware

> ID：14945873
> 
> 赞同：4
> 
> 时间：2013-02-18T21:47:06.013
> 
> 标签：scrapy, scrapyd

在阅读了scrapy文档后，我认为HttpProxyMiddleware默认是启用的。但是当我通过scrapyd的webservice接口启动一个spider时，HttpProxyMiddleware没有启用。我收到以下输出：

```
2013-02-18 23:51:01+1300 [scrapy] INFO: Scrapy 0.17.0-120-gf293d08 started (bot: pde)
2013-02-18 23:51:02+1300 [scrapy] DEBUG: Enabled extensions: FeedExporter, LogStats, CloseSpider, WebService, CoreStats, SpiderState
2013-02-18 23:51:02+1300 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-02-18 23:51:02+1300 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-02-18 23:51:02+1300 [scrapy] DEBUG: Enabled item pipelines: PdePipeline
2013-02-18 23:51:02+1300 [shotgunsupplements] INFO: Spider opened 
```

请注意，未启用 HttpProxyMiddleware。如何为scrapyd启用它？任何帮助将不胜感激。

我的scrapy.cfg

```
# Automatically created by: scrapy startproject
#
# For more information about the [deploy] section see:
# http://doc.scrapy.org/topics/scrapyd.html

[settings]
default = pd.settings

[deploy]
url = http://localhost:6800/
project = pd 
```

我有以下 settings.py

```
BOT_NAME = 'pd' #this gets replaced with a function
BOT_VERSION = '1.0'

SPIDER_MODULES = ['pd.spiders']
NEWSPIDER_MODULE = 'pd.spiders'
DEFAULT_ITEM_CLASS = 'pd.items.Product'
ITEM_PIPELINES = 'pd.pipelines.PdPipeline'
USER_AGENT = '%s/%s' % (BOT_NAME, BOT_VERSION)

TELNETCONSOLE_HOST = '127.0.0.1' # defaults to 0.0.0.0 set so
TELNETCONSOLE_PORT = '6073'      # only we can see it.
TELNETCONSOLE_ENABLED = False

WEBSERVICE_ENABLED = True

LOG_ENABLED = True

ROBOTSTXT_OBEY = False
ITEM_PIPELINES = [
    'pd.pipelines.PdPipeline',
    ]

DATA_DIR = '/home/pd/scraped_data' #directory to store export files to.

DOWNLOAD_DELAY = 2.0

DOWNLOADER_MIDDLEWARES = {
    'scrapy.contrib.downloadermiddleware.httpproxy.HttpProxyMiddleware': 750,
} 
```

问候，

攀树

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:41:06.257

在花了很长时间尝试调试之后，事实证明 HttpProxyMiddleware 实际上希望设置 http_proxy 环境变量。如果未设置 http_proxy，则不会加载中间件。因此，我设置了 http_proxy 和 bob 的你的叔叔！一切正常！

# javascript - 在 chrome 打包应用程序中工作的 Javascript 所见即所得编辑器

> ID：14945876
> 
> 赞同：3
> 
> 时间：2013-02-18T21:47:13.067
> 
> 标签：javascript, google-chrome, google-chrome-extension, wysiwyg

是否有任何 WYSIWYG 编辑器可以在 chrome 打包的应用程序中工作。它们中的大多数似乎不适用于增加的安全策略。Chrome 抱怨 TinyMCE 使用卸载。我还尝试过 nicedit、cleditor、wymeditor 和其他一些（不太记得）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:12:13.273

我最终自己制作了。此页面上的文档使其变得容易。[https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T14:01:53.360

试试 jQuery 文本编辑器 >>>>>> [http://jqueryte.com/](http://jqueryte.com/)

# php - 刷新后PHP重新向数据库添加值？

> ID：14945881
> 
> 赞同：0
> 
> 时间：2013-02-18T21:47:27.903
> 
> 标签：php, database, file, refresh, add

这听起来可能很无聊，但是我有一个代码，可以在我点击提交时将文件提交到数据库（并读取文件），并且一切正常，除非我刷新页面后它重新添加了我选择的最后一个值。这是问题所在的代码：

```
 <?php
    mysql_connect("localhost","root","");
    mysql_select_db("a1296556_data1");
    if(isset($_POST['submit'])){
    $name=$_FILES['file']['name'];
    $temp=$_FILES['file']['tmp_name'];
    move_uploaded_file($temp,"uploaded/".$name);
    $url="http://www.bluejayke.com/edit/uploaded/$name";
    }
    ?>
    <form action="index.php" method="POST" enctype="multipart/form-data">
    <input type="file" name="file">
    <input type="submit" name="submit" value="Upload">
    </form>
    <iframe src='video.php' width=250 height=600></iframe>
    <?php
    if(isset($_POST['submit'])){
    mysql_query("INSERT INTO uploadedvideos(id,name,url) VALUES('','$name','$url')");
    echo "</br>" . $name . " uploaded";
    }
    ?> 
```

有输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:49:57.880

当表单提交时，浏览器会发出`POST`请求。当您刷新时，浏览器会发出最后一个请求，从而再次提交您的表单。但是，大多数浏览器会在提交表单后刷新之前询问您。为了避免这种情况，[您应该在 POST 之后重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:49:52.057

这是正确的功能。点击刷新将重新提交表单和所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:51:06.940

首先停止使用 mysql_* 函数，因为它们已被弃用，而是开始使用准备好的语句 PDO 或 MySQLi。

**一种方法（我的首选方式）：** 您需要某种随机/唯一的令牌，您需要将其保存在表格中以提交表单。

在您的表单中隐藏输入字段，如下所示：

```
 <input type="hidden" value="<?=md5(time())?>" name="my_form_token" /> 
```

在更新表之前，您必须使用 select 语句检查表中是否已经存在给定的令牌。如果存在，请不要更新数据库。如果它不存在，则使用令牌和您的文件更新表。

**第二种方法**是在提交到其他页面后重定向。

# html - 在 HTML 中使用边距图像？

> ID：14945882
> 
> 赞同：1
> 
> 时间：2013-02-18T21:47:29.540
> 
> 标签：html, image, margin

我知道很多 HTML，但它们都是自学的，当我尝试制作看起来像我真正想要的样子的网站时，我不断遇到这些未知数。

我想让我的网站至少有 940 像素宽——如果浏览器的宽度小于这个宽度，用户将不得不水平滚动。

但是，如果浏览器的宽度超过 940 像素 - 我希望图像看起来与我的标题图像（显示为全宽标题）和导航图像（显示为全宽导航）“连接”。

查看附件以了解我的意思。肖恩

[http://i45.tinypic.com/2n862ys.png](http://i45.tinypic.com/2n862ys.png)

[![TinyPic 的图像和视频托管](../Images/ab2099558d3f445c63e01d5c98159d67.png)](https://tinypic.com?ref=2n862ys)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:52:33.810

在 CSS 中：

```
 header{ min-width: 940px; width: 100%; overflow: hidden; }
 .headerImage { display: block; margin: 0 auto; } 
```

然后在 HTML 中：

```
<header>
    <img class="headerImage" src="./Images/HeaderImage.png" alt="" />
</header> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:52:34.803

如果您有一个大于 940px 的图像作为您的宽度，那么您可以将图像的背景位置设置为居中，这样如果它增加或减少图像不会仅移动显示的数量。

另一种方法可能是重复背景图像，这样它就不会结束......但这取决于您使用的图像类型......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:51:01.567

尝试这个

```
<style type="text/css">
img {
  min-width:940px;
  width:100%;
  height:auto;
}
</style> 
```

# java - 更新捆绑的资源文件

> ID：14945883
> 
> 赞同：0
> 
> 时间：2013-02-18T21:47:31.697
> 
> 标签：java, io, java-io

我正在执行以下操作，

```
String str = "this is the new string";
URL resourceUrl = getClass().getResource("path_to_resource");
File file = new File(resourceUrl.toURI());
BufferedWriter writer = new BufferedWriter(new FileWriter(file));
writer.write(xml);
writer.close(); 
```

在上面的代码中，我试图写入我的一个 java 包中包含的资源文件。执行代码后，我的程序运行良好，但文件只是更新 web-INF 中的属性文件，而不是更新到存储它的包中。谁能帮我弄清楚我怎样才能做到这一点，或者我在这里做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:20:58.823

您不应该尝试写入与应用程序类一起存储的文件。根据应用程序服务器，您尝试写入的位置可能不可写，或者应用程序可能正在从应用程序存档（.war 文件）运行。

您应该使用外部文件夹来存储配置和其他应用程序数据。通常，您可以通过环境变量或部署期间指定的属性来指定此文件夹。

# excel - 在每组数据 vba 的末尾自动求和

> ID：14945885
> 
> 赞同：1
> 
> 时间：2013-02-18T21:47:37.610
> 
> 标签：excel, vba

我正在开发一个成本核算系统，该系统将根据我在宏中的过滤条件将行项目从数据库中提取出来。它将这些行项目拉到另一个工作表上并将它们分组为部分。因此，对于每个系统，这些部分大小可能是不同的大小，每次的行数都不同。我需要的是每个部分下方的小计行，但我无法让公式正常工作，因为这些部分可以改变大小，公式不断不同。我需要 excel 中的 AutoSum 函数，但我需要能够将其放入宏中，但我不知道该怎么做。下面是我用来添加我的第一个小计行的代码。最后会有大约 5 个不同的部分，所以会有 5 个不同的小计，我还需要一个总体总计，我 我不知道该怎么做，因为就像我说的这些部分可能会定期改变大小。任何帮助深表感谢。

```
'To add subtotal
    Range("B11").Select
    Selection.End(xlDown).Select
    ActiveCell.Offset(2, 0).Select
        Selection.Font.Bold = True
    With Selection
        .HorizontalAlignment = xlRight
        .VerticalAlignment = xlBottom
        .WrapText = False
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
    ActiveCell.FormulaR1C1 = "Subtotal"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 2).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 3).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)"
    ActiveCell.Offset(0, 1).Select
    ActiveCell.FormulaR1C1 = "=SUM(R[-11]C:R[-2]C)" 
```

# css - 将多个图像放在另一个 div 上的 div 中

> ID：14945892
> 
> 赞同：0
> 
> 时间：2013-02-18T21:48:01.740
> 
> 标签：css

我正在尝试组合一个如下所示的导航栏：

[http://s7.postimage.org/jhfi6rbp7/gallerybar.jpg](http://s7.postimage.org/jhfi6rbp7/gallerybar.jpg)

所有正方形都是单独的图像，我想将它们对齐到包含橙色条 .jpg 的 div 标签的左侧。

这是我到目前为止所拥有的：

```
<div id="rule">
    <img src="../images/rule2.jpg" width="750" height="1" >
    <div id="   gallery">
        <img src="../images/portfolio/gallery_bplogo_active.jpg" alt="Logo Design"        width="112" height="112"/>
        <img src="../images/portfolio/gallery_bpprint.jpg" width="112" height="112" alt="Magazine and Newspaper Ads" />
        <img src="../images/portfolio/gallery_bpradio.jpg" width="112" height="112" alt="Radio Spot" />
        <img src="../images/portfolio/gallery_bptelevision.jpg" width="112" height="112" alt="TV Spot" />
        <img src="../images/portfolio/gallery_bpvehiclewrap.jpg" width="112" height="112" />
    </div>
</div>

#rule {
    border:0;
    text-align: center;
}

#gallery {
    height: 115px;
    margin: 20px;
    position: absolute;
    border: 20 px;
    border-color:#FFF;
} 
```

我不知道如何将图像垂直居中放在栏上——他们坚持要在栏下浮动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:52:20.657

试试这个：

```
#gallery img {float: left; margin-right: 10px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:00:49.590

您的图像需要在 img 标签内对齐。

```
img {
  vertical-align:middle;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:57:47.567

尝试以下解决方案[http://jsfiddle.net/chrisdanek/CN3Tb/](http://jsfiddle.net/chrisdanek/CN3Tb/)

```
#gallery {
    padding: 0 20px;
    position: relative;
}
#gallery img { 
    position: relative; 
    background: #fff;
}

#gallery:before { 
    position: absolute;
    content: "";
    border: 1px solid orange;
    top: 50%;
    left: 0;
    right: 0;
}

<div id="gallery">
    <img src="image.jpg" width="112" height="112">
    <img src="image.jpg" width="112" height="112">
    <img src="image.jpg" width="112" height="112">
    <img src="image.jpg" width="112" height="112">
</div> 
```

我删除了不必要的标记并简化了您的 CSS。

# javascript - 如何在 iOS 设备上禁用垂直滚动但保持水平滚动？

> ID：14945895
> 
> 赞同：0
> 
> 时间：2013-02-18T21:48:19.367
> 
> 标签：javascript, ipad, web-applications

我确定您已经在 iPad 上滚动，当您到达底部时，您会看到网站后面的深色背景。当您松开手指时，网页再次滑回。

我正在制作一个与 iPad 视口高度相同的网络应用程序。然而，宽度将比视口更宽。所以我想水平滚动，但应该关闭垂直反弹效果。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:49:36.557

您可以在 CSS 中执行此操作。

```
body {
    overflow:visible;
    overflow-x:auto;
} 
```

这应该适用于 5.1beta2 更新后的所有设备，包括溢出功能。

编辑：[以前有人遇到过这个问题。](https://stackoverflow.com/questions/5172109/overriding-overflow-x-css-property-on-ios)也许这对你有用。

# ruby-on-rails-3.2 - Rails3 自定义生成器被忽略

> ID：14945896
> 
> 赞同：0
> 
> 时间：2013-02-18T21:48:20.820
> 
> 标签：ruby-on-rails-3.2, generator

我继承了特定的生成器并编辑了该方法，以便创建 _form 的规范。有解决办法：

```
# lib/generators/rspec_modded/scaffold/scaffold_generator.rb
require 'generators/rspec/scaffold/scaffold_generator.rb'
module RspecModded
  module Generators
    class ScaffoldGenerator < Rspec::Generators::ScaffoldGenerator
      def generate_view_specs
        super
        copy_view :_form
      end
    end
  end
end 
```

如果我这样做`rails g`rspec_modded:scaffold 在列表中，并且如果手动调用（`rails g rspec_modded:scaffold test`）则实际工作。

```
# config/application.rb
# ...
config.generators do |g|
  g.test_framework :rspec_modded, :fixture => false, fixture_replacement: nil
  g.fallbacks[:rspec_modded] = :rspec
end 
```

据我所知，每个人都`hook_for :test_framework`应该调用 rspec_modded 生成器，而 rspec 应该管理我没有的东西（例如模型）。但它不起作用：由于某种原因，unit_test 生成器启动了！什么事？我真的不明白...

PS：我正在使用rails 3.2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:48:54.947

经过大量的挖掘和尝试，我发现`factory_girl_rails`宝石是这种奇怪行为的罪魁祸首！问题出在文件中`lib/factory_girl_rails/railtie.rb`，它有一个初始化程序来检查 rspec 是否是 test_framework，如果不是，则暴力破解到 unit_test -_-

并且知道我看到他们已经修复了它......

但是，为什么这个配置会覆盖用户定义的配置呢？我认为这个应该是最高优先级的......有人可以澄清一下吗？

* * *

经过另一次挖掘，似乎将生成器的代码放在初始化程序中会覆盖用户代码，但如果那段代码在 Railtie 类定义的主体中，一切正常......

# ruby-on-rails - 价目表如何存储在数据库中？

> ID：14945902
> 
> 赞同：0
> 
> 时间：2013-02-18T21:48:33.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我需要在数据库中存储一个价目表。

存储价目表的最佳方式是什么？

价目表示例：

![在此处输入图像描述](../Images/d2381d78fac346db9acf692d6079463a.png)

我想到了2个解决方案。

创建一个名为 products 的表，其中包含以下列：

```
name (varchar)
price (integer)
price_2 (integer) 
```

该名称将是 example，例如“product_a1”，用于引用 YAML 翻译文件。

然后创建所有产品的名称。因此，以我为例，大约有 100 个。

解决方案2：

将所有数据存储在一行中。所以表列将是：

```
product_a1
product_a2
product_a3
product_b1
product_b1_2
product_b2
product_b2_2 
```

还有99个..

PS：我只有1个价目表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:18:42.287

为什么不使用[实体-属性-值模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)(EAV)，这样您就可以在模型上获得任意数量的属性。它为您提供了极大的灵活性，因此将来您可以在不重构代码的情况下动态添加更多属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:59:51.603

为什么不创建两个具有关系的表：

```
class Product < ActiveRecord::Base
  has_many :prices
end 
```

和

```
class Price < ActiveRecord::Base
  belongs_to: :product
end 
```

这使您可以灵活地在未来根据需要添加额外的价格。我不愿意硬编码具有固定限制的数据库。

# c# - 如何使用 BsonClassMap 将 POCO 域对象属性映射为手册或 DBRef 参考？

> ID：14945904
> 
> 赞同：6
> 
> 时间：2013-02-18T21:48:35.083
> 
> 标签：c#, mongodb, mongodb-.net-driver

使用 BsonClassMap，是否可以映射域对象引用，同时保持域对象程序集持久无知（将`public A Reference { get; set; }`属性更改为下面`public MongoDBRef Reference{ get; set; }`的示例类`B`是不可接受的）。

对于这种情况，引用的对象不是同一聚合的一部分，不应存储为嵌套文档。

是否可以在这样的关系中映射两个域对象：

```
public class A
{
    public Guid Id {get; private set; }
}

public class B
{
    public Guid Id { get; private set; }
    public A Reference { get; set; }
} 
```

进入如下文档结构：

```
// Collection for class A
{ _id: "11111111-1111-1111-1111-111111111111" }

// Collection class B
{ 
    _id: "22222222-2222-2222-2222-222222222222",
    reference_id: "11111111-1111-1111-1111-111111111111"
} 
```

映射可能如下所示：

```
BsonClassMap.RegisterClassMap<A>(cm => 
{
    cm.MapIdProperty(c => c.Id)
        .SetIdGenerator(new GuidGenerator())
        .SetRepresentation(BsonType.String);
}

BsonClassMap.RegisterClassMap<B>(cm => 
{
    cm.MapIdProperty(c => c.Id)
        .SetIdGenerator(new GuidGenerator())
        .SetRepresentation(BsonType.String);

    // How do I map the B.Reference to a manual reference (like 
    // the sample doc structure above) or possibly as a DBRef?
} 
```

那么，在不更改模型的情况下，我如何将`Reference`属性映射到 object `A`，从 object`B`作为 DBRef 或作为手动引用（如上面的示例文档结构）？

Is this possible using BsonClassMap? Or in order to use BsonClassMap and keep my domain assembly persistent ignorant, do I need to change the model to something like:

```
public class A
{
    public Guid Id {get; private set; }
}

public class B
{
    public Guid Id { get; private set; }
    public Guid ReferenceId { get; set; } // Don't reference the object directly,
                                          // just store the Guid to the 
                                          // referenced object.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:57:13.697

I posed this same question to the mongodb-csharp user group and got a response from craiggwilson:

> You'll need to change your ReferenceProperty to ReferencePropertyId. We do not support lazy-loading (or eager-loading) of referenced documents.
> 
> Since A is not the aggregate for B, then this actually makes more sense when discussing in these terms. Generally, it is unnecessary for a referenced aggregate (B) to be loaded in order to process the referencing aggregate (A). It might be that you do indeed need some information from B. In this case, think about denormalizing a little and creating a true entity (BSummary) whose aggregate is A. This would make sense if some of the summary information is immutable or changes infrequently.

# r - 使用 R 中的数据框应用将统计测试的结果保存到一个文件

> ID：14945907
> 
> 赞同：1
> 
> 时间：2013-02-18T21:48:47.450
> 
> 标签：r, apply

我正在尝试对数据框的每一列运行统计测试并将结果保存到文件中。我有两个问题：

1.  有没有办法使用 apply 而不是 for 循环来做到这一点？和
2.  我可以将所有测试的结果保存到一个文件中吗？

给定一个玩具数据框：

```
DataFrame <- data.frame(Treatment= rep(c("A", "B", "C"), each = 6),
             A=sample(1:100, 18), 
             B=sample(1:100, 18), 
             C=sample(1:100, 18)) 
```

到目前为止，我已经完成了这个，它运行了我想要的测试（在这种情况下是成对的 t 测试，但我对其他测试做同样的事情），但将每个测试的结果保存到一个单独的文件中：

```
library(MASS)
Col_pairwise.t.test <- function(data.frame){DataFrame <- data.frame
 for (i in 2:length(DataFrame)){
   i_test <- pairwise.t.test(DataFrame[ ,i], DataFrame$Treatment, p.adj = "none")

   write.matrix(i_test$p.value, file = paste(colnames(DataFrame[i]), 
     +   "_t_test.txt", sep = ""), sep="\t")
}}
Col_pairwise.t.test(DataFrame) 
```

我可以使用 apply 而不是 for 循环来运行测试，但是当我这样做时不知道如何将 p 值保存到文件中：

```
apply(DataFrame[ , 2:4], 2, pairwise.t.test, g=DataFrame$Treatment, p.adj = "none") 
```

我对 R 还是很陌生，任何帮助都将不胜感激！我确信有一种更好的方法可以用 apply 而不是 for 循环来做我已经在做的事情，而且我知道必须有一种方法来存储 t 测试的所有结果并将它们写入文件结束，我只是不知道它是什么。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:04:59.070

使用后`apply`，您可以使用`ldply`from`plyr`将其转换为 a`data.frame`并将各个`p.value`矩阵存储为合并的`p.value`data.frame，如下所示：

```
w <- apply(DataFrame[ , 2:4], 2, pairwise.t.test, g=DataFrame$Treatment, p.adj = "none")
require(plyr)
out <- ldply(w, function(x) x$p.value)

#   .id          A          B
# 1   A 0.29299651         NA
# 2   A 0.22354405 0.03227708
# 3   B 0.02434804         NA
# 4   B 0.73621775 0.04736056
# 5   C 0.92880561         NA
# 6   C 0.09587581 0.11248443 
```

现在，您可以使用

```
write.table(out, "file.txt", quote=F, sep="\t", row.names=F, col.names=T) 
```

第一列`.id`比较，第二列和第三列是您获得的相应 p 值矩阵。

PS：请不要使用`data.frame`（甚至`DataFrame`）作为对象的名称。有一个名为的内置函数`data.frame`直接与之冲突，这不是好的编程习惯。举个例子，我会改变你的功能（你不再需要）如下：

```
library(MASS)
Col_pairwise.t.test <- function(d) {
    for (i in 2:length(d)) {
        i_test <- pairwise.t.test(d[ ,i], d$Treatment, p.adj = "none")
        write.matrix(i_test$p.value, 
            file = paste(colnames(d[i]), "_t_test.txt", sep = ""), sep="\t")
    }
}
Col_pairwise.t.test(df) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:21:34.383

您可以在应用循环中使用匿名函数，该函数从测试而不是整个测试返回 p 值。像这样...

```
pvals = apply(DataFrame[, 2:4], 2, function(x){
            pairwise.t.test(x=x, g=DataFrame$Treatment, p.adj = "none")$p.value
        }) 
```

# node.js - 有条件地执行回调

> ID：14945910
> 
> 赞同：5
> 
> 时间：2013-02-18T21:49:01.270
> 
> 标签：node.js, asynchronous, callback, control-flow

解决以下控制流问题的最佳方法是什么：

1.  我只想调用`getSomeOtherData`if`someData`等于某个值/通过一些条件测试

2.  在这两种情况下，我总是想打电话`getMoreData`

```
http.createServer(function (req, res) {
    getSomeData(client, function(someData) {
        // Only call getSomeOtherData if someData passes some conditional test
        getSomeOtherData(client, function(someOtherData) {
           // Always call getMoreData
           getMoreData(client, function(moreData) {
             res.end();
           });
       });
   });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:06:04.640

对此没有很好的解决方案；我发现的最好的方法是创建一个本地函数来处理剩余的常见工作，如下所示：

```
http.createServer(function (req, res) {
  getSomeData(client, function(someData) {
    function getMoreAndEnd() {
       getMoreData(client, function(moreData) {
         res.end();
       });
    }

    if (someData) {  
      getSomeOtherData(client, function(someOtherData) {
        getMoreAndEnd();
      });
    } else {
      getMoreAndEnd();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:56:53.233

这是你想要的吗？

```
http.createServer(function (req, res) {
    getSomeData(client, function(someData) {
        function myFunction (callback) {
            // Only call getSomeOtherData if someData passes some conditional test
            if (someData) {
                getSomeOtherData(client, function(someOtherData) {
                   // Do something.
                });
            }

            callback();
        }

        myFunction(function () {
            // Always call getMoreData
            getMoreData(client, function(moreData) {
                res.end();
            });
        });
    });
}); 
```

# html - 如何在html电子邮件中包含图像

> ID：14945911
> 
> 赞同：0
> 
> 时间：2013-02-18T21:49:07.777
> 
> 标签：html, wcf, smtp

在我们的 WCF 应用程序中，有一种方法可以发送 html 格式的电子邮件。我正在使用 StringBuilder 来构建 html。

我在电子邮件中包含一张图片。当应用程序发送电子邮件时，电子邮件的格式正确。但是，除非用户右键单击并选择“下载图像”，否则图像不会显示。

有没有办法让图像自动显示在 html 电子邮件中，而无需用户选择下载图像？

这是我的图像标签：

```
<img src='http://www.MySite.com/Images/Mylogo.png' border='0' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:00:28.453

这是电子邮件客户端的故意行为，无法保证图像会自动显示给所有客户端。你将不得不忍受这一点。事实上，有些人更喜欢以纯文本形式阅读电子邮件。

如果图像相对较小，您可以考虑将其附加到电子邮件中。尽管显然还有其他成本，但您更有可能默认显示它。

# redis - 数字 2 exp 32 来自哪里？

> ID：14945912
> 
> 赞同：0
> 
> 时间：2013-02-18T21:49:14.670
> 
> 标签：redis

一个 REDIS 实例可以存储 2exp32 个键。一个 REIS 集可以存储 2exp32 个条目。这个数字是从哪里来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:53:25.053

2^32 = 4,294,967,296，这是您可以适应 32 位数据类型的值。已经测试了 2.5 亿组密钥。

更多信息在[他们的页面上](http://redis.io/topics/faq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:53:36.227

2 ^(32) - 1 是无符号 32 位整数可表示的最大数。多年来，32 位是 CPU 整数寄存器最常见的大小，所以这个上限被广泛应用到程序中。如今，具有 64 位宽整数寄存器的 CPU 越来越普遍，但程序员仍然经常首先使用 32 位整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T21:53:40.183

2^32 是一个 4 字节整数可以表示的可能值的数量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T21:55:29.527

2^32 是一个 32 位的数字。32 位是许多数据库系统的常见大小。

# html - 删除 htaccess 中的 html 扩展后永久重定向

> ID：14945918
> 
> 赞同：2
> 
> 时间：2013-02-18T21:49:32.553
> 
> 标签：html, .htaccess, mod-rewrite, redirect

我有这些 htaccess 规则从 url 中删除 html 扩展名：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

它工作正常，但我仍然可以从带有扩展名的 URL 访问。如何使当用户单击带有扩展名的网址时，将通过永久（301）重定向重定向到无扩展名的网址？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:50:34.507

只需在末尾添加小片段，表明它是 301 重定向。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html [R=301,L] 
```

# mobile - Facebook 使用什么标准来防止在移动设备上显示发送对话框？

> ID：14945923
> 
> 赞同：4
> 
> 时间：2013-02-18T21:49:46.110
> 
> 标签：mobile, facebook-javascript-sdk, facebook-iframe

关于使用 Facebook 的 Javascript 和服务器端集成的网页和 webapps...

Facebook 文档指出，移动设备不支持发送对话框，但它们没有说明他们如何确定该对话框将不会显示或我们如何找出答案。

这使得在正确的情况下很难显示一些替代功能。例如 iphone 已经出，但 ipad 会显示 iframe 版本。带有 Chrome 的 Nexus 7 不会弹出，但它在用户代理中没有“移动”。

有人知道标准吗？IE。用户代理上的正则表达式，还是某些特定的功能检测？

现在我正在使用浏览器嗅探:-(

```
function isMobile(string) {
   return /mobile|android/i.test(string || navigator.userAgent);
} 
```

例如，这并不能说明 iPad Safari 会将此对话框显示为 iFrame（但不是弹出窗口）。

谢谢。

# python - Python：从结果中提取数字

> ID：14945931
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:50:21.457
> 
> 标签：python

我正在编写一个 python 脚本来自动从 imdb 中提取评级，只是我无法从结果中提取数字。

```
from pattern.web import URL
from pattern.web import plaintext
from pattern.web import decode_utf8
import re

def scrape_imdb(film):
    url = URL (film)
    s=url.download()
    decode_utf8(url.download(s))
    regels=re.compile(('"ratingValue">[0-9].[0-9]'))
    rating= regels.findall(s)
    rating2= rating[0:1]
    rating3= rating2.findall("[0-9"])

    regels2=re.compile ("<title>.*</title>")
    titel=regels2.findall(s)
    print titel, rating2 
```

但这给了我一个错误。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:05:30.323

正如您在对另一个答案的评论中所写：

> 我仍然得到：AttributeError：'list'对象没有属性'findall'

所以这似乎是你的问题。`re.findall`返回匹配列表，`rating`列表也是。当你这样做时`rating2 = rating[0:1]`，你将一个子列表分配给`rating2`，所以`rating2`它本身也是一个列表（虽然只有一个元素）。列表没有`findall`方法，因此失败。

您可能想要做的是在第一个结果上运行另一个正则表达式`rating`：

```
rating = regels.findall(s)
rating2 = rating[0] # only get the first element; a string
rating3 = re.findall("[0-9]", rating2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:55:19.557

我相信你这里有一个错字：

```
rating3= rating2.findall("[0-9"]) 
```

它应该是：

```
rating3= rating2.findall("[0-9]") 
```

# android - 一个linearLayout里面的两个tableLayout

> ID：14945932
> 
> 赞同：1
> 
> 时间：2013-02-18T21:50:21.633
> 
> 标签：android, android-layout, android-linearlayout, android-tablelayout

我会将两个表格布局放在一个`Linearlayout`. 但是使用我的代码，我只能看到一张桌子。那是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:stretchColumns="1" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" >

        <TextView
            android:id="@+text_view/tw_nome"
            android:text="@string/tw_nome" />

        <EditText
            android:id="@+edit_text/et_nome"
            android:hint="@string/et_nome"
            android:imeOptions="actionNext"
            android:singleLine="true" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" >

        <TextView
            android:id="@+text_view/tw_cognome"
            android:text="@string/tw_cognome" />

        <EditText
            android:id="@+edit_text/et_cognome"
            android:hint="@string/et_cognome"
            android:imeOptions="actionDone"
            android:singleLine="true" />
    </TableRow>
</TableLayout>

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" >

        <TextView
            android:id="@+text_view/tw_sesso"
            android:text="@string/tw_sesso" />

        <RadioGroup
            android:id="@+radio_group/rg"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+radio_button/button_m"
                android:text="@string/button_m" />

            <RadioButton
                android:id="@+radio_button/button_f"
                android:text="@string/button_f" />
        </RadioGroup>
    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <Button
            android:id="@+button/button_salva"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_salva" />

        <Button
            android:id="@+button/button_annulla"
            android:text="@string/button_annulla" />
    </TableRow>
</TableLayout> 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:55:26.610

并排还是垂直？

如果您正在寻找并排，请尝试`layout_weight`。还要注意`layout_width`.

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".MainActivity" >

    <TableLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:stretchColumns="1" >
            <!-- rows -->
    </TableLayout>

    <TableLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:stretchColumns="1" >
            <!-- rows -->
    </TableLayout>
</LinearLayout> 
```

*更新*从评论中被问到为什么`layout_width`应该设置为`0dp`.

设置`0dp`是您使用时的优化`layout_weight`。将宽度设置为`0dp`告诉布局忽略`layout_height`并`layout_weight`改用它，在这种情况下，它为每个`TableLayout`.

我实际上问了同样的问题并得到了一些有用的答案，如果它有帮助[为什么 0dp 被认为是性能增强？](https://stackoverflow.com/questions/12016781/why-is-0dp-considered-a-performance-enhancement)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:53:36.617

表格布局的宽度和高度都定义为`match_parent`，因此它们占用与父级相同的空间。父项中没有足够的空间让两个子项以与父项相同的大小显示。

如何解决这个问题取决于父 LinearLayout 的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T00:40:07.367

将 LinearLayout 放入：

```
<ScrollView/>    </ScrollView> 
```

# php - 失败的 Amazon SQS 请求

> ID：14945935
> 
> 赞同：0
> 
> 时间：2013-02-18T21:50:36.667
> 
> 标签：php, amazon-web-services, sdk, amazon-sqs, guzzle

我正在使用 Amazon 的 SDK 2 for PHP 设置 SQS。

使用新 SDK 的 Web 上现有内容似乎很少。

这是基于 Guzzle 构建的最新 Amazon Services SDK。

我能够成功：

1.  创建队列
2.  获取队列 URL
3.  列出所有队列
4.  获取队列 ARN

但我无法获取任何队列属性或向队列发送消息。

我获取队列属性的调用是：

```
$attr   = $sqs->getQueueAttributes(
    array(
        'QueueUrl'          => 'test_18_16-36-57'
    )
); 
```

尝试队列属性时，我得到以下响应：

> 我们计算的请求签名与您提供的签名不匹配。检查您的 AWS 秘密访问密钥和签名方法。有关详细信息，请参阅服务文档。
> 
> 此请求的规范字符串应该是 'POST /100404228159/test_18_16-36-57
> 
> 内容类型：应用程序/x-www-form-urlencoded 主机：sqs.us-east-1.amazonaws.com 用户代理：aws-sdk-php2/2.1.0 Guzzle/3.1.2 curl/7.22.0 PHP /5.3.10-1ubuntu3.5 x-amz-日期：20130218T213657Z
> 
> 内容类型；主机；用户代理；x-amz-日期 a70e8dd76245fc6631c1b051623a90752c7cec0cd55fa636000c47ad3d8e4e06'
> 
> 签名字符串应该是 'AWS4-HMAC-SHA256 20130218T213657Z 20130218/us-east-1/sqs/aws4_request 7695e40b612379da5025fca80e26ed6c29f95428e244d2b083764d203d369e36'

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:26:16.427

升级到最新版本能解决问题吗？

# xaml - Windows Phone 8 中的更多项目作为模板

> ID：14945943
> 
> 赞同：0
> 
> 时间：2013-02-18T21:51:24.957
> 
> 标签：xaml, windows-phone-8, itemtemplate

我是 Windows Phone 8 开发的新手，我想创建一个页面，其中包含在两列中排序的任意数量的项目，如这张很棒的图片所示。

[![模板](../Images/f908f204bd60e9641fda295d1e300b85.png)](https://i.stack.imgur.com/sLXvv.png)

我试图使用**LongListSelector**，但我只能创建一列。那么我应该使用什么控件来创建这样的模板呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:51:21.543

查看适用于 Windows Phone 的 Toolkit 并查看 WrapPanel，这将解决您的问题 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:56:59.363

安装windows phone 工具包

将此代码添加到手机中的 xaml 中：PhoneApplicationPage

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

这是您的列表代码

```
<ListBox x:Name="pictureListBox" Margin="10,101,10,10" ItemsSource="{Binding}" SelectionChanged="pictureListBox_SelectionChanged_1">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" >
                        <Image x:Name="Image" Source="{Binding Thumb}" Stretch="Uniform" Width="200" Height="200" Margin="10"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

# android - 下载的图像看起来很模糊

> ID：14945948
> 
> 赞同：0
> 
> 时间：2013-02-18T21:51:45.350
> 
> 标签：android

[在这篇](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)优秀的文章之后，我下载了一张图片以供使用。我自己使用的图像是 300x400 的谷歌地图静态图像。我已经调整了一些设置并将其扩展为填充整个屏幕，但它看起来非常模糊。

```
<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_x="0dp"
    android:layout_y="0dp"
    android:adjustViewBounds="true"
    android:clickable="false"
    android:gravity="center_vertical"
    android:longClickable="false"
    android:scaleType="fitCenter" /> 
```

这就是我在屏幕 xml 布局中所拥有的。这是个常见的问题吗？我进行了很好的搜索，但找不到答案。300x400 对 android 来说不是很好的分辨率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:00:39.517

> 300x400 对 android 来说不是很好的分辨率吗？

它取决于原始图像方向和其他一些东西，例如您的布局和设备显示。或者，您可以尝试以下代码来下载图像，这对我来说很好：

不要忘记添加

```
 <uses-permission  android:name="android.permission.INTERNET"></uses-permission> 
```

到你的清单

```
 public class MainActivity extends Activity {

private Button get;
private ImageView pic;
private static final String SRC = "http://www.allindiaflorist.com/imgs/arrangemen4.jpg";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    get = (Button)findViewById(R.id.button1);
    pic = (ImageView)findViewById(R.id.imageView1);

    get.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            pic.setImageBitmap(getBitmapFromURL(SRC));

        }
    });

}

 public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);

            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            Log.e("getBmpFromUrl error: ", e.getMessage().toString());
            return null;
        }
    }

    } 
```

![在此处输入图像描述](../Images/b4a482bb2ee7e8245aaf41fb9abf107a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:48:11.863

我找到了它们低的原因，图像加载器类有一个内置的压缩​​：

```
//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

所以只需删除这部分，这样你就剩下：

```
//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){

  try {
    return BitmapFactory.decodeStream(new FileInputStream(f));
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
return null;

} 
```

清晰的图像。

# excel - 将 IF 函数插入 Excel 日历宏的输入单元格

> ID：14945952
> 
> 赞同：1
> 
> 时间：2013-02-18T21:51:58.687
> 
> 标签：excel, vba

这是两部分的问题。

我想使用根据用户提供的月份和年份填充月历的宏（由 Microsoft 提供，因为我根本不了解 VBA）。代码如下： Sub CalendarMaker()

```
 ' Unprotect sheet if had previous calendar to prevent error.
   ActiveSheet.Protect DrawingObjects:=False, Contents:=False, _
      Scenarios:=False
   ' Prevent screen flashing while drawing calendar.
   Application.ScreenUpdating = False
   ' Set up error trapping.
   On Error GoTo MyErrorTrap
   ' Clear area a1:g14 including any previous calendar.
   Range("a1:g14").Clear
   ' Use InputBox to get desired month and year and set variable
   ' MyInput.
   MyInput = InputBox("Type in Month and year for Calendar ")
   ' Allow user to end macro with Cancel in InputBox.
   If MyInput = "" Then Exit Sub
   ' Get the date value of the beginning of inputted month.
   StartDay = DateValue(MyInput)
   ' Check if valid date but not the first of the month
   ' -- if so, reset StartDay to first day of month.
   If Day(StartDay) <> 1 Then
       StartDay = DateValue(Month(StartDay) & "/1/" & _
           Year(StartDay))
   End If
   ' Prepare cell for Month and Year as fully spelled out.
   Range("a1").NumberFormat = "mmmm yyyy"
   ' Center the Month and Year label across a1:g1 with appropriate
   ' size, height and bolding.
   With Range("a1:g1")
       .HorizontalAlignment = xlCenterAcrossSelection
       .VerticalAlignment = xlCenter
       .Font.Size = 18
       .Font.Bold = True
       .RowHeight = 35
   End With
   ' Prepare a2:g2 for day of week labels with centering, size,
   ' height and bolding.
   With Range("a2:g2")
       .ColumnWidth = 20
       .VerticalAlignment = xlCenter
       .HorizontalAlignment = xlCenter
       .VerticalAlignment = xlCenter
       .Orientation = xlHorizontal
       .Font.Size = 12
       .Font.Bold = True
       .RowHeight = 20
   End With
   ' Put days of week in a2:g2.
   Range("a2") = "Sunday"
   Range("b2") = "Monday"
   Range("c2") = "Tuesday"
   Range("d2") = "Wednesday"
   Range("e2") = "Thursday"
   Range("f2") = "Friday"
   Range("g2") = "Saturday"
   ' Prepare a3:g7 for dates with left/top alignment, size, height
   ' and bolding.
   With Range("a3:g8")
       .HorizontalAlignment = xlRight
       .VerticalAlignment = xlTop
       .Font.Size = 18
       .Font.Bold = True
       .RowHeight = 21
   End With
   ' Put inputted month and year fully spelling out into "a1".
   Range("a1").Value = Application.Text(MyInput, "mmmm yyyy")
   ' Set variable and get which day of the week the month starts.
   DayofWeek = Weekday(StartDay)
   ' Set variables to identify the year and month as separate
   ' variables.
   CurYear = Year(StartDay)
   CurMonth = Month(StartDay)
   ' Set variable and calculate the first day of the next month.
   FinalDay = DateSerial(CurYear, CurMonth + 1, 1)
   ' Place a "1" in cell position of the first day of the chosen
   ' month based on DayofWeek.
   Select Case DayofWeek
       Case 1
           Range("a3").Value = 1
       Case 2
           Range("b3").Value = 1
       Case 3
           Range("c3").Value = 1
       Case 4
           Range("d3").Value = 1
       Case 5
           Range("e3").Value = 1
       Case 6
           Range("f3").Value = 1
       Case 7
           Range("g3").Value = 1
   End Select
   ' Loop through range a3:g8 incrementing each cell after the "1"
   ' cell.
   For Each cell In Range("a3:g8")
       RowCell = cell.Row
       ColCell = cell.Column
       ' Do if "1" is in first column.
       If cell.Column = 1 And cell.Row = 3 Then
       ' Do if current cell is not in 1st column.
       ElseIf cell.Column <> 1 Then
           If cell.Offset(0, -1).Value >= 1 Then
               cell.Value = cell.Offset(0, -1).Value + 1
               ' Stop when the last day of the month has been
               ' entered.
               If cell.Value > (FinalDay - StartDay) Then
                   cell.Value = ""
                   ' Exit loop when calendar has correct number of
                   ' days shown.
                   Exit For
               End If
           End If
       ' Do only if current cell is not in Row 3 and is in Column 1.
       ElseIf cell.Row > 3 And cell.Column = 1 Then
           cell.Value = cell.Offset(-1, 6).Value + 1
           ' Stop when the last day of the month has been entered.
           If cell.Value > (FinalDay - StartDay) Then
               cell.Value = ""
               ' Exit loop when calendar has correct number of days
               ' shown.
               Exit For
           End If
       End If
   Next

   ' Create Entry cells, format them centered, wrap text, and border
   ' around days.
   For x = 0 To 5
       Range("A4").Offset(x * 2, 0).EntireRow.Insert
       With Range("A4:G4").Offset(x * 2, 0)
           .RowHeight = 65
           .HorizontalAlignment = xlCenter
           .VerticalAlignment = xlTop
           .WrapText = True
           .Font.Size = 10
           .Font.Bold = False
           ' Unlock these cells to be able to enter text later after
           ' sheet is protected.
           .Locked = False
       End With
       ' Put border around the block of dates.
       With Range("A3").Offset(x * 2, 0).Resize(2, _
       7).Borders(xlLeft)
           .Weight = xlThick
           .ColorIndex = xlAutomatic
       End With

       With Range("A3").Offset(x * 2, 0).Resize(2, _
       7).Borders(xlRight)
           .Weight = xlThick
           .ColorIndex = xlAutomatic
       End With
       Range("A3").Offset(x * 2, 0).Resize(2, 7).BorderAround _
          Weight:=xlThick, ColorIndex:=xlAutomatic
   Next
   If Range("A13").Value = "" Then Range("A13").Offset(0, 0) _
      .Resize(2, 8).EntireRow.Delete
   ' Turn off gridlines.
   ActiveWindow.DisplayGridlines = False
   ' Protect sheet to prevent overwriting the dates.
   ActiveSheet.Protect DrawingObjects:=True, Contents:=True, _
      Scenarios:=True

   ' Resize window to show all of calendar (may have to be adjusted
   ' for video configuration).
   ActiveWindow.WindowState = xlMaximized
   ActiveWindow.ScrollRow = 1

   ' Allow screen to redraw with calendar showing.
   Application.ScreenUpdating = True
   ' Prevent going to error trap unless error found by exiting Sub
   ' here.
   Exit Sub 
```

' 错误导致 msgbox 指出问题，提供新的输入框， ' 并从导致错误的行继续。MyErrorTrap: MsgBox "您可能没有正确输入月份和年份。" _ & Chr(13) & "正确拼写月份" _ & " (或使用 3 个字母的缩写)" _ & Chr(13) & "and 4 digit for the Year" MyInput = InputBox("输入月份和年份Calendar") If MyInput = "" Then Exit Sub Resume End Sub

但是我需要添加一个函数，在运行宏时将工作簿中另一张工作表的副本插入到条目单元格中，在上面的代码中定义为 Range("A4:G4").Offset(x * 2, 0) . 另一张纸上的副本是当天自助餐厅的食物，这取决于每月的第一天是什么时候。我已经构建了下面的函数，但不知道如何让它重复每个条目单元格（由单元格 A3:G3、A5:G5、A7:G7、A9:G9 和 A11:G11 确定）而不只是查找并替换所有这些（我熟悉 JavaScript，所以我假设一个数组可以为此工作？）并适合我在上面尝试使用的宏，因为如果我把它放入单元格中运行宏时会覆盖日历视图工作表。

=IF(E3=1,'菜单项'!B2,IF(E3=2,'菜单项'!B3,IF(E3=3,'菜单项'!B4,IF(E3=4,'菜单项' !B5, IF(E3=5, '菜单项'!B6, IF(E3=6, '菜单项'!B7, IF(E3=7, MenuItems!B8, IF(E3=8, '菜单项'! B9( IF E3=9, '菜单项'!B10, IF(E3=10, '菜单项'!B11, IF(E3=11, '菜单项'!B12, IF(E3=12, '菜单项' !B13,IF( E3=13, '菜单项'!B14, IF(E3=14, '菜单项'!B15, IF(E3=15, '菜单项'!B16, IF(E3=16, '菜单项目'！B17，IF（E3 = 17，'菜单项目'！B18，IF（E3 = 18，'菜单项目'！B19，IF（E3 = 19，'菜单项目'！B20，IF（E3 = 20， '菜单项'!B21, IF(E3=21, '菜单项'!B22, IF(E3=22, '菜单项'!B23, IF(E3=23, '菜单项'!B24, IF(E3= 24, '菜单项'!B25, IF(E3=25, '菜单项'!B26, IF(E3=26, '菜单项'!B27, IF(E3=27, '菜单项'!B28, IF( E3=28, '菜单项'!B29, IF(E3=29,'菜单项'!B30, IF(E3=30, '菜单项'!B31, IF(E3=31, '菜单项'!B32, IF(E3=0, “”))))))))) )))))))))))))))))))))))))

非常感谢！

# java - java中的基准测试是否适合比较模块化算术运算？

> ID：14945955
> 
> 赞同：1
> 
> 时间：2013-02-18T21:52:13.630
> 
> 标签：java, performance, math, benchmarking

我可以依靠java中的基准测试结果来比较计算，例如模运算来比较两个操作吗？

A = B x C MOD N

D = E^-1 MOD N

Q1)

我想知道。乘以等量的时间找到倒数 如果回答是。如何请任何建议。

Q2) 我有一个关于 Java 基准测试的问题？UNIX OS 在使用 Java benchmar 时是否优于 WXP OS 而不是 UNIX OS 是否给我们最好的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:47:58.160

1.  乘法通常比模求逆更快，因为模求逆往往需要多次乘法。（不过，取决于您使用的算法。）

2.  整数运算在任何地方都是准确的，Unix 和 Windows 也一样。

# android - 活动之间的Android不确定进度条

> ID：14945957
> 
> 赞同：0
> 
> 时间：2013-02-18T21:52:15.393
> 
> 标签：android

如何在两个活动之间获得一个**不确定的进度条**，我的意思是，我在活动 A 中，显示进度条，在显示进度条的同时，启动了一个新的活动 B，并且在这个活动中 BI 想要关闭进度条. 谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:57:44.913

你不能那样做。Activity 是为您的应用程序在屏幕上保存所有内容的东西。如果您“介于”两个活动之间，那么您将无法控制屏幕上的内容。

您需要将进度条放入 ActivityB，并默认使其可见，然后在加载完数据后使其不可见

```
progressBar.setVisibility(View.GONE); 
```

如果您的 ActivityB 在显示任何视图之前需要很长时间才能加载，则表明您正在主线程上进行一些加载工作，您不应该在后台进行，并且在加载完成后更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:58:51.373

没有理由这样做。开始一个新的活动是一个非常快的过程，几乎是瞬间的（除非你的 onPause 方法需要很长时间），所以永远不会显示进度条。

话虽如此，有一种方法可以在您从 ActivityA 调用 ProgressActivity（您创建）的活动之间显示进度条，然后在等待一段时间（延迟可运行）后调用 ActivityB。这没有任何建设性，不应该使用。

# android - ActionBar (Sherlock) 在顶部显示带有消息数量的图标

> ID：14945961
> 
> 赞同：1
> 
> 时间：2013-02-18T21:52:27.940
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBar，并且由于我具有消息功能，因此我想在 ActionBar 中通知用户是否有任何未读消息。它看起来像这样：

![未读消息 - 示例通知](../Images/1e499567466dc5f380b4631ca8dede6b.png)

但是，我似乎无法找到这是否受支持。那么，有谁知道这是否受支持以及如何以这种方式在现有的 ActionBar 项目上添加一个图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:59:46.783

我不认为它是 API 中内置的东西，但是有一个简单的[徽章按钮](https://github.com/jcxavier/badge-button)实现可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:00:47.950

最好的方法是自己创建一个修改过的可绘制对象并将其设置为该特定 ActionBar 图标的源。为此，您可以`invalidateOptionsMenu()`从内部调用并重新设置图标`onCreateOptionsMenu(Menu)`。您可以使用 a[`LayerDrawable`](https://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)将数字叠加在实际可绘制图标的顶部。

# c# - 尝试将多个模型添加到视图时出错

> ID：14945968
> 
> 赞同：0
> 
> 时间：2013-02-18T21:52:45.793
> 
> 标签：c#, asp.net-mvc, html-helper

我需要`models`在我的视图中有 2 个。但由于我们只能添加 1 个视图，我采用了以下方法；

```
@model Tuple<My.Models.Mod1,My.Models.Mod2>

    @Html.DropDownListFor(m => m.Item2.humanKind,Model.Item2.allHuman)

    @Html.TextBoxFor(m => m.Item1.food) 
```

但是，我最终得到的是以下错误；

```
The model item passed into the dictionary is of type 'My.Models.Mod2', but this dictionary requires a model item of type 'System.Tuple`2[My.Models.Mod1,My.Models.Mod2]'. 
```

这是什么，我该如何解决？

更新

```
 public ActionResult Index()
        {
            var model2 = new Mod2 { allHuman = allHumans() };
            var model1 = new Mod1(); // JUST NOW I ADDED THIS, BUT IT DOESn't WORK
            return View(model1,model2);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:58:34.100

有问题的视图是从只传入 a`My.Models.Mod2`而不是 a的控制器动作调用的`Tuple<My.Models.Mod1,My.Models.Mod2>`。

仔细检查调用此视图的特定控制器操作。

**更新**

您的控制器代码

```
return View(model1,model2); 
```

应该

```
return View(new Tuple<My.Models.Mod1,My.Models.Mod2>(model1, model2>); 
```

您将 model1 和 model2 作为单独的参数而不是作为元组传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:22:34.353

每个视图只能有一个模型。您需要按照 Ufuk 的建议实例化元组。

但是，我建议创建一个将其他模型作为属性的新模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T23:34:46.027

构建一个包含两者的视图模型：

```
Public class CompositeViewModel{
 Public Mod1 mod1 {get;set;}
Public Mod2 mod2 {get;set}
} 
```

然后构造并传递 CompositeViewModel 到视图。设置视图以使用 CompositeViewModel 作为模型`@model CompositeViewModel`

使用元组并不容易让您扩展或更改您正在做的事情。

甚至看起来你有一个 ViewModel 有数据，然后是一些关联`IEnumerable<SelectListItem>`的 . 如果是这种情况，则将 ViewModel 命名为 CreateAnimalTypeViewModel，其中包含创建它所需的所有属性，然后有各种选择列表。

如果您需要从某物映射到 ViewModel，例如，如果您正在编辑现有项目，您可以使用 AutoMapper。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:12:30.383

在将元组实例发送到视图之前，您不会创建它。

```
public ActionResult Index()
{
    var model2 = new Mod2 { allHuman = allHumans() };
    var model1 = new Mod1();
    return View(new Tuple<Mod1,Mod2>(model1,model2));
} 
```

# hibernate - Hibernate 资源池过早关闭

> ID：14945970
> 
> 赞同：2
> 
> 时间：2013-02-18T21:52:56.503
> 
> 标签：hibernate, jpa, c3p0

我正在对我们的数据库执行压力测试，该数据库在 MySQL 上处于休眠状态。我正在使用具有默认配置的 c3p0 连接池，但 maxpoolsize 为 15。

```
interface EntityRepository extends JpaRepository<Entity, UUID> {}

@Service
public class EntityService {

    @Autowired
    EntityRepository er;

    @Transactional(propagation = Propagation.REQUIRED)
    public Entity addEntity(Entity r) {
        er.save(r);
    }
}

public class StressTest {

    @Autowired
    EntityService rs;

    @Test
    public void entityStressTest() {
        for(int i = 0; i < 100; i++) {
            Thread t = new Thread(new Runnable() {
                public void run() {
                    rs.addEntity(new Entity());
                }
            }
            t.start();
        }
    }
} 
```

每次运行此测试时，我都会创建 5-8 个实体，然后我会收到以下三个日志消息之一：

[错误] 14:39:23,127 [Thread-20] SqlExceptionHelper - SQLException 由以下故障引发：com.mchange.v2.resourcepool.ResourcePoolException：尝试使用关闭或损坏的资源池

[信息] 14:48:45,478 [Thread-11] JdbcTransaction - HHH000425：无法关闭会话；吞咽异常[org.hibernate.service.UnknownServiceException：请求未知服务[org.hibernate.stat.spi.StatisticsImplementor]]作为事务完成

[ INFO] 14:49:22,860 [Thread-18] BasicResourcePool - com.mchange.v2.resourcepool.BasicResourcePool@16f7ca - 检出资源的尝试被中断，因为池现在已关闭。[线程：线程 18]

我很困惑可能是什么原因造成的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T05:23:00.087

你有一个竞争条件；这就是导致关闭连接池错误的原因。

在您的测试方法中，您正在创建异步使用连接池的新线程，但测试方法本身并不等待它们完成。因此，有可能（我猜很有可能有 100 个线程）其中一些在测试方法完成时还没有完成。在您的测试方法完成后，Spring 正在关闭连接池，因此当一个线程随后尝试使用该池时，它会出错。

如果您打开`DEBUG`（或可能`TRACE`）记录器`org.springframework`的日志记录并向您的`addEntity(...)`方法添加一个日志语句，您应该会看到它在测试方法完成并且连接池 bean 销毁发生后被调用。

要解决此问题，请使用 CountDownLatch 让主测试方法在返回之前等待线程完成那里的工作：

```
@Test
public void entityStressTest() {
    int numThreads = 100;
    final CountDownLatch counter = new CountDownLatch(numThreads);
    for(int i = 0; i < numThreads; i++) {
        Thread t = new Thread(new Runnable() {
            public void run() {
                rs.addEntity(new Entity());
                counter.countDown();
            }
        }
        t.start();
    }
    counter.await();
} 
```

# ruby-on-rails - Heroku SSL EndPoint -- 更新证书给出内部服务器错误

> ID：14945971
> 
> 赞同：1
> 
> 时间：2013-02-18T21:52:56.980
> 
> 标签：ruby-on-rails, ssl, heroku

我有一个 COMODO 通配符 SSL 证书，我试图用它来替换我的旧 SSL 证书。

我按照这里的指南： [https ://devcenter.heroku.com/articles/ssl-endpoint](https://devcenter.heroku.com/articles/ssl-endpoint) [http://ryan.mcgeary.org/2011/09/16/how-to-add-a-dnsimple-ssl-certificate -到heroku/](http://ryan.mcgeary.org/2011/09/16/how-to-add-a-dnsimple-ssl-certificate-to-heroku/)

基于这些，我将它们合并为一个 .pem：

```
cat STAR_[domain]_com.crt /
    EssentialSSLCA_2.crt /
    ComodoUTNSGCCA.crt /
    UTNAddTrustSGCCA.crt /
    AddTrustExternalCARoot.crt >> STAR_[domain]_com-bundle.pem 
```

然后我跑了：

```
heroku certs:update STAR_[domain]_com-bundle.pem server.key 
```

我收到：

```
Updating SSL Endpoint hyogo-2759.herokussl.com for [heroku-app]... failed
 !    Internal server error.
 !    Run `heroku status` to check for known platform issues. 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:37:46.877

所以，最重要的是 Heroku 的错误信息不是很好和/或没有期待我给他们的信息，因此内部服务器错误缺乏任何细节。

Heroku 回复我并说他们会为此寻找更好的错误消息，但我怀疑这会发生。

```
The solution:
Instead of using the .pem extension, use .crt 
```

# facebook - Facebook 标签上的 Google+ Snippet 内容自定义

> ID：14945972
> 
> 赞同：0
> 
> 时间：2013-02-18T21:53:03.257
> 
> 标签：facebook, google-plus, google-plus-one

我很好奇是否有人成功控制了由 Google+ 的 +1 和 Facebook 标签上的分享按钮分享的内容。我看到谷歌从品牌主页（[http://www.facebook.com/brand](http://www.facebook.com/brand)）而不是标签本身（[http://www.facebook.com/brand/app_123456789](http://www.facebook.com/brand/app_123456789)）抓取内容。

我已经尝试过为 G+ Snippet 记录的微数据和 Open Graph 标记方法，但我看不出有什么区别。[https://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)而且我没有看到像 Facebook 对话框那样构建自己的共享 URL 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:50:08.327

您可以使用共享端点构建自己的共享 URL：[https ://developers.google.com/+/web/share/#sharelink-endpoint](https://developers.google.com/+/web/share/#sharelink-endpoint)

# google-visualization - 更改谷歌图表定位

> ID：14945973
> 
> 赞同：0
> 
> 时间：2013-02-18T21:53:05.427
> 
> 标签：google-visualization

当我使用谷歌图表时，它使用一个位置：绝对在它的一个 div 中。这弄乱了布局。

在我放的 HTML 上：

```
<div id="chart-1-year" /> 
```

和 Javascript：

```
google.load("visualization", "1", {packages:["corechart"]});

google.setOnLoadCallback(drawChart);

function drawChart() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Performance'],
    <%= CurrentData.first.chart_1_year%>
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('chart-1-year')).
      draw(data, {curveType: "function",
                  width: 500, height: 400, title: "Performance 1 Year"
                  }
          );
} 
```

我在浏览器上得到以下信息（使用 Firebug）：

```
<div class="row">
<div id="chart-1-year" style="position: relative;">
<div style="position: relative; width: 500px; height: 400px;" dir="ltr">
<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;">
</div>
<div style="display: none; position: absolute; top: 410px; left: 510px; white-space: nowrap; font-family: Arial; font-size: 12px;">Performance</div>
</div>
</div> 
```

如果我删除“位置：绝对；”它工作正常 从内部 div。

如何更改该位置设置？

# c# - 了解表达式树和参数评估

> ID：14945983
> 
> 赞同：2
> 
> 时间：2013-02-18T21:53:40.160
> 
> 标签：c#, expression-trees

我正在尝试修改动态构建包含表达式的表达式树，该表达式最终会导致类似 SQL

`P IN (123, 124, 125, 200, 201)`

改为检查执行范围检查，最终导致类似 SQL

`(P >= 123 AND P <= 125) OR (P >= 200 AND P <= 201)`

我的解决方案基于[这篇文章](http://www.velocityreviews.com/forums/t645784-linq-where-clause.html)。

```
static public Expression<Func<TElement, bool>> 
BuildContainsExpression<TElement, TValue>(
    Expression<Func<TElement, TValue>> valueSelector, IEnumerable<TValue> values)
{
    // Removed for post: Input checks and edge cases

    var equals = 
      values.Select(value => 
       (Expression)Expression.Equal(valueSelector.Body, 
                                    Expression.Constant(value, typeof(TValue))));

    var body = equals.Aggregate<Expression>((accumulate, equal) => 
                                             Expression.Or(accumulate, equal));

    return Expression.Lambda<Func<TElement, bool>>(body, p);
} 
```

如果我提供比较值，我可以让范围检查工作：

```
long testValue = 5;
List<KeyValuePair<int, int>> ranges = new List<KeyValuePair<int, int>>() 
{
    new KeyValuePair<long, long>(3, 6),
    new KeyValuePair<long, long>(10, 12),
    new KeyValuePair<long, long>(20, 20),
};

List<BinaryExpression> rangeExpressions = new List<BinaryExpression>();

foreach (var pair in ranges)
{
    var greaterThanOrEqual = 
        Expression.GreaterThanOrEqual(Expression.Constant(testValue), 
                                      Expression.Constant(pair.Key));

    var lessThanOrEqual = 
        Expression.LessThanOrEqual(Expression.Constant(testValue), 
                                   Expression.Constant(pair.Value));

    var inRange = Expression.AndAlso(greaterThanOrEqual, lessThanOrEqual);
    rangeExpressions.Add(inRange);
}

var final = 
    rangeExpressions.Aggregate<Expression>((a, b) => Expression.Or(a, b));

var result = Expression.Lambda<Func<bool>>(final).Compile()(); 
```

但是，当我将该代码放入要与 Linq 一起使用的方法中时，我无法弄清楚如何从传入的表达式中获取用于比较的值。该方法的签名是：

```
Expression<Func<TElement, bool>> 
BuildRangeExpression<TElement>(
    Expression<Func<TElement, long>> valueSelector, 
    IEnumerable<long> values) 
```

它的用法如下：

```
Expression<MyType, bool> match = 
    BuildRangeExpression<MyType, long>(my => my.ProductCode, productCodes);

var result = db.MyTypes.Where(match); 
```

**问题**

我该如何评价

```
Expression<Func<TElement, long>> valueSelector 
```

这样我就可以使用传入的值`BuildRangeExpression`而不是我当前的硬编码值

```
long testValue = 5; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:26:23.910

我认为博客文章中的代码正是您所需要的：您所要做的就是使用`valueSelector.Body`而不是您的`Expression.Constant()`并将原始参数添加到生成的表达式中：

```
public static Expression<Func<TElement, bool>>
    BuildRangeExpression<TElement, TValue>(
    Expression<Func<TElement, TValue>> valueSelector,
    IEnumerable<Tuple<TValue, TValue>> values)
{
    var p = valueSelector.Parameters.Single();

    var equals = values.Select(
        tuple =>
        Expression.AndAlso(
            Expression.GreaterThanOrEqual(
                valueSelector.Body, Expression.Constant(tuple.Item1)),
            Expression.LessThanOrEqual(
                valueSelector.Body, Expression.Constant(tuple.Item2))));

    var body = equals.Aggregate(Expression.OrElse);

    return Expression.Lambda<Func<TElement, bool>>(body, p);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:22:38.077

使用`Expression.Parameter`.

创建参数：

```
var param = Expression.Parameter(typeof(TElement), "arg") 
```

取而代之的是`Expression.Constant(testvalue)`，你需要把`param`.

然后，您需要执行以下操作：

```
var result = Expression.Lambda<Func<TElement, bool>>(final, param).Compile() 
```

# java - 为什么“-”没有变回字母？

> ID：14945985
> 
> 赞同：0
> 
> 时间：2013-02-18T21:53:48.157
> 
> 标签：java

所以我在玩命运之轮/刽子手，我已将解决方案的字母转换为“-”以隐藏解决方案。现在我试图在用户正确猜到它们之后将它们转换回字母。但是，当输入正确的字母时，只会打印“-”。这是我的代码：Puzzle.java：

```
public class Puzzle
{
    /** The solution is the complete word or phrase that is to be guessed */
    private String solution="BIG JAVA";

    /**
     * The puzzle is the word or phrase that is to be guessed with hyphens for
     * all unguessed letters. Initially the puzzle should include all hyphens
     * for all letters in the solution. As the user guesses a letter the hyphens
     * for that letter are replaced with the letter.
     */
    private StringBuilder puzzle;

    /**
     * Constructs a new Puzzle object with the given puzzle solution. Puzzles
     * can contain any character and should be case insensitive. This
     * constructor should set the current state of the puzzle so the all letters
     * in the puzzle are set to a hyphen. All non letter values should be left
     * unchanged in the puzzle.  The puzzle should be set to the solution passed
     * in.
     * 
     * @param solution the solution to the puzzle
     */
    public Puzzle(String Solution)
    {
        puzzle=new StringBuilder(this.solution);
        int length= this.solution.length();
        for(int count=0; count<length; count++)
        {
            if (Character.isLetter(puzzle.charAt(count)))
            {
                puzzle.setCharAt(count, '-');
            }
        }

    }

    /** 
     * The guessLetter method is used to determine how many times the letter
     * that is passed in occurs in the puzzle. If the letter has already been
     * guessed previously, this method should return zero. This method should be
     * case insensitive. In other words 'H' is the same as 'h'.  After a call to
     * to this method the puzzle should be updated to remove the hyphen from
     * the location in the puzzle for each occurrence of the letter.
     * 
     * @param letter
     *            the letter that the user is guessing
     * @return the number of times the letter occurs in the solution only if the
     *         letter has not already been guessed. If the letter has been
     *         previously guessed this method should return 0.
     */
    public int guessLetter(char letter)
    {
        int count = 0;
        int k=this.solution.length();
        solution.equalsIgnoreCase(solution);
        for(int seq=0; seq<k; seq++)
        {
            if(solution.charAt(seq)==letter)
            {
                count++;                
                puzzle.setCharAt(seq, letter);

            }
        }

        return count;
    }

    /**
     * 
     * The getPuzzle method should return the current state of the puzzle. The
     * puzzle should include a hyphen for any letters that have not been guessed.
     * 
     * @return the current state of the puzzle
     */
    public String getPuzzle()
    {
        String str=new String(puzzle);

        return str;
    }

    /**
     * The solvePuzzle method is used to verify that a solution passed in
     * matches the solution to this puzzle. The check for matching solutions
     * should be case insensitive.
     * 
     * @param solution
     * @return true if the solution passed in matches the solution for the
     *         puzzle
     */
    public boolean solvePuzzle(String solution)
    {
        if(this.solution==solution)
        {
            return true;
        }
        else
        {
            return false;

        }

    }

} 
```

PuzzleTester.java：

```
import java.util.Scanner;
public class PuzzleTester
{

    /**
     * (Insert a brief description that describes the purpose of this method) 
     *
     * @param args
     */
    public static void main(String[] args)
    {
        String str="";

        Scanner input= new Scanner(System.in);

        System.out.println("Enter your choice: ");
        System.out.println("(1) to guess a letter");
        System.out.println("(2) to solve the puzzle");
        System.out.println("(3) to quit");
        int choice=input.nextInt();

        while(choice!=3)
        {           
            if(choice==1)
            {
                System.out.println("Please enter your letter");
                str=input.next();

                char letter=str.charAt(0);
                Puzzle game=new Puzzle(str);
                game.guessLetter(letter);

                System.out.print(game.getPuzzle());
            }

            if(choice==2)
            {
                System.out.println("Please solve the puzzle");
                input.nextLine();
                String solution=input.next();
                Puzzle game=new Puzzle(solution);
                game.solvePuzzle(solution);
            }

        }

        if(choice==3)
            {
                System.out.println("Good Bye");
            }

    }

} 
```

我真的认为`puzzle.setCharAt(seq, letter);`在guessLetter方法下的for循环中添加嵌套的if语句会将“-”改回字母。我的代码是错误的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:57:32.817

你不能像这样比较字符串：

```
if (this.solution==solution) 
```

解决方案从不在构造函数中使用：

```
 public Puzzle(String Solution) 
```

您的游戏对象在每一步都会重置。您必须创建一次。

# c# - 拆分和连接字符串数据的多个逻辑“分支”

> ID：14945987
> 
> 赞同：7
> 
> 时间：2013-02-18T21:53:55.330
> 
> 标签：c#, recursion

我知道关于排列列表的 SO 上有几个措辞相似的问题，但它们似乎并没有真正解决我正在寻找的问题。我知道有办法做到这一点，但我正在画一个空白。我有一个类似于这种格式的平面文件：

```
Col1|Col2|Col3|Col4|Col5|Col6
a|b,c,d|e|f|g,h|i
. . . 
```

现在这是诀窍：我想创建这些行的所有可能排列的列表，其中行中以逗号分隔的列表表示可能的值。例如，我应该能够将`IEnumerable<string>`上述表示为这样的行：

```
IEnumerable<string> row = new string[] { "a", "b,c,d", "e", "f", "g,h", "i" };
IEnumerable<string> permutations = GetPermutations(row, delimiter: "/"); 
```

这应该生成以下字符串数据集合：

```
a/b/e/f/g/i
a/b/e/f/h/i
a/c/e/f/g/i
a/c/e/f/h/i
a/d/e/f/g/i
a/d/e/f/h/i 
```

对我来说，这似乎可以优雅地融入递归方法，但显然我在星期一遇到了一个糟糕的情况，我无法完全思考如何处理它。一些帮助将不胜感激。应该是什么`GetPermutations(IEnumerable<string>, string)`样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:20:19.450

我不确定这是否是最优雅的方法，但它可能会让你开始。

```
private static IEnumerable<string> GetPermutations(IEnumerable<string> row, 
                                                    string delimiter = "|")
{
    var separator = new[] { ',' };
    var permutations = new List<string>();
    foreach (var cell in row)
    {
        var parts = cell.Split(separator);
        var perms = permutations.ToArray();
        permutations.Clear();
        foreach (var part in parts)
        {
            if (perms.Length == 0)
            {
                permutations.Add(part);
                continue;
            }
            foreach (var perm in perms)
            {
                permutations.Add(string.Concat(perm, delimiter, part));
            }
        }
    }
    return permutations;
} 
```

当然，如果排列的顺序很重要，您可以`.OrderBy()`在末尾添加一个。

*编辑：添加了一个替代品*

您还可以通过在确定排列之前计算一些数字来构建字符串数组的列表。

```
private static IEnumerable<string> GetPermutations(IEnumerable<string> row, 
                                                    string delimiter = "|")
{
    var permutationGroups = row.Select(o => o.Split(new[] { ',' })).ToArray();
    var numberOfGroups = permutationGroups.Length;
    var numberOfPermutations = 
           permutationGroups.Aggregate(1, (current, pg) => current * pg.Length);
    var permutations = new List<string[]>(numberOfPermutations);

    for (var n = 0; n < numberOfPermutations; n++)
    {
        permutations.Add(new string[numberOfGroups]);
    }

    for (var position = 0; position < numberOfGroups; position++)
    {
        var permutationGroup = permutationGroups[position];
        var numberOfCharacters = permutationGroup.Length;
        var numberOfIterations = numberOfPermutations / numberOfCharacters;
        for (var c = 0; c < numberOfCharacters; c++)
        {
            var character = permutationGroup[c];
            for (var i = 0; i < numberOfIterations; i++)
            {
                var index = c + (i * numberOfCharacters);
                permutations[index][position] = character;
            }
        }
    }

    return permutations.Select(p => string.Join(delimiter, p));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:42:42.943

您可以使用的一种算法基本上就像计数：

*   从每个列表中的第 0 项 (00000) 开始
*   增加最后一个值（00001、00002 等）
*   当您无法增加一个值时，将其重置并增加下一个值（00009、00010、00011 等）
*   当你不能增加任何价值时，你就完了。

功能：

```
static IEnumerable<string> Permutations(
    string input,
    char separator1, char separator2,
    string delimiter)
{
    var enumerators = input.Split(separator1)
        .Select(s => s.Split(separator2).GetEnumerator()).ToArray();
    if (!enumerators.All(e => e.MoveNext())) yield break;

    while (true)
    {
        yield return String.Join(delimiter, enumerators.Select(e => e.Current));
        if (enumerators.Reverse().All(e => {
                bool finished = !e.MoveNext();
                if (finished)
                {
                    e.Reset();
                    e.MoveNext();
                }
                return finished;
            }))
            yield break;
    }
} 
```

用法：

```
foreach (var perm in Permutations("a|b,c,d|e|f|g,h|i", '|', ',', "/"))
{
    Console.WriteLine(perm);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T23:41:41.160

你让我“递归”。这是另一个建议：

```
private IEnumerable<string> GetPermutations(string[] row, string delimiter,
                                            int colIndex = 0, string[] currentPerm = null)
{
    //First-time initialization:
    if (currentPerm == null) { currentPerm = new string[row.Length]; }

    var values = row[colIndex].Split(',');
    foreach (var val in values)
    {
        //Update the current permutation with this column's next possible value..
        currentPerm[colIndex] = val;

        //..and find values for the remaining columns..
        if (colIndex < (row.Length - 1))
        {
            foreach (var perm in GetPermutations(row, delimiter, colIndex + 1, currentPerm))
            {
                yield return perm;
            }
        }
        //..unless we've reached the last column, in which case we create a complete string:
        else
        {
            yield return string.Join(delimiter, currentPerm);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:09:43.123

我真的认为这将是一个很棒的递归函数，但我最终没有这样写。最终，这是我创建的代码：

```
public IEnumerable<string> GetPermutations(IEnumerable<string> possibleCombos, string delimiter)
{
    var permutations = new Dictionary<int, List<string>>();
    var comboArray = possibleCombos.ToArray();
    var splitCharArr = new char[] { ',' };

    permutations[0] = new List<string>();

    permutations[0].AddRange(
        possibleCombos
        .First()
        .Split(splitCharArr)
        .Where(x => !string.IsNullOrEmpty(x.Trim()))
        .Select(x => x.Trim()));

    for (int i = 1; i < comboArray.Length; i++)
    {
        permutations[i] = new List<string>();
        foreach (var permutation in permutations[i - 1])
        {
            permutations[i].AddRange(
                comboArray[i].Split(splitCharArr)
                .Where(x => !string.IsNullOrEmpty(x.Trim()))
                .Select(x => string.Format("{0}{1}{2}", permutation, delimiter, x.Trim()))
                );
        }
    }

    return permutations[permutations.Keys.Max()];
} 
```

...我的测试条件为我提供了我期望的输出：

```
IEnumerable<string> row = new string[] { "a", "b,c,d", "e", "f", "g,h", "i" };
IEnumerable<string> permutations = GetPermutations(row, delimiter: "/");
foreach(var permutation in permutations)
{
    Debug.Print(permutation);
} 
```

这产生了以下输出：

```
a/b/e/f/g/i
a/b/e/f/h/i
a/c/e/f/g/i
a/c/e/f/h/i
a/d/e/f/g/i
a/d/e/f/h/i 
```

多亏了大家的建议，他们对整理我脑海中需要做的事情确实很有帮助。我已经赞成你所有的答案。

# java - 数据报传输后无法转换对象

> ID：14945989
> 
> 赞同：0
> 
> 时间：2013-02-18T21:54:07.510
> 
> 标签：java, serialization, casting, udp

这是一个任务，我正在尝试几种不同的方法来处理：

我们已经使用 UDP 来模拟 TCP。今天早些时候，我设法让文件传输通过 UDP 工作，但当然我没有检查重新发送“段”的错误，所以我没有尝试实现一个带有 ID 和一些字节数据的消息类型类。

调试显示我正确地制作了我的消息对象，然后我使用 public byte[]`serialize(Object obj)`将我的对象转换为用于 UDP 数据报传输的字节数组。

在接收端，当我将反序列化的对象转换回消息时，它崩溃了。

铸造失败

```
Message receiveMSG = null;
    try {
        receiveMSG = (Message)deserialize(receivedPacket.getData());
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(UDPReceiver.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

反序列化方法

```
private Object deserialize(byte[] bytes) throws IOException, ClassNotFoundException {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        return (Message)o.readObject();
    } 
```

任何人都可以发现为什么这个演员会失败？谢谢你。

消息类

```
public class Message implements Serializable {

    private int segmentID;
    private byte[] packet;

    public Message(int segmentID, byte[] packet)
    {
        this.segmentID = segmentID;
        this.packet = packet;
    }

    public int getSegmentID()
    {
        return segmentID;
    }

    public byte[] getPacket()
    {
        return packet;
    }
} 
```

UDPSENDER 类

```
public class UDPSender implements Sender{
    private File theFile;
    private FileInputStream fileReader;
    private DatagramSocket datagramSocket;
    private int fileLength, currentPos, bytesRead, toPort;
    private byte[]  msg, buffer;
    private String toHost,initReply;
    private InetAddress toAddress;
    private int segmentID;

    public UDPSender(InetAddress address, int port) throws IOException{
    toPort = port;
    toAddress = address;
    msg = new byte[512];
    buffer = new byte[512];
    datagramSocket = new DatagramSocket();
        datagramSocket.connect(toAddress, toPort);
        segmentID = 0;
    }

    @Override
    public void sendFile(File theFile) throws IOException{
    // Init stuff
    fileReader = new FileInputStream(theFile);
    fileLength = fileReader.available();

    System.out.println(" -- Filename: "+theFile.getName());
    System.out.println(" -- Bytes to send: "+fileLength);

    send((theFile.getName()+"::"+fileLength).getBytes());

    DatagramPacket reply = new DatagramPacket(buffer, buffer.length);
    datagramSocket.receive(reply);

    if (new String(reply.getData(), 0, reply.getLength()).equals("OK"))
        {
        System.out.println("  -- Got OK from receiver - sending the file ");
        int length;
        while (currentPos<fileLength){

            bytesRead = fileReader.read(msg);

            Message message = new Message(1,msg);

            send(serialize(message));

            currentPos = currentPos + bytesRead;
        }
        System.out.println("  -- File transfer complete...");
        }
    else{System.out.println("Recieved something other than OK... exiting");}
    }

    private void send(byte[] message, int length) throws IOException {
    DatagramPacket packet = 
            new DatagramPacket(message, length);
    datagramSocket.send(packet);
    }   

    private void send(byte[] message) throws IOException {
    DatagramPacket packet = 
            new DatagramPacket(message, message.length);
    datagramSocket.send(packet);
    }

    public byte[] serialize(Object obj) throws IOException {
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        ObjectOutputStream o = new ObjectOutputStream(b);
        o.writeObject(obj);
        return b.toByteArray();
    }
} 
```

UDP接收器

```
public class UDPReceiver {

    DatagramSocket socket;
    String filename, initString;
    byte[] buffer;
    DatagramPacket initPacket, receivedPacket;
    FileOutputStream fileWriter;
    int bytesReceived, bytesToReceive;

    public UDPReceiver(int port) throws IOException {
        // Init stuff
        socket = new DatagramSocket(port);
        buffer = new byte[516];

        System.out.println(" -- Ready to receive file on port: " + port);

        initPacket = receivePacket();

        initString = "Recieved-" + new String(initPacket.getData(), 0, initPacket.getLength());
        StringTokenizer t = new StringTokenizer(initString, "::");
        filename = t.nextToken();
        bytesToReceive = new Integer(t.nextToken()).intValue();

        System.out.println("  -- The file will be saved as: " + filename);
        System.out.println("  -- Expecting to receive: " + bytesToReceive + " bytes");

        send(initPacket.getAddress(), initPacket.getPort(), (new String("OK")).getBytes());

        fileWriter = new FileOutputStream(filename);

        while (bytesReceived < bytesToReceive) {
            receivedPacket = receivePacket();
            Message receiveMSG = null;
            try {
                receiveMSG = (Message)deserialize(receivedPacket.getData());
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(UDPReceiver.class.getName()).log(Level.SEVERE, null, ex);
            }
            System.out.println(receiveMSG.getSegmentID());

//            System.out.println(bytesReceived);
//            send(initPacket.getAddress(), initPacket.getPort(), (new String("OK")).getBytes());
        }
        System.out.println("  -- File transfer complete.");
    }

    public DatagramPacket receivePacket() throws IOException {

        DatagramPacket packet =
                new DatagramPacket(buffer, buffer.length);
        socket.receive(packet);

        return packet;
    }

    public byte[] receiveData() throws IOException {

        DatagramPacket packet =
                new DatagramPacket(buffer, buffer.length);
        socket.receive(packet);

        return packet.getData();
    }

    public void send(InetAddress recv, int port, byte[] message)
            throws IOException {

        DatagramPacket packet =
                new DatagramPacket(message, message.length, recv, port);
        socket.send(packet);
    }

    private Object deserialize(byte[] bytes) throws IOException, ClassNotFoundException {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        return (Message)o.readObject();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:19:04.477

好的，我终于调试了演员阵容失败的原因。

我没有考虑序列化对象的完整字节大小。我将接收缓冲区更改为 607 字节，并且转换工作正常。

# ruby-on-rails - heroku rails assets:precompile - manifest.yml 缺少文件并使用错误的摘要字符串

> ID：14945992
> 
> 赞同：1
> 
> 时间：2013-02-18T21:54:11.970
> 
> 标签：ruby-on-rails, deployment, heroku, asset-pipeline

当我部署到 heroku 时，资产预编译运行，并且它在文件系统上创建的文件是正确的......但是 manifest.yml 不是。文件名中使用的摘要与创建的文件不同。

公共/资产/manifest.yml

```
!binary "YXBwbGljYXRpb24uanM=": application-e7e24b7d7962000157e454e789b642e6.js
!binary "YXBwbGljYXRpb24uY3Nz": application-0a13ba198587580b80dfe5e3c369418f.css 
```

heroku 运行 bash

ls -l 公共/资产

```
application-5a82c20d2d2a3feb6239ebec41f81686.js
application-ece138f83c868002c1cf5be8e4fd8f5a.css 
```

manifest.yml 也缺少很多其他文件......

计算资产中的文件

```
find public/assets/ -type f | wc -l
580 
```

cat public/assets/manifest.yml # 只有 102 行

```
!binary "YXBwbGljYXRpb24uanM=": application-e7e24b7d7962000157e454e789b642e6.js
!binary "YXBwbGljYXRpb24uY3Nz": application-0a13ba198587580b80dfe5e3c369418f.css
!binary "YnJvd3Nlci1hcHAvcGFnZS5jc3M=": browser-app/page-936cedd1fa04a45f18716aecb8350009.css
!binary "cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy9iZ19mYWxsYmFjay5wbmc=": rails_admin/aristo/images/bg_fallback-f60c36074db5f1868f9b7c68fe9043fc.png
!binary "cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy9pY29uX3Nwcml0ZS5wbmc=": rails_admin/aristo/images/icon_sprite-390e9585da6dca3031b09713feeb5dfe.png
!binary "cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy9wcm9ncmVzc19iYXIuZ2lm": rails_admin/aristo/images/progress_bar-c1c009c71b92a6c6e043a090c3fcded3.gif
!binary "cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy9zbGlkZXJfaGFuZGxlcy5wbmc=": rails_admin/aristo/images/slider_handles-c3adcbbd8a77d6389ca59350b55e46de.png
? !binary |-
  cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy91aS1pY29uc18yMjIyMjJfMjU2
  eDI0MC5wbmc=
: rails_admin/aristo/images/ui-icons_222222_256x240-a7500458d8e88dfca0380953f35f41e5.png
? !binary |-
  cmFpbHNfYWRtaW4vYXJpc3RvL2ltYWdlcy91aS1pY29uc180NTQ1NDVfMjU2
  eDI0MC5wbmc=
: rails_admin/aristo/images/ui-icons_454545_256x240-f8ca7675fe7be8c6f45510c6835eef57.png
!binary "cmFpbHNfYWRtaW4vYnVsbGV0X2JsYWNrLnBuZw==": rails_admin/bullet_black-0949e4a0fff36d0c2c6034d6e239c012.png
!binary "cmFpbHNfYWRtaW4vYnVsbGV0X3doaXRlLnBuZw==": rails_admin/bullet_white-2a46b3e1adb0cc8d2d02129aadb6e270.png
!binary "cmFpbHNfYWRtaW4vY2FsZW5kYXIucG5n": rails_admin/calendar-40a4120aab095e7d097e9bbea68d02d6.png
!binary "cmFpbHNfYWRtaW4vY2xvY2sucG5n": rails_admin/clock-ef6307d332cfd62b7577013e12e95750.png
? !binary |-
  cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfYmFja2dyb3Vu
  ZC5wbmc=
: rails_admin/colorpicker/colorpicker_background-b93a8b7a2d32bc11d35c99cde0aaf80b.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfaGV4LnBuZw==": rails_admin/colorpicker/colorpicker_hex-a402fc45117324a0bf3ddea3b35ba3b4.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfaHNiX2IucG5n": rails_admin/colorpicker/colorpicker_hsb_b-0da3a4c95832022eb24b84b4ab147cd4.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfaHNiX2gucG5n": rails_admin/colorpicker/colorpicker_hsb_h-9412cf9de1cf41b4966594dc505b50e8.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfaHNiX3MucG5n": rails_admin/colorpicker/colorpicker_hsb_s-aa6e1bba7cd58db5535885afa21b6127.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfaW5kaWMuZ2lm": rails_admin/colorpicker/colorpicker_indic-b49c166af2009151d707a051bebb1c16.gif
? !binary |-
  cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfb3ZlcmxheS5w
  bmc=
: rails_admin/colorpicker/colorpicker_overlay-d2412ccb0d07bd3d7bf360676870173c.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfcmdiX2IucG5n": rails_admin/colorpicker/colorpicker_rgb_b-0da3a4c95832022eb24b84b4ab147cd4.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfcmdiX2cucG5n": rails_admin/colorpicker/colorpicker_rgb_g-0eb73aa03833785d4aed356b8810e1af.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfcmdiX3IucG5n": rails_admin/colorpicker/colorpicker_rgb_r-2902eee9cb1b434d5ca29a576a9371c7.png
? !binary |-
  cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfc2VsZWN0Lmdp
  Zg==
: rails_admin/colorpicker/colorpicker_select-5712654f282a427ed4f902d5d42faf39.gif
? !binary |-
  cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY29sb3JwaWNrZXJfc3VibWl0LnBu
  Zw==
: rails_admin/colorpicker/colorpicker_submit-ef10f2ee192d1deab58f971bc942ec3f.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2JhY2tncm91bmQucG5n": rails_admin/colorpicker/custom_background-3b77cf96333884ff281d3c1ae6d83bac.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2hleC5wbmc=": rails_admin/colorpicker/custom_hex-291383fc145c6be5a40ed1fc6b0cb7a2.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2hzYl9iLnBuZw==": rails_admin/colorpicker/custom_hsb_b-020eeceb18544d54c6d889188306afde.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2hzYl9oLnBuZw==": rails_admin/colorpicker/custom_hsb_h-41224a949c435f04239c56ed6fd97110.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2hzYl9zLnBuZw==": rails_admin/colorpicker/custom_hsb_s-b4c3512a0a9ebfeb55048dc9285beeaf.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX2luZGljLmdpZg==": rails_admin/colorpicker/custom_indic-425aa2ecf6641fe9ed82474f16e2c97a.gif
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX3JnYl9iLnBuZw==": rails_admin/colorpicker/custom_rgb_b-e25898d3d1cc55a60e0ded2fb7d06d71.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX3JnYl9nLnBuZw==": rails_admin/colorpicker/custom_rgb_g-50dad4c62772ceca083d41435c598531.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX3JnYl9yLnBuZw==": rails_admin/colorpicker/custom_rgb_r-194147ae5e17cd172f953b34e90fbb6c.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvY3VzdG9tX3N1Ym1pdC5wbmc=": rails_admin/colorpicker/custom_submit-c1ac6f2b94896cf84c0fe2802da4d04b.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvc2VsZWN0LnBuZw==": rails_admin/colorpicker/select-0ec50a07cf8970e98c738120a1b33460.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvc2VsZWN0Mi5wbmc=": rails_admin/colorpicker/select2-9ce0f913198a3bf3d84616b644c872cf.png
!binary "cmFpbHNfYWRtaW4vY29sb3JwaWNrZXIvc2xpZGVyLnBuZw==": rails_admin/colorpicker/slider-3c3fb30a0a2b1e541fa1402525fc1e48.png
!binary "cmFpbHNfYWRtaW4vbG9nby5wbmc=": rails_admin/logo-684ce242ccb0e8053ff311f2615b4fd0.png
!binary "cmFpbHNfYWRtaW4vbWFnbmlmaWVyLnBuZw==": rails_admin/magnifier-0ab40a5cd58d08762b7ad23692595d5e.png
!binary "cmFpbHNfYWRtaW4vbXVsdGlzZWxlY3QvaWNvbl9zcHJpdGUucG5n": rails_admin/multiselect/icon_sprite-390e9585da6dca3031b09713feeb5dfe.png
? !binary |-
  cmFpbHNfYWRtaW4vbXVsdGlzZWxlY3QvdWktaWNvbi1jaXJjbGUtdHJpYW5n
  bGUtbi1kYXJrLnBuZw==
: rails_admin/multiselect/ui-icon-circle-triangle-n-dark-5afa372ad5aef1fe8217224c580884b1.png
? !binary |-
  cmFpbHNfYWRtaW4vbXVsdGlzZWxlY3QvdWktaWNvbi1jaXJjbGUtdHJpYW5n
  bGUtbi1saWdodC5wbmc=
: rails_admin/multiselect/ui-icon-circle-triangle-n-light-195abdf9a8b7b530e1017149d97a62c5.png
? !binary |-
  cmFpbHNfYWRtaW4vbXVsdGlzZWxlY3QvdWktaWNvbi1jaXJjbGUtdHJpYW5n
  bGUtcy1kYXJrLnBuZw==
: rails_admin/multiselect/ui-icon-circle-triangle-s-dark-138d9bcbb6a90190473099d2cad90f9b.png
? !binary |-
  cmFpbHNfYWRtaW4vbXVsdGlzZWxlY3QvdWktaWNvbi1jaXJjbGUtdHJpYW5n
  bGUtcy1saWdodC5wbmc=
: rails_admin/multiselect/ui-icon-circle-triangle-s-light-243212fb18301150ef97a62aded36f1d.png
!binary "cmFpbHNfYWRtaW4vanF1ZXJ5LmNvbG9ycGlja2VyLmpz": rails_admin/jquery.colorpicker-301e59a5e78a781dbc729e1653d7de27.js
!binary "cmFpbHNfYWRtaW4vcmFpbHNfYWRtaW4uanM=": rails_admin/rails_admin-e312756541433e838f87eb6797a1c93c.js
!binary "cmFpbHNfYWRtaW4vYmFzZS9SRUFETUUudHh0": rails_admin/base/README-82a3c5bf21d9238c336836a3893163ae.txt
!binary "cmFpbHNfYWRtaW4vanF1ZXJ5LmNvbG9ycGlja2VyLmNzcw==": rails_admin/jquery.colorpicker-8575324a2173bf7302df147990bf8e90.css
!binary "cmFpbHNfYWRtaW4vcmFpbHNfYWRtaW4uY3Nz": rails_admin/rails_admin-5e9413989334606990ef265b8595d055.css
!binary "anF1ZXJ5LXVpL3VpLWJnX2ZsYXRfMF9hYWFhYWFfNDB4MTAwLnBuZw==": jquery-ui/ui-bg_flat_0_aaaaaa_40x100-8db39f751dc5d237fcf7a3a16e744e73.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2ZsYXRfNzVfZmZmZmZmXzQweDEwMC5wbmc=": jquery-ui/ui-bg_flat_75_ffffff_40x100-84c9db840f81df9c16591231397f5539.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2dsYXNzXzU1X2ZiZjllZV8xeDQwMC5wbmc=": jquery-ui/ui-bg_glass_55_fbf9ee_1x400-e8a6dc39c9d751a48955771438d16fbf.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2dsYXNzXzY1X2ZmZmZmZl8xeDQwMC5wbmc=": jquery-ui/ui-bg_glass_65_ffffff_1x400-e49e13d8728b56ab7c95e522f059347c.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2dsYXNzXzc1X2RhZGFkYV8xeDQwMC5wbmc=": jquery-ui/ui-bg_glass_75_dadada_1x400-0323eeb569bfb07afaa6bba409d00703.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2dsYXNzXzc1X2U2ZTZlNl8xeDQwMC5wbmc=": jquery-ui/ui-bg_glass_75_e6e6e6_1x400-94acd31a0040b9956ee4f4247da49fdd.png
!binary "anF1ZXJ5LXVpL3VpLWJnX2dsYXNzXzk1X2ZlZjFlY18xeDQwMC5wbmc=": jquery-ui/ui-bg_glass_95_fef1ec_1x400-29e17851b2973c1df029683e6229d0f6.png
? !binary |-
  anF1ZXJ5LXVpL3VpLWJnX2hpZ2hsaWdodC1zb2Z0Xzc1X2NjY2NjY18xeDEw
  MC5wbmc=
: jquery-ui/ui-bg_highlight-soft_75_cccccc_1x100-96e0c77173b07d1fe8361fad35de13ff.png
!binary "anF1ZXJ5LXVpL3VpLWljb25zXzIyMjIyMl8yNTZ4MjQwLnBuZw==": jquery-ui/ui-icons_222222_256x240-239f79662ddf7c61f2b8add605bf9924.png
!binary "anF1ZXJ5LXVpL3VpLWljb25zXzJlODNmZl8yNTZ4MjQwLnBuZw==": jquery-ui/ui-icons_2e83ff_256x240-b500def2c5c6d595ed6e85ce0fd56638.png
!binary "anF1ZXJ5LXVpL3VpLWljb25zXzQ1NDU0NV8yNTZ4MjQwLnBuZw==": jquery-ui/ui-icons_454545_256x240-0ff5862ada939a272fc7c4b3d213ddc3.png
!binary "anF1ZXJ5LXVpL3VpLWljb25zXzg4ODg4OF8yNTZ4MjQwLnBuZw==": jquery-ui/ui-icons_888888_256x240-662d02f02bf9b588f0875d935f6e08a3.png
!binary "anF1ZXJ5LXVpL3VpLWljb25zX2NkMGEwYV8yNTZ4MjQwLnBuZw==": jquery-ui/ui-icons_cd0a0a_256x240-1f779c3073401e7615cc4a846f65bbf4.png
!binary "Zm9udGF3ZXNvbWUtd2ViZm9udC5lb3Q=": fontawesome-webfont-526bb3ba32a8439b68bf4c40a927f54e.eot
!binary "Zm9udGF3ZXNvbWUtd2ViZm9udC5zdmc=": fontawesome-webfont-85264752821cbcec3df1b2cad5669438.svg
!binary "Zm9udGF3ZXNvbWUtd2ViZm9udC50dGY=": fontawesome-webfont-6acc98727feecaadad2d9ff4e4ce92dd.ttf
!binary "Zm9udGF3ZXNvbWUtd2ViZm9udC53b2Zm": fontawesome-webfont-e41fd64f4725e39f1de897450ff67fc6.woff
!binary "Z2x5cGhpY29ucy1oYWxmbGluZ3Mtd2hpdGUucG5n": glyphicons-halflings-white-24ebd8146111638ab87e1420cd3c1d12.png
!binary "Z2x5cGhpY29ucy1oYWxmbGluZ3MucG5n": glyphicons-halflings-244b049448622f52162abc1c3fd520ba.png 
```

ls -l 公共/资产/

```
total 5236
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 about_us
-rw------- 1 u26153 26153   6999 2013-02-18 18:14 address-bar-target-423c1729832b7020cb2b410e9f2465fb.gif
-rw------- 1 u26153 26153   6999 2013-02-18 18:14 address-bar-target.gif
-rw------- 1 u26153 26153   7071 2013-02-18 18:14 address-bar-walmart-63353f27705fdece054d921ae301fe9a.gif
-rw------- 1 u26153 26153   7071 2013-02-18 18:14 address-bar-walmart.gif
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 affiliates
-rw------- 1 u26153 26153  19913 2013-02-18 18:14 apple-8fe2a44fd057da64cf137d5a94e1b47a.png
-rw------- 1 u26153 26153  19913 2013-02-18 18:14 apple.png
-rw------- 1 u26153 26153 173362 2013-02-18 18:14 application-5a82c20d2d2a3feb6239ebec41f81686.js
-rw------- 1 u26153 26153  55602 2013-02-18 18:14 application-5a82c20d2d2a3feb6239ebec41f81686.js.gz
-rw------- 1 u26153 26153 132591 2013-02-18 18:14 application.css
-rw------- 1 u26153 26153  22103 2013-02-18 18:14 application.css.gz
-rw------- 1 u26153 26153 132657 2013-02-18 18:14 application-ece138f83c868002c1cf5be8e4fd8f5a.css
-rw------- 1 u26153 26153  22154 2013-02-18 18:14 application-ece138f83c868002c1cf5be8e4fd8f5a.css.gz
-rw------- 1 u26153 26153 173362 2013-02-18 18:14 application.js
-rw------- 1 u26153 26153  55602 2013-02-18 18:14 application.js.gz
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 badges
-rw------- 1 u26153 26153  10207 2013-02-18 18:14 beta-775c7667c462abd6488d888404a58fdc.png
-rw------- 1 u26153 26153  10207 2013-02-18 18:14 beta.png
-rw------- 1 u26153 26153 121341 2013-02-18 18:14 bg-b99cacad4facf1307bd636f99b8d3ba7.png
-rw------- 1 u26153 26153  79688 2013-02-18 18:14 bg-eb500d74a0c787d9bcb5834fd0f6f677.jpg
-rw------- 1 u26153 26153  79688 2013-02-18 18:14 bg.jpg
-rw------- 1 u26153 26153 121341 2013-02-18 18:14 bg.png
-rw------- 1 u26153 26153    937 2013-02-18 18:14 black-10-e8ab4eb9ee49c029ff05054552389a28.png
-rw------- 1 u26153 26153    937 2013-02-18 18:14 black-10.png
-rw------- 1 u26153 26153    937 2013-02-18 18:14 black-50-b7cd25e21c9ce7b05cc1815359d4d365.png
-rw------- 1 u26153 26153    937 2013-02-18 18:14 black-50.png
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 browser-app
-rw------- 1 u26153 26153 120476 2013-02-18 18:14 browsers-ea7005cdef53c6d90be4b8b2967b60ca.png
-rw------- 1 u26153 26153 120476 2013-02-18 18:14 browsers.png
-rw------- 1 u26153 26153  27403 2013-02-18 18:14 chrome-0f51f333aa608ff753d1a3a4e4bda8f3.png
-rw------- 1 u26153 26153  27403 2013-02-18 18:14 chrome.png
-rw------- 1 u26153 26153    946 2013-02-18 18:14 clear-4db8e18c4871111c9db1eedb53e98c09.png
-rw------- 1 u26153 26153    946 2013-02-18 18:14 clear.png
-rw------- 1 u26153 26153   2004 2013-02-18 18:14 coins-3a0d6c6873e37ee16f8aa055a3d90b2a.png
-rw------- 1 u26153 26153   9311 2013-02-18 18:14 coins-icon-60a43bcc03b6c04ada23dcaff7099668.gif
-rw------- 1 u26153 26153  19544 2013-02-18 18:14 coins-icon-da100813c94ccaeee0ddc8b58936c9b8.png
-rw------- 1 u26153 26153   9311 2013-02-18 18:14 coins-icon.gif
-rw------- 1 u26153 26153  19544 2013-02-18 18:14 coins-icon.png
-rw------- 1 u26153 26153   2004 2013-02-18 18:14 coins.png
-rw------- 1 u26153 26153  40456 2013-02-18 18:14 fans-ssw-bag-57d8fd1b32db58888da9784ee031a3ff.png
-rw------- 1 u26153 26153  40456 2013-02-18 18:14 fans-ssw-bag.png
-rw------- 1 u26153 26153  66687 2013-02-18 18:14 fb_faces-ca66db5452912d028492eeeb04da31b7.jpg
-rw------- 1 u26153 26153  66687 2013-02-18 18:14 fb_faces.jpg
-rw------- 1 u26153 26153   4817 2013-02-18 18:14 fb-logo-41898ddb7b81b96f2465079b4c208606.jpeg
-rw------- 1 u26153 26153  10492 2013-02-18 18:14 fb-logo-77ba81fb105b213856660bee4c59a1dd.png
-rw------- 1 u26153 26153   4817 2013-02-18 18:14 fb-logo.jpeg
-rw------- 1 u26153 26153  10492 2013-02-18 18:14 fb-logo.png
-rw------- 1 u26153 26153  30006 2013-02-18 18:14 fb-share-ssw-54cc710a40ea5d897514fe44f68ab883.gif
-rw------- 1 u26153 26153  30006 2013-02-18 18:14 fb-share-ssw.gif
-rw------- 1 u26153 26153  33367 2013-02-18 18:14 firefox-7d06df82365214f410e431d7921ae67a.png
-rw------- 1 u26153 26153  33367 2013-02-18 18:14 firefox.png
-rw------- 1 u26153 26153  48748 2013-02-18 18:14 FontAwesome-f3c826ec02ee77d0281789cd5fbf7f66.otf
-rw------- 1 u26153 26153  48748 2013-02-18 18:14 FontAwesome.otf
-rwx------ 1 u26153 26153  68476 2013-02-18 18:14 fontawesome-webfont-051ad87b009ee42d2e724ebf50750e55.ttf
-rwx------ 1 u26153 26153  41752 2013-02-18 18:14 fontawesome-webfont-3b5c7e67198f3081bb7938bf208a0d76.woff
-rwx------ 1 u26153 26153  38708 2013-02-18 18:14 fontawesome-webfont-469447bf12dbcbfefdf0ffc3352f358b.eot
-rwx------ 1 u26153 26153 130151 2013-02-18 18:14 fontawesome-webfont-9a6f12d612cda3368a3da39946c8fe58.svg
-rwx------ 1 u26153 26153  38708 2013-02-18 18:14 fontawesome-webfont.eot
-rwx------ 1 u26153 26153 130151 2013-02-18 18:14 fontawesome-webfont.svg
-rwx------ 1 u26153 26153  68476 2013-02-18 18:14 fontawesome-webfont.ttf
-rwx------ 1 u26153 26153  41752 2013-02-18 18:14 fontawesome-webfont.woff
-rw------- 1 u26153 26153  12799 2013-02-18 18:14 glyphicons-halflings-d3c343dd8a372ea21a22144752b9013c.png
-rw------- 1 u26153 26153  12799 2013-02-18 18:14 glyphicons-halflings.png
-rw------- 1 u26153 26153   8777 2013-02-18 18:14 glyphicons-halflings-white-de4fb1fa1dee98c6ffca03c4df5b620e.png
-rw------- 1 u26153 26153   8777 2013-02-18 18:14 glyphicons-halflings-white.png
-rw------- 1 u26153 26153   1689 2013-02-18 18:14 gradient-grey-top-8bfa4a656717165db04003cb3046e34e.gif
-rw------- 1 u26153 26153   1689 2013-02-18 18:14 gradient-grey-top.gif
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 homepage
-rw------- 1 u26153 26153   1369 2013-02-18 18:14 icon16-fa1f869fe6ea1359e0d55d52fea1337c.png
-rw------- 1 u26153 26153   1369 2013-02-18 18:14 icon16.png
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 icons
-rw------- 1 u26153 26153   1870 2013-02-18 18:14 influencer-67dde8e08832390ab39608355a2abbc9.gif
-rw------- 1 u26153 26153   1870 2013-02-18 18:14 influencer.gif
drwx------ 9 u26153 26153   4096 2013-02-18 18:16 install
drwx------ 2 u26153 26153  12288 2013-02-18 18:16 jquery-ui
-rw------- 1 u26153 26153   3511 2013-02-18 18:14 logo-ed55ec01e17712349c41f9d664882a13.png
-rw------- 1 u26153 26153   6806 2013-02-18 18:14 logo-large-976d272bddd506ad889e9c110410ee4f.png
-rw------- 1 u26153 26153   6806 2013-02-18 18:14 logo-large.png
-rw------- 1 u26153 26153   3511 2013-02-18 18:14 logo.png
-rw------- 1 u26153 26153   3003 2013-02-18 18:14 logo-white-f1e4a127637c9088f7a76953ef4c41f2.png
-rw------- 1 u26153 26153   3003 2013-02-18 18:14 logo-white.png
-rw------- 1 u26153 26153   9468 2013-02-18 18:14 manifest-9c0f5a3e1d4ade936e4b49257f4807aa.yml
-rw------- 1 u26153 26153   9468 2013-02-18 18:14 manifest.yml
-rw------- 1 u26153 26153  31520 2013-02-18 18:14 msie-7f811b6c6d3dd3f487183ca0e62784c8.png
-rw------- 1 u26153 26153  31520 2013-02-18 18:14 msie.png
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 nav
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 partner
drwx------ 4 u26153 26153   4096 2013-02-18 18:15 partners
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 pitch
-rw------- 1 u26153 26153 596962 2013-02-18 18:14 pitch-deck-143486f0890ca1b82283e4ef9ce44cad.png
-rw------- 1 u26153 26153 596962 2013-02-18 18:14 pitch-deck.png
-rw------- 1 u26153 26153  53834 2013-02-18 18:14 platforms-85462461dbc0fcac03419b82f9c16ff1.png
-rw------- 1 u26153 26153  53834 2013-02-18 18:14 platforms.png
-rw------- 1 u26153 26153   2660 2013-02-18 18:14 profile-d3f366d9b5876af560fd8dbacec9ac68.jpg
-rw------- 1 u26153 26153   2660 2013-02-18 18:14 profile.jpg
-rw------- 1 u26153 26153   2963 2013-02-18 18:14 quest-bar-c09f6870e4be8a6ca85628f115a7cf46.png
-rw------- 1 u26153 26153   2963 2013-02-18 18:14 quest-bar.png
-rw------- 1 u26153 26153   6646 2013-02-18 18:14 rails-418c3aa85fbd730c557bda0bc8eebcbe.png
drwx------ 6 u26153 26153   4096 2013-02-18 18:16 rails_admin
-rw------- 1 u26153 26153   6646 2013-02-18 18:14 rails.png
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 retailers
-rw------- 1 u26153 26153   2724 2013-02-18 18:14 retailers-header-e872a401233c559f4c011f8178a80d0d.png
-rw------- 1 u26153 26153   2724 2013-02-18 18:14 retailers-header.png
-rw------- 1 u26153 26153  57387 2013-02-18 18:14 reward_greeting-72cf85d68c0f929872d95b24ead99eab.png
-rw------- 1 u26153 26153  57387 2013-02-18 18:14 reward_greeting.png
-rw------- 1 u26153 26153   2284 2013-02-18 18:14 rewards-center-ad9b8a594f8c0ee394b898bc65f11a4f.png
-rw------- 1 u26153 26153   2284 2013-02-18 18:14 rewards-center.png
-rw------- 1 u26153 26153  29219 2013-02-18 18:14 safari-5c69387392e8d9d6a99490fd7ab60665.png
-rw------- 1 u26153 26153  29219 2013-02-18 18:14 safari.png
-rw------- 1 u26153 26153   3498 2013-02-18 18:14 search-bar-0847c720a2e5b7b5c2727b202f592a16.gif
-rw------- 1 u26153 26153   3498 2013-02-18 18:14 search-bar.gif
-rw------- 1 u26153 26153  11505 2013-02-18 18:14 search-result-amazon-cae4830bff2400c4962fc3e326ad0167.gif
-rw------- 1 u26153 26153  11505 2013-02-18 18:14 search-result-amazon.gif
-rw------- 1 u26153 26153  10556 2013-02-18 18:14 search-results-amazon-shoes-f256958c297b83b581ae89205c820f62.gif
-rw------- 1 u26153 26153  10556 2013-02-18 18:14 search-results-amazon-shoes.gif
-rw------- 1 u26153 26153  31729 2013-02-18 18:14 search-results-shoes-73d49e564dae6f92a99935971bbf356f.gif
-rw------- 1 u26153 26153  31729 2013-02-18 18:14 search-results-shoes.gif
-rw------- 1 u26153 26153  10030 2013-02-18 18:14 search-result-target-10f95dfae95e21e38998bf7b8c82a1ff.gif
-rw------- 1 u26153 26153  10030 2013-02-18 18:14 search-result-target.gif
-rw------- 1 u26153 26153  11292 2013-02-18 18:14 search-result-walmart-5423fc95a10d54e0a602316407cdd14d.gif
-rw------- 1 u26153 26153  11292 2013-02-18 18:14 search-result-walmart.gif
-rw------- 1 u26153 26153  11306 2013-02-18 18:14 share-variables-8a93ce145d1398b2f4f36be3571d2f23.gif
-rw------- 1 u26153 26153  11306 2013-02-18 18:14 share-variables.gif
-rw------- 1 u26153 26153  21291 2013-02-18 18:14 shop-share-give-2f4861f75272d22fb7fd6322bfcc824a.png
-rw------- 1 u26153 26153  33916 2013-02-18 18:14 shop-share-give-big-7c575fbfca0a3bdfb15d6c68a542ce00.png
-rw------- 1 u26153 26153  33916 2013-02-18 18:14 shop-share-give-big.png
-rw------- 1 u26153 26153  21291 2013-02-18 18:14 shop-share-give.png
-rw------- 1 u26153 26153  22214 2013-02-18 18:14 shop-share-win-4bf610157aecf584f4daed02be7ec815.png
-rw------- 1 u26153 26153  36294 2013-02-18 18:14 shop-share-win-big-93e7901d78b5750dc051851000dad87c.png
-rw------- 1 u26153 26153  36294 2013-02-18 18:14 shop-share-win-big.png
-rw------- 1 u26153 26153  22214 2013-02-18 18:14 shop-share-win.png
-rw------- 1 u26153 26153  22417 2013-02-18 18:14 splash-bag-90796e21f5151e9a206ee1ceb028c913.gif
-rw------- 1 u26153 26153  22417 2013-02-18 18:14 splash-bag.gif
drwx------ 2 u26153 26153   4096 2013-02-18 18:16 spw
-rw------- 1 u26153 26153  14998 2013-02-18 18:14 ssg-1234-fdddbf803e7bebea45decd659fa33a0d.gif
-rw------- 1 u26153 26153  14998 2013-02-18 18:14 ssg-1234.gif
-rw------- 1 u26153 26153   2730 2013-02-18 18:14 stand-out-cea8cef3fbf56633ee97ff0c88ad8db5.gif
-rw------- 1 u26153 26153   2730 2013-02-18 18:14 stand-out.gif
-rw------- 1 u26153 26153   2157 2013-02-18 18:14 star-44ec12f4f4823bf54b648388e7977a93.png
-rw------- 1 u26153 26153   2157 2013-02-18 18:14 star.png
-rw------- 1 u26153 26153   3046 2013-02-18 18:14 stars-1of3-e6265146e4f9ff3d5490248eb1cd9213.png
-rw------- 1 u26153 26153   3046 2013-02-18 18:14 stars-1of3.png
-rw------- 1 u26153 26153   3044 2013-02-18 18:14 stars-2of3-4e82d03ddbfbb0ab2a8ef982f794bc26.png
-rw------- 1 u26153 26153   3044 2013-02-18 18:14 stars-2of3.png
-rw------- 1 u26153 26153   2124 2013-02-18 18:14 stars-3of3-1f6931b75d2ebf820853b09b748a6d86.png
-rw------- 1 u26153 26153   2124 2013-02-18 18:14 stars-3of3.png
-rw------- 1 u26153 26153   2172 2013-02-18 18:14 tag-158b44efbee4c3d2114db27b000b1432.png
-rw------- 1 u26153 26153   2172 2013-02-18 18:14 tag.png
-rw------- 1 u26153 26153   7071 2013-02-18 18:14 Untitled-2-fd5a34230f32cf5a761b3cf208f99cae.gif
-rw------- 1 u26153 26153   7071 2013-02-18 18:14 Untitled-2.gif
-rw------- 1 u26153 26153  33496 2013-02-18 18:14 windows-ec398a2f73541cc4c26d8b9f26dec6c0.png
-rw------- 1 u26153 26153  33496 2013-02-18 18:14 windows.png
-rw------- 1 u26153 26153   1185 2013-02-18 18:14 yellow-flag-f27b4be47c8bf15efc5a8939fabdd92a.png
-rw------- 1 u26153 26153   1185 2013-02-18 18:14 yellow-flag.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:59:54.973

可以想象，`public/assets`其中包含您尚未清理的旧文件。如果 heroku 在他们的服务器上预编译你的资产，那么你不需要在你的本地主机上这样做。

运行`rake assets:clean`以摆脱旧文件并忘记`rake assets:precompile`任务存在。

我想你会在这样做之后看到情况的变化。

# matlab - 如何在无限极限之间绘制参数函数？

> ID：14945995
> 
> 赞同：1
> 
> 时间：2013-02-18T21:54:20.530
> 
> 标签：matlab, plot, parametric-equations

如何使用matlab绘制这些具有无限限制的参数函数以得到一个圆？

```
x(t)=2t/(1+t.^2)
y(t)=(1-t.^2)/(1+t.^2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:27:08.223

我不知道无限的限制，但

```
%Construct a vector of t ranging from a very small number to a very large number
t = -1000:0.1:1000; 

%Create x and y vectors based on your formula (with a couple of extra dots for element wise division)
x =2*t./(1+t.^2);
y =(1-t.^2)./(1+t.^2);

%Just normal plotting now
plot(x,y) 
```

给我一个圆圈。但是，在 (0, -1) 附近仍然会有一个微小的差距。

# javascript - jQuery 与 Prototype 冲突（noconflict 不起作用）

> ID：14945996
> 
> 赞同：-1
> 
> 时间：2013-02-18T21:54:20.923
> 
> 标签：javascript, jquery, prototypejs

我使用 jQuery v1.6.4 [http://code.jquery.com/jquery-1.6.4.js](http://code.jquery.com/jquery-1.6.4.js) 和[原型](http://www.thegamelounge.net/public/js/3rd_party/prototype.js)。

我正在尝试使用 jQuery Tabs 小部件，它与原型冲突。结果，输入的上传按钮不起作用。

我试图解决这个问题，但它似乎不起作用。

```
<script type="text/javascript">
  jQuery.noConflict();
  _ccsjQ(function() {
    _ccsjQ( "#tabs" ).tabs();
  });
</script> 
```

有趣的是，如果我按 F5，上传按钮会起作用，而当我刷新时，它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:03:40.630

简单的方法（恕我直言）只是调用`jQuery.noConflict()`然后将任何 jQuery 代码包装在一个匿名函数中：

```
jQuery.noConflict();
(function($){
  // use your standard $(...) in here
})(jQuery); 
```

或者，如果您不打算使用 jQuery，则需要为 jQuery 分配一个新别名`jQuery(...)`（例如`var jq = jQuery.noConflict();`，然后使用`jq(...)`）。

两者都使用的示例：

```
 <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>
    <script type="text/javascript">
        var _cssjQ = jQuery.noConflict();
        _cssjQ('.foo').css('color','#f0f');
        (function($){
            $('.bar').css('color','#f0f');
        })(jQuery);
    </script> 
```

和小提琴：http: [//jsfiddle.net/kbWah/1/](http://jsfiddle.net/kbWah/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T13:56:59.963

1）先定义jquery

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
```

2) 在 Jquery 之后和原型之前添加脚本

```
<script>
  var pjquery = jQuery.noConflict();//pjquery will represent jquery framework now on-wards
</script> 
```

3) 现在定义prototype.js

```
<script type = "text/javascript" src = "js/prototype.js" ></script> 
```

* * *

现在，无论何时 jquery 都被称为 use`pjquery`而不是`$`or `Jquery`。

# java - 验证变量是否在 Java 范围内

> ID：14945998
> 
> 赞同：2
> 
> 时间：2013-02-18T21:54:24.293
> 
> 标签：java

我有三个整数，它们在作为命令行参数传入后分配给变量。我想验证每个整数都在 1-5 范围内。有没有一种方法可以在不使用如下 if 语句的情况下在 Java 中实现这一点？我想避免这样做（注意伪代码）：

```
if ((a & b & c) > 0 && (a & b & c) < 6) {
//blah blah
} 
```

主要是，如果将来添加其他参数等，这将无法很好地扩展。有没有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T21:56:52.497

我认为可以做出的唯一改进（为了可读性）是：

```
public boolean isInRange(int i) {
    return i > 0 && i < 6;
} 
```

然后改为调用该函数。

如果`a`、`b`和`c`相关，您也可以考虑使用数组并循环遍历它。就像是：

```
public boolean allInRange(int[] arr) {
    for (int i = 0; i < arr.length; i ++) {
        if (!isInRange(arr[i])) return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T22:01:22.583

像这样的东西怎么样：

```
validate(int ... args) {
    for (int arg : args) {
        if (arg < 1 || arg > 5) {
            throw IllegalArgumentException("Argument is not in valid range [1..5]: " + arg);
        }
    }
} 
```

然后调用这个辅助方法

```
validate(a,b,c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:58:56.720

您可以创建一个向其传递整数的方法，该方法可以返回 a`boolean`取决于它是否在范围内。

另一种方法是创建一个接收整数列表`List<Integer> myList`或整数数组的方法，并检查每个整数是否在范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T22:05:33.113

这是一种不使用多个`&&`s 的更快方法（**仅适用于整数**）：

```
private static boolean isInRange(int num, int min, int max) {
    return (num - min - Integer.MIN_VALUE) <= (max - (1 - Integer.MIN_VALUE));
} 
```

用法：

```
public static void main(String[] args) {
    System.out.println(isInRange(5,1,7)); // true
    System.out.println(isInRange(5,1,3)); // false
} 
```